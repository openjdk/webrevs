{"files":[{"patch":"@@ -179,1 +179,1 @@\n-        \/\/       which would be useful in varoius places, such as PageReporter.getResultGlyph\n+        \/\/       which would be useful in various places, such as PageReporter.getResultGlyph\n","filename":"src\/share\/classes\/jdk\/codetools\/apidiff\/Main.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -100,1 +100,1 @@\n-         * Whether or not {@code --enable-preview} has been specified.\n+         * Whether {@code --enable-preview} has been specified.\n","filename":"src\/share\/classes\/jdk\/codetools\/apidiff\/Options.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -56,5 +56,17 @@\n-`apidiff` provides different groups of options, to specify\n-the [APIs](#the-apis) and\n-the [elements in those APIs](#the-elements-to-be-compared) to be compared,\n-[output options](#output-options) for the report to be generated, and\n-[other options](#other-options).\n+`apidiff` provides different groups of options, to specify:\n+\n+* the [APIs](#the-apis) to be compared,\n+* the [elements in those APIs](#the-elements-to-be-compared) to be compared,\n+* the [output options](#output-options) for the report to be generated, and\n+* [other options](#other-options).\n+\n+All options have a long form, beginning with `--`. Some options may have\n+a single-letter form, beginning with just `-`. For those options that take\n+an argument, the value may be separated from the option name by either white\n+space or '='. In general, as is common with most JDK tools, if an option\n+is repeated, the rule is \"last one wins\". This rule is modified for\n+the options that specify the APIs to be compared, such that \"last one wins\"\n+only applies within the group of API-specific options used to define each API.\n+\n+To see detailed information about how the options are processed, \n+use [`--verbose options`](#option-verbose).\n@@ -65,3 +77,10 @@\n-followed by a series of options that apply to that API. Most of the options are the\n-same as the corresponding _javac_ option; see the _javac_ documentation for more details\n-about those options.\n+followed by a series of _API-specific options_ that apply to that API. \n+\n+The API-specific options must at least include options to find the source\n+or class files for the declarations to be compared. The options should \n+also define the location of the generated documentation if that is to be\n+included in the comparison. (When comparing the API documentation, it is\n+not enough to just specify the location of that documentation.)\n+\n+Note that the API-specific options for each API are separate and distinct\n+from the API-specific options for any other API. \n@@ -72,2 +91,8 @@\n-    The option, and the API-specific options that follow, should be provided for each API\n-    to be compared.\n+    The name will appear in the generated reports when identifying any differences.\n+    If the generated report will be publicly shared, it is recommended that\n+    the name should be reasonably meaningful to any readers.\n+    A longer, more descriptive label may also be given with the `--label` option.\n+\n+    The option, and the API-specific options that follow, should be provided for \n+    each API to be compared.\n+\n@@ -84,6 +109,0 @@\n-<a id=\"option-class-path\">`--class-path` *path*, `-classpath` *path*, or `-cp` *path*<\/a>\n-:   Specifies where to find files for the class path for the [current API](#the-current-api).\n-\n-<a id=\"option-enable-preview\">`--enable-preview`<\/a>\n-:   Enables preview language features for the [current API](#the-current-api).\n-\n@@ -92,1 +111,26 @@\n-    various options. For example, *repository*`\/build\/`*configuration-name*\n+    various options. The builds can either be for default-named configurations in\n+    separate repositories or work areas, or for differently named configurations in\n+    the same repository. (To create different configurations within the same JDK\n+    repository, use the `--with-conf-name` option when running `sh .\/configure`\n+    to create the configuration.)\n+\n+    It is a matter of personal preference whether to use separate repositories\n+    or separate configurations within a single repository for the instances\n+    of the API to be compared.\n+    \n+    * Using separate repositories uses more disk space, but makes it more\n+      convenient to not have to specify the desired configuration every time \n+      you run `make`.\n+    * Using separate configurations in a single repository uses less disk space,\n+      but means that you will have to indicate which configuration to use\n+      every time you run `make`.\n+\n+    When using this option, it should not be necessary to give any additional \n+    `javac`-like options, like `--module-path` or `--release`.\n+    \n+    For example, \n+\n+    * `--jdk-build` *repository*`\/build\/`*configuration-name*\n+    * `--jdk-build \/Users\/Duke\/jdk-dev\/build\/macosx-aarch64`\n+    * `--jdk-build \/Users\/Duke\/jdk-dev\/build\/macosx-aarch64-server-release`\n+    * `--jdk-build $HOME\/OpenJDK\/build\/linux-x86_64-server-fastdebug`\n@@ -98,0 +142,9 @@\n+The following API options are similar to the corresponding `javac` option; \n+see the `javac` documentation for more details about the arguments for those options.\n+\n+<a id=\"option-class-path\">`--class-path` *path*, `-classpath` *path*, or `-cp` *path*<\/a>\n+:   Specifies where to find files for the class path for the [current API](#the-current-api).\n+\n+<a id=\"option-enable-preview\">`--enable-preview`<\/a>\n+:   Enables preview language features for the [current API](#the-current-api).\n+\n@@ -132,0 +185,7 @@\n+The following options are used to specify the elements (declarations) to be compared\n+within the [APIs](#the-apis), specified by the various `--api` options and associated\n+API-specific options.\n+\n+These options apply equally to all the APIs to be compared: there is no need\n+to repeat these options for each API to be compared. \n+\n@@ -145,2 +205,3 @@\n-:   Specifies the patterns for modules or packages to be excluded from the\n-    comparison.\n+:   Specifies the [patterns](#patterns) for modules or packages to be excluded \n+    from the comparison. The default is that none of the elements specified with\n+    `--include` options are excluded.\n@@ -149,2 +210,2 @@\n-:   Specifies the patterns for modules or packages to be included from the\n-    comparison.\n+:   Specifies the [patterns](#patterns) for modules or packages to be included \n+    in the comparison. There must be at least one `--include` option.\n@@ -153,1 +214,1 @@\n-:   Specifies that the API descriptions (as generated by javadoc) should be compared\n+:   Specifies that the API descriptions (as generated by `javadoc`) should be compared\n@@ -155,3 +216,3 @@\n-    The option defaults to `true` if documentation comments are not to be compared\n-    and if an API directory is given for each instance of the API to be\n-    compared. (See `--compare-doc-comments`).\n+    The option defaults to `true` if an API directory is given for each instance \n+    of the API to be compared and if documentation comments are not to be compared. \n+    (See `--compare-doc-comments`).\n@@ -166,1 +227,1 @@\n-:   Specifies that the HTML for the API descriptions (as generated by javadoc)\n+:   Specifies that the HTML for the API descriptions (as generated by `javadoc`)\n@@ -181,0 +242,4 @@\n+    It need not be specified if all the APIs specified by `--jdk-build`\n+    have exactly one directory matching the name `images\/*docs*`:\n+    this is typically the case when building the OpenJDK `docs` or `docs-jdk`\n+    targets.\n@@ -235,1 +300,1 @@\n-    `all`, `none`, or one of the following, optionally preceded by `-`:\n+    `all`, `none`, or one of the following, optionally preceded by `-` to negate the flag:\n@@ -238,0 +303,8 @@\n+    | Flag      | Description                                                                |\n+    |:----------|:---------------------------------------------------------------------------|\n+    | `module`  | Report on the modules being compared                                       |\n+    | `package` | Report on the modules and packages being compared                          |\n+    | `type`    | Report on the modules, packages, and classes and interfaces being compared |\n+    | `time`    | Report the time taken to perform the comparison and generate the reports   |\n+    | `options` | Report how the command-line options are processed                          |\n+\n@@ -241,1 +314,2 @@\n-    `apidiff` commands of any length on any operating system.\n+    `apidiff` commands of any length on any operating system. The syntax for the contents\n+    of the file is similar to that for other JDK commands, like `javac` and `javadoc`.\n@@ -259,1 +333,1 @@\n-and is the API for which any API-specific options will apply.\n+and is the API for which any subsequent API-specific options will apply.\n@@ -302,0 +376,7 @@\n+For example,\n+\n+  * `java.base\/java.nio.**` matches all types in the `java.nio` packages\n+    and corresponding subpackages, in the `java.base` module\n+  * `java.compiler\/**` matches all packages and types in the `java.compiler`\n+    module\n+\n@@ -398,5 +479,9 @@\n-  applies to all instances to be compared, and is not specific to the\n-  [current API](#the-current-api). Use the `--compare-doc-comments` and\n-  `--compare-api-descriptions` as needed to indicate the comparisons to be included\n-  in the report.  If neither are specified, `--compare-api-descriptions` is\n-  the default.\n+  applies to all instances to be compared, and need only be given once; \n+  it is not specific to the [current API](#the-current-api). \n+  Use the `--compare-doc-comments` and `--compare-api-descriptions` as needed \n+  to indicate the comparisons to be included in the report.  \n+  If neither are specified, `--compare-api-descriptions` is the default.\n+\n+While the `--jdk-build` option provides a convenient way to have the tool\n+automatically generate the equivalent underlying options, you can instead\n+specify those options directly.\n@@ -459,1 +544,1 @@\n-all the versions of the documentation to be compared.  When building JDK, although\n+the documentation for all the versions to be compared.  When building JDK, although\n@@ -473,0 +558,40 @@\n+### Comparing non-JDK APIs\n+\n+If the API does not define any modules, use an appropriate combination of the\n+`--source-path`, `--class-path`, and `--api-directory` options.\n+You can put either the compiled classes or a JAR file on the class path.\n+If you want to compare documentation comments, put the source files on the \n+source path. If you want to compare the API documentation, use the \n+`--api-directory` to specify the root directory of the documentation.\n+\n+For example, to set up an API to be able to compare the API documentation \n+associated with a JAR file:\n+\n+    --api before --class-path build\/example.jar --api-directory build\/docs\/api\n+\n+To set up an API to be able to compare the documentation comments for a project:\n+\n+    --api before --source-path src\/main\/java\n+\n+In both cases, you can specify any additional dependencies on the class path.\n+\n+If the API defines one or more modules, use an appropriate combination of the\n+`--module-source-path`, `--module-path`, and `--api-directory` options.\n+You can put either the module or a directory of modules on the module path,\n+where a module is anything that can be recognized as such by `javac`.\n+If you want to compare documentation comments, put the source files on the\n+module source path. If you want to compare the API documentation, use the\n+`--api-directory` to specify the root directory of the documentation.\n+\n+For example, to set up an API to be able to compare the API documentation \n+associated with the modules for a project:\n+\n+    --api before --module-path build\/modules --api-directory build\/docs\/api\n+\n+To set up an API to be able to compare the documentation comments for a \n+project that defines a module called `com.example`:\n+\n+    --api before --module-source-path com.example=src\/main\/java\n+\n+In both cases, you can specify any additional dependencies on the module path. \n+\n@@ -513,1 +638,1 @@\n-## Example\n+## Examples\n@@ -515,1 +640,3 @@\n-To compare APIs in the `java.base` module in JDK builds `\/local\/baseline-jdk` and `\/local\/updated-jdk`, and place the result in the directory `out`, run the following command:\n+To compare APIs in the `java.base` module in JDK builds `\/local\/baseline-jdk` \n+and `\/local\/updated-jdk`, and place the result in the directory `out`, \n+run the following command:\n@@ -529,0 +656,27 @@\n+To compare the changes for the fix for an issue such as JDK-8330183, \n+using two separate configurations in the same repo, use a command like this:\n+\n+```\n+apidiff \\\n+    --api jdk24 --jdk-build build\/baseline \\\n+    --api 8330183 --jdk-build build\/macosx-aarch64-server-release  \\\n+    --include java.compiler\/** \\\n+    --output-directory build\/apidiff\n+```\n+\n+While the previous example is minimal, it could be augmented by\n+providing additional details to be included in the output, and\n+additional options to be explicit about some of the desired settings.\n+\n+```\n+apidiff \\\n+    --api jdk24 --jdk-build build\/baseline --label \"The baseline for the changes\"\\\n+    --api 8330183 --jdk-build build\/macosx-aarch64-server-release --label \"Add SourceVersion.RELEASE_24\" \\\n+    --include java.compiler\/** \\\n+    --output-directory build\/apidiff \\\n+    --compare-api-descriptions true \\\n+    --jdk-docs docs \\\n+    --info-text top=\"This proposal is not yet final\" \\\n+    --title \"Diffs for JDK-8330183 CSR\" \\\n+    --description \"Generated by $USER at $(date -u)\"\n+```\n\\ No newline at end of file\n","filename":"src\/share\/doc\/apidiff.md","additions":191,"deletions":37,"binary":false,"changes":228,"status":"modified"}]}