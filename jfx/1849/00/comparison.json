{"files":[{"patch":"@@ -267,1 +267,1 @@\n-                const bool isFocusGained = LOWORD(wParam) != WA_INACTIVE && HIWORD(wParam) == 0;\n+                const bool isActive = LOWORD(wParam) != WA_INACTIVE && HIWORD(wParam) == 0;\n@@ -269,1 +269,1 @@\n-                if (!isFocusGained && IsCommonDialogOwner()) {\n+                if (!isActive && IsCommonDialogOwner()) {\n@@ -274,1 +274,1 @@\n-                HWND hWndInsertAfter = isFocusGained ? HWND_TOPMOST : HWND_BOTTOM;\n+                HWND hWndInsertAfter = isActive ? HWND_TOPMOST : HWND_BOTTOM;\n@@ -285,1 +285,1 @@\n-                    window->HandleActivateEvent(isFocusGained ?\n+                    window->HandleActivateEvent(isActive ?\n@@ -292,1 +292,1 @@\n-                    if (!isFocusGained) {\n+                    if (!isActive) {\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/win\/FullScreenWindow.cpp","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -386,1 +386,1 @@\n-                const bool isFocusGained = LOWORD(wParam) != WA_INACTIVE && HIWORD(wParam) == 0;\n+                const bool isActive = LOWORD(wParam) != WA_INACTIVE && HIWORD(wParam) == 0;\n@@ -389,1 +389,1 @@\n-                    HWND hWndInsertAfter = isFocusGained ? HWND_TOPMOST : HWND_BOTTOM;\n+                    HWND hWndInsertAfter = isActive ? HWND_TOPMOST : HWND_BOTTOM;\n@@ -394,3 +394,3 @@\n-                    HandleActivateEvent(isFocusGained ?\n-                            com_sun_glass_events_WindowEvent_FOCUS_GAINED :\n-                            com_sun_glass_events_WindowEvent_FOCUS_LOST);\n+                    HandleActivateEvent(isActive ?\n+                         com_sun_glass_events_WindowEvent_FOCUS_GAINED :\n+                         com_sun_glass_events_WindowEvent_FOCUS_LOST);\n@@ -414,1 +414,1 @@\n-                SetFocused(true);\n+                HandleFocusEvent(com_sun_glass_events_WindowEvent_FOCUS_GAINED);\n@@ -419,1 +419,1 @@\n-                SetFocused(false);\n+                HandleFocusEvent(com_sun_glass_events_WindowEvent_FOCUS_LOST);\n@@ -813,1 +813,1 @@\n-    const bool active = event != com_sun_glass_events_WindowEvent_FOCUS_LOST;\n+    const bool focus = event != com_sun_glass_events_WindowEvent_FOCUS_LOST;\n@@ -815,1 +815,1 @@\n-    if (!active) {\n+    if (!focus) {\n@@ -819,0 +819,11 @@\n+    HandleFocusEvent(event);\n+}\n+\n+void GlassWindow::HandleFocusEvent(jint event)\n+{\n+    const bool focus = event != com_sun_glass_events_WindowEvent_FOCUS_LOST;\n+\n+    if (focus == m_isFocused) return;\n+\n+    SetFocused(focus);\n+\n@@ -1872,2 +1883,1 @@\n-\n-        ::ShowWindow(hWnd, visible ? SW_SHOW : SW_HIDE);\n+        ::ShowWindow(hWnd, visible ? SW_SHOWNA : SW_HIDE);\n@@ -1878,1 +1888,4 @@\n-                    ::SetForegroundWindow(hWnd);\n+                    BOOL success = ::SetForegroundWindow(hWnd);\n+                    if (success == FALSE) {\n+                        pWindow->HandleFocusEvent(com_sun_glass_events_WindowEvent_FOCUS_LOST);\n+                    }\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/win\/GlassWindow.cpp","additions":25,"deletions":12,"binary":false,"changes":37,"status":"modified"},{"patch":"@@ -99,0 +99,1 @@\n+    void HandleFocusEvent(jint event);\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/win\/GlassWindow.h","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"}]}