{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2012, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2012, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -75,0 +75,2 @@\n+    private final DropTarget dropTarget;\n+\n@@ -197,0 +199,14 @@\n+                        Transferable transferable = e.getTransferable();\n+                        String droppedText = (String) transferable.getTransferData(DataFlavor.stringFlavor);\n+                        javafx.embed.swing.JFXPanel jfxPanel = (javafx.embed.swing.JFXPanel)comp;\n+\n+                        if (jfxPanel.getScene().getFocusOwner() instanceof javafx.scene.control.TextField tf) {\n+                            javafx.scene.control.skin.TextFieldSkin skin = (javafx.scene.control.skin.TextFieldSkin) tf.getSkin();\n+                            if (skin != null) {\n+                                \/\/ Get HitInfo at mouse coordinates relative to the TextField\n+                                Point pt = e.getLocation();\n+                                javafx.scene.text.HitInfo hit = skin.getIndex(pt.x, pt.y);\n+                                int index = hit.getInsertionIndex();\n+                                tf.insertText(index, droppedText);\n+                            }\n+                        }\n@@ -203,0 +219,3 @@\n+                    } catch (Exception ex) {\n+                        e.dropComplete(false);\n+                        return;\n@@ -205,1 +224,1 @@\n-                    e.dropComplete(lastTransferMode != null);\n+                    e.dropComplete(true);\n@@ -210,0 +229,4 @@\n+\n+            @Override\n+            public void dropActionChanged(final DropTargetDragEvent dtde) {\n+            }\n@@ -211,2 +234,0 @@\n-        comp.setDropTarget(new DropTarget(comp,\n-                DnDConstants.ACTION_COPY | DnDConstants.ACTION_MOVE | DnDConstants.ACTION_LINK, dtl));\n@@ -214,0 +235,9 @@\n+        dropTarget = new DropTarget(comp,\n+                DnDConstants.ACTION_COPY | DnDConstants.ACTION_MOVE | DnDConstants.ACTION_LINK, dtl);\n+\n+        comp.setDropTarget(dropTarget);\n+\n+    }\n+\n+    public DropTarget getDropTarget() {\n+        return dropTarget;\n@@ -290,4 +320,3 @@\n-        if (dragResult == null) {\n-            e.rejectDrag();\n-        } else {\n-            e.acceptDrag(transferModeToDropAction(dragResult));\n+        if (e.isDataFlavorSupported(DataFlavor.javaFileListFlavor) || e.isDataFlavorSupported(DataFlavor.stringFlavor)) {\n+            e.acceptDrag(e.getDropAction());\n+            return;\n@@ -295,0 +324,2 @@\n+\n+        e.rejectDrag();\n@@ -300,4 +331,3 @@\n-        if (dropResult == null) {\n-            e.rejectDrop();\n-        } else {\n-            e.acceptDrop(transferModeToDropAction(dropResult));\n+        if (e.isDataFlavorSupported(DataFlavor.javaFileListFlavor) || e.isDataFlavorSupported(DataFlavor.stringFlavor)) {\n+            e.acceptDrop(e.getDropAction());\n+            return;\n@@ -305,0 +335,2 @@\n+\n+        e.rejectDrop();\n","filename":"modules\/javafx.swing\/src\/main\/java\/com\/sun\/javafx\/embed\/swing\/SwingDnD.java","additions":44,"deletions":12,"binary":false,"changes":56,"status":"modified"}]}