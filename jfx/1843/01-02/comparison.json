{"files":[{"patch":"@@ -43,2 +43,1 @@\n-        javafx.web,\n-        javafx.swing;\n+        javafx.web;\n","filename":"modules\/javafx.controls\/src\/main\/java\/module-info.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2012, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2012, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -75,2 +75,0 @@\n-    private final DropTarget dropTarget;\n-\n@@ -199,14 +197,0 @@\n-                        Transferable transferable = e.getTransferable();\n-                        String droppedText = (String) transferable.getTransferData(DataFlavor.stringFlavor);\n-                        javafx.embed.swing.JFXPanel jfxPanel = (javafx.embed.swing.JFXPanel)comp;\n-\n-                        if (jfxPanel.getScene().getFocusOwner() instanceof javafx.scene.control.TextField tf) {\n-                            javafx.scene.control.skin.TextFieldSkin skin = (javafx.scene.control.skin.TextFieldSkin) tf.getSkin();\n-                            if (skin != null) {\n-                                \/\/ Get HitInfo at mouse coordinates relative to the TextField\n-                                Point pt = e.getLocation();\n-                                javafx.scene.text.HitInfo hit = skin.getIndex(pt.x, pt.y);\n-                                int index = hit.getInsertionIndex();\n-                                tf.insertText(index, droppedText);\n-                            }\n-                        }\n@@ -219,3 +203,0 @@\n-                    } catch (Exception ex) {\n-                        e.dropComplete(false);\n-                        return;\n@@ -224,1 +205,1 @@\n-                    e.dropComplete(true);\n+                    e.dropComplete(lastTransferMode != null);\n@@ -229,4 +210,0 @@\n-\n-            @Override\n-            public void dropActionChanged(final DropTargetDragEvent dtde) {\n-            }\n@@ -234,0 +211,2 @@\n+        comp.setDropTarget(new DropTarget(comp,\n+                DnDConstants.ACTION_COPY | DnDConstants.ACTION_MOVE | DnDConstants.ACTION_LINK, dtl));\n@@ -235,9 +214,0 @@\n-        dropTarget = new DropTarget(comp,\n-                DnDConstants.ACTION_COPY | DnDConstants.ACTION_MOVE | DnDConstants.ACTION_LINK, dtl);\n-\n-        comp.setDropTarget(dropTarget);\n-\n-    }\n-\n-    public DropTarget getDropTarget() {\n-        return dropTarget;\n@@ -320,3 +290,4 @@\n-        if (e.isDataFlavorSupported(DataFlavor.javaFileListFlavor) || e.isDataFlavorSupported(DataFlavor.stringFlavor)) {\n-            e.acceptDrag(e.getDropAction());\n-            return;\n+        if (dragResult == null) {\n+            e.rejectDrag();\n+        } else {\n+            e.acceptDrag(transferModeToDropAction(dragResult));\n@@ -324,2 +295,0 @@\n-\n-        e.rejectDrag();\n@@ -331,3 +300,4 @@\n-        if (e.isDataFlavorSupported(DataFlavor.javaFileListFlavor) || e.isDataFlavorSupported(DataFlavor.stringFlavor)) {\n-            e.acceptDrop(e.getDropAction());\n-            return;\n+        if (dropResult == null) {\n+            e.rejectDrop();\n+        } else {\n+            e.acceptDrop(transferModeToDropAction(dropResult));\n@@ -335,2 +305,0 @@\n-\n-        e.rejectDrop();\n","filename":"modules\/javafx.swing\/src\/main\/java\/com\/sun\/javafx\/embed\/swing\/SwingDnD.java","additions":12,"deletions":44,"binary":false,"changes":56,"status":"modified"},{"patch":"@@ -39,1 +39,0 @@\n-    requires javafx.controls;\n","filename":"modules\/javafx.swing\/src\/main\/java\/module-info.java","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -47,0 +47,2 @@\n+import javafx.scene.input.Dragboard;\n+import javafx.scene.input.TransferMode;\n@@ -128,0 +130,22 @@\n+\n+                        textField.setOnDragOver(event -> {\n+                            if (event.getGestureSource() != textField &&\n+                                    event.getDragboard().hasString()) {\n+                                event.acceptTransferModes(TransferMode.COPY_OR_MOVE);\n+                            }\n+\n+                            event.consume();\n+                        });\n+\n+                        textField.setOnDragDropped(event -> {\n+                            Dragboard db = event.getDragboard();\n+                            boolean success = false;\n+                            if (db.hasString()) {\n+                                textField.setText(db.getString());\n+                                success = true;\n+                            }\n+                            event.setDropCompleted(success);\n+\n+                            event.consume();\n+                        });\n+\n","filename":"tests\/manual\/swing\/DragDropOntoJavaFXControlInJFXPanelTest.java","additions":24,"deletions":0,"binary":false,"changes":24,"status":"modified"}]}