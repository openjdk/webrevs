{"files":[{"patch":"@@ -205,1 +205,1 @@\n-    public MenuBarSkin(MenuBar control) {\n+    public MenuBarSkin(final MenuBar control) {\n@@ -211,5 +211,0 @@\n-    }\n-\n-    @Override\n-    public void install() {\n-        MenuBar control = getSkinnable();\n@@ -660,0 +655,1 @@\n+    \/** {@inheritDoc} *\/\n@@ -662,4 +658,3 @@\n-        if (Platform.isFxApplicationThread()) {\n-            if (getSkinnable() == null) {\n-                return;\n-            }\n+        if (getSkinnable() == null) {\n+            return;\n+        }\n@@ -667,4 +662,4 @@\n-            if (sceneListenerHelper != null) {\n-                sceneListenerHelper.disconnect();\n-                sceneListenerHelper = null;\n-            }\n+        if (sceneListenerHelper != null) {\n+            sceneListenerHelper.disconnect();\n+            sceneListenerHelper = null;\n+        }\n@@ -672,3 +667,1 @@\n-            cleanUpListeners();\n-            cleanUpSystemMenu();\n-            getChildren().remove(container);\n+        cleanUpListeners();\n@@ -676,2 +669,2 @@\n-            \/\/ call super.dispose last since it sets control to null\n-            super.dispose();\n+        if (Platform.isFxApplicationThread()) {\n+            cleanUpSystemMenu();\n@@ -679,1 +672,1 @@\n-            Platform.runLater(this::dispose);\n+            Platform.runLater(this::cleanUpSystemMenu);\n@@ -681,0 +674,5 @@\n+\n+        getChildren().remove(container);\n+\n+        \/\/ call super.dispose last since it sets control to null\n+        super.dispose();\n@@ -1029,0 +1027,1 @@\n+    \/\/ always called in the fx application thread\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/control\/skin\/MenuBarSkin.java","additions":19,"deletions":20,"binary":false,"changes":39,"status":"modified"},{"patch":"@@ -755,3 +755,7 @@\n-            \/\/ exercise skin installation and disposal code paths\n-            c.setSkin(new MenuBarSkin(c));\n-            c.setSkin(new MenuBarSkin(c));\n+            if (nextBoolean()) {\n+                c.setSkin(new MenuBarSkin(c));\n+                if (nextBoolean()) {\n+                    \/\/ exercise skin installation and disposal code paths\n+                    c.setSkin(new MenuBarSkin(c));\n+                }\n+            }\n","filename":"tests\/system\/src\/test\/java\/test\/robot\/javafx\/scene\/NodeInitializationStressTest.java","additions":7,"deletions":3,"binary":false,"changes":10,"status":"modified"}]}