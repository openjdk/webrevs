{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2010, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -803,0 +803,6 @@\n+\n+    \/**\n+     * Checks whether there are any problems with platform preferences detection,\n+     * and emits a warning otherwise.\n+     *\/\n+    public void checkPlatformPreferencesSupport() {}\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/glass\/ui\/Application.java","additions":7,"deletions":1,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2010, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -62,0 +62,1 @@\n+    private String applicationClassName;\n@@ -93,0 +94,2 @@\n+\n+            applicationClassName = _getApplicationClassName();\n@@ -394,0 +397,2 @@\n+    private native String _getApplicationClassName();\n+\n@@ -458,0 +463,19 @@\n+\n+    private static final String SUPPRESS_AWT_WARNING_PROPERTY = \"javafx.preferences.suppressAppleAwtWarning\";\n+    private static final String AWT_APPEARANCE_PROPERTY = \"apple.awt.application.appearance\";\n+    private boolean checkSystemAppearance = !Boolean.getBoolean(SUPPRESS_AWT_WARNING_PROPERTY);\n+\n+    @Override\n+    public void checkPlatformPreferencesSupport() {\n+        if (checkSystemAppearance && \"NSApplicationAWT\".equals(applicationClassName)) {\n+            checkSystemAppearance = false;\n+\n+            if (!\"system\".equals(System.getProperty(AWT_APPEARANCE_PROPERTY))) {\n+                Logging.getJavaFXLogger().warning(String.format(\n+                    \"Reported preferences may not reflect macOS system preferences unless the system property \" +\n+                    \"%s=system is set. This warning can be disabled by setting %s=true.\",\n+                    AWT_APPEARANCE_PROPERTY,\n+                    SUPPRESS_AWT_WARNING_PROPERTY));\n+            }\n+        }\n+    }\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/glass\/ui\/mac\/MacApplication.java","additions":25,"deletions":1,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2010, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -1044,0 +1044,11 @@\n+    \/**\n+     * Emits a one-time warning on macOS if we're running with AWT and the\n+     * \"apple.awt.application.appearance=system\" property is not set (see JDK-8235363).\n+     *\/\n+    public static void checkPreferencesSupport() {\n+        var application = com.sun.glass.ui.Application.GetApplication();\n+        if (application != null) {\n+            application.checkPlatformPreferencesSupport();\n+        }\n+    }\n+\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/application\/PlatformImpl.java","additions":12,"deletions":1,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2010, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -454,0 +454,1 @@\n+        PlatformImpl.checkPreferencesSupport();\n","filename":"modules\/javafx.graphics\/src\/main\/java\/javafx\/application\/Platform.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -1274,1 +1274,13 @@\n- * Method:    getPreferences\n+ * Method:    _getApplicationClassName\n+ * Signature: ()Ljava\/lang\/String;\n+ *\/\n+JNIEXPORT jobject JNICALL Java_com_sun_glass_ui_mac_MacApplication__1getApplicationClassName\n+(JNIEnv *env, jobject self)\n+{\n+    NSString* className = NSStringFromClass([[NSApplicationFX sharedApplication] class]);\n+    return (*env)->NewStringUTF(env, [className UTF8String]);\n+}\n+\n+\/*\n+ * Class:     com_sun_glass_ui_mac_MacApplication\n+ * Method:    getPlatformPreferences\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassApplication.m","additions":14,"deletions":2,"binary":false,"changes":16,"status":"modified"}]}