{"files":[{"patch":"@@ -806,1 +806,1 @@\n-     * and emits a warning otherwise.\n+     * and if so, emits a warning.\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/glass\/ui\/Application.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -466,1 +466,6 @@\n-    private boolean checkSystemAppearance = !Boolean.getBoolean(SUPPRESS_AWT_WARNING_PROPERTY);\n+    private static final String AWT_APPLICATION_CLASS = \"NSApplicationAWT\";\n+    private static final String AWT_SYSTEM_APPEARANCE = \"system\";\n+\n+    @SuppressWarnings(\"removal\")\n+    private boolean checkSystemAppearance = AccessController.doPrivileged(\n+            (PrivilegedAction<Boolean>) () -> !Boolean.getBoolean(SUPPRESS_AWT_WARNING_PROPERTY));\n@@ -470,1 +475,1 @@\n-        if (checkSystemAppearance && \"NSApplicationAWT\".equals(applicationClassName)) {\n+        if (checkSystemAppearance && AWT_APPLICATION_CLASS.equals(applicationClassName)) {\n@@ -473,1 +478,5 @@\n-            if (!\"system\".equals(System.getProperty(AWT_APPEARANCE_PROPERTY))) {\n+            @SuppressWarnings(\"removal\")\n+            String awtAppearanceProperty = AccessController.doPrivileged(\n+                (PrivilegedAction<String>) () -> System.getProperty(AWT_APPEARANCE_PROPERTY));\n+\n+            if (!AWT_SYSTEM_APPEARANCE.equals(awtAppearanceProperty)) {\n@@ -476,1 +485,1 @@\n-                    \"%s=system is set. This warning can be disabled by setting %s=true.\",\n+                    \"%s=%s is set. This warning can be disabled by setting %s=true.\",\n@@ -478,0 +487,1 @@\n+                    AWT_SYSTEM_APPEARANCE,\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/glass\/ui\/mac\/MacApplication.java","additions":14,"deletions":4,"binary":false,"changes":18,"status":"modified"}]}