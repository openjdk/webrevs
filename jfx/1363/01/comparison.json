{"files":[{"patch":"@@ -31,0 +31,1 @@\n+import javafx.application.Platform;\n@@ -349,0 +350,31 @@\n+    \/*\n+     * The layoutChildren() method is overridden to address a specific accessibility issue: JDK-8309374\n+     * If the Accessibility client application requests FOCUS_ITEM before the focused\n+     * ListViewSkin\/ListCell is created, then JavaFX would return a null object,\n+     * and hence accessibility client application cannot draw the focus rectangle.\n+     * In this scenario, JavaFX should notify the accessibility application once the\n+     * focused ListCell is created and its layout is completed.\n+     *\/\n+    \/** {@inheritDoc} *\/\n+    @Override protected void layoutChildren() {\n+        super.layoutChildren();\n+\n+        if (isFocused()) {\n+            ListView<T> listView = getListView();\n+            if (listView != null) {\n+                \/*\n+                 * The notifyAccessibleAttributeChanged() call is submitted via runLater to defer it until after\n+                 * the layout completes, because:\n+                 * It is possible that when accessibility client application is processing a FOCUS_ITEM notification,\n+                 * it may trigger a layout of focused ListItem, and it ends up generating another FOCUS_ITEM change\n+                 * notification from here.\n+                 * We observed that this scenario occurs when client application is trying to get the\n+                 * the focus item property of a focused ListItem's parent(ListView).\n+                 * This scenario is avoided by submitting the call via runLater,\n+                 * so that the notification is not sent during any getAttribute() call.\n+                 *\/\n+                Platform.runLater(() -> listView.notifyAccessibleAttributeChanged(AccessibleAttribute.FOCUS_ITEM));\n+            }\n+        }\n+    }\n+\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/control\/ListCell.java","additions":32,"deletions":0,"binary":false,"changes":32,"status":"modified"}]}