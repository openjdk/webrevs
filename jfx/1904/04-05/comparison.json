{"files":[{"patch":"@@ -72,0 +72,2 @@\n+    \/\/NSLog(@\"windowDidBecomeKey: %p\", self);\n+\n@@ -76,1 +78,0 @@\n-    \/\/NSLog(@\"windowDidBecomeKey: %p\", self);\n@@ -99,0 +100,2 @@\n+    \/\/NSLog(@\"windowDidResignKey: %p\", self);\n+\n@@ -112,1 +115,0 @@\n-    \/\/NSLog(@\"windowDidResignKey: %p\", self);\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassWindow+Overrides.m","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -88,2 +88,3 @@\n-        List<Element> swingElements = getMenusOfFocusedWindow();\n-        compareMenus(swingElements, TEST_MENUS_0);\n+        waitForUser();\n+\/\/        List<Element> swingElements = getMenusOfFocusedWindow();\n+\/\/        compareMenus(swingElements, TEST_MENUS_0);\n@@ -92,2 +93,3 @@\n-        swingElements = getMenusOfFocusedWindow();\n-        compareMenus(swingElements, TEST_MENUS_1);\n+        waitForUser();\n+\/\/        swingElements = getMenusOfFocusedWindow();\n+\/\/        compareMenus(swingElements, TEST_MENUS_1);\n@@ -96,2 +98,3 @@\n-        swingElements = getMenusOfFocusedWindow();\n-        compareMenus(swingElements, TEST_MENUS_0);\n+        waitForUser();\n+\/\/        swingElements = getMenusOfFocusedWindow();\n+\/\/        compareMenus(swingElements, TEST_MENUS_0);\n","filename":"tests\/system\/src\/test\/java\/test\/com\/sun\/glass\/ui\/mac\/MacOSSystemMenuJFXPanelSwingFirstTest.java","additions":9,"deletions":6,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -69,2 +69,3 @@\n-        List<Element> jfxElements = getMenusOfFocusedWindow();\n-        compareMenus(jfxElements, TEST_MENUS_1);\n+        waitForUser();\n+\/\/        List<Element> jfxElements = getMenusOfFocusedWindow();\n+\/\/        compareMenus(jfxElements, TEST_MENUS_1);\n@@ -73,2 +74,3 @@\n-        jfxElements = getMenusOfFocusedWindow();\n-        compareMenus(jfxElements, TEST_MENUS_3);\n+        waitForUser();\n+\/\/        jfxElements = getMenusOfFocusedWindow();\n+\/\/        compareMenus(jfxElements, TEST_MENUS_3);\n@@ -77,2 +79,3 @@\n-        jfxElements = getMenusOfFocusedWindow();\n-        compareMenus(jfxElements, TEST_MENUS_1);\n+        waitForUser();\n+\/\/        jfxElements = getMenusOfFocusedWindow();\n+\/\/        compareMenus(jfxElements, TEST_MENUS_1);\n","filename":"tests\/system\/src\/test\/java\/test\/com\/sun\/glass\/ui\/mac\/MacOSSystemMenuMultiWindowFXOnlySwingFirst.java","additions":9,"deletions":6,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -69,2 +69,3 @@\n-        List<Element> jfxElements = getMenusOfFocusedWindow();\n-        compareMenus(jfxElements, TEST_MENUS_1);\n+        waitForUser();\n+\/\/        List<Element> jfxElements = getMenusOfFocusedWindow();\n+\/\/        compareMenus(jfxElements, TEST_MENUS_1);\n@@ -73,2 +74,3 @@\n-        jfxElements = getMenusOfFocusedWindow();\n-        compareMenus(jfxElements, TEST_MENUS_3);\n+        waitForUser();\n+\/\/        jfxElements = getMenusOfFocusedWindow();\n+\/\/        compareMenus(jfxElements, TEST_MENUS_3);\n@@ -77,2 +79,3 @@\n-        jfxElements = getMenusOfFocusedWindow();\n-        compareMenus(jfxElements, TEST_MENUS_1);\n+        waitForUser();\n+\/\/        jfxElements = getMenusOfFocusedWindow();\n+\/\/        compareMenus(jfxElements, TEST_MENUS_1);\n","filename":"tests\/system\/src\/test\/java\/test\/com\/sun\/glass\/ui\/mac\/MacOSSystemMenuMultiWindowFXOnlySwingLast.java","additions":9,"deletions":6,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -68,2 +68,3 @@\n-        List<Element> jfxElements = getMenusOfFocusedWindow();\n-        compareMenus(jfxElements, TEST_MENUS_0);\n+        waitForUser();\n+\/\/        List<Element> jfxElements = getMenusOfFocusedWindow();\n+\/\/        compareMenus(jfxElements, TEST_MENUS_0);\n@@ -72,2 +73,3 @@\n-        jfxElements = getMenusOfFocusedWindow();\n-        compareMenus(jfxElements, TEST_MENUS_1);\n+        waitForUser();\n+\/\/        jfxElements = getMenusOfFocusedWindow();\n+\/\/        compareMenus(jfxElements, TEST_MENUS_1);\n@@ -76,2 +78,3 @@\n-        jfxElements = getMenusOfFocusedWindow();\n-        compareMenus(jfxElements, TEST_MENUS_2);\n+        waitForUser();\n+\/\/        jfxElements = getMenusOfFocusedWindow();\n+\/\/        compareMenus(jfxElements, TEST_MENUS_2);\n@@ -80,2 +83,3 @@\n-        jfxElements = getMenusOfFocusedWindow();\n-        compareMenus(jfxElements, TEST_MENUS_0);\n+        waitForUser();\n+\/\/        jfxElements = getMenusOfFocusedWindow();\n+\/\/        compareMenus(jfxElements, TEST_MENUS_0);\n","filename":"tests\/system\/src\/test\/java\/test\/com\/sun\/glass\/ui\/mac\/MacOSSystemMenuMultiWindowTest.java","additions":12,"deletions":8,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -69,2 +69,3 @@\n-        List<Element> jfxElements = getMenusOfFocusedWindow();\n-        compareMenus(jfxElements, TEST_MENUS_1);\n+        waitForUser();\n+\/\/        List<Element> jfxElements = getMenusOfFocusedWindow();\n+\/\/        compareMenus(jfxElements, TEST_MENUS_1);\n@@ -73,2 +74,3 @@\n-        jfxElements = getMenusOfFocusedWindow();\n-        compareMenus(jfxElements, TEST_MENUS_3);\n+        waitForUser();\n+\/\/        jfxElements = getMenusOfFocusedWindow();\n+\/\/        compareMenus(jfxElements, TEST_MENUS_3);\n@@ -77,2 +79,3 @@\n-        List<Element> swingElements = getMenusOfFocusedWindow();\n-        compareMenus(swingElements, TEST_MENUS_0);\n+        waitForUser();\n+\/\/        List<Element> swingElements = getMenusOfFocusedWindow();\n+\/\/        compareMenus(swingElements, TEST_MENUS_0);\n@@ -81,2 +84,3 @@\n-        jfxElements = getMenusOfFocusedWindow();\n-        compareMenus(jfxElements, TEST_MENUS_3);\n+        waitForUser();\n+\/\/        jfxElements = getMenusOfFocusedWindow();\n+\/\/        compareMenus(jfxElements, TEST_MENUS_3);\n@@ -85,2 +89,3 @@\n-        swingElements = getMenusOfFocusedWindow();\n-        compareMenus(swingElements, TEST_MENUS_2);\n+        waitForUser();\n+\/\/        swingElements = getMenusOfFocusedWindow();\n+\/\/        compareMenus(swingElements, TEST_MENUS_2);\n","filename":"tests\/system\/src\/test\/java\/test\/com\/sun\/glass\/ui\/mac\/MacOSSystemMenuMultiWindowWithSwingFirstTest.java","additions":15,"deletions":10,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -73,0 +73,1 @@\n+        waitForUser();\n@@ -74,2 +75,2 @@\n-        List<Element> elements = getMenusOfFocusedWindow();\n-        compareMenus(elements, List.of());\n+\/\/        List<Element> elements = getMenusOfFocusedWindow();\n+\/\/        compareMenus(elements, List.of());\n@@ -78,2 +79,4 @@\n-        elements = getMenusOfFocusedWindow();\n-        compareMenus(elements, TEST_MENUS_1);\n+        waitForUser();\n+\n+\/\/        elements = getMenusOfFocusedWindow();\n+\/\/        compareMenus(elements, TEST_MENUS_1);\n@@ -83,2 +86,4 @@\n-        elements = getMenusOfFocusedWindow();\n-        compareMenus(elements, TEST_MENUS_0);\n+        waitForUser();\n+\n+\/\/        elements = getMenusOfFocusedWindow();\n+\/\/        compareMenus(elements, TEST_MENUS_0);\n@@ -87,2 +92,4 @@\n-        elements = getMenusOfFocusedWindow();\n-        compareMenus(elements, List.of());\n+        waitForUser();\n+\n+\/\/        elements = getMenusOfFocusedWindow();\n+\/\/        compareMenus(elements, List.of());\n@@ -92,2 +99,4 @@\n-        elements = getMenusOfFocusedWindow();\n-        compareMenus(elements, TEST_MENUS_0);\n+        waitForUser();\n+\n+\/\/        elements = getMenusOfFocusedWindow();\n+\/\/        compareMenus(elements, TEST_MENUS_0);\n@@ -96,2 +105,4 @@\n-        elements = getMenusOfFocusedWindow();\n-        compareMenus(elements, TEST_MENUS_1);\n+        waitForUser();\n+\n+\/\/        elements = getMenusOfFocusedWindow();\n+\/\/        compareMenus(elements, TEST_MENUS_1);\n","filename":"tests\/system\/src\/test\/java\/test\/com\/sun\/glass\/ui\/mac\/MacOSSystemMenuSetWithSwingTestFirst.java","additions":23,"deletions":12,"binary":false,"changes":35,"status":"modified"},{"patch":"@@ -70,1 +70,2 @@\n-        List<Element> jfxElements = getMenusOfFocusedWindow();\n+        waitForUser();\n+\/\/        List<Element> jfxElements = getMenusOfFocusedWindow();\n@@ -73,1 +74,2 @@\n-        List<Element> swingElements = getMenusOfFocusedWindow();\n+        waitForUser();\n+\/\/        List<Element> swingElements = getMenusOfFocusedWindow();\n@@ -75,2 +77,2 @@\n-        compareMenus(swingElements, TEST_MENUS_0);\n-        compareMenus(jfxElements, TEST_MENUS_1);\n+\/\/        compareMenus(swingElements, TEST_MENUS_0);\n+\/\/        compareMenus(jfxElements, TEST_MENUS_1);\n","filename":"tests\/system\/src\/test\/java\/test\/com\/sun\/glass\/ui\/mac\/MacOSSystemMenuSingleWindowWithSwingFirstTest.java","additions":6,"deletions":4,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -34,0 +34,2 @@\n+import javafx.scene.control.TextArea;\n+import javafx.scene.control.Button;\n@@ -39,0 +41,1 @@\n+import java.awt.BorderLayout;\n@@ -50,0 +53,1 @@\n+import java.util.function.Consumer;\n@@ -55,0 +59,2 @@\n+import javax.swing.JTextArea;\n+import javax.swing.JButton;\n@@ -166,0 +172,2 @@\n+    private boolean nextStep = false;\n+\n@@ -254,0 +262,6 @@\n+        TextArea menuTextArea = new TextArea();\n+        Button nextStepButton = new Button(\"Next\");\n+\n+        addMenuAsText(menus, menuTextArea::appendText, 0);\n+        nextStepButton.setOnAction(event -> nextStep = true);\n+\n@@ -256,0 +270,2 @@\n+        root.setCenter(menuTextArea);\n+        root.setBottom(nextStepButton);\n@@ -287,0 +303,6 @@\n+        JTextArea menuTextArea = new JTextArea();\n+        JButton nextStepButton = new JButton(\"Next\");\n+\n+        addMenuAsText(menus, menuTextArea::append, 0);\n+        nextStepButton.addActionListener(event -> nextStep = true);\n+\n@@ -296,0 +318,3 @@\n+        window.setLayout(new BorderLayout());\n+        window.add(menuTextArea, BorderLayout.CENTER);\n+        window.add(nextStepButton, BorderLayout.SOUTH);\n@@ -298,1 +323,1 @@\n-        window.setSize(400, 200);\n+        window.setSize(800, 400);\n@@ -318,0 +343,7 @@\n+    private void addMenuAsText(List<Element> menus, Consumer<String> append, int tabs) {\n+        for (Element menu : menus) {\n+            append.accept(\"\\t\".repeat(tabs) + menu.name + \"\\n\");\n+            addMenuAsText(menu.items, append, tabs + 1);\n+        }\n+    }\n+\n@@ -445,0 +477,12 @@\n+    protected void waitForUser() {\n+        while (!nextStep) {\n+            try {\n+                Thread.sleep(250);\n+            } catch (InterruptedException e) {\n+                \/\/ empty\n+            }\n+        }\n+\n+        nextStep = false;\n+    }\n+\n","filename":"tests\/system\/src\/test\/java\/test\/com\/sun\/glass\/ui\/mac\/MacOSSystemMenuTestBase.java","additions":45,"deletions":1,"binary":false,"changes":46,"status":"modified"}]}