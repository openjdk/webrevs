{"files":[{"patch":"@@ -42,1 +42,3 @@\n-    m_hCursor(NULL)\n+    m_hCursor(NULL),\n+    m_message_count(0),\n+    m_dead(false)\n@@ -162,0 +164,1 @@\n+        pThis->BeginMessageProcessing(msg);\n@@ -163,1 +166,1 @@\n-        if (msg == WM_NCDESTROY) {\n+        if (pThis->EndMessageProcessing()) {\n@@ -172,0 +175,17 @@\n+\/*non-static*\/\n+void BaseWnd::BeginMessageProcessing(UINT msg)\n+{\n+    if (msg == WM_NCDESTROY) {\n+        m_dead = true;\n+    }\n+    m_message_count += 1;\n+}\n+\n+bool BaseWnd::EndMessageProcessing()\n+{\n+    if (m_message_count > 0) {\n+        m_message_count -= 1;\n+    }\n+    return m_dead && (m_message_count == 0);\n+}\n+\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/win\/BaseWnd.cpp","additions":22,"deletions":2,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -70,0 +70,6 @@\n+    \/\/ Begin processing a message.\n+    void BeginMessageProcessing(UINT msg);\n+    \/\/ End processing a message. Returns 'true' if the BaseWnd should be\n+    \/\/ deleted.\n+    bool EndMessageProcessing();\n+\n@@ -81,0 +87,4 @@\n+\n+    LONG m_message_count;\n+    bool m_dead;\n+\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/win\/BaseWnd.h","additions":10,"deletions":0,"binary":false,"changes":10,"status":"modified"}]}