{"files":[{"patch":"@@ -62,1 +62,1 @@\n-    ASSERT(!FileSystem::pathGetFileName(path).endsWith('\/')); \/\/ Expecting to get a path without trailing slash, even for directories.\n+    ASSERT(!FileSystem::pathFileName(path).endsWith('\/')); \/\/ Expecting to get a path without trailing slash, even for directories.\n@@ -64,1 +64,1 @@\n-    effectiveName = makeString((nameOverride.isNull() ? FileSystem::pathGetFileName(path) : nameOverride), \".zip\"_s);\n+    effectiveName = makeString((nameOverride.isNull() ? FileSystem::pathFileName(path) : nameOverride), \".zip\"_s);\n","filename":"modules\/javafx.web\/src\/main\/native\/Source\/WebCore\/fileapi\/FileCocoa.mm","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,0 +28,2 @@\n+import java.io.File;\n+\n@@ -33,1 +35,1 @@\n-import netscape.javascript.JSObject;\n+\n@@ -37,10 +39,0 @@\n-import java.io.File;\n-import java.io.FileInputStream;\n-import java.io.FileNotFoundException;\n-import java.io.IOException;\n-import java.io.UnsupportedEncodingException;\n-import java.util.Base64;\n-import java.util.concurrent.CountDownLatch;\n-\n-import static javafx.concurrent.Worker.State.SUCCEEDED;\n-import static org.junit.Assert.assertArrayEquals;\n@@ -48,2 +40,0 @@\n-import static org.junit.Assert.assertNotNull;\n-import static org.junit.Assert.assertTrue;\n@@ -53,8 +43,2 @@\n-    private String[] fileList = { new File(\"src\/test\/resources\/test\/html\/HelloWorld.txt\").getAbsolutePath() };\n-\n-    private State getLoadState() {\n-        return submit(() -> getEngine().getLoadWorker().getState());\n-    }\n-\n-    private String getScriptString(String api) {\n-        String scriptContent = String.format(\"<script type='text\/javascript'>\" +\n+    private final String[] fileList = { new File(\"src\/test\/resources\/test\/html\/HelloWorld.txt\").getAbsolutePath() };\n+    private final String script = String.format(\"<script type='text\/javascript'>\" +\n@@ -68,1 +52,1 @@\n-                                        \"result = file.\" + api + \";\" +\n+                                        \"result = file.name;\" +\n@@ -70,5 +54,2 @@\n-                               \"<\/script>\" +\n-                               \"<body> <input type='file' id='file' onchange='readFile()'\/><\/body>\");\n-        return scriptContent;\n-    }\n-\n+                                    \"<\/script>\" +\n+                                    \"<body> <input type='file' id='file' onchange='readFile()'\/> <\/body>\");\n@@ -83,1 +64,1 @@\n-            \/\/ we send a dummy mouse click event at (0,0) to simulate click on file chooser button.\n+            \/\/ Send a dummy mouse click event at (0,0) to simulate click on file chooser button.\n@@ -88,2 +69,3 @@\n-    @Test public void testFileName() {\n-        loadFileReaderTestScript(getScriptString(\"name\"));\n+    @Test\n+    public void testFileName() {\n+        loadFileReaderTestScript(script);\n","filename":"modules\/javafx.web\/src\/test\/java\/test\/javafx\/scene\/web\/FileTest.java","additions":13,"deletions":31,"binary":false,"changes":44,"status":"modified"}]}