{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2010, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -265,1 +265,1 @@\n-     * Returns whether the window is draggable at the specified coordinate.\n+     * Classifies the window region at the specified physical coordinate.\n@@ -273,1 +273,8 @@\n-    private boolean dragAreaHitTest(int x, int y) {\n+    private int nonClientHitTest(int x, int y) {\n+        \/\/ See glass_window.cpp:HitTestResult\n+        enum HitTestResult {\n+            HT_UNSPECIFIED,\n+            HT_CAPTION,\n+            HT_CLIENT\n+        }\n+\n@@ -276,1 +283,1 @@\n-            return false;\n+            return HitTestResult.HT_CLIENT.ordinal();\n@@ -283,1 +290,1 @@\n-            return false;\n+            return HitTestResult.HT_CLIENT.ordinal();\n@@ -288,1 +295,1 @@\n-            return false;\n+            return HitTestResult.HT_CLIENT.ordinal();\n@@ -291,1 +298,5 @@\n-        return eventHandler.pickHeaderArea(wx, wy) == HeaderAreaType.DRAGBAR;\n+        return switch (eventHandler.pickHeaderArea(wx, wy)) {\n+            case UNSPECIFIED -> HitTestResult.HT_UNSPECIFIED.ordinal();\n+            case DRAGBAR -> HitTestResult.HT_CAPTION.ordinal();\n+            case null, default -> HitTestResult.HT_CLIENT.ordinal();\n+        };\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/glass\/ui\/gtk\/GtkWindow.java","additions":18,"deletions":7,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2010, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -422,1 +422,2 @@\n-            CLIENT(1), CAPTION(2), MINBUTTON(8), MAXBUTTON(9), CLOSE(20);\n+            CLIENT(1), CAPTION(2), MINBUTTON(8), MAXBUTTON(9), CLOSE(20),\n+            HTUNSPECIFIED('H' << 24 | 'T' << 16 | 'U' << 8 | 'N'); \/\/ see GlassWindow.cpp:HandleNCHitTestEvent\n@@ -444,1 +445,1 @@\n-        \/\/ Otherwise, test if the cursor is over a draggable area and return HTCAPTION.\n+        \/\/ Otherwise, pick the header area under the cursor and return the appropriate hit-testing constant.\n@@ -447,0 +448,1 @@\n+            case UNSPECIFIED -> HT.HTUNSPECIFIED.value;\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/glass\/ui\/win\/WinWindow.java","additions":5,"deletions":3,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2025, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,0 +32,1 @@\n+    UNSPECIFIED,\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/tk\/HeaderAreaType.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2010, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,1 +37,0 @@\n-import com.sun.javafx.css.media.MediaQueryContext;\n@@ -3113,0 +3112,4 @@\n+            if (result == null) {\n+                return null;\n+            }\n+\n@@ -3122,1 +3125,3 @@\n-                            : null;\n+                            : dragType != HeaderDragType.NONE\n+                                ? HeaderAreaType.UNSPECIFIED\n+                                : null;\n","filename":"modules\/javafx.graphics\/src\/main\/java\/javafx\/scene\/Scene.java","additions":8,"deletions":3,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2025, 2026, Oracle and\/or its affiliates. All rights reserved.\n","filename":"modules\/javafx.graphics\/src\/main\/java\/javafx\/scene\/layout\/HeaderBar.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2025, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -41,2 +41,2 @@\n-     * The node is not a draggable part of the {@code HeaderBar}, and not transparent in regard to\n-     * draggable-area hit testing.\n+     * The node and its descendants are not a draggable part of the {@code HeaderBar}, and not transparent\n+     * in regard to draggable-area hit testing.\n","filename":"modules\/javafx.graphics\/src\/main\/java\/javafx\/scene\/layout\/HeaderDragType.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -84,1 +84,1 @@\n-jmethodID jGtkWindowDragAreaHitTest;\n+jmethodID jGtkWindowNonClientHitTest;\n@@ -275,1 +275,1 @@\n-    jGtkWindowDragAreaHitTest = env->GetMethodID(clazz, \"dragAreaHitTest\", \"(II)Z\");\n+    jGtkWindowNonClientHitTest = env->GetMethodID(clazz, \"nonClientHitTest\", \"(II)I\");\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/gtk\/glass_general.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -190,1 +190,1 @@\n-    extern jmethodID jGtkWindowDragAreaHitTest; \/\/com.sun.glass.ui.gtk.GtkWindow#dragAreaHitTest (II)Z\n+    extern jmethodID jGtkWindowNonClientHitTest; \/\/com.sun.glass.ui.gtk.GtkWindow#nonClientHitTest (II)I\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/gtk\/glass_general.h","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -57,0 +57,7 @@\n+\/\/ See GtkWindow.java:dragAreaHitTest.HitTestResult\n+enum HitTestResult {\n+    HT_UNSPECIFIED,\n+    HT_CAPTION,\n+    HT_CLIENT\n+};\n+\n@@ -1436,2 +1443,2 @@\n-        jboolean dragArea = mainEnv->CallBooleanMethod(\n-            jwindow, jGtkWindowDragAreaHitTest, (jint)event->x, (jint)event->y);\n+        jint hitTestResult = mainEnv->CallBooleanMethod(\n+            jwindow, jGtkWindowNonClientHitTest, (jint)event->x, (jint)event->y);\n@@ -1440,1 +1447,1 @@\n-        if (dragArea) {\n+        if (hitTestResult == HT_CAPTION) {\n@@ -1449,0 +1456,3 @@\n+        jint hitTestResult = mainEnv->CallBooleanMethod(\n+            jwindow, jGtkWindowNonClientHitTest, (jint)event->x, (jint)event->y);\n+\n@@ -1450,1 +1460,5 @@\n-        bool shouldStartResizeDrag = is_resizable() && !is_maximized && get_window_edge(event->x, event->y, &edge);\n+        bool shouldStartResizeDrag =\n+            is_resizable() &&\n+            !is_maximized &&\n+            get_window_edge(event->x, event->y, &edge) &&\n+            (edge != GDK_WINDOW_EDGE_NORTH || hitTestResult != HT_CLIENT);\n@@ -1467,4 +1481,0 @@\n-        bool shouldStartMoveDrag = mainEnv->CallBooleanMethod(\n-            jwindow, jGtkWindowDragAreaHitTest, (jint)event->x, (jint)event->y);\n-        CHECK_JNI_EXCEPTION(mainEnv);\n-\n@@ -1472,1 +1482,1 @@\n-        if (shouldStartMoveDrag) {\n+        if (hitTestResult == HT_CAPTION) {\n@@ -1508,0 +1518,9 @@\n+    jint hitTestResult = mainEnv->CallBooleanMethod(\n+        jwindow, jGtkWindowNonClientHitTest, (jint)event->x, (jint)event->y);\n+\n+    if (edge == GDK_WINDOW_EDGE_NORTH && hitTestResult == HT_CLIENT) {\n+        set_cursor_override(NULL);\n+        WindowContextBase::process_mouse_motion(event);\n+        return;\n+    }\n+\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/gtk\/glass_window.cpp","additions":29,"deletions":10,"binary":false,"changes":39,"status":"modified"},{"patch":"@@ -46,0 +46,2 @@\n+#define HTUNSPECIFIED ('H' << 24 | 'T' << 16 | 'U' << 8 | 'N') \/\/ see WinWindow.java:nonClientHitTest\n+\n@@ -942,6 +944,9 @@\n-    \/\/ In contrast, the top resize border is not outside, but inside the client area and below user controls.\n-    \/\/ For example, if a control extends to the top of the client area, it covers the resize border at that\n-    \/\/ location. We know that the cursor is on top of the caption area (and not on top of a control) when\n-    \/\/ the nonClientHitTest() function returns HTCAPTION (instead of HTCLIENT). In this case, we apply the\n-    \/\/ default resize border.\n-    if (res == HTCAPTION) {\n+    \/\/ In contrast, the top resize border is not outside, but inside the client area and may be below user\n+    \/\/ controls. For example, if a control with HeaderDragType.NONE extends to the top of the client area,\n+    \/\/ it covers the resize border at that location. We know that the cursor is on top of the caption area\n+    \/\/ (and not on top of a control) when the nonClientHitTest() function returns HTCAPTION instead of\n+    \/\/ HTCLIENT. In this case, we apply the default resize border.\n+    \/\/ Note that HTUNSPECIFIED is a custom JavaFX classification that means the cursor is on the HeaderBar,\n+    \/\/ but no user-specified HeaderDragType is known. In this case, we treat the current cursor position as\n+    \/\/ HTTOP if the cursor is on the top resize border, and as HTCLIENT otherwise.\n+    if (res == HTCAPTION || res == HTUNSPECIFIED) {\n@@ -953,2 +958,3 @@\n-            result = LRESULT(HTTOP);\n-            return TRUE;\n+            res = HTTOP;\n+        } else if (res == HTUNSPECIFIED) {\n+            res = HTCLIENT;\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/win\/GlassWindow.cpp","additions":14,"deletions":8,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -1031,0 +1031,10 @@\n+    } else if (msg == WM_NCMOUSEMOVE && wParam == HTTOP && m_bTrackingMouse) {\n+        \/\/ We are here because the mouse cursor moved from the client area to the HTTOP non-client area.\n+        \/\/ We emit an EXIT event to signal to JavaFX that the mouse cursor is no longer within the client area.\n+        pt.x = GET_X_LPARAM(lParam);\n+        pt.y = GET_Y_LPARAM(lParam);\n+        ::MapWindowPoints(NULL, hwnd, &pt, 1);\n+\n+        type = com_sun_glass_events_MouseEvent_EXIT;\n+        m_bTrackingMouse = FALSE;\n+        m_lastMouseMovePosition = -1;\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/win\/ViewContainer.cpp","additions":11,"deletions":1,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2025, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -518,4 +518,4 @@\n-            final Box box4 = new Box(null, 50, 0, 50, 100);\n-            final Box box3 = new Box(box4, 50, 0, 100, 100);\n-            final Box box2 = new Box(box3, 50, 0, 150, 100);\n-            final Box box1 = new Box(box2, 50, 0, 200, 100);\n+            final Box box4 = new Box(\"box4\", null, 50, 0, 50, 100);\n+            final Box box3 = new Box(\"box3\", box4, 50, 0, 100, 100);\n+            final Box box2 = new Box(\"box2\", box3, 50, 0, 150, 100);\n+            final Box box1 = new Box(\"box1\", box2, 50, 0, 200, 100);\n@@ -529,1 +529,4 @@\n-            Box(Node child, double x, double y, double width, double height) {\n+            final String name;\n+\n+            Box(String name, Node child, double x, double y, double width, double height) {\n+                this.name = name;\n@@ -537,0 +540,5 @@\n+\n+            @Override\n+            public String toString() {\n+                return name;\n+            }\n@@ -570,3 +578,3 @@\n-            assertHeaderArea(null, 110, 10);\n-            assertHeaderArea(null, 160, 10);\n-            assertHeaderArea(null, 210, 10);\n+            assertHeaderArea(HeaderAreaType.UNSPECIFIED, 110, 10);\n+            assertHeaderArea(HeaderAreaType.UNSPECIFIED, 160, 10);\n+            assertHeaderArea(HeaderAreaType.UNSPECIFIED, 210, 10);\n@@ -643,1 +651,1 @@\n-            assertHeaderArea(null, 75, 90);\n+            assertHeaderArea(HeaderAreaType.UNSPECIFIED, 75, 90);\n@@ -666,1 +674,1 @@\n-            assertHeaderArea(null, 75, 90);\n+            assertHeaderArea(HeaderAreaType.UNSPECIFIED, 75, 90);\n","filename":"modules\/javafx.graphics\/src\/test\/java\/test\/javafx\/scene\/layout\/HeaderBarTest.java","additions":19,"deletions":11,"binary":false,"changes":30,"status":"modified"}]}