{"files":[{"patch":"@@ -341,1 +341,1 @@\n-                requestRebuildCells();\n+                flow.recreateCells();\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/control\/skin\/TableViewSkinBase.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -149,4 +149,0 @@\n-        lh.addChangeListener(control.rowFactoryProperty(), (ev) -> {\n-            flow.recreateCells();\n-        });\n-\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/control\/skin\/TreeTableViewSkin.java","additions":0,"deletions":4,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -6088,0 +6088,44 @@\n+\n+    @Test\n+    public void testChangeRowFactoryShouldRecreateRows() {\n+        String propertyKey = \"key\";\n+        String firstRowKey = \"table_row_key1\";\n+        String secondRowKey = \"table_row_key2\";\n+\n+        final TableColumn<String, String> c = new TableColumn<>(\"C\");\n+        c.setCellValueFactory(value -> new SimpleStringProperty(value.getValue()));\n+        table.getColumns().add(c);\n+\n+        table.getItems().addAll(\"1\", \"2\", \"3\");\n+\n+        table.setRowFactory(e -> {\n+            TableRow<String> row = new TableRow<>();\n+            row.getProperties().put(propertyKey, firstRowKey);\n+            return row;\n+        });\n+\n+        stageLoader = new StageLoader(table);\n+        stageLoader.getStage().setWidth(300);\n+        stageLoader.getStage().setHeight(300);\n+\n+        for (int index = 0; index < table.getItems().size(); index++) {\n+            IndexedCell<?> cell = VirtualFlowTestUtils.getCell(table, 0);\n+\n+            assertEquals(firstRowKey, cell.getProperties().get(propertyKey));\n+        }\n+\n+        \/\/ Change the row factory and verify cells again.\n+        table.setRowFactory(e -> {\n+            TableRow<String> row = new TableRow<>();\n+            row.getProperties().put(propertyKey, secondRowKey);\n+            return row;\n+        });\n+\n+        Toolkit.getToolkit().firePulse();\n+\n+        for (int index = 0; index < table.getItems().size(); index++) {\n+            IndexedCell<?> cell = VirtualFlowTestUtils.getCell(table, 0);\n+\n+            assertEquals(secondRowKey, cell.getProperties().get(propertyKey));\n+        }\n+    }\n","filename":"modules\/javafx.controls\/src\/test\/java\/test\/javafx\/scene\/control\/TableViewTest.java","additions":44,"deletions":0,"binary":false,"changes":44,"status":"modified"},{"patch":"@@ -7279,0 +7279,49 @@\n+\n+    @Test\n+    public void testChangeRowFactoryShouldRecreateRows() {\n+        String propertyKey = \"key\";\n+        String firstRowKey = \"table_row_key1\";\n+        String secondRowKey = \"table_row_key2\";\n+\n+        TreeTableColumn<String, String> c = new TreeTableColumn<>(\"C\");\n+        c.setCellValueFactory(value -> new SimpleStringProperty(value.getValue().getValue()));\n+        treeTableView.getColumns().add(c);\n+\n+        treeTableView.setRoot(new TreeItem<>(\"Root\"));\n+        treeTableView.getRoot().setExpanded(true);\n+        for (int i = 0; i < 4; i++) {\n+            TreeItem<String> parent = new TreeItem<String>(\"item - \" + i);\n+            treeTableView.getRoot().getChildren().add(parent);\n+        }\n+\n+        treeTableView.setRowFactory(e -> {\n+            TreeTableRow<String> row = new TreeTableRow<>();\n+            row.getProperties().put(propertyKey, firstRowKey);\n+            return row;\n+        });\n+\n+        stageLoader = new StageLoader(treeTableView);\n+        stageLoader.getStage().setWidth(300);\n+        stageLoader.getStage().setHeight(300);\n+\n+        for (int index = 0; index < treeTableView.getRoot().getChildren().size(); index++) {\n+            IndexedCell<?> cell = VirtualFlowTestUtils.getCell(treeTableView, 0);\n+\n+            assertEquals(firstRowKey, cell.getProperties().get(propertyKey));\n+        }\n+\n+        \/\/ Change the row factory and verify cells again.\n+        treeTableView.setRowFactory(e -> {\n+            TreeTableRow<String> row = new TreeTableRow<>();\n+            row.getProperties().put(propertyKey, secondRowKey);\n+            return row;\n+        });\n+\n+        Toolkit.getToolkit().firePulse();\n+\n+        for (int index = 0; index < treeTableView.getRoot().getChildren().size(); index++) {\n+            IndexedCell<?> cell = VirtualFlowTestUtils.getCell(treeTableView, 0);\n+\n+            assertEquals(secondRowKey, cell.getProperties().get(propertyKey));\n+        }\n+    }\n","filename":"modules\/javafx.controls\/src\/test\/java\/test\/javafx\/scene\/control\/TreeTableViewTest.java","additions":49,"deletions":0,"binary":false,"changes":49,"status":"modified"}]}