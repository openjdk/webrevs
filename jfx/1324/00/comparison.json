{"files":[{"patch":"@@ -486,2 +486,2 @@\n-    protected abstract Object _enterNestedEventLoop();\n-    protected abstract void _leaveNestedEventLoop(Object retValue);\n+    protected abstract void _enterNestedEventLoop();\n+    protected abstract void _leaveNestedEventLoop();\n@@ -497,1 +497,1 @@\n-     * {@link #leaveNestedEventLoop(Object)} method.\n+     * {@link #leaveNestedEventLoop()} method.\n@@ -505,1 +505,0 @@\n-     * @return an object passed to the leaveNestedEventLoop() method\n@@ -508,1 +507,1 @@\n-    static Object enterNestedEventLoop() {\n+    static void enterNestedEventLoop() {\n@@ -513,1 +512,1 @@\n-            return GetApplication()._enterNestedEventLoop();\n+            GetApplication()._enterNestedEventLoop();\n@@ -535,1 +534,1 @@\n-    static void leaveNestedEventLoop(Object retValue) {\n+    static void leaveNestedEventLoop() {\n@@ -542,1 +541,1 @@\n-        GetApplication()._leaveNestedEventLoop(retValue);\n+        GetApplication()._leaveNestedEventLoop();\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/glass\/ui\/Application.java","additions":7,"deletions":8,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -107,2 +107,1 @@\n-            Object ret = Application.enterNestedEventLoop();\n-            assert ret == this : \"Internal inconsistency - wrong EventLoop\";\n+            Application.enterNestedEventLoop();\n@@ -123,1 +122,1 @@\n-                        Application.leaveNestedEventLoop(loop);\n+                        Application.leaveNestedEventLoop();\n@@ -166,1 +165,1 @@\n-            Application.leaveNestedEventLoop(this);\n+            Application.leaveNestedEventLoop();\n@@ -170,1 +169,0 @@\n-\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/glass\/ui\/EventLoop.java","additions":3,"deletions":5,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -322,2 +322,0 @@\n-    private Object eventLoopExitEnterPassValue;\n-\n@@ -329,1 +327,1 @@\n-    protected Object _enterNestedEventLoop() {\n+    protected void _enterNestedEventLoop() {\n@@ -333,10 +331,1 @@\n-        try {\n-            enterNestedEventLoopImpl();\n-            final Object retValue = eventLoopExitEnterPassValue;\n-            eventLoopExitEnterPassValue = null;\n-            return retValue;\n-        } finally {\n-            if (invokeLaterDispatcher != null) {\n-                invokeLaterDispatcher.notifyLeftNestedEventLoop();\n-            }\n-        }\n+        enterNestedEventLoopImpl();\n@@ -346,1 +335,1 @@\n-    protected void _leaveNestedEventLoop(Object retValue) {\n+    protected void _leaveNestedEventLoop() {\n@@ -350,1 +339,0 @@\n-        eventLoopExitEnterPassValue = retValue;\n@@ -352,0 +340,4 @@\n+\n+        if (invokeLaterDispatcher != null) {\n+            invokeLaterDispatcher.notifyLeftNestedEventLoop();\n+        }\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/glass\/ui\/gtk\/GtkApplication.java","additions":7,"deletions":15,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -188,2 +188,2 @@\n-    private native Object _enterNestedEventLoopImpl();\n-    private native void _leaveNestedEventLoopImpl(Object retValue);\n+    private native void _enterNestedEventLoopImpl();\n+    private native void _leaveNestedEventLoopImpl();\n@@ -192,2 +192,2 @@\n-    protected Object _enterNestedEventLoop() {\n-        return _enterNestedEventLoopImpl();\n+    protected void _enterNestedEventLoop() {\n+        _enterNestedEventLoopImpl();\n@@ -197,2 +197,2 @@\n-    protected void _leaveNestedEventLoop(Object retValue) {\n-        _leaveNestedEventLoopImpl(retValue);\n+    protected void _leaveNestedEventLoop() {\n+        _leaveNestedEventLoopImpl();\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/glass\/ui\/ios\/IosApplication.java","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -164,2 +164,2 @@\n-    native private Object _enterNestedEventLoopImpl();\n-    @Override protected Object _enterNestedEventLoop() {\n+    native private void _enterNestedEventLoopImpl();\n+    @Override protected void _enterNestedEventLoop() {\n@@ -169,7 +169,1 @@\n-        try {\n-            return _enterNestedEventLoopImpl();\n-        } finally {\n-            if (invokeLaterDispatcher != null) {\n-                invokeLaterDispatcher.notifyLeftNestedEventLoop();\n-            }\n-        }\n+        _enterNestedEventLoopImpl();\n@@ -178,2 +172,2 @@\n-    native private void _leaveNestedEventLoopImpl(Object retValue);\n-    @Override protected void _leaveNestedEventLoop(Object retValue) {\n+    native private void _leaveNestedEventLoopImpl();\n+    @Override protected void _leaveNestedEventLoop() {\n@@ -183,1 +177,5 @@\n-        _leaveNestedEventLoopImpl(retValue);\n+        _leaveNestedEventLoopImpl();\n+\n+        if (invokeLaterDispatcher != null) {\n+            invokeLaterDispatcher.notifyLeftNestedEventLoop();\n+        }\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/glass\/ui\/mac\/MacApplication.java","additions":10,"deletions":12,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -144,2 +144,2 @@\n-    protected Object _enterNestedEventLoop() {\n-        return runnableProcessor.enterNestedEventLoop();\n+    protected void _enterNestedEventLoop() {\n+        runnableProcessor.enterNestedEventLoop();\n@@ -149,2 +149,2 @@\n-    protected void _leaveNestedEventLoop(Object retValue) {\n-        runnableProcessor.leaveNestedEventLoop(retValue);\n+    protected void _leaveNestedEventLoop() {\n+        runnableProcessor.leaveNestedEventLoop();\n@@ -353,1 +353,1 @@\n-        _leaveNestedEventLoop(null);\n+        _leaveNestedEventLoop();\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/glass\/ui\/monocle\/MonocleApplication.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -83,1 +83,1 @@\n-    private Object runLoop() {\n+    private void runLoop() {\n@@ -97,3 +97,0 @@\n-\n-        return control.release;\n-\n@@ -102,1 +99,1 @@\n-    Object enterNestedEventLoop() {\n+    void enterNestedEventLoop() {\n@@ -107,4 +104,1 @@\n-        Object ret = runLoop();\n-\n-        \/\/ and return the value that was passed into leaveNested\n-        return ret;\n+        runLoop();\n@@ -113,1 +107,1 @@\n-    void leaveNestedEventLoop(Object retValue) {\n+    void leaveNestedEventLoop() {\n@@ -123,3 +117,0 @@\n-        \/\/ and give it the ret object so it will return it to the\n-        \/\/ blocked nesting call.\n-        current.release = retValue;\n@@ -129,1 +120,1 @@\n-        \/\/ call can return the release value we just provided.\n+        \/\/ call can return.\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/glass\/ui\/monocle\/RunnableProcessor.java","additions":5,"deletions":14,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -203,2 +203,2 @@\n-    native private Object _enterNestedEventLoopImpl();\n-    native private void _leaveNestedEventLoopImpl(Object retValue);\n+    native private void _enterNestedEventLoopImpl();\n+    native private void _leaveNestedEventLoopImpl();\n@@ -206,1 +206,1 @@\n-    @Override protected Object _enterNestedEventLoop() {\n+    @Override protected void _enterNestedEventLoop() {\n@@ -210,7 +210,1 @@\n-        try {\n-            return _enterNestedEventLoopImpl();\n-        } finally {\n-            if (invokeLaterDispatcher != null) {\n-                invokeLaterDispatcher.notifyLeftNestedEventLoop();\n-            }\n-        }\n+        _enterNestedEventLoopImpl();\n@@ -219,1 +213,1 @@\n-    @Override protected void _leaveNestedEventLoop(Object retValue) {\n+    @Override protected void _leaveNestedEventLoop() {\n@@ -223,1 +217,5 @@\n-        _leaveNestedEventLoopImpl(retValue);\n+        _leaveNestedEventLoopImpl();\n+\n+        if (invokeLaterDispatcher != null) {\n+            invokeLaterDispatcher.notifyLeftNestedEventLoop();\n+        }\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/glass\/ui\/win\/WinApplication.java","additions":10,"deletions":12,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -114,1 +114,0 @@\n-static jobject nestedLoopReturnValue = NULL;\n@@ -547,1 +546,1 @@\n-+ (jobject)enterNestedEventLoopWithEnv:(JNIEnv*)env\n++ (void)enterNestedEventLoopWithEnv:(JNIEnv*)env\n@@ -549,1 +548,0 @@\n-    jobject ret = NULL;\n@@ -562,6 +560,0 @@\n-    if (nestedLoopReturnValue != NULL) {\n-        ret = (*env)->NewLocalRef(env, nestedLoopReturnValue);\n-        (*env)->DeleteGlobalRef(env, nestedLoopReturnValue);\n-        nestedLoopReturnValue = NULL;\n-    }\n-\n@@ -569,2 +561,0 @@\n-\n-    return ret;\n@@ -573,1 +563,1 @@\n-+ (void)leaveNestedEventLoopWithEnv:(JNIEnv*)env retValue:(jobject)retValue\n++ (void)leaveNestedEventLoopWithEnv:(JNIEnv*)env\n@@ -575,3 +565,0 @@\n-    if (retValue != NULL) {\n-        nestedLoopReturnValue = (*env)->NewGlobalRef(env, retValue);\n-    }\n@@ -824,1 +811,1 @@\n- *    * Signature: ()Ljava\/lang\/Object;\n+ *    * Signature: ()V\n@@ -826,1 +813,1 @@\n-JNIEXPORT jobject JNICALL Java_com_sun_glass_ui_ios_IosApplication__1enterNestedEventLoopImpl\n+JNIEXPORT void JNICALL Java_com_sun_glass_ui_ios_IosApplication__1enterNestedEventLoopImpl\n@@ -831,2 +818,0 @@\n-    jobject ret;\n-\n@@ -835,1 +820,1 @@\n-        ret = [GlassApplication enterNestedEventLoopWithEnv:env];\n+        [GlassApplication enterNestedEventLoopWithEnv:env];\n@@ -839,2 +824,0 @@\n-\n-    return ret;\n@@ -846,1 +829,1 @@\n- *    * Signature: (Ljava\/lang\/Object;)V\n+ *    * Signature: ()V\n@@ -849,1 +832,1 @@\n-(JNIEnv *env, jobject japplication, jobject retValue)\n+(JNIEnv *env, jobject japplication)\n@@ -855,1 +838,1 @@\n-        [GlassApplication leaveNestedEventLoopWithEnv:env retValue:retValue];\n+        [GlassApplication leaveNestedEventLoopWithEnv:env];\n@@ -1016,1 +999,0 @@\n-\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/ios\/GlassApplication.m","additions":8,"deletions":26,"binary":false,"changes":34,"status":"modified"},{"patch":"@@ -65,2 +65,2 @@\n-+ (jobject)enterNestedEventLoopWithEnv:(JNIEnv*)env;\n-+ (void)leaveNestedEventLoopWithEnv:(JNIEnv*)env retValue:(jobject)retValue;\n++ (void)enterNestedEventLoopWithEnv:(JNIEnv*)env;\n++ (void)leaveNestedEventLoopWithEnv:(JNIEnv*)env;\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassApplication.h","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -54,1 +54,0 @@\n-static jobject nestedLoopReturnValue = NULL;\n@@ -744,1 +743,1 @@\n-+ (jobject)enterNestedEventLoopWithEnv:(JNIEnv*)env\n++ (void)enterNestedEventLoopWithEnv:(JNIEnv*)env\n@@ -746,1 +745,0 @@\n-    jobject ret = NULL;\n@@ -763,6 +761,0 @@\n-    if (nestedLoopReturnValue != NULL) {\n-        ret = (*env)->NewLocalRef(env, nestedLoopReturnValue);\n-        (*env)->DeleteGlobalRef(env, nestedLoopReturnValue);\n-        nestedLoopReturnValue = NULL;\n-    }\n-\n@@ -770,2 +762,0 @@\n-\n-    return ret;\n@@ -774,1 +764,1 @@\n-+ (void)leaveNestedEventLoopWithEnv:(JNIEnv*)env retValue:(jobject)retValue\n++ (void)leaveNestedEventLoopWithEnv:(JNIEnv*)env\n@@ -776,3 +766,0 @@\n-    if (retValue != NULL) {\n-        nestedLoopReturnValue = (*env)->NewGlobalRef(env, retValue);\n-    }\n@@ -921,1 +908,1 @@\n-            env, jClass, \"enterNestedEventLoop\", \"()Ljava\/lang\/Object;\");\n+            env, jClass, \"enterNestedEventLoop\", \"()V\");\n@@ -925,1 +912,1 @@\n-            env, jClass, \"leaveNestedEventLoop\", \"(Ljava\/lang\/Object;)V\");\n+            env, jClass, \"leaveNestedEventLoop\", \"()V\");\n@@ -1032,1 +1019,1 @@\n- * Signature: ()Ljava\/lang\/Object;\n+ * Signature: ()V\n@@ -1034,1 +1021,1 @@\n-JNIEXPORT jobject JNICALL Java_com_sun_glass_ui_mac_MacApplication__1enterNestedEventLoopImpl\n+JNIEXPORT void JNICALL Java_com_sun_glass_ui_mac_MacApplication__1enterNestedEventLoopImpl\n@@ -1039,2 +1026,0 @@\n-    jobject ret;\n-\n@@ -1043,1 +1028,1 @@\n-        ret = [GlassApplication enterNestedEventLoopWithEnv:env];\n+        [GlassApplication enterNestedEventLoopWithEnv:env];\n@@ -1047,2 +1032,0 @@\n-\n-    return ret;\n@@ -1054,1 +1037,1 @@\n- * Signature: (Ljava\/lang\/Object;)V\n+ * Signature: ()V\n@@ -1057,1 +1040,1 @@\n-(JNIEnv *env, jobject japplication, jobject retValue)\n+(JNIEnv *env, jobject japplication)\n@@ -1063,1 +1046,1 @@\n-        [GlassApplication leaveNestedEventLoopWithEnv:env retValue:retValue];\n+        [GlassApplication leaveNestedEventLoopWithEnv:env];\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassApplication.m","additions":10,"deletions":27,"binary":false,"changes":37,"status":"modified"},{"patch":"@@ -246,1 +246,1 @@\n-jobject GlassApplication::EnterNestedEventLoop(JNIEnv * env)\n+void GlassApplication::EnterNestedEventLoop(JNIEnv * env)\n@@ -260,8 +260,0 @@\n-\n-    if (!sm_nestedLoopReturnValue) {\n-        return NULL;\n-    }\n-\n-    jobject ret = env->NewLocalRef(sm_nestedLoopReturnValue);\n-    sm_nestedLoopReturnValue.Attach(env, NULL);\n-    return ret;\n@@ -271,1 +263,1 @@\n-void GlassApplication::LeaveNestedEventLoop(JNIEnv * env, jobject retValue)\n+void GlassApplication::LeaveNestedEventLoop(JNIEnv * env)\n@@ -273,1 +265,0 @@\n-    sm_nestedLoopReturnValue.Attach(env, retValue);\n@@ -441,1 +432,1 @@\n- * Signature: ()Ljava\/lang\/Object;\n+ * Signature: ()V;\n@@ -443,1 +434,1 @@\n-JNIEXPORT jobject JNICALL Java_com_sun_glass_ui_win_WinApplication__1enterNestedEventLoopImpl\n+JNIEXPORT void JNICALL Java_com_sun_glass_ui_win_WinApplication__1enterNestedEventLoopImpl\n@@ -446,1 +437,1 @@\n-    return GlassApplication::EnterNestedEventLoop(env);\n+    GlassApplication::EnterNestedEventLoop(env);\n@@ -452,1 +443,1 @@\n- * Signature: (Ljava\/lang\/Object;)V\n+ * Signature: ()V\n@@ -455,1 +446,1 @@\n-  (JNIEnv * env, jobject self, jobject retValue)\n+  (JNIEnv * env, jobject self)\n@@ -457,1 +448,1 @@\n-    GlassApplication::LeaveNestedEventLoop(env, retValue);\n+    GlassApplication::LeaveNestedEventLoop(env);\n@@ -534,1 +525,0 @@\n-\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/win\/GlassApplication.cpp","additions":8,"deletions":18,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -94,2 +94,2 @@\n-    static jobject EnterNestedEventLoop(JNIEnv * env);\n-    static void LeaveNestedEventLoop(JNIEnv * env, jobject retValue);\n+    static void EnterNestedEventLoop(JNIEnv * env);\n+    static void LeaveNestedEventLoop(JNIEnv * env);\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/win\/GlassApplication.h","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}