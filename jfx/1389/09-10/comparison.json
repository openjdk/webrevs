{"files":[{"patch":"@@ -39,0 +39,1 @@\n+         * @param c the instance of Labeled\n@@ -41,1 +42,1 @@\n-        public boolean isUseActualContentWidth();\n+        public boolean isUseActualContentWidth(Labeled c);\n@@ -60,0 +61,1 @@\n+     * @param c the instance of Labeled\n@@ -62,2 +64,2 @@\n-    public static boolean isUseActualContentWidth() {\n-        return accessor.isUseActualContentWidth();\n+    public static boolean isUseActualContentWidth(Labeled c) {\n+        return accessor.isUseActualContentWidth(c);\n","filename":"modules\/javafx.controls\/src\/main\/java\/com\/sun\/javafx\/scene\/control\/LabeledHelper.java","additions":5,"deletions":3,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -100,15 +100,1 @@\n-\n-    \/**\n-     * Setting this flag to true causes\n-     * TableCellSkinBase.computePrefWidth() and\n-     * TreeTableCellSkin.computePrefWidth()\n-     * to compute the actual content width rather than table column width.\n-     * (We should have never used such a logic without exposing the way to obtain\n-     * the content width!).\n-     * It is safe to use a public global flag because:\n-     * a) it's an implementation detail and\n-     * b) we are always in the content of the FX app thread\n-     * This functionality is made separate from Properties.DEFER_TO_PARENT_PREF_WIDTH which\n-     * by itself looks rather weird.\n-     *\/\n-    private static boolean useActualContentWidth;\n+    private static final Object PROP_USE_ACTUAL_CONTENT_WIDTH = new Object();\n@@ -119,2 +105,2 @@\n-            public boolean isUseActualContentWidth() {\n-                return useActualContentWidth;\n+            public boolean isUseActualContentWidth(Labeled c) {\n+                return c.isUseActualContentWidth();\n@@ -865,1 +851,1 @@\n-                    useActualContentWidth = true;\n+                    setUseActualContentWidth(true);\n@@ -873,1 +859,1 @@\n-                        useActualContentWidth = false;\n+                        setUseActualContentWidth(false);\n@@ -891,0 +877,12 @@\n+    private void setUseActualContentWidth(boolean on) {\n+        if (on) {\n+            getProperties().put(PROP_USE_ACTUAL_CONTENT_WIDTH, Boolean.TRUE);\n+        } else {\n+            getProperties().remove(PROP_USE_ACTUAL_CONTENT_WIDTH);\n+        }\n+    }\n+\n+    private boolean isUseActualContentWidth() {\n+        return Boolean.TRUE.equals(getProperties().get(PROP_USE_ACTUAL_CONTENT_WIDTH));\n+    }\n+\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/control\/Labeled.java","additions":17,"deletions":19,"binary":false,"changes":36,"status":"modified"},{"patch":"@@ -155,1 +155,1 @@\n-        if (LabeledHelper.isUseActualContentWidth() || isDeferToParentForPrefWidth) {\n+        if (LabeledHelper.isUseActualContentWidth(getSkinnable()) || isDeferToParentForPrefWidth) {\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/control\/skin\/TableCellSkinBase.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -133,1 +133,1 @@\n-        if (LabeledHelper.isUseActualContentWidth() || isDeferToParentForPrefWidth) {\n+        if (LabeledHelper.isUseActualContentWidth(getSkinnable()) || isDeferToParentForPrefWidth) {\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/control\/skin\/TreeTableCellSkin.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -29,0 +29,1 @@\n+import javafx.scene.control.Button;\n@@ -33,0 +34,1 @@\n+import javafx.scene.control.skin.ButtonSkin;\n@@ -53,1 +55,1 @@\n-    public void testTruncatedLabel2() {\n+    public void testTruncatedLabel() {\n@@ -60,0 +62,8 @@\n+    @Test\n+    public void testTruncatedButton() {\n+        Button control = new Button();\n+        control.setSkin(new ButtonSkin(control));\n+        control.setText(TEXT);\n+        test(control);\n+    }\n+\n@@ -94,0 +104,5 @@\n+\n+        RegionHelper.setHeight(control, 2);\n+        firePulse();\n+\n+        assertTrue(control.isTextTruncated());\n","filename":"modules\/javafx.controls\/src\/test\/java\/test\/javafx\/scene\/control\/LabeledTruncatedTest.java","additions":16,"deletions":1,"binary":false,"changes":17,"status":"modified"}]}