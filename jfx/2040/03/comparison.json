{"files":[{"patch":"@@ -47,1 +47,0 @@\n-\n@@ -60,0 +59,4 @@\n+        labeledImpl.textTruncatedProperty().subscribe(v -> {\n+            LabeledHelper.setTextTruncated(labeled, v);\n+        });\n+\n","filename":"modules\/javafx.controls\/src\/main\/java\/com\/sun\/javafx\/scene\/control\/LabeledImpl.java","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2024, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,0 +29,2 @@\n+\n+import javafx.scene.Scene;\n@@ -34,0 +36,2 @@\n+import javafx.scene.control.MenuButton;\n+import javafx.scene.control.SplitMenuButton;\n@@ -40,0 +44,2 @@\n+import javafx.scene.control.skin.MenuButtonSkin;\n+import javafx.scene.control.skin.SplitMenuButtonSkin;\n@@ -41,0 +47,2 @@\n+import javafx.stage.Stage;\n+import java.util.function.Supplier;\n@@ -58,4 +66,9 @@\n-        Label control = new Label();\n-        control.setSkin(new LabelSkin(control));\n-        control.setText(TEXT);\n-        test(control);\n+        Supplier<Label> fun = () -> {\n+            Label control = new Label();\n+            control.setSkin(new LabelSkin(control));\n+            control.setText(TEXT);\n+            return control;\n+        };\n+\n+        testWithSkin(fun.get());\n+        testTextProperty(fun.get());\n@@ -66,4 +79,30 @@\n-        Button control = new Button();\n-        control.setSkin(new ButtonSkin(control));\n-        control.setText(TEXT);\n-        test(control);\n+        Supplier<Labeled> fun = () -> {\n+            Button control = new Button();\n+            control.setSkin(new ButtonSkin(control));\n+            control.setText(TEXT);\n+            return control;\n+        };\n+        testWithSkin(fun.get());\n+        testTextProperty(fun.get());\n+    }\n+\n+    @Test\n+    public void testTruncatedMenuButton() {\n+        Supplier<Labeled> fun = () -> {\n+            MenuButton control = new MenuButton();\n+            control.setSkin(new MenuButtonSkin(control));\n+            control.setText(TEXT);\n+            return control;\n+        };\n+        testTextProperty(fun.get());\n+    }\n+\n+    @Test\n+    public void testTruncatedSplitMenuButton() {\n+        Supplier<Labeled> fun = () -> {\n+            SplitMenuButton control = new SplitMenuButton();\n+            control.setSkin(new SplitMenuButtonSkin(control));\n+            control.setText(TEXT);\n+            return control;\n+        };\n+        testTextProperty(fun.get());\n@@ -74,4 +113,8 @@\n-        TableCell<String, String> control = new TableCell<>();\n-        control.setSkin(new TableCellSkin<>(control));\n-        control.setText(TEXT);\n-        test(control);\n+        Supplier<Labeled> fun = () -> {\n+            TableCell<String, String> control = new TableCell<>();\n+            control.setSkin(new TableCellSkin<>(control));\n+            control.setText(TEXT);\n+            return control;\n+        };\n+        testWithSkin(fun.get());\n+        testTextProperty(fun.get());\n@@ -82,4 +125,7 @@\n-        TreeTableCell<String, String> control = new TreeTableCell<>();\n-        control.setSkin(new TreeTableCellSkin<>(control));\n-        control.setText(TEXT);\n-        test(control);\n+        Supplier<Labeled> fun = () -> {\n+            TreeTableCell<String, String> control = new TreeTableCell<>();\n+            control.setSkin(new TreeTableCellSkin<>(control));\n+            control.setText(TEXT);\n+            return control;\n+        };\n+        testWithSkin(fun.get());\n@@ -88,1 +134,1 @@\n-    private void test(Labeled control) {\n+    private void testWithSkin(Labeled control) {\n@@ -117,0 +163,23 @@\n+\n+    private void testTextProperty(Labeled control) {\n+        Scene scene = new Scene(control, 100, 100);\n+        Stage s = new Stage();\n+        s.setScene(scene);\n+        s.show();\n+        control.setText(\"A\");\n+        firePulse();\n+        double h = control.prefHeight(-1);\n+\n+        assertFalse(control.isTextTruncated());\n+\n+        control.setText(\"very long text with a lots of characters\");\n+        control.layout();\n+        firePulse();\n+\n+        assertTrue(control.isTextTruncated());\n+\n+        control.setText(\"A\");\n+        control.layout();\n+        firePulse();\n+        assertFalse(control.isTextTruncated());\n+    }\n","filename":"modules\/javafx.controls\/src\/test\/java\/test\/javafx\/scene\/control\/LabeledTruncatedTest.java","additions":87,"deletions":18,"binary":false,"changes":105,"status":"modified"}]}