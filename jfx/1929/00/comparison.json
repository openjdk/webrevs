{"files":[{"patch":"@@ -182,0 +182,1 @@\n+    jboolean perDrwawableVSync;\n@@ -266,0 +267,1 @@\n+    PFNGLXSWAPINTERVALEXTPROC glXSwapIntervalEXT;\n","filename":"modules\/javafx.graphics\/src\/main\/native-prism-es2\/PrismES2Defs.h","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -273,0 +273,9 @@\n+                \"GLX_EXT_swap_control\")) {\n+        ctxInfo->glXSwapIntervalEXT = (PFNGLXSWAPINTERVALEXTPROC)\n+                dlsym(RTLD_DEFAULT, \"glXSwapIntervalEXT\");\n+        if (ctxInfo->glXSwapIntervalEXT == NULL) {\n+            ctxInfo->glXSwapIntervalEXT = (PFNGLXSWAPINTERVALEXTPROC)\n+                glXGetProcAddress((const GLubyte *)\"glXSwapIntervalEXT\");\n+            ctxInfo->glXSwapIntervalEXT(dInfo->display, dInfo->win, 0);\n+        }\n+    } else if (isExtensionSupported(ctxInfo->glxExtensionStr,\n@@ -280,0 +289,1 @@\n+            ctxInfo->glXSwapIntervalSGI(0);\n@@ -281,1 +291,0 @@\n-\n@@ -284,5 +293,0 @@\n-    \/\/ initialize platform states and properties to match\n-    \/\/ cached states and properties\n-    if (ctxInfo->glXSwapIntervalSGI != NULL) {\n-        ctxInfo->glXSwapIntervalSGI(0);\n-    }\n@@ -336,1 +340,5 @@\n-    if (ctxInfo->glXSwapIntervalSGI != NULL) {\n+\n+    if (ctxInfo->glXSwapIntervalEXT != NULL) {\n+        ctxInfo->glXSwapIntervalEXT(dInfo->display, dInfo->win, interval);\n+        dInfo->perDrwawableVSync = vSyncNeeded;\n+    } else if (ctxInfo->glXSwapIntervalSGI != NULL) {\n@@ -338,0 +346,1 @@\n+        dInfo->perDrwawableVSync = JNI_FALSE;\n","filename":"modules\/javafx.graphics\/src\/main\/native-prism-es2\/x11\/X11GLContext.c","additions":16,"deletions":7,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -112,0 +112,5 @@\n+\n+    if (dInfo->perDrwawableVSync) {\n+        glFinish();\n+    }\n+\n","filename":"modules\/javafx.graphics\/src\/main\/native-prism-es2\/x11\/X11GLDrawable.c","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -91,0 +91,3 @@\n+    glxAttrs[index++] = GLX_CONFIG_CAVEAT;\n+    glxAttrs[index++] = GLX_NONE;\n+\n@@ -218,1 +221,20 @@\n-    visualInfo = glXGetVisualFromFBConfig(display, fbConfigList[0]);\n+    GLXFBConfig fbConfig;\n+    \/\/ X Visual of depth = 32 is required for window transparency\n+    for (int i = 0; i < numFBConfigs; i++) {\n+        XVisualInfo *vi = glXGetVisualFromFBConfig(display, fbConfigList[i]);\n+        if (!vi) continue;\n+\n+        if (vi->depth == 32) {\n+            fbConfig = fbConfigList[i];\n+            visualInfo = vi;\n+            break;\n+        }\n+\n+        XFree(vi);\n+    }\n+\n+    if (visualInfo == NULL) {\n+        fbConfig = fbConfigList[0];\n+        visualInfo = glXGetVisualFromFBConfig(display, fbConfig);\n+    }\n+\n","filename":"modules\/javafx.graphics\/src\/main\/native-prism-es2\/x11\/X11GLFactory.c","additions":23,"deletions":1,"binary":false,"changes":24,"status":"modified"}]}