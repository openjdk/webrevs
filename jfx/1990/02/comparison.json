{"files":[{"patch":"@@ -1773,1 +1773,2 @@\n-                    areaX += widths.getSize(j) + snaphgap;\n+                    areaX += widths.hasGapBefore(j + 1) ? snaphgap : 0;\n+                    areaX += widths.getSize(j);\n@@ -1777,1 +1778,2 @@\n-                    areaY += heights.getSize(j) + snapvgap;\n+                    areaY += heights.hasGapBefore(j + 1) ? snapvgap : 0;\n+                    areaY += heights.getSize(j);\n@@ -1780,2 +1782,3 @@\n-                for (int j = 2; j <= colspan; j++) {\n-                    areaW += widths.getSize(columnIndex + j - 1) + snaphgap;\n+                for (int j = columnIndex + 1; j < colspan + columnIndex; j++) {\n+                    areaW += widths.hasGapBefore(j) ? snaphgap : 0;\n+                    areaW += widths.getSize(j);\n@@ -1784,2 +1787,3 @@\n-                for (int j = 2; j <= rowspan; j++) {\n-                    areaH += heights.getSize(rowIndex + j - 1) + snapvgap;\n+                for (int j = rowIndex + 1; j < rowspan + rowIndex; j++) {\n+                    areaH += heights.hasGapBefore(j) ? snapvgap : 0;\n+                    areaH += heights.getSize(j);\n@@ -2352,1 +2356,1 @@\n-             if (i > 0 && i < columnWidths.getLength() && hGap != 0) {\n+             if (i > 0 && i < columnWidths.getLength() && hGap != 0 && columnWidths.hasGapBefore(i)) {\n@@ -2364,1 +2368,1 @@\n-            if (i > 0 && i < rowHeights.getLength() && vGap != 0) {\n+            if (i > 0 && i < rowHeights.getLength() && vGap != 0 && rowHeights.hasGapBefore(i)) {\n@@ -2395,2 +2399,9 @@\n-        return new CompositeSize(getNumberOfRows(), rowPercentHeight, rowPercentTotal,\n-                snapSpaceY(getVgap()), initSize);\n+        int rowCount = getNumberOfRows();\n+        boolean[] gapBefore = new boolean[rowCount];\n+\n+        for (Node child : getManagedChildren()) {\n+            gapBefore[getNodeRowIndex(child)] = true;\n+        }\n+\n+        return new CompositeSize(rowCount, rowPercentHeight, rowPercentTotal,\n+              snapSpaceY(getVgap()), gapBefore, initSize);\n@@ -2400,2 +2411,9 @@\n-        return new CompositeSize(getNumberOfColumns(), columnPercentWidth, columnPercentTotal,\n-                snapSpaceX(getHgap()), initSize);\n+        int columnCount = getNumberOfColumns();\n+        boolean[] gapBefore = new boolean[columnCount];\n+\n+        for (Node child : getManagedChildren()) {\n+            gapBefore[getNodeColumnIndex(child)] = true;\n+        }\n+\n+        return new CompositeSize(columnCount, columnPercentWidth, columnPercentTotal,\n+                snapSpaceX(getHgap()), gapBefore, initSize);\n@@ -2573,0 +2591,1 @@\n+        private final boolean[] gapBefore;\n@@ -2574,1 +2593,1 @@\n-        public CompositeSize(int capacity, double fixedPercent[], double totalFixedPercent, double gap, double initSize) {\n+        public CompositeSize(int capacity, double fixedPercent[], double totalFixedPercent, double gap, boolean[] gapBefore, double initSize) {\n@@ -2581,0 +2600,1 @@\n+            this.gapBefore = gapBefore;\n@@ -2610,2 +2630,2 @@\n-        private void setMaxSize(int position, double size) {\n-            singleSizes[position] = Math.max(singleSizes[position], size);\n+        private boolean hasGapBefore(int position) {\n+            return gapBefore[position];\n@@ -2614,6 +2634,2 @@\n-        private void setMultiSize(int startPosition, int endPosition, double size) {\n-            if (multiSizes == null) {\n-                multiSizes = new TreeMap<>();\n-            }\n-            Interval i = new Interval(startPosition, endPosition);\n-            multiSizes.put(i, size);\n+        private void setMaxSize(int position, double size) {\n+            singleSizes[position] = Math.max(singleSizes[position], size);\n@@ -2624,1 +2640,1 @@\n-                return Collections.EMPTY_LIST;\n+                return Collections.emptyList();\n@@ -2664,2 +2680,4 @@\n-            double total = gap * (to - from - 1);\n-            for (int i = from; i < to; ++i) {\n+            double total = singleSizes[from];\n+\n+            for (int i = from + 1; i < to; ++i) {\n+                total += gapBefore[i] ? gap : 0;\n@@ -2668,0 +2686,1 @@\n+\n","filename":"modules\/javafx.graphics\/src\/main\/java\/javafx\/scene\/layout\/GridPane.java","additions":43,"deletions":24,"binary":false,"changes":67,"status":"modified"}]}