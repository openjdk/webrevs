{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -36,0 +36,1 @@\n+import java.util.ArrayList;\n@@ -169,1 +170,3 @@\n-            final List<Integer> removed = c.getRemoved().stream()\n+\n+            final List<Integer> removed = new ArrayList<>(c.getRemovedSize());\n+            c.getRemoved().stream()\n@@ -173,3 +176,4 @@\n-                    .boxed()\n-                    .peek(sm.selectedIndices::clear)\n-                    .collect(Collectors.toList());\n+                    .forEach(row -> {\n+                        removed.add(row);\n+                        sm.selectedIndices.clear(row);\n+                    });\n@@ -177,1 +181,2 @@\n-            final int addedSize = (int)c.getAddedSubList().stream()\n+            final int[] addedSize = new int[1];\n+            c.getAddedSubList().stream()\n@@ -180,2 +185,5 @@\n-                    .peek(sm.selectedIndices::set)\n-                    .count();\n+                    .forEach(row -> {\n+                        addedSize[0]++;\n+                        sm.selectedIndices.set(row);\n+                    });\n+\n@@ -191,1 +199,1 @@\n-            final int to = from + addedSize;\n+            final int to = from + addedSize[0];\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/control\/ControlUtils.java","additions":17,"deletions":9,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2010, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -771,1 +771,0 @@\n-                        .peek(this::set) \/\/ we also set here, but it's atomic!\n@@ -773,0 +772,2 @@\n+\n+                sortedNewIndices.forEach(this::set);\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/control\/MultipleSelectionModelBase.java","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"}]}