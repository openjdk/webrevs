{"files":[{"patch":"@@ -529,4 +529,0 @@\n-\/\/ Specifies whether to enable the Maven publishing tasks\n-defineProperty(\"MAVEN_PUBLISH\", \"false\")\n-ext.IS_MAVEN_PUBLISH = Boolean.parseBoolean(MAVEN_PUBLISH)\n-\n@@ -700,1 +696,0 @@\n-defineProperty(\"MAVEN_VERSION\", IS_MAVEN_PUBLISH ? (IS_MILESTONE_FCS ? \"${RELEASE_VERSION_SHORT}\" : \"${RELEASE_VERSION_LONG}\") : \"\")\n@@ -819,0 +814,2 @@\n+\/\/ Load Maven Publishing logic.\n+apply from: 'maven-publish.gradle'\n@@ -1552,2 +1549,0 @@\n-logger.quiet(\"MAVEN_PUBLISH: $MAVEN_PUBLISH\")\n-logger.quiet(\"MAVEN_VERSION: $MAVEN_VERSION\")\n@@ -1772,107 +1767,0 @@\n-void addMavenPublication(Project project, List<String> projectDependencies) {\n-    if (!IS_MAVEN_PUBLISH) {\n-        return\n-    }\n-\n-    if (!project.hasProperty(\"moduleName\")) {\n-        fail(\"Project ${project} has no module name\")\n-    }\n-    projectDependencies.each { projName ->\n-        def dep = project.project(\":$projName\")\n-        if (!dep.hasProperty(\"moduleName\")) {\n-            fail(\"${project} dependency ${dep} has no module name\")\n-        }\n-    }\n-\n-    project.apply plugin: 'maven-publish'\n-\n-    project.group = MAVEN_GROUP_ID\n-    project.version = MAVEN_VERSION\n-\n-    if (project.name == 'base') {\n-        project.publishing {\n-            publications {\n-                javafx(MavenPublication) {\n-                    artifactId = 'javafx'\n-                    artifacts = []\n-                }\n-            }\n-        }\n-    }\n-\n-    gradle.taskGraph.whenReady { g ->\n-        project.tasks.findAll { it.name == 'generatePomFileForJavafxPublication'}.each { it ->\n-            it.doLast {\n-                copy {\n-                    into project.file(\"${project.buildDir}\/publications\/javafx\")\n-                    from file(\"${rootProject.projectDir}\/javafx.pom\")\n-                    rename \"javafx.pom\", \"pom-default.xml\"\n-                    filter { line ->\n-                        line.replaceAll(\"@VERSION@\", MAVEN_VERSION)\n-                    }\n-                }\n-            }\n-        }\n-    }\n-\n-    project.publishing {\n-        repositories {\n-            maven {\n-                def repositoryUrl = project.hasProperty('repositoryUrl') ? project.getProperty('repositoryUrl') : \"\"\n-                def repositoryUsername = project.hasProperty('repositoryUsername') ? project.getProperty('repositoryUsername') : \"\"\n-                def repositoryPassword = project.hasProperty('repositoryPassword') ? project.getProperty('repositoryPassword') : \"\"\n-                url repositoryUrl\n-                credentials {\n-                   username repositoryUsername\n-                   password repositoryPassword\n-                }\n-            }\n-        }\n-    }\n-\n-    compileTargets { t ->\n-        project.publishing {\n-            publications {\n-                maven(MavenPublication) {\n-                    def artifactName = project.moduleName.replace('.', '-')\n-                    artifactId = artifactName\n-\n-                    afterEvaluate {\n-                        artifact project.tasks.\"moduleEmptyPublicationJar$t.capital\"\n-                        artifact project.tasks.\"modularPublicationJar$t.capital\" {\n-                            archiveClassifier.set(\"$t.name\")\n-                        }\n-                    }\n-\n-                    pom.withXml {\n-                        Node parent = asNode().appendNode(\"parent\")\n-                        parent.appendNode(\"groupId\", MAVEN_GROUP_ID)\n-                        parent.appendNode(\"artifactId\", \"javafx\")\n-                        parent.appendNode(\"version\", MAVEN_VERSION)\n-\n-                        Node dependencies = asNode().appendNode(\"dependencies\")\n-\n-                        Node projectDependencyPlatform = dependencies.appendNode(\"dependency\")\n-                        projectDependencyPlatform.appendNode(\"groupId\", MAVEN_GROUP_ID)\n-                        projectDependencyPlatform.appendNode(\"artifactId\", artifactName)\n-                        projectDependencyPlatform.appendNode(\"version\", MAVEN_VERSION)\n-                        projectDependencyPlatform.appendNode(\"classifier\", \"\\${javafx.platform}\")\n-\n-                        if (!projectDependencies.empty) {\n-                            projectDependencies.each { projName ->\n-                                def dep = project.project(\":$projName\")\n-                                def depName = dep.moduleName.replace('.', '-')\n-                                Node projectDependency = dependencies.appendNode(\"dependency\")\n-                                projectDependency.appendNode(\"groupId\", MAVEN_GROUP_ID)\n-                                projectDependency.appendNode(\"artifactId\", depName)\n-                                projectDependency.appendNode(\"version\", MAVEN_VERSION)\n-                           }\n-                        }\n-                    }\n-                }\n-            }\n-\n-        }\n-    }\n-}\n-\n","filename":"build.gradle","additions":2,"deletions":114,"binary":false,"changes":116,"status":"modified"},{"patch":"@@ -0,0 +1,153 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/**\n+ * If the given named property is not defined, then this method will define\n+ * it with the given defaultValue. Any properties defined by this method can\n+ * be substituted on the command line by using -P, or by specifying a\n+ * gradle.properties file in the user home dir\n+ *\n+ * @param name The name of the property to define\n+ * @param defaultValue The default value to assign the property\n+ *\/\n+void defineProperty(String name, String defaultValue) {\n+    if (!project.hasProperty(name)) {\n+        project.ext.set(name, defaultValue)\n+    }\n+}\n+\n+\/\/ Specifies whether to enable the Maven publishing tasks\n+defineProperty(\"MAVEN_PUBLISH\", \"false\")\n+ext.IS_MAVEN_PUBLISH = Boolean.parseBoolean(MAVEN_PUBLISH)\n+defineProperty(\"MAVEN_VERSION\", IS_MAVEN_PUBLISH ? (ext.IS_MILESTONE_FCS ? project.ext.RELEASE_VERSION_SHORT : project.ext.RELEASE_VERSION_LONG) : \"\")\n+\n+logger.quiet(\"MAVEN_PUBLISH: $MAVEN_PUBLISH\")\n+logger.quiet(\"MAVEN_VERSION: $MAVEN_VERSION\")\n+\n+ext.addMavenPublication = { Project project, List<String> projectDependencies ->\n+    if (!IS_MAVEN_PUBLISH) {\n+        return\n+    }\n+\n+    if (!project.hasProperty(\"moduleName\")) {\n+        fail(\"Project ${project} has no module name\")\n+    }\n+    projectDependencies.each { projName ->\n+        def dep = project.project(\":$projName\")\n+        if (!dep.hasProperty(\"moduleName\")) {\n+            fail(\"${project} dependency ${dep} has no module name\")\n+        }\n+    }\n+\n+    project.apply plugin: 'maven-publish'\n+\n+    project.group = MAVEN_GROUP_ID\n+    project.version = MAVEN_VERSION\n+\n+    if (project.name == 'base') {\n+        project.publishing {\n+            publications {\n+                javafx(MavenPublication) {\n+                    artifactId = 'javafx'\n+                    artifacts = []\n+                }\n+            }\n+        }\n+    }\n+\n+    gradle.taskGraph.whenReady { g ->\n+        project.tasks.findAll { it.name == 'generatePomFileForJavafxPublication' }.each { it ->\n+            it.doLast {\n+                copy {\n+                    into project.file(\"${project.layout.buildDirectory.get()}\/publications\/javafx\")\n+                    from file(\"${rootProject.projectDir}\/javafx.pom\")\n+                    rename \"javafx.pom\", \"pom-default.xml\"\n+                    filter { line -> line.replaceAll(\"@VERSION@\", MAVEN_VERSION)\n+                    }\n+                }\n+            }\n+        }\n+    }\n+\n+    project.publishing {\n+        repositories {\n+            maven {\n+                def repositoryUrl = project.hasProperty('repositoryUrl') ? project.getProperty('repositoryUrl') : \"\"\n+                def repositoryUsername = project.hasProperty('repositoryUsername') ? project.getProperty('repositoryUsername') : \"\"\n+                def repositoryPassword = project.hasProperty('repositoryPassword') ? project.getProperty('repositoryPassword') : \"\"\n+                url repositoryUrl\n+                credentials {\n+                    username repositoryUsername\n+                    password repositoryPassword\n+                }\n+            }\n+        }\n+    }\n+\n+    compileTargets { t ->\n+        project.publishing {\n+            publications {\n+                maven(MavenPublication) {\n+                    String artifactName = project.moduleName.replace('.', '-')\n+                    artifactId = artifactName\n+\n+                    afterEvaluate {\n+                        artifact project.tasks.\"moduleEmptyPublicationJar$t.capital\"\n+                        artifact project.tasks.\"modularPublicationJar$t.capital\" {\n+                            archiveClassifier.set(\"$t.name\")\n+                        }\n+                    }\n+\n+                    pom.withXml {\n+                        Node parent = asNode().appendNode(\"parent\")\n+                        parent.appendNode(\"groupId\", MAVEN_GROUP_ID)\n+                        parent.appendNode(\"artifactId\", \"javafx\")\n+                        parent.appendNode(\"version\", MAVEN_VERSION)\n+\n+                        Node dependencies = asNode().appendNode(\"dependencies\")\n+\n+                        Node projectDependencyPlatform = dependencies.appendNode(\"dependency\")\n+                        projectDependencyPlatform.appendNode(\"groupId\", MAVEN_GROUP_ID)\n+                        projectDependencyPlatform.appendNode(\"artifactId\", artifactName)\n+                        projectDependencyPlatform.appendNode(\"version\", MAVEN_VERSION)\n+                        projectDependencyPlatform.appendNode(\"classifier\", \"\\${javafx.platform}\")\n+\n+                        if (!projectDependencies.empty) {\n+                            projectDependencies.each { projName ->\n+                                def dep = project.project(\":$projName\")\n+                                String depName = dep.moduleName.replace('.', '-')\n+                                Node projectDependency = dependencies.appendNode(\"dependency\")\n+                                projectDependency.appendNode(\"groupId\", MAVEN_GROUP_ID)\n+                                projectDependency.appendNode(\"artifactId\", depName)\n+                                projectDependency.appendNode(\"version\", MAVEN_VERSION)\n+                            }\n+                        }\n+                    }\n+                }\n+            }\n+\n+        }\n+    }\n+}\n","filename":"maven-publish.gradle","additions":153,"deletions":0,"binary":false,"changes":153,"status":"added"}]}