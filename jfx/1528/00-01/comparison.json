{"files":[{"patch":"@@ -56,0 +56,2 @@\n+\n+    NSEvent             *lastKeyEvent;\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassView3D.h","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -252,0 +252,2 @@\n+\n+        lastKeyEvent = nil;\n@@ -279,0 +281,3 @@\n+    [lastKeyEvent release];\n+    lastKeyEvent = nil;\n+\n@@ -466,1 +471,0 @@\n-    [GlassApplication registerKeyEvent:theEvent];\n@@ -506,1 +510,1 @@\n-    BOOL result = [self->_delegate sendJavaKeyEvent:theEvent isDown:YES];\n+    BOOL result = [self handleKeyDown: theEvent];\n@@ -511,1 +515,1 @@\n-- (void)keyDown:(NSEvent *)theEvent\n+- (BOOL)handleKeyDown:(NSEvent *)theEvent\n@@ -513,1 +517,4 @@\n-    KEYLOG(\"keyDown\");\n+    if (theEvent == lastKeyEvent) return NO;\n+\n+    [lastKeyEvent release];\n+    lastKeyEvent = [theEvent retain];\n@@ -521,0 +528,4 @@\n+    \/\/ Returns YES if the event triggered some sort of InputMethod action or\n+    \/\/ if the PRESSED event was consumed by the scene graph.\n+    BOOL wasConsumed = YES;\n+\n@@ -532,1 +543,1 @@\n-        [self->_delegate sendJavaKeyEvent:theEvent isDown:YES];\n+        wasConsumed = [self->_delegate sendJavaKeyEvent:theEvent isDown:YES];\n@@ -534,0 +545,8 @@\n+\n+    return wasConsumed;\n+}\n+\n+- (void)keyDown:(NSEvent*)theEvent\n+{\n+    KEYLOG(\"keyDown\");\n+    [self handleKeyDown: theEvent];\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassView3D.m","additions":24,"deletions":5,"binary":false,"changes":29,"status":"modified"},{"patch":"@@ -67,3 +67,0 @@\n-    \/\/ The last processed key event\n-    NSEvent                 *s_lastKeyEvent;\n-\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassViewDelegate.h","additions":0,"deletions":3,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -684,7 +684,0 @@\n-    if (theEvent == s_lastKeyEvent) {\n-        \/\/ this must be a keyDown: generated by performKeyEquivalent: which returns NO by design\n-        return NO;\n-    }\n-    [s_lastKeyEvent release];\n-    s_lastKeyEvent = [theEvent retain];\n-\n@@ -707,0 +700,2 @@\n+        \/\/ We only return YES if the PRESSED event was consumed. The TextInput\n+        \/\/ control consumes any TYPED event that looks like a shortcut.\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassViewDelegate.m","additions":2,"deletions":7,"binary":false,"changes":9,"status":"modified"}]}