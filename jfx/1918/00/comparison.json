{"files":[{"patch":"@@ -78,0 +78,5 @@\n+import org.gradle.process.ExecOperations\n+import org.gradle.process.JavaExecSpec\n+\n+def execOps = project.services.get(ExecOperations)\n+\n@@ -882,1 +887,2 @@\n-                        exec {\n+                        def execOps = project.services.get(ExecOperations)\n+                        execOps.exec { ExecSpec spec ->\n@@ -964,1 +970,2 @@\n-    exec {\n+    def execOps = project.services.get(ExecOperations)\n+    execOps.exec { ExecSpec spec ->\n@@ -2022,1 +2029,1 @@\n-            p.javaexec {\n+            execOps.javaexec { JavaExecSpec spec ->\n@@ -2546,1 +2553,1 @@\n-                                exec {\n+                                execOps.exec { ExecSpec spec ->\n@@ -2587,1 +2594,1 @@\n-            javaexec {\n+            execOps.javaexec { JavaExecSpec spec ->\n@@ -2682,1 +2689,1 @@\n-            javaexec {\n+            execOps.javaexec { JavaExecSpec spec ->\n@@ -2701,1 +2708,1 @@\n-                exec {\n+                execOps.exec { ExecSpec spec ->\n@@ -2717,1 +2724,1 @@\n-                exec {\n+                execOps.exec { ExecSpec spec ->\n@@ -2733,1 +2740,1 @@\n-                exec {\n+                execOps.exec { ExecSpec spec ->\n@@ -2749,1 +2756,1 @@\n-                exec {\n+                execOps.exec { ExecSpec spec ->\n@@ -2765,1 +2772,1 @@\n-                exec {\n+                execOps.exec { ExecSpec spec ->\n@@ -2788,1 +2795,1 @@\n-                exec {\n+                execOps.exec { ExecSpec spec ->\n@@ -2945,1 +2952,1 @@\n-            javaexec {\n+            execOps.javaexec { JavaExecSpec spec ->\n@@ -3359,1 +3366,1 @@\n-            exec {\n+            execOps.exec { ExecSpec spec ->\n@@ -3391,1 +3398,1 @@\n-                exec {\n+                execOps.exec { ExecSpec spec ->\n@@ -3420,1 +3427,1 @@\n-                    exec {\n+                    execOps.exec { ExecSpec spec ->\n@@ -3438,1 +3445,1 @@\n-                    exec {\n+                    execOps.exec { ExecSpec spec ->\n@@ -3546,1 +3553,1 @@\n-                                    exec {\n+                                    execOps.exec { ExecSpec spec ->\n@@ -3550,1 +3557,1 @@\n-                                    exec {\n+                                    execOps.exec { ExecSpec spec ->\n@@ -3559,1 +3566,1 @@\n-                                exec {\n+                                execOps.exec { ExecSpec spec ->\n@@ -3614,1 +3621,1 @@\n-                                    exec {\n+                                    execOps.exec { ExecSpec spec ->\n@@ -3618,1 +3625,1 @@\n-                                    exec {\n+                                    execOps.exec { ExecSpec spec ->\n@@ -3627,1 +3634,1 @@\n-                                exec {\n+                                execOps.exec { ExecSpec spec ->\n@@ -3688,1 +3695,1 @@\n-                                        exec {\n+                                        execOps.exec { ExecSpec spec ->\n@@ -3696,1 +3703,1 @@\n-                                            exec {\n+                                            execOps.exec { ExecSpec spec ->\n@@ -3704,1 +3711,1 @@\n-                                    exec {\n+                                    execOps.exec { ExecSpec spec ->\n@@ -3713,1 +3720,1 @@\n-                                exec {\n+                                execOps.exec { ExecSpec spec ->\n@@ -3748,1 +3755,1 @@\n-                                    exec {\n+                                    execOps.exec { ExecSpec spec ->\n@@ -3763,1 +3770,1 @@\n-                                    exec {\n+                                    execOps.exec { ExecSpec spec ->\n@@ -3778,1 +3785,1 @@\n-                                    exec {\n+                                    execOps.exec { ExecSpec spec ->\n@@ -3790,1 +3797,1 @@\n-                            exec {\n+                            execOps.exec { ExecSpec spec ->\n@@ -3807,1 +3814,1 @@\n-                        exec {\n+                        execOps.exec { ExecSpec spec ->\n@@ -3814,1 +3821,1 @@\n-                        exec {\n+                        execOps.exec { ExecSpec spec ->\n@@ -3821,1 +3828,1 @@\n-                        exec {\n+                        execOps.exec { ExecSpec spec ->\n@@ -3828,1 +3835,1 @@\n-                        exec {\n+                        execOps.exec { ExecSpec spec ->\n@@ -3840,1 +3847,1 @@\n-                        exec {\n+                        execOps.exec { ExecSpec spec ->\n@@ -3855,1 +3862,1 @@\n-                        exec {\n+                        execOps.exec { ExecSpec spec ->\n@@ -3861,1 +3868,1 @@\n-                        exec {\n+                        execOps.exec { ExecSpec spec ->\n@@ -4045,1 +4052,1 @@\n-                exec {\n+                execOps.exec { ExecSpec spec ->\n@@ -4051,1 +4058,1 @@\n-                exec {\n+                execOps.exec { ExecSpec spec ->\n@@ -5115,1 +5122,1 @@\n-                        exec {\n+                        execOps.exec { ExecSpec spec ->\n@@ -5817,1 +5824,1 @@\n-                        exec {\n+                        execOps.exec { ExecSpec spec ->\n@@ -5834,1 +5841,1 @@\n-                        exec {\n+                        execOps.exec { ExecSpec spec ->\n@@ -5892,1 +5899,1 @@\n-                        exec {\n+                        execOps.exec { ExecSpec spec ->\n@@ -5909,1 +5916,1 @@\n-                        exec {\n+                        execOps.exec { ExecSpec spec ->\n@@ -5945,1 +5952,1 @@\n-                        exec {\n+                        execOps.exec { ExecSpec spec ->\n@@ -5962,1 +5969,1 @@\n-                        exec {\n+                        execOps.exec { ExecSpec spec ->\n@@ -6189,1 +6196,1 @@\n-                    exec {\n+                    execOps.exec { ExecSpec spec ->\n","filename":"build.gradle","additions":55,"deletions":48,"binary":false,"changes":103,"status":"modified"},{"patch":"@@ -26,0 +26,5 @@\n+import org.gradle.process.ExecOperations\n+import org.gradle.process.JavaExecSpec\n+\n+def execOps = project.services.get(ExecOperations)\n+\n@@ -98,1 +103,1 @@\n-        def checkGTK3Version = exec {\n+        def checkGTK3Version = execOps.exec { ExecSpec spec ->\n@@ -109,1 +114,1 @@\n-        exec {\n+        execOps.exec { ExecSpec spec ->\n@@ -116,1 +121,1 @@\n-        exec {\n+        execOps.exec { ExecSpec spec ->\n@@ -139,1 +144,1 @@\n-        exec {\n+        execOps.exec { ExecSpec spec ->\n@@ -146,1 +151,1 @@\n-        exec {\n+        execOps.exec { ExecSpec spec ->\n@@ -170,1 +175,1 @@\n-        exec {\n+        execOps.exec { ExecSpec spec ->\n@@ -177,1 +182,1 @@\n-        exec {\n+        execOps.exec { ExecSpec spec ->\n","filename":"buildSrc\/linux.gradle","additions":12,"deletions":7,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -26,0 +26,5 @@\n+import org.gradle.process.ExecOperations\n+import org.gradle.process.JavaExecSpec\n+\n+def execOps = project.services.get(ExecOperations)\n+\n@@ -74,1 +79,1 @@\n-            def xcodeBuildResult = exec {\n+            def xcodeBuildResult = execOps.exec { ExecSpec spec ->\n@@ -94,1 +99,1 @@\n-                exec {\n+                execOps.exec { ExecSpec spec ->\n@@ -101,1 +106,1 @@\n-                exec {\n+                execOps.exec { ExecSpec spec ->\n@@ -181,1 +186,1 @@\n-    exec {\n+    execOps.exec { ExecSpec spec ->\n@@ -190,1 +195,1 @@\n-    exec {\n+    execOps.exec { ExecSpec spec ->\n","filename":"buildSrc\/mac.gradle","additions":10,"deletions":5,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -29,0 +29,4 @@\n+import org.gradle.process.ExecOperations\n+import org.gradle.process.ExecSpec\n+\n+import javax.inject.Inject\n@@ -37,0 +41,5 @@\n+    @Inject\n+    CCTask(ExecOperations execOperations) {\n+        super(execOperations);\n+    }\n+\n@@ -53,2 +62,2 @@\n-        project.exec({\n-            commandLine(compiler);\n+        execCompile { ExecSpec spec ->\n+            spec.commandLine(compiler);\n@@ -62,1 +71,1 @@\n-                    args(stripped)\n+                    spec.args(stripped)\n@@ -64,1 +73,1 @@\n-                    args(params)\n+                    spec.args(params)\n@@ -66,1 +75,1 @@\n-            };\n+            }\n@@ -68,1 +77,1 @@\n-            if (headers != null) args(\"-I$headers\");\n+            if (headers != null) spec.args(\"-I$headers\");\n@@ -73,1 +82,1 @@\n-                if (file.isDirectory()) args(\"-I$file\");\n+                if (file.isDirectory()) spec.args(\"-I$file\");\n@@ -80,1 +89,1 @@\n-                    args(\/*\"\/Fd$pdbFile\",*\/ \"\/Fo$outputFile\", \"\/Fe$exeFile\", \"$sourceFile\")\n+                    spec.args(\/*\"\/Fd$pdbFile\",*\/ \"\/Fo$outputFile\", \"\/Fe$exeFile\", \"$sourceFile\")\n@@ -82,1 +91,1 @@\n-                    args(\/*\"\/Fd$pdbFile\",*\/ \"\/Fo$outputFile\", \"$sourceFile\");\n+                    spec.args(\/*\"\/Fd$pdbFile\",*\/ \"\/Fo$outputFile\", \"$sourceFile\");\n@@ -85,1 +94,1 @@\n-                args(\/*\"-Fd$pdbFile\",*\/ \"-o\", \"$outputFile\", \"$sourceFile\");\n+                spec.args(\/*\"-Fd$pdbFile\",*\/ \"-o\", \"$outputFile\", \"$sourceFile\");\n@@ -92,1 +101,1 @@\n-                args(linkerOptions);\n+                spec.args(linkerOptions);\n@@ -96,1 +105,1 @@\n-                environment(project.WINDOWS_NATIVE_COMPILE_ENVIRONMENT);\n+                spec.environment(project.WINDOWS_NATIVE_COMPILE_ENVIRONMENT);\n@@ -98,1 +107,1 @@\n-        });\n+        }\n","filename":"buildSrc\/src\/main\/groovy\/com\/sun\/javafx\/gradle\/CCTask.groovy","additions":22,"deletions":13,"binary":false,"changes":35,"status":"modified"},{"patch":"@@ -26,0 +26,5 @@\n+import org.gradle.process.ExecOperations\n+import org.gradle.process.ExecSpec\n+\n+import javax.inject.Inject\n+\n@@ -27,0 +32,5 @@\n+    @Inject\n+    CompileHLSLTask(ExecOperations execOperations) {\n+        super(execOperations);\n+    }\n+\n@@ -32,4 +42,10 @@\n-        project.exec({\n-            commandLine = [\"$project.FXC\", \"\/nologo\", \"\/T\", \"ps_3_0\", \"\/Fo\", \"$outputFile\", \"$sourceFile\"]\n-            environment(project.WINDOWS_NATIVE_COMPILE_ENVIRONMENT);\n-        });\n+        execCompile { ExecSpec spec ->\n+            spec.commandLine = [\n+                \"$project.FXC\",\n+                \"\/nologo\",\n+                \"\/T\", \"ps_3_0\",\n+                \"\/Fo\", \"$outputFile\",\n+                \"$sourceFile\"\n+            ]\n+            spec.environment(project.WINDOWS_NATIVE_COMPILE_ENVIRONMENT);\n+        }\n","filename":"buildSrc\/src\/main\/groovy\/com\/sun\/javafx\/gradle\/CompileHLSLTask.groovy","additions":20,"deletions":4,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -26,0 +26,5 @@\n+import org.gradle.process.ExecOperations\n+import org.gradle.process.ExecSpec\n+\n+import javax.inject.Inject\n+\n@@ -27,0 +32,5 @@\n+    @Inject\n+    CompileMSLTask(ExecOperations execOperations) {\n+        super(execOperations);\n+    }\n+\n@@ -33,4 +43,11 @@\n-        def includeDir = \"$project.buildDir\/$headerDir\"\n-        project.exec({\n-            commandLine = [\"${project.metalCompiler}\", \"-Wdeprecated\", \"-std=macos-metal2.4\", \"-I\", \"$includeDir\", \"-c\", \"$sourceFile\", \"-o\", \"$outputFile\"]\n-        });\n+        def includeDir = \"$project.buildDir\/$headerDir\";\n+        execCompile { ExecSpec spec ->\n+            spec.commandLine = [\n+                \"${project.metalCompiler}\",\n+                \"-Wdeprecated\",\n+                \"-std=macos-metal2.4\",\n+                \"-I\", \"$includeDir\",\n+                \"-c\", \"$sourceFile\",\n+                \"-o\", \"$outputFile\"\n+            ]\n+        }\n","filename":"buildSrc\/src\/main\/groovy\/com\/sun\/javafx\/gradle\/CompileMSLTask.groovy","additions":21,"deletions":4,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -27,0 +27,4 @@\n+import org.gradle.process.ExecOperations\n+import org.gradle.process.ExecSpec\n+\n+import javax.inject.Inject\n@@ -32,0 +36,5 @@\n+    @Inject\n+    CompileResourceTask(ExecOperations execOperations) {\n+        super(execOperations);\n+    }\n+\n@@ -38,6 +47,6 @@\n-        project.exec({\n-            commandLine(compiler);\n-            if (rcParams) args(rcParams);\n-            args(\"\/Fo$outputFile\", \"$sourceFile\");\n-            environment(project.WINDOWS_NATIVE_COMPILE_ENVIRONMENT);\n-        });\n+        execCompile { ExecSpec spec ->\n+            spec.commandLine(compiler);\n+            if (rcParams) spec.args(rcParams);\n+            spec.args(\"\/Fo$outputFile\", \"$sourceFile\");\n+            spec.environment(project.WINDOWS_NATIVE_COMPILE_ENVIRONMENT);\n+        }\n","filename":"buildSrc\/src\/main\/groovy\/com\/sun\/javafx\/gradle\/CompileResourceTask.groovy","additions":15,"deletions":6,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -32,0 +32,4 @@\n+import org.gradle.process.ExecOperations\n+import org.gradle.process.ExecSpec\n+\n+import javax.inject.Inject\n@@ -38,0 +42,6 @@\n+    private final ExecOperations execOperations;\n+\n+    @Inject\n+    ExportedSymbolsTask(ExecOperations execOperations) {\n+        this.execOperations = execOperations;\n+    }\n@@ -52,5 +62,5 @@\n-        project.exec({\n-            commandLine(\"nm\", \"-jg\");\n-            args(libNames);\n-            setStandardOutput(baos);\n-        });\n+        execOperations.exec { ExecSpec spec ->\n+            spec.commandLine(\"nm\", \"-jg\");\n+            spec.args(libNames);\n+            spec.setStandardOutput(baos);\n+        };\n","filename":"buildSrc\/src\/main\/groovy\/com\/sun\/javafx\/gradle\/ExportedSymbolsTask.groovy","additions":15,"deletions":5,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -34,0 +34,4 @@\n+import org.gradle.process.ExecOperations\n+import org.gradle.process.ExecSpec\n+\n+import javax.inject.Inject\n@@ -41,0 +45,7 @@\n+    private final ExecOperations execOperations;\n+\n+    @Inject\n+    JavaHeaderTask(ExecOperations execOperations) {\n+        this.execOperations = execOperations;\n+    }\n+\n@@ -92,4 +103,4 @@\n-        project.exec({\n-            commandLine(\"$project.JAVAH\", \"-d\", \"$output\", \"-classpath\", \"${classpath.asPath}\");\n-            args(classNames);\n-        });\n+        execOperations.exec { ExecSpec spec ->\n+            spec.commandLine(\"$project.JAVAH\", \"-d\", \"$output\", \"-classpath\", \"${classpath.asPath}\");\n+            spec.args(classNames);\n+        }\n","filename":"buildSrc\/src\/main\/groovy\/com\/sun\/javafx\/gradle\/JavaHeaderTask.groovy","additions":15,"deletions":4,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -31,0 +31,2 @@\n+import org.gradle.process.ExecOperations\n+import org.gradle.process.ExecSpec\n@@ -32,0 +34,1 @@\n+import javax.inject.Inject\n@@ -39,0 +42,7 @@\n+    private final ExecOperations execOperations;\n+\n+    @Inject\n+    LinkTask(ExecOperations execOperations) {\n+        this.execOperations = execOperations;\n+    }\n+\n@@ -42,2 +52,2 @@\n-        project.exec({\n-            commandLine(linker);\n+        execOperations.exec { ExecSpec spec ->\n+            spec.commandLine(linker);\n@@ -46,2 +56,2 @@\n-                    args(\"-r\");\n-                    args(\"-o\");\n+                    spec.args(\"-r\");\n+                    spec.args(\"-o\");\n@@ -49,1 +59,1 @@\n-                    args(\"rcs\");\n+                    spec.args(\"rcs\");\n@@ -51,1 +61,1 @@\n-                args(\"$lib\");\n+                spec.args(\"$lib\");\n@@ -54,1 +64,1 @@\n-            args(objectDir.listFiles().sort().findAll{ !it.getAbsolutePath().endsWith(\".bc\") });\n+            spec.args(objectDir.listFiles().sort().findAll{ !it.getAbsolutePath().endsWith(\".bc\") });\n@@ -56,1 +66,1 @@\n-                args(\"\/out:$lib\");\n+                spec.args(\"\/out:$lib\");\n@@ -59,1 +69,1 @@\n-                    args(\"-o\", \"$lib\");\n+                    spec.args(\"-o\", \"$lib\");\n@@ -62,2 +72,2 @@\n-            if (project.IS_DEBUG_NATIVE && !project.IS_WINDOWS) args(\"-g\");\n-            if (linkParams != null) args(linkParams);\n+            if (project.IS_DEBUG_NATIVE && !project.IS_WINDOWS) spec.args(\"-g\");\n+            if (linkParams != null) spec.args(linkParams);\n@@ -67,3 +77,3 @@\n-                args(\"\/pdb:${libPrefix}.pdb\",\n-                    \"\/map:${libPrefix}.map\");\n-                environment(project.WINDOWS_NATIVE_COMPILE_ENVIRONMENT);\n+                spec.args(\"\/pdb:${libPrefix}.pdb\",\n+                          \"\/map:${libPrefix}.map\");\n+                spec.environment(project.WINDOWS_NATIVE_COMPILE_ENVIRONMENT);\n@@ -71,1 +81,1 @@\n-        });\n+        }\n@@ -74,1 +84,0 @@\n-\n","filename":"buildSrc\/src\/main\/groovy\/com\/sun\/javafx\/gradle\/LinkTask.groovy","additions":25,"deletions":16,"binary":false,"changes":41,"status":"modified"},{"patch":"@@ -30,0 +30,2 @@\n+import org.gradle.process.ExecOperations\n+import org.gradle.process.ExecSpec\n@@ -31,0 +33,1 @@\n+import javax.inject.Inject\n@@ -35,0 +38,8 @@\n+\n+    private final ExecOperations execOperations;\n+\n+    @Inject\n+    LipoTask(ExecOperations execOperations) {\n+        this.execOperations = execOperations;\n+    }\n+\n@@ -46,4 +57,4 @@\n-        project.exec({\n-            commandLine(\"lipo\", \"-create\", \"-output\", \"$lib\");\n-            args(libNames);\n-        });\n+        execOperations.exec { ExecSpec spec ->\n+            spec.commandLine(\"lipo\", \"-create\", \"-output\", \"$lib\");\n+            spec.args(libNames);\n+        }\n","filename":"buildSrc\/src\/main\/groovy\/com\/sun\/javafx\/gradle\/LipoTask.groovy","additions":15,"deletions":4,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+import org.gradle.api.Action\n@@ -34,0 +35,4 @@\n+import org.gradle.process.ExecOperations\n+import org.gradle.process.ExecSpec\n+\n+import javax.inject.Inject\n@@ -49,0 +54,7 @@\n+    private final ExecOperations execOperations;\n+\n+    @Inject\n+    NativeCompileTask(ExecOperations execOperations) {\n+        this.execOperations = execOperations;\n+    }\n+\n@@ -82,0 +94,5 @@\n+    \/\/ Replacement for project.exec, subclasses call this.\n+    protected void execCompile(Action<ExecSpec> action) {\n+        execOperations.exec(action);\n+    }\n+\n","filename":"buildSrc\/src\/main\/groovy\/com\/sun\/javafx\/gradle\/NativeCompileTask.groovy","additions":17,"deletions":0,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -26,0 +26,5 @@\n+import org.gradle.process.ExecOperations\n+import org.gradle.process.JavaExecSpec\n+\n+def execOps = project.services.get(ExecOperations)\n+\n@@ -67,1 +72,1 @@\n-            exec({\n+            execOps.exec { ExecSpec spec ->\n@@ -76,1 +81,1 @@\n-            });\n+            }\n","filename":"buildSrc\/win.gradle","additions":7,"deletions":2,"binary":false,"changes":9,"status":"modified"}]}