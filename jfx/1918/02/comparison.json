{"files":[{"patch":"@@ -78,0 +78,4 @@\n+import org.gradle.process.ExecOperations\n+\n+def execOps = project.services.get(ExecOperations)\n+\n@@ -882,1 +886,2 @@\n-                        exec {\n+                        def execOps = project.services.get(ExecOperations)\n+                        execOps.exec { spec ->\n@@ -964,1 +969,2 @@\n-    exec {\n+    def execOps = project.services.get(ExecOperations)\n+    execOps.exec { spec ->\n@@ -2022,1 +2028,1 @@\n-            p.javaexec {\n+            execOps.javaexec { spec ->\n@@ -2546,1 +2552,1 @@\n-                                exec {\n+                                execOps.exec { spec ->\n@@ -2587,1 +2593,1 @@\n-            javaexec {\n+            execOps.javaexec { spec ->\n@@ -2682,1 +2688,1 @@\n-            javaexec {\n+            execOps.javaexec { spec ->\n@@ -2701,1 +2707,1 @@\n-                exec {\n+                execOps.exec { spec ->\n@@ -2717,1 +2723,1 @@\n-                exec {\n+                execOps.exec { spec ->\n@@ -2733,1 +2739,1 @@\n-                exec {\n+                execOps.exec { spec ->\n@@ -2749,1 +2755,1 @@\n-                exec {\n+                execOps.exec { spec ->\n@@ -2765,1 +2771,1 @@\n-                exec {\n+                execOps.exec { spec ->\n@@ -2788,1 +2794,1 @@\n-                exec {\n+                execOps.exec { spec ->\n@@ -2945,1 +2951,1 @@\n-            javaexec {\n+            execOps.javaexec { spec ->\n@@ -3359,1 +3365,1 @@\n-            exec {\n+            execOps.exec { spec ->\n@@ -3391,1 +3397,1 @@\n-                exec {\n+                execOps.exec { spec ->\n@@ -3420,1 +3426,1 @@\n-                    exec {\n+                    execOps.exec { spec ->\n@@ -3438,1 +3444,1 @@\n-                    exec {\n+                    execOps.exec { spec ->\n@@ -3546,1 +3552,1 @@\n-                                    exec {\n+                                    execOps.exec { spec ->\n@@ -3550,1 +3556,1 @@\n-                                    exec {\n+                                    execOps.exec { spec ->\n@@ -3559,1 +3565,1 @@\n-                                exec {\n+                                execOps.exec { spec ->\n@@ -3614,1 +3620,1 @@\n-                                    exec {\n+                                    execOps.exec { spec ->\n@@ -3618,1 +3624,1 @@\n-                                    exec {\n+                                    execOps.exec { spec ->\n@@ -3627,1 +3633,1 @@\n-                                exec {\n+                                execOps.exec { spec ->\n@@ -3688,1 +3694,1 @@\n-                                        exec {\n+                                        execOps.exec { spec ->\n@@ -3696,1 +3702,1 @@\n-                                            exec {\n+                                            execOps.exec { spec ->\n@@ -3704,1 +3710,1 @@\n-                                    exec {\n+                                    execOps.exec { spec ->\n@@ -3713,1 +3719,1 @@\n-                                exec {\n+                                execOps.exec { spec ->\n@@ -3748,1 +3754,1 @@\n-                                    exec {\n+                                    execOps.exec { spec ->\n@@ -3763,1 +3769,1 @@\n-                                    exec {\n+                                    execOps.exec { spec ->\n@@ -3778,1 +3784,1 @@\n-                                    exec {\n+                                    execOps.exec { spec ->\n@@ -3790,1 +3796,1 @@\n-                            exec {\n+                            execOps.exec { spec ->\n@@ -3807,1 +3813,1 @@\n-                        exec {\n+                        execOps.exec { spec ->\n@@ -3814,1 +3820,1 @@\n-                        exec {\n+                        execOps.exec { spec ->\n@@ -3821,1 +3827,1 @@\n-                        exec {\n+                        execOps.exec { spec ->\n@@ -3828,1 +3834,1 @@\n-                        exec {\n+                        execOps.exec { spec ->\n@@ -3840,1 +3846,1 @@\n-                        exec {\n+                        execOps.exec { spec ->\n@@ -3855,1 +3861,1 @@\n-                        exec {\n+                        execOps.exec { spec ->\n@@ -3861,1 +3867,1 @@\n-                        exec {\n+                        execOps.exec { spec ->\n@@ -4045,1 +4051,1 @@\n-                exec {\n+                execOps.exec { spec ->\n@@ -4051,1 +4057,1 @@\n-                exec {\n+                execOps.exec { spec ->\n@@ -5115,1 +5121,1 @@\n-                        exec {\n+                        execOps.exec { spec ->\n@@ -5817,1 +5823,1 @@\n-                        exec {\n+                        execOps.exec { spec ->\n@@ -5834,1 +5840,1 @@\n-                        exec {\n+                        execOps.exec { spec ->\n@@ -5892,1 +5898,1 @@\n-                        exec {\n+                        execOps.exec { spec ->\n@@ -5909,1 +5915,1 @@\n-                        exec {\n+                        execOps.exec { spec ->\n@@ -5945,1 +5951,1 @@\n-                        exec {\n+                        execOps.exec { spec ->\n@@ -5962,1 +5968,1 @@\n-                        exec {\n+                        execOps.exec { spec ->\n@@ -6189,1 +6195,1 @@\n-                    exec {\n+                    execOps.exec { spec ->\n","filename":"build.gradle","additions":54,"deletions":48,"binary":false,"changes":102,"status":"modified"},{"patch":"@@ -26,0 +26,4 @@\n+import org.gradle.process.ExecOperations\n+\n+def execOps = project.services.get(ExecOperations)\n+\n@@ -98,1 +102,1 @@\n-        def checkGTK3Version = exec {\n+        def checkGTK3Version = execOps.exec { spec ->\n@@ -109,1 +113,1 @@\n-        exec {\n+        execOps.exec { spec ->\n@@ -116,1 +120,1 @@\n-        exec {\n+        execOps.exec { spec ->\n@@ -139,1 +143,1 @@\n-        exec {\n+        execOps.exec { spec ->\n@@ -146,1 +150,1 @@\n-        exec {\n+        execOps.exec { spec ->\n@@ -170,1 +174,1 @@\n-        exec {\n+        execOps.exec { spec ->\n@@ -177,1 +181,1 @@\n-        exec {\n+        execOps.exec { spec ->\n","filename":"buildSrc\/linux.gradle","additions":11,"deletions":7,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -26,0 +26,4 @@\n+import org.gradle.process.ExecOperations\n+\n+def execOps = project.services.get(ExecOperations)\n+\n@@ -74,1 +78,1 @@\n-            def xcodeBuildResult = exec {\n+            def xcodeBuildResult = execOps.exec { spec ->\n@@ -94,1 +98,1 @@\n-                exec {\n+                execOps.exec { spec ->\n@@ -101,1 +105,1 @@\n-                exec {\n+                execOps.exec { spec ->\n@@ -181,1 +185,1 @@\n-    exec {\n+    execOps.exec { spec ->\n@@ -190,1 +194,1 @@\n-    exec {\n+    execOps.exec { spec ->\n","filename":"buildSrc\/mac.gradle","additions":9,"deletions":5,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -29,0 +29,3 @@\n+import org.gradle.process.ExecOperations\n+\n+import javax.inject.Inject\n@@ -37,0 +40,5 @@\n+    @Inject\n+    CCTask(ExecOperations execOperations) {\n+        super(execOperations);\n+    }\n+\n@@ -53,2 +61,2 @@\n-        project.exec({\n-            commandLine(compiler);\n+        execCompile { spec ->\n+            spec.commandLine(compiler);\n@@ -62,1 +70,1 @@\n-                    args(stripped)\n+                    spec.args(stripped)\n@@ -64,1 +72,1 @@\n-                    args(params)\n+                    spec.args(params)\n@@ -66,1 +74,1 @@\n-            };\n+            }\n@@ -68,1 +76,1 @@\n-            if (headers != null) args(\"-I$headers\");\n+            if (headers != null) spec.args(\"-I$headers\");\n@@ -73,1 +81,1 @@\n-                if (file.isDirectory()) args(\"-I$file\");\n+                if (file.isDirectory()) spec.args(\"-I$file\");\n@@ -80,1 +88,1 @@\n-                    args(\/*\"\/Fd$pdbFile\",*\/ \"\/Fo$outputFile\", \"\/Fe$exeFile\", \"$sourceFile\")\n+                    spec.args(\/*\"\/Fd$pdbFile\",*\/ \"\/Fo$outputFile\", \"\/Fe$exeFile\", \"$sourceFile\")\n@@ -82,1 +90,1 @@\n-                    args(\/*\"\/Fd$pdbFile\",*\/ \"\/Fo$outputFile\", \"$sourceFile\");\n+                    spec.args(\/*\"\/Fd$pdbFile\",*\/ \"\/Fo$outputFile\", \"$sourceFile\");\n@@ -85,1 +93,1 @@\n-                args(\/*\"-Fd$pdbFile\",*\/ \"-o\", \"$outputFile\", \"$sourceFile\");\n+                spec.args(\/*\"-Fd$pdbFile\",*\/ \"-o\", \"$outputFile\", \"$sourceFile\");\n@@ -92,1 +100,1 @@\n-                args(linkerOptions);\n+                spec.args(linkerOptions);\n@@ -96,1 +104,1 @@\n-                environment(project.WINDOWS_NATIVE_COMPILE_ENVIRONMENT);\n+                spec.environment(project.WINDOWS_NATIVE_COMPILE_ENVIRONMENT);\n@@ -98,1 +106,1 @@\n-        });\n+        }\n","filename":"buildSrc\/src\/main\/groovy\/com\/sun\/javafx\/gradle\/CCTask.groovy","additions":21,"deletions":13,"binary":false,"changes":34,"status":"modified"},{"patch":"@@ -26,0 +26,4 @@\n+import org.gradle.process.ExecOperations\n+\n+import javax.inject.Inject\n+\n@@ -27,0 +31,5 @@\n+    @Inject\n+    CompileHLSLTask(ExecOperations execOperations) {\n+        super(execOperations);\n+    }\n+\n@@ -32,4 +41,10 @@\n-        project.exec({\n-            commandLine = [\"$project.FXC\", \"\/nologo\", \"\/T\", \"ps_3_0\", \"\/Fo\", \"$outputFile\", \"$sourceFile\"]\n-            environment(project.WINDOWS_NATIVE_COMPILE_ENVIRONMENT);\n-        });\n+        execCompile { spec ->\n+            spec.commandLine = [\n+                \"$project.FXC\",\n+                \"\/nologo\",\n+                \"\/T\", \"ps_3_0\",\n+                \"\/Fo\", \"$outputFile\",\n+                \"$sourceFile\"\n+            ]\n+            spec.environment(project.WINDOWS_NATIVE_COMPILE_ENVIRONMENT);\n+        }\n","filename":"buildSrc\/src\/main\/groovy\/com\/sun\/javafx\/gradle\/CompileHLSLTask.groovy","additions":19,"deletions":4,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -26,0 +26,4 @@\n+import org.gradle.process.ExecOperations\n+\n+import javax.inject.Inject\n+\n@@ -27,0 +31,5 @@\n+    @Inject\n+    CompileMSLTask(ExecOperations execOperations) {\n+        super(execOperations);\n+    }\n+\n@@ -33,4 +42,11 @@\n-        def includeDir = \"$project.buildDir\/$headerDir\"\n-        project.exec({\n-            commandLine = [\"${project.metalCompiler}\", \"-Wdeprecated\", \"-std=macos-metal2.4\", \"-I\", \"$includeDir\", \"-c\", \"$sourceFile\", \"-o\", \"$outputFile\"]\n-        });\n+        def includeDir = \"$project.buildDir\/$headerDir\";\n+        execCompile { spec ->\n+            spec.commandLine = [\n+                \"${project.metalCompiler}\",\n+                \"-Wdeprecated\",\n+                \"-std=macos-metal2.4\",\n+                \"-I\", \"$includeDir\",\n+                \"-c\", \"$sourceFile\",\n+                \"-o\", \"$outputFile\"\n+            ]\n+        }\n","filename":"buildSrc\/src\/main\/groovy\/com\/sun\/javafx\/gradle\/CompileMSLTask.groovy","additions":20,"deletions":4,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -27,0 +27,3 @@\n+import org.gradle.process.ExecOperations\n+\n+import javax.inject.Inject\n@@ -32,0 +35,5 @@\n+    @Inject\n+    CompileResourceTask(ExecOperations execOperations) {\n+        super(execOperations);\n+    }\n+\n@@ -38,6 +46,6 @@\n-        project.exec({\n-            commandLine(compiler);\n-            if (rcParams) args(rcParams);\n-            args(\"\/Fo$outputFile\", \"$sourceFile\");\n-            environment(project.WINDOWS_NATIVE_COMPILE_ENVIRONMENT);\n-        });\n+        execCompile { spec ->\n+            spec.commandLine(compiler);\n+            if (rcParams) spec.args(rcParams);\n+            spec.args(\"\/Fo$outputFile\", \"$sourceFile\");\n+            spec.environment(project.WINDOWS_NATIVE_COMPILE_ENVIRONMENT);\n+        }\n","filename":"buildSrc\/src\/main\/groovy\/com\/sun\/javafx\/gradle\/CompileResourceTask.groovy","additions":14,"deletions":6,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -32,0 +32,3 @@\n+import org.gradle.process.ExecOperations\n+\n+import javax.inject.Inject\n@@ -38,0 +41,6 @@\n+    private final ExecOperations execOperations;\n+\n+    @Inject\n+    ExportedSymbolsTask(ExecOperations execOperations) {\n+        this.execOperations = execOperations;\n+    }\n@@ -52,5 +61,5 @@\n-        project.exec({\n-            commandLine(\"nm\", \"-jg\");\n-            args(libNames);\n-            setStandardOutput(baos);\n-        });\n+        execOperations.exec { spec ->\n+            spec.commandLine(\"nm\", \"-jg\");\n+            spec.args(libNames);\n+            spec.setStandardOutput(baos);\n+        };\n","filename":"buildSrc\/src\/main\/groovy\/com\/sun\/javafx\/gradle\/ExportedSymbolsTask.groovy","additions":14,"deletions":5,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -34,0 +34,3 @@\n+import org.gradle.process.ExecOperations\n+\n+import javax.inject.Inject\n@@ -41,0 +44,7 @@\n+    private final ExecOperations execOperations;\n+\n+    @Inject\n+    JavaHeaderTask(ExecOperations execOperations) {\n+        this.execOperations = execOperations;\n+    }\n+\n@@ -92,4 +102,4 @@\n-        project.exec({\n-            commandLine(\"$project.JAVAH\", \"-d\", \"$output\", \"-classpath\", \"${classpath.asPath}\");\n-            args(classNames);\n-        });\n+        execOperations.exec { spec ->\n+            spec.commandLine(\"$project.JAVAH\", \"-d\", \"$output\", \"-classpath\", \"${classpath.asPath}\");\n+            spec.args(classNames);\n+        }\n","filename":"buildSrc\/src\/main\/groovy\/com\/sun\/javafx\/gradle\/JavaHeaderTask.groovy","additions":14,"deletions":4,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -31,0 +31,1 @@\n+import org.gradle.process.ExecOperations\n@@ -32,0 +33,1 @@\n+import javax.inject.Inject\n@@ -39,0 +41,7 @@\n+    private final ExecOperations execOperations;\n+\n+    @Inject\n+    LinkTask(ExecOperations execOperations) {\n+        this.execOperations = execOperations;\n+    }\n+\n@@ -42,2 +51,2 @@\n-        project.exec({\n-            commandLine(linker);\n+        execOperations.exec { spec ->\n+            spec.commandLine(linker);\n@@ -46,2 +55,2 @@\n-                    args(\"-r\");\n-                    args(\"-o\");\n+                    spec.args(\"-r\");\n+                    spec.args(\"-o\");\n@@ -49,1 +58,1 @@\n-                    args(\"rcs\");\n+                    spec.args(\"rcs\");\n@@ -51,1 +60,1 @@\n-                args(\"$lib\");\n+                spec.args(\"$lib\");\n@@ -54,1 +63,1 @@\n-            args(objectDir.listFiles().sort().findAll{ !it.getAbsolutePath().endsWith(\".bc\") });\n+            spec.args(objectDir.listFiles().sort().findAll{ !it.getAbsolutePath().endsWith(\".bc\") });\n@@ -56,1 +65,1 @@\n-                args(\"\/out:$lib\");\n+                spec.args(\"\/out:$lib\");\n@@ -59,1 +68,1 @@\n-                    args(\"-o\", \"$lib\");\n+                    spec.args(\"-o\", \"$lib\");\n@@ -62,2 +71,2 @@\n-            if (project.IS_DEBUG_NATIVE && !project.IS_WINDOWS) args(\"-g\");\n-            if (linkParams != null) args(linkParams);\n+            if (project.IS_DEBUG_NATIVE && !project.IS_WINDOWS) spec.args(\"-g\");\n+            if (linkParams != null) spec.args(linkParams);\n@@ -67,3 +76,3 @@\n-                args(\"\/pdb:${libPrefix}.pdb\",\n-                    \"\/map:${libPrefix}.map\");\n-                environment(project.WINDOWS_NATIVE_COMPILE_ENVIRONMENT);\n+                spec.args(\"\/pdb:${libPrefix}.pdb\",\n+                          \"\/map:${libPrefix}.map\");\n+                spec.environment(project.WINDOWS_NATIVE_COMPILE_ENVIRONMENT);\n@@ -71,1 +80,1 @@\n-        });\n+        }\n@@ -74,1 +83,0 @@\n-\n","filename":"buildSrc\/src\/main\/groovy\/com\/sun\/javafx\/gradle\/LinkTask.groovy","additions":24,"deletions":16,"binary":false,"changes":40,"status":"modified"},{"patch":"@@ -30,0 +30,1 @@\n+import org.gradle.process.ExecOperations\n@@ -31,0 +32,1 @@\n+import javax.inject.Inject\n@@ -35,0 +37,8 @@\n+\n+    private final ExecOperations execOperations;\n+\n+    @Inject\n+    LipoTask(ExecOperations execOperations) {\n+        this.execOperations = execOperations;\n+    }\n+\n@@ -46,4 +56,4 @@\n-        project.exec({\n-            commandLine(\"lipo\", \"-create\", \"-output\", \"$lib\");\n-            args(libNames);\n-        });\n+        execOperations.exec { spec ->\n+            spec.commandLine(\"lipo\", \"-create\", \"-output\", \"$lib\");\n+            spec.args(libNames);\n+        }\n","filename":"buildSrc\/src\/main\/groovy\/com\/sun\/javafx\/gradle\/LipoTask.groovy","additions":14,"deletions":4,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+import org.gradle.api.Action\n@@ -34,0 +35,4 @@\n+import org.gradle.process.ExecOperations\n+import org.gradle.process.ExecSpec\n+\n+import javax.inject.Inject\n@@ -49,0 +54,7 @@\n+    private final ExecOperations execOperations;\n+\n+    @Inject\n+    NativeCompileTask(ExecOperations execOperations) {\n+        this.execOperations = execOperations;\n+    }\n+\n@@ -82,0 +94,5 @@\n+    \/\/ Replacement for project.exec, subclasses call this.\n+    protected void execCompile(Action<ExecSpec> action) {\n+        execOperations.exec(action);\n+    }\n+\n","filename":"buildSrc\/src\/main\/groovy\/com\/sun\/javafx\/gradle\/NativeCompileTask.groovy","additions":17,"deletions":0,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -26,0 +26,4 @@\n+import org.gradle.process.ExecOperations\n+\n+def execOps = project.services.get(ExecOperations)\n+\n@@ -67,1 +71,1 @@\n-            exec({\n+            execOps.exec { spec ->\n@@ -76,1 +80,1 @@\n-            });\n+            }\n","filename":"buildSrc\/win.gradle","additions":6,"deletions":2,"binary":false,"changes":8,"status":"modified"}]}