{"files":[{"patch":"@@ -5,1 +5,1 @@\n- * Copyright (c) 2012, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2012, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -65,0 +65,4 @@\n+            h5 {\n+                font-size: 14px;\n+                margin: 18px 0px 10px 0px;\n+            }\n@@ -830,3 +834,4 @@\n-    <p>A media query is a method of testing certain aspects of the <a href=\"..\/..\/..\/javafx\/scene\/Scene.html\">Scene<\/a>.\n-        Media queries are independent of the contents of the scene graph, its styling, or any other internal aspect;\n-        they're only dependent on \"external\" configuration of the <code>Scene<\/code>.\n+    <p>A media query is a method of testing certain aspects of the <a href=\"..\/..\/..\/javafx\/scene\/Scene.html\">Scene<\/a>\n+        or <a href=\"..\/..\/..\/javafx\/stage\/Stage.html\">Stage<\/a>. Media queries are independent of the contents of the\n+        scene graph, its styling, or any other internal aspect; they're only dependent on \"external\" configuration of\n+        the <code>Scene<\/code> or <code>Stage<\/code>.\n@@ -845,0 +850,3 @@\n+        Syntactically, media features resemble CSS properties: they consist of a feature name, a colon, and a value to\n+        test for. Media features are always enclosed in parentheses. They may also be written in boolean form as just a\n+        feature name, or in range form using arithmetic comparison operators.\n@@ -851,6 +859,5 @@\n-    <p>Syntactically, media features resemble CSS properties: they consist of a feature name, a colon, and a value to\n-        test for. Media features are always enclosed in parentheses. They may also be written in boolean form as just a\n-        feature name. In this case, the media feature is evaluated in a <strong>boolean context<\/strong>. This is a\n-        convenient shorthand for features that have a reasonable default value. A media feature that is evaluated in a\n-        boolean context evaluates to <code>true<\/code> if it would be <code>true<\/code> for any value <em>other<\/em>\n-        than the reasonable default value.\n+    <h5>Evaluating Media Features in a Boolean Context<\/h5>\n+    <p>If the colon and value is omitted, the media feature is evaluated in a boolean context.\n+        This is a convenient shorthand for features that have a reasonable default value. A media feature that is\n+        evaluated in a boolean context evaluates to <code>true<\/code> if it would be <code>true<\/code> for any value\n+        <em>other<\/em> than the reasonable default value.\n@@ -860,0 +867,27 @@\n+    <h5>Evaluating Media Features in a Range Context<\/h5>\n+    <p>A media feature with a range type can be evaluated in a range context with two forms:\n+        <ol>\n+            <li>The <strong>basic form<\/strong> consists of a feature name, an arithmetic comparison operator,\n+                and a value. For example:<br>\n+                <code>\n+                    (width &gt; 600px)<br>\n+                    (500px &lt;= height)<br>\n+                <\/code>\n+                <br>\n+            <li>The <strong>interval form<\/strong> consists of a feature name, nested between two comparison\n+                operators and two values. For example:<br>\n+                <code>\n+                    (600px &gt;= width &gt;= 400px)<br>\n+                    (10em &lt; height &lt;= 20em)<br>\n+                <\/code>\n+        <\/ol>\n+        Rather than evaluating media features in a range context, they can also be evaluated in a discrete context by\n+        writing the feature name with a \"min-\" or \"max-\" prefix:\n+        <ul>\n+            <li>Using the \"min-\" prefix on a feature name is equivalent to using the <code>&gt;=<\/code> operator, for example:<br>\n+                <code>(min-height: 500px)<\/code> is equivalent to <code>(height &gt;= 500px)<\/code><br>\n+                <br>\n+            <li>Using the \"max-\" prefix on a feature name is equivalent to using the <code>&lt;=<\/code> operator, for example:<br>\n+                <code>(max-width: 600px)<\/code> is equivalent to <code>(width &lt;= 600px)<\/code><br>\n+        <\/ul>\n+    <h5>Combining Media Features<\/h5>\n@@ -901,1 +935,1 @@\n-    <table class=\"cssmisctable\" id=\"mediafeatures\">\n+    <table class=\"csspropertytable\" id=\"mediafeatures\">\n@@ -903,1 +937,1 @@\n-        <thead>\n+        <tbody>\n@@ -905,3 +939,40 @@\n-                <th>Media feature<\/th>\n-                <th>Values<\/th>\n-                <th>Boolean Context<\/th>\n+                <th class=\"propertyname subheader\">Viewport Characteristics<\/th>\n+                <th class=\"subheader\">Value<\/th>\n+                <th class=\"subheader\">Type<\/th>\n+                <th class=\"subheader\">Comments<\/th>\n+            <\/tr>\n+            <tr>\n+                <td class=\"value\">width<\/td>\n+                <td class=\"value\"><a href=\"#typelength\" class=\"typeref\">&lt;length&gt;<\/a><\/td>\n+                <td>range<\/td>\n+                <td>corresponds to <code>Scene.width<\/code><\/td>\n+            <\/tr>\n+            <tr>\n+                <td class=\"value\">height<\/td>\n+                <td class=\"value\"><a href=\"#typelength\" class=\"typeref\">&lt;length&gt;<\/a><\/td>\n+                <td>range<\/td>\n+                <td>corresponds to <code>Scene.height<\/code><\/td>\n+            <\/tr>\n+            <tr>\n+                <td class=\"value\">aspect-ratio<\/td>\n+                <td class=\"value\"><a href=\"#typenumber\" class=\"typeref\">&lt;number&gt;<\/a><\/td>\n+                <td>range<\/td>\n+                <td>aspect ratio = <code>width<\/code> \/ <code>height<\/code><\/td>\n+            <\/tr>\n+            <tr>\n+                <td class=\"value\">orientation<\/td>\n+                <td class=\"value\">portrait | landscape<\/td>\n+                <td>discrete<\/td>\n+                <td><code>portrait<\/code> if <code>height<\/code> &gt;= <code>width<\/code>, <code>landscape<\/code> otherwise<\/td>\n+            <\/tr>\n+            <tr>\n+                <td class=\"value\">display-mode<\/td>\n+                <td class=\"value\">fullscreen | standalone<\/td>\n+                <td>discrete<\/td>\n+                <td><code>fullscreen<\/code> if <code>Stage.isFullScreen()<\/code>, <code>standalone<\/code> otherwise<\/td>\n+            <\/tr>\n+            <tr>\n+                <th class=\"propertyname subheader\">User Preference<\/th>\n+                <th class=\"subheader\">Value<\/th>\n+                <th class=\"subheader\">Type<\/th>\n+                <th class=\"subheader\">Comments<\/th>\n@@ -909,2 +980,0 @@\n-        <\/thead>\n-        <tbody>\n@@ -914,1 +983,2 @@\n-                <td>not applicable<\/td>\n+                <td>discrete<\/td>\n+                <td><\/td>\n@@ -919,0 +989,1 @@\n+                <td>discrete<\/td>\n@@ -924,0 +995,1 @@\n+                <td>discrete<\/td>\n@@ -929,0 +1001,1 @@\n+                <td>discrete<\/td>\n@@ -934,0 +1007,1 @@\n+                <td>discrete<\/td>\n@@ -990,1 +1064,1 @@\n-    <li>With the exception of @font&#8209;face and @import, @-keyword statements are ignored.<\/li>\n+    <li>With the exception of @font&#8209;face, @import, and @media, @-keyword statements are ignored.<\/li>\n","filename":"modules\/javafx.graphics\/src\/main\/docs\/javafx\/scene\/doc-files\/cssref.html","additions":93,"deletions":19,"binary":false,"changes":112,"status":"modified"},{"patch":"@@ -3,3 +3,3 @@\n-   width=\"92.604164mm\"\n-   height=\"19.843748mm\"\n-   viewBox=\"0 0 92.604164 19.843748\"\n+   width=\"350\"\n+   height=\"110\"\n+   viewBox=\"0 0 92.604167 29.104167\"\n@@ -12,164 +12,185 @@\n-  <g\n-     id=\"layer1\"\n-     transform=\"translate(-15.875,-15.875001)\">\n-    <rect\n-       style=\"fill:none;fill-opacity:1;stroke:#000000;stroke-width:0;stroke-linecap:round;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1;paint-order:normal\"\n-       id=\"rect11\"\n-       width=\"92.604164\"\n-       height=\"19.84375\"\n-       x=\"15.875\"\n-       y=\"15.875002\" \/>\n-    <path\n-       style=\"fill:none;stroke:#000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1\"\n-       d=\"M 18.520833,18.520834 V 23.8125\"\n-       id=\"path1\" \/>\n-    <path\n-       style=\"fill:none;stroke:#000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1\"\n-       d=\"M 19.843749,18.520834 V 23.8125\"\n-       id=\"path2\" \/>\n-    <path\n-       style=\"fill:none;stroke:#000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1\"\n-       d=\"m 18.520833,21.166667 h 5.291666\"\n-       id=\"path3\" \/>\n-    <rect\n-       style=\"fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:0.5;stroke-linecap:round;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1;paint-order:normal\"\n-       id=\"rect3\"\n-       width=\"4.791666\"\n-       height=\"4.791667\"\n-       x=\"24.0625\"\n-       y=\"18.770834\"\n-       ry=\"1.1979167\" \/>\n-    <rect\n-       style=\"fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:0.5;stroke-linecap:round;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1;paint-order:normal\"\n-       id=\"rect3-3\"\n-       width=\"4.7916636\"\n-       height=\"4.791667\"\n-       x=\"95.5\"\n-       y=\"18.770834\"\n-       ry=\"1.1979167\" \/>\n-    <text\n-       xml:space=\"preserve\"\n-       style=\"font-style:normal;font-weight:bold;font-size:2.82222px;line-height:1.25;font-family:sans-serif;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.264583\"\n-       x=\"26.020889\"\n-       y=\"21.951246\"\n-       id=\"text3\"><tspan\n-         id=\"tspan3\"\n-         style=\"font-size:2.82222px;stroke-width:0.264583\"\n-         x=\"26.020889\"\n-         y=\"21.951246\">(<\/tspan><\/text>\n-    <text\n-       xml:space=\"preserve\"\n-       style=\"font-style:normal;font-weight:bold;font-size:2.82222px;line-height:1.25;font-family:sans-serif;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.264583\"\n-       x=\"97.458389\"\n-       y=\"21.951244\"\n-       id=\"text3-4\"><tspan\n-         id=\"tspan3-3\"\n-         style=\"font-size:2.82222px;stroke-width:0.264583\"\n-         x=\"97.458389\"\n-         y=\"21.951244\">)<\/tspan><\/text>\n-    <rect\n-       style=\"fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:0.5;stroke-linecap:round;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1;paint-order:normal\"\n-       id=\"rect3-0\"\n-       width=\"4.7916646\"\n-       height=\"4.791667\"\n-       x=\"59.78125\"\n-       y=\"18.770834\"\n-       ry=\"1.1979167\" \/>\n-    <text\n-       xml:space=\"preserve\"\n-       style=\"font-style:normal;font-weight:bold;font-size:2.82222px;line-height:1.25;font-family:sans-serif;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.264583\"\n-       x=\"61.739639\"\n-       y=\"21.951244\"\n-       id=\"text3-8\"><tspan\n-         id=\"tspan3-8\"\n-         style=\"font-size:2.82222px;stroke-width:0.264583\"\n-         x=\"61.739639\"\n-         y=\"21.951244\">:<\/tspan><\/text>\n-    <path\n-       style=\"fill:none;stroke:#000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1\"\n-       d=\"m 29.104166,21.166667 h 5.291667\"\n-       id=\"path4\" \/>\n-    <rect\n-       style=\"fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:0.5;stroke-linecap:round;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1;paint-order:normal\"\n-       id=\"rect4\"\n-       width=\"20.666666\"\n-       height=\"4.791667\"\n-       x=\"34.645832\"\n-       y=\"18.770834\" \/>\n-    <rect\n-       style=\"fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:0.5;stroke-linecap:round;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1;paint-order:normal\"\n-       id=\"rect4-9\"\n-       width=\"20.666664\"\n-       height=\"4.791666\"\n-       x=\"51.84375\"\n-       y=\"28.031252\" \/>\n-    <rect\n-       style=\"fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:0.5;stroke-linecap:round;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1;paint-order:normal\"\n-       id=\"rect4-3\"\n-       width=\"20.666666\"\n-       height=\"4.791667\"\n-       x=\"69.041664\"\n-       y=\"18.770834\" \/>\n-    <text\n-       xml:space=\"preserve\"\n-       style=\"font-style:normal;font-weight:bold;font-size:2.82222px;line-height:1.25;font-family:sans-serif;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.264583\"\n-       x=\"36.079296\"\n-       y=\"22.232056\"\n-       id=\"text3-1\"><tspan\n-         id=\"tspan3-6\"\n-         style=\"font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-size:2.82222px;font-family:sans-serif;-inkscape-font-specification:sans-serif;stroke-width:0.264583\"\n-         x=\"36.079296\"\n-         y=\"22.232056\">feature name<\/tspan><\/text>\n-    <text\n-       xml:space=\"preserve\"\n-       style=\"font-style:normal;font-weight:bold;font-size:2.82222px;line-height:1.25;font-family:sans-serif;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.264583\"\n-       x=\"53.277214\"\n-       y=\"31.492472\"\n-       id=\"text3-1-1\"><tspan\n-         id=\"tspan3-6-8\"\n-         style=\"font-size:2.82222px;stroke-width:0.264583\"\n-         x=\"53.277214\"\n-         y=\"31.492472\">feature name<\/tspan><\/text>\n-    <text\n-       xml:space=\"preserve\"\n-       style=\"font-style:normal;font-weight:bold;font-size:2.82222px;line-height:1.25;font-family:sans-serif;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.264583\"\n-       x=\"70.475128\"\n-       y=\"22.232056\"\n-       id=\"text3-1-0\"><tspan\n-         id=\"tspan3-6-5\"\n-         style=\"font-size:2.82222px;stroke-width:0.264583\"\n-         x=\"70.475128\"\n-         y=\"22.232056\">feature value<\/tspan><\/text>\n-    <path\n-       style=\"fill:none;stroke:#000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1\"\n-       d=\"m 55.562497,21.166667 h 3.96875\"\n-       id=\"path5\" \/>\n-    <path\n-       style=\"fill:none;stroke:#000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1\"\n-       d=\"m 64.822913,21.166667 h 3.96875\"\n-       id=\"path6\" \/>\n-    <path\n-       style=\"fill:none;stroke:#000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1\"\n-       d=\"m 89.95833,21.166667 h 5.291666\"\n-       id=\"path7\" \/>\n-    <path\n-       style=\"fill:none;stroke:#000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1\"\n-       d=\"m 100.54166,21.166667 h 5.29167\"\n-       id=\"path8\" \/>\n-    <path\n-       style=\"fill:none;stroke:#000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1\"\n-       d=\"M 104.51041,18.520834 V 23.8125\"\n-       id=\"path9\" \/>\n-    <path\n-       style=\"fill:none;stroke:#000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1\"\n-       d=\"M 105.83333,18.520834 V 23.8125\"\n-       id=\"path10\" \/>\n-    <path\n-       style=\"fill:none;stroke:#000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1\"\n-       d=\"m 30.427083,21.166667 c 0,0 2.645833,0 2.645833,2.645833 v 3.96875 c 0,2.645834 2.645834,2.645833 2.645834,2.645833 -10e-7,1e-6 16.0075,0 16.0075,0\"\n-       id=\"path11\" \/>\n-    <path\n-       style=\"fill:none;stroke:#000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1\"\n-       d=\"m 93.92708,21.166668 c 0,0 -2.645833,0 -2.645833,2.645833 v 3.96875 c 0,2.645834 -2.645834,2.645833 -2.645834,2.645833 10e-7,1e-6 -16.0075,0 -16.0075,0\"\n-       id=\"path11-8\" \/>\n-  <\/g>\n+  <rect\n+     style=\"fill:none;fill-opacity:1;stroke:#000000;stroke-width:0;stroke-linecap:round;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1;paint-order:normal\"\n+     id=\"rect11\"\n+     width=\"92.604164\"\n+     height=\"19.84375\"\n+     x=\"0\"\n+     y=\"9.0734864e-07\" \/>\n+  <path\n+     style=\"fill:none;stroke:#000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1\"\n+     d=\"M 2.645833,2.645833 V 7.937499\"\n+     id=\"path1\" \/>\n+  <path\n+     style=\"fill:none;stroke:#000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1\"\n+     d=\"M 3.968749,2.645833 V 7.937499\"\n+     id=\"path2\" \/>\n+  <path\n+     style=\"fill:none;stroke:#000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1\"\n+     d=\"M 2.645833,5.291666 H 7.937499\"\n+     id=\"path3\" \/>\n+  <rect\n+     style=\"fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:0.5;stroke-linecap:round;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1;paint-order:normal\"\n+     id=\"rect3\"\n+     width=\"4.791666\"\n+     height=\"4.791667\"\n+     x=\"8.1875\"\n+     y=\"2.895833\"\n+     ry=\"1.1979167\" \/>\n+  <rect\n+     style=\"fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:0.5;stroke-linecap:round;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1;paint-order:normal\"\n+     id=\"rect3-3\"\n+     width=\"4.7916636\"\n+     height=\"4.791667\"\n+     x=\"79.625\"\n+     y=\"2.895833\"\n+     ry=\"1.1979167\" \/>\n+  <text\n+     xml:space=\"preserve\"\n+     style=\"font-style:normal;font-weight:bold;font-size:2.82222px;line-height:1.25;font-family:sans-serif;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.264583\"\n+     x=\"10.145889\"\n+     y=\"6.0762453\"\n+     id=\"text3\"><tspan\n+       id=\"tspan3\"\n+       style=\"font-size:2.82222px;stroke-width:0.264583\"\n+       x=\"10.145889\"\n+       y=\"6.0762453\">(<\/tspan><\/text>\n+  <text\n+     xml:space=\"preserve\"\n+     style=\"font-style:normal;font-weight:bold;font-size:2.82222px;line-height:1.25;font-family:sans-serif;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.264583\"\n+     x=\"81.583389\"\n+     y=\"6.0762434\"\n+     id=\"text3-4\"><tspan\n+       id=\"tspan3-3\"\n+       style=\"font-size:2.82222px;stroke-width:0.264583\"\n+       x=\"81.583389\"\n+       y=\"6.0762434\">)<\/tspan><\/text>\n+  <rect\n+     style=\"fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:0.5;stroke-linecap:round;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1;paint-order:normal\"\n+     id=\"rect3-0\"\n+     width=\"4.7916646\"\n+     height=\"4.791667\"\n+     x=\"43.90625\"\n+     y=\"2.895833\"\n+     ry=\"1.1979167\" \/>\n+  <text\n+     xml:space=\"preserve\"\n+     style=\"font-style:normal;font-weight:bold;font-size:2.82222px;line-height:1.25;font-family:sans-serif;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.264583\"\n+     x=\"45.864639\"\n+     y=\"6.0762434\"\n+     id=\"text3-8\"><tspan\n+       id=\"tspan3-8\"\n+       style=\"font-size:2.82222px;stroke-width:0.264583\"\n+       x=\"45.864639\"\n+       y=\"6.0762434\">:<\/tspan><\/text>\n+  <path\n+     style=\"fill:none;stroke:#000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1\"\n+     d=\"m 13.229166,5.291666 h 5.291667\"\n+     id=\"path4\" \/>\n+  <rect\n+     style=\"fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:0.5;stroke-linecap:round;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1;paint-order:normal\"\n+     id=\"rect4\"\n+     width=\"20.666666\"\n+     height=\"4.791667\"\n+     x=\"18.770832\"\n+     y=\"2.895833\" \/>\n+  <rect\n+     style=\"fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:0.5;stroke-linecap:round;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1;paint-order:normal\"\n+     id=\"rect4-9\"\n+     width=\"20.666664\"\n+     height=\"4.791666\"\n+     x=\"35.96875\"\n+     y=\"12.156251\" \/>\n+  <rect\n+     style=\"fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:0.5;stroke-linecap:round;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1;paint-order:normal\"\n+     id=\"rect4-9-5\"\n+     width=\"20.666664\"\n+     height=\"4.791666\"\n+     x=\"35.96875\"\n+     y=\"21.416666\" \/>\n+  <rect\n+     style=\"fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:0.5;stroke-linecap:round;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1;paint-order:normal\"\n+     id=\"rect4-3\"\n+     width=\"20.666666\"\n+     height=\"4.791667\"\n+     x=\"53.166664\"\n+     y=\"2.895833\" \/>\n+  <text\n+     xml:space=\"preserve\"\n+     style=\"font-style:normal;font-weight:bold;font-size:2.82222px;line-height:1.25;font-family:sans-serif;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.264583\"\n+     x=\"20.204296\"\n+     y=\"6.3570547\"\n+     id=\"text3-1\"><tspan\n+       id=\"tspan3-6\"\n+       style=\"font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-size:2.82222px;font-family:sans-serif;-inkscape-font-specification:sans-serif;stroke-width:0.264583\"\n+       x=\"20.204296\"\n+       y=\"6.3570547\">feature name<\/tspan><\/text>\n+  <text\n+     xml:space=\"preserve\"\n+     style=\"font-style:normal;font-weight:bold;font-size:2.82222px;line-height:1.25;font-family:sans-serif;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.264583\"\n+     x=\"37.402214\"\n+     y=\"15.617471\"\n+     id=\"text3-1-1\"><tspan\n+       id=\"tspan3-6-8\"\n+       style=\"font-size:2.82222px;stroke-width:0.264583\"\n+       x=\"37.402214\"\n+       y=\"15.617471\">feature name<\/tspan><\/text>\n+  <text\n+     xml:space=\"preserve\"\n+     style=\"font-style:normal;font-weight:bold;font-size:2.82222px;line-height:1.25;font-family:sans-serif;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.264583\"\n+     x=\"38.836418\"\n+     y=\"24.87789\"\n+     id=\"text3-1-1-6\"><tspan\n+       id=\"tspan3-6-8-3\"\n+       style=\"font-size:2.82222px;stroke-width:0.264583\"\n+       x=\"38.836418\"\n+       y=\"24.87789\">range form<\/tspan><\/text>\n+  <text\n+     xml:space=\"preserve\"\n+     style=\"font-style:normal;font-weight:bold;font-size:2.82222px;line-height:1.25;font-family:sans-serif;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.264583\"\n+     x=\"54.600128\"\n+     y=\"6.3570547\"\n+     id=\"text3-1-0\"><tspan\n+       id=\"tspan3-6-5\"\n+       style=\"font-size:2.82222px;stroke-width:0.264583\"\n+       x=\"54.600128\"\n+       y=\"6.3570547\">feature value<\/tspan><\/text>\n+  <path\n+     style=\"fill:none;stroke:#000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1\"\n+     d=\"m 39.687497,5.291666 h 3.96875\"\n+     id=\"path5\" \/>\n+  <path\n+     style=\"fill:none;stroke:#000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1\"\n+     d=\"m 48.947913,5.291666 h 3.96875\"\n+     id=\"path6\" \/>\n+  <path\n+     style=\"fill:none;stroke:#000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1\"\n+     d=\"m 74.08333,5.291666 h 5.291666\"\n+     id=\"path7\" \/>\n+  <path\n+     style=\"fill:none;stroke:#000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1\"\n+     d=\"m 84.66666,5.291666 h 5.29167\"\n+     id=\"path8\" \/>\n+  <path\n+     style=\"fill:none;stroke:#000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1\"\n+     d=\"M 88.63541,2.645833 V 7.937499\"\n+     id=\"path9\" \/>\n+  <path\n+     style=\"fill:none;stroke:#000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1\"\n+     d=\"M 89.95833,2.645833 V 7.937499\"\n+     id=\"path10\" \/>\n+  <path\n+     style=\"fill:none;stroke:#000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1\"\n+     d=\"m 14.552083,5.291666 c 0,0 2.645833,0 2.645833,2.645833 v 3.96875 c 0,2.645834 2.645834,2.645833 2.645834,2.645833 -1e-6,10e-7 16.0075,0 16.0075,0\"\n+     id=\"path11\" \/>\n+  <path\n+     style=\"fill:none;stroke:#000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1\"\n+     d=\"m 17.197916,11.906249 -1e-6,9.260417 c 0,2.645834 2.645835,2.645833 2.645835,2.645833 -1e-6,1e-6 16.007499,0 16.007499,0\"\n+     id=\"path11-3\" \/>\n+  <path\n+     style=\"fill:none;stroke:#000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1\"\n+     d=\"m 78.05208,5.291667 c 0,0 -2.645833,0 -2.645833,2.645833 v 3.96875 c 0,2.645834 -2.645834,2.645833 -2.645834,2.645833 10e-7,1e-6 -16.0075,0 -16.0075,0\"\n+     id=\"path11-8\" \/>\n+  <path\n+     style=\"fill:none;stroke:#000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1\"\n+     d=\"m 75.406248,11.906249 -0.1175,9.260417 c -0.03357,2.645621 -2.645834,2.645833 -2.645834,2.645833 10e-7,1e-6 -16.0075,0 -16.0075,0\"\n+     id=\"path11-8-0\" \/>\n","filename":"modules\/javafx.graphics\/src\/main\/docs\/javafx\/scene\/doc-files\/media-feature.svg","additions":188,"deletions":167,"binary":false,"changes":355,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2023, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2023, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,1 +28,1 @@\n-import com.sun.javafx.scene.ScenePreferences;\n+import com.sun.javafx.scene.SceneContext;\n@@ -46,1 +46,1 @@\n- * All properties in this class can be read from any thread in order to allow {@link ScenePreferences} to safely\n+ * All properties in this class can be read from any thread in order to allow {@link SceneContext} to safely\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/application\/preferences\/PreferenceProperties.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -0,0 +1,125 @@\n+\/*\n+ * Copyright (c) 2026, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package com.sun.javafx.css.media;\n+\n+import com.sun.javafx.css.media.expression.EqualExpression;\n+import com.sun.javafx.css.media.expression.GreaterExpression;\n+import com.sun.javafx.css.media.expression.GreaterOrEqualExpression;\n+import com.sun.javafx.css.media.expression.LessExpression;\n+import com.sun.javafx.css.media.expression.LessOrEqualExpression;\n+import com.sun.javafx.css.media.expression.RangeExpression;\n+import javafx.css.Size;\n+\n+enum ComparisonOp {\n+\n+    LESS(new RangeExpression.Supplier() {\n+        @Override\n+        public RangeExpression getSizeExpression(SizeQueryType featureType, Size sizeValue) {\n+            return LessExpression.ofSize(featureType, sizeValue);\n+        }\n+\n+        @Override\n+        public RangeExpression getNumberExpression(SizeQueryType featureType, double numberValue) {\n+            return LessExpression.ofNumber(featureType, numberValue);\n+        }\n+    }),\n+\n+    LESS_OR_EQUAL(new RangeExpression.Supplier() {\n+        @Override\n+        public RangeExpression getSizeExpression(SizeQueryType featureType, Size sizeValue) {\n+            return LessOrEqualExpression.ofSize(featureType, sizeValue);\n+        }\n+\n+        @Override\n+        public RangeExpression getNumberExpression(SizeQueryType featureType, double numberValue) {\n+            return LessOrEqualExpression.ofNumber(featureType, numberValue);\n+        }\n+    }),\n+\n+    GREATER(new RangeExpression.Supplier() {\n+        @Override\n+        public RangeExpression getSizeExpression(SizeQueryType featureType, Size sizeValue) {\n+            return GreaterExpression.ofSize(featureType, sizeValue);\n+        }\n+\n+        @Override\n+        public RangeExpression getNumberExpression(SizeQueryType featureType, double numberValue) {\n+            return GreaterExpression.ofNumber(featureType, numberValue);\n+        }\n+    }),\n+\n+    GREATER_OR_EQUAL(new RangeExpression.Supplier() {\n+        @Override\n+        public RangeExpression getSizeExpression(SizeQueryType featureType, Size sizeValue) {\n+            return GreaterOrEqualExpression.ofSize(featureType, sizeValue);\n+        }\n+\n+        @Override\n+        public RangeExpression getNumberExpression(SizeQueryType featureType, double numberValue) {\n+            return GreaterOrEqualExpression.ofNumber(featureType, numberValue);\n+        }\n+    }),\n+\n+    EQUAL(new RangeExpression.Supplier() {\n+        @Override\n+        public RangeExpression getSizeExpression(SizeQueryType featureType, Size sizeValue) {\n+            return EqualExpression.ofSize(featureType, sizeValue);\n+        }\n+\n+        @Override\n+        public RangeExpression getNumberExpression(SizeQueryType featureType, double numberValue) {\n+            return EqualExpression.ofNumber(featureType, numberValue);\n+        }\n+    });\n+\n+    ComparisonOp(RangeExpression.Supplier supplier) {\n+        this.supplier = supplier;\n+    }\n+\n+    private final RangeExpression.Supplier supplier;\n+\n+    public RangeExpression.Supplier getExpressionSupplier() {\n+        return supplier;\n+    }\n+\n+    public ComparisonOp flipped() {\n+        return switch (this) {\n+            case LESS -> GREATER;\n+            case LESS_OR_EQUAL -> GREATER_OR_EQUAL;\n+            case GREATER -> LESS;\n+            case GREATER_OR_EQUAL -> LESS_OR_EQUAL;\n+            case EQUAL -> EQUAL;\n+        };\n+    }\n+\n+    public boolean isSameDirection(ComparisonOp other) {\n+        return switch (this) {\n+            case LESS, LESS_OR_EQUAL -> other == LESS || other == LESS_OR_EQUAL;\n+            case GREATER, GREATER_OR_EQUAL -> other == GREATER || other == GREATER_OR_EQUAL;\n+            default -> false;\n+        };\n+    }\n+}\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/css\/media\/ComparisonOp.java","additions":125,"deletions":0,"binary":false,"changes":125,"status":"added"},{"patch":"@@ -0,0 +1,68 @@\n+\/*\n+ * Copyright (c) 2026, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package com.sun.javafx.css.media;\n+\n+public enum ContextAwareness {\n+\n+    \/**\n+     * Indicates no context awareness.\n+     *\/\n+    NONE(0),\n+\n+    \/**\n+     * Indicates that the media query probes the viewport size (width or height).\n+     *\/\n+    VIEWPORT_SIZE(1),\n+\n+    \/**\n+     * Indicates that the media query probes the full-screen state.\n+     *\/\n+    FULLSCREEN(2);\n+\n+    ContextAwareness(int value) {\n+        this.value = value;\n+    }\n+\n+    private final int value;\n+\n+    public int value() {\n+        return value;\n+    }\n+\n+    public boolean isSet(int flags) {\n+        return (flags & value) != 0;\n+    }\n+\n+    public static int combine(ContextAwareness... contextAwareness) {\n+        int result = 0;\n+\n+        for (ContextAwareness value : contextAwareness) {\n+            result |= value.value;\n+        }\n+\n+        return result;\n+    }\n+}\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/css\/media\/ContextAwareness.java","additions":68,"deletions":0,"binary":false,"changes":68,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2025, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,0 +28,1 @@\n+import com.sun.javafx.css.media.expression.ConjunctionExpression;\n@@ -29,0 +30,2 @@\n+import com.sun.javafx.css.media.expression.RangeExpression;\n+import com.sun.javafx.css.parser.Token;\n@@ -41,1 +44,1 @@\n-     * Returns a {@code MediaQuery} that evaluates the specified feature.\n+     * Returns a {@code MediaQuery} that evaluates the specified feature in a discrete context.\n@@ -48,11 +51,69 @@\n-    public static MediaQuery featureQueryExpression(String featureName, String featureValue) {\n-        featureName = featureName.toLowerCase(Locale.ROOT).intern();\n-\n-        if (featureValue != null) {\n-            featureValue = featureValue.toLowerCase(Locale.ROOT).intern();\n-        }\n-\n-        return switch (featureName) {\n-            case \"prefers-color-scheme\" -> new FunctionExpression<>(\n-                featureName,\n-                checkNotNullValue(featureName, featureValue),\n+    public static MediaQuery discreteQueryExpression(String featureName, Token featureValue) {\n+        String lowerCaseFeatureName = lowerCaseTextValue(featureName);\n+\n+        return switch (lowerCaseFeatureName) {\n+            \/\/ Discrete min-\/max-features are just features in a range context in disguise.\n+            case \"min-width\" -> rangeQueryExpression(\n+                SizeQueryType.WIDTH, featureValue,\n+                ComparisonOp.GREATER_OR_EQUAL.getExpressionSupplier());\n+\n+            case \"max-width\" -> rangeQueryExpression(\n+                SizeQueryType.WIDTH, featureValue,\n+                ComparisonOp.LESS_OR_EQUAL.getExpressionSupplier());\n+\n+            case \"min-height\" -> rangeQueryExpression(\n+                SizeQueryType.HEIGHT, featureValue,\n+                ComparisonOp.GREATER_OR_EQUAL.getExpressionSupplier());\n+\n+            case \"max-height\" -> rangeQueryExpression(\n+                SizeQueryType.HEIGHT, featureValue,\n+                ComparisonOp.LESS_OR_EQUAL.getExpressionSupplier());\n+\n+            case \"min-aspect-ratio\" -> rangeQueryExpression(\n+                SizeQueryType.ASPECT_RATIO, featureValue,\n+                ComparisonOp.GREATER_OR_EQUAL.getExpressionSupplier());\n+\n+            case \"max-aspect-ratio\" -> rangeQueryExpression(\n+                SizeQueryType.ASPECT_RATIO, featureValue,\n+                ComparisonOp.LESS_OR_EQUAL.getExpressionSupplier());\n+\n+            \/\/ We have to account for range-based features used in a discrete context (e.g. \"width: 500px\").\n+            \/\/ This is unusual because in most cases these features will be evaluated in a range context, which\n+            \/\/ is handled in rangeQueryExpression().\n+            case \"width\", \"height\", \"aspect-ratio\" -> rangeQueryExpression(\n+                SizeQueryType.of(lowerCaseFeatureName), featureValue,\n+                ComparisonOp.EQUAL.getExpressionSupplier());\n+\n+            \/\/ Portrait if height >= width, landscape otherwise.\n+            case \"orientation\" -> {\n+                boolean portrait = switch (checkNotNullValue(lowerCaseFeatureName, lowerCaseTextValue(featureValue))) {\n+                    case \"landscape\" -> false;\n+                    case \"portrait\" -> true;\n+                    default -> throw unknownValue(\"orientation\", featureValue.getText());\n+                };\n+\n+                yield FunctionExpression.of(\n+                    lowerCaseFeatureName, lowerCaseTextValue(featureValue),\n+                    context -> portrait\n+                        ? context.getWidth() <= context.getHeight()\n+                        : context.getWidth() > context.getHeight(),\n+                    true, ContextAwareness.VIEWPORT_SIZE);\n+            }\n+\n+            \/\/ We only support \"standalone\" and \"fullscreen\" display modes, not \"minimal-ui\" and \"browser\".\n+            case \"display-mode\" -> {\n+                boolean fullscreen = switch (checkNotNullValue(lowerCaseFeatureName, lowerCaseTextValue(featureValue))) {\n+                    case \"standalone\" -> false;\n+                    case \"fullscreen\" -> true;\n+                    default -> throw unknownValue(\"display-mode\", featureValue.getText());\n+                };\n+\n+                yield FunctionExpression.of(\n+                    lowerCaseFeatureName, lowerCaseTextValue(featureValue),\n+                    context -> context.isFullScreen() == fullscreen,\n+                    true, ContextAwareness.FULLSCREEN);\n+            }\n+\n+            case \"prefers-color-scheme\" -> FunctionExpression.of(\n+                lowerCaseFeatureName,\n+                checkNotNullValue(lowerCaseFeatureName, lowerCaseTextValue(featureValue)),\n@@ -60,1 +121,1 @@\n-                enumValue(ColorScheme::valueOf, featureName, featureValue));\n+                enumValue(ColorScheme::valueOf, lowerCaseFeatureName, featureValue.getText()));\n@@ -63,1 +124,1 @@\n-                featureName, featureValue, \"reduce\", MediaQueryContext::isReducedMotion);\n+                lowerCaseFeatureName, featureValue, \"reduce\", MediaQueryContext::isReducedMotion);\n@@ -66,1 +127,1 @@\n-                featureName, featureValue, \"reduce\", MediaQueryContext::isReducedTransparency);\n+                lowerCaseFeatureName, featureValue, \"reduce\", MediaQueryContext::isReducedTransparency);\n@@ -69,1 +130,1 @@\n-                featureName, featureValue, \"reduce\", MediaQueryContext::isReducedData);\n+                lowerCaseFeatureName, featureValue, \"reduce\", MediaQueryContext::isReducedData);\n@@ -72,1 +133,1 @@\n-                featureName, featureValue, \"persistent\", MediaQueryContext::isPersistentScrollBars);\n+                lowerCaseFeatureName, featureValue, \"persistent\", MediaQueryContext::isPersistentScrollBars);\n@@ -79,0 +140,47 @@\n+    \/**\n+     * Returns a {@code MediaQuery} that evaluates the specified feature in a range context.\n+     *\n+     * @param featureName the name of the media feature\n+     * @param featureValue the value of the media feature\n+     * @param comparison the comparison operator\n+     * @throws IllegalArgumentException if {@code featureName} or {@code featureValue} is invalid,\n+     *                                  or if {@code comparison} is {@code null}\n+     * @return the {@code MediaQuery}\n+     *\/\n+    public static MediaQuery rangeQueryExpression(String featureName,\n+                                                  Token featureValue,\n+                                                  ComparisonOp comparison) {\n+        return rangeQueryExpression(SizeQueryType.of(lowerCaseTextValue(featureName)),\n+                                    featureValue, comparison.getExpressionSupplier());\n+    }\n+\n+    \/**\n+     * Returns a {@code MediaQuery} that evaluates the specified feature as an interval in a range context.\n+     *\n+     * @param featureName the name of the media feature\n+     * @param featureValue1 the first value of the media feature\n+     * @param featureValue2 the second value of the media feature\n+     * @param comparison1 the first comparison operator\n+     * @param comparison2 the second comparison operator\n+     * @throws IllegalArgumentException if {@code featureName}, {@code featureValue1}, or {@code featureValue2} is invalid,\n+     *                                  or if {@code comparison1} or {@code comparison2} is {@code null}\n+     * @return the {@code MediaQuery}\n+     *\/\n+    public static MediaQuery rangeQueryExpression(String featureName,\n+                                                  Token featureValue1,\n+                                                  Token featureValue2,\n+                                                  ComparisonOp comparison1,\n+                                                  ComparisonOp comparison2) {\n+        return ConjunctionExpression.of(\n+            rangeQueryExpression(featureName, featureValue1, comparison1.flipped()),\n+            rangeQueryExpression(featureName, featureValue2, comparison2));\n+    }\n+\n+    private static MediaQuery rangeQueryExpression(SizeQueryType featureType,\n+                                                   Token featureValue,\n+                                                   RangeExpression.Supplier rangeExpressionSupplier) {\n+        return featureType.getQueryExpression(\n+            checkNotNullValue(featureType.getFeatureName(), featureValue),\n+            rangeExpressionSupplier);\n+    }\n+\n@@ -80,1 +188,1 @@\n-                                                          String featureValue,\n+                                                          Token featureValue,\n@@ -83,2 +191,4 @@\n-        if (\"no-preference\".equals(featureValue)) {\n-            return new FunctionExpression<>(featureName, featureValue, argument, false);\n+        String lowerCaseFeatureValue = lowerCaseTextValue(featureValue);\n+\n+        if (\"no-preference\".equals(lowerCaseFeatureValue)) {\n+            return FunctionExpression.of(featureName, lowerCaseFeatureValue, argument, false);\n@@ -87,2 +197,2 @@\n-        if (featureValue == null || trueValue.equals(featureValue)) {\n-            return new FunctionExpression<>(featureName, featureValue, argument, true);\n+        if (lowerCaseFeatureValue == null || trueValue.equals(lowerCaseFeatureValue)) {\n+            return FunctionExpression.of(featureName, lowerCaseFeatureValue, argument, true);\n@@ -91,2 +201,1 @@\n-        throw new IllegalArgumentException(\n-            String.format(\"Unknown value <%s> for media feature <%s>\", featureValue, featureName));\n+        throw unknownValue(featureName, featureValue.getText());\n@@ -95,1 +204,1 @@\n-    private static String checkNotNullValue(String featureName, String featureValue) {\n+    private static <T> T checkNotNullValue(String featureName, T featureValue) {\n@@ -108,2 +217,1 @@\n-            throw new IllegalArgumentException(\n-                String.format(\"Unknown value <%s> for media feature <%s>\", featureValue, featureName));\n+            throw unknownValue(featureName, featureValue);\n@@ -112,0 +220,13 @@\n+\n+    private static String lowerCaseTextValue(String text) {\n+        return text != null ? text.toLowerCase(Locale.ROOT) : null;\n+    }\n+\n+    private static String lowerCaseTextValue(Token token) {\n+        return token != null ? lowerCaseTextValue(token.getText()) : null;\n+    }\n+\n+    private static RuntimeException unknownValue(String featureName, String featureValue) {\n+        return new IllegalArgumentException(\n+            String.format(\"Unknown value <%s> for media feature <%s>\", featureValue, featureName));\n+    }\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/css\/media\/MediaFeatures.java","additions":149,"deletions":28,"binary":false,"changes":177,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2025, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,0 +33,1 @@\n+import com.sun.javafx.css.media.expression.RangeExpression;\n@@ -45,1 +46,10 @@\n-                NegationExpression {\n+                NegationExpression,\n+                RangeExpression {\n+\n+    \/**\n+     * Gets the context awareness flags of this media query, indicating which aspects of the\n+     * media query context are probed by the query.\n+     *\n+     * @return the context awareness flags\n+     *\/\n+    int getContextAwareness();\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/css\/media\/MediaQuery.java","additions":12,"deletions":2,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -0,0 +1,54 @@\n+\/*\n+ * Copyright (c) 2026, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package com.sun.javafx.css.media;\n+\n+import java.lang.ref.WeakReference;\n+import java.util.Map;\n+import java.util.WeakHashMap;\n+\n+\/**\n+ * A cache for {@link MediaQuery} instances that is used to deduplicate media queries. More specifically,\n+ * this cache ensures that only a single instance of any distinct media query exists at any point in time.\n+ * This cache holds weak references, ensuring that media queries that are no longer in use will be eligible\n+ * for garbage collection.\n+ *\/\n+public final class MediaQueryCache {\n+\n+    private MediaQueryCache() {}\n+\n+    private static final Map<MediaQuery, WeakReference<MediaQuery>> CACHE = new WeakHashMap<>();\n+\n+    @SuppressWarnings(\"unchecked\")\n+    public static synchronized <T extends MediaQuery> T getCachedMediaQuery(T query) {\n+        if (CACHE.get(query) instanceof WeakReference<MediaQuery> wref\n+                && wref.get() instanceof MediaQuery cachedQuery) {\n+            return (T)cachedQuery;\n+        }\n+\n+        CACHE.put(query, new WeakReference<>(query));\n+        return query;\n+    }\n+}\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/css\/media\/MediaQueryCache.java","additions":54,"deletions":0,"binary":false,"changes":54,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2025, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,1 +28,1 @@\n-import com.sun.javafx.scene.ScenePreferences;\n+import com.sun.javafx.scene.SceneContext;\n@@ -35,1 +35,1 @@\n-public sealed interface MediaQueryContext permits ScenePreferences {\n+public sealed interface MediaQueryContext permits SceneContext {\n@@ -71,0 +71,36 @@\n+\n+    \/**\n+     * Provides the value for the {@code display-mode} media feature.\n+     *\n+     * @return {@code true} if the application is in full-screen mode\n+     *\/\n+    boolean isFullScreen();\n+\n+    \/**\n+     * Provides the value for the {@code width} media feature.\n+     *\n+     * @return the width\n+     *\/\n+    double getWidth();\n+\n+    \/**\n+     * Provides the value for the {@code height} media feature.\n+     *\n+     * @return the height\n+     *\/\n+    double getHeight();\n+\n+    \/**\n+     * Notifies the media query context that a query has been evaluated and provides its current value.\n+     * <p>\n+     * The context can then re-evaluate the query at its own discretion and compare the evaluated value with\n+     * the stored value to determine if it is necessary to re-apply CSS. This is an optimization to minimize\n+     * CSS invalidation. For example, range-based queries like \"width\" and \"height\" can change very often when\n+     * the scene is resized (but the evaluated value doesn't change often in a query like \"width < 500\").\n+     * If not for this optimization, we would have to speculatively re-apply CSS on every resize just to catch\n+     * the case when a range-based query changes its value.\n+     *\n+     * @param query the query\n+     * @param currentValue the query value\n+     *\/\n+    void notifyQueryEvaluated(MediaQuery query, boolean currentValue);\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/css\/media\/MediaQueryContext.java","additions":39,"deletions":3,"binary":false,"changes":42,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2025, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -43,2 +43,0 @@\n- * <p>\n- * This parser implements the subset of the grammar that is required for JavaFX CSS.\n@@ -58,0 +56,12 @@\n+    private static final Predicate<Token> GREATER = token -> token.getType() == CssLexer.GREATER;\n+    private static final Predicate<Token> LESS = token -> token.getType() == CssLexer.LESS;\n+    private static final Predicate<Token> EQUALS = token -> token.getType() == CssLexer.EQUALS;\n+    private static final Predicate<Token> GREATER_LESS_EQUALS = token -> switch (token.getType()) {\n+        case CssLexer.GREATER, CssLexer.LESS, CssLexer.EQUALS -> true;\n+        default -> false;\n+    };\n+    private static final Predicate<Token> LENGTH = token -> switch (token.getType()) {\n+        case CssLexer.NUMBER, CssLexer.CM, CssLexer.EMS, CssLexer.EXS, CssLexer.IN, CssLexer.MM,\n+             CssLexer.PC, CssLexer.PT, CssLexer.PX -> true;\n+        default -> false;\n+    };\n@@ -106,1 +116,1 @@\n-                        expressions.add(new ConstantExpression(false));\n+                        expressions.add(ConstantExpression.of(false));\n@@ -135,1 +145,1 @@\n-            return mediaInParens != null ? new NegationExpression(mediaInParens) : null;\n+            return mediaInParens != null ? NegationExpression.of(mediaInParens) : null;\n@@ -208,1 +218,1 @@\n-     *     <media-in-parens> = ( <media-condition> ) | <media-feature>\n+     *     <media-in-parens> = ( <media-condition> ) | <discrete-media-feature> | <range-media-feature>\n@@ -215,1 +225,1 @@\n-        \/\/ <media-feature>\n+        \/\/ <discrete-media-feature>\n@@ -217,1 +227,6 @@\n-            return parseMediaFeature(tokens);\n+            return parseDiscreteMediaFeature(tokens);\n+        }\n+\n+        \/\/ <range-media-feature>\n+        if (tokens.matches(LPAREN, LENGTH) || tokens.matches(LPAREN, IDENT, GREATER_LESS_EQUALS)) {\n+            return parseRangeMediaFeature(tokens);\n@@ -237,1 +252,1 @@\n-     * Parses a {@code media-feature} production.\n+     * Parses a {@code discrete-media-feature} production.\n@@ -240,1 +255,1 @@\n-     *     <media-feature> = ( [ <mf-plain> | <mf-boolean> ] )\n+     *     <discrete-media-feature> = ( [ <mf-plain> | <mf-boolean> ] )\n@@ -248,1 +263,1 @@\n-    private MediaQuery parseMediaFeature(TokenStream tokens) {\n+    private MediaQuery parseDiscreteMediaFeature(TokenStream tokens) {\n@@ -273,3 +288,1 @@\n-            return MediaFeatures.featureQueryExpression(\n-                featureName.getText(),\n-                featureValue != null ? featureValue.getText() : null);\n+            return MediaFeatures.discreteQueryExpression(featureName.getText(), featureValue);\n@@ -282,0 +295,144 @@\n+    \/**\n+     * Parses a {@code range-media-feature} production.\n+     *\n+     * <pre>{@code\n+     *     <range-media-feature> = ( <mf-name> <mf-comparison> <mf-value>\n+     *                             | <mf-value> <mf-comparison> <mf-name>\n+     *                             | <mf-value> <mf-lt> <mf-name> <mf-lt> <mf-value>\n+     *                             | <mf-value> <mf-gt> <mf-name> <mf-gt> <mf-value> )\n+     *     <mf-name> = <ident>\n+     *     <mf-value> = <number> | <dimension>\n+     *     <mf-lt> = '<' '='?\n+     *     <mf-gt> = '>' '='?\n+     *     <mf-eq> = '='\n+     *     <mf-comparison> = <mf-lt> | <mf-gt> | <mf-eq>\n+     * }<\/pre>\n+     *\n+     * @param tokens the token stream\n+     * @return the expression\n+     *\/\n+    private MediaQuery parseRangeMediaFeature(TokenStream tokens) {\n+        class LocalMethods {\n+            \/**\n+             * Parses a {@code <mf-name> <mf-comparison> <mf-value>} production.\n+             *\/\n+            static MediaQuery parseNameFirst(TokenStream tokens, BiConsumer<Token, String> errorHandler) {\n+                Token featureName = tokens.consumeIf(IDENT);\n+                if (featureName == null) {\n+                    errorHandler.accept(tokens.consume(), \"Expected IDENT\");\n+                    return null;\n+                }\n+\n+                ComparisonOp operator = parseComparisonOp(tokens);\n+                if (operator == null) {\n+                    errorHandler.accept(tokens.consume(), \"Expected <comparison>\");\n+                    return null;\n+                }\n+\n+                Token featureValue = tokens.consumeIf(LENGTH);\n+                if (featureValue == null) {\n+                    errorHandler.accept(tokens.consume(), \"Expected <length>\");\n+                    return null;\n+                }\n+\n+                try {\n+                    return MediaFeatures.rangeQueryExpression(featureName.getText(), featureValue, operator);\n+                } catch (IllegalArgumentException ex) {\n+                    errorHandler.accept(tokens.consume(), ex.getMessage());\n+                    return null;\n+                }\n+            }\n+\n+            \/**\n+             * Parses any of the following productions:\n+             *\n+             * <pre>{@code\n+             *     1. <mf-value> <mf-comparison> <mf-name>\n+             *     2. <mf-value> <mf-lt> <mf-name> <mf-lt> <mf-value>\n+             *     3. <mf-value> <mf-gt> <mf-name> <mf-gt> <mf-value>\n+             * }<\/pre>\n+             *\/\n+            static MediaQuery parseValueFirst(TokenStream tokens, BiConsumer<Token, String> errorHandler) {\n+                Token featureValue1 = tokens.consumeIf(LENGTH);\n+                if (featureValue1 == null) {\n+                    errorHandler.accept(tokens.consume(), \"Expected <length>\");\n+                    return null;\n+                }\n+\n+                ComparisonOp operator1 = parseComparisonOp(tokens);\n+                if (operator1 == null) {\n+                    errorHandler.accept(tokens.consume(), \"Expected <comparison>\");\n+                    return null;\n+                }\n+\n+                Token featureName = tokens.consumeIf(IDENT);\n+                if (featureName == null) {\n+                    errorHandler.accept(tokens.consume(), \"Expected IDENT\");\n+                    return null;\n+                }\n+\n+                \/\/ An interval query of the form X >= Y >= Z restricts the operators to the same \"direction\"\n+                \/\/ and excludes the equality operator. For example, if the first operator is LESS, the second\n+                \/\/ operator can only be LESS or LESS_OR_EQUAL.\n+                ComparisonOp operator2 = operator1 == ComparisonOp.EQUAL ? null : parseComparisonOp(tokens);\n+                if (operator2 == null || !operator2.isSameDirection(operator1)) {\n+                    try {\n+                        return MediaFeatures.rangeQueryExpression(\n+                            featureName.getText(), featureValue1, operator1.flipped());\n+                    } catch (IllegalArgumentException ex) {\n+                        errorHandler.accept(tokens.consume(), ex.getMessage());\n+                        return null;\n+                    }\n+                }\n+\n+                Token featureValue2 = tokens.consumeIf(LENGTH);\n+                if (featureValue2 == null) {\n+                    errorHandler.accept(tokens.consume(), \"Expected <length>\");\n+                    return null;\n+                }\n+\n+                try {\n+                    return MediaFeatures.rangeQueryExpression(\n+                        featureName.getText(),\n+                        featureValue1, featureValue2,\n+                        operator1, operator2);\n+                } catch (IllegalArgumentException ex) {\n+                    errorHandler.accept(tokens.consume(), ex.getMessage());\n+                    return null;\n+                }\n+            }\n+\n+            static ComparisonOp parseComparisonOp(TokenStream tokens) {\n+                if (tokens.consumeIf(GREATER) != null) {\n+                    return tokens.consumeIf(EQUALS) != null\n+                        ? ComparisonOp.GREATER_OR_EQUAL\n+                        : ComparisonOp.GREATER;\n+                } else if (tokens.consumeIf(LESS) != null) {\n+                    return tokens.consumeIf(EQUALS) != null\n+                        ? ComparisonOp.LESS_OR_EQUAL\n+                        : ComparisonOp.LESS;\n+                } else if (tokens.consumeIf(EQUALS) != null) {\n+                    return ComparisonOp.EQUAL;\n+                } else {\n+                    return null;\n+                }\n+            }\n+        }\n+\n+        if (tokens.consumeIf(LPAREN) == null) {\n+            errorHandler.accept(tokens.consume(), \"Expected LPAREN\");\n+            return null;\n+        }\n+\n+        MediaQuery query = tokens.matches(LENGTH)\n+            ? LocalMethods.parseValueFirst(tokens, errorHandler)\n+            : LocalMethods.parseNameFirst(tokens, errorHandler);\n+\n+        if (query != null && tokens.consumeIf(RPAREN) == null) {\n+            errorHandler.accept(tokens.consume(), \"Expected RPAREN\");\n+            return null;\n+        }\n+\n+        return query;\n+    }\n+\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/css\/media\/MediaQueryParser.java","additions":171,"deletions":14,"binary":false,"changes":185,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2025, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -30,0 +30,1 @@\n+import com.sun.javafx.css.media.expression.EqualExpression;\n@@ -31,0 +32,4 @@\n+import com.sun.javafx.css.media.expression.GreaterExpression;\n+import com.sun.javafx.css.media.expression.GreaterOrEqualExpression;\n+import com.sun.javafx.css.media.expression.LessExpression;\n+import com.sun.javafx.css.media.expression.LessOrEqualExpression;\n@@ -33,0 +38,5 @@\n+import com.sun.javafx.css.media.expression.RangeExpression;\n+import com.sun.javafx.css.parser.CssLexer;\n+import com.sun.javafx.css.parser.Token;\n+import javafx.css.Size;\n+import javafx.css.SizeUnits;\n@@ -37,0 +47,1 @@\n+import java.util.function.BiFunction;\n@@ -50,1 +61,6 @@\n-        NEGATION(5);\n+        NEGATION(5),\n+        EQUAL(6),\n+        GREATER(7),\n+        GREATER_OR_EQUAL(8),\n+        LESS(9),\n+        LESS_OR_EQUAL(10);\n@@ -59,0 +75,5 @@\n+                case EqualExpression _ -> EQUAL;\n+                case GreaterExpression _ -> GREATER;\n+                case GreaterOrEqualExpression _ -> GREATER_OR_EQUAL;\n+                case LessExpression _ -> LESS;\n+                case LessOrEqualExpression _ -> LESS_OR_EQUAL;\n@@ -91,1 +112,1 @@\n-                os.writeInt(stringStore.addString(expr.featureName()));\n+                os.writeInt(stringStore.addString(expr.getFeatureName()));\n@@ -93,2 +114,2 @@\n-                if (expr.featureValue() != null) {\n-                    os.writeInt(stringStore.addString(expr.featureValue()));\n+                if (expr.getFeatureValue() != null) {\n+                    os.writeInt(stringStore.addString(expr.getFeatureValue()));\n@@ -101,1 +122,1 @@\n-                writeBinary(expr.expression(), os, stringStore);\n+                writeBinary(expr.getExpression(), os, stringStore);\n@@ -104,2 +125,2 @@\n-                writeBinary(expr.left(), os, stringStore);\n-                writeBinary(expr.right(), os, stringStore);\n+                writeBinary(expr.getLeft(), os, stringStore);\n+                writeBinary(expr.getRight(), os, stringStore);\n@@ -109,2 +130,12 @@\n-                writeBinary(expr.left(), os, stringStore);\n-                writeBinary(expr.right(), os, stringStore);\n+                writeBinary(expr.getLeft(), os, stringStore);\n+                writeBinary(expr.getRight(), os, stringStore);\n+            }\n+\n+            case RangeExpression expr -> {\n+                os.writeInt(stringStore.addString(expr.getFeatureName()));\n+                os.writeDouble(expr.getFeatureValue());\n+                if (expr.getUnit() != null) {\n+                    os.writeByte(expr.getUnit().ordinal());\n+                } else {\n+                    os.writeByte(-1);\n+                }\n@@ -121,1 +152,1 @@\n-                yield MediaFeatures.featureQueryExpression(featureName, featureValue);\n+                yield MediaFeatures.discreteQueryExpression(featureName, new Token(CssLexer.IDENT, featureValue));\n@@ -123,4 +154,9 @@\n-            case CONSTANT -> new ConstantExpression(is.readBoolean());\n-            case NEGATION -> new NegationExpression(readBinary(is, strings));\n-            case CONJUNCTION -> new ConjunctionExpression(readBinary(is, strings), readBinary(is, strings));\n-            case DISJUNCTION -> new DisjunctionExpression(readBinary(is, strings), readBinary(is, strings));\n+            case CONSTANT -> ConstantExpression.of(is.readBoolean());\n+            case NEGATION -> NegationExpression.of(readBinary(is, strings));\n+            case CONJUNCTION -> ConjunctionExpression.of(readBinary(is, strings), readBinary(is, strings));\n+            case DISJUNCTION -> DisjunctionExpression.of(readBinary(is, strings), readBinary(is, strings));\n+            case EQUAL -> readRangeExpression(is, strings, EqualExpression::ofSize, EqualExpression::ofNumber);\n+            case GREATER -> readRangeExpression(is, strings, GreaterExpression::ofSize, GreaterExpression::ofNumber);\n+            case GREATER_OR_EQUAL -> readRangeExpression(is, strings, GreaterOrEqualExpression::ofSize, GreaterOrEqualExpression::ofNumber);\n+            case LESS -> readRangeExpression(is, strings, LessExpression::ofSize, LessExpression::ofNumber);\n+            case LESS_OR_EQUAL -> readRangeExpression(is, strings, LessOrEqualExpression::ofSize, LessOrEqualExpression::ofNumber);\n@@ -129,0 +165,18 @@\n+\n+    private static MediaQuery readRangeExpression(DataInputStream is, String[] strings,\n+                                                  BiFunction<SizeQueryType, Size, MediaQuery> sizeFactory,\n+                                                  BiFunction<SizeQueryType, Double, MediaQuery> numberFactory) throws IOException {\n+        var sizeQueryType = SizeQueryType.of(strings[is.readInt()]);\n+        double value = is.readDouble();\n+        SizeUnits unit = readUnit(is);\n+        return unit != null\n+            ? sizeFactory.apply(sizeQueryType, new Size(value, unit))\n+            : numberFactory.apply(sizeQueryType, value);\n+    }\n+\n+    private static SizeUnits readUnit(DataInputStream is) throws IOException {\n+        byte unit = is.readByte();\n+        return unit < 0 ? null : SIZE_UNITS[unit];\n+    }\n+\n+    private static final SizeUnits[] SIZE_UNITS = SizeUnits.values();\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/css\/media\/MediaQuerySerializer.java","additions":69,"deletions":15,"binary":false,"changes":84,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2025, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -84,1 +84,5 @@\n-            if (queries.get(i).evaluate(context)) {\n+            MediaQuery query = queries.get(i);\n+            boolean value = query.evaluate(context);\n+            context.notifyQueryEvaluated(query, value);\n+\n+            if (value) {\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/css\/media\/MediaRule.java","additions":6,"deletions":2,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -0,0 +1,115 @@\n+\/*\n+ * Copyright (c) 2026, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package com.sun.javafx.css.media;\n+\n+import com.sun.javafx.css.media.expression.RangeExpression;\n+import com.sun.javafx.css.parser.CssLexer;\n+import com.sun.javafx.css.parser.CssParserHelper;\n+import com.sun.javafx.css.parser.Token;\n+import javafx.css.Size;\n+\n+public enum SizeQueryType {\n+\n+    WIDTH(\"width\", SizeQueryType::sizeExpression, MediaQueryContext::getWidth),\n+    HEIGHT(\"height\", SizeQueryType::sizeExpression, MediaQueryContext::getHeight),\n+    ASPECT_RATIO(\"aspect-ratio\", SizeQueryType::numberExpression, context -> context.getWidth() \/ context.getHeight());\n+\n+    SizeQueryType(String featureName, QuerySupplier supplier, QueryEvaluator evaluator) {\n+        this.featureName = featureName;\n+        this.evaluator = evaluator;\n+        this.supplier = supplier;\n+    }\n+\n+    public static SizeQueryType of(String name) {\n+        for (SizeQueryType value : VALUES) {\n+            if (value.featureName.equals(name)) {\n+                return value;\n+            }\n+        }\n+\n+        throw new IllegalArgumentException(String.format(\"Unknown media feature <%s>\", name));\n+    }\n+\n+    private static MediaQuery numberExpression(SizeQueryType queryType,\n+                                               Token featureValue,\n+                                               RangeExpression.Supplier rangeExpressionSupplier) {\n+        try {\n+            if (featureValue.getType() != CssLexer.NUMBER) {\n+                throw invalidValue(queryType.getFeatureName(), featureValue.getText());\n+            }\n+\n+            return rangeExpressionSupplier.getNumberExpression(queryType, Double.parseDouble(featureValue.getText()));\n+        } catch (NumberFormatException ignored) {\n+            throw invalidValue(queryType.getFeatureName(), featureValue.getText());\n+        }\n+    }\n+\n+    private static MediaQuery sizeExpression(SizeQueryType queryType,\n+                                             Token featureValue,\n+                                             RangeExpression.Supplier rangeExpressionSupplier) {\n+        try {\n+            Size size = CssParserHelper.parseSize(featureValue);\n+            if (size == null) {\n+                throw invalidValue(queryType.getFeatureName(), featureValue.getText());\n+            }\n+\n+            return rangeExpressionSupplier.getSizeExpression(queryType, size);\n+        } catch (NumberFormatException ignored) {\n+            throw invalidValue(queryType.getFeatureName(), featureValue.getText());\n+        }\n+    }\n+\n+    private final String featureName;\n+    private final QueryEvaluator evaluator;\n+    private final QuerySupplier supplier;\n+\n+    public String getFeatureName() {\n+        return featureName;\n+    }\n+\n+    public MediaQuery getQueryExpression(Token featureValue, RangeExpression.Supplier rangeExpressionSupplier) {\n+        return supplier.get(this, featureValue, rangeExpressionSupplier);\n+    }\n+\n+    public double evaluate(MediaQueryContext context) {\n+        return evaluator.get(context);\n+    }\n+\n+    private static RuntimeException invalidValue(String featureName, String featureValue) {\n+        return new IllegalArgumentException(\n+            String.format(\"Invalid value <%s> for media feature <%s>\", featureValue, featureName));\n+    }\n+\n+    private interface QuerySupplier {\n+        MediaQuery get(SizeQueryType queryType, Token featureValue, RangeExpression.Supplier supplier);\n+    }\n+\n+    private interface QueryEvaluator {\n+        double get(MediaQueryContext context);\n+    }\n+\n+    private static final SizeQueryType[] VALUES = values();\n+}\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/css\/media\/SizeQueryType.java","additions":115,"deletions":0,"binary":false,"changes":115,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2025, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,0 +29,1 @@\n+import com.sun.javafx.css.media.MediaQueryCache;\n@@ -36,1 +37,1 @@\n-public record ConjunctionExpression(MediaQuery left, MediaQuery right) implements MediaQuery {\n+public final class ConjunctionExpression implements MediaQuery {\n@@ -38,3 +39,15 @@\n-    public ConjunctionExpression {\n-        Objects.requireNonNull(left, \"left cannot be null\");\n-        Objects.requireNonNull(right, \"right cannot be null\");\n+    private final MediaQuery left;\n+    private final MediaQuery right;\n+    private final int contextAwareness;\n+\n+    private ConjunctionExpression(MediaQuery left, MediaQuery right) {\n+        this.left = Objects.requireNonNull(left, \"left cannot be null\");\n+        this.right = Objects.requireNonNull(right, \"right cannot be null\");\n+        this.contextAwareness = left.getContextAwareness() | right.getContextAwareness();\n+    }\n+\n+    \/**\n+     * Returns the conjunction of the specified expressions.\n+     *\/\n+    public static ConjunctionExpression of(MediaQuery left, MediaQuery right) {\n+        return MediaQueryCache.getCachedMediaQuery(new ConjunctionExpression(left, right));\n@@ -51,1 +64,1 @@\n-        var result = new ConjunctionExpression(expressions.get(0), expressions.get(1));\n+        var result = of(expressions.get(0), expressions.get(1));\n@@ -54,1 +67,1 @@\n-            result = new ConjunctionExpression(result, expressions.get(i));\n+            result = of(result, expressions.get(i));\n@@ -60,0 +73,25 @@\n+    public MediaQuery getLeft() {\n+        return left;\n+    }\n+\n+    public MediaQuery getRight() {\n+        return right;\n+    }\n+\n+    @Override\n+    public int getContextAwareness() {\n+        return contextAwareness;\n+    }\n+\n+    @Override\n+    public boolean equals(Object obj) {\n+        return obj instanceof ConjunctionExpression other\n+            && left.equals(other.left)\n+            && right.equals(other.right);\n+    }\n+\n+    @Override\n+    public int hashCode() {\n+        return Objects.hash(ConjunctionExpression.class, left, right);\n+    }\n+\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/css\/media\/expression\/ConjunctionExpression.java","additions":45,"deletions":7,"binary":false,"changes":52,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2025, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,0 +28,1 @@\n+import com.sun.javafx.css.media.ContextAwareness;\n@@ -29,0 +30,1 @@\n+import com.sun.javafx.css.media.MediaQueryCache;\n@@ -30,0 +32,1 @@\n+import java.util.Objects;\n@@ -34,1 +37,20 @@\n-public record ConstantExpression(boolean value) implements MediaQuery {\n+public final class ConstantExpression implements MediaQuery {\n+\n+    private final boolean value;\n+\n+    private ConstantExpression(boolean value) {\n+        this.value = value;\n+    }\n+\n+    public static ConstantExpression of(boolean value) {\n+        return MediaQueryCache.getCachedMediaQuery(new ConstantExpression(value));\n+    }\n+\n+    public boolean value() {\n+        return value;\n+    }\n+\n+    @Override\n+    public int getContextAwareness() {\n+        return ContextAwareness.NONE.value();\n+    }\n@@ -41,0 +63,10 @@\n+    @Override\n+    public boolean equals(Object obj) {\n+        return obj instanceof ConstantExpression other && value == other.value;\n+    }\n+\n+    @Override\n+    public int hashCode() {\n+        return Objects.hash(ConstantExpression.class, value);\n+    }\n+\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/css\/media\/expression\/ConstantExpression.java","additions":34,"deletions":2,"binary":false,"changes":36,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2025, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,0 +29,1 @@\n+import com.sun.javafx.css.media.MediaQueryCache;\n@@ -36,1 +37,1 @@\n-public record DisjunctionExpression(MediaQuery left, MediaQuery right) implements MediaQuery {\n+public final class DisjunctionExpression implements MediaQuery {\n@@ -38,3 +39,15 @@\n-    public DisjunctionExpression {\n-        Objects.requireNonNull(left, \"left cannot be null\");\n-        Objects.requireNonNull(right, \"right cannot be null\");\n+    private final MediaQuery left;\n+    private final MediaQuery right;\n+    private final int contextAwareness;\n+\n+    private DisjunctionExpression(MediaQuery left, MediaQuery right) {\n+        this.left = Objects.requireNonNull(left, \"left cannot be null\");\n+        this.right = Objects.requireNonNull(right, \"right cannot be null\");\n+        this.contextAwareness = left.getContextAwareness() | right.getContextAwareness();\n+    }\n+\n+    \/**\n+     * Returns the disjunction of the specified expressions.\n+     *\/\n+    public static DisjunctionExpression of(MediaQuery left, MediaQuery right) {\n+        return MediaQueryCache.getCachedMediaQuery(new DisjunctionExpression(left, right));\n@@ -51,1 +64,1 @@\n-        var result = new DisjunctionExpression(expressions.get(0), expressions.get(1));\n+        var result = of(expressions.get(0), expressions.get(1));\n@@ -54,1 +67,1 @@\n-            result = new DisjunctionExpression(result, expressions.get(i));\n+            result = of(result, expressions.get(i));\n@@ -60,0 +73,25 @@\n+    public MediaQuery getLeft() {\n+        return left;\n+    }\n+\n+    public MediaQuery getRight() {\n+        return right;\n+    }\n+\n+    @Override\n+    public int getContextAwareness() {\n+        return contextAwareness;\n+    }\n+\n+    @Override\n+    public boolean equals(Object obj) {\n+        return obj instanceof DisjunctionExpression other\n+            && left.equals(other.left)\n+            && right.equals(other.right);\n+    }\n+\n+    @Override\n+    public int hashCode() {\n+        return Objects.hash(DisjunctionExpression.class, left, right);\n+    }\n+\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/css\/media\/expression\/DisjunctionExpression.java","additions":45,"deletions":7,"binary":false,"changes":52,"status":"modified"},{"patch":"@@ -0,0 +1,63 @@\n+\/*\n+ * Copyright (c) 2026, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package com.sun.javafx.css.media.expression;\n+\n+import com.sun.javafx.css.media.MediaQueryCache;\n+import com.sun.javafx.css.media.SizeQueryType;\n+import com.sun.javafx.css.media.MediaQueryContext;\n+import javafx.css.Size;\n+\n+\/**\n+ * Evaluates whether a media feature is equal to a specified value.\n+ *\/\n+public final class EqualExpression extends RangeExpression {\n+\n+    private EqualExpression(SizeQueryType featureType, Size sizeValue) {\n+        super(featureType, sizeValue);\n+    }\n+\n+    private EqualExpression(SizeQueryType featureType, double numberValue) {\n+        super(featureType, numberValue);\n+    }\n+\n+    public static EqualExpression ofSize(SizeQueryType featureType, Size sizeValue) {\n+        return MediaQueryCache.getCachedMediaQuery(new EqualExpression(featureType, sizeValue));\n+    }\n+\n+    public static EqualExpression ofNumber(SizeQueryType featureType, double numberValue) {\n+        return MediaQueryCache.getCachedMediaQuery(new EqualExpression(featureType, numberValue));\n+    }\n+\n+    @Override\n+    public boolean evaluate(MediaQueryContext context) {\n+        return getFeatureType().evaluate(context) == getValue();\n+    }\n+\n+    @Override\n+    public String toString() {\n+        return \"(\" + getFeatureName() + \" = \" + getFormattedValue() + \")\";\n+    }\n+}\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/css\/media\/expression\/EqualExpression.java","additions":63,"deletions":0,"binary":false,"changes":63,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2025, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,0 +28,1 @@\n+import com.sun.javafx.css.media.ContextAwareness;\n@@ -29,0 +30,1 @@\n+import com.sun.javafx.css.media.MediaQueryCache;\n@@ -35,5 +37,0 @@\n- *\n- * @param featureName the feature name\n- * @param featureValue the feature value, or {@code null} to indicate a boolean context\n- * @param function the evaluation function\n- * @param value the expected return value of the function\n@@ -41,4 +38,37 @@\n-public record FunctionExpression<T>(String featureName,\n-                                    String featureValue,\n-                                    Function<MediaQueryContext, T> function,\n-                                    T value) implements MediaQuery {\n+public final class FunctionExpression<T> implements MediaQuery {\n+\n+    private final String featureName;\n+    private final String featureValue;\n+    private final Function<MediaQueryContext, T> function;\n+    private final int contextAwareness;\n+    private final T value;\n+\n+    private FunctionExpression(String featureName,\n+                               String featureValue,\n+                               Function<MediaQueryContext, T> function,\n+                               T value,\n+                               ContextAwareness... contextAwareness) {\n+        this.featureName = Objects.requireNonNull(featureName, \"featureName cannot be null\");\n+        this.featureValue = featureValue;\n+        this.function = Objects.requireNonNull(function, \"function cannot be null\");\n+        this.contextAwareness = ContextAwareness.combine(contextAwareness);\n+        this.value = value;\n+    }\n+\n+    \/**\n+     * Returns an interned {@code FunctionExpression}.\n+     *\n+     * @param featureName the feature name\n+     * @param featureValue the feature value, or {@code null} to indicate a boolean context\n+     * @param function the evaluation function\n+     * @param value the expected return value of the function\n+     * @param contextAwareness the context awareness of the function, see {@link MediaQuery#getContextAwareness()}\n+     *\/\n+    public static <T> FunctionExpression<T> of(String featureName,\n+                                               String featureValue,\n+                                               Function<MediaQueryContext, T> function,\n+                                               T value,\n+                                               ContextAwareness... contextAwareness) {\n+        return MediaQueryCache.getCachedMediaQuery(\n+            new FunctionExpression<>(featureName, featureValue, function, value, contextAwareness));\n+    }\n@@ -46,3 +76,11 @@\n-    public FunctionExpression {\n-        Objects.requireNonNull(featureName, \"featureName cannot be null\");\n-        Objects.requireNonNull(function, \"function cannot be null\");\n+    public String getFeatureName() {\n+        return featureName;\n+    }\n+\n+    public String getFeatureValue() {\n+        return featureValue;\n+    }\n+\n+    @Override\n+    public int getContextAwareness() {\n+        return contextAwareness;\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/css\/media\/expression\/FunctionExpression.java","additions":51,"deletions":13,"binary":false,"changes":64,"status":"modified"},{"patch":"@@ -0,0 +1,63 @@\n+\/*\n+ * Copyright (c) 2026, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package com.sun.javafx.css.media.expression;\n+\n+import com.sun.javafx.css.media.MediaQueryCache;\n+import com.sun.javafx.css.media.SizeQueryType;\n+import com.sun.javafx.css.media.MediaQueryContext;\n+import javafx.css.Size;\n+\n+\/**\n+ * Evaluates whether a media feature is greater than a specified value.\n+ *\/\n+public final class GreaterExpression extends RangeExpression {\n+\n+    private GreaterExpression(SizeQueryType featureType, Size sizeValue) {\n+        super(featureType, sizeValue);\n+    }\n+\n+    private GreaterExpression(SizeQueryType featureType, double numberValue) {\n+        super(featureType, numberValue);\n+    }\n+\n+    public static GreaterExpression ofSize(SizeQueryType featureType, Size sizeValue) {\n+        return MediaQueryCache.getCachedMediaQuery(new GreaterExpression(featureType, sizeValue));\n+    }\n+\n+    public static GreaterExpression ofNumber(SizeQueryType featureType, double numberValue) {\n+        return MediaQueryCache.getCachedMediaQuery(new GreaterExpression(featureType, numberValue));\n+    }\n+\n+    @Override\n+    public boolean evaluate(MediaQueryContext context) {\n+        return getFeatureType().evaluate(context) > getValue();\n+    }\n+\n+    @Override\n+    public String toString() {\n+        return \"(\" + getFeatureName() + \" > \" + getFormattedValue() + \")\";\n+    }\n+}\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/css\/media\/expression\/GreaterExpression.java","additions":63,"deletions":0,"binary":false,"changes":63,"status":"added"},{"patch":"@@ -0,0 +1,63 @@\n+\/*\n+ * Copyright (c) 2026, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package com.sun.javafx.css.media.expression;\n+\n+import com.sun.javafx.css.media.MediaQueryCache;\n+import com.sun.javafx.css.media.SizeQueryType;\n+import com.sun.javafx.css.media.MediaQueryContext;\n+import javafx.css.Size;\n+\n+\/**\n+ * Evaluates whether a media feature is greater than or equal to a specified value.\n+ *\/\n+public final class GreaterOrEqualExpression extends RangeExpression {\n+\n+    private GreaterOrEqualExpression(SizeQueryType featureType, Size sizeValue) {\n+        super(featureType, sizeValue);\n+    }\n+\n+    private GreaterOrEqualExpression(SizeQueryType featureType, double numberValue) {\n+        super(featureType, numberValue);\n+    }\n+\n+    public static GreaterOrEqualExpression ofSize(SizeQueryType featureType, Size sizeValue) {\n+        return MediaQueryCache.getCachedMediaQuery(new GreaterOrEqualExpression(featureType, sizeValue));\n+    }\n+\n+    public static GreaterOrEqualExpression ofNumber(SizeQueryType featureType, double numberValue) {\n+        return MediaQueryCache.getCachedMediaQuery(new GreaterOrEqualExpression(featureType, numberValue));\n+    }\n+\n+    @Override\n+    public boolean evaluate(MediaQueryContext context) {\n+        return getFeatureType().evaluate(context) >= getValue();\n+    }\n+\n+    @Override\n+    public String toString() {\n+        return \"(\" + getFeatureName() + \" >= \" + getFormattedValue() + \")\";\n+    }\n+}\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/css\/media\/expression\/GreaterOrEqualExpression.java","additions":63,"deletions":0,"binary":false,"changes":63,"status":"added"},{"patch":"@@ -0,0 +1,63 @@\n+\/*\n+ * Copyright (c) 2026, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package com.sun.javafx.css.media.expression;\n+\n+import com.sun.javafx.css.media.MediaQueryCache;\n+import com.sun.javafx.css.media.SizeQueryType;\n+import com.sun.javafx.css.media.MediaQueryContext;\n+import javafx.css.Size;\n+\n+\/**\n+ * Evaluates whether a media feature is less than a specified value.\n+ *\/\n+public final class LessExpression extends RangeExpression {\n+\n+    private LessExpression(SizeQueryType featureType, Size sizeValue) {\n+        super(featureType, sizeValue);\n+    }\n+\n+    private LessExpression(SizeQueryType featureType, double numberValue) {\n+        super(featureType, numberValue);\n+    }\n+\n+    public static LessExpression ofSize(SizeQueryType featureType, Size sizeValue) {\n+        return MediaQueryCache.getCachedMediaQuery(new LessExpression(featureType, sizeValue));\n+    }\n+\n+    public static LessExpression ofNumber(SizeQueryType featureType, double numberValue) {\n+        return MediaQueryCache.getCachedMediaQuery(new LessExpression(featureType, numberValue));\n+    }\n+\n+    @Override\n+    public boolean evaluate(MediaQueryContext context) {\n+        return getFeatureType().evaluate(context) < getValue();\n+    }\n+\n+    @Override\n+    public String toString() {\n+        return \"(\" + getFeatureName() + \" < \" + getFormattedValue() + \")\";\n+    }\n+}\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/css\/media\/expression\/LessExpression.java","additions":63,"deletions":0,"binary":false,"changes":63,"status":"added"},{"patch":"@@ -0,0 +1,63 @@\n+\/*\n+ * Copyright (c) 2026, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package com.sun.javafx.css.media.expression;\n+\n+import com.sun.javafx.css.media.MediaQueryCache;\n+import com.sun.javafx.css.media.SizeQueryType;\n+import com.sun.javafx.css.media.MediaQueryContext;\n+import javafx.css.Size;\n+\n+\/**\n+ * Evaluates whether a media feature is less than or equal to a specified value.\n+ *\/\n+public final class LessOrEqualExpression extends RangeExpression {\n+\n+    private LessOrEqualExpression(SizeQueryType featureType, Size sizeValue) {\n+        super(featureType, sizeValue);\n+    }\n+\n+    private LessOrEqualExpression(SizeQueryType featureType, double numberValue) {\n+        super(featureType, numberValue);\n+    }\n+\n+    public static LessOrEqualExpression ofSize(SizeQueryType featureType, Size sizeValue) {\n+        return MediaQueryCache.getCachedMediaQuery(new LessOrEqualExpression(featureType, sizeValue));\n+    }\n+\n+    public static LessOrEqualExpression ofNumber(SizeQueryType featureType, double numberValue) {\n+        return MediaQueryCache.getCachedMediaQuery(new LessOrEqualExpression(featureType, numberValue));\n+    }\n+\n+    @Override\n+    public boolean evaluate(MediaQueryContext context) {\n+        return getFeatureType().evaluate(context) <= getValue();\n+    }\n+\n+    @Override\n+    public String toString() {\n+        return \"(\" + getFeatureName() + \" <= \" + getFormattedValue() + \")\";\n+    }\n+}\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/css\/media\/expression\/LessOrEqualExpression.java","additions":63,"deletions":0,"binary":false,"changes":63,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2025, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,0 +29,1 @@\n+import com.sun.javafx.css.media.MediaQueryCache;\n@@ -35,1 +36,1 @@\n-public record NegationExpression(MediaQuery expression) implements MediaQuery {\n+public final class NegationExpression implements MediaQuery {\n@@ -37,2 +38,29 @@\n-    public NegationExpression {\n-        Objects.requireNonNull(expression, \"expression cannot be null\");\n+    private final MediaQuery expression;\n+    private final int contextAwareness;\n+\n+    private NegationExpression(MediaQuery expression) {\n+        this.expression = Objects.requireNonNull(expression, \"expression cannot be null\");\n+        this.contextAwareness = expression.getContextAwareness();\n+    }\n+\n+    public static NegationExpression of(MediaQuery expression) {\n+        return MediaQueryCache.getCachedMediaQuery(new NegationExpression(expression));\n+    }\n+\n+    public MediaQuery getExpression() {\n+        return expression;\n+    }\n+\n+    @Override\n+    public int getContextAwareness() {\n+        return contextAwareness;\n+    }\n+\n+    @Override\n+    public boolean equals(Object obj) {\n+        return obj instanceof NegationExpression other && expression.equals(other.expression) ;\n+    }\n+\n+    @Override\n+    public int hashCode() {\n+        return Objects.hash(NegationExpression.class, expression);\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/css\/media\/expression\/NegationExpression.java","additions":32,"deletions":4,"binary":false,"changes":36,"status":"modified"},{"patch":"@@ -0,0 +1,121 @@\n+\/*\n+ * Copyright (c) 2026, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package com.sun.javafx.css.media.expression;\n+\n+import com.sun.javafx.css.media.ContextAwareness;\n+import com.sun.javafx.css.media.MediaQuery;\n+import com.sun.javafx.css.media.SizeQueryType;\n+import javafx.css.Size;\n+import javafx.css.SizeUnits;\n+import java.util.Objects;\n+\n+\/**\n+ * Base class for expressions that are evaluated in a range context.\n+ *\/\n+public sealed abstract class RangeExpression implements MediaQuery\n+        permits EqualExpression,\n+                GreaterExpression,\n+                GreaterOrEqualExpression,\n+                LessExpression,\n+                LessOrEqualExpression {\n+\n+    private final SizeQueryType featureType;\n+    private final Size sizeValue;\n+    private final double numberValue;\n+\n+    RangeExpression(SizeQueryType featureType, Size sizeValue) {\n+        this.featureType = Objects.requireNonNull(featureType, \"featureType cannot be null\");\n+        this.sizeValue = Objects.requireNonNull(sizeValue, \"sizeValue cannot be null\");\n+        this.numberValue = sizeValue.pixels();\n+    }\n+\n+    RangeExpression(SizeQueryType featureType, double numberValue) {\n+        this.featureType = Objects.requireNonNull(featureType, \"featureType cannot be null\");\n+        this.numberValue = numberValue;\n+        this.sizeValue = null;\n+    }\n+\n+    public final SizeQueryType getFeatureType() {\n+        return featureType;\n+    }\n+\n+    public final String getFeatureName() {\n+        return featureType.getFeatureName();\n+    }\n+\n+    \/**\n+     * Gets the feature value as specified in the stylesheet; for example, \"100em\" will return the value 100.\n+     *\/\n+    public final double getFeatureValue() {\n+        return sizeValue != null ? sizeValue.getValue() : numberValue;\n+    }\n+\n+    \/**\n+     * Gets the converted feature value; for example, \"100em\" will not return the value 100, but the\n+     * result of calling {@code SizeUnits.EM.pixels(100, 1, null)}.\n+     *\/\n+    public final double getValue() {\n+        return numberValue;\n+    }\n+\n+    \/**\n+     * Gets the unit as specified in the stylesheet, or {@code null} if no unit was specified.\n+     *\/\n+    public final SizeUnits getUnit() {\n+        return sizeValue != null ? sizeValue.getUnits() : null;\n+    }\n+\n+    @Override\n+    public final int getContextAwareness() {\n+        return ContextAwareness.VIEWPORT_SIZE.value();\n+    }\n+\n+    @Override\n+    public final boolean equals(Object obj) {\n+        if (obj == null || getClass() != obj.getClass()) {\n+            return false;\n+        }\n+\n+        RangeExpression other = (RangeExpression)obj;\n+        return other.featureType == featureType\n+            && other.numberValue == numberValue\n+            && Objects.equals(other.sizeValue, sizeValue);\n+    }\n+\n+    @Override\n+    public final int hashCode() {\n+        return Objects.hash(getClass(), featureType, sizeValue, numberValue);\n+    }\n+\n+    final String getFormattedValue() {\n+        return sizeValue != null ? sizeValue.toString() : Double.toString(numberValue);\n+    }\n+\n+    public interface Supplier {\n+        RangeExpression getSizeExpression(SizeQueryType featureType, Size sizeValue);\n+        RangeExpression getNumberExpression(SizeQueryType featureType, double numberValue);\n+    }\n+}\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/css\/media\/expression\/RangeExpression.java","additions":121,"deletions":0,"binary":false,"changes":121,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2010, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -72,0 +72,2 @@\n+    public static final int LESS = 48;\n+    public static final int EQUALS = 49;\n@@ -873,1 +875,0 @@\n-\n@@ -878,0 +879,10 @@\n+                    case '<':\n+                        token = new Token(LESS,\"<\", line, offset);\n+                        offset = pos;\n+                        break;\n+\n+                    case '=':\n+                        token = new Token(EQUALS,\"=\", line, offset);\n+                        offset = pos;\n+                        break;\n+\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/css\/parser\/CssLexer.java","additions":13,"deletions":2,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -0,0 +1,53 @@\n+\/*\n+ * Copyright (c) 2026, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package com.sun.javafx.css.parser;\n+\n+import com.sun.javafx.util.Utils;\n+import javafx.css.CssParser;\n+import javafx.css.Size;\n+\n+public final class CssParserHelper {\n+\n+    private static Accessor accessor;\n+\n+    static {\n+        Utils.forceInit(CssParser.class);\n+    }\n+\n+    private CssParserHelper() {}\n+\n+    public static void setAccessor(Accessor accessor) {\n+        CssParserHelper.accessor = accessor;\n+    }\n+\n+    public static Size parseSize(Token token) {\n+        return accessor.parseSize(token);\n+    }\n+\n+    public interface Accessor {\n+        Size parseSize(Token token);\n+    }\n+}\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/css\/parser\/CssParserHelper.java","additions":53,"deletions":0,"binary":false,"changes":53,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -294,0 +294,4 @@\n+    public static void scheduleReapplyCSS(Node node) {\n+        nodeAccessor.scheduleReapplyCSS(node);\n+    }\n+\n@@ -412,0 +416,1 @@\n+        void scheduleReapplyCSS(Node node);\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/scene\/NodeHelper.java","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -0,0 +1,266 @@\n+\/*\n+ * Copyright (c) 2025, 2026, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package com.sun.javafx.scene;\n+\n+import com.sun.javafx.application.PlatformImpl;\n+import com.sun.javafx.beans.property.NullCoalescingPropertyBase;\n+import com.sun.javafx.css.media.ContextAwareness;\n+import com.sun.javafx.css.media.MediaQuery;\n+import com.sun.javafx.css.media.MediaQueryContext;\n+import com.sun.javafx.css.media.MediaRule;\n+import java.util.IdentityHashMap;\n+import java.util.List;\n+import java.util.Map;\n+import javafx.application.ColorScheme;\n+import javafx.beans.property.ObjectProperty;\n+import javafx.beans.value.ObservableValue;\n+import javafx.scene.Node;\n+import javafx.scene.Scene;\n+import javafx.stage.Stage;\n+import javafx.stage.Window;\n+\n+public final class SceneContext implements Scene.Preferences, MediaQueryContext {\n+\n+    private final Scene scene;\n+\n+    \/**\n+     * All media queries are interned, such that only a single instance exists for each distinct\n+     * media query. This allows us to use an IdentityHashMap instead of a regular HashMap, saving\n+     * us deep equality comparisons on a hot path.\n+     *\/\n+    private final Map<MediaQuery, Boolean> viewportSizeAwareQueries = new IdentityHashMap<>();\n+    private final Map<MediaQuery, Boolean> fullScreenAwareQueries = new IdentityHashMap<>();\n+\n+    public SceneContext(Scene scene) {\n+        this.scene = scene;\n+\n+        scene.windowProperty()\n+            .flatMap(Window::showingProperty)\n+            .orElse(false)\n+            .subscribe(this::onShowingChanged);\n+\n+        scene.windowProperty()\n+            .map(w -> w instanceof Stage stage ? stage : null)\n+            .flatMap(Stage::fullScreenProperty)\n+            .subscribe(this::onFullScreenChanged);\n+    }\n+\n+    \/**\n+     * Called by {@link Node} when CSS is reapplied for the root node.\n+     *\/\n+    public void notifyReapplyCSS() {\n+        \/\/ Clear the registered context-aware queries, as they will be re-registered on the next CSS pass\n+        \/\/ if they are evaluated (i.e. at least one selector that depends on the media query matches).\n+        viewportSizeAwareQueries.clear();\n+        fullScreenAwareQueries.clear();\n+    }\n+\n+    \/**\n+     * Called by {@link Scene} when its size has changed.\n+     *\/\n+    public void notifySizeChanged() {\n+        \/\/ We evaluate all queries that we know could potentially change when the scene size has changed.\n+        boolean changed = viewportSizeAwareQueries.entrySet().stream()\n+            .anyMatch(entry -> entry.getKey().evaluate(this) != entry.getValue());\n+\n+        if (changed && scene.getRoot() instanceof Node root) {\n+            NodeHelper.scheduleReapplyCSS(root);\n+        }\n+    }\n+\n+    \/**\n+     * Called by {@link MediaRule} when a media query has been evaluated.\n+     *\/\n+    @Override\n+    public void notifyQueryEvaluated(MediaQuery query, boolean currentValue) {\n+        int contextAwareness = query.getContextAwareness();\n+\n+        if (ContextAwareness.VIEWPORT_SIZE.isSet(contextAwareness)) {\n+            viewportSizeAwareQueries.put(query, currentValue);\n+        }\n+\n+        if (ContextAwareness.FULLSCREEN.isSet(contextAwareness)) {\n+            fullScreenAwareQueries.put(query, currentValue);\n+        }\n+    }\n+\n+    @Override\n+    public double getWidth() {\n+        return scene.getWidth();\n+    }\n+\n+    @Override\n+    public double getHeight() {\n+        return scene.getHeight();\n+    }\n+\n+    @Override\n+    public boolean isFullScreen() {\n+        return scene.getWindow() instanceof Stage stage && stage.isFullScreen();\n+    }\n+\n+    private final MediaProperty<ColorScheme> colorScheme = new MediaProperty<>(\n+            \"colorScheme\", PlatformImpl.getPlatformPreferences().colorSchemeProperty());\n+\n+    @Override\n+    public ObjectProperty<ColorScheme> colorSchemeProperty() {\n+        return colorScheme;\n+    }\n+\n+    @Override\n+    public ColorScheme getColorScheme() {\n+        return colorScheme.get();\n+    }\n+\n+    @Override\n+    public void setColorScheme(ColorScheme colorScheme) {\n+        this.colorScheme.set(colorScheme);\n+    }\n+\n+    private final MediaProperty<Boolean> persistentScrollBars = new MediaProperty<>(\n+            \"persistentScrollBars\", PlatformImpl.getPlatformPreferences().persistentScrollBarsProperty());\n+\n+    @Override\n+    public ObjectProperty<Boolean> persistentScrollBarsProperty() {\n+        return persistentScrollBars;\n+    }\n+\n+    @Override\n+    public boolean isPersistentScrollBars() {\n+        return persistentScrollBars.get();\n+    }\n+\n+    @Override\n+    public void setPersistentScrollBars(Boolean value) {\n+        this.persistentScrollBars.set(value);\n+    }\n+\n+    private final MediaProperty<Boolean> reducedMotion = new MediaProperty<>(\n+            \"reducedMotion\", PlatformImpl.getPlatformPreferences().reducedMotionProperty());\n+\n+    @Override\n+    public ObjectProperty<Boolean> reducedMotionProperty() {\n+        return reducedMotion;\n+    }\n+\n+    @Override\n+    public boolean isReducedMotion() {\n+        return reducedMotion.get();\n+    }\n+\n+    @Override\n+    public void setReducedMotion(Boolean value) {\n+        this.reducedMotion.set(value);\n+    }\n+\n+    private final MediaProperty<Boolean> reducedTransparency = new MediaProperty<>(\n+            \"reducedTransparency\", PlatformImpl.getPlatformPreferences().reducedTransparencyProperty());\n+\n+    @Override\n+    public ObjectProperty<Boolean> reducedTransparencyProperty() {\n+        return reducedTransparency;\n+    }\n+\n+    @Override\n+    public boolean isReducedTransparency() {\n+        return reducedTransparency.get();\n+    }\n+\n+    @Override\n+    public void setReducedTransparency(Boolean value) {\n+        this.reducedTransparency.set(value);\n+    }\n+\n+    private final MediaProperty<Boolean> reducedData = new MediaProperty<>(\n+            \"reducedData\", PlatformImpl.getPlatformPreferences().reducedDataProperty());\n+\n+    @Override\n+    public ObjectProperty<Boolean> reducedDataProperty() {\n+        return reducedData;\n+    }\n+\n+    @Override\n+    public boolean isReducedData() {\n+        return reducedData.get();\n+    }\n+\n+    @Override\n+    public void setReducedData(Boolean value) {\n+        this.reducedData.set(value);\n+    }\n+\n+    private void onShowingChanged(Boolean showing) {\n+        for (var property : List.of(colorScheme, persistentScrollBars, reducedData,\n+                                    reducedMotion, reducedTransparency)) {\n+            if (showing) {\n+                property.connect();\n+            } else {\n+                property.disconnect();\n+            }\n+        }\n+    }\n+\n+    private void onFullScreenChanged(Boolean unused) {\n+        \/\/ We evaluate all queries that we know could potentially change when the full-screen state has changed.\n+        boolean changed = fullScreenAwareQueries.entrySet().stream()\n+            .anyMatch(entry -> entry.getKey().evaluate(this) != entry.getValue());\n+\n+        if (changed && scene.getRoot() instanceof Node root) {\n+            NodeHelper.scheduleReapplyCSS(root);\n+        }\n+    }\n+\n+    \/**\n+     * Property implementation for media features that causes CSS to be re-applied when the property\n+     * value is changed. This is required to re-evaluate media queries in stylesheets.\n+     *\/\n+    private class MediaProperty<T> extends NullCoalescingPropertyBase<T> {\n+        private final String name;\n+\n+        MediaProperty(String name, ObservableValue<T> defaultValue) {\n+            super(defaultValue);\n+            this.name = name;\n+        }\n+\n+        @Override\n+        public Object getBean() {\n+            return scene;\n+        }\n+\n+        @Override\n+        public String getName() {\n+            return name;\n+        }\n+\n+        @Override\n+        protected void onInvalidated() {\n+            Node root = scene.getRoot();\n+            if (root != null) {\n+                NodeHelper.scheduleReapplyCSS(root);\n+            }\n+        }\n+    }\n+}\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/scene\/SceneContext.java","additions":266,"deletions":0,"binary":false,"changes":266,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -113,0 +113,4 @@\n+    public static SceneContext getSceneContext(Scene scene) {\n+        return sceneAccessor.getSceneContext(scene);\n+    }\n+\n@@ -158,0 +162,2 @@\n+\n+        SceneContext getSceneContext(Scene scene);\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/scene\/SceneHelper.java","additions":7,"deletions":1,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -1,183 +0,0 @@\n-\/*\n- * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.  Oracle designates this\n- * particular file as subject to the \"Classpath\" exception as provided\n- * by Oracle in the LICENSE file that accompanied this code.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-\n-package com.sun.javafx.scene;\n-\n-import com.sun.javafx.application.PlatformImpl;\n-import com.sun.javafx.beans.property.NullCoalescingPropertyBase;\n-import com.sun.javafx.css.media.MediaQueryContext;\n-import java.util.List;\n-import javafx.application.ColorScheme;\n-import javafx.beans.property.ObjectProperty;\n-import javafx.beans.value.ObservableValue;\n-import javafx.scene.Node;\n-import javafx.scene.Scene;\n-import javafx.stage.Window;\n-\n-public final class ScenePreferences implements Scene.Preferences, MediaQueryContext {\n-\n-    private final Scene scene;\n-\n-    public ScenePreferences(Scene scene) {\n-        this.scene = scene;\n-\n-        scene.windowProperty()\n-            .flatMap(Window::showingProperty)\n-            .orElse(false)\n-            .subscribe(this::onShowingChanged);\n-    }\n-\n-    private final MediaProperty<ColorScheme> colorScheme = new MediaProperty<>(\n-            \"colorScheme\", PlatformImpl.getPlatformPreferences().colorSchemeProperty());\n-\n-    @Override\n-    public ObjectProperty<ColorScheme> colorSchemeProperty() {\n-        return colorScheme;\n-    }\n-\n-    @Override\n-    public ColorScheme getColorScheme() {\n-        return colorScheme.get();\n-    }\n-\n-    @Override\n-    public void setColorScheme(ColorScheme colorScheme) {\n-        this.colorScheme.set(colorScheme);\n-    }\n-\n-    private final MediaProperty<Boolean> persistentScrollBars = new MediaProperty<>(\n-            \"persistentScrollBars\", PlatformImpl.getPlatformPreferences().persistentScrollBarsProperty());\n-\n-    @Override\n-    public ObjectProperty<Boolean> persistentScrollBarsProperty() {\n-        return persistentScrollBars;\n-    }\n-\n-    @Override\n-    public boolean isPersistentScrollBars() {\n-        return persistentScrollBars.get();\n-    }\n-\n-    @Override\n-    public void setPersistentScrollBars(Boolean value) {\n-        this.persistentScrollBars.set(value);\n-    }\n-\n-    private final MediaProperty<Boolean> reducedMotion = new MediaProperty<>(\n-            \"reducedMotion\", PlatformImpl.getPlatformPreferences().reducedMotionProperty());\n-\n-    @Override\n-    public ObjectProperty<Boolean> reducedMotionProperty() {\n-        return reducedMotion;\n-    }\n-\n-    @Override\n-    public boolean isReducedMotion() {\n-        return reducedMotion.get();\n-    }\n-\n-    @Override\n-    public void setReducedMotion(Boolean value) {\n-        this.reducedMotion.set(value);\n-    }\n-\n-    private final MediaProperty<Boolean> reducedTransparency = new MediaProperty<>(\n-            \"reducedTransparency\", PlatformImpl.getPlatformPreferences().reducedTransparencyProperty());\n-\n-    @Override\n-    public ObjectProperty<Boolean> reducedTransparencyProperty() {\n-        return reducedTransparency;\n-    }\n-\n-    @Override\n-    public boolean isReducedTransparency() {\n-        return reducedTransparency.get();\n-    }\n-\n-    @Override\n-    public void setReducedTransparency(Boolean value) {\n-        this.reducedTransparency.set(value);\n-    }\n-\n-    private final MediaProperty<Boolean> reducedData = new MediaProperty<>(\n-            \"reducedData\", PlatformImpl.getPlatformPreferences().reducedDataProperty());\n-\n-    @Override\n-    public ObjectProperty<Boolean> reducedDataProperty() {\n-        return reducedData;\n-    }\n-\n-    @Override\n-    public boolean isReducedData() {\n-        return reducedData.get();\n-    }\n-\n-    @Override\n-    public void setReducedData(Boolean value) {\n-        this.reducedData.set(value);\n-    }\n-\n-    private void onShowingChanged(Boolean showing) {\n-        for (var property : List.of(colorScheme, persistentScrollBars, reducedData,\n-                                    reducedMotion, reducedTransparency)) {\n-            if (showing) {\n-                property.connect();\n-            } else {\n-                property.disconnect();\n-            }\n-        }\n-    }\n-\n-    \/**\n-     * Property implementation for media features that causes CSS to be re-applied when the property\n-     * value is changed. This is required to re-evaluate media queries in stylesheets.\n-     *\/\n-    private class MediaProperty<T> extends NullCoalescingPropertyBase<T> {\n-        private final String name;\n-\n-        MediaProperty(String name, ObservableValue<T> defaultValue) {\n-            super(defaultValue);\n-            this.name = name;\n-        }\n-\n-        @Override\n-        public Object getBean() {\n-            return scene;\n-        }\n-\n-        @Override\n-        public String getName() {\n-            return name;\n-        }\n-\n-        @Override\n-        protected void onInvalidated() {\n-            Node root = scene.getRoot();\n-            if (root != null) {\n-                NodeHelper.reapplyCSS(root);\n-            }\n-        }\n-    }\n-}\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/scene\/ScenePreferences.java","additions":0,"deletions":183,"binary":false,"changes":183,"status":"deleted"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -40,0 +40,1 @@\n+import com.sun.javafx.css.parser.CssParserHelper;\n@@ -126,0 +127,9 @@\n+    static {\n+        CssParserHelper.setAccessor(new CssParserHelper.Accessor() {\n+            @Override\n+            public Size parseSize(Token token) {\n+                return sizeImpl(token);\n+            }\n+        });\n+    }\n+\n@@ -578,0 +588,15 @@\n+        Size size = sizeImpl(token);\n+        if (size == null) {\n+            if (LOGGER.isLoggable(Level.FINEST)) {\n+                LOGGER.finest(\"Expected \\'<number>\\'\");\n+            }\n+\n+            ParseException re = new ParseException(\"Expected \\'<number>\\'\", token, this);\n+            reportError(createError(re.toString()));\n+            throw re;\n+        }\n+\n+        return size;\n+    }\n+\n+    private static Size sizeImpl(final Token token) {\n@@ -641,6 +666,1 @@\n-            if (LOGGER.isLoggable(Level.FINEST)) {\n-                LOGGER.finest(\"Expected \\'<number>\\'\");\n-            }\n-            ParseException re = new ParseException(\"Expected \\'<number>\\'\",token, this);\n-            reportError(createError(re.toString()));\n-            throw re;\n+            return null;\n","filename":"modules\/javafx.graphics\/src\/main\/java\/javafx\/css\/CssParser.java","additions":27,"deletions":7,"binary":false,"changes":34,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2010, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -67,1 +67,2 @@\n-     * Version 7: media queries\n+     * Version 7: user-preference media queries\n+     * Version 8: viewport characteristics media queries\n@@ -69,1 +70,1 @@\n-    final static int BINARY_CSS_VERSION = 7;\n+    final static int BINARY_CSS_VERSION = 8;\n","filename":"modules\/javafx.graphics\/src\/main\/java\/javafx\/css\/Stylesheet.java","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2010, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -624,0 +624,6 @@\n+            @Override\n+            public void scheduleReapplyCSS(Node node) {\n+                node.cssFlag = CssFlags.REAPPLY;\n+                Toolkit.getToolkit().requestNextPulse();\n+            }\n+\n@@ -9930,2 +9936,2 @@\n-\n-        if (getScene() == null) return;\n+        var scene = getScene();\n+        if (scene == null) return;\n@@ -9949,0 +9955,4 @@\n+        if (scene.getRoot() == this) {\n+            SceneHelper.getSceneContext(scene).notifyReapplyCSS();\n+        }\n+\n@@ -10168,0 +10178,4 @@\n+            if (getScene() instanceof Scene scene && scene.getRoot() == this) {\n+                SceneHelper.getSceneContext(scene).notifyReapplyCSS();\n+            }\n+\n@@ -10203,1 +10217,1 @@\n-        return scene != null ? scene.preferences : null;\n+        return scene != null ? SceneHelper.getSceneContext(scene) : null;\n","filename":"modules\/javafx.graphics\/src\/main\/java\/javafx\/scene\/Node.java","additions":18,"deletions":4,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2010, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -30,1 +30,1 @@\n-import com.sun.javafx.scene.ScenePreferences;\n+import com.sun.javafx.scene.SceneContext;\n@@ -37,1 +37,0 @@\n-import com.sun.javafx.css.media.MediaQueryContext;\n@@ -509,0 +508,5 @@\n+\n+                        @Override\n+                        public SceneContext getSceneContext(Scene scene) {\n+                            return scene.context;\n+                        }\n@@ -1823,0 +1827,1 @@\n+        context.notifySizeChanged();\n@@ -1863,0 +1868,1 @@\n+        context.notifySizeChanged();\n@@ -2768,2 +2774,14 @@\n-            if (w != Scene.this.getWidth()) Scene.this.setWidth(w);\n-            if (h != Scene.this.getHeight()) Scene.this.setHeight(h);\n+            boolean widthChanged = w != Scene.this.getWidth();\n+            boolean heightChanged = h != Scene.this.getHeight();\n+\n+            if (widthChanged) {\n+                Scene.this.setWidth(w);\n+            }\n+\n+            if (heightChanged) {\n+                Scene.this.setHeight(h);\n+            }\n+\n+            if (widthChanged || heightChanged) {\n+                Scene.this.context.notifySizeChanged();\n+            }\n@@ -5738,1 +5756,1 @@\n-    final ScenePreferences preferences = new ScenePreferences(this);\n+    private final SceneContext context = new SceneContext(this);\n@@ -5747,1 +5765,1 @@\n-        return preferences;\n+        return context;\n@@ -6019,1 +6037,1 @@\n-    public sealed interface Preferences permits ScenePreferences {\n+    public sealed interface Preferences permits SceneContext {\n","filename":"modules\/javafx.graphics\/src\/main\/java\/javafx\/scene\/Scene.java","additions":26,"deletions":8,"binary":false,"changes":34,"status":"modified"},{"patch":"@@ -0,0 +1,79 @@\n+\/*\n+ * Copyright (c) 2026, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package test.com.sun.javafx.css.media;\n+\n+import com.sun.javafx.css.media.MediaQuery;\n+import com.sun.javafx.css.media.SizeQueryType;\n+import com.sun.javafx.css.media.expression.ConjunctionExpression;\n+import com.sun.javafx.css.media.expression.ConstantExpression;\n+import com.sun.javafx.css.media.expression.DisjunctionExpression;\n+import com.sun.javafx.css.media.expression.EqualExpression;\n+import com.sun.javafx.css.media.expression.FunctionExpression;\n+import com.sun.javafx.css.media.expression.GreaterExpression;\n+import com.sun.javafx.css.media.expression.GreaterOrEqualExpression;\n+import com.sun.javafx.css.media.expression.LessExpression;\n+import com.sun.javafx.css.media.expression.LessOrEqualExpression;\n+import com.sun.javafx.css.media.expression.NegationExpression;\n+import java.util.function.Supplier;\n+import javafx.css.Size;\n+import javafx.css.SizeUnits;\n+import org.junit.jupiter.params.ParameterizedTest;\n+import org.junit.jupiter.params.provider.EnumSource;\n+\n+import static org.junit.jupiter.api.Assertions.*;\n+\n+public class MediaQueryCacheTest {\n+\n+    enum MediaQueryDeduplicationTest {\n+        CONJUNCTION(() -> ConjunctionExpression.of(ConstantExpression.of(true), ConstantExpression.of(false))),\n+        DISJUNCTION(() -> DisjunctionExpression.of(ConstantExpression.of(true), ConstantExpression.of(false))),\n+        CONSTANT(() -> ConstantExpression.of(true)),\n+        FUNCTION(() -> FunctionExpression.of(\"test\", \"value\", _ -> 0, 0)),\n+        NEGATION(() -> NegationExpression.of(ConstantExpression.of(true))),\n+        GREATER_SIZE(() -> GreaterExpression.ofSize(SizeQueryType.WIDTH, new Size(1, SizeUnits.PX))),\n+        GREATER_NUMBER(() -> GreaterExpression.ofNumber(SizeQueryType.WIDTH, 123)),\n+        GREATER_OR_EQUAL_SIZE(() -> GreaterOrEqualExpression.ofSize(SizeQueryType.WIDTH, new Size(1, SizeUnits.PX))),\n+        GREATER_OR_EQUAL_NUMBER(() -> GreaterOrEqualExpression.ofNumber(SizeQueryType.WIDTH, 123)),\n+        LESS_SIZE(() -> LessExpression.ofSize(SizeQueryType.WIDTH, new Size(1, SizeUnits.PX))),\n+        LESS_NUMBER(() -> LessExpression.ofNumber(SizeQueryType.WIDTH, 123)),\n+        LESS_OR_EQUAL_SIZE(() -> LessOrEqualExpression.ofSize(SizeQueryType.WIDTH, new Size(1, SizeUnits.PX))),\n+        LESS_OR_EQUAL_NUMBER(() -> LessOrEqualExpression.ofNumber(SizeQueryType.WIDTH, 123)),\n+        EQUAL_SIZE(() -> EqualExpression.ofSize(SizeQueryType.WIDTH, new Size(1, SizeUnits.PX))),\n+        EQUAL_NUMBER(() -> EqualExpression.ofNumber(SizeQueryType.WIDTH, 123));\n+\n+        MediaQueryDeduplicationTest(Supplier<MediaQuery> supplier) {\n+            this.supplier = supplier;\n+        }\n+\n+        final Supplier<MediaQuery> supplier;\n+    }\n+\n+    @ParameterizedTest\n+    @EnumSource(MediaQueryDeduplicationTest.class)\n+    void equalMediaQueriesAreDeduplicated(MediaQueryDeduplicationTest test) {\n+        assertSame(test.supplier.get(), test.supplier.get());\n+    }\n+}\n","filename":"modules\/javafx.graphics\/src\/test\/java\/test\/com\/sun\/javafx\/css\/media\/MediaQueryCacheTest.java","additions":79,"deletions":0,"binary":false,"changes":79,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2025, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,0 +29,1 @@\n+import com.sun.javafx.css.media.SizeQueryType;\n@@ -31,0 +32,1 @@\n+import com.sun.javafx.css.media.expression.EqualExpression;\n@@ -32,0 +34,4 @@\n+import com.sun.javafx.css.media.expression.GreaterExpression;\n+import com.sun.javafx.css.media.expression.GreaterOrEqualExpression;\n+import com.sun.javafx.css.media.expression.LessExpression;\n+import com.sun.javafx.css.media.expression.LessOrEqualExpression;\n@@ -35,0 +41,2 @@\n+import javafx.css.Size;\n+import javafx.css.SizeUnits;\n@@ -57,1 +65,1 @@\n-        var expected = new ConstantExpression(true);\n+        var expected = ConstantExpression.of(true);\n@@ -61,1 +69,1 @@\n-        expected = new ConstantExpression(false);\n+        expected = ConstantExpression.of(false);\n@@ -68,1 +76,1 @@\n-        var expected = new FunctionExpression<>(\"prefers-reduced-motion\", \"reduce\", _ -> null, true);\n+        var expected = FunctionExpression.of(\"prefers-reduced-motion\", \"reduce\", _ -> null, true);\n@@ -72,1 +80,1 @@\n-        expected = new FunctionExpression<>(\"prefers-reduced-motion\", null, _ -> null, true);\n+        expected = FunctionExpression.of(\"prefers-reduced-motion\", null, _ -> null, true);\n@@ -79,1 +87,1 @@\n-        var expected = new NegationExpression(new ConstantExpression(true));\n+        var expected = NegationExpression.of(ConstantExpression.of(true));\n@@ -86,1 +94,1 @@\n-        var expected = new ConjunctionExpression(new ConstantExpression(true), new ConstantExpression(false));\n+        var expected = ConjunctionExpression.of(ConstantExpression.of(true), ConstantExpression.of(false));\n@@ -93,1 +101,1 @@\n-        var expected = new DisjunctionExpression(new ConstantExpression(true), new ConstantExpression(false));\n+        var expected = DisjunctionExpression.of(ConstantExpression.of(true), ConstantExpression.of(false));\n@@ -98,0 +106,55 @@\n+    @Test\n+    void serializeGreaterOrEqualExpression() throws IOException {\n+        var expected = GreaterOrEqualExpression.ofSize(SizeQueryType.WIDTH, new Size(100, SizeUnits.PX));\n+        var actual = deserialize(serialize(expected));\n+        assertEquals(expected, actual);\n+\n+        expected = GreaterOrEqualExpression.ofNumber(SizeQueryType.WIDTH, 123);\n+        actual = deserialize(serialize(expected));\n+        assertEquals(expected, actual);\n+    }\n+\n+    @Test\n+    void serializeGreaterExpression() throws IOException {\n+        var expected = GreaterExpression.ofSize(SizeQueryType.WIDTH, new Size(100, SizeUnits.PX));\n+        var actual = deserialize(serialize(expected));\n+        assertEquals(expected, actual);\n+\n+        expected = GreaterExpression.ofNumber(SizeQueryType.WIDTH, 123);\n+        actual = deserialize(serialize(expected));\n+        assertEquals(expected, actual);\n+    }\n+\n+    @Test\n+    void serializeLessOrEqualExpression() throws IOException {\n+        var expected = LessOrEqualExpression.ofSize(SizeQueryType.WIDTH, new Size(100, SizeUnits.PX));\n+        var actual = deserialize(serialize(expected));\n+        assertEquals(expected, actual);\n+\n+        expected = LessOrEqualExpression.ofNumber(SizeQueryType.WIDTH, 123);\n+        actual = deserialize(serialize(expected));\n+        assertEquals(expected, actual);\n+    }\n+\n+    @Test\n+    void serializeLessExpression() throws IOException {\n+        var expected = LessExpression.ofSize(SizeQueryType.WIDTH, new Size(100, SizeUnits.PX));\n+        var actual = deserialize(serialize(expected));\n+        assertEquals(expected, actual);\n+\n+        expected = LessExpression.ofNumber(SizeQueryType.WIDTH, 123);\n+        actual = deserialize(serialize(expected));\n+        assertEquals(expected, actual);\n+    }\n+\n+    @Test\n+    void serializeEqualExpression() throws IOException {\n+        var expected = EqualExpression.ofSize(SizeQueryType.WIDTH, new Size(100, SizeUnits.PX));\n+        var actual = deserialize(serialize(expected));\n+        assertEquals(expected, actual);\n+\n+        expected = EqualExpression.ofNumber(SizeQueryType.WIDTH, 123);\n+        actual = deserialize(serialize(expected));\n+        assertEquals(expected, actual);\n+    }\n+\n@@ -100,4 +163,4 @@\n-        var expected = new ConjunctionExpression(\n-            new DisjunctionExpression(\n-                new FunctionExpression<>(\"prefers-reduced-motion\", \"reduce\", _ -> null, true),\n-                new FunctionExpression<>(\"prefers-reduced-transparency\", \"no-preference\", _ -> null, false)\n+        var expected = ConjunctionExpression.of(\n+            DisjunctionExpression.of(\n+                FunctionExpression.of(\"prefers-reduced-motion\", \"reduce\", _ -> null, true),\n+                FunctionExpression.of(\"prefers-reduced-transparency\", \"no-preference\", _ -> null, false)\n@@ -105,3 +168,3 @@\n-            new ConjunctionExpression(\n-                new NegationExpression(\n-                    new FunctionExpression<>(\"prefers-reduced-motion\", null, _ -> null, true)\n+            ConjunctionExpression.of(\n+                NegationExpression.of(\n+                    FunctionExpression.of(\"prefers-reduced-motion\", null, _ -> null, true)\n@@ -109,1 +172,1 @@\n-                new ConstantExpression(true)\n+                ConstantExpression.of(true)\n","filename":"modules\/javafx.graphics\/src\/test\/java\/test\/com\/sun\/javafx\/css\/media\/MediaQuerySerializerTest.java","additions":79,"deletions":16,"binary":false,"changes":95,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2025, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,0 +29,1 @@\n+import com.sun.javafx.css.media.SizeQueryType;\n@@ -32,0 +33,1 @@\n+import com.sun.javafx.css.media.expression.EqualExpression;\n@@ -33,0 +35,4 @@\n+import com.sun.javafx.css.media.expression.GreaterExpression;\n+import com.sun.javafx.css.media.expression.GreaterOrEqualExpression;\n+import com.sun.javafx.css.media.expression.LessExpression;\n+import com.sun.javafx.css.media.expression.LessOrEqualExpression;\n@@ -36,0 +42,2 @@\n+import javafx.css.Size;\n+import javafx.css.SizeUnits;\n@@ -37,1 +45,0 @@\n-import org.junit.jupiter.api.Test;\n@@ -40,0 +47,1 @@\n+import org.junit.jupiter.api.Test;\n@@ -56,1 +64,1 @@\n-            new FunctionExpression<>(\"prefers-color-scheme\", \"light\", _ -> null, ColorScheme.LIGHT),\n+            FunctionExpression.of(\"prefers-color-scheme\", \"light\", _ -> null, ColorScheme.LIGHT),\n@@ -71,1 +79,1 @@\n-            new NegationExpression(new FunctionExpression<>(\"prefers-color-scheme\", \"light\", _ -> null, ColorScheme.LIGHT)),\n+            NegationExpression.of(FunctionExpression.of(\"prefers-color-scheme\", \"light\", _ -> null, ColorScheme.LIGHT)),\n@@ -91,1 +99,1 @@\n-            new FunctionExpression<>(\"prefers-color-scheme\", \"light\", _ -> null, ColorScheme.LIGHT),\n+            FunctionExpression.of(\"prefers-color-scheme\", \"light\", _ -> null, ColorScheme.LIGHT),\n@@ -94,1 +102,1 @@\n-            new FunctionExpression<>(\"prefers-reduced-motion\", \"reduce\", _ -> null, true),\n+            FunctionExpression.of(\"prefers-reduced-motion\", \"reduce\", _ -> null, true),\n@@ -116,1 +124,1 @@\n-            new FunctionExpression<>(\"prefers-color-scheme\", \"light\", _ -> null, ColorScheme.LIGHT),\n+            FunctionExpression.of(\"prefers-color-scheme\", \"light\", _ -> null, ColorScheme.LIGHT),\n@@ -156,0 +164,1 @@\n+                   (prefers-color-scheme: LIGHT),\n@@ -157,1 +166,6 @@\n-                   (prefers-reduced-transparency: no-preference) {\n+                   (prefers-Reduced-MOTION),\n+                   (prefers-reduced-transparency: no-preference),\n+                   (prefers-reduced-transparency: NO-PREFERENCE),\n+                   (width >= 100px),\n+                   (HEIGHT < 1000Px),\n+                   (max-HEIGHT: 500PX) {\n@@ -165,3 +179,9 @@\n-                new FunctionExpression<>(\"prefers-color-scheme\", \"dark\", _ -> null, ColorScheme.DARK),\n-                new FunctionExpression<>(\"prefers-reduced-motion\", null, _ -> null, true),\n-                new FunctionExpression<>(\"prefers-reduced-transparency\", \"no-preference\", _ -> null, false)\n+                FunctionExpression.of(\"prefers-color-scheme\", \"dark\", _ -> null, ColorScheme.DARK),\n+                FunctionExpression.of(\"prefers-color-scheme\", \"light\", _ -> null, ColorScheme.LIGHT),\n+                FunctionExpression.of(\"prefers-reduced-motion\", null, _ -> null, true),\n+                FunctionExpression.of(\"prefers-reduced-motion\", null, _ -> null, true),\n+                FunctionExpression.of(\"prefers-reduced-transparency\", \"no-preference\", _ -> null, false),\n+                FunctionExpression.of(\"prefers-reduced-transparency\", \"no-preference\", _ -> null, false),\n+                GreaterOrEqualExpression.ofSize(SizeQueryType.WIDTH, new Size(100, SizeUnits.PX)),\n+                LessExpression.ofSize(SizeQueryType.HEIGHT, new Size(1000, SizeUnits.PX)),\n+                LessOrEqualExpression.ofSize(SizeQueryType.HEIGHT, new Size(500, SizeUnits.PX))\n@@ -183,3 +203,3 @@\n-            List.of(new ConjunctionExpression(\n-                new FunctionExpression<>(\"prefers-color-scheme\", \"light\", _ -> null, ColorScheme.LIGHT),\n-                new FunctionExpression<>(\"prefers-reduced-motion\", \"reduce\", _ -> null, true)\n+            List.of(ConjunctionExpression.of(\n+                FunctionExpression.of(\"prefers-color-scheme\", \"light\", _ -> null, ColorScheme.LIGHT),\n+                FunctionExpression.of(\"prefers-reduced-motion\", \"reduce\", _ -> null, true)\n@@ -203,5 +223,5 @@\n-            new ConjunctionExpression(\n-                new ConjunctionExpression(\n-                    new FunctionExpression<>(\"prefers-color-scheme\", \"light\", _ -> null, ColorScheme.LIGHT),\n-                    new FunctionExpression<>(\"prefers-reduced-motion\", \"reduce\", _ -> false, true)),\n-                new FunctionExpression<>(\"prefers-reduced-transparency\", \"no-preference\", _ -> false, false)\n+            ConjunctionExpression.of(\n+                ConjunctionExpression.of(\n+                    FunctionExpression.of(\"prefers-color-scheme\", \"light\", _ -> null, ColorScheme.LIGHT),\n+                    FunctionExpression.of(\"prefers-reduced-motion\", \"reduce\", _ -> false, true)),\n+                FunctionExpression.of(\"prefers-reduced-transparency\", \"no-preference\", _ -> false, false)\n@@ -224,3 +244,3 @@\n-            new DisjunctionExpression(\n-                new FunctionExpression<>(\"prefers-color-scheme\", \"light\", _ -> null, ColorScheme.LIGHT),\n-                new FunctionExpression<>(\"prefers-reduced-motion\", \"reduce\", _ -> null, true)\n+            DisjunctionExpression.of(\n+                FunctionExpression.of(\"prefers-color-scheme\", \"light\", _ -> null, ColorScheme.LIGHT),\n+                FunctionExpression.of(\"prefers-reduced-motion\", \"reduce\", _ -> null, true)\n@@ -244,5 +264,5 @@\n-            new DisjunctionExpression(\n-                new DisjunctionExpression(\n-                    new FunctionExpression<>(\"prefers-color-scheme\", \"light\", _ -> null, ColorScheme.LIGHT),\n-                    new FunctionExpression<>(\"prefers-reduced-motion\", \"reduce\", _ -> false, true)),\n-                new FunctionExpression<>(\"-fx-prefers-persistent-scrollbars\", \"persistent\", _ -> false, true)\n+            DisjunctionExpression.of(\n+                DisjunctionExpression.of(\n+                    FunctionExpression.of(\"prefers-color-scheme\", \"light\", _ -> null, ColorScheme.LIGHT),\n+                    FunctionExpression.of(\"prefers-reduced-motion\", \"reduce\", _ -> false, true)),\n+                FunctionExpression.of(\"-fx-prefers-persistent-scrollbars\", \"persistent\", _ -> false, true)\n@@ -266,1 +286,1 @@\n-        assertEquals(new ConstantExpression(false), mediaRule.getQueries().getFirst());\n+        assertEquals(ConstantExpression.of(false), mediaRule.getQueries().getFirst());\n@@ -280,1 +300,1 @@\n-            new FunctionExpression<>(\"prefers-reduced-motion\", null, _ -> null, true),\n+            FunctionExpression.of(\"prefers-reduced-motion\", null, _ -> null, true),\n@@ -295,1 +315,1 @@\n-            new FunctionExpression<>(\"prefers-reduced-transparency\", null, _ -> null, true),\n+            FunctionExpression.of(\"prefers-reduced-transparency\", null, _ -> null, true),\n@@ -310,1 +330,1 @@\n-            new FunctionExpression<>(\"-fx-prefers-persistent-scrollbars\", null, _ -> null, true),\n+            FunctionExpression.of(\"-fx-prefers-persistent-scrollbars\", null, _ -> null, true),\n@@ -336,1 +356,1 @@\n-        assertEquals(new ConstantExpression(false), mediaRule.getQueries().getFirst());\n+        assertEquals(ConstantExpression.of(false), mediaRule.getQueries().getFirst());\n@@ -345,0 +365,4 @@\n+\n+            @media (invalid-feature > 100px) {\n+                .foo { bar: baz; }\n+            }\n@@ -347,3 +371,7 @@\n-        var mediaRule = RuleHelper.getMediaRule(stylesheet.getRules().getFirst());\n-        assertEquals(1, mediaRule.getQueries().size());\n-        assertEquals(new ConstantExpression(false), mediaRule.getQueries().getFirst());\n+        var mediaRule1 = RuleHelper.getMediaRule(stylesheet.getRules().get(0));\n+        assertEquals(1, mediaRule1.getQueries().size());\n+        assertEquals(ConstantExpression.of(false), mediaRule1.getQueries().getFirst());\n+\n+        var mediaRule2 = RuleHelper.getMediaRule(stylesheet.getRules().get(1));\n+        assertEquals(1, mediaRule2.getQueries().size());\n+        assertEquals(ConstantExpression.of(false), mediaRule2.getQueries().getFirst());\n@@ -358,0 +386,4 @@\n+\n+            @media (width > invalid-value) {\n+                .foo { bar: baz; }\n+            }\n@@ -360,3 +392,7 @@\n-        var mediaRule = RuleHelper.getMediaRule(stylesheet.getRules().getFirst());\n-        assertEquals(1, mediaRule.getQueries().size());\n-        assertEquals(new ConstantExpression(false), mediaRule.getQueries().getFirst());\n+        var mediaRule1 = RuleHelper.getMediaRule(stylesheet.getRules().get(0));\n+        assertEquals(1, mediaRule1.getQueries().size());\n+        assertEquals(ConstantExpression.of(false), mediaRule1.getQueries().getFirst());\n+\n+        var mediaRule2 = RuleHelper.getMediaRule(stylesheet.getRules().get(1));\n+        assertEquals(1, mediaRule2.getQueries().size());\n+        assertEquals(ConstantExpression.of(false), mediaRule2.getQueries().getFirst());\n@@ -378,2 +414,2 @@\n-                new FunctionExpression<>(\"prefers-reduced-motion\", \"reduce\", _ -> null, true),\n-                new ConstantExpression(false) \/\/ the rest of the query is malformed and evaluates to false\n+                FunctionExpression.of(\"prefers-reduced-motion\", \"reduce\", _ -> null, true),\n+                ConstantExpression.of(false) \/\/ the rest of the query is malformed and evaluates to false\n@@ -394,1 +430,1 @@\n-        assertEquals(new ConstantExpression(false), mediaRule.getQueries().getFirst());\n+        assertEquals(ConstantExpression.of(false), mediaRule.getQueries().getFirst());\n@@ -408,2 +444,2 @@\n-                new ConstantExpression(false), \/\/ the malformed query evaluates to false\n-                new FunctionExpression<>(\"prefers-reduced-motion\", \"reduce\", _ -> null, true)\n+                ConstantExpression.of(false), \/\/ the malformed query evaluates to false\n+                FunctionExpression.of(\"prefers-reduced-motion\", \"reduce\", _ -> null, true)\n@@ -442,1 +478,1 @@\n-            List.of(new FunctionExpression<>(\"prefers-color-scheme\", \"dark\", _ -> null, ColorScheme.DARK)),\n+            List.of(FunctionExpression.of(\"prefers-color-scheme\", \"dark\", _ -> null, ColorScheme.DARK)),\n@@ -445,0 +481,232 @@\n+\n+    @Test\n+    void parseRangeForm_leadingValue() {\n+        Stylesheet stylesheet = new CssParser().parse(\"\"\"\n+            @media (100px >= width) {\n+                .foo { bar: baz; }\n+            }\n+\n+            @media (100em > width) {\n+                .foo { bar: baz; }\n+            }\n+\n+            @media (100cm <= width) {\n+                .foo { bar: baz; }\n+            }\n+\n+            @media (100 < width) {\n+                .foo { bar: baz; }\n+            }\n+\n+            @media (100 = width) {\n+                .foo { bar: baz; }\n+            }\n+\n+            @media (0.5 < aspect-ratio) {\n+                .foo { bar: baz; }\n+            }\n+\n+            @media (0.5em < aspect-ratio) {\n+                .foo { bar: baz; }\n+            }\n+            \"\"\");\n+\n+        assertEquals(7, stylesheet.getRules().size());\n+        assertEquals(\n+            List.of(LessOrEqualExpression.ofSize(SizeQueryType.WIDTH, new Size(100, SizeUnits.PX))),\n+            RuleHelper.getMediaRule(stylesheet.getRules().get(0)).getQueries());\n+        assertEquals(\n+            List.of(LessExpression.ofSize(SizeQueryType.WIDTH, new Size(100, SizeUnits.EM))),\n+            RuleHelper.getMediaRule(stylesheet.getRules().get(1)).getQueries());\n+        assertEquals(\n+            List.of(GreaterOrEqualExpression.ofSize(SizeQueryType.WIDTH, new Size(100, SizeUnits.CM))),\n+            RuleHelper.getMediaRule(stylesheet.getRules().get(2)).getQueries());\n+        assertEquals(\n+            List.of(GreaterExpression.ofSize(SizeQueryType.WIDTH, new Size(100, SizeUnits.PX))),\n+            RuleHelper.getMediaRule(stylesheet.getRules().get(3)).getQueries());\n+        assertEquals(\n+            List.of(EqualExpression.ofSize(SizeQueryType.WIDTH, new Size(100, SizeUnits.PX))),\n+            RuleHelper.getMediaRule(stylesheet.getRules().get(4)).getQueries());\n+        assertEquals(\n+            List.of(GreaterExpression.ofNumber(SizeQueryType.ASPECT_RATIO, 0.5)),\n+            RuleHelper.getMediaRule(stylesheet.getRules().get(5)).getQueries());\n+        assertEquals(\n+            List.of(ConstantExpression.of(false)), \/\/ error: aspect-ratio is a <number>, not a <size>\n+            RuleHelper.getMediaRule(stylesheet.getRules().get(6)).getQueries());\n+    }\n+\n+    @Test\n+    void parseRangeForm_trailingValue() {\n+        Stylesheet stylesheet = new CssParser().parse(\"\"\"\n+            @media (width >= 100px) {\n+                .foo { bar: baz; }\n+            }\n+\n+            @media (width > 100em) {\n+                .foo { bar: baz; }\n+            }\n+\n+            @media (width <= 100cm) {\n+                .foo { bar: baz; }\n+            }\n+\n+            @media (width < 100) {\n+                .foo { bar: baz; }\n+            }\n+\n+            @media (width = 100) {\n+                .foo { bar: baz; }\n+            }\n+\n+            @media (aspect-ratio > 0.5) {\n+                .foo { bar: baz; }\n+            }\n+\n+            @media (aspect-ratio > 0.5em) {\n+                .foo { bar: baz; }\n+            }\n+            \"\"\");\n+\n+        assertEquals(7, stylesheet.getRules().size());\n+        assertEquals(\n+            List.of(GreaterOrEqualExpression.ofSize(SizeQueryType.WIDTH, new Size(100, SizeUnits.PX))),\n+            RuleHelper.getMediaRule(stylesheet.getRules().get(0)).getQueries());\n+        assertEquals(\n+            List.of(GreaterExpression.ofSize(SizeQueryType.WIDTH, new Size(100, SizeUnits.EM))),\n+            RuleHelper.getMediaRule(stylesheet.getRules().get(1)).getQueries());\n+        assertEquals(\n+            List.of(LessOrEqualExpression.ofSize(SizeQueryType.WIDTH, new Size(100, SizeUnits.CM))),\n+            RuleHelper.getMediaRule(stylesheet.getRules().get(2)).getQueries());\n+        assertEquals(\n+            List.of(LessExpression.ofSize(SizeQueryType.WIDTH, new Size(100, SizeUnits.PX))),\n+            RuleHelper.getMediaRule(stylesheet.getRules().get(3)).getQueries());\n+        assertEquals(\n+            List.of(EqualExpression.ofSize(SizeQueryType.WIDTH, new Size(100, SizeUnits.PX))),\n+            RuleHelper.getMediaRule(stylesheet.getRules().get(4)).getQueries());\n+        assertEquals(\n+            List.of(GreaterExpression.ofNumber(SizeQueryType.ASPECT_RATIO, 0.5)),\n+            RuleHelper.getMediaRule(stylesheet.getRules().get(5)).getQueries());\n+        assertEquals(\n+            List.of(ConstantExpression.of(false)), \/\/ error: aspect-ratio is a <number>, not a <size>\n+            RuleHelper.getMediaRule(stylesheet.getRules().get(6)).getQueries());\n+    }\n+\n+    @Test\n+    void parseRangeForm_interval() {\n+        Stylesheet stylesheet = new CssParser().parse(\"\"\"\n+            @media (50px > width >= 100px) {\n+                .foo { bar: baz; }\n+            }\n+\n+            @media (50px >= width > 100px) {\n+                .foo { bar: baz; }\n+            }\n+\n+            @media (50px < width <= 100px) {\n+                .foo { bar: baz; }\n+            }\n+\n+            @media (50px <= width < 100px) {\n+                .foo { bar: baz; }\n+            }\n+            \"\"\");\n+\n+        assertEquals(4, stylesheet.getRules().size());\n+        assertEquals(\n+            List.of(ConjunctionExpression.of(\n+                LessExpression.ofSize(SizeQueryType.WIDTH, new Size(50, SizeUnits.PX)),\n+                GreaterOrEqualExpression.ofSize(SizeQueryType.WIDTH, new Size(100, SizeUnits.PX)))),\n+            RuleHelper.getMediaRule(stylesheet.getRules().get(0)).getQueries());\n+        assertEquals(\n+            List.of(ConjunctionExpression.of(\n+                LessOrEqualExpression.ofSize(SizeQueryType.WIDTH, new Size(50, SizeUnits.PX)),\n+                GreaterExpression.ofSize(SizeQueryType.WIDTH, new Size(100, SizeUnits.PX)))),\n+            RuleHelper.getMediaRule(stylesheet.getRules().get(1)).getQueries());\n+        assertEquals(\n+            List.of(ConjunctionExpression.of(\n+                GreaterExpression.ofSize(SizeQueryType.WIDTH, new Size(50, SizeUnits.PX)),\n+                LessOrEqualExpression.ofSize(SizeQueryType.WIDTH, new Size(100, SizeUnits.PX)))),\n+            RuleHelper.getMediaRule(stylesheet.getRules().get(2)).getQueries());\n+        assertEquals(\n+            List.of(ConjunctionExpression.of(\n+                GreaterOrEqualExpression.ofSize(SizeQueryType.WIDTH, new Size(50, SizeUnits.PX)),\n+                LessExpression.ofSize(SizeQueryType.WIDTH, new Size(100, SizeUnits.PX)))),\n+            RuleHelper.getMediaRule(stylesheet.getRules().get(3)).getQueries());\n+    }\n+\n+    @Test\n+    void parseRangeForm_invalidInterval() {\n+        Stylesheet stylesheet = new CssParser().parse(\"\"\"\n+            @media (50px > width = 100px) {\n+                .foo { bar: baz; }\n+            }\n+\n+            @media (50px > width < 100px) {\n+                .foo { bar: baz; }\n+            }\n+\n+            @media (50px < width > 100px) {\n+                .foo { bar: baz; }\n+            }\n+\n+            @media (50px = width < 100px) {\n+                .foo { bar: baz; }\n+            }\n+            \"\"\");\n+\n+        assertEquals(4, stylesheet.getRules().size());\n+        assertEquals(\n+            List.of(ConstantExpression.of(false)), \/\/ error: interval has trailing '=' operator\n+            RuleHelper.getMediaRule(stylesheet.getRules().get(0)).getQueries());\n+        assertEquals(\n+            List.of(ConstantExpression.of(false)), \/\/ error: operators have different directions\n+            RuleHelper.getMediaRule(stylesheet.getRules().get(1)).getQueries());\n+        assertEquals(\n+            List.of(ConstantExpression.of(false)), \/\/ error: operators have different directions\n+            RuleHelper.getMediaRule(stylesheet.getRules().get(2)).getQueries());\n+        assertEquals(\n+            List.of(ConstantExpression.of(false)), \/\/ error: interval has leading '=' operator\n+            RuleHelper.getMediaRule(stylesheet.getRules().get(3)).getQueries());\n+    }\n+\n+    @Test\n+    void parseRangeForm_prefix() {\n+        Stylesheet stylesheet = new CssParser().parse(\"\"\"\n+            @media (min-width: 100px) {\n+                .foo { bar: baz; }\n+            }\n+\n+            @media (max-width: 100px) {\n+                .foo { bar: baz; }\n+            }\n+            \"\"\");\n+\n+        assertEquals(2, stylesheet.getRules().size());\n+        assertEquals(\n+            List.of(GreaterOrEqualExpression.ofSize(SizeQueryType.WIDTH, new Size(100, SizeUnits.PX))),\n+            RuleHelper.getMediaRule(stylesheet.getRules().get(0)).getQueries());\n+        assertEquals(\n+            List.of(LessOrEqualExpression.ofSize(SizeQueryType.WIDTH, new Size(100, SizeUnits.PX))),\n+            RuleHelper.getMediaRule(stylesheet.getRules().get(1)).getQueries());\n+    }\n+\n+    @Test\n+    void parseRangeValue_asDiscrete() {\n+        Stylesheet stylesheet = new CssParser().parse(\"\"\"\n+            @media (width: 100px) {\n+                .foo { bar: baz; }\n+            }\n+\n+            @media (aspect-ratio: 0.5) {\n+                .foo { bar: baz; }\n+            }\n+            \"\"\");\n+\n+        assertEquals(2, stylesheet.getRules().size());\n+        assertEquals(\n+            List.of(EqualExpression.ofSize(SizeQueryType.WIDTH, new Size(100, SizeUnits.PX))),\n+            RuleHelper.getMediaRule(stylesheet.getRules().get(0)).getQueries());\n+        assertEquals(\n+            List.of(EqualExpression.ofNumber(SizeQueryType.ASPECT_RATIO, 0.5)),\n+            RuleHelper.getMediaRule(stylesheet.getRules().get(1)).getQueries());\n+    }\n","filename":"modules\/javafx.graphics\/src\/test\/java\/test\/javafx\/css\/CssParser_mediaQuery_Test.java","additions":312,"deletions":44,"binary":false,"changes":356,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -816,1 +816,1 @@\n-            new FunctionExpression<>(\"prefers-color-scheme\", \"dark\", _ -> null, ColorScheme.DARK),\n+            FunctionExpression.of(\"prefers-color-scheme\", \"dark\", _ -> null, ColorScheme.DARK),\n","filename":"modules\/javafx.graphics\/src\/test\/java\/test\/javafx\/css\/StylesheetTest.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2025, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,0 +28,1 @@\n+import com.sun.javafx.tk.Toolkit;\n@@ -59,0 +60,1 @@\n+        stage.show();\n@@ -106,1 +108,1 @@\n-        rect.applyCss();\n+        Toolkit.getToolkit().firePulse();\n@@ -110,1 +112,1 @@\n-        rect.applyCss();\n+        Toolkit.getToolkit().firePulse();\n","filename":"modules\/javafx.graphics\/src\/test\/java\/test\/javafx\/scene\/Scene_preferences_Test.java","additions":5,"deletions":3,"binary":false,"changes":8,"status":"modified"}]}