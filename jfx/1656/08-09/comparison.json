{"files":[{"patch":"@@ -185,1 +185,1 @@\n-            if (m_platformSupport.updatePreferences()) {\n+            if (m_platformSupport.updatePreferences(PlatformSupport::PT_SYSTEM_COLORS)) {\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/win\/GlassApplication.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -86,1 +86,1 @@\n-        return pInstance ? pInstance->m_platformSupport.collectPreferences() : NULL;\n+        return pInstance ? pInstance->m_platformSupport.collectPreferences(PlatformSupport::PT_ALL) : NULL;\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/win\/GlassApplication.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -101,1 +101,1 @@\n-                    updatePreferences(PreferenceType::UI_SETTINGS);\n+                    updatePreferences(PT_UI_SETTINGS);\n@@ -126,1 +126,1 @@\n-                    updatePreferences(PreferenceType::NETWORK_INFORMATION);\n+                    updatePreferences(PT_NETWORK_INFORMATION);\n@@ -151,1 +151,1 @@\n-    if (preferenceType & PreferenceType::SYSTEM_COLORS) {\n+    if (preferenceType & PT_SYSTEM_COLORS) {\n@@ -155,1 +155,1 @@\n-    if (preferenceType & PreferenceType::SYSTEM_PARAMS) {\n+    if (preferenceType & PT_SYSTEM_PARAMS) {\n@@ -159,1 +159,1 @@\n-    if (preferenceType & PreferenceType::UI_SETTINGS) {\n+    if (preferenceType & PT_UI_SETTINGS) {\n@@ -163,1 +163,1 @@\n-    if (preferenceType & PreferenceType::NETWORK_INFORMATION) {\n+    if (preferenceType & PT_NETWORK_INFORMATION) {\n@@ -206,1 +206,1 @@\n-            return updatePreferences(PreferenceType::SYSTEM_PARAMS);\n+            return updatePreferences(PT_SYSTEM_PARAMS);\n@@ -210,1 +210,1 @@\n-        return updatePreferences(PreferenceType::UI_SETTINGS);\n+        return updatePreferences(PT_UI_SETTINGS);\n@@ -220,9 +220,9 @@\n-    ::SystemParametersInfo(SPI_GETHIGHCONTRAST, sizeof(HIGHCONTRAST), &contrastInfo, 0);\n-\n-    \/\/ Property names need to be kept in sync with WinApplication.java:\n-    if (contrastInfo.dwFlags & HCF_HIGHCONTRASTON) {\n-        putBoolean(properties, \"Windows.SPI.HighContrast\", true);\n-        putString(properties, \"Windows.SPI.HighContrastColorScheme\", contrastInfo.lpszDefaultScheme);\n-    } else {\n-        putBoolean(properties, \"Windows.SPI.HighContrast\", false);\n-        putString(properties, \"Windows.SPI.HighContrastColorScheme\", (const char*)NULL);\n+    if (::SystemParametersInfo(SPI_GETHIGHCONTRAST, sizeof(HIGHCONTRAST), &contrastInfo, 0)) {\n+        \/\/ Property names need to be kept in sync with WinApplication.java:\n+        if (contrastInfo.dwFlags & HCF_HIGHCONTRASTON) {\n+            putBoolean(properties, \"Windows.SPI.HighContrast\", true);\n+            putString(properties, \"Windows.SPI.HighContrastColorScheme\", contrastInfo.lpszDefaultScheme);\n+        } else {\n+            putBoolean(properties, \"Windows.SPI.HighContrast\", false);\n+            putString(properties, \"Windows.SPI.HighContrastColorScheme\", (const char*)NULL);\n+        }\n@@ -232,2 +232,3 @@\n-    ::SystemParametersInfo(SPI_GETCLIENTAREAANIMATION, 0, &value, 0);\n-    putBoolean(properties, \"Windows.SPI.ClientAreaAnimation\", value);\n+    if (::SystemParametersInfo(SPI_GETCLIENTAREAANIMATION, 0, &value, 0)) {\n+        putBoolean(properties, \"Windows.SPI.ClientAreaAnimation\", value);\n+    }\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/win\/PlatformSupport.cpp","additions":20,"deletions":19,"binary":false,"changes":39,"status":"modified"},{"patch":"@@ -43,5 +43,5 @@\n-        SYSTEM_COLORS = 1,\n-        SYSTEM_PARAMS = 2,\n-        UI_SETTINGS = 4,\n-        NETWORK_INFORMATION = 8,\n-        ANY = SYSTEM_COLORS | SYSTEM_PARAMS | UI_SETTINGS | NETWORK_INFORMATION\n+        PT_SYSTEM_COLORS = 1,\n+        PT_SYSTEM_PARAMS = 2,\n+        PT_UI_SETTINGS = 4,\n+        PT_NETWORK_INFORMATION = 8,\n+        PT_ALL = PT_SYSTEM_COLORS | PT_SYSTEM_PARAMS | PT_UI_SETTINGS | PT_NETWORK_INFORMATION\n@@ -58,1 +58,1 @@\n-    jobject collectPreferences(PreferenceType = ANY) const;\n+    jobject collectPreferences(PreferenceType) const;\n@@ -64,1 +64,1 @@\n-    bool updatePreferences(PreferenceType = ANY) const;\n+    bool updatePreferences(PreferenceType) const;\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/win\/PlatformSupport.h","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"}]}