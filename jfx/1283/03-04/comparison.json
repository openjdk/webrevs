{"files":[{"patch":"@@ -50,1 +50,2 @@\n-import javafx.beans.WeakInvalidationListener;\n+import javafx.beans.property.BooleanProperty;\n+import javafx.beans.property.SimpleBooleanProperty;\n@@ -65,0 +66,1 @@\n+    private BooleanProperty active;\n@@ -93,0 +95,4 @@\n+        if (active != null) {\n+            active.set(false);\n+        }\n+        active = new SimpleBooleanProperty(true);\n@@ -216,3 +222,3 @@\n-        mb.textProperty().addListener(new WeakInvalidationListener(valueModel -> glassMenu.setTitle(parseText(mb))));\n-        mb.disableProperty().addListener(new WeakInvalidationListener(valueModel -> glassMenu.setEnabled(!mb.isDisable())));\n-        mb.mnemonicParsingProperty().addListener(new WeakInvalidationListener(valueModel -> glassMenu.setTitle(parseText(mb))));\n+        mb.textProperty().when(active).addListener(valueModel -> glassMenu.setTitle(parseText(mb)));\n+        mb.disableProperty().when(active).addListener(valueModel -> glassMenu.setEnabled(!mb.isDisable()));\n+        mb.mnemonicParsingProperty().when(active).addListener(valueModel -> glassMenu.setTitle(parseText(mb)));\n@@ -273,1 +279,1 @@\n-            menuitem.textProperty().addListener(new WeakInvalidationListener(valueModel -> glassSubMenuItem.setTitle(parseText(menuitem))));\n+            menuitem.textProperty().when(active).addListener(valueModel -> glassSubMenuItem.setTitle(parseText(menuitem)));\n@@ -276,1 +282,1 @@\n-            menuitem.graphicProperty().addListener(new WeakInvalidationListener(valueModel -> {\n+            menuitem.graphicProperty().when(active).addListener(valueModel -> {\n@@ -278,1 +284,1 @@\n-            }));\n+            });\n@@ -281,1 +287,1 @@\n-            menuitem.disableProperty().addListener(new WeakInvalidationListener(valueModel -> glassSubMenuItem.setEnabled(!menuitem.isDisable())));\n+            menuitem.disableProperty().when(active).addListener(valueModel -> glassSubMenuItem.setEnabled(!menuitem.isDisable()));\n@@ -284,1 +290,1 @@\n-            menuitem.acceleratorProperty().addListener(new WeakInvalidationListener(valueModel -> setShortcut(glassSubMenuItem, menuitem)));\n+            menuitem.acceleratorProperty().when(active).addListener(valueModel -> setShortcut(glassSubMenuItem, menuitem));\n@@ -286,1 +292,1 @@\n-            menuitem.mnemonicParsingProperty().addListener(new WeakInvalidationListener(valueModel -> glassSubMenuItem.setTitle(parseText(menuitem))));\n+            menuitem.mnemonicParsingProperty().when(active).addListener(valueModel -> glassSubMenuItem.setTitle(parseText(menuitem)));\n@@ -291,1 +297,1 @@\n-                checkItem.selectedProperty().addListener(new WeakInvalidationListener(valueModel -> glassSubMenuItem.setChecked(checkItem.isSelected())));\n+                checkItem.selectedProperty().when(active).addListener(valueModel -> glassSubMenuItem.setChecked(checkItem.isSelected()));\n@@ -295,1 +301,1 @@\n-                radioItem.selectedProperty().addListener(new WeakInvalidationListener(valueModel -> glassSubMenuItem.setChecked(radioItem.isSelected())));\n+                radioItem.selectedProperty().when(active).addListener(valueModel -> glassSubMenuItem.setChecked(radioItem.isSelected()));\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/tk\/quantum\/GlassSystemMenu.java","additions":18,"deletions":12,"binary":false,"changes":30,"status":"modified"}]}