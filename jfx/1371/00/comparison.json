{"files":[{"patch":"@@ -32,1 +32,1 @@\n-- (void)draggingEnded;\n+- (void)draggingEnded:(NSDragOperation)operation;\n@@ -44,1 +44,1 @@\n-+ (jint)mapNSOperationToJavaMaskInternal:(NSDragOperation)operation;\n++ (jint)mapNsOperationToJavaMaskInternal:(NSDragOperation)operation;\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassDragSource.h","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -28,0 +28,1 @@\n+#import \"GlassDragSource.h\"\n@@ -33,1 +34,1 @@\n-\n+    id<GlassDragSourceDelegate> dragDelegate;\n@@ -36,1 +37,1 @@\n-- (GlassDraggingSource*)initWithOperation:(NSDragOperation)operation;\n+- (GlassDraggingSource*)initWithOperation:(NSDragOperation)operation delegate:(id<GlassDragSourceDelegate>)delegate;\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassDraggingSource.h","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -56,1 +56,1 @@\n-- (GlassDraggingSource*)initWithOperation:(NSDragOperation)operation\n+- (GlassDraggingSource*)initWithOperation:(NSDragOperation)operation delegate:(id<GlassDragSourceDelegate>)delegate\n@@ -59,0 +59,2 @@\n+    \/\/ The delegate retains this object\n+    dragDelegate = delegate;\n@@ -72,0 +74,2 @@\n+    LOG(\"Dragging session ended\");\n+    [dragDelegate draggingEnded: operation];\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassDraggingSource.m","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -573,1 +573,0 @@\n-    [self->_delegate draggingEnded];\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassView3D.m","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -1079,1 +1079,1 @@\n-    self->draggingSource = [[GlassDraggingSource alloc] initWithOperation:operation];\n+    self->draggingSource = [[GlassDraggingSource alloc] initWithOperation:operation delegate:self];\n@@ -1100,1 +1100,1 @@\n-- (void)draggingEnded\n+- (void)draggingEnded:(NSDragOperation)operation\n@@ -1112,0 +1112,15 @@\n+    \/\/ At the end of dragging we're handed a single definitive\n+    \/\/ drag operation (no Generic or Any).\n+    jint mask = com_sun_glass_ui_Clipboard_ACTION_NONE;\n+    if (operation == NSDragOperationNone) {\n+        mask = com_sun_glass_ui_Clipboard_ACTION_NONE;\n+    } else if (operation == NSDragOperationCopy) {\n+        mask = com_sun_glass_ui_Clipboard_ACTION_COPY;\n+    } else if (operation == NSDragOperationMove) {\n+        mask = com_sun_glass_ui_Clipboard_ACTION_MOVE;\n+    } else if (operation == NSDragOperationLink) {\n+        mask = com_sun_glass_ui_Clipboard_ACTION_REFERENCE;\n+    } else {\n+        DNDLOG(\"Invalid drag operation\");\n+    }\n+\n@@ -1113,1 +1128,1 @@\n-    (*env)->CallVoidMethod(env, self->jView, jViewNotifyDragEnd,  [GlassDragSource getMask]);\n+    (*env)->CallVoidMethod(env, self->jView, jViewNotifyDragEnd, mask);\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassViewDelegate.m","additions":18,"deletions":3,"binary":false,"changes":21,"status":"modified"}]}