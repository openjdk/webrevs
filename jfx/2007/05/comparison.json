{"files":[{"patch":"@@ -328,0 +328,1 @@\n+            System.out.println(\"Window\/adjustSize(\" + selfSizePriority + \"): scene=\" + sceneWidth + \"x\" + sceneHeight + \"; explicitWH=\" + widthExplicit + \",\" + heightExplicit + \" final: setSize(\" + w + \", \" + h + \", \" + cw + \", \" + ch + \")\");\n@@ -1064,0 +1065,1 @@\n+            System.out.println(\"Window\/invalidationListener: shown changed to: \" + newVisible);\n@@ -1076,0 +1078,1 @@\n+                    System.out.println(\"Window\/invalidationListener: isEmbeddedWindow = \" + isEmbeddedWindow);\n@@ -1085,1 +1088,23 @@\n-                    updateOutputScales(peer.getOutputScaleX(), peer.getOutputScaleY());\n+                    System.out.println(\"Window\/invalidationListener: screen=\" + screen.get());\n+\n+                    \/*\n+                     * Based on the position of the Window, find out on what Screen\n+                     * it is located to correctly set the output scales. The correct\n+                     * output scale is required for the scene to be sized properly\n+                     * as there may otherwise be slight differences in size depending\n+                     * on the scale (which can cause controls to be cut-off and show\n+                     * ellipsis for example).\n+                     *\n+                     * We don't apply the bounds to the peer just yet, as we need it\n+                     * to trigger a width\/height change to the Scene **after** we\n+                     * set the Scene to its preferred size. Setting the size on the\n+                     * scene cannot be skipped when both dimensions are set explicitly\n+                     * as PopupWindow seems to be relying on it.\n+                     *\/\n+\n+                    Screen windowScreen = getWindowScreen();\n+\n+                    updateOutputScales(windowScreen.getOutputScaleX(), windowScreen.getOutputScaleY());\n+\n+                    System.out.println(\"Window\/invalidationListener: used screen for output scales: \" + windowScreen);\n+\n@@ -1096,0 +1121,2 @@\n+                    System.out.println(\"Window\/invalidationListener: output scale used before sizing scene: \" + getRenderScaleX());\n+                    System.out.println(\"Window\/invalidationListener: widthExplicit = \" + widthExplicit + \"; heightExplicit = \" + heightExplicit);\n@@ -1164,0 +1191,2 @@\n+\n+            System.out.println(\"Window\/invalidationListener: exit invalidation listener\");\n@@ -1509,0 +1538,2 @@\n+                System.out.println(\"Window\/peer: setBounds(\" + newX + \", \" + newY +\", \" + xSet + \", \" + ySet + \", winW:\" + newWW + \", \" + newWH + \", clientW:\" + newCW + \", \" + newCH + \", \" + newXG + \", \" + newYG +\", rsx:\" + newRX + \", rsy:\"+newRY +\")\");\n+\n","filename":"modules\/javafx.graphics\/src\/main\/java\/javafx\/stage\/Window.java","additions":32,"deletions":1,"binary":false,"changes":33,"status":"modified"}]}