{"files":[{"patch":"@@ -328,0 +328,1 @@\n+            System.out.println(\"Window\/adjustSize(\" + selfSizePriority + \"): scene=\" + sceneWidth + \"x\" + sceneHeight + \"; explicitWH=\" + widthExplicit + \",\" + heightExplicit + \" final: setSize(\" + w + \", \" + h + \", \" + cw + \", \" + ch + \")\");\n@@ -1064,0 +1065,1 @@\n+            System.out.println(\"Window\/invalidationListener: shown changed to: \" + newVisible);\n@@ -1076,0 +1078,1 @@\n+                    System.out.println(\"Window\/invalidationListener: isEmbeddedWindow = \" + isEmbeddedWindow);\n@@ -1085,0 +1088,16 @@\n+                    System.out.println(\"Window\/invalidationListener: screen=\" + screen.get());\n+\n+                    \/*\n+                     * Apply bounds first so the peer is positioned on the correct\n+                     * screen before updating the output scales and before sizing\n+                     * the window to the size of the scene. Not doing so could result\n+                     * in the window being sized based using a different scale which\n+                     * can result in the scene being sized slightly too small or\n+                     * large which can cause controls to be rendered smaller than\n+                     * their preferred sizes (and show ellipsis on Labels for example).\n+                     *\/\n+\n+                    applyBounds();\n+\n+                    System.out.println(\"Window\/invalidationListener: after applying bounds screen=\" + screen.get());\n+\n@@ -1096,0 +1115,2 @@\n+                    System.out.println(\"Window\/invalidationListener: output scale used before sizing scene: \" + getRenderScaleX());\n+                    System.out.println(\"Window\/invalidationListener: widthExplicit = \" + widthExplicit + \"; heightExplicit = \" + heightExplicit);\n@@ -1106,6 +1127,23 @@\n-                    if ((getScene() != null) && (!widthExplicit || !heightExplicit)) {\n-                        adjustSize(true);\n-                    } else {\n-                        peerBoundsConfigurator.setSize(\n-                                getWidth(), getHeight(), -1, -1);\n-                    }\n+\/\/                    if ((getScene() != null) && (!widthExplicit || !heightExplicit)) {\n+\/\/                        if (!isEmbeddedWindow) {\n+\/\/\n+\/\/                            \/*\n+\/\/                             * Only size the scene if both width and height are not set\n+\/\/                             * explicitly. The method name is a bit confusing, but it\n+\/\/                             * actually sets the scene to its preferred size, which\n+\/\/                             * should only be done if we need to know its width and\/or\n+\/\/                             * height (as the other dimension may have been set explicitly).\n+\/\/                             *\n+\/\/                             * After this call, adjustSize is called to ensure the Scene\n+\/\/                             * is again resized for the explicit dimension (if any).\n+\/\/                             *\/\n+\/\/\n+\/\/                            System.out.println(\"Window\/invalidationListener: size from scene: \" + getScene().getWidth() + \"x\" + getScene().getHeight());\n+\/\/                        }\n+\/\/\n+\/\/                    } else {\n+\/\/                        peerBoundsConfigurator.setSize(\n+\/\/                                getWidth(), getHeight(), -1, -1);\n+\/\/                    }\n+\n+                    adjustSize(true);\n@@ -1164,0 +1202,2 @@\n+\n+            System.out.println(\"Window\/invalidationListener: exit invalidation listener\");\n@@ -1509,0 +1549,2 @@\n+                System.out.println(\"Window\/peer: setBounds(\" + newX + \", \" + newY +\", \" + xSet + \", \" + ySet + \", winW:\" + newWW + \", \" + newWH + \", clientW:\" + newCW + \", \" + newCH + \", \" + newXG + \", \" + newYG +\", rsx:\" + newRX + \", rsy:\"+newRY +\")\");\n+\n","filename":"modules\/javafx.graphics\/src\/main\/java\/javafx\/stage\/Window.java","additions":48,"deletions":6,"binary":false,"changes":54,"status":"modified"}]}