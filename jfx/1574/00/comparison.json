{"files":[{"patch":"@@ -262,1 +262,19 @@\n-                dispose();\n+                \/\/ Run dispose in a background thread and wait for up to\n+                \/\/ 5 seconds for it to finish. If it doesn't, then throw an\n+                \/\/ error, so that if dispose hangs or deadlocks, it won't\n+                \/\/ prevent the JVM from exiting.\n+                var disposeLatch = new CountDownLatch(1);\n+                var thr = new Thread(() -> {\n+                    dispose();\n+                    disposeLatch.countDown();\n+                });\n+                thr.setDaemon(true);\n+                thr.start();\n+\n+                try {\n+                    if (!disposeLatch.await(5, TimeUnit.SECONDS)) {\n+                        throw new InternalError(\"dispose timed out\");\n+                    }\n+                } catch (InterruptedException ex) {\n+                    throw new InternalError(ex);\n+                }\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/tk\/quantum\/QuantumToolkit.java","additions":19,"deletions":1,"binary":false,"changes":20,"status":"modified"}]}