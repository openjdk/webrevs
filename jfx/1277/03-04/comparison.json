{"files":[{"patch":"@@ -50,0 +50,2 @@\n+import test.util.memory.JMemoryBuddy;\n+\n@@ -123,0 +125,1 @@\n+                memoryLatch.countDown();\n@@ -162,3 +165,5 @@\n-                    System.gc();\n-                    uncollectedMenuItems.removeIf(ref -> ref.get() == null);\n-                    assertEquals(1, uncollectedMenuItems.size(), \"Only the last menuItem should be alive\");\n+                    int strongCount = 0;\n+                    for (WeakReference wr: uncollectedMenuItems) {\n+                        if (!JMemoryBuddy.checkCollectable(wr)) strongCount++;\n+                    }\n+                    assertEquals(1, strongCount, \"Only the last menuItem should be alive\");\n","filename":"tests\/system\/src\/test\/java\/test\/javafx\/stage\/SystemMenuBarTest.java","additions":8,"deletions":3,"binary":false,"changes":11,"status":"modified"}]}