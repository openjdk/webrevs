{"files":[{"patch":"@@ -3012,0 +3012,1 @@\n+            media name: \"ffmpeg-7.0.2\", ext: \"tar.gz\"\n@@ -3358,2 +3359,2 @@\n-                        project.ext.libav.versions = [ \"3.3.3\", \"4.0.2\", \"5.1.2\", \"6.0\" ]\n-                        project.ext.libav.versionmap = [ \"3.3.3\" : \"57\", \"4.0.2\" : \"58\", \"5.1.2\" : \"59\", \"6.0\" : \"60\" ]\n+                        project.ext.libav.versions = [ \"3.3.3\", \"4.0.2\", \"5.1.2\", \"6.0\", \"7.0.2\" ]\n+                        project.ext.libav.versionmap = [ \"3.3.3\" : \"57\", \"4.0.2\" : \"58\", \"5.1.2\" : \"59\", \"6.0\" : \"60\", \"7.0.2\" : \"61\" ]\n@@ -3439,1 +3440,1 @@\n-                            project.ext.libav.ffmpeg.versions = [ \"57\", \"58\", \"59\", \"60\" ]\n+                            project.ext.libav.ffmpeg.versions = [ \"57\", \"58\", \"59\", \"60\", \"61\" ]\n","filename":"build.gradle","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -31,0 +31,5 @@\n+      <component group=\"\" name=\"ffmpeg-7.0.2\" version=\"\">\n+         <artifact name=\"ffmpeg-7.0.2-.tar.gz\">\n+            <sha256 value=\"1233b3a93dd7517cc3c56b72a67f64041c044848d981e3deff4bebffa25f1054\" origin=\"Generated by Gradle\"\/>\n+         <\/artifact>\n+      <\/component>\n","filename":"gradle\/verification-metadata.xml","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2010, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -130,0 +130,1 @@\n+                    dependencies.add(\"avplugin-ffmpeg-61\");\n","filename":"modules\/javafx.media\/src\/main\/java\/com\/sun\/media\/jfxmediaimpl\/NativeMediaManager.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -149,1 +149,1 @@\n-static const int AVCODEC_EXPLICIT_VERSIONS[] = { 57, 58, 59, 60 };\n+static const int AVCODEC_EXPLICIT_VERSIONS[] = { 57, 58, 59, 60, 61 };\n","filename":"modules\/javafx.media\/src\/main\/native\/gstreamer\/gstreamer-lite\/gstreamer\/gst\/gstregistry.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2010, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -56,0 +56,8 @@\n+\/\/ Do not use reordered_opaque to pass PTS. Use AVPacket.pts\/AVFrame.pts instead.\n+\/\/ reordered_opaque is removed since 61.\n+#define NO_REORDERED_OPAQUE    (LIBAVCODEC_VERSION_INT >= AV_VERSION_INT(61,0,0))\n+\n+\/\/ Use AVCodecContext.frame_num instead of AVCodecContext.frame_number. They same\n+\/\/ except frame_num is 64-bit and frame_number is 32-bit. Since 61.\n+#define USE_FRAME_NUM          (LIBAVCODEC_VERSION_INT >= AV_VERSION_INT(61,0,0))\n+\n","filename":"modules\/javafx.media\/src\/main\/native\/gstreamer\/plugins\/av\/avdefines.h","additions":9,"deletions":1,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -557,0 +557,3 @@\n+#if NO_REORDERED_OPAQUE\n+    decoder->dest_frame->pts = base->frame->pts;\n+#else \/\/ NO_REORDERED_OPAQUE\n@@ -558,0 +561,1 @@\n+#endif \/\/ NO_REORDERED_OPAQUE\n@@ -682,1 +686,1 @@\n-    int64_t        reordered_opaque = AV_NOPTS_VALUE;\n+    int64_t        pts = AV_NOPTS_VALUE;\n@@ -714,0 +718,6 @@\n+#if NO_REORDERED_OPAQUE\n+            if (GST_BUFFER_TIMESTAMP_IS_VALID(buf))\n+                decoder->packet.pts = (int64_t)GST_BUFFER_TIMESTAMP(buf);\n+            else\n+                decoder->packet.pts = AV_NOPTS_VALUE;\n+#else \/\/ NO_REORDERED_OPAQUE\n@@ -718,0 +728,1 @@\n+#endif \/\/ NO_REORDERED_OPAQUE\n@@ -749,0 +760,6 @@\n+#if NO_REORDERED_OPAQUE\n+        if (GST_BUFFER_TIMESTAMP_IS_VALID(buf))\n+            decoder->packet.pts = (int64_t)GST_BUFFER_TIMESTAMP(buf);\n+        else\n+            decoder->packet.pts = AV_NOPTS_VALUE;\n+#else \/\/ NO_REORDERED_OPAQUE\n@@ -753,0 +770,1 @@\n+#endif \/\/ NO_REORDERED_OPAQUE\n@@ -799,1 +817,5 @@\n-                reordered_opaque = decoder->dest_frame->reordered_opaque;\n+#if NO_REORDERED_OPAQUE\n+                pts = decoder->dest_frame->pts;\n+#else \/\/ NO_REORDERED_OPAQUE\n+                pts = decoder->dest_frame->reordered_opaque;\n+#endif \/\/ NO_REORDERED_OPAQUE\n@@ -809,1 +831,5 @@\n-                reordered_opaque = base->frame->reordered_opaque;\n+#if NO_REORDERED_OPAQUE\n+                pts = base->frame->pts;\n+#else \/\/ NO_REORDERED_OPAQUE\n+                pts = base->frame->reordered_opaque;\n+#endif \/\/ NO_REORDERED_OPAQUE\n@@ -828,0 +854,3 @@\n+#if USE_FRAME_NUM\n+                GST_BUFFER_OFFSET(outbuf) = base->context->frame_num;\n+#else \/\/ USE_FRAME_NUM\n@@ -829,1 +858,2 @@\n-                if (reordered_opaque != AV_NOPTS_VALUE)\n+#endif \/\/ USE_FRAME_NUM\n+                if (pts != AV_NOPTS_VALUE)\n@@ -831,1 +861,1 @@\n-                    GST_BUFFER_TIMESTAMP(outbuf) = reordered_opaque;\n+                    GST_BUFFER_TIMESTAMP(outbuf) = pts;\n","filename":"modules\/javafx.media\/src\/main\/native\/gstreamer\/plugins\/av\/videodecoder.c","additions":35,"deletions":5,"binary":false,"changes":40,"status":"modified"}]}