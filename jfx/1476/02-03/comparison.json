{"files":[{"patch":"@@ -226,1 +226,4 @@\n-                for (Map<String, Data<X,Y>> catMap : seriesCategoryMap.values()) {\n+                for (var entry : seriesCategoryMap.entrySet()) {\n+                    Series s = entry.getKey();\n+                    Map<String, Data<X,Y>> catMap = entry.getValue();\n+                    int i = 0;\n@@ -228,1 +231,1 @@\n-                        if (cat == category) {\n+                        if (s == series && i >= itemIndex) {\n@@ -234,0 +237,1 @@\n+                        i++;\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/chart\/BarChart.java","additions":6,"deletions":2,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -210,0 +210,23 @@\n+    @Test\n+    public void testAddingDataAtIndex() {\n+        startApp();\n+        ObservableList<XYChart.Data<String, Number>> list = FXCollections.observableArrayList();\n+        list.add(new XYChart.Data<>(\"1\", 1));\n+        list.add(new XYChart.Data<>(\"2\", 2));\n+        list.add(new XYChart.Data<>(\"3\", 3));\n+        BarChart<String, Number> bc = new BarChart<>(new CategoryAxis(), new NumberAxis());\n+        bc.getData().add(new Series<>());\n+        bc.getData().getFirst().setData(list);\n+        assertEquals(3, XYChartShim.Series_getDataSize(bc.getData().getFirst()));\n+\n+        \/\/ insert new data before data item \"3\":\n+        bc.getData().getFirst().getData().add(2, new XYChart.Data<>(\"4\", 4));\n+\n+        var categories = ((CategoryAxis)bc.getXAxis()).getCategories();\n+        assertEquals(4, categories.size());\n+        assertEquals(\"1\", categories.get(0));\n+        assertEquals(\"2\", categories.get(1));\n+        assertEquals(\"4\", categories.get(2));\n+        assertEquals(\"3\", categories.get(3));\n+    }\n+\n@@ -241,0 +264,9 @@\n+\n+        \/\/ insert new data before data item \"4\" in series2:\n+        series2.getData().add(2, new XYChart.Data<>(\"5\", 7));\n+\n+        assertEquals(\"1\", categories.get(0));\n+        assertEquals(\"2\", categories.get(1));\n+        assertEquals(\"3\", categories.get(2));\n+        assertEquals(\"5\", categories.get(3));\n+        assertEquals(\"4\", categories.get(4));\n","filename":"modules\/javafx.controls\/src\/test\/java\/test\/javafx\/scene\/chart\/BarChartTest.java","additions":32,"deletions":0,"binary":false,"changes":32,"status":"modified"}]}