{"files":[{"patch":"@@ -312,0 +312,3 @@\n+if (UNIX AND NOT APPLE AND CMAKE_BUILD_TYPE STREQUAL \"Debug\" AND PORT STREQUAL \"Java\")\n+    target_link_libraries(LLIntOffsetsExtractor icuuc icui18n icudata)\n+endif()\n@@ -1385,1 +1388,10 @@\n-    set(LowLevelInterpreter_LAUNCHER \"${JavaScriptCore_SCRIPTS_SOURCES_DIR}\/postprocess-asm\")\n+    if (PORT STREQUAL \"Java\")\n+        file(\n+            COPY ${JavaScriptCore_SCRIPTS_SOURCES_DIR}\/postprocess-asm ${JavaScriptCore_SCRIPTS_SOURCES_DIR}\/resolve-asm-file-conflicts.rb\n+            FILE_PERMISSIONS OWNER_EXECUTE OWNER_WRITE OWNER_READ GROUP_READ GROUP_WRITE GROUP_READ WORLD_READ\n+            DESTINATION ${JavaScriptCore_SCRIPTS_DIR}\n+        )\n+        set(LowLevelInterpreter_LAUNCHER \"${JavaScriptCore_SCRIPTS_DIR}\/postprocess-asm\")\n+    else ()\n+        set(LowLevelInterpreter_LAUNCHER \"${JavaScriptCore_SCRIPTS_SOURCES_DIR}\/postprocess-asm\")\n+    endif ()\n","filename":"modules\/javafx.web\/src\/main\/native\/Source\/JavaScriptCore\/CMakeLists.txt","additions":13,"deletions":1,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -110,0 +110,2 @@\n+\n+        win\/DbgHelperWin.h\n@@ -114,0 +116,1 @@\n+        DbgHelp\n","filename":"modules\/javafx.web\/src\/main\/native\/Source\/WTF\/wtf\/PlatformJava.cmake","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -38,0 +38,16 @@\n+static void initRefs(JNIEnv* env)\n+{\n+    if (!jMainThreadCls) {\n+        static JGClass jMainThreadRef(env->FindClass(\"com\/sun\/webkit\/MainThread\"));\n+        jMainThreadCls = jMainThreadRef;\n+\n+        fwkIsMainThread = env->GetStaticMethodID(jMainThreadCls,\n+            \"fwkIsMainThread\", \"()Z\");\n+        ASSERT(fwkIsMainThread);\n+\n+        fwkScheduleDispatchFunctions = env->GetStaticMethodID(jMainThreadCls,\n+            \"fwkScheduleDispatchFunctions\", \"()V\");\n+        ASSERT(fwkScheduleDispatchFunctions);\n+    }\n+}\n+\n@@ -69,17 +85,1 @@\n-\n-    static JGClass jMainThreadRef(env->FindClass(\"com\/sun\/webkit\/MainThread\"));\n-    jMainThreadCls = jMainThreadRef;\n-\n-    fwkIsMainThread = env->GetStaticMethodID(\n-            jMainThreadCls,\n-            \"fwkIsMainThread\",\n-            \"()Z\");\n-\n-    ASSERT(fwkIsMainThread);\n-\n-    fwkScheduleDispatchFunctions = env->GetStaticMethodID(\n-            jMainThreadCls,\n-            \"fwkScheduleDispatchFunctions\",\n-            \"()V\");\n-\n-    ASSERT(fwkScheduleDispatchFunctions);\n+    initRefs(env);\n@@ -101,0 +101,2 @@\n+    initRefs(env);\n+\n","filename":"modules\/javafx.web\/src\/main\/native\/Source\/WTF\/wtf\/java\/MainThreadJava.cpp","additions":19,"deletions":17,"binary":false,"changes":36,"status":"modified"},{"patch":"@@ -204,1 +204,1 @@\n-    static JavaRuntimeMethod* create(JSGlobalObject* globalObject, const String& name, Bindings::Method *method)\n+    static JavaRuntimeMethod* create(JSGlobalObject* lexicalGlobalObject, JSGlobalObject* globalObject, const String& name, Bindings::Method* method)\n@@ -209,1 +209,1 @@\n-        Structure* domStructure = WebCore::deprecatedGetDOMStructure<JavaRuntimeMethod>(globalObject);\n+        Structure* domStructure = WebCore::deprecatedGetDOMStructure<JavaRuntimeMethod>(lexicalGlobalObject);\n@@ -211,1 +211,1 @@\n-        _method->finishCreation(globalObject->vm(), name);\n+        _method->finishCreation(vm, name);\n@@ -215,1 +215,1 @@\n-    static Structure* createStructure(VM& globalData, JSGlobalObject* globalObject, JSValue prototype)\n+    static Structure* createStructure(VM& vm, JSC::JSGlobalObject* globalObject, JSC::JSValue prototype)\n@@ -217,1 +217,1 @@\n-        return Structure::create(globalData, globalObject, prototype, TypeInfo(ObjectType, StructureFlags), &s_info);\n+        return Structure::create(vm, globalObject, prototype, TypeInfo(InternalFunctionType, StructureFlags), &s_info);\n@@ -228,1 +228,1 @@\n-    void finishCreation(VM& globalData, const String& name)\n+    void finishCreation(VM& vm, const String& name)\n@@ -230,2 +230,2 @@\n-        Base::finishCreation(globalData, name);\n-        ASSERT(inherits(globalData, &s_info));\n+        Base::finishCreation(vm, name);\n+        ASSERT(inherits(vm, &s_info));\n@@ -237,1 +237,1 @@\n-JSValue JavaInstance::getMethod(JSGlobalObject* globalObject, PropertyName propertyName)\n+JSValue JavaInstance::getMethod(JSGlobalObject* lexicalGlobalObject, PropertyName propertyName)\n@@ -241,1 +241,1 @@\n-    return JavaRuntimeMethod::create(globalObject, propertyName.publicName(), method);\n+    return JavaRuntimeMethod::create(lexicalGlobalObject, lexicalGlobalObject, propertyName.publicName(), method);\n@@ -312,1 +312,1 @@\n-        LOG(LiveConnect, \"JavaInstance::invokeMethod arg[%d] = %s\", i, globalObject->argument(i).toString(globalObject)->value(globalObject).ascii().data());\n+        LOG(LiveConnect, \"JavaInstance::invokeMethod arg[%d] = %s\", i, callFrame->argument(i).toString(globalObject)->value(globalObject).ascii().data());\n","filename":"modules\/javafx.web\/src\/main\/native\/Source\/WebCore\/bridge\/jni\/jsc\/JavaInstanceJSC.cpp","additions":11,"deletions":11,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -91,0 +91,1 @@\n+#if !PLATFORM(JAVA)\n@@ -92,0 +93,1 @@\n+#endif\n","filename":"modules\/javafx.web\/src\/main\/native\/Source\/WebCore\/dom\/Position.h","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -5,0 +5,1 @@\n+               _WTFReportAssertionFailureWithMessage\n@@ -19,0 +20,2 @@\n+               __ZN3WTF12isMainThreadEv\n+               __ZN3WTF14RefCountedBase33areThreadingChecksEnabledGloballyE\n","filename":"modules\/javafx.web\/src\/main\/native\/Source\/WebCore\/mapfile-macosx","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -85,0 +85,1 @@\n+#include <WebCore\/LogInitialization.h>\n@@ -856,1 +857,1 @@\n-    WebKitInitializeLogChannelsIfNecessary();\n+    initializeLogChannelsIfNecessary();\n","filename":"modules\/javafx.web\/src\/main\/native\/Source\/WebKitLegacy\/java\/WebCoreSupport\/WebPage.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"}]}