{"files":[{"patch":"@@ -90,4 +90,0 @@\n-        Rectangle rect = new Rectangle(100, 100);\n-        ToolBar toolBar = new ToolBar(rect);\n-        toolBar.setSkin(new ToolBarSkin(toolBar));\n-\n@@ -95,2 +91,0 @@\n-            toolBar.setOrientation(orientation);\n-\n@@ -98,0 +92,6 @@\n+                Rectangle rect = new Rectangle(100, 100);\n+                ToolBar toolBar = new ToolBar(rect);\n+                toolBar.setSkin(new ToolBarSkin(toolBar));\n+\n+                toolBar.setOrientation(orientation);\n+\n","filename":"modules\/javafx.controls\/src\/test\/java\/test\/javafx\/scene\/control\/skin\/ToolBarSkinTest.java","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2853,1 +2853,1 @@\n-                    if (p != null && !p.isCurrentLayoutChild(Node.this)) {\n+                    if (p != null && !p.inLayoutChildren()) {\n@@ -2927,1 +2927,1 @@\n-                    if (p != null && !p.isCurrentLayoutChild(Node.this)) {\n+                    if (p != null && !p.inLayoutChildren()) {\n","filename":"modules\/javafx.graphics\/src\/main\/java\/javafx\/scene\/Node.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -987,0 +987,13 @@\n+    private boolean inLayoutChildren;\n+\n+    \/**\n+     * Returns whether this node is currently running its {@link #layoutChildren()}\n+     * method. This is useful to detect if a change to layout properties of a\n+     * direct child should be ignored, or should trigger a layout pass.\n+     *\n+     * @return {@code true} if this node is running {@link #layoutChildren()}, otherwise {@code false}\n+     *\/\n+    boolean inLayoutChildren() {\n+        return inLayoutChildren;\n+    }\n+\n@@ -1246,11 +1259,0 @@\n-    \/**\n-     * It stores the reference to the current child being laid out by its parent.\n-     * This reference is important to differentiate whether a layout is triggered\n-     * by its parent or other events.\n-     *\/\n-    private Node currentLayoutChild = null;\n-\n-    boolean isCurrentLayoutChild(Node node) {\n-        return node == currentLayoutChild;\n-    }\n-\n@@ -1283,1 +1285,9 @@\n-                layoutChildren();\n+                inLayoutChildren = true;\n+\n+                try {\n+                    layoutChildren();\n+                }\n+                finally {\n+                    inLayoutChildren = false;\n+                }\n+\n@@ -1288,1 +1298,1 @@\n-                    currentLayoutChild = child;\n+\n@@ -1295,1 +1305,1 @@\n-                currentLayoutChild = null;\n+\n@@ -1312,1 +1322,1 @@\n-            currentLayoutChild = node;\n+\n@@ -1317,1 +1327,0 @@\n-        currentLayoutChild = null;\n","filename":"modules\/javafx.graphics\/src\/main\/java\/javafx\/scene\/Parent.java","additions":25,"deletions":16,"binary":false,"changes":41,"status":"modified"}]}