{"files":[{"patch":"@@ -320,1 +320,0 @@\n-\n@@ -811,0 +810,7 @@\n+            if (!is_window_floating(gdk_window_get_state(gdk_window))) {\n+                \/\/ Delay for then window is restored\n+                geometry.needs_to_update_frame_extents = true;\n+                LOG(\"Frame extents will be updated on restore\");\n+                return;\n+            }\n+\n@@ -861,4 +867,1 @@\n-\n-            if (is_window_floating(gdk_window_get_state(gdk_window))) {\n-                move_resize(x, y, true, true, newW, newH);\n-            }\n+            move_resize(x, y, true, true, newW, newH);\n@@ -980,5 +983,1 @@\n-        if (event->new_window_state & GDK_WINDOW_STATE_FULLSCREEN) {\n-            notify_fullscreen(true);\n-        } else {\n-            notify_fullscreen(false);\n-        }\n+        notify_fullscreen(event->new_window_state & GDK_WINDOW_STATE_FULLSCREEN);\n@@ -991,0 +990,9 @@\n+\n+    bool restored = (event->changed_mask & (GDK_WINDOW_STATE_MAXIMIZED | GDK_WINDOW_STATE_FULLSCREEN))\n+                    && ((event->new_window_state & (GDK_WINDOW_STATE_MAXIMIZED | GDK_WINDOW_STATE_FULLSCREEN)) == 0);\n+\n+    if (restored && geometry.needs_to_update_frame_extents) {\n+        LOG(\"Restored & Needs to update frame extents\");\n+        geometry.needs_to_update_frame_extents = false;\n+        load_cached_extents();\n+    }\n@@ -1492,3 +1500,1 @@\n-    if (jview) {\n-        notify_view_resize();\n-    }\n+    notify_view_resize();\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/gtk\/glass_window.cpp","additions":19,"deletions":13,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -69,1 +69,2 @@\n-    extents(), frame_extents_received(false) {}\n+    extents(), frame_extents_received(false),\n+    needs_to_update_frame_extents(false) {}\n@@ -95,0 +96,1 @@\n+    bool needs_to_update_frame_extents;\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/gtk\/glass_window.h","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -75,1 +75,1 @@\n-    void testMaximizeKeepGeometryOnRestore(StageStyle stageStyle) {\n+    void testMaximizeShouldKeepGeometryOnRestore(StageStyle stageStyle) {\n","filename":"tests\/system\/src\/test\/java\/test\/javafx\/stage\/MaximizeTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}