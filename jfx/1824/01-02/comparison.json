{"files":[{"patch":"@@ -139,5 +139,0 @@\n-    native protected long _getNativeLayer(long ptr);\n-    public long getNativeLayer() {\n-        return _getNativeLayer(getNativeView());\n-    }\n-\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/glass\/ui\/mac\/MacView.java","additions":0,"deletions":5,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n-@interface GlassLayer3D : CALayer\n+@interface GlassLayer : CALayer\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassLayer.h","additions":1,"deletions":1,"binary":false,"changes":2,"previous_filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassLayer3D.h","status":"renamed"},{"patch":"@@ -26,1 +26,1 @@\n-#import \"GlassLayer3D.h\"\n+#import \"GlassLayer.h\"\n@@ -29,2 +29,2 @@\n-#import \"GlassLayerCGL3D.h\"\n-#import \"GlassLayerMTL3D.h\"\n+#import \"GlassLayerCGL.h\"\n+#import \"GlassLayerMTL.h\"\n@@ -39,1 +39,1 @@\n-@implementation GlassLayer3D\n+@implementation GlassLayer\n@@ -49,1 +49,1 @@\n-    LOG(\"GlassLayer3D initGlassLayer]\");\n+    LOG(\"GlassLayer initGlassLayer]\");\n@@ -54,1 +54,1 @@\n-            GlassLayerMTL3D* mtlLayer = [[GlassLayerMTL3D alloc]\n+            GlassLayerMTL* mtlLayer = [[GlassLayerMTL alloc]\n@@ -61,1 +61,1 @@\n-            GlassLayerCGL3D* cglLayer = [[GlassLayerCGL3D alloc]\n+            GlassLayerCGL* cglLayer = [[GlassLayerCGL alloc]\n@@ -71,1 +71,1 @@\n-        LOG(\"   GlassLayer3D context: %p\", ctx);\n+        LOG(\"   GlassLayer context: %p\", ctx);\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassLayer.m","additions":8,"deletions":8,"binary":false,"changes":16,"previous_filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassLayer3D.m","status":"renamed"},{"patch":"@@ -31,1 +31,3 @@\n-@interface GlassLayerCGL3D : CAOpenGLLayer\n+\/\/ GlassLayerCGL is not subclass of GlassLayer, it is a subLayer\n+\/\/ and it handles CALayer's OpenGL specific drawing logic\n+@interface GlassLayerCGL : CAOpenGLLayer\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassLayerCGL.h","additions":3,"deletions":1,"binary":false,"changes":4,"previous_filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassLayerCGL3D.h","status":"renamed"},{"patch":"@@ -28,1 +28,1 @@\n-#import \"GlassLayerCGL3D.h\"\n+#import \"GlassLayerCGL.h\"\n@@ -38,1 +38,1 @@\n-@implementation GlassLayerCGL3D\n+@implementation GlassLayerCGL\n@@ -45,1 +45,1 @@\n-    LOG(\"GlassLayerCGL3D initWithSharedContext]\");\n+    LOG(\"GlassLayerCGL initWithSharedContext]\");\n@@ -52,1 +52,1 @@\n-        LOG(\"   GlassLayerCGL3D context: %p\", ctx);\n+        LOG(\"   GlassLayerCGL context: %p\", ctx);\n@@ -98,1 +98,1 @@\n-    LOG(\"GlassLayerCGL3D drawInCGLContext]\");\n+    LOG(\"GlassLayerCGL drawInCGLContext]\");\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassLayerCGL.m","additions":5,"deletions":5,"binary":false,"changes":10,"previous_filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassLayerCGL3D.m","status":"renamed"},{"patch":"@@ -30,1 +30,3 @@\n-@interface GlassLayerMTL3D : CAMetalLayer\n+\/\/ GlassLayerMTL is not subclass of GlassLayer, it is a subLayer\n+\/\/ and it handles CALayer's Metal specific drawing logic\n+@interface GlassLayerMTL : CAMetalLayer\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassLayerMTL.h","additions":3,"deletions":1,"binary":false,"changes":4,"previous_filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassLayerMTL3D.h","status":"renamed"},{"patch":"@@ -28,1 +28,1 @@\n-#import \"GlassLayerMTL3D.h\"\n+#import \"GlassLayerMTL.h\"\n@@ -38,1 +38,1 @@\n-@implementation GlassLayerMTL3D\n+@implementation GlassLayerMTL\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassLayerMTL.m","additions":2,"deletions":2,"binary":false,"changes":4,"previous_filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassLayerMTL3D.m","status":"renamed"},{"patch":"@@ -341,1 +341,1 @@\n-        GlassLayer3D *layer = (GlassLayer3D*)[view getLayer];\n+        GlassLayer *layer = (GlassLayer*)[view getLayer];\n@@ -350,27 +350,0 @@\n-\/*\n- * Class:     com_sun_glass_ui_mac_MacView\n- * Method:    _getNativeLayer\n- * Signature: (J)J\n- *\/\n-JNIEXPORT jlong JNICALL Java_com_sun_glass_ui_mac_MacView__1getNativeLayer\n-(JNIEnv *env, jobject jView, jlong jPtr)\n-{\n-    LOG(\"Java_com_sun_glass_ui_mac_MacView__1_getNativeLayer\");\n-    LOG(\"   view: %p\", jPtr);\n-    if (!jPtr) return 0L;\n-\n-    jlong ptr = 0L;\n-\n-    GLASS_ASSERT_MAIN_JAVA_THREAD(env);\n-    GLASS_POOL_ENTER;\n-    {\n-        GlassView3D<GlassView> *view = getGlassView(env, jPtr);\n-        CALayer *layer = [view getLayer];\n-        ptr = ptr_to_jlong(layer);\n-    }\n-    GLASS_POOL_EXIT;\n-    GLASS_CHECK_EXCEPTION(env);\n-\n-    return ptr;\n-}\n-\n@@ -499,1 +472,1 @@\n-    \/\/GLASS_POOL_PUSH; \/\/ it will be popped by \"_end\"\n+    GLASS_POOL_PUSH; \/\/ it will be popped by \"_end\"\n@@ -501,1 +474,1 @@\n-    \/\/    [view retain];\n+        [view retain];\n@@ -523,1 +496,1 @@\n-    \/\/    [view release];\n+        [view release];\n@@ -525,1 +498,1 @@\n-    \/\/GLASS_POOL_POP; \/\/ it was pushed by \"_begin\"*\/\n+    GLASS_POOL_POP; \/\/ it was pushed by \"_begin\"*\/\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassView.m","additions":5,"deletions":32,"binary":false,"changes":37,"status":"modified"},{"patch":"@@ -29,1 +29,1 @@\n-#import \"GlassLayer3D.h\"\n+#import \"GlassLayer.h\"\n@@ -31,0 +31,2 @@\n+\/\/ GlassView3D is subView of GlassHostView and it performs event\n+\/\/ handling tasks related to both OpenGL and Metal pipeline\n@@ -35,1 +37,1 @@\n-    GlassLayer3D *layer;\n+    GlassLayer *layer;\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassView3D.h","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -35,2 +35,2 @@\n-#import \"GlassViewCGL3D.h\"\n-#import \"GlassViewMTL3D.h\"\n+#import \"GlassViewCGL.h\"\n+#import \"GlassViewMTL.h\"\n@@ -110,1 +110,1 @@\n-    \/\/ TODO : We again fetch isHiDPIAware in GlassViewCGL3D\n+    \/\/ TODO : We again fetch isHiDPIAware in GlassViewCGL\n@@ -129,2 +129,2 @@\n-            GlassViewMTL3D* mtlSubView;\n-            subView = mtlSubView = [[GlassViewMTL3D alloc] initWithFrame:frame withJview:jView withJproperties:jproperties];\n+            GlassViewMTL* mtlSubView;\n+            subView = mtlSubView = [[GlassViewMTL alloc] initWithFrame:frame withJview:jView withJproperties:jproperties];\n@@ -134,2 +134,2 @@\n-            GlassViewCGL3D* cglSubView;\n-            subView = cglSubView = [[GlassViewCGL3D alloc] initWithFrame:frame withJview:jView withJproperties:jproperties];\n+            GlassViewCGL* cglSubView;\n+            subView = cglSubView = [[GlassViewCGL alloc] initWithFrame:frame withJview:jView withJproperties:jproperties];\n@@ -738,1 +738,1 @@\n-- (GlassLayer3D*)getLayer\n+- (GlassLayer*)getLayer\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassView3D.m","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -0,0 +1,48 @@\n+\/*\n+ * Copyright (c) 2011, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+#import <Cocoa\/Cocoa.h>\n+#import <OpenGL\/gl.h>\n+#import <OpenGL\/OpenGL.h>\n+\n+#import \"GlassView.h\"\n+#import \"GlassLayer.h\"\n+\n+\/\/ GlassViewCGL is not subclass of GlassView3D, it is a subView\n+\/\/ and it handles NSView's OpenGL specific drawing logic\n+@interface GlassViewCGL : NSOpenGLView\n+{\n+    GlassLayer* layer;\n+\n+    CGFloat             _backgroundR;\n+    CGFloat             _backgroundG;\n+    CGFloat             _backgroundB;\n+    CGFloat             _backgroundA;\n+}\n+\n+- (GlassLayer*)getLayer;\n+- (id)initWithFrame:(NSRect)frame withJview:(jobject)jView withJproperties:(jobject)jproperties;\n+\n+@end\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassViewCGL.h","additions":48,"deletions":0,"binary":false,"changes":48,"status":"added"},{"patch":"@@ -34,1 +34,1 @@\n-#import \"GlassViewCGL3D.h\"\n+#import \"GlassViewCGL.h\"\n@@ -78,1 +78,1 @@\n-@implementation GlassViewCGL3D\n+@implementation GlassViewCGL\n@@ -207,1 +207,1 @@\n-    self->layer = [[GlassLayer3D alloc] initGlassLayer:(NSObject*)sharedCGL\n+    self->layer = [[GlassLayer alloc] initGlassLayer:(NSObject*)sharedCGL\n@@ -220,1 +220,1 @@\n-    LOG(\"GlassViewCGL3D initWithFrame:withJview:withJproperties\");\n+    LOG(\"GlassViewCGL initWithFrame:withJview:withJproperties\");\n@@ -231,1 +231,1 @@\n-        LOG(\"GlassViewCGL3D initWithFrame: initWithAttributes failed! Set pixel format to default pixel format\");\n+        LOG(\"GlassViewCGL initWithFrame: initWithAttributes failed! Set pixel format to default pixel format\");\n@@ -257,1 +257,1 @@\n-- (GlassLayer3D*)getLayer\n+- (GlassLayer*)getLayer\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassViewCGL.m","additions":6,"deletions":6,"binary":false,"changes":12,"previous_filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassViewCGL3D.m","status":"renamed"},{"patch":"@@ -1,47 +0,0 @@\n-\/*\n- * Copyright (c) 2011, 2025, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.  Oracle designates this\n- * particular file as subject to the \"Classpath\" exception as provided\n- * by Oracle in the LICENSE file that accompanied this code.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-\n-#import <Cocoa\/Cocoa.h>\n-#import <OpenGL\/gl.h>\n-#import <OpenGL\/OpenGL.h>\n-\n-#import \"GlassView.h\"\n-#import \"GlassLayer3D.h\"\n-\n-\/\/ 3D version of Glass providing OpenGL context through CAOpenGLLayer\n-@interface GlassViewCGL3D : NSOpenGLView\n-{\n-    GlassLayer3D* layer;\n-\n-    CGFloat             _backgroundR;\n-    CGFloat             _backgroundG;\n-    CGFloat             _backgroundB;\n-    CGFloat             _backgroundA;\n-}\n-\n-- (GlassLayer3D*)getLayer;\n-- (id)initWithFrame:(NSRect)frame withJview:(jobject)jView withJproperties:(jobject)jproperties;\n-\n-@end\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassViewCGL3D.h","additions":0,"deletions":47,"binary":false,"changes":47,"status":"deleted"},{"patch":"@@ -0,0 +1,41 @@\n+\/*\n+ * Copyright (c) 2024, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+#import <Cocoa\/Cocoa.h>\n+\n+#import \"GlassView.h\"\n+#import \"GlassLayer.h\"\n+\n+\/\/ GlassViewMTL is not subclass of GlassView3D, it is a subView\n+\/\/ and it handles NSView's Metal specific drawing logic\n+@interface GlassViewMTL : NSView\n+{\n+    GlassLayer* layer;\n+}\n+\n+- (GlassLayer*)getLayer;\n+- (id)initWithFrame:(NSRect)frame withJview:(jobject)jView withJproperties:(jobject)jproperties;\n+\n+@end\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassViewMTL.h","additions":41,"deletions":0,"binary":false,"changes":41,"status":"added"},{"patch":"@@ -34,1 +34,1 @@\n-#import \"GlassViewMTL3D.h\"\n+#import \"GlassViewMTL.h\"\n@@ -76,1 +76,1 @@\n-@implementation GlassViewMTL3D\n+@implementation GlassViewMTL\n@@ -122,1 +122,1 @@\n-        LOG(\"GlassViewMTL3D _initialize3dWithJproperties : using software pipeline\");\n+        LOG(\"GlassViewMTL _initialize3dWithJproperties : using software pipeline\");\n@@ -126,1 +126,1 @@\n-    self->layer = [[GlassLayer3D alloc] initGlassLayer:nil\n+    self->layer = [[GlassLayer alloc] initGlassLayer:nil\n@@ -146,1 +146,1 @@\n-    LOG(\"GlassViewMTL3D initWithFrame:withJview:withJproperties\");\n+    LOG(\"GlassViewMTL initWithFrame:withJview:withJproperties\");\n@@ -169,1 +169,1 @@\n-- (GlassLayer3D*)getLayer\n+- (GlassLayer*)getLayer\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassViewMTL.m","additions":6,"deletions":6,"binary":false,"changes":12,"previous_filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassViewMTL3D.m","status":"renamed"},{"patch":"@@ -1,40 +0,0 @@\n-\/*\n- * Copyright (c) 2024, 2025, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.  Oracle designates this\n- * particular file as subject to the \"Classpath\" exception as provided\n- * by Oracle in the LICENSE file that accompanied this code.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-\n-#import <Cocoa\/Cocoa.h>\n-\n-#import \"GlassView.h\"\n-#import \"GlassLayer3D.h\"\n-\n-\/\/ 3D version of Glass for Metal using CAMetalLayer\n-@interface GlassViewMTL3D : NSView\n-{\n-    GlassLayer3D* layer;\n-}\n-\n-- (GlassLayer3D*)getLayer;\n-- (id)initWithFrame:(NSRect)frame withJview:(jobject)jView withJproperties:(jobject)jproperties;\n-\n-@end\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassViewMTL3D.h","additions":0,"deletions":40,"binary":false,"changes":40,"status":"deleted"},{"patch":"@@ -31,0 +31,1 @@\n+#import \"GlassView3D.h\"\n@@ -42,1 +43,1 @@\n-    NSView<GlassView>   *view;\n+    GlassView3D<GlassView>   *view;\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassWindow.h","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -95,1 +95,1 @@\n-static inline NSView<GlassView> *getMacView(JNIEnv *env, jobject jview)\n+static inline GlassView3D<GlassView> *getMacView(JNIEnv *env, jobject jview)\n@@ -101,1 +101,1 @@\n-        return (NSView<GlassView>*)jlong_to_ptr((*env)->GetLongField(env, jview, jfID));\n+        return (GlassView3D<GlassView>*)jlong_to_ptr((*env)->GetLongField(env, jview, jfID));\n@@ -837,1 +837,3 @@\n-            CALayer *layer = [window->view layer];\n+            CALayer *layer = [window->view getLayer];\n+            LOG(\"   layer: %p\", layer);\n+            \/\/ TODO : Move below logic to CGL specific View\/Layer class\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassWindow.m","additions":5,"deletions":3,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -128,2 +128,2 @@\n-        vertexBuffer[i] = [[device newBufferWithLength:size\n-            options:MTLResourceStorageModeShared] autorelease];\n+        vertexBuffer[i] = [device newBufferWithLength:size\n+            options:MTLResourceStorageModeShared];\n@@ -145,2 +145,2 @@\n-        indexBuffer[i] = [[device newBufferWithLength:size\n-            options:MTLResourceStorageModeShared] autorelease];\n+        indexBuffer[i] = [device newBufferWithLength:size\n+            options:MTLResourceStorageModeShared];\n","filename":"modules\/javafx.graphics\/src\/main\/native-prism-mtl\/MetalMesh.m","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"}]}