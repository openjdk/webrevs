{"files":[{"patch":"@@ -202,2 +202,2 @@\n-    decoder->force_discontinuity = FALSE;\n-    decoder->force_output_discontinuity = FALSE;\n+    decoder->is_force_discontinuity = FALSE;\n+    decoder->is_force_output_discontinuity = FALSE;\n@@ -231,1 +231,1 @@\n-    decoder->send_header = FALSE;\n+    decoder->is_send_header = FALSE;\n@@ -242,1 +242,1 @@\n-    decoder->set_caps = TRUE;\n+    decoder->is_set_caps = TRUE;\n@@ -256,2 +256,0 @@\n-    \/\/ No need to free pDecoderBuffer, it will be release when\n-    \/\/ pDecoderOutput is released.\n@@ -259,0 +257,2 @@\n+    \/\/ No need to free pDecoderBuffer, it will be released when\n+    \/\/ pDecoderOutput is released.\n@@ -264,2 +264,0 @@\n-        \/\/ No need to free pColorConvertBuffer, it will be release when\n-        \/\/ pColorConvertOutput is released.\n@@ -267,0 +265,2 @@\n+        \/\/ No need to free pColorConvertBuffer, it will be released when\n+        \/\/ pColorConvertOutput is released.\n@@ -409,1 +409,1 @@\n-        decoder->force_output_discontinuity = TRUE;\n+        decoder->is_force_output_discontinuity = TRUE;\n@@ -532,1 +532,1 @@\n-    if (SUCCEEDED(hr) && decoder->force_discontinuity)\n+    if (SUCCEEDED(hr) && decoder->is_force_discontinuity)\n@@ -535,1 +535,1 @@\n-        decoder->force_discontinuity = FALSE;\n+        decoder->is_force_discontinuity = FALSE;\n@@ -549,1 +549,1 @@\n-    if (SUCCEEDED(hr) && decoder->send_header &&\n+    if (SUCCEEDED(hr) && decoder->is_send_header &&\n@@ -567,1 +567,1 @@\n-    if (SUCCEEDED(hr) && decoder->send_header &&\n+    if (SUCCEEDED(hr) && decoder->is_send_header &&\n@@ -570,1 +570,1 @@\n-        decoder->send_header = FALSE;\n+        decoder->is_send_header = FALSE;\n@@ -1070,1 +1070,1 @@\n-            decoder->set_caps = TRUE; \/\/ Only set caps if resolution changed, so\n+            decoder->is_set_caps = TRUE; \/\/ Only set caps if resolution changed, so\n@@ -1096,1 +1096,1 @@\n-    if (SUCCEEDED(hr) && bInitColorConverter && decoder->set_caps)\n+    if (SUCCEEDED(hr) && bInitColorConverter && decoder->is_set_caps)\n@@ -1132,1 +1132,1 @@\n-    if (SUCCEEDED(hr) && decoder->set_caps)\n+    if (SUCCEEDED(hr) && decoder->is_set_caps)\n@@ -1147,1 +1147,1 @@\n-        decoder->set_caps = FALSE;\n+        decoder->is_set_caps = FALSE;\n@@ -1339,1 +1339,1 @@\n-    if (SUCCEEDED(hr) && decoder->force_output_discontinuity)\n+    if (SUCCEEDED(hr) && decoder->is_force_output_discontinuity)\n@@ -1343,1 +1343,1 @@\n-        decoder->force_output_discontinuity = FALSE;\n+        decoder->is_force_output_discontinuity = FALSE;\n@@ -1550,1 +1550,1 @@\n-        decoder->force_discontinuity = TRUE;\n+        decoder->is_force_discontinuity = TRUE;\n@@ -1575,5 +1575,1 @@\n-\n-            \/\/ Send header after reload\n-            decoder->send_header = TRUE;\n-\n-            for (int i = 0; i < MAX_COLOR_CONVERT; i++)\n+            else\n@@ -1581,1 +1577,4 @@\n-                if (decoder->pColorConvert[i])\n+                \/\/ Send header after reload\n+                decoder->is_send_header = TRUE;\n+\n+                for (int i = 0; i < MAX_COLOR_CONVERT; i++)\n@@ -1583,2 +1582,5 @@\n-                    decoder->pColorConvert[i]->\n-                            ProcessMessage(MFT_MESSAGE_COMMAND_FLUSH, 0);\n+                    if (decoder->pColorConvert[i])\n+                    {\n+                        decoder->pColorConvert[i]->\n+                                ProcessMessage(MFT_MESSAGE_COMMAND_FLUSH, 0);\n+                    }\n@@ -1589,0 +1591,2 @@\n+        \/\/ Even if reload failed with critical error push event to unblock\n+        \/\/ pipeline.\n@@ -1949,1 +1953,1 @@\n-            decoder->send_header = TRUE;\n+            decoder->is_send_header = TRUE;\n","filename":"modules\/javafx.media\/src\/main\/native\/gstreamer\/plugins\/mfwrapper\/mfwrapper.cpp","additions":34,"deletions":30,"binary":false,"changes":64,"status":"modified"},{"patch":"@@ -80,2 +80,2 @@\n-    gboolean force_discontinuity;\n-    gboolean force_output_discontinuity;\n+    gboolean is_force_discontinuity;\n+    gboolean is_force_output_discontinuity;\n@@ -97,1 +97,1 @@\n-    gboolean send_header;\n+    gboolean is_send_header;\n@@ -108,1 +108,1 @@\n-    gboolean set_caps;\n+    gboolean is_set_caps;\n","filename":"modules\/javafx.media\/src\/main\/native\/gstreamer\/plugins\/mfwrapper\/mfwrapper.h","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"}]}