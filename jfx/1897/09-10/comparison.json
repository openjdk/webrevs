{"files":[{"patch":"@@ -221,0 +221,4 @@\n+        OutputRedirect.suppressStderr();\n+        try {\n+            Util.runAndWait(() -> {\n+                tmpScene = new Scene(new Group(), 200, 100);\n@@ -222,5 +226,0 @@\n-        Util.runAndWait(() -> {\n-            tmpScene = new Scene(new Group(), 200, 100);\n-\n-            OutputRedirect.suppressStderr();\n-            try {\n@@ -242,5 +241,2 @@\n-            } finally {\n-                OutputRedirect.checkAndRestoreStderr(ClassCastException.class);\n-            }\n-            assertEquals(1, latch.getCount());\n-        });\n+                assertEquals(1, latch.getCount());\n+            });\n@@ -248,3 +244,6 @@\n-        try {\n-            if (!latch.await(TIMEOUT, TimeUnit.MILLISECONDS)) {\n-                fail(\"Timeout waiting for snapshot callback\");\n+            try {\n+                if (!latch.await(TIMEOUT, TimeUnit.MILLISECONDS)) {\n+                    fail(\"Timeout waiting for snapshot callback\");\n+                }\n+            } catch (InterruptedException ex) {\n+                fail(ex);\n@@ -252,3 +251,0 @@\n-        } catch (InterruptedException ex) {\n-            fail(ex);\n-        }\n@@ -256,1 +252,4 @@\n-        assertEquals(0, latch.getCount());\n+            assertEquals(0, latch.getCount());\n+        } finally {\n+            OutputRedirect.checkAndRestoreStderr(ClassCastException.class);\n+        }\n@@ -264,0 +263,4 @@\n+        OutputRedirect.suppressStderr();\n+        try {\n+            Util.runAndWait(() -> {\n+                tmpScene = new Scene(new Group(), 200, 100);\n@@ -265,6 +268,1 @@\n-        Util.runAndWait(() -> {\n-            tmpScene = new Scene(new Group(), 200, 100);\n-\n-            OutputRedirect.suppressStderr();\n-            try {\n-                Callback cb = (Callback<String, Integer>) param -> {\n+                Callback cb = (Callback<String, Integer>)param -> {\n@@ -278,5 +276,2 @@\n-            } finally {\n-                OutputRedirect.checkAndRestoreStderr(ClassCastException.class);\n-            }\n-            assertEquals(1, latch.getCount());\n-        });\n+                assertEquals(1, latch.getCount());\n+            });\n@@ -284,3 +279,6 @@\n-        try {\n-            if (latch.await(SHORT_TIMEOUT, TimeUnit.MILLISECONDS)) {\n-                fail(\"Snapshot callback unexpectedly called\");\n+            try {\n+                if (latch.await(SHORT_TIMEOUT, TimeUnit.MILLISECONDS)) {\n+                    fail(\"Snapshot callback unexpectedly called\");\n+                }\n+            } catch (InterruptedException ex) {\n+                fail(ex);\n@@ -288,3 +286,0 @@\n-        } catch (InterruptedException ex) {\n-            fail(ex);\n-        }\n@@ -292,1 +287,4 @@\n-        assertEquals(1, latch.getCount());\n+            assertEquals(1, latch.getCount());\n+        } finally {\n+            OutputRedirect.checkAndRestoreStderr(ClassCastException.class);\n+        }\n@@ -352,0 +350,4 @@\n+        OutputRedirect.suppressStderr();\n+        try {\n+            Util.runAndWait(() -> {\n+                tmpNode = new Rectangle(10, 10);\n@@ -353,5 +355,0 @@\n-        Util.runAndWait(() -> {\n-            tmpNode = new Rectangle(10, 10);\n-\n-            OutputRedirect.suppressStderr();\n-            try {\n@@ -373,5 +370,2 @@\n-            } finally {\n-                OutputRedirect.checkAndRestoreStderr(ClassCastException.class);\n-            }\n-            assertEquals(1, latch.getCount());\n-        });\n+                assertEquals(1, latch.getCount());\n+            });\n@@ -379,3 +373,6 @@\n-        try {\n-            if (!latch.await(TIMEOUT, TimeUnit.MILLISECONDS)) {\n-                fail(\"Timeout waiting for snapshot callback\");\n+            try {\n+                if (!latch.await(TIMEOUT, TimeUnit.MILLISECONDS)) {\n+                    fail(\"Timeout waiting for snapshot callback\");\n+                }\n+            } catch (InterruptedException ex) {\n+                fail(ex);\n@@ -383,3 +380,0 @@\n-        } catch (InterruptedException ex) {\n-            fail(ex);\n-        }\n@@ -387,1 +381,4 @@\n-        assertEquals(0, latch.getCount());\n+            assertEquals(0, latch.getCount());\n+        } finally {\n+            OutputRedirect.checkAndRestoreStderr(ClassCastException.class);\n+        }\n@@ -395,0 +392,4 @@\n+        OutputRedirect.suppressStderr();\n+        try {\n+            Util.runAndWait(() -> {\n+                tmpNode = new Rectangle(10, 10);\n@@ -396,6 +397,1 @@\n-        Util.runAndWait(() -> {\n-            tmpNode = new Rectangle(10, 10);\n-\n-            OutputRedirect.suppressStderr();\n-            try {\n-                Callback cb = (Callback<String, Integer>) param -> {\n+                Callback cb = (Callback<String, Integer>)param -> {\n@@ -409,5 +405,2 @@\n-            } finally {\n-                OutputRedirect.checkAndRestoreStderr(ClassCastException.class);\n-            }\n-            assertEquals(1, latch.getCount());\n-        });\n+                assertEquals(1, latch.getCount());\n+            });\n@@ -415,3 +408,6 @@\n-        try {\n-            if (latch.await(SHORT_TIMEOUT, TimeUnit.MILLISECONDS)) {\n-                fail(\"Snapshot callback unexpectedly called\");\n+            try {\n+                if (latch.await(SHORT_TIMEOUT, TimeUnit.MILLISECONDS)) {\n+                    fail(\"Snapshot callback unexpectedly called\");\n+                }\n+            } catch (InterruptedException ex) {\n+                fail(ex);\n@@ -419,3 +415,0 @@\n-        } catch (InterruptedException ex) {\n-            fail(ex);\n-        }\n@@ -423,1 +416,4 @@\n-        assertEquals(1, latch.getCount());\n+            assertEquals(1, latch.getCount());\n+        } finally {\n+            OutputRedirect.checkAndRestoreStderr(ClassCastException.class);\n+        }\n","filename":"tests\/system\/src\/test\/java\/test\/javafx\/scene\/Snapshot1Test.java","additions":66,"deletions":70,"binary":false,"changes":136,"status":"modified"}]}