{"files":[{"patch":"@@ -151,0 +151,5 @@\n+    public static double getContextMenuRowHeight(ContextMenu menu) {\n+        ContextMenuContent content = getMenuContent(menu);\n+        return content.getItemsContainer().getChildren().get(0).prefHeight(-1);\n+    }\n+\n","filename":"modules\/javafx.controls\/src\/shims\/java\/com\/sun\/javafx\/scene\/control\/ContextMenuContentShim.java","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -40,1 +40,0 @@\n-import javafx.scene.control.skin.ContextMenuSkin;\n@@ -46,0 +45,1 @@\n+import javafx.stage.Screen;\n@@ -100,0 +100,2 @@\n+            scrollLatch.countDown();\n+        });\n@@ -101,1 +103,2 @@\n-            Util.sleep(400); \/\/ Wait for up arrow to get loaded in UI\n+        Util.waitForLatch(scrollLatch, 5, \"Timeout waiting for choicebox to be hidden.\");\n+        Thread.sleep(400); \/\/ Wait for up arrow to get loaded in UI\n@@ -103,0 +106,1 @@\n+        Util.runAndWait(() -> {\n@@ -133,0 +137,2 @@\n+        Thread.sleep(400); \/\/ Small delay to avoid test failure due to slow UI loading.\n+\n@@ -135,1 +141,4 @@\n-        scrollChoiceBox(75);\n+\n+        double rowHeight = ContextMenuContentShim.getContextMenuRowHeight(popup);\n+        double screenHeight = Screen.getPrimary().getBounds().getHeight();\n+        scrollChoiceBox((int) (screenHeight \/ rowHeight));\n@@ -138,1 +147,0 @@\n-        Thread.sleep(400); \/\/ Small delay to avoid test failure due to slow UI loading.\n","filename":"tests\/system\/src\/test\/java\/test\/robot\/javafx\/scene\/ChoiceBoxScrollUpOnCollectionChangeTest.java","additions":12,"deletions":4,"binary":false,"changes":16,"status":"modified"}]}