{"files":[{"patch":"@@ -207,11 +207,0 @@\n-\n-    \/** returns the number of visible rows in Tree\/TableView *\/\n-    public static int getItemCount(TableViewSkinBase<?,?,?,?,?> skin) {\n-        Object control = skin.getSkinnable();\n-        if (control instanceof TableView table) {\n-            return table.getItems().size();\n-        } else if (control instanceof TreeTableView tree) {\n-            return tree.getExpandedItemCount();\n-        }\n-        return 0;\n-    }\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/control\/skin\/TableSkinUtils.java","additions":0,"deletions":11,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -909,1 +909,1 @@\n-        if ((contentWidth <= 0) || (TableSkinUtils.getItemCount(this) == 0)) {\n+        if ((contentWidth <= 0) || (getItemCount() == 0)) {\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/control\/skin\/TableViewSkinBase.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -28,0 +28,1 @@\n+import static org.junit.jupiter.api.Assertions.assertDoesNotThrow;\n@@ -6067,0 +6068,15 @@\n+\n+    @Test\n+    public void testTableItemsNullShouldNotThrow() {\n+        final TableColumn<String, String> c = new TableColumn<>(\"C\");\n+        c.setCellValueFactory(value -> new SimpleStringProperty(value.getValue()));\n+        table.getColumns().add(c);\n+\n+        table.getItems().addAll(\"1\", \"2\", \"3\");\n+\n+        stageLoader = new StageLoader(table);\n+        table.setItems(null);\n+\n+        assertDoesNotThrow(() -> Toolkit.getToolkit().firePulse());\n+\n+    }\n","filename":"modules\/javafx.controls\/src\/test\/java\/test\/javafx\/scene\/control\/TableViewTest.java","additions":16,"deletions":0,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -39,0 +39,1 @@\n+import static org.junit.jupiter.api.Assertions.assertDoesNotThrow;\n@@ -48,0 +49,2 @@\n+\n+import javafx.scene.control.TableColumn;\n@@ -7253,0 +7256,22 @@\n+\n+    @Test\n+    public void testTableItemsNullShouldNotThrow() {\n+        TreeTableColumn<String, String> c = new TreeTableColumn<>(\"C\");\n+        c.setCellValueFactory(value -> new SimpleStringProperty(value.getValue().getValue()));\n+        treeTableView.getColumns().add(c);\n+\n+        treeTableView.setRoot(new TreeItem<String>(\"Root\"));\n+        if(treeTableView.getRoot() != null) {\n+            treeTableView.getRoot().setExpanded(true);\n+        }\n+        for (int i = 0; i < 4; i++) {\n+            TreeItem<String> parent = new TreeItem<String>(\"item - \" + i);\n+            treeTableView.getRoot().getChildren().add(parent);\n+        }\n+\n+        stageLoader = new StageLoader(treeTableView);\n+        treeTableView.setRoot(null);\n+\n+        assertDoesNotThrow(() -> Toolkit.getToolkit().firePulse());\n+\n+    }\n","filename":"modules\/javafx.controls\/src\/test\/java\/test\/javafx\/scene\/control\/TreeTableViewTest.java","additions":25,"deletions":0,"binary":false,"changes":25,"status":"modified"}]}