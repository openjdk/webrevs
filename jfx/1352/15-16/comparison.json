{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2023, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -43,2 +43,0 @@\n-        registerExceptionHandler();\n-\n","filename":"tests\/system\/src\/test\/java\/test\/com\/sun\/javafx\/animation\/AnimationTest.java","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2023, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -41,2 +41,0 @@\n-        registerExceptionHandler();\n-\n","filename":"tests\/system\/src\/test\/java\/test\/com\/sun\/javafx\/animation\/AnimationTimerTest.java","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -84,1 +84,3 @@\n-        Platform.runLater(() -> registerExceptionHandler());\n+        Platform.runLater(() -> Thread.currentThread().setUncaughtExceptionHandler(this::handleThrowable));\n+\n+        Runnable wrappedRunnable = wrap(runnable);\n@@ -87,1 +89,1 @@\n-            executor.submit(runnable);\n+            executor.submit(wrappedRunnable);\n@@ -97,7 +99,15 @@\n-    protected void registerExceptionHandler() {\n-        Thread.currentThread().setUncaughtExceptionHandler((t, e) -> {\n-            thread.set(t);\n-            throwable.set(e);\n-            failed.set(true);\n-            waiter.countDown();\n-        });\n+    private Runnable wrap(Runnable runnable) {\n+        return () -> {\n+            try {\n+                runnable.run();\n+            } catch (Throwable e) {\n+                handleThrowable(Thread.currentThread(), e);\n+            }\n+        };\n+    }\n+\n+    private void handleThrowable(Thread t, Throwable e) {\n+        thread.set(t);\n+        throwable.set(e);\n+        failed.set(true);\n+        waiter.countDown();\n","filename":"tests\/system\/src\/test\/java\/test\/com\/sun\/javafx\/animation\/SynchronizationTest.java","additions":19,"deletions":9,"binary":false,"changes":28,"status":"modified"}]}