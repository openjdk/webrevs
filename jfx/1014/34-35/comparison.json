{"files":[{"patch":"@@ -34,9 +34,2 @@\n-        if (gtk_style_lookup_color(style, lookupColorName, &color)) {\n-            env->CallObjectMethod(prefs, jMapPut,\n-                env->NewStringUTF(prefColorName),\n-                env->CallStaticObjectMethod(\n-                    jColorCls, jColorRgb,\n-                    (int)(CLAMP((double)color.red \/ 65535.0, 0.0, 1.0) * 255.0),\n-                    (int)(CLAMP((double)color.green \/ 65535.0, 0.0, 1.0) * 255.0),\n-                    (int)(CLAMP((double)color.blue \/ 65535.0, 0.0, 1.0) * 255.0),\n-                    1.0));\n+        if (!gtk_style_lookup_color(style, lookupColorName, &color)) {\n+            return;\n@@ -45,0 +38,12 @@\n+        jobject prefKey = env->NewStringUTF(prefColorName);\n+        CHECK_JNI_EXCEPTION(env);\n+\n+        jobject prefValue = env->CallStaticObjectMethod(\n+            jColorCls, jColorRgb,\n+            (int)(CLAMP((double)color.red \/ 65535.0, 0.0, 1.0) * 255.0),\n+            (int)(CLAMP((double)color.green \/ 65535.0, 0.0, 1.0) * 255.0),\n+            (int)(CLAMP((double)color.blue \/ 65535.0, 0.0, 1.0) * 255.0),\n+            1.0);\n+        CHECK_JNI_EXCEPTION(env);\n+\n+        env->CallObjectMethod(prefs, jMapPut, prefKey, prefValue);\n@@ -49,3 +54,8 @@\n-        env->CallObjectMethod(preferences, jMapPut,\n-            env->NewStringUTF(name),\n-            env->NewStringUTF(value));\n+        jobject prefKey = env->NewStringUTF(name);\n+        CHECK_JNI_EXCEPTION(env);\n+\n+        jobject prefValue = env->NewStringUTF(value);\n+        CHECK_JNI_EXCEPTION(env);\n+\n+        env->CallObjectMethod(preferences, jMapPut, prefKey, prefValue);\n+        CHECK_JNI_EXCEPTION(env);\n@@ -120,0 +130,2 @@\n+            EXCEPTION_OCCURED(env);\n+\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/gtk\/PlatformSupport.cpp","additions":24,"deletions":12,"binary":false,"changes":36,"status":"modified"}]}