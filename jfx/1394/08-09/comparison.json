{"files":[{"patch":"@@ -63,0 +63,3 @@\n+import java.nio.charset.StandardCharsets;\n+import java.util.Base64;\n+\n@@ -655,1 +658,0 @@\n-        \/\/ Style: .tooltip { -fx-show-delay: 200ms; }\n@@ -657,1 +659,1 @@\n-                .add(\"data:base64,LnRvb2x0aXAgeyAtZngtc2hvdy1kZWxheTogMjAwbXM7IH0=\");\n+                .setAll(\"data:base64,\" + toBase64(\".tooltip { -fx-show-delay: 200ms; }\"));\n@@ -672,1 +674,0 @@\n-        \/\/ Style: .tooltip { -fx-show-delay: 200ms; }\n@@ -674,1 +675,1 @@\n-                .add(\"data:base64,LnRvb2x0aXAgeyAtZngtc2hvdy1kZWxheTogMjAwbXM7IH0=\");\n+                .setAll(\"data:base64,\" + toBase64(\".tooltip { -fx-show-delay: 200ms; }\"));\n@@ -683,1 +684,0 @@\n-        \/\/ .tooltip { -fx-show-delay: 450ms; }\n@@ -685,1 +685,1 @@\n-                .setAll(\"data:base64,LnRvb2x0aXAgeyAtZngtc2hvdy1kZWxheTogNDUwbXM7IH0=\");\n+                .setAll(\"data:base64,\" + toBase64(\".tooltip { -fx-show-delay: 450ms; }\"));\n@@ -709,0 +709,4 @@\n+    private String toBase64(String css) {\n+        return Base64.getUrlEncoder().encodeToString(css.getBytes(StandardCharsets.UTF_8));\n+    }\n+\n","filename":"modules\/javafx.controls\/src\/test\/java\/test\/javafx\/scene\/control\/TooltipTest.java","additions":10,"deletions":6,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -48,1 +48,0 @@\n-import java.util.concurrent.atomic.AtomicLong;\n@@ -56,0 +55,2 @@\n+    static volatile long tooltipStartTime;\n+    static volatile long tooltipShownTime;\n@@ -64,4 +65,0 @@\n-        assertTooltipShowDelay(tooltipShowTime, expectedTime, 50);\n-    }\n-\n-    private static void assertTooltipShowDelay(long tooltipShowTime, long expectedTime, long maximumDifference) {\n@@ -69,1 +66,1 @@\n-        long maximumTime = expectedTime + maximumDifference;\n+        long maximumTime = expectedTime + 80;\n@@ -105,5 +102,1 @@\n-        \/\/ Since the stylesheet needs to be processed we need a bigger timeout here.\n-        long expectedTime = 30;\n-        long maximumTime = expectedTime + 100;\n-\n-        assertTooltipShowDelay(tooltipShowTime, expectedTime, maximumTime);\n+        assertTooltipShowDelay(tooltipShowTime, 30);\n@@ -122,1 +115,1 @@\n-        assertTooltipShowDelay(tooltipShowTime, 30, 100);\n+        assertTooltipShowDelay(tooltipShowTime, 30);\n@@ -130,1 +123,1 @@\n-        assertTooltipShowDelay(tooltipShowTime, 200, 100);\n+        assertTooltipShowDelay(tooltipShowTime, 200);\n@@ -235,1 +228,0 @@\n-        AtomicLong time = new AtomicLong();\n@@ -241,1 +233,1 @@\n-            time.set(System.currentTimeMillis());\n+            tooltipStartTime = System.currentTimeMillis();\n@@ -246,1 +238,1 @@\n-        long finalTime = System.currentTimeMillis() - time.get();\n+        long finalTime = tooltipShownTime - tooltipStartTime;\n@@ -271,0 +263,1 @@\n+                    tooltipShownTime = System.currentTimeMillis();\n","filename":"tests\/system\/src\/test\/java\/test\/robot\/javafx\/scene\/TooltipTest.java","additions":9,"deletions":16,"binary":false,"changes":25,"status":"modified"}]}