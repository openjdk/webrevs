{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2010, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -216,12 +216,0 @@\n-        @Override\n-        public void set(Skin<?> v) {\n-\n-            if (v == null\n-                    ? oldValue == null\n-                    : oldValue != null && v.getClass().equals(oldValue.getClass()))\n-                return;\n-\n-            super.set(v);\n-\n-        }\n-\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/control\/PopupControl.java","additions":1,"deletions":13,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2010, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -40,0 +40,2 @@\n+import java.lang.ref.WeakReference;\n+\n@@ -41,0 +43,1 @@\n+import static test.com.sun.javafx.scene.control.infrastructure.ControlSkinFactory.attemptGC;\n@@ -653,0 +656,25 @@\n+    \/**\n+     * Set a skin -> set another instance of the same skin (class).\n+     *\/\n+    @Test\n+    public void testMemoryLeakSameSkinClass() {\n+        popup.setSkin(new PopupControlSkin<>());\n+        Skin<?> skin = popup.getSkin();\n+        popup.setSkin(new PopupControlSkin<>());\n+\n+        WeakReference<?> weakRef = new WeakReference<>(skin);\n+        skin = null;\n+        attemptGC(weakRef);\n+        assertNull(\"Unused Skin must be gc'ed\", weakRef.get());\n+    }\n+\n+    @Test\n+    public void testSetSkinOfSameClass() {\n+        popup.setSkin(new PopupControlSkin<>());\n+        Skin<?> oldSkin = popup.getSkin();\n+        popup.setSkin(new PopupControlSkin<>());\n+        Skin<?> newSkin = popup.getSkin();\n+\n+        assertNotEquals(\"New skin was not set\", oldSkin, newSkin);\n+    }\n+\n","filename":"modules\/javafx.controls\/src\/test\/java\/test\/javafx\/scene\/control\/PopupControlTest.java","additions":29,"deletions":1,"binary":false,"changes":30,"status":"modified"}]}