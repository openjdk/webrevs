{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2023, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2023, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -106,0 +106,5 @@\n+    [NSApp addObserver:self\n+           forKeyPath:@\"effectiveAppearance\"\n+           options:0\n+           context:nil];\n+\n@@ -108,1 +113,1 @@\n-        selector:@selector(platformPreferencesDidChange)\n+        selector:@selector(updatePreferences)\n@@ -112,7 +117,1 @@\n-    [[NSDistributedNotificationCenter defaultCenter]\n-        addObserver:self\n-        selector:@selector(platformPreferencesDidChange)\n-        name:@\"AppleInterfaceThemeChangedNotification\"\n-        object:nil];\n-\n-    [[NSDistributedNotificationCenter defaultCenter]\n+    [[NSNotificationCenter defaultCenter]\n@@ -120,2 +119,2 @@\n-        selector:@selector(platformPreferencesDidChange)\n-        name:@\"AppleColorPreferencesChangedNotification\"\n+        selector:@selector(updatePreferences)\n+        name:NSSystemColorsDidChangeNotification\n@@ -126,1 +125,1 @@\n-        selector:@selector(platformPreferencesDidChange)\n+        selector:@selector(updatePreferences)\n@@ -144,0 +143,1 @@\n+    [NSApp removeObserver:self forKeyPath:@\"effectiveAppearance\"];\n@@ -145,1 +145,0 @@\n-    [[NSDistributedNotificationCenter defaultCenter] removeObserver:self];\n@@ -150,13 +149,2 @@\n-- (void)platformPreferencesDidChange {\n-    \/\/ Some dynamic colors like NSColor.controlAccentColor don't seem to be reliably updated\n-    \/\/ at the exact moment AppleColorPreferencesChangedNotification is received.\n-    \/\/ As a workaround, we wait for a short period of time (one second seems sufficient) before\n-    \/\/ we query the updated platform preferences.\n-\n-    [NSObject cancelPreviousPerformRequestsWithTarget:self\n-              selector:@selector(updatePreferences)\n-              object:nil];\n-\n-    [self performSelector:@selector(updatePreferences)\n-          withObject:nil\n-          afterDelay:1.0];\n+- (void)observeValueForKeyPath:(NSString*)keyPath ofObject:(id)object change:(NSDictionary*)change context:(void*)c {\n+    [self updatePreferences];\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/PlatformSupport.m","additions":14,"deletions":26,"binary":false,"changes":40,"status":"modified"}]}