{"files":[{"patch":"@@ -427,0 +427,2 @@\n+            double graphicHeight = g.prefHeight(-1);\n+            double textHeight = text.prefHeight(-1);\n@@ -429,3 +431,4 @@\n-                h = g.prefHeight(-1) + labeled.getGraphicTextGap() + textBaselineOffset;\n-            } else if (contentDisplay == ContentDisplay.LEFT || contentDisplay == RIGHT) {\n-                h = textBaselineOffset + (g.prefHeight(-1) - text.prefHeight(-1)) \/ 2;\n+                h = graphicHeight + labeled.getGraphicTextGap() + textBaselineOffset;\n+            } else if ((contentDisplay == ContentDisplay.LEFT || contentDisplay == RIGHT)\n+                        && (graphicHeight > textHeight)) {\n+                h = textBaselineOffset + (graphicHeight - textHeight) \/ 2;\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/control\/skin\/LabeledSkinBase.java","additions":6,"deletions":3,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -32,0 +32,1 @@\n+import test.com.sun.javafx.scene.control.infrastructure.StageLoader;\n@@ -44,0 +45,1 @@\n+import javafx.scene.layout.HBox;\n@@ -2094,0 +2096,41 @@\n+    \/*********************************************************************\n+     *\n+     * Tests for bug reports                                             *\n+     *\n+     ********************************************************************\/\n+\n+    \/\/Test for JDK-8172849\n+    @Test\n+    public void testBaselineAlignmentWhenTextIsSetAndGraphicIsSet() {\n+        Label label1 = new Label(\"Label1\");\n+        LabelSkinMock label1Skin = new LabelSkinMock(label1);\n+        label1.setSkin(label1Skin);\n+\n+        Label label2 = new Label(\"Label2\");\n+        LabelSkinMock label2Skin = new LabelSkinMock(label2);\n+        label2.setSkin(label2Skin);\n+\n+        Rectangle r = new Rectangle(15, 5);\n+        label2.setGraphic(r);\n+\n+        Toolkit tk = Toolkit.getToolkit();\n+        HBox hBox = new HBox(label1, label2);\n+        hBox.setAlignment(Pos.BASELINE_LEFT);\n+        StageLoader sl = new StageLoader(hBox);\n+        tk.firePulse();\n+\n+        double label2Height = label2.getHeight();\n+        assertEquals(label1.getBaselineOffset(), label2.getBaselineOffset(), 0);\n+        r.setHeight(50);\n+        tk.firePulse();\n+        assertEquals(label1.getBaselineOffset(), (label2.getBaselineOffset() - (r.getHeight()-label2Height)\/2), 0);\n+        sl.dispose();\n+    }\n+\n+\n+    \/********************************************************************************\n+     *                                                                              *\n+     *                             Helper classes                                   *\n+     *                                                                              *\n+     *******************************************************************************\/\n+\n","filename":"modules\/javafx.controls\/src\/test\/java\/test\/javafx\/scene\/control\/skin\/LabelSkinTest.java","additions":43,"deletions":0,"binary":false,"changes":43,"status":"modified"}]}