{"files":[{"patch":"@@ -46,0 +46,2 @@\n+import java.util.concurrent.atomic.AtomicInteger;\n+import java.util.concurrent.atomic.AtomicReference;\n@@ -63,1 +65,1 @@\n-            Point2D[] location = { new Point2D(0.0, 0.0) };\n+            AtomicReference<Point2D> location = new AtomicReference<>(new Point2D(0.0, 0.0));\n@@ -66,1 +68,1 @@\n-                    location[0] = fxRequests.getTextLocation(offset.getInsertionIndex());\n+                    location.set(fxRequests.getTextLocation(offset.getInsertionIndex()));\n@@ -69,1 +71,1 @@\n-            return new Rectangle((int)location[0].getX(), (int)location[0].getY(), 0, 0);\n+            return new Rectangle((int)location.get().getX(), (int)location.get().getY(), 0, 0);\n@@ -74,1 +76,1 @@\n-            int[] offset = { 0 };\n+            AtomicInteger offset = new AtomicInteger(0);\n@@ -77,1 +79,1 @@\n-                    offset[0] = fxRequests.getLocationOffset(x, y);\n+                    offset.set(fxRequests.getLocationOffset(x, y));\n@@ -80,1 +82,1 @@\n-            return TextHitInfo.afterOffset(offset[0]);\n+            return TextHitInfo.afterOffset(offset.get());\n@@ -85,1 +87,1 @@\n-            int[] offset = { 0 };\n+            AtomicInteger offset = new AtomicInteger(0);\n@@ -88,1 +90,1 @@\n-                    offset[0] = ((ExtendedInputMethodRequests)fxRequests).getInsertPositionOffset();\n+                    offset.set(((ExtendedInputMethodRequests)fxRequests).getInsertPositionOffset());\n@@ -91,1 +93,1 @@\n-            return offset[0];\n+            return offset.get();\n@@ -96,1 +98,1 @@\n-            String[] comitted = { null };\n+            AtomicReference<String> committed = new AtomicReference<>(null);\n@@ -99,1 +101,1 @@\n-                    comitted[0] = ((ExtendedInputMethodRequests)fxRequests).getCommittedText(beginIndex, endIndex);\n+                    committed.set(((ExtendedInputMethodRequests)fxRequests).getCommittedText(beginIndex, endIndex));\n@@ -102,2 +104,3 @@\n-            if (comitted[0] == null) comitted[0] = \"\";\n-            return new AttributedString(comitted[0]).getIterator();\n+            String text = committed.get();\n+            if (text == null) text = \"\";\n+            return new AttributedString(text).getIterator();\n@@ -108,1 +111,1 @@\n-            int[] length = { 0 };\n+            AtomicInteger length = new AtomicInteger(0);\n@@ -111,1 +114,1 @@\n-                    length[0] = ((ExtendedInputMethodRequests)fxRequests).getCommittedTextLength();\n+                    length.set(((ExtendedInputMethodRequests)fxRequests).getCommittedTextLength());\n@@ -114,1 +117,1 @@\n-            return length[0];\n+            return length.get();\n@@ -125,1 +128,1 @@\n-            String[] selected = { null };\n+            AtomicReference<String> selected = new AtomicReference<>(null);\n@@ -128,1 +131,1 @@\n-                    selected[0] = fxRequests.getSelectedText();\n+                    selected.set(fxRequests.getSelectedText());\n@@ -131,2 +134,3 @@\n-            if (selected[0] == null) selected[0] = \"\";\n-            return new AttributedString(selected[0]).getIterator();\n+            String text = selected.get();\n+            if (text == null) text = \"\";\n+            return new AttributedString(text).getIterator();\n","filename":"modules\/javafx.swing\/src\/main\/java\/javafx\/embed\/swing\/InputMethodSupport.java","additions":24,"deletions":20,"binary":false,"changes":44,"status":"modified"}]}