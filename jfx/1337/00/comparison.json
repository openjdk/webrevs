{"files":[{"patch":"@@ -28,0 +28,1 @@\n+import com.sun.javafx.application.PlatformImpl;\n@@ -30,0 +31,1 @@\n+import javafx.application.Platform;\n@@ -59,0 +61,4 @@\n+        private Point2D pointValue;\n+        private int     intValue;\n+        private String  stringValue;\n+\n@@ -61,2 +67,7 @@\n-            Point2D result = fxRequests.getTextLocation(offset.getInsertionIndex());\n-            return new Rectangle((int)result.getX(), (int)result.getY(), 0, 0);\n+            pointValue = new Point2D(0.0, 0.0);\n+            if (fxRequests != null) {\n+                PlatformImpl.runAndWait(() -> {\n+                    pointValue = fxRequests.getTextLocation(offset.getInsertionIndex());\n+                });\n+            }\n+            return new Rectangle((int)pointValue.getX(), (int)pointValue.getY(), 0, 0);\n@@ -67,2 +78,7 @@\n-            int result = fxRequests.getLocationOffset(x, y);\n-            return TextHitInfo.afterOffset(result);\n+            intValue = 0;\n+            if (fxRequests != null) {\n+                PlatformImpl.runAndWait(() -> {\n+                    intValue = fxRequests.getLocationOffset(x, y);\n+                });\n+            }\n+            return TextHitInfo.afterOffset(intValue);\n@@ -73,0 +89,1 @@\n+            intValue = 0;\n@@ -74,1 +91,3 @@\n-                return ((ExtendedInputMethodRequests)fxRequests).getInsertPositionOffset();\n+                PlatformImpl.runAndWait(() -> {\n+                    intValue = ((ExtendedInputMethodRequests)fxRequests).getInsertPositionOffset();\n+                });\n@@ -76,1 +95,1 @@\n-            return 0;\n+            return intValue;\n@@ -81,1 +100,1 @@\n-            String result = null;\n+            stringValue = null;\n@@ -83,1 +102,3 @@\n-                result = ((ExtendedInputMethodRequests)fxRequests).getCommittedText(beginIndex, endIndex);\n+                PlatformImpl.runAndWait(() -> {\n+                    stringValue = ((ExtendedInputMethodRequests)fxRequests).getCommittedText(beginIndex, endIndex);\n+                });\n@@ -85,2 +106,2 @@\n-            if (result == null) result = \"\";\n-            return new AttributedString(result).getIterator();\n+            if (stringValue == null) stringValue = \"\";\n+            return new AttributedString(stringValue).getIterator();\n@@ -91,0 +112,1 @@\n+            intValue = 0;\n@@ -92,1 +114,3 @@\n-                return ((ExtendedInputMethodRequests)fxRequests).getCommittedTextLength();\n+                PlatformImpl.runAndWait(() -> {\n+                    intValue = ((ExtendedInputMethodRequests)fxRequests).getCommittedTextLength();\n+                });\n@@ -94,1 +118,1 @@\n-            return 0;\n+            return intValue;\n@@ -105,3 +129,8 @@\n-            String text = fxRequests.getSelectedText();\n-            if (text == null) text = \"\";\n-            return new AttributedString(text).getIterator();\n+            stringValue = null;\n+            if (fxRequests != null) {\n+                PlatformImpl.runAndWait(() -> {\n+                    stringValue = fxRequests.getSelectedText();\n+                });\n+            }\n+            if (stringValue == null) stringValue = \"\";\n+            return new AttributedString(stringValue).getIterator();\n","filename":"modules\/javafx.swing\/src\/main\/java\/javafx\/embed\/swing\/InputMethodSupport.java","additions":44,"deletions":15,"binary":false,"changes":59,"status":"modified"},{"patch":"@@ -959,1 +959,1 @@\n-            return null;\n+            return new InputMethodSupport.InputMethodRequestsAdapter(null);\n","filename":"modules\/javafx.swing\/src\/main\/java\/javafx\/embed\/swing\/JFXPanel.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}