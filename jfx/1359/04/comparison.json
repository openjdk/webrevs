{"files":[{"patch":"@@ -0,0 +1,79 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package com.sun.javafx;\n+\n+import com.sun.javafx.runtime.VersionInfo;\n+import java.util.HashSet;\n+import java.util.Set;\n+\n+\/**\n+ * Using a preview feature requires an opt-in from application developers by specifying the\n+ * {@code javafx.enablePreview=true} system property. This class verifies that the application\n+ * has opted into preview features.\n+ *\/\n+public enum PreviewFeature {\n+\n+    \/\/ Add preview feature constants here:\n+    \/\/ TEST_FEATURE(\"Test Feature\")\n+    ;\n+\n+    PreviewFeature(String featureName) {\n+        this.featureName = featureName;\n+    }\n+\n+    private final String featureName;\n+\n+    private static final String ENABLE_PREVIEW_PROPERTY = \"javafx.enablePreview\";\n+    private static final String SUPPRESS_WARNING_PROPERTY = \"javafx.suppressPreviewWarning\";\n+\n+    private static final boolean enabled = Boolean.getBoolean(ENABLE_PREVIEW_PROPERTY);\n+    private static final boolean suppressWarning = Boolean.getBoolean(SUPPRESS_WARNING_PROPERTY);\n+    private static final Set<PreviewFeature> enabledFeatures = new HashSet<>();\n+\n+    \/**\n+     * Verifies that preview features are enabled, and throws an exception otherwise.\n+     * <p>\n+     * Unless suppressed with the {@code javafx.suppressPreviewBanner=true} system property, this method\n+     * prints a one-time warning to the error output stream for every feature for which it is called.\n+     *\n+     * @throws RuntimeException if preview features are not enabled\n+     *\/\n+    public void checkEnabled() {\n+        if (!enabled) {\n+            throw new RuntimeException(\"\"\"\n+                %s is a preview feature of JavaFX %s.\n+                Preview features may be removed in a future release, or upgraded to permanent features of JavaFX.\n+                Programs can only use preview features when the following system property is set: -D%s=true\n+                \"\"\".formatted(featureName, VersionInfo.getVersion(), ENABLE_PREVIEW_PROPERTY));\n+        } else if (!suppressWarning && enabledFeatures.add(this)) {\n+            System.err.printf(\"\"\"\n+                Note: This program uses the following preview feature of JavaFX %s: %s\n+                      Preview features may be removed in a future release, or upgraded to permanent features of JavaFX.\n+                      This warning can be disabled with the following system property: -D%s=true\n+                \"\"\", VersionInfo.getVersion(), featureName, SUPPRESS_WARNING_PROPERTY);\n+        }\n+    }\n+}\n","filename":"modules\/javafx.base\/src\/main\/java\/com\/sun\/javafx\/PreviewFeature.java","additions":79,"deletions":0,"binary":false,"changes":79,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2010, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,0 +29,1 @@\n+import com.sun.javafx.PreviewFeature;\n@@ -30,0 +31,1 @@\n+import com.sun.javafx.util.Utils;\n@@ -63,0 +65,3 @@\n+\n+        \/\/ Initialize the PreviewFeature class to ensure that the corresponding system property is read early.\n+        Utils.forceInit(PreviewFeature.class);\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/application\/LauncherImpl.java","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2010, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,0 +29,1 @@\n+import com.sun.javafx.PreviewFeature;\n@@ -38,0 +39,1 @@\n+import com.sun.javafx.util.Utils;\n@@ -65,0 +67,3 @@\n+\n+        \/\/ Initialize the PreviewFeature class to ensure that the corresponding system property is read early.\n+        Utils.forceInit(PreviewFeature.class);\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/application\/PlatformImpl.java","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"}]}