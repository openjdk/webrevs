{"files":[{"patch":"@@ -149,2 +149,1 @@\n-                    }\n-                    else if (eventType.equals(TreeItem.<T>childrenModificationEvent())) {\n+                    } else if (eventType.equals(TreeItem.<T>childrenModificationEvent())) {\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/control\/skin\/TreeTableViewSkin.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -6442,0 +6442,4 @@\n+    \/**\n+     * Reparenting a TreeItem must update its indentation in the TreeTableView.\n+     * See also: <a href=\"https:\/\/bugs.openjdk.org\/browse\/JDK-8356770\">JDK-8356770<\/a>\n+     *\/\n@@ -6443,1 +6447,1 @@\n-    void test_jdk_8356770_reparentingItem() {\n+    void testIndentationUpdateAfterReparenting() {\n@@ -6468,1 +6472,0 @@\n-        Toolkit.getToolkit().firePulse();\n@@ -6471,3 +6474,1 @@\n-        TreeTableRow<String> rowBefore = findRow(table, \"item B\");\n-        assertNotNull(rowBefore, \"item B row should not be null\");\n-        double xBefore = disclosureX(rowBefore);\n+        double xBefore = disclosureIndent(table,4);\n@@ -6480,3 +6481,1 @@\n-        TreeTableRow<String> rowAfter = findRow(table, \"item B\");\n-        assertNotNull(rowAfter, \"item B row should not be null\");\n-        double xAfter = disclosureX(rowAfter);\n+        double xAfter = disclosureIndent(table,4);\n@@ -6488,15 +6487,3 @@\n-    private static TreeTableRow<String> findRow(TreeTableView<String> table, String value) {\n-        for (Node n : table.lookupAll(\".tree-table-row-cell\")) {\n-            if (n instanceof TreeTableRow<?>) {\n-                TreeTableRow<String> row = (TreeTableRow<String>) n;\n-                TreeItem<String> ti = row.getTreeItem();\n-                if (ti != null && value.equals(ti.getValue())) {\n-                    return row;\n-                }\n-            }\n-        }\n-        return null;\n-    }\n-\n-    private static double disclosureX(TreeTableRow<String> row) {\n-        Node disclosureNode = row.lookup(\".tree-disclosure-node\");\n+    private double disclosureIndent(TreeTableView<String> table, int index) {\n+        TreeTableRow<String> row = (TreeTableRow<String>) VirtualFlowTestUtils.getVirtualFlow(table).getVisibleCell(index);\n+        Node disclosureNode = row.getDisclosureNode();\n","filename":"modules\/javafx.controls\/src\/test\/java\/test\/javafx\/scene\/control\/TreeTableViewTest.java","additions":10,"deletions":23,"binary":false,"changes":33,"status":"modified"}]}