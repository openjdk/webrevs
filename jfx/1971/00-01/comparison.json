{"files":[{"patch":"@@ -6442,0 +6442,64 @@\n+    @Test\n+    void test_jdk_8356770_reparentingItem() {\n+        TreeItem<String> itemA1 = new TreeItem<>(\"item A1\");\n+        TreeItem<String> itemA2 = new TreeItem<>(\"item A2\");\n+        TreeItem<String> itemA  = new TreeItem<>(\"item A\");\n+        itemA.getChildren().addAll(itemA1, itemA2);\n+        itemA.setExpanded(true);\n+\n+        TreeItem<String> itemB1 = new TreeItem<>(\"item B1\");\n+        TreeItem<String> itemB2 = new TreeItem<>(\"item B2\");\n+        TreeItem<String> itemB  = new TreeItem<>(\"item B\");\n+        itemB.getChildren().addAll(itemB1, itemB2);\n+        itemB.setExpanded(true);\n+\n+        TreeItem<String> root = new TreeItem<>(\"Root\");\n+        root.getChildren().addAll(itemA, itemB);\n+        root.setExpanded(true);\n+\n+        TreeTableView<String> table = new TreeTableView<>();\n+        TreeTableColumn<String, String> col = new TreeTableColumn<>(\"Name\");\n+        col.setCellValueFactory(cd -> new SimpleStringProperty(cd.getValue().getValue()));\n+        table.getColumns().add(col);\n+        table.setRoot(root);\n+        table.setShowRoot(true);\n+\n+        stageLoader = new StageLoader(table);\n+        Toolkit.getToolkit().firePulse();\n+\n+        \/\/ Find \"item B\" row and record its disclosure node indent\n+        TreeTableRow<String> rowBefore = findRow(table, \"item B\");\n+        assertNotNull(rowBefore, \"item B row should not be null\");\n+        double xBefore = disclosureX(rowBefore);\n+\n+        \/\/ Reparenting \"item B\" under \"item A\"\n+        root.getChildren().remove(itemB);\n+        itemA.getChildren().add(itemB);\n+        Toolkit.getToolkit().firePulse();\n+\n+        TreeTableRow<String> rowAfter = findRow(table, \"item B\");\n+        assertNotNull(rowAfter, \"item B row should not be null\");\n+        double xAfter = disclosureX(rowAfter);\n+\n+        assertTrue(xAfter > xBefore,\n+                \"Indentation of item B must increase after reparenting\");\n+    }\n+\n+    private static TreeTableRow<String> findRow(TreeTableView<String> table, String value) {\n+        for (Node n : table.lookupAll(\".tree-table-row-cell\")) {\n+            if (n instanceof TreeTableRow<?>) {\n+                TreeTableRow<String> row = (TreeTableRow<String>) n;\n+                TreeItem<String> ti = row.getTreeItem();\n+                if (ti != null && value.equals(ti.getValue())) {\n+                    return row;\n+                }\n+            }\n+        }\n+        return null;\n+    }\n+\n+    private static double disclosureX(TreeTableRow<String> row) {\n+        Node disclosureNode = row.lookup(\".tree-disclosure-node\");\n+        return disclosureNode == null ? 0.0 : (disclosureNode.getLayoutX() + disclosureNode.getTranslateX());\n+    }\n+\n","filename":"modules\/javafx.controls\/src\/test\/java\/test\/javafx\/scene\/control\/TreeTableViewTest.java","additions":64,"deletions":0,"binary":false,"changes":64,"status":"modified"}]}