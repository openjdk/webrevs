{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -485,1 +485,2 @@\n-\t\t\t\t\t\t|| JfrInternalConstants.JAVA_THREAD_ID_ID.equals(f.fieldIdentifier)) {\n+\t\t\t\t\t\t|| JfrInternalConstants.JAVA_THREAD_ID_ID.equals(f.fieldIdentifier)\n+\t\t\t\t\t\t|| JfrInternalConstants.CERTIFICATE_ID.equals(f.fieldIdentifier)) {\n","filename":"core\/org.openjdk.jmc.flightrecorder\/src\/main\/java\/org\/openjdk\/jmc\/flightrecorder\/internal\/parser\/v1\/TypeManager.java","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -47,0 +47,1 @@\n+\tpublic static final String CERTIFICATE_ID = \"certificateId\"; \/\/$NON-NLS-1$\n","filename":"core\/org.openjdk.jmc.flightrecorder\/src\/main\/java\/org\/openjdk\/jmc\/flightrecorder\/internal\/util\/JfrInternalConstants.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -315,2 +315,0 @@\n-\tpublic static final IAttribute<String> CERTIFICATE_ID_STR = attr(\"certificateId\", \/\/$NON-NLS-1$\n-\t\t\tMessages.getString(Messages.ATTR_CERTIFICATE_ID), PLAIN_TEXT);\n@@ -464,2 +462,0 @@\n-\tpublic static final IAttribute<IQuantity> CERTIFICATE_ID = attr(\"certificateId\", \/\/$NON-NLS-1$\n-\t\t\tMessages.getString(Messages.ATTR_CERTIFICATE_ID), NUMBER);\n","filename":"core\/org.openjdk.jmc.flightrecorder\/src\/main\/java\/org\/openjdk\/jmc\/flightrecorder\/jdk\/JdkAttributes.java","additions":0,"deletions":4,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -75,2 +75,0 @@\n-\tpublic static final String X509_CERTIFICATE = PREFIX + \"X509Certificate\";\n-\tpublic static final String X509_VALIDATION = PREFIX + \"X509Validation\";\n","filename":"core\/org.openjdk.jmc.flightrecorder\/src\/main\/java\/org\/openjdk\/jmc\/flightrecorder\/jdk\/JdkTypeIDs.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -553,1 +553,0 @@\n-\tpublic static final String ATTR_CERTIFICATE_ID = \"ATTR_CERTIFICATE_ID\"; \/\/$NON-NLS-1$\n","filename":"core\/org.openjdk.jmc.flightrecorder\/src\/main\/java\/org\/openjdk\/jmc\/flightrecorder\/jdk\/messages\/internal\/Messages.java","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -49,1 +49,0 @@\n-import org.openjdk.jmc.common.unit.IQuantity;\n@@ -173,18 +172,0 @@\n-\t\t\t\t} else if (JdkTypeIDs.X509_CERTIFICATE.equals(identifier)\n-\t\t\t\t\t\t|| JdkTypeIDs.X509_VALIDATION.equals(identifier)) {\n-\t\t\t\t\t\/\/ Adding a String certificateId, as that is what is used in the jdk.X509Certificate event.\n-\t\t\t\t\tint packageIndex = -1;\n-\t\t\t\t\tfor (int i = 0; i < dataStructure.size(); i++) {\n-\t\t\t\t\t\tValueField vf = dataStructure.get(i);\n-\t\t\t\t\t\tif (vf.matches(JdkAttributes.CERTIFICATE_ID)) {\n-\t\t\t\t\t\t\tpackageIndex = i;\n-\t\t\t\t\t\t\tbreak;\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\t\t\t\t\tif (packageIndex != -1) {\n-\t\t\t\t\t\tList<ValueField> newDataStructure = new ArrayList<>(dataStructure);\n-\t\t\t\t\t\tnewDataStructure.set(packageIndex, new ValueField(JdkAttributes.CERTIFICATE_ID_STR));\n-\t\t\t\t\t\tIEventSink subSink = sf.create(identifier, label, category, description, newDataStructure);\n-\t\t\t\t\t\tIEventSink longAsStrSink = new LongAsStringSink(subSink, packageIndex);\n-\t\t\t\t\t\treturn longAsStrSink;\n-\t\t\t\t\t}\n@@ -234,22 +215,0 @@\n-\n-\tprivate static class LongAsStringSink implements IEventSink {\n-\t\tprivate final IEventSink subSink;\n-\t\tprivate final int idIndex;\n-\n-\t\tpublic LongAsStringSink(IEventSink subSink, int idIndex) {\n-\t\t\tthis.subSink = subSink;\n-\t\t\tthis.idIndex = idIndex;\n-\t\t}\n-\n-\t\t@Override\n-\t\tpublic void addEvent(Object[] values) {\n-\t\t\tIQuantity longId = (IQuantity) values[idIndex];\n-\t\t\tif (longId != null && values != null && values.length > 0) {\n-\t\t\t\tString strId = String.valueOf(longId.longValue());\n-\t\t\t\tObject[] newValues = new Object[values.length];\n-\t\t\t\tSystem.arraycopy(values, 0, newValues, 0, values.length - 1);\n-\t\t\t\tnewValues[idIndex] = strId;\n-\t\t\t\tsubSink.addEvent(newValues);\n-\t\t\t}\n-\t\t}\n-\t}\n","filename":"core\/org.openjdk.jmc.flightrecorder\/src\/main\/java\/org\/openjdk\/jmc\/flightrecorder\/parser\/synthetic\/SyntheticAttributeExtension.java","additions":1,"deletions":42,"binary":false,"changes":43,"status":"modified"},{"patch":"@@ -365,1 +365,0 @@\n-ATTR_CERTIFICATE_ID=Certificate Id\n","filename":"core\/org.openjdk.jmc.flightrecorder\/src\/main\/resources\/org\/openjdk\/jmc\/flightrecorder\/jdk\/messages\/internal\/messages.properties","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"}]}