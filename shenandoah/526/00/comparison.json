{"files":[{"patch":"@@ -115,7 +115,10 @@\n-  ShenandoahOldHeuristics* old_heuristics = heap->old_generation()->heuristics();\n-\n-  \/\/ Checks that an old cycle has run for at least ShenandoahMinimumOldMarkTimeMs before allowing a young cycle.\n-  if (ShenandoahMinimumOldMarkTimeMs > 0 && heap->is_concurrent_old_mark_in_progress()) {\n-    size_t old_mark_elapsed = size_t(old_heuristics->elapsed_cycle_time() * 1000);\n-    if (old_mark_elapsed < ShenandoahMinimumOldMarkTimeMs) {\n-      return false;\n+  ShenandoahOldGeneration* old_generation = heap->old_generation();\n+  ShenandoahOldHeuristics* old_heuristics = old_generation->heuristics();\n+\n+  \/\/ Checks that an old cycle has run for at least ShenandoahMinimumOldTimeMs before allowing a young cycle.\n+  if (ShenandoahMinimumOldTimeMs > 0) {\n+    if (old_generation->is_preparing_for_mark() || old_generation->is_concurrent_mark_in_progress()) {\n+      size_t old_time_elapsed = size_t(old_heuristics->elapsed_cycle_time() * 1000);\n+      if (old_time_elapsed < ShenandoahMinimumOldTimeMs) {\n+        return false;\n+      }\n@@ -136,1 +139,1 @@\n-  size_t promo_potential = heap->old_generation()->get_promotion_potential();\n+  size_t promo_potential = old_generation->get_promotion_potential();\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/heuristics\/shenandoahYoungHeuristics.cpp","additions":11,"deletions":8,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -560,1 +560,1 @@\n-  product(uintx, ShenandoahMinimumOldMarkTimeMs, 100, EXPERIMENTAL,         \\\n+  product(uintx, ShenandoahMinimumOldTimeMs, 100, EXPERIMENTAL,         \\\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoah_globals.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}