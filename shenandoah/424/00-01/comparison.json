{"files":[{"patch":"@@ -93,0 +93,6 @@\n+\n+  \/\/ Rebuilding the remembered set recomputes all the card offsets for objects.\n+  \/\/ The adjust pointers phase coalesces and fills all necessary regions. In case\n+  \/\/ we came to the full GC from an incomplete global cycle, we need to indicate\n+  \/\/ that the old regions are parseable.\n+  heap->old_generation()->set_parseable(true);\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahGenerationalFullGC.cpp","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -91,1 +91,1 @@\n-  size_t trashed_oops() {\n+  size_t trashed_oops() const {\n@@ -443,23 +443,30 @@\n-\/\/               |   +--------> |     WAITING     |     |     bootstrap to filling or\n-\/\/               |   |    +---- |  FOR BOOTSTRAP  | ----+     evacuating.\n-\/\/               |   |    |     +-----------------+\n-\/\/               |   |    |       |\n-\/\/               |   |    |       | Reset Bitmap\n-\/\/               |   |    |       v\n-\/\/               |   |    |     +-----------------+     +----------------------+\n-\/\/               |   |    |     |    BOOTSTRAP    | <-> |       YOUNG GC       |\n-\/\/               |   |    |     |                 |     | (RSet Parses Region) |\n-\/\/               |   |    |     +-----------------+     +----------------------+\n-\/\/               |   |    |       |\n-\/\/               |   |    |       | Old Marking\n-\/\/               |   |    |       v\n-\/\/               |   |    |     +-----------------+     +----------------------+\n-\/\/               |   |    |     |     MARKING     | <-> |       YOUNG GC       |\n-\/\/               |   +--------- |                 |     | (RSet Parses Region) |\n-\/\/               |        |     +-----------------+     +----------------------+\n-\/\/               |        |       |\n-\/\/               |        |       | Has Evacuation Candidates\n-\/\/               |        |       v\n-\/\/               |        |     +-----------------+     +--------------------+\n-\/\/               |        +---> |    EVACUATING   | <-> |      YOUNG GC      |\n-\/\/               +------------- |                 |     | (RSet Uses Bitmap) |\n+\/\/           +-- |-- |--------> |     WAITING     |     |     bootstrap to filling or\n+\/\/           |   |   |    +---- |  FOR BOOTSTRAP  | ----+     evacuating. It may also\n+\/\/           |   |   |    |     +-----------------+           move from filling to waiting\n+\/\/           |   |   |    |       |                           for bootstrap.\n+\/\/           |   |   |    |       | Reset Bitmap\n+\/\/           |   |   |    |       v\n+\/\/           |   |   |    |     +-----------------+     +----------------------+\n+\/\/           |   |   |    |     |    BOOTSTRAP    | <-> |       YOUNG GC       |\n+\/\/           |   |   |    |     |                 |     | (RSet Parses Region) |\n+\/\/           |   |   |    |     +-----------------+     +----------------------+\n+\/\/           |   |   |    |       |\n+\/\/           |   |   |    |       | Old Marking\n+\/\/           |   |   |    |       v\n+\/\/           |   |   |    |     +-----------------+     +----------------------+\n+\/\/           |   |   |    |     |     MARKING     | <-> |       YOUNG GC       |\n+\/\/           |   |   +--------- |                 |     | (RSet Parses Region) |\n+\/\/           |   |        |     +-----------------+     +----------------------+\n+\/\/           |   |        |       |\n+\/\/           |   |        |       | Has Evacuation Candidates\n+\/\/           |   |        |       v\n+\/\/           |   |        |     +-----------------+     +--------------------+\n+\/\/           |   |        +---> |    EVACUATING   | <-> |      YOUNG GC      |\n+\/\/           |   +------------- |                 |     | (RSet Uses Bitmap) |\n+\/\/           |                  +-----------------+     +--------------------+\n+\/\/           |                    |\n+\/\/           |                    | Global Cycle Coalesces and Fills Old Regions\n+\/\/           |                    v\n+\/\/           |                  +-----------------+     +--------------------+\n+\/\/           +----------------- |    EVACUATING   | <-> |      YOUNG GC      |\n+\/\/                              |   AFTER GLOBAL  |     | (RSet Uses Bitmap) |\n@@ -469,1 +476,0 @@\n-\/\/\n@@ -474,1 +480,1 @@\n-      assert(_state != BOOTSTRAPPING, \"Cannot beging making old regions parsable after bootstrapping\");\n+      assert(_state != BOOTSTRAPPING, \"Cannot begin making old regions parsable after bootstrapping\");\n@@ -690,0 +696,4 @@\n+        \/\/ We can get here during a full GC. The full GC will cancel anything\n+        \/\/ happening in the old generation and return it to the waiting for bootstrap\n+        \/\/ state. The full GC will then record that the old regions are parseable\n+        \/\/ after rebuilding the remembered set.\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahOldGeneration.cpp","additions":36,"deletions":26,"binary":false,"changes":62,"status":"modified"}]}