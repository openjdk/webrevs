{"files":[{"patch":"@@ -380,1 +380,9 @@\n-  assert(HAS_FWD == _heap->has_forwarded_objects(), \"Forwarded object status is sane\");\n+  \/\/ Young cycles are allowed to run when old marking is in progress. When old marking is in progress,\n+  \/\/ this barrier will be called with ENQUEUE=true and HAS_FWD=false, even though the young generation\n+  \/\/ may have forwarded objects. In this case, the `arraycopy_work` is first called with HAS_FWD=true and\n+  \/\/ ENQUEUE=false.\n+  assert(HAS_FWD == _heap->has_forwarded_objects() || (_heap->gc_state() & ShenandoahHeap::OLD_MARKING) != 0,\n+         \"Forwarded object status is sane\");\n+  \/\/ This function cannot be called to handle marking and evacuation at the same time (they operate on\n+  \/\/ different sides of the copy).\n+  assert((HAS_FWD || EVAC) != ENQUEUE, \"Cannot evacuate and mark both sides of copy.\");\n@@ -398,1 +406,0 @@\n-        obj = fwd;\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahBarrierSet.inline.hpp","additions":9,"deletions":2,"binary":false,"changes":11,"status":"modified"}]}