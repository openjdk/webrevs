{"files":[{"patch":"@@ -176,0 +176,11 @@\n+\n+\/\/ Some limited sanity checking of the _gc_generation and _active_generation fields of ShenandoahHeap\n+#define shenandoah_assert_generations_reconciled()                                                             \\\n+                    if (SafepointSynchronize::is_at_safepoint()) {                                             \\\n+                      ShenandoahHeap* heap = ShenandoahHeap::heap();                                           \\\n+                      ShenandoahGeneration* ggen = heap->gc_generation();                                      \\\n+                      ShenandoahGeneration* agen = heap->active_generation();                                  \\\n+                      assert(agen == ggen, \"active_gen(%d) should be reconciled with gc_gen(%d)at safepoint\",  \\\n+                             agen->type(), ggen->type());                                                      \\\n+                    }\n+\n@@ -229,0 +240,1 @@\n+#define shenandoah_assert_generations_reconciled()                                                             \\\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahAsserts.hpp","additions":12,"deletions":0,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -931,1 +931,1 @@\n-      _heap->assert_generations_reconciled();\n+      shenandoah_assert_generations_reconciled();\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahConcurrentGC.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -69,1 +69,1 @@\n-    \/\/ assert_generations_reconciled() here.\n+    \/\/ shenandoah_assert_generations_reconciled() here.\n@@ -119,1 +119,1 @@\n-    heap->assert_generations_reconciled();\n+    shenandoah_assert_generations_reconciled();\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahConcurrentMark.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -135,1 +135,1 @@\n-    _heap->assert_generations_reconciled();\n+    shenandoah_assert_generations_reconciled();\n@@ -219,1 +219,1 @@\n-  _heap->assert_generations_reconciled();\n+  shenandoah_assert_generations_reconciled();\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahGenerationalEvacuationTask.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -763,1 +763,1 @@\n-    _heap->assert_generations_reconciled();\n+    shenandoah_assert_generations_reconciled();\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahGenerationalHeap.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1590,11 +1590,0 @@\n-#ifndef PRODUCT\n-void ShenandoahHeap::assert_generations_reconciled() {\n-  if (SafepointSynchronize::is_at_safepoint()) {\n-    ShenandoahGeneration* ggen = gc_generation();\n-    ShenandoahGeneration* agen = active_generation();\n-    assert(agen == ggen, \"active_gen(%d) should be reconciled with gc_gen(%d)at safepoint\",\n-           agen->type(), ggen->type());\n-  }\n-}\n-#endif\n-\n@@ -1977,1 +1966,1 @@\n-  assert_generations_reconciled();\n+  shenandoah_assert_generations_reconciled();\n@@ -2012,1 +2001,1 @@\n-  assert_generations_reconciled();\n+  shenandoah_assert_generations_reconciled();\n@@ -2306,1 +2295,1 @@\n-    assert_generations_reconciled();\n+    shenandoah_assert_generations_reconciled();\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahHeap.cpp","additions":3,"deletions":14,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -190,4 +190,0 @@\n-  \/\/ Some limited sanity checking of the _gc_generation and\n-  \/\/ _active_generation fields\n-  void assert_generations_reconciled() PRODUCT_RETURN;\n-\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahHeap.hpp","additions":0,"deletions":4,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -322,1 +322,1 @@\n-  ShenandoahHeap::heap()->assert_generations_reconciled();\n+  shenandoah_assert_generations_reconciled();\n@@ -473,1 +473,1 @@\n-  heap->assert_generations_reconciled();\n+  shenandoah_assert_generations_reconciled();\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahHeapRegion.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -155,1 +155,1 @@\n-  \/\/ assert_generations_reconciled() here.\n+  \/\/ shenandoah_assert_generations_reconciled() here.\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahMark.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -108,1 +108,1 @@\n-  heap->assert_generations_reconciled();\n+  shenandoah_assert_generations_reconciled();\n@@ -178,1 +178,1 @@\n-  ShenandoahHeap::heap()->assert_generations_reconciled();\n+  shenandoah_assert_generations_reconciled();\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahSTWMark.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -99,1 +99,1 @@\n-      _heap->assert_generations_reconciled();\n+      shenandoah_assert_generations_reconciled();\n@@ -195,1 +195,1 @@\n-          _heap->assert_generations_reconciled();\n+          shenandoah_assert_generations_reconciled();\n@@ -641,1 +641,1 @@\n-      _heap->assert_generations_reconciled();\n+      shenandoah_assert_generations_reconciled();\n@@ -883,1 +883,1 @@\n-    _heap->assert_generations_reconciled();\n+    shenandoah_assert_generations_reconciled();\n@@ -1356,1 +1356,1 @@\n-  _heap->assert_generations_reconciled();\n+  shenandoah_assert_generations_reconciled();\n@@ -1437,1 +1437,1 @@\n-  _heap->assert_generations_reconciled();\n+  shenandoah_assert_generations_reconciled();\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahVerifier.cpp","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"}]}