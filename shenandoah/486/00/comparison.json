{"files":[{"patch":"@@ -419,14 +419,1 @@\n-  if (val == noreg) {\n-    BarrierSetAssembler::store_at(masm, decorators, type, Address(tmp3, 0), noreg, noreg, noreg, noreg);\n-  } else {\n-    \/\/ Barrier needs uncompressed oop for region cross check.\n-    Register new_val = val;\n-    if (UseCompressedOops) {\n-      new_val = rscratch2;\n-      __ mov(new_val, val);\n-    }\n-    BarrierSetAssembler::store_at(masm, decorators, type, Address(tmp3, 0), val, noreg, noreg, noreg);\n-    if (ShenandoahCardBarrier) {\n-      store_check(masm, r3);\n-    }\n-  }\n+  BarrierSetAssembler::store_at(masm, decorators, type, Address(tmp3, 0), val, noreg, noreg, noreg);\n@@ -434,0 +421,5 @@\n+  bool in_heap = (decorators & IN_HEAP) != 0;\n+  bool needs_post_barrier = val != noreg && in_heap && ShenandoahCardBarrier;\n+  if (needs_post_barrier) {\n+    store_check(masm, tmp3);\n+  }\n","filename":"src\/hotspot\/cpu\/aarch64\/gc\/shenandoah\/shenandoahBarrierSetAssembler_aarch64.cpp","additions":6,"deletions":14,"binary":false,"changes":20,"status":"modified"}]}