{"files":[{"patch":"@@ -47,1 +47,2 @@\n-  ShenandoahHeap* _heap;\n+  ShenandoahGeneration* const _generation;\n+  ShenandoahHeap* const _heap;\n@@ -50,1 +51,2 @@\n-  ShenandoahResetUpdateRegionStateClosure() :\n+  ShenandoahResetUpdateRegionStateClosure(ShenandoahGeneration* generation) :\n+    _generation(generation),\n@@ -55,1 +57,1 @@\n-    if (r->is_active()) {\n+    if (r->is_active() && _generation->contains(r)) {\n@@ -248,2 +250,2 @@\n-  \/\/ Capture Top At Mark Start for this generation (typically young) and reset mark bitmap.\n-  ShenandoahResetUpdateRegionStateClosure cl;\n+  \/\/ Capture Top At Mark Start for this generation (typically young).\n+  ShenandoahResetUpdateRegionStateClosure cl(this);\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahGeneration.cpp","additions":7,"deletions":5,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -854,5 +854,0 @@\n-  if (region_affiliation == OLD_GENERATION) {\n-    \/\/Need to reset bitmap in next GC after change affiliation from OLD_GENERATION\n-    heap->young_generation()->set_need_bitmap_reset();\n-  }\n-\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahHeapRegion.cpp","additions":0,"deletions":5,"binary":false,"changes":5,"status":"modified"}]}