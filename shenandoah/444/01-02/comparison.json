{"files":[{"patch":"@@ -1227,1 +1227,3 @@\n-    ShenandoahGenerationalHeap::heap()->update_region_ages();\n+    if (!_generation->is_old()) {\n+      ShenandoahGenerationalHeap::heap()->update_region_ages(_generation->complete_marking_context());\n+    }\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahConcurrentGC.cpp","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1119,2 +1119,1 @@\n-void ShenandoahGenerationalHeap::update_region_ages() {\n-  ShenandoahMarkingContext* ctx = active_generation()->complete_marking_context();\n+void ShenandoahGenerationalHeap::update_region_ages(ShenandoahMarkingContext* ctx) {\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahGenerationalHeap.cpp","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -71,1 +71,1 @@\n-  void update_region_ages();\n+  void update_region_ages(ShenandoahMarkingContext* ctx);\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahGenerationalHeap.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -456,2 +456,2 @@\n-  uint age() { return _age; }\n-  CENSUS_NOISE(uint youth() { return _youth; })\n+  uint age() const { return _age; }\n+  CENSUS_NOISE(uint youth() const { return _youth; })\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahHeapRegion.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -114,0 +114,6 @@\n+  if (_generation->is_concurrent_mark_in_progress()) {\n+    assert(heap->cancelled_gc(), \"Safepoint operation observed gc cancellation\");\n+    \/\/ GC may have been cancelled before final mark, but after the preceding cancellation check.\n+    return false;\n+  }\n+\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahOldGC.cpp","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"}]}