{"files":[{"patch":"@@ -153,2 +153,3 @@\n-  old_gen->card_scan()->reset_object_range(region->bottom(), region->end());\n-  old_gen->card_scan()->mark_range_as_dirty(region->bottom(), region->get_top_before_promote() - region->bottom());\n+  RememberedScanner* const scanner = old_gen->card_scan();\n+  scanner->reset_object_range(region->bottom(), region->end());\n+  scanner->mark_range_as_dirty(region->bottom(), region->get_top_before_promote() - region->bottom());\n@@ -163,1 +164,1 @@\n-      old_gen->card_scan()->register_object_without_lock(obj_addr);\n+      scanner->register_object_without_lock(obj_addr);\n@@ -171,1 +172,1 @@\n-      old_gen->card_scan()->register_object_without_lock(obj_addr);\n+      scanner->register_object_without_lock(obj_addr);\n@@ -235,2 +236,2 @@\n-  ShenandoahOldGeneration* const old_generation = _heap->old_generation();\n-  ShenandoahGeneration* const young_generation = _heap->young_generation();\n+  ShenandoahOldGeneration* const old_gen = _heap->old_generation();\n+  ShenandoahGeneration* const young_gen = _heap->young_generation();\n@@ -246,3 +247,3 @@\n-    young_generation->decrease_used(used_bytes);\n-    young_generation->decrease_humongous_waste(humongous_waste);\n-    young_generation->decrease_affiliated_region_count(spanned_regions);\n+    young_gen->decrease_used(used_bytes);\n+    young_gen->decrease_humongous_waste(humongous_waste);\n+    young_gen->decrease_affiliated_region_count(spanned_regions);\n@@ -264,3 +265,3 @@\n-    old_generation->increase_affiliated_region_count(spanned_regions);\n-    old_generation->increase_used(used_bytes);\n-    old_generation->increase_humongous_waste(humongous_waste);\n+    old_gen->increase_affiliated_region_count(spanned_regions);\n+    old_gen->increase_used(used_bytes);\n+    old_gen->increase_humongous_waste(humongous_waste);\n@@ -271,1 +272,2 @@\n-  old_generation->card_scan()->reset_object_range(humongous_bottom, humongous_bottom + spanned_regions * ShenandoahHeapRegion::region_size_words());\n+  RememberedScanner* const scanner = old_gen->card_scan();\n+  scanner->reset_object_range(humongous_bottom, humongous_bottom + spanned_regions * ShenandoahHeapRegion::region_size_words());\n@@ -273,1 +275,1 @@\n-  old_generation->card_scan()->register_object_without_lock(humongous_bottom);\n+  scanner->register_object_without_lock(humongous_bottom);\n@@ -279,1 +281,1 @@\n-    old_generation->card_scan()->mark_range_as_clean(humongous_bottom, obj->size());\n+    scanner->mark_range_as_clean(humongous_bottom, obj->size());\n@@ -283,1 +285,1 @@\n-    old_generation->card_scan()->mark_range_as_dirty(humongous_bottom, obj->size());\n+    scanner->mark_range_as_dirty(humongous_bottom, obj->size());\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahGenerationalEvacuationTask.cpp","additions":18,"deletions":16,"binary":false,"changes":34,"status":"modified"},{"patch":"@@ -50,1 +50,1 @@\n-  \/\/ Age census used for adapting tenuring threshold in generational mode\n+  \/\/ Age census used for adapting tenuring threshold\n@@ -62,1 +62,1 @@\n-  \/\/ Return the age census object for young gen (in generational mode)\n+  \/\/ Return the age census object for young gen\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahGenerationalHeap.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -39,0 +39,1 @@\n+#include \"gc\/shenandoah\/shenandoahScanRemembered.inline.hpp\"\n@@ -293,0 +294,1 @@\n+  assert(heap->is_in(obj), \"Object must be in heap\");\n@@ -329,2 +331,2 @@\n-      \/\/ TODO:  Rethink this: may be redundant with dirtying of cards identified during young-gen remembered set scanning\n-      \/\/ and by mutator write barriers.  Assert\n+      \/\/ TODO: Rethink this: may be redundant with dirtying of cards identified during young-gen remembered set scanning\n+      \/\/ and by mutator write barriers.\n@@ -333,0 +335,1 @@\n+        assert(heap->old_generation()->card_scan()->is_card_dirty((HeapWord*)p), \"Card should already be marked.\");\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahMark.inline.hpp","additions":5,"deletions":2,"binary":false,"changes":7,"status":"modified"}]}