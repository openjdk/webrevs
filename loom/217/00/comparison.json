{"files":[{"patch":"@@ -2225,1 +2225,3 @@\n-  oop java_thread = JNIHandles::resolve(jthread);\n+  ResourceMark rm(THREAD);\n+  HandleMark   hm(THREAD);\n+  Handle java_thread(THREAD, JNIHandles::resolve(jthread));\n@@ -2243,1 +2245,1 @@\n-  bool is_virtual = java_lang_VirtualThread::is_instance(java_thread);\n+  bool is_virtual = java_lang_VirtualThread::is_instance(java_thread());\n@@ -2249,1 +2251,1 @@\n-    oop carrier_thread = java_lang_VirtualThread::carrier_thread(java_thread);\n+    oop carrier_thread = java_lang_VirtualThread::carrier_thread(java_thread());\n@@ -2252,2 +2254,0 @@\n-    } else {\n-      \/\/ TODO: need to \"suspend\" the VT like VirtualThread.getStackTrace does\n@@ -2256,1 +2256,1 @@\n-    thread = java_lang_Thread::thread(java_thread);\n+    thread = java_lang_Thread::thread(java_thread());\n@@ -2260,3 +2260,1 @@\n-  ResourceMark rm(THREAD);\n-  HandleMark   hm(THREAD);\n-  GetThreadSnapshotClosure cl(Handle(THREAD, java_thread), thread, with_locks);\n+  GetThreadSnapshotClosure cl(java_thread, thread, with_locks);\n","filename":"src\/hotspot\/share\/classfile\/javaClasses.cpp","additions":7,"deletions":9,"binary":false,"changes":16,"status":"modified"}]}