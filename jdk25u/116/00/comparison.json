{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -61,4 +61,1 @@\n-    jbyte* jbytes;\n-\n-    str = (char*)malloc(len + 1);\n-    jbytes = (*env)->GetPrimitiveArrayCritical(env, bytes, NULL);\n+    jbyte* jbytes = (*env)->GetPrimitiveArrayCritical(env, bytes, NULL);\n@@ -68,0 +65,5 @@\n+    str = (char*)malloc(len + 1);\n+    if (str == NULL) {\n+        (*env)->ReleasePrimitiveArrayCritical(env, bytes, (void*)jbytes, 0);\n+        return NULL;\n+    }\n@@ -74,1 +76,3 @@\n-    return JNU_NewStringPlatform(env, str);\n+    jstring res = JNU_NewStringPlatform(env, str);\n+    free(str);\n+    return res;\n","filename":"test\/jdk\/java\/lang\/String\/nativeEncoding\/libstringPlatformChars.c","additions":10,"deletions":6,"binary":false,"changes":16,"status":"modified"}]}