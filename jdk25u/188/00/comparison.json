{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -43,1 +43,1 @@\n-public class ProxyServer extends Thread implements Closeable {\n+public final class ProxyServer implements Closeable {\n@@ -100,3 +100,1 @@\n-    public ProxyServer(Integer port,\n-                       Boolean debug,\n-                       Credentials credentials)\n+    private ProxyServer(Integer port, Boolean debug, Credentials credentials)\n@@ -111,8 +109,0 @@\n-        setName(\"ProxyListener\");\n-        setDaemon(true);\n-        connections = new CopyOnWriteArrayList<Connection>();\n-        start();\n-    }\n-\n-    public ProxyServer(String s) {\n-        credentials = null;\n@@ -120,0 +110,1 @@\n+        Thread.ofPlatform().name(\"ProxyListener\").daemon().start(this::run);\n@@ -151,1 +142,1 @@\n-    public void run() {\n+    private void run() {\n@@ -659,4 +650,5 @@\n-        ProxyServer ps = new ProxyServer(port, debug);\n-        System.out.println(\"Proxy server listening on port \" + ps.getPort());\n-        while (true) {\n-            Thread.sleep(5000);\n+        try (ProxyServer ps = new ProxyServer(port, debug)) {\n+            System.out.println(\"Proxy server listening on port \" + ps.getPort());\n+            while (true) {\n+                Thread.sleep(5000);\n+            }\n","filename":"test\/jdk\/java\/net\/httpclient\/ProxyServer.java","additions":10,"deletions":18,"binary":false,"changes":28,"status":"modified"}]}