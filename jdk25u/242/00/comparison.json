{"files":[{"patch":"@@ -155,0 +155,3 @@\n+    static void assert_locked_or_snapshotted() {\n+      assert(safely_locked() || _snapshot, \"use under TrainingDataLocker or after snapshot\");\n+    }\n@@ -341,0 +344,1 @@\n+      TrainingDataLocker::assert_locked_or_snapshotted();\n@@ -346,0 +350,1 @@\n+      TrainingDataLocker::assert_locked_or_snapshotted();\n@@ -351,0 +356,1 @@\n+      TrainingDataLocker::assert_locked_or_snapshotted();\n@@ -355,0 +361,1 @@\n+      TrainingDataLocker::assert_can_add();\n@@ -364,0 +371,1 @@\n+      TrainingDataLocker::assert_can_add();\n@@ -370,0 +378,1 @@\n+      TrainingDataLocker::assert_can_add();\n@@ -375,0 +384,1 @@\n+      TrainingDataLocker::assert_can_add();\n@@ -381,0 +391,1 @@\n+      TrainingDataLocker::assert_locked();\n@@ -596,0 +607,1 @@\n+        TrainingDataLocker l;\n@@ -604,2 +616,5 @@\n-      bool append_if_missing(const ReturnType& result, const Args&... args) {\n-        return _data.append_if_missing(Record(result, ArgumentsType(args...)));\n+      void append_if_missing(const ReturnType& result, const Args&... args) {\n+        TrainingDataLocker l;\n+        if (l.can_add()) {\n+          _data.append_if_missing(Record(result, ArgumentsType(args...)));\n+        }\n","filename":"src\/hotspot\/share\/oops\/trainingData.hpp","additions":17,"deletions":2,"binary":false,"changes":19,"status":"modified"}]}