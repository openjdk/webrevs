{"files":[{"patch":"@@ -49,0 +49,1 @@\n+\n@@ -70,2 +71,9 @@\n-        run(pb);\n-\n+        \/\/ If we attempt to attach to LingeredApp before it has initialized, the heap dump request will fail, so we allow 3 tries\n+        int allowedTries = 3;\n+        int exitValue;\n+        do {\n+            exitValue = run(pb);\n+        } while ((exitValue != 0) && (allowedTries-- > 0));\n+        if (exitValue != 0) {\n+            throw new Exception(\"jmap -heap exited with error code: \" + exitValue);\n+        }\n@@ -79,1 +87,1 @@\n-    private static void run(ProcessBuilder pb) throws Exception {\n+    private static int run(ProcessBuilder pb) throws Exception {\n@@ -81,4 +89,1 @@\n-        int exitValue = output.getExitValue();\n-        if (exitValue != 0) {\n-            throw new Exception(\"jmap -heap exited with error code: \" + exitValue);\n-        }\n+        return output.getExitValue();\n","filename":"test\/hotspot\/jtreg\/gc\/metaspace\/CompressedClassSpaceSizeInJmapHeap.java","additions":12,"deletions":7,"binary":false,"changes":19,"status":"modified"}]}