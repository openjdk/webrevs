{"files":[{"patch":"@@ -48,1 +48,1 @@\n-DeferredStatic<Atomic<StringDedup::StorageUse*>> StringDedup::Processor::_storage_for_requests{};\n+Atomic<StringDedup::StorageUse*> StringDedup::Processor::_storage_for_requests{};\n@@ -54,0 +54,1 @@\n+  assert(_storage_for_requests.load_relaxed() == nullptr, \"storage already created\");\n@@ -57,2 +58,1 @@\n-  auto sfr = new StorageUse(_storages[0]); \/\/ Work around lack of std::forward.\n-  _storage_for_requests.initialize(sfr);\n+  _storage_for_requests.store_relaxed(new StorageUse(_storages[0]));\n@@ -77,1 +77,1 @@\n-    OopStorage* storage = _storage_for_requests->load_relaxed()->storage();\n+    OopStorage* storage = _storage_for_requests.load_relaxed()->storage();\n@@ -85,1 +85,1 @@\n-  _storage_for_processing = _storage_for_requests->exchange(_storage_for_processing);\n+  _storage_for_processing = _storage_for_requests.exchange(_storage_for_processing);\n@@ -101,1 +101,1 @@\n-  return StorageUse::obtain(_storage_for_requests.get());\n+  return StorageUse::obtain(&_storage_for_requests);\n","filename":"src\/hotspot\/share\/gc\/shared\/stringdedup\/stringDedupProcessor.cpp","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -32,1 +32,0 @@\n-#include \"utilities\/deferredStatic.hpp\"\n@@ -56,1 +55,1 @@\n-  static DeferredStatic<Atomic<StorageUse*>> _storage_for_requests;\n+  static Atomic<StorageUse*> _storage_for_requests;\n","filename":"src\/hotspot\/share\/gc\/shared\/stringdedup\/stringDedupProcessor.hpp","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"}]}