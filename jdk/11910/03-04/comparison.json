{"files":[{"patch":"@@ -41,1 +41,0 @@\n-import java.rmi.NoSuchObjectException;\n@@ -47,1 +46,0 @@\n-import java.security.NoSuchAlgorithmException;\n@@ -147,1 +145,1 @@\n-        } catch (IOException | IllegalArgumentException exc) {\n+        } catch (IOException exc) {\n@@ -154,8 +152,14 @@\n-        } finally {\n-            if (server != null) {\n-                try {\n-                    UnicastRemoteObject.unexportObject(server, true);\n-                } catch (NoSuchObjectException e) {\n-                    throw new RuntimeException(\"Could not un-export the server object\",\n-                            e);\n-                }\n+        }\n+    }\n+\n+    private static void testServerFactory(String[] cipherSuites, String[] protocol, String expectedMessage) throws Exception {\n+        try {\n+            new ServerFactory(SSLContext.getDefault(),\n+                    cipherSuites, protocol, false);\n+            throw new RuntimeException(\n+                    \"The expected exception for \"+ expectedMessage + \" was not thrown.\");\n+        } catch (IllegalArgumentException exc) {\n+            \/\/ expecting an exception with a specific message\n+            \/\/ anything else is an error\n+            if (!exc.getMessage().toLowerCase().contains(expectedMessage)) {\n+                throw exc;\n@@ -166,1 +170,1 @@\n-    public void runTest(int testNumber) {\n+    public void runTest(int testNumber) throws Exception {\n@@ -206,17 +210,0 @@\n-    private static void testServerFactory(String[] cipherSuites, String[] protocol, String expectedMessage) {\n-        try {\n-            new ServerFactory(SSLContext.getDefault(),\n-                    cipherSuites, protocol, false);\n-            throw new RuntimeException(\n-                    \"The expected exception for \"+ expectedMessage + \" was not thrown.\");\n-        } catch (NoSuchAlgorithmException exc) {\n-            throw new RuntimeException(\"Could not create SSLContext.\", exc);\n-        } catch (IllegalArgumentException exc) {\n-            \/\/ expecting the exception for unsupported ciphersuite,\n-            \/\/ anything else is an error\n-            if (!exc.getMessage().toLowerCase().contains(expectedMessage)) {\n-                throw exc;\n-            }\n-        }\n-    }\n-\n@@ -240,10 +227,2 @@\n-        try {\n-            SSLSocketParametersTest test = new SSLSocketParametersTest();\n-            test.runTest(Integer.parseInt(args[0]));\n-        } catch (Exception exc) {\n-            \/\/ an exception may be thrown trying to unexport RMI object\n-            \/\/ in which case we want to explicitly call System.exit to\n-            \/\/ make sure the JVM exits.\n-            exc.printStackTrace(System.err);\n-            System.exit(1);\n-        }\n+        SSLSocketParametersTest test = new SSLSocketParametersTest();\n+        test.runTest(Integer.parseInt(args[0]));\n","filename":"test\/jdk\/javax\/rmi\/ssl\/SSLSocketParametersTest.java","additions":18,"deletions":39,"binary":false,"changes":57,"status":"modified"}]}