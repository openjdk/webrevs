{"files":[{"patch":"@@ -26,4 +26,0 @@\n-#include <functional>\n-#include <memory>\n-#include <type_traits>\n-\n@@ -212,2 +208,2 @@\n-    std::unique_ptr<SetEraseBackgroundStruct> sebs(static_cast<SetEraseBackgroundStruct *>(param));\n-    std::unique_ptr<std::remove_pointer<jobject>::type, std::function<void (jobject)>> canvas(sebs->canvas, [&env] (jobject canvas) -> void { env->DeleteGlobalRef(canvas); });\n+    SetEraseBackgroundStruct *sebs = static_cast<SetEraseBackgroundStruct *>(param);\n+    jobject canvas = sebs->canvas;\n@@ -218,1 +214,14 @@\n-    JNI_CHECK_PEER_RETURN(canvas.get());\n+    if (canvas == NULL) {\n+        env->ExceptionClear();\n+        JNU_ThrowNullPointerException(env, \"peer\");\n+        env->DeleteGlobalRef(canvas);\n+        delete sebs;\n+        return;\n+    }\n+    pData = JNI_GET_PDATA(canvas);\n+    if (pData == NULL) {\n+        THROW_NULL_PDATA_IF_NOT_DESTROYED(canvas);\n+        env->DeleteGlobalRef(canvas);\n+        delete sebs;\n+        return;\n+    }\n@@ -223,0 +232,3 @@\n+\n+    env->DeleteGlobalRef(canvas);\n+    delete sebs;\n","filename":"src\/java.desktop\/windows\/native\/libawt\/windows\/awt_Canvas.cpp","additions":19,"deletions":7,"binary":false,"changes":26,"status":"modified"}]}