{"files":[{"patch":"@@ -1339,3 +1339,2 @@\n-void AwtFrame::_SetState(void *param)\n-{\n-    JNIEnv *env = (JNIEnv *)JNU_GetEnv(jvm, JNI_VERSION_1_2);\n+void AwtFrame::_SetState(void *param) {\n+    JNIEnv *env = (JNIEnv *) JNU_GetEnv(jvm, JNI_VERSION_1_2);\n@@ -1343,1 +1342,1 @@\n-    SetStateStruct *sss = (SetStateStruct *)param;\n+    SetStateStruct *sss = static_cast<SetStateStruct *>(param);\n@@ -1347,1 +1346,1 @@\n-    AwtFrame *f = NULL;\n+    AwtFrame *f = nullptr;\n@@ -1350,4 +1349,16 @@\n-    JNI_CHECK_PEER_GOTO(self, ret);\n-    f = (AwtFrame *)pData;\n-    HWND hwnd;\n-    hwnd = f->GetHWnd();\n+    if (self == NULL) {\n+        env->ExceptionClear();\n+        JNU_ThrowNullPointerException(env, \"self\");\n+        delete sss;\n+        return;\n+    } else {\n+        pData = JNI_GET_PDATA(self);\n+        if (pData == NULL) {\n+            THROW_NULL_PDATA_IF_NOT_DESTROYED(self);\n+            env->DeleteGlobalRef(self);\n+            delete sss;\n+            return;\n+        }\n+    }\n+    f = (AwtFrame *) pData;\n+    HWND hwnd = f->GetHWnd();\n@@ -1408,1 +1419,1 @@\n-ret:\n+\n","filename":"src\/java.desktop\/windows\/native\/libawt\/windows\/awt_Frame.cpp","additions":21,"deletions":10,"binary":false,"changes":31,"status":"modified"}]}