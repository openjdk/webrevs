{"files":[{"patch":"@@ -3140,0 +3140,1 @@\n+        return;\n@@ -3191,1 +3192,1 @@\n-    JNIEnv *env = (JNIEnv *)JNU_GetEnv(jvm, JNI_VERSION_1_2);\n+    JNIEnv *env = (JNIEnv *) JNU_GetEnv(jvm, JNI_VERSION_1_2);\n@@ -3193,1 +3194,1 @@\n-    OpacityStruct *os = (OpacityStruct *)param;\n+    OpacityStruct *os = static_cast<OpacityStruct *>(param);\n@@ -3195,6 +3196,1 @@\n-    BYTE iOpacity = (BYTE)os->iOpacity;\n-\n-    {\n-        PDATA pData;\n-        JNI_CHECK_PEER_GOTO(self, ret);\n-        AwtWindow *window = (AwtWindow *)pData;\n+    BYTE iOpacity = (BYTE) os->iOpacity;\n@@ -3202,1 +3198,14 @@\n-        window->SetTranslucency(iOpacity, window->isOpaque());\n+    PDATA pData;\n+    if (self == NULL) {\n+        env->ExceptionClear();\n+        JNU_ThrowNullPointerException(env, \"self\");\n+        delete os;\n+        return;\n+    } else {\n+        pData = JNI_GET_PDATA(self);\n+        if (pData == NULL) {\n+            THROW_NULL_PDATA_IF_NOT_DESTROYED(self);\n+            env->DeleteGlobalRef(self);\n+            delete os;\n+            return;\n+        }\n@@ -3204,0 +3213,3 @@\n+    AwtWindow *window = (AwtWindow *)pData;\n+\n+    window->SetTranslucency(iOpacity, window->isOpaque());\n@@ -3205,1 +3217,0 @@\n-  ret:\n","filename":"src\/java.desktop\/windows\/native\/libawt\/windows\/awt_Window.cpp","additions":21,"deletions":10,"binary":false,"changes":31,"status":"modified"}]}