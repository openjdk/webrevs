{"files":[{"patch":"@@ -1019,1 +1019,1 @@\n-    JNIEnv *env = (JNIEnv *)JNU_GetEnv(jvm, JNI_VERSION_1_2);\n+    JNIEnv *env = (JNIEnv *) JNU_GetEnv(jvm, JNI_VERSION_1_2);\n@@ -1022,1 +1022,1 @@\n-        (RepositionSecurityWarningStruct *)param;\n+        static_cast<RepositionSecurityWarningStruct *>(param);\n@@ -1025,6 +1025,15 @@\n-    {\n-        PDATA pData;\n-        JNI_CHECK_PEER_GOTO(self, ret);\n-        AwtWindow *window = (AwtWindow *)pData;\n-\n-        window->RepositionSecurityWarning(env);\n+    PDATA pData;\n+    JNI_CHECK_PEER_GOTO(self, ret);\n+    if (self == NULL) {\n+        env->ExceptionClear();\n+        JNU_ThrowNullPointerException(env, \"self\");\n+        delete rsws;\n+        return;\n+    } else {\n+        pData = JNI_GET_PDATA(self);\n+        if (pData == NULL) {\n+            THROW_NULL_PDATA_IF_NOT_DESTROYED(self);\n+            env->DeleteGlobalRef(self);\n+            delete rsws;\n+            return;\n+        }\n@@ -1032,0 +1041,3 @@\n+    AwtWindow *window = (AwtWindow *)pData;\n+\n+    window->RepositionSecurityWarning(env);\n@@ -1033,1 +1045,0 @@\n-  ret:\n@@ -3121,1 +3132,1 @@\n-    ModalDisableStruct *mds = (ModalDisableStruct *)param;\n+    ModalDisableStruct *mds = static_cast<ModalDisableStruct *>(param);\n@@ -3128,2 +3139,5 @@\n-    {\n-        JNI_CHECK_NULL_GOTO(self, \"peer\", ret);\n+    if (self == NULL) {\n+        env->ExceptionClear();\n+        JNU_ThrowNullPointerException(env, \"self\");\n+        delete mds;\n+    } else {\n@@ -3136,0 +3150,1 @@\n+    }\n@@ -3137,5 +3152,4 @@\n-        window = (AwtWindow *)pData;\n-        windowHWnd = window->GetHWnd();\n-        if (::IsWindow(windowHWnd)) {\n-            AwtWindow::SetAndActivateModalBlocker(windowHWnd, blockerHWnd);\n-        }\n+    window = (AwtWindow *)pData;\n+    windowHWnd = window->GetHWnd();\n+    if (::IsWindow(windowHWnd)) {\n+        AwtWindow::SetAndActivateModalBlocker(windowHWnd, blockerHWnd);\n@@ -3144,1 +3158,0 @@\n-ret:\n","filename":"src\/java.desktop\/windows\/native\/libawt\/windows\/awt_Window.cpp","additions":31,"deletions":18,"binary":false,"changes":49,"status":"modified"}]}