{"files":[{"patch":"@@ -27,2 +27,0 @@\n-#include <functional>\n-#include <memory>\n@@ -6364,3 +6362,3 @@\n-        std::unique_ptr<SetParentStruct> data(static_cast<SetParentStruct*>(param));\n-        std::unique_ptr<std::remove_pointer<jobject>::type, std::function<void (jobject)>> self(data->component, [&env] (jobject self) -> void { env->DeleteGlobalRef(self); });\n-        std::unique_ptr<std::remove_pointer<jobject>::type, std::function<void (jobject)>> parent(data->parentComp, [&env] (jobject parent) -> void { env->DeleteGlobalRef(parent); });\n+        SetParentStruct *data = static_cast<SetParentStruct*>(param);\n+        jobject self = data->component;\n+        jobject parent = data->parentComp;\n@@ -6370,0 +6368,1 @@\n+\n@@ -6371,1 +6370,16 @@\n-        JNI_CHECK_PEER_RETURN(self.get());\n+        if (self == NULL) {\n+            env->ExceptionClear();\n+            JNU_ThrowNullPointerException(env, \"peer\");\n+            env->DeleteGlobalRef(self);\n+            env->DeleteGlobalRef(parent);\n+            delete data;\n+            return;\n+        }\n+        pData = JNI_GET_PDATA(self);\n+        if (pData == NULL) {\n+            THROW_NULL_PDATA_IF_NOT_DESTROYED(self);\n+            env->DeleteGlobalRef(self);\n+            env->DeleteGlobalRef(parent);\n+            delete data;\n+            return;\n+        }\n@@ -6373,1 +6387,16 @@\n-        JNI_CHECK_PEER_RETURN(parent.get());\n+        if (parent == NULL) {\n+            env->ExceptionClear();\n+            JNU_ThrowNullPointerException(env, \"peer\");\n+            env->DeleteGlobalRef(self);\n+            env->DeleteGlobalRef(parent);\n+            delete data;\n+            return;\n+        }\n+        pData = JNI_GET_PDATA(parent);\n+        if (pData == NULL) {\n+            THROW_NULL_PDATA_IF_NOT_DESTROYED(parent);\n+            env->DeleteGlobalRef(self);\n+            env->DeleteGlobalRef(parent);\n+            delete data;\n+            return;\n+        }\n@@ -6383,0 +6412,3 @@\n+        env->DeleteGlobalRef(self);\n+        env->DeleteGlobalRef(parent);\n+        delete data;\n","filename":"src\/java.desktop\/windows\/native\/libawt\/windows\/awt_Component.cpp","additions":39,"deletions":7,"binary":false,"changes":46,"status":"modified"}]}