{"files":[{"patch":"@@ -77,9 +77,0 @@\n-ifeq ($(call isTargetOs, windows), true)\n-  ifeq ($(STATIC_LIBS), true)\n-    GTEST_WIN_EXPORT_FILE := $(JVM_OUTPUTDIR)\/gtest\/static-win-exports.def\n-  else\n-    GTEST_WIN_EXPORT_FILE := $(JVM_OUTPUTDIR)\/gtest\/win-exports.def\n-  endif\n-  JVM_LDFLAGS += -def:$(GTEST_WIN_EXPORT_FILE)\n-endif\n-\n@@ -131,3 +122,1 @@\n-    $(eval $(call CreateWinExportFile, $(GTEST_WIN_EXPORT_FILE), $(BUILD_GTEST_LIBJVM_ALL_OBJS)))\n-\n-  $(BUILD_GTEST_LIBJVM_TARGET): $(GTEST_WIN_EXPORT_FILE)\n+  $(BUILD_GTEST_LIBJVM_TARGET): $(WIN_EXPORT_FILE)\n@@ -136,0 +125,1 @@\n+\n","filename":"make\/hotspot\/lib\/CompileGtest.gmk","additions":2,"deletions":12,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -155,1 +155,1 @@\n-  JVM_LDFLAGS_NO_GTEST += -def:$(WIN_EXPORT_FILE)\n+  JVM_LDFLAGS += -def:$(WIN_EXPORT_FILE)\n@@ -209,1 +209,1 @@\n-    LDFLAGS := $(JVM_LDFLAGS) $(JVM_LDFLAGS_NO_GTEST), \\\n+    LDFLAGS := $(JVM_LDFLAGS), \\\n@@ -242,18 +242,11 @@\n-  # Setup a rule to create a win-exports.def file\n-  # $1: the name of the file to create\n-  # $2: the object targets to depend on\n-  define CreateWinExportFile\n-    # A more correct solution would be to send BUILD_LIBJVM_ALL_OBJS instead of\n-    # cd && *.obj, but this will result in very long command lines, which could be\n-    # problematic.\n-    $1: $2\n-\t$$(call LogInfo, Generating list of symbols to export from object files)\n-\t$$(call MakeDir, $$(@D))\n-\t$$(ECHO) \"EXPORTS\" > $$@.tmp\n-\t$$(CD) $$(BUILD_LIBJVM_OBJECT_DIR) && \\\n-\t    $$(DUMPBIN) -symbols *$$(OBJ_SUFFIX) | $$(AWK) $$(FILTER_SYMBOLS_AWK_SCRIPT) | $$(SORT) -u >> $$@.tmp\n-\t$$(RM) $$@\n-\t$$(MV) $$@.tmp $$@\n-  endef\n-\n-  $(eval $(call CreateWinExportFile, $(WIN_EXPORT_FILE), $(BUILD_LIBJVM_ALL_OBJS)))\n+  # A more correct solution would be to send BUILD_LIBJVM_ALL_OBJS instead of\n+  # cd && *.obj, but this will result in very long command lines, which could be\n+  # problematic.\n+  $(WIN_EXPORT_FILE): $(BUILD_LIBJVM_ALL_OBJS)\n+\t$(call LogInfo, Generating list of symbols to export from object files)\n+\t$(call MakeDir, $(@D))\n+\t$(ECHO) \"EXPORTS\" > $@.tmp\n+\t$(CD) $(BUILD_LIBJVM_OBJECT_DIR) && \\\n+\t    $(DUMPBIN) -symbols *$(OBJ_SUFFIX) | $(AWK) $(FILTER_SYMBOLS_AWK_SCRIPT) | $(SORT) -u >> $@.tmp\n+\t$(RM) $@\n+\t$(MV) $@.tmp $@\n","filename":"make\/hotspot\/lib\/CompileJvm.gmk","additions":13,"deletions":20,"binary":false,"changes":33,"status":"modified"}]}