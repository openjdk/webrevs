{"files":[{"patch":"@@ -77,0 +77,6 @@\n+ifeq ($(call isTargetOs, windows), true)\n+  GTEST_WIN_EXPORT_FILE := $(JVM_OUTPUTDIR)\/gtest\/win-exports.def\n+\n+  JVM_LDFLAGS += -def:$(GTEST_WIN_EXPORT_FILE)\n+endif\n+\n@@ -122,2 +128,1 @@\n-  $(BUILD_GTEST_LIBJVM_TARGET): $(WIN_EXPORT_FILE)\n-endif\n+  $(call CreateWinExportFile, $(GTEST_WIN_EXPORT_FILE), $(BUILD_GTEST_LIBJVM_ALL_OBJS))\n@@ -125,0 +130,2 @@\n+  $(BUILD_GTEST_LIBJVM_TARGET): $(GTEST_WIN_EXPORT_FILE)\n+endif\n","filename":"make\/hotspot\/lib\/CompileGtest.gmk","additions":9,"deletions":2,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -151,1 +151,1 @@\n-  JVM_LDFLAGS += -def:$(WIN_EXPORT_FILE)\n+  JVM_LDFLAGS_NO_GTEST += -def:$(WIN_EXPORT_FILE)\n@@ -205,1 +205,1 @@\n-    LDFLAGS := $(JVM_LDFLAGS), \\\n+    LDFLAGS := $(JVM_LDFLAGS) $(JVM_LDFLAGS_NO_GTEST), \\\n@@ -238,4 +238,8 @@\n-  # A more correct solution would be to send BUILD_LIBJVM_ALL_OBJS instead of\n-  # cd && *.obj, but this will result in very long command lines, which could be\n-  # problematic.\n-  $(WIN_EXPORT_FILE): $(BUILD_LIBJVM_ALL_OBJS)\n+  # Setup a rule to create a win-exports.def file\n+  # $1: the name of the file to create\n+  # $2: the object targets to depend on\n+  define CreateWinExportFile\n+    # A more correct solution would be to send BUILD_LIBJVM_ALL_OBJS instead of\n+    # cd && *.obj, but this will result in very long command lines, which could be\n+    # problematic.\n+    $1: $2\n@@ -250,0 +254,3 @@\n+  endef\n+\n+  $(call CreateWinExportFile, $(WIN_EXPORT_FILE), $(BUILD_LIBJVM_ALL_OBJS))\n","filename":"make\/hotspot\/lib\/CompileJvm.gmk","additions":13,"deletions":6,"binary":false,"changes":19,"status":"modified"}]}