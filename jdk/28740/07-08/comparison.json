{"files":[{"patch":"@@ -42,0 +42,12 @@\n+\/* Testing scenario:\n+ * Several threads are involved:\n+ *  - VT-0: a virtual thread which is interrupt-friendly and constantly interrupted with JVMTI InterruptThread\n+ *  - VT-1: a virtual thread which state is constantly checked with JVMTI GetThreadState\n+ *  - VT-2: a virtual thread: in a loop calls JVMTI InterruptThread(VT-0) and GetThreadState(VT-1)\n+ *  - main: a platform thread: in a loop invokes native method testSuspendResume which suspends and resumes VT-2\n+ * The JVMTI functionis above install a MountUnmountDisabler for target virtual thread (VT-0 or VT-1).\n+ * The goal is to catch VT-2 in an attempt to self-suspend while in a context of MountUnmountDisabler.\n+ * This would mean there is a suspend point while VT-2 is in a context of MountUnmountDisabler.\n+ * The InterruptThread implementation does a Java upcall to j.l.Thread::interrupt().\n+ * The JavaCallWrapper constructor has such a suspend point.\n+ *\/\n","filename":"test\/hotspot\/jtreg\/serviceability\/jvmti\/vthread\/ThreadStateTest2\/ThreadStateTest2.java","additions":12,"deletions":0,"binary":false,"changes":12,"status":"modified"}]}