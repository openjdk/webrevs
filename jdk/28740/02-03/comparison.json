{"files":[{"patch":"@@ -524,1 +524,1 @@\n-  if (allow_suspend && (_handshakee->is_disable_suspend() || _handshakee->is_vthread_transition_disabler())) {\n+  if (allow_suspend && _handshakee->is_disable_suspend()) {\n","filename":"src\/hotspot\/share\/runtime\/handshake.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -502,1 +502,1 @@\n-  _is_vthread_transition_disabler(false),\n+  DEBUG_ONLY(_is_vthread_transition_disabler(false) COMMA)\n@@ -1164,0 +1164,1 @@\n+#ifdef ASSERT\n@@ -1168,1 +1169,0 @@\n-#ifdef ASSERT\n","filename":"src\/hotspot\/share\/runtime\/javaThread.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -737,1 +737,1 @@\n-  bool _is_vthread_transition_disabler;              \/\/ thread currently disabled vthread transitions\n+  DEBUG_ONLY(bool _is_vthread_transition_disabler;)  \/\/ thread currently disabled vthread transitions\n@@ -742,0 +742,1 @@\n+#ifdef ASSERT\n@@ -744,1 +745,0 @@\n-#ifdef ASSERT\n","filename":"src\/hotspot\/share\/runtime\/javaThread.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -289,1 +289,1 @@\n-  JavaThread::current()->set_is_vthread_transition_disabler(true);\n+  DEBUG_ONLY(JavaThread::current()->set_is_vthread_transition_disabler(true);)\n@@ -295,1 +295,1 @@\n-  JavaThread* thread = JavaThread::current();\n+  DEBUG_ONLY(JavaThread* thread = JavaThread::current();)\n@@ -330,1 +330,1 @@\n-  thread->set_is_vthread_transition_disabler(true);\n+  DEBUG_ONLY(thread->set_is_vthread_transition_disabler(true);)\n@@ -353,1 +353,1 @@\n-  JavaThread::current()->set_is_vthread_transition_disabler(false);\n+  DEBUG_ONLY(JavaThread::current()->set_is_vthread_transition_disabler(false);)\n@@ -379,1 +379,1 @@\n-  thread->set_is_vthread_transition_disabler(false);\n+  DEBUG_ONLY(thread->set_is_vthread_transition_disabler(false);)\n","filename":"src\/hotspot\/share\/runtime\/mountUnmountDisabler.cpp","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -44,0 +44,1 @@\n+    assert(!current->is_vthread_transition_disabler(), \"DBG-TMP\");\n","filename":"src\/hotspot\/share\/runtime\/suspendResumeManager.cpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"}]}