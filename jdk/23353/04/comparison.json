{"files":[{"patch":"@@ -3,0 +3,1 @@\n+ * Copyright (c) 2025, Alibaba Group Holding Limited. All Rights Reserved.\n@@ -29,0 +30,1 @@\n+import jdk.internal.misc.Unsafe;\n@@ -433,2 +435,3 @@\n-        if (COMPACT_STRINGS) {\n-            byte[] buf = new byte[size];\n+        byte coder = COMPACT_STRINGS ? LATIN1 : UTF16;\n+        byte[] buf = (byte[]) Unsafe.getUnsafe().allocateUninitializedArray(byte.class, size << coder);\n+        if (coder == LATIN1) {\n@@ -436,1 +439,0 @@\n-            return new String(buf, LATIN1);\n@@ -438,1 +440,0 @@\n-            byte[] buf = new byte[size * 2];\n@@ -440,1 +441,0 @@\n-            return new String(buf, UTF16);\n@@ -442,0 +442,1 @@\n+        return new String(buf, coder);\n","filename":"src\/java.base\/share\/classes\/java\/lang\/Integer.java","additions":6,"deletions":5,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -3,0 +3,1 @@\n+ * Copyright (c) 2025, Alibaba Group Holding Limited. All Rights Reserved.\n@@ -37,0 +38,1 @@\n+import jdk.internal.misc.Unsafe;\n@@ -463,2 +465,3 @@\n-        if (COMPACT_STRINGS) {\n-            byte[] buf = new byte[size];\n+        byte coder = COMPACT_STRINGS ? LATIN1 : UTF16;\n+        byte[] buf = (byte[]) Unsafe.getUnsafe().allocateUninitializedArray(byte.class, size << coder);\n+        if (coder == LATIN1) {\n@@ -466,1 +469,0 @@\n-            return new String(buf, LATIN1);\n@@ -468,1 +470,0 @@\n-            byte[] buf = new byte[size * 2];\n@@ -470,1 +471,0 @@\n-            return new String(buf, UTF16);\n@@ -472,0 +472,1 @@\n+        return new String(buf, coder);\n","filename":"src\/java.base\/share\/classes\/java\/lang\/Long.java","additions":6,"deletions":5,"binary":false,"changes":11,"status":"modified"}]}