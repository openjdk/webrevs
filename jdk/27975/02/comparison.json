{"files":[{"patch":"@@ -402,0 +402,8 @@\n+const Parse* IdealGraphPrinter::parse() {\n+  return _parse;\n+}\n+\n+void IdealGraphPrinter::set_parse(const Parse* parse) {\n+  _parse = parse;\n+}\n+\n@@ -999,0 +1007,11 @@\n+  if (_parse != nullptr) {\n+    if (_parse->map() == nullptr) {\n+      print_prop(\"map\", \"-\");\n+    } else {\n+      print_prop(\"map\", _parse->map()->_idx);\n+    }\n+    print_prop(\"block\", _parse->block()->rpo());\n+    stringStream shortStr;\n+    _parse->flow()->method()->print_short_name(&shortStr);\n+    print_prop(\"method\", shortStr.freeze());\n+  }\n","filename":"src\/hotspot\/share\/opto\/idealGraphPrinter.cpp","additions":19,"deletions":0,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -45,0 +45,1 @@\n+class Parse;\n@@ -118,0 +119,1 @@\n+  const Parse* _parse;\n@@ -159,0 +161,2 @@\n+  const Parse* parse();\n+  void set_parse(const Parse* parser);\n","filename":"src\/hotspot\/share\/opto\/idealGraphPrinter.hpp","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2782,1 +2782,1 @@\n-    jio_snprintf(buffer, sizeof(buffer), \"Bytecode %d: %s, map: %d\", bci(), Bytecodes::name(bc()), map() == nullptr ? -1 : map()->_idx);\n+    jio_snprintf(buffer, sizeof(buffer), \"Bytecode %d: %s\", bci(), Bytecodes::name(bc()));\n@@ -2785,0 +2785,1 @@\n+    printer->set_parse(this);\n@@ -2787,0 +2788,1 @@\n+    printer->set_parse(nullptr);\n","filename":"src\/hotspot\/share\/opto\/parse2.cpp","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2015, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,0 +32,2 @@\n+import com.sun.hotspot.igv.view.EditorTopComponent;\n+\n@@ -89,1 +91,1 @@\n-        return graph.getDisplayName();\n+        return EditorTopComponent.getGraphDisplayName(graph);\n","filename":"src\/utils\/IdealGraphVisualizer\/Coordinator\/src\/main\/java\/com\/sun\/hotspot\/igv\/coordinator\/GraphNode.java","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -260,5 +260,2 @@\n-        if (isDiffGraph) {\n-            return firstGraph.getDisplayName() + \" Δ \" + secondGraph.getDisplayName();\n-        } else {\n-            return getIndex()+1 + \". \" + getName();\n-        }\n+        assert false : \"Use EditorTopComponent::getGraphDisplayName() instead\";\n+        return \"\";\n","filename":"src\/utils\/IdealGraphVisualizer\/Data\/src\/main\/java\/com\/sun\/hotspot\/igv\/data\/InputGraph.java","additions":2,"deletions":5,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -49,0 +49,2 @@\n+    public static final String GRAPH_NAME_SUFFIX = \"graphNameSuffix\";\n+    public static final String GRAPH_NAME_SUFFIX_DEFAULT = \"(map: [map], block #[block] at [method])\";\n","filename":"src\/utils\/IdealGraphVisualizer\/Settings\/src\/main\/java\/com\/sun\/hotspot\/igv\/settings\/Settings.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -31,1 +31,1 @@\n-              <EmptySpace pref=\"29\" max=\"32767\" attributes=\"0\"\/>\n+              <EmptySpace pref=\"15\" max=\"32767\" attributes=\"0\"\/>\n@@ -50,0 +50,1 @@\n+                      <Component id=\"jLabel6\" alignment=\"0\" min=\"-2\" max=\"-2\" attributes=\"0\"\/>\n@@ -51,1 +52,1 @@\n-                  <EmptySpace min=\"-2\" pref=\"39\" max=\"-2\" attributes=\"0\"\/>\n+                  <EmptySpace type=\"separate\" min=\"-2\" max=\"-2\" attributes=\"0\"\/>\n@@ -54,1 +55,1 @@\n-                      <Component id=\"jScrollPane1\" pref=\"470\" max=\"32767\" attributes=\"0\"\/>\n+                      <Component id=\"jScrollPane1\" pref=\"663\" max=\"32767\" attributes=\"0\"\/>\n@@ -56,1 +57,0 @@\n-                      <Component id=\"nodeTinyTextField\" alignment=\"0\" max=\"32767\" attributes=\"0\"\/>\n@@ -58,0 +58,2 @@\n+                      <Component id=\"graphNameSuffixField\" alignment=\"0\" max=\"32767\" attributes=\"0\"\/>\n+                      <Component id=\"nodeTinyTextField\" alignment=\"0\" max=\"32767\" attributes=\"0\"\/>\n@@ -73,1 +75,0 @@\n-                      <Component id=\"jLabel4\" min=\"-2\" max=\"-2\" attributes=\"0\"\/>\n@@ -75,0 +76,1 @@\n+                      <Component id=\"jLabel4\" min=\"-2\" pref=\"18\" max=\"-2\" attributes=\"0\"\/>\n@@ -78,1 +80,1 @@\n-                      <Component id=\"jLabel5\" alignment=\"3\" min=\"-2\" max=\"-2\" attributes=\"0\"\/>\n+                      <Component id=\"jLabel5\" alignment=\"3\" min=\"-2\" pref=\"24\" max=\"-2\" attributes=\"0\"\/>\n@@ -82,3 +84,3 @@\n-                  <Group type=\"103\" groupAlignment=\"3\" attributes=\"0\">\n-                      <Component id=\"jLabel2\" alignment=\"3\" min=\"-2\" max=\"-2\" attributes=\"0\"\/>\n-                      <Component id=\"defaultViewComboBox\" alignment=\"3\" min=\"-2\" max=\"-2\" attributes=\"0\"\/>\n+                  <Group type=\"103\" groupAlignment=\"0\" attributes=\"0\">\n+                      <Component id=\"graphNameSuffixField\" min=\"-2\" max=\"-2\" attributes=\"0\"\/>\n+                      <Component id=\"jLabel6\" min=\"-2\" pref=\"18\" max=\"-2\" attributes=\"0\"\/>\n@@ -86,4 +88,9 @@\n-                  <EmptySpace pref=\"27\" max=\"32767\" attributes=\"0\"\/>\n-                  <Group type=\"103\" groupAlignment=\"3\" attributes=\"0\">\n-                      <Component id=\"portSpinner\" alignment=\"3\" min=\"-2\" max=\"-2\" attributes=\"0\"\/>\n-                      <Component id=\"jLabel3\" alignment=\"3\" min=\"-2\" max=\"-2\" attributes=\"0\"\/>\n+                  <EmptySpace min=\"-2\" pref=\"27\" max=\"-2\" attributes=\"0\"\/>\n+                  <Group type=\"103\" groupAlignment=\"0\" attributes=\"0\">\n+                      <Component id=\"defaultViewComboBox\" min=\"-2\" max=\"-2\" attributes=\"0\"\/>\n+                      <Component id=\"jLabel2\" min=\"-2\" pref=\"18\" max=\"-2\" attributes=\"0\"\/>\n+                  <\/Group>\n+                  <EmptySpace min=\"-2\" pref=\"27\" max=\"-2\" attributes=\"0\"\/>\n+                  <Group type=\"103\" groupAlignment=\"0\" attributes=\"0\">\n+                      <Component id=\"portSpinner\" min=\"-2\" max=\"-2\" attributes=\"0\"\/>\n+                      <Component id=\"jLabel3\" min=\"-2\" pref=\"18\" max=\"-2\" attributes=\"0\"\/>\n@@ -91,0 +98,1 @@\n+                  <EmptySpace max=\"-2\" attributes=\"0\"\/>\n@@ -136,3 +144,0 @@\n-            <Property name=\"background\" type=\"java.awt.Color\" editor=\"org.netbeans.beaninfo.editors.ColorEditor\">\n-              <Color blue=\"ff\" green=\"ff\" red=\"ff\" type=\"rgb\"\/>\n-            <\/Property>\n@@ -152,3 +157,0 @@\n-            <Property name=\"background\" type=\"java.awt.Color\" editor=\"org.netbeans.beaninfo.editors.ColorEditor\">\n-              <Color blue=\"ff\" green=\"ff\" red=\"ff\" type=\"rgb\"\/>\n-            <\/Property>\n@@ -176,0 +178,13 @@\n+        <Component class=\"javax.swing.JTextField\" name=\"graphNameSuffixField\">\n+          <Properties>\n+            <Property name=\"toolTipText\" type=\"java.lang.String\" value=\"Single-line format string for node input lists. Properties are specified with brackets (example: &quot;[method]&quot;).\"\/>\n+          <\/Properties>\n+          <AuxValues>\n+            <AuxValue name=\"JavaCodeGenerator_SerializeTo\" type=\"java.lang.String\" value=\"ViewPanel_graphNameSuffixField\"\/>\n+          <\/AuxValues>\n+        <\/Component>\n+        <Component class=\"javax.swing.JLabel\" name=\"jLabel6\">\n+          <Properties>\n+            <Property name=\"text\" type=\"java.lang.String\" value=\"Graph Name Suffix\"\/>\n+          <\/Properties>\n+        <\/Component>\n","filename":"src\/utils\/IdealGraphVisualizer\/Settings\/src\/main\/java\/com\/sun\/hotspot\/igv\/settings\/ViewPanel.form","additions":34,"deletions":19,"binary":false,"changes":53,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -59,0 +59,2 @@\n+        graphNameSuffixField = new javax.swing.JTextField();\n+        jLabel6 = new javax.swing.JLabel();\n@@ -73,1 +75,0 @@\n-        nodeShortTextField.setBackground(new java.awt.Color(255, 255, 255));\n@@ -78,1 +79,0 @@\n-        nodeTinyTextField.setBackground(new java.awt.Color(255, 255, 255));\n@@ -84,0 +84,4 @@\n+        graphNameSuffixField.setToolTipText(\"Single-line format string for node input lists. Properties are specified with brackets (example: \\\"[method]\\\").\");\n+\n+        org.openide.awt.Mnemonics.setLocalizedText(jLabel6, \"Graph Name Suffix\");\n+\n@@ -95,2 +99,3 @@\n-                    .add(jLabel5))\n-                .add(39, 39, 39)\n+                    .add(jLabel5)\n+                    .add(jLabel6))\n+                .add(18, 18, 18)\n@@ -99,1 +104,1 @@\n-                    .add(jScrollPane1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 470, Short.MAX_VALUE)\n+                    .add(jScrollPane1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 663, Short.MAX_VALUE)\n@@ -101,2 +106,3 @@\n-                    .add(nodeTinyTextField)\n-                    .add(defaultViewComboBox, 0, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))\n+                    .add(defaultViewComboBox, 0, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\n+                    .add(graphNameSuffixField)\n+                    .add(nodeTinyTextField))\n@@ -114,2 +120,2 @@\n-                    .add(jLabel4)\n-                    .add(nodeShortTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))\n+                    .add(nodeShortTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)\n+                    .add(jLabel4, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 18, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))\n@@ -118,1 +124,1 @@\n-                    .add(jLabel5)\n+                    .add(jLabel5, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 24, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)\n@@ -121,5 +127,9 @@\n-                .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)\n-                    .add(jLabel2)\n-                    .add(defaultViewComboBox, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))\n-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 27, Short.MAX_VALUE)\n-                .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)\n+                .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)\n+                    .add(graphNameSuffixField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)\n+                    .add(jLabel6, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 18, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))\n+                .add(27, 27, 27)\n+                .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)\n+                    .add(defaultViewComboBox, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)\n+                    .add(jLabel2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 18, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))\n+                .add(27, 27, 27)\n+                .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)\n@@ -127,1 +137,2 @@\n-                    .add(jLabel3)))\n+                    .add(jLabel3, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 18, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))\n+                .addContainerGap())\n@@ -144,1 +155,1 @@\n-                .addContainerGap(29, Short.MAX_VALUE))\n+                .addContainerGap(15, Short.MAX_VALUE))\n@@ -151,0 +162,1 @@\n+        graphNameSuffixField.setText(Settings.get().get(Settings.GRAPH_NAME_SUFFIX, Settings.GRAPH_NAME_SUFFIX_DEFAULT));\n@@ -159,0 +171,1 @@\n+        Settings.get().put(Settings.GRAPH_NAME_SUFFIX, graphNameSuffixField.getText());\n@@ -168,0 +181,1 @@\n+    private javax.swing.JTextField graphNameSuffixField;\n@@ -173,0 +187,1 @@\n+    private javax.swing.JLabel jLabel6;\n","filename":"src\/utils\/IdealGraphVisualizer\/Settings\/src\/main\/java\/com\/sun\/hotspot\/igv\/settings\/ViewPanel.java","additions":33,"deletions":18,"binary":false,"changes":51,"status":"modified"},{"patch":"@@ -31,0 +31,1 @@\n+import com.sun.hotspot.igv.data.Properties;\n@@ -33,0 +34,1 @@\n+import com.sun.hotspot.igv.settings.Settings;\n@@ -40,0 +42,5 @@\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.Collection;\n+import java.util.Collections;\n+import java.util.HashSet;\n@@ -41,1 +48,2 @@\n-import java.util.*;\n+import java.util.Set;\n+\n@@ -135,1 +143,1 @@\n-            setDisplayName(changedGraph.getDisplayName());\n+            setDisplayName(getGraphDisplayName(changedGraph));\n@@ -255,1 +263,1 @@\n-        setDisplayName(model.getGraph().getDisplayName());\n+        setDisplayName(getGraphDisplayName(model.getGraph()));\n@@ -260,0 +268,14 @@\n+    public static String getGraphDisplayName(InputGraph graph) {\n+        if (graph.isDiffGraph()) {\n+            return getGraphDisplayName(graph.getFirstGraph()) + \" Δ \" +\n+                   getGraphDisplayName(graph.getSecondGraph());\n+        } else {\n+            String suffixTemplate = Settings.get().get(Settings.GRAPH_NAME_SUFFIX,\n+                                                       Settings.GRAPH_NAME_SUFFIX_DEFAULT);\n+            String suffix = graph.getProperties().resolveString(suffixTemplate);\n+            String emptySuffix = new Properties().resolveString(suffixTemplate);\n+            String graphNameSuffix = suffix.equals(emptySuffix) ? \"\" : \" \" + suffix;\n+            return graph.getIndex() + 1 + \". \" + graph.getName() + graphNameSuffix;\n+        }\n+    }\n+\n","filename":"src\/utils\/IdealGraphVisualizer\/View\/src\/main\/java\/com\/sun\/hotspot\/igv\/view\/EditorTopComponent.java","additions":25,"deletions":3,"binary":false,"changes":28,"status":"modified"}]}