{"files":[{"patch":"@@ -409,2 +409,2 @@\n-        } else if (!policy.isValid(offset, length, this.length)) {\n-            throw policy.makeException(this, offset, length);\n+        } else {\n+            policy.validate(this, offset, length);\n@@ -514,1 +514,9 @@\n-        boolean isValid(long offset, long length, long totalLength);\n+        default void validate(AbstractMemorySegmentImpl segment, long offset, long length) {\n+            if (!isValid(offset, length, segment.length)) {\n+                throw makeException(segment, offset, length);\n+            }\n+        }\n+\n+        default boolean isValid(long offset, long length, long totalLength) {\n+            return length >= 0 && offset >= 0 && offset <= totalLength - length;\n+        }\n@@ -524,5 +532,0 @@\n-        @Override\n-        public boolean isValid(long offset, long length, long totalLength) {\n-            return length > 0 && offset >= 0 && offset <= totalLength - length;\n-        }\n-\n@@ -539,5 +542,0 @@\n-        @Override\n-        public boolean isValid(long offset, long length, long totalLength) {\n-            return length >= 0 && offset >= 0 && offset <= totalLength - length;\n-        }\n-\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/foreign\/AbstractMemorySegmentImpl.java","additions":11,"deletions":13,"binary":false,"changes":24,"status":"modified"}]}