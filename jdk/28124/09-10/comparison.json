{"files":[{"patch":"@@ -36,0 +36,1 @@\n+import jdk.internal.vm.annotation.DontInline;\n@@ -405,3 +406,1 @@\n-            String msg = String.format(\"Out of bound access on segment %s; attempting to get slice of length %d at offset %d \" +\n-                    \"which is outside the valid range 0 <= offset+length < byteSize (=%d)\", this, length, offset, this.length);\n-            throw new IndexOutOfBoundsException(msg);\n+            throwOutOfBounds(offset, length, \/* isSlice = *\/ true);\n@@ -416,3 +415,1 @@\n-            String msg = String.format(\"Out of bound access on segment %s; attempting to access an element of length %d at offset %d \" +\n-                    \"which is outside the valid range 0 <= offset+length < byteSize (=%d)\", this, length, offset, this.length);\n-            throw new IndexOutOfBoundsException(msg);\n+            throwOutOfBounds(offset, length, \/* isSlice = *\/ false);\n@@ -432,0 +429,9 @@\n+    @DontInline\n+    private void throwOutOfBounds(long offset, long length, boolean isSlice) {\n+        String action = isSlice ? \"get slice\" : \"access an element\";\n+        String msg = String.format(\"Out of bound access on segment %s; attempting to %s of length %d at offset %d \" +\n+                        \"which is outside the valid range 0 <= offset+length < byteSize (=%d)\",\n+                this, action, length, offset, this.length);\n+        throw new IndexOutOfBoundsException(msg);\n+    }\n+\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/foreign\/AbstractMemorySegmentImpl.java","additions":12,"deletions":6,"binary":false,"changes":18,"status":"modified"}]}