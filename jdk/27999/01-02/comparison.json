{"files":[{"patch":"@@ -917,5 +917,4 @@\n-            int blen = (coder == LATIN1) ? ae.encodeFromLatin1(val, 0, len, ba)\n-                    : ae.encodeFromUTF16(val, 0, len, ba);\n-            if (blen != -1) {\n-                return trimArray(ba, blen);\n-            }\n+            int blen = coder == LATIN1\n+                    ? ae.encodeFromLatin1(val, 0, len, ba, 0)\n+                    : ae.encodeFromUTF16(val, 0, len, ba, 0);\n+            return trimArray(ba, blen);\n","filename":"src\/java.base\/share\/classes\/java\/lang\/String.java","additions":4,"deletions":5,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -35,3 +35,1 @@\n-    default int encodeFromLatin1(byte[] src, int sp, int len, byte[] dst) {\n-        return -1;\n-    }\n+    int encodeFromLatin1(byte[] src, int sp, int len, byte[] dst, int dp);\n@@ -39,3 +37,3 @@\n-    default int encodeFromUTF16(byte[] src, int sp, int len, byte[] dst) {\n-        return -1;\n-    }\n+    int encodeFromUTF16(byte[] src, int sp, int len, byte[] dst, int dp);\n+\n+    boolean isASCIICompatible();\n@@ -43,3 +41,0 @@\n-    default boolean isASCIICompatible() {\n-        return false;\n-    }\n","filename":"src\/java.base\/share\/classes\/sun\/nio\/cs\/ArrayEncoder.java","additions":4,"deletions":9,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -397,2 +397,1 @@\n-    private static class Encoder extends CharsetEncoder\n-                                 implements ArrayEncoder {\n+    private static class Encoder extends CharsetEncoder {\n","filename":"src\/java.base\/share\/classes\/sun\/nio\/cs\/CESU_8.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -685,2 +685,1 @@\n-        public int encodeFromLatin1(byte[] src, int sp, int len, byte[] dst) {\n-            int dp = 0;\n+        public int encodeFromLatin1(byte[] src, int sp, int len, byte[] dst, int dp) {\n@@ -711,2 +710,1 @@\n-        public int encodeFromUTF16(byte[] src, int sp, int len, byte[] dst) {\n-            int dp = 0;\n+        public int encodeFromUTF16(byte[] src, int sp, int len, byte[] dst, int dp) {\n@@ -971,2 +969,1 @@\n-        public int encodeFromLatin1(byte[] src, int sp, int len, byte[] dst) {\n-            int dp = 0;\n+        public int encodeFromLatin1(byte[] src, int sp, int len, byte[] dst, int dp) {\n@@ -1007,2 +1004,1 @@\n-        public int encodeFromUTF16(byte[] src, int sp, int len, byte[] dst) {\n-            int dp = 0;\n+        public int encodeFromUTF16(byte[] src, int sp, int len, byte[] dst, int dp) {\n","filename":"src\/java.base\/share\/classes\/sun\/nio\/cs\/DoubleByte.java","additions":4,"deletions":8,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -355,2 +355,1 @@\n-        public int encodeFromUTF16(byte[] src, int sp, int len, byte[] dst) {\n-            int dp = 0;\n+        public int encodeFromUTF16(byte[] src, int sp, int len, byte[] dst, int dp) {\n","filename":"src\/java.base\/share\/classes\/sun\/nio\/cs\/HKSCS.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -294,2 +294,1 @@\n-        public int encodeFromLatin1(byte[] src, int sp, int len, byte[] dst) {\n-            int dp = 0;\n+        public int encodeFromLatin1(byte[] src, int sp, int len, byte[] dst, int dp) {\n@@ -310,2 +309,1 @@\n-        public int encodeFromUTF16(byte[] src, int sp, int len, byte[] dst) {\n-            int dp = 0;\n+        public int encodeFromUTF16(byte[] src, int sp, int len, byte[] dst, int dp) {\n","filename":"src\/java.base\/share\/classes\/sun\/nio\/cs\/SingleByte.java","additions":2,"deletions":4,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -195,1 +195,1 @@\n-     * ArrayEncoder#encodeFromLatin1(byte[], int, int, byte[])\n+     * ArrayEncoder#encodeFromLatin1(byte[], int, int, byte[], int)\n@@ -205,1 +205,1 @@\n-        int dp = arrayEncoder.encodeFromLatin1(sa, 0, 1, da);\n+        int dp = arrayEncoder.encodeFromLatin1(sa, 0, 1, da, 0);\n","filename":"test\/jdk\/sun\/nio\/cs\/TestEncoderReplaceLatin1.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -185,1 +185,1 @@\n-     * ArrayEncoder#encodeFromUTF16(byte[], int, int, byte[])\n+     * ArrayEncoder#encodeFromUTF16(byte[], int, int, byte[], int)\n@@ -194,1 +194,1 @@\n-        int dp = arrayEncoder.encodeFromUTF16(unmappableUTF16Bytes, 0, unmappableUTF16Bytes.length >>> 1, da);\n+        int dp = arrayEncoder.encodeFromUTF16(unmappableUTF16Bytes, 0, unmappableUTF16Bytes.length >>> 1, da, 0);\n","filename":"test\/jdk\/sun\/nio\/cs\/TestEncoderReplaceUTF16.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}