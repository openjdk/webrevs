{"files":[{"patch":"@@ -131,1 +131,1 @@\n-  \/\/ -34 [ saved Floating-point Control and Status Register ] <--- sp_after_call\n+  \/\/ -34 [ saved FRM in Floating-point Control and Status Register ] <--- sp_after_call\n@@ -171,1 +171,1 @@\n-    fcsr_off           = sp_after_call_off,\n+    frm_off            = sp_after_call_off,\n@@ -219,1 +219,1 @@\n-    const Address fcsr_save     (fp, fcsr_off           * wordSize);\n+    const Address frm_save      (fp, frm_off           * wordSize);\n@@ -302,2 +302,2 @@\n-    __ csrr(t1, CSR_FCSR);\n-    __ sd(t1, fcsr_save);\n+    __ frrm(t0);\n+    __ sd(t0, frm_save);\n@@ -306,1 +306,5 @@\n-    __ csrwi(CSR_FRM, __ RoundingMode::rne);\n+    Label skip_fsrmi;\n+    __ mv(t1, __ RoundingMode::rne);\n+    __ beq(t0, t1, skip_fsrmi);\n+    __ fsrmi(__ RoundingMode::rne);\n+    __ bind(skip_fsrmi);\n@@ -428,2 +432,6 @@\n-    __ ld(t1, fcsr_save);\n-    __ csrw(CSR_FCSR, t1);\n+    Label skip_fsrm;\n+    __ ld(t0, frm_save);\n+    __ frrm(t1);\n+    __ beq(t0, t1, skip_fsrm);\n+    __ fsrm(t0);\n+    __ bind(skip_fsrm);\n","filename":"src\/hotspot\/cpu\/riscv\/stubGenerator_riscv.cpp","additions":16,"deletions":8,"binary":false,"changes":24,"status":"modified"}]}