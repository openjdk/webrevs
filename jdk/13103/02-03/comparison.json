{"files":[{"patch":"@@ -34,1 +34,5 @@\n-struct CountTrailingZerosImpl;\n+struct CountTrailingZerosImpl {\n+  static inline unsigned call(unsigned int x);\n+  static inline unsigned call(unsigned long x);\n+  static inline unsigned call(unsigned long long x);\n+};\n@@ -55,4 +59,3 @@\n-struct CountTrailingZerosImpl {\n-  static inline unsigned call(unsigned int x) {\n-    return __builtin_ctz(x);\n-  }\n+inline unsigned CountTrailingZerosImpl::call(unsigned int x) {\n+  return __builtin_ctz(x);\n+}\n@@ -60,3 +63,3 @@\n-  static inline unsigned call(unsigned long x) {\n-    return __builtin_ctzl(x);\n-  }\n+inline unsigned CountTrailingZerosImpl::call(unsigned long x) {\n+  return __builtin_ctzl(x);\n+}\n@@ -64,4 +67,3 @@\n-  static inline unsigned call(unsigned long long x) {\n-    return __builtin_ctzll(x);\n-  }\n-};\n+inline unsigned CountTrailingZerosImpl::call(unsigned long long x) {\n+  return __builtin_ctzll(x);\n+}\n@@ -81,4 +83,3 @@\n-struct CountTrailingZerosImpl {\n-  static inline unsigned call(unsigned int x) {\n-    return call(static_cast<unsigned long>(x));\n-  }\n+inline unsigned CountTrailingZerosImpl::call(unsigned int x) {\n+  return call(static_cast<unsigned long>(x));\n+}\n@@ -86,6 +87,6 @@\n-  static inline unsigned call(unsigned long x) {\n-    unsigned long index;\n-    unsigned char result = _BitScanForward(&index, x);\n-    postcond(result != 0);\n-    return static_cast<unsigned>(index);\n-  }\n+inline unsigned CountTrailingZerosImpl::call(unsigned long x) {\n+  unsigned long index;\n+  unsigned char result = _BitScanForward(&index, x);\n+  postcond(result != 0);\n+  return static_cast<unsigned>(index);\n+}\n@@ -93,1 +94,1 @@\n-  static inline unsigned call(unsigned __int64 x) {\n+inline unsigned CountTrailingZerosImpl::call(unsigned long long x) {\n@@ -95,4 +96,4 @@\n-    unsigned long index;\n-    unsigned char result = _BitScanForward64(&index, x);\n-    postcond(result != 0);\n-    return static_cast<unsigned>(index);\n+  unsigned long index;\n+  unsigned char result = _BitScanForward64(&index, x);\n+  postcond(result != 0);\n+  return static_cast<unsigned>(index);\n@@ -100,12 +101,9 @@\n-    unsigned long index;\n-    unsigned long low = static_cast<unsigned long>(x);\n-    if (low != 0ul) {\n-      unsigned char result = _BitScanForward(&index, low);\n-      postcond(result != 0);\n-    } else {\n-      unsigned char result = _BitScanForward(&index, static_cast<unsigned long>(x >> 32));\n-      postcond(result != 0);\n-      index += 32ul;\n-    }\n-    return static_cast<unsigned>(index);\n-#endif\n+  unsigned long index;\n+  unsigned long low = static_cast<unsigned long>(x);\n+  if (low != 0ul) {\n+    unsigned char result = _BitScanForward(&index, low);\n+    postcond(result != 0);\n+  } else {\n+    unsigned char result = _BitScanForward(&index, static_cast<unsigned long>(x >> 32));\n+    postcond(result != 0);\n+    index += 32ul;\n@@ -113,1 +111,3 @@\n-};\n+  return static_cast<unsigned>(index);\n+#endif\n+}\n","filename":"src\/hotspot\/share\/utilities\/count_trailing_zeros.hpp","additions":40,"deletions":40,"binary":false,"changes":80,"status":"modified"}]}