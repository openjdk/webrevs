{"files":[{"patch":"@@ -60,1 +60,1 @@\n-      u2* probe =_indices.put_if_absent(entry, i, &created);\n+      _index_map.put_if_absent(entry, i, &created);\n@@ -63,1 +63,1 @@\n-        _entries.append(entry);\n+        _added_entries.append(entry);\n@@ -72,1 +72,1 @@\n-  int new_size = _orig->length() + _entries.length() - _orig_cp_added;\n+  int new_size = _orig->length() + _added_entries.length() - _orig_cp_added;\n@@ -79,1 +79,1 @@\n-  u2* probe = _indices.put_if_absent(bcpe, index, &created);\n+  u2* probe = _index_map.put_if_absent(bcpe, index, &created);\n@@ -81,1 +81,1 @@\n-    _entries.append(bcpe);\n+    _added_entries.append(bcpe);\n@@ -89,1 +89,1 @@\n-  if (_entries.length() == 0) {\n+  if (_added_entries.length() == 0) {\n@@ -93,1 +93,1 @@\n-  int new_size = _orig->length() + _entries.length() - _orig_cp_added;\n+  int new_size = _orig->length() + _added_entries.length() - _orig_cp_added;\n@@ -105,3 +105,6 @@\n-  for (int i = _orig_cp_added; i < _entries.length(); ++i) {\n-    BytecodeCPEntry entry = _entries.at(i);\n-    u2* value = _indices.get(entry);\n+  for (int i = _orig_cp_added; i < _added_entries.length(); ++i) {\n+    \/\/ Add new entries that we added to the temporary constant pool, to the\n+    \/\/ newly creatd constant pool.\n+    BytecodeCPEntry entry = _added_entries.at(i);\n+    \/\/ Get the constant pool index saved in the hashtable for this new entry.\n+    u2* value = _index_map.get(entry);\n","filename":"src\/hotspot\/share\/classfile\/bytecodeAssembler.cpp","additions":13,"deletions":10,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -131,2 +131,2 @@\n-  GrowableArray<BytecodeCPEntry> _entries;\n-  IndexHash _indices;\n+  GrowableArray<BytecodeCPEntry> _added_entries;\n+  IndexHash _index_map;\n@@ -144,1 +144,1 @@\n-  BytecodeCPEntry const& at(u2 index) const { return _entries.at(index); }\n+  BytecodeCPEntry const& at(u2 index) const { return _added_entries.at(index); }\n","filename":"src\/hotspot\/share\/classfile\/bytecodeAssembler.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"}]}