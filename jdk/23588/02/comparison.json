{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -85,10 +85,2 @@\n-        Deflater deflater = new Deflater(compressionLevel);\n-        deflater.setInput(bytesIn);\n-        ByteArrayOutputStream stream = new ByteArrayOutputStream(bytesIn.length);\n-        byte[] buffer = new byte[1024];\n-\n-        deflater.finish();\n-        while (!deflater.finished()) {\n-            int count = deflater.deflate(buffer);\n-            stream.write(buffer, 0, count);\n-        }\n+        try (Deflater deflater = new Deflater(compressionLevel);\n+             ByteArrayOutputStream stream = new ByteArrayOutputStream(bytesIn.length)) {\n@@ -96,5 +88,1 @@\n-        try {\n-            stream.close();\n-        } catch (IOException ex) {\n-            return bytesIn;\n-        }\n+            deflater.setInput(bytesIn);\n@@ -102,2 +90,1 @@\n-        byte[] bytesOut = stream.toByteArray();\n-        deflater.end();\n+            byte[] buffer = new byte[1024];\n@@ -105,1 +92,14 @@\n-        return bytesOut;\n+            deflater.finish();\n+            while (!deflater.finished()) {\n+                int count = deflater.deflate(buffer);\n+                stream.write(buffer, 0, count);\n+            }\n+            return stream.toByteArray(); \/\/ the compressed output\n+        } catch (IOException e) {\n+            \/\/ the IOException is only declared by ByteArrayOutputStream.close()\n+            \/\/ but the impl of ByteArrayOutputStream.close() is a no-op, so for\n+            \/\/ all practical purposes there should never be an IOException thrown\n+            assert false : \"unexpected \" + e;\n+            \/\/ don't propagate the exception, instead return the original uncompressed input\n+            return bytesIn;\n+        }\n","filename":"src\/jdk.jlink\/share\/classes\/jdk\/tools\/jlink\/internal\/plugins\/ZipPlugin.java","additions":19,"deletions":19,"binary":false,"changes":38,"status":"modified"}]}