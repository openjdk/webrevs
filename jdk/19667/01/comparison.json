{"files":[{"patch":"@@ -5244,8 +5244,1 @@\n-        Type underlyingType =\n-                attribTree(tree.underlyingType, env, new ResultInfo(KindSelector.TYP_PCK, Type.noType));\n-        if (underlyingType.hasTag(PACKAGE)) {\n-            \/\/ Type annotations are not admissible on packages, but we handle packages here to\n-            \/\/ report better diagnostics later in validateAnnotatedType.\n-            result = tree.type = underlyingType;\n-            return;\n-        }\n+        Type underlyingType = attribType(tree.underlyingType, env);\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/comp\/Attr.java","additions":1,"deletions":8,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -0,0 +1,16 @@\n+\/*\n+ * @test \/nodynamiccopyright\/\n+ * @bug 8026564 8043226\n+ * @summary 8334055\n+ * @compile\/fail\/ref=CantAnnotateMissingSymbol.out -XDrawDiagnostics CantAnnotateMissingSymbol.java\n+ *\/\n+\n+import java.lang.annotation.*;\n+import java.util.List;\n+\n+class CantAnnotateMissingSymbol {\n+    List<@TA NoSuch> x;\n+}\n+\n+@Target(ElementType.TYPE_USE)\n+@interface TA { }\n","filename":"test\/langtools\/tools\/javac\/annotations\/typeAnnotations\/failures\/CantAnnotateMissingSymbol.java","additions":16,"deletions":0,"binary":false,"changes":16,"status":"added"},{"patch":"@@ -0,0 +1,2 @@\n+CantAnnotateMissingSymbol.java:12:14: compiler.err.cant.resolve.location: kindname.class, NoSuch, , , (compiler.misc.location: kindname.class, CantAnnotateMissingSymbol, null)\n+1 error\n","filename":"test\/langtools\/tools\/javac\/annotations\/typeAnnotations\/failures\/CantAnnotateMissingSymbol.out","additions":2,"deletions":0,"binary":false,"changes":2,"status":"added"},{"patch":"@@ -3,1 +3,1 @@\n- * @bug 8026564 8043226\n+ * @bug 8026564 8043226 8334055\n","filename":"test\/langtools\/tools\/javac\/annotations\/typeAnnotations\/failures\/CantAnnotatePackages.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -0,0 +1,3 @@\n+CantAnnotatePackages.java:16:14: compiler.err.cant.resolve.location: kindname.class, java, , , (compiler.misc.location: kindname.class, CantAnnotatePackages, null)\n+CantAnnotatePackages.java:17:9: compiler.err.cant.resolve.location: kindname.class, lang, , , (compiler.misc.location: kindname.package, java, null)\n+CantAnnotatePackages.java:18:14: compiler.err.cant.resolve.location: kindname.class, lang, , , (compiler.misc.location: kindname.package, java, null)\n@@ -2,3 +5,0 @@\n-CantAnnotatePackages.java:16:14: compiler.err.type.annotation.inadmissible: (compiler.misc.type.annotation.1: @TA), java.lang, @TA java.lang.Object\n-CantAnnotatePackages.java:17:9: compiler.err.type.annotation.inadmissible: (compiler.misc.type.annotation.1: @TA), java.lang, @TA java.lang.Object\n-CantAnnotatePackages.java:18:14: compiler.err.type.annotation.inadmissible: (compiler.misc.type.annotation.1: @TA), java.lang, @TA java.lang.Object\n","filename":"test\/langtools\/tools\/javac\/annotations\/typeAnnotations\/failures\/CantAnnotatePackages.out","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -3,1 +3,1 @@\n- * @bug 8006733 8006775 8043226\n+ * @bug 8006733 8006775 8043226 8334055\n","filename":"test\/langtools\/tools\/javac\/annotations\/typeAnnotations\/failures\/CantAnnotateScoping.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1,1 +1,3 @@\n-CantAnnotateScoping.java:68:18: compiler.err.doesnt.exist: java.XXX\n+CantAnnotateScoping.java:63:9: compiler.err.cant.resolve.location: kindname.class, lang, , , (compiler.misc.location: kindname.package, java, null)\n+CantAnnotateScoping.java:68:9: compiler.err.cant.resolve.location: kindname.class, XXX, , , (compiler.misc.location: kindname.package, java, null)\n+CantAnnotateScoping.java:71:9: compiler.err.cant.resolve.location: kindname.class, lang, , , (compiler.misc.location: kindname.package, java, null)\n@@ -6,3 +8,0 @@\n-CantAnnotateScoping.java:63:11: compiler.err.annotation.type.not.applicable.to.type: DA\n-CantAnnotateScoping.java:68:11: compiler.err.annotation.type.not.applicable.to.type: DA\n-CantAnnotateScoping.java:71:9: compiler.err.type.annotation.inadmissible: (compiler.misc.type.annotation.1: @TA), java.lang, @TA java.lang.Object\n@@ -13,1 +12,1 @@\n-12 errors\n+11 errors\n","filename":"test\/langtools\/tools\/javac\/annotations\/typeAnnotations\/failures\/CantAnnotateScoping.out","additions":4,"deletions":5,"binary":false,"changes":9,"status":"modified"}]}