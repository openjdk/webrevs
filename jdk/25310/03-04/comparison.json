{"files":[{"patch":"@@ -35,1 +35,0 @@\n-import java.util.Arrays;\n@@ -303,10 +302,5 @@\n-            ByteArrayOutputStream baos = new ByteArrayOutputStream();\n-            GZIPOutputStream gos = new GZIPOutputStream(baos);\n-            final int decompressedLen = input.length;\n-            gos.write(input, 0, decompressedLen);\n-            gos.finish();\n-\n-            if (SSLLogger.isOn && SSLLogger.isOn(\"ssl,handshake\")) {\n-                SSLLogger.fine(\"decompressed bytes: \" + decompressedLen\n-                        + \"; compressed bytes: \" + baos.size());\n-            }\n+            try (ByteArrayOutputStream baos = new ByteArrayOutputStream();\n+                    GZIPOutputStream gos = new GZIPOutputStream(baos)) {\n+                final int decompressedLen = input.length;\n+                gos.write(input, 0, decompressedLen);\n+                gos.finish();\n@@ -314,1 +308,7 @@\n-            return baos.toByteArray();\n+                if (SSLLogger.isOn && SSLLogger.isOn(\"ssl,handshake\")) {\n+                    SSLLogger.finest(\"decompressed bytes: \" + decompressedLen\n+                            + \"; compressed bytes: \" + baos.size());\n+                }\n+\n+                return baos.toByteArray();\n+            }\n@@ -323,3 +323,3 @@\n-            GZIPInputStream gis = new GZIPInputStream(\n-                    new ByteArrayInputStream(bytes));\n-            byte[] out = gis.readAllBytes();\n+            try (GZIPInputStream gis = new GZIPInputStream(\n+                    new ByteArrayInputStream(bytes))) {\n+                byte[] out = gis.readAllBytes();\n@@ -327,4 +327,4 @@\n-            if (SSLLogger.isOn && SSLLogger.isOn(\"ssl,handshake\")) {\n-                SSLLogger.fine(\"compressed bytes: \" + compressedLen\n-                        + \"; decompressed bytes: \" + out.length);\n-            }\n+                if (SSLLogger.isOn && SSLLogger.isOn(\"ssl,handshake\")) {\n+                    SSLLogger.finest(\"compressed bytes: \" + compressedLen\n+                            + \"; decompressed bytes: \" + out.length);\n+                }\n@@ -332,1 +332,2 @@\n-            return ByteBuffer.wrap(out);\n+                return ByteBuffer.wrap(out);\n+            }\n","filename":"src\/java.base\/share\/classes\/sun\/security\/ssl\/SessionTicketExtension.java","additions":21,"deletions":20,"binary":false,"changes":41,"status":"modified"}]}