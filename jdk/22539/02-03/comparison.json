{"files":[{"patch":"@@ -133,21 +133,4 @@\n-        if (length < 3) {\n-            switch ((int) length) {\n-                case 0:\n-                    \/\/ There can be no null terminator present\n-                    segment.scope.checkValidState();\n-                    throw nullNotFound(segment, fromOffset, toOffset);\n-                case 1:\n-                    if (SCOPED_MEMORY_ACCESS.getByte(segment.sessionImpl(), segment.unsafeGetBase(), segment.unsafeGetOffset() + fromOffset) == 0) {\n-                        return 0;\n-                    }\n-                    throw nullNotFound(segment, fromOffset, toOffset);\n-                case 2:\n-                    final short val = SCOPED_MEMORY_ACCESS.getShortUnaligned(segment.sessionImpl(), segment.unsafeGetBase(), segment.unsafeGetOffset() + fromOffset, !Architecture.isLittleEndian());\n-                    if ((val & 0x00ff) == 0) {\n-                        return 0;\n-                    }\n-                    if ((val & 0xff00) == 0) {\n-                        return 1;\n-                    }\n-                    throw nullNotFound(segment, fromOffset, toOffset);\n-            }\n+        if (length < Byte.BYTES) {\n+            \/\/ There can be no null terminator present\n+            segment.scope.checkValidState();\n+            throw nullNotFound(segment, fromOffset, toOffset);\n@@ -184,21 +167,4 @@\n-        if (length < 3 * Short.BYTES) {\n-            switch ((int) length >> 1) {\n-                case 0:\n-                    \/\/ There can be no null terminator present\n-                    segment.scope.checkValidState();\n-                    throw nullNotFound(segment, fromOffset, toOffset);\n-                case 1:\n-                    if (SCOPED_MEMORY_ACCESS.getShortUnaligned(segment.sessionImpl(), segment.unsafeGetBase(), segment.unsafeGetOffset() + fromOffset, !Architecture.isLittleEndian()) == 0) {\n-                        return 0;\n-                    }\n-                    throw nullNotFound(segment, fromOffset, toOffset);\n-                case 2:\n-                    final int val = SCOPED_MEMORY_ACCESS.getIntUnaligned(segment.sessionImpl(), segment.unsafeGetBase(), segment.unsafeGetOffset() + fromOffset, !Architecture.isLittleEndian());\n-                    if ((val & 0x0000_ffff) == 0) {\n-                        return 0;\n-                    }\n-                    if ((val & 0xffff_0000) == 0) {\n-                        return Short.BYTES;\n-                    }\n-                    throw nullNotFound(segment, fromOffset, toOffset);\n-            }\n+        if (length < Short.BYTES) {\n+            \/\/ There can be no null terminator present\n+            segment.scope.checkValidState();\n+            throw nullNotFound(segment, fromOffset, toOffset);\n@@ -237,21 +203,4 @@\n-        if (length < 3 * Integer.BYTES) {\n-            switch ((int) length >> 2) {\n-                case 0:\n-                    \/\/ There can be no null terminator present\n-                    segment.scope.checkValidState();\n-                    throw nullNotFound(segment, fromOffset, toOffset);\n-                case 1:\n-                    if (SCOPED_MEMORY_ACCESS.getIntUnaligned(segment.sessionImpl(), segment.unsafeGetBase(), segment.unsafeGetOffset() + fromOffset, !Architecture.isLittleEndian()) == 0) {\n-                        return 0;\n-                    }\n-                    throw nullNotFound(segment, fromOffset, toOffset);\n-                case 2:\n-                    final long val = SCOPED_MEMORY_ACCESS.getLongUnaligned(segment.sessionImpl(), segment.unsafeGetBase(), segment.unsafeGetOffset() + fromOffset, !Architecture.isLittleEndian());\n-                    if ((val & 0x0000_0000__ffff_ffffL) == 0) {\n-                        return 0;\n-                    }\n-                    if ((val & 0xffff_ffff__0000_0000L) == 0) {\n-                        return Integer.BYTES;\n-                    }\n-                    throw nullNotFound(segment, fromOffset, toOffset);\n-            }\n+        if (length < Integer.BYTES) {\n+            \/\/ There can be no null terminator present\n+            segment.scope.checkValidState();\n+            throw nullNotFound(segment, fromOffset, toOffset);\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/foreign\/StringSupport.java","additions":12,"deletions":63,"binary":false,"changes":75,"status":"modified"}]}