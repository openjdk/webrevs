{"files":[{"patch":"@@ -693,1 +693,3 @@\n-            if (!name.toString().startsWith(\"on\")) {\n+            \/\/ custom \"data-*\" attributes are also accepted\n+            var attrName = name.toString();\n+            if (!attrName.startsWith(\"on\") && !attrName.startsWith(\"data-\")) {\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclint\/Checker.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2010, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -437,0 +437,1 @@\n+        ACCESSKEY(true),\n@@ -440,15 +441,17 @@\n-        ARIA_ACTIVEDESCENDANT,\n-        ARIA_CONTROLS,\n-        ARIA_DESCRIBEDBY,\n-        ARIA_EXPANDED,\n-        ARIA_LABEL,\n-        ARIA_LABELLEDBY,\n-        ARIA_LEVEL,\n-        ARIA_MULTISELECTABLE,\n-        ARIA_OWNS,\n-        ARIA_POSINSET,\n-        ARIA_SETSIZE,\n-        ARIA_READONLY,\n-        ARIA_REQUIRED,\n-        ARIA_SELECTED,\n-        ARIA_SORT,\n+        ARIA_ACTIVEDESCENDANT(true),\n+        ARIA_CONTROLS(true),\n+        ARIA_DESCRIBEDBY(true),\n+        ARIA_EXPANDED(true),\n+        ARIA_LABEL(true),\n+        ARIA_LABELLEDBY(true),\n+        ARIA_LEVEL(true),\n+        ARIA_MULTISELECTABLE(true),\n+        ARIA_OWNS(true),\n+        ARIA_POSINSET(true),\n+        ARIA_READONLY(true),\n+        ARIA_REQUIRED(true),\n+        ARIA_SELECTED(true),\n+        ARIA_SETSIZE(true),\n+        ARIA_SORT(true),\n+        AUTOCAPITALIZE(true),\n+        AUTOFOCUS(true),\n@@ -459,1 +462,0 @@\n-        CELLSPACING,\n@@ -461,0 +463,1 @@\n+        CELLSPACING,\n@@ -465,0 +468,1 @@\n+        CLASS(true),\n@@ -466,1 +470,0 @@\n-        CLASS,\n@@ -470,0 +473,1 @@\n+        CONTENTEDITABLE(true),\n@@ -473,0 +477,3 @@\n+        DIR(true),\n+        DRAGGABLE(true),\n+        ENTERKEYHINT(true),\n@@ -478,0 +485,1 @@\n+        HIDDEN(true),\n@@ -480,1 +488,10 @@\n-        ID,\n+        ID(true),\n+        INERT(true),\n+        INPUTMODE(true),\n+        IS(true),\n+        ITEMID(true),\n+        ITEMPROP(true),\n+        ITEMREF(true),\n+        ITEMSCOPE(true),\n+        ITEMTYPE(true),\n+        LANG(true),\n@@ -486,0 +503,1 @@\n+        NONCE(true),\n@@ -488,0 +506,1 @@\n+        POPOVER(true),\n@@ -500,0 +519,1 @@\n+        SPELLCHECK(true),\n@@ -502,1 +522,1 @@\n-        STYLE,\n+        STYLE(true),\n@@ -504,0 +524,1 @@\n+        TABINDEX(true),\n@@ -506,0 +527,2 @@\n+        TITLE(true),\n+        TRANSLATE(true),\n@@ -512,1 +535,2 @@\n-        WIDTH;\n+        WIDTH,\n+        WRITINGSUGGESTIONS(true);\n@@ -515,0 +539,1 @@\n+        private final boolean isGlobal;\n@@ -517,0 +542,4 @@\n+            this(false);\n+        }\n+\n+        Attr(boolean flag) {\n@@ -518,0 +547,5 @@\n+            isGlobal = flag;\n+        }\n+\n+        public boolean isGlobal() {\n+            return isGlobal;\n@@ -635,2 +669,7 @@\n-        AttrKind k = attrs.get(getAttr(attrName)); \/\/ null-safe\n-        return (k == null) ? AttrKind.INVALID : k;\n+        Attr attr = getAttr(attrName);\n+        if (attr == null) {\n+            return AttrKind.INVALID;\n+        }\n+        return attr.isGlobal() ?\n+                AttrKind.OK :\n+                attrs.getOrDefault(attr, AttrKind.INVALID);\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclint\/HtmlTag.java","additions":62,"deletions":23,"binary":false,"changes":85,"status":"modified"},{"patch":"@@ -0,0 +1,90 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug      8322708\n+ * @summary  Test to make sure global tags work properly\n+ * @library  \/tools\/lib ..\/..\/lib\n+ * @modules jdk.javadoc\/jdk.javadoc.internal.tool\n+ * @build    toolbox.ToolBox javadoc.tester.*\n+ * @run main TestGlobalHtml\n+ *\/\n+\n+import javadoc.tester.JavadocTester;\n+import toolbox.ToolBox;\n+\n+import java.nio.file.Path;\n+\n+public class TestGlobalHtml extends JavadocTester {\n+    ToolBox tb = new ToolBox();\n+\n+    public static void main(String... args) throws Exception {\n+        var tester = new TestGlobalHtml();\n+        tester.runTests();\n+    }\n+\n+    @Test\n+    public void testGlobalTags() {\n+        javadoc(\"--allow-script-in-comments\",\n+                \"-d\",\n+                \"out-global\",\n+                \"-sourcepath\",\n+                testSrc,\n+                \"pkg1\");\n+        checkExit(Exit.OK);\n+    }\n+\n+    @Test\n+    public void testNegative(Path base) throws Exception {\n+        Path src = base.resolve(\"src\");\n+        tb.writeJavaFiles(src,\n+                \"\"\"\n+                package p;\n+                \/**\n+                 * class comment\n+                 * <a href=\"https:\/\/openjdk.org\/\">Hyperlink to the OpenJDK website<\/a>\n+                 *\/\n+                public class C {\n+                    \/**\n+                     * <form>\n+                     *   <label for=\"methodname\">Method name:<\/label><br>\n+                     *   <input type=\"text\" id=\"methodname\" name=\"methodname\"><br>\n+                     *   <label for=\"paramname\">Method Parameter:<\/label><br>\n+                     *   <input type=\"text\" id=\"paramname\" name=\"paramname\">\n+                     * <\/form>\n+                     *\/\n+                    public C() {\n+                    }\n+                }\n+                \"\"\");\n+\n+        javadoc(\"--allow-script-in-comments\",\n+                \"-d\",\n+                \"out-negative\",\n+                \"-sourcepath\",\n+                src.toString(),\n+                \"p\");\n+        checkExit(Exit.ERROR);\n+    }\n+}\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/TestGlobalHtml\/TestGlobalHtml.java","additions":90,"deletions":0,"binary":false,"changes":90,"status":"added"},{"patch":"@@ -0,0 +1,105 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package pkg1;\n+\n+\n+\/**\n+ * <div inert>\n+ * <p> This content is inert and not interactable.<\/p>\n+ * <a href=\"https:\/\/openjdk.org\/\" title=\"OpenJDK's Website\" tabindex=\"0\">\n+ * Visit OpenJDK's Website!\n+ * <\/a>\n+ * <\/div>\n+ *\n+ * <div>\n+ *   <p autocapitalize=\"on\">This content is interactable.<\/p>\n+ *   <a href=\"https:\/\/openjdk.org\/\" title=\"OpenJDK's Website\" tabindex=\"0\">\n+ *     Visit OpenJDK's Website!\n+ *   <\/a>\n+ * <\/div>\n+ *\n+ *\n+ * <div dir=\"ltr\" lang=\"en\">\n+ *   <p itemprop=\"description\">This is used in a jtreg test to check that global HTML tags are allowed<\/p>\n+ *   <ul spellcheck=\"true\">\n+ *     <li>Class C<\/li>\n+ *     <li>Has a default constructor<\/li>\n+ *   <\/ul>\n+ * <\/div>\n+ *\n+ * <p contenteditable=\"true\" inputmode=\"text\">Here is a description of the class and methods:<\/p>\n+ *\n+ * <ol draggable=\"true\" tabindex=\"0\">\n+ *   <li><p accesskey=\"1\" data-element-type=\"constructor\" title=\"Class Details\">Has a default constructor<\/p><\/li>\n+ *   <li><p accesskey=\"2\" data-element-type=\"toString\" title=\"Methods Summary\">Overrides toString method<\/p><\/li>\n+ *   <li><p accesskey=\"3\" data-element-type=\"other\" title=\"Usage Example\">Is used for testing<\/p><\/li>\n+ * <\/ol>\n+ *\n+ * <div itemscope>\n+ *   <p itemprop=\"name\">C1<\/p>\n+ *   <p itemprop=\"description\">C1<\/p>\n+ * <\/div>\n+ *\/\n+public class C1 {\n+\n+    \/**\n+     * <p lang=\"en\" accesskey=\"D\" autocapitalize=\"on\" draggable=\"true\" spellcheck=\"false\">\n+     * Default constructor for the {@code C1} class. (this content is draggable!) <\/p>\n+     * <div lang=\"en\" contenteditable=\"true\">\n+     *   <p itemprop=\"creator\">Author: try editing this content!<\/p>\n+     *   <p title=\"Creation Date\">Created on: June 14 2024<\/p>\n+     * <\/div>\n+     *\/\n+    public C1() {\n+    }\n+\n+    \/**\n+     * A method in C1\n+     *\n+     * <p lang=\"en\" inputmode=\"numeric\">simple method.<\/p>\n+     *\n+     * <div itemprop=\"method\" itemscope>\n+     *   <p itemprop=\"name\">method m<\/p>\n+     *   <p itemprop=\"description\">the method m does nothing<\/p>\n+     * <\/div>\n+     *\/\n+    public void m() {\n+    }\n+\n+    \/**\n+     * A toString Override.\n+     *\n+     * <p dir=\"ltr\" spellcheck=\"true\">returns a String Object.<\/p>\n+     *\n+     * <div itemprop=\"method\" itemscope>\n+     *   <p itemprop=\"name\">toString<\/p>\n+     * <\/div>\n+     *\n+     * @return a string.\n+     *\/\n+    @Override\n+    public String toString() {\n+        return \"C1\";\n+    }\n+}\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/TestGlobalHtml\/pkg1\/C1.java","additions":105,"deletions":0,"binary":false,"changes":105,"status":"added"}]}