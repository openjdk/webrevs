{"files":[{"patch":"@@ -238,1 +238,1 @@\n-void CDSConfig::check_system_property(const char* key, const char* value) {\n+void CDSConfig::check_internal_module_property(const char* key, const char* value) {\n@@ -243,6 +243,16 @@\n-  if (strcmp(key, \"jdk.module.showModuleResolution\") == 0 ||\n-      strcmp(key, \"jdk.module.validation\") == 0 ||\n-      strcmp(key, \"java.system.class.loader\") == 0) {\n-    stop_dumping_full_module_graph();\n-    stop_using_full_module_graph();\n-    log_info(cds)(\"full module graph: disabled due to incompatible property: %s=%s\", key, value);\n+}\n+\n+void CDSConfig::check_incompatible_property(const char* key, const char* value) {\n+  static const char* incompatible_properties[] = {\n+    \"java.system.class.loader\",\n+    \"jdk.module.showModuleResolution\",\n+    \"jdk.module.validation\"\n+  };\n+\n+  for (uint i = 0; i < ARRAY_SIZE(incompatible_properties); i++) {\n+    if (strcmp(key, incompatible_properties[i]) == 0) {\n+      stop_dumping_full_module_graph();\n+      stop_using_full_module_graph();\n+      log_info(cds)(\"full module graph: disabled due to incompatible property: %s=%s\", key, value);\n+      break;\n+    }\n@@ -250,0 +260,1 @@\n+\n","filename":"src\/hotspot\/share\/cds\/cdsConfig.cpp","additions":18,"deletions":7,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -61,1 +61,2 @@\n-  static void check_system_property(const char* key, const char* value) NOT_CDS_RETURN;\n+  static void check_internal_module_property(const char* key, const char* value) NOT_CDS_RETURN;\n+  static void check_incompatible_property(const char* key, const char* value) NOT_CDS_RETURN;\n","filename":"src\/hotspot\/share\/cds\/cdsConfig.hpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -1260,1 +1260,3 @@\n-  CDSConfig::check_system_property(key, value);\n+  if (internal == ExternalProperty) {\n+    CDSConfig::check_incompatible_property(key, value);\n+  }\n@@ -1899,0 +1901,1 @@\n+  CDSConfig::check_internal_module_property(prop_name, prop_value);\n@@ -1918,0 +1921,1 @@\n+  CDSConfig::check_internal_module_property(prop_base_name, prop_value);\n","filename":"src\/hotspot\/share\/runtime\/arguments.cpp","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"}]}