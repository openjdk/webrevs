{"files":[{"patch":"@@ -345,14 +345,2 @@\n-    if (! PeekNamedPipe(han, NULL, 0, NULL, pbytes, NULL)) {\n-        \/* PeekNamedPipe fails when at EOF.  In that case we\n-         * simply make *pbytes = 0 which is consistent with the\n-         * behavior we get on Solaris when an fd is at EOF.\n-         * The only alternative is to raise an Exception,\n-         * which isn't really warranted. It also fails if the\n-         * handle is to the NUL device (ERROR_INVALID_FUNCTION),\n-         * so *pbytes = 0 is also set in that case.\n-         *\/\n-        DWORD lastError = GetLastError();\n-        if (lastError != ERROR_BROKEN_PIPE &&\n-            lastError != ERROR_INVALID_FUNCTION) {\n-            return FALSE;\n-        }\n+    if (!PeekNamedPipe(han, NULL, 0, NULL, pbytes, NULL)) {\n+        \/\/ If PeekNamedPipe fails, set the number of available bytes to zero.\n","filename":"src\/java.base\/windows\/native\/libjava\/io_util_md.c","additions":2,"deletions":14,"binary":false,"changes":16,"status":"modified"}]}