{"files":[{"patch":"@@ -29,1 +29,1 @@\n- * @summary Floods the EDT with updateGC() events then brutally disposes the frame.\n+ * @summary dispose the frame while flooding the EDT with Notify events.\n@@ -39,8 +39,2 @@\n-        Frame frame = new Frame();\n-        frame.setSize(100, 100);\n-        frame.setLocationRelativeTo(null);\n-        frame.setVisible(true);\n-\n-        for (int i = 0; i < 256; i++) {\n-            frame.removeNotify();\n-            frame.addNotify();\n+        for (int i = 0; i < 100; i++) {\n+            test();\n@@ -49,1 +43,20 @@\n-        frame.dispose();\n+        \/\/ let the system recover.\n+        Thread.sleep(5000);\n+    }\n+\n+    private static void test() throws Exception {\n+        Frame f = new Frame();\n+        f.setSize(100, 100);\n+        f.setLocationRelativeTo(null);\n+        f.setVisible(true);\n+        f.dispose();\n+\n+        Thread thread1 = new Thread(() -> {\n+            for (int i = 0; i < 10; i++) {\n+                f.removeNotify();\n+                f.addNotify();\n+            }\n+        });\n+        thread1.start();\n+        thread1.join();\n+\n@@ -55,3 +68,0 @@\n-\n-        \/\/ let the system recover from the notify flood\n-        Thread.sleep(5000);\n","filename":"test\/jdk\/java\/awt\/Frame\/NotifyStressTest\/NotifyStressTest.java","additions":23,"deletions":13,"binary":false,"changes":36,"status":"modified"}]}