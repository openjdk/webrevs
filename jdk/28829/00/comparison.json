{"files":[{"patch":"@@ -188,4 +188,1 @@\n-  SYMBOLS_EXCLUDE_PATTERN := %.debuginfo %.diz %.map\n-\n-  # There may be files with spaces in the names, so use ShellFindFiles\n-  # explicitly.\n+  # There may be files with spaces in the names, so use ShellFindFiles explicitly.\n@@ -193,5 +190,0 @@\n-  ifneq ($(JDK_IMAGE_DIR), $(JDK_SYMBOLS_IMAGE_DIR))\n-    ALL_JDK_SYMBOLS_FILES := $(call ShellFindFiles, $(JDK_SYMBOLS_IMAGE_DIR))\n-  else\n-    ALL_JDK_SYMBOLS_FILES := $(ALL_JDK_FILES)\n-  endif\n@@ -204,17 +196,0 @@\n-  # Create special filter rules when dealing with unzipped .dSYM directories on\n-  # macosx\n-  ifeq ($(call isTargetOs, macosx), true)\n-    ifeq ($(ZIP_EXTERNAL_DEBUG_SYMBOLS), false)\n-      JDK_SYMBOLS_EXCLUDE_PATTERN := $(addprefix %, \\\n-          $(call containing, .dSYM\/, $(patsubst $(JDK_IMAGE_DIR)\/%, %, \\\n-          $(ALL_JDK_SYMBOLS_FILES))))\n-    endif\n-  endif\n-\n-  # Create special filter rules when dealing with debug symbols on windows\n-  ifeq ($(call isTargetOs, windows), true)\n-    ifeq ($(SHIP_DEBUG_SYMBOLS), )\n-      JDK_SYMBOLS_EXCLUDE_PATTERN := %.pdb\n-    endif\n-  endif\n-\n@@ -223,1 +198,0 @@\n-          $(JDK_SYMBOLS_EXCLUDE_PATTERN) \\\n@@ -225,1 +199,0 @@\n-          $(SYMBOLS_EXCLUDE_PATTERN) \\\n@@ -231,2 +204,1 @@\n-  JDK_SYMBOLS_BUNDLE_FILES := \\\n-      $(call FindFiles, $(SYMBOLS_IMAGE_DIR))\n+  JDK_SYMBOLS_BUNDLE_FILES := $(call FindFiles, $(SYMBOLS_IMAGE_DIR))\n@@ -239,20 +211,1 @@\n-  # Create special filter rules when dealing with unzipped .dSYM directories on\n-  # macosx\n-  ifeq ($(OPENJDK_TARGET_OS), macosx)\n-    ifeq ($(ZIP_EXTERNAL_DEBUG_SYMBOLS), false)\n-      JRE_SYMBOLS_EXCLUDE_PATTERN := $(addprefix %, \\\n-          $(call containing, .dSYM\/, $(patsubst $(JRE_IMAGE_DIR)\/%, %, $(ALL_JRE_FILES))))\n-    endif\n-  endif\n-\n-  # Create special filter rules when dealing with debug symbols on windows\n-  ifeq ($(call isTargetOs, windows), true)\n-    ifeq ($(SHIP_DEBUG_SYMBOLS), )\n-      JRE_SYMBOLS_EXCLUDE_PATTERN := %.pdb\n-    endif\n-  endif\n-\n-  JRE_BUNDLE_FILES := $(filter-out \\\n-      $(JRE_SYMBOLS_EXCLUDE_PATTERN) \\\n-      $(SYMBOLS_EXCLUDE_PATTERN), \\\n-      $(ALL_JRE_FILES))\n+  JRE_BUNDLE_FILES := $(ALL_JRE_FILES)\n","filename":"make\/Bundles.gmk","additions":3,"deletions":50,"binary":false,"changes":53,"status":"modified"},{"patch":"@@ -221,1 +221,1 @@\n-    JMOD_FLAGS += --exclude '**{_the.*,_*.marker*,*.diz,*.map}'\n+    JMOD_FLAGS += --exclude '**{_the.*,_*.marker*,*.map}'\n@@ -224,1 +224,5 @@\n-  JMOD_FLAGS += --exclude '**{_the.*,_*.marker*,*.diz,*.debuginfo,*.dSYM\/**,*.dSYM}'\n+  ifeq ($(SHIP_DEBUG_SYMBOLS), )\n+    JMOD_FLAGS += --exclude '**{_the.*,_*.marker*,*.diz,*.debuginfo,*.dSYM\/**,*.dSYM}'\n+  else\n+    JMOD_FLAGS += --exclude '**{_the.*,_*.marker*}'\n+  endif\n","filename":"make\/CreateJmods.gmk","additions":6,"deletions":2,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -319,2 +319,4 @@\n-      [which type of external native debug symbol information shall be shipped in product bundles (none, public, full)\n-      (e.g. ship full\/stripped pdbs on Windows) @<:@none@:>@])])\n+      [which type of external native debug symbol information shall be shipped with bundles\/images (none, public, full).\n+      @<:@none in release builds, full otherwise. --with-native-debug-symbols=external\/zipped is a prerequisite. public is only supported on Windows@:>@])],\n+      [],\n+      [with_external_symbols_in_bundles=default])\n@@ -325,5 +327,7 @@\n-    if test \"x$OPENJDK_TARGET_OS\" != xwindows ; then\n-      AC_MSG_ERROR([--with-external-symbols-in-bundles currently only works on windows!])\n-    elif test \"x$COPY_DEBUG_SYMBOLS\" != xtrue ; then\n-      AC_MSG_ERROR([--with-external-symbols-in-bundles only works when --with-native-debug-symbols=external is used!])\n-    elif test \"x$with_external_symbols_in_bundles\" = xfull ; then\n+    if test \"x$COPY_DEBUG_SYMBOLS\" != xtrue ; then\n+      AC_MSG_ERROR([--with-external-symbols-in-bundles only works when --with-native-debug-symbols=external\/zipped is used!])\n+    elif test \"x$with_external_symbols_in_bundles\" = xpublic && test \"x$OPENJDK_TARGET_OS\" != xwindows ; then\n+      AC_MSG_ERROR([--with-external-symbols-in-bundles=public is only supported on Windows!])\n+    fi\n+\n+    if test \"x$with_external_symbols_in_bundles\" = xfull ; then\n@@ -336,0 +340,9 @@\n+  elif test \"x$with_external_symbols_in_bundles\" = xdefault ; then\n+    if test \"x$DEBUG_LEVEL\" = xrelease ; then\n+      AC_MSG_RESULT([no (default)])\n+    elif test \"x$COPY_DEBUG_SYMBOLS\" = xtrue ; then\n+      AC_MSG_RESULT([full (default)])\n+      SHIP_DEBUG_SYMBOLS=full\n+    else\n+      AC_MSG_RESULT([no (default, native debug symbols are not external\/zipped)])\n+    fi\n","filename":"make\/autoconf\/jdk-options.m4","additions":20,"deletions":7,"binary":false,"changes":27,"status":"modified"}]}