{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -448,2 +448,1 @@\n-  _array  = NEW_C_HEAP_ARRAY(OopMapCacheEntry*, _size, mtClass);\n-  for(int i = 0; i < _size; i++) _array[i] = nullptr;\n+  for(int i = 0; i < size; i++) _array[i] = nullptr;\n@@ -454,1 +453,0 @@\n-  assert(_array != nullptr, \"sanity check\");\n@@ -457,2 +455,0 @@\n-  \/\/ Deallocate array\n-  FREE_C_HEAP_ARRAY(OopMapCacheEntry*, _array);\n@@ -462,1 +458,1 @@\n-  return Atomic::load_acquire(&(_array[i % _size]));\n+  return Atomic::load_acquire(&(_array[i % size]));\n@@ -466,1 +462,1 @@\n-  return Atomic::cmpxchg(&_array[i % _size], old, entry) == old;\n+  return Atomic::cmpxchg(&_array[i % size], old, entry) == old;\n@@ -470,1 +466,1 @@\n-  for (int i = 0; i < _size; i++) {\n+  for (int i = 0; i < size; i++) {\n@@ -481,1 +477,1 @@\n-  for (int i = 0; i < _size; i++) {\n+  for (int i = 0; i < size; i++) {\n@@ -516,1 +512,1 @@\n-    for (int i = 0; i < _probe_depth; i++) {\n+    for (int i = 0; i < probe_depth; i++) {\n@@ -545,1 +541,1 @@\n-  for (int i = 0; i < _probe_depth; i++) {\n+  for (int i = 0; i < probe_depth; i++) {\n","filename":"src\/hotspot\/share\/interpreter\/oopMapCache.cpp","additions":8,"deletions":12,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -155,3 +155,2 @@\n-  enum { _size        = 32,     \/\/ Use fixed size for now\n-         _probe_depth = 3       \/\/ probe depth in case of collisions\n-  };\n+  static constexpr int size = 32;        \/\/ Use fixed size for now\n+  static constexpr int probe_depth = 3;  \/\/ probe depth in case of collisions\n@@ -159,1 +158,1 @@\n-  OopMapCacheEntry* volatile * _array;\n+  OopMapCacheEntry* volatile _array[size];\n","filename":"src\/hotspot\/share\/interpreter\/oopMapCache.hpp","additions":4,"deletions":5,"binary":false,"changes":9,"status":"modified"}]}