{"files":[{"patch":"@@ -2808,0 +2808,1 @@\n+    const Register monitor = mark;\n@@ -2847,1 +2848,1 @@\n-      ld(mark, in_bytes(OMCache::oop_to_monitor_difference()), cache_addr);\n+      ld(monitor, in_bytes(OMCache::oop_to_monitor_difference()), cache_addr);\n@@ -2850,1 +2851,1 @@\n-      addi(owner_addr, mark, in_bytes(ObjectMonitor::owner_offset()));\n+      addi(owner_addr, monitor, in_bytes(ObjectMonitor::owner_offset()));\n@@ -2868,3 +2869,11 @@\n-    ld(tmp1, in_bytes(ObjectMonitor::recursions_offset() - ObjectMonitor::owner_offset()), owner_addr);\n-    addi(tmp1, tmp1, 1);\n-    std(tmp1, in_bytes(ObjectMonitor::recursions_offset() - ObjectMonitor::owner_offset()), owner_addr);\n+    if (!UseObjectMonitorTable) {\n+      assert_different_registers(tmp1, owner_addr);\n+      ld(tmp1, in_bytes(ObjectMonitor::recursions_offset() - ObjectMonitor::owner_offset()), owner_addr);\n+      addi(tmp1, tmp1, 1);\n+      std(tmp1, in_bytes(ObjectMonitor::recursions_offset() - ObjectMonitor::owner_offset()), owner_addr);\n+    } else {\n+      assert_different_registers(tmp2, monitor);\n+      ld(tmp2, in_bytes(ObjectMonitor::recursions_offset()), monitor);\n+      addi(tmp2, tmp2, 1);\n+      std(tmp2, in_bytes(ObjectMonitor::recursions_offset()), monitor);\n+    }\n@@ -2874,2 +2883,1 @@\n-      addi(tmp1, owner_addr, -in_bytes(ObjectMonitor::owner_offset())); \/\/ restore monitor address\n-      std(tmp1, BasicLock::object_monitor_cache_offset_in_bytes(), box);\n+      std(monitor, BasicLock::object_monitor_cache_offset_in_bytes(), box);\n","filename":"src\/hotspot\/cpu\/ppc\/macroAssembler_ppc.cpp","additions":15,"deletions":7,"binary":false,"changes":22,"status":"modified"}]}