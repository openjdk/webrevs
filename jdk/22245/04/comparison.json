{"files":[{"patch":"@@ -1037,0 +1037,7 @@\n+\n+\t# Read jtreg documentation to learn on the test stats categories:\n+\t# https:\/\/github.com\/openjdk\/jtreg\/blob\/master\/src\/share\/doc\/javatest\/regtest\/faq.md#what-do-all-those-numbers-in-the-test-results-line-mean\n+\t# In jtreg, \"skipped:\" category accounts for tests that threw jtreg.SkippedException at runtime.\n+\t# At the same time these tests contribute to \"passed:\" tests.\n+\t# In here we don't want that and so we substract number of \"skipped:\" from \"passed:\".\n+\n@@ -1038,1 +1045,1 @@\n-\t  $$(eval $1_PASSED := $$(shell $$(AWK) '{ gsub(\/[,;]\/, \"\"); \\\n+\t  $$(eval $1_PASSED_AND_RUNTIME_SKIPPED := $$(shell $$(AWK) '{ gsub(\/[,;]\/, \"\"); \\\n@@ -1041,1 +1048,1 @@\n-\t  $$(if $$($1_PASSED), , $$(eval $1_PASSED := 0)) \\\n+\t  $$(if $$($1_PASSED_AND_RUNTIME_SKIPPED), , $$(eval $1_PASSED_AND_RUNTIME_SKIPPED := 0)) \\\n@@ -1046,0 +1053,29 @@\n+\t  $$(eval $1_RUNTIME_SKIPPED := $$(shell $$(AWK) '{gsub(\/[,;]\/, \"\"); \\\n+\t      for (i=1; i<=NF; i++) { if ($$$$i == \"skipped:\") \\\n+\t      print $$$$(i+1) } }' $$($1_RESULT_FILE))) \\\n+\t  $$(if $$($1_RUNTIME_SKIPPED), , $$(eval $1_RUNTIME_SKIPPED := 0)) \\\n+\t  $$(eval $1_SKIPPED := $$(shell \\\n+\t      $$(AWK) \\\n+\t        'BEGIN { \\\n+\t          overall_skipped = 0; \\\n+\t          patterns[1] = \"skipped\"; \\\n+\t          patterns[2] = \"excluded\"; \\\n+\t          patterns[3] = \"not in match-list\"; \\\n+\t          patterns[4] = \"did not match keywords\"; \\\n+\t          patterns[5] = \"did not meet module requirements\"; \\\n+\t          patterns[6] = \"did not meet platform requirements\"; \\\n+\t          patterns[7] = \"did not match prior status\"; \\\n+\t          patterns[8] = \"did not meet time-limit requirements\"; \\\n+\t        } { \\\n+\t          split($$$$0, arr, \";\"); \\\n+\t          for (item in arr) { \\\n+\t            for (p in patterns) { \\\n+\t              if (match(arr[item], patterns[p] \": [0-9]+\")) { \\\n+\t                overall_skipped += substr(arr[item], RSTART + length(patterns[p]) + 2, RLENGTH); \\\n+\t              } \\\n+\t            } \\\n+\t          } \\\n+\t          print overall_skipped; \\\n+\t        }' \\\n+\t        $$($1_RESULT_FILE) \\\n+\t  )) \\\n@@ -1050,0 +1086,3 @@\n+\t  \\\n+\t  $$(eval $1_PASSED := $$(shell \\\n+\t      $$(EXPR) $$($1_PASSED_AND_RUNTIME_SKIPPED) - $$($1_RUNTIME_SKIPPED))) \\\n@@ -1051,1 +1090,1 @@\n-\t      $$(EXPR) $$($1_PASSED) + $$($1_FAILED) + $$($1_ERROR))) \\\n+\t      $$(EXPR) $$($1_PASSED) + $$($1_FAILED) + $$($1_ERROR) + $$($1_SKIPPED))) \\\n@@ -1053,1 +1092,3 @@\n-\t  $$(eval $1_PASSED := 0) \\\n+\t  $$(eval $1_PASSED_AND_RUNTIME_SKIPPED := 0) \\\n+\t  $$(eval $1_RUNTIME_SKIPPED := 0) \\\n+\t  $$(eval $1_SKIPPED := 0) \\\n@@ -1232,2 +1273,2 @@\n-\t$(PRINTF) >> $(TEST_SUMMARY) \"%2s %-49s %5s %5s %5s %5s %2s\\n\" \"  \" \\\n-\t    TEST TOTAL PASS FAIL ERROR \" \"\n+\t$(PRINTF) >> $(TEST_SUMMARY) \"%2s %-49s %5s %5s %5s %5s %5s %2s\\n\" \"  \" \\\n+\t    TEST TOTAL PASS FAIL ERROR SKIP \" \"\n@@ -1246,1 +1287,1 @@\n-\t    $(PRINTF) >> $(TEST_SUMMARY) \"%2s %-49s %5d %5d %5d %5d %2s\\n\" \\\n+\t    $(PRINTF) >> $(TEST_SUMMARY) \"%2s %-49s %5d %5d %5d %5d %5d %2s\\n\" \\\n@@ -1248,1 +1289,1 @@\n-\t        $($(TEST_ID)_FAILED) $($(TEST_ID)_ERROR) \"  \" $(NEWLINE) \\\n+\t        $($(TEST_ID)_FAILED) $($(TEST_ID)_ERROR) $($(TEST_ID)_SKIPPED) \"  \" $(NEWLINE) \\\n@@ -1250,1 +1291,1 @@\n-\t    $(PRINTF) >> $(TEST_SUMMARY) \"%2s %-49s %5d %5d %5d %5d %2s\\n\" \\\n+\t    $(PRINTF) >> $(TEST_SUMMARY) \"%2s %-49s %5d %5d %5d %5d %5d %2s\\n\" \\\n@@ -1252,1 +1293,1 @@\n-\t        $($(TEST_ID)_FAILED) $($(TEST_ID)_ERROR) \"<<\" $(NEWLINE) \\\n+\t        $($(TEST_ID)_FAILED) $($(TEST_ID)_ERROR) $($(TEST_ID)_SKIPPED) \"<<\" $(NEWLINE) \\\n","filename":"make\/RunTests.gmk","additions":51,"deletions":10,"binary":false,"changes":61,"status":"modified"}]}