{"files":[{"patch":"@@ -91,1 +91,1 @@\n-  uintx _count, _capacity;\n+  size_t _count, _capacity;\n@@ -110,1 +110,1 @@\n-      const uintx new_capacity = MAX2((uintx)4096, 2 * _capacity);\n+      const size_t new_capacity = MAX2((size_t)4096, 2 * _capacity);\n@@ -115,1 +115,1 @@\n-        \/\/ In case of OOM lets make no fuzz. Just return.\n+        \/\/ In case of OOM lets make no fuss. Just return.\n@@ -130,0 +130,9 @@\n+    assert(from <= to, \"Sanity\");\n+    \/\/ We optimize for sequential lookups. Since this class is used when a list\n+    \/\/ of OS mappings is scanned (VirtualQuery, \/proc\/pid\/maps), and these lists\n+    \/\/ are usually sorted in order of addresses, ascending.\n+    static uintx last = 0;\n+    if (to <= _ranges[last].from) {\n+      \/\/ the range is to the right of the given section, we need to re-start the search\n+      last = 0;\n+    }\n@@ -131,1 +140,1 @@\n-    for(uintx i = 0; i < _count; i++) {\n+    for(uintx i = last; i < _count; i++) {\n@@ -134,1 +143,2 @@\n-      } else if (from < _ranges[i].to) {\n+      } else if (to <= _ranges[i].from) {\n+        last = i;\n","filename":"src\/hotspot\/share\/nmt\/memMapPrinter.cpp","additions":15,"deletions":5,"binary":false,"changes":20,"status":"modified"}]}