{"files":[{"patch":"@@ -295,4 +295,4 @@\n-  if (OSContainer::is_containerized() && OSContainer::memory_and_swap_limit_in_bytes() > 0) {\n-    if (OSContainer::memory_limit_in_bytes() > 0) {\n-      jlong memory_and_swap_limit_in_bytes = OSContainer::memory_and_swap_limit_in_bytes();\n-      jlong memory_limit_in_bytes = OSContainer::memory_limit_in_bytes();\n+  if (OSContainer::is_containerized()) {\n+    jlong memory_and_swap_limit_in_bytes = OSContainer::memory_and_swap_limit_in_bytes();\n+    jlong memory_limit_in_bytes = OSContainer::memory_limit_in_bytes();\n+    if (memory_limit_in_bytes > 0 && memory_and_swap_limit_in_bytes > 0) {   \n@@ -306,0 +306,1 @@\n+    assert(false, \"sysinfo failed in total_swap_space()?\");\n@@ -316,0 +317,1 @@\n+    assert(false, \"sysinfo failed in host_free_swap_f()?\");\n@@ -326,1 +328,0 @@\n-  bool total_swap_space_ok = os::total_swap_space(total_swap_space);\n@@ -328,3 +329,1 @@\n-  bool host_free_swap_ok = host_free_swap_f(host_free_swap);\n-  if (!total_swap_space_ok || !host_free_swap_ok) {\n-    assert(false, \"sysinfo failed ? \");\n+  if (!os::total_swap_space(total_swap_space) || !host_free_swap_f(host_free_swap)) {\n","filename":"src\/hotspot\/os\/linux\/os_linux.cpp","additions":7,"deletions":8,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -869,2 +869,2 @@\n-    errno = ::GetLastError();\n-    log_debug(os)(\"available_memory() failed to GlobalMemoryStatusEx: GetLastError->%ld.\", errno);\n+    DWORD errcode  = ::GetLastError();\n+    log_debug(os)(\"available_memory() failed to GlobalMemoryStatusEx: GetLastError->%lu.\", errcode);\n@@ -883,2 +883,2 @@\n-    errno = ::GetLastError();\n-    log_debug(os)(\"total_swap_space() failed to GlobalMemoryStatusEx: GetLastError->%ld.\", errno);\n+    DWORD errcode  = ::GetLastError();\n+    log_debug(os)(\"total_swap_space() failed to GlobalMemoryStatusEx: GetLastError->%lu.\", errcode);\n@@ -897,2 +897,2 @@\n-    errno = ::GetLastError();\n-    log_debug(os)(\"free_swap_space() failed to GlobalMemoryStatusEx: GetLastError->%ld.\", errno);\n+    DWORD errcode  = ::GetLastError();\n+    log_debug(os)(\"free_swap_space() failed to GlobalMemoryStatusEx: GetLastError->%lu.\", errcode);\n","filename":"src\/hotspot\/os\/windows\/os_windows.cpp","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"}]}