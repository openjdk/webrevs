{"files":[{"patch":"@@ -75,0 +75,1 @@\n+#include <errno.h>\n@@ -1175,1 +1176,1 @@\n-  _filename(\"-f\", \"file path (defaults: \\\"vm_memory_map_<pid>.txt\\\")\", \"STRING\", false) {\n+  _filename(\"-F\", \"file path (defaults: \\\"vm_memory_map_<pid>.txt\\\")\", \"STRING\", false) {\n@@ -1196,1 +1197,1 @@\n-    output()->print_cr(\"Failed to open \\\"%s\\\" for writing.\", name);\n+    output()->print_cr(\"Failed to open \\\"%s\\\" for writing (%s).\", name, os::strerror(errno));\n","filename":"src\/hotspot\/share\/services\/diagnosticCommand.cpp","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -47,2 +47,6 @@\n-    public void run(CommandExecutor executor) {\n-        OutputAnalyzer output = executor.execute(\"System.dump_map\");\n+\n+    private void run_test(CommandExecutor executor, boolean useDefaultFileName) {\n+\n+        String filenameOption = useDefaultFileName ? \"\" : \"-F=test-map.txt\";\n+\n+        OutputAnalyzer output = executor.execute(\"System.dump_map \" + filenameOption);\n@@ -51,1 +55,4 @@\n-        String filename = output.firstMatch(\"Memory map dumped to \\\"(\\\\S*vm_memory_map_\\\\d+\\\\.txt)\\\".*\", 1);\n+        String filename = useDefaultFileName ?\n+            output.firstMatch(\"Memory map dumped to \\\"(\\\\S*vm_memory_map_\\\\d+\\\\.txt)\\\".*\", 1) :\n+            output.firstMatch(\"Memory map dumped to \\\"(\\\\S*test-map.txt)\\\".*\", 1);\n+\n@@ -92,0 +99,6 @@\n+\n+    }\n+\n+    public void run(CommandExecutor executor) {\n+        run_test(executor, false);\n+        run_test(executor, true);\n","filename":"test\/hotspot\/jtreg\/serviceability\/dcmd\/vm\/SystemDumpMapTest.java","additions":16,"deletions":3,"binary":false,"changes":19,"status":"modified"}]}