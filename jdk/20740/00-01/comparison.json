{"files":[{"patch":"@@ -6024,2 +6024,7 @@\n-    z_cghi(top, 0);\n-    z_stg(top, Address(basic_lock, BasicObjectLock::lock_offset() + in_ByteSize((BasicLock::object_monitor_cache_offset_in_bytes()))));\n+    const Address om_cache_addr = Address(basic_lock, BasicObjectLock::lock_offset() + in_ByteSize((BasicLock::object_monitor_cache_offset_in_bytes())));\n+    if (om_cache_addr.is_disp12()) {\n+      z_mvghi(om_cache_addr, 0);\n+    } else {\n+      z_lghi(top, 0); \/\/ tmp1 is free at this point\n+      z_stg(top, om_cache_addr);\n+    }\n@@ -6162,2 +6167,7 @@\n-    z_lghi(tmp1, 0); \/\/ tmp1 is free at this point\n-    z_stg(tmp1, Address(box, BasicLock::object_monitor_cache_offset_in_bytes()));\n+    const Address om_cache_addr = Address(box, BasicLock::object_monitor_cache_offset_in_bytes());\n+    if (om_cache_addr.is_disp12()) {\n+      z_mvghi(om_cache_addr, 0);\n+    } else {\n+      z_lghi(tmp1, 0); \/\/ tmp1 is free at this point\n+      z_stg(tmp1, om_cache_addr);\n+    }\n@@ -6259,2 +6269,1 @@\n-      z_lg(tmp2, Address(tmp1)); \/\/ TODO: top is killed here!!!!\n-      z_ltgr(tmp2, tmp2);\n+      z_cghsi(0, tmp1, 0);\n","filename":"src\/hotspot\/cpu\/s390\/macroAssembler_s390.cpp","additions":15,"deletions":6,"binary":false,"changes":21,"status":"modified"}]}