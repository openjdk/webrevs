{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2026, Oracle and\/or its affiliates. All rights reserved.\n","filename":"src\/hotspot\/share\/opto\/superword.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -264,1 +264,2 @@\n-      VTransformNode* cast = new (_vtransform.arena()) VTransformCastVectorNode(_vtransform, pack->size(), def_bt, use_bt);\n+      const VTransformVectorNodeProperties properties = VTransformVectorNodeProperties::make_from_pack(pack, _vloop_analyzer);\n+      VTransformNode* cast = new (_vtransform.arena()) VTransformElementWiseVectorNode(_vtransform, 2, properties, VectorCastNode::opcode(-1, def_bt));\n","filename":"src\/hotspot\/share\/opto\/superwordVTransformBuilder.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2026, Oracle and\/or its affiliates. All rights reserved.\n","filename":"src\/hotspot\/share\/opto\/vectornode.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2026, Oracle and\/or its affiliates. All rights reserved.\n","filename":"src\/hotspot\/share\/opto\/vectornode.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1313,1 +1313,2 @@\n-    if (current_red->in_req(2)->isa_Vector() == nullptr && current_red->in_req(2)->isa_CastVector() == nullptr) {\n+    VTransformVectorNode* vector_input = current_red->in_req(2)->isa_Vector();\n+    if (vector_input == nullptr) {\n@@ -1543,12 +1544,0 @@\n-float VTransformCastVectorNode::cost(const VLoopAnalyzer& vloop_analyzer) const {\n-  return vloop_analyzer.cost_for_vector_node(VectorCastNode::opcode(-1, _from_bt), _vlen, _from_bt);\n-}\n-\n-VTransformApplyResult VTransformCastVectorNode::apply(VTransformApplyState& apply_state) const {\n-  Node* value = apply_state.transformed_node(in_req(1));\n-  VectorNode* vn = VectorCastNode::make(VectorCastNode::opcode(-1, _from_bt), value, _to_bt, _vlen);\n-  register_new_node_from_vectorization(apply_state, vn);\n-\n-  return VTransformApplyResult::make_vector(vn, vn->vect_type());\n-}\n-\n@@ -1560,1 +1549,0 @@\n-\n@@ -1659,4 +1647,0 @@\n-}\n-\n-void VTransformCastVectorNode::print_spec() const {\n-  tty->print(\"vlen=%d from=%s to=%s\", _vlen, type2name(_from_bt), type2name(_to_bt));\n","filename":"src\/hotspot\/share\/opto\/vtransform.cpp","additions":2,"deletions":18,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -96,1 +96,0 @@\n-class VTransformCastVectorNode;\n@@ -591,1 +590,0 @@\n-  virtual VTransformCastVectorNode* isa_CastVector() { return nullptr; }\n@@ -981,17 +979,0 @@\n-class VTransformCastVectorNode : public VTransformNode {\n-private:\n-  uint _vlen;\n-  BasicType _from_bt;\n-  BasicType _to_bt;\n-\n-public:\n-  \/\/ req = 2 -> [ctrl, input]\n-  VTransformCastVectorNode(VTransform& vtransform, int vlen, BasicType from_bt, BasicType to_bt) : VTransformNode(vtransform, 2),\n-    _vlen(vlen), _from_bt(from_bt), _to_bt(to_bt) {}\n-  virtual VTransformCastVectorNode* isa_CastVector() override { return this; }\n-  virtual VTransformApplyResult apply(VTransformApplyState& apply_state) const override;\n-  virtual float cost(const VLoopAnalyzer& vloop_analyzer) const override;\n-  NOT_PRODUCT(virtual const char* name() const override { return \"CastVector\"; };)\n-  NOT_PRODUCT(virtual void print_spec() const override;)\n-};\n-\n","filename":"src\/hotspot\/share\/opto\/vtransform.hpp","additions":0,"deletions":19,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -3,0 +3,1 @@\n+ * Copyright (c) 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,1 +34,1 @@\n- * @bug 8294816\n+ * @bug 8294816 8342095\n@@ -65,1 +66,1 @@\n-    @IR(applyIfCPUFeature = { \"avx\", \"true\" }, counts = { IRNode.VECTOR_CAST_I2S, IRNode.VECTOR_SIZE_ANY, \">0\" })\n+    @IR(applyIfCPUFeature = { \"avx\", \"true\" }, counts = { IRNode.VECTOR_CAST_I2S, IRNode.VECTOR_SIZE + \"min(max_int, max_short)\", \">0\" })\n@@ -81,1 +82,1 @@\n-    @IR(applyIfCPUFeature = { \"avx\", \"true\" }, counts = { IRNode.VECTOR_CAST_I2S, IRNode.VECTOR_SIZE_ANY, \">0\" })\n+    @IR(applyIfCPUFeature = { \"avx\", \"true\" }, counts = { IRNode.VECTOR_CAST_I2S, IRNode.VECTOR_SIZE + \"min(max_int, max_short)\", \">0\" })\n@@ -96,1 +97,1 @@\n-    @IR(applyIfCPUFeature = { \"avx\", \"true\" }, counts = { IRNode.VECTOR_CAST_I2B, IRNode.VECTOR_SIZE_ANY, \">0\" })\n+    @IR(applyIfCPUFeature = { \"avx\", \"true\" }, counts = { IRNode.VECTOR_CAST_I2B, IRNode.VECTOR_SIZE + \"min(max_int, max_byte)\", \">0\" })\n@@ -112,1 +113,1 @@\n-    @IR(applyIfCPUFeature = { \"avx\", \"true\" }, counts = { IRNode.VECTOR_CAST_I2B, IRNode.VECTOR_SIZE_ANY, \">0\" })\n+    @IR(applyIfCPUFeature = { \"avx\", \"true\" }, counts = { IRNode.VECTOR_CAST_I2B, IRNode.VECTOR_SIZE + \"min(max_int, max_byte)\", \">0\" })\n","filename":"test\/hotspot\/jtreg\/compiler\/c2\/TestMinMaxSubword.java","additions":6,"deletions":5,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2024, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2024, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,1 +37,1 @@\n- * @bug 8325155\n+ * @bug 8325155 8342095\n","filename":"test\/hotspot\/jtreg\/compiler\/loopopts\/superword\/TestCompatibleUseDefTypeSize.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2024, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2024, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,1 +26,1 @@\n- * @bug 8340093\n+ * @bug 8340093 8342095\n@@ -34,1 +34,1 @@\n- * @bug 8340093\n+ * @bug 8340093 8342095\n@@ -42,1 +42,1 @@\n- * @bug 8340093\n+ * @bug 8340093 8342095\n","filename":"test\/hotspot\/jtreg\/compiler\/loopopts\/superword\/TestReductions.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -4,0 +4,1 @@\n+ * Copyright (c) 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,1 +28,1 @@\n- * @bug 8286847 8353600\n+ * @bug 8286847 8353600 8342095\n","filename":"test\/hotspot\/jtreg\/compiler\/vectorization\/TestRotateByteAndShortVector.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2025, 2026, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2025, 2026, Oracle and\/or its affiliates. All rights reserved.g\n@@ -32,1 +32,1 @@\n- * @bug 8350177 8362171 8369881\n+ * @bug 8350177 8362171 8369881 8342095\n","filename":"test\/hotspot\/jtreg\/compiler\/vectorization\/TestSubwordTruncation.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -3,1 +3,1 @@\n- * Copyright (c) 2024, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2024, 2026, Oracle and\/or its affiliates. All rights reserved.\n","filename":"test\/hotspot\/jtreg\/compiler\/vectorization\/runner\/ArrayTypeConvertTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -3,0 +3,1 @@\n+ * Copyright (c) 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,0 +27,1 @@\n+ * @bug 8183390 8342095\n@@ -216,1 +218,1 @@\n-    @IR(applyIfCPUFeature = { \"avx\", \"true\" }, counts = { IRNode.VECTOR_CAST_I2S, IRNode.VECTOR_SIZE_ANY, \">0\" })\n+    @IR(applyIfCPUFeature = { \"avx\", \"true\" }, counts = { IRNode.VECTOR_CAST_I2S, IRNode.VECTOR_SIZE + \"min(max_int, max_short)\", \">0\" })\n@@ -226,1 +228,1 @@\n-    @IR(applyIfCPUFeature = { \"avx\", \"true\" }, counts = { IRNode.VECTOR_CAST_I2S, IRNode.VECTOR_SIZE_ANY, \">0\" })\n+    @IR(applyIfCPUFeature = { \"avx\", \"true\" }, counts = { IRNode.VECTOR_CAST_I2S, IRNode.VECTOR_SIZE + \"min(max_int, max_short)\", \">0\" })\n","filename":"test\/hotspot\/jtreg\/compiler\/vectorization\/runner\/BasicShortOpTest.java","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2026, Oracle and\/or its affiliates. All rights reserved.\n","filename":"test\/micro\/org\/openjdk\/bench\/vm\/compiler\/VectorSubword.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}