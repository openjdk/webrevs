{"files":[{"patch":"@@ -2610,0 +2610,1 @@\n+  \/\/ Big-endian 128-bit + 64-bit -> 128-bit addition.\n@@ -2611,2 +2612,5 @@\n-    __ ld(tmp1, Address(counter, 8));  \/\/ load low 64-bit from counter\n-    __ rev8(tmp1, tmp1);               \/\/ change to little endian for add\n+    assert_different_registers(counter, tmp1, tmp2, t0);\n+    __ ld(tmp1, Address(counter, 8)); \/\/ Load 128-bits from counter\n+    __ ld(tmp2, Address(counter));\n+    __ rev8(tmp1, tmp1);              \/\/ Convert big-endian to little-endian\n+    __ rev8(tmp2, tmp2);\n@@ -2614,9 +2618,6 @@\n-    __ rev8(tmp1, tmp1);               \/\/ change back to big endian\n-    __ sd(tmp1, Address(counter, 8));  \/\/ store the result back\n-    __ seqz(tmp2, tmp1);               \/\/ Check for result overflow,\n-                                       \/\/ set tmp2 = 1 if overflow, else tmp2 = 0\n-    __ ld(tmp1, Address(counter));     \/\/ load high 64-bit from counter\n-    __ rev8(tmp1, tmp1);\n-    __ add(tmp1, tmp1, tmp2);          \/\/ add 1 if overflow, else add 0\n-    __ rev8(tmp1, tmp1);\n-    __ sd(tmp1, Address(counter));\n+    __ seqz(t0, tmp1);                \/\/ Check for result overflow\n+    __ add(tmp2, tmp2, t0);           \/\/ Add 1 if overflow otherwise 0\n+    __ rev8(tmp1, tmp1);              \/\/ Convert little-endian to big-endian\n+    __ rev8(tmp2, tmp2);\n+    __ sd(tmp1, Address(counter, 8)); \/\/ Store 128-bits to counter\n+    __ sd(tmp2, Address(counter));\n","filename":"src\/hotspot\/cpu\/riscv\/stubGenerator_riscv.cpp","additions":12,"deletions":11,"binary":false,"changes":23,"status":"modified"}]}