{"files":[{"patch":"@@ -2659,0 +2659,13 @@\n+    __ bind(L_main);\n+    \/\/ Check whether the counter increases overflow 64 bit and changes to the scalar path,\n+    \/\/ most of time the counter may not increase over 64 bit,\n+    \/\/ but when counter starts with a large init number, we may encounter overflow one time\n+    \/\/ at most, just calculate it on the scalar path, and then go back to the large block\n+    __ addi(t0, counter, 8);\n+    __ ld(tmp, Address(t0));\n+    __ rev8(tmp, tmp);\n+    __ srli(t0, len, 4);\n+    __ addi(t0, t0, 1);\n+    __ add(t0, tmp, t0);\n+    __ bltu(t0, tmp, L_calculate_one_next);\n+\n@@ -2663,1 +2676,0 @@\n-    __ bind(L_main);\n@@ -2769,7 +2781,17 @@\n-    \/\/ Increase counter and save it for next\n-    __ vsetivli(x0, 2, Assembler::e64, Assembler::m1);\n-    __ vle64_v(v31, counter);\n-    __ vrev8_v(v31, v31, Assembler::VectorMask::v0_t);\n-    __ vadd_vi(v31, v31, 1, Assembler::VectorMask::v0_t);\n-    __ vrev8_v(v31, v31, Assembler::VectorMask::v0_t);\n-    __ vse64_v(v31, counter);\n+\n+    \/\/ Increase counter\n+    Label L_skip_next_inc;\n+    __ addi(t0, counter, 8);\n+    __ ld(tmp, Address(t0));\n+    __ rev8(tmp, tmp);\n+    __ addi(tmp, tmp, 1);\n+    __ rev8(tmp, tmp);\n+    __ sd(tmp, Address(t0));\n+    __ mv(t0, 0x0ul);\n+    __ bne(tmp, t0, L_skip_next_inc);\n+    __ ld(tmp, Address(counter));\n+    __ rev8(tmp, tmp);\n+    __ addi(tmp, tmp, 1);\n+    __ rev8(tmp, tmp);\n+    __ sd(tmp, Address(counter));\n+    __ bind(L_skip_next_inc);\n","filename":"src\/hotspot\/cpu\/riscv\/stubGenerator_riscv.cpp","additions":30,"deletions":8,"binary":false,"changes":38,"status":"modified"},{"patch":"@@ -64,0 +64,1 @@\n+    private static final boolean LIMIT_MODE = false;\n@@ -91,0 +92,5 @@\n+        if (LIMIT_MODE) {\n+            for (int i = 0; i < 16; i++) {\n+                ivBytes[i] = (byte)0xff;\n+            }\n+        }\n","filename":"test\/hotspot\/jtreg\/compiler\/codegen\/aes\/Test8299817.java","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"}]}