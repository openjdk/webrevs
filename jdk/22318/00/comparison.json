{"files":[{"patch":"@@ -365,2 +365,3 @@\n-    HeapWord* src_region_start = region_to_addr(src_region);\n-    HeapWord* new_top = destination - pointer_delta(src_region_start, overflowing_obj);\n+    \/\/ The [overflowing_obj, src_region_start) part has been accounted for, so\n+    \/\/ must move back the new_top, now that this overflowing obj is deferred.\n+    HeapWord* new_top = destination - pointer_delta(region_to_addr(src_region), overflowing_obj);\n@@ -893,1 +894,1 @@\n-    \/\/ Compacting objs inn [dense_prefix_end, old_space->top())\n+    \/\/ Compacting objs in [dense_prefix_end, old_space->top())\n@@ -1599,1 +1600,1 @@\n-          size_t live_words = region_ptr->partial_obj_size();\n+          size_t partial_obj_size = region_ptr->partial_obj_size();\n@@ -1601,1 +1602,1 @@\n-          if (live_words == ParallelCompactData::RegionSize) {\n+          if (partial_obj_size == ParallelCompactData::RegionSize) {\n@@ -1609,1 +1610,0 @@\n-\n@@ -1614,1 +1614,1 @@\n-            forward_objs_in_range(cm, region_start + live_words, split_point, preceding_destination + live_words);\n+            forward_objs_in_range(cm, region_start + partial_obj_size, split_point, preceding_destination + partial_obj_size);\n@@ -1621,1 +1621,1 @@\n-            forward_objs_in_range(cm, region_start + live_words, region_end, destination + live_words);\n+            forward_objs_in_range(cm, region_start + partial_obj_size, region_end, destination + partial_obj_size);\n@@ -1987,5 +1987,5 @@\n-\/\/ On filling a destination region (dest-region), we need to know the location\n-\/\/ of the word that will be at the start of the dest-region after compaction.\n-\/\/ A dest-region can have one or more source regions, but only the first\n-\/\/ source-region contains this location. This location is retrieved by calling\n-\/\/ `first_src_addr` on a dest-region.\n+\/\/ On starting to fill a destination region (dest-region), we need to know the\n+\/\/ location of the word that will be at the start of the dest-region after\n+\/\/ compaction. A dest-region can have one or more source regions, but only the\n+\/\/ first source-region contains this location. This location is retrieved by\n+\/\/ calling `first_src_addr` on a dest-region.\n@@ -2020,3 +2020,3 @@\n-\/\/ Therefore, in this example, region-n will have two dest-regions, one for\n-\/\/ the final region in old-space and the other for the first region in\n-\/\/ eden-space.\n+\/\/ Therefore, in this example, region-n will have two dest-regions:\n+\/\/ 1. the final region in old-space\n+\/\/ 2. the first region in eden-space.\n","filename":"src\/hotspot\/share\/gc\/parallel\/psParallelCompact.cpp","additions":16,"deletions":16,"binary":false,"changes":32,"status":"modified"}]}