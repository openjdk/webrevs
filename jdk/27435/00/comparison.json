{"files":[{"patch":"@@ -600,3 +600,1 @@\n-  CREATE_BUILDJDK=false\n-  EXTERNAL_BUILDJDK=false\n-  BUILD_JDK_FOUND=\"no\"\n+  EXTERNAL_BUILDJDK_PATH=\"\"\n@@ -604,0 +602,1 @@\n+    BUILD_JDK_FOUND=no\n@@ -611,11 +610,1 @@\n-    EXTERNAL_BUILDJDK=true\n-  else\n-    if test \"x$COMPILE_TYPE\" = \"xcross\"; then\n-      BUILD_JDK=\"\\$(BUILDJDK_OUTPUTDIR)\/jdk\"\n-      BUILD_JDK_FOUND=yes\n-      CREATE_BUILDJDK=true\n-      AC_MSG_CHECKING([for Build JDK])\n-      AC_MSG_RESULT([yes, will build it for the host platform])\n-    else\n-      BUILD_JDK=\"\\$(JDK_OUTPUTDIR)\"\n-      BUILD_JDK_FOUND=yes\n+    if test \"x$BUILD_JDK_FOUND\" != \"xyes\"; then\n@@ -623,1 +612,2 @@\n-      AC_MSG_RESULT([yes, will use output dir])\n+      AC_MSG_RESULT([no])\n+      AC_MSG_ERROR([Could not find a suitable Build JDK])\n@@ -625,0 +615,1 @@\n+    EXTERNAL_BUILDJDK_PATH=\"$BUILD_JDK\"\n@@ -627,18 +618,1 @@\n-  # Since these tools do not yet exist, we cannot use UTIL_FIXUP_EXECUTABLE to\n-  # detect the need of fixpath\n-  JMOD=\"$BUILD_JDK\/bin\/jmod\"\n-  UTIL_ADD_FIXPATH(JMOD)\n-  JLINK=\"$BUILD_JDK\/bin\/jlink\"\n-  UTIL_ADD_FIXPATH(JLINK)\n-  AC_SUBST(JMOD)\n-  AC_SUBST(JLINK)\n-\n-  if test \"x$BUILD_JDK_FOUND\" != \"xyes\"; then\n-    AC_MSG_CHECKING([for Build JDK])\n-    AC_MSG_RESULT([no])\n-    AC_MSG_ERROR([Could not find a suitable Build JDK])\n-  fi\n-\n-  AC_SUBST(CREATE_BUILDJDK)\n-  AC_SUBST(BUILD_JDK)\n-  AC_SUBST(EXTERNAL_BUILDJDK)\n+  AC_SUBST(EXTERNAL_BUILDJDK_PATH)\n","filename":"make\/autoconf\/boot-jdk.m4","additions":7,"deletions":33,"binary":false,"changes":40,"status":"modified"},{"patch":"@@ -389,3 +389,16 @@\n-BUILD_JDK := @BUILD_JDK@\n-CREATE_BUILDJDK := @CREATE_BUILDJDK@\n-EXTERNAL_BUILDJDK := @EXTERNAL_BUILDJDK@\n+EXTERNAL_BUILDJDK_PATH := @EXTERNAL_BUILDJDK_PATH@\n+\n+ifneq ($(EXTERNAL_BUILDJDK_PATH), )\n+  EXTERNAL_BUILDJDK := true\n+  CREATE_BUILDJDK := false\n+  BUILD_JDK := $(EXTERNAL_BUILDJDK_PATH)\n+else\n+  EXTERNAL_BUILDJDK := false\n+  ifeq ($(COMPILE_TYPE), cross)\n+    CREATE_BUILDJDK := true\n+    BUILD_JDK := $(BUILDJDK_OUTPUTDIR)\/jdk\n+  else\n+    CREATE_BUILDJDK := false\n+    BUILD_JDK := $(JDK_OUTPUTDIR)\n+  endif\n+endif\n@@ -651,2 +664,2 @@\n-JLINK_CMD := @JLINK@\n-JMOD_CMD := @JMOD@\n+JLINK_CMD := @FIXPATH@ $(BUILD_JDK)\/bin\/jlink\n+JMOD_CMD := @FIXPATH@ $(BUILD_JDK)\/bin\/jmod\n","filename":"make\/autoconf\/spec.gmk.template","additions":18,"deletions":5,"binary":false,"changes":23,"status":"modified"}]}