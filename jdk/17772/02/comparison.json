{"files":[{"patch":"@@ -1431,0 +1431,5 @@\n+\n+            if (swtch instanceof JCSwitchExpression) {\n+                 \/\/ Emit line position for the end of a switch expression\n+                 code.statBegin(TreeInfo.endPos(swtch));\n+            }\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/jvm\/Gen.java","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -0,0 +1,79 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\/**\n+ * @test\n+ * @bug 8314275\n+ * @summary Tests a line number table attribute for switch expression\n+ * @library \/tools\/lib \/tools\/javac\/lib ..\/lib\n+ * @enablePreview\n+ * @modules jdk.compiler\/com.sun.tools.javac.api\n+ *          jdk.compiler\/com.sun.tools.javac.main\n+ *          jdk.compiler\/com.sun.tools.javac.util\n+ *          java.base\/jdk.internal.classfile.impl\n+ * @build toolbox.ToolBox InMemoryFileManager TestBase\n+ * @build LineNumberTestBase TestCase\n+ * @run main T8314275\n+ *\/\n+import java.util.List;\n+public class T8314275 extends LineNumberTestBase {\n+    public static void main(String[] args) throws Exception {\n+        new T8314275().test();\n+    }\n+\n+    public void test() throws Exception {\n+        test(List.of(TEST_CASE));\n+    }\n+\n+    private static final TestCase[] TEST_CASE = new TestCase[] {\n+        new TestCase(\"\"\"\n+             public class T8314275Expression {                     \/\/ 1\n+                 private static double multiply(Integer i) {       \/\/ 2\n+                      double cr = 15;                              \/\/ 3\n+                      cr = switch (i) {                            \/\/ 4\n+                          case 1 -> cr * 1;                        \/\/ 5\n+                          case 2 -> cr * 2;                        \/\/ 6\n+                          default -> cr * 4;                       \/\/ 7\n+                      };                                           \/\/ 8\n+                      return cr;                                   \/\/ 9\n+                  }                                                \/\/10\n+             }                                                     \/\/11\n+             \"\"\",\n+            List.of(1, 3, 4, 5, 6, 7, 8, 9),\n+            \"T8314275Expression\"),\n+        new TestCase(\"\"\"\n+             public class T8314275Statement {                      \/\/ 1\n+                 private static double multiply(Integer i) {       \/\/ 2\n+                      double cr = 15;                              \/\/ 3\n+                      switch (i) {                                 \/\/ 4\n+                          case 1: cr *= 1; break;                  \/\/ 5\n+                          case 2: cr *= 2; break;                  \/\/ 6\n+                          default: cr *= 4;                        \/\/ 7\n+                      };                                           \/\/ 8\n+                      return cr;                                   \/\/ 9\n+                  }                                                \/\/10\n+             }                                                     \/\/11\n+             \"\"\",\n+                List.of(1, 3, 4, 5, 6, 7, 9),\n+                \"T8314275Statement\")\n+    };\n+}\n\\ No newline at end of file\n","filename":"test\/langtools\/tools\/javac\/classfiles\/attributes\/LineNumberTable\/T8314275.java","additions":79,"deletions":0,"binary":false,"changes":79,"status":"added"}]}