{"files":[{"patch":"@@ -49,0 +49,1 @@\n+import com.sun.tools.javac.tree.DCTree.DCSnippet;\n@@ -148,1 +149,9 @@\n-                                messages.error(utils.getCommentHelper(element).getDocTreePath(tag),\n+                                var body = tag.getBody().toString();\n+                                var startPos = ((DCSnippet) tag).getStartPosition();\n+                                var endPos = startPos + Math.max(body.indexOf(linkTarget), body.indexOf(l.target()));\n+\n+                                messages.error(\n+                                        utils.getCommentHelper(element).getDocTreePath(tag),\n+                                        startPos,\n+                                        endPos,\n+                                        endPos,\n@@ -152,1 +161,1 @@\n-                                        content.asCharSequence().toString().trim());\n+                                        content.asCharSequence().toString());\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/taglets\/SnippetTaglet.java","additions":11,"deletions":2,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -55,0 +55,1 @@\n+import com.sun.source.doctree.SnippetTree;\n@@ -264,0 +265,1 @@\n+            case SNIPPET -> ((SnippetTree) t).getBody().getBody();\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/tool\/JavadocLog.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -52,13 +52,13 @@\n-                        package p;\n-                        public interface One {\n-                            \/**\n-                             * {@code One obj1}\n-                             * {@snippet lang = java:\n-                             * \/\/ @link substring=\"ab\" target=\"One#ab\" :\n-                             * obj1.ab(a()); \/\/ @link substring=\"a\" target=\"#a\"\n-                             *} class comment\n-                             *\/\n-                            int a();\n-                            void ab(int i);\n-                        }\n-                        \"\"\");\n+                package p;\n+                public interface One {\n+                    \/**\n+                     * {@code One obj1}\n+                     * {@snippet lang = java:\n+                     * \/\/ @link substring=\"ab\" target=\"One#ab\" :\n+                     * obj1.ab(a()); \/\/ @link substring=\"a\" target=\"#a\"\n+                     *} class comment\n+                     *\/\n+                    int a();\n+                    void ab(int i);\n+                }\n+                \"\"\");\n@@ -72,2 +72,3 @@\n-        checkOutput(Output.OUT, true,\n-                \"One.java:5: error: snippet link tags:\",\n+        checkOutput(Output.OUT,\n+                true,\n+                \"error: snippet link tags:\",\n@@ -76,1 +77,4 @@\n-                \"overlap in obj1.ab(a());\\n     * {@snippet lang = java:\\n       ^\");\n+                \"\"\"\n+                overlap in\\s\n+                     * \/\/ @link substring=\"ab\" target=\"One#ab\" :\n+                                                      ^\"\"\");\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/ReproducibleSnippet\/ReproducibleSnippetTest.java","additions":20,"deletions":16,"binary":false,"changes":36,"status":"modified"}]}