{"files":[{"patch":"@@ -185,6 +185,5 @@\n-#ifdef ASSERT\n-  \/\/ If called by VM thread, locking is not needed.\n-  if (!Thread::current()->is_VM_thread()) {\n-    assert_lock_strong(PSOldGenExpand_lock);\n-  }\n-#endif\n+  \/\/ This method can be invoked either outside of safepoint by java threads or\n+  \/\/ in safepoint by gc workers. Such accesses are synchronized by holding one\n+  \/\/ of the following locks.\n+  assert(Heap_lock->is_locked() || PSOldGenExpand_lock->is_locked(), \"precondition\");\n+\n","filename":"src\/hotspot\/share\/gc\/parallel\/mutableSpace.cpp","additions":5,"deletions":6,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -121,2 +121,2 @@\n-  assert(SafepointSynchronize::is_at_safepoint(), \"precondition\");\n-  assert(Thread::current()->is_VM_thread(), \"precondition\");\n+  assert(Heap_lock->is_locked(), \"precondition\");\n+\n","filename":"src\/hotspot\/share\/gc\/parallel\/psOldGen.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}