{"files":[{"patch":"@@ -1397,1 +1397,1 @@\n-            if (sym.isArray()) {\n+            if (isArray()) {\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/classfile\/impl\/StackMapGenerator.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n- * @bug 8305990 8320222\n+ * @bug 8305990 8320222 8320618\n@@ -46,1 +46,0 @@\n-import java.util.List;\n@@ -240,0 +239,12 @@\n+    @Test\n+    void testInvalidAALOADStack() {\n+        Classfile.of().build(ClassDesc.of(\"Test\"), clb\n+                -> clb.withMethodBody(\"test\", ConstantDescs.MTD_void, 0, cob\n+                        -> cob.bipush(10)\n+                              .anewarray(ConstantDescs.CD_Object)\n+                              .lconst_1() \/\/long on stack caused NPE, see 8320618\n+                              .aaload()\n+                              .astore(2)\n+                              .return_()));\n+    }\n+\n","filename":"test\/jdk\/jdk\/classfile\/StackMapsTest.java","additions":13,"deletions":2,"binary":false,"changes":15,"status":"modified"}]}