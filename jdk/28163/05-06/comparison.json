{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2025, Oracle and\/or its affiliates. All rights reserved.\n","filename":"src\/jdk.internal.opt\/share\/classes\/module-info.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-    jdk.jpackage.internal.MacBundlingEnvironment;\n\\ No newline at end of file\n+    jdk.jpackage.internal.MacBundlingEnvironment;\n","filename":"src\/jdk.jpackage\/macosx\/classes\/module-info.java.extra","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -46,1 +46,0 @@\n-\n","filename":"src\/jdk.jpackage\/share\/classes\/jdk\/jpackage\/internal\/cli\/HelpFormatter.java","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -184,0 +184,2 @@\n+                \/\/ Should never get to this point as the above line is expected to throw\n+                \/\/ an exception of type `jdk.internal.joptsimple.OptionException`.\n","filename":"src\/jdk.jpackage\/share\/classes\/jdk\/jpackage\/internal\/cli\/JOptSimpleOptionsBuilder.java","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -126,1 +126,1 @@\n-     * option spec objects each with a single name. The firt will have name \"a\", the\n+     * option spec objects each with a single name. The first will have name \"a\", the\n","filename":"src\/jdk.jpackage\/share\/classes\/jdk\/jpackage\/internal\/cli\/OptionSpec.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -218,1 +218,1 @@\n-                    formatString = \"error.path-paramater-ioexception\";\n+                    formatString = \"error.path-parameter-ioexception\";\n@@ -328,1 +328,0 @@\n-            \/\/.toArray(pathSeparator())\n@@ -334,3 +333,1 @@\n-    public static final OptionValue<Boolean> MAC_APP_STORE = booleanOption(\"mac-app-store\")\n-            \/\/.scope(MAC_SIGNING) \/\/ TODO: --mac-app-store should be applicable to app image signing operation because it redefines signing key\n-            .create();\n+    public static final OptionValue<Boolean> MAC_APP_STORE = booleanOption(\"mac-app-store\").create();\n@@ -492,1 +489,1 @@\n-                    b.converterExceptionFormatString(\"error.properties-paramater-not-path\");\n+                    b.converterExceptionFormatString(\"error.properties-parameter-not-path\");\n@@ -496,1 +493,1 @@\n-            .converterExceptionFormatString(\"error.paramater-not-path\");\n+            .converterExceptionFormatString(\"error.parameter-not-path\");\n@@ -506,1 +503,1 @@\n-                    b.validatorExceptionFormatString(\"error.properties-paramater-not-file\");\n+                    b.validatorExceptionFormatString(\"error.properties-parameter-not-file\");\n@@ -511,1 +508,1 @@\n-            .validatorExceptionFormatString(\"error.paramater-not-file\");\n+            .validatorExceptionFormatString(\"error.parameter-not-file\");\n@@ -520,1 +517,1 @@\n-            .validatorExceptionFormatString(\"error.paramater-not-directory\");\n+            .validatorExceptionFormatString(\"error.parameter-not-directory\");\n@@ -540,1 +537,1 @@\n-                    b.converterExceptionFormatString(\"error.properties-paramater-not-launcher-shortcut-dir\");\n+                    b.converterExceptionFormatString(\"error.properties-parameter-not-launcher-shortcut-dir\");\n@@ -544,1 +541,0 @@\n-\/\/            .converterExceptionFormatString(\"error.paramater-not-launcher-shortcut-dir\")\n@@ -573,1 +569,1 @@\n-                .converterExceptionFormatString(\"error.paramater-not-uuid\");\n+                .converterExceptionFormatString(\"error.parameter-not-uuid\");\n@@ -597,1 +593,1 @@\n-                .validatorExceptionFormatString(\"error.paramater-not-url\");\n+                .validatorExceptionFormatString(\"error.parameter-not-url\");\n@@ -644,2 +640,0 @@\n-\/\/                        return ERROR_WITH_VALUE_AND_OPTION_NAME.create(optionName,\n-\/\/                                optionValue, \"error.paramater-add-launcher-malformed\", cause);\n@@ -669,1 +663,1 @@\n-                                \"error.paramater-add-launcher-not-file\", components[1], launcherName));\n+                                \"error.parameter-add-launcher-not-file\", components[1], launcherName));\n","filename":"src\/jdk.jpackage\/share\/classes\/jdk\/jpackage\/internal\/cli\/StandardOption.java","additions":11,"deletions":17,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -41,1 +41,1 @@\n-final class StandardValidator {\n+final public class StandardValidator {\n@@ -46,1 +46,1 @@\n-    static final Predicate<Path> IS_DIRECTORY = Files::isDirectory;\n+    public static final Predicate<Path> IS_DIRECTORY = Files::isDirectory;\n@@ -48,1 +48,1 @@\n-    static final Predicate<Path> IS_EXISTENT_NOT_DIRECTORY = path -> {\n+    public static final Predicate<Path> IS_EXISTENT_NOT_DIRECTORY = path -> {\n@@ -52,1 +52,1 @@\n-    static final Predicate<Path> IS_DIRECTORY_OR_NON_EXISTENT = path -> {\n+    public static final Predicate<Path> IS_DIRECTORY_OR_NON_EXISTENT = path -> {\n@@ -72,0 +72,2 @@\n+    public static Predicate<Path> IS_DIRECTORY_EMPTY_OR_NON_EXISTENT_PREDICATE = toPredicate(IS_DIRECTORY_EMPTY_OR_NON_EXISTENT);\n+\n@@ -80,0 +82,2 @@\n+    public static Predicate<String> IS_URL_PREDICATE = toPredicate(IS_URL);\n+\n@@ -88,0 +92,2 @@\n+    public static Predicate<String> IS_CLASSNAME_PREDICATE = toPredicate(IS_CLASSNAME);\n+\n@@ -89,1 +95,1 @@\n-    static final Predicate<String> IS_NAME_VALID = s -> {\n+    public static final Predicate<String> IS_NAME_VALID = s -> {\n@@ -125,1 +131,1 @@\n-    static final class DirectoryListingIOException extends RuntimeException{\n+    public static final class DirectoryListingIOException extends RuntimeException {\n@@ -133,0 +139,12 @@\n+\n+\n+    private static <T> Predicate<T> toPredicate(Consumer<T> validator) {\n+        return v -> {\n+            try {\n+                validator.accept(v);\n+                return true;\n+            } catch (ValidatingConsumerException ex) {\n+                return false;\n+            }\n+        };\n+    }\n","filename":"src\/jdk.jpackage\/share\/classes\/jdk\/jpackage\/internal\/cli\/StandardValidator.java","additions":24,"deletions":6,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -46,1 +46,1 @@\n-    static final class ValidatingConsumerException extends RuntimeException{\n+    static final class ValidatingConsumerException extends RuntimeException {\n","filename":"src\/jdk.jpackage\/share\/classes\/jdk\/jpackage\/internal\/cli\/Validator.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -72,12 +72,12 @@\n-error.paramater-not-uuid=The value \"{0}\" provided for parameter {1} is not a valid UUID\n-error.paramater-not-path=The value \"{0}\" provided for parameter {1} is not a valid path\n-error.paramater-not-file=The value \"{0}\" provided for parameter {1} is not a file\n-error.paramater-not-directory=The value \"{0}\" provided for parameter {1} is not a directory\n-error.paramater-not-url=The value \"{0}\" provided for parameter {1} is not a valid URL\n-error.paramater-not-launcher-shortcut-dir=The value \"{0}\" provided for parameter {1} is not a valid shortcut startup directory\n-error.path-paramater-ioexception=I\/O error accessing path value \"{0}\" of parameter {1}\n-error.paramater-add-launcher-malformed=The value \"{0}\" provided for parameter {1} does not match the pattern <name>=<file path>\n-error.paramater-add-launcher-not-file=The value of path to a property file \"{0}\" provided for additional launcher \"{1}\" is not a valid file path\n-error.properties-paramater-not-path=The value \"{0}\" provided for property \"{1}\" in \"{2}\" file is not a valid path\n-error.properties-paramater-not-file=The value \"{0}\" provided for property \"{1}\" in \"{2}\" file is not a file\n-error.properties-paramater-not-launcher-shortcut-dir=The value \"{0}\" provided for property \"{1}\" in \"{2}\" file is not a valid shortcut startup directory\n+error.parameter-not-uuid=The value \"{0}\" provided for parameter {1} is not a valid UUID\n+error.parameter-not-path=The value \"{0}\" provided for parameter {1} is not a valid path\n+error.parameter-not-file=The value \"{0}\" provided for parameter {1} is not a file\n+error.parameter-not-directory=The value \"{0}\" provided for parameter {1} is not a directory\n+error.parameter-not-url=The value \"{0}\" provided for parameter {1} is not a valid URL\n+error.parameter-not-launcher-shortcut-dir=The value \"{0}\" provided for parameter {1} is not a valid shortcut startup directory\n+error.path-parameter-ioexception=I\/O error accessing path value \"{0}\" of parameter {1}\n+error.parameter-add-launcher-malformed=The value \"{0}\" provided for parameter {1} does not match the pattern <name>=<file path>\n+error.parameter-add-launcher-not-file=The value of path to a property file \"{0}\" provided for additional launcher \"{1}\" is not a valid file path\n+error.properties-parameter-not-path=The value \"{0}\" provided for property \"{1}\" in \"{2}\" file is not a valid path\n+error.properties-parameter-not-file=The value \"{0}\" provided for property \"{1}\" in \"{2}\" file is not a file\n+error.properties-parameter-not-launcher-shortcut-dir=The value \"{0}\" provided for property \"{1}\" in \"{2}\" file is not a valid shortcut startup directory\n","filename":"src\/jdk.jpackage\/share\/classes\/jdk\/jpackage\/internal\/resources\/MainResources.properties","additions":12,"deletions":12,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -82,1 +82,1 @@\n-        var ex = factory.create(TEST_OPTION_NAME, TEST_OPTION_VALUE, \"error.paramater-not-file\", Optional.empty());\n+        var ex = factory.create(TEST_OPTION_NAME, TEST_OPTION_VALUE, \"error.parameter-not-file\", Optional.empty());\n@@ -84,1 +84,1 @@\n-        assertExceptionEquals(new Exception(I18N.format(\"error.paramater-not-file\", \"--foo\", \"str\")), ex);\n+        assertExceptionEquals(new Exception(I18N.format(\"error.parameter-not-file\", \"--foo\", \"str\")), ex);\n@@ -92,1 +92,1 @@\n-        var ex = factory.create(TEST_OPTION_NAME, TEST_OPTION_VALUE, \"error.paramater-not-file\", Optional.empty());\n+        var ex = factory.create(TEST_OPTION_NAME, TEST_OPTION_VALUE, \"error.parameter-not-file\", Optional.empty());\n@@ -94,1 +94,1 @@\n-        assertExceptionEquals(new Exception(I18N.format(\"error.paramater-not-file\", \"str\", \"--foo\")), ex);\n+        assertExceptionEquals(new Exception(I18N.format(\"error.parameter-not-file\", \"str\", \"--foo\")), ex);\n@@ -113,1 +113,1 @@\n-        var ex = factory.create(TEST_OPTION_NAME, TEST_OPTION_VALUE, \"error.paramater-not-file\", Optional.empty());\n+        var ex = factory.create(TEST_OPTION_NAME, TEST_OPTION_VALUE, \"error.parameter-not-file\", Optional.empty());\n@@ -121,1 +121,1 @@\n-        assertExceptionEquals(new Exception(I18N.format(\"error.paramater-not-file\", formattedOptionName, \"str\")), ex);\n+        assertExceptionEquals(new Exception(I18N.format(\"error.parameter-not-file\", formattedOptionName, \"str\")), ex);\n","filename":"test\/jdk\/tools\/jpackage\/junit\/share\/jdk.jpackage\/jdk\/jpackage\/internal\/cli\/OptionValueExceptionFactoryTest.java","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -300,1 +300,1 @@\n-                new JPackageException(I18N.format(\"error.paramater-not-directory\", workDir.resolve(\"non-existent\"), \"-i\")),\n+                new JPackageException(I18N.format(\"error.parameter-not-directory\", workDir.resolve(\"non-existent\"), \"-i\")),\n@@ -310,1 +310,1 @@\n-                new JPackageException(I18N.format(\"error.paramater-not-directory\", workDir.resolve(\"non-existent\"), \"-i\"))\n+                new JPackageException(I18N.format(\"error.parameter-not-directory\", workDir.resolve(\"non-existent\"), \"-i\"))\n@@ -336,2 +336,2 @@\n-                new JPackageException(I18N.format(\"error.properties-paramater-not-file\", workDir, \"icon\", invalidPropertyFile)),\n-                new JPackageException(I18N.format(\"error.paramater-not-directory\", workDir.resolve(\"non-existent\"), \"-i\")),\n+                new JPackageException(I18N.format(\"error.properties-parameter-not-file\", workDir, \"icon\", invalidPropertyFile)),\n+                new JPackageException(I18N.format(\"error.parameter-not-directory\", workDir.resolve(\"non-existent\"), \"-i\")),\n@@ -464,1 +464,1 @@\n-                    new JPackageException(I18N.format(\"error.paramater-not-directory\", workDir.resolve(\"non-existent\"), \"-i\")),\n+                    new JPackageException(I18N.format(\"error.parameter-not-directory\", workDir.resolve(\"non-existent\"), \"-i\")),\n@@ -467,1 +467,1 @@\n-                    new JPackageException(I18N.format(\"error.paramater-not-path\", \"?.jar\", \"--main-jar\"), new IllegalArgumentException()),\n+                    new JPackageException(I18N.format(\"error.parameter-not-path\", \"?.jar\", \"--main-jar\"), new IllegalArgumentException()),\n@@ -470,1 +470,1 @@\n-                    new JPackageException(I18N.format(\"error.properties-paramater-not-path\", \"*.png\", \"icon\", invalidPropertyFile), new IllegalArgumentException()),\n+                    new JPackageException(I18N.format(\"error.properties-parameter-not-path\", \"*.png\", \"icon\", invalidPropertyFile), new IllegalArgumentException()),\n@@ -476,1 +476,1 @@\n-                    new AddLauncherInvalidPropertyFileException(I18N.format(\"error.paramater-add-launcher-not-file\", nonExistentPropertyFile, \"b\")),\n+                    new AddLauncherInvalidPropertyFileException(I18N.format(\"error.parameter-add-launcher-not-file\", nonExistentPropertyFile, \"b\")),\n","filename":"test\/jdk\/tools\/jpackage\/junit\/share\/jdk.jpackage\/jdk\/jpackage\/internal\/cli\/OptionsProcessorTest.java","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -126,1 +126,1 @@\n-        assertEquals(I18N.format(\"error.paramater-not-file\", workDir, \"--icon\"), ex.getMessage());\n+        assertEquals(I18N.format(\"error.parameter-not-file\", workDir, \"--icon\"), ex.getMessage());\n@@ -140,1 +140,1 @@\n-        assertEquals(I18N.format(\"error.properties-paramater-not-file\", workDir, \"icon\", propertyFile), ex.getMessage());\n+        assertEquals(I18N.format(\"error.properties-parameter-not-file\", workDir, \"icon\", propertyFile), ex.getMessage());\n@@ -403,5 +403,0 @@\n-\/\/            Builder expectMalformedError(String v) {\n-\/\/                Objects.requireNonNull(v);\n-\/\/                return optionValue(v).expectErrors(I18N.format(\"error.paramater-add-launcher-malformed\", v, \"--add-launcher\"));\n-\/\/            }\n-\n@@ -428,1 +423,1 @@\n-                buildAddLauncherTest().optionValue(\"a=\").expectErrors(I18N.format(\"error.paramater-add-launcher-not-file\", \"\", \"a\")),\n+                buildAddLauncherTest().optionValue(\"a=\").expectErrors(I18N.format(\"error.parameter-add-launcher-not-file\", \"\", \"a\")),\n@@ -431,1 +426,1 @@\n-                buildAddLauncherTest().optionValue(\"foo=*\").expectErrors(I18N.format(\"error.paramater-add-launcher-not-file\", \"*\", \"foo\")),\n+                buildAddLauncherTest().optionValue(\"foo=*\").expectErrors(I18N.format(\"error.parameter-add-launcher-not-file\", \"*\", \"foo\")),\n@@ -433,1 +428,1 @@\n-                buildAddLauncherTest().optionValue(\"foo=.\").expectErrors(I18N.format(\"error.paramater-add-launcher-not-file\", \".\", \"foo\")),\n+                buildAddLauncherTest().optionValue(\"foo=.\").expectErrors(I18N.format(\"error.parameter-add-launcher-not-file\", \".\", \"foo\")),\n@@ -435,1 +430,1 @@\n-                buildAddLauncherTest().optionValue(\"Foo=foo\/bar\/buz\/111.z\").expectErrors(I18N.format(\"error.paramater-add-launcher-not-file\", \"foo\/bar\/buz\/111.z\", \"Foo\"))\n+                buildAddLauncherTest().optionValue(\"Foo=foo\/bar\/buz\/111.z\").expectErrors(I18N.format(\"error.parameter-add-launcher-not-file\", \"foo\/bar\/buz\/111.z\", \"Foo\"))\n@@ -486,1 +481,1 @@\n-                                return List.of(I18N.format(\"error.properties-paramater-not-launcher-shortcut-dir\",\n+                                return List.of(I18N.format(\"error.properties-parameter-not-launcher-shortcut-dir\",\n@@ -544,1 +539,0 @@\n-\/\/                buildLauncherShortcutTest().optionValue(\"\").propertyFile(true),\n@@ -547,1 +541,0 @@\n-\/\/                buildLauncherShortcutTest().optionValue(\"bar\").propertyFile(true)\n","filename":"test\/jdk\/tools\/jpackage\/junit\/share\/jdk.jpackage\/jdk\/jpackage\/internal\/cli\/StandardOptionTest.java","additions":7,"deletions":14,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -54,1 +54,1 @@\n- * @run main\/othervm\/timeout=360 -Xmx512m jdk.jpackage.test.Main\n+ * @run main\/othervm\/timeout=1080 -Xmx512m jdk.jpackage.test.Main\n@@ -208,1 +208,1 @@\n-    private static final int JOB_COUNT = 10;\n+    private static final int JOB_COUNT = 30;\n","filename":"test\/jdk\/tools\/jpackage\/share\/AsyncTest.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -404,1 +404,1 @@\n-                    .error(\"error.paramater-not-directory\", \"non-existent.runtime\", \"--runtime-image\"),\n+                    .error(\"error.parameter-not-directory\", \"non-existent.runtime\", \"--runtime-image\"),\n@@ -410,1 +410,1 @@\n-                    .error(\"error.paramater-not-directory\", \"non-existent.dir\", \"--resource-dir\"),\n+                    .error(\"error.parameter-not-directory\", \"non-existent.dir\", \"--resource-dir\"),\n@@ -413,1 +413,1 @@\n-                    .error(\"error.paramater-not-file\", \"non-existent.icon\", \"--icon\"),\n+                    .error(\"error.parameter-not-file\", \"non-existent.icon\", \"--icon\"),\n","filename":"test\/jdk\/tools\/jpackage\/share\/ErrorTest.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"}]}