{"files":[{"patch":"@@ -37,1 +37,1 @@\n-        \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\";\n+            \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\";\n@@ -39,1 +39,1 @@\n-                 \"areallylongfilenamethatsforsur\";\n+            \"areallylongfilenamethatsforsur\";\n@@ -44,0 +44,4 @@\n+    private static final int FILE_EXISTS_SLEEP = 100;\n+\n+    private static final int MAX_PATH_COMPONENTS_WINDOWS = 20;\n+\n@@ -47,4 +51,1 @@\n-        String osName = System.getProperty(\"os.name\");\n-        if (osName.startsWith(\"Windows\")) {\n-            isWindows = true;\n-        }\n+        setIsWindows();\n@@ -62,2 +63,11 @@\n-        \/\/ And these long pathes cannot be handled on Solaris and Mac platforms\n-        testLongPathOnWindows();\n+        \/\/ And these long paths cannot be handled on Linux and Mac platforms\n+        if (isWindows) {\n+            testLongPath();\n+        }\n+    }\n+\n+    private static void setIsWindows() {\n+        String osName = System.getProperty(\"os.name\");\n+        if (osName.startsWith(\"Windows\")) {\n+            isWindows = true;\n+        }\n@@ -68,1 +78,1 @@\n-                                               : fName + \"A\";\n+                : fName + \"A\";\n@@ -143,1 +153,1 @@\n-                !fu.getCanonicalPath().equals(f.getCanonicalPath()))\n+                    !fu.getCanonicalPath().equals(f.getCanonicalPath()))\n@@ -157,3 +167,3 @@\n-                    abPath.length() < 1093) {\n-                    throw new RuntimeException (\"File.renameTo() failed for lenth=\"\n-                                                + abPath.length());\n+                        abPath.length() < 1093) {\n+                    throw new RuntimeException (\"File.renameTo() failed for length=\"\n+                            + abPath.length());\n@@ -185,1 +195,1 @@\n-                        Thread.sleep(100);\n+                        Thread.sleep(FILE_EXISTS_SLEEP);\n@@ -196,8 +206,6 @@\n-    private static void testLongPathOnWindows () throws Exception {\n-        if (isWindows) {\n-            String name = fileName;\n-            while (name.length() < MAX_LENGTH) {\n-                testLongPath (20, name, false);\n-                testLongPath (20, name, true);\n-                name = getNextName(name);\n-            }\n+    private static void testLongPath () throws Exception {\n+        String name = fileName;\n+        while (name.length() < MAX_LENGTH) {\n+            testLongPath(MAX_PATH_COMPONENTS_WINDOWS, name, false);\n+            testLongPath(MAX_PATH_COMPONENTS_WINDOWS, name, true);\n+            name = getNextName(name);\n@@ -207,0 +215,1 @@\n+\n","filename":"test\/jdk\/java\/io\/File\/MaxPathLength.java","additions":31,"deletions":22,"binary":false,"changes":53,"status":"modified"}]}