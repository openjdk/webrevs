{"files":[{"patch":"@@ -1508,0 +1508,8 @@\n+void* PosixSignals::get_signal_handler_for_signal(int sig) {\n+  struct sigaction oact;\n+  if (sigaction(sig, (struct sigaction*)nullptr, &oact) == -1) {\n+    return nullptr; \/\/ signal not installed\n+  }\n+  return get_signal_handler(&oact);\n+}\n+\n","filename":"src\/hotspot\/os\/posix\/signals_posix.cpp","additions":8,"deletions":0,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -55,0 +55,2 @@\n+  static void* get_signal_handler_for_signal(int sig);\n+\n","filename":"src\/hotspot\/os\/posix\/signals_posix.hpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -652,2 +652,4 @@\n-  if (PosixSignals::install_generic_signal_handler(SIG, (void*)::handle_timer_signal) == (void*)-1) {\n-    log_error(jfr)(\"CPUTimeSample events will not be recorded\");\n+  void* prev_handler = PosixSignals::get_signal_handler_for_signal(SIG);\n+  if ((prev_handler != SIG_DFL && prev_handler != SIG_IGN && prev_handler != (void*)::handle_timer_signal) ||\n+      PosixSignals::install_generic_signal_handler(SIG, (void*)::handle_timer_signal) == (void*)-1) {\n+    log_error(jfr)(\"CPUTimeSample events will not be recorded: %p\", prev_handler);\n","filename":"src\/hotspot\/share\/jfr\/periodic\/sampling\/jfrCPUTimeThreadSampler.cpp","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"}]}