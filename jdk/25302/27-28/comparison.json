{"files":[{"patch":"@@ -25,1 +25,1 @@\n- #include \"jfr\/periodic\/sampling\/jfrCPUTimeThreadSampler.hpp\"\n+#include \"jfr\/periodic\/sampling\/jfrCPUTimeThreadSampler.hpp\"\n@@ -324,3 +324,3 @@\n-      if (!tl->try_acquire_cpu_time_jfr_dequeue_lock()) {\n-        \/\/ the thread is already processing requests at its safepoint\n-        continue;\n+      if (!jt->has_last_Java_frame() || !tl->try_acquire_cpu_time_jfr_dequeue_lock()) {\n+        tl->set_do_async_processing_of_cpu_time_jfr_requests(false);\n+        continue; \/\/ thread doesn't have a last Java frame or queue is already being processed\n","filename":"src\/hotspot\/share\/jfr\/periodic\/sampling\/jfrCPUTimeThreadSampler.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"}]}