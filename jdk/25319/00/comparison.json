{"files":[{"patch":"@@ -34,0 +34,20 @@\n+import java.awt.BorderLayout;\n+import java.awt.Color;\n+import java.awt.Component;\n+import java.awt.ComponentOrientation;\n+import java.awt.Graphics;\n+import java.awt.event.ActionEvent;\n+import java.awt.event.KeyEvent;\n+import java.util.List;\n+import javax.swing.AbstractAction;\n+import javax.swing.Icon;\n+import javax.swing.JCheckBoxMenuItem;\n+import javax.swing.JFrame;\n+import javax.swing.JLabel;\n+import javax.swing.JMenu;\n+import javax.swing.JMenuBar;\n+import javax.swing.JMenuItem;\n+import javax.swing.JRadioButtonMenuItem;\n+import javax.swing.KeyStroke;\n+import javax.swing.UIManager;\n+\n@@ -54,1 +74,1 @@\n-        JFrame frame1 = MenuItemTest.doMenuItemTest(true,\n+        JFrame frame1 = getMenuItemTestFrame(true,\n@@ -58,1 +78,1 @@\n-        JFrame frame2 = MenuItemTest.doMenuItemTest(false,\n+        JFrame frame2 = getMenuItemTestFrame(false,\n@@ -63,1 +83,1 @@\n-        JFrame frame3 = MenuItemTest.doMenuItemTest(true,\n+        JFrame frame3 = getMenuItemTestFrame(true,\n@@ -67,1 +87,1 @@\n-        JFrame frame4 = MenuItemTest.doMenuItemTest(false,\n+        JFrame frame4 = getMenuItemTestFrame(false,\n@@ -74,0 +94,119 @@\n+\n+        public static JFrame getMenuItemTestFrame(boolean isLeft, String lafName, int frameY) {\n+            try {\n+                UIManager.setLookAndFeel(lafName);\n+            } catch (Exception e) {\n+                e.printStackTrace();\n+            }\n+\n+            JMenu menu = new JMenu(\"View\");\n+            menu.setMnemonic('V');\n+\n+            menu.add(new JMenuItem(\"Refresh\"));\n+            menu.add(new JMenuItem(\"Customize...\"));\n+            menu.add(new JCheckBoxMenuItem(\"Show Toolbar\"));\n+            menu.addSeparator();\n+            menu.add(new JRadioButtonMenuItem(\"List\"));\n+            menu.add(new JRadioButtonMenuItem(\"Icons\"));\n+            JRadioButtonMenuItem rm2 = new JRadioButtonMenuItem(\"And icon.\");\n+            rm2.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_F1,\n+                    KeyEvent.SHIFT_MASK));\n+            menu.add(rm2);\n+            JRadioButtonMenuItem mi3 = new JRadioButtonMenuItem(\"Radio w\/icon\");\n+\n+            Icon myIcon = new Icon() { \/\/ 10 pixel red\n+                public void paintIcon(Component c, Graphics g, int x, int y) {\n+                    Color color = g.getColor();\n+                    g.setColor(Color.RED);\n+                    g.fillRect(x, y, 10, 10);\n+                    g.setColor(color);\n+                }\n+\n+                public int getIconWidth() {\n+                    return 10;\n+                }\n+\n+                public int getIconHeight() {\n+                    return 10;\n+                }\n+            };\n+\n+            Icon myIcon2 = new Icon() { \/\/ 15 pixel green\n+                @Override\n+                public void paintIcon(Component c, Graphics g, int x, int y) {\n+                    Color color = g.getColor();\n+                    g.setColor(Color.GREEN);\n+                    g.fillRect(x, y, 15, 10);\n+                    g.setColor(color);\n+                }\n+\n+                public int getIconWidth() {\n+                    return 15;\n+                }\n+\n+                public int getIconHeight() {\n+                    return 10;\n+                }\n+            };\n+\n+            rm2.setIcon(myIcon2);\n+\n+            mi3.setIcon(myIcon);\n+            menu.add(mi3);\n+            menu.add(new JMenuItem(myIcon2));\n+\n+            final JMenu menu2 = new JMenu(\"No nothing\");\n+            menu2.add(\"One\").addActionListener(new AbstractAction() {\n+                public void actionPerformed(ActionEvent e) {\n+                    System.out.println(\"menu.width = \"+menu2.getPopupMenu().getWidth());\n+                }\n+            });\n+            menu2.add(\"Two\").addActionListener(new AbstractAction() {\n+                public void actionPerformed(ActionEvent e) {\n+                    System.out.println(\"menu.width = \"+menu2.getPopupMenu().getWidth());\n+                }\n+            });\n+            menu2.add(\"Threeee\").addActionListener(new AbstractAction() {\n+                public void actionPerformed(ActionEvent e) {\n+                    System.out.println(\"menu.width = \"+menu2.getPopupMenu().getWidth());\n+                }\n+            });\n+\n+            JMenuItem mi4 = new JMenuItem(\"Item with icon\");\n+            mi4.setIcon(myIcon);\n+            menu.addSeparator();\n+            menu.add(mi4);\n+\n+            String title = \"Menu Item Test \" + (isLeft ? \"(Left-to-right)\" : \"(Right-to-left)\");\n+            JFrame frame = new JFrame(title);\n+            frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\n+\n+            JMenuBar menuBar = new JMenuBar();\n+            menuBar.add(menu);\n+            menuBar.add(menu2);\n+\n+            JMenu someIcons = new JMenu(\"Some icons\");\n+            JMenuItem imi1 = new JMenuItem(\"Icon!\");\n+            imi1.setIcon(myIcon);\n+            someIcons.add(imi1);\n+            JMenuItem imi2 = new JMenuItem(\"Wide icon!\");\n+            imi2.setIcon(myIcon2);\n+            someIcons.add(imi2);\n+            someIcons.add(new JCheckBoxMenuItem(\"CheckBox\"));\n+            someIcons.add(new JRadioButtonMenuItem(\"RadioButton\"));\n+            menuBar.add(someIcons);\n+            frame.setJMenuBar(menuBar);\n+            ComponentOrientation co = (isLeft ?\n+                    ComponentOrientation.LEFT_TO_RIGHT :\n+                    ComponentOrientation.RIGHT_TO_LEFT);\n+            frame.applyComponentOrientation(co);\n+            String shortName = lafName.substring(lafName.lastIndexOf(\".\")+1);\n+            JLabel label = new JLabel(\"<HTML><H2>\"+shortName+\"<\/H2><\/HTML>\");\n+            frame.setLayout(new BorderLayout());\n+            frame.add(label, BorderLayout.CENTER);\n+            frame.setSize(300, 300);\n+            int frameX = isLeft ? 0 : 600;\n+            frame.setLocation(frameX, frameY);\n+            frame.setVisible(true);\n+            return frame;\n+        }\n","filename":"test\/jdk\/javax\/swing\/JMenuItem\/bug6197830.java","additions":143,"deletions":4,"binary":false,"changes":147,"status":"modified"}]}