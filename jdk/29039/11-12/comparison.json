{"files":[{"patch":"@@ -416,1 +416,1 @@\n-#define KELVIN_START_GC\n+#undef KELVIN_START_GC\n@@ -439,0 +439,1 @@\n+  double rate;\n@@ -458,1 +459,1 @@\n-    \"Is Spiking, Spike Rate (MB\/s), \"\n+    \"Is Spiking, Rate (MB\/s), Spike Rate (MB\/s), \"\n@@ -460,13 +461,13 @@\n-    \"                                                Min         Learned      Allocatable        Predicted                     Current                              Planned                   Spike\",\n-    \"TimeStamp Capacity     Available    Allocated   Threshold   Steps        (bytes)            Accelerated                   Rate by                              GC     Avg                Time\",\n-    \"|         (Bytes)      (Bytes)      (Bytes)     (Bytes)     |  Avg       |           Avg    GC     Allocated              Accel      Accelerated               Time   Time               to\",\n-    \"|         |            |            |           |           |  Alloc     |           Cycle  Time   Since                  (MB\/s)     Consumption               (s)    to                 Deplete\",\n-    \"|         |            |            |           |           |  Rate      |           Time   (s)    Last                   |          (bytes)                   |      Deplete            Available\",\n-    \"|         |            |            |           |           |  (MB\/s)    |           (s)    |      Sample                 |          |           Accel         |      Avail   Is         (s)\",\n-    \"|         |            |            |           |           |  |         |           |      |      (bytes)                |          |           MB\/s^2)       |      (s)     Spiking    |\",\n-    \"|         |            |            |           |           |  |         |           |      |      |           Spike      |          |           |      Future |      |       |   Spike  |\",\n-    \"|         |            |            |           |           |  |         |           |      |      |           Alloc      |          |           |      GC     |      |       |   Rate   |\",\n-    \"|         |            |            |           |           |  |         |           |      |      |           Rate       |          |           |      Time   |      |       |   (MB\/s) |\",\n-    \"|         |            |            |           |           |  |         |           |      |      |           (MB\/s)     |          |           |      (s)    |      |       |   |      |\",\n-    \"|         |            |            |           |           |  |         |           |      |      |           |          |          |           |      |      |      |       |   |      |\",\n-    \"v         v            v            v           v           v  v         v           v      v      v           v          v          v           v      v      v      v       v   v      v\"\n+    \"                                                Min         Learned      Allocatable        Predicted                     Current                              Planned                          Spike\",\n+    \"TimeStamp Capacity     Available    Allocated   Threshold   Steps        (bytes)            Accelerated                   Rate by                              GC     Avg                       Time\",\n+    \"|         (Bytes)      (Bytes)      (Bytes)     (Bytes)     |  Avg       |           Avg    GC     Allocated              Accel      Accelerated               Time   Time                      to\",\n+    \"|         |            |            |           |           |  Alloc     |           Cycle  Time   Since                  (MB\/s)     Consumption               (s)    to                        Deplete\",\n+    \"|         |            |            |           |           |  Rate      |           Time   (s)    Last                   |          (bytes)                   |      Deplete                   Available\",\n+    \"|         |            |            |           |           |  (MB\/s)    |           (s)    |      Sample                 |          |           Accel         |      Avail   Is                (s)\",\n+    \"|         |            |            |           |           |  |         |           |      |      (bytes)                |          |           MB\/s^2)       |      (s)     Spiking           |\",\n+    \"|         |            |            |           |           |  |         |           |      |      |           Spike      |          |           |      Future |      |       |   Rate   Spike  |\",\n+    \"|         |            |            |           |           |  |         |           |      |      |           Alloc      |          |           |      GC     |      |       |   (MB\/s) Rate   |\",\n+    \"|         |            |            |           |           |  |         |           |      |      |           Rate       |          |           |      Time   |      |       |   |      (MB\/s) |\",\n+    \"|         |            |            |           |           |  |         |           |      |      |           (MB\/s)     |          |           |      (s)    |      |       |   |      |      |\",\n+    \"|         |            |            |           |           |  |         |           |      |      |           |          |          |           |      |      |      |       |   |      |      |\",\n+    \"v         v            v            v           v           v  v         v           v      v      v           v          v          v           v      v      v      v       v   v      v      v\"\n@@ -481,1 +482,1 @@\n-                 \"%s, %.3f, %.3f\",\n+                 \"%s, %.3f, %.3f, %.3f\",\n@@ -501,0 +502,1 @@\n+                 trigger_log[__index].rate \/ (1024*1024),\n@@ -543,0 +545,5 @@\n+  \/\/  log_info(gc)(\"AppendTrigger(first_rejected: %zu, rejected_count: %zu) @%.6f\",\n+  \/\/               first_rejected_trigger, rejected_trigger_count, ts);\n+\n+\n+\n@@ -544,1 +551,1 @@\n-                          irwps, crba, ca, accel, pfgt, fpgt, attda, is, sr, sttda)         \\\n+                          irwps, crba, ca, accel, pfgt, fpgt, attda, is, r, sr, sttda)      \\\n@@ -553,2 +560,0 @@\n-  log_info(gc)(\"AppendTrigger(first_rejected: %zu, rejected_count: %zu) @%.6f\",             \\\n-               first_rejected_trigger, rejected_trigger_count, ts);                         \\\n@@ -577,0 +582,1 @@\n+    rejected_trigger_log[__j].rate = r;                                                     \\\n@@ -582,1 +588,1 @@\n-                        irwps, crba, ca, accel, pfgt, fpgt, attda, is, sr, sttda)           \\\n+                        irwps, crba, ca, accel, pfgt, fpgt, attda, is, r, sr, sttda)        \\\n@@ -585,1 +591,1 @@\n-                    pfgt, fpgt, attda, is, sr, sttda);                                      \\\n+                    pfgt, fpgt, attda, is, r, sr, sttda);\t                            \\\n@@ -592,1 +598,1 @@\n-                          irwps, crba, ca, accel, pfgt, fpgt, attda, is, sr, sttda) ;\n+                          irwps, crba, ca, accel, pfgt, fpgt, attda, is, r, sr, sttda) ;\n@@ -595,1 +601,1 @@\n-                        irwps, crba, ca, accel, pfgt, fpgt, attda, is, sr, sttda) ;\n+                        irwps, crba, ca, accel, pfgt, fpgt, attda, is, r, sr, sttda) ;\n@@ -639,1 +645,1 @@\n-                    future_planned_gc_time, avg_time_to_deplete_available, is_spiking, spike_rate,\n+                    future_planned_gc_time, avg_time_to_deplete_available, is_spiking, rate, spike_rate,\n@@ -647,1 +653,2 @@\n-  spike_rate = _allocation_rate.sample(allocated);\n+\n+  spike_rate = rate;\n@@ -658,1 +665,1 @@\n-                    future_planned_gc_time, avg_time_to_deplete_available, is_spiking, spike_rate,\n+                    future_planned_gc_time, avg_time_to_deplete_available, is_spiking, rate, spike_rate,\n@@ -677,1 +684,1 @@\n-                      future_planned_gc_time, avg_time_to_deplete_available, is_spiking, spike_rate,\n+                      future_planned_gc_time, avg_time_to_deplete_available, is_spiking, rate, spike_rate,\n@@ -685,1 +692,0 @@\n-\n@@ -825,1 +831,1 @@\n-                      future_planned_gc_time, avg_time_to_deplete_available, is_spiking, spike_rate,\n+                      future_planned_gc_time, avg_time_to_deplete_available, is_spiking, rate, spike_rate,\n@@ -870,1 +876,1 @@\n-                    future_planned_gc_time, avg_time_to_deplete_available, is_spiking, spike_rate,\n+                    future_planned_gc_time, avg_time_to_deplete_available, is_spiking, rate, spike_rate,\n@@ -889,1 +895,1 @@\n-                    future_planned_gc_time, avg_time_to_deplete_available, is_spiking, spike_rate,\n+                    future_planned_gc_time, avg_time_to_deplete_available, is_spiking, rate, spike_rate,\n@@ -901,1 +907,1 @@\n-                    future_planned_gc_time, avg_time_to_deplete_available, is_spiking, spike_rate,\n+                    future_planned_gc_time, avg_time_to_deplete_available, is_spiking, rate, spike_rate,\n@@ -909,1 +915,1 @@\n-                      future_planned_gc_time, avg_time_to_deplete_available, is_spiking, spike_rate,\n+                      future_planned_gc_time, avg_time_to_deplete_available, is_spiking, rate, spike_rate,\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/heuristics\/shenandoahAdaptiveHeuristics.cpp","additions":39,"deletions":33,"binary":false,"changes":72,"status":"modified"}]}