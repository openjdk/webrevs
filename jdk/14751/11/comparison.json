{"files":[{"patch":"@@ -534,1 +534,1 @@\n-        \/\/ Now check if there are any characters that need to be changed, or are surrogate\n+        \/\/ Now check if there are any characters that need to be changed\n@@ -536,2 +536,1 @@\n-            int cp = value[first] & 0xff;\n-            if (cp != CharacterDataLatin1.instance.toLowerCase(cp)) {  \/\/ no need to check Character.ERROR\n+            if (CharacterDataLatin1.instance.isUpperCase(value[first] & 0xff)) {\n@@ -551,6 +550,1 @@\n-            int cp = value[i] & 0xff;\n-            cp = CharacterDataLatin1.instance.toLowerCase(cp);\n-            if (!canEncode(cp)) {                      \/\/ not a latin1 character\n-                return toLowerCaseEx(str, value, first, locale, false);\n-            }\n-            result[i] = (byte)cp;\n+            result[i] = (byte)CharacterDataLatin1.instance.toLowerCase(value[i] & 0xff);\n@@ -608,1 +602,1 @@\n-        \/\/ Now check if there are any characters that need to be changed, or are surrogate\n+        \/\/ Now check if there are any characters that need to be changed\n@@ -611,1 +605,2 @@\n-            if (cp != CharacterDataLatin1.instance.toUpperCaseEx(cp)) {   \/\/ no need to check Character.ERROR\n+            boolean notUpperCaseEx = cp >= 'a' && (cp <= 'z' || cp == 0xb5 || (cp >= 0xdf && cp != 0xf7));\n+            if (notUpperCaseEx) {\n@@ -626,2 +621,1 @@\n-            int cp = value[i] & 0xff;\n-            cp = CharacterDataLatin1.instance.toUpperCaseEx(cp);\n+            int cp = CharacterDataLatin1.instance.toUpperCaseEx(value[i] & 0xff);\n","filename":"src\/java.base\/share\/classes\/java\/lang\/StringLatin1.java","additions":7,"deletions":13,"binary":false,"changes":20,"status":"modified"}]}