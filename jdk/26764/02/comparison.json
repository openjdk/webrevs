{"files":[{"patch":"@@ -566,6 +566,1 @@\n-    if (CDSConfig::is_dumping_adapters()) {\n-      AdapterHandlerEntry* entry = (AdapterHandlerEntry*)ref->obj();\n-      return AdapterHandlerLibrary::is_abstract_method_adapter(entry) ? set_to_null : make_a_copy;\n-    } else {\n-      return set_to_null;\n-    }\n+    return CDSConfig::is_dumping_adapters() ? make_a_copy : set_to_null;\n","filename":"src\/hotspot\/share\/cds\/archiveBuilder.cpp","additions":1,"deletions":6,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -155,0 +155,3 @@\n+  if (is_abstract()) {\n+    return SharedRuntime::throw_AbstractMethodError_entry();\n+  }\n@@ -160,0 +163,3 @@\n+  if (is_abstract()) {\n+    return SharedRuntime::get_handle_wrong_method_abstract_stub();\n+  }\n@@ -1168,1 +1174,1 @@\n-    _from_compiled_entry    = nullptr;\n+    _from_compiled_entry = nullptr;\n@@ -1170,1 +1176,1 @@\n-    _from_compiled_entry    = adapter()->get_c2i_entry();\n+    _from_compiled_entry = adapter()->get_c2i_entry();\n@@ -1199,1 +1205,1 @@\n-  if (!CDSConfig::is_dumping_adapters() || AdapterHandlerLibrary::is_abstract_method_adapter(_adapter)) {\n+  if (!CDSConfig::is_dumping_adapters()) {\n@@ -1280,1 +1286,3 @@\n-  if (_adapter == nullptr) {\n+  if (is_abstract()) {\n+    h_method->_from_compiled_entry = SharedRuntime::get_handle_wrong_method_abstract_stub();\n+  } else if (_adapter == nullptr) {\n@@ -1283,0 +1291,1 @@\n+    h_method->_from_compiled_entry = adapter()->get_c2i_entry();\n@@ -1303,0 +1312,1 @@\n+  assert(!mh->is_abstract(), \"abstract methods do not have adapters\");\n@@ -1321,1 +1331,0 @@\n-  mh->_from_compiled_entry = adapter->get_c2i_entry();\n","filename":"src\/hotspot\/share\/oops\/method.cpp","additions":14,"deletions":5,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -409,1 +409,1 @@\n-              entry_point = method->adapter()->get_i2c_entry();\n+              entry_point = method->get_i2c_entry();\n","filename":"src\/hotspot\/share\/runtime\/javaCalls.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2513,1 +2513,0 @@\n-AdapterHandlerEntry* AdapterHandlerLibrary::_abstract_method_handler = nullptr;\n@@ -2549,15 +2548,0 @@\n-void AdapterHandlerLibrary::create_abstract_method_handler() {\n-  assert_lock_strong(AdapterHandlerLibrary_lock);\n-  \/\/ Create a special handler for abstract methods.  Abstract methods\n-  \/\/ are never compiled so an i2c entry is somewhat meaningless, but\n-  \/\/ throw AbstractMethodError just in case.\n-  \/\/ Pass wrong_method_abstract for the c2i transitions to return\n-  \/\/ AbstractMethodError for invalid invocations.\n-  address wrong_method_abstract = SharedRuntime::get_handle_wrong_method_abstract_stub();\n-  _abstract_method_handler = AdapterHandlerLibrary::new_entry(AdapterFingerPrint::allocate(0, nullptr));\n-  _abstract_method_handler->set_entry_points(SharedRuntime::throw_AbstractMethodError_entry(),\n-                                             wrong_method_abstract,\n-                                             wrong_method_abstract,\n-                                             nullptr);\n-}\n-\n@@ -2567,1 +2551,0 @@\n-    MutexLocker mu(AdapterHandlerLibrary_lock);\n@@ -2570,1 +2553,0 @@\n-    create_abstract_method_handler();\n@@ -2630,3 +2612,0 @@\n-  if (method->is_abstract()) {\n-    return _abstract_method_handler;\n-  }\n@@ -2730,0 +2709,1 @@\n+  assert(!method->is_abstract(), \"abstract methods do not have adapters\");\n@@ -3500,7 +3480,0 @@\n-bool AdapterHandlerLibrary::is_abstract_method_adapter(AdapterHandlerEntry* entry) {\n-  if (entry == _abstract_method_handler) {\n-    return true;\n-  }\n-  return false;\n-}\n-\n","filename":"src\/hotspot\/share\/runtime\/sharedRuntime.cpp","additions":1,"deletions":28,"binary":false,"changes":29,"status":"modified"},{"patch":"@@ -786,1 +786,0 @@\n-  static AdapterHandlerEntry* _abstract_method_handler;\n@@ -804,1 +803,0 @@\n-  static void create_abstract_method_handler();\n@@ -834,2 +832,0 @@\n-  static bool is_abstract_method_adapter(AdapterHandlerEntry* adapter);\n-\n","filename":"src\/hotspot\/share\/runtime\/sharedRuntime.hpp","additions":0,"deletions":4,"binary":false,"changes":4,"status":"modified"}]}