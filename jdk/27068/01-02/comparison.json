{"files":[{"patch":"@@ -559,1 +559,2 @@\n-    size_t free_mem_in_os;\n+    \/\/ Use uint64_t instead of size_t for 32bit compatibility.\n+    uint64_t free_mem_in_os;\n@@ -561,5 +562,5 @@\n-      size_t free_in_old_gen_and_os = old_gen->committed().byte_size() - old_gen->used_in_bytes()\n-                                    + free_mem_in_os;\n-      if (promotion_estimate >= free_in_old_gen_and_os) {\n-        log_debug(gc, ergo)(\"Run full-gc; predicted promotion size >= free space in old-gen and OS: %zu >= %zu\",\n-          promotion_estimate, free_in_old_gen_and_os);\n+      size_t actual_free = (size_t)MIN2(old_gen->committed().byte_size() - old_gen->used_in_bytes() + free_mem_in_os,\n+                                        (uint64_t)SIZE_MAX);\n+      if (promotion_estimate > actual_free) {\n+        log_debug(gc, ergo)(\"Run full-gc; predicted promotion size > free space in old-gen and OS: %zu > %zu\",\n+          promotion_estimate, actual_free);\n","filename":"src\/hotspot\/share\/gc\/parallel\/psScavenge.cpp","additions":7,"deletions":6,"binary":false,"changes":13,"status":"modified"}]}