{"files":[{"patch":"@@ -382,2 +382,1 @@\n-                                       full_gc_count,\n-                                       GCCause::_metadata_GC_threshold);\n+                                       full_gc_count);\n","filename":"src\/hotspot\/share\/gc\/shared\/collectedHeap.cpp","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -223,3 +223,2 @@\n-                                                                 uint full_gc_count_before,\n-                                                                 GCCause::Cause gc_cause)\n-    : VM_GC_Collect_Operation(gc_count_before, gc_cause, full_gc_count_before, true),\n+                                                                 uint full_gc_count_before)\n+    : VM_GC_Collect_Operation(gc_count_before, GCCause::_metadata_GC_threshold, full_gc_count_before, true),\n@@ -234,2 +233,5 @@\n-  CollectedHeap* heap = Universe::heap();\n-  GCCauseSetter gccs(heap, _gc_cause);\n+  \/\/ Note: GCCauseSetter is intentionally not used here.\n+  \/\/ The specific GC cause is set directly in downstream calls that initiate\n+  \/\/ collections, allowing us to accurately reflect different situations:\n+  \/\/ - A typical metadata allocation failure triggers a collection.\n+  \/\/ - As a last resort, a collection clears soft references if prior attempts fail.\n@@ -258,0 +260,2 @@\n+  CollectedHeap* heap = Universe::heap();\n+\n@@ -259,1 +263,1 @@\n-  heap->collect_as_vm_thread(GCCause::_metadata_GC_threshold);\n+  heap->collect_as_vm_thread(_gc_cause);\n","filename":"src\/hotspot\/share\/gc\/shared\/gcVMOperations.cpp","additions":10,"deletions":6,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -225,2 +225,1 @@\n-                                  uint full_gc_count_before,\n-                                  GCCause::Cause gc_cause);\n+                                  uint full_gc_count_before);\n","filename":"src\/hotspot\/share\/gc\/shared\/gcVMOperations.hpp","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"}]}