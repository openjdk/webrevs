{"files":[{"patch":"@@ -32,0 +32,1 @@\n+import org.openjdk.jmh.annotations.Param;\n@@ -48,0 +49,4 @@\n+    \/\/ Whether to step iteratively through the list of interfaces, or\n+    \/\/ to select one in an unpredictable way.\n+    @Param({\"false\", \"true\"}) private boolean randomized;\n+\n@@ -244,2 +249,1 @@\n-        FirstInterface ai = as[l];\n-        l = 1 - l;\n+        FirstInterface ai = as[step(2)];\n@@ -251,2 +255,1 @@\n-        FirstInterface ai = as[l];\n-        l = ++ l % 3;\n+        FirstInterface ai = as[step(3)];\n@@ -258,2 +261,1 @@\n-        FirstInterface ai = as[l];\n-        l = ++ l % asLength;\n+        FirstInterface ai = as[step(asLength)];\n@@ -265,2 +267,1 @@\n-        SecondInterface ai = (SecondInterface) as[l];\n-        l = 1 - l;\n+        SecondInterface ai = (SecondInterface) as[step(2)];\n@@ -272,2 +273,1 @@\n-        SecondInterface ai = (SecondInterface) as[l];\n-        l = ++ l % 3;\n+        SecondInterface ai = (SecondInterface) as[step(3)];\n@@ -279,2 +279,1 @@\n-        SecondInterface ai = (SecondInterface) as[l];\n-        l = ++ l % asLength;\n+        SecondInterface ai = (SecondInterface) as[step(asLength)];\n@@ -284,0 +283,16 @@\n+    int step(int range) {\n+        if (randomized) {\n+            l = scramble(l);\n+        } else {\n+            l++;\n+        }\n+        return (l & Integer.MAX_VALUE) % range;\n+    }\n+\n+    static final int scramble(int n) {\n+        int x = n;\n+        x ^= x << 13;\n+        x ^= x >>> 17;\n+        x ^= x << 5;\n+        return x == 0 ? 1 : x;\n+    }\n","filename":"test\/micro\/org\/openjdk\/bench\/vm\/compiler\/InterfaceCalls.java","additions":27,"deletions":12,"binary":false,"changes":39,"status":"modified"}]}