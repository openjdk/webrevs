{"files":[{"patch":"@@ -36,0 +36,1 @@\n+\n@@ -40,0 +41,1 @@\n+\n@@ -48,5 +50,0 @@\n-        test(\"-XX:+UseG1GC\");\n-        test(\"-XX:+UseZGC\");\n-    }\n-\n-    public static void test(String gcArg) throws Exception {\n@@ -54,4 +51,3 @@\n-            \"-agentpath:\" + Utils.TEST_NATIVE_PATH + File.separator + System.mapLibraryName(\"agent8339725\"),\n-            \"-Xmx50m\",\n-            gcArg,\n-            \"Test\");\n+                \"-agentpath:\" + Utils.TEST_NATIVE_PATH + File.separator + System.mapLibraryName(\"agent8339725\"),\n+                \"-Xmx20m\",\n+                \"Test\");\n@@ -59,1 +55,0 @@\n-        System.out.println(output.getOutput());\n","filename":"test\/hotspot\/jtreg\/runtime\/8339725\/Test8339725.java","additions":5,"deletions":10,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -3,0 +3,1 @@\n+ * Copyright (c) 2024, Alibaba Group Holding Limited. All Rights Reserved.\n@@ -24,3 +25,0 @@\n-#include <stdio.h>\n-#include <stdlib.h>\n-#include <string.h>\n@@ -30,0 +28,3 @@\n+#include <stdio.h>\n+#include <stdlib.h>\n+#include <string.h>\n@@ -35,2 +36,1 @@\n-static size_t ring_buffer[BUFFER_SIZE] = {0};\n-static volatile int ring_buffer_idx = 0;\n+static jmethodID ring_buffer[BUFFER_SIZE] = {0};\n@@ -52,3 +52,3 @@\n-    size_t id = ring_buffer[rand() % BUFFER_SIZE];\n-    if (id > 0) {\n-      get_method_details((jmethodID)id);\n+    jmethodID id = ring_buffer[rand() % BUFFER_SIZE];\n+    if (id != (jmethodID)0) {\n+      get_method_details(id);\n@@ -65,0 +65,1 @@\n+  static int ring_buffer_idx = 0;\n@@ -86,1 +87,1 @@\n-    ring_buffer[ring_buffer_idx++] = (size_t)methods[0];\n+    ring_buffer[ring_buffer_idx++] = methods[0];\n","filename":"test\/hotspot\/jtreg\/runtime\/8339725\/libagent8339725.cpp","additions":10,"deletions":9,"binary":false,"changes":19,"status":"modified"}]}