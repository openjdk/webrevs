{"files":[{"patch":"@@ -25,0 +25,2 @@\n+#include <atomic>\n+\n@@ -36,1 +38,1 @@\n-static jmethodID ring_buffer[BUFFER_SIZE] = {0};\n+static std::atomic<jmethodID> ring_buffer[BUFFER_SIZE];\n@@ -52,1 +54,1 @@\n-    jmethodID id = ring_buffer[rand() % BUFFER_SIZE];\n+    jmethodID id = ring_buffer[rand() % BUFFER_SIZE].load(std::memory_order_relaxed);\n@@ -87,1 +89,1 @@\n-    ring_buffer[ring_buffer_idx++] = methods[0];\n+    ring_buffer[ring_buffer_idx++].store(methods[0], std::memory_order_relaxed);\n@@ -94,0 +96,4 @@\n+  for (int i = 0; i < BUFFER_SIZE; i++) {\n+    ring_buffer[i].store(0, std::memory_order_relaxed);\n+  }\n+\n","filename":"test\/hotspot\/jtreg\/runtime\/8339725\/libagent8339725.cpp","additions":9,"deletions":3,"binary":false,"changes":12,"status":"modified"}]}