{"files":[{"patch":"@@ -111,0 +111,8 @@\n+    \/**\n+     * Delegate waitFor to the OutputBuffer. This ensures that\n+     * the progress and timestamps are logged correctly.\n+     *\/\n+    public void waitFor() {\n+        buffer.waitFor();\n+    }\n+\n","filename":"test\/lib\/jdk\/test\/lib\/process\/OutputAnalyzer.java","additions":8,"deletions":0,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -47,0 +47,6 @@\n+  \/**\n+   * Waits for a process to finish, if there is one assocated with\n+   * this OutputBuffer.\n+   *\/\n+  public void waitFor();\n+\n@@ -70,0 +76,7 @@\n+\n+\n+  \/**\n+   * Returns the exit value\n+   *\n+   * @return exit value\n+   *\/\n@@ -139,11 +152,1 @@\n-    public String getStdout() {\n-      return outTask.get();\n-    }\n-\n-    @Override\n-    public String getStderr() {\n-      return errTask.get();\n-    }\n-\n-    @Override\n-    public int getExitValue() {\n+    public void waitFor() {\n@@ -151,1 +154,2 @@\n-        return exitValue;\n+        \/\/ Already waited for this process\n+        return;\n@@ -153,0 +157,1 @@\n+\n@@ -160,1 +165,0 @@\n-              return exitValue;\n@@ -172,0 +176,16 @@\n+    @Override\n+    public String getStdout() {\n+      return outTask.get();\n+    }\n+\n+    @Override\n+    public String getStderr() {\n+      return errTask.get();\n+    }\n+\n+    @Override\n+    public int getExitValue() {\n+      waitFor();\n+      return exitValue;\n+    }\n+\n@@ -189,0 +209,5 @@\n+    @Override\n+    public void waitFor() {\n+      \/\/ Nothing to do since this buffer is not associated with a Process.\n+    }\n+\n","filename":"test\/lib\/jdk\/test\/lib\/process\/OutputBuffer.java","additions":38,"deletions":13,"binary":false,"changes":51,"status":"modified"},{"patch":"@@ -700,1 +700,4 @@\n-            p.waitFor();\n+\n+            \/\/ Wait for the process to finish. Call through the output\n+            \/\/ analyzer to get correct logging and timestamps.\n+            output.waitFor();\n","filename":"test\/lib\/jdk\/test\/lib\/process\/ProcessTools.java","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"}]}