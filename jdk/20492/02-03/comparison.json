{"files":[{"patch":"@@ -213,2 +213,1 @@\n-  ShenandoahHeapRegion* obj_reg = heap->heap_region_containing(obj);\n-  if (!heap->is_full_gc_move_in_progress() && !obj_reg->is_active()) {\n+  if (!heap->is_in(obj)) {\n@@ -216,1 +215,1 @@\n-                  \"Object should be in active region\",\n+                  \"Object should be in active region area\",\n@@ -245,9 +244,6 @@\n-    ShenandoahHeapRegion* fwd_reg = heap->heap_region_containing(fwd);\n-\n-    \/\/ Step 3. Check that forwardee points to correct region, unless we are in Full GC.\n-    if (!heap->is_full_gc_move_in_progress()) {\n-      if (!fwd_reg->is_active()) {\n-        print_failure(_safe_oop, obj, interior_loc, nullptr, \"Shenandoah assert_correct failed\",\n-                      \"Forwardee should be in active region\",\n-                      file, line);\n-      }\n+    \/\/ Step 3. Check that forwardee points to correct region\n+    if (!heap->is_in(fwd)) {\n+      print_failure(_safe_oop, obj, interior_loc, nullptr, \"Shenandoah assert_correct failed\",\n+                    \"Forwardee should be in active region area\",\n+                    file, line);\n+    }\n@@ -255,5 +251,4 @@\n-      if (fwd_reg == obj_reg) {\n-        print_failure(_safe_all, obj, interior_loc, nullptr, \"Shenandoah assert_correct failed\",\n-                      \"Non-trivial forwardee should be in another region\",\n-                      file, line);\n-      }\n+    if (heap->heap_region_index_containing(fwd) == heap->heap_region_index_containing(obj)) {\n+      print_failure(_safe_all, obj, interior_loc, nullptr, \"Shenandoah assert_correct failed\",\n+                    \"Non-trivial forwardee should be in another region\",\n+                    file, line);\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahAsserts.cpp","additions":12,"deletions":17,"binary":false,"changes":29,"status":"modified"}]}