{"files":[{"patch":"@@ -277,1 +277,0 @@\n-  bool reference_barrier_success = true;\n@@ -281,0 +280,3 @@\n+  if (_pre_barrier_c1_runtime_code_blob == nullptr) {\n+    return false;\n+  }\n@@ -284,2 +286,5 @@\n-                                                                  \"shenandoah_load_reference_barrier_strong_slow\",\n-                                                                  false, &lrb_strong_code_gen_cl);\n+                                                                          \"shenandoah_load_reference_barrier_strong_slow\",\n+                                                                          false, &lrb_strong_code_gen_cl);\n+    if (_load_reference_barrier_strong_rt_code_blob == nullptr) {\n+      return false;\n+    }\n@@ -289,2 +294,5 @@\n-                                                                          \"shenandoah_load_reference_barrier_strong_native_slow\",\n-                                                                          false, &lrb_strong_native_code_gen_cl);\n+                                                                                 \"shenandoah_load_reference_barrier_strong_native_slow\",\n+                                                                                 false, &lrb_strong_native_code_gen_cl);\n+    if (_load_reference_barrier_strong_native_rt_code_blob == nullptr) {\n+      return false;\n+    }\n@@ -294,2 +302,5 @@\n-                                                                          \"shenandoah_load_reference_barrier_weak_slow\",\n-                                                                          false, &lrb_weak_code_gen_cl);\n+                                                                        \"shenandoah_load_reference_barrier_weak_slow\",\n+                                                                        false, &lrb_weak_code_gen_cl);\n+    if (_load_reference_barrier_weak_rt_code_blob == nullptr) {\n+      return false;\n+    }\n@@ -301,4 +312,1 @@\n-    reference_barrier_success = _load_reference_barrier_strong_rt_code_blob != nullptr &&\n-                                _load_reference_barrier_strong_native_rt_code_blob != nullptr &&\n-                                _load_reference_barrier_weak_rt_code_blob != nullptr &&\n-                                _load_reference_barrier_phantom_rt_code_blob != nullptr;\n+    return (_load_reference_barrier_phantom_rt_code_blob != nullptr);\n@@ -306,1 +314,1 @@\n-  return _pre_barrier_c1_runtime_code_blob != nullptr && reference_barrier_success;\n+  return true;\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/c1\/shenandoahBarrierSetC1.cpp","additions":20,"deletions":12,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -535,1 +535,4 @@\n-    generate_c1_load_runtime_stub(blob, ON_STRONG_OOP_REF, \"load_barrier_on_oop_field_preloaded_runtime_stub\");\n+      generate_c1_load_runtime_stub(blob, ON_STRONG_OOP_REF, \"load_barrier_on_oop_field_preloaded_runtime_stub\");\n+  if (_load_barrier_on_oop_field_preloaded_runtime_stub == nullptr) {\n+    return false;\n+  }\n@@ -537,1 +540,4 @@\n-    generate_c1_load_runtime_stub(blob, ON_WEAK_OOP_REF, \"load_barrier_on_weak_oop_field_preloaded_runtime_stub\");\n+      generate_c1_load_runtime_stub(blob, ON_WEAK_OOP_REF, \"load_barrier_on_weak_oop_field_preloaded_runtime_stub\");\n+  if (_load_barrier_on_weak_oop_field_preloaded_runtime_stub == nullptr) {\n+    return false;\n+  }\n@@ -540,1 +546,4 @@\n-    generate_c1_store_runtime_stub(blob, true \/* self_healing *\/, \"store_barrier_on_oop_field_with_healing\");\n+      generate_c1_store_runtime_stub(blob, true \/* self_healing *\/, \"store_barrier_on_oop_field_with_healing\");\n+  if (_store_barrier_on_oop_field_with_healing == nullptr) {\n+    return false;\n+  }\n@@ -542,5 +551,2 @@\n-    generate_c1_store_runtime_stub(blob, false \/* self_healing *\/, \"store_barrier_on_oop_field_without_healing\");\n-  return _load_barrier_on_oop_field_preloaded_runtime_stub != nullptr &&\n-         _load_barrier_on_weak_oop_field_preloaded_runtime_stub != nullptr &&\n-         _store_barrier_on_oop_field_with_healing != nullptr &&\n-         _store_barrier_on_oop_field_without_healing != nullptr;\n+      generate_c1_store_runtime_stub(blob, false \/* self_healing *\/, \"store_barrier_on_oop_field_without_healing\");\n+  return _store_barrier_on_oop_field_without_healing != nullptr;\n","filename":"src\/hotspot\/share\/gc\/z\/c1\/zBarrierSetC1.cpp","additions":14,"deletions":8,"binary":false,"changes":22,"status":"modified"}]}