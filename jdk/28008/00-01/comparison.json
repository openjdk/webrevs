{"files":[{"patch":"@@ -2430,5 +2430,1 @@\n-    \/\/ Free memory if this is the last nmethod referencing immutable data\n-    if (reference_count == 1) {\n-      \/\/ Updating the counter here is not necessary since the memory is\n-      \/\/ being freed so only do it for debug builds to eliminate a write\n-      DEBUG_ONLY(set_immutable_data_references_counter(reference_count - 1);)\n+    set_immutable_data_references_counter(reference_count - 1);\n@@ -2436,0 +2432,3 @@\n+    \/\/ Free memory if this was the last nmethod referencing immutable data\n+    reference_count = get_immutable_data_references_counter();\n+    if (reference_count == 0) {\n@@ -2437,2 +2436,0 @@\n-    } else {\n-      set_immutable_data_references_counter(reference_count - 1);\n","filename":"src\/hotspot\/share\/code\/nmethod.cpp","additions":4,"deletions":7,"binary":false,"changes":11,"status":"modified"}]}