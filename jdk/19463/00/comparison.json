{"files":[{"patch":"@@ -3487,1 +3487,1 @@\n-  if (RewriteBytecodes && !UseSharedSpaces && !CDSConfig::is_dumping_static_archive()) {\n+  if (RewriteBytecodes && !CDSConfig::is_using_archive() && !CDSConfig::is_dumping_static_archive()) {\n","filename":"src\/hotspot\/cpu\/ppc\/templateTable_ppc_64.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+#include \"cds\/cdsConfig.hpp\"\n@@ -115,1 +116,1 @@\n-  if (siginfo && UseSharedSpaces) {\n+  if (siginfo && CDSConfig::is_using_archive()) {\n","filename":"src\/hotspot\/os\/posix\/vmError_posix.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+#include \"cds\/cdsConfig.hpp\"\n@@ -47,1 +48,1 @@\n-  if (siginfo && UseSharedSpaces) {\n+  if (siginfo && CDSConfig::is_using_archive()) {\n","filename":"src\/hotspot\/os\/windows\/vmError_windows.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -70,1 +70,1 @@\n-  if (is_dumping_static_archive() || UseSharedSpaces) {\n+  if (is_dumping_static_archive() || is_using_archive()) {\n@@ -308,1 +308,1 @@\n-  assert(UseSharedSpaces, \"this function is only used with -Xshare:{on,auto}\");\n+  assert(CDSConfig::is_using_archive(), \"this function is only used with -Xshare:{on,auto}\");\n@@ -373,1 +373,1 @@\n-  if (UseSharedSpaces && patch_mod_javabase) {\n+  if (is_using_archive() && patch_mod_javabase) {\n@@ -376,1 +376,1 @@\n-  if (UseSharedSpaces && has_unsupported_runtime_module_options()) {\n+  if (is_using_archive() && has_unsupported_runtime_module_options()) {\n@@ -392,1 +392,1 @@\n-  return UseSharedSpaces; \/\/ TODO: UseSharedSpaces will be eventually replaced by CDSConfig::is_using_archive()\n+  return UseSharedSpaces;\n@@ -420,1 +420,1 @@\n-  if (UseSharedSpaces && ArchiveHeapLoader::can_use()) {\n+  if (is_using_archive() && ArchiveHeapLoader::can_use()) {\n","filename":"src\/hotspot\/share\/cds\/cdsConfig.cpp","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -473,1 +473,1 @@\n-  if (CDSConfig::is_dumping_dynamic_archive() && !UseSharedSpaces) {\n+  if (CDSConfig::is_dumping_dynamic_archive() && !CDSConfig::is_using_archive()) {\n@@ -525,1 +525,1 @@\n-  assert(UseSharedSpaces && RecordDynamicDumpInfo, \"already checked in arguments.cpp\");\n+  assert(CDSConfig::is_using_archive() && RecordDynamicDumpInfo, \"already checked in arguments.cpp\");\n","filename":"src\/hotspot\/share\/cds\/dynamicArchive.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -374,1 +374,1 @@\n-  if (UseSharedSpaces && is_modules_image()) {\n+  if (CDSConfig::is_using_archive() && is_modules_image()) {\n@@ -386,1 +386,1 @@\n-  assert(UseSharedSpaces, \"runtime only\");\n+  assert(CDSConfig::is_using_archive(), \"runtime only\");\n@@ -938,1 +938,1 @@\n-  assert(UseSharedSpaces, \"runtime only\");\n+  assert(CDSConfig::is_using_archive(), \"runtime only\");\n@@ -984,1 +984,1 @@\n-          assert(!UseSharedSpaces, \"UseSharedSpaces should be disabled\");\n+          assert(!CDSConfig::is_using_archive(), \"UseSharedSpaces should be disabled\");\n@@ -993,1 +993,1 @@\n-          assert(!UseSharedSpaces, \"UseSharedSpaces should be disabled\");\n+          assert(!CDSConfig::is_using_archive(), \"UseSharedSpaces should be disabled\");\n@@ -1041,1 +1041,1 @@\n-  assert(UseSharedSpaces, \"runtime only\");\n+  assert(CDSConfig::is_using_archive(), \"runtime only\");\n@@ -2090,1 +2090,1 @@\n-  assert(UseSharedSpaces, \"runtime only\");\n+  assert(CDSConfig::is_using_archive(), \"runtime only\");\n@@ -2102,1 +2102,1 @@\n-  assert(UseSharedSpaces, \"runtime only\");\n+  assert(CDSConfig::is_using_archive(), \"runtime only\");\n@@ -2230,1 +2230,1 @@\n-  assert(UseSharedSpaces, \"runtime only\");\n+  assert(CDSConfig::is_using_archive(), \"runtime only\");\n@@ -2319,1 +2319,1 @@\n-  assert(UseSharedSpaces, \"UseSharedSpaces expected.\");\n+  assert(CDSConfig::is_using_archive(), \"UseSharedSpaces expected.\");\n","filename":"src\/hotspot\/share\/cds\/filemap.cpp","additions":10,"deletions":10,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -234,1 +234,1 @@\n-    assert(UseSharedSpaces, \"must be\");\n+    assert(CDSConfig::is_using_archive(), \"must be\");\n@@ -245,1 +245,1 @@\n-  assert(!CDSConfig::is_dumping_heap() && UseSharedSpaces, \"runtime only\");\n+  assert(!CDSConfig::is_dumping_heap() && CDSConfig::is_using_archive(), \"runtime only\");\n@@ -256,1 +256,1 @@\n-  assert(UseSharedSpaces, \"must be\");\n+  assert(CDSConfig::is_using_archive(), \"must be\");\n@@ -909,1 +909,1 @@\n-  assert(UseSharedSpaces, \"runtime only!\");\n+  assert(CDSConfig::is_using_archive(), \"runtime only!\");\n","filename":"src\/hotspot\/share\/cds\/heapShared.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -290,1 +290,1 @@\n-  if (UseSharedSpaces) {\n+  if (CDSConfig::is_using_archive()) {\n@@ -927,1 +927,1 @@\n-  assert(UseSharedSpaces, \"Must be called when UseSharedSpaces is enabled\");\n+  assert(CDSConfig::is_using_archive(), \"Must be called when UseSharedSpaces is enabled\");\n@@ -1407,1 +1407,1 @@\n-  assert(UseSharedSpaces, \"must be runtime\");\n+  assert(CDSConfig::is_using_archive(), \"must be runtime\");\n@@ -1437,1 +1437,1 @@\n-  assert(UseSharedSpaces, \"must be runtime\");\n+  assert(CDSConfig::is_using_archive(), \"must be runtime\");\n@@ -1535,1 +1535,1 @@\n-  if (UseSharedSpaces) {\n+  if (CDSConfig::is_using_archive()) {\n@@ -1553,1 +1553,1 @@\n-  if (UseSharedSpaces) {\n+  if (CDSConfig::is_using_archive()) {\n","filename":"src\/hotspot\/share\/cds\/metaspaceShared.cpp","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -1486,1 +1486,1 @@\n-    assert(!UseSharedSpaces, \"UsedSharedSpaces not supported with exploded module builds\");\n+    assert(!CDSConfig::is_using_archive(), \"UsedSharedSpaces not supported with exploded module builds\");\n","filename":"src\/hotspot\/share\/classfile\/classLoader.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -105,1 +105,1 @@\n-  assert(UseSharedSpaces, \"must be\");\n+  assert(CDSConfig::is_using_archive(), \"must be\");\n@@ -123,1 +123,1 @@\n-  assert(UseSharedSpaces, \"must be\");\n+  assert(CDSConfig::is_using_archive(), \"must be\");\n","filename":"src\/hotspot\/share\/classfile\/classLoaderDataShared.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -63,1 +63,1 @@\n-  if (UseSharedSpaces) {\n+  if (CDSConfig::is_using_archive()) {\n","filename":"src\/hotspot\/share\/classfile\/classLoaderExt.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -5331,1 +5331,1 @@\n-  if (UseSharedSpaces) {\n+  if (CDSConfig::is_using_archive()) {\n","filename":"src\/hotspot\/share\/classfile\/javaClasses.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -64,1 +64,1 @@\n-    CDS_ONLY(if (UseSharedSpaces) {\n+    CDS_ONLY(if (CDSConfig::is_using_archive()) {\n@@ -516,1 +516,1 @@\n-  assert(UseSharedSpaces, \"runtime only\");\n+  assert(CDSConfig::is_using_archive(), \"runtime only\");\n@@ -523,1 +523,1 @@\n-  assert(UseSharedSpaces, \"runtime only\");\n+  assert(CDSConfig::is_using_archive(), \"runtime only\");\n@@ -544,1 +544,1 @@\n-  assert(UseSharedSpaces, \"runtime only\");\n+  assert(CDSConfig::is_using_archive(), \"runtime only\");\n@@ -589,1 +589,1 @@\n-  assert(UseSharedSpaces, \"runtime only\");\n+  assert(CDSConfig::is_using_archive(), \"runtime only\");\n@@ -599,1 +599,1 @@\n-  assert(UseSharedSpaces, \"runtime only\");\n+  assert(CDSConfig::is_using_archive(), \"runtime only\");\n","filename":"src\/hotspot\/share\/classfile\/moduleEntry.cpp","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -28,0 +28,1 @@\n+#include \"cds\/cdsConfig.hpp\"\n@@ -319,1 +320,1 @@\n-  assert(UseSharedSpaces, \"runtime only\");\n+  assert(CDSConfig::is_using_archive(), \"runtime only\");\n","filename":"src\/hotspot\/share\/classfile\/packageEntry.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -142,1 +142,1 @@\n-    assert(UseSharedSpaces, \"must be\");\n+    assert(CDSConfig::is_using_archive(), \"must be\");\n@@ -155,1 +155,1 @@\n-    assert(UseSharedSpaces, \"must be\");\n+    assert(CDSConfig::is_using_archive(), \"must be\");\n@@ -1265,1 +1265,1 @@\n-    if (UseSharedSpaces)\n+    if (CDSConfig::is_using_archive())\n@@ -1620,1 +1620,1 @@\n-  if (UseSharedSpaces) {\n+  if (CDSConfig::is_using_archive()) {\n","filename":"src\/hotspot\/share\/classfile\/systemDictionary.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -88,1 +88,1 @@\n-  assert(UseSharedSpaces, \"must be\");\n+  assert(CDSConfig::is_using_archive(), \"must be\");\n@@ -110,1 +110,1 @@\n-  if (!UseSharedSpaces) {\n+  if (!CDSConfig::is_using_archive()) {\n@@ -392,1 +392,1 @@\n-  if (UseSharedSpaces) {\n+  if (CDSConfig::is_using_archive()) {\n@@ -844,1 +844,1 @@\n-  assert(!CDSConfig::is_dumping_static_archive() && UseSharedSpaces, \"called at run time with CDS enabled only\");\n+  assert(!CDSConfig::is_dumping_static_archive() && CDSConfig::is_using_archive(), \"called at run time with CDS enabled only\");\n@@ -895,1 +895,1 @@\n-  assert(!CDSConfig::is_dumping_static_archive() && UseSharedSpaces, \"called at run time with CDS enabled only\");\n+  assert(!CDSConfig::is_dumping_static_archive() && CDSConfig::is_using_archive(), \"called at run time with CDS enabled only\");\n@@ -1005,1 +1005,1 @@\n-  assert(!CDSConfig::is_dumping_static_archive() && UseSharedSpaces, \"called at run time with CDS enabled only\");\n+  assert(!CDSConfig::is_dumping_static_archive() && CDSConfig::is_using_archive(), \"called at run time with CDS enabled only\");\n@@ -1293,1 +1293,1 @@\n-  if (!UseSharedSpaces || !name->is_shared()) {\n+  if (!CDSConfig::is_using_archive() || !name->is_shared()) {\n@@ -1430,1 +1430,1 @@\n-  if (UseSharedSpaces) {\n+  if (CDSConfig::is_using_archive()) {\n@@ -1447,1 +1447,1 @@\n-  if (UseSharedSpaces) {\n+  if (CDSConfig::is_using_archive()) {\n","filename":"src\/hotspot\/share\/classfile\/systemDictionaryShared.cpp","additions":9,"deletions":9,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+#include \"cds\/cdsConfig.hpp\"\n@@ -89,1 +90,1 @@\n-  if (UseSharedSpaces && !JvmtiExport::should_post_class_prepare()) {\n+  if (CDSConfig::is_using_archive() && !JvmtiExport::should_post_class_prepare()) {\n@@ -131,1 +132,1 @@\n-  if (UseSharedSpaces) {\n+  if (CDSConfig::is_using_archive()) {\n@@ -170,1 +171,1 @@\n-  if (UseSharedSpaces) {\n+  if (CDSConfig::is_using_archive()) {\n@@ -211,1 +212,1 @@\n-  if (UseSharedSpaces) {\n+  if (CDSConfig::is_using_archive()) {\n","filename":"src\/hotspot\/share\/classfile\/vmClasses.cpp","additions":5,"deletions":4,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+#include \"cds\/cdsConfig.hpp\"\n@@ -84,1 +85,1 @@\n-  if (!UseSharedSpaces) {\n+  if (!CDSConfig::is_using_archive()) {\n","filename":"src\/hotspot\/share\/classfile\/vmSymbols.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2446,1 +2446,1 @@\n-              if (REWRITE_BYTECODES && !UseSharedSpaces && !CDSConfig::is_dumping_archive()) {\n+              if (REWRITE_BYTECODES && !CDSConfig::is_using_archive() && !CDSConfig::is_dumping_archive()) {\n","filename":"src\/hotspot\/share\/interpreter\/zero\/bytecodeInterpreter.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -694,1 +694,1 @@\n-    assert(!UseSharedSpaces, \"sanity\");\n+    assert(!CDSConfig::is_using_archive(), \"sanity\");\n@@ -710,1 +710,1 @@\n-  if (UseSharedSpaces) {\n+  if (CDSConfig::is_using_archive()) {\n@@ -723,1 +723,1 @@\n-    assert(!UseSharedSpaces, \"CDS archive is not mapped at this point\");\n+    assert(!CDSConfig::is_using_archive(), \"CDS archive is not mapped at this point\");\n","filename":"src\/hotspot\/share\/memory\/metaspace.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -119,1 +119,1 @@\n-  out->print_cr(\"CDS: %s\", (UseSharedSpaces ? \"on\" : (CDSConfig::is_dumping_static_archive() ? \"dump\" : \"off\")));\n+  out->print_cr(\"CDS: %s\", (CDSConfig::is_using_archive() ? \"on\" : (CDSConfig::is_dumping_static_archive() ? \"dump\" : \"off\")));\n","filename":"src\/hotspot\/share\/memory\/metaspace\/metaspaceReporter.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -364,1 +364,1 @@\n-  if (UseSharedSpaces) {\n+  if (CDSConfig::is_using_archive()) {\n@@ -397,1 +397,1 @@\n-    if (!UseSharedSpaces) {\n+    if (!CDSConfig::is_using_archive()) {\n@@ -428,1 +428,1 @@\n-    if (UseSharedSpaces) {\n+    if (CDSConfig::is_using_archive()) {\n@@ -530,1 +530,1 @@\n-    if (UseSharedSpaces &&\n+    if (CDSConfig::is_using_archive() &&\n@@ -568,1 +568,1 @@\n-  if (!UseSharedSpaces) {\n+  if (!CDSConfig::is_using_archive()) {\n@@ -880,1 +880,1 @@\n-  if (UseSharedSpaces) {\n+  if (CDSConfig::is_using_archive()) {\n@@ -1065,1 +1065,1 @@\n-  if (!UseSharedSpaces) {\n+  if (!CDSConfig::is_using_archive()) {\n","filename":"src\/hotspot\/share\/memory\/universe.cpp","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -46,1 +46,1 @@\n-  assert(CDSConfig::is_dumping_static_archive() || UseSharedSpaces, \"only for CDS\");\n+  assert(CDSConfig::is_dumping_static_archive() || CDSConfig::is_using_archive(), \"only for CDS\");\n","filename":"src\/hotspot\/share\/oops\/arrayKlass.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -108,1 +108,1 @@\n-  assert(CDSConfig::is_dumping_static_archive() || UseSharedSpaces, \"only for CDS\");\n+  assert(CDSConfig::is_dumping_static_archive() || CDSConfig::is_using_archive(), \"only for CDS\");\n","filename":"src\/hotspot\/share\/oops\/constantPool.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -30,1 +30,1 @@\n-  assert(CDSConfig::is_dumping_static_archive() || UseSharedSpaces, \"only for CDS\");\n+  assert(CDSConfig::is_dumping_static_archive() || CDSConfig::is_using_archive(), \"only for CDS\");\n","filename":"src\/hotspot\/share\/oops\/instanceClassLoaderKlass.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -505,1 +505,1 @@\n-  assert(CDSConfig::is_dumping_static_archive() || UseSharedSpaces, \"only for CDS\");\n+  assert(CDSConfig::is_dumping_static_archive() || CDSConfig::is_using_archive(), \"only for CDS\");\n@@ -4039,1 +4039,1 @@\n-        ((UseSharedSpaces || CDSConfig::is_dumping_archive()) && length != 0)) {\n+        ((CDSConfig::is_using_archive() || CDSConfig::is_dumping_archive()) && length != 0)) {\n","filename":"src\/hotspot\/share\/oops\/instanceKlass.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -44,1 +44,1 @@\n-  assert(CDSConfig::is_dumping_static_archive() || UseSharedSpaces, \"only for CDS\");\n+  assert(CDSConfig::is_dumping_static_archive() || CDSConfig::is_using_archive(), \"only for CDS\");\n","filename":"src\/hotspot\/share\/oops\/instanceMirrorKlass.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -35,1 +35,1 @@\n-  assert(CDSConfig::is_dumping_static_archive() || UseSharedSpaces, \"only for CDS\");\n+  assert(CDSConfig::is_dumping_static_archive() || CDSConfig::is_using_archive(), \"only for CDS\");\n@@ -102,1 +102,1 @@\n-  if (UseSharedSpaces) {\n+  if (CDSConfig::is_using_archive()) {\n","filename":"src\/hotspot\/share\/oops\/instanceRefKlass.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -56,1 +56,1 @@\n-  assert(CDSConfig::is_dumping_static_archive() || UseSharedSpaces, \"only for CDS\");\n+  assert(CDSConfig::is_dumping_static_archive() || CDSConfig::is_using_archive(), \"only for CDS\");\n","filename":"src\/hotspot\/share\/oops\/instanceStackChunkKlass.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -255,1 +255,1 @@\n-  assert(CDSConfig::is_dumping_static_archive() || UseSharedSpaces, \"only for cds\");\n+  assert(CDSConfig::is_dumping_static_archive() || CDSConfig::is_using_archive(), \"only for cds\");\n","filename":"src\/hotspot\/share\/oops\/klass.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+#include \"cds\/cdsConfig.hpp\"\n@@ -248,1 +249,1 @@\n-  if (UseSharedSpaces) {\n+  if (CDSConfig::is_using_archive()) {\n","filename":"src\/hotspot\/share\/prims\/jvmtiRedefineClasses.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2062,1 +2062,1 @@\n-  return UseSharedSpaces;\n+  return CDSConfig::is_using_archive();\n","filename":"src\/hotspot\/share\/prims\/whitebox.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+#include \"cds\/cdsConfig.hpp\"\n@@ -139,1 +140,1 @@\n-      return UseSharedSpaces ? \"interpreted mode, sharing\" : \"interpreted mode\";\n+      return CDSConfig::is_using_archive() ? \"interpreted mode, sharing\" : \"interpreted mode\";\n@@ -141,1 +142,1 @@\n-      if (UseSharedSpaces) {\n+      if (CDSConfig::is_using_archive()) {\n@@ -156,1 +157,1 @@\n-         return UseSharedSpaces ? \"compiled mode, emulated-client, sharing\" : \"compiled mode, emulated-client\";\n+         return CDSConfig::is_using_archive() ? \"compiled mode, emulated-client, sharing\" : \"compiled mode, emulated-client\";\n@@ -158,1 +159,1 @@\n-      return UseSharedSpaces ? \"compiled mode, sharing\" : \"compiled mode\";\n+      return CDSConfig::is_using_archive() ? \"compiled mode, sharing\" : \"compiled mode\";\n","filename":"src\/hotspot\/share\/runtime\/abstract_vm_version.cpp","additions":5,"deletions":4,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -3621,1 +3621,1 @@\n-  if ((UseSharedSpaces && xshare_auto_cmd_line) ||\n+  if ((CDSConfig::is_using_archive() && xshare_auto_cmd_line) ||\n","filename":"src\/hotspot\/share\/runtime\/arguments.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+#include \"cds\/cdsConfig.hpp\"\n@@ -1026,1 +1027,1 @@\n-    if (!UseSharedSpaces) {\n+    if (!CDSConfig::is_using_archive()) {\n","filename":"src\/hotspot\/share\/services\/diagnosticCommand.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"}]}