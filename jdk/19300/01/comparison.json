{"files":[{"patch":"@@ -536,1 +536,1 @@\n-  ContainerPtr volatile* bucket_entry = howl->get_container_addr(bucket);\n+  ContainerPtr volatile* bucket_entry = howl->container_addr(bucket);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CardSet.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -241,2 +241,3 @@\n-  ContainerPtr _buckets[2];\n-  \/\/ Do not add class member variables beyond this point\n+  \/\/ VLA implementation.\n+  ContainerPtr _buckets[1];\n+  \/\/ Do not add class member variables beyond this point.\n@@ -249,0 +250,4 @@\n+  ContainerPtr at(EntryCountType index);\n+\n+  ContainerPtr const* buckets() const;\n+\n@@ -252,3 +257,1 @@\n-  ContainerPtr* get_container_addr(EntryCountType index) {\n-    return &_buckets[index];\n-  }\n+  ContainerPtr const* container_addr(EntryCountType index) const;\n@@ -256,1 +259,1 @@\n-  bool contains(uint card_idx, G1CardSetConfiguration* config);\n+  ContainerPtr* container_addr(EntryCountType index);\n@@ -258,0 +261,1 @@\n+  bool contains(uint card_idx, G1CardSetConfiguration* config);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CardSetContainers.hpp","additions":10,"deletions":6,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -260,0 +260,18 @@\n+inline G1CardSetHowl::ContainerPtr const* G1CardSetHowl::container_addr(EntryCountType index) const {\n+  assert(index < _num_entries, \"precondition\");\n+  return buckets() + index;\n+}\n+\n+inline G1CardSetHowl::ContainerPtr* G1CardSetHowl::container_addr(EntryCountType index) {\n+  return const_cast<ContainerPtr*>(const_cast<const G1CardSetHowl*>(this)->container_addr(index));\n+}\n+\n+inline G1CardSetHowl::ContainerPtr G1CardSetHowl::at(EntryCountType index) {\n+  return *container_addr(index);\n+}\n+\n+inline G1CardSetHowl::ContainerPtr const* G1CardSetHowl::buckets() const {\n+  const void* ptr = reinterpret_cast<const char*>(this) + header_size_in_bytes();\n+  return reinterpret_cast<ContainerPtr const*>(ptr);\n+}\n+\n@@ -266,1 +284,1 @@\n-    _buckets[i] = G1CardSetInlinePtr();\n+    *container_addr(i) = G1CardSetInlinePtr();\n@@ -268,1 +286,1 @@\n-      G1CardSetInlinePtr value(&_buckets[i], _buckets[i]);\n+      G1CardSetInlinePtr value(container_addr(i), at(i));\n@@ -276,1 +294,1 @@\n-  ContainerPtr* array_entry = get_container_addr(bucket);\n+  ContainerPtr* array_entry = container_addr(bucket);\n@@ -302,1 +320,1 @@\n-    iterate_cardset(_buckets[i], i, found, config);\n+    iterate_cardset(at(i), i, found, config);\n@@ -309,1 +327,1 @@\n-    found(&_buckets[i]);\n+    found(container_addr(i));\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CardSetContainers.inline.hpp","additions":23,"deletions":5,"binary":false,"changes":28,"status":"modified"}]}