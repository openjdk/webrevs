{"files":[{"patch":"@@ -508,1 +508,1 @@\n-        return TreeInfo.getStartPos(this);\n+        return noNoPos(TreeInfo.getStartPos(this));\n@@ -518,1 +518,8 @@\n-        return TreeInfo.getEndPos(this, endPosTable);\n+        return noNoPos(TreeInfo.getEndPos(this, endPosTable));\n+    }\n+\n+    private int noNoPos(int position) {\n+        if (position == JCDiagnostic.NOPOS) {\n+            return pos;\n+        }\n+        return position;\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/tree\/JCTree.java","additions":9,"deletions":2,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -189,0 +189,28 @@\n+    @Test\n+    public void testGetEndPositionSyntheticTree() throws Exception {\n+        Path base = Paths.get(\".\");\n+        Path src = base.resolve(\"src\");\n+        String testCode = \"\"\"\n+                          package test;\n+                          public class Test extends Base {\n+                          }\n+                          class Base {\n+                              Base(int i) {}\n+                          }\n+                          \"\"\";\n+\n+        tb.writeJavaFiles(src, testCode);\n+\n+        try (var fm = compiler.getStandardFileManager(null, null, null)) {\n+            compiler.getTask(\n+                null,\n+                null,\n+                d -> assertEquals(\"\",\n+                                  testCode.substring((int) d.getStartPosition(),\n+                                                     (int) d.getEndPosition())),\n+                List.of(\"-sourcepath\", src.toString(), \"-Xlint:divzero\"),\n+                null,\n+                fm.getJavaFileObjects(src.resolve(\"test\").resolve(\"Test.java\"))\n+            ).call();\n+        }\n+    }\n","filename":"test\/langtools\/tools\/javac\/diags\/DiagnosticGetEndPosition.java","additions":28,"deletions":0,"binary":false,"changes":28,"status":"modified"}]}