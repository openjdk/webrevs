{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2006, 2017, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2006, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -42,1 +42,1 @@\n-    public static void realMain(String args[]) {\n+    public static void realMain(String[] args) {\n@@ -66,7 +66,6 @@\n-            JarOutputStream out = new JarOutputStream(\n-                new BufferedOutputStream(\n-                    new FileOutputStream(filename.toString())));\n-            out.putNextEntry(new JarEntry(entryName));\n-            out.write(1);\n-            out.close();\n-            myJarFile = new File(filename.toString());\n+            try (JarOutputStream out = new JarOutputStream(\n+                    new BufferedOutputStream(new FileOutputStream(filename)))) {\n+                out.putNextEntry(new JarEntry(entryName));\n+                out.write(1);\n+            }\n+            myJarFile = new File(filename);\n@@ -82,12 +81,13 @@\n-            JarFile readJarFile = new JarFile(myJarFile);\n-            JarEntry je = readJarFile.getJarEntry(entryName);\n-            check(je != null);\n-            DataInputStream dis = new DataInputStream(\n-                readJarFile.getInputStream(je));\n-            byte val = dis.readByte();\n-            check(val == 1);\n-            try {\n-                dis.readByte();\n-                fail(\"Read past expected EOF\");\n-            } catch (IOException e) {\n-                pass();\n+            try (JarFile readJarFile = new JarFile(myJarFile)) {\n+                JarEntry je = readJarFile.getJarEntry(entryName);\n+                check(je != null);\n+                DataInputStream dis = new DataInputStream(\n+                        readJarFile.getInputStream(je));\n+                byte val = dis.readByte();\n+                check(val == 1);\n+                try {\n+                    dis.readByte();\n+                    fail(\"Read past expected EOF\");\n+                } catch (IOException e) {\n+                    pass();\n+                }\n@@ -95,1 +95,0 @@\n-            readJarFile.close();\n@@ -127,3 +126,1 @@\n-    static void equal(Object x, Object y) {\n-        if (x == null ? y == null : x.equals(y)) pass();\n-        else fail(x + \" not equal to \" + y);}\n+\n@@ -133,1 +130,2 @@\n-        if (failed > 0) throw new AssertionError(\"Some tests failed\");}\n+        if (failed > 0) throw new AssertionError(\"Some tests failed\");\n+    }\n","filename":"test\/jdk\/java\/util\/zip\/ZipFile\/ReadLongZipFileName.java","additions":24,"deletions":26,"binary":false,"changes":50,"status":"modified"}]}