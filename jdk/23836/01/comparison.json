{"files":[{"patch":"@@ -71,3 +71,10 @@\n-    if (RequireSharedSpaces) {\n-      warning(\"Cannot dump shared archive while using shared archive\");\n-    }\n+    \/\/ Note: -Xshare and -XX:AOTMode flags are mutually exclusive.\n+    \/\/ - Classic workflow: -Xshare:on and -Xshare:dump cannot take effect at the same time.\n+    \/\/ - JEP 483 workflow: -XX:AOTMode:record and -XX:AOTMode=on cannot take effect at the same time.\n+    \/\/ So we can never come to here with RequireSharedSpaces==true.\n+    assert(!RequireSharedSpaces, \"sanity\");\n+\n+    \/\/ If dumping the classic archive, or making an AOT training run (dumping a preimage archive),\n+    \/\/ for sanity, parse all classes from classfiles.\n+    \/\/ TODO: in the future, if we want to support re-training on top of an existing AOT cache, this\n+    \/\/ needs to be changed.\n","filename":"src\/hotspot\/share\/cds\/cdsConfig.cpp","additions":10,"deletions":3,"binary":false,"changes":13,"status":"modified"}]}