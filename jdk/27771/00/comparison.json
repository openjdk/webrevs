{"files":[{"patch":"@@ -108,6 +108,3 @@\n-  if (mvendorid.enabled()) {\n-    \/\/ Rivos\n-    if (mvendorid.value() == RIVOS) {\n-      if (FLAG_IS_DEFAULT(UseConservativeFence)) {\n-        FLAG_SET_DEFAULT(UseConservativeFence, false);\n-      }\n+  if (mvendorid.value() == RIVOS) {\n+    if (FLAG_IS_DEFAULT(UseConservativeFence)) {\n+      FLAG_SET_DEFAULT(UseConservativeFence, false);\n@@ -202,2 +199,3 @@\n-  if (UseZicboz && zicboz_block_size.enabled() && zicboz_block_size.value() > 0) {\n-    assert(is_power_of_2(zicboz_block_size.value()), \"Sanity\");\n+  if (UseZicboz && zicboz_block_size.enabled()) {\n+    assert(is_power_of_2(zicboz_block_size.value()) &&\n+           zicboz_block_size.value() > 0, \"Sanity\");\n","filename":"src\/hotspot\/cpu\/riscv\/vm_version_riscv.cpp","additions":6,"deletions":8,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -55,1 +55,0 @@\n-    int64_t           _value;\n@@ -58,8 +57,1 @@\n-      _pretty(pretty), _feature_string(fstring), _linux_feature_bit(nth_bit(linux_bit_num)),\n-      _value(-1) {\n-    }\n-    virtual void enable_feature(int64_t value = 0) {\n-      _value = value;\n-    }\n-    virtual void disable_feature() {\n-      _value = -1;\n+      _pretty(pretty), _feature_string(fstring), _linux_feature_bit(nth_bit(linux_bit_num)) {\n@@ -67,0 +59,2 @@\n+    virtual void enable_feature(int64_t value = 0) = 0;\n+    virtual void disable_feature() = 0;\n@@ -70,1 +64,0 @@\n-    int64_t value()              { return _value; }\n@@ -73,0 +66,1 @@\n+    virtual int64_t value() = 0;\n@@ -161,1 +155,0 @@\n-      RVFeatureValue::enable_feature(value);\n@@ -165,1 +158,0 @@\n-      RVFeatureValue::disable_feature();\n@@ -168,0 +160,1 @@\n+    int64_t value() { return enabled(); }\n@@ -171,1 +164,2 @@\n-    bool _enabled;\n+    int64_t _value;\n+    static const int64_t DISABLED_VALUE = -1;\n@@ -175,10 +169,1 @@\n-      _enabled(false) {\n-    }\n-    bool enabled()               { return _enabled; }\n-    void enable_feature(int64_t value = 0) {\n-      RVFeatureValue::enable_feature(value);\n-      _enabled = true;\n-    }\n-    void disable_feature() {\n-      RVFeatureValue::disable_feature();\n-      _enabled = false;\n+      _value(DISABLED_VALUE) {\n@@ -186,0 +171,4 @@\n+    bool enabled() { return _value != DISABLED_VALUE; }\n+    void enable_feature(int64_t value) { _value = value; }\n+    void disable_feature() { _value = DISABLED_VALUE; }\n+    int64_t value() { return _value; }\n","filename":"src\/hotspot\/cpu\/riscv\/vm_version_riscv.hpp","additions":12,"deletions":23,"binary":false,"changes":35,"status":"modified"}]}