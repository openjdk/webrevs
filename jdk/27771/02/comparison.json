{"files":[{"patch":"@@ -106,11 +106,0 @@\n-  \/\/ Enable vendor specific features\n-\n-  if (mvendorid.enabled()) {\n-    \/\/ Rivos\n-    if (mvendorid.value() == RIVOS) {\n-      if (FLAG_IS_DEFAULT(UseConservativeFence)) {\n-        FLAG_SET_DEFAULT(UseConservativeFence, false);\n-      }\n-    }\n-  }\n-\n@@ -202,1 +191,1 @@\n-  if (UseZicboz && zicboz_block_size.enabled() && zicboz_block_size.value() > 0) {\n+  if (UseZicboz && zicboz_block_size.value() > 0) {\n","filename":"src\/hotspot\/cpu\/riscv\/vm_version_riscv.cpp","additions":1,"deletions":12,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -55,1 +55,0 @@\n-    int64_t           _value;\n@@ -58,8 +57,1 @@\n-      _pretty(pretty), _feature_string(fstring), _linux_feature_bit(nth_bit(linux_bit_num)),\n-      _value(-1) {\n-    }\n-    virtual void enable_feature(int64_t value = 0) {\n-      _value = value;\n-    }\n-    virtual void disable_feature() {\n-      _value = -1;\n+      _pretty(pretty), _feature_string(fstring), _linux_feature_bit(nth_bit(linux_bit_num)) {\n@@ -67,0 +59,2 @@\n+    virtual void enable_feature(int64_t value = 0) = 0;\n+    virtual void disable_feature() = 0;\n@@ -70,1 +64,0 @@\n-    int64_t value()              { return _value; }\n@@ -73,0 +66,2 @@\n+    \/\/ Use DEFAULT_VALUE if unset.\n+    virtual int64_t value() = 0;\n@@ -75,0 +70,2 @@\n+    static const int64_t DEFAULT_VALUE = -1;\n+\n@@ -161,1 +158,0 @@\n-      RVFeatureValue::enable_feature(value);\n@@ -165,1 +161,0 @@\n-      RVFeatureValue::disable_feature();\n@@ -168,0 +163,1 @@\n+    int64_t value() { return enabled() ? 1 : DEFAULT_VALUE; }\n@@ -171,1 +167,1 @@\n-    bool _enabled;\n+    int64_t _value;\n@@ -175,1 +171,1 @@\n-      _enabled(false) {\n+      _value(DEFAULT_VALUE) {\n@@ -177,8 +173,4 @@\n-    bool enabled()               { return _enabled; }\n-    void enable_feature(int64_t value = 0) {\n-      RVFeatureValue::enable_feature(value);\n-      _enabled = true;\n-    }\n-    void disable_feature() {\n-      RVFeatureValue::disable_feature();\n-      _enabled = false;\n+    bool enabled() { return _value != DEFAULT_VALUE; }\n+    void enable_feature(int64_t value) {\n+      assert(value != DEFAULT_VALUE, \"Sanity\");\n+      _value = value;\n@@ -186,0 +178,2 @@\n+    void disable_feature() { _value = DEFAULT_VALUE; }\n+    int64_t value() { return _value; }\n","filename":"src\/hotspot\/cpu\/riscv\/vm_version_riscv.hpp","additions":16,"deletions":22,"binary":false,"changes":38,"status":"modified"}]}