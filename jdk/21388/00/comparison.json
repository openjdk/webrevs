{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -50,0 +50,2 @@\n+    private static final int MAX_RETRIES = 3;\n+\n@@ -136,8 +138,13 @@\n-    private Socket newUdpSocket() throws IOException {\n-        Socket s = null;\n-\n-        try {\n-            s = new Socket(InetAddress.getLoopbackAddress(), 8000, false);\n-        } catch (BindException unexpected) {\n-            System.out.println(\"BindException caught retry Socket creation\");\n-            s = new Socket(InetAddress.getLoopbackAddress(), 8000, false);\n+    private Socket newUdpSocket() throws IOException, InterruptedException {\n+        BindException unexpected = null;\n+        for (int i=0; i < MAX_RETRIES; i++) {\n+            try {\n+                return new Socket(InetAddress.getLoopbackAddress(), 8000, false);\n+            } catch (BindException be) {\n+                unexpected = be;\n+                if (i != MAX_RETRIES - 1) {\n+                    System.out.printf(\"BindException caught: retry Socket creation [%s\/%s]%n\",\n+                            i + 1, MAX_RETRIES);\n+                    Thread.sleep(10 + 10 * i);\n+                }\n+            }\n@@ -145,1 +152,1 @@\n-        return s;\n+        throw unexpected;\n","filename":"test\/jdk\/java\/net\/Socket\/UdpSocket.java","additions":17,"deletions":10,"binary":false,"changes":27,"status":"modified"}]}