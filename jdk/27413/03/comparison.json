{"files":[{"patch":"@@ -57,5 +57,11 @@\n-  if ((G1PeriodicGCSystemLoadThreshold > 0.0f) &&\n-      (os::loadavg(&recent_load, 1) == -1 || recent_load > G1PeriodicGCSystemLoadThreshold)) {\n-    log_debug(gc, periodic)(\"Load %1.2f is higher than threshold %1.2f. Skipping.\",\n-                            recent_load, G1PeriodicGCSystemLoadThreshold);\n-    return false;\n+  if (G1PeriodicGCSystemLoadThreshold > 0.0) {\n+    if (os::loadavg(&recent_load, 1) == -1) {\n+      G1PeriodicGCSystemLoadThreshold = 0.0;\n+      log_warning(gc, periodic)(\"System loadavg not supported, G1PeriodicGCSystemLoadThreshold check is disabled.\");\n+      return false;\n+    }\n+    if (recent_load > G1PeriodicGCSystemLoadThreshold) {\n+      log_debug(gc, periodic)(\"Load %1.2f is higher than threshold %1.2f. Skipping.\",\n+                              recent_load, G1PeriodicGCSystemLoadThreshold);\n+      return false;\n+    }\n","filename":"src\/hotspot\/share\/gc\/g1\/g1PeriodicGCTask.cpp","additions":11,"deletions":5,"binary":false,"changes":16,"status":"modified"}]}