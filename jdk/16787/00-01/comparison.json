{"files":[{"patch":"@@ -45,2 +45,0 @@\n-import static org.junit.jupiter.api.Assertions.fail;\n-\n@@ -50,1 +48,1 @@\n-public class PropertiesTestRun {\n+import static org.junit.jupiter.api.Assertions.fail;\n@@ -52,2 +50,1 @@\n-    \/\/ Collection of String paths used for the cmdline processes\n-    private static final String TEST_JAVA = Utils.TEST_JDK;\n+public class PropertiesTestRun {\n@@ -55,0 +52,2 @@\n+    \/\/ String paths used for the cmdline processes\n+    private static final String TEST_JDK = Utils.TEST_JDK;\n@@ -57,1 +56,0 @@\n-\n@@ -60,1 +58,0 @@\n-\n@@ -63,1 +60,0 @@\n-\n@@ -66,0 +62,2 @@\n+    private static final String WRITABLE_JDK_JAVA_PATH =\n+            WRITABLE_JDK_BIN + Utils.FILE_SEPARATOR + \"java\";\n@@ -73,1 +71,1 @@\n-        invokeTestJDKMethod(\"PropertiesTest\", \"-d\", \"dump1\");\n+        executeTestJDKMethod(\"PropertiesTest\", \"-d\", \"dump1\");\n@@ -75,1 +73,2 @@\n-        invokeTestJDKMethod(\"-Djava.util.currency.data=\"+TEST_PROPS, \"PropertiesTest\", \"-d\", \"dump2\");\n+        executeTestJDKMethod(\"-Djava.util.currency.data=\"+TEST_PROPS,\n+                \"PropertiesTest\", \"-d\", \"dump2\");\n@@ -77,1 +76,1 @@\n-        invokeWritableJDKMethod(\"PropertiesTest\", \"-d\", \"dump3\");\n+        executeWritableJDKMethod(\"PropertiesTest\", \"-d\", \"dump3\");\n@@ -84,1 +83,1 @@\n-        invokeProcess(new String[]{\"cp\", \"-H\", \"-R\", TEST_JAVA, WRITABLE_JDK});\n+        executeProcess(new String[]{\"cp\", \"-H\", \"-R\", TEST_JDK, WRITABLE_JDK});\n@@ -86,1 +85,1 @@\n-        invokeProcess(new String[]{\"chmod\", \"-R\", \"u+w\", WRITABLE_JDK_LIB});\n+        executeProcess(new String[]{\"chmod\", \"-R\", \"u+w\", WRITABLE_JDK_LIB});\n@@ -88,1 +87,1 @@\n-        invokeProcess(new String[]{\"cp\", TEST_PROPS, WRITABLE_JDK_LIB});\n+        executeProcess(new String[]{\"cp\", TEST_PROPS, WRITABLE_JDK_LIB});\n@@ -96,1 +95,2 @@\n-        invokeTestJDKMethod(\"PropertiesTest\", \"-c\", \"dump1\", \"dump2\", TEST_PROPS);\n+        executeTestJDKMethod(\"PropertiesTest\", \"-c\", \"dump1\", \"dump2\",\n+                TEST_PROPS);\n@@ -98,1 +98,2 @@\n-        invokeTestJDKMethod(\"PropertiesTest\", \"-c\", \"dump1\", \"dump3\", TEST_PROPS);\n+        executeTestJDKMethod(\"PropertiesTest\", \"-c\", \"dump1\", \"dump3\",\n+                TEST_PROPS);\n@@ -107,2 +108,2 @@\n-        invokeWritableJDKMethod(\"PropertiesTest\", methodName);\n-        invokeTestJDKMethod(\"-Djava.util.currency.data=\"+TEST_PROPS,\n+        executeWritableJDKMethod(\"PropertiesTest\", methodName);\n+        executeTestJDKMethod(\"-Djava.util.currency.data=\"+TEST_PROPS,\n@@ -117,1 +118,1 @@\n-    private static void invokeTestJDKMethod(String... params) throws Throwable {\n+    private static void executeTestJDKMethod(String... params) throws Throwable {\n@@ -120,1 +121,1 @@\n-            fail(\"Process started with: \" + Arrays.toString(params) + \" did not pass\");\n+            fail(\"Process started with: \" + Arrays.toString(params) + \" failed\");\n@@ -125,1 +126,1 @@\n-    private static void invokeWritableJDKMethod(String... params) throws Throwable {\n+    private static void executeWritableJDKMethod(String... params) throws Throwable {\n@@ -128,1 +129,2 @@\n-        allParams[0] = WRITABLE_JDK_BIN + Utils.FILE_SEPARATOR + \"java\";\n+        \/\/ We don't use executeTestJvm() because we want to point to separate JDK java path\n+        allParams[0] = WRITABLE_JDK_JAVA_PATH;\n@@ -138,1 +140,1 @@\n-        invokeProcess(allParams);\n+        executeProcess(allParams);\n@@ -141,2 +143,2 @@\n-    \/\/ Invoke a process and fail if the command is not successful\n-    private static void invokeProcess(String[] params) throws Throwable {\n+    \/\/ Execute a process and fail if the command is not successful\n+    private static void executeProcess(String[] params) throws Throwable {\n@@ -146,1 +148,1 @@\n-            fail(\"Process started with: \" + Arrays.toString(params) + \" did not pass\");\n+            fail(\"Process started with: \" + Arrays.toString(params) + \" failed\");\n@@ -152,6 +154,2 @@\n-        tearDownWritableJDK();\n-    }\n-\n-    \/\/ Remove the copied writable JDK image from scratch folder\n-    private static void tearDownWritableJDK() throws Throwable {\n-        invokeProcess(new String[]{\"rm\", \"-rf\", WRITABLE_JDK});\n+        \/\/ Remove the copied writable JDK image from scratch folder\n+        executeProcess(new String[]{\"rm\", \"-rf\", WRITABLE_JDK});\n","filename":"test\/jdk\/java\/util\/Currency\/PropertiesTestRun.java","additions":30,"deletions":32,"binary":false,"changes":62,"status":"modified"}]}