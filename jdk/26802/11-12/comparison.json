{"files":[{"patch":"@@ -226,1 +226,0 @@\n-    private static final int JAVA_CLASSNAME_MAX_LEN = 65535;\n@@ -604,1 +603,2 @@\n-        if (!classNameLengthIsValid(name)) {\n+        Objects.requireNonNull(name);\n+        if (!ModifiedUtf.classNameLengthIsValid(name)) {\n@@ -4158,15 +4158,0 @@\n-    \/\/ Checks whether the class name exceeds the maximum allowed length.\n-    private static boolean classNameLengthIsValid(String name) {\n-        Objects.requireNonNull(name);\n-        \/\/ Quick approximation: each char can be at most 3 bytes in Modified UTF-8.\n-        \/\/ If the string is short enough, it definitely fits.\n-        int nameLen = name.length();\n-        if (nameLen <= JAVA_CLASSNAME_MAX_LEN \/ 3) {\n-            return true;\n-        }\n-        \/\/ Check exact Modified UTF-8 length.\n-        \/\/ The check utfLen >= nameLen ensures we don't incorrectly return true in case of int overflow.\n-        int utfLen = ModifiedUtf.utfLen(name, 0);\n-        return utfLen <= JAVA_CLASSNAME_MAX_LEN && utfLen >= nameLen;\n-    }\n-\n@@ -4175,1 +4160,1 @@\n-        if (!classNameLengthIsValid(name)) {\n+        if (!ModifiedUtf.classNameLengthIsValid(name)) {\n@@ -4177,1 +4162,1 @@\n-            \"Class name length exceeds limit of \" + JAVA_CLASSNAME_MAX_LEN);\n+                    \"Class name length exceeds limit of \" + ModifiedUtf.JAVA_CLASSNAME_MAX_LEN);\n@@ -4180,2 +4165,1 @@\n-\n-}\n+}\n\\ No newline at end of file\n","filename":"src\/java.base\/share\/classes\/java\/lang\/Class.java","additions":5,"deletions":21,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -36,0 +36,3 @@\n+    \/\/Max length in Modified UTF-8 bytes for class names.(see max_symbol_length in symbol.hpp)\n+    public static final int JAVA_CLASSNAME_MAX_LEN = 65535;\n+\n@@ -71,0 +74,18 @@\n+\n+    \/**\n+     * Checks whether the length of the class name in Modified UTF-8 bytes exceeds the maximum allowed.\n+     * @param name class name\n+     *\/\n+    @ForceInline\n+    public static boolean classNameLengthIsValid(String name) {\n+        \/\/ Quick approximation: each char can be at most 3 bytes in Modified UTF-8.\n+        \/\/ If the string is short enough, it definitely fits.\n+        int nameLen = name.length();\n+        if (nameLen <= JAVA_CLASSNAME_MAX_LEN \/ 3) {\n+            return true;\n+        }\n+        \/\/ Check exact Modified UTF-8 length.\n+        \/\/ The check utfLen >= nameLen ensures we don't incorrectly return true in case of int overflow.\n+        int utfLen = utfLen(name, 0);\n+        return utfLen >= nameLen && utfLen <= JAVA_CLASSNAME_MAX_LEN;\n+    }\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/util\/ModifiedUtf.java","additions":21,"deletions":0,"binary":false,"changes":21,"status":"modified"}]}