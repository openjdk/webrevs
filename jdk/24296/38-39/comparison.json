{"files":[{"patch":"@@ -33,1 +33,0 @@\n-#include \"runtime\/suspendedThreadTask.hpp\"\n@@ -197,1 +196,0 @@\n-                           const SuspendedThreadTaskContext& context,\n@@ -226,1 +224,1 @@\n-                               const SuspendedThreadTaskContext& context,\n+                               const void* ucontext,\n@@ -229,0 +227,1 @@\n+  assert(ucontext != nullptr, \"invariant\");\n@@ -234,1 +233,1 @@\n-  request._sample_pc = os::fetch_frame_from_context(context.ucontext(), reinterpret_cast<intptr_t**>(&request._sample_sp), &fp);\n+  request._sample_pc = os::fetch_frame_from_context(ucontext, reinterpret_cast<intptr_t**>(&request._sample_sp), &fp);\n@@ -243,1 +242,1 @@\n-      void* bcp = os::fetch_bcp_from_context(context.ucontext());\n+      void* bcp = os::fetch_bcp_from_context(ucontext);\n@@ -285,1 +284,1 @@\n-JfrSampleResult JfrSampleRequestBuilder::build_java_sample_request(const SuspendedThreadTaskContext& context,\n+JfrSampleResult JfrSampleRequestBuilder::build_java_sample_request(const void* ucontext,\n@@ -288,0 +287,1 @@\n+  assert(ucontext != nullptr, \"invariant\");\n@@ -298,1 +298,1 @@\n-    if (build_from_ljf(request, context, tl, jt)) {\n+    if (build_from_ljf(request, tl, jt)) {\n@@ -301,1 +301,1 @@\n-  } else if (build_from_context(request, context, tl, jt)) {\n+  } else if (build_from_context(request, ucontext, tl, jt)) {\n","filename":"src\/hotspot\/share\/jfr\/periodic\/sampling\/jfrSampleRequest.cpp","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -34,1 +34,0 @@\n-class SuspendedThreadTaskContext;\n@@ -81,1 +80,1 @@\n-  static JfrSampleResult build_java_sample_request(const SuspendedThreadTaskContext& context,\n+  static JfrSampleResult build_java_sample_request(const void* ucontext,\n","filename":"src\/hotspot\/share\/jfr\/periodic\/sampling\/jfrSampleRequest.hpp","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -284,1 +284,1 @@\n-        _result = JfrSampleRequestBuilder::build_java_sample_request(context, tl, jt);\n+        _result = JfrSampleRequestBuilder::build_java_sample_request(context.ucontext(), tl, jt);\n","filename":"src\/hotspot\/share\/jfr\/periodic\/sampling\/jfrThreadSampler.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -37,0 +37,1 @@\n+#include \"runtime\/continuation.hpp\"\n","filename":"src\/hotspot\/share\/jfr\/periodic\/sampling\/jfrThreadSampling.cpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"}]}