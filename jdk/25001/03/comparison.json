{"files":[{"patch":"@@ -101,0 +101,3 @@\n+#if INCLUDE_JVMCI\n+#include \"jvmci\/jvmci.hpp\"\n+#endif\n@@ -2236,0 +2239,3 @@\n+      \/\/ Clean JVMCI metadata handles.\n+      JVMCI_ONLY(JVMCI::do_unloading(unloading_occurred));\n+\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahHeap.cpp","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -51,0 +51,4 @@\n+void ShenandoahRuntime::write_barrier_pre(oopDesc* orig) {\n+  write_ref_field_pre(orig, JavaThread::current());\n+}\n+\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahRuntime.cpp","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -40,0 +40,1 @@\n+  static void write_barrier_pre(oopDesc* orig);\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahRuntime.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -114,0 +114,4 @@\n+#if INCLUDE_SHENANDOAHGC\n+    static address shenandoah_in_cset_fast_test_addr;\n+    static int shenandoah_region_size_bytes_shift;\n+#endif\n","filename":"src\/hotspot\/share\/jvmci\/jvmciCompilerToVM.hpp","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -55,0 +55,4 @@\n+#if INCLUDE_SHENANDOAHGC\n+#include \"gc\/shenandoah\/shenandoahHeap.hpp\"\n+#include \"gc\/shenandoah\/shenandoahHeapRegion.hpp\"\n+#endif\n@@ -89,0 +93,5 @@\n+#if INCLUDE_SHENANDOAHGC\n+address CompilerToVM::Data::shenandoah_in_cset_fast_test_addr;\n+int CompilerToVM::Data::shenandoah_region_size_bytes_shift;\n+#endif\n+\n@@ -230,0 +239,3 @@\n+  } else if (bs->is_a(BarrierSet::ShenandoahBarrierSet)) {\n+    cardtable_start_address = nullptr;\n+    cardtable_shift = CardTable::card_shift();\n@@ -236,0 +248,7 @@\n+#if INCLUDE_SHENANDOAHGC\n+  if (UseShenandoahGC) {\n+    shenandoah_in_cset_fast_test_addr = ShenandoahHeap::in_cset_fast_test_addr();\n+    shenandoah_region_size_bytes_shift = ShenandoahHeapRegion::region_size_bytes_shift_jint();\n+  }\n+#endif\n+\n","filename":"src\/hotspot\/share\/jvmci\/jvmciCompilerToVMInit.cpp","additions":19,"deletions":0,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -232,1 +232,1 @@\n-  return UseSerialGC || UseParallelGC || UseG1GC || UseZGC || UseEpsilonGC;\n+  return UseSerialGC || UseParallelGC || UseG1GC || UseZGC || UseShenandoahGC || UseEpsilonGC;\n","filename":"src\/hotspot\/share\/jvmci\/jvmci_globals.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -56,0 +56,4 @@\n+#if INCLUDE_SHENANDOAHGC\n+#include \"gc\/shenandoah\/shenandoahRuntime.hpp\"\n+#include \"gc\/shenandoah\/shenandoahThreadLocalData.hpp\"\n+#endif\n@@ -132,0 +136,2 @@\n+  SHENANDOAHGC_ONLY(static_field(CompilerToVM::Data, shenandoah_in_cset_fast_test_addr, address))                                    \\\n+  SHENANDOAHGC_ONLY(static_field(CompilerToVM::Data, shenandoah_region_size_bytes_shift,int))                                        \\\n@@ -898,0 +904,7 @@\n+  SHENANDOAHGC_ONLY(declare_function(ShenandoahRuntime::load_reference_barrier_strong))         \\\n+  SHENANDOAHGC_ONLY(declare_function(ShenandoahRuntime::load_reference_barrier_strong_narrow))  \\\n+  SHENANDOAHGC_ONLY(declare_function(ShenandoahRuntime::load_reference_barrier_weak))           \\\n+  SHENANDOAHGC_ONLY(declare_function(ShenandoahRuntime::load_reference_barrier_weak_narrow))    \\\n+  SHENANDOAHGC_ONLY(declare_function(ShenandoahRuntime::load_reference_barrier_phantom))        \\\n+  SHENANDOAHGC_ONLY(declare_function(ShenandoahRuntime::load_reference_barrier_phantom_narrow)) \\\n+  SHENANDOAHGC_ONLY(declare_function(ShenandoahRuntime::write_barrier_pre))                     \\\n@@ -944,0 +957,9 @@\n+#if INCLUDE_SHENANDOAHGC\n+\n+#define VM_INT_CONSTANTS_JVMCI_SHENANDOAH(declare_constant, declare_constant_with_value, declare_preprocessor_constant) \\\n+   declare_constant_with_value(\"ShenandoahThreadLocalData::gc_state_offset\", in_bytes(ShenandoahThreadLocalData::gc_state_offset())) \\\n+   declare_constant_with_value(\"ShenandoahThreadLocalData::satb_mark_queue_index_offset\", in_bytes(ShenandoahThreadLocalData::satb_mark_queue_index_offset())) \\\n+   declare_constant_with_value(\"ShenandoahThreadLocalData::satb_mark_queue_buffer_offset\", in_bytes(ShenandoahThreadLocalData::satb_mark_queue_buffer_offset())) \\\n+   declare_constant_with_value(\"ShenandoahThreadLocalData::card_table_offset\", in_bytes(ShenandoahThreadLocalData::card_table_offset())) \\\n+\n+#endif\n@@ -1066,0 +1088,5 @@\n+#if INCLUDE_SHENANDOAHGC\n+  VM_INT_CONSTANTS_JVMCI_SHENANDOAH(GENERATE_VM_INT_CONSTANT_ENTRY,\n+                                    GENERATE_VM_INT_CONSTANT_WITH_VALUE_ENTRY,\n+                                    GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY)\n+#endif\n","filename":"src\/hotspot\/share\/jvmci\/vmStructs_jvmci.cpp","additions":27,"deletions":0,"binary":false,"changes":27,"status":"modified"}]}