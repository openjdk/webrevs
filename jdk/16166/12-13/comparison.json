{"files":[{"patch":"@@ -0,0 +1,115 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2024, BELLSOFT. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import javax.print.PrintService;\n+import javax.print.PrintServiceLookup;\n+import javax.print.attribute.Attribute;\n+import java.util.Arrays;\n+import java.util.Set;\n+import javax.print.attribute.standard.OutputBin;\n+\n+\/*\n+ * @test\n+ * @bug JDK-8314070\n+ * @key printer\n+ * @summary javax.print: Support IPP output-bin attribute extension\n+ *\/\n+\n+public class CheckSupportedOutputBinsTest {\n+\n+    public static void main(String[] args) throws Exception {\n+\n+        PrintService[] services = PrintServiceLookup.lookupPrintServices(null, null);\n+\n+        if (services == null) {\n+            System.out.printf(\"Skip the test as there are no available PrintServices.%n\");\n+            return;\n+        }\n+\n+        System.out.printf(\"Print services: %d%n\", services.length);\n+\n+        for (PrintService service : services) {\n+            checkSupportedOutputBins(service);\n+        }\n+    }\n+\n+    private static void checkSupportedOutputBins(PrintService service) throws Exception {\n+\n+        System.out.printf(\"Check printService: %s%n\", service);\n+\n+        boolean isOutputBinCategorySupported = service.isAttributeCategorySupported(OutputBin.class);\n+        OutputBin defaultOutputBin = (OutputBin) service.getDefaultAttributeValue(OutputBin.class);\n+        Set<Class<?>> supportedAttributeCategories = Set.of(service.getSupportedAttributeCategories());\n+        OutputBin[] supportedOutputBins = (OutputBin[]) service\n+                .getSupportedAttributeValues(OutputBin.class, null, null);\n+\n+        if (!isOutputBinCategorySupported) {\n+\n+            if (supportedAttributeCategories.contains(OutputBin.class)) {\n+                throw new Exception(\"OutputBin category is not supported\" +\n+                        \" and supported attribute categories contain OutputBin.class.\");\n+            }\n+\n+            if (defaultOutputBin != null) {\n+                throw new Exception(\"OutputBin category is not supported\" +\n+                        \" and the default output bin is not null.\");\n+            }\n+\n+            if (supportedOutputBins != null && supportedOutputBins.length > 0) {\n+                throw new Exception(\"OutputBin category is not supported\" +\n+                        \" and array of supported output bins is not null or its size is not zero.\");\n+            }\n+\n+            return;\n+        }\n+\n+        if (!supportedAttributeCategories.contains(OutputBin.class)) {\n+            throw new Exception(\"OutputBin category is supported\" +\n+                    \" and supported attribute categories do not contain OutputBin.class.\");\n+        }\n+\n+        if (defaultOutputBin == null) {\n+            throw new Exception(\"OutputBin category is supported\" +\n+                    \" and the default output bin is null.\");\n+        }\n+\n+        if (supportedOutputBins == null || supportedOutputBins.length == 0) {\n+            throw new Exception(\"OutputBin category is supported\" +\n+                    \" and PrintService.getSupportedAttributeValues() returns null or an array with zero elements.\");\n+        }\n+\n+        if (!service.isAttributeValueSupported(defaultOutputBin, null, null)) {\n+            throw new Exception(\"OutputBin category is supported\" +\n+                    \" and the default output bin \" + defaultOutputBin + \" is not supported\");\n+        }\n+\n+        for (OutputBin outputBin : supportedOutputBins) {\n+            if (!service.isAttributeValueSupported(outputBin, null, null)) {\n+                throw new Exception(\"OutputBin category is supported\" +\n+                        \" and the output bin \" + outputBin + \" from supported attribute values\" +\n+                        \" is not supported\");\n+            }\n+        }\n+    }\n+}\n\\ No newline at end of file\n","filename":"test\/jdk\/javax\/print\/attribute\/CheckSupportedOutputBinsTest.java","additions":115,"deletions":0,"binary":false,"changes":115,"status":"added"},{"patch":"@@ -96,1 +96,1 @@\n-            System.out.println(\"Skip the test as the number of supported output bins less than 2.\");\n+            System.out.println(\"Skip the test as the number of supported output bins is less than 2.\");\n@@ -184,1 +184,1 @@\n-        if (service == null) {\n+        if (service == null || !service.isAttributeCategorySupported(OutputBin.class)) {\n@@ -311,1 +311,1 @@\n-                    \" - Pres 'Print' button.\"\n+                    \" - Press 'Print' button.\"\n","filename":"test\/jdk\/javax\/print\/attribute\/OutputBinAttributePrintDialogTest.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -85,1 +85,1 @@\n-                System.out.println(\"Skip the test as the number of supported output bins less than 2.\");\n+                System.out.println(\"Skip the test as the number of supported output bins is less than 2.\");\n@@ -163,1 +163,1 @@\n-        if (service == null) {\n+        if (service == null || !service.isAttributeCategorySupported(OutputBin.class)) {\n","filename":"test\/jdk\/javax\/print\/attribute\/OutputBinAttributeTest.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}