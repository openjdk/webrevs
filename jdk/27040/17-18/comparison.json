{"files":[{"patch":"@@ -31,1 +31,1 @@\n- * @run main\/othervm\/native -agentlib:SuspendWithObjectMonitorWait SuspendWithObjectMonitorWait1\n+ * @run main\/othervm\/native -agentlib:SuspendWithObjectMonitorWait SuspendWithObjectMonitorWait1 1\n@@ -73,1 +73,1 @@\n-        System.out.println(\"About to execute for \" + timeMax + \" seconds.\");\n+        System.out.println(\"Test 1: About to execute for \" + timeMax + \" seconds.\");\n","filename":"test\/hotspot\/jtreg\/serviceability\/jvmti\/SuspendWithObjectMonitorWait\/SuspendWithObjectMonitorWait1.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -31,1 +31,1 @@\n- * @run main\/othervm\/native -agentlib:SuspendWithObjectMonitorWait SuspendWithObjectMonitorWait2\n+ * @run main\/othervm\/native -agentlib:SuspendWithObjectMonitorWait SuspendWithObjectMonitorWait2 2\n@@ -82,1 +82,1 @@\n-        System.out.println(\"About to execute for \" + timeMax + \" seconds.\");\n+        System.out.println(\"Test 2: About to execute for \" + timeMax + \" seconds.\");\n","filename":"test\/hotspot\/jtreg\/serviceability\/jvmti\/SuspendWithObjectMonitorWait\/SuspendWithObjectMonitorWait2.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -31,1 +31,1 @@\n- * @run main\/othervm\/native -agentlib:SuspendWithObjectMonitorWait SuspendWithObjectMonitorWait3\n+ * @run main\/othervm\/native -agentlib:SuspendWithObjectMonitorWait SuspendWithObjectMonitorWait3 3\n@@ -88,1 +88,1 @@\n-        System.out.println(\"About to execute for \" + timeMax + \" seconds.\");\n+        System.out.println(\"Test 3: About to execute for \" + timeMax + \" seconds.\");\n","filename":"test\/hotspot\/jtreg\/serviceability\/jvmti\/SuspendWithObjectMonitorWait\/SuspendWithObjectMonitorWait3.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -148,1 +148,6 @@\n-        if (args.length > 2) {\n+        if (args.length == 0) {\n+            System.err.println(\"Invalid number of arguments, there should be at least a test_case given.\");\n+            usage();\n+        }\n+\n+        if (args.length > 3) {\n@@ -162,0 +167,1 @@\n+        int testCase = 0;\n@@ -164,1 +170,1 @@\n-            if (\"-p\".equals(args[argIndex])) {\n+            if (args[argIndex].equals(\"-p\")) {\n@@ -170,0 +176,17 @@\n+            if (testCase == 0) {\n+                try {\n+                    \/\/ testCase must be the first non-optional arg.\n+                    testCase = Integer.parseUnsignedInt(args[argIndex]);\n+                    log(\"testCase = \" + testCase);\n+                } catch (NumberFormatException nfe) {\n+                    System.err.println(\"'\" + args[argIndex] +\n+                            \"': invalid test_case value.\");\n+                    usage();\n+                }\n+                if (testCase < 1 || testCase > 3) {\n+                    System.err.println(\"Invalid test_case value: '\" + testCase + \"'\");\n+                    usage();\n+                }\n+                continue;\n+            }\n+\n@@ -183,1 +206,27 @@\n-        SuspendWithObjectMonitorWaitBase test = new SuspendWithObjectMonitorWaitBase();\n+\n+        if (timeMax == 0) {\n+            timeMax = DEF_TIME_MAX;\n+        }\n+        log(\"timeMax = \" + timeMax);\n+\n+        if (testCase == 0) {\n+            \/\/ Just -p was given.\n+            System.err.println(\"Invalid number of arguments, no test_case given.\");\n+            usage();\n+        }\n+\n+        SuspendWithObjectMonitorWaitBase test = null;\n+        switch (testCase) {\n+            case 1:\n+                test = new SuspendWithObjectMonitorWait1();\n+                break;\n+            case 2:\n+                test = new SuspendWithObjectMonitorWait2();\n+                break;\n+            case 3:\n+                test = new SuspendWithObjectMonitorWait3();\n+                break;\n+            default:\n+                \/\/ Impossible\n+                break;\n+        }\n","filename":"test\/hotspot\/jtreg\/serviceability\/jvmti\/SuspendWithObjectMonitorWait\/SuspendWithObjectMonitorWaitBase.java","additions":52,"deletions":3,"binary":false,"changes":55,"status":"modified"}]}