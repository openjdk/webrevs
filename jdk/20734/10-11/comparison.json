{"files":[{"patch":"@@ -1306,7 +1306,8 @@\n-      const char* cwd = get_current_directory(nullptr, 0);\n-      int pid = current_process_id();\n-      if (cwd != nullptr) {\n-        jio_snprintf(buffer, bufferSize, \"%s\\\\hs_err_pid%u.mdmp\", cwd, pid);\n-      } else {\n-        jio_snprintf(buffer, bufferSize, \".\\\\hs_err_pid%u.mdmp\", pid);\n-      }\n+      if (!check_only) {\n+        const char* cwd = get_current_directory(nullptr, 0);\n+        int pid = current_process_id();\n+        if (cwd != nullptr) {\n+          jio_snprintf(buffer, bufferSize, \"%s\\\\hs_err_pid%u.mdmp\", cwd, pid);\n+        } else {\n+          jio_snprintf(buffer, bufferSize, \".\\\\hs_err_pid%u.mdmp\", pid);\n+        }\n@@ -1314,5 +1315,9 @@\n-      if (!check_only && dumpFile == nullptr &&\n-          (dumpFile = CreateFile(buffer, GENERIC_WRITE, 0, nullptr, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, nullptr))\n-          == INVALID_HANDLE_VALUE) {\n-        jio_snprintf(buffer, bufferSize, \"Failed to create minidump file (0x%x).\", GetLastError());\n-        success = false;\n+        if (dumpFile == nullptr &&\n+            (dumpFile = CreateFile(buffer, GENERIC_WRITE, 0, nullptr, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, nullptr))\n+            == INVALID_HANDLE_VALUE) {\n+          jio_snprintf(buffer, bufferSize, \"Failed to create minidump file (0x%x).\", GetLastError());\n+          success = false;\n+        }\n+      } else {\n+        \/\/ For now on Windows, there is no more checks that we can do\n+        warn = false;\n@@ -1321,0 +1326,1 @@\n+\n","filename":"src\/hotspot\/os\/windows\/os_windows.cpp","additions":18,"deletions":12,"binary":false,"changes":30,"status":"modified"}]}