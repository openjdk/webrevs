{"files":[{"patch":"@@ -23,12 +23,0 @@\n-\n-\/*\n- * @test\n- * @bug 6972078\n- * @key headful\n- * @requires (os.family == \"linux\")\n- * @summary Verifies if user is able to select single directory if multi selection\n- * is enabled for JFileChooser.\n- * @run main TestFileChooserSingleDirectorySelection\n- *\/\n-\n-import java.io.File;\n@@ -41,0 +29,1 @@\n+import java.io.File;\n@@ -48,0 +37,10 @@\n+\/*\n+ * @test\n+ * @bug 6972078 8319938\n+ * @key headful\n+ * @requires (os.family == \"linux\")\n+ * @summary Verifies if user is able to select single directory if multi selection\n+ *          is enabled for JFileChooser.\n+ * @run main TestFileChooserSingleDirectorySelection\n+ *\/\n+\n@@ -54,2 +53,4 @@\n-    private static File[] testDir;\n-    private static File[] tempFile;\n+    private static File testDir;\n+    private static File testFile;\n+    private static File[] SubDirs;\n+    private static File[] subFiles;\n@@ -65,5 +66,0 @@\n-            testDir = new File[1];\n-            testDir[0] = new File(tmpDir, \"testDir\");\n-            if (!testDir[0].exists())\n-                testDir[0].mkdir();\n-            testDir[0].deleteOnExit();\n@@ -71,2 +67,24 @@\n-            \/\/ create temporary files inside testDir\n-            tempFile = new File[5];\n+            \/\/ Create a test directory that contains only folders\n+            testDir = new File(tmpDir, \"testDir\");\n+            if (!testDir.exists()) {\n+                testDir.mkdir();\n+            }\n+            testDir.deleteOnExit();\n+\n+            \/\/ create sub directories inside test directory\n+            SubDirs = new File[5];\n+            for (int i = 0; i < 5; ++i) {\n+                SubDirs[i] = new File(testDir, \"subDir_\" + (i+1));\n+                SubDirs[i].mkdir();\n+                SubDirs[i].deleteOnExit();\n+            }\n+\n+            \/\/ Create a test directory that contains only files\n+            testFile = new File(tmpDir, \"testFile\");\n+            if (!testFile.exists()) {\n+                testFile.mkdir();\n+            }\n+            testFile.deleteOnExit();\n+\n+            \/\/ create temporary files inside testFile\n+            subFiles = new File[5];\n@@ -74,3 +92,3 @@\n-                tempFile[i] = File.createTempFile(\"temp\", \".txt\",\n-                        new File(testDir[0].getAbsolutePath()));\n-                tempFile[i].deleteOnExit();\n+                subFiles[i] = File.createTempFile(\"subFiles_\" + (i+1),\n+                        \".txt\", new File(testFile.getAbsolutePath()));\n+                subFiles[i].deleteOnExit();\n@@ -98,1 +116,1 @@\n-                fileChooser.setCurrentDirectory(testDir[0]);\n+                fileChooser.setCurrentDirectory(testFile);\n@@ -120,0 +138,1 @@\n+                fileChooser.setCurrentDirectory(testDir);\n@@ -140,0 +159,1 @@\n+                fileChooser.setCurrentDirectory(testDir);\n@@ -157,1 +177,1 @@\n-        fileChooser = new JFileChooser(\"user.home\");\n+        fileChooser = new JFileChooser(testDir);\n","filename":"test\/jdk\/com\/sun\/java\/swing\/plaf\/gtk\/TestFileChooserSingleDirectorySelection.java","additions":46,"deletions":26,"binary":false,"changes":72,"status":"modified"}]}