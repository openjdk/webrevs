{"files":[{"patch":"@@ -26,1 +26,1 @@\n- * @bug 6972078\n+ * @bug 6972078 8319938\n@@ -54,2 +54,4 @@\n-    private static File[] testDir;\n-    private static File[] tempFile;\n+    private static File testDir;\n+    private static File testFile;\n+    private static File[] SubDirs;\n+    private static File[] subFiles;\n@@ -64,6 +66,1 @@\n-            String tmpDir = System.getProperty(\"user.home\");\n-            testDir = new File[1];\n-            testDir[0] = new File(tmpDir, \"testDir\");\n-            if (!testDir[0].exists())\n-                testDir[0].mkdir();\n-            testDir[0].deleteOnExit();\n+            String tmpDir = System.getProperty(\"java.io.tmpdir\");\n@@ -71,2 +68,24 @@\n-            \/\/ create temporary files inside testDir\n-            tempFile = new File[5];\n+            \/\/ Create a test directory that contains only folders\n+            testDir = new File(tmpDir, \"testDir\");\n+            if (!testDir.exists()) {\n+                testDir.mkdir();\n+            }\n+            testDir.deleteOnExit();\n+\n+            \/\/ create sub directories inside test directory\n+            SubDirs = new File[5];\n+            for (int i = 0; i < 5; ++i) {\n+                SubDirs[i] = new File(testDir, \"subDir_\" + (i+1));\n+                SubDirs[i].mkdir();\n+                SubDirs[i].deleteOnExit();\n+            }\n+\n+            \/\/ Create a test directory that contains only files\n+            testFile = new File(tmpDir, \"testFile\");\n+            if (!testFile.exists()) {\n+                testFile.mkdir();\n+            }\n+            testFile.deleteOnExit();\n+\n+            \/\/ create temporary files inside testFile\n+            subFiles = new File[5];\n@@ -74,3 +93,3 @@\n-                tempFile[i] = File.createTempFile(\"temp\", \".txt\",\n-                        new File(testDir[0].getAbsolutePath()));\n-                tempFile[i].deleteOnExit();\n+                subFiles[i] = File.createTempFile(\"subFiles_\" + (i+1),\n+                        \".txt\", new File(testFile.getAbsolutePath()));\n+                subFiles[i].deleteOnExit();\n@@ -98,1 +117,1 @@\n-                fileChooser.setCurrentDirectory(testDir[0]);\n+                fileChooser.setCurrentDirectory(testFile);\n@@ -120,0 +139,1 @@\n+                fileChooser.setCurrentDirectory(testDir);\n@@ -140,0 +160,1 @@\n+                fileChooser.setCurrentDirectory(testDir);\n@@ -157,1 +178,1 @@\n-        fileChooser = new JFileChooser(\"user.home\");\n+        fileChooser = new JFileChooser(testDir);\n","filename":"test\/jdk\/com\/sun\/java\/swing\/plaf\/gtk\/TestFileChooserSingleDirectorySelection.java","additions":37,"deletions":16,"binary":false,"changes":53,"status":"modified"}]}