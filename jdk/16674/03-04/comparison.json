{"files":[{"patch":"@@ -51,3 +51,1 @@\n-    private static volatile Point frameLocation;\n-    private static volatile int frameWidth;\n-    private static volatile int frameHeight;\n+    private static volatile Point clickLocation;\n@@ -84,1 +82,1 @@\n-    private static void populateDirs(File dirsDir) {\n+    private static void populateDirs(File parent) {\n@@ -86,3 +84,3 @@\n-            File SubDirs = new File(dirsDir, \"subDir_\" + (i+1));\n-            SubDirs.mkdir();\n-            SubDirs.deleteOnExit();\n+            File subDir = new File(parent, \"subDir_\" + (i+1));\n+            subDir.mkdir();\n+            subDir.deleteOnExit();\n@@ -102,1 +100,1 @@\n-    private static void populateFiles(File filesDir) throws Exception {\n+    private static void populateFiles(File parent) throws Exception {\n@@ -104,1 +102,1 @@\n-            File subFile = new File(filesDir, \"subFiles_\" + (i+1));\n+            File subFile = new File(parent, \"subFiles_\" + (i+1));\n@@ -111,1 +109,1 @@\n-                                          File crntDir) throws Exception {\n+                                          File dir) throws Exception {\n@@ -116,1 +114,1 @@\n-                fileChooser.setCurrentDirectory(crntDir);\n+                fileChooser.setCurrentDirectory(dir);\n@@ -134,1 +132,1 @@\n-                                             File crntDir) throws Exception {\n+                                                 File dir) throws Exception {\n@@ -139,1 +137,1 @@\n-                fileChooser.setCurrentDirectory(crntDir);\n+                fileChooser.setCurrentDirectory(dir);\n@@ -151,1 +149,1 @@\n-                                               File crntDir) throws Exception {\n+                                                     File dir) throws Exception {\n@@ -156,1 +154,1 @@\n-                fileChooser.setCurrentDirectory(crntDir);\n+                fileChooser.setCurrentDirectory(dir);\n@@ -194,3 +192,3 @@\n-            frameLocation = fileChooser.getLocationOnScreen();\n-            frameWidth = frame.getWidth();\n-            frameHeight = frame.getHeight();\n+            Point fileChooserLocation = fileChooser.getLocationOnScreen();\n+            fileChooserLocation.y += frame.getHeight() \/ 3;\n+            clickLocation = new Point(fileChooserLocation);\n@@ -198,1 +196,1 @@\n-        clickMouse(frameLocation, 0, frameHeight, xOffset);\n+        clickMouse(clickLocation, xOffset);\n@@ -202,3 +200,2 @@\n-    private static void clickMouse(Point point, int width, int height,\n-                                   int xOffset) {\n-        robot.mouseMove(point.x + width\/2 + xOffset , point.y + height\/3);\n+    private static void clickMouse(Point point, int xOffset) {\n+        robot.mouseMove(point.x + xOffset , point.y);\n@@ -211,6 +208,8 @@\n-    private static void checkResult(UIManager.LookAndFeelInfo laf) {\n-        File files[] = fileChooser.getSelectedFiles();\n-        if (files.length == 0) {\n-            throw new RuntimeException(\"getSelectedFiles returned \" +\n-                    \"empty array for LAF: \" + laf.getClassName());\n-        }\n+    private static void checkResult(UIManager.LookAndFeelInfo laf) throws Exception {\n+        SwingUtilities.invokeAndWait(() -> {\n+            File files[] = fileChooser.getSelectedFiles();\n+            if (files.length == 0) {\n+                throw new RuntimeException(\"getSelectedFiles returned \" +\n+                        \"empty array for LAF: \" + laf.getClassName());\n+            }\n+        });\n","filename":"test\/jdk\/com\/sun\/java\/swing\/plaf\/gtk\/TestFileChooserSingleDirectorySelection.java","additions":27,"deletions":28,"binary":false,"changes":55,"status":"modified"}]}