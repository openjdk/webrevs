{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -241,0 +241,9 @@\n+        if (lh.getCheckIcon() != null && lh.useCheckAndArrow()) {\n+            Rectangle rect = lr.getArrowRect();\n+            if (menuItem.getComponentOrientation().isLeftToRight()) {\n+                rect.x += lh.getAfterCheckIconGap();\n+            } else {\n+                rect.x -= lh.getAfterCheckIconGap();\n+            }\n+            lr.setArrowRect(rect);\n+        }\n","filename":"src\/java.desktop\/windows\/classes\/com\/sun\/java\/swing\/plaf\/windows\/WindowsMenuItemUI.java","additions":10,"deletions":1,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -0,0 +1,92 @@\n+\/*\n+ * Copyright (c) 2026, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8374506\n+ * @summary Verify if arrow icon positioning is correct in\n+ *          parent JMenu in Windows L&F\n+ * @requires (os.family == \"windows\")\n+ * @library \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame\n+ * @run main\/manual LargeMenuTextArrowIconPosition\n+ *\/\n+\n+import java.awt.BorderLayout;\n+import javax.swing.JCheckBoxMenuItem;\n+import javax.swing.JFrame;\n+import javax.swing.JLabel;\n+import javax.swing.JMenu;\n+import javax.swing.JMenuItem;\n+import javax.swing.JPopupMenu;\n+import javax.swing.UIManager;\n+\n+public class LargeMenuTextArrowIconPosition {\n+\n+    private static final String INSTRUCTIONS = \"\"\"\n+        A frame will be shown with a label.\n+        Right click on the label.\n+\n+        Check the arrow icon at the end of\n+        \"Really long Menu-Text\" text.\n+        If it overlaps with the menu text,\n+        press Fail else press Pass.\"\"\";\n+\n+    public static void main(String[] args) throws Throwable {\n+        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());\n+\n+         PassFailJFrame.builder()\n+                .instructions(INSTRUCTIONS)\n+                .columns(40)\n+                .testUI(LargeMenuTextArrowIconPosition::createTestUI)\n+                .build()\n+                .awaitAndCheck();\n+    }\n+\n+    private static JFrame createTestUI() {\n+\n+        JFrame frame = new JFrame(\"LargeMenuTextArrowIcon\");\n+        frame.setSize(300, 150);\n+        frame.setLayout(new BorderLayout());\n+\n+        JPopupMenu popupMenu = new JPopupMenu();\n+        popupMenu.add(new JCheckBoxMenuItem(\"CheckBox On\", true));\n+        popupMenu.add(new JCheckBoxMenuItem(\"CheckBox Icon On\",\n+                          UIManager.getIcon(\"FileView.floppyDriveIcon\"), true));\n+        popupMenu.add(new JCheckBoxMenuItem(\"CheckBox Icon Off\",\n+                          UIManager.getIcon(\"FileView.floppyDriveIcon\"), false));\n+\n+        JMenu menu = new JMenu(\"Really long Menu-Text\");\n+        menu.add(new JMenuItem(\"Sub-MenuItem\"));\n+        menu.add(new JCheckBoxMenuItem(\"Sub-CheckBox On\", true));\n+\n+        popupMenu.add(menu);\n+\n+        JLabel lbl = new JLabel(\"Right click to invoke popupMenu\");\n+        lbl.setComponentPopupMenu(popupMenu);\n+        frame.add(lbl, BorderLayout.CENTER);\n+\n+        return frame;\n+    }\n+\n+}\n","filename":"test\/jdk\/javax\/swing\/JMenuItem\/LargeMenuTextArrowIconPosition.java","additions":92,"deletions":0,"binary":false,"changes":92,"status":"added"}]}