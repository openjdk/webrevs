{"files":[{"patch":"@@ -207,0 +207,5 @@\n+\n+  static bool supports_vector_different_use_def_size() {\n+    return false;\n+  }\n+\n","filename":"src\/hotspot\/cpu\/aarch64\/matcher_aarch64.hpp","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -196,0 +196,4 @@\n+  static bool supports_vector_different_use_def_size() {\n+    return false;\n+  }\n+\n","filename":"src\/hotspot\/cpu\/arm\/matcher_arm.hpp","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -206,0 +206,4 @@\n+  static bool supports_vector_different_use_def_size() {\n+    return false;\n+  }\n+\n","filename":"src\/hotspot\/cpu\/ppc\/matcher_ppc.hpp","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -202,0 +202,4 @@\n+  static bool supports_vector_different_use_def_size() {\n+    return true;\n+  }\n+\n","filename":"src\/hotspot\/cpu\/riscv\/matcher_riscv.hpp","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -199,0 +199,4 @@\n+  static bool supports_vector_different_use_def_size() {\n+    return false;\n+  }\n+\n","filename":"src\/hotspot\/cpu\/s390\/matcher_s390.hpp","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -239,0 +239,4 @@\n+  static bool supports_vector_different_use_def_size() {\n+    return false;\n+  }\n+\n","filename":"src\/hotspot\/cpu\/x86\/matcher_x86.hpp","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2309,2 +2309,11 @@\n-  \/\/ Default case: input size of use equals output size of def.\n-  return type2aelembytes(use_bt) == type2aelembytes(def_bt);\n+  \/\/ Input size of use equals output size of def\n+  if (type2aelembytes(use_bt) == type2aelembytes(def_bt)) {\n+    return true;\n+  }\n+\n+  \/\/ Allow CMove to have different type for comparision and moving.\n+  if (Matcher::supports_vector_different_use_def_size() && use->is_CMove() && def->is_Bool()) {\n+    return true;\n+  }\n+\n+  return false;\n","filename":"src\/hotspot\/share\/opto\/superword.cpp","additions":11,"deletions":2,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -2323,0 +2323,1 @@\n+\n","filename":"src\/hotspot\/share\/opto\/vectornode.cpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -1476,1 +1476,9 @@\n-    @IR(failOn = {IRNode.STORE_VECTOR})\n+    @IR(counts = {IRNode.LOAD_VECTOR_I,     IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.LOAD_VECTOR_D,     IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.VECTOR_MASK_CMP_I, IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.VECTOR_BLEND_D,    IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.STORE_VECTOR, \">0\"},\n+        applyIfCPUFeatureOr = {\"rvv\", \"true\"},\n+        applyIf = {\"UseVectorCmov\", \"true\"})\n+    @IR(failOn = {IRNode.STORE_VECTOR},\n+        applyIf = {\"UseVectorCmov\", \"false\"})\n@@ -1490,1 +1498,9 @@\n-    @IR(failOn = {IRNode.STORE_VECTOR})\n+    @IR(counts = {IRNode.LOAD_VECTOR_I,     IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.LOAD_VECTOR_D,     IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.VECTOR_MASK_CMP_I, IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.VECTOR_BLEND_D,    IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.STORE_VECTOR, \">0\"},\n+        applyIfCPUFeatureOr = {\"rvv\", \"true\"},\n+        applyIf = {\"UseVectorCmov\", \"true\"})\n+    @IR(failOn = {IRNode.STORE_VECTOR},\n+        applyIf = {\"UseVectorCmov\", \"false\"})\n@@ -1504,1 +1520,9 @@\n-    @IR(failOn = {IRNode.STORE_VECTOR})\n+    @IR(counts = {IRNode.LOAD_VECTOR_I,     IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.LOAD_VECTOR_D,     IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.VECTOR_MASK_CMP_I, IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.VECTOR_BLEND_D,    IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.STORE_VECTOR, \">0\"},\n+        applyIfCPUFeatureOr = {\"rvv\", \"true\"},\n+        applyIf = {\"UseVectorCmov\", \"true\"})\n+    @IR(failOn = {IRNode.STORE_VECTOR},\n+        applyIf = {\"UseVectorCmov\", \"false\"})\n@@ -1518,1 +1542,9 @@\n-    @IR(failOn = {IRNode.STORE_VECTOR})\n+    @IR(counts = {IRNode.LOAD_VECTOR_I,     IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.LOAD_VECTOR_D,     IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.VECTOR_MASK_CMP_I, IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.VECTOR_BLEND_D,    IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.STORE_VECTOR, \">0\"},\n+        applyIfCPUFeatureOr = {\"rvv\", \"true\"},\n+        applyIf = {\"UseVectorCmov\", \"true\"})\n+    @IR(failOn = {IRNode.STORE_VECTOR},\n+        applyIf = {\"UseVectorCmov\", \"false\"})\n@@ -1532,1 +1564,9 @@\n-    @IR(failOn = {IRNode.STORE_VECTOR})\n+    @IR(counts = {IRNode.LOAD_VECTOR_I,     IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.LOAD_VECTOR_D,     IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.VECTOR_MASK_CMP_I, IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.VECTOR_BLEND_D,    IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.STORE_VECTOR, \">0\"},\n+        applyIfCPUFeatureOr = {\"rvv\", \"true\"},\n+        applyIf = {\"UseVectorCmov\", \"true\"})\n+    @IR(failOn = {IRNode.STORE_VECTOR},\n+        applyIf = {\"UseVectorCmov\", \"false\"})\n@@ -1546,1 +1586,9 @@\n-    @IR(failOn = {IRNode.STORE_VECTOR})\n+    @IR(counts = {IRNode.LOAD_VECTOR_I,     IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.LOAD_VECTOR_D,     IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.VECTOR_MASK_CMP_I, IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.VECTOR_BLEND_D,    IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.STORE_VECTOR, \">0\"},\n+        applyIfCPUFeatureOr = {\"rvv\", \"true\"},\n+        applyIf = {\"UseVectorCmov\", \"true\"})\n+    @IR(failOn = {IRNode.STORE_VECTOR},\n+        applyIf = {\"UseVectorCmov\", \"false\"})\n@@ -1731,1 +1779,9 @@\n-    @IR(failOn = {IRNode.STORE_VECTOR})\n+    @IR(counts = {IRNode.LOAD_VECTOR_L,     IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.LOAD_VECTOR_F,     IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.VECTOR_MASK_CMP_L, IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.VECTOR_BLEND_F,    IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.STORE_VECTOR, \">0\"},\n+        applyIfCPUFeatureOr = {\"rvv\", \"true\"},\n+        applyIf = {\"UseVectorCmov\", \"true\"})\n+    @IR(failOn = {IRNode.STORE_VECTOR},\n+        applyIf = {\"UseVectorCmov\", \"false\"})\n@@ -1745,1 +1801,9 @@\n-    @IR(failOn = {IRNode.STORE_VECTOR})\n+    @IR(counts = {IRNode.LOAD_VECTOR_L,     IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.LOAD_VECTOR_F,     IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.VECTOR_MASK_CMP_L, IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.VECTOR_BLEND_F,    IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.STORE_VECTOR, \">0\"},\n+        applyIfCPUFeatureOr = {\"rvv\", \"true\"},\n+        applyIf = {\"UseVectorCmov\", \"true\"})\n+    @IR(failOn = {IRNode.STORE_VECTOR},\n+        applyIf = {\"UseVectorCmov\", \"false\"})\n@@ -1759,1 +1823,9 @@\n-    @IR(failOn = {IRNode.STORE_VECTOR})\n+    @IR(counts = {IRNode.LOAD_VECTOR_L,     IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.LOAD_VECTOR_F,     IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.VECTOR_MASK_CMP_L, IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.VECTOR_BLEND_F,    IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.STORE_VECTOR, \">0\"},\n+        applyIfCPUFeatureOr = {\"rvv\", \"true\"},\n+        applyIf = {\"UseVectorCmov\", \"true\"})\n+    @IR(failOn = {IRNode.STORE_VECTOR},\n+        applyIf = {\"UseVectorCmov\", \"false\"})\n@@ -1773,1 +1845,9 @@\n-    @IR(failOn = {IRNode.STORE_VECTOR})\n+    @IR(counts = {IRNode.LOAD_VECTOR_L,     IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.LOAD_VECTOR_F,     IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.VECTOR_MASK_CMP_L, IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.VECTOR_BLEND_F,    IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.STORE_VECTOR, \">0\"},\n+        applyIfCPUFeatureOr = {\"rvv\", \"true\"},\n+        applyIf = {\"UseVectorCmov\", \"true\"})\n+    @IR(failOn = {IRNode.STORE_VECTOR},\n+        applyIf = {\"UseVectorCmov\", \"false\"})\n@@ -1787,1 +1867,9 @@\n-    @IR(failOn = {IRNode.STORE_VECTOR})\n+    @IR(counts = {IRNode.LOAD_VECTOR_L,     IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.LOAD_VECTOR_F,     IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.VECTOR_MASK_CMP_L, IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.VECTOR_BLEND_F,    IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.STORE_VECTOR, \">0\"},\n+        applyIfCPUFeatureOr = {\"rvv\", \"true\"},\n+        applyIf = {\"UseVectorCmov\", \"true\"})\n+    @IR(failOn = {IRNode.STORE_VECTOR},\n+        applyIf = {\"UseVectorCmov\", \"false\"})\n@@ -1801,1 +1889,9 @@\n-    @IR(failOn = {IRNode.STORE_VECTOR})\n+    @IR(counts = {IRNode.LOAD_VECTOR_L,     IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.LOAD_VECTOR_F,     IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.VECTOR_MASK_CMP_L, IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.VECTOR_BLEND_F,    IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.STORE_VECTOR, \">0\"},\n+        applyIfCPUFeatureOr = {\"rvv\", \"true\"},\n+        applyIf = {\"UseVectorCmov\", \"true\"})\n+    @IR(failOn = {IRNode.STORE_VECTOR},\n+        applyIf = {\"UseVectorCmov\", \"false\"})\n@@ -2259,1 +2355,9 @@\n-    @IR(failOn = {IRNode.STORE_VECTOR})\n+    @IR(counts = {IRNode.LOAD_VECTOR_I,     IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.LOAD_VECTOR_D,     IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.VECTOR_MASK_CMP_I, IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.VECTOR_BLEND_D,    IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.STORE_VECTOR, \">0\"},\n+        applyIfCPUFeatureOr = {\"rvv\", \"true\"},\n+        applyIf = {\"UseVectorCmov\", \"true\"})\n+    @IR(failOn = {IRNode.STORE_VECTOR},\n+        applyIf = {\"UseVectorCmov\", \"false\"})\n@@ -2273,1 +2377,9 @@\n-    @IR(failOn = {IRNode.STORE_VECTOR})\n+    @IR(counts = {IRNode.LOAD_VECTOR_I,     IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.LOAD_VECTOR_D,     IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.VECTOR_MASK_CMP_I, IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.VECTOR_BLEND_D,    IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.STORE_VECTOR, \">0\"},\n+        applyIfCPUFeatureOr = {\"rvv\", \"true\"},\n+        applyIf = {\"UseVectorCmov\", \"true\"})\n+    @IR(failOn = {IRNode.STORE_VECTOR},\n+        applyIf = {\"UseVectorCmov\", \"false\"})\n@@ -2287,1 +2399,9 @@\n-    @IR(failOn = {IRNode.STORE_VECTOR})\n+    @IR(counts = {IRNode.LOAD_VECTOR_I,     IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.LOAD_VECTOR_D,     IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.VECTOR_MASK_CMP_I, IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.VECTOR_BLEND_D,    IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.STORE_VECTOR, \">0\"},\n+        applyIfCPUFeatureOr = {\"rvv\", \"true\"},\n+        applyIf = {\"UseVectorCmov\", \"true\"})\n+    @IR(failOn = {IRNode.STORE_VECTOR},\n+        applyIf = {\"UseVectorCmov\", \"false\"})\n@@ -2301,1 +2421,9 @@\n-    @IR(failOn = {IRNode.STORE_VECTOR})\n+    @IR(counts = {IRNode.LOAD_VECTOR_I,     IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.LOAD_VECTOR_D,     IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.VECTOR_MASK_CMP_I, IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.VECTOR_BLEND_D,    IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.STORE_VECTOR, \">0\"},\n+        applyIfCPUFeatureOr = {\"rvv\", \"true\"},\n+        applyIf = {\"UseVectorCmov\", \"true\"})\n+    @IR(failOn = {IRNode.STORE_VECTOR},\n+        applyIf = {\"UseVectorCmov\", \"false\"})\n@@ -2315,1 +2443,9 @@\n-    @IR(failOn = {IRNode.STORE_VECTOR})\n+    @IR(counts = {IRNode.LOAD_VECTOR_I,     IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.LOAD_VECTOR_D,     IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.VECTOR_MASK_CMP_I, IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.VECTOR_BLEND_D,    IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.STORE_VECTOR, \">0\"},\n+        applyIfCPUFeatureOr = {\"rvv\", \"true\"},\n+        applyIf = {\"UseVectorCmov\", \"true\"})\n+    @IR(failOn = {IRNode.STORE_VECTOR},\n+        applyIf = {\"UseVectorCmov\", \"false\"})\n@@ -2329,1 +2465,9 @@\n-    @IR(failOn = {IRNode.STORE_VECTOR})\n+    @IR(counts = {IRNode.LOAD_VECTOR_I,     IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.LOAD_VECTOR_D,     IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.VECTOR_MASK_CMP_I, IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.VECTOR_BLEND_D,    IRNode.VECTOR_SIZE + \"min(max_int, max_double)\", \">0\",\n+                  IRNode.STORE_VECTOR, \">0\"},\n+        applyIfCPUFeatureOr = {\"rvv\", \"true\"},\n+        applyIf = {\"UseVectorCmov\", \"true\"})\n+    @IR(failOn = {IRNode.STORE_VECTOR},\n+        applyIf = {\"UseVectorCmov\", \"false\"})\n@@ -2514,1 +2658,9 @@\n-    @IR(failOn = {IRNode.STORE_VECTOR})\n+    @IR(counts = {IRNode.LOAD_VECTOR_L,     IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.LOAD_VECTOR_F,     IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.VECTOR_MASK_CMP_L, IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.VECTOR_BLEND_F,    IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.STORE_VECTOR, \">0\"},\n+        applyIfCPUFeatureOr = {\"rvv\", \"true\"},\n+        applyIf = {\"UseVectorCmov\", \"true\"})\n+    @IR(failOn = {IRNode.STORE_VECTOR},\n+        applyIf = {\"UseVectorCmov\", \"false\"})\n@@ -2528,1 +2680,9 @@\n-    @IR(failOn = {IRNode.STORE_VECTOR})\n+    @IR(counts = {IRNode.LOAD_VECTOR_L,     IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.LOAD_VECTOR_F,     IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.VECTOR_MASK_CMP_L, IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.VECTOR_BLEND_F,    IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.STORE_VECTOR, \">0\"},\n+        applyIfCPUFeatureOr = {\"rvv\", \"true\"},\n+        applyIf = {\"UseVectorCmov\", \"true\"})\n+    @IR(failOn = {IRNode.STORE_VECTOR},\n+        applyIf = {\"UseVectorCmov\", \"false\"})\n@@ -2542,1 +2702,9 @@\n-    @IR(failOn = {IRNode.STORE_VECTOR})\n+    @IR(counts = {IRNode.LOAD_VECTOR_L,     IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.LOAD_VECTOR_F,     IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.VECTOR_MASK_CMP_L, IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.VECTOR_BLEND_F,    IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.STORE_VECTOR, \">0\"},\n+        applyIfCPUFeatureOr = {\"rvv\", \"true\"},\n+        applyIf = {\"UseVectorCmov\", \"true\"})\n+    @IR(failOn = {IRNode.STORE_VECTOR},\n+        applyIf = {\"UseVectorCmov\", \"false\"})\n@@ -2556,1 +2724,9 @@\n-    @IR(failOn = {IRNode.STORE_VECTOR})\n+    @IR(counts = {IRNode.LOAD_VECTOR_L,     IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.LOAD_VECTOR_F,     IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.VECTOR_MASK_CMP_L, IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.VECTOR_BLEND_F,    IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.STORE_VECTOR, \">0\"},\n+        applyIfCPUFeatureOr = {\"rvv\", \"true\"},\n+        applyIf = {\"UseVectorCmov\", \"true\"})\n+    @IR(failOn = {IRNode.STORE_VECTOR},\n+        applyIf = {\"UseVectorCmov\", \"false\"})\n@@ -2570,1 +2746,9 @@\n-    @IR(failOn = {IRNode.STORE_VECTOR})\n+    @IR(counts = {IRNode.LOAD_VECTOR_L,     IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.LOAD_VECTOR_F,     IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.VECTOR_MASK_CMP_L, IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.VECTOR_BLEND_F,    IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.STORE_VECTOR, \">0\"},\n+        applyIfCPUFeatureOr = {\"rvv\", \"true\"},\n+        applyIf = {\"UseVectorCmov\", \"true\"})\n+    @IR(failOn = {IRNode.STORE_VECTOR},\n+        applyIf = {\"UseVectorCmov\", \"false\"})\n@@ -2584,1 +2768,9 @@\n-    @IR(failOn = {IRNode.STORE_VECTOR})\n+    @IR(counts = {IRNode.LOAD_VECTOR_L,     IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.LOAD_VECTOR_F,     IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.VECTOR_MASK_CMP_L, IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.VECTOR_BLEND_F,    IRNode.VECTOR_SIZE + \"min(max_long, max_float)\", \">0\",\n+                  IRNode.STORE_VECTOR, \">0\"},\n+        applyIfCPUFeatureOr = {\"rvv\", \"true\"},\n+        applyIf = {\"UseVectorCmov\", \"true\"})\n+    @IR(failOn = {IRNode.STORE_VECTOR},\n+        applyIf = {\"UseVectorCmov\", \"false\"})\n@@ -2786,1 +2978,9 @@\n-    @IR(failOn = {IRNode.STORE_VECTOR})\n+    @IR(counts = {IRNode.LOAD_VECTOR_D,     IRNode.VECTOR_SIZE + \"min(max_double, max_float)\", \">0\",\n+                  IRNode.LOAD_VECTOR_F,     IRNode.VECTOR_SIZE + \"min(max_double, max_float)\", \">0\",\n+                  IRNode.VECTOR_MASK_CMP_F, IRNode.VECTOR_SIZE + \"min(max_double, max_float)\", \">0\",\n+                  IRNode.VECTOR_BLEND_D,    IRNode.VECTOR_SIZE + \"min(max_double, max_float)\", \">0\",\n+                  IRNode.STORE_VECTOR, \">0\"},\n+        applyIfCPUFeatureOr = {\"rvv\", \"true\"},\n+        applyIf = {\"UseVectorCmov\", \"true\"})\n+    @IR(failOn = {IRNode.STORE_VECTOR},\n+        applyIf = {\"UseVectorCmov\", \"false\"})\n@@ -2828,1 +3028,9 @@\n-    @IR(failOn = {IRNode.STORE_VECTOR})\n+    @IR(counts = {IRNode.LOAD_VECTOR_D,     IRNode.VECTOR_SIZE + \"min(max_double, max_float)\", \">0\",\n+                  IRNode.LOAD_VECTOR_F,     IRNode.VECTOR_SIZE + \"min(max_double, max_float)\", \">0\",\n+                  IRNode.VECTOR_MASK_CMP_D, IRNode.VECTOR_SIZE + \"min(max_double, max_float)\", \">0\",\n+                  IRNode.VECTOR_BLEND_F,    IRNode.VECTOR_SIZE + \"min(max_double, max_float)\", \">0\",\n+                  IRNode.STORE_VECTOR, \">0\"},\n+        applyIfCPUFeatureOr = {\"rvv\", \"true\"},\n+        applyIf = {\"UseVectorCmov\", \"true\"})\n+    @IR(failOn = {IRNode.STORE_VECTOR},\n+        applyIf = {\"UseVectorCmov\", \"false\"})\n","filename":"test\/hotspot\/jtreg\/compiler\/c2\/irTests\/TestConditionalMove.java","additions":234,"deletions":26,"binary":false,"changes":260,"status":"modified"}]}