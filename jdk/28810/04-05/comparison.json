{"files":[{"patch":"@@ -947,3 +947,1 @@\n-\n-  ShenandoahReferenceProcessor* old_ref_processor = generation->ref_processor()->get_old_generation_ref_processor();\n-  if (old_ref_processor != nullptr) {\n+  if (is_concurrent_old_mark_in_progress()) {\n@@ -952,1 +950,2 @@\n-    assert(generation->is_young(), \"We should only have old discovered lists in a young collection\");\n+    ShenandoahReferenceProcessor* old_ref_processor = old_generation()->ref_processor();\n+    assert(old_ref_processor != nullptr, \"Must have old ref processor if old marking is in progress\");\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahGenerationalHeap.cpp","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -314,0 +314,3 @@\n+  if (_old_generation_ref_processor != nullptr) {\n+    _old_generation_ref_processor->set_mark_closure(worker_id, mark_closure);\n+  }\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahReferenceProcessor.cpp","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"}]}