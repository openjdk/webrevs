{"files":[{"patch":"@@ -551,3 +551,10 @@\n-  for (int i = 0; i < 16; ++i) {\n-    const int64_t* xmm_val_addr = (int64_t*)&(uc->uc_mcontext.fpregs->_xmm[i]);\n-    st->print_cr(\"XMM[%d]=\" INTPTR_FORMAT \" \" INTPTR_FORMAT, i, xmm_val_addr[1], xmm_val_addr[0]);\n+  size_t fpregs_offset = pointer_delta(uc->uc_mcontext.fpregs, uc, 1);\n+  if (fpregs_offset > sizeof(ucontext_t)) {\n+    st->print_cr(\"bad uc->uc_mcontext.fpregs: \" INTPTR_FORMAT \" (uc: \" INTPTR_FORMAT \")\",\n+                 p2i(uc->uc_mcontext.fpregs), p2i(uc));\n+  } else {\n+    for (int i = 0; i < 16; ++i) {\n+      const int64_t* xmm_val_addr = (int64_t*)&(uc->uc_mcontext.fpregs->_xmm[i]);\n+      st->print_cr(\"XMM[%d]=\" INTPTR_FORMAT \" \" INTPTR_FORMAT, i, xmm_val_addr[1], xmm_val_addr[0]);\n+    }\n+    st->print(\"  MXCSR=\" UINT32_FORMAT_X_0, uc->uc_mcontext.fpregs->mxcsr);\n@@ -555,1 +562,0 @@\n-  st->print(\"  MXCSR=\" UINT32_FORMAT_X_0, uc->uc_mcontext.fpregs->mxcsr);\n","filename":"src\/hotspot\/os_cpu\/linux_x86\/os_linux_x86.cpp","additions":10,"deletions":4,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -735,1 +735,1 @@\n-  intptr_t fpregs_offset = (address)(void*)(((const ucontext_t*)context)->uc_mcontext.fpregs) - (address)context;\n+  size_t fpregs_offset = pointer_delta(((const ucontext_t*)context)->uc_mcontext.fpregs, context, 1);\n","filename":"src\/hotspot\/share\/utilities\/debug.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}