{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -75,5 +75,4 @@\n-        return switch (parent) {\n-            case BlockCodeBuilderImpl b -> b.topLocal;\n-            case ChainedCodeBuilder b -> b.terminal.curTopLocal();\n-            case TerminalCodeBuilder b -> b.curTopLocal();\n-        };\n+        if (parent instanceof BlockCodeBuilderImpl bcb) {\n+            return bcb.topLocal;\n+        }\n+        return findTerminal(parent).curTopLocal();\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/classfile\/impl\/BlockCodeBuilderImpl.java","additions":5,"deletions":6,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -42,4 +42,2 @@\n-        this.terminal = switch (downstream) {\n-            case ChainedClassBuilder cb -> cb.terminal;\n-            case DirectClassBuilder db -> db;\n-        };\n+        this.terminal = downstream instanceof ChainedClassBuilder ccb ?\n+                ccb.terminal : (DirectClassBuilder) downstream;\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/classfile\/impl\/ChainedClassBuilder.java","additions":3,"deletions":5,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -41,4 +41,2 @@\n-        this.terminal = switch (downstream) {\n-            case ChainedFieldBuilder cb -> cb.terminal;\n-            case TerminalFieldBuilder tb -> tb;\n-        };\n+        this.terminal = downstream instanceof ChainedFieldBuilder cfb ?\n+                cfb.terminal : (TerminalFieldBuilder) downstream;\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/classfile\/impl\/ChainedFieldBuilder.java","additions":3,"deletions":5,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -44,4 +44,2 @@\n-        this.terminal = switch (downstream) {\n-            case ChainedMethodBuilder cb -> cb.terminal;\n-            case TerminalMethodBuilder tb -> tb;\n-        };\n+        this.terminal = downstream instanceof ChainedMethodBuilder cmb ?\n+                cmb.terminal : (TerminalMethodBuilder) downstream;\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/classfile\/impl\/ChainedMethodBuilder.java","additions":3,"deletions":5,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -267,4 +267,5 @@\n-                    switch (i) {\n-                        case BranchInstruction br -> br.target();\n-                        case DiscontinuedInstruction.JsrInstruction jsr -> jsr.target();\n-                        case LookupSwitchInstruction ls -> {\n+                    switch (i.opcode().kind()) {\n+                        case BRANCH -> ((BranchInstruction) i).target();\n+                        case DISCONTINUED_JSR -> ((DiscontinuedInstruction.JsrInstruction) i).target();\n+                        case LOOKUP_SWITCH -> {\n+                            var ls = (LookupSwitchInstruction) i;\n@@ -274,1 +275,2 @@\n-                        case TableSwitchInstruction ts -> {\n+                        case TABLE_SWITCH -> {\n+                            var ts = (TableSwitchInstruction) i;\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/classfile\/impl\/CodeImpl.java","additions":7,"deletions":5,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -38,4 +38,6 @@\n-        this.terminal = switch (parent) {\n-            case NonterminalCodeBuilder cb -> cb.terminal;\n-            case TerminalCodeBuilder cb -> cb;\n-        };\n+        this.terminal = findTerminal(parent);\n+    }\n+\n+    static TerminalCodeBuilder findTerminal(CodeBuilder cob) {\n+        return cob instanceof NonterminalCodeBuilder ncb ?\n+                ncb.terminal : (TerminalCodeBuilder) cob;\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/classfile\/impl\/NonterminalCodeBuilder.java","additions":7,"deletions":5,"binary":false,"changes":12,"status":"modified"}]}