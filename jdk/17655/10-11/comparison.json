{"files":[{"patch":"@@ -1270,1 +1270,1 @@\n-        if (!dbg_is_good_oop_detailed((oopDesc*) x)) {\n+        if (!dbg_is_good_oop((oopDesc*) x)) {\n","filename":"src\/hotspot\/share\/services\/diagnosticCommand.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -676,5 +676,0 @@\n-  return dbg_is_safe(o, -1) && dbg_is_safe(o->klass(), -1) && oopDesc::is_oop(o) && o->klass()->is_klass();\n-}\n-\n-\/\/ Additional \"good oop\" checks, separate method to not disturb existing asserts.\n-extern \"C\" bool dbg_is_good_oop_detailed(oopDesc* o) {\n@@ -682,2 +677,1 @@\n-              && *(uintptr_t*) o != 0\n-              && *((uintptr_t*) o + (sizeof(uintptr_t))) != 0;\n+              && *(uintptr_t*) o != 0;\n@@ -685,0 +679,5 @@\n+  if (good) {\n+    \/\/ Check Klass ptr or narrowKlass ptr is not null.\n+    \/\/ No accessor for private o._metadata\n+    good = (*((uintptr_t*) ((uintptr_t) o + sizeof(uintptr_t))) != 0);\n+  }\n@@ -687,2 +686,1 @@\n-      good = dbg_is_safe(o->klass(), -1)\n-             && o->klass()->is_klass();\n+      good = dbg_is_safe(o->klass(), -1);\n@@ -698,1 +696,2 @@\n-    good = good && oopDesc::is_oop(o);\n+    good = good && oopDesc::is_oop(o)\n+           && o->klass()->is_klass();\n","filename":"src\/hotspot\/share\/utilities\/debug.cpp","additions":9,"deletions":10,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -296,1 +296,0 @@\n-extern \"C\" bool dbg_is_good_oop_detailed(oopDesc* o);\n","filename":"src\/hotspot\/share\/utilities\/debug.hpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"}]}