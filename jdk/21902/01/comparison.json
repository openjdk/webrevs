{"files":[{"patch":"@@ -27,0 +27,1 @@\n+#include \"interpreter\/bytecodes.hpp\"\n@@ -219,0 +220,19 @@\n+static inline bool is_invoke_bytecode(const Method* sender, int bci) {\n+  assert(sender != nullptr, \"invariant\");\n+  assert(sender->validate_bci(bci) >= 0, \"invariant\");\n+  const Bytecodes::Code bc = (Bytecodes::Code)*sender->bcp_from(bci);\n+  switch (bc) {\n+    case Bytecodes::_invokevirtual:\n+    case Bytecodes::_invokestatic:\n+    case Bytecodes::_invokeinterface:\n+    case Bytecodes::_invokespecial:\n+    case Bytecodes::_invokedynamic: {\n+      return true;\n+    }\n+    default: {\n+      return false;\n+    }\n+  }\n+  return false;\n+}\n+\n@@ -227,3 +247,5 @@\n-  if (JfrMethodData::mark_deprecated_call_site(sender, bci, jt)) {\n-    if (should_record(method, sender, jt)) {\n-      create_edge(method, sender, bci, frame_type, jt);\n+  if (should_record(method, sender, jt)) {\n+    if (is_invoke_bytecode(sender, bci)) {\n+      if (!JfrMethodData::mark_deprecated_call_site(sender, bci, jt)) {\n+        return;\n+      }\n@@ -231,0 +253,1 @@\n+    create_edge(method, sender, bci, frame_type, jt);\n","filename":"src\/hotspot\/share\/jfr\/support\/jfrDeprecationManager.cpp","additions":26,"deletions":3,"binary":false,"changes":29,"status":"modified"}]}