{"files":[{"patch":"@@ -85,4 +85,5 @@\n-      (thread->is_exiting() || thread->is_attaching_via_jni())) {\n-    \/\/ Don't add a JvmtiThreadState to a thread that is exiting or is attaching.\n-    \/\/ When a thread is attaching, it may not have a Java level thread object\n-    \/\/ created yet.\n+      (thread->is_exiting() ||\n+       (thread->threadObj() == nullptr && thread->is_attaching_via_jni())\n+      )) {\n+    \/\/ Don't add a JvmtiThreadState to a thread that is exiting, or is attaching\n+    \/\/ and does not yet have a Java level thread object allocated.\n","filename":"src\/hotspot\/share\/prims\/jvmtiThreadState.inline.hpp","additions":5,"deletions":4,"binary":false,"changes":9,"status":"modified"}]}