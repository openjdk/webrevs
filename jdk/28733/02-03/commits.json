[{"commit":{"message":"Rework JPackageCommand#withToolProvider() to run workload in a new native thread instead of a virtual thread from a pool. Pooled and\/or virtual threads are problematic when used with inheritable thread-local variables. TKit class depends on such a variable, which results in intermittent test failure:\n\njava.util.concurrent.CompletionException: java.lang.NullPointerException: Cannot invoke \"jdk.jpackage.test.TestInstance.workDir()\" because the return value of \"jdk.jpackage.test.TKit.currentTest()\" is null\n\tat java.base\/java.util.concurrent.CompletableFuture.wrapInCompletionException(CompletableFuture.java:323)\n\tat java.base\/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:359)\n\tat java.base\/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:364)\n\tat java.base\/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1828)\n\tat java.base\/java.util.concurrent.CompletableFuture$AsyncRun.exec(CompletableFuture.java:1817)\n\tat java.base\/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:511)\n\tat java.base\/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1436)\n\tat java.base\/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:2011)\n\tat java.base\/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:187)\nCaused by: java.lang.NullPointerException: Cannot invoke \"jdk.jpackage.test.TestInstance.workDir()\" because the return value of \"jdk.jpackage.test.TKit.currentTest()\" is null\n\tat jdk.jpackage.test.TKit.workDir(TKit.java:244)\n\tat jdk.jpackage.test.JPackageCommand.setDefaultInputOutput(JPackageCommand.java:280)\n\tat jdk.jpackage.test.JPackageCommand.helloAppImage(JPackageCommand.java:384)\n\tat jdk.jpackage.test.JPackageCommand.helloAppImage(JPackageCommand.java:361)\n\tat jdk.jpackage\/jdk.jpackage.internal.cli.MainTest.lambda$testFailedCommandOutput$2(MainTest.java:123)\n\tat jdk.jpackage.test.JPackageCommand.lambda$withToolProvider$0(JPackageCommand.java:805)\n\tat java.base\/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1825)\n\t... 5 more"},"files":[{"filename":"test\/jdk\/tools\/jpackage\/helpers\/jdk\/jpackage\/test\/JPackageCommand.java"}],"sha":"538ed98951290f71d54c27038421848989ddef8b"}]