{"files":[{"patch":"@@ -47,0 +47,1 @@\n+import java.io.BufferedReader;\n@@ -48,0 +49,1 @@\n+import java.io.InputStreamReader;\n@@ -110,2 +112,2 @@\n-            \/\/ system storing the birth time. The tmpfs\/nfs etc. file system type does not store\n-            \/\/ the birth time.\n+            \/\/ system storing the birth time. The tmpfs\/nfs\/ext3 etc. file system type does not store\n+            \/\/ the birth time, that depends the linux kernel version.\n@@ -113,3 +115,1 @@\n-            if (statxIsPresent &&\n-                    !Files.getFileStore(file).type().contentEquals(\"tmpfs\") &&\n-                    !Files.getFileStore(file).type().contains(\"nfs\")) {\n+            if (statxIsPresent && supportBirthTimeOnLinux(file)) {\n@@ -151,0 +151,18 @@\n+    \/**\n+     * read the output of linux command `stat -c \"%w\" file`, if the output is \"-\",\n+     * then the file system doesn't support birth time\n+     *\/\n+    public static boolean supportBirthTimeOnLinux(Path file) {\n+        try {\n+            String filePath = file.toAbsolutePath().toString();\n+            ProcessBuilder pb = new ProcessBuilder(\"stat\", \"-c\", \"%w\", filePath);\n+            pb.redirectErrorStream(true);\n+            Process p = pb.start();\n+            BufferedReader b = new BufferedReader(new InputStreamReader(p.getInputStream()));\n+            String l = b.readLine();\n+            if (l != null && l.equals(\"-\")) { return false; }\n+        } catch(Exception e) {\n+        }\n+        return true;\n+    }\n+\n","filename":"test\/jdk\/java\/nio\/file\/attribute\/BasicFileAttributeView\/CreationTime.java","additions":23,"deletions":5,"binary":false,"changes":28,"status":"modified"}]}