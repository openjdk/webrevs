{"files":[{"patch":"@@ -366,9 +366,3 @@\n-        if (COMPACT_STRINGS) {\n-            byte[] buf = new byte[chars];\n-            formatUnsignedInt(val, shift, buf, chars);\n-            return new String(buf, LATIN1);\n-        } else {\n-            byte[] buf = new byte[chars * 2];\n-            formatUnsignedIntUTF16(val, shift, buf, chars);\n-            return new String(buf, UTF16);\n-        }\n+        byte[] buf = new byte[chars];\n+        formatUnsignedInt(val, shift, buf, chars);\n+        return String.newStringWithLatin1Bytes(buf);\n@@ -397,20 +391,0 @@\n-    \/**\n-     * Format an {@code int} (treated as unsigned) into a byte buffer (UTF16 version). If\n-     * {@code len} exceeds the formatted ASCII representation of {@code val},\n-     * {@code buf} will be padded with leading zeroes.\n-     *\n-     * @param val the unsigned int to format\n-     * @param shift the log2 of the base to format in (4 for hex, 3 for octal, 1 for binary)\n-     * @param buf the byte buffer to write to\n-     * @param len the number of characters to write\n-     *\/\n-    private static void formatUnsignedIntUTF16(int val, int shift, byte[] buf, int len) {\n-        int charPos = len;\n-        int radix = 1 << shift;\n-        int mask = radix - 1;\n-        do {\n-            StringUTF16.putChar(buf, --charPos, Integer.digits[val & mask]);\n-            val >>>= shift;\n-        } while (charPos > 0);\n-    }\n-\n@@ -430,9 +404,3 @@\n-        if (COMPACT_STRINGS) {\n-            byte[] buf = new byte[size];\n-            DecimalDigits.uncheckedGetCharsLatin1(i, size, buf);\n-            return new String(buf, LATIN1);\n-        } else {\n-            byte[] buf = new byte[size * 2];\n-            DecimalDigits.uncheckedGetCharsUTF16(i, size, buf);\n-            return new String(buf, UTF16);\n-        }\n+        byte[] buf = new byte[size];\n+        DecimalDigits.uncheckedGetCharsLatin1(i, size, buf);\n+        return String.newStringWithLatin1Bytes(buf);\n","filename":"src\/java.base\/share\/classes\/java\/lang\/Integer.java","additions":6,"deletions":38,"binary":false,"changes":44,"status":"modified"},{"patch":"@@ -394,9 +394,3 @@\n-        if (COMPACT_STRINGS) {\n-            byte[] buf = new byte[chars];\n-            formatUnsignedLong0(val, shift, buf, 0, chars);\n-            return new String(buf, LATIN1);\n-        } else {\n-            byte[] buf = new byte[chars * 2];\n-            formatUnsignedLong0UTF16(val, shift, buf, 0, chars);\n-            return new String(buf, UTF16);\n-        }\n+        byte[] buf = new byte[chars];\n+        formatUnsignedLong0(val, shift, buf, 0, chars);\n+        return String.newStringWithLatin1Bytes(buf);\n@@ -426,21 +420,0 @@\n-    \/**\n-     * Format a long (treated as unsigned) into a byte buffer (UTF16 version). If\n-     * {@code len} exceeds the formatted ASCII representation of {@code val},\n-     * {@code buf} will be padded with leading zeroes.\n-     *\n-     * @param val the unsigned long to format\n-     * @param shift the log2 of the base to format in (4 for hex, 3 for octal, 1 for binary)\n-     * @param buf the byte buffer to write to\n-     * @param offset the offset in the destination buffer to start at\n-     * @param len the number of characters to write\n-     *\/\n-    private static void formatUnsignedLong0UTF16(long val, int shift, byte[] buf, int offset, int len) {\n-        int charPos = offset + len;\n-        int radix = 1 << shift;\n-        int mask = radix - 1;\n-        do {\n-            StringUTF16.putChar(buf, --charPos, Integer.digits[((int) val) & mask]);\n-            val >>>= shift;\n-        } while (charPos > offset);\n-    }\n-\n@@ -459,9 +432,3 @@\n-        if (COMPACT_STRINGS) {\n-            byte[] buf = new byte[size];\n-            DecimalDigits.uncheckedGetCharsLatin1(i, size, buf);\n-            return new String(buf, LATIN1);\n-        } else {\n-            byte[] buf = new byte[size * 2];\n-            DecimalDigits.uncheckedGetCharsUTF16(i, size, buf);\n-            return new String(buf, UTF16);\n-        }\n+        byte[] buf = new byte[size];\n+        DecimalDigits.uncheckedGetCharsLatin1(i, size, buf);\n+        return String.newStringWithLatin1Bytes(buf);\n","filename":"src\/java.base\/share\/classes\/java\/lang\/Long.java","additions":6,"deletions":39,"binary":false,"changes":45,"status":"modified"}]}