{"files":[{"patch":"@@ -38,0 +38,1 @@\n+\n@@ -608,1 +609,0 @@\n-\n@@ -617,1 +617,1 @@\n-  \/\/ Both are constant, directly computed the result\n+  \/\/ Both are constant, directly compute the result.\n@@ -623,1 +623,1 @@\n-  \/\/ If the 64-bit product cannot overflow and its sign is known, the result is constant.\n+  \/\/ If the 64-bit result cannot overflow and its sign is known, the result is constant.\n@@ -646,1 +646,0 @@\n-\n@@ -654,1 +653,0 @@\n-  const int widen = MIN2(longType1->_widen, longType2->_widen);\n@@ -656,1 +654,1 @@\n-  \/\/ Both are constant, directly computed the result\n+  \/\/ Both are constant, directly compute the result.\n@@ -659,2 +657,1 @@\n-    TypeIntPrototype<jlong, julong> proto{{min_jlong, max_jlong}, {highResult, highResult}, {0, 0}};\n-    return TypeLong::make_or_top(proto, widen);\n+    return TypeLong::make_unsigned(highResult);\n@@ -663,1 +660,2 @@\n-  \/\/ If both operands are within the unsigned 32-bit range, the upper 64 bits of the 128-bit product are always zero.\n+  \/\/ Range-based fold: if both inputs fit in 32-bit unsigned, high word is guaranteed zero.\n+  \/\/ If both inputs are within the unsigned 32-bit range, the upper 64 bits of the 128-bit result are always zero.\n","filename":"src\/hotspot\/share\/opto\/mulnode.cpp","additions":7,"deletions":9,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -184,1 +184,0 @@\n-\n@@ -188,1 +187,1 @@\n-  MulHiLNode( Node *in1, Node *in2 ) : Node(nullptr,in1,in2) {}\n+  MulHiLNode(Node* in1, Node* in2) : Node(nullptr, in1, in2) {}\n@@ -191,1 +190,1 @@\n-  const Type *bottom_type() const { return TypeLong::LONG; }\n+  const Type* bottom_type() const { return TypeLong::LONG; }\n@@ -198,1 +197,1 @@\n-  UMulHiLNode( Node *in1, Node *in2 ) : Node(nullptr,in1,in2) {}\n+  UMulHiLNode(Node* in1, Node* in2) : Node(nullptr, in1, in2) {}\n@@ -201,1 +200,1 @@\n-  const Type *bottom_type() const { return TypeLong::LONG; }\n+  const Type* bottom_type() const { return TypeLong::LONG; }\n","filename":"src\/hotspot\/share\/opto\/mulnode.hpp","additions":4,"deletions":5,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -29,1 +29,0 @@\n-#include \"classfile\/vmSymbols.hpp\"\n@@ -31,0 +30,1 @@\n+#include \"jni_md.h\"\n@@ -32,1 +32,0 @@\n-#include \"memory\/oopFactory.hpp\"\n@@ -34,1 +33,0 @@\n-#include \"oops\/instanceKlass.hpp\"\n@@ -36,2 +34,0 @@\n-#include \"oops\/objArrayKlass.hpp\"\n-#include \"oops\/typeArrayKlass.hpp\"\n@@ -48,1 +44,1 @@\n-#include \"utilities\/powerOfTwo.hpp\"\n+#include \"utilities\/globalDefinitions.hpp\"\n@@ -51,0 +47,2 @@\n+#include <type_traits>\n+\n@@ -1923,0 +1921,6 @@\n+const TypeLong* TypeLong::make_unsigned(julong ucon) {\n+  jlong con = ucon;\n+  return (new TypeLong(TypeIntPrototype<jlong, julong>{{con, con}, {ucon, ucon}, {~ucon, ucon}},\n+                       WidenMin, false))->hashcons()->is_long();\n+}\n+\n","filename":"src\/hotspot\/share\/opto\/type.cpp","additions":10,"deletions":6,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -31,1 +31,0 @@\n-#include \"runtime\/handles.hpp\"\n@@ -879,0 +878,1 @@\n+  static const TypeLong* make_unsigned(julong ucon);\n","filename":"src\/hotspot\/share\/opto\/type.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}