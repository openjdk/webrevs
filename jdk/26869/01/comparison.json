{"files":[{"patch":"@@ -925,2 +925,4 @@\n-        printConstructor2(out, event, empty);\n-        printCommitMethod(out, event, empty);\n+        if (!event.fields.isEmpty()) {\n+            printConstructor2(out, event, empty);\n+            printCommitMethod(out, event, empty);\n+        }\n","filename":"make\/src\/classes\/build\/tools\/jfr\/GenerateJfrFiles.java","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -43,0 +43,6 @@\n+       void baz(char* text) {\n+         EventText event;\n+         event.set_text(text);\n+         event.commit();\n+       }\n+\n@@ -45,0 +51,5 @@\n+       $ jfr view Text dump.jfr\n+       Time     Event Thread                             Text\n+       ======== ======================================== ==========================\n+       21:54:29 Attach Listener                          hello\n+       21:54:29 Attach Listener                          world\n@@ -46,1 +57,12 @@\n-       $ jfr print dump.jfr\n+       $ jfr query 'SELECT text, COUNT(text) FROM Text GROUP BY text ORDER BY text ASC' dump.jfr\n+\n+       Text                              Count\n+       =================== ===================\n+       hello                               622\n+       world                                37\n+\n+       $ jfr query 'SELECT COUNT(duration), AVG(duration), MEDIAN(duration), P90(duration),\n+                    P99(duration), P999(duration) FROM Duration' dump.jfr\n+\n+       The 'jfr query' command is only available in debug builds, but recordings with internal\n+       event can be generated by product builds.\n@@ -52,1 +74,2 @@\n-               System.out.println(e.getName() + \" \" + e.getDuration());\n+               EventType et = e.getEventType();\n+               System.out.println(et.getName() + \" \" + e.getDuration() + \" \" + e.getValue(\"text\"));\n","filename":"src\/hotspot\/share\/jfr\/metadata\/metadata.xml","additions":25,"deletions":2,"binary":false,"changes":27,"status":"modified"}]}