{"files":[{"patch":"@@ -2059,2 +2059,9 @@\n-      \/\/ Mark the method as decompiled.\n-      inc_decompile_count();\n+#if INCLUDE_JVMCI\n+      if (jvmci_nmethod_data() != nullptr && !jvmci_nmethod_data()->is_default()) {\n+        \/\/ Hosted compilations are not subject to the recompilation cutoff\n+      } else\n+#endif\n+      {\n+        \/\/ Mark the method as decompiled.\n+        inc_decompile_count();\n+      }\n","filename":"src\/hotspot\/share\/code\/nmethod.cpp","additions":9,"deletions":2,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -757,0 +757,1 @@\n+                                  bool is_default,\n@@ -764,1 +765,1 @@\n-    _has_name = true;\n+    _properties.bits._has_name = 1;\n@@ -768,1 +769,1 @@\n-    _has_name = false;\n+    _properties.bits._has_name = 0;\n@@ -770,0 +771,1 @@\n+  _properties.bits._is_default = is_default;\n@@ -773,1 +775,1 @@\n-  initialize(data->_nmethod_mirror_index, data->_nmethod_entry_patch_offset, data->name(), data->_failed_speculations);\n+  initialize(data->_nmethod_mirror_index, data->_nmethod_entry_patch_offset, data->name(), data->_properties.bits._is_default, data->_failed_speculations);\n@@ -2158,0 +2160,1 @@\n+                                                        install_default,\n","filename":"src\/hotspot\/share\/jvmci\/jvmciRuntime.cpp","additions":6,"deletions":3,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -51,1 +51,10 @@\n-  bool _has_name;\n+  union JVMCINMethodProperties {\n+    uint8_t value;\n+    struct {\n+      uint8_t _has_name   : 1,\n+              _is_default : 1,\n+                          : 6;\n+    } bits;\n+  };\n+\n+  JVMCINMethodProperties _properties;\n@@ -77,0 +86,1 @@\n+                   bool is_default,\n@@ -89,0 +99,1 @@\n+                                  bool is_default,\n@@ -94,0 +105,1 @@\n+                       is_default,\n@@ -118,1 +130,1 @@\n-  const char* name() { return _has_name ? (char*)(((address) this) + sizeof(JVMCINMethodData)) : nullptr; }\n+  const char* name() { return has_name() ? (char*)(((address) this) + sizeof(JVMCINMethodData)) : nullptr; }\n@@ -133,0 +145,8 @@\n+\n+  bool has_name() {\n+    return _properties.bits._has_name;\n+  }\n+\n+  bool is_default() {\n+    return _properties.bits._is_default;\n+  }\n","filename":"src\/hotspot\/share\/jvmci\/jvmciRuntime.hpp","additions":22,"deletions":2,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -107,0 +107,3 @@\n+#if INCLUDE_JVMCI\n+#include \"jvmci\/jvmciRuntime.hpp\"\n+#endif\n@@ -2474,1 +2477,5 @@\n-\n+#if INCLUDE_JVMCI\n+    if (nm->jvmci_nmethod_data() != nullptr && !nm->jvmci_nmethod_data()->is_default()) {\n+      inc_recompile_count = false;\n+    }\n+#endif\n","filename":"src\/hotspot\/share\/runtime\/deoptimization.cpp","additions":8,"deletions":1,"binary":false,"changes":9,"status":"modified"}]}