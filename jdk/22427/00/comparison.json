{"files":[{"patch":"@@ -47,0 +47,1 @@\n+import jdk.test.lib.Asserts;\n@@ -73,1 +74,3 @@\n-            Pattern[] pattern = new Pattern[] { Pattern.compile(\"Registers:\"), null };\n+\n+            Pattern[] pattern = null;\n+\n@@ -75,1 +78,1 @@\n-                pattern[1] = Pattern.compile(\"RAX=.*\");\n+                pattern = new Pattern[] { Pattern.compile(\"Registers:\"), Pattern.compile(\"RAX=.*\")};\n@@ -77,1 +80,1 @@\n-                pattern[1] = Pattern.compile(\"EAX=.*\");\n+                pattern = new Pattern[] { Pattern.compile(\"Registers:\"), Pattern.compile(\"EAX=.*\")};\n@@ -79,1 +82,20 @@\n-                pattern[1] = Pattern.compile(\"R0=.*\");\n+                pattern = new Pattern[] { Pattern.compile(\"Registers:\"), Pattern.compile(\"R0=.*\")};\n+            } else if (Platform.isS390x()) {\n+                pattern = new Pattern[] { Pattern.compile(\"General Purpose Registers:\"),\n+                                          Pattern.compile(\"^-{26}$\"),\n+                                          Pattern.compile(\"  r0  =.*\")};\n+            } else if (Platform.isPPC()) {\n+                pattern = new Pattern[] { Pattern.compile(\"Registers:\"), Pattern.compile(\"pc =.*\")};\n+            }\n+\n+            if (Platform.isS390x()) {\n+              \/\/ On s390x, hs_err file is not complete.\n+              try {\n+                \/\/ Pattern match the hs_err_pid file.\n+                HsErrFileUtils.checkHsErrFileContent(hs_err_file, pattern, false);\n+              } catch (RuntimeException e) {\n+                Asserts.assertEquals(\"hs-err file incomplete (missing END marker.)\", e.getMessage());\n+              }\n+            } else {\n+                \/\/ Pattern match the hs_err_pid file.\n+                HsErrFileUtils.checkHsErrFileContent(hs_err_file, pattern, false);\n@@ -81,2 +103,0 @@\n-            \/\/ Pattern match the hs_err_pid file.\n-            HsErrFileUtils.checkHsErrFileContent(hs_err_file, pattern, false);\n","filename":"test\/hotspot\/jtreg\/runtime\/ErrorHandling\/ShowRegistersOnAssertTest.java","additions":26,"deletions":6,"binary":false,"changes":32,"status":"modified"}]}