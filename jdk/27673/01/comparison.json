{"files":[{"patch":"@@ -165,5 +165,0 @@\n-  LogTarget(Trace, safepoint) lt;\n-  if (lt.is_enabled()) {\n-    LogStream ls(lt);\n-    cur_state->print_on(&ls);\n-  }\n@@ -237,0 +232,2 @@\n+    log_trace(safepoint)(\"Checking thread status\");\n+\n@@ -247,0 +244,1 @@\n+        log_trace(safepoint)(\"Thread \" INTPTR_FORMAT \" is now blocked\", p2i(cur_tss->thread()));\n@@ -253,0 +251,1 @@\n+        log_trace(safepoint)(\"Thread \" INTPTR_FORMAT \" is still running\", p2i(cur_tss->thread()));\n@@ -262,0 +261,1 @@\n+      log_trace(safepoint)(\"Waiting for threads to block\");\n@@ -334,1 +334,1 @@\n-  SafepointTracing::begin(VMThread::vm_op_type());\n+  SafepointTracing::begin(VMThread::vm_op_type(), _wait_barrier);\n@@ -348,2 +348,0 @@\n-  log_debug(safepoint)(\"Safepoint synchronization initiated using %s wait barrier. (%d threads)\", _wait_barrier->description(), nof_threads);\n-\n@@ -555,0 +553,2 @@\n+  log_trace(safepoint)(\"Blocking thread \" INTPTR_FORMAT, p2i(thread));\n+\n@@ -598,0 +598,2 @@\n+\n+  log_trace(safepoint)(\"Unblocking thread \" INTPTR_FORMAT, p2i(thread));\n@@ -947,1 +949,1 @@\n-void SafepointTracing::begin(VM_Operation::VMOp_Type type) {\n+void SafepointTracing::begin(VM_Operation::VMOp_Type type, WaitBarrier* wait_barrier) {\n@@ -959,0 +961,1 @@\n+  log_debug(safepoint)(\"Safepoint synchronization begins using %s wait barrier\", wait_barrier->description());\n@@ -967,0 +970,1 @@\n+  log_debug(safepoint)(\"Safepoint synchronization finished\");\n@@ -971,0 +975,1 @@\n+  log_debug(safepoint)(\"Leaving safepoint\");\n@@ -1005,0 +1010,1 @@\n+  log_debug(safepoint)(\"Safepoint complete\");\n","filename":"src\/hotspot\/share\/runtime\/safepoint.cpp","additions":15,"deletions":9,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -253,1 +253,1 @@\n-  static void begin(VM_Operation::VMOp_Type type);\n+  static void begin(VM_Operation::VMOp_Type type, WaitBarrier* wait_barrier);\n","filename":"src\/hotspot\/share\/runtime\/safepoint.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -640,4 +640,0 @@\n-  log_debug(safepoint)(\"... found polling page %s exception at pc = \"\n-                       INTPTR_FORMAT \", stub =\" INTPTR_FORMAT,\n-                       at_poll_return ? \"return\" : \"loop\",\n-                       (intptr_t)pc, (intptr_t)stub);\n","filename":"src\/hotspot\/share\/runtime\/sharedRuntime.cpp","additions":0,"deletions":4,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -44,1 +44,1 @@\n-        output.shouldContain(\"Safepoint synchronization initiated\");\n+        output.shouldContain(\"Safepoint synchronization begins\");\n","filename":"test\/hotspot\/jtreg\/runtime\/logging\/SafepointTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}