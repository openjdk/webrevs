{"files":[{"patch":"@@ -46,1 +46,7 @@\n-            var phaser = new Phaser(4);\n+            var phaser = new Phaser(4) {\n+                @Override\n+                protected boolean onAdvance(int phase, int registeredParties) {\n+                    q.clear();\n+                    return super.onAdvance(phase, registeredParties);\n+                }\n+            };\n@@ -59,2 +65,0 @@\n-                        q.clear();\n-                        phaser.arriveAndAwaitAdvance();\n@@ -66,2 +70,3 @@\n-                if (future.get() != 0)\n-                    throw new Error();\n+                Integer res;\n+                if ((res = future.get()) != 0)\n+                    throw new AssertionError(\"Expected 0 but got \" + res);\n@@ -70,0 +75,2 @@\n+        if (!q.isEmpty())\n+            throw new AssertionError(\"Queue is not empty: \" + q);\n","filename":"test\/jdk\/java\/util\/concurrent\/BlockingQueue\/MissedPoll.java","additions":12,"deletions":5,"binary":false,"changes":17,"status":"modified"}]}