{"files":[{"patch":"@@ -42,0 +42,1 @@\n+import java.awt.Image;\n@@ -46,0 +47,2 @@\n+import java.awt.image.MultiResolutionImage;\n+import java.awt.image.RenderedImage;\n@@ -48,0 +51,1 @@\n+import java.util.List;\n@@ -55,0 +59,2 @@\n+    private static Canvas canvas;\n+\n@@ -57,0 +63,3 @@\n+    private static final Point OFF_FRAME_LOC = new Point(50, 50);\n+    private static final int SIZE = 400;\n+\n@@ -60,1 +69,2 @@\n-            EventQueue.invokeAndWait(CopyAreaOOB::createTestUI);\n+\n+            createTestUI();\n@@ -65,2 +75,2 @@\n-                Point pt1 = frame.getLocationOnScreen();\n-                Rectangle rect = new Rectangle(pt1.x, pt1.y, 400, 400);\n+                Point pt1 = canvas.getLocationOnScreen();\n+                Rectangle rect = new Rectangle(pt1.x, pt1.y, SIZE, SIZE);\n@@ -70,0 +80,6 @@\n+            \/\/ added to move mouse pointer away from test UI\n+            \/\/ so that it is not captured in the screenshot\n+            robot.mouseMove(OFF_FRAME_LOC.x, OFF_FRAME_LOC.y);\n+            robot.waitForIdle();\n+            robot.delay(100);\n+\n@@ -89,2 +105,2 @@\n-        CopyAreaOOB test = new CopyAreaOOB();\n-        frame.add(test);\n+        canvas = new CopyAreaOOB();\n+        frame.add(canvas);\n@@ -114,1 +130,0 @@\n-        g2d.dispose();\n@@ -124,1 +139,1 @@\n-        System.out.print(\"Testing region: \" + region);\n+        System.out.print(\"Test region: \" + region);\n@@ -144,4 +159,8 @@\n-        GraphicsConfiguration ge = GraphicsEnvironment\n-                .getLocalGraphicsEnvironment().getDefaultScreenDevice()\n-                .getDefaultConfiguration();\n-        BufferedImage screenCapture = robot.createScreenCapture(ge.getBounds());\n+        GraphicsConfiguration ge = GraphicsEnvironment.getLocalGraphicsEnvironment()\n+                                                      .getDefaultScreenDevice()\n+                                                      .getDefaultConfiguration();\n+\n+        MultiResolutionImage mrImage = robot.createMultiResolutionScreenCapture(ge.getBounds());\n+        List<Image> variants = mrImage.getResolutionVariants();\n+        RenderedImage screenCapture = (RenderedImage) variants.get(variants.size() - 1);\n+\n@@ -150,1 +169,1 @@\n-            ImageIO.write(captureImg, \"png\", new File(\"frame.png\"));\n+            ImageIO.write(captureImg, \"png\", new File(\"canvas.png\"));\n","filename":"test\/jdk\/java\/awt\/Graphics2D\/CopyAreaOOB.java","additions":31,"deletions":12,"binary":false,"changes":43,"status":"modified"}]}