{"files":[{"patch":"@@ -381,1 +381,2 @@\n-                        .append(\"loadScripts(document, 'script');\");\n+                        .append(\"loadScripts();\\n\")\n+                        .append(\"initTheme();\\n\");\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/markup\/Head.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -14,6 +14,7 @@\n-var oddRowColor = \"odd-row-color\";\n-var evenRowColor = \"even-row-color\";\n-var sortAsc = \"sort-asc\";\n-var sortDesc = \"sort-desc\";\n-var tableTab = \"table-tab\";\n-var activeTableTab = \"active-table-tab\";\n+const oddRowColor = \"odd-row-color\";\n+const evenRowColor = \"even-row-color\";\n+const sortAsc = \"sort-asc\";\n+const sortDesc = \"sort-desc\";\n+const tableTab = \"table-tab\";\n+const activeTableTab = \"active-table-tab\";\n+const THEMES = Object.freeze([\"theme-light\", \"theme-dark\", \"theme-os\"]);\n@@ -33,8 +34,7 @@\n-function loadScripts(doc, tag) {\n-    createElem(doc, tag, 'script-files\/search.js');\n-\n-    createElem(doc, tag, 'module-search-index.js');\n-    createElem(doc, tag, 'package-search-index.js');\n-    createElem(doc, tag, 'type-search-index.js');\n-    createElem(doc, tag, 'member-search-index.js');\n-    createElem(doc, tag, 'tag-search-index.js');\n+function loadScripts() {\n+    createScript('script-files\/search.js');\n+    createScript('module-search-index.js');\n+    createScript('package-search-index.js');\n+    createScript('type-search-index.js');\n+    createScript('member-search-index.js');\n+    createScript('tag-search-index.js');\n@@ -43,3 +43,2 @@\n-function createElem(doc, tag, path) {\n-    var script = doc.createElement(tag);\n-    var scriptElement = doc.getElementsByTagName(tag)[0];\n+function createScript(path) {\n+    var script = document.createElement(\"script\");\n@@ -47,1 +46,2 @@\n-    scriptElement.parentNode.insertBefore(script, scriptElement);\n+    var firstScript = document.getElementsByTagName(\"script\")[0];\n+    firstScript.parentNode.insertBefore(script, firstScript);\n@@ -315,0 +315,8 @@\n+function getTheme() {\n+    return localStorage.getItem('theme') || THEMES[0];\n+}\n+\n+function initTheme() {\n+    document.body.classList.add(getTheme());\n+}\n+\n@@ -321,0 +329,1 @@\n+\n@@ -324,4 +333,4 @@\n-    }\n-    if (sessionStorage.getItem(\"sidebar\") === \"hidden\") {\n-        const sidebar = document.querySelector(\".main-grid nav.toc\");\n-        if (sidebar) sidebar.classList.add(\"hide-sidebar\");\n+        if (sessionStorage.getItem(\"sidebar\") === \"hidden\") {\n+            const sidebar = document.querySelector(\".main-grid nav.toc\");\n+            if (sidebar) sidebar.classList.add(\"hide-sidebar\");\n+        }\n@@ -330,0 +339,1 @@\n+\n@@ -378,0 +388,1 @@\n+    var currentTheme = getTheme();\n@@ -380,0 +391,3 @@\n+        if (input.id === currentTheme) {\n+            input.checked = true;\n+        }\n@@ -384,1 +398,0 @@\n-    const THEMES = [\"theme-light\", \"theme-dark\", \"theme-os\"];\n@@ -393,1 +406,0 @@\n-    setTheme(localStorage.getItem(\"theme\") || THEMES[0]);\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/script.js.template","additions":36,"deletions":24,"binary":false,"changes":60,"status":"modified"},{"patch":"@@ -76,1 +76,1 @@\n-    --even-row-color: #ffffff;\n+    --even-row-color: #fdfdfe;\n@@ -112,0 +112,2 @@\n+    --icon-filter: none;\n+    --caption-link-color: var(--subnav-link-color);\n@@ -117,1 +119,1 @@\n-    --body-background-color: #222528;\n+    --body-background-color: #1f2124;\n@@ -122,1 +124,1 @@\n-    --detail-block-color: #f4f4f4;\n+    --detail-block-color: #31363c;\n@@ -136,2 +138,2 @@\n-    --link-color-active: #ffb45b;\n-    --toc-background-color: #31363c;\n+    --link-color-active: #e8a351;\n+    --toc-background-color: #2f3439;\n@@ -140,1 +142,1 @@\n-    --snippet-background-color: #2d363c;\n+    --snippet-background-color: #2c353b;\n@@ -158,4 +160,2 @@\n-    div.main-grid img,\n-    .inherited-list h3 > button {\n-        filter: invert(100%) brightness(160%);\n-    }\n+    --icon-filter: invert(100%) brightness(160%);\n+    --caption-link-color: var(--link-color);\n@@ -171,1 +171,1 @@\n-        --body-background-color: #222528;\n+        --body-background-color: #1f2124;\n@@ -176,1 +176,1 @@\n-        --detail-block-color: #f4f4f4;\n+        --detail-block-color: #31363c;\n@@ -190,2 +190,2 @@\n-        --link-color-active: #ffb45b;\n-        --toc-background-color: #31363c;\n+        --link-color-active: #e8a351;\n+        --toc-background-color: #2f3439;\n@@ -194,1 +194,1 @@\n-        --snippet-background-color: #2d363c;\n+        --snippet-background-color: #2c353b;\n@@ -212,4 +212,2 @@\n-        div.main-grid img,\n-        .inherited-list h3 > button {\n-            filter: invert(100%) brightness(160%);\n-        }\n+        --icon-filter: invert(100%) brightness(160%);\n+        --caption-link-color: var(--link-color);\n@@ -219,2 +217,2 @@\n-        --body-text-color: #282828;\n-        --block-text-color: #282828;\n+        --body-text-color: #181818;\n+        --block-text-color: #181818;\n@@ -236,1 +234,1 @@\n-        --even-row-color: #ffffff;\n+        --even-row-color: #fdfdfe;\n@@ -262,4 +260,2 @@\n-        div.main-grid img,\n-        .inherited-list h3 > button {\n-            filter: none;\n-        }\n+        --icon-filter: none;\n+        --caption-link-color: var(--subnav-link-color);\n@@ -291,0 +287,3 @@\n+div.main-grid img {\n+    filter: var(--icon-filter);\n+}\n@@ -912,1 +911,1 @@\n-    color:var(--subnav-link-color);\n+    color:var(--caption-link-color);\n@@ -916,2 +915,2 @@\n-.inherited-list.expanded h3 a:hover,\n-.inherited-list.expanded h3 a:active {\n+.inherited-list h3 a:hover,\n+.inherited-list h3 a:active {\n@@ -1542,0 +1541,1 @@\n+    filter: var(--icon-filter);\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/stylesheet.css","additions":29,"deletions":29,"binary":false,"changes":58,"status":"modified"},{"patch":"@@ -430,1 +430,2 @@\n-                    loadScripts(document, 'script');\"\"\",\n+                    loadScripts();\n+                    initTheme();\"\"\",\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testSearch\/TestSearch.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"}]}