{"files":[{"patch":"@@ -0,0 +1,83 @@\n+\/*\n+ * Copyright (c) 1999, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/* @test\n+ * @bug 4210432\n+ * @summary Tests if JTree allows nodes not visible to be selected\n+ * @run main bug4210432\n+ *\/\n+\n+import java.lang.reflect.InvocationTargetException;\n+\n+import javax.swing.JPanel;\n+import javax.swing.JTree;\n+import javax.swing.SwingUtilities;\n+import javax.swing.tree.DefaultMutableTreeNode;\n+import javax.swing.tree.DefaultTreeModel;\n+import javax.swing.tree.TreePath;\n+\n+public class bug4210432 {\n+    public static void main(String[] args) throws InterruptedException,\n+            InvocationTargetException {\n+        SwingUtilities.invokeAndWait(() -> {\n+            JPanel p = new JPanel();\n+            DefaultMutableTreeNode expansible =\n+                    new DefaultMutableTreeNode(\"expansible\");\n+            DefaultMutableTreeNode unexpansible =\n+                    new DefaultMutableTreeNode(\"unexpansible\");\n+            DefaultMutableTreeNode root = new DefaultMutableTreeNode(\"root\");\n+            DefaultMutableTreeNode subexpansible1 =\n+                    new DefaultMutableTreeNode(\"sub-expansible 1\");\n+            DefaultMutableTreeNode subexpansible2 =\n+                    new DefaultMutableTreeNode(\"sub-expansible 2\");\n+            DefaultMutableTreeNode subsubexpansible1 =\n+                    new DefaultMutableTreeNode(\"sub-sub-expansible 1\");\n+            DefaultMutableTreeNode subsubexpansible2 =\n+                    new DefaultMutableTreeNode(\"sub-sub-expansible 2\");\n+            expansible.add(subexpansible1);\n+            expansible.add(subexpansible2);\n+            subexpansible1.add(subsubexpansible1);\n+            subexpansible1.add(subsubexpansible2);\n+            root.add(expansible);\n+            root.add(unexpansible);\n+            DefaultTreeModel model = new DefaultTreeModel(root);\n+            JTree t = new JTree(model);\n+            Object[] tpa = {root, expansible, subexpansible1};\n+            Object[] tpa2 = {root, expansible};\n+            t.setExpandsSelectedPaths(false);\n+            t.setSelectionPath(new TreePath(tpa));\n+            p.add(t);\n+            if (t.isExpanded(new TreePath(tpa2))) {\n+                throw new RuntimeException(\"Test failed: JTree should not have \" +\n+                        \"expanded path\");\n+            }\n+            t.clearSelection();\n+            t.setExpandsSelectedPaths(true);\n+            t.setSelectionPath(new TreePath(tpa));\n+            if (!t.isExpanded(new TreePath(tpa2))) {\n+                throw new RuntimeException(\"Test failed: JTree should have \" +\n+                        \"expanded path\");\n+            }\n+        });\n+    }\n+}\n","filename":"test\/jdk\/javax\/swing\/JTree\/bug4210432.java","additions":83,"deletions":0,"binary":false,"changes":83,"status":"added"},{"patch":"@@ -0,0 +1,63 @@\n+\/*\n+ * Copyright (c) 1999, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/* @test\n+ * @bug 4213868\n+ * @summary Tests if AccessibleJTreeNode.getAccessibleIndexInParent() returns\n+ * correct value\n+ * @run main bug4213868\n+ *\/\n+\n+import java.lang.reflect.InvocationTargetException;\n+\n+import javax.accessibility.AccessibleContext;\n+import javax.swing.JTree;\n+import javax.swing.SwingUtilities;\n+import javax.swing.tree.DefaultMutableTreeNode;\n+\n+public class bug4213868 {\n+    public static JTree createTree() {\n+        DefaultMutableTreeNode root =\n+                new DefaultMutableTreeNode(Integer.valueOf(0), true);\n+        JTree tree = new JTree(root);\n+        for (int i = 1; i < 10; i++) {\n+            root.add(new DefaultMutableTreeNode(Integer.valueOf(i)));\n+        }\n+        return tree;\n+    }\n+\n+    public static void main(String[] args) throws InterruptedException,\n+            InvocationTargetException {\n+        SwingUtilities.invokeAndWait(() -> {\n+            JTree parent = createTree();\n+            AccessibleContext c = parent.getAccessibleContext()\n+                    .getAccessibleChild(0).getAccessibleContext();\n+            if (c.getAccessibleChild(1).getAccessibleContext()\n+                    .getAccessibleIndexInParent() != 1) {\n+                throw new RuntimeException(\"Test failed: \" +\n+                        \"AccessibleJTreeNode.getAccessibleIndexInParent() \" +\n+                        \"returns incorrect value\");\n+            }\n+        });\n+    }\n+}\n","filename":"test\/jdk\/javax\/swing\/JTree\/bug4213868.java","additions":63,"deletions":0,"binary":false,"changes":63,"status":"added"},{"patch":"@@ -0,0 +1,64 @@\n+\/*\n+ * Copyright (c) 1999, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/* @test\n+ * @bug 4224491\n+ * @summary Tests if JTree's model & invokesStopCellEditing bound properties\n+ * are working\n+ * @run main bug4224491\n+ *\/\n+\n+import java.lang.reflect.InvocationTargetException;\n+\n+import javax.swing.JTree;\n+import javax.swing.SwingUtilities;\n+import javax.swing.tree.DefaultMutableTreeNode;\n+import javax.swing.tree.DefaultTreeModel;\n+\n+public class bug4224491 {\n+    private static boolean modelChanged = false;\n+    private static boolean invokesStopCellEditingChanged = false;\n+\n+    public static void main(String[] args) throws InterruptedException,\n+            InvocationTargetException {\n+        SwingUtilities.invokeAndWait(() -> {\n+            DefaultMutableTreeNode root = new DefaultMutableTreeNode();\n+            JTree jt = new JTree(new DefaultTreeModel(root));\n+            jt.addPropertyChangeListener(evt -> {\n+                if (evt.getPropertyName().equals(\"model\")) {\n+                    modelChanged = true;\n+                }\n+                if (evt.getPropertyName().equals(\"invokesStopCellEditing\")) {\n+                    invokesStopCellEditingChanged = true;\n+                }\n+            });\n+            jt.setModel(new DefaultTreeModel(root));\n+            jt.setInvokesStopCellEditing(true);\n+            if (!(modelChanged && invokesStopCellEditingChanged)) {\n+                throw new RuntimeException(\"Test failed: JTree's model \" +\n+                        \"& invokesStopCellEditing bound properties \" +\n+                        \"are not working\");\n+            }\n+        });\n+    }\n+}\n","filename":"test\/jdk\/javax\/swing\/JTree\/bug4224491.java","additions":64,"deletions":0,"binary":false,"changes":64,"status":"added"},{"patch":"@@ -0,0 +1,81 @@\n+\/*\n+ * Copyright (c) 1999, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/* @test\n+ * @bug 4237370\n+ * @summary Tests that JTree calls TreeExpansionListener methods\n+ *          after it has been updated due to expanded\/collapsed event\n+ * @run main bug4237370\n+ *\/\n+\n+import java.lang.reflect.InvocationTargetException;\n+\n+import javax.swing.JTree;\n+import javax.swing.SwingUtilities;\n+import javax.swing.event.TreeExpansionEvent;\n+import javax.swing.event.TreeExpansionListener;\n+import javax.swing.tree.DefaultMutableTreeNode;\n+import javax.swing.tree.DefaultTreeModel;\n+import javax.swing.tree.TreeModel;\n+\n+public class bug4237370 {\n+    static class TestTree extends JTree implements TreeExpansionListener {\n+        int[] testMap = {1, 2};\n+        int testIndex = 0;\n+\n+        private void testRowCount() {\n+            int rows = getRowCount();\n+            if (rows != testMap[testIndex]) {\n+                throw new RuntimeException(\"Bad row count: reported \" + rows +\n+                                \" instead of \" + testMap[testIndex]);\n+            } else {\n+                testIndex++;\n+            }\n+        }\n+\n+        public void treeExpanded (TreeExpansionEvent e) {\n+            testRowCount();\n+        }\n+\n+        public void treeCollapsed(TreeExpansionEvent e) {\n+            testRowCount();\n+        }\n+\n+        public TestTree() {\n+            super((TreeModel)null);\n+            DefaultMutableTreeNode top = new DefaultMutableTreeNode(\"Root\");\n+            top.add(new DefaultMutableTreeNode(\"Sub 1\"));\n+            setModel(new DefaultTreeModel(top));\n+            addTreeExpansionListener(this);\n+        }\n+    }\n+\n+    public static void main(String[] args) throws InterruptedException,\n+            InvocationTargetException {\n+        SwingUtilities.invokeAndWait(() -> {\n+            TestTree tree = new TestTree();\n+            tree.collapseRow(0);\n+            tree.expandRow(0);\n+        });\n+    }\n+}\n","filename":"test\/jdk\/javax\/swing\/JTree\/bug4237370.java","additions":81,"deletions":0,"binary":false,"changes":81,"status":"added"},{"patch":"@@ -0,0 +1,63 @@\n+\/*\n+ * Copyright (c) 2002, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/* @test\n+ * @bug 4662505\n+ * @summary IllegalArgumentException with empty JTree and key event\n+ * @run main bug4662505\n+ *\/\n+\n+import java.awt.event.KeyEvent;\n+import java.util.Date;\n+\n+import javax.swing.JTree;\n+import javax.swing.SwingUtilities;\n+\n+public class bug4662505 {\n+    static DummyTree tree;\n+\n+    public static void main(String[] args) throws Exception {\n+        SwingUtilities.invokeAndWait(() -> {\n+            tree = new DummyTree();\n+\n+            try {\n+                tree.doTest();\n+            } catch (Exception e) {\n+                throw new RuntimeException(\"Empty JTree shouldn't handle \" +\n+                        \"first letter navigation\", e);\n+            }\n+        });\n+    }\n+\n+    static class DummyTree extends JTree {\n+        public DummyTree() {\n+            super(new Object[]{});\n+        }\n+\n+        public void doTest() {\n+            KeyEvent key = new KeyEvent(tree, KeyEvent.KEY_TYPED,\n+                    new Date().getTime(), 0, KeyEvent.VK_UNDEFINED, 'a');\n+            processKeyEvent(key);\n+        }\n+    }\n+}\n","filename":"test\/jdk\/javax\/swing\/JTree\/bug4662505.java","additions":63,"deletions":0,"binary":false,"changes":63,"status":"added"}]}