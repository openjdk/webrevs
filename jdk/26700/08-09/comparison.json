{"files":[{"patch":"@@ -121,1 +121,4 @@\n-  assert(lgrp_spaces_index != -1, \"must have created spaces for all lgrp_ids\");\n+  if (lgrp_spaces_index == -1) {\n+    \/\/ Running on a CPU with no memory; pick another CPU based on %.\n+    lgrp_spaces_index = lgrp_id % lgrp_spaces()->length();\n+  }\n@@ -293,2 +296,5 @@\n-    vm_exit_during_initialization(err_msg(\"Failed initializing NUMA, #pages-per-CPU is less than one: space-size: %zu, page-size: %zu, #CPU: %d\",\n-      mr.byte_size(), page_size(), lgrp_spaces()->length()));\n+    log_warning(gc)(\"Degraded NUMA config: #os-pages (%zu) < #CPU (%d); space-size: %zu, page-size: %zu\",\n+      num_pages, lgrp_spaces()->length(), mr.byte_size(), page_size());\n+\n+    \/\/ Keep only the first few CPUs.\n+    lgrp_spaces()->trunc_to((int)num_pages);\n","filename":"src\/hotspot\/share\/gc\/parallel\/mutableNUMASpace.cpp","additions":9,"deletions":3,"binary":false,"changes":12,"status":"modified"}]}