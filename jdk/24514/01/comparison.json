{"files":[{"patch":"@@ -165,3 +165,10 @@\n-        return cleanup != null ?\n-                () -> cleanup.accept(SegmentFactories.makeNativeSegmentUnchecked(address, newSize)) :\n-                null;\n+        return cleanup != null\n+                \/\/ Use an anonymous class instead of a lambda to enable early\n+                \/\/ use in the init sequence.\n+                ? new Runnable() {\n+                    @Override\n+                    public void run() {\n+                        cleanup.accept(SegmentFactories.makeNativeSegmentUnchecked(address, newSize));\n+                    }\n+                }\n+                : null;\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/foreign\/AbstractMemorySegmentImpl.java","additions":10,"deletions":3,"binary":false,"changes":13,"status":"modified"}]}