{"files":[{"patch":"@@ -70,6 +70,1 @@\n-> _shared_table;\n-\n-static OffsetCompactHashtable<\n-  const char*, Symbol*,\n-  symbol_equals_compact_hashtable_entry\n-> _dynamic_shared_table;\n+> _shared_table, _dynamic_shared_table, _shared_table_for_dumping;\n@@ -711,8 +706,2 @@\n-  if (CDSConfig::is_dumping_static_archive()) {\n-    _shared_table.reset();\n-    writer.dump(&_shared_table, \"symbol\");\n-  } else {\n-    assert(CDSConfig::is_dumping_dynamic_archive(), \"must be\");\n-    _dynamic_shared_table.reset();\n-    writer.dump(&_dynamic_shared_table, \"symbol\");\n-  }\n+  _shared_table_for_dumping.reset();\n+  writer.dump(&_shared_table_for_dumping, \"symbol\");\n@@ -724,2 +713,6 @@\n-  if (is_static_archive) {\n-    table = &_shared_table;\n+  if (soc->reading()) {\n+    if (is_static_archive) {\n+      table = &_shared_table;\n+    } else {\n+      table = &_dynamic_shared_table;\n+    }\n@@ -727,1 +720,1 @@\n-    table = &_dynamic_shared_table;\n+    table = &_shared_table_for_dumping;\n@@ -729,0 +722,1 @@\n+\n@@ -730,4 +724,0 @@\n-  if (soc->writing()) {\n-    \/\/ Sanity. Make sure we don't use the shared table at dump time\n-    table->reset();\n-  }\n","filename":"src\/hotspot\/share\/classfile\/symbolTable.cpp","additions":11,"deletions":21,"binary":false,"changes":32,"status":"modified"}]}