{"files":[{"patch":"@@ -41,0 +41,1 @@\n+    private static Frame f = null;\n@@ -43,6 +44,3 @@\n-        throws InterruptedException, InvocationTargetException\n-    {\n-\n-        EventQueue.invokeAndWait(new Runnable() {\n-            public void run() {\n-                Frame f = null;\n+        throws InterruptedException, InvocationTargetException {\n+        try {\n+            EventQueue.invokeAndWait(() -> {\n@@ -50,18 +48,6 @@\n-                    try {\n-                        f = new Frame(\"DisplayChanger Frame\");\n-                        gd.setFullScreenWindow(f);\n-                        if (gd.isDisplayChangeSupported()) {\n-                            DisplayMode dm = findDisplayMode(gd);\n-                            if (gd != null) {\n-                                gd.setDisplayMode(dm);\n-                            }\n-                        }\n-                        try {\n-                            Thread.sleep(1000);\n-                        } catch (InterruptedException ex) {\n-                            ex.printStackTrace();\n-                        }\n-                        gd.setFullScreenWindow(null);\n-                    } finally {\n-                        if (f != null) {\n-                            f.dispose();\n+                    f = new Frame(\"DisplayChanger Frame\");\n+                    gd.setFullScreenWindow(f);\n+                    if (gd.isDisplayChangeSupported()) {\n+                        DisplayMode dm = findDisplayMode(gd);\n+                        if (gd != null) {\n+                            gd.setDisplayMode(dm);\n@@ -69,1 +55,0 @@\n-                        gd.setDisplayMode(currentDM);\n@@ -72,0 +57,5 @@\n+            });\n+            try {\n+                Thread.sleep(1000);\n+            } catch (InterruptedException ex) {\n+                ex.printStackTrace();\n@@ -73,1 +63,9 @@\n-        });\n+            EventQueue.invokeAndWait(() -> gd.setFullScreenWindow(null));\n+        } finally {\n+            EventQueue.invokeAndWait(() -> {\n+                if (f != null) {\n+                    f.dispose();\n+                }\n+                gd.setDisplayMode(currentDM);\n+            });\n+        }\n","filename":"test\/jdk\/java\/awt\/FullScreen\/UninitializedDisplayModeChangeTest\/DisplayModeChanger.java","additions":24,"deletions":26,"binary":false,"changes":50,"status":"modified"},{"patch":"@@ -31,2 +31,2 @@\n- * @run main\/othervm\/timeout=420 UninitializedDisplayModeChangeTest\n- * @run main\/othervm\/timeout=420 -Djava.awt.headless=true UninitializedDisplayModeChangeTest\n+ * @run main\/othervm\/timeout=360 UninitializedDisplayModeChangeTest\n+ * @run main\/othervm\/timeout=360 -Djava.awt.headless=true UninitializedDisplayModeChangeTest\n","filename":"test\/jdk\/java\/awt\/FullScreen\/UninitializedDisplayModeChangeTest\/UninitializedDisplayModeChangeTest.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}