{"files":[{"patch":"@@ -2585,3 +2585,3 @@\n-  \/\/ same as map_memory() on this OS\n-  return os::map_memory(fd, file_name, file_offset, addr, bytes, read_only,\n-                        allow_exec);\n+  \/\/ same as pd_map_memory() on this OS\n+  return os::pd_map_memory(fd, file_name, file_offset, addr, bytes, read_only,\n+                           allow_exec);\n","filename":"src\/hotspot\/os\/aix\/os_aix.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -1637,1 +1637,1 @@\n-  return os::commit_memory(addr, size, !ExecMem);\n+  return os::pd_commit_memory(addr, size, !ExecMem);\n@@ -2292,3 +2292,3 @@\n-  \/\/ same as map_memory() on this OS\n-  return os::map_memory(fd, file_name, file_offset, addr, bytes, read_only,\n-                        allow_exec);\n+  \/\/ same as pd_map_memory() on this OS\n+  return os::pd_map_memory(fd, file_name, file_offset, addr, bytes, read_only,\n+                           allow_exec);\n","filename":"src\/hotspot\/os\/bsd\/os_bsd.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2688,1 +2688,1 @@\n-    realign_memory(addr, size, alignment_hint);\n+    pd_realign_memory(addr, size, alignment_hint);\n@@ -2725,1 +2725,1 @@\n-    commit_memory(addr, bytes, alignment_hint, !ExecMem);\n+    pd_commit_memory(addr, bytes, alignment_hint, !ExecMem);\n@@ -3280,1 +3280,1 @@\n-  return os::commit_memory(addr, size, !ExecMem);\n+  return os::pd_commit_memory(addr, size, !ExecMem);\n@@ -4969,2 +4969,2 @@\n-  \/\/ same as map_memory() on this OS\n-  return os::map_memory(fd, file_name, file_offset, addr, bytes, read_only,\n+  \/\/ same as pd_map_memory() on this OS\n+  return os::pd_map_memory(fd, file_name, file_offset, addr, bytes, read_only,\n","filename":"src\/hotspot\/os\/linux\/os_linux.cpp","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -315,1 +315,1 @@\n-char* os::map_memory_to_file(char* base, size_t size, int fd) {\n+char* os::pd_map_memory_to_file(char* base, size_t size, int fd) {\n@@ -349,1 +349,1 @@\n-  return map_memory_to_file(base, size, fd);\n+  return pd_map_memory_to_file(base, size, fd);\n@@ -391,1 +391,1 @@\n-char* os::reserve_memory_aligned(size_t size, size_t alignment, bool exec) {\n+char* os::pd_reserve_memory_aligned(size_t size, size_t alignment, bool exec) {\n@@ -400,1 +400,1 @@\n-char* os::map_memory_to_file_aligned(size_t size, size_t alignment, int file_desc) {\n+char* os::pd_map_memory_to_file_aligned(size_t size, size_t alignment, int file_desc) {\n","filename":"src\/hotspot\/os\/posix\/os_posix.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -3295,1 +3295,1 @@\n-  return map_memory_to_file(base, size, fd);\n+  return pd_map_memory_to_file(base, size, fd);\n@@ -3313,2 +3313,2 @@\n-    char* extra_base = file_desc != -1 ? os::map_memory_to_file(extra_size, file_desc) :\n-                                         os::reserve_memory(extra_size);\n+    char* extra_base = file_desc != -1 ? os::pd_map_memory_to_file(extra_size, file_desc) :\n+                                         os::pd_reserve_memory(extra_size);\n@@ -3321,2 +3321,2 @@\n-    bool rc = (file_desc != -1) ? os::unmap_memory(extra_base, extra_size) :\n-                                  os::release_memory(extra_base, extra_size);\n+    bool rc = (file_desc != -1) ? os::pd_unmap_memory(extra_base, extra_size) :\n+                                  os::pd_release_memory(extra_base, extra_size);\n@@ -3340,0 +3340,6 @@\n+  char* ret = os::pd_reserve_memory_aligned(size_t, alignment, exec);\n+  MemTracker::record_virtual_memory_reserve(ret, size, CALLER_PC);\n+  return ret;\n+}\n+\n+char* os::pd_reserve_memory_aligned(size_t size, size_t alignment, bool exec) {\n@@ -3344,1 +3350,1 @@\n-char* os::map_memory_to_file_aligned(size_t size, size_t alignment, int fd) {\n+char* os::pd_map_memory_to_file_aligned(size_t size, size_t alignment, int fd) {\n@@ -3387,1 +3393,1 @@\n-  return map_memory_to_file(requested_addr, bytes, file_desc);\n+  return pd_map_memory_to_file(requested_addr, bytes, file_desc);\n@@ -3669,1 +3675,1 @@\n-  return os::commit_memory(addr, size, !ExecMem);\n+  return os::pd_commit_memory(addr, size, !ExecMem);\n","filename":"src\/hotspot\/os\/windows\/os_windows.cpp","additions":14,"deletions":8,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -101,1 +101,1 @@\n-    return os::map_memory_to_file_aligned(size, alignment, fd);\n+    return os::pd_map_memory_to_file_aligned(size, alignment, fd);\n@@ -103,1 +103,1 @@\n-  return os::reserve_memory_aligned(size, alignment, executable);\n+  return os::pd_reserve_memory_aligned(size, alignment, executable);\n","filename":"src\/hotspot\/share\/memory\/virtualspace.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1725,1 +1725,5 @@\n-  return os::pd_create_stack_guard_pages(addr, bytes);\n+  bool res = os::pd_create_stack_guard_pages(addr, bytes);\n+  if (res) {\n+    MemTracker::record_virtual_memory_commit((address)addr, bytes, CALLER_PC);\n+  }\n+  return res;\n@@ -1856,1 +1860,1 @@\n-  char* result = os::map_memory_to_file(nullptr \/* addr *\/, bytes, file_desc);\n+  char* result = os::pd_map_memory_to_file(nullptr \/* addr *\/, bytes, file_desc);\n@@ -1884,1 +1888,1 @@\n-  return pd_remap_memory(fd, file_name, file_offset, addr, bytes,\n+  char* res = pd_remap_memory(fd, file_name, file_offset, addr, bytes,\n@@ -1886,0 +1890,4 @@\n+  if (res != nullptr) {\n+    MemTracker::record_virtual_memory_reserve_and_commit((address)res, bytes, CALLER_PC, mtNone);\n+  }\n+  return res;\n","filename":"src\/hotspot\/share\/runtime\/os.cpp","additions":11,"deletions":3,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -194,0 +194,1 @@\n+  static char*  pd_reserve_memory_aligned(size_t size, size_t alignment, bool executable = false);\n@@ -475,2 +476,2 @@\n-  static char* map_memory_to_file_aligned(size_t size, size_t alignment, int fd);\n-  static char* map_memory_to_file(char* base, size_t size, int fd);\n+  static char* pd_map_memory_to_file_aligned(size_t size, size_t alignment, int fd);\n+  static char* pd_map_memory_to_file(char* base, size_t size, int fd);\n","filename":"src\/hotspot\/share\/runtime\/os.hpp","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"}]}