{"files":[{"patch":"@@ -430,2 +430,2 @@\n-            String inlineStr = inlineSnippet.asCharSequence().toString();\n-            String externalStr = externalSnippet.asCharSequence().toString();\n+            String inlineStr = stripLineBreaks(inlineSnippet.asCharSequence().toString());\n+            String externalStr = stripLineBreaks(externalSnippet.asCharSequence().toString());\n@@ -448,0 +448,17 @@\n+    \/\/ Strips leading and trailing newline characters from a string.\n+    private static String stripLineBreaks(String str) {\n+        int left = 0;\n+        int right = str.length();\n+        \/\/ Line breaks are always encoded as \\n\n+        while (left < right && str.charAt(left) == '\\n') {\n+            left++;\n+        }\n+        if (left == right) {\n+            return \"\";\n+        }\n+        while (right > left && str.charAt(right - 1) == '\\n') {\n+            right--;\n+        }\n+        return str.substring(left, right);\n+    }\n+\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/taglets\/SnippetTaglet.java","additions":19,"deletions":2,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n- * @bug 8266666 8275788 8276964 8299080 8276966\n+ * @bug 8266666 8275788 8276964 8299080 8276966 8304408\n@@ -2216,1 +2216,0 @@\n-                    \\s\\s\n@@ -2219,2 +2218,2 @@\n-                    \\s\\s\n-                      --------------------------------------------\"\"\");\n+                      --------------------------------------------\n+                    \"\"\");\n@@ -2227,1 +2226,0 @@\n-\n@@ -2230,1 +2228,0 @@\n-\n@@ -2408,0 +2405,62 @@\n+                ,\n+                new TestCase(newSnippetBuilder()\n+                        .body(\"\"\"\n+                                             Hello\n+                                             ,\n+                                              Snippet!\"\"\")\n+                        .region(\"here\")\n+                        .fileContent(\n+                                \"\"\"\n+                                Above the region.\n+                                \/\/ @start region=here\n+                                Hello\n+                                ,\n+                                 Snippet!\n+                                \/\/ @end\n+                                Below the region.\n+                                \"\"\")\n+                        .build(),\n+                        \"\"\"\n+                            Hello\n+                            ,\n+                             Snippet!\"\"\"\n+                )\n+                ,\n+                new TestCase(newSnippetBuilder()\n+                        .body(\"\"\"\n+                                             Hello\n+                                             ,\n+                                              Snippet!\"\"\")\n+                        .region(\"here\")\n+                        .fileContent(\n+                                \"\"\"\n+                                Above the region.\n+                                \/\/ @start region=here\n+                                \/\/ @replace region substring=Goodbye replacement=Hello\n+                                Goodbye\n+                                ,\n+                                 Snippet!\n+                                \/\/ @end\n+                                \/\/ @end\n+                                Below the region.\n+                                \"\"\")\n+                        .build(),\n+                        \"\"\"\n+                            Hello\n+                            ,\n+                             Snippet!\"\"\"\n+                )\n+                ,\n+                new TestCase(newSnippetBuilder()\n+                        .body(\"\\n\\n\\n\")\n+                        .region(\"here\")\n+                        .fileContent(\n+                                \"\"\"\n+                                Above the region.\n+                                \/\/ @start region=here:\n+                                \/\/ @end\n+                                Below the region.\n+                                \"\"\")\n+                        .build(),\n+                        \"\\n\\n\\n\"\n+                )\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testSnippetTag\/TestSnippetTag.java","additions":65,"deletions":6,"binary":false,"changes":71,"status":"modified"}]}