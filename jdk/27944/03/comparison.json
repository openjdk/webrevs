{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,3 +24,13 @@\n-import javax.swing.*;\n-import java.awt.*;\n-import java.awt.event.*;\n+import java.awt.AWTException;\n+import java.awt.BorderLayout;\n+import java.awt.Component;\n+import java.awt.Container;\n+import java.awt.Dialog;\n+import java.awt.Dimension;\n+import java.awt.Point;\n+import java.awt.Rectangle;\n+import java.awt.Robot;\n+import java.awt.event.ActionEvent;\n+import java.awt.event.ActionListener;\n+import java.awt.event.InputEvent;\n+import java.awt.event.KeyEvent;\n@@ -32,0 +42,8 @@\n+import java.util.function.Predicate;\n+\n+import javax.swing.Box;\n+import javax.swing.JButton;\n+import javax.swing.JDialog;\n+import javax.swing.SwingUtilities;\n+\n+import static javax.swing.SwingUtilities.isEventDispatchThread;\n@@ -126,2 +144,1 @@\n-     * Find a sub component by class name.\n-     * Always run this method on the EDT thread\n+     * Find a subcomponent by class name.\n@@ -130,1 +147,5 @@\n-        String parentClassName = parent.getClass().getName();\n+        return findComponentImpl((Container) parent,\n+                                 c -> c.getClass()\n+                                                  .getName()\n+                                                  .contains(className));\n+    }\n@@ -132,2 +153,13 @@\n-        if (parentClassName.contains(className)) {\n-            return parent;\n+    \/**\n+     * Find a component based on predicate.\n+     *\/\n+    public static Component findComponent(final Container container,\n+                                          final Predicate<Component> predicate) {\n+        try {\n+            if (isEventDispatchThread()) {\n+                return findComponentImpl(container, predicate);\n+            } else {\n+                return Util.invokeOnEDT(() -> findComponentImpl(container, predicate));\n+            }\n+        } catch (Exception e) {\n+            throw new RuntimeException(\"Error occurred while finding component\", e);\n@@ -135,0 +167,1 @@\n+    }\n@@ -136,6 +169,10 @@\n-        if (parent instanceof Container) {\n-            for (Component child : ((Container) parent).getComponents()) {\n-                Component subComponent = findSubComponent(child, className);\n-\n-                if (subComponent != null) {\n-                    return subComponent;\n+    private static Component findComponentImpl(final Container container,\n+                                          final Predicate<Component> predicate) {\n+        for (Component child : container.getComponents()) {\n+            if (predicate.test(child)) {\n+                return child;\n+            }\n+            if (child instanceof Container cont && cont.getComponentCount() > 0) {\n+                Component result = findComponentImpl(cont, predicate);\n+                if (result != null) {\n+                    return result;\n@@ -145,1 +182,0 @@\n-\n@@ -149,0 +185,1 @@\n+\n@@ -285,2 +322,2 @@\n-        Box      buttonBox = Box.createHorizontalBox();\n-        JButton  passButton = new JButton(\"Pass\");\n+        Box buttonBox = Box.createHorizontalBox();\n+        JButton passButton = new JButton(\"Pass\");\n","filename":"test\/jdk\/javax\/swing\/regtesthelpers\/Util.java","additions":55,"deletions":18,"binary":false,"changes":73,"status":"modified"}]}