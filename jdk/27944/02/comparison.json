{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,1 +37,0 @@\n-import java.util.function.Predicate;\n@@ -55,0 +54,2 @@\n+ * @library \/javax\/swing\/regtesthelpers\n+ * @build Util\n@@ -231,3 +232,3 @@\n-        Component result = findComponent(container,\n-                c -> c instanceof JToggleButton button\n-                     && \"Details\".equals(button.getToolTipText()));\n+        Component result = Util.findComponent(container,\n+                                         c -> c instanceof JToggleButton button\n+                                              && \"Details\".equals(button.getToolTipText()));\n@@ -238,2 +239,2 @@\n-        Component result = findComponent(container,\n-                                         c -> c instanceof JTable);\n+        Component result = Util.findComponent(container,\n+                                              c -> c instanceof JTable);\n@@ -242,16 +243,0 @@\n-\n-    private static Component findComponent(final Container container,\n-                                           final Predicate<Component> predicate) {\n-        for (Component child : container.getComponents()) {\n-            if (predicate.test(child)) {\n-                return child;\n-            }\n-            if (child instanceof Container cont && cont.getComponentCount() > 0) {\n-                Component result = findComponent(cont, predicate);\n-                if (result != null) {\n-                    return result;\n-                }\n-            }\n-        }\n-        return null;\n-    }\n","filename":"test\/jdk\/javax\/swing\/JFileChooser\/FileSizeCheck.java","additions":8,"deletions":23,"binary":false,"changes":31,"status":"modified"},{"patch":"@@ -34,0 +34,2 @@\n+import java.awt.Component;\n+import java.awt.Container;\n@@ -37,1 +39,0 @@\n-import java.awt.event.KeyEvent;\n@@ -75,2 +76,4 @@\n-            robot.keyPress(KeyEvent.VK_ESCAPE);\n-            robot.keyRelease(KeyEvent.VK_ESCAPE);\n+            SwingUtilities.invokeAndWait(() -> {\n+                JButton cancel = findCancelButton(jfc);\n+                cancel.doClick();\n+            });\n@@ -124,0 +127,7 @@\n+\n+    private static JButton findCancelButton(final Container container) {\n+        Component result = Util.findComponent(container,\n+                                              c -> c instanceof JButton button\n+                                                   && \"Cancel\".equals(button.getText()));\n+        return (JButton) result;\n+    }\n","filename":"test\/jdk\/javax\/swing\/JFileChooser\/bug4759934.java","additions":13,"deletions":3,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,0 +32,3 @@\n+import java.util.function.Predicate;\n+\n+import static javax.swing.SwingUtilities.isEventDispatchThread;\n@@ -149,0 +152,33 @@\n+    \/**\n+     * Find a component based on predicate.\n+     *\/\n+    public static Component findComponent(final Container container,\n+                                          final Predicate<Component> predicate) {\n+        try {\n+            if (isEventDispatchThread()) {\n+                return findComponentImpl(container, predicate);\n+            } else {\n+                return Util.invokeOnEDT(() -> findComponentImpl(container, predicate));\n+            }\n+        } catch (Exception e) {\n+            throw new RuntimeException(\"Error occurred while finding component\", e);\n+        }\n+    }\n+\n+    private static Component findComponentImpl(final Container container,\n+                                          final Predicate<Component> predicate) {\n+        for (Component child : container.getComponents()) {\n+            if (predicate.test(child)) {\n+                return child;\n+            }\n+            if (child instanceof Container cont && cont.getComponentCount() > 0) {\n+                Component result = findComponentImpl(cont, predicate);\n+                if (result != null) {\n+                    return result;\n+                }\n+            }\n+        }\n+        return null;\n+    }\n+\n+\n","filename":"test\/jdk\/javax\/swing\/regtesthelpers\/Util.java","additions":37,"deletions":1,"binary":false,"changes":38,"status":"modified"}]}