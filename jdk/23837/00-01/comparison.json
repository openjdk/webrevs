{"files":[{"patch":"@@ -54,4 +54,3 @@\n-        robot = new Robot();\n-        SwingUtilities.invokeAndWait(() -> {\n-            createAndShowGUI();\n-        });\n+        try {\n+            robot = new Robot();\n+            SwingUtilities.invokeAndWait(() -> createAndShowGUI());\n@@ -59,3 +58,10 @@\n-        robot.waitForIdle();\n-        robot.delay(1000);\n-        test();\n+            robot.waitForIdle();\n+            robot.delay(1000);\n+            test();\n+        } finally {\n+            SwingUtilities.invokeAndWait(() -> {\n+                if (frame != null) {\n+                    frame.dispose();\n+                }\n+            });\n+        }\n@@ -65,1 +71,1 @@\n-        frame = new JFrame(\"TEST\");\n+        frame = new JFrame(\"bug4213634\");\n@@ -70,2 +76,0 @@\n-        JTextArea ta = new JTextArea(\"This test dedicated to Nancy and Kathleen, testers and bowlers extraordinaire\\n\\n\\nNo exception means pass.\");\n-        frame.getContentPane().add(\"Center\", ta);\n@@ -74,1 +78,1 @@\n-        frame.setSize(400, 400);\n+        frame.setSize(300, 300);\n@@ -80,1 +84,1 @@\n-    private static void test() throws AWTException, InterruptedException, InvocationTargetException {\n+    private static void test() throws Exception {\n@@ -87,1 +91,0 @@\n-            frame.dispose();\n@@ -102,1 +105,1 @@\n-        for(int i = 0; i < 10; i ++) {\n+        for (int i = 0; i < 10; i++) {\n@@ -104,5 +107,2 @@\n-            menuitem.addActionListener(new ActionListener() {\n-                public void actionPerformed(ActionEvent e) {\n-                    throw new RuntimeException(\n-                        \"Failed: Mnemonic activated\");\n-                }\n+            menuitem.addActionListener(e -> {\n+                throw new RuntimeException(\"Failed: Mnemonic activated\");\n","filename":"test\/jdk\/javax\/swing\/JMenu\/4213634\/bug4213634.java","additions":19,"deletions":19,"binary":false,"changes":38,"status":"modified"}]}