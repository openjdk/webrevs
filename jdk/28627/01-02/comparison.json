{"files":[{"patch":"@@ -5608,0 +5608,9 @@\n+\n+        \/\/ All editor related fields in JTable are transient so\n+        \/\/ editing JTable is not serializable\n+        \/\/ but GenericEditor is Serializable so we need to stop cell editing\n+        \/\/ during serialization of this class\n+        private void writeObject(ObjectOutputStream s) throws IOException {\n+            super.stopCellEditing();\n+            s.defaultWriteObject();\n+        }\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/JTable.java","additions":9,"deletions":0,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -54,17 +54,5 @@\n-            try {\n-                Object[][] data = new Object[][]{ new Object[]{ 1,2,3,4,5}};\n-                Object[] names = new Object[]{ 1,2,3,4,5};\n-                JTable jt = new JTable(data, names);\n-                jt.editCellAt(0,3);\n-                System.out.println(\"Serializing editing JTable\");\n-                JTable newjt = serialize(jt);\n-                if (newjt.isEditing()) {\n-                    throw new RuntimeException(\"Editing table is serializable\");\n-                }\n-\n-                TableCellEditor tce = jt.getCellEditor();\n-                tce.stopCellEditing();\n-                System.out.println(\"Serializing non-editing JTable\");\n-                serialize(jt);\n-            } catch (Exception e) {\n-                throw new RuntimeException(e);\n+            StringBuilder str = new StringBuilder();\n+            testSerializeEditingTable(str);\n+            testSerializeNonEditingTable(str);\n+            if (str.length() != 0) {\n+                throw new RuntimeException(str.toString());\n@@ -74,0 +62,31 @@\n+\n+    private static void testSerializeEditingTable(StringBuilder str) {\n+        try {\n+            Object[][] data = new Object[][]{ new Object[]{ 1,2,3,4,5}};\n+            Object[] names = new Object[]{ 1,2,3,4,5};\n+            JTable jt = new JTable(data, names);\n+            jt.editCellAt(0,3);\n+            System.out.println(\"Serializing editing JTable\");\n+            JTable newjt = serialize(jt);\n+            if (newjt.isEditing()) {\n+                str.append(\"\\nEditing table is serializable\");\n+            }\n+        } catch (Exception e) {\n+            str.append(\"Failed serializing editing table \" + e);\n+        }\n+    }\n+\n+    private static void testSerializeNonEditingTable(StringBuilder str) {\n+        try {\n+            Object[][] data = new Object[][]{ new Object[]{ 1,2,3,4,5}};\n+            Object[] names = new Object[]{ 1,2,3,4,5};\n+            JTable jt = new JTable(data, names);\n+            jt.editCellAt(0,3);\n+            TableCellEditor tce = jt.getCellEditor();\n+            tce.stopCellEditing();\n+            System.out.println(\"Serializing non-editing JTable\");\n+            serialize(jt);\n+        } catch (Exception e) {\n+            str.append(\"Failed serializing non-editing table \" + e);\n+        }\n+    }\n","filename":"test\/jdk\/javax\/swing\/JTable\/EditingJTableNotSerializable.java","additions":36,"deletions":17,"binary":false,"changes":53,"status":"modified"}]}