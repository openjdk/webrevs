{"files":[{"patch":"@@ -1661,3 +1661,1 @@\n-void C2_MacroAssembler::signum_fp(FloatRegister dst, FloatRegister src, FloatRegister one, bool is_double) {\n-  Register tmp1 = t0;\n-\n+void C2_MacroAssembler::signum_fp(FloatRegister dst, FloatRegister one, Register tmp, bool is_double) {\n@@ -1666,5 +1664,2 @@\n-  is_double ? fclass_d(tmp1, src)\n-            : fclass_s(tmp1, src);\n-\n-  is_double ? fmv_d(dst, src)\n-            : fmv_s(dst, src);\n+  is_double ? fclass_d(tmp, dst)\n+            : fclass_s(tmp, dst);\n@@ -1673,1 +1668,1 @@\n-  andi(tmp1, tmp1, fclass_mask::zero | fclass_mask::nan);\n+  andi(tmp, tmp, fclass_mask::zero | fclass_mask::nan);\n@@ -1675,1 +1670,1 @@\n-  bnez(tmp1, done);\n+  bnez(tmp, done);\n@@ -1678,2 +1673,2 @@\n-  is_double ? fsgnj_d(dst, one, src)\n-            : fsgnj_s(dst, one, src);\n+  is_double ? fsgnj_d(dst, one, dst)\n+            : fsgnj_s(dst, one, dst);\n","filename":"src\/hotspot\/cpu\/riscv\/c2_MacroAssembler_riscv.cpp","additions":7,"deletions":12,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -160,2 +160,1 @@\n-  void signum_fp(FloatRegister dst, FloatRegister src, FloatRegister one,\n-                 bool is_double);\n+  void signum_fp(FloatRegister dst, FloatRegister one, Register tmp, bool is_double);\n","filename":"src\/hotspot\/cpu\/riscv\/c2_MacroAssembler_riscv.hpp","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -7604,3 +7604,4 @@\n-instruct signumD_reg(fRegD dst, fRegD src, immD zero, fRegD one) %{\n-  match(Set dst (SignumD src (Binary zero one)));\n-  format %{ \"signumD  $dst, $src\" %}\n+instruct signumD_reg(fRegD dst, immD zero, fRegD one, iRegLNoSp tmp, rFlagsReg cr) %{\n+  match(Set dst (SignumD dst (Binary zero one)));\n+  effect(TEMP tmp, KILL cr);\n+  format %{ \"signumD  $dst, $dst\" %}\n@@ -7608,2 +7609,1 @@\n-    __ signum_fp(as_FloatRegister($dst$$reg), as_FloatRegister($src$$reg),\n-                 as_FloatRegister($one$$reg), true \/* is_double *\/);\n+    __ signum_fp(as_FloatRegister($dst$$reg), as_FloatRegister($one$$reg), as_Register($tmp$$reg), true \/* is_double *\/);\n@@ -7614,3 +7614,4 @@\n-instruct signumF_reg(fRegF dst, fRegF src, immF zero, fRegF one) %{\n-  match(Set dst (SignumF src (Binary zero one)));\n-  format %{ \"signumF  $dst, $src\" %}\n+instruct signumF_reg(fRegF dst, immF zero, fRegF one, iRegLNoSp tmp, rFlagsReg cr) %{\n+  match(Set dst (SignumF dst (Binary zero one)));\n+  effect(TEMP tmp, KILL cr);\n+  format %{ \"signumF  $dst, $dst\" %}\n@@ -7618,2 +7619,1 @@\n-    __ signum_fp(as_FloatRegister($dst$$reg), as_FloatRegister($src$$reg),\n-                 as_FloatRegister($one$$reg), false \/* is_double *\/);\n+    __ signum_fp(as_FloatRegister($dst$$reg), as_FloatRegister($one$$reg), as_Register($tmp$$reg), false \/* is_double *\/);\n","filename":"src\/hotspot\/cpu\/riscv\/riscv.ad","additions":10,"deletions":10,"binary":false,"changes":20,"status":"modified"}]}