{"files":[{"patch":"@@ -2414,1 +2414,1 @@\n-      int maxf = (int)(strtod(tail, &err) * 100);\n+      double dmaxf = strtod(tail, &err);\n@@ -2421,1 +2421,5 @@\n-        if (FLAG_SET_CMDLINE(MaxHeapFreeRatio, maxf) != JVMFlag::SUCCESS) {\n+        if (dmaxf < 0.0 || dmaxf > 1.0) {\n+          JVMFlag::printError(true,\"uintx MaxHeapFreeRatio=%s is outside the allowed range  [ 0.0 ... 1.0 ]\\n\", tail);\n+          return JNI_EINVAL;\n+        }\n+        if (FLAG_SET_CMDLINE(MaxHeapFreeRatio, (uintx)(dmaxf * 100)) != JVMFlag::SUCCESS) {\n@@ -2428,1 +2432,1 @@\n-      int minf = (int)(strtod(tail, &err) * 100);\n+      double dminf = strtod(tail, &err);\n@@ -2435,1 +2439,5 @@\n-        if (FLAG_SET_CMDLINE(MinHeapFreeRatio, minf) != JVMFlag::SUCCESS) {\n+        if (dminf < 0.0 || dminf > 1.0) {\n+          JVMFlag::printError(true,\"uintx MinHeapFreeRatio=%s is outside the allowed range [ 0.0 ... 1.0 ]\\n\", tail);\n+          return JNI_EINVAL;\n+        }\n+        if (FLAG_SET_CMDLINE(MinHeapFreeRatio, (uintx)(dminf * 100)) != JVMFlag::SUCCESS) {\n","filename":"src\/hotspot\/share\/runtime\/arguments.cpp","additions":12,"deletions":4,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -89,3 +89,4 @@\n-    testMinMaxFreeRatio( \"0.1\", \"0.5\", Validation.VALID);\n-    testMinMaxFreeRatio(  \".1\",  \".5\", Validation.VALID);\n-    testMinMaxFreeRatio( \"0.5\", \"0.5\", Validation.VALID);\n+    testMinMaxFreeRatio( \"0.1\",  \"0.5\", Validation.VALID);\n+    testMinMaxFreeRatio(  \".1\",   \".5\", Validation.VALID);\n+    testMinMaxFreeRatio( \"0.5\",  \"0.5\", Validation.VALID);\n+    testMinMaxFreeRatio( \"0.0\",\"0.001\", Validation.VALID);\n@@ -107,0 +108,2 @@\n+    testMinMaxFreeRatio(\n+                  \"-2147483647\", \"0.5\", Validation.OUT_OF_RANGE);\n@@ -111,0 +114,2 @@\n+    testMinMaxFreeRatio(\n+                   \"0.1\", \"-2147483647\", Validation.OUT_OF_RANGE);\n","filename":"test\/hotspot\/jtreg\/gc\/arguments\/TestHeapFreeRatio.java","additions":9,"deletions":4,"binary":false,"changes":13,"status":"modified"}]}