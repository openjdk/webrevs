{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -1806,5 +1806,0 @@\n-  \/\/ JDK-8213834: handlers of ResourceExhausted may attempt some analysis\n-  \/\/ which often requires running java.\n-  \/\/ This will cause problems on threads not able to run java, e.g. compiler\n-  \/\/ threads. To forestall these problems, we therefore suppress sending this\n-  \/\/ event from threads which are not able to run java.\n@@ -1812,0 +1807,3 @@\n+    JvmtiDeferredEvent event = JvmtiDeferredEvent::resource_exhausted_event(\n+        resource_exhausted_flags, nullptr, description);\n+    ServiceThread::enqueue_deferred_event(&event);\n","filename":"src\/hotspot\/share\/prims\/jvmtiExport.cpp","additions":4,"deletions":6,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -800,0 +800,13 @@\n+JvmtiDeferredEvent JvmtiDeferredEvent::resource_exhausted_event(\n+      const jint flags, const void* reserved, const char* description) {\n+  JvmtiDeferredEvent event = JvmtiDeferredEvent(TYPE_RESOURCE_EXHAUSTED);\n+  \/\/ Need to make a copy of the description since we don't know how long\n+  \/\/ the event poster will keep it around after we enqueue the\n+  \/\/ deferred event and return. strdup() failure is handled in\n+  \/\/ the post() routine below.\n+  event._event_data.resource_exhausted.flags = flags;\n+  event._event_data.resource_exhausted.reserved = reserved;\n+  event._event_data.resource_exhausted.description = os::strdup(description);\n+  return event;\n+}\n+\n@@ -839,0 +852,13 @@\n+    case TYPE_RESOURCE_EXHAUSTED: {\n+      JvmtiExport::post_resource_exhausted(\n+        _event_data.resource_exhausted.flags,\n+        \/\/ if strdup failed give the event a default name\n+        (_event_data.resource_exhausted.description == nullptr)\n+          ? \"no description\" : _event_data.resource_exhausted.description\n+        );\n+      if (_event_data.resource_exhausted.description != nullptr) {\n+        \/\/ release our copy\n+        os::free((void *)_event_data.resource_exhausted.description);\n+      }\n+      break;\n+    }\n","filename":"src\/hotspot\/share\/prims\/jvmtiImpl.cpp","additions":27,"deletions":1,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1999, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1999, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -300,1 +300,2 @@\n-    TYPE_CLASS_UNLOAD\n+    TYPE_CLASS_UNLOAD,\n+    TYPE_RESOURCE_EXHAUSTED\n@@ -318,0 +319,5 @@\n+    struct {\n+      jint flags;\n+      const void* reserved;\n+      const char* description;\n+    } resource_exhausted;\n@@ -336,1 +342,3 @@\n-\n+  static JvmtiDeferredEvent resource_exhausted_event(\n+      const jint flags, const void* reserved, const char* description)\n+          NOT_JVMTI_RETURN_(JvmtiDeferredEvent());\n","filename":"src\/hotspot\/share\/prims\/jvmtiImpl.hpp","additions":11,"deletions":3,"binary":false,"changes":14,"status":"modified"}]}