{"files":[{"patch":"@@ -97,1 +97,3 @@\n-                    restoreEcho = echo(false);\n+                    synchronized(restoreEchoLock) {\n+                        restoreEcho = echo(false);\n+                    }\n@@ -110,2 +112,5 @@\n-                        if (restoreEcho)\n-                            restoreEcho = echo(true);\n+                        synchronized(restoreEchoLock) {\n+                            if (restoreEcho) {\n+                                restoreEcho = echo(true);\n+                            }\n+                        }\n@@ -124,1 +129,1 @@\n-                        } catch (IOException x) {\n+                        } catch (IOException _) {\n@@ -148,2 +153,4 @@\n-                                        if (restoreEcho) {\n-                                            echo(true);\n+                                        synchronized(restoreEchoLock) {\n+                                            if (restoreEcho) {\n+                                                echo(true);\n+                                            }\n@@ -151,1 +158,1 @@\n-                                    } catch (IOException x) { }\n+                                    } catch (IOException _) { }\n@@ -154,1 +161,1 @@\n-        } catch (IllegalStateException e) {\n+        } catch (IllegalStateException _) {\n@@ -179,0 +186,1 @@\n+    private final Object restoreEchoLock;\n@@ -349,0 +357,1 @@\n+        restoreEchoLock = new Object();\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/io\/JdkConsoleImpl.java","additions":17,"deletions":8,"binary":false,"changes":25,"status":"modified"}]}