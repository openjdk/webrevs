{"files":[{"patch":"@@ -422,0 +422,5 @@\n+  if (!FLAG_IS_DEFAULT(AOTMode)) {\n+    \/\/ Using any form of the new AOTMode switch enables enhanced optimizations.\n+    FLAG_SET_ERGO_IF_DEFAULT(AOTClassLinking, true);\n+  }\n+\n","filename":"src\/hotspot\/share\/cds\/cdsConfig.cpp","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2024, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -62,1 +62,1 @@\n-        \/\/ (2) Assembly Phase\n+        \/\/ (2) Assembly Phase (AOTClassLinking unspecified -> should be enabled by default)\n@@ -80,0 +80,1 @@\n+        out.shouldContain(\"Using AOT-linked classes: true (static archive: has aot-linked classes)\");\n@@ -110,1 +111,1 @@\n-        \/\/ (5) AOTMode=on\n+        \/\/ (6) AOTMode=on\n@@ -122,0 +123,24 @@\n+\n+        \/\/ (7) Assembly Phase with -XX:-AOTClassLinking\n+        pb = ProcessTools.createLimitedTestJavaProcessBuilder(\n+            \"-XX:AOTMode=create\",\n+            \"-XX:-AOTClassLinking\",\n+            \"-XX:AOTConfiguration=\" + aotConfigFile,\n+            \"-XX:AOTCache=\" + aotCacheFile,\n+            \"-Xlog:cds\",\n+            \"-cp\", appJar);\n+        out = CDSTestUtils.executeAndLog(pb, \"asm\");\n+        out.shouldContain(\"Dumping shared data to file:\");\n+        out.shouldMatch(\"cds.*hello[.]aot\");\n+        out.shouldHaveExitValue(0);\n+\n+        \/\/ (8) Production Run with AOTCache, which was created with -XX:-AOTClassLinking\n+        pb = ProcessTools.createLimitedTestJavaProcessBuilder(\n+            \"-XX:AOTCache=\" + aotCacheFile,\n+            \"-Xlog:cds\",\n+            \"-cp\", appJar, helloClass);\n+        out = CDSTestUtils.executeAndLog(pb, \"prod\");\n+        out.shouldContain(\"Using AOT-linked classes: false (static archive: no aot-linked classes)\");\n+        out.shouldContain(\"Opened archive hello.aot.\");\n+        out.shouldContain(\"Hello World\");\n+        out.shouldHaveExitValue(0);\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/AOTFlags.java","additions":28,"deletions":3,"binary":false,"changes":31,"status":"modified"}]}