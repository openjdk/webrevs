{"files":[{"patch":"@@ -708,5 +708,7 @@\n-        synchronized (this) {\n-            if (this.operations == null)\n-                this.prepare();\n-            if (this.context == null)\n-                this.context = new Context();\n+        if (this.operations == null || this.context == null) {\n+            synchronized (this) {\n+                if (this.operations == null)\n+                    this.prepare();\n+                if (this.context == null)\n+                    this.context = new Context();\n+            }\n@@ -893,5 +895,7 @@\n-        synchronized (this) {\n-            if (this.operations == null)\n-                this.prepare();\n-            if (this.context == null)\n-                this.context = new Context();\n+        if (this.operations == null || this.context == null) {\n+            synchronized (this) {\n+                if (this.operations == null)\n+                    this.prepare();\n+                if (this.context == null)\n+                    this.context = new Context();\n+            }\n@@ -1573,5 +1577,7 @@\n-        synchronized (this) {\n-            if (this.operations == null)\n-                this.prepare();\n-            if (this.context == null)\n-                this.context = new Context();\n+        if (this.operations == null || this.context == null) {\n+            synchronized (this) {\n+                if (this.operations == null)\n+                    this.prepare();\n+                if (this.context == null)\n+                    this.context = new Context();\n+            }\n@@ -1742,1 +1748,1 @@\n-    transient Op operations = null;\n+    transient volatile Op operations = null;\n@@ -1744,1 +1750,1 @@\n-    transient Context context = null;\n+    transient volatile Context context = null;\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/xerces\/internal\/impl\/xpath\/regex\/RegularExpression.java","additions":23,"deletions":17,"binary":false,"changes":40,"status":"modified"}]}