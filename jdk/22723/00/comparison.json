{"files":[{"patch":"@@ -707,5 +707,7 @@\n-        synchronized (this) {\n-            if (this.operations == null)\n-                this.prepare();\n-            if (this.context == null)\n-                this.context = new Context();\n+        if (this.operations == null || this.context == null) {\n+            synchronized (this) {\n+                if (this.operations == null)\n+                    this.prepare();\n+                if (this.context == null)\n+                    this.context = new Context();\n+            }\n@@ -892,5 +894,7 @@\n-        synchronized (this) {\n-            if (this.operations == null)\n-                this.prepare();\n-            if (this.context == null)\n-                this.context = new Context();\n+        if (this.operations == null || this.context == null) {\n+            synchronized (this) {\n+                if (this.operations == null)\n+                    this.prepare();\n+                if (this.context == null)\n+                    this.context = new Context();\n+            }\n@@ -1572,5 +1576,7 @@\n-        synchronized (this) {\n-            if (this.operations == null)\n-                this.prepare();\n-            if (this.context == null)\n-                this.context = new Context();\n+        if (this.operations == null || this.context == null) {\n+            synchronized (this) {\n+                if (this.operations == null)\n+                    this.prepare();\n+                if (this.context == null)\n+                    this.context = new Context();\n+            }\n@@ -1741,1 +1747,1 @@\n-    transient Op operations = null;\n+    transient volatile Op operations = null;\n@@ -1743,1 +1749,1 @@\n-    transient Context context = null;\n+    transient volatile Context context = null;\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/xerces\/internal\/impl\/xpath\/regex\/RegularExpression.java","additions":23,"deletions":17,"binary":false,"changes":40,"status":"modified"}]}