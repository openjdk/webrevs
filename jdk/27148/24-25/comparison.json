{"files":[{"patch":"@@ -51,1 +51,2 @@\n-        failures += negativeTests();\n+        failures += zerothRootTests();\n+        failures += negativeWithEvenDegreeTests();\n@@ -72,1 +73,1 @@\n-    private static int negativeTests() {\n+    private static int zerothRootTests() {\n@@ -75,1 +76,1 @@\n-        for (long i = -10; i < 0; i++) {\n+        for (long i = -5; i < 5; i++) {\n@@ -79,3 +80,3 @@\n-                    BigDecimal result = input.sqrt(MathContext.DECIMAL64);\n-                    System.err.println(\"Unexpected sqrt of negative: (\" +\n-                                       input + \").sqrt()  = \" + result );\n+                    BigDecimal result = input.rootn(0, MathContext.DECIMAL64);\n+                    System.err.println(\"Unexpected 0th root of negative: (\" +\n+                                       input + \").rootn(0)  = \" + result );\n@@ -92,0 +93,22 @@\n+    private static int negativeWithEvenDegreeTests() {\n+        int failures = 0;\n+\n+        for (long i = -10; i < 0; i++) {\n+            for (int j = -5; j < 5; j++) {\n+                BigDecimal input = BigDecimal.valueOf(i, j);\n+                for (int n = -4; n <= 4; n += 2) {\n+                    try {\n+                        BigDecimal result = input.sqrt(MathContext.DECIMAL64);\n+                        System.err.println(\"Unexpected nth root of negative: (\" +\n+                                           input + \").rootn(\" + n + \")  = \" + result );\n+                        failures += 1;\n+                    } catch (ArithmeticException e) {\n+                        ; \/\/ Expected\n+                    }\n+                }\n+            }\n+        }\n+\n+        return failures;\n+    }\n+\n@@ -96,4 +119,11 @@\n-            BigDecimal expected = BigDecimal.valueOf(0L, Math.ceilDiv(i, 2));\n-            \/\/ These results are independent of rounding mode\n-            failures += compare(BigDecimal.valueOf(0L, i).sqrt(MathContext.UNLIMITED),\n-                                expected, true, \"zeros\");\n+            BigDecimal input = BigDecimal.valueOf(0L, i);\n+            for (int n = -10; n <= 0; n++) {\n+                try {\n+                    BigDecimal result = input.rootn(n, MathContext.DECIMAL64);\n+                    System.err.println(\"Unexpected nth root of zero: (\" +\n+                                       input + \").rootn(\" + n + \")  = \" + result );\n+                    failures += 1;\n+                } catch (ArithmeticException e) {\n+                    ; \/\/ Expected\n+                }\n+            }\n@@ -101,2 +131,9 @@\n-            failures += compare(BigDecimal.valueOf(0L, i).sqrt(MathContext.DECIMAL64),\n-                                expected, true, \"zeros\");\n+            for (int n = 1; n < 10; n++) {\n+                BigDecimal expected = BigDecimal.valueOf(0L, Math.ceilDiv(i, n));\n+                \/\/ These results are independent of rounding mode\n+                failures += compare(input.rootn(n, MathContext.UNLIMITED),\n+                                    expected, true, \"zeros\");\n+\n+                failures += compare(input.rootn(n, MathContext.DECIMAL64),\n+                                    expected, true, \"zeros\");\n+            }\n","filename":"test\/jdk\/java\/math\/BigDecimal\/SquareRootTests.java","additions":49,"deletions":12,"binary":false,"changes":61,"status":"modified"}]}