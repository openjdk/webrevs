{"files":[{"patch":"@@ -49,0 +49,2 @@\n+    static final KELVIN_DEBUG = true;\n+\n@@ -70,3 +72,13 @@\n-        \/\/ Sleep for 0.5s to make sure theApp is ready for attach from jhsdb\n-        Thread.sleep(500);\n-        run(pb);\n+        \/\/ Sleep to give LingeredApp an opportunity to reach attachable status\n+        Thread.sleep(1000);\n+        int exitValue = run(pb);\n+\n+\tif (KELVIN_DEBUG) {\n+            String stdout = read(out);\n+            String stderr = read(err);\n+\t    System.out.println(\"\");\n+            System.out.println(\"Stdout is: \");\n+            System.out.print(stdout);\n+            System.out.println(\"\");\n+            System.out.println(\"Stderr is: \");\n+            System.out.print(stderr);\n@@ -74,1 +86,8 @@\n-        OutputAnalyzer output = new OutputAnalyzer(read(out));\n+\t    if (exitValue != 0) {\n+                throw new Exception(\"jmap -heap exited with error code: \" + exitValue);\n+            }\n+\n+            OutputAnalyzer output = new OutputAnalyzer(stdout);\n+\t} else {\n+            OutputAnalyzer output = new OutputAnalyzer(read(out));\n+        }\n@@ -81,1 +100,1 @@\n-    private static void run(ProcessBuilder pb) throws Exception {\n+    private static int run(ProcessBuilder pb) throws Exception {\n@@ -84,1 +103,1 @@\n-        if (exitValue != 0) {\n+        if (!KELVIN_DEBUG && (exitValue != 0)) {\n@@ -87,0 +106,1 @@\n+        return exitValue;\n","filename":"test\/hotspot\/jtreg\/gc\/metaspace\/CompressedClassSpaceSizeInJmapHeap.java","additions":26,"deletions":6,"binary":false,"changes":32,"status":"modified"}]}