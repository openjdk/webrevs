{"files":[{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2011, 2023, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2011, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -35,1 +35,0 @@\n-include NativeCompilation.gmk\n","filename":"make\/CompileDemos.gmk","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -139,0 +139,4 @@\n+################################################################################\n+## Build libhsdis\n+################################################################################\n+\n","filename":"make\/Hsdis.gmk","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2012, 2022, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2012, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,1 +33,1 @@\n-include NativeCompilation.gmk\n+include JdkNativeCompilation.gmk\n@@ -50,0 +50,2 @@\n+BITS := $(OPENJDK_TARGET_CPU_BITS)\n+\n@@ -56,2 +58,0 @@\n-BITS := $(OPENJDK_TARGET_CPU_BITS)\n-\n@@ -79,0 +79,4 @@\n+################################################################################\n+## Build data_generator\n+################################################################################\n+\n@@ -80,3 +84,2 @@\n-$(eval $(call SetupNativeCompilation, BUILD_DATA_GENERATOR, \\\n-    PROGRAM := data_generator, \\\n-    OUTPUT_DIR := $(X11WRAPPERS_OUTPUT)\/bin, \\\n+$(eval $(call SetupJdkExecutable, BUILD_DATA_GENERATOR, \\\n+    NAME := data_generator, \\\n@@ -84,2 +87,1 @@\n-    CFLAGS := $(X_CFLAGS) $(DATA_GENERATOR_INCLUDES) $(CFLAGS_JDKEXE), \\\n-    LDFLAGS := $(LDFLAGS_JDKEXE), \\\n+    CFLAGS := $(X_CFLAGS) $(DATA_GENERATOR_INCLUDES), \\\n@@ -87,0 +89,1 @@\n+    OUTPUT_DIR := $(X11WRAPPERS_OUTPUT)\/bin, \\\n@@ -95,0 +98,1 @@\n+    SUPPORT_DIR := $(X11WRAPPERS_OUTPUT)\/run-wrapper, \\\n","filename":"make\/UpdateX11Wrappers.gmk","additions":13,"deletions":9,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -125,0 +125,1 @@\n+#   DEFAULT_LIBCXX -- if false, do not add LIBCXX to LIBS for C++ compilations\n@@ -126,0 +127,1 @@\n+#   DEFAULT_LDFLAGS -- if false, do not add default LDFLAGS\n@@ -132,0 +134,2 @@\n+#   DEFAULT_VERSIONINFO_RESOURCE -- if false, do not set the default\n+#     VERSIONINFO_RESOURCE\n@@ -167,2 +171,4 @@\n-  ifeq ($$($1_LINK_TYPE), C++)\n-    $1_LIBS += $(LIBCXX)\n+  ifneq ($$($1_DEFAULT_LIBCXX), false)\n+    ifeq ($$($1_LINK_TYPE), C++)\n+      $1_LIBS += $(LIBCXX)\n+    endif\n@@ -175,1 +181,3 @@\n-      $$(error Must specify SRC in a MODULE free context)\n+      ifeq ($$($1_EXTRA_FILES), )\n+        $$(error Must specify SRC or EXTRA_FILES in a MODULE free context)\n+      endif\n@@ -191,2 +199,4 @@\n-  ifeq ($$($1_VERSIONINFO_RESOURCE), )\n-    $1_VERSIONINFO_RESOURCE := $$(GLOBAL_VERSION_INFO_RESOURCE)\n+  ifneq ($$($1_DEFAULT_VERSIONINFO_RESOURCE), false)\n+    ifeq ($$($1_VERSIONINFO_RESOURCE), )\n+      $1_VERSIONINFO_RESOURCE := $$(GLOBAL_VERSION_INFO_RESOURCE)\n+    endif\n@@ -211,1 +221,3 @@\n-  $1_SRC_HEADER_FLAGS += $$(addprefix -I, $$(call GetJavaHeaderDir, $$(MODULE)))\n+  ifneq ($$(MODULE), )\n+    $1_SRC_HEADER_FLAGS += $$(addprefix -I, $$(call GetJavaHeaderDir, $$(MODULE)))\n+  endif\n","filename":"make\/common\/JdkNativeCompilation.gmk","additions":18,"deletions":6,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -34,1 +34,1 @@\n-include NativeCompilation.gmk\n+include JdkNativeCompilation.gmk\n@@ -59,3 +59,0 @@\n-  # Always include common test functionality\n-  TEST_CFLAGS := -I$(TOPDIR)\/test\/lib\/native\n-\n@@ -67,3 +64,0 @@\n-    $1_BASE_CFLAGS := $(CFLAGS_JDKLIB) $$(TEST_CFLAGS)\n-    $1_BASE_CXXFLAGS := $(CXXFLAGS_JDKLIB) $$(TEST_CFLAGS)\n-    $1_LDFLAGS := $(LDFLAGS_JDKLIB) $$(call SET_SHARED_LIBRARY_ORIGIN)\n@@ -75,3 +69,0 @@\n-    $1_BASE_CFLAGS := $(CFLAGS_JDKEXE) $$(TEST_CFLAGS)\n-    $1_BASE_CXXFLAGS := $(CXXFLAGS_JDKEXE) $$(TEST_CFLAGS)\n-    $1_LDFLAGS := $(LDFLAGS_JDKEXE) $(LDFLAGS_TESTEXE)\n@@ -80,0 +71,2 @@\n+    $1_LD_SET_ORIGIN := false\n+    $1_LDFLAGS := $(LDFLAGS_TESTEXE)\n@@ -102,0 +95,3 @@\n+  # Always include common test functionality\n+  TEST_CFLAGS := -I$(TOPDIR)\/test\/lib\/native\n+\n@@ -106,1 +102,1 @@\n-    $$(eval $$(call SetupNativeCompilation, BUILD_TEST_$$(name), \\\n+    $$(eval $$(call SetupJdkNativeCompilation, BUILD_TEST_$$(name), \\\n@@ -113,2 +109,3 @@\n-        CFLAGS := $$($1_BASE_CFLAGS) $$($1_CFLAGS) $$($1_CFLAGS_$$(name)), \\\n-        CXXFLAGS := $$($1_BASE_CXXFLAGS) $$($1_CFLAGS) $$($1_CFLAGS_$$(name)), \\\n+        CFLAGS := $$(TEST_CFLAGS) $$($1_CFLAGS) $$($1_CFLAGS_$$(name)), \\\n+        CXXFLAGS := $$(TEST_CFLAGS) $$($1_CFLAGS) $$($1_CFLAGS_$$(name)), \\\n+        LD_SET_ORIGIN := $$($1_LD_SET_ORIGIN), \\\n@@ -119,0 +116,1 @@\n+        DEFAULT_LIBCXX := false, \\\n@@ -120,0 +118,1 @@\n+        DEFAULT_VERSIONINFO_RESOURCE := false, \\\n@@ -132,1 +131,1 @@\n-  # SetupNativeCompilation.\n+  # SetupJdkNativeCompilation.\n","filename":"make\/common\/TestFilesCompilation.gmk","additions":13,"deletions":14,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -137,0 +137,4 @@\n+  ##############################################################################\n+  ## Build launcher \"$1\"\n+  ##############################################################################\n+\n","filename":"make\/common\/modules\/LauncherCommon.gmk","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2013, 2020, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2013, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,1 +32,1 @@\n-include NativeCompilation.gmk\n+include JdkNativeCompilation.gmk\n","filename":"make\/hotspot\/gensrc\/GenerateSources.gmk","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -71,1 +71,5 @@\n-  $(eval $(call SetupNativeCompilation, BUILD_ADLC, \\\n+  ##############################################################################\n+  ## Build adlc\n+  ##############################################################################\n+\n+  $(eval $(call SetupJdkExecutable, BUILD_ADLC, \\\n@@ -73,1 +77,0 @@\n-      TYPE := EXECUTABLE, \\\n@@ -78,0 +81,1 @@\n+      DEFAULT_CFLAGS := false, \\\n@@ -79,0 +83,1 @@\n+      DEFAULT_LDFLAGS := false, \\\n@@ -81,0 +86,1 @@\n+      DEFAULT_VERSIONINFO_RESOURCE := false, \\\n","filename":"make\/hotspot\/gensrc\/GensrcAdlc.gmk","additions":8,"deletions":2,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -47,1 +47,2 @@\n-\n+## Build libgtest\n+################################################################################\n@@ -78,1 +79,2 @@\n-# Additional disabled warnings are due to code in the test source.\n+## Build libjvm (for gtest)\n+################################################################################\n@@ -80,0 +82,1 @@\n+# Additional disabled warnings are due to code in the test source.\n@@ -131,0 +134,2 @@\n+################################################################################\n+## Build gtestLauncher\n","filename":"make\/hotspot\/lib\/CompileGtest.gmk","additions":7,"deletions":2,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -131,1 +131,1 @@\n-# parameter to SetupNativeCompilation allows an empty value to override the\n+# parameter to SetupJdkLibrary allows an empty value to override the\n@@ -162,1 +162,2 @@\n-# Now set up the actual compilation of the main hotspot native library\n+## Build libjvm\n+################################################################################\n","filename":"make\/hotspot\/lib\/CompileJvm.gmk","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2013, 2023, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2013, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -76,1 +76,1 @@\n-    # This will get implicitly picked up by SetupNativeCompilation below.\n+    # This will get implicitly picked up by SetupJdkLibrary below.\n","filename":"make\/hotspot\/lib\/JvmOverrideFiles.gmk","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -102,15 +102,15 @@\n-    $(eval $(call SetupJdkLibrary, BUILD_LIBOSXSECURITY, \\\n-        NAME := osxsecurity, \\\n-        OPTIMIZATION := LOW, \\\n-        DISABLED_WARNINGS_clang_KeystoreImpl.m := deprecated-declarations, \\\n-        LDFLAGS := -L$(SUPPORT_OUTPUTDIR)\/modules_libs\/java.base,\\\n-        JDK_LIBS := $(JDKLIB_LIBS), \\\n-        LIBS_macosx := -lobjc \\\n-            -framework CoreServices \\\n-            -framework Foundation \\\n-            -framework Security, \\\n-    ))\n-\n-    $(BUILD_LIBOSXSECURITY): $(BUILD_LIBJAVA)\n-\n-    TARGETS += $(BUILD_LIBOSXSECURITY)\n+  $(eval $(call SetupJdkLibrary, BUILD_LIBOSXSECURITY, \\\n+      NAME := osxsecurity, \\\n+      OPTIMIZATION := LOW, \\\n+      DISABLED_WARNINGS_clang_KeystoreImpl.m := deprecated-declarations, \\\n+      LDFLAGS := -L$(SUPPORT_OUTPUTDIR)\/modules_libs\/java.base,\\\n+      JDK_LIBS := $(JDKLIB_LIBS), \\\n+      LIBS_macosx := -lobjc \\\n+          -framework CoreServices \\\n+          -framework Foundation \\\n+          -framework Security, \\\n+  ))\n+\n+  $(BUILD_LIBOSXSECURITY): $(BUILD_LIBJAVA)\n+\n+  TARGETS += $(BUILD_LIBOSXSECURITY)\n","filename":"make\/modules\/java.base\/Lib.gmk","additions":15,"deletions":15,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -28,4 +28,0 @@\n-################################################################################\n-## Build libsctp\n-################################################################################\n-\n@@ -33,0 +29,4 @@\n+  ##############################################################################\n+  ## Build libsctp\n+  ##############################################################################\n+\n","filename":"make\/modules\/jdk.sctp\/Lib.gmk","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2016, 2023, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2016, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,1 +31,0 @@\n-include NativeCompilation.gmk\n","filename":"make\/test\/BuildFailureHandler.gmk","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -143,3 +143,0 @@\n-BUILD_HOTSPOT_JTREG_LIBRARIES_CFLAGS := -D__STDC_FORMAT_MACROS -D__STDC_LIMIT_MACROS -D__STDC_CONSTANT_MACROS $(JVMTI_COMMON_INCLUDES)\n-BUILD_HOTSPOT_JTREG_EXECUTABLES_CFLAGS := -D__STDC_FORMAT_MACROS -D__STDC_LIMIT_MACROS -D__STDC_CONSTANT_MACROS $(JVMTI_COMMON_INCLUDES)\n-\n@@ -1530,0 +1527,4 @@\n+# These apply to all tests\n+BUILD_HOTSPOT_JTREG_LIBRARIES_CFLAGS := -D__STDC_FORMAT_MACROS -D__STDC_LIMIT_MACROS -D__STDC_CONSTANT_MACROS $(JVMTI_COMMON_INCLUDES)\n+BUILD_HOTSPOT_JTREG_EXECUTABLES_CFLAGS := -D__STDC_FORMAT_MACROS -D__STDC_LIMIT_MACROS -D__STDC_CONSTANT_MACROS $(JVMTI_COMMON_INCLUDES)\n+\n","filename":"make\/test\/JtregNativeHotspot.gmk","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"}]}