{"files":[{"patch":"@@ -94,1 +94,1 @@\n-size_t EpsilonHeap::unsafe_max_tlab_alloc(Thread* thr) const {\n+size_t EpsilonHeap::unsafe_max_tlab_alloc() const {\n","filename":"src\/hotspot\/share\/gc\/epsilon\/epsilonHeap.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -93,4 +93,4 @@\n-  size_t tlab_capacity(Thread* thr)         const override { return capacity();     }\n-  size_t tlab_used(Thread* thr)             const override { return used();         }\n-  size_t max_tlab_size()                    const override { return _max_tlab_size; }\n-  size_t unsafe_max_tlab_alloc(Thread* thr) const override;\n+  size_t tlab_capacity()         const override { return capacity();     }\n+  size_t tlab_used()             const override { return used();         }\n+  size_t max_tlab_size()         const override { return _max_tlab_size; }\n+  size_t unsafe_max_tlab_alloc() const override;\n","filename":"src\/hotspot\/share\/gc\/epsilon\/epsilonHeap.hpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2261,1 +2261,1 @@\n-size_t G1CollectedHeap::tlab_capacity(Thread* ignored) const {\n+size_t G1CollectedHeap::tlab_capacity() const {\n@@ -2265,1 +2265,1 @@\n-size_t G1CollectedHeap::tlab_used(Thread* ignored) const {\n+size_t G1CollectedHeap::tlab_used() const {\n@@ -2275,1 +2275,1 @@\n-size_t G1CollectedHeap::unsafe_max_tlab_alloc(Thread* ignored) const {\n+size_t G1CollectedHeap::unsafe_max_tlab_alloc() const {\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CollectedHeap.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -1201,2 +1201,2 @@\n-  size_t tlab_capacity(Thread* ignored) const override;\n-  size_t tlab_used(Thread* ignored) const override;\n+  size_t tlab_capacity() const override;\n+  size_t tlab_used() const override;\n@@ -1204,1 +1204,1 @@\n-  size_t unsafe_max_tlab_alloc(Thread* ignored) const override;\n+  size_t unsafe_max_tlab_alloc() const override;\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CollectedHeap.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -113,1 +113,1 @@\n-size_t MutableNUMASpace::tlab_capacity(Thread *ignored) const {\n+size_t MutableNUMASpace::tlab_capacity() const {\n@@ -121,1 +121,1 @@\n-size_t MutableNUMASpace::tlab_used(Thread *ignored) const {\n+size_t MutableNUMASpace::tlab_used() const {\n@@ -129,1 +129,1 @@\n-size_t MutableNUMASpace::unsafe_max_tlab_alloc(Thread *ignored) const {\n+size_t MutableNUMASpace::unsafe_max_tlab_alloc() const {\n","filename":"src\/hotspot\/share\/gc\/parallel\/mutableNUMASpace.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -169,3 +169,3 @@\n-  virtual size_t tlab_capacity(Thread* ignored) const;\n-  virtual size_t tlab_used(Thread* ignored) const;\n-  virtual size_t unsafe_max_tlab_alloc(Thread* ignored) const;\n+  virtual size_t tlab_capacity() const;\n+  virtual size_t tlab_used() const;\n+  virtual size_t unsafe_max_tlab_alloc() const;\n","filename":"src\/hotspot\/share\/gc\/parallel\/mutableNUMASpace.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -120,5 +120,5 @@\n-  virtual size_t used_in_words() const                    { return pointer_delta(top(), bottom()); }\n-  virtual size_t free_in_words() const                    { return pointer_delta(end(),    top()); }\n-  virtual size_t tlab_capacity(Thread* thr) const         { return capacity_in_bytes();            }\n-  virtual size_t tlab_used(Thread* thr) const             { return used_in_bytes();                }\n-  virtual size_t unsafe_max_tlab_alloc(Thread* thr) const { return free_in_bytes();                }\n+  virtual size_t used_in_words() const         { return pointer_delta(top(), bottom()); }\n+  virtual size_t free_in_words() const         { return pointer_delta(end(),    top()); }\n+  virtual size_t tlab_capacity() const         { return capacity_in_bytes();            }\n+  virtual size_t tlab_used() const             { return used_in_bytes();                }\n+  virtual size_t unsafe_max_tlab_alloc() const { return free_in_bytes();                }\n","filename":"src\/hotspot\/share\/gc\/parallel\/mutableSpace.hpp","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -459,2 +459,2 @@\n-size_t ParallelScavengeHeap::tlab_capacity(Thread* thr) const {\n-  return young_gen()->eden_space()->tlab_capacity(thr);\n+size_t ParallelScavengeHeap::tlab_capacity() const {\n+  return young_gen()->eden_space()->tlab_capacity();\n@@ -463,2 +463,2 @@\n-size_t ParallelScavengeHeap::tlab_used(Thread* thr) const {\n-  return young_gen()->eden_space()->tlab_used(thr);\n+size_t ParallelScavengeHeap::tlab_used() const {\n+  return young_gen()->eden_space()->tlab_used();\n@@ -467,2 +467,2 @@\n-size_t ParallelScavengeHeap::unsafe_max_tlab_alloc(Thread* thr) const {\n-  return young_gen()->eden_space()->unsafe_max_tlab_alloc(thr);\n+size_t ParallelScavengeHeap::unsafe_max_tlab_alloc() const {\n+  return young_gen()->eden_space()->unsafe_max_tlab_alloc();\n","filename":"src\/hotspot\/share\/gc\/parallel\/parallelScavengeHeap.cpp","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -217,3 +217,3 @@\n-  size_t tlab_capacity(Thread* thr) const override;\n-  size_t tlab_used(Thread* thr) const override;\n-  size_t unsafe_max_tlab_alloc(Thread* thr) const override;\n+  size_t tlab_capacity() const override;\n+  size_t tlab_used() const override;\n+  size_t unsafe_max_tlab_alloc() const override;\n","filename":"src\/hotspot\/share\/gc\/parallel\/parallelScavengeHeap.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -663,1 +663,1 @@\n-size_t SerialHeap::tlab_capacity(Thread* thr) const {\n+size_t SerialHeap::tlab_capacity() const {\n@@ -668,1 +668,1 @@\n-size_t SerialHeap::tlab_used(Thread* thr) const {\n+size_t SerialHeap::tlab_used() const {\n@@ -672,1 +672,1 @@\n-size_t SerialHeap::unsafe_max_tlab_alloc(Thread* thr) const {\n+size_t SerialHeap::unsafe_max_tlab_alloc() const {\n","filename":"src\/hotspot\/share\/gc\/serial\/serialHeap.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -192,3 +192,3 @@\n-  size_t tlab_capacity(Thread* thr) const override;\n-  size_t tlab_used(Thread* thr) const override;\n-  size_t unsafe_max_tlab_alloc(Thread* thr) const override;\n+  size_t tlab_capacity() const override;\n+  size_t tlab_used() const override;\n+  size_t unsafe_max_tlab_alloc() const override;\n","filename":"src\/hotspot\/share\/gc\/serial\/serialHeap.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -347,1 +347,1 @@\n-  virtual size_t tlab_capacity(Thread *thr) const = 0;\n+  virtual size_t tlab_capacity() const = 0;\n@@ -349,2 +349,2 @@\n-  \/\/ The amount of used space for thread-local allocation buffers for the given thread.\n-  virtual size_t tlab_used(Thread *thr) const = 0;\n+  \/\/ The amount of space used for thread-local allocation buffers.\n+  virtual size_t tlab_used() const = 0;\n@@ -357,1 +357,1 @@\n-  virtual size_t unsafe_max_tlab_alloc(Thread *thr) const = 0;\n+  virtual size_t unsafe_max_tlab_alloc() const = 0;\n","filename":"src\/hotspot\/share\/gc\/shared\/collectedHeap.hpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -75,3 +75,2 @@\n-  Thread* thr     = thread();\n-  size_t capacity = Universe::heap()->tlab_capacity(thr);\n-  size_t used     = Universe::heap()->tlab_used(thr);\n+  size_t capacity = Universe::heap()->tlab_capacity();\n+  size_t used = Universe::heap()->tlab_used();\n@@ -80,1 +79,1 @@\n-  size_t total_allocated = thr->allocated_bytes();\n+  size_t total_allocated = (size_t)thread()->allocated_bytes();\n@@ -151,1 +150,1 @@\n-                          (Universe::heap()->tlab_capacity(thread()) \/ HeapWordSize));\n+                          (Universe::heap()->tlab_capacity() \/ HeapWordSize));\n@@ -207,1 +206,1 @@\n-  size_t capacity = Universe::heap()->tlab_capacity(thread()) \/ HeapWordSize;\n+  size_t capacity = Universe::heap()->tlab_capacity() \/ HeapWordSize;\n@@ -271,1 +270,1 @@\n-    init_sz  = (Universe::heap()->tlab_capacity(thread()) \/ HeapWordSize) \/\n+    init_sz  = (Universe::heap()->tlab_capacity() \/ HeapWordSize) \/\n@@ -292,1 +291,1 @@\n-  size_t tlab_used  = Universe::heap()->tlab_used(thrd);\n+  size_t tlab_used  = Universe::heap()->tlab_used();\n","filename":"src\/hotspot\/share\/gc\/shared\/threadLocalAllocBuffer.cpp","additions":7,"deletions":8,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -57,2 +57,1 @@\n-  \/\/ unsafe_max_tlab_alloc is just a hint.\n-  const size_t available_size = Universe::heap()->unsafe_max_tlab_alloc(thread()) \/ HeapWordSize;\n+  const size_t available_size = Universe::heap()->unsafe_max_tlab_alloc() \/ HeapWordSize;\n","filename":"src\/hotspot\/share\/gc\/shared\/threadLocalAllocBuffer.inline.hpp","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -77,1 +77,1 @@\n-size_t ShenandoahGenerationalHeap::unsafe_max_tlab_alloc(Thread *thread) const {\n+size_t ShenandoahGenerationalHeap::unsafe_max_tlab_alloc() const {\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahGenerationalHeap.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -59,1 +59,1 @@\n-  size_t unsafe_max_tlab_alloc(Thread *thread) const override;\n+  size_t unsafe_max_tlab_alloc() const override;\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahGenerationalHeap.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1510,1 +1510,1 @@\n-size_t ShenandoahHeap::unsafe_max_tlab_alloc(Thread *thread) const {\n+size_t ShenandoahHeap::unsafe_max_tlab_alloc() const {\n@@ -1652,1 +1652,1 @@\n-size_t ShenandoahHeap::tlab_capacity(Thread *thr) const {\n+size_t ShenandoahHeap::tlab_capacity() const {\n@@ -2128,1 +2128,1 @@\n-size_t ShenandoahHeap::tlab_used(Thread* thread) const {\n+size_t ShenandoahHeap::tlab_used() const {\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahHeap.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -695,2 +695,2 @@\n-  size_t tlab_capacity(Thread *thr) const override;\n-  size_t unsafe_max_tlab_alloc(Thread *thread) const override;\n+  size_t tlab_capacity() const override;\n+  size_t unsafe_max_tlab_alloc() const override;\n@@ -698,1 +698,1 @@\n-  size_t tlab_used(Thread* ignored) const override;\n+  size_t tlab_used() const override;\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahHeap.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -225,1 +225,1 @@\n-size_t ZCollectedHeap::tlab_capacity(Thread* ignored) const {\n+size_t ZCollectedHeap::tlab_capacity() const {\n@@ -229,1 +229,1 @@\n-size_t ZCollectedHeap::tlab_used(Thread* ignored) const {\n+size_t ZCollectedHeap::tlab_used() const {\n@@ -237,1 +237,1 @@\n-size_t ZCollectedHeap::unsafe_max_tlab_alloc(Thread* ignored) const {\n+size_t ZCollectedHeap::unsafe_max_tlab_alloc() const {\n","filename":"src\/hotspot\/share\/gc\/z\/zCollectedHeap.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -86,2 +86,2 @@\n-  size_t tlab_capacity(Thread* thr) const override;\n-  size_t tlab_used(Thread* thr) const override;\n+  size_t tlab_capacity() const override;\n+  size_t tlab_used() const override;\n@@ -89,1 +89,1 @@\n-  size_t unsafe_max_tlab_alloc(Thread* thr) const override;\n+  size_t unsafe_max_tlab_alloc() const override;\n","filename":"src\/hotspot\/share\/gc\/z\/zCollectedHeap.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"}]}