{"files":[{"patch":"@@ -742,0 +742,5 @@\n+  # Pass along the path to the tidy html checker\n+  ifneq ($$(TIDY), )\n+    $1_JTREG_BASIC_OPTIONS += -Dtidy=$$(TIDY)\n+  endif\n+\n","filename":"make\/RunTests.gmk","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -179,0 +179,4 @@\n+\n+ifneq ($(TIDY_HOME), )\n+  TIDY := $(TIDY_HOME)\n+endif\n","filename":"make\/RunTestsPrebuiltSpec.gmk","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2011, 2023, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2011, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -205,0 +205,1 @@\n+LIB_TESTS_SETUP_TIDY\n","filename":"make\/autoconf\/configure.ac","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -311,0 +311,26 @@\n+# Setup the tidy html checker\n+AC_DEFUN_ONCE([LIB_TESTS_SETUP_TIDY],\n+[\n+  UTIL_LOOKUP_PROGS(TIDY, tidy)\n+\n+  if test \"x$TIDY\" != x; then\n+    AC_MSG_CHECKING([if tidy is working properly])\n+    tidy_output=`$TIDY --version 2>&1`\n+    if ! $ECHO \"$tidy_output\" | $GREP -q \"HTML Tidy\" 2>&1 > \/dev\/null; then\n+      AC_MSG_RESULT([no])\n+      AC_MSG_NOTICE([$TIDY is not a valid tidy executable and will be ignored. Output from --version: $tidy_output])\n+      TIDY=\n+    elif ! $ECHO \"$tidy_output\" | $GREP -q \"version\" 2>&1 > \/dev\/null; then\n+      AC_MSG_RESULT([no])\n+      AC_MSG_NOTICE([$TIDY is missing a proper version number and will be ignored. Output from --version: $tidy_output])\n+      TIDY=\n+    else\n+      AC_MSG_RESULT([yes])\n+      AC_MSG_CHECKING([for tidy version])\n+      TIDY_VERSION=`$ECHO $tidy_output | $SED -e 's\/.*version \/\/g'`\n+      AC_MSG_RESULT([$TIDY_VERSION])\n+    fi\n+  fi\n+  AC_SUBST(TIDY)\n+])\n+\n","filename":"make\/autoconf\/lib-tests.m4","additions":26,"deletions":0,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -747,0 +747,1 @@\n+TIDY := @TIDY@\n","filename":"make\/autoconf\/spec.gmk.template","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -418,1 +418,1 @@\n-            dependencies: [\"devkit\", \"gtest\", \"build_devkit\", \"graphviz\", \"pandoc\"],\n+            dependencies: [\"devkit\", \"gtest\", \"build_devkit\", \"graphviz\", \"pandoc\", \"tidy\"],\n@@ -444,1 +444,1 @@\n-            dependencies: [\"devkit\", \"gtest\", \"graphviz\", \"pandoc\"],\n+            dependencies: [\"devkit\", \"gtest\", \"graphviz\", \"pandoc\", \"tidy\"],\n@@ -456,1 +456,1 @@\n-            dependencies: [\"devkit\", \"gtest\", \"graphviz\", \"pandoc\"],\n+            dependencies: [\"devkit\", \"gtest\", \"graphviz\", \"pandoc\", \"tidy\"],\n@@ -489,1 +489,1 @@\n-            dependencies: [\"devkit\", \"gtest\", \"build_devkit\", \"graphviz\", \"pandoc\"],\n+            dependencies: [\"devkit\", \"gtest\", \"build_devkit\", \"graphviz\", \"pandoc\", \"tidy\"],\n@@ -1278,0 +1278,8 @@\n+        tidy: {\n+            organization: common.organization,\n+            ext: \"tar.gz\",\n+            revision: \"5.9.20+1\",\n+            environment_path: input.get(\"tidy\", \"home_path\") + \"\/bin\/tidy\",\n+            configure_args: \"TIDY=\" + input.get(\"tidy\", \"home_path\") +\"\/bin\/tidy\",\n+            module: \"tidy-html-\" + (input.target_os === \"macosx\" ? input.target_os : input.target_platform),\n+        },\n","filename":"make\/conf\/jib-profiles.js","additions":12,"deletions":4,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -0,0 +1,86 @@\n+#!\/bin\/bash\n+#\n+# Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+# DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+#\n+# This code is free software; you can redistribute it and\/or modify it\n+# under the terms of the GNU General Public License version 2 only, as\n+# published by the Free Software Foundation.  Oracle designates this\n+# particular file as subject to the \"Classpath\" exception as provided\n+# by Oracle in the LICENSE file that accompanied this code.\n+#\n+# This code is distributed in the hope that it will be useful, but WITHOUT\n+# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+# FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+# version 2 for more details (a copy is included in the LICENSE file that\n+# accompanied this code).\n+#\n+# You should have received a copy of the GNU General Public License version\n+# 2 along with this work; if not, write to the Free Software Foundation,\n+# Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+#\n+# Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+# or visit www.oracle.com if you need additional information or have any\n+# questions.\n+#\n+\n+# Creates a tidy bundle in the build directory. A dependency that can be\n+# used to validate and correct HTML.\n+\n+# wget and cmake are required to build tidy.\n+\n+set -e\n+\n+GITHUB_USER=\"htacg\"\n+REPO_NAME=\"tidy-html5\"\n+COMMIT_HASH=\"d08ddc2860aa95ba8e301343a30837f157977cba\"\n+SCRIPT_DIR=\"$(cd \"$(dirname $0)\" > \/dev\/null && pwd)\"\n+INSTALL_PREFIX=\"${SCRIPT_DIR}\/..\/..\/build\/tidy\/tidy\/\"\n+BUILD_DIR=\"build\/cmake\"\n+\n+OS_NAME=$(uname -s)\n+OS_ARCH=$(uname -m)\n+\n+DOWNLOAD_URL=\"https:\/\/github.com\/$GITHUB_USER\/$REPO_NAME\/archive\/$COMMIT_HASH.tar.gz\"\n+OUTPUT_FILE=\"$REPO_NAME-$COMMIT_HASH.tar.gz\"\n+\n+wget \"$DOWNLOAD_URL\" -O \"$OUTPUT_FILE\"\n+\n+tar -xzf \"$OUTPUT_FILE\"\n+rm -rf \"$OUTPUT_FILE\"\n+\n+SRC_DIR=\"$REPO_NAME-$COMMIT_HASH\"\n+\n+mkdir -p \"$SRC_DIR\/$BUILD_DIR\"\n+cd \"$SRC_DIR\/$BUILD_DIR\"\n+\n+case $OS_NAME in\n+  Linux|Darwin)\n+    echo \"Building Tidy HTML5 for Unix-like platform ($OS_NAME)...\"\n+\n+    CMAKE_ARCH_OPTIONS=\"\"\n+    if [ \"$OS_NAME\" == \"Darwin\" ]; then\n+      if [[ \"$OS_ARCH\" == \"arm64\" || \"$OS_ARCH\" == \"x86_64\" ]]; then\n+        CMAKE_ARCH_OPTIONS=\"-DCMAKE_OSX_ARCHITECTURES=x86_64;arm64\"\n+      fi\n+    fi\n+\n+    cmake ..\/.. -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=\"$INSTALL_PREFIX\" $CMAKE_ARCH_OPTIONS\n+    make install\n+    ;;\n+\n+  *)\n+    echo \"Unsupported OS: $OS_NAME\"\n+    exit 1\n+    ;;\n+esac\n+\n+cd \"$SCRIPT_DIR\"\n+rm -rf $SRC_DIR\n+\n+cd \"$INSTALL_PREFIX..\"\n+PACKAGED_FILE=\"tidy-html5.tar.gz\"\n+\n+tar -czvf \"$PACKAGED_FILE\" -C $INSTALL_PREFIX.. tidy\n+\n+echo \"Created $INSTALL_PREFIX\/..\/$PACKAGED_FILE\"\n","filename":"make\/devkit\/createTidyBundle.sh","additions":86,"deletions":0,"binary":false,"changes":86,"status":"added"}]}