{"files":[{"patch":"@@ -46,0 +46,6 @@\n+#define CHECK_EXCEPTION_FATAL(env, message) \\\n+    if ((*env)->ExceptionCheck(env)) { \\\n+        (*env)->ExceptionClear(env); \\\n+        (*env)->FatalError(env, message); \\\n+    }\n+\n@@ -64,3 +70,1 @@\n-        if (graphicsEnvClass == NULL) {\n-            return JNI_TRUE;\n-        }\n+        CHECK_EXCEPTION_FATAL(env, \"java\/awt\/GraphicsEnvironment class not found\");\n@@ -69,3 +73,1 @@\n-        if (headlessFn == NULL) {\n-            return JNI_TRUE;\n-        }\n+        CHECK_EXCEPTION_FATAL(env, \"isHeadless method not found\");\n@@ -74,0 +76,1 @@\n+        \/\/ If an exception occurred, we assume headless mode and carry on.\n@@ -82,6 +85,0 @@\n-#define CHECK_EXCEPTION_FATAL(env, message) \\\n-    if ((*env)->ExceptionCheck(env)) { \\\n-        (*env)->ExceptionClear(env); \\\n-        (*env)->FatalError(env, message); \\\n-    }\n-\n","filename":"src\/java.desktop\/unix\/native\/libawt\/awt\/awt_LoadLibrary.c","additions":9,"deletions":12,"binary":false,"changes":21,"status":"modified"}]}