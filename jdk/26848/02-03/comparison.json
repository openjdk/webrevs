{"files":[{"patch":"@@ -49,0 +49,1 @@\n+import java.util.OptionalInt;\n@@ -745,5 +746,0 @@\n-    public JPackageCommand setIgnoreExitCode(boolean v) {\n-        ignoreExitCode = v;\n-        return this;\n-    }\n-\n@@ -819,0 +815,4 @@\n+    public Executor.Result executeIgnoreExitCode() {\n+        return execute(OptionalInt.empty());\n+    }\n+\n@@ -824,0 +824,4 @@\n+        return execute(OptionalInt.of(expectedExitCode));\n+    }\n+\n+    private Executor.Result execute(OptionalInt expectedExitCode) {\n@@ -860,1 +864,2 @@\n-        if (expectedExitCode == 0 && !isImagePackageType() && !ignoreExitCode) {\n+        if (expectedExitCode.isPresent() && expectedExitCode.orElseThrow() == 0\n+                && !isImagePackageType()) {\n@@ -869,1 +874,1 @@\n-        if (ignoreExitCode) {\n+        if (expectedExitCode.isEmpty()) {\n@@ -872,1 +877,1 @@\n-            result = copy.createExecutor().execute(expectedExitCode);\n+            result = copy.createExecutor().execute(expectedExitCode.orElseThrow());\n@@ -877,1 +882,2 @@\n-        if (expectedExitCode == 0 && isImagePackageType() && !ignoreExitCode) {\n+        if (expectedExitCode.isPresent() && expectedExitCode.orElseThrow() == 0\n+                && isImagePackageType()) {\n@@ -885,1 +891,1 @@\n-        if (result.exitCode() == 0 && !ignoreExitCode) {\n+        if (result.exitCode() == 0 && expectedExitCode.isPresent()) {\n@@ -1480,1 +1486,0 @@\n-    private boolean ignoreExitCode;\n","filename":"test\/jdk\/tools\/jpackage\/helpers\/jdk\/jpackage\/test\/JPackageCommand.java","additions":16,"deletions":11,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -122,2 +122,2 @@\n-    public void testWarnings(String... args) throws Exception {\n-        final var testPathArg = TKit.TEST_SRC_ROOT.resolve(args[0]);\n+    public void testWarnings(String testPath, String warningId) throws Exception {\n+        final var appContentValue = TKit.TEST_SRC_ROOT.resolve(testPath);\n@@ -125,1 +125,1 @@\n-                args[1], testPathArg);\n+                warningId, appContentValue);\n@@ -128,1 +128,1 @@\n-            .addArguments(\"--app-content\", testPathArg)\n+            .addArguments(\"--app-content\", appContentValue)\n@@ -130,2 +130,1 @@\n-            .setIgnoreExitCode(true)\n-            .execute();\n+            .executeIgnoreExitCode();\n","filename":"test\/jdk\/tools\/jpackage\/share\/AppContentTest.java","additions":5,"deletions":6,"binary":false,"changes":11,"status":"modified"}]}