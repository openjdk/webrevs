{"files":[{"patch":"@@ -30,0 +30,1 @@\n+import java.util.List;\n@@ -97,0 +98,1 @@\n+        validateAppContentDirs(app);\n@@ -126,0 +128,11 @@\n+    private static void validateAppContentDirs(Application app) {\n+        for (var contentDir : app.contentDirs()) {\n+            if (!CONTENTS_SUB_DIRS.stream()\n+                    .anyMatch(subDir -> contentDir.getFileName().toString()\n+                                                  .equals(subDir))) {\n+                Log.info(I18N.format(\"warning.non.standard.contents.sub.dir\",\n+                        contentDir));\n+            }\n+        }\n+    }\n+\n@@ -236,0 +249,4 @@\n+\n+    \/\/ List of standard subdirectories of the \"Contents\" directory\n+    private static final List<String> CONTENTS_SUB_DIRS = List.of(\"MacOS\",\n+            \"Resources\", \"Frameworks\", \"PlugIns\", \"SharedSupport\");\n","filename":"src\/jdk.jpackage\/macosx\/classes\/jdk\/jpackage\/internal\/MacApplicationBuilder.java","additions":17,"deletions":0,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -88,0 +88,1 @@\n+warning.non.standard.contents.sub.dir=Warning: --app-content value \"{0}\" points to the non-standard subdirectory in the \"Contents\" directory of the application bundle. As a result jpackage may produce invalid application bundle which may fail code signing and\/or notarization.\n","filename":"src\/jdk.jpackage\/macosx\/classes\/jdk\/jpackage\/internal\/resources\/MacResources.properties","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -58,0 +58,1 @@\n+            String pAppContentNote;\n@@ -69,0 +70,2 @@\n+                    pAppContentNote\n+                            = I18N.getString(\"MSG_Help_mac_app_content_note\");\n@@ -79,0 +82,1 @@\n+                    pAppContentNote = \"\";\n@@ -89,0 +93,1 @@\n+                    pAppContentNote = \"\";\n@@ -102,0 +107,1 @@\n+                    pAppContentNote = \"\";\n@@ -107,1 +113,1 @@\n-                    pSignSampleUsage));\n+                    pSignSampleUsage, pAppContentNote));\n","filename":"src\/jdk.jpackage\/share\/classes\/jdk\/jpackage\/internal\/CLIHelp.java","additions":8,"deletions":2,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2017, 2023, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -136,1 +136,1 @@\n-\\n\\\n+{7}\\n\\\n@@ -337,0 +337,7 @@\n+\n+MSG_Help_mac_app_content_note=\\\n+\\          Note: The value should be a directory with the \"Resources\"\\n\\\n+\\          subdirectory (or any other directory that is valid in the \"Contents\"\\n\\\n+\\          directory of the application bundle). Otherwise, jpackage may produce\\n\\\n+\\          invalid application bundle which may fail code signing and\/or\\n\\\n+\\          notarization.\\n\\\n","filename":"src\/jdk.jpackage\/share\/classes\/jdk\/jpackage\/internal\/resources\/HelpResources.properties","additions":9,"deletions":2,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -193,0 +193,6 @@\n+    macOS note: The value should be a directory with the \"Resources\"\n+                subdirectory (or any other directory that is valid in the\n+                \"Contents\" directory of the application bundle). Otherwise,\n+                jpackage may produce invalid application bundle which may fail\n+                code signing and\/or notarization.\n+\n","filename":"src\/jdk.jpackage\/share\/man\/jpackage.md","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -91,1 +91,7 @@\n-        ADD_LAUNCHER_PROPERTY_FILE;\n+        ADD_LAUNCHER_PROPERTY_FILE,\n+        APP_CONTENT_NON_STANDARD_DIR(cmd -> {\n+            final var appContentDir\n+                    = TKit.createTempDirectory(\"app-content-non-standard-dir\");\n+\n+            return TKit.createTempFile(appContentDir.resolve(\"Foo.txt\"));\n+        });\n@@ -609,1 +615,5 @@\n-                        }, Token.JAVA_HOME.token()))\n+                        }, Token.JAVA_HOME.token())),\n+                testSpec().nativeType().addArgs(\"--app-content\", Token.APP_CONTENT_NON_STANDARD_DIR.token())\n+                        .error(\"warning.non.standard.contents.sub.dir\", JPackageCommand.cannedArgument(cmd -> {\n+                            return Path.of(cmd.getArgumentValue(\"--app-content\"));\n+                        }, Token.APP_CONTENT_NON_STANDARD_DIR.token()))\n","filename":"test\/jdk\/tools\/jpackage\/share\/ErrorTest.java","additions":12,"deletions":2,"binary":false,"changes":14,"status":"modified"}]}