{"files":[{"patch":"@@ -32,1 +32,1 @@\n- * @run main bug4952462\n+ * @run main\/othervm -Dsun.java2d.uiScale=1 bug4952462\n@@ -44,4 +44,2 @@\n-import javax.swing.plaf.metal.MetalTheme;\n-\n-import jtreg.SkippedException;\n-import sun.awt.AppContext;\n+import javax.swing.plaf.metal.MetalLookAndFeel;\n+import javax.swing.plaf.metal.OceanTheme;\n@@ -55,0 +53,1 @@\n+            MetalLookAndFeel.setCurrentTheme(new OceanTheme());\n@@ -56,0 +55,12 @@\n+            Robot r = new Robot();\n+            SwingUtilities.invokeAndWait(() -> {\n+                frame = new JFrame(\"Metal JRadioButton Foreground Color Test\");\n+                frame.getContentPane().setLayout(new FlowLayout());\n+                rb = new JRadioButton(\"RadioButton\", true);\n+                rb.setEnabled(false);\n+                rb.setForeground(Color.RED);\n+                frame.getContentPane().add(rb);\n+                frame.setSize(250, 100);\n+                frame.setLocationRelativeTo(null);\n+                frame.setVisible(true);\n+            });\n@@ -57,20 +68,2 @@\n-            MetalTheme theme = (MetalTheme) AppContext.getAppContext().get(\"currentMetalTheme\");\n-            if (theme == null || !\"Ocean\".equals(theme.getName())) {\n-                throw new SkippedException(\"Current theme is not Ocean. Test is \" +\n-                        \"only for Metal's Ocean theme. Skipping test.\");\n-            } else {\n-                Robot r = new Robot();\n-                SwingUtilities.invokeAndWait(() -> {\n-                    frame = new JFrame(\"Metal JRadioButton Foreground Color Test\");\n-                    frame.getContentPane().setLayout(new FlowLayout());\n-                    rb = new JRadioButton(\"RadioButton\", true);\n-                    rb.setEnabled(false);\n-                    rb.setForeground(Color.RED);\n-                    frame.getContentPane().add(rb);\n-                    frame.setSize(250, 100);\n-                    frame.setLocationRelativeTo(null);\n-                    frame.setVisible(true);\n-                });\n-\n-                r.waitForIdle();\n-                r.delay(500);\n+            r.waitForIdle();\n+            r.delay(500);\n@@ -78,9 +71,8 @@\n-                SwingUtilities.invokeAndWait(() -> {\n-                    Point p = rb.getLocationOnScreen();\n-                    for (int i = 0; i < 50; i++) {\n-                        Color c = r.getPixelColor(p.x + 10 + i, p.y + (rb.getHeight() \/ 2));\n-                        System.out.println(c);\n-                        if (c.getRed() > 200 && c.getBlue() < 200 && c.getGreen() < 200) {\n-                            throw new RuntimeException(\"Test failed. Radiobutton is red \" +\n-                                    \"and not grey.\");\n-                        }\n+            SwingUtilities.invokeAndWait(() -> {\n+                Point p = rb.getLocationOnScreen();\n+                for (int i = 0; i < 50; i++) {\n+                    Color c = r.getPixelColor(p.x + 10 + i, p.y + (rb.getHeight() \/ 2));\n+                    System.out.println(c);\n+                    if (c.getRed() > 200 && c.getBlue() < 80 && c.getGreen() < 80) {\n+                        throw new RuntimeException(\"Test failed. Radiobutton is red \" +\n+                                \"and not grey.\");\n@@ -88,2 +80,2 @@\n-                });\n-            }\n+                }\n+            });\n","filename":"test\/jdk\/javax\/swing\/plaf\/metal\/MetalIconFactory\/bug4952462.java","additions":28,"deletions":36,"binary":false,"changes":64,"status":"modified"}]}