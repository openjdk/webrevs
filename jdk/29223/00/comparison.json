{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2021, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2021, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,1 +27,0 @@\n-#include \"runtime\/atomicAccess.hpp\"\n@@ -49,2 +48,2 @@\n-volatile int64_t ZJNICritical::_count;\n-ZConditionLock*  ZJNICritical::_lock;\n+Atomic<int64_t> ZJNICritical::_count;\n+ZConditionLock* ZJNICritical::_lock;\n@@ -53,1 +52,1 @@\n-  _count = 0;\n+  precond(_count.load_relaxed() == 0);\n@@ -59,1 +58,1 @@\n-    const int64_t count = AtomicAccess::load_acquire(&_count);\n+    const int64_t count = _count.load_acquire();\n@@ -64,1 +63,1 @@\n-      while (AtomicAccess::load_acquire(&_count) < 0) {\n+      while (_count.load_acquire() < 0) {\n@@ -73,1 +72,1 @@\n-    if (AtomicAccess::cmpxchg(&_count, count, -(count + 1)) != count) {\n+    if (_count.compare_exchange(count, -(count + 1)) != count) {\n@@ -83,1 +82,1 @@\n-      while (AtomicAccess::load_acquire(&_count) != -1) {\n+      while (_count.load_acquire() != -1) {\n@@ -94,1 +93,1 @@\n-  const int64_t count = AtomicAccess::load_acquire(&_count);\n+  const int64_t count = _count.load_acquire();\n@@ -99,1 +98,1 @@\n-  AtomicAccess::release_store(&_count, (int64_t)0);\n+  _count.release_store(0);\n@@ -105,1 +104,1 @@\n-    const int64_t count = AtomicAccess::load_acquire(&_count);\n+    const int64_t count = _count.load_acquire();\n@@ -115,1 +114,1 @@\n-      while (AtomicAccess::load_acquire(&_count) < 0) {\n+      while (_count.load_acquire() < 0) {\n@@ -124,1 +123,1 @@\n-    if (AtomicAccess::cmpxchg(&_count, count, count + 1) != count) {\n+    if (_count.compare_exchange(count, count + 1) != count) {\n@@ -145,1 +144,1 @@\n-    const int64_t count = AtomicAccess::load_acquire(&_count);\n+    const int64_t count = _count.load_acquire();\n@@ -150,1 +149,1 @@\n-      if (AtomicAccess::cmpxchg(&_count, count, count - 1) != count) {\n+      if (_count.compare_exchange(count, count - 1) != count) {\n@@ -155,1 +154,1 @@\n-      if (AtomicAccess::cmpxchg(&_count, count, count + 1) != count) {\n+      if (_count.compare_exchange(count, count + 1) != count) {\n","filename":"src\/hotspot\/share\/gc\/z\/zJNICritical.cpp","additions":16,"deletions":17,"binary":false,"changes":33,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2021, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2021, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,0 +28,1 @@\n+#include \"runtime\/atomic.hpp\"\n@@ -34,2 +35,2 @@\n-  static volatile int64_t _count;\n-  static ZConditionLock*  _lock;\n+  static Atomic<int64_t> _count;\n+  static ZConditionLock* _lock;\n","filename":"src\/hotspot\/share\/gc\/z\/zJNICritical.hpp","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"}]}