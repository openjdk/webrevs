{"files":[{"patch":"@@ -59,1 +59,1 @@\n-  if ((G1EagerReclaimWithRefs || cast_to_oop(r->bottom())->is_typeArray()) && !r->rem_set()->is_tracked()) {\n+  if (!r->rem_set()->is_tracked()) {\n","filename":"src\/hotspot\/share\/gc\/g1\/g1RemSetTrackingPolicy.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -383,3 +383,1 @@\n-\n-      \/\/ All regions that were allocated before marking have a TAMS != bottom.\n-      bool allocated_after_mark_start = region->bottom() == _g1h->concurrent_mark()->top_at_mark_start(region);\n+      \/\/\n@@ -399,3 +397,10 @@\n-      bool mark_in_progress = _g1h->collector_state()->mark_in_progress();\n-      return (obj->is_typeArray() || (G1EagerReclaimWithRefs && (allocated_after_mark_start || !mark_in_progress))) &&\n-             _g1h->is_potential_eager_reclaim_candidate(region);\n+      if (!obj->is_typeArray()) {\n+        \/\/ All regions that were allocated before marking have a TAMS != bottom.\n+        bool allocated_before_mark_start = region->bottom() != _g1h->concurrent_mark()->top_at_mark_start(region);\n+        bool mark_in_progress = _g1h->collector_state()->mark_in_progress();\n+\n+        if (allocated_before_mark_start && mark_in_progress) {\n+          return false;\n+        }\n+      }\n+      return _g1h->is_potential_eager_reclaim_candidate(region);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1YoungCollector.cpp","additions":11,"deletions":6,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -397,1 +397,1 @@\n-      guarantee(obj->is_typeArray() || (G1EagerReclaimWithRefs && (allocated_after_mark_start || !mark_in_progress)),\n+      guarantee(obj->is_typeArray() || (allocated_after_mark_start || !mark_in_progress),\n","filename":"src\/hotspot\/share\/gc\/g1\/g1YoungGCPostEvacuateTasks.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -299,3 +299,0 @@\n-  product(bool, G1EagerReclaimWithRefs, true, DIAGNOSTIC,                   \\\n-          \"Allow eager reclaim of non-typeArray humongous objects.\")        \\\n-                                                                            \\\n","filename":"src\/hotspot\/share\/gc\/g1\/g1_globals.hpp","additions":0,"deletions":3,"binary":false,"changes":3,"status":"modified"}]}