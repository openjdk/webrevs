{"files":[{"patch":"@@ -1354,1 +1354,3 @@\n-  srli(tmp1, v, 22);\n+  if (upper)\n+    tmp1 = v;\n+  srli(tmp1, v, upper ? 24 : 22);\n@@ -1357,2 +1359,7 @@\n-  andi(tmp1, tmp1, (right_8_bits << 2));\n-  add(tmp1, tmp1, table0);\n+  if (upper) {\n+    \/\/ for 'upper' cases there's no need to clear bits other than lowest two\n+    shadd(tmp1, tmp1, table0, tmp1, 2);\n+  } else {\n+    andi(tmp1, tmp1, (right_8_bits << 2));\n+    add(tmp1, tmp1, table0);\n+  }\n","filename":"src\/hotspot\/cpu\/riscv\/macroAssembler_riscv.cpp","additions":10,"deletions":3,"binary":false,"changes":13,"status":"modified"}]}