{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2004, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2004, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -108,0 +108,15 @@\n+            while (thrd.isAlive()) {\n+                logger.display(\"Thread state: \" + thrd.getState()\n+                    + \" - waiting for completion.\");\n+                try {\n+                    \/\/ small delay to avoid produce huge amount of output\n+                    Thread.sleep(100);\n+                } catch (InterruptedException e) {\n+                }\n+            }\n+            try {\n+                \/\/ give some time wait thread to exit completely\n+                Thread.sleep(2000);\n+            } catch (InterruptedException e) {\n+            }\n+\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/events\/EM02\/em02t003.java","additions":16,"deletions":1,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -242,0 +242,3 @@\n+\n+    public static final int MAX_UNLOAD_ATTEMPS = 10;\n+\n@@ -250,0 +253,11 @@\n+        int count = 0;\n+        while (count++ < MAX_UNLOAD_ATTEMPS && !isClassLoaderReclaimed()) {\n+            System.out.println(\"ClassUnloader: waiting for class loader reclaiming... \" + count);\n+            WhiteBox.getWhiteBox().fullGC();\n+            try {\n+                \/\/ small delay to give more changes to process objects\n+                \/\/ inside VM like jvmti deferred queue\n+                Thread.sleep(100);\n+            } catch (InterruptedException e) {\n+            }\n+        }\n@@ -253,0 +267,1 @@\n+            System.out.println(\"ClassUnloader: class loader has been reclaimed.\");\n@@ -258,0 +273,1 @@\n+        System.out.println(\"ClassUnloader: class loader is still reachable.\");\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/share\/ClassUnloader.java","additions":16,"deletions":0,"binary":false,"changes":16,"status":"modified"}]}