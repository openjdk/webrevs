{"files":[{"patch":"@@ -32,0 +32,1 @@\n+#include \"compiler\/cHeapStringHolder.hpp\"\n@@ -2218,0 +2219,1 @@\n+  CHeapStringHolder inline_messages;\n@@ -2357,1 +2359,6 @@\n-    task->mark_finished(os::elapsed_counter());\n+    \/\/ Copy out inline messages to the outer block.\n+    const char* msgs = ci_env.inline_messages();\n+    if (msgs != nullptr) {\n+      inline_messages.set(msgs);\n+    }\n+  }\n@@ -2359,22 +2366,20 @@\n-    if (failure_reason != nullptr) {\n-      task->set_failure_reason(failure_reason, failure_reason_on_C_heap);\n-      if (CompilationLog::log() != nullptr) {\n-        CompilationLog::log()->log_failure(thread, task, failure_reason, retry_message);\n-      }\n-      if (should_print_compilation) {\n-        ttyLocker ttyl;\n-        FormatBufferResource msg = retry_message != nullptr ?\n-          FormatBufferResource(\"COMPILE SKIPPED: %s (%s)\", failure_reason, retry_message) :\n-          FormatBufferResource(\"COMPILE SKIPPED: %s\",      failure_reason);\n-        task->print(tty, msg);\n-      }\n-    } else {\n-      if (should_print_compilation) {\n-        ttyLocker ttyl;\n-        task->print_tty();\n-\n-        \/\/ Print inlining information for successful compilations\n-        const char* inline_msgs = ci_env.inline_messages();\n-        if (inline_msgs != nullptr) {\n-          tty->print_raw_cr(inline_msgs);\n-        }\n+  task->mark_finished(os::elapsed_counter());\n+\n+  if (failure_reason != nullptr) {\n+    task->set_failure_reason(failure_reason, failure_reason_on_C_heap);\n+    if (CompilationLog::log() != nullptr) {\n+      CompilationLog::log()->log_failure(thread, task, failure_reason, retry_message);\n+    }\n+    if (should_print_compilation) {\n+      ttyLocker ttyl;\n+      FormatBufferResource msg = retry_message != nullptr ?\n+        FormatBufferResource(\"COMPILE SKIPPED: %s (%s)\", failure_reason, retry_message) :\n+        FormatBufferResource(\"COMPILE SKIPPED: %s\",      failure_reason);\n+      task->print(tty, msg);\n+    }\n+  } else {\n+    if (should_print_compilation) {\n+      ttyLocker ttyl;\n+      task->print_tty();\n+      if (inline_messages.get() != nullptr) {\n+        tty->print_raw_cr(inline_messages.get());\n@@ -2382,1 +2387,0 @@\n-      task->print_ul();\n@@ -2384,0 +2388,1 @@\n+    task->print_ul();\n","filename":"src\/hotspot\/share\/compiler\/compileBroker.cpp","additions":29,"deletions":24,"binary":false,"changes":53,"status":"modified"}]}