{"files":[{"patch":"@@ -1486,1 +1486,1 @@\n-    bool is_virtual = java_lang_VirtualThread::is_instance(thread_oop);\n+    bool is_virtual = thread_oop->is_a(vmClasses::BaseVirtualThread_klass());\n@@ -1506,0 +1506,1 @@\n+  jint nWant_Skip = 0;\n@@ -1517,0 +1518,7 @@\n+    for(jint i = 0; i < nWant; i++) {\n+      JavaThread* w = wantList->at(i);\n+      oop thread_oop = get_vthread_or_thread_oop(w);\n+      if (thread_oop->is_a(vmClasses::BaseVirtualThread_klass())) {\n+        nWant_Skip++;\n+      }\n+    }\n@@ -1533,1 +1541,1 @@\n-      if (java_lang_VirtualThread::is_instance(thread_oop)) {\n+      if (thread_oop->is_a(vmClasses::BaseVirtualThread_klass())) {\n@@ -1539,1 +1547,1 @@\n-  ret.waiter_count = nWant;\n+  ret.waiter_count = nWant - nWant_Skip;\n@@ -1579,1 +1587,1 @@\n-        bool is_virtual = java_lang_VirtualThread::is_instance(thread_oop);\n+        bool is_virtual = thread_oop->is_a(vmClasses::BaseVirtualThread_klass());\n@@ -1581,1 +1589,1 @@\n-        if (java_lang_VirtualThread::is_instance(thread_oop)) {\n+        if (is_virtual) {\n","filename":"src\/hotspot\/share\/prims\/jvmtiEnvBase.cpp","additions":13,"deletions":5,"binary":false,"changes":18,"status":"modified"}]}