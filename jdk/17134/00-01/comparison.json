{"files":[{"patch":"@@ -47,1 +47,0 @@\n-#include \"prims\/jvmtiEnvBase.hpp\"\n@@ -1646,1 +1645,10 @@\n-    return JvmtiEnvBase::get_JavaThread_or_null(vt) != nullptr;\n+    \/\/ The code should be consistent with the \"mounted virtual thread\" case\n+    \/\/ (VM_HeapDumper::dump_stack_traces(), ThreadDumper::get_top_frame()).\n+    \/\/ I.e. virtual thread is mounted if its carrierThread is not null\n+    \/\/ and is_vthread_mounted() for the carrier thread returns true.\n+    oop carrier_thread = java_lang_VirtualThread::carrier_thread(vt);\n+    if (carrier_thread == nullptr) {\n+      return false;\n+    }\n+    JavaThread* java_thread = java_lang_Thread::thread(carrier_thread);\n+    return java_thread->is_vthread_mounted();\n","filename":"src\/hotspot\/share\/services\/heapDumper.cpp","additions":10,"deletions":2,"binary":false,"changes":12,"status":"modified"}]}