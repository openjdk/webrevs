{"files":[{"patch":"@@ -182,1 +182,2 @@\n-    ShenandoahObjectCountClosure count(&local_cit);\n+    ShenandoahIsAliveClosure is_alive;\n+    ShenandoahObjectCountClosure count(&local_cit, &is_alive);\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahConcurrentMark.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -78,1 +78,2 @@\n-      ShenandoahObjectCountClosure count(&local_cit);\n+      ShenandoahIsAliveClosure is_alive;\n+      ShenandoahObjectCountClosure count(&local_cit, &is_alive);\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahMark.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -0,0 +1,1 @@\n+#include \"gc\/shenandoah\/shenandoahClosures.inline.hpp\"\n@@ -17,0 +18,4 @@\n+bool ShenandoahObjectCountClosure::should_visit(oop o) {\n+  return _filter->do_object_b(o);\n+}\n+\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahObjectCountClosure.cpp","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -12,0 +12,2 @@\n+class ShenandoahIsAliveClosure;\n+\n@@ -15,0 +17,2 @@\n+  ShenandoahIsAliveClosure* _filter;\n+\n@@ -22,1 +26,3 @@\n-    _cit->record_instance(obj);\n+    if (should_visit(obj)) {\n+      _cit->record_instance(obj);\n+    }\n@@ -26,1 +32,1 @@\n-  ShenandoahObjectCountClosure(KlassInfoTable* cit) : _cit(cit) {}\n+  ShenandoahObjectCountClosure(KlassInfoTable* cit, ShenandoahIsAliveClosure* is_alive) : _cit(cit), _filter(is_alive) {}\n@@ -32,0 +38,3 @@\n+<<<<<<< HEAD\n+\n+  bool should_visit(oop o);\n@@ -33,0 +42,5 @@\n+=======\n+  \n+  bool should_visit(oop o);\n+  \n+>>>>>>> 774f4e2b8592424f74d3fea4c509d1fc95a20c39\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahObjectCountClosure.hpp","additions":16,"deletions":2,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -132,1 +132,2 @@\n-        ShenandoahObjectCountClosure count(&local_cit);\n+        ShenandoahIsAliveClosure is_alive;\n+        ShenandoahObjectCountClosure count(&local_cit, &is_alive);\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahSTWMark.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"}]}