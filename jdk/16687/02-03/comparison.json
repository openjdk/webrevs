{"files":[{"patch":"@@ -801,0 +801,4 @@\n+            DWORD keysetType;\n+            ::CryptGetProvParam((HCRYPTPROV)hCryptProv, PP_KEYSET_TYPE, \/\/deprecated\n+                (BYTE*)&keysetType, &cbData, 0);\n+\n@@ -803,1 +807,1 @@\n-                PROV_RSA_AES, 0) == FALSE)\n+                PROV_RSA_AES, 0 | keysetType) == FALSE)\n@@ -805,10 +809,2 @@\n-                \/\/ If the key is in a local machine store, we need to try again with CRYPT_MACHINE flag.\n-                \/\/ See https:\/\/learn.microsoft.com\/en-us\/troubleshoot\/windows-server\/windows-security\/cryptacquirecontext-troubleshooting\n-                if (GetLastError() != NTE_BAD_KEYSET\n-                        || ::CryptAcquireContext(&hCryptProvAlt, LPCSTR(pbData), NULL, \/\/deprecated\n-                                                 PROV_RSA_AES, CRYPT_MACHINE_KEYSET) == FALSE)\n-                {\n-                    ThrowException(env, SIGNATURE_EXCEPTION, GetLastError());\n-                    __leave;\n-                }\n-\n+                ThrowException(env, SIGNATURE_EXCEPTION, GetLastError());\n+                __leave;\n","filename":"src\/jdk.crypto.mscapi\/windows\/native\/libsunmscapi\/security.cpp","additions":7,"deletions":11,"binary":false,"changes":18,"status":"modified"}]}