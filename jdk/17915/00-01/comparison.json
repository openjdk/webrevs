{"files":[{"patch":"@@ -87,1 +87,1 @@\n-        PrintDebugString(\"[ERROR]: *** Exception occured while doing: %s; returning %d\", situationDescription, returnVal);   \\\n+        PrintDebugString(\"[ERROR]: *** Exception occured while doing: %s - call to GetStringLength; returning %d\", situationDescription, returnVal);   \\\n@@ -93,1 +93,7 @@\n-    jniEnv->ReleaseStringChars(js, stringBytes);\n+    jniEnv->ReleaseStringChars(js, stringBytes);                                                \\\n+    if (exception = jniEnv->ExceptionOccurred()) {                                              \\\n+        PrintDebugString(\"[ERROR]: *** Exception occured while doing: %s - call to ReleaseStringChars; returning %d\", situationDescription, returnVal);   \\\n+        jniEnv->ExceptionDescribe();                                                            \\\n+        jniEnv->ExceptionClear();                                                               \\\n+        return (returnVal);                                                                     \\\n+    }\n@@ -1228,2 +1234,1 @@\n-            EXCEPTION_CHECK_WITH_RELEASE(\"Getting AccessibleName - call to GetStringLength()\", FALSE, js, stringBytes);\n-            EXCEPTION_CHECK(\"Getting AccessibleName - call to ReleaseStringChars()\", FALSE);\n+            EXCEPTION_CHECK_WITH_RELEASE(\"Getting AccessibleName\", FALSE, js, stringBytes);\n@@ -1392,2 +1397,1 @@\n-                EXCEPTION_CHECK_WITH_RELEASE(\"Getting AccessibleAttributesAtIndex - call to GetStringLength()\", FALSE, js, stringBytes);\n-                EXCEPTION_CHECK(\"Getting AccessibleAttributesAtIndex - call to ReleaseStringChars()\", FALSE);\n+                EXCEPTION_CHECK_WITH_RELEASE(\"Getting AccessibleAttributesAtIndex\", FALSE, js, stringBytes);\n@@ -1746,2 +1750,1 @@\n-            EXCEPTION_CHECK_WITH_RELEASE(\"Getting AccessibleName - call to GetStringLength()\", FALSE, js, stringBytes);\n-            EXCEPTION_CHECK(\"Getting AccessibleName - call to ReleaseStringChars()\", FALSE);\n+            EXCEPTION_CHECK_WITH_RELEASE(\"Getting AccessibleName\", FALSE, js, stringBytes);\n@@ -1777,2 +1780,1 @@\n-            EXCEPTION_CHECK_WITH_RELEASE(\"Getting AccessibleName - call to GetStringLength()\", FALSE, js, stringBytes);\n-            EXCEPTION_CHECK(\"Getting AccessibleName - call to ReleaseStringChars()\", FALSE);\n+            EXCEPTION_CHECK_WITH_RELEASE(\"Getting AccessibleName\", FALSE, js, stringBytes);\n@@ -1808,2 +1810,1 @@\n-            EXCEPTION_CHECK_WITH_RELEASE(\"Getting AccessibleRole - call to GetStringLength()\", FALSE, js, stringBytes);\n-            EXCEPTION_CHECK(\"Getting AccessibleRole - call to ReleaseStringChars()\", FALSE);\n+            EXCEPTION_CHECK_WITH_RELEASE(\"Getting AccessibleRole\", FALSE, js, stringBytes);\n@@ -1839,2 +1840,1 @@\n-            EXCEPTION_CHECK_WITH_RELEASE(\"Getting AccessibleRole_en_US - call to GetStringLength()\", FALSE, js, stringBytes);\n-            EXCEPTION_CHECK(\"Getting AccessibleRole_en_US - call to ReleaseStringChars()\", FALSE);\n+            EXCEPTION_CHECK_WITH_RELEASE(\"Getting AccessibleRole_en_US\", FALSE, js, stringBytes);\n@@ -1869,2 +1869,1 @@\n-            EXCEPTION_CHECK_WITH_RELEASE(\"Getting AccessibleState - call to GetStringLength()\", FALSE, js, stringBytes);\n-            EXCEPTION_CHECK(\"Getting AccessibleState - call to ReleaseStringChars()\", FALSE);\n+            EXCEPTION_CHECK_WITH_RELEASE(\"Getting AccessibleState\", FALSE, js, stringBytes);\n@@ -1899,2 +1898,1 @@\n-            EXCEPTION_CHECK_WITH_RELEASE(\"Getting AccessibleState_en_US - call to GetStringLength()\", FALSE, js, stringBytes);\n-            EXCEPTION_CHECK(\"Getting AccessibleState_en_US - call to ReleaseStringChars()\", FALSE);\n+            EXCEPTION_CHECK_WITH_RELEASE(\"Getting AccessibleState_en_US\", FALSE, js, stringBytes);\n@@ -2814,2 +2812,1 @@\n-            EXCEPTION_CHECK_WITH_RELEASE(\"Getting AccessibleRelation key - call to GetStringLength()\", FALSE, js, stringBytes);\n-            EXCEPTION_CHECK(\"Getting AccessibleRelation key - call to ReleaseStringChars()\", FALSE);\n+            EXCEPTION_CHECK_WITH_RELEASE(\"Getting AccessibleRelation key\", FALSE, js, stringBytes);\n@@ -2919,2 +2916,1 @@\n-            EXCEPTION_CHECK_WITH_RELEASE(\"Getting AccessibleHyperlink text - call to GetStringLength()\", FALSE, js, stringBytes);\n-            EXCEPTION_CHECK(\"Getting AccessibleHyperlink text - call to ReleaseStringChars()\", FALSE);\n+            EXCEPTION_CHECK_WITH_RELEASE(\"Getting AccessibleHyperlink text\", FALSE, js, stringBytes);\n@@ -3055,2 +3051,1 @@\n-            EXCEPTION_CHECK_WITH_RELEASE(\"Getting AccessibleHyperlink text - call to GetStringLength()\", FALSE, js, stringBytes);\n-            EXCEPTION_CHECK(\"Getting AccessibleHyperlink text - call to ReleaseStringChars()\", FALSE);\n+            EXCEPTION_CHECK_WITH_RELEASE(\"Getting AccessibleHyperlink text\", FALSE, js, stringBytes);\n@@ -3173,2 +3168,1 @@\n-        EXCEPTION_CHECK_WITH_RELEASE(\"Getting AccessibleHyperlink text - call to GetStringLength()\", FALSE, js, stringBytes);\n-        EXCEPTION_CHECK(\"Getting AccessibleHyperlink text - call to ReleaseStringChars()\", FALSE);\n+        EXCEPTION_CHECK_WITH_RELEASE(\"Getting AccessibleHyperlink text\", FALSE, js, stringBytes);\n@@ -3301,2 +3295,1 @@\n-            EXCEPTION_CHECK_WITH_RELEASE(\"Getting AccessibleIcon description - call to GetStringLength()\", FALSE, js, stringBytes);\n-            EXCEPTION_CHECK(\"Getting AccessibleIcon description - call to ReleaseStringChars()\", FALSE);\n+            EXCEPTION_CHECK_WITH_RELEASE(\"Getting AccessibleIcon description\", FALSE, js, stringBytes);\n@@ -3379,2 +3372,1 @@\n-            EXCEPTION_CHECK_WITH_RELEASE(\"Getting AccessibleAction name  - call to GetStringLength()\", FALSE, js, stringBytes);\n-            EXCEPTION_CHECK(\"Getting AccessibleAction name  - call to ReleaseStringChars()\", FALSE);\n+            EXCEPTION_CHECK_WITH_RELEASE(\"Getting AccessibleAction name\", FALSE, js, stringBytes);\n@@ -3560,2 +3552,1 @@\n-            EXCEPTION_CHECK_WITH_RELEASE(\"Getting AccessibleWordAtIndex - call to GetStringLength()\", FALSE, js, stringBytes);\n-            EXCEPTION_CHECK(\"Getting AccessibleWordAtIndex - call to ReleaseStringChars()\", FALSE);\n+            EXCEPTION_CHECK_WITH_RELEASE(\"Getting AccessibleWordAtIndex\", FALSE, js, stringBytes);\n@@ -3595,2 +3586,1 @@\n-            EXCEPTION_CHECK_WITH_RELEASE(\"Getting AccessibleSentenceAtIndex - call to GetStringLength()\", FALSE, js, stringBytes);\n-            EXCEPTION_CHECK(\"Getting AccessibleSentenceAtIndex - call to ReleaseStringChars()\", FALSE);\n+            EXCEPTION_CHECK_WITH_RELEASE(\"Getting AccessibleSentenceAtIndex\", FALSE, js, stringBytes);\n@@ -3670,2 +3660,1 @@\n-            EXCEPTION_CHECK_WITH_RELEASE(\"Getting AccessibleTextSelectedText - call to GetStringLength()\", FALSE, js, stringBytes);\n-            EXCEPTION_CHECK(\"Getting AccessibleTextSelectedText - call to ReleaseStringChars()\", FALSE);\n+            EXCEPTION_CHECK_WITH_RELEASE(\"Getting AccessibleTextSelectedText\", FALSE, js, stringBytes);\n@@ -3886,2 +3875,1 @@\n-            EXCEPTION_CHECK_WITH_RELEASE(\"Getting BackgroundColorFromAttributeSet - call to GetStringLength()\", FALSE, js, stringBytes);\n-            EXCEPTION_CHECK(\"Getting BackgroundColorFromAttributeSet - call to ReleaseStringChars()\", FALSE);\n+            EXCEPTION_CHECK_WITH_RELEASE(\"Getting BackgroundColorFromAttributeSet\", FALSE, js, stringBytes);\n@@ -3922,2 +3910,1 @@\n-            EXCEPTION_CHECK_WITH_RELEASE(\"Getting ForegroundColorFromAttributeSet - call to GetStringLength()\", FALSE, js, stringBytes);\n-            EXCEPTION_CHECK(\"Getting ForegroundColorFromAttributeSet - call to ReleaseStringChars()\", FALSE);\n+            EXCEPTION_CHECK_WITH_RELEASE(\"Getting ForegroundColorFromAttributeSet\", FALSE, js, stringBytes);\n@@ -3958,2 +3945,1 @@\n-            EXCEPTION_CHECK_WITH_RELEASE(\"Getting FontFamilyFromAttributeSet - call to GetStringLength()\", FALSE, js, stringBytes);\n-            EXCEPTION_CHECK(\"Getting FontFamilyFromAttributeSet - call to ReleaseStringChars()\", FALSE);\n+            EXCEPTION_CHECK_WITH_RELEASE(\"Getting FontFamilyFromAttributeSet\", FALSE, js, stringBytes);\n@@ -4163,2 +4149,1 @@\n-            EXCEPTION_CHECK_WITH_RELEASE(\"Getting AccessibleAttributesAtIndex - call to GetStringLength()\", FALSE, js, stringBytes);\n-            EXCEPTION_CHECK(\"Getting AccessibleAttributesAtIndex - call to ReleaseStringChars()\", FALSE);\n+            EXCEPTION_CHECK_WITH_RELEASE(\"Getting AccessibleAttributesAtIndex\", FALSE, js, stringBytes);\n@@ -4405,2 +4390,1 @@\n-            EXCEPTION_CHECK_WITH_RELEASE(\"Getting AccessibleTextRange - call to GetStringLength()\", FALSE, js, stringBytes);\n-            EXCEPTION_CHECK(\"Getting AccessibleTextRange - call to ReleaseStringChars()\", FALSE);\n+            EXCEPTION_CHECK_WITH_RELEASE(\"Getting AccessibleTextRange\", FALSE, js, stringBytes);\n@@ -4449,2 +4433,1 @@\n-            EXCEPTION_CHECK_WITH_RELEASE(\"Getting CurrentAccessibleValue - call to GetStringLength()\", FALSE, js, stringBytes);\n-            EXCEPTION_CHECK(\"Getting CurrentAccessibleValue - call to ReleaseStringChars()\", FALSE);\n+            EXCEPTION_CHECK_WITH_RELEASE(\"Getting CurrentAccessibleValue\", FALSE, js, stringBytes);\n@@ -4491,2 +4474,1 @@\n-            EXCEPTION_CHECK_WITH_RELEASE(\"Getting MaximumAccessibleValue - call to GetStringLength()\", FALSE, js, stringBytes);\n-            EXCEPTION_CHECK(\"Getting MaximumAccessibleValue - call to ReleaseStringChars()\", FALSE);\n+            EXCEPTION_CHECK_WITH_RELEASE(\"Getting MaximumAccessibleValue\", FALSE, js, stringBytes);\n@@ -4533,2 +4515,1 @@\n-            EXCEPTION_CHECK_WITH_RELEASE(\"Getting MinimumAccessibleValue - call to GetStringLength()\", FALSE, js, stringBytes);\n-            EXCEPTION_CHECK(\"Getting MinimumAccessibleValue - call to ReleaseStringChars()\", FALSE);\n+            EXCEPTION_CHECK_WITH_RELEASE(\"Getting MinimumAccessibleValue\", FALSE, js, stringBytes);\n","filename":"src\/jdk.accessibility\/windows\/native\/libjavaaccessbridge\/AccessBridgeJavaEntryPoints.cpp","additions":33,"deletions":52,"binary":false,"changes":85,"status":"modified"}]}