{"files":[{"patch":"@@ -55,0 +55,2 @@\n+    volatile Point srcPoint;\n+    volatile Dimension d;\n@@ -62,1 +64,1 @@\n-            System.err.println(\"mouseDragged: \" + e\n+            System.out.println(\"mouseDragged: \" + e\n@@ -65,1 +67,1 @@\n-                System.err.println(\"Unexpected: \" + e\n+                System.out.println(\"Unexpected: \" + e\n@@ -74,1 +76,1 @@\n-            System.err.println(\"dragDropEnd: \" + dsde);\n+            System.out.println(\"dragDropEnd: \" + dsde);\n@@ -81,1 +83,1 @@\n-            System.err.println(\"dragGestureRecognized: \" + dge);\n+            System.out.println(\"dragGestureRecognized: \" + dge);\n@@ -87,1 +89,1 @@\n-            System.err.println(\"The last mouse event: \" + lastMouseEvent\n+            System.out.println(\"The last mouse event: \" + lastMouseEvent\n@@ -131,2 +133,4 @@\n-        final Point srcPoint = frame.getLocationOnScreen();\n-        Dimension d = frame.getSize();\n+        SwingUtilities.invokeAndWait(() -> {\n+            srcPoint = frame.getLocationOnScreen();\n+            d = frame.getSize();\n+        });\n@@ -148,1 +152,1 @@\n-        robot.mousePress(InputEvent.BUTTON1_MASK);\n+        robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n@@ -150,1 +154,1 @@\n-        System.err.println(\"srcPoint = \" + srcPoint);\n+        System.out.println(\"srcPoint = \" + srcPoint);\n@@ -155,1 +159,1 @@\n-            System.err.println(\"srcPoint = \" + srcPoint);\n+            System.out.println(\"srcPoint = \" + srcPoint);\n@@ -158,2 +162,2 @@\n-        robot.mouseRelease(InputEvent.BUTTON1_MASK);\n-        System.err.println(\"done\");\n+        robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n+        System.out.println(\"done\");\n@@ -168,2 +172,6 @@\n-    public void dispose() {\n-        frame.dispose();\n+    public void dispose() throws Exception {\n+        SwingUtilities.invokeAndWait(() -> {\n+            if (frame != null) {\n+                frame.dispose();\n+            }\n+        });\n@@ -190,1 +198,1 @@\n-        robot.mousePress(InputEvent.BUTTON1_MASK);\n+        robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n@@ -192,1 +200,1 @@\n-            robot.mouseRelease(InputEvent.BUTTON1_MASK);\n+            robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n","filename":"test\/jdk\/java\/awt\/dnd\/MouseEventAfterStartDragTest\/MouseEventAfterStartDragTest.java","additions":24,"deletions":16,"binary":false,"changes":40,"status":"modified"}]}