{"files":[{"patch":"@@ -2375,1 +2375,12 @@\n-    if (ik->in_aot_cache()) buf[i++] = 'S';\n+    if (ik->in_aot_cache()) {\n+      buf[i++] = 'S';\n+\n+      if (AOTMetaspace::in_aot_cache_static_region((void*)k)) {\n+        _aot_statics++;\n+        if (_location) buf[i++] = 's';\n+      } else if (AOTMetaspace::in_aot_cache_dynamic_region((void*)k)) {\n+        _aot_dynamics++;\n+        if (_location) buf[i++] = 'd';\n+      }\n+    }\n+\n","filename":"src\/hotspot\/share\/oops\/instanceKlass.cpp","additions":12,"deletions":1,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -1214,0 +1214,3 @@\n+  unsigned int _aot_statics;\n+  unsigned int _aot_dynamics;\n+\n","filename":"src\/hotspot\/share\/oops\/instanceKlass.hpp","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -28,0 +28,1 @@\n+#include \"cds\/filemap.hpp\"\n@@ -960,1 +961,1 @@\n-           \"S = is shared class\",\n+           \"S = is shared class (if -location then 's' indicates static 'd' indicates dynamic AOT cache)\",\n@@ -962,1 +963,1 @@\n-  _location(\"-location\", \"Print class file location url (if available)\", \"BOOLEAN\", false, \"false\") {\n+  _location(\"-location\", \"Print class file (and AOT cache) location url (if available)\", \"BOOLEAN\", false, \"false\") {\n@@ -980,0 +981,7 @@\n+\n+    if (_location) {\n+      if (closure._aot_statics > 0)\n+        _out->print_cr(\"\\n%d classes shared from static cache: %s\", closure._aot_statics, FileMapInfo::current_info()->full_path());\n+      if (closure._aot_dynamics > 0)\n+        _out->print_cr(\"\\n%d classes shared from dynamic cache: %s\", closure._aot_dynamics, FileMapInfo::dynamic_info()->full_path());\n+    }\n","filename":"src\/hotspot\/share\/services\/diagnosticCommand.cpp","additions":10,"deletions":2,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -803,3 +803,8 @@\n-        Some classes are annotated with flags: `F` = has, or inherits, a non-empty finalize method,\n-        `f` = has final method, `W` = methods rewritten, `C` = marked with `@Contended` annotation,\n-        `R` = has been redefined, `S` = is shared class (BOOLEAN, false)\n+        Some classes are annotated with flags:\n+          - `F` = has, or inherits, a non-empty finalize method,\n+          - `f` = has final method,\n+          - `W` = methods rewritten,\n+          - `C` = marked with `@Contended` annotation,\n+          - `R` = has been redefined,\n+          - `S` = is shared class (if -location 's' is static and 'd' is dynamic AOT cache location)\n+        (BOOLEAN, false)\n@@ -809,1 +814,1 @@\n-         class file (directory, jar or other URL location) from which this class was loaded.\n+         class file (directory, jar or other URL location) from which this class was initially loaded.\n@@ -813,0 +818,4 @@\n+         Note: if any classes are loaded from an AOT cache, their location reported is that of the original\n+               url from which they were loaded at the time of the training run that created the AOT cache.\n+\n+               The total number of classes loaded from any AOT cache (and its name) are summarized. \n","filename":"src\/jdk.jcmd\/share\/man\/jcmd.md","additions":13,"deletions":4,"binary":false,"changes":17,"status":"modified"}]}