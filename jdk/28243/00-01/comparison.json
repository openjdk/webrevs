{"files":[{"patch":"@@ -425,1 +425,1 @@\n-    \/\/ Test HashMap.putAll() with various source map types\n+    \/\/ Test HashMap.putAll() optimization paths\n@@ -430,1 +430,2 @@\n-        target.putAll(new TreeMap<>(testData));\n+        target.putAll(new HashMap<>(testData));\n+        equal(target.size(), testData.size());\n@@ -434,1 +435,3 @@\n-        target.putAll(new ConcurrentHashMap<>(testData));\n+\n+        target.putAll(new TreeMap<>(testData));\n+        equal(target.size(), testData.size());\n@@ -438,0 +441,1 @@\n+\n@@ -439,0 +443,1 @@\n+        equal(target.size(), testData.size());\n@@ -442,0 +447,1 @@\n+\n@@ -443,0 +449,1 @@\n+        equal(target.size(), testData.size());\n@@ -444,6 +451,0 @@\n-\n-        \/\/ Test empty HashMap putAll (regression test for NPE)\n-        target.clear();\n-        HashMap<Integer,Integer> emptySource = new HashMap<>();\n-        target.putAll(emptySource);\n-        check(target.isEmpty());\n","filename":"test\/jdk\/java\/util\/Collection\/MOAT.java","additions":10,"deletions":9,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -10,1 +10,1 @@\n- * Benchmark demonstrating performance impact of polymorphic call sites on HashMap.<init>(Map).\n+ * Benchmark comparing HashMap constructor performance against manual iteration.\n@@ -12,2 +12,2 @@\n- * This test shows that manual inlining of HashMap construction can significantly outperform\n- * the built-in HashMap(Map) constructor when the constructor call site becomes polymorphic.\n+ * Tests HashMap.<init>(Map) performance across different source map types, with and without\n+ * call site poisoning to simulate real-world megamorphic conditions.\n@@ -15,2 +15,2 @@\n- * The setup ensures polymorphic call sites by using HashMap, TreeMap, and LinkedHashMap\n- * in both the constructor and manual iteration patterns before benchmarking begins.\n+ * The setup poisons polymorphic call sites by using five different map types\n+ * in both the constructor and manual iteration patterns to ensure megamorphic behavior.\n@@ -27,1 +27,0 @@\n-    private static final double CAPACITY_FACTOR = 1.35; \/\/ Account for 0.75 load factor\n@@ -43,1 +42,0 @@\n-    private Map<String, Integer> inputSynchronizedMap;\n@@ -69,1 +67,0 @@\n-        inputSynchronizedMap = Collections.synchronizedMap(new HashMap<>(inputHashMap));\n@@ -141,1 +138,1 @@\n-     * This approach suffers from polymorphic call site overhead.\n+     * Performance varies based on source map type and call site polymorphism.\n@@ -152,1 +149,0 @@\n-    \/*\n@@ -161,1 +157,0 @@\n-    *\/\n","filename":"test\/micro\/org\/openjdk\/bench\/java\/util\/HashMapConstructorBenchmark.java","additions":6,"deletions":11,"binary":false,"changes":17,"status":"modified"}]}