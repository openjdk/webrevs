{"files":[{"patch":"@@ -226,1 +226,0 @@\n-            case PATCH_MODULE -> helper.getMessage(\"err.runtime.link.patched.module\", e.getFile());\n","filename":"src\/jdk.jlink\/share\/classes\/jdk\/tools\/jlink\/internal\/ImageFileCreator.java","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -30,1 +30,0 @@\n-import static jdk.tools.jlink.internal.runtimelink.RuntimeImageLinkException.Reason.PATCH_MODULE;\n@@ -40,1 +39,0 @@\n-import java.nio.file.NoSuchFileException;\n@@ -463,10 +461,1 @@\n-                            try {\n-                                return Files.size(archive.getPath().resolve(resPath));\n-                            } catch (NoSuchFileException file) {\n-                                \/\/ This indicates that we don't find the class in the\n-                                \/\/ modules image using the JRT FS provider. Yet, we find\n-                                \/\/ the class using the system module finder. Therefore,\n-                                \/\/ we have a patched module. Mention that module patching\n-                                \/\/ is not supported.\n-                                throw new RuntimeImageLinkException(file.getFile(), PATCH_MODULE);\n-                            }\n+                            return Files.size(archive.getPath().resolve(resPath));\n","filename":"src\/jdk.jlink\/share\/classes\/jdk\/tools\/jlink\/internal\/JRTArchive.java","additions":1,"deletions":12,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -66,0 +66,1 @@\n+import jdk.internal.module.ModuleBootstrap;\n@@ -623,0 +624,6 @@\n+            \/\/ Do not permit linking from run-time image when the current image\n+            \/\/ is being patched.\n+            if (ModuleBootstrap.patcher().hasPatches()) {\n+                String msg = taskHelper.getMessage(\"err.runtime.link.patched.module\");\n+                throw new IllegalArgumentException(msg);\n+            }\n","filename":"src\/jdk.jlink\/share\/classes\/jdk\/tools\/jlink\/internal\/JlinkTask.java","additions":7,"deletions":0,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -38,1 +38,0 @@\n-        PATCH_MODULE,  \/* link exception due to patched module *\/\n","filename":"src\/jdk.jlink\/share\/classes\/jdk\/tools\/jlink\/internal\/runtimelink\/RuntimeImageLinkException.java","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -128,1 +128,1 @@\n-err.runtime.link.patched.module=File {0} not found in the modules image.\\\n+err.runtime.link.patched.module=The current runtime has been patched with --patch-module.\\\n","filename":"src\/jdk.jlink\/share\/classes\/jdk\/tools\/jlink\/resources\/jlink.properties","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -100,1 +100,1 @@\n-        analyzer.stdoutShouldContain(\"MyJlinkPatchInteger.class not found in the modules image.\");\n+        analyzer.stdoutShouldContain(\"The current runtime has been patched with --patch-module.\");\n","filename":"test\/jdk\/tools\/jlink\/runtimeImage\/PatchedJDKModuleJlinkTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}