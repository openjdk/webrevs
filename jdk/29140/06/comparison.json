{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,0 +33,2 @@\n+import java.time.Instant;\n+import java.time.temporal.ChronoUnit;\n@@ -117,1 +119,1 @@\n-        Date date; \/\/ the creation date of this entry\n+        Instant date; \/\/ the creation instant of this entry\n@@ -127,1 +129,1 @@\n-        Date date; \/\/ the creation date of this entry\n+        Instant date; \/\/ the creation instant of this entry\n@@ -408,1 +410,20 @@\n-        Object entry = entries.get(alias.toLowerCase(Locale.ROOT));\n+        final Instant instant = this.engineGetCreationInstant(alias);\n+        if (instant == null){\n+            return null;\n+        }\n+        return Date.from(instant);\n+    }\n+\n+    \/**\n+     * Returns the instant that the entry identified by the given alias was\n+     * created.\n+     *\n+     * @param alias the alias name\n+     *\n+     * @return the instant that the entry identified by the given alias\n+     * was created, or {@code null} if the given alias does not exist\n+     *\n+     * @since 27\n+     *\/\n+    public Instant engineGetCreationInstant(String alias) {\n+        final Object entry = entries.get(alias.toLowerCase(Locale.ROOT));\n@@ -412,1 +433,1 @@\n-                return new Date(((TrustedCertEntry)entry).date.getTime());\n+                return ((TrustedCertEntry)entry).date;\n@@ -414,1 +435,1 @@\n-                return new Date(((KeyEntry)entry).date.getTime());\n+                return ((KeyEntry)entry).date;\n@@ -450,1 +471,1 @@\n-                entry.date = new Date();\n+                entry.date = Instant.now().truncatedTo(ChronoUnit.MILLIS);\n@@ -528,1 +549,1 @@\n-            entry.date = new Date();\n+            entry.date = Instant.now().truncatedTo(ChronoUnit.MILLIS);\n@@ -930,1 +951,1 @@\n-                tce.date = new Date(creationDate);\n+                tce.date = Instant.ofEpochMilli(creationDate);\n@@ -932,1 +953,1 @@\n-                tce.date = new Date();\n+                tce.date = Instant.now().truncatedTo(ChronoUnit.MILLIS);\n@@ -955,1 +976,1 @@\n-            ke.date = new Date(creationDate);\n+            ke.date = Instant.ofEpochMilli(creationDate);\n@@ -957,1 +978,1 @@\n-            ke.date = new Date();\n+            ke.date = Instant.now().truncatedTo(ChronoUnit.MILLIS);\n","filename":"src\/java.base\/macosx\/classes\/apple\/security\/KeychainStore.java","additions":33,"deletions":12,"binary":false,"changes":45,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,0 +32,2 @@\n+import java.time.Instant;\n+import java.time.temporal.ChronoUnit;\n@@ -73,1 +75,1 @@\n-        Date date; \/\/ the creation date of this entry\n+        Instant date; \/\/ the creation date of this entry\n@@ -80,1 +82,1 @@\n-        Date date; \/\/ the creation date of this entry\n+        Instant date; \/\/ the creation date of this entry\n@@ -92,1 +94,1 @@\n-        Date date; \/\/ the creation date of this entry\n+        Instant date; \/\/ the creation date of this entry\n@@ -216,1 +218,6 @@\n-        Date date = null;\n+        final Instant instant = this.engineGetCreationInstant(alias);\n+        if (instant == null){\n+            return null;\n+        }\n+        return Date.from(instant);\n+    }\n@@ -218,1 +225,13 @@\n-        Object entry = entries.get(alias.toLowerCase(Locale.ENGLISH));\n+    \/**\n+     * Returns the instant that the entry identified by the given alias was\n+     * created.\n+     *\n+     * @param alias the alias name\n+     *\n+     * @return the instant that the entry identified by the given alias\n+     * was created, or {@code null} if the given alias does not exist\n+     *\n+     * @since 27\n+     *\/\n+    public Instant engineGetCreationInstant(String alias) {\n+        final Object entry = entries.get(alias.toLowerCase(Locale.ENGLISH));\n@@ -221,2 +240,0 @@\n-            \/\/ We have to create a new instance of java.util.Date because\n-            \/\/ dates are not immutable\n@@ -224,1 +241,1 @@\n-                date = new Date(((TrustedCertEntry)entry).date.getTime());\n+                return ((TrustedCertEntry)entry).date;\n@@ -226,1 +243,1 @@\n-                date = new Date(((PrivateKeyEntry)entry).date.getTime());\n+                return ((PrivateKeyEntry)entry).date;\n@@ -228,1 +245,1 @@\n-                date = new Date(((SecretKeyEntry)entry).date.getTime());\n+                return ((SecretKeyEntry)entry).date;\n@@ -230,0 +247,2 @@\n+        } else {\n+            return null;\n@@ -231,2 +250,0 @@\n-\n-        return date;\n@@ -267,1 +284,1 @@\n-                    entry.date = new Date();\n+                    entry.date = Instant.now().truncatedTo(ChronoUnit.MILLIS);\n@@ -285,1 +302,1 @@\n-                    entry.date = new Date();\n+                    entry.date = Instant.now().truncatedTo(ChronoUnit.MILLIS);\n@@ -328,1 +345,1 @@\n-            entry.date = new Date();\n+            entry.date = Instant.now().truncatedTo(ChronoUnit.MILLIS);\n@@ -373,1 +390,1 @@\n-            trustedCertEntry.date = new Date();\n+            trustedCertEntry.date = Instant.now().truncatedTo(ChronoUnit.MILLIS);\n@@ -591,1 +608,1 @@\n-                        dos.writeLong(pentry.date.getTime());\n+                        dos.writeLong(pentry.date.toEpochMilli());\n@@ -621,1 +638,3 @@\n-                        dos.writeLong(((TrustedCertEntry)entry).date.getTime());\n+                        dos.writeLong(\n+                                ((TrustedCertEntry)entry).date.toEpochMilli()\n+                        );\n@@ -638,1 +657,3 @@\n-                        dos.writeLong(((SecretKeyEntry)entry).date.getTime());\n+                        dos.writeLong(\n+                                ((SecretKeyEntry)entry).date.toEpochMilli()\n+                        );\n@@ -756,1 +777,1 @@\n-                        entry.date = new Date(dis.readLong());\n+                        entry.date = Instant.ofEpochMilli(dis.readLong());\n@@ -801,1 +822,1 @@\n-                        entry.date = new Date(dis.readLong());\n+                        entry.date = Instant.ofEpochMilli(dis.readLong());\n@@ -835,1 +856,1 @@\n-                        entry.date = new Date(dis.readLong());\n+                        entry.date = Instant.ofEpochMilli(dis.readLong());\n","filename":"src\/java.base\/share\/classes\/com\/sun\/crypto\/provider\/JceKeyStore.java","additions":44,"deletions":23,"binary":false,"changes":67,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,0 +33,1 @@\n+import java.time.Instant;\n@@ -1185,0 +1186,3 @@\n+     * <p>\n+     * It is recommended to use the {@link #getCreationInstant(String)}\n+     * method instead.\n@@ -1203,0 +1207,26 @@\n+\n+    \/**\n+     * Returns the instant that the entry identified by the given alias was\n+     * created.\n+     *\n+     * @param alias the alias name\n+     *\n+     * @return the instant that the entry identified by the given alias\n+     * was created, or {@code null} if the given alias does not exist\n+     *\n+     * @throws KeyStoreException if the keystore has not been initialized\n+     * (loaded)\n+     *\n+     * @since 27\n+     *\/\n+    public final Instant getCreationInstant(String alias)\n+            throws KeyStoreException\n+    {\n+        if (!initialized) {\n+            throw new KeyStoreException(\"Uninitialized keystore\");\n+        }\n+        return keyStoreSpi.engineGetCreationInstant(alias);\n+    }\n+\n+\n+\n","filename":"src\/java.base\/share\/classes\/java\/security\/KeyStore.java","additions":31,"deletions":1,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,0 +29,1 @@\n+import java.time.Instant;\n@@ -130,0 +131,23 @@\n+    \/**\n+     * Returns the instant that the entry identified by the given alias was\n+     * created.\n+     *\n+     * @apiNote Subclasses should override this method to directly return an\n+     * instant.\n+     *\n+     * @implSpec\n+     * The default implementation calls {@code engineGetCreationDate(alias)}\n+     * and returns the output as an {@code Instant} value.\n+     *\n+     * @param alias the alias name\n+     *\n+     * @return the instant that the entry identified by the given alias\n+     * was created, or {@code null} if the given alias does not exist\n+     *\n+     * @since 27\n+     *\/\n+    public Instant engineGetCreationInstant(String alias) {\n+        final Date date = engineGetCreationDate(alias);\n+        return date == null ? null : date.toInstant();\n+    }\n+\n","filename":"src\/java.base\/share\/classes\/java\/security\/KeyStoreSpi.java","additions":25,"deletions":1,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1999, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1999, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -38,0 +38,2 @@\n+import java.time.Instant;\n+import java.time.temporal.ChronoUnit;\n@@ -182,1 +184,1 @@\n-        Date date; \/\/ the creation date of this entry\n+        Instant date; \/\/ the creation date of this entry\n@@ -215,1 +217,1 @@\n-            this.date = new Date();\n+            this.date = Instant.now().truncatedTo(ChronoUnit.MILLIS);\n@@ -544,1 +546,20 @@\n-        Entry entry = entries.get(alias.toLowerCase(Locale.ENGLISH));\n+        final Instant instant = this.engineGetCreationInstant(alias);\n+        if (instant == null){\n+            return null;\n+        }\n+        return Date.from(instant);\n+    }\n+\n+    \/**\n+     * Returns the instant that the entry identified by the given alias was\n+     * created.\n+     *\n+     * @param alias the alias name\n+     *\n+     * @return the instant that the entry identified by the given alias\n+     * was created, or {@code null} if the given alias does not exist\n+     *\n+     * @since 27\n+     *\/\n+    public Instant engineGetCreationInstant(String alias) {\n+        final Entry entry = entries.get(alias.toLowerCase(Locale.ENGLISH));\n@@ -546,1 +567,1 @@\n-            return new Date(entry.date.getTime());\n+            return entry.date;\n@@ -609,1 +630,1 @@\n-                keyEntry.date = new Date();\n+                keyEntry.date = Instant.now().truncatedTo(ChronoUnit.MILLIS);\n@@ -654,1 +675,1 @@\n-                keyEntry.date = new Date();\n+                keyEntry.date = Instant.now().truncatedTo(ChronoUnit.MILLIS);\n@@ -693,1 +714,1 @@\n-            entry.keyId = (\"Time \" + (entry.date).getTime()).getBytes(UTF_8);\n+            entry.keyId = (\"Time \" + entry.date.toEpochMilli()).getBytes(UTF_8);\n@@ -748,1 +769,1 @@\n-        entry.date = new Date();\n+        entry.date = Instant.now().truncatedTo(ChronoUnit.MILLIS);\n@@ -756,1 +777,1 @@\n-        entry.keyId = (\"Time \" + (entry.date).getTime()).getBytes(UTF_8);\n+        entry.keyId = (\"Time \" + entry.date.toEpochMilli()).getBytes(UTF_8);\n@@ -2414,1 +2435,1 @@\n-                \/\/ restore date if it exists\n+                \/\/ restore instant if it exists\n@@ -2416,1 +2437,1 @@\n-                Date date = null;\n+                Instant instant = null;\n@@ -2419,1 +2440,1 @@\n-                        date = new Date(\n+                        instant = Instant.ofEpochMilli(\n@@ -2422,1 +2443,1 @@\n-                        \/\/ date has been initialized to null\n+                        \/\/ instant has been initialized to null\n@@ -2425,2 +2446,2 @@\n-                if (date == null) {\n-                    date = new Date();\n+                if (instant == null) {\n+                    instant = Instant.now().truncatedTo(ChronoUnit.MILLIS);\n@@ -2428,1 +2449,1 @@\n-                entry.date = date;\n+                entry.date = instant;\n","filename":"src\/java.base\/share\/classes\/sun\/security\/pkcs12\/PKCS12KeyStore.java","additions":38,"deletions":17,"binary":false,"changes":55,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,0 +33,1 @@\n+import java.time.Instant;\n@@ -217,0 +218,16 @@\n+        final Instant instant = this.engineGetCreationInstant(alias);\n+        return (instant == null) ? null : Date.from(instant);\n+    }\n+\n+    \/**\n+     * Returns the instant that the entry identified by the given alias was\n+     * created.\n+     *\n+     * @param alias the alias name\n+     *\n+     * @return the instant that the entry identified by the given alias\n+     * was created, or {@code null} if the given alias does not exist\n+     *\n+     * @since 27\n+     *\/\n+    public Instant engineGetCreationInstant(String alias) {\n@@ -220,1 +237,1 @@\n-        Date date = null;\n+        Instant instant = null;\n@@ -225,2 +242,2 @@\n-                date = keystore.getCreationDate(entryAlias);\n-                if (date != null) {\n+                instant = keystore.getCreationInstant(entryAlias);\n+                if (instant != null) {\n@@ -234,1 +251,1 @@\n-        return date;\n+        return instant;\n","filename":"src\/java.base\/share\/classes\/sun\/security\/provider\/DomainKeyStore.java","additions":22,"deletions":5,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,0 +33,2 @@\n+import java.time.Instant;\n+import java.time.temporal.ChronoUnit;\n@@ -103,1 +105,1 @@\n-        Date date; \/\/ the creation date of this entry\n+        Instant date; \/\/ the creation date of this entry\n@@ -110,1 +112,1 @@\n-        Date date; \/\/ the creation date of this entry\n+        Instant date; \/\/ the creation date of this entry\n@@ -239,1 +241,19 @@\n-        Object entry = entries.get(convertAlias(alias));\n+        final Instant instant = this.engineGetCreationInstant(alias);\n+        return instant == null ? null : Date.from(instant);\n+    }\n+\n+\n+\n+    \/**\n+     * Returns the instant that the entry identified by the given alias was\n+     * created.\n+     *\n+     * @param alias the alias name\n+     *\n+     * @return the instant that the entry identified by the given alias\n+     * was created, or {@code null} if the given alias does not exist\n+     *\n+     * @since 27\n+     *\/\n+    public Instant engineGetCreationInstant(String alias) {\n+        final Object entry = entries.get(convertAlias(alias));\n@@ -243,1 +263,1 @@\n-                return new Date(((TrustedCertEntry)entry).date.getTime());\n+                return ((TrustedCertEntry)entry).date;\n@@ -245,1 +265,1 @@\n-                return new Date(((KeyEntry)entry).date.getTime());\n+                return((KeyEntry)entry).date;\n@@ -290,1 +310,1 @@\n-                entry.date = new Date();\n+                entry.date = Instant.now().truncatedTo(ChronoUnit.MILLIS);\n@@ -353,1 +373,1 @@\n-            entry.date = new Date();\n+            entry.date = Instant.now().truncatedTo(ChronoUnit.MILLIS);\n@@ -394,1 +414,1 @@\n-            trustedCertEntry.date = new Date();\n+            trustedCertEntry.date = Instant.now().truncatedTo(ChronoUnit.MILLIS);\n@@ -582,1 +602,1 @@\n-                    dos.writeLong(((KeyEntry)entry).date.getTime());\n+                    dos.writeLong(((KeyEntry)entry).date.toEpochMilli());\n@@ -611,1 +631,3 @@\n-                    dos.writeLong(((TrustedCertEntry)entry).date.getTime());\n+                    dos.writeLong(\n+                            ((TrustedCertEntry)entry).date.toEpochMilli()\n+                    );\n@@ -710,1 +732,1 @@\n-                    entry.date = new Date(dis.readLong());\n+                    entry.date = Instant.ofEpochMilli(dis.readLong());\n@@ -759,1 +781,1 @@\n-                    entry.date = new Date(dis.readLong());\n+                    entry.date = Instant.ofEpochMilli(dis.readLong());\n","filename":"src\/java.base\/share\/classes\/sun\/security\/provider\/JavaKeyStore.java","additions":35,"deletions":13,"binary":false,"changes":48,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,1 +27,5 @@\n-import java.security.*;\n+import java.security.KeyStore;\n+import java.security.KeyStoreException;\n+import java.security.PEMDecoder;\n+import java.security.PrivateKey;\n+import java.security.UnrecoverableKeyException;\n@@ -30,0 +34,1 @@\n+import java.time.Instant;\n@@ -33,1 +38,1 @@\n- * @bug 8048621 8133090 8167371 8236671\n+ * @bug 8048621 8133090 8167371 8236671 8374808\n@@ -180,0 +185,2 @@\n+        compareCreationInstant(ks, ks2, numEntries);\n+\n@@ -216,0 +223,1 @@\n+        compareCreationInstant(ks, ks2, numEntries);\n@@ -287,0 +295,17 @@\n+    \/\/ compare the creation instants - true if all the same\n+    private void compareCreationInstant(KeyStore o1, KeyStore o2, int range)\n+            throws KeyStoreException {\n+        String alias;\n+        for (int k = 0; k < range; k++) {\n+            alias = ALIAS_HEAD + k;\n+            final Instant instant1 = o1.getCreationInstant(alias);\n+            final Instant instant2 = o2.getCreationInstant(alias);\n+            if (!(instant1.equals(instant2))) {\n+                throw new RuntimeException(\"ERROR: entry creation time (\" + k\n+                                           + \") differs Instants {\"\n+                                           + instant1 + \" - \"\n+                                           + instant2 + \"}\");\n+            }\n+        }\n+    }\n+\n","filename":"test\/jdk\/java\/security\/KeyStore\/TestKeyStoreBasic.java","additions":28,"deletions":3,"binary":false,"changes":31,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,1 +26,1 @@\n- * @bug 8007755\n+ * @bug 8007755 8374808\n@@ -31,2 +31,6 @@\n-import java.io.*;\n-import java.net.*;\n+import java.io.File;\n+import java.io.FileInputStream;\n+import java.io.FileOutputStream;\n+import java.io.IOException;\n+import java.io.OutputStream;\n+import java.net.URI;\n@@ -34,1 +38,1 @@\n-import java.security.*;\n+import java.security.DomainLoadStoreParameter;\n@@ -36,1 +40,1 @@\n-import java.security.cert.*;\n+import java.security.UnrecoverableKeyException;\n@@ -38,1 +42,8 @@\n-import java.util.*;\n+import java.security.cert.CertificateFactory;\n+import java.security.cert.X509Certificate;\n+import java.util.Collections;\n+import java.util.Date;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n@@ -208,1 +219,1 @@\n-    private static void checkEntries(KeyStore keystore, int expected)\n+    private static void checkEntries(KeyStore keystore, int expectedCount)\n@@ -210,1 +221,1 @@\n-        int i = 0;\n+        int currCount = 0;\n@@ -213,1 +224,9 @@\n-            i++;\n+            currCount++;\n+\n+            \/\/ check creation date and instant\n+            if(!keystore.getCreationDate(alias).equals(\n+                    Date.from(keystore.getCreationInstant(alias)))\n+            ){\n+                throw new RuntimeException(\n+                        \"Creation Date is not the same as Instant timestamp\");\n+            }\n@@ -216,1 +235,2 @@\n-        if (expected != i) {\n+        \/\/ Check if current count is expected\n+        if (expectedCount != currCount) {\n@@ -218,1 +238,1 @@\n-                \"loaded=\" + i + \", expected=\" + expected);\n+                \"loaded=\" + currCount + \", expected=\" + expectedCount);\n","filename":"test\/jdk\/sun\/security\/provider\/KeyStore\/DKSTest.java","additions":32,"deletions":12,"binary":false,"changes":44,"status":"modified"}]}