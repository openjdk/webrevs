{"files":[{"patch":"@@ -34,0 +34,1 @@\n+import java.time.temporal.ChronoUnit;\n@@ -470,1 +471,1 @@\n-                entry.date = Instant.now();\n+                entry.date = Instant.now().truncatedTo(ChronoUnit.MILLIS);\n@@ -548,1 +549,1 @@\n-            entry.date = Instant.now();\n+            entry.date = Instant.now().truncatedTo(ChronoUnit.MILLIS);\n@@ -952,1 +953,1 @@\n-                tce.date = Instant.now();\n+                tce.date = Instant.now().truncatedTo(ChronoUnit.MILLIS);\n@@ -977,1 +978,1 @@\n-            ke.date = Instant.now();\n+            ke.date = Instant.now().truncatedTo(ChronoUnit.MILLIS);\n","filename":"src\/java.base\/macosx\/classes\/apple\/security\/KeychainStore.java","additions":5,"deletions":4,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -33,0 +33,1 @@\n+import java.time.temporal.ChronoUnit;\n@@ -283,1 +284,1 @@\n-                    entry.date = Instant.now();\n+                    entry.date = Instant.now().truncatedTo(ChronoUnit.MILLIS);\n@@ -301,1 +302,1 @@\n-                    entry.date = Instant.now();\n+                    entry.date = Instant.now().truncatedTo(ChronoUnit.MILLIS);\n@@ -344,1 +345,1 @@\n-            entry.date = Instant.now();\n+            entry.date = Instant.now().truncatedTo(ChronoUnit.MILLIS);\n@@ -389,1 +390,1 @@\n-            trustedCertEntry.date = Instant.now();\n+            trustedCertEntry.date = Instant.now().truncatedTo(ChronoUnit.MILLIS);\n","filename":"src\/java.base\/share\/classes\/com\/sun\/crypto\/provider\/JceKeyStore.java","additions":5,"deletions":4,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -1187,2 +1187,2 @@\n-     * This method returns a Date, which is mutable and more error-prone.\n-     * Use {@link #getCreationInstant(String)} instead.\n+     * It is recommended to use the {@link #getCreationInstant(String)}\n+     * method instead.\n","filename":"src\/java.base\/share\/classes\/java\/security\/KeyStore.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -39,0 +39,1 @@\n+import java.time.temporal.ChronoUnit;\n@@ -216,1 +217,1 @@\n-            this.date = Instant.now();\n+            this.date = Instant.now().truncatedTo(ChronoUnit.MILLIS);\n@@ -629,1 +630,1 @@\n-                keyEntry.date = Instant.now();\n+                keyEntry.date = Instant.now().truncatedTo(ChronoUnit.MILLIS);\n@@ -674,1 +675,1 @@\n-                keyEntry.date = Instant.now();\n+                keyEntry.date = Instant.now().truncatedTo(ChronoUnit.MILLIS);\n@@ -768,1 +769,1 @@\n-        entry.date = Instant.now();\n+        entry.date = Instant.now().truncatedTo(ChronoUnit.MILLIS);\n@@ -2446,1 +2447,1 @@\n-                    instant = Instant.now();\n+                    instant = Instant.now().truncatedTo(ChronoUnit.MILLIS);\n","filename":"src\/java.base\/share\/classes\/sun\/security\/pkcs12\/PKCS12KeyStore.java","additions":6,"deletions":5,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -218,18 +218,2 @@\n-\n-        AbstractMap.SimpleEntry<String, Collection<KeyStore>> pair =\n-            getKeystoresForReading(alias);\n-        Date date = null;\n-\n-        try {\n-            String entryAlias = pair.getKey();\n-            for (KeyStore keystore : pair.getValue()) {\n-                date = keystore.getCreationDate(entryAlias);\n-                if (date != null) {\n-                    break;\n-                }\n-            }\n-        } catch (KeyStoreException e) {\n-            throw new IllegalStateException(e);\n-        }\n-\n-        return date;\n+        final Instant instant = this.engineGetCreationInstant(alias);\n+        return (instant == null) ? null : Date.from(instant);\n","filename":"src\/java.base\/share\/classes\/sun\/security\/provider\/DomainKeyStore.java","additions":2,"deletions":18,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -34,0 +34,1 @@\n+import java.time.temporal.ChronoUnit;\n@@ -309,1 +310,1 @@\n-                entry.date = Instant.now();\n+                entry.date = Instant.now().truncatedTo(ChronoUnit.MILLIS);\n@@ -372,1 +373,1 @@\n-            entry.date = Instant.now();\n+            entry.date = Instant.now().truncatedTo(ChronoUnit.MILLIS);\n@@ -413,1 +414,1 @@\n-            trustedCertEntry.date = Instant.now();\n+            trustedCertEntry.date = Instant.now().truncatedTo(ChronoUnit.MILLIS);\n","filename":"src\/java.base\/share\/classes\/sun\/security\/provider\/JavaKeyStore.java","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -303,4 +303,1 @@\n-            final int diff = instant1.compareTo(instant2);\n-            \/\/ There could be a difference in nano seconds on some machines\n-            \/\/ so comparing with precision of 1 ms\n-            if (!(diff >= 0 && diff <= 1000000)) {\n+            if (!(instant1.equals(instant2))) {\n","filename":"test\/jdk\/java\/security\/KeyStore\/TestKeyStoreBasic.java","additions":1,"deletions":4,"binary":false,"changes":5,"status":"modified"}]}