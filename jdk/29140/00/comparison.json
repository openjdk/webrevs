{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,0 +33,1 @@\n+import java.time.Instant;\n@@ -117,1 +118,1 @@\n-        Date date; \/\/ the creation date of this entry\n+        Instant date; \/\/ the creation instant of this entry\n@@ -127,1 +128,1 @@\n-        Date date; \/\/ the creation date of this entry\n+        Instant date; \/\/ the creation instant of this entry\n@@ -408,1 +409,20 @@\n-        Object entry = entries.get(alias.toLowerCase(Locale.ROOT));\n+        final Instant instant = this.engineGetCreationInstant(alias);\n+        if (instant == null){\n+            return null;\n+        }\n+        return Date.from(instant);\n+    }\n+\n+    \/**\n+     * Returns the creation {@code Instant} value\n+     * of the entry identified by the given alias.\n+     *\n+     * @param alias the alias name\n+     *\n+     * @return the creation instant of this entry, or null if the given\n+     * alias does not exist\n+     *\n+     * @since 27\n+     *\/\n+    public Instant engineGetCreationInstant(String alias) {\n+        final Object entry = entries.get(alias.toLowerCase(Locale.ROOT));\n@@ -412,1 +432,1 @@\n-                return new Date(((TrustedCertEntry)entry).date.getTime());\n+                return ((TrustedCertEntry)entry).date;\n@@ -414,1 +434,1 @@\n-                return new Date(((KeyEntry)entry).date.getTime());\n+                return ((KeyEntry)entry).date;\n@@ -450,1 +470,1 @@\n-                entry.date = new Date();\n+                entry.date = Instant.now();\n@@ -528,1 +548,1 @@\n-            entry.date = new Date();\n+            entry.date = Instant.now();\n@@ -930,1 +950,1 @@\n-                tce.date = new Date(creationDate);\n+                tce.date = Instant.ofEpochMilli(creationDate);\n@@ -932,1 +952,1 @@\n-                tce.date = new Date();\n+                tce.date = Instant.now();\n@@ -955,1 +975,1 @@\n-            ke.date = new Date(creationDate);\n+            ke.date = Instant.ofEpochMilli(creationDate);\n@@ -957,1 +977,1 @@\n-            ke.date = new Date();\n+            ke.date = Instant.now();\n","filename":"src\/java.base\/macosx\/classes\/apple\/security\/KeychainStore.java","additions":32,"deletions":12,"binary":false,"changes":44,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,0 +32,1 @@\n+import java.time.Instant;\n@@ -73,1 +74,1 @@\n-        Date date; \/\/ the creation date of this entry\n+        Instant date; \/\/ the creation date of this entry\n@@ -80,1 +81,1 @@\n-        Date date; \/\/ the creation date of this entry\n+        Instant date; \/\/ the creation date of this entry\n@@ -92,1 +93,1 @@\n-        Date date; \/\/ the creation date of this entry\n+        Instant date; \/\/ the creation date of this entry\n@@ -216,1 +217,6 @@\n-        Date date = null;\n+        final Instant instant = this.engineGetCreationInstant(alias);\n+        if (instant == null){\n+            return null;\n+        }\n+        return Date.from(instant);\n+    }\n@@ -218,1 +224,13 @@\n-        Object entry = entries.get(alias.toLowerCase(Locale.ENGLISH));\n+    \/**\n+     * Returns the creation {@code Instant} value\n+     * of the entry identified by the given alias.\n+     *\n+     * @param alias the alias name\n+     *\n+     * @return the creation instant of this entry, or null if the given\n+     * alias does not exist\n+     *\n+     * @since 27\n+     *\/\n+    public Instant engineGetCreationInstant(String alias) {\n+        final Object entry = entries.get(alias.toLowerCase(Locale.ENGLISH));\n@@ -221,2 +239,0 @@\n-            \/\/ We have to create a new instance of java.util.Date because\n-            \/\/ dates are not immutable\n@@ -224,1 +240,1 @@\n-                date = new Date(((TrustedCertEntry)entry).date.getTime());\n+                return ((TrustedCertEntry)entry).date;\n@@ -226,1 +242,1 @@\n-                date = new Date(((PrivateKeyEntry)entry).date.getTime());\n+                return ((PrivateKeyEntry)entry).date;\n@@ -228,1 +244,1 @@\n-                date = new Date(((SecretKeyEntry)entry).date.getTime());\n+                return ((SecretKeyEntry)entry).date;\n@@ -230,0 +246,2 @@\n+        } else {\n+            return null;\n@@ -231,2 +249,0 @@\n-\n-        return date;\n@@ -267,1 +283,1 @@\n-                    entry.date = new Date();\n+                    entry.date = Instant.now();\n@@ -285,1 +301,1 @@\n-                    entry.date = new Date();\n+                    entry.date = Instant.now();\n@@ -328,1 +344,1 @@\n-            entry.date = new Date();\n+            entry.date = Instant.now();\n@@ -373,1 +389,1 @@\n-            trustedCertEntry.date = new Date();\n+            trustedCertEntry.date = Instant.now();\n@@ -591,1 +607,1 @@\n-                        dos.writeLong(pentry.date.getTime());\n+                        dos.writeLong(pentry.date.toEpochMilli());\n@@ -621,1 +637,3 @@\n-                        dos.writeLong(((TrustedCertEntry)entry).date.getTime());\n+                        dos.writeLong(\n+                                ((TrustedCertEntry)entry).date.toEpochMilli()\n+                        );\n@@ -638,1 +656,3 @@\n-                        dos.writeLong(((SecretKeyEntry)entry).date.getTime());\n+                        dos.writeLong(\n+                                ((SecretKeyEntry)entry).date.toEpochMilli()\n+                        );\n@@ -756,1 +776,1 @@\n-                        entry.date = new Date(dis.readLong());\n+                        entry.date = Instant.ofEpochMilli(dis.readLong());\n@@ -801,1 +821,1 @@\n-                        entry.date = new Date(dis.readLong());\n+                        entry.date = Instant.ofEpochMilli(dis.readLong());\n@@ -835,1 +855,1 @@\n-                        entry.date = new Date(dis.readLong());\n+                        entry.date = Instant.ofEpochMilli(dis.readLong());\n","filename":"src\/java.base\/share\/classes\/com\/sun\/crypto\/provider\/JceKeyStore.java","additions":43,"deletions":23,"binary":false,"changes":66,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,0 +33,1 @@\n+import java.time.Instant;\n@@ -1185,0 +1186,3 @@\n+     * <p>\n+     * This method returns a Date, which is mutable and more error-prone.\n+     * Use {@link #getCreationInstant(String)} instead.\n@@ -1203,0 +1207,26 @@\n+\n+    \/**\n+     * Returns the creation {@code Instant} value\n+     * of the entry identified by the given alias.\n+     *\n+     * @param alias the alias name\n+     *\n+     * @return the creation instant of this entry, or {@code null} if the given\n+     * alias does not exist\n+     *\n+     * @throws    KeyStoreException if the keystore has not been initialized\n+     * (loaded).\n+     *\n+     * @since 27\n+     *\/\n+    public final Instant getCreationInstant(String alias)\n+            throws KeyStoreException\n+    {\n+        if (!initialized) {\n+            throw new KeyStoreException(\"Uninitialized keystore\");\n+        }\n+        return keyStoreSpi.engineGetCreationInstant(alias);\n+    }\n+\n+\n+\n","filename":"src\/java.base\/share\/classes\/java\/security\/KeyStore.java","additions":31,"deletions":1,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,0 +29,1 @@\n+import java.time.Instant;\n@@ -130,0 +131,20 @@\n+    \/**\n+     * Returns the creation {@code Instant} value\n+     * of the entry identified by the given alias.\n+     *\n+     * @implSpec\n+     * The default implementation calls {@code engineGetCreationDate(alias)}\n+     * and returns the output as an {@code Instant} value.\n+     *\n+     * @param alias the alias name\n+     *\n+     * @return the creation instant of this entry, or {@code null}\n+     * if the given alias does not exist\n+     *\n+     * @since 27\n+     *\/\n+    public Instant engineGetCreationInstant(String alias) {\n+        final Date date = engineGetCreationDate(alias);\n+        return date == null ? null : date.toInstant();\n+    }\n+\n","filename":"src\/java.base\/share\/classes\/java\/security\/KeyStoreSpi.java","additions":22,"deletions":1,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1999, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1999, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -38,0 +38,1 @@\n+import java.time.Instant;\n@@ -182,1 +183,1 @@\n-        Date date; \/\/ the creation date of this entry\n+        Instant date; \/\/ the creation date of this entry\n@@ -215,1 +216,1 @@\n-            this.date = new Date();\n+            this.date = Instant.now();\n@@ -544,1 +545,20 @@\n-        Entry entry = entries.get(alias.toLowerCase(Locale.ENGLISH));\n+        final Instant instant = this.engineGetCreationInstant(alias);\n+        if (instant == null){\n+            return null;\n+        }\n+        return Date.from(instant);\n+    }\n+\n+    \/**\n+     * Returns the creation {@code Instant} value\n+     * of the entry identified by the given alias.\n+     *\n+     * @param alias the alias name\n+     *\n+     * @return the creation date of this entry, or null if the given alias does\n+     * not exist\n+     *\n+     * @since 27\n+     *\/\n+    public Instant engineGetCreationInstant(String alias) {\n+        final Entry entry = entries.get(alias.toLowerCase(Locale.ENGLISH));\n@@ -546,1 +566,1 @@\n-            return new Date(entry.date.getTime());\n+            return entry.date;\n@@ -609,1 +629,1 @@\n-                keyEntry.date = new Date();\n+                keyEntry.date = Instant.now();\n@@ -654,1 +674,1 @@\n-                keyEntry.date = new Date();\n+                keyEntry.date = Instant.now();\n@@ -693,1 +713,1 @@\n-            entry.keyId = (\"Time \" + (entry.date).getTime()).getBytes(UTF_8);\n+            entry.keyId = (\"Time \" + entry.date.toEpochMilli()).getBytes(UTF_8);\n@@ -748,1 +768,1 @@\n-        entry.date = new Date();\n+        entry.date = Instant.now();\n@@ -756,1 +776,1 @@\n-        entry.keyId = (\"Time \" + (entry.date).getTime()).getBytes(UTF_8);\n+        entry.keyId = (\"Time \" + entry.date.toEpochMilli()).getBytes(UTF_8);\n@@ -2414,1 +2434,1 @@\n-                \/\/ restore date if it exists\n+                \/\/ restore instant if it exists\n@@ -2416,1 +2436,1 @@\n-                Date date = null;\n+                Instant instant = null;\n@@ -2419,1 +2439,1 @@\n-                        date = new Date(\n+                        instant = Instant.ofEpochMilli(\n@@ -2422,1 +2442,1 @@\n-                        \/\/ date has been initialized to null\n+                        \/\/ instant has been initialized to null\n@@ -2425,2 +2445,2 @@\n-                if (date == null) {\n-                    date = new Date();\n+                if (instant == null) {\n+                    instant = Instant.now();\n@@ -2428,1 +2448,1 @@\n-                entry.date = date;\n+                entry.date = instant;\n","filename":"src\/java.base\/share\/classes\/sun\/security\/pkcs12\/PKCS12KeyStore.java","additions":37,"deletions":17,"binary":false,"changes":54,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,0 +33,1 @@\n+import java.time.Instant;\n@@ -237,0 +238,32 @@\n+    \/**\n+     * Returns the creation {@code Instant} value\n+     * of the entry identified by the given alias.\n+     *\n+     * @param alias the alias name\n+     *\n+     * @return the creation instant of this entry, or null if the given\n+     * alias does not exist\n+     *\n+     * @since 27\n+     *\/\n+    public Instant engineGetCreationInstant(String alias) {\n+\n+        AbstractMap.SimpleEntry<String, Collection<KeyStore>> pair =\n+            getKeystoresForReading(alias);\n+        Instant instant = null;\n+\n+        try {\n+            String entryAlias = pair.getKey();\n+            for (KeyStore keystore : pair.getValue()) {\n+                instant = keystore.getCreationInstant(entryAlias);\n+                if (instant != null) {\n+                    break;\n+                }\n+            }\n+        } catch (KeyStoreException e) {\n+            throw new IllegalStateException(e);\n+        }\n+\n+        return instant;\n+    }\n+\n","filename":"src\/java.base\/share\/classes\/sun\/security\/provider\/DomainKeyStore.java","additions":34,"deletions":1,"binary":false,"changes":35,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,0 +33,1 @@\n+import java.time.Instant;\n@@ -103,1 +104,1 @@\n-        Date date; \/\/ the creation date of this entry\n+        Instant date; \/\/ the creation date of this entry\n@@ -110,1 +111,1 @@\n-        Date date; \/\/ the creation date of this entry\n+        Instant date; \/\/ the creation date of this entry\n@@ -239,1 +240,19 @@\n-        Object entry = entries.get(convertAlias(alias));\n+        final Instant instant = this.engineGetCreationInstant(alias);\n+        return instant == null ? null : Date.from(instant);\n+    }\n+\n+\n+\n+    \/**\n+     * Returns the creation {@code Instant} value\n+     * of the entry identified by the given alias.\n+     *\n+     * @param alias the alias name\n+     *\n+     * @return the creation instant of this entry, or null if the given alias does\n+     * not exist\n+     *\n+     * @since 27\n+     *\/\n+    public Instant engineGetCreationInstant(String alias) {\n+        final Object entry = entries.get(convertAlias(alias));\n@@ -243,1 +262,1 @@\n-                return new Date(((TrustedCertEntry)entry).date.getTime());\n+                return ((TrustedCertEntry)entry).date;\n@@ -245,1 +264,1 @@\n-                return new Date(((KeyEntry)entry).date.getTime());\n+                return((KeyEntry)entry).date;\n@@ -290,1 +309,1 @@\n-                entry.date = new Date();\n+                entry.date = Instant.now();\n@@ -353,1 +372,1 @@\n-            entry.date = new Date();\n+            entry.date = Instant.now();\n@@ -394,1 +413,1 @@\n-            trustedCertEntry.date = new Date();\n+            trustedCertEntry.date = Instant.now();\n@@ -582,1 +601,1 @@\n-                    dos.writeLong(((KeyEntry)entry).date.getTime());\n+                    dos.writeLong(((KeyEntry)entry).date.toEpochMilli());\n@@ -611,1 +630,3 @@\n-                    dos.writeLong(((TrustedCertEntry)entry).date.getTime());\n+                    dos.writeLong(\n+                            ((TrustedCertEntry)entry).date.toEpochMilli()\n+                    );\n@@ -710,1 +731,1 @@\n-                    entry.date = new Date(dis.readLong());\n+                    entry.date = Instant.ofEpochMilli(dis.readLong());\n@@ -759,1 +780,1 @@\n-                    entry.date = new Date(dis.readLong());\n+                    entry.date = Instant.ofEpochMilli(dis.readLong());\n","filename":"src\/java.base\/share\/classes\/sun\/security\/provider\/JavaKeyStore.java","additions":34,"deletions":13,"binary":false,"changes":47,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,1 +27,5 @@\n-import java.security.*;\n+import java.security.KeyStore;\n+import java.security.KeyStoreException;\n+import java.security.PEMDecoder;\n+import java.security.PrivateKey;\n+import java.security.UnrecoverableKeyException;\n@@ -30,0 +34,1 @@\n+import java.time.Instant;\n@@ -33,1 +38,1 @@\n- * @bug 8048621 8133090 8167371 8236671\n+ * @bug 8048621 8133090 8167371 8236671 8374808\n@@ -180,0 +185,2 @@\n+        compareCreationInstant(ks, ks2, numEntries);\n+\n@@ -216,0 +223,1 @@\n+        compareCreationInstant(ks, ks2, numEntries);\n@@ -287,0 +295,20 @@\n+    \/\/ compare the creation instants - true if all the same\n+    private void compareCreationInstant(KeyStore o1, KeyStore o2, int range)\n+            throws KeyStoreException {\n+        String alias;\n+        for (int k = 0; k < range; k++) {\n+            alias = ALIAS_HEAD + k;\n+            final Instant instant1 = o1.getCreationInstant(alias);\n+            final Instant instant2 = o2.getCreationInstant(alias);\n+            final int diff = instant1.compareTo(instant2);\n+            \/\/ There could be a difference in nano seconds on some machines\n+            \/\/ so comparing with precision of 1 ms\n+            if (!(diff >= 0 && diff <= 1000000)) {\n+                throw new RuntimeException(\"ERROR: entry creation time (\" + k\n+                                           + \") differs Instants {\"\n+                                           + instant1 + \" - \"\n+                                           + instant2 + \"}\");\n+            }\n+        }\n+    }\n+\n","filename":"test\/jdk\/java\/security\/KeyStore\/TestKeyStoreBasic.java","additions":31,"deletions":3,"binary":false,"changes":34,"status":"modified"}]}