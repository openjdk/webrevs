{"files":[{"patch":"@@ -294,1 +294,1 @@\n-            \"testFoldableXor\", \"testXorConstRange\"\n+            \"testFoldableXor\", \"testFoldableXorPow2\", \"testUnfoldableXorPow2\"\n@@ -311,1 +311,2 @@\n-        Asserts.assertEQ((a & 0b1000) ^ (b & 0b1000), testXorConstRange(a, b));\n+        Asserts.assertEQ(((a & 0b1000) ^ (b & 0b1000)) < 0b1000, testUnfoldableXorPow2(a, b));\n+        Asserts.assertEQ(true, testFoldableXorPow2(a, b));\n@@ -315,2 +316,10 @@\n-    public int testXorConstRange(int x, int y) {\n-        return (x & 0b1000) ^ (y & 0b1000);\n+    @IR(failOn = {IRNode.XOR})\n+    @IR(counts = {IRNode.CON_I, \"1\"})\n+    public boolean testFoldableXorPow2(int x, int y) {\n+        return ((x & 0b1000) ^ (y & 0b1000)) < 0b10000;\n+    }\n+\n+    @Test\n+    @IR(counts = {IRNode.XOR, \"1\"})\n+    public boolean testUnfoldableXorPow2(int x, int y) {\n+        return ((x & 0b1000) ^ (y & 0b1000)) < 0b1000;\n","filename":"test\/hotspot\/jtreg\/compiler\/c2\/irTests\/XorINodeIdealizationTests.java","additions":13,"deletions":4,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -247,1 +247,1 @@\n-            \"testFoldableXor\", \"testXorConstRange\"\n+            \"testFoldableXor\", \"testFoldableXorPow2\", \"testUnfoldableXorPow2\"\n@@ -264,1 +264,2 @@\n-        Asserts.assertEQ((a & 0b1000) ^ (b & 0b1000), testXorConstRange(a, b));\n+        Asserts.assertEQ(((a & 0b1000) ^ (b & 0b1000)) < 0b1000, testUnfoldableXorPow2(a, b));\n+        Asserts.assertEQ(true, testFoldableXorPow2(a, b));\n@@ -268,2 +269,10 @@\n-    public long testXorConstRange(long x, long y) {\n-        return (x & 0b1000) ^ (y & 0b1000);\n+    @IR(failOn = {IRNode.XOR})\n+    @IR(counts = {IRNode.CON_I, \"1\"})\n+    public boolean testFoldableXorPow2(long x, long y) {\n+        return ((x & 0b1000) ^ (y & 0b1000)) < 0b10000;\n+    }\n+\n+    @Test\n+    @IR(counts = {IRNode.XOR, \"1\"})\n+    public boolean testUnfoldableXorPow2(long x, long y) {\n+        return ((x & 0b1000) ^ (y & 0b1000)) < 0b1000;\n","filename":"test\/hotspot\/jtreg\/compiler\/c2\/irTests\/XorLNodeIdealizationTests.java","additions":13,"deletions":4,"binary":false,"changes":17,"status":"modified"}]}