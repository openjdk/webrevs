{"files":[{"patch":"@@ -148,3 +148,1 @@\n-        Runnable action = cleanup != null ?\n-                () -> cleanup.accept(SegmentFactories.makeNativeSegmentUnchecked(address(), newSize)) :\n-                null;\n+        Runnable action = cleanupAction(address(), newSize, cleanup);\n@@ -154,0 +152,7 @@\n+    \/\/ Using a static helper method ensures there is no unintended lambda capturing of `this`\n+    private static Runnable cleanupAction(long address, long newSize, Consumer<MemorySegment> cleanup) {\n+        return cleanup != null ?\n+                () -> cleanup.accept(SegmentFactories.makeNativeSegmentUnchecked(address, newSize)) :\n+                null;\n+    }\n+\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/foreign\/AbstractMemorySegmentImpl.java","additions":8,"deletions":3,"binary":false,"changes":11,"status":"modified"}]}