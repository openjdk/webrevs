{"files":[{"patch":"@@ -53,1 +53,5 @@\n-NonJavaThread::List NonJavaThread::_the_list;\n+DeferredStatic<NonJavaThread::List> NonJavaThread::_the_list;\n+\n+void NonJavaThread::init() {\n+  _the_list.initialize();\n+}\n@@ -56,2 +60,2 @@\n-  _protect_enter(_the_list._protect.enter()),\n-  _current(AtomicAccess::load_acquire(&_the_list._head))\n+  _protect_enter(_the_list->_protect.enter()),\n+  _current(AtomicAccess::load_acquire(&_the_list->_head))\n@@ -61,1 +65,1 @@\n-  _the_list._protect.exit(_protect_enter);\n+  _the_list->_protect.exit(_protect_enter);\n@@ -79,2 +83,2 @@\n-  AtomicAccess::release_store(&_next, _the_list._head);\n-  AtomicAccess::release_store(&_the_list._head, this);\n+  AtomicAccess::release_store(&_next, _the_list->_head);\n+  AtomicAccess::release_store(&_the_list->_head, this);\n@@ -88,1 +92,1 @@\n-    NonJavaThread* volatile* p = &_the_list._head;\n+    NonJavaThread* volatile* p = &_the_list->_head;\n@@ -100,1 +104,1 @@\n-  _the_list._protect.synchronize();\n+  _the_list->_protect.synchronize();\n@@ -347,1 +351,0 @@\n-\n","filename":"src\/hotspot\/share\/runtime\/nonJavaThread.cpp","additions":12,"deletions":9,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2021, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2021, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,0 +29,1 @@\n+#include \"utilities\/deferredStatic.hpp\"\n@@ -31,1 +32,1 @@\n-  NonJavaThread* volatile _next;\n+  friend class Threads;\n@@ -34,1 +35,6 @@\n-  static List _the_list;\n+  static DeferredStatic<List> _the_list;\n+\n+  \/\/ Deferred static initialization\n+  static void init();\n+\n+  NonJavaThread* volatile _next;\n","filename":"src\/hotspot\/share\/runtime\/nonJavaThread.hpp","additions":9,"deletions":3,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -449,0 +449,3 @@\n+  \/\/ Deferred \"static\" initialization\n+  NonJavaThread::init();\n+\n","filename":"src\/hotspot\/share\/runtime\/threads.cpp","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"}]}