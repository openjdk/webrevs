{"files":[{"patch":"@@ -33,1 +33,0 @@\n-import javax.swing.SwingUtilities;\n@@ -37,1 +36,0 @@\n-import javax.swing.table.TableCellRenderer;\n@@ -52,46 +50,1 @@\n-    static JFrame frame;\n-    public static PassFailJFrame passFailJFrame;\n-\n-    static void initTest() throws Exception {\n-        final String INSTRUCTIONS = \"\"\"\n-                Instructions to Test:\n-                1. Refer the below keyboard navigation specs\n-                 (referenced from bug report 4112270).\n-                2. Check all combinations of navigational keys in all four modes\n-                  shift and control verifying each change to the selection against\n-                  the spec. If it does, press \"pass\", otherwise press \"fail\".\n-\n-                  Navigate In - Tab, shift-tab, control-tab, shift-control-tab\n-                  Return\/shift-return - move focus one cell down\/up.\n-                  Tab\/shift-tab - move focus one cell right\/left.\n-                  Up\/down arrow - deselect current selection; move focus one cell up\/down\n-                  Left\/right arrow - deselect current selection; move focus one cell\n-                                             left\/right\n-                  PageUp\/PageDown - deselect current selection; scroll up\/down one\n-                                    JViewport view; first visible cell in current\n-                                    column gets focus\n-                  Control-PageUp\/PageDown - deselect current selection; scroll\n-                                            left\/right one JViewport view; first\n-                                            visible cell in current row gets\n-                                            focus\n-                  Home\/end - deselect current selection; move focus and view to\n-                                     first\/last cell in current row\n-                  Control-home\/end - deselect current selection; move focus and view to\n-                                             upper-left\/lower-right cell in table\n-                  F2 - Allows editing in a cell containing information without\n-                               overwriting the information\n-                  Esc - Resets the cell content back to the state it was in before\n-                                editing started\n-                  Ctrl+A, Ctrl+\/ = Select all\n-                  Ctrl+\\\\ = De-select all\n-                  Shift-up\/down arrow - extend selection up\/down one row\n-                  Shift-left\/right arrow - extend selection left\/right one column\n-                  Control-shift up\/down arrow - extend selection to top\/bottom of column\n-                  Shift-home\/end - extend selection to left\/right end of row\n-                  Control-shift-home\/end - extend selection to beginning\/end of data\n-                  Shift-PageUp\/PageDown - extend selection up\/down one view and scroll\n-                                          table\n-                  Control-shift-PageUp\/PageDown - extend selection left\/right one view\n-                                                          and scroll table\n-                \"\"\";\n-\n+    static JFrame initTest() {\n@@ -124,6 +77,1 @@\n-        frame = new JFrame(\"JTable Keyboard Navigation Test\");\n-        passFailJFrame = new PassFailJFrame(\"Test Instructions\",\n-                INSTRUCTIONS, 5L, 15, 50);\n-\n-        PassFailJFrame.addTestWindow(frame);\n-        PassFailJFrame.positionTestWindow(frame, PassFailJFrame.Position.VERTICAL);\n+        JFrame frame = new JFrame(\"JTable Keyboard Navigation Test\");\n@@ -154,3 +102,3 @@\n-        TableCellRenderer headerRenderer = colorColumn.getHeaderRenderer();\n-        if (headerRenderer instanceof DefaultTableCellRenderer)\n-            ((DefaultTableCellRenderer) headerRenderer).setToolTipText(\"Hi Mom!\");\n+        if (colorColumn.getHeaderRenderer() instanceof DefaultTableCellRenderer headerRenderer) {\n+            headerRenderer.setToolTipText(\"Hi Mom!\");\n+        }\n@@ -166,1 +114,1 @@\n-                int cellValue = (value instanceof Number) ? ((Number) value).intValue() : 0;\n+                int cellValue = (value instanceof Number number) ? number.intValue() : 0;\n@@ -175,0 +123,1 @@\n+        tableView.setColumnSelectionAllowed(true);\n@@ -181,1 +130,1 @@\n-        frame.setVisible(true);\n+        return frame;\n@@ -227,8 +176,123 @@\n-        SwingUtilities.invokeAndWait(() -> {\n-            try {\n-                initTest();\n-            } catch (Exception e) {\n-                throw new RuntimeException(e);\n-            }\n-        });\n-        passFailJFrame.awaitAndCheck();\n+        String INSTRUCTIONS = \"\"\"\n+                Instructions to Test:\n+                1. Refer the below keyboard navigation specs\n+                 (referenced from bug report 4112270).\n+                2. Check all combinations of navigational keys mentioned below\n+                 and verifying each key combinations against the spec defined.\n+                 If it does, press \"pass\", otherwise press \"fail\".\n+\n+                \"\"\";\n+\n+        INSTRUCTIONS += getOSSpecificInstructions();\n+        PassFailJFrame.builder()\n+                .instructions(INSTRUCTIONS)\n+                .rows(30)\n+                .columns(50)\n+                .testUI(KeyBoardNavigation::initTest)\n+                .testTimeOut(10000)\n+                .build()\n+                .awaitAndCheck();\n+    }\n+\n+    public static String getOSSpecificInstructions() {\n+        final String WINDOWS_SPECIFIC = \"\"\"\n+                Tab, Shift-Tab - Navigate In.\n+                Return\/Shift-Return - Move focus one cell down\/up.\n+                Tab\/Shift-Tab -  Move focus one cell right\/left.\n+                Up\/Down Arrow - Deselect current selection; move focus one\n+                                cell up\/down\n+                Left\/Right Arrow - Deselect current selection; move focus\n+                                   one cell left\/right\n+                PageUp\/PageDown - Deselect current selection; scroll up\/down\n+                                  one JViewport view; first visible cell in\n+                                  current column gets focus\n+                Control-PageUp\/PageDown - Deselect current selection;\n+                                          move focus and view to\n+                                          first\/last cell in current row\n+                Home\/End - Deselect current selection; move focus and view to\n+                           first\/last cell in current row\n+                Control-Home\/End - Deselect current selection;\n+                                   scroll up\/down one  JViewport view;\n+                                   first\/last visible row of the table\n+                F2 - Allows editing in a cell containing information without\n+                     overwriting the information\n+                Esc -  Resets the cell content back to the state it was in\n+                       before editing started\n+                Ctrl+A, Ctrl+\/ - Select All\n+                Ctrl+\\\\ - Deselect all\n+                Shift-Up\/Down Arrow -  Extend selection up\/down one row\n+                Shift-Left\/Right Arrow - Extend selection left\/right one\n+                                         column\n+                Control-shift Up\/Down Arrow -  Extend selection to top\/bottom\n+                                                of column\n+                Shift-Home\/End -  Extend selection to left\/right end of row\n+                Control-Shift-Home\/End  - Extend selection to beginning\/end\n+                                          of data\n+                Shift-PageUp\/PageDown - Extend selection up\/down one view\n+                                        and scroll table\n+                Control-Shift-PageUp\/PageDown - Extend selection left\/right\n+                                                end of row\n+                \"\"\";\n+\n+        final String LINUX_SPECIFIC = \"\"\"\n+                Tab, Shift-Tab - Navigate In.\n+                Return\/Shift-Return - Move focus one cell down\/up.\n+                Tab\/Shift-Tab -  Move focus one cell right\/left.\n+                Up\/Down Arrow - Deselect current selection;\n+                                move focus one cell up\/down\n+                Left\/Right Arrow - Deselect current selection;\n+                                   move focus one cell left\/right\n+                PageUp\/PageDown - Deselect current selection;\n+                                  scroll up\/down one  JViewport view;\n+                                  first visible cell in current column gets focus\n+                Home\/End - Deselect current selection; move focus and view to\n+                                     first\/last cell in current row\n+                F2 - Allows editing in a cell containing information without\n+                     overwriting the information\n+                Esc -  Resets the cell content back to the state it was in\n+                       before editing started\n+                Ctrl+A, Ctrl+\/ - Select All\n+                Ctrl+\\\\ - Deselect all\n+                Shift-Up\/Down Arrow -  Extend selection up\/down one row\n+                Shift-Left\/Right Arrow - Extend selection left\/right one column\n+                Control-Shift Up\/Down Arrow -  Extend selection to top\/bottom of\n+                                               column\n+                Shift-Home\/End -  Extend selection to left\/right end of row\n+                Shift-PageUp\/PageDown - Extend selection up\/down one view and\n+                                        scroll  table\n+                \"\"\";\n+\n+        final String MAC_SPECIFIC = \"\"\"\n+                Tab, Shift-Tab - Navigate In.\n+                Return\/Shift-Return - Move focus one cell down\/up.\n+                Tab\/Shift-Tab -  Move focus one cell right\/left.\n+                Up\/Down Arrow - Deselect current selection; move focus one cell\n+                                up\/down\n+                Left\/Right Arrow - Deselect current selection;\n+                                   move focus one cell left\/right\n+                FN + Up Arrow\/FN + Down Arrow - Deselect current selection;\n+                                   scroll up\/down one JViewport view;\n+                                   first visible cell in current column gets focus\n+                Control-FN+Up Arrow\/FN+Down Arrow - Deselect current selection;\n+                                                    move focus and view to\n+                                                    first\/last cell in current row\n+                F2 - Allows editing in a cell containing information without\n+                     overwriting the information\n+                Esc -  Resets the cell content back to the state it was in\n+                       before editing started\n+                Ctrl+A, Ctrl+\/ - Select All\n+                Ctrl+\\\\ - Deselect all\n+                Shift-Up\/Down Arrow -  Extend selection up\/down one row\n+                Shift-Left\/Right Arrow - Extend selection left\/right one column\n+                FN-Shift Up\/Down Arrow -  Extend selection to top\/bottom of column\n+                Shift-PageUp\/PageDown - Extend selection up\/down one view and scroll\n+                                        table\n+                                \"\"\";\n+        String osName = System.getProperty(\"os.name\").toLowerCase();\n+        if (osName.startsWith(\"mac\")) {\n+            return MAC_SPECIFIC;\n+        } else if (osName.startsWith(\"win\")) {\n+            return WINDOWS_SPECIFIC;\n+        } else {\n+            return LINUX_SPECIFIC;\n+        }\n","filename":"test\/jdk\/javax\/swing\/JTable\/KeyBoardNavigation.java","additions":131,"deletions":67,"binary":false,"changes":198,"status":"modified"}]}