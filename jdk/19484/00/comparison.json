{"files":[{"patch":"@@ -299,0 +299,6 @@\n+$(eval $(call SetupTarget, verify-build-javac, \\\n+    MAKEFILE := VerifyBuild, \\\n+    TARGET := verify-build-javac, \\\n+    DEPS :=  build-jdk-javac, \\\n+))\n+\n@@ -965,2 +971,2 @@\n-  # ct.sym and element-list generation also needs the BUILD_JDK. If the\n-  # BUILD_JDK was supplied externally, no extra prerequisites are needed.\n+  build-jdk-javac:\n+  # If the BUILD_JDK was supplied externally, no extra prerequisites are needed.\n@@ -971,2 +977,1 @@\n-      jdk.compiler-gendata: create-buildjdk\n-      jdk.javadoc-gendata: create-buildjdk\n+      build-jdk-javac: create-buildjdk\n@@ -977,2 +982,1 @@\n-    jdk.compiler-gendata: jdk.compiler-launchers\n-    jdk.javadoc-gendata: jdk.compiler-launchers\n+    build-jdk-javac: jdk.compiler-launchers $(JAVA_TARGETS)\n@@ -980,0 +984,5 @@\n+  usable-build-jdk-javac: verify-build-javac\n+\n+  # ct.sym and element-list generation needs the BUILD_JDK.\n+  jdk.compiler-gendata: usable-build-jdk-javac\n+  jdk.javadoc-gendata: usable-build-jdk-javac\n","filename":"make\/Main.gmk","additions":15,"deletions":6,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -0,0 +1,55 @@\n+#\n+# Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+# DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+#\n+# This code is free software; you can redistribute it and\/or modify it\n+# under the terms of the GNU General Public License version 2 only, as\n+# published by the Free Software Foundation.  Oracle designates this\n+# particular file as subject to the \"Classpath\" exception as provided\n+# by Oracle in the LICENSE file that accompanied this code.\n+#\n+# This code is distributed in the hope that it will be useful, but WITHOUT\n+# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+# FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+# version 2 for more details (a copy is included in the LICENSE file that\n+# accompanied this code).\n+#\n+# You should have received a copy of the GNU General Public License version\n+# 2 along with this work; if not, write to the Free Software Foundation,\n+# Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+#\n+# Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+# or visit www.oracle.com if you need additional information or have any\n+# questions.\n+#\n+\n+default: all\n+\n+include $(SPEC)\n+include MakeBase.gmk\n+include Execute.gmk\n+\n+TEST_JAVAC_DIR :=  $(SUPPORT_OUTPUTDIR)\/verify-build\n+TEST_JAVAC_OUTPUT := $(TEST_JAVAC_DIR)\/javac.output\n+\n+$(eval $(call SetupExecute, TEST_BUILD_JAVAC, \\\n+    COMMAND := $(BUILD_JAVAC) --version > $(TEST_JAVAC_OUTPUT) 2>&1 || ( \\\n+        exitcode=$$? ; \\\n+        $(ECHO) \"ERROR: Failed to run javac from the build JDK.\" \\\n+            \"This is likely a problem with the newly built JVM\/JDK. Output:\" ; \\\n+        $(CAT) $(TEST_JAVAC_OUTPUT) ; \\\n+        exit $$exitcode \\\n+    ), \\\n+    INFO := Testing javac from the Build JDK, \\\n+    OUTPUT_DIR := $(TEST_JAVAC_DIR), \\\n+))\n+\n+TARGETS += $(TEST_BUILD_JAVAC)\n+\n+################################################################################\n+\n+verify-build-javac: $(TEST_BUILD_JAVAC)\n+\n+all: $(TARGETS)\n+\n+.PHONY: default all verify-build-javac\n","filename":"make\/VerifyBuild.gmk","additions":55,"deletions":0,"binary":false,"changes":55,"status":"added"}]}