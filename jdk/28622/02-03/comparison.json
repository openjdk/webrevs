{"files":[{"patch":"@@ -236,1 +236,1 @@\n-  size_t available = _space_info->soft_available_exclude_evac_reserve();\n+  size_t available = _space_info->soft_mutator_available();\n@@ -255,3 +255,2 @@\n-    log_trigger(\"Free (Soft) (%zu%s) is below minimum threshold (%zu%s)\",\n-                 byte_size_in_proper_unit(available), proper_unit_for_byte_size(available),\n-                 byte_size_in_proper_unit(min_threshold), proper_unit_for_byte_size(min_threshold));\n+    log_trigger(\"Free (Soft) (\" PROPERFMT \") is below minimum threshold (\" PROPERFMT \")\",\n+                 PROPERFMTARGS(available), PROPERFMTARGS(min_threshold));\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/heuristics\/shenandoahAdaptiveHeuristics.cpp","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -50,1 +50,1 @@\n-  size_t available = _space_info->soft_available_exclude_evac_reserve();\n+  size_t available = _space_info->soft_mutator_available();\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/heuristics\/shenandoahCompactHeuristics.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -41,1 +41,1 @@\n-  virtual size_t soft_available_exclude_evac_reserve() const = 0;\n+  virtual size_t soft_mutator_available() const = 0;\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/heuristics\/shenandoahSpaceInfo.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -44,1 +44,1 @@\n-  size_t available = _space_info->soft_available_exclude_evac_reserve();\n+  size_t available = _space_info->soft_mutator_available();\n@@ -54,3 +54,2 @@\n-    log_trigger(\"Free (Soft) (%zu%s) is below minimum threshold (%zu%s)\",\n-                 byte_size_in_proper_unit(available),           proper_unit_for_byte_size(available),\n-                 byte_size_in_proper_unit(threshold_available), proper_unit_for_byte_size(threshold_available));\n+    log_trigger(\"Free (Soft) (\" PROPERFMT \") is below minimum threshold (\" PROPERFMT \")\",\n+                 PROPERFMTARGS(available), PROPERFMTARGS(threshold_available));\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/heuristics\/shenandoahStaticHeuristics.cpp","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -3054,1 +3054,1 @@\n-  ls.print(\" %s freeset stats: Partition count: %zu, Reserved: %zu%s, Max free available in a single region: %zu%s;\",\n+  ls.print(\" %s freeset stats: Partition count: %zu, Reserved: \" PROPERFMT \", Max free available in a single region: \" PROPERFMT \";\",\n@@ -3057,2 +3057,2 @@\n-            byte_size_in_proper_unit(total_free), proper_unit_for_byte_size(total_free),\n-            byte_size_in_proper_unit(max),        proper_unit_for_byte_size(max));\n+            PROPERFMTARGS(total_free), PROPERFMTARGS(max)\n+          );\n@@ -3181,6 +3181,3 @@\n-      ls.print(\"Whole heap stats: Total free: %zu%s, Total used: %zu%s, Max free in a single region: %zu%s, Max humongous: %zu%s; \",\n-               byte_size_in_proper_unit(total_free),    proper_unit_for_byte_size(total_free),\n-               byte_size_in_proper_unit(total_used), proper_unit_for_byte_size(total_used),\n-               byte_size_in_proper_unit(max),           proper_unit_for_byte_size(max),\n-               byte_size_in_proper_unit(max_humongous), proper_unit_for_byte_size(max_humongous)\n-      );\n+      ls.print(\"Whole heap stats: Total free: \" PROPERFMT \", Total used: \" PROPERFMT \", Max free in a single region: \" PROPERFMT\n+               \", Max humongous: \" PROPERFMT \"; \",\n+               PROPERFMTARGS(total_free), PROPERFMTARGS(total_used), PROPERFMTARGS(max), PROPERFMTARGS(max_humongous));\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahFreeSet.cpp","additions":6,"deletions":9,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -939,1 +939,1 @@\n-size_t ShenandoahGeneration::soft_available_exclude_evac_reserve() const {\n+size_t ShenandoahGeneration::soft_mutator_available() const {\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahGeneration.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -129,1 +129,1 @@\n-  size_t soft_available_exclude_evac_reserve() const override;\n+  size_t soft_mutator_available() const override;\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahGeneration.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -81,8 +81,0 @@\n-size_t ShenandoahGlobalGeneration::soft_available_exclude_evac_reserve() const {\n-  size_t soft_max =  ShenandoahHeap::heap()->soft_max_capacity();\n-  assert(max_capacity() >= soft_max, \"Max capacity must be greater than soft max capacity.\");\n-  size_t used = this->used();\n-  size_t mutator_soft_max = soft_max * ((100.0 - ShenandoahEvacReserve) \/ 100);\n-  return (mutator_soft_max > used) ? (mutator_soft_max - used) : 0;\n-}\n-\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahGlobalGeneration.cpp","additions":0,"deletions":8,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -59,1 +59,0 @@\n-  size_t soft_available_exclude_evac_reserve() const override;\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahGlobalGeneration.hpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -141,2 +141,2 @@\n-size_t ShenandoahYoungGeneration::soft_available_exclude_evac_reserve() const {\n-  size_t available = this->ShenandoahGeneration::soft_available_exclude_evac_reserve();\n+size_t ShenandoahYoungGeneration::soft_mutator_available() const {\n+  size_t available = this->ShenandoahGeneration::soft_mutator_available();\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahYoungGeneration.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -86,1 +86,1 @@\n-  size_t soft_available_exclude_evac_reserve() const override;\n+  size_t soft_mutator_available() const override;\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahYoungGeneration.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}