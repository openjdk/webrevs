{"files":[{"patch":"@@ -342,0 +342,11 @@\n+        var customFile = Optional.ofNullable(cmd.getArgumentValue(\"--mac-entitlements\")).map(Path::of);\n+        if (customFile.isEmpty()) {\n+            \/\/ Try from the resource dir.\n+            var resourceDirFile = Optional.ofNullable(cmd.getArgumentValue(\"--resource-dir\")).map(Path::of).map(resourceDir -> {\n+                return resourceDir.resolve(cmd.name() + \".entitlements\");\n+            }).filter(Files::exists);\n+            if (resourceDirFile.isPresent()) {\n+                customFile = resourceDirFile;\n+            }\n+        }\n+\n@@ -343,6 +354,2 @@\n-        if (cmd.hasArgument(\"--mac-entitlements\")) {\n-            expected = new PListReader(Files.readAllBytes(Path.of(cmd.getArgumentValue(\"--mac-entitlements\")))).toMap(true);\n-        } else if (cmd.hasArgument(\"--resource-dir\") &&\n-                   Files.exists(Path.of(cmd.getArgumentValue(\"--resource-dir\")).resolve(cmd.name() + \".entitlements\"))) {\n-            expected = new PListReader(Files.readAllBytes(\n-                    Path.of(cmd.getArgumentValue(\"--resource-dir\")).resolve(cmd.name() + \".entitlements\"))).toMap(true);\n+        if (customFile.isPresent()) {\n+            expected = new PListReader(Files.readAllBytes(customFile.orElseThrow())).toMap(true);\n","filename":"test\/jdk\/tools\/jpackage\/helpers\/jdk\/jpackage\/test\/LauncherVerifier.java","additions":13,"deletions":6,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -39,1 +39,1 @@\n-\/**\n+\/*\n@@ -49,1 +49,1 @@\n- \/*\n+\/*\n@@ -107,6 +107,3 @@\n-                .addArguments(\"--mac-sign\",\n-                              \"--mac-signing-keychain\",\n-                                SigningBase.getKeyChain(),\n-                              \"--mac-app-image-sign-identity\",\n-                                SigningBase.getAppCert(\n-                                    SigningBase.CertIndex.ASCII_INDEX.value()));\n+                .addArguments(\"--mac-sign\", \"--mac-signing-keychain\",\n+                        SigningBase.getKeyChain(), \"--mac-app-image-sign-identity\",\n+                        SigningBase.getAppCert(SigningBase.CertIndex.ASCII_INDEX.value()));\n@@ -118,2 +115,1 @@\n-                             macEntitlementsFile.toAbsolutePath().toString());\n-\n+                    macEntitlementsFile.toAbsolutePath().toString());\n@@ -123,2 +119,1 @@\n-                             resourcesDir.toAbsolutePath().toString());\n-\n+                    resourcesDir.toAbsolutePath().toString());\n","filename":"test\/jdk\/tools\/jpackage\/macosx\/EntitlementsTest.java","additions":7,"deletions":12,"binary":false,"changes":19,"status":"modified"}]}