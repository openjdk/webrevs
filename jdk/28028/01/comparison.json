{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,0 +31,1 @@\n+import jdk.test.lib.thread.TestThreadFactory;\n@@ -440,0 +441,12 @@\n+            String sourcePath;\n+            try {\n+                sourcePath = l.sourcePath();\n+            } catch (AbsentInformationException aie) {\n+               \/\/ Test Thread Factory support has generated methods in MainWrapper class.\n+               if (TestThreadFactory.isTestThreadFactorySet()) {\n+                   sourcePath = \"unknown\";\n+               } else {\n+                   throw aie;\n+               }\n+            }\n+\n@@ -443,1 +456,1 @@\n-               .append(l.sourcePath())\n+               .append(sourcePath)\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/vm\/mlvm\/share\/jdi\/JDIBreakpointTest.java","additions":15,"deletions":2,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2021, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2021, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -35,2 +35,21 @@\n-    private static ThreadFactory threadFactory = \"Virtual\".equals(System.getProperty(\"test.thread.factory\"))\n-            ? virtualThreadFactory() : platformThreadFactory();\n+    public enum TestThreadFactoryType {\n+        NONE, VIRTUAL\n+    }\n+\n+    private final static TestThreadFactoryType testThreadFactoryType =\n+            \"Virtual\".equals(System.getProperty(\"test.thread.factory\"))\n+                    ? TestThreadFactoryType.VIRTUAL\n+                    : TestThreadFactoryType.NONE;\n+\n+    private final static ThreadFactory threadFactory =\n+            testThreadFactoryType == TestThreadFactoryType.VIRTUAL\n+                    ? virtualThreadFactory()\n+                    : platformThreadFactory();\n+\n+    public static TestThreadFactoryType testThreadFactoryType() {\n+        return testThreadFactoryType;\n+    }\n+\n+    public static boolean isTestThreadFactorySet() {\n+        return !testThreadFactoryType.equals(TestThreadFactoryType.NONE);\n+    }\n","filename":"test\/lib\/jdk\/test\/lib\/thread\/TestThreadFactory.java","additions":22,"deletions":3,"binary":false,"changes":25,"status":"modified"}]}