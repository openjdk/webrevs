{"files":[{"patch":"@@ -770,3 +770,0 @@\n-  product(bool, ExpandSubTypeCheckAtParseTime, false, DIAGNOSTIC,           \\\n-          \"Do not use subtype check macro node\")                            \\\n-                                                                            \\\n","filename":"src\/hotspot\/share\/opto\/c2_globals.hpp","additions":0,"deletions":3,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2716,6 +2716,0 @@\n-    \/\/ Do not skip the static sub type check with StressReflectiveCode during\n-    \/\/ parsing (i.e. with ExpandSubTypeCheckAtParseTime) because the\n-    \/\/ associated CheckCastNodePP could already be folded when the type\n-    \/\/ system can prove it's an impossible type. Therefore, we should also\n-    \/\/ do the static sub type check here to ensure control is folded as well.\n-    \/\/ Otherwise, the graph is left in a broken state.\n@@ -2725,2 +2719,3 @@\n-    \/\/ StressReflectiveCode is set or not.\n-    switch (C->static_subtype_check(superk, subk, !ExpandSubTypeCheckAtParseTime)) {\n+    \/\/ StressReflectiveCode is set or not. We can therefore skip this\n+    \/\/ static check when StressReflectiveCode is on.\n+    switch (C->static_subtype_check(superk, subk)) {\n@@ -2907,2 +2902,1 @@\n-  bool expand_subtype_check = C->post_loop_opts_phase() ||   \/\/ macro node expansion is over\n-                              ExpandSubTypeCheckAtParseTime; \/\/ forced expansion\n+  bool expand_subtype_check = C->post_loop_opts_phase(); \/\/ macro node expansion is over\n","filename":"src\/hotspot\/share\/opto\/graphKit.cpp","additions":4,"deletions":10,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -3,1 +3,1 @@\n- * Copyright (c) 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -35,1 +35,0 @@\n- *     -XX:+UnlockDiagnosticVMOptions -XX:+ExpandSubTypeCheckAtParseTime\n","filename":"test\/hotspot\/jtreg\/compiler\/types\/TestSubTypeCheckMacroTrichotomy.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -53,1 +53,0 @@\n- *                   -XX:+UnlockDiagnosticVMOptions -XX:+ExpandSubTypeCheckAtParseTime\n@@ -58,1 +57,0 @@\n- *                   -XX:+UnlockDiagnosticVMOptions -XX:+ExpandSubTypeCheckAtParseTime\n","filename":"test\/hotspot\/jtreg\/compiler\/types\/TestSubTypeCheckWithBottomArray.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"}]}