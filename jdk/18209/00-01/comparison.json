{"files":[{"patch":"@@ -35,1 +35,1 @@\n- * @run main Test4222508\n+ * @run main\/manual Test4222508\n@@ -45,1 +45,0 @@\n-                .testTimeOut(10)\n@@ -48,0 +47,1 @@\n+                .testTimeOut(10)\n","filename":"test\/jdk\/javax\/swing\/JColorChooser\/Test4222508.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -0,0 +1,39 @@\n+<!--\n+ Copyright (c) 2015, Oracle and\/or its affiliates. All rights reserved.\n+ DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+\n+ This code is free software; you can redistribute it and\/or modify it\n+ under the terms of the GNU General Public License version 2 only, as\n+ published by the Free Software Foundation.\n+\n+ This code is distributed in the hope that it will be useful, but WITHOUT\n+ ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ version 2 for more details (a copy is included in the LICENSE file that\n+ accompanied this code).\n+\n+ You should have received a copy of the GNU General Public License version\n+ 2 along with this work; if not, write to the Free Software Foundation,\n+ Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+\n+ Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ or visit www.oracle.com if you need additional information or have any\n+ questions.\n+-->\n+\n+<html>\n+<body>\n+1. Press button \"Show ColorChooser\" in the frame \"frame\" and\n+   a color chooser dialog should appear.\n+2. Without closing the color chooser, change Look And Feel\n+   selecting it from the combobox in the frame \"frame\".\n+   Dialog appearance will change.\n+3. Resize the color chooser by mouse drag.\n+\n+   If you see some remnants of the previous color chooser,\n+   press \"Fail\" else press \"Pass\".\n+\n+<applet width=\"500\" height=\"400\" code=\"Test4319113.class\">\n+<\/applet>\n+<\/body>\n+<\/html>\n","filename":"test\/jdk\/javax\/swing\/JColorChooser\/Test4319113.html","additions":39,"deletions":0,"binary":false,"changes":39,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2024 Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,0 +24,9 @@\n+\/*\n+ * @test\n+ * @bug 4319113\n+ * @summary Tests the open JColorChooser behavior on LaF change.\n+ * @author yan\n+ * @run applet\/manual=yesno Test4319113.html\n+ *\/\n+\n+\n@@ -28,0 +37,1 @@\n+import java.awt.LayoutManager;\n@@ -33,0 +43,2 @@\n+import java.io.PrintStream;\n+import javax.swing.JApplet;\n@@ -41,21 +53,16 @@\n-\/*\n- * @test\n- * @bug 4319113\n- * @library \/test\/jdk\/java\/awt\/regtesthelpers \/test\/lib\n- * @build PassFailJFrame\n- * @summary Tests the open JColorChooser behavior on LaF change.\n- * @run main Test4319113\n- *\/\n-public class Test4319113 {\n-    public static void main(String[] args) throws Exception {\n-        PassFailJFrame.builder()\n-                .title(\"Test4319113\")\n-                .instructions(\"Choose a LaF using the dropdown. Click on the Show JColorChooser button.\\n\" +\n-                        \"Test if the JColorChooser is working normally. If it is, click the OK button\\n\" +\n-                        \"and repeat for the other LaFs. If not, fail the test.\")\n-                .testTimeOut(10)\n-                .rows(5)\n-                .columns(40)\n-                .testUI(Test4319113::test)\n-                .build()\n-                .awaitAndCheck();\n+public class Test4319113\n+extends JApplet\n+implements ActionListener {\n+    private final JFrame frame = new JFrame(\"frame\");\n+    private JComboBox cbPlaf;\n+\n+    @Override\n+    public void init() {\n+        try {\n+            java.awt.EventQueue.invokeLater( () -> {\n+                Test4319113.this.frame.setLayout(new GridLayout(2, 1));\n+                Test4319113.this.show(Test4319113.this.frame);\n+            });\n+        }catch(Exception ex) {\n+            ex.printStackTrace();\n+        }\n@@ -64,3 +71,7 @@\n-    private static JFrame test() {\n-        JFrame frame = new JFrame(\"Test4319113\");\n-        frame.setLayout(new GridLayout(2, 1));\n+    @Override\n+    public void actionPerformed(ActionEvent actionEvent) {\n+        Object object = actionEvent.getSource();\n+        Component component = object instanceof Component ? (Component)object : null;\n+        JDialog jDialog = JColorChooser.createDialog(component, \"ColorChooser\", false, new JColorChooser(Color.BLUE), null, null);\n+        jDialog.setVisible(true);\n+    }\n@@ -68,0 +79,1 @@\n+    private void show(Window window) {\n@@ -70,10 +82,3 @@\n-        jButton.addActionListener(new ActionListener() {\n-            @Override\n-            public void actionPerformed(ActionEvent actionEvent) {\n-                Object object = actionEvent.getSource();\n-                Component component = object instanceof Component ? (Component) object : null;\n-                JDialog jDialog = JColorChooser.createDialog(component, \"ColorChooser\",\n-                        false, new JColorChooser(Color.BLUE), null, null);\n-                jDialog.setVisible(true);\n-            }\n-        });\n+        jButton.addActionListener(this);\n+        this.cbPlaf = new JComboBox<UIManager.LookAndFeelInfo>(UIManager.getInstalledLookAndFeels());\n+        this.cbPlaf.addItemListener(new ItemListener(){\n@@ -81,2 +86,0 @@\n-        JComboBox cbPlaf = new JComboBox<UIManager.LookAndFeelInfo>(UIManager.getInstalledLookAndFeels());\n-        cbPlaf.addItemListener(new ItemListener() {\n@@ -86,1 +89,1 @@\n-                    SwingUtilities.invokeLater(new Runnable() {\n+                    SwingUtilities.invokeLater(new Runnable(){\n@@ -90,2 +93,1 @@\n-                            UIManager.LookAndFeelInfo lookAndFeelInfo =\n-                                    (UIManager.LookAndFeelInfo) cbPlaf.getSelectedItem();\n+                            UIManager.LookAndFeelInfo lookAndFeelInfo = (UIManager.LookAndFeelInfo)Test4319113.this.cbPlaf.getSelectedItem();\n@@ -99,1 +101,2 @@\n-                            } catch (Exception var2_3) {\n+                            }\n+                            catch (Exception var2_3) {\n@@ -108,6 +111,4 @@\n-\n-        frame.add(cbPlaf);\n-        frame.add(jButton);\n-        frame.pack();\n-\n-        return frame;\n+        window.add(this.cbPlaf);\n+        window.add(jButton);\n+        window.pack();\n+        window.setVisible(true);\n","filename":"test\/jdk\/javax\/swing\/JColorChooser\/Test4319113.java","additions":48,"deletions":47,"binary":false,"changes":95,"status":"modified"}]}