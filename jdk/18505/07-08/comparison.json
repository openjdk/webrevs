{"files":[{"patch":"@@ -794,2 +794,2 @@\n-          \"Use storestore barrier instead of release barrier for\"           \\\n-          \"on constructor exit\")                                            \\\n+          \"Use StoreStore barrier instead of Release barrier at the end of\" \\\n+          \"constructors\")                                                   \\\n","filename":"src\/hotspot\/share\/opto\/c2_globals.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -264,1 +264,0 @@\n-    MemBarNode::print_statistics();\n","filename":"src\/hotspot\/share\/opto\/compile.cpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -200,1 +200,1 @@\n-        if (n->req() > MemBarNode::Precedent) {\n+        if (!UseStoreStoreForCtor || n->req() > MemBarNode::Precedent) {\n","filename":"src\/hotspot\/share\/opto\/escape.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -639,1 +639,2 @@\n-                  use->Opcode() == Op_MemBarStoreStore)) {\n+                  (UseStoreStoreForCtor &&\n+                   use->Opcode() == Op_MemBarStoreStore))) {\n","filename":"src\/hotspot\/share\/opto\/macro.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -139,9 +139,0 @@\n-int MemBarNode::_barriers_generated = 0;\n-int MemBarNode::_barriers_eliminated = 0;\n-\n-void MemBarNode::print_statistics() {\n-  tty->print_cr(\"Barriers generated = %d, Barriers eliminated = %d\",\n-                Atomic::load(&_barriers_generated),\n-                Atomic::load(&_barriers_eliminated));\n-}\n-\n@@ -3354,1 +3345,0 @@\n-  NOT_PRODUCT(Atomic::inc(&MemBarNode::_barriers_generated));\n@@ -3390,1 +3380,0 @@\n-  NOT_PRODUCT(Atomic::inc(&MemBarNode::_barriers_eliminated));\n@@ -3438,1 +3427,2 @@\n-    } else if (opc == Op_MemBarRelease || opc == Op_MemBarStoreStore) {\n+    } else if (opc == Op_MemBarRelease ||\n+               (UseStoreStoreForCtor && opc == Op_MemBarStoreStore)) {\n","filename":"src\/hotspot\/share\/opto\/memnode.cpp","additions":2,"deletions":12,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -1202,5 +1202,0 @@\n-#ifndef PRODUCT\n-  static int _barriers_generated;\n-  static int _barriers_eliminated;\n-  static void print_statistics();\n-#endif\n","filename":"src\/hotspot\/share\/opto\/memnode.hpp","additions":0,"deletions":5,"binary":false,"changes":5,"status":"modified"}]}