{"files":[{"patch":"@@ -604,1 +604,1 @@\n-  Compile::TracePhase tp(\"bldOopMaps\", &timers[_t_buildOopMaps]);\n+  Compile::TracePhase tp(_t_buildOopMaps);\n","filename":"src\/hotspot\/share\/opto\/buildOopMap.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -219,1 +219,1 @@\n-  Compile::TracePhase tp(\"ctorChaitin\", &timers[_t_ctorChaitin]);\n+  Compile::TracePhase tp(_t_ctorChaitin);\n@@ -324,1 +324,1 @@\n-  Compile::TracePhase tp(\"chaitinCompact\", &timers[_t_chaitinCompact]);\n+  Compile::TracePhase tp(_t_chaitinCompact);\n@@ -400,1 +400,1 @@\n-    Compile::TracePhase tp(\"computeLive\", &timers[_t_computeLive]);\n+    Compile::TracePhase tp(_t_computeLive);\n@@ -417,1 +417,1 @@\n-    Compile::TracePhase tp(\"computeLive (sbplr)\", &timers[_t_computeLive]);\n+    Compile::TracePhase tp(\"computeLive (sbplr)\", _t_computeLive);\n@@ -442,1 +442,1 @@\n-    Compile::TracePhase tp(\"chaitinCoalesce1\", &timers[_t_chaitinCoalesce1]);\n+    Compile::TracePhase tp(_t_chaitinCoalesce1);\n@@ -457,1 +457,1 @@\n-    Compile::TracePhase tp(\"computeLive\", &timers[_t_computeLive]);\n+    Compile::TracePhase tp(_t_computeLive);\n@@ -498,1 +498,1 @@\n-      Compile::TracePhase tp(\"computeLive\", &timers[_t_computeLive]);\n+      Compile::TracePhase tp(_t_computeLive);\n@@ -512,1 +512,1 @@\n-      Compile::TracePhase tp(\"chaitinCoalesce2\", &timers[_t_chaitinCoalesce2]);\n+      Compile::TracePhase tp(_t_chaitinCoalesce2);\n@@ -571,1 +571,1 @@\n-      Compile::TracePhase tp(\"computeLive\", &timers[_t_computeLive]);\n+      Compile::TracePhase tp(_t_computeLive);\n@@ -589,1 +589,1 @@\n-      Compile::TracePhase tp(\"chaitinCoalesce3\", &timers[_t_chaitinCoalesce3]);\n+      Compile::TracePhase tp(_t_chaitinCoalesce3);\n@@ -1186,1 +1186,1 @@\n-  Compile::TracePhase tp(\"chaitinCacheLRG\", &timers[_t_chaitinCacheLRG]);\n+  Compile::TracePhase tp(_t_chaitinCacheLRG);\n@@ -1220,1 +1220,1 @@\n-  Compile::TracePhase tp(\"chaitinSimplify\", &timers[_t_chaitinSimplify]);\n+  Compile::TracePhase tp(_t_chaitinSimplify);\n@@ -1519,1 +1519,1 @@\n-  Compile::TracePhase tp(\"chaitinSelect\", &timers[_t_chaitinSelect]);\n+  Compile::TracePhase tp(_t_chaitinSelect);\n@@ -1707,1 +1707,1 @@\n-  Compile::TracePhase tp(\"fixupSpills\", &timers[_t_fixupSpills]);\n+  Compile::TracePhase tp(_t_fixupSpills);\n","filename":"src\/hotspot\/share\/opto\/chaitin.cpp","additions":14,"deletions":14,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -749,1 +749,1 @@\n-    TracePhase tp(\"parse\", &timers[_t_parser]);\n+    TracePhase tp(_t_parser);\n@@ -2034,1 +2034,1 @@\n-  TracePhase tp(\"incrementalInline_inline\", &timers[_t_incrInline_inline]);\n+  TracePhase tp(_t_incrInline_inline);\n@@ -2075,1 +2075,1 @@\n-    TracePhase tp(\"incrementalInline_pru\", &timers[_t_incrInline_pru]);\n+    TracePhase tp(_t_incrInline_pru);\n@@ -2080,1 +2080,1 @@\n-    TracePhase tp(\"incrementalInline_igvn\", &timers[_t_incrInline_igvn]);\n+    TracePhase tp(_t_incrInline_igvn);\n@@ -2090,1 +2090,1 @@\n-  TracePhase tp(\"incrementalInline\", &timers[_t_incrInline]);\n+  TracePhase tp(_t_incrInline);\n@@ -2098,1 +2098,1 @@\n-        TracePhase tp(\"incrementalInline_ideal\", &timers[_t_incrInline_ideal]);\n+        TracePhase tp(_t_incrInline_ideal);\n@@ -2182,1 +2182,1 @@\n-      TracePhase tp(\"idealLoop\", &timers[_t_idealLoop]);\n+      TracePhase tp(_t_idealLoop);\n@@ -2220,1 +2220,1 @@\n-  TracePhase tp(\"optimizer\", &timers[_t_optimizer]);\n+  TracePhase tp(_t_optimizer);\n@@ -2250,1 +2250,1 @@\n-    TracePhase tp(\"iterGVN\", &timers[_t_iterGVN]);\n+    TracePhase tp(_t_iterGVN);\n@@ -2299,1 +2299,1 @@\n-    TracePhase tp(\"\", &timers[_t_vector]);\n+    TracePhase tp(_t_vector);\n@@ -2308,1 +2308,1 @@\n-    Compile::TracePhase tp(\"\", &timers[_t_renumberLive]);\n+    Compile::TracePhase tp(_t_renumberLive);\n@@ -2329,1 +2329,1 @@\n-      TracePhase tp(\"idealLoop\", &timers[_t_idealLoop]);\n+      TracePhase tp(_t_idealLoop);\n@@ -2349,1 +2349,1 @@\n-        TracePhase tp(\"macroEliminate\", &timers[_t_macroEliminate]);\n+        TracePhase tp(_t_macroEliminate);\n@@ -2378,1 +2378,1 @@\n-      TracePhase tp(\"idealLoop\", &timers[_t_idealLoop]);\n+      TracePhase tp(_t_idealLoop);\n@@ -2386,1 +2386,1 @@\n-      TracePhase tp(\"idealLoop\", &timers[_t_idealLoop]);\n+      TracePhase tp(_t_idealLoop);\n@@ -2394,1 +2394,1 @@\n-      TracePhase tp(\"idealLoop\", &timers[_t_idealLoop]);\n+      TracePhase tp(_t_idealLoop);\n@@ -2411,1 +2411,1 @@\n-    TracePhase tp(\"ccp\", &timers[_t_ccp]);\n+    TracePhase tp(_t_ccp);\n@@ -2420,1 +2420,1 @@\n-    TracePhase tp(\"iterGVN2\", &timers[_t_iterGVN2]);\n+    TracePhase tp(_t_iterGVN2);\n@@ -2447,1 +2447,1 @@\n-    TracePhase tp(\"macroExpand\", &timers[_t_macroExpand]);\n+    TracePhase tp(_t_macroExpand);\n@@ -2458,1 +2458,1 @@\n-    TracePhase tp(\"barrierExpand\", &timers[_t_barrierExpand]);\n+    TracePhase tp(_t_barrierExpand);\n@@ -2496,1 +2496,1 @@\n-   TracePhase tp(\"graphReshape\", &timers[_t_graphReshaping]);\n+   TracePhase tp(_t_graphReshaping);\n@@ -2938,1 +2938,1 @@\n-    TracePhase tp(\"matcher\", &timers[_t_matcher]);\n+    TracePhase tp(_t_matcher);\n@@ -2963,1 +2963,1 @@\n-    TracePhase tp(\"scheduler\", &timers[_t_scheduler]);\n+    TracePhase tp(_t_scheduler);\n@@ -2977,1 +2977,1 @@\n-    TracePhase tp(\"regalloc\", &timers[_t_registerAllocation]);\n+    TracePhase tp(_t_registerAllocation);\n@@ -2996,1 +2996,1 @@\n-    TracePhase tp(\"blockOrdering\", &timers[_t_blockOrdering]);\n+    TracePhase tp(_t_blockOrdering);\n@@ -3011,1 +3011,1 @@\n-    TracePhase tp(\"peephole\", &timers[_t_peephole]);\n+    TracePhase tp(_t_peephole);\n@@ -3019,1 +3019,1 @@\n-    TracePhase tp(\"postalloc_expand\", &timers[_t_postalloc_expand]);\n+    TracePhase tp(_t_postalloc_expand);\n@@ -3026,1 +3026,1 @@\n-    TracePhase tp(\"output\", &timers[_t_output]);\n+    TracePhase tp(_t_output);\n@@ -4316,2 +4316,2 @@\n-Compile::TracePhase::TracePhase(const char* name, elapsedTimer* accumulator)\n-  : TraceTime(name, accumulator, CITime, CITimeVerbose),\n+Compile::TracePhase::TracePhase(const char* name, PhaseTraceId id)\n+  : TraceTime(name, &Phase::timers[id], CITime, CITimeVerbose),\n@@ -4320,1 +4320,0 @@\n-    _phase_name(name),\n@@ -4328,1 +4327,1 @@\n-    _log->begin_head(\"phase name='%s' nodes='%d' live='%d'\", _phase_name, _compile->unique(), _compile->live_nodes());\n+    _log->begin_head(\"phase name='%s' nodes='%d' live='%d'\", phase_name(), _compile->unique(), _compile->live_nodes());\n@@ -4334,0 +4333,3 @@\n+Compile::TracePhase::TracePhase(PhaseTraceId id)\n+  : TracePhase(Phase::get_phase_trace_id_text(id), id) {}\n+\n@@ -4341,1 +4343,1 @@\n-                  _phase_name, _compile->unique(), _compile->live_nodes(), _compile->count_live_nodes_by_graph_walk());\n+                  phase_name(), _compile->unique(), _compile->live_nodes(), _compile->count_live_nodes_by_graph_walk());\n@@ -4350,1 +4352,1 @@\n-    _log->done(\"phase name='%s' nodes='%d' live='%d'\", _phase_name, _compile->unique(), _compile->live_nodes());\n+    _log->done(\"phase name='%s' nodes='%d' live='%d'\", phase_name(), _compile->unique(), _compile->live_nodes());\n","filename":"src\/hotspot\/share\/opto\/compile.cpp","additions":36,"deletions":34,"binary":false,"changes":70,"status":"modified"},{"patch":"@@ -242,1 +242,0 @@\n-    const char* _phase_name;\n@@ -245,1 +244,2 @@\n-    TracePhase(const char* name, elapsedTimer* accumulator);\n+    TracePhase(PhaseTraceId phaseTraceId);\n+    TracePhase(const char* name, PhaseTraceId phaseTraceId);\n@@ -247,0 +247,1 @@\n+    const char* phase_name() const { return title(); }\n","filename":"src\/hotspot\/share\/opto\/compile.hpp","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -106,1 +106,1 @@\n-  Compile::TracePhase tp(\"escapeAnalysis\", &Phase::timers[Phase::_t_escapeAnalysis]);\n+  Compile::TracePhase tp(Phase::_t_escapeAnalysis);\n@@ -151,1 +151,1 @@\n-  { Compile::TracePhase tp(\"connectionGraph\", &Phase::timers[Phase::_t_connectionGraph]);\n+  { Compile::TracePhase tp(Phase::_t_connectionGraph);\n","filename":"src\/hotspot\/share\/opto\/escape.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1684,1 +1684,1 @@\n-    Compile::TracePhase tp(\"computeLive\", &timers[_t_computeLive]);\n+    Compile::TracePhase tp(_t_computeLive);\n","filename":"src\/hotspot\/share\/opto\/gcm.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -316,1 +316,1 @@\n-  Compile::TracePhase tp(\"buildIFG_virt\", &timers[_t_buildIFGvirtual]);\n+  Compile::TracePhase tp(_t_buildIFGvirtual);\n@@ -846,1 +846,1 @@\n-  Compile::TracePhase tp(\"buildIFG\", &timers[_t_buildIFGphysical]);\n+  Compile::TracePhase tp(_t_buildIFGphysical);\n","filename":"src\/hotspot\/share\/opto\/ifg.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1111,1 +1111,1 @@\n-      Compile::TracePhase tp(\"autoVectorize\", &Phase::timers[Phase::_t_autoVectorize]);\n+      Compile::TracePhase tp(Phase::_t_autoVectorize);\n","filename":"src\/hotspot\/share\/opto\/loopTransform.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -4974,1 +4974,1 @@\n-    Compile::TracePhase tp(\"autoVectorize\", &timers[_t_autoVectorize]);\n+    Compile::TracePhase tp(_t_autoVectorize);\n","filename":"src\/hotspot\/share\/opto\/loopnode.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1199,1 +1199,1 @@\n-    Compile::TracePhase tp(\"idealLoopVerify\", &timers[_t_idealLoopVerify]);\n+    Compile::TracePhase tp(_t_idealLoopVerify);\n","filename":"src\/hotspot\/share\/opto\/loopnode.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -437,1 +437,1 @@\n-    Compile::TracePhase tp(\"postselect_cleanup\", &timers[_t_postselect_cleanup]);\n+    Compile::TracePhase tp(_t_postselect_cleanup);\n","filename":"src\/hotspot\/share\/opto\/matcher.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -440,1 +440,1 @@\n-  Compile::TracePhase tp(\"shorten branches\", &timers[_t_shortenBranches]);\n+  Compile::TracePhase tp(_t_shortenBranches);\n@@ -1421,1 +1421,1 @@\n-  Compile::TracePhase tp(\"fill buffer\", &timers[_t_fillBuffer]);\n+  Compile::TracePhase tp(_t_fillBuffer);\n@@ -2165,1 +2165,1 @@\n-  Compile::TracePhase tp(\"isched\", &timers[_t_instrSched]);\n+  Compile::TracePhase tp(_t_instrSched);\n@@ -3431,1 +3431,1 @@\n-    Compile::TracePhase tp(\"install_code\", &timers[_t_registerMethod]);\n+    Compile::TracePhase tp(_t_registerMethod);\n","filename":"src\/hotspot\/share\/opto\/output.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -42,0 +42,10 @@\n+const char* Phase::get_phase_trace_id_text(PhaseTraceId id) {\n+  static const char* const texts[] = {\n+  #define DEF_TEXT(name, text) text,\n+      ALL_PHASE_TRACE_IDS(DEF_TEXT)\n+  #undef DEF_TEXT\n+      nullptr\n+  };\n+  return texts[(int)id];\n+}\n+\n","filename":"src\/hotspot\/share\/opto\/phase.cpp","additions":10,"deletions":0,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -67,0 +67,56 @@\n+#define ALL_PHASE_TRACE_IDS(f)                                   \\\n+    f(   _t_parser,                  \"parse\")                    \\\n+    f(   _t_optimizer,               \"optimizer\")                \\\n+    f(     _t_escapeAnalysis,        \"escapeAnalysis\")           \\\n+    f(       _t_connectionGraph,     \"connectionGraph\")          \\\n+    f(       _t_macroEliminate,      \"macroEliminate\")           \\\n+    f(     _t_iterGVN,               \"iterGVN\")                  \\\n+    f(     _t_incrInline,            \"incrementalInline\")        \\\n+    f(       _t_incrInline_ideal,    \"incrementalInline_ideal\")  \\\n+    f(       _t_incrInline_igvn,     \"incrementalInline_igvn\")   \\\n+    f(       _t_incrInline_pru,      \"incrementalInline_pru\")    \\\n+    f(       _t_incrInline_inline,   \"incrementalInline_inline\") \\\n+    f(     _t_vector,                \"\")                         \\\n+    f(       _t_vector_elimination,  \"vector_elimination\")       \\\n+    f(         _t_vector_igvn,       \"incrementalInline_igvn\")   \\\n+    f(         _t_vector_pru,        \"vector_pru\")               \\\n+    f(     _t_renumberLive,          \"\")                         \\\n+    f(     _t_idealLoop,             \"idealLoop\")                \\\n+    f(       _t_autoVectorize,       \"autoVectorize\")            \\\n+    f(     _t_idealLoopVerify,       \"idealLoopVerify\")          \\\n+    f(     _t_ccp,                   \"ccp\")                      \\\n+    f(     _t_iterGVN2,              \"iterGVN2\")                 \\\n+    f(     _t_macroExpand,           \"macroExpand\")              \\\n+    f(     _t_barrierExpand,         \"barrierExpand\")            \\\n+    f(     _t_graphReshaping,        \"graphReshape\")             \\\n+    f(   _t_matcher,                 \"matcher\")                  \\\n+    f(     _t_postselect_cleanup,    \"postselect_cleanup\")       \\\n+    f(   _t_scheduler,               \"scheduler\")                \\\n+    f(   _t_registerAllocation,      \"regalloc\")                 \\\n+    f(     _t_ctorChaitin,           \"ctorChaitin\")              \\\n+    f(     _t_buildIFGvirtual,       \"buildIFG_virt\")            \\\n+    f(     _t_buildIFGphysical,      \"buildIFG\")                 \\\n+    f(     _t_computeLive,           \"computeLive\")              \\\n+    f(     _t_regAllocSplit,         \"regAllocSplit\")            \\\n+    f(     _t_postAllocCopyRemoval,  \"postAllocCopyRemoval\")     \\\n+    f(     _t_mergeMultidefs,        \"mergeMultidefs\")           \\\n+    f(     _t_fixupSpills,           \"fixupSpills\")              \\\n+    f(     _t_chaitinCompact,        \"chaitinCompact\")           \\\n+    f(     _t_chaitinCoalesce1,      \"chaitinCoalesce1\")         \\\n+    f(     _t_chaitinCoalesce2,      \"chaitinCoalesce2\")         \\\n+    f(     _t_chaitinCoalesce3,      \"chaitinCoalesce3\")         \\\n+    f(     _t_chaitinCacheLRG,       \"chaitinCacheLRG\")          \\\n+    f(     _t_chaitinSimplify,       \"chaitinSimplify\")          \\\n+    f(     _t_chaitinSelect,         \"chaitinSelect\")            \\\n+    f(   _t_blockOrdering,           \"blockOrdering\")            \\\n+    f(   _t_peephole,                \"peephole\")                 \\\n+    f(   _t_postalloc_expand,        \"postalloc_expand\")         \\\n+    f(   _t_output,                  \"output\")                   \\\n+    f(     _t_instrSched,            \"isched\")                   \\\n+    f(     _t_shortenBranches,       \"shorten branches\")         \\\n+    f(     _t_buildOopMaps,          \"bldOopMaps\")               \\\n+    f(     _t_fillBuffer,            \"fill buffer\")              \\\n+    f(     _t_registerMethod,        \"install_code\")             \\\n+    f(   _t_temporaryTimer1,         \"tempTimer1\")               \\\n+    f(   _t_temporaryTimer2,         \"tempTimer2\")\n+\n@@ -68,54 +124,3 @@\n-    _t_parser,\n-    _t_optimizer,\n-      _t_escapeAnalysis,\n-        _t_connectionGraph,\n-        _t_macroEliminate,\n-      _t_iterGVN,\n-      _t_incrInline,\n-        _t_incrInline_ideal,\n-        _t_incrInline_igvn,\n-        _t_incrInline_pru,\n-        _t_incrInline_inline,\n-      _t_vector,\n-        _t_vector_elimination,\n-          _t_vector_igvn,\n-          _t_vector_pru,\n-      _t_renumberLive,\n-      _t_idealLoop,\n-        _t_autoVectorize,\n-      _t_idealLoopVerify,\n-      _t_ccp,\n-      _t_iterGVN2,\n-      _t_macroExpand,\n-      _t_barrierExpand,\n-      _t_graphReshaping,\n-    _t_matcher,\n-      _t_postselect_cleanup,\n-    _t_scheduler,\n-    _t_registerAllocation,\n-      _t_ctorChaitin,\n-      _t_buildIFGvirtual,\n-      _t_buildIFGphysical,\n-      _t_computeLive,\n-      _t_regAllocSplit,\n-      _t_postAllocCopyRemoval,\n-      _t_mergeMultidefs,\n-      _t_fixupSpills,\n-      _t_chaitinCompact,\n-      _t_chaitinCoalesce1,\n-      _t_chaitinCoalesce2,\n-      _t_chaitinCoalesce3,\n-      _t_chaitinCacheLRG,\n-      _t_chaitinSimplify,\n-      _t_chaitinSelect,\n-    _t_blockOrdering,\n-    _t_peephole,\n-    _t_postalloc_expand,\n-    _t_output,\n-      _t_instrSched,\n-      _t_shortenBranches,\n-      _t_buildOopMaps,\n-      _t_fillBuffer,\n-      _t_registerMethod,\n-    _t_temporaryTimer1,\n-    _t_temporaryTimer2,\n+#define DEFID(name, text) name,\n+    ALL_PHASE_TRACE_IDS(DEFID)\n+#undef DEFID\n@@ -125,0 +130,2 @@\n+  static const char* get_phase_trace_id_text(PhaseTraceId id);\n+\n","filename":"src\/hotspot\/share\/opto\/phase.hpp","additions":61,"deletions":54,"binary":false,"changes":115,"status":"modified"},{"patch":"@@ -404,1 +404,1 @@\n-  Compile::TracePhase tp(\"mergeMultidefs\", &timers[_t_mergeMultidefs]);\n+  Compile::TracePhase tp(_t_mergeMultidefs);\n@@ -504,1 +504,1 @@\n-  Compile::TracePhase tp(\"postAllocCopyRemoval\", &timers[_t_postAllocCopyRemoval]);\n+  Compile::TracePhase tp(_t_postAllocCopyRemoval);\n","filename":"src\/hotspot\/share\/opto\/postaloc.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -498,1 +498,1 @@\n-  Compile::TracePhase tp(\"regAllocSplit\", &timers[_t_regAllocSplit]);\n+  Compile::TracePhase tp(_t_regAllocSplit);\n","filename":"src\/hotspot\/share\/opto\/reg_split.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -45,1 +45,1 @@\n-  Compile::TracePhase tp(\"vector_elimination\", &timers[_t_vector_elimination]);\n+  Compile::TracePhase tp(_t_vector_elimination);\n@@ -69,1 +69,1 @@\n-    Compile::TracePhase tp(\"vector_pru\", &timers[_t_vector_pru]);\n+    Compile::TracePhase tp(_t_vector_pru);\n@@ -75,1 +75,1 @@\n-    Compile::TracePhase tp(\"incrementalInline_igvn\", &timers[_t_vector_igvn]);\n+    Compile::TracePhase tp(_t_vector_igvn);\n","filename":"src\/hotspot\/share\/opto\/vector.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -70,0 +70,2 @@\n+\n+  const char* title() const { return _title; }\n","filename":"src\/hotspot\/share\/runtime\/timerTrace.hpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"}]}