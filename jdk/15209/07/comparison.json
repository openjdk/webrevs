{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2020, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -58,0 +58,1 @@\n+import static java.net.StandardSocketOptions.SO_RCVBUF;\n@@ -66,2 +67,0 @@\n-    private final static int IPV4_SNDBUF = 65507;\n-    private final static int IPV6_SNDBUF = 65527;\n@@ -92,1 +91,1 @@\n-                    IPV4_SNDBUF,\n+                    IPSupport.getMaxUDPSendBufSizeIPv4(),\n@@ -97,1 +96,1 @@\n-                    IPV4_SNDBUF,\n+                    IPSupport.getMaxUDPSendBufSizeIPv4(),\n@@ -108,1 +107,1 @@\n-                    IPV6_SNDBUF,\n+                    IPSupport.getMaxUDPSendBufSizeIPv6(),\n@@ -113,1 +112,1 @@\n-                    IPV6_SNDBUF,\n+                    IPSupport.getMaxUDPSendBufSizeIPv6(),\n@@ -135,0 +134,4 @@\n+            assertTrue(receiver.getOption(SO_RCVBUF) >= capacity,\n+                       receiver.getOption(SO_RCVBUF) +\n+                       \" for UDP receive buffer too small to hold capacity \" +\n+                       capacity);\n","filename":"test\/jdk\/java\/nio\/channels\/DatagramChannel\/SendReceiveMaxSize.java","additions":10,"deletions":7,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,0 +26,2 @@\n+import jdk.test.lib.Platform;\n+\n@@ -51,0 +53,3 @@\n+    private static final int IPV4_SNDBUF = 65507;\n+    private static final int IPV6_SNDBUF = 65527;\n+    private static final int IPV6_SNDBUF_AIX = 65487;\n@@ -114,1 +119,0 @@\n-\n@@ -157,0 +161,17 @@\n+    \/**\n+     * Return current platform's maximum size for IPv4 UDP send buffer\n+     *\/\n+    public static final int getMaxUDPSendBufSizeIPv4() {\n+        return IPV4_SNDBUF;\n+    }\n+\n+    \/**\n+     * Return current platform's maximum size for IPv6 UDP send buffer\n+     *\/\n+    public static final int getMaxUDPSendBufSizeIPv6() {\n+        if (Platform.isAix()) {\n+            return IPV6_SNDBUF_AIX;\n+        } else {\n+            return IPV6_SNDBUF;\n+        }\n+    }\n","filename":"test\/lib\/jdk\/test\/lib\/net\/IPSupport.java","additions":23,"deletions":2,"binary":false,"changes":25,"status":"modified"}]}