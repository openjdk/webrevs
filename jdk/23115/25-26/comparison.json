{"files":[{"patch":"@@ -553,2 +553,0 @@\n-  jlong overhead = actualTotal - requestedTotal;\n-  double overheadPercentage = 100.0 * (double)overhead \/ (double)requestedTotal;\n@@ -556,0 +554,2 @@\n+  jlong overhead_malloc = actualTotal - requestedTotal - overhead_NMT;\n+  double overheadPercentage_malloc = 100.0 * (double)overhead_malloc \/ (double)requestedTotal;\n@@ -559,2 +559,2 @@\n-  double overheadPercentageNMT = 100.0 * (double)overhead_NMT \/ (double)requestedTotal;\n-  fprintf(stderr, \"malloc overhead=%'zu bytes [%2.2f%%], NMT headers overhead=%'zu bytes [%2.2f%%]\\n\", overhead, overheadPercentage, overhead_NMT, overheadPercentageNMT);\n+  double overheadPercentage_NMT = 100.0 * (double)overhead_NMT \/ (double)requestedTotal;\n+  fprintf(stderr, \"malloc overhead=%'zu bytes [%2.2f%%], NMT headers overhead=%'zu bytes [%2.2f%%]\\n\", overhead_malloc, overheadPercentage_malloc, overhead_NMT, overheadPercentage_NMT);\n@@ -563,1 +563,1 @@\n-  fprintf(stderr, \"%22s: %12s: %12s: %12s: %12s: %12s: %12s: %12s:\\n\", \"NMT type\", \"objects\", \"bytes\", \"time\", \"count%\", \"bytes%\", \"time%\", \"overhead\");\n+  fprintf(stderr, \"%22s: %12s: %12s: %12s: %12s: %12s: %12s: %12s:\\n\", \"NMT type\", \"objects\", \"bytes\", \"time\", \"count%\", \"bytes%\", \"time%\", \"overhead%\");\n@@ -585,1 +585,1 @@\n-      fprintf(stderr, \"          %.1f%%\", timePercentage);\n+      fprintf(stderr, \"         %.1f%%\", timePercentage);\n@@ -587,1 +587,1 @@\n-      fprintf(stderr, \"           %.1f%%\", timePercentage);\n+      fprintf(stderr, \"          %.1f%%\", timePercentage);\n@@ -589,1 +589,1 @@\n-    if (overhead > 10.0) {\n+    if (overhead > 100.0) {\n@@ -591,1 +591,1 @@\n-    } else {\n+    } else if (overhead > 10.0) {\n@@ -593,0 +593,2 @@\n+    } else {\n+      fprintf(stderr, \"          %.1f%%\", overhead);\n@@ -594,1 +596,0 @@\n-\n@@ -651,1 +652,1 @@\n-        entry.requested += MemTracker::overhead_per_malloc();\n+        \/\/entry.requested += MemTracker::overhead_per_malloc();\n","filename":"src\/hotspot\/share\/nmt\/memLogRecorder.cpp","additions":12,"deletions":11,"binary":false,"changes":23,"status":"modified"}]}