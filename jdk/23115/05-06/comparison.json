{"files":[{"patch":"@@ -393,1 +393,3 @@\n-\n+    jlong requestedByCategory[mt_number_of_tags] = {0};\n+    jlong allocatedByCategory[mt_number_of_tags] = {0};\n+    jlong nmtObjectsByCategory[mt_number_of_tags] = {0};\n@@ -397,1 +399,0 @@\n-    fprintf(stderr, \"benchmarking \\\"%s\\\"\\n\", benchmark_file_path);\n@@ -474,0 +475,6 @@\n+\n+        if (!IS_FREE(e)) {\n+          requestedByCategory[e->mem_tag] += requested;\n+          allocatedByCategory[e->mem_tag] += actual;\n+          nmtObjectsByCategory[e->mem_tag]++;\n+        }\n@@ -487,2 +494,10 @@\n-    fprintf(stderr, \"time:%'ld[ns] [samples:%'ld] memory overhead=%'zu bytes [%.2f%%] [requestedTotal=%'zu actualTotal=%'zu]\\n\", nanoseconds, count, overhead, overheadPercentage, requestedTotal, actualTotal);\n-\n+    fprintf(stderr, \"\\n\\n\\nSummary:\\n\\n\");\n+    fprintf(stderr, \"time:%'ld[ns] [samples:%'ld]\\n\", nanoseconds, count);\n+    fprintf(stderr, \"memory overhead=%'zu bytes [%.2f%%]\\n\", overhead, overheadPercentage);\n+    fprintf(stderr, \"requestedTotal=%'zu actualTotal=%'zu\\n\", requestedTotal, actualTotal);\n+    fprintf(stderr, \"\\n\");\n+    fprintf(stderr, \"%22s: %12s: %12s\\n\", \"NMT category\", \"allocations\", \"bytes\");\n+    fprintf(stderr, \"--------------------------------------------------\\n\");\n+    for (int i = 0; i < mt_number_of_tags; i++) {\n+      fprintf(stderr, \"%22s: %'12ld: %'12ld\\n\", NMTUtil::tag_to_name(NMTUtil::index_to_tag(i)), nmtObjectsByCategory[i], allocatedByCategory[i]);\n+    }\n","filename":"src\/hotspot\/share\/nmt\/memLogRecorder.cpp","additions":19,"deletions":4,"binary":false,"changes":23,"status":"modified"}]}