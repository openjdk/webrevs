{"files":[{"patch":"@@ -81,1 +81,1 @@\n-\/\/ For example, \"AddVBNode\" might have two versions:\n+\/\/ For example:\n@@ -92,1 +92,0 @@\n-\/\/------------------------------VectorNode-------------------------------------\n@@ -237,1 +236,0 @@\n-\/\/------------------------------AddVBNode--------------------------------------\n@@ -245,1 +243,0 @@\n-\/\/------------------------------AddVSNode--------------------------------------\n@@ -253,1 +250,0 @@\n-\/\/------------------------------AddVINode--------------------------------------\n@@ -261,1 +257,0 @@\n-\/\/------------------------------AddVLNode--------------------------------------\n@@ -269,1 +264,0 @@\n-\/\/------------------------------AddVHFNode--------------------------------------\n@@ -277,1 +271,0 @@\n-\/\/------------------------------AddVFNode--------------------------------------\n@@ -285,1 +278,0 @@\n-\/\/------------------------------AddVDNode--------------------------------------\n@@ -293,1 +285,0 @@\n-\/\/------------------------------ReductionNode------------------------------------\n@@ -355,1 +346,0 @@\n-\/\/------------------------------AddReductionVINode--------------------------------------\n@@ -363,1 +353,0 @@\n-\/\/------------------------------AddReductionVLNode--------------------------------------\n@@ -371,1 +360,0 @@\n-\/\/------------------------------AddReductionVFNode--------------------------------------\n@@ -398,1 +386,0 @@\n-\/\/------------------------------AddReductionVDNode--------------------------------------\n@@ -425,1 +412,0 @@\n-\/\/------------------------------SubVBNode--------------------------------------\n@@ -433,1 +419,0 @@\n-\/\/------------------------------SubVSNode--------------------------------------\n@@ -441,1 +426,0 @@\n-\/\/------------------------------SubVINode--------------------------------------\n@@ -449,1 +433,0 @@\n-\/\/------------------------------SubVLNode--------------------------------------\n@@ -457,1 +440,0 @@\n-\/\/------------------------------SaturatingAddVNode-----------------------------\n@@ -465,1 +447,0 @@\n-\/\/------------------------------SaturatingSubVNode-----------------------------\n@@ -473,1 +454,0 @@\n-\/\/------------------------------SubVHFNode--------------------------------------\n@@ -481,2 +461,0 @@\n-\n-\/\/------------------------------SubVFNode--------------------------------------\n@@ -490,1 +468,0 @@\n-\/\/------------------------------SubVDNode--------------------------------------\n@@ -498,1 +475,0 @@\n-\/\/------------------------------MulVBNode--------------------------------------\n@@ -506,1 +482,0 @@\n-\/\/------------------------------MulVSNode--------------------------------------\n@@ -514,1 +489,0 @@\n-\/\/------------------------------MulVINode--------------------------------------\n@@ -522,1 +496,0 @@\n-\/\/------------------------------MulVLNode--------------------------------------\n@@ -534,1 +507,0 @@\n-\/\/------------------------------MulVFNode--------------------------------------\n@@ -542,1 +514,0 @@\n-\/\/------------------------------MulVFNode--------------------------------------\n@@ -550,1 +521,0 @@\n-\/\/------------------------------MulVDNode--------------------------------------\n@@ -558,1 +528,0 @@\n-\/\/------------------------------MulAddVS2VINode--------------------------------\n@@ -566,1 +535,0 @@\n-\/\/------------------------------FmaVNode--------------------------------------\n@@ -576,1 +544,0 @@\n-\/\/------------------------------FmaVDNode--------------------------------------\n@@ -584,1 +551,0 @@\n-\/\/------------------------------FmaVFNode--------------------------------------\n@@ -592,1 +558,0 @@\n-\/\/------------------------------FmaVHFNode-------------------------------------\n@@ -600,1 +565,0 @@\n-\/\/------------------------------MulReductionVINode--------------------------------------\n@@ -608,1 +572,0 @@\n-\/\/------------------------------MulReductionVLNode--------------------------------------\n@@ -616,1 +579,0 @@\n-\/\/------------------------------MulReductionVFNode--------------------------------------\n@@ -642,1 +604,0 @@\n-\/\/------------------------------MulReductionVDNode--------------------------------------\n@@ -668,1 +629,0 @@\n-\/\/------------------------------DivVHFNode-------------------------------------\n@@ -676,1 +636,0 @@\n-\/\/------------------------------DivVFNode--------------------------------------\n@@ -684,1 +643,0 @@\n-\/\/------------------------------DivVDNode--------------------------------------\n@@ -692,1 +650,0 @@\n-\/\/------------------------------AbsVBNode--------------------------------------\n@@ -700,1 +657,0 @@\n-\/\/------------------------------AbsVSNode--------------------------------------\n@@ -708,1 +664,0 @@\n-\/\/------------------------------MinVNode--------------------------------------\n@@ -716,1 +671,0 @@\n-\/\/------------------------------MinVHFNode------------------------------------\n@@ -724,1 +678,0 @@\n-\/\/------------------------------MaxVHFNode------------------------------------\n@@ -732,0 +685,1 @@\n+\/\/ Vector Unsigned Min\n@@ -742,2 +696,0 @@\n-\n-\/\/------------------------------MaxVNode--------------------------------------\n@@ -751,0 +703,1 @@\n+\/\/ Vector Unsigned Max\n@@ -761,1 +714,0 @@\n-\/\/------------------------------AbsVINode--------------------------------------\n@@ -769,1 +721,0 @@\n-\/\/------------------------------AbsVLNode--------------------------------------\n@@ -777,1 +728,0 @@\n-\/\/------------------------------AbsVFNode--------------------------------------\n@@ -785,1 +735,0 @@\n-\/\/------------------------------AbsVDNode--------------------------------------\n@@ -793,1 +742,0 @@\n-\/\/------------------------------NegVNode---------------------------------------\n@@ -807,1 +755,0 @@\n-\/\/------------------------------NegVINode--------------------------------------\n@@ -815,1 +762,0 @@\n-\/\/------------------------------NegVLNode--------------------------------------\n@@ -823,1 +769,0 @@\n-\/\/------------------------------NegVFNode--------------------------------------\n@@ -831,1 +776,0 @@\n-\/\/------------------------------NegVDNode--------------------------------------\n@@ -839,1 +783,0 @@\n-\/\/------------------------------PopCountVINode---------------------------------\n@@ -847,1 +790,0 @@\n-\/\/------------------------------PopCountVLNode---------------------------------\n@@ -857,1 +799,0 @@\n-\/\/------------------------------SqrtVHFNode-------------------------------------\n@@ -865,1 +806,0 @@\n-\/\/------------------------------SqrtVFNode--------------------------------------\n@@ -872,1 +812,1 @@\n-\/\/------------------------------RoundDoubleVNode--------------------------------\n+\n@@ -880,1 +820,0 @@\n-\/\/------------------------------SqrtVDNode--------------------------------------\n@@ -888,2 +827,1 @@\n-\/\/------------------------------ShiftVNode-----------------------------------\n-\/\/ Class ShiftV functionality.  This covers the common behaviors for all kinds\n+\/\/ Class ShiftV functionality. This covers the common behaviors for all kinds\n@@ -909,1 +847,0 @@\n-\/\/------------------------------LShiftVBNode-----------------------------------\n@@ -918,1 +855,0 @@\n-\/\/------------------------------LShiftVSNode-----------------------------------\n@@ -927,1 +863,0 @@\n-\/\/------------------------------LShiftVINode-----------------------------------\n@@ -936,1 +871,0 @@\n-\/\/------------------------------LShiftVLNode-----------------------------------\n@@ -945,1 +879,0 @@\n-\/\/------------------------------RShiftVBNode-----------------------------------\n@@ -954,1 +887,0 @@\n-\/\/------------------------------RShiftVSNode-----------------------------------\n@@ -963,1 +895,0 @@\n-\/\/------------------------------RShiftVINode-----------------------------------\n@@ -972,1 +903,0 @@\n-\/\/------------------------------RShiftVLNode-----------------------------------\n@@ -981,1 +911,0 @@\n-\/\/------------------------------URShiftVBNode----------------------------------\n@@ -990,1 +919,0 @@\n-\/\/------------------------------URShiftVSNode----------------------------------\n@@ -999,1 +927,0 @@\n-\/\/------------------------------URShiftVINode----------------------------------\n@@ -1008,1 +935,0 @@\n-\/\/------------------------------URShiftVLNode----------------------------------\n@@ -1017,1 +943,0 @@\n-\/\/------------------------------LShiftCntVNode---------------------------------\n@@ -1025,1 +950,0 @@\n-\/\/------------------------------RShiftCntVNode---------------------------------\n@@ -1033,1 +957,0 @@\n-\/\/------------------------------AndVNode---------------------------------------\n@@ -1042,1 +965,0 @@\n-\/\/------------------------------AndReductionVNode--------------------------------------\n@@ -1050,2 +972,1 @@\n-\/\/------------------------------OrVNode---------------------------------------\n-\/\/ Vector or byte, short, int, long as a reduction\n+\/\/ Vector or integer\n@@ -1059,2 +980,1 @@\n-\/\/------------------------------OrReductionVNode--------------------------------------\n-\/\/ Vector xor byte, short, int, long as a reduction\n+\/\/ Vector or byte, short, int, long as a reduction\n@@ -1067,1 +987,0 @@\n-\/\/------------------------------XorVNode---------------------------------------\n@@ -1077,2 +996,1 @@\n-\/\/------------------------------XorReductionVNode--------------------------------------\n-\/\/ Vector and int, long as a reduction\n+\/\/ Vector xor byte, short, int, long as a reduction\n@@ -1085,1 +1003,0 @@\n-\/\/------------------------------MinReductionVNode--------------------------------------\n@@ -1093,2 +1010,1 @@\n-\/\/------------------------------MaxReductionVNode--------------------------------------\n-\/\/ Vector min byte, short, int, long, float, double as a reduction\n+\/\/ Vector max byte, short, int, long, float, double as a reduction\n@@ -1101,1 +1017,0 @@\n-\/\/------------------------------CompressVNode--------------------------------------\n@@ -1122,1 +1037,0 @@\n-\/\/------------------------------ExpandVNode--------------------------------------\n@@ -1135,1 +1049,0 @@\n-\/\/------------------------------LoadVectorNode---------------------------------\n@@ -1177,1 +1090,0 @@\n-\/\/------------------------------LoadVectorGatherNode------------------------------\n@@ -1200,1 +1112,0 @@\n-\/\/------------------------------StoreVectorNode--------------------------------\n@@ -1242,1 +1153,0 @@\n-\/\/------------------------------StoreVectorScatterNode------------------------------\n@@ -1244,1 +1154,0 @@\n-\n@@ -1262,1 +1171,0 @@\n-\/\/------------------------------StoreVectorMaskedNode--------------------------------\n@@ -1283,1 +1191,0 @@\n-\/\/------------------------------LoadVectorMaskedNode--------------------------------\n@@ -1307,1 +1214,0 @@\n-\/\/-------------------------------LoadVectorGatherMaskedNode---------------------------------\n@@ -1330,1 +1236,0 @@\n-\/\/------------------------------StoreVectorScatterMaskedNode--------------------------------\n@@ -1374,1 +1279,0 @@\n-\/\/------------------------------VectorCmpMaskedNode--------------------------------\n@@ -1387,1 +1291,0 @@\n-\/\/------------------------------VectorMaskGenNode----------------------------------\n@@ -1402,3 +1305,2 @@\n-\/\/------------------------------VectorMaskOpNode-----------------------------------\n-\/\/ Base class for certain vector mask operations. The supported input mask can be\n-\/\/ either \"BVectMask\" or \"PVectMask\" depending on the platform.\n+\/\/ Base class for certain vector mask operations. The supported input mask can\n+\/\/ be either \"BVectMask\" or \"PVectMask\" depending on the platform.\n@@ -1478,1 +1380,0 @@\n-\/\/-------------------------- Vector mask broadcast ------------------------------\n@@ -1480,2 +1381,2 @@\n-\/\/ to true if the input value is non-zero, or false if the input value is zero.\n-\/\/ This node is only used to generate a mask with \"PVectMask\" layout.\n+\/\/ to true if the input value is non-zero, or false if the input value is\n+\/\/ zero. This node is only used to generate a mask with \"PVectMask\" layout.\n@@ -1488,3 +1389,2 @@\n-\/\/--------------------------- Vector mask logical and ---------------------------\n-\/\/ Perform a bitwise AND operation between two vector masks. This node is only\n-\/\/ used for vector masks with \"PVectMask\" layout.\n+\/\/ Perform a bitwise AND operation between two vector masks. This node is\n+\/\/ only used for vector masks with \"PVectMask\" layout.\n@@ -1497,3 +1397,2 @@\n-\/\/--------------------------- Vector mask logical or ----------------------------\n-\/\/ Perform a bitwise OR operation between two vector masks. This node is only\n-\/\/ used for vector masks with \"PVectMask\" layout.\n+\/\/ Perform a bitwise OR operation between two vector masks. This node is\n+\/\/ only used for vector masks with \"PVectMask\" layout.\n@@ -1506,3 +1405,2 @@\n-\/\/--------------------------- Vector mask logical xor ---------------------------\n-\/\/ Perform a bitwise XOR operation between two vector masks. This node is only\n-\/\/ used for vector masks with \"PVectMask\" layout.\n+\/\/ Perform a bitwise XOR operation between two vector masks. This node is\n+\/\/ only used for vector masks with \"PVectMask\" layout.\n@@ -1515,2 +1413,1 @@\n-\/\/=========================Promote_Scalar_to_Vector============================\n-\n+\/\/ Replicate a scalar value to all lanes of a vector.\n@@ -1526,1 +1423,1 @@\n-\/\/======================Populate_Indices_into_a_Vector=========================\n+\/\/ Populate indices into a vector.\n@@ -1535,1 +1432,0 @@\n-\/\/------------------------------PackNode---------------------------------------\n@@ -1553,1 +1449,0 @@\n-\/\/------------------------------PackBNode--------------------------------------\n@@ -1561,1 +1456,0 @@\n-\/\/------------------------------PackSNode--------------------------------------\n@@ -1570,1 +1464,0 @@\n-\/\/------------------------------PackINode--------------------------------------\n@@ -1579,1 +1472,0 @@\n-\/\/------------------------------PackLNode--------------------------------------\n@@ -1588,1 +1480,0 @@\n-\/\/------------------------------Pack2LNode-------------------------------------\n@@ -1596,1 +1487,0 @@\n-\/\/------------------------------PackFNode--------------------------------------\n@@ -1605,1 +1495,0 @@\n-\/\/------------------------------PackDNode--------------------------------------\n@@ -1614,1 +1503,0 @@\n-\/\/------------------------------Pack2DNode-------------------------------------\n@@ -1622,1 +1510,4 @@\n-\n+\/\/ Load the IOTA constant vector containing sequential indices starting from 0\n+\/\/ and incrementing by 1 up to \"VLENGTH - 1\". So far, the first input is an int\n+\/\/ constant 0. For example, a 128-bit vector with int (32-bit) elements produces\n+\/\/ a vector like \"[0, 1, 2, 3]\".\n@@ -1631,2 +1522,1 @@\n-\/\/------------------------------ExtractNode------------------------------------\n-\/\/ Extract a scalar from a vector at position \"pos\"\n+\/\/ The base class for all extract nodes.\n@@ -1641,2 +1531,1 @@\n-\/\/------------------------------ExtractBNode-----------------------------------\n-\/\/ Extract a byte from a vector at position \"pos\"\n+\/\/ Extract a byte from a vector at position \"pos\".\n@@ -1651,2 +1540,1 @@\n-\/\/------------------------------ExtractUBNode----------------------------------\n-\/\/ Extract a boolean from a vector at position \"pos\"\n+\/\/ Extract a boolean from a vector at position \"pos\".\n@@ -1661,2 +1549,1 @@\n-\/\/------------------------------ExtractCNode-----------------------------------\n-\/\/ Extract a char from a vector at position \"pos\"\n+\/\/ Extract a char from a vector at position \"pos\".\n@@ -1671,2 +1558,1 @@\n-\/\/------------------------------ExtractSNode-----------------------------------\n-\/\/ Extract a short from a vector at position \"pos\"\n+\/\/ Extract a short from a vector at position \"pos\".\n@@ -1681,2 +1567,1 @@\n-\/\/------------------------------ExtractINode-----------------------------------\n-\/\/ Extract an int from a vector at position \"pos\"\n+\/\/ Extract an int from a vector at position \"pos\".\n@@ -1691,2 +1576,1 @@\n-\/\/------------------------------ExtractLNode-----------------------------------\n-\/\/ Extract a long from a vector at position \"pos\"\n+\/\/ Extract a long from a vector at position \"pos\".\n@@ -1701,2 +1585,1 @@\n-\/\/------------------------------ExtractFNode-----------------------------------\n-\/\/ Extract a float from a vector at position \"pos\"\n+\/\/ Extract a float from a vector at position \"pos\".\n@@ -1711,2 +1594,1 @@\n-\/\/------------------------------ExtractDNode-----------------------------------\n-\/\/ Extract a double from a vector at position \"pos\"\n+\/\/ Extract a double from a vector at position \"pos\".\n@@ -1721,1 +1603,0 @@\n-\/\/------------------------------MacroLogicVNode-------------------------------\n@@ -1740,1 +1621,0 @@\n-\/\/------------------------------VectorMaskCmpNode-------------------------------\n@@ -1787,1 +1667,0 @@\n-\/\/------------------------------VectorTestNode-------------------------------\n@@ -1812,1 +1691,0 @@\n-\/\/------------------------------VectorBlendNode-------------------------------\n@@ -1829,0 +1707,4 @@\n+\/\/ Rearrange lane elements from a source vector under the control of a shuffle\n+\/\/ (indexes) vector. Each lane in the shuffle vector specifies which lane from\n+\/\/ the source vector to select for the corresponding output lane. All indexes\n+\/\/ are in the range [0, VLENGTH).\n@@ -1840,2 +1722,6 @@\n-\/\/ Select elements from two source vectors based on the wrapped indexes held in\n-\/\/ the first vector.\n+\/\/ Select lane elements from two source vectors (\"src1\" and \"src2\") under the\n+\/\/ control of an \"indexes\" vector. The two source vectors are logically concatenated\n+\/\/ to form a table of 2*VLENGTH elements, where src1 occupies indices [0, VLENGTH)\n+\/\/ and src2 occupies indices [VLENGTH, 2*VLENGTH). Each lane in the \"indexes\"\n+\/\/ vector specifies which element from this table to select for the corresponding\n+\/\/ output lane.\n@@ -1853,10 +1739,13 @@\n-\/\/------------------------------VectorLoadShuffleNode------------------------------\n-\/\/ The target may not directly support the rearrange operation for an element type.\n-\/\/ In those cases, we can transform the rearrange into a different element type.\n-\/\/ For example, on x86 before AVX512, there is no rearrange instruction for short\n-\/\/ elements, what we will then do is to transform the shuffle vector into one that\n-\/\/ we can do byte rearrange such that it would provide the same result. This could\n-\/\/ have been done in VectorRearrangeNode during code emission but we eagerly expand\n-\/\/ this out because it is often the case that an index vector is reused in many\n-\/\/ rearrange operations. This allows the index preparation to be GVN-ed as well as\n-\/\/ hoisted out of loops, etc.\n+\/\/ Transform a shuffle vector when the target does not directly support rearrange\n+\/\/ operations for the original element type. In such cases, the rearrange can be\n+\/\/ transformed to use a different element type.\n+\/\/\n+\/\/ For example, on x86 before AVX512, there are no rearrange instructions for short\n+\/\/ elements. The shuffle vector is transformed into one suitable for byte rearrange\n+\/\/ that produces the same result. This could have been done in VectorRearrangeNode\n+\/\/ during code emission, but we eagerly expand it out because shuffle vectors are\n+\/\/ often reused in many rearrange operations. This allows the transformation to be\n+\/\/ GVN-ed and hoisted out of loops.\n+\/\/\n+\/\/ Input:  Original shuffle vector (indices for the desired element type)\n+\/\/ Output: Transformed shuffle vector (indices for the supported element type)\n@@ -1871,1 +1760,0 @@\n-\/\/------------------------------VectorLoadMaskNode---------------------------------\n@@ -1885,1 +1773,0 @@\n-\/\/------------------------------VectorStoreMaskNode--------------------------------\n@@ -1899,1 +1786,0 @@\n-\/\/------------------------------VectorMaskCastNode----------------------------------\n@@ -1938,0 +1824,2 @@\n+\/\/ Lane-wise type cast a vector to the given vector type. This is the base\n+\/\/ class for all vector type cast operations.\n@@ -1950,0 +1838,1 @@\n+\/\/ Cast a byte vector to the given vector type.\n@@ -1958,0 +1847,1 @@\n+\/\/ Cast a short vector to the given vector type.\n@@ -1966,0 +1856,1 @@\n+\/\/ Cast an int vector to the given vector type.\n@@ -1974,0 +1865,1 @@\n+\/\/ Cast a long vector to the given vector type.\n@@ -1982,0 +1874,1 @@\n+\/\/ Cast a float vector to the given vector type.\n@@ -1990,0 +1883,1 @@\n+\/\/ Cast a double vector to the given vector type.\n@@ -1998,0 +1892,1 @@\n+\/\/ Cast a half float vector to float vector type.\n@@ -2006,0 +1901,1 @@\n+\/\/ Cast a float vector to a half float vector type.\n@@ -2014,2 +1910,5 @@\n-\/\/ So far, VectorUCastNode can only be used in Vector API unsigned extensions\n-\/\/ between integral types. E.g., extending byte to float is not supported now.\n+\/\/ Unsigned vector cast operations can only be used in Vector API unsigned\n+\/\/ extensions between integral types so far. E.g., extending byte to float\n+\/\/ is not supported now.\n+\n+\/\/ Unsigned cast a byte vector to the given vector type.\n@@ -2027,0 +1926,1 @@\n+\/\/ Unsigned cast a short vector to the given vector type.\n@@ -2037,0 +1937,1 @@\n+\/\/ Unsigned cast an int vector to the given vector type.\n@@ -2046,0 +1947,1 @@\n+\/\/ Vector round float to nearest integer.\n@@ -2054,0 +1956,1 @@\n+\/\/ Vector round double to nearest integer.\n@@ -2062,0 +1965,1 @@\n+\/\/ Insert a new value into a vector lane at the specified position.\n@@ -2075,0 +1979,3 @@\n+\/\/ Box a vector value into a Vector API object (e.g., IntMaxVector).\n+\/\/ This is a macro node that gets expanded during vector optimization\n+\/\/ phase.\n@@ -2102,0 +2009,2 @@\n+\/\/ Allocate storage for boxing a vector value. This is used during vector\n+\/\/ box expansion.\n@@ -2116,0 +2025,3 @@\n+\/\/ Unbox a Vector API object (e.g., IntMaxVector) to extract the underlying\n+\/\/ vector value. This is a macro node expanded during vector optimization\n+\/\/ phase.\n@@ -2134,0 +2046,1 @@\n+\/\/ Lane-wise right rotation of the first input by the second input.\n@@ -2143,0 +2056,1 @@\n+\/\/ Lane-wise left rotation of the first input by the second input.\n@@ -2152,0 +2066,1 @@\n+\/\/ Count the number of leading zeros in each lane of the input.\n@@ -2163,0 +2078,1 @@\n+\/\/ Count the number of trailing zeros in each lane of the input.\n@@ -2174,0 +2090,1 @@\n+\/\/ Reverse the bits within each lane (e.g., 0b10110010 becomes 0b01001101).\n@@ -2183,0 +2100,1 @@\n+\/\/ Reverse the byte order within each lane (e.g., 0x12345678 becomes 0x78563412).\n@@ -2192,0 +2110,1 @@\n+\/\/ Vector signum float.\n@@ -2200,0 +2119,1 @@\n+\/\/ Vector signum double.\n@@ -2208,0 +2128,2 @@\n+\/\/ Compress (extract and pack) bits in each lane of the first input\n+\/\/ based on the mask input.\n@@ -2215,0 +2137,2 @@\n+\/\/ Expand (deposit) bits in each lane of the first input based on the\n+\/\/ mask input.\n","filename":"src\/hotspot\/share\/opto\/vectornode.hpp","additions":97,"deletions":173,"binary":false,"changes":270,"status":"modified"}]}