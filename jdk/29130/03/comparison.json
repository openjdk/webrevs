{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -330,0 +330,2 @@\n+  \/\/ Returns true if the platform efficiently implements the given masked vector\n+  \/\/ operation using predicate features, false otherwise.\n","filename":"src\/hotspot\/share\/opto\/matcher.hpp","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -846,1 +846,2 @@\n-    Flag_is_predicated_vector        = 1ULL << 14,\n+    Flag_is_predicated_vector        = 1ULL << 14, \/\/ Marked on a vector node that has an additional\n+                                                   \/\/ mask input controlling the lane operations.\n","filename":"src\/hotspot\/share\/opto\/node.hpp","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -2446,0 +2446,6 @@\n+\/\/ Create a vector mask type with the given element basic type and length.\n+\/\/ - Returns \"TypeVectMask\" (PVectMask) for platforms that support the predicate\n+\/\/   feature and it is implemented properly in the backend, allowing the mask to\n+\/\/   be stored in a predicate\/mask register.\n+\/\/ - Returns a normal vector type \"TypeVectA ~ TypeVectZ\" (NVectMask) otherwise,\n+\/\/   where the vector mask is stored in a vector register.\n","filename":"src\/hotspot\/share\/opto\/type.cpp","additions":7,"deletions":1,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -1015,1 +1015,1 @@\n-\/\/ Class of Vector Types\n+\/\/ Basic class of vector (mask) types.\n@@ -1055,0 +1055,10 @@\n+\/\/ TypeVect subclasses representing vectors or vector masks with \"BVectMask\" or \"NVectMask\"\n+\/\/ layout (see vectornode.hpp for detailed notes on vector mask representations), mapped\n+\/\/ to vector registers and distinguished by vector register size:\n+\/\/\n+\/\/ - TypeVectA: Scalable vector type (variable size, e.g., AArch64 SVE, RISC-V RVV)\n+\/\/ - TypeVectS: 32-bit vector type\n+\/\/ - TypeVectD: 64-bit vector type\n+\/\/ - TypeVectX: 128-bit vector type\n+\/\/ - TypeVectY: 256-bit vector type\n+\/\/ - TypeVectZ: 512-bit vector type\n@@ -1085,0 +1095,3 @@\n+\/\/ Class of TypeVectMask, representing vector masks with \"PVectMask\" layout (see\n+\/\/ vectornode.hpp for detailed notes on vector mask representations), mapped to\n+\/\/ dedicated hardware predicate\/mask registers.\n","filename":"src\/hotspot\/share\/opto\/type.hpp","additions":15,"deletions":2,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -36,1 +36,57 @@\n-\/\/------------------------------VectorNode-------------------------------------\n+\/\/=======================Notes-for-VectorMask-Representation=======================\n+\/\/\n+\/\/ There are three distinct representations for vector masks based on platform and\n+\/\/ use scenarios:\n+\/\/\n+\/\/ - BVectMask: Platform-independent mask stored in a vector register with 8-bit\n+\/\/   lanes containing 1\/0 values. The corresponding type is TypeVectA ~ TypeVectZ.\n+\/\/\n+\/\/ - NVectMask: Platform-specific mask stored in vector registers with N-bit lanes,\n+\/\/   where all bits in each lane are either set (true) or unset (false). Generated\n+\/\/   on architectures without predicate\/mask feature, such as AArch64 NEON, x86\n+\/\/   AVX2, etc. The corresponding type is TypeVectA ~ TypeVectZ.\n+\/\/\n+\/\/ - PVectMask: Platform-specific mask stored in predicate\/mask registers. Generated\n+\/\/   on architectures with predicate\/mask feature, such as AArch64 SVE, x86 AVX-512,\n+\/\/   and RISC-V Vector Extension (RVV). The corresponding type is TypeVectMask.\n+\/\/\n+\/\/ NVectMask and PVectMask encode element data type and vector length information.\n+\/\/ They are the primary mask representations used in most mask and masked vector\n+\/\/ operations. BVectMask primarily represents mask values loaded from or stored to\n+\/\/ Java boolean memory (mask backing storage). VectorLoadMask\/VectorStoreMask nodes\n+\/\/ are needed to transform it to\/from P\/NVectMask. It is also used in certain mask\n+\/\/ operations (e.g. VectorMaskOpNode).\n+\/\/\n+\/\/=========================Notes-for-Masked-Vector-Nodes===========================\n+\/\/\n+\/\/ Each lane-wise and cross-lane (reduction) ALU node supports both non-masked\n+\/\/ and masked operations.\n+\/\/\n+\/\/ Currently masked vector nodes are only used to implement the Vector API's masked\n+\/\/ operations (which might also be used for auto-vectorization in future), such as:\n+\/\/   Vector<E> lanewise(VectorOperators.Binary op, Vector<E> v, VectorMask<E> m)\n+\/\/\n+\/\/ They are generated during intrinsification for Vector API, only on architectures\n+\/\/ that support the relevant predicated instructions. The compiler uses\n+\/\/ \"Matcher::match_rule_supported_vector_masked()\" to check whether the current\n+\/\/ platform supports the predicated\/masked vector instructions for an operation. It\n+\/\/ generates the masked vector node for the operation if supported. Otherwise, it\n+\/\/ generates the unpredicated vector node and implements the masked operation with\n+\/\/ the help of a VectorBlendNode. Please see more details from API intrinsification\n+\/\/ in vectorIntrinsics.cpp.\n+\/\/\n+\/\/ To differentiate the masked and non-masked nodes, flag \"Flag_is_predicated_vector\"\n+\/\/ is set for the masked version. Meanwhile, there is an additional mask input for\n+\/\/ the masked nodes.\n+\/\/\n+\/\/ For example:\n+\/\/   - Non-masked version:\n+\/\/          in1  in2\n+\/\/           \\   \/\n+\/\/         AddVBNode\n+\/\/\n+\/\/   - Masked version (with \"Flag_is_predicated_vector\" being set):\n+\/\/       in1  in2  mask\n+\/\/         \\   |   \/\n+\/\/         AddVBNode\n+\n@@ -106,0 +162,2 @@\n+  \/\/ Returns true if the lower vlen bits (bits [0, vlen-1]) of the long value\n+  \/\/ are all 1s or all 0s, indicating a \"mask all\" or \"mask none\" pattern.\n@@ -179,1 +237,0 @@\n-\/\/------------------------------AddVBNode--------------------------------------\n@@ -187,1 +244,0 @@\n-\/\/------------------------------AddVSNode--------------------------------------\n@@ -195,1 +251,0 @@\n-\/\/------------------------------AddVINode--------------------------------------\n@@ -203,1 +258,0 @@\n-\/\/------------------------------AddVLNode--------------------------------------\n@@ -211,1 +265,0 @@\n-\/\/------------------------------AddVHFNode--------------------------------------\n@@ -219,1 +272,0 @@\n-\/\/------------------------------AddVFNode--------------------------------------\n@@ -227,1 +279,0 @@\n-\/\/------------------------------AddVDNode--------------------------------------\n@@ -235,1 +286,0 @@\n-\/\/------------------------------ReductionNode------------------------------------\n@@ -297,1 +347,0 @@\n-\/\/------------------------------AddReductionVINode--------------------------------------\n@@ -305,1 +354,0 @@\n-\/\/------------------------------AddReductionVLNode--------------------------------------\n@@ -313,1 +361,0 @@\n-\/\/------------------------------AddReductionVFNode--------------------------------------\n@@ -340,1 +387,0 @@\n-\/\/------------------------------AddReductionVDNode--------------------------------------\n@@ -367,1 +413,0 @@\n-\/\/------------------------------SubVBNode--------------------------------------\n@@ -375,1 +420,0 @@\n-\/\/------------------------------SubVSNode--------------------------------------\n@@ -383,1 +427,0 @@\n-\/\/------------------------------SubVINode--------------------------------------\n@@ -391,1 +434,0 @@\n-\/\/------------------------------SubVLNode--------------------------------------\n@@ -399,1 +441,0 @@\n-\/\/------------------------------SaturatingAddVNode-----------------------------\n@@ -407,1 +448,0 @@\n-\/\/------------------------------SaturatingSubVNode-----------------------------\n@@ -415,1 +455,0 @@\n-\/\/------------------------------SubVHFNode--------------------------------------\n@@ -423,2 +462,0 @@\n-\n-\/\/------------------------------SubVFNode--------------------------------------\n@@ -432,1 +469,0 @@\n-\/\/------------------------------SubVDNode--------------------------------------\n@@ -440,1 +476,0 @@\n-\/\/------------------------------MulVBNode--------------------------------------\n@@ -448,1 +483,0 @@\n-\/\/------------------------------MulVSNode--------------------------------------\n@@ -456,1 +490,0 @@\n-\/\/------------------------------MulVINode--------------------------------------\n@@ -464,1 +497,0 @@\n-\/\/------------------------------MulVLNode--------------------------------------\n@@ -476,1 +508,0 @@\n-\/\/------------------------------MulVFNode--------------------------------------\n@@ -484,1 +515,0 @@\n-\/\/------------------------------MulVFNode--------------------------------------\n@@ -492,1 +522,0 @@\n-\/\/------------------------------MulVDNode--------------------------------------\n@@ -500,1 +529,0 @@\n-\/\/------------------------------MulAddVS2VINode--------------------------------\n@@ -508,1 +536,0 @@\n-\/\/------------------------------FmaVNode--------------------------------------\n@@ -518,1 +545,0 @@\n-\/\/------------------------------FmaVDNode--------------------------------------\n@@ -526,1 +552,0 @@\n-\/\/------------------------------FmaVFNode--------------------------------------\n@@ -534,1 +559,0 @@\n-\/\/------------------------------FmaVHFNode-------------------------------------\n@@ -542,1 +566,0 @@\n-\/\/------------------------------MulReductionVINode--------------------------------------\n@@ -550,1 +573,0 @@\n-\/\/------------------------------MulReductionVLNode--------------------------------------\n@@ -558,1 +580,0 @@\n-\/\/------------------------------MulReductionVFNode--------------------------------------\n@@ -584,1 +605,0 @@\n-\/\/------------------------------MulReductionVDNode--------------------------------------\n@@ -610,1 +630,0 @@\n-\/\/------------------------------DivVHFNode-------------------------------------\n@@ -618,1 +637,0 @@\n-\/\/------------------------------DivVFNode--------------------------------------\n@@ -626,1 +644,0 @@\n-\/\/------------------------------DivVDNode--------------------------------------\n@@ -634,1 +651,0 @@\n-\/\/------------------------------AbsVBNode--------------------------------------\n@@ -642,1 +658,0 @@\n-\/\/------------------------------AbsVSNode--------------------------------------\n@@ -650,1 +665,0 @@\n-\/\/------------------------------MinVNode--------------------------------------\n@@ -658,1 +672,0 @@\n-\/\/------------------------------MinVHFNode------------------------------------\n@@ -666,1 +679,0 @@\n-\/\/------------------------------MaxVHFNode------------------------------------\n@@ -674,0 +686,1 @@\n+\/\/ Vector Unsigned Min\n@@ -684,2 +697,0 @@\n-\n-\/\/------------------------------MaxVNode--------------------------------------\n@@ -693,0 +704,1 @@\n+\/\/ Vector Unsigned Max\n@@ -703,1 +715,0 @@\n-\/\/------------------------------AbsVINode--------------------------------------\n@@ -711,1 +722,0 @@\n-\/\/------------------------------AbsVLNode--------------------------------------\n@@ -719,1 +729,0 @@\n-\/\/------------------------------AbsVFNode--------------------------------------\n@@ -727,1 +736,0 @@\n-\/\/------------------------------AbsVDNode--------------------------------------\n@@ -735,1 +743,0 @@\n-\/\/------------------------------NegVNode---------------------------------------\n@@ -749,1 +756,0 @@\n-\/\/------------------------------NegVINode--------------------------------------\n@@ -757,1 +763,0 @@\n-\/\/------------------------------NegVLNode--------------------------------------\n@@ -765,1 +770,0 @@\n-\/\/------------------------------NegVFNode--------------------------------------\n@@ -773,1 +777,0 @@\n-\/\/------------------------------NegVDNode--------------------------------------\n@@ -781,1 +784,0 @@\n-\/\/------------------------------PopCountVINode---------------------------------\n@@ -789,1 +791,0 @@\n-\/\/------------------------------PopCountVLNode---------------------------------\n@@ -799,1 +800,0 @@\n-\/\/------------------------------SqrtVHFNode-------------------------------------\n@@ -807,1 +807,0 @@\n-\/\/------------------------------SqrtVFNode--------------------------------------\n@@ -814,1 +813,1 @@\n-\/\/------------------------------RoundDoubleVNode--------------------------------\n+\n@@ -822,1 +821,0 @@\n-\/\/------------------------------SqrtVDNode--------------------------------------\n@@ -830,2 +828,1 @@\n-\/\/------------------------------ShiftVNode-----------------------------------\n-\/\/ Class ShiftV functionality.  This covers the common behaviors for all kinds\n+\/\/ Class ShiftV functionality. This covers the common behaviors for all kinds\n@@ -851,1 +848,0 @@\n-\/\/------------------------------LShiftVBNode-----------------------------------\n@@ -860,1 +856,0 @@\n-\/\/------------------------------LShiftVSNode-----------------------------------\n@@ -869,1 +864,0 @@\n-\/\/------------------------------LShiftVINode-----------------------------------\n@@ -878,1 +872,0 @@\n-\/\/------------------------------LShiftVLNode-----------------------------------\n@@ -887,1 +880,0 @@\n-\/\/------------------------------RShiftVBNode-----------------------------------\n@@ -896,1 +888,0 @@\n-\/\/------------------------------RShiftVSNode-----------------------------------\n@@ -905,1 +896,0 @@\n-\/\/------------------------------RShiftVINode-----------------------------------\n@@ -914,1 +904,0 @@\n-\/\/------------------------------RShiftVLNode-----------------------------------\n@@ -923,1 +912,0 @@\n-\/\/------------------------------URShiftVBNode----------------------------------\n@@ -932,1 +920,0 @@\n-\/\/------------------------------URShiftVSNode----------------------------------\n@@ -941,1 +928,0 @@\n-\/\/------------------------------URShiftVINode----------------------------------\n@@ -950,1 +936,0 @@\n-\/\/------------------------------URShiftVLNode----------------------------------\n@@ -959,1 +944,0 @@\n-\/\/------------------------------LShiftCntVNode---------------------------------\n@@ -967,1 +951,0 @@\n-\/\/------------------------------RShiftCntVNode---------------------------------\n@@ -975,1 +958,0 @@\n-\/\/------------------------------AndVNode---------------------------------------\n@@ -984,1 +966,0 @@\n-\/\/------------------------------AndReductionVNode--------------------------------------\n@@ -992,2 +973,1 @@\n-\/\/------------------------------OrVNode---------------------------------------\n-\/\/ Vector or byte, short, int, long as a reduction\n+\/\/ Vector or integer\n@@ -1001,2 +981,1 @@\n-\/\/------------------------------OrReductionVNode--------------------------------------\n-\/\/ Vector xor byte, short, int, long as a reduction\n+\/\/ Vector or byte, short, int, long as a reduction\n@@ -1009,1 +988,0 @@\n-\/\/------------------------------XorVNode---------------------------------------\n@@ -1019,2 +997,1 @@\n-\/\/------------------------------XorReductionVNode--------------------------------------\n-\/\/ Vector and int, long as a reduction\n+\/\/ Vector xor byte, short, int, long as a reduction\n@@ -1027,1 +1004,0 @@\n-\/\/------------------------------MinReductionVNode--------------------------------------\n@@ -1035,2 +1011,1 @@\n-\/\/------------------------------MaxReductionVNode--------------------------------------\n-\/\/ Vector min byte, short, int, long, float, double as a reduction\n+\/\/ Vector max byte, short, int, long, float, double as a reduction\n@@ -1043,1 +1018,0 @@\n-\/\/------------------------------CompressVNode--------------------------------------\n@@ -1054,0 +1028,1 @@\n+\/\/ Vector mask compress\n@@ -1063,1 +1038,0 @@\n-\/\/------------------------------ExpandVNode--------------------------------------\n@@ -1076,1 +1050,0 @@\n-\/\/------------------------------LoadVectorNode---------------------------------\n@@ -1118,1 +1091,0 @@\n-\/\/------------------------------LoadVectorGatherNode------------------------------\n@@ -1141,1 +1113,0 @@\n-\/\/------------------------------StoreVectorNode--------------------------------\n@@ -1183,1 +1154,0 @@\n-\/\/------------------------------StoreVectorScatterNode------------------------------\n@@ -1185,1 +1155,0 @@\n-\n@@ -1203,1 +1172,0 @@\n-\/\/------------------------------StoreVectorMaskedNode--------------------------------\n@@ -1224,1 +1192,0 @@\n-\/\/------------------------------LoadVectorMaskedNode--------------------------------\n@@ -1248,1 +1215,0 @@\n-\/\/-------------------------------LoadVectorGatherMaskedNode---------------------------------\n@@ -1271,1 +1237,0 @@\n-\/\/------------------------------StoreVectorScatterMaskedNode--------------------------------\n@@ -1315,1 +1280,0 @@\n-\/\/------------------------------VectorCmpMaskedNode--------------------------------\n@@ -1328,1 +1292,2 @@\n-\/\/------------------------------VectorMaskGenNode----------------------------------\n+\/\/ Generate a vector mask based on the given length. Lanes with indices in\n+\/\/ [0, length) are set to true, while the remaining lanes are set to false.\n@@ -1341,1 +1306,2 @@\n-\/\/------------------------------VectorMaskOpNode-----------------------------------\n+\/\/ Base class for certain vector mask operations. The supported input mask can\n+\/\/ be either \"BVectMask\" or \"PVectMask\" depending on the platform.\n@@ -1362,0 +1328,1 @@\n+\/\/ Count the number of true (set) lanes in the vector mask.\n@@ -1369,0 +1336,2 @@\n+\/\/ Returns the index of the first true (set) lane in the vector mask.\n+\/\/ If no lanes are set, returns the vector length.\n@@ -1376,0 +1345,2 @@\n+\/\/ Returns the index of the last true (set) lane in the vector mask.\n+\/\/ If no lanes are set, returns -1 .\n@@ -1383,0 +1354,4 @@\n+\/\/ Pack the mask lane values into a long value, supporting at most the\n+\/\/ first 64 lanes. Each mask lane is packed into one bit in the long\n+\/\/ value, ordered from the least significant bit to the most significant\n+\/\/ bit.\n@@ -1394,0 +1369,3 @@\n+\/\/ Unpack bits from a long value into vector mask lane values. Each bit\n+\/\/ in the long value is unpacked into one mask lane, ordered from the\n+\/\/ least significant bit to the sign bit.\n@@ -1403,1 +1381,3 @@\n-\/\/-------------------------- Vector mask broadcast -----------------------------------\n+\/\/ Broadcast a scalar value to all lanes of a vector mask. All lanes are set\n+\/\/ to true if the input value is non-zero, or false if the input value is\n+\/\/ zero. This node is only used to generate a mask with \"PVectMask\" layout.\n@@ -1410,1 +1390,2 @@\n-\/\/--------------------------- Vector mask logical and --------------------------------\n+\/\/ Perform a bitwise AND operation between two vector masks. This node is\n+\/\/ only used for vector masks with \"PVectMask\" layout.\n@@ -1417,1 +1398,2 @@\n-\/\/--------------------------- Vector mask logical or ---------------------------------\n+\/\/ Perform a bitwise OR operation between two vector masks. This node is\n+\/\/ only used for vector masks with \"PVectMask\" layout.\n@@ -1424,1 +1406,2 @@\n-\/\/--------------------------- Vector mask logical xor --------------------------------\n+\/\/ Perform a bitwise XOR operation between two vector masks. This node is\n+\/\/ only used for vector masks with \"PVectMask\" layout.\n@@ -1431,2 +1414,1 @@\n-\/\/=========================Promote_Scalar_to_Vector============================\n-\n+\/\/ Replicate a scalar value to all lanes of a vector.\n@@ -1442,1 +1424,1 @@\n-\/\/======================Populate_Indices_into_a_Vector=========================\n+\/\/ Populate indices into a vector.\n@@ -1451,1 +1433,0 @@\n-\/\/------------------------------PackNode---------------------------------------\n@@ -1469,1 +1450,0 @@\n-\/\/------------------------------PackBNode--------------------------------------\n@@ -1477,1 +1457,0 @@\n-\/\/------------------------------PackSNode--------------------------------------\n@@ -1486,1 +1465,0 @@\n-\/\/------------------------------PackINode--------------------------------------\n@@ -1495,1 +1473,0 @@\n-\/\/------------------------------PackLNode--------------------------------------\n@@ -1504,1 +1481,0 @@\n-\/\/------------------------------Pack2LNode-------------------------------------\n@@ -1512,1 +1488,0 @@\n-\/\/------------------------------PackFNode--------------------------------------\n@@ -1521,1 +1496,0 @@\n-\/\/------------------------------PackDNode--------------------------------------\n@@ -1530,1 +1504,0 @@\n-\/\/------------------------------Pack2DNode-------------------------------------\n@@ -1538,1 +1511,4 @@\n-\n+\/\/ Load the IOTA constant vector containing sequential indices starting from 0\n+\/\/ and incrementing by 1 up to \"VLENGTH - 1\". So far, the first input is an int\n+\/\/ constant 0. For example, a 128-bit vector with int (32-bit) elements produces\n+\/\/ a vector like \"[0, 1, 2, 3]\".\n@@ -1547,2 +1523,1 @@\n-\/\/------------------------------ExtractNode------------------------------------\n-\/\/ Extract a scalar from a vector at position \"pos\"\n+\/\/ The base class for all extract nodes.\n@@ -1557,2 +1532,1 @@\n-\/\/------------------------------ExtractBNode-----------------------------------\n-\/\/ Extract a byte from a vector at position \"pos\"\n+\/\/ Extract a byte from a vector at position \"pos\".\n@@ -1567,2 +1541,1 @@\n-\/\/------------------------------ExtractUBNode----------------------------------\n-\/\/ Extract a boolean from a vector at position \"pos\"\n+\/\/ Extract a boolean from a vector at position \"pos\".\n@@ -1577,2 +1550,1 @@\n-\/\/------------------------------ExtractCNode-----------------------------------\n-\/\/ Extract a char from a vector at position \"pos\"\n+\/\/ Extract a char from a vector at position \"pos\".\n@@ -1587,2 +1559,1 @@\n-\/\/------------------------------ExtractSNode-----------------------------------\n-\/\/ Extract a short from a vector at position \"pos\"\n+\/\/ Extract a short from a vector at position \"pos\".\n@@ -1597,2 +1568,1 @@\n-\/\/------------------------------ExtractINode-----------------------------------\n-\/\/ Extract an int from a vector at position \"pos\"\n+\/\/ Extract an int from a vector at position \"pos\".\n@@ -1607,2 +1577,1 @@\n-\/\/------------------------------ExtractLNode-----------------------------------\n-\/\/ Extract a long from a vector at position \"pos\"\n+\/\/ Extract a long from a vector at position \"pos\".\n@@ -1617,2 +1586,1 @@\n-\/\/------------------------------ExtractFNode-----------------------------------\n-\/\/ Extract a float from a vector at position \"pos\"\n+\/\/ Extract a float from a vector at position \"pos\".\n@@ -1627,2 +1595,1 @@\n-\/\/------------------------------ExtractDNode-----------------------------------\n-\/\/ Extract a double from a vector at position \"pos\"\n+\/\/ Extract a double from a vector at position \"pos\".\n@@ -1637,1 +1604,0 @@\n-\/\/------------------------------MacroLogicVNode-------------------------------\n@@ -1656,0 +1622,2 @@\n+\/\/ Compare two vectors lane-wise using the specified predicate and produce a\n+\/\/ vector mask.\n@@ -1700,0 +1668,2 @@\n+\/\/ Test whether all or any lanes in the first input vector mask is true,\n+\/\/ based on the specified predicate.\n@@ -1722,0 +1692,3 @@\n+\/\/ Blend two vectors based on a vector mask. For each lane, select the value\n+\/\/ from the first input vector (vec1) if the corresponding mask lane is set,\n+\/\/ otherwise select from the second input vector (vec2).\n@@ -1735,0 +1708,4 @@\n+\/\/ Rearrange lane elements from a source vector under the control of a shuffle\n+\/\/ (indexes) vector. Each lane in the shuffle vector specifies which lane from\n+\/\/ the source vector to select for the corresponding output lane. All indexes\n+\/\/ are in the range [0, VLENGTH).\n@@ -1739,1 +1716,0 @@\n-    \/\/ assert(mask->is_VectorMask(), \"VectorBlendNode requires that third argument be a mask\");\n@@ -1747,3 +1723,6 @@\n-\n-\/\/ Select elements from two source vectors based on the wrapped indexes held in\n-\/\/ the first vector.\n+\/\/ Select lane elements from two source vectors (\"src1\" and \"src2\") under the\n+\/\/ control of an \"indexes\" vector. The two source vectors are logically concatenated\n+\/\/ to form a table of 2*VLENGTH elements, where src1 occupies indices [0, VLENGTH)\n+\/\/ and src2 occupies indices [VLENGTH, 2*VLENGTH). Each lane in the \"indexes\"\n+\/\/ vector specifies which element from this table to select for the corresponding\n+\/\/ output lane.\n@@ -1761,7 +1740,13 @@\n-\/\/ The target may not directly support the rearrange operation for an element type. In those cases,\n-\/\/ we can transform the rearrange into a different element type. For example, on x86 before AVX512,\n-\/\/ there is no rearrange instruction for short elements, what we will then do is to transform the\n-\/\/ shuffle vector into one that we can do byte rearrange such that it would provide the same\n-\/\/ result. This could have been done in VectorRearrangeNode during code emission but we eagerly\n-\/\/ expand this out because it is often the case that an index vector is reused in many rearrange\n-\/\/ operations. This allows the index preparation to be GVN-ed as well as hoisted out of loops, etc.\n+\/\/ Transform a shuffle vector when the target does not directly support rearrange\n+\/\/ operations for the original element type. In such cases, the rearrange can be\n+\/\/ transformed to use a different element type.\n+\/\/\n+\/\/ For example, on x86 before AVX512, there are no rearrange instructions for short\n+\/\/ elements. The shuffle vector is transformed into one suitable for byte rearrange\n+\/\/ that produces the same result. This could have been done in VectorRearrangeNode\n+\/\/ during code emission, but we eagerly expand it out because shuffle vectors are\n+\/\/ often reused in many rearrange operations. This allows the transformation to be\n+\/\/ GVN-ed and hoisted out of loops.\n+\/\/\n+\/\/ Input:  Original shuffle vector (indices for the desired element type)\n+\/\/ Output: Transformed shuffle vector (indices for the supported element type)\n@@ -1776,0 +1761,2 @@\n+\/\/ Convert a \"BVectMask\" into a platform-specific vector mask (either \"NVectMask\"\n+\/\/ or \"PVectMask\").\n@@ -1787,0 +1774,2 @@\n+\/\/ Convert a platform-specific vector mask (either \"NVectMask\" or \"PVectMask\")\n+\/\/ into a \"BVectMask\".\n@@ -1798,0 +1787,2 @@\n+\/\/ Lane-wise type cast a vector mask to the given vector type. The vector length\n+\/\/ of the input and output must be the same.\n@@ -1834,0 +1825,2 @@\n+\/\/ Lane-wise type cast a vector to the given vector type. This is the base\n+\/\/ class for all vector type cast operations.\n@@ -1846,0 +1839,1 @@\n+\/\/ Cast a byte vector to the given vector type.\n@@ -1854,0 +1848,1 @@\n+\/\/ Cast a short vector to the given vector type.\n@@ -1862,0 +1857,1 @@\n+\/\/ Cast an int vector to the given vector type.\n@@ -1870,0 +1866,1 @@\n+\/\/ Cast a long vector to the given vector type.\n@@ -1878,0 +1875,1 @@\n+\/\/ Cast a float vector to the given vector type.\n@@ -1886,0 +1884,1 @@\n+\/\/ Cast a double vector to the given vector type.\n@@ -1894,0 +1893,1 @@\n+\/\/ Cast a half float vector to float vector type.\n@@ -1902,0 +1902,1 @@\n+\/\/ Cast a float vector to a half float vector type.\n@@ -1910,2 +1911,6 @@\n-\/\/ So far, VectorUCastNode can only be used in Vector API unsigned extensions\n-\/\/ between integral types. E.g., extending byte to float is not supported now.\n+\/\/ Unsigned vector cast operations can only be used in unsigned (zero)\n+\/\/ extensions between integral types so far. E.g., extending byte to\n+\/\/ float is not supported now.\n+\n+\/\/ Unsigned cast a byte vector to the given vector type with short, int,\n+\/\/ or long element type.\n@@ -1923,0 +1928,2 @@\n+\/\/ Unsigned cast a short vector to the given vector type with int or long\n+\/\/ element type.\n@@ -1933,0 +1940,1 @@\n+\/\/ Unsigned cast an int vector to the given vector type with long element type.\n@@ -1942,0 +1950,1 @@\n+\/\/ Vector round float to nearest integer.\n@@ -1950,0 +1959,1 @@\n+\/\/ Vector round double to nearest integer.\n@@ -1958,0 +1968,1 @@\n+\/\/ Insert a new value into a vector lane at the specified position.\n@@ -1971,0 +1982,3 @@\n+\/\/ Box a vector value into a Vector API object (e.g., IntMaxVector).\n+\/\/ This is a macro node that gets expanded during vector optimization\n+\/\/ phase.\n@@ -1998,0 +2012,2 @@\n+\/\/ Allocate storage for boxing a vector value. This is used during vector\n+\/\/ box expansion.\n@@ -2012,0 +2028,3 @@\n+\/\/ Unbox a Vector API object (e.g., IntMaxVector) to extract the underlying\n+\/\/ vector value. This is a macro node expanded during vector optimization\n+\/\/ phase.\n@@ -2030,0 +2049,1 @@\n+\/\/ Lane-wise right rotation of the first input by the second input.\n@@ -2039,0 +2059,1 @@\n+\/\/ Lane-wise left rotation of the first input by the second input.\n@@ -2048,0 +2069,1 @@\n+\/\/ Count the number of leading zeros in each lane of the input.\n@@ -2059,0 +2081,1 @@\n+\/\/ Count the number of trailing zeros in each lane of the input.\n@@ -2070,0 +2093,1 @@\n+\/\/ Reverse the bits within each lane (e.g., 0b10110010 becomes 0b01001101).\n@@ -2079,0 +2103,1 @@\n+\/\/ Reverse the byte order within each lane (e.g., 0x12345678 becomes 0x78563412).\n@@ -2088,0 +2113,1 @@\n+\/\/ Vector signum float.\n@@ -2096,0 +2122,1 @@\n+\/\/ Vector signum double.\n@@ -2104,0 +2131,2 @@\n+\/\/ Compress (extract and pack) bits in each lane of the first input\n+\/\/ based on the mask input.\n@@ -2111,0 +2140,2 @@\n+\/\/ Expand (deposit) bits in each lane of the first input based on the\n+\/\/ mask input.\n","filename":"src\/hotspot\/share\/opto\/vectornode.hpp","additions":187,"deletions":156,"binary":false,"changes":343,"status":"modified"}]}