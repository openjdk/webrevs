{"files":[{"patch":"@@ -747,0 +747,1 @@\n+    TARGET := build-test-lib, \\\n@@ -750,0 +751,6 @@\n+$(eval $(call SetupTarget, test-image-lib, \\\n+    MAKEFILE := test\/BuildTestLib, \\\n+    TARGET := test-image-lib, \\\n+    DEPS := build-test-lib, \\\n+))\n+\n@@ -784,1 +791,1 @@\n-    DEPS := interim-langtools exploded-image, \\\n+    DEPS := interim-langtools exploded-image build-test-lib, \\\n@@ -1267,1 +1274,1 @@\n-    test-image-lib-native\n+    test-image-lib test-image-lib-native\n","filename":"make\/Main.gmk","additions":9,"deletions":2,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -56,1 +56,2 @@\n-JMH_COMPILE_JARS := $(JMH_CORE_JAR) $(JMH_GENERATOR_JAR)\n+WHITEBOX_JAR := $(SUPPORT_OUTPUTDIR)\/test\/lib\/wb.jar\n+JMH_COMPILE_JARS := $(JMH_CORE_JAR) $(JMH_GENERATOR_JAR) $(WHITEBOX_JAR)\n@@ -59,2 +60,0 @@\n-MICROBENCHMARK_CLASSPATH := $(call PathList, $(JMH_COMPILE_JARS))\n-\n@@ -95,2 +94,3 @@\n-    CLASSPATH := $(MICROBENCHMARK_CLASSPATH), \\\n-    DISABLED_WARNINGS := restricted this-escape processing rawtypes cast serial preview, \\\n+    CLASSPATH := $(JMH_COMPILE_JARS), \\\n+    DISABLED_WARNINGS := restricted this-escape processing rawtypes cast \\\n+        serial preview, \\\n@@ -99,2 +99,1 @@\n-    JAVAC_FLAGS := --add-exports java.base\/sun.security.util=ALL-UNNAMED \\\n-        --add-exports java.base\/sun.invoke.util=ALL-UNNAMED \\\n+    JAVAC_FLAGS := \\\n@@ -102,4 +101,0 @@\n-        --add-exports java.base\/jdk.internal.org.objectweb.asm=ALL-UNNAMED \\\n-        --add-exports java.base\/jdk.internal.org.objectweb.asm.tree=ALL-UNNAMED \\\n-        --add-exports java.base\/jdk.internal.vm=ALL-UNNAMED \\\n-        --add-exports java.base\/jdk.internal.misc=ALL-UNNAMED \\\n@@ -108,0 +103,6 @@\n+        --add-exports java.base\/jdk.internal.misc=ALL-UNNAMED \\\n+        --add-exports java.base\/jdk.internal.org.objectweb.asm.tree=ALL-UNNAMED \\\n+        --add-exports java.base\/jdk.internal.org.objectweb.asm=ALL-UNNAMED \\\n+        --add-exports java.base\/jdk.internal.vm=ALL-UNNAMED \\\n+        --add-exports java.base\/sun.invoke.util=ALL-UNNAMED \\\n+        --add-exports java.base\/sun.security.util=ALL-UNNAMED \\\n@@ -110,1 +111,1 @@\n-    JAVA_FLAGS := --add-modules jdk.unsupported --limit-modules java.management \\\n+    JAVA_FLAGS := \\\n@@ -112,1 +113,3 @@\n-        --enable-preview, \\\n+        --add-modules jdk.unsupported \\\n+        --enable-preview \\\n+        --limit-modules java.management, \\\n","filename":"make\/test\/BuildMicrobenchmark.gmk","additions":16,"deletions":13,"binary":false,"changes":29,"status":"modified"},{"patch":"@@ -26,0 +26,6 @@\n+################################################################################\n+# This file builds the Java components of testlib.\n+# It also covers the test-image part, where the built files are copied to the\n+# test image.\n+################################################################################\n+\n@@ -32,0 +38,4 @@\n+################################################################################\n+# Targets for building the test lib jars\n+################################################################################\n+\n@@ -66,1 +76,14 @@\n-##########################################################################################\n+build-test-lib: $(TARGETS)\n+\n+################################################################################\n+# Targets for building test-image.\n+################################################################################\n+\n+# Copy the jars to the test image.\n+$(eval $(call SetupCopyFiles, COPY_LIBTEST_JARS, \\\n+    DEST := $(TEST_IMAGE_DIR)\/lib-test, \\\n+    FILES := $(BUILD_WB_JAR_JAR) $(BUILD_TEST_LIB_JAR_JAR), \\\n+))\n+#\n+\n+test-image-lib: $(COPY_LIBTEST_JARS)\n@@ -68,1 +91,1 @@\n-all: $(TARGETS)\n+all: build-test-lib\n@@ -70,1 +93,1 @@\n-.PHONY: default all\n+.PHONY: default all build-test-lib test-image-lib\n","filename":"make\/test\/BuildTestLib.gmk","additions":26,"deletions":3,"binary":false,"changes":29,"status":"modified"}]}