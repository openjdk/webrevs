{"files":[{"patch":"@@ -38,0 +38,1 @@\n+import java.util.List;\n@@ -1163,1 +1164,1 @@\n-                         public void annoNoTag() { }\n+                         public void anno_noTag() { }\n@@ -1200,40 +1201,37 @@\n-        \/\/ the mismatch is detected and reported by javac Attr phase.\n-\n-        \/\/ in the following checks we check from the signature,\n-        \/\/ beginning at the name, through to the end of the main description.\n-\n-        checkOutput(\"p\/Control.html\", true,\n-                \"\"\"\n-                    <span class=\"element-name\">annoNoTag<\/span>()<\/div>\n-                    <div class=\"deprecation-block\"><span class=\"deprecated-label\">Deprecated.<\/span><\/div>\n-                    <div class=\"block\">First sentence. Second sentence.<\/div>\"\"\",\n-                \"\"\"\n-                    <span class=\"element-name\">noAnno_tag<\/span>()<\/div>\n-                    <div class=\"deprecation-block\"><span class=\"deprecated-label\">Deprecated.<\/span>\n-                    <div class=\"deprecation-comment\">deprecated-text<\/div>\n-                    <\/div>\n-                    <div class=\"block\">First sentence. Second sentence.<\/div>\"\"\",\n-                \"\"\"\n-                    <span class=\"element-name\">anno_tag<\/span>()<\/div>\n-                    <div class=\"deprecation-block\"><span class=\"deprecated-label\">Deprecated.<\/span>\n-                    <div class=\"deprecation-comment\">deprecated-text<\/div>\n-                    <\/div>\n-                    <div class=\"block\">First sentence. Second sentence.<\/div>\"\"\");\n-\n-        checkOutput(\"p\/MarkdownComments.html\", true,\n-                \"\"\"\n-                    <span class=\"element-name\">anno_noTag<\/span>()<\/div>\n-                    <div class=\"deprecation-block\"><span class=\"deprecated-label\">Deprecated.<\/span><\/div>\n-                    <div class=\"block\">First sentence. Second sentence.<\/div>\"\"\",\n-                \/\/ the following is the interesting case:\n-                \/\/ with no @Deprecated annotation, any @deprecated tag is discarded\n-                \"\"\"\n-                    <span class=\"element-name\">noAnno_tag<\/span>()<\/div>\n-                    <div class=\"block\">First sentence. Second sentence.<\/div>\"\"\",\n-                \"\"\"\n-                    <span class=\"element-name\">anno_tag<\/span>()<\/div>\n-                    <div class=\"deprecation-block\"><span class=\"deprecated-label\">Deprecated.<\/span>\n-                    <div class=\"deprecation-comment\">deprecated-text<\/div>\n-                    <\/div>\n-                    <div class=\"block\">First sentence. Second sentence.<\/div>\"\"\");\n-\n+        \/\/ the mismatch is detected and reported by javac Attr phase,\n+        \/\/ when enabled by -Xlint:dep-ann.\n+\n+        \/\/ the output for these two files should be the same, except where it is not\n+        for (var f : List.of(\"p\/Control.html\", \"p\/MarkdownComments.html\")) {\n+            \/\/ in the following checks we check from the signature,\n+            \/\/ beginning at the name, through to the end of the main description.\n+            checkOutput(f, true,\n+                    \"\"\"\n+                        <span class=\"element-name\">anno_noTag<\/span>()<\/div>\n+                        <div class=\"deprecation-block\"><span class=\"deprecated-label\">Deprecated.<\/span><\/div>\n+                        <div class=\"block\">First sentence. Second sentence.<\/div>\"\"\",\n+\n+                    switch (f) {\n+                        \/\/ @deprecated but no annotation in a traditional comment implies deprecation\n+                        case \"p\/Control.html\" -> \"\"\"\n+                            <span class=\"element-name\">noAnno_tag<\/span>()<\/div>\n+                            <div class=\"deprecation-block\"><span class=\"deprecated-label\">Deprecated.<\/span>\n+                            <div class=\"deprecation-comment\">deprecated-text<\/div>\n+                            <\/div>\n+                            <div class=\"block\">First sentence. Second sentence.<\/div>\"\"\";\n+\n+                        \/\/ @deprecated but no annotation in a Markdown comment does not imply deprecation\n+                        case \"p\/MarkdownComments.html\" -> \"\"\"\n+                            <span class=\"element-name\">noAnno_tag<\/span>()<\/div>\n+                            <div class=\"block\">First sentence. Second sentence.<\/div>\"\"\";\n+\n+                        default -> throw new Error();\n+                    },\n+\n+                    \"\"\"\n+                        <span class=\"element-name\">anno_tag<\/span>()<\/div>\n+                        <div class=\"deprecation-block\"><span class=\"deprecated-label\">Deprecated.<\/span>\n+                        <div class=\"deprecation-comment\">deprecated-text<\/div>\n+                        <\/div>\n+                        <div class=\"block\">First sentence. Second sentence.<\/div>\"\"\");\n+        }\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testMarkdown\/TestMarkdown.java","additions":39,"deletions":41,"binary":false,"changes":80,"status":"modified"}]}