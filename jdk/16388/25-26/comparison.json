{"files":[{"patch":"@@ -1044,1 +1044,1 @@\n-                                            \n+\n@@ -1048,1 +1048,1 @@\n-                                            \n+\n@@ -1052,1 +1052,1 @@\n-                                            \n+\n@@ -1056,1 +1056,1 @@\n-                                            \n+\n@@ -1127,2 +1127,0 @@\n-\n-\n@@ -1152,0 +1150,91 @@\n+\n+    @Test\n+    public void testDeprecated(Path base) throws Exception {\n+        Path src = base.resolve(\"src\");\n+\n+        tb.writeJavaFiles(src,\n+                \"\"\"\n+                    package p;\n+                    public class Control {\n+                        \/**\n+                         * First sentence. Second sentence.\n+                         *\/\n+                         @Deprecated\n+                         public void annoNoTag() { }\n+                        \/**\n+                         * First sentence. Second sentence.\n+                         * @deprecated deprecated-text\n+                         *\/\n+                         public void noAnno_tag() { }\n+                        \/**\n+                         * First sentence. Second sentence.\n+                         * @deprecated deprecated-text\n+                         *\/\n+                        @Deprecated\n+                        public void anno_tag() { }\n+                    }\"\"\",\n+                \"\"\"\n+                    package p;\n+                    public class MarkdownComments {\n+                        \/\/\/ First sentence. Second sentence.\n+                        @Deprecated\n+                        public void anno_noTag() { }\n+                        \/\/\/ First sentence. Second sentence.\n+                        \/\/\/ @deprecated deprecated-text.\n+                        public void noAnno_tag() { }\n+                        \/\/\/ First sentence. Second sentence.\n+                        \/\/\/ @deprecated deprecated-text\n+                        @Deprecated\n+                        public void anno_tag() { }\n+                    }\"\"\");\n+\n+        javadoc(\"-d\", base.resolve(\"api\").toString(),\n+                \"-Xdoclint:none\",\n+                \"--no-platform-links\",\n+                \"--source-path\", src.toString(),\n+                \"p\");\n+        checkExit(Exit.OK);\n+\n+        \/\/ Note: javadoc does not generate warnings about any mismatch\n+        \/\/ between @Deprecated annotations and @deprecated tags:\n+        \/\/ the mismatch is detected and reported by javac Attr phase.\n+\n+        \/\/ in the following checks we check from the signature,\n+        \/\/ beginning at the name, through to the end of the main description.\n+\n+        checkOutput(\"p\/Control.html\", true,\n+                \"\"\"\n+                    <span class=\"element-name\">annoNoTag<\/span>()<\/div>\n+                    <div class=\"deprecation-block\"><span class=\"deprecated-label\">Deprecated.<\/span><\/div>\n+                    <div class=\"block\">First sentence. Second sentence.<\/div>\"\"\",\n+                \"\"\"\n+                    <span class=\"element-name\">noAnno_tag<\/span>()<\/div>\n+                    <div class=\"deprecation-block\"><span class=\"deprecated-label\">Deprecated.<\/span>\n+                    <div class=\"deprecation-comment\">deprecated-text<\/div>\n+                    <\/div>\n+                    <div class=\"block\">First sentence. Second sentence.<\/div>\"\"\",\n+                \"\"\"\n+                    <span class=\"element-name\">anno_tag<\/span>()<\/div>\n+                    <div class=\"deprecation-block\"><span class=\"deprecated-label\">Deprecated.<\/span>\n+                    <div class=\"deprecation-comment\">deprecated-text<\/div>\n+                    <\/div>\n+                    <div class=\"block\">First sentence. Second sentence.<\/div>\"\"\");\n+\n+        checkOutput(\"p\/MarkdownComments.html\", true,\n+                \"\"\"\n+                    <span class=\"element-name\">anno_noTag<\/span>()<\/div>\n+                    <div class=\"deprecation-block\"><span class=\"deprecated-label\">Deprecated.<\/span><\/div>\n+                    <div class=\"block\">First sentence. Second sentence.<\/div>\"\"\",\n+                \/\/ the following is the interesting case:\n+                \/\/ with no @Deprecated annotation, any @deprecated tag is discarded\n+                \"\"\"\n+                    <span class=\"element-name\">noAnno_tag<\/span>()<\/div>\n+                    <div class=\"block\">First sentence. Second sentence.<\/div>\"\"\",\n+                \"\"\"\n+                    <span class=\"element-name\">anno_tag<\/span>()<\/div>\n+                    <div class=\"deprecation-block\"><span class=\"deprecated-label\">Deprecated.<\/span>\n+                    <div class=\"deprecation-comment\">deprecated-text<\/div>\n+                    <\/div>\n+                    <div class=\"block\">First sentence. Second sentence.<\/div>\"\"\");\n+\n+    }\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testMarkdown\/TestMarkdown.java","additions":95,"deletions":6,"binary":false,"changes":101,"status":"modified"}]}