{"files":[{"patch":"@@ -1320,0 +1320,2 @@\n+     *\n+     * @see <a href=\"https:\/\/spec.commonmark.org\/0.30\/\">CommonMark spec<\/a>\n@@ -1365,1 +1367,8 @@\n-            } else if (indent >= currIndent + 4 && !isParagraph(prevLineKind)) {\n+                return;\n+            }\n+\n+            while (indent < currIndent) {\n+                currIndent = indentStack.pop();\n+            }\n+\n+            if (indent >= currIndent + 4 && !isParagraph(prevLineKind)) {\n@@ -1370,4 +1379,2 @@\n-            } else {\n-                while (indent < currIndent) {\n-                    currIndent = indentStack.pop();\n-                }\n+                return;\n+            }\n@@ -1375,6 +1382,5 @@\n-                lineKind = peekLineKind();\n-                switch (lineKind) {\n-                    case BLOCK_QUOTE -> {\n-                        if (prevLineKind != LineKind.BLOCK_QUOTE) {\n-                            blockId++;\n-                        }\n+            lineKind = peekLineKind();\n+            switch (lineKind) {\n+                case BLOCK_QUOTE -> {\n+                    if (prevLineKind != LineKind.BLOCK_QUOTE) {\n+                        blockId++;\n@@ -1382,0 +1388,1 @@\n+                }\n@@ -1383,16 +1390,5 @@\n-                    case BULLETED_LIST_ITEM, ORDERED_LIST_ITEM -> {\n-                        var count = indent;\n-                        while (ch != ' ' && ch != '\\t') {\n-                            count++;\n-                            nextChar();\n-                        }\n-                        var listItemIndent = readIndent(count);\n-                        if (listItemIndent > count + 4) {\n-                            indentStack.push(currIndent);\n-                            currIndent = count + 4;\n-                            lineKind = LineKind.INDENTED_CODE_BLOCK;\n-                        } else if (indent >= currIndent) {\n-                            indentStack.push(currIndent);\n-                            currIndent = listItemIndent;\n-                        }\n-                        blockId++;\n+                case BULLETED_LIST_ITEM, ORDERED_LIST_ITEM -> {\n+                    var count = indent;\n+                    while (ch != ' ' && ch != '\\t') {\n+                        count++;\n+                        nextChar();\n@@ -1400,0 +1396,11 @@\n+                    var listItemIndent = readIndent(count);\n+                    if (listItemIndent > count + 4) {\n+                        indentStack.push(currIndent);\n+                        currIndent = count + 4;\n+                        lineKind = LineKind.INDENTED_CODE_BLOCK;\n+                    } else if (indent >= currIndent) {\n+                        indentStack.push(currIndent);\n+                        currIndent = listItemIndent;\n+                    }\n+                    blockId++;\n+                }\n@@ -1401,6 +1408,5 @@\n-                    case OTHER -> {\n-                        switch (prevLineKind) {\n-                            case BLOCK_QUOTE, BULLETED_LIST_ITEM, ORDERED_LIST_ITEM, OTHER -> { }\n-                            default -> {\n-                                blockId++;\n-                            }\n+                case OTHER -> {\n+                    switch (prevLineKind) {\n+                        case BLOCK_QUOTE, BULLETED_LIST_ITEM, ORDERED_LIST_ITEM, OTHER -> { }\n+                        default -> {\n+                            blockId++;\n@@ -1409,0 +1415,1 @@\n+                }\n@@ -1410,4 +1417,4 @@\n-                    case BLANK, ATX_HEADER, SETEXT_UNDERLINE, THEMATIC_BREAK, CODE_FENCE,\n-                            INDENTED_CODE_BLOCK -> {\n-                        blockId++;\n-                    }\n+                case BLANK, ATX_HEADER, SETEXT_UNDERLINE, THEMATIC_BREAK, CODE_FENCE,\n+                        INDENTED_CODE_BLOCK -> {\n+                    blockId++;\n+                }\n@@ -1415,3 +1422,2 @@\n-                    default -> {\n-                        throw new Error(lineKind.toString());\n-                    }\n+                default -> {\n+                    throw new Error(lineKind.toString());\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/parser\/DocCommentParser.java","additions":46,"deletions":40,"binary":false,"changes":86,"status":"modified"},{"patch":"@@ -1085,1 +1085,2 @@\n-                \"C.java:4: error: no tag name after '@'\");\n+                \"C.java:4: error: no tag name after '@'\",\n+                \"unknown tag\");\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testMarkdown\/TestMarkdown.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -167,0 +167,24 @@\n+            \/\/ in the following, note the indentation of the list item is 5 spaces\n+            \/\/ and the block that follows is indented by just 4 spaces\n+            POST_LIST_INDENT(\n+                    \"\"\"\n+                         1.  list item\n+                        \n+                             second paragraph\n+                             \n+                            {@code CODE}\n+                            @Anno\n+                            \n+                        end\"\"\",\n+                    \"\"\"\n+                        <ol>\n+                        <li>\n+                        <p>list item<\/p>\n+                        <p>second paragraph<\/p>\n+                        <\/li>\n+                        <\/ol>\n+                        <pre><code>{@code CODE}\n+                        @Anno\n+                        <\/code><\/pre>\n+                        <p>end<\/p>\"\"\"),\n+\n@@ -277,0 +301,3 @@\n+        checkOutput(Output.OUT, false,\n+                \"unknown tag\");\n+\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testMarkdown\/TestMarkdownCodeBlocks.java","additions":27,"deletions":0,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -378,0 +378,3 @@\n+        checkOutput(Output.OUT, false,\n+                \"unknown tag\");\n+\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testMarkdown\/TestMarkdownCodeSpans.java","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"}]}