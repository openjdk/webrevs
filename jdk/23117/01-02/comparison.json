{"files":[{"patch":"@@ -32,0 +32,1 @@\n+import java.io.BufferedReader;\n@@ -42,0 +43,2 @@\n+    private static final int WINDOWS_11_MINIMUM_BUILD = 22000;\n+\n@@ -87,0 +90,24 @@\n+    private static int windowsBuild() throws IOException {\n+        if (!OperatingSystem.isWindows())\n+            throw new UnsupportedOperationException();\n+\n+        String cmd = \"Systeminfo\";\n+        Process p = Runtime.getRuntime().exec(new String[] {cmd});\n+        int build = 0;\n+        try (BufferedReader in = p.inputReader()) {\n+            String s;\n+            int i = 0;\n+            while ((s = in.readLine()) != null) {\n+                \/\/ skip header\n+                if (i++ == 0) continue;\n+                if (s.startsWith(\"OS Version\")) {\n+                    String[] elts = s.trim().split(\" \");\n+                    String buildString = elts[elts.length - 1];\n+                    build = Integer.valueOf(buildString);\n+                    break;\n+                }\n+            }\n+        }\n+        return build;\n+    }\n+\n@@ -111,12 +138,6 @@\n-        String osName = StaticProperty.osName();\n-        OSVersion osVersion = OSVersion.current();\n-        System.out.println(\"OS name:    \" + osName + \"\\n\" +\n-                           \"OS version: \" + osVersion);\n-\n-        String[] nameElements = osName.split(\" \");\n-        int nameVers = Integer.valueOf(nameElements[nameElements.length - 1]);\n-        System.out.println(\"OS version from name: \" + nameVers);\n-\n-        boolean exceptionExpected =\n-            !(new OSVersion(10, 0).compareTo(osVersion) > 0 ||\n-              osName.contains(\"Server\") ? nameVers > 2022 : nameVers > 10);\n+\n+        int osBuild = windowsBuild();\n+        System.out.println(\"OS name:    \" + StaticProperty.osName() + \"\\n\" +\n+                           \"OS version: \" + OSVersion.current() + \"\\n\" +\n+                           \"OS build:   \" + osBuild);\n+        boolean exceptionExpected = osBuild < WINDOWS_11_MINIMUM_BUILD;\n","filename":"test\/jdk\/java\/io\/File\/createTempFile\/SpecialTempFile.java","additions":33,"deletions":12,"binary":false,"changes":45,"status":"modified"}]}