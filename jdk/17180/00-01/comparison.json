{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2010, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,8 +24,0 @@\n-\/*\n-  @test\n-  @key headful\n-  @bug 6988428\n-  @summary Tests whether shape is always set\n-  @run main ShapeNotSetSometimes\n-*\/\n-\n@@ -44,0 +36,7 @@\n+\/*\n+ * @test\n+ * @key headful\n+ * @bug 6988428\n+ * @summary Tests whether shape is always set\n+ * @run main ShapeNotSetSometimes\n+ *\/\n@@ -49,2 +48,1 @@\n-    private static final Color BACKGROUND_COLOR = Color.GREEN;\n-    private static final Color SHAPE_COLOR = Color.WHITE;\n+\n@@ -54,1 +52,0 @@\n-\n@@ -58,0 +55,4 @@\n+    private static int numOfFailedAttempts = 0;\n+    private static boolean skipColorCheck = false;\n+    private static final Color BACKGROUND_COLOR = Color.GREEN;\n+    private static final Color SHAPE_COLOR = Color.WHITE;\n@@ -127,1 +128,1 @@\n-        for(int i = 0; i < 50; i++) {\n+        for(int i = 1; i <= 50; i++) {\n@@ -129,0 +130,1 @@\n+            skipColorCheck = false;\n@@ -136,1 +138,0 @@\n-        robot.delay(200);\n@@ -140,1 +141,1 @@\n-        robot.delay(200);\n+        robot.delay(500);\n@@ -146,0 +147,3 @@\n+                if (skipColorCheck) {\n+                    break;\n+                }\n@@ -150,0 +154,3 @@\n+                if (skipColorCheck) {\n+                    break;\n+                }\n@@ -176,0 +183,2 @@\n+            numOfFailedAttempts++;\n+            System.err.println(\"FAILED ATTEMPT #\" + numOfFailedAttempts);\n@@ -177,1 +186,0 @@\n-\n@@ -185,1 +193,6 @@\n-            throw new RuntimeException(\"Test failed. The shape has not been applied.\");\n+\n+            if (numOfFailedAttempts < 3) {\n+                skipColorCheck = true;\n+            } else {\n+                throw new RuntimeException(\"Test failed 3 times. The shape has not been applied.\");\n+            }\n","filename":"test\/jdk\/java\/awt\/Frame\/ShapeNotSetSometimes\/ShapeNotSetSometimes.java","additions":30,"deletions":17,"binary":false,"changes":47,"status":"modified"}]}