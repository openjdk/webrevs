{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1999, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1999, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,1 +33,0 @@\n-#include \"runtime\/atomicAccess.hpp\"\n@@ -316,1 +315,1 @@\n-  precond(sampling_point >= _top);\n+  precond(sampling_point >= top());\n@@ -462,1 +461,1 @@\n-  return AtomicAccess::load(&_start);\n+  return _start.load_relaxed();\n@@ -466,1 +465,1 @@\n-  return AtomicAccess::load(&_top);\n+  return _top.load_relaxed();\n","filename":"src\/hotspot\/share\/gc\/shared\/threadLocalAllocBuffer.cpp","additions":4,"deletions":5,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1999, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1999, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,0 +29,1 @@\n+#include \"runtime\/atomic.hpp\"\n@@ -50,2 +51,2 @@\n-  HeapWord* _start;                              \/\/ address of TLAB\n-  HeapWord* _top;                                \/\/ address after last allocation\n+  Atomic<HeapWord*> _start;                      \/\/ address of TLAB\n+  Atomic<HeapWord*> _top;                        \/\/ address after last allocation\n@@ -74,1 +75,1 @@\n-  void set_start(HeapWord* start)                { _start = start; }\n+  void set_start(HeapWord* start)                { _start.store_relaxed(start); }\n@@ -77,1 +78,1 @@\n-  void set_top(HeapWord* top)                    { _top = top; }\n+  void set_top(HeapWord* top)                    { _top.store_relaxed(top); }\n@@ -115,1 +116,1 @@\n-  HeapWord* start() const                        { return _start; }\n+  HeapWord* start() const                        { return _start.load_relaxed(); }\n@@ -117,1 +118,1 @@\n-  HeapWord* top() const                          { return _top; }\n+  HeapWord* top() const                          { return _top.load_relaxed(); }\n@@ -174,8 +175,0 @@\n-  template <typename T> void addresses_do(T f) {\n-    f(&_start);\n-    f(&_top);\n-    f(&_pf_top);\n-    f(&_end);\n-    f(&_allocation_end);\n-  }\n-\n","filename":"src\/hotspot\/share\/gc\/shared\/threadLocalAllocBuffer.hpp","additions":8,"deletions":15,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -447,2 +447,2 @@\n-  nonstatic_field(ThreadLocalAllocBuffer,   _start,                                           HeapWord*)                             \\\n-  nonstatic_field(ThreadLocalAllocBuffer,   _top,                                             HeapWord*)                             \\\n+  nonstatic_field(ThreadLocalAllocBuffer,   _start,                                           Atomic<HeapWord*>)                     \\\n+  nonstatic_field(ThreadLocalAllocBuffer,   _top,                                             Atomic<HeapWord*>)                     \\\n","filename":"src\/hotspot\/share\/jvmci\/vmStructs_jvmci.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -350,2 +350,2 @@\n-  nonstatic_field(ThreadLocalAllocBuffer,      _start,                                        HeapWord*)                             \\\n-  nonstatic_field(ThreadLocalAllocBuffer,      _top,                                          HeapWord*)                             \\\n+  nonstatic_field(ThreadLocalAllocBuffer,      _start,                                        Atomic<HeapWord*>)                     \\\n+  nonstatic_field(ThreadLocalAllocBuffer,      _top,                                          Atomic<HeapWord*>)                     \\\n@@ -904,0 +904,1 @@\n+  declare_toplevel_type(Atomic<HeapWord*>)                                \\\n","filename":"src\/hotspot\/share\/runtime\/vmStructs.cpp","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"}]}