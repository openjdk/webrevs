{"files":[{"patch":"@@ -2497,0 +2497,20 @@\n+  \/\/  Float (32 bits)\n+  \/\/    Bit:     31        30 to 23          22 to 0\n+  \/\/          +---+------------------+-----------------------------+\n+  \/\/          | S |     Exponent     |      Mantissa (Fraction)    |\n+  \/\/          +---+------------------+-----------------------------+\n+  \/\/          1 bit       8 bits                  23 bits\n+  \/\/\n+  \/\/  Float (16 bits)\n+  \/\/    Bit:    15        14 to 10         9 to 0\n+  \/\/          +---+----------------+------------------+\n+  \/\/          | S |    Exponent    |     Mantissa     |\n+  \/\/          +---+----------------+------------------+\n+  \/\/          1 bit      5 bits          10 bits\n+  const int fp_sign_bits = 1;\n+  const int fp32_bits = 32;\n+  const int fp32_mantissa_2nd_part_bits = 9;\n+  const int fp32_mantissa_3rd_part_bits = 4;\n+  const int fp16_exponent_bits = 5;\n+  const int fp16_mantissa_bits = 10;\n+\n@@ -2498,2 +2518,2 @@\n-  __ vnsra_wi(dst, src, 26, Assembler::v0_t);\n-  __ vsll_vi(dst, dst, 10, Assembler::v0_t);\n+  __ vnsra_wi(dst, src, fp32_bits - fp_sign_bits - fp16_exponent_bits, Assembler::v0_t);\n+  __ vsll_vi(dst, dst, fp16_mantissa_bits, Assembler::v0_t);\n@@ -2504,0 +2524,3 @@\n+  \/\/   | (doppel & 0x007f_e000) >> 13 \/\/ 10 bits\n+  \/\/   | (doppel & 0x0000_1ff0) >> 4  \/\/  9 bits\n+  \/\/   | (doppel & 0x0000_000f));     \/\/  4 bits\n@@ -2507,2 +2530,2 @@\n-  __ vnsrl_wi(tmp, src, 13, Assembler::v0_t);\n-  __ mv(t0, 0x3ff);\n+  __ vnsrl_wi(tmp, src, fp32_mantissa_2nd_part_bits + fp32_mantissa_3rd_part_bits, Assembler::v0_t);\n+  __ mv(t0, 0x3ff); \/\/ retain first part of mantissa in a float 32\n@@ -2512,2 +2535,2 @@\n-  __ vnsrl_wi(tmp, src, 4, Assembler::v0_t);\n-  __ mv(t0, 0x1ff);\n+  __ vnsrl_wi(tmp, src, fp32_mantissa_3rd_part_bits, Assembler::v0_t);\n+  __ mv(t0, 0x1ff); \/\/ retain second part of mantissa in a float 32\n@@ -2517,0 +2540,1 @@\n+  \/\/ Narrow shift is necessary to move data from 32 bits element to 16 bits element in vector register.\n","filename":"src\/hotspot\/cpu\/riscv\/c2_MacroAssembler_riscv.cpp","additions":30,"deletions":6,"binary":false,"changes":36,"status":"modified"}]}