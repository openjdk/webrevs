{"files":[{"patch":"@@ -116,1 +116,1 @@\n-    private Delegate candidate;\n+    private final Delegate candidate;\n@@ -140,2 +140,1 @@\n-    private KDF(Delegate delegate, String algorithm,\n-                KDFParameters kdfParameters) {\n+    private KDF(Delegate delegate, String algorithm) {\n@@ -145,1 +144,2 @@\n-        this.kdfParameters = kdfParameters;\n+        this.kdfParameters = null;\n+        this.candidate = null;\n@@ -357,1 +357,1 @@\n-                        new KDF(d, algorithm, kdfParameters));\n+                        new KDF(d, algorithm));\n@@ -408,2 +408,2 @@\n-                                        instance.provider), algorithm,\n-                           kdfParameters);\n+                                        instance.provider), algorithm\n+            );\n@@ -460,2 +460,2 @@\n-                                        instance.provider), algorithm,\n-                           kdfParameters);\n+                                        instance.provider), algorithm\n+            );\n@@ -554,1 +554,1 @@\n-                throw new RuntimeException(e);\n+                throw new AssertionError(e);\n@@ -584,6 +584,0 @@\n-        if (checkSpiNonNull(theOne)) {\n-            return (isDeriveData) ?\n-                           theOne.spi().engineDeriveData(derivationSpec) :\n-                           theOne.spi().engineDeriveKey(algorithm, derivationSpec);\n-        }\n-\n@@ -591,0 +585,6 @@\n+            if (checkSpiNonNull(theOne)) {\n+                return (isDeriveData) ?\n+                               theOne.spi().engineDeriveData(derivationSpec) :\n+                               theOne.spi().engineDeriveKey(algorithm, derivationSpec);\n+            }\n+\n@@ -593,1 +593,1 @@\n-                throw new RuntimeException(\"Unexpected Error: candidate is null!\");\n+                throw new AssertionError(\"Unexpected Error: candidate is null!\");\n@@ -607,0 +607,3 @@\n+                        if (!skipDebug && pdebug != null) {\n+                            e.printStackTrace(pdebug.getPrintStream());\n+                        }\n@@ -618,0 +621,3 @@\n+                if (!skipDebug && pdebug != null) {\n+                    e.printStackTrace(pdebug.getPrintStream());\n+                }\n@@ -651,3 +657,1 @@\n-                    pdebug.println(\n-                            \"The evaluated provider does not support the \"\n-                            + \"specified algorithm and parameters\");\n+                    nsae.printStackTrace(pdebug.getPrintStream());\n@@ -662,1 +666,3 @@\n-        if (hasOne) throw new InvalidAlgorithmParameterException();\n+        if (hasOne) throw new InvalidAlgorithmParameterException(\n+                \"The KDFParameters supplied could not be used in combination \"\n+                + \"with the supplied algorithm for the selected Provider\");\n@@ -667,1 +673,2 @@\n-        return (d != null && d.spi() != null);\n+        \/\/ d.spi() cannot be null if d != null\n+        return (d != null);\n@@ -669,1 +676,1 @@\n-}\n\\ No newline at end of file\n+}\n","filename":"src\/java.base\/share\/classes\/javax\/crypto\/KDF.java","additions":30,"deletions":23,"binary":false,"changes":53,"status":"modified"}]}