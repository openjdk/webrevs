{"files":[{"patch":"@@ -61,4 +61,4 @@\n-    private static final Integer[] SUPPORTED_HMAC_SIZES = new Integer[] {\n-        SHA256_HMAC_SIZE,\n-        SHA384_HMAC_SIZE,\n-        SHA512_HMAC_SIZE\n+    private static final Integer[] SUPPORTED_HMAC_SIZES = new Integer[]{\n+            SHA256_HMAC_SIZE,\n+            SHA384_HMAC_SIZE,\n+            SHA512_HMAC_SIZE\n@@ -71,1 +71,1 @@\n-     *     the initialization parameters (may be {@code null})\n+     *         the initialization parameters (may be {@code null})\n@@ -74,2 +74,2 @@\n-     *     if the initialization parameters are inappropriate for this\n-     *     {@code KDFSpi}\n+     *         if the initialization parameters are inappropriate for this\n+     *         {@code KDFSpi}\n@@ -79,1 +79,1 @@\n-        throws InvalidAlgorithmParameterException {\n+            throws InvalidAlgorithmParameterException {\n@@ -83,1 +83,1 @@\n-                hmacAlgName + \" does not support parameters\");\n+                    hmacAlgName + \" does not support parameters\");\n@@ -86,1 +86,1 @@\n-        if (!Arrays.asList(SUPPORTED_HMAC_SIZES).contains(hmacLen)){\n+        if (!Arrays.asList(SUPPORTED_HMAC_SIZES).contains(hmacLen)) {\n@@ -88,1 +88,1 @@\n-                \"Subclass attempted to use an invalid hmacLen\");\n+                    \"Subclass attempted to use an invalid hmacLen\");\n@@ -100,4 +100,5 @@\n-     *     if the information contained within the {@code derivationParameterSpec} is\n-     *     invalid or if the combination of {@code alg} and the {@code derivationParameterSpec}\n-     *     results in something invalid, ie - a key of inappropriate length\n-     *     for the specified algorithm\n+     *         if the information contained within the\n+     *         {@code derivationParameterSpec} is invalid or if the combination\n+     *         of {@code alg} and the {@code derivationParameterSpec} results in\n+     *         something invalid, ie - a key of inappropriate length for the\n+     *         specified algorithm\n@@ -105,1 +106,1 @@\n-     *     if {@code alg} is empty\n+     *         if {@code alg} is empty\n@@ -107,1 +108,1 @@\n-     *     if {@code alg} is {@code null}\n+     *         if {@code alg} is {@code null}\n@@ -112,1 +113,2 @@\n-        throws InvalidAlgorithmParameterException, NoSuchAlgorithmException {\n+            throws InvalidAlgorithmParameterException,\n+                   NoSuchAlgorithmException {\n@@ -116,1 +118,2 @@\n-                \"the algorithm for the SecretKey return value must not be null\");\n+                    \"the algorithm for the SecretKey return value must not be\"\n+                    + \" null\");\n@@ -120,2 +123,2 @@\n-                \"the algorithm for the SecretKey return value must not be \"\n-                + \"empty\");\n+                    \"the algorithm for the SecretKey return value must not be \"\n+                    + \"empty\");\n@@ -134,2 +137,2 @@\n-     *     if the information contained within the {@code KDFParameterSpec} is\n-     *     invalid or incorrect for the type of key to be derived\n+     *         if the information contained within the {@code KDFParameterSpec}\n+     *         is invalid or incorrect for the type of key to be derived\n@@ -137,1 +140,1 @@\n-     *     if the derived keying material is not extractable\n+     *         if the derived keying material is not extractable\n@@ -141,1 +144,1 @@\n-                throws InvalidAlgorithmParameterException {\n+            throws InvalidAlgorithmParameterException {\n@@ -151,1 +154,1 @@\n-                (HKDFParameterSpec.Extract) derivationSpec;\n+                    (HKDFParameterSpec.Extract) derivationSpec;\n@@ -167,2 +170,2 @@\n-                    \"an HKDF Extract could not be initialized with the given \"\n-                    + \"key or salt material\", ike);\n+                        \"an HKDF Extract could not be initialized with the \"\n+                        + \"given key or salt material\", ike);\n@@ -173,2 +176,3 @@\n-                    \"could not instantiate a Mac with the provided algorithm\",\n-                    nsae);\n+                        \"could not instantiate a Mac with the provided \"\n+                        + \"algorithm\",\n+                        nsae);\n@@ -185,1 +189,1 @@\n-                (HKDFParameterSpec.Expand) derivationSpec;\n+                    (HKDFParameterSpec.Expand) derivationSpec;\n@@ -189,1 +193,1 @@\n-                    \"PRK is required for HKDFParameterSpec.Expand\");\n+                        \"PRK is required for HKDFParameterSpec.Expand\");\n@@ -198,1 +202,1 @@\n-                    \"Requested length exceeds maximum allowed length\");\n+                        \"Requested length exceeds maximum allowed length\");\n@@ -205,2 +209,2 @@\n-                    \"an HKDF Expand could not be initialized with the given \"\n-                    + \"keying material\", ike);\n+                        \"an HKDF Expand could not be initialized with the \"\n+                        + \"given keying material\", ike);\n@@ -211,2 +215,3 @@\n-                    \"could not instantiate a Mac with the provided algorithm\",\n-                    nsae);\n+                        \"could not instantiate a Mac with the provided \"\n+                        + \"algorithm\",\n+                        nsae);\n@@ -218,1 +223,1 @@\n-                (HKDFParameterSpec.ExtractThenExpand) derivationSpec;\n+                    (HKDFParameterSpec.ExtractThenExpand) derivationSpec;\n@@ -238,1 +243,1 @@\n-                        \"Requested length exceeds maximum allowed length\");\n+                            \"Requested length exceeds maximum allowed length\");\n@@ -246,2 +251,2 @@\n-                    \"an HKDF ExtractThenExpand could not be initialized with \"\n-                    + \"the given key or salt material\", ike);\n+                        \"an HKDF ExtractThenExpand could not be initialized \"\n+                        + \"with the given key or salt material\", ike);\n@@ -252,2 +257,3 @@\n-                    \"could not instantiate a Mac with the provided algorithm\",\n-                    nsae);\n+                        \"could not instantiate a Mac with the provided \"\n+                        + \"algorithm\",\n+                        nsae);\n@@ -267,1 +273,1 @@\n-            \"an HKDF derivation requires a valid HKDFParameterSpec\");\n+                \"an HKDF derivation requires a valid HKDFParameterSpec\");\n@@ -272,1 +278,1 @@\n-        throws InvalidKeyException {\n+            throws InvalidKeyException {\n@@ -289,2 +295,2 @@\n-        } else if(keys != null) {\n-                return new byte[0];\n+        } else if (keys != null) {\n+            return new byte[0];\n@@ -293,1 +299,1 @@\n-                \"List of key segments could not be consolidated\");\n+                    \"List of key segments could not be consolidated\");\n@@ -301,1 +307,1 @@\n-     *     the input keying material used for the HKDF-Extract operation.\n+     *         the input keying material used for the HKDF-Extract operation.\n@@ -303,1 +309,1 @@\n-     *     the salt value used for HKDF-Extract\n+     *         the salt value used for HKDF-Extract\n@@ -308,2 +314,2 @@\n-     *     if an invalid salt was provided through the\n-     *     {@code HKDFParameterSpec}\n+     *         if an invalid salt was provided through the\n+     *         {@code HKDFParameterSpec}\n@@ -312,1 +318,1 @@\n-        throws InvalidKeyException, NoSuchAlgorithmException {\n+            throws InvalidKeyException, NoSuchAlgorithmException {\n@@ -329,1 +335,1 @@\n-     *     the pseudorandom key used for HKDF-Expand\n+     *         the pseudorandom key used for HKDF-Expand\n@@ -331,2 +337,2 @@\n-     *     optional context and application specific information or {@code null}\n-     *     if no info data is provided.\n+     *         optional context and application specific information or\n+     *         {@code null} if no info data is provided.\n@@ -334,1 +340,1 @@\n-     *     the length in bytes of the required output\n+     *         the length in bytes of the required output\n@@ -337,3 +343,3 @@\n-     *     will be at least as long as the requested length in the {@code outLen}\n-     *     parameter, but will be rounded up to the nearest multiple of the HMAC\n-     *     output length.\n+     *         will be at least as long as the requested length in the\n+     *         {@code outLen} parameter, but will be rounded up to the nearest\n+     *         multiple of the HMAC output length.\n@@ -342,2 +348,2 @@\n-     *     if an invalid PRK was provided through the {@code HKDFParameterSpec}\n-     *     or derived during the extract phase.\n+     *         if an invalid PRK was provided through the\n+     *         {@code HKDFParameterSpec} or derived during the extract phase.\n@@ -346,1 +352,1 @@\n-        throws InvalidKeyException, NoSuchAlgorithmException {\n+            throws InvalidKeyException, NoSuchAlgorithmException {\n@@ -351,1 +357,1 @@\n-                \"prk must be at least \" + hmacLen + \" bytes\");\n+                    \"prk must be at least \" + hmacLen + \" bytes\");\n@@ -368,1 +374,2 @@\n-                    hmacObj.update(kdfOutput, offset - hmacLen, hmacLen); \/\/ add T(i-1)\n+                    hmacObj.update(kdfOutput, offset - hmacLen,\n+                                   hmacLen); \/\/ add T(i-1)\n@@ -377,1 +384,1 @@\n-                    Arrays.fill(tmp, (byte)0x00);\n+                    Arrays.fill(tmp, (byte) 0x00);\n@@ -399,1 +406,1 @@\n-            throws InvalidAlgorithmParameterException {\n+                throws InvalidAlgorithmParameterException {\n@@ -406,1 +413,1 @@\n-            throws InvalidAlgorithmParameterException {\n+                throws InvalidAlgorithmParameterException {\n@@ -413,1 +420,1 @@\n-            throws InvalidAlgorithmParameterException {\n+                throws InvalidAlgorithmParameterException {\n","filename":"src\/java.base\/share\/classes\/com\/sun\/crypto\/provider\/HKDFKeyDerivation.java","additions":76,"deletions":69,"binary":false,"changes":145,"status":"modified"},{"patch":"@@ -48,2 +48,2 @@\n- * {@code KDF} objects are instantiated with the {@code getInstance} family\n- * of methods.\n+ * {@code KDF} objects are instantiated with the {@code getInstance} family of\n+ * methods.\n@@ -69,5 +69,5 @@\n- * Unless otherwise documented by an implementation, the methods defined in\n- * this class are not thread-safe. Multiple threads that need to access a\n- * single object concurrently should synchronize amongst themselves and\n- * provide the necessary locking. Multiple threads each manipulating separate\n- * objects need not synchronize.\n+ * Unless otherwise documented by an implementation, the methods defined in this\n+ * class are not thread-safe. Multiple threads that need to access a single\n+ * object concurrently should synchronize amongst themselves and provide the\n+ * necessary locking. Multiple threads each manipulating separate objects need\n+ * not synchronize.\n@@ -81,7 +81,6 @@\n- * to those methods - for example, the key material may reside on a\n- * hardware device that only a specific {@code KDF} provider can utilize.\n- * Once initiated, the selection process traverses the list of registered\n- * security providers, starting with the most preferred {@code Provider}. A new\n- * {@code KDF} object encapsulating the {@code KDFSpi} implementation from the\n- * first provider that supports the specified algorithm and optional\n- * parameters is returned.\n+ * to those methods - for example, the key material may reside on a hardware\n+ * device that only a specific {@code KDF} provider can utilize. Once initiated,\n+ * the selection process traverses the list of registered security providers,\n+ * starting with the most preferred {@code Provider}. A new {@code KDF} object\n+ * encapsulating the {@code KDFSpi} implementation from the first provider that\n+ * supports the specified algorithm and optional parameters is returned.\n@@ -91,6 +90,6 @@\n- * provider supporting the {@code KDF} algorithm and optional {@code KDFParameters}\n- * is chosen. This provider may not support the key material that is subsequently\n- * passed to the {@code deriveKey} or {@code deriveData} methods. Therefore, it\n- * is recommended not to call the {@code getProviderName} or\n- * {@code getParameters} methods until after a key derivation operation. Once a\n- * provider is selected, it cannot be changed.\n+ * provider supporting the {@code KDF} algorithm and optional\n+ * {@code KDFParameters} is chosen. This provider may not support the key\n+ * material that is subsequently passed to the {@code deriveKey} or\n+ * {@code deriveData} methods. Therefore, it is recommended not to call the\n+ * {@code getProviderName} or {@code getParameters} methods until after a key\n+ * derivation operation. Once a provider is selected, it cannot be changed.\n@@ -139,1 +138,2 @@\n-    private KDF(Delegate delegate, String algorithm, KDFParameters kdfParameters) {\n+    private KDF(Delegate delegate, String algorithm,\n+                KDFParameters kdfParameters) {\n@@ -154,1 +154,2 @@\n-    private KDF(Delegate firstPairOfSpiAndProv, Iterator<Service> t, String algorithm,\n+    private KDF(Delegate firstPairOfSpiAndProv, Iterator<Service> t,\n+                String algorithm,\n@@ -174,2 +175,0 @@\n-     * @see <a href=\"#DelayedProviderSelection\">Delayed Provider Selection<\/a>\n-     *\n@@ -177,0 +176,3 @@\n+     *\n+     * @see <a href=\"#DelayedProviderSelection\">Delayed Provider\n+     *         Selection<\/a>\n@@ -186,8 +188,5 @@\n-     * The returned parameters may be the same that were used to initialize\n-     * this {@code KDF} object, or may contain additional default or\n-     * random parameter values used by the underlying KDF algorithm.\n-     * If the required parameters were not supplied and can be generated by\n-     * the {@code KDF} object, the generated parameters are returned;\n-     * otherwise {@code null} is returned.\n-     *\n-     * @see <a href=\"#DelayedProviderSelection\">Delayed Provider Selection<\/a>\n+     * The returned parameters may be the same that were used to initialize this\n+     * {@code KDF} object, or may contain additional default or random parameter\n+     * values used by the underlying KDF algorithm. If the required parameters\n+     * were not supplied and can be generated by the {@code KDF} object, the\n+     * generated parameters are returned; otherwise {@code null} is returned.\n@@ -196,1 +195,4 @@\n-     * {@code null}\n+     *         {@code null}\n+     *\n+     * @see <a href=\"#DelayedProviderSelection\">Delayed Provider\n+     *         Selection<\/a>\n@@ -206,2 +208,0 @@\n-     * @see <a href=\"#DelayedProviderSelection\">Delayed Provider Selection<\/a>\n-     *\n@@ -209,5 +209,4 @@\n-     *     the key derivation algorithm to use.\n-     *     See the {@code KDF} section in the <a href=\n-     *     \"{@docRoot}\/..\/specs\/security\/standard-names.html#kdf-algorithms\">\n-     *     Java Security Standard Algorithm Names Specification<\/a>\n-     *     for information about standard KDF algorithm names.\n+     *         the key derivation algorithm to use. See the {@code KDF} section\n+     *         in the <a href=\"{@docRoot}\/..\/specs\/security\/standard-names.html#kdf-algorithms\">\n+     *         Java Security Standard Algorithm Names Specification<\/a> for\n+     *         information about standard KDF algorithm names.\n@@ -217,8 +216,0 @@\n-     * @implNote\n-     * The JDK Reference Implementation additionally uses the\n-     * {@code jdk.security.provider.preferred}\n-     * {@link Security#getProperty(String) Security} property to determine\n-     * the preferred provider order for the specified algorithm. This\n-     * may be different than the order of providers returned by\n-     * {@link Security#getProviders() Security.getProviders()}.\n-     *\n@@ -226,2 +217,2 @@\n-     *     if no {@code Provider} supports a {@code KDF} implementation for the\n-     *     specified algorithm\n+     *         if no {@code Provider} supports a {@code KDF} implementation for\n+     *         the specified algorithm\n@@ -229,1 +220,10 @@\n-     *     if {@code algorithm} is {@code null}\n+     *         if {@code algorithm} is {@code null}\n+     * @implNote The JDK Reference Implementation additionally uses the\n+     *         {@code jdk.security.provider.preferred}\n+     *         {@link Security#getProperty(String) Security} property to\n+     *         determine the preferred provider order for the specified\n+     *         algorithm. This may be different than the order of providers\n+     *         returned by\n+     *         {@link Security#getProviders() Security.getProviders()}.\n+     * @see <a href=\"#DelayedProviderSelection\">Delayed Provider\n+     *         Selection<\/a>\n@@ -232,1 +232,1 @@\n-        throws NoSuchAlgorithmException {\n+            throws NoSuchAlgorithmException {\n@@ -238,1 +238,1 @@\n-                \"No implementation found using null KDFParameters\", e);\n+                    \"No implementation found using null KDFParameters\", e);\n@@ -248,5 +248,4 @@\n-     *     the key derivation algorithm to use.\n-     *     See the {@code KDF} section in the <a href=\n-     *     \"{@docRoot}\/..\/specs\/security\/standard-names.html#kdf-algorithms\">\n-     *     Java Security Standard Algorithm Names Specification<\/a>\n-     *     for information about standard KDF algorithm names.\n+     *         the key derivation algorithm to use. See the {@code KDF} section\n+     *         in the <a href=\"{@docRoot}\/..\/specs\/security\/standard-names.html#kdf-algorithms\">\n+     *         Java Security Standard Algorithm Names Specification<\/a> for\n+     *         information about standard KDF algorithm names.\n@@ -254,1 +253,1 @@\n-     *     the provider to use for this key derivation\n+     *         the provider to use for this key derivation\n@@ -259,2 +258,2 @@\n-     *     if the specified provider does not support the specified {@code KDF}\n-     *     algorithm\n+     *         if the specified provider does not support the specified\n+     *         {@code KDF} algorithm\n@@ -262,2 +261,2 @@\n-     *     if the specified provider is not registered in the security provider\n-     *     list\n+     *         if the specified provider is not registered in the security\n+     *         provider list\n@@ -265,1 +264,1 @@\n-     *     if the {@code algorithm} or {@code provider} is {@code null}\n+     *         if {@code algorithm} or {@code provider} is {@code null}\n@@ -268,1 +267,1 @@\n-        throws NoSuchAlgorithmException, NoSuchProviderException {\n+            throws NoSuchAlgorithmException, NoSuchProviderException {\n@@ -275,1 +274,1 @@\n-                \"No implementation found using null KDFParameters\", e);\n+                    \"No implementation found using null KDFParameters\", e);\n@@ -284,5 +283,4 @@\n-     *     the key derivation algorithm to use.\n-     *     See the {@code KDF} section in the <a href=\n-     *     \"{@docRoot}\/..\/specs\/security\/standard-names.html#kdf-algorithms\">\n-     *     Java Security Standard Algorithm Names Specification<\/a>\n-     *     for information about standard KDF algorithm names.\n+     *         the key derivation algorithm to use. See the {@code KDF} section\n+     *         in the <a href=\"{@docRoot}\/..\/specs\/security\/standard-names.html#kdf-algorithms\">\n+     *         Java Security Standard Algorithm Names Specification<\/a> for\n+     *         information about standard KDF algorithm names.\n@@ -290,1 +288,1 @@\n-     *     the provider to use for this key derivation\n+     *         the provider to use for this key derivation\n@@ -295,2 +293,2 @@\n-     *     if the specified provider does not support the specified {@code KDF}\n-     *     algorithm\n+     *         if the specified provider does not support the specified\n+     *         {@code KDF} algorithm\n@@ -298,1 +296,1 @@\n-     *     if the {@code algorithm} or {@code provider} is {@code null}\n+     *         if {@code algorithm} or {@code provider} is {@code null}\n@@ -301,1 +299,1 @@\n-        throws NoSuchAlgorithmException {\n+            throws NoSuchAlgorithmException {\n@@ -308,1 +306,1 @@\n-                \"No implementation found using null KDFParameters\", e);\n+                    \"No implementation found using null KDFParameters\", e);\n@@ -316,2 +314,0 @@\n-     * @see <a href=\"#DelayedProviderSelection\">Delayed Provider Selection<\/a>\n-     *\n@@ -319,5 +315,4 @@\n-     *     the key derivation algorithm to use.\n-     *     See the {@code KDF} section in the <a href=\n-     *     \"{@docRoot}\/..\/specs\/security\/standard-names.html#kdf-algorithms\">\n-     *     Java Security Standard Algorithm Names Specification<\/a>\n-     *     for information about standard KDF algorithm names.\n+     *         the key derivation algorithm to use. See the {@code KDF} section\n+     *         in the <a href=\"{@docRoot}\/..\/specs\/security\/standard-names.html#kdf-algorithms\">\n+     *         Java Security Standard Algorithm Names Specification<\/a> for\n+     *         information about standard KDF algorithm names.\n@@ -325,2 +320,2 @@\n-     *     the {@code KDFParameters} used to configure the derivation\n-     *     algorithm or {@code null} if no parameters are provided\n+     *         the {@code KDFParameters} used to configure the derivation\n+     *         algorithm or {@code null} if no parameters are provided\n@@ -330,8 +325,0 @@\n-     * @implNote\n-     * The JDK Reference Implementation additionally uses the\n-     * {@code jdk.security.provider.preferred}\n-     * {@link Security#getProperty(String) Security} property to determine\n-     * the preferred provider order for the specified algorithm. This\n-     * may be different than the order of providers returned by\n-     * {@link Security#getProviders() Security.getProviders()}.\n-     *\n@@ -339,2 +326,2 @@\n-     *     if no {@code Provider} supports a {@code KDF} implementation for the\n-     *     specified algorithm\n+     *         if no {@code Provider} supports a {@code KDF} implementation for\n+     *         the specified algorithm\n@@ -342,3 +329,3 @@\n-     *     if at least one {@code Provider} supports a {@code KDFSpi}\n-     *     implementation for the specified algorithm but none of them\n-     *     support the specified parameters\n+     *         if at least one {@code Provider} supports a {@code KDF}\n+     *         implementation for the specified algorithm but none of them\n+     *         support the specified parameters\n@@ -346,1 +333,10 @@\n-     *     if the {@code algorithm} is {@code null}\n+     *         if {@code algorithm} is {@code null}\n+     * @implNote The JDK Reference Implementation additionally uses the\n+     *         {@code jdk.security.provider.preferred}\n+     *         {@link Security#getProperty(String) Security} property to\n+     *         determine the preferred provider order for the specified\n+     *         algorithm. This may be different than the order of providers\n+     *         returned by\n+     *         {@link Security#getProviders() Security.getProviders()}.\n+     * @see <a href=\"#DelayedProviderSelection\">Delayed Provider\n+     *         Selection<\/a>\n@@ -350,1 +346,2 @@\n-        throws NoSuchAlgorithmException, InvalidAlgorithmParameterException {\n+            throws NoSuchAlgorithmException,\n+                   InvalidAlgorithmParameterException {\n@@ -368,2 +365,2 @@\n-                            \"obj was not an instance of KDFSpi (should not \"\n-                            + \"happen)\");\n+                                \"obj was not an instance of KDFSpi (should not \"\n+                                + \"happen)\");\n@@ -382,2 +379,2 @@\n-                            \"No provider can be found that supports the \"\n-                            + \"specified algorithm and parameters\");\n+                                \"No provider can be found that supports the \"\n+                                + \"specified algorithm and parameters\");\n@@ -394,1 +391,1 @@\n-                \"Algorithm \" + algorithm + \" not available\");\n+                    \"Algorithm \" + algorithm + \" not available\");\n@@ -404,5 +401,4 @@\n-     *     the key derivation algorithm to use.\n-     *     See the {@code KDF} section in the <a href=\n-     *     \"{@docRoot}\/..\/specs\/security\/standard-names.html#kdf-algorithms\">\n-     *     Java Security Standard Algorithm Names Specification<\/a>\n-     *     for information about standard KDF algorithm names.\n+     *         the key derivation algorithm to use. See the {@code KDF} section\n+     *         in the <a href=\"{@docRoot}\/..\/specs\/security\/standard-names.html#kdf-algorithms\">\n+     *         Java Security Standard Algorithm Names Specification<\/a> for\n+     *         information about standard KDF algorithm names.\n@@ -410,2 +406,2 @@\n-     *     the {@code KDFParameters} used to configure the derivation\n-     *     algorithm or {@code null} if no parameters are provided\n+     *         the {@code KDFParameters} used to configure the derivation\n+     *         algorithm or {@code null} if no parameters are provided\n@@ -413,1 +409,1 @@\n-     *     the provider to use for this key derivation\n+     *         the provider to use for this key derivation\n@@ -418,2 +414,2 @@\n-     *     if the specified provider does not support the specified {@code KDF}\n-     *     algorithm\n+     *         if the specified provider does not support the specified\n+     *         {@code KDF} algorithm\n@@ -421,2 +417,2 @@\n-     *     if the specified provider is not registered in the security provider\n-     *     list\n+     *         if the specified provider is not registered in the security\n+     *         provider list\n@@ -424,2 +420,2 @@\n-     *     if the specified provider does not support a {@code KDFSpi}\n-     *     implementation for the specified algorithm and parameters\n+     *         if the specified provider does not support a {@code KDF}\n+     *         implementation for the specified algorithm and parameters\n@@ -427,1 +423,1 @@\n-     *     if the {@code algorithm} or {@code provider} is {@code null}\n+     *         if {@code algorithm} or {@code provider} is {@code null}\n@@ -432,2 +428,2 @@\n-        throws NoSuchAlgorithmException, NoSuchProviderException,\n-               InvalidAlgorithmParameterException {\n+            throws NoSuchAlgorithmException, NoSuchProviderException,\n+                   InvalidAlgorithmParameterException {\n@@ -447,1 +443,2 @@\n-                                        instance.provider), algorithm, kdfParameters);\n+                                        instance.provider), algorithm,\n+                           kdfParameters);\n@@ -459,5 +456,4 @@\n-     *     the key derivation algorithm to use.\n-     *     See the {@code KDF} section in the <a href=\n-     *     \"{@docRoot}\/..\/specs\/security\/standard-names.html#kdf-algorithms\">\n-     *     Java Security Standard Algorithm Names Specification<\/a>\n-     *     for information about standard KDF algorithm names.\n+     *         the key derivation algorithm to use. See the {@code KDF} section\n+     *         in the <a href=\"{@docRoot}\/..\/specs\/security\/standard-names.html#kdf-algorithms\">\n+     *         Java Security Standard Algorithm Names Specification<\/a> for\n+     *         information about standard KDF algorithm names.\n@@ -465,2 +461,2 @@\n-     *     the {@code KDFParameters} used to configure the derivation\n-     *     algorithm or {@code null} if no parameters are provided\n+     *         the {@code KDFParameters} used to configure the derivation\n+     *         algorithm or {@code null} if no parameters are provided\n@@ -468,1 +464,1 @@\n-     *     the provider to use for this key derivation\n+     *         the provider to use for this key derivation\n@@ -473,2 +469,2 @@\n-     *     if the specified provider does not support the specified {@code KDF}\n-     *     algorithm\n+     *         if the specified provider does not support the specified\n+     *         {@code KDF} algorithm\n@@ -476,2 +472,2 @@\n-     *     if the specified provider does not support a {@code KDFSpi}\n-     *     implementation for the specified algorithm and parameters\n+     *         if the specified provider does not support a {@code KDF}\n+     *         implementation for the specified algorithm and parameters\n@@ -479,1 +475,1 @@\n-     *     if the {@code algorithm} or {@code provider} is {@code null}\n+     *         if {@code algorithm} or {@code provider} is {@code null}\n@@ -484,1 +480,2 @@\n-        throws NoSuchAlgorithmException, InvalidAlgorithmParameterException {\n+            throws NoSuchAlgorithmException,\n+                   InvalidAlgorithmParameterException {\n@@ -498,1 +495,2 @@\n-                                        instance.provider), algorithm, kdfParameters);\n+                                        instance.provider), algorithm,\n+                           kdfParameters);\n@@ -506,1 +504,2 @@\n-        throws NoSuchAlgorithmException, InvalidAlgorithmParameterException {\n+            throws NoSuchAlgorithmException,\n+                   InvalidAlgorithmParameterException {\n@@ -518,1 +517,1 @@\n-     *     the algorithm of the resultant {@code SecretKey} object\n+     *         the algorithm of the resultant {@code SecretKey} object\n@@ -520,1 +519,1 @@\n-     *     the object describing the inputs to the derivation function\n+     *         the object describing the inputs to the derivation function\n@@ -525,3 +524,3 @@\n-     *     if the information contained within the {@code derivationSpec} is\n-     *     invalid or if the combination of {@code alg} and the {@code derivationSpec}\n-     *     results in something invalid\n+     *         if the information contained within the {@code derivationSpec} is\n+     *         invalid or if the combination of {@code alg} and the\n+     *         {@code derivationSpec} results in something invalid\n@@ -529,1 +528,1 @@\n-     *     if {@code alg} is empty or invalid\n+     *         if {@code alg} is empty or invalid\n@@ -531,1 +530,1 @@\n-     *     if {@code alg} or {@code derivationSpec} is null\n+     *         if {@code alg} or {@code derivationSpec} is null\n@@ -535,1 +534,2 @@\n-        throws InvalidAlgorithmParameterException, NoSuchAlgorithmException {\n+            throws InvalidAlgorithmParameterException,\n+                   NoSuchAlgorithmException {\n@@ -538,1 +538,2 @@\n-                \"the algorithm for the SecretKey return value must not be null\");\n+                    \"the algorithm for the SecretKey return value must not be\"\n+                    + \" null\");\n@@ -542,2 +543,2 @@\n-                \"the algorithm for the SecretKey return value must not be \"\n-                + \"empty\");\n+                    \"the algorithm for the SecretKey return value must not be \"\n+                    + \"empty\");\n@@ -554,1 +555,1 @@\n-     * Obtains raw data from a key derivation function.\n+     * Derives a key, returns raw data as a byte array.\n@@ -557,1 +558,1 @@\n-     *     the object describing the inputs to the derivation function\n+     *         the object describing the inputs to the derivation function\n@@ -562,2 +563,2 @@\n-     *     if the information contained within the {@code derivationSpec} is\n-     *     invalid\n+     *         if the information contained within the {@code derivationSpec} is\n+     *         invalid\n@@ -565,1 +566,1 @@\n-     *     if the derived keying material is not extractable\n+     *         if the derived keying material is not extractable\n@@ -567,1 +568,1 @@\n-     *     if {@code derivationSpec} is null\n+     *         if {@code derivationSpec} is null\n@@ -570,1 +571,1 @@\n-        throws InvalidAlgorithmParameterException {\n+            throws InvalidAlgorithmParameterException {\n@@ -589,1 +590,2 @@\n-        if ((delegateAndSpiAreInitialized(pairOfSpiAndProv)) || (serviceIterator == null)) return;\n+        if (delegateAndSpiAreInitialized(pairOfSpiAndProv))\n+            return;\n@@ -592,1 +594,1 @@\n-            if ((delegateIsNullOrSpiIsNull(pairOfSpiAndProv)) && (serviceIterator != null)) {\n+            if (delegateIsNullOrSpiIsNull(pairOfSpiAndProv)) {\n@@ -603,2 +605,2 @@\n-     * {@code derivationSpec} values, and assigns the global spi and\n-     * provider variables if they have not been assigned yet.\n+     * {@code derivationSpec} values, and assigns the global spi and provider\n+     * variables if they have not been assigned yet.\n@@ -610,1 +612,2 @@\n-        throws InvalidAlgorithmParameterException, NoSuchAlgorithmException {\n+            throws InvalidAlgorithmParameterException,\n+                   NoSuchAlgorithmException {\n@@ -617,2 +620,4 @@\n-                    derivationSpec) : pairOfSpiAndProv.spi().engineDeriveKey(algorithm,\n-                                                                   derivationSpec);\n+                        derivationSpec) : pairOfSpiAndProv.spi()\n+                                                          .engineDeriveKey(\n+                                                                  algorithm,\n+                                                                  derivationSpec);\n@@ -622,1 +627,2 @@\n-            while ((delegateAndSpiAreInitialized(firstPairOfSpiAndProv)) || serviceIterator.hasNext()) {\n+            while ((delegateAndSpiAreInitialized(firstPairOfSpiAndProv))\n+                   || serviceIterator.hasNext()) {\n@@ -649,2 +655,2 @@\n-                        derivationSpec) : currSpi.engineDeriveKey(\n-                        algorithm, derivationSpec);\n+                            derivationSpec) : currSpi.engineDeriveKey(\n+                            algorithm, derivationSpec);\n@@ -671,3 +677,3 @@\n-            \"No installed provider supports the \" +\n-            ((isDeriveData) ? \"deriveData\" : \"deriveKey\")\n-            + \" method with these parameters\");\n+                \"No installed provider supports the \" +\n+                ((isDeriveData) ? \"deriveData\" : \"deriveKey\")\n+                + \" method with these parameters\");\n","filename":"src\/java.base\/share\/classes\/javax\/crypto\/KDF.java","additions":177,"deletions":171,"binary":false,"changes":348,"status":"modified"},{"patch":"@@ -30,2 +30,1 @@\n- * A specification of Key Derivation Function ({@link KDF})\n- * parameters.\n+ * A specification of Key Derivation Function ({@link KDF}) parameters.\n@@ -37,2 +36,3 @@\n- * When supplied, the {@link KDF#getInstance(String, KDFParameters) KDF.getInstance}\n- * methods return a {@code KDF} that is initialized with the specified parameters.\n+ * When supplied, the\n+ * {@link KDF#getInstance(String, KDFParameters) KDF.getInstance} methods return\n+ * a {@code KDF} that is initialized with the specified parameters.\n","filename":"src\/java.base\/share\/classes\/javax\/crypto\/KDFParameters.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -43,4 +43,10 @@\n- * accepts a {@code KDFParameters} object. The constructor must call {@code\n- * super(params)} passing the parameters supplied. The constructor must also\n- * throw an {@code InvalidAlgorithmParameterException} if the supplied\n- * parameters are inappropriate.\n+ * accepts a {@code KDFParameters} object. The constructor must call\n+ * {@code super(params)} passing the parameters supplied. The constructor must\n+ * also throw an {@code InvalidAlgorithmParameterException} if the supplied\n+ * parameters are inappropriate. If a {@code KDF} object is instantiated with\n+ * one of the {@code getInstance} methods that contains a {@code KDFParameters}\n+ * parameter, the user-provided {@code KDFParameters} object will be passed to\n+ * the constructor of the {@code KDFSpi} implementation. Otherwise, if it is\n+ * instantiated with one of the {@code getInstance} methods without a\n+ * {@code KDFParameters} parameter, a {@code null} value will be passed to the\n+ * constructor.\n@@ -49,5 +55,6 @@\n- * {@code null} to be passed, otherwise an {@code InvalidAlgorithmParameterException}\n- * will be thrown. On the other hand, implementations which require\n- * {@code KDFParameters} should throw an {@code InvalidAlgorithmParameterException}\n- * upon receiving a {@code null} value or {@code KDFParameters} which are not\n- * supported by the implementation.\n+ * {@code null} to be passed, otherwise an\n+ * {@code InvalidAlgorithmParameterException} will be thrown. On the other hand,\n+ * implementations which require {@code KDFParameters} should throw an\n+ * {@code InvalidAlgorithmParameterException} upon receiving a {@code null}\n+ * value or {@code KDFParameters} which are not supported by the\n+ * implementation.\n@@ -71,2 +78,2 @@\n-     * A {@code KDFParameters} object may be specified for KDF algorithms\n-     * that support initialization parameters.\n+     * A {@code KDFParameters} object may be specified for KDF algorithms that\n+     * support initialization parameters.\n@@ -75,4 +82,2 @@\n-     *     the initialization parameters for the {@code KDF} algorithm (may be\n-     *     {@code null})\n-     *\n-     * @see KDF#getParameters()\n+     *         the initialization parameters for the {@code KDF} algorithm (may\n+     *         be {@code null})\n@@ -81,2 +86,3 @@\n-     *     if the initialization parameters are inappropriate for this\n-     *     {@code KDFSpi}\n+     *         if the initialization parameters are inappropriate for this\n+     *         {@code KDFSpi}\n+     * @see KDF#getParameters()\n@@ -85,1 +91,1 @@\n-        throws InvalidAlgorithmParameterException {}\n+            throws InvalidAlgorithmParameterException {}\n@@ -90,6 +96,7 @@\n-     * The returned parameters may be the same that were used to initialize\n-     * this {@code KDF} object, or may contain additional default or\n-     * random parameter values used by the underlying KDF algorithm.\n-     * If the required parameters were not supplied and can be generated by\n-     * the {@code KDF} object, the generated parameters are returned;\n-     * otherwise {@code null} is returned.\n+     * The returned parameters may be the same that were used to initialize this\n+     * {@code KDF} object or may contain additional default or random parameter\n+     * values used by the underlying {@code KDFSpi} algorithm's implementation.\n+     * If certain fields of the parameters were not supplied and can be\n+     * generated by the implementation, a new {@code KDFParameters} object with\n+     * the additional generated field values is returned; otherwise {@code null}\n+     * is returned.\n@@ -98,1 +105,1 @@\n-     * {@code null}\n+     *         {@code null}\n@@ -106,1 +113,1 @@\n-     *     the algorithm of the resultant {@code SecretKey} object\n+     *         the algorithm of the resultant {@code SecretKey} object\n@@ -108,1 +115,1 @@\n-     *     derivation parameters\n+     *         derivation parameters\n@@ -112,4 +119,0 @@\n-     * @implNote If the resultant key is extractable, then its {@code\n-     * getEncoded} value should have the same content as the result of {@code\n-     * deriveData}.\n-     *\n@@ -117,3 +120,3 @@\n-     *     if the information contained within the {@code derivationSpec} is\n-     *     invalid or if the combination of {@code alg} and the {@code derivationSpec}\n-     *     results in something invalid\n+     *         if the information contained within the {@code derivationSpec} is\n+     *         invalid or if the combination of {@code alg} and the\n+     *         {@code derivationSpec} results in something invalid\n@@ -121,1 +124,1 @@\n-     *     if {@code alg} is empty or invalid\n+     *         if {@code alg} is empty or invalid\n@@ -123,1 +126,4 @@\n-     *     if {@code alg} or {@code derivationSpec} is null\n+     *         if {@code alg} or {@code derivationSpec} is null\n+     * @implNote If the resultant key is extractable, then its\n+     *         {@code getEncoded} value should have the same content as the\n+     *         result of {@code deriveData}.\n@@ -127,1 +133,1 @@\n-        throws InvalidAlgorithmParameterException, NoSuchAlgorithmException;\n+            throws InvalidAlgorithmParameterException, NoSuchAlgorithmException;\n@@ -130,1 +136,1 @@\n-     * Obtains raw data from a key derivation function.\n+     * Derives a key, returns raw data as a byte array.\n@@ -133,1 +139,1 @@\n-     *     derivation parameters\n+     *         derivation parameters\n@@ -138,2 +144,2 @@\n-     *     if the information contained within the {@code derivationSpec} is\n-     *     invalid\n+     *         if the information contained within the {@code derivationSpec} is\n+     *         invalid\n@@ -141,1 +147,1 @@\n-     *     if the derived keying material is not extractable\n+     *         if the derived keying material is not extractable\n@@ -143,1 +149,1 @@\n-     *     if {@code derivationSpec} is null\n+     *         if {@code derivationSpec} is null\n@@ -146,2 +152,2 @@\n-        AlgorithmParameterSpec derivationSpec)\n-        throws InvalidAlgorithmParameterException;\n+            AlgorithmParameterSpec derivationSpec)\n+            throws InvalidAlgorithmParameterException;\n","filename":"src\/java.base\/share\/classes\/javax\/crypto\/KDFSpi.java","additions":51,"deletions":45,"binary":false,"changes":96,"status":"modified"},{"patch":"@@ -54,1 +54,2 @@\n- * \/\/ this usage depicts the initialization of an HKDF-Extract AlgorithmParameterSpec\n+ * \/\/ this usage depicts the initialization of an HKDF-Extract\n+ * AlgorithmParameterSpec\n@@ -62,1 +63,2 @@\n- * \/\/ this usage depicts the initialization of an HKDF-Expand AlgorithmParameterSpec\n+ * \/\/ this usage depicts the initialization of an HKDF-Expand\n+ * AlgorithmParameterSpec\n@@ -67,1 +69,2 @@\n- * \/\/ this usage depicts the initialization of an HKDF-ExtractExpand AlgorithmParameterSpec\n+ * \/\/ this usage depicts the initialization of an HKDF-ExtractExpand\n+ * AlgorithmParameterSpec\n@@ -111,2 +114,2 @@\n-         * Builds an {@code ExtractThenExpand} object from the current state of the\n-         * {@code Builder}.\n+         * Builds an {@code ExtractThenExpand} object from the current state of\n+         * the {@code Builder}.\n@@ -115,3 +118,3 @@\n-         *     the optional context and application specific information (may be\n-         *     {@code null}); the byte array is copied to prevent subsequent\n-         *     modification\n+         *         the optional context and application specific information\n+         *         (may be {@code null}); the byte array is copied to prevent\n+         *         subsequent modification\n@@ -119,5 +122,2 @@\n-         *     the length of the output keying material (must be greater than 0)\n-         *\n-         * @implNote HKDF implementations will enforce that the length is not greater\n-         * than 255 * HMAC length. HKDF implementations will also enforce that a\n-         * {code null} info value is treated as zero-length byte array.\n+         *         the length of the output keying material (must be greater\n+         *         than 0)\n@@ -128,1 +128,5 @@\n-         *     if {@code length} is not greater than 0\n+         *         if {@code length} is not greater than 0\n+         * @implNote HKDF implementations will enforce that the length\n+         *         is not greater than 255 * HMAC length. HKDF implementations\n+         *         will also enforce that a {code null} info value is treated as\n+         *         zero-length byte array.\n@@ -132,2 +136,2 @@\n-                extractOnly(), info,\n-                length);\n+                    extractOnly(), info,\n+                    length);\n@@ -142,1 +146,2 @@\n-         * the existing list of values or creates a new list if there is none yet.\n+         * the existing list of values or creates a new list if there is none\n+         * yet.\n@@ -145,1 +150,1 @@\n-         *     the input keying material (IKM) value\n+         *         the input keying material (IKM) value\n@@ -150,1 +155,1 @@\n-         *     if the {@code ikm} argument is null\n+         *         if the {@code ikm} argument is null\n@@ -164,1 +169,2 @@\n-         * the existing list of values or creates a new list if there is none yet.\n+         * the existing list of values or creates a new list if there is none\n+         * yet.\n@@ -167,1 +173,1 @@\n-         *     the input keying material (IKM) value\n+         *         the input keying material (IKM) value\n@@ -172,1 +178,1 @@\n-         *     if the {@code ikm} argument is null\n+         *         if the {@code ikm} argument is null\n@@ -192,1 +198,1 @@\n-         *     the salt value\n+         *         the salt value\n@@ -197,1 +203,1 @@\n-         *     if the {@code salt} is null\n+         *         if the {@code salt} is null\n@@ -214,1 +220,1 @@\n-         *     the salt value\n+         *         the salt value\n@@ -219,1 +225,1 @@\n-         *     if the {@code salt} is null\n+         *         if the {@code salt} is null\n@@ -245,1 +251,1 @@\n-     *     the pseudorandom key (PRK); must not be {@code null}\n+     *         the pseudorandom key (PRK); must not be {@code null}\n@@ -247,3 +253,3 @@\n-     *     the optional context and application specific information (may be\n-     *     {@code null}); the byte array is copied to prevent subsequent\n-     *     modification\n+     *         the optional context and application specific information (may be\n+     *         {@code null}); the byte array is copied to prevent subsequent\n+     *         modification\n@@ -251,6 +257,2 @@\n-     *     the length of the output keying material (must be greater than 0)\n-     *\n-     * @implNote HKDF implementations will enforce that the length is not greater\n-     * than 255 * HMAC length. Implementations will also enforce that the prk argument\n-     * is at least as many bytes as the HMAC length. Implementations will also\n-     * enforce that a {code null} info value is treated as zero-length byte array.\n+     *         the length of the output keying material (must be greater than\n+     *         0)\n@@ -261,1 +263,1 @@\n-     *     if the {@code prk} argument is {@code null}\n+     *         if the {@code prk} argument is {@code null}\n@@ -263,1 +265,6 @@\n-     *     if {@code length} is not greater than 0\n+     *         if {@code length} is not greater than 0\n+     * @implNote HKDF implementations will enforce that the length is\n+     *         not greater than 255 * HMAC length. Implementations will also\n+     *         enforce that the prk argument is at least as many bytes as the\n+     *         HMAC length. Implementations will also enforce that a {code null}\n+     *         info value is treated as zero-length byte array.\n@@ -297,2 +304,2 @@\n-         * @implNote An HKDF implementation should concatenate the input keying\n-         * materials into a single value to be used in HKDF-Extract.\n+         * @return the unmodifiable {@code List} of input keying material\n+         *         values\n@@ -300,1 +307,3 @@\n-         * @return the unmodifiable {@code List} of input keying material values\n+         * @implNote An HKDF implementation should concatenate the input\n+         *         keying materials into a single value to be used in\n+         *         HKDF-Extract.\n@@ -310,6 +319,2 @@\n-         * Salt values added by {@link Builder#addSalt(byte[])}\n-         * are converted to a {@code SecretKeySpec} object. Empty arrays are\n-         * discarded.\n-         *\n-         * @implNote An HKDF implementation should concatenate the salt into a\n-         * single value to be used in HKDF-Extract.\n+         * Salt values added by {@link Builder#addSalt(byte[])} are converted to\n+         * a {@code SecretKeySpec} object. Empty arrays are discarded.\n@@ -318,0 +323,3 @@\n+         *\n+         * @implNote An HKDF implementation should concatenate the salt\n+         *         into a single value to be used in HKDF-Extract.\n@@ -341,3 +349,3 @@\n-         *     the pseudorandom key (PRK); in the case of {@code ExtractThenExpand},\n-         *     the {@code prk} argument may be {@null} since the output of\n-         *     extract phase is used\n+         *         the pseudorandom key (PRK); in the case of\n+         *         {@code ExtractThenExpand}, the {@code prk} argument may be\n+         *         {@null} since the output of extract phase is used\n@@ -345,3 +353,3 @@\n-         *     the optional context and application specific information (may be\n-         *     {@code null}); the byte array is copied to prevent subsequent\n-         *     modification\n+         *         the optional context and application specific information\n+         *         (may be {@code null}); the byte array is copied to prevent\n+         *         subsequent modification\n@@ -349,1 +357,1 @@\n-         *     the length of the output keying material\n+         *         the length of the output keying material\n@@ -352,1 +360,1 @@\n-         *     if {@code length} not greater than 0\n+         *         if {@code length} not greater than 0\n@@ -377,1 +385,1 @@\n-         *     information, or {@code null} if not specified\n+         *         information, or {@code null} if not specified\n@@ -408,1 +416,1 @@\n-         *     a pre-generated {@code Extract}\n+         *         a pre-generated {@code Extract}\n@@ -410,3 +418,3 @@\n-         *     the optional context and application specific information (may be\n-         *     {@code null}); the byte array is copied to prevent subsequent\n-         *     modification\n+         *         the optional context and application specific information\n+         *         (may be {@code null}); the byte array is copied to prevent\n+         *         subsequent modification\n@@ -414,1 +422,1 @@\n-         *     the length of the output keying material\n+         *         the length of the output keying material\n@@ -417,1 +425,1 @@\n-         *     if {@code length} is not greater than 0\n+         *         if {@code length} is not greater than 0\n@@ -437,2 +445,2 @@\n-         * @implNote An HKDF implementation should concatenate the input keying\n-         * materials into a single value to be used in the HKDF-Extract phase.\n+         * @return the unmodifiable {@code List} of input keying material\n+         *         values\n@@ -440,1 +448,3 @@\n-         * @return the unmodifiable {@code List} of input keying material values\n+         * @implNote An HKDF implementation should concatenate the input\n+         *         keying materials into a single value to be used in the\n+         *         HKDF-Extract phase.\n@@ -450,6 +460,2 @@\n-         * Salt values added by {@link Builder#addSalt(byte[])}\n-         * are converted to a {@code SecretKeySpec} object. Empty arrays are\n-         * discarded.\n-         *\n-         * @implNote An HKDF implementation should concatenate the salt into a\n-         * single value to be used in the HKDF-Extract phase.\n+         * Salt values added by {@link Builder#addSalt(byte[])} are converted to\n+         * a {@code SecretKeySpec} object. Empty arrays are discarded.\n@@ -458,0 +464,3 @@\n+         *\n+         * @implNote An HKDF implementation should concatenate the salt\n+         *         into a single value to be used in the HKDF-Extract phase.\n@@ -467,1 +476,1 @@\n-         *     information, or {@code null} if not specified\n+         *         information, or {@code null} if not specified\n","filename":"src\/java.base\/share\/classes\/javax\/crypto\/spec\/HKDFParameterSpec.java","additions":81,"deletions":72,"binary":false,"changes":153,"status":"modified"}]}