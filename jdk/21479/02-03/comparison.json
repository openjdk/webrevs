{"files":[{"patch":"@@ -37,0 +37,1 @@\n+import java.awt.event.WindowAdapter;\n@@ -81,1 +82,1 @@\n-class MyFrame extends Frame implements ActionListener, WindowListener {\n+class MyFrame extends Frame implements ActionListener {\n@@ -97,1 +98,10 @@\n-        addWindowListener(this);\n+        addWindowListener(new WindowAdapter() {\n+            @Override\n+            public void windowActivated(WindowEvent e) {\n+                mc1.requestFocusInWindow();\n+            }\n+            @Override\n+            public void windowDeactivated(WindowEvent e) {\n+                mc2.requestFocusInWindow();\n+            }\n+        });\n@@ -107,23 +117,0 @@\n-\n-    public void windowOpened(WindowEvent e) {\n-    }\n-\n-    public void windowClosing(WindowEvent e) {\n-    }\n-\n-    public void windowClosed(WindowEvent e) {\n-    }\n-\n-    public void windowIconified(WindowEvent e) {\n-    }\n-\n-    public void windowDeiconified(WindowEvent e) {\n-    }\n-\n-    public void windowActivated(WindowEvent e) {\n-        mc1.requestFocusInWindow();\n-    }\n-\n-    public void windowDeactivated(WindowEvent e) {\n-        mc2.requestFocusInWindow();\n-    }\n","filename":"test\/jdk\/java\/awt\/Container\/ActivateOnFocusTest.java","additions":12,"deletions":25,"binary":false,"changes":37,"status":"modified"},{"patch":"@@ -138,23 +138,21 @@\n-        b.addActionListener(new ActionListener() {\n-            public void actionPerformed(ActionEvent ev) {\n-                Frame ff = new Frame(\"Non-modal-excluded frame\");\n-                ff.setBounds(400, 0, 200, 100);\n-                ff.addWindowListener(wl);\n-                ff.addMouseListener(ml);\n-                ff.addKeyListener(kl);\n-                ff.setVisible(true);\n-\n-                Dialog dd = new Dialog(ff, \"Non-modal-excluded dialog\", false);\n-                dd.setBounds(500, 100, 200, 100);\n-                dd.addWindowListener(wl);\n-                dd.addMouseListener(ml);\n-                dd.addKeyListener(kl);\n-                dd.setVisible(true);\n-\n-                Dialog d = new Dialog(f, \"Modal dialog\", true);\n-                d.setBounds(600, 200, 200, 100);\n-                d.addWindowListener(wl);\n-                d.addMouseListener(ml);\n-                d.addKeyListener(kl);\n-                d.setVisible(true);\n-            }\n+        b.addActionListener(ev -> {\n+            Frame ff = new Frame(\"Non-modal-excluded frame\");\n+            ff.setBounds(400, 0, 200, 100);\n+            ff.addWindowListener(wl);\n+            ff.addMouseListener(ml);\n+            ff.addKeyListener(kl);\n+            ff.setVisible(true);\n+\n+            Dialog dd = new Dialog(ff, \"Non-modal-excluded dialog\", false);\n+            dd.setBounds(500, 100, 200, 100);\n+            dd.addWindowListener(wl);\n+            dd.addMouseListener(ml);\n+            dd.addKeyListener(kl);\n+            dd.setVisible(true);\n+\n+            Dialog d = new Dialog(f, \"Modal dialog\", true);\n+            d.setBounds(600, 200, 200, 100);\n+            d.addWindowListener(wl);\n+            d.addMouseListener(ml);\n+            d.addKeyListener(kl);\n+            d.setVisible(true);\n@@ -165,42 +163,38 @@\n-        c.addActionListener(new ActionListener() {\n-            public void actionPerformed(ActionEvent ev) {\n-                JFrame ff = new JFrame(\"Modal-excluded frame\");\n-                ff.setBounds(400, 0, 200, 100);\n-                ff.addWindowListener(wl);\n-                ff.addMouseListener(ml);\n-                ff.addKeyListener(kl);\n-                JMenuBar mb = new JMenuBar();\n-                JMenu m = new JMenu(\"Test menu\");\n-                m.add(\"Test menu item\");\n-                m.add(\"Test menu item\");\n-                m.add(\"Test menu item\");\n-                m.add(\"Test menu item\");\n-                m.add(\"Test menu item\");\n-                m.add(\"Test menu item\");\n-                m.add(\"Test menu item\");\n-                m.add(\"Test menu item\");\n-                m.add(\"Test menu item\");\n-                mb.add(m);\n-                ff.setJMenuBar(mb);\n-                \/\/ 1: set visible\n-                ff.setVisible(true);\n-\n-                Dialog dd = new Dialog(ff, \"Modal-excluded dialog\", false);\n-                dd.setBounds(500, 100, 200, 100);\n-                dd.addWindowListener(wl);\n-                dd.addMouseListener(ml);\n-                dd.addKeyListener(kl);\n-                dd.setVisible(true);\n-                \/\/ dialog should be modal excluded as being a child of the modal excluded frame\n-                \/\/          SunToolkit.setModalExcluded(dd);\n-\n-                \/\/ 2: set modal excluded\n-                SunToolkit.setModalExcluded(ff);\n-\n-                Dialog d = new Dialog(f, \"Modal dialog\", true);\n-                d.setBounds(600, 200, 200, 100);\n-                d.addWindowListener(wl);\n-                d.addMouseListener(ml);\n-                d.addKeyListener(kl);\n-                d.setVisible(true);\n-            }\n+        c.addActionListener(ev -> {\n+            JFrame ff = new JFrame(\"Modal-excluded frame\");\n+            ff.setBounds(400, 0, 200, 100);\n+            ff.addWindowListener(wl);\n+            ff.addMouseListener(ml);\n+            ff.addKeyListener(kl);\n+            JMenuBar mb = new JMenuBar();\n+            JMenu m = new JMenu(\"Test menu\");\n+            m.add(\"Test menu item\");\n+            m.add(\"Test menu item\");\n+            m.add(\"Test menu item\");\n+            m.add(\"Test menu item\");\n+            m.add(\"Test menu item\");\n+            m.add(\"Test menu item\");\n+            m.add(\"Test menu item\");\n+            m.add(\"Test menu item\");\n+            m.add(\"Test menu item\");\n+            mb.add(m);\n+            ff.setJMenuBar(mb);\n+            \/\/ 1: set visible\n+            ff.setVisible(true);\n+\n+            Dialog dd = new Dialog(ff, \"Modal-excluded dialog\", false);\n+            dd.setBounds(500, 100, 200, 100);\n+            dd.addWindowListener(wl);\n+            dd.addMouseListener(ml);\n+            dd.addKeyListener(kl);\n+            dd.setVisible(true);\n+\n+            \/\/ 2: set modal excluded\n+            SunToolkit.setModalExcluded(ff);\n+\n+            Dialog d = new Dialog(f, \"Modal dialog\", true);\n+            d.setBounds(600, 200, 200, 100);\n+            d.addWindowListener(wl);\n+            d.addMouseListener(ml);\n+            d.addKeyListener(kl);\n+            d.setVisible(true);\n@@ -211,30 +205,28 @@\n-        c1.addActionListener(new ActionListener() {\n-            public void actionPerformed(ActionEvent ev) {\n-                \/\/ 1: create dialog\n-                Dialog d = new Dialog(f, \"Modal dialog\", true);\n-                d.setBounds(600, 200, 200, 100);\n-                d.addWindowListener(wl);\n-                d.addMouseListener(ml);\n-                d.addKeyListener(kl);\n-\n-                \/\/ 2: create frame\n-                Frame ff = new Frame(\"Modal-excluded frame\");\n-                \/\/ 3: set modal excluded\n-                SunToolkit.setModalExcluded(ff);\n-                ff.setBounds(400, 0, 200, 100);\n-                ff.addWindowListener(wl);\n-                ff.addMouseListener(ml);\n-                ff.addKeyListener(kl);\n-                \/\/ 4: show frame\n-                ff.setVisible(true);\n-\n-                Dialog dd = new Dialog(ff, \"Modal-excluded dialog\", false);\n-                dd.setBounds(500, 100, 200, 100);\n-                dd.addWindowListener(wl);\n-                dd.addMouseListener(ml);\n-                dd.addKeyListener(kl);\n-                dd.setVisible(true);\n-\n-                \/\/ 5: show dialog\n-                d.setVisible(true);\n-            }\n+        c1.addActionListener(ev -> {\n+            \/\/ 1: create dialog\n+            Dialog d = new Dialog(f, \"Modal dialog\", true);\n+            d.setBounds(600, 200, 200, 100);\n+            d.addWindowListener(wl);\n+            d.addMouseListener(ml);\n+            d.addKeyListener(kl);\n+\n+            \/\/ 2: create frame\n+            Frame ff = new Frame(\"Modal-excluded frame\");\n+            \/\/ 3: set modal excluded\n+            SunToolkit.setModalExcluded(ff);\n+            ff.setBounds(400, 0, 200, 100);\n+            ff.addWindowListener(wl);\n+            ff.addMouseListener(ml);\n+            ff.addKeyListener(kl);\n+            \/\/ 4: show frame\n+            ff.setVisible(true);\n+\n+            Dialog dd = new Dialog(ff, \"Modal-excluded dialog\", false);\n+            dd.setBounds(500, 100, 200, 100);\n+            dd.addWindowListener(wl);\n+            dd.addMouseListener(ml);\n+            dd.addKeyListener(kl);\n+            dd.setVisible(true);\n+\n+            \/\/ 5: show dialog\n+            d.setVisible(true);\n@@ -245,23 +237,21 @@\n-        d.addActionListener(new ActionListener() {\n-            public void actionPerformed(ActionEvent ev) {\n-                Frame ff = new Frame(\"Modal-excluded frame\");\n-                ff.setBounds(400, 0, 200, 100);\n-                ff.addWindowListener(wl);\n-                ff.addMouseListener(ml);\n-                ff.addKeyListener(kl);\n-                \/\/ 1: set modal excluded (peer is not created yet)\n-                SunToolkit.setModalExcluded(ff);\n-                \/\/ 2: set visible\n-                ff.setVisible(true);\n-\n-                Dialog dd = new Dialog(ff, \"Modal-excluded dialog\", false);\n-                dd.setBounds(500, 100, 200, 100);\n-                dd.addWindowListener(wl);\n-                dd.addMouseListener(ml);\n-                dd.addKeyListener(kl);\n-                dd.setVisible(true);\n-                SunToolkit.setModalExcluded(dd);\n-\n-                Dialog d = new FileDialog(f, \"File dialog\");\n-                d.setVisible(true);\n-            }\n+        d.addActionListener(ev -> {\n+            Frame ff = new Frame(\"Modal-excluded frame\");\n+            ff.setBounds(400, 0, 200, 100);\n+            ff.addWindowListener(wl);\n+            ff.addMouseListener(ml);\n+            ff.addKeyListener(kl);\n+            \/\/ 1: set modal excluded (peer is not created yet)\n+            SunToolkit.setModalExcluded(ff);\n+            \/\/ 2: set visible\n+            ff.setVisible(true);\n+\n+            Dialog dd = new Dialog(ff, \"Modal-excluded dialog\", false);\n+            dd.setBounds(500, 100, 200, 100);\n+            dd.addWindowListener(wl);\n+            dd.addMouseListener(ml);\n+            dd.addKeyListener(kl);\n+            dd.setVisible(true);\n+            SunToolkit.setModalExcluded(dd);\n+\n+            Dialog d1 = new FileDialog(f, \"File dialog\");\n+            d1.setVisible(true);\n@@ -272,24 +262,20 @@\n-        e.addActionListener(new ActionListener() {\n-            public void actionPerformed(ActionEvent ev) {\n-                Frame ff = new Frame(\"Modal-excluded frame\");\n-                ff.setBounds(400, 0, 200, 100);\n-                ff.addWindowListener(wl);\n-                ff.addMouseListener(ml);\n-                ff.addKeyListener(kl);\n-                ff.setVisible(true);\n-                SunToolkit.setModalExcluded(ff);\n-\n-                Dialog dd = new Dialog(ff, \"Modal-excluded dialog\", false);\n-                dd.setBounds(500, 100, 200, 100);\n-                dd.addWindowListener(wl);\n-                dd.addMouseListener(ml);\n-                dd.addKeyListener(kl);\n-                dd.setVisible(true);\n-                \/\/ dialog should be modal excluded as being child of modal excluded frame\n-                \/\/          SunToolkit.setModalExcluded(dd);\n-\n-                JobAttributes jobAttributes = new JobAttributes();\n-                jobAttributes.setDialog(JobAttributes.DialogType.NATIVE);\n-                PageAttributes pageAttributes = new PageAttributes();\n-                PrintJob job = Toolkit.getDefaultToolkit().getPrintJob(f, \"Test\", jobAttributes, pageAttributes);\n-            }\n+        e.addActionListener(ev -> {\n+            Frame ff = new Frame(\"Modal-excluded frame\");\n+            ff.setBounds(400, 0, 200, 100);\n+            ff.addWindowListener(wl);\n+            ff.addMouseListener(ml);\n+            ff.addKeyListener(kl);\n+            ff.setVisible(true);\n+            SunToolkit.setModalExcluded(ff);\n+\n+            Dialog dd = new Dialog(ff, \"Modal-excluded dialog\", false);\n+            dd.setBounds(500, 100, 200, 100);\n+            dd.addWindowListener(wl);\n+            dd.addMouseListener(ml);\n+            dd.addKeyListener(kl);\n+            dd.setVisible(true);\n+\n+            JobAttributes jobAttributes = new JobAttributes();\n+            jobAttributes.setDialog(JobAttributes.DialogType.NATIVE);\n+            PageAttributes pageAttributes = new PageAttributes();\n+            PrintJob job = Toolkit.getDefaultToolkit().getPrintJob(f, \"Test\", jobAttributes, pageAttributes);\n@@ -300,27 +286,23 @@\n-        g.addActionListener(new ActionListener() {\n-            public void actionPerformed(ActionEvent ev) {\n-                Frame ff = new Frame(\"Modal-excluded frame\");\n-                ff.setBounds(400, 0, 200, 100);\n-                ff.addWindowListener(wl);\n-                ff.addMouseListener(ml);\n-                ff.addKeyListener(kl);\n-                ff.setVisible(true);\n-                SunToolkit.setModalExcluded(ff);\n-                ff.dispose();\n-                \/\/ modal excluded must still be alive\n-                ff.setVisible(true);\n-\n-                Dialog dd = new Dialog(ff, \"Modal-excluded dialog\", false);\n-                dd.setBounds(500, 100, 200, 100);\n-                dd.addWindowListener(wl);\n-                dd.addMouseListener(ml);\n-                dd.addKeyListener(kl);\n-                dd.setVisible(true);\n-                \/\/ dialog should be modal excluded as being child of modal excluded frame\n-                \/\/          SunToolkit.setModalExcluded(dd);\n-\n-                JobAttributes jobAttributes = new JobAttributes();\n-                jobAttributes.setDialog(JobAttributes.DialogType.COMMON);\n-                PageAttributes pageAttributes = new PageAttributes();\n-                PrintJob job = Toolkit.getDefaultToolkit().getPrintJob(f, \"Test\", jobAttributes, pageAttributes);\n-            }\n+        g.addActionListener(ev -> {\n+            Frame ff = new Frame(\"Modal-excluded frame\");\n+            ff.setBounds(400, 0, 200, 100);\n+            ff.addWindowListener(wl);\n+            ff.addMouseListener(ml);\n+            ff.addKeyListener(kl);\n+            ff.setVisible(true);\n+            SunToolkit.setModalExcluded(ff);\n+            ff.dispose();\n+            \/\/ modal excluded must still be alive\n+            ff.setVisible(true);\n+\n+            Dialog dd = new Dialog(ff, \"Modal-excluded dialog\", false);\n+            dd.setBounds(500, 100, 200, 100);\n+            dd.addWindowListener(wl);\n+            dd.addMouseListener(ml);\n+            dd.addKeyListener(kl);\n+            dd.setVisible(true);\n+\n+            JobAttributes jobAttributes = new JobAttributes();\n+            jobAttributes.setDialog(JobAttributes.DialogType.COMMON);\n+            PageAttributes pageAttributes = new PageAttributes();\n+            PrintJob job = Toolkit.getDefaultToolkit().getPrintJob(f, \"Test\", jobAttributes, pageAttributes);\n","filename":"test\/jdk\/java\/awt\/Dialog\/ModalExcludedTest.java","additions":151,"deletions":169,"binary":false,"changes":320,"status":"modified"}]}