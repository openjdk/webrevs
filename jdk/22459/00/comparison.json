{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1995, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1995, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -49,2 +49,3 @@\n-    String contentType;\n-    InputStream is;\n+    private final File file;\n+    private InputStream is;\n+    private List<String> directoryListing;\n@@ -52,5 +53,2 @@\n-    File file;\n-    String filename;\n-    boolean isDirectory = false;\n-    boolean exists = false;\n-    List<String> files;\n+    private boolean isDirectory = false;\n+    private boolean exists = false;\n@@ -58,2 +56,2 @@\n-    long length = -1;\n-    long lastModified = 0;\n+    private long length = -1;\n+    private long lastModified = 0;\n@@ -74,13 +72,9 @@\n-            try {\n-                filename = file.toString();\n-                isDirectory = file.isDirectory();\n-                if (isDirectory) {\n-                    String[] fileList = file.list();\n-                    if (fileList == null)\n-                        throw new FileNotFoundException(filename + \" exists, but is not accessible\");\n-                    files = Arrays.<String>asList(fileList);\n-                } else {\n-                    is = new BufferedInputStream(new FileInputStream(filename));\n-                }\n-            } catch (IOException e) {\n-                throw e;\n+\n+            isDirectory = file.isDirectory();\n+            if (isDirectory) {\n+                String[] fileList = file.list();\n+                if (fileList == null)\n+                    throw new FileNotFoundException(file.getPath() + \" exists, but is not accessible\");\n+                directoryListing = Arrays.asList(fileList);\n+            } else {\n+                is = new BufferedInputStream(new FileInputStream(file.getPath()));\n@@ -88,0 +82,1 @@\n+\n@@ -112,1 +107,1 @@\n-                contentType = map.getContentTypeFor(filename);\n+                String contentType = map.getContentTypeFor(file.getPath());\n@@ -182,3 +177,0 @@\n-        int iconHeight;\n-        int iconWidth;\n-\n@@ -189,1 +181,0 @@\n-                FileNameMap map = java.net.URLConnection.getFileNameMap();\n@@ -191,4 +182,2 @@\n-                StringBuilder sb = new StringBuilder();\n-\n-                if (files == null) {\n-                    throw new FileNotFoundException(filename);\n+                if (directoryListing == null) {\n+                    throw new FileNotFoundException(file.getPath());\n@@ -197,1 +186,1 @@\n-                files.sort(Collator.getInstance());\n+                directoryListing.sort(Collator.getInstance());\n@@ -199,2 +188,2 @@\n-                for (int i = 0 ; i < files.size() ; i++) {\n-                    String fileName = files.get(i);\n+                StringBuilder sb = new StringBuilder();\n+                for (String fileName : directoryListing) {\n@@ -207,1 +196,1 @@\n-                throw new FileNotFoundException(filename);\n+                throw new FileNotFoundException(file.getPath());\n","filename":"src\/java.base\/share\/classes\/sun\/net\/www\/protocol\/file\/FileURLConnection.java","additions":25,"deletions":36,"binary":false,"changes":61,"status":"modified"}]}