{"files":[{"patch":"@@ -627,0 +627,18 @@\n+    \/**\n+     * Modifies start position of the text rectangle depending on presence of\n+     * RadiobuttonMenuItem bullet or JCheckboxMenuItem checkmark along with\n+     * ImageIcon\n+     * Some LookAndFeel can chose to return the default position.\n+     *\n+     * @param rect the text rectangle\n+     * @param menuItem Current menuItem\n+     * @param checkIcon ImageIcon to be used\n+     * @param useCheckAndArrow presence of bullet\/checkmark\n+     * @return rect modified text rectangle\n+     *\/\n+    protected Rectangle setTextPosition(Rectangle rect, JMenuItem menuItem,\n+                                        Icon checkIcon,\n+                                        boolean useCheckAndArrow) {\n+        return rect;\n+    }\n+\n@@ -662,12 +680,4 @@\n-        if (UIManager.getLookAndFeel().getName().equals(\"Windows\")\n-            && (Integer.parseInt(System.getProperty(\"os.name\").\n-                replaceAll(\"[^0-9]\", \"\")) >= 11)\n-            && lh.getCheckIcon() != null && lh.useCheckAndArrow()) {\n-            Rectangle rect = lr.getTextRect();\n-            if (menuItem.getIcon() != null) {\n-                rect.x = rect.x + checkIcon.getIconWidth() \/ 2;\n-            } else {\n-                rect.x = rect.x - checkIcon.getIconWidth() \/ 2;\n-            }\n-            lr.setTextRect(rect);\n-        }\n+        Rectangle rect = lr.getTextRect();\n+        rect = setTextPosition(rect, menuItem, lh.getCheckIcon(),\n+                               lh.useCheckAndArrow());\n+        lr.setTextRect(rect);\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/plaf\/basic\/BasicMenuItemUI.java","additions":22,"deletions":12,"binary":false,"changes":34,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,0 +33,1 @@\n+import javax.swing.Icon;\n@@ -74,0 +75,10 @@\n+\n+    @Override\n+    protected  Rectangle setTextPosition(Rectangle rect, JMenuItem menuItem,\n+                                         Icon checkIcon, boolean useCheckAndArrow) {\n+        if (WindowsMenuItemUI.isVistaPainting()) {\n+            return WindowsMenuItemUI.setTextPosition(accessor, rect, menuItem, checkIcon, useCheckAndArrow);\n+        }\n+        return super.setTextPosition(rect, menuItem, checkIcon, useCheckAndArrow);\n+    }\n+\n","filename":"src\/java.desktop\/windows\/classes\/com\/sun\/java\/swing\/plaf\/windows\/WindowsCheckBoxMenuItemUI.java","additions":12,"deletions":1,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -36,0 +36,1 @@\n+import javax.swing.Icon;\n@@ -164,0 +165,26 @@\n+    @Override\n+    protected Rectangle setTextPosition(Rectangle rect, JMenuItem menuItem,\n+                                        Icon checkIcon, boolean useCheckAndArrow) {\n+        if (WindowsMenuItemUI.isVistaPainting()) {\n+            return WindowsMenuItemUI.setTextPosition(accessor, rect, menuItem,\n+                                                     checkIcon, useCheckAndArrow);\n+        }\n+        return super.setTextPosition(rect, menuItem, checkIcon, useCheckAndArrow);\n+    }\n+\n+\n+    static Rectangle setTextPosition(WindowsMenuItemUIAccessor menuItemUI,\n+                                     Rectangle rect, JMenuItem menuItem,\n+                                     Icon checkIcon, boolean useCheckAndArrow) {\n+        boolean isWindows11OrLater = Integer.parseInt(System.getProperty(\"os.name\").\n+                replaceAll(\"[^0-9]\", \"\")) >= 11;\n+        if (isWindows11OrLater && checkIcon != null && useCheckAndArrow) {\n+            if (menuItem.getIcon() != null) {\n+                rect.x = rect.x + checkIcon.getIconWidth() \/ 2;\n+            } else {\n+                rect.x = rect.x - checkIcon.getIconWidth() \/ 2;\n+            }\n+        }\n+        return rect;\n+    }\n+\n","filename":"src\/java.desktop\/windows\/classes\/com\/sun\/java\/swing\/plaf\/windows\/WindowsMenuItemUI.java","additions":27,"deletions":0,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -130,0 +130,12 @@\n+    \/**\n+     * Sets the text position in popup MenuItem.\n+     *\/\n+    protected Rectangle setTextPosition(Rectangle rect, JMenuItem menuItem,\n+                                        Icon checkIcon, boolean useCheckAndArrow) {\n+        if (WindowsMenuItemUI.isVistaPainting()) {\n+            return WindowsMenuItemUI.setTextPosition(accessor, rect, menuItem,\n+                                                     checkIcon, useCheckAndArrow);\n+        }\n+        return super.setTextPosition(rect, menuItem, checkIcon, useCheckAndArrow);\n+    }\n+\n","filename":"src\/java.desktop\/windows\/classes\/com\/sun\/java\/swing\/plaf\/windows\/WindowsMenuUI.java","additions":13,"deletions":1,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,0 +33,1 @@\n+import javax.swing.Icon;\n@@ -75,0 +76,9 @@\n+    @Override\n+    protected  Rectangle setTextPosition(Rectangle rect, JMenuItem menuItem,\n+                                         Icon checkIcon, boolean useCheckAndArrow) {\n+        if (WindowsMenuItemUI.isVistaPainting()) {\n+            return WindowsMenuItemUI.setTextPosition(accessor, rect, menuItem, checkIcon, useCheckAndArrow);\n+        }\n+        return super.setTextPosition(rect, menuItem, checkIcon, useCheckAndArrow);\n+    }\n+\n","filename":"src\/java.desktop\/windows\/classes\/com\/sun\/java\/swing\/plaf\/windows\/WindowsRadioButtonMenuItemUI.java","additions":11,"deletions":1,"binary":false,"changes":12,"status":"modified"}]}