{"files":[{"patch":"@@ -1466,1 +1466,1 @@\n-bool FileMapRegion::check_region_crc() const {\n+bool FileMapRegion::check_region_crc(char* base) const {\n@@ -1475,2 +1475,2 @@\n-  assert(mapped_base() != nullptr, \"must be initialized\");\n-  int crc = ClassLoader::crc32(0, mapped_base(), (jint)sz);\n+  assert(base != nullptr, \"must be initialized\");\n+  int crc = ClassLoader::crc32(0, base, (jint)sz);\n@@ -1761,4 +1761,1 @@\n-  r->set_mapped_from_file(false);\n-  r->set_mapped_base(base);\n-\n-  if (VerifySharedSpaces && !r->check_region_crc()) {\n+  if (VerifySharedSpaces && !r->check_region_crc(base)) {\n@@ -1768,0 +1765,3 @@\n+  r->set_mapped_from_file(false);\n+  r->set_mapped_base(base);\n+\n@@ -1804,0 +1804,1 @@\n+      return MAP_ARCHIVE_SUCCESS;\n@@ -1818,0 +1819,5 @@\n+\n+    if (VerifySharedSpaces && !r->check_region_crc(requested_addr)) {\n+      return MAP_ARCHIVE_OTHER_FAILURE;\n+    }\n+\n@@ -1820,1 +1826,0 @@\n-  }\n@@ -1822,2 +1827,1 @@\n-  if (VerifySharedSpaces && !r->check_region_crc()) {\n-    return MAP_ARCHIVE_OTHER_FAILURE;\n+    return MAP_ARCHIVE_SUCCESS;\n@@ -1825,2 +1829,0 @@\n-\n-  return MAP_ARCHIVE_SUCCESS;\n@@ -1844,2 +1846,1 @@\n-  r->set_mapped_base(bitmap_base);\n-  if (VerifySharedSpaces && !r->check_region_crc()) {\n+  if (VerifySharedSpaces && !r->check_region_crc(bitmap_base)) {\n@@ -1854,0 +1855,1 @@\n+  r->set_mapped_base(bitmap_base);\n@@ -2129,2 +2131,1 @@\n-  r->set_mapped_base(base);\n-  if (VerifySharedSpaces && !r->check_region_crc()) {\n+  if (VerifySharedSpaces && !r->check_region_crc(base)) {\n@@ -2136,0 +2137,2 @@\n+  r->set_mapped_base(base);\n+\n","filename":"src\/hotspot\/share\/cds\/filemap.cpp","additions":19,"deletions":16,"binary":false,"changes":35,"status":"modified"},{"patch":"@@ -173,1 +173,1 @@\n-  bool check_region_crc() const;\n+  bool check_region_crc(char* base) const;\n","filename":"src\/hotspot\/share\/cds\/filemap.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}