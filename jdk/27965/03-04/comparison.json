{"files":[{"patch":"@@ -1061,4 +1061,2 @@\n-  if (CDSConfig::is_dumping_preimage_static_archive()) {\n-      return _preimage_static_archive_dumped == 1;\n-  }\n-  return false;\n+  assert(CDSConfig::is_dumping_preimage_static_archive(), \"Required\");\n+  return _preimage_static_archive_dumped == 1;\n@@ -1068,6 +1066,7 @@\n-  assert(CDSConfig::is_dumping_preimage_static_archive(), \"Required\");\n-  \/\/ Ensure this function is only executed once.  Multiple invocations may happen\n-  \/\/ via JCmd, during VM exit or other means (in the future) from different threads \n-  \/\/ and possibly concurrently.\n-  if (AtomicAccess::cmpxchg(&_preimage_static_archive_dumped, 0, 1) != 0) {\n-    return;\n+  if (CDSConfig::is_dumping_preimage_static_archive()) {\n+    \/\/ When dumping to the AOT configuration file ensure this function is only executed once.\n+    \/\/ Multiple invocations may happen via JCmd, during VM exit or other means (in the future)\n+    \/\/ from different threads and possibly concurrently.\n+    if (AtomicAccess::cmpxchg(&_preimage_static_archive_dumped, 0, 1) != 0) {\n+      return;\n+    }\n","filename":"src\/hotspot\/share\/cds\/aotMetaspace.cpp","additions":9,"deletions":10,"binary":false,"changes":19,"status":"modified"}]}