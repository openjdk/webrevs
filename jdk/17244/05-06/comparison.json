{"files":[{"patch":"@@ -200,26 +200,0 @@\n-static void report_cache_size_error(const CodeHeapInfo& non_nmethod, const CodeHeapInfo& profiled,\n-                                    const CodeHeapInfo& non_profiled, size_t cache_size) {\n-  size_t total = non_nmethod.size;\n-\n-  err_msg message(\"NonNMethodCodeHeapSize (\" SIZE_FORMAT \"K)\", non_nmethod.size\/K);\n-  if (profiled.enabled) {\n-    total += profiled.size;\n-    message.append(\" + ProfiledCodeHeapSize (\" SIZE_FORMAT \"K)\", profiled.size\/K);\n-  }\n-\n-  if (non_profiled.enabled) {\n-    total += non_profiled.size;\n-    message.append(\" + NonProfiledCodeHeapSize (\" SIZE_FORMAT \"K)\", non_profiled.size\/K);\n-  }\n-  message.append(\" = \" SIZE_FORMAT \"K\", total\/K);\n-\n-  if (total > cache_size) {\n-    message.append(\" is greater than ReservedCodeCacheSize (\" SIZE_FORMAT \"K).\", cache_size\/K);\n-  }\n-  else {\n-    message.append(\" is not equal to ReservedCodeCacheSize (\" SIZE_FORMAT \"K).\", cache_size\/K);\n-  }\n-\n-  vm_exit_during_initialization(\"Invalid code heap sizes\", message);\n-}\n-\n@@ -309,1 +283,1 @@\n-  \/\/ ReservedCodeCacheSize was set explicitly, so report error and abort if it doesn't match segment sizes.\n+  \/\/ ReservedCodeCacheSize was set explicitly, so report an error and abort if it doesn't match the segment sizes\n@@ -311,1 +285,12 @@\n-    report_cache_size_error(non_nmethod, profiled, non_profiled, cache_size);\n+    err_msg message(\"NonNMethodCodeHeapSize (\" SIZE_FORMAT \"K)\", non_nmethod.size\/K);\n+    if (profiled.enabled) {\n+      message.append(\" + ProfiledCodeHeapSize (\" SIZE_FORMAT \"K)\", profiled.size\/K);\n+    }\n+    if (non_profiled.enabled) {\n+      message.append(\" + NonProfiledCodeHeapSize (\" SIZE_FORMAT \"K)\", non_profiled.size\/K);\n+    }\n+    message.append(\" = \" SIZE_FORMAT \"K\", total\/K);\n+    message.append((total > cache_size) ? \" is greater than \" : \" is less than \");\n+    message.append(\"ReservedCodeCacheSize (\" SIZE_FORMAT \"K).\", cache_size\/K);\n+\n+    vm_exit_during_initialization(\"Invalid code heap sizes\", message);\n","filename":"src\/hotspot\/share\/code\/codeCache.cpp","additions":13,"deletions":28,"binary":false,"changes":41,"status":"modified"}]}