{"files":[{"patch":"@@ -275,0 +275,9 @@\n+  size_t total = non_nmethod.size + profiled.size + non_profiled.size;\n+  if (total != cache_size && !cache_size_set) {\n+    log_info(codecache)(\"ReservedCodeCache size %lld changed to total segments size NonNMethod %lld NonProfiled %lld Profiled %lld = %lld\",\n+                        (long long) cache_size, (long long) non_nmethod.size, (long long) non_profiled.size,\n+                        (long long) profiled.size, (long long) total);\n+    \/\/ Adjust ReservedCodeCacheSize as necessary because it was not set explicitly\n+    cache_size = total;\n+  }\n+\n@@ -301,12 +310,4 @@\n-  size_t total = non_nmethod.size + profiled.size + non_profiled.size;\n-  if (total != cache_size) {\n-    if (cache_size_set) {\n-      report_cache_size_error(non_nmethod, profiled, non_profiled, cache_size);\n-      return;\n-    } else {\n-      log_info(codecache)(\"ReservedCodeCache size %lld changed to total segments size NonNMethod %lld NonProfiled %lld Profiled %lld = %lld\",\n-                          (long long) cache_size, (long long) non_nmethod.size,\n-                          (long long) non_profiled.size, (long long) profiled.size,\n-                          (long long) total);\n-      cache_size = total;\n-    }\n+  \/\/ ReservedCodeCacheSize was set explicitly, so report error and abort if it doesn't match segment sizes.\n+  if (total != cache_size && cache_size_set) {\n+    report_cache_size_error(non_nmethod, profiled, non_profiled, cache_size);\n+    return;\n","filename":"src\/hotspot\/share\/code\/codeCache.cpp","additions":13,"deletions":12,"binary":false,"changes":25,"status":"modified"}]}