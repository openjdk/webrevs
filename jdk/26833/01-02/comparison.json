{"files":[{"patch":"@@ -24,0 +24,1 @@\n+import java.io.File;\n@@ -25,1 +26,0 @@\n-import java.awt.image.BufferedImage;\n@@ -27,1 +27,0 @@\n-import java.awt.Graphics2D;\n@@ -33,0 +32,1 @@\n+import javax.imageio.ImageIO;\n@@ -71,4 +71,2 @@\n-            BufferedImage bi = new BufferedImage(size, size, BufferedImage.TYPE_INT_ARGB);\n-            final Graphics2D graphics = bi.createGraphics();\n-            desktopPane.paint(graphics);\n-            graphics.dispose();\n+            Rectangle rect = new Rectangle(p.x, p.y, size, size);\n+            BufferedImage img = robot.createScreenCapture(rect);\n@@ -77,0 +75,1 @@\n+            Color testColor = new Color(testRGB);\n@@ -78,2 +77,4 @@\n-                int rgbCW = bi.getRGB(i, size \/ 2);\n-                int rgbCH = bi.getRGB(size \/ 2, i);\n+                int rgbCW = img.getRGB(i, size \/ 2);\n+                int rgbCH = img.getRGB(size \/ 2, i);\n+                Color rgbCWColor = new Color(rgbCW);\n+                Color rgbCHColor = new Color(rgbCH);\n@@ -81,1 +82,6 @@\n-                if (rgbCW != testRGB || rgbCH != testRGB) {\n+                if (Math.abs(rgbCWColor.getRed() - testColor.getRed()) > tolerance\n+                    || Math.abs(rgbCWColor.getGreen() - testColor.getGreen()) > tolerance\n+                    || Math.abs(rgbCWColor.getBlue() - testColor.getBlue()) > tolerance\n+                    || Math.abs(rgbCHColor.getRed() - testColor.getRed()) > tolerance\n+                    || Math.abs(rgbCHColor.getGreen() - testColor.getGreen()) > tolerance\n+                    || Math.abs(rgbCHColor.getBlue() - testColor.getBlue()) > tolerance) {\n@@ -86,0 +92,1 @@\n+                    ImageIO.write(img, \"png\", new File(\"JInternalFrameDraggingTest.png\"));\n","filename":"test\/jdk\/javax\/swing\/JInternalFrame\/8160248\/JInternalFrameDraggingTest.java","additions":16,"deletions":9,"binary":false,"changes":25,"status":"modified"}]}