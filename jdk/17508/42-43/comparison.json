{"files":[{"patch":"@@ -133,0 +133,4 @@\n+\n+  Call r the smallest value not smaller than lo that satisfies bits. Since lo\n+  does not satisfy bits, lo < r (2.1)\n+\n@@ -135,3 +139,3 @@\n-  - lo[x] satisfies bits for 0 <= x < i (2.1)\n-  - zeros[i] = 0                        (2.2)\n-  - lo[i] = 0                           (2.3)\n+  - lo[x] satisfies bits for 0 <= x < i (2.2)\n+  - zeros[i] = 0                        (2.3)\n+  - lo[i]    = 0                        (2.4)\n@@ -141,3 +145,3 @@\n-  - v[x] = lo[x], for 0 <= x < i        (2.4)\n-  - v[i] = 1                            (2.5)\n-  - v[x] = ones[x], for x > i           (2.6)\n+  - v[x] = lo[x], for 0 <= x < i        (2.5)\n+  - v[i] = 1                            (2.6)\n+  - v[x] = ones[x], for x > i           (2.7)\n@@ -145,5 +149,1 @@\n-  We will prove that v is the smallest value not smaller than lo that\n-  satisfies bits.\n-\n-  Call r the smallest value not smaller than lo that satisfies bits. Since lo\n-  does not satisfy bits, lo < r (2.7)\n+  We will prove that v == r.\n@@ -153,3 +153,3 @@\n-    Trivially, lo < v since:\n-      lo[x] = v[x], for 0 <= x < i (according to 2.4)\n-      lo[i] < v[i] (according to 2.3 and 2.5, lo[i] == 0 < v[i] == 1)\n+    a.1. We have lo < v since:\n+      lo[x] == v[x], for 0 <= x < i (according to 2.5)\n+      lo[i] <  v[i] (according to 2.4 and 2.6, lo[i] == 0 < v[i] == 1)\n@@ -158,4 +158,10 @@\n-    As established above, the first (i + 1) bits of v satisfy bits.\n-    The remaining bits satisfy zeros, since any bit x > i such that zeros[x] == 1,\n-      v[x] == ones[x] == 0 (according to 2.6, we assume bits is not contradictory here)\n-    They also satisfy ones, since any bit j > i such that ones[x] == 1, v[x] == ones[x] == 1 (according to 2.6)\n+    a.2. We have v satisfies bits, this is because:\n+      v[x] satisfies bits for 0 <= x < i (according to 2.2 and 2.5)\n+      v[i] satisfies bits:\n+        According to 2.3 and 2.6, v[i] == 1 and zeros[i] == 0, v[i] does not violate\n+        bits, which means v[i] satisfies bits\n+      v[x] satisfies bits for x > i:\n+        Assume bits is not contradictory, we cannot have:\n+          ones[x]  == 1, v[x] == 0 (according to 2.7, v[x] == ones[x])\n+          zeros[x] == 1, v[x] == 1 (according to 2.7, ones[x] == v[x] == 1, which means\n+                                    bits is contradictory)\n@@ -163,2 +169,2 @@\n-    As a result, v > lo and v satisfies bits since all of its bits satisfy bits. Which\n-    means r <= v since r is the smallest such value.\n+    From a.1 and a.2, v > lo and v satisfies bits. Which means r <= v since r is the\n+    smallest such value.\n@@ -166,1 +172,1 @@\n-  b. Secondly, we prove that r == v. Suppose r < v:\n+  b. Secondly, from r <= v, we prove that r == v. Suppose the contradiction r < v:\n@@ -174,7 +180,1 @@\n-    - If j < i\n-      r[j] == 0 (according to 2.b.1)\n-      v[j] == lo[j] (according to 2.4 because j < i)\n-      v[j] == 1 (according to 2.b.2)\n-      r[x] == v[x], for x < j (according to 2.b.3)\n-      v[x] == lo[x], for x < j (according to 2,4 because j < i)\n-\n+    b.1. If j < i\n@@ -182,3 +182,4 @@\n-      r[j] == 0\n-      lo[j] == 1\n-      r[x] == lo[x], for x < j\n+      r[j]  == 0                (according to 2.b.1)\n+      lo[j] == 1                (according to 2.b.2 and 2.5, lo[j] == v[j] == 1 because j < i)\n+      r[x]  == lo[x], for x < j (according to 2.b.3 and 2.5, lo[x] == v[x] == r[x] with x < j < i)\n+      bits at x > j have lower significance, and are thus irrelevant\n@@ -188,4 +189,2 @@\n-    - If j == i\n-      Since lo[i] == 0 (according to 2.3) and r[i] == 0 (according to 2.b.1),\n-      we have lo[i] == r[i]. Since r > lo (according to 2.7), there must exist\n-      a bit index k such that:\n+    b.2. If j == i\n+      Since r > lo (according to 2.1), there must exist a bit index k such that:\n@@ -193,3 +192,3 @@\n-      r[k] == 1\n-      lo[k] == 0\n-      r[x] == lo[x], for x < k\n+      r[k]  == 1                (2.b.2.1)\n+      lo[k] == 0                (2.b.2.2)\n+      r[x]  == lo[x], for x < k (2.b.2.3)\n@@ -198,4 +197,4 @@\n-      r[x] == v[x], for x < i (according to 2.b.3 because j == i)\n-      v[x] == lo[x], for x < i (according to 2.4)\n-      r[j] == 0 (according to 2.b.1)\n-      lo[j] == 0 (according to 2.3)\n+      r[x]  == v[x],  for x < i (according to 2.b.3)\n+      v[x]  == lo[x], for x < i (according to 2.5)\n+      r[i]  == 0                (according to 2.b.1 because i == j)\n+      lo[i] == 0                (according to 2.4)\n@@ -207,3 +206,4 @@\n-      lo[x] satisfies bits for 0 <= x < k (because r satisfies bits and lo[x] == r[x] for 0 <= x < k)\n-      zeros[k] == 0 (because r[k] == 1, which means zeros[k] != 1 because r satisfies bits)\n-      lo[k] == 0 (the definition of k above)\n+      lo[x] satisfies bits for 0 <= x < k:\n+        According to 2.b.2.3, lo[x] == r[x] and r satisfies bits\n+      zeros[k] == 0 (according to 2.b.2.1, r[k] == 1 and r satisfies bits)\n+      lo[k]    == 0 (according to 2.b.2.2)\n@@ -213,4 +213,4 @@\n-    - If j > i\n-      ones[j] == v[j] (according to 2.6 since j > i)\n-      v[j] == 1 (according to 2.b.2)\n-      r[j] == 0 (according to 2.b.1)\n+    b.3. If j > i\n+      ones[j] == v[j] (according to 2.7 since j > i)\n+      v[j]    == 1    (according to 2.b.2)\n+      r[j]    == 0    (according to 2.b.1)\n@@ -221,3 +221,3 @@\n-    All cases lead to contradictions, which mean r < v is incorrect, which means\n-    that r == v, which means the value v having the above form is the\n-    lowest value not smaller than lo that satisfies bits.\n+    All cases lead to contradictions, which mean r < v is incorrect, which means that\n+    r == v, which means the value v having the above form is the lowest value not smaller\n+    than lo that satisfies bits.\n","filename":"src\/hotspot\/share\/opto\/rangeinference.cpp","additions":52,"deletions":52,"binary":false,"changes":104,"status":"modified"}]}