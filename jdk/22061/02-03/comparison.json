{"files":[{"patch":"@@ -1153,1 +1153,1 @@\n-template <typename TypeClass, typename Signed>\n+template <typename TypeClass, typename Unsigned>\n@@ -1181,1 +1181,1 @@\n-  Signed con = ti->get_con();\n+  Unsigned con = static_cast<Unsigned>(ti->get_con());\n@@ -1236,1 +1236,1 @@\n-  return unsigned_mod_ideal<TypeInt, jint>(phase, can_reshape, this);\n+  return unsigned_mod_ideal<TypeInt, juint>(phase, can_reshape, this);\n@@ -1456,1 +1456,1 @@\n-  return unsigned_mod_ideal<TypeLong, jlong>(phase, can_reshape, this);\n+  return unsigned_mod_ideal<TypeLong, julong>(phase, can_reshape, this);\n","filename":"src\/hotspot\/share\/opto\/divnode.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -40,1 +40,1 @@\n-    @Run(test = {\"constant\", \"constantAgain\", \"powerOf2\", \"reallyConstant\"})\n+    @Run(test = {\"constant\", \"constantAgain\", \"powerOf2\", \"powerOf2Big\", \"reallyConstant\"})\n@@ -99,0 +99,8 @@\n+\n+    @Test\n+    @IR(failOn = {IRNode.UMOD_I, IRNode.MUL})\n+    @IR(counts = {IRNode.AND, \"1\"})\n+    \/\/ Checks that for x % 2^k, 2^k-1 is used as a bit mask.\n+    public int powerOf2Big(int x) {\n+        return Integer.remainderUnsigned(x, -2147483648); \/\/ -2147483648 = Integer.parseUnsignedInt(\"2147483648\")\n+    }\n","filename":"test\/hotspot\/jtreg\/compiler\/c2\/irTests\/UModINodeIdealizationTests.java","additions":9,"deletions":1,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -40,1 +40,1 @@\n-    @Run(test = {\"constant\", \"constantAgain\", \"powerOf2\", \"reallyConstant\"})\n+    @Run(test = {\"constant\", \"constantAgain\", \"powerOf2\", \"powerOf2Big\", \"reallyConstant\"})\n@@ -99,0 +99,8 @@\n+\n+    @Test\n+    @IR(failOn = {IRNode.UMOD_L, IRNode.MUL})\n+    @IR(counts = {IRNode.AND, \"1\"})\n+    \/\/ Checks that for x % 2^k, 2^k-1 is used as a bit mask.\n+    public long powerOf2Big(long x) {\n+        return Long.remainderUnsigned(x, -9223372036854775808L); \/\/ -9223372036854775808 =  Long.parseUnsignedLong(\"9223372036854775808\")\n+    }\n","filename":"test\/hotspot\/jtreg\/compiler\/c2\/irTests\/UModLNodeIdealizationTests.java","additions":9,"deletions":1,"binary":false,"changes":10,"status":"modified"}]}