{"files":[{"patch":"@@ -52,2 +52,2 @@\n-    private static long idleTimerScheduleMillis;\n-    private static long idleIntervalMillis;\n+    private static final long idleTimerScheduleMillis;\n+    private static final long idleIntervalMillis;\n@@ -62,1 +62,1 @@\n-    private static int maxReqHeaders;\n+    private static final int maxReqHeaders;\n@@ -65,1 +65,1 @@\n-    private static int maxReqHeadersSize;\n+    private static final int maxReqHeadersSize;\n@@ -69,1 +69,1 @@\n-    private static long reqRspTimerScheduleMillis;\n+    private static final long reqRspTimerScheduleMillis;\n@@ -77,4 +77,4 @@\n-        idleIntervalMillis = Long.getLong(\"sun.net.httpserver.idleInterval\", DEFAULT_IDLE_INTERVAL_IN_SECS) * 1000;\n-        if (idleIntervalMillis <= 0) {\n-            idleIntervalMillis = DEFAULT_IDLE_INTERVAL_IN_SECS * 1000;\n-        }\n+        long providedIdleIntervalSecs = Long.getLong(\"sun.net.httpserver.idleInterval\", DEFAULT_IDLE_INTERVAL_IN_SECS);\n+        idleIntervalMillis = Math.multiplyExact(\n+                providedIdleIntervalSecs > 0 ? providedIdleIntervalSecs : DEFAULT_IDLE_INTERVAL_IN_SECS,\n+                1000);\n@@ -82,5 +82,6 @@\n-        idleTimerScheduleMillis = Long.getLong(\"sun.net.httpserver.clockTick\", DEFAULT_IDLE_TIMER_SCHEDULE_MILLIS);\n-        if (idleTimerScheduleMillis <= 0) {\n-            \/\/ ignore zero or negative value and use the default schedule\n-            idleTimerScheduleMillis = DEFAULT_IDLE_TIMER_SCHEDULE_MILLIS;\n-        }\n+        long providedIdleTimerScheduleMillis =\n+                Long.getLong(\"sun.net.httpserver.clockTick\", DEFAULT_IDLE_TIMER_SCHEDULE_MILLIS);\n+        \/\/ Ignore zero or negative value and use the default schedule\n+        idleTimerScheduleMillis = providedIdleTimerScheduleMillis > 0\n+                ? providedIdleTimerScheduleMillis\n+                : DEFAULT_IDLE_TIMER_SCHEDULE_MILLIS;\n@@ -94,4 +95,2 @@\n-        maxReqHeaders = Integer.getInteger(\"sun.net.httpserver.maxReqHeaders\", DEFAULT_MAX_REQ_HEADERS);\n-        if (maxReqHeaders <= 0) {\n-            maxReqHeaders = DEFAULT_MAX_REQ_HEADERS;\n-        }\n+        int providedMaxReqHeaders = Integer.getInteger(\"sun.net.httpserver.maxReqHeaders\", DEFAULT_MAX_REQ_HEADERS);\n+        maxReqHeaders = providedMaxReqHeaders > 0 ? providedMaxReqHeaders : DEFAULT_MAX_REQ_HEADERS;\n@@ -99,5 +98,4 @@\n-        \/\/ a value <= 0 means unlimited\n-        maxReqHeadersSize = Integer.getInteger(\"sun.net.httpserver.maxReqHeaderSize\", DEFAULT_MAX_REQ_HEADER_SIZE);\n-        if (maxReqHeadersSize <= 0) {\n-            maxReqHeadersSize = 0;\n-        }\n+        \/\/ A value <= 0 means unlimited\n+        maxReqHeadersSize = Math.max(\n+                Integer.getInteger(\"sun.net.httpserver.maxReqHeaderSize\", DEFAULT_MAX_REQ_HEADER_SIZE),\n+                0);\n@@ -109,1 +107,1 @@\n-        reqRspTimerScheduleMillis = Long.getLong(\n+        long providedReqRspTimerScheduleMillis = Long.getLong(\n@@ -112,4 +110,4 @@\n-        if (reqRspTimerScheduleMillis <= 0) {\n-            \/\/ ignore any negative or zero value for this configuration and reset to default schedule\n-            reqRspTimerScheduleMillis = DEFAULT_REQ_RSP_TIMER_TASK_SCHEDULE_MILLIS;\n-        }\n+        \/\/ Ignore any negative or zero value for this configuration and reset to default schedule\n+        reqRspTimerScheduleMillis = providedReqRspTimerScheduleMillis > 0\n+                ? providedReqRspTimerScheduleMillis\n+                : DEFAULT_REQ_RSP_TIMER_TASK_SCHEDULE_MILLIS;\n","filename":"src\/jdk.httpserver\/share\/classes\/sun\/net\/httpserver\/ServerConfig.java","additions":26,"deletions":28,"binary":false,"changes":54,"status":"modified"}]}