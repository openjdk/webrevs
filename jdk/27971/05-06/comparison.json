{"files":[{"patch":"@@ -2729,35 +2729,1 @@\n-  char fd_dir[32];\n-  snprintf(fd_dir, sizeof(fd_dir), \"\/proc\/%d\/fd\", getpid());\n-  DIR* dirp = opendir(fd_dir);\n-  int fds = 0;\n-  const int TIMEOUT_MS = 50;\n-  struct timespec start, now;\n-  clock_gettime(CLOCK_MONOTONIC, &start);\n-  struct dirent* dentp;\n-  bool timed_out = false;\n-\n-  if (dirp == nullptr) {\n-    st->print_cr(\"OpenFileDescriptorCount = unknown\");\n-    return;\n-  }\n-\n-  \/\/ limit proc file read to 50ms\n-  while ((dentp = readdir(dirp)) != nullptr) {\n-    if (isdigit(dentp->d_name[0])) fds++;\n-    if (fds % 100 == 0) {\n-      clock_gettime(CLOCK_MONOTONIC, &now);\n-      long elapsed_ms = (now.tv_sec - start.tv_sec) * 1000L +\n-                        (now.tv_nsec - start.tv_nsec) \/ 1000000L;\n-      if (elapsed_ms > TIMEOUT_MS) {\n-        timed_out = true;\n-        break;\n-      }\n-    }\n-  }\n-\n-  closedir(dirp);\n-  if (timed_out) {\n-    st->print_cr(\"OpenFileDescriptorCount > %d\", fds - 1); \/\/ minus the opendir fd itself\n-  } else {\n-    st->print_cr(\"OpenFileDescriptorCount = %d\", fds - 1);\n-  }\n+  \/\/ File descriptor counting not supported on AIX\n","filename":"src\/hotspot\/os\/aix\/os_aix.cpp","additions":1,"deletions":35,"binary":false,"changes":36,"status":"modified"},{"patch":"@@ -1470,0 +1470,2 @@\n+  os::print_open_file_descriptors(st);\n+\n@@ -2595,1 +2597,1 @@\n-    st->print_cr(\"OpenFileDescriptorCount = unknown\");\n+    st->print_cr(\"Open File Descriptors: unknown\");\n@@ -2601,1 +2603,1 @@\n-    st->print_cr(\"OpenFileDescriptorCount = unknown\");\n+    st->print_cr(\"Open File Descriptors: unknown\");\n@@ -2607,1 +2609,1 @@\n-    st->print_cr(\"OpenFileDescriptorCount = unknown\");\n+    st->print_cr(\"Open File Descriptors > 1024\");\n@@ -2611,1 +2613,1 @@\n-  st->print_cr(\"OpenFileDescriptorCount = %d\", nfiles);\n+  st->print_cr(\"Open File Descriptors: %d\", nfiles);\n@@ -2613,1 +2615,1 @@\n-    st->print_cr(\"OpenFileDescriptorCount = unknown\");\n+    st->print_cr(\"Open File Descriptors: unknown\");\n","filename":"src\/hotspot\/os\/bsd\/os_bsd.cpp","additions":7,"deletions":5,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2097,0 +2097,3 @@\n+  os::print_open_file_descriptors(st);\n+  st->cr();\n+\n@@ -5396,1 +5399,1 @@\n-    st->print_cr(\"OpenFileDescriptorCount = unknown\");\n+    st->print_cr(\"Open File Descriptors: unknown\");\n@@ -5416,1 +5419,1 @@\n-    st->print_cr(\"OpenFileDescriptorCount > %d\", fds - 1); \/\/ minus the opendir fd itself\n+    st->print_cr(\"Open File Descriptors > %d\", fds - 1); \/\/ minus the opendir fd itself\n@@ -5418,1 +5421,1 @@\n-    st->print_cr(\"OpenFileDescriptorCount = %d\", fds - 1);\n+    st->print_cr(\"Open File Descriptors: %d\", fds - 1);\n","filename":"src\/hotspot\/os\/linux\/os_linux.cpp","additions":6,"deletions":3,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -1231,6 +1231,0 @@\n-#ifndef _WIN32\n-  STEP_IF(\"printing open file descriptor count\", _verbose)\n-      os::print_open_file_descriptors(st);\n-      st->cr();\n-#endif\n-\n@@ -1442,6 +1436,0 @@\n-  \/\/ STEP(\"printing number of open file descriptors\")\n-  #ifndef _WIN32\n-    os::print_open_file_descriptors(st);\n-    st->cr();\n-  #endif\n-\n","filename":"src\/hotspot\/share\/utilities\/vmError.cpp","additions":0,"deletions":12,"binary":false,"changes":12,"status":"modified"}]}