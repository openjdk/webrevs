{"files":[{"patch":"@@ -956,5 +956,1 @@\n-    if test \"x$OPENJDK_TARGET_OS\" = xaix; then\n-      HOTSPOT_TOOLCHAIN_TYPE=xlc\n-    else\n-      HOTSPOT_TOOLCHAIN_TYPE=gcc\n-    fi\n+    HOTSPOT_TOOLCHAIN_TYPE=gcc\n","filename":"make\/autoconf\/toolchain.m4","additions":1,"deletions":5,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,2 +2,2 @@\n- * Copyright (c) 2017, 2023, Oracle and\/or its affiliates. All rights reserved.\n- * Copyright (c) 2012, 2019 SAP SE. All rights reserved.\n+ * Copyright (c) 2017, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2012, 2024 SAP SE. All rights reserved.\n@@ -119,2 +119,2 @@\n-      lm->text, (uintptr_t)lm->text + lm->text_len,\n-      lm->data, (uintptr_t)lm->data + lm->data_len,\n+      p2i(lm->text), (uintptr_t)lm->text + lm->text_len,\n+      p2i(lm->data), (uintptr_t)lm->data + lm->data_len,\n","filename":"src\/hotspot\/os\/aix\/loadlib_aix.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -314,1 +314,1 @@\n-                         RANGEFMTARGS(p, maxDisclaimSize),\n+                         RANGEFMTARGS(p, (long)maxDisclaimSize),\n@@ -325,1 +325,1 @@\n-                         RANGEFMTARGS(p, lastDisclaimSize),\n+                         RANGEFMTARGS(p, (long)lastDisclaimSize),\n@@ -650,2 +650,2 @@\n-             \", stack [\" PTR_FORMAT \" - \" PTR_FORMAT \" (\" SIZE_FORMAT \"k using %uk pages)).\",\n-             os::current_thread_id(), (uintx) kernel_thread_id, low_address, high_address,\n+             \", stack [\" PTR_FORMAT \" - \" PTR_FORMAT \" (\" SIZE_FORMAT \"k using %luk pages)).\",\n+             os::current_thread_id(), (uintx) kernel_thread_id, p2i(low_address), p2i(high_address),\n@@ -1398,2 +1398,2 @@\n-      \" bytes, %d %s pages), %s\",\n-      addr, addr + size - 1, size, size \/ pagesize, describe_pagesize(pagesize),\n+      \" bytes, %ld %s pages), %s\",\n+      p2i(addr), p2i(addr) + size - 1, size, size \/ pagesize, describe_pagesize(pagesize),\n@@ -1982,1 +1982,1 @@\n-    warning(\"mprotect(\" PTR_FORMAT \"-\" PTR_FORMAT \", 0x%X) failed (%s).\", addr, addr + size, prot, s_errno);\n+    warning(\"mprotect(\" PTR_FORMAT \"-\" PTR_FORMAT \", 0x%X) failed (%s).\", p2i(addr), p2i(addr) + size, prot, s_errno);\n@@ -2399,1 +2399,1 @@\n-  st->print(PTR_FORMAT \": \", addr);\n+  st->print(PTR_FORMAT \": \", p2i(addr));\n","filename":"src\/hotspot\/os\/aix\/os_aix.cpp","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -123,1 +123,1 @@\n-    unsigned long long virt_total;\n+    size_t virt_total;\n@@ -126,1 +126,1 @@\n-    unsigned long long real_total;\n+    size_t real_total;\n@@ -129,1 +129,1 @@\n-    unsigned long long real_free;\n+    size_t real_free;\n@@ -132,1 +132,1 @@\n-    unsigned long long pgsp_total;\n+    size_t pgsp_total;\n@@ -135,1 +135,1 @@\n-    unsigned long long pgsp_free;\n+    size_t pgsp_free;\n","filename":"src\/hotspot\/os\/aix\/os_aix.hpp","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2012, 2023 SAP SE. All rights reserved.\n+ * Copyright (c) 2012, 2024 SAP SE. All rights reserved.\n@@ -744,1 +744,1 @@\n-    st->print(\"(base - 0x%X) \", PTRDIFF_BYTES(stack_base, cur_sp));\n+    st->print(\"(base - 0x%lX) \", PTRDIFF_BYTES(stack_base, cur_sp));\n@@ -800,1 +800,1 @@\n-        st->print_cr(\"found something which looks like a backchain at \" PTR_FORMAT \", after 0x%x bytes... \",\n+        st->print_cr(\"found something which looks like a backchain at \" PTR_FORMAT \", after 0x%lx bytes... \",\n","filename":"src\/hotspot\/os\/aix\/porting_aix.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -511,1 +511,1 @@\n-  st->print(\"%d\", sysconf(_SC_CHILD_MAX));\n+  st->print(\"%ld\", sysconf(_SC_CHILD_MAX));\n","filename":"src\/hotspot\/os\/posix\/os_posix.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,2 +2,2 @@\n- * Copyright (c) 1997, 2023, Oracle and\/or its affiliates. All rights reserved.\n- * Copyright (c) 2012, 2023 SAP SE. All rights reserved.\n+ * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2012, 2024 SAP SE. All rights reserved.\n@@ -264,1 +264,1 @@\n-          tty->print_cr(\"trap: ic_miss_check at \" INTPTR_FORMAT \" (SIGTRAP)\", pc);\n+          tty->print_cr(\"trap: ic_miss_check at \" INTPTR_FORMAT \" (SIGTRAP)\", p2i(pc));\n@@ -274,1 +274,1 @@\n-          tty->print_cr(\"trap: null_check at \" INTPTR_FORMAT \" (SIGTRAP)\", pc);\n+          tty->print_cr(\"trap: null_check at \" INTPTR_FORMAT \" (SIGTRAP)\", p2i(pc));\n@@ -285,1 +285,1 @@\n-          tty->print_cr(\"trap: null_check at \" INTPTR_FORMAT \" (SIGSEGV)\", pc);\n+          tty->print_cr(\"trap: null_check at \" INTPTR_FORMAT \" (SIGSEGV)\", p2i(pc));\n@@ -295,1 +295,1 @@\n-          tty->print_cr(\"trap: range_check at \" INTPTR_FORMAT \" (SIGTRAP)\", pc);\n+          tty->print_cr(\"trap: range_check at \" INTPTR_FORMAT \" (SIGTRAP)\", p2i(pc));\n@@ -438,3 +438,3 @@\n-  st->print(\"pc =\" INTPTR_FORMAT \"  \", uc->uc_mcontext.jmp_context.iar);\n-  st->print(\"lr =\" INTPTR_FORMAT \"  \", uc->uc_mcontext.jmp_context.lr);\n-  st->print(\"ctr=\" INTPTR_FORMAT \"  \", uc->uc_mcontext.jmp_context.ctr);\n+  st->print(\"pc =\" INTPTR_FORMAT \"  \", (unsigned long)uc->uc_mcontext.jmp_context.iar);\n+  st->print(\"lr =\" INTPTR_FORMAT \"  \", (unsigned long)uc->uc_mcontext.jmp_context.lr);\n+  st->print(\"ctr=\" INTPTR_FORMAT \"  \", (unsigned long)uc->uc_mcontext.jmp_context.ctr);\n@@ -443,1 +443,1 @@\n-    st->print(\"r%-2d=\" INTPTR_FORMAT \"  \", i, uc->uc_mcontext.jmp_context.gpr[i]);\n+    st->print(\"r%-2d=\" INTPTR_FORMAT \"  \", i, (unsigned long)uc->uc_mcontext.jmp_context.gpr[i]);\n@@ -467,1 +467,1 @@\n-  st->print_cr(\"Decoded instructions: (pc=\" PTR_FORMAT \")\", pc);\n+  st->print_cr(\"Decoded instructions: (pc=\" PTR_FORMAT \")\", p2i(pc));\n","filename":"src\/hotspot\/os_cpu\/aix_ppc\/os_aix_ppc.cpp","additions":11,"deletions":11,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2023, Google and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2024, Google and\/or its affiliates. All rights reserved.\n@@ -91,1 +91,1 @@\n-#if defined(TARGET_COMPILER_gcc) || defined(TARGET_COMPILER_xlc)\n+#if defined(TARGET_COMPILER_gcc)\n","filename":"src\/hotspot\/share\/utilities\/byteswap.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1,30 +0,0 @@\n-\/*\n- * Copyright (c) 2019, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\n- *\/\n-\n-#ifndef SHARE_UTILITIES_COMPILERWARNINGS_XLC_HPP\n-#define SHARE_UTILITIES_COMPILERWARNINGS_XLC_HPP\n-\n-\/\/ Nothing here yet.\n-\n-#endif \/\/ SHARE_UTILITIES_COMPILERWARNINGS_XLC_HPP\n","filename":"src\/hotspot\/share\/utilities\/compilerWarnings_xlc.hpp","additions":0,"deletions":30,"binary":false,"changes":30,"status":"deleted"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -126,31 +126,0 @@\n-\/*****************************************************************************\n- * IBM XL C\/C++\n- *****************************************************************************\/\n-#elif defined(TARGET_COMPILER_xlc)\n-\n-#include <builtins.h>\n-\n-template <typename T> struct CountLeadingZerosImpl<T, 1> {\n-  static unsigned doit(T v) {\n-    return __cntlz4((uint32_t)v & 0xFF) - 24u;\n-  }\n-};\n-\n-template <typename T> struct CountLeadingZerosImpl<T, 2> {\n-  static unsigned doit(T v) {\n-    return __cntlz4((uint32_t)v & 0xFFFF) - 16u;\n-  }\n-};\n-\n-template <typename T> struct CountLeadingZerosImpl<T, 4> {\n-  static unsigned doit(T v) {\n-    return __cntlz4(v);\n-  }\n-};\n-\n-template <typename T> struct CountLeadingZerosImpl<T, 8> {\n-  static unsigned doit(T v) {\n-    return __cntlz8(v);\n-  }\n-};\n-\n","filename":"src\/hotspot\/share\/utilities\/count_leading_zeros.hpp","additions":1,"deletions":32,"binary":false,"changes":33,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -87,15 +87,0 @@\n-\/*****************************************************************************\n- * IBM XL C\/C++\n- *****************************************************************************\/\n-#elif defined(TARGET_COMPILER_xlc)\n-\n-#include <builtins.h>\n-\n-inline unsigned count_trailing_zeros_32(uint32_t x) {\n-  return __cnttz4(x);\n-}\n-\n-inline unsigned count_trailing_zeros_64(uint64_t x) {\n-  return __cnttz8(x);\n-}\n-\n","filename":"src\/hotspot\/share\/utilities\/count_trailing_zeros.hpp","additions":1,"deletions":16,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -109,1 +109,1 @@\n-#if defined(TARGET_COMPILER_gcc) || defined(TARGET_COMPILER_xlc)\n+#if defined(TARGET_COMPILER_gcc)\n","filename":"src\/hotspot\/share\/utilities\/debug.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,0 +34,3 @@\n+#if defined(_AIX)\n+#include <alloca.h>\n+#endif\n@@ -40,0 +43,8 @@\n+\/\/ In stdlib.h on AIX malloc is defined as a macro causing\n+\/\/ compiler errors when resolving them in different depths as it\n+\/\/ happens in the log tags. This avoids the macro.\n+#if (defined(__VEC__) || defined(__AIXVEC)) && defined(AIX) \\\n+    && defined(__open_xl_version__) && __open_xl_version__ >= 17\n+  #undef malloc\n+  extern void *malloc(size_t) asm(\"vec_malloc\");\n+#endif\n@@ -51,1 +62,1 @@\n-#if defined(LINUX) || defined(_ALLBSD_SOURCE)\n+#if defined(LINUX) || defined(_ALLBSD_SOURCE) || defined(_AIX)\n@@ -82,1 +93,1 @@\n-#if !defined(LINUX) && !defined(_ALLBSD_SOURCE)\n+#if !defined(LINUX) && !defined(_ALLBSD_SOURCE) && !defined(_AIX)\n@@ -107,1 +118,1 @@\n-#elif defined(LINUX) || defined(_ALLBSD_SOURCE)\n+#elif defined(LINUX) || defined(_ALLBSD_SOURCE) || defined(_AIX)\n","filename":"src\/hotspot\/share\/utilities\/globalDefinitions_gcc.hpp","additions":15,"deletions":4,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -1,128 +0,0 @@\n-\/*\n- * Copyright (c) 1998, 2024, Oracle and\/or its affiliates. All rights reserved.\n- * Copyright (c) 2012, 2023 SAP SE. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\n- *\/\n-\n-#ifndef SHARE_UTILITIES_GLOBALDEFINITIONS_XLC_HPP\n-#define SHARE_UTILITIES_GLOBALDEFINITIONS_XLC_HPP\n-\n-#include \"jni.h\"\n-\n-\/\/ This file holds compiler-dependent includes,\n-\/\/ globally used constants & types, class (forward)\n-\/\/ declarations and a few frequently used utility functions.\n-\n-#include <alloca.h>\n-#include <ctype.h>\n-#include <string.h>\n-#include <stdarg.h>\n-#include <stddef.h>\n-#include <stdio.h>\n-#include <stdlib.h>\n-\/\/ In stdlib.h on AIX malloc is defined as a macro causing\n-\/\/ compiler errors when resolving them in different depths as it\n-\/\/ happens in the log tags. This avoids the macro.\n-#if (defined(__VEC__) || defined(__AIXVEC)) && defined(AIX) \\\n-    && defined(__open_xl_version__) && __open_xl_version__ >= 17\n-  #undef malloc\n-  extern void *malloc(size_t) asm(\"vec_malloc\");\n-#endif\n-\n-#include <wchar.h>\n-\n-#include <math.h>\n-#include <time.h>\n-#include <fcntl.h>\n-#include <dlfcn.h>\n-#include <pthread.h>\n-\n-#include <limits.h>\n-#include <errno.h>\n-\n-#include <stdint.h>\n-\n-#if defined(__open_xl_version__)\n-  #if __open_xl_version__ < 17\n-  #error \"open xlc < 17 not supported\"\n-  #endif\n-#else\n-  #error \"xlc version not supported, macro __open_xl_version__ not found\"\n-#endif\n-\n-#ifndef _AIX\n-#error \"missing AIX-specific definition _AIX\"\n-#endif\n-\n-\/\/ Use XLC compiler builtins instead of inline assembler\n-#define USE_XLC_BUILTINS\n-\n-#ifdef USE_XLC_BUILTINS\n-#include <builtins.h>\n-\/\/ XLC V10 and higher provide the prototype for __dcbtst (void *);\n-#endif \/\/ USE_XLC_BUILTINS\n-\n-\/\/ NULL vs NULL_WORD:\n-\/\/ Some platform\/tool-chain combinations can't assign NULL to an integer\n-\/\/ type so we define NULL_WORD to use in those contexts.\n-#define NULL_WORD  0L\n-\n-\/\/ checking for nanness\n-inline int g_isnan(float  f) { return isnan(f); }\n-inline int g_isnan(double f) { return isnan(f); }\n-\n-\/\/ Checking for finiteness\n-inline int g_isfinite(jfloat  f)                 { return finite(f); }\n-inline int g_isfinite(jdouble f)                 { return finite(f); }\n-\n-\/\/ Formatting.\n-#ifdef _LP64\n-#define FORMAT64_MODIFIER \"l\"\n-#else \/\/ !_LP64\n-#define FORMAT64_MODIFIER \"ll\"\n-#endif \/\/ _LP64\n-\n-\/\/ Cannot use xlc's offsetof as implementation of hotspot's\n-\/\/ offset_of(), because xlc warns about applying offsetof() to non-POD\n-\/\/ object and xlc cannot compile the expression offsetof(DataLayout,\n-\/\/ _cells[index]) in DataLayout::cell_offset() .  Therefore we define\n-\/\/ offset_of as it is defined for gcc.\n-#define offset_of(klass,field) (size_t)((intx)&(((klass*)16)->field) - 16)\n-\n-#define THREAD_LOCAL __thread\n-\n-\/\/ Inlining support\n-\/\/\n-\/\/ Be aware that for function\/method declarations, xlC only supports the following\n-\/\/ syntax (i.e. the attribute must be placed AFTER the function\/method declarator):\n-\/\/\n-\/\/   void* operator new(size_t size) throw() NOINLINE;\n-\/\/\n-\/\/ For function\/method definitions, the more common placement BEFORE the\n-\/\/ function\/method declarator seems to be supported as well:\n-\/\/\n-\/\/   NOINLINE void* CHeapObj<F>::operator new(size_t size) throw() {...}\n-\n-#define NOINLINE     __attribute__((__noinline__))\n-#define ALWAYSINLINE inline __attribute__((__always_inline__))\n-\n-#endif \/\/ SHARE_UTILITIES_GLOBALDEFINITIONS_XLC_HPP\n","filename":"src\/hotspot\/share\/utilities\/globalDefinitions_xlc.hpp","additions":0,"deletions":128,"binary":false,"changes":128,"status":"deleted"}]}