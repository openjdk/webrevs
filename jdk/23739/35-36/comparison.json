{"files":[{"patch":"@@ -1536,1 +1536,1 @@\n-  if (_last_safepoint_refinement_epoch == refinement_epoch()) {\n+  if (_last_safepoint_refinement_epoch == _refinement_epoch) {\n@@ -1540,1 +1540,1 @@\n-    _last_safepoint_refinement_epoch = refinement_epoch();\n+    _last_safepoint_refinement_epoch = _refinement_epoch;\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CollectedHeap.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1095,2 +1095,0 @@\n-  size_t refinement_epoch() const { return _refinement_epoch; }\n-\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CollectedHeap.hpp","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -128,1 +128,0 @@\n-  _sweep_start_epoch(0),\n@@ -155,4 +154,0 @@\n-size_t G1ConcurrentRefineSweepState::refinement_epoch() {\n-  return G1CollectedHeap::heap()->refinement_epoch();\n-}\n-\n@@ -160,1 +155,1 @@\n-  bool result = _sweep_start_epoch == refinement_epoch();\n+  bool result = is_in_progress();\n@@ -178,2 +173,0 @@\n-  _sweep_start_epoch = refinement_epoch();\n-\n@@ -182,1 +175,1 @@\n-  advance_state(State::SwapGlobalCT);\n+  _state = State::SwapGlobalCT;\n@@ -305,1 +298,1 @@\n-    _state = State::CompleteRefineWork;\n+    advance_state(State::CompleteRefineWork);\n@@ -348,1 +341,1 @@\n-  _state = State::Idle;\n+  advance_state(State::Idle);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1ConcurrentRefine.cpp","additions":4,"deletions":11,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -137,4 +137,0 @@\n-  \/\/ The epoch the sweep has started; used to determine if there has been\n-  \/\/ a forced card table swap due to a garbage collection while doing work.\n-  size_t _sweep_start_epoch;\n-\n@@ -152,2 +148,0 @@\n-  static size_t refinement_epoch();\n-\n","filename":"src\/hotspot\/share\/gc\/g1\/g1ConcurrentRefine.hpp","additions":0,"deletions":6,"binary":false,"changes":6,"status":"modified"}]}