{"files":[{"patch":"@@ -51,3 +51,3 @@\n-                      _allocated * HeapWordSize,\n-                      _wasted * HeapWordSize,\n-                      _unused * HeapWordSize,\n+                      allocated() * HeapWordSize,\n+                      wasted() * HeapWordSize,\n+                      unused() * HeapWordSize,\n@@ -55,1 +55,1 @@\n-                      _undo_wasted * HeapWordSize);\n+                      undo_wasted() * HeapWordSize);\n@@ -160,1 +160,1 @@\n-    assert(_allocated != 0 || _unused == 0,\n+    assert(allocated() != 0 || unused() == 0,\n@@ -166,1 +166,1 @@\n-           _allocated, _wasted, _unused, _undo_wasted);\n+           allocated(), wasted(), unused(), undo_wasted());\n","filename":"src\/hotspot\/share\/gc\/g1\/g1EvacStats.cpp","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -30,0 +30,1 @@\n+#include \"runtime\/atomic.hpp\"\n@@ -152,4 +153,4 @@\n-  size_t _allocated;          \/\/ Total allocated\n-  size_t _wasted;             \/\/ of which wasted (internal fragmentation)\n-  size_t _undo_wasted;        \/\/ of which wasted on undo (is not used for calculation of PLAB size)\n-  size_t _unused;             \/\/ Unused in last buffer\n+  Atomic<size_t> _allocated;          \/\/ Total allocated\n+  Atomic<size_t> _wasted;             \/\/ of which wasted (internal fragmentation)\n+  Atomic<size_t> _undo_wasted;        \/\/ of which wasted on undo (is not used for calculation of PLAB size)\n+  Atomic<size_t> _unused;             \/\/ Unused in last buffer\n@@ -158,4 +159,4 @@\n-    _allocated   = 0;\n-    _wasted      = 0;\n-    _undo_wasted = 0;\n-    _unused      = 0;\n+    _allocated.store_relaxed(0);\n+    _wasted.store_relaxed(0);\n+    _undo_wasted.store_relaxed(0);\n+    _unused.store_relaxed(0);\n@@ -175,3 +176,4 @@\n-  size_t allocated() const { return _allocated; }\n-  size_t wasted() const { return _wasted; }\n-  size_t unused() const { return _unused; }\n+  size_t allocated() const { return _allocated.load_relaxed(); }\n+  size_t wasted() const { return _wasted.load_relaxed(); }\n+  size_t undo_wasted() const { return _undo_wasted.load_relaxed(); }\n+  size_t unused() const { return _unused.load_relaxed(); }\n@@ -179,1 +181,0 @@\n-  size_t undo_wasted() const { return _undo_wasted; }\n","filename":"src\/hotspot\/share\/gc\/shared\/plab.hpp","additions":14,"deletions":13,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,1 +32,0 @@\n-#include \"runtime\/atomicAccess.hpp\"\n@@ -35,1 +34,1 @@\n-  AtomicAccess::add(&_allocated, v);\n+  _allocated.add_then_fetch(v);\n@@ -39,1 +38,1 @@\n-  AtomicAccess::add(&_unused, v);\n+  _unused.add_then_fetch(v);\n@@ -43,1 +42,1 @@\n-  AtomicAccess::add(&_wasted, v);\n+  _wasted.add_then_fetch(v);\n@@ -47,1 +46,1 @@\n-  AtomicAccess::add(&_undo_wasted, v);\n+  _undo_wasted.add_then_fetch(v);\n","filename":"src\/hotspot\/share\/gc\/shared\/plab.inline.hpp","additions":5,"deletions":6,"binary":false,"changes":11,"status":"modified"}]}