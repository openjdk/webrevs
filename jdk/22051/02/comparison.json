{"files":[{"patch":"@@ -256,0 +256,1 @@\n+            \"--disable-cds-archive-coh\",\n","filename":"make\/conf\/jib-profiles.js","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -69,0 +69,3 @@\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n@@ -72,0 +75,1 @@\n+\n@@ -75,0 +79,16 @@\n+\n+    private static String archiveName(String archiveSuffix) {\n+        return \"classes\" + archiveSuffix + \".jsa\";\n+    }\n+\n+    private static Path archivePath(String archiveSuffix) {\n+        return Paths.get(System.getProperty(\"java.home\"), \"lib\",\n+                         \"server\", archiveName(archiveSuffix));\n+    }\n+\n+    private static boolean isCOHArchiveAvailable(char coops, char coh,\n+                                                 String archiveSuffix) throws Exception {\n+        Path archive= archivePath(archiveSuffix);\n+        return Files.exists(archive);\n+    }\n+\n@@ -93,0 +113,4 @@\n+                if (!isCOHArchiveAvailable(coops, coh, archiveSuffix)) {\n+                    throw new SkippedException(\"Skipping test due to \" +\n+                                               archivePath(archiveSuffix).toString() + \" not available\");\n+                }\n@@ -102,0 +126,4 @@\n+                if (!isCOHArchiveAvailable(coops, coh, archiveSuffix)) {\n+                    throw new SkippedException(\"Skipping test due to \" +\n+                                               archivePath(archiveSuffix).toString() + \" not available\");\n+                }\n@@ -117,2 +145,1 @@\n-        output.shouldContain(\"classes\" + archiveSuffix + \".jsa\");\n-\n+        output.shouldContain(archiveName(archiveSuffix));\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/TestDefaultArchiveLoading.java","additions":29,"deletions":2,"binary":false,"changes":31,"status":"modified"}]}