{"files":[{"patch":"@@ -30,0 +30,1 @@\n+#include \"runtime\/atomic.hpp\"\n@@ -41,1 +42,1 @@\n-  BufferNode* volatile _next;\n+  Atomic<BufferNode*> _next;\n@@ -61,1 +62,1 @@\n-  static BufferNode* volatile* next_ptr(BufferNode& bn) { return &bn._next; }\n+  static Atomic<BufferNode*>* next_ptr(BufferNode& bn) { return &bn._next; }\n@@ -64,2 +65,2 @@\n-  BufferNode* next() const     { return _next;  }\n-  void set_next(BufferNode* n) { _next = n;     }\n+  BufferNode* next() const     { return _next.load_relaxed(); }\n+  void set_next(BufferNode* n) { _next.store_relaxed(n); }\n","filename":"src\/hotspot\/share\/gc\/shared\/bufferNode.hpp","additions":5,"deletions":4,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -30,1 +30,0 @@\n-#include \"runtime\/atomicAccess.hpp\"\n@@ -88,1 +87,1 @@\n-static void increment_count(volatile size_t* cfptr, size_t threshold) {\n+static void increment_count(Atomic<size_t>* cfptr, size_t threshold) {\n@@ -90,1 +89,1 @@\n-  size_t value = AtomicAccess::load(cfptr);\n+  size_t value = cfptr->load_relaxed();\n@@ -96,1 +95,1 @@\n-    value = AtomicAccess::cmpxchg(cfptr, old, value);\n+    value = cfptr->compare_exchange(old, value);\n@@ -101,1 +100,1 @@\n-static void decrement_count(volatile size_t* cfptr) {\n+static void decrement_count(Atomic<size_t>* cfptr) {\n@@ -103,1 +102,1 @@\n-  size_t value = AtomicAccess::load(cfptr);\n+  size_t value = cfptr->load_relaxed();\n@@ -109,1 +108,1 @@\n-    value = AtomicAccess::cmpxchg(cfptr, old, value);\n+    value = cfptr->compare_exchange(old, value);\n@@ -335,1 +334,1 @@\n-  AtomicAccess::store(&_count_and_process_flag, size_t(0));\n+  _count_and_process_flag.store_relaxed(0u);\n","filename":"src\/hotspot\/share\/gc\/shared\/satbMarkQueue.cpp","additions":7,"deletions":8,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,0 +32,1 @@\n+#include \"runtime\/atomic.hpp\"\n@@ -90,1 +91,1 @@\n-  volatile size_t _count_and_process_flag;\n+  Atomic<size_t> _count_and_process_flag;\n@@ -151,1 +152,1 @@\n-    return _count_and_process_flag >> 1;\n+    return _count_and_process_flag.load_relaxed() >> 1;\n@@ -156,1 +157,1 @@\n-    return (_count_and_process_flag & 1) != 0;\n+    return (_count_and_process_flag.load_relaxed() & 1) != 0;\n","filename":"src\/hotspot\/share\/gc\/shared\/satbMarkQueue.hpp","additions":5,"deletions":4,"binary":false,"changes":9,"status":"modified"}]}