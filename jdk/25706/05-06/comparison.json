{"files":[{"patch":"@@ -2125,1 +2125,3 @@\n-    nmethod_data->invalidate_nmethod_mirror(this, is_cold() ? nmethod::InvalidationReason::GC_UNLINKING_COLD : nmethod::InvalidationReason::GC_UNLINKING);\n+    nmethod_data->invalidate_nmethod_mirror(this, is_cold() ? \n+            nmethod::InvalidationReason::UNLOADING_COLD : \n+            nmethod::InvalidationReason::UNLOADING);\n","filename":"src\/hotspot\/share\/code\/nmethod.cpp","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -476,1 +476,2 @@\n-  enum class InvalidationReason : u1 {\n+  enum class InvalidationReason : s1 {\n+    NOT_INVALIDATED = -1,\n@@ -483,2 +484,2 @@\n-    GC_UNLINKING,\n-    GC_UNLINKING_COLD,\n+    UNLOADING,\n+    UNLOADING_COLD,\n@@ -499,0 +500,1 @@\n+    LAST_REASON\n","filename":"src\/hotspot\/share\/code\/nmethod.hpp","additions":5,"deletions":3,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -1408,0 +1408,7 @@\n+#ifdef ASSERT\n+  int first = static_cast<int>(nmethod::InvalidationReason::UNKNOWN);\n+  int last = static_cast<int>(nmethod::InvalidationReason::LAST_REASON);\n+  assert(invalidation_reason >= first && invalidation_reason < last,\n+          \"invalidation_reason (%d) outside valid range [%d, %d)\",\n+          invalidation_reason, first, last);\n+#endif\n","filename":"src\/hotspot\/share\/jvmci\/jvmciCompilerToVM.cpp","additions":7,"deletions":0,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -818,1 +818,0 @@\n-      HotSpotJVMCI::HotSpotNmethod::set_invalidationReason(jvmciEnv, nmethod_mirror, static_cast<int>(invalidation_reason));\n@@ -820,0 +819,4 @@\n+      if (HotSpotJVMCI::HotSpotNmethod::invalidationReason(jvmciEnv, nmethod_mirror) ==\n+        static_cast<int>(nmethod::InvalidationReason::NOT_INVALIDATED)) {\n+        HotSpotJVMCI::HotSpotNmethod::set_invalidationReason(jvmciEnv, nmethod_mirror, static_cast<int>(invalidation_reason));\n+      }\n@@ -825,1 +828,0 @@\n-      HotSpotJVMCI::HotSpotNmethod::set_invalidationReason(jvmciEnv, nmethod_mirror, static_cast<int>(invalidation_reason));\n@@ -827,0 +829,4 @@\n+      if (HotSpotJVMCI::HotSpotNmethod::invalidationReason(jvmciEnv, nmethod_mirror) ==\n+        static_cast<int>(nmethod::InvalidationReason::NOT_INVALIDATED)) {\n+        HotSpotJVMCI::HotSpotNmethod::set_invalidationReason(jvmciEnv, nmethod_mirror, static_cast<int>(invalidation_reason));\n+      }\n","filename":"src\/hotspot\/share\/jvmci\/jvmciRuntime.cpp","additions":8,"deletions":2,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -568,0 +568,1 @@\n+  declare_constant(nmethod::InvalidationReason::NOT_INVALIDATED)                          \\\n@@ -574,2 +575,2 @@\n-  declare_constant(nmethod::InvalidationReason::GC_UNLINKING)                             \\\n-  declare_constant(nmethod::InvalidationReason::GC_UNLINKING_COLD)                        \\\n+  declare_constant(nmethod::InvalidationReason::UNLOADING)                                \\\n+  declare_constant(nmethod::InvalidationReason::UNLOADING_COLD)                           \\\n","filename":"src\/hotspot\/share\/jvmci\/vmStructs_jvmci.cpp","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"}]}