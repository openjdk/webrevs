{"files":[{"patch":"@@ -267,0 +267,1 @@\n+JDKOPT_SETUP_SIGNING_HOOK\n","filename":"make\/autoconf\/configure.ac","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -977,0 +977,27 @@\n+################################################################################\n+#\n+# Setup a hook to invoke a script that runs for file produced by the native\n+# compilation steps, after linking.\n+# Parameter is the path to the script to be called.\n+#\n+AC_DEFUN([JDKOPT_SETUP_SIGNING_HOOK],\n+[\n+  UTIL_ARG_WITH(NAME: signing-hook, TYPE: file,\n+      OPTIONAL: true, DEFAULT: \"\",\n+      CHECKING_MSG: [for code signing hook],\n+      DESC: [specify path to script used to code sign native binaries]\n+  )\n+\n+  AC_MSG_CHECKING([if signing hook is enabled])\n+  if test \"x$SIGNING_HOOK\" != x; then\n+    UTIL_FIXUP_EXECUTABLE(SIGNING_HOOK)\n+    SIGNING_HOOK_ENABLED=true\n+    AC_SUBST(SIGNING_HOOK)\n+    AC_MSG_RESULT([yes])\n+   else\n+      SIGNING_HOOK_ENABLED=false\n+      AC_MSG_RESULT([no])\n+    fi\n+  AC_SUBST(SIGNING_HOOK_ENABLED)\n+])\n+\n","filename":"make\/autoconf\/jdk-options.m4","additions":27,"deletions":0,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -478,0 +478,4 @@\n+# The code signing hook configuration\n+SIGNING_HOOK_ENABLED := @SIGNING_HOOK_ENABLED@\n+SIGNING_HOOK := @SIGNING_HOOK@\n+\n","filename":"make\/autoconf\/spec.gmk.template","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -224,0 +224,20 @@\n+\n+  # Call signing hook\n+  $$(eval $$(call CallSigningHook,$1))\n+\n+endef\n+\n+################################################################################\n+define CallSigningHook\n+  # Create a rule to call post-link signing hook\n+  $1_SIGNING_OUTPUT_PREFIX := $$($1_OBJECT_DIR)\/$$($1_SAFE_NAME)_call_signing_hook\n+  $1_CALL_SIGNING_HOOK := $$($1_SIGNING_OUTPUT_PREFIX).log\n+\n+  $$($1_CALL_SIGNING_HOOK): $$($1_TARGET)\n+        ifeq ($(SIGNING_HOOK_ENABLED), true)\n+\t  $$(call LogInfo, Signing $$($1_BASENAME))\n+\t  $$(call ExecuteWithLog, $$($1_SIGNING_OUTPUT_PREFIX), \\\n+\t      $(FIXPATH) $(SIGNING_HOOK) $$($1_TARGET))\n+        endif\n+\n+  $1 += $$($1_CALL_SIGNING_HOOK)\n","filename":"make\/common\/NativeCompilation.gmk","additions":20,"deletions":0,"binary":false,"changes":20,"status":"modified"}]}