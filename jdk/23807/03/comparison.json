{"files":[{"patch":"@@ -267,0 +267,1 @@\n+JDKOPT_SETUP_SIGNING_HOOK\n","filename":"make\/autoconf\/configure.ac","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -977,0 +977,23 @@\n+################################################################################\n+#\n+# Setup a hook to invoke a script that runs for file produced by the native\n+# compilation steps, after linking.\n+# Parameter is the path to the script to be called.\n+#\n+AC_DEFUN([JDKOPT_SETUP_SIGNING_HOOK],\n+[\n+  UTIL_ARG_WITH(NAME: signing-hook, TYPE: executable,\n+      OPTIONAL: true, DEFAULT: \"\",\n+      DESC: [specify path to script used to code sign native binaries]\n+  )\n+\n+  AC_MSG_CHECKING([for signing hook])\n+  if test \"x$SIGNING_HOOK\" != x; then\n+    UTIL_FIXUP_EXECUTABLE(SIGNING_HOOK)\n+    AC_MSG_RESULT([$SIGNING_HOOK])\n+  else\n+    AC_MSG_RESULT([none])\n+  fi\n+  AC_SUBST(SIGNING_HOOK)\n+])\n+\n","filename":"make\/autoconf\/jdk-options.m4","additions":23,"deletions":0,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -478,0 +478,3 @@\n+# The code signing hook configuration\n+SIGNING_HOOK := @SIGNING_HOOK@\n+\n","filename":"make\/autoconf\/spec.gmk.template","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -569,0 +569,8 @@\n+AC_DEFUN([UTIL_CHECK_TYPE_executable],\n+[\n+  # Check that the argument is an existing file that the user has execute access to.\n+  if (test ! -x \"$1\") || (test ! -f \"$1\") ; then\n+    FAILURE=\"File $1 does not exist or is not executable\"\n+  fi\n+])\n+\n@@ -651,1 +659,1 @@\n-#     \"directory\", \"literal\", \"multivalue\" or \"features\". Required.\n+#     \"executable\", \"directory\", \"literal\", \"multivalue\" or \"features\". Required.\n@@ -761,1 +769,1 @@\n-  [ if [[ ! \"$TEST_TYPE\" =~ ^(string|integer|file|directory|literal|multivalue|features)$ ]] ; then ]\n+  [ if [[ ! \"$TEST_TYPE\" =~ ^(string|integer|file|executable|directory|literal|multivalue|features)$ ]] ; then ]\n","filename":"make\/autoconf\/util.m4","additions":10,"deletions":2,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -224,0 +224,20 @@\n+\n+  # Call signing hook\n+  $$(eval $$(call CallSigningHook,$1))\n+\n+endef\n+\n+################################################################################\n+define CallSigningHook\n+  ifneq ($(SIGNING_HOOK), )\n+    # Create a rule to call post-link signing hook\n+    $1_SIGNING_OUTPUT_PREFIX := $$($1_OBJECT_DIR)\/$$($1_SAFE_NAME)_call_signing_hook\n+    $1_CALL_SIGNING_HOOK := $$($1_SIGNING_OUTPUT_PREFIX).log\n+\n+    $$($1_CALL_SIGNING_HOOK): $$($1_TARGET)\n+\t    $$(call LogInfo, Signing $$($1_BASENAME))\n+\t    $$(call ExecuteWithLog, $$($1_SIGNING_OUTPUT_PREFIX), \\\n+\t        $(SIGNING_HOOK) $$($1_TARGET))\n+\n+    $1 += $$($1_CALL_SIGNING_HOOK)\n+  endif\n","filename":"make\/common\/NativeCompilation.gmk","additions":20,"deletions":0,"binary":false,"changes":20,"status":"modified"}]}