{"files":[{"patch":"@@ -973,1 +973,1 @@\n-void G1CollectedHeap::update_gc_overhead_limit_exceeded() {\n+void G1CollectedHeap::update_gc_overhead_counter() {\n@@ -976,4 +976,3 @@\n-  if (UseGCOverheadLimit) {\n-    bool gc_time_over_limit = (_policy->analytics()->long_term_gc_time_ratio() * 100) >= GCTimeLimit;\n-    double free_space_percent = percent_of(num_available_regions() * G1HeapRegion::GrainBytes, max_capacity());\n-    bool free_space_below_limit = free_space_percent < GCHeapFreeLimit;\n+  if (!UseGCOverheadLimit) {\n+    return;\n+  }\n@@ -981,4 +980,3 @@\n-    log_debug(gc)(\"GC Overhead Limit: GC Time %f Free Space %f Counter %zu\",\n-                  (_policy->analytics()->long_term_gc_time_ratio() * 100),\n-                  free_space_percent,\n-                  _gc_overhead_counter);\n+  bool gc_time_over_limit = (_policy->analytics()->long_term_gc_time_ratio() * 100) >= GCTimeLimit;\n+  double free_space_percent = percent_of(num_available_regions() * G1HeapRegion::GrainBytes, max_capacity());\n+  bool free_space_below_limit = free_space_percent < GCHeapFreeLimit;\n@@ -986,6 +984,9 @@\n-    if (gc_time_over_limit && free_space_below_limit) {\n-      _gc_overhead_counter++;\n-      return;\n-    } else {\n-      _gc_overhead_counter = 0;\n-    }\n+  log_debug(gc)(\"GC Overhead Limit: GC Time %f Free Space %f Counter %zu\",\n+                (_policy->analytics()->long_term_gc_time_ratio() * 100),\n+                free_space_percent,\n+                _gc_overhead_counter);\n+\n+  if (gc_time_over_limit && free_space_below_limit) {\n+    _gc_overhead_counter++;\n+  } else {\n+    _gc_overhead_counter = 0;\n@@ -1053,1 +1054,1 @@\n-  update_gc_overhead_limit_exceeded();\n+  update_gc_overhead_counter();\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CollectedHeap.cpp","additions":17,"deletions":16,"binary":false,"changes":33,"status":"modified"},{"patch":"@@ -180,1 +180,1 @@\n-  void update_gc_overhead_limit_exceeded();\n+  void update_gc_overhead_counter();\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CollectedHeap.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}