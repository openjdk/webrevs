{"files":[{"patch":"@@ -1170,4 +1170,1 @@\n-  unsigned long buffer_length = strlen(filename);\n-  int extension_length = 3;\n-  char* file_path = NEW_C_HEAP_ARRAY(char, buffer_length + extension_length + 1, mtInternal);\n-  strncpy(file_path,filename, buffer_length + 1);\n+  char *file_path = strdup(filename);\n@@ -1175,0 +1172,2 @@\n+  char const *old_extension = \".so\";\n+  char const *new_extension = \".a\";\n@@ -1181,1 +1180,2 @@\n-  result = dll_load_library(file_path, ebuf, ebuflen);\n+  result = dll_load_library(filename, ebuf, ebuflen);\n+  int error_code = errno;\n@@ -1184,3 +1184,8 @@\n-  if (result == nullptr) {\n-    if (strcmp(pointer_to_dot, \".so\") == 0) {\n-      sprintf(pointer_to_dot, \".a\");\n+  if (error_code == EACCES || error_code == ENOENT) {\n+    if (strlen(new_extension) > strlen(old_extension)){\n+      log_info(os)(\"New extension length must be less than existing one\");\n+      FREE_C_HEAP_ARRAY(char, file_path);\n+      return result;\n+    }\n+    if (strcmp(pointer_to_dot, old_extension) == 0) {\n+      sprintf(pointer_to_dot, \"%s\", new_extension);\n","filename":"src\/hotspot\/os\/aix\/os_aix.cpp","additions":13,"deletions":8,"binary":false,"changes":21,"status":"modified"}]}