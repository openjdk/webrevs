{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -423,1 +423,0 @@\n-        \/\/ toWindowsPath verifies its argument is a non-null UnixPath\n@@ -433,7 +432,9 @@\n-        \/\/ check existence\n-        boolean exists1 = exists(obj1);\n-        boolean exists2 = exists(obj2);\n-\n-        if (exists1 && exists2) {\n-            \/\/ open both files and see if they are the same\n-            long h1 = 0L;\n+        \/\/ open both files and see if they are the same\n+        long h1 = 0L;\n+        try {\n+            h1 = file1.openForReadAttributeAccess(true);\n+        } catch (WindowsException x) {\n+            x.rethrowAsIOException(file1);\n+        }\n+        try {\n+            WindowsFileAttributes attrs1 = null;\n@@ -441,1 +442,1 @@\n-                h1 = file1.openForReadAttributeAccess(true);\n+                attrs1 = WindowsFileAttributes.readAttributes(h1);\n@@ -445,0 +446,1 @@\n+            long h2 = 0L;\n@@ -446,7 +448,6 @@\n-                WindowsFileAttributes attrs1 = null;\n-                try {\n-                    attrs1 = WindowsFileAttributes.readAttributes(h1);\n-                } catch (WindowsException x) {\n-                    x.rethrowAsIOException(file1);\n-                }\n-                long h2 = 0L;\n+                h2 = file2.openForReadAttributeAccess(true);\n+            } catch (WindowsException x) {\n+                x.rethrowAsIOException(file2);\n+            }\n+            try {\n+                WindowsFileAttributes attrs2 = null;\n@@ -454,1 +455,1 @@\n-                    h2 = file2.openForReadAttributeAccess(true);\n+                    attrs2 = WindowsFileAttributes.readAttributes(h2);\n@@ -458,11 +459,1 @@\n-                try {\n-                    WindowsFileAttributes attrs2 = null;\n-                    try {\n-                        attrs2 = WindowsFileAttributes.readAttributes(h2);\n-                    } catch (WindowsException x) {\n-                        x.rethrowAsIOException(file2);\n-                    }\n-                    return WindowsFileAttributes.isSameFile(attrs1, attrs2);\n-                } finally {\n-                    CloseHandle(h2);\n-                }\n+                return WindowsFileAttributes.isSameFile(attrs1, attrs2);\n@@ -470,1 +461,1 @@\n-                CloseHandle(h1);\n+                CloseHandle(h2);\n@@ -472,3 +463,2 @@\n-        } else if (exists1 || exists2) {\n-            \/\/ only one exists, they cannot be equal\n-            return false;\n+        } finally {\n+            CloseHandle(h1);\n@@ -476,4 +466,0 @@\n-\n-        \/\/ neither exist and comparison of normalized paths is problematic,\n-        \/\/ so return false\n-        return false;\n","filename":"src\/java.base\/windows\/classes\/sun\/nio\/fs\/WindowsFileSystemProvider.java","additions":23,"deletions":37,"binary":false,"changes":60,"status":"modified"}]}