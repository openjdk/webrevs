{"files":[{"patch":"@@ -363,1 +363,1 @@\n-                return fileKey;\n+                break;\n@@ -386,3 +386,1 @@\n-        \/\/ try to retrieve attributes following links\n-        UnixFileAttributes attrs1 = null;\n-        UnixFileAttributes attrs2 = null;\n+        UnixFileKey key1;\n@@ -390,5 +388,5 @@\n-            if ((attrs1 = UnixFileAttributes.getIfExists(file1)) != null)\n-                attrs2 = UnixFileAttributes.getIfExists(file2);\n-        } catch (UnixException x) {\n-            x.rethrowAsIOException(file1, file2);\n-            return false;    \/\/ keep compiler happy\n+            UnixFileAttributes attrs = UnixFileAttributes.getIfExists(file1);\n+            key1 = (attrs != null) ? attrs.fileKey() : lastFileKey(file1);\n+        } catch (UnixException e) {\n+            e.rethrowAsIOException(file1);\n+            return false;\n@@ -397,3 +395,2 @@\n-        if (attrs1 != null && attrs2 != null)\n-            \/\/ both exist, compare their device IDs and inode numbers\n-            return attrs1.isSameFile(attrs2);\n+        if (key1 == null)\n+            return false;\n@@ -401,1 +398,1 @@\n-        \/\/ find the last link in each path and compare them\n+        UnixFileKey key2;\n@@ -403,7 +400,5 @@\n-            UnixFileKey key1 = lastFileKey(file1);\n-            UnixFileKey key2 = lastFileKey(file2);\n-            if (key1 != null && key2 != null && key1.equals(key2))\n-                return true;\n-        } catch (UnixException x) {\n-            x.rethrowAsIOException(file1, file2);\n-            return false;    \/\/ keep compiler happy\n+            UnixFileAttributes attrs = UnixFileAttributes.getIfExists(file2);\n+            key2 = (attrs != null) ? attrs.fileKey() : lastFileKey(file2);\n+        } catch (UnixException e) {\n+            e.rethrowAsIOException(file2);\n+            return false;\n@@ -412,1 +407,1 @@\n-        return false;\n+        return key1.equals(key2);\n","filename":"src\/java.base\/unix\/classes\/sun\/nio\/fs\/UnixFileSystemProvider.java","additions":16,"deletions":21,"binary":false,"changes":37,"status":"modified"}]}