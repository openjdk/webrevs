{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -91,2 +91,2 @@\n-        if (d > 0.0)\n-            return Math.nextUp(d);\n+        if (d != 0.0)\n+            return (d > 0.0) ? Math.nextUp(d) : Math.nextDown(d);\n@@ -94,1 +94,1 @@\n-            return -Math.nextUp(-d);\n+            return Math.copySign(Double.MIN_VALUE, d);\n","filename":"test\/jdk\/java\/lang\/Math\/Tests.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n- * @bug 4900206\n+ * @bug 4900206 8316708\n@@ -35,3 +35,14 @@\n- * Use \"Table Maker's Dilemma\" results from Jean-Michel Muller and\n- * Vincent Lef&egrave;vre, to test the math library.  See\n- * http:\/\/perso.ens-lyon.fr\/jean-michel.muller\/TMD.html for original\n+ * This test containst two distinct kinds of worst-case inputs:\n+ *\n+ * 1) Exact numerical results that are nearly half-way between\n+ * representable numbers or very close to a representable\n+ * number. (Half-way caess are hardest for round to nearest even;\n+ * close to a representable number cases are hard for directed\n+ * roundings.)\n+ *\n+ * 2) Worst-case errors as observed emprically across different\n+ * implementations that are not correctly rounded.\n+ *\n+ * For the first categpory, the \"Table Maker's Dilemma\" results from\n+ * Jean-Michel Muller and Vincent Lef&egrave;vre, are used.\n+ * See http:\/\/perso.ens-lyon.fr\/jean-michel.muller\/TMD.html for original\n@@ -56,5 +67,5 @@\n- * Additional worst-case observed error inputs for the FDLIBM-derived\n- * OpenLibm 0.8.1 and other math libraries added from\n- * \"Accuracy of Mathematical Functions in Single, Double, Double\n- * Extended, and Quadruple Precision\"\n- * by Brian Gladman, Vincenzo Innocente and Paul Zimmermann\n+ * For the second category, worst-case observed error inputs for the\n+ * FDLIBM-derived OpenLibm 0.8.1 and other math libraries are added\n+ * from \"Accuracy of Mathematical Functions in Single, Double, Double\n+ * Extended, and Quadruple Precision\" by Brian Gladman, Vincenzo\n+ * Innocente and Paul Zimmermann.\n@@ -260,1 +271,1 @@\n-            {-0x1.004d1c5a9400bp-1,    -0x1.0c6e322e8a28cp-1},\n+            {-0x1.004d1c5a9400bp-1,    -0x1.0c6e322e8a28bp-1},\n@@ -329,1 +340,1 @@\n-            {-0x1.0068b067c6feep-1,     +0x1.0c335e2f0727p1},\n+            {-0x1.0068b067c6feep-1,     +0x1.0c335e2f0726fp1},\n@@ -363,2 +374,2 @@\n-            \/\/ Worst-case observed error\n-            {0x1.3f9605aaeb51bp+21,     -0x1.9678ee5d64935p-1},\n+            \/\/ Worst-case observed error for FDLIBM, outside of 1 ulp error\n+            \/\/ {0x1.3f9605aaeb51bp+21,     -0x1.9678ee5d64934p-1},\n","filename":"test\/jdk\/java\/lang\/Math\/WorstCaseTests.java","additions":24,"deletions":13,"binary":false,"changes":37,"status":"modified"}]}