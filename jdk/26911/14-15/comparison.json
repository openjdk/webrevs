{"files":[{"patch":"@@ -1202,1 +1202,1 @@\n-        if (absYear < 1000) {\n+        if (absYear < 10000) {\n@@ -1204,3 +1204,1 @@\n-                buf.append(year - 10000).deleteCharAt(1);\n-            } else {\n-                buf.append(year + 10000).deleteCharAt(0);\n+                buf.append('-');\n@@ -1208,0 +1206,1 @@\n+            DecimalDigits.appendQuad(buf, absYear);\n","filename":"src\/java.base\/share\/classes\/java\/time\/YearMonth.java","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -54,1 +54,1 @@\n-        if (absYear < 1000) {\n+        if (absYear < 10000) {\n@@ -58,3 +58,1 @@\n-            int y01 = absYear \/ 100;\n-            DecimalDigits.appendPair(buf, y01);\n-            DecimalDigits.appendPair(buf, absYear - y01 * 100);\n+            DecimalDigits.appendQuad(buf, absYear);\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/util\/DateTimeHelper.java","additions":2,"deletions":4,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -467,0 +467,23 @@\n+\n+    \/**\n+     * Appends the four-digit string representation of the {@code int}\n+     * argument to the given {@code StringBuilder}.\n+     * <p>\n+     * The integer {@code v} is formatted as four decimal digits.\n+     * Values from 0 to 9 are formatted with leading zeros (e.g., 5 becomes \"0005\"),\n+     * values from 10 to 99 become three leading zeros (e.g., 25 becomes \"0025\"),\n+     * values from 100 to 999 become two leading zeros (e.g., 123 becomes \"0123\"),\n+     * and values from 1000 to 9999 become one leading zero or no leading zeros.\n+     * If the value is outside the range 0-9999, the behavior is unspecified.\n+     *\n+     * @param buf the {@code StringBuilder} to append to.\n+     * @param v the {@code int} value (should be between 0 and 9999 inclusive).\n+     *\/\n+    public static void appendQuad(StringBuilder buf, int v) {\n+        int y01 = v \/ 100;\n+        int packed = DIGITS[y01 & 0x7f] | (DIGITS[(v - y01 * 100) & 0x7f] << 16);\n+        buf.append(\n+                SharedSecrets.getJavaLangAccess()\n+                        .uncheckedNewStringWithLatin1Bytes(\n+                                new byte[] {(byte) (packed & 0xFF), (byte) (packed >> 8), (byte) (packed >> 16), (byte) (packed >> 24)}));\n+    }\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/util\/DecimalDigits.java","additions":23,"deletions":0,"binary":false,"changes":23,"status":"modified"}]}