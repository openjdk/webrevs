{"files":[{"patch":"@@ -27,0 +27,1 @@\n+#include \"jvmti_common.hpp\"\n@@ -54,18 +55,0 @@\n-struct MonitorLock {\n-  MonitorLock() {\n-    jvmtiError err = jvmti->RawMonitorEnter(event_mon);\n-    if (err != JVMTI_ERROR_NONE) {\n-      LOG1(\"RawMonitorEnter returned error: %d\\n\", err);\n-      abort();\n-    }\n-  }\n-\n-  ~MonitorLock() {\n-    jvmtiError err = jvmti->RawMonitorExit(event_mon);\n-    if (err != JVMTI_ERROR_NONE) {\n-      LOG1(\"RawMonitorExit returned error: %d\\n\", err);\n-      abort();\n-    }\n-  }\n-};\n-\n@@ -279,1 +262,1 @@\n-  MonitorLock lock;\n+  RawMonitorLocker locker(jvmti, jni, event_mon);\n@@ -333,1 +316,1 @@\n-  MonitorLock lock;\n+  RawMonitorLocker locker(jvmti, jni, event_mon);\n","filename":"test\/hotspot\/jtreg\/serviceability\/jvmti\/HiddenClass\/libHiddenClassSigTest.cpp","additions":3,"deletions":20,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+#include \"jvmti_common.hpp\"\n@@ -37,18 +38,0 @@\n-struct MonitorLock {\n-  MonitorLock() {\n-    jvmtiError err = jvmti->RawMonitorEnter(event_mon);\n-    if (err != JVMTI_ERROR_NONE) {\n-      printf(\"RawMonitorEnter returned error: %d\\n\", err);\n-      abort();\n-    }\n-  }\n-\n-  ~MonitorLock() {\n-    jvmtiError err = jvmti->RawMonitorExit(event_mon);\n-    if (err != JVMTI_ERROR_NONE) {\n-      printf(\"RawMonitorExit returned error: %d\\n\", err);\n-      abort();\n-    }\n-  }\n-};\n-\n@@ -62,1 +45,1 @@\n-  MonitorLock lock;\n+  RawMonitorLocker locker(jvmti, jni, event_mon);\n@@ -82,1 +65,1 @@\n-  MonitorLock lock;\n+  RawMonitorLocker locker(jvmti, jni, event_mon);\n","filename":"test\/hotspot\/jtreg\/serviceability\/jvmti\/VMObjectAlloc\/libVMObjectAlloc.cpp","additions":3,"deletions":20,"binary":false,"changes":23,"status":"modified"}]}