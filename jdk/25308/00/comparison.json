{"files":[{"patch":"@@ -404,5 +404,8 @@\n-      \/\/ Print some more details. Don't use UL here to avoid circularities.\n-      tty->print_cr(\"Error: existing region: [\" INTPTR_FORMAT \"-\" INTPTR_FORMAT \"), memory tag %u.\\n\"\n-                    \"       new region: [\" INTPTR_FORMAT \"-\" INTPTR_FORMAT \"), memory tag %u.\",\n-                    p2i(reserved_rgn->base()), p2i(reserved_rgn->end()), (unsigned)reserved_rgn->mem_tag(),\n-                    p2i(base_addr), p2i(base_addr + size), (unsigned)mem_tag);\n+      \/\/ Print some more details.\n+      stringStream ss;\n+      MemTag mem_tag_old = NMTUtil::index_to_tag((unsigned)reserved_rgn->mem_tag());\n+      MemTag mem_tag_new = NMTUtil::index_to_tag((unsigned)mem_tag);\n+      ss.print_cr(\"Error: old region: [\" INTPTR_FORMAT \"-\" INTPTR_FORMAT \"), memory tag %s.\\n\"\n+                    \"       new region: [\" INTPTR_FORMAT \"-\" INTPTR_FORMAT \"), memory tag %s.\",\n+                    p2i(reserved_rgn->base()), p2i(reserved_rgn->end()), NMTUtil::tag_to_name(mem_tag_old),\n+                    p2i(base_addr), p2i(base_addr + size), NMTUtil::tag_to_name(mem_tag_new));\n@@ -410,4 +413,4 @@\n-        tty->print_cr(\"Existing region allocated from:\");\n-        reserved_rgn->call_stack()->print_on(tty);\n-        tty->print_cr(\"New region allocated from:\");\n-        stack.print_on(tty);\n+        ss.print_cr(\"Existing region allocated from:\");\n+        reserved_rgn->call_stack()->print_on(&ss);\n+        ss.print_cr(\"New region allocated from:\");\n+        stack.print_on(&ss);\n@@ -415,0 +418,3 @@\n+      const char* msg = ss.as_string(true \/* on C-heap *\/);\n+      log_debug(nmt)(\"%s\", msg);\n+\n","filename":"src\/hotspot\/share\/nmt\/virtualMemoryTracker.cpp","additions":15,"deletions":9,"binary":false,"changes":24,"status":"modified"}]}