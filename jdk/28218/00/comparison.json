{"files":[{"patch":"@@ -2553,1 +2553,1 @@\n-  \/\/ If changed AndI\/AndL inputs, check RShift users for \"(x & mask) >> shift\" optimization opportunity\n+  \/\/ If changed AndI\/AndL inputs, check RShift\/URShift users for \"(x & mask) >> shift\" optimization opportunity\n@@ -2557,1 +2557,2 @@\n-      if (u->Opcode() == Op_RShiftI || u->Opcode() == Op_RShiftL) {\n+      if (u->Opcode() == Op_RShiftI || u->Opcode() == Op_RShiftL ||\n+          u->Opcode() == Op_URShiftI || u->Opcode() == Op_URShiftL) {\n","filename":"src\/hotspot\/share\/opto\/phaseX.cpp","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n- * @bug 8361700\n+ * @bug 8361700 8371534\n@@ -31,1 +31,1 @@\n- *      -XX:CompileCommand=compileonly,compiler.c2.TestMaskAndRShiftReorder::test\n+ *      -XX:CompileCommand=compileonly,compiler.c2.TestMaskAndRShiftReorder::test*\n@@ -44,1 +44,4 @@\n-        test();\n+        \/\/ No known reproducer with URShiftI so far\n+        testRShiftI();\n+        testRShiftL();\n+        testURShiftL();\n@@ -47,1 +50,1 @@\n-    static long test() {\n+    static void testRShiftI() {\n@@ -50,1 +53,0 @@\n-        int iArr[] = new int[10];\n@@ -58,1 +60,24 @@\n-        return iArr.length;\n+    }\n+\n+    static void testRShiftL() {\n+        long x = 10;\n+        long y = -17L;\n+        for (int i = 1; i < 7; i++) {\n+            for (int j = 1; j < 2; j++) {\n+                x <<= lFld;\n+            }\n+            y &= x;\n+            y >>= 1;\n+        }\n+    }\n+\n+    static void testURShiftL() {\n+        long x = 10;\n+        long y = -17L;\n+        for (int i = 1; i < 7; i++) {\n+            for (int j = 1; j < 2; j++) {\n+                x <<= lFld;\n+            }\n+            y &= x;\n+            y >>>= 1;\n+        }\n","filename":"test\/hotspot\/jtreg\/compiler\/c2\/TestMaskAndRShiftReorder.java","additions":31,"deletions":6,"binary":false,"changes":37,"status":"modified"}]}