{"files":[{"patch":"@@ -3778,2 +3778,1 @@\n-  JavaThread* thread = new JavaThread();\n-  thread->set_is_attaching_via_jni();\n+  JavaThread* thread = JavaThread::create_attaching_thread();\n","filename":"src\/hotspot\/share\/prims\/jni.cpp","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -528,0 +528,6 @@\n+JavaThread* JavaThread::create_attaching_thread() {\n+  JavaThread* jt = new JavaThread();\n+  jt->_jni_attach_state = _attaching_via_jni;\n+  return jt;\n+}\n+\n","filename":"src\/hotspot\/share\/runtime\/javaThread.cpp","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -485,0 +485,3 @@\n+  \/\/ Factory method to create a new JavaThread whose attach state is \"is attaching\"\n+  static JavaThread* create_attaching_thread();\n+\n@@ -1138,1 +1141,0 @@\n-  inline void set_is_attaching_via_jni();\n","filename":"src\/hotspot\/share\/runtime\/javaThread.hpp","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -199,5 +199,0 @@\n-inline void JavaThread::set_is_attaching_via_jni() {\n-  _jni_attach_state = _attaching_via_jni;\n-  OrderAccess::fence();\n-}\n-\n","filename":"src\/hotspot\/share\/runtime\/javaThread.inline.hpp","additions":0,"deletions":5,"binary":false,"changes":5,"status":"modified"}]}