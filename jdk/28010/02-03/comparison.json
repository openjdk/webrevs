{"files":[{"patch":"@@ -37,0 +37,4 @@\n+import java.io.IOException;\n+import java.lang.management.ManagementFactory;\n+import javax.management.MBeanServer;\n+import jdk.management.HotSpotAOTCacheMXBean;\n@@ -40,2 +44,0 @@\n-import java.lang.management.ManagementFactory;\n-import jdk.management.HotSpotAOTCacheMXBean;\n@@ -90,0 +92,1 @@\n+                out.shouldNotContain(\"IOException occurred!\");\n@@ -98,9 +101,16 @@\n-        var aotBean = ManagementFactory.getPlatformMXBean(HotSpotAOTCacheMXBean.class);\n-        if (aotBean == null) {\n-            System.out.println(\"HotSpotAOTCacheMXBean is not available\");\n-            return;\n-        }\n-        if (aotBean.endRecording()) {\n-            System.out.println(\"Successfully stopped recording\");\n-        } else {\n-            System.out.println(\"Failed to stop recording\");\n+        try {\n+            MBeanServer server = ManagementFactory.getPlatformMBeanServer();\n+            HotSpotAOTCacheMXBean aotBean = ManagementFactory.newPlatformMXBeanProxy(server,\n+                    \"jdk.management:type=HotSpotAOTCache\",\n+                    HotSpotAOTCacheMXBean.class);\n+            if (aotBean == null) {\n+                System.out.println(\"HotSpotAOTCacheMXBean is not available\");\n+                return;\n+            }\n+            if (aotBean.endRecording()) {\n+                System.out.println(\"Successfully stopped recording\");\n+            } else {\n+                System.out.println(\"Failed to stop recording\");\n+            }\n+        } catch (IOException e) {\n+            System.out.println(\"IOException occurred!\");\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/aotCache\/HotSpotAOTCacheMXBeanTest.java","additions":21,"deletions":11,"binary":false,"changes":32,"status":"modified"}]}