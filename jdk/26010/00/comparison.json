{"files":[{"patch":"@@ -1171,3 +1171,4 @@\n-  if (SafepointSynchronize::is_at_safepoint() || Thread::current() == thread) {\n-    \/\/ It is only safe to walk the list if we're at a safepoint or the\n-    \/\/ calling thread is walking its own list.\n+  if ((SafepointSynchronize::is_at_safepoint() && thread->is_Java_thread()) ||\n+      Thread::current() == thread) {\n+    \/\/ It is only safe to walk the list if we're at a safepoint and processing a JavaThread,\n+    \/\/ or the calling thread is walking its own list.\n","filename":"src\/hotspot\/share\/runtime\/threadSMR.cpp","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"}]}