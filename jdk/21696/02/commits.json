[{"commit":{"message":"Add bug ID to test"},"files":[{"filename":"test\/jdk\/java\/nio\/file\/DirectoryStream\/SecureDS.java"}],"sha":"6167680e82a5210134618acc7f4070d33d92aeea"},{"commit":{"message":"Update jtreg SecureDS test to use `@requires` instead of `instanceof` logic"},"files":[{"filename":"test\/jdk\/java\/nio\/file\/DirectoryStream\/SecureDS.java"}],"sha":"cff1994e5ec689f11f5e5de34c5be5f3aa7fbbc4"},{"commit":{"message":"Use 64-bit variation when 64-bit inodes are detected on macos x86"},"files":[{"filename":"src\/java.base\/unix\/native\/libnio\/fs\/UnixNativeDispatcher.c"}],"sha":"4572704b537ae62fefa829004ba668dc0f66b778"},{"commit":{"message":"Simpler version that does not break arm32, hopefully"},"files":[{"filename":"src\/java.base\/unix\/native\/libnio\/fs\/UnixNativeDispatcher.c"}],"sha":"8bb31fdcaac7ea1cd6653f8270935b923fd80aa4"},{"commit":{"message":"8343020: SecureDirectoryStream not supported on MacOS\n\nOpenJDK will not produce SecureDirectoryStreams on MacOS. Support for SecureDirectoryStream on UNIX-like OSes is predicated on the `SUPPORTS_OPENAT` flag in UnixNativeDispatcher. That flag in turn is set when the runtime environment supports `openat`, `fstatat`, `unlinkat`, `renameat`, `futimesat`, and `fdopendir`.\n\nThis fails on MacOS because `futimesat` does not exist on that platform, apparently having been a proposed-but-not-accepted part of POSIX some time ago. While there is an indirect replacement that is supported on MacOS - `utimensat` - this is not actually needed, because the unique functionality provided by `futimesat` (that is, performing the action of `futimes` relative to an open directory file descriptor) is not utilized, since the only place this function is used passes `NULL` as the relative filename argument.\n\nReplacing this with simply calling `futimes` instead allows `SecureDirectoryStream` to function on MacOS."},"files":[{"filename":"src\/java.base\/unix\/classes\/sun\/nio\/fs\/UnixNativeDispatcher.java"},{"filename":"src\/java.base\/unix\/native\/libnio\/fs\/UnixNativeDispatcher.c"}],"sha":"cc1108ee877cbb4201c0f15dcae56e04f80be96c"}]