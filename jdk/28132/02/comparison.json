{"files":[{"patch":"@@ -74,0 +74,19 @@\n+    \/*\n+     * Symbolic values for the responseLength parameter of\n+     * sendResponseHeaders(int,long)\n+     *\/\n+\n+    \/**\n+     * No response body is being sent with this response\n+     *\n+     * @since 26\n+     *\/\n+    public static final long RSPBODY_EMPTY = -1l;\n+\n+    \/**\n+     * The response body is unspecified and will be chunk encoded\n+     *\n+     * @since 26\n+     *\/\n+    public static final long RSPBODY_CHUNKED = 0;\n+\n@@ -166,1 +185,0 @@\n-\n@@ -173,2 +191,3 @@\n-     * amount of data. If the response length parameter is {@code zero}, then\n-     * chunked transfer encoding is used and an arbitrary amount of data may be\n+     * amount of data. If the response length parameter has the value\n+     * {@link #RSPBODY_CHUNKED} (zero) then the response body uses\n+     * chunked transfer encoding and an arbitrary amount of data may be\n@@ -177,2 +196,2 @@\n-     * If response length has the value {@code -1} then no response body is\n-     * being sent.\n+     * If response length has the value {@link #RSPBODY_EMPTY} then no\n+     * response body is being sent.\n@@ -186,0 +205,8 @@\n+     * @apiNote If a response body is to be sent from a byte array and the\n+     * length of the array is used as the responseLength parameter, then note\n+     * the behavior in the case when the array is empty. In that case, the\n+     * responseLength will be zero which is the value of {@link #RSPBODY_CHUNKED}\n+     * resulting in a zero length, but chunked encoded response body. While this\n+     * is not incorrect, it may be preferable to check for an empty array and set\n+     * responseLength to {@link #RSPBODY_EMPTY} instead.\n+     *\n@@ -196,1 +223,1 @@\n-     *                       If {@literal == 0}, then chunked encoding is used,\n+     *                       If equal to {@link #RSPBODY_CHUNKED}, then chunked encoding is used,\n@@ -198,2 +225,3 @@\n-     *                       If {@literal <= -1}, then no response body length is\n-     *                       specified and no response body may be written.\n+     *                       If equal to {@link #RSPBODY_EMPTY}, then no response body length is\n+     *                       specified and no response body may be written. Any value {@literal <= -1}\n+     *                       is treated the same as {@link #RSPBODY_EMPTY}.\n","filename":"src\/jdk.httpserver\/share\/classes\/com\/sun\/net\/httpserver\/HttpExchange.java","additions":36,"deletions":8,"binary":false,"changes":44,"status":"modified"},{"patch":"@@ -41,0 +41,2 @@\n+import static com.sun.net.httpserver.HttpExchange.RSPBODY_EMPTY;\n+import static com.sun.net.httpserver.HttpExchange.RSPBODY_CHUNKED;\n@@ -230,1 +232,1 @@\n-            if (contentLen != -1) {\n+            if (contentLen != RSPBODY_EMPTY) {\n@@ -232,1 +234,1 @@\n-                    + \": forcing contentLen = -1\";\n+                    + \": forcing contentLen = RSPBODY_EMPTY\";\n@@ -235,1 +237,1 @@\n-            contentLen = -1;\n+            contentLen = RSPBODY_EMPTY;\n@@ -252,1 +254,1 @@\n-            if (contentLen == 0) {\n+            if (contentLen == RSPBODY_CHUNKED) {\n@@ -261,1 +263,1 @@\n-                if (contentLen == -1) {\n+                if (contentLen == RSPBODY_EMPTY) {\n","filename":"src\/jdk.httpserver\/share\/classes\/sun\/net\/httpserver\/ExchangeImpl.java","additions":7,"deletions":5,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -42,0 +42,1 @@\n+import static com.sun.net.httpserver.HttpExchange.RSPBODY_EMPTY;\n@@ -62,1 +63,1 @@\n-                exchange.sendResponseHeaders(401, -1);\n+                exchange.sendResponseHeaders(401, RSPBODY_EMPTY);\n@@ -66,1 +67,1 @@\n-            exchange.sendResponseHeaders(200, -1);\n+            exchange.sendResponseHeaders(200, RSPBODY_EMPTY);\n","filename":"test\/jdk\/com\/sun\/net\/httpserver\/BasicAuthToken.java","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -32,0 +32,2 @@\n+import static com.sun.net.httpserver.HttpExchange.RSPBODY_EMPTY;\n+import static com.sun.net.httpserver.HttpExchange.RSPBODY_CHUNKED;\n@@ -53,1 +55,1 @@\n-            t.sendResponseHeaders(200, in.length == 0 ? -1 : in.length);\n+            t.sendResponseHeaders(200, in.length == 0 ? RSPBODY_EMPTY : in.length);\n@@ -55,1 +57,1 @@\n-            t.sendResponseHeaders(200, 0);\n+            t.sendResponseHeaders(200, RSPBODY_CHUNKED);\n","filename":"test\/jdk\/com\/sun\/net\/httpserver\/EchoHandler.java","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -54,0 +54,1 @@\n+import static com.sun.net.httpserver.HttpExchange.RSPBODY_EMPTY;\n@@ -120,1 +121,1 @@\n-                exchange.sendResponseHeaders(200, -1);\n+                exchange.sendResponseHeaders(200, RSPBODY_EMPTY);\n@@ -123,1 +124,1 @@\n-                exchange.sendResponseHeaders(500, -1);\n+                exchange.sendResponseHeaders(500, RSPBODY_EMPTY);\n","filename":"test\/jdk\/com\/sun\/net\/httpserver\/ExchangeAttributeTest.java","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -28,0 +28,2 @@\n+import static com.sun.net.httpserver.HttpExchange.RSPBODY_EMPTY;\n+import static com.sun.net.httpserver.HttpExchange.RSPBODY_CHUNKED;\n@@ -68,1 +70,1 @@\n-            t.sendResponseHeaders (200, -1);\n+            t.sendResponseHeaders (200, RSPBODY_EMPTY);\n@@ -71,1 +73,1 @@\n-            t.sendResponseHeaders (405, -1);\n+            t.sendResponseHeaders (405, RSPBODY_EMPTY);\n@@ -87,1 +89,1 @@\n-            t.sendResponseHeaders (200, 0);\n+            t.sendResponseHeaders (200, RSPBODY_CHUNKED);\n@@ -130,1 +132,1 @@\n-        t.sendResponseHeaders (301, -1);\n+        t.sendResponseHeaders (301, RSPBODY_EMPTY);\n@@ -136,1 +138,1 @@\n-        t.sendResponseHeaders (404, 0);\n+        t.sendResponseHeaders (404, RSPBODY_CHUNKED);\n","filename":"test\/jdk\/com\/sun\/net\/httpserver\/FileServerHandler.java","additions":7,"deletions":5,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -34,0 +34,1 @@\n+import static com.sun.net.httpserver.HttpExchange.RSPBODY_CHUNKED;\n@@ -57,1 +58,1 @@\n-            exchange.sendResponseHeaders(200, 0);\n+            exchange.sendResponseHeaders(200, RSPBODY_CHUNKED);\n","filename":"test\/jdk\/com\/sun\/net\/httpserver\/Http10KeepAliveMaxParamTest.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -46,0 +46,1 @@\n+import static com.sun.net.httpserver.HttpExchange.RSPBODY_CHUNKED;\n@@ -69,1 +70,1 @@\n-            ex.sendResponseHeaders(httpCode, 0);\n+            ex.sendResponseHeaders(httpCode, RSPBODY_CHUNKED);\n","filename":"test\/jdk\/com\/sun\/net\/httpserver\/HttpServerTest.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -57,0 +57,1 @@\n+import static com.sun.net.httpserver.HttpExchange.RSPBODY_EMPTY;\n@@ -395,2 +396,0 @@\n-        private static final int NO_RESPONSE_BODY = -1;\n-\n@@ -400,1 +399,1 @@\n-            exchange.sendResponseHeaders(200, NO_RESPONSE_BODY);\n+            exchange.sendResponseHeaders(200, RSPBODY_EMPTY);\n","filename":"test\/jdk\/com\/sun\/net\/httpserver\/HttpsParametersClientAuthTest.java","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"}]}