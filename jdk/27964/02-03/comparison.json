{"files":[{"patch":"@@ -30,0 +30,2 @@\n+ * @modules java.base\/jdk.internal.access\n+ *          java.base\/jdk.internal.reflect\n@@ -34,1 +36,0 @@\n-import org.objectweb.asm.ClassWriter;\n@@ -36,0 +37,4 @@\n+import jdk.internal.access.SharedSecrets;\n+import jdk.internal.reflect.ConstantPool;\n+\n+import org.objectweb.asm.ClassWriter;\n@@ -41,0 +46,8 @@\n+    private static int getDefaultSize() throws Exception {\n+        var cw = new ClassWriter(0);\n+        cw.visit(V17, ACC_PUBLIC, \"Empty\", null, \"java\/lang\/Object\", null);\n+        Class<?> c = MethodHandles.lookup().defineClass(cw.toByteArray());\n+        ConstantPool cp = SharedSecrets.getJavaLangAccess().getConstantPool(c);\n+        return cp.getSize();\n+    }\n+\n@@ -43,0 +56,2 @@\n+        int defaultSize = getDefaultSize();\n+        System.out.println(\"default size is \" + defaultSize);\n@@ -45,1 +60,1 @@\n-        for (int i = 0; i < 65530; i++) {\n+        for (int i = 0; i < 65535 - defaultSize; i++) {\n","filename":"test\/hotspot\/jtreg\/runtime\/ClassFile\/HiddenClassesTest.java","additions":17,"deletions":2,"binary":false,"changes":19,"status":"modified"}]}