{"files":[{"patch":"@@ -37,2 +37,0 @@\n-import jdk.internal.access.SharedSecrets;\n-import jdk.internal.reflect.ConstantPool;\n@@ -46,8 +44,0 @@\n-    private static int getDefaultSize() throws Exception {\n-        var cw = new ClassWriter(0);\n-        cw.visit(V17, ACC_PUBLIC, \"Empty\", null, \"java\/lang\/Object\", null);\n-        Class<?> c = MethodHandles.lookup().defineClass(cw.toByteArray());\n-        ConstantPool cp = SharedSecrets.getJavaLangAccess().getConstantPool(c);\n-        return cp.getSize();\n-    }\n-\n@@ -56,2 +46,0 @@\n-        int defaultSize = getDefaultSize();\n-        System.out.println(\"default size is \" + defaultSize);\n@@ -60,2 +48,3 @@\n-        for (int i = 0; i < 65535 - defaultSize; i++) {\n-            cw.newUTF8(Integer.toString(i));\n+        int i = 0;\n+        while (i < 65535-1) {\n+            i = cw.newUTF8(Integer.toString(i));\n","filename":"test\/hotspot\/jtreg\/runtime\/ClassFile\/HiddenClassesTest.java","additions":3,"deletions":14,"binary":false,"changes":17,"status":"modified"}]}