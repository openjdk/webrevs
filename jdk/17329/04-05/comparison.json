{"files":[{"patch":"@@ -27,1 +27,1 @@\n- * @library ..\/regtesthelpers \/test\/lib\n+ * @library ..\/..\/regtesthelpers \/test\/lib\n@@ -33,0 +33,1 @@\n+import java.awt.AWTException;\n@@ -45,2 +46,0 @@\n-    JFrame frame;\n-\n@@ -48,2 +47,1 @@\n-        boolean traySupported = SystemTray.isSupported();\n-        if (!traySupported) {\n+        if (!SystemTray.isSupported()) {\n@@ -69,1 +67,1 @@\n-        PassFailJFrame passFailJFrame = new PassFailJFrame.Builder()\n+        PassFailJFrame.builder()\n@@ -75,3 +73,3 @@\n-                .build();\n-        showFrameAndIcon();\n-        passFailJFrame.awaitAndCheck();\n+                .testUI(ShowAfterDisposeTest::showFrameAndIcon)\n+                .build()\n+                .awaitAndCheck();\n@@ -80,9 +78,3 @@\n-    public void showFrameAndIcon() throws Exception {\n-        SwingUtilities.invokeAndWait(() -> {\n-            frame = new JFrame(\"ShowAfterDisposeTest\");\n-            frame.setLayout(new BorderLayout());\n-\n-            frame.setSize(200, 200);\n-            frame.setVisible(true);\n-            frame.validate();\n-        });\n+    private static JFrame showFrameAndIcon() {\n+        JFrame frame = new JFrame(\"ShowAfterDisposeTest\");\n+        frame.setLayout(new BorderLayout());\n@@ -106,1 +98,5 @@\n-        tray.add(icon);\n+        try {\n+            tray.add(icon);\n+        } catch (AWTException e) {\n+            throw new RuntimeException(\"Could not add icon to tray\");\n+        }\n@@ -108,0 +104,2 @@\n+\n+        return frame;\n","filename":"test\/jdk\/java\/awt\/TrayIcon\/ShowAfterDisposeTest\/ShowAfterDisposeTest.java","additions":17,"deletions":19,"binary":false,"changes":36,"status":"modified"}]}