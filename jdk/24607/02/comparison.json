{"files":[{"patch":"@@ -26,0 +26,1 @@\n+#include <assert.h>\n@@ -150,5 +151,2 @@\n-#ifdef MACOSX\n-    \/*\n-     * Since sun_jnu_encoding is now hard-coded to UTF-8 on Mac, we don't\n-     * want to use it to overwrite native.encoding\n-     *\/\n+    assert(sprops->encoding != NULL);\n+    assert(sprops->sun_jnu_encoding != NULL);\n@@ -156,3 +154,0 @@\n-#else\n-    PUTPROP(propArray, _native_encoding_NDX, sprops->sun_jnu_encoding);\n-#endif\n","filename":"src\/java.base\/share\/native\/libjava\/System.c","additions":3,"deletions":8,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -30,1 +30,0 @@\n-#include <assert.h>\n@@ -468,3 +467,0 @@\n-    assert(sprops.encoding != NULL);\n-    assert(sprops.sun_jnu_encoding != NULL);\n-\n","filename":"src\/java.base\/unix\/native\/libjava\/java_props_md.c","additions":0,"deletions":4,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -29,1 +29,0 @@\n-#include <assert.h>\n@@ -50,1 +49,1 @@\n-               char** variant, char** encoding);\n+               char** variant);\n@@ -170,1 +169,1 @@\n-    char * elems[5]; \/\/ lang, script, ctry, variant, encoding\n+    char * elems[4]; \/\/ lang, script, ctry, variant\n@@ -179,1 +178,1 @@\n-    for (index = 0; index < 5; index++) {\n+    for (index = 0; index < 4; index++) {\n@@ -184,1 +183,1 @@\n-                   &(elems[0]), &(elems[1]), &(elems[2]), &(elems[3]), &(elems[4]))) {\n+                   &(elems[0]), &(elems[1]), &(elems[2]), &(elems[3]))) {\n@@ -201,1 +200,1 @@\n-    for (index = 0; index < 5; index++) {\n+    for (index = 0; index < 4; index++) {\n@@ -266,1 +265,1 @@\n-               char** variant, char** encoding) {\n+               char** variant) {\n@@ -323,5 +322,0 @@\n-    \/* encoding *\/\n-    *encoding = getEncodingInternal(lcid);\n-    if (*encoding == NULL) {\n-        return FALSE;\n-    }\n@@ -643,1 +637,0 @@\n-            char * display_encoding;\n@@ -662,2 +655,1 @@\n-                           &sprops.format_variant,\n-                           &sprops.encoding);\n+                           &sprops.format_variant);\n@@ -668,6 +660,1 @@\n-                           &sprops.display_variant,\n-                           &display_encoding);\n-\n-            if (sprops.encoding == NULL) {\n-                sprops.encoding = \"UTF-8\";\n-            }\n+                           &sprops.display_variant);\n@@ -679,0 +666,1 @@\n+            sprops.encoding = sprops.sun_jnu_encoding;\n@@ -692,3 +680,0 @@\n-            assert(sprops.encoding != NULL);\n-            assert(sprops.sun_jnu_encoding != NULL);\n-\n","filename":"src\/java.base\/windows\/native\/libjava\/java_props_md.c","additions":9,"deletions":24,"binary":false,"changes":33,"status":"modified"}]}