{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2009, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2009, 2020, Oracle and\/or its affiliates. All rights reserved.\n@@ -98,4 +98,2 @@\n-        if (getsockopt(fd, SOL_SOCKET, SO_REUSEADDR, (char*)&arg, &len) == 0) {\n-            res = setsockopt(s, SOL_SOCKET, SO_REUSEADDR, (char*)&arg, len);\n-            if (res < 0) JNU_ThrowIOExceptionWithLastError(env, \"setsockopt SO_REUSEADDR\");\n-        }\n+        if (getsockopt(fd, SOL_SOCKET, SO_REUSEADDR, (char*)&arg, &len) == 0)\n+            setsockopt(s, SOL_SOCKET, SO_REUSEADDR, (char*)&arg, len);\n@@ -104,4 +102,2 @@\n-        if (getsockopt(fd, SOL_SOCKET, SO_REUSEPORT, (char*)&arg, &len) == 0) {\n-            res = setsockopt(s, SOL_SOCKET, SO_REUSEPORT, (char*)&arg, len);\n-            if (res < 0) JNU_ThrowIOExceptionWithLastError(env, \"setsockopt SO_REUSEPORT\");\n-        }\n+        if (getsockopt(fd, SOL_SOCKET, SO_REUSEPORT, (char*)&arg, &len) == 0)\n+            setsockopt(s, SOL_SOCKET, SO_REUSEPORT, (char*)&arg, len);\n@@ -110,4 +106,2 @@\n-        if (getsockopt(fd, SOL_SOCKET, SO_OOBINLINE, (char*)&arg, &len) == 0) {\n-            res = setsockopt(s, SOL_SOCKET, SO_OOBINLINE, (char*)&arg, len);\n-            if (res < 0) JNU_ThrowIOExceptionWithLastError(env, \"setsockopt SO_OOBINLINE\");\n-        }\n+        if (getsockopt(fd, SOL_SOCKET, SO_OOBINLINE, (char*)&arg, &len) == 0)\n+            setsockopt(s, SOL_SOCKET, SO_OOBINLINE, (char*)&arg, len);\n@@ -115,4 +109,2 @@\n-        if (getsockopt(fd, SOL_SOCKET, SO_LINGER, (void*)&linger, &len) == 0) {\n-            res = setsockopt(s, SOL_SOCKET, SO_LINGER, (char*)&linger, len);\n-            if (res < 0) JNU_ThrowIOExceptionWithLastError(env, \"setsockopt SO_LINGER\");\n-        }\n+        if (getsockopt(fd, SOL_SOCKET, SO_LINGER, (void*)&linger, &len) == 0)\n+            setsockopt(s, SOL_SOCKET, SO_LINGER, (char*)&linger, len);\n","filename":"src\/java.base\/unix\/native\/libnet\/SdpSupport.c","additions":9,"deletions":17,"binary":false,"changes":26,"status":"modified"}]}