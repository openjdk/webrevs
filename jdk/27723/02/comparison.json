{"files":[{"patch":"@@ -2725,3 +2725,2 @@\n-  \/\/ - UseSVE = 0, vector_length_in_bytes = 8 or 16\n-  \/\/ - UseSVE = 1, vector_length_in_bytes = 8 or 16\n-  \/\/ - UseSVE = 2, vector_length_in_bytes >= 8\n+  \/\/ - UseSVE = 0\/1, vector_length_in_bytes = 8 or 16, excluding double and long types\n+  \/\/ - UseSVE = 2, vector_length_in_bytes >= 8, for all types\n","filename":"src\/hotspot\/cpu\/aarch64\/c2_MacroAssembler_aarch64.cpp","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -3470,1 +3470,1 @@\n-       if ((size_in_bits < 512 && !VM_Version::supports_avx512vl())) {\n+       if (size_in_bits < 512 && !VM_Version::supports_avx512vl()) {\n","filename":"src\/hotspot\/cpu\/x86\/x86.ad","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -3,0 +3,1 @@\n+ * Copyright (c) 2025, NVIDIA CORPORATION & AFFILIATES. All rights reserved.\n@@ -188,1 +189,1 @@\n-        applyIfCPUFeature = {\"asimd\", \"true\"},\n+        applyIfCPUFeatureAnd = {\"asimd\", \"true\", \"sve2\", \"false\"},\n@@ -190,0 +191,3 @@\n+    @IR(counts = {IRNode.SELECT_FROM_TWO_VECTOR_VB, IRNode.VECTOR_SIZE_16, \">0\"},\n+        applyIfCPUFeature = {\"sve2\", \"true\"},\n+        applyIf = {\"MaxVectorSize\", \"16\"})\n@@ -203,1 +207,1 @@\n-        applyIf = {\"MaxVectorSize\", \">=32\"})\n+        applyIf = {\"MaxVectorSize\", \"32\"})\n@@ -217,1 +221,1 @@\n-        applyIf = {\"MaxVectorSize\", \">=64\"})\n+        applyIf = {\"MaxVectorSize\", \"64\"})\n@@ -251,1 +255,1 @@\n-        applyIf = {\"MaxVectorSize\", \">=16\"})\n+        applyIf = {\"MaxVectorSize\", \"16\"})\n@@ -265,1 +269,1 @@\n-        applyIf = {\"MaxVectorSize\", \">=32\"})\n+        applyIf = {\"MaxVectorSize\", \"32\"})\n@@ -279,1 +283,1 @@\n-        applyIf = {\"MaxVectorSize\", \">=64\"})\n+        applyIf = {\"MaxVectorSize\", \"64\"})\n@@ -312,1 +316,4 @@\n-        applyIfCPUFeatureOr = {\"sve2\", \"true\", \"avx512vl\", \"true\"},\n+        applyIfCPUFeature = {\"sve2\", \"true\"},\n+        applyIf = {\"MaxVectorSize\", \"16\"})\n+    @IR(counts = {IRNode.SELECT_FROM_TWO_VECTOR_VI, IRNode.VECTOR_SIZE_4, \">0\"},\n+        applyIfCPUFeature = {\"avx512vl\", \"true\"},\n@@ -323,1 +330,4 @@\n-        applyIfCPUFeatureOr = {\"sve2\", \"true\", \"avx512vl\", \"true\"},\n+        applyIfCPUFeature = {\"sve2\", \"true\"},\n+        applyIf = {\"MaxVectorSize\", \"32\"})\n+    @IR(counts = {IRNode.SELECT_FROM_TWO_VECTOR_VI, IRNode.VECTOR_SIZE_8, \">0\"},\n+        applyIfCPUFeature = {\"avx512vl\", \"true\"},\n@@ -334,1 +344,4 @@\n-        applyIfCPUFeatureOr = {\"sve2\", \"true\", \"avx512f\", \"true\"},\n+        applyIfCPUFeature = {\"sve2\", \"true\"},\n+        applyIf = {\"MaxVectorSize\", \"64\"})\n+    @IR(counts = {IRNode.SELECT_FROM_TWO_VECTOR_VI, IRNode.VECTOR_SIZE_16, \">0\"},\n+        applyIfCPUFeature = {\"avx512f\", \"true\"},\n@@ -365,1 +378,4 @@\n-        applyIfCPUFeatureOr = {\"sve2\", \"true\", \"avx512vl\", \"true\"},\n+        applyIfCPUFeature = {\"sve2\", \"true\"},\n+        applyIf = {\"MaxVectorSize\", \"16\"})\n+    @IR(counts = {IRNode.SELECT_FROM_TWO_VECTOR_VF, IRNode.VECTOR_SIZE_4, \">0\"},\n+        applyIfCPUFeature = {\"avx512vl\", \"true\"},\n@@ -376,1 +392,4 @@\n-        applyIfCPUFeatureOr = {\"sve2\", \"true\", \"avx512vl\", \"true\"},\n+        applyIfCPUFeature = {\"sve2\", \"true\"},\n+        applyIf = {\"MaxVectorSize\", \"32\"})\n+    @IR(counts = {IRNode.SELECT_FROM_TWO_VECTOR_VF, IRNode.VECTOR_SIZE_8, \">0\"},\n+        applyIfCPUFeature = {\"avx512vl\", \"true\"},\n@@ -387,1 +406,4 @@\n-        applyIfCPUFeatureOr = {\"sve2\", \"true\", \"avx512f\", \"true\"},\n+        applyIfCPUFeature = {\"sve2\", \"true\"},\n+        applyIf = {\"MaxVectorSize\", \"64\"})\n+    @IR(counts = {IRNode.SELECT_FROM_TWO_VECTOR_VF, IRNode.VECTOR_SIZE_16, \">0\"},\n+        applyIfCPUFeature = {\"avx512f\", \"true\"},\n@@ -410,1 +432,4 @@\n-        applyIfCPUFeatureOr = {\"sve2\", \"true\", \"avx512vl\", \"true\"},\n+        applyIfCPUFeature = {\"sve2\", \"true\"},\n+        applyIf = {\"MaxVectorSize\", \"16\"})\n+    @IR(counts = {IRNode.SELECT_FROM_TWO_VECTOR_VD, IRNode.VECTOR_SIZE_2, \">0\"},\n+        applyIfCPUFeature = {\"avx512vl\", \"true\"},\n@@ -421,1 +446,4 @@\n-        applyIfCPUFeatureOr = {\"sve2\", \"true\", \"avx512vl\", \"true\"},\n+        applyIfCPUFeature = {\"sve2\", \"true\"},\n+        applyIf = {\"MaxVectorSize\", \"32\"})\n+    @IR(counts = {IRNode.SELECT_FROM_TWO_VECTOR_VD, IRNode.VECTOR_SIZE_4, \">0\"},\n+        applyIfCPUFeature = {\"avx512vl\", \"true\"},\n@@ -432,1 +460,4 @@\n-        applyIfCPUFeatureOr = {\"sve2\", \"true\", \"avx512f\", \"true\"},\n+        applyIfCPUFeature = {\"sve2\", \"true\"},\n+        applyIf = {\"MaxVectorSize\", \"64\"})\n+    @IR(counts = {IRNode.SELECT_FROM_TWO_VECTOR_VD, IRNode.VECTOR_SIZE_8, \">0\"},\n+        applyIfCPUFeature = {\"avx512f\", \"true\"},\n@@ -455,1 +486,4 @@\n-        applyIfCPUFeatureOr = {\"sve2\", \"true\", \"avx512vl\", \"true\"},\n+        applyIfCPUFeature = {\"sve2\", \"true\"},\n+        applyIf = {\"MaxVectorSize\", \"16\"})\n+    @IR(counts = {IRNode.SELECT_FROM_TWO_VECTOR_VL, IRNode.VECTOR_SIZE_2, \">0\"},\n+        applyIfCPUFeature = {\"avx512vl\", \"true\"},\n@@ -466,1 +500,4 @@\n-        applyIfCPUFeatureOr = {\"sve2\", \"true\", \"avx512vl\", \"true\"},\n+        applyIfCPUFeature = {\"sve2\", \"true\"},\n+        applyIf = {\"MaxVectorSize\", \"32\"})\n+    @IR(counts = {IRNode.SELECT_FROM_TWO_VECTOR_VL, IRNode.VECTOR_SIZE_4, \">0\"},\n+        applyIfCPUFeature = {\"avx512vl\", \"true\"},\n@@ -477,1 +514,4 @@\n-        applyIfCPUFeatureOr = {\"sve2\", \"true\", \"avx512f\", \"true\"},\n+        applyIfCPUFeature = {\"sve2\", \"true\"},\n+        applyIf = {\"MaxVectorSize\", \"64\"})\n+    @IR(counts = {IRNode.SELECT_FROM_TWO_VECTOR_VL, IRNode.VECTOR_SIZE_8, \">0\"},\n+        applyIfCPUFeature = {\"avx512f\", \"true\"},\n","filename":"test\/hotspot\/jtreg\/compiler\/vectorapi\/TestSelectFromTwoVectorOp.java","additions":58,"deletions":18,"binary":false,"changes":76,"status":"modified"}]}