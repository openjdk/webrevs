{"files":[{"patch":"@@ -39,0 +39,1 @@\n+ * @run driver RedefineClassHelper\n@@ -55,5 +56,0 @@\n-    public static String agentClasses[] = {\n-        \"InstrumentationClassFileTransformer\",\n-        \"InstrumentationRegisterClassFileTransformer\",\n-    };\n-\n@@ -67,4 +63,0 @@\n-        String agentJar =\n-            ClassFileInstaller.writeJar(\"InstrumentationAgent.jar\",\n-                                        ClassFileInstaller.Manifest.fromSourceFile(\"..\/InstrumentationAgent.mf\"),\n-                                        agentClasses);\n@@ -72,1 +64,1 @@\n-        String agentCmdArg = \"-javaagent:\" + agentJar;\n+        String agentCmdArg = \"-javaagent:redefineagent.jar\";\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/jvmti\/redefineClasses\/OldClassAndRedefineClass.java","additions":2,"deletions":10,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -25,3 +25,0 @@\n-import java.lang.instrument.ClassDefinition;\n-import java.lang.instrument.Instrumentation;\n-\n@@ -38,2 +35,1 @@\n-        Instrumentation instrumentation = InstrumentationRegisterClassFileTransformer.getInstrumentation();\n-        System.out.println(\"INFO: instrumentation = \" + instrumentation);\n+        System.out.println(\"INFO: instrumentation = \" + RedefineClassHelper.instrumentation);\n@@ -42,1 +38,1 @@\n-        instrumentation.redefineClasses(new ClassDefinition(c, bytes));\n+        RedefineClassHelper.redefineClass(c, bytes);\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/jvmti\/redefineClasses\/OldClassAndRedefineClassApp.java","additions":2,"deletions":6,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -26,2 +26,0 @@\n-import java.lang.instrument.ClassDefinition;\n-import java.lang.instrument.Instrumentation;\n@@ -42,1 +40,0 @@\n-        Instrumentation instrumentation = InstrumentationRegisterClassFileTransformer.getInstrumentation();\n@@ -45,1 +42,1 @@\n-        instrumentation.redefineClasses(new ClassDefinition(superCls, bytes));\n+        RedefineClassHelper.redefineClass(superCls, bytes);\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/jvmti\/redefineClasses\/RedefineBootClassApp.java","additions":1,"deletions":4,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -39,0 +39,1 @@\n+ * @run driver RedefineClassHelper\n@@ -59,6 +60,0 @@\n-    };\n-    public static String sharedClasses[] = TestCommon.concat(bootClasses, appClasses);\n-\n-    public static String agentClasses[] = {\n-        \"InstrumentationClassFileTransformer\",\n-        \"InstrumentationRegisterClassFileTransformer\",\n@@ -67,0 +62,1 @@\n+    public static String sharedClasses[] = TestCommon.concat(bootClasses, appClasses);\n@@ -77,4 +73,0 @@\n-        String agentJar =\n-            ClassFileInstaller.writeJar(\"InstrumentationAgent.jar\",\n-                                        ClassFileInstaller.Manifest.fromSourceFile(\"..\/InstrumentationAgent.mf\"),\n-                                        agentClasses);\n@@ -83,1 +75,1 @@\n-        String agentCmdArg = \"-javaagent:\" + agentJar;\n+        String agentCmdArg = \"-javaagent:redefineagent.jar\";\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/jvmti\/redefineClasses\/RedefineBootClassTest.java","additions":3,"deletions":11,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -26,2 +26,0 @@\n-import java.lang.instrument.ClassDefinition;\n-import java.lang.instrument.Instrumentation;\n@@ -43,1 +41,0 @@\n-        Instrumentation instrumentation = InstrumentationRegisterClassFileTransformer.getInstrumentation();\n@@ -46,1 +43,1 @@\n-        instrumentation.redefineClasses(new ClassDefinition(superCls, bytes));\n+        RedefineClassHelper.redefineClass(superCls, bytes);\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/jvmti\/redefineClasses\/RedefineOldSuperApp.java","additions":1,"deletions":4,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -40,0 +40,1 @@\n+ * @run driver RedefineClassHelper\n@@ -58,6 +59,0 @@\n-    };\n-    public static String sharedClasses[] = TestCommon.concat(appClasses);\n-\n-    public static String agentClasses[] = {\n-        \"InstrumentationClassFileTransformer\",\n-        \"InstrumentationRegisterClassFileTransformer\",\n@@ -66,0 +61,1 @@\n+    public static String sharedClasses[] = TestCommon.concat(appClasses);\n@@ -74,4 +70,0 @@\n-        String agentJar =\n-            ClassFileInstaller.writeJar(\"InstrumentationAgent.jar\",\n-                                        ClassFileInstaller.Manifest.fromSourceFile(\"..\/InstrumentationAgent.mf\"),\n-                                        agentClasses);\n@@ -79,1 +71,1 @@\n-        String agentCmdArg = \"-javaagent:\" + agentJar;\n+        String agentCmdArg = \"-javaagent:redefineagent.jar\";\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/jvmti\/redefineClasses\/RedefineOldSuperTest.java","additions":3,"deletions":11,"binary":false,"changes":14,"status":"modified"}]}