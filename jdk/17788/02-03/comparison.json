{"files":[{"patch":"@@ -2021,9 +2021,5 @@\n-static void flush_marking_stats_cache() {\n-  struct FlushMarkingStatsCache : public WorkerTask {\n-    FlushMarkingStatsCache() : WorkerTask(\"FlushMarkingStatsCache\") {}\n-    void work(uint worker_id) override {\n-      ParCompactionManager* cm = ParCompactionManager::gc_thread_compaction_manager(worker_id);\n-      cm->flush_and_destroy_marking_stats_cache();\n-    }\n-  } task;\n-  ParallelScavengeHeap::heap()->workers().run_task(&task);\n+static void flush_marking_stats_cache(const uint num_workers) {\n+  for (uint i = 0; i < num_workers; ++i) {\n+    ParCompactionManager* cm = ParCompactionManager::gc_thread_compaction_manager(i);\n+    cm->flush_and_destroy_marking_stats_cache();\n+  }\n@@ -2064,1 +2060,1 @@\n-    flush_marking_stats_cache();\n+    flush_marking_stats_cache(active_gc_threads);\n","filename":"src\/hotspot\/share\/gc\/parallel\/psParallelCompact.cpp","additions":6,"deletions":10,"binary":false,"changes":16,"status":"modified"}]}