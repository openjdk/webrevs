{"files":[{"patch":"@@ -84,0 +84,10 @@\n+void SuspendResumeManager::set_suspended_with_id(int64_t id, bool register_vthread_SR) {\n+#if INCLUDE_JVMTI\n+  if (register_vthread_SR) {\n+    assert(_target->is_vthread_mounted(), \"sanity check\");\n+    JvmtiVTSuspender::register_vthread_suspend(id);\n+  }\n+#endif\n+  AtomicAccess::store(&_suspended, true);\n+}\n+\n@@ -94,7 +104,1 @@\n-#if INCLUDE_JVMTI\n-    if (register_vthread_SR) {\n-      assert(_target->is_vthread_mounted(), \"sanity check\");\n-      JvmtiVTSuspender::register_vthread_suspend(id);\n-    }\n-#endif\n-    AtomicAccess::store(&_suspended, true);\n+    set_suspended_with_id(id, register_vthread_SR);\n","filename":"src\/hotspot\/share\/runtime\/suspendResumeManager.cpp","additions":11,"deletions":7,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -61,0 +61,1 @@\n+  void set_suspended_with_id(int64_t id, bool register_vthread_SR);\n","filename":"src\/hotspot\/share\/runtime\/suspendResumeManager.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"}]}