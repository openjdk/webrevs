{"files":[{"patch":"@@ -320,1 +320,1 @@\n-#define IOE_FORMAT \"error=%d, %s%s\"\n+#define IOE_FORMAT \"%s, error: %d (%s) %s\"\n@@ -334,1 +334,1 @@\n-throwIOExceptionImpl(JNIEnv *env, int errnum, const char *defaultDetail, const char *internalErrorDetail)\n+throwIOExceptionImpl(JNIEnv *env, int errnum, const char *externalDetail, const char *internalDetail)\n@@ -336,1 +336,1 @@\n-    const char *detail = defaultDetail;\n+    const char *errorDetail;\n@@ -344,2 +344,7 @@\n-        if (ret != EINVAL)\n-            detail = tmpbuf;\n+        if (ret != EINVAL) {\n+            errorDetail = tmpbuf;\n+        } else {\n+            errorDetail = \"unknown\";\n+        }\n+    } else {\n+        errorDetail = \"none\";\n@@ -347,0 +352,1 @@\n+\n@@ -348,1 +354,1 @@\n-    fmtsize = sizeof(IOE_FORMAT) + strlen(internalErrorDetail) + strlen(detail) + 3 * sizeof(errnum);\n+    fmtsize = sizeof(IOE_FORMAT) + strlen(externalDetail) + 3 * sizeof(errnum) + strlen(errorDetail) +  strlen(internalDetail) + 1;\n@@ -353,1 +359,1 @@\n-    snprintf(errmsg, fmtsize, IOE_FORMAT, errnum, detail, internalErrorDetail);\n+    snprintf(errmsg, fmtsize, IOE_FORMAT, externalDetail, errnum, errorDetail, internalDetail);\n@@ -368,1 +374,1 @@\n-throwInternalIOException(JNIEnv *env, int errnum, const char *defaultDetail, int mode)\n+throwInternalIOException(JNIEnv *env, int errnum, const char *externalDetail, int mode)\n@@ -372,1 +378,1 @@\n-      throwIOExceptionImpl(env, errnum, defaultDetail, SPAWN_HELPER_INTERNAL_ERROR_MSG);\n+      throwIOExceptionImpl(env, errnum, externalDetail, SPAWN_HELPER_INTERNAL_ERROR_MSG);\n@@ -375,1 +381,1 @@\n-      throwIOExceptionImpl(env, errnum, defaultDetail, \"\");\n+      throwIOExceptionImpl(env, errnum, externalDetail, \"\");\n@@ -383,1 +389,1 @@\n-throwIOException(JNIEnv *env, int errnum, const char *defaultDetail)\n+throwIOException(JNIEnv *env, int errnum, const char *externalDetail)\n@@ -385,1 +391,1 @@\n-  throwIOExceptionImpl(env, errnum, defaultDetail, \"\");\n+  throwIOExceptionImpl(env, errnum, externalDetail, \"\");\n@@ -395,1 +401,1 @@\n-            \"Failed to exec spawn helper: pid: %d, exit value: %d\",\n+            \"Failed to exec spawn helper: pid: %d, exit code: %d\",\n","filename":"src\/java.base\/unix\/native\/libjava\/ProcessImpl_md.c","additions":19,"deletions":13,"binary":false,"changes":32,"status":"modified"}]}