{"files":[{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2014, 2023, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2014, 2024, Oracle and\/or its affiliates. All rights reserved.\n","filename":"make\/conf\/module-loader-map.conf","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2024, Oracle and\/or its affiliates. All rights reserved.\n","filename":"make\/jdk\/src\/classes\/build\/tools\/module\/GenModuleLoaderMap.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2015, 2020, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2015, 2024, Oracle and\/or its affiliates. All rights reserved.\n","filename":"make\/modules\/java.base\/gensrc\/GensrcModuleLoaderMap.gmk","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2024, Oracle and\/or its affiliates. All rights reserved.\n","filename":"src\/java.base\/share\/classes\/java\/lang\/Module.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -885,1 +885,1 @@\n-     * Returns the module with the given name in this layer only.\n+     * Update module named {@code name} to allow access to restricted methods.\n@@ -887,5 +887,3 @@\n-     * @param  name\n-     *         The name of the module to find\n-     *\n-     * @return The module with the given name or {@code null}\n-     *         if there isn't a module with this name in this layer\n+     * @param name the name of the module for which the native access should be enabled\n+     * @return {@code true} iff the module was present in this layer,\n+     *         {@code false} otherwise\n@@ -893,2 +891,8 @@\n-    Module findModuleInThisLayer(String name) {\n-        return nameToModule.get(name);\n+    boolean addEnableNativeAccess(String name) {\n+        Module m = nameToModule.get(name);\n+        if (m != null) {\n+            m.implAddEnableNativeAccess();\n+            return true;\n+        } else {\n+            return false;\n+        }\n@@ -897,1 +901,0 @@\n-\n","filename":"src\/java.base\/share\/classes\/java\/lang\/ModuleLayer.java","additions":13,"deletions":10,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -2463,7 +2463,1 @@\n-                Module m = layer.findModuleInThisLayer(name);\n-                if (m != null) {\n-                    m.implAddEnableNativeAccess();\n-                    return true;\n-                } else {\n-                    return false;\n-                }\n+                return layer.addEnableNativeAccess(name);\n","filename":"src\/java.base\/share\/classes\/java\/lang\/System.java","additions":1,"deletions":7,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2024, Oracle and\/or its affiliates. All rights reserved.\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/access\/JavaLangAccess.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -805,1 +805,2 @@\n-     * Process the --enable-native-access option to grant access to restricted methods to selected modules.\n+     * Grants native access to modules selected using the --enable-native-access\n+     * command line option, and also to JDK modules that need the access.\n@@ -812,0 +813,4 @@\n+    \/**\n+     * Grants native access for the given modules in the given layer.\n+     * Warns optionally about modules that were specified, but not present in the layer.\n+     *\/\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/module\/ModuleBootstrap.java","additions":7,"deletions":2,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2024, Oracle and\/or its affiliates. All rights reserved.\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/module\/ModuleLoaderMap.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}