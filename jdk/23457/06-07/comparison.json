{"files":[{"patch":"@@ -25,0 +25,2 @@\n+import javax.print.DocFlavor;\n+import javax.print.DocPrintJob;\n@@ -26,0 +28,3 @@\n+import javax.print.PrintService;\n+import javax.print.PrintServiceLookup;\n+import javax.print.SimpleDoc;\n@@ -33,5 +38,0 @@\n-import javax.print.DocFlavor;\n-import javax.print.SimpleDoc;\n-import javax.print.PrintServiceLookup;\n-import javax.print.PrintService;\n-import javax.print.DocPrintJob;\n@@ -50,0 +50,1 @@\n+ * @requires (os.family == \"linux\" | os.family == \"mac\")\n@@ -51,1 +52,1 @@\n- * @run main\/othervm -Dsun.print.ippdebug=true UnixPrintJobOptionsTest\n+ * @run main\/manual\/othervm -Dsun.print.ippdebug=true UnixPrintJobOptionsTest\n@@ -73,3 +74,2 @@\n-\n-        ByteArrayOutputStream os = new ByteArrayOutputStream();\n-        PrintStream printStream = new PrintStream(os);\n+        ByteArrayOutputStream debugOutputStream = new ByteArrayOutputStream();\n+        PrintStream printStream = new PrintStream(debugOutputStream);\n@@ -77,0 +77,9 @@\n+        try {\n+            if (!executeTest(debugOutputStream)) {\n+                System.out.println(\"Acceptable print service not found\");\n+            }\n+        } finally {\n+            System.setOut(origPrintStream);\n+            System.out.println(debugOutputStream.toString());\n+        }\n+    }\n@@ -78,2 +87,6 @@\n-        boolean success = false;\n-\n+    \/**\n+     * Tries to execute the test on one of the available print services\n+     * @param debugOutputStream 'standard' output stream\n+     * @return true - test was run and pass, false - test was not run\n+     *\/\n+    private static boolean executeTest(ByteArrayOutputStream debugOutputStream) {\n@@ -84,1 +97,2 @@\n-                Object supportedValues = testPrintService.getSupportedAttributeValues(attrClass, docFlavor, attributeSet);\n+                Object supportedValues = testPrintService\n+                        .getSupportedAttributeValues(attrClass, docFlavor, attributeSet);\n@@ -117,3 +131,0 @@\n-            } finally {\n-                System.setOut(origPrintStream);\n-\n@@ -121,2 +132,1 @@\n-            String debug = os.toString();\n-            System.out.print(debug);\n+            String debug = debugOutputStream.toString();\n@@ -127,2 +137,1 @@\n-                success = true;\n-                break;\n+                return true;\n@@ -131,4 +140,1 @@\n-        if (!success) {\n-            System.setOut(origPrintStream);\n-            System.out.println(\"Acceptable print service not found\");\n-        }\n+        return false;\n","filename":"test\/jdk\/javax\/print\/UnixPrintJobOptionsTest.java","additions":29,"deletions":23,"binary":false,"changes":52,"status":"modified"}]}