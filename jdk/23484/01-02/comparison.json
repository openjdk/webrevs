{"files":[{"patch":"@@ -51,0 +51,1 @@\n+bool CDSConfig::_new_aot_flags_used = false;\n@@ -214,1 +215,1 @@\n-            log_error(cds)(\"Not a valid %s (%s)\", old_cds_flags_used() ? \"archive\" : \"AOT cache\", SharedArchiveFile);\n+            log_error(cds)(\"Not a valid %s (%s)\", new_aot_flags_used() ? \"AOT cache\" : \"archive\", SharedArchiveFile);\n@@ -338,3 +339,1 @@\n-      if (old_cds_flags_used()) {\n-        log_info(cds)(\"CDS is disabled when the %s option is specified.\", option);\n-      } else {\n+      if (new_aot_flags_used()) {\n@@ -342,0 +341,2 @@\n+      } else {\n+        log_info(cds)(\"CDS is disabled when the %s option is specified.\", option);\n@@ -352,1 +353,1 @@\n-  if (_old_cds_flags_used && !alias_is_default) {\n+  if (old_cds_flags_used() && !alias_is_default) {\n@@ -374,0 +375,2 @@\n+  } else {\n+    _new_aot_flags_used = true;\n@@ -592,1 +595,1 @@\n-  } else if (!CDSConfig::old_cds_flags_used()) {\n+  } else if (new_aot_flags_used()) {\n@@ -602,1 +605,1 @@\n-  } else if (!CDSConfig::old_cds_flags_used()) {\n+  } else if (new_aot_flags_used()) {\n","filename":"src\/hotspot\/share\/cds\/cdsConfig.cpp","additions":10,"deletions":7,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -51,0 +51,1 @@\n+  static bool  _new_aot_flags_used;\n@@ -80,0 +81,1 @@\n+  static bool new_aot_flags_used()                           { return CDS_ONLY(_new_aot_flags_used) NOT_CDS(false); }\n","filename":"src\/hotspot\/share\/cds\/cdsConfig.hpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1387,3 +1387,1 @@\n-      if (CDSConfig::old_cds_flags_used()) {\n-        log_warning(cds)(\"Not a base shared archive: %s\", _full_path);\n-      } else {\n+      if (CDSConfig::new_aot_flags_used()) {\n@@ -1391,0 +1389,2 @@\n+      } else {\n+        log_warning(cds)(\"Not a base shared archive: %s\", _full_path);\n@@ -1785,1 +1785,1 @@\n-    } else if (!CDSConfig::old_cds_flags_used()) {\n+    } else if (CDSConfig::new_aot_flags_used()) {\n","filename":"src\/hotspot\/share\/cds\/filemap.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -835,1 +835,1 @@\n-  if (!CDSConfig::old_cds_flags_used()) {\n+  if (CDSConfig::new_aot_flags_used()) {\n@@ -1142,1 +1142,1 @@\n-  } else if (!CDSConfig::old_cds_flags_used()) {\n+  } else if (CDSConfig::new_aot_flags_used()) {\n","filename":"src\/hotspot\/share\/cds\/metaspaceShared.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1369,4 +1369,2 @@\n-                   CDSConfig::old_cds_flags_used() ? \"CDS\" : \"AOT cache\");\n-    if (CDSConfig::old_cds_flags_used()) {\n-      vm_exit_during_initialization(\"Unable to use shared archive\", message);\n-    } else {\n+                   CDSConfig::new_aot_flags_used() ? \"AOT cache\" : \"CDS\");\n+    if (CDSConfig::new_aot_flags_used()) {\n@@ -1374,0 +1372,2 @@\n+    } else {\n+      vm_exit_during_initialization(\"Unable to use shared archive\", message);\n@@ -1376,3 +1376,1 @@\n-    if (CDSConfig::old_cds_flags_used()) {\n-      log_info(cds)(\"Unable to use shared archive: %s\", message);\n-    } else {\n+    if (CDSConfig::new_aot_flags_used()) {\n@@ -1380,0 +1378,2 @@\n+    } else {\n+      log_info(cds)(\"Unable to use shared archive: %s\", message);\n","filename":"src\/hotspot\/share\/runtime\/arguments.cpp","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -45,0 +45,1 @@\n+ * @requires vm.cds.supports.aot.class.linking\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/applications\/JavacBench.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"}]}