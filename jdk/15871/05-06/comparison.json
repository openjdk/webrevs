{"files":[{"patch":"@@ -1806,0 +1806,8 @@\n+  \/\/ Perf expects to find the map file at \/tmp\/perf-<pid>.map\n+  \/\/ if the file name is not specified.\n+  char fname[32];\n+  if (filename == nullptr) {\n+    jio_snprintf(fname, sizeof(fname), \"\/tmp\/perf-%d.map\", os::current_process_id());\n+    filename = fname;\n+  }\n+\n@@ -1824,8 +1832,0 @@\n-\n-void CodeCache::write_default_perf_map() {\n-  \/\/ Perf expects to find the map file at \/tmp\/perf-<pid>.map.\n-  \/\/ It is used as the default file name.\n-  char fname[32];\n-  jio_snprintf(fname, sizeof(fname), \"\/tmp\/perf-%d.map\", os::current_process_id());\n-  write_perf_map(fname);\n-}\n","filename":"src\/hotspot\/share\/code\/codeCache.cpp","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -234,2 +234,1 @@\n-  LINUX_ONLY(static void write_perf_map(const char* filename);)\n-  LINUX_ONLY(static void write_default_perf_map();)\n+  LINUX_ONLY(static void write_perf_map(const char* filename = nullptr);)\n","filename":"src\/hotspot\/share\/code\/codeCache.hpp","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -506,1 +506,1 @@\n-    CodeCache::write_default_perf_map();\n+    CodeCache::write_perf_map();\n","filename":"src\/hotspot\/share\/runtime\/java.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -853,5 +853,1 @@\n-  if (_filename.value() != nullptr) {\n-    CodeCache::write_perf_map(_filename.value());\n-  } else {\n-    CodeCache::write_default_perf_map();\n-  }\n+  CodeCache::write_perf_map(_filename.value());\n","filename":"src\/hotspot\/share\/services\/diagnosticCommand.cpp","additions":1,"deletions":5,"binary":false,"changes":6,"status":"modified"}]}