{"files":[{"patch":"@@ -76,0 +76,1 @@\n+    \/\/ Disable embedded strip Java plugin, with native plugin present.\n@@ -94,0 +95,1 @@\n+    \/\/ Disable embedded strip Java plugin, and without native plugin present.\n@@ -114,0 +116,2 @@\n+        test.testOnlyNativePlugin();\n+        test.testNoOperation();\n","filename":"test\/jdk\/tools\/jlink\/plugins\/DefaultStripDebugPluginTest.java","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -35,1 +35,0 @@\n-import java.nio.file.Paths;\n@@ -42,0 +41,1 @@\n+import jdk.test.lib.util.FileUtils;\n@@ -51,0 +51,1 @@\n+ * @library \/test\/lib\n@@ -57,1 +58,2 @@\n- * @build tests.*\n+ * @build jdk.test.lib.util.FileUtils\n+ *        tests.*\n@@ -64,1 +66,1 @@\n-    private static Path src = Paths.get(\"src\").toAbsolutePath();\n+    private static Path src = Path.of(\"src\").toAbsolutePath();\n@@ -106,1 +108,1 @@\n-        rmdir(Paths.get(\"img\"));\n+        FileUtils.deleteFileTreeWithRetry(Path.of(\"img\"));\n@@ -117,17 +119,0 @@\n-    \/**\n-     * Recursively remove a Directory\n-     *\n-     * @param dir Directory to delete\n-     * @throws IOException If an error occurs\n-     *\/\n-    static void rmdir(Path dir) throws IOException {\n-        \/\/ Nothing to do if the file does not exist\n-        if (!Files.exists(dir)) {\n-            return;\n-        }\n-        try (Stream<Path> walk = Files.walk(dir)) {\n-            walk.sorted(Comparator.reverseOrder())\n-                    .map(Path::toFile)\n-                    .forEach(File::delete);\n-        }\n-    }\n@@ -152,1 +137,1 @@\n-        Path moduleDir = Paths.get(dirName).toAbsolutePath();\n+        Path moduleDir = Path.of(dirName).toAbsolutePath();\n@@ -201,1 +186,1 @@\n-        var imageDir = Paths.get(\"img\");\n+        var imageDir = Path.of(\"img\");\n@@ -211,1 +196,1 @@\n-        var imageDir = Paths.get(\"img\");\n+        var imageDir = Path.of(\"img\");\n@@ -220,2 +205,2 @@\n-    public void testWithoutStripParameterName() throws Exception {\n-        var imageDir = Paths.get(\"img\");\n+    public void testBothStripOptions() throws Exception {\n+        var imageDir = Path.of(\"img\");\n@@ -228,0 +213,11 @@\n+\n+    @ParameterizedTest\n+    @FieldSource(\"testJmods\")\n+    public void testOnlyStripJavaDebugAttributes() throws Exception {\n+        var imageDir = Path.of(\"img\");\n+        var jmod = testJmods.get(0);\n+        buildImage(jmod.moduleDir(), imageDir,\n+                \"--strip-java-debug-attributes\")\n+            .assertSuccess();\n+        assertHasParameterNames(imageDir, jmod.withParameterNames());\n+    }\n","filename":"test\/jdk\/tools\/jlink\/plugins\/StripParameterNamesTest.java","additions":22,"deletions":26,"binary":false,"changes":48,"status":"modified"}]}