{"files":[{"patch":"@@ -400,15 +400,7 @@\n-  } else if ((has_timestamp() && _timestamp != st.st_mtime) ||\n-             _filesize != st.st_size) {\n-    ok = false;\n-    if (PrintSharedArchiveAndExit) {\n-      log_warning(cds)(_timestamp != st.st_mtime ?\n-                                 \"Timestamp mismatch\" :\n-                                 \"File size mismatch\");\n-    } else {\n-      const char* bad_jar_msg = \"A jar file is not the one used while building the shared archive file:\";\n-      log_warning(cds)(\"%s %s\", bad_jar_msg, name);\n-      if (!log_is_enabled(Info, cds)) {\n-        log_warning(cds)(\"%s %s\", bad_jar_msg, name);\n-      }\n-      if (_timestamp != st.st_mtime) {\n-        log_warning(cds)(\"%s timestamp has changed.\", name);\n+  } else {\n+    bool size_differs = _filesize != st.st_size;\n+    bool time_differs = has_timestamp() && _timestamp != st.st_mtime;\n+    if (time_differs || size_differs) {\n+      ok = false;\n+      if (PrintSharedArchiveAndExit) {\n+        log_warning(cds)(time_differs ? \"Timestamp mismatch\" : \"File size mismatch\");\n@@ -416,1 +408,10 @@\n-        log_warning(cds)(\"%s size has changed.\", name);\n+        const char* bad_file_msg = \"This file is not the one used while building the shared archive file:\";\n+        log_warning(cds)(\"%s %s\", bad_file_msg, name);\n+        if (!log_is_enabled(Info, cds)) {\n+          log_warning(cds)(\"%s %s\", bad_file_msg, name);\n+        }\n+        if (time_differs) {\n+          log_warning(cds)(\"%s timestamp has changed.\", name);\n+        } else {\n+          log_warning(cds)(\"%s size has changed.\", name);\n+        }\n","filename":"src\/hotspot\/share\/cds\/filemap.cpp","additions":17,"deletions":16,"binary":false,"changes":33,"status":"modified"}]}