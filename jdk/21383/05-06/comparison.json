{"files":[{"patch":"@@ -29,2 +29,0 @@\n-#define UNDECORATED_DEFAULTS \\\n-  UNDECORATED_DEFAULT(AnyLevel, LOG_TAGS(jit, inlining))\n@@ -52,0 +50,3 @@\n+#define UNDECORATED_DEFAULTS \\\n+  UNDECORATED_DEFAULT(AnyLevel, LOG_TAGS(jit, inlining))\n+\n@@ -53,1 +54,1 @@\n-#define UNDECORATED_DEFAULT(level, ...) LogDecorators::DefaultUndecoratedSelection(level, __VA_ARGS__),\n+#define UNDECORATED_DEFAULT(level, ...) LogDecorators::DefaultUndecoratedSelection::make<level, __VA_ARGS__>(),\n@@ -55,1 +56,1 @@\n-#undef UNDECORATED_TAGSET\n+#undef UNDECORATED_DEFAULT\n@@ -57,1 +58,4 @@\n-const size_t LogDecorators::number_of_default_decorators = sizeof(default_decorators) \/ sizeof(LogDecorators::DefaultUndecoratedSelection);\n+\n+#undef UNDERCORATED_DEFAULTS\n+\n+const size_t LogDecorators::number_of_default_decorators = ARRAY_SIZE(default_decorators);\n","filename":"src\/hotspot\/share\/logging\/logDecorators.cpp","additions":9,"deletions":5,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -79,13 +79,3 @@\n-  public:\n-    template<typename... Tags>\n-    DefaultUndecoratedSelection(LogLevelType level, LogTagType first, Tags... rest) : _selection(LogSelection::Invalid) {\n-      static_assert(1 + sizeof...(rest) <= LogTag::MaxTags + 1,\n-                    \"Too many tags specified!\");\n-\n-      LogTagType tag_arr[LogTag::MaxTags + 1] = { first, rest... };\n-\n-      if (sizeof...(rest) == LogTag::MaxTags) {\n-        assert(tag_arr[sizeof...(rest)] == LogTag::__NO_TAG,\n-               \"Too many tags specified! Can only have up to \" SIZE_FORMAT \" tags in a tag set.\", LogTag::MaxTags);\n-      }\n-\n+    DefaultUndecoratedSelection(LogLevelType level, LogTagType t0, LogTagType t1, LogTagType t2,\n+                                LogTagType t3, LogTagType t4) : _selection(LogSelection::Invalid) {\n+      LogTagType tag_arr[LogTag::MaxTags] = { t0, t1, t2, t3, t4 };\n@@ -95,0 +85,8 @@\n+  public:\n+    template <LogLevelType Level, LogTagType T0, LogTagType T1 = LogTag::__NO_TAG, LogTagType T2 = LogTag::__NO_TAG,\n+              LogTagType T3 = LogTag::__NO_TAG, LogTagType T4 = LogTag::__NO_TAG, LogTagType GuardTag = LogTag::__NO_TAG>\n+    static DefaultUndecoratedSelection make() {\n+      STATIC_ASSERT(GuardTag == LogTag::__NO_TAG);\n+      return DefaultUndecoratedSelection(Level, T0, T1, T2, T3, T4);\n+    }\n+\n","filename":"src\/hotspot\/share\/logging\/logDecorators.hpp","additions":11,"deletions":13,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -37,3 +37,3 @@\n-    { LogLevelType::Trace, LogTagType::_gc },\n-    { LogLevelType::Trace, LogTagType::_jit },\n-    { LogLevelType::NotMentioned, LogTagType::_ref },\n+    LD::DefaultUndecoratedSelection::make<LogLevelType::Trace, LOG_TAGS(gc)>(),\n+    LD::DefaultUndecoratedSelection::make<LogLevelType::Trace, LOG_TAGS(jit)>(),\n+    LD::DefaultUndecoratedSelection::make<LogLevelType::NotMentioned, LOG_TAGS(ref)>(),\n","filename":"test\/hotspot\/gtest\/logging\/test_logDefaultDecorators.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"}]}