{"files":[{"patch":"@@ -370,1 +370,1 @@\n-static char* reserve_mmapped_memory(size_t bytes, char* requested_addr, MEMFLAGS flag) {\n+static char* reserve_mmapped_memory(size_t bytes, char* requested_addr, MemType type) {\n@@ -385,1 +385,1 @@\n-    MemTracker::record_virtual_memory_reserve((address)addr, bytes, CALLER_PC, flag);\n+    MemTracker::record_virtual_memory_reserve((address)addr, bytes, CALLER_PC, type);\n@@ -498,1 +498,1 @@\n-char* os::map_memory_to_file_aligned(size_t size, size_t alignment, int file_desc, MEMFLAGS flag) {\n+char* os::map_memory_to_file_aligned(size_t size, size_t alignment, int file_desc, MemType type) {\n@@ -506,1 +506,1 @@\n-  char* extra_base = reserve_mmapped_memory(extra_size, nullptr, flag);\n+  char* extra_base = reserve_mmapped_memory(extra_size, nullptr, type);\n","filename":"src\/hotspot\/os\/posix\/os_posix.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -3431,1 +3431,1 @@\n-static char* map_or_reserve_memory_aligned(size_t size, size_t alignment, int file_desc, MEMFLAGS flag = mtNone) {\n+static char* map_or_reserve_memory_aligned(size_t size, size_t alignment, int file_desc, MemType type = mtNone) {\n@@ -3444,2 +3444,2 @@\n-    char* extra_base = file_desc != -1 ? os::map_memory_to_file(extra_size, file_desc, flag) :\n-                                         os::reserve_memory(extra_size, false, flag);\n+    char* extra_base = file_desc != -1 ? os::map_memory_to_file(extra_size, file_desc, type) :\n+                                         os::reserve_memory(extra_size, false, type);\n@@ -3461,2 +3461,2 @@\n-    aligned_base = file_desc != -1 ? os::attempt_map_memory_to_file_at(aligned_base, size, file_desc, flag) :\n-                                     os::attempt_reserve_memory_at(aligned_base, size, false, flag);\n+    aligned_base = file_desc != -1 ? os::attempt_map_memory_to_file_at(aligned_base, size, file_desc, type) :\n+                                     os::attempt_reserve_memory_at(aligned_base, size, false, type);\n@@ -3475,2 +3475,2 @@\n-char* os::map_memory_to_file_aligned(size_t size, size_t alignment, int fd, MEMFLAGS flag) {\n-  return map_or_reserve_memory_aligned(size, alignment, fd, flag);\n+char* os::map_memory_to_file_aligned(size_t size, size_t alignment, int fd, MemType type) {\n+  return map_or_reserve_memory_aligned(size, alignment, fd, type);\n","filename":"src\/hotspot\/os\/windows\/os_windows.cpp","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -1716,1 +1716,1 @@\n-                        bool allow_exec, MEMFLAGS flags = mtNone) {\n+                        bool allow_exec, MemType type = mtNone) {\n@@ -1719,1 +1719,1 @@\n-                             allow_exec, flags);\n+                             allow_exec, type);\n","filename":"src\/hotspot\/share\/cds\/filemap.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2021, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2021, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,1 +32,1 @@\n-template <typename E, MEMFLAGS F>\n+template <typename E, MemType F>\n","filename":"src\/hotspot\/share\/gc\/g1\/g1BatchedTask.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,1 +32,1 @@\n-G1MonotonicArena::Segment::Segment(uint slot_size, uint num_slots, Segment* next, MEMFLAGS flag) :\n+G1MonotonicArena::Segment::Segment(uint slot_size, uint num_slots, Segment* next, MemType type) :\n@@ -37,1 +37,1 @@\n-  _mem_flag(flag) {\n+  _mem_type(type) {\n@@ -44,1 +44,1 @@\n-                                                                     MEMFLAGS mem_flag) {\n+                                                                     MemType mem_type) {\n@@ -46,2 +46,2 @@\n-  char* alloc_block = NEW_C_HEAP_ARRAY(char, block_size, mem_flag);\n-  return new (alloc_block) Segment(slot_size, num_slots, next, mem_flag);\n+  char* alloc_block = NEW_C_HEAP_ARRAY(char, block_size, mem_type);\n+  return new (alloc_block) Segment(slot_size, num_slots, next, mem_type);\n@@ -57,1 +57,1 @@\n-  FREE_C_HEAP_ARRAY(_mem_flag, segment);\n+  FREE_C_HEAP_ARRAY(_mem_type, segment);\n@@ -111,1 +111,1 @@\n-    next = Segment::create_segment(slot_size(), num_slots, prev, _alloc_options->mem_flag());\n+    next = Segment::create_segment(slot_size(), num_slots, prev, _alloc_options->mem_type());\n","filename":"src\/hotspot\/share\/gc\/g1\/g1MonotonicArena.cpp","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -30,1 +30,1 @@\n-#include \"nmt\/memflags.hpp\"\n+#include \"nmt\/memType.hpp\"\n@@ -123,1 +123,1 @@\n-  const MEMFLAGS _mem_flag;\n+  const MemType _mem_type;\n@@ -139,1 +139,1 @@\n-  Segment(uint slot_size, uint num_slots, Segment* next, MEMFLAGS flag);\n+  Segment(uint slot_size, uint num_slots, Segment* next, MemType type);\n@@ -176,1 +176,1 @@\n-  static Segment* create_segment(uint slot_size, uint num_slots, Segment* next, MEMFLAGS mem_flag);\n+  static Segment* create_segment(uint slot_size, uint num_slots, Segment* next, MemType mem_type);\n@@ -225,1 +225,1 @@\n-  const MEMFLAGS _mem_flag;\n+  const MemType _mem_type;\n@@ -233,2 +233,2 @@\n-  AllocOptions(MEMFLAGS mem_flag, uint slot_size, uint initial_num_slots, uint max_num_slots, uint alignment) :\n-    _mem_flag(mem_flag),\n+  AllocOptions(MemType mem_type, uint slot_size, uint initial_num_slots, uint max_num_slots, uint alignment) :\n+    _mem_type(mem_type),\n@@ -253,1 +253,1 @@\n-  MEMFLAGS mem_flag() const {return _mem_flag; }\n+  MemType mem_type() const {return _mem_type; }\n","filename":"src\/hotspot\/share\/gc\/g1\/g1MonotonicArena.hpp","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -43,1 +43,1 @@\n-                                             MEMFLAGS type) :\n+                                             MemType type) :\n@@ -75,1 +75,1 @@\n-                                      MEMFLAGS type) :\n+                                      MemType type) :\n@@ -167,1 +167,1 @@\n-                                       MEMFLAGS type) :\n+                                       MemType type) :\n@@ -266,1 +266,1 @@\n-                                                            MEMFLAGS type) {\n+                                                            MemType type) {\n","filename":"src\/hotspot\/share\/gc\/g1\/g1RegionToSpaceMapper.cpp","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -55,1 +55,1 @@\n-  MEMFLAGS _memory_type;\n+  MemType _memory_type;\n@@ -57,1 +57,1 @@\n-  G1RegionToSpaceMapper(ReservedSpace rs, size_t used_size, size_t page_size, size_t region_granularity, size_t commit_factor, MEMFLAGS type);\n+  G1RegionToSpaceMapper(ReservedSpace rs, size_t used_size, size_t page_size, size_t region_granularity, size_t commit_factor, MemType type);\n@@ -88,1 +88,1 @@\n-                                              MEMFLAGS type);\n+                                              MemType type);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1RegionToSpaceMapper.hpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -130,1 +130,1 @@\n-                                                         MEMFLAGS memflags,\n+                                                         MemType memflags,\n@@ -808,1 +808,1 @@\n-OopStorage* OopStorage::create(const char* name, MEMFLAGS memflags) {\n+OopStorage* OopStorage::create(const char* name, MemType memflags) {\n@@ -822,1 +822,1 @@\n-OopStorage::OopStorage(const char* name, MEMFLAGS memflags) :\n+OopStorage::OopStorage(const char* name, MemType memflags) :\n@@ -1033,1 +1033,1 @@\n-MEMFLAGS OopStorage::memflags() const { return _memflags; }\n+MemType OopStorage::memflags() const { return _memflags; }\n","filename":"src\/hotspot\/share\/gc\/shared\/oopStorage.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -77,1 +77,1 @@\n-  static OopStorage* create(const char* name, MEMFLAGS memflags);\n+  static OopStorage* create(const char* name, MemType memflags);\n@@ -93,1 +93,1 @@\n-  MEMFLAGS memflags() const;\n+  MemType memflags() const;\n@@ -277,1 +277,1 @@\n-  MEMFLAGS _memflags;\n+  MemType _memflags;\n@@ -283,1 +283,1 @@\n-  OopStorage(const char* name, MEMFLAGS memflags);\n+  OopStorage(const char* name, MemType memflags);\n","filename":"src\/hotspot\/share\/gc\/shared\/oopStorage.hpp","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -63,1 +63,1 @@\n-                             MEMFLAGS memflags = mtGC,\n+                             MemType memflags = mtGC,\n","filename":"src\/hotspot\/share\/gc\/shared\/oopStorage.inline.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,1 +34,1 @@\n-OopStorage* OopStorageSet::create_strong(const char* name, MEMFLAGS memflags) {\n+OopStorage* OopStorageSet::create_strong(const char* name, MemType memflags) {\n@@ -42,1 +42,1 @@\n-OopStorage* OopStorageSet::create_weak(const char* name, MEMFLAGS memflags) {\n+OopStorage* OopStorageSet::create_weak(const char* name, MemType memflags) {\n","filename":"src\/hotspot\/share\/gc\/shared\/oopStorageSet.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n-#include \"nmt\/memflags.hpp\"\n+#include \"nmt\/memType.hpp\"\n@@ -82,2 +82,2 @@\n-  static OopStorage* create_strong(const char* name, MEMFLAGS memflags);\n-  static OopStorage* create_weak(const char* name, MEMFLAGS memflags);\n+  static OopStorage* create_strong(const char* name, MemType memflags);\n+  static OopStorage* create_weak(const char* name, MemType memflags);\n","filename":"src\/hotspot\/share\/gc\/shared\/oopStorageSet.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -38,1 +38,1 @@\n-#include \"nmt\/memflags.hpp\"\n+#include \"nmt\/memType.hpp\"\n","filename":"src\/hotspot\/share\/gc\/shared\/stringdedup\/stringDedupProcessor.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -119,1 +119,1 @@\n-template <unsigned int N, MEMFLAGS F>\n+template <unsigned int N, MemType F>\n@@ -327,1 +327,1 @@\n-template <class E, MEMFLAGS F, unsigned int N = TASKQUEUE_SIZE>\n+template <class E, MemType F, unsigned int N = TASKQUEUE_SIZE>\n@@ -431,1 +431,1 @@\n-template<class E, MEMFLAGS F, unsigned int N = TASKQUEUE_SIZE>\n+template<class E, MemType F, unsigned int N = TASKQUEUE_SIZE>\n@@ -470,1 +470,1 @@\n-template <MEMFLAGS F> class TaskQueueSetSuperImpl: public CHeapObj<F>, public TaskQueueSetSuper {\n+template <MemType F> class TaskQueueSetSuperImpl: public CHeapObj<F>, public TaskQueueSetSuper {\n@@ -473,1 +473,1 @@\n-template<class T, MEMFLAGS F>\n+template<class T, MemType F>\n@@ -521,1 +521,1 @@\n-template<class T, MEMFLAGS F> void\n+template<class T, MemType F> void\n@@ -527,1 +527,1 @@\n-template<class T, MEMFLAGS F> T*\n+template<class T, MemType F> T*\n@@ -534,1 +534,1 @@\n-template<class T, MEMFLAGS F>\n+template<class T, MemType F>\n@@ -542,1 +542,1 @@\n-template<class T, MEMFLAGS F>\n+template<class T, MemType F>\n","filename":"src\/hotspot\/share\/gc\/shared\/taskqueue.hpp","additions":10,"deletions":10,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -41,1 +41,1 @@\n-template <class T, MEMFLAGS F>\n+template <class T, MemType F>\n@@ -50,1 +50,1 @@\n-template <class T, MEMFLAGS F>\n+template <class T, MemType F>\n@@ -56,1 +56,1 @@\n-template<class T, MEMFLAGS F>\n+template<class T, MemType F>\n@@ -63,1 +63,1 @@\n-template<class T, MEMFLAGS F>\n+template<class T, MemType F>\n@@ -78,1 +78,1 @@\n-template<class T, MEMFLAGS F>\n+template<class T, MemType F>\n@@ -86,1 +86,1 @@\n-template <class T, MEMFLAGS F>\n+template <class T, MemType F>\n@@ -100,1 +100,1 @@\n-template<class E, MEMFLAGS F, unsigned int N>\n+template<class E, MemType F, unsigned int N>\n@@ -106,1 +106,1 @@\n-template<class E, MEMFLAGS F, unsigned int N>\n+template<class E, MemType F, unsigned int N>\n@@ -111,1 +111,1 @@\n-template<class E, MEMFLAGS F, unsigned int N> inline bool\n+template<class E, MemType F, unsigned int N> inline bool\n@@ -137,1 +137,1 @@\n-template <class E, MEMFLAGS F, unsigned int N>\n+template <class E, MemType F, unsigned int N>\n@@ -146,1 +146,1 @@\n-template <class E, MEMFLAGS F, unsigned int N>\n+template <class E, MemType F, unsigned int N>\n@@ -157,1 +157,1 @@\n-template<class E, MEMFLAGS F, unsigned int N>\n+template<class E, MemType F, unsigned int N>\n@@ -190,1 +190,1 @@\n-template<class E, MEMFLAGS F, unsigned int N> inline bool\n+template<class E, MemType F, unsigned int N> inline bool\n@@ -227,1 +227,1 @@\n-template <class E, MEMFLAGS F, unsigned int N>\n+template <class E, MemType F, unsigned int N>\n@@ -256,1 +256,1 @@\n-template<class E, MEMFLAGS F, unsigned int N>\n+template<class E, MemType F, unsigned int N>\n@@ -314,1 +314,1 @@\n-template<class E, MEMFLAGS F, unsigned int N>\n+template<class E, MemType F, unsigned int N>\n@@ -319,1 +319,1 @@\n-template<class T, MEMFLAGS F>\n+template<class T, MemType F>\n@@ -375,1 +375,1 @@\n-template<class T, MEMFLAGS F>\n+template<class T, MemType F>\n@@ -397,1 +397,1 @@\n-template<class E, MEMFLAGS F, unsigned int N>\n+template<class E, MemType F, unsigned int N>\n","filename":"src\/hotspot\/share\/gc\/shared\/taskqueue.inline.hpp","additions":20,"deletions":20,"binary":false,"changes":40,"status":"modified"},{"patch":"@@ -31,1 +31,1 @@\n-#include \"nmt\/memflags.hpp\"\n+#include \"nmt\/memType.hpp\"\n@@ -39,1 +39,1 @@\n-template<class E, MEMFLAGS F, unsigned int N = TASKQUEUE_SIZE>\n+template<class E, MemType F, unsigned int N = TASKQUEUE_SIZE>\n@@ -304,1 +304,1 @@\n-template <class T, MEMFLAGS F>\n+template <class T, MemType F>\n@@ -334,1 +334,1 @@\n-template <class T, MEMFLAGS F>\n+template <class T, MemType F>\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahTaskqueue.hpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2019, Red Hat, Inc. All rights reserved.\n+ * Copyright (c) 2016, 2024, Red Hat, Inc. All rights reserved.\n@@ -33,1 +33,1 @@\n-template <class E, MEMFLAGS F, unsigned int N>\n+template <class E, MemType F, unsigned int N>\n@@ -48,1 +48,1 @@\n-template <class E, MEMFLAGS F, unsigned int N>\n+template <class E, MemType F, unsigned int N>\n@@ -61,1 +61,1 @@\n-template <class E, MEMFLAGS F, unsigned int N>\n+template <class E, MemType F, unsigned int N>\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahTaskqueue.inline.hpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -29,1 +29,1 @@\n-#include \"nmt\/memflags.hpp\"\n+#include \"nmt\/memType.hpp\"\n","filename":"src\/hotspot\/share\/gc\/z\/zNMT.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n-#include \"nmt\/memflags.hpp\"\n+#include \"nmt\/memType.hpp\"\n","filename":"src\/hotspot\/share\/jfr\/leakprofiler\/chains\/jfrbitset.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -66,1 +66,1 @@\n-void JfrNativeMemoryEvent::send_type_event(const Ticks& starttime, MEMFLAGS flag, size_t reserved, size_t committed) {\n+void JfrNativeMemoryEvent::send_type_event(const Ticks& starttime, MemType type, size_t reserved, size_t committed) {\n@@ -69,1 +69,1 @@\n-  event.set_type(NMTUtil::flag_to_index(flag));\n+  event.set_type(NMTUtil::flag_to_index(type));\n@@ -83,2 +83,2 @@\n-    MEMFLAGS flag = NMTUtil::index_to_flag(index);\n-    if (flag == mtNone) {\n+    MemType type = NMTUtil::index_to_flag(index);\n+    if (type == mtNone) {\n@@ -88,1 +88,1 @@\n-    send_type_event(timestamp, flag, usage->reserved(flag), usage->committed(flag));\n+    send_type_event(timestamp, type, usage->reserved(type), usage->committed(type));\n","filename":"src\/hotspot\/share\/jfr\/periodic\/jfrNativeMemoryEvent.cpp","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n-#include \"nmt\/memflags.hpp\"\n+#include \"nmt\/memType.hpp\"\n@@ -38,1 +38,1 @@\n-  static void send_type_event(const Ticks& starttime, MEMFLAGS flag, size_t reserved, size_t committed);\n+  static void send_type_event(const Ticks& starttime, MemType type, size_t reserved, size_t committed);\n","filename":"src\/hotspot\/share\/jfr\/periodic\/jfrNativeMemoryEvent.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -338,2 +338,2 @@\n-    MEMFLAGS flag = NMTUtil::index_to_flag(i);\n-    writer.write(NMTUtil::flag_to_name(flag));\n+    MemType type = NMTUtil::index_to_flag(i);\n+    writer.write(NMTUtil::flag_to_name(type));\n","filename":"src\/hotspot\/share\/jfr\/recorder\/checkpoint\/types\/jfrType.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -39,1 +39,1 @@\n-                   MEMFLAGS flags,\n+                   MemType type,\n@@ -42,1 +42,1 @@\n-  char* p = (char*) os::malloc(size, flags, stack);\n+  char* p = (char*) os::malloc(size, type, stack);\n@@ -50,1 +50,1 @@\n-                   MEMFLAGS flags,\n+                   MemType type,\n@@ -52,1 +52,1 @@\n-  return AllocateHeap(size, flags, CALLER_PC, alloc_failmode);\n+  return AllocateHeap(size, type, CALLER_PC, alloc_failmode);\n@@ -57,1 +57,1 @@\n-                     MEMFLAGS flag,\n+                     MemType type,\n@@ -59,1 +59,1 @@\n-  char* p = (char*) os::realloc(old, size, flag, CALLER_PC);\n+  char* p = (char*) os::realloc(old, size, type, CALLER_PC);\n@@ -120,2 +120,2 @@\n-void* AnyObj::operator new(size_t size, MEMFLAGS flags) throw() {\n-  address res = (address)AllocateHeap(size, flags, CALLER_PC);\n+void* AnyObj::operator new(size_t size, MemType type) throw() {\n+  address res = (address)AllocateHeap(size, type, CALLER_PC);\n@@ -127,1 +127,1 @@\n-    MEMFLAGS flags) throw() {\n+    MemType type) throw() {\n@@ -129,1 +129,1 @@\n-    address res = (address)AllocateHeap(size, flags, CALLER_PC, AllocFailStrategy::RETURN_NULL);\n+    address res = (address)AllocateHeap(size, type, CALLER_PC, AllocFailStrategy::RETURN_NULL);\n","filename":"src\/hotspot\/share\/memory\/allocation.cpp","additions":11,"deletions":11,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -29,1 +29,1 @@\n-#include \"nmt\/memflags.hpp\"\n+#include \"nmt\/memType.hpp\"\n@@ -97,3 +97,3 @@\n-\/\/ char* AllocateHeap(size_t size, MEMFLAGS flags, const NativeCallStack& stack, AllocFailType alloc_failmode = AllocFailStrategy::EXIT_OOM);\n-\/\/ char* AllocateHeap(size_t size, MEMFLAGS flags, AllocFailType alloc_failmode = AllocFailStrategy::EXIT_OOM);\n-\/\/ char* ReallocateHeap(char *old, size_t size, MEMFLAGS flag, AllocFailType alloc_failmode = AllocFailStrategy::EXIT_OOM);\n+\/\/ char* AllocateHeap(size_t size, MemType type, const NativeCallStack& stack, AllocFailType alloc_failmode = AllocFailStrategy::EXIT_OOM);\n+\/\/ char* AllocateHeap(size_t size, MemType type, AllocFailType alloc_failmode = AllocFailStrategy::EXIT_OOM);\n+\/\/ char* ReallocateHeap(char *old, size_t size, MemType type, AllocFailType alloc_failmode = AllocFailStrategy::EXIT_OOM);\n@@ -109,1 +109,1 @@\n-                   MEMFLAGS flags,\n+                   MemType type,\n@@ -113,1 +113,1 @@\n-                   MEMFLAGS flags,\n+                   MemType type,\n@@ -118,1 +118,1 @@\n-                     MEMFLAGS flag,\n+                     MemType type,\n@@ -126,1 +126,1 @@\n-  ALWAYSINLINE void* operator new(size_t size, MEMFLAGS f) {\n+  ALWAYSINLINE void* operator new(size_t size, MemType f) {\n@@ -131,1 +131,1 @@\n-                                  MEMFLAGS f,\n+                                  MemType f,\n@@ -137,1 +137,1 @@\n-                                  MEMFLAGS f,\n+                                  MemType f,\n@@ -144,1 +144,1 @@\n-                                  MEMFLAGS f,\n+                                  MemType f,\n@@ -149,1 +149,1 @@\n-  ALWAYSINLINE void* operator new[](size_t size, MEMFLAGS f) {\n+  ALWAYSINLINE void* operator new[](size_t size, MemType f) {\n@@ -154,1 +154,1 @@\n-                                    MEMFLAGS f,\n+                                    MemType f,\n@@ -160,1 +160,1 @@\n-                                    MEMFLAGS f,\n+                                    MemType f,\n@@ -167,1 +167,1 @@\n-                                    MEMFLAGS f,\n+                                    MemType f,\n@@ -177,1 +177,1 @@\n-template<MEMFLAGS F>\n+template<MemType F>\n@@ -442,4 +442,4 @@\n-  void* operator new(size_t size, MEMFLAGS flags) throw();\n-  void* operator new [](size_t size, MEMFLAGS flags) throw() = delete;\n-  void* operator new(size_t size, const std::nothrow_t&  nothrow_constant, MEMFLAGS flags) throw();\n-  void* operator new [](size_t size, const std::nothrow_t&  nothrow_constant, MEMFLAGS flags) throw() = delete;\n+  void* operator new(size_t size, MemType type) throw();\n+  void* operator new [](size_t size, MemType type) throw() = delete;\n+  void* operator new(size_t size, const std::nothrow_t&  nothrow_constant, MemType type) throw();\n+  void* operator new [](size_t size, const std::nothrow_t&  nothrow_constant, MemType type) throw() = delete;\n@@ -571,2 +571,2 @@\n-  static E* allocate_or_null(size_t length, MEMFLAGS flags);\n-  static E* allocate(size_t length, MEMFLAGS flags);\n+  static E* allocate_or_null(size_t length, MemType type);\n+  static E* allocate(size_t length, MemType type);\n@@ -582,2 +582,2 @@\n-  static E* allocate(size_t length, MEMFLAGS flags);\n-  static E* reallocate(E* addr, size_t new_length, MEMFLAGS flags);\n+  static E* allocate(size_t length, MemType type);\n+  static E* reallocate(E* addr, size_t new_length, MemType type);\n","filename":"src\/hotspot\/share\/memory\/allocation.hpp","additions":24,"deletions":24,"binary":false,"changes":48,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -58,1 +58,1 @@\n-E* MmapArrayAllocator<E>::allocate_or_null(size_t length, MEMFLAGS flags) {\n+E* MmapArrayAllocator<E>::allocate_or_null(size_t length, MemType type) {\n@@ -61,1 +61,1 @@\n-  char* addr = os::reserve_memory(size, !ExecMem, flags);\n+  char* addr = os::reserve_memory(size, !ExecMem, type);\n@@ -75,1 +75,1 @@\n-E* MmapArrayAllocator<E>::allocate(size_t length, MEMFLAGS flags) {\n+E* MmapArrayAllocator<E>::allocate(size_t length, MemType type) {\n@@ -78,1 +78,1 @@\n-  char* addr = os::reserve_memory(size, !ExecMem, flags);\n+  char* addr = os::reserve_memory(size, !ExecMem, type);\n@@ -100,2 +100,2 @@\n-E* MallocArrayAllocator<E>::allocate(size_t length, MEMFLAGS flags) {\n-  return (E*)AllocateHeap(size_for(length), flags);\n+E* MallocArrayAllocator<E>::allocate(size_t length, MemType type) {\n+  return (E*)AllocateHeap(size_for(length), type);\n@@ -105,2 +105,2 @@\n-E* MallocArrayAllocator<E>::reallocate(E* addr, size_t new_length, MEMFLAGS flags) {\n-  return (E*)ReallocateHeap((char*)addr, size_for(new_length), flags);\n+E* MallocArrayAllocator<E>::reallocate(E* addr, size_t new_length, MemType type) {\n+  return (E*)ReallocateHeap((char*)addr, size_for(new_length), type);\n","filename":"src\/hotspot\/share\/memory\/allocation.inline.hpp","additions":9,"deletions":9,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -225,2 +225,2 @@\n-Arena::Arena(MEMFLAGS flag, Tag tag, size_t init_size) :\n-  _flags(flag), _tag(tag),\n+Arena::Arena(MemType type, Tag tag, size_t init_size) :\n+  _flags(type), _tag(tag),\n@@ -236,1 +236,1 @@\n-  MemTracker::record_new_arena(flag);\n+  MemTracker::record_new_arena(type);\n","filename":"src\/hotspot\/share\/memory\/arena.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -110,1 +110,1 @@\n-  const MEMFLAGS _flags;        \/\/ Memory tracking flags\n+  const MemType _flags;        \/\/ Memory tracking flags\n@@ -141,1 +141,1 @@\n-  Arena(MEMFLAGS memflag, Tag tag = Tag::tag_other, size_t init_size = Chunk::init_size);\n+  Arena(MemType memflag, Tag tag = Tag::tag_other, size_t init_size = Chunk::init_size);\n","filename":"src\/hotspot\/share\/memory\/arena.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n-#include \"nmt\/memflags.hpp\"\n+#include \"nmt\/memType.hpp\"\n","filename":"src\/hotspot\/share\/memory\/guardedMemory.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -105,2 +105,2 @@\n-MemRegion* MemRegion::create_array(size_t length, MEMFLAGS flags) {\n-  MemRegion* result = NEW_C_HEAP_ARRAY(MemRegion, length, flags);\n+MemRegion* MemRegion::create_array(size_t length, MemType type) {\n+  MemRegion* result = NEW_C_HEAP_ARRAY(MemRegion, length, type);\n","filename":"src\/hotspot\/share\/memory\/memRegion.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -93,1 +93,1 @@\n-  static MemRegion* create_array(size_t length, MEMFLAGS flags);\n+  static MemRegion* create_array(size_t length, MemType type);\n","filename":"src\/hotspot\/share\/memory\/memRegion.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n-#include \"nmt\/memflags.hpp\"\n+#include \"nmt\/memType.hpp\"\n@@ -92,1 +92,1 @@\n-template <class T, MEMFLAGS flags, size_t alignment = DEFAULT_PADDING_SIZE>\n+template <class T, MemType type, size_t alignment = DEFAULT_PADDING_SIZE>\n@@ -103,1 +103,1 @@\n-template <class T, MEMFLAGS flags, size_t alignment = DEFAULT_PADDING_SIZE>\n+template <class T, MemType type, size_t alignment = DEFAULT_PADDING_SIZE>\n@@ -115,1 +115,1 @@\n-template <class T, MEMFLAGS flags, size_t alignment = DEFAULT_PADDING_SIZE>\n+template <class T, MemType type, size_t alignment = DEFAULT_PADDING_SIZE>\n","filename":"src\/hotspot\/share\/memory\/padded.hpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,2 +37,2 @@\n-template <class T, MEMFLAGS flags, size_t alignment>\n-PaddedEnd<T>* PaddedArray<T, flags, alignment>::create_unfreeable(uint length) {\n+template <class T, MemType type, size_t alignment>\n+PaddedEnd<T>* PaddedArray<T, type, alignment>::create_unfreeable(uint length) {\n@@ -43,1 +43,1 @@\n-  void* chunk = AllocateHeap(length * sizeof(PaddedEnd<T, alignment>) + alignment, flags);\n+  void* chunk = AllocateHeap(length * sizeof(PaddedEnd<T, alignment>) + alignment, type);\n@@ -56,2 +56,2 @@\n-template <class T, MEMFLAGS flags, size_t alignment>\n-T** Padded2DArray<T, flags, alignment>::create_unfreeable(uint rows, uint columns, size_t* allocation_size) {\n+template <class T, MemType type, size_t alignment>\n+T** Padded2DArray<T, type, alignment>::create_unfreeable(uint rows, uint columns, size_t* allocation_size) {\n@@ -66,1 +66,1 @@\n-  void* chunk = MmapArrayAllocator<uint8_t>::allocate(total_size, flags);\n+  void* chunk = MmapArrayAllocator<uint8_t>::allocate(total_size, type);\n@@ -84,2 +84,2 @@\n-template <class T, MEMFLAGS flags, size_t alignment>\n-T* PaddedPrimitiveArray<T, flags, alignment>::create_unfreeable(size_t length) {\n+template <class T, MemType type, size_t alignment>\n+T* PaddedPrimitiveArray<T, type, alignment>::create_unfreeable(size_t length) {\n@@ -90,2 +90,2 @@\n-template <class T, MEMFLAGS flags, size_t alignment>\n-T* PaddedPrimitiveArray<T, flags, alignment>::create(size_t length, void** alloc_base) {\n+template <class T, MemType type, size_t alignment>\n+T* PaddedPrimitiveArray<T, type, alignment>::create(size_t length, void** alloc_base) {\n@@ -93,1 +93,1 @@\n-  void* chunk = AllocateHeap(length * sizeof(T) + alignment, flags);\n+  void* chunk = AllocateHeap(length * sizeof(T) + alignment, type);\n","filename":"src\/hotspot\/share\/memory\/padded.inline.hpp","additions":12,"deletions":12,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -54,2 +54,2 @@\n-  ResourceArea(MEMFLAGS flags = mtThread) :\n-    Arena(flags, Arena::Tag::tag_ra) DEBUG_ONLY(COMMA _nesting(0)) {}\n+  ResourceArea(MemType type = mtThread) :\n+    Arena(type, Arena::Tag::tag_ra) DEBUG_ONLY(COMMA _nesting(0)) {}\n@@ -57,2 +57,2 @@\n-  ResourceArea(size_t init_size, MEMFLAGS flags = mtThread) :\n-    Arena(flags, Arena::Tag::tag_ra, init_size) DEBUG_ONLY(COMMA _nesting(0)) {\n+  ResourceArea(size_t init_size, MemType type = mtThread) :\n+    Arena(type, Arena::Tag::tag_ra, init_size) DEBUG_ONLY(COMMA _nesting(0)) {\n","filename":"src\/hotspot\/share\/memory\/resourceArea.hpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n-#include \"nmt\/memflags.hpp\"\n+#include \"nmt\/memType.hpp\"\n@@ -36,1 +36,1 @@\n-  const MEMFLAGS         _flag;\n+  const MemType         _type;\n@@ -38,1 +38,1 @@\n-  AllocationSite(const NativeCallStack& stack, MEMFLAGS flag) : _call_stack(stack), _flag(flag) { }\n+  AllocationSite(const NativeCallStack& stack, MemType type) : _call_stack(stack), _type(type) { }\n@@ -52,1 +52,1 @@\n-  MEMFLAGS flag() const { return _flag; }\n+  MemType type() const { return _type; }\n","filename":"src\/hotspot\/share\/nmt\/allocationSite.hpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -34,1 +34,1 @@\n-template<typename E, MEMFLAGS flag>\n+template<typename E, MemType type>\n@@ -55,1 +55,1 @@\n-  GrowableArrayCHeap<BackingElement, flag> _backing_storage;\n+  GrowableArrayCHeap<BackingElement, type> _backing_storage;\n","filename":"src\/hotspot\/share\/nmt\/arrayWithFreeList.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -29,1 +29,1 @@\n-#include \"nmt\/memflags.hpp\"\n+#include \"nmt\/memType.hpp\"\n@@ -36,1 +36,1 @@\n-\/\/ The malloc header, as well as the coming VMATree implementation, rely on MEMFLAGS\n+\/\/ The malloc header, as well as the coming VMATree implementation, rely on MemType\n@@ -38,1 +38,1 @@\n-STATIC_ASSERT(sizeof(MEMFLAGS) == sizeof(uint8_t));\n+STATIC_ASSERT(sizeof(MemType) == sizeof(uint8_t));\n","filename":"src\/hotspot\/share\/nmt\/mallocHeader.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -29,1 +29,1 @@\n-#include \"nmt\/memflags.hpp\"\n+#include \"nmt\/memType.hpp\"\n@@ -95,1 +95,1 @@\n-  const MEMFLAGS _flags;\n+  const MemType _type;\n@@ -124,1 +124,1 @@\n-    const MEMFLAGS flags;\n+    const MemType type;\n@@ -128,1 +128,1 @@\n-  inline MallocHeader(size_t size, MEMFLAGS flags, uint32_t mst_marker);\n+  inline MallocHeader(size_t size, MemType type, uint32_t mst_marker);\n@@ -131,1 +131,1 @@\n-  inline MEMFLAGS flags() const { return _flags; }\n+  inline MemType type() const { return _type; }\n@@ -136,1 +136,1 @@\n-    return FreeInfo{this->size(), this->flags(), this->mst_marker()};\n+    return FreeInfo{this->size(), this->type(), this->mst_marker()};\n","filename":"src\/hotspot\/share\/nmt\/mallocHeader.hpp","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,2 +37,2 @@\n-inline MallocHeader::MallocHeader(size_t size, MEMFLAGS flags, uint32_t mst_marker)\n-  : _size(size), _mst_marker(mst_marker), _flags(flags),\n+inline MallocHeader::MallocHeader(size_t size, MemType type, uint32_t mst_marker)\n+  : _size(size), _mst_marker(mst_marker), _type(type),\n","filename":"src\/hotspot\/share\/nmt\/mallocHeader.inline.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n-#include \"nmt\/memflags.hpp\"\n+#include \"nmt\/memType.hpp\"\n@@ -83,1 +83,1 @@\n-  bool match_category(MEMFLAGS* out) {\n+  bool match_category(MemType* out) {\n@@ -93,3 +93,3 @@\n-    MEMFLAGS f = NMTUtil::string_to_flag(ss.base());\n-    if (f != mtNone) {\n-      *out = f;\n+    MemType type = NMTUtil::string_to_flag(ss.base());\n+    if (type != mtNone) {\n+      *out = type;\n@@ -134,2 +134,2 @@\n-void MallocLimitSet::set_category_limit(MEMFLAGS f, size_t s, MallocLimitMode flag) {\n-  const int i = NMTUtil::flag_to_index(f);\n+void MallocLimitSet::set_category_limit(MemType type, size_t s, MallocLimitMode flag) {\n+  const int i = NMTUtil::flag_to_index(type);\n@@ -190,1 +190,1 @@\n-      MEMFLAGS f;\n+      MemType f;\n","filename":"src\/hotspot\/share\/nmt\/mallocLimit.cpp","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -30,1 +30,1 @@\n-#include \"nmt\/memflags.hpp\"\n+#include \"nmt\/memType.hpp\"\n@@ -56,2 +56,2 @@\n-  void set_global_limit(size_t s, MallocLimitMode flag);\n-  void set_category_limit(MEMFLAGS f, size_t s, MallocLimitMode flag);\n+  void set_global_limit(size_t s, MallocLimitMode type);\n+  void set_category_limit(MemType type, size_t s, MallocLimitMode mode);\n@@ -60,1 +60,1 @@\n-  const malloclimit* category_limit(MEMFLAGS f) const { return &_cat[(int)f]; }\n+  const malloclimit* category_limit(MemType type) const { return &_cat[(int)type]; }\n@@ -72,1 +72,1 @@\n-  static const malloclimit* category_limit(MEMFLAGS f) { return _limits.category_limit(f); }\n+  static const malloclimit* category_limit(MemType type) { return _limits.category_limit(type); }\n","filename":"src\/hotspot\/share\/nmt\/mallocLimit.hpp","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -114,2 +114,2 @@\n-MallocSite* MallocSiteTable::lookup_or_add(const NativeCallStack& key, uint32_t* marker, MEMFLAGS flags) {\n-  assert(flags != mtNone, \"Should have a real memory type\");\n+MallocSite* MallocSiteTable::lookup_or_add(const NativeCallStack& key, uint32_t* marker, MemType type) {\n+  assert(type != mtNone, \"Should have a real memory type\");\n@@ -122,1 +122,1 @@\n-    MallocSiteHashtableEntry* entry = new_entry(key, flags);\n+    MallocSiteHashtableEntry* entry = new_entry(key, type);\n@@ -140,1 +140,1 @@\n-      if (site->flag() == flags && site->equals(key)) {\n+      if (site->type() == type && site->equals(key)) {\n@@ -147,1 +147,1 @@\n-      MallocSiteHashtableEntry* entry = new_entry(key, flags);\n+      MallocSiteHashtableEntry* entry = new_entry(key, type);\n@@ -180,1 +180,1 @@\n-MallocSiteHashtableEntry* MallocSiteTable::new_entry(const NativeCallStack& key, MEMFLAGS flags) {\n+MallocSiteHashtableEntry* MallocSiteTable::new_entry(const NativeCallStack& key, MemType type) {\n@@ -183,1 +183,1 @@\n-  return ::new (p) MallocSiteHashtableEntry(key, flags);\n+  return ::new (p) MallocSiteHashtableEntry(key, type);\n","filename":"src\/hotspot\/share\/nmt\/mallocSiteTable.cpp","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -41,2 +41,2 @@\n-  MallocSite(const NativeCallStack& stack, MEMFLAGS flags) :\n-    AllocationSite(stack, flags) {}\n+  MallocSite(const NativeCallStack& stack, MemType type) :\n+    AllocationSite(stack, type) {}\n@@ -66,3 +66,3 @@\n-  MallocSiteHashtableEntry(NativeCallStack stack, MEMFLAGS flags):\n-    _malloc_site(stack, flags), _hash(stack.calculate_hash()), _next(nullptr) {\n-    assert(flags != mtNone, \"Expect a real memory type\");\n+  MallocSiteHashtableEntry(NativeCallStack stack, MemType type):\n+    _malloc_site(stack, type), _hash(stack.calculate_hash()), _next(nullptr) {\n+    assert(type != mtNone, \"Expect a real memory type\");\n@@ -150,2 +150,2 @@\n-      uint32_t* marker, MEMFLAGS flags) {\n-    MallocSite* site = lookup_or_add(stack, marker, flags);\n+      uint32_t* marker, MemType type) {\n+    MallocSite* site = lookup_or_add(stack, marker, type);\n@@ -173,1 +173,1 @@\n-  static MallocSiteHashtableEntry* new_entry(const NativeCallStack& key, MEMFLAGS flags);\n+  static MallocSiteHashtableEntry* new_entry(const NativeCallStack& key, MemType type);\n@@ -175,1 +175,1 @@\n-  static MallocSite* lookup_or_add(const NativeCallStack& key, uint32_t* marker, MEMFLAGS flags);\n+  static MallocSite* lookup_or_add(const NativeCallStack& key, uint32_t* marker, MemType type);\n","filename":"src\/hotspot\/share\/nmt\/mallocSiteTable.hpp","additions":9,"deletions":9,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -131,1 +131,1 @@\n-bool MallocMemorySummary::category_limit_reached(MEMFLAGS f, size_t s, size_t so_far, const malloclimit* limit) {\n+bool MallocMemorySummary::category_limit_reached(MemType type, size_t s, size_t so_far, const malloclimit* limit) {\n@@ -135,1 +135,1 @@\n-  NMTUtil::flag_to_enum_name(f), PROPERFMTARGS(s), PROPERFMTARGS(so_far), PROPERFMTARGS(limit->sz)\n+  NMTUtil::flag_to_enum_name(type), PROPERFMTARGS(s), PROPERFMTARGS(so_far), PROPERFMTARGS(limit->sz)\n@@ -170,1 +170,1 @@\n-void* MallocTracker::record_malloc(void* malloc_base, size_t size, MEMFLAGS flags,\n+void* MallocTracker::record_malloc(void* malloc_base, size_t size, MemType type,\n@@ -176,1 +176,1 @@\n-  MallocMemorySummary::record_malloc(size, flags);\n+  MallocMemorySummary::record_malloc(size, type);\n@@ -179,1 +179,1 @@\n-    MallocSiteTable::allocation_at(stack, size, &mst_marker, flags);\n+    MallocSiteTable::allocation_at(stack, size, &mst_marker, type);\n@@ -183,1 +183,1 @@\n-  MallocHeader* const header = ::new (malloc_base)MallocHeader(size, flags, mst_marker);\n+  MallocHeader* const header = ::new (malloc_base)MallocHeader(size, type, mst_marker);\n@@ -195,1 +195,1 @@\n-    assert(header2->flags() == flags, \"Wrong flags\");\n+    assert(header2->type() == type, \"Wrong type\");\n@@ -216,1 +216,1 @@\n-  MallocMemorySummary::record_free(free_info.size, free_info.flags);\n+  MallocMemorySummary::record_free(free_info.size, free_info.type);\n@@ -299,1 +299,1 @@\n-                 block->size(), NMTUtil::flag_to_enum_name(block->flags()));\n+                 block->size(), NMTUtil::flag_to_enum_name(block->type()));\n","filename":"src\/hotspot\/share\/nmt\/mallocTracker.cpp","additions":9,"deletions":9,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -30,1 +30,1 @@\n-#include \"nmt\/memflags.hpp\"\n+#include \"nmt\/memType.hpp\"\n@@ -158,2 +158,2 @@\n-  inline MallocMemory* by_type(MEMFLAGS flags) {\n-    int index = NMTUtil::flag_to_index(flags);\n+  inline MallocMemory* by_type(MemType type) {\n+    int index = NMTUtil::flag_to_index(type);\n@@ -163,2 +163,2 @@\n-  inline const MallocMemory* by_type(MEMFLAGS flags) const {\n-    int index = NMTUtil::flag_to_index(flags);\n+  inline const MallocMemory* by_type(MemType type) const {\n+    int index = NMTUtil::flag_to_index(type);\n@@ -217,1 +217,1 @@\n-  static bool category_limit_reached(MEMFLAGS f, size_t s, size_t so_far, const malloclimit* limit);\n+  static bool category_limit_reached(MemType f, size_t s, size_t so_far, const malloclimit* limit);\n@@ -222,2 +222,2 @@\n-   static inline void record_malloc(size_t size, MEMFLAGS flag) {\n-     as_snapshot()->by_type(flag)->record_malloc(size);\n+   static inline void record_malloc(size_t size, MemType type) {\n+     as_snapshot()->by_type(type)->record_malloc(size);\n@@ -227,2 +227,2 @@\n-   static inline void record_free(size_t size, MEMFLAGS flag) {\n-     as_snapshot()->by_type(flag)->record_free(size);\n+   static inline void record_free(size_t size, MemType type) {\n+     as_snapshot()->by_type(type)->record_free(size);\n@@ -232,2 +232,2 @@\n-   static inline void record_new_arena(MEMFLAGS flag) {\n-     as_snapshot()->by_type(flag)->record_new_arena();\n+   static inline void record_new_arena(MemType type) {\n+     as_snapshot()->by_type(type)->record_new_arena();\n@@ -236,2 +236,2 @@\n-   static inline void record_arena_free(MEMFLAGS flag) {\n-     as_snapshot()->by_type(flag)->record_arena_free();\n+   static inline void record_arena_free(MemType type) {\n+     as_snapshot()->by_type(type)->record_arena_free();\n@@ -240,2 +240,2 @@\n-   static inline void record_arena_size_change(ssize_t size, MEMFLAGS flag) {\n-     as_snapshot()->by_type(flag)->record_arena_size_change(size);\n+   static inline void record_arena_size_change(ssize_t size, MemType type) {\n+     as_snapshot()->by_type(type)->record_arena_size_change(size);\n@@ -260,1 +260,1 @@\n-  static inline bool check_exceeds_limit(size_t s, MEMFLAGS f);\n+  static inline bool check_exceeds_limit(size_t s, MemType f);\n@@ -283,1 +283,1 @@\n-  static void* record_malloc(void* malloc_base, size_t size, MEMFLAGS flags,\n+  static void* record_malloc(void* malloc_base, size_t size, MemType type,\n@@ -292,2 +292,2 @@\n-  static inline void record_new_arena(MEMFLAGS flags) {\n-    MallocMemorySummary::record_new_arena(flags);\n+  static inline void record_new_arena(MemType type) {\n+    MallocMemorySummary::record_new_arena(type);\n@@ -296,2 +296,2 @@\n-  static inline void record_arena_free(MEMFLAGS flags) {\n-    MallocMemorySummary::record_arena_free(flags);\n+  static inline void record_arena_free(MemType type) {\n+    MallocMemorySummary::record_arena_free(type);\n@@ -300,2 +300,2 @@\n-  static inline void record_arena_size_change(ssize_t size, MEMFLAGS flags) {\n-    MallocMemorySummary::record_arena_size_change(size, flags);\n+  static inline void record_arena_size_change(ssize_t size, MemType type) {\n+    MallocMemorySummary::record_arena_size_change(size, type);\n@@ -306,1 +306,1 @@\n-  static inline bool check_exceeds_limit(size_t s, MEMFLAGS f);\n+  static inline bool check_exceeds_limit(size_t s, MemType f);\n","filename":"src\/hotspot\/share\/nmt\/mallocTracker.hpp","additions":25,"deletions":25,"binary":false,"changes":50,"status":"modified"},{"patch":"@@ -35,1 +35,1 @@\n-inline bool MallocMemorySummary::check_exceeds_limit(size_t s, MEMFLAGS f) {\n+inline bool MallocMemorySummary::check_exceeds_limit(size_t s, MemType type) {\n@@ -53,1 +53,1 @@\n-      l = MallocLimitHandler::category_limit(f);\n+      l = MallocLimitHandler::category_limit(type);\n@@ -55,1 +55,1 @@\n-        const MallocMemory* mm = as_snapshot()->by_type(f);\n+        const MallocMemory* mm = as_snapshot()->by_type(type);\n@@ -58,1 +58,1 @@\n-          return category_limit_reached(f, s, so_far, l);\n+          return category_limit_reached(type, s, so_far, l);\n@@ -67,2 +67,2 @@\n-inline bool MallocTracker::check_exceeds_limit(size_t s, MEMFLAGS f) {\n-  return MallocMemorySummary::check_exceeds_limit(s, f);\n+inline bool MallocTracker::check_exceeds_limit(size_t s, MemType type) {\n+  return MallocMemorySummary::check_exceeds_limit(s, type);\n","filename":"src\/hotspot\/share\/nmt\/mallocTracker.inline.hpp","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -68,1 +68,1 @@\n-    res = (int)(NMTUtil::flag_to_index(s1.flag()) - NMTUtil::flag_to_index(s2.flag()));\n+    res = (int)(NMTUtil::flag_to_index(s1.type()) - NMTUtil::flag_to_index(s2.type()));\n@@ -210,1 +210,1 @@\n-    VirtualMemoryAllocationSite tmp(*rgn->call_stack(), rgn->flag());\n+    VirtualMemoryAllocationSite tmp(*rgn->call_stack(), rgn->type());\n","filename":"src\/hotspot\/share\/nmt\/memBaseline.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2012, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2012, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -147,1 +147,1 @@\n-  MallocMemory* malloc_memory(MEMFLAGS flag) {\n+  MallocMemory* malloc_memory(MemType type) {\n@@ -149,1 +149,1 @@\n-    return _malloc_memory_snapshot.by_type(flag);\n+    return _malloc_memory_snapshot.by_type(type);\n@@ -152,1 +152,1 @@\n-  VirtualMemory* virtual_memory(MEMFLAGS flag) {\n+  VirtualMemory* virtual_memory(MemType type) {\n@@ -154,1 +154,1 @@\n-    return _virtual_memory_snapshot.by_type(flag);\n+    return _virtual_memory_snapshot.by_type(type);\n","filename":"src\/hotspot\/share\/nmt\/memBaseline.hpp","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -29,1 +29,1 @@\n-#include \"nmt\/memflags.hpp\"\n+#include \"nmt\/memType.hpp\"\n@@ -43,2 +43,2 @@\n-  void set_flag(MEMFLAGS f) {\n-    const int bitno = (int)f;\n+  void set_flag(MemType type) {\n+    const int bitno = (int)type;\n@@ -48,2 +48,2 @@\n-  bool has_flag(MEMFLAGS f) const {\n-    const int bitno = (int)f;\n+  bool has_flag(MemType type) const {\n+    const int bitno = (int)type;\n","filename":"src\/hotspot\/share\/nmt\/memFlagBitmap.hpp","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -35,1 +35,1 @@\n-#include \"nmt\/memflags.hpp\"\n+#include \"nmt\/memType.hpp\"\n@@ -53,1 +53,1 @@\n-\/\/ those that have been used with mmap. Flags left out are printed with their nmt flag name.\n+\/\/ those that have been used with mmap. Flags left out are printed with their nmt type name.\n@@ -55,1 +55,1 @@\n-  \/* flag, short, description *\/ \\\n+  \/* type, short, description *\/ \\\n@@ -70,2 +70,2 @@\n-static const char* get_shortname_for_nmt_flag(MEMFLAGS f) {\n-#define DO(flag, shortname, text) if (flag == f) return shortname;\n+static const char* get_shortname_for_nmt_flag(MemType type) {\n+#define DO(t, shortname, text) if (t == type) return shortname;\n@@ -74,1 +74,1 @@\n-  return NMTUtil::flag_to_enum_name(f);\n+  return NMTUtil::flag_to_enum_name(type);\n@@ -91,1 +91,1 @@\n-  MEMFLAGS* _flags;\n+  MemType* _types;\n@@ -96,1 +96,1 @@\n-  CachedNMTInformation() : _ranges(nullptr), _flags(nullptr),\n+  CachedNMTInformation() : _ranges(nullptr), _types(nullptr),\n@@ -101,1 +101,1 @@\n-    ALLOW_C_FUNCTION(free, ::free(_flags);)\n+    ALLOW_C_FUNCTION(free, ::free(_types);)\n@@ -104,1 +104,1 @@\n-  bool add(const void* from, const void* to, MEMFLAGS f) {\n+  bool add(const void* from, const void* to, MemType type) {\n@@ -107,2 +107,2 @@\n-    \/\/ we can just fold two regions if they are adjacent and have the same flag.\n-    if (_count > 0 && from == _ranges[_count - 1].to && f == _flags[_count - 1]) {\n+    \/\/ we can just fold two regions if they are adjacent and have the same type.\n+    if (_count > 0 && from == _ranges[_count - 1].to && type == _types[_count - 1]) {\n@@ -117,2 +117,2 @@\n-      ALLOW_C_FUNCTION(realloc, _flags = (MEMFLAGS*)::realloc(_flags, new_capacity * sizeof(MEMFLAGS));)\n-      if (_ranges == nullptr || _flags == nullptr) {\n+      ALLOW_C_FUNCTION(realloc, _types = (MemType*)::realloc(_types, new_capacity * sizeof(MemType));)\n+      if (_ranges == nullptr || _types == nullptr) {\n@@ -126,1 +126,1 @@\n-    _flags[_count] = f;\n+    _types[_count] = type;\n@@ -145,1 +145,1 @@\n-        bm.set_flag(_flags[i]);\n+        bm.set_flag(_types[i]);\n@@ -156,1 +156,1 @@\n-    return add(rgn->base(), rgn->end(), rgn->flag());\n+    return add(rgn->base(), rgn->end(), rgn->type());\n@@ -253,2 +253,2 @@\n-        const MEMFLAGS flag = (MEMFLAGS)i;\n-        if (flags.has_flag(flag)) {\n+        const MemType type = (MemType)i;\n+        if (flags.has_flag(type)) {\n@@ -258,2 +258,2 @@\n-          _out->print(\"%s\", get_shortname_for_nmt_flag(flag));\n-          if (flag == mtThreadStack) {\n+          _out->print(\"%s\", get_shortname_for_nmt_flag(type));\n+          if (type == mtThreadStack) {\n","filename":"src\/hotspot\/share\/nmt\/memMapPrinter.cpp","additions":21,"deletions":21,"binary":false,"changes":42,"status":"modified"},{"patch":"@@ -30,1 +30,1 @@\n-#include \"nmt\/memflags.hpp\"\n+#include \"nmt\/memType.hpp\"\n","filename":"src\/hotspot\/share\/nmt\/memMapPrinter.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -29,1 +29,1 @@\n-#include \"nmt\/memflags.hpp\"\n+#include \"nmt\/memType.hpp\"\n@@ -73,1 +73,1 @@\n-void MemReporterBase::print_malloc(const MemoryCounter* c, MEMFLAGS flag) const {\n+void MemReporterBase::print_malloc(const MemoryCounter* c, MemType type) const {\n@@ -76,1 +76,1 @@\n-  const char* alloc_type = (flag == mtThreadStack) ? \"\" : \"malloc=\";\n+  const char* alloc_type = (type == mtThreadStack) ? \"\" : \"malloc=\";\n@@ -81,1 +81,1 @@\n-  if (flag != mtNone) {\n+  if (type != mtNone) {\n@@ -83,1 +83,1 @@\n-      amount_in_current_scale(amount), scale, NMTUtil::flag_to_name(flag));\n+      amount_in_current_scale(amount), scale, NMTUtil::flag_to_name(type));\n@@ -181,1 +181,1 @@\n-    MEMFLAGS flag = NMTUtil::index_to_flag(index);\n+    MemType type = NMTUtil::index_to_flag(index);\n@@ -183,3 +183,3 @@\n-    if (flag == mtThreadStack) continue;\n-    MallocMemory* malloc_memory = _malloc_snapshot->by_type(flag);\n-    VirtualMemory* virtual_memory = _vm_snapshot->by_type(flag);\n+    if (type == mtThreadStack) continue;\n+    MallocMemory* malloc_memory = _malloc_snapshot->by_type(type);\n+    VirtualMemory* virtual_memory = _vm_snapshot->by_type(type);\n@@ -187,1 +187,1 @@\n-    report_summary_of_type(flag, malloc_memory, virtual_memory);\n+    report_summary_of_type(type, malloc_memory, virtual_memory);\n@@ -191,1 +191,1 @@\n-void MemSummaryReporter::report_summary_of_type(MEMFLAGS flag,\n+void MemSummaryReporter::report_summary_of_type(MemType type,\n@@ -198,1 +198,1 @@\n-  if (flag == mtThread) {\n+  if (type == mtThread) {\n@@ -203,1 +203,1 @@\n-  } else if (flag == mtNMT) {\n+  } else if (type == mtNMT) {\n@@ -222,1 +222,1 @@\n-  out->print(\"-%*s (\", indent - 2, NMTUtil::flag_to_name(flag));\n+  out->print(\"-%*s (\", indent - 2, NMTUtil::flag_to_name(type));\n@@ -225,1 +225,1 @@\n-  if (flag == mtClassShared) {\n+  if (type == mtClassShared) {\n@@ -235,1 +235,1 @@\n-  if (flag == mtClass) {\n+  if (type == mtClass) {\n@@ -240,1 +240,1 @@\n-  } else if (flag == mtThread) {\n+  } else if (type == mtThread) {\n@@ -266,1 +266,1 @@\n-  if (flag == mtNMT &&\n+  if (type == mtNMT &&\n@@ -270,1 +270,1 @@\n-  } else if (flag == mtClass) {\n+  } else if (type == mtClass) {\n@@ -341,2 +341,2 @@\n-    MEMFLAGS flag = malloc_site->flag();\n-    assert(NMTUtil::flag_is_valid(flag) && flag != mtNone,\n+    MemType type = malloc_site->type();\n+    assert(NMTUtil::flag_is_valid(type) && type != mtNone,\n@@ -346,1 +346,1 @@\n-      print_malloc(malloc_site->counter(), flag);\n+      print_malloc(malloc_site->counter(), type);\n@@ -381,3 +381,3 @@\n-      const MEMFLAGS flag = virtual_memory_site->flag();\n-      if (flag != mtNone) {\n-        out->print(\" Type=%s\", NMTUtil::flag_to_name(flag));\n+      const MemType type = virtual_memory_site->type();\n+      if (type != mtNone) {\n+        out->print(\" Type=%s\", NMTUtil::flag_to_name(type));\n@@ -426,1 +426,1 @@\n-  out->print(\" for %s\", NMTUtil::flag_to_name(reserved_rgn->flag()));\n+  out->print(\" for %s\", NMTUtil::flag_to_name(reserved_rgn->type()));\n@@ -524,1 +524,1 @@\n-    MEMFLAGS flag = NMTUtil::index_to_flag(index);\n+    MemType type = NMTUtil::index_to_flag(index);\n@@ -526,4 +526,4 @@\n-    if (flag == mtThreadStack) continue;\n-    diff_summary_of_type(flag,\n-      _early_baseline.malloc_memory(flag),\n-      _early_baseline.virtual_memory(flag),\n+    if (type == mtThreadStack) continue;\n+    diff_summary_of_type(type,\n+      _early_baseline.malloc_memory(type),\n+      _early_baseline.virtual_memory(type),\n@@ -531,2 +531,2 @@\n-      _current_baseline.malloc_memory(flag),\n-      _current_baseline.virtual_memory(flag),\n+      _current_baseline.malloc_memory(type),\n+      _current_baseline.virtual_memory(type),\n@@ -538,1 +538,1 @@\n-    size_t early_amount, size_t early_count, MEMFLAGS flags) const {\n+    size_t early_amount, size_t early_count, MemType type) const {\n@@ -541,1 +541,1 @@\n-  const char* alloc_type = (flags == mtThread) ? \"\" : \"malloc=\";\n+  const char* alloc_type = (type == mtThread) ? \"\" : \"malloc=\";\n@@ -545,2 +545,2 @@\n-  if (flags != mtNone && flags != mtThread) {\n-    out->print(\" type=%s\", NMTUtil::flag_to_name(flags));\n+  if (type != mtNone && type != mtThread) {\n+    out->print(\" type=%s\", NMTUtil::flag_to_name(type));\n@@ -597,1 +597,1 @@\n-void MemSummaryDiffReporter::diff_summary_of_type(MEMFLAGS flag,\n+void MemSummaryDiffReporter::diff_summary_of_type(MemType type,\n@@ -616,1 +616,1 @@\n-  if (flag == mtThread) {\n+  if (type == mtThread) {\n@@ -627,1 +627,1 @@\n-  } else if (flag == mtNMT) {\n+  } else if (type == mtNMT) {\n@@ -639,1 +639,1 @@\n-    out->print(\"-%*s (\", indent - 2, NMTUtil::flag_to_name(flag));\n+    out->print(\"-%*s (\", indent - 2, NMTUtil::flag_to_name(type));\n@@ -647,1 +647,1 @@\n-    if (flag == mtClass) {\n+    if (type == mtClass) {\n@@ -671,1 +671,1 @@\n-    } else if (flag == mtThread) {\n+    } else if (type == mtThread) {\n@@ -699,1 +699,1 @@\n-      print_malloc_diff(current_malloc_amount, (flag == mtChunk) ? 0 : current_malloc->malloc_count(),\n+      print_malloc_diff(current_malloc_amount, (type == mtChunk) ? 0 : current_malloc->malloc_count(),\n@@ -723,1 +723,1 @@\n-    if (flag == mtNMT) {\n+    if (type == mtNMT) {\n@@ -736,1 +736,1 @@\n-    } else if (flag == mtClass) {\n+    } else if (type == mtClass) {\n@@ -850,3 +850,3 @@\n-      } else if (early_site->flag() != current_site->flag()) {\n-        \/\/ This site was originally allocated with one flag, then released,\n-        \/\/ then re-allocated at the same site (as far as we can tell) with a different flag.\n+      } else if (early_site->type() != current_site->type()) {\n+        \/\/ This site was originally allocated with one type, then released,\n+        \/\/ then re-allocated at the same site (as far as we can tell) with a different type.\n@@ -869,1 +869,1 @@\n-    0, 0, malloc_site->flag());\n+    0, 0, malloc_site->type());\n@@ -874,1 +874,1 @@\n-    malloc_site->count(), malloc_site->flag());\n+    malloc_site->count(), malloc_site->type());\n@@ -879,1 +879,1 @@\n-  if (early->flag() != current->flag()) {\n+  if (early->type() != current->type()) {\n@@ -886,1 +886,1 @@\n-      early->size(), early->count(), early->flag());\n+      early->size(), early->count(), early->type());\n@@ -891,1 +891,1 @@\n-  size_t current_count, size_t early_size, size_t early_count, MEMFLAGS flags) const {\n+  size_t current_count, size_t early_size, size_t early_count, MemType type) const {\n@@ -903,1 +903,1 @@\n-    print_malloc_diff(current_size, current_count, early_size, early_count, flags);\n+    print_malloc_diff(current_size, current_count, early_size, early_count, type);\n@@ -912,1 +912,1 @@\n-  diff_virtual_memory_site(site->call_stack(), site->reserved(), site->committed(), 0, 0, site->flag());\n+  diff_virtual_memory_site(site->call_stack(), site->reserved(), site->committed(), 0, 0, site->type());\n@@ -916,1 +916,1 @@\n-  diff_virtual_memory_site(site->call_stack(), 0, 0, site->reserved(), site->committed(), site->flag());\n+  diff_virtual_memory_site(site->call_stack(), 0, 0, site->reserved(), site->committed(), site->type());\n@@ -922,1 +922,1 @@\n-    early->reserved(), early->committed(), current->flag());\n+    early->reserved(), early->committed(), current->type());\n@@ -926,1 +926,1 @@\n-  size_t current_committed, size_t early_reserved, size_t early_committed, MEMFLAGS flag) const  {\n+  size_t current_committed, size_t early_reserved, size_t early_committed, MemType type) const  {\n@@ -939,2 +939,2 @@\n-    if (flag != mtNone) {\n-      out->print(\" Type=%s\", NMTUtil::flag_to_name(flag));\n+    if (type != mtNone) {\n+      out->print(\" Type=%s\", NMTUtil::flag_to_name(type));\n","filename":"src\/hotspot\/share\/nmt\/memReporter.cpp","additions":61,"deletions":61,"binary":false,"changes":122,"status":"modified"},{"patch":"@@ -111,1 +111,1 @@\n-  void print_malloc(const MemoryCounter* c, MEMFLAGS flag = mtNone) const;\n+  void print_malloc(const MemoryCounter* c, MemType type = mtNone) const;\n@@ -142,1 +142,1 @@\n-  void report_summary_of_type(MEMFLAGS type, MallocMemory* malloc_memory,\n+  void report_summary_of_type(MemType type, MallocMemory* malloc_memory,\n@@ -207,1 +207,1 @@\n-  void diff_summary_of_type(MEMFLAGS type,\n+  void diff_summary_of_type(MemType type,\n@@ -215,1 +215,1 @@\n-    size_t early_amount, size_t early_count, MEMFLAGS flags) const;\n+    size_t early_amount, size_t early_count, MemType type) const;\n@@ -265,1 +265,1 @@\n-    size_t currrent_count, size_t early_size, size_t early_count, MEMFLAGS flags) const;\n+    size_t currrent_count, size_t early_size, size_t early_count, MemType type) const;\n@@ -267,1 +267,1 @@\n-    size_t current_committed, size_t early_reserved, size_t early_committed, MEMFLAGS flag) const;\n+    size_t current_committed, size_t early_reserved, size_t early_committed, MemType type) const;\n","filename":"src\/hotspot\/share\/nmt\/memReporter.hpp","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -78,1 +78,1 @@\n-  static inline void* record_malloc(void* mem_base, size_t size, MEMFLAGS flag,\n+  static inline void* record_malloc(void* mem_base, size_t size, MemType type,\n@@ -82,1 +82,2 @@\n-      return MallocTracker::record_malloc(mem_base, size, flag, stack);\n+      return MallocTracker::record_malloc(mem_base, size, type, stack);\n+      return MallocTracker::record_malloc(mem_base, size, type, stack);\n@@ -102,1 +103,1 @@\n-  static inline void record_new_arena(MEMFLAGS flag) {\n+  static inline void record_new_arena(MemType type) {\n@@ -104,1 +105,1 @@\n-    MallocTracker::record_new_arena(flag);\n+    MallocTracker::record_new_arena(type);\n@@ -108,1 +109,1 @@\n-  static inline void record_arena_free(MEMFLAGS flag) {\n+  static inline void record_arena_free(MemType type) {\n@@ -110,1 +111,1 @@\n-    MallocTracker::record_arena_free(flag);\n+    MallocTracker::record_arena_free(type);\n@@ -115,1 +116,1 @@\n-  static inline void record_arena_size_change(ssize_t diff, MEMFLAGS flag) {\n+  static inline void record_arena_size_change(ssize_t diff, MemType type) {\n@@ -117,1 +118,1 @@\n-    MallocTracker::record_arena_size_change(diff, flag);\n+    MallocTracker::record_arena_size_change(diff, type);\n@@ -124,1 +125,1 @@\n-    MEMFLAGS flag = mtNone) {\n+    MemType type = mtNone) {\n@@ -129,1 +130,1 @@\n-      VirtualMemoryTracker::add_reserved_region((address)addr, size, stack, flag);\n+      VirtualMemoryTracker::add_reserved_region((address)addr, size, stack, type);\n@@ -150,1 +151,1 @@\n-    const NativeCallStack& stack, MEMFLAGS flag = mtNone) {\n+    const NativeCallStack& stack, MemType type = mtNone) {\n@@ -155,1 +156,1 @@\n-      VirtualMemoryTracker::add_reserved_region((address)addr, size, stack, flag);\n+      VirtualMemoryTracker::add_reserved_region((address)addr, size, stack, type);\n@@ -186,1 +187,1 @@\n-                                       const NativeCallStack& stack, MEMFLAGS flag) {\n+                                       const NativeCallStack& stack, MemType type) {\n@@ -191,1 +192,1 @@\n-    MemoryFileTracker::Instance::allocate_memory(file, offset, size, stack, flag);\n+    MemoryFileTracker::Instance::allocate_memory(file, offset, size, stack, type);\n@@ -209,1 +210,1 @@\n-  static inline void record_virtual_memory_split_reserved(void* addr, size_t size, size_t split, MEMFLAGS flag, MEMFLAGS split_flag) {\n+  static inline void record_virtual_memory_split_reserved(void* addr, size_t size, size_t split, MemType type, MemType split_flag) {\n@@ -214,1 +215,1 @@\n-      VirtualMemoryTracker::split_reserved_region((address)addr, size, split, flag, split_flag);\n+      VirtualMemoryTracker::split_reserved_region((address)addr, size, split, type, split_flag);\n@@ -218,1 +219,1 @@\n-  static inline void record_virtual_memory_type(void* addr, MEMFLAGS flag) {\n+  static inline void record_virtual_memory_type(void* addr, MemType type) {\n@@ -223,1 +224,1 @@\n-      VirtualMemoryTracker::set_reserved_region_type((address)addr, flag);\n+      VirtualMemoryTracker::set_reserved_region_type((address)addr, type);\n@@ -266,1 +267,1 @@\n-  static inline bool check_exceeds_limit(size_t s, MEMFLAGS f);\n+  static inline bool check_exceeds_limit(size_t s, MemType f);\n","filename":"src\/hotspot\/share\/nmt\/memTracker.hpp","additions":21,"deletions":20,"binary":false,"changes":41,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2023, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,1 +33,1 @@\n-inline bool MemTracker::check_exceeds_limit(size_t s, MEMFLAGS f) {\n+inline bool MemTracker::check_exceeds_limit(size_t s, MemType type) {\n@@ -37,1 +37,1 @@\n-  return MallocTracker::check_exceeds_limit(s, f);\n+  return MallocTracker::check_exceeds_limit(s, type);\n","filename":"src\/hotspot\/share\/nmt\/memTracker.inline.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -25,2 +25,2 @@\n-#ifndef SHARE_NMT_MEMFLAGS_HPP\n-#define SHARE_NMT_MEMFLAGS_HPP\n+#ifndef SHARE_NMT_MEMTYPE_HPP\n+#define SHARE_NMT_MEMTYPE_HPP\n@@ -67,1 +67,1 @@\n-enum class MEMFLAGS : uint8_t  {\n+enum class MemType : uint8_t  {\n@@ -74,1 +74,1 @@\n-  constexpr MEMFLAGS type = MEMFLAGS::type;\n+  constexpr MemType type = MemType::type;\n@@ -76,1 +76,1 @@\n-\/\/ Generate short aliases for the enum values. E.g. mtGC instead of MEMFLAGS::mtGC.\n+\/\/ Generate short aliases for the enum values. E.g. mtGC instead of MemType::mtGC.\n@@ -80,1 +80,1 @@\n-constexpr int mt_number_of_types = static_cast<int>(MEMFLAGS::mt_number_of_types);\n+constexpr int mt_number_of_types = static_cast<int>(MemType::mt_number_of_types);\n@@ -82,1 +82,1 @@\n-#endif \/\/ SHARE_NMT_MEMFLAGS_HPP\n+#endif \/\/ SHARE_NMT_MEMTYPE_HPP\n","filename":"src\/hotspot\/share\/nmt\/memType.hpp","additions":7,"deletions":7,"binary":false,"changes":14,"previous_filename":"src\/hotspot\/share\/nmt\/memflags.hpp","status":"renamed"},{"patch":"@@ -45,1 +45,1 @@\n-                                        MEMFLAGS flag) {\n+                                        MemType type) {\n@@ -47,1 +47,1 @@\n-  VMATree::RegionData regiondata(sidx, flag);\n+  VMATree::RegionData regiondata(sidx, type);\n@@ -51,2 +51,2 @@\n-    summary->reserve_memory(diff.flag[i].commit);\n-    summary->commit_memory(diff.flag[i].commit);\n+    summary->reserve_memory(diff.type[i].commit);\n+    summary->commit_memory(diff.type[i].commit);\n@@ -60,2 +60,2 @@\n-    summary->reserve_memory(diff.flag[i].commit);\n-    summary->commit_memory(diff.flag[i].commit);\n+    summary->reserve_memory(diff.type[i].commit);\n+    summary->commit_memory(diff.type[i].commit);\n@@ -87,1 +87,1 @@\n-    if (prev->val().out.type() == VMATree::StateType::Committed) {\n+    if (prev->val().out.state() == VMATree::StateType::Committed) {\n@@ -94,1 +94,1 @@\n-                       NMTUtil::flag_to_name(prev->val().out.flag()));\n+                       NMTUtil::flag_to_name(prev->val().out.type()));\n@@ -108,2 +108,2 @@\n-                  VMATree::statetype_to_string(broken_start->val().out.type()),\n-                  VMATree::statetype_to_string(broken_end->val().in.type()));\n+                  VMATree::statetype_to_string(broken_start->val().out.state()),\n+                  VMATree::statetype_to_string(broken_end->val().in.state()));\n@@ -141,2 +141,2 @@\n-                                                  MEMFLAGS flag) {\n-  _tracker->allocate_memory(file, offset, size, stack, flag);\n+                                                  MemType type) {\n+  _tracker->allocate_memory(file, offset, size, stack, type);\n","filename":"src\/hotspot\/share\/nmt\/memoryFileTracker.cpp","additions":12,"deletions":12,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -69,1 +69,1 @@\n-                       MEMFLAGS flag);\n+                       MemType type);\n@@ -99,1 +99,1 @@\n-                                const NativeCallStack& stack, MEMFLAGS flag);\n+                                const NativeCallStack& stack, MemType type);\n","filename":"src\/hotspot\/share\/nmt\/memoryFileTracker.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -30,1 +30,1 @@\n-#include \"nmt\/memflags.hpp\"\n+#include \"nmt\/memType.hpp\"\n","filename":"src\/hotspot\/share\/nmt\/nativeCallStackPrinter.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -90,1 +90,1 @@\n-MEMFLAGS NMTUtil::string_to_flag(const char* s) {\n+MemType NMTUtil::string_to_flag(const char* s) {\n@@ -97,1 +97,1 @@\n-      return (MEMFLAGS)i;\n+      return (MemType)i;\n","filename":"src\/hotspot\/share\/nmt\/nmtCommon.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -31,1 +31,1 @@\n-#include \"nmt\/memflags.hpp\"\n+#include \"nmt\/memType.hpp\"\n@@ -78,1 +78,1 @@\n-  \/\/ Check if index is a valid MEMFLAGS enum value (including mtNone)\n+  \/\/ Check if index is a valid MemType enum value (including mtNone)\n@@ -83,3 +83,3 @@\n-  \/\/ Check if flag value is a valid MEMFLAGS enum value (including mtNone)\n-  static inline bool flag_is_valid(MEMFLAGS flag) {\n-    const int index = static_cast<int>(flag);\n+  \/\/ Check if type value is a valid MemType enum value (including mtNone)\n+  static inline bool flag_is_valid(MemType type) {\n+    const int index = static_cast<int>(type);\n@@ -90,3 +90,3 @@\n-  static inline int flag_to_index(MEMFLAGS flag) {\n-    assert(flag_is_valid(flag), \"Invalid flag (%u)\", (unsigned)flag);\n-    return static_cast<int>(flag);\n+  static inline int flag_to_index(MemType type) {\n+    assert(flag_is_valid(type), \"Invalid type (%u)\", (unsigned)type);\n+    return static_cast<int>(type);\n@@ -96,2 +96,2 @@\n-  static const char* flag_to_name(MEMFLAGS flag) {\n-    return _strings[flag_to_index(flag)].human_readable;\n+  static const char* flag_to_name(MemType type) {\n+    return _strings[flag_to_index(type)].human_readable;\n@@ -101,2 +101,2 @@\n-  static const char* flag_to_enum_name(MEMFLAGS flag) {\n-    return _strings[flag_to_index(flag)].enum_s;\n+  static const char* flag_to_enum_name(MemType type) {\n+    return _strings[flag_to_index(type)].enum_s;\n@@ -106,3 +106,3 @@\n-  static MEMFLAGS index_to_flag(int index) {\n-    assert(flag_index_is_valid(index), \"Invalid flag index (%d)\", index);\n-    return static_cast<MEMFLAGS>(index);\n+  static MemType index_to_flag(int index) {\n+    assert(flag_index_is_valid(index), \"Invalid type index (%d)\", index);\n+    return static_cast<MemType>(index);\n@@ -124,1 +124,1 @@\n-  \/\/ Given a string, return associated flag. mtNone if name is invalid.\n+  \/\/ Given a string, return associated type. mtNone if name is invalid.\n@@ -127,1 +127,1 @@\n-  static MEMFLAGS string_to_flag(const char* name);\n+  static MemType string_to_flag(const char* name);\n","filename":"src\/hotspot\/share\/nmt\/nmtCommon.hpp","additions":17,"deletions":17,"binary":false,"changes":34,"status":"modified"},{"patch":"@@ -3,1 +3,1 @@\n- * Copyright (c) 2022, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -201,1 +201,1 @@\n-void* NMTPreInit::do_os_malloc(size_t size, MEMFLAGS memflags) {\n+void* NMTPreInit::do_os_malloc(size_t size, MemType memflags) {\n","filename":"src\/hotspot\/share\/nmt\/nmtPreInit.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -3,1 +3,1 @@\n- * Copyright (c) 2022, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -258,1 +258,1 @@\n-  static void* do_os_malloc(size_t size, MEMFLAGS memflags);\n+  static void* do_os_malloc(size_t size, MemType memflags);\n@@ -286,1 +286,1 @@\n-  static bool handle_realloc(void** rc, void* old_p, size_t new_size, MEMFLAGS memflags) {\n+  static bool handle_realloc(void** rc, void* old_p, size_t new_size, MemType memflags) {\n","filename":"src\/hotspot\/share\/nmt\/nmtPreInit.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -61,2 +61,2 @@\n-    MEMFLAGS flag = NMTUtil::index_to_flag(i);\n-    const MallocMemory* mm = ms->by_type(flag);\n+    MemType type = NMTUtil::index_to_flag(i);\n+    const MallocMemory* mm = ms->by_type(type);\n@@ -85,2 +85,2 @@\n-    MEMFLAGS flag = NMTUtil::index_to_flag(i);\n-    const VirtualMemory* vm = vms->by_type(flag);\n+    MemType type = NMTUtil::index_to_flag(i);\n+    const VirtualMemory* vm = vms->by_type(type);\n@@ -119,2 +119,2 @@\n-size_t NMTUsage::reserved(MEMFLAGS flag) const {\n-  int index = NMTUtil::flag_to_index(flag);\n+size_t NMTUsage::reserved(MemType type) const {\n+  int index = NMTUtil::flag_to_index(type);\n@@ -124,2 +124,2 @@\n-size_t NMTUsage::committed(MEMFLAGS flag) const {\n-  int index = NMTUtil::flag_to_index(flag);\n+size_t NMTUsage::committed(MemType type) const {\n+  int index = NMTUtil::flag_to_index(type);\n","filename":"src\/hotspot\/share\/nmt\/nmtUsage.cpp","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -64,2 +64,2 @@\n-  size_t reserved(MEMFLAGS flag) const;\n-  size_t committed(MEMFLAGS flag) const;\n+  size_t reserved(MemType type) const;\n+  size_t committed(MemType type) const;\n","filename":"src\/hotspot\/share\/nmt\/nmtUsage.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -145,1 +145,1 @@\n-  VirtualMemorySummary::record_committed_memory(size, flag());\n+  VirtualMemorySummary::record_committed_memory(size, type());\n@@ -215,1 +215,1 @@\n-      VirtualMemorySummary::record_uncommitted_memory(crgn->size(), flag());\n+      VirtualMemorySummary::record_uncommitted_memory(crgn->size(), type());\n@@ -222,1 +222,1 @@\n-      VirtualMemorySummary::record_uncommitted_memory(crgn->size(), flag());\n+      VirtualMemorySummary::record_uncommitted_memory(crgn->size(), type());\n@@ -233,1 +233,1 @@\n-        VirtualMemorySummary::record_uncommitted_memory(sz, flag());\n+        VirtualMemorySummary::record_uncommitted_memory(sz, type());\n@@ -239,1 +239,1 @@\n-        VirtualMemorySummary::record_uncommitted_memory(size, flag());\n+        VirtualMemorySummary::record_uncommitted_memory(size, type());\n@@ -246,1 +246,1 @@\n-      VirtualMemorySummary::record_uncommitted_memory(size, flag());\n+      VirtualMemorySummary::record_uncommitted_memory(size, type());\n@@ -295,2 +295,2 @@\n-void ReservedMemoryRegion::set_flag(MEMFLAGS f) {\n-  assert((flag() == mtNone || flag() == f),\n+void ReservedMemoryRegion::set_type(MemType f) {\n+  assert((type() == mtNone || type() == f),\n@@ -298,5 +298,5 @@\n-         p2i(base()), p2i(end()), (unsigned)flag(), (unsigned)f);\n-  if (flag() != f) {\n-    VirtualMemorySummary::move_reserved_memory(flag(), f, size());\n-    VirtualMemorySummary::move_committed_memory(flag(), f, committed_size());\n-    _flag = f;\n+         p2i(base()), p2i(end()), (unsigned)type(), (unsigned)f);\n+  if (type() != f) {\n+    VirtualMemorySummary::move_reserved_memory(type(), f, size());\n+    VirtualMemorySummary::move_committed_memory(type(), f, committed_size());\n+    _type = f;\n@@ -307,1 +307,1 @@\n-  assert(flag() == mtThreadStack, \"Only for thread stack\");\n+  assert(type() == mtThreadStack, \"Only for thread stack\");\n@@ -337,1 +337,1 @@\n-    const NativeCallStack& stack, MEMFLAGS flag) {\n+    const NativeCallStack& stack, MemType type) {\n@@ -341,1 +341,1 @@\n-  ReservedMemoryRegion  rgn(base_addr, size, stack, flag);\n+  ReservedMemoryRegion  rgn(base_addr, size, stack, type);\n@@ -345,1 +345,1 @@\n-                rgn.flag_name(), p2i(rgn.base()), rgn.size());\n+                rgn.type_name(), p2i(rgn.base()), rgn.size());\n@@ -347,1 +347,1 @@\n-    VirtualMemorySummary::record_reserved_memory(size, flag);\n+    VirtualMemorySummary::record_reserved_memory(size, type);\n@@ -354,1 +354,1 @@\n-        (reserved_rgn->flag() == flag || reserved_rgn->flag() == mtNone)) {\n+        (reserved_rgn->type() == type || reserved_rgn->type() == mtNone)) {\n@@ -356,1 +356,1 @@\n-      reserved_rgn->set_flag(flag);\n+      reserved_rgn->set_type(type);\n@@ -365,1 +365,1 @@\n-      if (reserved_rgn->flag() == mtThreadStack) {\n+      if (reserved_rgn->type() == mtThreadStack) {\n@@ -370,2 +370,2 @@\n-        VirtualMemorySummary::record_uncommitted_memory(reserved_rgn->committed_size(), reserved_rgn->flag());\n-        VirtualMemorySummary::record_released_memory(reserved_rgn->size(), reserved_rgn->flag());\n+        VirtualMemorySummary::record_uncommitted_memory(reserved_rgn->committed_size(), reserved_rgn->type());\n+        VirtualMemorySummary::record_released_memory(reserved_rgn->size(), reserved_rgn->type());\n@@ -374,1 +374,1 @@\n-        VirtualMemorySummary::record_reserved_memory(rgn.size(), flag);\n+        VirtualMemorySummary::record_reserved_memory(rgn.size(), type);\n@@ -383,1 +383,1 @@\n-      if (reserved_rgn->flag() == mtClassShared) {\n+      if (reserved_rgn->type() == mtClassShared) {\n@@ -385,1 +385,1 @@\n-                      reserved_rgn->flag_name(), p2i(reserved_rgn->base()), reserved_rgn->size());\n+                      reserved_rgn->type_name(), p2i(reserved_rgn->base()), reserved_rgn->size());\n@@ -392,1 +392,1 @@\n-      if (reserved_rgn->flag() == mtJavaHeap) {\n+      if (reserved_rgn->type() == mtJavaHeap) {\n@@ -394,1 +394,1 @@\n-                      reserved_rgn->flag_name(), p2i(reserved_rgn->base()), reserved_rgn->size());\n+                      reserved_rgn->type_name(), p2i(reserved_rgn->base()), reserved_rgn->size());\n@@ -400,4 +400,4 @@\n-      tty->print_cr(\"Error: existing region: [\" INTPTR_FORMAT \"-\" INTPTR_FORMAT \"), flag %u.\\n\"\n-                    \"       new region: [\" INTPTR_FORMAT \"-\" INTPTR_FORMAT \"), flag %u.\",\n-                    p2i(reserved_rgn->base()), p2i(reserved_rgn->end()), (unsigned)reserved_rgn->flag(),\n-                    p2i(base_addr), p2i(base_addr + size), (unsigned)flag);\n+      tty->print_cr(\"Error: existing region: [\" INTPTR_FORMAT \"-\" INTPTR_FORMAT \"), type %u.\\n\"\n+                    \"       new region: [\" INTPTR_FORMAT \"-\" INTPTR_FORMAT \"), type %u.\",\n+                    p2i(reserved_rgn->base()), p2i(reserved_rgn->end()), (unsigned)reserved_rgn->type(),\n+                    p2i(base_addr), p2i(base_addr + size), (unsigned)type);\n@@ -416,1 +416,1 @@\n-void VirtualMemoryTracker::set_reserved_region_type(address addr, MEMFLAGS flag) {\n+void VirtualMemoryTracker::set_reserved_region_type(address addr, MemType type) {\n@@ -424,4 +424,4 @@\n-    if (reserved_rgn->flag() != flag) {\n-      assert(reserved_rgn->flag() == mtNone, \"Overwrite memory type (should be mtNone, is: \\\"%s\\\")\",\n-             NMTUtil::flag_to_name(reserved_rgn->flag()));\n-      reserved_rgn->set_flag(flag);\n+    if (reserved_rgn->type() != type) {\n+      assert(reserved_rgn->type() == mtNone, \"Overwrite memory type (should be mtNone, is: \\\"%s\\\")\",\n+             NMTUtil::flag_to_name(reserved_rgn->type()));\n+      reserved_rgn->set_type(type);\n@@ -443,1 +443,1 @@\n-                  rgn.flag_name(),  p2i(rgn.base()), rgn.size());\n+                  rgn.type_name(),  p2i(rgn.base()), rgn.size());\n@@ -449,1 +449,1 @@\n-                reserved_rgn->flag_name(),  p2i(rgn.base()), rgn.size(), (result ? \"Succeeded\" : \"Failed\"));\n+                reserved_rgn->type_name(),  p2i(rgn.base()), rgn.size(), (result ? \"Succeeded\" : \"Failed\"));\n@@ -462,1 +462,1 @@\n-  const char* flag_name = reserved_rgn->flag_name();  \/\/ after remove, info is not complete\n+  const char* type_name = reserved_rgn->type_name();  \/\/ after remove, info is not complete\n@@ -465,1 +465,1 @@\n-                flag_name,  p2i(addr), size, (result ? \" Succeeded\" : \"Failed\"));\n+                 type_name,  p2i(addr), size, (result ? \" Succeeded\" : \"Failed\"));\n@@ -477,1 +477,1 @@\n-                backup.flag_name(), p2i(backup.base()), backup.size(), (result ? \"Succeeded\" : \"Failed\"));\n+                backup.type_name(), p2i(backup.base()), backup.size(), (result ? \"Succeeded\" : \"Failed\"));\n@@ -482,1 +482,1 @@\n-  VirtualMemorySummary::record_released_memory(rgn->size(), rgn->flag());\n+  VirtualMemorySummary::record_released_memory(rgn->size(), rgn->type());\n@@ -485,1 +485,1 @@\n-                backup.flag_name(), p2i(backup.base()), backup.size(), (result ? \"Succeeded\" : \"Failed\"));\n+                backup.type_name(), p2i(backup.base()), backup.size(), (result ? \"Succeeded\" : \"Failed\"));\n@@ -511,1 +511,1 @@\n-  if (reserved_rgn->flag() == mtClassShared) {\n+  if (reserved_rgn->type() == mtClassShared) {\n@@ -526,1 +526,1 @@\n-      assert(cls_rgn->flag() == mtClass, \"Must be class type\");\n+      assert(cls_rgn->type() == mtClass, \"Must be class type\");\n@@ -533,1 +533,1 @@\n-  VirtualMemorySummary::record_released_memory(size, reserved_rgn->flag());\n+  VirtualMemorySummary::record_released_memory(size, reserved_rgn->type());\n@@ -544,1 +544,1 @@\n-      *reserved_rgn->call_stack(), reserved_rgn->flag());\n+      *reserved_rgn->call_stack(), reserved_rgn->type());\n@@ -560,2 +560,2 @@\n-\/\/  stack and the memory flags of the original section.\n-bool VirtualMemoryTracker::split_reserved_region(address addr, size_t size, size_t split, MEMFLAGS flag, MEMFLAGS split_flag) {\n+\/\/  stack and the memory types of the original section.\n+bool VirtualMemoryTracker::split_reserved_region(address addr, size_t size, size_t split, MemType type, MemType split_type) {\n@@ -570,1 +570,1 @@\n-  MEMFLAGS original_flags = reserved_rgn->flag();\n+  MemType original_types = reserved_rgn->type();\n@@ -572,1 +572,1 @@\n-  const char* name = reserved_rgn->flag_name();\n+  const char* name = reserved_rgn->type_name();\n@@ -577,2 +577,2 @@\n-  add_reserved_region(addr, split, original_stack, flag);\n-  add_reserved_region(addr + split, size - split, original_stack, split_flag);\n+  add_reserved_region(addr, split, original_stack, type);\n+  add_reserved_region(addr + split, size - split, original_stack, split_type);\n@@ -624,1 +624,1 @@\n-    if (rgn->flag() == mtThreadStack) {\n+    if (rgn->type() == mtThreadStack) {\n@@ -691,1 +691,1 @@\n-        p2i(_p), p2i(rgn->base()), p2i(rgn->base() + rgn->size()), NMTUtil::flag_to_enum_name(rgn->flag()));\n+        p2i(_p), p2i(rgn->base()), p2i(rgn->base() + rgn->size()), NMTUtil::flag_to_enum_name(rgn->type()));\n","filename":"src\/hotspot\/share\/nmt\/virtualMemoryTracker.cpp","additions":56,"deletions":56,"binary":false,"changes":112,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -80,2 +80,2 @@\n-  VirtualMemoryAllocationSite(const NativeCallStack& stack, MEMFLAGS flag) :\n-    AllocationSite(stack, flag) { }\n+  VirtualMemoryAllocationSite(const NativeCallStack& stack, MemType type) :\n+    AllocationSite(stack, type) { }\n@@ -101,2 +101,2 @@\n-  inline VirtualMemory* by_type(MEMFLAGS flag) {\n-    int index = NMTUtil::flag_to_index(flag);\n+  inline VirtualMemory* by_type(MemType type) {\n+    int index = NMTUtil::flag_to_index(type);\n@@ -106,2 +106,2 @@\n-  inline const VirtualMemory* by_type(MEMFLAGS flag) const {\n-    int index = NMTUtil::flag_to_index(flag);\n+  inline const VirtualMemory* by_type(MemType type) const {\n+    int index = NMTUtil::flag_to_index(type);\n@@ -137,2 +137,2 @@\n-  static inline void record_reserved_memory(size_t size, MEMFLAGS flag) {\n-    as_snapshot()->by_type(flag)->reserve_memory(size);\n+  static inline void record_reserved_memory(size_t size, MemType type) {\n+    as_snapshot()->by_type(type)->reserve_memory(size);\n@@ -141,2 +141,2 @@\n-  static inline void record_committed_memory(size_t size, MEMFLAGS flag) {\n-    as_snapshot()->by_type(flag)->commit_memory(size);\n+  static inline void record_committed_memory(size_t size, MemType type) {\n+    as_snapshot()->by_type(type)->commit_memory(size);\n@@ -145,2 +145,2 @@\n-  static inline void record_uncommitted_memory(size_t size, MEMFLAGS flag) {\n-    as_snapshot()->by_type(flag)->uncommit_memory(size);\n+  static inline void record_uncommitted_memory(size_t size, MemType type) {\n+    as_snapshot()->by_type(type)->uncommit_memory(size);\n@@ -149,2 +149,2 @@\n-  static inline void record_released_memory(size_t size, MEMFLAGS flag) {\n-    as_snapshot()->by_type(flag)->release_memory(size);\n+  static inline void record_released_memory(size_t size, MemType type) {\n+    as_snapshot()->by_type(type)->release_memory(size);\n@@ -157,1 +157,1 @@\n-  static inline void move_reserved_memory(MEMFLAGS from, MEMFLAGS to, size_t size) {\n+  static inline void move_reserved_memory(MemType from, MemType to, size_t size) {\n@@ -162,1 +162,1 @@\n-  static inline void move_committed_memory(MEMFLAGS from, MEMFLAGS to, size_t size) {\n+  static inline void move_committed_memory(MemType from, MemType to, size_t size) {\n@@ -296,1 +296,1 @@\n-  MEMFLAGS         _flag;\n+  MemType         _type;\n@@ -300,2 +300,2 @@\n-    MEMFLAGS flag = mtNone) :\n-    VirtualMemoryRegion(base, size), _stack(stack), _flag(flag) { }\n+    MemType type = mtNone) :\n+    VirtualMemoryRegion(base, size), _stack(stack), _type(type) { }\n@@ -305,1 +305,1 @@\n-    VirtualMemoryRegion(base, size), _stack(NativeCallStack::empty_stack()), _flag(mtNone) { }\n+    VirtualMemoryRegion(base, size), _stack(NativeCallStack::empty_stack()), _type(mtNone) { }\n@@ -316,2 +316,2 @@\n-  void  set_flag(MEMFLAGS flag);\n-  inline MEMFLAGS flag() const            { return _flag;  }\n+  void  set_type(MemType type);\n+  inline MemType type() const            { return _type;  }\n@@ -340,1 +340,1 @@\n-    _flag  =         other.flag();\n+    _type  =         other.type();\n@@ -353,1 +353,1 @@\n-  const char* flag_name() const { return NMTUtil::flag_to_name(_flag); }\n+  const char* type_name() const { return NMTUtil::flag_to_name(_type); }\n@@ -383,1 +383,1 @@\n-  static bool add_reserved_region (address base_addr, size_t size, const NativeCallStack& stack, MEMFLAGS flag = mtNone);\n+  static bool add_reserved_region (address base_addr, size_t size, const NativeCallStack& stack, MemType type = mtNone);\n@@ -389,1 +389,1 @@\n-  static void set_reserved_region_type  (address addr, MEMFLAGS flag);\n+  static void set_reserved_region_type  (address addr, MemType type);\n@@ -393,2 +393,2 @@\n-  \/\/  stack and the memory flags of the original section.\n-  static bool split_reserved_region(address addr, size_t size, size_t split, MEMFLAGS flag, MEMFLAGS split_flag);\n+  \/\/  stack and the memory types of the original section.\n+  static bool split_reserved_region(address addr, size_t size, size_t split, MemType type, MemType split_type);\n","filename":"src\/hotspot\/share\/nmt\/virtualMemoryTracker.hpp","additions":29,"deletions":29,"binary":false,"changes":58,"status":"modified"},{"patch":"@@ -86,2 +86,2 @@\n-        \/\/ reserve [x1, A), flag1; ... reserve [A, x2), flag2; or\n-        \/\/ reserve [A, x1), flag1; ... reserve [A, x2), flag2;\n+        \/\/ reserve [x1, A), type1; ... reserve [A, x2), type2; or\n+        \/\/ reserve [A, x1), type1; ... reserve [A, x2), type2;\n@@ -150,2 +150,2 @@\n-    SingleDiff& rescom = diff.flag[NMTUtil::flag_to_index(LEQ_A.out().flag())];\n-    if (LEQ_A.out().type() == StateType::Reserved) {\n+    SingleDiff& rescom = diff.type[NMTUtil::flag_to_index(LEQ_A.out().type())];\n+    if (LEQ_A.out().state() == StateType::Reserved) {\n@@ -153,1 +153,1 @@\n-    } else if (LEQ_A.out().type() == StateType::Committed) {\n+    } else if (LEQ_A.out().state() == StateType::Committed) {\n@@ -166,2 +166,2 @@\n-    SingleDiff& rescom = diff.flag[NMTUtil::flag_to_index(delete_me.in().flag())];\n-    if (delete_me.in().type() == StateType::Reserved) {\n+    SingleDiff& rescom = diff.type[NMTUtil::flag_to_index(delete_me.in().type())];\n+    if (delete_me.in().state() == StateType::Reserved) {\n@@ -169,1 +169,1 @@\n-    } else if (delete_me.in().type() == StateType::Committed) {\n+    } else if (delete_me.in().state() == StateType::Committed) {\n@@ -176,1 +176,1 @@\n-  if (prev.address != A && prev.out().type() != StateType::Released) {\n+  if (prev.address != A && prev.out().state() != StateType::Released) {\n@@ -180,2 +180,2 @@\n-    if (prev.out().type() == StateType::Reserved) {\n-      SingleDiff& rescom = diff.flag[NMTUtil::flag_to_index(prev.out().flag())];\n+    if (prev.out().state() == StateType::Reserved) {\n+      SingleDiff& rescom = diff.type[NMTUtil::flag_to_index(prev.out().type())];\n@@ -183,2 +183,2 @@\n-    } else if (prev.out().type() == StateType::Committed) {\n-      SingleDiff& rescom = diff.flag[NMTUtil::flag_to_index(prev.out().flag())];\n+    } else if (prev.out().state() == StateType::Committed) {\n+      SingleDiff& rescom = diff.type[NMTUtil::flag_to_index(prev.out().type())];\n@@ -191,1 +191,1 @@\n-  SingleDiff& rescom = diff.flag[NMTUtil::flag_to_index(metadata.flag)];\n+  SingleDiff& rescom = diff.type[NMTUtil::flag_to_index(metadata.type)];\n","filename":"src\/hotspot\/share\/nmt\/vmatree.cpp","additions":14,"deletions":14,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -38,1 +38,1 @@\n-\/\/ or from committed memory of a certain MEMFLAGS to committed memory of a different MEMFLAGS.\n+\/\/ or from committed memory of a certain MemType to committed memory of a different MemType.\n@@ -64,3 +64,3 @@\n-  static const char* statetype_to_string(StateType type) {\n-    assert(type != StateType::LAST, \"must be\");\n-    return statetype_strings[static_cast<uint8_t>(type)];\n+  static const char* statetype_to_string(StateType state) {\n+    assert(state != StateType::LAST, \"must be\");\n+    return statetype_strings[static_cast<uint8_t>(state)];\n@@ -69,1 +69,1 @@\n-  \/\/ Each point has some stack and a flag associated with it.\n+  \/\/ Each point has some stack and a type associated with it.\n@@ -72,1 +72,1 @@\n-    const MEMFLAGS flag;\n+    const MemType type;\n@@ -74,1 +74,1 @@\n-    RegionData() : stack_idx(), flag(mtNone) {}\n+    RegionData() : stack_idx(), type(mtNone) {}\n@@ -76,2 +76,2 @@\n-    RegionData(NativeCallStackStorage::StackIndex stack_idx, MEMFLAGS flag)\n-    : stack_idx(stack_idx), flag(flag) {}\n+    RegionData(NativeCallStackStorage::StackIndex stack_idx, MemType type)\n+    : stack_idx(stack_idx), type(type) {}\n@@ -80,1 +80,1 @@\n-      return a.flag == b.flag &&\n+      return a.type == b.type &&\n@@ -90,1 +90,1 @@\n-    \/\/ Store the type and flag as two bytes\n+    \/\/ Store the type and type as two bytes\n@@ -97,1 +97,1 @@\n-      assert(!(type == StateType::Released) || data.flag == mtNone, \"Released type must have flag mtNone\");\n+      assert(!(type == StateType::Released) || data.type == mtNone, \"Released type must have type mtNone\");\n@@ -99,1 +99,1 @@\n-      type_flag[1] = static_cast<uint8_t>(data.flag);\n+      type_flag[1] = static_cast<uint8_t>(data.type);\n@@ -103,1 +103,1 @@\n-    StateType type() const {\n+    StateType state() const {\n@@ -107,2 +107,2 @@\n-    MEMFLAGS flag() const {\n-      return static_cast<MEMFLAGS>(type_flag[1]);\n+    MemType type() const {\n+      return static_cast<MemType>(type_flag[1]);\n@@ -112,1 +112,1 @@\n-      return RegionData{sidx, flag()};\n+      return RegionData{sidx, type()};\n@@ -127,1 +127,1 @@\n-      return in.type() == out.type() &&\n+      return in.state() == out.state() &&\n@@ -162,1 +162,1 @@\n-    SingleDiff flag[mt_number_of_types];\n+    SingleDiff type[mt_number_of_types];\n@@ -165,1 +165,1 @@\n-        flag[i] = SingleDiff{0, 0};\n+        type[i] = SingleDiff{0, 0};\n","filename":"src\/hotspot\/share\/nmt\/vmatree.hpp","additions":20,"deletions":20,"binary":false,"changes":40,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n-#include \"nmt\/memflags.hpp\"\n+#include \"nmt\/memType.hpp\"\n","filename":"src\/hotspot\/share\/prims\/jvmtiAgentList.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -699,1 +699,1 @@\n-  return (jlong)(uintptr_t)os::malloc(size, (MEMFLAGS)type, stack);\n+  return (jlong)(uintptr_t)os::malloc(size, (MemType)type, stack);\n","filename":"src\/hotspot\/share\/prims\/whitebox.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -190,1 +190,1 @@\n-  HandleArea(MEMFLAGS flags, HandleArea* prev) : Arena(flags, Tag::tag_ha, Chunk::tiny_size) {\n+  HandleArea(MemType type, HandleArea* prev) : Arena(type, Tag::tag_ha, Chunk::tiny_size) {\n","filename":"src\/hotspot\/share\/runtime\/handles.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -412,2 +412,2 @@\n-JavaThread::JavaThread(MEMFLAGS flags) :\n-  Thread(flags),\n+JavaThread::JavaThread(MemType type) :\n+  Thread(type),\n@@ -636,1 +636,1 @@\n-JavaThread::JavaThread(ThreadFunction entry_point, size_t stack_sz, MEMFLAGS flags) : JavaThread(flags) {\n+JavaThread::JavaThread(ThreadFunction entry_point, size_t stack_sz, MemType type) : JavaThread(type) {\n","filename":"src\/hotspot\/share\/runtime\/javaThread.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -481,2 +481,2 @@\n-  JavaThread(MEMFLAGS flags = mtThread);   \/\/ delegating constructor\n-  JavaThread(ThreadFunction entry_point, size_t stack_size = 0, MEMFLAGS flags = mtThread);\n+  JavaThread(MemType type = mtThread);   \/\/ delegating constructor\n+  JavaThread(ThreadFunction entry_point, size_t stack_size = 0, MemType type = mtThread);\n","filename":"src\/hotspot\/share\/runtime\/javaThread.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -603,1 +603,1 @@\n-char *os::strdup(const char *str, MEMFLAGS flags) {\n+char *os::strdup(const char *str, MemType type) {\n@@ -605,1 +605,1 @@\n-  char *dup_str = (char *)malloc(size + 1, flags);\n+  char *dup_str = (char *)malloc(size + 1, type);\n@@ -611,2 +611,2 @@\n-char* os::strdup_check_oom(const char* str, MEMFLAGS flags) {\n-  char* p = os::strdup(str, flags);\n+char* os::strdup_check_oom(const char* str, MemType type) {\n+  char* p = os::strdup(str, type);\n@@ -632,2 +632,2 @@\n-void* os::malloc(size_t size, MEMFLAGS flags) {\n-  return os::malloc(size, flags, CALLER_PC);\n+void* os::malloc(size_t size, MemType type) {\n+  return os::malloc(size, type, CALLER_PC);\n@@ -636,1 +636,1 @@\n-void* os::malloc(size_t size, MEMFLAGS memflags, const NativeCallStack& stack) {\n+void* os::malloc(size_t size, MemType memflags, const NativeCallStack& stack) {\n@@ -682,2 +682,2 @@\n-void* os::realloc(void *memblock, size_t size, MEMFLAGS flags) {\n-  return os::realloc(memblock, size, flags, CALLER_PC);\n+void* os::realloc(void *memblock, size_t size, MemType type) {\n+  return os::realloc(memblock, size, type, CALLER_PC);\n@@ -686,1 +686,1 @@\n-void* os::realloc(void *memblock, size_t size, MEMFLAGS memflags, const NativeCallStack& stack) {\n+void* os::realloc(void *memblock, size_t size, MemType memflags, const NativeCallStack& stack) {\n@@ -725,2 +725,2 @@\n-    assert(memflags == header->flags(), \"weird NMT flags mismatch (new:\\\"%s\\\" != old:\\\"%s\\\")\\n\",\n-           NMTUtil::flag_to_name(memflags), NMTUtil::flag_to_name(header->flags()));\n+    assert(memflags == header->type(), \"weird NMT type mismatch (new:\\\"%s\\\" != old:\\\"%s\\\")\\n\",\n+           NMTUtil::flag_to_name(memflags), NMTUtil::flag_to_name(header->type()));\n@@ -1867,1 +1867,1 @@\n-char* os::reserve_memory(size_t bytes, bool executable, MEMFLAGS flags) {\n+char* os::reserve_memory(size_t bytes, bool executable, MemType type) {\n@@ -1870,1 +1870,1 @@\n-    MemTracker::record_virtual_memory_reserve(result, bytes, CALLER_PC, flags);\n+    MemTracker::record_virtual_memory_reserve(result, bytes, CALLER_PC, type);\n@@ -1878,1 +1878,1 @@\n-char* os::attempt_reserve_memory_at(char* addr, size_t bytes, bool executable, MEMFLAGS flag) {\n+char* os::attempt_reserve_memory_at(char* addr, size_t bytes, bool executable, MemType type) {\n@@ -1881,1 +1881,1 @@\n-    MemTracker::record_virtual_memory_reserve((address)result, bytes, CALLER_PC, flag);\n+    MemTracker::record_virtual_memory_reserve((address)result, bytes, CALLER_PC, type);\n@@ -2231,1 +2231,1 @@\n-char* os::map_memory_to_file(size_t bytes, int file_desc, MEMFLAGS flag) {\n+char* os::map_memory_to_file(size_t bytes, int file_desc, MemType type) {\n@@ -2237,1 +2237,1 @@\n-    MemTracker::record_virtual_memory_reserve_and_commit(result, bytes, CALLER_PC, flag);\n+    MemTracker::record_virtual_memory_reserve_and_commit(result, bytes, CALLER_PC, type);\n@@ -2242,1 +2242,1 @@\n-char* os::attempt_map_memory_to_file_at(char* addr, size_t bytes, int file_desc, MEMFLAGS flag) {\n+char* os::attempt_map_memory_to_file_at(char* addr, size_t bytes, int file_desc, MemType type) {\n@@ -2245,1 +2245,1 @@\n-    MemTracker::record_virtual_memory_reserve_and_commit((address)result, bytes, CALLER_PC, flag);\n+    MemTracker::record_virtual_memory_reserve_and_commit((address)result, bytes, CALLER_PC, type);\n@@ -2252,1 +2252,1 @@\n-                           bool allow_exec, MEMFLAGS flags) {\n+                           bool allow_exec, MemType type) {\n@@ -2255,1 +2255,1 @@\n-    MemTracker::record_virtual_memory_reserve_and_commit((address)result, bytes, CALLER_PC, flags);\n+    MemTracker::record_virtual_memory_reserve_and_commit((address)result, bytes, CALLER_PC, type);\n","filename":"src\/hotspot\/share\/runtime\/os.cpp","additions":22,"deletions":22,"binary":false,"changes":44,"status":"modified"},{"patch":"@@ -453,1 +453,1 @@\n-  static char*  reserve_memory(size_t bytes, bool executable = false, MEMFLAGS flags = mtNone);\n+  static char*  reserve_memory(size_t bytes, bool executable = false, MemType type = mtNone);\n@@ -460,1 +460,1 @@\n-  static char*  attempt_reserve_memory_at(char* addr, size_t bytes, bool executable = false, MEMFLAGS flag = mtNone);\n+  static char*  attempt_reserve_memory_at(char* addr, size_t bytes, bool executable = false, MemType type = mtNone);\n@@ -512,2 +512,2 @@\n-  static char* map_memory_to_file(size_t size, int fd, MEMFLAGS flag = mtNone);\n-  static char* map_memory_to_file_aligned(size_t size, size_t alignment, int fd, MEMFLAGS flag = mtNone);\n+  static char* map_memory_to_file(size_t size, int fd, MemType type = mtNone);\n+  static char* map_memory_to_file_aligned(size_t size, size_t alignment, int fd, MemType type = mtNone);\n@@ -515,1 +515,1 @@\n-  static char* attempt_map_memory_to_file_at(char* base, size_t size, int fd, MEMFLAGS flag = mtNone);\n+  static char* attempt_map_memory_to_file_at(char* base, size_t size, int fd, MemType type = mtNone);\n@@ -521,1 +521,1 @@\n-                           bool allow_exec = false, MEMFLAGS flags = mtNone);\n+                           bool allow_exec = false, MemType type = mtNone);\n@@ -903,4 +903,4 @@\n-  static void* malloc  (size_t size, MEMFLAGS flags, const NativeCallStack& stack);\n-  static void* malloc  (size_t size, MEMFLAGS flags);\n-  static void* realloc (void *memblock, size_t size, MEMFLAGS flag, const NativeCallStack& stack);\n-  static void* realloc (void *memblock, size_t size, MEMFLAGS flag);\n+  static void* malloc  (size_t size, MemType type, const NativeCallStack& stack);\n+  static void* malloc  (size_t size, MemType type);\n+  static void* realloc (void *memblock, size_t size, MemType type, const NativeCallStack& stack);\n+  static void* realloc (void *memblock, size_t size, MemType type);\n@@ -910,1 +910,1 @@\n-  static char* strdup(const char *, MEMFLAGS flags = mtInternal);  \/\/ Like strdup\n+  static char* strdup(const char *, MemType type = mtInternal);  \/\/ Like strdup\n@@ -912,1 +912,1 @@\n-  static char* strdup_check_oom(const char*, MEMFLAGS flags = mtInternal);\n+  static char* strdup_check_oom(const char*, MemType type = mtInternal);\n@@ -916,3 +916,3 @@\n-  static ssize_t recv(int fd, char* buf, size_t nBytes, uint flags);\n-  static ssize_t send(int fd, char* buf, size_t nBytes, uint flags);\n-  static ssize_t raw_send(int fd, char* buf, size_t nBytes, uint flags);\n+  static ssize_t recv(int fd, char* buf, size_t nBytes, uint type);\n+  static ssize_t send(int fd, char* buf, size_t nBytes, uint type);\n+  static ssize_t raw_send(int fd, char* buf, size_t nBytes, uint type);\n","filename":"src\/hotspot\/share\/runtime\/os.hpp","additions":15,"deletions":15,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -67,1 +67,1 @@\n-Thread::Thread(MEMFLAGS flags) {\n+Thread::Thread(MemType type) {\n@@ -81,1 +81,1 @@\n-  set_resource_area(new (flags) ResourceArea(flags));\n+  set_resource_area(new (type) ResourceArea(type));\n@@ -83,1 +83,1 @@\n-  set_handle_area(new (flags) HandleArea(flags, nullptr));\n+  set_handle_area(new (type) HandleArea(type, nullptr));\n","filename":"src\/hotspot\/share\/runtime\/thread.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -280,1 +280,1 @@\n-  Thread(MEMFLAGS flag = mtThread);\n+  Thread(MemType type = mtThread);\n","filename":"src\/hotspot\/share\/runtime\/thread.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -35,1 +35,1 @@\n-#include \"nmt\/memflags.hpp\"\n+#include \"nmt\/memType.hpp\"\n","filename":"src\/hotspot\/share\/services\/threadService.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -176,2 +176,2 @@\n-CHeapBitMap::CHeapBitMap(idx_t size_in_bits, MEMFLAGS flags, bool clear)\n-  : GrowableBitMap<CHeapBitMap>(), _flags(flags) {\n+CHeapBitMap::CHeapBitMap(idx_t size_in_bits, MemType type, bool clear)\n+  : GrowableBitMap<CHeapBitMap>(), _flags(type) {\n","filename":"src\/hotspot\/share\/utilities\/bitMap.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n-#include \"nmt\/memflags.hpp\"\n+#include \"nmt\/memType.hpp\"\n@@ -645,1 +645,1 @@\n-  const MEMFLAGS _flags;\n+  const MemType _flags;\n@@ -652,2 +652,2 @@\n-  explicit CHeapBitMap(MEMFLAGS flags) : GrowableBitMap(), _flags(flags) {}\n-  CHeapBitMap(idx_t size_in_bits, MEMFLAGS flags, bool clear = true);\n+  explicit CHeapBitMap(MemType type) : GrowableBitMap(), _flags(type) {}\n+  CHeapBitMap(idx_t size_in_bits, MemType type, bool clear = true);\n","filename":"src\/hotspot\/share\/utilities\/bitMap.hpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,1 +31,1 @@\n-template <class T, MEMFLAGS F> class ChunkedList : public CHeapObj<F> {\n+template <class T, MemType F> class ChunkedList : public CHeapObj<F> {\n","filename":"src\/hotspot\/share\/utilities\/chunkedList.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -43,1 +43,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -64,1 +64,1 @@\n-  \/\/ Only constructed with placement new from memory allocated with MEMFLAGS of\n+  \/\/ Only constructed with placement new from memory allocated with MemType of\n@@ -103,1 +103,1 @@\n-  \/\/ Only constructed with placement new from an array allocated with MEMFLAGS\n+  \/\/ Only constructed with placement new from an array allocated with MemType\n","filename":"src\/hotspot\/share\/utilities\/concurrentHashTable.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -61,1 +61,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -70,1 +70,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -78,1 +78,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -90,1 +90,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -99,1 +99,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -106,1 +106,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -113,1 +113,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -131,1 +131,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -144,1 +144,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -159,1 +159,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -174,1 +174,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -184,1 +184,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -193,1 +193,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -209,1 +209,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -217,1 +217,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -230,1 +230,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -237,1 +237,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -246,1 +246,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -274,1 +274,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -290,1 +290,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -307,1 +307,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -326,1 +326,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -351,1 +351,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -361,1 +361,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -377,1 +377,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -385,1 +385,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -393,1 +393,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -409,1 +409,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -449,1 +449,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -481,1 +481,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -536,1 +536,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -571,1 +571,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -585,1 +585,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -616,1 +616,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -641,1 +641,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -699,1 +699,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -716,1 +716,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -735,1 +735,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -772,1 +772,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -787,1 +787,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -801,1 +801,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -827,1 +827,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -845,1 +845,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -861,1 +861,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -882,1 +882,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -949,1 +949,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -965,1 +965,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -982,1 +982,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -1013,1 +1013,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -1032,1 +1032,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -1042,1 +1042,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -1050,1 +1050,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -1058,1 +1058,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -1067,1 +1067,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -1076,1 +1076,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -1084,1 +1084,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -1092,1 +1092,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -1107,1 +1107,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -1127,1 +1127,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -1140,1 +1140,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -1154,1 +1154,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -1178,1 +1178,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -1203,1 +1203,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -1217,1 +1217,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -1229,1 +1229,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -1267,1 +1267,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -1282,1 +1282,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -1299,1 +1299,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n","filename":"src\/hotspot\/share\/utilities\/concurrentHashTable.inline.hpp","additions":68,"deletions":68,"binary":false,"changes":136,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -38,1 +38,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -149,1 +149,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -193,1 +193,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n@@ -232,1 +232,1 @@\n-template <typename CONFIG, MEMFLAGS F>\n+template <typename CONFIG, MemType F>\n","filename":"src\/hotspot\/share\/utilities\/concurrentHashTableTasks.inline.hpp","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -45,1 +45,1 @@\n-void* GrowableArrayCHeapAllocator::allocate(int max, int element_size, MEMFLAGS memflags) {\n+void* GrowableArrayCHeapAllocator::allocate(int max, int element_size, MemType memflags) {\n","filename":"src\/hotspot\/share\/utilities\/growableArray.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -598,1 +598,1 @@\n-  static void* allocate(int max, int element_size, MEMFLAGS memflags);\n+  static void* allocate(int max, int element_size, MemType memflags);\n@@ -631,2 +631,2 @@\n-  static uintptr_t bits(MEMFLAGS memflags) {\n-    assert(memflags != mtNone, \"Must provide a proper MEMFLAGS\");\n+  static uintptr_t bits(MemType memflags) {\n+    assert(memflags != mtNone, \"Must provide a proper MemType\");\n@@ -656,1 +656,1 @@\n-  GrowableArrayMetadata(MEMFLAGS memflags) :\n+  GrowableArrayMetadata(MemType memflags) :\n@@ -686,1 +686,1 @@\n-  MEMFLAGS memflags() const { return MEMFLAGS(_bits >> 1); }\n+  MemType memflags() const { return MemType(_bits >> 1); }\n@@ -715,1 +715,1 @@\n-  static E* allocate(int max, MEMFLAGS memflags) {\n+  static E* allocate(int max, MemType memflags) {\n@@ -763,1 +763,1 @@\n-  GrowableArray(int initial_capacity, MEMFLAGS memflags) :\n+  GrowableArray(int initial_capacity, MemType memflags) :\n@@ -779,1 +779,1 @@\n-  GrowableArray(int initial_capacity, int initial_len, const E& filler, MEMFLAGS memflags) :\n+  GrowableArray(int initial_capacity, int initial_len, const E& filler, MemType memflags) :\n@@ -802,2 +802,2 @@\n-\/\/ Leaner GrowableArray for CHeap backed data arrays, with compile-time decided MEMFLAGS.\n-template <typename E, MEMFLAGS F>\n+\/\/ Leaner GrowableArray for CHeap backed data arrays, with compile-time decided MemType.\n+template <typename E, MemType F>\n@@ -809,1 +809,1 @@\n-  static E* allocate(int max, MEMFLAGS flags) {\n+  static E* allocate(int max, MemType type) {\n@@ -814,1 +814,1 @@\n-    return (E*)GrowableArrayCHeapAllocator::allocate(max, sizeof(E), flags);\n+    return (E*)GrowableArrayCHeapAllocator::allocate(max, sizeof(E), type);\n","filename":"src\/hotspot\/share\/utilities\/growableArray.hpp","additions":12,"deletions":12,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -141,1 +141,1 @@\n-  MEMFLAGS F = mtNMT, AllocFailType alloc_failmode = AllocFailStrategy::RETURN_NULL>\n+  MemType F = mtNMT, AllocFailType alloc_failmode = AllocFailStrategy::RETURN_NULL>\n@@ -368,1 +368,1 @@\n-  MEMFLAGS F = mtNMT, AllocFailType alloc_failmode = AllocFailStrategy::RETURN_NULL>\n+  MemType F = mtNMT, AllocFailType alloc_failmode = AllocFailStrategy::RETURN_NULL>\n","filename":"src\/hotspot\/share\/utilities\/linkedlist.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -42,1 +42,1 @@\n-template<MEMFLAGS F>\n+template<MemType F>\n@@ -84,1 +84,1 @@\n-template<MEMFLAGS F>\n+template<MemType F>\n","filename":"src\/hotspot\/share\/utilities\/objectBitSet.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,1 +33,1 @@\n-template<MEMFLAGS F>\n+template<MemType F>\n@@ -39,1 +39,1 @@\n-template<MEMFLAGS F>\n+template<MemType F>\n@@ -47,1 +47,1 @@\n-template<MEMFLAGS F>\n+template<MemType F>\n@@ -59,1 +59,1 @@\n-template<MEMFLAGS F>\n+template<MemType F>\n@@ -64,1 +64,1 @@\n-template<MEMFLAGS F>\n+template<MemType F>\n@@ -89,1 +89,1 @@\n-template<MEMFLAGS F>\n+template<MemType F>\n@@ -96,1 +96,1 @@\n-template<MEMFLAGS F>\n+template<MemType F>\n","filename":"src\/hotspot\/share\/utilities\/objectBitSet.inline.hpp","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2021, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2021, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,1 +33,1 @@\n-    MEMFLAGS MEM_TYPE>\n+    MemType MEM_TYPE>\n@@ -75,1 +75,1 @@\n-    MEMFLAGS MEM_TYPE = mtInternal,\n+    MemType MEM_TYPE = mtInternal,\n","filename":"src\/hotspot\/share\/utilities\/resizeableResourceHash.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2012, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2012, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -57,1 +57,1 @@\n-    MEMFLAGS MEM_TYPE,\n+    MemType MEM_TYPE,\n@@ -367,1 +367,1 @@\n-    MEMFLAGS MEM_TYPE = mtInternal,\n+    MemType MEM_TYPE = mtInternal,\n","filename":"src\/hotspot\/share\/utilities\/resourceHash.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2009, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2009, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -54,1 +54,1 @@\n-template <class E, MEMFLAGS F> class StackIterator;\n+template <class E, MemType F> class StackIterator;\n@@ -58,1 +58,1 @@\n-template <MEMFLAGS F> class StackBase\n+template <MemType F> class StackBase\n@@ -88,1 +88,1 @@\n-template <class E, MEMFLAGS F>\n+template <class E, MemType F>\n@@ -163,1 +163,1 @@\n-template <class E, MEMFLAGS F>\n+template <class E, MemType F>\n","filename":"src\/hotspot\/share\/utilities\/stack.hpp","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2009, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2009, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,1 +34,1 @@\n-template <MEMFLAGS F> StackBase<F>::StackBase(size_t segment_size, size_t max_cache_size,\n+template <MemType F> StackBase<F>::StackBase(size_t segment_size, size_t max_cache_size,\n@@ -43,1 +43,1 @@\n-template <MEMFLAGS F> size_t StackBase<F>::adjust_max_size(size_t max_size, size_t seg_size)\n+template <MemType F> size_t StackBase<F>::adjust_max_size(size_t max_size, size_t seg_size)\n@@ -54,1 +54,1 @@\n-template <class E, MEMFLAGS F>\n+template <class E, MemType F>\n@@ -61,1 +61,1 @@\n-template <class E, MEMFLAGS F>\n+template <class E, MemType F>\n@@ -74,1 +74,1 @@\n-template <class E, MEMFLAGS F>\n+template <class E, MemType F>\n@@ -88,1 +88,1 @@\n-template <class E, MEMFLAGS F>\n+template <class E, MemType F>\n@@ -96,1 +96,1 @@\n-template <class E, MEMFLAGS F>\n+template <class E, MemType F>\n@@ -108,1 +108,1 @@\n-template <class E, MEMFLAGS F>\n+template <class E, MemType F>\n@@ -114,1 +114,1 @@\n-template <class E, MEMFLAGS F>\n+template <class E, MemType F>\n@@ -120,1 +120,1 @@\n-template <class E, MEMFLAGS F>\n+template <class E, MemType F>\n@@ -126,1 +126,1 @@\n-template <class E, MEMFLAGS F>\n+template <class E, MemType F>\n@@ -132,1 +132,1 @@\n-template <class E, MEMFLAGS F>\n+template <class E, MemType F>\n@@ -139,1 +139,1 @@\n-template <class E, MEMFLAGS F>\n+template <class E, MemType F>\n@@ -145,1 +145,1 @@\n-template <class E, MEMFLAGS F>\n+template <class E, MemType F>\n@@ -155,1 +155,1 @@\n-template <class E, MEMFLAGS F>\n+template <class E, MemType F>\n@@ -176,1 +176,1 @@\n-template <class E, MEMFLAGS F>\n+template <class E, MemType F>\n@@ -197,1 +197,1 @@\n-template <class E, MEMFLAGS F>\n+template <class E, MemType F>\n@@ -208,1 +208,1 @@\n-template <class E, MEMFLAGS F>\n+template <class E, MemType F>\n@@ -221,1 +221,1 @@\n-template <class E, MEMFLAGS F>\n+template <class E, MemType F>\n@@ -237,1 +237,1 @@\n-template <class E, MEMFLAGS F>\n+template <class E, MemType F>\n@@ -246,1 +246,1 @@\n-template <class E, MEMFLAGS F>\n+template <class E, MemType F>\n@@ -254,1 +254,1 @@\n-template <class E, MEMFLAGS F>\n+template <class E, MemType F>\n","filename":"src\/hotspot\/share\/utilities\/stack.inline.hpp","additions":23,"deletions":23,"binary":false,"changes":46,"status":"modified"},{"patch":"@@ -77,1 +77,1 @@\n-template<typename E, template<typename, MEMFLAGS> class Allocator>\n+template<typename E, template<typename, MemType> class Allocator>\n","filename":"test\/hotspot\/gtest\/nmt\/test_arrayWithFreeList.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -3,1 +3,1 @@\n- * Copyright (c) 2022, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -36,1 +36,1 @@\n-static void check_expected_malloc_header(const void* payload, MEMFLAGS type, size_t size) {\n+static void check_expected_malloc_header(const void* payload, MemType type, size_t size) {\n@@ -39,1 +39,1 @@\n-  EXPECT_EQ(hdr->flags(), type);\n+  EXPECT_EQ(hdr->type(), type);\n","filename":"test\/hotspot\/gtest\/nmt\/test_nmt_cornercases.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -100,4 +100,4 @@\n-    MEMFLAGS f = NMTUtil::index_to_flag(i);\n-    if (f != MEMFLAGS::mtNone) {\n-      expected.set_category_limit(f, (i + 1) * M, MallocLimitMode::trigger_fatal);\n-      option.print(\"%s%s:%dM\", (i > 0 ? \",\" : \"\"), NMTUtil::flag_to_enum_name(f), i + 1);\n+    MemType type = NMTUtil::index_to_flag(i);\n+    if (type != MemType::mtNone) {\n+      expected.set_category_limit(type, (i + 1) * M, MallocLimitMode::trigger_fatal);\n+      option.print(\"%s%s:%dM\", (i > 0 ? \",\" : \"\"), NMTUtil::flag_to_enum_name(type), i + 1);\n@@ -113,4 +113,4 @@\n-    MEMFLAGS f = NMTUtil::index_to_flag(i);\n-    if (f != MEMFLAGS::mtNone) {\n-      expected.set_category_limit(f, (i + 1) * M, MallocLimitMode::trigger_fatal);\n-      option.print(\"%s%s:%dM\", (i > 0 ? \",\" : \"\"), NMTUtil::flag_to_name(f), i + 1);\n+    MemType type = NMTUtil::index_to_flag(i);\n+    if (type != MemType::mtNone) {\n+      expected.set_category_limit(type, (i + 1) * M, MallocLimitMode::trigger_fatal);\n+      option.print(\"%s%s:%dM\", (i > 0 ? \",\" : \"\"), NMTUtil::flag_to_name(type), i + 1);\n","filename":"test\/hotspot\/gtest\/nmt\/test_nmt_malloclimit.cpp","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -3,1 +3,1 @@\n- * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2023, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -36,1 +36,1 @@\n-  VirtualMemorySummary::record_reserved_memory(os::vm_page_size(), region1.flag());\n+  VirtualMemorySummary::record_reserved_memory(os::vm_page_size(), region1.type());\n@@ -41,1 +41,1 @@\n-  VirtualMemorySummary::record_reserved_memory(os::vm_page_size(), region2.flag());\n+  VirtualMemorySummary::record_reserved_memory(os::vm_page_size(), region2.type());\n@@ -49,1 +49,1 @@\n-  ASSERT_EQ(region2.flag(), mtThreadStack); \/\/ Should be correct flag\n+  ASSERT_EQ(region2.type(), mtThreadStack); \/\/ Should be correct flag\n","filename":"test\/hotspot\/gtest\/nmt\/test_nmt_reserved_region.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -3,1 +3,1 @@\n- * Copyright (c) 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -93,1 +93,1 @@\n-    p[i] = NEW_C_HEAP_ARRAY(char, ALLOC_SIZE, (MEMFLAGS)category);\n+    p[i] = NEW_C_HEAP_ARRAY(char, ALLOC_SIZE, (MemType)category);\n","filename":"test\/hotspot\/gtest\/nmt\/test_nmt_totals.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-#include \"nmt\/memflags.hpp\"\n+#include \"nmt\/memType.hpp\"\n@@ -71,1 +71,1 @@\n-    return x->val().in.type();\n+    return x->val().in.state();\n@@ -75,1 +75,1 @@\n-    return x->val().out.type();\n+    return x->val().out.state();\n@@ -217,1 +217,1 @@\n-        EXPECT_EQ(x->val().out.regiondata().flag, mtTest);\n+        EXPECT_EQ(x->val().out.regiondata().type, mtTest);\n@@ -252,1 +252,1 @@\n-        EXPECT_EQ(mtTest, x->val().out.regiondata().flag);\n+        EXPECT_EQ(mtTest, x->val().out.regiondata().type);\n@@ -255,1 +255,1 @@\n-        EXPECT_EQ(mtTest, x->val().in.regiondata().flag);\n+        EXPECT_EQ(mtTest, x->val().in.regiondata().type);\n@@ -277,1 +277,1 @@\n-    VMATree::SingleDiff diff = all_diff.flag[NMTUtil::flag_to_index(mtTest)];\n+    VMATree::SingleDiff diff = all_diff.type[NMTUtil::flag_to_index(mtTest)];\n@@ -280,2 +280,2 @@\n-    diff = all_diff.flag[NMTUtil::flag_to_index(mtTest)];\n-    VMATree::SingleDiff diff2 = all_diff.flag[NMTUtil::flag_to_index(mtNMT)];\n+    diff = all_diff.type[NMTUtil::flag_to_index(mtTest)];\n+    VMATree::SingleDiff diff2 = all_diff.type[NMTUtil::flag_to_index(mtNMT)];\n@@ -289,1 +289,1 @@\n-    VMATree::SingleDiff diff = all_diff.flag[NMTUtil::flag_to_index(mtTest)];\n+    VMATree::SingleDiff diff = all_diff.type[NMTUtil::flag_to_index(mtTest)];\n@@ -292,1 +292,1 @@\n-    diff = all_diff.flag[NMTUtil::flag_to_index(mtTest)];\n+    diff = all_diff.type[NMTUtil::flag_to_index(mtTest)];\n@@ -299,1 +299,1 @@\n-    VMATree::SingleDiff diff = all_diff.flag[NMTUtil::flag_to_index(mtTest)];\n+    VMATree::SingleDiff diff = all_diff.type[NMTUtil::flag_to_index(mtTest)];\n@@ -302,1 +302,1 @@\n-    diff = all_diff.flag[NMTUtil::flag_to_index(mtTest)];\n+    diff = all_diff.type[NMTUtil::flag_to_index(mtTest)];\n@@ -306,1 +306,1 @@\n-  { \/\/ Adjacent reserved mappings with same flag\n+  { \/\/ Adjacent reserved mappings with same type\n@@ -310,1 +310,1 @@\n-    VMATree::SingleDiff diff = all_diff.flag[NMTUtil::flag_to_index(mtTest)];\n+    VMATree::SingleDiff diff = all_diff.type[NMTUtil::flag_to_index(mtTest)];\n@@ -313,1 +313,1 @@\n-    diff = all_diff.flag[NMTUtil::flag_to_index(mtTest)];\n+    diff = all_diff.type[NMTUtil::flag_to_index(mtTest)];\n@@ -321,1 +321,1 @@\n-    VMATree::SingleDiff diff = all_diff.flag[NMTUtil::flag_to_index(mtTest)];\n+    VMATree::SingleDiff diff = all_diff.type[NMTUtil::flag_to_index(mtTest)];\n@@ -324,1 +324,1 @@\n-    diff = all_diff.flag[NMTUtil::flag_to_index(mtTest)];\n+    diff = all_diff.type[NMTUtil::flag_to_index(mtTest)];\n@@ -326,1 +326,1 @@\n-    diff = all_diff.flag[NMTUtil::flag_to_index(mtNMT)];\n+    diff = all_diff.type[NMTUtil::flag_to_index(mtNMT)];\n@@ -337,2 +337,2 @@\n-    EXPECT_EQ(768, diff.flag[NMTUtil::flag_to_index(mtTest)].commit);\n-    EXPECT_EQ(768, diff.flag[NMTUtil::flag_to_index(mtTest)].reserve);\n+    EXPECT_EQ(768, diff.type[NMTUtil::flag_to_index(mtTest)].commit);\n+    EXPECT_EQ(768, diff.type[NMTUtil::flag_to_index(mtTest)].reserve);\n@@ -346,1 +346,1 @@\n-  enum Type { Reserved, Committed, Free };\n+  enum Kind { Reserved, Committed, Free };\n@@ -348,2 +348,2 @@\n-    Type type;\n-    MEMFLAGS flag;\n+    Kind kind;\n+    MemType type;\n@@ -351,1 +351,1 @@\n-    Info() : type(Free), flag(mtNone), stack() {}\n+    Info() : kind(Free), type(mtNone), stack() {}\n@@ -353,2 +353,2 @@\n-    Info(Type type, NativeCallStack stack, MEMFLAGS flag)\n-    : type(type), flag(flag), stack(stack) {}\n+    Info(Kind kind, NativeCallStack stack, MemType type)\n+    : kind(kind), type(type), stack(stack) {}\n@@ -357,1 +357,1 @@\n-      return flag == other.flag && stack.equals(other.stack);\n+      return kind == other.kind && stack.equals(other.stack);\n@@ -371,1 +371,1 @@\n-  VMATree::SummaryDiff do_it(Type type, size_t start, size_t size, NativeCallStack stack, MEMFLAGS flag) {\n+  VMATree::SummaryDiff do_it(Kind kind, size_t start, size_t size, NativeCallStack stack, MemType type) {\n@@ -380,1 +380,1 @@\n-    Info new_info(type, stack, flag);\n+    Info new_info(kind, stack, type);\n@@ -385,5 +385,5 @@\n-      if (old_info.type == Reserved) {\n-        diff.flag[(int)old_info.flag].reserve -= page_size;\n-      } else if (old_info.type == Committed) {\n-        diff.flag[(int)old_info.flag].reserve -= page_size;\n-        diff.flag[(int)old_info.flag].commit -= page_size;\n+      if (old_info.kind == Reserved) {\n+        diff.type[(int)old_info.type].reserve -= page_size;\n+      } else if (old_info.kind == Committed) {\n+        diff.type[(int)old_info.type].reserve -= page_size;\n+        diff.type[(int)old_info.type].commit -= page_size;\n@@ -392,5 +392,5 @@\n-      if (type == Reserved) {\n-        diff.flag[(int)new_info.flag].reserve += page_size;\n-      } else if(type == Committed) {\n-        diff.flag[(int)new_info.flag].reserve += page_size;\n-        diff.flag[(int)new_info.flag].commit += page_size;\n+      if (kind == Reserved) {\n+        diff.type[(int)new_info.type].reserve += page_size;\n+      } else if (kind == Committed) {\n+        diff.type[(int)new_info.type].reserve += page_size;\n+        diff.type[(int)new_info.type].commit += page_size;\n@@ -404,2 +404,2 @@\n-  VMATree::SummaryDiff reserve(size_t start, size_t size, NativeCallStack stack, MEMFLAGS flag) {\n-    return do_it(Reserved, start, size, stack, flag);\n+  VMATree::SummaryDiff reserve(size_t start, size_t size, NativeCallStack stack, MemType type) {\n+    return do_it(Reserved, start, size, stack, type);\n@@ -408,2 +408,2 @@\n-  VMATree::SummaryDiff commit(size_t start, size_t size, NativeCallStack stack, MEMFLAGS flag) {\n-    return do_it(Committed, start, size, stack, flag);\n+  VMATree::SummaryDiff commit(size_t start, size_t size, NativeCallStack stack, MemType type) {\n+    return do_it(Committed, start, size, stack, type);\n@@ -434,1 +434,1 @@\n-  const MEMFLAGS candidate_flags[candidates_len_flags] = {\n+  const MemType candidate_flags[candidates_len_flags] = {\n@@ -458,1 +458,1 @@\n-    const MEMFLAGS flag = candidate_flags[os::random() % candidates_len_flags];\n+    const MemType type = candidate_flags[os::random() % candidates_len_flags];\n@@ -462,1 +462,1 @@\n-    VMATree::RegionData data(si, flag);\n+    VMATree::RegionData data(si, type);\n@@ -464,1 +464,1 @@\n-    const SimpleVMATracker::Type type = (SimpleVMATracker::Type)(os::random() % 3);\n+    const SimpleVMATracker::Kind kind = (SimpleVMATracker::Kind)(os::random() % 3);\n@@ -468,2 +468,2 @@\n-    if (type == SimpleVMATracker::Reserved) {\n-      simple_diff = tr->reserve(start, size, stack, flag);\n+    if (kind == SimpleVMATracker::Reserved) {\n+      simple_diff = tr->reserve(start, size, stack, type);\n@@ -471,2 +471,2 @@\n-    } else if (type == SimpleVMATracker::Committed) {\n-      simple_diff = tr->commit(start, size, stack, flag);\n+    } else if (kind == SimpleVMATracker::Committed) {\n+      simple_diff = tr->commit(start, size, stack, type);\n@@ -480,2 +480,2 @@\n-      VMATree::SingleDiff td = tree_diff.flag[j];\n-      VMATree::SingleDiff sd = simple_diff.flag[j];\n+      VMATree::SingleDiff td = tree_diff.type[j];\n+      VMATree::SingleDiff sd = simple_diff.type[j];\n@@ -492,1 +492,1 @@\n-               tr->pages[j].type == SimpleVMATracker::Free) {\n+               tr->pages[j].kind == SimpleVMATracker::Free) {\n@@ -523,2 +523,2 @@\n-        ASSERT_EQ(starti.flag, startn->val().out.flag());\n-        ASSERT_EQ(endi.flag, endn->val().in.flag());\n+        ASSERT_EQ(starti.type, startn->val().out.type());\n+        ASSERT_EQ(endi.type, endn->val().in.type());\n","filename":"test\/hotspot\/gtest\/nmt\/test_vmatree.cpp","additions":57,"deletions":57,"binary":false,"changes":114,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2020, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2020, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -38,1 +38,1 @@\n-  WithEmbeddedArray(int initial_max, MEMFLAGS memflags) : _a(initial_max, memflags) {\n+  WithEmbeddedArray(int initial_max, MemType memflags) : _a(initial_max, memflags) {\n","filename":"test\/hotspot\/gtest\/utilities\/test_growableArray.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -38,1 +38,1 @@\n-  const static MEMFLAGS MEM_TYPE = mtInternal;\n+  const static MemType MEM_TYPE = mtInternal;\n","filename":"test\/hotspot\/gtest\/utilities\/test_resourceHash.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -25,1 +25,1 @@\n-#include \"nmt\/memflags.hpp\"\n+#include \"nmt\/memType.hpp\"\n","filename":"test\/hotspot\/gtest\/utilities\/test_utf8.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}