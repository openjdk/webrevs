{"files":[{"patch":"@@ -39,0 +39,3 @@\n+ * @requires (vm.cpu.features ~= \".*avx512.*\" | vm.cpu.features ~= \".*avx2.*\" | vm.cpu.features ~= \".*avx.*\") |\n+ *           (os.arch==\"aarch64\" & vm.cpu.features ~= \".*simd.*\") |\n+ *           (os.arch == \"riscv64\" & vm.cpu.features ~= \".*v,.*\")\n@@ -60,1 +63,1 @@\n-    private static boolean containsFuzzy(List<String> list, String sub) {\n+    private static boolean containsFuzzy(List<String> list, String sub, Boolean matchExactly) {\n@@ -62,1 +65,5 @@\n-            if (s.contains(sub)) return true;\n+            if (matchExactly) {\n+                if (s.equals(sub)) return true;\n+            } else {\n+                if (s.contains(sub)) return true;\n+            }\n@@ -82,1 +89,1 @@\n-            if (containsFuzzy(cpuFeatures, \"avx512\")) {\n+            if (containsFuzzy(cpuFeatures, \"avx512\", false)) {\n@@ -86,1 +93,1 @@\n-            if (containsFuzzy(cpuFeatures, \"avx2\")) {\n+            if (containsFuzzy(cpuFeatures, \"avx2\", false)) {\n@@ -90,1 +97,1 @@\n-            if (containsFuzzy(cpuFeatures, \"avx\")) {\n+            if (containsFuzzy(cpuFeatures, \"avx\", false)) {\n@@ -96,1 +103,1 @@\n-            if (containsFuzzy(cpuFeatures, \"simd\")) {\n+            if (containsFuzzy(cpuFeatures, \"simd\", false)) {\n@@ -100,0 +107,6 @@\n+        } else if (Platform.isRISCV64()) {\n+            \/\/ Riscv64 intrinsics require the vector instructions\n+            if (containsFuzzy(cpuFeatures, \"v\", true)) {\n+                System.out.println(\"Setting up vector worker\");\n+                configs.add(List.of(\"-XX:+UseRVV\"));\n+            }\n@@ -101,1 +114,1 @@\n-            \/\/ We only have ChaCha20 intrinsics on x64 and aarch64\n+            \/\/ We only have ChaCha20 intrinsics on x64, aarch64 and riscv64\n","filename":"test\/hotspot\/jtreg\/compiler\/intrinsics\/chacha\/TestChaCha20.java","additions":20,"deletions":7,"binary":false,"changes":27,"status":"modified"}]}