{"files":[{"patch":"@@ -226,6 +226,3 @@\n-        while (len > 0) {\n-            int byte1 = buf[off];\n-            int nbytes = byte1 >= 0 ? 1 : (byte1 & 0xe0) == 0xc0 ? 2 : 3;\n-            off += nbytes;\n-            len -= nbytes;\n-            numChars++;\n+        while (len-- > 0) {\n+            if ((buf[off++] & 0xc0) != 0x80)\n+                numChars++;\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/util\/Convert.java","additions":3,"deletions":6,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -66,1 +66,1 @@\n-                    throw new AssertionError(String.format(\"nchars %d != %d for [%d, %d)\", nchars, j - i, i, j));\n+                    throw new AssertionError(String.format(\"nchars %d != %d for [%d, %d)\", nchars, j - i, i_off, j_off));\n","filename":"test\/langtools\/tools\/javac\/nametable\/TestUtfNumChars.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}