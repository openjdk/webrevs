{"files":[{"patch":"@@ -408,1 +408,0 @@\n-        _finished_workers(0),\n@@ -470,1 +469,0 @@\n-  Atomic::store(&_finished_workers, 0);\n@@ -489,1 +487,1 @@\n-  while (Atomic::load(&_finished_workers) != _num_workers) {\n+  while (Atomic::load(&_running_workers) != 0) {\n@@ -496,1 +494,0 @@\n-  assert(Atomic::load(&_finished_workers) == _num_workers, \"All workers have finished\");\n@@ -510,1 +507,2 @@\n-  if (Atomic::sub(&_running_workers, 1, memory_order_relaxed) == 0) {\n+  if (Atomic::load(&_running_workers) == 1) {\n+    \/\/ Last worker leaving. Notify the pool it can unblock to spin-wait.\n@@ -513,1 +511,1 @@\n-  Atomic::add(&_finished_workers, 1, memory_order_relaxed);\n+  Atomic::sub(&_running_workers, 1, memory_order_relaxed);\n","filename":"src\/hotspot\/share\/cds\/archiveUtils.cpp","additions":4,"deletions":6,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -372,1 +372,0 @@\n-  int _finished_workers;\n","filename":"src\/hotspot\/share\/cds\/archiveUtils.hpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"}]}