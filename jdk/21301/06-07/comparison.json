{"files":[{"patch":"@@ -2173,3 +2173,7 @@\n-                    \/\/ Adjust to preferred scale as appropriate.\n-                    if (result.scale < preferredScale)\n-                        result = result.setScale(preferredScale);\n+                    if (result.scale < preferredScale) {\n+                        \/\/ Adjust to requested precision and preferred\n+                        \/\/ scale as appropriate.\n+                        int maxSCale = mc.precision == 0 ?\n+                            preferredScale : (int) Math.min(preferredScale, result.scale + (mc.precision - 1L));\n+                        result = result.setScale(maxScale);\n+                    }\n@@ -2264,2 +2268,3 @@\n-            \/\/ Adjust to preferred scale as appropriate.\n-            if (result.scale > preferredScale) {\n+            \/\/ Adjust to requested precision and preferred\n+            \/\/ scale as appropriate.\n+            if (result.scale > preferredScale) \/\/ else can't increase the result's precision to fit the preferred scale\n@@ -2267,3 +2272,1 @@\n-            } else if (result.scale < preferredScale) {\n-                result = result.setScale(preferredScale);\n-            }\n+\n","filename":"src\/java.base\/share\/classes\/java\/math\/BigDecimal.java","additions":11,"deletions":8,"binary":false,"changes":19,"status":"modified"}]}