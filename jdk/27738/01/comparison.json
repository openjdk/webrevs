{"files":[{"patch":"@@ -220,0 +220,8 @@\n+  <Event name=\"ClassFileDefine\" category=\"Java Virtual Machine, Class Loading\" label=\"ClassFile Definition\" thread=\"true\" stackTrace=\"true\" startTime=\"false\">\n+    <Field type=\"Class\" name=\"definedClass\" label=\"Defined Class\" \/>\n+    <Field type=\"string\" name=\"source\" label=\"ClassFile Location\" \/>\n+    <Field type=\"string\" name=\"package\" label=\"Package Name\" \/>\n+    <Field type=\"string\" name=\"module\" label=\"Module Name\" \/>\n+    <Field type=\"ClassLoader\" name=\"definingClassLoader\" label=\"Defining Class Loader\" \/>\n+  <\/Event>\n+\n","filename":"src\/hotspot\/share\/jfr\/metadata\/metadata.xml","additions":8,"deletions":0,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -863,2 +863,0 @@\n-  if (source == nullptr)  source = \"__JVM_DefineClass__\";\n-\n@@ -884,1 +882,1 @@\n-  ClassFileStream st((u1*)buf, len, source);\n+  ClassFileStream st((u1*)buf, len, source != nullptr ? source : \"__JVM_DefineClass__\");\n@@ -888,0 +886,3 @@\n+\n+  EventClassFileDefine cfd_evt;\n+\n@@ -897,0 +898,15 @@\n+  if (cfd_evt.should_commit()) {\n+    cfd_evt.set_definedClass(k);\n+    cfd_evt.set_source(source != nullptr ? source : \"jrt:\/\/\");\n+    cfd_evt.set_definingClassLoader(k->class_loader_data());\n+\n+    const PackageEntry *const package = k->package();\n+\n+    cfd_evt.set_package(package->name()->as_C_string());\n+    const ModuleEntry  *const module  = k->module();\n+\n+    cfd_evt.set_module(module->is_named() ? module->name()->as_C_string() : UNNAMED_MODULE);\n+\n+    cfd_evt.commit();\n+  }\n+\n","filename":"src\/hotspot\/share\/prims\/jvm.cpp","additions":19,"deletions":3,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -169,0 +169,5 @@\n+    <event name=\"jdk.ClassFileDefine\">\n+      <setting name=\"enabled\" control=\"class-loading\">false<\/setting>\n+      <setting name=\"stackTrace\">true<\/setting>\n+    <\/event>\n+\n","filename":"src\/jdk.jfr\/share\/conf\/jfr\/default.jfc","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -169,0 +169,5 @@\n+    <event name=\"jdk.ClassFileDefine\">\n+      <setting name=\"enabled\" control=\"class-loading\">false<\/setting>\n+      <setting name=\"stackTrace\">true<\/setting>\n+    <\/event>\n+\n","filename":"src\/jdk.jfr\/share\/conf\/jfr\/profile.jfc","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"}]}