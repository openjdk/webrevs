{"files":[{"patch":"@@ -49,0 +49,2 @@\n+intptr_t handshakeTimedOutThread = p2i(nullptr);\n+\n@@ -204,0 +206,1 @@\n+    handshakeTimedOutThread = p2i(target);\n","filename":"src\/hotspot\/share\/runtime\/handshake.cpp","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -35,0 +35,3 @@\n+\/\/ Indicate VMError::report() that SIGILL came from handshake timeout handler, report which thread timed out\n+extern intptr_t handshakeTimedOutThread;\n+\n","filename":"src\/hotspot\/share\/runtime\/handshake.hpp","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -70,0 +70,2 @@\n+intptr_t safepointTimedOutThread = p2i(nullptr);\n+\n@@ -653,0 +655,1 @@\n+        safepointTimedOutThread = p2i(cur_thread);\n","filename":"src\/hotspot\/share\/runtime\/safepoint.cpp","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -49,0 +49,3 @@\n+\/\/ Indicate VMError::report() that SIGILL came from safepoint timeout handler, report which thread timed out\n+extern intptr_t safepointTimedOutThread;\n+\n","filename":"src\/hotspot\/share\/runtime\/safepoint.hpp","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -821,1 +821,7 @@\n-        st->print(\" (sent by kill)\");\n+        if (handshakeTimedOutThread == p2i(_thread)) {\n+          st->print(\" (sent by handshake timeout handler, timed out thread \" PTR_FORMAT \")\", handshakeTimedOutThread);\n+        } else if (safepointTimedOutThread == p2i(_thread)) {\n+          st->print(\" (sent by safepoint timeout handler, timed out thread \" PTR_FORMAT \")\", safepointTimedOutThread);\n+        } else {\n+          st->print(\" (sent by kill)\");\n+        }\n","filename":"src\/hotspot\/share\/utilities\/vmError.cpp","additions":7,"deletions":1,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -91,1 +91,1 @@\n-                output.shouldContain(\"(sent by kill)\");\n+                output.shouldContain(\"(sent by safepoint timeout handler, timed out thread \");\n","filename":"test\/hotspot\/jtreg\/runtime\/Safepoint\/TestAbortVMOnSafepointTimeout.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}