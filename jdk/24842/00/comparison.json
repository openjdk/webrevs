{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2017, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,0 +28,2 @@\n+ * @modules java.base\/sun.net.www.protocol.file\n+ * @library \/test\/lib\n@@ -29,1 +31,1 @@\n- * @run main UNCTest file:\/\/jdk\/LOCAL-JAVA\/jdk1.4\/win\/README.txt\n+ * @run main UNCTest\n@@ -32,0 +34,5 @@\n+import jtreg.SkippedException;\n+import sun.net.www.protocol.file.FileURLConnection;\n+\n+import java.io.File;\n+import java.net.InetAddress;\n@@ -37,1 +44,7 @@\n-        URL url = new URL( args[0] );\n+        \/\/ Get the \"computer name\" for this host\n+        String hostName = InetAddress.getLocalHost().getHostName();\n+        \/\/ Skip the test if Administrative Shares is disabled\n+        skipIfAdministrativeSharesDisabled(hostName);\n+        \/\/ Should always exist with Administrative Shares enabled\n+        URL url = new URL(\"file:\/\/\" + hostName +\"\/C$\/Windows\");\n+        \/\/ Should return an UNCFileURLConnection\n@@ -39,0 +52,5 @@\n+        \/\/ Sanity check that the UNC path resulted in a FileURLConnection\n+        if (! (conn instanceof FileURLConnection)) {\n+            throw new Exception(\"Expected FileURLConnection for UNC path, instead got \" + conn.getClass().getName());\n+        }\n+        \/\/ Verify that the connection is not already connected\n@@ -41,0 +59,12 @@\n+\n+    \/**\n+     * If the UNC path \"\\\\hostname\\C$\\Windows\" does not exists, then\n+     * 'Administrative Shares' is not enabled on this host and we skip the test\n+     * @param hostName the name of the local computer\n+     *\/\n+    private static void skipIfAdministrativeSharesDisabled(String hostName) {\n+        String uncPath = \"\\\\\\\\\" + hostName + \"\\\\C$\\\\Windows\";\n+        if (! new File(uncPath).exists()) {\n+            throw new SkippedException(\"Administrative shares not enabled\");\n+        }\n+    }\n","filename":"test\/jdk\/java\/net\/URLConnection\/UNCTest.java","additions":33,"deletions":3,"binary":false,"changes":36,"status":"modified"}]}