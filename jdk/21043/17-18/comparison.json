{"files":[{"patch":"@@ -41,0 +41,1 @@\n+import java.net.SocketException;\n@@ -46,1 +47,0 @@\n-import javax.net.ssl.SSLHandshakeException;\n@@ -60,1 +60,0 @@\n-    private volatile SocketChannel clientSocketChannel;\n@@ -88,4 +87,1 @@\n-                byte[] inbound = new byte[8192];\n-\n-                int len = is.read(inbound);\n-                log(\"Server reads \" + len + \" bytes\");\n+                byte[] inbound = new byte[512];\n@@ -93,0 +89,4 @@\n+                log(\"===Server is ready and reading===\");\n+                if (is.read(inbound) > 0) {\n+                    throw new Exception(\"Server returned data\");\n+                }\n@@ -95,1 +95,1 @@\n-                log(e.getMessage());\n+                log(e.toString());\n@@ -100,1 +100,1 @@\n-            if (serverException != null && serverException instanceof SSLHandshakeException) {\n+            if (serverException != null && !(serverException instanceof SocketException)) {\n@@ -114,1 +114,4 @@\n-                try {\n+                \/\/ Client-side plain TCP socket.\n+                try (SocketChannel clientSocketChannel = SocketChannel.open(\n+                        new InetSocketAddress(\"localhost\", port))) {\n+\n@@ -116,3 +119,0 @@\n-                    \/\/ Client-side plain TCP socket.\n-                    clientSocketChannel = SocketChannel.open(\n-                            new InetSocketAddress(\"localhost\", port));\n","filename":"test\/jdk\/javax\/net\/ssl\/TLSv13\/SSLSocketNoServerHelloClientShutdown.java","additions":12,"deletions":12,"binary":false,"changes":24,"status":"modified"}]}