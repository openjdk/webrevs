{"files":[{"patch":"@@ -1972,1 +1972,1 @@\n-  product(int, LockingMode, LM_LEGACY,                                      \\\n+  product(int, LockingMode, LM_LIGHTWEIGHT,                                 \\\n@@ -1975,2 +1975,2 @@\n-          \"1: monitors & legacy stack-locking (LM_LEGACY, default), \"       \\\n-          \"2: monitors & new lightweight locking (LM_LIGHTWEIGHT)\")         \\\n+          \"1: monitors & legacy stack-locking (LM_LEGACY), \"                \\\n+          \"2: monitors & new lightweight locking (LM_LIGHTWEIGHT, default)\") \\\n","filename":"src\/hotspot\/share\/runtime\/globals.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -422,1 +422,2 @@\n-     * @return true if compiler in use supports RTM and false otherwise.\n+     * @return \"true\" if compiler in use supports RTM and \"false\" otherwise.\n+     * Note: Lightweight locking does not support RTM (for now).\n@@ -428,1 +429,2 @@\n-            (Platform.isX86() || Platform.isX64() || Platform.isPPC())) {\n+            (Platform.isX86() || Platform.isX64() || Platform.isPPC()) &&\n+            is_LM_LIGHTWEIGHT().equals(\"false\")) {\n@@ -484,0 +486,28 @@\n+    \/**\n+     * @return LockingMode.\n+     *\/\n+    protected String vmLockingMode() {\n+        return \"\" + WB.getIntVMFlag(\"LockingMode\");\n+    }\n+\n+    \/**\n+     * @return \"true\" if LockingMode == 0 (LM_MONITOR)\n+     *\/\n+    protected String is_LM_MONITOR() {\n+        return \"\" + vmLockingMode().equals(\"0\");\n+    }\n+\n+    \/**\n+     * @return \"true\" if LockingMode == 1 (LM_LEGACY)\n+     *\/\n+    protected String is_LM_LEGACY() {\n+        return \"\" + vmLockingMode().equals(\"1\");\n+    }\n+\n+    \/**\n+     * @return \"true\" if LockingMode == 2 (LM_LIGHTWEIGHT)\n+     *\/\n+    protected String is_LM_LIGHTWEIGHT() {\n+        return \"\" + vmLockingMode().equals(\"2\");\n+    }\n+\n","filename":"test\/jtreg-ext\/requires\/VMProps.java","additions":32,"deletions":2,"binary":false,"changes":34,"status":"modified"}]}