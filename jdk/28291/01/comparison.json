{"files":[{"patch":"@@ -229,0 +229,2 @@\n+        \/\/ Similar to sun.launcher.LauncherHelper#checkAndLoadMain, including\n+        \/\/ checks performed in LauncherHelper#validateMainMethod\n@@ -241,0 +243,4 @@\n+            if (Modifier.isPrivate(constructor.getModifiers())) {\n+                throw new Fault(Errors.CantUsePrivateConstructor(mainClassName));\n+            }\n+\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/launcher\/SourceLauncher.java","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -127,0 +127,6 @@\n+# 0: string\n+launcher.err.cant.use.private.constructor=\\\n+    no non-private zero argument constructor found in class {0}\\n\\\n+    remove private from existing constructor or define as:\\n\\\n+\\   public {0}()\n+\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/resources\/launcher.properties","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -801,0 +801,16 @@\n+    @Test\n+    public void testPrivateConstructor(Path base) throws IOException {\n+        tb.writeJavaFiles(base,\n+                \"\"\"\n+                class PrivateConstructor {\n+                    private PrivateConstructor() {}\n+                    void main() {}\n+                }\n+                \"\"\");\n+        testError(base.resolve(\"PrivateConstructor.java\"), \"\",\n+                \"\"\"\n+                error: no non-private zero argument constructor found in class PrivateConstructor\n+                remove private from existing constructor or define as:\n+                   public PrivateConstructor()\"\"\");\n+    }\n+\n@@ -907,8 +923,0 @@\n-    void checkContains(String name, String found, String expect) {\n-        expect = expect.replace(\"\\n\", tb.lineSeparator);\n-        out.println(name + \": \" + found);\n-        if (!found.contains(expect)) {\n-            error(\"Expected output not found: \" + expect);\n-        }\n-    }\n-\n@@ -942,1 +950,0 @@\n-        expect = expect.replace(\"\\n\", tb.lineSeparator);\n@@ -950,2 +957,8 @@\n-            if (!(found.getMessage().equals(expect))) {\n-                error(\"Unexpected detail message; expected: \" + expect);\n+            String actual = found.getMessage();\n+            List<String> actualLines = actual.lines().toList();\n+            List<String> expectLines = expect.lines().toList();\n+            if (!(actualLines.equals(expectLines))) {\n+                error(\"Unexpected detail message; expected: \\n\"\n+                      + expect.indent(2)\n+                      + \"\\nactual:\\n\"\n+                      + actual.indent(2));\n","filename":"test\/langtools\/tools\/javac\/launcher\/SourceLauncherTest.java","additions":24,"deletions":11,"binary":false,"changes":35,"status":"modified"}]}