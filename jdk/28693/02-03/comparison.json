{"files":[{"patch":"@@ -1964,2 +1964,3 @@\n-static void decode_minmax_reduction_opc(int opc, bool& is_min, bool& is_unsigned,\n-                                        Assembler::Condition& cond) {\n+void C2_MacroAssembler::decode_minmax_reduction_opc(int opc, bool* is_min,\n+                                                    bool* is_unsigned,\n+                                                    Condition* cond) {\n@@ -1968,1 +1969,1 @@\n-      is_min = true;  is_unsigned = false; cond = Assembler::LT; break;\n+      *is_min = true;  *is_unsigned = false; *cond = LT; break;\n@@ -1970,1 +1971,1 @@\n-      is_min = false; is_unsigned = false; cond = Assembler::GT; break;\n+      *is_min = false; *is_unsigned = false; *cond = GT; break;\n@@ -1972,1 +1973,1 @@\n-      is_min = true;  is_unsigned = true;  cond = Assembler::LO; break;\n+      *is_min = true;  *is_unsigned = true;  *cond = LO; break;\n@@ -1974,1 +1975,1 @@\n-      is_min = false; is_unsigned = true;  cond = Assembler::HI; break;\n+      *is_min = false; *is_unsigned = true;  *cond = HI; break;\n@@ -1980,64 +1981,0 @@\n-\/\/ neon minp: pairwise minimum operation\n-void C2_MacroAssembler::neon_minp(bool is_unsigned, FloatRegister dst,\n-                                  SIMD_Arrangement size, FloatRegister src1,\n-                                  FloatRegister src2) {\n-  if (is_unsigned) {\n-    uminp(dst, size, src1, src2);\n-  } else {\n-    sminp(dst, size, src1, src2);\n-  }\n-}\n-\n-\/\/ neon maxp: pairwise maximum operation\n-void C2_MacroAssembler::neon_maxp(bool is_unsigned, FloatRegister dst,\n-                                  SIMD_Arrangement size, FloatRegister src1,\n-                                  FloatRegister src2) {\n-  if (is_unsigned) {\n-    umaxp(dst, size, src1, src2);\n-  } else {\n-    smaxp(dst, size, src1, src2);\n-  }\n-}\n-\n-\/\/ neon minv: reduction minimum operation\n-void C2_MacroAssembler::neon_minv(bool is_unsigned, FloatRegister dst,\n-                                  SIMD_Arrangement size, FloatRegister src) {\n-  if (is_unsigned) {\n-    uminv(dst, size, src);\n-  } else {\n-    sminv(dst, size, src);\n-  }\n-}\n-\n-\/\/ neon maxv: reduction maximum operation\n-void C2_MacroAssembler::neon_maxv(bool is_unsigned, FloatRegister dst,\n-                                  SIMD_Arrangement size, FloatRegister src) {\n-  if (is_unsigned) {\n-    umaxv(dst, size, src);\n-  } else {\n-    smaxv(dst, size, src);\n-  }\n-}\n-\n-\/\/ sve minv: reduction minimum operation\n-void C2_MacroAssembler::sve_minv(bool is_unsigned, FloatRegister dst,\n-                                 SIMD_RegVariant size, PRegister pg,\n-                                 FloatRegister src) {\n-  if (is_unsigned) {\n-    sve_uminv(dst, size, pg, src);\n-  } else {\n-    sve_sminv(dst, size, pg, src);\n-  }\n-}\n-\n-\/\/ sve maxv: reduction maximum operation\n-void C2_MacroAssembler::sve_maxv(bool is_unsigned, FloatRegister dst,\n-                                 SIMD_RegVariant size, PRegister pg,\n-                                 FloatRegister src) {\n-  if (is_unsigned) {\n-    sve_umaxv(dst, size, pg, src);\n-  } else {\n-    sve_smaxv(dst, size, pg, src);\n-  }\n-}\n-\n@@ -2060,1 +1997,1 @@\n-  decode_minmax_reduction_opc(opc, is_min, is_unsigned, cond);\n+  decode_minmax_reduction_opc(opc, &is_min, &is_unsigned, &cond);\n@@ -2176,1 +2113,1 @@\n-      decode_minmax_reduction_opc(opc, is_min, is_unsigned, cond);\n+      decode_minmax_reduction_opc(opc, &is_min, &is_unsigned, &cond);\n","filename":"src\/hotspot\/cpu\/aarch64\/c2_MacroAssembler_aarch64.cpp","additions":9,"deletions":72,"binary":false,"changes":81,"status":"modified"},{"patch":"@@ -37,0 +37,6 @@\n+  \/\/ Typedefs used to disambiguate overloaded member functions.\n+  typedef void (Assembler::*neon_reduction2)\n+    (FloatRegister, Assembler::SIMD_Arrangement, FloatRegister);\n+  typedef void (Assembler::*sve_reduction3)\n+    (FloatRegister, Assembler::SIMD_RegVariant, PRegister, FloatRegister);\n+\n@@ -38,0 +44,1 @@\n+  void decode_minmax_reduction_opc(int opc, bool* is_min, bool* is_unsigned, Condition* cond);\n@@ -39,1 +46,4 @@\n-                 FloatRegister src1, FloatRegister src2);\n+                 FloatRegister src1, FloatRegister src2) {\n+    auto m = is_unsigned ? &Assembler::uminp : &Assembler::sminp;\n+    (this->*m)(dst, size, src1, src2);\n+  }\n@@ -41,1 +51,4 @@\n-                 FloatRegister src1, FloatRegister src2);\n+                 FloatRegister src1, FloatRegister src2) {\n+    auto m = is_unsigned ? &Assembler::umaxp : &Assembler::smaxp;\n+    (this->*m)(dst, size, src1, src2);\n+  }\n@@ -43,1 +56,4 @@\n-                 FloatRegister src);\n+                 FloatRegister src) {\n+    auto m = is_unsigned ? (neon_reduction2)&Assembler::uminv : &Assembler::sminv;\n+    (this->*m)(dst, size, src);\n+  }\n@@ -45,1 +61,4 @@\n-                 FloatRegister src);\n+                 FloatRegister src) {\n+    auto m = is_unsigned ? (neon_reduction2)&Assembler::umaxv : &Assembler::smaxv;\n+    (this->*m)(dst, size, src);\n+  }\n@@ -47,1 +66,4 @@\n-                PRegister pg, FloatRegister src);\n+                PRegister pg, FloatRegister src) {\n+    auto m = is_unsigned ? (sve_reduction3)&Assembler::sve_uminv : &Assembler::sve_sminv;\n+    (this->*m)(dst, size, pg, src);\n+  }\n@@ -49,1 +71,4 @@\n-                PRegister pg, FloatRegister src);\n+                PRegister pg, FloatRegister src) {\n+    auto m = is_unsigned ? (sve_reduction3)&Assembler::sve_umaxv : &Assembler::sve_smaxv;\n+    (this->*m)(dst, size, pg, src);\n+  }\n","filename":"src\/hotspot\/cpu\/aarch64\/c2_MacroAssembler_aarch64.hpp","additions":31,"deletions":6,"binary":false,"changes":37,"status":"modified"}]}