{"files":[{"patch":"@@ -71,1 +71,1 @@\n-        OutputAnalyzer analyzer =  ProcessTools.executeCommand(launcher.toAbsolutePath().toString(),\"-ea\", \"-esa\", \"HijrahConfigCheck\");\n+        OutputAnalyzer analyzer =  ProcessTools.executeCommand(launcher.toAbsolutePath().toString(), \"-ea\", \"-esa\", \"HijrahConfigCheck\");\n","filename":"test\/jdk\/java\/time\/nontestng\/java\/time\/chrono\/HijrahConfigTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,0 +28,3 @@\n+ * @library \/test\/lib\n+ * @build jdk.test.lib.process.ProcessTools\n+ * @run main\/othervm EscapePath\n@@ -29,1 +32,9 @@\n-import java.io.*;\n+\n+import java.io.File;\n+import java.io.FileInputStream;\n+import java.io.FileOutputStream;\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+import jdk.test.lib.process.OutputAnalyzer;\n+import jdk.test.lib.process.ProcessTools;\n@@ -78,9 +89,17 @@\n-    private static void invokeJava() throws Exception {\n-        String command = System.getProperty(\"java.home\") +\n-                         File.separator + \"bin\" + File.separator +\n-                         \"java -classpath \" + \"a#b\/ Hello\";\n-        Process p = Runtime.getRuntime().exec(command);\n-        p.waitFor();\n-        int result = p.exitValue();\n-        if (result != 0)\n-            throw new RuntimeException(\"Path encoding failure.\");\n+    private static void invokeJava() {\n+        List<String> commands = new ArrayList<>();\n+\n+        System.setProperty(\"test.noclasspath\", \"true\");\n+        commands.add(\"-classpath\");\n+        commands.add(\"a#b\");\n+        commands.add(\"Hello\");\n+        ProcessBuilder pb = ProcessTools.createTestJavaProcessBuilder(commands);\n+\n+        try {\n+            OutputAnalyzer outputAnalyzer = ProcessTools.executeProcess(pb);\n+            if(outputAnalyzer.getExitValue() != 0) {\n+                throw new RuntimeException(\"Path encoding failure.\");\n+            }\n+        } catch (Exception ex) {\n+            throw new RuntimeException(ex.getMessage());\n+        }\n","filename":"test\/jdk\/sun\/misc\/EscapePath.java","additions":30,"deletions":11,"binary":false,"changes":41,"status":"modified"}]}