{"files":[{"patch":"@@ -194,0 +194,6 @@\n+            if (length == 0) {\n+                \/\/ Make explicit tests as there are no set operations\n+                checkReadOnly(false);\n+                checkValidState();\n+                return this;\n+            }\n@@ -197,27 +203,12 @@\n-            \/\/ Use the old switch statement syntax to improve startup time\n-            switch ((int) length) {\n-                case 0 : checkReadOnly(false); checkValidState(); break; \/\/ Explicit tests\n-                case 1 : set(JAVA_BYTE, 0, value); break;\n-                case 2 : set(JAVA_SHORT_UNALIGNED, 0, (short) intValue); break;\n-                case 3 : {\n-                    set(JAVA_SHORT_UNALIGNED, 0, (short) intValue);\n-                    set(JAVA_BYTE, 2, value);\n-                    break;\n-                }\n-                case 4 : set(JAVA_INT_UNALIGNED, 0, intValue); break;\n-                case 5 : {\n-                    set(JAVA_INT_UNALIGNED, 0, intValue);\n-                    set(JAVA_BYTE, 4, value);\n-                    break;\n-                }\n-                case 6 : {\n-                    set(JAVA_INT_UNALIGNED, 0, intValue);\n-                    set(JAVA_SHORT_UNALIGNED, 4, (short) intValue);\n-                    break;\n-                }\n-                case 7 : {\n-                    set(JAVA_INT_UNALIGNED, 0, intValue);\n-                    set(JAVA_SHORT_UNALIGNED, 4, (short) intValue);\n-                    set(JAVA_BYTE, 6, value);\n-                    break;\n-                }\n+\n+            int offset = 0;\n+            if ((length & 4) != 0) {\n+                set(JAVA_INT_UNALIGNED, 0, intValue);\n+                offset += 4;\n+            }\n+            if ((length & 2) != 0) {\n+                set(JAVA_SHORT_UNALIGNED, offset, (short) intValue);\n+                offset += 2;\n+            }\n+            if ((length & 1) != 0) {\n+                set(JAVA_BYTE, offset, value);\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/foreign\/AbstractMemorySegmentImpl.java","additions":18,"deletions":27,"binary":false,"changes":45,"status":"modified"}]}