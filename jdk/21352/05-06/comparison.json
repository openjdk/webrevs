{"files":[{"patch":"@@ -8546,2 +8546,2 @@\n-  \/\/ TODO check what legacy_mode needs to be set to\n-  InstructionAttr attributes(vector_len, \/* vex_w *\/ true, \/* legacy_mode *\/ false, \/* no_mask_reg *\/ true, \/* uses_vl *\/ true);\n+  InstructionAttr attributes(vector_len, \/* vex_w *\/ VM_Version::supports_evex(), \/* legacy_mode *\/ false, \/* no_mask_reg *\/ true, \/* uses_vl *\/ true);\n+  attributes.set_rex_vex_w_reverted();\n@@ -16228,1 +16228,1 @@\n-  assert(vector_len <= AVX_256bit ? VM_Version::supports_avx512vlbw() : VM_Version::supports_avx512bw(), \"\");\n+  assert(VM_Version::supports_evex() && (vector_len == Assembler::AVX_512bit || VM_Version::supports_avx512vl()), \"\");\n@@ -16236,1 +16236,1 @@\n-  assert(vector_len <= AVX_256bit ? VM_Version::supports_avx512vlbw() : VM_Version::supports_avx512bw(), \"\");\n+  assert(VM_Version::supports_evex() && (vector_len == Assembler::AVX_512bit || VM_Version::supports_avx512vl()), \"\");\n","filename":"src\/hotspot\/cpu\/x86\/assembler_x86.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -138,1 +138,1 @@\n-  __ mov64(rax, 0x1F);\n+  __ movl(rax, 0x1F);\n@@ -140,8 +140,4 @@\n-  __ shrl(rax, 1);\n-  __ kmovwl(k4, rax);\n-  __ shrl(rax, 1);\n-  __ kmovwl(k3, rax);\n-  __ shrl(rax, 1);\n-  __ kmovwl(k2, rax);\n-  __ shrl(rax, 1);\n-  __ kmovwl(k1, rax);\n+  __ kshiftrwl(k4, k5, 1);\n+  __ kshiftrwl(k3, k5, 2);\n+  __ kshiftrwl(k2, k5, 3);\n+  __ kshiftrwl(k1, k5, 4);\n@@ -288,1 +284,1 @@\n-    __ mov64(rax, 0);\n+    __ xorq(rax, rax); \/\/ return 0\n","filename":"src\/hotspot\/cpu\/x86\/stubGenerator_x86_64_sha3.cpp","additions":6,"deletions":10,"binary":false,"changes":16,"status":"modified"}]}