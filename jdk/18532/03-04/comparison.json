{"files":[{"patch":"@@ -299,2 +299,1 @@\n-  for (int i = 0; i < _body.body().length(); i++) {\n-    Node* n = _body.body().at(i);\n+  auto find_max_pred_depth = [&] (const Node* n) {\n@@ -310,1 +309,6 @@\n-    set_depth(n, max_pred_depth + 1);\n+    return max_pred_depth;\n+  };\n+\n+  for (int i = 0; i < _body.body().length(); i++) {\n+    Node* n = _body.body().at(i);\n+    set_depth(n, find_max_pred_depth(n) + 1);\n@@ -316,9 +320,1 @@\n-    int max_pred_depth = 0;\n-    if (!n->is_Phi()) { \/\/ ignore backedge\n-      for (PredsIterator it(*this, n); !it.done(); it.next()) {\n-        Node* pred = it.current();\n-        if (_vloop.in_bb(pred)) {\n-          max_pred_depth = MAX2(max_pred_depth, depth(pred));\n-        }\n-      }\n-    }\n+    int max_pred_depth = find_max_pred_depth(n);\n","filename":"src\/hotspot\/share\/opto\/vectorization.cpp","additions":8,"deletions":12,"binary":false,"changes":20,"status":"modified"}]}