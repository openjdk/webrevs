{"files":[{"patch":"@@ -4424,1 +4424,1 @@\n-  void pack_26(Register dest0, Register dest1, Register dest2, Register src, Register tmp1, Register tmp2) {\n+  void poly1305_pack_26(Register dest0, Register dest1, Register dest2, Register src, Register tmp1, Register tmp2) {\n@@ -4465,2 +4465,2 @@\n-  void pack_26(Register dest0, Register dest1, Register src, Register tmp1, Register tmp2) {\n-    pack_26(dest0, dest1, noreg, src, tmp1, tmp2);\n+  void poly1305_pack_26(Register dest0, Register dest1, Register src, Register tmp1, Register tmp2) {\n+    poly1305_pack_26(dest0, dest1, noreg, src, tmp1, tmp2);\n@@ -4470,1 +4470,1 @@\n-  void reduce(Register U_2, Register U_1, Register U_0, Register tmp1, Register tmp2) {\n+  void poly1305_reduce(Register U_2, Register U_1, Register U_0, Register tmp1, Register tmp2) {\n@@ -4474,1 +4474,1 @@\n-    __ shadd(tmp1, tmp1, tmp1, tmp2, 2); \/\/ tmp1 is impossible to overflow since two leftmost bits are zero'ed in 'srli(tmp1, U_2, 2)'\n+    __ shadd(tmp1, tmp1, tmp1, tmp2, 2);\n@@ -4512,1 +4512,1 @@\n-    pack_26(R_0, R_1, r_start, t1, t2);\n+    poly1305_pack_26(R_0, R_1, r_start, t1, t2);\n@@ -4523,1 +4523,1 @@\n-    pack_26(U_0, U_1, U_2, acc_start, t1, t2);\n+    poly1305_pack_26(U_0, U_1, U_2, acc_start, t1, t2);\n@@ -4567,1 +4567,1 @@\n-      reduce(U_2, U_1, U_0, t1, t2);\n+      poly1305_reduce(U_2, U_1, U_0, t1, t2);\n@@ -4576,1 +4576,7 @@\n-    reduce(U_2, U_1, U_0, t1, t2);\n+    poly1305_reduce(U_2, U_1, U_0, t1, t2);\n+\n+    Label no_final_reduce;\n+    __ srli(t1, U_2, 2);\n+    __ beqz(t1, no_final_reduce);\n+    poly1305_reduce(U_2, U_1, U_0, t1, t2);\n+    __ bind(no_final_reduce);\n","filename":"src\/hotspot\/cpu\/riscv\/stubGenerator_riscv.cpp","additions":15,"deletions":9,"binary":false,"changes":24,"status":"modified"}]}