{"files":[{"patch":"@@ -224,11 +224,0 @@\n-  \/\/ Capacity, free and used after the GC counted as full regions to\n-  \/\/ include the waste in the following calculations.\n-  const size_t capacity_after_gc = _g1h->capacity();\n-  size_t used_after_gc = capacity_after_gc -\n-                         _g1h->unused_committed_regions_in_bytes() -\n-                         \/\/ Discount space used by current Eden to establish a\n-                         \/\/ situation during Remark similar to at the end of full\n-                         \/\/ GC where eden is empty. During Remark there can be an\n-                         \/\/ arbitrary number of eden regions which would skew the\n-                         \/\/ results.\n-                         _g1h->eden_regions_count() * G1HeapRegion::GrainBytes;\n@@ -239,0 +228,1 @@\n+  size_t allocation_bytes = allocation_word_size * HeapWordSize;\n@@ -242,1 +232,1 @@\n-    allocation_word_size = align_up(allocation_word_size, G1HeapRegion::GrainWords);\n+    allocation_bytes = G1HeapRegion::align_up_to_region_byte_size(allocation_bytes);\n@@ -244,2 +234,12 @@\n-  size_t allocation_bytes = allocation_word_size * HeapWordSize;\n-  used_after_gc += allocation_bytes;\n+\n+  \/\/ Capacity, free and used after the GC counted as full regions to\n+  \/\/ include the waste in the following calculations.\n+  const size_t capacity_after_gc = _g1h->capacity();\n+  const size_t used_after_gc = capacity_after_gc + allocation_bytes -\n+                               _g1h->unused_committed_regions_in_bytes() -\n+                               \/\/ Discount space used by current Eden to establish a\n+                               \/\/ situation during Remark similar to at the end of full\n+                               \/\/ GC where eden is empty. During Remark there can be an\n+                               \/\/ arbitrary number of eden regions which would skew the\n+                               \/\/ results.\n+                               _g1h->eden_regions_count() * G1HeapRegion::GrainBytes;\n","filename":"src\/hotspot\/share\/gc\/g1\/g1HeapSizingPolicy.cpp","additions":14,"deletions":14,"binary":false,"changes":28,"status":"modified"}]}