{"files":[{"patch":"@@ -39,1 +39,5 @@\n-import java.io.*;\n+import java.io.BufferedInputStream;\n+import java.io.BufferedOutputStream;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.io.OutputStream;\n","filename":"src\/jdk.httpserver\/share\/classes\/sun\/net\/httpserver\/ServerImpl.java","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -29,2 +29,2 @@\n- * @run main B6968351\n- * @run main\/othervm -Dsun.net.httpserver.nodelay=false -Djdk.httpclient.HttpClient.log=all -Djava.net.preferIPv6Addresses=true -Djavax.net.debug=all B6968351\n+ * @run main\/timeout=5 B6968351\n+ * @run main\/othervm -Dsun.net.httpserver.nodelay=false B6968351\n@@ -44,0 +44,1 @@\n+import jdk.test.lib.net.URIBuilder;\n@@ -70,1 +71,2 @@\n-            var response = client.send(HttpRequest.newBuilder(new URI(\"http:\/\/localhost:\"+server.getAddress().getPort()+\"\/test\")).build(), HttpResponse.BodyHandlers.ofString());\n+            var uri = URIBuilder.newBuilder().scheme(\"http\").loopback().port(server.getAddress().getPort()).path(\"\/test\").build();\n+            var response = client.send(HttpRequest.newBuilder(uri).build(), HttpResponse.BodyHandlers.ofString());\n@@ -75,1 +77,0 @@\n-        if(time>5000) throw new IllegalStateException(\"took too long\");\n","filename":"test\/jdk\/com\/sun\/net\/httpserver\/bugs\/B6968351.java","additions":5,"deletions":4,"binary":false,"changes":9,"status":"modified"}]}