{"files":[{"patch":"@@ -227,2 +227,4 @@\n-    if (!unaligned_vector.enabled() && AlignVector == false) {\n-      if (!VM_Version::detect_misaligned_vector_support()){\n+    \/\/ The hwprobe syscall won't be able to detect support for misaligned vector accesses on old kernels.\n+    \/\/ Resort to detect_misaligned_vector_support() to see if misaligned vector accesses may trap or not.\n+    if (!unaligned_vector.enabled()) {\n+      if (AlignVector == false && !VM_Version::detect_misaligned_vector_support()) {\n@@ -566,4 +568,4 @@\n-                                                  g.generate_detect_misaligned_vector(\n-                                                  &VM_Version::_misaligned_vector_fault_pc1,\n-                                                  &VM_Version::_misaligned_vector_fault_pc2,\n-                                                  &VM_Version::_misaligned_vector_continuation_pc));\n+                                                   g.generate_detect_misaligned_vector(\n+                                                   &VM_Version::_misaligned_vector_fault_pc1,\n+                                                   &VM_Version::_misaligned_vector_fault_pc2,\n+                                                   &VM_Version::_misaligned_vector_continuation_pc));\n@@ -571,4 +573,1 @@\n-  if ((uint32_t)detect_misaligned_vector_stub() == 1) {\n-    return true;\n-  }\n-  return false;\n+  return detect_misaligned_vector_stub() == 1;\n","filename":"src\/hotspot\/cpu\/riscv\/vm_version_riscv.cpp","additions":9,"deletions":10,"binary":false,"changes":19,"status":"modified"}]}