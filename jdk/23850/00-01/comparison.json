{"files":[{"patch":"@@ -99,12 +99,7 @@\n-                                HashSet<Label> prior = new HashSet<>();\n-                                return (cob, coe) -> {\n-                                    switch (coe) {\n-                                    case BranchInstruction branch:\n-                                        if (prior.contains(branch.target()))\n-                                            cob.invokestatic(CD_Cancel, \"stopCheck\", ConstantDescs.MTD_void);\n-                                        break;\n-                                    case LabelTarget target:\n-                                        prior.add(target.label());\n-                                        break;\n-                                    default:\n-                                        break;\n+                                HashSet<Label> priorLabels = new HashSet<>();\n+                                return (builder, element) -> {\n+                                    switch (element) {\n+                                    case LabelTarget target -> priorLabels.add(target.label());\n+                                    case BranchInstruction branch when priorLabels.contains(branch.target())\n+                                        -> builder.invokestatic(CD_Cancel, \"stopCheck\", ConstantDescs.MTD_void);\n+                                    default -> { }\n@@ -112,1 +107,1 @@\n-                                    cob.with(coe);\n+                                    builder.with(element);\n","filename":"src\/jdk.jshell\/share\/classes\/jdk\/jshell\/execution\/LocalExecutionControl.java","additions":8,"deletions":13,"binary":false,"changes":21,"status":"modified"}]}