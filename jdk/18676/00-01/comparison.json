{"files":[{"patch":"@@ -912,1 +912,1 @@\n-    unsigned long hash;\n+    char*         member;\n@@ -1053,2 +1053,3 @@\n-    \/\/ extract member string if exist and generate hash of it\n-    unsigned long hash = 0;\n+    \/\/ extract member string if exist duplicate it and store pointer of it\n+    \/\/ if member does not exist store nullptr\n+    char* member = nullptr;\n@@ -1057,4 +1058,1 @@\n-      \/\/ Mocklisp hash function.\n-      while (*substr) {\n-        hash = (hash << 5) - hash + (unsigned long)*substr++;\n-      }\n+      member = os::strdup(substr);\n@@ -1071,1 +1069,3 @@\n-          (p_handletable + i)->hash == hash) {\n+          (((p_handletable + i)->member == nullptr && member == nullptr) ||\n+           ((p_handletable + i)->member != nullptr && member != nullptr &&\n+           strcmp((p_handletable + i)->member, member) == 0))) {\n@@ -1099,1 +1099,1 @@\n-        (p_handletable + i)->hash = hash;\n+        (p_handletable + i)->member = member;\n@@ -1147,1 +1147,1 @@\n-      \/\/ error analysis when dlopen fails\n+      \/\/ error analysis when dlclose fails\n@@ -1161,1 +1161,4 @@\n-        \/\/ so delete entry from array\n+        \/\/ so delete entry from array (do not forget to free member-string space if member exists)\n+\t\tif ((p_handletable + i)->member) {\n+\t\t  os::free((p_handletable + i)->member);\n+        }\n","filename":"src\/hotspot\/os\/aix\/porting_aix.cpp","additions":14,"deletions":11,"binary":false,"changes":25,"status":"modified"}]}