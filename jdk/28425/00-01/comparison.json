{"files":[{"patch":"@@ -210,0 +210,14 @@\n+    @ForceInline\n+    final int subLanesPerSrcIfNeeded(ByteOrder bo, AbstractSpecies<?> srcSpecies) {\n+        if (bo != java.nio.ByteOrder.BIG_ENDIAN) {\n+            return -1;\n+        }\n+        int sBytes = srcSpecies.elementSize();\n+        int tBytes = vspecies().elementSize();\n+        if (sBytes == tBytes || (sBytes % tBytes) != 0) {\n+            return -1;\n+        }\n+        int subLanesPerSrc = sBytes \/ tBytes;\n+        return subLanesPerSrc;\n+    }\n+\n","filename":"src\/jdk.incubator.vector\/share\/classes\/jdk\/incubator\/vector\/AbstractVector.java","additions":14,"deletions":0,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -3619,10 +3619,6 @@\n-        if (bo == java.nio.ByteOrder.BIG_ENDIAN) {\n-            int sBytes = srcSpecies.elementSize();\n-            int tBytes = this.vspecies().elementSize();\n-            if (sBytes == tBytes) return this;\n-            if (sBytes % tBytes != 0) return this;\n-            int subLanesPerSrc = sBytes \/ tBytes;\n-            VectorShuffle<Double> shuffle = normalizeSubLanesForSpecies(this.vspecies(), subLanesPerSrc);\n-            return this.rearrange(shuffle);\n-        }\n-        return this;\n+        int subLanesPerSrc = subLanesPerSrcIfNeeded(bo, srcSpecies);\n+        if (subLanesPerSrc < 0) {\n+            return this;\n+         }\n+        VectorShuffle<Double> shuffle = normalizeSubLanesForSpecies(this.vspecies(), subLanesPerSrc);\n+        return (DoubleVector) this.rearrange(shuffle);\n","filename":"src\/jdk.incubator.vector\/share\/classes\/jdk\/incubator\/vector\/DoubleVector.java","additions":6,"deletions":10,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -3569,10 +3569,6 @@\n-        if (bo == java.nio.ByteOrder.BIG_ENDIAN) {\n-            int sBytes = srcSpecies.elementSize();\n-            int tBytes = this.vspecies().elementSize();\n-            if (sBytes == tBytes) return this;\n-            if (sBytes % tBytes != 0) return this;\n-            int subLanesPerSrc = sBytes \/ tBytes;\n-            VectorShuffle<Float> shuffle = normalizeSubLanesForSpecies(this.vspecies(), subLanesPerSrc);\n-            return this.rearrange(shuffle);\n-        }\n-        return this;\n+        int subLanesPerSrc = subLanesPerSrcIfNeeded(bo, srcSpecies);\n+        if (subLanesPerSrc < 0) {\n+            return this;\n+         }\n+        VectorShuffle<Float> shuffle = normalizeSubLanesForSpecies(this.vspecies(), subLanesPerSrc);\n+        return (FloatVector) this.rearrange(shuffle);\n","filename":"src\/jdk.incubator.vector\/share\/classes\/jdk\/incubator\/vector\/FloatVector.java","additions":6,"deletions":10,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -3727,8 +3727,3 @@\n-        if (bo == java.nio.ByteOrder.BIG_ENDIAN) {\n-            int sBytes = srcSpecies.elementSize();\n-            int tBytes = this.vspecies().elementSize();\n-            if (sBytes == tBytes) return this;\n-            if (sBytes % tBytes != 0) return this;\n-            int subLanesPerSrc = sBytes \/ tBytes;\n-            VectorShuffle<Integer> shuffle = normalizeSubLanesForSpecies(this.vspecies(), subLanesPerSrc);\n-            return this.rearrange(shuffle);\n+        int subLanesPerSrc = subLanesPerSrcIfNeeded(bo, srcSpecies);\n+        if (subLanesPerSrc < 0) {\n+            return this;\n@@ -3736,1 +3731,2 @@\n-        return this;\n+        VectorShuffle<Integer> shuffle = normalizeSubLanesForSpecies(this.vspecies(), subLanesPerSrc);\n+        return (IntVector) this.rearrange(shuffle);\n","filename":"src\/jdk.incubator.vector\/share\/classes\/jdk\/incubator\/vector\/IntVector.java","additions":5,"deletions":9,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -3662,8 +3662,3 @@\n-        if (bo == java.nio.ByteOrder.BIG_ENDIAN) {\n-            int sBytes = srcSpecies.elementSize();\n-            int tBytes = this.vspecies().elementSize();\n-            if (sBytes == tBytes) return this;\n-            if (sBytes % tBytes != 0) return this;\n-            int subLanesPerSrc = sBytes \/ tBytes;\n-            VectorShuffle<Long> shuffle = normalizeSubLanesForSpecies(this.vspecies(), subLanesPerSrc);\n-            return this.rearrange(shuffle);\n+        int subLanesPerSrc = subLanesPerSrcIfNeeded(bo, srcSpecies);\n+        if (subLanesPerSrc < 0) {\n+            return this;\n@@ -3671,1 +3666,2 @@\n-        return this;\n+        VectorShuffle<Long> shuffle = normalizeSubLanesForSpecies(this.vspecies(), subLanesPerSrc);\n+        return (LongVector) this.rearrange(shuffle);\n","filename":"src\/jdk.incubator.vector\/share\/classes\/jdk\/incubator\/vector\/LongVector.java","additions":5,"deletions":9,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -4081,8 +4081,3 @@\n-        if (bo == ByteOrder.BIG_ENDIAN) {\n-            int sBytes = srcSpecies.elementSize();\n-            int tBytes = this.vspecies().elementSize();\n-            if (sBytes == tBytes) return this;\n-            if (sBytes % tBytes != 0) return this;\n-            int subLanesPerSrc = sBytes \/ tBytes;\n-            VectorShuffle<Short> shuffle = normalizeSubLanesForSpecies(this.vspecies(), subLanesPerSrc);\n-            return this.rearrange(shuffle);\n+        int subLanesPerSrc = subLanesPerSrcIfNeeded(bo, srcSpecies);\n+        if (subLanesPerSrc < 0) {\n+            return this;\n@@ -4090,1 +4085,2 @@\n-        return this;\n+        VectorShuffle<Short> shuffle = normalizeSubLanesForSpecies(this.vspecies(), subLanesPerSrc);\n+        return (ShortVector) this.rearrange(shuffle);\n","filename":"src\/jdk.incubator.vector\/share\/classes\/jdk\/incubator\/vector\/ShortVector.java","additions":5,"deletions":9,"binary":false,"changes":14,"status":"modified"}]}