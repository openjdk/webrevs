{"files":[{"patch":"@@ -81,1 +81,1 @@\n-                                     const char* message)\n+                                     const char* nest_host_error)\n@@ -84,1 +84,1 @@\n-  assert(!pool.is_null() && message != nullptr, \"adding null obj\");\n+  assert(!pool.is_null() && nest_host_error != nullptr, \"adding null obj\");\n@@ -87,1 +87,1 @@\n-  ResolutionErrorEntry *entry = new ResolutionErrorEntry(message);\n+  ResolutionErrorEntry *entry = new ResolutionErrorEntry(nest_host_error);\n@@ -111,0 +111,8 @@\n+ResolutionErrorEntry::ResolutionErrorEntry(const char* nest_host_error):\n+        _error(nullptr),\n+        _message(nullptr),\n+        _cause(nullptr),\n+        _cause_msg(nullptr),\n+        _nest_host_error(nest_host_error) {\n+}\n+\n@@ -116,11 +124,3 @@\n-  if (_message != nullptr) {\n-    FREE_C_HEAP_ARRAY(char, _message);\n-  }\n-\n-  if (_cause_msg != nullptr) {\n-    FREE_C_HEAP_ARRAY(char, _cause_msg);\n-  }\n-\n-  if (nest_host_error() != nullptr) {\n-    FREE_C_HEAP_ARRAY(char, nest_host_error());\n-  }\n+  FREE_C_HEAP_ARRAY(char, _message);\n+  FREE_C_HEAP_ARRAY(char, _cause_msg);\n+  FREE_C_HEAP_ARRAY(char, _nest_host_error);\n","filename":"src\/hotspot\/share\/classfile\/resolutionErrors.cpp","additions":14,"deletions":14,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -43,1 +43,1 @@\n-  static void add_entry(const constantPoolHandle& pool, int cp_index, const char* message);\n+  static void add_entry(const constantPoolHandle& pool, int cp_index, const char* nest_host_error);\n@@ -69,1 +69,0 @@\n- private:\n@@ -76,2 +75,0 @@\n-  NONCOPYABLE(ResolutionErrorEntry);\n-\n@@ -79,0 +76,1 @@\n+  NONCOPYABLE(ResolutionErrorEntry);\n@@ -82,8 +80,1 @@\n-\n-  \/\/ The incoming nest host error message is already in the C-Heap.\n-  ResolutionErrorEntry(const char* message):\n-        _error(nullptr),\n-        _message(nullptr),\n-        _cause(nullptr),\n-        _cause_msg(nullptr),\n-        _nest_host_error(message) {}\n+  ResolutionErrorEntry(const char* nest_host_error);\n@@ -93,3 +84,4 @@\n-  \/\/ The incoming nest host error message is already in the C-Heap.\n-  void set_nest_host_error(const char* message) {\n-    _nest_host_error = message;\n+  void set_nest_host_error(const char* nest_host_error) {\n+    assert(nest_host_error != nullptr, \"must be non-null string\");\n+    FREE_C_HEAP_ARRAY(char, _nest_host_error);\n+    _nest_host_error = os::strdup(nest_host_error);\n@@ -99,5 +91,5 @@\n-  Symbol*            error() const              { return _error; }\n-  const char*        message() const            { return _message; }\n-  Symbol*            cause() const              { return _cause; }\n-  const char*        cause_msg() const          { return _cause_msg; }\n-  const char*        nest_host_error() const    { return _nest_host_error; }\n+  Symbol*     error() const           { return _error; }\n+  const char* message() const         { return _message; }\n+  Symbol*     cause() const           { return _cause; }\n+  const char* cause_msg() const       { return _cause_msg; }\n+  const char* nest_host_error() const { return _nest_host_error; }\n","filename":"src\/hotspot\/share\/classfile\/resolutionErrors.hpp","additions":12,"deletions":20,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -315,1 +315,1 @@\n-      const char* msg = ss.as_string(true \/* on C-heap *\/);\n+      const char* msg = ss.freeze();\n@@ -359,1 +359,1 @@\n-        const char* msg = ss.as_string(true \/* on C-heap *\/);\n+        const char* msg = ss.freeze();\n","filename":"src\/hotspot\/share\/oops\/instanceKlass.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}