{"files":[{"patch":"@@ -116,11 +116,3 @@\n-  if (_message != nullptr) {\n-    FREE_C_HEAP_ARRAY(char, _message);\n-  }\n-\n-  if (_cause_msg != nullptr) {\n-    FREE_C_HEAP_ARRAY(char, _cause_msg);\n-  }\n-\n-  if (nest_host_error() != nullptr) {\n-    FREE_C_HEAP_ARRAY(char, nest_host_error());\n-  }\n+  FREE_C_HEAP_ARRAY(char, _message);\n+  FREE_C_HEAP_ARRAY(char, _cause_msg);\n+  FREE_C_HEAP_ARRAY(char, _nest_host_error);\n","filename":"src\/hotspot\/share\/classfile\/resolutionErrors.cpp","additions":3,"deletions":11,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -69,1 +69,0 @@\n- private:\n@@ -76,2 +75,0 @@\n-  NONCOPYABLE(ResolutionErrorEntry);\n-\n@@ -79,0 +76,1 @@\n+  NONCOPYABLE(ResolutionErrorEntry);\n@@ -82,2 +80,0 @@\n-\n-  \/\/ The incoming nest host error message is already in the C-Heap.\n@@ -85,5 +81,1 @@\n-        _error(nullptr),\n-        _message(nullptr),\n-        _cause(nullptr),\n-        _cause_msg(nullptr),\n-        _nest_host_error(message) {}\n+    ResolutionErrorEntry(nullptr, message, nullptr, nullptr) {}\n@@ -93,3 +85,4 @@\n-  \/\/ The incoming nest host error message is already in the C-Heap.\n-  void set_nest_host_error(const char* message) {\n-    _nest_host_error = message;\n+  void set_nest_host_error(const char* nest_host_error) {\n+    assert(nest_host_error != nullptr, \"must be non-null string\");\n+    FREE_C_HEAP_ARRAY(char, _nest_host_error);\n+    _nest_host_error = os::strdup(nest_host_error);\n@@ -99,5 +92,5 @@\n-  Symbol*            error() const              { return _error; }\n-  const char*        message() const            { return _message; }\n-  Symbol*            cause() const              { return _cause; }\n-  const char*        cause_msg() const          { return _cause_msg; }\n-  const char*        nest_host_error() const    { return _nest_host_error; }\n+  Symbol*     error() const           { return _error; }\n+  const char* message() const         { return _message; }\n+  Symbol*     cause() const           { return _cause; }\n+  const char* cause_msg() const       { return _cause_msg; }\n+  const char* nest_host_error() const { return _nest_host_error; }\n","filename":"src\/hotspot\/share\/classfile\/resolutionErrors.hpp","additions":11,"deletions":18,"binary":false,"changes":29,"status":"modified"},{"patch":"@@ -315,1 +315,1 @@\n-      const char* msg = ss.as_string(true \/* on C-heap *\/);\n+      const char* msg = ss.freeze();\n@@ -359,1 +359,1 @@\n-        const char* msg = ss.as_string(true \/* on C-heap *\/);\n+        const char* msg = ss.freeze();\n","filename":"src\/hotspot\/share\/oops\/instanceKlass.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}