{"files":[{"patch":"@@ -113,6 +113,12 @@\n-# Kerberos native test library needs krb5 and com_err libraries\n-BUILD_JDK_JTREG_LIBRARIES_LDFLAGS_libNativeCredentialCacheHelper := -lkrb5 -lcom_err\n-\n-ifeq ($(call isTargetOs, macosx), true)\n-  # On macOS, disable deprecation warnings for krb5 API\n-  BUILD_JDK_JTREG_LIBRARIES_CFLAGS_libNativeCredentialCacheHelper := -Wno-deprecated-declarations\n+# Kerberos native test library - only build if krb5 is available\n+ifeq ($(ENABLE_LIBLINUXKRB5), true)\n+  BUILD_JDK_JTREG_LIBRARIES_LDFLAGS_libNativeCredentialCacheHelper := $(KRB5_LIBS)\n+  BUILD_JDK_JTREG_LIBRARIES_CFLAGS_libNativeCredentialCacheHelper := $(KRB5_CFLAGS)\n+\n+  ifeq ($(call isTargetOs, macosx), true)\n+    # On macOS, disable deprecation warnings for krb5 API\n+    BUILD_JDK_JTREG_LIBRARIES_CFLAGS_libNativeCredentialCacheHelper += -Wno-deprecated-declarations\n+  endif\n+else\n+  # Exclude the Kerberos test library if krb5 is not available\n+  BUILD_JDK_JTREG_EXCLUDE += libNativeCredentialCacheHelper.c\n","filename":"make\/test\/JtregNativeJdk.gmk","additions":12,"deletions":6,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -83,0 +83,3 @@\n+        } catch (UnsatisfiedLinkError e) {\n+            System.out.println(\"Kerberos native library not available - test skipped\");\n+            return;\n","filename":"test\/jdk\/sun\/security\/krb5\/native\/NativeCacheTest.java","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"}]}