{"files":[{"patch":"@@ -407,8 +407,0 @@\n-  if (print) {\n-    char buf[1024];\n-    fmn.as_C_string(buf, sizeof(buf));\n-    tty->print(\"%s Arena usage %s: \", compilertype2name(ct), buf);\n-    arena_stat->print_on(tty);\n-    tty->cr();\n-  }\n-\n@@ -439,0 +431,7 @@\n+  if (print) {\n+    char buf[1024];\n+    fmn.as_C_string(buf, sizeof(buf));\n+    tty->print(\"%s Arena usage %s: \", compilertype2name(ct), buf);\n+    arena_stat->print_on(tty);\n+    tty->cr();\n+  }\n@@ -542,0 +541,3 @@\n+\n+  MutexLocker ml(NMTCompilationCostHistory_lock, Mutex::_no_safepoint_check_flag);\n+\n@@ -562,2 +564,0 @@\n-  {\n-    MutexLocker ml(NMTCompilationCostHistory_lock, Mutex::_no_safepoint_check_flag);\n@@ -565,15 +565,12 @@\n-    if (_the_table != nullptr) {\n-      \/\/ We sort with quicksort\n-      int num = 0;\n-      filtered = _the_table->calc_flat_array(num, min_size);\n-      if (min_size > 0) {\n-        st->print_cr(\"(%d\/%d)\", num, _the_table->number_of_entries());\n-      }\n-      if (num > 0) {\n-        QuickSort::sort(filtered, num, diff_entries_by_size, false);\n-        \/\/ Now print. Has to happen under lock protection too, since entries may be changed.\n-        for (int i = 0; i < num; i ++) {\n-          filtered[i]->print_on(st, human_readable);\n-        }\n-      } else {\n-        st->print_cr(\"No entries.\");\n+  if (_the_table != nullptr) {\n+    \/\/ We sort with quicksort\n+    int num = 0;\n+    filtered = _the_table->calc_flat_array(num, min_size);\n+    if (min_size > 0) {\n+      st->print_cr(\"(%d\/%d)\", num, _the_table->number_of_entries());\n+    }\n+    if (num > 0) {\n+      QuickSort::sort(filtered, num, diff_entries_by_size, false);\n+      \/\/ Now print. Has to happen under lock protection too, since entries may be changed.\n+      for (int i = 0; i < num; i ++) {\n+        filtered[i]->print_on(st, human_readable);\n@@ -582,1 +579,1 @@\n-      st->print_cr(\"Not initialized.\");\n+      st->print_cr(\"No entries.\");\n@@ -584,1 +581,3 @@\n-  } \/\/ locked\n+  } else {\n+    st->print_cr(\"Not initialized.\");\n+  }\n","filename":"src\/hotspot\/share\/compiler\/compilationMemoryStatistic.cpp","additions":26,"deletions":27,"binary":false,"changes":53,"status":"modified"}]}