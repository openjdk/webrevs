{"files":[{"patch":"@@ -531,8 +531,9 @@\n-        Attribute.Array values = (Attribute.Array)suppressWarnings.member(names.value);\n-        for (Attribute value : values.values) {\n-            Optional.of(value)\n-              .filter(val -> val instanceof Attribute.Constant)\n-              .map(val -> (String) ((Attribute.Constant) val).value)\n-              .flatMap(LintCategory::get)\n-              .filter(lc -> lc.annotationSuppression)\n-              .ifPresent(result::add);\n+        if (suppressWarnings.member(names.value) instanceof Attribute.Array values) {\n+            for (Attribute value : values.values) {\n+                Optional.of(value)\n+                  .filter(val -> val instanceof Attribute.Constant)\n+                  .map(val -> (String) ((Attribute.Constant) val).value)\n+                  .flatMap(LintCategory::get)\n+                  .filter(lc -> lc.annotationSuppression)\n+                  .ifPresent(result::add);\n+            }\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/code\/Lint.java","additions":9,"deletions":8,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n- * @bug 8270139 8361445\n+ * @bug 8270139 8361445 8365314\n@@ -227,0 +227,24 @@\n+    @Test \/\/JDK-8365314\n+    public void testSuppressWarningsMissingAttribute() throws Exception {\n+        String code = \"\"\"\n+                      @SuppressWarnings\n+                      public class Test {\n+                      }\n+                      \"\"\";\n+        Path curPath = Path.of(\".\");\n+        List<String> actual = new JavacTask(tb)\n+                .options(\"-XDrawDiagnostics\", \"-XDdev\")\n+                .sources(code)\n+                .outdir(curPath)\n+                .run(Expect.FAIL)\n+                .getOutputLines(OutputKind.DIRECT);\n+\n+        List<String> expected = List.of(\n+                \"Test.java:1:1: compiler.err.annotation.missing.default.value: java.lang.SuppressWarnings, value\",\n+                \"1 error\"\n+        );\n+\n+        if (!Objects.equals(actual, expected)) {\n+            error(\"Expected: \" + expected + \", but got: \" + actual);\n+        }\n+    }\n","filename":"test\/langtools\/tools\/javac\/recovery\/AnnotationRecovery.java","additions":25,"deletions":1,"binary":false,"changes":26,"status":"modified"}]}