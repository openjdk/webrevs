{"files":[{"patch":"@@ -646,2 +646,1 @@\n-                \/\/ trust any OutputStream residing in java.*\n-                if (out.getClass().getPackageName().startsWith(\"java.\")) {\n+                if (out.trusted()) {\n","filename":"src\/java.base\/share\/classes\/java\/io\/BufferedInputStream.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -212,4 +212,1 @@\n-            Class<?> outClass = out.getClass();\n-            if (outClass == ByteArrayOutputStream.class ||\n-                outClass == FileOutputStream.class ||\n-                outClass == PipedOutputStream.class)\n+            if (out.trusted())\n","filename":"src\/java.base\/share\/classes\/java\/io\/ByteArrayInputStream.java","additions":1,"deletions":4,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1994, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1994, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -207,0 +207,11 @@\n+    \/**\n+     * Checks whether this OutputStream is trusted, i.e. doesn't modify written byte[]\n+     *\n+     * @return true if the argument of {@link #write(byte[])}} and {@link #write(byte[], int, int)}} needn't be copied\n+     *\/\n+    boolean trusted() {\n+        var clazz = getClass();\n+        return clazz == ByteArrayOutputStream.class\n+                || clazz == FileOutputStream.class\n+                || clazz == PipedOutputStream.class;\n+    }\n","filename":"src\/java.base\/share\/classes\/java\/io\/OutputStream.java","additions":12,"deletions":1,"binary":false,"changes":13,"status":"modified"}]}