{"files":[{"patch":"@@ -374,8 +374,0 @@\n-    private static LambdaForm createBlankForType(MethodType mt) {\n-        \/\/ Make a dummy blank lambda form.\n-        \/\/ It is used as a template for managing the invocation of similar forms that are non-empty.\n-        \/\/ Called only from getPreparedForm.\n-        LambdaForm form = new LambdaForm(0, 0, DEFAULT_FORCE_INLINE, DEFAULT_CUSTOMIZED, new Name[0], Kind.GENERIC);\n-        return form;\n-    }\n-\n@@ -788,2 +780,4 @@\n-        LambdaForm prep = mtype.form().cachedLambdaForm(MethodTypeForm.LF_INTERPRET);\n-        if (prep == null) {\n+        MethodTypeForm form = mtype.form();\n+\n+        MemberName entry = form.cachedInterpretEntry();\n+        if (entry == null) {\n@@ -791,3 +785,2 @@\n-            prep = LambdaForm.createBlankForType(mtype);\n-            prep.vmentry = InvokerBytecodeGenerator.generateLambdaFormInterpreterEntryPoint(mtype);\n-            prep = mtype.form().setCachedLambdaForm(MethodTypeForm.LF_INTERPRET, prep);\n+            entry = InvokerBytecodeGenerator.generateLambdaFormInterpreterEntryPoint(mtype);\n+            entry = form.setCachedInterpretEntry(entry);\n@@ -795,1 +788,1 @@\n-        this.vmentry = prep.vmentry;\n+        this.vmentry = entry;\n","filename":"src\/java.base\/share\/classes\/java\/lang\/invoke\/LambdaForm.java","additions":7,"deletions":14,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -67,0 +67,2 @@\n+    private SoftReference<MemberName> interpretEntry;\n+\n@@ -75,1 +77,0 @@\n-            LF_INTERPRET               =  6,  \/\/ LF interpreter\n@@ -165,0 +166,13 @@\n+    public MemberName cachedInterpretEntry() {\n+        return (interpretEntry == null) ? null : interpretEntry.get();\n+    }\n+\n+    public synchronized MemberName setCachedInterpretEntry(MemberName mn) {\n+        MemberName prev = cachedInterpretEntry();\n+        if (prev != null) {\n+            return prev;\n+        }\n+        this.interpretEntry = new SoftReference<>(mn);\n+        return mn;\n+    }\n+\n","filename":"src\/java.base\/share\/classes\/java\/lang\/invoke\/MethodTypeForm.java","additions":15,"deletions":1,"binary":false,"changes":16,"status":"modified"}]}