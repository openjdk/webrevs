{"files":[{"patch":"@@ -579,1 +579,1 @@\n-    TOOLCHAIN_CFLAGS_JDK=\"-pipe -fstack-protector\"\n+    TOOLCHAIN_CFLAGS_JDK=\"-fvisibility=hidden -pipe -fstack-protector\"\n@@ -614,0 +614,1 @@\n+    TOOLCHAIN_CFLAGS_JDK=\"$TOOLCHAIN_CFLAGS_JDK -fvisibility=hidden\"\n@@ -618,2 +619,2 @@\n-    TOOLCHAIN_CFLAGS_JDK=\"-qtbtable=full -qchars=signed -qfullpath -qsaveopt -qstackprotect\"  # add on both CFLAGS\n-    TOOLCHAIN_CFLAGS_JVM=\"-qtbtable=full -qtune=balanced -fno-exceptions \\\n+    TOOLCHAIN_CFLAGS_JDK=\"-qvisibility=hidden -qtbtable=full -qchars=signed -qfullpath -qsaveopt -qstackprotect\"  # add on both CFLAGS\n+    TOOLCHAIN_CFLAGS_JVM=\"-qvisibility=hidden -qtbtable=full -qtune=balanced -fno-exceptions \\\n","filename":"make\/autoconf\/flags-cflags.m4","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -64,1 +64,1 @@\n-    BASIC_LDFLAGS=\"-Wl,-z,defs -Wl,-z,relro -Wl,-z,now -Wl,--no-as-needed\"\n+    BASIC_LDFLAGS=\"-Wl,-z,defs -Wl,-z,relro -Wl,-z,now -Wl,--no-as-needed -Wl,--exclude-libs,ALL\"\n@@ -84,0 +84,3 @@\n+    if test \"x$OPENJDK_TARGET_OS\" = xlinux; then\n+      BASIC_LDFLAGS=\"-Wl,--exclude-libs,ALL\"\n+    fi\n","filename":"make\/autoconf\/flags-ldflags.m4","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -62,9 +62,0 @@\n-  ifeq ($(TOOLCHAIN_TYPE), gcc)\n-    TEST_CFLAGS += -fvisibility=hidden\n-    TEST_LDFLAGS += -Wl,--exclude-libs,ALL\n-  else ifeq ($(TOOLCHAIN_TYPE), clang)\n-    TEST_CFLAGS += -fvisibility=hidden\n-  else ifeq ($(TOOLCHAIN_TYPE), xlc)\n-    TEST_CFLAGS += -qvisibility=hidden\n-  endif\n-\n@@ -78,1 +69,1 @@\n-    $1_LDFLAGS := $(LDFLAGS_JDKLIB) $$(TEST_LDFLAGS) $$(call SET_SHARED_LIBRARY_ORIGIN)\n+    $1_LDFLAGS := $(LDFLAGS_JDKLIB) $$(call SET_SHARED_LIBRARY_ORIGIN)\n@@ -86,1 +77,1 @@\n-    $1_LDFLAGS := $(LDFLAGS_JDKEXE) $$(TEST_LDFLAGS) $(LDFLAGS_TESTEXE)\n+    $1_LDFLAGS := $(LDFLAGS_JDKEXE) $(LDFLAGS_TESTEXE)\n","filename":"make\/common\/TestFilesCompilation.gmk","additions":2,"deletions":11,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2011, 2023, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2011, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,15 +31,0 @@\n-# Tell the compiler not to export any functions unless declared so in\n-# the source code. On Windows, this is the default and cannot be changed.\n-# On Mac, we have always exported all symbols, probably due to oversight\n-# and\/or misunderstanding. To emulate this, don't hide any symbols\n-# by default.\n-# Also provide an override for non-conformant libraries.\n-ifeq ($(TOOLCHAIN_TYPE), gcc)\n-  LAUNCHER_CFLAGS += -fvisibility=hidden\n-  LDFLAGS_JDKEXE += -Wl,--exclude-libs,ALL\n-else ifeq ($(TOOLCHAIN_TYPE), clang)\n-  LAUNCHER_CFLAGS += -fvisibility=hidden\n-else ifeq ($(TOOLCHAIN_TYPE), xlc)\n-  LAUNCHER_CFLAGS += -qvisibility=hidden\n-endif\n-\n","filename":"make\/common\/modules\/LauncherCommon.gmk","additions":1,"deletions":16,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2011, 2022, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2011, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,18 +34,0 @@\n-# Tell the compiler not to export any functions unless declared so in\n-# the source code. On Windows, this is the default and cannot be changed.\n-# On Mac, we have always exported all symbols, probably due to oversight\n-# and\/or misunderstanding. To emulate this, don't hide any symbols\n-# by default.\n-# Also provide an override for non-conformant libraries.\n-ifeq ($(TOOLCHAIN_TYPE), gcc)\n-  CFLAGS_JDKLIB += -fvisibility=hidden\n-  CXXFLAGS_JDKLIB += -fvisibility=hidden\n-  LDFLAGS_JDKLIB += -Wl,--exclude-libs,ALL\n-else ifeq ($(TOOLCHAIN_TYPE), clang)\n-  CFLAGS_JDKLIB += -fvisibility=hidden\n-  CXXFLAGS_JDKLIB += -fvisibility=hidden\n-else ifeq ($(TOOLCHAIN_TYPE), xlc)\n-  CFLAGS_JDKLIB += -qvisibility=hidden\n-  CXXFLAGS_JDKLIB += -qvisibility=hidden\n-endif\n-\n","filename":"make\/common\/modules\/LibCommon.gmk","additions":1,"deletions":19,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -160,1 +160,1 @@\n-  JVM_LDFLAGS += -Wl,--exclude-libs,ALL -Wl,-version-script=$(HOTSPOT_VERSION_SCRIPT)\n+  JVM_LDFLAGS += -Wl,-version-script=$(HOTSPOT_VERSION_SCRIPT)\n","filename":"make\/hotspot\/lib\/CompileJvm.gmk","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}