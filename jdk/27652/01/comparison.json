{"files":[{"patch":"@@ -32,0 +32,1 @@\n+import java.util.concurrent.ConcurrentHashMap;\n@@ -62,0 +63,3 @@\n+    private static final boolean perExchangeAttributes =\n+        !System.getProperty(\"jdk.httpserver.attributes\", \"\")\n+              .equals(\"context\");\n@@ -79,1 +83,1 @@\n-    Map<String,Object> attributes;\n+    final Map<String,Object> attributes;\n@@ -94,0 +98,3 @@\n+        this.attributes = perExchangeAttributes\n+            ? new ConcurrentHashMap<>()\n+            : getHttpContext().getAttributes();\n@@ -364,7 +371,1 @@\n-        if (name == null) {\n-            throw new NullPointerException (\"null name parameter\");\n-        }\n-        if (attributes == null) {\n-            attributes = getHttpContext().getAttributes();\n-        }\n-        return attributes.get (name);\n+        return attributes.get(Objects.requireNonNull(name, \"null name parameter\"));\n@@ -374,6 +375,1 @@\n-        if (name == null) {\n-            throw new NullPointerException (\"null name parameter\");\n-        }\n-        if (attributes == null) {\n-            attributes = getHttpContext().getAttributes();\n-        }\n+        var key = Objects.requireNonNull(name, \"null name parameter\");\n@@ -381,1 +377,1 @@\n-            attributes.put (name, value);\n+            attributes.put(key, value);\n@@ -383,1 +379,1 @@\n-            attributes.remove (name);\n+            attributes.remove(key);\n","filename":"src\/jdk.httpserver\/share\/classes\/sun\/net\/httpserver\/ExchangeImpl.java","additions":12,"deletions":16,"binary":false,"changes":28,"status":"modified"}]}