{"files":[{"patch":"@@ -221,0 +221,4 @@\n+size_t ZMappedCache::Tree::size_atomic() const {\n+  return Atomic::load(&_num_nodes);\n+}\n+\n@@ -307,1 +311,1 @@\n-  \/\/ Replace in size-class lists\n+  \/\/ Replace in tree\n@@ -310,0 +314,2 @@\n+  \/\/ Replace in size-class lists\n+\n@@ -669,4 +675,4 @@\n-  \/\/ values may be inconsistent. As such we read the _tree.size() only once. And\n-  \/\/ use is_empty_error_reporter_safe and size_error_reporter_safe on the size\n-  \/\/ class lists.\n-  const size_t entry_count = _tree.size();\n+  \/\/ values may be inconsistent. As such we read size using _tree.size_atomic()\n+  \/\/ only once. And use is_empty_error_reporter_safe and\n+  \/\/ size_error_reporter_safe on the size class lists.\n+  const size_t entry_count = _tree.size_atomic();\n","filename":"src\/hotspot\/share\/gc\/z\/zMappedCache.cpp","additions":11,"deletions":5,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -32,1 +32,0 @@\n-#include \"utilities\/rbTree.hpp\"\n@@ -34,0 +33,1 @@\n+#include \"utilities\/rbTree.hpp\"\n@@ -73,0 +73,1 @@\n+    size_t size_atomic() const;\n","filename":"src\/hotspot\/share\/gc\/z\/zMappedCache.hpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"}]}