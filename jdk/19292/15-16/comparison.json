{"files":[{"patch":"@@ -24,3 +24,0 @@\n-\n-package tools.javac.annotations;\n-\n@@ -41,1 +38,1 @@\n- * @summary error: javac crashes when annotation processing runs on program with module imports\n+ * @summary error: javac prints an AssertionError when annotation processing runs on program with module imports\n@@ -44,3 +41,3 @@\n- * jdk.compiler\/com.sun.tools.javac.main\n- * @build toolbox.JavacTask toolbox.ToolBox toolbox.Assert toolbox.Task\n- * @run main tools.javac.annotations.ModuleImportProcessingTest\n+ *          jdk.compiler\/com.sun.tools.javac.main\n+ * @build toolbox.JavacTask toolbox.ToolBox toolbox.Task\n+ * @run main ModuleImportProcessingTest\n@@ -52,20 +49,13 @@\n-            import module java.base;\n-            import java.util.List;\n-            import java.lang.annotation.ElementType;\n-            import java.lang.annotation.Retention;\n-            import java.lang.annotation.RetentionPolicy;\n-            import java.lang.annotation.Target;\n-            public class Main {\n-              public static void main(String[] args) {\n-                List.of();\n-              }\n-              @Ann\n-              private void test() {\n-                List.of();\n-              }\n-              @Retention(RetentionPolicy.RUNTIME)\n-              @Target(ElementType.METHOD)\n-              public @interface Ann {\n-              }\n-            }\n-            \"\"\";\n+        import module java.base;\n+        import java.lang.annotation.*;\n+        public class Main {\n+          public static void main(String[] args) {\n+            List.of();\n+          }\n+          @Ann\n+          private void test() {}\n+          @Retention(RetentionPolicy.RUNTIME)\n+          @Target(ElementType.METHOD)\n+          public @interface Ann {}\n+        }\n+        \"\"\";\n@@ -74,2 +64,1 @@\n-        var t = new ModuleImportProcessingTest();\n-        t.test();\n+        new ModuleImportProcessingTest().test();\n@@ -84,1 +73,2 @@\n-                        \"--source\", System.getProperty(\"java.specification.version\")\n+                        \"-source\", Integer.toString(Runtime.version().feature()),\n+                        \"-proc:only\"\n@@ -89,2 +79,1 @@\n-                .writeAll()\n-                .getOutputLines(Task.OutputKind.DIRECT);\n+                .writeAll();\n","filename":"test\/langtools\/tools\/javac\/processing\/ModuleImportProcessingTest.java","additions":21,"deletions":32,"binary":false,"changes":53,"status":"modified"}]}