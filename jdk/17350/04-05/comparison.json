{"files":[{"patch":"@@ -167,1 +167,1 @@\n-  narrowOop* patching_start = (narrowOop*)region.start() + FileMapInfo::current_info()->header()->heap_oopmap_start_pos();\n+  narrowOop* patching_start = (narrowOop*)region.start() + FileMapInfo::current_info()->heap_oopmap_start_pos();\n@@ -193,1 +193,1 @@\n-    PatchUncompressedEmbeddedPointers patcher((oop*)region.start() + FileMapInfo::current_info()->header()->heap_oopmap_start_pos());\n+    PatchUncompressedEmbeddedPointers patcher((oop*)region.start() + FileMapInfo::current_info()->heap_oopmap_start_pos());\n@@ -313,1 +313,1 @@\n-  PatchLoadedRegionPointers patcher((narrowOop*)load_address + FileMapInfo::current_info()->header()->heap_oopmap_start_pos(), loaded_region);\n+  PatchLoadedRegionPointers patcher((narrowOop*)load_address + FileMapInfo::current_info()->heap_oopmap_start_pos(), loaded_region);\n@@ -446,1 +446,1 @@\n-    PatchNativePointers patcher((Metadata**)r->mapped_base() + FileMapInfo::current_info()->header()->heap_ptrmap_start_pos());\n+    PatchNativePointers patcher((Metadata**)r->mapped_base() + FileMapInfo::current_info()->heap_ptrmap_start_pos());\n","filename":"src\/hotspot\/share\/cds\/archiveHeapLoader.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -638,1 +638,1 @@\n-  size_t start_pos = FileMapInfo::current_info()->header()->heap_ptrmap_start_pos();\n+  size_t start_pos = FileMapInfo::current_info()->heap_ptrmap_start_pos();\n","filename":"src\/hotspot\/share\/cds\/archiveHeapWriter.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1578,1 +1578,1 @@\n-  map->truncate(old_zeros, map->size_in_bits());\n+  map->truncate(old_zeros, map->size());\n@@ -1582,2 +1582,0 @@\n-  size_t removed_zeros = old_zeros - new_zeros;\n-  tty->print_cr(\"Zeros: %ld -> %ld\", old_zeros, new_zeros);\n@@ -1587,1 +1585,1 @@\n-  return old_zeros - new_zeros;\n+  return old_zeros;\n@@ -1601,2 +1599,0 @@\n-    MetaspaceShared::set_heap_oopmap_start_pos(removed_oop_zeros);\n-    MetaspaceShared::set_heap_ptrmap_start_pos(removed_ptr_zeros);\n","filename":"src\/hotspot\/share\/cds\/filemap.cpp","additions":2,"deletions":6,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -100,2 +100,0 @@\n-size_t MetaspaceShared::_ptrmap_start_pos = 0;\n-size_t MetaspaceShared::_oopmap_start_pos = 0;\n@@ -932,4 +930,0 @@\n-    \/\/ Leading zeros are needed to get correct offsets\n-    _oopmap_start_pos = static_mapinfo->header()->heap_oopmap_start_pos();\n-    _ptrmap_start_pos = static_mapinfo->header()->heap_ptrmap_start_pos();\n-\n","filename":"src\/hotspot\/share\/cds\/metaspaceShared.cpp","additions":0,"deletions":6,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -56,2 +56,1 @@\n-  static size_t _ptrmap_start_pos;\n-  static size_t _oopmap_start_pos;\n+\n@@ -168,7 +167,0 @@\n-  \/\/ Leading zeros are removed from heap bitmaps\n-  static size_t oopmap_start_pos() { return _oopmap_start_pos; }\n-  static size_t ptrmap_start_pos() { return _ptrmap_start_pos; }\n-\n-  static void set_heap_oopmap_start_pos(size_t leading_zeros) { _oopmap_start_pos = leading_zeros; }\n-  static void set_heap_ptrmap_start_pos(size_t leading_zeros) { _ptrmap_start_pos = leading_zeros; }\n-\n","filename":"src\/hotspot\/share\/cds\/metaspaceShared.hpp","additions":1,"deletions":9,"binary":false,"changes":10,"status":"modified"}]}