{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -2876,1 +2876,1 @@\n-                    toBits(v.rOp(MAX_OR_INF, m, (i, a, b) -> (byte) VectorMath.minUnsigned(a, b)));\n+                    toBits(v.rOp(UMAX_VALUE, m, (i, a, b) -> (byte) VectorMath.minUnsigned(a, b)));\n@@ -2878,1 +2878,1 @@\n-                    toBits(v.rOp(MIN_OR_INF, m, (i, a, b) -> (byte) VectorMath.maxUnsigned(a, b)));\n+                    toBits(v.rOp(UMIN_VALUE, m, (i, a, b) -> (byte) VectorMath.maxUnsigned(a, b)));\n@@ -2893,0 +2893,2 @@\n+    private static final byte UMIN_VALUE = (byte)0;   \/\/ Minimum unsigned value\n+    private static final byte UMAX_VALUE = (byte)-1;  \/\/ Maximum unsigned value\n","filename":"src\/jdk.incubator.vector\/share\/classes\/jdk\/incubator\/vector\/ByteVector.java","additions":5,"deletions":3,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2026, Oracle and\/or its affiliates. All rights reserved.\n","filename":"src\/jdk.incubator.vector\/share\/classes\/jdk\/incubator\/vector\/DoubleVector.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2026, Oracle and\/or its affiliates. All rights reserved.\n","filename":"src\/jdk.incubator.vector\/share\/classes\/jdk\/incubator\/vector\/FloatVector.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -2861,1 +2861,1 @@\n-                    toBits(v.rOp(MAX_OR_INF, m, (i, a, b) -> (int) VectorMath.minUnsigned(a, b)));\n+                    toBits(v.rOp(UMAX_VALUE, m, (i, a, b) -> (int) VectorMath.minUnsigned(a, b)));\n@@ -2863,1 +2863,1 @@\n-                    toBits(v.rOp(MIN_OR_INF, m, (i, a, b) -> (int) VectorMath.maxUnsigned(a, b)));\n+                    toBits(v.rOp(UMIN_VALUE, m, (i, a, b) -> (int) VectorMath.maxUnsigned(a, b)));\n@@ -2878,0 +2878,2 @@\n+    private static final int UMIN_VALUE = (int)0;   \/\/ Minimum unsigned value\n+    private static final int UMAX_VALUE = (int)-1;  \/\/ Maximum unsigned value\n","filename":"src\/jdk.incubator.vector\/share\/classes\/jdk\/incubator\/vector\/IntVector.java","additions":5,"deletions":3,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -2727,1 +2727,1 @@\n-                    toBits(v.rOp(MAX_OR_INF, m, (i, a, b) -> (long) VectorMath.minUnsigned(a, b)));\n+                    toBits(v.rOp(UMAX_VALUE, m, (i, a, b) -> (long) VectorMath.minUnsigned(a, b)));\n@@ -2729,1 +2729,1 @@\n-                    toBits(v.rOp(MIN_OR_INF, m, (i, a, b) -> (long) VectorMath.maxUnsigned(a, b)));\n+                    toBits(v.rOp(UMIN_VALUE, m, (i, a, b) -> (long) VectorMath.maxUnsigned(a, b)));\n@@ -2744,0 +2744,2 @@\n+    private static final long UMIN_VALUE = (long)0;   \/\/ Minimum unsigned value\n+    private static final long UMAX_VALUE = (long)-1;  \/\/ Maximum unsigned value\n","filename":"src\/jdk.incubator.vector\/share\/classes\/jdk\/incubator\/vector\/LongVector.java","additions":5,"deletions":3,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -2877,1 +2877,1 @@\n-                    toBits(v.rOp(MAX_OR_INF, m, (i, a, b) -> (short) VectorMath.minUnsigned(a, b)));\n+                    toBits(v.rOp(UMAX_VALUE, m, (i, a, b) -> (short) VectorMath.minUnsigned(a, b)));\n@@ -2879,1 +2879,1 @@\n-                    toBits(v.rOp(MIN_OR_INF, m, (i, a, b) -> (short) VectorMath.maxUnsigned(a, b)));\n+                    toBits(v.rOp(UMIN_VALUE, m, (i, a, b) -> (short) VectorMath.maxUnsigned(a, b)));\n@@ -2894,0 +2894,2 @@\n+    private static final short UMIN_VALUE = (short)0;   \/\/ Minimum unsigned value\n+    private static final short UMAX_VALUE = (short)-1;  \/\/ Maximum unsigned value\n","filename":"src\/jdk.incubator.vector\/share\/classes\/jdk\/incubator\/vector\/ShortVector.java","additions":5,"deletions":3,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -3451,1 +3451,1 @@\n-                    toBits(v.rOp(MAX_OR_INF, m, (i, a, b) -> ($type$) VectorMath.minUnsigned(a, b)));\n+                    toBits(v.rOp(UMAX_VALUE, m, (i, a, b) -> ($type$) VectorMath.minUnsigned(a, b)));\n@@ -3453,1 +3453,1 @@\n-                    toBits(v.rOp(MIN_OR_INF, m, (i, a, b) -> ($type$) VectorMath.maxUnsigned(a, b)));\n+                    toBits(v.rOp(UMIN_VALUE, m, (i, a, b) -> ($type$) VectorMath.maxUnsigned(a, b)));\n@@ -3475,0 +3475,2 @@\n+    private static final $type$ UMIN_VALUE = ($type$)0;   \/\/ Minimum unsigned value\n+    private static final $type$ UMAX_VALUE = ($type$)-1;  \/\/ Maximum unsigned value\n","filename":"src\/jdk.incubator.vector\/share\/classes\/jdk\/incubator\/vector\/X-Vector.java.template","additions":5,"deletions":3,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -66,1 +66,0 @@\n-\n@@ -69,0 +68,13 @@\n+    \/\/ Identity values for reduction operations\n+    private static final byte ADD_IDENTITY = (byte)0;\n+    private static final byte AND_IDENTITY = (byte)-1;\n+    private static final byte FIRST_NONZERO_IDENTITY = (byte)0;\n+    private static final byte MAX_IDENTITY = Byte.MIN_VALUE;\n+    private static final byte MIN_IDENTITY = Byte.MAX_VALUE;\n+    private static final byte MUL_IDENTITY = (byte)1;\n+    private static final byte OR_IDENTITY = (byte)0;\n+    private static final byte SUADD_IDENTITY = (byte)0;\n+    private static final byte UMAX_IDENTITY = (byte)0;   \/\/ Minimum unsigned value\n+    private static final byte UMIN_IDENTITY = (byte)-1;  \/\/ Maximum unsigned value\n+    private static final byte XOR_IDENTITY = (byte)0;\n+\n@@ -3569,1 +3581,1 @@\n-        byte res = -1;\n+        byte res = AND_IDENTITY;\n@@ -3578,1 +3590,1 @@\n-        byte res = -1;\n+        byte res = AND_IDENTITY;\n@@ -3590,8 +3602,1 @@\n-        byte ra = -1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.AND);\n-            }\n-        }\n+        byte ra = 0;\n@@ -3600,1 +3605,1 @@\n-            ra = -1;\n+            ra = AND_IDENTITY;\n@@ -3603,1 +3608,3 @@\n-                ra &= av.reduceLanes(VectorOperators.AND);\n+                byte v = av.reduceLanes(VectorOperators.AND);\n+                r[i] = v;\n+                ra &= v;\n@@ -3611,0 +3618,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void ANDReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = AND_IDENTITY;\n+\n+        Assert.assertEquals((byte) (id & id), id,\n+                            \"AND(AND_IDENTITY, AND_IDENTITY) != AND_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) (id & x), x);\n+                Assert.assertEquals((byte) (x & id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) (id & x), x,\n+                                \"AND(AND_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) (x & id), x,\n+                                \"AND(\" + x + \", AND_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3612,1 +3642,1 @@\n-        byte res = -1;\n+        byte res = AND_IDENTITY;\n@@ -3622,1 +3652,1 @@\n-        byte res = -1;\n+        byte res = AND_IDENTITY;\n@@ -3636,8 +3666,1 @@\n-        byte ra = -1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.AND, vmask);\n-            }\n-        }\n+        byte ra = 0;\n@@ -3646,1 +3669,1 @@\n-            ra = -1;\n+            ra = AND_IDENTITY;\n@@ -3649,1 +3672,3 @@\n-                ra &= av.reduceLanes(VectorOperators.AND, vmask);\n+                byte v = av.reduceLanes(VectorOperators.AND, vmask);\n+                r[i] = v;\n+                ra &= v;\n@@ -3658,1 +3683,1 @@\n-        byte res = 0;\n+        byte res = OR_IDENTITY;\n@@ -3667,1 +3692,1 @@\n-        byte res = 0;\n+        byte res = OR_IDENTITY;\n@@ -3682,0 +3707,1 @@\n+            ra = OR_IDENTITY;\n@@ -3684,9 +3710,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.OR);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                ra |= av.reduceLanes(VectorOperators.OR);\n+                byte v = av.reduceLanes(VectorOperators.OR);\n+                r[i] = v;\n+                ra |= v;\n@@ -3700,0 +3720,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void ORReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = OR_IDENTITY;\n+\n+        Assert.assertEquals((byte) (id | id), id,\n+                            \"OR(OR_IDENTITY, OR_IDENTITY) != OR_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) (id | x), x);\n+                Assert.assertEquals((byte) (x | id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) (id | x), x,\n+                                \"OR(OR_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) (x | id), x,\n+                                \"OR(\" + x + \", OR_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3701,1 +3744,1 @@\n-        byte res = 0;\n+        byte res = OR_IDENTITY;\n@@ -3711,1 +3754,1 @@\n-        byte res = 0;\n+        byte res = OR_IDENTITY;\n@@ -3728,0 +3771,1 @@\n+            ra = OR_IDENTITY;\n@@ -3730,9 +3774,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.OR, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                ra |= av.reduceLanes(VectorOperators.OR, vmask);\n+                byte v = av.reduceLanes(VectorOperators.OR, vmask);\n+                r[i] = v;\n+                ra |= v;\n@@ -3747,1 +3785,1 @@\n-        byte res = 0;\n+        byte res = XOR_IDENTITY;\n@@ -3756,1 +3794,1 @@\n-        byte res = 0;\n+        byte res = XOR_IDENTITY;\n@@ -3771,0 +3809,1 @@\n+            ra = XOR_IDENTITY;\n@@ -3773,9 +3812,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.XOR);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                ra ^= av.reduceLanes(VectorOperators.XOR);\n+                byte v = av.reduceLanes(VectorOperators.XOR);\n+                r[i] = v;\n+                ra ^= v;\n@@ -3789,0 +3822,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void XORReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = XOR_IDENTITY;\n+\n+        Assert.assertEquals((byte) (id ^ id), id,\n+                            \"XOR(XOR_IDENTITY, XOR_IDENTITY) != XOR_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) (id ^ x), x);\n+                Assert.assertEquals((byte) (x ^ id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) (id ^ x), x,\n+                                \"XOR(XOR_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) (x ^ id), x,\n+                                \"XOR(\" + x + \", XOR_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3790,1 +3846,1 @@\n-        byte res = 0;\n+        byte res = XOR_IDENTITY;\n@@ -3800,1 +3856,1 @@\n-        byte res = 0;\n+        byte res = XOR_IDENTITY;\n@@ -3817,0 +3873,1 @@\n+            ra = XOR_IDENTITY;\n@@ -3819,9 +3876,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.XOR, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                ra ^= av.reduceLanes(VectorOperators.XOR, vmask);\n+                byte v = av.reduceLanes(VectorOperators.XOR, vmask);\n+                r[i] = v;\n+                ra ^= v;\n@@ -3836,1 +3887,1 @@\n-        byte res = 0;\n+        byte res = ADD_IDENTITY;\n@@ -3845,1 +3896,1 @@\n-        byte res = 0;\n+        byte res = ADD_IDENTITY;\n@@ -3860,0 +3911,1 @@\n+            ra = ADD_IDENTITY;\n@@ -3862,9 +3914,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD);\n+                byte v = av.reduceLanes(VectorOperators.ADD);\n+                r[i] = v;\n+                ra += v;\n@@ -3878,0 +3924,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void ADDReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = ADD_IDENTITY;\n+\n+        Assert.assertEquals((byte) (id + id), id,\n+                            \"ADD(ADD_IDENTITY, ADD_IDENTITY) != ADD_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) (id + x), x);\n+                Assert.assertEquals((byte) (x + id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) (id + x), x,\n+                                \"ADD(ADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) (x + id), x,\n+                                \"ADD(\" + x + \", ADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3879,1 +3948,1 @@\n-        byte res = 0;\n+        byte res = ADD_IDENTITY;\n@@ -3889,1 +3958,1 @@\n-        byte res = 0;\n+        byte res = ADD_IDENTITY;\n@@ -3906,0 +3975,1 @@\n+            ra = ADD_IDENTITY;\n@@ -3908,9 +3978,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD, vmask);\n+                byte v = av.reduceLanes(VectorOperators.ADD, vmask);\n+                r[i] = v;\n+                ra += v;\n@@ -3925,1 +3989,1 @@\n-        byte res = 1;\n+        byte res = MUL_IDENTITY;\n@@ -3934,1 +3998,1 @@\n-        byte res = 1;\n+        byte res = MUL_IDENTITY;\n@@ -3946,8 +4010,1 @@\n-        byte ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL);\n-            }\n-        }\n+        byte ra = 0;\n@@ -3956,1 +4013,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -3959,1 +4016,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL);\n+                byte v = av.reduceLanes(VectorOperators.MUL);\n+                r[i] = v;\n+                ra *= v;\n@@ -3967,0 +4026,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void MULReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = MUL_IDENTITY;\n+\n+        Assert.assertEquals((byte) (id * id), id,\n+                            \"MUL(MUL_IDENTITY, MUL_IDENTITY) != MUL_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) (id * x), x);\n+                Assert.assertEquals((byte) (x * id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) (id * x), x,\n+                                \"MUL(MUL_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) (x * id), x,\n+                                \"MUL(\" + x + \", MUL_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3968,1 +4050,1 @@\n-        byte res = 1;\n+        byte res = MUL_IDENTITY;\n@@ -3978,1 +4060,1 @@\n-        byte res = 1;\n+        byte res = MUL_IDENTITY;\n@@ -3992,8 +4074,1 @@\n-        byte ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL, vmask);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4002,1 +4077,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -4005,1 +4080,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL, vmask);\n+                byte v = av.reduceLanes(VectorOperators.MUL, vmask);\n+                r[i] = v;\n+                ra *= v;\n@@ -4014,1 +4091,1 @@\n-        byte res = Byte.MAX_VALUE;\n+        byte res = MIN_IDENTITY;\n@@ -4023,1 +4100,1 @@\n-        byte res = Byte.MAX_VALUE;\n+        byte res = MIN_IDENTITY;\n@@ -4035,8 +4112,1 @@\n-        byte ra = Byte.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4045,1 +4115,1 @@\n-            ra = Byte.MAX_VALUE;\n+            ra = MIN_IDENTITY;\n@@ -4048,1 +4118,3 @@\n-                ra = (byte) Math.min(ra, av.reduceLanes(VectorOperators.MIN));\n+                byte v = av.reduceLanes(VectorOperators.MIN);\n+                r[i] = v;\n+                ra = (byte) Math.min(ra, v);\n@@ -4056,0 +4128,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void MINReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = MIN_IDENTITY;\n+\n+        Assert.assertEquals((byte) Math.min(id, id), id,\n+                            \"MIN(MIN_IDENTITY, MIN_IDENTITY) != MIN_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) Math.min(id, x), x);\n+                Assert.assertEquals((byte) Math.min(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) Math.min(id, x), x,\n+                                \"MIN(MIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) Math.min(x, id), x,\n+                                \"MIN(\" + x + \", MIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4057,1 +4152,1 @@\n-        byte res = Byte.MAX_VALUE;\n+        byte res = MIN_IDENTITY;\n@@ -4067,1 +4162,1 @@\n-        byte res = Byte.MAX_VALUE;\n+        byte res = MIN_IDENTITY;\n@@ -4081,8 +4176,1 @@\n-        byte ra = Byte.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN, vmask);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4091,1 +4179,1 @@\n-            ra = Byte.MAX_VALUE;\n+            ra = MIN_IDENTITY;\n@@ -4094,1 +4182,3 @@\n-                ra = (byte) Math.min(ra, av.reduceLanes(VectorOperators.MIN, vmask));\n+                byte v = av.reduceLanes(VectorOperators.MIN, vmask);\n+                r[i] = v;\n+                ra = (byte) Math.min(ra, v);\n@@ -4103,1 +4193,1 @@\n-        byte res = Byte.MIN_VALUE;\n+        byte res = MAX_IDENTITY;\n@@ -4112,1 +4202,1 @@\n-        byte res = Byte.MIN_VALUE;\n+        byte res = MAX_IDENTITY;\n@@ -4124,8 +4214,1 @@\n-        byte ra = Byte.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4134,1 +4217,1 @@\n-            ra = Byte.MIN_VALUE;\n+            ra = MAX_IDENTITY;\n@@ -4137,1 +4220,3 @@\n-                ra = (byte) Math.max(ra, av.reduceLanes(VectorOperators.MAX));\n+                byte v = av.reduceLanes(VectorOperators.MAX);\n+                r[i] = v;\n+                ra = (byte) Math.max(ra, v);\n@@ -4145,0 +4230,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void MAXReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = MAX_IDENTITY;\n+\n+        Assert.assertEquals((byte) Math.max(id, id), id,\n+                            \"MAX(MAX_IDENTITY, MAX_IDENTITY) != MAX_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) Math.max(id, x), x);\n+                Assert.assertEquals((byte) Math.max(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) Math.max(id, x), x,\n+                                \"MAX(MAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) Math.max(x, id), x,\n+                                \"MAX(\" + x + \", MAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4146,1 +4254,1 @@\n-        byte res = Byte.MIN_VALUE;\n+        byte res = MAX_IDENTITY;\n@@ -4156,1 +4264,1 @@\n-        byte res = Byte.MIN_VALUE;\n+        byte res = MAX_IDENTITY;\n@@ -4170,8 +4278,1 @@\n-        byte ra = Byte.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX, vmask);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4180,1 +4281,1 @@\n-            ra = Byte.MIN_VALUE;\n+            ra = MAX_IDENTITY;\n@@ -4183,1 +4284,3 @@\n-                ra = (byte) Math.max(ra, av.reduceLanes(VectorOperators.MAX, vmask));\n+                byte v = av.reduceLanes(VectorOperators.MAX, vmask);\n+                r[i] = v;\n+                ra = (byte) Math.max(ra, v);\n@@ -4192,1 +4295,1 @@\n-        byte res = Byte.MAX_VALUE;\n+        byte res = UMIN_IDENTITY;\n@@ -4201,1 +4304,1 @@\n-        byte res = Byte.MAX_VALUE;\n+        byte res = UMIN_IDENTITY;\n@@ -4213,8 +4316,1 @@\n-        byte ra = Byte.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMIN);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4223,1 +4319,1 @@\n-            ra = Byte.MAX_VALUE;\n+            ra = UMIN_IDENTITY;\n@@ -4226,1 +4322,3 @@\n-                ra = (byte) VectorMath.minUnsigned(ra, av.reduceLanes(VectorOperators.UMIN));\n+                byte v = av.reduceLanes(VectorOperators.UMIN);\n+                r[i] = v;\n+                ra = (byte) VectorMath.minUnsigned(ra, v);\n@@ -4234,0 +4332,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void UMINReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = UMIN_IDENTITY;\n+\n+        Assert.assertEquals((byte) VectorMath.minUnsigned(id, id), id,\n+                            \"UMIN(UMIN_IDENTITY, UMIN_IDENTITY) != UMIN_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) VectorMath.minUnsigned(id, x), x);\n+                Assert.assertEquals((byte) VectorMath.minUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) VectorMath.minUnsigned(id, x), x,\n+                                \"UMIN(UMIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) VectorMath.minUnsigned(x, id), x,\n+                                \"UMIN(\" + x + \", UMIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4235,1 +4356,1 @@\n-        byte res = Byte.MAX_VALUE;\n+        byte res = UMIN_IDENTITY;\n@@ -4245,1 +4366,1 @@\n-        byte res = Byte.MAX_VALUE;\n+        byte res = UMIN_IDENTITY;\n@@ -4259,8 +4380,1 @@\n-        byte ra = Byte.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMIN, vmask);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4269,1 +4383,1 @@\n-            ra = Byte.MAX_VALUE;\n+            ra = UMIN_IDENTITY;\n@@ -4272,1 +4386,3 @@\n-                ra = (byte) VectorMath.minUnsigned(ra, av.reduceLanes(VectorOperators.UMIN, vmask));\n+                byte v = av.reduceLanes(VectorOperators.UMIN, vmask);\n+                r[i] = v;\n+                ra = (byte) VectorMath.minUnsigned(ra, v);\n@@ -4281,1 +4397,1 @@\n-        byte res = Byte.MIN_VALUE;\n+        byte res = UMAX_IDENTITY;\n@@ -4290,1 +4406,1 @@\n-        byte res = Byte.MIN_VALUE;\n+        byte res = UMAX_IDENTITY;\n@@ -4302,8 +4418,1 @@\n-        byte ra = Byte.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMAX);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4312,1 +4421,1 @@\n-            ra = Byte.MIN_VALUE;\n+            ra = UMAX_IDENTITY;\n@@ -4315,1 +4424,3 @@\n-                ra = (byte) VectorMath.maxUnsigned(ra, av.reduceLanes(VectorOperators.UMAX));\n+                byte v = av.reduceLanes(VectorOperators.UMAX);\n+                r[i] = v;\n+                ra = (byte) VectorMath.maxUnsigned(ra, v);\n@@ -4323,0 +4434,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void UMAXReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = UMAX_IDENTITY;\n+\n+        Assert.assertEquals((byte) VectorMath.maxUnsigned(id, id), id,\n+                            \"UMAX(UMAX_IDENTITY, UMAX_IDENTITY) != UMAX_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) VectorMath.maxUnsigned(id, x), x);\n+                Assert.assertEquals((byte) VectorMath.maxUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) VectorMath.maxUnsigned(id, x), x,\n+                                \"UMAX(UMAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) VectorMath.maxUnsigned(x, id), x,\n+                                \"UMAX(\" + x + \", UMAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4324,1 +4458,1 @@\n-        byte res = Byte.MIN_VALUE;\n+        byte res = UMAX_IDENTITY;\n@@ -4334,1 +4468,1 @@\n-        byte res = Byte.MIN_VALUE;\n+        byte res = UMAX_IDENTITY;\n@@ -4348,8 +4482,1 @@\n-        byte ra = Byte.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMAX, vmask);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4358,1 +4485,1 @@\n-            ra = Byte.MIN_VALUE;\n+            ra = UMAX_IDENTITY;\n@@ -4361,1 +4488,3 @@\n-                ra = (byte) VectorMath.maxUnsigned(ra, av.reduceLanes(VectorOperators.UMAX, vmask));\n+                byte v = av.reduceLanes(VectorOperators.UMAX, vmask);\n+                r[i] = v;\n+                ra = (byte) VectorMath.maxUnsigned(ra, v);\n@@ -4370,1 +4499,1 @@\n-        byte res = (byte) 0;\n+        byte res = FIRST_NONZERO_IDENTITY;\n@@ -4379,1 +4508,1 @@\n-        byte res = (byte) 0;\n+        byte res = FIRST_NONZERO_IDENTITY;\n@@ -4391,8 +4520,1 @@\n-        byte ra = (byte) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4401,1 +4523,1 @@\n-            ra = (byte) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -4404,1 +4526,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO));\n+                byte v = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -4412,0 +4536,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void FIRST_NONZEROReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = FIRST_NONZERO_IDENTITY;\n+\n+        Assert.assertEquals(firstNonZero(id, id), id,\n+                            \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, FIRST_NONZERO_IDENTITY) != FIRST_NONZERO_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals(firstNonZero(id, x), x);\n+                Assert.assertEquals(firstNonZero(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals(firstNonZero(id, x), x,\n+                                \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals(firstNonZero(x, id), x,\n+                                \"FIRST_NONZERO(\" + x + \", FIRST_NONZERO_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4413,1 +4560,1 @@\n-        byte res = (byte) 0;\n+        byte res = FIRST_NONZERO_IDENTITY;\n@@ -4423,1 +4570,1 @@\n-        byte res = (byte) 0;\n+        byte res = FIRST_NONZERO_IDENTITY;\n@@ -4437,8 +4584,1 @@\n-        byte ra = (byte) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4447,1 +4587,1 @@\n-            ra = (byte) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -4450,1 +4590,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask));\n+                byte v = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -4507,1 +4649,1 @@\n-        byte res = 0;\n+        byte res = SUADD_IDENTITY;\n@@ -4516,1 +4658,1 @@\n-        byte res = 0;\n+        byte res = SUADD_IDENTITY;\n@@ -4531,0 +4673,1 @@\n+            ra = SUADD_IDENTITY;\n@@ -4533,9 +4676,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.SUADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                ra = (byte) VectorMath.addSaturatingUnsigned(ra, av.reduceLanes(VectorOperators.SUADD));\n+                byte v = av.reduceLanes(VectorOperators.SUADD);\n+                r[i] = v;\n+                ra = (byte) VectorMath.addSaturatingUnsigned(ra, v);\n@@ -4549,0 +4686,23 @@\n+    @Test(dataProvider = \"byteSaturatingUnaryOpProvider\")\n+    static void SUADDReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = SUADD_IDENTITY;\n+\n+        Assert.assertEquals((byte) VectorMath.addSaturatingUnsigned(id, id), id,\n+                            \"SUADD(SUADD_IDENTITY, SUADD_IDENTITY) != SUADD_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) VectorMath.addSaturatingUnsigned(id, x), x);\n+                Assert.assertEquals((byte) VectorMath.addSaturatingUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) VectorMath.addSaturatingUnsigned(id, x), x,\n+                                \"SUADD(SUADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) VectorMath.addSaturatingUnsigned(x, id), x,\n+                                \"SUADD(\" + x + \", SUADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4550,1 +4710,1 @@\n-        byte res = 0;\n+        byte res = SUADD_IDENTITY;\n@@ -4560,1 +4720,1 @@\n-        byte res = 0;\n+        byte res = SUADD_IDENTITY;\n@@ -4576,0 +4736,1 @@\n+            ra = SUADD_IDENTITY;\n@@ -4578,9 +4739,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.SUADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                ra = (byte) VectorMath.addSaturatingUnsigned(ra, av.reduceLanes(VectorOperators.SUADD, vmask));\n+                byte v = av.reduceLanes(VectorOperators.SUADD, vmask);\n+                r[i] = v;\n+                ra = (byte) VectorMath.addSaturatingUnsigned(ra, v);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/Byte128VectorTests.java","additions":413,"deletions":258,"binary":false,"changes":671,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -66,1 +66,0 @@\n-\n@@ -69,0 +68,13 @@\n+    \/\/ Identity values for reduction operations\n+    private static final byte ADD_IDENTITY = (byte)0;\n+    private static final byte AND_IDENTITY = (byte)-1;\n+    private static final byte FIRST_NONZERO_IDENTITY = (byte)0;\n+    private static final byte MAX_IDENTITY = Byte.MIN_VALUE;\n+    private static final byte MIN_IDENTITY = Byte.MAX_VALUE;\n+    private static final byte MUL_IDENTITY = (byte)1;\n+    private static final byte OR_IDENTITY = (byte)0;\n+    private static final byte SUADD_IDENTITY = (byte)0;\n+    private static final byte UMAX_IDENTITY = (byte)0;   \/\/ Minimum unsigned value\n+    private static final byte UMIN_IDENTITY = (byte)-1;  \/\/ Maximum unsigned value\n+    private static final byte XOR_IDENTITY = (byte)0;\n+\n@@ -3569,1 +3581,1 @@\n-        byte res = -1;\n+        byte res = AND_IDENTITY;\n@@ -3578,1 +3590,1 @@\n-        byte res = -1;\n+        byte res = AND_IDENTITY;\n@@ -3590,8 +3602,1 @@\n-        byte ra = -1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.AND);\n-            }\n-        }\n+        byte ra = 0;\n@@ -3600,1 +3605,1 @@\n-            ra = -1;\n+            ra = AND_IDENTITY;\n@@ -3603,1 +3608,3 @@\n-                ra &= av.reduceLanes(VectorOperators.AND);\n+                byte v = av.reduceLanes(VectorOperators.AND);\n+                r[i] = v;\n+                ra &= v;\n@@ -3611,0 +3618,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void ANDReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = AND_IDENTITY;\n+\n+        Assert.assertEquals((byte) (id & id), id,\n+                            \"AND(AND_IDENTITY, AND_IDENTITY) != AND_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) (id & x), x);\n+                Assert.assertEquals((byte) (x & id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) (id & x), x,\n+                                \"AND(AND_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) (x & id), x,\n+                                \"AND(\" + x + \", AND_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3612,1 +3642,1 @@\n-        byte res = -1;\n+        byte res = AND_IDENTITY;\n@@ -3622,1 +3652,1 @@\n-        byte res = -1;\n+        byte res = AND_IDENTITY;\n@@ -3636,8 +3666,1 @@\n-        byte ra = -1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.AND, vmask);\n-            }\n-        }\n+        byte ra = 0;\n@@ -3646,1 +3669,1 @@\n-            ra = -1;\n+            ra = AND_IDENTITY;\n@@ -3649,1 +3672,3 @@\n-                ra &= av.reduceLanes(VectorOperators.AND, vmask);\n+                byte v = av.reduceLanes(VectorOperators.AND, vmask);\n+                r[i] = v;\n+                ra &= v;\n@@ -3658,1 +3683,1 @@\n-        byte res = 0;\n+        byte res = OR_IDENTITY;\n@@ -3667,1 +3692,1 @@\n-        byte res = 0;\n+        byte res = OR_IDENTITY;\n@@ -3682,0 +3707,1 @@\n+            ra = OR_IDENTITY;\n@@ -3684,9 +3710,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.OR);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                ra |= av.reduceLanes(VectorOperators.OR);\n+                byte v = av.reduceLanes(VectorOperators.OR);\n+                r[i] = v;\n+                ra |= v;\n@@ -3700,0 +3720,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void ORReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = OR_IDENTITY;\n+\n+        Assert.assertEquals((byte) (id | id), id,\n+                            \"OR(OR_IDENTITY, OR_IDENTITY) != OR_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) (id | x), x);\n+                Assert.assertEquals((byte) (x | id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) (id | x), x,\n+                                \"OR(OR_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) (x | id), x,\n+                                \"OR(\" + x + \", OR_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3701,1 +3744,1 @@\n-        byte res = 0;\n+        byte res = OR_IDENTITY;\n@@ -3711,1 +3754,1 @@\n-        byte res = 0;\n+        byte res = OR_IDENTITY;\n@@ -3728,0 +3771,1 @@\n+            ra = OR_IDENTITY;\n@@ -3730,9 +3774,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.OR, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                ra |= av.reduceLanes(VectorOperators.OR, vmask);\n+                byte v = av.reduceLanes(VectorOperators.OR, vmask);\n+                r[i] = v;\n+                ra |= v;\n@@ -3747,1 +3785,1 @@\n-        byte res = 0;\n+        byte res = XOR_IDENTITY;\n@@ -3756,1 +3794,1 @@\n-        byte res = 0;\n+        byte res = XOR_IDENTITY;\n@@ -3771,0 +3809,1 @@\n+            ra = XOR_IDENTITY;\n@@ -3773,9 +3812,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.XOR);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                ra ^= av.reduceLanes(VectorOperators.XOR);\n+                byte v = av.reduceLanes(VectorOperators.XOR);\n+                r[i] = v;\n+                ra ^= v;\n@@ -3789,0 +3822,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void XORReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = XOR_IDENTITY;\n+\n+        Assert.assertEquals((byte) (id ^ id), id,\n+                            \"XOR(XOR_IDENTITY, XOR_IDENTITY) != XOR_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) (id ^ x), x);\n+                Assert.assertEquals((byte) (x ^ id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) (id ^ x), x,\n+                                \"XOR(XOR_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) (x ^ id), x,\n+                                \"XOR(\" + x + \", XOR_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3790,1 +3846,1 @@\n-        byte res = 0;\n+        byte res = XOR_IDENTITY;\n@@ -3800,1 +3856,1 @@\n-        byte res = 0;\n+        byte res = XOR_IDENTITY;\n@@ -3817,0 +3873,1 @@\n+            ra = XOR_IDENTITY;\n@@ -3819,9 +3876,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.XOR, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                ra ^= av.reduceLanes(VectorOperators.XOR, vmask);\n+                byte v = av.reduceLanes(VectorOperators.XOR, vmask);\n+                r[i] = v;\n+                ra ^= v;\n@@ -3836,1 +3887,1 @@\n-        byte res = 0;\n+        byte res = ADD_IDENTITY;\n@@ -3845,1 +3896,1 @@\n-        byte res = 0;\n+        byte res = ADD_IDENTITY;\n@@ -3860,0 +3911,1 @@\n+            ra = ADD_IDENTITY;\n@@ -3862,9 +3914,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD);\n+                byte v = av.reduceLanes(VectorOperators.ADD);\n+                r[i] = v;\n+                ra += v;\n@@ -3878,0 +3924,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void ADDReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = ADD_IDENTITY;\n+\n+        Assert.assertEquals((byte) (id + id), id,\n+                            \"ADD(ADD_IDENTITY, ADD_IDENTITY) != ADD_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) (id + x), x);\n+                Assert.assertEquals((byte) (x + id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) (id + x), x,\n+                                \"ADD(ADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) (x + id), x,\n+                                \"ADD(\" + x + \", ADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3879,1 +3948,1 @@\n-        byte res = 0;\n+        byte res = ADD_IDENTITY;\n@@ -3889,1 +3958,1 @@\n-        byte res = 0;\n+        byte res = ADD_IDENTITY;\n@@ -3906,0 +3975,1 @@\n+            ra = ADD_IDENTITY;\n@@ -3908,9 +3978,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD, vmask);\n+                byte v = av.reduceLanes(VectorOperators.ADD, vmask);\n+                r[i] = v;\n+                ra += v;\n@@ -3925,1 +3989,1 @@\n-        byte res = 1;\n+        byte res = MUL_IDENTITY;\n@@ -3934,1 +3998,1 @@\n-        byte res = 1;\n+        byte res = MUL_IDENTITY;\n@@ -3946,8 +4010,1 @@\n-        byte ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL);\n-            }\n-        }\n+        byte ra = 0;\n@@ -3956,1 +4013,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -3959,1 +4016,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL);\n+                byte v = av.reduceLanes(VectorOperators.MUL);\n+                r[i] = v;\n+                ra *= v;\n@@ -3967,0 +4026,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void MULReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = MUL_IDENTITY;\n+\n+        Assert.assertEquals((byte) (id * id), id,\n+                            \"MUL(MUL_IDENTITY, MUL_IDENTITY) != MUL_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) (id * x), x);\n+                Assert.assertEquals((byte) (x * id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) (id * x), x,\n+                                \"MUL(MUL_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) (x * id), x,\n+                                \"MUL(\" + x + \", MUL_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3968,1 +4050,1 @@\n-        byte res = 1;\n+        byte res = MUL_IDENTITY;\n@@ -3978,1 +4060,1 @@\n-        byte res = 1;\n+        byte res = MUL_IDENTITY;\n@@ -3992,8 +4074,1 @@\n-        byte ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL, vmask);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4002,1 +4077,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -4005,1 +4080,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL, vmask);\n+                byte v = av.reduceLanes(VectorOperators.MUL, vmask);\n+                r[i] = v;\n+                ra *= v;\n@@ -4014,1 +4091,1 @@\n-        byte res = Byte.MAX_VALUE;\n+        byte res = MIN_IDENTITY;\n@@ -4023,1 +4100,1 @@\n-        byte res = Byte.MAX_VALUE;\n+        byte res = MIN_IDENTITY;\n@@ -4035,8 +4112,1 @@\n-        byte ra = Byte.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4045,1 +4115,1 @@\n-            ra = Byte.MAX_VALUE;\n+            ra = MIN_IDENTITY;\n@@ -4048,1 +4118,3 @@\n-                ra = (byte) Math.min(ra, av.reduceLanes(VectorOperators.MIN));\n+                byte v = av.reduceLanes(VectorOperators.MIN);\n+                r[i] = v;\n+                ra = (byte) Math.min(ra, v);\n@@ -4056,0 +4128,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void MINReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = MIN_IDENTITY;\n+\n+        Assert.assertEquals((byte) Math.min(id, id), id,\n+                            \"MIN(MIN_IDENTITY, MIN_IDENTITY) != MIN_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) Math.min(id, x), x);\n+                Assert.assertEquals((byte) Math.min(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) Math.min(id, x), x,\n+                                \"MIN(MIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) Math.min(x, id), x,\n+                                \"MIN(\" + x + \", MIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4057,1 +4152,1 @@\n-        byte res = Byte.MAX_VALUE;\n+        byte res = MIN_IDENTITY;\n@@ -4067,1 +4162,1 @@\n-        byte res = Byte.MAX_VALUE;\n+        byte res = MIN_IDENTITY;\n@@ -4081,8 +4176,1 @@\n-        byte ra = Byte.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN, vmask);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4091,1 +4179,1 @@\n-            ra = Byte.MAX_VALUE;\n+            ra = MIN_IDENTITY;\n@@ -4094,1 +4182,3 @@\n-                ra = (byte) Math.min(ra, av.reduceLanes(VectorOperators.MIN, vmask));\n+                byte v = av.reduceLanes(VectorOperators.MIN, vmask);\n+                r[i] = v;\n+                ra = (byte) Math.min(ra, v);\n@@ -4103,1 +4193,1 @@\n-        byte res = Byte.MIN_VALUE;\n+        byte res = MAX_IDENTITY;\n@@ -4112,1 +4202,1 @@\n-        byte res = Byte.MIN_VALUE;\n+        byte res = MAX_IDENTITY;\n@@ -4124,8 +4214,1 @@\n-        byte ra = Byte.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4134,1 +4217,1 @@\n-            ra = Byte.MIN_VALUE;\n+            ra = MAX_IDENTITY;\n@@ -4137,1 +4220,3 @@\n-                ra = (byte) Math.max(ra, av.reduceLanes(VectorOperators.MAX));\n+                byte v = av.reduceLanes(VectorOperators.MAX);\n+                r[i] = v;\n+                ra = (byte) Math.max(ra, v);\n@@ -4145,0 +4230,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void MAXReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = MAX_IDENTITY;\n+\n+        Assert.assertEquals((byte) Math.max(id, id), id,\n+                            \"MAX(MAX_IDENTITY, MAX_IDENTITY) != MAX_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) Math.max(id, x), x);\n+                Assert.assertEquals((byte) Math.max(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) Math.max(id, x), x,\n+                                \"MAX(MAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) Math.max(x, id), x,\n+                                \"MAX(\" + x + \", MAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4146,1 +4254,1 @@\n-        byte res = Byte.MIN_VALUE;\n+        byte res = MAX_IDENTITY;\n@@ -4156,1 +4264,1 @@\n-        byte res = Byte.MIN_VALUE;\n+        byte res = MAX_IDENTITY;\n@@ -4170,8 +4278,1 @@\n-        byte ra = Byte.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX, vmask);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4180,1 +4281,1 @@\n-            ra = Byte.MIN_VALUE;\n+            ra = MAX_IDENTITY;\n@@ -4183,1 +4284,3 @@\n-                ra = (byte) Math.max(ra, av.reduceLanes(VectorOperators.MAX, vmask));\n+                byte v = av.reduceLanes(VectorOperators.MAX, vmask);\n+                r[i] = v;\n+                ra = (byte) Math.max(ra, v);\n@@ -4192,1 +4295,1 @@\n-        byte res = Byte.MAX_VALUE;\n+        byte res = UMIN_IDENTITY;\n@@ -4201,1 +4304,1 @@\n-        byte res = Byte.MAX_VALUE;\n+        byte res = UMIN_IDENTITY;\n@@ -4213,8 +4316,1 @@\n-        byte ra = Byte.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMIN);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4223,1 +4319,1 @@\n-            ra = Byte.MAX_VALUE;\n+            ra = UMIN_IDENTITY;\n@@ -4226,1 +4322,3 @@\n-                ra = (byte) VectorMath.minUnsigned(ra, av.reduceLanes(VectorOperators.UMIN));\n+                byte v = av.reduceLanes(VectorOperators.UMIN);\n+                r[i] = v;\n+                ra = (byte) VectorMath.minUnsigned(ra, v);\n@@ -4234,0 +4332,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void UMINReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = UMIN_IDENTITY;\n+\n+        Assert.assertEquals((byte) VectorMath.minUnsigned(id, id), id,\n+                            \"UMIN(UMIN_IDENTITY, UMIN_IDENTITY) != UMIN_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) VectorMath.minUnsigned(id, x), x);\n+                Assert.assertEquals((byte) VectorMath.minUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) VectorMath.minUnsigned(id, x), x,\n+                                \"UMIN(UMIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) VectorMath.minUnsigned(x, id), x,\n+                                \"UMIN(\" + x + \", UMIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4235,1 +4356,1 @@\n-        byte res = Byte.MAX_VALUE;\n+        byte res = UMIN_IDENTITY;\n@@ -4245,1 +4366,1 @@\n-        byte res = Byte.MAX_VALUE;\n+        byte res = UMIN_IDENTITY;\n@@ -4259,8 +4380,1 @@\n-        byte ra = Byte.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMIN, vmask);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4269,1 +4383,1 @@\n-            ra = Byte.MAX_VALUE;\n+            ra = UMIN_IDENTITY;\n@@ -4272,1 +4386,3 @@\n-                ra = (byte) VectorMath.minUnsigned(ra, av.reduceLanes(VectorOperators.UMIN, vmask));\n+                byte v = av.reduceLanes(VectorOperators.UMIN, vmask);\n+                r[i] = v;\n+                ra = (byte) VectorMath.minUnsigned(ra, v);\n@@ -4281,1 +4397,1 @@\n-        byte res = Byte.MIN_VALUE;\n+        byte res = UMAX_IDENTITY;\n@@ -4290,1 +4406,1 @@\n-        byte res = Byte.MIN_VALUE;\n+        byte res = UMAX_IDENTITY;\n@@ -4302,8 +4418,1 @@\n-        byte ra = Byte.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMAX);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4312,1 +4421,1 @@\n-            ra = Byte.MIN_VALUE;\n+            ra = UMAX_IDENTITY;\n@@ -4315,1 +4424,3 @@\n-                ra = (byte) VectorMath.maxUnsigned(ra, av.reduceLanes(VectorOperators.UMAX));\n+                byte v = av.reduceLanes(VectorOperators.UMAX);\n+                r[i] = v;\n+                ra = (byte) VectorMath.maxUnsigned(ra, v);\n@@ -4323,0 +4434,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void UMAXReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = UMAX_IDENTITY;\n+\n+        Assert.assertEquals((byte) VectorMath.maxUnsigned(id, id), id,\n+                            \"UMAX(UMAX_IDENTITY, UMAX_IDENTITY) != UMAX_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) VectorMath.maxUnsigned(id, x), x);\n+                Assert.assertEquals((byte) VectorMath.maxUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) VectorMath.maxUnsigned(id, x), x,\n+                                \"UMAX(UMAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) VectorMath.maxUnsigned(x, id), x,\n+                                \"UMAX(\" + x + \", UMAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4324,1 +4458,1 @@\n-        byte res = Byte.MIN_VALUE;\n+        byte res = UMAX_IDENTITY;\n@@ -4334,1 +4468,1 @@\n-        byte res = Byte.MIN_VALUE;\n+        byte res = UMAX_IDENTITY;\n@@ -4348,8 +4482,1 @@\n-        byte ra = Byte.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMAX, vmask);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4358,1 +4485,1 @@\n-            ra = Byte.MIN_VALUE;\n+            ra = UMAX_IDENTITY;\n@@ -4361,1 +4488,3 @@\n-                ra = (byte) VectorMath.maxUnsigned(ra, av.reduceLanes(VectorOperators.UMAX, vmask));\n+                byte v = av.reduceLanes(VectorOperators.UMAX, vmask);\n+                r[i] = v;\n+                ra = (byte) VectorMath.maxUnsigned(ra, v);\n@@ -4370,1 +4499,1 @@\n-        byte res = (byte) 0;\n+        byte res = FIRST_NONZERO_IDENTITY;\n@@ -4379,1 +4508,1 @@\n-        byte res = (byte) 0;\n+        byte res = FIRST_NONZERO_IDENTITY;\n@@ -4391,8 +4520,1 @@\n-        byte ra = (byte) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4401,1 +4523,1 @@\n-            ra = (byte) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -4404,1 +4526,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO));\n+                byte v = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -4412,0 +4536,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void FIRST_NONZEROReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = FIRST_NONZERO_IDENTITY;\n+\n+        Assert.assertEquals(firstNonZero(id, id), id,\n+                            \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, FIRST_NONZERO_IDENTITY) != FIRST_NONZERO_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals(firstNonZero(id, x), x);\n+                Assert.assertEquals(firstNonZero(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals(firstNonZero(id, x), x,\n+                                \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals(firstNonZero(x, id), x,\n+                                \"FIRST_NONZERO(\" + x + \", FIRST_NONZERO_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4413,1 +4560,1 @@\n-        byte res = (byte) 0;\n+        byte res = FIRST_NONZERO_IDENTITY;\n@@ -4423,1 +4570,1 @@\n-        byte res = (byte) 0;\n+        byte res = FIRST_NONZERO_IDENTITY;\n@@ -4437,8 +4584,1 @@\n-        byte ra = (byte) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4447,1 +4587,1 @@\n-            ra = (byte) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -4450,1 +4590,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask));\n+                byte v = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -4507,1 +4649,1 @@\n-        byte res = 0;\n+        byte res = SUADD_IDENTITY;\n@@ -4516,1 +4658,1 @@\n-        byte res = 0;\n+        byte res = SUADD_IDENTITY;\n@@ -4531,0 +4673,1 @@\n+            ra = SUADD_IDENTITY;\n@@ -4533,9 +4676,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.SUADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                ra = (byte) VectorMath.addSaturatingUnsigned(ra, av.reduceLanes(VectorOperators.SUADD));\n+                byte v = av.reduceLanes(VectorOperators.SUADD);\n+                r[i] = v;\n+                ra = (byte) VectorMath.addSaturatingUnsigned(ra, v);\n@@ -4549,0 +4686,23 @@\n+    @Test(dataProvider = \"byteSaturatingUnaryOpProvider\")\n+    static void SUADDReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = SUADD_IDENTITY;\n+\n+        Assert.assertEquals((byte) VectorMath.addSaturatingUnsigned(id, id), id,\n+                            \"SUADD(SUADD_IDENTITY, SUADD_IDENTITY) != SUADD_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) VectorMath.addSaturatingUnsigned(id, x), x);\n+                Assert.assertEquals((byte) VectorMath.addSaturatingUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) VectorMath.addSaturatingUnsigned(id, x), x,\n+                                \"SUADD(SUADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) VectorMath.addSaturatingUnsigned(x, id), x,\n+                                \"SUADD(\" + x + \", SUADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4550,1 +4710,1 @@\n-        byte res = 0;\n+        byte res = SUADD_IDENTITY;\n@@ -4560,1 +4720,1 @@\n-        byte res = 0;\n+        byte res = SUADD_IDENTITY;\n@@ -4576,0 +4736,1 @@\n+            ra = SUADD_IDENTITY;\n@@ -4578,9 +4739,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.SUADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                ra = (byte) VectorMath.addSaturatingUnsigned(ra, av.reduceLanes(VectorOperators.SUADD, vmask));\n+                byte v = av.reduceLanes(VectorOperators.SUADD, vmask);\n+                r[i] = v;\n+                ra = (byte) VectorMath.addSaturatingUnsigned(ra, v);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/Byte256VectorTests.java","additions":413,"deletions":258,"binary":false,"changes":671,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -66,1 +66,0 @@\n-\n@@ -69,0 +68,13 @@\n+    \/\/ Identity values for reduction operations\n+    private static final byte ADD_IDENTITY = (byte)0;\n+    private static final byte AND_IDENTITY = (byte)-1;\n+    private static final byte FIRST_NONZERO_IDENTITY = (byte)0;\n+    private static final byte MAX_IDENTITY = Byte.MIN_VALUE;\n+    private static final byte MIN_IDENTITY = Byte.MAX_VALUE;\n+    private static final byte MUL_IDENTITY = (byte)1;\n+    private static final byte OR_IDENTITY = (byte)0;\n+    private static final byte SUADD_IDENTITY = (byte)0;\n+    private static final byte UMAX_IDENTITY = (byte)0;   \/\/ Minimum unsigned value\n+    private static final byte UMIN_IDENTITY = (byte)-1;  \/\/ Maximum unsigned value\n+    private static final byte XOR_IDENTITY = (byte)0;\n+\n@@ -3569,1 +3581,1 @@\n-        byte res = -1;\n+        byte res = AND_IDENTITY;\n@@ -3578,1 +3590,1 @@\n-        byte res = -1;\n+        byte res = AND_IDENTITY;\n@@ -3590,8 +3602,1 @@\n-        byte ra = -1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.AND);\n-            }\n-        }\n+        byte ra = 0;\n@@ -3600,1 +3605,1 @@\n-            ra = -1;\n+            ra = AND_IDENTITY;\n@@ -3603,1 +3608,3 @@\n-                ra &= av.reduceLanes(VectorOperators.AND);\n+                byte v = av.reduceLanes(VectorOperators.AND);\n+                r[i] = v;\n+                ra &= v;\n@@ -3611,0 +3618,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void ANDReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = AND_IDENTITY;\n+\n+        Assert.assertEquals((byte) (id & id), id,\n+                            \"AND(AND_IDENTITY, AND_IDENTITY) != AND_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) (id & x), x);\n+                Assert.assertEquals((byte) (x & id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) (id & x), x,\n+                                \"AND(AND_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) (x & id), x,\n+                                \"AND(\" + x + \", AND_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3612,1 +3642,1 @@\n-        byte res = -1;\n+        byte res = AND_IDENTITY;\n@@ -3622,1 +3652,1 @@\n-        byte res = -1;\n+        byte res = AND_IDENTITY;\n@@ -3636,8 +3666,1 @@\n-        byte ra = -1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.AND, vmask);\n-            }\n-        }\n+        byte ra = 0;\n@@ -3646,1 +3669,1 @@\n-            ra = -1;\n+            ra = AND_IDENTITY;\n@@ -3649,1 +3672,3 @@\n-                ra &= av.reduceLanes(VectorOperators.AND, vmask);\n+                byte v = av.reduceLanes(VectorOperators.AND, vmask);\n+                r[i] = v;\n+                ra &= v;\n@@ -3658,1 +3683,1 @@\n-        byte res = 0;\n+        byte res = OR_IDENTITY;\n@@ -3667,1 +3692,1 @@\n-        byte res = 0;\n+        byte res = OR_IDENTITY;\n@@ -3682,0 +3707,1 @@\n+            ra = OR_IDENTITY;\n@@ -3684,9 +3710,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.OR);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                ra |= av.reduceLanes(VectorOperators.OR);\n+                byte v = av.reduceLanes(VectorOperators.OR);\n+                r[i] = v;\n+                ra |= v;\n@@ -3700,0 +3720,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void ORReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = OR_IDENTITY;\n+\n+        Assert.assertEquals((byte) (id | id), id,\n+                            \"OR(OR_IDENTITY, OR_IDENTITY) != OR_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) (id | x), x);\n+                Assert.assertEquals((byte) (x | id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) (id | x), x,\n+                                \"OR(OR_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) (x | id), x,\n+                                \"OR(\" + x + \", OR_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3701,1 +3744,1 @@\n-        byte res = 0;\n+        byte res = OR_IDENTITY;\n@@ -3711,1 +3754,1 @@\n-        byte res = 0;\n+        byte res = OR_IDENTITY;\n@@ -3728,0 +3771,1 @@\n+            ra = OR_IDENTITY;\n@@ -3730,9 +3774,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.OR, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                ra |= av.reduceLanes(VectorOperators.OR, vmask);\n+                byte v = av.reduceLanes(VectorOperators.OR, vmask);\n+                r[i] = v;\n+                ra |= v;\n@@ -3747,1 +3785,1 @@\n-        byte res = 0;\n+        byte res = XOR_IDENTITY;\n@@ -3756,1 +3794,1 @@\n-        byte res = 0;\n+        byte res = XOR_IDENTITY;\n@@ -3771,0 +3809,1 @@\n+            ra = XOR_IDENTITY;\n@@ -3773,9 +3812,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.XOR);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                ra ^= av.reduceLanes(VectorOperators.XOR);\n+                byte v = av.reduceLanes(VectorOperators.XOR);\n+                r[i] = v;\n+                ra ^= v;\n@@ -3789,0 +3822,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void XORReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = XOR_IDENTITY;\n+\n+        Assert.assertEquals((byte) (id ^ id), id,\n+                            \"XOR(XOR_IDENTITY, XOR_IDENTITY) != XOR_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) (id ^ x), x);\n+                Assert.assertEquals((byte) (x ^ id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) (id ^ x), x,\n+                                \"XOR(XOR_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) (x ^ id), x,\n+                                \"XOR(\" + x + \", XOR_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3790,1 +3846,1 @@\n-        byte res = 0;\n+        byte res = XOR_IDENTITY;\n@@ -3800,1 +3856,1 @@\n-        byte res = 0;\n+        byte res = XOR_IDENTITY;\n@@ -3817,0 +3873,1 @@\n+            ra = XOR_IDENTITY;\n@@ -3819,9 +3876,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.XOR, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                ra ^= av.reduceLanes(VectorOperators.XOR, vmask);\n+                byte v = av.reduceLanes(VectorOperators.XOR, vmask);\n+                r[i] = v;\n+                ra ^= v;\n@@ -3836,1 +3887,1 @@\n-        byte res = 0;\n+        byte res = ADD_IDENTITY;\n@@ -3845,1 +3896,1 @@\n-        byte res = 0;\n+        byte res = ADD_IDENTITY;\n@@ -3860,0 +3911,1 @@\n+            ra = ADD_IDENTITY;\n@@ -3862,9 +3914,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD);\n+                byte v = av.reduceLanes(VectorOperators.ADD);\n+                r[i] = v;\n+                ra += v;\n@@ -3878,0 +3924,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void ADDReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = ADD_IDENTITY;\n+\n+        Assert.assertEquals((byte) (id + id), id,\n+                            \"ADD(ADD_IDENTITY, ADD_IDENTITY) != ADD_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) (id + x), x);\n+                Assert.assertEquals((byte) (x + id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) (id + x), x,\n+                                \"ADD(ADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) (x + id), x,\n+                                \"ADD(\" + x + \", ADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3879,1 +3948,1 @@\n-        byte res = 0;\n+        byte res = ADD_IDENTITY;\n@@ -3889,1 +3958,1 @@\n-        byte res = 0;\n+        byte res = ADD_IDENTITY;\n@@ -3906,0 +3975,1 @@\n+            ra = ADD_IDENTITY;\n@@ -3908,9 +3978,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD, vmask);\n+                byte v = av.reduceLanes(VectorOperators.ADD, vmask);\n+                r[i] = v;\n+                ra += v;\n@@ -3925,1 +3989,1 @@\n-        byte res = 1;\n+        byte res = MUL_IDENTITY;\n@@ -3934,1 +3998,1 @@\n-        byte res = 1;\n+        byte res = MUL_IDENTITY;\n@@ -3946,8 +4010,1 @@\n-        byte ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL);\n-            }\n-        }\n+        byte ra = 0;\n@@ -3956,1 +4013,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -3959,1 +4016,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL);\n+                byte v = av.reduceLanes(VectorOperators.MUL);\n+                r[i] = v;\n+                ra *= v;\n@@ -3967,0 +4026,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void MULReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = MUL_IDENTITY;\n+\n+        Assert.assertEquals((byte) (id * id), id,\n+                            \"MUL(MUL_IDENTITY, MUL_IDENTITY) != MUL_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) (id * x), x);\n+                Assert.assertEquals((byte) (x * id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) (id * x), x,\n+                                \"MUL(MUL_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) (x * id), x,\n+                                \"MUL(\" + x + \", MUL_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3968,1 +4050,1 @@\n-        byte res = 1;\n+        byte res = MUL_IDENTITY;\n@@ -3978,1 +4060,1 @@\n-        byte res = 1;\n+        byte res = MUL_IDENTITY;\n@@ -3992,8 +4074,1 @@\n-        byte ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL, vmask);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4002,1 +4077,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -4005,1 +4080,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL, vmask);\n+                byte v = av.reduceLanes(VectorOperators.MUL, vmask);\n+                r[i] = v;\n+                ra *= v;\n@@ -4014,1 +4091,1 @@\n-        byte res = Byte.MAX_VALUE;\n+        byte res = MIN_IDENTITY;\n@@ -4023,1 +4100,1 @@\n-        byte res = Byte.MAX_VALUE;\n+        byte res = MIN_IDENTITY;\n@@ -4035,8 +4112,1 @@\n-        byte ra = Byte.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4045,1 +4115,1 @@\n-            ra = Byte.MAX_VALUE;\n+            ra = MIN_IDENTITY;\n@@ -4048,1 +4118,3 @@\n-                ra = (byte) Math.min(ra, av.reduceLanes(VectorOperators.MIN));\n+                byte v = av.reduceLanes(VectorOperators.MIN);\n+                r[i] = v;\n+                ra = (byte) Math.min(ra, v);\n@@ -4056,0 +4128,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void MINReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = MIN_IDENTITY;\n+\n+        Assert.assertEquals((byte) Math.min(id, id), id,\n+                            \"MIN(MIN_IDENTITY, MIN_IDENTITY) != MIN_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) Math.min(id, x), x);\n+                Assert.assertEquals((byte) Math.min(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) Math.min(id, x), x,\n+                                \"MIN(MIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) Math.min(x, id), x,\n+                                \"MIN(\" + x + \", MIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4057,1 +4152,1 @@\n-        byte res = Byte.MAX_VALUE;\n+        byte res = MIN_IDENTITY;\n@@ -4067,1 +4162,1 @@\n-        byte res = Byte.MAX_VALUE;\n+        byte res = MIN_IDENTITY;\n@@ -4081,8 +4176,1 @@\n-        byte ra = Byte.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN, vmask);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4091,1 +4179,1 @@\n-            ra = Byte.MAX_VALUE;\n+            ra = MIN_IDENTITY;\n@@ -4094,1 +4182,3 @@\n-                ra = (byte) Math.min(ra, av.reduceLanes(VectorOperators.MIN, vmask));\n+                byte v = av.reduceLanes(VectorOperators.MIN, vmask);\n+                r[i] = v;\n+                ra = (byte) Math.min(ra, v);\n@@ -4103,1 +4193,1 @@\n-        byte res = Byte.MIN_VALUE;\n+        byte res = MAX_IDENTITY;\n@@ -4112,1 +4202,1 @@\n-        byte res = Byte.MIN_VALUE;\n+        byte res = MAX_IDENTITY;\n@@ -4124,8 +4214,1 @@\n-        byte ra = Byte.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4134,1 +4217,1 @@\n-            ra = Byte.MIN_VALUE;\n+            ra = MAX_IDENTITY;\n@@ -4137,1 +4220,3 @@\n-                ra = (byte) Math.max(ra, av.reduceLanes(VectorOperators.MAX));\n+                byte v = av.reduceLanes(VectorOperators.MAX);\n+                r[i] = v;\n+                ra = (byte) Math.max(ra, v);\n@@ -4145,0 +4230,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void MAXReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = MAX_IDENTITY;\n+\n+        Assert.assertEquals((byte) Math.max(id, id), id,\n+                            \"MAX(MAX_IDENTITY, MAX_IDENTITY) != MAX_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) Math.max(id, x), x);\n+                Assert.assertEquals((byte) Math.max(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) Math.max(id, x), x,\n+                                \"MAX(MAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) Math.max(x, id), x,\n+                                \"MAX(\" + x + \", MAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4146,1 +4254,1 @@\n-        byte res = Byte.MIN_VALUE;\n+        byte res = MAX_IDENTITY;\n@@ -4156,1 +4264,1 @@\n-        byte res = Byte.MIN_VALUE;\n+        byte res = MAX_IDENTITY;\n@@ -4170,8 +4278,1 @@\n-        byte ra = Byte.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX, vmask);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4180,1 +4281,1 @@\n-            ra = Byte.MIN_VALUE;\n+            ra = MAX_IDENTITY;\n@@ -4183,1 +4284,3 @@\n-                ra = (byte) Math.max(ra, av.reduceLanes(VectorOperators.MAX, vmask));\n+                byte v = av.reduceLanes(VectorOperators.MAX, vmask);\n+                r[i] = v;\n+                ra = (byte) Math.max(ra, v);\n@@ -4192,1 +4295,1 @@\n-        byte res = Byte.MAX_VALUE;\n+        byte res = UMIN_IDENTITY;\n@@ -4201,1 +4304,1 @@\n-        byte res = Byte.MAX_VALUE;\n+        byte res = UMIN_IDENTITY;\n@@ -4213,8 +4316,1 @@\n-        byte ra = Byte.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMIN);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4223,1 +4319,1 @@\n-            ra = Byte.MAX_VALUE;\n+            ra = UMIN_IDENTITY;\n@@ -4226,1 +4322,3 @@\n-                ra = (byte) VectorMath.minUnsigned(ra, av.reduceLanes(VectorOperators.UMIN));\n+                byte v = av.reduceLanes(VectorOperators.UMIN);\n+                r[i] = v;\n+                ra = (byte) VectorMath.minUnsigned(ra, v);\n@@ -4234,0 +4332,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void UMINReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = UMIN_IDENTITY;\n+\n+        Assert.assertEquals((byte) VectorMath.minUnsigned(id, id), id,\n+                            \"UMIN(UMIN_IDENTITY, UMIN_IDENTITY) != UMIN_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) VectorMath.minUnsigned(id, x), x);\n+                Assert.assertEquals((byte) VectorMath.minUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) VectorMath.minUnsigned(id, x), x,\n+                                \"UMIN(UMIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) VectorMath.minUnsigned(x, id), x,\n+                                \"UMIN(\" + x + \", UMIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4235,1 +4356,1 @@\n-        byte res = Byte.MAX_VALUE;\n+        byte res = UMIN_IDENTITY;\n@@ -4245,1 +4366,1 @@\n-        byte res = Byte.MAX_VALUE;\n+        byte res = UMIN_IDENTITY;\n@@ -4259,8 +4380,1 @@\n-        byte ra = Byte.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMIN, vmask);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4269,1 +4383,1 @@\n-            ra = Byte.MAX_VALUE;\n+            ra = UMIN_IDENTITY;\n@@ -4272,1 +4386,3 @@\n-                ra = (byte) VectorMath.minUnsigned(ra, av.reduceLanes(VectorOperators.UMIN, vmask));\n+                byte v = av.reduceLanes(VectorOperators.UMIN, vmask);\n+                r[i] = v;\n+                ra = (byte) VectorMath.minUnsigned(ra, v);\n@@ -4281,1 +4397,1 @@\n-        byte res = Byte.MIN_VALUE;\n+        byte res = UMAX_IDENTITY;\n@@ -4290,1 +4406,1 @@\n-        byte res = Byte.MIN_VALUE;\n+        byte res = UMAX_IDENTITY;\n@@ -4302,8 +4418,1 @@\n-        byte ra = Byte.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMAX);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4312,1 +4421,1 @@\n-            ra = Byte.MIN_VALUE;\n+            ra = UMAX_IDENTITY;\n@@ -4315,1 +4424,3 @@\n-                ra = (byte) VectorMath.maxUnsigned(ra, av.reduceLanes(VectorOperators.UMAX));\n+                byte v = av.reduceLanes(VectorOperators.UMAX);\n+                r[i] = v;\n+                ra = (byte) VectorMath.maxUnsigned(ra, v);\n@@ -4323,0 +4434,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void UMAXReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = UMAX_IDENTITY;\n+\n+        Assert.assertEquals((byte) VectorMath.maxUnsigned(id, id), id,\n+                            \"UMAX(UMAX_IDENTITY, UMAX_IDENTITY) != UMAX_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) VectorMath.maxUnsigned(id, x), x);\n+                Assert.assertEquals((byte) VectorMath.maxUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) VectorMath.maxUnsigned(id, x), x,\n+                                \"UMAX(UMAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) VectorMath.maxUnsigned(x, id), x,\n+                                \"UMAX(\" + x + \", UMAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4324,1 +4458,1 @@\n-        byte res = Byte.MIN_VALUE;\n+        byte res = UMAX_IDENTITY;\n@@ -4334,1 +4468,1 @@\n-        byte res = Byte.MIN_VALUE;\n+        byte res = UMAX_IDENTITY;\n@@ -4348,8 +4482,1 @@\n-        byte ra = Byte.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMAX, vmask);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4358,1 +4485,1 @@\n-            ra = Byte.MIN_VALUE;\n+            ra = UMAX_IDENTITY;\n@@ -4361,1 +4488,3 @@\n-                ra = (byte) VectorMath.maxUnsigned(ra, av.reduceLanes(VectorOperators.UMAX, vmask));\n+                byte v = av.reduceLanes(VectorOperators.UMAX, vmask);\n+                r[i] = v;\n+                ra = (byte) VectorMath.maxUnsigned(ra, v);\n@@ -4370,1 +4499,1 @@\n-        byte res = (byte) 0;\n+        byte res = FIRST_NONZERO_IDENTITY;\n@@ -4379,1 +4508,1 @@\n-        byte res = (byte) 0;\n+        byte res = FIRST_NONZERO_IDENTITY;\n@@ -4391,8 +4520,1 @@\n-        byte ra = (byte) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4401,1 +4523,1 @@\n-            ra = (byte) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -4404,1 +4526,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO));\n+                byte v = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -4412,0 +4536,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void FIRST_NONZEROReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = FIRST_NONZERO_IDENTITY;\n+\n+        Assert.assertEquals(firstNonZero(id, id), id,\n+                            \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, FIRST_NONZERO_IDENTITY) != FIRST_NONZERO_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals(firstNonZero(id, x), x);\n+                Assert.assertEquals(firstNonZero(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals(firstNonZero(id, x), x,\n+                                \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals(firstNonZero(x, id), x,\n+                                \"FIRST_NONZERO(\" + x + \", FIRST_NONZERO_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4413,1 +4560,1 @@\n-        byte res = (byte) 0;\n+        byte res = FIRST_NONZERO_IDENTITY;\n@@ -4423,1 +4570,1 @@\n-        byte res = (byte) 0;\n+        byte res = FIRST_NONZERO_IDENTITY;\n@@ -4437,8 +4584,1 @@\n-        byte ra = (byte) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4447,1 +4587,1 @@\n-            ra = (byte) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -4450,1 +4590,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask));\n+                byte v = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -4507,1 +4649,1 @@\n-        byte res = 0;\n+        byte res = SUADD_IDENTITY;\n@@ -4516,1 +4658,1 @@\n-        byte res = 0;\n+        byte res = SUADD_IDENTITY;\n@@ -4531,0 +4673,1 @@\n+            ra = SUADD_IDENTITY;\n@@ -4533,9 +4676,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.SUADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                ra = (byte) VectorMath.addSaturatingUnsigned(ra, av.reduceLanes(VectorOperators.SUADD));\n+                byte v = av.reduceLanes(VectorOperators.SUADD);\n+                r[i] = v;\n+                ra = (byte) VectorMath.addSaturatingUnsigned(ra, v);\n@@ -4549,0 +4686,23 @@\n+    @Test(dataProvider = \"byteSaturatingUnaryOpProvider\")\n+    static void SUADDReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = SUADD_IDENTITY;\n+\n+        Assert.assertEquals((byte) VectorMath.addSaturatingUnsigned(id, id), id,\n+                            \"SUADD(SUADD_IDENTITY, SUADD_IDENTITY) != SUADD_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) VectorMath.addSaturatingUnsigned(id, x), x);\n+                Assert.assertEquals((byte) VectorMath.addSaturatingUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) VectorMath.addSaturatingUnsigned(id, x), x,\n+                                \"SUADD(SUADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) VectorMath.addSaturatingUnsigned(x, id), x,\n+                                \"SUADD(\" + x + \", SUADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4550,1 +4710,1 @@\n-        byte res = 0;\n+        byte res = SUADD_IDENTITY;\n@@ -4560,1 +4720,1 @@\n-        byte res = 0;\n+        byte res = SUADD_IDENTITY;\n@@ -4576,0 +4736,1 @@\n+            ra = SUADD_IDENTITY;\n@@ -4578,9 +4739,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.SUADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                ra = (byte) VectorMath.addSaturatingUnsigned(ra, av.reduceLanes(VectorOperators.SUADD, vmask));\n+                byte v = av.reduceLanes(VectorOperators.SUADD, vmask);\n+                r[i] = v;\n+                ra = (byte) VectorMath.addSaturatingUnsigned(ra, v);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/Byte512VectorTests.java","additions":413,"deletions":258,"binary":false,"changes":671,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -66,1 +66,0 @@\n-\n@@ -69,0 +68,13 @@\n+    \/\/ Identity values for reduction operations\n+    private static final byte ADD_IDENTITY = (byte)0;\n+    private static final byte AND_IDENTITY = (byte)-1;\n+    private static final byte FIRST_NONZERO_IDENTITY = (byte)0;\n+    private static final byte MAX_IDENTITY = Byte.MIN_VALUE;\n+    private static final byte MIN_IDENTITY = Byte.MAX_VALUE;\n+    private static final byte MUL_IDENTITY = (byte)1;\n+    private static final byte OR_IDENTITY = (byte)0;\n+    private static final byte SUADD_IDENTITY = (byte)0;\n+    private static final byte UMAX_IDENTITY = (byte)0;   \/\/ Minimum unsigned value\n+    private static final byte UMIN_IDENTITY = (byte)-1;  \/\/ Maximum unsigned value\n+    private static final byte XOR_IDENTITY = (byte)0;\n+\n@@ -3569,1 +3581,1 @@\n-        byte res = -1;\n+        byte res = AND_IDENTITY;\n@@ -3578,1 +3590,1 @@\n-        byte res = -1;\n+        byte res = AND_IDENTITY;\n@@ -3590,8 +3602,1 @@\n-        byte ra = -1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.AND);\n-            }\n-        }\n+        byte ra = 0;\n@@ -3600,1 +3605,1 @@\n-            ra = -1;\n+            ra = AND_IDENTITY;\n@@ -3603,1 +3608,3 @@\n-                ra &= av.reduceLanes(VectorOperators.AND);\n+                byte v = av.reduceLanes(VectorOperators.AND);\n+                r[i] = v;\n+                ra &= v;\n@@ -3611,0 +3618,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void ANDReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = AND_IDENTITY;\n+\n+        Assert.assertEquals((byte) (id & id), id,\n+                            \"AND(AND_IDENTITY, AND_IDENTITY) != AND_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) (id & x), x);\n+                Assert.assertEquals((byte) (x & id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) (id & x), x,\n+                                \"AND(AND_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) (x & id), x,\n+                                \"AND(\" + x + \", AND_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3612,1 +3642,1 @@\n-        byte res = -1;\n+        byte res = AND_IDENTITY;\n@@ -3622,1 +3652,1 @@\n-        byte res = -1;\n+        byte res = AND_IDENTITY;\n@@ -3636,8 +3666,1 @@\n-        byte ra = -1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.AND, vmask);\n-            }\n-        }\n+        byte ra = 0;\n@@ -3646,1 +3669,1 @@\n-            ra = -1;\n+            ra = AND_IDENTITY;\n@@ -3649,1 +3672,3 @@\n-                ra &= av.reduceLanes(VectorOperators.AND, vmask);\n+                byte v = av.reduceLanes(VectorOperators.AND, vmask);\n+                r[i] = v;\n+                ra &= v;\n@@ -3658,1 +3683,1 @@\n-        byte res = 0;\n+        byte res = OR_IDENTITY;\n@@ -3667,1 +3692,1 @@\n-        byte res = 0;\n+        byte res = OR_IDENTITY;\n@@ -3682,0 +3707,1 @@\n+            ra = OR_IDENTITY;\n@@ -3684,9 +3710,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.OR);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                ra |= av.reduceLanes(VectorOperators.OR);\n+                byte v = av.reduceLanes(VectorOperators.OR);\n+                r[i] = v;\n+                ra |= v;\n@@ -3700,0 +3720,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void ORReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = OR_IDENTITY;\n+\n+        Assert.assertEquals((byte) (id | id), id,\n+                            \"OR(OR_IDENTITY, OR_IDENTITY) != OR_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) (id | x), x);\n+                Assert.assertEquals((byte) (x | id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) (id | x), x,\n+                                \"OR(OR_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) (x | id), x,\n+                                \"OR(\" + x + \", OR_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3701,1 +3744,1 @@\n-        byte res = 0;\n+        byte res = OR_IDENTITY;\n@@ -3711,1 +3754,1 @@\n-        byte res = 0;\n+        byte res = OR_IDENTITY;\n@@ -3728,0 +3771,1 @@\n+            ra = OR_IDENTITY;\n@@ -3730,9 +3774,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.OR, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                ra |= av.reduceLanes(VectorOperators.OR, vmask);\n+                byte v = av.reduceLanes(VectorOperators.OR, vmask);\n+                r[i] = v;\n+                ra |= v;\n@@ -3747,1 +3785,1 @@\n-        byte res = 0;\n+        byte res = XOR_IDENTITY;\n@@ -3756,1 +3794,1 @@\n-        byte res = 0;\n+        byte res = XOR_IDENTITY;\n@@ -3771,0 +3809,1 @@\n+            ra = XOR_IDENTITY;\n@@ -3773,9 +3812,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.XOR);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                ra ^= av.reduceLanes(VectorOperators.XOR);\n+                byte v = av.reduceLanes(VectorOperators.XOR);\n+                r[i] = v;\n+                ra ^= v;\n@@ -3789,0 +3822,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void XORReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = XOR_IDENTITY;\n+\n+        Assert.assertEquals((byte) (id ^ id), id,\n+                            \"XOR(XOR_IDENTITY, XOR_IDENTITY) != XOR_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) (id ^ x), x);\n+                Assert.assertEquals((byte) (x ^ id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) (id ^ x), x,\n+                                \"XOR(XOR_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) (x ^ id), x,\n+                                \"XOR(\" + x + \", XOR_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3790,1 +3846,1 @@\n-        byte res = 0;\n+        byte res = XOR_IDENTITY;\n@@ -3800,1 +3856,1 @@\n-        byte res = 0;\n+        byte res = XOR_IDENTITY;\n@@ -3817,0 +3873,1 @@\n+            ra = XOR_IDENTITY;\n@@ -3819,9 +3876,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.XOR, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                ra ^= av.reduceLanes(VectorOperators.XOR, vmask);\n+                byte v = av.reduceLanes(VectorOperators.XOR, vmask);\n+                r[i] = v;\n+                ra ^= v;\n@@ -3836,1 +3887,1 @@\n-        byte res = 0;\n+        byte res = ADD_IDENTITY;\n@@ -3845,1 +3896,1 @@\n-        byte res = 0;\n+        byte res = ADD_IDENTITY;\n@@ -3860,0 +3911,1 @@\n+            ra = ADD_IDENTITY;\n@@ -3862,9 +3914,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD);\n+                byte v = av.reduceLanes(VectorOperators.ADD);\n+                r[i] = v;\n+                ra += v;\n@@ -3878,0 +3924,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void ADDReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = ADD_IDENTITY;\n+\n+        Assert.assertEquals((byte) (id + id), id,\n+                            \"ADD(ADD_IDENTITY, ADD_IDENTITY) != ADD_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) (id + x), x);\n+                Assert.assertEquals((byte) (x + id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) (id + x), x,\n+                                \"ADD(ADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) (x + id), x,\n+                                \"ADD(\" + x + \", ADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3879,1 +3948,1 @@\n-        byte res = 0;\n+        byte res = ADD_IDENTITY;\n@@ -3889,1 +3958,1 @@\n-        byte res = 0;\n+        byte res = ADD_IDENTITY;\n@@ -3906,0 +3975,1 @@\n+            ra = ADD_IDENTITY;\n@@ -3908,9 +3978,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD, vmask);\n+                byte v = av.reduceLanes(VectorOperators.ADD, vmask);\n+                r[i] = v;\n+                ra += v;\n@@ -3925,1 +3989,1 @@\n-        byte res = 1;\n+        byte res = MUL_IDENTITY;\n@@ -3934,1 +3998,1 @@\n-        byte res = 1;\n+        byte res = MUL_IDENTITY;\n@@ -3946,8 +4010,1 @@\n-        byte ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL);\n-            }\n-        }\n+        byte ra = 0;\n@@ -3956,1 +4013,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -3959,1 +4016,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL);\n+                byte v = av.reduceLanes(VectorOperators.MUL);\n+                r[i] = v;\n+                ra *= v;\n@@ -3967,0 +4026,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void MULReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = MUL_IDENTITY;\n+\n+        Assert.assertEquals((byte) (id * id), id,\n+                            \"MUL(MUL_IDENTITY, MUL_IDENTITY) != MUL_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) (id * x), x);\n+                Assert.assertEquals((byte) (x * id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) (id * x), x,\n+                                \"MUL(MUL_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) (x * id), x,\n+                                \"MUL(\" + x + \", MUL_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3968,1 +4050,1 @@\n-        byte res = 1;\n+        byte res = MUL_IDENTITY;\n@@ -3978,1 +4060,1 @@\n-        byte res = 1;\n+        byte res = MUL_IDENTITY;\n@@ -3992,8 +4074,1 @@\n-        byte ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL, vmask);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4002,1 +4077,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -4005,1 +4080,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL, vmask);\n+                byte v = av.reduceLanes(VectorOperators.MUL, vmask);\n+                r[i] = v;\n+                ra *= v;\n@@ -4014,1 +4091,1 @@\n-        byte res = Byte.MAX_VALUE;\n+        byte res = MIN_IDENTITY;\n@@ -4023,1 +4100,1 @@\n-        byte res = Byte.MAX_VALUE;\n+        byte res = MIN_IDENTITY;\n@@ -4035,8 +4112,1 @@\n-        byte ra = Byte.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4045,1 +4115,1 @@\n-            ra = Byte.MAX_VALUE;\n+            ra = MIN_IDENTITY;\n@@ -4048,1 +4118,3 @@\n-                ra = (byte) Math.min(ra, av.reduceLanes(VectorOperators.MIN));\n+                byte v = av.reduceLanes(VectorOperators.MIN);\n+                r[i] = v;\n+                ra = (byte) Math.min(ra, v);\n@@ -4056,0 +4128,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void MINReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = MIN_IDENTITY;\n+\n+        Assert.assertEquals((byte) Math.min(id, id), id,\n+                            \"MIN(MIN_IDENTITY, MIN_IDENTITY) != MIN_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) Math.min(id, x), x);\n+                Assert.assertEquals((byte) Math.min(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) Math.min(id, x), x,\n+                                \"MIN(MIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) Math.min(x, id), x,\n+                                \"MIN(\" + x + \", MIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4057,1 +4152,1 @@\n-        byte res = Byte.MAX_VALUE;\n+        byte res = MIN_IDENTITY;\n@@ -4067,1 +4162,1 @@\n-        byte res = Byte.MAX_VALUE;\n+        byte res = MIN_IDENTITY;\n@@ -4081,8 +4176,1 @@\n-        byte ra = Byte.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN, vmask);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4091,1 +4179,1 @@\n-            ra = Byte.MAX_VALUE;\n+            ra = MIN_IDENTITY;\n@@ -4094,1 +4182,3 @@\n-                ra = (byte) Math.min(ra, av.reduceLanes(VectorOperators.MIN, vmask));\n+                byte v = av.reduceLanes(VectorOperators.MIN, vmask);\n+                r[i] = v;\n+                ra = (byte) Math.min(ra, v);\n@@ -4103,1 +4193,1 @@\n-        byte res = Byte.MIN_VALUE;\n+        byte res = MAX_IDENTITY;\n@@ -4112,1 +4202,1 @@\n-        byte res = Byte.MIN_VALUE;\n+        byte res = MAX_IDENTITY;\n@@ -4124,8 +4214,1 @@\n-        byte ra = Byte.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4134,1 +4217,1 @@\n-            ra = Byte.MIN_VALUE;\n+            ra = MAX_IDENTITY;\n@@ -4137,1 +4220,3 @@\n-                ra = (byte) Math.max(ra, av.reduceLanes(VectorOperators.MAX));\n+                byte v = av.reduceLanes(VectorOperators.MAX);\n+                r[i] = v;\n+                ra = (byte) Math.max(ra, v);\n@@ -4145,0 +4230,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void MAXReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = MAX_IDENTITY;\n+\n+        Assert.assertEquals((byte) Math.max(id, id), id,\n+                            \"MAX(MAX_IDENTITY, MAX_IDENTITY) != MAX_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) Math.max(id, x), x);\n+                Assert.assertEquals((byte) Math.max(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) Math.max(id, x), x,\n+                                \"MAX(MAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) Math.max(x, id), x,\n+                                \"MAX(\" + x + \", MAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4146,1 +4254,1 @@\n-        byte res = Byte.MIN_VALUE;\n+        byte res = MAX_IDENTITY;\n@@ -4156,1 +4264,1 @@\n-        byte res = Byte.MIN_VALUE;\n+        byte res = MAX_IDENTITY;\n@@ -4170,8 +4278,1 @@\n-        byte ra = Byte.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX, vmask);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4180,1 +4281,1 @@\n-            ra = Byte.MIN_VALUE;\n+            ra = MAX_IDENTITY;\n@@ -4183,1 +4284,3 @@\n-                ra = (byte) Math.max(ra, av.reduceLanes(VectorOperators.MAX, vmask));\n+                byte v = av.reduceLanes(VectorOperators.MAX, vmask);\n+                r[i] = v;\n+                ra = (byte) Math.max(ra, v);\n@@ -4192,1 +4295,1 @@\n-        byte res = Byte.MAX_VALUE;\n+        byte res = UMIN_IDENTITY;\n@@ -4201,1 +4304,1 @@\n-        byte res = Byte.MAX_VALUE;\n+        byte res = UMIN_IDENTITY;\n@@ -4213,8 +4316,1 @@\n-        byte ra = Byte.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMIN);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4223,1 +4319,1 @@\n-            ra = Byte.MAX_VALUE;\n+            ra = UMIN_IDENTITY;\n@@ -4226,1 +4322,3 @@\n-                ra = (byte) VectorMath.minUnsigned(ra, av.reduceLanes(VectorOperators.UMIN));\n+                byte v = av.reduceLanes(VectorOperators.UMIN);\n+                r[i] = v;\n+                ra = (byte) VectorMath.minUnsigned(ra, v);\n@@ -4234,0 +4332,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void UMINReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = UMIN_IDENTITY;\n+\n+        Assert.assertEquals((byte) VectorMath.minUnsigned(id, id), id,\n+                            \"UMIN(UMIN_IDENTITY, UMIN_IDENTITY) != UMIN_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) VectorMath.minUnsigned(id, x), x);\n+                Assert.assertEquals((byte) VectorMath.minUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) VectorMath.minUnsigned(id, x), x,\n+                                \"UMIN(UMIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) VectorMath.minUnsigned(x, id), x,\n+                                \"UMIN(\" + x + \", UMIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4235,1 +4356,1 @@\n-        byte res = Byte.MAX_VALUE;\n+        byte res = UMIN_IDENTITY;\n@@ -4245,1 +4366,1 @@\n-        byte res = Byte.MAX_VALUE;\n+        byte res = UMIN_IDENTITY;\n@@ -4259,8 +4380,1 @@\n-        byte ra = Byte.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMIN, vmask);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4269,1 +4383,1 @@\n-            ra = Byte.MAX_VALUE;\n+            ra = UMIN_IDENTITY;\n@@ -4272,1 +4386,3 @@\n-                ra = (byte) VectorMath.minUnsigned(ra, av.reduceLanes(VectorOperators.UMIN, vmask));\n+                byte v = av.reduceLanes(VectorOperators.UMIN, vmask);\n+                r[i] = v;\n+                ra = (byte) VectorMath.minUnsigned(ra, v);\n@@ -4281,1 +4397,1 @@\n-        byte res = Byte.MIN_VALUE;\n+        byte res = UMAX_IDENTITY;\n@@ -4290,1 +4406,1 @@\n-        byte res = Byte.MIN_VALUE;\n+        byte res = UMAX_IDENTITY;\n@@ -4302,8 +4418,1 @@\n-        byte ra = Byte.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMAX);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4312,1 +4421,1 @@\n-            ra = Byte.MIN_VALUE;\n+            ra = UMAX_IDENTITY;\n@@ -4315,1 +4424,3 @@\n-                ra = (byte) VectorMath.maxUnsigned(ra, av.reduceLanes(VectorOperators.UMAX));\n+                byte v = av.reduceLanes(VectorOperators.UMAX);\n+                r[i] = v;\n+                ra = (byte) VectorMath.maxUnsigned(ra, v);\n@@ -4323,0 +4434,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void UMAXReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = UMAX_IDENTITY;\n+\n+        Assert.assertEquals((byte) VectorMath.maxUnsigned(id, id), id,\n+                            \"UMAX(UMAX_IDENTITY, UMAX_IDENTITY) != UMAX_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) VectorMath.maxUnsigned(id, x), x);\n+                Assert.assertEquals((byte) VectorMath.maxUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) VectorMath.maxUnsigned(id, x), x,\n+                                \"UMAX(UMAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) VectorMath.maxUnsigned(x, id), x,\n+                                \"UMAX(\" + x + \", UMAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4324,1 +4458,1 @@\n-        byte res = Byte.MIN_VALUE;\n+        byte res = UMAX_IDENTITY;\n@@ -4334,1 +4468,1 @@\n-        byte res = Byte.MIN_VALUE;\n+        byte res = UMAX_IDENTITY;\n@@ -4348,8 +4482,1 @@\n-        byte ra = Byte.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMAX, vmask);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4358,1 +4485,1 @@\n-            ra = Byte.MIN_VALUE;\n+            ra = UMAX_IDENTITY;\n@@ -4361,1 +4488,3 @@\n-                ra = (byte) VectorMath.maxUnsigned(ra, av.reduceLanes(VectorOperators.UMAX, vmask));\n+                byte v = av.reduceLanes(VectorOperators.UMAX, vmask);\n+                r[i] = v;\n+                ra = (byte) VectorMath.maxUnsigned(ra, v);\n@@ -4370,1 +4499,1 @@\n-        byte res = (byte) 0;\n+        byte res = FIRST_NONZERO_IDENTITY;\n@@ -4379,1 +4508,1 @@\n-        byte res = (byte) 0;\n+        byte res = FIRST_NONZERO_IDENTITY;\n@@ -4391,8 +4520,1 @@\n-        byte ra = (byte) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4401,1 +4523,1 @@\n-            ra = (byte) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -4404,1 +4526,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO));\n+                byte v = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -4412,0 +4536,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void FIRST_NONZEROReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = FIRST_NONZERO_IDENTITY;\n+\n+        Assert.assertEquals(firstNonZero(id, id), id,\n+                            \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, FIRST_NONZERO_IDENTITY) != FIRST_NONZERO_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals(firstNonZero(id, x), x);\n+                Assert.assertEquals(firstNonZero(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals(firstNonZero(id, x), x,\n+                                \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals(firstNonZero(x, id), x,\n+                                \"FIRST_NONZERO(\" + x + \", FIRST_NONZERO_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4413,1 +4560,1 @@\n-        byte res = (byte) 0;\n+        byte res = FIRST_NONZERO_IDENTITY;\n@@ -4423,1 +4570,1 @@\n-        byte res = (byte) 0;\n+        byte res = FIRST_NONZERO_IDENTITY;\n@@ -4437,8 +4584,1 @@\n-        byte ra = (byte) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4447,1 +4587,1 @@\n-            ra = (byte) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -4450,1 +4590,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask));\n+                byte v = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -4507,1 +4649,1 @@\n-        byte res = 0;\n+        byte res = SUADD_IDENTITY;\n@@ -4516,1 +4658,1 @@\n-        byte res = 0;\n+        byte res = SUADD_IDENTITY;\n@@ -4531,0 +4673,1 @@\n+            ra = SUADD_IDENTITY;\n@@ -4533,9 +4676,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.SUADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                ra = (byte) VectorMath.addSaturatingUnsigned(ra, av.reduceLanes(VectorOperators.SUADD));\n+                byte v = av.reduceLanes(VectorOperators.SUADD);\n+                r[i] = v;\n+                ra = (byte) VectorMath.addSaturatingUnsigned(ra, v);\n@@ -4549,0 +4686,23 @@\n+    @Test(dataProvider = \"byteSaturatingUnaryOpProvider\")\n+    static void SUADDReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = SUADD_IDENTITY;\n+\n+        Assert.assertEquals((byte) VectorMath.addSaturatingUnsigned(id, id), id,\n+                            \"SUADD(SUADD_IDENTITY, SUADD_IDENTITY) != SUADD_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) VectorMath.addSaturatingUnsigned(id, x), x);\n+                Assert.assertEquals((byte) VectorMath.addSaturatingUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) VectorMath.addSaturatingUnsigned(id, x), x,\n+                                \"SUADD(SUADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) VectorMath.addSaturatingUnsigned(x, id), x,\n+                                \"SUADD(\" + x + \", SUADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4550,1 +4710,1 @@\n-        byte res = 0;\n+        byte res = SUADD_IDENTITY;\n@@ -4560,1 +4720,1 @@\n-        byte res = 0;\n+        byte res = SUADD_IDENTITY;\n@@ -4576,0 +4736,1 @@\n+            ra = SUADD_IDENTITY;\n@@ -4578,9 +4739,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.SUADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                ra = (byte) VectorMath.addSaturatingUnsigned(ra, av.reduceLanes(VectorOperators.SUADD, vmask));\n+                byte v = av.reduceLanes(VectorOperators.SUADD, vmask);\n+                r[i] = v;\n+                ra = (byte) VectorMath.addSaturatingUnsigned(ra, v);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/Byte64VectorTests.java","additions":413,"deletions":258,"binary":false,"changes":671,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -74,0 +74,13 @@\n+    \/\/ Identity values for reduction operations\n+    private static final byte ADD_IDENTITY = (byte)0;\n+    private static final byte AND_IDENTITY = (byte)-1;\n+    private static final byte FIRST_NONZERO_IDENTITY = (byte)0;\n+    private static final byte MAX_IDENTITY = Byte.MIN_VALUE;\n+    private static final byte MIN_IDENTITY = Byte.MAX_VALUE;\n+    private static final byte MUL_IDENTITY = (byte)1;\n+    private static final byte OR_IDENTITY = (byte)0;\n+    private static final byte SUADD_IDENTITY = (byte)0;\n+    private static final byte UMAX_IDENTITY = (byte)0;   \/\/ Minimum unsigned value\n+    private static final byte UMIN_IDENTITY = (byte)-1;  \/\/ Maximum unsigned value\n+    private static final byte XOR_IDENTITY = (byte)0;\n+\n@@ -3574,1 +3587,1 @@\n-        byte res = -1;\n+        byte res = AND_IDENTITY;\n@@ -3583,1 +3596,1 @@\n-        byte res = -1;\n+        byte res = AND_IDENTITY;\n@@ -3595,8 +3608,1 @@\n-        byte ra = -1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.AND);\n-            }\n-        }\n+        byte ra = 0;\n@@ -3605,1 +3611,1 @@\n-            ra = -1;\n+            ra = AND_IDENTITY;\n@@ -3608,1 +3614,3 @@\n-                ra &= av.reduceLanes(VectorOperators.AND);\n+                byte v = av.reduceLanes(VectorOperators.AND);\n+                r[i] = v;\n+                ra &= v;\n@@ -3616,0 +3624,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void ANDReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = AND_IDENTITY;\n+\n+        Assert.assertEquals((byte) (id & id), id,\n+                            \"AND(AND_IDENTITY, AND_IDENTITY) != AND_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) (id & x), x);\n+                Assert.assertEquals((byte) (x & id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) (id & x), x,\n+                                \"AND(AND_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) (x & id), x,\n+                                \"AND(\" + x + \", AND_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3617,1 +3648,1 @@\n-        byte res = -1;\n+        byte res = AND_IDENTITY;\n@@ -3627,1 +3658,1 @@\n-        byte res = -1;\n+        byte res = AND_IDENTITY;\n@@ -3641,8 +3672,1 @@\n-        byte ra = -1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.AND, vmask);\n-            }\n-        }\n+        byte ra = 0;\n@@ -3651,1 +3675,1 @@\n-            ra = -1;\n+            ra = AND_IDENTITY;\n@@ -3654,1 +3678,3 @@\n-                ra &= av.reduceLanes(VectorOperators.AND, vmask);\n+                byte v = av.reduceLanes(VectorOperators.AND, vmask);\n+                r[i] = v;\n+                ra &= v;\n@@ -3663,1 +3689,1 @@\n-        byte res = 0;\n+        byte res = OR_IDENTITY;\n@@ -3672,1 +3698,1 @@\n-        byte res = 0;\n+        byte res = OR_IDENTITY;\n@@ -3687,0 +3713,1 @@\n+            ra = OR_IDENTITY;\n@@ -3689,9 +3716,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.OR);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                ra |= av.reduceLanes(VectorOperators.OR);\n+                byte v = av.reduceLanes(VectorOperators.OR);\n+                r[i] = v;\n+                ra |= v;\n@@ -3705,0 +3726,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void ORReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = OR_IDENTITY;\n+\n+        Assert.assertEquals((byte) (id | id), id,\n+                            \"OR(OR_IDENTITY, OR_IDENTITY) != OR_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) (id | x), x);\n+                Assert.assertEquals((byte) (x | id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) (id | x), x,\n+                                \"OR(OR_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) (x | id), x,\n+                                \"OR(\" + x + \", OR_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3706,1 +3750,1 @@\n-        byte res = 0;\n+        byte res = OR_IDENTITY;\n@@ -3716,1 +3760,1 @@\n-        byte res = 0;\n+        byte res = OR_IDENTITY;\n@@ -3733,0 +3777,1 @@\n+            ra = OR_IDENTITY;\n@@ -3735,9 +3780,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.OR, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                ra |= av.reduceLanes(VectorOperators.OR, vmask);\n+                byte v = av.reduceLanes(VectorOperators.OR, vmask);\n+                r[i] = v;\n+                ra |= v;\n@@ -3752,1 +3791,1 @@\n-        byte res = 0;\n+        byte res = XOR_IDENTITY;\n@@ -3761,1 +3800,1 @@\n-        byte res = 0;\n+        byte res = XOR_IDENTITY;\n@@ -3776,0 +3815,1 @@\n+            ra = XOR_IDENTITY;\n@@ -3778,9 +3818,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.XOR);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                ra ^= av.reduceLanes(VectorOperators.XOR);\n+                byte v = av.reduceLanes(VectorOperators.XOR);\n+                r[i] = v;\n+                ra ^= v;\n@@ -3794,0 +3828,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void XORReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = XOR_IDENTITY;\n+\n+        Assert.assertEquals((byte) (id ^ id), id,\n+                            \"XOR(XOR_IDENTITY, XOR_IDENTITY) != XOR_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) (id ^ x), x);\n+                Assert.assertEquals((byte) (x ^ id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) (id ^ x), x,\n+                                \"XOR(XOR_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) (x ^ id), x,\n+                                \"XOR(\" + x + \", XOR_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3795,1 +3852,1 @@\n-        byte res = 0;\n+        byte res = XOR_IDENTITY;\n@@ -3805,1 +3862,1 @@\n-        byte res = 0;\n+        byte res = XOR_IDENTITY;\n@@ -3822,0 +3879,1 @@\n+            ra = XOR_IDENTITY;\n@@ -3824,9 +3882,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.XOR, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                ra ^= av.reduceLanes(VectorOperators.XOR, vmask);\n+                byte v = av.reduceLanes(VectorOperators.XOR, vmask);\n+                r[i] = v;\n+                ra ^= v;\n@@ -3841,1 +3893,1 @@\n-        byte res = 0;\n+        byte res = ADD_IDENTITY;\n@@ -3850,1 +3902,1 @@\n-        byte res = 0;\n+        byte res = ADD_IDENTITY;\n@@ -3865,0 +3917,1 @@\n+            ra = ADD_IDENTITY;\n@@ -3867,9 +3920,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD);\n+                byte v = av.reduceLanes(VectorOperators.ADD);\n+                r[i] = v;\n+                ra += v;\n@@ -3883,0 +3930,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void ADDReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = ADD_IDENTITY;\n+\n+        Assert.assertEquals((byte) (id + id), id,\n+                            \"ADD(ADD_IDENTITY, ADD_IDENTITY) != ADD_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) (id + x), x);\n+                Assert.assertEquals((byte) (x + id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) (id + x), x,\n+                                \"ADD(ADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) (x + id), x,\n+                                \"ADD(\" + x + \", ADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3884,1 +3954,1 @@\n-        byte res = 0;\n+        byte res = ADD_IDENTITY;\n@@ -3894,1 +3964,1 @@\n-        byte res = 0;\n+        byte res = ADD_IDENTITY;\n@@ -3911,0 +3981,1 @@\n+            ra = ADD_IDENTITY;\n@@ -3913,9 +3984,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD, vmask);\n+                byte v = av.reduceLanes(VectorOperators.ADD, vmask);\n+                r[i] = v;\n+                ra += v;\n@@ -3930,1 +3995,1 @@\n-        byte res = 1;\n+        byte res = MUL_IDENTITY;\n@@ -3939,1 +4004,1 @@\n-        byte res = 1;\n+        byte res = MUL_IDENTITY;\n@@ -3951,8 +4016,1 @@\n-        byte ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL);\n-            }\n-        }\n+        byte ra = 0;\n@@ -3961,1 +4019,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -3964,1 +4022,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL);\n+                byte v = av.reduceLanes(VectorOperators.MUL);\n+                r[i] = v;\n+                ra *= v;\n@@ -3972,0 +4032,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void MULReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = MUL_IDENTITY;\n+\n+        Assert.assertEquals((byte) (id * id), id,\n+                            \"MUL(MUL_IDENTITY, MUL_IDENTITY) != MUL_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) (id * x), x);\n+                Assert.assertEquals((byte) (x * id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) (id * x), x,\n+                                \"MUL(MUL_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) (x * id), x,\n+                                \"MUL(\" + x + \", MUL_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3973,1 +4056,1 @@\n-        byte res = 1;\n+        byte res = MUL_IDENTITY;\n@@ -3983,1 +4066,1 @@\n-        byte res = 1;\n+        byte res = MUL_IDENTITY;\n@@ -3997,8 +4080,1 @@\n-        byte ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL, vmask);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4007,1 +4083,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -4010,1 +4086,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL, vmask);\n+                byte v = av.reduceLanes(VectorOperators.MUL, vmask);\n+                r[i] = v;\n+                ra *= v;\n@@ -4019,1 +4097,1 @@\n-        byte res = Byte.MAX_VALUE;\n+        byte res = MIN_IDENTITY;\n@@ -4028,1 +4106,1 @@\n-        byte res = Byte.MAX_VALUE;\n+        byte res = MIN_IDENTITY;\n@@ -4040,8 +4118,1 @@\n-        byte ra = Byte.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4050,1 +4121,1 @@\n-            ra = Byte.MAX_VALUE;\n+            ra = MIN_IDENTITY;\n@@ -4053,1 +4124,3 @@\n-                ra = (byte) Math.min(ra, av.reduceLanes(VectorOperators.MIN));\n+                byte v = av.reduceLanes(VectorOperators.MIN);\n+                r[i] = v;\n+                ra = (byte) Math.min(ra, v);\n@@ -4061,0 +4134,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void MINReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = MIN_IDENTITY;\n+\n+        Assert.assertEquals((byte) Math.min(id, id), id,\n+                            \"MIN(MIN_IDENTITY, MIN_IDENTITY) != MIN_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) Math.min(id, x), x);\n+                Assert.assertEquals((byte) Math.min(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) Math.min(id, x), x,\n+                                \"MIN(MIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) Math.min(x, id), x,\n+                                \"MIN(\" + x + \", MIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4062,1 +4158,1 @@\n-        byte res = Byte.MAX_VALUE;\n+        byte res = MIN_IDENTITY;\n@@ -4072,1 +4168,1 @@\n-        byte res = Byte.MAX_VALUE;\n+        byte res = MIN_IDENTITY;\n@@ -4086,8 +4182,1 @@\n-        byte ra = Byte.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN, vmask);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4096,1 +4185,1 @@\n-            ra = Byte.MAX_VALUE;\n+            ra = MIN_IDENTITY;\n@@ -4099,1 +4188,3 @@\n-                ra = (byte) Math.min(ra, av.reduceLanes(VectorOperators.MIN, vmask));\n+                byte v = av.reduceLanes(VectorOperators.MIN, vmask);\n+                r[i] = v;\n+                ra = (byte) Math.min(ra, v);\n@@ -4108,1 +4199,1 @@\n-        byte res = Byte.MIN_VALUE;\n+        byte res = MAX_IDENTITY;\n@@ -4117,1 +4208,1 @@\n-        byte res = Byte.MIN_VALUE;\n+        byte res = MAX_IDENTITY;\n@@ -4129,8 +4220,1 @@\n-        byte ra = Byte.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4139,1 +4223,1 @@\n-            ra = Byte.MIN_VALUE;\n+            ra = MAX_IDENTITY;\n@@ -4142,1 +4226,3 @@\n-                ra = (byte) Math.max(ra, av.reduceLanes(VectorOperators.MAX));\n+                byte v = av.reduceLanes(VectorOperators.MAX);\n+                r[i] = v;\n+                ra = (byte) Math.max(ra, v);\n@@ -4150,0 +4236,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void MAXReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = MAX_IDENTITY;\n+\n+        Assert.assertEquals((byte) Math.max(id, id), id,\n+                            \"MAX(MAX_IDENTITY, MAX_IDENTITY) != MAX_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) Math.max(id, x), x);\n+                Assert.assertEquals((byte) Math.max(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) Math.max(id, x), x,\n+                                \"MAX(MAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) Math.max(x, id), x,\n+                                \"MAX(\" + x + \", MAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4151,1 +4260,1 @@\n-        byte res = Byte.MIN_VALUE;\n+        byte res = MAX_IDENTITY;\n@@ -4161,1 +4270,1 @@\n-        byte res = Byte.MIN_VALUE;\n+        byte res = MAX_IDENTITY;\n@@ -4175,8 +4284,1 @@\n-        byte ra = Byte.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX, vmask);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4185,1 +4287,1 @@\n-            ra = Byte.MIN_VALUE;\n+            ra = MAX_IDENTITY;\n@@ -4188,1 +4290,3 @@\n-                ra = (byte) Math.max(ra, av.reduceLanes(VectorOperators.MAX, vmask));\n+                byte v = av.reduceLanes(VectorOperators.MAX, vmask);\n+                r[i] = v;\n+                ra = (byte) Math.max(ra, v);\n@@ -4197,1 +4301,1 @@\n-        byte res = Byte.MAX_VALUE;\n+        byte res = UMIN_IDENTITY;\n@@ -4206,1 +4310,1 @@\n-        byte res = Byte.MAX_VALUE;\n+        byte res = UMIN_IDENTITY;\n@@ -4218,8 +4322,1 @@\n-        byte ra = Byte.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMIN);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4228,1 +4325,1 @@\n-            ra = Byte.MAX_VALUE;\n+            ra = UMIN_IDENTITY;\n@@ -4231,1 +4328,3 @@\n-                ra = (byte) VectorMath.minUnsigned(ra, av.reduceLanes(VectorOperators.UMIN));\n+                byte v = av.reduceLanes(VectorOperators.UMIN);\n+                r[i] = v;\n+                ra = (byte) VectorMath.minUnsigned(ra, v);\n@@ -4239,0 +4338,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void UMINReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = UMIN_IDENTITY;\n+\n+        Assert.assertEquals((byte) VectorMath.minUnsigned(id, id), id,\n+                            \"UMIN(UMIN_IDENTITY, UMIN_IDENTITY) != UMIN_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) VectorMath.minUnsigned(id, x), x);\n+                Assert.assertEquals((byte) VectorMath.minUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) VectorMath.minUnsigned(id, x), x,\n+                                \"UMIN(UMIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) VectorMath.minUnsigned(x, id), x,\n+                                \"UMIN(\" + x + \", UMIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4240,1 +4362,1 @@\n-        byte res = Byte.MAX_VALUE;\n+        byte res = UMIN_IDENTITY;\n@@ -4250,1 +4372,1 @@\n-        byte res = Byte.MAX_VALUE;\n+        byte res = UMIN_IDENTITY;\n@@ -4264,8 +4386,1 @@\n-        byte ra = Byte.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMIN, vmask);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4274,1 +4389,1 @@\n-            ra = Byte.MAX_VALUE;\n+            ra = UMIN_IDENTITY;\n@@ -4277,1 +4392,3 @@\n-                ra = (byte) VectorMath.minUnsigned(ra, av.reduceLanes(VectorOperators.UMIN, vmask));\n+                byte v = av.reduceLanes(VectorOperators.UMIN, vmask);\n+                r[i] = v;\n+                ra = (byte) VectorMath.minUnsigned(ra, v);\n@@ -4286,1 +4403,1 @@\n-        byte res = Byte.MIN_VALUE;\n+        byte res = UMAX_IDENTITY;\n@@ -4295,1 +4412,1 @@\n-        byte res = Byte.MIN_VALUE;\n+        byte res = UMAX_IDENTITY;\n@@ -4307,8 +4424,1 @@\n-        byte ra = Byte.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMAX);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4317,1 +4427,1 @@\n-            ra = Byte.MIN_VALUE;\n+            ra = UMAX_IDENTITY;\n@@ -4320,1 +4430,3 @@\n-                ra = (byte) VectorMath.maxUnsigned(ra, av.reduceLanes(VectorOperators.UMAX));\n+                byte v = av.reduceLanes(VectorOperators.UMAX);\n+                r[i] = v;\n+                ra = (byte) VectorMath.maxUnsigned(ra, v);\n@@ -4328,0 +4440,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void UMAXReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = UMAX_IDENTITY;\n+\n+        Assert.assertEquals((byte) VectorMath.maxUnsigned(id, id), id,\n+                            \"UMAX(UMAX_IDENTITY, UMAX_IDENTITY) != UMAX_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) VectorMath.maxUnsigned(id, x), x);\n+                Assert.assertEquals((byte) VectorMath.maxUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) VectorMath.maxUnsigned(id, x), x,\n+                                \"UMAX(UMAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) VectorMath.maxUnsigned(x, id), x,\n+                                \"UMAX(\" + x + \", UMAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4329,1 +4464,1 @@\n-        byte res = Byte.MIN_VALUE;\n+        byte res = UMAX_IDENTITY;\n@@ -4339,1 +4474,1 @@\n-        byte res = Byte.MIN_VALUE;\n+        byte res = UMAX_IDENTITY;\n@@ -4353,8 +4488,1 @@\n-        byte ra = Byte.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMAX, vmask);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4363,1 +4491,1 @@\n-            ra = Byte.MIN_VALUE;\n+            ra = UMAX_IDENTITY;\n@@ -4366,1 +4494,3 @@\n-                ra = (byte) VectorMath.maxUnsigned(ra, av.reduceLanes(VectorOperators.UMAX, vmask));\n+                byte v = av.reduceLanes(VectorOperators.UMAX, vmask);\n+                r[i] = v;\n+                ra = (byte) VectorMath.maxUnsigned(ra, v);\n@@ -4375,1 +4505,1 @@\n-        byte res = (byte) 0;\n+        byte res = FIRST_NONZERO_IDENTITY;\n@@ -4384,1 +4514,1 @@\n-        byte res = (byte) 0;\n+        byte res = FIRST_NONZERO_IDENTITY;\n@@ -4396,8 +4526,1 @@\n-        byte ra = (byte) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4406,1 +4529,1 @@\n-            ra = (byte) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -4409,1 +4532,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO));\n+                byte v = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -4417,0 +4542,23 @@\n+    @Test(dataProvider = \"byteUnaryOpProvider\")\n+    static void FIRST_NONZEROReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = FIRST_NONZERO_IDENTITY;\n+\n+        Assert.assertEquals(firstNonZero(id, id), id,\n+                            \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, FIRST_NONZERO_IDENTITY) != FIRST_NONZERO_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals(firstNonZero(id, x), x);\n+                Assert.assertEquals(firstNonZero(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals(firstNonZero(id, x), x,\n+                                \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals(firstNonZero(x, id), x,\n+                                \"FIRST_NONZERO(\" + x + \", FIRST_NONZERO_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4418,1 +4566,1 @@\n-        byte res = (byte) 0;\n+        byte res = FIRST_NONZERO_IDENTITY;\n@@ -4428,1 +4576,1 @@\n-        byte res = (byte) 0;\n+        byte res = FIRST_NONZERO_IDENTITY;\n@@ -4442,8 +4590,1 @@\n-        byte ra = (byte) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n-            }\n-        }\n+        byte ra = 0;\n@@ -4452,1 +4593,1 @@\n-            ra = (byte) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -4455,1 +4596,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask));\n+                byte v = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -4512,1 +4655,1 @@\n-        byte res = 0;\n+        byte res = SUADD_IDENTITY;\n@@ -4521,1 +4664,1 @@\n-        byte res = 0;\n+        byte res = SUADD_IDENTITY;\n@@ -4536,0 +4679,1 @@\n+            ra = SUADD_IDENTITY;\n@@ -4538,9 +4682,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.SUADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                ra = (byte) VectorMath.addSaturatingUnsigned(ra, av.reduceLanes(VectorOperators.SUADD));\n+                byte v = av.reduceLanes(VectorOperators.SUADD);\n+                r[i] = v;\n+                ra = (byte) VectorMath.addSaturatingUnsigned(ra, v);\n@@ -4554,0 +4692,23 @@\n+    @Test(dataProvider = \"byteSaturatingUnaryOpProvider\")\n+    static void SUADDReduceIdentityValueTests(IntFunction<byte[]> fa) {\n+        byte[] a = fa.apply(SPECIES.length());\n+        byte id = SUADD_IDENTITY;\n+\n+        Assert.assertEquals((byte) VectorMath.addSaturatingUnsigned(id, id), id,\n+                            \"SUADD(SUADD_IDENTITY, SUADD_IDENTITY) != SUADD_IDENTITY\");\n+\n+        byte x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((byte) VectorMath.addSaturatingUnsigned(id, x), x);\n+                Assert.assertEquals((byte) VectorMath.addSaturatingUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((byte) VectorMath.addSaturatingUnsigned(id, x), x,\n+                                \"SUADD(SUADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((byte) VectorMath.addSaturatingUnsigned(x, id), x,\n+                                \"SUADD(\" + x + \", SUADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4555,1 +4716,1 @@\n-        byte res = 0;\n+        byte res = SUADD_IDENTITY;\n@@ -4565,1 +4726,1 @@\n-        byte res = 0;\n+        byte res = SUADD_IDENTITY;\n@@ -4581,0 +4742,1 @@\n+            ra = SUADD_IDENTITY;\n@@ -4583,9 +4745,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.SUADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ByteVector av = ByteVector.fromArray(SPECIES, a, i);\n-                ra = (byte) VectorMath.addSaturatingUnsigned(ra, av.reduceLanes(VectorOperators.SUADD, vmask));\n+                byte v = av.reduceLanes(VectorOperators.SUADD, vmask);\n+                r[i] = v;\n+                ra = (byte) VectorMath.addSaturatingUnsigned(ra, v);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/ByteMaxVectorTests.java","additions":413,"deletions":257,"binary":false,"changes":670,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -65,0 +65,6 @@\n+    \/\/ Identity values for reduction operations\n+    private static final double ADD_IDENTITY = (double)0;\n+    private static final double FIRST_NONZERO_IDENTITY = (double)0;\n+    private static final double MAX_IDENTITY = Double.NEGATIVE_INFINITY;\n+    private static final double MIN_IDENTITY = Double.POSITIVE_INFINITY;\n+    private static final double MUL_IDENTITY = (double)1;\n@@ -2342,1 +2348,1 @@\n-        double res = 0;\n+        double res = ADD_IDENTITY;\n@@ -2351,1 +2357,1 @@\n-        double res = 0;\n+        double res = ADD_IDENTITY;\n@@ -2366,0 +2372,1 @@\n+            ra = ADD_IDENTITY;\n@@ -2368,9 +2375,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD);\n+                double v = av.reduceLanes(VectorOperators.ADD);\n+                r[i] = v;\n+                ra += v;\n@@ -2384,0 +2385,23 @@\n+    @Test(dataProvider = \"doubleUnaryOpProvider\")\n+    static void ADDReduceIdentityValueTests(IntFunction<double[]> fa) {\n+        double[] a = fa.apply(SPECIES.length());\n+        double id = ADD_IDENTITY;\n+\n+        Assert.assertEquals((double) (id + id), id,\n+                            \"ADD(ADD_IDENTITY, ADD_IDENTITY) != ADD_IDENTITY\");\n+\n+        double x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((double) (id + x), x);\n+                Assert.assertEquals((double) (x + id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((double) (id + x), x,\n+                                \"ADD(ADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((double) (x + id), x,\n+                                \"ADD(\" + x + \", ADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2385,1 +2409,1 @@\n-        double res = 0;\n+        double res = ADD_IDENTITY;\n@@ -2395,1 +2419,1 @@\n-        double res = 0;\n+        double res = ADD_IDENTITY;\n@@ -2412,0 +2436,1 @@\n+            ra = ADD_IDENTITY;\n@@ -2414,9 +2439,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD, vmask);\n+                double v = av.reduceLanes(VectorOperators.ADD, vmask);\n+                r[i] = v;\n+                ra += v;\n@@ -2431,1 +2450,1 @@\n-        double res = 1;\n+        double res = MUL_IDENTITY;\n@@ -2440,1 +2459,1 @@\n-        double res = 1;\n+        double res = MUL_IDENTITY;\n@@ -2452,8 +2471,1 @@\n-        double ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL);\n-            }\n-        }\n+        double ra = 0;\n@@ -2462,1 +2474,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -2465,1 +2477,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL);\n+                double v = av.reduceLanes(VectorOperators.MUL);\n+                r[i] = v;\n+                ra *= v;\n@@ -2473,0 +2487,23 @@\n+    @Test(dataProvider = \"doubleUnaryOpProvider\")\n+    static void MULReduceIdentityValueTests(IntFunction<double[]> fa) {\n+        double[] a = fa.apply(SPECIES.length());\n+        double id = MUL_IDENTITY;\n+\n+        Assert.assertEquals((double) (id * id), id,\n+                            \"MUL(MUL_IDENTITY, MUL_IDENTITY) != MUL_IDENTITY\");\n+\n+        double x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((double) (id * x), x);\n+                Assert.assertEquals((double) (x * id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((double) (id * x), x,\n+                                \"MUL(MUL_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((double) (x * id), x,\n+                                \"MUL(\" + x + \", MUL_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2474,1 +2511,1 @@\n-        double res = 1;\n+        double res = MUL_IDENTITY;\n@@ -2484,1 +2521,1 @@\n-        double res = 1;\n+        double res = MUL_IDENTITY;\n@@ -2498,8 +2535,1 @@\n-        double ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL, vmask);\n-            }\n-        }\n+        double ra = 0;\n@@ -2508,1 +2538,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -2511,1 +2541,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL, vmask);\n+                double v = av.reduceLanes(VectorOperators.MUL, vmask);\n+                r[i] = v;\n+                ra *= v;\n@@ -2520,1 +2552,1 @@\n-        double res = Double.POSITIVE_INFINITY;\n+        double res = MIN_IDENTITY;\n@@ -2529,1 +2561,1 @@\n-        double res = Double.POSITIVE_INFINITY;\n+        double res = MIN_IDENTITY;\n@@ -2541,8 +2573,1 @@\n-        double ra = Double.POSITIVE_INFINITY;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN);\n-            }\n-        }\n+        double ra = 0;\n@@ -2551,1 +2576,1 @@\n-            ra = Double.POSITIVE_INFINITY;\n+            ra = MIN_IDENTITY;\n@@ -2554,1 +2579,3 @@\n-                ra = (double) Math.min(ra, av.reduceLanes(VectorOperators.MIN));\n+                double v = av.reduceLanes(VectorOperators.MIN);\n+                r[i] = v;\n+                ra = (double) Math.min(ra, v);\n@@ -2562,0 +2589,23 @@\n+    @Test(dataProvider = \"doubleUnaryOpProvider\")\n+    static void MINReduceIdentityValueTests(IntFunction<double[]> fa) {\n+        double[] a = fa.apply(SPECIES.length());\n+        double id = MIN_IDENTITY;\n+\n+        Assert.assertEquals((double) Math.min(id, id), id,\n+                            \"MIN(MIN_IDENTITY, MIN_IDENTITY) != MIN_IDENTITY\");\n+\n+        double x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((double) Math.min(id, x), x);\n+                Assert.assertEquals((double) Math.min(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((double) Math.min(id, x), x,\n+                                \"MIN(MIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((double) Math.min(x, id), x,\n+                                \"MIN(\" + x + \", MIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2563,1 +2613,1 @@\n-        double res = Double.POSITIVE_INFINITY;\n+        double res = MIN_IDENTITY;\n@@ -2573,1 +2623,1 @@\n-        double res = Double.POSITIVE_INFINITY;\n+        double res = MIN_IDENTITY;\n@@ -2587,8 +2637,1 @@\n-        double ra = Double.POSITIVE_INFINITY;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN, vmask);\n-            }\n-        }\n+        double ra = 0;\n@@ -2597,1 +2640,1 @@\n-            ra = Double.POSITIVE_INFINITY;\n+            ra = MIN_IDENTITY;\n@@ -2600,1 +2643,3 @@\n-                ra = (double) Math.min(ra, av.reduceLanes(VectorOperators.MIN, vmask));\n+                double v = av.reduceLanes(VectorOperators.MIN, vmask);\n+                r[i] = v;\n+                ra = (double) Math.min(ra, v);\n@@ -2609,1 +2654,1 @@\n-        double res = Double.NEGATIVE_INFINITY;\n+        double res = MAX_IDENTITY;\n@@ -2618,1 +2663,1 @@\n-        double res = Double.NEGATIVE_INFINITY;\n+        double res = MAX_IDENTITY;\n@@ -2630,8 +2675,1 @@\n-        double ra = Double.NEGATIVE_INFINITY;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX);\n-            }\n-        }\n+        double ra = 0;\n@@ -2640,1 +2678,1 @@\n-            ra = Double.NEGATIVE_INFINITY;\n+            ra = MAX_IDENTITY;\n@@ -2643,1 +2681,3 @@\n-                ra = (double) Math.max(ra, av.reduceLanes(VectorOperators.MAX));\n+                double v = av.reduceLanes(VectorOperators.MAX);\n+                r[i] = v;\n+                ra = (double) Math.max(ra, v);\n@@ -2651,0 +2691,23 @@\n+    @Test(dataProvider = \"doubleUnaryOpProvider\")\n+    static void MAXReduceIdentityValueTests(IntFunction<double[]> fa) {\n+        double[] a = fa.apply(SPECIES.length());\n+        double id = MAX_IDENTITY;\n+\n+        Assert.assertEquals((double) Math.max(id, id), id,\n+                            \"MAX(MAX_IDENTITY, MAX_IDENTITY) != MAX_IDENTITY\");\n+\n+        double x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((double) Math.max(id, x), x);\n+                Assert.assertEquals((double) Math.max(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((double) Math.max(id, x), x,\n+                                \"MAX(MAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((double) Math.max(x, id), x,\n+                                \"MAX(\" + x + \", MAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2652,1 +2715,1 @@\n-        double res = Double.NEGATIVE_INFINITY;\n+        double res = MAX_IDENTITY;\n@@ -2662,1 +2725,1 @@\n-        double res = Double.NEGATIVE_INFINITY;\n+        double res = MAX_IDENTITY;\n@@ -2676,8 +2739,1 @@\n-        double ra = Double.NEGATIVE_INFINITY;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX, vmask);\n-            }\n-        }\n+        double ra = 0;\n@@ -2686,1 +2742,1 @@\n-            ra = Double.NEGATIVE_INFINITY;\n+            ra = MAX_IDENTITY;\n@@ -2689,1 +2745,3 @@\n-                ra = (double) Math.max(ra, av.reduceLanes(VectorOperators.MAX, vmask));\n+                double v = av.reduceLanes(VectorOperators.MAX, vmask);\n+                r[i] = v;\n+                ra = (double) Math.max(ra, v);\n@@ -2698,1 +2756,1 @@\n-        double res = (double) 0;\n+        double res = FIRST_NONZERO_IDENTITY;\n@@ -2707,1 +2765,1 @@\n-        double res = (double) 0;\n+        double res = FIRST_NONZERO_IDENTITY;\n@@ -2719,8 +2777,1 @@\n-        double ra = (double) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n-            }\n-        }\n+        double ra = 0;\n@@ -2729,1 +2780,1 @@\n-            ra = (double) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -2732,1 +2783,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO));\n+                double v = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -2740,0 +2793,23 @@\n+    @Test(dataProvider = \"doubleUnaryOpProvider\")\n+    static void FIRST_NONZEROReduceIdentityValueTests(IntFunction<double[]> fa) {\n+        double[] a = fa.apply(SPECIES.length());\n+        double id = FIRST_NONZERO_IDENTITY;\n+\n+        Assert.assertEquals(firstNonZero(id, id), id,\n+                            \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, FIRST_NONZERO_IDENTITY) != FIRST_NONZERO_IDENTITY\");\n+\n+        double x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals(firstNonZero(id, x), x);\n+                Assert.assertEquals(firstNonZero(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals(firstNonZero(id, x), x,\n+                                \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals(firstNonZero(x, id), x,\n+                                \"FIRST_NONZERO(\" + x + \", FIRST_NONZERO_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2741,1 +2817,1 @@\n-        double res = (double) 0;\n+        double res = FIRST_NONZERO_IDENTITY;\n@@ -2751,1 +2827,1 @@\n-        double res = (double) 0;\n+        double res = FIRST_NONZERO_IDENTITY;\n@@ -2765,8 +2841,1 @@\n-        double ra = (double) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n-            }\n-        }\n+        double ra = 0;\n@@ -2775,1 +2844,1 @@\n-            ra = (double) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -2778,1 +2847,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask));\n+                double v = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/Double128VectorTests.java","additions":190,"deletions":119,"binary":false,"changes":309,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -65,0 +65,6 @@\n+    \/\/ Identity values for reduction operations\n+    private static final double ADD_IDENTITY = (double)0;\n+    private static final double FIRST_NONZERO_IDENTITY = (double)0;\n+    private static final double MAX_IDENTITY = Double.NEGATIVE_INFINITY;\n+    private static final double MIN_IDENTITY = Double.POSITIVE_INFINITY;\n+    private static final double MUL_IDENTITY = (double)1;\n@@ -2342,1 +2348,1 @@\n-        double res = 0;\n+        double res = ADD_IDENTITY;\n@@ -2351,1 +2357,1 @@\n-        double res = 0;\n+        double res = ADD_IDENTITY;\n@@ -2366,0 +2372,1 @@\n+            ra = ADD_IDENTITY;\n@@ -2368,9 +2375,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD);\n+                double v = av.reduceLanes(VectorOperators.ADD);\n+                r[i] = v;\n+                ra += v;\n@@ -2384,0 +2385,23 @@\n+    @Test(dataProvider = \"doubleUnaryOpProvider\")\n+    static void ADDReduceIdentityValueTests(IntFunction<double[]> fa) {\n+        double[] a = fa.apply(SPECIES.length());\n+        double id = ADD_IDENTITY;\n+\n+        Assert.assertEquals((double) (id + id), id,\n+                            \"ADD(ADD_IDENTITY, ADD_IDENTITY) != ADD_IDENTITY\");\n+\n+        double x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((double) (id + x), x);\n+                Assert.assertEquals((double) (x + id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((double) (id + x), x,\n+                                \"ADD(ADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((double) (x + id), x,\n+                                \"ADD(\" + x + \", ADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2385,1 +2409,1 @@\n-        double res = 0;\n+        double res = ADD_IDENTITY;\n@@ -2395,1 +2419,1 @@\n-        double res = 0;\n+        double res = ADD_IDENTITY;\n@@ -2412,0 +2436,1 @@\n+            ra = ADD_IDENTITY;\n@@ -2414,9 +2439,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD, vmask);\n+                double v = av.reduceLanes(VectorOperators.ADD, vmask);\n+                r[i] = v;\n+                ra += v;\n@@ -2431,1 +2450,1 @@\n-        double res = 1;\n+        double res = MUL_IDENTITY;\n@@ -2440,1 +2459,1 @@\n-        double res = 1;\n+        double res = MUL_IDENTITY;\n@@ -2452,8 +2471,1 @@\n-        double ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL);\n-            }\n-        }\n+        double ra = 0;\n@@ -2462,1 +2474,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -2465,1 +2477,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL);\n+                double v = av.reduceLanes(VectorOperators.MUL);\n+                r[i] = v;\n+                ra *= v;\n@@ -2473,0 +2487,23 @@\n+    @Test(dataProvider = \"doubleUnaryOpProvider\")\n+    static void MULReduceIdentityValueTests(IntFunction<double[]> fa) {\n+        double[] a = fa.apply(SPECIES.length());\n+        double id = MUL_IDENTITY;\n+\n+        Assert.assertEquals((double) (id * id), id,\n+                            \"MUL(MUL_IDENTITY, MUL_IDENTITY) != MUL_IDENTITY\");\n+\n+        double x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((double) (id * x), x);\n+                Assert.assertEquals((double) (x * id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((double) (id * x), x,\n+                                \"MUL(MUL_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((double) (x * id), x,\n+                                \"MUL(\" + x + \", MUL_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2474,1 +2511,1 @@\n-        double res = 1;\n+        double res = MUL_IDENTITY;\n@@ -2484,1 +2521,1 @@\n-        double res = 1;\n+        double res = MUL_IDENTITY;\n@@ -2498,8 +2535,1 @@\n-        double ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL, vmask);\n-            }\n-        }\n+        double ra = 0;\n@@ -2508,1 +2538,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -2511,1 +2541,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL, vmask);\n+                double v = av.reduceLanes(VectorOperators.MUL, vmask);\n+                r[i] = v;\n+                ra *= v;\n@@ -2520,1 +2552,1 @@\n-        double res = Double.POSITIVE_INFINITY;\n+        double res = MIN_IDENTITY;\n@@ -2529,1 +2561,1 @@\n-        double res = Double.POSITIVE_INFINITY;\n+        double res = MIN_IDENTITY;\n@@ -2541,8 +2573,1 @@\n-        double ra = Double.POSITIVE_INFINITY;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN);\n-            }\n-        }\n+        double ra = 0;\n@@ -2551,1 +2576,1 @@\n-            ra = Double.POSITIVE_INFINITY;\n+            ra = MIN_IDENTITY;\n@@ -2554,1 +2579,3 @@\n-                ra = (double) Math.min(ra, av.reduceLanes(VectorOperators.MIN));\n+                double v = av.reduceLanes(VectorOperators.MIN);\n+                r[i] = v;\n+                ra = (double) Math.min(ra, v);\n@@ -2562,0 +2589,23 @@\n+    @Test(dataProvider = \"doubleUnaryOpProvider\")\n+    static void MINReduceIdentityValueTests(IntFunction<double[]> fa) {\n+        double[] a = fa.apply(SPECIES.length());\n+        double id = MIN_IDENTITY;\n+\n+        Assert.assertEquals((double) Math.min(id, id), id,\n+                            \"MIN(MIN_IDENTITY, MIN_IDENTITY) != MIN_IDENTITY\");\n+\n+        double x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((double) Math.min(id, x), x);\n+                Assert.assertEquals((double) Math.min(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((double) Math.min(id, x), x,\n+                                \"MIN(MIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((double) Math.min(x, id), x,\n+                                \"MIN(\" + x + \", MIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2563,1 +2613,1 @@\n-        double res = Double.POSITIVE_INFINITY;\n+        double res = MIN_IDENTITY;\n@@ -2573,1 +2623,1 @@\n-        double res = Double.POSITIVE_INFINITY;\n+        double res = MIN_IDENTITY;\n@@ -2587,8 +2637,1 @@\n-        double ra = Double.POSITIVE_INFINITY;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN, vmask);\n-            }\n-        }\n+        double ra = 0;\n@@ -2597,1 +2640,1 @@\n-            ra = Double.POSITIVE_INFINITY;\n+            ra = MIN_IDENTITY;\n@@ -2600,1 +2643,3 @@\n-                ra = (double) Math.min(ra, av.reduceLanes(VectorOperators.MIN, vmask));\n+                double v = av.reduceLanes(VectorOperators.MIN, vmask);\n+                r[i] = v;\n+                ra = (double) Math.min(ra, v);\n@@ -2609,1 +2654,1 @@\n-        double res = Double.NEGATIVE_INFINITY;\n+        double res = MAX_IDENTITY;\n@@ -2618,1 +2663,1 @@\n-        double res = Double.NEGATIVE_INFINITY;\n+        double res = MAX_IDENTITY;\n@@ -2630,8 +2675,1 @@\n-        double ra = Double.NEGATIVE_INFINITY;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX);\n-            }\n-        }\n+        double ra = 0;\n@@ -2640,1 +2678,1 @@\n-            ra = Double.NEGATIVE_INFINITY;\n+            ra = MAX_IDENTITY;\n@@ -2643,1 +2681,3 @@\n-                ra = (double) Math.max(ra, av.reduceLanes(VectorOperators.MAX));\n+                double v = av.reduceLanes(VectorOperators.MAX);\n+                r[i] = v;\n+                ra = (double) Math.max(ra, v);\n@@ -2651,0 +2691,23 @@\n+    @Test(dataProvider = \"doubleUnaryOpProvider\")\n+    static void MAXReduceIdentityValueTests(IntFunction<double[]> fa) {\n+        double[] a = fa.apply(SPECIES.length());\n+        double id = MAX_IDENTITY;\n+\n+        Assert.assertEquals((double) Math.max(id, id), id,\n+                            \"MAX(MAX_IDENTITY, MAX_IDENTITY) != MAX_IDENTITY\");\n+\n+        double x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((double) Math.max(id, x), x);\n+                Assert.assertEquals((double) Math.max(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((double) Math.max(id, x), x,\n+                                \"MAX(MAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((double) Math.max(x, id), x,\n+                                \"MAX(\" + x + \", MAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2652,1 +2715,1 @@\n-        double res = Double.NEGATIVE_INFINITY;\n+        double res = MAX_IDENTITY;\n@@ -2662,1 +2725,1 @@\n-        double res = Double.NEGATIVE_INFINITY;\n+        double res = MAX_IDENTITY;\n@@ -2676,8 +2739,1 @@\n-        double ra = Double.NEGATIVE_INFINITY;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX, vmask);\n-            }\n-        }\n+        double ra = 0;\n@@ -2686,1 +2742,1 @@\n-            ra = Double.NEGATIVE_INFINITY;\n+            ra = MAX_IDENTITY;\n@@ -2689,1 +2745,3 @@\n-                ra = (double) Math.max(ra, av.reduceLanes(VectorOperators.MAX, vmask));\n+                double v = av.reduceLanes(VectorOperators.MAX, vmask);\n+                r[i] = v;\n+                ra = (double) Math.max(ra, v);\n@@ -2698,1 +2756,1 @@\n-        double res = (double) 0;\n+        double res = FIRST_NONZERO_IDENTITY;\n@@ -2707,1 +2765,1 @@\n-        double res = (double) 0;\n+        double res = FIRST_NONZERO_IDENTITY;\n@@ -2719,8 +2777,1 @@\n-        double ra = (double) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n-            }\n-        }\n+        double ra = 0;\n@@ -2729,1 +2780,1 @@\n-            ra = (double) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -2732,1 +2783,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO));\n+                double v = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -2740,0 +2793,23 @@\n+    @Test(dataProvider = \"doubleUnaryOpProvider\")\n+    static void FIRST_NONZEROReduceIdentityValueTests(IntFunction<double[]> fa) {\n+        double[] a = fa.apply(SPECIES.length());\n+        double id = FIRST_NONZERO_IDENTITY;\n+\n+        Assert.assertEquals(firstNonZero(id, id), id,\n+                            \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, FIRST_NONZERO_IDENTITY) != FIRST_NONZERO_IDENTITY\");\n+\n+        double x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals(firstNonZero(id, x), x);\n+                Assert.assertEquals(firstNonZero(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals(firstNonZero(id, x), x,\n+                                \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals(firstNonZero(x, id), x,\n+                                \"FIRST_NONZERO(\" + x + \", FIRST_NONZERO_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2741,1 +2817,1 @@\n-        double res = (double) 0;\n+        double res = FIRST_NONZERO_IDENTITY;\n@@ -2751,1 +2827,1 @@\n-        double res = (double) 0;\n+        double res = FIRST_NONZERO_IDENTITY;\n@@ -2765,8 +2841,1 @@\n-        double ra = (double) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n-            }\n-        }\n+        double ra = 0;\n@@ -2775,1 +2844,1 @@\n-            ra = (double) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -2778,1 +2847,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask));\n+                double v = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/Double256VectorTests.java","additions":190,"deletions":119,"binary":false,"changes":309,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -65,0 +65,6 @@\n+    \/\/ Identity values for reduction operations\n+    private static final double ADD_IDENTITY = (double)0;\n+    private static final double FIRST_NONZERO_IDENTITY = (double)0;\n+    private static final double MAX_IDENTITY = Double.NEGATIVE_INFINITY;\n+    private static final double MIN_IDENTITY = Double.POSITIVE_INFINITY;\n+    private static final double MUL_IDENTITY = (double)1;\n@@ -2342,1 +2348,1 @@\n-        double res = 0;\n+        double res = ADD_IDENTITY;\n@@ -2351,1 +2357,1 @@\n-        double res = 0;\n+        double res = ADD_IDENTITY;\n@@ -2366,0 +2372,1 @@\n+            ra = ADD_IDENTITY;\n@@ -2368,9 +2375,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD);\n+                double v = av.reduceLanes(VectorOperators.ADD);\n+                r[i] = v;\n+                ra += v;\n@@ -2384,0 +2385,23 @@\n+    @Test(dataProvider = \"doubleUnaryOpProvider\")\n+    static void ADDReduceIdentityValueTests(IntFunction<double[]> fa) {\n+        double[] a = fa.apply(SPECIES.length());\n+        double id = ADD_IDENTITY;\n+\n+        Assert.assertEquals((double) (id + id), id,\n+                            \"ADD(ADD_IDENTITY, ADD_IDENTITY) != ADD_IDENTITY\");\n+\n+        double x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((double) (id + x), x);\n+                Assert.assertEquals((double) (x + id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((double) (id + x), x,\n+                                \"ADD(ADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((double) (x + id), x,\n+                                \"ADD(\" + x + \", ADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2385,1 +2409,1 @@\n-        double res = 0;\n+        double res = ADD_IDENTITY;\n@@ -2395,1 +2419,1 @@\n-        double res = 0;\n+        double res = ADD_IDENTITY;\n@@ -2412,0 +2436,1 @@\n+            ra = ADD_IDENTITY;\n@@ -2414,9 +2439,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD, vmask);\n+                double v = av.reduceLanes(VectorOperators.ADD, vmask);\n+                r[i] = v;\n+                ra += v;\n@@ -2431,1 +2450,1 @@\n-        double res = 1;\n+        double res = MUL_IDENTITY;\n@@ -2440,1 +2459,1 @@\n-        double res = 1;\n+        double res = MUL_IDENTITY;\n@@ -2452,8 +2471,1 @@\n-        double ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL);\n-            }\n-        }\n+        double ra = 0;\n@@ -2462,1 +2474,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -2465,1 +2477,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL);\n+                double v = av.reduceLanes(VectorOperators.MUL);\n+                r[i] = v;\n+                ra *= v;\n@@ -2473,0 +2487,23 @@\n+    @Test(dataProvider = \"doubleUnaryOpProvider\")\n+    static void MULReduceIdentityValueTests(IntFunction<double[]> fa) {\n+        double[] a = fa.apply(SPECIES.length());\n+        double id = MUL_IDENTITY;\n+\n+        Assert.assertEquals((double) (id * id), id,\n+                            \"MUL(MUL_IDENTITY, MUL_IDENTITY) != MUL_IDENTITY\");\n+\n+        double x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((double) (id * x), x);\n+                Assert.assertEquals((double) (x * id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((double) (id * x), x,\n+                                \"MUL(MUL_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((double) (x * id), x,\n+                                \"MUL(\" + x + \", MUL_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2474,1 +2511,1 @@\n-        double res = 1;\n+        double res = MUL_IDENTITY;\n@@ -2484,1 +2521,1 @@\n-        double res = 1;\n+        double res = MUL_IDENTITY;\n@@ -2498,8 +2535,1 @@\n-        double ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL, vmask);\n-            }\n-        }\n+        double ra = 0;\n@@ -2508,1 +2538,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -2511,1 +2541,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL, vmask);\n+                double v = av.reduceLanes(VectorOperators.MUL, vmask);\n+                r[i] = v;\n+                ra *= v;\n@@ -2520,1 +2552,1 @@\n-        double res = Double.POSITIVE_INFINITY;\n+        double res = MIN_IDENTITY;\n@@ -2529,1 +2561,1 @@\n-        double res = Double.POSITIVE_INFINITY;\n+        double res = MIN_IDENTITY;\n@@ -2541,8 +2573,1 @@\n-        double ra = Double.POSITIVE_INFINITY;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN);\n-            }\n-        }\n+        double ra = 0;\n@@ -2551,1 +2576,1 @@\n-            ra = Double.POSITIVE_INFINITY;\n+            ra = MIN_IDENTITY;\n@@ -2554,1 +2579,3 @@\n-                ra = (double) Math.min(ra, av.reduceLanes(VectorOperators.MIN));\n+                double v = av.reduceLanes(VectorOperators.MIN);\n+                r[i] = v;\n+                ra = (double) Math.min(ra, v);\n@@ -2562,0 +2589,23 @@\n+    @Test(dataProvider = \"doubleUnaryOpProvider\")\n+    static void MINReduceIdentityValueTests(IntFunction<double[]> fa) {\n+        double[] a = fa.apply(SPECIES.length());\n+        double id = MIN_IDENTITY;\n+\n+        Assert.assertEquals((double) Math.min(id, id), id,\n+                            \"MIN(MIN_IDENTITY, MIN_IDENTITY) != MIN_IDENTITY\");\n+\n+        double x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((double) Math.min(id, x), x);\n+                Assert.assertEquals((double) Math.min(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((double) Math.min(id, x), x,\n+                                \"MIN(MIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((double) Math.min(x, id), x,\n+                                \"MIN(\" + x + \", MIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2563,1 +2613,1 @@\n-        double res = Double.POSITIVE_INFINITY;\n+        double res = MIN_IDENTITY;\n@@ -2573,1 +2623,1 @@\n-        double res = Double.POSITIVE_INFINITY;\n+        double res = MIN_IDENTITY;\n@@ -2587,8 +2637,1 @@\n-        double ra = Double.POSITIVE_INFINITY;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN, vmask);\n-            }\n-        }\n+        double ra = 0;\n@@ -2597,1 +2640,1 @@\n-            ra = Double.POSITIVE_INFINITY;\n+            ra = MIN_IDENTITY;\n@@ -2600,1 +2643,3 @@\n-                ra = (double) Math.min(ra, av.reduceLanes(VectorOperators.MIN, vmask));\n+                double v = av.reduceLanes(VectorOperators.MIN, vmask);\n+                r[i] = v;\n+                ra = (double) Math.min(ra, v);\n@@ -2609,1 +2654,1 @@\n-        double res = Double.NEGATIVE_INFINITY;\n+        double res = MAX_IDENTITY;\n@@ -2618,1 +2663,1 @@\n-        double res = Double.NEGATIVE_INFINITY;\n+        double res = MAX_IDENTITY;\n@@ -2630,8 +2675,1 @@\n-        double ra = Double.NEGATIVE_INFINITY;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX);\n-            }\n-        }\n+        double ra = 0;\n@@ -2640,1 +2678,1 @@\n-            ra = Double.NEGATIVE_INFINITY;\n+            ra = MAX_IDENTITY;\n@@ -2643,1 +2681,3 @@\n-                ra = (double) Math.max(ra, av.reduceLanes(VectorOperators.MAX));\n+                double v = av.reduceLanes(VectorOperators.MAX);\n+                r[i] = v;\n+                ra = (double) Math.max(ra, v);\n@@ -2651,0 +2691,23 @@\n+    @Test(dataProvider = \"doubleUnaryOpProvider\")\n+    static void MAXReduceIdentityValueTests(IntFunction<double[]> fa) {\n+        double[] a = fa.apply(SPECIES.length());\n+        double id = MAX_IDENTITY;\n+\n+        Assert.assertEquals((double) Math.max(id, id), id,\n+                            \"MAX(MAX_IDENTITY, MAX_IDENTITY) != MAX_IDENTITY\");\n+\n+        double x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((double) Math.max(id, x), x);\n+                Assert.assertEquals((double) Math.max(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((double) Math.max(id, x), x,\n+                                \"MAX(MAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((double) Math.max(x, id), x,\n+                                \"MAX(\" + x + \", MAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2652,1 +2715,1 @@\n-        double res = Double.NEGATIVE_INFINITY;\n+        double res = MAX_IDENTITY;\n@@ -2662,1 +2725,1 @@\n-        double res = Double.NEGATIVE_INFINITY;\n+        double res = MAX_IDENTITY;\n@@ -2676,8 +2739,1 @@\n-        double ra = Double.NEGATIVE_INFINITY;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX, vmask);\n-            }\n-        }\n+        double ra = 0;\n@@ -2686,1 +2742,1 @@\n-            ra = Double.NEGATIVE_INFINITY;\n+            ra = MAX_IDENTITY;\n@@ -2689,1 +2745,3 @@\n-                ra = (double) Math.max(ra, av.reduceLanes(VectorOperators.MAX, vmask));\n+                double v = av.reduceLanes(VectorOperators.MAX, vmask);\n+                r[i] = v;\n+                ra = (double) Math.max(ra, v);\n@@ -2698,1 +2756,1 @@\n-        double res = (double) 0;\n+        double res = FIRST_NONZERO_IDENTITY;\n@@ -2707,1 +2765,1 @@\n-        double res = (double) 0;\n+        double res = FIRST_NONZERO_IDENTITY;\n@@ -2719,8 +2777,1 @@\n-        double ra = (double) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n-            }\n-        }\n+        double ra = 0;\n@@ -2729,1 +2780,1 @@\n-            ra = (double) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -2732,1 +2783,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO));\n+                double v = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -2740,0 +2793,23 @@\n+    @Test(dataProvider = \"doubleUnaryOpProvider\")\n+    static void FIRST_NONZEROReduceIdentityValueTests(IntFunction<double[]> fa) {\n+        double[] a = fa.apply(SPECIES.length());\n+        double id = FIRST_NONZERO_IDENTITY;\n+\n+        Assert.assertEquals(firstNonZero(id, id), id,\n+                            \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, FIRST_NONZERO_IDENTITY) != FIRST_NONZERO_IDENTITY\");\n+\n+        double x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals(firstNonZero(id, x), x);\n+                Assert.assertEquals(firstNonZero(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals(firstNonZero(id, x), x,\n+                                \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals(firstNonZero(x, id), x,\n+                                \"FIRST_NONZERO(\" + x + \", FIRST_NONZERO_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2741,1 +2817,1 @@\n-        double res = (double) 0;\n+        double res = FIRST_NONZERO_IDENTITY;\n@@ -2751,1 +2827,1 @@\n-        double res = (double) 0;\n+        double res = FIRST_NONZERO_IDENTITY;\n@@ -2765,8 +2841,1 @@\n-        double ra = (double) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n-            }\n-        }\n+        double ra = 0;\n@@ -2775,1 +2844,1 @@\n-            ra = (double) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -2778,1 +2847,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask));\n+                double v = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/Double512VectorTests.java","additions":190,"deletions":119,"binary":false,"changes":309,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -65,0 +65,6 @@\n+    \/\/ Identity values for reduction operations\n+    private static final double ADD_IDENTITY = (double)0;\n+    private static final double FIRST_NONZERO_IDENTITY = (double)0;\n+    private static final double MAX_IDENTITY = Double.NEGATIVE_INFINITY;\n+    private static final double MIN_IDENTITY = Double.POSITIVE_INFINITY;\n+    private static final double MUL_IDENTITY = (double)1;\n@@ -2342,1 +2348,1 @@\n-        double res = 0;\n+        double res = ADD_IDENTITY;\n@@ -2351,1 +2357,1 @@\n-        double res = 0;\n+        double res = ADD_IDENTITY;\n@@ -2366,0 +2372,1 @@\n+            ra = ADD_IDENTITY;\n@@ -2368,9 +2375,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD);\n+                double v = av.reduceLanes(VectorOperators.ADD);\n+                r[i] = v;\n+                ra += v;\n@@ -2384,0 +2385,23 @@\n+    @Test(dataProvider = \"doubleUnaryOpProvider\")\n+    static void ADDReduceIdentityValueTests(IntFunction<double[]> fa) {\n+        double[] a = fa.apply(SPECIES.length());\n+        double id = ADD_IDENTITY;\n+\n+        Assert.assertEquals((double) (id + id), id,\n+                            \"ADD(ADD_IDENTITY, ADD_IDENTITY) != ADD_IDENTITY\");\n+\n+        double x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((double) (id + x), x);\n+                Assert.assertEquals((double) (x + id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((double) (id + x), x,\n+                                \"ADD(ADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((double) (x + id), x,\n+                                \"ADD(\" + x + \", ADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2385,1 +2409,1 @@\n-        double res = 0;\n+        double res = ADD_IDENTITY;\n@@ -2395,1 +2419,1 @@\n-        double res = 0;\n+        double res = ADD_IDENTITY;\n@@ -2412,0 +2436,1 @@\n+            ra = ADD_IDENTITY;\n@@ -2414,9 +2439,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD, vmask);\n+                double v = av.reduceLanes(VectorOperators.ADD, vmask);\n+                r[i] = v;\n+                ra += v;\n@@ -2431,1 +2450,1 @@\n-        double res = 1;\n+        double res = MUL_IDENTITY;\n@@ -2440,1 +2459,1 @@\n-        double res = 1;\n+        double res = MUL_IDENTITY;\n@@ -2452,8 +2471,1 @@\n-        double ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL);\n-            }\n-        }\n+        double ra = 0;\n@@ -2462,1 +2474,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -2465,1 +2477,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL);\n+                double v = av.reduceLanes(VectorOperators.MUL);\n+                r[i] = v;\n+                ra *= v;\n@@ -2473,0 +2487,23 @@\n+    @Test(dataProvider = \"doubleUnaryOpProvider\")\n+    static void MULReduceIdentityValueTests(IntFunction<double[]> fa) {\n+        double[] a = fa.apply(SPECIES.length());\n+        double id = MUL_IDENTITY;\n+\n+        Assert.assertEquals((double) (id * id), id,\n+                            \"MUL(MUL_IDENTITY, MUL_IDENTITY) != MUL_IDENTITY\");\n+\n+        double x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((double) (id * x), x);\n+                Assert.assertEquals((double) (x * id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((double) (id * x), x,\n+                                \"MUL(MUL_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((double) (x * id), x,\n+                                \"MUL(\" + x + \", MUL_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2474,1 +2511,1 @@\n-        double res = 1;\n+        double res = MUL_IDENTITY;\n@@ -2484,1 +2521,1 @@\n-        double res = 1;\n+        double res = MUL_IDENTITY;\n@@ -2498,8 +2535,1 @@\n-        double ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL, vmask);\n-            }\n-        }\n+        double ra = 0;\n@@ -2508,1 +2538,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -2511,1 +2541,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL, vmask);\n+                double v = av.reduceLanes(VectorOperators.MUL, vmask);\n+                r[i] = v;\n+                ra *= v;\n@@ -2520,1 +2552,1 @@\n-        double res = Double.POSITIVE_INFINITY;\n+        double res = MIN_IDENTITY;\n@@ -2529,1 +2561,1 @@\n-        double res = Double.POSITIVE_INFINITY;\n+        double res = MIN_IDENTITY;\n@@ -2541,8 +2573,1 @@\n-        double ra = Double.POSITIVE_INFINITY;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN);\n-            }\n-        }\n+        double ra = 0;\n@@ -2551,1 +2576,1 @@\n-            ra = Double.POSITIVE_INFINITY;\n+            ra = MIN_IDENTITY;\n@@ -2554,1 +2579,3 @@\n-                ra = (double) Math.min(ra, av.reduceLanes(VectorOperators.MIN));\n+                double v = av.reduceLanes(VectorOperators.MIN);\n+                r[i] = v;\n+                ra = (double) Math.min(ra, v);\n@@ -2562,0 +2589,23 @@\n+    @Test(dataProvider = \"doubleUnaryOpProvider\")\n+    static void MINReduceIdentityValueTests(IntFunction<double[]> fa) {\n+        double[] a = fa.apply(SPECIES.length());\n+        double id = MIN_IDENTITY;\n+\n+        Assert.assertEquals((double) Math.min(id, id), id,\n+                            \"MIN(MIN_IDENTITY, MIN_IDENTITY) != MIN_IDENTITY\");\n+\n+        double x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((double) Math.min(id, x), x);\n+                Assert.assertEquals((double) Math.min(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((double) Math.min(id, x), x,\n+                                \"MIN(MIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((double) Math.min(x, id), x,\n+                                \"MIN(\" + x + \", MIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2563,1 +2613,1 @@\n-        double res = Double.POSITIVE_INFINITY;\n+        double res = MIN_IDENTITY;\n@@ -2573,1 +2623,1 @@\n-        double res = Double.POSITIVE_INFINITY;\n+        double res = MIN_IDENTITY;\n@@ -2587,8 +2637,1 @@\n-        double ra = Double.POSITIVE_INFINITY;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN, vmask);\n-            }\n-        }\n+        double ra = 0;\n@@ -2597,1 +2640,1 @@\n-            ra = Double.POSITIVE_INFINITY;\n+            ra = MIN_IDENTITY;\n@@ -2600,1 +2643,3 @@\n-                ra = (double) Math.min(ra, av.reduceLanes(VectorOperators.MIN, vmask));\n+                double v = av.reduceLanes(VectorOperators.MIN, vmask);\n+                r[i] = v;\n+                ra = (double) Math.min(ra, v);\n@@ -2609,1 +2654,1 @@\n-        double res = Double.NEGATIVE_INFINITY;\n+        double res = MAX_IDENTITY;\n@@ -2618,1 +2663,1 @@\n-        double res = Double.NEGATIVE_INFINITY;\n+        double res = MAX_IDENTITY;\n@@ -2630,8 +2675,1 @@\n-        double ra = Double.NEGATIVE_INFINITY;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX);\n-            }\n-        }\n+        double ra = 0;\n@@ -2640,1 +2678,1 @@\n-            ra = Double.NEGATIVE_INFINITY;\n+            ra = MAX_IDENTITY;\n@@ -2643,1 +2681,3 @@\n-                ra = (double) Math.max(ra, av.reduceLanes(VectorOperators.MAX));\n+                double v = av.reduceLanes(VectorOperators.MAX);\n+                r[i] = v;\n+                ra = (double) Math.max(ra, v);\n@@ -2651,0 +2691,23 @@\n+    @Test(dataProvider = \"doubleUnaryOpProvider\")\n+    static void MAXReduceIdentityValueTests(IntFunction<double[]> fa) {\n+        double[] a = fa.apply(SPECIES.length());\n+        double id = MAX_IDENTITY;\n+\n+        Assert.assertEquals((double) Math.max(id, id), id,\n+                            \"MAX(MAX_IDENTITY, MAX_IDENTITY) != MAX_IDENTITY\");\n+\n+        double x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((double) Math.max(id, x), x);\n+                Assert.assertEquals((double) Math.max(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((double) Math.max(id, x), x,\n+                                \"MAX(MAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((double) Math.max(x, id), x,\n+                                \"MAX(\" + x + \", MAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2652,1 +2715,1 @@\n-        double res = Double.NEGATIVE_INFINITY;\n+        double res = MAX_IDENTITY;\n@@ -2662,1 +2725,1 @@\n-        double res = Double.NEGATIVE_INFINITY;\n+        double res = MAX_IDENTITY;\n@@ -2676,8 +2739,1 @@\n-        double ra = Double.NEGATIVE_INFINITY;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX, vmask);\n-            }\n-        }\n+        double ra = 0;\n@@ -2686,1 +2742,1 @@\n-            ra = Double.NEGATIVE_INFINITY;\n+            ra = MAX_IDENTITY;\n@@ -2689,1 +2745,3 @@\n-                ra = (double) Math.max(ra, av.reduceLanes(VectorOperators.MAX, vmask));\n+                double v = av.reduceLanes(VectorOperators.MAX, vmask);\n+                r[i] = v;\n+                ra = (double) Math.max(ra, v);\n@@ -2698,1 +2756,1 @@\n-        double res = (double) 0;\n+        double res = FIRST_NONZERO_IDENTITY;\n@@ -2707,1 +2765,1 @@\n-        double res = (double) 0;\n+        double res = FIRST_NONZERO_IDENTITY;\n@@ -2719,8 +2777,1 @@\n-        double ra = (double) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n-            }\n-        }\n+        double ra = 0;\n@@ -2729,1 +2780,1 @@\n-            ra = (double) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -2732,1 +2783,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO));\n+                double v = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -2740,0 +2793,23 @@\n+    @Test(dataProvider = \"doubleUnaryOpProvider\")\n+    static void FIRST_NONZEROReduceIdentityValueTests(IntFunction<double[]> fa) {\n+        double[] a = fa.apply(SPECIES.length());\n+        double id = FIRST_NONZERO_IDENTITY;\n+\n+        Assert.assertEquals(firstNonZero(id, id), id,\n+                            \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, FIRST_NONZERO_IDENTITY) != FIRST_NONZERO_IDENTITY\");\n+\n+        double x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals(firstNonZero(id, x), x);\n+                Assert.assertEquals(firstNonZero(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals(firstNonZero(id, x), x,\n+                                \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals(firstNonZero(x, id), x,\n+                                \"FIRST_NONZERO(\" + x + \", FIRST_NONZERO_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2741,1 +2817,1 @@\n-        double res = (double) 0;\n+        double res = FIRST_NONZERO_IDENTITY;\n@@ -2751,1 +2827,1 @@\n-        double res = (double) 0;\n+        double res = FIRST_NONZERO_IDENTITY;\n@@ -2765,8 +2841,1 @@\n-        double ra = (double) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n-            }\n-        }\n+        double ra = 0;\n@@ -2775,1 +2844,1 @@\n-            ra = (double) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -2778,1 +2847,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask));\n+                double v = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/Double64VectorTests.java","additions":190,"deletions":119,"binary":false,"changes":309,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -71,0 +71,7 @@\n+    \/\/ Identity values for reduction operations\n+    private static final double ADD_IDENTITY = (double)0;\n+    private static final double FIRST_NONZERO_IDENTITY = (double)0;\n+    private static final double MAX_IDENTITY = Double.NEGATIVE_INFINITY;\n+    private static final double MIN_IDENTITY = Double.POSITIVE_INFINITY;\n+    private static final double MUL_IDENTITY = (double)1;\n+\n@@ -2347,1 +2354,1 @@\n-        double res = 0;\n+        double res = ADD_IDENTITY;\n@@ -2356,1 +2363,1 @@\n-        double res = 0;\n+        double res = ADD_IDENTITY;\n@@ -2371,0 +2378,1 @@\n+            ra = ADD_IDENTITY;\n@@ -2373,9 +2381,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD);\n+                double v = av.reduceLanes(VectorOperators.ADD);\n+                r[i] = v;\n+                ra += v;\n@@ -2389,0 +2391,23 @@\n+    @Test(dataProvider = \"doubleUnaryOpProvider\")\n+    static void ADDReduceIdentityValueTests(IntFunction<double[]> fa) {\n+        double[] a = fa.apply(SPECIES.length());\n+        double id = ADD_IDENTITY;\n+\n+        Assert.assertEquals((double) (id + id), id,\n+                            \"ADD(ADD_IDENTITY, ADD_IDENTITY) != ADD_IDENTITY\");\n+\n+        double x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((double) (id + x), x);\n+                Assert.assertEquals((double) (x + id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((double) (id + x), x,\n+                                \"ADD(ADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((double) (x + id), x,\n+                                \"ADD(\" + x + \", ADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2390,1 +2415,1 @@\n-        double res = 0;\n+        double res = ADD_IDENTITY;\n@@ -2400,1 +2425,1 @@\n-        double res = 0;\n+        double res = ADD_IDENTITY;\n@@ -2417,0 +2442,1 @@\n+            ra = ADD_IDENTITY;\n@@ -2419,9 +2445,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD, vmask);\n+                double v = av.reduceLanes(VectorOperators.ADD, vmask);\n+                r[i] = v;\n+                ra += v;\n@@ -2436,1 +2456,1 @@\n-        double res = 1;\n+        double res = MUL_IDENTITY;\n@@ -2445,1 +2465,1 @@\n-        double res = 1;\n+        double res = MUL_IDENTITY;\n@@ -2457,8 +2477,1 @@\n-        double ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL);\n-            }\n-        }\n+        double ra = 0;\n@@ -2467,1 +2480,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -2470,1 +2483,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL);\n+                double v = av.reduceLanes(VectorOperators.MUL);\n+                r[i] = v;\n+                ra *= v;\n@@ -2478,0 +2493,23 @@\n+    @Test(dataProvider = \"doubleUnaryOpProvider\")\n+    static void MULReduceIdentityValueTests(IntFunction<double[]> fa) {\n+        double[] a = fa.apply(SPECIES.length());\n+        double id = MUL_IDENTITY;\n+\n+        Assert.assertEquals((double) (id * id), id,\n+                            \"MUL(MUL_IDENTITY, MUL_IDENTITY) != MUL_IDENTITY\");\n+\n+        double x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((double) (id * x), x);\n+                Assert.assertEquals((double) (x * id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((double) (id * x), x,\n+                                \"MUL(MUL_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((double) (x * id), x,\n+                                \"MUL(\" + x + \", MUL_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2479,1 +2517,1 @@\n-        double res = 1;\n+        double res = MUL_IDENTITY;\n@@ -2489,1 +2527,1 @@\n-        double res = 1;\n+        double res = MUL_IDENTITY;\n@@ -2503,8 +2541,1 @@\n-        double ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL, vmask);\n-            }\n-        }\n+        double ra = 0;\n@@ -2513,1 +2544,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -2516,1 +2547,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL, vmask);\n+                double v = av.reduceLanes(VectorOperators.MUL, vmask);\n+                r[i] = v;\n+                ra *= v;\n@@ -2525,1 +2558,1 @@\n-        double res = Double.POSITIVE_INFINITY;\n+        double res = MIN_IDENTITY;\n@@ -2534,1 +2567,1 @@\n-        double res = Double.POSITIVE_INFINITY;\n+        double res = MIN_IDENTITY;\n@@ -2546,8 +2579,1 @@\n-        double ra = Double.POSITIVE_INFINITY;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN);\n-            }\n-        }\n+        double ra = 0;\n@@ -2556,1 +2582,1 @@\n-            ra = Double.POSITIVE_INFINITY;\n+            ra = MIN_IDENTITY;\n@@ -2559,1 +2585,3 @@\n-                ra = (double) Math.min(ra, av.reduceLanes(VectorOperators.MIN));\n+                double v = av.reduceLanes(VectorOperators.MIN);\n+                r[i] = v;\n+                ra = (double) Math.min(ra, v);\n@@ -2567,0 +2595,23 @@\n+    @Test(dataProvider = \"doubleUnaryOpProvider\")\n+    static void MINReduceIdentityValueTests(IntFunction<double[]> fa) {\n+        double[] a = fa.apply(SPECIES.length());\n+        double id = MIN_IDENTITY;\n+\n+        Assert.assertEquals((double) Math.min(id, id), id,\n+                            \"MIN(MIN_IDENTITY, MIN_IDENTITY) != MIN_IDENTITY\");\n+\n+        double x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((double) Math.min(id, x), x);\n+                Assert.assertEquals((double) Math.min(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((double) Math.min(id, x), x,\n+                                \"MIN(MIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((double) Math.min(x, id), x,\n+                                \"MIN(\" + x + \", MIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2568,1 +2619,1 @@\n-        double res = Double.POSITIVE_INFINITY;\n+        double res = MIN_IDENTITY;\n@@ -2578,1 +2629,1 @@\n-        double res = Double.POSITIVE_INFINITY;\n+        double res = MIN_IDENTITY;\n@@ -2592,8 +2643,1 @@\n-        double ra = Double.POSITIVE_INFINITY;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN, vmask);\n-            }\n-        }\n+        double ra = 0;\n@@ -2602,1 +2646,1 @@\n-            ra = Double.POSITIVE_INFINITY;\n+            ra = MIN_IDENTITY;\n@@ -2605,1 +2649,3 @@\n-                ra = (double) Math.min(ra, av.reduceLanes(VectorOperators.MIN, vmask));\n+                double v = av.reduceLanes(VectorOperators.MIN, vmask);\n+                r[i] = v;\n+                ra = (double) Math.min(ra, v);\n@@ -2614,1 +2660,1 @@\n-        double res = Double.NEGATIVE_INFINITY;\n+        double res = MAX_IDENTITY;\n@@ -2623,1 +2669,1 @@\n-        double res = Double.NEGATIVE_INFINITY;\n+        double res = MAX_IDENTITY;\n@@ -2635,8 +2681,1 @@\n-        double ra = Double.NEGATIVE_INFINITY;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX);\n-            }\n-        }\n+        double ra = 0;\n@@ -2645,1 +2684,1 @@\n-            ra = Double.NEGATIVE_INFINITY;\n+            ra = MAX_IDENTITY;\n@@ -2648,1 +2687,3 @@\n-                ra = (double) Math.max(ra, av.reduceLanes(VectorOperators.MAX));\n+                double v = av.reduceLanes(VectorOperators.MAX);\n+                r[i] = v;\n+                ra = (double) Math.max(ra, v);\n@@ -2656,0 +2697,23 @@\n+    @Test(dataProvider = \"doubleUnaryOpProvider\")\n+    static void MAXReduceIdentityValueTests(IntFunction<double[]> fa) {\n+        double[] a = fa.apply(SPECIES.length());\n+        double id = MAX_IDENTITY;\n+\n+        Assert.assertEquals((double) Math.max(id, id), id,\n+                            \"MAX(MAX_IDENTITY, MAX_IDENTITY) != MAX_IDENTITY\");\n+\n+        double x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((double) Math.max(id, x), x);\n+                Assert.assertEquals((double) Math.max(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((double) Math.max(id, x), x,\n+                                \"MAX(MAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((double) Math.max(x, id), x,\n+                                \"MAX(\" + x + \", MAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2657,1 +2721,1 @@\n-        double res = Double.NEGATIVE_INFINITY;\n+        double res = MAX_IDENTITY;\n@@ -2667,1 +2731,1 @@\n-        double res = Double.NEGATIVE_INFINITY;\n+        double res = MAX_IDENTITY;\n@@ -2681,8 +2745,1 @@\n-        double ra = Double.NEGATIVE_INFINITY;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX, vmask);\n-            }\n-        }\n+        double ra = 0;\n@@ -2691,1 +2748,1 @@\n-            ra = Double.NEGATIVE_INFINITY;\n+            ra = MAX_IDENTITY;\n@@ -2694,1 +2751,3 @@\n-                ra = (double) Math.max(ra, av.reduceLanes(VectorOperators.MAX, vmask));\n+                double v = av.reduceLanes(VectorOperators.MAX, vmask);\n+                r[i] = v;\n+                ra = (double) Math.max(ra, v);\n@@ -2703,1 +2762,1 @@\n-        double res = (double) 0;\n+        double res = FIRST_NONZERO_IDENTITY;\n@@ -2712,1 +2771,1 @@\n-        double res = (double) 0;\n+        double res = FIRST_NONZERO_IDENTITY;\n@@ -2724,8 +2783,1 @@\n-        double ra = (double) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n-            }\n-        }\n+        double ra = 0;\n@@ -2734,1 +2786,1 @@\n-            ra = (double) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -2737,1 +2789,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO));\n+                double v = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -2745,0 +2799,23 @@\n+    @Test(dataProvider = \"doubleUnaryOpProvider\")\n+    static void FIRST_NONZEROReduceIdentityValueTests(IntFunction<double[]> fa) {\n+        double[] a = fa.apply(SPECIES.length());\n+        double id = FIRST_NONZERO_IDENTITY;\n+\n+        Assert.assertEquals(firstNonZero(id, id), id,\n+                            \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, FIRST_NONZERO_IDENTITY) != FIRST_NONZERO_IDENTITY\");\n+\n+        double x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals(firstNonZero(id, x), x);\n+                Assert.assertEquals(firstNonZero(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals(firstNonZero(id, x), x,\n+                                \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals(firstNonZero(x, id), x,\n+                                \"FIRST_NONZERO(\" + x + \", FIRST_NONZERO_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2746,1 +2823,1 @@\n-        double res = (double) 0;\n+        double res = FIRST_NONZERO_IDENTITY;\n@@ -2756,1 +2833,1 @@\n-        double res = (double) 0;\n+        double res = FIRST_NONZERO_IDENTITY;\n@@ -2770,8 +2847,1 @@\n-        double ra = (double) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                DoubleVector av = DoubleVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n-            }\n-        }\n+        double ra = 0;\n@@ -2780,1 +2850,1 @@\n-            ra = (double) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -2783,1 +2853,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask));\n+                double v = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/DoubleMaxVectorTests.java","additions":191,"deletions":119,"binary":false,"changes":310,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -65,0 +65,6 @@\n+    \/\/ Identity values for reduction operations\n+    private static final float ADD_IDENTITY = (float)0;\n+    private static final float FIRST_NONZERO_IDENTITY = (float)0;\n+    private static final float MAX_IDENTITY = Float.NEGATIVE_INFINITY;\n+    private static final float MIN_IDENTITY = Float.POSITIVE_INFINITY;\n+    private static final float MUL_IDENTITY = (float)1;\n@@ -2353,1 +2359,1 @@\n-        float res = 0;\n+        float res = ADD_IDENTITY;\n@@ -2362,1 +2368,1 @@\n-        float res = 0;\n+        float res = ADD_IDENTITY;\n@@ -2377,0 +2383,1 @@\n+            ra = ADD_IDENTITY;\n@@ -2379,9 +2386,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD);\n+                float v = av.reduceLanes(VectorOperators.ADD);\n+                r[i] = v;\n+                ra += v;\n@@ -2395,0 +2396,23 @@\n+    @Test(dataProvider = \"floatUnaryOpProvider\")\n+    static void ADDReduceIdentityValueTests(IntFunction<float[]> fa) {\n+        float[] a = fa.apply(SPECIES.length());\n+        float id = ADD_IDENTITY;\n+\n+        Assert.assertEquals((float) (id + id), id,\n+                            \"ADD(ADD_IDENTITY, ADD_IDENTITY) != ADD_IDENTITY\");\n+\n+        float x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((float) (id + x), x);\n+                Assert.assertEquals((float) (x + id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((float) (id + x), x,\n+                                \"ADD(ADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((float) (x + id), x,\n+                                \"ADD(\" + x + \", ADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2396,1 +2420,1 @@\n-        float res = 0;\n+        float res = ADD_IDENTITY;\n@@ -2406,1 +2430,1 @@\n-        float res = 0;\n+        float res = ADD_IDENTITY;\n@@ -2423,0 +2447,1 @@\n+            ra = ADD_IDENTITY;\n@@ -2425,9 +2450,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD, vmask);\n+                float v = av.reduceLanes(VectorOperators.ADD, vmask);\n+                r[i] = v;\n+                ra += v;\n@@ -2442,1 +2461,1 @@\n-        float res = 1;\n+        float res = MUL_IDENTITY;\n@@ -2451,1 +2470,1 @@\n-        float res = 1;\n+        float res = MUL_IDENTITY;\n@@ -2463,8 +2482,1 @@\n-        float ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL);\n-            }\n-        }\n+        float ra = 0;\n@@ -2473,1 +2485,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -2476,1 +2488,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL);\n+                float v = av.reduceLanes(VectorOperators.MUL);\n+                r[i] = v;\n+                ra *= v;\n@@ -2484,0 +2498,23 @@\n+    @Test(dataProvider = \"floatUnaryOpProvider\")\n+    static void MULReduceIdentityValueTests(IntFunction<float[]> fa) {\n+        float[] a = fa.apply(SPECIES.length());\n+        float id = MUL_IDENTITY;\n+\n+        Assert.assertEquals((float) (id * id), id,\n+                            \"MUL(MUL_IDENTITY, MUL_IDENTITY) != MUL_IDENTITY\");\n+\n+        float x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((float) (id * x), x);\n+                Assert.assertEquals((float) (x * id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((float) (id * x), x,\n+                                \"MUL(MUL_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((float) (x * id), x,\n+                                \"MUL(\" + x + \", MUL_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2485,1 +2522,1 @@\n-        float res = 1;\n+        float res = MUL_IDENTITY;\n@@ -2495,1 +2532,1 @@\n-        float res = 1;\n+        float res = MUL_IDENTITY;\n@@ -2509,8 +2546,1 @@\n-        float ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL, vmask);\n-            }\n-        }\n+        float ra = 0;\n@@ -2519,1 +2549,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -2522,1 +2552,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL, vmask);\n+                float v = av.reduceLanes(VectorOperators.MUL, vmask);\n+                r[i] = v;\n+                ra *= v;\n@@ -2531,1 +2563,1 @@\n-        float res = Float.POSITIVE_INFINITY;\n+        float res = MIN_IDENTITY;\n@@ -2540,1 +2572,1 @@\n-        float res = Float.POSITIVE_INFINITY;\n+        float res = MIN_IDENTITY;\n@@ -2552,8 +2584,1 @@\n-        float ra = Float.POSITIVE_INFINITY;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN);\n-            }\n-        }\n+        float ra = 0;\n@@ -2562,1 +2587,1 @@\n-            ra = Float.POSITIVE_INFINITY;\n+            ra = MIN_IDENTITY;\n@@ -2565,1 +2590,3 @@\n-                ra = (float) Math.min(ra, av.reduceLanes(VectorOperators.MIN));\n+                float v = av.reduceLanes(VectorOperators.MIN);\n+                r[i] = v;\n+                ra = (float) Math.min(ra, v);\n@@ -2573,0 +2600,23 @@\n+    @Test(dataProvider = \"floatUnaryOpProvider\")\n+    static void MINReduceIdentityValueTests(IntFunction<float[]> fa) {\n+        float[] a = fa.apply(SPECIES.length());\n+        float id = MIN_IDENTITY;\n+\n+        Assert.assertEquals((float) Math.min(id, id), id,\n+                            \"MIN(MIN_IDENTITY, MIN_IDENTITY) != MIN_IDENTITY\");\n+\n+        float x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((float) Math.min(id, x), x);\n+                Assert.assertEquals((float) Math.min(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((float) Math.min(id, x), x,\n+                                \"MIN(MIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((float) Math.min(x, id), x,\n+                                \"MIN(\" + x + \", MIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2574,1 +2624,1 @@\n-        float res = Float.POSITIVE_INFINITY;\n+        float res = MIN_IDENTITY;\n@@ -2584,1 +2634,1 @@\n-        float res = Float.POSITIVE_INFINITY;\n+        float res = MIN_IDENTITY;\n@@ -2598,8 +2648,1 @@\n-        float ra = Float.POSITIVE_INFINITY;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN, vmask);\n-            }\n-        }\n+        float ra = 0;\n@@ -2608,1 +2651,1 @@\n-            ra = Float.POSITIVE_INFINITY;\n+            ra = MIN_IDENTITY;\n@@ -2611,1 +2654,3 @@\n-                ra = (float) Math.min(ra, av.reduceLanes(VectorOperators.MIN, vmask));\n+                float v = av.reduceLanes(VectorOperators.MIN, vmask);\n+                r[i] = v;\n+                ra = (float) Math.min(ra, v);\n@@ -2620,1 +2665,1 @@\n-        float res = Float.NEGATIVE_INFINITY;\n+        float res = MAX_IDENTITY;\n@@ -2629,1 +2674,1 @@\n-        float res = Float.NEGATIVE_INFINITY;\n+        float res = MAX_IDENTITY;\n@@ -2641,8 +2686,1 @@\n-        float ra = Float.NEGATIVE_INFINITY;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX);\n-            }\n-        }\n+        float ra = 0;\n@@ -2651,1 +2689,1 @@\n-            ra = Float.NEGATIVE_INFINITY;\n+            ra = MAX_IDENTITY;\n@@ -2654,1 +2692,3 @@\n-                ra = (float) Math.max(ra, av.reduceLanes(VectorOperators.MAX));\n+                float v = av.reduceLanes(VectorOperators.MAX);\n+                r[i] = v;\n+                ra = (float) Math.max(ra, v);\n@@ -2662,0 +2702,23 @@\n+    @Test(dataProvider = \"floatUnaryOpProvider\")\n+    static void MAXReduceIdentityValueTests(IntFunction<float[]> fa) {\n+        float[] a = fa.apply(SPECIES.length());\n+        float id = MAX_IDENTITY;\n+\n+        Assert.assertEquals((float) Math.max(id, id), id,\n+                            \"MAX(MAX_IDENTITY, MAX_IDENTITY) != MAX_IDENTITY\");\n+\n+        float x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((float) Math.max(id, x), x);\n+                Assert.assertEquals((float) Math.max(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((float) Math.max(id, x), x,\n+                                \"MAX(MAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((float) Math.max(x, id), x,\n+                                \"MAX(\" + x + \", MAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2663,1 +2726,1 @@\n-        float res = Float.NEGATIVE_INFINITY;\n+        float res = MAX_IDENTITY;\n@@ -2673,1 +2736,1 @@\n-        float res = Float.NEGATIVE_INFINITY;\n+        float res = MAX_IDENTITY;\n@@ -2687,8 +2750,1 @@\n-        float ra = Float.NEGATIVE_INFINITY;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX, vmask);\n-            }\n-        }\n+        float ra = 0;\n@@ -2697,1 +2753,1 @@\n-            ra = Float.NEGATIVE_INFINITY;\n+            ra = MAX_IDENTITY;\n@@ -2700,1 +2756,3 @@\n-                ra = (float) Math.max(ra, av.reduceLanes(VectorOperators.MAX, vmask));\n+                float v = av.reduceLanes(VectorOperators.MAX, vmask);\n+                r[i] = v;\n+                ra = (float) Math.max(ra, v);\n@@ -2709,1 +2767,1 @@\n-        float res = (float) 0;\n+        float res = FIRST_NONZERO_IDENTITY;\n@@ -2718,1 +2776,1 @@\n-        float res = (float) 0;\n+        float res = FIRST_NONZERO_IDENTITY;\n@@ -2730,8 +2788,1 @@\n-        float ra = (float) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n-            }\n-        }\n+        float ra = 0;\n@@ -2740,1 +2791,1 @@\n-            ra = (float) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -2743,1 +2794,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO));\n+                float v = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -2751,0 +2804,23 @@\n+    @Test(dataProvider = \"floatUnaryOpProvider\")\n+    static void FIRST_NONZEROReduceIdentityValueTests(IntFunction<float[]> fa) {\n+        float[] a = fa.apply(SPECIES.length());\n+        float id = FIRST_NONZERO_IDENTITY;\n+\n+        Assert.assertEquals(firstNonZero(id, id), id,\n+                            \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, FIRST_NONZERO_IDENTITY) != FIRST_NONZERO_IDENTITY\");\n+\n+        float x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals(firstNonZero(id, x), x);\n+                Assert.assertEquals(firstNonZero(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals(firstNonZero(id, x), x,\n+                                \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals(firstNonZero(x, id), x,\n+                                \"FIRST_NONZERO(\" + x + \", FIRST_NONZERO_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2752,1 +2828,1 @@\n-        float res = (float) 0;\n+        float res = FIRST_NONZERO_IDENTITY;\n@@ -2762,1 +2838,1 @@\n-        float res = (float) 0;\n+        float res = FIRST_NONZERO_IDENTITY;\n@@ -2776,8 +2852,1 @@\n-        float ra = (float) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n-            }\n-        }\n+        float ra = 0;\n@@ -2786,1 +2855,1 @@\n-            ra = (float) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -2789,1 +2858,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask));\n+                float v = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/Float128VectorTests.java","additions":190,"deletions":119,"binary":false,"changes":309,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -65,0 +65,6 @@\n+    \/\/ Identity values for reduction operations\n+    private static final float ADD_IDENTITY = (float)0;\n+    private static final float FIRST_NONZERO_IDENTITY = (float)0;\n+    private static final float MAX_IDENTITY = Float.NEGATIVE_INFINITY;\n+    private static final float MIN_IDENTITY = Float.POSITIVE_INFINITY;\n+    private static final float MUL_IDENTITY = (float)1;\n@@ -2353,1 +2359,1 @@\n-        float res = 0;\n+        float res = ADD_IDENTITY;\n@@ -2362,1 +2368,1 @@\n-        float res = 0;\n+        float res = ADD_IDENTITY;\n@@ -2377,0 +2383,1 @@\n+            ra = ADD_IDENTITY;\n@@ -2379,9 +2386,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD);\n+                float v = av.reduceLanes(VectorOperators.ADD);\n+                r[i] = v;\n+                ra += v;\n@@ -2395,0 +2396,23 @@\n+    @Test(dataProvider = \"floatUnaryOpProvider\")\n+    static void ADDReduceIdentityValueTests(IntFunction<float[]> fa) {\n+        float[] a = fa.apply(SPECIES.length());\n+        float id = ADD_IDENTITY;\n+\n+        Assert.assertEquals((float) (id + id), id,\n+                            \"ADD(ADD_IDENTITY, ADD_IDENTITY) != ADD_IDENTITY\");\n+\n+        float x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((float) (id + x), x);\n+                Assert.assertEquals((float) (x + id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((float) (id + x), x,\n+                                \"ADD(ADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((float) (x + id), x,\n+                                \"ADD(\" + x + \", ADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2396,1 +2420,1 @@\n-        float res = 0;\n+        float res = ADD_IDENTITY;\n@@ -2406,1 +2430,1 @@\n-        float res = 0;\n+        float res = ADD_IDENTITY;\n@@ -2423,0 +2447,1 @@\n+            ra = ADD_IDENTITY;\n@@ -2425,9 +2450,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD, vmask);\n+                float v = av.reduceLanes(VectorOperators.ADD, vmask);\n+                r[i] = v;\n+                ra += v;\n@@ -2442,1 +2461,1 @@\n-        float res = 1;\n+        float res = MUL_IDENTITY;\n@@ -2451,1 +2470,1 @@\n-        float res = 1;\n+        float res = MUL_IDENTITY;\n@@ -2463,8 +2482,1 @@\n-        float ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL);\n-            }\n-        }\n+        float ra = 0;\n@@ -2473,1 +2485,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -2476,1 +2488,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL);\n+                float v = av.reduceLanes(VectorOperators.MUL);\n+                r[i] = v;\n+                ra *= v;\n@@ -2484,0 +2498,23 @@\n+    @Test(dataProvider = \"floatUnaryOpProvider\")\n+    static void MULReduceIdentityValueTests(IntFunction<float[]> fa) {\n+        float[] a = fa.apply(SPECIES.length());\n+        float id = MUL_IDENTITY;\n+\n+        Assert.assertEquals((float) (id * id), id,\n+                            \"MUL(MUL_IDENTITY, MUL_IDENTITY) != MUL_IDENTITY\");\n+\n+        float x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((float) (id * x), x);\n+                Assert.assertEquals((float) (x * id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((float) (id * x), x,\n+                                \"MUL(MUL_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((float) (x * id), x,\n+                                \"MUL(\" + x + \", MUL_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2485,1 +2522,1 @@\n-        float res = 1;\n+        float res = MUL_IDENTITY;\n@@ -2495,1 +2532,1 @@\n-        float res = 1;\n+        float res = MUL_IDENTITY;\n@@ -2509,8 +2546,1 @@\n-        float ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL, vmask);\n-            }\n-        }\n+        float ra = 0;\n@@ -2519,1 +2549,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -2522,1 +2552,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL, vmask);\n+                float v = av.reduceLanes(VectorOperators.MUL, vmask);\n+                r[i] = v;\n+                ra *= v;\n@@ -2531,1 +2563,1 @@\n-        float res = Float.POSITIVE_INFINITY;\n+        float res = MIN_IDENTITY;\n@@ -2540,1 +2572,1 @@\n-        float res = Float.POSITIVE_INFINITY;\n+        float res = MIN_IDENTITY;\n@@ -2552,8 +2584,1 @@\n-        float ra = Float.POSITIVE_INFINITY;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN);\n-            }\n-        }\n+        float ra = 0;\n@@ -2562,1 +2587,1 @@\n-            ra = Float.POSITIVE_INFINITY;\n+            ra = MIN_IDENTITY;\n@@ -2565,1 +2590,3 @@\n-                ra = (float) Math.min(ra, av.reduceLanes(VectorOperators.MIN));\n+                float v = av.reduceLanes(VectorOperators.MIN);\n+                r[i] = v;\n+                ra = (float) Math.min(ra, v);\n@@ -2573,0 +2600,23 @@\n+    @Test(dataProvider = \"floatUnaryOpProvider\")\n+    static void MINReduceIdentityValueTests(IntFunction<float[]> fa) {\n+        float[] a = fa.apply(SPECIES.length());\n+        float id = MIN_IDENTITY;\n+\n+        Assert.assertEquals((float) Math.min(id, id), id,\n+                            \"MIN(MIN_IDENTITY, MIN_IDENTITY) != MIN_IDENTITY\");\n+\n+        float x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((float) Math.min(id, x), x);\n+                Assert.assertEquals((float) Math.min(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((float) Math.min(id, x), x,\n+                                \"MIN(MIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((float) Math.min(x, id), x,\n+                                \"MIN(\" + x + \", MIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2574,1 +2624,1 @@\n-        float res = Float.POSITIVE_INFINITY;\n+        float res = MIN_IDENTITY;\n@@ -2584,1 +2634,1 @@\n-        float res = Float.POSITIVE_INFINITY;\n+        float res = MIN_IDENTITY;\n@@ -2598,8 +2648,1 @@\n-        float ra = Float.POSITIVE_INFINITY;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN, vmask);\n-            }\n-        }\n+        float ra = 0;\n@@ -2608,1 +2651,1 @@\n-            ra = Float.POSITIVE_INFINITY;\n+            ra = MIN_IDENTITY;\n@@ -2611,1 +2654,3 @@\n-                ra = (float) Math.min(ra, av.reduceLanes(VectorOperators.MIN, vmask));\n+                float v = av.reduceLanes(VectorOperators.MIN, vmask);\n+                r[i] = v;\n+                ra = (float) Math.min(ra, v);\n@@ -2620,1 +2665,1 @@\n-        float res = Float.NEGATIVE_INFINITY;\n+        float res = MAX_IDENTITY;\n@@ -2629,1 +2674,1 @@\n-        float res = Float.NEGATIVE_INFINITY;\n+        float res = MAX_IDENTITY;\n@@ -2641,8 +2686,1 @@\n-        float ra = Float.NEGATIVE_INFINITY;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX);\n-            }\n-        }\n+        float ra = 0;\n@@ -2651,1 +2689,1 @@\n-            ra = Float.NEGATIVE_INFINITY;\n+            ra = MAX_IDENTITY;\n@@ -2654,1 +2692,3 @@\n-                ra = (float) Math.max(ra, av.reduceLanes(VectorOperators.MAX));\n+                float v = av.reduceLanes(VectorOperators.MAX);\n+                r[i] = v;\n+                ra = (float) Math.max(ra, v);\n@@ -2662,0 +2702,23 @@\n+    @Test(dataProvider = \"floatUnaryOpProvider\")\n+    static void MAXReduceIdentityValueTests(IntFunction<float[]> fa) {\n+        float[] a = fa.apply(SPECIES.length());\n+        float id = MAX_IDENTITY;\n+\n+        Assert.assertEquals((float) Math.max(id, id), id,\n+                            \"MAX(MAX_IDENTITY, MAX_IDENTITY) != MAX_IDENTITY\");\n+\n+        float x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((float) Math.max(id, x), x);\n+                Assert.assertEquals((float) Math.max(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((float) Math.max(id, x), x,\n+                                \"MAX(MAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((float) Math.max(x, id), x,\n+                                \"MAX(\" + x + \", MAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2663,1 +2726,1 @@\n-        float res = Float.NEGATIVE_INFINITY;\n+        float res = MAX_IDENTITY;\n@@ -2673,1 +2736,1 @@\n-        float res = Float.NEGATIVE_INFINITY;\n+        float res = MAX_IDENTITY;\n@@ -2687,8 +2750,1 @@\n-        float ra = Float.NEGATIVE_INFINITY;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX, vmask);\n-            }\n-        }\n+        float ra = 0;\n@@ -2697,1 +2753,1 @@\n-            ra = Float.NEGATIVE_INFINITY;\n+            ra = MAX_IDENTITY;\n@@ -2700,1 +2756,3 @@\n-                ra = (float) Math.max(ra, av.reduceLanes(VectorOperators.MAX, vmask));\n+                float v = av.reduceLanes(VectorOperators.MAX, vmask);\n+                r[i] = v;\n+                ra = (float) Math.max(ra, v);\n@@ -2709,1 +2767,1 @@\n-        float res = (float) 0;\n+        float res = FIRST_NONZERO_IDENTITY;\n@@ -2718,1 +2776,1 @@\n-        float res = (float) 0;\n+        float res = FIRST_NONZERO_IDENTITY;\n@@ -2730,8 +2788,1 @@\n-        float ra = (float) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n-            }\n-        }\n+        float ra = 0;\n@@ -2740,1 +2791,1 @@\n-            ra = (float) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -2743,1 +2794,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO));\n+                float v = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -2751,0 +2804,23 @@\n+    @Test(dataProvider = \"floatUnaryOpProvider\")\n+    static void FIRST_NONZEROReduceIdentityValueTests(IntFunction<float[]> fa) {\n+        float[] a = fa.apply(SPECIES.length());\n+        float id = FIRST_NONZERO_IDENTITY;\n+\n+        Assert.assertEquals(firstNonZero(id, id), id,\n+                            \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, FIRST_NONZERO_IDENTITY) != FIRST_NONZERO_IDENTITY\");\n+\n+        float x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals(firstNonZero(id, x), x);\n+                Assert.assertEquals(firstNonZero(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals(firstNonZero(id, x), x,\n+                                \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals(firstNonZero(x, id), x,\n+                                \"FIRST_NONZERO(\" + x + \", FIRST_NONZERO_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2752,1 +2828,1 @@\n-        float res = (float) 0;\n+        float res = FIRST_NONZERO_IDENTITY;\n@@ -2762,1 +2838,1 @@\n-        float res = (float) 0;\n+        float res = FIRST_NONZERO_IDENTITY;\n@@ -2776,8 +2852,1 @@\n-        float ra = (float) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n-            }\n-        }\n+        float ra = 0;\n@@ -2786,1 +2855,1 @@\n-            ra = (float) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -2789,1 +2858,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask));\n+                float v = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/Float256VectorTests.java","additions":190,"deletions":119,"binary":false,"changes":309,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -65,0 +65,6 @@\n+    \/\/ Identity values for reduction operations\n+    private static final float ADD_IDENTITY = (float)0;\n+    private static final float FIRST_NONZERO_IDENTITY = (float)0;\n+    private static final float MAX_IDENTITY = Float.NEGATIVE_INFINITY;\n+    private static final float MIN_IDENTITY = Float.POSITIVE_INFINITY;\n+    private static final float MUL_IDENTITY = (float)1;\n@@ -2353,1 +2359,1 @@\n-        float res = 0;\n+        float res = ADD_IDENTITY;\n@@ -2362,1 +2368,1 @@\n-        float res = 0;\n+        float res = ADD_IDENTITY;\n@@ -2377,0 +2383,1 @@\n+            ra = ADD_IDENTITY;\n@@ -2379,9 +2386,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD);\n+                float v = av.reduceLanes(VectorOperators.ADD);\n+                r[i] = v;\n+                ra += v;\n@@ -2395,0 +2396,23 @@\n+    @Test(dataProvider = \"floatUnaryOpProvider\")\n+    static void ADDReduceIdentityValueTests(IntFunction<float[]> fa) {\n+        float[] a = fa.apply(SPECIES.length());\n+        float id = ADD_IDENTITY;\n+\n+        Assert.assertEquals((float) (id + id), id,\n+                            \"ADD(ADD_IDENTITY, ADD_IDENTITY) != ADD_IDENTITY\");\n+\n+        float x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((float) (id + x), x);\n+                Assert.assertEquals((float) (x + id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((float) (id + x), x,\n+                                \"ADD(ADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((float) (x + id), x,\n+                                \"ADD(\" + x + \", ADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2396,1 +2420,1 @@\n-        float res = 0;\n+        float res = ADD_IDENTITY;\n@@ -2406,1 +2430,1 @@\n-        float res = 0;\n+        float res = ADD_IDENTITY;\n@@ -2423,0 +2447,1 @@\n+            ra = ADD_IDENTITY;\n@@ -2425,9 +2450,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD, vmask);\n+                float v = av.reduceLanes(VectorOperators.ADD, vmask);\n+                r[i] = v;\n+                ra += v;\n@@ -2442,1 +2461,1 @@\n-        float res = 1;\n+        float res = MUL_IDENTITY;\n@@ -2451,1 +2470,1 @@\n-        float res = 1;\n+        float res = MUL_IDENTITY;\n@@ -2463,8 +2482,1 @@\n-        float ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL);\n-            }\n-        }\n+        float ra = 0;\n@@ -2473,1 +2485,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -2476,1 +2488,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL);\n+                float v = av.reduceLanes(VectorOperators.MUL);\n+                r[i] = v;\n+                ra *= v;\n@@ -2484,0 +2498,23 @@\n+    @Test(dataProvider = \"floatUnaryOpProvider\")\n+    static void MULReduceIdentityValueTests(IntFunction<float[]> fa) {\n+        float[] a = fa.apply(SPECIES.length());\n+        float id = MUL_IDENTITY;\n+\n+        Assert.assertEquals((float) (id * id), id,\n+                            \"MUL(MUL_IDENTITY, MUL_IDENTITY) != MUL_IDENTITY\");\n+\n+        float x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((float) (id * x), x);\n+                Assert.assertEquals((float) (x * id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((float) (id * x), x,\n+                                \"MUL(MUL_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((float) (x * id), x,\n+                                \"MUL(\" + x + \", MUL_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2485,1 +2522,1 @@\n-        float res = 1;\n+        float res = MUL_IDENTITY;\n@@ -2495,1 +2532,1 @@\n-        float res = 1;\n+        float res = MUL_IDENTITY;\n@@ -2509,8 +2546,1 @@\n-        float ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL, vmask);\n-            }\n-        }\n+        float ra = 0;\n@@ -2519,1 +2549,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -2522,1 +2552,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL, vmask);\n+                float v = av.reduceLanes(VectorOperators.MUL, vmask);\n+                r[i] = v;\n+                ra *= v;\n@@ -2531,1 +2563,1 @@\n-        float res = Float.POSITIVE_INFINITY;\n+        float res = MIN_IDENTITY;\n@@ -2540,1 +2572,1 @@\n-        float res = Float.POSITIVE_INFINITY;\n+        float res = MIN_IDENTITY;\n@@ -2552,8 +2584,1 @@\n-        float ra = Float.POSITIVE_INFINITY;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN);\n-            }\n-        }\n+        float ra = 0;\n@@ -2562,1 +2587,1 @@\n-            ra = Float.POSITIVE_INFINITY;\n+            ra = MIN_IDENTITY;\n@@ -2565,1 +2590,3 @@\n-                ra = (float) Math.min(ra, av.reduceLanes(VectorOperators.MIN));\n+                float v = av.reduceLanes(VectorOperators.MIN);\n+                r[i] = v;\n+                ra = (float) Math.min(ra, v);\n@@ -2573,0 +2600,23 @@\n+    @Test(dataProvider = \"floatUnaryOpProvider\")\n+    static void MINReduceIdentityValueTests(IntFunction<float[]> fa) {\n+        float[] a = fa.apply(SPECIES.length());\n+        float id = MIN_IDENTITY;\n+\n+        Assert.assertEquals((float) Math.min(id, id), id,\n+                            \"MIN(MIN_IDENTITY, MIN_IDENTITY) != MIN_IDENTITY\");\n+\n+        float x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((float) Math.min(id, x), x);\n+                Assert.assertEquals((float) Math.min(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((float) Math.min(id, x), x,\n+                                \"MIN(MIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((float) Math.min(x, id), x,\n+                                \"MIN(\" + x + \", MIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2574,1 +2624,1 @@\n-        float res = Float.POSITIVE_INFINITY;\n+        float res = MIN_IDENTITY;\n@@ -2584,1 +2634,1 @@\n-        float res = Float.POSITIVE_INFINITY;\n+        float res = MIN_IDENTITY;\n@@ -2598,8 +2648,1 @@\n-        float ra = Float.POSITIVE_INFINITY;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN, vmask);\n-            }\n-        }\n+        float ra = 0;\n@@ -2608,1 +2651,1 @@\n-            ra = Float.POSITIVE_INFINITY;\n+            ra = MIN_IDENTITY;\n@@ -2611,1 +2654,3 @@\n-                ra = (float) Math.min(ra, av.reduceLanes(VectorOperators.MIN, vmask));\n+                float v = av.reduceLanes(VectorOperators.MIN, vmask);\n+                r[i] = v;\n+                ra = (float) Math.min(ra, v);\n@@ -2620,1 +2665,1 @@\n-        float res = Float.NEGATIVE_INFINITY;\n+        float res = MAX_IDENTITY;\n@@ -2629,1 +2674,1 @@\n-        float res = Float.NEGATIVE_INFINITY;\n+        float res = MAX_IDENTITY;\n@@ -2641,8 +2686,1 @@\n-        float ra = Float.NEGATIVE_INFINITY;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX);\n-            }\n-        }\n+        float ra = 0;\n@@ -2651,1 +2689,1 @@\n-            ra = Float.NEGATIVE_INFINITY;\n+            ra = MAX_IDENTITY;\n@@ -2654,1 +2692,3 @@\n-                ra = (float) Math.max(ra, av.reduceLanes(VectorOperators.MAX));\n+                float v = av.reduceLanes(VectorOperators.MAX);\n+                r[i] = v;\n+                ra = (float) Math.max(ra, v);\n@@ -2662,0 +2702,23 @@\n+    @Test(dataProvider = \"floatUnaryOpProvider\")\n+    static void MAXReduceIdentityValueTests(IntFunction<float[]> fa) {\n+        float[] a = fa.apply(SPECIES.length());\n+        float id = MAX_IDENTITY;\n+\n+        Assert.assertEquals((float) Math.max(id, id), id,\n+                            \"MAX(MAX_IDENTITY, MAX_IDENTITY) != MAX_IDENTITY\");\n+\n+        float x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((float) Math.max(id, x), x);\n+                Assert.assertEquals((float) Math.max(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((float) Math.max(id, x), x,\n+                                \"MAX(MAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((float) Math.max(x, id), x,\n+                                \"MAX(\" + x + \", MAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2663,1 +2726,1 @@\n-        float res = Float.NEGATIVE_INFINITY;\n+        float res = MAX_IDENTITY;\n@@ -2673,1 +2736,1 @@\n-        float res = Float.NEGATIVE_INFINITY;\n+        float res = MAX_IDENTITY;\n@@ -2687,8 +2750,1 @@\n-        float ra = Float.NEGATIVE_INFINITY;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX, vmask);\n-            }\n-        }\n+        float ra = 0;\n@@ -2697,1 +2753,1 @@\n-            ra = Float.NEGATIVE_INFINITY;\n+            ra = MAX_IDENTITY;\n@@ -2700,1 +2756,3 @@\n-                ra = (float) Math.max(ra, av.reduceLanes(VectorOperators.MAX, vmask));\n+                float v = av.reduceLanes(VectorOperators.MAX, vmask);\n+                r[i] = v;\n+                ra = (float) Math.max(ra, v);\n@@ -2709,1 +2767,1 @@\n-        float res = (float) 0;\n+        float res = FIRST_NONZERO_IDENTITY;\n@@ -2718,1 +2776,1 @@\n-        float res = (float) 0;\n+        float res = FIRST_NONZERO_IDENTITY;\n@@ -2730,8 +2788,1 @@\n-        float ra = (float) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n-            }\n-        }\n+        float ra = 0;\n@@ -2740,1 +2791,1 @@\n-            ra = (float) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -2743,1 +2794,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO));\n+                float v = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -2751,0 +2804,23 @@\n+    @Test(dataProvider = \"floatUnaryOpProvider\")\n+    static void FIRST_NONZEROReduceIdentityValueTests(IntFunction<float[]> fa) {\n+        float[] a = fa.apply(SPECIES.length());\n+        float id = FIRST_NONZERO_IDENTITY;\n+\n+        Assert.assertEquals(firstNonZero(id, id), id,\n+                            \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, FIRST_NONZERO_IDENTITY) != FIRST_NONZERO_IDENTITY\");\n+\n+        float x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals(firstNonZero(id, x), x);\n+                Assert.assertEquals(firstNonZero(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals(firstNonZero(id, x), x,\n+                                \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals(firstNonZero(x, id), x,\n+                                \"FIRST_NONZERO(\" + x + \", FIRST_NONZERO_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2752,1 +2828,1 @@\n-        float res = (float) 0;\n+        float res = FIRST_NONZERO_IDENTITY;\n@@ -2762,1 +2838,1 @@\n-        float res = (float) 0;\n+        float res = FIRST_NONZERO_IDENTITY;\n@@ -2776,8 +2852,1 @@\n-        float ra = (float) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n-            }\n-        }\n+        float ra = 0;\n@@ -2786,1 +2855,1 @@\n-            ra = (float) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -2789,1 +2858,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask));\n+                float v = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/Float512VectorTests.java","additions":190,"deletions":119,"binary":false,"changes":309,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -65,0 +65,6 @@\n+    \/\/ Identity values for reduction operations\n+    private static final float ADD_IDENTITY = (float)0;\n+    private static final float FIRST_NONZERO_IDENTITY = (float)0;\n+    private static final float MAX_IDENTITY = Float.NEGATIVE_INFINITY;\n+    private static final float MIN_IDENTITY = Float.POSITIVE_INFINITY;\n+    private static final float MUL_IDENTITY = (float)1;\n@@ -2353,1 +2359,1 @@\n-        float res = 0;\n+        float res = ADD_IDENTITY;\n@@ -2362,1 +2368,1 @@\n-        float res = 0;\n+        float res = ADD_IDENTITY;\n@@ -2377,0 +2383,1 @@\n+            ra = ADD_IDENTITY;\n@@ -2379,9 +2386,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD);\n+                float v = av.reduceLanes(VectorOperators.ADD);\n+                r[i] = v;\n+                ra += v;\n@@ -2395,0 +2396,23 @@\n+    @Test(dataProvider = \"floatUnaryOpProvider\")\n+    static void ADDReduceIdentityValueTests(IntFunction<float[]> fa) {\n+        float[] a = fa.apply(SPECIES.length());\n+        float id = ADD_IDENTITY;\n+\n+        Assert.assertEquals((float) (id + id), id,\n+                            \"ADD(ADD_IDENTITY, ADD_IDENTITY) != ADD_IDENTITY\");\n+\n+        float x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((float) (id + x), x);\n+                Assert.assertEquals((float) (x + id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((float) (id + x), x,\n+                                \"ADD(ADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((float) (x + id), x,\n+                                \"ADD(\" + x + \", ADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2396,1 +2420,1 @@\n-        float res = 0;\n+        float res = ADD_IDENTITY;\n@@ -2406,1 +2430,1 @@\n-        float res = 0;\n+        float res = ADD_IDENTITY;\n@@ -2423,0 +2447,1 @@\n+            ra = ADD_IDENTITY;\n@@ -2425,9 +2450,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD, vmask);\n+                float v = av.reduceLanes(VectorOperators.ADD, vmask);\n+                r[i] = v;\n+                ra += v;\n@@ -2442,1 +2461,1 @@\n-        float res = 1;\n+        float res = MUL_IDENTITY;\n@@ -2451,1 +2470,1 @@\n-        float res = 1;\n+        float res = MUL_IDENTITY;\n@@ -2463,8 +2482,1 @@\n-        float ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL);\n-            }\n-        }\n+        float ra = 0;\n@@ -2473,1 +2485,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -2476,1 +2488,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL);\n+                float v = av.reduceLanes(VectorOperators.MUL);\n+                r[i] = v;\n+                ra *= v;\n@@ -2484,0 +2498,23 @@\n+    @Test(dataProvider = \"floatUnaryOpProvider\")\n+    static void MULReduceIdentityValueTests(IntFunction<float[]> fa) {\n+        float[] a = fa.apply(SPECIES.length());\n+        float id = MUL_IDENTITY;\n+\n+        Assert.assertEquals((float) (id * id), id,\n+                            \"MUL(MUL_IDENTITY, MUL_IDENTITY) != MUL_IDENTITY\");\n+\n+        float x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((float) (id * x), x);\n+                Assert.assertEquals((float) (x * id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((float) (id * x), x,\n+                                \"MUL(MUL_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((float) (x * id), x,\n+                                \"MUL(\" + x + \", MUL_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2485,1 +2522,1 @@\n-        float res = 1;\n+        float res = MUL_IDENTITY;\n@@ -2495,1 +2532,1 @@\n-        float res = 1;\n+        float res = MUL_IDENTITY;\n@@ -2509,8 +2546,1 @@\n-        float ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL, vmask);\n-            }\n-        }\n+        float ra = 0;\n@@ -2519,1 +2549,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -2522,1 +2552,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL, vmask);\n+                float v = av.reduceLanes(VectorOperators.MUL, vmask);\n+                r[i] = v;\n+                ra *= v;\n@@ -2531,1 +2563,1 @@\n-        float res = Float.POSITIVE_INFINITY;\n+        float res = MIN_IDENTITY;\n@@ -2540,1 +2572,1 @@\n-        float res = Float.POSITIVE_INFINITY;\n+        float res = MIN_IDENTITY;\n@@ -2552,8 +2584,1 @@\n-        float ra = Float.POSITIVE_INFINITY;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN);\n-            }\n-        }\n+        float ra = 0;\n@@ -2562,1 +2587,1 @@\n-            ra = Float.POSITIVE_INFINITY;\n+            ra = MIN_IDENTITY;\n@@ -2565,1 +2590,3 @@\n-                ra = (float) Math.min(ra, av.reduceLanes(VectorOperators.MIN));\n+                float v = av.reduceLanes(VectorOperators.MIN);\n+                r[i] = v;\n+                ra = (float) Math.min(ra, v);\n@@ -2573,0 +2600,23 @@\n+    @Test(dataProvider = \"floatUnaryOpProvider\")\n+    static void MINReduceIdentityValueTests(IntFunction<float[]> fa) {\n+        float[] a = fa.apply(SPECIES.length());\n+        float id = MIN_IDENTITY;\n+\n+        Assert.assertEquals((float) Math.min(id, id), id,\n+                            \"MIN(MIN_IDENTITY, MIN_IDENTITY) != MIN_IDENTITY\");\n+\n+        float x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((float) Math.min(id, x), x);\n+                Assert.assertEquals((float) Math.min(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((float) Math.min(id, x), x,\n+                                \"MIN(MIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((float) Math.min(x, id), x,\n+                                \"MIN(\" + x + \", MIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2574,1 +2624,1 @@\n-        float res = Float.POSITIVE_INFINITY;\n+        float res = MIN_IDENTITY;\n@@ -2584,1 +2634,1 @@\n-        float res = Float.POSITIVE_INFINITY;\n+        float res = MIN_IDENTITY;\n@@ -2598,8 +2648,1 @@\n-        float ra = Float.POSITIVE_INFINITY;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN, vmask);\n-            }\n-        }\n+        float ra = 0;\n@@ -2608,1 +2651,1 @@\n-            ra = Float.POSITIVE_INFINITY;\n+            ra = MIN_IDENTITY;\n@@ -2611,1 +2654,3 @@\n-                ra = (float) Math.min(ra, av.reduceLanes(VectorOperators.MIN, vmask));\n+                float v = av.reduceLanes(VectorOperators.MIN, vmask);\n+                r[i] = v;\n+                ra = (float) Math.min(ra, v);\n@@ -2620,1 +2665,1 @@\n-        float res = Float.NEGATIVE_INFINITY;\n+        float res = MAX_IDENTITY;\n@@ -2629,1 +2674,1 @@\n-        float res = Float.NEGATIVE_INFINITY;\n+        float res = MAX_IDENTITY;\n@@ -2641,8 +2686,1 @@\n-        float ra = Float.NEGATIVE_INFINITY;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX);\n-            }\n-        }\n+        float ra = 0;\n@@ -2651,1 +2689,1 @@\n-            ra = Float.NEGATIVE_INFINITY;\n+            ra = MAX_IDENTITY;\n@@ -2654,1 +2692,3 @@\n-                ra = (float) Math.max(ra, av.reduceLanes(VectorOperators.MAX));\n+                float v = av.reduceLanes(VectorOperators.MAX);\n+                r[i] = v;\n+                ra = (float) Math.max(ra, v);\n@@ -2662,0 +2702,23 @@\n+    @Test(dataProvider = \"floatUnaryOpProvider\")\n+    static void MAXReduceIdentityValueTests(IntFunction<float[]> fa) {\n+        float[] a = fa.apply(SPECIES.length());\n+        float id = MAX_IDENTITY;\n+\n+        Assert.assertEquals((float) Math.max(id, id), id,\n+                            \"MAX(MAX_IDENTITY, MAX_IDENTITY) != MAX_IDENTITY\");\n+\n+        float x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((float) Math.max(id, x), x);\n+                Assert.assertEquals((float) Math.max(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((float) Math.max(id, x), x,\n+                                \"MAX(MAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((float) Math.max(x, id), x,\n+                                \"MAX(\" + x + \", MAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2663,1 +2726,1 @@\n-        float res = Float.NEGATIVE_INFINITY;\n+        float res = MAX_IDENTITY;\n@@ -2673,1 +2736,1 @@\n-        float res = Float.NEGATIVE_INFINITY;\n+        float res = MAX_IDENTITY;\n@@ -2687,8 +2750,1 @@\n-        float ra = Float.NEGATIVE_INFINITY;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX, vmask);\n-            }\n-        }\n+        float ra = 0;\n@@ -2697,1 +2753,1 @@\n-            ra = Float.NEGATIVE_INFINITY;\n+            ra = MAX_IDENTITY;\n@@ -2700,1 +2756,3 @@\n-                ra = (float) Math.max(ra, av.reduceLanes(VectorOperators.MAX, vmask));\n+                float v = av.reduceLanes(VectorOperators.MAX, vmask);\n+                r[i] = v;\n+                ra = (float) Math.max(ra, v);\n@@ -2709,1 +2767,1 @@\n-        float res = (float) 0;\n+        float res = FIRST_NONZERO_IDENTITY;\n@@ -2718,1 +2776,1 @@\n-        float res = (float) 0;\n+        float res = FIRST_NONZERO_IDENTITY;\n@@ -2730,8 +2788,1 @@\n-        float ra = (float) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n-            }\n-        }\n+        float ra = 0;\n@@ -2740,1 +2791,1 @@\n-            ra = (float) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -2743,1 +2794,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO));\n+                float v = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -2751,0 +2804,23 @@\n+    @Test(dataProvider = \"floatUnaryOpProvider\")\n+    static void FIRST_NONZEROReduceIdentityValueTests(IntFunction<float[]> fa) {\n+        float[] a = fa.apply(SPECIES.length());\n+        float id = FIRST_NONZERO_IDENTITY;\n+\n+        Assert.assertEquals(firstNonZero(id, id), id,\n+                            \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, FIRST_NONZERO_IDENTITY) != FIRST_NONZERO_IDENTITY\");\n+\n+        float x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals(firstNonZero(id, x), x);\n+                Assert.assertEquals(firstNonZero(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals(firstNonZero(id, x), x,\n+                                \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals(firstNonZero(x, id), x,\n+                                \"FIRST_NONZERO(\" + x + \", FIRST_NONZERO_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2752,1 +2828,1 @@\n-        float res = (float) 0;\n+        float res = FIRST_NONZERO_IDENTITY;\n@@ -2762,1 +2838,1 @@\n-        float res = (float) 0;\n+        float res = FIRST_NONZERO_IDENTITY;\n@@ -2776,8 +2852,1 @@\n-        float ra = (float) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n-            }\n-        }\n+        float ra = 0;\n@@ -2786,1 +2855,1 @@\n-            ra = (float) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -2789,1 +2858,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask));\n+                float v = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/Float64VectorTests.java","additions":190,"deletions":119,"binary":false,"changes":309,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -71,0 +71,7 @@\n+    \/\/ Identity values for reduction operations\n+    private static final float ADD_IDENTITY = (float)0;\n+    private static final float FIRST_NONZERO_IDENTITY = (float)0;\n+    private static final float MAX_IDENTITY = Float.NEGATIVE_INFINITY;\n+    private static final float MIN_IDENTITY = Float.POSITIVE_INFINITY;\n+    private static final float MUL_IDENTITY = (float)1;\n+\n@@ -2358,1 +2365,1 @@\n-        float res = 0;\n+        float res = ADD_IDENTITY;\n@@ -2367,1 +2374,1 @@\n-        float res = 0;\n+        float res = ADD_IDENTITY;\n@@ -2382,0 +2389,1 @@\n+            ra = ADD_IDENTITY;\n@@ -2384,9 +2392,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD);\n+                float v = av.reduceLanes(VectorOperators.ADD);\n+                r[i] = v;\n+                ra += v;\n@@ -2400,0 +2402,23 @@\n+    @Test(dataProvider = \"floatUnaryOpProvider\")\n+    static void ADDReduceIdentityValueTests(IntFunction<float[]> fa) {\n+        float[] a = fa.apply(SPECIES.length());\n+        float id = ADD_IDENTITY;\n+\n+        Assert.assertEquals((float) (id + id), id,\n+                            \"ADD(ADD_IDENTITY, ADD_IDENTITY) != ADD_IDENTITY\");\n+\n+        float x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((float) (id + x), x);\n+                Assert.assertEquals((float) (x + id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((float) (id + x), x,\n+                                \"ADD(ADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((float) (x + id), x,\n+                                \"ADD(\" + x + \", ADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2401,1 +2426,1 @@\n-        float res = 0;\n+        float res = ADD_IDENTITY;\n@@ -2411,1 +2436,1 @@\n-        float res = 0;\n+        float res = ADD_IDENTITY;\n@@ -2428,0 +2453,1 @@\n+            ra = ADD_IDENTITY;\n@@ -2430,9 +2456,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD, vmask);\n+                float v = av.reduceLanes(VectorOperators.ADD, vmask);\n+                r[i] = v;\n+                ra += v;\n@@ -2447,1 +2467,1 @@\n-        float res = 1;\n+        float res = MUL_IDENTITY;\n@@ -2456,1 +2476,1 @@\n-        float res = 1;\n+        float res = MUL_IDENTITY;\n@@ -2468,8 +2488,1 @@\n-        float ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL);\n-            }\n-        }\n+        float ra = 0;\n@@ -2478,1 +2491,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -2481,1 +2494,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL);\n+                float v = av.reduceLanes(VectorOperators.MUL);\n+                r[i] = v;\n+                ra *= v;\n@@ -2489,0 +2504,23 @@\n+    @Test(dataProvider = \"floatUnaryOpProvider\")\n+    static void MULReduceIdentityValueTests(IntFunction<float[]> fa) {\n+        float[] a = fa.apply(SPECIES.length());\n+        float id = MUL_IDENTITY;\n+\n+        Assert.assertEquals((float) (id * id), id,\n+                            \"MUL(MUL_IDENTITY, MUL_IDENTITY) != MUL_IDENTITY\");\n+\n+        float x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((float) (id * x), x);\n+                Assert.assertEquals((float) (x * id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((float) (id * x), x,\n+                                \"MUL(MUL_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((float) (x * id), x,\n+                                \"MUL(\" + x + \", MUL_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2490,1 +2528,1 @@\n-        float res = 1;\n+        float res = MUL_IDENTITY;\n@@ -2500,1 +2538,1 @@\n-        float res = 1;\n+        float res = MUL_IDENTITY;\n@@ -2514,8 +2552,1 @@\n-        float ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL, vmask);\n-            }\n-        }\n+        float ra = 0;\n@@ -2524,1 +2555,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -2527,1 +2558,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL, vmask);\n+                float v = av.reduceLanes(VectorOperators.MUL, vmask);\n+                r[i] = v;\n+                ra *= v;\n@@ -2536,1 +2569,1 @@\n-        float res = Float.POSITIVE_INFINITY;\n+        float res = MIN_IDENTITY;\n@@ -2545,1 +2578,1 @@\n-        float res = Float.POSITIVE_INFINITY;\n+        float res = MIN_IDENTITY;\n@@ -2557,8 +2590,1 @@\n-        float ra = Float.POSITIVE_INFINITY;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN);\n-            }\n-        }\n+        float ra = 0;\n@@ -2567,1 +2593,1 @@\n-            ra = Float.POSITIVE_INFINITY;\n+            ra = MIN_IDENTITY;\n@@ -2570,1 +2596,3 @@\n-                ra = (float) Math.min(ra, av.reduceLanes(VectorOperators.MIN));\n+                float v = av.reduceLanes(VectorOperators.MIN);\n+                r[i] = v;\n+                ra = (float) Math.min(ra, v);\n@@ -2578,0 +2606,23 @@\n+    @Test(dataProvider = \"floatUnaryOpProvider\")\n+    static void MINReduceIdentityValueTests(IntFunction<float[]> fa) {\n+        float[] a = fa.apply(SPECIES.length());\n+        float id = MIN_IDENTITY;\n+\n+        Assert.assertEquals((float) Math.min(id, id), id,\n+                            \"MIN(MIN_IDENTITY, MIN_IDENTITY) != MIN_IDENTITY\");\n+\n+        float x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((float) Math.min(id, x), x);\n+                Assert.assertEquals((float) Math.min(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((float) Math.min(id, x), x,\n+                                \"MIN(MIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((float) Math.min(x, id), x,\n+                                \"MIN(\" + x + \", MIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2579,1 +2630,1 @@\n-        float res = Float.POSITIVE_INFINITY;\n+        float res = MIN_IDENTITY;\n@@ -2589,1 +2640,1 @@\n-        float res = Float.POSITIVE_INFINITY;\n+        float res = MIN_IDENTITY;\n@@ -2603,8 +2654,1 @@\n-        float ra = Float.POSITIVE_INFINITY;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN, vmask);\n-            }\n-        }\n+        float ra = 0;\n@@ -2613,1 +2657,1 @@\n-            ra = Float.POSITIVE_INFINITY;\n+            ra = MIN_IDENTITY;\n@@ -2616,1 +2660,3 @@\n-                ra = (float) Math.min(ra, av.reduceLanes(VectorOperators.MIN, vmask));\n+                float v = av.reduceLanes(VectorOperators.MIN, vmask);\n+                r[i] = v;\n+                ra = (float) Math.min(ra, v);\n@@ -2625,1 +2671,1 @@\n-        float res = Float.NEGATIVE_INFINITY;\n+        float res = MAX_IDENTITY;\n@@ -2634,1 +2680,1 @@\n-        float res = Float.NEGATIVE_INFINITY;\n+        float res = MAX_IDENTITY;\n@@ -2646,8 +2692,1 @@\n-        float ra = Float.NEGATIVE_INFINITY;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX);\n-            }\n-        }\n+        float ra = 0;\n@@ -2656,1 +2695,1 @@\n-            ra = Float.NEGATIVE_INFINITY;\n+            ra = MAX_IDENTITY;\n@@ -2659,1 +2698,3 @@\n-                ra = (float) Math.max(ra, av.reduceLanes(VectorOperators.MAX));\n+                float v = av.reduceLanes(VectorOperators.MAX);\n+                r[i] = v;\n+                ra = (float) Math.max(ra, v);\n@@ -2667,0 +2708,23 @@\n+    @Test(dataProvider = \"floatUnaryOpProvider\")\n+    static void MAXReduceIdentityValueTests(IntFunction<float[]> fa) {\n+        float[] a = fa.apply(SPECIES.length());\n+        float id = MAX_IDENTITY;\n+\n+        Assert.assertEquals((float) Math.max(id, id), id,\n+                            \"MAX(MAX_IDENTITY, MAX_IDENTITY) != MAX_IDENTITY\");\n+\n+        float x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((float) Math.max(id, x), x);\n+                Assert.assertEquals((float) Math.max(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((float) Math.max(id, x), x,\n+                                \"MAX(MAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((float) Math.max(x, id), x,\n+                                \"MAX(\" + x + \", MAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2668,1 +2732,1 @@\n-        float res = Float.NEGATIVE_INFINITY;\n+        float res = MAX_IDENTITY;\n@@ -2678,1 +2742,1 @@\n-        float res = Float.NEGATIVE_INFINITY;\n+        float res = MAX_IDENTITY;\n@@ -2692,8 +2756,1 @@\n-        float ra = Float.NEGATIVE_INFINITY;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX, vmask);\n-            }\n-        }\n+        float ra = 0;\n@@ -2702,1 +2759,1 @@\n-            ra = Float.NEGATIVE_INFINITY;\n+            ra = MAX_IDENTITY;\n@@ -2705,1 +2762,3 @@\n-                ra = (float) Math.max(ra, av.reduceLanes(VectorOperators.MAX, vmask));\n+                float v = av.reduceLanes(VectorOperators.MAX, vmask);\n+                r[i] = v;\n+                ra = (float) Math.max(ra, v);\n@@ -2714,1 +2773,1 @@\n-        float res = (float) 0;\n+        float res = FIRST_NONZERO_IDENTITY;\n@@ -2723,1 +2782,1 @@\n-        float res = (float) 0;\n+        float res = FIRST_NONZERO_IDENTITY;\n@@ -2735,8 +2794,1 @@\n-        float ra = (float) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n-            }\n-        }\n+        float ra = 0;\n@@ -2745,1 +2797,1 @@\n-            ra = (float) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -2748,1 +2800,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO));\n+                float v = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -2756,0 +2810,23 @@\n+    @Test(dataProvider = \"floatUnaryOpProvider\")\n+    static void FIRST_NONZEROReduceIdentityValueTests(IntFunction<float[]> fa) {\n+        float[] a = fa.apply(SPECIES.length());\n+        float id = FIRST_NONZERO_IDENTITY;\n+\n+        Assert.assertEquals(firstNonZero(id, id), id,\n+                            \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, FIRST_NONZERO_IDENTITY) != FIRST_NONZERO_IDENTITY\");\n+\n+        float x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals(firstNonZero(id, x), x);\n+                Assert.assertEquals(firstNonZero(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals(firstNonZero(id, x), x,\n+                                \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals(firstNonZero(x, id), x,\n+                                \"FIRST_NONZERO(\" + x + \", FIRST_NONZERO_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -2757,1 +2834,1 @@\n-        float res = (float) 0;\n+        float res = FIRST_NONZERO_IDENTITY;\n@@ -2767,1 +2844,1 @@\n-        float res = (float) 0;\n+        float res = FIRST_NONZERO_IDENTITY;\n@@ -2781,8 +2858,1 @@\n-        float ra = (float) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                FloatVector av = FloatVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n-            }\n-        }\n+        float ra = 0;\n@@ -2791,1 +2861,1 @@\n-            ra = (float) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -2794,1 +2864,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask));\n+                float v = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/FloatMaxVectorTests.java","additions":191,"deletions":119,"binary":false,"changes":310,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -66,1 +66,0 @@\n-\n@@ -69,0 +68,13 @@\n+    \/\/ Identity values for reduction operations\n+    private static final int ADD_IDENTITY = (int)0;\n+    private static final int AND_IDENTITY = (int)-1;\n+    private static final int FIRST_NONZERO_IDENTITY = (int)0;\n+    private static final int MAX_IDENTITY = Integer.MIN_VALUE;\n+    private static final int MIN_IDENTITY = Integer.MAX_VALUE;\n+    private static final int MUL_IDENTITY = (int)1;\n+    private static final int OR_IDENTITY = (int)0;\n+    private static final int SUADD_IDENTITY = (int)0;\n+    private static final int UMAX_IDENTITY = (int)0;   \/\/ Minimum unsigned value\n+    private static final int UMIN_IDENTITY = (int)-1;  \/\/ Maximum unsigned value\n+    private static final int XOR_IDENTITY = (int)0;\n+\n@@ -3613,1 +3625,1 @@\n-        int res = -1;\n+        int res = AND_IDENTITY;\n@@ -3622,1 +3634,1 @@\n-        int res = -1;\n+        int res = AND_IDENTITY;\n@@ -3634,8 +3646,1 @@\n-        int ra = -1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.AND);\n-            }\n-        }\n+        int ra = 0;\n@@ -3644,1 +3649,1 @@\n-            ra = -1;\n+            ra = AND_IDENTITY;\n@@ -3647,1 +3652,3 @@\n-                ra &= av.reduceLanes(VectorOperators.AND);\n+                int v = av.reduceLanes(VectorOperators.AND);\n+                r[i] = v;\n+                ra &= v;\n@@ -3655,0 +3662,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void ANDReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = AND_IDENTITY;\n+\n+        Assert.assertEquals((int) (id & id), id,\n+                            \"AND(AND_IDENTITY, AND_IDENTITY) != AND_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) (id & x), x);\n+                Assert.assertEquals((int) (x & id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) (id & x), x,\n+                                \"AND(AND_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) (x & id), x,\n+                                \"AND(\" + x + \", AND_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3656,1 +3686,1 @@\n-        int res = -1;\n+        int res = AND_IDENTITY;\n@@ -3666,1 +3696,1 @@\n-        int res = -1;\n+        int res = AND_IDENTITY;\n@@ -3680,8 +3710,1 @@\n-        int ra = -1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.AND, vmask);\n-            }\n-        }\n+        int ra = 0;\n@@ -3690,1 +3713,1 @@\n-            ra = -1;\n+            ra = AND_IDENTITY;\n@@ -3693,1 +3716,3 @@\n-                ra &= av.reduceLanes(VectorOperators.AND, vmask);\n+                int v = av.reduceLanes(VectorOperators.AND, vmask);\n+                r[i] = v;\n+                ra &= v;\n@@ -3702,1 +3727,1 @@\n-        int res = 0;\n+        int res = OR_IDENTITY;\n@@ -3711,1 +3736,1 @@\n-        int res = 0;\n+        int res = OR_IDENTITY;\n@@ -3726,0 +3751,1 @@\n+            ra = OR_IDENTITY;\n@@ -3728,9 +3754,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.OR);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                ra |= av.reduceLanes(VectorOperators.OR);\n+                int v = av.reduceLanes(VectorOperators.OR);\n+                r[i] = v;\n+                ra |= v;\n@@ -3744,0 +3764,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void ORReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = OR_IDENTITY;\n+\n+        Assert.assertEquals((int) (id | id), id,\n+                            \"OR(OR_IDENTITY, OR_IDENTITY) != OR_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) (id | x), x);\n+                Assert.assertEquals((int) (x | id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) (id | x), x,\n+                                \"OR(OR_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) (x | id), x,\n+                                \"OR(\" + x + \", OR_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3745,1 +3788,1 @@\n-        int res = 0;\n+        int res = OR_IDENTITY;\n@@ -3755,1 +3798,1 @@\n-        int res = 0;\n+        int res = OR_IDENTITY;\n@@ -3772,0 +3815,1 @@\n+            ra = OR_IDENTITY;\n@@ -3774,9 +3818,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.OR, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                ra |= av.reduceLanes(VectorOperators.OR, vmask);\n+                int v = av.reduceLanes(VectorOperators.OR, vmask);\n+                r[i] = v;\n+                ra |= v;\n@@ -3791,1 +3829,1 @@\n-        int res = 0;\n+        int res = XOR_IDENTITY;\n@@ -3800,1 +3838,1 @@\n-        int res = 0;\n+        int res = XOR_IDENTITY;\n@@ -3815,0 +3853,1 @@\n+            ra = XOR_IDENTITY;\n@@ -3817,9 +3856,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.XOR);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                ra ^= av.reduceLanes(VectorOperators.XOR);\n+                int v = av.reduceLanes(VectorOperators.XOR);\n+                r[i] = v;\n+                ra ^= v;\n@@ -3833,0 +3866,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void XORReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = XOR_IDENTITY;\n+\n+        Assert.assertEquals((int) (id ^ id), id,\n+                            \"XOR(XOR_IDENTITY, XOR_IDENTITY) != XOR_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) (id ^ x), x);\n+                Assert.assertEquals((int) (x ^ id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) (id ^ x), x,\n+                                \"XOR(XOR_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) (x ^ id), x,\n+                                \"XOR(\" + x + \", XOR_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3834,1 +3890,1 @@\n-        int res = 0;\n+        int res = XOR_IDENTITY;\n@@ -3844,1 +3900,1 @@\n-        int res = 0;\n+        int res = XOR_IDENTITY;\n@@ -3861,0 +3917,1 @@\n+            ra = XOR_IDENTITY;\n@@ -3863,9 +3920,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.XOR, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                ra ^= av.reduceLanes(VectorOperators.XOR, vmask);\n+                int v = av.reduceLanes(VectorOperators.XOR, vmask);\n+                r[i] = v;\n+                ra ^= v;\n@@ -3880,1 +3931,1 @@\n-        int res = 0;\n+        int res = ADD_IDENTITY;\n@@ -3889,1 +3940,1 @@\n-        int res = 0;\n+        int res = ADD_IDENTITY;\n@@ -3904,0 +3955,1 @@\n+            ra = ADD_IDENTITY;\n@@ -3906,9 +3958,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD);\n+                int v = av.reduceLanes(VectorOperators.ADD);\n+                r[i] = v;\n+                ra += v;\n@@ -3922,0 +3968,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void ADDReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = ADD_IDENTITY;\n+\n+        Assert.assertEquals((int) (id + id), id,\n+                            \"ADD(ADD_IDENTITY, ADD_IDENTITY) != ADD_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) (id + x), x);\n+                Assert.assertEquals((int) (x + id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) (id + x), x,\n+                                \"ADD(ADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) (x + id), x,\n+                                \"ADD(\" + x + \", ADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3923,1 +3992,1 @@\n-        int res = 0;\n+        int res = ADD_IDENTITY;\n@@ -3933,1 +4002,1 @@\n-        int res = 0;\n+        int res = ADD_IDENTITY;\n@@ -3950,0 +4019,1 @@\n+            ra = ADD_IDENTITY;\n@@ -3952,9 +4022,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD, vmask);\n+                int v = av.reduceLanes(VectorOperators.ADD, vmask);\n+                r[i] = v;\n+                ra += v;\n@@ -3969,1 +4033,1 @@\n-        int res = 1;\n+        int res = MUL_IDENTITY;\n@@ -3978,1 +4042,1 @@\n-        int res = 1;\n+        int res = MUL_IDENTITY;\n@@ -3990,8 +4054,1 @@\n-        int ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL);\n-            }\n-        }\n+        int ra = 0;\n@@ -4000,1 +4057,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -4003,1 +4060,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL);\n+                int v = av.reduceLanes(VectorOperators.MUL);\n+                r[i] = v;\n+                ra *= v;\n@@ -4011,0 +4070,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void MULReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = MUL_IDENTITY;\n+\n+        Assert.assertEquals((int) (id * id), id,\n+                            \"MUL(MUL_IDENTITY, MUL_IDENTITY) != MUL_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) (id * x), x);\n+                Assert.assertEquals((int) (x * id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) (id * x), x,\n+                                \"MUL(MUL_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) (x * id), x,\n+                                \"MUL(\" + x + \", MUL_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4012,1 +4094,1 @@\n-        int res = 1;\n+        int res = MUL_IDENTITY;\n@@ -4022,1 +4104,1 @@\n-        int res = 1;\n+        int res = MUL_IDENTITY;\n@@ -4036,8 +4118,1 @@\n-        int ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL, vmask);\n-            }\n-        }\n+        int ra = 0;\n@@ -4046,1 +4121,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -4049,1 +4124,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL, vmask);\n+                int v = av.reduceLanes(VectorOperators.MUL, vmask);\n+                r[i] = v;\n+                ra *= v;\n@@ -4058,1 +4135,1 @@\n-        int res = Integer.MAX_VALUE;\n+        int res = MIN_IDENTITY;\n@@ -4067,1 +4144,1 @@\n-        int res = Integer.MAX_VALUE;\n+        int res = MIN_IDENTITY;\n@@ -4079,8 +4156,1 @@\n-        int ra = Integer.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN);\n-            }\n-        }\n+        int ra = 0;\n@@ -4089,1 +4159,1 @@\n-            ra = Integer.MAX_VALUE;\n+            ra = MIN_IDENTITY;\n@@ -4092,1 +4162,3 @@\n-                ra = (int) Math.min(ra, av.reduceLanes(VectorOperators.MIN));\n+                int v = av.reduceLanes(VectorOperators.MIN);\n+                r[i] = v;\n+                ra = (int) Math.min(ra, v);\n@@ -4100,0 +4172,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void MINReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = MIN_IDENTITY;\n+\n+        Assert.assertEquals((int) Math.min(id, id), id,\n+                            \"MIN(MIN_IDENTITY, MIN_IDENTITY) != MIN_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) Math.min(id, x), x);\n+                Assert.assertEquals((int) Math.min(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) Math.min(id, x), x,\n+                                \"MIN(MIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) Math.min(x, id), x,\n+                                \"MIN(\" + x + \", MIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4101,1 +4196,1 @@\n-        int res = Integer.MAX_VALUE;\n+        int res = MIN_IDENTITY;\n@@ -4111,1 +4206,1 @@\n-        int res = Integer.MAX_VALUE;\n+        int res = MIN_IDENTITY;\n@@ -4125,8 +4220,1 @@\n-        int ra = Integer.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN, vmask);\n-            }\n-        }\n+        int ra = 0;\n@@ -4135,1 +4223,1 @@\n-            ra = Integer.MAX_VALUE;\n+            ra = MIN_IDENTITY;\n@@ -4138,1 +4226,3 @@\n-                ra = (int) Math.min(ra, av.reduceLanes(VectorOperators.MIN, vmask));\n+                int v = av.reduceLanes(VectorOperators.MIN, vmask);\n+                r[i] = v;\n+                ra = (int) Math.min(ra, v);\n@@ -4147,1 +4237,1 @@\n-        int res = Integer.MIN_VALUE;\n+        int res = MAX_IDENTITY;\n@@ -4156,1 +4246,1 @@\n-        int res = Integer.MIN_VALUE;\n+        int res = MAX_IDENTITY;\n@@ -4168,8 +4258,1 @@\n-        int ra = Integer.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX);\n-            }\n-        }\n+        int ra = 0;\n@@ -4178,1 +4261,1 @@\n-            ra = Integer.MIN_VALUE;\n+            ra = MAX_IDENTITY;\n@@ -4181,1 +4264,3 @@\n-                ra = (int) Math.max(ra, av.reduceLanes(VectorOperators.MAX));\n+                int v = av.reduceLanes(VectorOperators.MAX);\n+                r[i] = v;\n+                ra = (int) Math.max(ra, v);\n@@ -4189,0 +4274,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void MAXReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = MAX_IDENTITY;\n+\n+        Assert.assertEquals((int) Math.max(id, id), id,\n+                            \"MAX(MAX_IDENTITY, MAX_IDENTITY) != MAX_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) Math.max(id, x), x);\n+                Assert.assertEquals((int) Math.max(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) Math.max(id, x), x,\n+                                \"MAX(MAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) Math.max(x, id), x,\n+                                \"MAX(\" + x + \", MAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4190,1 +4298,1 @@\n-        int res = Integer.MIN_VALUE;\n+        int res = MAX_IDENTITY;\n@@ -4200,1 +4308,1 @@\n-        int res = Integer.MIN_VALUE;\n+        int res = MAX_IDENTITY;\n@@ -4214,8 +4322,1 @@\n-        int ra = Integer.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX, vmask);\n-            }\n-        }\n+        int ra = 0;\n@@ -4224,1 +4325,1 @@\n-            ra = Integer.MIN_VALUE;\n+            ra = MAX_IDENTITY;\n@@ -4227,1 +4328,3 @@\n-                ra = (int) Math.max(ra, av.reduceLanes(VectorOperators.MAX, vmask));\n+                int v = av.reduceLanes(VectorOperators.MAX, vmask);\n+                r[i] = v;\n+                ra = (int) Math.max(ra, v);\n@@ -4236,1 +4339,1 @@\n-        int res = Integer.MAX_VALUE;\n+        int res = UMIN_IDENTITY;\n@@ -4245,1 +4348,1 @@\n-        int res = Integer.MAX_VALUE;\n+        int res = UMIN_IDENTITY;\n@@ -4257,8 +4360,1 @@\n-        int ra = Integer.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMIN);\n-            }\n-        }\n+        int ra = 0;\n@@ -4267,1 +4363,1 @@\n-            ra = Integer.MAX_VALUE;\n+            ra = UMIN_IDENTITY;\n@@ -4270,1 +4366,3 @@\n-                ra = (int) VectorMath.minUnsigned(ra, av.reduceLanes(VectorOperators.UMIN));\n+                int v = av.reduceLanes(VectorOperators.UMIN);\n+                r[i] = v;\n+                ra = (int) VectorMath.minUnsigned(ra, v);\n@@ -4278,0 +4376,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void UMINReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = UMIN_IDENTITY;\n+\n+        Assert.assertEquals((int) VectorMath.minUnsigned(id, id), id,\n+                            \"UMIN(UMIN_IDENTITY, UMIN_IDENTITY) != UMIN_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) VectorMath.minUnsigned(id, x), x);\n+                Assert.assertEquals((int) VectorMath.minUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) VectorMath.minUnsigned(id, x), x,\n+                                \"UMIN(UMIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) VectorMath.minUnsigned(x, id), x,\n+                                \"UMIN(\" + x + \", UMIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4279,1 +4400,1 @@\n-        int res = Integer.MAX_VALUE;\n+        int res = UMIN_IDENTITY;\n@@ -4289,1 +4410,1 @@\n-        int res = Integer.MAX_VALUE;\n+        int res = UMIN_IDENTITY;\n@@ -4303,8 +4424,1 @@\n-        int ra = Integer.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMIN, vmask);\n-            }\n-        }\n+        int ra = 0;\n@@ -4313,1 +4427,1 @@\n-            ra = Integer.MAX_VALUE;\n+            ra = UMIN_IDENTITY;\n@@ -4316,1 +4430,3 @@\n-                ra = (int) VectorMath.minUnsigned(ra, av.reduceLanes(VectorOperators.UMIN, vmask));\n+                int v = av.reduceLanes(VectorOperators.UMIN, vmask);\n+                r[i] = v;\n+                ra = (int) VectorMath.minUnsigned(ra, v);\n@@ -4325,1 +4441,1 @@\n-        int res = Integer.MIN_VALUE;\n+        int res = UMAX_IDENTITY;\n@@ -4334,1 +4450,1 @@\n-        int res = Integer.MIN_VALUE;\n+        int res = UMAX_IDENTITY;\n@@ -4346,8 +4462,1 @@\n-        int ra = Integer.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMAX);\n-            }\n-        }\n+        int ra = 0;\n@@ -4356,1 +4465,1 @@\n-            ra = Integer.MIN_VALUE;\n+            ra = UMAX_IDENTITY;\n@@ -4359,1 +4468,3 @@\n-                ra = (int) VectorMath.maxUnsigned(ra, av.reduceLanes(VectorOperators.UMAX));\n+                int v = av.reduceLanes(VectorOperators.UMAX);\n+                r[i] = v;\n+                ra = (int) VectorMath.maxUnsigned(ra, v);\n@@ -4367,0 +4478,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void UMAXReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = UMAX_IDENTITY;\n+\n+        Assert.assertEquals((int) VectorMath.maxUnsigned(id, id), id,\n+                            \"UMAX(UMAX_IDENTITY, UMAX_IDENTITY) != UMAX_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) VectorMath.maxUnsigned(id, x), x);\n+                Assert.assertEquals((int) VectorMath.maxUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) VectorMath.maxUnsigned(id, x), x,\n+                                \"UMAX(UMAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) VectorMath.maxUnsigned(x, id), x,\n+                                \"UMAX(\" + x + \", UMAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4368,1 +4502,1 @@\n-        int res = Integer.MIN_VALUE;\n+        int res = UMAX_IDENTITY;\n@@ -4378,1 +4512,1 @@\n-        int res = Integer.MIN_VALUE;\n+        int res = UMAX_IDENTITY;\n@@ -4392,8 +4526,1 @@\n-        int ra = Integer.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMAX, vmask);\n-            }\n-        }\n+        int ra = 0;\n@@ -4402,1 +4529,1 @@\n-            ra = Integer.MIN_VALUE;\n+            ra = UMAX_IDENTITY;\n@@ -4405,1 +4532,3 @@\n-                ra = (int) VectorMath.maxUnsigned(ra, av.reduceLanes(VectorOperators.UMAX, vmask));\n+                int v = av.reduceLanes(VectorOperators.UMAX, vmask);\n+                r[i] = v;\n+                ra = (int) VectorMath.maxUnsigned(ra, v);\n@@ -4414,1 +4543,1 @@\n-        int res = (int) 0;\n+        int res = FIRST_NONZERO_IDENTITY;\n@@ -4423,1 +4552,1 @@\n-        int res = (int) 0;\n+        int res = FIRST_NONZERO_IDENTITY;\n@@ -4435,8 +4564,1 @@\n-        int ra = (int) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n-            }\n-        }\n+        int ra = 0;\n@@ -4445,1 +4567,1 @@\n-            ra = (int) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -4448,1 +4570,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO));\n+                int v = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -4456,0 +4580,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void FIRST_NONZEROReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = FIRST_NONZERO_IDENTITY;\n+\n+        Assert.assertEquals(firstNonZero(id, id), id,\n+                            \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, FIRST_NONZERO_IDENTITY) != FIRST_NONZERO_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals(firstNonZero(id, x), x);\n+                Assert.assertEquals(firstNonZero(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals(firstNonZero(id, x), x,\n+                                \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals(firstNonZero(x, id), x,\n+                                \"FIRST_NONZERO(\" + x + \", FIRST_NONZERO_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4457,1 +4604,1 @@\n-        int res = (int) 0;\n+        int res = FIRST_NONZERO_IDENTITY;\n@@ -4467,1 +4614,1 @@\n-        int res = (int) 0;\n+        int res = FIRST_NONZERO_IDENTITY;\n@@ -4481,8 +4628,1 @@\n-        int ra = (int) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n-            }\n-        }\n+        int ra = 0;\n@@ -4491,1 +4631,1 @@\n-            ra = (int) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -4494,1 +4634,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask));\n+                int v = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -4551,1 +4693,1 @@\n-        int res = 0;\n+        int res = SUADD_IDENTITY;\n@@ -4560,1 +4702,1 @@\n-        int res = 0;\n+        int res = SUADD_IDENTITY;\n@@ -4575,0 +4717,1 @@\n+            ra = SUADD_IDENTITY;\n@@ -4577,9 +4720,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.SUADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                ra = (int) VectorMath.addSaturatingUnsigned(ra, av.reduceLanes(VectorOperators.SUADD));\n+                int v = av.reduceLanes(VectorOperators.SUADD);\n+                r[i] = v;\n+                ra = (int) VectorMath.addSaturatingUnsigned(ra, v);\n@@ -4593,0 +4730,23 @@\n+    @Test(dataProvider = \"intSaturatingUnaryOpProvider\")\n+    static void SUADDReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = SUADD_IDENTITY;\n+\n+        Assert.assertEquals((int) VectorMath.addSaturatingUnsigned(id, id), id,\n+                            \"SUADD(SUADD_IDENTITY, SUADD_IDENTITY) != SUADD_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) VectorMath.addSaturatingUnsigned(id, x), x);\n+                Assert.assertEquals((int) VectorMath.addSaturatingUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) VectorMath.addSaturatingUnsigned(id, x), x,\n+                                \"SUADD(SUADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) VectorMath.addSaturatingUnsigned(x, id), x,\n+                                \"SUADD(\" + x + \", SUADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4594,1 +4754,1 @@\n-        int res = 0;\n+        int res = SUADD_IDENTITY;\n@@ -4604,1 +4764,1 @@\n-        int res = 0;\n+        int res = SUADD_IDENTITY;\n@@ -4620,0 +4780,1 @@\n+            ra = SUADD_IDENTITY;\n@@ -4622,9 +4783,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.SUADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                ra = (int) VectorMath.addSaturatingUnsigned(ra, av.reduceLanes(VectorOperators.SUADD, vmask));\n+                int v = av.reduceLanes(VectorOperators.SUADD, vmask);\n+                r[i] = v;\n+                ra = (int) VectorMath.addSaturatingUnsigned(ra, v);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/Int128VectorTests.java","additions":413,"deletions":258,"binary":false,"changes":671,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -66,1 +66,0 @@\n-\n@@ -69,0 +68,13 @@\n+    \/\/ Identity values for reduction operations\n+    private static final int ADD_IDENTITY = (int)0;\n+    private static final int AND_IDENTITY = (int)-1;\n+    private static final int FIRST_NONZERO_IDENTITY = (int)0;\n+    private static final int MAX_IDENTITY = Integer.MIN_VALUE;\n+    private static final int MIN_IDENTITY = Integer.MAX_VALUE;\n+    private static final int MUL_IDENTITY = (int)1;\n+    private static final int OR_IDENTITY = (int)0;\n+    private static final int SUADD_IDENTITY = (int)0;\n+    private static final int UMAX_IDENTITY = (int)0;   \/\/ Minimum unsigned value\n+    private static final int UMIN_IDENTITY = (int)-1;  \/\/ Maximum unsigned value\n+    private static final int XOR_IDENTITY = (int)0;\n+\n@@ -3613,1 +3625,1 @@\n-        int res = -1;\n+        int res = AND_IDENTITY;\n@@ -3622,1 +3634,1 @@\n-        int res = -1;\n+        int res = AND_IDENTITY;\n@@ -3634,8 +3646,1 @@\n-        int ra = -1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.AND);\n-            }\n-        }\n+        int ra = 0;\n@@ -3644,1 +3649,1 @@\n-            ra = -1;\n+            ra = AND_IDENTITY;\n@@ -3647,1 +3652,3 @@\n-                ra &= av.reduceLanes(VectorOperators.AND);\n+                int v = av.reduceLanes(VectorOperators.AND);\n+                r[i] = v;\n+                ra &= v;\n@@ -3655,0 +3662,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void ANDReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = AND_IDENTITY;\n+\n+        Assert.assertEquals((int) (id & id), id,\n+                            \"AND(AND_IDENTITY, AND_IDENTITY) != AND_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) (id & x), x);\n+                Assert.assertEquals((int) (x & id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) (id & x), x,\n+                                \"AND(AND_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) (x & id), x,\n+                                \"AND(\" + x + \", AND_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3656,1 +3686,1 @@\n-        int res = -1;\n+        int res = AND_IDENTITY;\n@@ -3666,1 +3696,1 @@\n-        int res = -1;\n+        int res = AND_IDENTITY;\n@@ -3680,8 +3710,1 @@\n-        int ra = -1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.AND, vmask);\n-            }\n-        }\n+        int ra = 0;\n@@ -3690,1 +3713,1 @@\n-            ra = -1;\n+            ra = AND_IDENTITY;\n@@ -3693,1 +3716,3 @@\n-                ra &= av.reduceLanes(VectorOperators.AND, vmask);\n+                int v = av.reduceLanes(VectorOperators.AND, vmask);\n+                r[i] = v;\n+                ra &= v;\n@@ -3702,1 +3727,1 @@\n-        int res = 0;\n+        int res = OR_IDENTITY;\n@@ -3711,1 +3736,1 @@\n-        int res = 0;\n+        int res = OR_IDENTITY;\n@@ -3726,0 +3751,1 @@\n+            ra = OR_IDENTITY;\n@@ -3728,9 +3754,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.OR);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                ra |= av.reduceLanes(VectorOperators.OR);\n+                int v = av.reduceLanes(VectorOperators.OR);\n+                r[i] = v;\n+                ra |= v;\n@@ -3744,0 +3764,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void ORReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = OR_IDENTITY;\n+\n+        Assert.assertEquals((int) (id | id), id,\n+                            \"OR(OR_IDENTITY, OR_IDENTITY) != OR_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) (id | x), x);\n+                Assert.assertEquals((int) (x | id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) (id | x), x,\n+                                \"OR(OR_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) (x | id), x,\n+                                \"OR(\" + x + \", OR_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3745,1 +3788,1 @@\n-        int res = 0;\n+        int res = OR_IDENTITY;\n@@ -3755,1 +3798,1 @@\n-        int res = 0;\n+        int res = OR_IDENTITY;\n@@ -3772,0 +3815,1 @@\n+            ra = OR_IDENTITY;\n@@ -3774,9 +3818,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.OR, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                ra |= av.reduceLanes(VectorOperators.OR, vmask);\n+                int v = av.reduceLanes(VectorOperators.OR, vmask);\n+                r[i] = v;\n+                ra |= v;\n@@ -3791,1 +3829,1 @@\n-        int res = 0;\n+        int res = XOR_IDENTITY;\n@@ -3800,1 +3838,1 @@\n-        int res = 0;\n+        int res = XOR_IDENTITY;\n@@ -3815,0 +3853,1 @@\n+            ra = XOR_IDENTITY;\n@@ -3817,9 +3856,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.XOR);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                ra ^= av.reduceLanes(VectorOperators.XOR);\n+                int v = av.reduceLanes(VectorOperators.XOR);\n+                r[i] = v;\n+                ra ^= v;\n@@ -3833,0 +3866,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void XORReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = XOR_IDENTITY;\n+\n+        Assert.assertEquals((int) (id ^ id), id,\n+                            \"XOR(XOR_IDENTITY, XOR_IDENTITY) != XOR_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) (id ^ x), x);\n+                Assert.assertEquals((int) (x ^ id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) (id ^ x), x,\n+                                \"XOR(XOR_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) (x ^ id), x,\n+                                \"XOR(\" + x + \", XOR_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3834,1 +3890,1 @@\n-        int res = 0;\n+        int res = XOR_IDENTITY;\n@@ -3844,1 +3900,1 @@\n-        int res = 0;\n+        int res = XOR_IDENTITY;\n@@ -3861,0 +3917,1 @@\n+            ra = XOR_IDENTITY;\n@@ -3863,9 +3920,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.XOR, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                ra ^= av.reduceLanes(VectorOperators.XOR, vmask);\n+                int v = av.reduceLanes(VectorOperators.XOR, vmask);\n+                r[i] = v;\n+                ra ^= v;\n@@ -3880,1 +3931,1 @@\n-        int res = 0;\n+        int res = ADD_IDENTITY;\n@@ -3889,1 +3940,1 @@\n-        int res = 0;\n+        int res = ADD_IDENTITY;\n@@ -3904,0 +3955,1 @@\n+            ra = ADD_IDENTITY;\n@@ -3906,9 +3958,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD);\n+                int v = av.reduceLanes(VectorOperators.ADD);\n+                r[i] = v;\n+                ra += v;\n@@ -3922,0 +3968,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void ADDReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = ADD_IDENTITY;\n+\n+        Assert.assertEquals((int) (id + id), id,\n+                            \"ADD(ADD_IDENTITY, ADD_IDENTITY) != ADD_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) (id + x), x);\n+                Assert.assertEquals((int) (x + id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) (id + x), x,\n+                                \"ADD(ADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) (x + id), x,\n+                                \"ADD(\" + x + \", ADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3923,1 +3992,1 @@\n-        int res = 0;\n+        int res = ADD_IDENTITY;\n@@ -3933,1 +4002,1 @@\n-        int res = 0;\n+        int res = ADD_IDENTITY;\n@@ -3950,0 +4019,1 @@\n+            ra = ADD_IDENTITY;\n@@ -3952,9 +4022,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD, vmask);\n+                int v = av.reduceLanes(VectorOperators.ADD, vmask);\n+                r[i] = v;\n+                ra += v;\n@@ -3969,1 +4033,1 @@\n-        int res = 1;\n+        int res = MUL_IDENTITY;\n@@ -3978,1 +4042,1 @@\n-        int res = 1;\n+        int res = MUL_IDENTITY;\n@@ -3990,8 +4054,1 @@\n-        int ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL);\n-            }\n-        }\n+        int ra = 0;\n@@ -4000,1 +4057,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -4003,1 +4060,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL);\n+                int v = av.reduceLanes(VectorOperators.MUL);\n+                r[i] = v;\n+                ra *= v;\n@@ -4011,0 +4070,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void MULReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = MUL_IDENTITY;\n+\n+        Assert.assertEquals((int) (id * id), id,\n+                            \"MUL(MUL_IDENTITY, MUL_IDENTITY) != MUL_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) (id * x), x);\n+                Assert.assertEquals((int) (x * id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) (id * x), x,\n+                                \"MUL(MUL_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) (x * id), x,\n+                                \"MUL(\" + x + \", MUL_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4012,1 +4094,1 @@\n-        int res = 1;\n+        int res = MUL_IDENTITY;\n@@ -4022,1 +4104,1 @@\n-        int res = 1;\n+        int res = MUL_IDENTITY;\n@@ -4036,8 +4118,1 @@\n-        int ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL, vmask);\n-            }\n-        }\n+        int ra = 0;\n@@ -4046,1 +4121,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -4049,1 +4124,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL, vmask);\n+                int v = av.reduceLanes(VectorOperators.MUL, vmask);\n+                r[i] = v;\n+                ra *= v;\n@@ -4058,1 +4135,1 @@\n-        int res = Integer.MAX_VALUE;\n+        int res = MIN_IDENTITY;\n@@ -4067,1 +4144,1 @@\n-        int res = Integer.MAX_VALUE;\n+        int res = MIN_IDENTITY;\n@@ -4079,8 +4156,1 @@\n-        int ra = Integer.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN);\n-            }\n-        }\n+        int ra = 0;\n@@ -4089,1 +4159,1 @@\n-            ra = Integer.MAX_VALUE;\n+            ra = MIN_IDENTITY;\n@@ -4092,1 +4162,3 @@\n-                ra = (int) Math.min(ra, av.reduceLanes(VectorOperators.MIN));\n+                int v = av.reduceLanes(VectorOperators.MIN);\n+                r[i] = v;\n+                ra = (int) Math.min(ra, v);\n@@ -4100,0 +4172,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void MINReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = MIN_IDENTITY;\n+\n+        Assert.assertEquals((int) Math.min(id, id), id,\n+                            \"MIN(MIN_IDENTITY, MIN_IDENTITY) != MIN_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) Math.min(id, x), x);\n+                Assert.assertEquals((int) Math.min(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) Math.min(id, x), x,\n+                                \"MIN(MIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) Math.min(x, id), x,\n+                                \"MIN(\" + x + \", MIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4101,1 +4196,1 @@\n-        int res = Integer.MAX_VALUE;\n+        int res = MIN_IDENTITY;\n@@ -4111,1 +4206,1 @@\n-        int res = Integer.MAX_VALUE;\n+        int res = MIN_IDENTITY;\n@@ -4125,8 +4220,1 @@\n-        int ra = Integer.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN, vmask);\n-            }\n-        }\n+        int ra = 0;\n@@ -4135,1 +4223,1 @@\n-            ra = Integer.MAX_VALUE;\n+            ra = MIN_IDENTITY;\n@@ -4138,1 +4226,3 @@\n-                ra = (int) Math.min(ra, av.reduceLanes(VectorOperators.MIN, vmask));\n+                int v = av.reduceLanes(VectorOperators.MIN, vmask);\n+                r[i] = v;\n+                ra = (int) Math.min(ra, v);\n@@ -4147,1 +4237,1 @@\n-        int res = Integer.MIN_VALUE;\n+        int res = MAX_IDENTITY;\n@@ -4156,1 +4246,1 @@\n-        int res = Integer.MIN_VALUE;\n+        int res = MAX_IDENTITY;\n@@ -4168,8 +4258,1 @@\n-        int ra = Integer.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX);\n-            }\n-        }\n+        int ra = 0;\n@@ -4178,1 +4261,1 @@\n-            ra = Integer.MIN_VALUE;\n+            ra = MAX_IDENTITY;\n@@ -4181,1 +4264,3 @@\n-                ra = (int) Math.max(ra, av.reduceLanes(VectorOperators.MAX));\n+                int v = av.reduceLanes(VectorOperators.MAX);\n+                r[i] = v;\n+                ra = (int) Math.max(ra, v);\n@@ -4189,0 +4274,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void MAXReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = MAX_IDENTITY;\n+\n+        Assert.assertEquals((int) Math.max(id, id), id,\n+                            \"MAX(MAX_IDENTITY, MAX_IDENTITY) != MAX_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) Math.max(id, x), x);\n+                Assert.assertEquals((int) Math.max(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) Math.max(id, x), x,\n+                                \"MAX(MAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) Math.max(x, id), x,\n+                                \"MAX(\" + x + \", MAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4190,1 +4298,1 @@\n-        int res = Integer.MIN_VALUE;\n+        int res = MAX_IDENTITY;\n@@ -4200,1 +4308,1 @@\n-        int res = Integer.MIN_VALUE;\n+        int res = MAX_IDENTITY;\n@@ -4214,8 +4322,1 @@\n-        int ra = Integer.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX, vmask);\n-            }\n-        }\n+        int ra = 0;\n@@ -4224,1 +4325,1 @@\n-            ra = Integer.MIN_VALUE;\n+            ra = MAX_IDENTITY;\n@@ -4227,1 +4328,3 @@\n-                ra = (int) Math.max(ra, av.reduceLanes(VectorOperators.MAX, vmask));\n+                int v = av.reduceLanes(VectorOperators.MAX, vmask);\n+                r[i] = v;\n+                ra = (int) Math.max(ra, v);\n@@ -4236,1 +4339,1 @@\n-        int res = Integer.MAX_VALUE;\n+        int res = UMIN_IDENTITY;\n@@ -4245,1 +4348,1 @@\n-        int res = Integer.MAX_VALUE;\n+        int res = UMIN_IDENTITY;\n@@ -4257,8 +4360,1 @@\n-        int ra = Integer.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMIN);\n-            }\n-        }\n+        int ra = 0;\n@@ -4267,1 +4363,1 @@\n-            ra = Integer.MAX_VALUE;\n+            ra = UMIN_IDENTITY;\n@@ -4270,1 +4366,3 @@\n-                ra = (int) VectorMath.minUnsigned(ra, av.reduceLanes(VectorOperators.UMIN));\n+                int v = av.reduceLanes(VectorOperators.UMIN);\n+                r[i] = v;\n+                ra = (int) VectorMath.minUnsigned(ra, v);\n@@ -4278,0 +4376,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void UMINReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = UMIN_IDENTITY;\n+\n+        Assert.assertEquals((int) VectorMath.minUnsigned(id, id), id,\n+                            \"UMIN(UMIN_IDENTITY, UMIN_IDENTITY) != UMIN_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) VectorMath.minUnsigned(id, x), x);\n+                Assert.assertEquals((int) VectorMath.minUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) VectorMath.minUnsigned(id, x), x,\n+                                \"UMIN(UMIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) VectorMath.minUnsigned(x, id), x,\n+                                \"UMIN(\" + x + \", UMIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4279,1 +4400,1 @@\n-        int res = Integer.MAX_VALUE;\n+        int res = UMIN_IDENTITY;\n@@ -4289,1 +4410,1 @@\n-        int res = Integer.MAX_VALUE;\n+        int res = UMIN_IDENTITY;\n@@ -4303,8 +4424,1 @@\n-        int ra = Integer.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMIN, vmask);\n-            }\n-        }\n+        int ra = 0;\n@@ -4313,1 +4427,1 @@\n-            ra = Integer.MAX_VALUE;\n+            ra = UMIN_IDENTITY;\n@@ -4316,1 +4430,3 @@\n-                ra = (int) VectorMath.minUnsigned(ra, av.reduceLanes(VectorOperators.UMIN, vmask));\n+                int v = av.reduceLanes(VectorOperators.UMIN, vmask);\n+                r[i] = v;\n+                ra = (int) VectorMath.minUnsigned(ra, v);\n@@ -4325,1 +4441,1 @@\n-        int res = Integer.MIN_VALUE;\n+        int res = UMAX_IDENTITY;\n@@ -4334,1 +4450,1 @@\n-        int res = Integer.MIN_VALUE;\n+        int res = UMAX_IDENTITY;\n@@ -4346,8 +4462,1 @@\n-        int ra = Integer.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMAX);\n-            }\n-        }\n+        int ra = 0;\n@@ -4356,1 +4465,1 @@\n-            ra = Integer.MIN_VALUE;\n+            ra = UMAX_IDENTITY;\n@@ -4359,1 +4468,3 @@\n-                ra = (int) VectorMath.maxUnsigned(ra, av.reduceLanes(VectorOperators.UMAX));\n+                int v = av.reduceLanes(VectorOperators.UMAX);\n+                r[i] = v;\n+                ra = (int) VectorMath.maxUnsigned(ra, v);\n@@ -4367,0 +4478,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void UMAXReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = UMAX_IDENTITY;\n+\n+        Assert.assertEquals((int) VectorMath.maxUnsigned(id, id), id,\n+                            \"UMAX(UMAX_IDENTITY, UMAX_IDENTITY) != UMAX_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) VectorMath.maxUnsigned(id, x), x);\n+                Assert.assertEquals((int) VectorMath.maxUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) VectorMath.maxUnsigned(id, x), x,\n+                                \"UMAX(UMAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) VectorMath.maxUnsigned(x, id), x,\n+                                \"UMAX(\" + x + \", UMAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4368,1 +4502,1 @@\n-        int res = Integer.MIN_VALUE;\n+        int res = UMAX_IDENTITY;\n@@ -4378,1 +4512,1 @@\n-        int res = Integer.MIN_VALUE;\n+        int res = UMAX_IDENTITY;\n@@ -4392,8 +4526,1 @@\n-        int ra = Integer.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMAX, vmask);\n-            }\n-        }\n+        int ra = 0;\n@@ -4402,1 +4529,1 @@\n-            ra = Integer.MIN_VALUE;\n+            ra = UMAX_IDENTITY;\n@@ -4405,1 +4532,3 @@\n-                ra = (int) VectorMath.maxUnsigned(ra, av.reduceLanes(VectorOperators.UMAX, vmask));\n+                int v = av.reduceLanes(VectorOperators.UMAX, vmask);\n+                r[i] = v;\n+                ra = (int) VectorMath.maxUnsigned(ra, v);\n@@ -4414,1 +4543,1 @@\n-        int res = (int) 0;\n+        int res = FIRST_NONZERO_IDENTITY;\n@@ -4423,1 +4552,1 @@\n-        int res = (int) 0;\n+        int res = FIRST_NONZERO_IDENTITY;\n@@ -4435,8 +4564,1 @@\n-        int ra = (int) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n-            }\n-        }\n+        int ra = 0;\n@@ -4445,1 +4567,1 @@\n-            ra = (int) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -4448,1 +4570,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO));\n+                int v = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -4456,0 +4580,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void FIRST_NONZEROReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = FIRST_NONZERO_IDENTITY;\n+\n+        Assert.assertEquals(firstNonZero(id, id), id,\n+                            \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, FIRST_NONZERO_IDENTITY) != FIRST_NONZERO_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals(firstNonZero(id, x), x);\n+                Assert.assertEquals(firstNonZero(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals(firstNonZero(id, x), x,\n+                                \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals(firstNonZero(x, id), x,\n+                                \"FIRST_NONZERO(\" + x + \", FIRST_NONZERO_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4457,1 +4604,1 @@\n-        int res = (int) 0;\n+        int res = FIRST_NONZERO_IDENTITY;\n@@ -4467,1 +4614,1 @@\n-        int res = (int) 0;\n+        int res = FIRST_NONZERO_IDENTITY;\n@@ -4481,8 +4628,1 @@\n-        int ra = (int) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n-            }\n-        }\n+        int ra = 0;\n@@ -4491,1 +4631,1 @@\n-            ra = (int) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -4494,1 +4634,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask));\n+                int v = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -4551,1 +4693,1 @@\n-        int res = 0;\n+        int res = SUADD_IDENTITY;\n@@ -4560,1 +4702,1 @@\n-        int res = 0;\n+        int res = SUADD_IDENTITY;\n@@ -4575,0 +4717,1 @@\n+            ra = SUADD_IDENTITY;\n@@ -4577,9 +4720,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.SUADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                ra = (int) VectorMath.addSaturatingUnsigned(ra, av.reduceLanes(VectorOperators.SUADD));\n+                int v = av.reduceLanes(VectorOperators.SUADD);\n+                r[i] = v;\n+                ra = (int) VectorMath.addSaturatingUnsigned(ra, v);\n@@ -4593,0 +4730,23 @@\n+    @Test(dataProvider = \"intSaturatingUnaryOpProvider\")\n+    static void SUADDReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = SUADD_IDENTITY;\n+\n+        Assert.assertEquals((int) VectorMath.addSaturatingUnsigned(id, id), id,\n+                            \"SUADD(SUADD_IDENTITY, SUADD_IDENTITY) != SUADD_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) VectorMath.addSaturatingUnsigned(id, x), x);\n+                Assert.assertEquals((int) VectorMath.addSaturatingUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) VectorMath.addSaturatingUnsigned(id, x), x,\n+                                \"SUADD(SUADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) VectorMath.addSaturatingUnsigned(x, id), x,\n+                                \"SUADD(\" + x + \", SUADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4594,1 +4754,1 @@\n-        int res = 0;\n+        int res = SUADD_IDENTITY;\n@@ -4604,1 +4764,1 @@\n-        int res = 0;\n+        int res = SUADD_IDENTITY;\n@@ -4620,0 +4780,1 @@\n+            ra = SUADD_IDENTITY;\n@@ -4622,9 +4783,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.SUADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                ra = (int) VectorMath.addSaturatingUnsigned(ra, av.reduceLanes(VectorOperators.SUADD, vmask));\n+                int v = av.reduceLanes(VectorOperators.SUADD, vmask);\n+                r[i] = v;\n+                ra = (int) VectorMath.addSaturatingUnsigned(ra, v);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/Int256VectorTests.java","additions":413,"deletions":258,"binary":false,"changes":671,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -66,1 +66,0 @@\n-\n@@ -69,0 +68,13 @@\n+    \/\/ Identity values for reduction operations\n+    private static final int ADD_IDENTITY = (int)0;\n+    private static final int AND_IDENTITY = (int)-1;\n+    private static final int FIRST_NONZERO_IDENTITY = (int)0;\n+    private static final int MAX_IDENTITY = Integer.MIN_VALUE;\n+    private static final int MIN_IDENTITY = Integer.MAX_VALUE;\n+    private static final int MUL_IDENTITY = (int)1;\n+    private static final int OR_IDENTITY = (int)0;\n+    private static final int SUADD_IDENTITY = (int)0;\n+    private static final int UMAX_IDENTITY = (int)0;   \/\/ Minimum unsigned value\n+    private static final int UMIN_IDENTITY = (int)-1;  \/\/ Maximum unsigned value\n+    private static final int XOR_IDENTITY = (int)0;\n+\n@@ -3613,1 +3625,1 @@\n-        int res = -1;\n+        int res = AND_IDENTITY;\n@@ -3622,1 +3634,1 @@\n-        int res = -1;\n+        int res = AND_IDENTITY;\n@@ -3634,8 +3646,1 @@\n-        int ra = -1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.AND);\n-            }\n-        }\n+        int ra = 0;\n@@ -3644,1 +3649,1 @@\n-            ra = -1;\n+            ra = AND_IDENTITY;\n@@ -3647,1 +3652,3 @@\n-                ra &= av.reduceLanes(VectorOperators.AND);\n+                int v = av.reduceLanes(VectorOperators.AND);\n+                r[i] = v;\n+                ra &= v;\n@@ -3655,0 +3662,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void ANDReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = AND_IDENTITY;\n+\n+        Assert.assertEquals((int) (id & id), id,\n+                            \"AND(AND_IDENTITY, AND_IDENTITY) != AND_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) (id & x), x);\n+                Assert.assertEquals((int) (x & id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) (id & x), x,\n+                                \"AND(AND_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) (x & id), x,\n+                                \"AND(\" + x + \", AND_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3656,1 +3686,1 @@\n-        int res = -1;\n+        int res = AND_IDENTITY;\n@@ -3666,1 +3696,1 @@\n-        int res = -1;\n+        int res = AND_IDENTITY;\n@@ -3680,8 +3710,1 @@\n-        int ra = -1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.AND, vmask);\n-            }\n-        }\n+        int ra = 0;\n@@ -3690,1 +3713,1 @@\n-            ra = -1;\n+            ra = AND_IDENTITY;\n@@ -3693,1 +3716,3 @@\n-                ra &= av.reduceLanes(VectorOperators.AND, vmask);\n+                int v = av.reduceLanes(VectorOperators.AND, vmask);\n+                r[i] = v;\n+                ra &= v;\n@@ -3702,1 +3727,1 @@\n-        int res = 0;\n+        int res = OR_IDENTITY;\n@@ -3711,1 +3736,1 @@\n-        int res = 0;\n+        int res = OR_IDENTITY;\n@@ -3726,0 +3751,1 @@\n+            ra = OR_IDENTITY;\n@@ -3728,9 +3754,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.OR);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                ra |= av.reduceLanes(VectorOperators.OR);\n+                int v = av.reduceLanes(VectorOperators.OR);\n+                r[i] = v;\n+                ra |= v;\n@@ -3744,0 +3764,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void ORReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = OR_IDENTITY;\n+\n+        Assert.assertEquals((int) (id | id), id,\n+                            \"OR(OR_IDENTITY, OR_IDENTITY) != OR_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) (id | x), x);\n+                Assert.assertEquals((int) (x | id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) (id | x), x,\n+                                \"OR(OR_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) (x | id), x,\n+                                \"OR(\" + x + \", OR_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3745,1 +3788,1 @@\n-        int res = 0;\n+        int res = OR_IDENTITY;\n@@ -3755,1 +3798,1 @@\n-        int res = 0;\n+        int res = OR_IDENTITY;\n@@ -3772,0 +3815,1 @@\n+            ra = OR_IDENTITY;\n@@ -3774,9 +3818,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.OR, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                ra |= av.reduceLanes(VectorOperators.OR, vmask);\n+                int v = av.reduceLanes(VectorOperators.OR, vmask);\n+                r[i] = v;\n+                ra |= v;\n@@ -3791,1 +3829,1 @@\n-        int res = 0;\n+        int res = XOR_IDENTITY;\n@@ -3800,1 +3838,1 @@\n-        int res = 0;\n+        int res = XOR_IDENTITY;\n@@ -3815,0 +3853,1 @@\n+            ra = XOR_IDENTITY;\n@@ -3817,9 +3856,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.XOR);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                ra ^= av.reduceLanes(VectorOperators.XOR);\n+                int v = av.reduceLanes(VectorOperators.XOR);\n+                r[i] = v;\n+                ra ^= v;\n@@ -3833,0 +3866,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void XORReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = XOR_IDENTITY;\n+\n+        Assert.assertEquals((int) (id ^ id), id,\n+                            \"XOR(XOR_IDENTITY, XOR_IDENTITY) != XOR_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) (id ^ x), x);\n+                Assert.assertEquals((int) (x ^ id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) (id ^ x), x,\n+                                \"XOR(XOR_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) (x ^ id), x,\n+                                \"XOR(\" + x + \", XOR_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3834,1 +3890,1 @@\n-        int res = 0;\n+        int res = XOR_IDENTITY;\n@@ -3844,1 +3900,1 @@\n-        int res = 0;\n+        int res = XOR_IDENTITY;\n@@ -3861,0 +3917,1 @@\n+            ra = XOR_IDENTITY;\n@@ -3863,9 +3920,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.XOR, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                ra ^= av.reduceLanes(VectorOperators.XOR, vmask);\n+                int v = av.reduceLanes(VectorOperators.XOR, vmask);\n+                r[i] = v;\n+                ra ^= v;\n@@ -3880,1 +3931,1 @@\n-        int res = 0;\n+        int res = ADD_IDENTITY;\n@@ -3889,1 +3940,1 @@\n-        int res = 0;\n+        int res = ADD_IDENTITY;\n@@ -3904,0 +3955,1 @@\n+            ra = ADD_IDENTITY;\n@@ -3906,9 +3958,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD);\n+                int v = av.reduceLanes(VectorOperators.ADD);\n+                r[i] = v;\n+                ra += v;\n@@ -3922,0 +3968,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void ADDReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = ADD_IDENTITY;\n+\n+        Assert.assertEquals((int) (id + id), id,\n+                            \"ADD(ADD_IDENTITY, ADD_IDENTITY) != ADD_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) (id + x), x);\n+                Assert.assertEquals((int) (x + id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) (id + x), x,\n+                                \"ADD(ADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) (x + id), x,\n+                                \"ADD(\" + x + \", ADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3923,1 +3992,1 @@\n-        int res = 0;\n+        int res = ADD_IDENTITY;\n@@ -3933,1 +4002,1 @@\n-        int res = 0;\n+        int res = ADD_IDENTITY;\n@@ -3950,0 +4019,1 @@\n+            ra = ADD_IDENTITY;\n@@ -3952,9 +4022,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD, vmask);\n+                int v = av.reduceLanes(VectorOperators.ADD, vmask);\n+                r[i] = v;\n+                ra += v;\n@@ -3969,1 +4033,1 @@\n-        int res = 1;\n+        int res = MUL_IDENTITY;\n@@ -3978,1 +4042,1 @@\n-        int res = 1;\n+        int res = MUL_IDENTITY;\n@@ -3990,8 +4054,1 @@\n-        int ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL);\n-            }\n-        }\n+        int ra = 0;\n@@ -4000,1 +4057,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -4003,1 +4060,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL);\n+                int v = av.reduceLanes(VectorOperators.MUL);\n+                r[i] = v;\n+                ra *= v;\n@@ -4011,0 +4070,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void MULReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = MUL_IDENTITY;\n+\n+        Assert.assertEquals((int) (id * id), id,\n+                            \"MUL(MUL_IDENTITY, MUL_IDENTITY) != MUL_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) (id * x), x);\n+                Assert.assertEquals((int) (x * id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) (id * x), x,\n+                                \"MUL(MUL_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) (x * id), x,\n+                                \"MUL(\" + x + \", MUL_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4012,1 +4094,1 @@\n-        int res = 1;\n+        int res = MUL_IDENTITY;\n@@ -4022,1 +4104,1 @@\n-        int res = 1;\n+        int res = MUL_IDENTITY;\n@@ -4036,8 +4118,1 @@\n-        int ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL, vmask);\n-            }\n-        }\n+        int ra = 0;\n@@ -4046,1 +4121,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -4049,1 +4124,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL, vmask);\n+                int v = av.reduceLanes(VectorOperators.MUL, vmask);\n+                r[i] = v;\n+                ra *= v;\n@@ -4058,1 +4135,1 @@\n-        int res = Integer.MAX_VALUE;\n+        int res = MIN_IDENTITY;\n@@ -4067,1 +4144,1 @@\n-        int res = Integer.MAX_VALUE;\n+        int res = MIN_IDENTITY;\n@@ -4079,8 +4156,1 @@\n-        int ra = Integer.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN);\n-            }\n-        }\n+        int ra = 0;\n@@ -4089,1 +4159,1 @@\n-            ra = Integer.MAX_VALUE;\n+            ra = MIN_IDENTITY;\n@@ -4092,1 +4162,3 @@\n-                ra = (int) Math.min(ra, av.reduceLanes(VectorOperators.MIN));\n+                int v = av.reduceLanes(VectorOperators.MIN);\n+                r[i] = v;\n+                ra = (int) Math.min(ra, v);\n@@ -4100,0 +4172,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void MINReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = MIN_IDENTITY;\n+\n+        Assert.assertEquals((int) Math.min(id, id), id,\n+                            \"MIN(MIN_IDENTITY, MIN_IDENTITY) != MIN_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) Math.min(id, x), x);\n+                Assert.assertEquals((int) Math.min(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) Math.min(id, x), x,\n+                                \"MIN(MIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) Math.min(x, id), x,\n+                                \"MIN(\" + x + \", MIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4101,1 +4196,1 @@\n-        int res = Integer.MAX_VALUE;\n+        int res = MIN_IDENTITY;\n@@ -4111,1 +4206,1 @@\n-        int res = Integer.MAX_VALUE;\n+        int res = MIN_IDENTITY;\n@@ -4125,8 +4220,1 @@\n-        int ra = Integer.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN, vmask);\n-            }\n-        }\n+        int ra = 0;\n@@ -4135,1 +4223,1 @@\n-            ra = Integer.MAX_VALUE;\n+            ra = MIN_IDENTITY;\n@@ -4138,1 +4226,3 @@\n-                ra = (int) Math.min(ra, av.reduceLanes(VectorOperators.MIN, vmask));\n+                int v = av.reduceLanes(VectorOperators.MIN, vmask);\n+                r[i] = v;\n+                ra = (int) Math.min(ra, v);\n@@ -4147,1 +4237,1 @@\n-        int res = Integer.MIN_VALUE;\n+        int res = MAX_IDENTITY;\n@@ -4156,1 +4246,1 @@\n-        int res = Integer.MIN_VALUE;\n+        int res = MAX_IDENTITY;\n@@ -4168,8 +4258,1 @@\n-        int ra = Integer.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX);\n-            }\n-        }\n+        int ra = 0;\n@@ -4178,1 +4261,1 @@\n-            ra = Integer.MIN_VALUE;\n+            ra = MAX_IDENTITY;\n@@ -4181,1 +4264,3 @@\n-                ra = (int) Math.max(ra, av.reduceLanes(VectorOperators.MAX));\n+                int v = av.reduceLanes(VectorOperators.MAX);\n+                r[i] = v;\n+                ra = (int) Math.max(ra, v);\n@@ -4189,0 +4274,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void MAXReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = MAX_IDENTITY;\n+\n+        Assert.assertEquals((int) Math.max(id, id), id,\n+                            \"MAX(MAX_IDENTITY, MAX_IDENTITY) != MAX_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) Math.max(id, x), x);\n+                Assert.assertEquals((int) Math.max(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) Math.max(id, x), x,\n+                                \"MAX(MAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) Math.max(x, id), x,\n+                                \"MAX(\" + x + \", MAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4190,1 +4298,1 @@\n-        int res = Integer.MIN_VALUE;\n+        int res = MAX_IDENTITY;\n@@ -4200,1 +4308,1 @@\n-        int res = Integer.MIN_VALUE;\n+        int res = MAX_IDENTITY;\n@@ -4214,8 +4322,1 @@\n-        int ra = Integer.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX, vmask);\n-            }\n-        }\n+        int ra = 0;\n@@ -4224,1 +4325,1 @@\n-            ra = Integer.MIN_VALUE;\n+            ra = MAX_IDENTITY;\n@@ -4227,1 +4328,3 @@\n-                ra = (int) Math.max(ra, av.reduceLanes(VectorOperators.MAX, vmask));\n+                int v = av.reduceLanes(VectorOperators.MAX, vmask);\n+                r[i] = v;\n+                ra = (int) Math.max(ra, v);\n@@ -4236,1 +4339,1 @@\n-        int res = Integer.MAX_VALUE;\n+        int res = UMIN_IDENTITY;\n@@ -4245,1 +4348,1 @@\n-        int res = Integer.MAX_VALUE;\n+        int res = UMIN_IDENTITY;\n@@ -4257,8 +4360,1 @@\n-        int ra = Integer.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMIN);\n-            }\n-        }\n+        int ra = 0;\n@@ -4267,1 +4363,1 @@\n-            ra = Integer.MAX_VALUE;\n+            ra = UMIN_IDENTITY;\n@@ -4270,1 +4366,3 @@\n-                ra = (int) VectorMath.minUnsigned(ra, av.reduceLanes(VectorOperators.UMIN));\n+                int v = av.reduceLanes(VectorOperators.UMIN);\n+                r[i] = v;\n+                ra = (int) VectorMath.minUnsigned(ra, v);\n@@ -4278,0 +4376,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void UMINReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = UMIN_IDENTITY;\n+\n+        Assert.assertEquals((int) VectorMath.minUnsigned(id, id), id,\n+                            \"UMIN(UMIN_IDENTITY, UMIN_IDENTITY) != UMIN_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) VectorMath.minUnsigned(id, x), x);\n+                Assert.assertEquals((int) VectorMath.minUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) VectorMath.minUnsigned(id, x), x,\n+                                \"UMIN(UMIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) VectorMath.minUnsigned(x, id), x,\n+                                \"UMIN(\" + x + \", UMIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4279,1 +4400,1 @@\n-        int res = Integer.MAX_VALUE;\n+        int res = UMIN_IDENTITY;\n@@ -4289,1 +4410,1 @@\n-        int res = Integer.MAX_VALUE;\n+        int res = UMIN_IDENTITY;\n@@ -4303,8 +4424,1 @@\n-        int ra = Integer.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMIN, vmask);\n-            }\n-        }\n+        int ra = 0;\n@@ -4313,1 +4427,1 @@\n-            ra = Integer.MAX_VALUE;\n+            ra = UMIN_IDENTITY;\n@@ -4316,1 +4430,3 @@\n-                ra = (int) VectorMath.minUnsigned(ra, av.reduceLanes(VectorOperators.UMIN, vmask));\n+                int v = av.reduceLanes(VectorOperators.UMIN, vmask);\n+                r[i] = v;\n+                ra = (int) VectorMath.minUnsigned(ra, v);\n@@ -4325,1 +4441,1 @@\n-        int res = Integer.MIN_VALUE;\n+        int res = UMAX_IDENTITY;\n@@ -4334,1 +4450,1 @@\n-        int res = Integer.MIN_VALUE;\n+        int res = UMAX_IDENTITY;\n@@ -4346,8 +4462,1 @@\n-        int ra = Integer.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMAX);\n-            }\n-        }\n+        int ra = 0;\n@@ -4356,1 +4465,1 @@\n-            ra = Integer.MIN_VALUE;\n+            ra = UMAX_IDENTITY;\n@@ -4359,1 +4468,3 @@\n-                ra = (int) VectorMath.maxUnsigned(ra, av.reduceLanes(VectorOperators.UMAX));\n+                int v = av.reduceLanes(VectorOperators.UMAX);\n+                r[i] = v;\n+                ra = (int) VectorMath.maxUnsigned(ra, v);\n@@ -4367,0 +4478,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void UMAXReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = UMAX_IDENTITY;\n+\n+        Assert.assertEquals((int) VectorMath.maxUnsigned(id, id), id,\n+                            \"UMAX(UMAX_IDENTITY, UMAX_IDENTITY) != UMAX_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) VectorMath.maxUnsigned(id, x), x);\n+                Assert.assertEquals((int) VectorMath.maxUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) VectorMath.maxUnsigned(id, x), x,\n+                                \"UMAX(UMAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) VectorMath.maxUnsigned(x, id), x,\n+                                \"UMAX(\" + x + \", UMAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4368,1 +4502,1 @@\n-        int res = Integer.MIN_VALUE;\n+        int res = UMAX_IDENTITY;\n@@ -4378,1 +4512,1 @@\n-        int res = Integer.MIN_VALUE;\n+        int res = UMAX_IDENTITY;\n@@ -4392,8 +4526,1 @@\n-        int ra = Integer.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMAX, vmask);\n-            }\n-        }\n+        int ra = 0;\n@@ -4402,1 +4529,1 @@\n-            ra = Integer.MIN_VALUE;\n+            ra = UMAX_IDENTITY;\n@@ -4405,1 +4532,3 @@\n-                ra = (int) VectorMath.maxUnsigned(ra, av.reduceLanes(VectorOperators.UMAX, vmask));\n+                int v = av.reduceLanes(VectorOperators.UMAX, vmask);\n+                r[i] = v;\n+                ra = (int) VectorMath.maxUnsigned(ra, v);\n@@ -4414,1 +4543,1 @@\n-        int res = (int) 0;\n+        int res = FIRST_NONZERO_IDENTITY;\n@@ -4423,1 +4552,1 @@\n-        int res = (int) 0;\n+        int res = FIRST_NONZERO_IDENTITY;\n@@ -4435,8 +4564,1 @@\n-        int ra = (int) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n-            }\n-        }\n+        int ra = 0;\n@@ -4445,1 +4567,1 @@\n-            ra = (int) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -4448,1 +4570,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO));\n+                int v = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -4456,0 +4580,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void FIRST_NONZEROReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = FIRST_NONZERO_IDENTITY;\n+\n+        Assert.assertEquals(firstNonZero(id, id), id,\n+                            \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, FIRST_NONZERO_IDENTITY) != FIRST_NONZERO_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals(firstNonZero(id, x), x);\n+                Assert.assertEquals(firstNonZero(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals(firstNonZero(id, x), x,\n+                                \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals(firstNonZero(x, id), x,\n+                                \"FIRST_NONZERO(\" + x + \", FIRST_NONZERO_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4457,1 +4604,1 @@\n-        int res = (int) 0;\n+        int res = FIRST_NONZERO_IDENTITY;\n@@ -4467,1 +4614,1 @@\n-        int res = (int) 0;\n+        int res = FIRST_NONZERO_IDENTITY;\n@@ -4481,8 +4628,1 @@\n-        int ra = (int) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n-            }\n-        }\n+        int ra = 0;\n@@ -4491,1 +4631,1 @@\n-            ra = (int) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -4494,1 +4634,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask));\n+                int v = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -4551,1 +4693,1 @@\n-        int res = 0;\n+        int res = SUADD_IDENTITY;\n@@ -4560,1 +4702,1 @@\n-        int res = 0;\n+        int res = SUADD_IDENTITY;\n@@ -4575,0 +4717,1 @@\n+            ra = SUADD_IDENTITY;\n@@ -4577,9 +4720,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.SUADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                ra = (int) VectorMath.addSaturatingUnsigned(ra, av.reduceLanes(VectorOperators.SUADD));\n+                int v = av.reduceLanes(VectorOperators.SUADD);\n+                r[i] = v;\n+                ra = (int) VectorMath.addSaturatingUnsigned(ra, v);\n@@ -4593,0 +4730,23 @@\n+    @Test(dataProvider = \"intSaturatingUnaryOpProvider\")\n+    static void SUADDReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = SUADD_IDENTITY;\n+\n+        Assert.assertEquals((int) VectorMath.addSaturatingUnsigned(id, id), id,\n+                            \"SUADD(SUADD_IDENTITY, SUADD_IDENTITY) != SUADD_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) VectorMath.addSaturatingUnsigned(id, x), x);\n+                Assert.assertEquals((int) VectorMath.addSaturatingUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) VectorMath.addSaturatingUnsigned(id, x), x,\n+                                \"SUADD(SUADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) VectorMath.addSaturatingUnsigned(x, id), x,\n+                                \"SUADD(\" + x + \", SUADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4594,1 +4754,1 @@\n-        int res = 0;\n+        int res = SUADD_IDENTITY;\n@@ -4604,1 +4764,1 @@\n-        int res = 0;\n+        int res = SUADD_IDENTITY;\n@@ -4620,0 +4780,1 @@\n+            ra = SUADD_IDENTITY;\n@@ -4622,9 +4783,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.SUADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                ra = (int) VectorMath.addSaturatingUnsigned(ra, av.reduceLanes(VectorOperators.SUADD, vmask));\n+                int v = av.reduceLanes(VectorOperators.SUADD, vmask);\n+                r[i] = v;\n+                ra = (int) VectorMath.addSaturatingUnsigned(ra, v);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/Int512VectorTests.java","additions":413,"deletions":258,"binary":false,"changes":671,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -66,1 +66,0 @@\n-\n@@ -69,0 +68,13 @@\n+    \/\/ Identity values for reduction operations\n+    private static final int ADD_IDENTITY = (int)0;\n+    private static final int AND_IDENTITY = (int)-1;\n+    private static final int FIRST_NONZERO_IDENTITY = (int)0;\n+    private static final int MAX_IDENTITY = Integer.MIN_VALUE;\n+    private static final int MIN_IDENTITY = Integer.MAX_VALUE;\n+    private static final int MUL_IDENTITY = (int)1;\n+    private static final int OR_IDENTITY = (int)0;\n+    private static final int SUADD_IDENTITY = (int)0;\n+    private static final int UMAX_IDENTITY = (int)0;   \/\/ Minimum unsigned value\n+    private static final int UMIN_IDENTITY = (int)-1;  \/\/ Maximum unsigned value\n+    private static final int XOR_IDENTITY = (int)0;\n+\n@@ -3613,1 +3625,1 @@\n-        int res = -1;\n+        int res = AND_IDENTITY;\n@@ -3622,1 +3634,1 @@\n-        int res = -1;\n+        int res = AND_IDENTITY;\n@@ -3634,8 +3646,1 @@\n-        int ra = -1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.AND);\n-            }\n-        }\n+        int ra = 0;\n@@ -3644,1 +3649,1 @@\n-            ra = -1;\n+            ra = AND_IDENTITY;\n@@ -3647,1 +3652,3 @@\n-                ra &= av.reduceLanes(VectorOperators.AND);\n+                int v = av.reduceLanes(VectorOperators.AND);\n+                r[i] = v;\n+                ra &= v;\n@@ -3655,0 +3662,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void ANDReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = AND_IDENTITY;\n+\n+        Assert.assertEquals((int) (id & id), id,\n+                            \"AND(AND_IDENTITY, AND_IDENTITY) != AND_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) (id & x), x);\n+                Assert.assertEquals((int) (x & id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) (id & x), x,\n+                                \"AND(AND_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) (x & id), x,\n+                                \"AND(\" + x + \", AND_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3656,1 +3686,1 @@\n-        int res = -1;\n+        int res = AND_IDENTITY;\n@@ -3666,1 +3696,1 @@\n-        int res = -1;\n+        int res = AND_IDENTITY;\n@@ -3680,8 +3710,1 @@\n-        int ra = -1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.AND, vmask);\n-            }\n-        }\n+        int ra = 0;\n@@ -3690,1 +3713,1 @@\n-            ra = -1;\n+            ra = AND_IDENTITY;\n@@ -3693,1 +3716,3 @@\n-                ra &= av.reduceLanes(VectorOperators.AND, vmask);\n+                int v = av.reduceLanes(VectorOperators.AND, vmask);\n+                r[i] = v;\n+                ra &= v;\n@@ -3702,1 +3727,1 @@\n-        int res = 0;\n+        int res = OR_IDENTITY;\n@@ -3711,1 +3736,1 @@\n-        int res = 0;\n+        int res = OR_IDENTITY;\n@@ -3726,0 +3751,1 @@\n+            ra = OR_IDENTITY;\n@@ -3728,9 +3754,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.OR);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                ra |= av.reduceLanes(VectorOperators.OR);\n+                int v = av.reduceLanes(VectorOperators.OR);\n+                r[i] = v;\n+                ra |= v;\n@@ -3744,0 +3764,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void ORReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = OR_IDENTITY;\n+\n+        Assert.assertEquals((int) (id | id), id,\n+                            \"OR(OR_IDENTITY, OR_IDENTITY) != OR_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) (id | x), x);\n+                Assert.assertEquals((int) (x | id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) (id | x), x,\n+                                \"OR(OR_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) (x | id), x,\n+                                \"OR(\" + x + \", OR_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3745,1 +3788,1 @@\n-        int res = 0;\n+        int res = OR_IDENTITY;\n@@ -3755,1 +3798,1 @@\n-        int res = 0;\n+        int res = OR_IDENTITY;\n@@ -3772,0 +3815,1 @@\n+            ra = OR_IDENTITY;\n@@ -3774,9 +3818,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.OR, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                ra |= av.reduceLanes(VectorOperators.OR, vmask);\n+                int v = av.reduceLanes(VectorOperators.OR, vmask);\n+                r[i] = v;\n+                ra |= v;\n@@ -3791,1 +3829,1 @@\n-        int res = 0;\n+        int res = XOR_IDENTITY;\n@@ -3800,1 +3838,1 @@\n-        int res = 0;\n+        int res = XOR_IDENTITY;\n@@ -3815,0 +3853,1 @@\n+            ra = XOR_IDENTITY;\n@@ -3817,9 +3856,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.XOR);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                ra ^= av.reduceLanes(VectorOperators.XOR);\n+                int v = av.reduceLanes(VectorOperators.XOR);\n+                r[i] = v;\n+                ra ^= v;\n@@ -3833,0 +3866,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void XORReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = XOR_IDENTITY;\n+\n+        Assert.assertEquals((int) (id ^ id), id,\n+                            \"XOR(XOR_IDENTITY, XOR_IDENTITY) != XOR_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) (id ^ x), x);\n+                Assert.assertEquals((int) (x ^ id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) (id ^ x), x,\n+                                \"XOR(XOR_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) (x ^ id), x,\n+                                \"XOR(\" + x + \", XOR_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3834,1 +3890,1 @@\n-        int res = 0;\n+        int res = XOR_IDENTITY;\n@@ -3844,1 +3900,1 @@\n-        int res = 0;\n+        int res = XOR_IDENTITY;\n@@ -3861,0 +3917,1 @@\n+            ra = XOR_IDENTITY;\n@@ -3863,9 +3920,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.XOR, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                ra ^= av.reduceLanes(VectorOperators.XOR, vmask);\n+                int v = av.reduceLanes(VectorOperators.XOR, vmask);\n+                r[i] = v;\n+                ra ^= v;\n@@ -3880,1 +3931,1 @@\n-        int res = 0;\n+        int res = ADD_IDENTITY;\n@@ -3889,1 +3940,1 @@\n-        int res = 0;\n+        int res = ADD_IDENTITY;\n@@ -3904,0 +3955,1 @@\n+            ra = ADD_IDENTITY;\n@@ -3906,9 +3958,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD);\n+                int v = av.reduceLanes(VectorOperators.ADD);\n+                r[i] = v;\n+                ra += v;\n@@ -3922,0 +3968,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void ADDReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = ADD_IDENTITY;\n+\n+        Assert.assertEquals((int) (id + id), id,\n+                            \"ADD(ADD_IDENTITY, ADD_IDENTITY) != ADD_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) (id + x), x);\n+                Assert.assertEquals((int) (x + id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) (id + x), x,\n+                                \"ADD(ADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) (x + id), x,\n+                                \"ADD(\" + x + \", ADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3923,1 +3992,1 @@\n-        int res = 0;\n+        int res = ADD_IDENTITY;\n@@ -3933,1 +4002,1 @@\n-        int res = 0;\n+        int res = ADD_IDENTITY;\n@@ -3950,0 +4019,1 @@\n+            ra = ADD_IDENTITY;\n@@ -3952,9 +4022,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD, vmask);\n+                int v = av.reduceLanes(VectorOperators.ADD, vmask);\n+                r[i] = v;\n+                ra += v;\n@@ -3969,1 +4033,1 @@\n-        int res = 1;\n+        int res = MUL_IDENTITY;\n@@ -3978,1 +4042,1 @@\n-        int res = 1;\n+        int res = MUL_IDENTITY;\n@@ -3990,8 +4054,1 @@\n-        int ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL);\n-            }\n-        }\n+        int ra = 0;\n@@ -4000,1 +4057,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -4003,1 +4060,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL);\n+                int v = av.reduceLanes(VectorOperators.MUL);\n+                r[i] = v;\n+                ra *= v;\n@@ -4011,0 +4070,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void MULReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = MUL_IDENTITY;\n+\n+        Assert.assertEquals((int) (id * id), id,\n+                            \"MUL(MUL_IDENTITY, MUL_IDENTITY) != MUL_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) (id * x), x);\n+                Assert.assertEquals((int) (x * id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) (id * x), x,\n+                                \"MUL(MUL_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) (x * id), x,\n+                                \"MUL(\" + x + \", MUL_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4012,1 +4094,1 @@\n-        int res = 1;\n+        int res = MUL_IDENTITY;\n@@ -4022,1 +4104,1 @@\n-        int res = 1;\n+        int res = MUL_IDENTITY;\n@@ -4036,8 +4118,1 @@\n-        int ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL, vmask);\n-            }\n-        }\n+        int ra = 0;\n@@ -4046,1 +4121,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -4049,1 +4124,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL, vmask);\n+                int v = av.reduceLanes(VectorOperators.MUL, vmask);\n+                r[i] = v;\n+                ra *= v;\n@@ -4058,1 +4135,1 @@\n-        int res = Integer.MAX_VALUE;\n+        int res = MIN_IDENTITY;\n@@ -4067,1 +4144,1 @@\n-        int res = Integer.MAX_VALUE;\n+        int res = MIN_IDENTITY;\n@@ -4079,8 +4156,1 @@\n-        int ra = Integer.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN);\n-            }\n-        }\n+        int ra = 0;\n@@ -4089,1 +4159,1 @@\n-            ra = Integer.MAX_VALUE;\n+            ra = MIN_IDENTITY;\n@@ -4092,1 +4162,3 @@\n-                ra = (int) Math.min(ra, av.reduceLanes(VectorOperators.MIN));\n+                int v = av.reduceLanes(VectorOperators.MIN);\n+                r[i] = v;\n+                ra = (int) Math.min(ra, v);\n@@ -4100,0 +4172,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void MINReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = MIN_IDENTITY;\n+\n+        Assert.assertEquals((int) Math.min(id, id), id,\n+                            \"MIN(MIN_IDENTITY, MIN_IDENTITY) != MIN_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) Math.min(id, x), x);\n+                Assert.assertEquals((int) Math.min(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) Math.min(id, x), x,\n+                                \"MIN(MIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) Math.min(x, id), x,\n+                                \"MIN(\" + x + \", MIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4101,1 +4196,1 @@\n-        int res = Integer.MAX_VALUE;\n+        int res = MIN_IDENTITY;\n@@ -4111,1 +4206,1 @@\n-        int res = Integer.MAX_VALUE;\n+        int res = MIN_IDENTITY;\n@@ -4125,8 +4220,1 @@\n-        int ra = Integer.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN, vmask);\n-            }\n-        }\n+        int ra = 0;\n@@ -4135,1 +4223,1 @@\n-            ra = Integer.MAX_VALUE;\n+            ra = MIN_IDENTITY;\n@@ -4138,1 +4226,3 @@\n-                ra = (int) Math.min(ra, av.reduceLanes(VectorOperators.MIN, vmask));\n+                int v = av.reduceLanes(VectorOperators.MIN, vmask);\n+                r[i] = v;\n+                ra = (int) Math.min(ra, v);\n@@ -4147,1 +4237,1 @@\n-        int res = Integer.MIN_VALUE;\n+        int res = MAX_IDENTITY;\n@@ -4156,1 +4246,1 @@\n-        int res = Integer.MIN_VALUE;\n+        int res = MAX_IDENTITY;\n@@ -4168,8 +4258,1 @@\n-        int ra = Integer.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX);\n-            }\n-        }\n+        int ra = 0;\n@@ -4178,1 +4261,1 @@\n-            ra = Integer.MIN_VALUE;\n+            ra = MAX_IDENTITY;\n@@ -4181,1 +4264,3 @@\n-                ra = (int) Math.max(ra, av.reduceLanes(VectorOperators.MAX));\n+                int v = av.reduceLanes(VectorOperators.MAX);\n+                r[i] = v;\n+                ra = (int) Math.max(ra, v);\n@@ -4189,0 +4274,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void MAXReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = MAX_IDENTITY;\n+\n+        Assert.assertEquals((int) Math.max(id, id), id,\n+                            \"MAX(MAX_IDENTITY, MAX_IDENTITY) != MAX_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) Math.max(id, x), x);\n+                Assert.assertEquals((int) Math.max(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) Math.max(id, x), x,\n+                                \"MAX(MAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) Math.max(x, id), x,\n+                                \"MAX(\" + x + \", MAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4190,1 +4298,1 @@\n-        int res = Integer.MIN_VALUE;\n+        int res = MAX_IDENTITY;\n@@ -4200,1 +4308,1 @@\n-        int res = Integer.MIN_VALUE;\n+        int res = MAX_IDENTITY;\n@@ -4214,8 +4322,1 @@\n-        int ra = Integer.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX, vmask);\n-            }\n-        }\n+        int ra = 0;\n@@ -4224,1 +4325,1 @@\n-            ra = Integer.MIN_VALUE;\n+            ra = MAX_IDENTITY;\n@@ -4227,1 +4328,3 @@\n-                ra = (int) Math.max(ra, av.reduceLanes(VectorOperators.MAX, vmask));\n+                int v = av.reduceLanes(VectorOperators.MAX, vmask);\n+                r[i] = v;\n+                ra = (int) Math.max(ra, v);\n@@ -4236,1 +4339,1 @@\n-        int res = Integer.MAX_VALUE;\n+        int res = UMIN_IDENTITY;\n@@ -4245,1 +4348,1 @@\n-        int res = Integer.MAX_VALUE;\n+        int res = UMIN_IDENTITY;\n@@ -4257,8 +4360,1 @@\n-        int ra = Integer.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMIN);\n-            }\n-        }\n+        int ra = 0;\n@@ -4267,1 +4363,1 @@\n-            ra = Integer.MAX_VALUE;\n+            ra = UMIN_IDENTITY;\n@@ -4270,1 +4366,3 @@\n-                ra = (int) VectorMath.minUnsigned(ra, av.reduceLanes(VectorOperators.UMIN));\n+                int v = av.reduceLanes(VectorOperators.UMIN);\n+                r[i] = v;\n+                ra = (int) VectorMath.minUnsigned(ra, v);\n@@ -4278,0 +4376,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void UMINReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = UMIN_IDENTITY;\n+\n+        Assert.assertEquals((int) VectorMath.minUnsigned(id, id), id,\n+                            \"UMIN(UMIN_IDENTITY, UMIN_IDENTITY) != UMIN_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) VectorMath.minUnsigned(id, x), x);\n+                Assert.assertEquals((int) VectorMath.minUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) VectorMath.minUnsigned(id, x), x,\n+                                \"UMIN(UMIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) VectorMath.minUnsigned(x, id), x,\n+                                \"UMIN(\" + x + \", UMIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4279,1 +4400,1 @@\n-        int res = Integer.MAX_VALUE;\n+        int res = UMIN_IDENTITY;\n@@ -4289,1 +4410,1 @@\n-        int res = Integer.MAX_VALUE;\n+        int res = UMIN_IDENTITY;\n@@ -4303,8 +4424,1 @@\n-        int ra = Integer.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMIN, vmask);\n-            }\n-        }\n+        int ra = 0;\n@@ -4313,1 +4427,1 @@\n-            ra = Integer.MAX_VALUE;\n+            ra = UMIN_IDENTITY;\n@@ -4316,1 +4430,3 @@\n-                ra = (int) VectorMath.minUnsigned(ra, av.reduceLanes(VectorOperators.UMIN, vmask));\n+                int v = av.reduceLanes(VectorOperators.UMIN, vmask);\n+                r[i] = v;\n+                ra = (int) VectorMath.minUnsigned(ra, v);\n@@ -4325,1 +4441,1 @@\n-        int res = Integer.MIN_VALUE;\n+        int res = UMAX_IDENTITY;\n@@ -4334,1 +4450,1 @@\n-        int res = Integer.MIN_VALUE;\n+        int res = UMAX_IDENTITY;\n@@ -4346,8 +4462,1 @@\n-        int ra = Integer.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMAX);\n-            }\n-        }\n+        int ra = 0;\n@@ -4356,1 +4465,1 @@\n-            ra = Integer.MIN_VALUE;\n+            ra = UMAX_IDENTITY;\n@@ -4359,1 +4468,3 @@\n-                ra = (int) VectorMath.maxUnsigned(ra, av.reduceLanes(VectorOperators.UMAX));\n+                int v = av.reduceLanes(VectorOperators.UMAX);\n+                r[i] = v;\n+                ra = (int) VectorMath.maxUnsigned(ra, v);\n@@ -4367,0 +4478,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void UMAXReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = UMAX_IDENTITY;\n+\n+        Assert.assertEquals((int) VectorMath.maxUnsigned(id, id), id,\n+                            \"UMAX(UMAX_IDENTITY, UMAX_IDENTITY) != UMAX_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) VectorMath.maxUnsigned(id, x), x);\n+                Assert.assertEquals((int) VectorMath.maxUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) VectorMath.maxUnsigned(id, x), x,\n+                                \"UMAX(UMAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) VectorMath.maxUnsigned(x, id), x,\n+                                \"UMAX(\" + x + \", UMAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4368,1 +4502,1 @@\n-        int res = Integer.MIN_VALUE;\n+        int res = UMAX_IDENTITY;\n@@ -4378,1 +4512,1 @@\n-        int res = Integer.MIN_VALUE;\n+        int res = UMAX_IDENTITY;\n@@ -4392,8 +4526,1 @@\n-        int ra = Integer.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMAX, vmask);\n-            }\n-        }\n+        int ra = 0;\n@@ -4402,1 +4529,1 @@\n-            ra = Integer.MIN_VALUE;\n+            ra = UMAX_IDENTITY;\n@@ -4405,1 +4532,3 @@\n-                ra = (int) VectorMath.maxUnsigned(ra, av.reduceLanes(VectorOperators.UMAX, vmask));\n+                int v = av.reduceLanes(VectorOperators.UMAX, vmask);\n+                r[i] = v;\n+                ra = (int) VectorMath.maxUnsigned(ra, v);\n@@ -4414,1 +4543,1 @@\n-        int res = (int) 0;\n+        int res = FIRST_NONZERO_IDENTITY;\n@@ -4423,1 +4552,1 @@\n-        int res = (int) 0;\n+        int res = FIRST_NONZERO_IDENTITY;\n@@ -4435,8 +4564,1 @@\n-        int ra = (int) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n-            }\n-        }\n+        int ra = 0;\n@@ -4445,1 +4567,1 @@\n-            ra = (int) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -4448,1 +4570,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO));\n+                int v = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -4456,0 +4580,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void FIRST_NONZEROReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = FIRST_NONZERO_IDENTITY;\n+\n+        Assert.assertEquals(firstNonZero(id, id), id,\n+                            \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, FIRST_NONZERO_IDENTITY) != FIRST_NONZERO_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals(firstNonZero(id, x), x);\n+                Assert.assertEquals(firstNonZero(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals(firstNonZero(id, x), x,\n+                                \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals(firstNonZero(x, id), x,\n+                                \"FIRST_NONZERO(\" + x + \", FIRST_NONZERO_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4457,1 +4604,1 @@\n-        int res = (int) 0;\n+        int res = FIRST_NONZERO_IDENTITY;\n@@ -4467,1 +4614,1 @@\n-        int res = (int) 0;\n+        int res = FIRST_NONZERO_IDENTITY;\n@@ -4481,8 +4628,1 @@\n-        int ra = (int) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n-            }\n-        }\n+        int ra = 0;\n@@ -4491,1 +4631,1 @@\n-            ra = (int) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -4494,1 +4634,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask));\n+                int v = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -4551,1 +4693,1 @@\n-        int res = 0;\n+        int res = SUADD_IDENTITY;\n@@ -4560,1 +4702,1 @@\n-        int res = 0;\n+        int res = SUADD_IDENTITY;\n@@ -4575,0 +4717,1 @@\n+            ra = SUADD_IDENTITY;\n@@ -4577,9 +4720,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.SUADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                ra = (int) VectorMath.addSaturatingUnsigned(ra, av.reduceLanes(VectorOperators.SUADD));\n+                int v = av.reduceLanes(VectorOperators.SUADD);\n+                r[i] = v;\n+                ra = (int) VectorMath.addSaturatingUnsigned(ra, v);\n@@ -4593,0 +4730,23 @@\n+    @Test(dataProvider = \"intSaturatingUnaryOpProvider\")\n+    static void SUADDReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = SUADD_IDENTITY;\n+\n+        Assert.assertEquals((int) VectorMath.addSaturatingUnsigned(id, id), id,\n+                            \"SUADD(SUADD_IDENTITY, SUADD_IDENTITY) != SUADD_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) VectorMath.addSaturatingUnsigned(id, x), x);\n+                Assert.assertEquals((int) VectorMath.addSaturatingUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) VectorMath.addSaturatingUnsigned(id, x), x,\n+                                \"SUADD(SUADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) VectorMath.addSaturatingUnsigned(x, id), x,\n+                                \"SUADD(\" + x + \", SUADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4594,1 +4754,1 @@\n-        int res = 0;\n+        int res = SUADD_IDENTITY;\n@@ -4604,1 +4764,1 @@\n-        int res = 0;\n+        int res = SUADD_IDENTITY;\n@@ -4620,0 +4780,1 @@\n+            ra = SUADD_IDENTITY;\n@@ -4622,9 +4783,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.SUADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                ra = (int) VectorMath.addSaturatingUnsigned(ra, av.reduceLanes(VectorOperators.SUADD, vmask));\n+                int v = av.reduceLanes(VectorOperators.SUADD, vmask);\n+                r[i] = v;\n+                ra = (int) VectorMath.addSaturatingUnsigned(ra, v);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/Int64VectorTests.java","additions":413,"deletions":258,"binary":false,"changes":671,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -74,0 +74,13 @@\n+    \/\/ Identity values for reduction operations\n+    private static final int ADD_IDENTITY = (int)0;\n+    private static final int AND_IDENTITY = (int)-1;\n+    private static final int FIRST_NONZERO_IDENTITY = (int)0;\n+    private static final int MAX_IDENTITY = Integer.MIN_VALUE;\n+    private static final int MIN_IDENTITY = Integer.MAX_VALUE;\n+    private static final int MUL_IDENTITY = (int)1;\n+    private static final int OR_IDENTITY = (int)0;\n+    private static final int SUADD_IDENTITY = (int)0;\n+    private static final int UMAX_IDENTITY = (int)0;   \/\/ Minimum unsigned value\n+    private static final int UMIN_IDENTITY = (int)-1;  \/\/ Maximum unsigned value\n+    private static final int XOR_IDENTITY = (int)0;\n+\n@@ -3618,1 +3631,1 @@\n-        int res = -1;\n+        int res = AND_IDENTITY;\n@@ -3627,1 +3640,1 @@\n-        int res = -1;\n+        int res = AND_IDENTITY;\n@@ -3639,8 +3652,1 @@\n-        int ra = -1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.AND);\n-            }\n-        }\n+        int ra = 0;\n@@ -3649,1 +3655,1 @@\n-            ra = -1;\n+            ra = AND_IDENTITY;\n@@ -3652,1 +3658,3 @@\n-                ra &= av.reduceLanes(VectorOperators.AND);\n+                int v = av.reduceLanes(VectorOperators.AND);\n+                r[i] = v;\n+                ra &= v;\n@@ -3660,0 +3668,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void ANDReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = AND_IDENTITY;\n+\n+        Assert.assertEquals((int) (id & id), id,\n+                            \"AND(AND_IDENTITY, AND_IDENTITY) != AND_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) (id & x), x);\n+                Assert.assertEquals((int) (x & id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) (id & x), x,\n+                                \"AND(AND_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) (x & id), x,\n+                                \"AND(\" + x + \", AND_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3661,1 +3692,1 @@\n-        int res = -1;\n+        int res = AND_IDENTITY;\n@@ -3671,1 +3702,1 @@\n-        int res = -1;\n+        int res = AND_IDENTITY;\n@@ -3685,8 +3716,1 @@\n-        int ra = -1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.AND, vmask);\n-            }\n-        }\n+        int ra = 0;\n@@ -3695,1 +3719,1 @@\n-            ra = -1;\n+            ra = AND_IDENTITY;\n@@ -3698,1 +3722,3 @@\n-                ra &= av.reduceLanes(VectorOperators.AND, vmask);\n+                int v = av.reduceLanes(VectorOperators.AND, vmask);\n+                r[i] = v;\n+                ra &= v;\n@@ -3707,1 +3733,1 @@\n-        int res = 0;\n+        int res = OR_IDENTITY;\n@@ -3716,1 +3742,1 @@\n-        int res = 0;\n+        int res = OR_IDENTITY;\n@@ -3731,0 +3757,1 @@\n+            ra = OR_IDENTITY;\n@@ -3733,9 +3760,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.OR);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                ra |= av.reduceLanes(VectorOperators.OR);\n+                int v = av.reduceLanes(VectorOperators.OR);\n+                r[i] = v;\n+                ra |= v;\n@@ -3749,0 +3770,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void ORReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = OR_IDENTITY;\n+\n+        Assert.assertEquals((int) (id | id), id,\n+                            \"OR(OR_IDENTITY, OR_IDENTITY) != OR_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) (id | x), x);\n+                Assert.assertEquals((int) (x | id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) (id | x), x,\n+                                \"OR(OR_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) (x | id), x,\n+                                \"OR(\" + x + \", OR_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3750,1 +3794,1 @@\n-        int res = 0;\n+        int res = OR_IDENTITY;\n@@ -3760,1 +3804,1 @@\n-        int res = 0;\n+        int res = OR_IDENTITY;\n@@ -3777,0 +3821,1 @@\n+            ra = OR_IDENTITY;\n@@ -3779,9 +3824,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.OR, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                ra |= av.reduceLanes(VectorOperators.OR, vmask);\n+                int v = av.reduceLanes(VectorOperators.OR, vmask);\n+                r[i] = v;\n+                ra |= v;\n@@ -3796,1 +3835,1 @@\n-        int res = 0;\n+        int res = XOR_IDENTITY;\n@@ -3805,1 +3844,1 @@\n-        int res = 0;\n+        int res = XOR_IDENTITY;\n@@ -3820,0 +3859,1 @@\n+            ra = XOR_IDENTITY;\n@@ -3822,9 +3862,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.XOR);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                ra ^= av.reduceLanes(VectorOperators.XOR);\n+                int v = av.reduceLanes(VectorOperators.XOR);\n+                r[i] = v;\n+                ra ^= v;\n@@ -3838,0 +3872,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void XORReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = XOR_IDENTITY;\n+\n+        Assert.assertEquals((int) (id ^ id), id,\n+                            \"XOR(XOR_IDENTITY, XOR_IDENTITY) != XOR_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) (id ^ x), x);\n+                Assert.assertEquals((int) (x ^ id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) (id ^ x), x,\n+                                \"XOR(XOR_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) (x ^ id), x,\n+                                \"XOR(\" + x + \", XOR_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3839,1 +3896,1 @@\n-        int res = 0;\n+        int res = XOR_IDENTITY;\n@@ -3849,1 +3906,1 @@\n-        int res = 0;\n+        int res = XOR_IDENTITY;\n@@ -3866,0 +3923,1 @@\n+            ra = XOR_IDENTITY;\n@@ -3868,9 +3926,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.XOR, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                ra ^= av.reduceLanes(VectorOperators.XOR, vmask);\n+                int v = av.reduceLanes(VectorOperators.XOR, vmask);\n+                r[i] = v;\n+                ra ^= v;\n@@ -3885,1 +3937,1 @@\n-        int res = 0;\n+        int res = ADD_IDENTITY;\n@@ -3894,1 +3946,1 @@\n-        int res = 0;\n+        int res = ADD_IDENTITY;\n@@ -3909,0 +3961,1 @@\n+            ra = ADD_IDENTITY;\n@@ -3911,9 +3964,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD);\n+                int v = av.reduceLanes(VectorOperators.ADD);\n+                r[i] = v;\n+                ra += v;\n@@ -3927,0 +3974,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void ADDReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = ADD_IDENTITY;\n+\n+        Assert.assertEquals((int) (id + id), id,\n+                            \"ADD(ADD_IDENTITY, ADD_IDENTITY) != ADD_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) (id + x), x);\n+                Assert.assertEquals((int) (x + id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) (id + x), x,\n+                                \"ADD(ADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) (x + id), x,\n+                                \"ADD(\" + x + \", ADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3928,1 +3998,1 @@\n-        int res = 0;\n+        int res = ADD_IDENTITY;\n@@ -3938,1 +4008,1 @@\n-        int res = 0;\n+        int res = ADD_IDENTITY;\n@@ -3955,0 +4025,1 @@\n+            ra = ADD_IDENTITY;\n@@ -3957,9 +4028,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD, vmask);\n+                int v = av.reduceLanes(VectorOperators.ADD, vmask);\n+                r[i] = v;\n+                ra += v;\n@@ -3974,1 +4039,1 @@\n-        int res = 1;\n+        int res = MUL_IDENTITY;\n@@ -3983,1 +4048,1 @@\n-        int res = 1;\n+        int res = MUL_IDENTITY;\n@@ -3995,8 +4060,1 @@\n-        int ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL);\n-            }\n-        }\n+        int ra = 0;\n@@ -4005,1 +4063,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -4008,1 +4066,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL);\n+                int v = av.reduceLanes(VectorOperators.MUL);\n+                r[i] = v;\n+                ra *= v;\n@@ -4016,0 +4076,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void MULReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = MUL_IDENTITY;\n+\n+        Assert.assertEquals((int) (id * id), id,\n+                            \"MUL(MUL_IDENTITY, MUL_IDENTITY) != MUL_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) (id * x), x);\n+                Assert.assertEquals((int) (x * id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) (id * x), x,\n+                                \"MUL(MUL_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) (x * id), x,\n+                                \"MUL(\" + x + \", MUL_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4017,1 +4100,1 @@\n-        int res = 1;\n+        int res = MUL_IDENTITY;\n@@ -4027,1 +4110,1 @@\n-        int res = 1;\n+        int res = MUL_IDENTITY;\n@@ -4041,8 +4124,1 @@\n-        int ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL, vmask);\n-            }\n-        }\n+        int ra = 0;\n@@ -4051,1 +4127,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -4054,1 +4130,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL, vmask);\n+                int v = av.reduceLanes(VectorOperators.MUL, vmask);\n+                r[i] = v;\n+                ra *= v;\n@@ -4063,1 +4141,1 @@\n-        int res = Integer.MAX_VALUE;\n+        int res = MIN_IDENTITY;\n@@ -4072,1 +4150,1 @@\n-        int res = Integer.MAX_VALUE;\n+        int res = MIN_IDENTITY;\n@@ -4084,8 +4162,1 @@\n-        int ra = Integer.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN);\n-            }\n-        }\n+        int ra = 0;\n@@ -4094,1 +4165,1 @@\n-            ra = Integer.MAX_VALUE;\n+            ra = MIN_IDENTITY;\n@@ -4097,1 +4168,3 @@\n-                ra = (int) Math.min(ra, av.reduceLanes(VectorOperators.MIN));\n+                int v = av.reduceLanes(VectorOperators.MIN);\n+                r[i] = v;\n+                ra = (int) Math.min(ra, v);\n@@ -4105,0 +4178,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void MINReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = MIN_IDENTITY;\n+\n+        Assert.assertEquals((int) Math.min(id, id), id,\n+                            \"MIN(MIN_IDENTITY, MIN_IDENTITY) != MIN_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) Math.min(id, x), x);\n+                Assert.assertEquals((int) Math.min(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) Math.min(id, x), x,\n+                                \"MIN(MIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) Math.min(x, id), x,\n+                                \"MIN(\" + x + \", MIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4106,1 +4202,1 @@\n-        int res = Integer.MAX_VALUE;\n+        int res = MIN_IDENTITY;\n@@ -4116,1 +4212,1 @@\n-        int res = Integer.MAX_VALUE;\n+        int res = MIN_IDENTITY;\n@@ -4130,8 +4226,1 @@\n-        int ra = Integer.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN, vmask);\n-            }\n-        }\n+        int ra = 0;\n@@ -4140,1 +4229,1 @@\n-            ra = Integer.MAX_VALUE;\n+            ra = MIN_IDENTITY;\n@@ -4143,1 +4232,3 @@\n-                ra = (int) Math.min(ra, av.reduceLanes(VectorOperators.MIN, vmask));\n+                int v = av.reduceLanes(VectorOperators.MIN, vmask);\n+                r[i] = v;\n+                ra = (int) Math.min(ra, v);\n@@ -4152,1 +4243,1 @@\n-        int res = Integer.MIN_VALUE;\n+        int res = MAX_IDENTITY;\n@@ -4161,1 +4252,1 @@\n-        int res = Integer.MIN_VALUE;\n+        int res = MAX_IDENTITY;\n@@ -4173,8 +4264,1 @@\n-        int ra = Integer.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX);\n-            }\n-        }\n+        int ra = 0;\n@@ -4183,1 +4267,1 @@\n-            ra = Integer.MIN_VALUE;\n+            ra = MAX_IDENTITY;\n@@ -4186,1 +4270,3 @@\n-                ra = (int) Math.max(ra, av.reduceLanes(VectorOperators.MAX));\n+                int v = av.reduceLanes(VectorOperators.MAX);\n+                r[i] = v;\n+                ra = (int) Math.max(ra, v);\n@@ -4194,0 +4280,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void MAXReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = MAX_IDENTITY;\n+\n+        Assert.assertEquals((int) Math.max(id, id), id,\n+                            \"MAX(MAX_IDENTITY, MAX_IDENTITY) != MAX_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) Math.max(id, x), x);\n+                Assert.assertEquals((int) Math.max(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) Math.max(id, x), x,\n+                                \"MAX(MAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) Math.max(x, id), x,\n+                                \"MAX(\" + x + \", MAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4195,1 +4304,1 @@\n-        int res = Integer.MIN_VALUE;\n+        int res = MAX_IDENTITY;\n@@ -4205,1 +4314,1 @@\n-        int res = Integer.MIN_VALUE;\n+        int res = MAX_IDENTITY;\n@@ -4219,8 +4328,1 @@\n-        int ra = Integer.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX, vmask);\n-            }\n-        }\n+        int ra = 0;\n@@ -4229,1 +4331,1 @@\n-            ra = Integer.MIN_VALUE;\n+            ra = MAX_IDENTITY;\n@@ -4232,1 +4334,3 @@\n-                ra = (int) Math.max(ra, av.reduceLanes(VectorOperators.MAX, vmask));\n+                int v = av.reduceLanes(VectorOperators.MAX, vmask);\n+                r[i] = v;\n+                ra = (int) Math.max(ra, v);\n@@ -4241,1 +4345,1 @@\n-        int res = Integer.MAX_VALUE;\n+        int res = UMIN_IDENTITY;\n@@ -4250,1 +4354,1 @@\n-        int res = Integer.MAX_VALUE;\n+        int res = UMIN_IDENTITY;\n@@ -4262,8 +4366,1 @@\n-        int ra = Integer.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMIN);\n-            }\n-        }\n+        int ra = 0;\n@@ -4272,1 +4369,1 @@\n-            ra = Integer.MAX_VALUE;\n+            ra = UMIN_IDENTITY;\n@@ -4275,1 +4372,3 @@\n-                ra = (int) VectorMath.minUnsigned(ra, av.reduceLanes(VectorOperators.UMIN));\n+                int v = av.reduceLanes(VectorOperators.UMIN);\n+                r[i] = v;\n+                ra = (int) VectorMath.minUnsigned(ra, v);\n@@ -4283,0 +4382,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void UMINReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = UMIN_IDENTITY;\n+\n+        Assert.assertEquals((int) VectorMath.minUnsigned(id, id), id,\n+                            \"UMIN(UMIN_IDENTITY, UMIN_IDENTITY) != UMIN_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) VectorMath.minUnsigned(id, x), x);\n+                Assert.assertEquals((int) VectorMath.minUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) VectorMath.minUnsigned(id, x), x,\n+                                \"UMIN(UMIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) VectorMath.minUnsigned(x, id), x,\n+                                \"UMIN(\" + x + \", UMIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4284,1 +4406,1 @@\n-        int res = Integer.MAX_VALUE;\n+        int res = UMIN_IDENTITY;\n@@ -4294,1 +4416,1 @@\n-        int res = Integer.MAX_VALUE;\n+        int res = UMIN_IDENTITY;\n@@ -4308,8 +4430,1 @@\n-        int ra = Integer.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMIN, vmask);\n-            }\n-        }\n+        int ra = 0;\n@@ -4318,1 +4433,1 @@\n-            ra = Integer.MAX_VALUE;\n+            ra = UMIN_IDENTITY;\n@@ -4321,1 +4436,3 @@\n-                ra = (int) VectorMath.minUnsigned(ra, av.reduceLanes(VectorOperators.UMIN, vmask));\n+                int v = av.reduceLanes(VectorOperators.UMIN, vmask);\n+                r[i] = v;\n+                ra = (int) VectorMath.minUnsigned(ra, v);\n@@ -4330,1 +4447,1 @@\n-        int res = Integer.MIN_VALUE;\n+        int res = UMAX_IDENTITY;\n@@ -4339,1 +4456,1 @@\n-        int res = Integer.MIN_VALUE;\n+        int res = UMAX_IDENTITY;\n@@ -4351,8 +4468,1 @@\n-        int ra = Integer.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMAX);\n-            }\n-        }\n+        int ra = 0;\n@@ -4361,1 +4471,1 @@\n-            ra = Integer.MIN_VALUE;\n+            ra = UMAX_IDENTITY;\n@@ -4364,1 +4474,3 @@\n-                ra = (int) VectorMath.maxUnsigned(ra, av.reduceLanes(VectorOperators.UMAX));\n+                int v = av.reduceLanes(VectorOperators.UMAX);\n+                r[i] = v;\n+                ra = (int) VectorMath.maxUnsigned(ra, v);\n@@ -4372,0 +4484,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void UMAXReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = UMAX_IDENTITY;\n+\n+        Assert.assertEquals((int) VectorMath.maxUnsigned(id, id), id,\n+                            \"UMAX(UMAX_IDENTITY, UMAX_IDENTITY) != UMAX_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) VectorMath.maxUnsigned(id, x), x);\n+                Assert.assertEquals((int) VectorMath.maxUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) VectorMath.maxUnsigned(id, x), x,\n+                                \"UMAX(UMAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) VectorMath.maxUnsigned(x, id), x,\n+                                \"UMAX(\" + x + \", UMAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4373,1 +4508,1 @@\n-        int res = Integer.MIN_VALUE;\n+        int res = UMAX_IDENTITY;\n@@ -4383,1 +4518,1 @@\n-        int res = Integer.MIN_VALUE;\n+        int res = UMAX_IDENTITY;\n@@ -4397,8 +4532,1 @@\n-        int ra = Integer.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMAX, vmask);\n-            }\n-        }\n+        int ra = 0;\n@@ -4407,1 +4535,1 @@\n-            ra = Integer.MIN_VALUE;\n+            ra = UMAX_IDENTITY;\n@@ -4410,1 +4538,3 @@\n-                ra = (int) VectorMath.maxUnsigned(ra, av.reduceLanes(VectorOperators.UMAX, vmask));\n+                int v = av.reduceLanes(VectorOperators.UMAX, vmask);\n+                r[i] = v;\n+                ra = (int) VectorMath.maxUnsigned(ra, v);\n@@ -4419,1 +4549,1 @@\n-        int res = (int) 0;\n+        int res = FIRST_NONZERO_IDENTITY;\n@@ -4428,1 +4558,1 @@\n-        int res = (int) 0;\n+        int res = FIRST_NONZERO_IDENTITY;\n@@ -4440,8 +4570,1 @@\n-        int ra = (int) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n-            }\n-        }\n+        int ra = 0;\n@@ -4450,1 +4573,1 @@\n-            ra = (int) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -4453,1 +4576,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO));\n+                int v = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -4461,0 +4586,23 @@\n+    @Test(dataProvider = \"intUnaryOpProvider\")\n+    static void FIRST_NONZEROReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = FIRST_NONZERO_IDENTITY;\n+\n+        Assert.assertEquals(firstNonZero(id, id), id,\n+                            \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, FIRST_NONZERO_IDENTITY) != FIRST_NONZERO_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals(firstNonZero(id, x), x);\n+                Assert.assertEquals(firstNonZero(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals(firstNonZero(id, x), x,\n+                                \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals(firstNonZero(x, id), x,\n+                                \"FIRST_NONZERO(\" + x + \", FIRST_NONZERO_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4462,1 +4610,1 @@\n-        int res = (int) 0;\n+        int res = FIRST_NONZERO_IDENTITY;\n@@ -4472,1 +4620,1 @@\n-        int res = (int) 0;\n+        int res = FIRST_NONZERO_IDENTITY;\n@@ -4486,8 +4634,1 @@\n-        int ra = (int) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n-            }\n-        }\n+        int ra = 0;\n@@ -4496,1 +4637,1 @@\n-            ra = (int) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -4499,1 +4640,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask));\n+                int v = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -4556,1 +4699,1 @@\n-        int res = 0;\n+        int res = SUADD_IDENTITY;\n@@ -4565,1 +4708,1 @@\n-        int res = 0;\n+        int res = SUADD_IDENTITY;\n@@ -4580,0 +4723,1 @@\n+            ra = SUADD_IDENTITY;\n@@ -4582,9 +4726,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.SUADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                ra = (int) VectorMath.addSaturatingUnsigned(ra, av.reduceLanes(VectorOperators.SUADD));\n+                int v = av.reduceLanes(VectorOperators.SUADD);\n+                r[i] = v;\n+                ra = (int) VectorMath.addSaturatingUnsigned(ra, v);\n@@ -4598,0 +4736,23 @@\n+    @Test(dataProvider = \"intSaturatingUnaryOpProvider\")\n+    static void SUADDReduceIdentityValueTests(IntFunction<int[]> fa) {\n+        int[] a = fa.apply(SPECIES.length());\n+        int id = SUADD_IDENTITY;\n+\n+        Assert.assertEquals((int) VectorMath.addSaturatingUnsigned(id, id), id,\n+                            \"SUADD(SUADD_IDENTITY, SUADD_IDENTITY) != SUADD_IDENTITY\");\n+\n+        int x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((int) VectorMath.addSaturatingUnsigned(id, x), x);\n+                Assert.assertEquals((int) VectorMath.addSaturatingUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((int) VectorMath.addSaturatingUnsigned(id, x), x,\n+                                \"SUADD(SUADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((int) VectorMath.addSaturatingUnsigned(x, id), x,\n+                                \"SUADD(\" + x + \", SUADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4599,1 +4760,1 @@\n-        int res = 0;\n+        int res = SUADD_IDENTITY;\n@@ -4609,1 +4770,1 @@\n-        int res = 0;\n+        int res = SUADD_IDENTITY;\n@@ -4625,0 +4786,1 @@\n+            ra = SUADD_IDENTITY;\n@@ -4627,9 +4789,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.SUADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                IntVector av = IntVector.fromArray(SPECIES, a, i);\n-                ra = (int) VectorMath.addSaturatingUnsigned(ra, av.reduceLanes(VectorOperators.SUADD, vmask));\n+                int v = av.reduceLanes(VectorOperators.SUADD, vmask);\n+                r[i] = v;\n+                ra = (int) VectorMath.addSaturatingUnsigned(ra, v);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/IntMaxVectorTests.java","additions":413,"deletions":257,"binary":false,"changes":670,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -66,1 +66,0 @@\n-\n@@ -69,0 +68,13 @@\n+    \/\/ Identity values for reduction operations\n+    private static final long ADD_IDENTITY = (long)0;\n+    private static final long AND_IDENTITY = (long)-1;\n+    private static final long FIRST_NONZERO_IDENTITY = (long)0;\n+    private static final long MAX_IDENTITY = Long.MIN_VALUE;\n+    private static final long MIN_IDENTITY = Long.MAX_VALUE;\n+    private static final long MUL_IDENTITY = (long)1;\n+    private static final long OR_IDENTITY = (long)0;\n+    private static final long SUADD_IDENTITY = (long)0;\n+    private static final long UMAX_IDENTITY = (long)0;   \/\/ Minimum unsigned value\n+    private static final long UMIN_IDENTITY = (long)-1;  \/\/ Maximum unsigned value\n+    private static final long XOR_IDENTITY = (long)0;\n+\n@@ -3635,1 +3647,1 @@\n-        long res = -1;\n+        long res = AND_IDENTITY;\n@@ -3644,1 +3656,1 @@\n-        long res = -1;\n+        long res = AND_IDENTITY;\n@@ -3656,8 +3668,1 @@\n-        long ra = -1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.AND);\n-            }\n-        }\n+        long ra = 0;\n@@ -3666,1 +3671,1 @@\n-            ra = -1;\n+            ra = AND_IDENTITY;\n@@ -3669,1 +3674,3 @@\n-                ra &= av.reduceLanes(VectorOperators.AND);\n+                long v = av.reduceLanes(VectorOperators.AND);\n+                r[i] = v;\n+                ra &= v;\n@@ -3677,0 +3684,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void ANDReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = AND_IDENTITY;\n+\n+        Assert.assertEquals((long) (id & id), id,\n+                            \"AND(AND_IDENTITY, AND_IDENTITY) != AND_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) (id & x), x);\n+                Assert.assertEquals((long) (x & id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) (id & x), x,\n+                                \"AND(AND_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) (x & id), x,\n+                                \"AND(\" + x + \", AND_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3678,1 +3708,1 @@\n-        long res = -1;\n+        long res = AND_IDENTITY;\n@@ -3688,1 +3718,1 @@\n-        long res = -1;\n+        long res = AND_IDENTITY;\n@@ -3702,8 +3732,1 @@\n-        long ra = -1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.AND, vmask);\n-            }\n-        }\n+        long ra = 0;\n@@ -3712,1 +3735,1 @@\n-            ra = -1;\n+            ra = AND_IDENTITY;\n@@ -3715,1 +3738,3 @@\n-                ra &= av.reduceLanes(VectorOperators.AND, vmask);\n+                long v = av.reduceLanes(VectorOperators.AND, vmask);\n+                r[i] = v;\n+                ra &= v;\n@@ -3724,1 +3749,1 @@\n-        long res = 0;\n+        long res = OR_IDENTITY;\n@@ -3733,1 +3758,1 @@\n-        long res = 0;\n+        long res = OR_IDENTITY;\n@@ -3748,0 +3773,1 @@\n+            ra = OR_IDENTITY;\n@@ -3750,9 +3776,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.OR);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                ra |= av.reduceLanes(VectorOperators.OR);\n+                long v = av.reduceLanes(VectorOperators.OR);\n+                r[i] = v;\n+                ra |= v;\n@@ -3766,0 +3786,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void ORReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = OR_IDENTITY;\n+\n+        Assert.assertEquals((long) (id | id), id,\n+                            \"OR(OR_IDENTITY, OR_IDENTITY) != OR_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) (id | x), x);\n+                Assert.assertEquals((long) (x | id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) (id | x), x,\n+                                \"OR(OR_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) (x | id), x,\n+                                \"OR(\" + x + \", OR_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3767,1 +3810,1 @@\n-        long res = 0;\n+        long res = OR_IDENTITY;\n@@ -3777,1 +3820,1 @@\n-        long res = 0;\n+        long res = OR_IDENTITY;\n@@ -3794,0 +3837,1 @@\n+            ra = OR_IDENTITY;\n@@ -3796,9 +3840,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.OR, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                ra |= av.reduceLanes(VectorOperators.OR, vmask);\n+                long v = av.reduceLanes(VectorOperators.OR, vmask);\n+                r[i] = v;\n+                ra |= v;\n@@ -3813,1 +3851,1 @@\n-        long res = 0;\n+        long res = XOR_IDENTITY;\n@@ -3822,1 +3860,1 @@\n-        long res = 0;\n+        long res = XOR_IDENTITY;\n@@ -3837,0 +3875,1 @@\n+            ra = XOR_IDENTITY;\n@@ -3839,9 +3878,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.XOR);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                ra ^= av.reduceLanes(VectorOperators.XOR);\n+                long v = av.reduceLanes(VectorOperators.XOR);\n+                r[i] = v;\n+                ra ^= v;\n@@ -3855,0 +3888,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void XORReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = XOR_IDENTITY;\n+\n+        Assert.assertEquals((long) (id ^ id), id,\n+                            \"XOR(XOR_IDENTITY, XOR_IDENTITY) != XOR_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) (id ^ x), x);\n+                Assert.assertEquals((long) (x ^ id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) (id ^ x), x,\n+                                \"XOR(XOR_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) (x ^ id), x,\n+                                \"XOR(\" + x + \", XOR_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3856,1 +3912,1 @@\n-        long res = 0;\n+        long res = XOR_IDENTITY;\n@@ -3866,1 +3922,1 @@\n-        long res = 0;\n+        long res = XOR_IDENTITY;\n@@ -3883,0 +3939,1 @@\n+            ra = XOR_IDENTITY;\n@@ -3885,9 +3942,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.XOR, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                ra ^= av.reduceLanes(VectorOperators.XOR, vmask);\n+                long v = av.reduceLanes(VectorOperators.XOR, vmask);\n+                r[i] = v;\n+                ra ^= v;\n@@ -3902,1 +3953,1 @@\n-        long res = 0;\n+        long res = ADD_IDENTITY;\n@@ -3911,1 +3962,1 @@\n-        long res = 0;\n+        long res = ADD_IDENTITY;\n@@ -3926,0 +3977,1 @@\n+            ra = ADD_IDENTITY;\n@@ -3928,9 +3980,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD);\n+                long v = av.reduceLanes(VectorOperators.ADD);\n+                r[i] = v;\n+                ra += v;\n@@ -3944,0 +3990,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void ADDReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = ADD_IDENTITY;\n+\n+        Assert.assertEquals((long) (id + id), id,\n+                            \"ADD(ADD_IDENTITY, ADD_IDENTITY) != ADD_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) (id + x), x);\n+                Assert.assertEquals((long) (x + id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) (id + x), x,\n+                                \"ADD(ADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) (x + id), x,\n+                                \"ADD(\" + x + \", ADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3945,1 +4014,1 @@\n-        long res = 0;\n+        long res = ADD_IDENTITY;\n@@ -3955,1 +4024,1 @@\n-        long res = 0;\n+        long res = ADD_IDENTITY;\n@@ -3972,0 +4041,1 @@\n+            ra = ADD_IDENTITY;\n@@ -3974,9 +4044,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD, vmask);\n+                long v = av.reduceLanes(VectorOperators.ADD, vmask);\n+                r[i] = v;\n+                ra += v;\n@@ -3991,1 +4055,1 @@\n-        long res = 1;\n+        long res = MUL_IDENTITY;\n@@ -4000,1 +4064,1 @@\n-        long res = 1;\n+        long res = MUL_IDENTITY;\n@@ -4012,8 +4076,1 @@\n-        long ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL);\n-            }\n-        }\n+        long ra = 0;\n@@ -4022,1 +4079,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -4025,1 +4082,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL);\n+                long v = av.reduceLanes(VectorOperators.MUL);\n+                r[i] = v;\n+                ra *= v;\n@@ -4033,0 +4092,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void MULReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = MUL_IDENTITY;\n+\n+        Assert.assertEquals((long) (id * id), id,\n+                            \"MUL(MUL_IDENTITY, MUL_IDENTITY) != MUL_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) (id * x), x);\n+                Assert.assertEquals((long) (x * id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) (id * x), x,\n+                                \"MUL(MUL_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) (x * id), x,\n+                                \"MUL(\" + x + \", MUL_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4034,1 +4116,1 @@\n-        long res = 1;\n+        long res = MUL_IDENTITY;\n@@ -4044,1 +4126,1 @@\n-        long res = 1;\n+        long res = MUL_IDENTITY;\n@@ -4058,8 +4140,1 @@\n-        long ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL, vmask);\n-            }\n-        }\n+        long ra = 0;\n@@ -4068,1 +4143,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -4071,1 +4146,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL, vmask);\n+                long v = av.reduceLanes(VectorOperators.MUL, vmask);\n+                r[i] = v;\n+                ra *= v;\n@@ -4080,1 +4157,1 @@\n-        long res = Long.MAX_VALUE;\n+        long res = MIN_IDENTITY;\n@@ -4089,1 +4166,1 @@\n-        long res = Long.MAX_VALUE;\n+        long res = MIN_IDENTITY;\n@@ -4101,8 +4178,1 @@\n-        long ra = Long.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN);\n-            }\n-        }\n+        long ra = 0;\n@@ -4111,1 +4181,1 @@\n-            ra = Long.MAX_VALUE;\n+            ra = MIN_IDENTITY;\n@@ -4114,1 +4184,3 @@\n-                ra = (long) Math.min(ra, av.reduceLanes(VectorOperators.MIN));\n+                long v = av.reduceLanes(VectorOperators.MIN);\n+                r[i] = v;\n+                ra = (long) Math.min(ra, v);\n@@ -4122,0 +4194,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void MINReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = MIN_IDENTITY;\n+\n+        Assert.assertEquals((long) Math.min(id, id), id,\n+                            \"MIN(MIN_IDENTITY, MIN_IDENTITY) != MIN_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) Math.min(id, x), x);\n+                Assert.assertEquals((long) Math.min(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) Math.min(id, x), x,\n+                                \"MIN(MIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) Math.min(x, id), x,\n+                                \"MIN(\" + x + \", MIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4123,1 +4218,1 @@\n-        long res = Long.MAX_VALUE;\n+        long res = MIN_IDENTITY;\n@@ -4133,1 +4228,1 @@\n-        long res = Long.MAX_VALUE;\n+        long res = MIN_IDENTITY;\n@@ -4147,8 +4242,1 @@\n-        long ra = Long.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN, vmask);\n-            }\n-        }\n+        long ra = 0;\n@@ -4157,1 +4245,1 @@\n-            ra = Long.MAX_VALUE;\n+            ra = MIN_IDENTITY;\n@@ -4160,1 +4248,3 @@\n-                ra = (long) Math.min(ra, av.reduceLanes(VectorOperators.MIN, vmask));\n+                long v = av.reduceLanes(VectorOperators.MIN, vmask);\n+                r[i] = v;\n+                ra = (long) Math.min(ra, v);\n@@ -4169,1 +4259,1 @@\n-        long res = Long.MIN_VALUE;\n+        long res = MAX_IDENTITY;\n@@ -4178,1 +4268,1 @@\n-        long res = Long.MIN_VALUE;\n+        long res = MAX_IDENTITY;\n@@ -4190,8 +4280,1 @@\n-        long ra = Long.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX);\n-            }\n-        }\n+        long ra = 0;\n@@ -4200,1 +4283,1 @@\n-            ra = Long.MIN_VALUE;\n+            ra = MAX_IDENTITY;\n@@ -4203,1 +4286,3 @@\n-                ra = (long) Math.max(ra, av.reduceLanes(VectorOperators.MAX));\n+                long v = av.reduceLanes(VectorOperators.MAX);\n+                r[i] = v;\n+                ra = (long) Math.max(ra, v);\n@@ -4211,0 +4296,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void MAXReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = MAX_IDENTITY;\n+\n+        Assert.assertEquals((long) Math.max(id, id), id,\n+                            \"MAX(MAX_IDENTITY, MAX_IDENTITY) != MAX_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) Math.max(id, x), x);\n+                Assert.assertEquals((long) Math.max(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) Math.max(id, x), x,\n+                                \"MAX(MAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) Math.max(x, id), x,\n+                                \"MAX(\" + x + \", MAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4212,1 +4320,1 @@\n-        long res = Long.MIN_VALUE;\n+        long res = MAX_IDENTITY;\n@@ -4222,1 +4330,1 @@\n-        long res = Long.MIN_VALUE;\n+        long res = MAX_IDENTITY;\n@@ -4236,8 +4344,1 @@\n-        long ra = Long.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX, vmask);\n-            }\n-        }\n+        long ra = 0;\n@@ -4246,1 +4347,1 @@\n-            ra = Long.MIN_VALUE;\n+            ra = MAX_IDENTITY;\n@@ -4249,1 +4350,3 @@\n-                ra = (long) Math.max(ra, av.reduceLanes(VectorOperators.MAX, vmask));\n+                long v = av.reduceLanes(VectorOperators.MAX, vmask);\n+                r[i] = v;\n+                ra = (long) Math.max(ra, v);\n@@ -4258,1 +4361,1 @@\n-        long res = Long.MAX_VALUE;\n+        long res = UMIN_IDENTITY;\n@@ -4267,1 +4370,1 @@\n-        long res = Long.MAX_VALUE;\n+        long res = UMIN_IDENTITY;\n@@ -4279,8 +4382,1 @@\n-        long ra = Long.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMIN);\n-            }\n-        }\n+        long ra = 0;\n@@ -4289,1 +4385,1 @@\n-            ra = Long.MAX_VALUE;\n+            ra = UMIN_IDENTITY;\n@@ -4292,1 +4388,3 @@\n-                ra = (long) VectorMath.minUnsigned(ra, av.reduceLanes(VectorOperators.UMIN));\n+                long v = av.reduceLanes(VectorOperators.UMIN);\n+                r[i] = v;\n+                ra = (long) VectorMath.minUnsigned(ra, v);\n@@ -4300,0 +4398,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void UMINReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = UMIN_IDENTITY;\n+\n+        Assert.assertEquals((long) VectorMath.minUnsigned(id, id), id,\n+                            \"UMIN(UMIN_IDENTITY, UMIN_IDENTITY) != UMIN_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) VectorMath.minUnsigned(id, x), x);\n+                Assert.assertEquals((long) VectorMath.minUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) VectorMath.minUnsigned(id, x), x,\n+                                \"UMIN(UMIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) VectorMath.minUnsigned(x, id), x,\n+                                \"UMIN(\" + x + \", UMIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4301,1 +4422,1 @@\n-        long res = Long.MAX_VALUE;\n+        long res = UMIN_IDENTITY;\n@@ -4311,1 +4432,1 @@\n-        long res = Long.MAX_VALUE;\n+        long res = UMIN_IDENTITY;\n@@ -4325,8 +4446,1 @@\n-        long ra = Long.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMIN, vmask);\n-            }\n-        }\n+        long ra = 0;\n@@ -4335,1 +4449,1 @@\n-            ra = Long.MAX_VALUE;\n+            ra = UMIN_IDENTITY;\n@@ -4338,1 +4452,3 @@\n-                ra = (long) VectorMath.minUnsigned(ra, av.reduceLanes(VectorOperators.UMIN, vmask));\n+                long v = av.reduceLanes(VectorOperators.UMIN, vmask);\n+                r[i] = v;\n+                ra = (long) VectorMath.minUnsigned(ra, v);\n@@ -4347,1 +4463,1 @@\n-        long res = Long.MIN_VALUE;\n+        long res = UMAX_IDENTITY;\n@@ -4356,1 +4472,1 @@\n-        long res = Long.MIN_VALUE;\n+        long res = UMAX_IDENTITY;\n@@ -4368,8 +4484,1 @@\n-        long ra = Long.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMAX);\n-            }\n-        }\n+        long ra = 0;\n@@ -4378,1 +4487,1 @@\n-            ra = Long.MIN_VALUE;\n+            ra = UMAX_IDENTITY;\n@@ -4381,1 +4490,3 @@\n-                ra = (long) VectorMath.maxUnsigned(ra, av.reduceLanes(VectorOperators.UMAX));\n+                long v = av.reduceLanes(VectorOperators.UMAX);\n+                r[i] = v;\n+                ra = (long) VectorMath.maxUnsigned(ra, v);\n@@ -4389,0 +4500,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void UMAXReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = UMAX_IDENTITY;\n+\n+        Assert.assertEquals((long) VectorMath.maxUnsigned(id, id), id,\n+                            \"UMAX(UMAX_IDENTITY, UMAX_IDENTITY) != UMAX_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) VectorMath.maxUnsigned(id, x), x);\n+                Assert.assertEquals((long) VectorMath.maxUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) VectorMath.maxUnsigned(id, x), x,\n+                                \"UMAX(UMAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) VectorMath.maxUnsigned(x, id), x,\n+                                \"UMAX(\" + x + \", UMAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4390,1 +4524,1 @@\n-        long res = Long.MIN_VALUE;\n+        long res = UMAX_IDENTITY;\n@@ -4400,1 +4534,1 @@\n-        long res = Long.MIN_VALUE;\n+        long res = UMAX_IDENTITY;\n@@ -4414,8 +4548,1 @@\n-        long ra = Long.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMAX, vmask);\n-            }\n-        }\n+        long ra = 0;\n@@ -4424,1 +4551,1 @@\n-            ra = Long.MIN_VALUE;\n+            ra = UMAX_IDENTITY;\n@@ -4427,1 +4554,3 @@\n-                ra = (long) VectorMath.maxUnsigned(ra, av.reduceLanes(VectorOperators.UMAX, vmask));\n+                long v = av.reduceLanes(VectorOperators.UMAX, vmask);\n+                r[i] = v;\n+                ra = (long) VectorMath.maxUnsigned(ra, v);\n@@ -4436,1 +4565,1 @@\n-        long res = (long) 0;\n+        long res = FIRST_NONZERO_IDENTITY;\n@@ -4445,1 +4574,1 @@\n-        long res = (long) 0;\n+        long res = FIRST_NONZERO_IDENTITY;\n@@ -4457,8 +4586,1 @@\n-        long ra = (long) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n-            }\n-        }\n+        long ra = 0;\n@@ -4467,1 +4589,1 @@\n-            ra = (long) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -4470,1 +4592,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO));\n+                long v = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -4478,0 +4602,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void FIRST_NONZEROReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = FIRST_NONZERO_IDENTITY;\n+\n+        Assert.assertEquals(firstNonZero(id, id), id,\n+                            \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, FIRST_NONZERO_IDENTITY) != FIRST_NONZERO_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals(firstNonZero(id, x), x);\n+                Assert.assertEquals(firstNonZero(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals(firstNonZero(id, x), x,\n+                                \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals(firstNonZero(x, id), x,\n+                                \"FIRST_NONZERO(\" + x + \", FIRST_NONZERO_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4479,1 +4626,1 @@\n-        long res = (long) 0;\n+        long res = FIRST_NONZERO_IDENTITY;\n@@ -4489,1 +4636,1 @@\n-        long res = (long) 0;\n+        long res = FIRST_NONZERO_IDENTITY;\n@@ -4503,8 +4650,1 @@\n-        long ra = (long) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n-            }\n-        }\n+        long ra = 0;\n@@ -4513,1 +4653,1 @@\n-            ra = (long) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -4516,1 +4656,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask));\n+                long v = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -4573,1 +4715,1 @@\n-        long res = 0;\n+        long res = SUADD_IDENTITY;\n@@ -4582,1 +4724,1 @@\n-        long res = 0;\n+        long res = SUADD_IDENTITY;\n@@ -4597,0 +4739,1 @@\n+            ra = SUADD_IDENTITY;\n@@ -4599,9 +4742,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.SUADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                ra = (long) VectorMath.addSaturatingUnsigned(ra, av.reduceLanes(VectorOperators.SUADD));\n+                long v = av.reduceLanes(VectorOperators.SUADD);\n+                r[i] = v;\n+                ra = (long) VectorMath.addSaturatingUnsigned(ra, v);\n@@ -4615,0 +4752,23 @@\n+    @Test(dataProvider = \"longSaturatingUnaryOpProvider\")\n+    static void SUADDReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = SUADD_IDENTITY;\n+\n+        Assert.assertEquals((long) VectorMath.addSaturatingUnsigned(id, id), id,\n+                            \"SUADD(SUADD_IDENTITY, SUADD_IDENTITY) != SUADD_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) VectorMath.addSaturatingUnsigned(id, x), x);\n+                Assert.assertEquals((long) VectorMath.addSaturatingUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) VectorMath.addSaturatingUnsigned(id, x), x,\n+                                \"SUADD(SUADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) VectorMath.addSaturatingUnsigned(x, id), x,\n+                                \"SUADD(\" + x + \", SUADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4616,1 +4776,1 @@\n-        long res = 0;\n+        long res = SUADD_IDENTITY;\n@@ -4626,1 +4786,1 @@\n-        long res = 0;\n+        long res = SUADD_IDENTITY;\n@@ -4642,0 +4802,1 @@\n+            ra = SUADD_IDENTITY;\n@@ -4644,9 +4805,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.SUADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                ra = (long) VectorMath.addSaturatingUnsigned(ra, av.reduceLanes(VectorOperators.SUADD, vmask));\n+                long v = av.reduceLanes(VectorOperators.SUADD, vmask);\n+                r[i] = v;\n+                ra = (long) VectorMath.addSaturatingUnsigned(ra, v);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/Long128VectorTests.java","additions":413,"deletions":258,"binary":false,"changes":671,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -66,1 +66,0 @@\n-\n@@ -69,0 +68,13 @@\n+    \/\/ Identity values for reduction operations\n+    private static final long ADD_IDENTITY = (long)0;\n+    private static final long AND_IDENTITY = (long)-1;\n+    private static final long FIRST_NONZERO_IDENTITY = (long)0;\n+    private static final long MAX_IDENTITY = Long.MIN_VALUE;\n+    private static final long MIN_IDENTITY = Long.MAX_VALUE;\n+    private static final long MUL_IDENTITY = (long)1;\n+    private static final long OR_IDENTITY = (long)0;\n+    private static final long SUADD_IDENTITY = (long)0;\n+    private static final long UMAX_IDENTITY = (long)0;   \/\/ Minimum unsigned value\n+    private static final long UMIN_IDENTITY = (long)-1;  \/\/ Maximum unsigned value\n+    private static final long XOR_IDENTITY = (long)0;\n+\n@@ -3635,1 +3647,1 @@\n-        long res = -1;\n+        long res = AND_IDENTITY;\n@@ -3644,1 +3656,1 @@\n-        long res = -1;\n+        long res = AND_IDENTITY;\n@@ -3656,8 +3668,1 @@\n-        long ra = -1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.AND);\n-            }\n-        }\n+        long ra = 0;\n@@ -3666,1 +3671,1 @@\n-            ra = -1;\n+            ra = AND_IDENTITY;\n@@ -3669,1 +3674,3 @@\n-                ra &= av.reduceLanes(VectorOperators.AND);\n+                long v = av.reduceLanes(VectorOperators.AND);\n+                r[i] = v;\n+                ra &= v;\n@@ -3677,0 +3684,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void ANDReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = AND_IDENTITY;\n+\n+        Assert.assertEquals((long) (id & id), id,\n+                            \"AND(AND_IDENTITY, AND_IDENTITY) != AND_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) (id & x), x);\n+                Assert.assertEquals((long) (x & id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) (id & x), x,\n+                                \"AND(AND_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) (x & id), x,\n+                                \"AND(\" + x + \", AND_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3678,1 +3708,1 @@\n-        long res = -1;\n+        long res = AND_IDENTITY;\n@@ -3688,1 +3718,1 @@\n-        long res = -1;\n+        long res = AND_IDENTITY;\n@@ -3702,8 +3732,1 @@\n-        long ra = -1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.AND, vmask);\n-            }\n-        }\n+        long ra = 0;\n@@ -3712,1 +3735,1 @@\n-            ra = -1;\n+            ra = AND_IDENTITY;\n@@ -3715,1 +3738,3 @@\n-                ra &= av.reduceLanes(VectorOperators.AND, vmask);\n+                long v = av.reduceLanes(VectorOperators.AND, vmask);\n+                r[i] = v;\n+                ra &= v;\n@@ -3724,1 +3749,1 @@\n-        long res = 0;\n+        long res = OR_IDENTITY;\n@@ -3733,1 +3758,1 @@\n-        long res = 0;\n+        long res = OR_IDENTITY;\n@@ -3748,0 +3773,1 @@\n+            ra = OR_IDENTITY;\n@@ -3750,9 +3776,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.OR);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                ra |= av.reduceLanes(VectorOperators.OR);\n+                long v = av.reduceLanes(VectorOperators.OR);\n+                r[i] = v;\n+                ra |= v;\n@@ -3766,0 +3786,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void ORReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = OR_IDENTITY;\n+\n+        Assert.assertEquals((long) (id | id), id,\n+                            \"OR(OR_IDENTITY, OR_IDENTITY) != OR_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) (id | x), x);\n+                Assert.assertEquals((long) (x | id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) (id | x), x,\n+                                \"OR(OR_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) (x | id), x,\n+                                \"OR(\" + x + \", OR_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3767,1 +3810,1 @@\n-        long res = 0;\n+        long res = OR_IDENTITY;\n@@ -3777,1 +3820,1 @@\n-        long res = 0;\n+        long res = OR_IDENTITY;\n@@ -3794,0 +3837,1 @@\n+            ra = OR_IDENTITY;\n@@ -3796,9 +3840,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.OR, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                ra |= av.reduceLanes(VectorOperators.OR, vmask);\n+                long v = av.reduceLanes(VectorOperators.OR, vmask);\n+                r[i] = v;\n+                ra |= v;\n@@ -3813,1 +3851,1 @@\n-        long res = 0;\n+        long res = XOR_IDENTITY;\n@@ -3822,1 +3860,1 @@\n-        long res = 0;\n+        long res = XOR_IDENTITY;\n@@ -3837,0 +3875,1 @@\n+            ra = XOR_IDENTITY;\n@@ -3839,9 +3878,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.XOR);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                ra ^= av.reduceLanes(VectorOperators.XOR);\n+                long v = av.reduceLanes(VectorOperators.XOR);\n+                r[i] = v;\n+                ra ^= v;\n@@ -3855,0 +3888,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void XORReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = XOR_IDENTITY;\n+\n+        Assert.assertEquals((long) (id ^ id), id,\n+                            \"XOR(XOR_IDENTITY, XOR_IDENTITY) != XOR_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) (id ^ x), x);\n+                Assert.assertEquals((long) (x ^ id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) (id ^ x), x,\n+                                \"XOR(XOR_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) (x ^ id), x,\n+                                \"XOR(\" + x + \", XOR_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3856,1 +3912,1 @@\n-        long res = 0;\n+        long res = XOR_IDENTITY;\n@@ -3866,1 +3922,1 @@\n-        long res = 0;\n+        long res = XOR_IDENTITY;\n@@ -3883,0 +3939,1 @@\n+            ra = XOR_IDENTITY;\n@@ -3885,9 +3942,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.XOR, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                ra ^= av.reduceLanes(VectorOperators.XOR, vmask);\n+                long v = av.reduceLanes(VectorOperators.XOR, vmask);\n+                r[i] = v;\n+                ra ^= v;\n@@ -3902,1 +3953,1 @@\n-        long res = 0;\n+        long res = ADD_IDENTITY;\n@@ -3911,1 +3962,1 @@\n-        long res = 0;\n+        long res = ADD_IDENTITY;\n@@ -3926,0 +3977,1 @@\n+            ra = ADD_IDENTITY;\n@@ -3928,9 +3980,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD);\n+                long v = av.reduceLanes(VectorOperators.ADD);\n+                r[i] = v;\n+                ra += v;\n@@ -3944,0 +3990,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void ADDReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = ADD_IDENTITY;\n+\n+        Assert.assertEquals((long) (id + id), id,\n+                            \"ADD(ADD_IDENTITY, ADD_IDENTITY) != ADD_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) (id + x), x);\n+                Assert.assertEquals((long) (x + id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) (id + x), x,\n+                                \"ADD(ADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) (x + id), x,\n+                                \"ADD(\" + x + \", ADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3945,1 +4014,1 @@\n-        long res = 0;\n+        long res = ADD_IDENTITY;\n@@ -3955,1 +4024,1 @@\n-        long res = 0;\n+        long res = ADD_IDENTITY;\n@@ -3972,0 +4041,1 @@\n+            ra = ADD_IDENTITY;\n@@ -3974,9 +4044,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD, vmask);\n+                long v = av.reduceLanes(VectorOperators.ADD, vmask);\n+                r[i] = v;\n+                ra += v;\n@@ -3991,1 +4055,1 @@\n-        long res = 1;\n+        long res = MUL_IDENTITY;\n@@ -4000,1 +4064,1 @@\n-        long res = 1;\n+        long res = MUL_IDENTITY;\n@@ -4012,8 +4076,1 @@\n-        long ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL);\n-            }\n-        }\n+        long ra = 0;\n@@ -4022,1 +4079,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -4025,1 +4082,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL);\n+                long v = av.reduceLanes(VectorOperators.MUL);\n+                r[i] = v;\n+                ra *= v;\n@@ -4033,0 +4092,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void MULReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = MUL_IDENTITY;\n+\n+        Assert.assertEquals((long) (id * id), id,\n+                            \"MUL(MUL_IDENTITY, MUL_IDENTITY) != MUL_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) (id * x), x);\n+                Assert.assertEquals((long) (x * id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) (id * x), x,\n+                                \"MUL(MUL_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) (x * id), x,\n+                                \"MUL(\" + x + \", MUL_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4034,1 +4116,1 @@\n-        long res = 1;\n+        long res = MUL_IDENTITY;\n@@ -4044,1 +4126,1 @@\n-        long res = 1;\n+        long res = MUL_IDENTITY;\n@@ -4058,8 +4140,1 @@\n-        long ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL, vmask);\n-            }\n-        }\n+        long ra = 0;\n@@ -4068,1 +4143,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -4071,1 +4146,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL, vmask);\n+                long v = av.reduceLanes(VectorOperators.MUL, vmask);\n+                r[i] = v;\n+                ra *= v;\n@@ -4080,1 +4157,1 @@\n-        long res = Long.MAX_VALUE;\n+        long res = MIN_IDENTITY;\n@@ -4089,1 +4166,1 @@\n-        long res = Long.MAX_VALUE;\n+        long res = MIN_IDENTITY;\n@@ -4101,8 +4178,1 @@\n-        long ra = Long.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN);\n-            }\n-        }\n+        long ra = 0;\n@@ -4111,1 +4181,1 @@\n-            ra = Long.MAX_VALUE;\n+            ra = MIN_IDENTITY;\n@@ -4114,1 +4184,3 @@\n-                ra = (long) Math.min(ra, av.reduceLanes(VectorOperators.MIN));\n+                long v = av.reduceLanes(VectorOperators.MIN);\n+                r[i] = v;\n+                ra = (long) Math.min(ra, v);\n@@ -4122,0 +4194,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void MINReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = MIN_IDENTITY;\n+\n+        Assert.assertEquals((long) Math.min(id, id), id,\n+                            \"MIN(MIN_IDENTITY, MIN_IDENTITY) != MIN_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) Math.min(id, x), x);\n+                Assert.assertEquals((long) Math.min(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) Math.min(id, x), x,\n+                                \"MIN(MIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) Math.min(x, id), x,\n+                                \"MIN(\" + x + \", MIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4123,1 +4218,1 @@\n-        long res = Long.MAX_VALUE;\n+        long res = MIN_IDENTITY;\n@@ -4133,1 +4228,1 @@\n-        long res = Long.MAX_VALUE;\n+        long res = MIN_IDENTITY;\n@@ -4147,8 +4242,1 @@\n-        long ra = Long.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN, vmask);\n-            }\n-        }\n+        long ra = 0;\n@@ -4157,1 +4245,1 @@\n-            ra = Long.MAX_VALUE;\n+            ra = MIN_IDENTITY;\n@@ -4160,1 +4248,3 @@\n-                ra = (long) Math.min(ra, av.reduceLanes(VectorOperators.MIN, vmask));\n+                long v = av.reduceLanes(VectorOperators.MIN, vmask);\n+                r[i] = v;\n+                ra = (long) Math.min(ra, v);\n@@ -4169,1 +4259,1 @@\n-        long res = Long.MIN_VALUE;\n+        long res = MAX_IDENTITY;\n@@ -4178,1 +4268,1 @@\n-        long res = Long.MIN_VALUE;\n+        long res = MAX_IDENTITY;\n@@ -4190,8 +4280,1 @@\n-        long ra = Long.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX);\n-            }\n-        }\n+        long ra = 0;\n@@ -4200,1 +4283,1 @@\n-            ra = Long.MIN_VALUE;\n+            ra = MAX_IDENTITY;\n@@ -4203,1 +4286,3 @@\n-                ra = (long) Math.max(ra, av.reduceLanes(VectorOperators.MAX));\n+                long v = av.reduceLanes(VectorOperators.MAX);\n+                r[i] = v;\n+                ra = (long) Math.max(ra, v);\n@@ -4211,0 +4296,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void MAXReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = MAX_IDENTITY;\n+\n+        Assert.assertEquals((long) Math.max(id, id), id,\n+                            \"MAX(MAX_IDENTITY, MAX_IDENTITY) != MAX_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) Math.max(id, x), x);\n+                Assert.assertEquals((long) Math.max(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) Math.max(id, x), x,\n+                                \"MAX(MAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) Math.max(x, id), x,\n+                                \"MAX(\" + x + \", MAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4212,1 +4320,1 @@\n-        long res = Long.MIN_VALUE;\n+        long res = MAX_IDENTITY;\n@@ -4222,1 +4330,1 @@\n-        long res = Long.MIN_VALUE;\n+        long res = MAX_IDENTITY;\n@@ -4236,8 +4344,1 @@\n-        long ra = Long.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX, vmask);\n-            }\n-        }\n+        long ra = 0;\n@@ -4246,1 +4347,1 @@\n-            ra = Long.MIN_VALUE;\n+            ra = MAX_IDENTITY;\n@@ -4249,1 +4350,3 @@\n-                ra = (long) Math.max(ra, av.reduceLanes(VectorOperators.MAX, vmask));\n+                long v = av.reduceLanes(VectorOperators.MAX, vmask);\n+                r[i] = v;\n+                ra = (long) Math.max(ra, v);\n@@ -4258,1 +4361,1 @@\n-        long res = Long.MAX_VALUE;\n+        long res = UMIN_IDENTITY;\n@@ -4267,1 +4370,1 @@\n-        long res = Long.MAX_VALUE;\n+        long res = UMIN_IDENTITY;\n@@ -4279,8 +4382,1 @@\n-        long ra = Long.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMIN);\n-            }\n-        }\n+        long ra = 0;\n@@ -4289,1 +4385,1 @@\n-            ra = Long.MAX_VALUE;\n+            ra = UMIN_IDENTITY;\n@@ -4292,1 +4388,3 @@\n-                ra = (long) VectorMath.minUnsigned(ra, av.reduceLanes(VectorOperators.UMIN));\n+                long v = av.reduceLanes(VectorOperators.UMIN);\n+                r[i] = v;\n+                ra = (long) VectorMath.minUnsigned(ra, v);\n@@ -4300,0 +4398,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void UMINReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = UMIN_IDENTITY;\n+\n+        Assert.assertEquals((long) VectorMath.minUnsigned(id, id), id,\n+                            \"UMIN(UMIN_IDENTITY, UMIN_IDENTITY) != UMIN_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) VectorMath.minUnsigned(id, x), x);\n+                Assert.assertEquals((long) VectorMath.minUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) VectorMath.minUnsigned(id, x), x,\n+                                \"UMIN(UMIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) VectorMath.minUnsigned(x, id), x,\n+                                \"UMIN(\" + x + \", UMIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4301,1 +4422,1 @@\n-        long res = Long.MAX_VALUE;\n+        long res = UMIN_IDENTITY;\n@@ -4311,1 +4432,1 @@\n-        long res = Long.MAX_VALUE;\n+        long res = UMIN_IDENTITY;\n@@ -4325,8 +4446,1 @@\n-        long ra = Long.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMIN, vmask);\n-            }\n-        }\n+        long ra = 0;\n@@ -4335,1 +4449,1 @@\n-            ra = Long.MAX_VALUE;\n+            ra = UMIN_IDENTITY;\n@@ -4338,1 +4452,3 @@\n-                ra = (long) VectorMath.minUnsigned(ra, av.reduceLanes(VectorOperators.UMIN, vmask));\n+                long v = av.reduceLanes(VectorOperators.UMIN, vmask);\n+                r[i] = v;\n+                ra = (long) VectorMath.minUnsigned(ra, v);\n@@ -4347,1 +4463,1 @@\n-        long res = Long.MIN_VALUE;\n+        long res = UMAX_IDENTITY;\n@@ -4356,1 +4472,1 @@\n-        long res = Long.MIN_VALUE;\n+        long res = UMAX_IDENTITY;\n@@ -4368,8 +4484,1 @@\n-        long ra = Long.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMAX);\n-            }\n-        }\n+        long ra = 0;\n@@ -4378,1 +4487,1 @@\n-            ra = Long.MIN_VALUE;\n+            ra = UMAX_IDENTITY;\n@@ -4381,1 +4490,3 @@\n-                ra = (long) VectorMath.maxUnsigned(ra, av.reduceLanes(VectorOperators.UMAX));\n+                long v = av.reduceLanes(VectorOperators.UMAX);\n+                r[i] = v;\n+                ra = (long) VectorMath.maxUnsigned(ra, v);\n@@ -4389,0 +4500,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void UMAXReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = UMAX_IDENTITY;\n+\n+        Assert.assertEquals((long) VectorMath.maxUnsigned(id, id), id,\n+                            \"UMAX(UMAX_IDENTITY, UMAX_IDENTITY) != UMAX_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) VectorMath.maxUnsigned(id, x), x);\n+                Assert.assertEquals((long) VectorMath.maxUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) VectorMath.maxUnsigned(id, x), x,\n+                                \"UMAX(UMAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) VectorMath.maxUnsigned(x, id), x,\n+                                \"UMAX(\" + x + \", UMAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4390,1 +4524,1 @@\n-        long res = Long.MIN_VALUE;\n+        long res = UMAX_IDENTITY;\n@@ -4400,1 +4534,1 @@\n-        long res = Long.MIN_VALUE;\n+        long res = UMAX_IDENTITY;\n@@ -4414,8 +4548,1 @@\n-        long ra = Long.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMAX, vmask);\n-            }\n-        }\n+        long ra = 0;\n@@ -4424,1 +4551,1 @@\n-            ra = Long.MIN_VALUE;\n+            ra = UMAX_IDENTITY;\n@@ -4427,1 +4554,3 @@\n-                ra = (long) VectorMath.maxUnsigned(ra, av.reduceLanes(VectorOperators.UMAX, vmask));\n+                long v = av.reduceLanes(VectorOperators.UMAX, vmask);\n+                r[i] = v;\n+                ra = (long) VectorMath.maxUnsigned(ra, v);\n@@ -4436,1 +4565,1 @@\n-        long res = (long) 0;\n+        long res = FIRST_NONZERO_IDENTITY;\n@@ -4445,1 +4574,1 @@\n-        long res = (long) 0;\n+        long res = FIRST_NONZERO_IDENTITY;\n@@ -4457,8 +4586,1 @@\n-        long ra = (long) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n-            }\n-        }\n+        long ra = 0;\n@@ -4467,1 +4589,1 @@\n-            ra = (long) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -4470,1 +4592,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO));\n+                long v = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -4478,0 +4602,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void FIRST_NONZEROReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = FIRST_NONZERO_IDENTITY;\n+\n+        Assert.assertEquals(firstNonZero(id, id), id,\n+                            \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, FIRST_NONZERO_IDENTITY) != FIRST_NONZERO_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals(firstNonZero(id, x), x);\n+                Assert.assertEquals(firstNonZero(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals(firstNonZero(id, x), x,\n+                                \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals(firstNonZero(x, id), x,\n+                                \"FIRST_NONZERO(\" + x + \", FIRST_NONZERO_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4479,1 +4626,1 @@\n-        long res = (long) 0;\n+        long res = FIRST_NONZERO_IDENTITY;\n@@ -4489,1 +4636,1 @@\n-        long res = (long) 0;\n+        long res = FIRST_NONZERO_IDENTITY;\n@@ -4503,8 +4650,1 @@\n-        long ra = (long) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n-            }\n-        }\n+        long ra = 0;\n@@ -4513,1 +4653,1 @@\n-            ra = (long) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -4516,1 +4656,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask));\n+                long v = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -4573,1 +4715,1 @@\n-        long res = 0;\n+        long res = SUADD_IDENTITY;\n@@ -4582,1 +4724,1 @@\n-        long res = 0;\n+        long res = SUADD_IDENTITY;\n@@ -4597,0 +4739,1 @@\n+            ra = SUADD_IDENTITY;\n@@ -4599,9 +4742,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.SUADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                ra = (long) VectorMath.addSaturatingUnsigned(ra, av.reduceLanes(VectorOperators.SUADD));\n+                long v = av.reduceLanes(VectorOperators.SUADD);\n+                r[i] = v;\n+                ra = (long) VectorMath.addSaturatingUnsigned(ra, v);\n@@ -4615,0 +4752,23 @@\n+    @Test(dataProvider = \"longSaturatingUnaryOpProvider\")\n+    static void SUADDReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = SUADD_IDENTITY;\n+\n+        Assert.assertEquals((long) VectorMath.addSaturatingUnsigned(id, id), id,\n+                            \"SUADD(SUADD_IDENTITY, SUADD_IDENTITY) != SUADD_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) VectorMath.addSaturatingUnsigned(id, x), x);\n+                Assert.assertEquals((long) VectorMath.addSaturatingUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) VectorMath.addSaturatingUnsigned(id, x), x,\n+                                \"SUADD(SUADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) VectorMath.addSaturatingUnsigned(x, id), x,\n+                                \"SUADD(\" + x + \", SUADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4616,1 +4776,1 @@\n-        long res = 0;\n+        long res = SUADD_IDENTITY;\n@@ -4626,1 +4786,1 @@\n-        long res = 0;\n+        long res = SUADD_IDENTITY;\n@@ -4642,0 +4802,1 @@\n+            ra = SUADD_IDENTITY;\n@@ -4644,9 +4805,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.SUADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                ra = (long) VectorMath.addSaturatingUnsigned(ra, av.reduceLanes(VectorOperators.SUADD, vmask));\n+                long v = av.reduceLanes(VectorOperators.SUADD, vmask);\n+                r[i] = v;\n+                ra = (long) VectorMath.addSaturatingUnsigned(ra, v);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/Long256VectorTests.java","additions":413,"deletions":258,"binary":false,"changes":671,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -66,1 +66,0 @@\n-\n@@ -69,0 +68,13 @@\n+    \/\/ Identity values for reduction operations\n+    private static final long ADD_IDENTITY = (long)0;\n+    private static final long AND_IDENTITY = (long)-1;\n+    private static final long FIRST_NONZERO_IDENTITY = (long)0;\n+    private static final long MAX_IDENTITY = Long.MIN_VALUE;\n+    private static final long MIN_IDENTITY = Long.MAX_VALUE;\n+    private static final long MUL_IDENTITY = (long)1;\n+    private static final long OR_IDENTITY = (long)0;\n+    private static final long SUADD_IDENTITY = (long)0;\n+    private static final long UMAX_IDENTITY = (long)0;   \/\/ Minimum unsigned value\n+    private static final long UMIN_IDENTITY = (long)-1;  \/\/ Maximum unsigned value\n+    private static final long XOR_IDENTITY = (long)0;\n+\n@@ -3635,1 +3647,1 @@\n-        long res = -1;\n+        long res = AND_IDENTITY;\n@@ -3644,1 +3656,1 @@\n-        long res = -1;\n+        long res = AND_IDENTITY;\n@@ -3656,8 +3668,1 @@\n-        long ra = -1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.AND);\n-            }\n-        }\n+        long ra = 0;\n@@ -3666,1 +3671,1 @@\n-            ra = -1;\n+            ra = AND_IDENTITY;\n@@ -3669,1 +3674,3 @@\n-                ra &= av.reduceLanes(VectorOperators.AND);\n+                long v = av.reduceLanes(VectorOperators.AND);\n+                r[i] = v;\n+                ra &= v;\n@@ -3677,0 +3684,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void ANDReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = AND_IDENTITY;\n+\n+        Assert.assertEquals((long) (id & id), id,\n+                            \"AND(AND_IDENTITY, AND_IDENTITY) != AND_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) (id & x), x);\n+                Assert.assertEquals((long) (x & id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) (id & x), x,\n+                                \"AND(AND_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) (x & id), x,\n+                                \"AND(\" + x + \", AND_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3678,1 +3708,1 @@\n-        long res = -1;\n+        long res = AND_IDENTITY;\n@@ -3688,1 +3718,1 @@\n-        long res = -1;\n+        long res = AND_IDENTITY;\n@@ -3702,8 +3732,1 @@\n-        long ra = -1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.AND, vmask);\n-            }\n-        }\n+        long ra = 0;\n@@ -3712,1 +3735,1 @@\n-            ra = -1;\n+            ra = AND_IDENTITY;\n@@ -3715,1 +3738,3 @@\n-                ra &= av.reduceLanes(VectorOperators.AND, vmask);\n+                long v = av.reduceLanes(VectorOperators.AND, vmask);\n+                r[i] = v;\n+                ra &= v;\n@@ -3724,1 +3749,1 @@\n-        long res = 0;\n+        long res = OR_IDENTITY;\n@@ -3733,1 +3758,1 @@\n-        long res = 0;\n+        long res = OR_IDENTITY;\n@@ -3748,0 +3773,1 @@\n+            ra = OR_IDENTITY;\n@@ -3750,9 +3776,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.OR);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                ra |= av.reduceLanes(VectorOperators.OR);\n+                long v = av.reduceLanes(VectorOperators.OR);\n+                r[i] = v;\n+                ra |= v;\n@@ -3766,0 +3786,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void ORReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = OR_IDENTITY;\n+\n+        Assert.assertEquals((long) (id | id), id,\n+                            \"OR(OR_IDENTITY, OR_IDENTITY) != OR_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) (id | x), x);\n+                Assert.assertEquals((long) (x | id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) (id | x), x,\n+                                \"OR(OR_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) (x | id), x,\n+                                \"OR(\" + x + \", OR_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3767,1 +3810,1 @@\n-        long res = 0;\n+        long res = OR_IDENTITY;\n@@ -3777,1 +3820,1 @@\n-        long res = 0;\n+        long res = OR_IDENTITY;\n@@ -3794,0 +3837,1 @@\n+            ra = OR_IDENTITY;\n@@ -3796,9 +3840,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.OR, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                ra |= av.reduceLanes(VectorOperators.OR, vmask);\n+                long v = av.reduceLanes(VectorOperators.OR, vmask);\n+                r[i] = v;\n+                ra |= v;\n@@ -3813,1 +3851,1 @@\n-        long res = 0;\n+        long res = XOR_IDENTITY;\n@@ -3822,1 +3860,1 @@\n-        long res = 0;\n+        long res = XOR_IDENTITY;\n@@ -3837,0 +3875,1 @@\n+            ra = XOR_IDENTITY;\n@@ -3839,9 +3878,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.XOR);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                ra ^= av.reduceLanes(VectorOperators.XOR);\n+                long v = av.reduceLanes(VectorOperators.XOR);\n+                r[i] = v;\n+                ra ^= v;\n@@ -3855,0 +3888,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void XORReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = XOR_IDENTITY;\n+\n+        Assert.assertEquals((long) (id ^ id), id,\n+                            \"XOR(XOR_IDENTITY, XOR_IDENTITY) != XOR_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) (id ^ x), x);\n+                Assert.assertEquals((long) (x ^ id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) (id ^ x), x,\n+                                \"XOR(XOR_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) (x ^ id), x,\n+                                \"XOR(\" + x + \", XOR_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3856,1 +3912,1 @@\n-        long res = 0;\n+        long res = XOR_IDENTITY;\n@@ -3866,1 +3922,1 @@\n-        long res = 0;\n+        long res = XOR_IDENTITY;\n@@ -3883,0 +3939,1 @@\n+            ra = XOR_IDENTITY;\n@@ -3885,9 +3942,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.XOR, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                ra ^= av.reduceLanes(VectorOperators.XOR, vmask);\n+                long v = av.reduceLanes(VectorOperators.XOR, vmask);\n+                r[i] = v;\n+                ra ^= v;\n@@ -3902,1 +3953,1 @@\n-        long res = 0;\n+        long res = ADD_IDENTITY;\n@@ -3911,1 +3962,1 @@\n-        long res = 0;\n+        long res = ADD_IDENTITY;\n@@ -3926,0 +3977,1 @@\n+            ra = ADD_IDENTITY;\n@@ -3928,9 +3980,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD);\n+                long v = av.reduceLanes(VectorOperators.ADD);\n+                r[i] = v;\n+                ra += v;\n@@ -3944,0 +3990,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void ADDReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = ADD_IDENTITY;\n+\n+        Assert.assertEquals((long) (id + id), id,\n+                            \"ADD(ADD_IDENTITY, ADD_IDENTITY) != ADD_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) (id + x), x);\n+                Assert.assertEquals((long) (x + id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) (id + x), x,\n+                                \"ADD(ADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) (x + id), x,\n+                                \"ADD(\" + x + \", ADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3945,1 +4014,1 @@\n-        long res = 0;\n+        long res = ADD_IDENTITY;\n@@ -3955,1 +4024,1 @@\n-        long res = 0;\n+        long res = ADD_IDENTITY;\n@@ -3972,0 +4041,1 @@\n+            ra = ADD_IDENTITY;\n@@ -3974,9 +4044,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD, vmask);\n+                long v = av.reduceLanes(VectorOperators.ADD, vmask);\n+                r[i] = v;\n+                ra += v;\n@@ -3991,1 +4055,1 @@\n-        long res = 1;\n+        long res = MUL_IDENTITY;\n@@ -4000,1 +4064,1 @@\n-        long res = 1;\n+        long res = MUL_IDENTITY;\n@@ -4012,8 +4076,1 @@\n-        long ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL);\n-            }\n-        }\n+        long ra = 0;\n@@ -4022,1 +4079,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -4025,1 +4082,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL);\n+                long v = av.reduceLanes(VectorOperators.MUL);\n+                r[i] = v;\n+                ra *= v;\n@@ -4033,0 +4092,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void MULReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = MUL_IDENTITY;\n+\n+        Assert.assertEquals((long) (id * id), id,\n+                            \"MUL(MUL_IDENTITY, MUL_IDENTITY) != MUL_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) (id * x), x);\n+                Assert.assertEquals((long) (x * id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) (id * x), x,\n+                                \"MUL(MUL_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) (x * id), x,\n+                                \"MUL(\" + x + \", MUL_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4034,1 +4116,1 @@\n-        long res = 1;\n+        long res = MUL_IDENTITY;\n@@ -4044,1 +4126,1 @@\n-        long res = 1;\n+        long res = MUL_IDENTITY;\n@@ -4058,8 +4140,1 @@\n-        long ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL, vmask);\n-            }\n-        }\n+        long ra = 0;\n@@ -4068,1 +4143,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -4071,1 +4146,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL, vmask);\n+                long v = av.reduceLanes(VectorOperators.MUL, vmask);\n+                r[i] = v;\n+                ra *= v;\n@@ -4080,1 +4157,1 @@\n-        long res = Long.MAX_VALUE;\n+        long res = MIN_IDENTITY;\n@@ -4089,1 +4166,1 @@\n-        long res = Long.MAX_VALUE;\n+        long res = MIN_IDENTITY;\n@@ -4101,8 +4178,1 @@\n-        long ra = Long.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN);\n-            }\n-        }\n+        long ra = 0;\n@@ -4111,1 +4181,1 @@\n-            ra = Long.MAX_VALUE;\n+            ra = MIN_IDENTITY;\n@@ -4114,1 +4184,3 @@\n-                ra = (long) Math.min(ra, av.reduceLanes(VectorOperators.MIN));\n+                long v = av.reduceLanes(VectorOperators.MIN);\n+                r[i] = v;\n+                ra = (long) Math.min(ra, v);\n@@ -4122,0 +4194,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void MINReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = MIN_IDENTITY;\n+\n+        Assert.assertEquals((long) Math.min(id, id), id,\n+                            \"MIN(MIN_IDENTITY, MIN_IDENTITY) != MIN_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) Math.min(id, x), x);\n+                Assert.assertEquals((long) Math.min(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) Math.min(id, x), x,\n+                                \"MIN(MIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) Math.min(x, id), x,\n+                                \"MIN(\" + x + \", MIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4123,1 +4218,1 @@\n-        long res = Long.MAX_VALUE;\n+        long res = MIN_IDENTITY;\n@@ -4133,1 +4228,1 @@\n-        long res = Long.MAX_VALUE;\n+        long res = MIN_IDENTITY;\n@@ -4147,8 +4242,1 @@\n-        long ra = Long.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN, vmask);\n-            }\n-        }\n+        long ra = 0;\n@@ -4157,1 +4245,1 @@\n-            ra = Long.MAX_VALUE;\n+            ra = MIN_IDENTITY;\n@@ -4160,1 +4248,3 @@\n-                ra = (long) Math.min(ra, av.reduceLanes(VectorOperators.MIN, vmask));\n+                long v = av.reduceLanes(VectorOperators.MIN, vmask);\n+                r[i] = v;\n+                ra = (long) Math.min(ra, v);\n@@ -4169,1 +4259,1 @@\n-        long res = Long.MIN_VALUE;\n+        long res = MAX_IDENTITY;\n@@ -4178,1 +4268,1 @@\n-        long res = Long.MIN_VALUE;\n+        long res = MAX_IDENTITY;\n@@ -4190,8 +4280,1 @@\n-        long ra = Long.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX);\n-            }\n-        }\n+        long ra = 0;\n@@ -4200,1 +4283,1 @@\n-            ra = Long.MIN_VALUE;\n+            ra = MAX_IDENTITY;\n@@ -4203,1 +4286,3 @@\n-                ra = (long) Math.max(ra, av.reduceLanes(VectorOperators.MAX));\n+                long v = av.reduceLanes(VectorOperators.MAX);\n+                r[i] = v;\n+                ra = (long) Math.max(ra, v);\n@@ -4211,0 +4296,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void MAXReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = MAX_IDENTITY;\n+\n+        Assert.assertEquals((long) Math.max(id, id), id,\n+                            \"MAX(MAX_IDENTITY, MAX_IDENTITY) != MAX_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) Math.max(id, x), x);\n+                Assert.assertEquals((long) Math.max(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) Math.max(id, x), x,\n+                                \"MAX(MAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) Math.max(x, id), x,\n+                                \"MAX(\" + x + \", MAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4212,1 +4320,1 @@\n-        long res = Long.MIN_VALUE;\n+        long res = MAX_IDENTITY;\n@@ -4222,1 +4330,1 @@\n-        long res = Long.MIN_VALUE;\n+        long res = MAX_IDENTITY;\n@@ -4236,8 +4344,1 @@\n-        long ra = Long.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX, vmask);\n-            }\n-        }\n+        long ra = 0;\n@@ -4246,1 +4347,1 @@\n-            ra = Long.MIN_VALUE;\n+            ra = MAX_IDENTITY;\n@@ -4249,1 +4350,3 @@\n-                ra = (long) Math.max(ra, av.reduceLanes(VectorOperators.MAX, vmask));\n+                long v = av.reduceLanes(VectorOperators.MAX, vmask);\n+                r[i] = v;\n+                ra = (long) Math.max(ra, v);\n@@ -4258,1 +4361,1 @@\n-        long res = Long.MAX_VALUE;\n+        long res = UMIN_IDENTITY;\n@@ -4267,1 +4370,1 @@\n-        long res = Long.MAX_VALUE;\n+        long res = UMIN_IDENTITY;\n@@ -4279,8 +4382,1 @@\n-        long ra = Long.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMIN);\n-            }\n-        }\n+        long ra = 0;\n@@ -4289,1 +4385,1 @@\n-            ra = Long.MAX_VALUE;\n+            ra = UMIN_IDENTITY;\n@@ -4292,1 +4388,3 @@\n-                ra = (long) VectorMath.minUnsigned(ra, av.reduceLanes(VectorOperators.UMIN));\n+                long v = av.reduceLanes(VectorOperators.UMIN);\n+                r[i] = v;\n+                ra = (long) VectorMath.minUnsigned(ra, v);\n@@ -4300,0 +4398,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void UMINReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = UMIN_IDENTITY;\n+\n+        Assert.assertEquals((long) VectorMath.minUnsigned(id, id), id,\n+                            \"UMIN(UMIN_IDENTITY, UMIN_IDENTITY) != UMIN_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) VectorMath.minUnsigned(id, x), x);\n+                Assert.assertEquals((long) VectorMath.minUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) VectorMath.minUnsigned(id, x), x,\n+                                \"UMIN(UMIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) VectorMath.minUnsigned(x, id), x,\n+                                \"UMIN(\" + x + \", UMIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4301,1 +4422,1 @@\n-        long res = Long.MAX_VALUE;\n+        long res = UMIN_IDENTITY;\n@@ -4311,1 +4432,1 @@\n-        long res = Long.MAX_VALUE;\n+        long res = UMIN_IDENTITY;\n@@ -4325,8 +4446,1 @@\n-        long ra = Long.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMIN, vmask);\n-            }\n-        }\n+        long ra = 0;\n@@ -4335,1 +4449,1 @@\n-            ra = Long.MAX_VALUE;\n+            ra = UMIN_IDENTITY;\n@@ -4338,1 +4452,3 @@\n-                ra = (long) VectorMath.minUnsigned(ra, av.reduceLanes(VectorOperators.UMIN, vmask));\n+                long v = av.reduceLanes(VectorOperators.UMIN, vmask);\n+                r[i] = v;\n+                ra = (long) VectorMath.minUnsigned(ra, v);\n@@ -4347,1 +4463,1 @@\n-        long res = Long.MIN_VALUE;\n+        long res = UMAX_IDENTITY;\n@@ -4356,1 +4472,1 @@\n-        long res = Long.MIN_VALUE;\n+        long res = UMAX_IDENTITY;\n@@ -4368,8 +4484,1 @@\n-        long ra = Long.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMAX);\n-            }\n-        }\n+        long ra = 0;\n@@ -4378,1 +4487,1 @@\n-            ra = Long.MIN_VALUE;\n+            ra = UMAX_IDENTITY;\n@@ -4381,1 +4490,3 @@\n-                ra = (long) VectorMath.maxUnsigned(ra, av.reduceLanes(VectorOperators.UMAX));\n+                long v = av.reduceLanes(VectorOperators.UMAX);\n+                r[i] = v;\n+                ra = (long) VectorMath.maxUnsigned(ra, v);\n@@ -4389,0 +4500,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void UMAXReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = UMAX_IDENTITY;\n+\n+        Assert.assertEquals((long) VectorMath.maxUnsigned(id, id), id,\n+                            \"UMAX(UMAX_IDENTITY, UMAX_IDENTITY) != UMAX_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) VectorMath.maxUnsigned(id, x), x);\n+                Assert.assertEquals((long) VectorMath.maxUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) VectorMath.maxUnsigned(id, x), x,\n+                                \"UMAX(UMAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) VectorMath.maxUnsigned(x, id), x,\n+                                \"UMAX(\" + x + \", UMAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4390,1 +4524,1 @@\n-        long res = Long.MIN_VALUE;\n+        long res = UMAX_IDENTITY;\n@@ -4400,1 +4534,1 @@\n-        long res = Long.MIN_VALUE;\n+        long res = UMAX_IDENTITY;\n@@ -4414,8 +4548,1 @@\n-        long ra = Long.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMAX, vmask);\n-            }\n-        }\n+        long ra = 0;\n@@ -4424,1 +4551,1 @@\n-            ra = Long.MIN_VALUE;\n+            ra = UMAX_IDENTITY;\n@@ -4427,1 +4554,3 @@\n-                ra = (long) VectorMath.maxUnsigned(ra, av.reduceLanes(VectorOperators.UMAX, vmask));\n+                long v = av.reduceLanes(VectorOperators.UMAX, vmask);\n+                r[i] = v;\n+                ra = (long) VectorMath.maxUnsigned(ra, v);\n@@ -4436,1 +4565,1 @@\n-        long res = (long) 0;\n+        long res = FIRST_NONZERO_IDENTITY;\n@@ -4445,1 +4574,1 @@\n-        long res = (long) 0;\n+        long res = FIRST_NONZERO_IDENTITY;\n@@ -4457,8 +4586,1 @@\n-        long ra = (long) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n-            }\n-        }\n+        long ra = 0;\n@@ -4467,1 +4589,1 @@\n-            ra = (long) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -4470,1 +4592,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO));\n+                long v = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -4478,0 +4602,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void FIRST_NONZEROReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = FIRST_NONZERO_IDENTITY;\n+\n+        Assert.assertEquals(firstNonZero(id, id), id,\n+                            \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, FIRST_NONZERO_IDENTITY) != FIRST_NONZERO_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals(firstNonZero(id, x), x);\n+                Assert.assertEquals(firstNonZero(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals(firstNonZero(id, x), x,\n+                                \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals(firstNonZero(x, id), x,\n+                                \"FIRST_NONZERO(\" + x + \", FIRST_NONZERO_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4479,1 +4626,1 @@\n-        long res = (long) 0;\n+        long res = FIRST_NONZERO_IDENTITY;\n@@ -4489,1 +4636,1 @@\n-        long res = (long) 0;\n+        long res = FIRST_NONZERO_IDENTITY;\n@@ -4503,8 +4650,1 @@\n-        long ra = (long) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n-            }\n-        }\n+        long ra = 0;\n@@ -4513,1 +4653,1 @@\n-            ra = (long) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -4516,1 +4656,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask));\n+                long v = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -4573,1 +4715,1 @@\n-        long res = 0;\n+        long res = SUADD_IDENTITY;\n@@ -4582,1 +4724,1 @@\n-        long res = 0;\n+        long res = SUADD_IDENTITY;\n@@ -4597,0 +4739,1 @@\n+            ra = SUADD_IDENTITY;\n@@ -4599,9 +4742,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.SUADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                ra = (long) VectorMath.addSaturatingUnsigned(ra, av.reduceLanes(VectorOperators.SUADD));\n+                long v = av.reduceLanes(VectorOperators.SUADD);\n+                r[i] = v;\n+                ra = (long) VectorMath.addSaturatingUnsigned(ra, v);\n@@ -4615,0 +4752,23 @@\n+    @Test(dataProvider = \"longSaturatingUnaryOpProvider\")\n+    static void SUADDReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = SUADD_IDENTITY;\n+\n+        Assert.assertEquals((long) VectorMath.addSaturatingUnsigned(id, id), id,\n+                            \"SUADD(SUADD_IDENTITY, SUADD_IDENTITY) != SUADD_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) VectorMath.addSaturatingUnsigned(id, x), x);\n+                Assert.assertEquals((long) VectorMath.addSaturatingUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) VectorMath.addSaturatingUnsigned(id, x), x,\n+                                \"SUADD(SUADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) VectorMath.addSaturatingUnsigned(x, id), x,\n+                                \"SUADD(\" + x + \", SUADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4616,1 +4776,1 @@\n-        long res = 0;\n+        long res = SUADD_IDENTITY;\n@@ -4626,1 +4786,1 @@\n-        long res = 0;\n+        long res = SUADD_IDENTITY;\n@@ -4642,0 +4802,1 @@\n+            ra = SUADD_IDENTITY;\n@@ -4644,9 +4805,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.SUADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                ra = (long) VectorMath.addSaturatingUnsigned(ra, av.reduceLanes(VectorOperators.SUADD, vmask));\n+                long v = av.reduceLanes(VectorOperators.SUADD, vmask);\n+                r[i] = v;\n+                ra = (long) VectorMath.addSaturatingUnsigned(ra, v);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/Long512VectorTests.java","additions":413,"deletions":258,"binary":false,"changes":671,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -66,1 +66,0 @@\n-\n@@ -69,0 +68,13 @@\n+    \/\/ Identity values for reduction operations\n+    private static final long ADD_IDENTITY = (long)0;\n+    private static final long AND_IDENTITY = (long)-1;\n+    private static final long FIRST_NONZERO_IDENTITY = (long)0;\n+    private static final long MAX_IDENTITY = Long.MIN_VALUE;\n+    private static final long MIN_IDENTITY = Long.MAX_VALUE;\n+    private static final long MUL_IDENTITY = (long)1;\n+    private static final long OR_IDENTITY = (long)0;\n+    private static final long SUADD_IDENTITY = (long)0;\n+    private static final long UMAX_IDENTITY = (long)0;   \/\/ Minimum unsigned value\n+    private static final long UMIN_IDENTITY = (long)-1;  \/\/ Maximum unsigned value\n+    private static final long XOR_IDENTITY = (long)0;\n+\n@@ -3635,1 +3647,1 @@\n-        long res = -1;\n+        long res = AND_IDENTITY;\n@@ -3644,1 +3656,1 @@\n-        long res = -1;\n+        long res = AND_IDENTITY;\n@@ -3656,8 +3668,1 @@\n-        long ra = -1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.AND);\n-            }\n-        }\n+        long ra = 0;\n@@ -3666,1 +3671,1 @@\n-            ra = -1;\n+            ra = AND_IDENTITY;\n@@ -3669,1 +3674,3 @@\n-                ra &= av.reduceLanes(VectorOperators.AND);\n+                long v = av.reduceLanes(VectorOperators.AND);\n+                r[i] = v;\n+                ra &= v;\n@@ -3677,0 +3684,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void ANDReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = AND_IDENTITY;\n+\n+        Assert.assertEquals((long) (id & id), id,\n+                            \"AND(AND_IDENTITY, AND_IDENTITY) != AND_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) (id & x), x);\n+                Assert.assertEquals((long) (x & id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) (id & x), x,\n+                                \"AND(AND_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) (x & id), x,\n+                                \"AND(\" + x + \", AND_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3678,1 +3708,1 @@\n-        long res = -1;\n+        long res = AND_IDENTITY;\n@@ -3688,1 +3718,1 @@\n-        long res = -1;\n+        long res = AND_IDENTITY;\n@@ -3702,8 +3732,1 @@\n-        long ra = -1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.AND, vmask);\n-            }\n-        }\n+        long ra = 0;\n@@ -3712,1 +3735,1 @@\n-            ra = -1;\n+            ra = AND_IDENTITY;\n@@ -3715,1 +3738,3 @@\n-                ra &= av.reduceLanes(VectorOperators.AND, vmask);\n+                long v = av.reduceLanes(VectorOperators.AND, vmask);\n+                r[i] = v;\n+                ra &= v;\n@@ -3724,1 +3749,1 @@\n-        long res = 0;\n+        long res = OR_IDENTITY;\n@@ -3733,1 +3758,1 @@\n-        long res = 0;\n+        long res = OR_IDENTITY;\n@@ -3748,0 +3773,1 @@\n+            ra = OR_IDENTITY;\n@@ -3750,9 +3776,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.OR);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                ra |= av.reduceLanes(VectorOperators.OR);\n+                long v = av.reduceLanes(VectorOperators.OR);\n+                r[i] = v;\n+                ra |= v;\n@@ -3766,0 +3786,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void ORReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = OR_IDENTITY;\n+\n+        Assert.assertEquals((long) (id | id), id,\n+                            \"OR(OR_IDENTITY, OR_IDENTITY) != OR_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) (id | x), x);\n+                Assert.assertEquals((long) (x | id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) (id | x), x,\n+                                \"OR(OR_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) (x | id), x,\n+                                \"OR(\" + x + \", OR_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3767,1 +3810,1 @@\n-        long res = 0;\n+        long res = OR_IDENTITY;\n@@ -3777,1 +3820,1 @@\n-        long res = 0;\n+        long res = OR_IDENTITY;\n@@ -3794,0 +3837,1 @@\n+            ra = OR_IDENTITY;\n@@ -3796,9 +3840,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.OR, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                ra |= av.reduceLanes(VectorOperators.OR, vmask);\n+                long v = av.reduceLanes(VectorOperators.OR, vmask);\n+                r[i] = v;\n+                ra |= v;\n@@ -3813,1 +3851,1 @@\n-        long res = 0;\n+        long res = XOR_IDENTITY;\n@@ -3822,1 +3860,1 @@\n-        long res = 0;\n+        long res = XOR_IDENTITY;\n@@ -3837,0 +3875,1 @@\n+            ra = XOR_IDENTITY;\n@@ -3839,9 +3878,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.XOR);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                ra ^= av.reduceLanes(VectorOperators.XOR);\n+                long v = av.reduceLanes(VectorOperators.XOR);\n+                r[i] = v;\n+                ra ^= v;\n@@ -3855,0 +3888,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void XORReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = XOR_IDENTITY;\n+\n+        Assert.assertEquals((long) (id ^ id), id,\n+                            \"XOR(XOR_IDENTITY, XOR_IDENTITY) != XOR_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) (id ^ x), x);\n+                Assert.assertEquals((long) (x ^ id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) (id ^ x), x,\n+                                \"XOR(XOR_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) (x ^ id), x,\n+                                \"XOR(\" + x + \", XOR_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3856,1 +3912,1 @@\n-        long res = 0;\n+        long res = XOR_IDENTITY;\n@@ -3866,1 +3922,1 @@\n-        long res = 0;\n+        long res = XOR_IDENTITY;\n@@ -3883,0 +3939,1 @@\n+            ra = XOR_IDENTITY;\n@@ -3885,9 +3942,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.XOR, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                ra ^= av.reduceLanes(VectorOperators.XOR, vmask);\n+                long v = av.reduceLanes(VectorOperators.XOR, vmask);\n+                r[i] = v;\n+                ra ^= v;\n@@ -3902,1 +3953,1 @@\n-        long res = 0;\n+        long res = ADD_IDENTITY;\n@@ -3911,1 +3962,1 @@\n-        long res = 0;\n+        long res = ADD_IDENTITY;\n@@ -3926,0 +3977,1 @@\n+            ra = ADD_IDENTITY;\n@@ -3928,9 +3980,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD);\n+                long v = av.reduceLanes(VectorOperators.ADD);\n+                r[i] = v;\n+                ra += v;\n@@ -3944,0 +3990,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void ADDReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = ADD_IDENTITY;\n+\n+        Assert.assertEquals((long) (id + id), id,\n+                            \"ADD(ADD_IDENTITY, ADD_IDENTITY) != ADD_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) (id + x), x);\n+                Assert.assertEquals((long) (x + id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) (id + x), x,\n+                                \"ADD(ADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) (x + id), x,\n+                                \"ADD(\" + x + \", ADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3945,1 +4014,1 @@\n-        long res = 0;\n+        long res = ADD_IDENTITY;\n@@ -3955,1 +4024,1 @@\n-        long res = 0;\n+        long res = ADD_IDENTITY;\n@@ -3972,0 +4041,1 @@\n+            ra = ADD_IDENTITY;\n@@ -3974,9 +4044,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD, vmask);\n+                long v = av.reduceLanes(VectorOperators.ADD, vmask);\n+                r[i] = v;\n+                ra += v;\n@@ -3991,1 +4055,1 @@\n-        long res = 1;\n+        long res = MUL_IDENTITY;\n@@ -4000,1 +4064,1 @@\n-        long res = 1;\n+        long res = MUL_IDENTITY;\n@@ -4012,8 +4076,1 @@\n-        long ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL);\n-            }\n-        }\n+        long ra = 0;\n@@ -4022,1 +4079,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -4025,1 +4082,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL);\n+                long v = av.reduceLanes(VectorOperators.MUL);\n+                r[i] = v;\n+                ra *= v;\n@@ -4033,0 +4092,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void MULReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = MUL_IDENTITY;\n+\n+        Assert.assertEquals((long) (id * id), id,\n+                            \"MUL(MUL_IDENTITY, MUL_IDENTITY) != MUL_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) (id * x), x);\n+                Assert.assertEquals((long) (x * id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) (id * x), x,\n+                                \"MUL(MUL_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) (x * id), x,\n+                                \"MUL(\" + x + \", MUL_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4034,1 +4116,1 @@\n-        long res = 1;\n+        long res = MUL_IDENTITY;\n@@ -4044,1 +4126,1 @@\n-        long res = 1;\n+        long res = MUL_IDENTITY;\n@@ -4058,8 +4140,1 @@\n-        long ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL, vmask);\n-            }\n-        }\n+        long ra = 0;\n@@ -4068,1 +4143,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -4071,1 +4146,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL, vmask);\n+                long v = av.reduceLanes(VectorOperators.MUL, vmask);\n+                r[i] = v;\n+                ra *= v;\n@@ -4080,1 +4157,1 @@\n-        long res = Long.MAX_VALUE;\n+        long res = MIN_IDENTITY;\n@@ -4089,1 +4166,1 @@\n-        long res = Long.MAX_VALUE;\n+        long res = MIN_IDENTITY;\n@@ -4101,8 +4178,1 @@\n-        long ra = Long.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN);\n-            }\n-        }\n+        long ra = 0;\n@@ -4111,1 +4181,1 @@\n-            ra = Long.MAX_VALUE;\n+            ra = MIN_IDENTITY;\n@@ -4114,1 +4184,3 @@\n-                ra = (long) Math.min(ra, av.reduceLanes(VectorOperators.MIN));\n+                long v = av.reduceLanes(VectorOperators.MIN);\n+                r[i] = v;\n+                ra = (long) Math.min(ra, v);\n@@ -4122,0 +4194,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void MINReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = MIN_IDENTITY;\n+\n+        Assert.assertEquals((long) Math.min(id, id), id,\n+                            \"MIN(MIN_IDENTITY, MIN_IDENTITY) != MIN_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) Math.min(id, x), x);\n+                Assert.assertEquals((long) Math.min(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) Math.min(id, x), x,\n+                                \"MIN(MIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) Math.min(x, id), x,\n+                                \"MIN(\" + x + \", MIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4123,1 +4218,1 @@\n-        long res = Long.MAX_VALUE;\n+        long res = MIN_IDENTITY;\n@@ -4133,1 +4228,1 @@\n-        long res = Long.MAX_VALUE;\n+        long res = MIN_IDENTITY;\n@@ -4147,8 +4242,1 @@\n-        long ra = Long.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN, vmask);\n-            }\n-        }\n+        long ra = 0;\n@@ -4157,1 +4245,1 @@\n-            ra = Long.MAX_VALUE;\n+            ra = MIN_IDENTITY;\n@@ -4160,1 +4248,3 @@\n-                ra = (long) Math.min(ra, av.reduceLanes(VectorOperators.MIN, vmask));\n+                long v = av.reduceLanes(VectorOperators.MIN, vmask);\n+                r[i] = v;\n+                ra = (long) Math.min(ra, v);\n@@ -4169,1 +4259,1 @@\n-        long res = Long.MIN_VALUE;\n+        long res = MAX_IDENTITY;\n@@ -4178,1 +4268,1 @@\n-        long res = Long.MIN_VALUE;\n+        long res = MAX_IDENTITY;\n@@ -4190,8 +4280,1 @@\n-        long ra = Long.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX);\n-            }\n-        }\n+        long ra = 0;\n@@ -4200,1 +4283,1 @@\n-            ra = Long.MIN_VALUE;\n+            ra = MAX_IDENTITY;\n@@ -4203,1 +4286,3 @@\n-                ra = (long) Math.max(ra, av.reduceLanes(VectorOperators.MAX));\n+                long v = av.reduceLanes(VectorOperators.MAX);\n+                r[i] = v;\n+                ra = (long) Math.max(ra, v);\n@@ -4211,0 +4296,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void MAXReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = MAX_IDENTITY;\n+\n+        Assert.assertEquals((long) Math.max(id, id), id,\n+                            \"MAX(MAX_IDENTITY, MAX_IDENTITY) != MAX_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) Math.max(id, x), x);\n+                Assert.assertEquals((long) Math.max(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) Math.max(id, x), x,\n+                                \"MAX(MAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) Math.max(x, id), x,\n+                                \"MAX(\" + x + \", MAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4212,1 +4320,1 @@\n-        long res = Long.MIN_VALUE;\n+        long res = MAX_IDENTITY;\n@@ -4222,1 +4330,1 @@\n-        long res = Long.MIN_VALUE;\n+        long res = MAX_IDENTITY;\n@@ -4236,8 +4344,1 @@\n-        long ra = Long.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX, vmask);\n-            }\n-        }\n+        long ra = 0;\n@@ -4246,1 +4347,1 @@\n-            ra = Long.MIN_VALUE;\n+            ra = MAX_IDENTITY;\n@@ -4249,1 +4350,3 @@\n-                ra = (long) Math.max(ra, av.reduceLanes(VectorOperators.MAX, vmask));\n+                long v = av.reduceLanes(VectorOperators.MAX, vmask);\n+                r[i] = v;\n+                ra = (long) Math.max(ra, v);\n@@ -4258,1 +4361,1 @@\n-        long res = Long.MAX_VALUE;\n+        long res = UMIN_IDENTITY;\n@@ -4267,1 +4370,1 @@\n-        long res = Long.MAX_VALUE;\n+        long res = UMIN_IDENTITY;\n@@ -4279,8 +4382,1 @@\n-        long ra = Long.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMIN);\n-            }\n-        }\n+        long ra = 0;\n@@ -4289,1 +4385,1 @@\n-            ra = Long.MAX_VALUE;\n+            ra = UMIN_IDENTITY;\n@@ -4292,1 +4388,3 @@\n-                ra = (long) VectorMath.minUnsigned(ra, av.reduceLanes(VectorOperators.UMIN));\n+                long v = av.reduceLanes(VectorOperators.UMIN);\n+                r[i] = v;\n+                ra = (long) VectorMath.minUnsigned(ra, v);\n@@ -4300,0 +4398,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void UMINReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = UMIN_IDENTITY;\n+\n+        Assert.assertEquals((long) VectorMath.minUnsigned(id, id), id,\n+                            \"UMIN(UMIN_IDENTITY, UMIN_IDENTITY) != UMIN_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) VectorMath.minUnsigned(id, x), x);\n+                Assert.assertEquals((long) VectorMath.minUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) VectorMath.minUnsigned(id, x), x,\n+                                \"UMIN(UMIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) VectorMath.minUnsigned(x, id), x,\n+                                \"UMIN(\" + x + \", UMIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4301,1 +4422,1 @@\n-        long res = Long.MAX_VALUE;\n+        long res = UMIN_IDENTITY;\n@@ -4311,1 +4432,1 @@\n-        long res = Long.MAX_VALUE;\n+        long res = UMIN_IDENTITY;\n@@ -4325,8 +4446,1 @@\n-        long ra = Long.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMIN, vmask);\n-            }\n-        }\n+        long ra = 0;\n@@ -4335,1 +4449,1 @@\n-            ra = Long.MAX_VALUE;\n+            ra = UMIN_IDENTITY;\n@@ -4338,1 +4452,3 @@\n-                ra = (long) VectorMath.minUnsigned(ra, av.reduceLanes(VectorOperators.UMIN, vmask));\n+                long v = av.reduceLanes(VectorOperators.UMIN, vmask);\n+                r[i] = v;\n+                ra = (long) VectorMath.minUnsigned(ra, v);\n@@ -4347,1 +4463,1 @@\n-        long res = Long.MIN_VALUE;\n+        long res = UMAX_IDENTITY;\n@@ -4356,1 +4472,1 @@\n-        long res = Long.MIN_VALUE;\n+        long res = UMAX_IDENTITY;\n@@ -4368,8 +4484,1 @@\n-        long ra = Long.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMAX);\n-            }\n-        }\n+        long ra = 0;\n@@ -4378,1 +4487,1 @@\n-            ra = Long.MIN_VALUE;\n+            ra = UMAX_IDENTITY;\n@@ -4381,1 +4490,3 @@\n-                ra = (long) VectorMath.maxUnsigned(ra, av.reduceLanes(VectorOperators.UMAX));\n+                long v = av.reduceLanes(VectorOperators.UMAX);\n+                r[i] = v;\n+                ra = (long) VectorMath.maxUnsigned(ra, v);\n@@ -4389,0 +4500,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void UMAXReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = UMAX_IDENTITY;\n+\n+        Assert.assertEquals((long) VectorMath.maxUnsigned(id, id), id,\n+                            \"UMAX(UMAX_IDENTITY, UMAX_IDENTITY) != UMAX_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) VectorMath.maxUnsigned(id, x), x);\n+                Assert.assertEquals((long) VectorMath.maxUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) VectorMath.maxUnsigned(id, x), x,\n+                                \"UMAX(UMAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) VectorMath.maxUnsigned(x, id), x,\n+                                \"UMAX(\" + x + \", UMAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4390,1 +4524,1 @@\n-        long res = Long.MIN_VALUE;\n+        long res = UMAX_IDENTITY;\n@@ -4400,1 +4534,1 @@\n-        long res = Long.MIN_VALUE;\n+        long res = UMAX_IDENTITY;\n@@ -4414,8 +4548,1 @@\n-        long ra = Long.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMAX, vmask);\n-            }\n-        }\n+        long ra = 0;\n@@ -4424,1 +4551,1 @@\n-            ra = Long.MIN_VALUE;\n+            ra = UMAX_IDENTITY;\n@@ -4427,1 +4554,3 @@\n-                ra = (long) VectorMath.maxUnsigned(ra, av.reduceLanes(VectorOperators.UMAX, vmask));\n+                long v = av.reduceLanes(VectorOperators.UMAX, vmask);\n+                r[i] = v;\n+                ra = (long) VectorMath.maxUnsigned(ra, v);\n@@ -4436,1 +4565,1 @@\n-        long res = (long) 0;\n+        long res = FIRST_NONZERO_IDENTITY;\n@@ -4445,1 +4574,1 @@\n-        long res = (long) 0;\n+        long res = FIRST_NONZERO_IDENTITY;\n@@ -4457,8 +4586,1 @@\n-        long ra = (long) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n-            }\n-        }\n+        long ra = 0;\n@@ -4467,1 +4589,1 @@\n-            ra = (long) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -4470,1 +4592,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO));\n+                long v = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -4478,0 +4602,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void FIRST_NONZEROReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = FIRST_NONZERO_IDENTITY;\n+\n+        Assert.assertEquals(firstNonZero(id, id), id,\n+                            \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, FIRST_NONZERO_IDENTITY) != FIRST_NONZERO_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals(firstNonZero(id, x), x);\n+                Assert.assertEquals(firstNonZero(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals(firstNonZero(id, x), x,\n+                                \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals(firstNonZero(x, id), x,\n+                                \"FIRST_NONZERO(\" + x + \", FIRST_NONZERO_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4479,1 +4626,1 @@\n-        long res = (long) 0;\n+        long res = FIRST_NONZERO_IDENTITY;\n@@ -4489,1 +4636,1 @@\n-        long res = (long) 0;\n+        long res = FIRST_NONZERO_IDENTITY;\n@@ -4503,8 +4650,1 @@\n-        long ra = (long) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n-            }\n-        }\n+        long ra = 0;\n@@ -4513,1 +4653,1 @@\n-            ra = (long) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -4516,1 +4656,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask));\n+                long v = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -4573,1 +4715,1 @@\n-        long res = 0;\n+        long res = SUADD_IDENTITY;\n@@ -4582,1 +4724,1 @@\n-        long res = 0;\n+        long res = SUADD_IDENTITY;\n@@ -4597,0 +4739,1 @@\n+            ra = SUADD_IDENTITY;\n@@ -4599,9 +4742,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.SUADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                ra = (long) VectorMath.addSaturatingUnsigned(ra, av.reduceLanes(VectorOperators.SUADD));\n+                long v = av.reduceLanes(VectorOperators.SUADD);\n+                r[i] = v;\n+                ra = (long) VectorMath.addSaturatingUnsigned(ra, v);\n@@ -4615,0 +4752,23 @@\n+    @Test(dataProvider = \"longSaturatingUnaryOpProvider\")\n+    static void SUADDReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = SUADD_IDENTITY;\n+\n+        Assert.assertEquals((long) VectorMath.addSaturatingUnsigned(id, id), id,\n+                            \"SUADD(SUADD_IDENTITY, SUADD_IDENTITY) != SUADD_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) VectorMath.addSaturatingUnsigned(id, x), x);\n+                Assert.assertEquals((long) VectorMath.addSaturatingUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) VectorMath.addSaturatingUnsigned(id, x), x,\n+                                \"SUADD(SUADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) VectorMath.addSaturatingUnsigned(x, id), x,\n+                                \"SUADD(\" + x + \", SUADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4616,1 +4776,1 @@\n-        long res = 0;\n+        long res = SUADD_IDENTITY;\n@@ -4626,1 +4786,1 @@\n-        long res = 0;\n+        long res = SUADD_IDENTITY;\n@@ -4642,0 +4802,1 @@\n+            ra = SUADD_IDENTITY;\n@@ -4644,9 +4805,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.SUADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                ra = (long) VectorMath.addSaturatingUnsigned(ra, av.reduceLanes(VectorOperators.SUADD, vmask));\n+                long v = av.reduceLanes(VectorOperators.SUADD, vmask);\n+                r[i] = v;\n+                ra = (long) VectorMath.addSaturatingUnsigned(ra, v);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/Long64VectorTests.java","additions":413,"deletions":258,"binary":false,"changes":671,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -74,0 +74,13 @@\n+    \/\/ Identity values for reduction operations\n+    private static final long ADD_IDENTITY = (long)0;\n+    private static final long AND_IDENTITY = (long)-1;\n+    private static final long FIRST_NONZERO_IDENTITY = (long)0;\n+    private static final long MAX_IDENTITY = Long.MIN_VALUE;\n+    private static final long MIN_IDENTITY = Long.MAX_VALUE;\n+    private static final long MUL_IDENTITY = (long)1;\n+    private static final long OR_IDENTITY = (long)0;\n+    private static final long SUADD_IDENTITY = (long)0;\n+    private static final long UMAX_IDENTITY = (long)0;   \/\/ Minimum unsigned value\n+    private static final long UMIN_IDENTITY = (long)-1;  \/\/ Maximum unsigned value\n+    private static final long XOR_IDENTITY = (long)0;\n+\n@@ -3640,1 +3653,1 @@\n-        long res = -1;\n+        long res = AND_IDENTITY;\n@@ -3649,1 +3662,1 @@\n-        long res = -1;\n+        long res = AND_IDENTITY;\n@@ -3661,8 +3674,1 @@\n-        long ra = -1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.AND);\n-            }\n-        }\n+        long ra = 0;\n@@ -3671,1 +3677,1 @@\n-            ra = -1;\n+            ra = AND_IDENTITY;\n@@ -3674,1 +3680,3 @@\n-                ra &= av.reduceLanes(VectorOperators.AND);\n+                long v = av.reduceLanes(VectorOperators.AND);\n+                r[i] = v;\n+                ra &= v;\n@@ -3682,0 +3690,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void ANDReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = AND_IDENTITY;\n+\n+        Assert.assertEquals((long) (id & id), id,\n+                            \"AND(AND_IDENTITY, AND_IDENTITY) != AND_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) (id & x), x);\n+                Assert.assertEquals((long) (x & id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) (id & x), x,\n+                                \"AND(AND_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) (x & id), x,\n+                                \"AND(\" + x + \", AND_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3683,1 +3714,1 @@\n-        long res = -1;\n+        long res = AND_IDENTITY;\n@@ -3693,1 +3724,1 @@\n-        long res = -1;\n+        long res = AND_IDENTITY;\n@@ -3707,8 +3738,1 @@\n-        long ra = -1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.AND, vmask);\n-            }\n-        }\n+        long ra = 0;\n@@ -3717,1 +3741,1 @@\n-            ra = -1;\n+            ra = AND_IDENTITY;\n@@ -3720,1 +3744,3 @@\n-                ra &= av.reduceLanes(VectorOperators.AND, vmask);\n+                long v = av.reduceLanes(VectorOperators.AND, vmask);\n+                r[i] = v;\n+                ra &= v;\n@@ -3729,1 +3755,1 @@\n-        long res = 0;\n+        long res = OR_IDENTITY;\n@@ -3738,1 +3764,1 @@\n-        long res = 0;\n+        long res = OR_IDENTITY;\n@@ -3753,0 +3779,1 @@\n+            ra = OR_IDENTITY;\n@@ -3755,9 +3782,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.OR);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                ra |= av.reduceLanes(VectorOperators.OR);\n+                long v = av.reduceLanes(VectorOperators.OR);\n+                r[i] = v;\n+                ra |= v;\n@@ -3771,0 +3792,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void ORReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = OR_IDENTITY;\n+\n+        Assert.assertEquals((long) (id | id), id,\n+                            \"OR(OR_IDENTITY, OR_IDENTITY) != OR_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) (id | x), x);\n+                Assert.assertEquals((long) (x | id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) (id | x), x,\n+                                \"OR(OR_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) (x | id), x,\n+                                \"OR(\" + x + \", OR_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3772,1 +3816,1 @@\n-        long res = 0;\n+        long res = OR_IDENTITY;\n@@ -3782,1 +3826,1 @@\n-        long res = 0;\n+        long res = OR_IDENTITY;\n@@ -3799,0 +3843,1 @@\n+            ra = OR_IDENTITY;\n@@ -3801,9 +3846,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.OR, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                ra |= av.reduceLanes(VectorOperators.OR, vmask);\n+                long v = av.reduceLanes(VectorOperators.OR, vmask);\n+                r[i] = v;\n+                ra |= v;\n@@ -3818,1 +3857,1 @@\n-        long res = 0;\n+        long res = XOR_IDENTITY;\n@@ -3827,1 +3866,1 @@\n-        long res = 0;\n+        long res = XOR_IDENTITY;\n@@ -3842,0 +3881,1 @@\n+            ra = XOR_IDENTITY;\n@@ -3844,9 +3884,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.XOR);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                ra ^= av.reduceLanes(VectorOperators.XOR);\n+                long v = av.reduceLanes(VectorOperators.XOR);\n+                r[i] = v;\n+                ra ^= v;\n@@ -3860,0 +3894,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void XORReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = XOR_IDENTITY;\n+\n+        Assert.assertEquals((long) (id ^ id), id,\n+                            \"XOR(XOR_IDENTITY, XOR_IDENTITY) != XOR_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) (id ^ x), x);\n+                Assert.assertEquals((long) (x ^ id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) (id ^ x), x,\n+                                \"XOR(XOR_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) (x ^ id), x,\n+                                \"XOR(\" + x + \", XOR_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3861,1 +3918,1 @@\n-        long res = 0;\n+        long res = XOR_IDENTITY;\n@@ -3871,1 +3928,1 @@\n-        long res = 0;\n+        long res = XOR_IDENTITY;\n@@ -3888,0 +3945,1 @@\n+            ra = XOR_IDENTITY;\n@@ -3890,9 +3948,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.XOR, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                ra ^= av.reduceLanes(VectorOperators.XOR, vmask);\n+                long v = av.reduceLanes(VectorOperators.XOR, vmask);\n+                r[i] = v;\n+                ra ^= v;\n@@ -3907,1 +3959,1 @@\n-        long res = 0;\n+        long res = ADD_IDENTITY;\n@@ -3916,1 +3968,1 @@\n-        long res = 0;\n+        long res = ADD_IDENTITY;\n@@ -3931,0 +3983,1 @@\n+            ra = ADD_IDENTITY;\n@@ -3933,9 +3986,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD);\n+                long v = av.reduceLanes(VectorOperators.ADD);\n+                r[i] = v;\n+                ra += v;\n@@ -3949,0 +3996,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void ADDReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = ADD_IDENTITY;\n+\n+        Assert.assertEquals((long) (id + id), id,\n+                            \"ADD(ADD_IDENTITY, ADD_IDENTITY) != ADD_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) (id + x), x);\n+                Assert.assertEquals((long) (x + id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) (id + x), x,\n+                                \"ADD(ADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) (x + id), x,\n+                                \"ADD(\" + x + \", ADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3950,1 +4020,1 @@\n-        long res = 0;\n+        long res = ADD_IDENTITY;\n@@ -3960,1 +4030,1 @@\n-        long res = 0;\n+        long res = ADD_IDENTITY;\n@@ -3977,0 +4047,1 @@\n+            ra = ADD_IDENTITY;\n@@ -3979,9 +4050,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD, vmask);\n+                long v = av.reduceLanes(VectorOperators.ADD, vmask);\n+                r[i] = v;\n+                ra += v;\n@@ -3996,1 +4061,1 @@\n-        long res = 1;\n+        long res = MUL_IDENTITY;\n@@ -4005,1 +4070,1 @@\n-        long res = 1;\n+        long res = MUL_IDENTITY;\n@@ -4017,8 +4082,1 @@\n-        long ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL);\n-            }\n-        }\n+        long ra = 0;\n@@ -4027,1 +4085,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -4030,1 +4088,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL);\n+                long v = av.reduceLanes(VectorOperators.MUL);\n+                r[i] = v;\n+                ra *= v;\n@@ -4038,0 +4098,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void MULReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = MUL_IDENTITY;\n+\n+        Assert.assertEquals((long) (id * id), id,\n+                            \"MUL(MUL_IDENTITY, MUL_IDENTITY) != MUL_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) (id * x), x);\n+                Assert.assertEquals((long) (x * id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) (id * x), x,\n+                                \"MUL(MUL_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) (x * id), x,\n+                                \"MUL(\" + x + \", MUL_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4039,1 +4122,1 @@\n-        long res = 1;\n+        long res = MUL_IDENTITY;\n@@ -4049,1 +4132,1 @@\n-        long res = 1;\n+        long res = MUL_IDENTITY;\n@@ -4063,8 +4146,1 @@\n-        long ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL, vmask);\n-            }\n-        }\n+        long ra = 0;\n@@ -4073,1 +4149,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -4076,1 +4152,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL, vmask);\n+                long v = av.reduceLanes(VectorOperators.MUL, vmask);\n+                r[i] = v;\n+                ra *= v;\n@@ -4085,1 +4163,1 @@\n-        long res = Long.MAX_VALUE;\n+        long res = MIN_IDENTITY;\n@@ -4094,1 +4172,1 @@\n-        long res = Long.MAX_VALUE;\n+        long res = MIN_IDENTITY;\n@@ -4106,8 +4184,1 @@\n-        long ra = Long.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN);\n-            }\n-        }\n+        long ra = 0;\n@@ -4116,1 +4187,1 @@\n-            ra = Long.MAX_VALUE;\n+            ra = MIN_IDENTITY;\n@@ -4119,1 +4190,3 @@\n-                ra = (long) Math.min(ra, av.reduceLanes(VectorOperators.MIN));\n+                long v = av.reduceLanes(VectorOperators.MIN);\n+                r[i] = v;\n+                ra = (long) Math.min(ra, v);\n@@ -4127,0 +4200,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void MINReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = MIN_IDENTITY;\n+\n+        Assert.assertEquals((long) Math.min(id, id), id,\n+                            \"MIN(MIN_IDENTITY, MIN_IDENTITY) != MIN_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) Math.min(id, x), x);\n+                Assert.assertEquals((long) Math.min(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) Math.min(id, x), x,\n+                                \"MIN(MIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) Math.min(x, id), x,\n+                                \"MIN(\" + x + \", MIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4128,1 +4224,1 @@\n-        long res = Long.MAX_VALUE;\n+        long res = MIN_IDENTITY;\n@@ -4138,1 +4234,1 @@\n-        long res = Long.MAX_VALUE;\n+        long res = MIN_IDENTITY;\n@@ -4152,8 +4248,1 @@\n-        long ra = Long.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN, vmask);\n-            }\n-        }\n+        long ra = 0;\n@@ -4162,1 +4251,1 @@\n-            ra = Long.MAX_VALUE;\n+            ra = MIN_IDENTITY;\n@@ -4165,1 +4254,3 @@\n-                ra = (long) Math.min(ra, av.reduceLanes(VectorOperators.MIN, vmask));\n+                long v = av.reduceLanes(VectorOperators.MIN, vmask);\n+                r[i] = v;\n+                ra = (long) Math.min(ra, v);\n@@ -4174,1 +4265,1 @@\n-        long res = Long.MIN_VALUE;\n+        long res = MAX_IDENTITY;\n@@ -4183,1 +4274,1 @@\n-        long res = Long.MIN_VALUE;\n+        long res = MAX_IDENTITY;\n@@ -4195,8 +4286,1 @@\n-        long ra = Long.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX);\n-            }\n-        }\n+        long ra = 0;\n@@ -4205,1 +4289,1 @@\n-            ra = Long.MIN_VALUE;\n+            ra = MAX_IDENTITY;\n@@ -4208,1 +4292,3 @@\n-                ra = (long) Math.max(ra, av.reduceLanes(VectorOperators.MAX));\n+                long v = av.reduceLanes(VectorOperators.MAX);\n+                r[i] = v;\n+                ra = (long) Math.max(ra, v);\n@@ -4216,0 +4302,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void MAXReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = MAX_IDENTITY;\n+\n+        Assert.assertEquals((long) Math.max(id, id), id,\n+                            \"MAX(MAX_IDENTITY, MAX_IDENTITY) != MAX_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) Math.max(id, x), x);\n+                Assert.assertEquals((long) Math.max(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) Math.max(id, x), x,\n+                                \"MAX(MAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) Math.max(x, id), x,\n+                                \"MAX(\" + x + \", MAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4217,1 +4326,1 @@\n-        long res = Long.MIN_VALUE;\n+        long res = MAX_IDENTITY;\n@@ -4227,1 +4336,1 @@\n-        long res = Long.MIN_VALUE;\n+        long res = MAX_IDENTITY;\n@@ -4241,8 +4350,1 @@\n-        long ra = Long.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX, vmask);\n-            }\n-        }\n+        long ra = 0;\n@@ -4251,1 +4353,1 @@\n-            ra = Long.MIN_VALUE;\n+            ra = MAX_IDENTITY;\n@@ -4254,1 +4356,3 @@\n-                ra = (long) Math.max(ra, av.reduceLanes(VectorOperators.MAX, vmask));\n+                long v = av.reduceLanes(VectorOperators.MAX, vmask);\n+                r[i] = v;\n+                ra = (long) Math.max(ra, v);\n@@ -4263,1 +4367,1 @@\n-        long res = Long.MAX_VALUE;\n+        long res = UMIN_IDENTITY;\n@@ -4272,1 +4376,1 @@\n-        long res = Long.MAX_VALUE;\n+        long res = UMIN_IDENTITY;\n@@ -4284,8 +4388,1 @@\n-        long ra = Long.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMIN);\n-            }\n-        }\n+        long ra = 0;\n@@ -4294,1 +4391,1 @@\n-            ra = Long.MAX_VALUE;\n+            ra = UMIN_IDENTITY;\n@@ -4297,1 +4394,3 @@\n-                ra = (long) VectorMath.minUnsigned(ra, av.reduceLanes(VectorOperators.UMIN));\n+                long v = av.reduceLanes(VectorOperators.UMIN);\n+                r[i] = v;\n+                ra = (long) VectorMath.minUnsigned(ra, v);\n@@ -4305,0 +4404,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void UMINReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = UMIN_IDENTITY;\n+\n+        Assert.assertEquals((long) VectorMath.minUnsigned(id, id), id,\n+                            \"UMIN(UMIN_IDENTITY, UMIN_IDENTITY) != UMIN_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) VectorMath.minUnsigned(id, x), x);\n+                Assert.assertEquals((long) VectorMath.minUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) VectorMath.minUnsigned(id, x), x,\n+                                \"UMIN(UMIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) VectorMath.minUnsigned(x, id), x,\n+                                \"UMIN(\" + x + \", UMIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4306,1 +4428,1 @@\n-        long res = Long.MAX_VALUE;\n+        long res = UMIN_IDENTITY;\n@@ -4316,1 +4438,1 @@\n-        long res = Long.MAX_VALUE;\n+        long res = UMIN_IDENTITY;\n@@ -4330,8 +4452,1 @@\n-        long ra = Long.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMIN, vmask);\n-            }\n-        }\n+        long ra = 0;\n@@ -4340,1 +4455,1 @@\n-            ra = Long.MAX_VALUE;\n+            ra = UMIN_IDENTITY;\n@@ -4343,1 +4458,3 @@\n-                ra = (long) VectorMath.minUnsigned(ra, av.reduceLanes(VectorOperators.UMIN, vmask));\n+                long v = av.reduceLanes(VectorOperators.UMIN, vmask);\n+                r[i] = v;\n+                ra = (long) VectorMath.minUnsigned(ra, v);\n@@ -4352,1 +4469,1 @@\n-        long res = Long.MIN_VALUE;\n+        long res = UMAX_IDENTITY;\n@@ -4361,1 +4478,1 @@\n-        long res = Long.MIN_VALUE;\n+        long res = UMAX_IDENTITY;\n@@ -4373,8 +4490,1 @@\n-        long ra = Long.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMAX);\n-            }\n-        }\n+        long ra = 0;\n@@ -4383,1 +4493,1 @@\n-            ra = Long.MIN_VALUE;\n+            ra = UMAX_IDENTITY;\n@@ -4386,1 +4496,3 @@\n-                ra = (long) VectorMath.maxUnsigned(ra, av.reduceLanes(VectorOperators.UMAX));\n+                long v = av.reduceLanes(VectorOperators.UMAX);\n+                r[i] = v;\n+                ra = (long) VectorMath.maxUnsigned(ra, v);\n@@ -4394,0 +4506,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void UMAXReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = UMAX_IDENTITY;\n+\n+        Assert.assertEquals((long) VectorMath.maxUnsigned(id, id), id,\n+                            \"UMAX(UMAX_IDENTITY, UMAX_IDENTITY) != UMAX_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) VectorMath.maxUnsigned(id, x), x);\n+                Assert.assertEquals((long) VectorMath.maxUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) VectorMath.maxUnsigned(id, x), x,\n+                                \"UMAX(UMAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) VectorMath.maxUnsigned(x, id), x,\n+                                \"UMAX(\" + x + \", UMAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4395,1 +4530,1 @@\n-        long res = Long.MIN_VALUE;\n+        long res = UMAX_IDENTITY;\n@@ -4405,1 +4540,1 @@\n-        long res = Long.MIN_VALUE;\n+        long res = UMAX_IDENTITY;\n@@ -4419,8 +4554,1 @@\n-        long ra = Long.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMAX, vmask);\n-            }\n-        }\n+        long ra = 0;\n@@ -4429,1 +4557,1 @@\n-            ra = Long.MIN_VALUE;\n+            ra = UMAX_IDENTITY;\n@@ -4432,1 +4560,3 @@\n-                ra = (long) VectorMath.maxUnsigned(ra, av.reduceLanes(VectorOperators.UMAX, vmask));\n+                long v = av.reduceLanes(VectorOperators.UMAX, vmask);\n+                r[i] = v;\n+                ra = (long) VectorMath.maxUnsigned(ra, v);\n@@ -4441,1 +4571,1 @@\n-        long res = (long) 0;\n+        long res = FIRST_NONZERO_IDENTITY;\n@@ -4450,1 +4580,1 @@\n-        long res = (long) 0;\n+        long res = FIRST_NONZERO_IDENTITY;\n@@ -4462,8 +4592,1 @@\n-        long ra = (long) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n-            }\n-        }\n+        long ra = 0;\n@@ -4472,1 +4595,1 @@\n-            ra = (long) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -4475,1 +4598,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO));\n+                long v = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -4483,0 +4608,23 @@\n+    @Test(dataProvider = \"longUnaryOpProvider\")\n+    static void FIRST_NONZEROReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = FIRST_NONZERO_IDENTITY;\n+\n+        Assert.assertEquals(firstNonZero(id, id), id,\n+                            \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, FIRST_NONZERO_IDENTITY) != FIRST_NONZERO_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals(firstNonZero(id, x), x);\n+                Assert.assertEquals(firstNonZero(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals(firstNonZero(id, x), x,\n+                                \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals(firstNonZero(x, id), x,\n+                                \"FIRST_NONZERO(\" + x + \", FIRST_NONZERO_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4484,1 +4632,1 @@\n-        long res = (long) 0;\n+        long res = FIRST_NONZERO_IDENTITY;\n@@ -4494,1 +4642,1 @@\n-        long res = (long) 0;\n+        long res = FIRST_NONZERO_IDENTITY;\n@@ -4508,8 +4656,1 @@\n-        long ra = (long) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n-            }\n-        }\n+        long ra = 0;\n@@ -4518,1 +4659,1 @@\n-            ra = (long) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -4521,1 +4662,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask));\n+                long v = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -4578,1 +4721,1 @@\n-        long res = 0;\n+        long res = SUADD_IDENTITY;\n@@ -4587,1 +4730,1 @@\n-        long res = 0;\n+        long res = SUADD_IDENTITY;\n@@ -4602,0 +4745,1 @@\n+            ra = SUADD_IDENTITY;\n@@ -4604,9 +4748,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.SUADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                ra = (long) VectorMath.addSaturatingUnsigned(ra, av.reduceLanes(VectorOperators.SUADD));\n+                long v = av.reduceLanes(VectorOperators.SUADD);\n+                r[i] = v;\n+                ra = (long) VectorMath.addSaturatingUnsigned(ra, v);\n@@ -4620,0 +4758,23 @@\n+    @Test(dataProvider = \"longSaturatingUnaryOpProvider\")\n+    static void SUADDReduceIdentityValueTests(IntFunction<long[]> fa) {\n+        long[] a = fa.apply(SPECIES.length());\n+        long id = SUADD_IDENTITY;\n+\n+        Assert.assertEquals((long) VectorMath.addSaturatingUnsigned(id, id), id,\n+                            \"SUADD(SUADD_IDENTITY, SUADD_IDENTITY) != SUADD_IDENTITY\");\n+\n+        long x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((long) VectorMath.addSaturatingUnsigned(id, x), x);\n+                Assert.assertEquals((long) VectorMath.addSaturatingUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((long) VectorMath.addSaturatingUnsigned(id, x), x,\n+                                \"SUADD(SUADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((long) VectorMath.addSaturatingUnsigned(x, id), x,\n+                                \"SUADD(\" + x + \", SUADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4621,1 +4782,1 @@\n-        long res = 0;\n+        long res = SUADD_IDENTITY;\n@@ -4631,1 +4792,1 @@\n-        long res = 0;\n+        long res = SUADD_IDENTITY;\n@@ -4647,0 +4808,1 @@\n+            ra = SUADD_IDENTITY;\n@@ -4649,9 +4811,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.SUADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                LongVector av = LongVector.fromArray(SPECIES, a, i);\n-                ra = (long) VectorMath.addSaturatingUnsigned(ra, av.reduceLanes(VectorOperators.SUADD, vmask));\n+                long v = av.reduceLanes(VectorOperators.SUADD, vmask);\n+                r[i] = v;\n+                ra = (long) VectorMath.addSaturatingUnsigned(ra, v);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/LongMaxVectorTests.java","additions":413,"deletions":257,"binary":false,"changes":670,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -66,1 +66,0 @@\n-\n@@ -69,0 +68,13 @@\n+    \/\/ Identity values for reduction operations\n+    private static final short ADD_IDENTITY = (short)0;\n+    private static final short AND_IDENTITY = (short)-1;\n+    private static final short FIRST_NONZERO_IDENTITY = (short)0;\n+    private static final short MAX_IDENTITY = Short.MIN_VALUE;\n+    private static final short MIN_IDENTITY = Short.MAX_VALUE;\n+    private static final short MUL_IDENTITY = (short)1;\n+    private static final short OR_IDENTITY = (short)0;\n+    private static final short SUADD_IDENTITY = (short)0;\n+    private static final short UMAX_IDENTITY = (short)0;   \/\/ Minimum unsigned value\n+    private static final short UMIN_IDENTITY = (short)-1;  \/\/ Maximum unsigned value\n+    private static final short XOR_IDENTITY = (short)0;\n+\n@@ -3560,1 +3572,1 @@\n-        short res = -1;\n+        short res = AND_IDENTITY;\n@@ -3569,1 +3581,1 @@\n-        short res = -1;\n+        short res = AND_IDENTITY;\n@@ -3581,8 +3593,1 @@\n-        short ra = -1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.AND);\n-            }\n-        }\n+        short ra = 0;\n@@ -3591,1 +3596,1 @@\n-            ra = -1;\n+            ra = AND_IDENTITY;\n@@ -3594,1 +3599,3 @@\n-                ra &= av.reduceLanes(VectorOperators.AND);\n+                short v = av.reduceLanes(VectorOperators.AND);\n+                r[i] = v;\n+                ra &= v;\n@@ -3602,0 +3609,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void ANDReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = AND_IDENTITY;\n+\n+        Assert.assertEquals((short) (id & id), id,\n+                            \"AND(AND_IDENTITY, AND_IDENTITY) != AND_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) (id & x), x);\n+                Assert.assertEquals((short) (x & id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) (id & x), x,\n+                                \"AND(AND_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) (x & id), x,\n+                                \"AND(\" + x + \", AND_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3603,1 +3633,1 @@\n-        short res = -1;\n+        short res = AND_IDENTITY;\n@@ -3613,1 +3643,1 @@\n-        short res = -1;\n+        short res = AND_IDENTITY;\n@@ -3627,8 +3657,1 @@\n-        short ra = -1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.AND, vmask);\n-            }\n-        }\n+        short ra = 0;\n@@ -3637,1 +3660,1 @@\n-            ra = -1;\n+            ra = AND_IDENTITY;\n@@ -3640,1 +3663,3 @@\n-                ra &= av.reduceLanes(VectorOperators.AND, vmask);\n+                short v = av.reduceLanes(VectorOperators.AND, vmask);\n+                r[i] = v;\n+                ra &= v;\n@@ -3649,1 +3674,1 @@\n-        short res = 0;\n+        short res = OR_IDENTITY;\n@@ -3658,1 +3683,1 @@\n-        short res = 0;\n+        short res = OR_IDENTITY;\n@@ -3673,0 +3698,1 @@\n+            ra = OR_IDENTITY;\n@@ -3675,9 +3701,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.OR);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                ra |= av.reduceLanes(VectorOperators.OR);\n+                short v = av.reduceLanes(VectorOperators.OR);\n+                r[i] = v;\n+                ra |= v;\n@@ -3691,0 +3711,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void ORReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = OR_IDENTITY;\n+\n+        Assert.assertEquals((short) (id | id), id,\n+                            \"OR(OR_IDENTITY, OR_IDENTITY) != OR_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) (id | x), x);\n+                Assert.assertEquals((short) (x | id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) (id | x), x,\n+                                \"OR(OR_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) (x | id), x,\n+                                \"OR(\" + x + \", OR_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3692,1 +3735,1 @@\n-        short res = 0;\n+        short res = OR_IDENTITY;\n@@ -3702,1 +3745,1 @@\n-        short res = 0;\n+        short res = OR_IDENTITY;\n@@ -3719,0 +3762,1 @@\n+            ra = OR_IDENTITY;\n@@ -3721,9 +3765,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.OR, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                ra |= av.reduceLanes(VectorOperators.OR, vmask);\n+                short v = av.reduceLanes(VectorOperators.OR, vmask);\n+                r[i] = v;\n+                ra |= v;\n@@ -3738,1 +3776,1 @@\n-        short res = 0;\n+        short res = XOR_IDENTITY;\n@@ -3747,1 +3785,1 @@\n-        short res = 0;\n+        short res = XOR_IDENTITY;\n@@ -3762,0 +3800,1 @@\n+            ra = XOR_IDENTITY;\n@@ -3764,9 +3803,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.XOR);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                ra ^= av.reduceLanes(VectorOperators.XOR);\n+                short v = av.reduceLanes(VectorOperators.XOR);\n+                r[i] = v;\n+                ra ^= v;\n@@ -3780,0 +3813,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void XORReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = XOR_IDENTITY;\n+\n+        Assert.assertEquals((short) (id ^ id), id,\n+                            \"XOR(XOR_IDENTITY, XOR_IDENTITY) != XOR_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) (id ^ x), x);\n+                Assert.assertEquals((short) (x ^ id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) (id ^ x), x,\n+                                \"XOR(XOR_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) (x ^ id), x,\n+                                \"XOR(\" + x + \", XOR_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3781,1 +3837,1 @@\n-        short res = 0;\n+        short res = XOR_IDENTITY;\n@@ -3791,1 +3847,1 @@\n-        short res = 0;\n+        short res = XOR_IDENTITY;\n@@ -3808,0 +3864,1 @@\n+            ra = XOR_IDENTITY;\n@@ -3810,9 +3867,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.XOR, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                ra ^= av.reduceLanes(VectorOperators.XOR, vmask);\n+                short v = av.reduceLanes(VectorOperators.XOR, vmask);\n+                r[i] = v;\n+                ra ^= v;\n@@ -3827,1 +3878,1 @@\n-        short res = 0;\n+        short res = ADD_IDENTITY;\n@@ -3836,1 +3887,1 @@\n-        short res = 0;\n+        short res = ADD_IDENTITY;\n@@ -3851,0 +3902,1 @@\n+            ra = ADD_IDENTITY;\n@@ -3853,9 +3905,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD);\n+                short v = av.reduceLanes(VectorOperators.ADD);\n+                r[i] = v;\n+                ra += v;\n@@ -3869,0 +3915,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void ADDReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = ADD_IDENTITY;\n+\n+        Assert.assertEquals((short) (id + id), id,\n+                            \"ADD(ADD_IDENTITY, ADD_IDENTITY) != ADD_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) (id + x), x);\n+                Assert.assertEquals((short) (x + id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) (id + x), x,\n+                                \"ADD(ADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) (x + id), x,\n+                                \"ADD(\" + x + \", ADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3870,1 +3939,1 @@\n-        short res = 0;\n+        short res = ADD_IDENTITY;\n@@ -3880,1 +3949,1 @@\n-        short res = 0;\n+        short res = ADD_IDENTITY;\n@@ -3897,0 +3966,1 @@\n+            ra = ADD_IDENTITY;\n@@ -3899,9 +3969,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD, vmask);\n+                short v = av.reduceLanes(VectorOperators.ADD, vmask);\n+                r[i] = v;\n+                ra += v;\n@@ -3916,1 +3980,1 @@\n-        short res = 1;\n+        short res = MUL_IDENTITY;\n@@ -3925,1 +3989,1 @@\n-        short res = 1;\n+        short res = MUL_IDENTITY;\n@@ -3937,8 +4001,1 @@\n-        short ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL);\n-            }\n-        }\n+        short ra = 0;\n@@ -3947,1 +4004,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -3950,1 +4007,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL);\n+                short v = av.reduceLanes(VectorOperators.MUL);\n+                r[i] = v;\n+                ra *= v;\n@@ -3958,0 +4017,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void MULReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = MUL_IDENTITY;\n+\n+        Assert.assertEquals((short) (id * id), id,\n+                            \"MUL(MUL_IDENTITY, MUL_IDENTITY) != MUL_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) (id * x), x);\n+                Assert.assertEquals((short) (x * id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) (id * x), x,\n+                                \"MUL(MUL_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) (x * id), x,\n+                                \"MUL(\" + x + \", MUL_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3959,1 +4041,1 @@\n-        short res = 1;\n+        short res = MUL_IDENTITY;\n@@ -3969,1 +4051,1 @@\n-        short res = 1;\n+        short res = MUL_IDENTITY;\n@@ -3983,8 +4065,1 @@\n-        short ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL, vmask);\n-            }\n-        }\n+        short ra = 0;\n@@ -3993,1 +4068,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -3996,1 +4071,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL, vmask);\n+                short v = av.reduceLanes(VectorOperators.MUL, vmask);\n+                r[i] = v;\n+                ra *= v;\n@@ -4005,1 +4082,1 @@\n-        short res = Short.MAX_VALUE;\n+        short res = MIN_IDENTITY;\n@@ -4014,1 +4091,1 @@\n-        short res = Short.MAX_VALUE;\n+        short res = MIN_IDENTITY;\n@@ -4026,8 +4103,1 @@\n-        short ra = Short.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN);\n-            }\n-        }\n+        short ra = 0;\n@@ -4036,1 +4106,1 @@\n-            ra = Short.MAX_VALUE;\n+            ra = MIN_IDENTITY;\n@@ -4039,1 +4109,3 @@\n-                ra = (short) Math.min(ra, av.reduceLanes(VectorOperators.MIN));\n+                short v = av.reduceLanes(VectorOperators.MIN);\n+                r[i] = v;\n+                ra = (short) Math.min(ra, v);\n@@ -4047,0 +4119,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void MINReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = MIN_IDENTITY;\n+\n+        Assert.assertEquals((short) Math.min(id, id), id,\n+                            \"MIN(MIN_IDENTITY, MIN_IDENTITY) != MIN_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) Math.min(id, x), x);\n+                Assert.assertEquals((short) Math.min(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) Math.min(id, x), x,\n+                                \"MIN(MIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) Math.min(x, id), x,\n+                                \"MIN(\" + x + \", MIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4048,1 +4143,1 @@\n-        short res = Short.MAX_VALUE;\n+        short res = MIN_IDENTITY;\n@@ -4058,1 +4153,1 @@\n-        short res = Short.MAX_VALUE;\n+        short res = MIN_IDENTITY;\n@@ -4072,8 +4167,1 @@\n-        short ra = Short.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN, vmask);\n-            }\n-        }\n+        short ra = 0;\n@@ -4082,1 +4170,1 @@\n-            ra = Short.MAX_VALUE;\n+            ra = MIN_IDENTITY;\n@@ -4085,1 +4173,3 @@\n-                ra = (short) Math.min(ra, av.reduceLanes(VectorOperators.MIN, vmask));\n+                short v = av.reduceLanes(VectorOperators.MIN, vmask);\n+                r[i] = v;\n+                ra = (short) Math.min(ra, v);\n@@ -4094,1 +4184,1 @@\n-        short res = Short.MIN_VALUE;\n+        short res = MAX_IDENTITY;\n@@ -4103,1 +4193,1 @@\n-        short res = Short.MIN_VALUE;\n+        short res = MAX_IDENTITY;\n@@ -4115,8 +4205,1 @@\n-        short ra = Short.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX);\n-            }\n-        }\n+        short ra = 0;\n@@ -4125,1 +4208,1 @@\n-            ra = Short.MIN_VALUE;\n+            ra = MAX_IDENTITY;\n@@ -4128,1 +4211,3 @@\n-                ra = (short) Math.max(ra, av.reduceLanes(VectorOperators.MAX));\n+                short v = av.reduceLanes(VectorOperators.MAX);\n+                r[i] = v;\n+                ra = (short) Math.max(ra, v);\n@@ -4136,0 +4221,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void MAXReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = MAX_IDENTITY;\n+\n+        Assert.assertEquals((short) Math.max(id, id), id,\n+                            \"MAX(MAX_IDENTITY, MAX_IDENTITY) != MAX_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) Math.max(id, x), x);\n+                Assert.assertEquals((short) Math.max(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) Math.max(id, x), x,\n+                                \"MAX(MAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) Math.max(x, id), x,\n+                                \"MAX(\" + x + \", MAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4137,1 +4245,1 @@\n-        short res = Short.MIN_VALUE;\n+        short res = MAX_IDENTITY;\n@@ -4147,1 +4255,1 @@\n-        short res = Short.MIN_VALUE;\n+        short res = MAX_IDENTITY;\n@@ -4161,8 +4269,1 @@\n-        short ra = Short.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX, vmask);\n-            }\n-        }\n+        short ra = 0;\n@@ -4171,1 +4272,1 @@\n-            ra = Short.MIN_VALUE;\n+            ra = MAX_IDENTITY;\n@@ -4174,1 +4275,3 @@\n-                ra = (short) Math.max(ra, av.reduceLanes(VectorOperators.MAX, vmask));\n+                short v = av.reduceLanes(VectorOperators.MAX, vmask);\n+                r[i] = v;\n+                ra = (short) Math.max(ra, v);\n@@ -4183,1 +4286,1 @@\n-        short res = Short.MAX_VALUE;\n+        short res = UMIN_IDENTITY;\n@@ -4192,1 +4295,1 @@\n-        short res = Short.MAX_VALUE;\n+        short res = UMIN_IDENTITY;\n@@ -4204,8 +4307,1 @@\n-        short ra = Short.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMIN);\n-            }\n-        }\n+        short ra = 0;\n@@ -4214,1 +4310,1 @@\n-            ra = Short.MAX_VALUE;\n+            ra = UMIN_IDENTITY;\n@@ -4217,1 +4313,3 @@\n-                ra = (short) VectorMath.minUnsigned(ra, av.reduceLanes(VectorOperators.UMIN));\n+                short v = av.reduceLanes(VectorOperators.UMIN);\n+                r[i] = v;\n+                ra = (short) VectorMath.minUnsigned(ra, v);\n@@ -4225,0 +4323,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void UMINReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = UMIN_IDENTITY;\n+\n+        Assert.assertEquals((short) VectorMath.minUnsigned(id, id), id,\n+                            \"UMIN(UMIN_IDENTITY, UMIN_IDENTITY) != UMIN_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) VectorMath.minUnsigned(id, x), x);\n+                Assert.assertEquals((short) VectorMath.minUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) VectorMath.minUnsigned(id, x), x,\n+                                \"UMIN(UMIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) VectorMath.minUnsigned(x, id), x,\n+                                \"UMIN(\" + x + \", UMIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4226,1 +4347,1 @@\n-        short res = Short.MAX_VALUE;\n+        short res = UMIN_IDENTITY;\n@@ -4236,1 +4357,1 @@\n-        short res = Short.MAX_VALUE;\n+        short res = UMIN_IDENTITY;\n@@ -4250,8 +4371,1 @@\n-        short ra = Short.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMIN, vmask);\n-            }\n-        }\n+        short ra = 0;\n@@ -4260,1 +4374,1 @@\n-            ra = Short.MAX_VALUE;\n+            ra = UMIN_IDENTITY;\n@@ -4263,1 +4377,3 @@\n-                ra = (short) VectorMath.minUnsigned(ra, av.reduceLanes(VectorOperators.UMIN, vmask));\n+                short v = av.reduceLanes(VectorOperators.UMIN, vmask);\n+                r[i] = v;\n+                ra = (short) VectorMath.minUnsigned(ra, v);\n@@ -4272,1 +4388,1 @@\n-        short res = Short.MIN_VALUE;\n+        short res = UMAX_IDENTITY;\n@@ -4281,1 +4397,1 @@\n-        short res = Short.MIN_VALUE;\n+        short res = UMAX_IDENTITY;\n@@ -4293,8 +4409,1 @@\n-        short ra = Short.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMAX);\n-            }\n-        }\n+        short ra = 0;\n@@ -4303,1 +4412,1 @@\n-            ra = Short.MIN_VALUE;\n+            ra = UMAX_IDENTITY;\n@@ -4306,1 +4415,3 @@\n-                ra = (short) VectorMath.maxUnsigned(ra, av.reduceLanes(VectorOperators.UMAX));\n+                short v = av.reduceLanes(VectorOperators.UMAX);\n+                r[i] = v;\n+                ra = (short) VectorMath.maxUnsigned(ra, v);\n@@ -4314,0 +4425,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void UMAXReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = UMAX_IDENTITY;\n+\n+        Assert.assertEquals((short) VectorMath.maxUnsigned(id, id), id,\n+                            \"UMAX(UMAX_IDENTITY, UMAX_IDENTITY) != UMAX_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) VectorMath.maxUnsigned(id, x), x);\n+                Assert.assertEquals((short) VectorMath.maxUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) VectorMath.maxUnsigned(id, x), x,\n+                                \"UMAX(UMAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) VectorMath.maxUnsigned(x, id), x,\n+                                \"UMAX(\" + x + \", UMAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4315,1 +4449,1 @@\n-        short res = Short.MIN_VALUE;\n+        short res = UMAX_IDENTITY;\n@@ -4325,1 +4459,1 @@\n-        short res = Short.MIN_VALUE;\n+        short res = UMAX_IDENTITY;\n@@ -4339,8 +4473,1 @@\n-        short ra = Short.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMAX, vmask);\n-            }\n-        }\n+        short ra = 0;\n@@ -4349,1 +4476,1 @@\n-            ra = Short.MIN_VALUE;\n+            ra = UMAX_IDENTITY;\n@@ -4352,1 +4479,3 @@\n-                ra = (short) VectorMath.maxUnsigned(ra, av.reduceLanes(VectorOperators.UMAX, vmask));\n+                short v = av.reduceLanes(VectorOperators.UMAX, vmask);\n+                r[i] = v;\n+                ra = (short) VectorMath.maxUnsigned(ra, v);\n@@ -4361,1 +4490,1 @@\n-        short res = (short) 0;\n+        short res = FIRST_NONZERO_IDENTITY;\n@@ -4370,1 +4499,1 @@\n-        short res = (short) 0;\n+        short res = FIRST_NONZERO_IDENTITY;\n@@ -4382,8 +4511,1 @@\n-        short ra = (short) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n-            }\n-        }\n+        short ra = 0;\n@@ -4392,1 +4514,1 @@\n-            ra = (short) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -4395,1 +4517,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO));\n+                short v = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -4403,0 +4527,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void FIRST_NONZEROReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = FIRST_NONZERO_IDENTITY;\n+\n+        Assert.assertEquals(firstNonZero(id, id), id,\n+                            \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, FIRST_NONZERO_IDENTITY) != FIRST_NONZERO_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals(firstNonZero(id, x), x);\n+                Assert.assertEquals(firstNonZero(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals(firstNonZero(id, x), x,\n+                                \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals(firstNonZero(x, id), x,\n+                                \"FIRST_NONZERO(\" + x + \", FIRST_NONZERO_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4404,1 +4551,1 @@\n-        short res = (short) 0;\n+        short res = FIRST_NONZERO_IDENTITY;\n@@ -4414,1 +4561,1 @@\n-        short res = (short) 0;\n+        short res = FIRST_NONZERO_IDENTITY;\n@@ -4428,8 +4575,1 @@\n-        short ra = (short) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n-            }\n-        }\n+        short ra = 0;\n@@ -4438,1 +4578,1 @@\n-            ra = (short) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -4441,1 +4581,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask));\n+                short v = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -4498,1 +4640,1 @@\n-        short res = 0;\n+        short res = SUADD_IDENTITY;\n@@ -4507,1 +4649,1 @@\n-        short res = 0;\n+        short res = SUADD_IDENTITY;\n@@ -4522,0 +4664,1 @@\n+            ra = SUADD_IDENTITY;\n@@ -4524,9 +4667,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.SUADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                ra = (short) VectorMath.addSaturatingUnsigned(ra, av.reduceLanes(VectorOperators.SUADD));\n+                short v = av.reduceLanes(VectorOperators.SUADD);\n+                r[i] = v;\n+                ra = (short) VectorMath.addSaturatingUnsigned(ra, v);\n@@ -4540,0 +4677,23 @@\n+    @Test(dataProvider = \"shortSaturatingUnaryOpProvider\")\n+    static void SUADDReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = SUADD_IDENTITY;\n+\n+        Assert.assertEquals((short) VectorMath.addSaturatingUnsigned(id, id), id,\n+                            \"SUADD(SUADD_IDENTITY, SUADD_IDENTITY) != SUADD_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) VectorMath.addSaturatingUnsigned(id, x), x);\n+                Assert.assertEquals((short) VectorMath.addSaturatingUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) VectorMath.addSaturatingUnsigned(id, x), x,\n+                                \"SUADD(SUADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) VectorMath.addSaturatingUnsigned(x, id), x,\n+                                \"SUADD(\" + x + \", SUADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4541,1 +4701,1 @@\n-        short res = 0;\n+        short res = SUADD_IDENTITY;\n@@ -4551,1 +4711,1 @@\n-        short res = 0;\n+        short res = SUADD_IDENTITY;\n@@ -4567,0 +4727,1 @@\n+            ra = SUADD_IDENTITY;\n@@ -4569,9 +4730,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.SUADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                ra = (short) VectorMath.addSaturatingUnsigned(ra, av.reduceLanes(VectorOperators.SUADD, vmask));\n+                short v = av.reduceLanes(VectorOperators.SUADD, vmask);\n+                r[i] = v;\n+                ra = (short) VectorMath.addSaturatingUnsigned(ra, v);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/Short128VectorTests.java","additions":413,"deletions":258,"binary":false,"changes":671,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -66,1 +66,0 @@\n-\n@@ -69,0 +68,13 @@\n+    \/\/ Identity values for reduction operations\n+    private static final short ADD_IDENTITY = (short)0;\n+    private static final short AND_IDENTITY = (short)-1;\n+    private static final short FIRST_NONZERO_IDENTITY = (short)0;\n+    private static final short MAX_IDENTITY = Short.MIN_VALUE;\n+    private static final short MIN_IDENTITY = Short.MAX_VALUE;\n+    private static final short MUL_IDENTITY = (short)1;\n+    private static final short OR_IDENTITY = (short)0;\n+    private static final short SUADD_IDENTITY = (short)0;\n+    private static final short UMAX_IDENTITY = (short)0;   \/\/ Minimum unsigned value\n+    private static final short UMIN_IDENTITY = (short)-1;  \/\/ Maximum unsigned value\n+    private static final short XOR_IDENTITY = (short)0;\n+\n@@ -3560,1 +3572,1 @@\n-        short res = -1;\n+        short res = AND_IDENTITY;\n@@ -3569,1 +3581,1 @@\n-        short res = -1;\n+        short res = AND_IDENTITY;\n@@ -3581,8 +3593,1 @@\n-        short ra = -1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.AND);\n-            }\n-        }\n+        short ra = 0;\n@@ -3591,1 +3596,1 @@\n-            ra = -1;\n+            ra = AND_IDENTITY;\n@@ -3594,1 +3599,3 @@\n-                ra &= av.reduceLanes(VectorOperators.AND);\n+                short v = av.reduceLanes(VectorOperators.AND);\n+                r[i] = v;\n+                ra &= v;\n@@ -3602,0 +3609,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void ANDReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = AND_IDENTITY;\n+\n+        Assert.assertEquals((short) (id & id), id,\n+                            \"AND(AND_IDENTITY, AND_IDENTITY) != AND_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) (id & x), x);\n+                Assert.assertEquals((short) (x & id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) (id & x), x,\n+                                \"AND(AND_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) (x & id), x,\n+                                \"AND(\" + x + \", AND_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3603,1 +3633,1 @@\n-        short res = -1;\n+        short res = AND_IDENTITY;\n@@ -3613,1 +3643,1 @@\n-        short res = -1;\n+        short res = AND_IDENTITY;\n@@ -3627,8 +3657,1 @@\n-        short ra = -1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.AND, vmask);\n-            }\n-        }\n+        short ra = 0;\n@@ -3637,1 +3660,1 @@\n-            ra = -1;\n+            ra = AND_IDENTITY;\n@@ -3640,1 +3663,3 @@\n-                ra &= av.reduceLanes(VectorOperators.AND, vmask);\n+                short v = av.reduceLanes(VectorOperators.AND, vmask);\n+                r[i] = v;\n+                ra &= v;\n@@ -3649,1 +3674,1 @@\n-        short res = 0;\n+        short res = OR_IDENTITY;\n@@ -3658,1 +3683,1 @@\n-        short res = 0;\n+        short res = OR_IDENTITY;\n@@ -3673,0 +3698,1 @@\n+            ra = OR_IDENTITY;\n@@ -3675,9 +3701,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.OR);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                ra |= av.reduceLanes(VectorOperators.OR);\n+                short v = av.reduceLanes(VectorOperators.OR);\n+                r[i] = v;\n+                ra |= v;\n@@ -3691,0 +3711,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void ORReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = OR_IDENTITY;\n+\n+        Assert.assertEquals((short) (id | id), id,\n+                            \"OR(OR_IDENTITY, OR_IDENTITY) != OR_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) (id | x), x);\n+                Assert.assertEquals((short) (x | id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) (id | x), x,\n+                                \"OR(OR_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) (x | id), x,\n+                                \"OR(\" + x + \", OR_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3692,1 +3735,1 @@\n-        short res = 0;\n+        short res = OR_IDENTITY;\n@@ -3702,1 +3745,1 @@\n-        short res = 0;\n+        short res = OR_IDENTITY;\n@@ -3719,0 +3762,1 @@\n+            ra = OR_IDENTITY;\n@@ -3721,9 +3765,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.OR, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                ra |= av.reduceLanes(VectorOperators.OR, vmask);\n+                short v = av.reduceLanes(VectorOperators.OR, vmask);\n+                r[i] = v;\n+                ra |= v;\n@@ -3738,1 +3776,1 @@\n-        short res = 0;\n+        short res = XOR_IDENTITY;\n@@ -3747,1 +3785,1 @@\n-        short res = 0;\n+        short res = XOR_IDENTITY;\n@@ -3762,0 +3800,1 @@\n+            ra = XOR_IDENTITY;\n@@ -3764,9 +3803,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.XOR);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                ra ^= av.reduceLanes(VectorOperators.XOR);\n+                short v = av.reduceLanes(VectorOperators.XOR);\n+                r[i] = v;\n+                ra ^= v;\n@@ -3780,0 +3813,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void XORReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = XOR_IDENTITY;\n+\n+        Assert.assertEquals((short) (id ^ id), id,\n+                            \"XOR(XOR_IDENTITY, XOR_IDENTITY) != XOR_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) (id ^ x), x);\n+                Assert.assertEquals((short) (x ^ id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) (id ^ x), x,\n+                                \"XOR(XOR_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) (x ^ id), x,\n+                                \"XOR(\" + x + \", XOR_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3781,1 +3837,1 @@\n-        short res = 0;\n+        short res = XOR_IDENTITY;\n@@ -3791,1 +3847,1 @@\n-        short res = 0;\n+        short res = XOR_IDENTITY;\n@@ -3808,0 +3864,1 @@\n+            ra = XOR_IDENTITY;\n@@ -3810,9 +3867,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.XOR, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                ra ^= av.reduceLanes(VectorOperators.XOR, vmask);\n+                short v = av.reduceLanes(VectorOperators.XOR, vmask);\n+                r[i] = v;\n+                ra ^= v;\n@@ -3827,1 +3878,1 @@\n-        short res = 0;\n+        short res = ADD_IDENTITY;\n@@ -3836,1 +3887,1 @@\n-        short res = 0;\n+        short res = ADD_IDENTITY;\n@@ -3851,0 +3902,1 @@\n+            ra = ADD_IDENTITY;\n@@ -3853,9 +3905,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD);\n+                short v = av.reduceLanes(VectorOperators.ADD);\n+                r[i] = v;\n+                ra += v;\n@@ -3869,0 +3915,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void ADDReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = ADD_IDENTITY;\n+\n+        Assert.assertEquals((short) (id + id), id,\n+                            \"ADD(ADD_IDENTITY, ADD_IDENTITY) != ADD_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) (id + x), x);\n+                Assert.assertEquals((short) (x + id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) (id + x), x,\n+                                \"ADD(ADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) (x + id), x,\n+                                \"ADD(\" + x + \", ADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3870,1 +3939,1 @@\n-        short res = 0;\n+        short res = ADD_IDENTITY;\n@@ -3880,1 +3949,1 @@\n-        short res = 0;\n+        short res = ADD_IDENTITY;\n@@ -3897,0 +3966,1 @@\n+            ra = ADD_IDENTITY;\n@@ -3899,9 +3969,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD, vmask);\n+                short v = av.reduceLanes(VectorOperators.ADD, vmask);\n+                r[i] = v;\n+                ra += v;\n@@ -3916,1 +3980,1 @@\n-        short res = 1;\n+        short res = MUL_IDENTITY;\n@@ -3925,1 +3989,1 @@\n-        short res = 1;\n+        short res = MUL_IDENTITY;\n@@ -3937,8 +4001,1 @@\n-        short ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL);\n-            }\n-        }\n+        short ra = 0;\n@@ -3947,1 +4004,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -3950,1 +4007,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL);\n+                short v = av.reduceLanes(VectorOperators.MUL);\n+                r[i] = v;\n+                ra *= v;\n@@ -3958,0 +4017,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void MULReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = MUL_IDENTITY;\n+\n+        Assert.assertEquals((short) (id * id), id,\n+                            \"MUL(MUL_IDENTITY, MUL_IDENTITY) != MUL_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) (id * x), x);\n+                Assert.assertEquals((short) (x * id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) (id * x), x,\n+                                \"MUL(MUL_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) (x * id), x,\n+                                \"MUL(\" + x + \", MUL_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3959,1 +4041,1 @@\n-        short res = 1;\n+        short res = MUL_IDENTITY;\n@@ -3969,1 +4051,1 @@\n-        short res = 1;\n+        short res = MUL_IDENTITY;\n@@ -3983,8 +4065,1 @@\n-        short ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL, vmask);\n-            }\n-        }\n+        short ra = 0;\n@@ -3993,1 +4068,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -3996,1 +4071,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL, vmask);\n+                short v = av.reduceLanes(VectorOperators.MUL, vmask);\n+                r[i] = v;\n+                ra *= v;\n@@ -4005,1 +4082,1 @@\n-        short res = Short.MAX_VALUE;\n+        short res = MIN_IDENTITY;\n@@ -4014,1 +4091,1 @@\n-        short res = Short.MAX_VALUE;\n+        short res = MIN_IDENTITY;\n@@ -4026,8 +4103,1 @@\n-        short ra = Short.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN);\n-            }\n-        }\n+        short ra = 0;\n@@ -4036,1 +4106,1 @@\n-            ra = Short.MAX_VALUE;\n+            ra = MIN_IDENTITY;\n@@ -4039,1 +4109,3 @@\n-                ra = (short) Math.min(ra, av.reduceLanes(VectorOperators.MIN));\n+                short v = av.reduceLanes(VectorOperators.MIN);\n+                r[i] = v;\n+                ra = (short) Math.min(ra, v);\n@@ -4047,0 +4119,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void MINReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = MIN_IDENTITY;\n+\n+        Assert.assertEquals((short) Math.min(id, id), id,\n+                            \"MIN(MIN_IDENTITY, MIN_IDENTITY) != MIN_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) Math.min(id, x), x);\n+                Assert.assertEquals((short) Math.min(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) Math.min(id, x), x,\n+                                \"MIN(MIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) Math.min(x, id), x,\n+                                \"MIN(\" + x + \", MIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4048,1 +4143,1 @@\n-        short res = Short.MAX_VALUE;\n+        short res = MIN_IDENTITY;\n@@ -4058,1 +4153,1 @@\n-        short res = Short.MAX_VALUE;\n+        short res = MIN_IDENTITY;\n@@ -4072,8 +4167,1 @@\n-        short ra = Short.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN, vmask);\n-            }\n-        }\n+        short ra = 0;\n@@ -4082,1 +4170,1 @@\n-            ra = Short.MAX_VALUE;\n+            ra = MIN_IDENTITY;\n@@ -4085,1 +4173,3 @@\n-                ra = (short) Math.min(ra, av.reduceLanes(VectorOperators.MIN, vmask));\n+                short v = av.reduceLanes(VectorOperators.MIN, vmask);\n+                r[i] = v;\n+                ra = (short) Math.min(ra, v);\n@@ -4094,1 +4184,1 @@\n-        short res = Short.MIN_VALUE;\n+        short res = MAX_IDENTITY;\n@@ -4103,1 +4193,1 @@\n-        short res = Short.MIN_VALUE;\n+        short res = MAX_IDENTITY;\n@@ -4115,8 +4205,1 @@\n-        short ra = Short.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX);\n-            }\n-        }\n+        short ra = 0;\n@@ -4125,1 +4208,1 @@\n-            ra = Short.MIN_VALUE;\n+            ra = MAX_IDENTITY;\n@@ -4128,1 +4211,3 @@\n-                ra = (short) Math.max(ra, av.reduceLanes(VectorOperators.MAX));\n+                short v = av.reduceLanes(VectorOperators.MAX);\n+                r[i] = v;\n+                ra = (short) Math.max(ra, v);\n@@ -4136,0 +4221,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void MAXReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = MAX_IDENTITY;\n+\n+        Assert.assertEquals((short) Math.max(id, id), id,\n+                            \"MAX(MAX_IDENTITY, MAX_IDENTITY) != MAX_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) Math.max(id, x), x);\n+                Assert.assertEquals((short) Math.max(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) Math.max(id, x), x,\n+                                \"MAX(MAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) Math.max(x, id), x,\n+                                \"MAX(\" + x + \", MAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4137,1 +4245,1 @@\n-        short res = Short.MIN_VALUE;\n+        short res = MAX_IDENTITY;\n@@ -4147,1 +4255,1 @@\n-        short res = Short.MIN_VALUE;\n+        short res = MAX_IDENTITY;\n@@ -4161,8 +4269,1 @@\n-        short ra = Short.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX, vmask);\n-            }\n-        }\n+        short ra = 0;\n@@ -4171,1 +4272,1 @@\n-            ra = Short.MIN_VALUE;\n+            ra = MAX_IDENTITY;\n@@ -4174,1 +4275,3 @@\n-                ra = (short) Math.max(ra, av.reduceLanes(VectorOperators.MAX, vmask));\n+                short v = av.reduceLanes(VectorOperators.MAX, vmask);\n+                r[i] = v;\n+                ra = (short) Math.max(ra, v);\n@@ -4183,1 +4286,1 @@\n-        short res = Short.MAX_VALUE;\n+        short res = UMIN_IDENTITY;\n@@ -4192,1 +4295,1 @@\n-        short res = Short.MAX_VALUE;\n+        short res = UMIN_IDENTITY;\n@@ -4204,8 +4307,1 @@\n-        short ra = Short.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMIN);\n-            }\n-        }\n+        short ra = 0;\n@@ -4214,1 +4310,1 @@\n-            ra = Short.MAX_VALUE;\n+            ra = UMIN_IDENTITY;\n@@ -4217,1 +4313,3 @@\n-                ra = (short) VectorMath.minUnsigned(ra, av.reduceLanes(VectorOperators.UMIN));\n+                short v = av.reduceLanes(VectorOperators.UMIN);\n+                r[i] = v;\n+                ra = (short) VectorMath.minUnsigned(ra, v);\n@@ -4225,0 +4323,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void UMINReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = UMIN_IDENTITY;\n+\n+        Assert.assertEquals((short) VectorMath.minUnsigned(id, id), id,\n+                            \"UMIN(UMIN_IDENTITY, UMIN_IDENTITY) != UMIN_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) VectorMath.minUnsigned(id, x), x);\n+                Assert.assertEquals((short) VectorMath.minUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) VectorMath.minUnsigned(id, x), x,\n+                                \"UMIN(UMIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) VectorMath.minUnsigned(x, id), x,\n+                                \"UMIN(\" + x + \", UMIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4226,1 +4347,1 @@\n-        short res = Short.MAX_VALUE;\n+        short res = UMIN_IDENTITY;\n@@ -4236,1 +4357,1 @@\n-        short res = Short.MAX_VALUE;\n+        short res = UMIN_IDENTITY;\n@@ -4250,8 +4371,1 @@\n-        short ra = Short.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMIN, vmask);\n-            }\n-        }\n+        short ra = 0;\n@@ -4260,1 +4374,1 @@\n-            ra = Short.MAX_VALUE;\n+            ra = UMIN_IDENTITY;\n@@ -4263,1 +4377,3 @@\n-                ra = (short) VectorMath.minUnsigned(ra, av.reduceLanes(VectorOperators.UMIN, vmask));\n+                short v = av.reduceLanes(VectorOperators.UMIN, vmask);\n+                r[i] = v;\n+                ra = (short) VectorMath.minUnsigned(ra, v);\n@@ -4272,1 +4388,1 @@\n-        short res = Short.MIN_VALUE;\n+        short res = UMAX_IDENTITY;\n@@ -4281,1 +4397,1 @@\n-        short res = Short.MIN_VALUE;\n+        short res = UMAX_IDENTITY;\n@@ -4293,8 +4409,1 @@\n-        short ra = Short.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMAX);\n-            }\n-        }\n+        short ra = 0;\n@@ -4303,1 +4412,1 @@\n-            ra = Short.MIN_VALUE;\n+            ra = UMAX_IDENTITY;\n@@ -4306,1 +4415,3 @@\n-                ra = (short) VectorMath.maxUnsigned(ra, av.reduceLanes(VectorOperators.UMAX));\n+                short v = av.reduceLanes(VectorOperators.UMAX);\n+                r[i] = v;\n+                ra = (short) VectorMath.maxUnsigned(ra, v);\n@@ -4314,0 +4425,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void UMAXReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = UMAX_IDENTITY;\n+\n+        Assert.assertEquals((short) VectorMath.maxUnsigned(id, id), id,\n+                            \"UMAX(UMAX_IDENTITY, UMAX_IDENTITY) != UMAX_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) VectorMath.maxUnsigned(id, x), x);\n+                Assert.assertEquals((short) VectorMath.maxUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) VectorMath.maxUnsigned(id, x), x,\n+                                \"UMAX(UMAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) VectorMath.maxUnsigned(x, id), x,\n+                                \"UMAX(\" + x + \", UMAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4315,1 +4449,1 @@\n-        short res = Short.MIN_VALUE;\n+        short res = UMAX_IDENTITY;\n@@ -4325,1 +4459,1 @@\n-        short res = Short.MIN_VALUE;\n+        short res = UMAX_IDENTITY;\n@@ -4339,8 +4473,1 @@\n-        short ra = Short.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMAX, vmask);\n-            }\n-        }\n+        short ra = 0;\n@@ -4349,1 +4476,1 @@\n-            ra = Short.MIN_VALUE;\n+            ra = UMAX_IDENTITY;\n@@ -4352,1 +4479,3 @@\n-                ra = (short) VectorMath.maxUnsigned(ra, av.reduceLanes(VectorOperators.UMAX, vmask));\n+                short v = av.reduceLanes(VectorOperators.UMAX, vmask);\n+                r[i] = v;\n+                ra = (short) VectorMath.maxUnsigned(ra, v);\n@@ -4361,1 +4490,1 @@\n-        short res = (short) 0;\n+        short res = FIRST_NONZERO_IDENTITY;\n@@ -4370,1 +4499,1 @@\n-        short res = (short) 0;\n+        short res = FIRST_NONZERO_IDENTITY;\n@@ -4382,8 +4511,1 @@\n-        short ra = (short) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n-            }\n-        }\n+        short ra = 0;\n@@ -4392,1 +4514,1 @@\n-            ra = (short) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -4395,1 +4517,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO));\n+                short v = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -4403,0 +4527,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void FIRST_NONZEROReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = FIRST_NONZERO_IDENTITY;\n+\n+        Assert.assertEquals(firstNonZero(id, id), id,\n+                            \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, FIRST_NONZERO_IDENTITY) != FIRST_NONZERO_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals(firstNonZero(id, x), x);\n+                Assert.assertEquals(firstNonZero(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals(firstNonZero(id, x), x,\n+                                \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals(firstNonZero(x, id), x,\n+                                \"FIRST_NONZERO(\" + x + \", FIRST_NONZERO_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4404,1 +4551,1 @@\n-        short res = (short) 0;\n+        short res = FIRST_NONZERO_IDENTITY;\n@@ -4414,1 +4561,1 @@\n-        short res = (short) 0;\n+        short res = FIRST_NONZERO_IDENTITY;\n@@ -4428,8 +4575,1 @@\n-        short ra = (short) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n-            }\n-        }\n+        short ra = 0;\n@@ -4438,1 +4578,1 @@\n-            ra = (short) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -4441,1 +4581,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask));\n+                short v = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -4498,1 +4640,1 @@\n-        short res = 0;\n+        short res = SUADD_IDENTITY;\n@@ -4507,1 +4649,1 @@\n-        short res = 0;\n+        short res = SUADD_IDENTITY;\n@@ -4522,0 +4664,1 @@\n+            ra = SUADD_IDENTITY;\n@@ -4524,9 +4667,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.SUADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                ra = (short) VectorMath.addSaturatingUnsigned(ra, av.reduceLanes(VectorOperators.SUADD));\n+                short v = av.reduceLanes(VectorOperators.SUADD);\n+                r[i] = v;\n+                ra = (short) VectorMath.addSaturatingUnsigned(ra, v);\n@@ -4540,0 +4677,23 @@\n+    @Test(dataProvider = \"shortSaturatingUnaryOpProvider\")\n+    static void SUADDReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = SUADD_IDENTITY;\n+\n+        Assert.assertEquals((short) VectorMath.addSaturatingUnsigned(id, id), id,\n+                            \"SUADD(SUADD_IDENTITY, SUADD_IDENTITY) != SUADD_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) VectorMath.addSaturatingUnsigned(id, x), x);\n+                Assert.assertEquals((short) VectorMath.addSaturatingUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) VectorMath.addSaturatingUnsigned(id, x), x,\n+                                \"SUADD(SUADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) VectorMath.addSaturatingUnsigned(x, id), x,\n+                                \"SUADD(\" + x + \", SUADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4541,1 +4701,1 @@\n-        short res = 0;\n+        short res = SUADD_IDENTITY;\n@@ -4551,1 +4711,1 @@\n-        short res = 0;\n+        short res = SUADD_IDENTITY;\n@@ -4567,0 +4727,1 @@\n+            ra = SUADD_IDENTITY;\n@@ -4569,9 +4730,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.SUADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                ra = (short) VectorMath.addSaturatingUnsigned(ra, av.reduceLanes(VectorOperators.SUADD, vmask));\n+                short v = av.reduceLanes(VectorOperators.SUADD, vmask);\n+                r[i] = v;\n+                ra = (short) VectorMath.addSaturatingUnsigned(ra, v);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/Short256VectorTests.java","additions":413,"deletions":258,"binary":false,"changes":671,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -66,1 +66,0 @@\n-\n@@ -69,0 +68,13 @@\n+    \/\/ Identity values for reduction operations\n+    private static final short ADD_IDENTITY = (short)0;\n+    private static final short AND_IDENTITY = (short)-1;\n+    private static final short FIRST_NONZERO_IDENTITY = (short)0;\n+    private static final short MAX_IDENTITY = Short.MIN_VALUE;\n+    private static final short MIN_IDENTITY = Short.MAX_VALUE;\n+    private static final short MUL_IDENTITY = (short)1;\n+    private static final short OR_IDENTITY = (short)0;\n+    private static final short SUADD_IDENTITY = (short)0;\n+    private static final short UMAX_IDENTITY = (short)0;   \/\/ Minimum unsigned value\n+    private static final short UMIN_IDENTITY = (short)-1;  \/\/ Maximum unsigned value\n+    private static final short XOR_IDENTITY = (short)0;\n+\n@@ -3560,1 +3572,1 @@\n-        short res = -1;\n+        short res = AND_IDENTITY;\n@@ -3569,1 +3581,1 @@\n-        short res = -1;\n+        short res = AND_IDENTITY;\n@@ -3581,8 +3593,1 @@\n-        short ra = -1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.AND);\n-            }\n-        }\n+        short ra = 0;\n@@ -3591,1 +3596,1 @@\n-            ra = -1;\n+            ra = AND_IDENTITY;\n@@ -3594,1 +3599,3 @@\n-                ra &= av.reduceLanes(VectorOperators.AND);\n+                short v = av.reduceLanes(VectorOperators.AND);\n+                r[i] = v;\n+                ra &= v;\n@@ -3602,0 +3609,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void ANDReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = AND_IDENTITY;\n+\n+        Assert.assertEquals((short) (id & id), id,\n+                            \"AND(AND_IDENTITY, AND_IDENTITY) != AND_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) (id & x), x);\n+                Assert.assertEquals((short) (x & id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) (id & x), x,\n+                                \"AND(AND_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) (x & id), x,\n+                                \"AND(\" + x + \", AND_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3603,1 +3633,1 @@\n-        short res = -1;\n+        short res = AND_IDENTITY;\n@@ -3613,1 +3643,1 @@\n-        short res = -1;\n+        short res = AND_IDENTITY;\n@@ -3627,8 +3657,1 @@\n-        short ra = -1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.AND, vmask);\n-            }\n-        }\n+        short ra = 0;\n@@ -3637,1 +3660,1 @@\n-            ra = -1;\n+            ra = AND_IDENTITY;\n@@ -3640,1 +3663,3 @@\n-                ra &= av.reduceLanes(VectorOperators.AND, vmask);\n+                short v = av.reduceLanes(VectorOperators.AND, vmask);\n+                r[i] = v;\n+                ra &= v;\n@@ -3649,1 +3674,1 @@\n-        short res = 0;\n+        short res = OR_IDENTITY;\n@@ -3658,1 +3683,1 @@\n-        short res = 0;\n+        short res = OR_IDENTITY;\n@@ -3673,0 +3698,1 @@\n+            ra = OR_IDENTITY;\n@@ -3675,9 +3701,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.OR);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                ra |= av.reduceLanes(VectorOperators.OR);\n+                short v = av.reduceLanes(VectorOperators.OR);\n+                r[i] = v;\n+                ra |= v;\n@@ -3691,0 +3711,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void ORReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = OR_IDENTITY;\n+\n+        Assert.assertEquals((short) (id | id), id,\n+                            \"OR(OR_IDENTITY, OR_IDENTITY) != OR_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) (id | x), x);\n+                Assert.assertEquals((short) (x | id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) (id | x), x,\n+                                \"OR(OR_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) (x | id), x,\n+                                \"OR(\" + x + \", OR_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3692,1 +3735,1 @@\n-        short res = 0;\n+        short res = OR_IDENTITY;\n@@ -3702,1 +3745,1 @@\n-        short res = 0;\n+        short res = OR_IDENTITY;\n@@ -3719,0 +3762,1 @@\n+            ra = OR_IDENTITY;\n@@ -3721,9 +3765,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.OR, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                ra |= av.reduceLanes(VectorOperators.OR, vmask);\n+                short v = av.reduceLanes(VectorOperators.OR, vmask);\n+                r[i] = v;\n+                ra |= v;\n@@ -3738,1 +3776,1 @@\n-        short res = 0;\n+        short res = XOR_IDENTITY;\n@@ -3747,1 +3785,1 @@\n-        short res = 0;\n+        short res = XOR_IDENTITY;\n@@ -3762,0 +3800,1 @@\n+            ra = XOR_IDENTITY;\n@@ -3764,9 +3803,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.XOR);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                ra ^= av.reduceLanes(VectorOperators.XOR);\n+                short v = av.reduceLanes(VectorOperators.XOR);\n+                r[i] = v;\n+                ra ^= v;\n@@ -3780,0 +3813,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void XORReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = XOR_IDENTITY;\n+\n+        Assert.assertEquals((short) (id ^ id), id,\n+                            \"XOR(XOR_IDENTITY, XOR_IDENTITY) != XOR_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) (id ^ x), x);\n+                Assert.assertEquals((short) (x ^ id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) (id ^ x), x,\n+                                \"XOR(XOR_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) (x ^ id), x,\n+                                \"XOR(\" + x + \", XOR_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3781,1 +3837,1 @@\n-        short res = 0;\n+        short res = XOR_IDENTITY;\n@@ -3791,1 +3847,1 @@\n-        short res = 0;\n+        short res = XOR_IDENTITY;\n@@ -3808,0 +3864,1 @@\n+            ra = XOR_IDENTITY;\n@@ -3810,9 +3867,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.XOR, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                ra ^= av.reduceLanes(VectorOperators.XOR, vmask);\n+                short v = av.reduceLanes(VectorOperators.XOR, vmask);\n+                r[i] = v;\n+                ra ^= v;\n@@ -3827,1 +3878,1 @@\n-        short res = 0;\n+        short res = ADD_IDENTITY;\n@@ -3836,1 +3887,1 @@\n-        short res = 0;\n+        short res = ADD_IDENTITY;\n@@ -3851,0 +3902,1 @@\n+            ra = ADD_IDENTITY;\n@@ -3853,9 +3905,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD);\n+                short v = av.reduceLanes(VectorOperators.ADD);\n+                r[i] = v;\n+                ra += v;\n@@ -3869,0 +3915,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void ADDReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = ADD_IDENTITY;\n+\n+        Assert.assertEquals((short) (id + id), id,\n+                            \"ADD(ADD_IDENTITY, ADD_IDENTITY) != ADD_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) (id + x), x);\n+                Assert.assertEquals((short) (x + id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) (id + x), x,\n+                                \"ADD(ADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) (x + id), x,\n+                                \"ADD(\" + x + \", ADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3870,1 +3939,1 @@\n-        short res = 0;\n+        short res = ADD_IDENTITY;\n@@ -3880,1 +3949,1 @@\n-        short res = 0;\n+        short res = ADD_IDENTITY;\n@@ -3897,0 +3966,1 @@\n+            ra = ADD_IDENTITY;\n@@ -3899,9 +3969,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD, vmask);\n+                short v = av.reduceLanes(VectorOperators.ADD, vmask);\n+                r[i] = v;\n+                ra += v;\n@@ -3916,1 +3980,1 @@\n-        short res = 1;\n+        short res = MUL_IDENTITY;\n@@ -3925,1 +3989,1 @@\n-        short res = 1;\n+        short res = MUL_IDENTITY;\n@@ -3937,8 +4001,1 @@\n-        short ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL);\n-            }\n-        }\n+        short ra = 0;\n@@ -3947,1 +4004,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -3950,1 +4007,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL);\n+                short v = av.reduceLanes(VectorOperators.MUL);\n+                r[i] = v;\n+                ra *= v;\n@@ -3958,0 +4017,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void MULReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = MUL_IDENTITY;\n+\n+        Assert.assertEquals((short) (id * id), id,\n+                            \"MUL(MUL_IDENTITY, MUL_IDENTITY) != MUL_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) (id * x), x);\n+                Assert.assertEquals((short) (x * id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) (id * x), x,\n+                                \"MUL(MUL_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) (x * id), x,\n+                                \"MUL(\" + x + \", MUL_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3959,1 +4041,1 @@\n-        short res = 1;\n+        short res = MUL_IDENTITY;\n@@ -3969,1 +4051,1 @@\n-        short res = 1;\n+        short res = MUL_IDENTITY;\n@@ -3983,8 +4065,1 @@\n-        short ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL, vmask);\n-            }\n-        }\n+        short ra = 0;\n@@ -3993,1 +4068,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -3996,1 +4071,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL, vmask);\n+                short v = av.reduceLanes(VectorOperators.MUL, vmask);\n+                r[i] = v;\n+                ra *= v;\n@@ -4005,1 +4082,1 @@\n-        short res = Short.MAX_VALUE;\n+        short res = MIN_IDENTITY;\n@@ -4014,1 +4091,1 @@\n-        short res = Short.MAX_VALUE;\n+        short res = MIN_IDENTITY;\n@@ -4026,8 +4103,1 @@\n-        short ra = Short.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN);\n-            }\n-        }\n+        short ra = 0;\n@@ -4036,1 +4106,1 @@\n-            ra = Short.MAX_VALUE;\n+            ra = MIN_IDENTITY;\n@@ -4039,1 +4109,3 @@\n-                ra = (short) Math.min(ra, av.reduceLanes(VectorOperators.MIN));\n+                short v = av.reduceLanes(VectorOperators.MIN);\n+                r[i] = v;\n+                ra = (short) Math.min(ra, v);\n@@ -4047,0 +4119,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void MINReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = MIN_IDENTITY;\n+\n+        Assert.assertEquals((short) Math.min(id, id), id,\n+                            \"MIN(MIN_IDENTITY, MIN_IDENTITY) != MIN_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) Math.min(id, x), x);\n+                Assert.assertEquals((short) Math.min(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) Math.min(id, x), x,\n+                                \"MIN(MIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) Math.min(x, id), x,\n+                                \"MIN(\" + x + \", MIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4048,1 +4143,1 @@\n-        short res = Short.MAX_VALUE;\n+        short res = MIN_IDENTITY;\n@@ -4058,1 +4153,1 @@\n-        short res = Short.MAX_VALUE;\n+        short res = MIN_IDENTITY;\n@@ -4072,8 +4167,1 @@\n-        short ra = Short.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN, vmask);\n-            }\n-        }\n+        short ra = 0;\n@@ -4082,1 +4170,1 @@\n-            ra = Short.MAX_VALUE;\n+            ra = MIN_IDENTITY;\n@@ -4085,1 +4173,3 @@\n-                ra = (short) Math.min(ra, av.reduceLanes(VectorOperators.MIN, vmask));\n+                short v = av.reduceLanes(VectorOperators.MIN, vmask);\n+                r[i] = v;\n+                ra = (short) Math.min(ra, v);\n@@ -4094,1 +4184,1 @@\n-        short res = Short.MIN_VALUE;\n+        short res = MAX_IDENTITY;\n@@ -4103,1 +4193,1 @@\n-        short res = Short.MIN_VALUE;\n+        short res = MAX_IDENTITY;\n@@ -4115,8 +4205,1 @@\n-        short ra = Short.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX);\n-            }\n-        }\n+        short ra = 0;\n@@ -4125,1 +4208,1 @@\n-            ra = Short.MIN_VALUE;\n+            ra = MAX_IDENTITY;\n@@ -4128,1 +4211,3 @@\n-                ra = (short) Math.max(ra, av.reduceLanes(VectorOperators.MAX));\n+                short v = av.reduceLanes(VectorOperators.MAX);\n+                r[i] = v;\n+                ra = (short) Math.max(ra, v);\n@@ -4136,0 +4221,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void MAXReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = MAX_IDENTITY;\n+\n+        Assert.assertEquals((short) Math.max(id, id), id,\n+                            \"MAX(MAX_IDENTITY, MAX_IDENTITY) != MAX_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) Math.max(id, x), x);\n+                Assert.assertEquals((short) Math.max(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) Math.max(id, x), x,\n+                                \"MAX(MAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) Math.max(x, id), x,\n+                                \"MAX(\" + x + \", MAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4137,1 +4245,1 @@\n-        short res = Short.MIN_VALUE;\n+        short res = MAX_IDENTITY;\n@@ -4147,1 +4255,1 @@\n-        short res = Short.MIN_VALUE;\n+        short res = MAX_IDENTITY;\n@@ -4161,8 +4269,1 @@\n-        short ra = Short.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX, vmask);\n-            }\n-        }\n+        short ra = 0;\n@@ -4171,1 +4272,1 @@\n-            ra = Short.MIN_VALUE;\n+            ra = MAX_IDENTITY;\n@@ -4174,1 +4275,3 @@\n-                ra = (short) Math.max(ra, av.reduceLanes(VectorOperators.MAX, vmask));\n+                short v = av.reduceLanes(VectorOperators.MAX, vmask);\n+                r[i] = v;\n+                ra = (short) Math.max(ra, v);\n@@ -4183,1 +4286,1 @@\n-        short res = Short.MAX_VALUE;\n+        short res = UMIN_IDENTITY;\n@@ -4192,1 +4295,1 @@\n-        short res = Short.MAX_VALUE;\n+        short res = UMIN_IDENTITY;\n@@ -4204,8 +4307,1 @@\n-        short ra = Short.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMIN);\n-            }\n-        }\n+        short ra = 0;\n@@ -4214,1 +4310,1 @@\n-            ra = Short.MAX_VALUE;\n+            ra = UMIN_IDENTITY;\n@@ -4217,1 +4313,3 @@\n-                ra = (short) VectorMath.minUnsigned(ra, av.reduceLanes(VectorOperators.UMIN));\n+                short v = av.reduceLanes(VectorOperators.UMIN);\n+                r[i] = v;\n+                ra = (short) VectorMath.minUnsigned(ra, v);\n@@ -4225,0 +4323,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void UMINReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = UMIN_IDENTITY;\n+\n+        Assert.assertEquals((short) VectorMath.minUnsigned(id, id), id,\n+                            \"UMIN(UMIN_IDENTITY, UMIN_IDENTITY) != UMIN_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) VectorMath.minUnsigned(id, x), x);\n+                Assert.assertEquals((short) VectorMath.minUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) VectorMath.minUnsigned(id, x), x,\n+                                \"UMIN(UMIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) VectorMath.minUnsigned(x, id), x,\n+                                \"UMIN(\" + x + \", UMIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4226,1 +4347,1 @@\n-        short res = Short.MAX_VALUE;\n+        short res = UMIN_IDENTITY;\n@@ -4236,1 +4357,1 @@\n-        short res = Short.MAX_VALUE;\n+        short res = UMIN_IDENTITY;\n@@ -4250,8 +4371,1 @@\n-        short ra = Short.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMIN, vmask);\n-            }\n-        }\n+        short ra = 0;\n@@ -4260,1 +4374,1 @@\n-            ra = Short.MAX_VALUE;\n+            ra = UMIN_IDENTITY;\n@@ -4263,1 +4377,3 @@\n-                ra = (short) VectorMath.minUnsigned(ra, av.reduceLanes(VectorOperators.UMIN, vmask));\n+                short v = av.reduceLanes(VectorOperators.UMIN, vmask);\n+                r[i] = v;\n+                ra = (short) VectorMath.minUnsigned(ra, v);\n@@ -4272,1 +4388,1 @@\n-        short res = Short.MIN_VALUE;\n+        short res = UMAX_IDENTITY;\n@@ -4281,1 +4397,1 @@\n-        short res = Short.MIN_VALUE;\n+        short res = UMAX_IDENTITY;\n@@ -4293,8 +4409,1 @@\n-        short ra = Short.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMAX);\n-            }\n-        }\n+        short ra = 0;\n@@ -4303,1 +4412,1 @@\n-            ra = Short.MIN_VALUE;\n+            ra = UMAX_IDENTITY;\n@@ -4306,1 +4415,3 @@\n-                ra = (short) VectorMath.maxUnsigned(ra, av.reduceLanes(VectorOperators.UMAX));\n+                short v = av.reduceLanes(VectorOperators.UMAX);\n+                r[i] = v;\n+                ra = (short) VectorMath.maxUnsigned(ra, v);\n@@ -4314,0 +4425,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void UMAXReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = UMAX_IDENTITY;\n+\n+        Assert.assertEquals((short) VectorMath.maxUnsigned(id, id), id,\n+                            \"UMAX(UMAX_IDENTITY, UMAX_IDENTITY) != UMAX_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) VectorMath.maxUnsigned(id, x), x);\n+                Assert.assertEquals((short) VectorMath.maxUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) VectorMath.maxUnsigned(id, x), x,\n+                                \"UMAX(UMAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) VectorMath.maxUnsigned(x, id), x,\n+                                \"UMAX(\" + x + \", UMAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4315,1 +4449,1 @@\n-        short res = Short.MIN_VALUE;\n+        short res = UMAX_IDENTITY;\n@@ -4325,1 +4459,1 @@\n-        short res = Short.MIN_VALUE;\n+        short res = UMAX_IDENTITY;\n@@ -4339,8 +4473,1 @@\n-        short ra = Short.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMAX, vmask);\n-            }\n-        }\n+        short ra = 0;\n@@ -4349,1 +4476,1 @@\n-            ra = Short.MIN_VALUE;\n+            ra = UMAX_IDENTITY;\n@@ -4352,1 +4479,3 @@\n-                ra = (short) VectorMath.maxUnsigned(ra, av.reduceLanes(VectorOperators.UMAX, vmask));\n+                short v = av.reduceLanes(VectorOperators.UMAX, vmask);\n+                r[i] = v;\n+                ra = (short) VectorMath.maxUnsigned(ra, v);\n@@ -4361,1 +4490,1 @@\n-        short res = (short) 0;\n+        short res = FIRST_NONZERO_IDENTITY;\n@@ -4370,1 +4499,1 @@\n-        short res = (short) 0;\n+        short res = FIRST_NONZERO_IDENTITY;\n@@ -4382,8 +4511,1 @@\n-        short ra = (short) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n-            }\n-        }\n+        short ra = 0;\n@@ -4392,1 +4514,1 @@\n-            ra = (short) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -4395,1 +4517,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO));\n+                short v = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -4403,0 +4527,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void FIRST_NONZEROReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = FIRST_NONZERO_IDENTITY;\n+\n+        Assert.assertEquals(firstNonZero(id, id), id,\n+                            \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, FIRST_NONZERO_IDENTITY) != FIRST_NONZERO_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals(firstNonZero(id, x), x);\n+                Assert.assertEquals(firstNonZero(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals(firstNonZero(id, x), x,\n+                                \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals(firstNonZero(x, id), x,\n+                                \"FIRST_NONZERO(\" + x + \", FIRST_NONZERO_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4404,1 +4551,1 @@\n-        short res = (short) 0;\n+        short res = FIRST_NONZERO_IDENTITY;\n@@ -4414,1 +4561,1 @@\n-        short res = (short) 0;\n+        short res = FIRST_NONZERO_IDENTITY;\n@@ -4428,8 +4575,1 @@\n-        short ra = (short) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n-            }\n-        }\n+        short ra = 0;\n@@ -4438,1 +4578,1 @@\n-            ra = (short) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -4441,1 +4581,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask));\n+                short v = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -4498,1 +4640,1 @@\n-        short res = 0;\n+        short res = SUADD_IDENTITY;\n@@ -4507,1 +4649,1 @@\n-        short res = 0;\n+        short res = SUADD_IDENTITY;\n@@ -4522,0 +4664,1 @@\n+            ra = SUADD_IDENTITY;\n@@ -4524,9 +4667,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.SUADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                ra = (short) VectorMath.addSaturatingUnsigned(ra, av.reduceLanes(VectorOperators.SUADD));\n+                short v = av.reduceLanes(VectorOperators.SUADD);\n+                r[i] = v;\n+                ra = (short) VectorMath.addSaturatingUnsigned(ra, v);\n@@ -4540,0 +4677,23 @@\n+    @Test(dataProvider = \"shortSaturatingUnaryOpProvider\")\n+    static void SUADDReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = SUADD_IDENTITY;\n+\n+        Assert.assertEquals((short) VectorMath.addSaturatingUnsigned(id, id), id,\n+                            \"SUADD(SUADD_IDENTITY, SUADD_IDENTITY) != SUADD_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) VectorMath.addSaturatingUnsigned(id, x), x);\n+                Assert.assertEquals((short) VectorMath.addSaturatingUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) VectorMath.addSaturatingUnsigned(id, x), x,\n+                                \"SUADD(SUADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) VectorMath.addSaturatingUnsigned(x, id), x,\n+                                \"SUADD(\" + x + \", SUADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4541,1 +4701,1 @@\n-        short res = 0;\n+        short res = SUADD_IDENTITY;\n@@ -4551,1 +4711,1 @@\n-        short res = 0;\n+        short res = SUADD_IDENTITY;\n@@ -4567,0 +4727,1 @@\n+            ra = SUADD_IDENTITY;\n@@ -4569,9 +4730,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.SUADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                ra = (short) VectorMath.addSaturatingUnsigned(ra, av.reduceLanes(VectorOperators.SUADD, vmask));\n+                short v = av.reduceLanes(VectorOperators.SUADD, vmask);\n+                r[i] = v;\n+                ra = (short) VectorMath.addSaturatingUnsigned(ra, v);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/Short512VectorTests.java","additions":413,"deletions":258,"binary":false,"changes":671,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -66,1 +66,0 @@\n-\n@@ -69,0 +68,13 @@\n+    \/\/ Identity values for reduction operations\n+    private static final short ADD_IDENTITY = (short)0;\n+    private static final short AND_IDENTITY = (short)-1;\n+    private static final short FIRST_NONZERO_IDENTITY = (short)0;\n+    private static final short MAX_IDENTITY = Short.MIN_VALUE;\n+    private static final short MIN_IDENTITY = Short.MAX_VALUE;\n+    private static final short MUL_IDENTITY = (short)1;\n+    private static final short OR_IDENTITY = (short)0;\n+    private static final short SUADD_IDENTITY = (short)0;\n+    private static final short UMAX_IDENTITY = (short)0;   \/\/ Minimum unsigned value\n+    private static final short UMIN_IDENTITY = (short)-1;  \/\/ Maximum unsigned value\n+    private static final short XOR_IDENTITY = (short)0;\n+\n@@ -3560,1 +3572,1 @@\n-        short res = -1;\n+        short res = AND_IDENTITY;\n@@ -3569,1 +3581,1 @@\n-        short res = -1;\n+        short res = AND_IDENTITY;\n@@ -3581,8 +3593,1 @@\n-        short ra = -1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.AND);\n-            }\n-        }\n+        short ra = 0;\n@@ -3591,1 +3596,1 @@\n-            ra = -1;\n+            ra = AND_IDENTITY;\n@@ -3594,1 +3599,3 @@\n-                ra &= av.reduceLanes(VectorOperators.AND);\n+                short v = av.reduceLanes(VectorOperators.AND);\n+                r[i] = v;\n+                ra &= v;\n@@ -3602,0 +3609,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void ANDReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = AND_IDENTITY;\n+\n+        Assert.assertEquals((short) (id & id), id,\n+                            \"AND(AND_IDENTITY, AND_IDENTITY) != AND_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) (id & x), x);\n+                Assert.assertEquals((short) (x & id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) (id & x), x,\n+                                \"AND(AND_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) (x & id), x,\n+                                \"AND(\" + x + \", AND_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3603,1 +3633,1 @@\n-        short res = -1;\n+        short res = AND_IDENTITY;\n@@ -3613,1 +3643,1 @@\n-        short res = -1;\n+        short res = AND_IDENTITY;\n@@ -3627,8 +3657,1 @@\n-        short ra = -1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.AND, vmask);\n-            }\n-        }\n+        short ra = 0;\n@@ -3637,1 +3660,1 @@\n-            ra = -1;\n+            ra = AND_IDENTITY;\n@@ -3640,1 +3663,3 @@\n-                ra &= av.reduceLanes(VectorOperators.AND, vmask);\n+                short v = av.reduceLanes(VectorOperators.AND, vmask);\n+                r[i] = v;\n+                ra &= v;\n@@ -3649,1 +3674,1 @@\n-        short res = 0;\n+        short res = OR_IDENTITY;\n@@ -3658,1 +3683,1 @@\n-        short res = 0;\n+        short res = OR_IDENTITY;\n@@ -3673,0 +3698,1 @@\n+            ra = OR_IDENTITY;\n@@ -3675,9 +3701,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.OR);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                ra |= av.reduceLanes(VectorOperators.OR);\n+                short v = av.reduceLanes(VectorOperators.OR);\n+                r[i] = v;\n+                ra |= v;\n@@ -3691,0 +3711,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void ORReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = OR_IDENTITY;\n+\n+        Assert.assertEquals((short) (id | id), id,\n+                            \"OR(OR_IDENTITY, OR_IDENTITY) != OR_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) (id | x), x);\n+                Assert.assertEquals((short) (x | id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) (id | x), x,\n+                                \"OR(OR_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) (x | id), x,\n+                                \"OR(\" + x + \", OR_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3692,1 +3735,1 @@\n-        short res = 0;\n+        short res = OR_IDENTITY;\n@@ -3702,1 +3745,1 @@\n-        short res = 0;\n+        short res = OR_IDENTITY;\n@@ -3719,0 +3762,1 @@\n+            ra = OR_IDENTITY;\n@@ -3721,9 +3765,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.OR, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                ra |= av.reduceLanes(VectorOperators.OR, vmask);\n+                short v = av.reduceLanes(VectorOperators.OR, vmask);\n+                r[i] = v;\n+                ra |= v;\n@@ -3738,1 +3776,1 @@\n-        short res = 0;\n+        short res = XOR_IDENTITY;\n@@ -3747,1 +3785,1 @@\n-        short res = 0;\n+        short res = XOR_IDENTITY;\n@@ -3762,0 +3800,1 @@\n+            ra = XOR_IDENTITY;\n@@ -3764,9 +3803,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.XOR);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                ra ^= av.reduceLanes(VectorOperators.XOR);\n+                short v = av.reduceLanes(VectorOperators.XOR);\n+                r[i] = v;\n+                ra ^= v;\n@@ -3780,0 +3813,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void XORReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = XOR_IDENTITY;\n+\n+        Assert.assertEquals((short) (id ^ id), id,\n+                            \"XOR(XOR_IDENTITY, XOR_IDENTITY) != XOR_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) (id ^ x), x);\n+                Assert.assertEquals((short) (x ^ id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) (id ^ x), x,\n+                                \"XOR(XOR_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) (x ^ id), x,\n+                                \"XOR(\" + x + \", XOR_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3781,1 +3837,1 @@\n-        short res = 0;\n+        short res = XOR_IDENTITY;\n@@ -3791,1 +3847,1 @@\n-        short res = 0;\n+        short res = XOR_IDENTITY;\n@@ -3808,0 +3864,1 @@\n+            ra = XOR_IDENTITY;\n@@ -3810,9 +3867,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.XOR, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                ra ^= av.reduceLanes(VectorOperators.XOR, vmask);\n+                short v = av.reduceLanes(VectorOperators.XOR, vmask);\n+                r[i] = v;\n+                ra ^= v;\n@@ -3827,1 +3878,1 @@\n-        short res = 0;\n+        short res = ADD_IDENTITY;\n@@ -3836,1 +3887,1 @@\n-        short res = 0;\n+        short res = ADD_IDENTITY;\n@@ -3851,0 +3902,1 @@\n+            ra = ADD_IDENTITY;\n@@ -3853,9 +3905,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD);\n+                short v = av.reduceLanes(VectorOperators.ADD);\n+                r[i] = v;\n+                ra += v;\n@@ -3869,0 +3915,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void ADDReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = ADD_IDENTITY;\n+\n+        Assert.assertEquals((short) (id + id), id,\n+                            \"ADD(ADD_IDENTITY, ADD_IDENTITY) != ADD_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) (id + x), x);\n+                Assert.assertEquals((short) (x + id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) (id + x), x,\n+                                \"ADD(ADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) (x + id), x,\n+                                \"ADD(\" + x + \", ADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3870,1 +3939,1 @@\n-        short res = 0;\n+        short res = ADD_IDENTITY;\n@@ -3880,1 +3949,1 @@\n-        short res = 0;\n+        short res = ADD_IDENTITY;\n@@ -3897,0 +3966,1 @@\n+            ra = ADD_IDENTITY;\n@@ -3899,9 +3969,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD, vmask);\n+                short v = av.reduceLanes(VectorOperators.ADD, vmask);\n+                r[i] = v;\n+                ra += v;\n@@ -3916,1 +3980,1 @@\n-        short res = 1;\n+        short res = MUL_IDENTITY;\n@@ -3925,1 +3989,1 @@\n-        short res = 1;\n+        short res = MUL_IDENTITY;\n@@ -3937,8 +4001,1 @@\n-        short ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL);\n-            }\n-        }\n+        short ra = 0;\n@@ -3947,1 +4004,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -3950,1 +4007,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL);\n+                short v = av.reduceLanes(VectorOperators.MUL);\n+                r[i] = v;\n+                ra *= v;\n@@ -3958,0 +4017,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void MULReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = MUL_IDENTITY;\n+\n+        Assert.assertEquals((short) (id * id), id,\n+                            \"MUL(MUL_IDENTITY, MUL_IDENTITY) != MUL_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) (id * x), x);\n+                Assert.assertEquals((short) (x * id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) (id * x), x,\n+                                \"MUL(MUL_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) (x * id), x,\n+                                \"MUL(\" + x + \", MUL_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3959,1 +4041,1 @@\n-        short res = 1;\n+        short res = MUL_IDENTITY;\n@@ -3969,1 +4051,1 @@\n-        short res = 1;\n+        short res = MUL_IDENTITY;\n@@ -3983,8 +4065,1 @@\n-        short ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL, vmask);\n-            }\n-        }\n+        short ra = 0;\n@@ -3993,1 +4068,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -3996,1 +4071,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL, vmask);\n+                short v = av.reduceLanes(VectorOperators.MUL, vmask);\n+                r[i] = v;\n+                ra *= v;\n@@ -4005,1 +4082,1 @@\n-        short res = Short.MAX_VALUE;\n+        short res = MIN_IDENTITY;\n@@ -4014,1 +4091,1 @@\n-        short res = Short.MAX_VALUE;\n+        short res = MIN_IDENTITY;\n@@ -4026,8 +4103,1 @@\n-        short ra = Short.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN);\n-            }\n-        }\n+        short ra = 0;\n@@ -4036,1 +4106,1 @@\n-            ra = Short.MAX_VALUE;\n+            ra = MIN_IDENTITY;\n@@ -4039,1 +4109,3 @@\n-                ra = (short) Math.min(ra, av.reduceLanes(VectorOperators.MIN));\n+                short v = av.reduceLanes(VectorOperators.MIN);\n+                r[i] = v;\n+                ra = (short) Math.min(ra, v);\n@@ -4047,0 +4119,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void MINReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = MIN_IDENTITY;\n+\n+        Assert.assertEquals((short) Math.min(id, id), id,\n+                            \"MIN(MIN_IDENTITY, MIN_IDENTITY) != MIN_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) Math.min(id, x), x);\n+                Assert.assertEquals((short) Math.min(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) Math.min(id, x), x,\n+                                \"MIN(MIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) Math.min(x, id), x,\n+                                \"MIN(\" + x + \", MIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4048,1 +4143,1 @@\n-        short res = Short.MAX_VALUE;\n+        short res = MIN_IDENTITY;\n@@ -4058,1 +4153,1 @@\n-        short res = Short.MAX_VALUE;\n+        short res = MIN_IDENTITY;\n@@ -4072,8 +4167,1 @@\n-        short ra = Short.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN, vmask);\n-            }\n-        }\n+        short ra = 0;\n@@ -4082,1 +4170,1 @@\n-            ra = Short.MAX_VALUE;\n+            ra = MIN_IDENTITY;\n@@ -4085,1 +4173,3 @@\n-                ra = (short) Math.min(ra, av.reduceLanes(VectorOperators.MIN, vmask));\n+                short v = av.reduceLanes(VectorOperators.MIN, vmask);\n+                r[i] = v;\n+                ra = (short) Math.min(ra, v);\n@@ -4094,1 +4184,1 @@\n-        short res = Short.MIN_VALUE;\n+        short res = MAX_IDENTITY;\n@@ -4103,1 +4193,1 @@\n-        short res = Short.MIN_VALUE;\n+        short res = MAX_IDENTITY;\n@@ -4115,8 +4205,1 @@\n-        short ra = Short.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX);\n-            }\n-        }\n+        short ra = 0;\n@@ -4125,1 +4208,1 @@\n-            ra = Short.MIN_VALUE;\n+            ra = MAX_IDENTITY;\n@@ -4128,1 +4211,3 @@\n-                ra = (short) Math.max(ra, av.reduceLanes(VectorOperators.MAX));\n+                short v = av.reduceLanes(VectorOperators.MAX);\n+                r[i] = v;\n+                ra = (short) Math.max(ra, v);\n@@ -4136,0 +4221,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void MAXReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = MAX_IDENTITY;\n+\n+        Assert.assertEquals((short) Math.max(id, id), id,\n+                            \"MAX(MAX_IDENTITY, MAX_IDENTITY) != MAX_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) Math.max(id, x), x);\n+                Assert.assertEquals((short) Math.max(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) Math.max(id, x), x,\n+                                \"MAX(MAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) Math.max(x, id), x,\n+                                \"MAX(\" + x + \", MAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4137,1 +4245,1 @@\n-        short res = Short.MIN_VALUE;\n+        short res = MAX_IDENTITY;\n@@ -4147,1 +4255,1 @@\n-        short res = Short.MIN_VALUE;\n+        short res = MAX_IDENTITY;\n@@ -4161,8 +4269,1 @@\n-        short ra = Short.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX, vmask);\n-            }\n-        }\n+        short ra = 0;\n@@ -4171,1 +4272,1 @@\n-            ra = Short.MIN_VALUE;\n+            ra = MAX_IDENTITY;\n@@ -4174,1 +4275,3 @@\n-                ra = (short) Math.max(ra, av.reduceLanes(VectorOperators.MAX, vmask));\n+                short v = av.reduceLanes(VectorOperators.MAX, vmask);\n+                r[i] = v;\n+                ra = (short) Math.max(ra, v);\n@@ -4183,1 +4286,1 @@\n-        short res = Short.MAX_VALUE;\n+        short res = UMIN_IDENTITY;\n@@ -4192,1 +4295,1 @@\n-        short res = Short.MAX_VALUE;\n+        short res = UMIN_IDENTITY;\n@@ -4204,8 +4307,1 @@\n-        short ra = Short.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMIN);\n-            }\n-        }\n+        short ra = 0;\n@@ -4214,1 +4310,1 @@\n-            ra = Short.MAX_VALUE;\n+            ra = UMIN_IDENTITY;\n@@ -4217,1 +4313,3 @@\n-                ra = (short) VectorMath.minUnsigned(ra, av.reduceLanes(VectorOperators.UMIN));\n+                short v = av.reduceLanes(VectorOperators.UMIN);\n+                r[i] = v;\n+                ra = (short) VectorMath.minUnsigned(ra, v);\n@@ -4225,0 +4323,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void UMINReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = UMIN_IDENTITY;\n+\n+        Assert.assertEquals((short) VectorMath.minUnsigned(id, id), id,\n+                            \"UMIN(UMIN_IDENTITY, UMIN_IDENTITY) != UMIN_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) VectorMath.minUnsigned(id, x), x);\n+                Assert.assertEquals((short) VectorMath.minUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) VectorMath.minUnsigned(id, x), x,\n+                                \"UMIN(UMIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) VectorMath.minUnsigned(x, id), x,\n+                                \"UMIN(\" + x + \", UMIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4226,1 +4347,1 @@\n-        short res = Short.MAX_VALUE;\n+        short res = UMIN_IDENTITY;\n@@ -4236,1 +4357,1 @@\n-        short res = Short.MAX_VALUE;\n+        short res = UMIN_IDENTITY;\n@@ -4250,8 +4371,1 @@\n-        short ra = Short.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMIN, vmask);\n-            }\n-        }\n+        short ra = 0;\n@@ -4260,1 +4374,1 @@\n-            ra = Short.MAX_VALUE;\n+            ra = UMIN_IDENTITY;\n@@ -4263,1 +4377,3 @@\n-                ra = (short) VectorMath.minUnsigned(ra, av.reduceLanes(VectorOperators.UMIN, vmask));\n+                short v = av.reduceLanes(VectorOperators.UMIN, vmask);\n+                r[i] = v;\n+                ra = (short) VectorMath.minUnsigned(ra, v);\n@@ -4272,1 +4388,1 @@\n-        short res = Short.MIN_VALUE;\n+        short res = UMAX_IDENTITY;\n@@ -4281,1 +4397,1 @@\n-        short res = Short.MIN_VALUE;\n+        short res = UMAX_IDENTITY;\n@@ -4293,8 +4409,1 @@\n-        short ra = Short.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMAX);\n-            }\n-        }\n+        short ra = 0;\n@@ -4303,1 +4412,1 @@\n-            ra = Short.MIN_VALUE;\n+            ra = UMAX_IDENTITY;\n@@ -4306,1 +4415,3 @@\n-                ra = (short) VectorMath.maxUnsigned(ra, av.reduceLanes(VectorOperators.UMAX));\n+                short v = av.reduceLanes(VectorOperators.UMAX);\n+                r[i] = v;\n+                ra = (short) VectorMath.maxUnsigned(ra, v);\n@@ -4314,0 +4425,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void UMAXReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = UMAX_IDENTITY;\n+\n+        Assert.assertEquals((short) VectorMath.maxUnsigned(id, id), id,\n+                            \"UMAX(UMAX_IDENTITY, UMAX_IDENTITY) != UMAX_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) VectorMath.maxUnsigned(id, x), x);\n+                Assert.assertEquals((short) VectorMath.maxUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) VectorMath.maxUnsigned(id, x), x,\n+                                \"UMAX(UMAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) VectorMath.maxUnsigned(x, id), x,\n+                                \"UMAX(\" + x + \", UMAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4315,1 +4449,1 @@\n-        short res = Short.MIN_VALUE;\n+        short res = UMAX_IDENTITY;\n@@ -4325,1 +4459,1 @@\n-        short res = Short.MIN_VALUE;\n+        short res = UMAX_IDENTITY;\n@@ -4339,8 +4473,1 @@\n-        short ra = Short.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMAX, vmask);\n-            }\n-        }\n+        short ra = 0;\n@@ -4349,1 +4476,1 @@\n-            ra = Short.MIN_VALUE;\n+            ra = UMAX_IDENTITY;\n@@ -4352,1 +4479,3 @@\n-                ra = (short) VectorMath.maxUnsigned(ra, av.reduceLanes(VectorOperators.UMAX, vmask));\n+                short v = av.reduceLanes(VectorOperators.UMAX, vmask);\n+                r[i] = v;\n+                ra = (short) VectorMath.maxUnsigned(ra, v);\n@@ -4361,1 +4490,1 @@\n-        short res = (short) 0;\n+        short res = FIRST_NONZERO_IDENTITY;\n@@ -4370,1 +4499,1 @@\n-        short res = (short) 0;\n+        short res = FIRST_NONZERO_IDENTITY;\n@@ -4382,8 +4511,1 @@\n-        short ra = (short) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n-            }\n-        }\n+        short ra = 0;\n@@ -4392,1 +4514,1 @@\n-            ra = (short) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -4395,1 +4517,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO));\n+                short v = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -4403,0 +4527,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void FIRST_NONZEROReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = FIRST_NONZERO_IDENTITY;\n+\n+        Assert.assertEquals(firstNonZero(id, id), id,\n+                            \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, FIRST_NONZERO_IDENTITY) != FIRST_NONZERO_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals(firstNonZero(id, x), x);\n+                Assert.assertEquals(firstNonZero(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals(firstNonZero(id, x), x,\n+                                \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals(firstNonZero(x, id), x,\n+                                \"FIRST_NONZERO(\" + x + \", FIRST_NONZERO_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4404,1 +4551,1 @@\n-        short res = (short) 0;\n+        short res = FIRST_NONZERO_IDENTITY;\n@@ -4414,1 +4561,1 @@\n-        short res = (short) 0;\n+        short res = FIRST_NONZERO_IDENTITY;\n@@ -4428,8 +4575,1 @@\n-        short ra = (short) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n-            }\n-        }\n+        short ra = 0;\n@@ -4438,1 +4578,1 @@\n-            ra = (short) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -4441,1 +4581,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask));\n+                short v = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -4498,1 +4640,1 @@\n-        short res = 0;\n+        short res = SUADD_IDENTITY;\n@@ -4507,1 +4649,1 @@\n-        short res = 0;\n+        short res = SUADD_IDENTITY;\n@@ -4522,0 +4664,1 @@\n+            ra = SUADD_IDENTITY;\n@@ -4524,9 +4667,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.SUADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                ra = (short) VectorMath.addSaturatingUnsigned(ra, av.reduceLanes(VectorOperators.SUADD));\n+                short v = av.reduceLanes(VectorOperators.SUADD);\n+                r[i] = v;\n+                ra = (short) VectorMath.addSaturatingUnsigned(ra, v);\n@@ -4540,0 +4677,23 @@\n+    @Test(dataProvider = \"shortSaturatingUnaryOpProvider\")\n+    static void SUADDReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = SUADD_IDENTITY;\n+\n+        Assert.assertEquals((short) VectorMath.addSaturatingUnsigned(id, id), id,\n+                            \"SUADD(SUADD_IDENTITY, SUADD_IDENTITY) != SUADD_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) VectorMath.addSaturatingUnsigned(id, x), x);\n+                Assert.assertEquals((short) VectorMath.addSaturatingUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) VectorMath.addSaturatingUnsigned(id, x), x,\n+                                \"SUADD(SUADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) VectorMath.addSaturatingUnsigned(x, id), x,\n+                                \"SUADD(\" + x + \", SUADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4541,1 +4701,1 @@\n-        short res = 0;\n+        short res = SUADD_IDENTITY;\n@@ -4551,1 +4711,1 @@\n-        short res = 0;\n+        short res = SUADD_IDENTITY;\n@@ -4567,0 +4727,1 @@\n+            ra = SUADD_IDENTITY;\n@@ -4569,9 +4730,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.SUADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                ra = (short) VectorMath.addSaturatingUnsigned(ra, av.reduceLanes(VectorOperators.SUADD, vmask));\n+                short v = av.reduceLanes(VectorOperators.SUADD, vmask);\n+                r[i] = v;\n+                ra = (short) VectorMath.addSaturatingUnsigned(ra, v);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/Short64VectorTests.java","additions":413,"deletions":258,"binary":false,"changes":671,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -74,0 +74,13 @@\n+    \/\/ Identity values for reduction operations\n+    private static final short ADD_IDENTITY = (short)0;\n+    private static final short AND_IDENTITY = (short)-1;\n+    private static final short FIRST_NONZERO_IDENTITY = (short)0;\n+    private static final short MAX_IDENTITY = Short.MIN_VALUE;\n+    private static final short MIN_IDENTITY = Short.MAX_VALUE;\n+    private static final short MUL_IDENTITY = (short)1;\n+    private static final short OR_IDENTITY = (short)0;\n+    private static final short SUADD_IDENTITY = (short)0;\n+    private static final short UMAX_IDENTITY = (short)0;   \/\/ Minimum unsigned value\n+    private static final short UMIN_IDENTITY = (short)-1;  \/\/ Maximum unsigned value\n+    private static final short XOR_IDENTITY = (short)0;\n+\n@@ -3565,1 +3578,1 @@\n-        short res = -1;\n+        short res = AND_IDENTITY;\n@@ -3574,1 +3587,1 @@\n-        short res = -1;\n+        short res = AND_IDENTITY;\n@@ -3586,8 +3599,1 @@\n-        short ra = -1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.AND);\n-            }\n-        }\n+        short ra = 0;\n@@ -3596,1 +3602,1 @@\n-            ra = -1;\n+            ra = AND_IDENTITY;\n@@ -3599,1 +3605,3 @@\n-                ra &= av.reduceLanes(VectorOperators.AND);\n+                short v = av.reduceLanes(VectorOperators.AND);\n+                r[i] = v;\n+                ra &= v;\n@@ -3607,0 +3615,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void ANDReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = AND_IDENTITY;\n+\n+        Assert.assertEquals((short) (id & id), id,\n+                            \"AND(AND_IDENTITY, AND_IDENTITY) != AND_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) (id & x), x);\n+                Assert.assertEquals((short) (x & id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) (id & x), x,\n+                                \"AND(AND_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) (x & id), x,\n+                                \"AND(\" + x + \", AND_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3608,1 +3639,1 @@\n-        short res = -1;\n+        short res = AND_IDENTITY;\n@@ -3618,1 +3649,1 @@\n-        short res = -1;\n+        short res = AND_IDENTITY;\n@@ -3632,8 +3663,1 @@\n-        short ra = -1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.AND, vmask);\n-            }\n-        }\n+        short ra = 0;\n@@ -3642,1 +3666,1 @@\n-            ra = -1;\n+            ra = AND_IDENTITY;\n@@ -3645,1 +3669,3 @@\n-                ra &= av.reduceLanes(VectorOperators.AND, vmask);\n+                short v = av.reduceLanes(VectorOperators.AND, vmask);\n+                r[i] = v;\n+                ra &= v;\n@@ -3654,1 +3680,1 @@\n-        short res = 0;\n+        short res = OR_IDENTITY;\n@@ -3663,1 +3689,1 @@\n-        short res = 0;\n+        short res = OR_IDENTITY;\n@@ -3678,0 +3704,1 @@\n+            ra = OR_IDENTITY;\n@@ -3680,9 +3707,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.OR);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                ra |= av.reduceLanes(VectorOperators.OR);\n+                short v = av.reduceLanes(VectorOperators.OR);\n+                r[i] = v;\n+                ra |= v;\n@@ -3696,0 +3717,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void ORReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = OR_IDENTITY;\n+\n+        Assert.assertEquals((short) (id | id), id,\n+                            \"OR(OR_IDENTITY, OR_IDENTITY) != OR_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) (id | x), x);\n+                Assert.assertEquals((short) (x | id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) (id | x), x,\n+                                \"OR(OR_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) (x | id), x,\n+                                \"OR(\" + x + \", OR_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3697,1 +3741,1 @@\n-        short res = 0;\n+        short res = OR_IDENTITY;\n@@ -3707,1 +3751,1 @@\n-        short res = 0;\n+        short res = OR_IDENTITY;\n@@ -3724,0 +3768,1 @@\n+            ra = OR_IDENTITY;\n@@ -3726,9 +3771,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.OR, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                ra |= av.reduceLanes(VectorOperators.OR, vmask);\n+                short v = av.reduceLanes(VectorOperators.OR, vmask);\n+                r[i] = v;\n+                ra |= v;\n@@ -3743,1 +3782,1 @@\n-        short res = 0;\n+        short res = XOR_IDENTITY;\n@@ -3752,1 +3791,1 @@\n-        short res = 0;\n+        short res = XOR_IDENTITY;\n@@ -3767,0 +3806,1 @@\n+            ra = XOR_IDENTITY;\n@@ -3769,9 +3809,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.XOR);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                ra ^= av.reduceLanes(VectorOperators.XOR);\n+                short v = av.reduceLanes(VectorOperators.XOR);\n+                r[i] = v;\n+                ra ^= v;\n@@ -3785,0 +3819,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void XORReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = XOR_IDENTITY;\n+\n+        Assert.assertEquals((short) (id ^ id), id,\n+                            \"XOR(XOR_IDENTITY, XOR_IDENTITY) != XOR_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) (id ^ x), x);\n+                Assert.assertEquals((short) (x ^ id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) (id ^ x), x,\n+                                \"XOR(XOR_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) (x ^ id), x,\n+                                \"XOR(\" + x + \", XOR_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3786,1 +3843,1 @@\n-        short res = 0;\n+        short res = XOR_IDENTITY;\n@@ -3796,1 +3853,1 @@\n-        short res = 0;\n+        short res = XOR_IDENTITY;\n@@ -3813,0 +3870,1 @@\n+            ra = XOR_IDENTITY;\n@@ -3815,9 +3873,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.XOR, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                ra ^= av.reduceLanes(VectorOperators.XOR, vmask);\n+                short v = av.reduceLanes(VectorOperators.XOR, vmask);\n+                r[i] = v;\n+                ra ^= v;\n@@ -3832,1 +3884,1 @@\n-        short res = 0;\n+        short res = ADD_IDENTITY;\n@@ -3841,1 +3893,1 @@\n-        short res = 0;\n+        short res = ADD_IDENTITY;\n@@ -3856,0 +3908,1 @@\n+            ra = ADD_IDENTITY;\n@@ -3858,9 +3911,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD);\n+                short v = av.reduceLanes(VectorOperators.ADD);\n+                r[i] = v;\n+                ra += v;\n@@ -3874,0 +3921,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void ADDReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = ADD_IDENTITY;\n+\n+        Assert.assertEquals((short) (id + id), id,\n+                            \"ADD(ADD_IDENTITY, ADD_IDENTITY) != ADD_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) (id + x), x);\n+                Assert.assertEquals((short) (x + id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) (id + x), x,\n+                                \"ADD(ADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) (x + id), x,\n+                                \"ADD(\" + x + \", ADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3875,1 +3945,1 @@\n-        short res = 0;\n+        short res = ADD_IDENTITY;\n@@ -3885,1 +3955,1 @@\n-        short res = 0;\n+        short res = ADD_IDENTITY;\n@@ -3902,0 +3972,1 @@\n+            ra = ADD_IDENTITY;\n@@ -3904,9 +3975,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.ADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                ra += av.reduceLanes(VectorOperators.ADD, vmask);\n+                short v = av.reduceLanes(VectorOperators.ADD, vmask);\n+                r[i] = v;\n+                ra += v;\n@@ -3921,1 +3986,1 @@\n-        short res = 1;\n+        short res = MUL_IDENTITY;\n@@ -3930,1 +3995,1 @@\n-        short res = 1;\n+        short res = MUL_IDENTITY;\n@@ -3942,8 +4007,1 @@\n-        short ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL);\n-            }\n-        }\n+        short ra = 0;\n@@ -3952,1 +4010,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -3955,1 +4013,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL);\n+                short v = av.reduceLanes(VectorOperators.MUL);\n+                r[i] = v;\n+                ra *= v;\n@@ -3963,0 +4023,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void MULReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = MUL_IDENTITY;\n+\n+        Assert.assertEquals((short) (id * id), id,\n+                            \"MUL(MUL_IDENTITY, MUL_IDENTITY) != MUL_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) (id * x), x);\n+                Assert.assertEquals((short) (x * id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) (id * x), x,\n+                                \"MUL(MUL_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) (x * id), x,\n+                                \"MUL(\" + x + \", MUL_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -3964,1 +4047,1 @@\n-        short res = 1;\n+        short res = MUL_IDENTITY;\n@@ -3974,1 +4057,1 @@\n-        short res = 1;\n+        short res = MUL_IDENTITY;\n@@ -3988,8 +4071,1 @@\n-        short ra = 1;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MUL, vmask);\n-            }\n-        }\n+        short ra = 0;\n@@ -3998,1 +4074,1 @@\n-            ra = 1;\n+            ra = MUL_IDENTITY;\n@@ -4001,1 +4077,3 @@\n-                ra *= av.reduceLanes(VectorOperators.MUL, vmask);\n+                short v = av.reduceLanes(VectorOperators.MUL, vmask);\n+                r[i] = v;\n+                ra *= v;\n@@ -4010,1 +4088,1 @@\n-        short res = Short.MAX_VALUE;\n+        short res = MIN_IDENTITY;\n@@ -4019,1 +4097,1 @@\n-        short res = Short.MAX_VALUE;\n+        short res = MIN_IDENTITY;\n@@ -4031,8 +4109,1 @@\n-        short ra = Short.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN);\n-            }\n-        }\n+        short ra = 0;\n@@ -4041,1 +4112,1 @@\n-            ra = Short.MAX_VALUE;\n+            ra = MIN_IDENTITY;\n@@ -4044,1 +4115,3 @@\n-                ra = (short) Math.min(ra, av.reduceLanes(VectorOperators.MIN));\n+                short v = av.reduceLanes(VectorOperators.MIN);\n+                r[i] = v;\n+                ra = (short) Math.min(ra, v);\n@@ -4052,0 +4125,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void MINReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = MIN_IDENTITY;\n+\n+        Assert.assertEquals((short) Math.min(id, id), id,\n+                            \"MIN(MIN_IDENTITY, MIN_IDENTITY) != MIN_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) Math.min(id, x), x);\n+                Assert.assertEquals((short) Math.min(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) Math.min(id, x), x,\n+                                \"MIN(MIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) Math.min(x, id), x,\n+                                \"MIN(\" + x + \", MIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4053,1 +4149,1 @@\n-        short res = Short.MAX_VALUE;\n+        short res = MIN_IDENTITY;\n@@ -4063,1 +4159,1 @@\n-        short res = Short.MAX_VALUE;\n+        short res = MIN_IDENTITY;\n@@ -4077,8 +4173,1 @@\n-        short ra = Short.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MIN, vmask);\n-            }\n-        }\n+        short ra = 0;\n@@ -4087,1 +4176,1 @@\n-            ra = Short.MAX_VALUE;\n+            ra = MIN_IDENTITY;\n@@ -4090,1 +4179,3 @@\n-                ra = (short) Math.min(ra, av.reduceLanes(VectorOperators.MIN, vmask));\n+                short v = av.reduceLanes(VectorOperators.MIN, vmask);\n+                r[i] = v;\n+                ra = (short) Math.min(ra, v);\n@@ -4099,1 +4190,1 @@\n-        short res = Short.MIN_VALUE;\n+        short res = MAX_IDENTITY;\n@@ -4108,1 +4199,1 @@\n-        short res = Short.MIN_VALUE;\n+        short res = MAX_IDENTITY;\n@@ -4120,8 +4211,1 @@\n-        short ra = Short.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX);\n-            }\n-        }\n+        short ra = 0;\n@@ -4130,1 +4214,1 @@\n-            ra = Short.MIN_VALUE;\n+            ra = MAX_IDENTITY;\n@@ -4133,1 +4217,3 @@\n-                ra = (short) Math.max(ra, av.reduceLanes(VectorOperators.MAX));\n+                short v = av.reduceLanes(VectorOperators.MAX);\n+                r[i] = v;\n+                ra = (short) Math.max(ra, v);\n@@ -4141,0 +4227,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void MAXReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = MAX_IDENTITY;\n+\n+        Assert.assertEquals((short) Math.max(id, id), id,\n+                            \"MAX(MAX_IDENTITY, MAX_IDENTITY) != MAX_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) Math.max(id, x), x);\n+                Assert.assertEquals((short) Math.max(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) Math.max(id, x), x,\n+                                \"MAX(MAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) Math.max(x, id), x,\n+                                \"MAX(\" + x + \", MAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4142,1 +4251,1 @@\n-        short res = Short.MIN_VALUE;\n+        short res = MAX_IDENTITY;\n@@ -4152,1 +4261,1 @@\n-        short res = Short.MIN_VALUE;\n+        short res = MAX_IDENTITY;\n@@ -4166,8 +4275,1 @@\n-        short ra = Short.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.MAX, vmask);\n-            }\n-        }\n+        short ra = 0;\n@@ -4176,1 +4278,1 @@\n-            ra = Short.MIN_VALUE;\n+            ra = MAX_IDENTITY;\n@@ -4179,1 +4281,3 @@\n-                ra = (short) Math.max(ra, av.reduceLanes(VectorOperators.MAX, vmask));\n+                short v = av.reduceLanes(VectorOperators.MAX, vmask);\n+                r[i] = v;\n+                ra = (short) Math.max(ra, v);\n@@ -4188,1 +4292,1 @@\n-        short res = Short.MAX_VALUE;\n+        short res = UMIN_IDENTITY;\n@@ -4197,1 +4301,1 @@\n-        short res = Short.MAX_VALUE;\n+        short res = UMIN_IDENTITY;\n@@ -4209,8 +4313,1 @@\n-        short ra = Short.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMIN);\n-            }\n-        }\n+        short ra = 0;\n@@ -4219,1 +4316,1 @@\n-            ra = Short.MAX_VALUE;\n+            ra = UMIN_IDENTITY;\n@@ -4222,1 +4319,3 @@\n-                ra = (short) VectorMath.minUnsigned(ra, av.reduceLanes(VectorOperators.UMIN));\n+                short v = av.reduceLanes(VectorOperators.UMIN);\n+                r[i] = v;\n+                ra = (short) VectorMath.minUnsigned(ra, v);\n@@ -4230,0 +4329,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void UMINReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = UMIN_IDENTITY;\n+\n+        Assert.assertEquals((short) VectorMath.minUnsigned(id, id), id,\n+                            \"UMIN(UMIN_IDENTITY, UMIN_IDENTITY) != UMIN_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) VectorMath.minUnsigned(id, x), x);\n+                Assert.assertEquals((short) VectorMath.minUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) VectorMath.minUnsigned(id, x), x,\n+                                \"UMIN(UMIN_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) VectorMath.minUnsigned(x, id), x,\n+                                \"UMIN(\" + x + \", UMIN_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4231,1 +4353,1 @@\n-        short res = Short.MAX_VALUE;\n+        short res = UMIN_IDENTITY;\n@@ -4241,1 +4363,1 @@\n-        short res = Short.MAX_VALUE;\n+        short res = UMIN_IDENTITY;\n@@ -4255,8 +4377,1 @@\n-        short ra = Short.MAX_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMIN, vmask);\n-            }\n-        }\n+        short ra = 0;\n@@ -4265,1 +4380,1 @@\n-            ra = Short.MAX_VALUE;\n+            ra = UMIN_IDENTITY;\n@@ -4268,1 +4383,3 @@\n-                ra = (short) VectorMath.minUnsigned(ra, av.reduceLanes(VectorOperators.UMIN, vmask));\n+                short v = av.reduceLanes(VectorOperators.UMIN, vmask);\n+                r[i] = v;\n+                ra = (short) VectorMath.minUnsigned(ra, v);\n@@ -4277,1 +4394,1 @@\n-        short res = Short.MIN_VALUE;\n+        short res = UMAX_IDENTITY;\n@@ -4286,1 +4403,1 @@\n-        short res = Short.MIN_VALUE;\n+        short res = UMAX_IDENTITY;\n@@ -4298,8 +4415,1 @@\n-        short ra = Short.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMAX);\n-            }\n-        }\n+        short ra = 0;\n@@ -4308,1 +4418,1 @@\n-            ra = Short.MIN_VALUE;\n+            ra = UMAX_IDENTITY;\n@@ -4311,1 +4421,3 @@\n-                ra = (short) VectorMath.maxUnsigned(ra, av.reduceLanes(VectorOperators.UMAX));\n+                short v = av.reduceLanes(VectorOperators.UMAX);\n+                r[i] = v;\n+                ra = (short) VectorMath.maxUnsigned(ra, v);\n@@ -4319,0 +4431,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void UMAXReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = UMAX_IDENTITY;\n+\n+        Assert.assertEquals((short) VectorMath.maxUnsigned(id, id), id,\n+                            \"UMAX(UMAX_IDENTITY, UMAX_IDENTITY) != UMAX_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) VectorMath.maxUnsigned(id, x), x);\n+                Assert.assertEquals((short) VectorMath.maxUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) VectorMath.maxUnsigned(id, x), x,\n+                                \"UMAX(UMAX_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) VectorMath.maxUnsigned(x, id), x,\n+                                \"UMAX(\" + x + \", UMAX_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4320,1 +4455,1 @@\n-        short res = Short.MIN_VALUE;\n+        short res = UMAX_IDENTITY;\n@@ -4330,1 +4465,1 @@\n-        short res = Short.MIN_VALUE;\n+        short res = UMAX_IDENTITY;\n@@ -4344,8 +4479,1 @@\n-        short ra = Short.MIN_VALUE;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.UMAX, vmask);\n-            }\n-        }\n+        short ra = 0;\n@@ -4354,1 +4482,1 @@\n-            ra = Short.MIN_VALUE;\n+            ra = UMAX_IDENTITY;\n@@ -4357,1 +4485,3 @@\n-                ra = (short) VectorMath.maxUnsigned(ra, av.reduceLanes(VectorOperators.UMAX, vmask));\n+                short v = av.reduceLanes(VectorOperators.UMAX, vmask);\n+                r[i] = v;\n+                ra = (short) VectorMath.maxUnsigned(ra, v);\n@@ -4366,1 +4496,1 @@\n-        short res = (short) 0;\n+        short res = FIRST_NONZERO_IDENTITY;\n@@ -4375,1 +4505,1 @@\n-        short res = (short) 0;\n+        short res = FIRST_NONZERO_IDENTITY;\n@@ -4387,8 +4517,1 @@\n-        short ra = (short) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n-            }\n-        }\n+        short ra = 0;\n@@ -4397,1 +4520,1 @@\n-            ra = (short) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -4400,1 +4523,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO));\n+                short v = av.reduceLanes(VectorOperators.FIRST_NONZERO);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -4408,0 +4533,23 @@\n+    @Test(dataProvider = \"shortUnaryOpProvider\")\n+    static void FIRST_NONZEROReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = FIRST_NONZERO_IDENTITY;\n+\n+        Assert.assertEquals(firstNonZero(id, id), id,\n+                            \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, FIRST_NONZERO_IDENTITY) != FIRST_NONZERO_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals(firstNonZero(id, x), x);\n+                Assert.assertEquals(firstNonZero(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals(firstNonZero(id, x), x,\n+                                \"FIRST_NONZERO(FIRST_NONZERO_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals(firstNonZero(x, id), x,\n+                                \"FIRST_NONZERO(\" + x + \", FIRST_NONZERO_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4409,1 +4557,1 @@\n-        short res = (short) 0;\n+        short res = FIRST_NONZERO_IDENTITY;\n@@ -4419,1 +4567,1 @@\n-        short res = (short) 0;\n+        short res = FIRST_NONZERO_IDENTITY;\n@@ -4433,8 +4581,1 @@\n-        short ra = (short) 0;\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n-            }\n-        }\n+        short ra = 0;\n@@ -4443,1 +4584,1 @@\n-            ra = (short) 0;\n+            ra = FIRST_NONZERO_IDENTITY;\n@@ -4446,1 +4587,3 @@\n-                ra = firstNonZero(ra, av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask));\n+                short v = av.reduceLanes(VectorOperators.FIRST_NONZERO, vmask);\n+                r[i] = v;\n+                ra = firstNonZero(ra, v);\n@@ -4503,1 +4646,1 @@\n-        short res = 0;\n+        short res = SUADD_IDENTITY;\n@@ -4512,1 +4655,1 @@\n-        short res = 0;\n+        short res = SUADD_IDENTITY;\n@@ -4527,0 +4670,1 @@\n+            ra = SUADD_IDENTITY;\n@@ -4529,9 +4673,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.SUADD);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                ra = (short) VectorMath.addSaturatingUnsigned(ra, av.reduceLanes(VectorOperators.SUADD));\n+                short v = av.reduceLanes(VectorOperators.SUADD);\n+                r[i] = v;\n+                ra = (short) VectorMath.addSaturatingUnsigned(ra, v);\n@@ -4545,0 +4683,23 @@\n+    @Test(dataProvider = \"shortSaturatingUnaryOpProvider\")\n+    static void SUADDReduceIdentityValueTests(IntFunction<short[]> fa) {\n+        short[] a = fa.apply(SPECIES.length());\n+        short id = SUADD_IDENTITY;\n+\n+        Assert.assertEquals((short) VectorMath.addSaturatingUnsigned(id, id), id,\n+                            \"SUADD(SUADD_IDENTITY, SUADD_IDENTITY) != SUADD_IDENTITY\");\n+\n+        short x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals((short) VectorMath.addSaturatingUnsigned(id, x), x);\n+                Assert.assertEquals((short) VectorMath.addSaturatingUnsigned(x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals((short) VectorMath.addSaturatingUnsigned(id, x), x,\n+                                \"SUADD(SUADD_IDENTITY, \" + x + \") != \" + x);\n+            Assert.assertEquals((short) VectorMath.addSaturatingUnsigned(x, id), x,\n+                                \"SUADD(\" + x + \", SUADD_IDENTITY) != \" + x);\n+        }\n+    }\n+\n@@ -4546,1 +4707,1 @@\n-        short res = 0;\n+        short res = SUADD_IDENTITY;\n@@ -4556,1 +4717,1 @@\n-        short res = 0;\n+        short res = SUADD_IDENTITY;\n@@ -4572,0 +4733,1 @@\n+            ra = SUADD_IDENTITY;\n@@ -4574,9 +4736,3 @@\n-                r[i] = av.reduceLanes(VectorOperators.SUADD, vmask);\n-            }\n-        }\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            ra = 0;\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                ShortVector av = ShortVector.fromArray(SPECIES, a, i);\n-                ra = (short) VectorMath.addSaturatingUnsigned(ra, av.reduceLanes(VectorOperators.SUADD, vmask));\n+                short v = av.reduceLanes(VectorOperators.SUADD, vmask);\n+                r[i] = v;\n+                ra = (short) VectorMath.addSaturatingUnsigned(ra, v);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/ShortMaxVectorTests.java","additions":413,"deletions":257,"binary":false,"changes":670,"status":"modified"},{"patch":"@@ -3,1 +3,1 @@\n-# Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2018, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -510,10 +510,10 @@\n-gen_reduction_op \"AND\" \"\\&\" \"BITWISE\" \"-1\"\n-gen_reduction_op \"OR\" \"|\" \"BITWISE\" \"0\"\n-gen_reduction_op \"XOR\" \"^\" \"BITWISE\" \"0\"\n-gen_reduction_op \"ADD\" \"+\" \"\" \"0\"\n-gen_reduction_op \"MUL\" \"*\" \"\" \"1\"\n-gen_reduction_op_func \"MIN\" \"(\\$type\\$) Math.min\" \"\" \"\\$Wideboxtype\\$.\\$MaxValue\\$\"\n-gen_reduction_op_func \"MAX\" \"(\\$type\\$) Math.max\" \"\" \"\\$Wideboxtype\\$.\\$MinValue\\$\"\n-gen_reduction_op_func \"UMIN\" \"(\\$type\\$) VectorMath.minUnsigned\" \"BITWISE\" \"\\$Wideboxtype\\$.\\$MaxValue\\$\"\n-gen_reduction_op_func \"UMAX\" \"(\\$type\\$) VectorMath.maxUnsigned\" \"BITWISE\" \"\\$Wideboxtype\\$.\\$MinValue\\$\"\n-gen_reduction_op_func \"FIRST_NONZERO\" \"firstNonZero\" \"\" \"(\\$type\\$) 0\"\n+gen_reduction_op \"AND\" \"\\&\" \"BITWISE\" \"AND_IDENTITY\"\n+gen_reduction_op \"OR\" \"|\" \"BITWISE\" \"OR_IDENTITY\"\n+gen_reduction_op \"XOR\" \"^\" \"BITWISE\" \"XOR_IDENTITY\"\n+gen_reduction_op \"ADD\" \"+\" \"\" \"ADD_IDENTITY\"\n+gen_reduction_op \"MUL\" \"*\" \"\" \"MUL_IDENTITY\"\n+gen_reduction_op_func \"MIN\" \"(\\$type\\$) Math.min\" \"\" \"MIN_IDENTITY\"\n+gen_reduction_op_func \"MAX\" \"(\\$type\\$) Math.max\" \"\" \"MAX_IDENTITY\"\n+gen_reduction_op_func \"UMIN\" \"(\\$type\\$) VectorMath.minUnsigned\" \"BITWISE\" \"UMIN_IDENTITY\"\n+gen_reduction_op_func \"UMAX\" \"(\\$type\\$) VectorMath.maxUnsigned\" \"BITWISE\" \"UMAX_IDENTITY\"\n+gen_reduction_op_func \"FIRST_NONZERO\" \"firstNonZero\" \"\" \"FIRST_NONZERO_IDENTITY\"\n@@ -526,1 +526,1 @@\n-gen_saturating_reduction_op \"SUADD\" \"(\\$type\\$) VectorMath.addSaturatingUnsigned\" \"BITWISE\" \"0\"\n+gen_saturating_reduction_op \"SUADD\" \"(\\$type\\$) VectorMath.addSaturatingUnsigned\" \"BITWISE\" \"SUADD_IDENTITY\"\n","filename":"test\/jdk\/jdk\/incubator\/vector\/gen-template.sh","additions":12,"deletions":12,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -5,8 +5,1 @@\n-        $type$ ra = [[TEST_INIT]];\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                $abstractvectortype$ av = $abstractvectortype$.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.[[TEST]], vmask);\n-            }\n-        }\n+        $type$ ra = 0;\n@@ -18,1 +11,3 @@\n-                ra = [[TEST_OP]](ra, av.reduceLanes(VectorOperators.[[TEST]], vmask));\n+                $type$ v = av.reduceLanes(VectorOperators.[[TEST]], vmask);\n+                r[i] = v;\n+                ra = [[TEST_OP]](ra, v);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/templates\/Kernel-Reduction-Masked-op-func.template","additions":4,"deletions":9,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -5,8 +5,1 @@\n-        $type$ ra = [[TEST_INIT]];\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                $abstractvectortype$ av = $abstractvectortype$.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.[[TEST]], vmask);\n-            }\n-        }\n+        $type$ ra = 0;\n@@ -18,1 +11,3 @@\n-                ra [[TEST_OP]]= av.reduceLanes(VectorOperators.[[TEST]], vmask);\n+                $type$ v = av.reduceLanes(VectorOperators.[[TEST]], vmask);\n+                r[i] = v;\n+                ra [[TEST_OP]]= v;\n","filename":"test\/jdk\/jdk\/incubator\/vector\/templates\/Kernel-Reduction-Masked-op.template","additions":4,"deletions":9,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -3,8 +3,1 @@\n-        $type$ ra = [[TEST_INIT]];\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                $abstractvectortype$ av = $abstractvectortype$.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.[[TEST]]);\n-            }\n-        }\n+        $type$ ra = 0;\n@@ -16,1 +9,3 @@\n-                ra = [[TEST_OP]](ra, av.reduceLanes(VectorOperators.[[TEST]]));\n+                $type$ v = av.reduceLanes(VectorOperators.[[TEST]]);\n+                r[i] = v;\n+                ra = [[TEST_OP]](ra, v);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/templates\/Kernel-Reduction-op-func.template","additions":4,"deletions":9,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -3,8 +3,1 @@\n-        $type$ ra = [[TEST_INIT]];\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                $abstractvectortype$ av = $abstractvectortype$.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.[[TEST]]);\n-            }\n-        }\n+        $type$ ra = 0;\n@@ -16,1 +9,3 @@\n-                ra [[TEST_OP]]= av.reduceLanes(VectorOperators.[[TEST]]);\n+                $type$ v = av.reduceLanes(VectorOperators.[[TEST]]);\n+                r[i] = v;\n+                ra [[TEST_OP]]= v;\n","filename":"test\/jdk\/jdk\/incubator\/vector\/templates\/Kernel-Reduction-op.template","additions":4,"deletions":9,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -5,8 +5,1 @@\n-        $type$ ra = [[TEST_INIT]];\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                $abstractvectortype$ av = $abstractvectortype$.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.[[TEST]], vmask);\n-            }\n-        }\n+        $type$ ra = 0;\n@@ -18,1 +11,3 @@\n-                ra = [[TEST_OP]](ra, av.reduceLanes(VectorOperators.[[TEST]], vmask));\n+                $type$ v = av.reduceLanes(VectorOperators.[[TEST]], vmask);\n+                r[i] = v;\n+                ra = [[TEST_OP]](ra, v);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/templates\/Kernel-SaturatingReduction-Masked-op.template","additions":4,"deletions":9,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -3,8 +3,1 @@\n-        $type$ ra = [[TEST_INIT]];\n-\n-        for (int ic = 0; ic < INVOC_COUNT; ic++) {\n-            for (int i = 0; i < a.length; i += SPECIES.length()) {\n-                $abstractvectortype$ av = $abstractvectortype$.fromArray(SPECIES, a, i);\n-                r[i] = av.reduceLanes(VectorOperators.[[TEST]]);\n-            }\n-        }\n+        $type$ ra = 0;\n@@ -16,1 +9,3 @@\n-                ra = [[TEST_OP]](ra, av.reduceLanes(VectorOperators.[[TEST]]));\n+                $type$ v = av.reduceLanes(VectorOperators.[[TEST]]);\n+                r[i] = v;\n+                ra = [[TEST_OP]](ra, v);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/templates\/Kernel-SaturatingReduction-op.template","additions":4,"deletions":9,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -8,0 +8,23 @@\n+\n+    @Test(dataProvider = \"$type$UnaryOpProvider\")\n+    static void [[TEST]]ReduceIdentityValueTests(IntFunction<$type$[]> fa) {\n+        $type$[] a = fa.apply(SPECIES.length());\n+        $type$ id = [[TEST_INIT]];\n+\n+        Assert.assertEquals([[TEST_OP]](id, id), id,\n+                            \"[[TEST]]([[TEST_INIT]], [[TEST_INIT]]) != [[TEST_INIT]]\");\n+\n+        $type$ x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals([[TEST_OP]](id, x), x);\n+                Assert.assertEquals([[TEST_OP]](x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals([[TEST_OP]](id, x), x,\n+                                \"[[TEST]]([[TEST_INIT]], \" + x + \") != \" + x);\n+            Assert.assertEquals([[TEST_OP]](x, id), x,\n+                                \"[[TEST]](\" + x + \", [[TEST_INIT]]) != \" + x);\n+        }\n+    }\n","filename":"test\/jdk\/jdk\/incubator\/vector\/templates\/Unit-Reduction-op-func.template","additions":23,"deletions":0,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -12,0 +12,23 @@\n+\n+    @Test(dataProvider = \"$type$UnaryOpProvider\")\n+    static void [[TEST]]ReduceIdentityValueTests(IntFunction<$type$[]> fa) {\n+        $type$[] a = fa.apply(SPECIES.length());\n+        $type$ id = [[TEST_INIT]];\n+\n+        Assert.assertEquals(($type$) (id [[TEST_OP]] id), id,\n+                            \"[[TEST]]([[TEST_INIT]], [[TEST_INIT]]) != [[TEST_INIT]]\");\n+\n+        $type$ x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals(($type$) (id [[TEST_OP]] x), x);\n+                Assert.assertEquals(($type$) (x [[TEST_OP]] id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals(($type$) (id [[TEST_OP]] x), x,\n+                                \"[[TEST]]([[TEST_INIT]], \" + x + \") != \" + x);\n+            Assert.assertEquals(($type$) (x [[TEST_OP]] id), x,\n+                                \"[[TEST]](\" + x + \", [[TEST_INIT]]) != \" + x);\n+        }\n+    }\n","filename":"test\/jdk\/jdk\/incubator\/vector\/templates\/Unit-Reduction-op.template","additions":23,"deletions":0,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -8,0 +8,23 @@\n+\n+    @Test(dataProvider = \"$type$SaturatingUnaryOpProvider\")\n+    static void [[TEST]]ReduceIdentityValueTests(IntFunction<$type$[]> fa) {\n+        $type$[] a = fa.apply(SPECIES.length());\n+        $type$ id = [[TEST_INIT]];\n+\n+        Assert.assertEquals([[TEST_OP]](id, id), id,\n+                            \"[[TEST]]([[TEST_INIT]], [[TEST_INIT]]) != [[TEST_INIT]]\");\n+\n+        $type$ x = 0;\n+        try {\n+            for (int i = 0; i < a.length; i++) {\n+                x = a[i];\n+                Assert.assertEquals([[TEST_OP]](id, x), x);\n+                Assert.assertEquals([[TEST_OP]](x, id), x);\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals([[TEST_OP]](id, x), x,\n+                                \"[[TEST]]([[TEST_INIT]], \" + x + \") != \" + x);\n+            Assert.assertEquals([[TEST_OP]](x, id), x,\n+                                \"[[TEST]](\" + x + \", [[TEST_INIT]]) != \" + x);\n+        }\n+    }\n","filename":"test\/jdk\/jdk\/incubator\/vector\/templates\/Unit-SaturatingReduction-op.template","additions":23,"deletions":0,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -89,1 +89,0 @@\n-\n@@ -91,0 +90,1 @@\n+\n@@ -97,1 +97,0 @@\n-\n@@ -99,0 +98,1 @@\n+\n@@ -101,0 +101,17 @@\n+\n+    \/\/ Identity values for reduction operations\n+    private static final $type$ ADD_IDENTITY = ($type$)0;\n+#if[BITWISE]\n+    private static final $type$ AND_IDENTITY = ($type$)-1;\n+#end[BITWISE]\n+    private static final $type$ FIRST_NONZERO_IDENTITY = ($type$)0;\n+    private static final $type$ MAX_IDENTITY = $Wideboxtype$.$MinValue$;\n+    private static final $type$ MIN_IDENTITY = $Wideboxtype$.$MaxValue$;\n+    private static final $type$ MUL_IDENTITY = ($type$)1;\n+#if[BITWISE]\n+    private static final $type$ OR_IDENTITY = ($type$)0;\n+    private static final $type$ SUADD_IDENTITY = ($type$)0;\n+    private static final $type$ UMAX_IDENTITY = ($type$)0;   \/\/ Minimum unsigned value\n+    private static final $type$ UMIN_IDENTITY = ($type$)-1;  \/\/ Maximum unsigned value\n+    private static final $type$ XOR_IDENTITY = ($type$)0;\n+#end[BITWISE]\n@@ -102,0 +119,1 @@\n+\n","filename":"test\/jdk\/jdk\/incubator\/vector\/templates\/Unit-header.template","additions":21,"deletions":3,"binary":false,"changes":24,"status":"modified"}]}