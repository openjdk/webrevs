{"files":[{"patch":"@@ -29,1 +29,0 @@\n-\n@@ -31,4 +30,0 @@\n-  TOOLS_CFLAGS := $(addprefix -I, \\\n-      $(ACCESSIBILITY_SRCDIR)\/include\/bridge \\\n-      $(ACCESSIBILITY_SRCDIR)\/common \\\n-      $(ACCESSIBILITY_SRCDIR)\/toolscommon)\n@@ -37,1 +32,2 @@\n-  # jabswitch\n+  # Build jabswitch\n+  ##############################################################################\n@@ -41,3 +37,0 @@\n-      SRC := $(ACCESSIBILITY_SRCDIR)\/jabswitch, \\\n-      INCLUDE_FILES := jabswitch.cpp, \\\n-      CFLAGS_FILTER_OUT := -Zc:wchar_t-, \\\n@@ -45,2 +38,0 @@\n-      CFLAGS := -Zc:wchar_t -analyze- -Od -Gd -D_WINDOWS -D_UNICODE \\\n-          -DUNICODE -RTC1 -EHsc, \\\n@@ -50,2 +41,3 @@\n-      LIBS := advapi32.lib version.lib user32.lib, \\\n-      VERSIONINFO_RESOURCE := $(ACCESSIBILITY_SRCDIR)\/common\/AccessBridgeStatusWindow.rc, \\\n+      LIBS_windows := advapi32.lib user32.lib version.lib, \\\n+      VERSIONINFO_RESOURCE := \\\n+          $(ACCESSIBILITY_SRCDIR)\/common\/AccessBridgeStatusWindow.rc, \\\n@@ -59,3 +51,2 @@\n-  # jaccessinspector\n-\n-  define SetupInspector\n+  # Setup rules to create 32\/64 bit version of jaccessinspector\n+  #\n@@ -64,1 +55,2 @@\n-\n+  ##############################################################################\n+  define SetupInspector\n@@ -67,7 +59,12 @@\n-      SRC := $(ACCESSIBILITY_SRCDIR)\/jaccessinspector $(ACCESSIBILITY_SRCDIR)\/common \\\n-          $(ACCESSIBILITY_SRCDIR)\/toolscommon $(ACCESSIBILITY_SRCDIR)\/bridge, \\\n-      CFLAGS := $(TOOLS_CFLAGS) -DACCESSBRIDGE_ARCH_$2 -EHsc, \\\n-      CXXFLAGS := $(TOOLS_CFLAGS) -DACCESSBRIDGE_ARCH_$2 -EHsc, \\\n-      LDFLAGS := -stack:655360, \\\n-      LIBS := advapi32.lib user32.lib, \\\n-      VERSIONINFO_RESOURCE := $(ACCESSIBILITY_SRCDIR)\/jaccessinspector\/jaccessinspectorWindow.rc, \\\n+      SRC := jaccessinspector, \\\n+      EXTRA_SRC := \\\n+          bridge \\\n+          common \\\n+          toolscommon, \\\n+      EXTRA_HEADER_DIRS := include\/bridge, \\\n+      CFLAGS := -DACCESSBRIDGE_ARCH_$2 -EHsc, \\\n+      CXXFLAGS := -DACCESSBRIDGE_ARCH_$2 -EHsc, \\\n+      LDFLAGS_windows := -stack:655360, \\\n+      LIBS_windows := advapi32.lib user32.lib, \\\n+      VERSIONINFO_RESOURCE := \\\n+          $(ACCESSIBILITY_SRCDIR)\/jaccessinspector\/jaccessinspectorWindow.rc, \\\n@@ -77,1 +74,0 @@\n-\n@@ -81,3 +77,1 @@\n-  # jaccesswalker\n-\n-  define SetupWalker\n+  # Setup rules to create 32\/64 bit version of jaccesswalker\n@@ -86,1 +80,2 @@\n-\n+  ##############################################################################\n+  define SetupWalker\n@@ -89,7 +84,12 @@\n-      SRC := $(ACCESSIBILITY_SRCDIR)\/jaccesswalker $(ACCESSIBILITY_SRCDIR)\/common \\\n-          $(ACCESSIBILITY_SRCDIR)\/toolscommon $(ACCESSIBILITY_SRCDIR)\/bridge, \\\n-      CFLAGS := $(TOOLS_CFLAGS) -DACCESSBRIDGE_ARCH_$2 -EHsc, \\\n-      CXXFLAGS := $(TOOLS_CFLAGS) -DACCESSBRIDGE_ARCH_$2 -EHsc, \\\n-      LDFLAGS := -stack:655360, \\\n-      LIBS := advapi32.lib comctl32.lib gdi32.lib user32.lib, \\\n-      VERSIONINFO_RESOURCE := $(ACCESSIBILITY_SRCDIR)\/jaccesswalker\/jaccesswalkerWindow.rc, \\\n+      SRC := jaccesswalker, \\\n+      EXTRA_SRC := \\\n+          bridge \\\n+          common \\\n+          toolscommon, \\\n+      EXTRA_HEADER_DIRS := include\/bridge, \\\n+      CFLAGS := -DACCESSBRIDGE_ARCH_$2 -EHsc, \\\n+      CXXFLAGS := -DACCESSBRIDGE_ARCH_$2 -EHsc, \\\n+      LDFLAGS_windows := -stack:655360, \\\n+      LIBS_windows := advapi32.lib comctl32.lib gdi32.lib user32.lib, \\\n+      VERSIONINFO_RESOURCE := \\\n+          $(ACCESSIBILITY_SRCDIR)\/jaccesswalker\/jaccesswalkerWindow.rc, \\\n@@ -99,1 +99,0 @@\n-\n@@ -111,1 +110,0 @@\n-\n@@ -113,2 +111,0 @@\n-\n-################################################################################\n","filename":"make\/modules\/jdk.accessibility\/Launcher.gmk","additions":36,"deletions":40,"binary":false,"changes":76,"status":"modified"},{"patch":"@@ -31,1 +31,0 @@\n-\n@@ -34,0 +33,6 @@\n+  ##############################################################################\n+  # Setup rules to create 32\/64 bit version of javaaccessbridge\n+  #\n+  # Parameter 1 Suffix\n+  # Parameter 2 ACCESSBRIDGE_ARCH_ suffix\n+  ##############################################################################\n@@ -35,4 +40,1 @@\n-    # Parameter 1 Suffix\n-    # Parameter 2 ACCESSBRIDGE_ARCH_ suffix\n-\n-    $(call SetupJdkLibrary, BUILD_JAVAACCESSBRIDGE$1, \\\n+    $(call SetupJdkLibrary, BUILD_LIBJAVAACCESSBRIDGE$1, \\\n@@ -44,1 +46,0 @@\n-        CFLAGS_FILTER_OUT := -MD, \\\n@@ -46,1 +47,0 @@\n-        CFLAGS := -MT -DACCESSBRIDGE_ARCH_$2, \\\n@@ -51,5 +51,6 @@\n-        LIBS := kernel32.lib user32.lib gdi32.lib \\\n-            winspool.lib comdlg32.lib advapi32.lib shell32.lib \\\n-            $(SUPPORT_OUTPUTDIR)\/native\/java.desktop\/libjawt\/jawt.lib \\\n-            ole32.lib oleaut32.lib uuid.lib odbc32.lib odbccp32.lib, \\\n-        VERSIONINFO_RESOURCE := $(ACCESSIBILITY_SRCDIR)\/common\/AccessBridgeStatusWindow.rc, \\\n+        JDK_LIBS_windows := $(SUPPORT_OUTPUTDIR)\/native\/java.desktop\/libjawt\/jawt.lib, \\\n+        LIBS_windows := advapi32.lib comdlg32.lib gdi32.lib kernel32.lib \\\n+            odbc32.lib odbccp32.lib ole32.lib oleaut32.lib shell32.lib \\\n+            user32.lib uuid.lib winspool.lib, \\\n+        VERSIONINFO_RESOURCE := \\\n+            $(ACCESSIBILITY_SRCDIR)\/common\/AccessBridgeStatusWindow.rc, \\\n@@ -58,1 +59,1 @@\n-    $$(BUILD_JAVAACCESSBRIDGE$1): $(call FindStaticLib, java.desktop, jawt, \/libjawt)\n+    $$(BUILD_LIBJAVAACCESSBRIDGE$1): $(call FindStaticLib, java.desktop, jawt, \/libjawt)\n@@ -60,1 +61,1 @@\n-    TARGETS += $$(BUILD_JAVAACCESSBRIDGE$1)\n+    TARGETS += $$(BUILD_LIBJAVAACCESSBRIDGE$1)\n@@ -63,0 +64,6 @@\n+  ##############################################################################\n+  # Setup rules to create 32\/64 bit version of windowsaccessbridge\n+  #\n+  # Parameter 1 Suffix\n+  # Parameter 2 ACCESSBRIDGE_ARCH_ suffix\n+  ##############################################################################\n@@ -64,3 +71,1 @@\n-    # Parameter 1 Suffix\n-    # Parameter 2 ACCESSBRIDGE_ARCH_ suffix\n-    $(call SetupJdkLibrary, BUILD_WINDOWSACCESSBRIDGE$1, \\\n+    $(call SetupJdkLibrary, BUILD_LIBWINDOWSACCESSBRIDGE$1, \\\n@@ -72,1 +77,0 @@\n-        CFLAGS := -DACCESSBRIDGE_ARCH_$2, \\\n@@ -78,4 +82,5 @@\n-        LIBS := kernel32.lib user32.lib gdi32.lib \\\n-            winspool.lib comdlg32.lib advapi32.lib shell32.lib \\\n-            ole32.lib oleaut32.lib uuid.lib odbc32.lib odbccp32.lib, \\\n-        VERSIONINFO_RESOURCE := $(ACCESSIBILITY_SRCDIR)\/common\/AccessBridgeStatusWindow.rc, \\\n+        LIBS_windows := advapi32.lib comdlg32.lib gdi32.lib kernel32.lib \\\n+            odbc32.lib odbccp32.lib ole32.lib oleaut32.lib shell32.lib \\\n+            user32.lib uuid.lib winspool.lib, \\\n+        VERSIONINFO_RESOURCE := \\\n+            $(ACCESSIBILITY_SRCDIR)\/common\/AccessBridgeStatusWindow.rc, \\\n@@ -84,2 +89,1 @@\n-    TARGETS += $$(BUILD_WINDOWSACCESSBRIDGE$1)\n-\n+    TARGETS += $$(BUILD_LIBWINDOWSACCESSBRIDGE$1)\n@@ -88,1 +92,4 @@\n-  define SetupAccessBridgeSysInfo\n+  ifeq ($(call isTargetCpuBits, 32), true)\n+    ############################################################################\n+    # Build libjabsysinfo\n+    ############################################################################\n@@ -90,1 +97,1 @@\n-    $(call SetupJdkLibrary, BUILD_ACCESSBRIDGESYSINFO, \\\n+    $(eval $(call SetupJdkLibrary, BUILD_LIBJABSYSINFO, \\\n@@ -93,1 +100,2 @@\n-        VERSIONINFO_RESOURCE := $(ACCESSIBILITY_SRCDIR)\/common\/AccessBridgeStatusWindow.rc, \\\n+        VERSIONINFO_RESOURCE := \\\n+            $(ACCESSIBILITY_SRCDIR)\/common\/AccessBridgeStatusWindow.rc, \\\n@@ -96,3 +104,2 @@\n-    TARGETS += $$(BUILD_ACCESSBRIDGESYSINFO)\n-\n-  endef\n+    TARGETS += $(BUILD_LIBJABSYSINFO)\n+  endif\n@@ -101,1 +108,0 @@\n-    $(eval $(call SetupAccessBridgeSysInfo))\n@@ -110,1 +116,0 @@\n-\n@@ -112,2 +117,0 @@\n-\n-################################################################################\n","filename":"make\/modules\/jdk.accessibility\/Lib.gmk","additions":37,"deletions":34,"binary":false,"changes":71,"status":"modified"}]}