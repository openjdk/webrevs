{"files":[{"patch":"@@ -932,1 +932,1 @@\n-    private long getPrintDC() {\n+    private synchronized long getPrintDC() {\n@@ -936,1 +936,1 @@\n-    private void setPrintDC(long mPrintDC) {\n+    private synchronized void setPrintDC(long mPrintDC) {\n@@ -940,1 +940,1 @@\n-    private long getDevMode() {\n+    private synchronized long getDevMode() {\n@@ -944,1 +944,1 @@\n-    private void setDevMode(long mPrintHDevMode) {\n+    private synchronized void setDevMode(long mPrintHDevMode) {\n@@ -948,1 +948,1 @@\n-    private long getDevNames() {\n+    private synchronized long getDevNames() {\n@@ -952,1 +952,1 @@\n-    private void setDevNames(long mPrintHDevNames) {\n+    private synchronized void setDevNames(long mPrintHDevNames) {\n@@ -956,1 +956,1 @@\n-    protected void beginPath() {\n+    protected synchronized void beginPath() {\n@@ -960,1 +960,1 @@\n-    protected void endPath() {\n+    protected synchronized void endPath() {\n@@ -975,1 +975,1 @@\n-    protected void closeFigure() {\n+    protected synchronized void closeFigure() {\n@@ -979,1 +979,1 @@\n-    protected void fillPath() {\n+    protected synchronized void fillPath() {\n@@ -983,1 +983,1 @@\n-    protected void moveTo(float x, float y) {\n+    protected synchronized void moveTo(float x, float y) {\n@@ -987,1 +987,1 @@\n-    protected void lineTo(float x, float y) {\n+    protected synchronized void lineTo(float x, float y) {\n@@ -991,1 +991,1 @@\n-    protected void polyBezierTo(float control1x, float control1y,\n+    protected synchronized void polyBezierTo(float control1x, float control1y,\n@@ -1006,1 +1006,1 @@\n-    protected void setPolyFillMode(int fillRule) {\n+    protected synchronized void setPolyFillMode(int fillRule) {\n@@ -1013,1 +1013,1 @@\n-    private int setAdvancedGraphicsMode() {\n+    private synchronized int setAdvancedGraphicsMode() {\n@@ -1023,1 +1023,1 @@\n-    private void setGraphicsMode(int mode) {\n+    private synchronized void setGraphicsMode(int mode) {\n@@ -1030,1 +1030,1 @@\n-    private void scale(double scaleX, double scaleY) {\n+    private synchronized void scale(double scaleX, double scaleY) {\n@@ -1037,1 +1037,1 @@\n-    private void getWorldTransform(double[] transform) {\n+    private synchronized void getWorldTransform(double[] transform) {\n@@ -1044,1 +1044,1 @@\n-    private void setWorldTransform(double[] transform) {\n+    private synchronized void setWorldTransform(double[] transform) {\n@@ -1054,1 +1054,1 @@\n-    protected void selectSolidBrush(Color color) {\n+    protected synchronized void selectSolidBrush(Color color) {\n@@ -1073,1 +1073,1 @@\n-    protected int getPenX() {\n+    protected synchronized int getPenX() {\n@@ -1083,1 +1083,1 @@\n-    protected int getPenY() {\n+    protected synchronized int getPenY() {\n@@ -1092,1 +1092,1 @@\n-    protected void selectClipPath() {\n+    protected synchronized void selectClipPath() {\n@@ -1097,1 +1097,1 @@\n-    protected void frameRect(float x, float y, float width, float height) {\n+    protected synchronized void frameRect(float x, float y, float width, float height) {\n@@ -1101,1 +1101,1 @@\n-    protected void fillRect(float x, float y, float width, float height,\n+    protected synchronized void fillRect(float x, float y, float width, float height,\n@@ -1112,1 +1112,1 @@\n-    protected void selectPen(float width, Color color) {\n+    protected synchronized void selectPen(float width, Color color) {\n@@ -1123,1 +1123,1 @@\n-    protected boolean selectStylePen(int cap, int join, float width,\n+    protected synchronized boolean selectStylePen(int cap, int join, float width,\n@@ -1155,1 +1155,1 @@\n-    protected boolean setFont(String family, float size, int style,\n+    protected synchronized boolean setFont(String family, float size, int style,\n@@ -1190,1 +1190,1 @@\n-    protected void setTextColor(Color color) {\n+    protected synchronized void setTextColor(Color color) {\n@@ -1209,1 +1209,1 @@\n-    protected void textOut(String str, float x, float y,\n+    protected synchronized void textOut(String str, float x, float y,\n@@ -1229,1 +1229,1 @@\n-    protected void glyphsOut(int []glyphs, float x, float y,\n+    protected synchronized void glyphsOut(int []glyphs, float x, float y,\n@@ -1257,1 +1257,1 @@\n-    protected int getGDIAdvance(String text) {\n+    protected synchronized int getGDIAdvance(String text) {\n@@ -1278,1 +1278,1 @@\n-    protected void drawImage3ByteBGR(byte[] image,\n+    protected synchronized void drawImage3ByteBGR(byte[] image,\n@@ -1309,1 +1309,1 @@\n-    protected void drawDIBImage(byte[] image,\n+    protected synchronized void drawDIBImage(byte[] image,\n@@ -1341,1 +1341,1 @@\n-    protected void startPage(PageFormat format, Printable painter,\n+    protected synchronized void startPage(PageFormat format, Printable painter,\n@@ -1358,1 +1358,1 @@\n-    protected void endPage(PageFormat format, Printable painter,\n+    protected synchronized void endPage(PageFormat format, Printable painter,\n@@ -1405,1 +1405,1 @@\n-    protected native void initPrinter();\n+    protected synchronized native void initPrinter();\n@@ -1418,1 +1418,1 @@\n-    private native boolean _startDoc(String dest, String jobName)\n+    private synchronized native boolean _startDoc(String dest, String jobName)\n@@ -1421,1 +1421,1 @@\n-    protected void startDoc() throws PrinterException {\n+    protected synchronized void startDoc() throws PrinterException {\n@@ -1432,1 +1432,1 @@\n-    protected native void endDoc();\n+    protected synchronized native void endDoc();\n@@ -1439,1 +1439,1 @@\n-    protected native void abortDoc();\n+    protected synchronized native void abortDoc();\n@@ -1444,1 +1444,1 @@\n-    private static native void deleteDC(long dc, long devmode, long devnames);\n+    private static synchronized native void deleteDC(long dc, long devmode, long devnames);\n@@ -1450,1 +1450,1 @@\n-    protected native void deviceStartPage(PageFormat format, Printable painter,\n+    protected synchronized native void deviceStartPage(PageFormat format, Printable painter,\n@@ -1456,1 +1456,1 @@\n-    protected native void deviceEndPage(PageFormat format, Printable painter,\n+    protected synchronized native void deviceEndPage(PageFormat format, Printable painter,\n@@ -1467,1 +1467,1 @@\n-    protected native void printBand(byte[] data, int x, int y,\n+    protected synchronized native void printBand(byte[] data, int x, int y,\n@@ -1474,1 +1474,1 @@\n-    protected native void beginPath(long printDC);\n+    protected synchronized native void beginPath(long printDC);\n@@ -1480,1 +1480,1 @@\n-    protected native void endPath(long printDC);\n+    protected synchronized native void endPath(long printDC);\n@@ -1486,1 +1486,1 @@\n-    protected native void closeFigure(long printDC);\n+    protected synchronized native void closeFigure(long printDC);\n@@ -1492,1 +1492,1 @@\n-    protected native void fillPath(long printDC);\n+    protected synchronized native void fillPath(long printDC);\n@@ -1498,1 +1498,1 @@\n-    protected native void moveTo(long printDC, float x, float y);\n+    protected synchronized native void moveTo(long printDC, float x, float y);\n@@ -1504,1 +1504,1 @@\n-    protected native void lineTo(long printDC, float x, float y);\n+    protected synchronized native void lineTo(long printDC, float x, float y);\n@@ -1506,1 +1506,1 @@\n-    protected native void polyBezierTo(long printDC,\n+    protected synchronized native void polyBezierTo(long printDC,\n@@ -1517,1 +1517,1 @@\n-    protected native void setPolyFillMode(long printDC, int fillRule);\n+    protected synchronized native void setPolyFillMode(long printDC, int fillRule);\n@@ -1523,1 +1523,1 @@\n-    protected native int setAdvancedGraphicsMode(long printDC);\n+    protected synchronized native int setAdvancedGraphicsMode(long printDC);\n@@ -1532,1 +1532,1 @@\n-    protected native void setGraphicsMode(long printDC, int mode);\n+    protected synchronized native void setGraphicsMode(long printDC, int mode);\n@@ -1538,1 +1538,1 @@\n-    protected native void scale(long printDC, double scaleX, double scaleY);\n+    protected synchronized native void scale(long printDC, double scaleX, double scaleY);\n@@ -1544,1 +1544,1 @@\n-    protected native void getWorldTransform(long printDC, double[] transform);\n+    protected synchronized native void getWorldTransform(long printDC, double[] transform);\n@@ -1550,1 +1550,1 @@\n-    protected native void setWorldTransform(long printDC, double[] transform);\n+    protected synchronized native void setWorldTransform(long printDC, double[] transform);\n@@ -1558,1 +1558,1 @@\n-    protected native void selectSolidBrush(long printDC,\n+    protected synchronized native void selectSolidBrush(long printDC,\n@@ -1566,1 +1566,1 @@\n-    protected native int getPenX(long printDC);\n+    protected synchronized native int getPenX(long printDC);\n@@ -1573,1 +1573,1 @@\n-    protected native int getPenY(long printDC);\n+    protected synchronized native int getPenY(long printDC);\n@@ -1579,1 +1579,1 @@\n-    protected native void selectClipPath(long printDC);\n+    protected synchronized native void selectClipPath(long printDC);\n@@ -1584,1 +1584,1 @@\n-    protected native void frameRect(long printDC, float x, float y,\n+    protected synchronized native void frameRect(long printDC, float x, float y,\n@@ -1591,1 +1591,1 @@\n-    protected native void fillRect(long printDC, float x, float y,\n+    protected synchronized native void fillRect(long printDC, float x, float y,\n@@ -1599,1 +1599,1 @@\n-    protected native void selectPen(long printDC, float width,\n+    protected synchronized native void selectPen(long printDC, float width,\n@@ -1606,1 +1606,1 @@\n-    protected native boolean selectStylePen(long printDC, long cap,\n+    protected synchronized native boolean selectStylePen(long printDC, long cap,\n@@ -1614,1 +1614,1 @@\n-    protected native boolean setFont(long printDC, String familyName,\n+    protected synchronized native boolean setFont(long printDC, String familyName,\n@@ -1625,1 +1625,1 @@\n-    protected native void setTextColor(long printDC,\n+    protected synchronized native void setTextColor(long printDC,\n@@ -1634,1 +1634,1 @@\n-    protected native void textOut(long printDC, String text,\n+    protected synchronized native void textOut(long printDC, String text,\n@@ -1639,1 +1639,1 @@\n-    private native int getGDIAdvance(long printDC, String text);\n+    private synchronized native int getGDIAdvance(long printDC, String text);\n@@ -1656,1 +1656,1 @@\n-    private native void drawDIBImage(long printDC, byte[] image,\n+    private synchronized native void drawDIBImage(long printDC, byte[] image,\n","filename":"src\/java.desktop\/windows\/classes\/sun\/awt\/windows\/WPrinterJob.java","additions":71,"deletions":71,"binary":false,"changes":142,"status":"modified"},{"patch":"@@ -1526,0 +1526,1 @@\n+        AwtPrintControl::setPrintDC(env, self, (HDC)NULL);\n@@ -1586,1 +1587,3 @@\n-    DeletePrintDC((HDC)dc);\n+    if ((HDC)dc != NULL) {\n+        DeletePrintDC((HDC)dc);\n+     }\n@@ -1853,0 +1856,3 @@\n+    if ((HDC)printDC == NULL) {\n+         return;\n+     }\n@@ -1865,0 +1871,4 @@\n+    if ((HDC)printDC == NULL) {\n+         return;\n+     }\n+\n@@ -1879,0 +1889,4 @@\n+    if ((HDC)printDC == NULL) {\n+         return;\n+     }\n+\n@@ -1893,0 +1907,4 @@\n+    if ((HDC)printDC == NULL) {\n+         return;\n+     }\n+\n@@ -1907,0 +1925,4 @@\n+    if ((HDC)printDC == NULL) {\n+         return;\n+     }\n+\n@@ -1921,0 +1943,4 @@\n+    if ((HDC)printDC == NULL) {\n+         return;\n+     }\n+\n@@ -1936,0 +1962,4 @@\n+    if ((HDC)printDC == NULL) {\n+         return;\n+     }\n+\n@@ -1954,0 +1984,4 @@\n+    if ((HDC)printDC == NULL) {\n+         return;\n+     }\n+\n@@ -1977,0 +2011,4 @@\n+    if ((HDC)printDC == NULL) {\n+         return;\n+     }\n+\n@@ -1991,0 +2029,4 @@\n+    if ((HDC)printDC == NULL) {\n+         return 0;\n+     }\n+\n@@ -2007,0 +2049,4 @@\n+    if ((HDC)printDC == NULL) {\n+         return;\n+     }\n+\n@@ -2022,0 +2068,4 @@\n+    if ((HDC)printDC == NULL) {\n+         return;\n+     }\n+\n@@ -2046,0 +2096,4 @@\n+    if ((HDC)printDC == NULL) {\n+         return;\n+     }\n+\n@@ -2073,0 +2127,4 @@\n+    if ((HDC)printDC == NULL) {\n+         return;\n+     }\n+\n@@ -2103,0 +2161,4 @@\n+    if ((HDC)printDC == NULL) {\n+         return;\n+     }\n+\n@@ -2120,0 +2182,4 @@\n+    if ((HDC)printDC == NULL) {\n+         return 0;\n+     }\n+\n@@ -2138,0 +2204,4 @@\n+    if ((HDC)printDC == NULL) {\n+         return 0;\n+     }\n+\n@@ -2156,0 +2226,4 @@\n+    if ((HDC)printDC == NULL) {\n+         return;\n+     }\n+\n@@ -2173,0 +2247,4 @@\n+    if ((HDC)printDC == NULL) {\n+         return;\n+     }\n+\n@@ -2203,0 +2281,4 @@\n+    if ((HDC)printDC == NULL) {\n+         return;\n+     }\n+\n@@ -2231,0 +2313,4 @@\n+  if ((HDC)printDC == NULL) {\n+       return;\n+  }\n+\n@@ -2257,0 +2343,4 @@\n+    if ((HDC)printDC == NULL) {\n+         return JNI_FALSE;\n+     }\n+\n@@ -2290,0 +2380,4 @@\n+    if ((HDC)printDC == NULL) {\n+         return JNI_FALSE;\n+    }\n+\n@@ -2320,0 +2414,4 @@\n+    if ((HDC)printDC == NULL) {\n+         return JNI_FALSE;\n+     }\n+\n@@ -2481,0 +2579,4 @@\n+    if ((HDC)printDC == NULL) {\n+         return;\n+     }\n+\n@@ -2488,0 +2590,5 @@\n+\n+    if ((HDC)printDC == NULL) {\n+         return 0;\n+     }\n+\n@@ -2541,0 +2648,3 @@\n+    if ((HDC)printDC == NULL) {\n+         return;\n+     }\n@@ -2835,0 +2945,4 @@\n+    if ((HDC)printDC == NULL) {\n+        return;\n+    }\n+\n@@ -2925,0 +3039,4 @@\n+    if ((HDC)printDC == NULL) {\n+         return;\n+     }\n+\n@@ -2969,0 +3087,4 @@\n+    if ((HDC)printDC == NULL) {\n+         return result;\n+     }\n+\n@@ -3710,0 +3832,4 @@\n+    if ((HDC)printDC == NULL) {\n+         return;\n+     }\n+\n","filename":"src\/java.desktop\/windows\/native\/libawt\/windows\/awt_PrintJob.cpp","additions":127,"deletions":1,"binary":false,"changes":128,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-  @bug 8370141\n+  @bug 8370141 8370637\n","filename":"test\/jdk\/java\/awt\/PrintJob\/PrintJobAfterEndTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n- * @bug 8370141\n+ * @bug 8370141 8370637\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintAfterEndTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}