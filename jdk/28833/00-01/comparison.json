{"files":[{"patch":"@@ -51,0 +51,1 @@\n+import jdk.jpackage.internal.util.Slot;\n@@ -106,0 +107,6 @@\n+        final var runner = new Runner(t -> {\n+            new ErrorReporter(_ -> {\n+                t.printStackTrace(err);\n+            }, Log::fatalError, Log.isVerbose()).reportError(t);\n+        });\n+\n@@ -107,7 +114,15 @@\n-            try {\n-                args = CommandLine.parse(args);\n-            } catch (FileNotFoundException|NoSuchFileException ex) {\n-                Log.fatalError(I18N.format(\"ERR_CannotParseOptions\", ex.getMessage()));\n-                return 1;\n-            } catch (IOException ex) {\n-                throw ExceptionBox.rethrowUnchecked(ex);\n+            var mappedArgs = Slot.<String[]>createEmpty();\n+\n+            int preprocessStatus = runner.run(() -> {\n+                try {\n+                    mappedArgs.set(CommandLine.parse(args));\n+                    return List.of();\n+                } catch (FileNotFoundException|NoSuchFileException ex) {\n+                    return List.of(new JPackageException(I18N.format(\"ERR_CannotParseOptions\", ex.getMessage()), ex));\n+                } catch (IOException ex) {\n+                    return List.of(ex);\n+                }\n+            });\n+\n+            if (preprocessStatus != 0) {\n+                return preprocessStatus;\n@@ -119,1 +134,1 @@\n-            final var parseResult = Utils.buildParser(OperatingSystem.current(), bundlingEnv).create().apply(args);\n+            final var parseResult = Utils.buildParser(OperatingSystem.current(), bundlingEnv).create().apply(mappedArgs.get());\n@@ -121,5 +136,1 @@\n-            return new Runner(t -> {\n-                new ErrorReporter(_ -> {\n-                    t.printStackTrace(err);\n-                }, Log::fatalError, Log.isVerbose()).reportError(t);\n-            }).run(() -> {\n+            return runner.run(() -> {\n","filename":"src\/jdk.jpackage\/share\/classes\/jdk\/jpackage\/internal\/cli\/Main.java","additions":24,"deletions":13,"binary":false,"changes":37,"status":"modified"},{"patch":"@@ -33,1 +33,9 @@\n-            this(DottedVersion.greedy(app.version()));\n+            this(parse(app.version()));\n+        }\n+\n+        private static DottedVersion parse(String strVersion) {\n+            try {\n+                return DottedVersion.greedy(strVersion);\n+            } catch (IllegalArgumentException ex) {\n+                throw new JPackageException(ex.getMessage(), ex);\n+            }\n","filename":"src\/jdk.jpackage\/windows\/classes\/jdk\/jpackage\/internal\/model\/WinApplicationMixin.java","additions":9,"deletions":1,"binary":false,"changes":10,"status":"modified"}]}