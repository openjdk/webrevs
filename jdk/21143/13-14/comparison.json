{"files":[{"patch":"@@ -2437,0 +2437,6 @@\n+\n+    const char* prop = Arguments::get_property(\"java.security.manager\");\n+    if (prop != nullptr && strcmp(prop, \"disallow\") != 0) {\n+      log_error(cds)(\"CDS archive has aot-linked classes. It cannot be used with -Djava.security.manager=%s.\", prop);\n+      return false;\n+    }\n","filename":"src\/hotspot\/share\/cds\/filemap.cpp","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -28,1 +28,0 @@\n-#include \"classfile\/systemDictionary.hpp\"\n@@ -194,1 +193,0 @@\n-  SystemDictionary::restore_archived_method_handle_intrinsics();\n","filename":"src\/hotspot\/share\/runtime\/init.cpp","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -734,0 +734,1 @@\n+    SystemDictionary::restore_archived_method_handle_intrinsics();\n","filename":"src\/hotspot\/share\/runtime\/threads.cpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -70,0 +70,8 @@\n+        testCase(\"Cannot use security manager\");\n+        TestCommon.run(\"-cp\", appJar, \"-Xlog:cds\", \"-Djava.security.manager=allow\")\n+            .assertAbnormalExit(\"CDS archive has aot-linked classes.\" +\n+                                \" It cannot be used with -Djava.security.manager=allow.\");\n+        TestCommon.run(\"-cp\", appJar, \"-Xlog:cds\", \"-Djava.security.manager=default\")\n+            .assertAbnormalExit(\"CDS archive has aot-linked classes.\" +\n+                                \" It cannot be used with -Djava.security.manager=default.\");\n+\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/aotClassLinking\/AOTClassLinkingVMOptions.java","additions":8,"deletions":0,"binary":false,"changes":8,"status":"modified"}]}