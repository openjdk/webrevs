{"files":[{"patch":"@@ -31,0 +31,1 @@\n+#include \"runtime\/atomic.hpp\"\n@@ -34,1 +35,1 @@\n-CompileLog* CompileLog::_first = nullptr;\n+CompileLog* volatile CompileLog::_list_head = nullptr;\n@@ -52,3 +53,6 @@\n-  { MutexLocker locker(CompileTaskAlloc_lock);\n-    _next = _first;\n-    _first = this;\n+  while (true) {\n+    CompileLog* head = Atomic::load_acquire(&_list_head);\n+    _next = head;\n+    if (Atomic::cmpxchg(&_list_head, head, this) == head) {\n+      break;\n+    }\n@@ -205,1 +209,1 @@\n-  CompileLog* log = _first;\n+  CompileLog* log = Atomic::load_acquire(&_list_head);\n@@ -293,1 +297,1 @@\n-  _first = nullptr;\n+  Atomic::store(&_list_head, (CompileLog*)nullptr);\n","filename":"src\/hotspot\/share\/compiler\/compileLog.cpp","additions":10,"deletions":6,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -56,1 +56,1 @@\n-  static CompileLog* _first;     \/\/ head of static chain\n+  static CompileLog* volatile _list_head; \/\/ head of static chain\n","filename":"src\/hotspot\/share\/compiler\/compileLog.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}