{"files":[{"patch":"@@ -97,0 +97,7 @@\n+                                                                            \\\n+  product(bool, ArchivePreTouch, true, DIAGNOSTIC,                          \\\n+          \"Pre-touch archive regions, regardless of AlwaysPreTouch mode.\")  \\\n+                                                                            \\\n+  product(bool, ArchiveParallelRelocation, true, DIAGNOSTIC,                \\\n+          \"Use parallel relocation code to speed up startup.\")              \\\n+                                                                            \\\n","filename":"src\/hotspot\/share\/cds\/cds_globals.hpp","additions":7,"deletions":0,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -1739,1 +1739,1 @@\n-                             false, \/\/ Pretouch cannot work with read-only memory.\n+                             (ArchivePreTouch || AlwaysPreTouch) ? false : read_only,\n@@ -1741,1 +1741,1 @@\n-  if (mem != nullptr) {\n+  if (mem != nullptr && (ArchivePreTouch || AlwaysPreTouch)) {\n@@ -2015,2 +2015,7 @@\n-    SharedDataRelocationTask task(&rw_ptrmap, &ro_ptrmap, &rw_patcher, &ro_patcher);\n-    _archive_workers.run_task(&task);\n+    if (ArchiveParallelRelocation) {\n+      SharedDataRelocationTask task(&rw_ptrmap, &ro_ptrmap, &rw_patcher, &ro_patcher);\n+      _archive_workers.run_task(&task);\n+    } else {\n+      rw_ptrmap.iterate(&rw_patcher);\n+      ro_ptrmap.iterate(&ro_patcher);\n+    }\n","filename":"src\/hotspot\/share\/cds\/filemap.cpp","additions":9,"deletions":4,"binary":false,"changes":13,"status":"modified"}]}