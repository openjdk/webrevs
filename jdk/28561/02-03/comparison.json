{"files":[{"patch":"@@ -248,3 +248,10 @@\n-  size_t threshold_by_growth_into_percent_remaining = (size_t)\n-    (_live_bytes_after_last_mark + ((ShenandoahHeap::heap()->soft_max_capacity() - _live_bytes_after_last_mark)\n-                                    * ShenandoahMinOldGenGrowthRemainingHeapPercent \/ 100.0));\n+  size_t soft_max_capacity = ShenandoahHeap::heap()->soft_max_capacity();\n+  size_t threshold_by_growth_into_percent_remaining;\n+  if (_live_bytes_after_last_mark < soft_max_capacity) {\n+    threshold_by_growth_into_percent_remaining = (size_t)\n+      (_live_bytes_after_last_mark + ((soft_max_capacity - _live_bytes_after_last_mark)\n+                                      * ShenandoahMinOldGenGrowthRemainingHeapPercent \/ 100.0));\n+  } else {\n+    \/\/ we're already consuming more than soft max capacity, so we should start old GC right away.\n+    threshold_by_growth_into_percent_remaining = soft_max_capacity;\n+  }\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahOldGeneration.cpp","additions":10,"deletions":3,"binary":false,"changes":13,"status":"modified"}]}