{"files":[{"patch":"@@ -318,1 +318,1 @@\n-        char* s = NEW_C_HEAP_ARRAY(char, v->str.length+1,  mtCompiler);\n+        char* s = NEW_C_HEAP_ARRAY(char, v->str.length + 1, mtCompiler);\n@@ -321,1 +321,2 @@\n-        (set->*test)((void *)&s);  \/\/ Takes ownership.\n+\n+        bool valid = true;\n@@ -326,1 +327,2 @@\n-          if (!validator.is_valid()) {\n+          valid = validator.is_valid();\n+          if (!valid) {\n@@ -328,1 +330,0 @@\n-            return false;\n@@ -333,1 +334,2 @@\n-          if (!validator.is_valid()) {\n+          valid = validator.is_valid();\n+          if (!valid) {\n@@ -335,1 +337,0 @@\n-            return false;\n@@ -341,1 +342,4 @@\n-          if (!validator.is_valid()) {\n+          valid = validator.is_valid();\n+          if (valid) {\n+            set->set_ideal_phase_mask(mask);\n+          } else {\n@@ -343,1 +347,0 @@\n-            return false;\n@@ -345,1 +348,0 @@\n-          set->set_ideal_phase_mask(mask);\n@@ -347,0 +349,6 @@\n+\n+        if (!valid) {\n+          FREE_C_HEAP_ARRAY(char, s);\n+          return false;\n+        }\n+        (set->*test)((void *)&s);  \/\/ Takes ownership.\n","filename":"src\/hotspot\/share\/compiler\/directivesParser.cpp","additions":17,"deletions":9,"binary":false,"changes":26,"status":"modified"}]}