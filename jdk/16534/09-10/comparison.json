{"files":[{"patch":"@@ -217,0 +217,18 @@\n+bool C2Compiler::is_intrinsic_supported(vmIntrinsics::ID id, BasicType bt) {\n+  assert(id != vmIntrinsics::_none, \"must be a VM intrinsic\");\n+\n+  if (id < vmIntrinsics::FIRST_ID || id > vmIntrinsics::LAST_COMPILER_INLINE) {\n+    return false;\n+  }\n+\n+  switch (id) {\n+  case vmIntrinsics::_arraySort:\n+  case vmIntrinsics::_arrayPartition:\n+    if (!Matcher::supports_simd_sort(bt)) return false;\n+    break;\n+  default:\n+    return false;\n+  }\n+  return true;\n+}\n+\n","filename":"src\/hotspot\/share\/opto\/c2compiler.cpp","additions":18,"deletions":0,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -69,0 +69,2 @@\n+  \/\/ Return true if the intrinsic `id` is supported by C2 for a given basictype `bt`\n+  static bool is_intrinsic_supported(vmIntrinsics::ID id, BasicType bt);\n","filename":"src\/hotspot\/share\/opto\/c2compiler.hpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -296,2 +296,2 @@\n-  case vmIntrinsics::_arraySort:                return inline_array_sort();\n-  case vmIntrinsics::_arrayPartition:           return inline_array_partition();\n+  case vmIntrinsics::_arraySort:                return inline_array_sort(intrinsic_id());\n+  case vmIntrinsics::_arrayPartition:           return inline_array_partition(intrinsic_id());\n@@ -5370,1 +5370,1 @@\n-bool LibraryCallKit::inline_array_partition() {\n+bool LibraryCallKit::inline_array_partition(vmIntrinsics::ID id) {\n@@ -5391,1 +5391,1 @@\n-    if (!Matcher::supports_simd_sort(bt)) {\n+    if (!C2Compiler::is_intrinsic_supported(id, bt)) {\n@@ -5436,1 +5436,1 @@\n-bool LibraryCallKit::inline_array_sort() {\n+bool LibraryCallKit::inline_array_sort(vmIntrinsics::ID id) {\n@@ -5448,1 +5448,1 @@\n-  if (!Matcher::supports_simd_sort(bt)) {\n+  if (!C2Compiler::is_intrinsic_supported(id, bt)) {\n","filename":"src\/hotspot\/share\/opto\/library_call.cpp","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -280,2 +280,2 @@\n-  bool inline_array_sort();\n-  bool inline_array_partition();\n+  bool inline_array_sort(vmIntrinsics::ID id);\n+  bool inline_array_partition(vmIntrinsics::ID id);\n","filename":"src\/hotspot\/share\/opto\/library_call.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}