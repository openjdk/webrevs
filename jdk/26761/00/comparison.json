{"files":[{"patch":"@@ -45,1 +45,2 @@\n-  VMATree::SummaryDiff diff = file->_tree.commit_mapping(offset, size, regiondata);\n+  VMATree::SummaryDiff diff;\n+  file->_tree.commit_mapping(offset, size, regiondata, diff);\n@@ -54,1 +55,2 @@\n-  VMATree::SummaryDiff diff = file->_tree.release_mapping(offset, size);\n+  VMATree::SummaryDiff diff;\n+  file->_tree.release_mapping(offset, size, diff);\n","filename":"src\/hotspot\/share\/nmt\/memoryFileTracker.cpp","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -26,2 +26,2 @@\n-VMATree::SummaryDiff RegionsTree::commit_region(address addr, size_t size, const NativeCallStack& stack) {\n-  return commit_mapping((VMATree::position)addr, size, make_region_data(stack, mtNone), \/*use tag inplace*\/ true);\n+void RegionsTree::commit_region(address addr, size_t size, const NativeCallStack& stack, VMATree::SummaryDiff& diff) {\n+  commit_mapping((VMATree::position)addr, size, make_region_data(stack, mtNone), diff, \/*use tag inplace*\/ true);\n@@ -30,2 +30,2 @@\n-VMATree::SummaryDiff RegionsTree::uncommit_region(address addr, size_t size) {\n-  return uncommit_mapping((VMATree::position)addr, size, make_region_data(NativeCallStack::empty_stack(), mtNone));\n+void RegionsTree::uncommit_region(address addr, size_t size, VMATree::SummaryDiff& diff) {\n+  uncommit_mapping((VMATree::position)addr, size, make_region_data(NativeCallStack::empty_stack(), mtNone), diff);\n","filename":"src\/hotspot\/share\/nmt\/regionsTree.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -45,2 +45,2 @@\n-  SummaryDiff commit_region(address addr, size_t size, const NativeCallStack& stack);\n-  SummaryDiff uncommit_region(address addr, size_t size);\n+  void commit_region(address addr, size_t size, const NativeCallStack& stack, SummaryDiff& diff);\n+  void uncommit_region(address addr, size_t size, SummaryDiff& diff);\n","filename":"src\/hotspot\/share\/nmt\/regionsTree.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -73,1 +73,2 @@\n-  VMATree::SummaryDiff diff = tree()->reserve_mapping((size_t)base_addr, size, tree()->make_region_data(stack, mem_tag));\n+  VMATree::SummaryDiff diff;\n+  tree()->reserve_mapping((size_t)base_addr, size, tree()->make_region_data(stack, mem_tag), diff);\n@@ -152,1 +153,2 @@\n-    VMATree::SummaryDiff diff = tree()->commit_region(addr, size, stack);\n+    VMATree::SummaryDiff diff;\n+    tree()->commit_region(addr, size, stack, diff);\n@@ -163,1 +165,2 @@\n-  VMATree::SummaryDiff diff = tree()->uncommit_region(addr, size);\n+  VMATree::SummaryDiff diff;\n+  tree()->uncommit_region(addr, size, diff);\n@@ -173,1 +176,2 @@\n-  VMATree::SummaryDiff diff = tree()->release_mapping((VMATree::position)addr, size);\n+  VMATree::SummaryDiff diff;\n+  tree()->release_mapping((VMATree::position)addr, size, diff);\n","filename":"src\/hotspot\/share\/nmt\/virtualMemoryTracker.cpp","additions":8,"deletions":4,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -245,2 +245,2 @@\n-VMATree::SummaryDiff VMATree::register_mapping(position _A, position _B, StateType state,\n-                                               const RegionData& metadata, bool use_tag_inplace) {\n+void VMATree::register_mapping(position _A, position _B, StateType state,\n+                                               const RegionData& metadata, VMATree::SummaryDiff& diff, bool use_tag_inplace) {\n@@ -248,0 +248,1 @@\n+  diff.clear();\n@@ -249,1 +250,1 @@\n-    return SummaryDiff();\n+    return;\n@@ -252,1 +253,0 @@\n-  SummaryDiff diff;\n@@ -647,2 +647,0 @@\n-\n-  return diff;\n@@ -705,1 +703,2 @@\n-    SummaryDiff result = register_mapping(from, end, type, new_data);\n+    SummaryDiff result;\n+    register_mapping(from, end, type, new_data, result);\n@@ -726,1 +725,2 @@\n-      SummaryDiff result = register_mapping(from, end, type, new_data);\n+      SummaryDiff result;\n+      register_mapping(from, end, type, new_data, result);\n","filename":"src\/hotspot\/share\/nmt\/vmatree.cpp","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -240,0 +240,3 @@\n+      clear();\n+    }\n+    void clear() {\n@@ -282,1 +285,1 @@\n-  SummaryDiff register_mapping(position A, position B, StateType state, const RegionData& metadata, bool use_tag_inplace = false);\n+  void register_mapping(position A, position B, StateType state, const RegionData& metadata, SummaryDiff& diff, bool use_tag_inplace = false);\n@@ -297,2 +300,2 @@\n-  SummaryDiff reserve_mapping(position from, size size, const RegionData& metadata) {\n-    return register_mapping(from, from + size, StateType::Reserved, metadata, false);\n+  void reserve_mapping(position from, size size, const RegionData& metadata, SummaryDiff& diff ) {\n+    register_mapping(from, from + size, StateType::Reserved, metadata, diff, false);\n@@ -301,2 +304,2 @@\n-  SummaryDiff commit_mapping(position from, size size, const RegionData& metadata, bool use_tag_inplace = false) {\n-    return register_mapping(from, from + size, StateType::Committed, metadata, use_tag_inplace);\n+  void commit_mapping(position from, size size, const RegionData& metadata, SummaryDiff& diff, bool use_tag_inplace = false) {\n+    register_mapping(from, from + size, StateType::Committed, metadata, diff, use_tag_inplace);\n@@ -311,2 +314,2 @@\n-  SummaryDiff uncommit_mapping(position from, size size, const RegionData& metadata) {\n-    return register_mapping(from, from + size, StateType::Reserved, metadata, true);\n+  void uncommit_mapping(position from, size size, const RegionData& metadata, SummaryDiff& diff) {\n+    register_mapping(from, from + size, StateType::Reserved, metadata, diff, true);\n@@ -315,2 +318,2 @@\n-  SummaryDiff release_mapping(position from, position sz) {\n-    return register_mapping(from, from + sz, StateType::Released, VMATree::empty_regiondata);\n+  void release_mapping(position from, position sz, SummaryDiff& diff) {\n+    register_mapping(from, from + sz, StateType::Released, VMATree::empty_regiondata, diff);\n","filename":"src\/hotspot\/share\/nmt\/vmatree.hpp","additions":12,"deletions":9,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -44,16 +44,28 @@\n-  VMATree::SummaryDiff diff;\n-  diff = rt.reserve_mapping(0, 100, rd);\n-  EXPECT_EQ(100, diff.tag[NMTUtil::tag_to_index(mtTest)].reserve);\n-  diff = rt.commit_region(0, 50, ncs);\n-  diff = rt.reserve_mapping(0, 100, rd);\n-  EXPECT_EQ(0, diff.tag[NMTUtil::tag_to_index(mtTest)].reserve);\n-  EXPECT_EQ(-50, diff.tag[NMTUtil::tag_to_index(mtTest)].commit);\n-  diff = rt.reserve_mapping(0, 100, rd2);\n-  EXPECT_EQ(-100, diff.tag[NMTUtil::tag_to_index(mtTest)].reserve);\n-  EXPECT_EQ(100, diff.tag[NMTUtil::tag_to_index(mtGC)].reserve);\n-  diff = rt.commit_region(0, 50, ncs);\n-  EXPECT_EQ(0, diff.tag[NMTUtil::tag_to_index(mtGC)].reserve);\n-  EXPECT_EQ(50, diff.tag[NMTUtil::tag_to_index(mtGC)].commit);\n-  diff = rt.commit_region(0, 50, ncs);\n-  EXPECT_EQ(0, diff.tag[NMTUtil::tag_to_index(mtTest)].reserve);\n-  EXPECT_EQ(0, diff.tag[NMTUtil::tag_to_index(mtTest)].commit);\n+  {\n+    VMATree::SummaryDiff diff;\n+    rt.reserve_mapping(0, 100, rd, diff);\n+    EXPECT_EQ(100, diff.tag[NMTUtil::tag_to_index(mtTest)].reserve);\n+  }\n+  {\n+    VMATree::SummaryDiff diff, not_used;\n+    rt.commit_region(0, 50, ncs, not_used);\n+    rt.reserve_mapping(0, 100, rd, diff);\n+    EXPECT_EQ(0, diff.tag[NMTUtil::tag_to_index(mtTest)].reserve);\n+    EXPECT_EQ(-50, diff.tag[NMTUtil::tag_to_index(mtTest)].commit);\n+  }\n+  {\n+    VMATree::SummaryDiff diff;\n+    rt.reserve_mapping(0, 100, rd2, diff);\n+    EXPECT_EQ(-100, diff.tag[NMTUtil::tag_to_index(mtTest)].reserve);\n+    EXPECT_EQ(100, diff.tag[NMTUtil::tag_to_index(mtGC)].reserve);\n+  }\n+\n+  {\n+    VMATree::SummaryDiff diff1, diff2;\n+    rt.commit_region(0, 50, ncs, diff1);\n+    EXPECT_EQ(0, diff1.tag[NMTUtil::tag_to_index(mtGC)].reserve);\n+    EXPECT_EQ(50, diff1.tag[NMTUtil::tag_to_index(mtGC)].commit);\n+    rt.commit_region(0, 50, ncs, diff2);\n+    EXPECT_EQ(0, diff2.tag[NMTUtil::tag_to_index(mtTest)].reserve);\n+    EXPECT_EQ(0, diff2.tag[NMTUtil::tag_to_index(mtTest)].commit);\n+  }\n@@ -65,10 +77,20 @@\n-  rt.reserve_mapping(0, 100, rd);\n-  VMATree::SummaryDiff diff = rt.commit_region(0, 50, ncs);\n-  EXPECT_EQ(0, diff.tag[NMTUtil::tag_to_index(mtTest)].reserve);\n-  EXPECT_EQ(50, diff.tag[NMTUtil::tag_to_index(mtTest)].commit);\n-  diff = rt.commit_region((address)60, 10, ncs);\n-  EXPECT_EQ(0, diff.tag[NMTUtil::tag_to_index(mtTest)].reserve);\n-  EXPECT_EQ(10, diff.tag[NMTUtil::tag_to_index(mtTest)].commit);\n-  diff = rt.uncommit_region(0, 50);\n-  EXPECT_EQ(0, diff.tag[NMTUtil::tag_to_index(mtTest)].reserve);\n-  EXPECT_EQ(-50, diff.tag[NMTUtil::tag_to_index(mtTest)].commit);\n+  VMATree::SummaryDiff not_used;\n+  rt.reserve_mapping(0, 100, rd, not_used);\n+  {\n+    VMATree::SummaryDiff diff;\n+    rt.commit_region(0, 50, ncs, diff);\n+    EXPECT_EQ(0, diff.tag[NMTUtil::tag_to_index(mtTest)].reserve);\n+    EXPECT_EQ(50, diff.tag[NMTUtil::tag_to_index(mtTest)].commit);\n+  }\n+  {\n+    VMATree::SummaryDiff diff;\n+    rt.commit_region((address)60, 10, ncs, diff);\n+    EXPECT_EQ(0, diff.tag[NMTUtil::tag_to_index(mtTest)].reserve);\n+    EXPECT_EQ(10, diff.tag[NMTUtil::tag_to_index(mtTest)].commit);\n+  }\n+  {\n+    VMATree::SummaryDiff diff;\n+    rt.uncommit_region(0, 50, diff);\n+    EXPECT_EQ(0, diff.tag[NMTUtil::tag_to_index(mtTest)].reserve);\n+    EXPECT_EQ(-50, diff.tag[NMTUtil::tag_to_index(mtTest)].commit);\n+  }\n@@ -80,4 +102,5 @@\n-  rt.reserve_mapping(1000, 50, rd);\n-  rt.reserve_mapping(1200, 50, rd);\n-  rt.reserve_mapping(1300, 50, rd);\n-  rt.reserve_mapping(1400, 50, rd);\n+  VMATree::SummaryDiff diff;\n+  rt.reserve_mapping(1000, 50, rd, diff);\n+  rt.reserve_mapping(1200, 50, rd, diff);\n+  rt.reserve_mapping(1300, 50, rd, diff);\n+  rt.reserve_mapping(1400, 50, rd, diff);\n@@ -98,4 +121,5 @@\n-  rt.reserve_mapping(1000, 50, rd);\n-  rt.reserve_mapping(1200, 50, rd);\n-  rt.reserve_mapping(1300, 50, rd);\n-  rt.reserve_mapping(1400, 50, rd);\n+  VMATree::SummaryDiff diff;\n+  rt.reserve_mapping(1000, 50, rd, diff);\n+  rt.reserve_mapping(1200, 50, rd, diff);\n+  rt.reserve_mapping(1300, 50, rd, diff);\n+  rt.reserve_mapping(1400, 50, rd, diff);\n@@ -113,4 +137,5 @@\n-  rt.reserve_mapping(1000, 50, rd);\n-  rt.reserve_mapping(1200, 50, rd);\n-  rt.reserve_mapping(1300, 50, rd);\n-  rt.reserve_mapping(1400, 50, rd);\n+  VMATree::SummaryDiff diff;\n+  rt.reserve_mapping(1000, 50, rd, diff);\n+  rt.reserve_mapping(1200, 50, rd, diff);\n+  rt.reserve_mapping(1300, 50, rd, diff);\n+  rt.reserve_mapping(1400, 50, rd, diff);\n@@ -118,4 +143,4 @@\n-  rt.commit_region((address)1010, 5UL, ncs);\n-  rt.commit_region((address)1020, 5UL, ncs);\n-  rt.commit_region((address)1030, 5UL, ncs);\n-  rt.commit_region((address)1040, 5UL, ncs);\n+  rt.commit_region((address)1010, 5UL, ncs, diff);\n+  rt.commit_region((address)1020, 5UL, ncs, diff);\n+  rt.commit_region((address)1030, 5UL, ncs, diff);\n+  rt.commit_region((address)1040, 5UL, ncs, diff);\n","filename":"test\/hotspot\/gtest\/nmt\/test_regions_tree.cpp","additions":67,"deletions":42,"binary":false,"changes":109,"status":"modified"},{"patch":"@@ -95,0 +95,1 @@\n+    VMATree::SummaryDiff diff;\n@@ -96,1 +97,1 @@\n-      tree.reserve_mapping(i * 100, 100, rd);\n+      tree.reserve_mapping(i * 100, 100, rd, diff);\n@@ -102,1 +103,1 @@\n-      tree.reserve_mapping(i * 100, 100, rd);\n+      tree.reserve_mapping(i * 100, 100, rd, diff);\n@@ -114,1 +115,1 @@\n-      tree2.reserve_mapping(i * 100, 100, rd);\n+      tree2.reserve_mapping(i * 100, 100, rd, diff);\n@@ -122,1 +123,2 @@\n-    tree.reserve_mapping(0, 100 * 10, rd);\n+    VMATree::SummaryDiff diff;\n+    tree.reserve_mapping(0, 100 * 10, rd, diff);\n@@ -124,1 +126,1 @@\n-      tree.release_mapping(i * 100, 100);\n+      tree.release_mapping(i * 100, 100, diff);\n@@ -129,1 +131,1 @@\n-    tree.reserve_mapping(0, 100 * 10, rd);\n+    tree.reserve_mapping(0, 100 * 10, rd, diff);\n@@ -131,1 +133,1 @@\n-      tree.release_mapping(i * 100, 100);\n+      tree.release_mapping(i * 100, 100, diff);\n@@ -139,1 +141,2 @@\n-    tree.reserve_mapping(0, 100 * 10, rd);\n+    VMATree::SummaryDiff diff;\n+    tree.reserve_mapping(0, 100 * 10, rd, diff);\n@@ -141,1 +144,1 @@\n-      tree.commit_mapping(i * 100, 100, rd);\n+      tree.commit_mapping(i * 100, 100, rd, diff);\n@@ -156,2 +159,3 @@\n-    tree.reserve_mapping(0, 100, rd);\n-    tree.commit_mapping(50, 25, rd);\n+    VMATree::SummaryDiff diff;\n+    tree.reserve_mapping(0, 100, rd, diff);\n+    tree.commit_mapping(50, 25, rd, diff);\n@@ -345,0 +349,1 @@\n+  VMATree::SummaryDiff diff;\n@@ -346,1 +351,1 @@\n-    tree.reserve_mapping(i * 100, 101, rd);\n+    tree.reserve_mapping(i * 100, 101, rd, diff);\n@@ -354,2 +359,3 @@\n-  tree.reserve_mapping(100, 100, rd);\n-  tree.reserve_mapping(100, 100, rd);\n+  VMATree::SummaryDiff diff;\n+  tree.reserve_mapping(100, 100, rd, diff);\n+  tree.reserve_mapping(100, 100, rd, diff);\n@@ -363,0 +369,1 @@\n+  VMATree::SummaryDiff diff;\n@@ -365,1 +372,1 @@\n-  tree.reserve_mapping(0, 100, rd_Test_cs0);\n+  tree.reserve_mapping(0, 100, rd_Test_cs0, diff);\n@@ -370,2 +377,2 @@\n-  tree.commit_mapping(20, 50, rd_None_cs1, true);\n-  tree.uncommit_mapping(30, 10, rd_None_cs1);\n+  tree.commit_mapping(20, 50, rd_None_cs1, diff, true);\n+  tree.uncommit_mapping(30, 10, rd_None_cs1, diff);\n@@ -398,0 +405,1 @@\n+    VMATree::SummaryDiff diff;\n@@ -400,2 +408,2 @@\n-    tree.reserve_mapping(0, 100, rd_Test_cs0);\n-    tree.reserve_mapping(100, 100, rd_NMT_cs1);\n+    tree.reserve_mapping(0, 100, rd_Test_cs0, diff);\n+    tree.reserve_mapping(100, 100, rd_NMT_cs1, diff);\n@@ -409,0 +417,1 @@\n+    VMATree::SummaryDiff diff;\n@@ -411,2 +420,2 @@\n-    tree.commit_mapping(50, 50, rd_NMT_cs1);\n-    tree.reserve_mapping(0, 100, rd_Test_cs0);\n+    tree.commit_mapping(50, 50, rd_NMT_cs1, diff);\n+    tree.reserve_mapping(0, 100, rd_Test_cs0, diff);\n@@ -426,0 +435,1 @@\n+    VMATree::SummaryDiff diff;\n@@ -429,3 +439,3 @@\n-    tree.reserve_mapping(0, 100, rd_Test_cs0);\n-    tree.reserve_mapping(0, 50, rd_NMT_cs1);\n-    tree.reserve_mapping(50, 50, rd_None_cs0);\n+    tree.reserve_mapping(0, 100, rd_Test_cs0, diff);\n+    tree.reserve_mapping(0, 50, rd_NMT_cs1, diff);\n+    tree.reserve_mapping(50, 50, rd_None_cs0, diff);\n@@ -438,2 +448,3 @@\n-    tree.reserve_mapping(0, 500000, rd_NMT_cs0);\n-    tree.release_mapping(0, 500000);\n+    VMATree::SummaryDiff diff;\n+    tree.reserve_mapping(0, 500000, rd_NMT_cs0, diff);\n+    tree.release_mapping(0, 500000, diff);\n@@ -449,2 +460,3 @@\n-    tree.reserve_mapping(0, 100, rd_NMT_cs0);\n-    tree.commit_mapping(0, 100, rd_Test_cs1);\n+    VMATree::SummaryDiff diff;\n+    tree.reserve_mapping(0, 100, rd_NMT_cs0, diff);\n+    tree.commit_mapping(0, 100, rd_Test_cs1, diff);\n@@ -464,0 +476,1 @@\n+    VMATree::SummaryDiff diff;\n@@ -465,1 +478,1 @@\n-    tree.reserve_mapping(0, 0, rd_NMT_cs0);\n+    tree.reserve_mapping(0, 0, rd_NMT_cs0, diff);\n@@ -467,1 +480,1 @@\n-    tree.commit_mapping(0, 0, rd_NMT_cs0);\n+    tree.commit_mapping(0, 0, rd_NMT_cs0, diff);\n@@ -523,0 +536,1 @@\n+    VMATree::SummaryDiff diff;\n@@ -524,1 +538,1 @@\n-    tree.reserve_mapping(0, 600, rd);\n+    tree.reserve_mapping(0, 600, rd, diff);\n@@ -543,0 +557,1 @@\n+    VMATree::SummaryDiff diff;\n@@ -551,1 +566,1 @@\n-    tree.reserve_mapping(0, 600, rd);\n+    tree.reserve_mapping(0, 600, rd, diff);\n@@ -553,3 +568,3 @@\n-    tree.commit_mapping(100, 125, rd);\n-    tree.commit_mapping(550, 10, rd);\n-    tree.commit_mapping(565, 10, rd);\n+    tree.commit_mapping(100, 125, rd, diff);\n+    tree.commit_mapping(550, 10, rd, diff);\n+    tree.commit_mapping(565, 10, rd, diff);\n@@ -567,0 +582,1 @@\n+    VMATree::SummaryDiff diff;\n@@ -569,2 +585,2 @@\n-    tree.reserve_mapping(0, 100, gc);\n-    tree.reserve_mapping(100, 100, compiler);\n+    tree.reserve_mapping(0, 100, gc, diff);\n+    tree.reserve_mapping(100, 100, compiler, diff);\n@@ -583,0 +599,1 @@\n+    VMATree::SummaryDiff diff;\n@@ -585,2 +602,2 @@\n-    tree.reserve_mapping(0, 100, gc);\n-    tree.reserve_mapping(100, 100, compiler);\n+    tree.reserve_mapping(0, 100, gc, diff);\n+    tree.reserve_mapping(100, 100, compiler, diff);\n@@ -598,0 +615,1 @@\n+    VMATree::SummaryDiff diff;\n@@ -599,1 +617,1 @@\n-    tree.reserve_mapping(0, 200, compiler);\n+    tree.reserve_mapping(0, 200, compiler, diff);\n@@ -611,0 +629,1 @@\n+    VMATree::SummaryDiff diff;\n@@ -613,2 +632,2 @@\n-    tree.reserve_mapping(0, 100, gc);\n-    tree.reserve_mapping(100, 100, compiler);\n+    tree.reserve_mapping(0, 100, gc, diff);\n+    tree.reserve_mapping(100, 100, compiler, diff);\n@@ -627,0 +646,1 @@\n+    VMATree::SummaryDiff diff;\n@@ -628,2 +648,2 @@\n-    tree.reserve_mapping(0, 50, class_shared);\n-    tree.reserve_mapping(75, 25, class_shared);\n+    tree.reserve_mapping(0, 50, class_shared, diff);\n+    tree.reserve_mapping(75, 25, class_shared, diff);\n@@ -639,0 +659,1 @@\n+    VMATree::SummaryDiff diff;\n@@ -640,1 +661,1 @@\n-    tree.reserve_mapping(10, 10, class_shared);\n+    tree.reserve_mapping(10, 10, class_shared, diff);\n@@ -654,0 +675,1 @@\n+    VMATree::SummaryDiff diff;\n@@ -655,3 +677,3 @@\n-    tree.reserve_mapping(0, 100, class_shared);\n-    tree.release_mapping(1, 49);\n-    tree.release_mapping(75, 24);\n+    tree.reserve_mapping(0, 100, class_shared, diff);\n+    tree.release_mapping(1, 49, diff);\n+    tree.release_mapping(75, 24, diff);\n@@ -669,1 +691,2 @@\n-    VMATree::SummaryDiff all_diff = tree.reserve_mapping(0, 100, rd_Test_cs0);\n+    VMATree::SummaryDiff all_diff;\n+    tree.reserve_mapping(0, 100, rd_Test_cs0, all_diff);\n@@ -678,1 +701,1 @@\n-    all_diff = tree.reserve_mapping(50, 25, rd_NMT_cs0);\n+    tree.reserve_mapping(50, 25, rd_NMT_cs0, all_diff);\n@@ -695,1 +718,2 @@\n-    VMATree::SummaryDiff all_diff = tree.reserve_mapping(0, 100, rd_Test_cs0);\n+    VMATree::SummaryDiff all_diff;\n+    tree.reserve_mapping(0, 100, rd_Test_cs0, all_diff);\n@@ -704,1 +728,1 @@\n-    all_diff = tree.release_mapping(0, 100);\n+    tree.release_mapping(0, 100, all_diff);\n@@ -715,1 +739,2 @@\n-    VMATree::SummaryDiff all_diff = tree.reserve_mapping(0, 100, rd_Test_cs0);\n+    VMATree::SummaryDiff all_diff;\n+    tree.reserve_mapping(0, 100, rd_Test_cs0, all_diff);\n@@ -724,1 +749,1 @@\n-    all_diff = tree.commit_mapping(0, 100, rd_Test_cs0);\n+    tree.commit_mapping(0, 100, rd_Test_cs0, all_diff);\n@@ -738,1 +763,2 @@\n-    VMATree::SummaryDiff all_diff = tree.reserve_mapping(0, 10, rd_Test_cs0);\n+    VMATree::SummaryDiff all_diff;\n+    tree.reserve_mapping(0, 10, rd_Test_cs0, all_diff);\n@@ -747,1 +773,1 @@\n-    all_diff = tree.reserve_mapping(10, 10, rd_Test_cs0);\n+    tree.reserve_mapping(10, 10, rd_Test_cs0, all_diff);\n@@ -761,1 +787,2 @@\n-    VMATree::SummaryDiff all_diff = tree.reserve_mapping(0, 10, rd_Test_cs0);\n+    VMATree::SummaryDiff all_diff;\n+    tree.reserve_mapping(0, 10, rd_Test_cs0, all_diff);\n@@ -770,1 +797,1 @@\n-    all_diff = tree.reserve_mapping(10, 10, rd_NMT_cs0);\n+    tree.reserve_mapping(10, 10, rd_NMT_cs0, all_diff);\n@@ -787,0 +814,1 @@\n+    VMATree::SummaryDiff diff;\n@@ -788,1 +816,1 @@\n-    tree.commit_mapping(16, 16, rd_Test_cs0);\n+    tree.commit_mapping(16, 16, rd_Test_cs0, diff);\n@@ -795,1 +823,1 @@\n-    tree.commit_mapping(32, 32, rd_Test_cs0);\n+    tree.commit_mapping(32, 32, rd_Test_cs0, diff);\n@@ -802,1 +830,1 @@\n-    VMATree::SummaryDiff diff = tree.commit_mapping(0, 64, rd_Test_cs0);\n+    tree.commit_mapping(0, 64, rd_Test_cs0, diff);\n@@ -817,2 +845,3 @@\n-  VMATree::SummaryDiff diff1 = tree.reserve_mapping(1200, 100, rd);\n-  VMATree::SummaryDiff diff2 = tree.commit_mapping(1210, 50, rd);\n+  VMATree::SummaryDiff diff1, diff2, diff3;\n+  tree.reserve_mapping(1200, 100, rd, diff1);\n+  tree.commit_mapping(1210, 50, rd, diff2);\n@@ -821,1 +850,1 @@\n-  VMATree::SummaryDiff diff3 = tree.reserve_mapping(1220, 20, rd);\n+  tree.reserve_mapping(1220, 20, rd, diff3);\n@@ -954,1 +983,1 @@\n-      tree_diff = tree.reserve_mapping(start, size, data);\n+      tree.reserve_mapping(start, size, data, tree_diff);\n@@ -957,1 +986,1 @@\n-      tree_diff = tree.commit_mapping(start, size, data);\n+      tree.commit_mapping(start, size, data, tree_diff);\n@@ -960,1 +989,1 @@\n-      tree_diff = tree.release_mapping(start, size);\n+      tree.release_mapping(start, size, tree_diff);\n@@ -1027,0 +1056,1 @@\n+  VMATree::SummaryDiff diff;\n@@ -1029,11 +1059,11 @@\n-\/\/            1         2         3         4         5\n-\/\/  012345678901234567890123456789012345678901234567890\n-\/\/  ..................................................\n-  tree.reserve_mapping(0, 50, rd_Test_cs0);\n-\/\/            1         2         3         4         5\n-\/\/  012345678901234567890123456789012345678901234567890\n-\/\/  rrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrr\n-VMATree::SummaryDiff diff = tree.commit_mapping(0, 25, rd_None_cs1, true);\n-\/\/            1         2         3         4         5\n-\/\/  012345678901234567890123456789012345678901234567890\n-\/\/  CCCCCCCCCCCCCCCCCCCCCCCCCrrrrrrrrrrrrrrrrrrrrrrrrr\n+  \/\/            1         2         3         4         5\n+  \/\/  012345678901234567890123456789012345678901234567890\n+  \/\/  ..................................................\n+  tree.reserve_mapping(0, 50, rd_Test_cs0, diff);\n+  \/\/            1         2         3         4         5\n+  \/\/  012345678901234567890123456789012345678901234567890\n+  \/\/  rrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrr\n+  tree.commit_mapping(0, 25, rd_None_cs1, diff, true);\n+  \/\/            1         2         3         4         5\n+  \/\/  012345678901234567890123456789012345678901234567890\n+  \/\/  CCCCCCCCCCCCCCCCCCCCCCCCCrrrrrrrrrrrrrrrrrrrrrrrrr\n@@ -1043,4 +1073,4 @@\n-  diff = tree.commit_mapping(30, 5, rd_None_cs1, true);\n-\/\/            1         2         3         4         5\n-\/\/  012345678901234567890123456789012345678901234567890\n-\/\/  CCCCCCCCCCCCCCCCCCCCCCCCCrrrrrCCCCCrrrrrrrrrrrrrrr\n+  tree.commit_mapping(30, 5, rd_None_cs1, diff, true);\n+  \/\/            1         2         3         4         5\n+  \/\/  012345678901234567890123456789012345678901234567890\n+  \/\/  CCCCCCCCCCCCCCCCCCCCCCCCCrrrrrCCCCCrrrrrrrrrrrrrrr\n@@ -1050,4 +1080,4 @@\n-  diff = tree.uncommit_mapping(0, 25, rd_None_cs1);\n-\/\/            1         2         3         4         5\n-\/\/  012345678901234567890123456789012345678901234567890\n-\/\/  rrrrrrrrrrrrrrrrrrrrrrrrrrrrrrCCCCCrrrrrrrrrrrrrrr\n+  tree.uncommit_mapping(0, 25, rd_None_cs1, diff);\n+  \/\/            1         2         3         4         5\n+  \/\/  012345678901234567890123456789012345678901234567890\n+  \/\/  rrrrrrrrrrrrrrrrrrrrrrrrrrrrrrCCCCCrrrrrrrrrrrrrrr\n@@ -1082,1 +1112,2 @@\n-    tree.reserve_mapping(0, 50, rd_Test_cs1); \/\/ reserve in an empty tree\n+    VMATree::SummaryDiff diff;\n+    tree.reserve_mapping(0, 50, rd_Test_cs1, diff); \/\/ reserve in an empty tree\n@@ -1094,1 +1125,1 @@\n-    tree.commit_mapping(25, 10, rd_None_cs2, true); \/\/ commit at the middle of the region\n+    tree.commit_mapping(25, 10, rd_None_cs2, diff, true); \/\/ commit at the middle of the region\n@@ -1106,1 +1137,1 @@\n-    tree.commit_mapping(0, 20, rd_None_cs2, true); \/\/ commit at the beginning of the region\n+    tree.commit_mapping(0, 20, rd_None_cs2, diff, true); \/\/ commit at the beginning of the region\n@@ -1117,1 +1148,1 @@\n-    tree.commit_mapping(40, 10, rd_None_cs2, true); \/\/ commit at the end of the region\n+    tree.commit_mapping(40, 10, rd_None_cs2, diff, true); \/\/ commit at the end of the region\n@@ -1131,1 +1162,2 @@\n-    tree.reserve_mapping(0, 50, rd_Test_cs1); \/\/ reserving in an empty tree\n+    VMATree::SummaryDiff diff;\n+    tree.reserve_mapping(0, 50, rd_Test_cs1, diff); \/\/ reserving in an empty tree\n@@ -1143,1 +1175,1 @@\n-    tree.commit_mapping(10, 10, rd_None_cs2, true);\n+    tree.commit_mapping(10, 10, rd_None_cs2, diff, true);\n@@ -1157,1 +1189,1 @@\n-    tree.commit_mapping(5, 10, rd_Test_cs3);\n+    tree.commit_mapping(5, 10, rd_Test_cs3, diff);\n@@ -1171,1 +1203,1 @@\n-    tree.commit_mapping(15, 10, call_stack_4);\n+    tree.commit_mapping(15, 10, call_stack_4, diff);\n@@ -1184,1 +1216,2 @@\n-    tree.reserve_mapping(0, 50, rd_Test_cs1);\n+    VMATree::SummaryDiff diff;\n+    tree.reserve_mapping(0, 50, rd_Test_cs1, diff);\n@@ -1186,1 +1219,1 @@\n-    tree.commit_mapping(10, 10, rd_None_cs2, true);\n+    tree.commit_mapping(10, 10, rd_None_cs2, diff, true);\n@@ -1188,1 +1221,1 @@\n-    tree.commit_mapping(0, 5, rd_None_cs2, true);\n+    tree.commit_mapping(0, 5, rd_None_cs2, diff, true);\n@@ -1190,1 +1223,1 @@\n-    tree.uncommit_mapping(0, 3, rd_None_cs2);\n+    tree.uncommit_mapping(0, 3, rd_None_cs2, diff);\n@@ -1201,1 +1234,1 @@\n-    tree.uncommit_mapping(5, 10, rd_None_cs2);\n+    tree.uncommit_mapping(5, 10, rd_None_cs2, diff);\n@@ -1217,2 +1250,3 @@\n-    tree.reserve_mapping(0, 50, rd_Test_cs1);\n-    tree.reserve_mapping(10, 10, call_stack_4);\n+    VMATree::SummaryDiff diff;\n+    tree.reserve_mapping(0, 50, rd_Test_cs1, diff);\n+    tree.reserve_mapping(10, 10, call_stack_4, diff);\n@@ -1231,1 +1265,2 @@\n-    tree.commit_mapping(0, 50, rd_Test_cs1);\n+    VMATree::SummaryDiff diff;\n+    tree.commit_mapping(0, 50, rd_Test_cs1, diff);\n@@ -1244,2 +1279,3 @@\n-    tree.commit_mapping(0, 50, rd_None_cs2);\n-    tree.reserve_mapping(0, 50, rd_Test_cs1);\n+    VMATree::SummaryDiff diff;\n+    tree.commit_mapping(0, 50, rd_None_cs2, diff);\n+    tree.reserve_mapping(0, 50, rd_Test_cs1, diff);\n@@ -1290,1 +1326,2 @@\n-    VMATree::SummaryDiff diff = tree.commit_mapping(5, 20, rd_Test_cs2, false);\n+    VMATree::SummaryDiff diff;\n+    tree.commit_mapping(5, 20, rd_Test_cs2, diff, false);\n@@ -1317,1 +1354,2 @@\n-    VMATree::SummaryDiff diff = tree.commit_mapping(5, 15, rd_Test_cs2, false);\n+    VMATree::SummaryDiff diff;\n+    tree.commit_mapping(5, 15, rd_Test_cs2, diff, false);\n@@ -1362,1 +1400,2 @@\n-    VMATree::SummaryDiff diff = tree.commit_mapping(20, 20, rd_Test_cs2, false);\n+    VMATree::SummaryDiff diff;\n+    tree.commit_mapping(20, 20, rd_Test_cs2, diff, false);\n@@ -1389,1 +1428,2 @@\n-    VMATree::SummaryDiff diff = tree.commit_mapping(10, 10, rd_Test_cs2, false);\n+    VMATree::SummaryDiff diff;\n+    tree.commit_mapping(10, 10, rd_Test_cs2, diff, false);\n@@ -1416,1 +1456,2 @@\n-    VMATree::SummaryDiff diff = tree.commit_mapping(7, 20, rd_Test_cs2, false);\n+    VMATree::SummaryDiff diff;\n+    tree.commit_mapping(7, 20, rd_Test_cs2, diff, false);\n@@ -1443,1 +1484,2 @@\n-    VMATree::SummaryDiff diff = tree.commit_mapping(7, 13, rd_Test_cs2, false);\n+    VMATree::SummaryDiff diff;\n+    tree.commit_mapping(7, 13, rd_Test_cs2, diff, false);\n@@ -1495,1 +1537,2 @@\n-    VMATree::SummaryDiff diff = tree.commit_mapping(10, 20, rd_Test_cs2, false);\n+    VMATree::SummaryDiff diff;\n+    tree.commit_mapping(10, 20, rd_Test_cs2, diff, false);\n@@ -1522,1 +1565,2 @@\n-    VMATree::SummaryDiff diff = tree.commit_mapping(0, 20, rd_Test_cs2, false);\n+    VMATree::SummaryDiff diff;\n+    tree.commit_mapping(0, 20, rd_Test_cs2, diff, false);\n@@ -1549,1 +1593,2 @@\n-    VMATree::SummaryDiff diff = tree.commit_mapping(5, 20, rd_Test_cs2, false);\n+    VMATree::SummaryDiff diff;\n+    tree.commit_mapping(5, 20, rd_Test_cs2, diff, false);\n@@ -1576,1 +1621,2 @@\n-    VMATree::SummaryDiff diff = tree.commit_mapping(5, 15, rd_Test_cs2, false);\n+    VMATree::SummaryDiff diff;\n+    tree.commit_mapping(5, 15, rd_Test_cs2, diff, false);\n@@ -1622,1 +1668,2 @@\n-    VMATree::SummaryDiff diff = tree.commit_mapping(5, 20, rd_Test_cs2, false);\n+    VMATree::SummaryDiff diff;\n+    tree.commit_mapping(5, 20, rd_Test_cs2, diff, false);\n@@ -1649,1 +1696,2 @@\n-    VMATree::SummaryDiff diff = tree.commit_mapping(5, 20, rd_Test_cs2, false);\n+    VMATree::SummaryDiff diff;\n+    tree.commit_mapping(5, 20, rd_Test_cs2, diff, false);\n@@ -1676,1 +1724,2 @@\n-    VMATree::SummaryDiff diff = tree.commit_mapping(5, 20, rd_Test_cs2, false);\n+    VMATree::SummaryDiff diff;\n+    tree.commit_mapping(5, 20, rd_Test_cs2, diff, false);\n@@ -1703,1 +1752,2 @@\n-    VMATree::SummaryDiff diff = tree.commit_mapping(5, 15, rd_Test_cs2, false);\n+    VMATree::SummaryDiff diff ;\n+    tree.commit_mapping(5, 15, rd_Test_cs2, diff, false);\n@@ -1748,1 +1798,2 @@\n-    VMATree::SummaryDiff diff = tree.commit_mapping(15, 10, rd_Test_cs2, false);\n+    VMATree::SummaryDiff diff;\n+    tree.commit_mapping(15, 10, rd_Test_cs2, diff, false);\n@@ -1775,1 +1826,2 @@\n-    VMATree::SummaryDiff diff = tree.commit_mapping(15, 10, rd_Test_cs2, false);\n+    VMATree::SummaryDiff diff;\n+    tree.commit_mapping(15, 10, rd_Test_cs2, diff, false);\n@@ -1802,1 +1854,2 @@\n-    VMATree::SummaryDiff diff = tree.commit_mapping(7, 20, rd_Test_cs2, false);\n+    VMATree::SummaryDiff diff;\n+    tree.commit_mapping(7, 20, rd_Test_cs2, diff, false);\n@@ -1829,1 +1882,2 @@\n-    VMATree::SummaryDiff diff = tree.commit_mapping(7, 13, rd_Test_cs2, false);\n+    VMATree::SummaryDiff diff;\n+    tree.commit_mapping(7, 13, rd_Test_cs2, diff, false);\n@@ -1875,1 +1929,2 @@\n-    VMATree::SummaryDiff diff = tree.commit_mapping(10, 15, rd_Test_cs2, false);\n+    VMATree::SummaryDiff diff;\n+    tree.commit_mapping(10, 15, rd_Test_cs2, diff, false);\n@@ -1902,1 +1957,2 @@\n-    VMATree::SummaryDiff diff = tree.commit_mapping(10, 15, rd_Test_cs2, false);\n+    VMATree::SummaryDiff diff;\n+    tree.commit_mapping(10, 15, rd_Test_cs2, diff, false);\n@@ -1929,1 +1985,2 @@\n-    VMATree::SummaryDiff diff = tree.commit_mapping(5, 20, rd_Test_cs2, false);\n+    VMATree::SummaryDiff diff;\n+    tree.commit_mapping(5, 20, rd_Test_cs2, diff, false);\n@@ -1956,1 +2013,2 @@\n-    VMATree::SummaryDiff diff = tree.commit_mapping(5, 15, rd_Test_cs2, false);\n+    VMATree::SummaryDiff diff;\n+    tree.commit_mapping(5, 15, rd_Test_cs2, diff, false);\n","filename":"test\/hotspot\/gtest\/nmt\/test_vmatree.cpp","additions":184,"deletions":126,"binary":false,"changes":310,"status":"modified"},{"patch":"@@ -97,0 +97,1 @@\n+    VMATree::SummaryDiff diff;\n@@ -118,1 +119,1 @@\n-      rtree->commit_region(addr + cs, cs, stack);\n+      rtree->commit_region(addr + cs, cs, stack, diff);\n@@ -124,1 +125,1 @@\n-      rtree->commit_region(addr, cs, stack);\n+      rtree->commit_region(addr, cs, stack, diff);\n@@ -130,1 +131,1 @@\n-      rtree->commit_region(addr + 2 * cs, cs, stack);\n+      rtree->commit_region(addr + 2 * cs, cs, stack, diff);\n@@ -136,1 +137,1 @@\n-    rtree->uncommit_region(addr, 3 * cs);\n+    rtree->uncommit_region(addr, 3 * cs, diff);\n@@ -143,1 +144,1 @@\n-      rtree->commit_region(addr + cs, cs, stack);\n+      rtree->commit_region(addr + cs, cs, stack, diff);\n@@ -149,1 +150,1 @@\n-      rtree->commit_region(addr, cs, stack2);\n+      rtree->commit_region(addr, cs, stack2, diff);\n@@ -156,1 +157,1 @@\n-      rtree->commit_region(addr + 2 * cs, cs, stack2);\n+      rtree->commit_region(addr + 2 * cs, cs, stack2, diff);\n@@ -164,1 +165,1 @@\n-    rtree->uncommit_region(addr, 3 * cs);\n+    rtree->uncommit_region(addr, 3 * cs, diff);\n@@ -170,0 +171,1 @@\n+    VMATree::SummaryDiff diff;\n@@ -193,2 +195,2 @@\n-      rtree->commit_region(addr, 2 * cs, stack);\n-      rtree->commit_region(addr + 3 * cs, 2 * cs, stack);\n+      rtree->commit_region(addr, 2 * cs, stack, diff);\n+      rtree->commit_region(addr + 3 * cs, 2 * cs, stack, diff);\n@@ -201,1 +203,1 @@\n-      rtree->commit_region(addr + 2 * cs, 2 * cs, stack);\n+      rtree->commit_region(addr + 2 * cs, 2 * cs, stack, diff);\n@@ -207,1 +209,1 @@\n-    rtree->uncommit_region(addr + 2 * cs, cs);\n+    rtree->uncommit_region(addr + 2 * cs, cs, diff);\n@@ -211,1 +213,1 @@\n-      rtree->commit_region(addr + cs, 2 * cs, stack);\n+      rtree->commit_region(addr + cs, 2 * cs, stack, diff);\n@@ -217,1 +219,1 @@\n-    rtree->uncommit_region(addr, 5 * cs);\n+    rtree->uncommit_region(addr, 5 * cs, diff);\n@@ -224,2 +226,2 @@\n-      rtree->commit_region(addr, 2 * cs, stack);\n-      rtree->commit_region(addr + 3 * cs, 2 * cs, stack);\n+      rtree->commit_region(addr, 2 * cs, stack, diff);\n+      rtree->commit_region(addr + 3 * cs, 2 * cs, stack, diff);\n@@ -232,1 +234,1 @@\n-      rtree->commit_region(addr + 2 * cs, 2 * cs, stack2);\n+      rtree->commit_region(addr + 2 * cs, 2 * cs, stack2, diff);\n@@ -240,2 +242,2 @@\n-    rtree->commit_region(addr, 5 * cs, stack);\n-    rtree->uncommit_region(addr + 2 * cs, cs);\n+    rtree->commit_region(addr, 5 * cs, stack, diff);\n+    rtree->uncommit_region(addr + 2 * cs, cs, diff);\n@@ -245,1 +247,1 @@\n-      rtree->commit_region(addr + cs, 2 * cs, stack2);\n+      rtree->commit_region(addr + cs, 2 * cs, stack2, diff);\n@@ -257,0 +259,1 @@\n+    VMATree::SummaryDiff diff;\n@@ -282,1 +285,1 @@\n-      rtree->commit_region(addr, cs, stack);\n+      rtree->commit_region(addr, cs, stack, diff);\n@@ -288,1 +291,1 @@\n-      rtree->commit_region(addr, cs, stack);\n+      rtree->commit_region(addr, cs, stack, diff);\n@@ -294,1 +297,1 @@\n-      rtree->commit_region(addr + cs, cs, stack);\n+      rtree->commit_region(addr + cs, cs, stack, diff);\n@@ -300,1 +303,1 @@\n-      rtree->commit_region(addr, 2 * cs, stack);\n+      rtree->commit_region(addr, 2 * cs, stack, diff);\n@@ -306,1 +309,1 @@\n-      rtree->commit_region(addr, cs, stack);\n+      rtree->commit_region(addr, cs, stack, diff);\n@@ -312,1 +315,1 @@\n-      rtree->commit_region(addr + cs, cs, stack);\n+      rtree->commit_region(addr + cs, cs, stack, diff);\n@@ -318,1 +321,1 @@\n-      rtree->commit_region(addr + 2 * cs, cs, stack);\n+      rtree->commit_region(addr + 2 * cs, cs, stack, diff);\n@@ -324,1 +327,1 @@\n-      rtree->commit_region(addr + 1 * cs, cs, stack);\n+      rtree->commit_region(addr + 1 * cs, cs, stack, diff);\n@@ -330,1 +333,1 @@\n-    rtree->uncommit_region(addr, 3 * cs);\n+    rtree->uncommit_region(addr, 3 * cs, diff);\n@@ -335,2 +338,2 @@\n-    rtree->commit_region(addr,              cs, stack);\n-    rtree->commit_region(addr + 2 * cs, 3 * cs, stack);\n+    rtree->commit_region(addr,              cs, stack, diff);\n+    rtree->commit_region(addr + 2 * cs, 3 * cs, stack, diff);\n@@ -338,1 +341,1 @@\n-    rtree->commit_region(addr + 2 * cs,     cs, stack);\n+    rtree->commit_region(addr + 2 * cs,     cs, stack, diff);\n@@ -345,1 +348,1 @@\n-    rtree->commit_region(addr + 3 * cs,     cs, stack);\n+    rtree->commit_region(addr + 3 * cs,     cs, stack, diff);\n@@ -352,1 +355,1 @@\n-    rtree->commit_region(addr + 4 * cs,     cs, stack);\n+    rtree->commit_region(addr + 4 * cs,     cs, stack, diff);\n@@ -360,1 +363,1 @@\n-    rtree->uncommit_region(addr, 5 * cs);\n+    rtree->uncommit_region(addr, 5 * cs, diff);\n@@ -366,1 +369,1 @@\n-      rtree->commit_region(addr, cs, stack);\n+      rtree->commit_region(addr, cs, stack, diff);\n@@ -372,1 +375,1 @@\n-      rtree->commit_region(addr, cs, stack2);\n+      rtree->commit_region(addr, cs, stack2, diff);\n@@ -378,1 +381,1 @@\n-      rtree->commit_region(addr + cs, cs, stack);\n+      rtree->commit_region(addr + cs, cs, stack, diff);\n@@ -385,1 +388,1 @@\n-      rtree->commit_region(addr, 2 * cs, stack);\n+      rtree->commit_region(addr, 2 * cs, stack, diff);\n@@ -391,1 +394,1 @@\n-      rtree->commit_region(addr, cs, stack2);\n+      rtree->commit_region(addr, cs, stack2, diff);\n@@ -398,1 +401,1 @@\n-      rtree->commit_region(addr + cs, cs, stack2);\n+      rtree->commit_region(addr + cs, cs, stack2, diff);\n@@ -404,1 +407,1 @@\n-      rtree->commit_region(addr + 2 * cs, cs, stack2);\n+      rtree->commit_region(addr + 2 * cs, cs, stack2, diff);\n@@ -410,1 +413,1 @@\n-      rtree->commit_region(addr + 1 * cs, cs, stack);\n+      rtree->commit_region(addr + 1 * cs, cs, stack, diff);\n@@ -433,0 +436,1 @@\n+    VMATree::SummaryDiff diff;\n@@ -454,1 +458,1 @@\n-      rtree->commit_region(addr, 3 * cs, stack);\n+      rtree->commit_region(addr, 3 * cs, stack, diff);\n@@ -459,1 +463,1 @@\n-      rtree->uncommit_region(addr, 3 * cs);\n+      rtree->uncommit_region(addr, 3 * cs, diff);\n@@ -464,3 +468,3 @@\n-      rtree->commit_region(addr + 0 * cs, cs, stack);\n-      rtree->commit_region(addr + 2 * cs, cs, stack);\n-      rtree->commit_region(addr + 4 * cs, cs, stack);\n+      rtree->commit_region(addr + 0 * cs, cs, stack, diff);\n+      rtree->commit_region(addr + 2 * cs, cs, stack, diff);\n+      rtree->commit_region(addr + 4 * cs, cs, stack, diff);\n@@ -469,1 +473,1 @@\n-        rtree->uncommit_region(addr, cs);\n+        rtree->uncommit_region(addr, cs, diff);\n@@ -476,1 +480,1 @@\n-      rtree->commit_region(addr,          cs, stack);\n+      rtree->commit_region(addr,          cs, stack, diff);\n@@ -479,1 +483,1 @@\n-        rtree->uncommit_region(addr + 2 * cs, cs);\n+        rtree->uncommit_region(addr + 2 * cs, cs, diff);\n@@ -486,1 +490,1 @@\n-      rtree->commit_region(addr + 2 * cs, cs, stack);\n+      rtree->commit_region(addr + 2 * cs, cs, stack, diff);\n@@ -489,1 +493,1 @@\n-        rtree->uncommit_region(addr + 4 * cs, cs);\n+        rtree->uncommit_region(addr + 4 * cs, cs, diff);\n@@ -495,1 +499,1 @@\n-      rtree->uncommit_region(addr, 5 * cs);\n+      rtree->uncommit_region(addr, 5 * cs, diff);\n@@ -500,2 +504,2 @@\n-      rtree->commit_region(addr + 1 * cs, cs, stack);\n-      rtree->uncommit_region(addr, 3 * cs);\n+      rtree->commit_region(addr + 1 * cs, cs, stack, diff);\n+      rtree->uncommit_region(addr, 3 * cs, diff);\n@@ -506,2 +510,2 @@\n-      rtree->commit_region(addr, 3 * cs, stack);\n-      rtree->uncommit_region(addr + 1 * cs, cs);\n+      rtree->commit_region(addr, 3 * cs, stack, diff);\n+      rtree->uncommit_region(addr + 1 * cs, cs, diff);\n@@ -512,1 +516,1 @@\n-      rtree->uncommit_region(addr, 3 * cs);\n+      rtree->uncommit_region(addr, 3 * cs, diff);\n@@ -517,2 +521,2 @@\n-      rtree->commit_region(addr, 3 * cs, stack);\n-      rtree->uncommit_region(addr + 0 * cs, cs);\n+      rtree->commit_region(addr, 3 * cs, stack, diff);\n+      rtree->uncommit_region(addr + 0 * cs, cs, diff);\n@@ -522,1 +526,1 @@\n-      rtree->uncommit_region(addr, 3 * cs);\n+      rtree->uncommit_region(addr, 3 * cs, diff);\n@@ -527,2 +531,2 @@\n-      rtree->commit_region(addr, 3 * cs, stack);\n-      rtree->uncommit_region(addr + 2 * cs, cs);\n+      rtree->commit_region(addr, 3 * cs, stack, diff);\n+      rtree->uncommit_region(addr + 2 * cs, cs, diff);\n@@ -532,1 +536,1 @@\n-      rtree->uncommit_region(addr, 3 * cs);\n+      rtree->uncommit_region(addr, 3 * cs, diff);\n@@ -537,2 +541,2 @@\n-      rtree->commit_region(addr + 1 * cs, 4 * cs, stack);\n-      rtree->uncommit_region(addr, 2 * cs);\n+      rtree->commit_region(addr + 1 * cs, 4 * cs, stack, diff);\n+      rtree->uncommit_region(addr, 2 * cs, diff);\n@@ -542,1 +546,1 @@\n-      rtree->uncommit_region(addr + 1 * cs, 4 * cs);\n+      rtree->uncommit_region(addr + 1 * cs, 4 * cs, diff);\n@@ -547,2 +551,2 @@\n-      rtree->commit_region(addr, 3 * cs, stack);\n-      rtree->uncommit_region(addr + 2 * cs, 2 * cs);\n+      rtree->commit_region(addr, 3 * cs, stack, diff);\n+      rtree->uncommit_region(addr + 2 * cs, 2 * cs, diff);\n@@ -552,1 +556,1 @@\n-      rtree->uncommit_region(addr, 3 * cs);\n+      rtree->uncommit_region(addr, 3 * cs, diff);\n","filename":"test\/hotspot\/gtest\/runtime\/test_virtualMemoryTracker.cpp","additions":75,"deletions":71,"binary":false,"changes":146,"status":"modified"}]}