{"files":[{"patch":"@@ -74,1 +74,1 @@\n-    Thread* current_thread = Thread::current();\n+    JavaThread* current_thread = JavaThread::current();\n@@ -99,2 +99,2 @@\n-          assert(current_thread->is_Java_thread(), \"Must be a JavaThread\");\n-          assert(ObjectSynchronizer::current_thread_holds_lock((JavaThread*) current_thread, Handle(current_thread, dest->obj())),\n+          assert(dest->obj() == nullptr ||\n+                 ObjectSynchronizer::current_thread_holds_lock(current_thread, Handle(current_thread, dest->obj())),\n@@ -105,1 +105,2 @@\n-          assert(ObjectSynchronizer::current_thread_holds_lock((JavaThread*) current_thread, Handle(current_thread, dest->obj())),\n+          assert(dest->obj() == nullptr ||\n+                 ObjectSynchronizer::current_thread_holds_lock(current_thread, Handle(current_thread, dest->obj())),\n@@ -317,1 +318,2 @@\n-    assert(ObjectSynchronizer::current_thread_holds_lock(thread, Handle(thread, src->obj())), \"should be held, before move_to\");\n+    assert(src->obj() == nullptr || ObjectSynchronizer::current_thread_holds_lock(thread, Handle(thread, src->obj())),\n+           \"should be held, before move_to\");\n@@ -319,1 +321,2 @@\n-    assert(ObjectSynchronizer::current_thread_holds_lock(thread, Handle(thread, src->obj())), \"should be held, after move_to\");\n+    assert(src->obj() == nullptr || ObjectSynchronizer::current_thread_holds_lock(thread, Handle(thread, src->obj())),\n+           \"should be held, after move_to\");\n","filename":"src\/hotspot\/share\/runtime\/vframeArray.cpp","additions":9,"deletions":6,"binary":false,"changes":15,"status":"modified"}]}