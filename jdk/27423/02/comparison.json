{"files":[{"patch":"@@ -1083,0 +1083,9 @@\n+struct NMethodMarkingScope : StackObj {\n+  NMethodMarkingScope() {\n+    nmethod::oops_do_marking_prologue();\n+  }\n+  ~NMethodMarkingScope() {\n+    nmethod::oops_do_marking_epilogue();\n+  }\n+};\n+\n","filename":"src\/hotspot\/share\/code\/nmethod.hpp","additions":9,"deletions":0,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -57,1 +57,0 @@\n-#include \"gc\/shared\/strongRootsScope.hpp\"\n@@ -486,4 +485,0 @@\n-    StrongRootsScope srs(0);\n-\n-    MarkingNMethodClosure mark_code_closure(&follow_root_closure);\n-\n@@ -497,2 +492,7 @@\n-    \/\/ 2. Threads stack frames and active nmethods in them.\n-    Threads::oops_do(&follow_root_closure, &mark_code_closure);\n+    {\n+      \/\/ 2. Threads stack frames and active nmethods in them.\n+      NMethodMarkingScope nmethod_marking_scope;\n+      MarkingNMethodClosure mark_code_closure(&follow_root_closure);\n+\n+      Threads::oops_do(&follow_root_closure, &mark_code_closure);\n+    }\n","filename":"src\/hotspot\/share\/gc\/serial\/serialFullGC.cpp","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"}]}