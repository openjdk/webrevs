{"files":[{"patch":"@@ -1109,4 +1109,13 @@\n-  \/\/ Since both markword and klass takes 1 heap word, the min-obj-size is 2\n-  \/\/ heap words.\n-  \/\/ If min-fill-size decreases to 1, this whole method becomes redundant.\n-  assert(CollectedHeap::min_fill_size() == 2, \"inv\");\n+  \/\/ Comparing two sizes to decide if filling is required:\n+  \/\/\n+  \/\/ The size of the filler (min-obj-size) is 2 heap words with the default\n+  \/\/ MinObjAlignment, since both markword and klass take 1 heap word.\n+  \/\/\n+  \/\/ The size of the gap (if any) right before dense-prefix-end is\n+  \/\/ MinObjAlignment.\n+  \/\/\n+  \/\/ Need to fill in the gap only if it's smaller than min-obj-size, and the\n+  \/\/ filler obj will extend to next region.\n+\n+  \/\/ Note: If min-fill-size decreases to 1, this whole method becomes redundant.\n+  assert(CollectedHeap::min_fill_size() >= 2, \"inv\");\n@@ -1114,3 +1123,2 @@\n-  \/\/ In 32-bit system, min-obj-alignment is >= 8 bytes, so the gap (if any)\n-  \/\/ right before denses-prefix must be greater than min-fill-size; nothing to\n-  \/\/ do.\n+  \/\/ In 32-bit system, each heap word is 4 bytes, so MinObjAlignment == 2.\n+  \/\/ The gap is always equal to min-fill-size, so nothing to do.\n@@ -1119,0 +1127,4 @@\n+  if (MinObjAlignment > 1) {\n+    return;\n+  }\n+  assert(CollectedHeap::min_fill_size() == 2, \"inv\");\n","filename":"src\/hotspot\/share\/gc\/parallel\/psParallelCompact.cpp","additions":19,"deletions":7,"binary":false,"changes":26,"status":"modified"}]}