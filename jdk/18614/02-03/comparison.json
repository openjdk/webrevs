{"files":[{"patch":"@@ -29,1 +29,3 @@\n- * @modules jdk.compiler\/com.sun.tools.javac.api\n+ * @modules java.logging\n+ *          java.sql\n+ *          jdk.compiler\/com.sun.tools.javac.api\n@@ -278,0 +280,66 @@\n+        tb.writeJavaFiles(src,\n+                          \"\"\"\n+                          package test;\n+                          import module java.logging;\n+                          import java.lang.System.*;\n+                          public class Test {\n+                          }\n+                          \"\"\");\n+\n+        new JavacTask(tb)\n+            .options(\"--enable-preview\", \"--release\", SOURCE_VERSION)\n+            .outdir(classes)\n+            .files(tb.findJavaFiles(src))\n+            .run()\n+            .writeAll();\n+\n+        tb.writeJavaFiles(src,\n+                          \"\"\"\n+                          package test;\n+                          import module java.base;\n+                          import module java.sql;\n+                          public class Test {\n+                              Date d;\n+                          }\n+                          \"\"\");\n+\n+        actualErrors =\n+                new JavacTask(tb)\n+                    .options(\"--enable-preview\", \"--release\", SOURCE_VERSION,\n+                             \"-XDrawDiagnostics\")\n+                    .outdir(classes)\n+                    .files(tb.findJavaFiles(src))\n+                    .run(Task.Expect.FAIL)\n+                    .writeAll()\n+                    .getOutputLines(Task.OutputKind.DIRECT);\n+\n+        expectedErrors = List.of(\n+                \"Test.java:5:5: compiler.err.ref.ambiguous: Date, kindname.class, java.sql.Date, java.sql, kindname.class, java.util.Date, java.util\",\n+                \"- compiler.note.preview.filename: Test.java, DEFAULT\",\n+                \"- compiler.note.preview.recompile\",\n+                \"1 error\"\n+        );\n+\n+        if (!Objects.equals(expectedErrors, actualErrors)) {\n+            throw new AssertionError(\"Incorrect Output, expected: \" + expectedErrors +\n+                                      \", actual: \" + out);\n+\n+        }\n+\n+        tb.writeJavaFiles(src,\n+                          \"\"\"\n+                          package test;\n+                          import module java.base;\n+                          import module java.sql;\n+                          import java.util.Date;\n+                          public class Test {\n+                              Date d;\n+                          }\n+                          \"\"\");\n+\n+        new JavacTask(tb)\n+            .options(\"--enable-preview\", \"--release\", SOURCE_VERSION)\n+            .outdir(classes)\n+            .files(tb.findJavaFiles(src))\n+            .run()\n+            .writeAll();\n","filename":"test\/langtools\/tools\/javac\/ImportModule.java","additions":69,"deletions":1,"binary":false,"changes":70,"status":"modified"}]}