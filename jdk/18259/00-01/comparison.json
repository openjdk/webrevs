{"files":[{"patch":"@@ -37,0 +37,1 @@\n+import java.util.concurrent.CountDownLatch;\n@@ -53,2 +54,1 @@\n-    volatile boolean frameActivated = false;\n-\n+    private final CountDownLatch frameActivated = new CountDownLatch(1);\n@@ -68,4 +68,1 @@\n-                    synchronized (bug4773378.this) {\n-                        frameActivated = true;\n-                        bug4773378.this.notifyAll();\n-                    }\n+                    frameActivated.countDown();\n@@ -95,5 +92,1 @@\n-        synchronized (this) {\n-            while (!frameActivated) {\n-                bug4773378.this.wait();\n-            }\n-        }\n+        frameActivated.await();\n@@ -107,1 +100,1 @@\n-        Thread.sleep(2000);\n+        robot.waitForIdle();\n@@ -117,1 +110,1 @@\n-    class MyDesktopManager extends DefaultDesktopManager {\n+    private static class MyDesktopManager extends DefaultDesktopManager {\n","filename":"test\/jdk\/javax\/swing\/JDesktopPane\/bug4773378.java","additions":6,"deletions":13,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -80,1 +80,1 @@\n-                throw new RuntimeException(\"Robot could not be created\");\n+                throw new RuntimeException(\"Robot could not be created\", e);\n@@ -100,1 +100,1 @@\n-                passed = false;\n+                throw new RuntimeException(\"Test failed.\");\n@@ -113,1 +113,1 @@\n-            InvocationTargetException {\n+            InvocationTargetException, AWTException {\n@@ -116,0 +116,1 @@\n+            Robot robot = new Robot();\n@@ -117,4 +118,1 @@\n-            safeSleep(3000);\n-            if (!b.passed) {\n-                throw new RuntimeException(\"Test failed.\");\n-            }\n+            robot.waitForIdle();\n@@ -125,9 +123,0 @@\n-\n-    public static void safeSleep(long ms) {\n-        long wakeup = System.currentTimeMillis() + ms;\n-        do {\n-            try {\n-                Thread.sleep(wakeup - System.currentTimeMillis());\n-            } catch (InterruptedException ie) {}\n-        } while (System.currentTimeMillis() < wakeup);\n-    }\n","filename":"test\/jdk\/javax\/swing\/JEditorPane\/bug4325606.java","additions":5,"deletions":16,"binary":false,"changes":21,"status":"modified"}]}