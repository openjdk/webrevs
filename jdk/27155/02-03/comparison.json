{"files":[{"patch":"@@ -5877,1 +5877,1 @@\n-\/\/ you want to use it elsewhere, note that cnt must be >= CacheLineSize.\n+\/\/ you want to use it elsewhere, note that cnt must be no less than zicboz block size.\n@@ -5879,0 +5879,1 @@\n+  int zicboz_blk_size = VM_Version::zicboz_block_size.value();\n@@ -5883,1 +5884,1 @@\n-  andi(tmp1, tmp1, CacheLineSize - 1);\n+  andi(tmp1, tmp1, zicboz_blk_size - 1);\n@@ -5893,1 +5894,1 @@\n-  for (int i = -CacheLineSize + wordSize; i < 0; i += wordSize) {\n+  for (int i = -zicboz_blk_size + wordSize; i < 0; i += wordSize) {\n@@ -5898,1 +5899,1 @@\n-  mv(tmp1, CacheLineSize \/ wordSize);\n+  mv(tmp1, zicboz_blk_size \/ wordSize);\n@@ -5902,1 +5903,1 @@\n-  addi(base, base, CacheLineSize);\n+  addi(base, base, zicboz_blk_size);\n","filename":"src\/hotspot\/cpu\/riscv\/macroAssembler_riscv.cpp","additions":6,"deletions":5,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -184,5 +184,2 @@\n-  if (UseZicboz && (UseZic64b || zicboz_block_size.enabled())) {\n-    if (zicboz_block_size.enabled()) {\n-      assert(UseZic64b ? zicboz_block_size.value() == 64 : is_power_of_2(zicboz_block_size.value()), \"Sanity\");\n-      FLAG_SET_DEFAULT(CacheLineSize, zicboz_block_size.value());\n-    }\n+  if (UseZicboz && zicboz_block_size.enabled() && zicboz_block_size.value() > 0) {\n+    assert(is_power_of_2(zicboz_block_size.value()), \"Sanity\");\n@@ -193,1 +190,1 @@\n-      FLAG_SET_DEFAULT(BlockZeroingLowLimit, 2 * CacheLineSize);\n+      FLAG_SET_DEFAULT(BlockZeroingLowLimit, 2 * zicboz_block_size.value());\n","filename":"src\/hotspot\/cpu\/riscv\/vm_version_riscv.cpp","additions":3,"deletions":6,"binary":false,"changes":9,"status":"modified"}]}