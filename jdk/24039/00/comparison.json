{"files":[{"patch":"@@ -4,1 +4,1 @@\n- * Copyright (c) 2023, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2023, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -41,1 +41,1 @@\n-    \n+\n@@ -44,0 +44,1 @@\n+        <public publicId=\"-\/\/W3C\/\/DTD XHTML 1.1\/\/EN\" uri=\"xhtml11.dtd\"\/>\n@@ -84,1 +85,1 @@\n-    \n+\n@@ -86,0 +87,3 @@\n+        <public publicId=\"-\/\/W3C\/\/DTD XHTML 1.0 Strict\/\/EN\" uri=\"xhtml1-strict.dtd\"\/>\n+        <public publicId=\"-\/\/W3C\/\/DTD XHTML 1.0 Transitional\/\/EN\" uri=\"xhtml1-transitional.dtd\"\/>\n+        <public publicId=\"-\/\/W3C\/\/DTD XHTML 1.0 Frameset\/\/EN\" uri=\"xhtml1-frameset.dtd\"\/>\n@@ -100,1 +104,1 @@\n-    \n+\n@@ -102,0 +106,1 @@\n+        <public publicId=\"-\/\/W3C\/\/DTD Specification V2.10\/\/EN\" uri=\"xmlspec2_10\/xmlspec.dtd\"\/>\n@@ -104,1 +109,1 @@\n-    \n+\n","filename":"src\/java.xml\/share\/classes\/jdk\/xml\/internal\/jdkcatalog\/JDKCatalog.xml","additions":10,"deletions":5,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -1,4 +1,8 @@\n-<!-- DTD for XML Schema Definition Language Part 1: Structures\n-     Public Identifier: \"-\/\/W3C\/\/DTD XSD 1.1\/\/EN\"\n-     Official Location: http:\/\/www.w3.org\/2009\/XMLSchema\/XMLSchema.dtd -->\n-<!-- Id: structures.dtd,v 1.1 2003\/08\/28 13:30:52 ht Exp  -->\n+<!-- DTD for XML Schemas: Part 1: Structures\n+     Public Identifier: \"-\/\/W3C\/\/DTD XMLSCHEMA 200102\/\/EN\"\n+     Official Location: http:\/\/www.w3.org\/2001\/XMLSchema.dtd -->\n+<!-- $Id: XMLSchema.dtd,v 1.31 2001\/10\/24 15:50:16 ht Exp $ -->\n+<!-- Note this DTD is NOT normative, or even definitive. -->           <!--d-->\n+<!-- prose copy in the structures REC is the definitive version -->    <!--d-->\n+<!-- (which shouldn't differ from this one except for this -->         <!--d-->\n+<!-- comment and entity expansions, but just in case) -->              <!--d-->\n@@ -6,1 +10,1 @@\n-     prefixes for the XSD namespace, any XML document which is\n+     prefixes for the XML Schema namespace, any XML document which is\n@@ -9,2 +13,2 @@\n-     declaration of the XSD namespace is almost certainly not\n-     a valid schema document. -->\n+     declaration of the XML Schema namespace is almost certainly not\n+     a valid schema. -->\n@@ -12,2 +16,0 @@\n-<!-- See below (at the bottom of this document) for information about\n-      the revision and namespace-versioning policy governing this DTD. -->\n@@ -15,2 +17,2 @@\n-     are defined in XML Schema Definition Language Part 2: Datatypes -->\n-<!ENTITY % xs-datatypes PUBLIC '-\/\/W3C\/\/DTD XSD 1.1 Datatypes\/\/EN' 'datatypes.dtd' >\n+     are defined in XML Schema: Part 2: Datatypes -->\n+<!ENTITY % xs-datatypes PUBLIC 'datatypes' 'datatypes.dtd' >\n@@ -18,1 +20,1 @@\n-<!ENTITY % p 'xs:'> <!-- can be overridden in the internal subset of a\n+<!ENTITY % p 'xs:'> <!-- can be overriden in the internal subset of a\n@@ -28,1 +30,0 @@\n-<!ENTITY % defaultOpenContent \"%p;defaultOpenContent\">\n@@ -31,1 +32,0 @@\n-<!ENTITY % openContent \"%p;openContent\">\n@@ -35,1 +35,0 @@\n-<!ENTITY % alternative \"%p;alternative\">\n@@ -52,1 +51,0 @@\n-<!ENTITY % override \"%p;override\">\n@@ -54,2 +52,0 @@\n-<!ENTITY % assert   \"%p;assert\">\n-\n@@ -64,2 +60,1 @@\n-     anyAttribute='##other' in the\n-     schema for schema documents -->\n+     anyAttribute='##other' in the schema for schemas -->\n@@ -68,1 +63,0 @@\n-<!ENTITY % defaultOpenContentAttrs ''>\n@@ -71,1 +65,0 @@\n-<!ENTITY % openContentAttrs ''>\n@@ -88,2 +81,0 @@\n-<!ENTITY % assertAttrs ''>\n-\n@@ -93,1 +84,0 @@\n-<!ENTITY % overrideAttrs ''>\n@@ -105,1 +95,0 @@\n-<!ENTITY % composition '%include; | %import; | %override; | %redefine;'>\n@@ -113,4 +102,1 @@\n-<!ENTITY % assertions   '(%assert;)*'>\n-\n-<!ENTITY % particleAndAttrs '(%openContent;?, (%mgs; | %group;)?,\n-                              %attrDecls;, %assertions;)'>\n+<!ENTITY % particleAndAttrs '((%mgs; | %group;)?, %attrDecls;)'>\n@@ -119,1 +105,1 @@\n-<!ENTITY % restriction1 '(%openContent;?, (%mgs; | %group;)?)'>\n+<!ENTITY % restriction1 '((%mgs; | %group;)?)'>\n@@ -125,2 +111,1 @@\n-<!ELEMENT %schema; ((%composition; | %annotation;)*,\n-                    (%defaultOpenContent;, (%annotation;)*)?,\n+<!ELEMENT %schema; ((%include; | %import; | %redefine; | %annotation;)*,\n@@ -142,2 +127,0 @@\n-   defaultAttributes    CDATA                  #IMPLIED\n-   xpathDefaultNamespace    CDATA       '##local'\n@@ -146,2 +129,1 @@\n-<!-- Note the xmlns declaration is NOT in the\n-     schema for schema documents,\n+<!-- Note the xmlns declaration is NOT in the Schema for Schemas,\n@@ -151,1 +133,1 @@\n- \n+\n@@ -157,7 +139,0 @@\n-<!ELEMENT %defaultOpenContent; ((%annotation;)?, %any;)>\n-<!ATTLIST %defaultOpenContent;\n-          appliesToEmpty  (true|false)           'false'\n-          mode            (interleave|suffix)    'interleave'\n-          id              ID                     #IMPLIED\n-          %defaultOpenContentAttrs;>\n-\n@@ -173,7 +148,6 @@\n-          name                    %NCName;                 #IMPLIED\n-          id                      ID                       #IMPLIED\n-          abstract                %boolean;                #IMPLIED\n-          final                   %complexDerivationSet;   #IMPLIED\n-          block                   %complexDerivationSet;   #IMPLIED\n-          mixed                   (true|false)             'false'\n-          defaultAttributesApply  %boolean;                'true'\n+          name      %NCName;                        #IMPLIED\n+          id        ID                              #IMPLIED\n+          abstract  %boolean;                       #IMPLIED\n+          final     %complexDerivationSet;          #IMPLIED\n+          block     %complexDerivationSet;          #IMPLIED\n+          mixed (true|false) 'false'\n@@ -183,1 +157,2 @@\n-<!-- mixed is disallowed if simpleContent, overridden if complexContent has one too. -->\n+<!-- mixed is disallowed if simpleContent, overriden if complexContent\n+     has one too. -->\n@@ -194,6 +169,0 @@\n-<!ELEMENT %openContent; ((%annotation;)?, (%any;)?)>\n-<!ATTLIST %openContent;\n-          mode            (none|interleave|suffix)  'interleave'\n-          id              ID                        #IMPLIED\n-          %openContentAttrs;>\n-\n@@ -208,1 +177,1 @@\n-<!-- restriction should use the simple branch from part2, not the \n+<!-- restriction should use the simple branch from part2, not the\n@@ -213,3 +182,2 @@\n-          base  %QName;               #REQUIRED\n-          id    ID                    #IMPLIED\n-          \n+          base  %QName;      #REQUIRED\n+          id    ID           #IMPLIED\n@@ -223,1 +191,0 @@\n-                     (%alternative;)*,\n@@ -242,1 +209,0 @@\n-            targetNamespace    %URIref;               #IMPLIED\n@@ -247,1 +213,1 @@\n-     substitutionGroup, if any, else xs:anyType, i.e. unconstrained -->\n+     substitutionGroup, if any, else the ur-type, i.e. unconstrained -->\n@@ -250,9 +216,0 @@\n-<!ELEMENT %alternative; ((%annotation;)?, \n-            (%simpleType; | %complexType;)?) >\n-<!ATTLIST %alternative; \n-            test                     CDATA     #IMPLIED\n-            type                     %QName;   #IMPLIED\n-            xpathDefaultNamespace    CDATA     #IMPLIED\n-            id                       ID        #IMPLIED >\n-\n-\n@@ -260,1 +217,1 @@\n-<!ATTLIST %group; \n+<!ATTLIST %group;\n@@ -268,1 +225,1 @@\n-<!ELEMENT %all; ((%annotation;)?, (%element;| %group;| %any;)*)>\n+<!ELEMENT %all; ((%annotation;)?, (%element;)*)>\n@@ -270,2 +227,2 @@\n-          minOccurs   (0 | 1)                #IMPLIED\n-          maxOccurs   (0 | 1)                #IMPLIED\n+          minOccurs   (1)                    #IMPLIED\n+          maxOccurs   (1)                    #IMPLIED\n@@ -292,0 +249,5 @@\n+<!-- Note that if order is 'all', group is not allowed inside.\n+     If order is 'all' THIS group must be alone (or referenced alone) at\n+     the top level of a content model -->\n+<!-- If order is 'all', minOccurs==maxOccurs==1 on element\/any inside -->\n+<!-- Should allow minOccurs=0 inside order='all' . . . -->\n@@ -295,3 +257,1 @@\n-            namespace       CDATA                  #IMPLIED\n-            notNamespace    CDATA                  #IMPLIED\n-            notQName        CDATA                  ''\n+            namespace       CDATA                  '##any'\n@@ -318,9 +278,0 @@\n-<!-- notNamespace is interpreted as follows:\n-                  ##local    - - any unqualified non-conflicting WFXML\/attribute\n-                  one or     - - any non-conflicting WFXML from\n-                  more URI        the listed namespaces\n-                  references\n-\n-                  ##targetNamespace ##local may appear in the above list,\n-                    with the obvious meaning -->\n-\n@@ -329,3 +280,1 @@\n-            namespace       CDATA              #IMPLIED\n-            notNamespace    CDATA              #IMPLIED\n-            notQName        CDATA              ''\n+            namespace       CDATA              '##any'\n@@ -335,1 +284,1 @@\n-<!-- namespace and notNamespace are interpreted as for 'any' above -->\n+<!-- namespace is interpreted as for 'any' above -->\n@@ -341,10 +290,8 @@\n-          name              %NCName;      #IMPLIED\n-          id                ID            #IMPLIED\n-          ref               %QName;       #IMPLIED\n-          type              %QName;       #IMPLIED\n-          use               (prohibited|optional|required) #IMPLIED\n-          default           CDATA         #IMPLIED\n-          fixed             CDATA         #IMPLIED\n-          form              %formValues;  #IMPLIED\n-          targetNamespace   %URIref;      #IMPLIED\n-          inheritable       %boolean;      #IMPLIED\n+          name      %NCName;      #IMPLIED\n+          id        ID            #IMPLIED\n+          ref       %QName;       #IMPLIED\n+          type      %QName;       #IMPLIED\n+          use       (prohibited|optional|required) #IMPLIED\n+          default   CDATA         #IMPLIED\n+          fixed     CDATA         #IMPLIED\n+          form      %formValues;  #IMPLIED\n@@ -374,3 +321,2 @@\n-          name                     %NCName;       #IMPLIED\n-          ref                      %QName;        #IMPLIED\n-          id                       ID             #IMPLIED\n+          name     %NCName;       #REQUIRED\n+          id       ID             #IMPLIED\n@@ -381,3 +327,2 @@\n-          name                     %NCName;       #IMPLIED\n-          ref                      %QName;        #IMPLIED\n-          id                       ID             #IMPLIED\n+          name     %NCName;       #REQUIRED\n+          id       ID             #IMPLIED\n@@ -388,4 +333,3 @@\n-          name                     %NCName;       #IMPLIED\n-          ref                      %QName;        #IMPLIED\n-          refer                    %QName;        #IMPLIED\n-          id                       ID             #IMPLIED\n+          name     %NCName;       #REQUIRED\n+          refer    %QName;        #REQUIRED\n+          id       ID             #IMPLIED\n@@ -396,3 +340,2 @@\n-          xpath                    %XPathExpr; #REQUIRED\n-          xpathDefaultNamespace    CDATA       #IMPLIED\n-          id                       ID          #IMPLIED\n+          xpath %XPathExpr; #REQUIRED\n+          id    ID          #IMPLIED\n@@ -402,3 +345,2 @@\n-          xpath                    %XPathExpr; #REQUIRED\n-          xpathDefaultNamespace    CDATA       #IMPLIED\n-          id                       ID          #IMPLIED\n+          xpath %XPathExpr; #REQUIRED\n+          id    ID          #IMPLIED\n@@ -407,9 +349,0 @@\n-<!-- co-constraint assertions -->\n-<!ELEMENT %assert; ((%annotation;)?)>\n-<!ATTLIST %assert;\n-          test                     %XPathExpr; #REQUIRED\n-          id                       ID          #IMPLIED\n-          xpathDefaultNamespace    CDATA       #IMPLIED\n-          %assertAttrs;>\n-\n-\n@@ -437,8 +370,0 @@\n-<!ELEMENT %override; ((%annotation;)?,\n-                      ((%simpleType; | %complexType; | %group; | %attributeGroup;) |\n-                       %element; | %attribute; | %notation;)*)>\n-<!ATTLIST %override;\n-          schemaLocation %URIref; #REQUIRED\n-          id             ID       #IMPLIED\n-          %overrideAttrs;>\n-\n@@ -447,5 +372,5 @@\n-\t  name        %NCName;    #REQUIRED\n-\t  id          ID          #IMPLIED\n-\t  public      CDATA       #REQUIRED\n-\t  system      %URIref;    #IMPLIED\n-\t  %notationAttrs;>\n+          name        %NCName;    #REQUIRED\n+          id          ID          #IMPLIED\n+          public      CDATA       #REQUIRED\n+          system      %URIref;    #IMPLIED\n+          %notationAttrs;>\n@@ -478,36 +403,0 @@\n-\n-<!-- \n-      In keeping with the XML Schema WG's standard versioning policy, \n-      this DTD will persist at the URI\n-      http:\/\/www.w3.org\/2012\/04\/XMLSchema.dtd.\n-\n-      At the date of issue it can also be found at the URI\n-      http:\/\/www.w3.org\/2009\/XMLSchema\/XMLSchema.dtd.\n-\n-      The schema document at that URI may however change in the future, \n-      in order to remain compatible with the latest version of XSD \n-      and its namespace.  In other words, if XSD or the XML Schema \n-      namespace change, the version of this document at \n-      http:\/\/www.w3.org\/2009\/XMLSchema\/XMLSchema.dtd will change accordingly; \n-      the version at http:\/\/www.w3.org\/2012\/04\/XMLSchema.dtd \n-      will not change.\n-\n-      Previous dated (and unchanging) versions of this DTD include:\n-\n-       http:\/\/www.w3.org\/2012\/01\/XMLSchema.dtd\n-          (XSD 1.1 Proposed Recommendation)\n-\n-\n-        http:\/\/www.w3.org\/2011\/07\/XMLSchema.dtd\n-          (XSD 1.1 Candidate Recommendation)\n-\n-        http:\/\/www.w3.org\/2009\/04\/XMLSchema.dtd \n-          (XSD 1.1 Candidate Recommendation)\n-\n-        http:\/\/www.w3.org\/2004\/10\/XMLSchema.dtd\n-          (XSD 1.0 Recommendation, Second Edition)\n-\n-        http:\/\/www.w3.org\/2001\/05\/XMLSchema.dtd\n-          (XSD 1.0 Recommendation, First Edition)\n-\n--->\n","filename":"src\/java.xml\/share\/classes\/jdk\/xml\/internal\/jdkcatalog\/w3c\/dtd\/schema10\/XMLSchema.dtd","additions":68,"deletions":179,"binary":false,"changes":247,"status":"modified"},{"patch":"@@ -3,3 +3,5 @@\n-        \n-        Id: datatypes.dtd,v 1.1.2.4 2005\/01\/31 18:40:42 cmsmcq Exp \n-        Note this DTD is NOT normative, or even definitive.\n+        $Id: datatypes.dtd,v 1.23 2001\/03\/16 17:36:30 ht Exp $\n+        Note this DTD is NOT normative, or even definitive. - - the\n+        prose copy in the datatypes REC is the definitive version\n+        (which shouldn't differ from this one except for this comment\n+        and entity expansions, but just in case)\n@@ -24,1 +26,0 @@\n-\n@@ -32,5 +33,0 @@\n-<!ENTITY % assertion \"%p;assertion\">\n-\n-<!ENTITY % explicitTimezone \"%p;explicitTimezone\">\n-\n-\n@@ -38,1 +34,1 @@\n-        Customization entities for the ATTLIST of each element\n+        Customisation entities for the ATTLIST of each element\n@@ -56,1 +52,0 @@\n-\n@@ -60,2 +55,0 @@\n-<!ENTITY % assertionAttrs \"\">\n-<!ENTITY % explicitTimezoneAttrs \"\">\n@@ -85,1 +78,1 @@\n-        enumeration and assertion may repeat.\n+        enumeration may repeat.\n@@ -90,1 +83,1 @@\n-<!ENTITY % numeric \"%totalDigits; | %fractionDigits;\"> \n+<!ENTITY % numeric \"%totalDigits; | %fractionDigits;\">\n@@ -94,5 +87,3 @@\n-   %maxLength; | %minLength; | %assertion;\n-   | %explicitTimezone;\">\n-<!ENTITY % implementation-defined-facets \"\">\n-<!ENTITY % facet \"%ordered; | %unordered; %implementation-defined-facets;\">\n-<!ENTITY % facetAttr \n+   %maxLength; | %minLength;\">\n+<!ENTITY % facet \"%ordered; | %unordered;\">\n+<!ENTITY % facetAttr\n@@ -213,10 +204,0 @@\n-\n-<!ELEMENT %assertion; %facetModel;>\n-<!ATTLIST %assertion;\n-        %facetAttr;\n-        %assertionAttrs;>\n-\n-<!ELEMENT %explicitTimezone; %facetModel;>\n-<!ATTLIST %explicitTimezone;\n-        %facetAttr;\n-        %explicitTimezoneAttrs;>\n","filename":"src\/java.xml\/share\/classes\/jdk\/xml\/internal\/jdkcatalog\/w3c\/dtd\/schema10\/datatypes.dtd","additions":11,"deletions":30,"binary":false,"changes":41,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2024, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,0 +31,1 @@\n+import javax.xml.catalog.Catalog;\n@@ -36,0 +37,1 @@\n+import jdk.xml.internal.JdkCatalog;\n@@ -38,0 +40,1 @@\n+import org.testng.annotations.BeforeClass;\n@@ -47,1 +50,2 @@\n- * @bug 8344800 8345353\n+ * @bug 8344800 8345353 8351969\n+ * @modules java.xml\/jdk.xml.internal\n@@ -67,0 +71,23 @@\n+    Catalog jdkCatalog;\n+\n+    \/*\n+     * DataProvider: DTDs in the JDK built-in Catalog\n+     * Data provided: public and system Ids, see test testDTDsInJDKCatalog\n+     *\/\n+    @DataProvider(name = \"DTDsInJDKCatalog\")\n+    public Object[][] getDTDsInJDKCatalog() throws Exception {\n+        return new Object[][]{\n+            \/\/ Schema 1.0\n+            {\"-\/\/W3C\/\/DTD XMLSCHEMA 200102\/\/EN\", \"http:\/\/www.w3.org\/2001\/XMLSchema.dtd\"},\n+            {\"datatypes\", \"http:\/\/www.w3.org\/2001\/datatypes.dtd\"},\n+            \/\/ XHTML 1.0\n+            {\"-\/\/W3C\/\/DTD XHTML 1.0 Frameset\/\/EN\", \"http:\/\/www.w3.org\/TR\/xhtml1\/DTD\/xhtml1-frameset.dtd\"},\n+            {\"-\/\/W3C\/\/DTD XHTML 1.0 Strict\/\/EN\", \"http:\/\/www.w3.org\/TR\/xhtml1\/DTD\/xhtml1-strict.dtd\"},\n+            {\"-\/\/W3C\/\/DTD XHTML 1.0 Transitional\/\/EN\", \"http:\/\/www.w3.org\/TR\/xhtml1\/DTD\/xhtml1-transitional.dtd\"},\n+            \/\/ XHTML 1.1\n+            {\"-\/\/W3C\/\/DTD XHTML 1.1\/\/EN\", \"http:\/\/www.w3.org\/TR\/xhtml11\/DTD\/xhtml11.dtd\"},\n+            \/\/ DTD for W3C specifications\n+            {\"-\/\/W3C\/\/DTD Specification V2.10\/\/EN\", \"http:\/\/www.w3.org\/2002\/xmlspec\/dtd\/2.10\/xmlspec.dtd\"},\n+        };\n+    }\n+\n@@ -109,0 +136,26 @@\n+    \/*\n+     * Initializing fields\n+     *\/\n+    @BeforeClass\n+    public void setUpClass() throws Exception {\n+        \/\/ initialize JDKCatalog\n+        JdkCatalog.init(\"continue\");\n+        jdkCatalog = JdkCatalog.catalog;\n+    }\n+\n+    \/**\n+     * Verifies that the JDK built-in Catalog supports both the Public and System\n+     * identifiers for DTDs.\n+     * @param publicId the public Id\n+     * @param systemId the system Id\n+     * @throws Exception if test fails unexpectedly\n+     *\/\n+    @Test(dataProvider = \"DTDsInJDKCatalog\")\n+    public void testDTDsInJDKCatalog(String publicId, String systemId)\n+            throws Exception {\n+        String matchingPubId = jdkCatalog.matchPublic(publicId);\n+        String matchingSysId = jdkCatalog.matchSystem(systemId);\n+\n+        Assert.assertEquals(matchingPubId, matchingSysId);\n+    }\n+\n","filename":"test\/jaxp\/javax\/xml\/jaxp\/unittest\/common\/jdkcatalog\/JDKCatalogTest.java","additions":55,"deletions":2,"binary":false,"changes":57,"status":"modified"}]}