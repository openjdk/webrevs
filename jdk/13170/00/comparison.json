{"files":[{"patch":"@@ -33,3 +33,0 @@\n-com\/sun\/jdi\/FetchLocals.java 8285422 generic-all\n-com\/sun\/jdi\/Frames2Test.java 8285422 generic-all\n-com\/sun\/jdi\/GetSetLocalTest.java 8285422 generic-all\n@@ -40,1 +37,0 @@\n-com\/sun\/jdi\/LaunchCommandLine.java 8285422 generic-all\n@@ -43,1 +39,0 @@\n-com\/sun\/jdi\/NativeInstanceFilter.java 8285422 generic-all\n","filename":"test\/jdk\/ProblemList-svc-vthread.txt","additions":0,"deletions":5,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -466,9 +466,4 @@\n-        String mainWrapper = System.getProperty(\"main.wrapper\");\n-        if (\"Virtual\".equals(mainWrapper)) {\n-            argInfo.targetAppCommandLine = TestScaffold.class.getName() + \" \" + mainWrapper + \" \";\n-            argInfo.targetVMArgs += \"--enable-preview \";\n-        } else if (\"true\".equals(System.getProperty(\"test.enable.preview\"))) {\n-            \/\/ the test specified @enablePreview.\n-            argInfo.targetVMArgs += \"--enable-preview \";\n-        }\n-\n+        \/\/ Parse arguments, like java\/j* tools command-line arguments\n+        \/\/ the first argument not-starting with '-' is treated as a classname\n+        \/\/ the other arguments are split to targetVMArgs targetAppCommandLine correspondingly\n+        boolean classNameParsed = false;\n@@ -476,0 +471,5 @@\n+            if (classNameParsed) {\n+                \/\/ once classname is read, treat any other arguments as app arguments\n+                argInfo.targetAppCommandLine += (args[i] + ' ');\n+                continue;\n+            }\n@@ -499,0 +499,2 @@\n+            } else if (args[i].startsWith(\"-\")) {\n+                argInfo.targetVMArgs += (args[i] + ' ');\n@@ -500,0 +502,1 @@\n+                classNameParsed = true;\n@@ -503,0 +506,12 @@\n+\n+        \/\/ Need to change args to run wrapper using command like 'TestScaffold Virtual <app-name>'\n+        String mainWrapper = System.getProperty(\"main.wrapper\");\n+        if (mainWrapper != null && !argInfo.targetAppCommandLine.isEmpty()) {\n+            argInfo.targetAppCommandLine = TestScaffold.class.getName() + ' '\n+                    + mainWrapper + ' ' + argInfo.targetAppCommandLine;\n+            argInfo.targetVMArgs += \"--enable-preview \";\n+        } else if (\"true\".equals(System.getProperty(\"test.enable.preview\"))) {\n+            \/\/ the test specified @enablePreview.\n+            argInfo.targetVMArgs += \"--enable-preview \";\n+        }\n+\n","filename":"test\/jdk\/com\/sun\/jdi\/TestScaffold.java","additions":24,"deletions":9,"binary":false,"changes":33,"status":"modified"}]}