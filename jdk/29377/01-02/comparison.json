{"files":[{"patch":"@@ -955,9 +955,9 @@\n-        if (invoker != null) {\n-            Component oldInvoker = this.invoker;\n-            this.invoker = invoker;\n-\n-            if ((oldInvoker != this.invoker) && (ui != null)) {\n-                ui.uninstallUI(this);\n-                if (oldInvoker != null) {\n-                    oldInvoker.removePropertyChangeListener(\"ancestor\", propListener);\n-                }\n+        Component oldInvoker = this.invoker;\n+        this.invoker = invoker;\n+\n+        if ((oldInvoker != this.invoker) && (ui != null)) {\n+            ui.uninstallUI(this);\n+            if (oldInvoker != null) {\n+                oldInvoker.removePropertyChangeListener(\"ancestor\", propListener);\n+            }\n+            if (invoker != null) {\n@@ -965,1 +965,0 @@\n-                ui.installUI(this);\n@@ -967,1 +966,1 @@\n-            invalidate();\n+            ui.installUI(this);\n@@ -969,0 +968,2 @@\n+        invalidate();\n+\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/JPopupMenu.java","additions":12,"deletions":11,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -76,0 +76,1 @@\n+                popupMenu.setInvoker(null);\n@@ -111,1 +112,0 @@\n-                popupMenu.setInvoker(null);\n","filename":"test\/jdk\/javax\/swing\/JPopupMenu\/TestPopupInvoker.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}