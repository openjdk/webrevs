{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -955,7 +955,11 @@\n-        Component oldInvoker = this.invoker;\n-        this.invoker = invoker;\n-\n-        if ((oldInvoker != this.invoker) && (ui != null)) {\n-            ui.uninstallUI(this);\n-            if (oldInvoker != null) {\n-                oldInvoker.removePropertyChangeListener(\"ancestor\", propListener);\n+        if (invoker != null) {\n+            Component oldInvoker = this.invoker;\n+            this.invoker = invoker;\n+\n+            if ((oldInvoker != this.invoker) && (ui != null)) {\n+                ui.uninstallUI(this);\n+                if (oldInvoker != null) {\n+                    oldInvoker.removePropertyChangeListener(\"ancestor\", propListener);\n+                }\n+                invoker.addPropertyChangeListener(\"ancestor\", propListener);\n+                ui.installUI(this);\n@@ -963,2 +967,1 @@\n-            invoker.addPropertyChangeListener(\"ancestor\", propListener);\n-            ui.installUI(this);\n+            invalidate();\n@@ -966,1 +969,0 @@\n-        invalidate();\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/JPopupMenu.java","additions":13,"deletions":11,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2025, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,1 +26,1 @@\n- * @bug 4938801\n+ * @bug 4938801 8376169\n@@ -111,0 +111,1 @@\n+                popupMenu.setInvoker(null);\n","filename":"test\/jdk\/javax\/swing\/JPopupMenu\/TestPopupInvoker.java","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"}]}