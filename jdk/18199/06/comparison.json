{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -162,0 +162,27 @@\n+    \/**\n+     * Get a Debug object corresponding to the given option on the given\n+     * property value.\n+     * <p>\n+     * Note: unlike other {@code getInstance} methods, this method does not\n+     * use the {@code java.security.debug} system property.\n+     * <p>\n+     * Usually, this method is used by other individual era-specific debug\n+     * settings. For example,\n+     * {@snippet lang=java:\n+     * Map<String,String> settings = loadLoginSettings();\n+     * String property = settings.get(\"login\");\n+     * Debug debug = Debug.of(\"login\", setting);\n+     * }\n+     * @param option the debug option name\n+     * @param property debug setting for this option\n+     * @return a new Debug object if the property is true\n+     *\/\n+    public static Debug of(String option, String property) {\n+        if (\"true\".equalsIgnoreCase(property)) {\n+            Debug d = new Debug();\n+            d.prefix = option;\n+            return d;\n+        }\n+        return null;\n+    }\n+\n","filename":"src\/java.base\/share\/classes\/sun\/security\/util\/Debug.java","additions":28,"deletions":1,"binary":false,"changes":29,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -84,1 +84,1 @@\n-        printf(\"Couldn't find %s\\n\", className);\n+        fprintf(stderr, \"Couldn't find %s\\n\", className);\n@@ -132,1 +132,1 @@\n-        printf(\"Couldn't find Ticket constructor\\n\");\n+        fprintf(stderr, \"Couldn't find Ticket constructor\\n\");\n@@ -138,1 +138,1 @@\n-        printf(\"Couldn't find PrincipalName constructor\\n\");\n+        fprintf(stderr, \"Couldn't find PrincipalName constructor\\n\");\n@@ -144,1 +144,1 @@\n-        printf(\"Couldn't find EncryptionKey constructor\\n\");\n+        fprintf(stderr, \"Couldn't find EncryptionKey constructor\\n\");\n@@ -150,1 +150,1 @@\n-        printf(\"Couldn't find TicketFlags constructor\\n\");\n+        fprintf(stderr, \"Couldn't find TicketFlags constructor\\n\");\n@@ -156,1 +156,1 @@\n-        printf(\"Couldn't find KerberosTime constructor\\n\");\n+        fprintf(stderr, \"Couldn't find KerberosTime constructor\\n\");\n@@ -162,1 +162,1 @@\n-        printf(\"Couldn't find Integer constructor\\n\");\n+        fprintf(stderr, \"Couldn't find Integer constructor\\n\");\n@@ -168,1 +168,1 @@\n-        printf(\"Couldn't find HostAddress constructor\\n\");\n+        fprintf(stderr, \"Couldn't find HostAddress constructor\\n\");\n@@ -174,1 +174,1 @@\n-        printf(\"Couldn't find HostAddresses constructor\\n\");\n+        fprintf(stderr, \"Couldn't find HostAddresses constructor\\n\");\n@@ -379,1 +379,1 @@\n-                            printf(\"Couldn't find sun.security.krb5.internal.Ticket constructor\\n\");\n+                            fprintf(stderr, \"Couldn't find sun.security.krb5.internal.Ticket constructor\\n\");\n","filename":"src\/java.security.jgss\/macosx\/native\/libosxkrb5\/nativeccache.c","additions":11,"deletions":11,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -450,37 +450,0 @@\n-\n-\n-    \/*\n-      public static void main(String[] args) throws Exception {\n-      ServicePermission this_ =\n-      new ServicePermission(args[0], \"accept\");\n-      ServicePermission that_ =\n-      new ServicePermission(args[1], \"accept,initiate\");\n-      System.out.println(\"-----\\n\");\n-      System.out.println(\"this.implies(that) = \" + this_.implies(that_));\n-      System.out.println(\"-----\\n\");\n-      System.out.println(\"this = \"+this_);\n-      System.out.println(\"-----\\n\");\n-      System.out.println(\"that = \"+that_);\n-      System.out.println(\"-----\\n\");\n-\n-      KrbServicePermissionCollection nps =\n-      new KrbServicePermissionCollection();\n-      nps.add(this_);\n-      nps.add(new ServicePermission(\"nfs\/example.com@EXAMPLE.COM\",\n-      \"accept\"));\n-      nps.add(new ServicePermission(\"host\/example.com@EXAMPLE.COM\",\n-      \"initiate\"));\n-      System.out.println(\"nps.implies(that) = \" + nps.implies(that_));\n-      System.out.println(\"-----\\n\");\n-\n-      Enumeration e = nps.elements();\n-\n-      while (e.hasMoreElements()) {\n-      ServicePermission x =\n-      (ServicePermission) e.nextElement();\n-      System.out.println(\"nps.e = \" + x);\n-      }\n-\n-      }\n-    *\/\n-\n","filename":"src\/java.security.jgss\/share\/classes\/javax\/security\/auth\/kerberos\/ServicePermission.java","additions":1,"deletions":38,"binary":false,"changes":39,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -38,1 +38,0 @@\n-import sun.security.action.GetBooleanAction;\n@@ -48,0 +47,2 @@\n+import static sun.security.krb5.internal.Krb5.DEBUG;\n+\n@@ -58,3 +59,0 @@\n-    private static final boolean DEBUG =\n-            GetBooleanAction.privilegedGetProperty(\"sun.security.krb5.debug\");\n-\n@@ -108,2 +106,2 @@\n-            if (DEBUG) {\n-                System.out.println(\"Negotiate: Setting CBT\");\n+            if (DEBUG != null) {\n+                DEBUG.println(\"Negotiate: Setting CBT\");\n@@ -126,2 +124,2 @@\n-            if (DEBUG) {\n-                System.out.println(\"Negotiate support not initiated, will \" +\n+            if (DEBUG != null) {\n+                DEBUG.println(\"Negotiate support not initiated, will \" +\n@@ -163,3 +161,3 @@\n-            if (DEBUG) {\n-                System.out.println(\"Negotiate support cannot continue. Reason:\");\n-                e.printStackTrace();\n+            if (DEBUG != null) {\n+                DEBUG.println(\"Negotiate support cannot continue. Reason:\");\n+                e.printStackTrace(DEBUG.getPrintStream());\n@@ -184,3 +182,3 @@\n-            if (DEBUG) {\n-                System.out.println(\"Cannot release resources. Reason:\");\n-                e.printStackTrace();\n+            if (DEBUG != null) {\n+                DEBUG.println(\"Cannot release resources. Reason:\");\n+                e.printStackTrace(DEBUG.getPrintStream());\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/net\/www\/protocol\/http\/spnego\/NegotiatorImpl.java","additions":13,"deletions":15,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -93,1 +93,1 @@\n-                    if (GSSUtil.DEBUG) {\n+                    if (GSSUtil.DEBUG != null) {\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/jgss\/GSSCredentialImpl.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -320,21 +320,0 @@\n-\n-    \/\/ XXX Call these two in some central class\n-    private void debug(String str) {\n-        System.err.print(str);\n-    }\n-\n-    private  String getHexBytes(byte[] bytes, int len)\n-        throws IOException {\n-\n-        StringBuilder sb = new StringBuilder();\n-        for (int i = 0; i < len; i++) {\n-\n-            int b1 = (bytes[i] >> 4) & 0x0f;\n-            int b2 = bytes[i] & 0x0f;\n-\n-            sb.append(Integer.toHexString(b1));\n-            sb.append(Integer.toHexString(b2));\n-            sb.append(' ');\n-        }\n-        return sb.toString();\n-    }\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/jgss\/GSSHeader.java","additions":1,"deletions":22,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -91,1 +91,1 @@\n-                if (GSSUtil.DEBUG) {\n+                if (GSSUtil.DEBUG != null) {\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/jgss\/GSSManagerImpl.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -48,1 +48,0 @@\n-import sun.security.action.GetBooleanAction;\n@@ -50,0 +49,1 @@\n+import sun.security.util.Debug;\n@@ -70,2 +70,2 @@\n-    static final boolean DEBUG =\n-            GetBooleanAction.privilegedGetProperty(\"sun.security.jgss.debug\");\n+    static final Debug DEBUG = Debug.of(\"jgss\", GetPropertyAction\n+            .privilegedGetProperty(\"sun.security.jgss.debug\"));\n@@ -75,1 +75,1 @@\n-        System.out.println(message);\n+        DEBUG.println(message);\n@@ -85,1 +85,1 @@\n-            if (DEBUG) {\n+            if (DEBUG != null) {\n@@ -141,1 +141,1 @@\n-                if (DEBUG) {\n+                if (DEBUG != null) {\n@@ -154,1 +154,1 @@\n-        if (DEBUG) {\n+        if (DEBUG != null) {\n@@ -219,1 +219,1 @@\n-                if (DEBUG) {\n+                if (DEBUG != null) {\n@@ -317,1 +317,1 @@\n-        if (DEBUG) {\n+        if (DEBUG != null) {\n@@ -337,1 +337,1 @@\n-                            if (DEBUG) {\n+                            if (DEBUG != null) {\n@@ -343,1 +343,1 @@\n-                                if (DEBUG) {\n+                                if (DEBUG != null) {\n@@ -351,1 +351,1 @@\n-                                    if (DEBUG) {\n+                                    if (DEBUG != null) {\n@@ -356,1 +356,1 @@\n-                                if (DEBUG) {\n+                                if (DEBUG != null) {\n@@ -361,1 +361,1 @@\n-                    } else if (DEBUG) {\n+                    } else if (DEBUG != null) {\n@@ -368,1 +368,1 @@\n-            if (DEBUG) {\n+            if (DEBUG != null) {\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/jgss\/GSSUtil.java","additions":16,"deletions":16,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -138,1 +138,1 @@\n-                if (GSSUtil.DEBUG) {\n+                if (GSSUtil.DEBUG != null) {\n@@ -423,1 +423,1 @@\n-                    if (GSSUtil.DEBUG) {\n+                    if (GSSUtil.DEBUG != null) {\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/jgss\/ProviderList.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2004, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2004, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -69,3 +69,0 @@\n-    \/\/ debug flag\n-    private static final boolean DEBUG = Krb5Util.DEBUG;\n-\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/jgss\/krb5\/CipherHelper.java","additions":1,"deletions":4,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -46,0 +46,2 @@\n+import static sun.security.krb5.internal.Krb5.DEBUG;\n+\n@@ -124,1 +126,0 @@\n-    private static final boolean DEBUG = Krb5Util.DEBUG;\n@@ -382,2 +383,2 @@\n-        if (DEBUG) {\n-            System.out.println(\"Krb5Context setting mySeqNumber to: \"\n+        if (DEBUG != null) {\n+            DEBUG.println(\"Krb5Context setting mySeqNumber to: \"\n@@ -392,2 +393,2 @@\n-        if (DEBUG) {\n-            System.out.println(\"Krb5Context setting peerSeqNumber to: \"\n+        if (DEBUG != null) {\n+            DEBUG.println(\"Krb5Context setting peerSeqNumber to: \"\n@@ -537,2 +538,2 @@\n-                if (DEBUG) {\n-                    System.out.println(\">>> Constrained deleg from \" + caller);\n+                if (DEBUG != null) {\n+                    DEBUG.println(\">>> Constrained deleg from \" + caller);\n@@ -596,2 +597,2 @@\n-            if (DEBUG) {\n-                System.out.println(\"Entered Krb5Context.initSecContext with \" +\n+            if (DEBUG != null) {\n+                DEBUG.println(\"Entered Krb5Context.initSecContext with \" +\n@@ -663,2 +664,2 @@\n-                            if (DEBUG) {\n-                                System.out.println(\"Attempt to obtain service\"\n+                            if (DEBUG != null) {\n+                                DEBUG.println(\"Attempt to obtain service\"\n@@ -669,2 +670,2 @@\n-                            if (DEBUG) {\n-                                System.out.println(\"Found service ticket in \" +\n+                            if (DEBUG != null) {\n+                                DEBUG.println(\"Found service ticket in \" +\n@@ -684,2 +685,2 @@\n-                        if (DEBUG) {\n-                            System.out.println(\"Service ticket not found in \" +\n+                        if (DEBUG != null) {\n+                            DEBUG.println(\"Service ticket not found in \" +\n@@ -724,2 +725,2 @@\n-                                if (DEBUG) {\n-                                    System.out.println(\"Subject is \" +\n+                                if (DEBUG != null) {\n+                                    DEBUG.println(\"Subject is \" +\n@@ -741,2 +742,2 @@\n-                    if (DEBUG) {\n-                        System.out.println(\"Created InitSecContextToken:\\n\"+\n+                    if (DEBUG != null) {\n+                        DEBUG.println(\"Created InitSecContextToken:\\n\"+\n@@ -753,2 +754,2 @@\n-                    if (DEBUG) {\n-                        System.out.println(state);\n+                    if (DEBUG != null) {\n+                        DEBUG.println(\"state is \" + state);\n@@ -758,1 +759,1 @@\n-                if (DEBUG) {\n+                if (DEBUG != null) {\n@@ -795,2 +796,2 @@\n-        if (DEBUG) {\n-            System.out.println(\"Entered Krb5Context.acceptSecContext with \" +\n+        if (DEBUG != null) {\n+            DEBUG.println(\"Entered Krb5Context.acceptSecContext with \" +\n@@ -842,2 +843,2 @@\n-                if (DEBUG) {\n-                    System.out.println(state);\n+                if (DEBUG != null) {\n+                    DEBUG.println(\"state is \" + state);\n@@ -852,2 +853,2 @@\n-            if (DEBUG) {\n-                e.printStackTrace();\n+            if (DEBUG != null) {\n+                e.printStackTrace(DEBUG.getPrintStream());\n@@ -901,2 +902,2 @@\n-        if (DEBUG) {\n-            System.out.println(\"Krb5Context.wrap: data=[\"\n+        if (DEBUG != null) {\n+            DEBUG.println(\"Krb5Context.wrap: data=[\"\n@@ -922,2 +923,2 @@\n-            if (DEBUG) {\n-                System.out.println(\"Krb5Context.wrap: token=[\"\n+            if (DEBUG != null) {\n+                DEBUG.println(\"Krb5Context.wrap: token=[\"\n@@ -955,2 +956,2 @@\n-            if (DEBUG) {\n-                System.out.println(\"Krb5Context.wrap: token=[\"\n+            if (DEBUG != null) {\n+                DEBUG.println(\"Krb5Context.wrap: token=[\"\n@@ -983,1 +984,1 @@\n-                if (DEBUG) {\n+                if (DEBUG != null) {\n@@ -990,1 +991,1 @@\n-                if (DEBUG) {\n+                if (DEBUG != null) {\n@@ -1001,2 +1002,2 @@\n-        if (DEBUG) {\n-            System.out.println(\"Krb5Context.wrap: token=[\"\n+        if (DEBUG != null) {\n+            DEBUG.println(\"Krb5Context.wrap: token=[\"\n@@ -1028,2 +1029,2 @@\n-            if (DEBUG) {\n-                System.out.println(\"Krb5Context.unwrap: token=[\"\n+            if (DEBUG != null) {\n+                DEBUG.println(\"Krb5Context.unwrap: token=[\"\n@@ -1052,2 +1053,2 @@\n-            if (DEBUG) {\n-                System.out.println(\"Krb5Context.unwrap: data=[\"\n+            if (DEBUG != null) {\n+                DEBUG.println(\"Krb5Context.unwrap: data=[\"\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/jgss\/krb5\/Krb5Context.java","additions":44,"deletions":43,"binary":false,"changes":87,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -36,0 +36,2 @@\n+import static sun.security.krb5.internal.Krb5.DEBUG;\n+\n@@ -46,2 +48,0 @@\n-    private static final boolean DEBUG = Krb5Util.DEBUG;\n-\n@@ -155,2 +155,2 @@\n-                if (DEBUG) {\n-                    System.out.println(\"Permission to initiate \" +\n+                if (DEBUG != null) {\n+                    DEBUG.println(\"Permission to initiate \" +\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/jgss\/krb5\/Krb5MechFactory.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,1 +34,0 @@\n-import sun.security.action.GetBooleanAction;\n@@ -50,3 +49,0 @@\n-    static final boolean DEBUG = GetBooleanAction\n-            .privilegedGetProperty(\"sun.security.krb5.debug\");\n-\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/jgss\/krb5\/Krb5Util.java","additions":1,"deletions":5,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2002, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2002, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -42,0 +42,2 @@\n+import static sun.security.krb5.internal.Krb5.DEBUG;\n+\n@@ -52,2 +54,0 @@\n-    private static final boolean DEBUG = Krb5Util.DEBUG;\n-\n@@ -117,2 +117,2 @@\n-                    if (DEBUG) {\n-                        System.out.println(\"Found \" + credClass.getSimpleName()\n+                    if (DEBUG != null) {\n+                        DEBUG.println(\"Found \" + credClass.getSimpleName()\n@@ -135,2 +135,2 @@\n-                         if (DEBUG) {\n-                             System.out.println(\"Found \" +\n+                         if (DEBUG != null) {\n+                             DEBUG.println(\"Found \" +\n@@ -158,2 +158,2 @@\n-                        if (DEBUG) {\n-                            System.out.println(\"Found ticket for \"\n+                        if (DEBUG != null) {\n+                            DEBUG.println(\"Found ticket for \"\n@@ -174,2 +174,2 @@\n-                                    if (DEBUG) {\n-                                        System.out.println(\"Removed and destroyed \"\n+                                    if (DEBUG != null) {\n+                                        DEBUG.println(\"Removed and destroyed \"\n@@ -181,2 +181,2 @@\n-                                    if (DEBUG) {\n-                                        System.out.println(\"Expired ticket not\" +\n+                                    if (DEBUG != null) {\n+                                        DEBUG.println(\"Expired ticket not\" +\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/jgss\/krb5\/SubjectComber.java","additions":13,"deletions":13,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -35,0 +35,2 @@\n+import static sun.security.jgss.spnego.SpNegoContext.DEBUG;\n+\n@@ -119,2 +121,2 @@\n-            if (DEBUG) {\n-                System.out.println(\"SpNegoToken NegTokenInit: \" +\n+            if (DEBUG != null) {\n+                DEBUG.println(\"SpNegoToken NegTokenInit: \" +\n@@ -166,2 +168,2 @@\n-                        if (DEBUG) {\n-                            System.out.println(\"SpNegoToken NegTokenInit: \" +\n+                        if (DEBUG != null) {\n+                            DEBUG.println(\"SpNegoToken NegTokenInit: \" +\n@@ -177,2 +179,2 @@\n-                    if (DEBUG) {\n-                        System.out.println(\"SpNegoToken NegTokenInit: \" +\n+                    if (DEBUG != null) {\n+                        DEBUG.println(\"SpNegoToken NegTokenInit: \" +\n@@ -186,2 +188,2 @@\n-                        if (DEBUG) {\n-                            System.out.println(\"SpNegoToken NegTokenInit: \" +\n+                        if (DEBUG != null) {\n+                            DEBUG.println(\"SpNegoToken NegTokenInit: \" +\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/jgss\/spnego\/NegTokenInit.java","additions":11,"deletions":9,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,0 +33,2 @@\n+import static sun.security.jgss.spnego.SpNegoContext.DEBUG;\n+\n@@ -106,2 +108,2 @@\n-            if (DEBUG) {\n-                System.out.println(\"SpNegoToken NegTokenTarg: \" +\n+            if (DEBUG != null) {\n+                DEBUG.println(\"SpNegoToken NegTokenTarg: \" +\n@@ -144,2 +146,2 @@\n-                    if (DEBUG) {\n-                        System.out.println(\"SpNegoToken NegTokenTarg: negotiated\" +\n+                    if (DEBUG != null) {\n+                        DEBUG.println(\"SpNegoToken NegTokenTarg: negotiated\" +\n@@ -152,2 +154,2 @@\n-                    if (DEBUG) {\n-                        System.out.println(\"SpNegoToken NegTokenTarg: \" +\n+                    if (DEBUG != null) {\n+                        DEBUG.println(\"SpNegoToken NegTokenTarg: \" +\n@@ -163,2 +165,2 @@\n-                        if (DEBUG) {\n-                            System.out.println(\"SpNegoToken NegTokenTarg: \" +\n+                        if (DEBUG != null) {\n+                            DEBUG.println(\"SpNegoToken NegTokenTarg: \" +\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/jgss\/spnego\/NegTokenTarg.java","additions":11,"deletions":9,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,0 +34,1 @@\n+import sun.security.action.GetPropertyAction;\n@@ -87,2 +88,2 @@\n-    static final boolean DEBUG = GetBooleanAction\n-            .privilegedGetProperty(\"sun.security.spnego.debug\");\n+    static final Debug DEBUG = Debug.of(\"spnego\", GetPropertyAction\n+            .privilegedGetProperty(\"sun.security.spnego.debug\"));\n@@ -297,2 +298,2 @@\n-        if (DEBUG) {\n-            System.out.println(\"Entered SpNego.initSecContext with \" +\n+        if (DEBUG != null) {\n+            DEBUG.println(\"Entered SpNego.initSecContext with \" +\n@@ -326,2 +327,2 @@\n-                if (DEBUG) {\n-                    System.out.println(\"SpNegoContext.initSecContext: \" +\n+                if (DEBUG != null) {\n+                    DEBUG.println(\"SpNegoContext.initSecContext: \" +\n@@ -345,2 +346,2 @@\n-                if (DEBUG) {\n-                    System.out.println(\"SpNegoContext.initSecContext: \" +\n+                if (DEBUG != null) {\n+                    DEBUG.println(\"SpNegoContext.initSecContext: \" +\n@@ -355,2 +356,2 @@\n-                if (DEBUG) {\n-                    System.out.println(\"SpNegoContext.initSecContext: \" +\n+                if (DEBUG != null) {\n+                    DEBUG.println(\"SpNegoContext.initSecContext: \" +\n@@ -424,2 +425,2 @@\n-                        if (DEBUG) {\n-                            System.out.println(\"SPNEGO Negotiated Mechanism = \"\n+                        if (DEBUG != null) {\n+                            DEBUG.println(\"SPNEGO Negotiated Mechanism = \"\n@@ -433,2 +434,2 @@\n-                        if (DEBUG) {\n-                            System.out.println(\"SpNegoContext.initSecContext:\" +\n+                        if (DEBUG != null) {\n+                            DEBUG.println(\"SpNegoContext.initSecContext:\" +\n@@ -445,2 +446,2 @@\n-                if (DEBUG) {\n-                    System.out.println(state);\n+                if (DEBUG != null) {\n+                    DEBUG.println(\"state is \" + state);\n@@ -449,1 +450,1 @@\n-            if (DEBUG) {\n+            if (DEBUG != null) {\n@@ -451,1 +452,1 @@\n-                    System.out.println(\"SNegoContext.initSecContext: \" +\n+                    DEBUG.println(\"SNegoContext.initSecContext: \" +\n@@ -491,2 +492,2 @@\n-        if (DEBUG) {\n-            System.out.println(\"Entered SpNegoContext.acceptSecContext with \" +\n+        if (DEBUG != null) {\n+            DEBUG.println(\"Entered SpNegoContext.acceptSecContext with \" +\n@@ -508,2 +509,2 @@\n-                if (DEBUG) {\n-                    System.out.println(\"SpNegoContext.acceptSecContext: \" +\n+                if (DEBUG != null) {\n+                    DEBUG.println(\"SpNegoContext.acceptSecContext: \" +\n@@ -518,2 +519,2 @@\n-                if (DEBUG) {\n-                    System.out.println(\"SpNegoContext.acceptSecContext: \" +\n+                if (DEBUG != null) {\n+                    DEBUG.println(\"SpNegoContext.acceptSecContext: \" +\n@@ -551,2 +552,2 @@\n-                    if (DEBUG && !mech_wanted.equals(mechList[0])) {\n-                        System.out.println(\"SpNegoContext.acceptSecContext: \" +\n+                    if (DEBUG != null && !mech_wanted.equals(mechList[0])) {\n+                        DEBUG.println(\"SpNegoContext.acceptSecContext: \" +\n@@ -580,2 +581,2 @@\n-                        if (DEBUG) {\n-                            System.out.println(\"SPNEGO Negotiated Mechanism = \"\n+                        if (DEBUG != null) {\n+                            DEBUG.println(\"SPNEGO Negotiated Mechanism = \"\n@@ -594,2 +595,2 @@\n-                if (DEBUG) {\n-                    System.out.println(\"SpNegoContext.acceptSecContext: \" +\n+                if (DEBUG != null) {\n+                    DEBUG.println(\"SpNegoContext.acceptSecContext: \" +\n@@ -597,1 +598,1 @@\n-                    System.out.println(\"SpNegoContext.acceptSecContext: \" +\n+                    DEBUG.println(\"SpNegoContext.acceptSecContext: \" +\n@@ -604,2 +605,2 @@\n-                if (DEBUG) {\n-                    System.out.println(\"SpNegoContext.acceptSecContext: \" +\n+                if (DEBUG != null) {\n+                    DEBUG.println(\"SpNegoContext.acceptSecContext: \" +\n@@ -616,2 +617,2 @@\n-                if (DEBUG) {\n-                    System.out.println(\"SpNegoContext.acceptSecContext: \" +\n+                if (DEBUG != null) {\n+                    DEBUG.println(\"SpNegoContext.acceptSecContext: \" +\n@@ -626,2 +627,2 @@\n-                if (DEBUG) {\n-                    System.out.println(\"SpNegoContext.acceptSecContext: \" +\n+                if (DEBUG != null) {\n+                    DEBUG.println(\"SpNegoContext.acceptSecContext: \" +\n@@ -656,2 +657,2 @@\n-                if (DEBUG) {\n-                    System.out.println(\"SpNegoContext.acceptSecContext: \" +\n+                if (DEBUG != null) {\n+                    DEBUG.println(\"SpNegoContext.acceptSecContext: \" +\n@@ -666,2 +667,2 @@\n-                if (DEBUG) {\n-                    System.out.println(\"AcceptSecContext: state = \" + state);\n+                if (DEBUG != null) {\n+                    DEBUG.println(\"AcceptSecContext: state = \" + state);\n@@ -670,2 +671,2 @@\n-            if (DEBUG) {\n-                    System.out.println(\"SpNegoContext.acceptSecContext: \" +\n+            if (DEBUG != null) {\n+                    DEBUG.println(\"SpNegoContext.acceptSecContext: \" +\n@@ -771,2 +772,2 @@\n-            if (DEBUG) {\n-                System.out.println(\"SpNegoContext: no MIC token included\");\n+            if (DEBUG != null) {\n+                DEBUG.println(\"SpNegoContext: no MIC token included\");\n@@ -779,2 +780,2 @@\n-            if (DEBUG) {\n-                System.out.println(\"SpNegoContext: no MIC token included\" +\n+            if (DEBUG != null) {\n+                DEBUG.println(\"SpNegoContext: no MIC token included\" +\n@@ -791,2 +792,2 @@\n-            if (DEBUG) {\n-                System.out.println(\"SpNegoContext: getMIC = \" +\n+            if (DEBUG != null) {\n+                DEBUG.println(\"SpNegoContext: getMIC = \" +\n@@ -797,2 +798,2 @@\n-            if (DEBUG) {\n-                System.out.println(\"SpNegoContext: no MIC token included\" +\n+            if (DEBUG != null) {\n+                DEBUG.println(\"SpNegoContext: no MIC token included\" +\n@@ -813,2 +814,2 @@\n-            if (DEBUG) {\n-                System.out.println(\"SpNegoContext: no MIC token validation\");\n+            if (DEBUG != null) {\n+                DEBUG.println(\"SpNegoContext: no MIC token validation\");\n@@ -821,2 +822,2 @@\n-            if (DEBUG) {\n-                System.out.println(\"SpNegoContext: no MIC token validation\" +\n+            if (DEBUG != null) {\n+                DEBUG.println(\"SpNegoContext: no MIC token validation\" +\n@@ -837,2 +838,2 @@\n-            if (DEBUG) {\n-                System.out.println(\"SpNegoContext: MIC validation failed! \" +\n+            if (DEBUG != null) {\n+                DEBUG.println(\"SpNegoContext: MIC validation failed! \" +\n@@ -924,2 +925,2 @@\n-                    if (DEBUG) {\n-                        System.out.println(\"SpNegoContext: \" +\n+                    if (DEBUG != null) {\n+                        DEBUG.println(\"SpNegoContext: \" +\n@@ -943,2 +944,2 @@\n-            if (DEBUG) {\n-                System.out.println(\"The underlying mechanism context has \" +\n+            if (DEBUG != null) {\n+                DEBUG.println(\"The underlying mechanism context has \" +\n@@ -1056,2 +1057,2 @@\n-            if (DEBUG) {\n-                System.out.println(\"The underlying mechanism context has \" +\n+            if (DEBUG != null) {\n+                DEBUG.println(\"The underlying mechanism context has \" +\n@@ -1072,2 +1073,2 @@\n-            if (DEBUG) {\n-                System.out.println(\"The underlying mechanism context has \" +\n+            if (DEBUG != null) {\n+                DEBUG.println(\"The underlying mechanism context has \" +\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/jgss\/spnego\/SpNegoContext.java","additions":67,"deletions":66,"binary":false,"changes":133,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -62,3 +62,0 @@\n-    \/\/ property\n-    static final boolean DEBUG = SpNegoContext.DEBUG;\n-\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/jgss\/spnego\/SpNegoToken.java","additions":1,"deletions":4,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -68,1 +68,1 @@\n-        System.out.println(NAME + \": \" + message);\n+        System.err.println(NAME + \": \" + message);\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/jgss\/wrapper\/SunNativeProvider.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -76,2 +76,0 @@\n-    private static boolean DEBUG = Krb5.DEBUG;\n-\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/krb5\/Checksum.java","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -54,0 +54,2 @@\n+import static sun.security.krb5.internal.Krb5.DEBUG;\n+\n@@ -106,2 +108,0 @@\n-    private static boolean DEBUG = sun.security.krb5.internal.Krb5.DEBUG;\n-\n@@ -216,2 +216,2 @@\n-                if (DEBUG) {\n-                    System.out.println(\"Loaded from Java config\");\n+                if (DEBUG != null) {\n+                    DEBUG.println(\"Loaded from Java config\");\n@@ -224,2 +224,2 @@\n-                        if (DEBUG) {\n-                            System.out.println(\"Loaded from SCDynamicStoreConfig\");\n+                        if (DEBUG != null) {\n+                            DEBUG.println(\"Loaded from SCDynamicStoreConfig\");\n@@ -236,2 +236,2 @@\n-                    if (DEBUG) {\n-                        System.out.println(\"Loaded from native config\");\n+                    if (DEBUG != null) {\n+                        DEBUG.println(\"Loaded from native config\");\n@@ -242,3 +242,3 @@\n-            if (DEBUG) {\n-                System.out.println(\"Exception thrown in loading config:\");\n-                ioe.printStackTrace(System.out);\n+            if (DEBUG != null) {\n+                DEBUG.println(\"Exception thrown in loading config:\");\n+                ioe.printStackTrace(DEBUG.getPrintStream());\n@@ -443,2 +443,2 @@\n-                if (DEBUG) {\n-                    System.out.println(\"Exception in getting value of \" +\n+                if (DEBUG != null) {\n+                    DEBUG.println(\"Exception in getting value of \" +\n@@ -447,1 +447,1 @@\n-                    System.out.println(\"Setting \" + Arrays.toString(keys) +\n+                    DEBUG.println(\"Setting \" + Arrays.toString(keys) +\n@@ -587,2 +587,2 @@\n-        if (DEBUG) {\n-            System.out.println(\"Loading krb5 profile at \" + file);\n+        if (DEBUG != null) {\n+            DEBUG.println(\"Loading krb5 profile at \" + file);\n@@ -631,2 +631,2 @@\n-                    if (DEBUG) {\n-                        System.out.println(\"Unknown directive: \" + line);\n+                    if (DEBUG != null) {\n+                        DEBUG.println(\"Unknown directive: \" + line);\n@@ -673,2 +673,2 @@\n-        if (DEBUG) {\n-            System.out.println(\"Loading config file from \" + fileName);\n+        if (DEBUG != null) {\n+            DEBUG.println(\"Loading config file from \" + fileName);\n@@ -786,2 +786,2 @@\n-            if (DEBUG) {\n-                System.out.println(line);\n+            if (DEBUG != null) {\n+                DEBUG.println(line);\n@@ -875,2 +875,2 @@\n-        if (DEBUG) {\n-            System.out.println(\"Java config name: \" + name);\n+        if (DEBUG != null) {\n+            DEBUG.println(\"Java config name: \" + name);\n@@ -938,2 +938,2 @@\n-        if (DEBUG) {\n-            System.out.println(\"Native config name: \" + name);\n+        if (DEBUG != null) {\n+            DEBUG.println(\"Native config name: \" + name);\n@@ -987,2 +987,2 @@\n-            if (DEBUG) {\n-                System.out.println(\"Getting permitted_enctypes from libdefaults\");\n+            if (DEBUG != null) {\n+                DEBUG.println(\"Getting permitted_enctypes from libdefaults\");\n@@ -994,2 +994,2 @@\n-            if (DEBUG) {\n-                System.out.println(\"default_enctypes were null, using builtin default etypes for configuration \" +\n+            if (DEBUG != null) {\n+                DEBUG.println(\"default_enctypes were null, using builtin default etypes for configuration \" +\n@@ -1000,2 +1000,2 @@\n-            if (DEBUG) {\n-                System.out.println(\"default_enctypes:\" + default_enctypes);\n+            if (DEBUG != null) {\n+                DEBUG.println(\"default_enctypes:\" + default_enctypes);\n@@ -1035,2 +1035,2 @@\n-        if (DEBUG) {\n-            System.out.print(\"default etypes for \" + configName + \":\");\n+        if (DEBUG != null) {\n+            String s = \"default etypes for \" + configName + \":\";\n@@ -1038,1 +1038,1 @@\n-                System.out.print(\" \" + etype[i]);\n+                s += \" \" + etype[i];\n@@ -1040,1 +1040,2 @@\n-            System.out.println(\".\");\n+            s += \".\";\n+            DEBUG.println(s);\n@@ -1138,2 +1139,2 @@\n-        if (DEBUG) {\n-            System.out.println(\">>> Config try resetting default kdc \" + realm);\n+        if (DEBUG != null) {\n+            DEBUG.println(\">>> Config try resetting default kdc \" + realm);\n@@ -1322,2 +1323,2 @@\n-        if (DEBUG) {\n-            System.out.println(\"getRealmFromDNS: trying \" + mapRealm);\n+        if (DEBUG != null) {\n+            DEBUG.println(\"getRealmFromDNS: trying \" + mapRealm);\n@@ -1354,2 +1355,2 @@\n-        if (DEBUG) {\n-            System.out.println(\"getKDCFromDNS using UDP\");\n+        if (DEBUG != null) {\n+            DEBUG.println(\"getKDCFromDNS using UDP\");\n@@ -1360,2 +1361,2 @@\n-            if (DEBUG) {\n-                System.out.println(\"getKDCFromDNS using TCP\");\n+            if (DEBUG != null) {\n+                DEBUG.println(\"getKDCFromDNS using TCP\");\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/krb5\/Config.java","additions":46,"deletions":45,"binary":false,"changes":91,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -44,0 +44,2 @@\n+import static sun.security.krb5.internal.Krb5.DEBUG;\n+\n@@ -64,1 +66,0 @@\n-    private static boolean DEBUG = Krb5.DEBUG;\n@@ -243,2 +244,2 @@\n-            if (DEBUG) {\n-                System.out.println(e);\n+            if (DEBUG != null) {\n+                e.printStackTrace(DEBUG.getPrintStream());\n@@ -333,2 +334,2 @@\n-                    if (DEBUG) {\n-                        System.out.println(\">>> Found no TGT's in native ccache\");\n+                    if (DEBUG != null) {\n+                        DEBUG.println(\">>> Found no TGT's in native ccache\");\n@@ -340,2 +341,2 @@\n-                        if (DEBUG) {\n-                            System.out.println(\">>> Obtained TGT from native ccache: \"\n+                        if (DEBUG != null) {\n+                            DEBUG.println(\">>> Obtained TGT from native ccache: \"\n@@ -346,2 +347,2 @@\n-                        if (DEBUG) {\n-                            System.out.println(\">>> native ccache contains TGT for \"\n+                        if (DEBUG != null) {\n+                            DEBUG.println(\">>> native ccache contains TGT for \"\n@@ -355,2 +356,2 @@\n-                    if (DEBUG) {\n-                        System.out.println(\">>> Obtained TGT from native ccache: \"\n+                    if (DEBUG != null) {\n+                        DEBUG.println(\">>> Obtained TGT from native ccache: \"\n@@ -384,2 +385,2 @@\n-            if (DEBUG) {\n-                System.out.println(\n+            if (DEBUG != null) {\n+                DEBUG.println(\n@@ -423,2 +424,2 @@\n-                if (DEBUG) {\n-                    System.out.println(\">>> KrbCreds found the default ticket\"\n+                if (DEBUG != null) {\n+                    DEBUG.println(\">>> KrbCreds found the default ticket\"\n@@ -430,2 +431,2 @@\n-                    if (DEBUG) {\n-                        System.out.println(\n+                    if (DEBUG != null) {\n+                        DEBUG.println(\n@@ -447,2 +448,2 @@\n-                    if (DEBUG) {\n-                        System.out.println(\"Can not load native ccache library\");\n+                    if (DEBUG != null) {\n+                        DEBUG.println(\"Can not load native ccache library\");\n@@ -456,2 +457,2 @@\n-                if (DEBUG) {\n-                    System.out.println(\">> Acquire default native Credentials\");\n+                if (DEBUG != null) {\n+                    DEBUG.println(\">> Acquire default native Credentials\");\n@@ -510,2 +511,2 @@\n-        System.out.println(\">>> DEBUG: ----Credentials----\");\n-        System.out.println(\"\\tclient: \" + c.client.toString());\n+        DEBUG.println(\">>> DEBUG: ----Credentials----\");\n+        DEBUG.println(\"\\tclient: \" + c.client.toString());\n@@ -513,2 +514,2 @@\n-            System.out.println(\"\\tclient alias: \" + c.clientAlias.toString());\n-        System.out.println(\"\\tserver: \" + c.server.toString());\n+            DEBUG.println(\"\\tclient alias: \" + c.clientAlias.toString());\n+        DEBUG.println(\"\\tserver: \" + c.server.toString());\n@@ -516,2 +517,2 @@\n-            System.out.println(\"\\tserver alias: \" + c.serverAlias.toString());\n-        System.out.println(\"\\tticket: sname: \" + c.ticket.sname.toString());\n+            DEBUG.println(\"\\tserver alias: \" + c.serverAlias.toString());\n+        DEBUG.println(\"\\tticket: sname: \" + c.ticket.sname.toString());\n@@ -519,1 +520,1 @@\n-            System.out.println(\"\\tstartTime: \" + c.startTime.getTime());\n+            DEBUG.println(\"\\tstartTime: \" + c.startTime.getTime());\n@@ -521,2 +522,2 @@\n-        System.out.println(\"\\tendTime: \" + c.endTime.getTime());\n-        System.out.println(\"        ----Credentials end----\");\n+        DEBUG.println(\"\\tendTime: \" + c.endTime.getTime());\n+        DEBUG.println(\"        ----Credentials end----\");\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/krb5\/Credentials.java","additions":32,"deletions":31,"binary":false,"changes":63,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -45,0 +45,2 @@\n+import static sun.security.krb5.internal.Krb5.DEBUG;\n+\n@@ -77,2 +79,0 @@\n-    private static final boolean DEBUG = Krb5.DEBUG;\n-\n@@ -189,2 +189,2 @@\n-                if (DEBUG) {\n-                    System.out.println(\"Encryption Type \" +\n+                if (DEBUG != null) {\n+                    DEBUG.println(\"Encryption Type \" +\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/krb5\/EncryptionKey.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -52,0 +52,2 @@\n+import static sun.security.krb5.internal.Krb5.DEBUG;\n+\n@@ -75,2 +77,0 @@\n-    private static final boolean DEBUG = Krb5.DEBUG;\n-\n@@ -121,2 +121,2 @@\n-                        if (DEBUG) {\n-                            System.out.println(\"Invalid krb5.kdc.bad.policy\" +\n+                        if (DEBUG != null) {\n+                            DEBUG.println(\"Invalid krb5.kdc.bad.policy\" +\n@@ -154,2 +154,2 @@\n-           if (DEBUG) {\n-                System.out.println (\"Exception in getting KDC communication \" +\n+           if (DEBUG != null) {\n+                DEBUG.println (\"Exception in getting KDC communication \" +\n@@ -279,2 +279,2 @@\n-            if (DEBUG) {\n-                System.out.println(\">>> KrbKdcReq send: error trying \" +\n+            if (DEBUG != null) {\n+                DEBUG.println(\">>> KrbKdcReq send: error trying \" +\n@@ -282,1 +282,1 @@\n-                e.printStackTrace(System.out);\n+                e.printStackTrace(DEBUG.getPrintStream());\n@@ -348,2 +348,2 @@\n-        if (DEBUG) {\n-            System.out.println(\">>> KrbKdcReq send: kdc=\" + kdc\n+        if (DEBUG != null) {\n+            DEBUG.println(\">>> KrbKdcReq send: kdc=\" + kdc\n@@ -363,2 +363,2 @@\n-            if (DEBUG) {\n-                System.out.println(\">>> KrbKdcReq send: #bytes read=\"\n+            if (DEBUG != null) {\n+                DEBUG.println(\">>> KrbKdcReq send: #bytes read=\"\n@@ -407,2 +407,2 @@\n-                if (DEBUG) {\n-                    System.out.println(\">>> KDCCommunication: kdc=\" + kdc\n+                if (DEBUG != null) {\n+                    DEBUG.println(\">>> KDCCommunication: kdc=\" + kdc\n@@ -421,2 +421,2 @@\n-                    if (DEBUG) {\n-                        System.out.println (\"SocketTimeOutException with \" +\n+                    if (DEBUG != null) {\n+                        DEBUG.println (\"SocketTimeOutException with \" +\n@@ -521,2 +521,2 @@\n-            if (DEBUG) {\n-                System.out.println(\">>> KdcAccessibility: add \" + kdc);\n+            if (DEBUG != null) {\n+                DEBUG.println(\">>> KdcAccessibility: add \" + kdc);\n@@ -528,2 +528,2 @@\n-            if (DEBUG) {\n-                System.out.println(\">>> KdcAccessibility: remove \" + kdc);\n+            if (DEBUG != null) {\n+                DEBUG.println(\">>> KdcAccessibility: remove \" + kdc);\n@@ -539,2 +539,2 @@\n-            if (DEBUG) {\n-                System.out.println(\">>> KdcAccessibility: reset\");\n+            if (DEBUG != null) {\n+                DEBUG.println(\">>> KdcAccessibility: reset\");\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/krb5\/KdcComm.java","additions":24,"deletions":24,"binary":false,"changes":48,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -45,0 +45,2 @@\n+import static sun.security.krb5.internal.Krb5.DEBUG;\n+\n@@ -60,1 +62,0 @@\n-    private static boolean DEBUG = Krb5.DEBUG;\n@@ -112,2 +113,2 @@\n-        if (DEBUG)\n-            System.out.println(\">>> KrbApReq: APOptions are \" + apOptions);\n+        if (DEBUG != null)\n+            DEBUG.println(\">>> KrbApReq: APOptions are \" + apOptions);\n@@ -332,2 +333,2 @@\n-                if (DEBUG) {\n-                    System.out.println(\">>> KrbApReq: initiator is \"\n+                if (DEBUG != null) {\n+                    DEBUG.println(\">>> KrbApReq: initiator is \"\n@@ -377,2 +378,2 @@\n-        if (DEBUG) {\n-            System.out.println(\">>> KrbApReq: authenticate succeed.\");\n+        if (DEBUG != null) {\n+            DEBUG.println(\">>> KrbApReq: authenticate succeed.\");\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/krb5\/KrbApReq.java","additions":9,"deletions":8,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -43,0 +43,2 @@\n+import static sun.security.krb5.internal.Krb5.DEBUG;\n+\n@@ -54,2 +56,0 @@\n-    private boolean DEBUG = Krb5.DEBUG;\n-\n@@ -78,2 +78,2 @@\n-                if (DEBUG) {\n-                    System.out.println(\"KRBError received: \" + eText);\n+                if (DEBUG != null) {\n+                    DEBUG.println(\"KRBError received: \" + eText);\n@@ -178,2 +178,2 @@\n-        if (DEBUG) {\n-            System.out.println(\">>> KrbAsRep cons in KrbAsReq.getReply \" +\n+        if (DEBUG != null) {\n+            DEBUG.println(\">>> KrbAsRep cons in KrbAsReq.getReply \" +\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/krb5\/KrbAsRep.java","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -41,0 +41,2 @@\n+import static sun.security.krb5.internal.Krb5.DEBUG;\n+\n@@ -48,2 +50,0 @@\n-    private boolean DEBUG = Krb5.DEBUG;\n-\n@@ -113,2 +113,2 @@\n-        if (DEBUG) {\n-            System.out.println(\">>> KrbAsReq creating message\");\n+        if (DEBUG != null) {\n+            DEBUG.println(\">>> KrbAsReq creating message\");\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/krb5\/KrbAsReq.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2010, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -40,0 +40,2 @@\n+import static sun.security.krb5.internal.Krb5.DEBUG;\n+\n@@ -351,2 +353,2 @@\n-                    if (Krb5.DEBUG) {\n-                        System.out.println(\"KrbAsReqBuilder: \" +\n+                    if (DEBUG != null) {\n+                        DEBUG.println(\"KrbAsReqBuilder: \" +\n@@ -406,2 +408,2 @@\n-                if (Krb5.DEBUG) {\n-                    System.out.println(\"Exception in getting canonicalize,\" +\n+                if (DEBUG != null) {\n+                    DEBUG.println(\"Exception in getting canonicalize,\" +\n@@ -453,2 +455,2 @@\n-                    if (Krb5.DEBUG) {\n-                        System.out.println(\"KrbAsReqBuilder: AS-REQ failed.\" +\n+                    if (DEBUG != null) {\n+                        DEBUG.println(\"KrbAsReqBuilder: AS-REQ failed.\" +\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/krb5\/KrbAsReqBuilder.java","additions":9,"deletions":7,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -40,0 +40,2 @@\n+import static sun.security.krb5.internal.Krb5.DEBUG;\n+\n@@ -49,2 +51,0 @@\n-    private static boolean DEBUG = Krb5.DEBUG;\n-\n@@ -147,2 +147,2 @@\n-        if (DEBUG) {\n-            System.out.println(\">>>Delegated Creds have pname=\" + pname\n+        if (DEBUG != null) {\n+            DEBUG.println(\">>>Delegated Creds have pname=\" + pname\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/krb5\/KrbCred.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -37,0 +37,2 @@\n+import static sun.security.krb5.internal.Krb5.DEBUG;\n+\n@@ -89,2 +91,2 @@\n-                if (Krb5.DEBUG) {\n-                    System.out.println(\"> KrbKdcRep.check: at #\" + i\n+                if (DEBUG == null) {\n+                    DEBUG.println(\"> KrbKdcRep.check: at #\" + i\n@@ -174,2 +176,2 @@\n-                            if (Krb5.DEBUG) {\n-                                e.printStackTrace();\n+                            if (DEBUG != null) {\n+                                e.printStackTrace(DEBUG.getPrintStream());\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/krb5\/KrbKdcRep.java","additions":6,"deletions":4,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -36,0 +36,1 @@\n+import static sun.security.krb5.internal.Krb5.DEBUG;\n@@ -45,1 +46,0 @@\n-    private static boolean DEBUG = sun.security.krb5.internal.Krb5.DEBUG;\n@@ -75,1 +75,1 @@\n-        if (DEBUG) System.out.println(\"Raw map from JNI: \" + list);\n+        if (DEBUG != null) DEBUG.println(\"Raw map from JNI: \" + list);\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/krb5\/SCDynamicStoreConfig.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -40,0 +40,2 @@\n+import static sun.security.krb5.internal.Krb5.DEBUG;\n+\n@@ -47,2 +49,0 @@\n-    private static boolean DEBUG = sun.security.krb5.internal.Krb5.DEBUG;\n-\n@@ -196,2 +196,2 @@\n-            if (DEBUG) {\n-                System.out.println(\n+            if (DEBUG != null) {\n+                DEBUG.println(\n@@ -209,2 +209,2 @@\n-                if (DEBUG) {\n-                    System.out.println(\">>> Credentials acquireServiceCreds: \"\n+                if (DEBUG != null) {\n+                    DEBUG.println(\">>> Credentials acquireServiceCreds: \"\n@@ -220,2 +220,2 @@\n-                    if (DEBUG) {\n-                        System.out.println(\n+                    if (DEBUG != null) {\n+                        DEBUG.println(\n@@ -235,2 +235,2 @@\n-                if (DEBUG) {\n-                    System.out.println(\">>> Credentials acquireServiceCreds: \"\n+                if (DEBUG != null) {\n+                    DEBUG.println(\">>> Credentials acquireServiceCreds: \"\n@@ -248,2 +248,2 @@\n-                if (DEBUG) {\n-                    System.out.println(\">>> Credentials acquireServiceCreds: \" +\n+                if (DEBUG != null) {\n+                    DEBUG.println(\">>> Credentials acquireServiceCreds: \" +\n@@ -256,2 +256,2 @@\n-            if (DEBUG) {\n-                System.out.println(\">>> Credentials acquireServiceCreds: \"\n+            if (DEBUG != null) {\n+                DEBUG.println(\">>> Credentials acquireServiceCreds: \"\n@@ -286,2 +286,2 @@\n-                if (DEBUG) {\n-                    System.out.println(\">>> Credentials acquireServiceCreds: \"\n+                if (DEBUG != null) {\n+                    DEBUG.println(\">>> Credentials acquireServiceCreds: \"\n@@ -456,2 +456,2 @@\n-            if (DEBUG) {\n-                System.out.println(\">>> serviceCredsSingle:\" +\n+            if (DEBUG != null) {\n+                DEBUG.println(\">>> serviceCredsSingle:\" +\n@@ -459,1 +459,1 @@\n-                System.out.println(\">>> serviceCredsSingle:\" +\n+                DEBUG.println(\">>> serviceCredsSingle:\" +\n@@ -468,2 +468,2 @@\n-            if (DEBUG) {\n-                System.out.println(\">>> Cross-realm TGT Credentials\" +\n+            if (DEBUG != null) {\n+                DEBUG.println(\">>> Cross-realm TGT Credentials\" +\n@@ -478,2 +478,2 @@\n-        } else if (DEBUG) {\n-            System.out.println(\">>> Credentials serviceCredsSingle:\" +\n+        } else if (DEBUG != null) {\n+            DEBUG.println(\">>> Credentials serviceCredsSingle:\" +\n@@ -486,2 +486,2 @@\n-            if (DEBUG) {\n-                System.out.println(\">>> TGS credentials serviceCredsSingle:\");\n+            if (DEBUG != null) {\n+                DEBUG.println(\">>> TGS credentials serviceCredsSingle:\");\n@@ -505,2 +505,2 @@\n-        if (DEBUG) {\n-            System.out.println(\">>> Handling S4U2Self referral\");\n+        if (DEBUG != null) {\n+            DEBUG.println(\">>> Handling S4U2Self referral\");\n@@ -542,2 +542,2 @@\n-        if (DEBUG) {\n-            System.out.println(\">>> Handling S4U2Proxy referral\");\n+        if (DEBUG != null) {\n+            DEBUG.println(\">>> Handling S4U2Proxy referral\");\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/krb5\/internal\/CredentialsUtil.java","additions":30,"deletions":30,"binary":false,"changes":60,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,1 +34,0 @@\n-import sun.security.krb5.Config;\n@@ -44,0 +43,1 @@\n+import static sun.security.krb5.internal.Krb5.DEBUG;\n@@ -66,1 +66,0 @@\n-    private static final boolean DEBUG = sun.security.krb5.internal.Krb5.DEBUG;\n@@ -194,1 +193,1 @@\n-        if (DEBUG) {\n+        if (DEBUG != null) {\n@@ -197,1 +196,1 @@\n-                System.out.println(\"Host address is \" +\n+                DEBUG.println(\"Host address is \" +\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/krb5\/internal\/HostAddress.java","additions":4,"deletions":5,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -45,0 +45,2 @@\n+import static sun.security.krb5.internal.Krb5.DEBUG;\n+\n@@ -67,1 +69,0 @@\n-    private static boolean DEBUG = sun.security.krb5.internal.Krb5.DEBUG;\n@@ -279,2 +280,2 @@\n-            if (DEBUG) {\n-                System.out.println(\">>> KrbKdcReq local addresses are:\");\n+            if (DEBUG != null) {\n+                DEBUG.println(\">>> KrbKdcReq local addresses are:\");\n@@ -287,2 +288,2 @@\n-                    if (DEBUG) {\n-                        System.out.println(\"   extra_addresses: \"\n+                    if (DEBUG != null) {\n+                        DEBUG.println(\"   extra_addresses: \"\n@@ -295,3 +296,3 @@\n-                if (DEBUG) {\n-                    System.out.println(\"   NetworkInterface \" + ni + \":\");\n-                    System.out.println(\"      \"\n+                if (DEBUG != null) {\n+                    DEBUG.println(\"   NetworkInterface \" + ni + \":\");\n+                    DEBUG.println(\"      \"\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/krb5\/internal\/HostAddresses.java","additions":10,"deletions":9,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -40,0 +40,2 @@\n+import static sun.security.krb5.internal.Krb5.DEBUG;\n+\n@@ -173,2 +175,0 @@\n-    private boolean DEBUG = Krb5.DEBUG;\n-\n@@ -324,2 +324,2 @@\n-            if (DEBUG) {\n-                System.out.println(\"Exception in getting default values for \" +\n+            if (DEBUG != null) {\n+                DEBUG.println(\"Exception in getting default values for \" +\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/krb5\/internal\/KDCOptions.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -38,0 +38,2 @@\n+import static sun.security.krb5.internal.Krb5.DEBUG;\n+\n@@ -71,1 +73,0 @@\n-    private boolean DEBUG = Krb5.DEBUG;\n@@ -134,2 +135,2 @@\n-            if (DEBUG) {\n-                System.out.println(\">>> KDCRep: init() \" +\n+            if (DEBUG != null) {\n+                DEBUG.println(\">>> KDCRep: init() \" +\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/krb5\/internal\/KDCRep.java","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -50,0 +50,2 @@\n+\n+import static sun.security.krb5.internal.Krb5.DEBUG;\n@@ -106,2 +108,0 @@\n-    private static boolean DEBUG = Krb5.DEBUG;\n-\n@@ -235,2 +235,2 @@\n-                if (DEBUG) {\n-                    System.out.println(\"Unable to parse eData field of KRB-ERROR:\\n\" +\n+                if (DEBUG != null) {\n+                    DEBUG.println(\"Unable to parse eData field of KRB-ERROR:\\n\" +\n@@ -243,2 +243,2 @@\n-            if (DEBUG) {\n-                System.out.println(\"Unknown eData field of KRB-ERROR:\\n\" +\n+            if (DEBUG != null) {\n+                DEBUG.println(\"Unknown eData field of KRB-ERROR:\\n\" +\n@@ -263,2 +263,2 @@\n-            if (DEBUG) {\n-                System.out.println(pa_data);\n+            if (DEBUG != null) {\n+                DEBUG.println(pa_data.toString());\n@@ -392,2 +392,2 @@\n-        if (DEBUG) {\n-            System.out.println(\">>>KRBError:\");\n+        if (DEBUG != null) {\n+            DEBUG.println(\">>>KRBError:\");\n@@ -395,1 +395,1 @@\n-                System.out.println(\"\\t cTime is \" + cTime.toDate().toString() + \" \" + cTime.toDate().getTime());\n+                DEBUG.println(\"\\t cTime is \" + cTime.toDate().toString() + \" \" + cTime.toDate().getTime());\n@@ -397,1 +397,1 @@\n-                System.out.println(\"\\t cuSec is \" + cuSec.intValue());\n+                DEBUG.println(\"\\t cuSec is \" + cuSec.intValue());\n@@ -400,1 +400,1 @@\n-            System.out.println(\"\\t sTime is \" + sTime.toDate().toString\n+            DEBUG.println(\"\\t sTime is \" + sTime.toDate().toString\n@@ -402,3 +402,3 @@\n-            System.out.println(\"\\t suSec is \" + suSec);\n-            System.out.println(\"\\t error code is \" + errorCode);\n-            System.out.println(\"\\t error Message is \" + Krb5.getErrorMessage(errorCode));\n+            DEBUG.println(\"\\t suSec is \" + suSec);\n+            DEBUG.println(\"\\t error code is \" + errorCode);\n+            DEBUG.println(\"\\t error Message is \" + Krb5.getErrorMessage(errorCode));\n@@ -406,1 +406,1 @@\n-                System.out.println(\"\\t crealm is \" + crealm.toString());\n+                DEBUG.println(\"\\t crealm is \" + crealm.toString());\n@@ -409,1 +409,1 @@\n-                System.out.println(\"\\t cname is \" + cname.toString());\n+                DEBUG.println(\"\\t cname is \" + cname.toString());\n@@ -412,1 +412,1 @@\n-                System.out.println(\"\\t sname is \" + sname.toString());\n+                DEBUG.println(\"\\t sname is \" + sname.toString());\n@@ -415,1 +415,1 @@\n-                System.out.println(\"\\t eData provided.\");\n+                DEBUG.println(\"\\t eData provided.\");\n@@ -418,1 +418,1 @@\n-                System.out.println(\"\\t checksum provided.\");\n+                DEBUG.println(\"\\t checksum provided.\");\n@@ -420,1 +420,1 @@\n-            System.out.println(\"\\t msgType is \" + msgType);\n+            DEBUG.println(\"\\t msgType is \" + msgType);\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/krb5\/internal\/KRBError.java","additions":23,"deletions":23,"binary":false,"changes":46,"status":"modified"},{"patch":"@@ -46,0 +46,2 @@\n+import static sun.security.krb5.internal.Krb5.DEBUG;\n+\n@@ -75,2 +77,0 @@\n-    private static boolean DEBUG = Krb5.DEBUG;\n-\n@@ -147,2 +147,2 @@\n-            if (DEBUG) {\n-                System.out.println(\"System time adjusted\");\n+            if (DEBUG != null) {\n+                DEBUG.println(\"System time adjusted\");\n@@ -300,2 +300,2 @@\n-            if (DEBUG) {\n-                System.out.println(\"Exception in getting clockskew from \" +\n+            if (DEBUG != null) {\n+                DEBUG.println(\"Exception in getting clockskew from \" +\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/krb5\/internal\/KerberosTime.java","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,1 +34,2 @@\n-import sun.security.action.GetBooleanAction;\n+import sun.security.action.GetPropertyAction;\n+import sun.security.util.Debug;\n@@ -318,2 +319,2 @@\n-    public static final boolean DEBUG = GetBooleanAction\n-            .privilegedGetProperty(\"sun.security.krb5.debug\");\n+    public static final Debug DEBUG = Debug.of(\"krb5\", GetPropertyAction\n+            .privilegedGetProperty(\"sun.security.krb5.debug\"));\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/krb5\/internal\/Krb5.java","additions":5,"deletions":4,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -38,0 +38,2 @@\n+import static sun.security.krb5.internal.Krb5.DEBUG;\n+\n@@ -84,2 +86,2 @@\n-            if (Krb5.DEBUG) {\n-                System.out.println(\n+            if (DEBUG != null) {\n+                DEBUG.println(\n@@ -92,2 +94,2 @@\n-        if (Krb5.DEBUG) {\n-            System.out.println(\n+        if (DEBUG != null) {\n+            DEBUG.println(\n@@ -97,2 +99,2 @@\n-            if (Krb5.DEBUG) {\n-                System.out.println(\n+            if (DEBUG != null) {\n+                DEBUG.println(\n@@ -107,2 +109,2 @@\n-            if (Krb5.DEBUG) {\n-                System.out.println(\n+            if (DEBUG != null) {\n+                DEBUG.println(\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/krb5\/internal\/NetClient.java","additions":11,"deletions":9,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -45,0 +45,2 @@\n+import static sun.security.krb5.internal.Krb5.DEBUG;\n+\n@@ -70,2 +72,0 @@\n-    private static final boolean DEBUG = Krb5.DEBUG;\n-\n@@ -215,2 +215,2 @@\n-                    if (DEBUG) {\n-                        System.out.println(\"Incorrect address format.\");\n+                    if (DEBUG != null) {\n+                        DEBUG.println(\"Incorrect address format.\");\n@@ -283,1 +283,1 @@\n-        if (DEBUG) {\n+        if (DEBUG != null) {\n@@ -319,1 +319,1 @@\n-            System.out.println(msg);\n+            DEBUG.println(msg);\n@@ -339,2 +339,2 @@\n-        if (DEBUG) {\n-            System.out.println(\">>>DEBUG <CCacheInputStream>  client principal is \" + cpname);\n+        if (DEBUG != null) {\n+            DEBUG.println(\">>>DEBUG <CCacheInputStream>  client principal is \" + cpname);\n@@ -348,2 +348,2 @@\n-        if (DEBUG) {\n-            System.out.println(\">>>DEBUG <CCacheInputStream> server principal is \" + spname);\n+        if (DEBUG != null) {\n+            DEBUG.println(\">>>DEBUG <CCacheInputStream> server principal is \" + spname);\n@@ -352,2 +352,2 @@\n-        if (DEBUG) {\n-            System.out.println(\">>>DEBUG <CCacheInputStream> key type: \" + key.getEType());\n+        if (DEBUG != null) {\n+            DEBUG.println(\">>>DEBUG <CCacheInputStream> key type: \" + key.getEType());\n@@ -363,3 +363,3 @@\n-        if (DEBUG) {\n-            System.out.println(\">>>DEBUG <CCacheInputStream> auth time: \" + authtime.toDate().toString());\n-            System.out.println(\">>>DEBUG <CCacheInputStream> start time: \" +\n+        if (DEBUG != null) {\n+            DEBUG.println(\">>>DEBUG <CCacheInputStream> auth time: \" + authtime.toDate().toString());\n+            DEBUG.println(\">>>DEBUG <CCacheInputStream> start time: \" +\n@@ -367,2 +367,2 @@\n-            System.out.println(\">>>DEBUG <CCacheInputStream> end time: \" + endtime.toDate().toString());\n-            System.out.println(\">>>DEBUG <CCacheInputStream> renew_till time: \" +\n+            DEBUG.println(\">>>DEBUG <CCacheInputStream> end time: \" + endtime.toDate().toString());\n+            DEBUG.println(\">>>DEBUG <CCacheInputStream> renew_till time: \" +\n@@ -407,2 +407,2 @@\n-            if (DEBUG) {\n-                e.printStackTrace(System.out);\n+            if (DEBUG != null) {\n+                e.printStackTrace(DEBUG.getPrintStream());\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/krb5\/internal\/ccache\/CCacheInputStream.java","additions":20,"deletions":20,"binary":false,"changes":40,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -57,0 +57,1 @@\n+import static sun.security.krb5.internal.Krb5.DEBUG;\n@@ -73,1 +74,0 @@\n-    private static final boolean DEBUG = Krb5.DEBUG;\n@@ -95,2 +95,2 @@\n-            if (DEBUG) {\n-                e.printStackTrace();\n+            if (DEBUG != null) {\n+                e.printStackTrace(DEBUG.getPrintStream());\n@@ -131,2 +131,2 @@\n-            if (DEBUG) {\n-                e.printStackTrace();\n+            if (DEBUG != null) {\n+                e.printStackTrace(DEBUG.getPrintStream());\n@@ -216,2 +216,2 @@\n-                            if (DEBUG) {\n-                                System.out.println(\" >>> FileCredentialsCache \"\n+                            if (DEBUG != null) {\n+                                DEBUG.println(\" >>> FileCredentialsCache \"\n@@ -227,2 +227,2 @@\n-                    if (DEBUG) {\n-                        System.out.println(\" >>> FileCredentialsCache Ticket \"\n+                    if (DEBUG != null) {\n+                        DEBUG.println(\" >>> FileCredentialsCache Ticket \"\n@@ -352,2 +352,2 @@\n-            if (DEBUG) {\n-                System.out.println(\"get normal credential\");\n+            if (DEBUG != null) {\n+                DEBUG.println(\"get normal credential\");\n@@ -366,2 +366,2 @@\n-                if (DEBUG) {\n-                    System.out.println(\"get normal credential\");\n+                if (DEBUG != null) {\n+                    DEBUG.println(\"get normal credential\");\n@@ -385,2 +385,2 @@\n-                if (DEBUG) {\n-                    System.out.println(\"proxy_impersonator does not match service name\");\n+                if (DEBUG != null) {\n+                    DEBUG.println(\"proxy_impersonator does not match service name\");\n@@ -400,2 +400,2 @@\n-                if (DEBUG) {\n-                    System.out.println(\"Cannot find evidence ticket in ccache\");\n+                if (DEBUG != null) {\n+                    DEBUG.println(\"Cannot find evidence ticket in ccache\");\n@@ -405,2 +405,2 @@\n-            if (DEBUG) {\n-                System.out.println(\"Get proxied credential\");\n+            if (DEBUG != null) {\n+                DEBUG.println(\"Get proxied credential\");\n@@ -410,2 +410,2 @@\n-            if (DEBUG) {\n-                System.out.println(\"Impersonation with ccache failed\");\n+            if (DEBUG != null) {\n+                DEBUG.println(\"Impersonation with ccache failed\");\n@@ -463,2 +463,2 @@\n-            if (DEBUG) {\n-                System.out.println(\">>>KinitOptions cache name is \" + name);\n+            if (DEBUG != null) {\n+                DEBUG.println(\">>>KinitOptions cache name is \" + name);\n@@ -485,2 +485,2 @@\n-                if (DEBUG) {\n-                    System.out.println(\">>>KinitOptions cache name is \" +\n+                if (DEBUG != null) {\n+                    DEBUG.println(\">>>KinitOptions cache name is \" +\n@@ -491,2 +491,2 @@\n-                if (DEBUG) {\n-                    System.out.println(\"Error in obtaining uid \" +\n+                if (DEBUG != null) {\n+                    DEBUG.println(\"Error in obtaining uid \" +\n@@ -516,2 +516,2 @@\n-        if (DEBUG) {\n-            System.out.println(\">>>KinitOptions cache name is \" + name);\n+        if (DEBUG != null) {\n+            DEBUG.println(\">>>KinitOptions cache name is \" + name);\n@@ -565,2 +565,2 @@\n-                        if (DEBUG) {\n-                            e.printStackTrace();\n+                        if (DEBUG != null) {\n+                            e.printStackTrace(DEBUG.getPrintStream());\n@@ -595,2 +595,2 @@\n-            if (DEBUG) {\n-                e.printStackTrace();\n+            if (DEBUG != null) {\n+                e.printStackTrace(DEBUG.getPrintStream());\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/krb5\/internal\/ccache\/FileCredentialsCache.java","additions":34,"deletions":34,"binary":false,"changes":68,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -38,1 +38,1 @@\n-public abstract class CksumType {\n+import static sun.security.krb5.internal.Krb5.DEBUG;\n@@ -40,1 +40,1 @@\n-    private static boolean DEBUG = Krb5.DEBUG;\n+public abstract class CksumType {\n@@ -124,2 +124,2 @@\n-        if (DEBUG) {\n-            System.out.println(\">>> CksumType: \" + cksumTypeName);\n+        if (DEBUG != null) {\n+            DEBUG.println(\">>> CksumType: \" + cksumTypeName);\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/krb5\/internal\/crypto\/CksumType.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -45,0 +45,2 @@\n+import static sun.security.krb5.internal.Krb5.DEBUG;\n+\n@@ -50,2 +52,0 @@\n-    private static final boolean DEBUG = Krb5.DEBUG;\n-\n@@ -86,2 +86,2 @@\n-            if (DEBUG) {\n-                System.out.println (\"Exception in getting allow_weak_crypto, \" +\n+            if (DEBUG != null) {\n+                DEBUG.println (\"Exception in getting allow_weak_crypto, \" +\n@@ -163,2 +163,2 @@\n-        if (DEBUG) {\n-            System.out.println(\">>> EType: \" + eTypeName);\n+        if (DEBUG != null) {\n+            DEBUG.println(\">>> EType: \" + eTypeName);\n@@ -248,2 +248,2 @@\n-            if (DEBUG) {\n-                System.out.println(\"Exception while getting \" +\n+            if (DEBUG != null) {\n+                DEBUG.println(\"Exception while getting \" +\n@@ -251,1 +251,1 @@\n-                System.out.println(\"Using default builtin etypes\");\n+                DEBUG.println(\"Using default builtin etypes\");\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/krb5\/internal\/crypto\/EType.java","additions":10,"deletions":10,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -36,0 +36,2 @@\n+import static sun.security.krb5.internal.Krb5.DEBUG;\n+\n@@ -39,1 +41,0 @@\n-    private static boolean DEBUG = sun.security.krb5.internal.Krb5.DEBUG;\n@@ -262,3 +263,3 @@\n-        if (DEBUG) {\n-            System.out.println(\">>>crc32: \" + Integer.toHexString(temp));\n-            System.out.println(\">>>crc32: \" + Integer.toBinaryString(temp));\n+        if (DEBUG != null) {\n+            DEBUG.println(\">>>crc32: \" + Integer.toHexString(temp));\n+            DEBUG.println(\">>>crc32: \" + Integer.toBinaryString(temp));\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/krb5\/internal\/crypto\/crc32.java","additions":5,"deletions":4,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -143,1 +143,1 @@\n-            System.out.println(\"ARCFOUR: calculateChecksum with usage = \" +\n+            System.err.println(\"ARCFOUR: calculateChecksum with usage = \" +\n@@ -261,1 +261,1 @@\n-            System.out.println(\"ArcFour: ENCRYPT with key usage = \" + usage);\n+            System.err.println(\"ArcFour: ENCRYPT with key usage = \" + usage);\n@@ -316,1 +316,1 @@\n-            System.out.println(\"\\nARCFOUR: encryptRaw with usage = \" + usage);\n+            System.err.println(\"\\nARCFOUR: encryptRaw with usage = \" + usage);\n@@ -355,1 +355,1 @@\n-            System.out.println(\"\\nARCFOUR: DECRYPT using key usage = \" + usage);\n+            System.err.println(\"\\nARCFOUR: DECRYPT using key usage = \" + usage);\n@@ -427,1 +427,1 @@\n-            System.out.println(\"\\nARCFOUR: decryptRaw with usage = \" + usage);\n+            System.err.println(\"\\nARCFOUR: decryptRaw with usage = \" + usage);\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/krb5\/internal\/crypto\/dk\/ArcFourCrypto.java","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -52,0 +52,2 @@\n+import static sun.security.krb5.internal.Krb5.DEBUG;\n+\n@@ -67,1 +69,0 @@\n-    private static final boolean DEBUG = Krb5.DEBUG;\n@@ -104,2 +105,2 @@\n-            if (DEBUG) {\n-                System.out.println(\"Cannot load keytab \" + tabName + \": \" + e);\n+            if (DEBUG != null) {\n+                DEBUG.println(\"Cannot load keytab \" + tabName + \": \" + e);\n@@ -110,2 +111,2 @@\n-            if (DEBUG) {\n-                System.out.println(\"Cannot load keytab \" + tabName + \": \" + ioe);\n+            if (DEBUG != null) {\n+                DEBUG.println(\"Cannot load keytab \" + tabName + \": \" + ioe);\n@@ -266,2 +267,2 @@\n-            if (DEBUG) {\n-                System.out.println(\">>> KeyTab: load() entry length: \" +\n+            if (DEBUG != null) {\n+                DEBUG.println(\">>> KeyTab: load() entry length: \" +\n@@ -296,2 +297,2 @@\n-        if (DEBUG) {\n-            System.out.println(\"Looking for keys for: \" + service);\n+        if (DEBUG != null) {\n+            DEBUG.println(\"Looking for keys for: \" + service);\n@@ -307,2 +308,2 @@\n-                    if (DEBUG) {\n-                        System.out.println(\"Added key: \" + entry.keyType +\n+                    if (DEBUG != null) {\n+                        DEBUG.println(\"Added key: \" + entry.keyType +\n@@ -311,2 +312,2 @@\n-                } else if (DEBUG) {\n-                    System.out.println(\"Found unsupported keytype (\" +\n+                } else if (DEBUG != null) {\n+                    DEBUG.println(\"Found unsupported keytype (\" +\n@@ -350,2 +351,2 @@\n-                } else if (DEBUG) {\n-                    System.out.println(\"Found unsupported keytype (\" +\n+                } else if (DEBUG != null) {\n+                    DEBUG.println(\"Found unsupported keytype (\" +\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/krb5\/internal\/ktab\/KeyTab.java","additions":17,"deletions":16,"binary":false,"changes":33,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -38,0 +38,1 @@\n+import static sun.security.krb5.internal.Krb5.DEBUG;\n@@ -52,1 +53,0 @@\n-    boolean DEBUG = Krb5.DEBUG;\n@@ -98,2 +98,2 @@\n-        if (DEBUG) {\n-            System.out.println(\">>> KeyTabEntry: key tab entry size is \" + size);\n+        if (DEBUG != null) {\n+            DEBUG.println(\">>> KeyTabEntry: key tab entry size is \" + size);\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/krb5\/internal\/ktab\/KeyTabEntry.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -42,0 +42,2 @@\n+import static sun.security.krb5.internal.Krb5.DEBUG;\n+\n@@ -51,1 +53,0 @@\n-    boolean DEBUG = Krb5.DEBUG;\n@@ -154,2 +155,2 @@\n-        if (DEBUG) {\n-            System.out.println(\">>> KeyTabInputStream, readName(): \" + name);\n+        if (DEBUG != null) {\n+            DEBUG.println(\">>> KeyTabInputStream, readName(): \" + name);\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/krb5\/internal\/ktab\/KeyTabInputStream.java","additions":5,"deletions":4,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -41,0 +41,2 @@\n+import static sun.security.krb5.internal.Krb5.DEBUG;\n+\n@@ -51,1 +53,0 @@\n-    private static final boolean DEBUG = sun.security.krb5.internal.Krb5.DEBUG;\n@@ -61,2 +62,2 @@\n-        if (DEBUG) {\n-            System.out.println(\"MemoryCache: add \" + time + \" to \" + key);\n+        if (DEBUG != null) {\n+            DEBUG.println(\"MemoryCache: add \" + time + \" to \" + key);\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/krb5\/internal\/rcache\/MemoryCache.java","additions":5,"deletions":4,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -102,1 +102,1 @@\n-                printf(\"GSS-API: Unknown failure %d\\n\", dwError);\n+                TRACE1(\"GSS-API: Unknown failure %d\", dwError);\n@@ -104,1 +104,1 @@\n-                printf(\"GSS-API: %s\\n\",szMsgBuf);\n+                TRACE1(\"GSS-API: %s\",szMsgBuf);\n","filename":"src\/java.security.jgss\/share\/native\/libj2gss\/GSSLibStub.c","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -109,1 +109,1 @@\n-    printf(\"Couldn't find Object class\\n\");\n+    fprintf(stderr, \"Couldn't find Object class\\n\");\n@@ -118,1 +118,1 @@\n-    printf(\"Couldn't find String class\\n\");\n+    fprintf(stderr, \"Couldn't find String class\\n\");\n@@ -127,1 +127,1 @@\n-    printf(\"Couldn't find org.ietf.jgss.Oid class\\n\");\n+    fprintf(stderr, \"Couldn't find org.ietf.jgss.Oid class\\n\");\n@@ -136,1 +136,1 @@\n-    printf(\"Couldn't find org.ietf.jgss.GSSException class\\n\");\n+    fprintf(stderr, \"Couldn't find org.ietf.jgss.GSSException class\\n\");\n@@ -145,1 +145,1 @@\n-    printf(\"Couldn't find sun.security.jgss.wrapper.GSSNameElement class\\n\");\n+    fprintf(stderr, \"Couldn't find sun.security.jgss.wrapper.GSSNameElement class\\n\");\n@@ -154,1 +154,1 @@\n-    printf(\"Couldn't find sun.security.jgss.wrapper.GSSCredElement class\\n\");\n+    fprintf(stderr, \"Couldn't find sun.security.jgss.wrapper.GSSCredElement class\\n\");\n@@ -163,1 +163,1 @@\n-    printf(\"Couldn't find sun.security.jgss.wrapper.NativeGSSContext class\\n\");\n+    fprintf(stderr, \"Couldn't find sun.security.jgss.wrapper.NativeGSSContext class\\n\");\n@@ -172,1 +172,1 @@\n-    printf(\"Couldn't find sun.security.jgss.wrapper.SunNativeProvider class\\n\");\n+    fprintf(stderr, \"Couldn't find sun.security.jgss.wrapper.SunNativeProvider class\\n\");\n@@ -183,1 +183,1 @@\n-    printf(\"Couldn't find String(byte[]) constructor\\n\");\n+    fprintf(stderr, \"Couldn't find String(byte[]) constructor\\n\");\n@@ -189,1 +189,1 @@\n-    printf(\"Couldn't find Oid(byte[]) constructor\\n\");\n+    fprintf(stderr, \"Couldn't find Oid(byte[]) constructor\\n\");\n@@ -194,1 +194,1 @@\n-    printf(\"Couldn't find Oid.getDER() method\\n\");\n+    fprintf(stderr, \"Couldn't find Oid.getDER() method\\n\");\n@@ -199,1 +199,1 @@\n-    printf(\"Couldn't find org.ietf.jgss.MessageProp class\\n\");\n+    fprintf(stderr, \"Couldn't find org.ietf.jgss.MessageProp class\\n\");\n@@ -205,1 +205,1 @@\n-    printf(\"Couldn't find MessageProp.getPrivacy() method\\n\");\n+    fprintf(stderr, \"Couldn't find MessageProp.getPrivacy() method\\n\");\n@@ -210,1 +210,1 @@\n-    printf(\"Couldn't find MessageProp.getQOP() method\\n\");\n+    fprintf(stderr, \"Couldn't find MessageProp.getQOP() method\\n\");\n@@ -216,1 +216,1 @@\n-    printf(\"Couldn't find MessageProp.setPrivacy(boolean) method\\n\");\n+    fprintf(stderr, \"Couldn't find MessageProp.setPrivacy(boolean) method\\n\");\n@@ -221,1 +221,1 @@\n-    printf(\"Couldn't find MessageProp.setQOP(int) method\\n\");\n+    fprintf(stderr, \"Couldn't find MessageProp.setQOP(int) method\\n\");\n@@ -228,1 +228,1 @@\n-    printf(\"Couldn't find MessageProp.setSupplementaryStates(...) method\\n\");\n+    fprintf(stderr, \"Couldn't find MessageProp.setSupplementaryStates(...) method\\n\");\n@@ -234,1 +234,1 @@\n-    printf(\"Couldn't find GSSException(int, int, String) constructor\\n\");\n+    fprintf(stderr, \"Couldn't find GSSException(int, int, String) constructor\\n\");\n@@ -239,1 +239,1 @@\n-    printf(\"Couldn't find org.ietf.jgss.ChannelBinding class\\n\");\n+    fprintf(stderr, \"Couldn't find org.ietf.jgss.ChannelBinding class\\n\");\n@@ -246,1 +246,1 @@\n-    printf(\"Couldn't find ChannelBinding.getInitiatorAddress() method\\n\");\n+    fprintf(stderr, \"Couldn't find ChannelBinding.getInitiatorAddress() method\\n\");\n@@ -253,1 +253,1 @@\n-    printf(\"Couldn't find ChannelBinding.getAcceptorAddress() method\\n\");\n+    fprintf(stderr, \"Couldn't find ChannelBinding.getAcceptorAddress() method\\n\");\n@@ -259,1 +259,1 @@\n-    printf(\"Couldn't find ChannelBinding.getApplicationData() method\\n\");\n+    fprintf(stderr, \"Couldn't find ChannelBinding.getApplicationData() method\\n\");\n@@ -264,1 +264,1 @@\n-    printf(\"Couldn't find java.net.InetAddress class\\n\");\n+    fprintf(stderr, \"Couldn't find java.net.InetAddress class\\n\");\n@@ -270,1 +270,1 @@\n-    printf(\"Couldn't find InetAddress.getAddress() method\\n\");\n+    fprintf(stderr, \"Couldn't find InetAddress.getAddress() method\\n\");\n@@ -277,1 +277,1 @@\n-    printf(\"Couldn't find GSSNameElement(long, GSSLibStub) constructor\\n\");\n+    fprintf(stderr, \"Couldn't find GSSNameElement(long, GSSLibStub) constructor\\n\");\n@@ -284,1 +284,1 @@\n-    printf(\"Couldn't find GSSCredElement(long, GSSLibStub) constructor\\n\");\n+    fprintf(stderr, \"Couldn't find GSSCredElement(long, GSSLibStub) constructor\\n\");\n@@ -291,1 +291,1 @@\n-    printf(\"Couldn't find NativeGSSContext(long, GSSLibStub) constructor\\n\");\n+    fprintf(stderr, \"Couldn't find NativeGSSContext(long, GSSLibStub) constructor\\n\");\n@@ -299,1 +299,1 @@\n-    printf(\"Couldn't find NativeGSSContext.setContext(long) method\\n\");\n+    fprintf(stderr, \"Couldn't find NativeGSSContext.setContext(long) method\\n\");\n@@ -306,1 +306,1 @@\n-    printf(\"Couldn't find sun.security.jgss.wrapper.GSSLibStub class\\n\");\n+    fprintf(stderr, \"Couldn't find sun.security.jgss.wrapper.GSSLibStub class\\n\");\n@@ -312,1 +312,1 @@\n-    printf(\"Couldn't find GSSLibStub.pMech field\\n\");\n+    fprintf(stderr, \"Couldn't find GSSLibStub.pMech field\\n\");\n@@ -318,1 +318,1 @@\n-    printf(\"Couldn't find NativeGSSContext.pContext field\\n\");\n+    fprintf(stderr, \"Couldn't find NativeGSSContext.pContext field\\n\");\n@@ -325,1 +325,1 @@\n-    printf(\"Couldn't find NativeGSSContext.srcName field\\n\");\n+    fprintf(stderr, \"Couldn't find NativeGSSContext.srcName field\\n\");\n@@ -332,1 +332,1 @@\n-    printf(\"Couldn't find NativeGSSContext.targetName field\\n\");\n+    fprintf(stderr, \"Couldn't find NativeGSSContext.targetName field\\n\");\n@@ -338,1 +338,1 @@\n-    printf(\"Couldn't find NativeGSSContext.isInitiator field\\n\");\n+    fprintf(stderr, \"Couldn't find NativeGSSContext.isInitiator field\\n\");\n@@ -344,1 +344,1 @@\n-    printf(\"Couldn't find NativeGSSContext.isEstablished field\\n\");\n+    fprintf(stderr, \"Couldn't find NativeGSSContext.isEstablished field\\n\");\n@@ -351,1 +351,1 @@\n-    printf(\"Couldn't find NativeGSSContext.delegatedCred field\\n\");\n+    fprintf(stderr, \"Couldn't find NativeGSSContext.delegatedCred field\\n\");\n@@ -357,1 +357,1 @@\n-    printf(\"Couldn't find NativeGSSContext.flags field\\n\");\n+    fprintf(stderr, \"Couldn't find NativeGSSContext.flags field\\n\");\n@@ -363,1 +363,1 @@\n-    printf(\"Couldn't find NativeGSSContext.lifetime field\\n\");\n+    fprintf(stderr, \"Couldn't find NativeGSSContext.lifetime field\\n\");\n@@ -370,1 +370,1 @@\n-    printf(\"Couldn't find NativeGSSContext.actualMech field\\n\");\n+    fprintf(stderr, \"Couldn't find NativeGSSContext.actualMech field\\n\");\n","filename":"src\/java.security.jgss\/share\/native\/libj2gss\/NativeUtil.c","additions":40,"deletions":40,"binary":false,"changes":80,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -87,4 +87,4 @@\n-  #define TRACE0(s) { if (JGSS_DEBUG) { printf(\"[GSSLibStub:%d] %s\\n\", __LINE__, s); fflush(stdout); }}\n-  #define TRACE1(s, p1) { if (JGSS_DEBUG) { printf(\"[GSSLibStub:%d] \"s\"\\n\", __LINE__, p1); fflush(stdout); }}\n-  #define TRACE2(s, p1, p2) { if (JGSS_DEBUG) { printf(\"[GSSLibStub:%d] \"s\"\\n\", __LINE__, p1, p2); fflush(stdout); }}\n-  #define TRACE3(s, p1, p2, p3) { if (JGSS_DEBUG) { printf(\"[GSSLibStub:%d] \"s\"\\n\", __LINE__, p1, p2, p3); fflush(stdout); }}\n+  #define TRACE0(s) { if (JGSS_DEBUG) { fprintf(stderr, \"[GSSLibStub:%d] %s\\n\", __LINE__, s); fflush(stderr); }}\n+  #define TRACE1(s, p1) { if (JGSS_DEBUG) { fprintf(stderr, \"[GSSLibStub:%d] \"s\"\\n\", __LINE__, p1); fflush(stderr); }}\n+  #define TRACE2(s, p1, p2) { if (JGSS_DEBUG) { fprintf(stderr, \"[GSSLibStub:%d] \"s\"\\n\", __LINE__, p1, p2); fflush(stderr); }}\n+  #define TRACE3(s, p1, p2, p3) { if (JGSS_DEBUG) { fprintf(stderr, \"[GSSLibStub:%d] \"s\"\\n\", __LINE__, p1, p2, p3); fflush(stderr); }}\n","filename":"src\/java.security.jgss\/share\/native\/libj2gss\/NativeUtil.h","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -42,0 +42,2 @@\n+import static sun.security.krb5.internal.Krb5.DEBUG;\n+\n@@ -51,1 +53,0 @@\n-    private static final boolean DEBUG = Krb5.DEBUG;\n@@ -183,2 +184,2 @@\n-        if (DEBUG) {\n-            System.out.println(\"Principal is \" + principal);\n+        if (DEBUG != null) {\n+            DEBUG.println(\"Principal is \" + principal);\n@@ -197,2 +198,2 @@\n-                if (DEBUG) {\n-                    System.out.println(\">>> Kinit console input \" +\n+                if (DEBUG != null) {\n+                    DEBUG.println(\">>> Kinit console input \" +\n@@ -204,2 +205,2 @@\n-            if (DEBUG) {\n-                System.out.println(\">>> Kinit using keytab\");\n+            if (DEBUG != null) {\n+                DEBUG.println(\">>> Kinit using keytab\");\n@@ -213,2 +214,2 @@\n-                if (DEBUG) {\n-                    System.out.println(\n+                if (DEBUG != null) {\n+                    DEBUG.println(\n@@ -233,2 +234,2 @@\n-        if (DEBUG) {\n-            System.out.println(\">>> Kinit realm name is \" + realm);\n+        if (DEBUG != null) {\n+            DEBUG.println(\">>> Kinit realm name is \" + realm);\n@@ -240,2 +241,2 @@\n-        if (DEBUG) {\n-            System.out.println(\">>> Creating KrbAsReq\");\n+        if (DEBUG != null) {\n+            DEBUG.println(\">>> Creating KrbAsReq\");\n","filename":"src\/java.security.jgss\/windows\/classes\/sun\/security\/krb5\/internal\/tools\/Kinit.java","additions":15,"deletions":14,"binary":false,"changes":29,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -40,0 +40,2 @@\n+import static sun.security.krb5.internal.Krb5.DEBUG;\n+\n@@ -66,1 +68,0 @@\n-    private boolean DEBUG = Krb5.DEBUG;\n@@ -196,2 +197,2 @@\n-            if (DEBUG) {\n-                System.out.println(\">>>KinitOptions principal name from \" +\n+            if (DEBUG != null) {\n+                DEBUG.println(\">>>KinitOptions principal name from \" +\n@@ -204,2 +205,2 @@\n-            if (DEBUG) {\n-                e.printStackTrace();\n+            if (DEBUG != null) {\n+                e.printStackTrace(DEBUG.getPrintStream());\n@@ -208,2 +209,2 @@\n-            if (DEBUG) {\n-                e.printStackTrace();\n+            if (DEBUG != null) {\n+                e.printStackTrace(DEBUG.getPrintStream());\n@@ -214,2 +215,2 @@\n-        if (DEBUG) {\n-            System.out.println(\">>>KinitOptions default username is: \"\n+        if (DEBUG != null) {\n+            DEBUG.println(\">>>KinitOptions default username is: \"\n@@ -223,2 +224,2 @@\n-            if (DEBUG) {\n-                System.out.println (\"Exception in getting principal \" +\n+            if (DEBUG != null) {\n+                DEBUG.println (\"Exception in getting principal \" +\n@@ -226,1 +227,1 @@\n-                e.printStackTrace();\n+                e.printStackTrace(DEBUG.getPrintStream());\n","filename":"src\/java.security.jgss\/windows\/classes\/sun\/security\/krb5\/internal\/tools\/KinitOptions.java","additions":14,"deletions":13,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -42,0 +42,2 @@\n+import static sun.security.krb5.internal.Krb5.DEBUG;\n+\n@@ -57,1 +59,0 @@\n-    private static boolean DEBUG = Krb5.DEBUG;\n@@ -324,2 +325,2 @@\n-                    if (DEBUG) {\n-                        e.printStackTrace();\n+                    if (DEBUG != null) {\n+                        e.printStackTrace(DEBUG.getPrintStream());\n","filename":"src\/java.security.jgss\/windows\/classes\/sun\/security\/krb5\/internal\/tools\/Klist.java","additions":5,"deletions":4,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -127,1 +127,1 @@\n-        printf(\"LSA: Couldn't find Krb5\\n\");\n+        fprintf(stderr, \"LSA: Couldn't find Krb5\\n\");\n@@ -130,1 +130,1 @@\n-    fldDEBUG = (*env)->GetStaticFieldID(env, cls, \"DEBUG\", \"Z\");\n+    fldDEBUG = (*env)->GetStaticFieldID(env, cls, \"DEBUG\", \"Lsun\/security\/util\/Debug;\");\n@@ -132,1 +132,1 @@\n-        printf(\"LSA: Krb5 has no DEBUG field\\n\");\n+        fprintf(stderr, \"LSA: Krb5 has no DEBUG field\\n\");\n@@ -135,1 +135,1 @@\n-    native_debug = (*env)->GetStaticBooleanField(env, cls, fldDEBUG);\n+    native_debug = (*env)->GetStaticObjectField(env, cls, fldDEBUG) != NULL;\n@@ -140,1 +140,1 @@\n-        printf(\"LSA: Couldn't find Ticket\\n\");\n+        fprintf(stderr, \"LSA: Couldn't find Ticket\\n\");\n@@ -144,1 +144,1 @@\n-        printf(\"LSA: Found Ticket\\n\");\n+        fprintf(stderr, \"LSA: Found Ticket\\n\");\n@@ -152,1 +152,1 @@\n-        printf(\"LSA: Made NewWeakGlobalRef\\n\");\n+        fprintf(stderr, \"LSA: Made NewWeakGlobalRef\\n\");\n@@ -158,1 +158,1 @@\n-        printf(\"LSA: Couldn't find PrincipalName\\n\");\n+        fprintf(stderr, \"LSA: Couldn't find PrincipalName\\n\");\n@@ -162,1 +162,1 @@\n-        printf(\"LSA: Found PrincipalName\\n\");\n+        fprintf(stderr, \"LSA: Found PrincipalName\\n\");\n@@ -170,1 +170,1 @@\n-        printf(\"LSA: Made NewWeakGlobalRef\\n\");\n+        fprintf(stderr, \"LSA: Made NewWeakGlobalRef\\n\");\n@@ -176,1 +176,1 @@\n-        printf(\"LSA: Couldn't find EncryptionKey\\n\");\n+        fprintf(stderr, \"LSA: Couldn't find EncryptionKey\\n\");\n@@ -180,1 +180,1 @@\n-        printf(\"LSA: Found EncryptionKey\\n\");\n+        fprintf(stderr, \"LSA: Found EncryptionKey\\n\");\n@@ -188,1 +188,1 @@\n-        printf(\"LSA: Made NewWeakGlobalRef\\n\");\n+        fprintf(stderr, \"LSA: Made NewWeakGlobalRef\\n\");\n@@ -194,1 +194,1 @@\n-        printf(\"LSA: Couldn't find TicketFlags\\n\");\n+        fprintf(stderr, \"LSA: Couldn't find TicketFlags\\n\");\n@@ -198,1 +198,1 @@\n-        printf(\"LSA: Found TicketFlags\\n\");\n+        fprintf(stderr, \"LSA: Found TicketFlags\\n\");\n@@ -206,1 +206,1 @@\n-        printf(\"LSA: Made NewWeakGlobalRef\\n\");\n+        fprintf(stderr, \"LSA: Made NewWeakGlobalRef\\n\");\n@@ -212,1 +212,1 @@\n-        printf(\"LSA: Couldn't find KerberosTime\\n\");\n+        fprintf(stderr, \"LSA: Couldn't find KerberosTime\\n\");\n@@ -216,1 +216,1 @@\n-        printf(\"LSA: Found KerberosTime\\n\");\n+        fprintf(stderr, \"LSA: Found KerberosTime\\n\");\n@@ -224,1 +224,1 @@\n-        printf(\"LSA: Made NewWeakGlobalRef\\n\");\n+        fprintf(stderr, \"LSA: Made NewWeakGlobalRef\\n\");\n@@ -230,1 +230,1 @@\n-        printf(\"LSA: Couldn't find String\\n\");\n+        fprintf(stderr, \"LSA: Couldn't find String\\n\");\n@@ -234,1 +234,1 @@\n-        printf(\"LSA: Found String\\n\");\n+        fprintf(stderr, \"LSA: Found String\\n\");\n@@ -242,1 +242,1 @@\n-        printf(\"LSA: Made NewWeakGlobalRef\\n\");\n+        fprintf(stderr, \"LSA: Made NewWeakGlobalRef\\n\");\n@@ -248,1 +248,1 @@\n-        printf(\"LSA: Couldn't find Ticket constructor\\n\");\n+        fprintf(stderr, \"LSA: Couldn't find Ticket constructor\\n\");\n@@ -252,1 +252,1 @@\n-        printf(\"LSA: Found Ticket constructor\\n\");\n+        fprintf(stderr, \"LSA: Found Ticket constructor\\n\");\n@@ -258,1 +258,1 @@\n-        printf(\"LSA: Couldn't find PrincipalName constructor\\n\");\n+        fprintf(stderr, \"LSA: Couldn't find PrincipalName constructor\\n\");\n@@ -262,1 +262,1 @@\n-        printf(\"LSA: Found PrincipalName constructor\\n\");\n+        fprintf(stderr, \"LSA: Found PrincipalName constructor\\n\");\n@@ -268,1 +268,1 @@\n-        printf(\"LSA: Couldn't find EncryptionKey constructor\\n\");\n+        fprintf(stderr, \"LSA: Couldn't find EncryptionKey constructor\\n\");\n@@ -272,1 +272,1 @@\n-        printf(\"LSA: Found EncryptionKey constructor\\n\");\n+        fprintf(stderr, \"LSA: Found EncryptionKey constructor\\n\");\n@@ -278,1 +278,1 @@\n-        printf(\"LSA: Couldn't find TicketFlags constructor\\n\");\n+        fprintf(stderr, \"LSA: Couldn't find TicketFlags constructor\\n\");\n@@ -282,1 +282,1 @@\n-        printf(\"LSA: Found TicketFlags constructor\\n\");\n+        fprintf(stderr, \"LSA: Found TicketFlags constructor\\n\");\n@@ -288,1 +288,1 @@\n-        printf(\"LSA: Couldn't find KerberosTime constructor\\n\");\n+        fprintf(stderr, \"LSA: Couldn't find KerberosTime constructor\\n\");\n@@ -292,1 +292,1 @@\n-        printf(\"LSA: Found KerberosTime constructor\\n\");\n+        fprintf(stderr, \"LSA: Found KerberosTime constructor\\n\");\n@@ -296,1 +296,1 @@\n-        printf(\"LSA: Finished OnLoad processing\\n\");\n+        fprintf(stderr, \"LSA: Finished OnLoad processing\\n\");\n@@ -386,1 +386,1 @@\n-                printf(\"LSA: Couldn't find sun.security.krb5.Credentials constructor\\n\");\n+                fprintf(stderr, \"LSA: Couldn't find sun.security.krb5.Credentials constructor\\n\");\n@@ -392,1 +392,1 @@\n-            printf(\"LSA: Found KrbCreds constructor\\n\");\n+            fprintf(stderr, \"LSA: Found KrbCreds constructor\\n\");\n@@ -403,1 +403,1 @@\n-            printf(\"LSA: Got handle to Kerberos package\\n\");\n+            fprintf(stderr, \"LSA: Got handle to Kerberos package\\n\");\n@@ -422,1 +422,1 @@\n-            printf(\"LSA: Response size is %d\\n\", rspSize);\n+            fprintf(stderr, \"LSA: Response size is %d\\n\", rspSize);\n@@ -446,1 +446,1 @@\n-            printf(\"LSA: TICKET SessionKey KeyType is %d\\n\", msticket->SessionKey.KeyType);\n+            fprintf(stderr, \"LSA: TICKET SessionKey KeyType is %d\\n\", msticket->SessionKey.KeyType);\n@@ -458,1 +458,1 @@\n-                            printf(\"LSA: Valid etype found: %d\\n\", etypes[i]);\n+                            fprintf(stderr, \"LSA: Valid etype found: %d\\n\", etypes[i]);\n@@ -468,1 +468,1 @@\n-                printf(\"LSA: MS TGT in cache is invalid\/not supported; request new ticket\\n\");\n+                fprintf(stderr, \"LSA: MS TGT in cache is invalid\/not supported; request new ticket\\n\");\n@@ -495,1 +495,1 @@\n-                    printf(\"LSA: Response size is %d for %d\\n\", responseSize, etypes[i]);\n+                    fprintf(stderr, \"LSA: Response size is %d for %d\\n\", responseSize, etypes[i]);\n@@ -512,1 +512,1 @@\n-                        printf(\"LSA: Response etype is %d for %d. Retry.\\n\", msticket->SessionKey.KeyType, etypes[i]);\n+                        fprintf(stderr, \"LSA: Response etype is %d for %d. Retry.\\n\", msticket->SessionKey.KeyType, etypes[i]);\n@@ -812,1 +812,1 @@\n-        printf(\"LSA: Error calling function %s: %lu\\n\", szAPI, dwError);\n+        fprintf(stderr, \"LSA: Error calling function %s: %lu\\n\", szAPI, dwError);\n@@ -825,1 +825,1 @@\n-            printf(\"LSA: FormatMessage failed with %d\\n\", GetLastError());\n+            fprintf(stderr, \"LSA: FormatMessage failed with %d\\n\", GetLastError());\n@@ -829,1 +829,1 @@\n-            printf(\"LSA: %S\",szMsgBuf);\n+            fprintf(stderr, \"LSA: %S\",szMsgBuf);\n@@ -920,3 +920,3 @@\n-        printf(\"LSA: Principal domain is %S\\n\", realm);\n-        printf(\"LSA: Name type is %x\\n\", principalName->NameType);\n-        printf(\"LSA: Name count is %x\\n\", principalName->NameCount);\n+        fprintf(stderr, \"LSA: Principal domain is %S\\n\", realm);\n+        fprintf(stderr, \"LSA: Name type is %x\\n\", principalName->NameType);\n+        fprintf(stderr, \"LSA: Name count is %x\\n\", principalName->NameCount);\n@@ -930,1 +930,1 @@\n-            printf(\"LSA: Can't allocate String array for Principal\\n\");\n+            fprintf(stderr, \"LSA: Can't allocate String array for Principal\\n\");\n@@ -985,1 +985,1 @@\n-            printf(\"LSA: Session key all zero. Stop.\\n\");\n+            fprintf(stderr, \"LSA: Session key all zero. Stop.\\n\");\n@@ -1060,1 +1060,1 @@\n-            printf(\"LSA: %S\\n\", (wchar_t *)timeString);\n+            fprintf(stderr, \"LSA: %S\\n\", (wchar_t *)timeString);\n","filename":"src\/java.security.jgss\/windows\/native\/libw2k_lsa_auth\/NativeCreds.c","additions":52,"deletions":52,"binary":false,"changes":104,"status":"modified"},{"patch":"@@ -45,0 +45,1 @@\n+import sun.security.util.Debug;\n@@ -380,1 +381,2 @@\n-    private boolean debug = false;\n+    private Debug debug = null;\n+\n@@ -461,1 +463,1 @@\n-        debug = \"true\".equalsIgnoreCase((String)options.get(\"debug\"));\n+        debug = Debug.of(\"krb5loginmodule\", (String)options.get(\"debug\"));\n@@ -498,2 +500,2 @@\n-        if (debug) {\n-            System.out.print(\"Debug is  \" + debug\n+        if (debug != null) {\n+            debug.println(\"Debug is \" + (debug != null)\n@@ -532,2 +534,2 @@\n-                if (debug) {\n-                    System.out.println(\"Refreshing Kerberos configuration\");\n+                if (debug != null) {\n+                    debug.println(\"Refreshing Kerberos configuration\");\n@@ -561,2 +563,2 @@\n-                if (debug)\n-                    System.out.println(\"\\t\\t[Krb5LoginModule] \" +\n+                if (debug != null)\n+                    debug.println(\"\\t\\t[Krb5LoginModule] \" +\n@@ -570,2 +572,2 @@\n-                if (debug) {\n-                    System.out.println(\"\\t\\t[Krb5LoginModule] \" +\n+                if (debug != null) {\n+                    debug.println(\"\\t\\t[Krb5LoginModule] \" +\n@@ -584,2 +586,2 @@\n-                if (debug) {\n-                    System.out.println(\"\\t\\t[Krb5LoginModule] \" +\n+                if (debug != null) {\n+                    debug.println(\"\\t\\t[Krb5LoginModule] \" +\n@@ -605,2 +607,2 @@\n-            if (debug) {\n-                System.out.println(\"\\t\\t[Krb5LoginModule] \" +\n+            if (debug != null) {\n+                debug.println(\"\\t\\t[Krb5LoginModule] \" +\n@@ -644,2 +646,2 @@\n-                if (debug)\n-                    System.out.println(\"Acquire TGT from Cache\");\n+                if (debug != null)\n+                    debug.println(\"Acquire TGT from Cache\");\n@@ -661,2 +663,2 @@\n-                        if (debug)\n-                            System.out.println(\"Credentials are\" +\n+                        if (debug != null)\n+                            debug.println(\"Credentials are\" +\n@@ -675,2 +677,2 @@\n-                if (debug) {\n-                    System.out.println(\"Principal is \" + principal);\n+                if (debug != null) {\n+                    debug.println(\"Principal is \" + principal);\n@@ -678,1 +680,1 @@\n-                        System.out.println\n+                        debug.println\n@@ -732,2 +734,2 @@\n-                            if (debug) {\n-                                System.out.println\n+                            if (debug != null) {\n+                                debug.println\n@@ -768,2 +770,2 @@\n-                if (debug) {\n-                    System.out.println(\"principal is \" + principal);\n+                if (debug != null) {\n+                    debug.println(\"principal is \" + principal);\n@@ -772,1 +774,1 @@\n-                        System.out.println(\"Will use keytab\");\n+                        debug.println(\"Will use keytab\");\n@@ -775,1 +777,1 @@\n-                            System.out.println(\"EncryptionKey: keyType=\" +\n+                            debug.println(\"EncryptionKey: keyType=\" +\n@@ -803,3 +805,3 @@\n-            if (debug) {\n-                System.out.println\n-                    (\"username from shared state is \" + username + \"\\n\");\n+            if (debug != null) {\n+                debug.println\n+                        (\"username from shared state is \" + username + \"\\n\");\n@@ -808,2 +810,0 @@\n-                System.out.println\n-                    (\"username from shared state is null\\n\");\n@@ -813,4 +813,0 @@\n-            if (debug) {\n-                System.out.println\n-                    (\"username from shared state is \" + username + \"\\n\");\n-            }\n@@ -866,2 +862,2 @@\n-                if (debug) {\n-                    System.out.println\n+                if (debug != null) {\n+                    debug.println\n@@ -873,2 +869,2 @@\n-            if (debug) {\n-                System.out.println\n+            if (debug != null) {\n+                debug.println\n@@ -914,2 +910,2 @@\n-                if (debug) {\n-                    System.out.println(\"\\t\\t[Krb5LoginModule] \" +\n+                if (debug != null) {\n+                    debug.println(\"\\t\\t[Krb5LoginModule] \" +\n@@ -918,1 +914,1 @@\n-                    System.out.println();\n+                    debug.println();\n@@ -1011,2 +1007,2 @@\n-            if (debug)\n-                System.out.println(\"Renewed Kerberos Ticket\");\n+            if (debug != null)\n+                debug.println(\"Renewed Kerberos Ticket\");\n@@ -1015,2 +1011,2 @@\n-            if (debug)\n-                System.out.println(\"Ticket could not be renewed : \"\n+            if (debug != null)\n+                debug.println(\"Ticket could not be renewed : \"\n@@ -1134,2 +1130,2 @@\n-                        if (debug) {\n-                            System.out.println(\"Added server's key\"\n+                        if (debug != null) {\n+                            debug.println(\"Added server's key\"\n@@ -1137,1 +1133,1 @@\n-                            System.out.println(\"\\t\\t[Krb5LoginModule] \" +\n+                            debug.println(\"\\t\\t[Krb5LoginModule] \" +\n@@ -1147,2 +1143,2 @@\n-        if (debug)\n-            System.out.println(\"Commit Succeeded \\n\");\n+        if (debug != null)\n+            debug.println(\"Commit Succeeded \\n\");\n@@ -1197,2 +1193,2 @@\n-        if (debug) {\n-            System.out.println(\"\\t\\t[Krb5LoginModule]: \" +\n+        if (debug != null) {\n+            debug.println(\"\\t\\t[Krb5LoginModule]: \" +\n@@ -1225,2 +1221,2 @@\n-        if (debug) {\n-            System.out.println(\"\\t\\t[Krb5LoginModule]: \" +\n+        if (debug != null) {\n+            debug.println(\"\\t\\t[Krb5LoginModule]: \" +\n","filename":"src\/jdk.security.auth\/share\/classes\/com\/sun\/security\/auth\/module\/Krb5LoginModule.java","additions":52,"deletions":56,"binary":false,"changes":108,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2009, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2009, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -81,2 +81,2 @@\n-        PrintStream oldout = System.out;\n-        System.setOut(po);\n+        PrintStream oldErr = System.err;\n+        System.setErr(po);\n@@ -104,1 +104,1 @@\n-        System.setOut(oldout);\n+        System.setErr(oldErr);\n","filename":"test\/jdk\/sun\/security\/krb5\/IPv6.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -155,1 +155,1 @@\n-        System.out.println(\"Prepare for GC\");\n+        System.err.println(\"Prepare for GC\");\n@@ -165,3 +165,3 @@\n-                .stdoutShouldMatch(\"Prepare for GC(.|\\\\n)*GSSLibStub_deleteContext\")\n-                .stdoutShouldMatch(\"Prepare for GC(.|\\\\n)*GSSLibStub_releaseName\")\n-                .stdoutShouldMatch(\"Prepare for GC(.|\\\\n)*GSSLibStub_releaseCred\");\n+                .stderrShouldMatch(\"Prepare for GC(.|\\\\n)*GSSLibStub_deleteContext\")\n+                .stderrShouldMatch(\"Prepare for GC(.|\\\\n)*GSSLibStub_releaseName\")\n+                .stderrShouldMatch(\"Prepare for GC(.|\\\\n)*GSSLibStub_releaseCred\");\n","filename":"test\/jdk\/sun\/security\/krb5\/auto\/Cleaners.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -260,1 +260,1 @@\n-        PrintStream oldOut = System.out;\n+        PrintStream oldErr = System.err;\n@@ -263,1 +263,1 @@\n-        System.setOut(new PrintStream(bo));\n+        System.setErr(new PrintStream(bo));\n@@ -269,1 +269,1 @@\n-            System.setOut(oldOut);\n+            System.setErr(oldErr);\n","filename":"test\/jdk\/sun\/security\/krb5\/auto\/KdcPolicy.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -0,0 +1,64 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8327818\n+ * @summary reimplement debug option in Krb5LoginModule\n+ * @library \/test\/lib\n+ *\/\n+import com.sun.security.auth.module.Krb5LoginModule;\n+import jdk.test.lib.process.ProcessTools;\n+\n+import java.util.Map;\n+import javax.security.auth.Subject;\n+\n+public class LoginModuleDebug {\n+    public static void main(String[] args) throws Exception {\n+        if (args.length == 0) {\n+            \/\/ debug option set to true\n+            ProcessTools.executeTestJava(\"LoginModuleDebug\",\n+                            \"debug\", \"true\")\n+                    .stdoutShouldBeEmpty()\n+                    .stderrShouldContain(\"krb5loginmodule:\");\n+            \/\/ debug option set to false\n+            ProcessTools.executeTestJava(\"LoginModuleDebug\",\n+                            \"debug\", \"false\")\n+                    .stdoutShouldBeEmpty()\n+                    .stderrShouldNotContain(\"krb5loginmodule:\");\n+            \/\/ no debug option\n+            ProcessTools.executeTestJava(\"LoginModuleDebug\",\n+                            \"foo\", \"bar\")\n+                    .stdoutShouldBeEmpty()\n+                    .stderrShouldNotContain(\"krb5loginmodule:\");\n+        } else {\n+            test(args[0], args[1]);\n+        }\n+    }\n+\n+    static void test(String key, String prop)\n+            throws Exception {\n+        new Krb5LoginModule().initialize(\n+                new Subject(), null, Map.of(), Map.of(key, prop));\n+    }\n+}\n","filename":"test\/jdk\/sun\/security\/krb5\/auto\/LoginModuleDebug.java","additions":64,"deletions":0,"binary":false,"changes":64,"status":"added"}]}