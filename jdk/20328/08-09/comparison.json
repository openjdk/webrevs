{"files":[{"patch":"@@ -859,0 +859,4 @@\n+  ifneq ($$(findstring -XX:+UseShenandoahGC, $$(JTREG_ALL_OPTIONS)), )\n+    JTREG_AUTO_PROBLEM_LISTS += ProblemList-shenandoah.txt\n+  endif\n+\n","filename":"make\/RunTests.gmk","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -106,3 +106,0 @@\n-#if INCLUDE_JFR\n-#include \"jfr\/leakprofiler\/leakProfiler.hpp\"\n-#endif\n@@ -2173,8 +2170,0 @@\n-WB_ENTRY(jboolean, WB_IsJFRLeakProfSupported(JNIEnv* env))\n-#if INCLUDE_JFR\n-  return LeakProfiler::is_supported();\n-#else\n-  return false;\n-#endif \/\/ INCLUDE_JFR\n-WB_END\n-\n@@ -2920,1 +2909,0 @@\n-  {CC\"isJFRLeakProfSupported\",            CC\"()Z\",    (void*)&WB_IsJFRLeakProfSupported },\n","filename":"src\/hotspot\/share\/prims\/whitebox.cpp","additions":0,"deletions":12,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -0,0 +1,60 @@\n+#\n+# Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.\n+# DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+#\n+# This code is free software; you can redistribute it and\/or modify it\n+# under the terms of the GNU General Public License version 2 only, as\n+# published by the Free Software Foundation.\n+#\n+# This code is distributed in the hope that it will be useful, but WITHOUT\n+# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+# FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+# version 2 for more details (a copy is included in the LICENSE file that\n+# accompanied this code).\n+#\n+# You should have received a copy of the GNU General Public License version\n+# 2 along with this work; if not, write to the Free Software Foundation,\n+# Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+#\n+# Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+# or visit www.oracle.com if you need additional information or have any\n+# questions.\n+#\n+\n+#############################################################################\n+#\n+# List of quarantined tests for testing with Shenandoah.\n+#\n+#############################################################################\n+\n+# Quiet all LeakProfiler tests\n+\n+jdk\/jfr\/api\/consumer\/TestRecordingFileWrite.java        8342951     generic-all\n+jdk\/jfr\/event\/oldobject\/TestAllocationTime.java         8342951     generic-all\n+jdk\/jfr\/event\/oldobject\/TestArrayInformation.java       8342951     generic-all\n+jdk\/jfr\/event\/oldobject\/TestCircularReference.java      8342951     generic-all\n+jdk\/jfr\/event\/oldobject\/TestClassLoaderLeak.java        8342951     generic-all\n+jdk\/jfr\/event\/oldobject\/TestFieldInformation.java       8342951     generic-all\n+jdk\/jfr\/event\/oldobject\/TestG1.java                     8342951     generic-all\n+jdk\/jfr\/event\/oldobject\/TestHeapDeep.java               8342951     generic-all\n+jdk\/jfr\/event\/oldobject\/TestHeapShallow.java            8342951     generic-all\n+jdk\/jfr\/event\/oldobject\/TestLargeRootSet.java           8342951     generic-all\n+jdk\/jfr\/event\/oldobject\/TestLastKnownHeapUsage.java     8342951     generic-all\n+jdk\/jfr\/event\/oldobject\/TestListenerLeak.java           8342951     generic-all\n+jdk\/jfr\/event\/oldobject\/TestMetadataRetention.java      8342951     generic-all\n+jdk\/jfr\/event\/oldobject\/TestObjectAge.java              8342951     generic-all\n+jdk\/jfr\/event\/oldobject\/TestObjectDescription.java      8342951     generic-all\n+jdk\/jfr\/event\/oldobject\/TestObjectSize.java             8342951     generic-all\n+jdk\/jfr\/event\/oldobject\/TestParallel.java               8342951     generic-all\n+jdk\/jfr\/event\/oldobject\/TestReferenceChainLimit.java    8342951     generic-all\n+jdk\/jfr\/event\/oldobject\/TestSanityDefault.java          8342951     generic-all\n+jdk\/jfr\/event\/oldobject\/TestSerial.java                 8342951     generic-all\n+jdk\/jfr\/event\/oldobject\/TestShenandoah.java             8342951     generic-all\n+jdk\/jfr\/event\/oldobject\/TestThreadLocalLeak.java        8342951     generic-all\n+jdk\/jfr\/event\/oldobject\/TestZ.java                      8342951     generic-all\n+jdk\/jfr\/jcmd\/TestJcmdDump.java                          8342951     generic-all\n+jdk\/jfr\/jcmd\/TestJcmdDumpPathToGCRoots.java             8342951     generic-all\n+jdk\/jfr\/jcmd\/TestJcmdStartPathToGCRoots.java            8342951     generic-all\n+jdk\/jfr\/jvm\/TestWaste.java                              8342951     generic-all\n+jdk\/jfr\/startupargs\/TestOldObjectQueueSize.java         8342951     generic-all\n+\n","filename":"test\/jdk\/ProblemList-shenandoah.txt","additions":60,"deletions":0,"binary":false,"changes":60,"status":"added"},{"patch":"@@ -97,1 +97,0 @@\n-    vm.hasJFRLeakProf \\\n","filename":"test\/jdk\/TEST.ROOT","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -43,1 +43,1 @@\n- * @requires vm.hasJFRLeakProf\n+ * @requires vm.hasJFR\n","filename":"test\/jdk\/jdk\/jfr\/api\/consumer\/TestRecordingFileWrite.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -41,1 +41,1 @@\n- * @requires vm.hasJFRLeakProf\n+ * @requires vm.hasJFR\n","filename":"test\/jdk\/jdk\/jfr\/event\/oldobject\/TestAllocationTime.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -40,1 +40,1 @@\n- * @requires vm.hasJFRLeakProf\n+ * @requires vm.hasJFR\n","filename":"test\/jdk\/jdk\/jfr\/event\/oldobject\/TestArrayInformation.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -37,1 +37,1 @@\n- * @requires vm.hasJFRLeakProf\n+ * @requires vm.hasJFR\n","filename":"test\/jdk\/jdk\/jfr\/event\/oldobject\/TestCircularReference.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -42,1 +42,1 @@\n- * @requires vm.hasJFRLeakProf\n+ * @requires vm.hasJFR\n","filename":"test\/jdk\/jdk\/jfr\/event\/oldobject\/TestClassLoaderLeak.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -42,1 +42,1 @@\n- * @requires vm.hasJFRLeakProf\n+ * @requires vm.hasJFR\n","filename":"test\/jdk\/jdk\/jfr\/event\/oldobject\/TestFieldInformation.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -38,1 +38,1 @@\n- * @requires vm.hasJFRLeakProf\n+ * @requires vm.hasJFR\n","filename":"test\/jdk\/jdk\/jfr\/event\/oldobject\/TestG1.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -37,1 +37,1 @@\n- * @requires vm.hasJFRLeakProf\n+ * @requires vm.hasJFR\n","filename":"test\/jdk\/jdk\/jfr\/event\/oldobject\/TestHeapDeep.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -36,1 +36,1 @@\n- * @requires vm.hasJFRLeakProf\n+ * @requires vm.hasJFR\n","filename":"test\/jdk\/jdk\/jfr\/event\/oldobject\/TestHeapShallow.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -47,1 +47,1 @@\n- * @requires vm.hasJFRLeakProf\n+ * @requires vm.hasJFR\n","filename":"test\/jdk\/jdk\/jfr\/event\/oldobject\/TestLargeRootSet.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -41,1 +41,1 @@\n- * @requires vm.hasJFRLeakProf\n+ * @requires vm.hasJFR\n","filename":"test\/jdk\/jdk\/jfr\/event\/oldobject\/TestLastKnownHeapUsage.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -38,1 +38,1 @@\n- * @requires vm.hasJFRLeakProf\n+ * @requires vm.hasJFR\n","filename":"test\/jdk\/jdk\/jfr\/event\/oldobject\/TestListenerLeak.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -45,1 +45,1 @@\n- * @requires vm.hasJFRLeakProf\n+ * @requires vm.hasJFR\n","filename":"test\/jdk\/jdk\/jfr\/event\/oldobject\/TestMetadataRetention.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -39,1 +39,1 @@\n- * @requires vm.hasJFRLeakProf\n+ * @requires vm.hasJFR\n","filename":"test\/jdk\/jdk\/jfr\/event\/oldobject\/TestObjectAge.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -43,1 +43,1 @@\n- * @requires vm.hasJFRLeakProf\n+ * @requires vm.hasJFR\n","filename":"test\/jdk\/jdk\/jfr\/event\/oldobject\/TestObjectDescription.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -42,1 +42,1 @@\n- * @requires vm.hasJFRLeakProf\n+ * @requires vm.hasJFR\n","filename":"test\/jdk\/jdk\/jfr\/event\/oldobject\/TestObjectSize.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -38,1 +38,1 @@\n- * @requires vm.hasJFRLeakProf\n+ * @requires vm.hasJFR\n","filename":"test\/jdk\/jdk\/jfr\/event\/oldobject\/TestParallel.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -36,1 +36,1 @@\n- * @requires vm.hasJFRLeakProf\n+ * @requires vm.hasJFR\n","filename":"test\/jdk\/jdk\/jfr\/event\/oldobject\/TestReferenceChainLimit.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -37,1 +37,1 @@\n- * @requires vm.hasJFRLeakProf\n+ * @requires vm.hasJFR\n","filename":"test\/jdk\/jdk\/jfr\/event\/oldobject\/TestSanityDefault.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -38,1 +38,1 @@\n- * @requires vm.hasJFRLeakProf\n+ * @requires vm.hasJFR\n","filename":"test\/jdk\/jdk\/jfr\/event\/oldobject\/TestSerial.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -38,2 +38,1 @@\n- * @ignore \/\/ Leak profiler does not work with Shenandoah\n- * @requires vm.hasJFRLeakProf\n+ * @requires vm.hasJFR & vm.gc.Shenandoah\n","filename":"test\/jdk\/jdk\/jfr\/event\/oldobject\/TestShenandoah.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -38,1 +38,1 @@\n- * @requires vm.hasJFRLeakProf\n+ * @requires vm.hasJFR\n","filename":"test\/jdk\/jdk\/jfr\/event\/oldobject\/TestThreadLocalLeak.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -37,1 +37,1 @@\n- * @requires vm.hasJFRLeakProf & vm.gc.Z\n+ * @requires vm.hasJFR & vm.gc.Z\n","filename":"test\/jdk\/jdk\/jfr\/event\/oldobject\/TestZ.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -45,1 +45,1 @@\n- * @requires vm.hasJFRLeakProf\n+ * @requires vm.hasJFR\n","filename":"test\/jdk\/jdk\/jfr\/jcmd\/TestJcmdDump.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -45,1 +45,1 @@\n- * @requires vm.hasJFRLeakProf\n+ * @requires vm.hasJFR\n","filename":"test\/jdk\/jdk\/jfr\/jcmd\/TestJcmdDumpPathToGCRoots.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -36,1 +36,1 @@\n- * @requires vm.hasJFRLeakProf\n+ * @requires vm.hasJFR\n","filename":"test\/jdk\/jdk\/jfr\/jcmd\/TestJcmdStartPathToGCRoots.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -47,1 +47,1 @@\n- * @requires vm.hasJFRLeakProf\n+ * @requires vm.hasJFR\n","filename":"test\/jdk\/jdk\/jfr\/jvm\/TestWaste.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -38,1 +38,1 @@\n- * @requires vm.hasJFRLeakProf\n+ * @requires vm.hasJFR\n","filename":"test\/jdk\/jdk\/jfr\/startupargs\/TestOldObjectQueueSize.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -116,1 +116,0 @@\n-        map.put(\"vm.hasJFRLeakProf\", this::vmHasJFRLeakProf);\n@@ -398,7 +397,0 @@\n-    \/**\n-     * @return \"true\" if the VM supports JFR Leak Profiler.\n-     *\/\n-    protected String vmHasJFRLeakProf() {\n-        return \"\" + WB.isJFRLeakProfSupported();\n-    }\n-\n","filename":"test\/jtreg-ext\/requires\/VMProps.java","additions":0,"deletions":8,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -745,1 +745,0 @@\n-  public native boolean isJFRLeakProfSupported();\n","filename":"test\/lib\/jdk\/test\/whitebox\/WhiteBox.java","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"}]}