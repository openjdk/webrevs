{"files":[{"patch":"@@ -43,1 +43,1 @@\n-import java.util.ArrayList;\n+import java.util.LinkedList;\n@@ -49,0 +49,1 @@\n+    static String test_method_name = \"test\";\n@@ -55,1 +56,0 @@\n-    \/\/\n@@ -59,1 +59,0 @@\n-    \/\/\n@@ -63,1 +62,0 @@\n-    \/\/\n@@ -68,1 +66,0 @@\n-    \/\/\n@@ -73,1 +70,0 @@\n-    \/\/\n@@ -81,1 +77,1 @@\n-    \/\/     public static void test99() {\n+    \/\/     public static void test100() {\n@@ -86,2 +82,0 @@\n-    \/\/\n-    \/\/         ...\n@@ -98,3 +92,3 @@\n-        ArrayList<String> methods = new ArrayList<String>();\n-        for (int i = min; i < max; i++) {\n-            String inner = \"\";\n+        LinkedList<String> acc = new LinkedList<String>();\n+        for (int i = min; i <= max; i++) {\n+            LinkedList<String> method = new LinkedList<String>();\n@@ -102,4 +96,3 @@\n-                inner = String.format(\"\"\"\n-                          synchronized (%s.class) {\n-                  %s\n-                          }\"\"\", test_class_name, inner);\n+                method.addFirst(String.format(\n+                    \"        synchronized (%s.class) {\", test_class_name));\n+                method.addLast(\"        }\");\n@@ -107,5 +100,4 @@\n-            methods.add(String.format(\"\"\"\n-                  public static void test%d() {\n-              %s\n-                  }\n-              \"\"\", i, inner));\n+            method.addFirst(String.format(\n+                \"    public static void %s%d() {\", test_method_name, i));\n+            method.addLast(\"    }\");\n+            acc.addAll(method);\n@@ -113,6 +105,3 @@\n-        String methods_string = String.join(\"\\n\\n\", methods);\n-        String test_program = String.format(\"\"\"\n-                public class %s {\n-                %s\n-                }\"\"\", test_class_name, methods_string);\n-        return test_program;\n+        acc.addFirst(String.format(\"public class %s {\", test_class_name));\n+        acc.addLast(\"}\");\n+        return String.join(\"\\n\", acc);\n@@ -123,1 +112,1 @@\n-        comp.addJavaSourceCode(\"Test\", generate_test());\n+        comp.addJavaSourceCode(test_class_name, generate_test());\n@@ -125,2 +114,2 @@\n-        for (int i = min; i < max; ++i) {\n-            comp.invoke(\"Test\", \"test\" + i, new Object[] {});\n+        for (int i = min; i <= max; i++) {\n+            comp.invoke(test_class_name, test_method_name + i, new Object[] {});\n","filename":"test\/hotspot\/jtreg\/compiler\/locks\/TestNestedSynchronize.java","additions":19,"deletions":30,"binary":false,"changes":49,"status":"modified"}]}