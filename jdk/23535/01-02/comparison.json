{"files":[{"patch":"@@ -596,1 +596,1 @@\n-      \/\/ Temps: Z_ARG3, Z_ARG4, Z_ARG5, Z_tmp_1, Z_tmp_2\n+      \/\/ Temps: Z_ARG3, Z_ARG4, Z_ARG5, Z_R10, Z_R11\n@@ -601,1 +601,1 @@\n-      Register temp0 = Z_ARG4, temp1 = Z_ARG5, temp2 = Z_tmp_1, temp3 = Z_tmp_2;\n+      Register temp0 = Z_ARG4, temp1 = Z_ARG5, temp2 = Z_R10, temp3 = Z_R11;\n@@ -638,4 +638,5 @@\n-      int i = 0;\n-      __ z_stg(Z_tmp_1, (i++)*BytesPerWord + frame::z_abi_160_size, Z_SP);\n-      __ z_stg(Z_tmp_2, (i++)*BytesPerWord + frame::z_abi_160_size, Z_SP);\n-      assert(i*BytesPerWord + frame::z_abi_160_size == frame_size, \"check\");\n+\n+      \/\/ Z_R10 and Z_R11 are call saved, so we must push them before any use\n+      __ z_stg(temp2 \/*Z_R10*\/, 0*BytesPerWord + frame::z_abi_160_size, Z_SP);\n+      __ z_stg(temp3 \/*Z_R11*\/, 1*BytesPerWord + frame::z_abi_160_size, Z_SP);\n+      assert(2*BytesPerWord + frame::z_abi_160_size == frame_size, \"check\");\n@@ -652,4 +653,3 @@\n-      i = 0;\n-      __ z_lg(Z_tmp_1, (i++)*BytesPerWord + frame::z_abi_160_size, Z_SP);\n-      __ z_lg(Z_tmp_2, (i++)*BytesPerWord + frame::z_abi_160_size, Z_SP);\n-      assert(i*BytesPerWord + frame::z_abi_160_size == frame_size, \"check\");\n+      __ z_lg(temp2 \/*Z_R10*\/, 0*BytesPerWord + frame::z_abi_160_size, Z_SP);\n+      __ z_lg(temp3 \/*Z_R11*\/, 1*BytesPerWord + frame::z_abi_160_size, Z_SP);\n+      assert(2*BytesPerWord + frame::z_abi_160_size == frame_size, \"check\");\n","filename":"src\/hotspot\/cpu\/s390\/c1_Runtime1_s390.cpp","additions":10,"deletions":10,"binary":false,"changes":20,"status":"modified"}]}