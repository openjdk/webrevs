{"files":[{"patch":"@@ -1922,3 +1922,2 @@\n-    const TypeVect* mask_vt = mask->bottom_type()->isa_vect();\n-    if (mask_vt == nullptr) {\n-      \/\/ Skip optimization if mask type is not a vector (e.g., Type::TOP for dead code).\n+    \/\/ Skip the optimization if the mask is dead.\n+    if (phase->type(mask) == Type::TOP) {\n@@ -1927,1 +1926,6 @@\n-    assert(!Matcher::mask_op_prefers_predicate(Opcode(), mask_vt), \"sanity\");\n+    \/\/ If the ideal graph is transformed correctly, the input mask should be a\n+    \/\/ vector type node. Following optimization can ignore the mismatched type\n+    \/\/ issue. But we still keep the sanity check for the mask type by using\n+    \/\/ \"is_vect()\" in the assertion below, so that there can be less optimizations\n+    \/\/ evolved before the compiler finally runs into a problem.\n+    assert(!Matcher::mask_op_prefers_predicate(Opcode(), mask->bottom_type()->is_vect()), \"sanity\");\n","filename":"src\/hotspot\/share\/opto\/vectornode.cpp","additions":8,"deletions":4,"binary":false,"changes":12,"status":"modified"}]}