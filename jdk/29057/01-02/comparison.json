{"files":[{"patch":"@@ -172,0 +172,4 @@\n+  if (gvn().type(unbox)->isa_vect() == nullptr) {\n+    assert(gvn().type(unbox) == Type::TOP, \"sanity\");\n+    return nullptr; \/\/ not a vector\n+  }\n@@ -625,2 +629,1 @@\n-  const TypeVect* mask_vt = TypeVect::makemask(elem_bt, num_elem);\n-  if (!Matcher::mask_op_prefers_predicate(mopc, mask_vt)) {\n+  if (!Matcher::mask_op_prefers_predicate(mopc, mask_vec->bottom_type()->is_vect())) {\n@@ -2549,2 +2552,1 @@\n-      const TypeVect* mask_vt = TypeVect::makemask(elem_bt, num_elem);\n-      if (!Matcher::mask_op_prefers_predicate(Op_VectorMaskToLong, mask_vt)) {\n+      if (!Matcher::mask_op_prefers_predicate(Op_VectorMaskToLong, opd->bottom_type()->is_vect())) {\n","filename":"src\/hotspot\/share\/opto\/vectorIntrinsics.cpp","additions":6,"deletions":4,"binary":false,"changes":10,"status":"modified"}]}