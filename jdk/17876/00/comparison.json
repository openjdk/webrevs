{"files":[{"patch":"@@ -5002,4 +5002,8 @@\n-        chk.checkProcessorType(processor, processorType, env);\n-        Type processMethodType = getProcessMethodType(tree, processorType);\n-        tree.processMethodType = processMethodType;\n-        Type resultType = processMethodType.getReturnType();\n+        Type resultType;\n+        if (chk.checkProcessorType(processor)) {\n+            Type processMethodType = getProcessMethodType(tree, processorType);\n+            tree.processMethodType = processMethodType;\n+            resultType = processMethodType.getReturnType();\n+        } else {\n+            tree.processMethodType = resultType = types.createErrorType(processorType);\n+        }\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/comp\/Attr.java","additions":8,"deletions":4,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -4478,1 +4478,1 @@\n-    public Type checkProcessorType(JCExpression processor, Type resultType, Env<AttrContext> env) {\n+    public boolean checkProcessorType(JCExpression processor) {\n@@ -4482,9 +4482,1 @@\n-        if (interfaceType != null) {\n-            List<Type> typeArguments = interfaceType.getTypeArguments();\n-\n-            if (typeArguments.size() == 2) {\n-                resultType = typeArguments.head;\n-            } else {\n-                resultType = syms.objectType;\n-            }\n-        } else {\n+        if (interfaceType == null)  {\n@@ -4493,0 +4485,1 @@\n+            return false;\n@@ -4495,1 +4488,1 @@\n-        return resultType;\n+        return true;\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/comp\/Check.java","additions":4,"deletions":11,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -973,0 +973,7 @@\n+\n+    @Test\n+    public void testStringTemplateNotProcessor() {\n+        test(false, new String[]{\"--enable-preview\"},\n+                a -> assertCommandOutputContains(a, \"new Object().\\\"\\\"\", \"not a processor type\")\n+        );\n+    }\n","filename":"test\/langtools\/jdk\/jshell\/ToolSimpleTest.java","additions":7,"deletions":0,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -25,2 +25,0 @@\n- \/\/ key: compiler.err.cant.resolve.location.args\n- \/\/ key: compiler.misc.location\n","filename":"test\/langtools\/tools\/javac\/diags\/examples\/StringTemplateNotProcessor.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"}]}