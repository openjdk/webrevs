{"files":[{"patch":"@@ -2896,1 +2896,1 @@\n-    if (!thread->sleep_nanos(nanos)) { \/\/ interrupted\n+    if (!thread->sleep_nanos(nanos)) { \/\/ interrupted or async exception was installed\n@@ -2901,4 +2901,5 @@\n-\n-        \/\/ TODO-FIXME: THROW_MSG returns which means we will not call set_state()\n-        \/\/ to properly restore the thread state.  That's likely wrong.\n-        THROW_MSG(vmSymbols::java_lang_InterruptedException(), \"sleep interrupted\");\n+        if (!has_async_exception_condition()) {\n+          \/\/ TODO-FIXME: THROW_MSG returns which means we will not call set_state()\n+          \/\/ to properly restore the thread state.  That's likely wrong.\n+          THROW_MSG(vmSymbols::java_lang_InterruptedException(), \"sleep interrupted\");\n+        }\n","filename":"src\/hotspot\/share\/prims\/jvm.cpp","additions":6,"deletions":5,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -2100,1 +2100,1 @@\n-\/\/ if the thread was interrupted.\n+\/\/ if the thread was interrupted or async exception was installed.\n","filename":"src\/hotspot\/share\/runtime\/javaThread.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}