{"files":[{"patch":"@@ -107,2 +107,2 @@\n-        this.classLoaderWithRepository = new ClassLoaderWithRepository(repository, dcl);\n-        this.defaultContextClassLoader = new CombinedClassLoader(Thread.currentThread().getContextClassLoader(), dcl);\n+        classLoaderWithRepository = new ClassLoaderWithRepository(repository, dcl);\n+        defaultContextClassLoader = new CombinedClassLoader(Thread.currentThread().getContextClassLoader(), dcl);\n@@ -1231,1 +1231,12 @@\n-                return Subject.callAs(subject, () -> getServerNotifFwd().fetchNotifs(clientSequenceNumber, timeout, maxNotifications));\n+                try {\n+                    return Subject.callAs(subject, () -> getServerNotifFwd().fetchNotifs(clientSequenceNumber, timeout, maxNotifications));\n+                } catch (CompletionException ce) {\n+                    Throwable thr = ce.getCause();\n+                    if (thr instanceof SecurityException se) {\n+                        throw se;\n+                    } else if (thr instanceof IOException ioe) {\n+                        throw ioe;\n+                    } else {\n+                        throw new RuntimeException(thr);\n+                    }\n+                }\n@@ -1311,5 +1322,7 @@\n-                    Throwable e = ce.getCause();\n-                    if (e instanceof SecurityException) {\n-                        throw (SecurityException) e;\n-                    } else if (e instanceof Exception) {\n-                        throw new PrivilegedActionException((Exception) e);\n+                    Throwable thr = ce.getCause();\n+                    if (thr instanceof SecurityException se) {\n+                        throw se;\n+                    } else if (thr instanceof IOException ioe) {\n+                        throw ioe;\n+                    } else if (thr instanceof Exception e1) {\n+                        throw new PrivilegedActionException(e1);\n@@ -1317,1 +1330,1 @@\n-                        throw new RuntimeException(e);\n+                        throw new RuntimeException(thr);\n@@ -1477,1 +1490,10 @@\n-                    return Subject.callAs(subject, () -> wrappedClass.cast(mo.get()));\n+                    try {\n+                        return Subject.callAs(subject, () -> wrappedClass.cast(mo.get()));\n+                    } catch (CompletionException ce) {\n+                        Throwable thr = ce.getCause();\n+                        if (thr instanceof Exception e) {\n+                            throw e;\n+                        } else {\n+                            throw new RuntimeException(thr);\n+                        }\n+                    }\n","filename":"src\/java.management.rmi\/share\/classes\/javax\/management\/remote\/rmi\/RMIConnectionImpl.java","additions":32,"deletions":10,"binary":false,"changes":42,"status":"modified"}]}