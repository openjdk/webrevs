{"files":[{"patch":"@@ -472,7 +472,4 @@\n-        String[] protocols = sslParams.getProtocols();\n-        if (protocols == null) {\n-            protocols = sslContext.getDefaultSSLParameters().getProtocols();\n-        }\n-        if (protocols == null) {\n-            \/\/ getDefaultSSLParameters.getProtocols should not return null\n-            protocols = new String[0];\n+        String[] sslProtocols = sslParams.getProtocols();\n+        if (sslProtocols == null) {\n+            sslProtocols = requireNonNullElseGet(sslContext.getDefaultSSLParameters().getProtocols(),\n+                    () -> new String[0]);\n@@ -481,1 +478,1 @@\n-        hasRequiredH3TLS = Arrays.asList(protocols).contains(\"TLSv1.3\");\n+        hasRequiredH3TLS = Arrays.asList(sslProtocols).contains(\"TLSv1.3\");\n@@ -483,1 +480,1 @@\n-        hasRequiredH2TLS = hasRequiredH3TLS || Arrays.asList(protocols).contains(\"TLSv1.2\");\n+        hasRequiredH2TLS = hasRequiredH3TLS || Arrays.asList(sslProtocols).contains(\"TLSv1.2\");\n","filename":"src\/java.net.http\/share\/classes\/jdk\/internal\/net\/http\/HttpClientImpl.java","additions":6,"deletions":9,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -123,1 +123,2 @@\n-    private void runTest(SSLContext context, Version version, String expectedProtocol, boolean setParams) throws Exception {\n+    private void runTest(SSLContext context, Version version, String expectedProtocol,\n+                         boolean setEmptyParams) throws Exception {\n@@ -131,1 +132,1 @@\n-        if (setParams) {\n+        if (setEmptyParams) {\n","filename":"test\/jdk\/java\/net\/httpclient\/TlsContextTest.java","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"}]}