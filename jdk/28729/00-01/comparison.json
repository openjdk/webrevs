{"files":[{"patch":"@@ -94,10 +94,5 @@\n-     * The ranges of {@code slot} and {@code constant} are restricted by the\n-     * {@code op} and its {@linkplain Opcode#sizeIfFixed() size}:\n-     * <ul>\n-     * <li>If {@code op} has size 3, {@code slot} must be {@link\n-     *     java.lang.classfile##u1 u1} and {@code constant} must be within\n-     *     {@code [-128, 127]}.\n-     * <li>If {@code op} has size 6, {@code slot} must be {@link\n-     *     java.lang.classfile##u2 u2} and {@code constant} must be within\n-     *     {@code [-32768, 32767]}.\n-     * <\/ul>\n+     * {@code slot} must be {@link java.lang.classfile##u1 u1} and\n+     * {@code constant} must be within {@code [-128, 127]} for\n+     * {@link Opcode#IINC iinc}, or {@code slot} must be\n+     * {@link java.lang.classfile##u2 u2} and {@code constant} must be\n+     * within {@code [-32768, 32767]} for {@link Opcode#IINC_W wide iinc}.\n@@ -118,0 +113,1 @@\n+     * @since 27\n","filename":"src\/java.base\/share\/classes\/java\/lang\/classfile\/instruction\/IncrementInstruction.java","additions":6,"deletions":10,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -454,3 +454,1 @@\n-        boolean requiresWide = validateAndIsWideIinc(slot, constant);\n-        int size = opcode.sizeIfFixed();\n-        if ((size == 3 && requiresWide)) {\n+        if (validateAndIsWideIinc(slot, constant) && opcode != Opcode.IINC_W) {\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/classfile\/impl\/BytecodeHelpers.java","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -255,11 +255,0 @@\n-        for (int i : new int[] {Short.MIN_VALUE - 1, Short.MAX_VALUE + 1}) {\n-            assertThrows(IllegalArgumentException.class, () -> IncrementInstruction.of(0, i));\n-            TestUtil.runCodeHandler(cob -> {\n-                assertThrows(IllegalArgumentException.class, () -> cob.iinc(0, i));\n-                cob.return_();\n-            });\n-        }\n-    }\n-\n-    @Test\n-    void testExplicitIincConstant() {\n@@ -269,1 +258,0 @@\n-\n@@ -274,0 +262,7 @@\n+        for (int i : new int[] {Short.MIN_VALUE - 1, Short.MAX_VALUE + 1}) {\n+            assertThrows(IllegalArgumentException.class, () -> IncrementInstruction.of(0, i));\n+            TestUtil.runCodeHandler(cob -> {\n+                assertThrows(IllegalArgumentException.class, () -> cob.iinc(0, i));\n+                cob.return_();\n+            });\n+        }\n","filename":"test\/jdk\/jdk\/classfile\/InstructionValidationTest.java","additions":7,"deletions":12,"binary":false,"changes":19,"status":"modified"}]}