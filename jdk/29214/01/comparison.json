{"files":[{"patch":"@@ -72,3 +72,7 @@\n-  UTIL_ARG_WITH(NAME: native-debug-symbols-level, TYPE: string,\n-    DEFAULT: \"\",\n-    RESULT: DEBUG_SYMBOLS_LEVEL,\n+  UTIL_ARG_WITH(NAME: native-debug-symbols-level, TYPE: literal,\n+    DEFAULT: 2, VALID_VALUES: [1 2 3],\n+    CHECK_AVAILABLE: [\n+      if test x$TOOLCHAIN_TYPE = xmicrosoft; then\n+        AVAILABLE=false\n+      fi\n+    ],\n@@ -76,12 +80,7 @@\n-    DEFAULT_DESC: [toolchain default])\n-  AC_SUBST(DEBUG_SYMBOLS_LEVEL)\n-\n-  if test \"x${TOOLCHAIN_TYPE}\" = xgcc || \\\n-     test \"x${TOOLCHAIN_TYPE}\" = xclang; then\n-    DEBUG_SYMBOLS_LEVEL_FLAGS=\"-g\"\n-    if test \"x${DEBUG_SYMBOLS_LEVEL}\" != \"x\"; then\n-      DEBUG_SYMBOLS_LEVEL_FLAGS=\"-g${DEBUG_SYMBOLS_LEVEL}\"\n-      FLAGS_COMPILER_CHECK_ARGUMENTS(ARGUMENT: [${DEBUG_SYMBOLS_LEVEL_FLAGS}],\n-          IF_FALSE: AC_MSG_ERROR(\"Debug info level ${DEBUG_SYMBOLS_LEVEL} is not supported\"))\n-    fi\n-  fi\n+    DEFAULT_DESC: [toolchain default],\n+    IF_GIVEN: [\n+      NATIVE_DEBUG_SYMBOLS_LEVEL=\"-g${NATIVE_DEBUG_SYMBOLS_LEVEL}\"\n+    ],\n+    IF_NOT_GIVEN: [\n+      NATIVE_DEBUG_SYMBOLS_LEVEL=\"\"\n+    ])\n@@ -114,1 +113,1 @@\n-    CFLAGS_DEBUG_SYMBOLS=\"-gdwarf-4 ${DEBUG_SYMBOLS_LEVEL_FLAGS}\"\n+    CFLAGS_DEBUG_SYMBOLS=\"-gdwarf-4 ${NATIVE_DEBUG_SYMBOLS_LEVEL}\"\n@@ -135,1 +134,1 @@\n-    CFLAGS_DEBUG_SYMBOLS=\"${GDWARF_FLAGS} ${DEBUG_SYMBOLS_LEVEL_FLAGS}\"\n+    CFLAGS_DEBUG_SYMBOLS=\"${GDWARF_FLAGS} ${NATIVE_DEBUG_SYMBOLS_LEVEL}\"\n","filename":"make\/autoconf\/flags-cflags.m4","additions":16,"deletions":17,"binary":false,"changes":33,"status":"modified"}]}