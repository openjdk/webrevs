{"files":[{"patch":"@@ -313,1 +313,1 @@\n-      msvc-toolset-version: '14.43'\n+      msvc-toolset-version: '14.44'\n@@ -325,1 +325,1 @@\n-      msvc-toolset-version: '14.43'\n+      msvc-toolset-version: '14.44'\n","filename":".github\/workflows\/main.yml","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -80,0 +80,3 @@\n+<li><a href=\"#initializing-variables-with-static-storage-duration\"\n+id=\"toc-initializing-variables-with-static-storage-duration\">Initializing\n+variables with static storage duration<\/a><\/li>\n@@ -87,0 +90,1 @@\n+<li><a href=\"#noexcept\" id=\"toc-noexcept\">noexcept<\/a><\/li>\n@@ -794,0 +798,27 @@\n+<h3\n+id=\"initializing-variables-with-static-storage-duration\">Initializing\n+variables with static storage duration<\/h3>\n+<p>Variables with static storage duration and <em>dynamic\n+initialization<\/em> <a\n+href=\"https:\/\/www.open-std.org\/jtc1\/sc22\/wg21\/docs\/papers\/2014\/n4296.pdf\">C++14\n+3.6.2<\/a>). should be avoided, unless an implementation is permitted to\n+perform the initialization as a static initialization. The order in\n+which dynamic initializations occur is incompletely specified.\n+Initialization order problems can be difficult to deal with and lead to\n+surprises.<\/p>\n+<p>Variables with static storage duration and non-trivial destructors\n+should be avoided. HotSpot doesn't generally try to cleanup on exit, and\n+running destructors at exit can lead to problems.<\/p>\n+<p>Some of the approaches used in HotSpot to avoid dynamic\n+initialization include:<\/p>\n+<ul>\n+<li><p>Use the <code>Deferred&lt;T&gt;<\/code> class template. Add a call\n+to its initialization function at an appropriate place during VM\n+initialization. The underlying object is never destroyed.<\/p><\/li>\n+<li><p>For objects of class type, use a variable whose value is a\n+pointer to the class, initialized to <code>nullptr<\/code>. Provide an\n+initialization function that sets the variable to a dynamically\n+allocated object. Add a call to that function at an appropriate place\n+during VM initialization. Such objects are usually never\n+destroyed.<\/p><\/li>\n+<\/ul>\n@@ -1113,0 +1144,52 @@\n+<h3 id=\"noexcept\">noexcept<\/h3>\n+<p>Use of <code>noexcept<\/code> exception specifications (<a\n+href=\"http:\/\/wg21.link\/n3050\">n3050<\/a>) are permitted with restrictions\n+described below.<\/p>\n+<ul>\n+<li>Only the argument-less form of <code>noexcept<\/code> exception\n+specifications are permitted.<\/li>\n+<li>Allocation functions that may return <code>nullptr<\/code> to\n+indicate allocation failure must be declared <code>noexcept<\/code>.<\/li>\n+<li>All other uses of <code>noexcept<\/code> exception specifications are\n+forbidden.<\/li>\n+<li><code>noexcept<\/code> expressions are forbidden.<\/li>\n+<li>Dynamic exception specifications are forbidden.<\/li>\n+<\/ul>\n+<p>HotSpot is built with exceptions disabled, e.g. compile with\n+<code>-fno-exceptions<\/code> (gcc, clang) or no <code>\/EH<\/code> option\n+(MSVC++). So why do we need to consider <code>noexcept<\/code> at all?\n+It's because <code>noexcept<\/code> exception specifications serve two\n+distinct purposes.<\/p>\n+<p>The first is to allow the compiler to avoid generating code or data\n+in support of exceptions being thrown by a function. But this is\n+unnecessary, because exceptions are disabled.<\/p>\n+<p>The second is to allow the compiler and library code to choose\n+different algorithms, depending on whether some function may throw\n+exceptions. This is only relevant to a certain set of functions.<\/p>\n+<ul>\n+<li><p>Some allocation functions (<code>operator new<\/code> and\n+<code>operator new[]<\/code>) return <code>nullptr<\/code> to indicate\n+allocation failure. If a <code>new<\/code> expression calls such an\n+allocation function, it must check for and handle that possibility.\n+Declaring such a function <code>noexcept<\/code> informs the compiler\n+that <code>nullptr<\/code> is a possible result. If an allocation\n+function is not declared <code>noexcept<\/code> then the compiler may\n+elide that checking and handling for a <code>new<\/code> expression\n+calling that function.<\/p><\/li>\n+<li><p>Certain Standard Library facilities (notably containers) provide\n+different guarantees for some operations (and may choose different\n+algorithms to implement those operations), depending on whether certain\n+functions (constructors, copy\/move operations, swap) are nothrow or not.\n+They detect this using type traits that test whether a function is\n+declared <code>noexcept<\/code>. This can have a significant performance\n+impact if, for example, copying is chosen over a potentially throwing\n+move. But this isn't relevant, since HotSpot forbids the use of most\n+Standard Library facilities.<\/p><\/li>\n+<\/ul>\n+<p>HotSpot code can assume no exceptions will ever be thrown, even from\n+functions not declared <code>noexcept<\/code>. So HotSpot code doesn't\n+ever need to check, either with conditional exception specifications or\n+with <code>noexcept<\/code> expressions.<\/p>\n+<p>Dynamic exception specifications were deprecated in C++11. C++17\n+removed all but <code>throw()<\/code>, with that remaining a deprecated\n+equivalent to <code>noexcept<\/code>.<\/p>\n@@ -1201,6 +1284,0 @@\n-<li><p>Avoid non-local variables with non-constexpr initialization. In\n-particular, avoid variables with types requiring non-trivial\n-initialization or destruction. Initialization order problems can be\n-difficult to deal with and lead to surprises, as can destruction\n-ordering. HotSpot doesn't generally try to cleanup on exit, and running\n-destructors at exit can also lead to problems.<\/p><\/li>\n","filename":"doc\/hotspot-style.html","additions":83,"deletions":6,"binary":false,"changes":89,"status":"modified"},{"patch":"@@ -773,0 +773,26 @@\n+### Initializing variables with static storage duration\n+\n+Variables with static storage duration and _dynamic initialization_\n+[C++14 3.6.2](https:\/\/www.open-std.org\/jtc1\/sc22\/wg21\/docs\/papers\/2014\/n4296.pdf)).\n+should be avoided, unless an implementation is permitted to perform the\n+initialization as a static initialization. The order in which dynamic\n+initializations occur is incompletely specified.  Initialization order\n+problems can be difficult to deal with and lead to surprises.\n+\n+Variables with static storage duration and non-trivial destructors should be\n+avoided. HotSpot doesn't generally try to cleanup on exit, and running\n+destructors at exit can lead to problems.\n+\n+Some of the approaches used in HotSpot to avoid dynamic initialization\n+include:\n+\n+* Use the `Deferred<T>` class template. Add a call to its initialization\n+function at an appropriate place during VM initialization. The underlying\n+object is never destroyed.\n+\n+* For objects of class type, use a variable whose value is a pointer to the\n+class, initialized to `nullptr`. Provide an initialization function that sets\n+the variable to a dynamically allocated object. Add a call to that function at\n+an appropriate place during VM initialization. Such objects are usually never\n+destroyed.\n+\n@@ -1107,0 +1133,51 @@\n+### noexcept\n+\n+Use of `noexcept` exception specifications\n+([n3050](http:\/\/wg21.link\/n3050))\n+are permitted with restrictions described below.\n+\n+* Only the argument-less form of `noexcept` exception specifications are\n+permitted.\n+* Allocation functions that may return `nullptr` to indicate allocation\n+failure must be declared `noexcept`.\n+* All other uses of `noexcept` exception specifications are forbidden.\n+* `noexcept` expressions are forbidden.\n+* Dynamic exception specifications are forbidden.\n+\n+HotSpot is built with exceptions disabled, e.g. compile with `-fno-exceptions`\n+(gcc, clang) or no `\/EH` option (MSVC++). So why do we need to consider\n+`noexcept` at all? It's because `noexcept` exception specifications serve two\n+distinct purposes.\n+\n+The first is to allow the compiler to avoid generating code or data in support\n+of exceptions being thrown by a function. But this is unnecessary, because\n+exceptions are disabled.\n+\n+The second is to allow the compiler and library code to choose different\n+algorithms, depending on whether some function may throw exceptions. This is\n+only relevant to a certain set of functions.\n+\n+* Some allocation functions (`operator new` and `operator new[]`) return\n+`nullptr` to indicate allocation failure. If a `new` expression calls such an\n+allocation function, it must check for and handle that possibility. Declaring\n+such a function `noexcept` informs the compiler that `nullptr` is a possible\n+result. If an allocation function is not declared `noexcept` then the compiler\n+may elide that checking and handling for a `new` expression calling that\n+function.\n+\n+* Certain Standard Library facilities (notably containers) provide different\n+guarantees for some operations (and may choose different algorithms to\n+implement those operations), depending on whether certain functions\n+(constructors, copy\/move operations, swap) are nothrow or not. They detect\n+this using type traits that test whether a function is declared `noexcept`.\n+This can have a significant performance impact if, for example, copying is\n+chosen over a potentially throwing move. But this isn't relevant, since\n+HotSpot forbids the use of most Standard Library facilities.\n+\n+HotSpot code can assume no exceptions will ever be thrown, even from functions\n+not declared `noexcept`. So HotSpot code doesn't ever need to check, either\n+with conditional exception specifications or with `noexcept` expressions.\n+\n+Dynamic exception specifications were deprecated in C++11. C++17 removed all\n+but `throw()`, with that remaining a deprecated equivalent to `noexcept`.\n+\n@@ -1202,7 +1279,0 @@\n-* Avoid non-local variables with non-constexpr initialization.\n-In particular, avoid variables with types requiring non-trivial\n-initialization or destruction.  Initialization order problems can be\n-difficult to deal with and lead to surprises, as can destruction\n-ordering.  HotSpot doesn't generally try to cleanup on exit, and\n-running destructors at exit can also lead to problems.\n-\n","filename":"doc\/hotspot-style.md","additions":77,"deletions":7,"binary":false,"changes":84,"status":"modified"},{"patch":"@@ -70,0 +70,2 @@\n+    \/\/ A lot of libjsig related tests fail because of the link order check; so better avoid it\n+    \"verify_asan_link_order=0,\"\n","filename":"make\/data\/asan\/asan_default_options.c","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -67,0 +67,24 @@\n+\n+# Detect host architecture to determine devkit platform support\n+# Note: The devkit always includes x86, x64, and aarch64 libraries and tools\n+# The difference is in toolchain capabilities:\n+# - On x64|AMD64 hosts: aarch64 tools are cross-compilation tools (Hostx64\/arm64)\n+# - On aarch64|ARMv8 hosts: aarch64 tools are native tools (Hostarm64\/arm64)\n+HOST_ARCH=`echo $PROCESSOR_IDENTIFIER`\n+case $HOST_ARCH in\n+    AMD64)\n+        echo \"Running on x64 host - generating devkit with native x86\/x64 tools and cross-compiled aarch64 tools.\"\n+        echo \"For native aarch64 compilation tools, run this script on a Windows\/aarch64 machine.\"\n+        SUPPORTED_PLATFORMS=\"x86, x64 (native) and aarch64 (cross-compiled)\"\n+        ;;\n+    ARMv8)\n+        echo \"Running on aarch64 host - generating devkit with native tools for all platforms (x86, x64, aarch64).\"\n+        SUPPORTED_PLATFORMS=\"x86, x64, and aarch64 (all native)\"\n+        ;;\n+    *)\n+        echo \"Unknown host architecture: $HOST_ARCH\"\n+        echo \"Proceeding with devkit generation - toolchain capabilities may vary.\"\n+        SUPPORTED_PLATFORMS=\"x86, x64, and aarch64\"\n+        ;;\n+esac\n+\n@@ -142,0 +166,1 @@\n+echo \"Platform support: $SUPPORTED_PLATFORMS\"\n@@ -159,1 +184,5 @@\n-cp -r \"$VS_INSTALL_DIR\/${VC_SUBDIR}\/bin\/Hostx64\/arm64\" $DEVKIT_ROOT\/VC\/bin\/\n+if [ -d \"$VS_INSTALL_DIR\/${VC_SUBDIR}\/bin\/Hostarm64\/arm64\" ]; then\n+    cp -r \"$VS_INSTALL_DIR\/${VC_SUBDIR}\/bin\/Hostarm64\/arm64\" $DEVKIT_ROOT\/VC\/bin\/\n+else\n+    cp -r \"$VS_INSTALL_DIR\/${VC_SUBDIR}\/bin\/Hostx64\/arm64\" $DEVKIT_ROOT\/VC\/bin\/\n+fi\n","filename":"make\/devkit\/createWindowsDevkit.sh","additions":30,"deletions":1,"binary":false,"changes":31,"status":"modified"},{"patch":"@@ -459,5 +459,5 @@\n-SliderDemo.majorticks=Grobteilungen\n-SliderDemo.majorticksdescription=Ein Schieberegler mit Grobteilungsmarkierungen\n-SliderDemo.ticks=Feinteilungen, Teilungen zum Einrasten und Labels\n-SliderDemo.minorticks=Feinteilungen\n-SliderDemo.minorticksdescription=Ein Schieberegler mit Grob- und Feinteilungen, mit Teilungen, in die der Schieberegler einrastet, wobei einige Teilungen mit einem sichtbaren Label versehen sind\n+SliderDemo.majorticks=Hauptteilstriche\n+SliderDemo.majorticksdescription=Ein Schieberegler mit Hauptteilstrichen\n+SliderDemo.ticks=Hilfsteilstriche, zum Einrasten und Beschriften\n+SliderDemo.minorticks=Hilfsteilstriche\n+SliderDemo.minorticksdescription=Ein Schieberegler mit Haupt- und Hilfsteilstrichen, in die der Schieberegler einrastet, wobei einige Teilstriche mit einer sichtbaren Beschriftung versehen sind\n@@ -465,1 +465,1 @@\n-SliderDemo.disableddescription=Ein Schieberegler mit Grob- und Feinteilungen, der nicht aktiviert ist (kann nicht bearbeitet werden)\n+SliderDemo.disableddescription=Ein Schieberegler mit Haupt- und Hilfsteilstrichen, der nicht aktiviert ist (kann nicht bearbeitet werden)\n","filename":"src\/demo\/share\/jfc\/SwingSet2\/resources\/swingset_de.properties","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -1768,4 +1768,0 @@\n-  \/\/ insert a nop at the start of the prolog so we can patch in a\n-  \/\/ branch if we need to invalidate the method later\n-  __ nop();\n-\n","filename":"src\/hotspot\/cpu\/aarch64\/aarch64.ad","additions":0,"deletions":4,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1139,0 +1139,4 @@\n+  void sb() {\n+    system(0b00, 0b011, 0b00011, 0b0000, 0b111);\n+  }\n+\n","filename":"src\/hotspot\/cpu\/aarch64\/assembler_aarch64.hpp","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -46,5 +46,5 @@\n-define_pd_global(intx, InitialCodeCacheSize,         160*K);\n-define_pd_global(intx, ReservedCodeCacheSize,        32*M );\n-define_pd_global(intx, NonProfiledCodeHeapSize,      13*M );\n-define_pd_global(intx, ProfiledCodeHeapSize,         14*M );\n-define_pd_global(intx, NonNMethodCodeHeapSize,       5*M  );\n+define_pd_global(size_t, InitialCodeCacheSize,       160*K);\n+define_pd_global(size_t, ReservedCodeCacheSize,      32*M );\n+define_pd_global(size_t, NonProfiledCodeHeapSize,    13*M );\n+define_pd_global(size_t, ProfiledCodeHeapSize,       14*M );\n+define_pd_global(size_t, NonNMethodCodeHeapSize,     5*M  );\n@@ -52,3 +52,3 @@\n-define_pd_global(intx, CodeCacheExpansionSize,       32*K );\n-define_pd_global(uintx, CodeCacheMinBlockLength,     1);\n-define_pd_global(uintx, CodeCacheMinimumUseSpace,    400*K);\n+define_pd_global(size_t, CodeCacheExpansionSize,     32*K );\n+define_pd_global(size_t, CodeCacheMinBlockLength,    1);\n+define_pd_global(size_t, CodeCacheMinimumUseSpace,   400*K);\n","filename":"src\/hotspot\/cpu\/aarch64\/c1_globals_aarch64.hpp","additions":9,"deletions":9,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -54,2 +54,2 @@\n-define_pd_global(intx, InitialCodeCacheSize,         2496*K); \/\/ Integral multiple of CodeCacheExpansionSize\n-define_pd_global(intx, CodeCacheExpansionSize,       64*K);\n+define_pd_global(size_t, InitialCodeCacheSize,       2496*K); \/\/ Integral multiple of CodeCacheExpansionSize\n+define_pd_global(size_t, CodeCacheExpansionSize,     64*K);\n@@ -72,6 +72,6 @@\n-define_pd_global(intx, ReservedCodeCacheSize,        48*M);\n-define_pd_global(intx, NonProfiledCodeHeapSize,      21*M);\n-define_pd_global(intx, ProfiledCodeHeapSize,         22*M);\n-define_pd_global(intx, NonNMethodCodeHeapSize,       5*M );\n-define_pd_global(uintx, CodeCacheMinBlockLength,     6);\n-define_pd_global(uintx, CodeCacheMinimumUseSpace,    400*K);\n+define_pd_global(size_t, ReservedCodeCacheSize,      48*M);\n+define_pd_global(size_t, NonProfiledCodeHeapSize,    21*M);\n+define_pd_global(size_t, ProfiledCodeHeapSize,       22*M);\n+define_pd_global(size_t, NonNMethodCodeHeapSize,     5*M );\n+define_pd_global(size_t, CodeCacheMinBlockLength,    6);\n+define_pd_global(size_t, CodeCacheMinimumUseSpace,   400*K);\n","filename":"src\/hotspot\/cpu\/aarch64\/c2_globals_aarch64.hpp","additions":9,"deletions":9,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -41,1 +41,1 @@\n-define_pd_global(uintx, CodeCacheSegmentSize,    64);\n+define_pd_global(size_t, CodeCacheSegmentSize,   64);\n@@ -120,1 +120,1 @@\n-          \"Options: none, nop, isb, yield.\")                            \\\n+          \"Options: none, nop, isb, yield, sb.\")                        \\\n","filename":"src\/hotspot\/cpu\/aarch64\/globals_aarch64.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1019,2 +1019,1 @@\n-void InterpreterMacroAssembler::profile_taken_branch(Register mdp,\n-                                                     Register bumped_count) {\n+void InterpreterMacroAssembler::profile_taken_branch(Register mdp) {\n@@ -1025,1 +1024,0 @@\n-    \/\/ Otherwise, assign to mdp\n@@ -1029,15 +1027,2 @@\n-    \/\/ We inline increment_mdp_data_at to return bumped_count in a register\n-    \/\/increment_mdp_data_at(mdp, in_bytes(JumpData::taken_offset()));\n-    Address data(mdp, in_bytes(JumpData::taken_offset()));\n-    ldr(bumped_count, data);\n-    assert(DataLayout::counter_increment == 1,\n-            \"flow-free idiom only works with 1\");\n-    \/\/ Intel does this to catch overflow\n-    \/\/ addptr(bumped_count, DataLayout::counter_increment);\n-    \/\/ sbbptr(bumped_count, 0);\n-    \/\/ so we do this\n-    adds(bumped_count, bumped_count, DataLayout::counter_increment);\n-    Label L;\n-    br(Assembler::CS, L);       \/\/ skip store if counter overflow\n-    str(bumped_count, data);\n-    bind(L);\n+    increment_mdp_data_at(mdp, in_bytes(JumpData::taken_offset()));\n+\n@@ -1058,1 +1043,1 @@\n-    \/\/ We are taking a branch.  Increment the not taken count.\n+    \/\/ We are not taking a branch.  Increment the not taken count.\n","filename":"src\/hotspot\/cpu\/aarch64\/interp_masm_aarch64.cpp","additions":4,"deletions":19,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -279,1 +279,1 @@\n-  void profile_taken_branch(Register mdp, Register bumped_count);\n+  void profile_taken_branch(Register mdp);\n","filename":"src\/hotspot\/cpu\/aarch64\/interp_masm_aarch64.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -6817,0 +6817,3 @@\n+      case SpinWait::SB:\n+        sb();\n+        break;\n","filename":"src\/hotspot\/cpu\/aarch64\/macroAssembler_aarch64.cpp","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -215,5 +215,0 @@\n-\n-void NativeJump::check_verified_entry_alignment(address entry, address verified_entry) {\n-}\n-\n-\n@@ -348,4 +343,0 @@\n-bool NativeInstruction::is_sigill_not_entrant() {\n-  return uint_at(0) == 0xd4bbd5a1; \/\/ dcps1 #0xdead\n-}\n-\n@@ -362,25 +353,0 @@\n-\/\/ MT-safe inserting of a jump over a jump or a nop (used by\n-\/\/ nmethod::make_not_entrant)\n-\n-void NativeJump::patch_verified_entry(address entry, address verified_entry, address dest) {\n-\n-  assert(dest == SharedRuntime::get_handle_wrong_method_stub(), \"expected fixed destination of patch\");\n-  assert(nativeInstruction_at(verified_entry)->is_jump_or_nop()\n-         || nativeInstruction_at(verified_entry)->is_sigill_not_entrant(),\n-         \"Aarch64 cannot replace non-jump with jump\");\n-\n-  \/\/ Patch this nmethod atomically.\n-  if (Assembler::reachable_from_branch_at(verified_entry, dest)) {\n-    ptrdiff_t disp = dest - verified_entry;\n-    guarantee(disp < 1 << 27 && disp > - (1 << 27), \"branch overflow\");\n-\n-    unsigned int insn = (0b000101 << 26) | ((disp >> 2) & 0x3ffffff);\n-    *(unsigned int*)verified_entry = insn;\n-  } else {\n-    \/\/ We use an illegal instruction for marking a method as not_entrant.\n-    NativeIllegalInstruction::insert(verified_entry);\n-  }\n-\n-  ICache::invalidate_range(verified_entry, instruction_size);\n-}\n-\n","filename":"src\/hotspot\/cpu\/aarch64\/nativeInst_aarch64.cpp","additions":0,"deletions":34,"binary":false,"changes":34,"status":"modified"},{"patch":"@@ -86,1 +86,0 @@\n-  bool is_sigill_not_entrant();\n@@ -363,3 +362,0 @@\n-  \/\/ MT-safe insertion of native jump at verified method entry\n-  static void check_verified_entry_alignment(address entry, address verified_entry);\n-  static void patch_verified_entry(address entry, address verified_entry, address dest);\n","filename":"src\/hotspot\/cpu\/aarch64\/nativeInst_aarch64.hpp","additions":0,"deletions":4,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -34,1 +34,2 @@\n-    YIELD\n+    YIELD,\n+    SB\n","filename":"src\/hotspot\/cpu\/aarch64\/spin_wait_aarch64.hpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -1762,1 +1762,1 @@\n-  __ profile_taken_branch(r0, r1);\n+  __ profile_taken_branch(r0);\n@@ -1812,1 +1812,0 @@\n-    \/\/ w1: MDO bumped taken-count\n@@ -1823,1 +1822,0 @@\n-    __ push(r1);\n@@ -1828,1 +1826,0 @@\n-    __ pop(r1);\n","filename":"src\/hotspot\/cpu\/aarch64\/templateTable_aarch64.cpp","additions":1,"deletions":4,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -60,0 +60,5 @@\n+  } else if (strcmp(OnSpinWaitInst, \"sb\") == 0) {\n+    if (!VM_Version::supports_sb()) {\n+      vm_exit_during_initialization(\"OnSpinWaitInst is SB but current CPU does not support SB instruction\");\n+    }\n+    return SpinWait(SpinWait::SB, OnSpinWaitInstCount);\n@@ -61,1 +66,1 @@\n-    vm_exit_during_initialization(\"The options for OnSpinWaitInst are nop, isb, yield, and none\", OnSpinWaitInst);\n+    vm_exit_during_initialization(\"The options for OnSpinWaitInst are nop, isb, yield, sb, and none\", OnSpinWaitInst);\n","filename":"src\/hotspot\/cpu\/aarch64\/vm_version_aarch64.cpp","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -134,0 +134,1 @@\n+    decl(SB,            sb,            29)    \\\n","filename":"src\/hotspot\/cpu\/aarch64\/vm_version_aarch64.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -54,1 +54,1 @@\n-define_pd_global(uintx, CodeCacheMinBlockLength,     1);\n+define_pd_global(size_t, CodeCacheMinBlockLength,    1);\n","filename":"src\/hotspot\/cpu\/arm\/c1_globals_arm.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -97,1 +97,1 @@\n-define_pd_global(uintx, CodeCacheMinBlockLength,     6);\n+define_pd_global(size_t, CodeCacheMinBlockLength,    6);\n","filename":"src\/hotspot\/cpu\/arm\/c2_globals_arm.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -196,4 +196,1 @@\n-  \/\/\n-  \/\/ Put a debug value to make any offsets skew\n-  \/\/ clearly visible in coredump\n-  __ emit_int32(0xDEADBEAF);\n+  __ emit_int32(0); \/\/ initial armed value, will be reset later\n","filename":"src\/hotspot\/cpu\/arm\/gc\/shared\/barrierSetAssembler_arm.cpp","additions":1,"deletions":4,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -39,3 +39,3 @@\n-define_pd_global(uintx, CodeCacheSegmentSize,     64);\n-define_pd_global(intx,  CodeEntryAlignment,       16);\n-define_pd_global(intx,  OptoLoopAlignment,        16);\n+define_pd_global(size_t, CodeCacheSegmentSize,     64);\n+define_pd_global(intx,   CodeEntryAlignment,       16);\n+define_pd_global(intx,   OptoLoopAlignment,        16);\n","filename":"src\/hotspot\/cpu\/arm\/globals_arm.hpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -285,10 +285,0 @@\n-void RawNativeJump::check_verified_entry_alignment(address entry, address verified_entry) {\n-}\n-\n-void RawNativeJump::patch_verified_entry(address entry, address verified_entry, address dest) {\n-  assert(dest == SharedRuntime::get_handle_wrong_method_stub(), \"should be\");\n-  int *a = (int *)verified_entry;\n-  a[0] = not_entrant_illegal_instruction; \/\/ always illegal\n-  ICache::invalidate_range((address)&a[0], sizeof a[0]);\n-}\n-\n","filename":"src\/hotspot\/cpu\/arm\/nativeInst_arm_32.cpp","additions":0,"deletions":10,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -64,4 +64,0 @@\n-  \/\/ illegal instruction used by NativeJump::patch_verified_entry\n-  \/\/ permanently undefined (UDF): 0xe << 28 | 0b1111111 << 20 | 0b1111 << 4\n-  static const int not_entrant_illegal_instruction = 0xe7f000f0;\n-\n@@ -277,4 +273,0 @@\n-  static void check_verified_entry_alignment(address entry, address verified_entry);\n-\n-  static void patch_verified_entry(address entry, address verified_entry, address dest);\n-\n","filename":"src\/hotspot\/cpu\/arm\/nativeInst_arm_32.hpp","additions":1,"deletions":9,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -49,1 +49,0 @@\n-  \/\/ Avoid stack bang as first instruction. It may get overwritten by patch_verified_entry.\n","filename":"src\/hotspot\/cpu\/ppc\/c1_MacroAssembler_ppc.cpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -47,7 +47,7 @@\n-define_pd_global(uintx,    ReservedCodeCacheSize,        32*M);\n-define_pd_global(uintx,    NonProfiledCodeHeapSize,      13*M );\n-define_pd_global(uintx,    ProfiledCodeHeapSize,         14*M );\n-define_pd_global(uintx,    NonNMethodCodeHeapSize,       5*M );\n-define_pd_global(uintx,    CodeCacheExpansionSize,       32*K);\n-define_pd_global(uintx,    CodeCacheMinBlockLength,      1);\n-define_pd_global(uintx,    CodeCacheMinimumUseSpace,     400*K);\n+define_pd_global(size_t,   ReservedCodeCacheSize,        32*M);\n+define_pd_global(size_t,   NonProfiledCodeHeapSize,      13*M );\n+define_pd_global(size_t,   ProfiledCodeHeapSize,         14*M );\n+define_pd_global(size_t,   NonNMethodCodeHeapSize,       5*M );\n+define_pd_global(size_t,   CodeCacheExpansionSize,       32*K);\n+define_pd_global(size_t,   CodeCacheMinBlockLength,      1);\n+define_pd_global(size_t,   CodeCacheMinimumUseSpace,     400*K);\n@@ -57,1 +57,1 @@\n-define_pd_global(uintx,    InitialCodeCacheSize,         160*K);\n+define_pd_global(size_t,   InitialCodeCacheSize,         160*K);\n","filename":"src\/hotspot\/cpu\/ppc\/c1_globals_ppc.hpp","additions":9,"deletions":9,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -81,6 +81,6 @@\n-define_pd_global(uintx,    InitialCodeCacheSize,         2048*K); \/\/ Integral multiple of CodeCacheExpansionSize\n-define_pd_global(uintx,    ReservedCodeCacheSize,        48*M);\n-define_pd_global(uintx,    NonProfiledCodeHeapSize,      21*M);\n-define_pd_global(uintx,    ProfiledCodeHeapSize,         22*M);\n-define_pd_global(uintx,    NonNMethodCodeHeapSize,       5*M  );\n-define_pd_global(uintx,    CodeCacheExpansionSize,       64*K);\n+define_pd_global(size_t,   InitialCodeCacheSize,         2048*K); \/\/ Integral multiple of CodeCacheExpansionSize\n+define_pd_global(size_t,   ReservedCodeCacheSize,        48*M);\n+define_pd_global(size_t,   NonProfiledCodeHeapSize,      21*M);\n+define_pd_global(size_t,   ProfiledCodeHeapSize,         22*M);\n+define_pd_global(size_t,   NonNMethodCodeHeapSize,       5*M  );\n+define_pd_global(size_t,   CodeCacheExpansionSize,       64*K);\n@@ -90,2 +90,2 @@\n-define_pd_global(uintx,    CodeCacheMinBlockLength,      6);\n-define_pd_global(uintx,    CodeCacheMinimumUseSpace,     400*K);\n+define_pd_global(size_t,   CodeCacheMinBlockLength,      6);\n+define_pd_global(size_t,   CodeCacheMinimumUseSpace,     400*K);\n","filename":"src\/hotspot\/cpu\/ppc\/c2_globals_ppc.hpp","additions":9,"deletions":9,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2002, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2002, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -62,4 +62,4 @@\n-define_pd_global(uintx, CodeCacheSegmentSize,  128);\n-define_pd_global(intx,  CodeEntryAlignment,    64);\n-define_pd_global(intx,  OptoLoopAlignment,     16);\n-define_pd_global(intx,  InlineSmallCode,       1500);\n+define_pd_global(size_t, CodeCacheSegmentSize,  128);\n+define_pd_global(intx,   CodeEntryAlignment,    64);\n+define_pd_global(intx,   OptoLoopAlignment,     16);\n+define_pd_global(intx,   InlineSmallCode,       1500);\n","filename":"src\/hotspot\/cpu\/ppc\/globals_ppc.hpp","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -3931,2 +3931,4 @@\n-  load_const_optimized(t0, VM_Version::_dscr_val | 7);\n-  mtdscr(t0);\n+  if (VM_Version::has_mfdscr()) {\n+    load_const_optimized(t0, VM_Version::_dscr_val | 7);\n+    mtdscr(t0);\n+  }\n@@ -4076,2 +4078,4 @@\n-  load_const_optimized(t0, VM_Version::_dscr_val);\n-  mtdscr(t0);\n+  if (VM_Version::has_mfdscr()) {\n+    load_const_optimized(t0, VM_Version::_dscr_val);\n+    mtdscr(t0);\n+  }\n","filename":"src\/hotspot\/cpu\/ppc\/macroAssembler_ppc.cpp","additions":8,"deletions":4,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -42,12 +42,0 @@\n-\/\/ We use an illtrap for marking a method as not_entrant\n-\/\/ Work around a C++ compiler bug which changes 'this'\n-bool NativeInstruction::is_sigill_not_entrant_at(address addr) {\n-  if (!Assembler::is_illtrap(addr)) return false;\n-  CodeBlob* cb = CodeCache::find_blob(addr);\n-  if (cb == nullptr || !cb->is_nmethod()) return false;\n-  nmethod *nm = (nmethod *)cb;\n-  \/\/ This method is not_entrant iff the illtrap instruction is\n-  \/\/ located at the verified entry point.\n-  return nm->verified_entry_point() == addr;\n-}\n-\n@@ -334,19 +322,0 @@\n-void NativeJump::patch_verified_entry(address entry, address verified_entry, address dest) {\n-  ResourceMark rm;\n-  int code_size = 1 * BytesPerInstWord;\n-  CodeBuffer cb(verified_entry, code_size + 1);\n-  MacroAssembler* a = new MacroAssembler(&cb);\n-#ifdef COMPILER2\n-  assert(dest == SharedRuntime::get_handle_wrong_method_stub(), \"expected fixed destination of patch\");\n-#endif\n-  \/\/ Patch this nmethod atomically. Always use illtrap\/trap in debug build.\n-  if (DEBUG_ONLY(false &&) a->is_within_range_of_b(dest, a->pc())) {\n-    a->b(dest);\n-  } else {\n-    \/\/ The signal handler will continue at dest=OptoRuntime::handle_wrong_method_stub().\n-    \/\/ We use an illtrap for marking a method as not_entrant.\n-    a->illtrap();\n-  }\n-  ICache::ppc64_flush_icache_bytes(verified_entry, code_size);\n-}\n-\n@@ -465,3 +434,1 @@\n-  nmethod *nm = (nmethod *)cb;\n-  \/\/ see NativeInstruction::is_sigill_not_entrant_at()\n-  return nm->verified_entry_point() != code_pos;\n+  return true;\n","filename":"src\/hotspot\/cpu\/ppc\/nativeInst_ppc.cpp","additions":1,"deletions":34,"binary":false,"changes":35,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2002, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2002, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -72,7 +72,0 @@\n-  \/\/ We use an illtrap for marking a method as not_entrant.\n-  bool is_sigill_not_entrant() {\n-    \/\/ Work around a C++ compiler bug which changes 'this'.\n-    return NativeInstruction::is_sigill_not_entrant_at(addr_at(0));\n-  }\n-  static bool is_sigill_not_entrant_at(address addr);\n-\n@@ -331,3 +324,0 @@\n-  \/\/ MT-safe insertion of native jump at verified method entry\n-  static void patch_verified_entry(address entry, address verified_entry, address dest);\n-\n@@ -335,5 +325,0 @@\n-\n-  static void check_verified_entry_alignment(address entry, address verified_entry) {\n-    \/\/ We just patch one instruction on ppc64, so the jump doesn't have to\n-    \/\/ be aligned. Nothing to do here.\n-  }\n","filename":"src\/hotspot\/cpu\/ppc\/nativeInst_ppc.hpp","additions":1,"deletions":16,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -1496,6 +1496,1 @@\n-  if (method_is_frameless) {\n-    \/\/ Add nop at beginning of all frameless methods to prevent any\n-    \/\/ oop instructions from getting overwritten by make_not_entrant\n-    \/\/ (patching attempt would fail).\n-    __ nop();\n-  } else {\n+  if (!method_is_frameless) {\n","filename":"src\/hotspot\/cpu\/ppc\/ppc.ad","additions":1,"deletions":6,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -955,2 +955,4 @@\n-    __ load_const_optimized(tmp1, VM_Version::_dscr_val);\n-    __ mtdscr(tmp1);\n+    if (VM_Version::has_mfdscr()) {\n+      __ load_const_optimized(tmp1, VM_Version::_dscr_val);\n+      __ mtdscr(tmp1);\n+    }\n@@ -1073,3 +1075,4 @@\n-        __ load_const_optimized(tmp2, VM_Version::_dscr_val | 7);\n-        __ mtdscr(tmp2);\n-\n+        if (VM_Version::has_mfdscr()) {\n+          __ load_const_optimized(tmp2, VM_Version::_dscr_val | 7);\n+          __ mtdscr(tmp2);\n+        }\n@@ -1095,2 +1098,4 @@\n-        __ load_const_optimized(tmp2, VM_Version::_dscr_val);\n-        __ mtdscr(tmp2);\n+        if (VM_Version::has_mfdscr()) {\n+          __ load_const_optimized(tmp2, VM_Version::_dscr_val);\n+          __ mtdscr(tmp2);\n+        }\n@@ -1347,2 +1352,4 @@\n-          __ load_const_optimized(tmp2, VM_Version::_dscr_val | 7);\n-          __ mtdscr(tmp2);\n+          if (VM_Version::has_mfdscr()) {\n+            __ load_const_optimized(tmp2, VM_Version::_dscr_val | 7);\n+            __ mtdscr(tmp2);\n+          }\n@@ -1368,2 +1375,5 @@\n-          __ load_const_optimized(tmp2, VM_Version::_dscr_val);\n-          __ mtdscr(tmp2);\n+          if (VM_Version::has_mfdscr()) {\n+            __ load_const_optimized(tmp2, VM_Version::_dscr_val);\n+            __ mtdscr(tmp2);\n+          }\n+\n@@ -1530,3 +1540,4 @@\n-    __ load_const_optimized(tmp2, VM_Version::_dscr_val | 7);\n-    __ mtdscr(tmp2);\n-\n+    if (VM_Version::has_mfdscr()) {\n+      __ load_const_optimized(tmp2, VM_Version::_dscr_val | 7);\n+      __ mtdscr(tmp2);\n+    }\n@@ -1552,3 +1563,4 @@\n-    __ load_const_optimized(tmp2, VM_Version::_dscr_val);\n-    __ mtdscr(tmp2);\n-\n+    if (VM_Version::has_mfdscr()) {\n+      __ load_const_optimized(tmp2, VM_Version::_dscr_val);\n+      __ mtdscr(tmp2);\n+    }\n@@ -1675,3 +1687,4 @@\n-      __ load_const_optimized(tmp2, VM_Version::_dscr_val | 7);\n-      __ mtdscr(tmp2);\n-\n+      if (VM_Version::has_mfdscr()) {\n+        __ load_const_optimized(tmp2, VM_Version::_dscr_val | 7);\n+        __ mtdscr(tmp2);\n+      }\n@@ -1697,2 +1710,4 @@\n-      __ load_const_optimized(tmp2, VM_Version::_dscr_val);\n-      __ mtdscr(tmp2);\n+      if (VM_Version::has_mfdscr()) {\n+        __ load_const_optimized(tmp2, VM_Version::_dscr_val);\n+        __ mtdscr(tmp2);\n+      }\n@@ -1791,3 +1806,4 @@\n-      __ load_const_optimized(tmp2, VM_Version::_dscr_val | 7);\n-      __ mtdscr(tmp2);\n-\n+      if (VM_Version::has_mfdscr()) {\n+        __ load_const_optimized(tmp2, VM_Version::_dscr_val | 7);\n+        __ mtdscr(tmp2);\n+      }\n@@ -1813,2 +1829,4 @@\n-      __ load_const_optimized(tmp2, VM_Version::_dscr_val);\n-      __ mtdscr(tmp2);\n+      if (VM_Version::has_mfdscr()) {\n+        __ load_const_optimized(tmp2, VM_Version::_dscr_val);\n+        __ mtdscr(tmp2);\n+      }\n@@ -1913,3 +1931,4 @@\n-      __ load_const_optimized(tmp2, VM_Version::_dscr_val | 7);\n-      __ mtdscr(tmp2);\n-\n+      if (VM_Version::has_mfdscr()) {\n+        __ load_const_optimized(tmp2, VM_Version::_dscr_val | 7);\n+        __ mtdscr(tmp2);\n+      }\n@@ -1935,2 +1954,4 @@\n-      __ load_const_optimized(tmp2, VM_Version::_dscr_val);\n-      __ mtdscr(tmp2);\n+      if (VM_Version::has_mfdscr()) {\n+        __ load_const_optimized(tmp2, VM_Version::_dscr_val);\n+        __ mtdscr(tmp2);\n+      }\n","filename":"src\/hotspot\/cpu\/ppc\/stubGenerator_ppc.cpp","additions":53,"deletions":32,"binary":false,"changes":85,"status":"modified"},{"patch":"@@ -83,1 +83,3 @@\n-  config_dscr();\n+  if (VM_Version::has_mfdscr()) {\n+    config_dscr();\n+  }\n@@ -173,1 +175,2 @@\n-               \"ppc64 sha aes%s%s\",\n+               \"ppc64 sha aes%s%s%s\",\n+               (has_mfdscr()  ? \" mfdscr\"  : \"\"),\n@@ -491,0 +494,1 @@\n+  a->mfdscr(R0);\n@@ -527,0 +531,1 @@\n+  if (code[feature_cntr++]) features |= mfdscr_m;\n","filename":"src\/hotspot\/cpu\/ppc\/vm_version_ppc.cpp","additions":7,"deletions":2,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -35,0 +35,1 @@\n+    mfdscr,\n@@ -41,0 +42,1 @@\n+    mfdscr_m              = (1 << mfdscr ),\n@@ -70,2 +72,3 @@\n-  static bool has_darn()    { return (_features & darn_m) != 0; }\n-  static bool has_brw()     { return (_features & brw_m) != 0; }\n+  static bool has_mfdscr() { return (_features & mfdscr_m) != 0; } \/\/ Power8, but may be unavailable (QEMU)\n+  static bool has_darn()   { return (_features & darn_m) != 0; }\n+  static bool has_brw()    { return (_features & brw_m) != 0; }\n","filename":"src\/hotspot\/cpu\/ppc\/vm_version_ppc.hpp","additions":5,"deletions":2,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -46,5 +46,5 @@\n-define_pd_global(intx, InitialCodeCacheSize,         160*K);\n-define_pd_global(intx, ReservedCodeCacheSize,        32*M );\n-define_pd_global(intx, NonProfiledCodeHeapSize,      13*M );\n-define_pd_global(intx, ProfiledCodeHeapSize,         14*M );\n-define_pd_global(intx, NonNMethodCodeHeapSize,       5*M  );\n+define_pd_global(size_t, InitialCodeCacheSize,       160*K);\n+define_pd_global(size_t, ReservedCodeCacheSize,      32*M );\n+define_pd_global(size_t, NonProfiledCodeHeapSize,    13*M );\n+define_pd_global(size_t, ProfiledCodeHeapSize,       14*M );\n+define_pd_global(size_t, NonNMethodCodeHeapSize,     5*M  );\n@@ -52,3 +52,3 @@\n-define_pd_global(intx, CodeCacheExpansionSize,       32*K );\n-define_pd_global(uintx, CodeCacheMinBlockLength,     1);\n-define_pd_global(uintx, CodeCacheMinimumUseSpace,    400*K);\n+define_pd_global(size_t, CodeCacheExpansionSize,     32*K );\n+define_pd_global(size_t, CodeCacheMinBlockLength,    1);\n+define_pd_global(size_t, CodeCacheMinimumUseSpace,   400*K);\n","filename":"src\/hotspot\/cpu\/riscv\/c1_globals_riscv.hpp","additions":9,"deletions":9,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -54,2 +54,2 @@\n-define_pd_global(intx, InitialCodeCacheSize,         2496*K); \/\/ Integral multiple of CodeCacheExpansionSize\n-define_pd_global(intx, CodeCacheExpansionSize,       64*K);\n+define_pd_global(size_t, InitialCodeCacheSize,       2496*K); \/\/ Integral multiple of CodeCacheExpansionSize\n+define_pd_global(size_t, CodeCacheExpansionSize,     64*K);\n@@ -72,6 +72,6 @@\n-define_pd_global(intx, ReservedCodeCacheSize,        48*M);\n-define_pd_global(intx, NonProfiledCodeHeapSize,      21*M);\n-define_pd_global(intx, ProfiledCodeHeapSize,         22*M);\n-define_pd_global(intx, NonNMethodCodeHeapSize,       5*M );\n-define_pd_global(uintx, CodeCacheMinBlockLength,     6);\n-define_pd_global(uintx, CodeCacheMinimumUseSpace,    400*K);\n+define_pd_global(size_t, ReservedCodeCacheSize,      48*M);\n+define_pd_global(size_t, NonProfiledCodeHeapSize,    21*M);\n+define_pd_global(size_t, ProfiledCodeHeapSize,       22*M);\n+define_pd_global(size_t, NonNMethodCodeHeapSize,     5*M );\n+define_pd_global(size_t, CodeCacheMinBlockLength,    6);\n+define_pd_global(size_t, CodeCacheMinimumUseSpace,   400*K);\n","filename":"src\/hotspot\/cpu\/riscv\/c2_globals_riscv.hpp","additions":9,"deletions":9,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -41,1 +41,1 @@\n-define_pd_global(uintx, CodeCacheSegmentSize,    64 COMPILER1_AND_COMPILER2_PRESENT(+64)); \/\/ Tiered compilation has large code-entry alignment.\n+define_pd_global(size_t, CodeCacheSegmentSize,   64 COMPILER1_AND_COMPILER2_PRESENT(+64)); \/\/ Tiered compilation has large code-entry alignment.\n","filename":"src\/hotspot\/cpu\/riscv\/globals_riscv.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1053,2 +1053,1 @@\n-void InterpreterMacroAssembler::profile_taken_branch(Register mdp,\n-                                                     Register bumped_count) {\n+void InterpreterMacroAssembler::profile_taken_branch(Register mdp) {\n@@ -1059,1 +1058,0 @@\n-    \/\/ Otherwise, assign to mdp\n@@ -1063,10 +1061,2 @@\n-    Address data(mdp, in_bytes(JumpData::taken_offset()));\n-    ld(bumped_count, data);\n-    assert(DataLayout::counter_increment == 1,\n-            \"flow-free idiom only works with 1\");\n-    addi(bumped_count, bumped_count, DataLayout::counter_increment);\n-    Label L;\n-    \/\/ eg: bumped_count=0x7fff ffff ffff ffff  + 1 < 0. so we use <= 0;\n-    blez(bumped_count, L);       \/\/ skip store if counter overflow,\n-    sd(bumped_count, data);\n-    bind(L);\n+    increment_mdp_data_at(mdp, in_bytes(JumpData::taken_offset()));\n+\n@@ -1086,1 +1076,1 @@\n-    \/\/ We are taking a branch.  Increment the not taken count.\n+    \/\/ We are not taking a branch.  Increment the not taken count.\n","filename":"src\/hotspot\/cpu\/riscv\/interp_masm_riscv.cpp","additions":4,"deletions":14,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -264,1 +264,1 @@\n-  void profile_taken_branch(Register mdp, Register bumped_count);\n+  void profile_taken_branch(Register mdp);\n","filename":"src\/hotspot\/cpu\/riscv\/interp_masm_riscv.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -5344,36 +5344,0 @@\n-\/**\n- * Multiply 32 bit by 32 bit first loop.\n- *\/\n-void MacroAssembler::multiply_32_x_32_loop(Register x, Register xstart, Register x_xstart,\n-                                           Register y, Register y_idx, Register z,\n-                                           Register carry, Register product,\n-                                           Register idx, Register kdx) {\n-  \/\/ jlong carry, x[], y[], z[];\n-  \/\/ for (int idx=ystart, kdx=ystart+1+xstart; idx >= 0; idx--, kdx--) {\n-  \/\/     long product = y[idx] * x[xstart] + carry;\n-  \/\/     z[kdx] = (int)product;\n-  \/\/     carry = product >>> 32;\n-  \/\/ }\n-  \/\/ z[xstart] = (int)carry;\n-\n-  Label L_first_loop, L_first_loop_exit;\n-  blez(idx, L_first_loop_exit);\n-\n-  shadd(t0, xstart, x, t0, LogBytesPerInt);\n-  lwu(x_xstart, Address(t0, 0));\n-\n-  bind(L_first_loop);\n-  subiw(idx, idx, 1);\n-  shadd(t0, idx, y, t0, LogBytesPerInt);\n-  lwu(y_idx, Address(t0, 0));\n-  mul(product, x_xstart, y_idx);\n-  add(product, product, carry);\n-  srli(carry, product, 32);\n-  subiw(kdx, kdx, 1);\n-  shadd(t0, kdx, z, t0, LogBytesPerInt);\n-  sw(product, Address(t0, 0));\n-  bgtz(idx, L_first_loop);\n-\n-  bind(L_first_loop_exit);\n-}\n-\n@@ -5596,0 +5560,1 @@\n+  const Register jdx = tmp1;\n@@ -5601,2 +5566,1 @@\n-  Label L_multiply_64_x_64_loop, L_done;\n-\n+  Label L_done;\n@@ -5606,61 +5570,0 @@\n-  const Register jdx = tmp1;\n-\n-  if (AvoidUnalignedAccesses) {\n-    int base_offset = arrayOopDesc::base_offset_in_bytes(T_INT);\n-    assert((base_offset % (UseCompactObjectHeaders ? 4 :\n-                           (UseCompressedClassPointers ? 8 : 4))) == 0, \"Must be\");\n-\n-    if ((base_offset % 8) == 0) {\n-      \/\/ multiply_64_x_64_loop emits 8-byte load\/store to access two elements\n-      \/\/ at a time from int arrays x and y. When base_offset is 8 bytes, these\n-      \/\/ accesses are naturally aligned if both xlen and ylen are even numbers.\n-      orr(t0, xlen, ylen);\n-      test_bit(t0, t0, 0);\n-      beqz(t0, L_multiply_64_x_64_loop);\n-    }\n-\n-    Label L_second_loop_unaligned, L_third_loop, L_third_loop_exit;\n-\n-    multiply_32_x_32_loop(x, xstart, x_xstart, y, y_idx, z, carry, product, idx, kdx);\n-    shadd(t0, xstart, z, t0, LogBytesPerInt);\n-    sw(carry, Address(t0, 0));\n-\n-    bind(L_second_loop_unaligned);\n-    mv(carry, zr);\n-    mv(jdx, ylen);\n-    subiw(xstart, xstart, 1);\n-    bltz(xstart, L_done);\n-\n-    subi(sp, sp, 2 * wordSize);\n-    sd(z, Address(sp, 0));\n-    sd(zr, Address(sp, wordSize));\n-    shadd(t0, xstart, z, t0, LogBytesPerInt);\n-    addi(z, t0, 4);\n-    shadd(t0, xstart, x, t0, LogBytesPerInt);\n-    lwu(product, Address(t0, 0));\n-\n-    blez(jdx, L_third_loop_exit);\n-\n-    bind(L_third_loop);\n-    subiw(jdx, jdx, 1);\n-    shadd(t0, jdx, y, t0, LogBytesPerInt);\n-    lwu(t0, Address(t0, 0));\n-    mul(t1, t0, product);\n-    add(t0, t1, carry);\n-    shadd(tmp6, jdx, z, t1, LogBytesPerInt);\n-    lwu(t1, Address(tmp6, 0));\n-    add(t0, t0, t1);\n-    sw(t0, Address(tmp6, 0));\n-    srli(carry, t0, 32);\n-    bgtz(jdx, L_third_loop);\n-\n-    bind(L_third_loop_exit);\n-    ld(z, Address(sp, 0));\n-    addi(sp, sp, 2 * wordSize);\n-    shadd(t0, xstart, z, t0, LogBytesPerInt);\n-    sw(carry, Address(t0, 0));\n-\n-    j(L_second_loop_unaligned);\n-  }\n-\n-  bind(L_multiply_64_x_64_loop);\n","filename":"src\/hotspot\/cpu\/riscv\/macroAssembler_riscv.cpp","additions":2,"deletions":99,"binary":false,"changes":101,"status":"modified"},{"patch":"@@ -1387,4 +1387,0 @@\n-  void multiply_32_x_32_loop(Register x, Register xstart, Register x_xstart,\n-                             Register y, Register y_idx, Register z,\n-                             Register carry, Register product,\n-                             Register idx, Register kdx);\n","filename":"src\/hotspot\/cpu\/riscv\/macroAssembler_riscv.hpp","additions":0,"deletions":4,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -359,12 +359,0 @@\n-\n-void NativeJump::check_verified_entry_alignment(address entry, address verified_entry) {\n-  \/\/ Patching to not_entrant can happen while activations of the method are\n-  \/\/ in use. The patching in that instance must happen only when certain\n-  \/\/ alignment restrictions are true. These guarantees check those\n-  \/\/ conditions.\n-\n-  \/\/ Must be 4 bytes aligned\n-  MacroAssembler::assert_alignment(verified_entry);\n-}\n-\n-\n@@ -423,6 +411,0 @@\n-\/\/ A 16-bit instruction with all bits ones is permanently reserved as an illegal instruction.\n-bool NativeInstruction::is_sigill_not_entrant() {\n-  \/\/ jvmci\n-  return uint_at(0) == 0xffffffff;\n-}\n-\n@@ -439,39 +421,0 @@\n-\n-\/\/ MT-safe inserting of a jump over a jump or a nop (used by\n-\/\/ nmethod::make_not_entrant)\n-\n-void NativeJump::patch_verified_entry(address entry, address verified_entry, address dest) {\n-\n-  assert(dest == SharedRuntime::get_handle_wrong_method_stub(), \"expected fixed destination of patch\");\n-\n-  assert(nativeInstruction_at(verified_entry)->is_jump_or_nop() ||\n-         nativeInstruction_at(verified_entry)->is_sigill_not_entrant(),\n-         \"riscv cannot replace non-jump with jump\");\n-\n-  check_verified_entry_alignment(entry, verified_entry);\n-\n-  \/\/ Patch this nmethod atomically.\n-  if (Assembler::reachable_from_branch_at(verified_entry, dest)) {\n-    ptrdiff_t offset = dest - verified_entry;\n-    guarantee(Assembler::is_simm21(offset) && ((offset % 2) == 0),\n-              \"offset is too large to be patched in one jal instruction.\"); \/\/ 1M\n-\n-    uint32_t insn = 0;\n-    address pInsn = (address)&insn;\n-    Assembler::patch(pInsn, 31, 31, (offset >> 20) & 0x1);\n-    Assembler::patch(pInsn, 30, 21, (offset >> 1) & 0x3ff);\n-    Assembler::patch(pInsn, 20, 20, (offset >> 11) & 0x1);\n-    Assembler::patch(pInsn, 19, 12, (offset >> 12) & 0xff);\n-    Assembler::patch(pInsn, 11, 7, 0); \/\/ zero, no link jump\n-    Assembler::patch(pInsn, 6, 0, 0b1101111); \/\/ j, (jal x0 offset)\n-    Assembler::sd_instr(verified_entry, insn);\n-  } else {\n-    \/\/ We use an illegal instruction for marking a method as\n-    \/\/ not_entrant.\n-    NativeIllegalInstruction::insert(verified_entry);\n-  }\n-\n-  ICache::invalidate_range(verified_entry, instruction_size);\n-}\n-\n-\/\/-------------------------------------------------------------------\n","filename":"src\/hotspot\/cpu\/riscv\/nativeInst_riscv.cpp","additions":0,"deletions":57,"binary":false,"changes":57,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -77,1 +77,0 @@\n-  bool is_sigill_not_entrant();\n@@ -277,3 +276,0 @@\n-  \/\/ MT-safe insertion of native jump at verified method entry\n-  static void check_verified_entry_alignment(address entry, address verified_entry);\n-  static void patch_verified_entry(address entry, address verified_entry, address dest);\n","filename":"src\/hotspot\/cpu\/riscv\/nativeInst_riscv.hpp","additions":1,"deletions":5,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -1371,8 +1371,0 @@\n-  \/\/ insert a nop at the start of the prolog so we can patch in a\n-  \/\/ branch if we need to invalidate the method later\n-  {\n-    Assembler::IncompressibleScope scope(masm); \/\/ keep the nop as 4 bytes for patching.\n-    MacroAssembler::assert_alignment(__ pc());\n-    __ nop();  \/\/ 4 bytes\n-  }\n-\n@@ -1807,1 +1799,0 @@\n-  \/\/ Verified entry point must be properly 4 bytes aligned for patching by NativeJump::patch_verified_entry().\n@@ -8202,1 +8193,1 @@\n-  \n+ \n","filename":"src\/hotspot\/cpu\/riscv\/riscv.ad","additions":1,"deletions":10,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -1611,1 +1611,1 @@\n-  __ profile_taken_branch(x10, x11);\n+  __ profile_taken_branch(x10);\n@@ -1660,1 +1660,0 @@\n-    \/\/ x11: MDO bumped taken-count\n@@ -1669,1 +1668,0 @@\n-    __ push_reg(x11);\n@@ -1674,1 +1672,0 @@\n-    __ pop_reg(x11);\n","filename":"src\/hotspot\/cpu\/riscv\/templateTable_riscv.cpp","additions":1,"deletions":4,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -328,2 +328,7 @@\n-  if (FLAG_IS_DEFAULT(UseMultiplyToLenIntrinsic)) {\n-    FLAG_SET_DEFAULT(UseMultiplyToLenIntrinsic, true);\n+  if (!AvoidUnalignedAccesses) {\n+    if (FLAG_IS_DEFAULT(UseMultiplyToLenIntrinsic)) {\n+      FLAG_SET_DEFAULT(UseMultiplyToLenIntrinsic, true);\n+    }\n+  } else if (UseMultiplyToLenIntrinsic) {\n+    warning(\"Intrinsics for BigInteger.multiplyToLen() not available on this CPU.\");\n+    FLAG_SET_DEFAULT(UseMultiplyToLenIntrinsic, false);\n@@ -332,2 +337,7 @@\n-  if (FLAG_IS_DEFAULT(UseSquareToLenIntrinsic)) {\n-    FLAG_SET_DEFAULT(UseSquareToLenIntrinsic, true);\n+  if (!AvoidUnalignedAccesses) {\n+    if (FLAG_IS_DEFAULT(UseSquareToLenIntrinsic)) {\n+      FLAG_SET_DEFAULT(UseSquareToLenIntrinsic, true);\n+    }\n+  } else if (UseSquareToLenIntrinsic) {\n+    warning(\"Intrinsics for BigInteger.squareToLen() not available on this CPU.\");\n+    FLAG_SET_DEFAULT(UseSquareToLenIntrinsic, false);\n@@ -336,2 +346,7 @@\n-  if (FLAG_IS_DEFAULT(UseMontgomeryMultiplyIntrinsic)) {\n-    FLAG_SET_DEFAULT(UseMontgomeryMultiplyIntrinsic, true);\n+  if (!AvoidUnalignedAccesses) {\n+    if (FLAG_IS_DEFAULT(UseMontgomeryMultiplyIntrinsic)) {\n+      FLAG_SET_DEFAULT(UseMontgomeryMultiplyIntrinsic, true);\n+    }\n+  } else if (UseMontgomeryMultiplyIntrinsic) {\n+    warning(\"Intrinsics for BigInteger.montgomeryMultiply() not available on this CPU.\");\n+    FLAG_SET_DEFAULT(UseMontgomeryMultiplyIntrinsic, false);\n@@ -340,2 +355,7 @@\n-  if (FLAG_IS_DEFAULT(UseMontgomerySquareIntrinsic)) {\n-    FLAG_SET_DEFAULT(UseMontgomerySquareIntrinsic, true);\n+  if (!AvoidUnalignedAccesses) {\n+    if (FLAG_IS_DEFAULT(UseMontgomerySquareIntrinsic)) {\n+      FLAG_SET_DEFAULT(UseMontgomerySquareIntrinsic, true);\n+    }\n+  } else if (UseMontgomerySquareIntrinsic) {\n+    warning(\"Intrinsics for BigInteger.montgomerySquare() not available on this CPU.\");\n+    FLAG_SET_DEFAULT(UseMontgomerySquareIntrinsic, false);\n","filename":"src\/hotspot\/cpu\/riscv\/vm_version_riscv.cpp","additions":28,"deletions":8,"binary":false,"changes":36,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -47,7 +47,7 @@\n-define_pd_global(uintx,    ReservedCodeCacheSize,        32*M);\n-define_pd_global(uintx,    NonProfiledCodeHeapSize,      13*M);\n-define_pd_global(uintx,    ProfiledCodeHeapSize,         14*M);\n-define_pd_global(uintx,    NonNMethodCodeHeapSize,       5*M);\n-define_pd_global(uintx,    CodeCacheExpansionSize,       32*K);\n-define_pd_global(uintx,    CodeCacheMinBlockLength,      1);\n-define_pd_global(uintx,    CodeCacheMinimumUseSpace,     400*K);\n+define_pd_global(size_t,   ReservedCodeCacheSize,        32*M);\n+define_pd_global(size_t,   NonProfiledCodeHeapSize,      13*M);\n+define_pd_global(size_t,   ProfiledCodeHeapSize,         14*M);\n+define_pd_global(size_t,   NonNMethodCodeHeapSize,       5*M);\n+define_pd_global(size_t,   CodeCacheExpansionSize,       32*K);\n+define_pd_global(size_t,   CodeCacheMinBlockLength,      1);\n+define_pd_global(size_t,   CodeCacheMinimumUseSpace,     400*K);\n@@ -57,1 +57,1 @@\n-define_pd_global(uintx,    InitialCodeCacheSize,         160*K);\n+define_pd_global(size_t,   InitialCodeCacheSize,         160*K);\n","filename":"src\/hotspot\/cpu\/s390\/c1_globals_s390.hpp","additions":9,"deletions":9,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -70,6 +70,6 @@\n-define_pd_global(uintx, InitialCodeCacheSize,        2048*K); \/\/ Integral multiple of CodeCacheExpansionSize\n-define_pd_global(uintx, ReservedCodeCacheSize,       48*M);\n-define_pd_global(uintx, NonProfiledCodeHeapSize,     21*M);\n-define_pd_global(uintx, ProfiledCodeHeapSize,        22*M);\n-define_pd_global(uintx, NonNMethodCodeHeapSize,      5*M);\n-define_pd_global(uintx, CodeCacheExpansionSize,      64*K);\n+define_pd_global(size_t, InitialCodeCacheSize,       2048*K); \/\/ Integral multiple of CodeCacheExpansionSize\n+define_pd_global(size_t, ReservedCodeCacheSize,      48*M);\n+define_pd_global(size_t, NonProfiledCodeHeapSize,    21*M);\n+define_pd_global(size_t, ProfiledCodeHeapSize,       22*M);\n+define_pd_global(size_t, NonNMethodCodeHeapSize,     5*M);\n+define_pd_global(size_t, CodeCacheExpansionSize,     64*K);\n@@ -79,2 +79,2 @@\n-define_pd_global(uintx, CodeCacheMinBlockLength,     4);\n-define_pd_global(uintx, CodeCacheMinimumUseSpace,    400*K);\n+define_pd_global(size_t, CodeCacheMinBlockLength,    4);\n+define_pd_global(size_t, CodeCacheMinimumUseSpace,   400*K);\n","filename":"src\/hotspot\/cpu\/s390\/c2_globals_s390.hpp","additions":9,"deletions":9,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -183,1 +183,1 @@\n-    __ z_cfi(Z_R0_scratch, \/* to be patched *\/ -1); \/\/ 6 bytes (2 + 4 byte imm val)\n+    __ z_cfi(Z_R0_scratch, \/* to be patched *\/ 0); \/\/ 6 bytes (2 + 4 byte imm val)\n","filename":"src\/hotspot\/cpu\/s390\/gc\/shared\/barrierSetAssembler_s390.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -41,1 +41,1 @@\n-define_pd_global(uintx, CodeCacheSegmentSize,        256);\n+define_pd_global(size_t, CodeCacheSegmentSize,       256);\n","filename":"src\/hotspot\/cpu\/s390\/globals_s390.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -170,21 +170,0 @@\n-\/\/ We use an illtrap for marking a method as not_entrant.\n-bool NativeInstruction::is_sigill_not_entrant() {\n-  if (!is_illegal()) return false; \/\/ Just a quick path.\n-\n-  \/\/ One-sided error of is_illegal tolerable here\n-  \/\/ (see implementation of is_illegal() for details).\n-\n-  CodeBlob* cb = CodeCache::find_blob(addr_at(0));\n-  if (cb == nullptr || !cb->is_nmethod()) {\n-    return false;\n-  }\n-\n-  nmethod *nm = (nmethod *)cb;\n-  \/\/ This method is not_entrant if the illtrap instruction\n-  \/\/ is located at the verified entry point.\n-  \/\/ BE AWARE: the current pc (this) points to the instruction after the\n-  \/\/ \"illtrap\" location.\n-  address sig_addr = ((address) this) - 2;\n-  return nm->verified_entry_point() == sig_addr;\n-}\n-\n@@ -623,13 +602,0 @@\n-\/\/ Patch atomically with an illtrap.\n-void NativeJump::patch_verified_entry(address entry, address verified_entry, address dest) {\n-  ResourceMark rm;\n-  int code_size = 2;\n-  CodeBuffer cb(verified_entry, code_size + 1);\n-  MacroAssembler* a = new MacroAssembler(&cb);\n-#ifdef COMPILER2\n-  assert(dest == SharedRuntime::get_handle_wrong_method_stub(), \"expected fixed destination of patch\");\n-#endif\n-  a->z_illtrap();\n-  ICache::invalidate_range(verified_entry, code_size);\n-}\n-\n","filename":"src\/hotspot\/cpu\/s390\/nativeInst_s390.cpp","additions":0,"deletions":34,"binary":false,"changes":34,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -88,3 +88,0 @@\n-  \/\/ We use an illtrap for marking a method as not_entrant.\n-  bool is_sigill_not_entrant();\n-\n@@ -612,5 +609,0 @@\n-\n-  \/\/ MT-safe insertion of native jump at verified method entry.\n-  static void check_verified_entry_alignment(address entry, address verified_entry) { }\n-\n-  static void patch_verified_entry(address entry, address verified_entry, address dest);\n","filename":"src\/hotspot\/cpu\/s390\/nativeInst_s390.hpp","additions":1,"deletions":9,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -3200,1 +3200,1 @@\n-    __ z_ltr(Z_R0_scratch, Z_RET);\n+    __ z_ltr(Z_RET, Z_RET);\n","filename":"src\/hotspot\/cpu\/s390\/stubGenerator_s390.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -328,10 +328,0 @@\n-  if (breakAtEntry) {\n-    \/\/ Verified Entry first instruction should be 5 bytes long for correct\n-    \/\/ patching by patch_verified_entry().\n-    \/\/\n-    \/\/ Breakpoint has one byte first instruction.\n-    \/\/ Also first instruction will be one byte \"push(rbp)\" if stack banging\n-    \/\/ code is not generated (see build_frame() above).\n-    \/\/ For all these cases generate long instruction first.\n-    fat_nop();\n-  }\n","filename":"src\/hotspot\/cpu\/x86\/c1_MacroAssembler_x86.cpp","additions":0,"deletions":10,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -45,5 +45,5 @@\n-define_pd_global(uintx,  InitialCodeCacheSize,         160*K);\n-define_pd_global(uintx,  ReservedCodeCacheSize,        32*M );\n-define_pd_global(uintx,  NonProfiledCodeHeapSize,      13*M );\n-define_pd_global(uintx,  ProfiledCodeHeapSize,         14*M );\n-define_pd_global(uintx,  NonNMethodCodeHeapSize,       5*M  );\n+define_pd_global(size_t, InitialCodeCacheSize,         160*K);\n+define_pd_global(size_t, ReservedCodeCacheSize,        32*M );\n+define_pd_global(size_t, NonProfiledCodeHeapSize,      13*M );\n+define_pd_global(size_t, ProfiledCodeHeapSize,         14*M );\n+define_pd_global(size_t, NonNMethodCodeHeapSize,       5*M  );\n@@ -51,3 +51,3 @@\n-define_pd_global(uintx,  CodeCacheExpansionSize,       32*K );\n-define_pd_global(uintx,  CodeCacheMinBlockLength,      1    );\n-define_pd_global(uintx,  CodeCacheMinimumUseSpace,     400*K);\n+define_pd_global(size_t, CodeCacheExpansionSize,       32*K );\n+define_pd_global(size_t, CodeCacheMinBlockLength,      1    );\n+define_pd_global(size_t, CodeCacheMinimumUseSpace,     400*K);\n","filename":"src\/hotspot\/cpu\/x86\/c1_globals_x86.hpp","additions":9,"deletions":9,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -53,7 +53,0 @@\n-\n-  \/\/ WARNING: Initial instruction MUST be 5 bytes or longer so that\n-  \/\/ NativeJump::patch_verified_entry will be able to patch out the entry\n-  \/\/ code safely. The push to verify stack depth is ok at 5 bytes,\n-  \/\/ the frame allocation can be either 3 or 6 bytes. So if we don't do\n-  \/\/ stack bang then we must use the 6 byte frame allocation even if\n-  \/\/ we have no frame. :-(\n@@ -90,2 +83,1 @@\n-    \/\/ Create frame (force generation of a 4 byte immediate value)\n-    subptr_imm32(rsp, framesize);\n+    subptr(rsp, framesize);\n@@ -4658,0 +4650,1 @@\n+  \/\/ APX REX2 encoding for pop(dst) increases the stub size by 1 byte.\n@@ -4690,1 +4683,3 @@\n-  auto stub = C2CodeStub::make<Register, XMMRegister, address>(dst, src, slowpath_target, 23, convertF2I_slowpath);\n+  \/\/ Using the APX extended general purpose registers increases the instruction encoding size by 1 byte.\n+  int max_size = 23 + (UseAPX ? 1 : 0);\n+  auto stub = C2CodeStub::make<Register, XMMRegister, address>(dst, src, slowpath_target, max_size, convertF2I_slowpath);\n","filename":"src\/hotspot\/cpu\/x86\/c2_MacroAssembler_x86.cpp","additions":5,"deletions":10,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -53,2 +53,2 @@\n-define_pd_global(uintx, InitialCodeCacheSize,        2496*K); \/\/ Integral multiple of CodeCacheExpansionSize\n-define_pd_global(uintx, CodeCacheExpansionSize,      64*K);\n+define_pd_global(size_t, InitialCodeCacheSize,       2496*K); \/\/ Integral multiple of CodeCacheExpansionSize\n+define_pd_global(size_t, CodeCacheExpansionSize,     64*K);\n@@ -63,2 +63,2 @@\n-define_pd_global(uintx, InitialCodeCacheSize,        2304*K); \/\/ Integral multiple of CodeCacheExpansionSize\n-define_pd_global(uintx, CodeCacheExpansionSize,      32*K);\n+define_pd_global(size_t, InitialCodeCacheSize,       2304*K); \/\/ Integral multiple of CodeCacheExpansionSize\n+define_pd_global(size_t, CodeCacheExpansionSize,     32*K);\n@@ -82,6 +82,6 @@\n-define_pd_global(uintx, ReservedCodeCacheSize,       48*M);\n-define_pd_global(uintx, NonProfiledCodeHeapSize,     21*M);\n-define_pd_global(uintx, ProfiledCodeHeapSize,        22*M);\n-define_pd_global(uintx, NonNMethodCodeHeapSize,      5*M );\n-define_pd_global(uintx, CodeCacheMinBlockLength,     6);\n-define_pd_global(uintx, CodeCacheMinimumUseSpace,    400*K);\n+define_pd_global(size_t, ReservedCodeCacheSize,      48*M);\n+define_pd_global(size_t, NonProfiledCodeHeapSize,    21*M);\n+define_pd_global(size_t, ProfiledCodeHeapSize,       22*M);\n+define_pd_global(size_t, NonNMethodCodeHeapSize,     5*M );\n+define_pd_global(size_t, CodeCacheMinBlockLength,    6);\n+define_pd_global(size_t, CodeCacheMinimumUseSpace,   400*K);\n","filename":"src\/hotspot\/cpu\/x86\/c2_globals_x86.hpp","additions":11,"deletions":11,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -40,1 +40,1 @@\n-define_pd_global(uintx, CodeCacheSegmentSize,    64 COMPILER1_AND_COMPILER2_PRESENT(+64)); \/\/ Tiered compilation has large code-entry alignment.\n+define_pd_global(size_t, CodeCacheSegmentSize,   64 COMPILER1_AND_COMPILER2_PRESENT(+64)); \/\/ Tiered compilation has large code-entry alignment.\n","filename":"src\/hotspot\/cpu\/x86\/globals_x86.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1624,13 +1624,0 @@\n-\/\/ A 5 byte nop that is safe for patching (see patch_verified_entry)\n-void MacroAssembler::fat_nop() {\n-  if (UseAddressNop) {\n-    addr_nop_5();\n-  } else {\n-    emit_int8((uint8_t)0x26); \/\/ es:\n-    emit_int8((uint8_t)0x2e); \/\/ cs:\n-    emit_int8((uint8_t)0x64); \/\/ fs:\n-    emit_int8((uint8_t)0x65); \/\/ gs:\n-    emit_int8((uint8_t)0x90);\n-  }\n-}\n-\n","filename":"src\/hotspot\/cpu\/x86\/macroAssembler_x86.cpp","additions":0,"deletions":13,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -212,2 +212,0 @@\n-  \/\/ A 5 byte nop that is safe for patching (see patch_verified_entry)\n-  void fat_nop();\n","filename":"src\/hotspot\/cpu\/x86\/macroAssembler_x86.hpp","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -339,49 +339,0 @@\n-void NativeJump::check_verified_entry_alignment(address entry, address verified_entry) {\n-  \/\/ Patching to not_entrant can happen while activations of the method are\n-  \/\/ in use. The patching in that instance must happen only when certain\n-  \/\/ alignment restrictions are true. These guarantees check those\n-  \/\/ conditions.\n-  const int linesize = 64;\n-\n-  \/\/ Must be wordSize aligned\n-  guarantee(((uintptr_t) verified_entry & (wordSize -1)) == 0,\n-            \"illegal address for code patching 2\");\n-  \/\/ First 5 bytes must be within the same cache line - 4827828\n-  guarantee((uintptr_t) verified_entry \/ linesize ==\n-            ((uintptr_t) verified_entry + 4) \/ linesize,\n-            \"illegal address for code patching 3\");\n-}\n-\n-\n-\/\/ MT safe inserting of a jump over an unknown instruction sequence (used by nmethod::make_not_entrant)\n-\/\/ The problem: jmp <dest> is a 5-byte instruction. Atomic write can be only with 4 bytes.\n-\/\/ First patches the first word atomically to be a jump to itself.\n-\/\/ Then patches the last byte  and then atomically patches the first word (4-bytes),\n-\/\/ thus inserting the desired jump\n-\/\/ This code is mt-safe with the following conditions: entry point is 4 byte aligned,\n-\/\/ entry point is in same cache line as unverified entry point, and the instruction being\n-\/\/ patched is >= 5 byte (size of patch).\n-\/\/\n-\/\/ In C2 the 5+ byte sized instruction is enforced by code in MachPrologNode::emit.\n-\/\/ In C1 the restriction is enforced by CodeEmitter::method_entry\n-\/\/ In JVMCI, the restriction is enforced by HotSpotFrameContext.enter(...)\n-\/\/\n-void NativeJump::patch_verified_entry(address entry, address verified_entry, address dest) {\n-  \/\/ complete jump instruction (to be inserted) is in code_buffer;\n-  union {\n-    jlong cb_long;\n-    unsigned char code_buffer[8];\n-  } u;\n-\n-  u.cb_long = *(jlong *)verified_entry;\n-\n-  intptr_t disp = (intptr_t)dest - ((intptr_t)verified_entry + 1 + 4);\n-  guarantee(disp == (intptr_t)(int32_t)disp, \"must be 32-bit offset\");\n-\n-  u.code_buffer[0] = instruction_code;\n-  *(int32_t*)(u.code_buffer + 1) = (int32_t)disp;\n-\n-  Atomic::store((jlong *) verified_entry, u.cb_long);\n-  ICache::invalidate_range(verified_entry, 8);\n-}\n-\n","filename":"src\/hotspot\/cpu\/x86\/nativeInst_x86.cpp","additions":0,"deletions":49,"binary":false,"changes":49,"status":"modified"},{"patch":"@@ -448,3 +448,0 @@\n-  \/\/ MT-safe insertion of native jump at verified method entry\n-  static void check_verified_entry_alignment(address entry, address verified_entry);\n-  static void patch_verified_entry(address entry, address verified_entry, address dest);\n","filename":"src\/hotspot\/cpu\/x86\/nativeInst_x86.hpp","additions":0,"deletions":3,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+#include \"opto\/addnode.hpp\"\n@@ -238,0 +239,137 @@\n+\/\/ This function removes redundant lea instructions that result from chained dereferences that\n+\/\/ match to leaPCompressedOopOffset, leaP8Narrow, or leaP32Narrow. This happens for ideal graphs\n+\/\/ of the form LoadN -> DecodeN -> AddP. Matching with any leaP* rule consumes both the AddP and\n+\/\/ the DecodeN. However, after matching the DecodeN is added back as the base for the leaP*,\n+\/\/ which is necessary if the oop derived by the leaP* gets added to an OopMap, because OopMaps\n+\/\/ cannot contain derived oops with narrow oops as a base.\n+\/\/ This results in the following graph after matching:\n+\/\/  LoadN\n+\/\/  |   \\\n+\/\/  | decodeHeapOop_not_null\n+\/\/  |   \/       \\\n+\/\/  leaP*    MachProj (leaf)\n+\/\/ The decode_heap_oop_not_null will emit a lea with an unused result if the derived oop does\n+\/\/ not end up in an OopMap.\n+\/\/ This peephole recognizes graphs of the shape as shown above, ensures that the result of the\n+\/\/ decode is only used by the derived oop and removes that decode if this is the case. Further,\n+\/\/ multiple leaP*s can have the same decode as their base. This peephole will remove the decode\n+\/\/ if all leaP*s and the decode share the same parent.\n+\/\/ Additionally, if the register allocator spills the result of the LoadN we can get such a graph:\n+\/\/               LoadN\n+\/\/                 |\n+\/\/        DefinitionSpillCopy\n+\/\/           \/           \\\n+\/\/ MemToRegSpillCopy   MemToRegSpillCopy\n+\/\/           |           \/\n+\/\/           | decodeHeapOop_not_null\n+\/\/           |   \/              \\\n+\/\/           leaP*          MachProj (leaf)\n+\/\/ In this case where the common parent of the leaP* and the decode is one MemToRegSpillCopy\n+\/\/ away, this peephole can also recognize the decode as redundant and also remove the spill copy\n+\/\/ if that is only used by the decode.\n+bool Peephole::lea_remove_redundant(Block* block, int block_index, PhaseCFG* cfg_, PhaseRegAlloc* ra_,\n+                                    MachNode* (*new_root)(), uint inst0_rule) {\n+  MachNode* lea_derived_oop = block->get_node(block_index)->as_Mach();\n+  assert(lea_derived_oop->rule() == inst0_rule, \"sanity\");\n+  assert(lea_derived_oop->ideal_Opcode() == Op_AddP, \"sanity\");\n+\n+  MachNode* decode = lea_derived_oop->in(AddPNode::Base)->isa_Mach();\n+  if (decode == nullptr || decode->ideal_Opcode() != Op_DecodeN) {\n+    return false;\n+  }\n+\n+  \/\/ Check that the lea and the decode live in the same block.\n+  if (!block->contains(decode)) {\n+    return false;\n+  }\n+\n+  Node* lea_address = lea_derived_oop->in(AddPNode::Address);\n+  Node* decode_address = decode->in(1);\n+\n+  bool is_spill = lea_address != decode_address &&\n+                  lea_address->is_SpillCopy() &&\n+                  decode_address->is_SpillCopy();\n+\n+  \/\/ If this is a spill, move lea_address and decode_address one node further up to the\n+  \/\/ grandparents of lea_derived_oop and decode respectively. This lets us look through\n+  \/\/ the indirection of the spill.\n+  if (is_spill) {\n+    decode_address = decode_address->in(1);\n+    lea_address = lea_address->in(1);\n+  }\n+\n+  \/\/ The leaP* and the decode must have the same parent. If we have a spill, they must have\n+  \/\/ the same grandparent.\n+  if (lea_address != decode_address) {\n+    return false;\n+  }\n+\n+  \/\/ Ensure the decode only has the leaP*s (with the same (grand)parent) and a MachProj leaf as children.\n+  MachProjNode* proj = nullptr;\n+  for (DUIterator_Fast imax, i = decode->fast_outs(imax); i < imax; i++) {\n+    Node* out = decode->fast_out(i);\n+    if (out == lea_derived_oop) {\n+      continue;\n+    }\n+    if (out->is_MachProj() && out->outcnt() == 0) {\n+      proj = out->as_MachProj();\n+      continue;\n+    }\n+    if (out->is_Mach()) {\n+      MachNode* other_lea = out->as_Mach();\n+      if ((other_lea->rule() == leaP32Narrow_rule ||\n+           other_lea->rule() == leaP8Narrow_rule ||\n+           other_lea->rule() == leaPCompressedOopOffset_rule) &&\n+           other_lea->in(AddPNode::Base) == decode &&\n+          (is_spill ? other_lea->in(AddPNode::Address)->in(1)\n+                    : other_lea->in(AddPNode::Address)) == decode_address) {\n+        continue;\n+      }\n+    }\n+    \/\/ There is other stuff we do not expect...\n+    return false;\n+  }\n+\n+  \/\/ Ensure the MachProj is in the same block as the decode and the lea.\n+  if (proj == nullptr || !block->contains(proj)) {\n+    \/\/ This should only fail if we are stressing scheduling.\n+    assert(StressGCM, \"should be scheduled contiguously otherwise\");\n+    return false;\n+  }\n+\n+  \/\/ We now have verified that the decode is redundant and can be removed with a peephole.\n+  \/\/ Remove the projection\n+  block->find_remove(proj);\n+  cfg_->map_node_to_block(proj, nullptr);\n+\n+  \/\/ Rewire the base of all leas currently depending on the decode we are removing.\n+  for (DUIterator_Fast imax, i = decode->fast_outs(imax); i < imax; i++) {\n+    Node* dependant_lea = decode->fast_out(i);\n+    if (dependant_lea->is_Mach() && dependant_lea->as_Mach()->ideal_Opcode() == Op_AddP) {\n+      dependant_lea->set_req(AddPNode::Base, decode_address);\n+      \/\/ This deleted something in the out array, hence adjust i, imax.\n+      --i;\n+      --imax;\n+    }\n+  }\n+\n+  \/\/ Remove spill for the decode if the spill node does not have any other uses.\n+  if (is_spill) {\n+    MachNode* decode_spill = decode->in(1)->as_Mach();\n+    if (decode_spill->outcnt() == 1 && block->contains(decode_spill)) {\n+      decode_spill->set_removed();\n+      block->find_remove(decode_spill);\n+      cfg_->map_node_to_block(decode_spill, nullptr);\n+      decode_spill->del_req(1);\n+    }\n+  }\n+\n+  \/\/ Remove the decode\n+  decode->set_removed();\n+  block->find_remove(decode);\n+  cfg_->map_node_to_block(decode, nullptr);\n+  decode->del_req(1);\n+\n+  return true;\n+}\n+\n","filename":"src\/hotspot\/cpu\/x86\/peephole_x86_64.cpp","additions":138,"deletions":0,"binary":false,"changes":138,"status":"modified"},{"patch":"@@ -39,0 +39,2 @@\n+  static bool lea_remove_redundant(Block* block, int block_index, PhaseCFG* cfg_, PhaseRegAlloc* ra_,\n+                                   MachNode* (*new_root)(), uint inst0_rule);\n","filename":"src\/hotspot\/cpu\/x86\/peephole_x86_64.hpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -14596,0 +14596,18 @@\n+peephole\n+%{\n+  peepmatch (leaPCompressedOopOffset);\n+  peepprocedure (lea_remove_redundant);\n+%}\n+\n+peephole\n+%{\n+  peepmatch (leaP8Narrow);\n+  peepprocedure (lea_remove_redundant);\n+%}\n+\n+peephole\n+%{\n+  peepmatch (leaP32Narrow);\n+  peepprocedure (lea_remove_redundant);\n+%}\n+\n","filename":"src\/hotspot\/cpu\/x86\/x86_64.ad","additions":18,"deletions":0,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -41,4 +41,4 @@\n-define_pd_global(uintx, CodeCacheSegmentSize, 64 COMPILER1_AND_COMPILER2_PRESENT(+64)); \/\/ Tiered compilation has large code-entry alignment.\n-define_pd_global(intx,  CodeEntryAlignment,   32);\n-define_pd_global(intx,  OptoLoopAlignment,    16);\n-define_pd_global(intx,  InlineSmallCode,      1000);\n+define_pd_global(size_t, CodeCacheSegmentSize, 64 COMPILER1_AND_COMPILER2_PRESENT(+64)); \/\/ Tiered compilation has large code-entry alignment.\n+define_pd_global(intx,   CodeEntryAlignment,   32);\n+define_pd_global(intx,   OptoLoopAlignment,    16);\n+define_pd_global(intx,   InlineSmallCode,      1000);\n","filename":"src\/hotspot\/cpu\/zero\/globals_zero.hpp","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -1,44 +0,0 @@\n-\/*\n- * Copyright (c) 2003, 2025, Oracle and\/or its affiliates. All rights reserved.\n- * Copyright 2008 Red Hat, Inc.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\n- *\/\n-\n-#include \"asm\/assembler.inline.hpp\"\n-#include \"entry_zero.hpp\"\n-#include \"interpreter\/zero\/zeroInterpreter.hpp\"\n-#include \"nativeInst_zero.hpp\"\n-#include \"runtime\/sharedRuntime.hpp\"\n-\n-\/\/ This method is called by nmethod::make_not_entrant to\n-\/\/ insert a jump to SharedRuntime::get_handle_wrong_method_stub()\n-\/\/ (dest) at the start of a compiled method (verified_entry) to avoid\n-\/\/ a race where a method is invoked while being made non-entrant.\n-\n-void NativeJump::patch_verified_entry(address entry,\n-                                      address verified_entry,\n-                                      address dest) {\n-  assert(dest == SharedRuntime::get_handle_wrong_method_stub(), \"should be\");\n-\n-  ((ZeroEntry*) verified_entry)->set_entry_point(\n-    (address) ZeroInterpreter::normal_entry);\n-}\n","filename":"src\/hotspot\/cpu\/zero\/nativeInst_zero.cpp","additions":0,"deletions":44,"binary":false,"changes":44,"status":"deleted"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -180,8 +180,0 @@\n-\n-  static void check_verified_entry_alignment(address entry,\n-                                             address verified_entry) {\n-  }\n-\n-  static void patch_verified_entry(address entry,\n-                                   address verified_entry,\n-                                   address dest);\n","filename":"src\/hotspot\/cpu\/zero\/nativeInst_zero.hpp","additions":1,"deletions":9,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,0 +26,3 @@\n+#ifndef OS_AIX_DECODER_AIX_HPP\n+#define OS_AIX_DECODER_AIX_HPP\n+\n@@ -47,0 +50,1 @@\n+#endif \/\/ OS_AIX_DECODER_AIX_HPP\n","filename":"src\/hotspot\/os\/aix\/decoder_aix.hpp","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -882,11 +882,0 @@\n-double os::elapsedVTime() {\n-  struct rusage usage;\n-  int retval = getrusage(RUSAGE_THREAD, &usage);\n-  if (retval == 0) {\n-    return usage.ru_utime.tv_sec + usage.ru_stime.tv_sec + (usage.ru_utime.tv_usec + usage.ru_stime.tv_usec) \/ (1000.0 * 1000);\n-  } else {\n-    \/\/ better than nothing, but not much\n-    return elapsedTime();\n-  }\n-}\n-\n","filename":"src\/hotspot\/os\/aix\/os_aix.cpp","additions":0,"deletions":11,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -785,4 +785,0 @@\n-double os::elapsedVTime() {\n-  \/\/ better than nothing, but not much\n-  return elapsedTime();\n-}\n","filename":"src\/hotspot\/os\/bsd\/os_bsd.cpp","additions":0,"deletions":4,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -65,1 +65,1 @@\n-  CgroupV1Controller* cpuacct = nullptr;\n+  CgroupV1CpuacctController* cpuacct = nullptr;\n@@ -108,0 +108,1 @@\n+    CgroupV2CpuacctController* cpuacct = new CgroupV2CpuacctController(cpu);\n@@ -110,1 +111,1 @@\n-    return new CgroupV2Subsystem(memory, cpu, mem_other);\n+    return new CgroupV2Subsystem(memory, cpu, cpuacct, mem_other);\n@@ -153,1 +154,1 @@\n-        cpuacct = new CgroupV1Controller(info._root_mount_path, info._mount_path, info._read_only);\n+        cpuacct = new CgroupV1CpuacctController(CgroupV1Controller(info._root_mount_path, info._mount_path, info._read_only));\n@@ -859,0 +860,4 @@\n+jlong CgroupSubsystem::memory_throttle_limit_in_bytes() {\n+  return memory_controller()->controller()->memory_throttle_limit_in_bytes();\n+}\n+\n@@ -887,0 +892,4 @@\n+jlong CgroupSubsystem::cpu_usage_in_micros() {\n+  return cpuacct_controller()->cpu_usage_in_micros();\n+}\n+\n","filename":"src\/hotspot\/os\/linux\/cgroupSubsystem_linux.cpp","additions":12,"deletions":3,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -219,0 +219,12 @@\n+\/\/ Pure virtual class representing version agnostic CPU accounting controllers\n+class CgroupCpuacctController: public CHeapObj<mtInternal> {\n+  public:\n+    virtual jlong cpu_usage_in_micros() = 0;\n+    virtual bool needs_hierarchy_adjustment() = 0;\n+    virtual bool is_read_only() = 0;\n+    virtual const char* subsystem_path() = 0;\n+    virtual void set_subsystem_path(const char* cgroup_path) = 0;\n+    virtual const char* mount_point() = 0;\n+    virtual const char* cgroup_path() = 0;\n+};\n+\n@@ -227,0 +239,1 @@\n+    virtual jlong memory_throttle_limit_in_bytes() = 0;\n@@ -253,0 +266,1 @@\n+    virtual CgroupCpuacctController* cpuacct_controller() = 0;\n@@ -258,0 +272,2 @@\n+    jlong cpu_usage_in_micros();\n+\n@@ -262,0 +278,1 @@\n+    jlong memory_throttle_limit_in_bytes();\n","filename":"src\/hotspot\/os\/linux\/cgroupSubsystem_linux.hpp","additions":18,"deletions":1,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -251,0 +251,6 @@\n+jlong CgroupV1MemoryController::memory_throttle_limit_in_bytes() {\n+  \/\/ Log this string at trace level so as to make tests happy.\n+  log_trace(os, container)(\"Memory Throttle Limit is not supported.\");\n+  return OSCONTAINER_ERROR; \/\/ not supported\n+}\n+\n@@ -254,1 +260,1 @@\n-                      CgroupV1Controller* cpuacct,\n+                      CgroupV1CpuacctController* cpuacct,\n@@ -419,0 +425,7 @@\n+jlong CgroupV1CpuacctController::cpu_usage_in_micros() {\n+  julong cpu_usage;\n+  CONTAINER_READ_NUMBER_CHECKED(reader(), \"\/cpuacct.usage\", \"CPU Usage\", cpu_usage);\n+  \/\/ Output is in nanoseconds, convert to microseconds.\n+  return (jlong)cpu_usage \/ 1000;\n+}\n+\n","filename":"src\/hotspot\/os\/linux\/cgroupV1Subsystem_linux.cpp","additions":14,"deletions":1,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -85,0 +85,1 @@\n+    jlong memory_throttle_limit_in_bytes() override;\n@@ -143,0 +144,29 @@\n+class CgroupV1CpuacctController final : public CgroupCpuacctController {\n+\n+  private:\n+    CgroupV1Controller _reader;\n+    CgroupV1Controller* reader() { return &_reader; }\n+  public:\n+    jlong cpu_usage_in_micros() override;\n+    void set_subsystem_path(const char *cgroup_path) override {\n+      reader()->set_subsystem_path(cgroup_path);\n+    }\n+    bool is_read_only() override {\n+      return reader()->is_read_only();\n+    }\n+    const char* subsystem_path() override {\n+      return reader()->subsystem_path();\n+    }\n+    const char* mount_point() override {\n+      return reader()->mount_point();\n+    }\n+    bool needs_hierarchy_adjustment() override {\n+      return reader()->needs_hierarchy_adjustment();\n+    }\n+    const char* cgroup_path() override { return reader()->cgroup_path(); }\n+\n+  public:\n+    CgroupV1CpuacctController(const CgroupV1Controller& reader) : _reader(reader) {\n+    }\n+};\n+\n@@ -148,1 +178,1 @@\n-                      CgroupV1Controller* cpuacct,\n+                      CgroupV1CpuacctController* cpuacct,\n@@ -168,0 +198,1 @@\n+    CgroupCpuacctController* cpuacct_controller() { return _cpuacct; }\n@@ -174,1 +205,1 @@\n-    CgroupV1Controller* _cpuacct = nullptr;\n+    CgroupV1CpuacctController* _cpuacct = nullptr;\n","filename":"src\/hotspot\/os\/linux\/cgroupV1Subsystem_linux.hpp","additions":34,"deletions":3,"binary":false,"changes":37,"status":"modified"},{"patch":"@@ -3,0 +3,1 @@\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -117,0 +118,1 @@\n+                                     CgroupV2CpuacctController* cpuacct,\n@@ -123,0 +125,1 @@\n+  _cpuacct = cpuacct;\n@@ -155,0 +158,11 @@\n+jlong CgroupV2CpuController::cpu_usage_in_micros() {\n+  julong cpu_usage;\n+  bool is_ok = reader()->read_numerical_key_value(\"\/cpu.stat\", \"usage_usec\", &cpu_usage);\n+  if (!is_ok) {\n+    log_trace(os, container)(\"CPU Usage failed: %d\", OSCONTAINER_ERROR);\n+    return OSCONTAINER_ERROR;\n+  }\n+  log_trace(os, container)(\"CPU Usage is: \" JULONG_FORMAT, cpu_usage);\n+  return (jlong)cpu_usage;\n+}\n+\n@@ -176,0 +190,6 @@\n+jlong CgroupV2MemoryController::memory_throttle_limit_in_bytes() {\n+  jlong mem_throttle_limit;\n+  CONTAINER_READ_NUMBER_CHECKED_MAX(reader(), \"\/memory.high\", \"Memory Throttle Limit\", mem_throttle_limit);\n+  return mem_throttle_limit;\n+}\n+\n@@ -177,3 +197,3 @@\n-  \/\/ Log this string at trace level so as to make tests happy.\n-  log_trace(os, container)(\"Maximum Memory Usage is not supported.\");\n-  return OSCONTAINER_ERROR; \/\/ not supported\n+  julong mem_max_usage;\n+  CONTAINER_READ_NUMBER_CHECKED(reader(), \"\/memory.peak\", \"Maximum Memory Usage\", mem_max_usage);\n+  return mem_max_usage;\n","filename":"src\/hotspot\/os\/linux\/cgroupV2Subsystem_linux.cpp","additions":23,"deletions":3,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -3,0 +3,1 @@\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -64,0 +65,28 @@\n+    jlong cpu_usage_in_micros();\n+    bool is_read_only() override {\n+      return reader()->is_read_only();\n+    }\n+    const char* subsystem_path() override {\n+      return reader()->subsystem_path();\n+    }\n+    bool needs_hierarchy_adjustment() override {\n+      return reader()->needs_hierarchy_adjustment();\n+    }\n+    void set_subsystem_path(const char* cgroup_path) override {\n+      reader()->set_subsystem_path(cgroup_path);\n+    }\n+    const char* mount_point() override { return reader()->mount_point(); }\n+    const char* cgroup_path() override { return reader()->cgroup_path(); }\n+};\n+\n+class CgroupV2CpuacctController: public CgroupCpuacctController {\n+  private:\n+    CgroupV2CpuController* _reader;\n+    CgroupV2CpuController* reader() { return _reader; }\n+  public:\n+    CgroupV2CpuacctController(CgroupV2CpuController* reader) : _reader(reader) {\n+    }\n+    \/\/ In cgroup v2, cpu usage is a part of the cpu controller.\n+    jlong cpu_usage_in_micros() override {\n+      return reader()->cpu_usage_in_micros();\n+    }\n@@ -92,0 +121,1 @@\n+    jlong memory_throttle_limit_in_bytes() override;\n@@ -121,0 +151,2 @@\n+    CgroupCpuacctController* _cpuacct = nullptr;\n+\n@@ -126,0 +158,1 @@\n+                      CgroupV2CpuacctController* cpuacct,\n@@ -140,0 +173,1 @@\n+    CgroupCpuacctController* cpuacct_controller() override { return _cpuacct; };\n","filename":"src\/hotspot\/os\/linux\/cgroupV2Subsystem_linux.hpp","additions":34,"deletions":0,"binary":false,"changes":34,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -125,0 +125,5 @@\n+jlong OSContainer::memory_throttle_limit_in_bytes() {\n+  assert(cgroup_subsystem != nullptr, \"cgroup subsystem not available\");\n+  return cgroup_subsystem->memory_throttle_limit_in_bytes();\n+}\n+\n@@ -180,0 +185,5 @@\n+jlong OSContainer::cpu_usage_in_micros() {\n+  assert(cgroup_subsystem != nullptr, \"cgroup subsystem not available\");\n+  return cgroup_subsystem->cpu_usage_in_micros();\n+}\n+\n","filename":"src\/hotspot\/os\/linux\/osContainer_linux.cpp","additions":11,"deletions":1,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -57,0 +57,1 @@\n+  static jlong memory_throttle_limit_in_bytes();\n@@ -72,0 +73,2 @@\n+  static jlong cpu_usage_in_micros();\n+\n","filename":"src\/hotspot\/os\/linux\/osContainer_linux.hpp","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -1490,10 +1490,0 @@\n-double os::elapsedVTime() {\n-  struct rusage usage;\n-  int retval = getrusage(RUSAGE_THREAD, &usage);\n-  if (retval == 0) {\n-    return (double) (usage.ru_utime.tv_sec + usage.ru_stime.tv_sec) + (double) (usage.ru_utime.tv_usec + usage.ru_stime.tv_usec) \/ (1000 * 1000);\n-  } else {\n-    \/\/ better than nothing, but not much\n-    return elapsedTime();\n-  }\n-}\n@@ -2490,0 +2480,8 @@\n+  jlong j = OSContainer::cpu_usage_in_micros();\n+  st->print(\"cpu_usage_in_micros: \");\n+  if (j >= 0) {\n+    st->print_cr(JLONG_FORMAT, j);\n+  } else {\n+    st->print_cr(\"%s\", j == OSCONTAINER_ERROR ? \"not supported\" : \"no usage\");\n+  }\n+\n@@ -2493,0 +2491,1 @@\n+  OSContainer::print_container_helper(st, OSContainer::memory_throttle_limit_in_bytes(), \"memory_throttle_limit_in_bytes\");\n@@ -2500,1 +2499,1 @@\n-  jlong j = OSContainer::pids_max();\n+  j = OSContainer::pids_max();\n","filename":"src\/hotspot\/os\/linux\/os_linux.cpp","additions":10,"deletions":11,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -1602,2 +1602,0 @@\n-bool os::supports_vtime() { return true; }\n-\n","filename":"src\/hotspot\/os\/posix\/os_posix.cpp","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1197,15 +1197,0 @@\n-bool os::supports_vtime() { return true; }\n-\n-double os::elapsedVTime() {\n-  FILETIME created;\n-  FILETIME exited;\n-  FILETIME kernel;\n-  FILETIME user;\n-  if (GetThreadTimes(GetCurrentThread(), &created, &exited, &kernel, &user) != 0) {\n-    \/\/ the resolution of windows_to_java_time() should be sufficient (ms)\n-    return (double) (windows_to_java_time(kernel) + windows_to_java_time(user)) \/ MILLIUNITS;\n-  } else {\n-    return elapsedTime();\n-  }\n-}\n-\n@@ -2755,13 +2740,0 @@\n-#ifdef _M_ARM64\n-    if (in_java &&\n-        (exception_code == EXCEPTION_ILLEGAL_INSTRUCTION ||\n-          exception_code == EXCEPTION_ILLEGAL_INSTRUCTION_2)) {\n-      if (nativeInstruction_at(pc)->is_sigill_not_entrant()) {\n-        if (TraceTraps) {\n-          tty->print_cr(\"trap: not_entrant\");\n-        }\n-        return Handle_Exception(exceptionInfo, SharedRuntime::get_handle_wrong_method_stub());\n-      }\n-    }\n-#endif\n-\n","filename":"src\/hotspot\/os\/windows\/os_windows.cpp","additions":0,"deletions":28,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -232,10 +232,1 @@\n-      \/\/ Handle signal from NativeJump::patch_verified_entry().\n-      if (sig == SIGILL && nativeInstruction_at(pc)->is_sigill_not_entrant()) {\n-        if (TraceTraps) {\n-          tty->print_cr(\"trap: not_entrant\");\n-        }\n-        stub = SharedRuntime::get_handle_wrong_method_stub();\n-        goto run_stub;\n-      }\n-\n-      else if ((sig == (USE_POLL_BIT_ONLY ? SIGTRAP : SIGSEGV)) &&\n+      if ((sig == (USE_POLL_BIT_ONLY ? SIGTRAP : SIGSEGV)) &&\n","filename":"src\/hotspot\/os_cpu\/aix_ppc\/os_aix_ppc.cpp","additions":1,"deletions":10,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -274,8 +274,1 @@\n-      \/\/ Handle signal from NativeJump::patch_verified_entry().\n-      if ((sig == SIGILL)\n-          && nativeInstruction_at(pc)->is_sigill_not_entrant()) {\n-        if (TraceTraps) {\n-          tty->print_cr(\"trap: not_entrant\");\n-        }\n-        stub = SharedRuntime::get_handle_wrong_method_stub();\n-      } else if ((sig == SIGSEGV || sig == SIGBUS) && SafepointMechanism::is_poll_address((address)info->si_addr)) {\n+      if ((sig == SIGSEGV || sig == SIGBUS) && SafepointMechanism::is_poll_address((address)info->si_addr)) {\n","filename":"src\/hotspot\/os_cpu\/bsd_aarch64\/os_bsd_aarch64.cpp","additions":1,"deletions":8,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -95,0 +95,3 @@\n+  if (cpu_has(\"hw.optional.arm.FEAT_SB\")) {\n+    _features |= CPU_SB;\n+  }\n","filename":"src\/hotspot\/os_cpu\/bsd_aarch64\/vm_version_bsd_aarch64.cpp","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -235,8 +235,1 @@\n-      \/\/ Handle signal from NativeJump::patch_verified_entry().\n-      if ((sig == SIGILL || sig == SIGTRAP)\n-          && nativeInstruction_at(pc)->is_sigill_not_entrant()) {\n-        if (TraceTraps) {\n-          tty->print_cr(\"trap: not_entrant (%s)\", (sig == SIGTRAP) ? \"SIGTRAP\" : \"SIGILL\");\n-        }\n-        stub = SharedRuntime::get_handle_wrong_method_stub();\n-      } else if (sig == SIGSEGV && SafepointMechanism::is_poll_address((address)info->si_addr)) {\n+      if (sig == SIGSEGV && SafepointMechanism::is_poll_address((address)info->si_addr)) {\n","filename":"src\/hotspot\/os_cpu\/linux_aarch64\/os_linux_aarch64.cpp","additions":1,"deletions":8,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -74,0 +74,4 @@\n+#ifndef HWCAP_SB\n+#define HWCAP_SB (1 << 29)\n+#endif\n+\n@@ -146,0 +150,1 @@\n+      HWCAP_SB      |\n","filename":"src\/hotspot\/os_cpu\/linux_aarch64\/vm_version_linux_aarch64.cpp","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -362,5 +362,0 @@\n-      } else if (sig == SIGILL &&\n-                 *(int*)pc ==\n-                     NativeInstruction::not_entrant_illegal_instruction) {\n-        \/\/ Not entrant\n-        stub = SharedRuntime::get_handle_wrong_method_stub();\n","filename":"src\/hotspot\/os_cpu\/linux_arm\/os_linux_arm.cpp","additions":0,"deletions":5,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -261,9 +261,1 @@\n-      \/\/ Handle signal from NativeJump::patch_verified_entry().\n-      if (sig == SIGILL && nativeInstruction_at(pc)->is_sigill_not_entrant()) {\n-        if (TraceTraps) {\n-          tty->print_cr(\"trap: not_entrant\");\n-        }\n-        stub = SharedRuntime::get_handle_wrong_method_stub();\n-      }\n-\n-      else if ((sig == (USE_POLL_BIT_ONLY ? SIGTRAP : SIGSEGV)) &&\n+      if ((sig == (USE_POLL_BIT_ONLY ? SIGTRAP : SIGSEGV)) &&\n","filename":"src\/hotspot\/os_cpu\/linux_ppc\/os_linux_ppc.cpp","additions":1,"deletions":9,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -226,8 +226,1 @@\n-      \/\/ Handle signal from NativeJump::patch_verified_entry().\n-      if ((sig == SIGILL || sig == SIGTRAP)\n-          && nativeInstruction_at(pc)->is_sigill_not_entrant()) {\n-        if (TraceTraps) {\n-          tty->print_cr(\"trap: not_entrant (%s)\", (sig == SIGTRAP) ? \"SIGTRAP\" : \"SIGILL\");\n-        }\n-        stub = SharedRuntime::get_handle_wrong_method_stub();\n-      } else if (sig == SIGSEGV && SafepointMechanism::is_poll_address((address)info->si_addr)) {\n+      if (sig == SIGSEGV && SafepointMechanism::is_poll_address((address)info->si_addr)) {\n","filename":"src\/hotspot\/os_cpu\/linux_riscv\/os_linux_riscv.cpp","additions":1,"deletions":8,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -260,9 +260,1 @@\n-      \/\/ Handle signal from NativeJump::patch_verified_entry().\n-      if (sig == SIGILL && nativeInstruction_at(pc)->is_sigill_not_entrant()) {\n-        if (TraceTraps) {\n-          tty->print_cr(\"trap: not_entrant (SIGILL)\");\n-        }\n-        stub = SharedRuntime::get_handle_wrong_method_stub();\n-      }\n-\n-      else if (sig == SIGSEGV &&\n+      if (sig == SIGSEGV &&\n","filename":"src\/hotspot\/os_cpu\/linux_s390\/os_linux_s390.cpp","additions":1,"deletions":9,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -333,1 +333,1 @@\n-  code->initialize_consts_size(Compilation::desired_max_constant_size());\n+  code->initialize_consts_size(Compilation::desired_max_constant_size);\n@@ -671,1 +671,1 @@\n-    if (DeoptC1 && UseCHA && !(ik->has_subklass() || ik->is_interface())) {\n+    if (UseCHA && !(ik->has_subklass() || ik->is_interface())) {\n","filename":"src\/hotspot\/share\/c1\/c1_Compilation.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -219,6 +219,2 @@\n-  static uint desired_max_code_buffer_size() {\n-    return (uint)NMethodSizeLimit;  \/\/ default 64K\n-  }\n-  static uint desired_max_constant_size() {\n-    return desired_max_code_buffer_size() \/ 10;\n-  }\n+  const static uint desired_max_code_buffer_size = 64*K * wordSize;\n+  const static uint desired_max_constant_size = desired_max_code_buffer_size \/ 10;\n","filename":"src\/hotspot\/share\/c1\/c1_Compilation.hpp","additions":2,"deletions":6,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -82,1 +82,1 @@\n-  return Compilation::desired_max_code_buffer_size() + Compilation::desired_max_constant_size();\n+  return Compilation::desired_max_code_buffer_size + Compilation::desired_max_constant_size;\n@@ -90,2 +90,1 @@\n-  \/\/ setup CodeBuffer.  Preallocate a BufferBlob of size\n-  \/\/ NMethodSizeLimit plus some extra space for constants.\n+  \/\/ Setup CodeBuffer.\n@@ -145,1 +144,1 @@\n-  case vmIntrinsics::_Reference_get:\n+  case vmIntrinsics::_Reference_get0:\n","filename":"src\/hotspot\/share\/c1\/c1_Compiler.cpp","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -1858,1 +1858,0 @@\n-  assert(DeoptC1, \"need debug information\");\n@@ -2004,1 +2003,1 @@\n-  if (UseCHA && DeoptC1 && target->is_loaded() &&\n+  if (UseCHA && target->is_loaded() &&\n@@ -2255,1 +2254,1 @@\n-      if (DeoptC1 && UseCHA && !(ik->has_subklass() || ik->is_interface())) {\n+      if (UseCHA && !(ik->has_subklass() || ik->is_interface())) {\n@@ -3344,1 +3343,1 @@\n-  case vmIntrinsics::_Reference_get:\n+  case vmIntrinsics::_Reference_get0:\n","filename":"src\/hotspot\/share\/c1\/c1_GraphBuilder.cpp","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -1188,1 +1188,1 @@\n-void LIRGenerator::do_Reference_get(Intrinsic* x) {\n+void LIRGenerator::do_Reference_get0(Intrinsic* x) {\n@@ -2917,2 +2917,2 @@\n-  case vmIntrinsics::_Reference_get:\n-    do_Reference_get(x);\n+  case vmIntrinsics::_Reference_get0:\n+    do_Reference_get0(x);\n","filename":"src\/hotspot\/share\/c1\/c1_LIRGenerator.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -269,1 +269,1 @@\n-  void do_Reference_get(Intrinsic* x);\n+  void do_Reference_get0(Intrinsic* x);\n","filename":"src\/hotspot\/share\/c1\/c1_LIRGenerator.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -821,1 +821,1 @@\n-    if (nm->make_not_entrant(nmethod::ChangeReason::C1_deoptimize)) {\n+    if (nm->make_not_entrant(nmethod::InvalidationReason::C1_DEOPTIMIZE)) {\n@@ -1113,1 +1113,1 @@\n-      nm->make_not_entrant(nmethod::ChangeReason::C1_codepatch);\n+      nm->make_not_entrant(nmethod::InvalidationReason::C1_CODEPATCH);\n@@ -1361,1 +1361,1 @@\n-      nm->make_not_entrant(nmethod::ChangeReason::C1_deoptimize_for_patching);\n+      nm->make_not_entrant(nmethod::InvalidationReason::C1_DEOPTIMIZE_FOR_PATCHING);\n@@ -1489,1 +1489,1 @@\n-  nm->make_not_entrant(nmethod::ChangeReason::C1_predicate_failed_trap);\n+  nm->make_not_entrant(nmethod::InvalidationReason::C1_PREDICATE_FAILED_TRAP);\n","filename":"src\/hotspot\/share\/c1\/c1_Runtime1.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -247,3 +247,0 @@\n-  develop(bool, DeoptC1, true,                                              \\\n-          \"Use deoptimization in C1\")                                       \\\n-                                                                            \\\n@@ -277,6 +274,0 @@\n-  \/* The compiler assumes, in many places, that methods are at most 1MB. *\/ \\\n-  \/* Therefore, we restrict this flag to at most 1MB.                    *\/ \\\n-  develop(intx, NMethodSizeLimit, (64*K)*wordSize,                          \\\n-          \"Maximum size of a compiled method.\")                             \\\n-          range(0, 1*M)                                                     \\\n-                                                                            \\\n","filename":"src\/hotspot\/share\/c1\/c1_globals.hpp","additions":0,"deletions":9,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -395,1 +395,1 @@\n-  int mt_index = cp->operand_argument_index_at(bsms_attribute_index, arg_i);\n+  int mt_index = cp->bsm_attribute_entry(bsms_attribute_index)->argument_index(arg_i);\n@@ -411,1 +411,1 @@\n-  int mh_index = cp->operand_argument_index_at(bsms_attribute_index, arg_i);\n+  int mh_index = cp->bsm_attribute_entry(bsms_attribute_index)->argument_index(arg_i);\n@@ -517,1 +517,1 @@\n-    int arg_count = cp->operand_argument_count_at(bsms_attribute_index);\n+    int arg_count = cp->bsm_attribute_entry(bsms_attribute_index)->argument_count();\n","filename":"src\/hotspot\/share\/cds\/aotConstantPoolResolver.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -385,1 +385,1 @@\n-class VM_PopulateDynamicDumpSharedSpace: public VM_GC_Sync_Operation {\n+class VM_PopulateDynamicDumpSharedSpace: public VM_Heap_Sync_Operation {\n@@ -389,1 +389,1 @@\n-  : VM_GC_Sync_Operation(), _builder(archive_name) {}\n+  : VM_Heap_Sync_Operation(), _builder(archive_name) {}\n","filename":"src\/hotspot\/share\/cds\/dynamicArchive.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1291,0 +1291,4 @@\n+  if (!ls.is_enabled()) {\n+    return;\n+  }\n+\n","filename":"src\/hotspot\/share\/cds\/metaspaceShared.cpp","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -805,1 +805,1 @@\n-      nm->make_not_entrant(nmethod::ChangeReason::CI_replay);\n+      nm->make_not_entrant(nmethod::InvalidationReason::CI_REPLAY);\n","filename":"src\/hotspot\/share\/ci\/ciReplay.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -68,0 +68,1 @@\n+#include \"oops\/jmethodIDTable.hpp\"\n@@ -581,0 +582,27 @@\n+void ClassLoaderData::add_jmethod_id(jmethodID mid) {\n+  MutexLocker m1(metaspace_lock(), Mutex::_no_safepoint_check_flag);\n+  if (_jmethod_ids == nullptr) {\n+    _jmethod_ids = new (mtClass) GrowableArray<jmethodID>(32, mtClass);\n+  }\n+  _jmethod_ids->push(mid);\n+}\n+\n+\/\/ Method::remove_jmethod_ids removes jmethodID entries from the table which\n+\/\/ releases memory.\n+\/\/ Because native code (e.g., JVMTI agent) holding jmethod_ids may access them\n+\/\/ after the associated classes and class loader are unloaded, subsequent lookups\n+\/\/ for these ids will return null since they are no longer found in the table.\n+\/\/ The Java Native Interface Specification says \"method ID\n+\/\/ does not prevent the VM from unloading the class from which the ID has\n+\/\/ been derived. After the class is unloaded, the method or field ID becomes\n+\/\/ invalid\".\n+void ClassLoaderData::remove_jmethod_ids() {\n+  MutexLocker ml(JmethodIdCreation_lock, Mutex::_no_safepoint_check_flag);\n+  for (int i = 0; i < _jmethod_ids->length(); i++) {\n+    jmethodID mid = _jmethod_ids->at(i);\n+    JmethodIDTable::remove(mid);\n+  }\n+  delete _jmethod_ids;\n+  _jmethod_ids = nullptr;\n+}\n+\n@@ -602,11 +630,0 @@\n-  \/\/ Method::clear_jmethod_ids only sets the jmethod_ids to null without\n-  \/\/ releasing the memory for related JNIMethodBlocks and JNIMethodBlockNodes.\n-  \/\/ This is done intentionally because native code (e.g. JVMTI agent) holding\n-  \/\/ jmethod_ids may access them after the associated classes and class loader\n-  \/\/ are unloaded. The Java Native Interface Specification says \"method ID\n-  \/\/ does not prevent the VM from unloading the class from which the ID has\n-  \/\/ been derived. After the class is unloaded, the method or field ID becomes\n-  \/\/ invalid\". In real world usages, the native code may rely on jmethod_ids\n-  \/\/ being null after class unloading. Hence, it is unsafe to free the memory\n-  \/\/ from the VM side without knowing when native code is going to stop using\n-  \/\/ them.\n@@ -614,1 +631,1 @@\n-    Method::clear_jmethod_ids(this);\n+    remove_jmethod_ids();\n@@ -1040,3 +1057,1 @@\n-    out->print   (\" - jmethod count       \");\n-    Method::print_jmethod_ids_count(this, out);\n-    out->print_cr(\"\");\n+    out->print_cr(\" - jmethod count       %d\", _jmethod_ids->length());\n","filename":"src\/hotspot\/share\/classfile\/classLoaderData.cpp","additions":30,"deletions":15,"binary":false,"changes":45,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2012, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2012, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -56,1 +56,0 @@\n-class JNIMethodBlock;\n@@ -146,4 +145,3 @@\n-  \/\/ These method IDs are created for the class loader and set to null when the\n-  \/\/ class loader is unloaded.  They are rarely freed, only for redefine classes\n-  \/\/ and if they lose a data race in InstanceKlass.\n-  JNIMethodBlock*                  _jmethod_ids;\n+  \/\/ These method IDs are created for the class loader and removed when the\n+  \/\/ class loader is unloaded.\n+  GrowableArray<jmethodID>*        _jmethod_ids;\n@@ -319,2 +317,3 @@\n-  JNIMethodBlock* jmethod_ids() const              { return _jmethod_ids; }\n-  void set_jmethod_ids(JNIMethodBlock* new_block)  { _jmethod_ids = new_block; }\n+  void add_jmethod_id(jmethodID id);\n+  void remove_jmethod_ids();\n+  GrowableArray<jmethodID>* jmethod_ids() const { return _jmethod_ids; }\n","filename":"src\/hotspot\/share\/classfile\/classLoaderData.hpp","additions":7,"deletions":8,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -247,1 +247,1 @@\n-  if (frame_type < 64) {\n+  if (frame_type <= SAME_FRAME_END) {\n@@ -269,1 +269,1 @@\n-  if (frame_type < 128) {\n+  if (frame_type <= SAME_LOCALS_1_STACK_ITEM_FRAME_END) {\n@@ -272,1 +272,1 @@\n-      offset = frame_type - 64;\n+      offset = frame_type - SAME_LOCALS_1_STACK_ITEM_FRAME_START;\n@@ -279,1 +279,1 @@\n-      offset = _prev_frame->offset() + frame_type - 63;\n+      offset = _prev_frame->offset() + frame_type - (SAME_LOCALS_1_STACK_ITEM_FRAME_START - 1);\n@@ -343,1 +343,1 @@\n-  if (frame_type <= SAME_EXTENDED) {\n+  if (frame_type <= SAME_FRAME_EXTENDED) {\n@@ -347,1 +347,1 @@\n-    int chops = SAME_EXTENDED - frame_type;\n+    int chops = SAME_FRAME_EXTENDED - frame_type;\n@@ -350,0 +350,1 @@\n+    assert(chops == 0 || (frame_type >= CHOP_FRAME_START && frame_type <= CHOP_FRAME_END), \"should be\");\n@@ -383,1 +384,1 @@\n-  } else if (frame_type < SAME_EXTENDED + 4) {\n+  } else if (frame_type <= APPEND_FRAME_END) {\n@@ -385,1 +386,2 @@\n-    int appends = frame_type - SAME_EXTENDED;\n+    assert(frame_type >= APPEND_FRAME_START && frame_type <= APPEND_FRAME_END, \"should be\");\n+    int appends = frame_type - APPEND_FRAME_START + 1;\n@@ -415,1 +417,1 @@\n-  if (frame_type == FULL) {\n+  if (frame_type == FULL_FRAME) {\n","filename":"src\/hotspot\/share\/classfile\/stackMapTable.cpp","additions":11,"deletions":9,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -109,0 +109,1 @@\n+  friend class VM_RedefineClasses;\n@@ -151,0 +152,6 @@\n+    SAME_FRAME_START = 0,\n+    SAME_FRAME_END = 63,\n+    SAME_LOCALS_1_STACK_ITEM_FRAME_START = 64,\n+    SAME_LOCALS_1_STACK_ITEM_FRAME_END = 127,\n+    RESERVED_START = 128,\n+    RESERVED_END = 246,\n@@ -152,2 +159,6 @@\n-    SAME_EXTENDED = 251,\n-    FULL = 255\n+    CHOP_FRAME_START = 248,\n+    CHOP_FRAME_END = 250,\n+    SAME_FRAME_EXTENDED = 251,\n+    APPEND_FRAME_START = 252,\n+    APPEND_FRAME_END = 254,\n+    FULL_FRAME = 255\n","filename":"src\/hotspot\/share\/classfile\/stackMapTable.hpp","additions":14,"deletions":3,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -102,1 +102,1 @@\n-  case vmIntrinsics::_Reference_get:\n+  case vmIntrinsics::_Reference_get0:\n@@ -247,1 +247,1 @@\n-    case vmIntrinsics::_Reference_get:\n+    case vmIntrinsics::_Reference_get0:\n","filename":"src\/hotspot\/share\/classfile\/vmIntrinsics.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -464,1 +464,1 @@\n-  do_intrinsic(_Reference_get,              java_lang_ref_Reference, get_name,       void_object_signature,    F_R)     \\\n+  do_intrinsic(_Reference_get0,             java_lang_ref_Reference, get0_name,      void_object_signature,    F_RN)    \\\n","filename":"src\/hotspot\/share\/classfile\/vmIntrinsics.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -425,1 +425,1 @@\n-  template(get_name,                                  \"get\")                                      \\\n+  template(get0_name,                                 \"get0\")                                     \\\n","filename":"src\/hotspot\/share\/classfile\/vmSymbols.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -436,1 +436,1 @@\n-  size_t size_initial = MIN2((size_t)InitialCodeCacheSize, rs.size());\n+  size_t size_initial = MIN2(InitialCodeCacheSize, rs.size());\n@@ -885,0 +885,1 @@\n+  if (!VerifyInlineCaches) return;\n@@ -1109,1 +1110,1 @@\n-  assert(CodeCacheSegmentSize >= (uintx)CodeEntryAlignment, \"CodeCacheSegmentSize must be large enough to align entry points\");\n+  assert(CodeCacheSegmentSize >= (size_t)CodeEntryAlignment, \"CodeCacheSegmentSize must be large enough to align entry points\");\n@@ -1111,1 +1112,1 @@\n-  assert(CodeCacheSegmentSize >= (uintx)OptoLoopAlignment,  \"CodeCacheSegmentSize must be large enough to align inner loops\");\n+  assert(CodeCacheSegmentSize >= (size_t)OptoLoopAlignment,  \"CodeCacheSegmentSize must be large enough to align inner loops\");\n@@ -1364,1 +1365,1 @@\n-      nm->make_not_entrant(nmethod::ChangeReason::marked_for_deoptimization);\n+      nm->make_not_entrant(nmethod::InvalidationReason::MARKED_FOR_DEOPTIMIZATION);\n","filename":"src\/hotspot\/share\/code\/codeCache.cpp","additions":5,"deletions":4,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -31,1 +31,0 @@\n-#include \"code\/relocInfo.hpp\"\n@@ -695,7 +694,0 @@\n-  if (!is_in_use()) {\n-    low_boundary += NativeJump::instruction_size;\n-    \/\/ %%% Note:  On SPARC we patch only a 4-byte trap, not a full NativeJump.\n-    \/\/ This means that the low_boundary is going to be a little too high.\n-    \/\/ This shouldn't matter, since oops of non-entrant methods are never used.\n-    \/\/ In fact, why are we bothering to look at oops in a non-entrant method??\n-  }\n@@ -1656,4 +1648,0 @@\n-  \/\/ Enter a critical section to prevent a race with deopts that patch code and updates the relocation info.\n-  \/\/ Unfortunately, we have to lock the NMethodState_lock before the tty lock due to the deadlock rules and\n-  \/\/ cannot lock in a more finely grained manner.\n-  ConditionalMutexLocker ml(NMethodState_lock, !NMethodState_lock->owned_by_self(), Mutex::_no_safepoint_check_flag);\n@@ -1978,1 +1966,1 @@\n-void nmethod::log_state_change(ChangeReason change_reason) const {\n+void nmethod::log_state_change(InvalidationReason invalidation_reason) const {\n@@ -1983,1 +1971,1 @@\n-                       os::current_thread_id(), change_reason_to_string(change_reason));\n+                       os::current_thread_id(), invalidation_reason_to_string(invalidation_reason));\n@@ -1992,1 +1980,1 @@\n-  ss.print(\"made not entrant: %s\", change_reason_to_string(change_reason));\n+  ss.print(\"made not entrant: %s\", invalidation_reason_to_string(invalidation_reason));\n@@ -2007,1 +1995,1 @@\n-bool nmethod::make_not_entrant(ChangeReason change_reason) {\n+bool nmethod::make_not_entrant(InvalidationReason invalidation_reason) {\n@@ -2043,13 +2031,1 @@\n-      NativeJump::patch_verified_entry(entry_point(), verified_entry_point(),\n-                                       SharedRuntime::get_handle_wrong_method_stub());\n-\n-      \/\/ Update the relocation info for the patched entry.\n-      \/\/ First, get the old relocation info...\n-      RelocIterator iter(this, verified_entry_point(), verified_entry_point() + 8);\n-      if (iter.next() && iter.addr() == verified_entry_point()) {\n-        Relocation* old_reloc = iter.reloc();\n-        \/\/ ...then reset the iterator to update it.\n-        RelocIterator iter(this, verified_entry_point(), verified_entry_point() + 8);\n-        relocInfo::change_reloc_info_for_address(&iter, verified_entry_point(), old_reloc->type(),\n-                                                 relocInfo::relocType::runtime_call_type);\n-      }\n+      BarrierSet::barrier_set()->barrier_set_nmethod()->make_not_entrant(this);\n@@ -2076,1 +2052,1 @@\n-    log_state_change(change_reason);\n+    log_state_change(invalidation_reason);\n@@ -2087,1 +2063,1 @@\n-    nmethod_data->invalidate_nmethod_mirror(this);\n+    nmethod_data->invalidate_nmethod_mirror(this, invalidation_reason);\n@@ -2125,1 +2101,3 @@\n-    nmethod_data->invalidate_nmethod_mirror(this);\n+    nmethod_data->invalidate_nmethod_mirror(this, is_cold() ?\n+            nmethod::InvalidationReason::UNLOADING_COLD :\n+            nmethod::InvalidationReason::UNLOADING);\n@@ -2945,3 +2923,0 @@\n-  \/\/ Make sure all the entry points are correctly aligned for patching.\n-  NativeJump::check_verified_entry_alignment(entry_point(), verified_entry_point());\n-\n","filename":"src\/hotspot\/share\/code\/nmethod.cpp","additions":10,"deletions":35,"binary":false,"changes":45,"status":"modified"},{"patch":"@@ -474,23 +474,26 @@\n-  enum class ChangeReason : u1 {\n-    C1_codepatch,\n-    C1_deoptimize,\n-    C1_deoptimize_for_patching,\n-    C1_predicate_failed_trap,\n-    CI_replay,\n-    JVMCI_invalidate_nmethod,\n-    JVMCI_invalidate_nmethod_mirror,\n-    JVMCI_materialize_virtual_object,\n-    JVMCI_new_installation,\n-    JVMCI_register_method,\n-    JVMCI_replacing_with_new_code,\n-    JVMCI_reprofile,\n-    marked_for_deoptimization,\n-    missing_exception_handler,\n-    not_used,\n-    OSR_invalidation_back_branch,\n-    OSR_invalidation_for_compiling_with_C1,\n-    OSR_invalidation_of_lower_level,\n-    set_native_function,\n-    uncommon_trap,\n-    whitebox_deoptimization,\n-    zombie,\n+  \/\/ If you change anything in this enum please patch\n+  \/\/ vmStructs_jvmci.cpp accordingly.\n+  enum class InvalidationReason : s1 {\n+    NOT_INVALIDATED = -1,\n+    C1_CODEPATCH,\n+    C1_DEOPTIMIZE,\n+    C1_DEOPTIMIZE_FOR_PATCHING,\n+    C1_PREDICATE_FAILED_TRAP,\n+    CI_REPLAY,\n+    UNLOADING,\n+    UNLOADING_COLD,\n+    JVMCI_INVALIDATE,\n+    JVMCI_MATERIALIZE_VIRTUAL_OBJECT,\n+    JVMCI_REPLACED_WITH_NEW_CODE,\n+    JVMCI_REPROFILE,\n+    MARKED_FOR_DEOPTIMIZATION,\n+    MISSING_EXCEPTION_HANDLER,\n+    NOT_USED,\n+    OSR_INVALIDATION_BACK_BRANCH,\n+    OSR_INVALIDATION_FOR_COMPILING_WITH_C1,\n+    OSR_INVALIDATION_OF_LOWER_LEVEL,\n+    SET_NATIVE_FUNCTION,\n+    UNCOMMON_TRAP,\n+    WHITEBOX_DEOPTIMIZATION,\n+    ZOMBIE,\n+    INVALIDATION_REASONS_COUNT\n@@ -500,3 +503,3 @@\n-  static const char* change_reason_to_string(ChangeReason change_reason) {\n-    switch (change_reason) {\n-      case ChangeReason::C1_codepatch:\n+  static const char* invalidation_reason_to_string(InvalidationReason invalidation_reason) {\n+    switch (invalidation_reason) {\n+      case InvalidationReason::C1_CODEPATCH:\n@@ -504,1 +507,1 @@\n-      case ChangeReason::C1_deoptimize:\n+      case InvalidationReason::C1_DEOPTIMIZE:\n@@ -506,1 +509,1 @@\n-      case ChangeReason::C1_deoptimize_for_patching:\n+      case InvalidationReason::C1_DEOPTIMIZE_FOR_PATCHING:\n@@ -508,1 +511,1 @@\n-      case ChangeReason::C1_predicate_failed_trap:\n+      case InvalidationReason::C1_PREDICATE_FAILED_TRAP:\n@@ -510,1 +513,1 @@\n-      case ChangeReason::CI_replay:\n+      case InvalidationReason::CI_REPLAY:\n@@ -512,5 +515,3 @@\n-      case ChangeReason::JVMCI_invalidate_nmethod:\n-        return \"JVMCI invalidate nmethod\";\n-      case ChangeReason::JVMCI_invalidate_nmethod_mirror:\n-        return \"JVMCI invalidate nmethod mirror\";\n-      case ChangeReason::JVMCI_materialize_virtual_object:\n+      case InvalidationReason::JVMCI_INVALIDATE:\n+        return \"JVMCI invalidate\";\n+      case InvalidationReason::JVMCI_MATERIALIZE_VIRTUAL_OBJECT:\n@@ -518,7 +519,3 @@\n-      case ChangeReason::JVMCI_new_installation:\n-        return \"JVMCI new installation\";\n-      case ChangeReason::JVMCI_register_method:\n-        return \"JVMCI register method\";\n-      case ChangeReason::JVMCI_replacing_with_new_code:\n-        return \"JVMCI replacing with new code\";\n-      case ChangeReason::JVMCI_reprofile:\n+      case InvalidationReason::JVMCI_REPLACED_WITH_NEW_CODE:\n+        return \"JVMCI replaced with new code\";\n+      case InvalidationReason::JVMCI_REPROFILE:\n@@ -526,1 +523,1 @@\n-      case ChangeReason::marked_for_deoptimization:\n+      case InvalidationReason::MARKED_FOR_DEOPTIMIZATION:\n@@ -528,1 +525,1 @@\n-      case ChangeReason::missing_exception_handler:\n+      case InvalidationReason::MISSING_EXCEPTION_HANDLER:\n@@ -530,1 +527,1 @@\n-      case ChangeReason::not_used:\n+      case InvalidationReason::NOT_USED:\n@@ -532,1 +529,1 @@\n-      case ChangeReason::OSR_invalidation_back_branch:\n+      case InvalidationReason::OSR_INVALIDATION_BACK_BRANCH:\n@@ -534,1 +531,1 @@\n-      case ChangeReason::OSR_invalidation_for_compiling_with_C1:\n+      case InvalidationReason::OSR_INVALIDATION_FOR_COMPILING_WITH_C1:\n@@ -536,1 +533,1 @@\n-      case ChangeReason::OSR_invalidation_of_lower_level:\n+      case InvalidationReason::OSR_INVALIDATION_OF_LOWER_LEVEL:\n@@ -538,1 +535,1 @@\n-      case ChangeReason::set_native_function:\n+      case InvalidationReason::SET_NATIVE_FUNCTION:\n@@ -540,1 +537,1 @@\n-      case ChangeReason::uncommon_trap:\n+      case InvalidationReason::UNCOMMON_TRAP:\n@@ -542,1 +539,1 @@\n-      case ChangeReason::whitebox_deoptimization:\n+      case InvalidationReason::WHITEBOX_DEOPTIMIZATION:\n@@ -544,1 +541,1 @@\n-      case ChangeReason::zombie:\n+      case InvalidationReason::ZOMBIE:\n@@ -715,2 +712,2 @@\n-  bool  make_not_entrant(ChangeReason change_reason);\n-  bool  make_not_used() { return make_not_entrant(ChangeReason::not_used); }\n+  bool  make_not_entrant(InvalidationReason invalidation_reason);\n+  bool  make_not_used() { return make_not_entrant(InvalidationReason::NOT_USED); }\n@@ -1029,1 +1026,1 @@\n-  void log_state_change(ChangeReason change_reason) const;\n+  void log_state_change(InvalidationReason invalidation_reason) const;\n","filename":"src\/hotspot\/share\/code\/nmethod.hpp","additions":52,"deletions":55,"binary":false,"changes":107,"status":"modified"},{"patch":"@@ -388,1 +388,1 @@\n-  if (comp_count > 0) {\n+  if (comp_count > 0 && feedback_k > 0) {\n@@ -574,3 +574,10 @@\n-      size_t buffer_size = c1_only ? c1_size : (c1_size\/3 + 2*c2_size\/3);\n-      int max_count = (ReservedCodeCacheSize - (CodeCacheMinimumUseSpace DEBUG_ONLY(* 3))) \/ (int)buffer_size;\n-      if (count > max_count) {\n+      size_t buffer_size = 0;\n+      if (c1_only) {\n+        buffer_size = c1_size;\n+      } else if (c2_only) {\n+        buffer_size = c2_size;\n+      } else {\n+        buffer_size = c1_size \/ 3 + 2 * c2_size \/ 3;\n+      }\n+      size_t max_count = (NonNMethodCodeHeapSize - (CodeCacheMinimumUseSpace DEBUG_ONLY(* 3))) \/ buffer_size;\n+      if ((size_t)count > max_count) {\n@@ -578,1 +585,1 @@\n-        count = MAX2(max_count, min_count);\n+        count = MAX2((int)max_count, min_count);\n@@ -594,1 +601,1 @@\n-#endif\n+#endif \/\/ _LP64\n@@ -927,1 +934,1 @@\n-          osr_nm->make_not_entrant(nmethod::ChangeReason::OSR_invalidation_for_compiling_with_C1);\n+          osr_nm->make_not_entrant(nmethod::InvalidationReason::OSR_INVALIDATION_FOR_COMPILING_WITH_C1);\n@@ -1519,1 +1526,1 @@\n-            nm->make_not_entrant(nmethod::ChangeReason::OSR_invalidation_back_branch);\n+            nm->make_not_entrant(nmethod::InvalidationReason::OSR_INVALIDATION_BACK_BRANCH);\n","filename":"src\/hotspot\/share\/compiler\/compilationPolicy.cpp","additions":15,"deletions":8,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -316,1 +316,1 @@\n-                    MIN2(CODE_CACHE_DEFAULT_LIMIT, (size_t)ReservedCodeCacheSize * 5));\n+                    MIN2(CODE_CACHE_DEFAULT_LIMIT, ReservedCodeCacheSize * 5));\n@@ -478,1 +478,1 @@\n-  uint min_code_cache_size = CodeCacheMinimumUseSpace DEBUG_ONLY(* 3);\n+  size_t min_code_cache_size = CodeCacheMinimumUseSpace DEBUG_ONLY(* 3);\n@@ -481,1 +481,1 @@\n-                \"Invalid ReservedCodeCacheSize: %dK. Must be at least InitialCodeCacheSize=%dK.\\n\",\n+                \"Invalid ReservedCodeCacheSize: %zuK. Must be at least InitialCodeCacheSize=%zuK.\\n\",\n@@ -486,1 +486,1 @@\n-                \"Invalid ReservedCodeCacheSize=%dK. Must be at least %uK.\\n\", ReservedCodeCacheSize\/K,\n+                \"Invalid ReservedCodeCacheSize=%zuK. Must be at least %zuK.\\n\", ReservedCodeCacheSize\/K,\n@@ -492,1 +492,1 @@\n-                \"Invalid ReservedCodeCacheSize=%dM. Must be at most %uM.\\n\", ReservedCodeCacheSize\/M,\n+                \"Invalid ReservedCodeCacheSize=%zuM. Must be at most %zuM.\\n\", ReservedCodeCacheSize\/M,\n@@ -497,1 +497,1 @@\n-                \"Invalid NonNMethodCodeHeapSize=%dK. Must be at least %uK.\\n\", NonNMethodCodeHeapSize\/K,\n+                \"Invalid NonNMethodCodeHeapSize=%zuK. Must be at least %zuK.\\n\", NonNMethodCodeHeapSize\/K,\n","filename":"src\/hotspot\/share\/compiler\/compilerDefinitions.cpp","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -237,1 +237,2 @@\n-          \"reaches this amount per compiler thread\")                        \\\n+          \"reaches this amount per compiler thread\"                         \\\n+          \"Passing 0 disables the threshold scaling\")                       \\\n@@ -242,1 +243,2 @@\n-          \"reaches this amount per compiler thread\")                        \\\n+          \"reaches this amount per compiler thread\"                         \\\n+          \"Passing 0 disables the threshold scaling\")                       \\\n@@ -266,1 +268,1 @@\n-          range(0, max_intx)                                                \\\n+          range(1, max_intx)                                                \\\n@@ -270,1 +272,1 @@\n-          range(0, max_intx)                                                \\\n+          range(1, max_intx)                                                \\\n","filename":"src\/hotspot\/share\/compiler\/compiler_globals.hpp","additions":6,"deletions":4,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2020, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -64,5 +64,5 @@\n-define_pd_global(uintx,  InitialCodeCacheSize,       160*K);\n-define_pd_global(uintx,  ReservedCodeCacheSize,      32*M);\n-define_pd_global(uintx,  NonProfiledCodeHeapSize,    0);\n-define_pd_global(uintx,  ProfiledCodeHeapSize,       0);\n-define_pd_global(uintx,  NonNMethodCodeHeapSize,     32*M);\n+define_pd_global(size_t, InitialCodeCacheSize,       160*K);\n+define_pd_global(size_t, ReservedCodeCacheSize,      32*M);\n+define_pd_global(size_t, NonProfiledCodeHeapSize,    0);\n+define_pd_global(size_t, ProfiledCodeHeapSize,       0);\n+define_pd_global(size_t, NonNMethodCodeHeapSize,     32*M);\n@@ -70,3 +70,3 @@\n-define_pd_global(uintx,  CodeCacheExpansionSize,     32*K);\n-define_pd_global(uintx,  CodeCacheMinBlockLength,    1);\n-define_pd_global(uintx,  CodeCacheMinimumUseSpace,   200*K);\n+define_pd_global(size_t, CodeCacheExpansionSize,     32*K);\n+define_pd_global(size_t, CodeCacheMinBlockLength,    1);\n+define_pd_global(size_t, CodeCacheMinimumUseSpace,   200*K);\n","filename":"src\/hotspot\/share\/compiler\/compiler_globals_pd.hpp","additions":9,"deletions":9,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -94,1 +94,1 @@\n-    GenerationCounters::update_all(_heap->capacity());\n+    GenerationCounters::update_capacity(_heap->capacity());\n","filename":"src\/hotspot\/share\/gc\/epsilon\/epsilonMonitoringSupport.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1272,0 +1272,3 @@\n+  if (!os::is_thread_cpu_time_supported()) {\n+    vm_exit_during_initialization(\"G1 requires cpu time gathering support\");\n+  }\n@@ -2237,1 +2240,1 @@\n-  update_parallel_gc_threads_cpu_time();\n+  update_perf_counter_cpu_time();\n@@ -2321,1 +2324,1 @@\n-void G1CollectedHeap::update_parallel_gc_threads_cpu_time() {\n+void G1CollectedHeap::update_perf_counter_cpu_time() {\n@@ -2324,1 +2327,1 @@\n-  if (!UsePerfData || !os::is_thread_cpu_time_supported()) {\n+  if (!UsePerfData) {\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CollectedHeap.cpp","additions":6,"deletions":3,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -265,1 +265,1 @@\n-  void update_parallel_gc_threads_cpu_time();\n+  void update_perf_counter_cpu_time();\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CollectedHeap.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -74,0 +74,1 @@\n+#include \"runtime\/os.hpp\"\n@@ -510,2 +511,0 @@\n-  _accum_task_vtime(nullptr),\n-\n@@ -545,1 +544,0 @@\n-  _accum_task_vtime = NEW_C_HEAP_ARRAY(double, _max_num_tasks, mtGC);\n@@ -555,2 +553,0 @@\n-\n-    _accum_task_vtime[i] = 0.0;\n@@ -983,1 +979,1 @@\n-    double start_vtime = os::elapsedVTime();\n+    SuspendibleThreadSetJoiner sts_join;\n@@ -985,2 +981,1 @@\n-    {\n-      SuspendibleThreadSetJoiner sts_join;\n+    assert(worker_id < _cm->active_tasks(), \"invariant\");\n@@ -988,9 +983,7 @@\n-      assert(worker_id < _cm->active_tasks(), \"invariant\");\n-\n-      G1CMTask* task = _cm->task(worker_id);\n-      task->record_start_time();\n-      if (!_cm->has_aborted()) {\n-        do {\n-          task->do_marking_step(G1ConcMarkStepDurationMillis,\n-                                true  \/* do_termination *\/,\n-                                false \/* is_serial*\/);\n+    G1CMTask* task = _cm->task(worker_id);\n+    task->record_start_time();\n+    if (!_cm->has_aborted()) {\n+      do {\n+        task->do_marking_step(G1ConcMarkStepDurationMillis,\n+                              true  \/* do_termination *\/,\n+                              false \/* is_serial*\/);\n@@ -998,5 +991,2 @@\n-          _cm->do_yield_check();\n-        } while (!_cm->has_aborted() && task->has_aborted());\n-      }\n-      task->record_end_time();\n-      guarantee(!task->has_aborted() || _cm->has_aborted(), \"invariant\");\n+        _cm->do_yield_check();\n+      } while (!_cm->has_aborted() && task->has_aborted());\n@@ -1004,3 +994,2 @@\n-\n-    double end_vtime = os::elapsedVTime();\n-    _cm->update_accum_task_vtime(worker_id, end_vtime - start_vtime);\n+    task->record_end_time();\n+    guarantee(!task->has_aborted() || _cm->has_aborted(), \"invariant\");\n@@ -1499,1 +1488,1 @@\n-  _g1h->update_parallel_gc_threads_cpu_time();\n+  _g1h->update_perf_counter_cpu_time();\n@@ -2093,0 +2082,17 @@\n+double G1ConcurrentMark::worker_threads_cpu_time_s() {\n+  class CountCpuTimeThreadClosure : public ThreadClosure {\n+  public:\n+    jlong _total_cpu_time;\n+\n+    CountCpuTimeThreadClosure() : ThreadClosure(), _total_cpu_time(0) { }\n+\n+    void do_thread(Thread* t) {\n+      _total_cpu_time += os::thread_cpu_time(t);\n+    }\n+  } cl;\n+\n+  threads_do(&cl);\n+\n+  return (double)cl._total_cpu_time \/ NANOSECS_PER_SEC;\n+}\n+\n@@ -2122,1 +2128,1 @@\n-            cm_thread()->vtime_accum(), cm_thread()->vtime_mark_accum());\n+            cm_thread()->total_mark_cpu_time_s(), cm_thread()->worker_threads_cpu_time_s());\n@@ -2266,2 +2272,0 @@\n-  double curr_time_ms = os::elapsedVTime() * 1000.0;\n-\n@@ -2277,1 +2281,1 @@\n-  double elapsed_time_ms = curr_time_ms - _start_time_ms;\n+  double elapsed_time_ms = (double)(os::current_thread_cpu_time() - _start_cpu_time_ns) \/ NANOSECS_PER_MILLISEC;\n@@ -2792,3 +2796,3 @@\n-    vtime too regularly, as it is quite expensive. So, once it was in\n-    place, it was natural to piggy-back all the other conditions on it\n-    too and not constantly check them throughout the code.\n+    cpu time gathering too regularly, as it is quite expensive. So,\n+    once it was in place, it was natural to piggy-back all the other\n+    conditions on it too and not constantly check them throughout the code.\n@@ -2817,1 +2821,1 @@\n-  _start_time_ms = os::elapsedVTime() * 1000.0;\n+  _start_cpu_time_ns = os::current_thread_cpu_time();\n@@ -2911,2 +2915,2 @@\n-  double end_time_ms = os::elapsedVTime() * 1000.0;\n-  double elapsed_time_ms = end_time_ms - _start_time_ms;\n+  jlong end_cpu_time_ns = os::current_thread_cpu_time();\n+  double elapsed_time_ms = (double)(end_cpu_time_ns - _start_cpu_time_ns) \/ NANOSECS_PER_MILLISEC;\n@@ -2935,1 +2939,1 @@\n-  _start_time_ms(0.0),\n+  _start_cpu_time_ns(0),\n","filename":"src\/hotspot\/share\/gc\/g1\/g1ConcurrentMark.cpp","additions":41,"deletions":37,"binary":false,"changes":78,"status":"modified"},{"patch":"@@ -449,2 +449,0 @@\n-  double*   _accum_task_vtime;   \/\/ Accumulated task vtime\n-\n@@ -615,10 +613,2 @@\n-  void update_accum_task_vtime(uint i, double vtime) {\n-    _accum_task_vtime[i] += vtime;\n-  }\n-\n-  double all_task_accum_vtime() {\n-    double ret = 0.0;\n-    for (uint i = 0; i < _max_num_tasks; ++i)\n-      ret += _accum_task_vtime[i];\n-    return ret;\n-  }\n+  \/\/ Total cpu time spent in mark worker threads in seconds.\n+  double worker_threads_cpu_time_s();\n@@ -756,2 +746,2 @@\n-  \/\/ Start time of the current marking step\n-  double                      _start_time_ms;\n+  \/\/ Start cpu time of the current marking step\n+  jlong                       _start_cpu_time_ns;\n","filename":"src\/hotspot\/share\/gc\/g1\/g1ConcurrentMark.hpp","additions":4,"deletions":14,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -50,2 +50,0 @@\n-  _vtime_start(0.0),\n-  _vtime_accum(0.0),\n@@ -116,2 +114,0 @@\n-  _vtime_start = os::elapsedVTime();\n-\n@@ -136,3 +132,1 @@\n-    _vtime_accum = (os::elapsedVTime() - _vtime_start);\n-\n-    update_threads_cpu_time();\n+    update_perf_counter_cpu_time();\n@@ -174,1 +168,1 @@\n-  update_threads_cpu_time();\n+  update_perf_counter_cpu_time();\n@@ -234,1 +228,1 @@\n-  update_threads_cpu_time();\n+  update_perf_counter_cpu_time();\n@@ -244,1 +238,1 @@\n-  update_threads_cpu_time();\n+  update_perf_counter_cpu_time();\n@@ -345,2 +339,2 @@\n-void G1ConcurrentMarkThread::update_threads_cpu_time() {\n-  if (!UsePerfData || !os::is_thread_cpu_time_supported()) {\n+void G1ConcurrentMarkThread::update_perf_counter_cpu_time() {\n+  if (!UsePerfData) {\n","filename":"src\/hotspot\/share\/gc\/g1\/g1ConcurrentMarkThread.cpp","additions":6,"deletions":12,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -38,3 +38,0 @@\n-  double _vtime_start;  \/\/ Initial virtual time.\n-  double _vtime_accum;  \/\/ Accumulated virtual time.\n-\n@@ -91,4 +88,5 @@\n-  \/\/ Total virtual time so far for this thread and concurrent marking tasks.\n-  double vtime_accum();\n-  \/\/ Marking virtual time so far this thread and concurrent marking tasks.\n-  double vtime_mark_accum();\n+  \/\/ Total cpu time used by all marking related threads (i.e. this thread and the\n+  \/\/ marking worker threads) in seconds.\n+  double total_mark_cpu_time_s();\n+  \/\/ Cpu time used by all marking worker threads in seconds.\n+  double worker_threads_cpu_time_s();\n@@ -113,1 +111,1 @@\n-  void update_threads_cpu_time();\n+  void update_perf_counter_cpu_time();\n","filename":"src\/hotspot\/share\/gc\/g1\/g1ConcurrentMarkThread.hpp","additions":7,"deletions":9,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,0 +31,1 @@\n+#include \"runtime\/os.hpp\"\n@@ -33,2 +34,2 @@\n-inline double G1ConcurrentMarkThread::vtime_accum() {\n-  return _vtime_accum + _cm->all_task_accum_vtime();\n+inline double G1ConcurrentMarkThread::total_mark_cpu_time_s() {\n+  return os::thread_cpu_time(this) + worker_threads_cpu_time_s();\n@@ -38,2 +39,2 @@\n-inline double G1ConcurrentMarkThread::vtime_mark_accum() {\n-  return _cm->all_task_accum_vtime();\n+inline double G1ConcurrentMarkThread::worker_threads_cpu_time_s() {\n+  return _cm->worker_threads_cpu_time_s();\n","filename":"src\/hotspot\/share\/gc\/g1\/g1ConcurrentMarkThread.inline.hpp","additions":6,"deletions":5,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -43,2 +43,0 @@\n-  _vtime_start(0.0),\n-  _vtime_accum(0.0),\n@@ -56,2 +54,0 @@\n-  _vtime_start = os::elapsedVTime();\n-\n@@ -77,1 +73,1 @@\n-    track_usage();\n+    update_perf_counter_cpu_time();\n@@ -131,0 +127,4 @@\n+jlong G1ConcurrentRefineThread::cpu_time() {\n+  return os::thread_cpu_time(this);\n+}\n+\n@@ -136,1 +136,2 @@\n-  void track_usage() override;\n+  \/\/ Updates jstat cpu usage for all refinement threads.\n+  void update_perf_counter_cpu_time() override;\n@@ -182,4 +183,2 @@\n-void G1PrimaryConcurrentRefineThread::track_usage() {\n-  G1ConcurrentRefineThread::track_usage();\n-  \/\/ The primary thread is responsible for updating the CPU time for all workers.\n-  if (UsePerfData && os::is_thread_cpu_time_supported()) {\n+void G1PrimaryConcurrentRefineThread::update_perf_counter_cpu_time() {\n+  if (UsePerfData) {\n@@ -194,0 +193,1 @@\n+  void update_perf_counter_cpu_time() override { \/* Nothing to do. The primary thread does all the work. *\/ }\n","filename":"src\/hotspot\/share\/gc\/g1\/g1ConcurrentRefineThread.cpp","additions":10,"deletions":10,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -42,3 +42,0 @@\n-  double _vtime_start;  \/\/ Initial virtual time.\n-  double _vtime_accum;  \/\/ Accumulated virtual time.\n-\n@@ -74,9 +71,2 @@\n-  \/\/ Update concurrent refine threads stats.\n-  \/\/ If we are in Primary thread, we additionally update CPU time tracking.\n-  virtual void track_usage() {\n-    if (os::supports_vtime()) {\n-      _vtime_accum = (os::elapsedVTime() - _vtime_start);\n-    } else {\n-      _vtime_accum = 0.0;\n-    }\n-  };\n+  \/\/ Update concurrent refine threads cpu time stats.\n+  virtual void update_perf_counter_cpu_time() = 0;\n@@ -116,2 +106,2 @@\n-  \/\/ Total virtual time so far.\n-  double vtime_accum() { return _vtime_accum; }\n+  \/\/ Total cpu time spent in this thread so far.\n+  jlong cpu_time();\n","filename":"src\/hotspot\/share\/gc\/g1\/g1ConcurrentRefineThread.hpp","additions":5,"deletions":15,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -65,1 +65,1 @@\n-    GenerationCounters::update_all(committed);\n+    GenerationCounters::update_capacity(committed);\n@@ -86,1 +86,1 @@\n-    GenerationCounters::update_all(committed);\n+    GenerationCounters::update_capacity(committed);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1MonitoringSupport.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -47,1 +47,1 @@\n-      _summary->set_rs_thread_vtime(_counter, crt->vtime_accum());\n+      _summary->set_refine_thread_cpu_time(_counter, crt->cpu_time());\n@@ -56,4 +56,4 @@\n-void G1RemSetSummary::set_rs_thread_vtime(uint thread, double value) {\n-  assert(_rs_threads_vtimes != nullptr, \"just checking\");\n-  assert(thread < _num_vtimes, \"just checking\");\n-  _rs_threads_vtimes[thread] = value;\n+void G1RemSetSummary::set_refine_thread_cpu_time(uint thread, jlong value) {\n+  assert(_refine_threads_cpu_times != nullptr, \"just checking\");\n+  assert(thread < _num_refine_threads, \"just checking\");\n+  _refine_threads_cpu_times[thread] = value;\n@@ -62,4 +62,4 @@\n-double G1RemSetSummary::rs_thread_vtime(uint thread) const {\n-  assert(_rs_threads_vtimes != nullptr, \"just checking\");\n-  assert(thread < _num_vtimes, \"just checking\");\n-  return _rs_threads_vtimes[thread];\n+jlong G1RemSetSummary::refine_thread_cpu_time(uint thread) const {\n+  assert(_refine_threads_cpu_times != nullptr, \"just checking\");\n+  assert(thread < _num_refine_threads, \"just checking\");\n+  return _refine_threads_cpu_times[thread];\n@@ -69,2 +69,2 @@\n-  _num_vtimes(G1ConcRefinementThreads),\n-  _rs_threads_vtimes(NEW_C_HEAP_ARRAY(double, _num_vtimes, mtGC)) {\n+  _num_refine_threads(G1ConcRefinementThreads),\n+  _refine_threads_cpu_times(NEW_C_HEAP_ARRAY(jlong, _num_refine_threads, mtGC)) {\n@@ -72,1 +72,1 @@\n-  memset(_rs_threads_vtimes, 0, sizeof(double) * _num_vtimes);\n+  memset(_refine_threads_cpu_times, 0, sizeof(jlong) * _num_refine_threads);\n@@ -80,1 +80,1 @@\n-  FREE_C_HEAP_ARRAY(double, _rs_threads_vtimes);\n+  FREE_C_HEAP_ARRAY(jlong, _refine_threads_cpu_times);\n@@ -85,1 +85,1 @@\n-  assert(_num_vtimes == other->_num_vtimes, \"just checking\");\n+  assert(_num_refine_threads == other->_num_refine_threads, \"just checking\");\n@@ -87,1 +87,1 @@\n-  memcpy(_rs_threads_vtimes, other->_rs_threads_vtimes, sizeof(double) * _num_vtimes);\n+  memcpy(_refine_threads_cpu_times, other->_refine_threads_cpu_times, sizeof(jlong) * _num_refine_threads);\n@@ -92,1 +92,1 @@\n-  assert(_num_vtimes == other->_num_vtimes, \"just checking\");\n+  assert(_num_refine_threads == other->_num_refine_threads, \"just checking\");\n@@ -94,2 +94,2 @@\n-  for (uint i = 0; i < _num_vtimes; i++) {\n-    set_rs_thread_vtime(i, other->rs_thread_vtime(i) - rs_thread_vtime(i));\n+  for (uint i = 0; i < _num_refine_threads; i++) {\n+    set_refine_thread_cpu_time(i, other->refine_thread_cpu_time(i) - refine_thread_cpu_time(i));\n@@ -386,2 +386,2 @@\n-    for (uint i = 0; i < _num_vtimes; i++) {\n-      out->print(\"    %5.2f\", rs_thread_vtime(i));\n+    for (uint i = 0; i < _num_refine_threads; i++) {\n+      out->print(\"    %5.2f\", (double)refine_thread_cpu_time(i) \/ NANOSECS_PER_SEC);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1RemSetSummary.cpp","additions":20,"deletions":20,"binary":false,"changes":40,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,2 +34,1 @@\n-\/\/ A G1RemSetSummary manages statistical information about the G1RemSet\n-\n+\/\/ A G1RemSetSummary manages statistical information about the remembered set.\n@@ -37,2 +36,2 @@\n-  size_t _num_vtimes;\n-  double* _rs_threads_vtimes;\n+  size_t _num_refine_threads;\n+  jlong* _refine_threads_cpu_times;\n@@ -40,1 +39,1 @@\n-  void set_rs_thread_vtime(uint thread, double value);\n+  void set_refine_thread_cpu_time(uint thread, jlong value);\n@@ -42,1 +41,1 @@\n-  \/\/ update this summary with current data from various places\n+  \/\/ Update this summary with current data from various places.\n@@ -50,1 +49,1 @@\n-  \/\/ set the counters in this summary to the values of the others\n+  \/\/ Set the counters in this summary to the values of the others.\n@@ -52,1 +51,1 @@\n-  \/\/ subtract all counters from the other summary, and set them in the current\n+  \/\/ Subtract all counters from the other summary, and set them in the current.\n@@ -57,1 +56,1 @@\n-  double rs_thread_vtime(uint thread) const;\n+  jlong refine_thread_cpu_time(uint thread) const;\n","filename":"src\/hotspot\/share\/gc\/g1\/g1RemSetSummary.hpp","additions":9,"deletions":10,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -122,1 +122,1 @@\n-  double vstart = os::elapsedVTime();\n+  jlong start_cpu_time_ns = os::thread_cpu_time(this);\n@@ -133,1 +133,1 @@\n-  update_thread_cpu_time();\n+  update_perf_counter_cpu_time();\n@@ -138,1 +138,1 @@\n-                      (os::elapsedVTime() - vstart) * MILLIUNITS);\n+                      (double)(os::thread_cpu_time(this) - start_cpu_time_ns) \/ NANOSECS_PER_MILLISEC);\n@@ -156,2 +156,2 @@\n-void G1ServiceThread::update_thread_cpu_time() {\n-  if (UsePerfData && os::is_thread_cpu_time_supported()) {\n+void G1ServiceThread::update_perf_counter_cpu_time() {\n+  if (UsePerfData) {\n","filename":"src\/hotspot\/share\/gc\/g1\/g1ServiceThread.cpp","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -124,1 +124,1 @@\n-  void update_thread_cpu_time();\n+  void update_perf_counter_cpu_time();\n","filename":"src\/hotspot\/share\/gc\/g1\/g1ServiceThread.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -25,0 +25,3 @@\n+#ifndef SHARE_GC_G1_G1SHAREDCLOSURES_HPP\n+#define SHARE_GC_G1_G1SHAREDCLOSURES_HPP\n+\n@@ -57,0 +60,2 @@\n+\n+#endif \/\/ SHARE_GC_G1_G1SHAREDCLOSURES_HPP\n","filename":"src\/hotspot\/share\/gc\/g1\/g1SharedClosures.hpp","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -60,1 +60,1 @@\n-  VM_GC_Operation(gc_count_before, gc_cause),\n+  VM_GC_Collect_Operation(gc_count_before, gc_cause),\n","filename":"src\/hotspot\/share\/gc\/g1\/g1VMOperations.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-class VM_G1CollectFull : public VM_GC_Operation {\n+class VM_G1CollectFull : public VM_GC_Collect_Operation {\n@@ -41,1 +41,1 @@\n-    VM_GC_Operation(gc_count_before, cause, full_gc_count_before, true) { }\n+    VM_GC_Collect_Operation(gc_count_before, cause, full_gc_count_before, true) { }\n@@ -46,1 +46,1 @@\n-class VM_G1TryInitiateConcMark : public VM_GC_Operation {\n+class VM_G1TryInitiateConcMark : public VM_GC_Collect_Operation {\n@@ -92,0 +92,1 @@\n+  bool is_gc_operation() const override { return true; }\n","filename":"src\/hotspot\/share\/gc\/g1\/g1VMOperations.hpp","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -147,1 +147,1 @@\n-          constraint(G1SATBBufferSizeConstraintFunc, AtParse)               \\\n+          constraint(G1SATBBufferSizeConstraintFunc, AfterErgo)             \\\n@@ -166,1 +166,1 @@\n-          constraint(G1UpdateBufferSizeConstraintFunc, AtParse)             \\\n+          constraint(G1UpdateBufferSizeConstraintFunc, AfterErgo)           \\\n","filename":"src\/hotspot\/share\/gc\/g1\/g1_globals.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -95,12 +95,3 @@\n-      if (s->free_in_words() > 0) {\n-        HeapWord* cur_top = s->top();\n-        size_t words_left_to_fill = pointer_delta(s->end(), s->top());;\n-        while (words_left_to_fill > 0) {\n-          size_t words_to_fill = MIN2(words_left_to_fill, CollectedHeap::filler_array_max_size());\n-          assert(words_to_fill >= CollectedHeap::min_fill_size(),\n-                 \"Remaining size (%zu) is too small to fill (based on %zu and %zu)\",\n-                 words_to_fill, words_left_to_fill, CollectedHeap::filler_array_max_size());\n-          CollectedHeap::fill_with_object(cur_top, words_to_fill);\n-          cur_top += words_to_fill;\n-          words_left_to_fill -= words_to_fill;\n-        }\n+      size_t free_words = s->free_in_words();\n+      if (free_words > 0) {\n+        CollectedHeap::fill_with_objects(s->top(), free_words);\n@@ -213,2 +204,0 @@\n-    \/\/ The alignment_hint argument must be less than or equal to the small page\n-    \/\/ size if not using large pages or else this function does nothing.\n@@ -424,1 +413,1 @@\n-    size_t chunk_byte_size = 0, old_chunk_byte_size = 0;\n+    size_t chunk_byte_size = 0;\n@@ -501,1 +490,0 @@\n-    HeapWord *top = MAX2(align_down(s->top(), page_size()), s->bottom());\n","filename":"src\/hotspot\/share\/gc\/parallel\/mutableNUMASpace.cpp","additions":4,"deletions":16,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -73,1 +73,1 @@\n-          \"Inconsistent MinSurvivorRatio vs InitialSurvivorRatio: %d vs %d\\n\", MinSurvivorRatio, InitialSurvivorRatio);\n+          \"Inconsistent MinSurvivorRatio vs InitialSurvivorRatio: %zu vs %zu\\n\", MinSurvivorRatio, InitialSurvivorRatio);\n","filename":"src\/hotspot\/share\/gc\/parallel\/parallelArguments.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -237,1 +237,1 @@\n-      _gen_counters->update_all(_virtual_space->committed_size());\n+      _gen_counters->update_capacity(_virtual_space->committed_size());\n@@ -369,1 +369,1 @@\n-    _gen_counters->update_all(_virtual_space->committed_size());\n+    _gen_counters->update_capacity(_virtual_space->committed_size());\n","filename":"src\/hotspot\/share\/gc\/parallel\/psOldGen.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -55,3 +55,3 @@\n-                                             uint full_gc_count,\n-                                             GCCause::Cause gc_cause) :\n-  VM_GC_Operation(gc_count, gc_cause, full_gc_count, is_cause_full(gc_cause)) {}\n+                                           uint full_gc_count,\n+                                           GCCause::Cause gc_cause) :\n+  VM_GC_Collect_Operation(gc_count, gc_cause, full_gc_count, is_cause_full(gc_cause)) {}\n","filename":"src\/hotspot\/share\/gc\/parallel\/psVMOperations.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -43,1 +43,1 @@\n-class VM_ParallelGCCollect: public VM_GC_Operation {\n+class VM_ParallelGCCollect: public VM_GC_Collect_Operation {\n","filename":"src\/hotspot\/share\/gc\/parallel\/psVMOperations.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -813,1 +813,1 @@\n-    _gen_counters->update_all(_virtual_space->committed_size());\n+    _gen_counters->update_capacity(_virtual_space->committed_size());\n","filename":"src\/hotspot\/share\/gc\/parallel\/psYoungGen.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -817,1 +817,1 @@\n-    _gen_counters->update_all(_virtual_space.committed_size());\n+    _gen_counters->update_capacity(_virtual_space.committed_size());\n","filename":"src\/hotspot\/share\/gc\/serial\/defNewGeneration.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -48,1 +48,1 @@\n-class VM_SerialGCCollect: public VM_GC_Operation {\n+class VM_SerialGCCollect: public VM_GC_Collect_Operation {\n@@ -54,1 +54,1 @@\n-    : VM_GC_Operation(gc_count_before, gc_cause, full_gc_count_before, full) {}\n+    : VM_GC_Collect_Operation(gc_count_before, gc_cause, full_gc_count_before, full) {}\n","filename":"src\/hotspot\/share\/gc\/serial\/serialVMOperations.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -371,1 +371,1 @@\n-    _gen_counters->update_all(_virtual_space.committed_size());\n+    _gen_counters->update_capacity(_virtual_space.committed_size());\n","filename":"src\/hotspot\/share\/gc\/serial\/tenuredGeneration.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -75,1 +75,15 @@\n-  set_guard_value(nm, disarmed_guard_value());\n+  guard_with(nm, disarmed_guard_value());\n+}\n+\n+void BarrierSetNMethod::guard_with(nmethod* nm, int value) {\n+  assert((value & not_entrant) == 0, \"not_entrant bit is reserved\");\n+  \/\/ Enter critical section.  Does not block for safepoint.\n+  ConditionalMutexLocker ml(NMethodEntryBarrier_lock, !NMethodEntryBarrier_lock->owned_by_self(), Mutex::_no_safepoint_check_flag);\n+  \/\/ Do not undo sticky bit\n+  if (is_not_entrant(nm)) {\n+    value |= not_entrant;\n+  }\n+  if (guard_value(nm) != value) {\n+    \/\/ Patch the code only if needed.\n+    set_guard_value(nm, value);\n+  }\n@@ -79,1 +93,1 @@\n-  return guard_value(nm) != disarmed_guard_value();\n+  return (guard_value(nm) & ~not_entrant) != disarmed_guard_value();\n@@ -155,1 +169,1 @@\n-    _current_phase = 1;\n+    _current_phase = initial;\n@@ -181,1 +195,1 @@\n-  bool may_enter = bs_nm->nmethod_entry_barrier(nm);\n+  bool may_enter = !bs_nm->is_not_entrant(nm) && bs_nm->nmethod_entry_barrier(nm);\n@@ -184,14 +198,16 @@\n-  \/\/ In case a concurrent thread disarmed the nmethod, we need to ensure the new instructions\n-  \/\/ are made visible, by using a cross modify fence. Note that this is synchronous cross modifying\n-  \/\/ code, where the existence of new instructions is communicated via data (the guard value).\n-  \/\/ This cross modify fence is only needed when the nmethod entry barrier modifies the\n-  \/\/ instructions. Not all platforms currently do that, so if this check becomes expensive,\n-  \/\/ it can be made conditional on the nmethod_patching_type.\n-  OrderAccess::cross_modify_fence();\n-\n-  \/\/ Diagnostic option to force deoptimization 1 in 10 times. It is otherwise\n-  \/\/ a very rare event.\n-  if (DeoptimizeNMethodBarriersALot && !nm->is_osr_method()) {\n-    static volatile uint32_t counter=0;\n-    if (Atomic::add(&counter, 1u) % 10 == 0) {\n-      may_enter = false;\n+  if (may_enter) {\n+    \/\/ In case a concurrent thread disarmed the nmethod, we need to ensure the new instructions\n+    \/\/ are made visible, by using a cross modify fence. Note that this is synchronous cross modifying\n+    \/\/ code, where the existence of new instructions is communicated via data (the guard value).\n+    \/\/ This cross modify fence is only needed when the nmethod entry barrier modifies the\n+    \/\/ instructions. Not all platforms currently do that, so if this check becomes expensive,\n+    \/\/ it can be made conditional on the nmethod_patching_type.\n+    OrderAccess::cross_modify_fence();\n+\n+    \/\/ Diagnostic option to force deoptimization 1 in 10 times. It is otherwise\n+    \/\/ a very rare event.\n+    if (DeoptimizeNMethodBarriersALot && !nm->is_osr_method()) {\n+      static volatile uint32_t counter=0;\n+      if (Atomic::add(&counter, 1u) % 10 == 0) {\n+        may_enter = false;\n+      }\n@@ -223,0 +239,19 @@\n+\n+\/\/ Make the nmethod permanently not-entrant, so that nmethod_stub_entry_barrier() will call\n+\/\/ deoptimize() to redirect the caller to SharedRuntime::get_handle_wrong_method_stub().\n+\/\/ A sticky armed bit is set and other bits are preserved.  As a result, a call to\n+\/\/ nmethod_stub_entry_barrier() may appear to be spurious, because is_armed() still returns\n+\/\/ false and nmethod_entry_barrier() is not called.\n+void BarrierSetNMethod::make_not_entrant(nmethod* nm) {\n+  \/\/ Enter critical section.  Does not block for safepoint.\n+  ConditionalMutexLocker ml(NMethodEntryBarrier_lock, !NMethodEntryBarrier_lock->owned_by_self(), Mutex::_no_safepoint_check_flag);\n+  int value = guard_value(nm) | not_entrant;\n+  if (guard_value(nm) != value) {\n+    \/\/ Patch the code only if needed.\n+    set_guard_value(nm, value);\n+  }\n+}\n+\n+bool BarrierSetNMethod::is_not_entrant(nmethod* nm) {\n+  return (guard_value(nm) & not_entrant) != 0;\n+}\n","filename":"src\/hotspot\/share\/gc\/shared\/barrierSetNMethod.cpp","additions":53,"deletions":18,"binary":false,"changes":71,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -39,0 +39,6 @@\n+  enum {\n+    not_entrant = 1 << 31, \/\/ armed sticky bit, see make_not_entrant\n+    armed = 0,\n+    initial = 1,\n+  };\n+\n@@ -41,0 +47,4 @@\n+protected:\n+  virtual int guard_value(nmethod* nm);\n+  void set_guard_value(nmethod* nm, int value);\n+\n@@ -42,1 +52,1 @@\n-  BarrierSetNMethod() : _current_phase(1) {}\n+  BarrierSetNMethod() : _current_phase(initial) {}\n@@ -53,1 +63,2 @@\n-  bool is_armed(nmethod* nm);\n+  virtual bool is_armed(nmethod* nm);\n+  void arm(nmethod* nm) { guard_with(nm, armed); }\n@@ -55,0 +66,2 @@\n+  virtual void make_not_entrant(nmethod* nm);\n+  virtual bool is_not_entrant(nmethod* nm);\n@@ -56,2 +69,1 @@\n-  int guard_value(nmethod* nm);\n-  void set_guard_value(nmethod* nm, int value);\n+  virtual void guard_with(nmethod* nm, int value);\n@@ -59,1 +71,1 @@\n-  void arm_all_nmethods();\n+  virtual void arm_all_nmethods();\n","filename":"src\/hotspot\/share\/gc\/shared\/barrierSetNMethod.hpp","additions":18,"deletions":6,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -92,0 +92,3 @@\n+    case _shenandoah_stop_vm:\n+      return \"Stopping VM\";\n+\n@@ -95,2 +98,2 @@\n-    case _shenandoah_stop_vm:\n-      return \"Stopping VM\";\n+    case _shenandoah_humongous_allocation_failure:\n+      return \"Humongous Allocation Failure\";\n","filename":"src\/hotspot\/share\/gc\/shared\/gcCause.cpp","additions":5,"deletions":2,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -58,1 +58,0 @@\n-    _no_cause_specified,\n@@ -102,2 +101,1 @@\n-  inline static bool is_serviceability_requested_gc(GCCause::Cause\n-                                                             cause) {\n+  inline static bool is_serviceability_requested_gc(GCCause::Cause cause) {\n@@ -109,1 +107,1 @@\n-  \/\/ Causes for collection of the tenured gernation\n+  \/\/ Causes for collection of the tenured generation\n@@ -120,2 +118,1 @@\n-    return (cause == GCCause::_allocation_failure ||\n-            cause == GCCause::_shenandoah_allocation_failure_evac);\n+    return cause == GCCause::_allocation_failure;\n","filename":"src\/hotspot\/share\/gc\/shared\/gcCause.hpp","additions":3,"deletions":6,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -51,1 +51,1 @@\n-bool VM_GC_Sync_Operation::doit_prologue() {\n+bool VM_Heap_Sync_Operation::doit_prologue() {\n@@ -56,1 +56,1 @@\n-void VM_GC_Sync_Operation::doit_epilogue() {\n+void VM_Heap_Sync_Operation::doit_epilogue() {\n@@ -102,2 +102,1 @@\n-  assert(((_gc_cause != GCCause::_no_gc) &&\n-          (_gc_cause != GCCause::_no_cause_specified)), \"Illegal GCCause\");\n+  assert(_gc_cause != GCCause::_no_gc, \"Illegal GCCause\");\n@@ -118,1 +117,1 @@\n-  VM_GC_Sync_Operation::doit_prologue();\n+  VM_Heap_Sync_Operation::doit_prologue();\n@@ -142,1 +141,1 @@\n-  VM_GC_Sync_Operation::doit_epilogue();\n+  VM_Heap_Sync_Operation::doit_epilogue();\n@@ -209,1 +208,1 @@\n-    : VM_GC_Operation(gc_count_before, gc_cause, full_gc_count_before, true),\n+    : VM_GC_Collect_Operation(gc_count_before, gc_cause, full_gc_count_before, true),\n@@ -272,1 +271,1 @@\n-    : VM_GC_Operation(gc_count_before, cause), _word_size(word_size), _result(nullptr) {\n+    : VM_GC_Collect_Operation(gc_count_before, cause), _word_size(word_size), _result(nullptr) {\n","filename":"src\/hotspot\/share\/gc\/shared\/gcVMOperations.cpp","additions":7,"deletions":8,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -40,1 +40,1 @@\n-\/\/    VM_GC_Sync_Operation\n+\/\/    VM_Heap_Sync_Operation\n@@ -42,7 +42,9 @@\n-\/\/        VM_GC_HeapInspection\n-\/\/        VM_PopulateDynamicDumpSharedSpace\n-\/\/        VM_SerialGCCollect\n-\/\/        VM_ParallelGCCollect\n-\/\/        VM_CollectForAllocation\n-\/\/          VM_SerialCollectForAllocation\n-\/\/          VM_ParallelCollectForAllocation\n+\/\/        VM_GC_Collect_Operation\n+\/\/          VM_SerialGCCollect\n+\/\/          VM_ParallelGCCollect\n+\/\/          VM_CollectForAllocation\n+\/\/            VM_SerialCollectForAllocation\n+\/\/            VM_ParallelCollectForAllocation\n+\/\/          VM_CollectForMetadataAllocation\n+\/\/        VM_GC_Service_Operation\n+\/\/          VM_GC_HeapInspection\n@@ -50,0 +52,1 @@\n+\/\/      VM_PopulateDynamicDumpSharedSpace\n@@ -52,1 +55,1 @@\n-\/\/  VM_GC_Sync_Operation\n+\/\/  VM_Heap_Sync_Operation\n@@ -87,1 +90,1 @@\n-class VM_GC_Sync_Operation : public VM_Operation {\n+class VM_Heap_Sync_Operation : public VM_Operation {\n@@ -90,1 +93,1 @@\n-  VM_GC_Sync_Operation() : VM_Operation() { }\n+  VM_Heap_Sync_Operation() : VM_Operation() { }\n@@ -98,1 +101,1 @@\n-class VM_Verify : public VM_GC_Sync_Operation {\n+class VM_Verify : public VM_Heap_Sync_Operation {\n@@ -104,1 +107,1 @@\n-class VM_GC_Operation: public VM_GC_Sync_Operation {\n+class VM_GC_Operation: public VM_Heap_Sync_Operation {\n@@ -118,1 +121,1 @@\n-                  bool full = false) : VM_GC_Sync_Operation() {\n+                  bool full = false) : VM_Heap_Sync_Operation() {\n@@ -152,0 +155,8 @@\n+class VM_GC_Service_Operation : public VM_GC_Operation {\n+public:\n+  VM_GC_Service_Operation(uint gc_count_before,\n+                          GCCause::Cause _cause,\n+                          uint full_gc_count_before = 0,\n+                          bool full = false) :\n+    VM_GC_Operation(gc_count_before, _cause, full_gc_count_before, full) {}\n+};\n@@ -153,1 +164,13 @@\n-class VM_GC_HeapInspection: public VM_GC_Operation {\n+class VM_GC_Collect_Operation : public VM_GC_Operation {\n+public:\n+  VM_GC_Collect_Operation(uint gc_count_before,\n+                          GCCause::Cause _cause,\n+                          uint full_gc_count_before = 0,\n+                          bool full = false) :\n+    VM_GC_Operation(gc_count_before, _cause, full_gc_count_before, full) {}\n+\n+  bool is_gc_operation() const { return true; }\n+};\n+\n+\n+class VM_GC_HeapInspection : public VM_GC_Service_Operation {\n@@ -158,0 +181,1 @@\n+\n@@ -161,5 +185,5 @@\n-    VM_GC_Operation(0 \/* total collections,      dummy, ignored *\/,\n-                    GCCause::_heap_inspection \/* GC Cause *\/,\n-                    0 \/* total full collections, dummy, ignored *\/,\n-                    request_full_gc), _out(out), _full_gc(request_full_gc),\n-                    _parallel_thread_num(parallel_thread_num) {}\n+    VM_GC_Service_Operation(0 \/* total collections,      dummy, ignored *\/,\n+                            GCCause::_heap_inspection \/* GC Cause *\/,\n+                            0 \/* total full collections, dummy, ignored *\/,\n+                            request_full_gc), _out(out), _full_gc(request_full_gc),\n+                            _parallel_thread_num(parallel_thread_num) {}\n@@ -172,0 +196,1 @@\n+\n@@ -176,1 +201,1 @@\n-class VM_CollectForAllocation : public VM_GC_Operation {\n+class VM_CollectForAllocation : public VM_GC_Collect_Operation {\n@@ -189,1 +214,1 @@\n-class VM_CollectForMetadataAllocation: public VM_GC_Operation {\n+class VM_CollectForMetadataAllocation: public VM_GC_Collect_Operation {\n","filename":"src\/hotspot\/share\/gc\/shared\/gcVMOperations.hpp","additions":47,"deletions":22,"binary":false,"changes":69,"status":"modified"},{"patch":"@@ -202,1 +202,2 @@\n-          \"Enable parallel reference processing whenever possible\")         \\\n+          \"(Deprecated) Enable parallel reference processing \"              \\\n+          \"whenever possible\")                                              \\\n@@ -205,1 +206,1 @@\n-          \"Enable balancing of reference processing queues\")                \\\n+          \"(Deprecated) Enable balancing of reference processing queues\")   \\\n","filename":"src\/hotspot\/share\/gc\/shared\/gc_globals.hpp","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -70,1 +70,1 @@\n-void GenerationCounters::update_all(size_t curr_capacity) {\n+void GenerationCounters::update_capacity(size_t curr_capacity) {\n","filename":"src\/hotspot\/share\/gc\/shared\/generationCounters.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2002, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2002, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -55,1 +55,1 @@\n-  void update_all(size_t curr_capacity);\n+  void update_capacity(size_t curr_capacity);\n","filename":"src\/hotspot\/share\/gc\/shared\/generationCounters.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -187,1 +187,1 @@\n-  if (FLAG_IS_DEFAULT(TLABAllocationWeight)) {\n+  if (strcmp(ShenandoahGCMode, \"generational\") && FLAG_IS_DEFAULT(TLABAllocationWeight)) {\n@@ -190,0 +190,1 @@\n+  \/\/ In generational mode, let TLABAllocationWeight keeps its default value of 35.\n@@ -220,0 +221,4 @@\n+\n+  if (FLAG_IS_DEFAULT(TLABSize)) {\n+    TLABSize = MAX2(ShenandoahHeapRegion::region_size_bytes() \/ 256, (size_t) 32 * 1024);\n+  }\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahArguments.cpp","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -153,1 +153,1 @@\n-        _bs->set_guard_value(nm, 0);\n+        _bs->arm(nm);\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahCodeRoots.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -45,1 +45,1 @@\n-  _requested_gc_cause(GCCause::_no_cause_specified),\n+  _requested_gc_cause(GCCause::_no_gc),\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahControlThread.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -186,0 +186,23 @@\n+bool ShenandoahGenerationalHeap::requires_barriers(stackChunkOop obj) const {\n+  if (is_idle()) {\n+    return false;\n+  }\n+\n+  if (is_concurrent_young_mark_in_progress() && is_in_young(obj) && !marking_context()->allocated_after_mark_start(obj)) {\n+    \/\/ We are marking young, this object is in young, and it is below the TAMS\n+    return true;\n+  }\n+\n+  if (is_in_old(obj)) {\n+    \/\/ Card marking barriers are required for objects in the old generation\n+    return true;\n+  }\n+\n+  if (has_forwarded_objects()) {\n+    \/\/ Object may have pointers that need to be updated\n+    return true;\n+  }\n+\n+  return false;\n+}\n+\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahGenerationalHeap.cpp","additions":23,"deletions":0,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -131,0 +131,2 @@\n+  bool requires_barriers(stackChunkOop obj) const override;\n+\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahGenerationalHeap.hpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -793,0 +793,1 @@\n+  \/\/ Limit TLAB size for better startup behavior and more equitable distribution of memory between contending mutator threads.\n@@ -794,1 +795,2 @@\n-  MaxTLABSizeWords = align_down(RegionSizeWords, MinObjAlignment);\n+  MaxTLABSizeWords = align_down(MIN2(RegionSizeWords, MAX2(RegionSizeWords \/ 32, (size_t) (256 * 1024) \/ HeapWordSize)),\n+                                MinObjAlignment);\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahHeapRegion.cpp","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -54,1 +54,1 @@\n-    GenerationCounters::update_all(_heap->capacity());\n+    GenerationCounters::update_capacity(_heap->capacity());\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahMonitoringSupport.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -58,0 +58,2 @@\n+\n+  bool is_gc_operation() const override { return true; };\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahVMOperations.hpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -108,0 +108,33 @@\n+\n+void ZBarrierSetNMethod::guard_with(nmethod* nm, int value) {\n+  assert((value & not_entrant) == 0, \"not_entrant bit is reserved\");\n+  ZLocker<ZReentrantLock> locker(ZNMethod::lock_for_nmethod(nm));\n+  \/\/ Preserve the sticky bit\n+  if (is_not_entrant(nm)) {\n+    value |= not_entrant;\n+  }\n+  if (guard_value(nm) != value) {\n+    \/\/ Patch the code only if needed.\n+    set_guard_value(nm, value);\n+  }\n+}\n+\n+bool ZBarrierSetNMethod::is_armed(nmethod* nm) {\n+  int value = guard_value(nm) & ~not_entrant;\n+  return value != disarmed_guard_value();\n+}\n+\n+void ZBarrierSetNMethod::make_not_entrant(nmethod* nm) {\n+  ZLocker<ZReentrantLock> locker(ZNMethod::lock_for_nmethod(nm));\n+  int value = guard_value(nm) | not_entrant; \/\/ permanent sticky value\n+  set_guard_value(nm, value);\n+}\n+\n+bool ZBarrierSetNMethod::is_not_entrant(nmethod* nm) {\n+  return (guard_value(nm) & not_entrant) != 0;\n+}\n+\n+uintptr_t ZBarrierSetNMethod::color(nmethod* nm) {\n+  \/\/ color is stored at low order bits of int; conversion to uintptr_t is fine\n+  return uintptr_t(guard_value(nm) & ~not_entrant);\n+}\n","filename":"src\/hotspot\/share\/gc\/z\/zBarrierSetNMethod.cpp","additions":33,"deletions":0,"binary":false,"changes":33,"status":"modified"},{"patch":"@@ -33,0 +33,4 @@\n+  enum : int {\n+    not_entrant = 1 << 31, \/\/ armed sticky bit, see make_not_entrant\n+  };\n+\n@@ -37,0 +41,2 @@\n+  uintptr_t color(nmethod* nm);\n+\n@@ -42,0 +48,6 @@\n+\n+  virtual void make_not_entrant(nmethod* nm);\n+  virtual bool is_not_entrant(nmethod* nm);\n+  virtual void guard_with(nmethod* nm, int value);\n+  virtual bool is_armed(nmethod* nm);\n+  virtual void arm_all_nmethods() { ShouldNotCallThis(); }\n","filename":"src\/hotspot\/share\/gc\/z\/zBarrierSetNMethod.hpp","additions":12,"deletions":0,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -445,0 +445,4 @@\n+  virtual bool is_gc_operation() const {\n+    return true;\n+  }\n+\n@@ -1311,0 +1315,4 @@\n+  virtual bool is_gc_operation() const {\n+    return true;\n+  }\n+\n","filename":"src\/hotspot\/share\/gc\/z\/zGeneration.cpp","additions":8,"deletions":0,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -581,0 +581,4 @@\n+\n+  virtual bool is_gc_operation() const {\n+    return true;\n+  }\n@@ -772,1 +776,1 @@\n-      _bs_nm->set_guard_value(nm, (int)untype(new_disarm_value_ptr));\n+      _bs_nm->guard_with(nm, (int)untype(new_disarm_value_ptr));\n","filename":"src\/hotspot\/share\/gc\/z\/zMark.cpp","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -244,1 +244,1 @@\n-  bs->set_guard_value(nm, value);\n+  bs->guard_with(nm, value);\n@@ -303,3 +303,2 @@\n-  BarrierSetNMethod* bs_nm = BarrierSet::barrier_set()->barrier_set_nmethod();\n-  \/\/ color is stored at low order bits of int; conversion to uintptr_t is fine\n-  return (uintptr_t)bs_nm->guard_value(nm);\n+  ZBarrierSetNMethod* bs_nm = static_cast<ZBarrierSetNMethod*>(BarrierSet::barrier_set()->barrier_set_nmethod());\n+  return bs_nm->color(nm);\n","filename":"src\/hotspot\/share\/gc\/z\/zNMethod.cpp","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -53,20 +53,0 @@\n-class ZGenerationCounters : public GenerationCounters {\n-public:\n-  ZGenerationCounters(const char* name,\n-                      int ordinal,\n-                      int spaces,\n-                      size_t min_capacity,\n-                      size_t max_capacity,\n-                      size_t curr_capacity)\n-    : GenerationCounters(name,\n-                         ordinal,\n-                         spaces,\n-                         min_capacity,\n-                         max_capacity,\n-                         curr_capacity) {}\n-\n-  void update_capacity(size_t capacity) {\n-    update_all(capacity);\n-  }\n-};\n-\n@@ -76,2 +56,2 @@\n-  ZGenerationCounters _generation_young_counters;\n-  ZGenerationCounters _generation_old_counters;\n+  GenerationCounters  _generation_young_counters;\n+  GenerationCounters  _generation_old_counters;\n","filename":"src\/hotspot\/share\/gc\/z\/zServiceability.cpp","additions":2,"deletions":22,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -356,0 +356,3 @@\n+JNIEXPORT jobject JNICALL\n+JVM_ReferenceGet(JNIEnv *env, jobject ref);\n+\n","filename":"src\/hotspot\/share\/include\/jvm.h","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -151,1 +151,1 @@\n-      case vmIntrinsics::_Reference_get:     return java_lang_ref_reference_get;\n+      case vmIntrinsics::_Reference_get0:    return java_lang_ref_reference_get0;\n@@ -213,1 +213,1 @@\n-  case java_lang_ref_reference_get: return vmIntrinsics::_Reference_get;\n+  case java_lang_ref_reference_get0: return vmIntrinsics::_Reference_get0;\n@@ -323,1 +323,1 @@\n-    case java_lang_ref_reference_get          : tty->print(\"java_lang_ref_reference_get\"); break;\n+    case java_lang_ref_reference_get0         : tty->print(\"java_lang_ref_reference_get0\"); break;\n","filename":"src\/hotspot\/share\/interpreter\/abstractInterpreter.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -86,1 +86,1 @@\n-    java_lang_ref_reference_get,                                \/\/ implementation of java.lang.ref.Reference.get()\n+    java_lang_ref_reference_get0,                               \/\/ implementation of java.lang.ref.Reference.get()\n","filename":"src\/hotspot\/share\/interpreter\/abstractInterpreter.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -32,1 +32,0 @@\n-#include \"interpreter\/interpreterRuntime.hpp\"\n@@ -37,3 +36,1 @@\n-#include \"oops\/resolvedFieldEntry.hpp\"\n-#include \"oops\/resolvedIndyEntry.hpp\"\n-#include \"oops\/resolvedMethodEntry.hpp\"\n+#include \"runtime\/atomic.hpp\"\n@@ -43,1 +40,0 @@\n-#include \"runtime\/timer.hpp\"\n@@ -88,4 +84,5 @@\n-  BytecodePrinter(int flags = 0) {\n-    _is_wide = false;\n-    _code = Bytecodes::_illegal;\n-    _flags = flags;\n+  BytecodePrinter(int flags = 0) : _is_wide(false), _code(Bytecodes::_illegal), _flags(flags) {}\n+\n+#ifndef PRODUCT\n+  BytecodePrinter(Method* prev_method) : BytecodePrinter(0) {\n+    _current_method = prev_method;\n@@ -99,0 +96,4 @@\n+    _current_method = method();\n+    _is_linked = method->method_holder()->is_linked();\n+    assert(_is_linked, \"this function must be called on methods that are already executing\");\n+\n@@ -110,3 +111,0 @@\n-      _current_method = method();\n-      _is_linked = method->method_holder()->is_linked();\n-      assert(_is_linked, \"this function must be called on methods that are already executing\");\n@@ -145,1 +143,0 @@\n-#ifndef PRODUCT\n@@ -149,1 +146,0 @@\n-#endif\n@@ -151,0 +147,1 @@\n+#endif\n@@ -152,1 +149,1 @@\n-  \/\/ Used for Method*::print_codes().  The input bcp comes from\n+  \/\/ Used for Method::print_codes().  The input bcp comes from\n@@ -182,3 +179,5 @@\n-\/\/ We need a global instance to keep track of the states when the bytecodes\n-\/\/ are executed. Access by multiple threads are controlled by ttyLocker.\n-static BytecodePrinter _interpreter_printer;\n+\/\/ We need a global instance to keep track of the method being printed so we can report that\n+\/\/ the method has changed. If this method is redefined and removed, that's ok because the method passed\n+\/\/ in won't match, and this will print the method passed in again. Racing threads changing this global\n+\/\/ will result in reprinting the method passed in again.\n+static Method* _method_currently_being_printed = nullptr;\n@@ -188,7 +187,4 @@\n-    ttyLocker ttyl;  \/\/ 5065316: keep the following output coherent\n-    \/\/ The ttyLocker also prevents races between two threads\n-    \/\/ trying to use the single instance of BytecodePrinter.\n-    \/\/\n-    \/\/ There used to be a leaf mutex here, but the ttyLocker will\n-    \/\/ work just as well, as long as the printing operations never block.\n-    _interpreter_printer.trace(method, bcp, tos, tos2, st);\n+    BytecodePrinter printer(Atomic::load_acquire(&_method_currently_being_printed));\n+    printer.trace(method, bcp, tos, tos2, st);\n+    \/\/ Save method currently being printed to detect when method printing changes.\n+    Atomic::release_store(&_method_currently_being_printed, method());\n","filename":"src\/hotspot\/share\/interpreter\/bytecodeTracer.cpp","additions":21,"deletions":25,"binary":false,"changes":46,"status":"modified"},{"patch":"@@ -503,0 +503,4 @@\n+    if (log_is_enabled(Info, exceptions, stacktrace)) {\n+      Exceptions::log_exception_stacktrace(h_exception, h_method, current_bci);\n+    }\n+\n","filename":"src\/hotspot\/share\/interpreter\/interpreterRuntime.cpp","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -207,1 +207,1 @@\n-  method_entry(java_lang_ref_reference_get)\n+  method_entry(java_lang_ref_reference_get0)\n@@ -231,0 +231,1 @@\n+  native_method_entry(java_lang_ref_reference_get0)\n@@ -468,1 +469,1 @@\n-  case Interpreter::java_lang_ref_reference_get\n+  case Interpreter::java_lang_ref_reference_get0\n","filename":"src\/hotspot\/share\/interpreter\/templateInterpreterGenerator.cpp","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -67,1 +67,1 @@\n-    method_entry(java_lang_ref_reference_get);\n+    method_entry(java_lang_ref_reference_get0);\n@@ -110,1 +110,1 @@\n-  case Interpreter::java_lang_ref_reference_get\n+  case Interpreter::java_lang_ref_reference_get0\n","filename":"src\/hotspot\/share\/interpreter\/zero\/zeroInterpreterGenerator.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -39,8 +39,0 @@\n-class JfrRecorderThread : public JavaThread {\n- public:\n-  JfrRecorderThread(ThreadFunction entry_point) : JavaThread(entry_point) {}\n-  virtual ~JfrRecorderThread() {}\n-\n-  virtual bool is_JfrRecorder_thread() const { return true; }\n-};\n-\n","filename":"src\/hotspot\/share\/jfr\/recorder\/service\/jfrRecorderThread.cpp","additions":0,"deletions":8,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -29,0 +29,1 @@\n+#include \"runtime\/javaThread.hpp\"\n@@ -31,1 +32,0 @@\n-class JavaThread;\n@@ -45,0 +45,8 @@\n+class JfrRecorderThread : public JavaThread {\n+ public:\n+  JfrRecorderThread(ThreadFunction entry_point) : JavaThread(entry_point) {}\n+  virtual ~JfrRecorderThread() {}\n+\n+  virtual bool is_JfrRecorder_thread() const { return true; }\n+};\n+\n","filename":"src\/hotspot\/share\/jfr\/recorder\/service\/jfrRecorderThread.hpp","additions":9,"deletions":1,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -82,1 +82,2 @@\n-  _dead(false)\n+  _dead(false),\n+  _sampling_critical_section(false)\n","filename":"src\/hotspot\/share\/jfr\/support\/jfrThreadLocal.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -1210,1 +1210,1 @@\n-        JVMCIENV->invalidate_nmethod_mirror(nmethod_mirror, true, nmethod::ChangeReason::JVMCI_replacing_with_new_code, JVMCI_CHECK_0);\n+        JVMCIENV->invalidate_nmethod_mirror(nmethod_mirror, true, nmethod::InvalidationReason::JVMCI_REPLACED_WITH_NEW_CODE, JVMCI_CHECK_0);\n@@ -1221,0 +1221,8 @@\n+C2V_VMENTRY_0(jobject, getInvalidationReasonDescription, (JNIEnv *env, jobject, jint invalidation_reason))\n+  HandleMark hm(THREAD);\n+  JNIHandleMark jni_hm(thread);\n+  nmethod::InvalidationReason reason = static_cast<nmethod::InvalidationReason>(invalidation_reason);\n+  JVMCIObject desc = JVMCIENV->create_string(nmethod::invalidation_reason_to_string(reason), JVMCI_CHECK_NULL);\n+  return JVMCIENV->get_jobject(desc);\n+C2V_END\n+\n@@ -1386,1 +1394,1 @@\n-    code->make_not_entrant(nmethod::ChangeReason::JVMCI_reprofile);\n+    code->make_not_entrant(nmethod::InvalidationReason::JVMCI_REPROFILE);\n@@ -1399,1 +1407,6 @@\n-C2V_VMENTRY(void, invalidateHotSpotNmethod, (JNIEnv* env, jobject, jobject hs_nmethod, jboolean deoptimize))\n+C2V_VMENTRY(void, invalidateHotSpotNmethod, (JNIEnv* env, jobject, jobject hs_nmethod, jboolean deoptimize, jint invalidation_reason))\n+  int first = static_cast<int>(nmethod::InvalidationReason::C1_CODEPATCH);\n+  int last = static_cast<int>(nmethod::InvalidationReason::INVALIDATION_REASONS_COUNT);\n+  if (invalidation_reason < first || invalidation_reason >= last) {\n+    JVMCI_THROW_MSG(IllegalArgumentException, err_msg(\"Invalid invalidation_reason: %d\", invalidation_reason));\n+  }\n@@ -1401,1 +1414,1 @@\n-  JVMCIENV->invalidate_nmethod_mirror(nmethod_mirror, deoptimize, nmethod::ChangeReason::JVMCI_invalidate_nmethod, JVMCI_CHECK);\n+  JVMCIENV->invalidate_nmethod_mirror(nmethod_mirror, deoptimize, static_cast<nmethod::InvalidationReason>(invalidation_reason), JVMCI_CHECK);\n@@ -1826,1 +1839,1 @@\n-    fst.current()->cb()->as_nmethod()->make_not_entrant(nmethod::ChangeReason::JVMCI_materialize_virtual_object);\n+    fst.current()->cb()->as_nmethod()->make_not_entrant(nmethod::InvalidationReason::JVMCI_MATERIALIZE_VIRTUAL_OBJECT);\n@@ -3355,0 +3368,1 @@\n+  {CC \"getInvalidationReasonDescription\",             CC \"(I)\" STRING,                                                                      FN_PTR(getInvalidationReasonDescription)},\n@@ -3363,1 +3377,1 @@\n-  {CC \"invalidateHotSpotNmethod\",                     CC \"(\" HS_NMETHOD \"Z)V\",                                                              FN_PTR(invalidateHotSpotNmethod)},\n+  {CC \"invalidateHotSpotNmethod\",                     CC \"(\" HS_NMETHOD \"ZI)V\",                                                             FN_PTR(invalidateHotSpotNmethod)},\n","filename":"src\/hotspot\/share\/jvmci\/jvmciCompilerToVM.cpp","additions":20,"deletions":6,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -346,1 +346,1 @@\n-#define PREDEFINED_CONFIG_FLAGS(do_bool_flag, do_int_flag, do_intx_flag, do_uintx_flag) \\\n+#define PREDEFINED_CONFIG_FLAGS(do_bool_flag, do_int_flag, do_size_t_flag, do_intx_flag, do_uintx_flag) \\\n@@ -357,1 +357,1 @@\n-  do_uintx_flag(CodeCacheSegmentSize)                                      \\\n+  do_size_t_flag(CodeCacheSegmentSize)                                     \\\n@@ -544,4 +544,5 @@\n-#define ADD_BOOL_FLAG(name)  ADD_FLAG(bool, name, BOXED_BOOLEAN)\n-#define ADD_INT_FLAG(name)   ADD_FLAG(int, name, BOXED_LONG)\n-#define ADD_INTX_FLAG(name)  ADD_FLAG(intx, name, BOXED_LONG)\n-#define ADD_UINTX_FLAG(name) ADD_FLAG(uintx, name, BOXED_LONG)\n+#define ADD_BOOL_FLAG(name)   ADD_FLAG(bool, name, BOXED_BOOLEAN)\n+#define ADD_INT_FLAG(name)    ADD_FLAG(int, name, BOXED_LONG)\n+#define ADD_SIZE_T_FLAG(name) ADD_FLAG(size_t, name, BOXED_LONG)\n+#define ADD_INTX_FLAG(name)   ADD_FLAG(intx, name, BOXED_LONG)\n+#define ADD_UINTX_FLAG(name)  ADD_FLAG(uintx, name, BOXED_LONG)\n@@ -549,1 +550,1 @@\n-  len = 0 + PREDEFINED_CONFIG_FLAGS(COUNT_FLAG, COUNT_FLAG, COUNT_FLAG, COUNT_FLAG);\n+  len = 0 + PREDEFINED_CONFIG_FLAGS(COUNT_FLAG, COUNT_FLAG, COUNT_FLAG, COUNT_FLAG, COUNT_FLAG);\n@@ -553,1 +554,1 @@\n-  PREDEFINED_CONFIG_FLAGS(ADD_BOOL_FLAG, ADD_INT_FLAG, ADD_INTX_FLAG, ADD_UINTX_FLAG)\n+  PREDEFINED_CONFIG_FLAGS(ADD_BOOL_FLAG, ADD_INT_FLAG, ADD_SIZE_T_FLAG, ADD_INTX_FLAG, ADD_UINTX_FLAG)\n","filename":"src\/hotspot\/share\/jvmci\/jvmciCompilerToVMInit.cpp","additions":9,"deletions":8,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -1752,1 +1752,1 @@\n-void JVMCIEnv::invalidate_nmethod_mirror(JVMCIObject mirror, bool deoptimize, nmethod::ChangeReason change_reason, JVMCI_TRAPS) {\n+void JVMCIEnv::invalidate_nmethod_mirror(JVMCIObject mirror, bool deoptimize, nmethod::InvalidationReason invalidation_reason, JVMCI_TRAPS) {\n@@ -1775,1 +1775,1 @@\n-    nm->make_not_entrant(change_reason);\n+    nm->make_not_entrant(invalidation_reason);\n@@ -1784,1 +1784,1 @@\n-    nm->make_not_entrant(change_reason);\n+    nm->make_not_entrant(invalidation_reason);\n","filename":"src\/hotspot\/share\/jvmci\/jvmciEnv.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -465,1 +465,1 @@\n-  void invalidate_nmethod_mirror(JVMCIObject mirror, bool deoptimze, nmethod::ChangeReason change_reason, JVMCI_TRAPS);\n+  void invalidate_nmethod_mirror(JVMCIObject mirror, bool deoptimze, nmethod::InvalidationReason invalidation_reason, JVMCI_TRAPS);\n","filename":"src\/hotspot\/share\/jvmci\/jvmciEnv.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -105,0 +105,1 @@\n+    int_field(HotSpotNmethod, invalidationReason)                                                             \\\n","filename":"src\/hotspot\/share\/jvmci\/jvmciJavaClasses.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -800,1 +800,1 @@\n-void JVMCINMethodData::invalidate_nmethod_mirror(nmethod* nm) {\n+void JVMCINMethodData::invalidate_nmethod_mirror(nmethod* nm, nmethod::InvalidationReason invalidation_reason) {\n@@ -819,0 +819,4 @@\n+      if (HotSpotJVMCI::HotSpotNmethod::invalidationReason(jvmciEnv, nmethod_mirror) ==\n+        static_cast<int>(nmethod::InvalidationReason::NOT_INVALIDATED)) {\n+        HotSpotJVMCI::HotSpotNmethod::set_invalidationReason(jvmciEnv, nmethod_mirror, static_cast<int>(invalidation_reason));\n+      }\n@@ -825,0 +829,4 @@\n+      if (HotSpotJVMCI::HotSpotNmethod::invalidationReason(jvmciEnv, nmethod_mirror) ==\n+        static_cast<int>(nmethod::InvalidationReason::NOT_INVALIDATED)) {\n+        HotSpotJVMCI::HotSpotNmethod::set_invalidationReason(jvmciEnv, nmethod_mirror, static_cast<int>(invalidation_reason));\n+      }\n@@ -2187,1 +2195,1 @@\n-              old->make_not_entrant(nmethod::ChangeReason::JVMCI_register_method);\n+              old->make_not_entrant(nmethod::InvalidationReason::JVMCI_REPLACED_WITH_NEW_CODE);\n","filename":"src\/hotspot\/share\/jvmci\/jvmciRuntime.cpp","additions":10,"deletions":2,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -124,1 +124,1 @@\n-  void invalidate_nmethod_mirror(nmethod* nm);\n+  void invalidate_nmethod_mirror(nmethod* nm, nmethod::InvalidationReason invalidation_reason);\n","filename":"src\/hotspot\/share\/jvmci\/jvmciRuntime.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -567,1 +567,24 @@\n-                                                                          \\\n+                                                                                          \\\n+  declare_constant(nmethod::InvalidationReason::NOT_INVALIDATED)                          \\\n+  declare_constant(nmethod::InvalidationReason::C1_CODEPATCH)                             \\\n+  declare_constant(nmethod::InvalidationReason::C1_DEOPTIMIZE)                            \\\n+  declare_constant(nmethod::InvalidationReason::C1_DEOPTIMIZE_FOR_PATCHING)               \\\n+  declare_constant(nmethod::InvalidationReason::C1_PREDICATE_FAILED_TRAP)                 \\\n+  declare_constant(nmethod::InvalidationReason::CI_REPLAY)                                \\\n+  declare_constant(nmethod::InvalidationReason::UNLOADING)                                \\\n+  declare_constant(nmethod::InvalidationReason::UNLOADING_COLD)                           \\\n+  declare_constant(nmethod::InvalidationReason::JVMCI_INVALIDATE)                         \\\n+  declare_constant(nmethod::InvalidationReason::JVMCI_MATERIALIZE_VIRTUAL_OBJECT)         \\\n+  declare_constant(nmethod::InvalidationReason::JVMCI_REPLACED_WITH_NEW_CODE)             \\\n+  declare_constant(nmethod::InvalidationReason::JVMCI_REPROFILE)                          \\\n+  declare_constant(nmethod::InvalidationReason::MARKED_FOR_DEOPTIMIZATION)                \\\n+  declare_constant(nmethod::InvalidationReason::MISSING_EXCEPTION_HANDLER)                \\\n+  declare_constant(nmethod::InvalidationReason::NOT_USED)                                 \\\n+  declare_constant(nmethod::InvalidationReason::OSR_INVALIDATION_BACK_BRANCH)             \\\n+  declare_constant(nmethod::InvalidationReason::OSR_INVALIDATION_FOR_COMPILING_WITH_C1)   \\\n+  declare_constant(nmethod::InvalidationReason::OSR_INVALIDATION_OF_LOWER_LEVEL)          \\\n+  declare_constant(nmethod::InvalidationReason::SET_NATIVE_FUNCTION)                      \\\n+  declare_constant(nmethod::InvalidationReason::UNCOMMON_TRAP)                            \\\n+  declare_constant(nmethod::InvalidationReason::WHITEBOX_DEOPTIMIZATION)                  \\\n+  declare_constant(nmethod::InvalidationReason::ZOMBIE)                                   \\\n+                                                                                          \\\n","filename":"src\/hotspot\/share\/jvmci\/vmStructs_jvmci.cpp","additions":24,"deletions":1,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -283,1 +283,1 @@\n-  number_of_segments = MAX2((int)CodeCacheMinBlockLength, (int)number_of_segments);\n+  number_of_segments = MAX2(CodeCacheMinBlockLength, number_of_segments);\n","filename":"src\/hotspot\/share\/memory\/heap.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -63,0 +63,1 @@\n+#include \"oops\/jmethodIDTable.hpp\"\n@@ -439,0 +440,3 @@\n+    \/\/ Initialize table for matching jmethodID, before SystemDictionary.\n+    JmethodIDTable::initialize();\n+\n@@ -447,1 +451,0 @@\n-\n","filename":"src\/hotspot\/share\/memory\/universe.cpp","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2012, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2012, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -61,0 +61,1 @@\n+  f(mtJNI,            \"JNI\")                                                         \\\n","filename":"src\/hotspot\/share\/nmt\/memTag.hpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -44,1 +44,1 @@\n-#include \"utilities\/deferred.hpp\"\n+#include \"utilities\/deferredStatic.hpp\"\n@@ -53,1 +53,1 @@\n-Deferred<MemBaseline> MemTracker::_baseline;\n+DeferredStatic<MemBaseline> MemTracker::_baseline;\n","filename":"src\/hotspot\/share\/nmt\/memTracker.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -37,0 +37,1 @@\n+#include \"utilities\/deferredStatic.hpp\"\n@@ -38,1 +39,0 @@\n-#include \"utilities\/deferred.hpp\"\n@@ -322,1 +322,1 @@\n-  static Deferred<MemBaseline>      _baseline;\n+  static DeferredStatic<MemBaseline> _baseline;\n","filename":"src\/hotspot\/share\/nmt\/memTracker.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -35,1 +35,1 @@\n-Deferred<MemoryFileTracker> MemoryFileTracker::Instance::_tracker;\n+DeferredStatic<MemoryFileTracker> MemoryFileTracker::Instance::_tracker;\n","filename":"src\/hotspot\/share\/nmt\/memoryFileTracker.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -34,0 +34,1 @@\n+#include \"utilities\/deferredStatic.hpp\"\n@@ -37,1 +38,0 @@\n-#include \"utilities\/deferred.hpp\"\n@@ -95,1 +95,1 @@\n-    static Deferred<MemoryFileTracker> _tracker;\n+    static DeferredStatic<MemoryFileTracker> _tracker;\n","filename":"src\/hotspot\/share\/nmt\/memoryFileTracker.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1940,2 +1940,4 @@\n-  int k1 = operand_bootstrap_method_ref_index_at(idx1);\n-  int k2 = cp2->operand_bootstrap_method_ref_index_at(idx2);\n+  BSMAttributeEntry* e1 = bsm_attribute_entry(idx1);\n+  BSMAttributeEntry* e2 = cp2->bsm_attribute_entry(idx2);\n+  int k1 = e1->bootstrap_method_index();\n+  int k2 = e2->bootstrap_method_index();\n@@ -1947,2 +1949,2 @@\n-  int argc = operand_argument_count_at(idx1);\n-  if (argc == cp2->operand_argument_count_at(idx2)) {\n+  int argc = e1->argument_count();\n+  if (argc == e2->argument_count()) {\n@@ -1950,2 +1952,2 @@\n-      k1 = operand_argument_index_at(idx1, j);\n-      k2 = cp2->operand_argument_index_at(idx2, j);\n+      k1 = e1->argument_index(j);\n+      k2 = e2->argument_index(j);\n","filename":"src\/hotspot\/share\/oops\/constantPool.cpp","additions":8,"deletions":6,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -80,0 +80,37 @@\n+class BSMAttributeEntry {\n+  friend class ConstantPool;\n+  u2 _bootstrap_method_index;\n+  u2 _argument_count;\n+\n+  \/\/ The argument indexes are stored right after the object, in a contiguous array.\n+  \/\/ [ bsmi_0 argc_0 arg_00 arg_01 ... arg_0N bsmi_1 argc_1 arg_10 ... arg_1N ... ]\n+  \/\/ So in order to find the argument array, jump over ourselves.\n+  const u2* argument_indexes() const {\n+    return reinterpret_cast<const u2*>(this + 1);\n+  }\n+  u2* argument_indexes() {\n+    return reinterpret_cast<u2*>(this + 1);\n+  }\n+  \/\/ These are overlays on top of the operands array. Do not construct.\n+  BSMAttributeEntry() = delete;\n+\n+public:\n+  \/\/ Offsets for SA\n+  enum {\n+    _bsmi_offset = 0,\n+    _argc_offset = 1,\n+    _argv_offset = 2\n+  };\n+\n+  int bootstrap_method_index() const {\n+    return _bootstrap_method_index;\n+  }\n+  int argument_count() const {\n+    return _argument_count;\n+  }\n+  int argument_index(int n) const {\n+    assert(checked_cast<u2>(n) < _argument_count, \"oob\");\n+    return argument_indexes()[n];\n+  }\n+};\n+\n@@ -522,4 +559,0 @@\n-  int bootstrap_operand_base(int cp_index) {\n-    int bsms_attribute_index = bootstrap_methods_attribute_index(cp_index);\n-    return operand_offset_at(operands(), bsms_attribute_index);\n-  }\n@@ -563,4 +596,0 @@\n-  int bootstrap_operand_limit(int cp_index) {\n-    int bsms_attribute_index = bootstrap_methods_attribute_index(cp_index);\n-    return operand_limit_at(operands(), bsms_attribute_index);\n-  }\n@@ -569,10 +598,0 @@\n-  \/\/ Layout of InvokeDynamic and Dynamic bootstrap method specifier\n-  \/\/ data in second part of operands array.  This encodes one record in\n-  \/\/ the BootstrapMethods attribute.  The whole specifier also includes\n-  \/\/ the name and type information from the main constant pool entry.\n-  enum {\n-         _indy_bsm_offset  = 0,  \/\/ CONSTANT_MethodHandle bsm\n-         _indy_argc_offset = 1,  \/\/ u2 argc\n-         _indy_argv_offset = 2   \/\/ u2 argv[argc]\n-  };\n-\n@@ -580,1 +599,0 @@\n-\n@@ -587,10 +605,2 @@\n-  u2 operand_bootstrap_method_ref_index_at(int bsms_attribute_index) {\n-    int offset = operand_offset_at(bsms_attribute_index);\n-    return operands()->at(offset + _indy_bsm_offset);\n-  }\n-  u2 operand_argument_count_at(int bsms_attribute_index) {\n-    int offset = operand_offset_at(bsms_attribute_index);\n-    u2 argc = operands()->at(offset + _indy_argc_offset);\n-    return argc;\n-  }\n-  u2 operand_argument_index_at(int bsms_attribute_index, int j) {\n+\n+  BSMAttributeEntry* bsm_attribute_entry(int bsms_attribute_index) {\n@@ -598,1 +608,1 @@\n-    return operands()->at(offset + _indy_argv_offset + j);\n+    return reinterpret_cast<BSMAttributeEntry*>(operands()->adr_at(offset));\n@@ -600,0 +610,1 @@\n+\n@@ -601,3 +612,4 @@\n-    int offset = operand_offset_at(bsms_attribute_index) + _indy_argv_offset\n-                   + operand_argument_count_at(bsms_attribute_index);\n-    return offset;\n+    BSMAttributeEntry* bsme = bsm_attribute_entry(bsms_attribute_index);\n+    u2* argv_start = bsme->argument_indexes();\n+    int offset = argv_start - operands()->data();\n+    return offset + bsme->argument_count();\n@@ -620,2 +632,2 @@\n-    int op_base = bootstrap_operand_base(cp_index);\n-    return operands()->at(op_base + _indy_bsm_offset);\n+    int bsmai = bootstrap_methods_attribute_index(cp_index);\n+    return bsm_attribute_entry(bsmai)->bootstrap_method_index();\n@@ -625,6 +637,2 @@\n-    int op_base = bootstrap_operand_base(cp_index);\n-    u2 argc = operands()->at(op_base + _indy_argc_offset);\n-    DEBUG_ONLY(int end_offset = op_base + _indy_argv_offset + argc;\n-               int next_offset = bootstrap_operand_limit(cp_index));\n-    assert(end_offset == next_offset, \"matched ending\");\n-    return argc;\n+    int bsmai = bootstrap_methods_attribute_index(cp_index);\n+    return bsm_attribute_entry(bsmai)->argument_count();\n@@ -633,4 +641,4 @@\n-    int op_base = bootstrap_operand_base(cp_index);\n-    DEBUG_ONLY(int argc = operands()->at(op_base + _indy_argc_offset));\n-    assert((uint)j < (uint)argc, \"oob\");\n-    return operands()->at(op_base + _indy_argv_offset + j);\n+    int bsmai = bootstrap_methods_attribute_index(cp_index);\n+    BSMAttributeEntry* bsme = bsm_attribute_entry(bsmai);\n+    assert((uint)j < (uint)bsme->argument_count(), \"oob\");\n+    return bsm_attribute_entry(bsmai)->argument_index(j);\n","filename":"src\/hotspot\/share\/oops\/constantPool.hpp","additions":53,"deletions":45,"binary":false,"changes":98,"status":"modified"},{"patch":"@@ -2398,0 +2398,18 @@\n+\/\/ Allocate the jmethodID cache.\n+static jmethodID* create_jmethod_id_cache(size_t size) {\n+  jmethodID* jmeths = NEW_C_HEAP_ARRAY(jmethodID, size + 1, mtClass);\n+  memset(jmeths, 0, (size + 1) * sizeof(jmethodID));\n+  \/\/ cache size is stored in element[0], other elements offset by one\n+  jmeths[0] = (jmethodID)size;\n+  return jmeths;\n+}\n+\n+\/\/ When reading outside a lock, use this.\n+jmethodID* InstanceKlass::methods_jmethod_ids_acquire() const {\n+  return Atomic::load_acquire(&_methods_jmethod_ids);\n+}\n+\n+void InstanceKlass::release_set_methods_jmethod_ids(jmethodID* jmeths) {\n+  Atomic::release_store(&_methods_jmethod_ids, jmeths);\n+}\n+\n@@ -2399,6 +2417,1 @@\n-\/\/ This code is called by the VMThread and JavaThreads so the\n-\/\/ locking has to be done very carefully to avoid deadlocks\n-\/\/ and\/or other cache consistency problems.\n-\/\/\n-jmethodID InstanceKlass::get_jmethod_id(const methodHandle& method_h) {\n-  Method* method = method_h();\n+jmethodID InstanceKlass::get_jmethod_id(Method* method) {\n@@ -2425,1 +2438,1 @@\n-    jmeths = methods_jmethod_ids_acquire();\n+    jmeths = _methods_jmethod_ids;\n@@ -2430,4 +2443,1 @@\n-      jmeths = NEW_C_HEAP_ARRAY(jmethodID, size + 1, mtClass);\n-      memset(jmeths, 0, (size + 1) * sizeof(jmethodID));\n-      \/\/ cache size is stored in element[0], other elements offset by one\n-      jmeths[0] = (jmethodID)size;\n+      jmeths = create_jmethod_id_cache(size);\n@@ -2463,4 +2473,1 @@\n-      jmethodID* new_cache = NEW_C_HEAP_ARRAY(jmethodID, size + 1, mtClass);\n-      memset(new_cache, 0, (size + 1) * sizeof(jmethodID));\n-      \/\/ The cache size is stored in element[0]; the other elements are offset by one.\n-      new_cache[0] = (jmethodID)size;\n+      jmethodID* new_cache = create_jmethod_id_cache(size);\n@@ -2477,3 +2484,2 @@\n-\/\/ Figure out how many jmethodIDs haven't been allocated, and make\n-\/\/ sure space for them is pre-allocated.  This makes getting all\n-\/\/ method ids much, much faster with classes with more than 8\n+\/\/ Make a jmethodID for all methods in this class.  This makes getting all method\n+\/\/ ids much, much faster with classes with more than 8\n@@ -2482,2 +2488,8 @@\n-void InstanceKlass::ensure_space_for_methodids(int start_offset) {\n-  int new_jmeths = 0;\n+void InstanceKlass::make_methods_jmethod_ids() {\n+  MutexLocker ml(JmethodIdCreation_lock, Mutex::_no_safepoint_check_flag);\n+  jmethodID* jmeths = _methods_jmethod_ids;\n+  if (jmeths == nullptr) {\n+    jmeths = create_jmethod_id_cache(idnum_allocated_count());\n+    release_set_methods_jmethod_ids(jmeths);\n+  }\n+\n@@ -2485,1 +2497,1 @@\n-  for (int index = start_offset; index < length; index++) {\n+  for (int index = 0; index < length; index++) {\n@@ -2487,3 +2499,7 @@\n-    jmethodID id = m->find_jmethod_id_or_null();\n-    if (id == nullptr) {\n-      new_jmeths++;\n+    int idnum = m->method_idnum();\n+    assert(!m->is_old(), \"should not have old methods or I'm confused\");\n+    jmethodID id = Atomic::load_acquire(&jmeths[idnum + 1]);\n+    if (!m->is_overpass() &&  \/\/ skip overpasses\n+        id == nullptr) {\n+      id = Method::make_jmethod_id(class_loader_data(), m);\n+      Atomic::release_store(&jmeths[idnum + 1], id);\n@@ -2492,3 +2508,0 @@\n-  if (new_jmeths != 0) {\n-    Method::ensure_jmethod_ids(class_loader_data(), new_jmeths);\n-  }\n@@ -2926,1 +2939,1 @@\n-  jmethodID* jmeths = methods_jmethod_ids_acquire();\n+  jmethodID* jmeths = _methods_jmethod_ids;\n@@ -3504,1 +3517,1 @@\n-      inv->make_not_entrant(nmethod::ChangeReason::OSR_invalidation_of_lower_level);\n+      inv->make_not_entrant(nmethod::InvalidationReason::OSR_INVALIDATION_OF_LOWER_LEVEL);\n@@ -4278,8 +4291,4 @@\n-\/\/ This nulls out jmethodIDs for all methods in 'klass'\n-\/\/ It needs to be called explicitly for all previous versions of a class because these may not be cleaned up\n-\/\/ during class unloading.\n-\/\/ We can not use the jmethodID cache associated with klass directly because the 'previous' versions\n-\/\/ do not have the jmethodID cache filled in. Instead, we need to lookup jmethodID for each method and this\n-\/\/ is expensive - O(n) for one jmethodID lookup. For all contained methods it is O(n^2).\n-\/\/ The reason for expensive jmethodID lookup for each method is that there is no direct link between method and jmethodID.\n-void InstanceKlass::clear_jmethod_ids(InstanceKlass* klass) {\n+\/\/ This nulls out the jmethodID for all obsolete methods in the previous version of the 'klass'.\n+\/\/ These obsolete methods only exist in the previous version and we're about to delete the memory for them.\n+\/\/ The jmethodID for these are deallocated when we unload the class, so this doesn't remove them from the table.\n+void InstanceKlass::clear_obsolete_jmethod_ids(InstanceKlass* klass) {\n@@ -4289,0 +4298,1 @@\n+    \/\/ Only need to clear obsolete methods.\n@@ -4338,1 +4348,1 @@\n-      clear_jmethod_ids(pv_node); \/\/ jmethodID maintenance for the unloaded class\n+      clear_obsolete_jmethod_ids(pv_node); \/\/ jmethodID maintenance for the unloaded class\n","filename":"src\/hotspot\/share\/oops\/instanceKlass.cpp","additions":48,"deletions":38,"binary":false,"changes":86,"status":"modified"},{"patch":"@@ -784,2 +784,2 @@\n-  jmethodID get_jmethod_id(const methodHandle& method_h);\n-  void ensure_space_for_methodids(int start_offset = 0);\n+  jmethodID get_jmethod_id(Method* method);\n+  void make_methods_jmethod_ids();\n@@ -1059,4 +1059,4 @@\n-  inline jmethodID* methods_jmethod_ids_acquire() const;\n-  inline void release_set_methods_jmethod_ids(jmethodID* jmeths);\n-  \/\/ This nulls out jmethodIDs for all methods in 'klass'\n-  static void clear_jmethod_ids(InstanceKlass* klass);\n+  jmethodID* methods_jmethod_ids_acquire() const;\n+  void release_set_methods_jmethod_ids(jmethodID* jmeths);\n+  \/\/ This nulls out obsolete jmethodIDs for all methods in 'klass'.\n+  static void clear_obsolete_jmethod_ids(InstanceKlass* klass);\n","filename":"src\/hotspot\/share\/oops\/instanceKlass.hpp","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -74,8 +74,0 @@\n-inline jmethodID* InstanceKlass::methods_jmethod_ids_acquire() const {\n-  return Atomic::load_acquire(&_methods_jmethod_ids);\n-}\n-\n-inline void InstanceKlass::release_set_methods_jmethod_ids(jmethodID* jmeths) {\n-  Atomic::release_store(&_methods_jmethod_ids, jmeths);\n-}\n-\n","filename":"src\/hotspot\/share\/oops\/instanceKlass.inline.hpp","additions":1,"deletions":9,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -0,0 +1,194 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\n+ *\/\n+\n+#include \"logging\/log.hpp\"\n+#include \"memory\/allocation.hpp\"\n+#include \"memory\/resourceArea.hpp\"\n+#include \"oops\/jmethodIDTable.hpp\"\n+#include \"oops\/method.hpp\"\n+#include \"runtime\/mutexLocker.hpp\"\n+#include \"utilities\/concurrentHashTable.inline.hpp\"\n+#include \"utilities\/concurrentHashTableTasks.inline.hpp\"\n+#include \"utilities\/macros.hpp\"\n+\n+\/\/ Save (jmethod, Method*) in a hashtable to lookup Method.\n+\/\/ The CHT is for performance because it has lock free lookup.\n+\/\/ The value of the next jmethodID.  This only increments (always unique IDs).\n+static uint64_t _jmethodID_counter = 0;\n+\/\/ Tracks the number of jmethodID entries in the _jmethod_id_table.\n+\/\/ Incremented on insert, decremented on remove. Used to track if we need to resize the table.\n+static uint64_t _jmethodID_entry_count = 0;\n+\n+uint64_t JmethodIDTable::get_entry_count() { return _jmethodID_entry_count; }\n+\n+class JmethodEntry {\n+ public:\n+  uint64_t _id;\n+  Method*  _method;\n+\n+  JmethodEntry(uint64_t id, Method* method) : _id(id), _method(method) {}\n+};\n+\n+class JmethodIDTableConfig : public AllStatic {\n+ public:\n+  typedef JmethodEntry Value;\n+  static void* allocate_node(void* context, size_t size, Value const& value) {\n+    return AllocateHeap(size, mtJNI);\n+  }\n+  static void free_node(void* context, void* memory, Value const& value) {\n+    FreeHeap(memory);\n+  }\n+  static uintx get_hash(Value const& value, bool* is_dead) {\n+    *is_dead = false;\n+    return value._id;\n+  }\n+  static bool is_dead(Value const& value) {\n+    return false;\n+  }\n+};\n+\n+using MethodIdTable = ConcurrentHashTable<JmethodIDTableConfig, mtJNI>;\n+static MethodIdTable* _jmethod_id_table = nullptr;\n+\n+void JmethodIDTable::initialize() {\n+  const size_t start_size = 10;\n+  \/\/ 2^24 is max size\n+  const size_t end_size = 24;\n+  \/\/ If a chain gets to 32 something might be wrong.\n+  const size_t grow_hint = 32;\n+\n+  _jmethod_id_table  = new MethodIdTable(start_size, end_size, grow_hint);\n+}\n+\n+class JmethodIDLookup : StackObj {\n+ private:\n+  uint64_t _mid;\n+\n+ public:\n+  JmethodIDLookup(const uint64_t mid) : _mid(mid) {}\n+  uintx get_hash() const {\n+    return _mid;\n+  }\n+  bool equals(JmethodEntry* value) {\n+    return _mid == value->_id;\n+  }\n+\n+  bool is_dead(JmethodEntry* value) {\n+    return false;\n+  }\n+};\n+\n+static JmethodEntry* get_jmethod_entry(jmethodID mid) {\n+  assert(mid != nullptr, \"JNI method id should not be null\");\n+\n+  Thread* current = Thread::current();\n+  JmethodIDLookup lookup((uint64_t)mid);\n+  JmethodEntry* result = nullptr;\n+  auto get = [&] (JmethodEntry* value) {\n+    \/\/ function called if value is found so is never null\n+    result = value;\n+  };\n+  bool needs_rehashing = false;\n+  _jmethod_id_table->get(current, lookup, get, &needs_rehashing);\n+  assert(!needs_rehashing, \"should never need rehashing\");\n+  return result;\n+}\n+\n+Method* JmethodIDTable::resolve_jmethod_id(jmethodID mid) {\n+  JmethodEntry* result = get_jmethod_entry(mid);\n+  return result == nullptr ? nullptr : result->_method;\n+}\n+\n+const unsigned _resize_load_trigger = 5;       \/\/ load factor that will trigger the resize\n+\n+static unsigned table_size(Thread* current) {\n+  return 1 << _jmethod_id_table->get_size_log2(current);\n+}\n+\n+static bool needs_resize(Thread* current) {\n+  return ((_jmethodID_entry_count > (_resize_load_trigger * table_size(current))) &&\n+         !_jmethod_id_table->is_max_size_reached());\n+}\n+\n+\/\/ Add a method id to the jmethod_ids.\n+jmethodID JmethodIDTable::make_jmethod_id(Method* m) {\n+  bool grow_hint, clean_hint;\n+\n+  assert_locked_or_safepoint(JmethodIdCreation_lock);\n+  \/\/ Update jmethodID global counter.\n+  _jmethodID_counter++;\n+\n+  JmethodEntry new_entry(_jmethodID_counter, m);\n+  Thread* current = Thread::current();\n+  JmethodIDLookup lookup(_jmethodID_counter);\n+  bool created = _jmethod_id_table->insert(current, lookup, new_entry, &grow_hint, &clean_hint);\n+  assert(created, \"must be\");\n+  log_debug(jmethod)(\"Inserted jmethod id \" UINT64_FORMAT_X, _jmethodID_counter);\n+  \/\/ Increment number of entries in the table.\n+  _jmethodID_entry_count++;\n+\n+  \/\/ Resize table if it needs to grow.  The _jmethod_id_table has a good distribution.\n+  if (needs_resize(current)) {\n+    _jmethod_id_table->grow(current);\n+    log_info(jmethod)(\"Growing table to %d for \" UINT64_FORMAT \" entries\", table_size(current), _jmethodID_counter);\n+  }\n+  return (jmethodID)_jmethodID_counter;\n+}\n+\n+void JmethodIDTable::remove(jmethodID jmid) {\n+  assert_locked_or_safepoint(JmethodIdCreation_lock);\n+  JmethodIDLookup lookup((uint64_t)jmid);\n+  Thread* current = Thread::current();\n+  JmethodEntry* result;\n+  auto get = [&] (JmethodEntry* value) {\n+    \/\/ The function that is called if value is found, so is never null.\n+    result = value;\n+  };\n+  bool removed = _jmethod_id_table->remove(current, lookup, get);\n+  assert(removed, \"must be\");\n+  log_debug(jmethod)(\"Removed jmethod id \" UINT64_FORMAT_X, (uint64_t)jmid);\n+  \/\/ Decrement number of entries in the table.\n+  _jmethodID_entry_count--;\n+}\n+\n+void JmethodIDTable::change_method_associated_with_jmethod_id(jmethodID jmid, Method* new_method) {\n+  assert_locked_or_safepoint(JmethodIdCreation_lock);\n+  JmethodEntry* result = get_jmethod_entry(jmid);\n+  \/\/ Change table entry to point to the new method.\n+  log_debug(jmethod)(\"Changed jmethod id \" UINT64_FORMAT_X \" from \" PTR_FORMAT \" to \" PTR_FORMAT, (uint64_t)jmid,\n+                     p2i(result->_method), p2i(new_method));\n+  result->_method = new_method;\n+}\n+\n+void JmethodIDTable::clear_jmethod_id(jmethodID jmid, Method* obsolete_method) {\n+  assert_locked_or_safepoint(JmethodIdCreation_lock);\n+  JmethodEntry* result = get_jmethod_entry(jmid);\n+  \/\/ We need to make sure that jmethodID actually resolves to this method\n+  \/\/ - multiple redefined versions may share jmethodID slots and if a method\n+  \/\/   has already been rewired to a newer version we could be clearing\n+  \/\/   the reference to a still existing method instance.\n+  if (result->_method == obsolete_method) {\n+    result->_method = nullptr;\n+  }\n+}\n","filename":"src\/hotspot\/share\/oops\/jmethodIDTable.cpp","additions":194,"deletions":0,"binary":false,"changes":194,"status":"added"},{"patch":"@@ -0,0 +1,55 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\n+ *\/\n+\n+#ifndef SHARE_OOPS_JMETHODIDTABLE_HPP\n+#define SHARE_OOPS_JMETHODIDTABLE_HPP\n+\n+#include \"jni.h\"\n+#include \"memory\/allocation.hpp\"\n+\n+\/\/ Class for associating Method with jmethodID\n+class Method;\n+\n+class JmethodIDTable : public AllStatic {\n+ public:\n+  static void initialize();\n+\n+  \/\/ Given a Method return a jmethodID.\n+  static jmethodID make_jmethod_id(Method* m);\n+\n+  \/\/ Given a jmethodID, return a Method.\n+  static Method* resolve_jmethod_id(jmethodID mid);\n+\n+  \/\/ Class unloading support, remove the associations from the tables.  Stale jmethodID will\n+  \/\/ not be found and return null.\n+  static void remove(jmethodID mid);\n+\n+  \/\/ RedefineClasses support\n+  static void change_method_associated_with_jmethod_id(jmethodID jmid, Method* new_method);\n+  static void clear_jmethod_id(jmethodID jmid, Method* m);\n+\n+  static uint64_t get_entry_count();\n+};\n+\n+#endif \/\/ SHARE_OOPS_JMETHODIDTABLE_HPP\n","filename":"src\/hotspot\/share\/oops\/jmethodIDTable.hpp","additions":55,"deletions":0,"binary":false,"changes":55,"status":"added"},{"patch":"@@ -56,0 +56,1 @@\n+#include \"oops\/jmethodIDTable.hpp\"\n@@ -1031,1 +1032,1 @@\n-    nm->make_not_entrant(nmethod::ChangeReason::set_native_function);\n+    nm->make_not_entrant(nmethod::InvalidationReason::SET_NATIVE_FUNCTION);\n@@ -2062,146 +2063,3 @@\n-\n-\/\/ This is a block allocating object, sort of like JNIHandleBlock, only a\n-\/\/ lot simpler.\n-\/\/ It's allocated on the CHeap because once we allocate a jmethodID, we can\n-\/\/ never get rid of it.\n-\n-static const int min_block_size = 8;\n-\n-class JNIMethodBlockNode : public CHeapObj<mtClass> {\n-  friend class JNIMethodBlock;\n-  Method**        _methods;\n-  int             _number_of_methods;\n-  int             _top;\n-  JNIMethodBlockNode* _next;\n-\n- public:\n-\n-  JNIMethodBlockNode(int num_methods = min_block_size);\n-\n-  ~JNIMethodBlockNode() { FREE_C_HEAP_ARRAY(Method*, _methods); }\n-\n-  void ensure_methods(int num_addl_methods) {\n-    if (_top < _number_of_methods) {\n-      num_addl_methods -= _number_of_methods - _top;\n-      if (num_addl_methods <= 0) {\n-        return;\n-      }\n-    }\n-    if (_next == nullptr) {\n-      _next = new JNIMethodBlockNode(MAX2(num_addl_methods, min_block_size));\n-    } else {\n-      _next->ensure_methods(num_addl_methods);\n-    }\n-  }\n-};\n-\n-class JNIMethodBlock : public CHeapObj<mtClass> {\n-  JNIMethodBlockNode _head;\n-  JNIMethodBlockNode *_last_free;\n- public:\n-  static Method* const _free_method;\n-\n-  JNIMethodBlock(int initial_capacity = min_block_size)\n-      : _head(initial_capacity), _last_free(&_head) {}\n-\n-  void ensure_methods(int num_addl_methods) {\n-    _last_free->ensure_methods(num_addl_methods);\n-  }\n-\n-  Method** add_method(Method* m) {\n-    for (JNIMethodBlockNode* b = _last_free; b != nullptr; b = b->_next) {\n-      if (b->_top < b->_number_of_methods) {\n-        \/\/ top points to the next free entry.\n-        int i = b->_top;\n-        b->_methods[i] = m;\n-        b->_top++;\n-        _last_free = b;\n-        return &(b->_methods[i]);\n-      } else if (b->_top == b->_number_of_methods) {\n-        \/\/ if the next free entry ran off the block see if there's a free entry\n-        for (int i = 0; i < b->_number_of_methods; i++) {\n-          if (b->_methods[i] == _free_method) {\n-            b->_methods[i] = m;\n-            _last_free = b;\n-            return &(b->_methods[i]);\n-          }\n-        }\n-        \/\/ Only check each block once for frees.  They're very unlikely.\n-        \/\/ Increment top past the end of the block.\n-        b->_top++;\n-      }\n-      \/\/ need to allocate a next block.\n-      if (b->_next == nullptr) {\n-        b->_next = _last_free = new JNIMethodBlockNode();\n-      }\n-    }\n-    guarantee(false, \"Should always allocate a free block\");\n-    return nullptr;\n-  }\n-\n-  bool contains(Method** m) {\n-    if (m == nullptr) return false;\n-    for (JNIMethodBlockNode* b = &_head; b != nullptr; b = b->_next) {\n-      if (b->_methods <= m && m < b->_methods + b->_number_of_methods) {\n-        \/\/ This is a bit of extra checking, for two reasons.  One is\n-        \/\/ that contains() deals with pointers that are passed in by\n-        \/\/ JNI code, so making sure that the pointer is aligned\n-        \/\/ correctly is valuable.  The other is that <= and > are\n-        \/\/ technically not defined on pointers, so the if guard can\n-        \/\/ pass spuriously; no modern compiler is likely to make that\n-        \/\/ a problem, though (and if one did, the guard could also\n-        \/\/ fail spuriously, which would be bad).\n-        ptrdiff_t idx = m - b->_methods;\n-        if (b->_methods + idx == m) {\n-          return true;\n-        }\n-      }\n-    }\n-    return false;  \/\/ not found\n-  }\n-\n-  \/\/ During class unloading the methods are cleared, which is different\n-  \/\/ than freed.\n-  void clear_all_methods() {\n-    for (JNIMethodBlockNode* b = &_head; b != nullptr; b = b->_next) {\n-      for (int i = 0; i< b->_number_of_methods; i++) {\n-        b->_methods[i] = nullptr;\n-      }\n-    }\n-  }\n-#ifndef PRODUCT\n-  int count_methods() {\n-    \/\/ count all allocated methods\n-    int count = 0;\n-    for (JNIMethodBlockNode* b = &_head; b != nullptr; b = b->_next) {\n-      for (int i = 0; i< b->_number_of_methods; i++) {\n-        if (b->_methods[i] != _free_method) count++;\n-      }\n-    }\n-    return count;\n-  }\n-#endif \/\/ PRODUCT\n-};\n-\n-\/\/ Something that can't be mistaken for an address or a markWord\n-Method* const JNIMethodBlock::_free_method = (Method*)55;\n-\n-JNIMethodBlockNode::JNIMethodBlockNode(int num_methods) : _top(0), _next(nullptr) {\n-  _number_of_methods = MAX2(num_methods, min_block_size);\n-  _methods = NEW_C_HEAP_ARRAY(Method*, _number_of_methods, mtInternal);\n-  for (int i = 0; i < _number_of_methods; i++) {\n-    _methods[i] = JNIMethodBlock::_free_method;\n-  }\n-}\n-\n-void Method::ensure_jmethod_ids(ClassLoaderData* cld, int capacity) {\n-  \/\/ Have to add jmethod_ids() to class loader data thread-safely.\n-  \/\/ Also have to add the method to the list safely, which the lock\n-  \/\/ protects as well.\n-  MutexLocker ml(JmethodIdCreation_lock,  Mutex::_no_safepoint_check_flag);\n-  if (cld->jmethod_ids() == nullptr) {\n-    cld->set_jmethod_ids(new JNIMethodBlock(capacity));\n-  } else {\n-    cld->jmethod_ids()->ensure_methods(capacity);\n-  }\n-}\n+\/\/ jmethodIDs are 64-bit integers that will never run out and are mapped in a table\n+\/\/ to their Method and vice versa.  If JNI code has access to stale jmethodID, this\n+\/\/ wastes no memory but the Method* returned is null.\n@@ -2212,1 +2070,1 @@\n-  \/\/ Also have to add the method to the list safely, which the lock\n+  \/\/ Also have to add the method to the InstanceKlass list safely, which the lock\n@@ -2215,0 +2073,2 @@\n+  jmethodID jmid = JmethodIDTable::make_jmethod_id(m);\n+  assert(jmid != nullptr, \"must be created\");\n@@ -2216,7 +2076,3 @@\n-  ResourceMark rm;\n-  log_debug(jmethod)(\"Creating jmethodID for Method %s\", m->external_name());\n-  if (cld->jmethod_ids() == nullptr) {\n-    cld->set_jmethod_ids(new JNIMethodBlock());\n-  }\n-  \/\/ jmethodID is a pointer to Method*\n-  return (jmethodID)cld->jmethod_ids()->add_method(m);\n+  \/\/ Add to growable array in CLD.\n+  cld->add_jmethod_id(jmid);\n+  return jmid;\n@@ -2225,0 +2081,1 @@\n+\/\/ This looks in the InstanceKlass cache, then calls back to make_jmethod_id if not found.\n@@ -2226,2 +2083,7 @@\n-  methodHandle mh(Thread::current(), this);\n-  return method_holder()->get_jmethod_id(mh);\n+  return method_holder()->get_jmethod_id(this);\n+}\n+\n+\/\/ Get the Method out of the table given the method id.\n+Method* Method::resolve_jmethod_id(jmethodID mid) {\n+  assert(mid != nullptr, \"JNI method id should not be null\");\n+  return JmethodIDTable::resolve_jmethod_id(mid);\n@@ -2235,1 +2097,1 @@\n-           new_method->method_holder()->class_loader() == nullptr, \/\/ allow Unsafe substitution\n+         new_method->method_holder()->class_loader() == nullptr, \/\/ allow substitution to Unsafe method\n@@ -2237,2 +2099,1 @@\n-  \/\/ Just change the method in place, jmethodID pointer doesn't change.\n-  *((Method**)jmid) = new_method;\n+  JmethodIDTable::change_method_associated_with_jmethod_id(jmid, new_method);\n@@ -2241,1 +2102,11 @@\n-bool Method::is_method_id(jmethodID mid) {\n+\/\/ If there's a jmethodID for this method, clear the Method\n+\/\/ but leave jmethodID for this method in the table.\n+\/\/ It's deallocated with class unloading.\n+void Method::clear_jmethod_id() {\n+  jmethodID mid = method_holder()->jmethod_id_or_null(this);\n+  if (mid != nullptr) {\n+    JmethodIDTable::clear_jmethod_id(mid, this);\n+  }\n+}\n+\n+bool Method::validate_jmethod_id(jmethodID mid) {\n@@ -2247,1 +2118,1 @@\n-  return (cld->jmethod_ids()->contains((Method**)mid));\n+  return (cld->jmethod_ids()->contains(mid));\n@@ -2253,1 +2124,1 @@\n-  if (o == nullptr || o == JNIMethodBlock::_free_method) {\n+  if (o == nullptr) {\n@@ -2262,1 +2133,1 @@\n-};\n+}\n@@ -2283,19 +2154,0 @@\n-\/\/ Called when the class loader is unloaded to make all methods weak.\n-void Method::clear_jmethod_ids(ClassLoaderData* loader_data) {\n-  loader_data->jmethod_ids()->clear_all_methods();\n-}\n-\n-void Method::clear_jmethod_id() {\n-  \/\/ Being at a safepoint prevents racing against other class redefinitions\n-  assert(SafepointSynchronize::is_at_safepoint(), \"should be at safepoint\");\n-  \/\/ The jmethodID is not stored in the Method instance, we need to look it up first\n-  jmethodID methodid = find_jmethod_id_or_null();\n-  \/\/ We need to make sure that jmethodID actually resolves to this method\n-  \/\/ - multiple redefined versions may share jmethodID slots and if a method\n-  \/\/   has already been rewired to a newer version we could be removing reference\n-  \/\/   to a still existing method instance\n-  if (methodid != nullptr && *((Method**)methodid) == this) {\n-    *((Method**)methodid) = nullptr;\n-  }\n-}\n-\n@@ -2326,7 +2178,0 @@\n-#ifndef PRODUCT\n-void Method::print_jmethod_ids_count(const ClassLoaderData* loader_data, outputStream* out) {\n-  out->print(\"%d\", loader_data->jmethod_ids()->count_methods());\n-}\n-#endif \/\/ PRODUCT\n-\n-\n","filename":"src\/hotspot\/share\/oops\/method.cpp","additions":35,"deletions":190,"binary":false,"changes":225,"status":"modified"},{"patch":"@@ -707,5 +707,0 @@\n-  \/\/ Ensure there is enough capacity in the internal tracking data\n-  \/\/ structures to hold the number of jmethodIDs you plan to generate.\n-  \/\/ This saves substantial time doing allocations.\n-  static void ensure_jmethod_ids(ClassLoaderData* cld, int capacity);\n-\n@@ -715,4 +710,1 @@\n-  inline static Method* resolve_jmethod_id(jmethodID mid) {\n-    assert(mid != nullptr, \"JNI method id should not be null\");\n-    return *((Method**)mid);\n-  }\n+  static Method* resolve_jmethod_id(jmethodID mid);\n@@ -726,1 +718,1 @@\n-  static bool is_method_id(jmethodID mid);\n+  static bool validate_jmethod_id(jmethodID mid);\n@@ -728,2 +720,1 @@\n-  \/\/ Clear methods\n-  static void clear_jmethod_ids(ClassLoaderData* loader_data);\n+  \/\/ Clear jmethodID\n","filename":"src\/hotspot\/share\/oops\/method.hpp","additions":3,"deletions":12,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -37,0 +37,1 @@\n+#include \"oops\/objArrayKlass.hpp\"\n@@ -289,1 +290,6 @@\n-      return !k->is_instance_klass() || InstanceKlass::cast(k)->is_loaded();\n+      if (k->is_objArray_klass()) {\n+        k = ObjArrayKlass::cast(k)->bottom_klass();\n+      }\n+      if (k->is_instance_klass()) {\n+        return InstanceKlass::cast(k)->is_loaded();\n+      }\n","filename":"src\/hotspot\/share\/oops\/trainingData.hpp","additions":7,"deletions":1,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -35,1 +35,0 @@\n-#include \"runtime\/stubRoutines.hpp\"\n@@ -37,0 +36,1 @@\n+#include \"runtime\/stubRoutines.hpp\"\n","filename":"src\/hotspot\/share\/opto\/addnode.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -25,0 +25,1 @@\n+#include \"compiler\/compilerDirectives.hpp\"\n@@ -28,1 +29,0 @@\n-#include \"compiler\/compilerDirectives.hpp\"\n","filename":"src\/hotspot\/share\/opto\/block.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -29,1 +29,0 @@\n-#include \"compiler\/compilerEvent.hpp\"\n@@ -31,0 +30,1 @@\n+#include \"compiler\/compilerEvent.hpp\"\n","filename":"src\/hotspot\/share\/opto\/bytecodeInfo.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -28,1 +28,0 @@\n-#include \"runtime\/handles.inline.hpp\"\n@@ -35,1 +34,0 @@\n-#include \"runtime\/stubRoutines.hpp\"\n@@ -37,0 +35,2 @@\n+#include \"runtime\/handles.inline.hpp\"\n+#include \"runtime\/stubRoutines.hpp\"\n@@ -770,1 +770,1 @@\n-  case vmIntrinsics::_Reference_get:\n+  case vmIntrinsics::_Reference_get0:\n","filename":"src\/hotspot\/share\/opto\/c2compiler.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -27,1 +27,0 @@\n-#include \"ci\/ciObjArray.hpp\"\n@@ -30,0 +29,1 @@\n+#include \"ci\/ciObjArray.hpp\"\n","filename":"src\/hotspot\/share\/opto\/callGenerator.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -25,1 +25,0 @@\n-#include \"compiler\/compileLog.hpp\"\n@@ -27,0 +26,2 @@\n+#include \"code\/vmreg.hpp\"\n+#include \"compiler\/compileLog.hpp\"\n@@ -46,1 +47,0 @@\n-#include \"code\/vmreg.hpp\"\n","filename":"src\/hotspot\/share\/opto\/callnode.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -25,0 +25,1 @@\n+#include \"castnode.hpp\"\n@@ -33,1 +34,0 @@\n-#include \"castnode.hpp\"\n","filename":"src\/hotspot\/share\/opto\/castnode.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -38,1 +38,0 @@\n-#include \"opto\/narrowptrnode.hpp\"\n@@ -40,0 +39,1 @@\n+#include \"opto\/narrowptrnode.hpp\"\n","filename":"src\/hotspot\/share\/opto\/cfgnode.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -38,1 +38,0 @@\n-#include \"opto\/memnode.hpp\"\n@@ -40,0 +39,1 @@\n+#include \"opto\/memnode.hpp\"\n","filename":"src\/hotspot\/share\/opto\/classes.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -36,0 +36,1 @@\n+#include \"compiler\/compiler_globals.hpp\"\n@@ -38,1 +39,0 @@\n-#include \"compiler\/compiler_globals.hpp\"\n@@ -786,13 +786,3 @@\n-      if (method()->intrinsic_id() == vmIntrinsics::_Reference_get) {\n-        \/\/ With java.lang.ref.reference.get() we must go through the\n-        \/\/ intrinsic - even when get() is the root\n-        \/\/ method of the compile - so that, if necessary, the value in\n-        \/\/ the referent field of the reference object gets recorded by\n-        \/\/ the pre-barrier code.\n-        cg = find_intrinsic(method(), false);\n-      }\n-      if (cg == nullptr) {\n-        float past_uses = method()->interpreter_invocation_count();\n-        float expected_uses = past_uses;\n-        cg = CallGenerator::for_inline(method(), expected_uses);\n-      }\n+      float past_uses = method()->interpreter_invocation_count();\n+      float expected_uses = past_uses;\n+      cg = CallGenerator::for_inline(method(), expected_uses);\n","filename":"src\/hotspot\/share\/opto\/compile.cpp","additions":4,"deletions":14,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -31,1 +31,1 @@\n-#include \"compiler\/compiler_globals.hpp\"\n+#include \"compiler\/cHeapStringHolder.hpp\"\n@@ -33,0 +33,1 @@\n+#include \"compiler\/compiler_globals.hpp\"\n@@ -34,1 +35,0 @@\n-#include \"compiler\/cHeapStringHolder.hpp\"\n@@ -40,1 +40,0 @@\n-#include \"opto\/phasetype.hpp\"\n@@ -42,0 +41,2 @@\n+#include \"opto\/phasetype.hpp\"\n+#include \"opto\/printinlining.hpp\"\n@@ -49,1 +50,0 @@\n-#include \"opto\/printinlining.hpp\"\n","filename":"src\/hotspot\/share\/opto\/compile.hpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -267,0 +267,59 @@\n+\n+  \/\/ Detects following ideal graph pattern\n+  \/\/      ConvF2HF(binopF(conF, ConvHF2F(varS))) =>\n+  \/\/              ReinterpretHF2SNode(binopHF(conHF, ReinterpretS2HFNode(varS)))\n+  if (Float16NodeFactory::is_float32_binary_oper(in(1)->Opcode())) {\n+    Node* binopF = in(1);\n+    \/\/ Check if the incoming binary operation has one floating point constant\n+    \/\/ input and the other input is a half precision to single precision upcasting node.\n+    \/\/ We land here because a prior HalfFloat to Float conversion promotes\n+    \/\/ an integral constant holding Float16 value to a floating point constant.\n+    \/\/ i.e. ConvHF2F ConI(short) => ConF\n+    Node* conF = nullptr;\n+    Node* varS = nullptr;\n+    if (binopF->in(1)->is_Con() && binopF->in(2)->Opcode() == Op_ConvHF2F) {\n+      conF = binopF->in(1);\n+      varS = binopF->in(2)->in(1);\n+    } else if (binopF->in(2)->is_Con() &&  binopF->in(1)->Opcode() == Op_ConvHF2F) {\n+      conF = binopF->in(2);\n+      varS = binopF->in(1)->in(1);\n+    }\n+\n+    if (conF != nullptr &&\n+        varS != nullptr &&\n+        conF->bottom_type()->isa_float_constant() != nullptr &&\n+        Matcher::match_rule_supported(Float16NodeFactory::get_float16_binary_oper(binopF->Opcode())) &&\n+        Matcher::match_rule_supported(Op_ReinterpretS2HF) &&\n+        Matcher::match_rule_supported(Op_ReinterpretHF2S) &&\n+        StubRoutines::hf2f_adr() != nullptr &&\n+        StubRoutines::f2hf_adr() != nullptr) {\n+      jfloat con = conF->bottom_type()->getf();\n+      \/\/ Conditions under which floating point constant can be considered for a pattern match.\n+      \/\/ 1. conF must lie within Float16 value range, otherwise we would have rounding issues:\n+      \/\/    Doing the operation in float32 and then rounding is not the same as\n+      \/\/    rounding first and doing the operation in float16.\n+      \/\/ 2. If a constant value is one of the valid IEEE 754 binary32 NaN bit patterns\n+      \/\/ then it's safe to consider it for pattern match because of the following reasons:\n+      \/\/   a. As per section 2.8 of JVMS, Java Virtual Machine does not support\n+      \/\/   signaling NaN value.\n+      \/\/   b. Any signaling NaN which takes part in a non-comparison expression\n+      \/\/   results in a quiet NaN but preserves the significand bits of signaling NaN.\n+      \/\/   c. The pattern being matched includes a Float to Float16 conversion after binary\n+      \/\/   expression, this downcast will still preserve the significand bits of binary32 NaN.\n+      bool isnan = g_isnan((jdouble)con);\n+      if (StubRoutines::hf2f(StubRoutines::f2hf(con)) == con || isnan) {\n+        Node* newVarHF = phase->transform(new ReinterpretS2HFNode(varS));\n+        Node* conHF = phase->makecon(TypeH::make(con));\n+        Node* binopHF = nullptr;\n+        \/\/ Preserving original input order for semantic correctness\n+        \/\/ of non-commutative operation.\n+        if (binopF->in(1) == conF) {\n+          binopHF = phase->transform(Float16NodeFactory::make(binopF->Opcode(), binopF->in(0), conHF, newVarHF));\n+        } else {\n+          binopHF = phase->transform(Float16NodeFactory::make(binopF->Opcode(), binopF->in(0), newVarHF, conHF));\n+        }\n+        return new ReinterpretHF2SNode(binopHF);\n+      }\n+    }\n+  }\n+\n@@ -269,0 +328,1 @@\n+\n","filename":"src\/hotspot\/share\/opto\/convertnode.cpp","additions":60,"deletions":0,"binary":false,"changes":60,"status":"modified"},{"patch":"@@ -31,1 +31,0 @@\n-#include \"opto\/movenode.hpp\"\n@@ -33,0 +32,1 @@\n+#include \"opto\/movenode.hpp\"\n@@ -35,0 +35,1 @@\n+#include \"opto\/runtime.hpp\"\n@@ -37,1 +38,0 @@\n-#include \"opto\/runtime.hpp\"\n@@ -826,13 +826,0 @@\n-  \/\/ x\/x == 1, we ignore 0\/0.\n-  \/\/ Note: if t1 and t2 are zero then result is NaN (JVMS page 213)\n-  \/\/ Does not work for variables because of NaN's\n-  if (in(1) == in(2) && t1->base() == Type::HalfFloatCon &&\n-      !g_isnan(t1->getf()) && g_isfinite(t1->getf()) && t1->getf() != 0.0) { \/\/ could be negative ZERO or NaN\n-    return TypeH::ONE;\n-  }\n-\n-  if (t2 == TypeH::ONE) {\n-    return t1;\n-  }\n-\n-  \/\/ If divisor is a constant and not zero, divide the numbers\n@@ -840,3 +827,1 @@\n-      t2->base() == Type::HalfFloatCon &&\n-      t2->getf() != 0.0)  {\n-    \/\/ could be negative zero\n+      t2->base() == Type::HalfFloatCon)  {\n@@ -846,13 +831,0 @@\n-  \/\/ If the dividend is a constant zero\n-  \/\/ Note: if t1 and t2 are zero then result is NaN (JVMS page 213)\n-  \/\/ Test TypeHF::ZERO is not sufficient as it could be negative zero\n-\n-  if (t1 == TypeH::ZERO && !g_isnan(t2->getf()) && t2->getf() != 0.0) {\n-    return TypeH::ZERO;\n-  }\n-\n-  \/\/ If divisor or dividend is nan then result is nan.\n-  if (g_isnan(t1->getf()) || g_isnan(t2->getf())) {\n-    return TypeH::make(NAN);\n-  }\n-\n","filename":"src\/hotspot\/share\/opto\/divnode.cpp","additions":3,"deletions":31,"binary":false,"changes":34,"status":"modified"},{"patch":"@@ -32,1 +32,0 @@\n-#include \"opto\/c2compiler.hpp\"\n@@ -34,0 +33,1 @@\n+#include \"opto\/c2compiler.hpp\"\n@@ -35,0 +35,1 @@\n+#include \"opto\/castnode.hpp\"\n@@ -38,1 +39,0 @@\n-#include \"opto\/macro.hpp\"\n@@ -40,1 +40,1 @@\n-#include \"opto\/phaseX.hpp\"\n+#include \"opto\/macro.hpp\"\n@@ -43,1 +43,1 @@\n-#include \"opto\/castnode.hpp\"\n+#include \"opto\/phaseX.hpp\"\n","filename":"src\/hotspot\/share\/opto\/escape.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -32,0 +32,1 @@\n+#include \"opto\/chaitin.hpp\"\n@@ -37,1 +38,0 @@\n-#include \"opto\/chaitin.hpp\"\n","filename":"src\/hotspot\/share\/opto\/gcm.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -25,0 +25,2 @@\n+#include \"asm\/register.hpp\"\n+#include \"ci\/ciObjArray.hpp\"\n@@ -27,2 +29,0 @@\n-#include \"ci\/ciObjArray.hpp\"\n-#include \"asm\/register.hpp\"\n@@ -50,1 +50,0 @@\n-#include \"utilities\/powerOfTwo.hpp\"\n@@ -52,0 +51,1 @@\n+#include \"utilities\/powerOfTwo.hpp\"\n@@ -3806,0 +3806,2 @@\n+    assert(fast_size_limit == 0 || count_leading_zeros(fast_size_limit) > static_cast<unsigned>(LogBytesPerLong - log2_esize),\n+           \"fast_size_limit (%d) overflow when shifted left by %d\", fast_size_limit, LogBytesPerLong - log2_esize);\n","filename":"src\/hotspot\/share\/opto\/graphKit.cpp","additions":5,"deletions":3,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -29,1 +29,0 @@\n-#include \"opto\/cfgnode.hpp\"\n@@ -31,0 +30,1 @@\n+#include \"opto\/cfgnode.hpp\"\n","filename":"src\/hotspot\/share\/opto\/idealKit.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -35,1 +35,0 @@\n-#include \"opto\/runtime.hpp\"\n@@ -37,0 +36,1 @@\n+#include \"opto\/runtime.hpp\"\n","filename":"src\/hotspot\/share\/opto\/ifnode.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -25,1 +25,0 @@\n-#include \"opto\/intrinsicnode.hpp\"\n@@ -27,1 +26,1 @@\n-#include \"opto\/mulnode.hpp\"\n+#include \"opto\/intrinsicnode.hpp\"\n@@ -29,0 +28,1 @@\n+#include \"opto\/mulnode.hpp\"\n@@ -30,1 +30,0 @@\n-#include \"utilities\/population_count.hpp\"\n@@ -33,0 +32,1 @@\n+#include \"utilities\/population_count.hpp\"\n","filename":"src\/hotspot\/share\/opto\/intrinsicnode.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -28,0 +28,1 @@\n+#include \"opto\/connode.hpp\"\n@@ -30,1 +31,0 @@\n-#include \"opto\/connode.hpp\"\n","filename":"src\/hotspot\/share\/opto\/intrinsicnode.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -34,0 +34,1 @@\n+#include \"opto\/chaitin.hpp\"\n@@ -36,1 +37,0 @@\n-#include \"opto\/chaitin.hpp\"\n","filename":"src\/hotspot\/share\/opto\/lcm.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -26,1 +26,0 @@\n-#include \"ci\/ciUtilities.inline.hpp\"\n@@ -28,0 +27,1 @@\n+#include \"ci\/ciUtilities.inline.hpp\"\n@@ -50,1 +50,0 @@\n-#include \"opto\/runtime.hpp\"\n@@ -52,0 +51,1 @@\n+#include \"opto\/runtime.hpp\"\n@@ -567,1 +567,1 @@\n-  case vmIntrinsics::_Reference_get:            return inline_reference_get();\n+  case vmIntrinsics::_Reference_get0:           return inline_reference_get0();\n@@ -1578,3 +1578,8 @@\n-    \/\/ Check if src array address is aligned to HeapWordSize (dst is always aligned)\n-    const TypeInt* toffset = gvn().type(offset)->is_int();\n-    bool aligned = toffset->is_con() && ((toffset->get_con() * type2aelembytes(T_CHAR)) % HeapWordSize == 0);\n+    \/\/ Check if dst array address is aligned to HeapWordSize\n+    bool aligned = (arrayOopDesc::base_offset_in_bytes(T_BYTE) % HeapWordSize == 0);\n+    \/\/ If true, then check if src array address is aligned to HeapWordSize\n+    if (aligned) {\n+      const TypeInt* toffset = gvn().type(offset)->is_int();\n+      aligned = toffset->is_con() && ((arrayOopDesc::base_offset_in_bytes(T_CHAR) +\n+                                       toffset->get_con() * type2aelembytes(T_CHAR)) % HeapWordSize == 0);\n+    }\n@@ -1661,2 +1666,2 @@\n-    bool aligned = tsrc->is_con() && ((tsrc->get_con() * type2aelembytes(T_BYTE)) % HeapWordSize == 0) &&\n-                   tdst->is_con() && ((tdst->get_con() * type2aelembytes(T_CHAR)) % HeapWordSize == 0);\n+    bool aligned = tsrc->is_con() && ((arrayOopDesc::base_offset_in_bytes(T_BYTE) + tsrc->get_con() * type2aelembytes(T_BYTE)) % HeapWordSize == 0) &&\n+                   tdst->is_con() && ((arrayOopDesc::base_offset_in_bytes(T_CHAR) + tdst->get_con() * type2aelembytes(T_CHAR)) % HeapWordSize == 0);\n@@ -6921,1 +6926,1 @@\n-\/\/----------------------------inline_reference_get----------------------------\n+\/\/----------------------------inline_reference_get0----------------------------\n@@ -6923,1 +6928,1 @@\n-bool LibraryCallKit::inline_reference_get() {\n+bool LibraryCallKit::inline_reference_get0() {\n","filename":"src\/hotspot\/share\/opto\/library_call.cpp","additions":15,"deletions":10,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -25,0 +25,3 @@\n+#ifndef SHARE_OPTO_LIBRARY_CALL_HPP\n+#define SHARE_OPTO_LIBRARY_CALL_HPP\n+\n@@ -28,1 +31,0 @@\n-#include \"opto\/graphKit.hpp\"\n@@ -31,0 +33,1 @@\n+#include \"opto\/graphKit.hpp\"\n@@ -303,1 +306,1 @@\n-  bool inline_reference_get();\n+  bool inline_reference_get0();\n@@ -419,0 +422,1 @@\n+#endif \/\/ SHARE_OPTO_LIBRARY_CALL_HPP\n","filename":"src\/hotspot\/share\/opto\/library_call.hpp","additions":6,"deletions":2,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -38,0 +38,1 @@\n+\n","filename":"src\/hotspot\/share\/opto\/loopPredicate.cpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -36,1 +36,0 @@\n-#include \"opto\/mulnode.hpp\"\n@@ -38,0 +37,1 @@\n+#include \"opto\/mulnode.hpp\"\n","filename":"src\/hotspot\/share\/opto\/loopTransform.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -301,13 +301,46 @@\n-\/\/ Create a skeleton strip mined outer loop: a Loop head before the\n-\/\/ inner strip mined loop, a safepoint and an exit condition guarded\n-\/\/ by an opaque node after the inner strip mined loop with a backedge\n-\/\/ to the loop head. The inner strip mined loop is left as it is. Only\n-\/\/ once loop optimizations are over, do we adjust the inner loop exit\n-\/\/ condition to limit its number of iterations, set the outer loop\n-\/\/ exit condition and add Phis to the outer loop head. Some loop\n-\/\/ optimizations that operate on the inner strip mined loop need to be\n-\/\/ aware of the outer strip mined loop: loop unswitching needs to\n-\/\/ clone the outer loop as well as the inner, unrolling needs to only\n-\/\/ clone the inner loop etc. No optimizations need to change the outer\n-\/\/ strip mined loop as it is only a skeleton.\n-IdealLoopTree* PhaseIdealLoop::create_outer_strip_mined_loop(BoolNode *test, Node *cmp, Node *init_control,\n+\/\/ Create a skeleton strip mined outer loop: an OuterStripMinedLoop head before the inner strip mined CountedLoop, a\n+\/\/ SafePoint on exit of the inner CountedLoopEnd and an OuterStripMinedLoopEnd test that can't constant fold until loop\n+\/\/ optimizations are over. The inner strip mined loop is left as it is. Only once loop optimizations are over, do we\n+\/\/ adjust the inner loop exit condition to limit its number of iterations, set the outer loop exit condition and add\n+\/\/ Phis to the outer loop head. Some loop optimizations that operate on the inner strip mined loop need to be aware of\n+\/\/ the outer strip mined loop: loop unswitching needs to clone the outer loop as well as the inner, unrolling needs to\n+\/\/ only clone the inner loop etc. No optimizations need to change the outer strip mined loop as it is only a skeleton.\n+\/\/\n+\/\/ Schematically:\n+\/\/\n+\/\/ OuterStripMinedLoop -------|\n+\/\/       |                    |\n+\/\/ CountedLoop ----------- |  |\n+\/\/     \\- Phi (iv) -|      |  |\n+\/\/       \/  \\       |      |  |\n+\/\/     CmpI  AddI --|      |  |\n+\/\/       \\                 |  |\n+\/\/        Bool             |  |\n+\/\/         \\               |  |\n+\/\/ CountedLoopEnd          |  |\n+\/\/       \/  \\              |  |\n+\/\/ IfFalse   IfTrue--------|  |\n+\/\/      |                     |\n+\/\/ SafePoint                  |\n+\/\/      |                     |\n+\/\/ OuterStripMinedLoopEnd     |\n+\/\/       \/   \\                |\n+\/\/ IfFalse   IfTrue-----------|\n+\/\/      |\n+\/\/\n+\/\/\n+\/\/ As loop optimizations transform the inner loop, the outer strip mined loop stays mostly unchanged. The only exception\n+\/\/ is nodes referenced from the SafePoint and sunk from the inner loop: they end up in the outer strip mined loop.\n+\/\/\n+\/\/ Not adding Phis to the outer loop head from the beginning, and only adding them after loop optimizations does not\n+\/\/ conform to C2's IR rules: any variable or memory slice that is mutated in a loop should have a Phi. The main\n+\/\/ motivation for such a design that doesn't conform to C2's IR rules is to allow existing loop optimizations to be\n+\/\/ mostly unaffected by the outer strip mined loop: the only extra step needed in most cases is to step over the\n+\/\/ OuterStripMinedLoop. The main drawback is that once loop optimizations are over, an extra step is needed to finish\n+\/\/ constructing the outer loop. This is handled by OuterStripMinedLoopNode::adjust_strip_mined_loop().\n+\/\/\n+\/\/ Adding Phis to the outer loop is largely straightforward: there needs to be one Phi in the outer loop for every Phi\n+\/\/ in the inner loop. Things may be more complicated for sunk Store nodes: there may not be any inner loop Phi left\n+\/\/ after sinking for a particular memory slice but the outer loop needs a Phi. See\n+\/\/ OuterStripMinedLoopNode::handle_sunk_stores_when_finishing_construction()\n+IdealLoopTree* PhaseIdealLoop::create_outer_strip_mined_loop(Node* init_control,\n@@ -1659,1 +1692,3 @@\n-  if (xphi->Opcode() == Op_Cast(iv_bt)) {\n+  \/\/ Iteratively uncast the loop induction variable\n+  \/\/ until no more CastII\/CastLL nodes are found.\n+  while (xphi->Opcode() == Op_Cast(iv_bt)) {\n@@ -2258,3 +2293,2 @@\n-    outer_ilt = create_outer_strip_mined_loop(test, cmp, init_control, loop,\n-                                              cl_prob, le->_fcnt, entry_control,\n-                                              iffalse);\n+    outer_ilt = create_outer_strip_mined_loop(init_control, loop, cl_prob, le->_fcnt,\n+                                              entry_control, iffalse);\n@@ -2873,4 +2907,5 @@\n-void OuterStripMinedLoopNode::fix_sunk_stores(CountedLoopEndNode* inner_cle, LoopNode* inner_cl, PhaseIterGVN* igvn,\n-                                              PhaseIdealLoop* iloop) {\n-  Node* cle_out = inner_cle->proj_out(false);\n-  Node* cle_tail = inner_cle->proj_out(true);\n+void OuterStripMinedLoopNode::fix_sunk_stores_when_back_to_counted_loop(PhaseIterGVN* igvn,\n+                                                                        PhaseIdealLoop* iloop) const {\n+  CountedLoopNode* inner_cl = inner_counted_loop();\n+  IfFalseNode* cle_out = inner_loop_exit();\n+\n@@ -2991,0 +3026,78 @@\n+\/\/ The outer strip mined loop is initially only partially constructed. In particular Phis are omitted.\n+\/\/ See comment above: PhaseIdealLoop::create_outer_strip_mined_loop()\n+\/\/ We're now in the process of finishing the construction of the outer loop. For each Phi in the inner loop, a Phi in\n+\/\/ the outer loop was just now created. However, Sunk Stores cause an extra challenge:\n+\/\/ 1) If all Stores in the inner loop were sunk for a particular memory slice, there's no Phi left for that memory slice\n+\/\/    in the inner loop anymore, and hence we did not yet add a Phi for the outer loop. So an extra Phi must now be\n+\/\/    added for each chain of sunk Stores for a particular memory slice.\n+\/\/ 2) If some Stores were sunk and some left in the inner loop, a Phi was already created in the outer loop but\n+\/\/    its backedge input wasn't wired correctly to the last Store of the chain: the backedge input was set to the\n+\/\/    backedge of the inner loop Phi instead, but it needs to be the last Store of the chain in the outer loop. We now\n+\/\/    have to fix that too.\n+void OuterStripMinedLoopNode::handle_sunk_stores_when_finishing_construction(PhaseIterGVN* igvn) {\n+  IfFalseNode* cle_exit_proj = inner_loop_exit();\n+\n+  \/\/ Find Sunk stores: Sunk stores are pinned on the loop exit projection of the inner loop. Indeed, because Sunk Stores\n+  \/\/ modify the memory state captured by the SafePoint in the outer strip mined loop, they must be above it. The\n+  \/\/ SafePoint's control input is the loop exit projection. It's also the only control out of the inner loop above the\n+  \/\/ SafePoint.\n+#ifdef ASSERT\n+  int stores_in_outer_loop_cnt = 0;\n+  for (DUIterator_Fast imax, i = cle_exit_proj->fast_outs(imax); i < imax; i++) {\n+    Node* u = cle_exit_proj->fast_out(i);\n+    if (u->is_Store()) {\n+      stores_in_outer_loop_cnt++;\n+    }\n+  }\n+#endif\n+\n+  \/\/ Sunk stores are reachable from the memory state of the outer loop safepoint\n+  SafePointNode* safepoint = outer_safepoint();\n+  MergeMemNode* mm = safepoint->in(TypeFunc::Memory)->isa_MergeMem();\n+  if (mm == nullptr) {\n+    \/\/ There is no MergeMem, which should only happen if there was no memory node\n+    \/\/ sunk out of the loop.\n+    assert(stores_in_outer_loop_cnt == 0, \"inconsistent\");\n+    return;\n+  }\n+  DEBUG_ONLY(int stores_in_outer_loop_cnt2 = 0);\n+  for (MergeMemStream mms(mm); mms.next_non_empty();) {\n+    Node* mem = mms.memory();\n+    \/\/ Traverse up the chain of stores to find the first store pinned\n+    \/\/ at the loop exit projection.\n+    Node* last = mem;\n+    Node* first = nullptr;\n+    while (mem->is_Store() && mem->in(0) == cle_exit_proj) {\n+      DEBUG_ONLY(stores_in_outer_loop_cnt2++);\n+      first = mem;\n+      mem = mem->in(MemNode::Memory);\n+    }\n+    if (first != nullptr) {\n+      \/\/ Found a chain of Stores that were sunk\n+      \/\/ Do we already have a memory Phi for that slice on the outer loop? If that is the case, that Phi was created\n+      \/\/ by cloning an inner loop Phi. The inner loop Phi should have mem, the memory state of the first Store out of\n+      \/\/ the inner loop, as input on the backedge. So does the outer loop Phi given it's a clone.\n+      Node* phi = nullptr;\n+      for (DUIterator_Fast imax, i = mem->fast_outs(imax); i < imax; i++) {\n+        Node* u = mem->fast_out(i);\n+        if (u->is_Phi() && u->in(0) == this && u->in(LoopBackControl) == mem) {\n+          assert(phi == nullptr, \"there should be only one\");\n+          phi = u;\n+          PRODUCT_ONLY(break);\n+        }\n+      }\n+      if (phi == nullptr) {\n+        \/\/ No outer loop Phi? create one\n+        phi = PhiNode::make(this, last);\n+        phi->set_req(EntryControl, mem);\n+        phi = igvn->transform(phi);\n+        igvn->replace_input_of(first, MemNode::Memory, phi);\n+      } else {\n+        \/\/ Fix memory state along the backedge: it should be the last sunk Store of the chain\n+        igvn->replace_input_of(phi, LoopBackControl, last);\n+      }\n+    }\n+  }\n+  assert(stores_in_outer_loop_cnt == stores_in_outer_loop_cnt2, \"inconsistent\");\n+}\n+\n@@ -2992,0 +3105,1 @@\n+  verify_strip_mined(1);\n@@ -2995,1 +3109,1 @@\n-  CountedLoopNode* inner_cl = unique_ctrl_out()->as_CountedLoop();\n+  CountedLoopNode* inner_cl = inner_counted_loop();\n@@ -3013,1 +3127,1 @@\n-  CountedLoopEndNode* inner_cle = inner_cl->loopexit();\n+  CountedLoopEndNode* inner_cle = inner_counted_loop_end();\n@@ -3094,2 +3208,3 @@\n-  \/\/ Make a clone of each phi in the inner loop\n-  \/\/ for the outer loop\n+  \/\/ Make a clone of each phi in the inner loop for the outer loop\n+  \/\/ When Stores were Sunk, after this step, a Phi may still be missing or its backedge incorrectly wired. See\n+  \/\/ handle_sunk_stores_when_finishing_construction()\n@@ -3114,0 +3229,2 @@\n+  handle_sunk_stores_when_finishing_construction(igvn);\n+\n@@ -3169,1 +3286,1 @@\n-  fix_sunk_stores(inner_cle, inner_cl, igvn, iloop);\n+  fix_sunk_stores_when_back_to_counted_loop(igvn, iloop);\n","filename":"src\/hotspot\/share\/opto\/loopnode.cpp","additions":143,"deletions":26,"binary":false,"changes":169,"status":"modified"},{"patch":"@@ -576,1 +576,2 @@\n-  static void fix_sunk_stores(CountedLoopEndNode* inner_cle, LoopNode* inner_cl, PhaseIterGVN* igvn, PhaseIdealLoop* iloop);\n+  void fix_sunk_stores_when_back_to_counted_loop(PhaseIterGVN* igvn, PhaseIdealLoop* iloop) const;\n+  void handle_sunk_stores_when_finishing_construction(PhaseIterGVN* igvn);\n@@ -592,0 +593,4 @@\n+  CountedLoopNode* inner_counted_loop() const { return unique_ctrl_out()->as_CountedLoop(); }\n+  CountedLoopEndNode* inner_counted_loop_end() const { return  inner_counted_loop()->loopexit(); }\n+  IfFalseNode* inner_loop_exit() const { return inner_counted_loop_end()->proj_out(false)->as_IfFalse(); }\n+\n@@ -1296,1 +1301,1 @@\n-  IdealLoopTree* create_outer_strip_mined_loop(BoolNode *test, Node *cmp, Node *init_control,\n+  IdealLoopTree* create_outer_strip_mined_loop(Node* init_control,\n","filename":"src\/hotspot\/share\/opto\/loopnode.hpp","additions":7,"deletions":2,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -33,1 +33,0 @@\n-#include \"opto\/castnode.hpp\"\n@@ -37,1 +36,0 @@\n-#include \"opto\/mulnode.hpp\"\n@@ -39,0 +37,1 @@\n+#include \"opto\/mulnode.hpp\"\n","filename":"src\/hotspot\/share\/opto\/loopopts.cpp","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -27,1 +27,0 @@\n-#include \"opto\/arraycopynode.hpp\"\n@@ -29,0 +28,2 @@\n+#include \"opto\/arraycopynode.hpp\"\n+#include \"opto\/castnode.hpp\"\n@@ -30,1 +31,0 @@\n-#include \"opto\/vectornode.hpp\"\n@@ -34,1 +34,1 @@\n-#include \"opto\/castnode.hpp\"\n+#include \"opto\/vectornode.hpp\"\n","filename":"src\/hotspot\/share\/opto\/macroArrayCopy.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -37,1 +37,0 @@\n-#include \"opto\/regalloc.hpp\"\n@@ -49,0 +48,1 @@\n+#include \"opto\/regalloc.hpp\"\n","filename":"src\/hotspot\/share\/opto\/memnode.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -25,1 +25,1 @@\n-#include \"opto\/mempointer.hpp\"\n+#include \"classfile\/vmSymbols.hpp\"\n@@ -27,0 +27,1 @@\n+#include \"opto\/mempointer.hpp\"\n@@ -28,1 +29,0 @@\n-#include \"classfile\/vmSymbols.hpp\"\n","filename":"src\/hotspot\/share\/opto\/mempointer.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -39,1 +39,0 @@\n-#include \"opto\/c2compiler.hpp\"\n@@ -41,0 +40,1 @@\n+#include \"opto\/c2compiler.hpp\"\n","filename":"src\/hotspot\/share\/opto\/output.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -25,2 +25,0 @@\n-#include \"opto\/printinlining.hpp\"\n-#include \"opto\/callnode.hpp\"\n@@ -29,0 +27,2 @@\n+#include \"opto\/callnode.hpp\"\n+#include \"opto\/printinlining.hpp\"\n","filename":"src\/hotspot\/share\/opto\/printinlining.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -29,2 +29,0 @@\n-#include \"utilities\/ostream.hpp\"\n-#include \"utilities\/growableArray.hpp\"\n@@ -32,0 +30,2 @@\n+#include \"utilities\/growableArray.hpp\"\n+#include \"utilities\/ostream.hpp\"\n","filename":"src\/hotspot\/share\/opto\/printinlining.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -29,0 +29,1 @@\n+\n","filename":"src\/hotspot\/share\/opto\/rangeinference.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -47,1 +47,0 @@\n-#include \"oops\/objArrayKlass.hpp\"\n@@ -49,0 +48,1 @@\n+#include \"oops\/objArrayKlass.hpp\"\n@@ -75,1 +75,0 @@\n-#include \"runtime\/vframeArray.hpp\"\n@@ -77,0 +76,1 @@\n+#include \"runtime\/vframeArray.hpp\"\n","filename":"src\/hotspot\/share\/opto\/runtime.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1476,3 +1476,8 @@\n-  \/\/ Check if destination address is aligned to HeapWordSize\n-  const TypeInt* tdst = __ gvn().type(start)->is_int();\n-  bool aligned = tdst->is_con() && ((tdst->get_con() * type2aelembytes(T_BYTE)) % HeapWordSize == 0);\n+  \/\/ Check if src array address is aligned to HeapWordSize\n+  bool aligned = (arrayOopDesc::base_offset_in_bytes(T_BYTE) % HeapWordSize == 0);\n+  \/\/ If true, then check if dst array address is aligned to HeapWordSize\n+  if (aligned) {\n+    const TypeInt* tdst = __ gvn().type(start)->is_int();\n+    aligned = tdst->is_con() && ((arrayOopDesc::base_offset_in_bytes(T_BYTE) +\n+                                  tdst->get_con() * type2aelembytes(T_BYTE)) % HeapWordSize == 0);\n+  }\n","filename":"src\/hotspot\/share\/opto\/stringopts.cpp","additions":8,"deletions":3,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -563,2 +563,4 @@\n-  \/\/ no folding if one of operands is infinity or NaN, do not do constant folding\n-  if(g_isfinite(t1->getf()) && g_isfinite(t2->getf())) {\n+  \/\/ Half precision floating point subtraction follows the rules of IEEE 754\n+  \/\/ applicable to other floating point types.\n+  if (t1->isa_half_float_constant() != nullptr &&\n+      t2->isa_half_float_constant() != nullptr)  {\n@@ -566,8 +568,1 @@\n-  }\n-  else if(g_isnan(t1->getf())) {\n-    return t1;\n-  }\n-  else if(g_isnan(t2->getf())) {\n-    return t2;\n-  }\n-  else {\n+  } else {\n","filename":"src\/hotspot\/share\/opto\/subnode.cpp","additions":5,"deletions":10,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -28,0 +28,1 @@\n+#include \"opto\/movenode.hpp\"\n@@ -31,1 +32,0 @@\n-#include \"opto\/movenode.hpp\"\n","filename":"src\/hotspot\/share\/opto\/superword.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -24,1 +24,0 @@\n-#include \"opto\/vtransform.hpp\"\n@@ -26,0 +25,1 @@\n+#include \"opto\/vtransform.hpp\"\n","filename":"src\/hotspot\/share\/opto\/superwordVTransformBuilder.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -38,1 +38,0 @@\n-#include \"opto\/callnode.hpp\"\n@@ -40,0 +39,1 @@\n+#include \"opto\/callnode.hpp\"\n@@ -46,0 +46,1 @@\n+#include \"runtime\/stubRoutines.hpp\"\n@@ -49,1 +50,0 @@\n-#include \"runtime\/stubRoutines.hpp\"\n","filename":"src\/hotspot\/share\/opto\/type.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -305,3 +305,3 @@\n-  const TypeH      *isa_half_float() const;          \/\/ Returns null if not a Float{Top,Con,Bot}\n-  const TypeH      *is_half_float_constant() const;  \/\/ Asserts it is a FloatCon\n-  const TypeH      *isa_half_float_constant() const; \/\/ Returns null if not a FloatCon\n+  const TypeH      *isa_half_float() const;          \/\/ Returns null if not a HalfFloat{Top,Con,Bot}\n+  const TypeH      *is_half_float_constant() const;  \/\/ Asserts it is a HalfFloatCon\n+  const TypeH      *isa_half_float_constant() const; \/\/ Returns null if not a HalfFloatCon\n","filename":"src\/hotspot\/share\/opto\/type.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -28,1 +28,0 @@\n-#include \"opto\/matcher.hpp\"\n@@ -30,1 +29,1 @@\n-#include \"opto\/traceAutoVectorizationTag.hpp\"\n+#include \"opto\/matcher.hpp\"\n@@ -32,0 +31,1 @@\n+#include \"opto\/traceAutoVectorizationTag.hpp\"\n","filename":"src\/hotspot\/share\/opto\/vectorization.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+#include \"opto\/convertnode.hpp\"\n@@ -29,2 +30,0 @@\n-#include \"opto\/convertnode.hpp\"\n-#include \"utilities\/powerOfTwo.hpp\"\n@@ -32,0 +31,1 @@\n+#include \"utilities\/powerOfTwo.hpp\"\n","filename":"src\/hotspot\/share\/opto\/vectornode.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -24,2 +24,0 @@\n-#include \"opto\/vtransform.hpp\"\n-#include \"opto\/vectornode.hpp\"\n@@ -28,0 +26,2 @@\n+#include \"opto\/vectornode.hpp\"\n+#include \"opto\/vtransform.hpp\"\n","filename":"src\/hotspot\/share\/opto\/vtransform.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -442,1 +442,1 @@\n-  else if (!Method::is_method_id(method_id)) {\n+  else if (!Method::validate_jmethod_id(method_id)) {\n","filename":"src\/hotspot\/share\/prims\/jniCheck.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -3043,0 +3043,8 @@\n+JVM_ENTRY(jobject, JVM_ReferenceGet(JNIEnv* env, jobject ref))\n+  oop ref_oop = JNIHandles::resolve_non_null(ref);\n+  \/\/ PhantomReference has its own implementation of get().\n+  assert(!java_lang_ref_Reference::is_phantom(ref_oop), \"precondition\");\n+  oop referent = java_lang_ref_Reference::weak_referent(ref_oop);\n+  return JNIHandles::make_local(THREAD, referent);\n+JVM_END\n+\n@@ -3045,1 +3053,1 @@\n-  \/\/ PhantomReference has it's own implementation of refersTo().\n+  \/\/ PhantomReference has its own implementation of refersTo().\n","filename":"src\/hotspot\/share\/prims\/jvm.cpp","additions":9,"deletions":1,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -399,1 +399,1 @@\n-    u2 num_bootstrap_arguments = cpool()->operand_argument_count_at(n);\n+    u2 num_bootstrap_arguments = cpool()->bsm_attribute_entry(n)->argument_count();\n@@ -409,3 +409,3 @@\n-    u2 bootstrap_method_ref = cpool()->operand_bootstrap_method_ref_index_at(n);\n-    u2 num_bootstrap_arguments = cpool()->operand_argument_count_at(n);\n-    write_u2(bootstrap_method_ref);\n+    BSMAttributeEntry* bsme = cpool()->bsm_attribute_entry(n);\n+    u2 num_bootstrap_arguments = bsme->argument_count();\n+    write_u2(bsme->bootstrap_method_index());\n@@ -414,1 +414,1 @@\n-      u2 bootstrap_argument = cpool()->operand_argument_index_at(n, arg);\n+      u2 bootstrap_argument = bsme->argument_index(arg);\n","filename":"src\/hotspot\/share\/prims\/jvmtiClassFileReconstituter.cpp","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2771,1 +2771,0 @@\n-  bool jmethodids_found = true;\n@@ -2774,0 +2773,3 @@\n+  \/\/ Make jmethodIDs for all non-overpass methods.\n+  ik->make_methods_jmethod_ids();\n+\n@@ -2786,14 +2788,2 @@\n-    jmethodID id;\n-    if (jmethodids_found) {\n-      id = m->find_jmethod_id_or_null();\n-      if (id == nullptr) {\n-        \/\/ If we find an uninitialized value, make sure there is\n-        \/\/ enough space for all the uninitialized values we might\n-        \/\/ find.\n-        ik->ensure_space_for_methodids(index);\n-        jmethodids_found = false;\n-        id = m->jmethod_id();\n-      }\n-    } else {\n-      id = m->jmethod_id();\n-    }\n+    jmethodID id = m->find_jmethod_id_or_null();\n+    assert(id != nullptr, \"should be created above\");\n","filename":"src\/hotspot\/share\/prims\/jvmtiEnv.cpp","additions":5,"deletions":15,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -32,0 +32,1 @@\n+#include \"classfile\/stackMapTable.hpp\"\n@@ -662,1 +663,1 @@\n-void VM_RedefineClasses::append_operand(const constantPoolHandle& scratch_cp, int old_bs_i,\n+void VM_RedefineClasses::append_operand(const constantPoolHandle& scratch_cp, const int old_bs_i,\n@@ -665,1 +666,2 @@\n-  u2 old_ref_i = scratch_cp->operand_bootstrap_method_ref_index_at(old_bs_i);\n+  BSMAttributeEntry* old_bsme = scratch_cp->bsm_attribute_entry(old_bs_i);\n+  u2 old_ref_i = old_bsme->bootstrap_method_index();\n@@ -679,1 +681,1 @@\n-  u2 argc      = scratch_cp->operand_argument_count_at(old_bs_i);\n+  u2 argc      = old_bsme->argument_count();\n@@ -686,1 +688,1 @@\n-    u2 old_arg_ref_i = scratch_cp->operand_argument_index_at(old_bs_i, i);\n+    u2 old_arg_ref_i = old_bsme->argument_index(i);\n@@ -3269,1 +3271,1 @@\n-    if (frame_type <= 63) {\n+    if (frame_type <= StackMapReader::SAME_FRAME_END) {\n@@ -3277,1 +3279,2 @@\n-    else if (frame_type >= 64 && frame_type <= 127) {\n+    else if (frame_type >= StackMapReader::SAME_LOCALS_1_STACK_ITEM_FRAME_START &&\n+             frame_type <= StackMapReader::SAME_LOCALS_1_STACK_ITEM_FRAME_END) {\n@@ -3283,1 +3286,2 @@\n-    else if (frame_type >= 128 && frame_type <= 246) {\n+    else if (frame_type >= StackMapReader::RESERVED_START &&\n+             frame_type <= StackMapReader::RESERVED_END) {\n@@ -3292,1 +3296,1 @@\n-    else if (frame_type == 247) {\n+    else if (frame_type == StackMapReader::SAME_LOCALS_1_STACK_ITEM_EXTENDED) {\n@@ -3302,1 +3306,2 @@\n-    else if (frame_type >= 248 && frame_type <= 250) {\n+    else if (frame_type >= StackMapReader::CHOP_FRAME_START &&\n+             frame_type <= StackMapReader::CHOP_FRAME_END) {\n@@ -3307,1 +3312,1 @@\n-    \/\/   u1 frame_type = SAME_FRAME_EXTENDED; \/* 251*\/\n+    \/\/   u1 frame_type = SAME_EXTENDED; \/* 251 *\/\n@@ -3310,1 +3315,1 @@\n-    else if (frame_type == 251) {\n+    else if (frame_type == StackMapReader::SAME_FRAME_EXTENDED) {\n@@ -3317,1 +3322,1 @@\n-    \/\/   verification_type_info locals[frame_type - 251];\n+    \/\/   verification_type_info locals[frame_type - SAME_EXTENDED];\n@@ -3319,1 +3324,2 @@\n-    else if (frame_type >= 252 && frame_type <= 254) {\n+    else if (frame_type >= StackMapReader::APPEND_FRAME_START &&\n+             frame_type <= StackMapReader::APPEND_FRAME_END) {\n@@ -3323,1 +3329,1 @@\n-      u1 len = frame_type - 251;\n+      u1 len = frame_type - StackMapReader::APPEND_FRAME_START + 1;\n@@ -3338,1 +3344,1 @@\n-    else if (frame_type == 255) {\n+    else if (frame_type == StackMapReader::FULL_FRAME) {\n@@ -3786,0 +3792,7 @@\n+    \/\/ The method_idnum should be within the range of 1..number-of-methods\n+    \/\/ until incremented later for obsolete methods.\n+    \/\/ The increment is so if a jmethodID is created for an old obsolete method\n+    \/\/ it gets a new jmethodID cache slot in the InstanceKlass.\n+    \/\/ They're cleaned out later when all methods of the previous version are purged.\n+    assert(old_method->method_idnum() <= _old_methods->length(),\n+           \"shouldn't be incremented yet for obsolete methods\");\n","filename":"src\/hotspot\/share\/prims\/jvmtiRedefineClasses.cpp","additions":28,"deletions":15,"binary":false,"changes":43,"status":"modified"},{"patch":"@@ -88,0 +88,1 @@\n+#include \"runtime\/lightweightSynchronizer.hpp\"\n@@ -775,1 +776,1 @@\n-                nm->make_not_entrant(nmethod::ChangeReason::whitebox_deoptimization);\n+                nm->make_not_entrant(nmethod::InvalidationReason::WHITEBOX_DEOPTIMIZATION);\n","filename":"src\/hotspot\/share\/prims\/whitebox.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -535,0 +535,2 @@\n+  { \"ParallelRefProcEnabled\",       JDK_Version::jdk(26),  JDK_Version::jdk(27), JDK_Version::jdk(28) },\n+  { \"ParallelRefProcBalancingEnabled\", JDK_Version::jdk(26),  JDK_Version::jdk(27), JDK_Version::jdk(28) },\n@@ -1837,9 +1839,0 @@\n-#ifndef _LP64\n-  if (LockingMode == LM_LEGACY) {\n-    FLAG_SET_CMDLINE(LockingMode, LM_LIGHTWEIGHT);\n-    \/\/ Self-forwarding in bit 3 of the mark-word conflicts\n-    \/\/ with 4-byte-aligned stack-locks.\n-    warning(\"Legacy locking not supported on this platform\");\n-  }\n-#endif\n-\n@@ -2451,1 +2444,1 @@\n-      if (FLAG_SET_CMDLINE(ReservedCodeCacheSize, (uintx)long_ReservedCodeCacheSize) != JVMFlag::SUCCESS) {\n+      if (FLAG_SET_CMDLINE(ReservedCodeCacheSize, (size_t)long_ReservedCodeCacheSize) != JVMFlag::SUCCESS) {\n@@ -3771,3 +3764,0 @@\n-  if (UseCompactObjectHeaders && LockingMode != LM_LIGHTWEIGHT) {\n-    FLAG_SET_DEFAULT(LockingMode, LM_LIGHTWEIGHT);\n-  }\n","filename":"src\/hotspot\/share\/runtime\/arguments.cpp","additions":3,"deletions":13,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -1829,1 +1829,1 @@\n-  nm->make_not_entrant(nmethod::ChangeReason::missing_exception_handler);\n+  nm->make_not_entrant(nmethod::InvalidationReason::MISSING_EXCEPTION_HANDLER);\n@@ -2458,1 +2458,1 @@\n-      if (!nm->make_not_entrant(nmethod::ChangeReason::uncommon_trap)) {\n+      if (!nm->make_not_entrant(nmethod::InvalidationReason::UNCOMMON_TRAP)) {\n","filename":"src\/hotspot\/share\/runtime\/deoptimization.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -158,2 +158,9 @@\n-JVMFlag::Error CodeCacheSegmentSizeConstraintFunc(uintx value, bool verbose) {\n-  if (CodeCacheSegmentSize < (uintx)CodeEntryAlignment) {\n+JVMFlag::Error CodeCacheSegmentSizeConstraintFunc(size_t value, bool verbose) {\n+  if (!is_power_of_2(value)) {\n+    JVMFlag::printError(verbose,\n+                        \"CodeCacheSegmentSize (%zu) must be \"\n+                        \"a power of two\\n\", CodeCacheSegmentSize);\n+    return JVMFlag::VIOLATES_CONSTRAINT;\n+  }\n+\n+  if (CodeCacheSegmentSize < (size_t)CodeEntryAlignment) {\n@@ -177,1 +184,1 @@\n-  if (CodeCacheSegmentSize < (uintx)OptoLoopAlignment) {\n+  if (CodeCacheSegmentSize < (size_t)OptoLoopAlignment) {\n@@ -206,1 +213,1 @@\n-  if ((uintx)CodeEntryAlignment > CodeCacheSegmentSize) {\n+  if ((size_t)CodeEntryAlignment > CodeCacheSegmentSize) {\n","filename":"src\/hotspot\/share\/runtime\/flags\/jvmFlagConstraintsCompiler.cpp","additions":11,"deletions":4,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -43,1 +43,1 @@\n-  f(uintx, CodeCacheSegmentSizeConstraintFunc)          \\\n+  f(size_t, CodeCacheSegmentSizeConstraintFunc)         \\\n","filename":"src\/hotspot\/share\/runtime\/flags\/jvmFlagConstraintsCompiler.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -102,2 +102,2 @@\n-JVMFlag::Error VMPageSizeConstraintFunc(uintx value, bool verbose) {\n-  uintx min = (uintx)os::vm_page_size();\n+JVMFlag::Error VMPageSizeConstraintFunc(size_t value, bool verbose) {\n+  size_t min = os::vm_page_size();\n","filename":"src\/hotspot\/share\/runtime\/flags\/jvmFlagConstraintsRuntime.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -42,1 +42,1 @@\n-  f(uintx,  VMPageSizeConstraintFunc)                 \\\n+  f(size_t, VMPageSizeConstraintFunc)                 \\\n","filename":"src\/hotspot\/share\/runtime\/flags\/jvmFlagConstraintsRuntime.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -296,0 +296,3 @@\n+  develop(bool, VerifyInlineCaches, true,                                   \\\n+          \"Verify Inline Caches\")                                           \\\n+                                                                            \\\n@@ -1097,0 +1100,3 @@\n+  \/* This value is later shifted left by up to LogBytesPerLong bits       *\/\\\n+  \/* (to convert from element count to size in bytes), so we must ensure  *\/\\\n+  \/* it does not overflow during the shift.                               *\/\\\n@@ -1100,0 +1106,1 @@\n+          range(0, (1 << (BitsPerInt - LogBytesPerLong - 1)) - 1)           \\\n@@ -1504,1 +1511,1 @@\n-  product_pd(uintx, CodeCacheSegmentSize, EXPERIMENTAL,                     \\\n+  product_pd(size_t, CodeCacheSegmentSize, EXPERIMENTAL,                    \\\n@@ -1519,1 +1526,1 @@\n-  product_pd(uintx, InitialCodeCacheSize,                                   \\\n+  product_pd(size_t, InitialCodeCacheSize,                                  \\\n@@ -1523,1 +1530,1 @@\n-  develop_pd(uintx, CodeCacheMinimumUseSpace,                               \\\n+  develop_pd(size_t, CodeCacheMinimumUseSpace,                              \\\n@@ -1525,1 +1532,1 @@\n-          range(0, max_uintx)                                               \\\n+          range(0, SIZE_MAX)                                                \\\n@@ -1530,1 +1537,1 @@\n-  product_pd(uintx, ReservedCodeCacheSize,                                  \\\n+  product_pd(size_t, ReservedCodeCacheSize,                                 \\\n@@ -1534,1 +1541,1 @@\n-  product_pd(uintx, NonProfiledCodeHeapSize,                                \\\n+  product_pd(size_t, NonProfiledCodeHeapSize,                               \\\n@@ -1536,1 +1543,1 @@\n-          range(0, max_uintx)                                               \\\n+          range(0, SIZE_MAX)                                                \\\n@@ -1538,1 +1545,1 @@\n-  product_pd(uintx, ProfiledCodeHeapSize,                                   \\\n+  product_pd(size_t, ProfiledCodeHeapSize,                                  \\\n@@ -1540,1 +1547,1 @@\n-          range(0, max_uintx)                                               \\\n+          range(0, SIZE_MAX)                                                \\\n@@ -1542,1 +1549,1 @@\n-  product_pd(uintx, NonNMethodCodeHeapSize,                                 \\\n+  product_pd(size_t, NonNMethodCodeHeapSize,                                \\\n@@ -1546,1 +1553,1 @@\n-  product_pd(uintx, CodeCacheExpansionSize,                                 \\\n+  product_pd(size_t, CodeCacheExpansionSize,                                \\\n@@ -1548,1 +1555,1 @@\n-          range(32*K, max_uintx)                                            \\\n+          range(32*K, SIZE_MAX)                                             \\\n@@ -1550,1 +1557,1 @@\n-  product_pd(uintx, CodeCacheMinBlockLength, DIAGNOSTIC,                    \\\n+  product_pd(size_t, CodeCacheMinBlockLength, DIAGNOSTIC,                   \\\n@@ -1956,7 +1963,0 @@\n-  product(int, LockingMode, LM_LIGHTWEIGHT,                                 \\\n-          \"(Deprecated) Select locking mode: \"                              \\\n-          \"0: (Deprecated) monitors only (LM_MONITOR), \"                    \\\n-          \"1: (Deprecated) monitors & legacy stack-locking (LM_LEGACY), \"   \\\n-          \"2: monitors & new lightweight locking (LM_LIGHTWEIGHT, default)\") \\\n-          range(0, 2)                                                       \\\n-                                                                            \\\n","filename":"src\/hotspot\/share\/runtime\/globals.hpp","additions":20,"deletions":20,"binary":false,"changes":40,"status":"modified"},{"patch":"@@ -1341,1 +1341,1 @@\n-      nm->make_not_entrant(nmethod::ChangeReason::zombie);\n+      nm->make_not_entrant(nmethod::InvalidationReason::ZOMBIE);\n","filename":"src\/hotspot\/share\/runtime\/javaThread.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -39,0 +39,1 @@\n+Mutex*   NMethodEntryBarrier_lock     = nullptr;\n@@ -208,0 +209,2 @@\n+  MUTEX_DEFN(NMethodEntryBarrier_lock        , PaddedMutex  , service-1);\n+\n@@ -236,1 +239,1 @@\n-  MUTEX_DEFN(JmethodIdCreation_lock          , PaddedMutex  , nosafepoint-2); \/\/ used for creating jmethodIDs.\n+  MUTEX_DEFN(JmethodIdCreation_lock          , PaddedMutex  , nosafepoint-1);    \/\/ used for creating jmethodIDs can also lock HandshakeState_lock\n","filename":"src\/hotspot\/share\/runtime\/mutexLocker.cpp","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -37,0 +37,1 @@\n+extern Mutex*   NMethodEntryBarrier_lock;        \/\/ protects nmethod entry barrier\n","filename":"src\/hotspot\/share\/runtime\/mutexLocker.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -296,7 +296,0 @@\n-  \/\/ The \"virtual time\" of a thread is the amount of time a thread has\n-  \/\/ actually run.  The first function indicates whether the OS supports\n-  \/\/ this functionality for the current thread, and if so the second\n-  \/\/ returns the elapsed virtual time for the current thread.\n-  static bool supports_vtime();\n-  static double elapsedVTime();\n-\n","filename":"src\/hotspot\/share\/runtime\/os.hpp","additions":1,"deletions":8,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -1171,3 +1171,4 @@\n-  if (SafepointSynchronize::is_at_safepoint() || Thread::current() == thread) {\n-    \/\/ It is only safe to walk the list if we're at a safepoint or the\n-    \/\/ calling thread is walking its own list.\n+  if ((SafepointSynchronize::is_at_safepoint() && thread->is_Java_thread()) ||\n+      Thread::current() == thread) {\n+    \/\/ It is only safe to walk the list if we're at a safepoint and processing a JavaThread,\n+    \/\/ or the calling thread is walking its own list.\n","filename":"src\/hotspot\/share\/runtime\/threadSMR.cpp","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -163,0 +163,4 @@\n+  \/\/ VMOp_Type may belong to a category of the operation.\n+  \/\/ Override is_XX_operation() appropriately in subclasses.\n+  virtual bool is_gc_operation() const { return false; }\n+\n","filename":"src\/hotspot\/share\/runtime\/vmOperation.hpp","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -47,0 +47,1 @@\n+#include \"jfr\/recorder\/service\/jfrRecorderThread.hpp\"\n@@ -1030,0 +1031,1 @@\n+        declare_type(JfrRecorderThread, JavaThread)                       \\\n@@ -1486,3 +1488,3 @@\n-  \/***********************************************\/                       \\\n-  \/* ConstantPool* layout enum for InvokeDynamic *\/                       \\\n-  \/***********************************************\/                       \\\n+  \/******************************************************\/                \\\n+  \/* BSMAttributeEntry* - layout enum for InvokeDynamic *\/                \\\n+  \/******************************************************\/                \\\n@@ -1490,3 +1492,3 @@\n-  declare_constant(ConstantPool::_indy_bsm_offset)                        \\\n-  declare_constant(ConstantPool::_indy_argc_offset)                       \\\n-  declare_constant(ConstantPool::_indy_argv_offset)                       \\\n+  declare_constant(BSMAttributeEntry::_bsmi_offset)                       \\\n+  declare_constant(BSMAttributeEntry::_argc_offset)                       \\\n+  declare_constant(BSMAttributeEntry::_argv_offset)                       \\\n","filename":"src\/hotspot\/share\/runtime\/vmStructs.cpp","additions":8,"deletions":6,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -1,89 +0,0 @@\n-\/*\n-* Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n-* DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n-*\n-* This code is free software; you can redistribute it and\/or modify it\n-* under the terms of the GNU General Public License version 2 only, as\n-* published by the Free Software Foundation.\n-*\n-* This code is distributed in the hope that it will be useful, but WITHOUT\n-* ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n-* FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n-* version 2 for more details (a copy is included in the LICENSE file that\n-* accompanied this code).\n-*\n-* You should have received a copy of the GNU General Public License version\n-* 2 along with this work; if not, write to the Free Software Foundation,\n-* Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n-*\n-* Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n-* or visit www.oracle.com if you need additional information or have any\n-* questions.\n-*\n-*\/\n-\n-#ifndef SHARE_UTILITIES_STABLEVALUE_HPP\n-#define SHARE_UTILITIES_STABLEVALUE_HPP\n-\n-#include \"globalDefinitions.hpp\"\n-#include <type_traits>\n-\n-\/\/ The purpose of this class is to defer initialization of a T to a later point in time,\n-\/\/ and then to never deallocate it. This is mainly useful for deferring the initialization of\n-\/\/ static fields in classes, in order to avoid \"Static Initialization Order Fiasco\".\n-template<typename T>\n-class Deferred {\n-  union {\n-    T _t;\n-  };\n-\n-  DEBUG_ONLY(bool _initialized);\n-\n-public:\n-  NONCOPYABLE(Deferred);\n-\n-  Deferred()\n-  DEBUG_ONLY(: _initialized(false)) {\n-    \/\/ Do not construct value, on purpose.\n-  }\n-\n-  ~Deferred() {\n-    \/\/ Do not destruct value, on purpose.\n-  }\n-\n-  T* get() {\n-    assert(_initialized, \"must be initialized before access\");\n-    return &_t;\n-  }\n-\n-  const T* get() const {\n-    assert(_initialized, \"must be initialized before access\");\n-    return &_t;\n-  }\n-\n-  T& operator*() {\n-    return *get();\n-  }\n-\n-  const T& operator*() const {\n-    return *get();\n-  }\n-\n-  T* operator->() {\n-    return get();\n-  }\n-\n-  const T* operator->() const {\n-    return get();\n-  }\n-\n-  template<typename... Ts>\n-  void initialize(Ts&... args) {\n-    assert(!_initialized, \"Double initialization forbidden\");\n-    DEBUG_ONLY(_initialized = true);\n-    using NCVP = std::add_pointer_t<std::remove_cv_t<T>>;\n-    ::new (const_cast<NCVP>(get())) T(args...);\n-  }\n-};\n-\n-#endif \/\/ SHARE_UTILITIES_STABLEVALUE_HPP\n","filename":"src\/hotspot\/share\/utilities\/deferred.hpp","additions":0,"deletions":89,"binary":false,"changes":89,"status":"deleted"},{"patch":"@@ -0,0 +1,88 @@\n+\/*\n+* Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+* DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+*\n+* This code is free software; you can redistribute it and\/or modify it\n+* under the terms of the GNU General Public License version 2 only, as\n+* published by the Free Software Foundation.\n+*\n+* This code is distributed in the hope that it will be useful, but WITHOUT\n+* ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+* FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+* version 2 for more details (a copy is included in the LICENSE file that\n+* accompanied this code).\n+*\n+* You should have received a copy of the GNU General Public License version\n+* 2 along with this work; if not, write to the Free Software Foundation,\n+* Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+*\n+* Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+* or visit www.oracle.com if you need additional information or have any\n+* questions.\n+*\n+*\/\n+\n+#ifndef SHARE_UTILITIES_DEFERREDSTATIC_HPP\n+#define SHARE_UTILITIES_DEFERREDSTATIC_HPP\n+\n+#include \"utilities\/globalDefinitions.hpp\"\n+\n+#include <new>\n+#include <type_traits>\n+\n+\/\/ The purpose of this class is to provide control over the initialization\n+\/\/ time for an object of type T with static storage duration. An instance of\n+\/\/ this class provides storage for an object, sized and aligned for T. The\n+\/\/ object must be explicitly initialized before use. This avoids problems\n+\/\/ resulting from the unspecified initialization time and ordering between\n+\/\/ different objects that comes from using undeferred objects (the so-called\n+\/\/ \"Static Initialization Order Fiasco).\n+\/\/\n+\/\/ Once initialized, the object is never destroyed. This avoids similar issues\n+\/\/ with the timing and ordering of destruction on normal program exit.\n+\/\/\n+\/\/ T must not be a reference type. T may be cv-qualified; accessors will\n+\/\/ return a correspondingly cv-qualified reference to the object.\n+template<typename T>\n+class DeferredStatic {\n+  union {\n+    T _t;\n+  };\n+\n+  DEBUG_ONLY(bool _initialized);\n+\n+public:\n+  NONCOPYABLE(DeferredStatic);\n+\n+  DeferredStatic()\n+  DEBUG_ONLY(: _initialized(false)) {\n+    \/\/ Do not construct value, on purpose.\n+  }\n+\n+  ~DeferredStatic() {\n+    \/\/ Do not destruct value, on purpose.\n+  }\n+\n+  T* get() {\n+    assert(_initialized, \"must be initialized before access\");\n+    return &_t;\n+  }\n+\n+  T& operator*() {\n+    return *get();\n+  }\n+\n+  T* operator->() {\n+    return get();\n+  }\n+\n+  template<typename... Ts>\n+  void initialize(Ts&... args) {\n+    assert(!_initialized, \"Double initialization forbidden\");\n+    DEBUG_ONLY(_initialized = true);\n+    using NCVP = std::add_pointer_t<std::remove_cv_t<T>>;\n+    ::new (const_cast<NCVP>(get())) T(args...);\n+  }\n+};\n+\n+#endif \/\/ SHARE_UTILITIES_DEFERREDSTATIC_HPP\n","filename":"src\/hotspot\/share\/utilities\/deferredStatic.hpp","additions":88,"deletions":0,"binary":false,"changes":88,"status":"added"},{"patch":"@@ -117,9 +117,11 @@\n-    ResourceMark rm(thread);\n-    const char* exc_value = h_name != nullptr ? h_name->as_C_string() : \"null\";\n-    log_info(exceptions)(\"Thread cannot call Java so instead of throwing exception <%.*s%s%.*s> (\" PTR_FORMAT \") \\n\"\n-                        \"at [%s, line %d]\\nfor thread \" PTR_FORMAT \",\\n\"\n-                        \"throwing pre-allocated exception: %s\",\n-                        MAX_LEN, exc_value, message ? \": \" : \"\",\n-                        MAX_LEN, message ? message : \"\",\n-                        p2i(h_exception()), file, line, p2i(thread),\n-                        Universe::vm_exception()->print_value_string());\n+    if (log_is_enabled(Info, exceptions)) {\n+      ResourceMark rm(thread);\n+      const char* exc_value = h_name != nullptr ? h_name->as_C_string() : \"null\";\n+      log_info(exceptions)(\"Thread cannot call Java so instead of throwing exception <%.*s%s%.*s> (\" PTR_FORMAT \") \\n\"\n+                           \"at [%s, line %d]\\nfor thread \" PTR_FORMAT \",\\n\"\n+                           \"throwing pre-allocated exception: %s\",\n+                           MAX_LEN, exc_value, message ? \": \" : \"\",\n+                           MAX_LEN, message ? message : \"\",\n+                           p2i(h_exception()), file, line, p2i(thread),\n+                           Universe::vm_exception()->print_value_string());\n+    }\n@@ -155,0 +157,3 @@\n+  if (log_is_enabled(Info, exceptions, stacktrace)) {\n+    log_exception_stacktrace(h_exception);\n+  }\n@@ -612,0 +617,39 @@\n+\n+\/\/ This is called from InterpreterRuntime::exception_handler_for_exception(), which is the only\n+\/\/ easy way to be notified in the VM that an _athrow bytecode has been executed. (The alternative\n+\/\/ would be to add hooks into the interpreter and compiler, for all platforms ...).\n+\/\/\n+\/\/ Unfortunately, InterpreterRuntime::exception_handler_for_exception() is called for every level\n+\/\/ of the Java stack when looking for an exception handler. To avoid excessive output,\n+\/\/ we print the stack only when the bci points to an _athrow bytecode.\n+\/\/\n+\/\/ NOTE: exceptions that are NOT thrown by _athrow are handled by Exceptions::special_exception()\n+\/\/ and Exceptions::_throw()).\n+void Exceptions::log_exception_stacktrace(Handle exception, methodHandle method, int bci) {\n+  if (!method->is_native() && (Bytecodes::Code) *method->bcp_from(bci) == Bytecodes::_athrow) {\n+    \/\/ TODO: try to find a way to avoid repeated stacktraces when an exception gets re-thrown\n+    \/\/ by a finally block\n+    log_exception_stacktrace(exception);\n+  }\n+}\n+\n+\/\/ This should be called only from a live Java thread.\n+void Exceptions::log_exception_stacktrace(Handle exception) {\n+  LogStreamHandle(Info, exceptions, stacktrace) st;\n+  ResourceMark rm;\n+  const char* detail_message = java_lang_Throwable::message_as_utf8(exception());\n+  if (detail_message != nullptr) {\n+    st.print_cr(\"Exception <%.*s: %.*s>\",\n+                MAX_LEN, exception->print_value_string(),\n+                MAX_LEN, detail_message);\n+  } else {\n+    st.print_cr(\"Exception <%.*s>\",\n+                MAX_LEN, exception->print_value_string());\n+  }\n+  JavaThread* t = JavaThread::current();\n+  if (t->has_last_Java_frame()) {\n+    t->print_active_stack_on(&st);\n+  } else {\n+    st.print_cr(\"(Cannot print stracktrace)\");\n+  }\n+}\n","filename":"src\/hotspot\/share\/utilities\/exceptions.cpp","additions":53,"deletions":9,"binary":false,"changes":62,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -193,0 +193,2 @@\n+  static void log_exception_stacktrace(Handle exception);\n+  static void log_exception_stacktrace(Handle exception, methodHandle method, int bci);\n","filename":"src\/hotspot\/share\/utilities\/exceptions.hpp","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -59,0 +59,2 @@\n+const int LockingMode = LM_LIGHTWEIGHT;\n+\n","filename":"src\/hotspot\/share\/utilities\/globalDefinitions.cpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1012,0 +1012,2 @@\n+extern const int LockingMode;\n+\n","filename":"src\/hotspot\/share\/utilities\/globalDefinitions.hpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -25,0 +25,3 @@\n+#ifndef SHARE_UTILITIES_PACKEDTABLE_HPP\n+#define SHARE_UTILITIES_PACKEDTABLE_HPP\n+\n@@ -124,0 +127,2 @@\n+\n+#endif \/\/ SHARE_UTILITIES_PACKEDTABLE_HPP\n","filename":"src\/hotspot\/share\/utilities\/packedTable.hpp","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -269,1 +269,1 @@\n-                 signame, _id, _pc,\n+                 signame, _id, p2i(_pc),\n","filename":"src\/hotspot\/share\/utilities\/vmError.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,0 +26,1 @@\n+#include <stdbool.h>\n@@ -232,5 +233,18 @@\n-    \/\/ Copy out the char* if running on version other than 10.16 Mac OS (10.16 == 11.x)\n-    \/\/ or explicitly requesting version compatibility\n-    if (!((long)osVer.majorVersion == 10 && (long)osVer.minorVersion >= 16) ||\n-            (getenv(\"SYSTEM_VERSION_COMPAT\") != NULL)) {\n-        if (osVer.patchVersion == 0) { \/\/ Omit trailing \".0\"\n+    \/\/ Some macOS versions require special handling. For example,\n+    \/\/ when the NSOperatingSystemVersion reports 10.16 as the version\n+    \/\/ then it should be treated as 11. Similarly, when it reports 16.0\n+    \/\/ as the version then it should be treated as 26.\n+    \/\/ If the SYSTEM_VERSION_COMPAT environment variable (a macOS construct)\n+    \/\/ is set to 1, then we don't do any special handling for any versions\n+    \/\/ and just literally use the value that NSOperatingSystemVersion reports.\n+    const char* envVal = getenv(\"SYSTEM_VERSION_COMPAT\");\n+    const bool versionCompatEnabled = envVal != NULL\n+                                      && strncmp(envVal, \"1\", 1) == 0;\n+    const bool requiresSpecialHandling =\n+            ((long) osVer.majorVersion == 10 && (long) osVer.minorVersion >= 16)\n+            || ((long) osVer.majorVersion == 16 && (long) osVer.minorVersion >= 0);\n+    if (!requiresSpecialHandling || versionCompatEnabled) {\n+        \/\/ no special handling - just use the version reported\n+        \/\/ by NSOperatingSystemVersion\n+        if (osVer.patchVersion == 0) {\n+            \/\/ Omit trailing \".0\"\n@@ -241,1 +255,2 @@\n-                    (long)osVer.majorVersion, (long)osVer.minorVersion, (long)osVer.patchVersion];\n+                    (long)osVer.majorVersion, (long)osVer.minorVersion,\n+                    (long)osVer.patchVersion];\n@@ -244,5 +259,8 @@\n-        \/\/ Version 10.16, without explicit env setting of SYSTEM_VERSION_COMPAT\n-        \/\/ AKA 11+ Read the *real* ProductVersion from the hidden link to avoid SYSTEM_VERSION_COMPAT\n-        \/\/ If not found, fallback below to the SystemVersion.plist\n-        NSDictionary *version = [NSDictionary dictionaryWithContentsOfFile :\n-                         @\"\/System\/Library\/CoreServices\/.SystemVersionPlatform.plist\"];\n+        \/\/ Requires special handling. We ignore the version reported\n+        \/\/ by the NSOperatingSystemVersion API and instead read the\n+        \/\/ *real* ProductVersion from\n+        \/\/ \/System\/Library\/CoreServices\/.SystemVersionPlatform.plist.\n+        \/\/ If not found there, then as a last resort we fallback to\n+        \/\/ \/System\/Library\/CoreServices\/SystemVersion.plist\n+        NSDictionary *version = [NSDictionary dictionaryWithContentsOfFile:\n+            @\"\/System\/Library\/CoreServices\/.SystemVersionPlatform.plist\"];\n@@ -250,1 +268,1 @@\n-            nsVerStr = [version objectForKey : @\"ProductVersion\"];\n+            nsVerStr = [version objectForKey: @\"ProductVersion\"];\n@@ -253,1 +271,1 @@\n-    \/\/ Fallback to reading the SystemVersion.plist\n+    \/\/ Last resort - fallback to reading the SystemVersion.plist\n@@ -255,2 +273,2 @@\n-        NSDictionary *version = [NSDictionary dictionaryWithContentsOfFile :\n-                                 @\"\/System\/Library\/CoreServices\/SystemVersion.plist\"];\n+        NSDictionary *version = [NSDictionary dictionaryWithContentsOfFile:\n+            @\"\/System\/Library\/CoreServices\/SystemVersion.plist\"];\n@@ -258,1 +276,1 @@\n-            nsVerStr = [version objectForKey : @\"ProductVersion\"];\n+            nsVerStr = [version objectForKey: @\"ProductVersion\"];\n","filename":"src\/java.base\/macosx\/native\/libjava\/java_props_macosx.c","additions":35,"deletions":17,"binary":false,"changes":52,"status":"modified"},{"patch":"@@ -34,0 +34,1 @@\n+import jdk.internal.util.StaticProperty;\n@@ -558,1 +559,1 @@\n-        Charset.forName(System.getProperty(\"stdin.encoding\"), UTF_8.INSTANCE);\n+        Charset.forName(StaticProperty.stdinEncoding(), UTF_8.INSTANCE);\n@@ -560,1 +561,1 @@\n-        Charset.forName(System.getProperty(\"stdout.encoding\"), UTF_8.INSTANCE);\n+        Charset.forName(StaticProperty.stdoutEncoding(), UTF_8.INSTANCE);\n","filename":"src\/java.base\/share\/classes\/java\/io\/Console.java","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -35,0 +35,2 @@\n+import jdk.internal.util.StaticProperty;\n+\n@@ -190,1 +192,1 @@\n-            String enc = System.getProperty(\"stdin.encoding\", \"\");\n+            String enc = StaticProperty.stdinEncoding();\n","filename":"src\/java.base\/share\/classes\/java\/lang\/IO.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -556,0 +556,1 @@\n+        String str;\n@@ -557,2 +558,1 @@\n-            this.value = \"\".value;\n-            this.coder = \"\".coder;\n+            str = \"\";\n@@ -560,6 +560,25 @@\n-            if (COMPACT_STRINGS) {\n-                int dp = StringCoding.countPositives(bytes, offset, length);\n-                if (dp == length) {\n-                    this.value = Arrays.copyOfRange(bytes, offset, offset + length);\n-                    this.coder = LATIN1;\n-                    return;\n+            str = utf8(bytes, offset, length);\n+        } else if (charset == ISO_8859_1.INSTANCE) {\n+            str = iso88591(bytes, offset, length);\n+        } else if (charset == US_ASCII.INSTANCE) {\n+            str = ascii(bytes, offset, length);\n+        } else {\n+            str = decode(charset, bytes, offset, length);\n+        }\n+        this(str);\n+    }\n+\n+    private static String utf8(byte[] bytes, int offset, int length) {\n+        if (COMPACT_STRINGS) {\n+            int dp = StringCoding.countPositives(bytes, offset, length);\n+            if (dp == length) {\n+                return new String(Arrays.copyOfRange(bytes, offset, offset + length), LATIN1);\n+            }\n+            \/\/ Decode with a stable copy, to be the result if the decoded length is the same\n+            byte[] latin1 = Arrays.copyOfRange(bytes, offset, offset + length);\n+            int sp = dp;            \/\/ first dp bytes are already in the copy\n+            while (sp < length) {\n+                int b1 = latin1[sp++];\n+                if (b1 >= 0) {\n+                    latin1[dp++] = (byte) b1;\n+                    continue;\n@@ -567,7 +586,5 @@\n-                \/\/ Decode with a stable copy, to be the result if the decoded length is the same\n-                byte[] latin1 = Arrays.copyOfRange(bytes, offset, offset + length);\n-                int sp = dp;            \/\/ first dp bytes are already in the copy\n-                while (sp < length) {\n-                    int b1 = latin1[sp++];\n-                    if (b1 >= 0) {\n-                        latin1[dp++] = (byte)b1;\n+                if ((b1 & 0xfe) == 0xc2 && sp < length) { \/\/ b1 either 0xc2 or 0xc3\n+                    int b2 = latin1[sp];\n+                    if (b2 < -64) { \/\/ continuation bytes are always negative values in the range -128 to -65\n+                        latin1[dp++] = (byte) decode2(b1, b2);\n+                        sp++;\n@@ -576,20 +593,0 @@\n-                    if ((b1 & 0xfe) == 0xc2 && sp < length) { \/\/ b1 either 0xc2 or 0xc3\n-                        int b2 = latin1[sp];\n-                        if (b2 < -64) { \/\/ continuation bytes are always negative values in the range -128 to -65\n-                            latin1[dp++] = (byte)decode2(b1, b2);\n-                            sp++;\n-                            continue;\n-                        }\n-                    }\n-                    \/\/ anything not a latin1, including the REPL\n-                    \/\/ we have to go with the utf16\n-                    sp--;\n-                    break;\n-                }\n-                if (sp == length) {\n-                    if (dp != latin1.length) {\n-                        latin1 = Arrays.copyOf(latin1, dp);\n-                    }\n-                    this.value = latin1;\n-                    this.coder = LATIN1;\n-                    return;\n@@ -597,13 +594,8 @@\n-                byte[] utf16 = StringUTF16.newBytesFor(length);\n-                StringLatin1.inflate(latin1, 0, utf16, 0, dp);\n-                dp = decodeUTF8_UTF16(latin1, sp, length, utf16, dp, true);\n-                if (dp != length) {\n-                    utf16 = Arrays.copyOf(utf16, dp << 1);\n-                }\n-                this.value = utf16;\n-                this.coder = UTF16;\n-            } else { \/\/ !COMPACT_STRINGS\n-                byte[] dst = StringUTF16.newBytesFor(length);\n-                int dp = decodeUTF8_UTF16(bytes, offset, offset + length, dst, 0, true);\n-                if (dp != length) {\n-                    dst = Arrays.copyOf(dst, dp << 1);\n+                \/\/ anything not a latin1, including the REPL\n+                \/\/ we have to go with the utf16\n+                sp--;\n+                break;\n+            }\n+            if (sp == length) {\n+                if (dp != latin1.length) {\n+                    latin1 = Arrays.copyOf(latin1, dp);\n@@ -611,2 +603,1 @@\n-                this.value = dst;\n-                this.coder = UTF16;\n+                return new String(latin1, LATIN1);\n@@ -614,7 +605,5 @@\n-        } else if (charset == ISO_8859_1.INSTANCE) {\n-            if (COMPACT_STRINGS) {\n-                this.value = Arrays.copyOfRange(bytes, offset, offset + length);\n-                this.coder = LATIN1;\n-            } else {\n-                this.value = StringLatin1.inflate(bytes, offset, length);\n-                this.coder = UTF16;\n+            byte[] utf16 = StringUTF16.newBytesFor(length);\n+            StringLatin1.inflate(latin1, 0, utf16, 0, dp);\n+            dp = decodeUTF8_UTF16(latin1, sp, length, utf16, dp, true);\n+            if (dp != length) {\n+                utf16 = Arrays.copyOf(utf16, dp << 1);\n@@ -622,13 +611,6 @@\n-        } else if (charset == US_ASCII.INSTANCE) {\n-            if (COMPACT_STRINGS && !StringCoding.hasNegatives(bytes, offset, length)) {\n-                this.value = Arrays.copyOfRange(bytes, offset, offset + length);\n-                this.coder = LATIN1;\n-            } else {\n-                byte[] dst = StringUTF16.newBytesFor(length);\n-                int dp = 0;\n-                while (dp < length) {\n-                    int b = bytes[offset++];\n-                    StringUTF16.putChar(dst, dp++, (b >= 0) ? (char) b : REPL);\n-                }\n-                this.value = dst;\n-                this.coder = UTF16;\n+            return new String(utf16, UTF16);\n+        } else { \/\/ !COMPACT_STRINGS\n+            byte[] dst = StringUTF16.newBytesFor(length);\n+            int dp = decodeUTF8_UTF16(bytes, offset, offset + length, dst, 0, true);\n+            if (dp != length) {\n+                dst = Arrays.copyOf(dst, dp << 1);\n@@ -636,0 +618,7 @@\n+            return new String(dst, UTF16);\n+        }\n+    }\n+\n+    private static String iso88591(byte[] bytes, int offset, int length) {\n+        if (COMPACT_STRINGS) {\n+            return new String(Arrays.copyOfRange(bytes, offset, offset + length), LATIN1);\n@@ -637,22 +626,3 @@\n-            \/\/ (1)We never cache the \"external\" cs, the only benefit of creating\n-            \/\/ an additional StringDe\/Encoder object to wrap it is to share the\n-            \/\/ de\/encode() method. These SD\/E objects are short-lived, the young-gen\n-            \/\/ gc should be able to take care of them well. But the best approach\n-            \/\/ is still not to generate them if not really necessary.\n-            \/\/ (2)The defensive copy of the input byte\/char[] has a big performance\n-            \/\/ impact, as well as the outgoing result byte\/char[]. Need to do the\n-            \/\/ optimization check of (sm==null && classLoader0==null) for both.\n-            CharsetDecoder cd = charset.newDecoder();\n-            \/\/ ArrayDecoder fastpaths\n-            if (cd instanceof ArrayDecoder ad) {\n-                \/\/ ascii\n-                if (ad.isASCIICompatible() && !StringCoding.hasNegatives(bytes, offset, length)) {\n-                    if (COMPACT_STRINGS) {\n-                        this.value = Arrays.copyOfRange(bytes, offset, offset + length);\n-                        this.coder = LATIN1;\n-                        return;\n-                    }\n-                    this.value = StringLatin1.inflate(bytes, offset, length);\n-                    this.coder = UTF16;\n-                    return;\n-                }\n+            return new String(StringLatin1.inflate(bytes, offset, length), UTF16);\n+        }\n+    }\n@@ -660,0 +630,30 @@\n+    private static String ascii(byte[] bytes, int offset, int length) {\n+        if (COMPACT_STRINGS && !StringCoding.hasNegatives(bytes, offset, length)) {\n+            return new String(Arrays.copyOfRange(bytes, offset, offset + length), LATIN1);\n+        } else {\n+            byte[] dst = StringUTF16.newBytesFor(length);\n+            int dp = 0;\n+            while (dp < length) {\n+                int b = bytes[offset++];\n+                StringUTF16.putChar(dst, dp++, (b >= 0) ? (char) b : REPL);\n+            }\n+            return new String(dst, UTF16);\n+        }\n+    }\n+\n+    private static String decode(Charset charset, byte[] bytes, int offset, int length) {\n+        \/\/ (1)We never cache the \"external\" cs, the only benefit of creating\n+        \/\/ an additional StringDe\/Encoder object to wrap it is to share the\n+        \/\/ de\/encode() method. These SD\/E objects are short-lived, the young-gen\n+        \/\/ gc should be able to take care of them well. But the best approach\n+        \/\/ is still not to generate them if not really necessary.\n+        \/\/ (2)The defensive copy of the input byte\/char[] has a big performance\n+        \/\/ impact, as well as the outgoing result byte\/char[]. Need to do the\n+        \/\/ optimization check of (sm==null && classLoader0==null) for both.\n+        CharsetDecoder cd = charset.newDecoder();\n+        \/\/ ArrayDecoder fastpaths\n+        if (cd instanceof ArrayDecoder ad) {\n+            \/\/ ascii\n+            if (ad.isASCIICompatible() && !StringCoding.hasNegatives(bytes, offset, length)) {\n+                return iso88591(bytes, offset, length);\n+            } else {\n@@ -664,3 +664,8 @@\n-                    this.value = dst;\n-                    this.coder = LATIN1;\n-                    return;\n+                    return new String(dst, LATIN1);\n+                } else {\n+                    int en = scale(length, cd.maxCharsPerByte());\n+                    cd.onMalformedInput(CodingErrorAction.REPLACE)\n+                            .onUnmappableCharacter(CodingErrorAction.REPLACE);\n+                    char[] ca = new char[en];\n+                    int clen = ad.decode(bytes, offset, length, ca);\n+                    return new String(ca, 0, clen, null);\n@@ -668,15 +673,0 @@\n-\n-                int en = scale(length, cd.maxCharsPerByte());\n-                cd.onMalformedInput(CodingErrorAction.REPLACE)\n-                        .onUnmappableCharacter(CodingErrorAction.REPLACE);\n-                char[] ca = new char[en];\n-                int clen = ad.decode(bytes, offset, length, ca);\n-                if (COMPACT_STRINGS) {\n-                    byte[] val = StringUTF16.compress(ca, 0, clen);;\n-                    this.coder = StringUTF16.coderFromArrayLen(val, clen);\n-                    this.value = val;\n-                    return;\n-                }\n-                coder = UTF16;\n-                value = StringUTF16.toBytes(ca, 0, clen);\n-                return;\n@@ -684,1 +674,1 @@\n-\n+        } else {\n@@ -697,8 +687,1 @@\n-            if (COMPACT_STRINGS) {\n-                byte[] val = StringUTF16.compress(ca, 0, caLen);\n-                this.coder = StringUTF16.coderFromArrayLen(val, caLen);\n-                this.value = val;\n-                return;\n-            }\n-            coder = UTF16;\n-            value = StringUTF16.toBytes(ca, 0, caLen);\n+            return new String(ca, 0, caLen, null);\n","filename":"src\/java.base\/share\/classes\/java\/lang\/String.java","additions":102,"deletions":119,"binary":false,"changes":221,"status":"modified"},{"patch":"@@ -1,33 +0,0 @@\n-\/*\n- * Copyright (c) 2008, 2011, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.  Oracle designates this\n- * particular file as subject to the \"Classpath\" exception as provided\n- * by Oracle in the LICENSE file that accompanied this code.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-\n-package java.lang.invoke;\n-\n-\/**\n- * This is a place-holder class.  Some HotSpot implementations need to see it.\n- *\/\n-final class InvokeDynamic {\n-    private InvokeDynamic() { throw new InternalError(); }  \/\/ do not instantiate\n-}\n","filename":"src\/java.base\/share\/classes\/java\/lang\/invoke\/InvokeDynamic.java","additions":0,"deletions":33,"binary":false,"changes":33,"status":"deleted"},{"patch":"@@ -39,1 +39,0 @@\n-import sun.invoke.empty.Empty;\n@@ -986,1 +985,1 @@\n-    static <T extends Throwable> Empty throwException(T t) throws T { throw t; }\n+    static <T extends Throwable> Void throwException(T t) throws T { throw t; }\n","filename":"src\/java.base\/share\/classes\/java\/lang\/invoke\/MethodHandleImpl.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -360,1 +360,0 @@\n-    @IntrinsicCandidate\n@@ -362,1 +361,1 @@\n-        return this.referent;\n+        return get0();\n@@ -365,0 +364,8 @@\n+    \/* Implementation of get().  This method exists to avoid making get() all\n+     * of virtual, native, and intrinsic candidate. That could have the\n+     * undesirable effect of having the native method used instead of the\n+     * intrinsic when devirtualization fails.\n+     *\/\n+    @IntrinsicCandidate\n+    private native T get0();\n+\n","filename":"src\/java.base\/share\/classes\/java\/lang\/ref\/Reference.java","additions":9,"deletions":2,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -54,1 +54,2 @@\n- * <p> HttpCookie class can accept all these 3 forms of syntax.\n+ * <p> HttpCookie class can accept all these 3 forms of syntax. This class also provides\n+ * partial support for RFC 6265.\n@@ -58,0 +59,1 @@\n+ * @spec https:\/\/www.rfc-editor.org\/info\/rfc6265 RFC 6265: HTTP State Management Mechanism\n@@ -188,1 +190,1 @@\n-        return parse(header, false);\n+        return parse(header, false, -1L);\n@@ -194,2 +196,2 @@\n-    \/\/ class.\n-    private static List<HttpCookie> parse(String header, boolean retainHeader) {\n+    \/\/ class. Also, allows for testing by specifying the creation time.\n+    static List<HttpCookie> parse(String header, boolean retainHeader, long currentTimeMillis) {\n@@ -212,1 +214,1 @@\n-            HttpCookie cookie = parseInternal(header, retainHeader);\n+            HttpCookie cookie = parseInternal(header, retainHeader, currentTimeMillis);\n@@ -221,1 +223,1 @@\n-                HttpCookie cookie = parseInternal(cookieStr, retainHeader);\n+                HttpCookie cookie = parseInternal(cookieStr, retainHeader, currentTimeMillis);\n@@ -233,1 +235,3 @@\n-     * Reports whether this HTTP cookie has expired or not.\n+     * Reports whether this HTTP cookie has expired or not. This is\n+     * based on whether {@link #getMaxAge()} seconds have elapsed since\n+     * this object was created.\n@@ -239,0 +243,5 @@\n+        return hasExpired(System.currentTimeMillis());\n+    }\n+\n+    \/\/ PP for testing\n+    boolean hasExpired(long currentTimeMillis) {\n@@ -246,1 +255,1 @@\n-        long deltaSecond = (System.currentTimeMillis() - whenCreated) \/ 1000;\n+        long deltaSecond = (currentTimeMillis - whenCreated) \/ 1000;\n@@ -414,2 +423,13 @@\n-     * Returns the maximum age of the cookie, specified in seconds. By default,\n-     * {@code -1} indicating the cookie will persist until browser shutdown.\n+     * Returns the maximum age of the cookie, specified in seconds from the time\n+     * the object was created. By default, {@code -1} indicating the cookie will\n+     * persist until browser shutdown.\n+     *\n+     * The value of this attribute is determined by the following steps, in line\n+     * with RFC 6265:\n+     *\n+     * <ol><li>If {@link #setMaxAge(long)} was called, return the value set.<\/li>\n+     * <li>If previous step failed, and a {@code Max-Age} attribute was parsed\n+     * then return that value.<\/li>\n+     * <li>If previous step failed, and an {@code Expires} attribute was parsed\n+     * then the maxAge calculated at parsing time from that date, is returned<\/li>\n+     * <li>If previous step failed, then return {@code -1}.<\/li><\/ol>\n@@ -813,1 +833,2 @@\n-                                            boolean retainHeader)\n+                                            boolean retainHeader,\n+                                            long currentTimeMillis)\n@@ -817,0 +838,2 @@\n+        if (currentTimeMillis == -1L)\n+            currentTimeMillis = System.currentTimeMillis();\n@@ -831,1 +854,1 @@\n-                                            header);\n+                                            header, currentTimeMillis);\n@@ -834,1 +857,2 @@\n-                                            stripOffSurroundingQuote(value));\n+                                            stripOffSurroundingQuote(value),\n+                                            null, currentTimeMillis);\n@@ -843,0 +867,4 @@\n+        \/\/ Attributes that require special handling\n+        String expiresValue = null;\n+        String maxAgeValue = null;\n+\n@@ -855,0 +883,8 @@\n+            if (name.equalsIgnoreCase(\"max-age\") && maxAgeValue == null) {\n+                maxAgeValue = value;\n+                continue;\n+            }\n+            if (name.equalsIgnoreCase(\"expires\") && expiresValue == null) {\n+                expiresValue = value;\n+                continue;\n+            }\n@@ -859,0 +895,1 @@\n+        assignMaxAgeAttribute(cookie, expiresValue, maxAgeValue);\n@@ -906,14 +943,0 @@\n-        assignors.put(\"max-age\", new CookieAttributeAssignor(){\n-                public void assign(HttpCookie cookie,\n-                                   String attrName,\n-                                   String attrValue) {\n-                    try {\n-                        long maxage = Long.parseLong(attrValue);\n-                        if (cookie.getMaxAge() == MAX_AGE_UNSPECIFIED)\n-                            cookie.setMaxAge(maxage);\n-                    } catch (NumberFormatException ignored) {\n-                        throw new IllegalArgumentException(\n-                                \"Illegal cookie max-age attribute\");\n-                    }\n-                }\n-            });\n@@ -962,10 +985,0 @@\n-        assignors.put(\"expires\", new CookieAttributeAssignor(){ \/\/ Netscape only\n-                public void assign(HttpCookie cookie,\n-                                   String attrName,\n-                                   String attrValue) {\n-                    if (cookie.getMaxAge() == MAX_AGE_UNSPECIFIED) {\n-                        long delta = cookie.expiryDate2DeltaSeconds(attrValue);\n-                        cookie.setMaxAge(delta > 0 ? delta : 0);\n-                    }\n-                }\n-            });\n@@ -973,0 +986,30 @@\n+\n+    private static void assignMaxAgeAttribute(HttpCookie cookie,\n+                                               String expiresValue,\n+                                               String maxAgeValue)\n+    {\n+        if (cookie.getMaxAge() != MAX_AGE_UNSPECIFIED)\n+            return;\n+        if (expiresValue == null && maxAgeValue == null)\n+            return;\n+\n+        \/\/ strip off the surrounding \"-sign if there's any\n+        expiresValue = stripOffSurroundingQuote(expiresValue);\n+        maxAgeValue = stripOffSurroundingQuote(maxAgeValue);\n+\n+        try {\n+            if (maxAgeValue != null) {\n+                long maxAge = Long.parseLong(maxAgeValue);\n+                cookie.maxAge = maxAge;\n+                return;\n+            }\n+        } catch (NumberFormatException ignored) {}\n+\n+        try {\n+            if (expiresValue != null) {\n+                long delta = cookie.expiryDate2DeltaSeconds(expiresValue);\n+                cookie.maxAge = (delta > 0 ? delta : 0);\n+            }\n+        } catch (NumberFormatException ignored) {}\n+    }\n+\n@@ -992,1 +1035,1 @@\n-                    return HttpCookie.parse(header, true);\n+                    return HttpCookie.parse(header, true, -1L);\n","filename":"src\/java.base\/share\/classes\/java\/net\/HttpCookie.java","additions":82,"deletions":39,"binary":false,"changes":121,"status":"modified"},{"patch":"@@ -458,0 +458,1 @@\n+     * @throws UnsupportedTemporalTypeException {@inheritDoc}\n","filename":"src\/java.base\/share\/classes\/java\/time\/chrono\/ChronoLocalDate.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2012, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2012, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -87,0 +87,1 @@\n+import java.time.temporal.UnsupportedTemporalTypeException;\n@@ -279,0 +280,1 @@\n+     * @throws UnsupportedTemporalTypeException {@inheritDoc}\n@@ -297,0 +299,1 @@\n+     * @throws UnsupportedTemporalTypeException {@inheritDoc}\n@@ -315,0 +318,1 @@\n+     * @throws UnsupportedTemporalTypeException {@inheritDoc}\n","filename":"src\/java.base\/share\/classes\/java\/time\/chrono\/ChronoLocalDateTime.java","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2012, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2012, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -425,0 +425,1 @@\n+     * @throws UnsupportedTemporalTypeException {@inheritDoc}\n@@ -443,0 +444,1 @@\n+     * @throws UnsupportedTemporalTypeException {@inheritDoc}\n@@ -461,0 +463,1 @@\n+     * @throws UnsupportedTemporalTypeException {@inheritDoc}\n","filename":"src\/java.base\/share\/classes\/java\/time\/chrono\/ChronoZonedDateTime.java","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1994, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1994, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -371,0 +371,2 @@\n+        Objects.requireNonNull(delim);\n+\n","filename":"src\/java.base\/share\/classes\/java\/util\/StringTokenizer.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -207,1 +207,2 @@\n-     * @spec RFC 9562\n+     * @spec https:\/\/www.rfc-editor.org\/rfc\/rfc9562.html\n+     *       RFC 9562 Universally Unique IDentifiers (UUIDs)\n@@ -233,1 +234,2 @@\n-     * @spec RFC 9562\n+     * @spec https:\/\/www.rfc-editor.org\/rfc\/rfc9562.html\n+     *       RFC 9562 Universally Unique IDentifiers (UUIDs)\n","filename":"src\/java.base\/share\/classes\/java\/util\/UUID.java","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -47,10 +47,10 @@\n- * Provides default implementations of {@link ExecutorService}\n- * execution methods. This class implements the {@code submit},\n- * {@code invokeAny} and {@code invokeAll} methods using a\n- * {@link RunnableFuture} returned by {@code newTaskFor}, which defaults\n- * to the {@link FutureTask} class provided in this package.  For example,\n- * the implementation of {@code submit(Runnable)} creates an\n- * associated {@code RunnableFuture} that is executed and\n- * returned. Subclasses may override the {@code newTaskFor} methods\n- * to return {@code RunnableFuture} implementations other than\n- * {@code FutureTask}.\n+ * Provides default implementations of {@link ExecutorService} methods\n+ * other than {@link Executor#execute}. This class implements the {@code\n+ * submit}, {@code invokeAny} and {@code invokeAll} methods using a\n+ * {@link RunnableFuture} returned by {@code newTaskFor}, which\n+ * defaults to the {@link FutureTask} class provided in this package.\n+ * For example, the implementation of {@code submit(Runnable)} creates\n+ * an associated {@code RunnableFuture} that is executed and\n+ * returned. Subclasses may override the {@code newTaskFor} methods to\n+ * return {@code RunnableFuture} implementations other than {@code\n+ * FutureTask}.\n","filename":"src\/java.base\/share\/classes\/java\/util\/concurrent\/AbstractExecutorService.java","additions":10,"deletions":10,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -46,1 +46,1 @@\n- * A stage completes upon termination of its computation, but this may\n+ * A stage completes upon termination of its computation, which may\n@@ -100,12 +100,19 @@\n- * {@link CompletionException} holding the exception as its cause.  If\n- * a stage is dependent on <em>both<\/em> of two stages, and both\n- * complete exceptionally, then the CompletionException may correspond\n- * to either one of these exceptions.  If a stage is dependent on\n- * <em>either<\/em> of two others, and only one of them completes\n- * exceptionally, no guarantees are made about whether the dependent\n- * stage completes normally or exceptionally. In the case of method\n- * {@code whenComplete}, when the supplied action itself encounters an\n- * exception, then the stage completes exceptionally with this\n- * exception unless the source stage also completed exceptionally, in\n- * which case the exceptional completion from the source stage is\n- * given preference and propagated to the dependent stage.\n+ * {@link CompletionException} holding the exception as its\n+ * cause. This convention distinguishes exceptions in an action itself\n+ * from those it depends on. If they are to be handled in the same\n+ * way, instead catch {@link RuntimeException} (possibly inspecting\n+ * the exception's {@code getCause()}).  If a stage is dependent on\n+ * <em>both<\/em> of two stages, and both complete exceptionally, then\n+ * the CompletionException may correspond to either one of these\n+ * exceptions.  If a stage is dependent on <em>either<\/em> of two\n+ * others, and only one of them completes exceptionally, no guarantees\n+ * are made about whether the dependent stage completes normally or\n+ * exceptionally. In the case of method {@code whenComplete}, when the\n+ * supplied action itself encounters an exception, then the stage\n+ * completes exceptionally with that exception unless the source stage\n+ * also completed exceptionally, in which case the exceptional\n+ * completion from the source stage is given preference and propagated\n+ * to the dependent stage. Applications are encouraged to maintain\n+ * these conventions, avoiding unnecessary nesting when rethrowing, as\n+ * in {@code throw (ex instanceof CompletionException) ? ex : new\n+ * CompletionException(ex)}.\n@@ -140,1 +147,1 @@\n- * <p>This interface does not define methods for initially creating,\n+ * <p>The {@code CompletionStage} interface does not define methods for initially creating,\n@@ -148,0 +155,7 @@\n+ * <p>Memory consistency effects: Actions in a thread prior to the\n+ * submission of a computation producing a {@code CompletionStage} <a\n+ * href=\"package-summary.html#MemoryVisibility\"><i>happen-before<\/i><\/a>\n+ * that computation begins. And actions taken by {@code\n+ * CompletionStage x} <i>happen-before<\/i> actions of any dependent\n+ * stage subsequent to {@code x}'s completion.\n+ *\n@@ -156,2 +170,2 @@\n-     * Returns a new CompletionStage that, when this stage completes\n-     * normally, is executed with this stage's result as the argument\n+     * Returns a new CompletionStage that, when {@code this} stage completes\n+     * normally, is executed with {@code this} stage's result as the argument\n@@ -175,3 +189,3 @@\n-     * Returns a new CompletionStage that, when this stage completes\n-     * normally, is executed using this stage's default asynchronous\n-     * execution facility, with this stage's result as the argument to\n+     * Returns a new CompletionStage that, when {@code this} stage completes\n+     * normally, is executed using {@code this} stage's default asynchronous\n+     * execution facility, with {@code this} stage's result as the argument to\n@@ -192,2 +206,2 @@\n-     * Returns a new CompletionStage that, when this stage completes\n-     * normally, is executed using the supplied Executor, with this\n+     * Returns a new CompletionStage that, when {@code this} stage completes\n+     * normally, is executed using the supplied Executor, with {@code this}\n@@ -210,2 +224,2 @@\n-     * Returns a new CompletionStage that, when this stage completes\n-     * normally, is executed with this stage's result as the argument\n+     * Returns a new CompletionStage that, when {@code this} stage completes\n+     * normally, is executed with {@code this} stage's result as the argument\n@@ -224,3 +238,3 @@\n-     * Returns a new CompletionStage that, when this stage completes\n-     * normally, is executed using this stage's default asynchronous\n-     * execution facility, with this stage's result as the argument to\n+     * Returns a new CompletionStage that, when {@code this} stage completes\n+     * normally, is executed using {@code this} stage's default asynchronous\n+     * execution facility, with {@code this} stage's result as the argument to\n@@ -239,2 +253,2 @@\n-     * Returns a new CompletionStage that, when this stage completes\n-     * normally, is executed using the supplied Executor, with this\n+     * Returns a new CompletionStage that, when {@code this} stage completes\n+     * normally, is executed using the supplied Executor, with {@code this}\n@@ -254,1 +268,1 @@\n-     * Returns a new CompletionStage that, when this stage completes\n+     * Returns a new CompletionStage that, when {@code this} stage completes\n@@ -267,2 +281,2 @@\n-     * Returns a new CompletionStage that, when this stage completes\n-     * normally, executes the given action using this stage's default\n+     * Returns a new CompletionStage that, when {@code this} stage completes\n+     * normally, executes the given action using {@code this} stage's default\n@@ -281,1 +295,1 @@\n-     * Returns a new CompletionStage that, when this stage completes\n+     * Returns a new CompletionStage that, when {@code this} stage completes\n@@ -296,1 +310,1 @@\n-     * Returns a new CompletionStage that, when this and the other\n+     * Returns a new CompletionStage that, when {@code this} and the other\n@@ -315,2 +329,2 @@\n-     * Returns a new CompletionStage that, when this and the other\n-     * given stage both complete normally, is executed using this\n+     * Returns a new CompletionStage that, when {@code this} and the other\n+     * given stage both complete normally, is executed using {@code this}\n@@ -335,1 +349,1 @@\n-     * Returns a new CompletionStage that, when this and the other\n+     * Returns a new CompletionStage that, when {@code this} and the other\n@@ -357,1 +371,1 @@\n-     * Returns a new CompletionStage that, when this and the other\n+     * Returns a new CompletionStage that, when {@code this} and the other\n@@ -375,2 +389,2 @@\n-     * Returns a new CompletionStage that, when this and the other\n-     * given stage both complete normally, is executed using this\n+     * Returns a new CompletionStage that, when {@code this} and the other\n+     * given stage both complete normally, is executed using {@code this}\n@@ -394,1 +408,1 @@\n-     * Returns a new CompletionStage that, when this and the other\n+     * Returns a new CompletionStage that, when {@code this} and the other\n@@ -415,1 +429,1 @@\n-     * Returns a new CompletionStage that, when this and the other\n+     * Returns a new CompletionStage that, when {@code this} and the other\n@@ -429,1 +443,1 @@\n-     * Returns a new CompletionStage that, when this and the other\n+     * Returns a new CompletionStage that, when {@code this} and the other\n@@ -431,1 +445,1 @@\n-     * using this stage's default asynchronous execution facility.\n+     * using {@code this} stage's default asynchronous execution facility.\n@@ -445,1 +459,1 @@\n-     * Returns a new CompletionStage that, when this and the other\n+     * Returns a new CompletionStage that, when {@code this} and the other\n@@ -462,1 +476,1 @@\n-     * Returns a new CompletionStage that, when either this or the\n+     * Returns a new CompletionStage that, when either {@code this} or the\n@@ -480,2 +494,2 @@\n-     * Returns a new CompletionStage that, when either this or the\n-     * other given stage complete normally, is executed using this\n+     * Returns a new CompletionStage that, when either {@code this} or the\n+     * other given stage complete normally, is executed using {@code this}\n@@ -499,1 +513,1 @@\n-     * Returns a new CompletionStage that, when either this or the\n+     * Returns a new CompletionStage that, when either {@code this} or the\n@@ -520,1 +534,1 @@\n-     * Returns a new CompletionStage that, when either this or the\n+     * Returns a new CompletionStage that, when either {@code this} or the\n@@ -537,2 +551,2 @@\n-     * Returns a new CompletionStage that, when either this or the\n-     * other given stage complete normally, is executed using this\n+     * Returns a new CompletionStage that, when either {@code this} or the\n+     * other given stage complete normally, is executed using {@code this}\n@@ -555,1 +569,1 @@\n-     * Returns a new CompletionStage that, when either this or the\n+     * Returns a new CompletionStage that, when either {@code this} or the\n@@ -575,1 +589,1 @@\n-     * Returns a new CompletionStage that, when either this or the\n+     * Returns a new CompletionStage that, when either {@code this} or the\n@@ -590,1 +604,1 @@\n-     * Returns a new CompletionStage that, when either this or the\n+     * Returns a new CompletionStage that, when either {@code this} or the\n@@ -592,1 +606,1 @@\n-     * using this stage's default asynchronous execution facility.\n+     * using {@code this} stage's default asynchronous execution facility.\n@@ -607,1 +621,1 @@\n-     * Returns a new CompletionStage that, when either this or the\n+     * Returns a new CompletionStage that, when either {@code this} or the\n@@ -629,2 +643,2 @@\n-     * <p>When this stage completes normally, the given function is\n-     * invoked with this stage's result as the argument, returning\n+     * <p>When {@code this} stage completes normally, the given function is\n+     * invoked with {@code this} stage's result as the argument, returning\n@@ -632,1 +646,1 @@\n-     * the CompletionStage returned by this method is completed with\n+     * the CompletionStage returned is completed with\n@@ -655,1 +669,1 @@\n-     * executed using this stage's default asynchronous execution\n+     * executed using {@code this} stage's default asynchronous execution\n@@ -658,2 +672,2 @@\n-     * <p>When this stage completes normally, the given function is\n-     * invoked with this stage's result as the argument, returning\n+     * <p>When {@code this} stage completes normally, the given function is\n+     * invoked with {@code this} stage's result as the argument, returning\n@@ -661,1 +675,1 @@\n-     * the CompletionStage returned by this method is completed with\n+     * the CompletionStage returned is completed with\n@@ -682,2 +696,2 @@\n-     * <p>When this stage completes normally, the given function is\n-     * invoked with this stage's result as the argument, returning\n+     * <p>When {@code this} stage completes normally, the given function is\n+     * invoked with {@code this} stage's result as the argument, returning\n@@ -685,1 +699,1 @@\n-     * the CompletionStage returned by this method is completed with\n+     * the CompletionStage returned by {@code this} method is completed with\n@@ -704,2 +718,2 @@\n-     * Returns a new CompletionStage that, when this stage completes\n-     * either normally or exceptionally, is executed with this stage's\n+     * Returns a new CompletionStage that, when {@code this} stage completes\n+     * either normally or exceptionally, is executed with {@code this} stage's\n@@ -708,1 +722,1 @@\n-     * <p>When this stage is complete, the given function is invoked\n+     * <p>When {@code this} stage is complete, the given function is invoked\n@@ -710,1 +724,1 @@\n-     * {@code null} if none) of this stage as arguments, and the\n+     * {@code null} if none) of {@code this} stage as arguments, and the\n@@ -722,3 +736,3 @@\n-     * Returns a new CompletionStage that, when this stage completes\n-     * either normally or exceptionally, is executed using this stage's\n-     * default asynchronous execution facility, with this stage's\n+     * Returns a new CompletionStage that, when {@code this} stage completes\n+     * either normally or exceptionally, is executed using {@code this} stage's\n+     * default asynchronous execution facility, with {@code this} stage's\n@@ -727,1 +741,1 @@\n-     * <p>When this stage is complete, the given function is invoked\n+     * <p>When {@code this} stage is complete, the given function is invoked\n@@ -729,1 +743,1 @@\n-     * {@code null} if none) of this stage as arguments, and the\n+     * {@code null} if none) of {@code this} stage as arguments, and the\n@@ -741,1 +755,1 @@\n-     * Returns a new CompletionStage that, when this stage completes\n+     * Returns a new CompletionStage that, when {@code this} stage completes\n@@ -743,1 +757,1 @@\n-     * supplied executor, with this stage's result and exception as\n+     * supplied executor, with {@code this} stage's result and exception as\n@@ -746,1 +760,1 @@\n-     * <p>When this stage is complete, the given function is invoked\n+     * <p>When {@code this} stage is complete, the given function is invoked\n@@ -748,1 +762,1 @@\n-     * {@code null} if none) of this stage as arguments, and the\n+     * {@code null} if none) of {@code this} stage as arguments, and the\n@@ -763,1 +777,1 @@\n-     * this stage, that executes the given action when this stage completes.\n+     * {@code this} stage, that executes the given action when {@code this} stage completes.\n@@ -765,1 +779,1 @@\n-     * <p>When this stage is complete, the given action is invoked\n+     * <p>When {@code this} stage is complete, the given action is invoked\n@@ -767,1 +781,1 @@\n-     * {@code null} if none) of this stage as arguments.  The returned\n+     * {@code null} if none) of {@code this} stage as arguments.  The returned\n@@ -771,1 +785,1 @@\n-     * this method is not designed to translate completion outcomes,\n+     * method {@code whenComplete} is not designed to translate completion outcomes,\n@@ -773,1 +787,1 @@\n-     * if it does, the following rules apply: if this stage completed\n+     * if it does, the following rules apply: if {@code this} stage completed\n@@ -776,1 +790,1 @@\n-     * action's exception. Or, if this stage completed exceptionally\n+     * action's exception. Or, if {@code this} stage completed exceptionally\n@@ -778,1 +792,1 @@\n-     * stage completes exceptionally with this stage's exception.\n+     * stage completes exceptionally with {@code this} stage's exception.\n@@ -788,2 +802,2 @@\n-     * this stage, that executes the given action using this stage's\n-     * default asynchronous execution facility when this stage completes.\n+     * {@code this} stage, that executes the given action using {@code this} stage's\n+     * default asynchronous execution facility when {@code this} stage completes.\n@@ -791,1 +805,1 @@\n-     * <p>When this stage is complete, the given action is invoked with the\n+     * <p>When {@code this} stage is complete, the given action is invoked with the\n@@ -793,1 +807,1 @@\n-     * if none) of this stage as arguments.  The returned stage is completed\n+     * if none) of {@code this} stage as arguments.  The returned stage is completed\n@@ -797,1 +811,1 @@\n-     * this method is not designed to translate completion outcomes,\n+     * method {@code whenCompleteAsync} is not designed to translate completion outcomes,\n@@ -799,1 +813,1 @@\n-     * if it does, the following rules apply: If this stage completed\n+     * if it does, the following rules apply: If {@code this} stage completed\n@@ -802,1 +816,1 @@\n-     * action's exception. Or, if this stage completed exceptionally\n+     * action's exception. Or, if {@code this} stage completed exceptionally\n@@ -804,1 +818,1 @@\n-     * stage completes exceptionally with this stage's exception.\n+     * stage completes exceptionally with {@code this} stage's exception.\n@@ -814,2 +828,2 @@\n-     * this stage, that executes the given action using the supplied\n-     * Executor when this stage completes.\n+     * {@code this} stage, that executes the given action using the supplied\n+     * Executor when {@code this} stage completes.\n@@ -817,1 +831,1 @@\n-     * <p>When this stage is complete, the given action is invoked with the\n+     * <p>When {@code this} stage is complete, the given action is invoked with the\n@@ -819,1 +833,1 @@\n-     * if none) of this stage as arguments.  The returned stage is completed\n+     * if none) of {@code this} stage as arguments.  The returned stage is completed\n@@ -823,1 +837,1 @@\n-     * this method is not designed to translate completion outcomes,\n+     * method {@code whenCompleteAsync} is not designed to translate completion outcomes,\n@@ -825,1 +839,1 @@\n-     * if it does, the following rules apply: If this stage completed\n+     * if it does, the following rules apply: If {@code this} stage completed\n@@ -828,1 +842,1 @@\n-     * action's exception. Or, if this stage completed exceptionally\n+     * action's exception. Or, if {@code this} stage completed exceptionally\n@@ -830,1 +844,1 @@\n-     * stage completes exceptionally with this stage's exception.\n+     * stage completes exceptionally with {@code this} stage's exception.\n@@ -841,3 +855,3 @@\n-     * Returns a new CompletionStage that, when this stage completes\n-     * exceptionally, is executed with this stage's exception as the\n-     * argument to the supplied function.  Otherwise, if this stage\n+     * Returns a new CompletionStage that, when {@code this} stage completes\n+     * exceptionally, is executed with {@code this} stage's exception as the\n+     * argument to the supplied function.  Otherwise, if {@code this} stage\n@@ -848,1 +862,1 @@\n-     * returned CompletionStage if this CompletionStage completed\n+     * returned CompletionStage if {@code this} CompletionStage completed\n@@ -856,4 +870,4 @@\n-     * Returns a new CompletionStage that, when this stage completes\n-     * exceptionally, is executed with this stage's exception as the\n-     * argument to the supplied function, using this stage's default\n-     * asynchronous execution facility.  Otherwise, if this stage\n+     * Returns a new CompletionStage that, when {@code this} stage completes\n+     * exceptionally, is executed with {@code this} stage's exception as the\n+     * argument to the supplied function, using {@code this} stage's default\n+     * asynchronous execution facility.  Otherwise, if {@code this} stage\n@@ -868,1 +882,1 @@\n-     * returned CompletionStage if this CompletionStage completed\n+     * returned CompletionStage if {@code this} CompletionStage completed\n@@ -882,2 +896,2 @@\n-     * Returns a new CompletionStage that, when this stage completes\n-     * exceptionally, is executed with this stage's exception as the\n+     * Returns a new CompletionStage that, when {@code this} stage completes\n+     * exceptionally, is executed with {@code this} stage's exception as the\n@@ -885,1 +899,1 @@\n-     * Otherwise, if this stage completes normally, then the returned\n+     * Otherwise, if {@code this} stage completes normally, then the returned\n@@ -893,1 +907,1 @@\n-     * returned CompletionStage if this CompletionStage completed\n+     * returned CompletionStage if {@code this} CompletionStage completed\n@@ -908,1 +922,1 @@\n-     * Returns a new CompletionStage that, when this stage completes\n+     * Returns a new CompletionStage that, when {@code this} stage completes\n@@ -910,1 +924,1 @@\n-     * function applied to this stage's exception.\n+     * function applied to {@code this} stage's exception.\n@@ -917,1 +931,1 @@\n-     * CompletionStage if this CompletionStage completed exceptionally\n+     * CompletionStage if {@code this} CompletionStage completed exceptionally\n@@ -930,1 +944,1 @@\n-     * Returns a new CompletionStage that, when this stage completes\n+     * Returns a new CompletionStage that, when {@code this} stage completes\n@@ -932,1 +946,1 @@\n-     * function applied to this stage's exception, using this stage's\n+     * function applied to {@code this} stage's exception, using {@code this} stage's\n@@ -940,1 +954,1 @@\n-     * CompletionStage if this CompletionStage completed exceptionally\n+     * CompletionStage if {@code this} CompletionStage completed exceptionally\n@@ -954,1 +968,1 @@\n-     * Returns a new CompletionStage that, when this stage completes\n+     * Returns a new CompletionStage that, when {@code this} stage completes\n@@ -956,1 +970,1 @@\n-     * function applied to this stage's exception, using the\n+     * function applied to {@code this} stage's exception, using the\n@@ -964,1 +978,1 @@\n-     * CompletionStage if this CompletionStage completed exceptionally\n+     * CompletionStage if {@code this} CompletionStage completed exceptionally\n@@ -981,3 +995,3 @@\n-     * completion properties as this stage. If this stage is already a\n-     * CompletableFuture, this method may return this stage itself.\n-     * Otherwise, invocation of this method may be equivalent in\n+     * completion properties as {@code this} stage. If {@code this} stage is already a\n+     * CompletableFuture, method {@code toCompletableFuture} may return {@code this} stage itself.\n+     * Otherwise, invocation may be equivalent in\n","filename":"src\/java.base\/share\/classes\/java\/util\/concurrent\/CompletionStage.java","additions":141,"deletions":127,"binary":false,"changes":268,"status":"modified"},{"patch":"@@ -150,1 +150,1 @@\n- * <p>ConcurrentHashMaps support a set of sequential and parallel bulk\n+ * <p id=\"Bulk\">ConcurrentHashMaps support a set of sequential and parallel bulk\n@@ -3707,1 +3707,1 @@\n-     * Performs the given action for each (key, value).\n+     * Performs the given {@linkplain ##Bulk bulk} action for each (key, value).\n@@ -3723,1 +3723,1 @@\n-     * Performs the given action for each non-null transformation\n+     * Performs the given {@linkplain ##Bulk bulk} action for each non-null transformation\n@@ -3746,1 +3746,1 @@\n-     * Returns a non-null result from applying the given search\n+     * Returns a non-null result from applying the given {@linkplain ##Bulk bulk} search\n@@ -3770,1 +3770,1 @@\n-     * Returns the result of accumulating the given transformation\n+     * Returns the result of accumulating the given {@linkplain ##Bulk bulk} transformation\n@@ -3796,1 +3796,1 @@\n-     * Returns the result of accumulating the given transformation\n+     * Returns the result of accumulating the given {@linkplain ##Bulk bulk} transformation\n@@ -3822,1 +3822,1 @@\n-     * Returns the result of accumulating the given transformation\n+     * Returns the result of accumulating the given {@linkplain ##Bulk bulk} transformation\n@@ -3848,1 +3848,1 @@\n-     * Returns the result of accumulating the given transformation\n+     * Returns the result of accumulating the given {@linkplain ##Bulk bulk} transformation\n@@ -3874,1 +3874,1 @@\n-     * Performs the given action for each key.\n+     * Performs the given {@linkplain ##Bulk bulk} action for each key.\n@@ -3890,1 +3890,1 @@\n-     * Performs the given action for each non-null transformation\n+     * Performs the given {@linkplain ##Bulk bulk} action for each non-null transformation\n@@ -3913,1 +3913,1 @@\n-     * Returns a non-null result from applying the given search\n+     * Returns a non-null result from applying the given {@linkplain ##Bulk bulk} search\n@@ -3937,1 +3937,1 @@\n-     * Returns the result of accumulating all keys using the given\n+     * Returns the result of {@linkplain ##Bulk bulk} accumulating all keys using the given\n@@ -3956,1 +3956,1 @@\n-     * Returns the result of accumulating the given transformation\n+     * Returns the result of {@linkplain ##Bulk bulk} accumulating the given transformation\n@@ -3982,1 +3982,1 @@\n-     * Returns the result of accumulating the given transformation\n+     * Returns the result of {@linkplain ##Bulk bulk} accumulating the given transformation\n@@ -4008,1 +4008,1 @@\n-     * Returns the result of accumulating the given transformation\n+     * Returns the result of {@linkplain ##Bulk bulk} accumulating the given transformation\n@@ -4034,1 +4034,1 @@\n-     * Returns the result of accumulating the given transformation\n+     * Returns the result of {@linkplain ##Bulk bulk} accumulating the given transformation\n@@ -4060,1 +4060,1 @@\n-     * Performs the given action for each value.\n+     * Performs the given {@linkplain ##Bulk bulk} action for each value.\n@@ -4077,1 +4077,1 @@\n-     * Performs the given action for each non-null transformation\n+     * Performs the given {@linkplain ##Bulk bulk} action for each non-null transformation\n@@ -4100,1 +4100,1 @@\n-     * Returns a non-null result from applying the given search\n+     * Returns a non-null result from {@linkplain ##Bulk bulk} applying the given search\n@@ -4124,1 +4124,1 @@\n-     * Returns the result of accumulating all values using the\n+     * Returns the result of {@linkplain ##Bulk bulk} accumulating all values using the\n@@ -4142,1 +4142,1 @@\n-     * Returns the result of accumulating the given transformation\n+     * Returns the result of {@linkplain ##Bulk bulk} accumulating the given transformation\n@@ -4168,1 +4168,1 @@\n-     * Returns the result of accumulating the given transformation\n+     * Returns the result of {@linkplain ##Bulk bulk} accumulating the given transformation\n@@ -4194,1 +4194,1 @@\n-     * Returns the result of accumulating the given transformation\n+     * Returns the result of {@linkplain ##Bulk bulk} accumulating the given transformation\n@@ -4220,1 +4220,1 @@\n-     * Returns the result of accumulating the given transformation\n+     * Returns the result of {@linkplain ##Bulk bulk} accumulating the given transformation\n@@ -4246,1 +4246,1 @@\n-     * Performs the given action for each entry.\n+     * Performs the given {@linkplain ##Bulk bulk} action for each entry.\n@@ -4261,1 +4261,1 @@\n-     * Performs the given action for each non-null transformation\n+     * Performs the given {@linkplain ##Bulk bulk} action for each non-null transformation\n@@ -4284,1 +4284,1 @@\n-     * Returns a non-null result from applying the given search\n+     * Returns a non-null result from {@linkplain ##Bulk bulk} applying the given search\n@@ -4308,1 +4308,1 @@\n-     * Returns the result of accumulating all entries using the\n+     * Returns the result of {@linkplain ##Bulk bulk} accumulating all entries using the\n@@ -4326,1 +4326,1 @@\n-     * Returns the result of accumulating the given transformation\n+     * Returns the result of {@linkplain ##Bulk bulk} accumulating the given transformation\n@@ -4352,1 +4352,1 @@\n-     * Returns the result of accumulating the given transformation\n+     * Returns the result of {@linkplain ##Bulk bulk} accumulating the given transformation\n@@ -4378,1 +4378,1 @@\n-     * Returns the result of accumulating the given transformation\n+     * Returns the result of {@linkplain ##Bulk bulk} accumulating the given transformation\n@@ -4404,1 +4404,1 @@\n-     * Returns the result of accumulating the given transformation\n+     * Returns the result of {@linkplain ##Bulk bulk} accumulating the given transformation\n","filename":"src\/java.base\/share\/classes\/java\/util\/concurrent\/ConcurrentHashMap.java","additions":32,"deletions":32,"binary":false,"changes":64,"status":"modified"},{"patch":"@@ -47,1 +47,4 @@\n- * are released.\n+ * are released. If you need support for variable numbers of parties\n+ * per cycle, alternate actions on exceptions, termination control,\n+ * contention control, or status monitoring, use the more flexible\n+ * {@link Phaser} class.\n","filename":"src\/java.base\/share\/classes\/java\/util\/concurrent\/CyclicBarrier.java","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -59,1 +59,3 @@\n- * that can be used to cancel execution and\/or wait for completion.\n+ * that can be used to cancel execution and\/or wait for completion;\n+ * also reporting exceptions that would otherwise be uncaught\n+ * using method {@code execute}.\n","filename":"src\/java.base\/share\/classes\/java\/util\/concurrent\/ExecutorService.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -309,1 +309,1 @@\n-     * Creates a thread pool that can schedule commands to run after a\n+     * Creates a fixed-size thread pool that can schedule commands to run after a\n@@ -321,1 +321,1 @@\n-     * Creates a thread pool that can schedule commands to run after a\n+     * Creates a fixed-size thread pool that can schedule commands to run after a\n","filename":"src\/java.base\/share\/classes\/java\/util\/concurrent\/Executors.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -63,1 +63,2 @@\n- * SubmissionPublisher}).\n+ * SubmissionPublisher}), and omits some error processing needed to\n+ * fully conform to the Reactive Streams specification.\n","filename":"src\/java.base\/share\/classes\/java\/util\/concurrent\/Flow.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -143,1 +143,1 @@\n- * actions become <em>enabled<\/em> and behave as ordinary submitted\n+ * actions become enabled for execution and behave as ordinary submitted\n@@ -156,1 +156,1 @@\n- * do not include scheduled tasks that are not yet enabled to execute,\n+ * do not include scheduled tasks that are not yet enabled for execution,\n@@ -3508,1 +3508,1 @@\n-     * Submits a one-shot task that becomes enabled after the given\n+     * Submits a one-shot task that becomes enabled for execution after the given\n@@ -3536,1 +3536,1 @@\n-     * Submits a value-returning one-shot task that becomes enabled\n+     * Submits a value-returning one-shot task that becomes enabled for execution\n@@ -3565,1 +3565,1 @@\n-     * Submits a periodic action that becomes enabled first after the\n+     * Submits a periodic action that becomes enabled for execution first after the\n@@ -3619,1 +3619,1 @@\n-     * Submits a periodic action that becomes enabled first after the\n+     * Submits a periodic action that becomes enabled for execution first after the\n","filename":"src\/java.base\/share\/classes\/java\/util\/concurrent\/ForkJoinPool.java","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -53,0 +53,20 @@\n+ * <p>Cancellation of a Future need not abruptly terminate its\n+ * computation. Method {@code cancel} causes {@code isCancelled()} to\n+ * return {@code true} unless already {@code isDone()}; in either case\n+ * {@code isDone()} subsequently reports {@code true}. This suppresses\n+ * execution by an {@link ExecutorService} if not already started.\n+ * There are several options for suppressing unnecessary computation\n+ * or unblocking a running Future that will not generate a\n+ * result. When task bodies are simple and short, no special attention\n+ * is warranted.  Computational methods in Future-aware code bodies\n+ * (for example {@link ForkJoinTask}, {@link FutureTask}) may inspect\n+ * their own {@code isDone()} status before or while engaging in\n+ * expensive computations. In blocking I\/O or communication contexts,\n+ * the optional {@code mayInterruptIfRunning} argument of {@code\n+ * cancel} may be used to support conventions that tasks should\n+ * unblock and exit when {@link Thread#interrupted}, whether checked\n+ * inside a task body or as a response to an {@link\n+ * InterruptedException}.  It is still preferable to additionally\n+ * check {@code isDone()} status when possible to avoid unintended\n+ * effects of other uses of {@link Thread#interrupt}.\n+ *\n","filename":"src\/java.base\/share\/classes\/java\/util\/concurrent\/Future.java","additions":20,"deletions":0,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -288,1 +288,3 @@\n-     * upon successful completion of the computation.\n+     * upon successful completion of the computation. Invocation in\n+     * other contexts has undefined effects. Any override of this\n+     * method in subclasses should include {@code super.set(v)}.\n","filename":"src\/java.base\/share\/classes\/java\/util\/concurrent\/FutureTask.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -50,2 +50,3 @@\n-     * Sets this Future to the result of its computation\n-     * unless it has been cancelled.\n+     * Sets this Future to the result of its computation unless it has\n+     * been cancelled (or has already been invoked, in which case\n+     * effects are undefined).\n","filename":"src\/java.base\/share\/classes\/java\/util\/concurrent\/RunnableFuture.java","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -43,4 +43,6 @@\n- * and return a task object that can be used to cancel or check\n- * execution. The {@code scheduleAtFixedRate} and\n- * {@code scheduleWithFixedDelay} methods create and execute tasks\n- * that run periodically until cancelled.\n+ * and return {@link ScheduledFuture} objects that can be used to cancel or check\n+ * execution. When delays elapse, tasks are enabled for execution and\n+ * behave in accord with other {@link ExecutorService} tasks, except\n+ * that {@code scheduleAtFixedRate} and {@code scheduleWithFixedDelay}\n+ * methods create and execute tasks that run periodically until\n+ * cancelled.\n@@ -94,1 +96,1 @@\n-     * Submits a one-shot task that becomes enabled after the given delay.\n+     * Submits a one-shot task that becomes enabled for execution after the given delay.\n@@ -110,1 +112,1 @@\n-     * Submits a value-returning one-shot task that becomes enabled\n+     * Submits a value-returning one-shot task that becomes enabled for execution\n@@ -126,1 +128,1 @@\n-     * Submits a periodic action that becomes enabled first after the\n+     * Submits a periodic action that becomes enabled for execution first after the\n@@ -170,1 +172,1 @@\n-     * Submits a periodic action that becomes enabled first after the\n+     * Submits a periodic action that becomes enabled for execution first after the\n","filename":"src\/java.base\/share\/classes\/java\/util\/concurrent\/ScheduledExecutorService.java","additions":10,"deletions":8,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -60,1 +60,1 @@\n- * <p>Delayed tasks execute no sooner than they are enabled, but\n+ * <p>Delayed tasks execute no sooner than they are enabled for execution, but\n@@ -571,1 +571,1 @@\n-     * Submits a periodic action that becomes enabled first after the\n+     * Submits a periodic action that becomes enabled for execution first after the\n@@ -624,1 +624,1 @@\n-     * Submits a periodic action that becomes enabled first after the\n+     * Submits a periodic action that becomes enabled for execution first after the\n","filename":"src\/java.base\/share\/classes\/java\/util\/concurrent\/ScheduledThreadPoolExecutor.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -165,1 +165,0 @@\n- *     subscription.request(1);\n@@ -167,0 +166,1 @@\n+ *     subscription.request(1);\n@@ -605,3 +605,5 @@\n-     * subscribers, and disallows subsequent attempts to publish.\n-     * Upon return, this method does <em>NOT<\/em> guarantee that all\n-     * subscribers have yet completed.\n+     * subscribers, and disallows subsequent attempts to publish. To\n+     * ensure uniform ordering among subscribers, this method may\n+     * await completion of in-progress offers.  Upon return, this\n+     * method does <em>NOT<\/em> guarantee that all subscribers have\n+     * yet completed.\n","filename":"src\/java.base\/share\/classes\/java\/util\/concurrent\/SubmissionPublisher.java","additions":6,"deletions":4,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -401,0 +401,2 @@\n+     * @throws  IllegalMonitorStateException  if the current thread is not\n+     *               the owner of the object's monitor.\n","filename":"src\/java.base\/share\/classes\/java\/util\/concurrent\/TimeUnit.java","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -49,4 +49,5 @@\n- * designated {@code volatile int} fields of designated classes.\n- * This class is designed for use in atomic data structures in which\n- * several fields of the same node are independently subject to atomic\n- * updates.\n+ * designated non-static {@code volatile int} fields of designated\n+ * classes, providing a subset of the functionality of class {@link\n+ * VarHandle} that should be used instead.  This class is designed for\n+ * use in atomic data structures in which several fields of the same\n+ * node are independently subject to atomic updates.\n","filename":"src\/java.base\/share\/classes\/java\/util\/concurrent\/atomic\/AtomicIntegerFieldUpdater.java","additions":5,"deletions":4,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -49,4 +49,5 @@\n- * designated {@code volatile long} fields of designated classes.\n- * This class is designed for use in atomic data structures in which\n- * several fields of the same node are independently subject to atomic\n- * updates.\n+ * designated non-static {@code volatile long} fields of designated\n+ * classes, providing a subset of the functionality of class {@link\n+ * VarHandle} that should be used instead.  This class is designed for\n+ * use in atomic data structures in which several fields of the same\n+ * node are independently subject to atomic updates.\n","filename":"src\/java.base\/share\/classes\/java\/util\/concurrent\/atomic\/AtomicLongFieldUpdater.java","additions":5,"deletions":4,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -49,5 +49,6 @@\n- * designated {@code volatile} reference fields of designated\n- * classes.  This class is designed for use in atomic data structures\n- * in which several reference fields of the same node are\n- * independently subject to atomic updates. For example, a tree node\n- * might be declared as\n+ * designated non-static {@code volatile} reference fields of\n+ * designated classes, providing a subset of the functionality of\n+ * class {@link VarHandle} that should be used instead.  This class\n+ * may be used in atomic data structures in which several reference\n+ * fields of the same node are independently subject to atomic\n+ * updates. For example, a tree node might be declared as\n@@ -71,0 +72,20 @@\n+ * However, it is preferable to use {@link VarHandle}:\n+ * <pre> {@code\n+ * import java.lang.invoke.VarHandle;\n+ * import java.lang.invoke.MethodHandles;\n+ * class Node {\n+ *  private volatile Node left, right;\n+ *  private static final VarHandle LEFT, RIGHT;\n+ *  Node getLeft() { return left; }\n+ *  boolean compareAndSetLeft(Node expect, Node update) {\n+ *    return LEFT.compareAndSet(this, expect, update);\n+ *  }\n+ *  \/\/ ... and so on\n+ *  static { try {\n+ *    MethodHandles.Lookup l = MethodHandles.lookup();\n+ *    LEFT  = l.findVarHandle(Node.class, \"left\", Node.class);\n+ *    RIGHT = l.findVarHandle(Node.class, \"right\", Node.class);\n+ *   } catch (ReflectiveOperationException e) {\n+ *     throw new ExceptionInInitializerError(e);\n+ * }}}}<\/pre>\n+ *\n","filename":"src\/java.base\/share\/classes\/java\/util\/concurrent\/atomic\/AtomicReferenceFieldUpdater.java","additions":26,"deletions":5,"binary":false,"changes":31,"status":"modified"},{"patch":"@@ -100,0 +100,4 @@\n+ * <p>Note: If you do not rely on reentrancy, you may find that {@link\n+ * StampedLock} offers better performance, as in: {@code ReadWriteLock\n+ * lock = new StampedLock().asReadWriteLock()}.\n+ *\n@@ -737,1 +741,1 @@\n-         * another thread and returns immediately.\n+         * any thread and returns immediately.\n@@ -739,3 +743,5 @@\n-         * <p>If the write lock is held by another thread then\n-         * the current thread becomes disabled for thread scheduling\n-         * purposes and lies dormant until the read lock has been acquired.\n+         * <p>If the write lock is held by any thread or the fairness\n+         * policy prohibits acquisition of the read lock at this time,\n+         * then the current thread becomes disabled for thread\n+         * scheduling purposes and lies dormant until the read lock\n+         * has been acquired.\n@@ -752,1 +758,1 @@\n-         * by another thread and returns immediately.\n+         * by any thread and returns immediately.\n@@ -754,3 +760,5 @@\n-         * <p>If the write lock is held by another thread then the\n-         * current thread becomes disabled for thread scheduling\n-         * purposes and lies dormant until one of two things happens:\n+         * <p>If the write lock is held by any thread or the fairness\n+         * policy prohibits acquisition of the read lock at this time,\n+         * then the current thread becomes disabled for thread\n+         * scheduling purposes and lies dormant until one of two\n+         * things happens:\n@@ -797,1 +805,1 @@\n-         * another thread and returns immediately with the value\n+         * any thread and returns immediately with the value\n@@ -809,1 +817,1 @@\n-         * <p>If the write lock is held by another thread then\n+         * <p>If the write lock is held by any thread then\n","filename":"src\/java.base\/share\/classes\/java\/util\/concurrent\/locks\/ReentrantReadWriteLock.java","additions":18,"deletions":10,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -225,1 +225,3 @@\n- * <\/ul>\n+ * <li> These properties extend to other iteration-based\n+ * operations. In particular, {@link Object#equals} is almost never\n+ * useful unless both collections are known to be quiescent.  <\/ul>\n","filename":"src\/java.base\/share\/classes\/java\/util\/concurrent\/package-info.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,1 +31,1 @@\n- * System Property access for internal use only.\n+ * System Property access for `java.base` module internal use only.\n@@ -51,1 +51,3 @@\n-    private static final String JAVA_PROPERTIES_DATE;\n+    private static final String STDIN_ENCODING;\n+    private static final String STDERR_ENCODING;\n+    private static final String STDOUT_ENCODING;\n@@ -53,0 +55,1 @@\n+    private static final String JAVA_PROPERTIES_DATE;\n@@ -89,1 +92,3 @@\n-        JAVA_PROPERTIES_DATE = getProperty(props, \"java.properties.date\", null);\n+        STDIN_ENCODING = getProperty(props, \"stdin.encoding\");\n+        STDERR_ENCODING = getProperty(props, \"stderr.encoding\");\n+        STDOUT_ENCODING = getProperty(props, \"stdout.encoding\");\n@@ -91,0 +96,1 @@\n+        JAVA_PROPERTIES_DATE = getProperty(props, \"java.properties.date\", null);\n@@ -221,1 +227,1 @@\n-     * {@return the {@code java.properties.date} system property}\n+     * {@return the {@code stdin.encoding} system property}\n@@ -223,2 +229,16 @@\n-    public static String javaPropertiesDate() {\n-        return JAVA_PROPERTIES_DATE;\n+    public static String stdinEncoding() {\n+        return STDIN_ENCODING;\n+    }\n+\n+    \/**\n+     * {@return the {@code stderr.encoding} system property}\n+     *\/\n+    public static String stderrEncoding() {\n+        return STDERR_ENCODING;\n+    }\n+\n+    \/**\n+     * {@return the {@code stdout.encoding} system property}\n+     *\/\n+    public static String stdoutEncoding() {\n+        return STDOUT_ENCODING;\n@@ -234,0 +254,7 @@\n+    \/**\n+     * {@return the {@code java.properties.date} system property}\n+     *\/\n+    public static String javaPropertiesDate() {\n+        return JAVA_PROPERTIES_DATE;\n+    }\n+\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/util\/StaticProperty.java","additions":34,"deletions":7,"binary":false,"changes":41,"status":"modified"},{"patch":"@@ -1,40 +0,0 @@\n-\/*\n- * Copyright (c) 2009, 2011, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.  Oracle designates this\n- * particular file as subject to the \"Classpath\" exception as provided\n- * by Oracle in the LICENSE file that accompanied this code.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-\n-package sun.invoke.empty;\n-\n-\/**\n- * An empty class in an empty package.\n- * Used as a proxy for unprivileged code, since making access checks\n- * against it will only succeed against public methods in public types.\n- * <p>\n- * This class also stands (internally to sun.invoke) for the type of a\n- * value that cannot be produced, because the expression of this type\n- * always returns abnormally.  (Cf. Nothing in the closures proposal.)\n- * @author jrose\n- *\/\n-public class Empty {\n-    private Empty() { throw new InternalError(); }\n-}\n","filename":"src\/java.base\/share\/classes\/sun\/invoke\/empty\/Empty.java","additions":0,"deletions":40,"binary":false,"changes":40,"status":"deleted"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,1 +29,0 @@\n-import sun.invoke.empty.Empty;\n@@ -96,2 +95,0 @@\n-        \/\/ Locally known null-only class:\n-        if (type == Empty.class)  return true;\n","filename":"src\/java.base\/share\/classes\/sun\/invoke\/util\/VerifyType.java","additions":1,"deletions":4,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2007, 2024, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2007, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,2 +37,2 @@\n-java.launcher.X.usage=\\n    -Xbatch           Deaktiviert die Hintergrundkompilierung\\n    -Xbootclasspath\/a:<durch {0} getrennte Verzeichnisse und ZIP-\/JAR-Dateien>\\n                      An das Ende des Bootstrap Classpaths anhängen\\n    -Xcheck:jni       Führt zusätzliche Prüfungen für JNI-Funktionen aus\\n    -Xcomp            Erzwingt die Kompilierung von Methoden beim ersten Aufruf\\n    -Xdebug           Führt keine Aktion aus. Ist veraltet und wird in einem zukünftigen Release entfernt.\\n    -Xdiag            Zeigt zusätzliche Diagnosemeldungen an\\n    -Xint             Nur Ausführung im interpretierten Modus\\n    -Xinternalversion\\n                      Zeigt detailliertere JVM-Versionsinformationen an als die\\n                      Option -version\\n    -Xlog:<Optionen>      Konfiguriert oder aktiviert Logging mit dem einheitlichen Java Virtual\\n                      Machine-(JVM-)Logging-Framework. Verwenden Sie -Xlog:help\\n                      für weitere Einzelheiten.\\n    -Xloggc:<Datei>    Protokolliert den GC-Status in einer Datei mit Zeitstempeln.\\n                      Diese Option ist veraltet und kann in einem\\n                      zukünftigen Release entfernt werden. Wird durch -Xlog:gc:<Datei> ersetzt.\\n    -Xmixed           Ausführung im gemischten Modus (Standard)\\n    -Xmn<Größe>        Legt die anfängliche und maximale Größe (in Byte) des Heaps\\n                      für die Young Generation (Nursery) fest\\n    -Xms<Größe>        Legt die anfängliche Java-Heap-Größe fest\\n    -Xmx<Größe>        Legt die maximale Java-Heap-Größe fest\\n    -Xnoclassgc       Deaktiviert die Klassen-Garbage Collection\\n    -Xrs               Reduziert die Verwendung von BS-Signalen durch Java\/VM (siehe Dokumentation)\\n    -Xshare:auto      Verwendet freigegebene Klassendaten, wenn möglich (Standard)\\n    -Xshare:off       Versucht nicht, freigegebene Klassendaten zu verwenden\\n    -Xshare:on        Erfordert die Verwendung freigegebener Klassendaten, verläuft sonst nicht erfolgreich.\\n                      Diese Testoption kann zeitweise zu\\n                      Fehlern führen. Sie darf nicht in Produktionsumgebungen verwendet werden.\\n    -XshowSettings    Zeigt alle Einstellungen an und fährt fort\\n    -XshowSettings:all\\n                      Zeigt alle Einstellungen als Verbose-Ausgabe an und fährt fort\\n    -XshowSettings:locale\\n                      Zeigt alle gebietsschemabezogenen Einstellungen an und fährt fort\\n    -XshowSettings:properties\\n                      Zeigt alle Eigenschaftseinstellungen an und fährt fort\\n    -XshowSettings:vm\\n                      Zeigt alle VM-bezogenen Einstellungen an und fährt fort\\n    -XshowSettings:security\\n                      Zeigt alle Sicherheitseinstellungen an und fährt fort\\n    -XshowSettings:security:all\\n                      Zeigt alle Sicherheitseinstellungen an und fährt fort\\n    -XshowSettings:security:properties\\n                      Zeigt Sicherheitseigenschaften an und fährt fort\\n    -XshowSettings:security:providers\\n                      Zeigt statische Sicherheitsprovidereinstellungen an und fährt fort\\n    -XshowSettings:security:tls\\n                      Zeigt TLS-bezogene Sicherheitseinstellungen an und fährt fort\\n    -XshowSettings:system\\n                      (Nur Linux) Zeigt die Konfiguration des Hostsystems oder Containers an\\n                      und fährt fort\\n    -Xss<Größe>        Legt die Stackgröße des Java-Threads fest\\n                      Die tatsächliche Größe kann auf ein Vielfaches der\\n                      Systemseitengröße aufgerundet werden, wenn für das Betriebssystem erforderlich.\\n    -Xverify          Legt den Modus der Bytecodeverifizierung fest\\n                  \\\n-    Beachten Sie, dass die Option -Xverify:none veraltet ist und\\n                      in einem zukünftigen Release entfernt werden kann.\\n    --add-reads <Modul>=<Zielmodul>(,<Zielmodul>)*\\n                      Aktualisiert <Modul>, damit <Zielmodul> gelesen wird, ungeachtet\\n                      der Moduldeklaration. \\n                      <Zielmodul> kann ALL-UNNAMED sein, um alle unbenannten\\n                      Module zu lesen.\\n    --add-exports <Modul>\/<Package>=<Zielmodul>(,<Zielmodul>)*\\n                      Aktualisiert <Modul>, um <Package> in <Zielmodul> zu exportieren,\\n                      ungeachtet der Moduldeklaration.\\n                      <Zielmodul> kann ALL-UNNAMED sein, um in alle\\n                      unbenannten Module zu exportieren.\\n    --add-opens <Modul>\/<Package>=<Zielmodul>(,<Zielmodul>)*\\n                      Aktualisiert <Modul>, um <Package> in\\n                      <Zielmodul> zu öffnen, ungeachtet der Moduldeklaration.\\n    --limit-modules <Modulname>[,<Modulname>...]\\n                      Grenzt die Gesamtmenge der beobachtbaren Module ein\\n    --patch-module <Modul>=<Datei>({0}<Datei>)*\\n                      Überschreibt oder erweitert ein Modul mit Klassen und Ressourcen\\n                      in JAR-Dateien oder Verzeichnissen.\\n    --source <Version>\\n                      Legt die Version der Quelle im Quelldateimodus fest.\\n    --finalization=<Wert>\\n                      Steuert, ob die JVM Objekte finalisiert.\\n                      Dabei ist <Wert> entweder \"enabled\" oder \"disabled\".\\n                      Die Finalisierung ist standardmäßig aktiviert.\\n    --sun-misc-unsafe-memory-access=<value>\\n                      Verwendung der nicht unterstützten API sun.misc.Unsafe zulassen oder verweigern\\n                      <value> ist \"allow\", \"warn\", \"debug\" oder \"deny\".\\n                      Der Standardwert ist \"warn\".\\n\\nDiese zusätzlichen Optionen können jederzeit ohne vorherige Ankündigung geändert werden.\\n\n+java.launcher.X.usage=\\n    -Xbatch           Deaktiviert die Hintergrundkompilierung\\n    -Xbootclasspath\/a:<durch {0} getrennte Verzeichnisse und ZIP-\/JAR-Dateien>\\n                      An das Ende des Bootstrap Classpaths anhängen\\n    -Xcheck:jni       Führt zusätzliche Prüfungen für JNI-Funktionen aus\\n    -Xcomp            Erzwingt die Kompilierung von Methoden beim ersten Aufruf\\n    -Xdebug           Führt keine Aktion aus. Ist veraltet und wird in einem zukünftigen Release entfernt.\\n    -Xdiag            Zeigt zusätzliche Diagnosemeldungen an\\n    -Xint             Nur Ausführung im interpretierten Modus\\n    -Xinternalversion\\n                      Zeigt detailliertere JVM-Versionsinformationen an als die\\n                      Option -version\\n    -Xlog:<Optionen>      Konfiguriert oder aktiviert Logging mit dem einheitlichen Java Virtual\\n                      Machine-(JVM-)Logging-Framework. Verwenden Sie -Xlog:help\\n                      für weitere Einzelheiten.\\n    -Xloggc:<Datei>    Protokolliert den GC-Status in einer Datei mit Zeitstempeln.\\n                      Diese Option ist veraltet und kann in einem\\n                      zukünftigen Release entfernt werden. Wird durch -Xlog:gc:<Datei> ersetzt.\\n    -Xmixed           Ausführung im gemischten Modus (Standard)\\n    -Xmn<Größe>        Legt die anfängliche und maximale Größe (in Byte) des Heaps\\n                      für die Young Generation (Nursery) fest\\n    -Xms<size>        Legt die minimale und die anfängliche Java-Heap-Größe fest\\n    -Xmx<Größe>        Legt die maximale Java-Heap-Größe fest\\n    -Xnoclassgc       Deaktiviert die Klassen-Garbage Collection\\n    -Xrs               Reduziert die Verwendung von BS-Signalen durch Java\/VM (siehe Dokumentation)\\n    -Xshare:auto      Verwendet freigegebene Klassendaten, wenn möglich (Standard)\\n    -Xshare:off       Versucht nicht, freigegebene Klassendaten zu verwenden\\n    -Xshare:on        Erfordert die Verwendung freigegebener Klassendaten, verläuft sonst nicht erfolgreich.\\n                      Diese Testoption kann zeitweise zu\\n                      Fehlern führen. Sie darf nicht in Produktionsumgebungen verwendet werden.\\n    -XshowSettings    Zeigt alle Einstellungen an und fährt fort\\n    -XshowSettings:all\\n                      Zeigt alle Einstellungen als Verbose-Ausgabe an und fährt fort\\n    -XshowSettings:locale\\n                      Zeigt alle gebietsschemabezogenen Einstellungen an und fährt fort\\n    -XshowSettings:properties\\n                      Zeigt alle Eigenschaftseinstellungen an und fährt fort\\n    -XshowSettings:vm\\n                      Zeigt alle VM-bezogenen Einstellungen an und fährt fort\\n    -XshowSettings:security\\n                      Zeigt alle Sicherheitseinstellungen an und fährt fort\\n    -XshowSettings:security:all\\n                      Zeigt alle Sicherheitseinstellungen an und fährt fort\\n    -XshowSettings:security:properties\\n                      Zeigt Sicherheitseigenschaften an und fährt fort\\n    -XshowSettings:security:providers\\n                      Zeigt statische Sicherheitsprovidereinstellungen an und fährt fort\\n    -XshowSettings:security:tls\\n                      Zeigt TLS-bezogene Sicherheitseinstellungen an und fährt fort\\n    -XshowSettings:system\\n                      (Nur Linux) Zeigt die Konfiguration des Hostsystems oder Containers an\\n                      und fährt fort\\n    -Xss<Größe>        Legt die Stackgröße des Java-Threads fest\\n                      Die tatsächliche Größe kann auf ein Vielfaches der\\n                      Systemseitengröße aufgerundet werden, wenn für das Betriebssystem erforderlich.\\n    -Xverify          Legt den Modus der Bytecodeverifizierung fest\\n            \\\n+          Beachten Sie, dass die Option -Xverify:none veraltet ist und\\n                      in einem zukünftigen Release entfernt werden kann.\\n    --add-reads <Modul>=<Zielmodul>(,<Zielmodul>)*\\n                      Aktualisiert <Modul>, damit <Zielmodul> gelesen wird, ungeachtet\\n                      der Moduldeklaration. \\n                      <Zielmodul> kann ALL-UNNAMED sein, um alle unbenannten\\n                      Module zu lesen.\\n    --add-exports <Modul>\/<Package>=<Zielmodul>(,<Zielmodul>)*\\n                      Aktualisiert <Modul>, um <Package> in <Zielmodul> zu exportieren,\\n                      ungeachtet der Moduldeklaration.\\n                      <Zielmodul> kann ALL-UNNAMED sein, um in alle\\n                      unbenannten Module zu exportieren.\\n    --add-opens <Modul>\/<Package>=<Zielmodul>(,<Zielmodul>)*\\n                      Aktualisiert <Modul>, um <Package> in\\n                      <Zielmodul> zu öffnen, ungeachtet der Moduldeklaration.\\n    --limit-modules <Modulname>[,<Modulname>...]\\n                      Grenzt die Gesamtmenge der beobachtbaren Module ein\\n    --patch-module <Modul>=<Datei>({0}<Datei>)*\\n                      Überschreibt oder erweitert ein Modul mit Klassen und Ressourcen\\n                      in JAR-Dateien oder Verzeichnissen.\\n    --source <Version>\\n                      Legt die Version der Quelle im Quelldateimodus fest.\\n    --finalization=<Wert>\\n                      Steuert, ob die JVM Objekte finalisiert.\\n                      Dabei ist <Wert> entweder \"enabled\" oder \"disabled\".\\n                      Die Finalisierung ist standardmäßig aktiviert.\\n    --sun-misc-unsafe-memory-access=<value>\\n                      Verwendung der nicht unterstützten API sun.misc.Unsafe zulassen oder verweigern\\n                      <value> ist \"allow\", \"warn\", \"debug\" oder \"deny\".\\n                      Der Standardwert ist \"warn\".\\n\\nDiese zusätzlichen Optionen können jederzeit ohne vorherige Ankündigung geändert werden.\\n\n@@ -54,0 +54,1 @@\n+java.launcher.cls.error8=Fehler: Abstrakte Klasse {0} kann nicht instanziiert werden.\\nVerwenden Sie eine konkrete Klasse\n","filename":"src\/java.base\/share\/classes\/sun\/launcher\/resources\/launcher_de.properties","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2007, 2024, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2007, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -38,1 +38,1 @@\n-java.launcher.X.usage=\\n    -Xbatch           バックグラウンド・コンパイルを無効にします\\n    -Xbootclasspath\/a:<directories and zip\/jar files separated by {0}>\\n                      ブートストラップ・クラス・パスの最後に追加します\\n    -Xcheck:jni       JNI関数に対する追加のチェックを実行します\\n    -Xcomp            初回呼出し時にメソッドのコンパイルを強制します\\n    -Xdebug           何も実行されません。将来のリリースで削除されるため、非推奨になりました。\\n    -Xdiag            追加の診断メッセージを表示します\\n    -Xint             インタプリタ・モードの実行のみ\\n    -Xinternalversion\\n                      -versionオプションより詳細なJVMバージョン情報を\\n                      表示します\\n    -Xlog:<opts>      Java Virtual Machine (JVM)統合ロギング・フレームワークでの\\n                      ロギングを構成または有効化します。詳細は、-Xlog:helpを\\n                      使用してください。\\n    -Xloggc:<file>    タイムスタンプが付いたファイルにGCステータスのログを記録します\\n                      このオプションは非推奨であり、将来のリリースで削除される\\n                      可能性があります。-Xlog:gc:<file>で置換されています。\\n    -Xmixed           混合モードの実行(デフォルト)\\n    -Xmn<size>        若い世代(ナーサリ)のヒープの初期サイズおよび最大サイズ\\n                      (バイト単位)を設定します\\n    -Xms<size>        Javaの初期ヒープ・サイズを設定します\\n    -Xmx<size>        Javaの最大ヒープ・サイズを設定します\\n    -Xnoclassgc       クラスのガベージ・コレクションを無効にします\\n    -Xrs              Java\/VMによるOSシグナルの使用を削減します(ドキュメントを参照)\\n    -Xshare:auto      可能であれば共有クラス・データを使用します(デフォルト)\\n    -Xshare:off       共有クラス・データの使用を試みません\\n    -Xshare:on        共有クラス・データの使用を必須にし、できなければ失敗します。\\n                      \\\n+java.launcher.X.usage=\\n    -Xbatch           バックグラウンド・コンパイルを無効にします\\n    -Xbootclasspath\/a:<directories and zip\/jar files separated by {0}>\\n                      ブートストラップ・クラス・パスの最後に追加します\\n    -Xcheck:jni       JNI関数に対する追加のチェックを実行します\\n    -Xcomp            初回呼出し時にメソッドのコンパイルを強制します\\n    -Xdebug           何も実行されません。将来のリリースで削除されるため、非推奨になりました。\\n    -Xdiag            追加の診断メッセージを表示します\\n    -Xint             インタプリタ・モードの実行のみ\\n    -Xinternalversion\\n                      -versionオプションより詳細なJVMバージョン情報を\\n                      表示します\\n    -Xlog:<opts>      Java Virtual Machine (JVM)統合ロギング・フレームワークでの\\n                      ロギングを構成または有効化します。詳細は、-Xlog:helpを\\n                      使用してください。\\n    -Xloggc:<file>    タイムスタンプが付いたファイルにGCステータスのログを記録します\\n                      このオプションは非推奨であり、将来のリリースで削除される\\n                      可能性があります。-Xlog:gc:<file>で置換されています。\\n    -Xmixed           混合モードの実行(デフォルト)\\n    -Xmn<size>        若い世代(ナーサリ)のヒープの初期サイズおよび最大サイズ\\n                      (バイト単位)を設定します\\n    -Xms<size>        Javaの最小および初期のヒープ・サイズを設定します\\n    -Xmx<size>        Javaの最大ヒープ・サイズを設定します\\n    -Xnoclassgc       クラスのガベージ・コレクションを無効にします\\n    -Xrs              Java\/VMによるOSシグナルの使用を削減します(ドキュメントを参照)\\n    -Xshare:auto      可能であれば共有クラス・データを使用します(デフォルト)\\n    -Xshare:off       共有クラス・データの使用を試みません\\n    -Xshare:on        共有クラス・データの使用を必須にし、できなければ失敗します。\\n                      \\\n@@ -56,0 +56,1 @@\n+java.launcher.cls.error8=エラー: 抽象クラス{0}はインスタンス化できません\\n具象クラスを使用してください\n","filename":"src\/java.base\/share\/classes\/sun\/launcher\/resources\/launcher_ja.properties","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2007, 2024, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2007, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,1 +37,1 @@\n-java.launcher.X.usage=\\n    -Xbatch           禁用后台编译\\n    -Xbootclasspath\/a:<以 {0} 分隔的目录和 zip\/jar 文件>\\n                      附加在引导类路径末尾\\n    -Xcheck:jni       对 JNI 函数执行其他检查\\n    -Xcomp            强制在首次调用时编译方法\\n    -Xdebug           不执行任何操作；已过时，将在未来发行版中删除。\\n    -Xdiag            显示附加诊断消息\\n    -Xint             仅解释模式执行\\n    -Xinternalversion\\n                      显示比 -version 选项更详细的\\n                      JVM 版本信息\\n    -Xlog:<opts>      配置或启用采用 Java 虚拟\\n                      机 (Java Virtual Machine, JVM) 统一记录框架进行事件记录。使用 -Xlog:help\\n                      可了解详细信息。\\n    -Xloggc:<file>    将 GC 状态记录在文件中（带时间戳）。\\n                      此选项已过时，可能会在\\n                      将来的发行版中删除。它将替换为 -Xlog:gc:<file>。\\n    -Xmixed           混合模式执行（默认值）\\n    -Xmn<size>        为年轻代（新生代）设置初始和最大堆大小\\n                      （以字节为单位）\\n    -Xms<size>        设置初始 Java 堆大小\\n    -Xmx<size>        设置最大 Java 堆大小\\n    -Xnoclassgc       禁用类垃圾收集\\n    -Xrs              减少 Java\/VM 对操作系统信号的使用（请参见文档）\\n    -Xshare:auto      在可能的情况下使用共享类数据（默认值）\\n    -Xshare:off       不尝试使用共享类数据\\n    -Xshare:on        要求使用共享类数据，否则将失败。\\n                      这是一个测试选项，可能导致间歇性\\n                      故障。不应在生产环境中使用它。\\n    -XshowSettings    显示所有设置并继续\\n    -XshowSettings:all\\n                      详细显示所有设置并继续\\n    -XshowSettings:locale\\n                      显示所有与区域设置相关的设置并继续\\n    -XshowSettings:properties\\n                      显示所有属性设置并继续\\n    -XshowSettings:vm\\n                      显示所有与 vm 相关的设置并继续\\n    -XshowSettings:security\\n                      显示所有安全设置并继续\\n    -XshowSettings:security:all\\n                      显示所有安全设置并继续\\n    -XshowSettings:security:properties\\n                      显示安全属性并继续\\n    -XshowSettings:security:providers\\n                      显示静态安全提供方设置并继续\\n    -XshowSettings:security:tls\\n                      显示与 TLS \\\n+java.launcher.X.usage=\\n    -Xbatch           禁用后台编译\\n    -Xbootclasspath\/a:<以 {0} 分隔的目录和 zip\/jar 文件>\\n                      附加在引导类路径末尾\\n    -Xcheck:jni       对 JNI 函数执行其他检查\\n    -Xcomp            强制在首次调用时编译方法\\n    -Xdebug           不执行任何操作；已过时，将在未来发行版中删除。\\n    -Xdiag            显示附加诊断消息\\n    -Xint             仅解释模式执行\\n    -Xinternalversion\\n                      显示比 -version 选项更详细的\\n                      JVM 版本信息\\n    -Xlog:<opts>      配置或启用采用 Java 虚拟\\n                      机 (Java Virtual Machine, JVM) 统一记录框架进行事件记录。使用 -Xlog:help\\n                      可了解详细信息。\\n    -Xloggc:<file>    将 GC 状态记录在文件中（带时间戳）。\\n                      此选项已过时，可能会在\\n                      将来的发行版中删除。它将替换为 -Xlog:gc:<file>。\\n    -Xmixed           混合模式执行（默认值）\\n    -Xmn<size>        为年轻代（新生代）设置初始和最大堆大小\\n                      （以字节为单位）\\n    -Xms<size>        设置最小和初始 Java 堆大小\\n    -Xmx<size>        设置最大 Java 堆大小\\n    -Xnoclassgc       禁用类垃圾收集\\n    -Xrs              减少 Java\/VM 对操作系统信号的使用（请参见文档）\\n    -Xshare:auto      在可能的情况下使用共享类数据（默认值）\\n    -Xshare:off       不尝试使用共享类数据\\n    -Xshare:on        要求使用共享类数据，否则将失败。\\n                      这是一个测试选项，可能导致间歇性\\n                      故障。不应在生产环境中使用它。\\n    -XshowSettings    显示所有设置并继续\\n    -XshowSettings:all\\n                      详细显示所有设置并继续\\n    -XshowSettings:locale\\n                      显示所有与区域设置相关的设置并继续\\n    -XshowSettings:properties\\n                      显示所有属性设置并继续\\n    -XshowSettings:vm\\n                      显示所有与 vm 相关的设置并继续\\n    -XshowSettings:security\\n                      显示所有安全设置并继续\\n    -XshowSettings:security:all\\n                      显示所有安全设置并继续\\n    -XshowSettings:security:properties\\n                      显示安全属性并继续\\n    -XshowSettings:security:providers\\n                      显示静态安全提供方设置并继续\\n    -XshowSettings:security:tls\\n                      显示与 TLS \\\n@@ -54,0 +54,1 @@\n+java.launcher.cls.error8=错误：无法实例化抽象类 {0}\\n请使用具体类\n","filename":"src\/java.base\/share\/classes\/sun\/launcher\/resources\/launcher_zh_CN.properties","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,0 +31,1 @@\n+import java.io.UncheckedIOException;\n@@ -34,1 +35,0 @@\n-import jdk.internal.jimage.ImageLocation;\n@@ -36,0 +36,1 @@\n+import jdk.internal.jimage.ImageReader.Node;\n@@ -38,1 +39,0 @@\n-import jdk.internal.loader.Resource;\n@@ -44,1 +44,3 @@\n- * contained in the runtime image.\n+ * contained in the runtime image. See section \"New URI scheme for naming stored\n+ * modules, classes, and resources\" in <a href=\"https:\/\/openjdk.org\/jeps\/220\">\n+ * JEP 220<\/a>.\n@@ -48,2 +50,2 @@\n-    \/\/ ImageReader to access resources in jimage\n-    private static final ImageReader reader = ImageReaderFactory.getImageReader();\n+    \/\/ ImageReader to access resources in jimage.\n+    private static final ImageReader READER = ImageReaderFactory.getImageReader();\n@@ -51,1 +53,3 @@\n-    \/\/ the module and resource name in the URL\n+    \/\/ The module and resource name in the URL (i.e. \"jrt:\/[$MODULE[\/$PATH]]\").\n+    \/\/\n+    \/\/ The module name is not percent-decoded, and can be empty.\n@@ -53,1 +57,2 @@\n-    private final String name;\n+    \/\/ The resource name permits UTF-8 percent encoding of non-ASCII characters.\n+    private final String path;\n@@ -55,2 +60,2 @@\n-    \/\/ the Resource when connected\n-    private volatile Resource resource;\n+    \/\/ The resource node (non-null when connected).\n+    private Node resourceNode;\n@@ -60,2 +65,2 @@\n-        String path = url.getPath();\n-        if (path.isEmpty() || path.charAt(0) != '\/')\n+        String urlPath = url.getPath();\n+        if (urlPath.isEmpty() || urlPath.charAt(0) != '\/') {\n@@ -63,3 +68,7 @@\n-        if (path.length() == 1) {\n-            this.module = null;\n-            this.name = null;\n+        }\n+        int pathSep = urlPath.indexOf('\/', 1);\n+        if (pathSep == -1) {\n+            \/\/ No trailing resource path. This can never \"connect\" or return a\n+            \/\/ resource (see JEP 220 for details).\n+            this.module = urlPath.substring(1);\n+            this.path = null;\n@@ -67,8 +76,2 @@\n-            int pos = path.indexOf('\/', 1);\n-            if (pos == -1) {\n-                this.module = path.substring(1);\n-                this.name = null;\n-            } else {\n-                this.module = path.substring(1, pos);\n-                this.name = ParseUtil.decode(path.substring(pos+1));\n-            }\n+            this.module = urlPath.substring(1, pathSep);\n+            this.path = percentDecode(urlPath.substring(pathSep + 1));\n@@ -79,2 +82,2 @@\n-     * Finds a resource in a module, returning {@code null} if the resource\n-     * is not found.\n+     * Finds and caches the resource node associated with this URL and marks the\n+     * connection as \"connected\".\n@@ -82,29 +85,4 @@\n-    private static Resource findResource(String module, String name) {\n-        if (reader != null) {\n-            URL url = toJrtURL(module, name);\n-            ImageLocation location = reader.findLocation(module, name);\n-            if (location != null) {\n-                return new Resource() {\n-                    @Override\n-                    public String getName() {\n-                        return name;\n-                    }\n-                    @Override\n-                    public URL getURL() {\n-                        return url;\n-                    }\n-                    @Override\n-                    public URL getCodeSourceURL() {\n-                        return toJrtURL(module);\n-                    }\n-                    @Override\n-                    public InputStream getInputStream() throws IOException {\n-                        byte[] resource = reader.getResource(location);\n-                        return new ByteArrayInputStream(resource);\n-                    }\n-                    @Override\n-                    public int getContentLength() {\n-                        long size = location.getUncompressedSize();\n-                        return (size > Integer.MAX_VALUE) ? -1 : (int) size;\n-                    }\n-                };\n+    private synchronized Node connectResourceNode() throws IOException {\n+        if (resourceNode == null) {\n+            if (module.isEmpty() || path == null) {\n+                throw new IOException(\"cannot connect to jrt:\/\" + module);\n@@ -112,0 +90,6 @@\n+            Node node = READER.findNode(\"\/modules\/\" + module + \"\/\" + path);\n+            if (node == null || !node.isResource()) {\n+                throw new IOException(module + \"\/\" + path + \" not found\");\n+            }\n+            this.resourceNode = node;\n+            super.connected = true;\n@@ -113,1 +97,1 @@\n-        return null;\n+        return resourceNode;\n@@ -117,11 +101,2 @@\n-    public synchronized void connect() throws IOException {\n-        if (!connected) {\n-            if (name == null) {\n-                String s = (module == null) ? \"\" : module;\n-                throw new IOException(\"cannot connect to jrt:\/\" + s);\n-            }\n-            resource = findResource(module, name);\n-            if (resource == null)\n-                throw new IOException(module + \"\/\" + name + \" not found\");\n-            connected = true;\n-        }\n+    public void connect() throws IOException {\n+        connectResourceNode();\n@@ -132,2 +107,1 @@\n-        connect();\n-        return resource.getInputStream();\n+        return new ByteArrayInputStream(READER.getResource(connectResourceNode()));\n@@ -139,2 +113,1 @@\n-            connect();\n-            return resource.getContentLength();\n+            return connectResourceNode().size();\n@@ -152,17 +125,3 @@\n-    \/**\n-     * Returns a jrt URL for the given module and resource name.\n-     *\/\n-    @SuppressWarnings(\"deprecation\")\n-    private static URL toJrtURL(String module, String name) {\n-        try {\n-            return new URL(\"jrt:\/\" + module + \"\/\" + name);\n-        } catch (MalformedURLException e) {\n-            throw new InternalError(e);\n-        }\n-    }\n-\n-    \/**\n-     * Returns a jrt URL for the given module.\n-     *\/\n-    @SuppressWarnings(\"deprecation\")\n-    private static URL toJrtURL(String module) {\n+    \/\/ Perform percent decoding of the resource name\/path from the URL.\n+    private static String percentDecode(String path) throws MalformedURLException {\n+        \/\/ Any additional special case decoding logic should go here.\n@@ -170,3 +129,3 @@\n-            return new URL(\"jrt:\/\" + module);\n-        } catch (MalformedURLException e) {\n-            throw new InternalError(e);\n+            return ParseUtil.decode(path);\n+        } catch (IllegalArgumentException e) {\n+            throw new MalformedURLException(e.getMessage());\n","filename":"src\/java.base\/share\/classes\/sun\/net\/www\/protocol\/jrt\/JavaRuntimeURLConnection.java","additions":49,"deletions":90,"binary":false,"changes":139,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -190,1 +190,1 @@\n-                if (((cookieVersion >> 24) & 0xFF) == cookie[0]) {\n+                if ((byte) ((cookieVersion >> 24) & 0xFF) == cookie[0]) {\n","filename":"src\/java.base\/share\/classes\/sun\/security\/ssl\/HelloCookieManager.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -379,3 +379,4 @@\n-                try (FileInputStream fis =\n-                        new FileInputStream(descriptor.storeFile)) {\n-                    ks.load(fis, password);\n+                try (BufferedInputStream bis =\n+                        new BufferedInputStream(\n+                                new FileInputStream(descriptor.storeFile))) {\n+                    ks.load(bis, password);\n","filename":"src\/java.base\/share\/classes\/sun\/security\/ssl\/TrustStoreManager.java","additions":5,"deletions":4,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -63,0 +63,2 @@\n+import jdk.internal.util.StaticProperty;\n+\n@@ -3552,1 +3554,1 @@\n-                ? new InputStreamReader(in, Charset.forName(System.getProperty(\"stdin.encoding\"), Charset.defaultCharset()))\n+                ? new InputStreamReader(in, Charset.forName(StaticProperty.stdinEncoding(), Charset.defaultCharset()))\n","filename":"src\/java.base\/share\/classes\/sun\/security\/tools\/keytool\/Main.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -30,1 +30,1 @@\n-.OPTION.=\\u0020[OPTION]...\n+.OPTION.=\\ [OPTION]...\n@@ -173,1 +173,1 @@\n-.Storing.ksfname.=[{0} wird gesichert]\n+.Storing.ksfname.=[{0} wird gespeichert]\n@@ -181,3 +181,3 @@\n-size.bit.alg=%1$d-Bit %2$s\n-Generating.full.keyAlgName.key.pair.and.self.signed.certificate.sigAlgName.with.a.validity.of.days.for=Schlüsselpaar {0} und selbstsigniertes Zertifikat ({1}) werden mit einer Gültigkeit von {2} Tagen generiert\\n\\tfür: {3}\n-Generating.full.keyAlgName.key.pair.and.a.certificate.sigAlgName.issued.by.signerAlias.with.a.validity.of.days.for=Schlüsselpaar {0} und Zertifikat ({1}) werden generiert, das von <{2}> mit einer Gültigkeit von {3} Tagen ausgestellt wurde\\n\\tfür: {4}\n+size.bit.alg=%1$d-Bit-%2$s\n+Generating.full.keyAlgName.key.pair.and.self.signed.certificate.sigAlgName.with.a.validity.of.days.for=Generieren von {0}-Schlüsselpaar und selbstsigniertem Zertifikat ({1}) mit einer Gültigkeit von {2} Tagen\\n\\tfür: {3}\n+Generating.full.keyAlgName.key.pair.and.a.certificate.sigAlgName.issued.by.signerAlias.with.a.validity.of.days.for=Generieren von {0}-Schlüsselpaar und einem von <{2}> ausgestellten Zertifikat ({1}) mit einer Gültigkeit von {3} Tagen\\n\\tfür: {4}\n@@ -219,1 +219,1 @@\n-New.prompt.=Neues {0}:\\u0020\n+New.prompt.={0} (neu):\\u0020\n@@ -241,1 +241,1 @@\n-.defaultValue.=\\u0020 [{0}]: \\u0020\n+.defaultValue.=\\  [{0}]: \\u0020\n@@ -305,2 +305,2 @@\n-key.bit.weak=%s Schlüssel (schwach)\n-key.bit.disabled=%s Schlüssel (deaktiviert)\n+key.bit.weak=%s-Schlüssel (schwach)\n+key.bit.disabled=%s-Schlüssel (deaktiviert)\n@@ -315,1 +315,1 @@\n-whose.key.weak=%1$s verwendet %2$s. Dies gilt als Sicherheitsrisiko. Wird in einem zukünftigen Update deaktiviert.\n+whose.key.weak=%1$s verwendet %2$s. Das gilt als Sicherheitsrisiko. Dieser Schlüssel wird in einem zukünftigen Update deaktiviert.\n","filename":"src\/java.base\/share\/classes\/sun\/security\/tools\/keytool\/resources\/keytool_de.properties","additions":10,"deletions":10,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -30,1 +30,1 @@\n-.OPTION.=\\u0020[OPTION]...\n+.OPTION.=\\ [OPTION]...\n@@ -181,3 +181,3 @@\n-size.bit.alg=%1$dビット%2$s\n-Generating.full.keyAlgName.key.pair.and.self.signed.certificate.sigAlgName.with.a.validity.of.days.for={0}キー・ペアおよび自己署名証明書({1})を{2}日の有効性で生成しています\\n\\t対象: {3}\n-Generating.full.keyAlgName.key.pair.and.a.certificate.sigAlgName.issued.by.signerAlias.with.a.validity.of.days.for={0}キー・ペアと<{2}>によって発行された証明書({1})を{3}日間の有効性で生成しています\\n\\t対象: {4}\n+size.bit.alg=%1$d-ビット %2$s\n+Generating.full.keyAlgName.key.pair.and.self.signed.certificate.sigAlgName.with.a.validity.of.days.for={2}日間有効な{0}のキー・ペアと自己署名型証明書({1})を生成しています\\n\\tディレクトリ名: {3}\n+Generating.full.keyAlgName.key.pair.and.a.certificate.sigAlgName.issued.by.signerAlias.with.a.validity.of.days.for={3}日間有効な{0}キー・ペアと<{2}>によって発行される証明書({1})を生成しています\\n\\tディレクトリ名: {4}\n@@ -230,6 +230,6 @@\n-What.is.your.first.and.last.name.=姓名は何ですか。\n-What.is.the.name.of.your.organizational.unit.=組織単位名は何ですか。\n-What.is.the.name.of.your.organization.=組織名は何ですか。\n-What.is.the.name.of.your.City.or.Locality.=都市名または地域名は何ですか。\n-What.is.the.name.of.your.State.or.Province.=都道府県名または州名は何ですか。\n-What.is.the.two.letter.country.code.for.this.unit.=この単位に該当する2文字の国コードは何ですか。\n+What.is.your.first.and.last.name.=姓名を入力してください。\n+What.is.the.name.of.your.organizational.unit.=組織単位名を入力してください。\n+What.is.the.name.of.your.organization.=組織名を入力してください。\n+What.is.the.name.of.your.City.or.Locality.=都市名または地域名を入力してください。\n+What.is.the.name.of.your.State.or.Province.=都道府県名を入力してください。\n+What.is.the.two.letter.country.code.for.this.unit.=この単位に該当する2文字の国コードを入力してください。\n@@ -241,1 +241,1 @@\n-.defaultValue.=\\u0020 [{0}]: \\u0020\n+.defaultValue.=\\  [{0}]: \\u0020\n@@ -295,1 +295,1 @@\n-reply=応答\n+reply=返信\n@@ -305,1 +305,1 @@\n-key.bit.weak=%sキー(弱い)\n+key.bit.weak=%sキー(弱)\n@@ -315,1 +315,1 @@\n-whose.key.weak=%1$sは%2$sを使用しており、これはセキュリティ・リスクとみなされます。今後の更新では無効になります。\n+whose.key.weak=%1$sは%2$sを使用しており、これはセキュリティ・リスクとみなされます。これは将来の更新で無効化されます。\n","filename":"src\/java.base\/share\/classes\/sun\/security\/tools\/keytool\/resources\/keytool_ja.properties","additions":14,"deletions":14,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -30,2 +30,2 @@\n-.OPTION.=\\u0020[OPTION]...\n-Options.=选项:\n+.OPTION.=\\ [OPTION]...\n+Options.=选项：\n@@ -36,1 +36,1 @@\n-Commands.=命令:\n+Commands.=命令：\n@@ -117,1 +117,1 @@\n-keytool.error.=keytool 错误:\\u0020\n+keytool.error.=keytool 错误：\\u0020\n@@ -173,1 +173,1 @@\n-.Storing.ksfname.=[正在存储{0}]\n+.Storing.ksfname.=[正在存储 {0}]\n@@ -182,2 +182,2 @@\n-Generating.full.keyAlgName.key.pair.and.self.signed.certificate.sigAlgName.with.a.validity.of.days.for=正在为 {3} 生成有效期为 {2} 天的 {0} 密钥对和自签名证书 ({1})\\n\n-Generating.full.keyAlgName.key.pair.and.a.certificate.sigAlgName.issued.by.signerAlias.with.a.validity.of.days.for=生成 {0} 密钥对和 <{2}> 颁发的证书 ({1})，有效期为 {3} 天 \\n\\t 对于：{4}\n+Generating.full.keyAlgName.key.pair.and.self.signed.certificate.sigAlgName.with.a.validity.of.days.for=正在为以下对象生成 {0} 密钥对和自签名证书 ({1})（有效期为 {2} 天）：\\n\\t{3}\n+Generating.full.keyAlgName.key.pair.and.a.certificate.sigAlgName.issued.by.signerAlias.with.a.validity.of.days.for=正在为以下对象生成 {0} 密钥对和由 <{2}> 颁发的证书 ({1})（有效期为 {3} 天）：\\n\\t{4}\n@@ -219,1 +219,1 @@\n-New.prompt.=新{0}:\\u0020\n+New.prompt.=新 {0}：\\u0020\n@@ -241,1 +241,1 @@\n-.defaultValue.=\\u0020 [{0}]: \\u0020\n+.defaultValue.=\\  [{0}]: \\u0020\n@@ -246,1 +246,1 @@\n-Signer.d.=签名者 #%d:\n+Signer.d.=签名者 #%d：\n@@ -248,1 +248,1 @@\n-Timestamp.=时间戳:\n+Timestamp.=时间戳：\n@@ -259,1 +259,1 @@\n-.is.not.trusted.=... 是不可信的。\n+.is.not.trusted.=... 是不可信的。\\u0020\n@@ -272,1 +272,1 @@\n-Extensions.=扩展:\\u0020\n+Extensions.=扩展：\\u0020\n@@ -279,1 +279,1 @@\n-This.extension.cannot.be.marked.as.critical.=无法将此扩展标记为“严重”。\n+This.extension.cannot.be.marked.as.critical.=无法将此扩展标记为“严重”。\\u0020\n@@ -302,1 +302,1 @@\n-with.weak=%s (弱)\n+with.weak=%s（弱）\n@@ -306,1 +306,1 @@\n-key.bit.disabled=%s 密钥（已禁用）\n+key.bit.disabled=%s 密钥（禁用）\n@@ -315,1 +315,1 @@\n-whose.key.weak=%1$s 使用的 %2$s 被视为存在安全风险。在将来的更新中将禁用它。\n+whose.key.weak=%1$s 使用的 %2$s 被视为存在安全风险。它将在未来的更新中被禁用。\n","filename":"src\/java.base\/share\/classes\/sun\/security\/tools\/keytool\/resources\/keytool_zh_CN.properties","additions":17,"deletions":17,"binary":false,"changes":34,"status":"modified"},{"patch":"@@ -28,0 +28,2 @@\n+import jdk.internal.util.StaticProperty;\n+\n@@ -134,1 +136,1 @@\n-        Charset charset = Charset.forName(System.getProperty(\"stdin.encoding\"), Charset.defaultCharset());\n+        Charset charset = Charset.forName(StaticProperty.stdinEncoding(), Charset.defaultCharset());\n","filename":"src\/java.base\/share\/classes\/sun\/security\/util\/ConsoleCallbackHandler.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -27,3 +27,3 @@\n-invalid.null.input.value=无效的空输入: {0}\n-NTDomainPrincipal.name=NTDomainPrincipal: {0}\n-NTNumericCredential.name=NTNumericCredential: {0}\n+invalid.null.input.value=无效的空输入：{0}\n+NTDomainPrincipal.name=NTDomainPrincipal：{0}\n+NTNumericCredential.name=NTNumericCredential：{0}\n@@ -31,6 +31,6 @@\n-NTSid.name=NTSid: {0}\n-NTSidDomainPrincipal.name=NTSidDomainPrincipal: {0}\n-NTSidGroupPrincipal.name=NTSidGroupPrincipal: {0}\n-NTSidPrimaryGroupPrincipal.name=NTSidPrimaryGroupPrincipal: {0}\n-NTSidUserPrincipal.name=NTSidUserPrincipal: {0}\n-NTUserPrincipal.name=NTUserPrincipal: {0}\n+NTSid.name=NTSid：{0}\n+NTSidDomainPrincipal.name=NTSidDomainPrincipal：{0}\n+NTSidGroupPrincipal.name=NTSidGroupPrincipal：{0}\n+NTSidPrimaryGroupPrincipal.name=NTSidPrimaryGroupPrincipal：{0}\n+NTSidUserPrincipal.name=NTSidUserPrincipal：{0}\n+NTUserPrincipal.name=NTUserPrincipal：{0}\n@@ -39,1 +39,1 @@\n-UnixNumericGroupPrincipal.Primary.Group.name=UnixNumericGroupPrincipal [主组]: {0}\n+UnixNumericGroupPrincipal.Primary.Group.name=UnixNumericGroupPrincipal [主组]：{0}\n@@ -41,2 +41,2 @@\n-UnixNumericUserPrincipal.name=UnixNumericUserPrincipal: {0}\n-UnixPrincipal.name=UnixPrincipal: {0}\n+UnixNumericUserPrincipal.name=UnixNumericUserPrincipal：{0}\n+UnixPrincipal.name=UnixPrincipal：{0}\n@@ -56,2 +56,2 @@\n-username.=用户名:\\u0020\n-password.=口令:\\u0020\n+username.=用户名：\\u0020\n+password.=密码：\\u0020\n@@ -66,2 +66,2 @@\n-Kerberos.username.defUsername.=Kerberos 用户名 [{0}]:\\u0020\n-Kerberos.password.for.username.={0}的 Kerberos 口令:\\u0020\n+Kerberos.username.defUsername.=Kerberos 用户名 [{0}]：\\u0020\n+Kerberos.password.for.username.={0} 的 Kerberos 密码：\\u0020\n","filename":"src\/java.base\/share\/classes\/sun\/security\/util\/resources\/auth_zh_CN.properties","additions":16,"deletions":16,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -69,1 +69,1 @@\n-number.=数\\u0020\n+number.=数値\\u0020\n","filename":"src\/java.base\/share\/classes\/sun\/security\/util\/resources\/security_ja.properties","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -46,4 +46,4 @@\n-Subject.=主体: \\n\n-.Principal.=\\t主用户:\\u0020\n-.Public.Credential.=\\t公共身份证明:\\u0020\n-.Private.Credential.=\\t专用身份证明:\\u0020\n+Subject.=主体：\\n\n+.Principal.=\\t主用户：\\u0020\n+.Public.Credential.=\\t公共身份证明：\\u0020\n+.Private.Credential.=\\t专用身份证明：\\u0020\n@@ -56,1 +56,1 @@\n-LoginModuleControlFlag.=LoginModuleControlFlag:\\u0020\n+LoginModuleControlFlag.=LoginModuleControlFlag：\\u0020\n@@ -72,1 +72,1 @@\n-line.number.msg=列{0}: {1}\n+line.number.msg=第 {0} 行：{1}\n@@ -76,1 +76,1 @@\n-PKCS11.Token.providerName.Password.=PKCS11 标记 [{0}] 口令:\\u0020\n+PKCS11.Token.providerName.Password.=PKCS11 标记 [{0}] 密码：\\u0020\n","filename":"src\/java.base\/share\/classes\/sun\/security\/util\/resources\/security_zh_CN.properties","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -1518,0 +1518,9 @@\n+`-XX:+UseCompactObjectHeaders`\n+:   Enables compact object headers. By default, this option is disabled.\n+    Enabling this option reduces memory footprint in the Java heap by\n+    4 bytes per object (on average) and often improves performance.\n+\n+    The feature remains disabled by default while it continues to be evaluated.\n+    In a future release it is expected to be enabled by default, and\n+    eventually will be the only mode of operation.\n+\n@@ -2704,8 +2713,0 @@\n-`-XX:+ParallelRefProcEnabled`\n-:   Enables parallel reference processing. By default, collectors employing multiple\n-    threads perform parallel reference processing if the number of parallel threads\n-    to use is larger than one.\n-    The option is available only when the throughput or G1 garbage collector is used\n-    (`-XX:+UseParallelGC` or `-XX:+UseG1GC`). Other collectors employing multiple\n-    threads always perform reference processing in parallel.\n-\n@@ -2907,0 +2908,8 @@\n+`-XX:+ParallelRefProcEnabled`\n+:   Enables parallel reference processing. By default, collectors employing multiple\n+    threads perform parallel reference processing if the number of parallel threads\n+    to use is larger than one.\n+    The option is available only when the throughput or G1 garbage collector is used\n+    (`-XX:+UseParallelGC` or `-XX:+UseG1GC`). Other collectors employing multiple\n+    threads always perform reference processing in parallel.\n+\n","filename":"src\/java.base\/share\/man\/java.md","additions":17,"deletions":8,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -47,0 +47,6 @@\n+JNIEXPORT jobject JNICALL\n+Java_java_lang_ref_Reference_get0(JNIEnv *env, jobject ref)\n+{\n+    return JVM_ReferenceGet(env, ref);\n+}\n+\n","filename":"src\/java.base\/share\/native\/libjava\/Reference.c","additions":7,"deletions":1,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -77,1 +77,1 @@\n-\n+    JNU_CHECK_EXCEPTION_RETURN(env, JNI_VERSION_1_2);\n@@ -94,8 +94,1 @@\n-static int enhancedExceptionsAllowed = -1;\n-\n-#define CHECK_NULL_THROW_ERROR(X) \\\n-    if (X == NULL) {                                        \\\n-        JNU_ThrowByName(env, \"java\/lang\/InternalError\",     \\\n-            \"can't initialize enhanced exceptions\");        \\\n-        return -1;                                          \\\n-    }\n+static int enhancedExceptionsAllowed = 0;\n@@ -111,1 +104,1 @@\n-    CHECK_NULL_THROW_ERROR(cls);\n+    CHECK_NULL_RETURN(cls, ENH_INIT_ERROR);\n@@ -113,1 +106,1 @@\n-    CHECK_NULL_THROW_ERROR(fid);\n+    CHECK_NULL_RETURN(fid, ENH_INIT_ERROR);\n","filename":"src\/java.base\/share\/native\/libnet\/net_util.c","additions":4,"deletions":11,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -186,0 +186,5 @@\n+\/* return codes *\/\n+#define ENH_INIT_ERROR -1  \/* initialization error: check exceptions *\/\n+#define ENH_DISABLED    0  \/* enhanced exceptions disabled *\/\n+#define ENH_ENABLED     1  \/* enhanced exceptions enabled *\/\n+\n","filename":"src\/java.base\/share\/native\/libnet\/net_util.h","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2002, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2002, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -81,0 +81,11 @@\n+    \/**\n+     * Return true if the operating system supports pending signals. If a signal is sent\n+     * to a thread but cannot be delivered immediately then it will be delivered when the\n+     * thread is in the appropriate state.\n+     *\/\n+    static boolean supportPendingSignals() {\n+        return supportPendingSignals0();\n+    }\n+\n+    private static native boolean supportPendingSignals0();\n+\n","filename":"src\/java.base\/unix\/classes\/sun\/nio\/ch\/NativeThread.java","additions":12,"deletions":1,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -32,0 +32,1 @@\n+    private static final boolean SUPPORTS_PENDING_SIGNALS = NativeThread.supportPendingSignals();\n@@ -38,3 +39,1 @@\n-    @Override\n-    void implPreClose(FileDescriptor fd, long reader, long writer) throws IOException {\n-        preClose0(fd);\n+    private void signalThreads(long reader, long writer) {\n@@ -47,0 +46,11 @@\n+    @Override\n+    void implPreClose(FileDescriptor fd, long reader, long writer) throws IOException {\n+        if (SUPPORTS_PENDING_SIGNALS) {\n+            signalThreads(reader, writer);\n+        }\n+        preClose0(fd);\n+        if (!SUPPORTS_PENDING_SIGNALS) {\n+            signalThreads(reader, writer);\n+        }\n+    }\n+\n","filename":"src\/java.base\/unix\/classes\/sun\/nio\/ch\/UnixDispatcher.java","additions":13,"deletions":3,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -191,0 +191,3 @@\n+    if (enhancedExceptions == ENH_INIT_ERROR && (*env)->ExceptionCheck(env)) {\n+        return;\n+    }\n@@ -192,1 +195,1 @@\n-    if (enhancedExceptions) {\n+    if (enhancedExceptions == ENH_ENABLED) {\n@@ -203,1 +206,1 @@\n-        if (enhancedExceptions) {\n+        if (enhancedExceptions == ENH_ENABLED) {\n","filename":"src\/java.base\/unix\/native\/libnet\/net_util_md.c","additions":5,"deletions":2,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2002, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2002, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -91,0 +91,9 @@\n+\n+JNIEXPORT jboolean JNICALL\n+Java_sun_nio_ch_NativeThread_supportPendingSignals0(JNIEnv *env, jclass cl) {\n+#if defined(_AIX)\n+    return JNI_TRUE;\n+#else\n+    return JNI_FALSE;\n+#endif\n+}\n","filename":"src\/java.base\/unix\/native\/libnio\/ch\/NativeThread.c","additions":10,"deletions":1,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -91,3 +91,6 @@\n-        NET_ThrowByNameWithLastError(\n-            env, \"java\/net\/UnknownHostException\",\n-            getEnhancedExceptionsAllowed(env) ? hostname : \"\");\n+        int enh = getEnhancedExceptionsAllowed(env);\n+        if (enh == ENH_INIT_ERROR && (*env)->ExceptionCheck(env)) {\n+            goto cleanupAndReturn;\n+        }\n+        const char *hmsg = (enh == ENH_ENABLED) ? hostname : \"\";\n+        NET_ThrowByNameWithLastError( env, \"java\/net\/UnknownHostException\", hmsg);\n","filename":"src\/java.base\/windows\/native\/libnet\/Inet4AddressImpl.c","additions":6,"deletions":3,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -86,2 +86,6 @@\n-        NET_ThrowByNameWithLastError(env, \"java\/net\/UnknownHostException\",\n-            getEnhancedExceptionsAllowed(env) ? hostname : \"\");\n+        int enh = getEnhancedExceptionsAllowed(env);\n+        if (enh == ENH_INIT_ERROR && (*env)->ExceptionCheck(env)) {\n+            goto cleanupAndReturn;\n+        }\n+        const char *hmsg = (enh == ENH_ENABLED) ? hostname : \"\";\n+        NET_ThrowByNameWithLastError(env, \"java\/net\/UnknownHostException\", hmsg);\n","filename":"src\/java.base\/windows\/native\/libnet\/Inet6AddressImpl.c","additions":6,"deletions":2,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -217,0 +217,7 @@\n+    \/*\n+     * Use SOMAXCONN_HINT when backlog larger than 200. It will adjust the value\n+     * to be within the range (200, 65535).\n+     *\/\n+    if (backlog > 200) {\n+        backlog = SOMAXCONN_HINT(backlog);\n+    }\n","filename":"src\/java.base\/windows\/native\/libnio\/ch\/Net.c","additions":7,"deletions":0,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -364,3 +364,3 @@\n-      J2dTraceLn2(J2D_TRACE_VERBOSE,\n-                  \"end common encoder because of dest change: %p -> %p\",\n-                  _destination, dest);\n+      J2dTraceLn(J2D_TRACE_VERBOSE,\n+                 \"end common encoder because of dest change: %p -> %p\",\n+                 _destination, dest);\n@@ -377,3 +377,3 @@\n-      J2dTraceLn2(J2D_TRACE_VERBOSE,\n-                  \"end common encoder because toggle stencil: %d -> %d\",\n-                  (int)_useStencil, (int)[_mtlc.clip isShape]);\n+      J2dTraceLn(J2D_TRACE_VERBOSE,\n+                 \"end common encoder because toggle stencil: %d -> %d\",\n+                 (int)_useStencil, (int)[_mtlc.clip isShape]);\n@@ -429,1 +429,1 @@\n-    \/\/ J2dTraceLn1(J2D_TRACE_VERBOSE, \"created render encoder to draw on\n+    \/\/ J2dTraceLn(J2D_TRACE_VERBOSE, \"created render encoder to draw on\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/java2d\/metal\/EncoderManager.m","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -141,4 +141,4 @@\n-    J2dRlsTraceLn2(J2D_TRACE_VERBOSE, \"drawTex2Tex: src tex=%p, dst tex=%p\", src, dst);\n-    J2dRlsTraceLn4(J2D_TRACE_VERBOSE, \"  sw=%d sh=%d dw=%d dh=%d\", src.width, src.height, dst.width, dst.height);\n-    J2dRlsTraceLn4(J2D_TRACE_VERBOSE, \"  sx1=%d sy1=%d sx2=%d sy2=%d\", sx1, sy1, sx2, sy2);\n-    J2dRlsTraceLn4(J2D_TRACE_VERBOSE, \"  dx1=%f dy1=%f dx2=%f dy2=%f\", dx1, dy1, dx2, dy2);\n+    J2dRlsTraceLn(J2D_TRACE_VERBOSE, \"drawTex2Tex: src tex=%p, dst tex=%p\", src, dst);\n+    J2dRlsTraceLn(J2D_TRACE_VERBOSE, \"  sw=%d sh=%d dw=%d dh=%d\", src.width, src.height, dst.width, dst.height);\n+    J2dRlsTraceLn(J2D_TRACE_VERBOSE, \"  sx1=%d sy1=%d sx2=%d sy2=%d\", sx1, sy1, sx2, sy2);\n+    J2dRlsTraceLn(J2D_TRACE_VERBOSE, \"  dx1=%f dy1=%f dx2=%f dy2=%f\", dx1, dy1, dx2, dy2);\n@@ -177,1 +177,1 @@\n-        J2dTraceLn4(J2D_TRACE_ERROR, \"replaceTextureRegion: dest size: (%d, %d) less than source size: (%d, %d)\", dw, dh, sw, sh);\n+        J2dTraceLn(J2D_TRACE_ERROR, \"replaceTextureRegion: dest size: (%d, %d) less than source size: (%d, %d)\", dw, dh, sw, sh);\n@@ -185,2 +185,2 @@\n-        J2dTraceLn4(J2D_TRACE_VERBOSE, \"replaceTextureRegion src (dw, dh) : [%d, %d] dest (dx1, dy1) =[%d, %d]\",\n-                    dw, dh, dx1, dy1);\n+        J2dTraceLn(J2D_TRACE_VERBOSE, \"replaceTextureRegion src (dw, dh) : [%d, %d] dest (dx1, dy1) =[%d, %d]\",\n+                   dw, dh, dx1, dy1);\n@@ -330,1 +330,1 @@\n-            J2dTraceLn2(J2D_TRACE_ERROR, \"\\tclipDestCoords: dcx1=%1.2f, dcx2=%1.2f\", dcx1, dcx2);\n+            J2dTraceLn(J2D_TRACE_ERROR, \"\\tclipDestCoords: dcx1=%1.2f, dcx2=%1.2f\", dcx1, dcx2);\n@@ -334,1 +334,1 @@\n-            J2dTraceLn2(J2D_TRACE_ERROR, \"\\tclipDestCoords: dcy1=%1.2f, dcy2=%1.2f\", dcy1, dcy2);\n+            J2dTraceLn(J2D_TRACE_ERROR, \"\\tclipDestCoords: dcy1=%1.2f, dcy2=%1.2f\", dcy1, dcy2);\n@@ -340,2 +340,2 @@\n-        J2dTraceLn4(J2D_TRACE_INFO, \"\\tdx2=%1.4f <= dcx1=%1.4f || *dx1=%1.4f >= dcx2=%1.4f\", *dx2, dcx1, *dx1, dcx2);\n-        J2dTraceLn4(J2D_TRACE_INFO, \"\\t*dy2=%1.4f <= dcy1=%1.4f || *dy1=%1.4f >= dcy2=%1.4f\", *dy2, dcy1, *dy1, dcy2);\n+        J2dTraceLn(J2D_TRACE_INFO, \"\\tdx2=%1.4f <= dcx1=%1.4f || *dx1=%1.4f >= dcx2=%1.4f\", *dx2, dcx1, *dx1, dcx2);\n+        J2dTraceLn(J2D_TRACE_INFO, \"\\t*dy2=%1.4f <= dcy1=%1.4f || *dy1=%1.4f >= dcy2=%1.4f\", *dy2, dcy1, *dy1, dcy2);\n@@ -345,1 +345,1 @@\n-        J2dTraceLn3(J2D_TRACE_VERBOSE, \"\\t\\tdx1=%1.2f, will be clipped to %1.2f | sx1+=%d\", *dx1, dcx1, (jint)((dcx1 - *dx1) * (sw\/dw)));\n+        J2dTraceLn(J2D_TRACE_VERBOSE, \"\\t\\tdx1=%1.2f, will be clipped to %1.2f | sx1+=%d\", *dx1, dcx1, (jint)((dcx1 - *dx1) * (sw\/dw)));\n@@ -350,1 +350,1 @@\n-        J2dTraceLn3(J2D_TRACE_VERBOSE, \"\\t\\tdx2=%1.2f, will be clipped to %1.2f | sx2-=%d\", *dx2, dcx2, (jint)((*dx2 - dcx2) * (sw\/dw)));\n+        J2dTraceLn(J2D_TRACE_VERBOSE, \"\\t\\tdx2=%1.2f, will be clipped to %1.2f | sx2-=%d\", *dx2, dcx2, (jint)((*dx2 - dcx2) * (sw\/dw)));\n@@ -355,1 +355,1 @@\n-        J2dTraceLn3(J2D_TRACE_VERBOSE, \"\\t\\tdy1=%1.2f, will be clipped to %1.2f | sy1+=%d\", *dy1, dcy1, (jint)((dcy1 - *dy1) * (sh\/dh)));\n+        J2dTraceLn(J2D_TRACE_VERBOSE, \"\\t\\tdy1=%1.2f, will be clipped to %1.2f | sy1+=%d\", *dy1, dcy1, (jint)((dcy1 - *dy1) * (sh\/dh)));\n@@ -360,1 +360,1 @@\n-        J2dTraceLn3(J2D_TRACE_VERBOSE, \"\\t\\tdy2=%1.2f, will be clipped to %1.2f | sy2-=%d\", *dy2, dcy2, (jint)((*dy2 - dcy2) * (sh\/dh)));\n+        J2dTraceLn(J2D_TRACE_VERBOSE, \"\\t\\tdy2=%1.2f, will be clipped to %1.2f | sy2-=%d\", *dy2, dcy2, (jint)((*dy2 - dcy2) * (sh\/dh)));\n@@ -395,1 +395,1 @@\n-        J2dTraceLn2(J2D_TRACE_ERROR, \"MTLBlitLoops_IsoBlit: surface is null (stex=%p, dtex=%p)\", srcTex, dstTex);\n+        J2dTraceLn(J2D_TRACE_ERROR, \"MTLBlitLoops_IsoBlit: surface is null (stex=%p, dtex=%p)\", srcTex, dstTex);\n@@ -405,1 +405,1 @@\n-        J2dTraceLn4(J2D_TRACE_WARNING, \"MTLBlitLoops_IsoBlit: invalid dimensions: sw=%d, sh%d, dw=%d, dh=%d\", sw, sh, dw, dh);\n+        J2dTraceLn(J2D_TRACE_WARNING, \"MTLBlitLoops_IsoBlit: invalid dimensions: sw=%d, sh%d, dw=%d, dh=%d\", sw, sh, dw, dh);\n@@ -434,2 +434,2 @@\n-        J2dTraceLn6(J2D_TRACE_VERBOSE, \"  sx1=%d sy1=%d sx2=%d sy2=%d sw=%d sh=%d\", sx1, sy1, sx2, sy2, srcOps->width, srcOps->height);\n-        J2dTraceLn4(J2D_TRACE_VERBOSE, \"  dx1=%f dy1=%f dx2=%f dy2=%f\", dx1, dy1, dx2, dy2);\n+        J2dTraceLn(J2D_TRACE_VERBOSE, \"  sx1=%d sy1=%d sx2=%d sy2=%d sw=%d sh=%d\", sx1, sy1, sx2, sy2, srcOps->width, srcOps->height);\n+        J2dTraceLn(J2D_TRACE_VERBOSE, \"  dx1=%f dy1=%f dx2=%f dy2=%f\", dx1, dy1, dx2, dy2);\n@@ -524,1 +524,1 @@\n-        J2dTraceLn1(J2D_TRACE_ERROR, \"MTLBlitLoops_Blit: source pixel format %d isn't supported\", srctype);\n+        J2dTraceLn(J2D_TRACE_ERROR, \"MTLBlitLoops_Blit: source pixel format %d isn't supported\", srctype);\n@@ -644,1 +644,1 @@\n-    J2dTraceLn6(J2D_TRACE_VERBOSE, \"MTLBlitLoops_SurfaceToSwBlit: sx=%d sy=%d w=%d h=%d dx=%d dy=%d\", srcx, srcy, width, height, dstx, dsty);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"MTLBlitLoops_SurfaceToSwBlit: sx=%d sy=%d w=%d h=%d dx=%d dy=%d\", srcx, srcy, width, height, dstx, dsty);\n@@ -651,1 +651,1 @@\n-        J2dTraceLn1(J2D_TRACE_ERROR, \"MTLBlitLoops_SurfaceToSwBlit: destination pixel format %d isn't supported\", dsttype);\n+        J2dTraceLn(J2D_TRACE_ERROR, \"MTLBlitLoops_SurfaceToSwBlit: destination pixel format %d isn't supported\", dsttype);\n@@ -739,1 +739,1 @@\n-            J2dTraceLn1(J2D_TRACE_VERBOSE, \"MTLBlitLoops_SurfaceToSwBlit: source texture %p\", srcOps->pTexture);\n+            J2dTraceLn(J2D_TRACE_VERBOSE, \"MTLBlitLoops_SurfaceToSwBlit: source texture %p\", srcOps->pTexture);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/java2d\/metal\/MTLBlitLoops.m","additions":24,"deletions":24,"binary":false,"changes":48,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -50,1 +50,1 @@\n-        J2dTraceLn1(J2D_TRACE_INFO,\"Created MTLRescaleOp: isNonPremult=%d\", isNonPremult);\n+        J2dTraceLn(J2D_TRACE_INFO, \"Created MTLRescaleOp: isNonPremult=%d\", isNonPremult);\n@@ -85,1 +85,3 @@\n-        J2dTraceLn2(J2D_TRACE_INFO,\"Created MTLConvolveOp: kernelW=%d kernelH=%d\", kernelWidth, kernelHeight);\n+        J2dTraceLn(J2D_TRACE_INFO,\n+                   \"Created MTLConvolveOp: kernelW=%d kernelH=%d\",\n+                   kernelWidth, kernelHeight);\n@@ -145,2 +147,3 @@\n-        J2dTraceLn4(J2D_TRACE_INFO,\"Created MTLLookupOp: short=%d num=%d len=%d off=%d\",\n-                    shortData, numBands, bandLength, offset);\n+        J2dTraceLn(J2D_TRACE_INFO,\n+                   \"Created MTLLookupOp: short=%d num=%d len=%d off=%d\",\n+                   shortData, numBands, bandLength, offset);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/java2d\/metal\/MTLBufImgOps.m","additions":8,"deletions":5,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -131,1 +131,3 @@\n-        J2dTraceLn4(J2D_TRACE_ERROR, \"MTLClip.setClipRect: invalid rect: x1=%d y1=%d x2=%d y2=%d\", x1, y1, x2, y2);\n+        J2dTraceLn(J2D_TRACE_ERROR,\n+                   \"MTLClip.setClipRect: invalid rect: x1=%d y1=%d x2=%d y2=%d\",\n+                   x1, y1, x2, y2);\n@@ -138,1 +140,2 @@\n-    J2dTraceLn4(J2D_TRACE_INFO, \"MTLClip.setClipRect: x=%d y=%d w=%d h=%d\", x1, y1, width, height);\n+    J2dTraceLn(J2D_TRACE_INFO, \"MTLClip.setClipRect: x=%d y=%d w=%d h=%d\",\n+               x1, y1, width, height);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/java2d\/metal\/MTLClip.m","additions":6,"deletions":3,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -254,1 +254,4 @@\n-    J2dTraceLn6(J2D_TRACE_VERBOSE, \"MTLContext_SetSurfaces: bsrc=%p (tex=%p type=%d), bdst=%p (tex=%p type=%d)\", srcOps, srcOps->pTexture, srcOps->drawableType, dstOps, dstOps->pTexture, dstOps->drawableType);\n+    J2dTraceLn(J2D_TRACE_VERBOSE,\n+               \"MTLContext_SetSurfaces: bsrc=%p (tex=%p type=%d), bdst=%p (tex=%p type=%d)\",\n+               srcOps, srcOps->pTexture, srcOps->drawableType,\n+               dstOps, dstOps->pTexture, dstOps->drawableType);\n@@ -290,1 +293,1 @@\n-    J2dTraceLn4(J2D_TRACE_INFO, \"MTLContext.setClipRect: %d,%d - %d,%d\", x1, y1, x2, y2);\n+    J2dTraceLn(J2D_TRACE_INFO, \"MTLContext.setClipRect: %d,%d - %d,%d\", x1, y1, x2, y2);\n@@ -319,1 +322,3 @@\n-    J2dTraceLn3(J2D_TRACE_INFO, \"MTLContext_SetAlphaComposite: rule=%d, extraAlpha=%1.2f, flags=%d\", rule, extraAlpha, flags);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"MTLContext_SetAlphaComposite: rule=%d, extraAlpha=%1.2f, flags=%d\",\n+               rule, extraAlpha, flags);\n@@ -333,1 +338,1 @@\n-    J2dTraceLn1(J2D_TRACE_INFO, \"MTLContext.setXorComposite: xorPixel=%08x\", xp);\n+    J2dTraceLn(J2D_TRACE_INFO, \"MTLContext.setXorComposite: xorPixel=%08x\", xp);\n@@ -360,1 +365,4 @@\n-    J2dTraceLn5(J2D_TRACE_INFO, \"MTLContext.setColorPaint: pixel=%08x [r=%d g=%d b=%d a=%d]\", pixel, (pixel >> 16) & (0xFF), (pixel >> 8) & 0xFF, (pixel) & 0xFF, (pixel >> 24) & 0xFF);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"MTLContext.setColorPaint: pixel=%08x [r=%d g=%d b=%d a=%d]\",\n+               pixel, (pixel >> 16) & (0xFF), (pixel >> 8) & 0xFF,\n+               (pixel) & 0xFF, (pixel >> 24) & 0xFF);\n@@ -455,1 +463,1 @@\n-    J2dTraceLn1(J2D_TRACE_INFO, \"MTLContext.setTexturePaint [tex=%p]\", srcOps->pTexture);\n+    J2dTraceLn(J2D_TRACE_INFO, \"MTLContext.setTexturePaint [tex=%p]\", srcOps->pTexture);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/java2d\/metal\/MTLContext.m","additions":15,"deletions":7,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2020, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2020, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -272,2 +272,2 @@\n-    J2dTraceLn2(J2D_TRACE_VERBOSE, \"  glyph 0x%x: adding cell 0x%x to the list\",\n-                glyph, cellInfo);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  glyph 0x%x: adding cell 0x%x to the list\",\n+               glyph, cellInfo);\n@@ -293,3 +293,3 @@\n-            J2dTraceLn2(J2D_TRACE_VERBOSE,\n-                        \"  glyph 0x%x: removing cell 0x%x from glyph's list\",\n-                        glyph, currCellInfo);\n+            J2dTraceLn(J2D_TRACE_VERBOSE,\n+                       \"  glyph 0x%x: removing cell 0x%x from glyph's list\",\n+                       glyph, currCellInfo);\n@@ -308,3 +308,3 @@\n-    J2dTraceLn2(J2D_TRACE_WARNING, \"MTLGlyphCache_RemoveCellInfo: \"\\\n-                \"no cell 0x%x in glyph 0x%x's cell list\",\n-                cellInfo, glyph);\n+    J2dTraceLn(J2D_TRACE_WARNING, \"MTLGlyphCache_RemoveCellInfo: \"\\\n+               \"no cell 0x%x in glyph 0x%x's cell list\",\n+               cellInfo, glyph);\n@@ -353,3 +353,3 @@\n-                J2dTraceLn3(J2D_TRACE_VERBOSE2,\n-                            \"  glyph 0x%x: found cell 0x%x for cache 0x%x\",\n-                            glyph, cellInfo, cache);\n+                J2dTraceLn(J2D_TRACE_VERBOSE2,\n+                           \"  glyph 0x%x: found cell 0x%x for cache 0x%x\",\n+                           glyph, cellInfo, cache);\n@@ -361,2 +361,2 @@\n-    J2dTraceLn2(J2D_TRACE_VERBOSE2, \"  glyph 0x%x: no cell for cache 0x%x\",\n-                glyph, cache);\n+    J2dTraceLn(J2D_TRACE_VERBOSE2, \"  glyph 0x%x: no cell for cache 0x%x\",\n+               glyph, cache);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/java2d\/metal\/MTLGlyphCache.m","additions":14,"deletions":14,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -135,3 +135,3 @@\n-        J2dTraceLn4(J2D_TRACE_VERBOSE,\n-                    \"MTLLayer.blitTexture: uninitialized (mtlc=%p, javaLayer=%p, buffer=%p, device=%p)\", self.ctx,\n-                    self.javaLayer, self.buffer, ctx.device);\n+        J2dTraceLn(J2D_TRACE_VERBOSE,\n+                   \"MTLLayer.blitTexture: uninitialized (mtlc=%p, javaLayer=%p, buffer=%p, device=%p)\",\n+                   self.ctx, self.javaLayer, self.buffer, ctx.device);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/java2d\/metal\/MTLLayer.m","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -50,1 +50,3 @@\n-    J2dTraceLn5(J2D_TRACE_INFO, \"MTLMaskFill_MaskFill (x=%d y=%d w=%d h=%d pMask=%p)\", x, y, w, h, dstOps->pTexture);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"MTLMaskFill_MaskFill (x=%d y=%d w=%d h=%d pMask=%p)\",\n+               x, y, w, h, dstOps->pTexture);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/java2d\/metal\/MTLMaskFill.m","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -84,2 +84,2 @@\n-        J2dTraceLn1(J2D_TRACE_ERROR,       \\\n-                    \"%s is null\", #value); \\\n+        J2dTraceLn(J2D_TRACE_ERROR,        \\\n+                   \"%s is null\", #value);  \\\n@@ -93,2 +93,2 @@\n-        J2dTraceLn1(J2D_TRACE_ERROR,       \\\n-                    \"%s is false\", #value);\\\n+        J2dTraceLn(J2D_TRACE_ERROR,        \\\n+                   \"%s is false\", #value); \\\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/java2d\/metal\/MTLRenderQueue.h","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -68,2 +68,2 @@\n-    J2dTraceLn1(J2D_TRACE_VERBOSE,\n-                \"MTLRenderQueue_CheckPreviousOp: new op=%d\", op);\n+    J2dTraceLn(J2D_TRACE_VERBOSE,\n+               \"MTLRenderQueue_CheckPreviousOp: new op=%d\", op);\n@@ -107,2 +107,2 @@\n-    J2dTraceLn1(J2D_TRACE_INFO,\n-                \"MTLRenderQueue_flushBuffer: limit=%d\", limit);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"MTLRenderQueue_flushBuffer: limit=%d\", limit);\n@@ -122,3 +122,3 @@\n-            J2dTraceLn2(J2D_TRACE_VERBOSE,\n-                    \"MTLRenderQueue_flushBuffer: opcode=%d, rem=%d\",\n-                    opcode, (end-b));\n+            J2dTraceLn(J2D_TRACE_VERBOSE,\n+                       \"MTLRenderQueue_flushBuffer: opcode=%d, rem=%d\",\n+                       opcode, (end-b));\n@@ -871,2 +871,3 @@\n-                    J2dRlsTraceLn1(J2D_TRACE_ERROR,\n-                        \"MTLRenderQueue_flushBuffer: invalid opcode=%d\", opcode);\n+                    J2dRlsTraceLn(J2D_TRACE_ERROR,\n+                                  \"MTLRenderQueue_flushBuffer: invalid opcode=%d\",\n+                                  opcode);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/java2d\/metal\/MTLRenderQueue.m","additions":11,"deletions":10,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -66,1 +66,3 @@\n-    J2dTraceLn5(J2D_TRACE_INFO, \"MTLRenderer_DrawLine (x1=%d y1=%d x2=%d y2=%d), dst tex=%p\", x1, y1, x2, y2, dstOps->pTexture);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"MTLRenderer_DrawLine (x1=%d y1=%d x2=%d y2=%d), dst tex=%p\",\n+               x1, y1, x2, y2, dstOps->pTexture);\n@@ -141,1 +143,1 @@\n-    J2dTraceLn3(J2D_TRACE_INFO, \"MTLRenderer_DrawPixel (x=%d y=%d), dst tex=%p\", x, y, dest);\n+    J2dTraceLn(J2D_TRACE_INFO, \"MTLRenderer_DrawPixel (x=%d y=%d), dst tex=%p\", x, y, dest);\n@@ -163,1 +165,3 @@\n-    J2dTraceLn5(J2D_TRACE_INFO, \"MTLRenderer_DrawRect (x=%d y=%d w=%d h=%d), dst tex=%p\", x, y, w, h, dest);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"MTLRenderer_DrawRect (x=%d y=%d w=%d h=%d), dst tex=%p\",\n+               x, y, w, h, dest);\n@@ -212,1 +216,3 @@\n-    J2dTraceLn4(J2D_TRACE_INFO, \"MTLRenderer_DrawPoly: %d points, transX=%d, transY=%d, dst tex=%p\", nPoints, transX, transY, dstOps->pTexture);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"MTLRenderer_DrawPoly: %d points, transX=%d, transY=%d, dst tex=%p\",\n+               nPoints, transX, transY, dstOps->pTexture);\n@@ -232,1 +238,2 @@\n-        J2dTraceLn2(J2D_TRACE_INFO, \"MTLRenderer_DrawPoly: Point - (%1.2f, %1.2f)\", prevX + transX + 0.5f, prevY + transY + 0.5f);\n+        J2dTraceLn(J2D_TRACE_INFO, \"MTLRenderer_DrawPoly: Point - (%1.2f, %1.2f)\",\n+                   prevX + transX + 0.5f, prevY + transY + 0.5f);\n@@ -238,1 +245,2 @@\n-            J2dTraceLn2(J2D_TRACE_INFO, \"MTLRenderer_DrawPoly: Point - (%1.2f, %1.2f)\", prevX + transX + 0.5f,prevY + transY + 0.5f);\n+            J2dTraceLn(J2D_TRACE_INFO, \"MTLRenderer_DrawPoly: Point - (%1.2f, %1.2f)\",\n+                       prevX + transX + 0.5f,prevY + transY + 0.5f);\n@@ -245,1 +253,2 @@\n-                J2dTraceLn2(J2D_TRACE_INFO, \"MTLRenderer_DrawPoly: Point - (%1.2f, %1.2f)\",firstX + transX + 0.5f, firstY + transY + 0.5f);\n+                J2dTraceLn(J2D_TRACE_INFO, \"MTLRenderer_DrawPoly: Point - (%1.2f, %1.2f)\",\n+                           firstX + transX + 0.5f, firstY + transY + 0.5f);\n@@ -266,2 +275,6 @@\n-            J2dTraceLn2(J2D_TRACE_INFO, \"MTLRenderer_DrawPoly: last segment Point1 - (%1.2f, %1.2f)\",prevX + transX + 0.5f, prevY + transY + 0.5f);\n-            J2dTraceLn2(J2D_TRACE_INFO, \"MTLRenderer_DrawPoly: last segment Point2 - (%1.2f, %1.2f)\",firstX + transX + 0.5f, firstY + transY + 0.5f);\n+            J2dTraceLn(J2D_TRACE_INFO,\n+                       \"MTLRenderer_DrawPoly: last segment Point1 - (%1.2f, %1.2f)\",\n+                       prevX + transX + 0.5f, prevY + transY + 0.5f);\n+            J2dTraceLn(J2D_TRACE_INFO,\n+                       \"MTLRenderer_DrawPoly: last segment Point2 - (%1.2f, %1.2f)\",\n+                       firstX + transX + 0.5f, firstY + transY + 0.5f);\n@@ -327,1 +340,3 @@\n-    J2dTraceLn2(J2D_TRACE_INFO, \"MTLRenderer_DrawScanlines (scanlineCount=%d), dst tex=%p\", scanlineCount, dstOps->pTexture);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"MTLRenderer_DrawScanlines (scanlineCount=%d), dst tex=%p\",\n+               scanlineCount, dstOps->pTexture);\n@@ -335,1 +350,1 @@\n-    J2dTraceLn1(J2D_TRACE_INFO, \"MTLRenderer_DrawScanlines: Total vertex size : %d\", vertexSize);\n+    J2dTraceLn(J2D_TRACE_INFO, \"MTLRenderer_DrawScanlines: Total vertex size : %d\", vertexSize);\n@@ -402,2 +417,3 @@\n-            J2dTraceLn1(J2D_TRACE_INFO,\n-                \"MTLRenderer_DrawScanlines: Remaining vertex size %d\", remainingScanlineCount);\n+            J2dTraceLn(J2D_TRACE_INFO,\n+                       \"MTLRenderer_DrawScanlines: Remaining vertex size %d\",\n+                       remainingScanlineCount);\n@@ -427,1 +443,2 @@\n-    J2dTraceLn5(J2D_TRACE_INFO, \"MTLRenderer_FillRect (x=%d y=%d w=%d h=%d), dst tex=%p\", x, y, w, h, dest);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"MTLRenderer_FillRect (x=%d y=%d w=%d h=%d), dst tex=%p\", x, y, w, h, dest);\n@@ -547,8 +564,8 @@\n-    J2dTraceLn7(J2D_TRACE_INFO,\n-                \"MTLRenderer_FillParallelogram\"\n-                \"(x=%6.2f y=%6.2f \"\n-                \"dx1=%6.2f dy1=%6.2f \"\n-                \"dx2=%6.2f dy2=%6.2f dst tex=%p)\",\n-                fx11, fy11,\n-                dx21, dy21,\n-                dx12, dy12, dest);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"MTLRenderer_FillParallelogram\"\n+               \"(x=%6.2f y=%6.2f \"\n+               \"dx1=%6.2f dy1=%6.2f \"\n+               \"dx2=%6.2f dy2=%6.2f dst tex=%p)\",\n+               fx11, fy11,\n+               dx21, dy21,\n+               dx12, dy12, dest);\n@@ -592,8 +609,8 @@\n-    J2dTraceLn8(J2D_TRACE_INFO,\n-                \"MTLRenderer_DrawParallelogram\"\n-                \"(x=%6.2f y=%6.2f \"\n-                \"dx1=%6.2f dy1=%6.2f lwr1=%6.2f \"\n-                \"dx2=%6.2f dy2=%6.2f lwr2=%6.2f)\",\n-                fx11, fy11,\n-                dx21, dy21, lwr21,\n-                dx12, dy12, lwr12);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"MTLRenderer_DrawParallelogram\"\n+               \"(x=%6.2f y=%6.2f \"\n+               \"dx1=%6.2f dy1=%6.2f lwr1=%6.2f \"\n+               \"dx2=%6.2f dy2=%6.2f lwr2=%6.2f)\",\n+               fx11, fy11,\n+               dx21, dy21, lwr21,\n+               dx12, dy12, lwr12);\n@@ -793,8 +810,8 @@\n-    J2dTraceLn6(J2D_TRACE_INFO,\n-                \"MTLRenderer_FillAAParallelogram \"\n-                \"(x=%6.2f y=%6.2f \"\n-                \"dx1=%6.2f dy1=%6.2f \"\n-                \"dx2=%6.2f dy2=%6.2f)\",\n-                fx11, fy11,\n-                dx21, dy21,\n-                dx12, dy12);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"MTLRenderer_FillAAParallelogram \"\n+               \"(x=%6.2f y=%6.2f \"\n+               \"dx1=%6.2f dy1=%6.2f \"\n+               \"dx2=%6.2f dy2=%6.2f)\",\n+               fx11, fy11,\n+               dx21, dy21,\n+               dx12, dy12);\n@@ -910,8 +927,8 @@\n-    J2dTraceLn8(J2D_TRACE_INFO,\n-                \"MTLRenderer_DrawAAParallelogram \"\n-                \"(x=%6.2f y=%6.2f \"\n-                \"dx1=%6.2f dy1=%6.2f lwr1=%6.2f \"\n-                \"dx2=%6.2f dy2=%6.2f lwr2=%6.2f)\",\n-                fx11, fy11,\n-                dx21, dy21, lwr21,\n-                dx12, dy12, lwr12);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"MTLRenderer_DrawAAParallelogram \"\n+               \"(x=%6.2f y=%6.2f \"\n+               \"dx1=%6.2f dy1=%6.2f lwr1=%6.2f \"\n+               \"dx2=%6.2f dy2=%6.2f lwr2=%6.2f)\",\n+               fx11, fy11,\n+               dx21, dy21, lwr21,\n+               dx12, dy12, lwr12);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/java2d\/metal\/MTLRenderer.m","additions":64,"deletions":47,"binary":false,"changes":111,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -45,1 +45,3 @@\n-            J2dRlsTraceLn2(J2D_TRACE_ERROR, \"MTLSurfaceData_initTexture: texture dimensions is incorrect, w=%d, h=%d\", width, height);\n+            J2dRlsTraceLn(J2D_TRACE_ERROR,\n+                          \"MTLSurfaceData_initTexture: texture dimensions is incorrect, w=%d, h=%d\",\n+                          width, height);\n@@ -65,2 +67,3 @@\n-        J2dTraceLn3(J2D_TRACE_VERBOSE, \"  desired texture dimensions: w=%d h=%d max=%d\",\n-                width, height, MTL_GPU_FAMILY_MAC_TXT_SIZE);\n+        J2dTraceLn(J2D_TRACE_VERBOSE,\n+                   \"  desired texture dimensions: w=%d h=%d max=%d\",\n+                   width, height, MTL_GPU_FAMILY_MAC_TXT_SIZE);\n@@ -96,1 +99,3 @@\n-        J2dTraceLn6(J2D_TRACE_VERBOSE, \"MTLSurfaceData_initTexture: w=%d h=%d bp=%p [tex=%p] opaque=%d rtt=%d\", width, height, bmtlsdo, bmtlsdo->pTexture, isOpaque, rtt);\n+        J2dTraceLn(J2D_TRACE_VERBOSE,\n+                   \"MTLSurfaceData_initTexture: w=%d h=%d bp=%p [tex=%p] opaque=%d rtt=%d\",\n+                   width, height, bmtlsdo, bmtlsdo->pTexture, isOpaque, rtt);\n@@ -170,1 +175,2 @@\n-    J2dTraceLn3(J2D_TRACE_VERBOSE, \"MTLSD_Delete: type=%d %p [tex=%p]\", bmtlsdo->drawableType, bmtlsdo, bmtlsdo->pTexture);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"MTLSD_Delete: type=%d %p [tex=%p]\",\n+               bmtlsdo->drawableType, bmtlsdo, bmtlsdo->pTexture);\n@@ -278,1 +284,2 @@\n-    J2dTraceLn2(J2D_TRACE_VERBOSE, \"  created window: w=%d h=%d\", bmtlsdo->width, bmtlsdo->height);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  created window: w=%d h=%d\",\n+               bmtlsdo->width, bmtlsdo->height);\n@@ -304,4 +311,4 @@\n-    J2dTraceLn1(J2D_TRACE_INFO, \"MTLSurfaceData_initOps p=%p\", bmtlsdo);\n-    J2dTraceLn1(J2D_TRACE_INFO, \"  pPeerData=%p\", jlong_to_ptr(pPeerData));\n-    J2dTraceLn1(J2D_TRACE_INFO, \"  layerPtr=%p\", jlong_to_ptr(layerPtr));\n-    J2dTraceLn2(J2D_TRACE_INFO, \"  xoff=%d, yoff=%d\", (int)xoff, (int)yoff);\n+    J2dTraceLn(J2D_TRACE_INFO, \"MTLSurfaceData_initOps p=%p\", bmtlsdo);\n+    J2dTraceLn(J2D_TRACE_INFO, \"  pPeerData=%p\", jlong_to_ptr(pPeerData));\n+    J2dTraceLn(J2D_TRACE_INFO, \"  layerPtr=%p\", jlong_to_ptr(layerPtr));\n+    J2dTraceLn(J2D_TRACE_INFO, \"  xoff=%d, yoff=%d\", (int)xoff, (int)yoff);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/java2d\/metal\/MTLSurfaceData.m","additions":18,"deletions":11,"binary":false,"changes":29,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -266,2 +266,2 @@\n-    J2dTraceLn2(J2D_TRACE_INFO, \"primary color %x, contrast %d\", col, contrast);\n-    J2dTraceLn2(J2D_TRACE_INFO, \"gamma %f, invgamma %f\", gamma, invgamma);\n+    J2dTraceLn(J2D_TRACE_INFO, \"primary color %x, contrast %d\", col, contrast);\n+    J2dTraceLn(J2D_TRACE_INFO, \"gamma %f, invgamma %f\", gamma, invgamma);\n@@ -442,2 +442,2 @@\n-    J2dTraceLn4(J2D_TRACE_INFO, \"tx1 = %f, ty1 = %f, tx2 = %f, ty2 = %f\", tx1, ty1, tx2, ty2);\n-    J2dTraceLn2(J2D_TRACE_INFO, \"width = %d height = %d\", dstOps->width, dstOps->height);\n+    J2dTraceLn(J2D_TRACE_INFO, \"tx1 = %f, ty1 = %f, tx2 = %f, ty2 = %f\", tx1, ty1, tx2, ty2);\n+    J2dTraceLn(J2D_TRACE_INFO, \"width = %d height = %d\", dstOps->width, dstOps->height);\n@@ -493,1 +493,3 @@\n-            J2dTraceLn7(J2D_TRACE_INFO, \"sx = %d sy = %d x = %d y = %d sw = %d sh = %d w = %d\", sx, sy, x, y, sw, sh, w);\n+            J2dTraceLn(J2D_TRACE_INFO,\n+                       \"sx = %d sy = %d x = %d y = %d sw = %d sh = %d w = %d\",\n+                       sx, sy, x, y, sw, sh, w);\n@@ -517,2 +519,4 @@\n-    J2dTraceLn2(J2D_TRACE_INFO, \"MTLTR_DrawLCDGlyphNoCache x %d, y%d\", x, y);\n-    J2dTraceLn3(J2D_TRACE_INFO, \"MTLTR_DrawLCDGlyphNoCache rowBytesOffset=%d, rgbOrder=%d, contrast=%d\", rowBytesOffset, rgbOrder, contrast);\n+    J2dTraceLn(J2D_TRACE_INFO, \"MTLTR_DrawLCDGlyphNoCache x %d, y%d\", x, y);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"MTLTR_DrawLCDGlyphNoCache rowBytesOffset=%d, rgbOrder=%d, contrast=%d\",\n+               rowBytesOffset, rgbOrder, contrast);\n@@ -581,1 +585,3 @@\n-    J2dTraceLn2(J2D_TRACE_INFO, \"MTLTR_DrawLCDGlyphNoCache : dstOps->width = %d, dstOps->height = %d\", dstOps->width, dstOps->height);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"MTLTR_DrawLCDGlyphNoCache : dstOps->width = %d, dstOps->height = %d\",\n+               dstOps->width, dstOps->height);\n@@ -676,1 +682,1 @@\n-    J2dTraceLn1(J2D_TRACE_INFO, \"totalGlyphs = %d\", totalGlyphs);\n+    J2dTraceLn(J2D_TRACE_INFO, \"totalGlyphs = %d\", totalGlyphs);\n@@ -714,2 +720,2 @@\n-        J2dTraceLn2(J2D_TRACE_INFO, \"Glyph width = %d height = %d\", ginfo->width, ginfo->height);\n-        J2dTraceLn1(J2D_TRACE_INFO, \"rowBytes = %d\", ginfo->rowBytes);\n+        J2dTraceLn(J2D_TRACE_INFO, \"Glyph width = %d height = %d\", ginfo->width, ginfo->height);\n+        J2dTraceLn(J2D_TRACE_INFO, \"rowBytes = %d\", ginfo->rowBytes);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/java2d\/metal\/MTLTextRenderer.m","additions":18,"deletions":12,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -374,1 +374,2 @@\n-            J2dTraceLn2(J2D_TRACE_VERBOSE, \"MTLTexturePool: resize: %d -> %d\", _poolCellWidth * _poolCellHeight, newCellsCount);\n+            J2dTraceLn(J2D_TRACE_VERBOSE, \"MTLTexturePool: resize: %d -> %d\",\n+                       _poolCellWidth * _poolCellHeight, newCellsCount);\n@@ -428,1 +429,3 @@\n-            J2dTraceLn5(J2D_TRACE_VERBOSE, \"MTLTexturePool: created pool item: tex=%p, w=%d h=%d, pf=%d | total memory = %d Kb\", minDeltaTpi.texture, width, height, format, _memoryTotalAllocated\/1024);\n+            J2dTraceLn(J2D_TRACE_VERBOSE, \"MTLTexturePool: created pool item: \"\\\n+                       \"tex=%p, w=%d h=%d, pf=%d | total memory = %d Kb\",\n+                       minDeltaTpi.texture, width, height, format, _memoryTotalAllocated\/1024);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/java2d\/metal\/MTLTexurePool.m","additions":6,"deletions":3,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -98,2 +98,3 @@\n-        J2dTraceLn1(J2D_TRACE_INFO,\n-            \"MTLVertexCache_FlushVertexCache : encode %d characters\", (vertexCacheIndex \/ 6));\n+        J2dTraceLn(J2D_TRACE_INFO,\n+                   \"MTLVertexCache_FlushVertexCache : encode %d characters\",\n+                   (vertexCacheIndex \/ 6));\n@@ -122,2 +123,3 @@\n-        J2dTraceLn1(J2D_TRACE_INFO,\n-            \"MTLVertexCache_FlushGlyphVertexCache : encode %d characters\", (vertexCacheIndex \/ 6));\n+        J2dTraceLn(J2D_TRACE_INFO,\n+                   \"MTLVertexCache_FlushGlyphVertexCache : encode %d characters\",\n+                   (vertexCacheIndex \/ 6));\n@@ -223,2 +225,2 @@\n-    J2dTraceLn1(J2D_TRACE_INFO, \"MTLVertexCache_AddMaskQuad: %d\",\n-                maskCacheIndex);\n+    J2dTraceLn(J2D_TRACE_INFO, \"MTLVertexCache_AddMaskQuad: %d\",\n+               maskCacheIndex);\n@@ -232,1 +234,2 @@\n-        J2dTraceLn2(J2D_TRACE_INFO, \"maskCacheIndex = %d, vertexCacheIndex = %d\", maskCacheIndex, vertexCacheIndex);\n+        J2dTraceLn(J2D_TRACE_INFO, \"maskCacheIndex = %d, vertexCacheIndex = %d\",\n+                   maskCacheIndex, vertexCacheIndex);\n@@ -243,2 +246,3 @@\n-        J2dTraceLn5(J2D_TRACE_INFO, \"texx = %d texy = %d width = %d height = %d maskscan = %d\", texx, texy, width,\n-                    height, maskscan);\n+        J2dTraceLn(J2D_TRACE_INFO,\n+                   \"texx = %d texy = %d width = %d height = %d maskscan = %d\",\n+                   texx, texy, width, height, maskscan);\n@@ -274,1 +278,1 @@\n-                J2dTraceLn2(J2D_TRACE_INFO, \"srcx = %d srcy = %d\", srcx, srcy);\n+                J2dTraceLn(J2D_TRACE_INFO, \"srcx = %d srcy = %d\", srcx, srcy);\n@@ -276,1 +280,1 @@\n-                J2dTraceLn2(J2D_TRACE_INFO, \"src_offset = %d dst_offset = %d\", src_offset, dst_offset);\n+                J2dTraceLn(J2D_TRACE_INFO, \"src_offset = %d dst_offset = %d\", src_offset, dst_offset);\n@@ -304,1 +308,3 @@\n-    J2dTraceLn8(J2D_TRACE_INFO, \"tx1 = %f ty1 = %f tx2 = %f ty2 = %f dx1 = %f dy1 = %f dx2 = %f dy2 = %f\", tx1, ty1, tx2, ty2, dx1, dy1, dx2, dy2);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"tx1 = %f ty1 = %f tx2 = %f ty2 = %f dx1 = %f dy1 = %f dx2 = %f dy2 = %f\",\n+               tx1, ty1, tx2, ty2, dx1, dy1, dx2, dy2);\n@@ -320,1 +326,2 @@\n-        J2dTraceLn2(J2D_TRACE_INFO, \"maskCacheIndex = %d, vertexCacheIndex = %d\", maskCacheIndex, vertexCacheIndex);\n+        J2dTraceLn(J2D_TRACE_INFO, \"maskCacheIndex = %d, vertexCacheIndex = %d\",\n+                   maskCacheIndex, vertexCacheIndex);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/java2d\/metal\/MTLVertexCache.m","additions":21,"deletions":14,"binary":false,"changes":35,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -223,1 +223,1 @@\n-        J2dRlsTraceLn1(J2D_TRACE_INFO, \"CGLGraphicsConfig_getCGLConfigInfo: OpenGL version=%s\", versionstr);\n+        J2dRlsTraceLn(J2D_TRACE_INFO, \"CGLGraphicsConfig_getCGLConfigInfo: OpenGL version=%s\", versionstr);\n@@ -237,3 +237,3 @@\n-        J2dRlsTraceLn1(J2D_TRACE_INFO,\n-                       \"CGLGraphicsConfig_getCGLConfigInfo: db=%d\",\n-                       (caps & CAPS_DOUBLEBUFFERED) != 0);\n+        J2dRlsTraceLn(J2D_TRACE_INFO,\n+                      \"CGLGraphicsConfig_getCGLConfigInfo: db=%d\",\n+                      (caps & CAPS_DOUBLEBUFFERED) != 0);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/java2d\/opengl\/CGLGraphicsConfig.m","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -202,1 +202,2 @@\n-    J2dTraceLn4(J2D_TRACE_VERBOSE, \"  src: %d %p dst: %d %p\", srcOps->drawableType, srcOps, dstOps->drawableType, dstOps);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  src: %d %p dst: %d %p\",\n+               srcOps->drawableType, srcOps, dstOps->drawableType, dstOps);\n@@ -295,1 +296,1 @@\n-    J2dTraceLn2(J2D_TRACE_VERBOSE, \"  created window: w=%d h=%d\", oglsdo->width, oglsdo->height);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  created window: w=%d h=%d\", oglsdo->width, oglsdo->height);\n@@ -341,2 +342,2 @@\n-    J2dTraceLn1(J2D_TRACE_INFO, \"  pPeerData=%p\", jlong_to_ptr(pPeerData));\n-    J2dTraceLn2(J2D_TRACE_INFO, \"  xoff=%d, yoff=%d\", (int)xoff, (int)yoff);\n+    J2dTraceLn(J2D_TRACE_INFO, \"  pPeerData=%p\", jlong_to_ptr(pPeerData));\n+    J2dTraceLn(J2D_TRACE_INFO, \"  xoff=%d, yoff=%d\", (int)xoff, (int)yoff);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/java2d\/opengl\/CGLSurfaceData.m","additions":6,"deletions":5,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1999, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1999, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -564,4 +564,1 @@\n-                int index = transmitters.indexOf(t);\n-                if (index >= 0) {\n-                    transmitters.remove(index);\n-                }\n+                transmitters.remove(t);\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/media\/sound\/AbstractMidiDevice.java","additions":2,"deletions":5,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -30,1 +30,0 @@\n-import sun.awt.AppContext;\n@@ -78,7 +77,1 @@\n-    private Window fullScreenWindow;\n-    private AppContext fullScreenAppContext; \/\/ tracks which AppContext\n-                                             \/\/ created the FS window\n-    \/\/ this lock is used for making synchronous changes to the AppContext's\n-    \/\/ current full screen window\n-    private final Object fsAppContextLock = new Object();\n-\n+    private volatile Window fullScreenWindow;\n@@ -306,9 +299,1 @@\n-        synchronized (fsAppContextLock) {\n-            \/\/ Associate fullscreen window with current AppContext\n-            if (w == null) {\n-                fullScreenAppContext = null;\n-            } else {\n-                fullScreenAppContext = AppContext.getAppContext();\n-            }\n-            fullScreenWindow = w;\n-        }\n+        fullScreenWindow = w;\n@@ -322,1 +307,1 @@\n-            if (SunToolkit.isDispatchThreadForAppContext(fullScreenWindow)) {\n+            if (EventQueue.isDispatchThread()) {\n@@ -345,9 +330,1 @@\n-        Window returnWindow = null;\n-        synchronized (fsAppContextLock) {\n-            \/\/ Only return a handle to the current fs window if we are in the\n-            \/\/ same AppContext that set the fs window\n-            if (fullScreenAppContext == AppContext.getAppContext()) {\n-                returnWindow = fullScreenWindow;\n-            }\n-        }\n-        return returnWindow;\n+        return fullScreenWindow;\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/GraphicsDevice.java","additions":5,"deletions":28,"binary":false,"changes":33,"status":"modified"},{"patch":"@@ -51,1 +51,3 @@\n-     * Constructs new {@code HeadlessException} with empty message.\n+     * Constructs a new {@code HeadlessException} with {@code null} as its detail message.\n+     * The default headless message may replace {@code null} in some cases, as outlined below.\n+     * <p>\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/HeadlessException.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1999, 2017, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1999, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -201,7 +201,1 @@\n-            if (set.remove(event)) {\n-                int i = eventsList.indexOf(event);\n-                if (i >= 0) {\n-                    eventsList.remove(i);\n-                    return true;\n-                }\n-            }\n+            return set.remove(event) && eventsList.remove(event);\n@@ -209,1 +203,0 @@\n-        return false;\n","filename":"src\/java.desktop\/share\/classes\/javax\/sound\/midi\/Track.java","additions":2,"deletions":9,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -361,2 +361,1 @@\n-                if (peerMap.get(target) == peer) {\n-                    peerMap.remove(target);\n+                if (peerMap.remove(target, peer)) {\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/AWTAutoShutdown.java","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2012, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -322,2 +322,2 @@\n-    J2dTraceLn2(J2D_TRACE_VERBOSE, \"  glyph 0x%x: adding cell 0x%x to the list\",\n-                glyph, cellInfo);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  glyph 0x%x: adding cell 0x%x to the list\",\n+               glyph, cellInfo);\n@@ -343,2 +343,2 @@\n-            J2dTraceLn2(J2D_TRACE_VERBOSE,\n-                        \"  glyph 0x%x: removing cell 0x%x from glyph's list\",\n+            J2dTraceLn(J2D_TRACE_VERBOSE,\n+                       \"  glyph 0x%x: removing cell 0x%x from glyph's list\",\n@@ -358,3 +358,3 @@\n-    J2dTraceLn2(J2D_TRACE_WARNING, \"AccelGlyphCache_RemoveCellInfo: \"\\\n-                \"no cell 0x%x in glyph 0x%x's cell list\",\n-                cellInfo, glyph);\n+    J2dTraceLn(J2D_TRACE_WARNING, \"AccelGlyphCache_RemoveCellInfo: \"\\\n+               \"no cell 0x%x in glyph 0x%x's cell list\",\n+               cellInfo, glyph);\n@@ -403,3 +403,3 @@\n-                J2dTraceLn3(J2D_TRACE_VERBOSE2,\n-                            \"  glyph 0x%x: found cell 0x%x for cache 0x%x\",\n-                            glyph, cellInfo, cache);\n+                J2dTraceLn(J2D_TRACE_VERBOSE2,\n+                           \"  glyph 0x%x: found cell 0x%x for cache 0x%x\",\n+                           glyph, cellInfo, cache);\n@@ -411,2 +411,2 @@\n-    J2dTraceLn2(J2D_TRACE_VERBOSE2, \"  glyph 0x%x: no cell for cache 0x%x\",\n-                glyph, cache);\n+    J2dTraceLn(J2D_TRACE_VERBOSE2, \"  glyph 0x%x: no cell for cache 0x%x\",\n+               glyph, cache);\n","filename":"src\/java.desktop\/share\/native\/common\/font\/AccelGlyphCache.c","additions":13,"deletions":13,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -500,5 +500,5 @@\n-        J2dTraceLn2(J2D_TRACE_VERBOSE, \"  texture=%d hint=%d\", texture, hint);\n-        J2dTraceLn4(J2D_TRACE_VERBOSE, \"  sx1=%d sy1=%d sx2=%d sy2=%d\",\n-                    sx1, sy1, sx2, sy2);\n-        J2dTraceLn4(J2D_TRACE_VERBOSE, \"  dx1=%f dy1=%f dx2=%f dy2=%f\",\n-                    dx1, dy1, dx2, dy2);\n+        J2dTraceLn(J2D_TRACE_VERBOSE, \"  texture=%d hint=%d\", texture, hint);\n+        J2dTraceLn(J2D_TRACE_VERBOSE, \"  sx1=%d sy1=%d sx2=%d sy2=%d\",\n+                   sx1, sy1, sx2, sy2);\n+        J2dTraceLn(J2D_TRACE_VERBOSE, \"  dx1=%f dy1=%f dx2=%f dy2=%f\",\n+                   dx1, dy1, dx2, dy2);\n@@ -628,6 +628,6 @@\n-            J2dTraceLn3(J2D_TRACE_VERBOSE, \"  texture=%d srctype=%d hint=%d\",\n-                        texture, srctype, hint);\n-            J2dTraceLn4(J2D_TRACE_VERBOSE, \"  sx1=%d sy1=%d sx2=%d sy2=%d\",\n-                        sx1, sy1, sx2, sy2);\n-            J2dTraceLn4(J2D_TRACE_VERBOSE, \"  dx1=%f dy1=%f dx2=%f dy2=%f\",\n-                        dx1, dy1, dx2, dy2);\n+            J2dTraceLn(J2D_TRACE_VERBOSE, \"  texture=%d srctype=%d hint=%d\",\n+                       texture, srctype, hint);\n+            J2dTraceLn(J2D_TRACE_VERBOSE, \"  sx1=%d sy1=%d sx2=%d sy2=%d\",\n+                       sx1, sy1, sx2, sy2);\n+            J2dTraceLn(J2D_TRACE_VERBOSE, \"  dx1=%f dy1=%f dx2=%f dy2=%f\",\n+                       dx1, dy1, dx2, dy2);\n@@ -824,4 +824,4 @@\n-            J2dTraceLn4(J2D_TRACE_VERBOSE, \"  sx=%d sy=%d w=%d h=%d\",\n-                        srcx, srcy, width, height);\n-            J2dTraceLn2(J2D_TRACE_VERBOSE, \"  dx=%d dy=%d\",\n-                        dstx, dsty);\n+            J2dTraceLn(J2D_TRACE_VERBOSE, \"  sx=%d sy=%d w=%d h=%d\",\n+                       srcx, srcy, width, height);\n+            J2dTraceLn(J2D_TRACE_VERBOSE, \"  dx=%d dy=%d\",\n+                       dstx, dsty);\n@@ -867,4 +867,4 @@\n-    J2dTraceLn4(J2D_TRACE_VERBOSE, \"  x=%d y=%d w=%d h=%d\",\n-                x, y, width, height);\n-    J2dTraceLn2(J2D_TRACE_VERBOSE, \"  dx=%d dy=%d\",\n-                dx, dy);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  x=%d y=%d w=%d h=%d\",\n+               x, y, width, height);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  dx=%d dy=%d\",\n+               dx, dy);\n","filename":"src\/java.desktop\/share\/native\/common\/java2d\/opengl\/OGLBlitLoops.c","additions":20,"deletions":20,"binary":false,"changes":40,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -138,3 +138,3 @@\n-    J2dTraceLn1(J2D_TRACE_INFO,\n-                \"OGLBufImgOps_CreateConvolveProgram: flags=%d\",\n-                flags);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"OGLBufImgOps_CreateConvolveProgram: flags=%d\",\n+               flags);\n@@ -192,3 +192,3 @@\n-    J2dTraceLn2(J2D_TRACE_INFO,\n-                \"OGLBufImgOps_EnableConvolveOp: kernelW=%d kernelH=%d\",\n-                kernelWidth, kernelHeight);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"OGLBufImgOps_EnableConvolveOp: kernelW=%d kernelH=%d\",\n+               kernelWidth, kernelHeight);\n@@ -353,3 +353,3 @@\n-    J2dTraceLn1(J2D_TRACE_INFO,\n-                \"OGLBufImgOps_CreateRescaleProgram: flags=%d\",\n-                flags);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"OGLBufImgOps_CreateRescaleProgram: flags=%d\",\n+               flags);\n@@ -575,3 +575,3 @@\n-    J2dTraceLn1(J2D_TRACE_INFO,\n-                \"OGLBufImgOps_CreateLookupProgram: flags=%d\",\n-                flags);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"OGLBufImgOps_CreateLookupProgram: flags=%d\",\n+               flags);\n@@ -635,3 +635,3 @@\n-    J2dTraceLn4(J2D_TRACE_INFO,\n-                \"OGLBufImgOps_EnableLookupOp: short=%d num=%d len=%d off=%d\",\n-                shortData, numBands, bandLength, offset);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"OGLBufImgOps_EnableLookupOp: short=%d num=%d len=%d off=%d\",\n+               shortData, numBands, bandLength, offset);\n","filename":"src\/java.desktop\/share\/native\/common\/java2d\/opengl\/OGLBufImgOps.c","additions":16,"deletions":16,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2004, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2004, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -90,5 +90,5 @@\n-    J2dTraceLn4(J2D_TRACE_INFO,\n-                \"OGLContext_SetViewport: w=%d h=%d read=%s draw=%s\",\n-                width, height,\n-                OGLC_ACTIVE_BUFFER_NAME(srcOps->activeBuffer),\n-                OGLC_ACTIVE_BUFFER_NAME(dstOps->activeBuffer));\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"OGLContext_SetViewport: w=%d h=%d read=%s draw=%s\",\n+               width, height,\n+               OGLC_ACTIVE_BUFFER_NAME(srcOps->activeBuffer),\n+               OGLC_ACTIVE_BUFFER_NAME(dstOps->activeBuffer));\n@@ -165,2 +165,2 @@\n-    J2dTraceLn2(J2D_TRACE_VERBOSE, \"  srctype=%d dsttype=%d\",\n-                srcOps->drawableType, dstOps->drawableType);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  srctype=%d dsttype=%d\",\n+               srcOps->drawableType, dstOps->drawableType);\n@@ -233,3 +233,3 @@\n-    J2dTraceLn4(J2D_TRACE_INFO,\n-                \"OGLContext_SetRectClip: x=%d y=%d w=%d h=%d\",\n-                x1, y1, width, height);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"OGLContext_SetRectClip: x=%d y=%d w=%d h=%d\",\n+               x1, y1, width, height);\n@@ -338,1 +338,1 @@\n-    J2dTraceLn1(J2D_TRACE_INFO, \"OGLContext_SetExtraAlpha: ea=%f\", ea);\n+    J2dTraceLn(J2D_TRACE_INFO, \"OGLContext_SetExtraAlpha: ea=%f\", ea);\n@@ -380,2 +380,2 @@\n-    J2dTraceLn1(J2D_TRACE_INFO,\n-                \"OGLContext_SetAlphaComposite: flags=%d\", flags);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"OGLContext_SetAlphaComposite: flags=%d\", flags);\n@@ -401,2 +401,2 @@\n-        J2dTraceLn1(J2D_TRACE_VERBOSE,\n-                    \"  disabling alpha comp: rule=%d ea=1.0 src=opq\", rule);\n+        J2dTraceLn(J2D_TRACE_VERBOSE,\n+                   \"  disabling alpha comp: rule=%d ea=1.0 src=opq\", rule);\n@@ -405,2 +405,2 @@\n-        J2dTraceLn2(J2D_TRACE_VERBOSE,\n-                    \"  enabling alpha comp: rule=%d ea=%f\", rule, extraAlpha);\n+        J2dTraceLn(J2D_TRACE_VERBOSE,\n+                   \"  enabling alpha comp: rule=%d ea=%f\", rule, extraAlpha);\n@@ -424,2 +424,2 @@\n-    J2dTraceLn1(J2D_TRACE_INFO,\n-                \"OGLContext_SetXorComposite: xorPixel=%08x\", xorPixel);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"OGLContext_SetXorComposite: xorPixel=%08x\", xorPixel);\n@@ -500,6 +500,6 @@\n-    J2dTraceLn3(J2D_TRACE_VERBOSE, \"  [%lf %lf %lf]\",\n-                oglc->xformMatrix[0], oglc->xformMatrix[4],\n-                oglc->xformMatrix[12]);\n-    J2dTraceLn3(J2D_TRACE_VERBOSE, \"  [%lf %lf %lf]\",\n-                oglc->xformMatrix[1], oglc->xformMatrix[5],\n-                oglc->xformMatrix[13]);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  [%lf %lf %lf]\",\n+               oglc->xformMatrix[0], oglc->xformMatrix[4],\n+               oglc->xformMatrix[12]);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  [%lf %lf %lf]\",\n+               oglc->xformMatrix[1], oglc->xformMatrix[5],\n+               oglc->xformMatrix[13]);\n@@ -637,3 +637,3 @@\n-    J2dRlsTraceLn2(J2D_TRACE_INFO,\n-                   \"OGLContext_IsExtensionAvailable: %s=%s\",\n-                   extName, ret ? \"true\" : \"false\");\n+    J2dRlsTraceLn(J2D_TRACE_INFO,\n+                  \"OGLContext_IsExtensionAvailable: %s=%s\",\n+                  extName, ret ? \"true\" : \"false\");\n@@ -754,3 +754,3 @@\n-        J2dRlsTraceLn1(J2D_TRACE_INFO,\n-          \"OGLContext_IsLCDShaderSupportAvailable: not enough tex units (%d)\",\n-          maxTexUnits);\n+        J2dRlsTraceLn(J2D_TRACE_INFO,\n+                      \"OGLContext_IsLCDShaderSupportAvailable: not enough tex units (%d)\",\n+                      maxTexUnits);\n@@ -984,3 +984,3 @@\n-        J2dRlsTraceLn2(J2D_TRACE_WARNING,\n-            \"OGLContext_CreateFragmentProgram: compiler msg (%d):\\n%s\",\n-                       infoLogLength, infoLog);\n+        J2dRlsTraceLn(J2D_TRACE_WARNING,\n+                      \"OGLContext_CreateFragmentProgram: compiler msg (%d):\\n%s\",\n+                      infoLogLength, infoLog);\n@@ -1016,3 +1016,3 @@\n-        J2dRlsTraceLn2(J2D_TRACE_WARNING,\n-            \"OGLContext_CreateFragmentProgram: linker msg (%d):\\n%s\",\n-                       infoLogLength, infoLog);\n+        J2dRlsTraceLn(J2D_TRACE_WARNING,\n+                      \"OGLContext_CreateFragmentProgram: linker msg (%d):\\n%s\",\n+                      infoLogLength, infoLog);\n@@ -1066,1 +1066,1 @@\n-        J2dTraceLn1(J2D_TRACE_VERBOSE, \"  id=%s\", pAdapterId);\n+        J2dTraceLn(J2D_TRACE_VERBOSE, \"  id=%s\", pAdapterId);\n","filename":"src\/java.desktop\/share\/native\/common\/java2d\/opengl\/OGLContext.c","additions":39,"deletions":39,"binary":false,"changes":78,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2012, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -184,1 +184,1 @@\n- *    J2dTrace1(J2D_TRACE_ERROR, \"could not load function: %s\", #f)\n+ *    J2dTrace(J2D_TRACE_ERROR, \"could not load function: %s\", #f)\n","filename":"src\/java.desktop\/share\/native\/common\/java2d\/opengl\/OGLFuncs.h","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2006, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -97,3 +97,3 @@\n-    J2dTraceLn4(J2D_TRACE_VERBOSE, \"  x=%d y=%d w=%d h=%d\", x, y, w, h);\n-    J2dTraceLn2(J2D_TRACE_VERBOSE, \"  maskoff=%d maskscan=%d\",\n-                maskoff, maskscan);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  x=%d y=%d w=%d h=%d\", x, y, w, h);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  maskoff=%d maskscan=%d\",\n+               maskoff, maskscan);\n","filename":"src\/java.desktop\/share\/native\/common\/java2d\/opengl\/OGLMaskFill.c","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -47,1 +47,1 @@\n-    J2dTraceLn1(J2D_TRACE_VERBOSE, \"  state=%d\", oglc->paintState);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  state=%d\", oglc->paintState);\n@@ -105,1 +105,1 @@\n-    J2dTraceLn1(J2D_TRACE_INFO, \"OGLPaints_SetColor: pixel=%08x\", pixel);\n+    J2dTraceLn(J2D_TRACE_INFO, \"OGLPaints_SetColor: pixel=%08x\", pixel);\n@@ -126,3 +126,3 @@\n-        J2dTraceLn4(J2D_TRACE_VERBOSE,\n-                    \"  updating color: r=%02x g=%02x b=%02x a=%02x\",\n-                    r, g, b, a);\n+        J2dTraceLn(J2D_TRACE_VERBOSE,\n+                   \"  updating color: r=%02x g=%02x b=%02x a=%02x\",\n+                   r, g, b, a);\n@@ -137,3 +137,3 @@\n-        J2dTraceLn4(J2D_TRACE_VERBOSE,\n-                    \"  updating xor color: r=%02x g=%02x b=%02x xorpixel=%08x\",\n-                    r, g, b, oglc->xorPixel);\n+        J2dTraceLn(J2D_TRACE_VERBOSE,\n+                   \"  updating xor color: r=%02x g=%02x b=%02x xorpixel=%08x\",\n+                   r, g, b, oglc->xorPixel);\n@@ -707,3 +707,3 @@\n-    J2dTraceLn1(J2D_TRACE_INFO,\n-                \"OGLPaints_CreateLinearGradProgram\",\n-                flags);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"OGLPaints_CreateLinearGradProgram\",\n+               flags);\n@@ -811,3 +811,3 @@\n-    J2dTraceLn1(J2D_TRACE_INFO,\n-                \"OGLPaints_CreateRadialGradProgram\",\n-                flags);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"OGLPaints_CreateRadialGradProgram\",\n+               flags);\n","filename":"src\/java.desktop\/share\/native\/common\/java2d\/opengl\/OGLPaints.c","additions":15,"deletions":15,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -76,2 +76,2 @@\n-    J2dTraceLn1(J2D_TRACE_INFO,\n-                \"OGLRenderQueue_flushBuffer: limit=%d\", limit);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"OGLRenderQueue_flushBuffer: limit=%d\", limit);\n@@ -92,3 +92,3 @@\n-        J2dTraceLn2(J2D_TRACE_VERBOSE,\n-                    \"OGLRenderQueue_flushBuffer: opcode=%d, rem=%d\",\n-                    opcode, (end-b));\n+        J2dTraceLn(J2D_TRACE_VERBOSE,\n+                   \"OGLRenderQueue_flushBuffer: opcode=%d, rem=%d\",\n+                   opcode, (end-b));\n@@ -670,2 +670,3 @@\n-            J2dRlsTraceLn1(J2D_TRACE_ERROR,\n-                \"OGLRenderQueue_flushBuffer: invalid opcode=%d\", opcode);\n+            J2dRlsTraceLn(J2D_TRACE_ERROR,\n+                          \"OGLRenderQueue_flushBuffer: invalid opcode=%d\",\n+                          opcode);\n@@ -759,2 +760,2 @@\n-    J2dTraceLn1(J2D_TRACE_VERBOSE,\n-                \"OGLRenderQueue_CheckPreviousOp: new op=%d\", op);\n+    J2dTraceLn(J2D_TRACE_VERBOSE,\n+               \"OGLRenderQueue_CheckPreviousOp: new op=%d\", op);\n","filename":"src\/java.desktop\/share\/native\/common\/java2d\/opengl\/OGLRenderQueue.c","additions":11,"deletions":10,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2008, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -117,2 +117,2 @@\n-        J2dTraceLn1(J2D_TRACE_ERROR,       \\\n-                    \"%s is null\", #value); \\\n+        J2dTraceLn(J2D_TRACE_ERROR,        \\\n+                   \"%s is null\", #value);  \\\n","filename":"src\/java.desktop\/share\/native\/common\/java2d\/opengl\/OGLRenderQueue.h","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2008, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -344,8 +344,8 @@\n-    J2dTraceLn6(J2D_TRACE_INFO,\n-                \"OGLRenderer_FillParallelogram \"\n-                \"(x=%6.2f y=%6.2f \"\n-                \"dx1=%6.2f dy1=%6.2f \"\n-                \"dx2=%6.2f dy2=%6.2f)\",\n-                fx11, fy11,\n-                dx21, dy21,\n-                dx12, dy12);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"OGLRenderer_FillParallelogram \"\n+               \"(x=%6.2f y=%6.2f \"\n+               \"dx1=%6.2f dy1=%6.2f \"\n+               \"dx2=%6.2f dy2=%6.2f)\",\n+               fx11, fy11,\n+               dx21, dy21,\n+               dx12, dy12);\n@@ -377,8 +377,8 @@\n-    J2dTraceLn8(J2D_TRACE_INFO,\n-                \"OGLRenderer_DrawParallelogram \"\n-                \"(x=%6.2f y=%6.2f \"\n-                \"dx1=%6.2f dy1=%6.2f lwr1=%6.2f \"\n-                \"dx2=%6.2f dy2=%6.2f lwr2=%6.2f)\",\n-                fx11, fy11,\n-                dx21, dy21, lwr21,\n-                dx12, dy12, lwr12);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"OGLRenderer_DrawParallelogram \"\n+               \"(x=%6.2f y=%6.2f \"\n+               \"dx1=%6.2f dy1=%6.2f lwr1=%6.2f \"\n+               \"dx2=%6.2f dy2=%6.2f lwr2=%6.2f)\",\n+               fx11, fy11,\n+               dx21, dy21, lwr21,\n+               dx12, dy12, lwr12);\n@@ -599,8 +599,8 @@\n-    J2dTraceLn6(J2D_TRACE_INFO,\n-                \"OGLRenderer_FillAAParallelogram \"\n-                \"(x=%6.2f y=%6.2f \"\n-                \"dx1=%6.2f dy1=%6.2f \"\n-                \"dx2=%6.2f dy2=%6.2f)\",\n-                fx11, fy11,\n-                dx21, dy21,\n-                dx12, dy12);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"OGLRenderer_FillAAParallelogram \"\n+               \"(x=%6.2f y=%6.2f \"\n+               \"dx1=%6.2f dy1=%6.2f \"\n+               \"dx2=%6.2f dy2=%6.2f)\",\n+               fx11, fy11,\n+               dx21, dy21,\n+               dx12, dy12);\n@@ -734,8 +734,8 @@\n-    J2dTraceLn8(J2D_TRACE_INFO,\n-                \"OGLRenderer_DrawAAParallelogram \"\n-                \"(x=%6.2f y=%6.2f \"\n-                \"dx1=%6.2f dy1=%6.2f lwr1=%6.2f \"\n-                \"dx2=%6.2f dy2=%6.2f lwr2=%6.2f)\",\n-                fx11, fy11,\n-                dx21, dy21, lwr21,\n-                dx12, dy12, lwr12);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"OGLRenderer_DrawAAParallelogram \"\n+               \"(x=%6.2f y=%6.2f \"\n+               \"dx1=%6.2f dy1=%6.2f lwr1=%6.2f \"\n+               \"dx2=%6.2f dy2=%6.2f lwr2=%6.2f)\",\n+               fx11, fy11,\n+               dx21, dy21, lwr21,\n+               dx12, dy12, lwr12);\n","filename":"src\/java.desktop\/share\/native\/common\/java2d\/opengl\/OGLRenderer.c","additions":33,"deletions":33,"binary":false,"changes":66,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -145,3 +145,3 @@\n-    J2dTraceLn4(J2D_TRACE_INFO,\n-                \"OGLSD_InitTextureObject: w=%d h=%d opq=%d nonpow2=%d\",\n-                width, height, isOpaque, texNonPow2);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"OGLSD_InitTextureObject: w=%d h=%d opq=%d nonpow2=%d\",\n+               width, height, isOpaque, texNonPow2);\n@@ -178,3 +178,3 @@\n-    J2dTraceLn3(J2D_TRACE_VERBOSE,\n-                \"  desired texture dimensions: w=%d h=%d max=%d\",\n-                texWidth, texHeight, texMax);\n+    J2dTraceLn(J2D_TRACE_VERBOSE,\n+               \"  desired texture dimensions: w=%d h=%d max=%d\",\n+               texWidth, texHeight, texMax);\n@@ -203,3 +203,2 @@\n-        J2dRlsTraceLn2(J2D_TRACE_ERROR,\n-            \"OGLSD_InitTextureObject: actual (w=%d h=%d) != requested\",\n-                       realWidth, realHeight);\n+        J2dRlsTraceLn(J2D_TRACE_ERROR, \"OGLSD_InitTextureObject: \"\\\n+                      \"actual (w=%d h=%d) != requested\", realWidth, realHeight);\n@@ -230,2 +229,2 @@\n-    J2dTraceLn3(J2D_TRACE_VERBOSE, \"  created texture: w=%d h=%d id=%d\",\n-                width, height, texID);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  created texture: w=%d h=%d id=%d\",\n+               width, height, texID);\n@@ -249,2 +248,2 @@\n-    J2dTraceLn2(J2D_TRACE_INFO, \"OGLSurfaceData_initTexture: w=%d h=%d\",\n-                width, height);\n+    J2dTraceLn(J2D_TRACE_INFO, \"OGLSurfaceData_initTexture: w=%d h=%d\",\n+               width, height);\n@@ -309,2 +308,2 @@\n-    J2dTraceLn3(J2D_TRACE_INFO, \"OGLSD_InitFBObject: w=%d h=%d texid=%d\",\n-                textureWidth, textureHeight, textureID);\n+    J2dTraceLn(J2D_TRACE_INFO, \"OGLSD_InitFBObject: w=%d h=%d texid=%d\",\n+               textureWidth, textureHeight, textureID);\n@@ -337,3 +336,3 @@\n-            J2dTraceLn2(J2D_TRACE_VERBOSE,\n-                \"OGLSD_InitFBObject: could not create depth buffer: depth=%d error=%x\",\n-                           depthSize, error);\n+            J2dTraceLn(J2D_TRACE_VERBOSE, \"OGLSD_InitFBObject: \"\\\n+                       \"could not create depth buffer: depth=%d error=%x\",\n+                       depthSize, error);\n@@ -354,2 +353,2 @@\n-            J2dTraceLn1(J2D_TRACE_VERBOSE,\n-                        \"  framebuffer is complete: depth=%d\", depthSize);\n+            J2dTraceLn(J2D_TRACE_VERBOSE,\n+                       \"  framebuffer is complete: depth=%d\", depthSize);\n@@ -360,3 +359,3 @@\n-            J2dTraceLn2(J2D_TRACE_VERBOSE,\n-                        \"  framebuffer is incomplete: depth=%d status=%x\",\n-                        depthSize, status);\n+            J2dTraceLn(J2D_TRACE_VERBOSE,\n+                       \"  framebuffer is incomplete: depth=%d status=%x\",\n+                       depthSize, status);\n@@ -401,3 +400,3 @@\n-    J2dTraceLn2(J2D_TRACE_INFO,\n-                \"OGLSurfaceData_initFBObject: w=%d h=%d\",\n-                width, height);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"OGLSurfaceData_initFBObject: w=%d h=%d\",\n+               width, height);\n@@ -558,2 +557,2 @@\n-    J2dTraceLn1(J2D_TRACE_INFO, \"OGLSD_Delete: type=%d\",\n-                oglsdo->drawableType);\n+    J2dTraceLn(J2D_TRACE_INFO, \"OGLSD_Delete: type=%d\",\n+               oglsdo->drawableType);\n","filename":"src\/java.desktop\/share\/native\/common\/java2d\/opengl\/OGLSurfaceData.c","additions":28,"deletions":29,"binary":false,"changes":57,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2013, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -350,2 +350,2 @@\n-    J2dTraceLn1(J2D_TRACE_INFO,\n-                \"OGLTR_UpdateLCDTextContrast: contrast=%d\", contrast);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"OGLTR_UpdateLCDTextContrast: contrast=%d\", contrast);\n@@ -379,2 +379,2 @@\n-    J2dTraceLn1(J2D_TRACE_INFO,\n-                \"OGLTR_UpdateLCDTextColor: contrast=%d\", contrast);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"OGLTR_UpdateLCDTextColor: contrast=%d\", contrast);\n","filename":"src\/java.desktop\/share\/native\/common\/java2d\/opengl\/OGLTextRenderer.c","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2012, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -223,2 +223,2 @@\n-    J2dTraceLn1(J2D_TRACE_INFO, \"OGLVertexCache_AddMaskQuad: %d\",\n-                maskCacheIndex);\n+    J2dTraceLn(J2D_TRACE_INFO, \"OGLVertexCache_AddMaskQuad: %d\",\n+               maskCacheIndex);\n","filename":"src\/java.desktop\/share\/native\/common\/java2d\/opengl\/OGLVertexCache.c","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2008, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -57,18 +57,2 @@\n-#define J2dTrace(level, string)\n-#define J2dTrace1(level, string, arg1)\n-#define J2dTrace2(level, string, arg1, arg2)\n-#define J2dTrace3(level, string, arg1, arg2, arg3)\n-#define J2dTrace4(level, string, arg1, arg2, arg3, arg4)\n-#define J2dTrace5(level, string, arg1, arg2, arg3, arg4, arg5)\n-#define J2dTrace6(level, string, arg1, arg2, arg3, arg4, arg5, arg6)\n-#define J2dTrace7(level, string, arg1, arg2, arg3, arg4, arg5, arg6, arg7)\n-#define J2dTrace8(level, string, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8)\n-#define J2dTraceLn(level, string)\n-#define J2dTraceLn1(level, string, arg1)\n-#define J2dTraceLn2(level, string, arg1, arg2)\n-#define J2dTraceLn3(level, string, arg1, arg2, arg3)\n-#define J2dTraceLn4(level, string, arg1, arg2, arg3, arg4)\n-#define J2dTraceLn5(level, string, arg1, arg2, arg3, arg4, arg5)\n-#define J2dTraceLn6(level, string, arg1, arg2, arg3, arg4, arg5, arg6)\n-#define J2dTraceLn7(level, string, arg1, arg2, arg3, arg4, arg5, arg6, arg7)\n-#define J2dTraceLn8(level, string, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8)\n+#define J2dTrace(level, ...)\n+#define J2dTraceLn(level, ...)\n@@ -76,54 +60,4 @@\n-#define J2dTrace(level, string) { \\\n-            J2dTraceImpl(level, JNI_FALSE, string); \\\n-        }\n-#define J2dTrace1(level, string, arg1) { \\\n-            J2dTraceImpl(level, JNI_FALSE, string, arg1); \\\n-        }\n-#define J2dTrace2(level, string, arg1, arg2) { \\\n-            J2dTraceImpl(level, JNI_FALSE, string, arg1, arg2); \\\n-        }\n-#define J2dTrace3(level, string, arg1, arg2, arg3) { \\\n-            J2dTraceImpl(level, JNI_FALSE, string, arg1, arg2, arg3); \\\n-        }\n-#define J2dTrace4(level, string, arg1, arg2, arg3, arg4) { \\\n-            J2dTraceImpl(level, JNI_FALSE, string, arg1, arg2, arg3, arg4); \\\n-        }\n-#define J2dTrace5(level, string, arg1, arg2, arg3, arg4, arg5) { \\\n-            J2dTraceImpl(level, JNI_FALSE, string, arg1, arg2, arg3, arg4, arg5); \\\n-        }\n-#define J2dTrace6(level, string, arg1, arg2, arg3, arg4, arg5, arg6) { \\\n-            J2dTraceImpl(level, JNI_FALSE, string, arg1, arg2, arg3, arg4, arg5, arg6); \\\n-        }\n-#define J2dTrace7(level, string, arg1, arg2, arg3, arg4, arg5, arg6, arg7) { \\\n-            J2dTraceImpl(level, JNI_FALSE, string, arg1, arg2, arg3, arg4, arg5, arg6, arg7); \\\n-        }\n-#define J2dTrace8(level, string, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8) { \\\n-            J2dTraceImpl(level, JNI_FALSE, string, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8); \\\n-        }\n-#define J2dTraceLn(level, string) { \\\n-            J2dTraceImpl(level, JNI_TRUE, string); \\\n-        }\n-#define J2dTraceLn1(level, string, arg1) { \\\n-            J2dTraceImpl(level, JNI_TRUE, string, arg1); \\\n-        }\n-#define J2dTraceLn2(level, string, arg1, arg2) { \\\n-            J2dTraceImpl(level, JNI_TRUE, string, arg1, arg2); \\\n-        }\n-#define J2dTraceLn3(level, string, arg1, arg2, arg3) { \\\n-            J2dTraceImpl(level, JNI_TRUE, string, arg1, arg2, arg3); \\\n-        }\n-#define J2dTraceLn4(level, string, arg1, arg2, arg3, arg4) { \\\n-            J2dTraceImpl(level, JNI_TRUE, string, arg1, arg2, arg3, arg4); \\\n-        }\n-#define J2dTraceLn5(level, string, arg1, arg2, arg3, arg4, arg5) { \\\n-            J2dTraceImpl(level, JNI_TRUE, string, arg1, arg2, arg3, arg4, arg5); \\\n-        }\n-#define J2dTraceLn6(level, string, arg1, arg2, arg3, arg4, arg5, arg6) { \\\n-            J2dTraceImpl(level, JNI_TRUE, string, arg1, arg2, arg3, arg4, arg5, arg6); \\\n-        }\n-#define J2dTraceLn7(level, string, arg1, arg2, arg3, arg4, arg5, arg6, arg7) { \\\n-            J2dTraceImpl(level, JNI_TRUE, string, arg1, arg2, arg3, arg4, arg5, arg6, arg7); \\\n-        }\n-#define J2dTraceLn8(level, string, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8) { \\\n-            J2dTraceImpl(level, JNI_TRUE, string, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8); \\\n-        }\n+#define J2dTrace(level, ...) \\\n+            J2dTraceImpl(level, JNI_FALSE, __VA_ARGS__)\n+#define J2dTraceLn(level, ...) \\\n+            J2dTraceImpl(level, JNI_TRUE, __VA_ARGS__)\n@@ -139,36 +73,4 @@\n-#define J2dRlsTrace(level, string) { \\\n-            J2dTraceImpl(level, JNI_FALSE, string); \\\n-        }\n-#define J2dRlsTrace1(level, string, arg1) { \\\n-            J2dTraceImpl(level, JNI_FALSE, string, arg1); \\\n-        }\n-#define J2dRlsTrace2(level, string, arg1, arg2) { \\\n-            J2dTraceImpl(level, JNI_FALSE, string, arg1, arg2); \\\n-        }\n-#define J2dRlsTrace3(level, string, arg1, arg2, arg3) { \\\n-            J2dTraceImpl(level, JNI_FALSE, string, arg1, arg2, arg3); \\\n-        }\n-#define J2dRlsTrace4(level, string, arg1, arg2, arg3, arg4) { \\\n-            J2dTraceImpl(level, JNI_FALSE, string, arg1, arg2, arg3, arg4); \\\n-        }\n-#define J2dRlsTrace5(level, string, arg1, arg2, arg3, arg4, arg5) { \\\n-            J2dTraceImpl(level, JNI_FALSE, string, arg1, arg2, arg3, arg4, arg5); \\\n-        }\n-#define J2dRlsTraceLn(level, string) { \\\n-            J2dTraceImpl(level, JNI_TRUE, string); \\\n-        }\n-#define J2dRlsTraceLn1(level, string, arg1) { \\\n-            J2dTraceImpl(level, JNI_TRUE, string, arg1); \\\n-        }\n-#define J2dRlsTraceLn2(level, string, arg1, arg2) { \\\n-            J2dTraceImpl(level, JNI_TRUE, string, arg1, arg2); \\\n-        }\n-#define J2dRlsTraceLn3(level, string, arg1, arg2, arg3) { \\\n-            J2dTraceImpl(level, JNI_TRUE, string, arg1, arg2, arg3); \\\n-        }\n-#define J2dRlsTraceLn4(level, string, arg1, arg2, arg3, arg4) { \\\n-            J2dTraceImpl(level, JNI_TRUE, string, arg1, arg2, arg3, arg4); \\\n-        }\n-#define J2dRlsTraceLn5(level, string, arg1, arg2, arg3, arg4, arg5) { \\\n-            J2dTraceImpl(level, JNI_TRUE, string, arg1, arg2, arg3, arg4, arg5); \\\n-        }\n+#define J2dRlsTrace(level, ...) \\\n+            J2dTraceImpl(level, JNI_FALSE, __VA_ARGS__)\n+#define J2dRlsTraceLn(level, ...) \\\n+            J2dTraceImpl(level, JNI_TRUE, __VA_ARGS__)\n","filename":"src\/java.desktop\/share\/native\/libawt\/java2d\/Trace.h","additions":11,"deletions":109,"binary":false,"changes":120,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2010, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -277,4 +277,4 @@\n-                    J2dTraceLn1(J2D_TRACE_ERROR,\n-                                \"DrawParallelogram: \"\n-                                \"ODD NUMBER OF PGRAM EDGES (%d)!!\",\n-                                numactive);\n+                    J2dTraceLn(J2D_TRACE_ERROR,\n+                               \"DrawParallelogram: \"\n+                               \"ODD NUMBER OF PGRAM EDGES (%d)!!\",\n+                               numactive);\n","filename":"src\/java.desktop\/share\/native\/libawt\/java2d\/loops\/DrawParallelogram.c","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2010, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -65,3 +65,3 @@\n-    J2dTraceLn1(J2D_TRACE_INFO,\n-                \"BufferedMaskBlit_enqueueTile: bpos=%d\",\n-                bpos);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"BufferedMaskBlit_enqueueTile: bpos=%d\",\n+               bpos);\n@@ -142,9 +142,9 @@\n-            J2dTraceLn4(J2D_TRACE_VERBOSE,\n-                        \"  sx=%d sy=%d w=%d h=%d\",\n-                        srcInfo.bounds.x1, srcInfo.bounds.y1, width, height);\n-            J2dTraceLn2(J2D_TRACE_VERBOSE,\n-                        \"  maskoff=%d maskscan=%d\",\n-                        maskoff, maskscan);\n-            J2dTraceLn2(J2D_TRACE_VERBOSE,\n-                        \"  pixstride=%d scanstride=%d\",\n-                        srcPixelStride, srcScanStride);\n+            J2dTraceLn(J2D_TRACE_VERBOSE,\n+                       \"  sx=%d sy=%d w=%d h=%d\",\n+                       srcInfo.bounds.x1, srcInfo.bounds.y1, width, height);\n+            J2dTraceLn(J2D_TRACE_VERBOSE,\n+                       \"  maskoff=%d maskscan=%d\",\n+                       maskoff, maskscan);\n+            J2dTraceLn(J2D_TRACE_VERBOSE,\n+                       \"  pixstride=%d scanstride=%d\",\n+                       srcPixelStride, srcScanStride);\n","filename":"src\/java.desktop\/share\/native\/libawt\/java2d\/pipe\/BufferedMaskBlit.c","additions":13,"deletions":13,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -62,3 +62,3 @@\n-    J2dTraceLn2(J2D_TRACE_INFO,\n-                \"BufferedRenderPipe_fillSpans: bpos=%d limit=%d\",\n-                bpos, limit);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"BufferedRenderPipe_fillSpans: bpos=%d limit=%d\",\n+               bpos, limit);\n","filename":"src\/java.desktop\/share\/native\/libawt\/java2d\/pipe\/BufferedRenderPipe.c","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -99,2 +99,2 @@\n-    J2dRlsTraceLn1(J2D_TRACE_INFO,\n-                   \"GLXGC_InitGLX: client GLX version=%s\", version);\n+    J2dRlsTraceLn(J2D_TRACE_INFO,\n+                  \"GLXGC_InitGLX: client GLX version=%s\", version);\n@@ -227,2 +227,2 @@\n-    J2dRlsTraceLn2(J2D_TRACE_INFO, \"GLXGC_InitFBConfig: scn=%d vis=0x%x\",\n-                   screennum, visualid);\n+    J2dRlsTraceLn(J2D_TRACE_INFO, \"GLXGC_InitFBConfig: scn=%d vis=0x%x\",\n+                  screennum, visualid);\n@@ -278,3 +278,3 @@\n-            J2dRlsTrace5(J2D_TRACE_VERBOSE,\n-                \"[V]     id=0x%x db=%d alpha=%d depth=%d stencil=%d valid=\",\n-                         fbvisualid, db, alpha, depth, stencil);\n+            J2dRlsTrace(J2D_TRACE_VERBOSE,\n+                        \"[V]     id=0x%x db=%d alpha=%d depth=%d stencil=%d valid=\",\n+                        fbvisualid, db, alpha, depth, stencil);\n@@ -340,1 +340,1 @@\n-    J2dRlsTraceLn1(J2D_TRACE_INFO, \"GLXGC_FindBestVisual: scn=%d\", screen);\n+    J2dRlsTraceLn(J2D_TRACE_INFO, \"GLXGC_FindBestVisual: scn=%d\", screen);\n@@ -365,3 +365,3 @@\n-    J2dRlsTraceLn2(J2D_TRACE_INFO,\n-        \"GLXGC_FindBestVisual: chose 0x%x as the best visual for screen %d\",\n-                   visualid, screen);\n+    J2dRlsTraceLn(J2D_TRACE_INFO,\n+                  \"GLXGC_FindBestVisual: chose 0x%x as the best visual for screen %d\",\n+                  visualid, screen);\n@@ -513,3 +513,3 @@\n-    J2dRlsTraceLn1(J2D_TRACE_INFO,\n-        \"GLXGraphicsConfig_getGLXConfigInfo: OpenGL version=%s\",\n-                   (versionstr == NULL) ? \"null\" : (char *)versionstr);\n+    J2dRlsTraceLn(J2D_TRACE_INFO,\n+                  \"GLXGraphicsConfig_getGLXConfigInfo: OpenGL version=%s\",\n+                  (versionstr == NULL) ? \"null\" : (char *)versionstr);\n","filename":"src\/java.desktop\/unix\/native\/common\/java2d\/opengl\/GLXGraphicsConfig.c","additions":15,"deletions":15,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -310,2 +310,2 @@\n-    J2dTraceLn2(J2D_TRACE_VERBOSE, \"  created window: w=%d h=%d\",\n-                oglsdo->width, oglsdo->height);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  created window: w=%d h=%d\",\n+               oglsdo->width, oglsdo->height);\n","filename":"src\/java.desktop\/unix\/native\/common\/java2d\/opengl\/GLXSurfaceData.c","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1999, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1999, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -537,3 +537,3 @@\n-        J2dRlsTraceLn1(J2D_TRACE_ERROR,\n-                       \"X11SD_SetupSharedSegment shmget has failed: %s\",\n-                       strerror(errno));\n+        J2dRlsTraceLn(J2D_TRACE_ERROR,\n+                      \"X11SD_SetupSharedSegment shmget has failed: %s\",\n+                      strerror(errno));\n@@ -548,3 +548,3 @@\n-        J2dRlsTraceLn1(J2D_TRACE_ERROR,\n-                       \"X11SD_SetupSharedSegment shmat has failed: %s\",\n-                       strerror(errno));\n+        J2dRlsTraceLn(J2D_TRACE_ERROR,\n+                      \"X11SD_SetupSharedSegment shmat has failed: %s\",\n+                      strerror(errno));\n@@ -570,3 +570,3 @@\n-        J2dRlsTraceLn1(J2D_TRACE_ERROR,\n-                       \"X11SD_SetupSharedSegment XShmAttach has failed: %s\",\n-                       strerror(errno));\n+        J2dRlsTraceLn(J2D_TRACE_ERROR,\n+                      \"X11SD_SetupSharedSegment XShmAttach has failed: %s\",\n+                      strerror(errno));\n","filename":"src\/java.desktop\/unix\/native\/common\/java2d\/x11\/X11SurfaceData.c","additions":10,"deletions":10,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -900,3 +900,3 @@\n-            J2dRlsTraceLn1(J2D_TRACE_ERROR,\n-                           \"TryInitMITShm: shmget has failed: %s\",\n-                           strerror(errno));\n+            J2dRlsTraceLn(J2D_TRACE_ERROR,\n+                          \"TryInitMITShm: shmget has failed: %s\",\n+                          strerror(errno));\n@@ -909,3 +909,3 @@\n-            J2dRlsTraceLn1(J2D_TRACE_ERROR,\n-                           \"TryInitMITShm: shmat has failed: %s\",\n-                           strerror(errno));\n+            J2dRlsTraceLn(J2D_TRACE_ERROR,\n+                          \"TryInitMITShm: shmat has failed: %s\",\n+                          strerror(errno));\n@@ -1528,2 +1528,2 @@\n-            J2dRlsTraceLn1(J2D_TRACE_ERROR, \\\n-                           \"X11GD_InitXrandrFuncs: Could not load %s\", #f); \\\n+            J2dRlsTraceLn(J2D_TRACE_ERROR, \\\n+                          \"X11GD_InitXrandrFuncs: Could not load %s\", #f); \\\n@@ -1567,3 +1567,3 @@\n-            J2dRlsTraceLn2(J2D_TRACE_INFO, \"X11GD_InitXrandrFuncs: Can't use Xrandr. \"\n-                           \"Xinerama is active and Xrandr version is %d.%d\",\n-                           rr_maj_ver, rr_min_ver);\n+            J2dRlsTraceLn(J2D_TRACE_INFO, \"X11GD_InitXrandrFuncs: Can't use Xrandr. \"\n+                          \"Xinerama is active and Xrandr version is %d.%d\",\n+                          rr_maj_ver, rr_min_ver);\n","filename":"src\/java.desktop\/unix\/native\/libawt_xawt\/awt\/awt_GraphicsEnv.c","additions":12,"deletions":12,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -72,3 +72,3 @@\n-    J2dTraceLn4(J2D_TRACE_VERBOSE,\n-                \" rect={%-4d, %-4d, %-4d, %-4d}\",\n-                r.left, r.top, r.right, r.bottom);\n+    J2dTraceLn(J2D_TRACE_VERBOSE,\n+               \" rect={%-4d, %-4d, %-4d, %-4d}\",\n+               r.left, r.top, r.right, r.bottom);\n@@ -124,3 +124,3 @@\n-            J2dRlsTraceLn1(J2D_TRACE_ERROR,\n-                \"D3DBL_CopySurfaceToIntArgbImage: unknown format %d\",\n-                desc.Format);\n+            J2dRlsTraceLn(J2D_TRACE_ERROR,\n+                          \"D3DBL_CopySurfaceToIntArgbImage: unknown format %d\",\n+                          desc.Format);\n@@ -150,3 +150,3 @@\n-    J2dTraceLn5(J2D_TRACE_VERBOSE,\n-                \" srctype=%d rect={%-4d, %-4d, %-4d, %-4d}\",\n-                srctype, r.left, r.top, r.right, r.bottom);\n+    J2dTraceLn(J2D_TRACE_VERBOSE,\n+               \" srctype=%d rect={%-4d, %-4d, %-4d, %-4d}\",\n+               srctype, r.left, r.top, r.right, r.bottom);\n@@ -241,3 +241,3 @@\n-            J2dRlsTraceLn1(J2D_TRACE_ERROR,\n-                           \"D3DBL_CopyImageToIntXrgbSurface: unknown type %d\",\n-                           srctype);\n+            J2dRlsTraceLn(J2D_TRACE_ERROR,\n+                          \"D3DBL_CopyImageToIntXrgbSurface: unknown type %d\",\n+                          srctype);\n@@ -679,5 +679,5 @@\n-        J2dTraceLn2(J2D_TRACE_VERBOSE, \"  texture=%d hint=%d\", texture, hint);\n-        J2dTraceLn4(J2D_TRACE_VERBOSE, \"  sx1=%d sy1=%d sx2=%d sy2=%d\",\n-                    sx1, sy1, sx2, sy2);\n-        J2dTraceLn4(J2D_TRACE_VERBOSE, \"  dx1=%f dy1=%f dx2=%f dy2=%f\",\n-                    dx1, dy1, dx2, dy2);\n+        J2dTraceLn(J2D_TRACE_VERBOSE, \"  texture=%d hint=%d\", texture, hint);\n+        J2dTraceLn(J2D_TRACE_VERBOSE, \"  sx1=%d sy1=%d sx2=%d sy2=%d\",\n+                   sx1, sy1, sx2, sy2);\n+        J2dTraceLn(J2D_TRACE_VERBOSE, \"  dx1=%f dy1=%f dx2=%f dy2=%f\",\n+                   dx1, dy1, dx2, dy2);\n@@ -700,2 +700,2 @@\n-            J2dTraceLn3(J2D_TRACE_VERBOSE, \"  xform=%d clip=%d abEnabled=%d\",\n-                        xform, d3dc->GetClipType(), abEnabled);\n+            J2dTraceLn(J2D_TRACE_VERBOSE, \"  xform=%d clip=%d abEnabled=%d\",\n+                       xform, d3dc->GetClipType(), abEnabled);\n@@ -797,6 +797,6 @@\n-            J2dTraceLn3(J2D_TRACE_VERBOSE, \"  texture=%d srctype=%d hint=%d\",\n-                        texture, srctype, hint);\n-            J2dTraceLn4(J2D_TRACE_VERBOSE, \"  sx1=%d sy1=%d sx2=%d sy2=%d\",\n-                        sx1, sy1, sx2, sy2);\n-            J2dTraceLn4(J2D_TRACE_VERBOSE, \"  dx1=%f dy1=%f dx2=%f dy2=%f\",\n-                        dx1, dy1, dx2, dy2);\n+            J2dTraceLn(J2D_TRACE_VERBOSE, \"  texture=%d srctype=%d hint=%d\",\n+                       texture, srctype, hint);\n+            J2dTraceLn(J2D_TRACE_VERBOSE, \"  sx1=%d sy1=%d sx2=%d sy2=%d\",\n+                       sx1, sy1, sx2, sy2);\n+            J2dTraceLn(J2D_TRACE_VERBOSE, \"  dx1=%f dy1=%f dx2=%f dy2=%f\",\n+                       dx1, dy1, dx2, dy2);\n@@ -892,4 +892,4 @@\n-            J2dTraceLn4(J2D_TRACE_VERBOSE, \"  sx=%d sy=%d w=%d h=%d\",\n-                        srcx, srcy, width, height);\n-            J2dTraceLn2(J2D_TRACE_VERBOSE, \"  dx=%d dy=%d\",\n-                        dstx, dsty);\n+            J2dTraceLn(J2D_TRACE_VERBOSE, \"  sx=%d sy=%d w=%d h=%d\",\n+                       srcx, srcy, width, height);\n+            J2dTraceLn(J2D_TRACE_VERBOSE, \"  dx=%d dy=%d\",\n+                       dstx, dsty);\n@@ -964,4 +964,4 @@\n-    J2dTraceLn4(J2D_TRACE_VERBOSE, \"  x=%d y=%d w=%d h=%d\",\n-                x, y, width, height);\n-    J2dTraceLn2(J2D_TRACE_VERBOSE, \"  dx=%d dy=%d\",\n-                dx, dy);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  x=%d y=%d w=%d h=%d\",\n+               x, y, width, height);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  dx=%d dy=%d\",\n+               dx, dy);\n","filename":"src\/java.desktop\/windows\/native\/libawt\/java2d\/d3d\/D3DBlitLoops.cpp","additions":34,"deletions":34,"binary":false,"changes":68,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2008, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -59,3 +59,3 @@\n-    J2dTraceLn2(J2D_TRACE_INFO,\n-                \"D3DBufImgOps_EnableConvolveOp: kernelW=%d kernelH=%d\",\n-                kernelWidth, kernelHeight);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"D3DBufImgOps_EnableConvolveOp: kernelW=%d kernelH=%d\",\n+               kernelWidth, kernelHeight);\n@@ -207,3 +207,3 @@\n-    J2dTraceLn4(J2D_TRACE_INFO,\n-                \"D3DBufImgOps_EnableLookupOp: short=%d num=%d len=%d off=%d\",\n-                shortData, numBands, bandLength, offset);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"D3DBufImgOps_EnableLookupOp: short=%d num=%d len=%d off=%d\",\n+               shortData, numBands, bandLength, offset);\n","filename":"src\/java.desktop\/windows\/native\/libawt\/java2d\/d3d\/D3DBufImgOps.cpp","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -216,1 +216,1 @@\n-    J2dTraceLn1(J2D_TRACE_VERBOSE, \"  pd3d=0x%x\", pd3d);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  pd3d=0x%x\", pd3d);\n@@ -286,3 +286,3 @@\n-    J2dTraceLn1(J2D_TRACE_INFO,\n-                \"D3DContext::ReleaseContextResources: pd3dDevice = 0x%x\",\n-                pd3dDevice);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"D3DContext::ReleaseContextResources: pd3dDevice = 0x%x\",\n+               pd3dDevice);\n@@ -312,3 +312,3 @@\n-    J2dTraceLn2(J2D_TRACE_INFO,\n-                \"~D3DContext: pd3dDevice=0x%x, pd3dObject =0x%x\",\n-                pd3dDevice, pd3dObject);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"~D3DContext: pd3dDevice=0x%x, pd3dObject =0x%x\",\n+               pd3dDevice, pd3dObject);\n@@ -326,2 +326,2 @@\n-    J2dRlsTraceLn1(J2D_TRACE_INFO,\n-                   \"D3DContext::InitDevice: device %d\", adapterOrdinal);\n+    J2dRlsTraceLn(J2D_TRACE_INFO,\n+                  \"D3DContext::InitDevice: device %d\", adapterOrdinal);\n@@ -426,3 +426,3 @@\n-    J2dRlsTraceLn1(J2D_TRACE_INFO,\n-                   \"D3DContext::InitDefice: successfully initialized device %d\",\n-                   adapterOrdinal);\n+    J2dRlsTraceLn(J2D_TRACE_INFO,\n+                  \"D3DContext::InitDefice: successfully initialized device %d\",\n+                  adapterOrdinal);\n@@ -443,2 +443,2 @@\n-                J2dTraceLn1(J2D_TRACE_VERBOSE, \"  device %d is still lost\",\n-                            adapterOrdinal);\n+                J2dTraceLn(J2D_TRACE_VERBOSE, \"  device %d is still lost\",\n+                           adapterOrdinal);\n@@ -448,2 +448,2 @@\n-                J2dTraceLn1(J2D_TRACE_VERBOSE, \"  device %d needs to be reset\",\n-                            adapterOrdinal);\n+                J2dTraceLn(J2D_TRACE_VERBOSE, \"  device %d needs to be reset\",\n+                           adapterOrdinal);\n@@ -457,2 +457,2 @@\n-            J2dTraceLn1(J2D_TRACE_VERBOSE, \"  device %d is not lost\",\n-                        adapterOrdinal);\n+            J2dTraceLn(J2D_TRACE_VERBOSE, \"  device %d is not lost\",\n+                       adapterOrdinal);\n@@ -494,2 +494,2 @@\n-    J2dRlsTraceLn1(J2D_TRACE_INFO, \"D3DContext::ConfigureContext device %d\",\n-                   adapterOrdinal);\n+    J2dRlsTraceLn(J2D_TRACE_INFO, \"D3DContext::ConfigureContext device %d\",\n+                  adapterOrdinal);\n@@ -519,1 +519,1 @@\n-    J2dTraceLn1(J2D_TRACE_VERBOSE, \"  windowed=%d\",pNewParams->Windowed);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  windowed=%d\",pNewParams->Windowed);\n@@ -574,3 +574,2 @@\n-        J2dRlsTraceLn1(J2D_TRACE_INFO,\n-            \"D3DContext::ConfigureContext: successfully reset device: %d\",\n-            adapterOrdinal);\n+        J2dRlsTraceLn(J2D_TRACE_INFO, \"D3DContext::ConfigureContext: \" \\\n+                      \"successfully reset device: %d\", adapterOrdinal);\n@@ -625,3 +624,2 @@\n-        J2dRlsTraceLn1(J2D_TRACE_INFO,\n-            \"D3DContext::ConfigureContext: successfully created device: %d\",\n-            adapterOrdinal);\n+        J2dRlsTraceLn(J2D_TRACE_INFO, \"D3DContext::ConfigureContext: \" \\\n+                      \"successfully created device: %d\", adapterOrdinal);\n@@ -649,2 +647,2 @@\n-    J2dRlsTraceLn1(J2D_TRACE_INFO, \"D3DContext::InitContext device %d\",\n-                   adapterOrdinal);\n+    J2dRlsTraceLn(J2D_TRACE_INFO, \"D3DContext::InitContext device %d\",\n+                  adapterOrdinal);\n@@ -794,3 +792,3 @@\n-    J2dTraceLn1(J2D_TRACE_INFO,\n-                \"D3DContext::SetRenderTarget: pSurface=0x%x\",\n-                pSurface);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"D3DContext::SetRenderTarget: pSurface=0x%x\",\n+               pSurface);\n@@ -832,1 +830,1 @@\n-    J2dTraceLn1(J2D_TRACE_VERBOSE, \"  current render target=0x%x\", pSurface);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  current render target=0x%x\", pSurface);\n@@ -903,8 +901,8 @@\n-    J2dTraceLn4(J2D_TRACE_VERBOSE,\n-                \"  %5f %5f %5f %5f\", tx._11, tx._12, tx._13, tx._14);\n-    J2dTraceLn4(J2D_TRACE_VERBOSE,\n-                \"  %5f %5f %5f %5f\", tx._21, tx._22, tx._23, tx._24);\n-    J2dTraceLn4(J2D_TRACE_VERBOSE,\n-                \"  %5f %5f %5f %5f\", tx._31, tx._32, tx._33, tx._34);\n-    J2dTraceLn4(J2D_TRACE_VERBOSE,\n-                \"  %5f %5f %5f %5f\", tx._41, tx._42, tx._43, tx._44);\n+    J2dTraceLn(J2D_TRACE_VERBOSE,\n+               \"  %5f %5f %5f %5f\", tx._11, tx._12, tx._13, tx._14);\n+    J2dTraceLn(J2D_TRACE_VERBOSE,\n+               \"  %5f %5f %5f %5f\", tx._21, tx._22, tx._23, tx._24);\n+    J2dTraceLn(J2D_TRACE_VERBOSE,\n+               \"  %5f %5f %5f %5f\", tx._31, tx._32, tx._33, tx._34);\n+    J2dTraceLn(J2D_TRACE_VERBOSE,\n+               \"  %5f %5f %5f %5f\", tx._41, tx._42, tx._43, tx._44);\n@@ -927,3 +925,3 @@\n-    J2dTraceLn4(J2D_TRACE_VERBOSE,\n-                \"  x1=%-4d y1=%-4d x2=%-4d y2=%-4d\",\n-                x1, y1, x2, y2);\n+    J2dTraceLn(J2D_TRACE_VERBOSE,\n+               \"  x1=%-4d y1=%-4d x2=%-4d y2=%-4d\",\n+               x1, y1, x2, y2);\n@@ -965,3 +963,3 @@\n-        J2dRlsTraceLn4(J2D_TRACE_ERROR,\n-                       \"  x1=%-4d y1=%-4d x2=%-4d y2=%-4d\",\n-                       x1, y1, x2, y2);\n+        J2dRlsTraceLn(J2D_TRACE_ERROR,\n+                      \"  x1=%-4d y1=%-4d x2=%-4d y2=%-4d\",\n+                      x1, y1, x2, y2);\n@@ -1111,3 +1109,3 @@\n-    J2dTraceLn4(J2D_TRACE_VERBOSE,\n-        \" rect={%-4d, %-4d, %-4d, %-4d}\",\n-        r.left, r.top, r.right, r.bottom);\n+    J2dTraceLn(J2D_TRACE_VERBOSE,\n+               \" rect={%-4d, %-4d, %-4d, %-4d}\",\n+               r.left, r.top, r.right, r.bottom);\n@@ -1303,3 +1301,3 @@\n-    J2dTraceLn3(J2D_TRACE_INFO,\n-                \"D3DContext::SetAlphaComposite: rule=%-1d ea=%f flags=%d\",\n-                rule, ea, flags);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"D3DContext::SetAlphaComposite: rule=%-1d ea=%f flags=%d\",\n+               rule, ea, flags);\n@@ -1319,2 +1317,2 @@\n-        J2dTraceLn1(J2D_TRACE_VERBOSE,\n-                    \"  disabling alpha comp rule=%-1d ea=1.0 src=opq)\", rule);\n+        J2dTraceLn(J2D_TRACE_VERBOSE,\n+                   \"  disabling alpha comp rule=%-1d ea=1.0 src=opq)\", rule);\n@@ -1323,2 +1321,2 @@\n-        J2dTraceLn2(J2D_TRACE_VERBOSE,\n-                    \"  enabling alpha comp (rule=%-1d ea=%f)\", rule, ea);\n+        J2dTraceLn(J2D_TRACE_VERBOSE,\n+                   \"  enabling alpha comp (rule=%-1d ea=%f)\", rule, ea);\n@@ -1365,1 +1363,1 @@\n-        J2dTraceLn1(J2D_TRACE_INFO, \"D3DContext::UpdateTextureTransforms: \"\\\n+        J2dTraceLn(J2D_TRACE_INFO, \"D3DContext::UpdateTextureTransforms: \"\\\n@@ -1379,8 +1377,8 @@\n-            J2dTraceLn4(10,\n-                        \"  %5f %5f %5f %5f\", tx._11, tx._12, tx._13, tx._14);\n-            J2dTraceLn4(10,\n-                        \"  %5f %5f %5f %5f\", tx._21, tx._22, tx._23, tx._24);\n-            J2dTraceLn4(10,\n-                        \"  %5f %5f %5f %5f\", tx._31, tx._32, tx._33, tx._34);\n-            J2dTraceLn4(10,\n-                        \"  %5f %5f %5f %5f\", tx._41, tx._42, tx._43, tx._44);\n+            J2dTraceLn(J2D_TRACE_VERBOSE2,\n+                       \"  %5f %5f %5f %5f\", tx._11, tx._12, tx._13, tx._14);\n+            J2dTraceLn(J2D_TRACE_VERBOSE2,\n+                       \"  %5f %5f %5f %5f\", tx._21, tx._22, tx._23, tx._24);\n+            J2dTraceLn(J2D_TRACE_VERBOSE2,\n+                       \"  %5f %5f %5f %5f\", tx._31, tx._32, tx._33, tx._34);\n+            J2dTraceLn(J2D_TRACE_VERBOSE2,\n+                       \"  %5f %5f %5f %5f\", tx._41, tx._42, tx._43, tx._44);\n@@ -1406,2 +1404,2 @@\n-            J2dTraceLn2(J2D_TRACE_VERBOSE, \"  offsets: tx=%f ty=%f\",\n-                        mt._31, mt._32);\n+            J2dTraceLn(J2D_TRACE_VERBOSE, \"  offsets: tx=%f ty=%f\",\n+                       mt._31, mt._32);\n@@ -1439,2 +1437,2 @@\n-        J2dTraceLn1(J2D_TRACE_ERROR,\n-                    \"D3DContext::SetTexture: incorrect sampler: %d\", dwSampler);\n+        J2dTraceLn(J2D_TRACE_ERROR,\n+                   \"D3DContext::SetTexture: incorrect sampler: %d\", dwSampler);\n@@ -1447,2 +1445,2 @@\n-        J2dTraceLn2(J2D_TRACE_VERBOSE,\n-                    \"  new texture=0x%x on sampler %d\", pTexture, dwSampler);\n+        J2dTraceLn(J2D_TRACE_VERBOSE,\n+                   \"  new texture=0x%x on sampler %d\", pTexture, dwSampler);\n@@ -1592,3 +1590,3 @@\n-    J2dTraceLn1(J2D_TRACE_INFO,\n-                \"D3DContext::CreateFragmentProgram: flags=%d\",\n-                flags);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"D3DContext::CreateFragmentProgram: flags=%d\",\n+               flags);\n@@ -1785,1 +1783,1 @@\n-    J2dTraceLn1(J2D_TRACE_VERBOSE, \"  caps for adapter %d :\", adapterOrdinal);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  caps for adapter %d :\", adapterOrdinal);\n","filename":"src\/java.desktop\/windows\/native\/libawt\/java2d\/d3d\/D3DContext.cpp","additions":75,"deletions":77,"binary":false,"changes":152,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -51,1 +51,1 @@\n-    J2dTraceLn1(J2D_TRACE_INFO, \"D3DGlyphCache::D3DGlyphCache gcType=%d\", type);\n+    J2dTraceLn(J2D_TRACE_INFO, \"D3DGlyphCache::D3DGlyphCache gcType=%d\", type);\n@@ -93,1 +93,1 @@\n-    J2dTraceLn1(J2D_TRACE_INFO, \"D3DGlyphCache::Init pCtx=%x\", pCtx);\n+    J2dTraceLn(J2D_TRACE_INFO, \"D3DGlyphCache::Init pCtx=%x\", pCtx);\n","filename":"src\/java.desktop\/windows\/native\/libawt\/java2d\/d3d\/D3DGlyphCache.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2011, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -52,1 +52,1 @@\n-    J2dTraceLn1(J2D_TRACE_INFO, \"D3DGD_initD3D: result=%x\", result);\n+    J2dTraceLn(J2D_TRACE_INFO, \"D3DGD_initD3D: result=%x\", result);\n@@ -97,1 +97,1 @@\n-    J2dTraceLn1(J2D_TRACE_VERBOSE, \"  id=%S\", pAdapterId);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  id=%S\", pAdapterId);\n@@ -126,1 +126,1 @@\n-        J2dRlsTraceLn1(J2D_TRACE_ERROR,\n+        J2dRlsTraceLn(J2D_TRACE_ERROR,\n@@ -321,3 +321,3 @@\n-        J2dRlsTraceLn1(J2D_TRACE_ERROR,\n-                       \"D3DGD_configDisplayModeNative: unsupported depth: %d\",\n-                       bitDepth);\n+        J2dRlsTraceLn(J2D_TRACE_ERROR,\n+                      \"D3DGD_configDisplayModeNative: unsupported depth: %d\",\n+                      bitDepth);\n@@ -327,5 +327,5 @@\n-    J2dTraceLn4(J2D_TRACE_VERBOSE, \"  changing to dm: %dx%dx%d@%d\",\n-                newParams.BackBufferWidth, newParams.BackBufferHeight,\n-                bitDepth, refreshRate);\n-    J2dTraceLn1(J2D_TRACE_VERBOSE, \"  selected backbuffer format: %d\",\n-                newParams.BackBufferFormat);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  changing to dm: %dx%dx%d@%d\",\n+               newParams.BackBufferWidth, newParams.BackBufferHeight,\n+               bitDepth, refreshRate);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  selected backbuffer format: %d\",\n+               newParams.BackBufferFormat);\n@@ -373,3 +373,3 @@\n-        J2dTraceLn4(J2D_TRACE_VERBOSE,\n-                    \"  current dm: %dx%dx%d@%d\",\n-                    mode.Width, mode.Height, bitDepth, mode.RefreshRate);\n+        J2dTraceLn(J2D_TRACE_VERBOSE,\n+                   \"  current dm: %dx%dx%d@%d\",\n+                   mode.Width, mode.Height, bitDepth, mode.RefreshRate);\n@@ -421,2 +421,2 @@\n-                J2dTraceLn4(J2D_TRACE_VERBOSE, \"  found dm: %dx%dx%d@%d\",\n-                            mode.Width, mode.Height, bitDepth,mode.RefreshRate);\n+                J2dTraceLn(J2D_TRACE_VERBOSE, \"  found dm: %dx%dx%d@%d\",\n+                           mode.Width, mode.Height, bitDepth,mode.RefreshRate);\n@@ -460,1 +460,1 @@\n-    J2dTraceLn1(J2D_TRACE_VERBOSE, \"  available memory=%d\", mem);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  available memory=%d\", mem);\n","filename":"src\/java.desktop\/windows\/native\/libawt\/java2d\/d3d\/D3DGraphicsDevice.cpp","additions":18,"deletions":18,"binary":false,"changes":36,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2008, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -60,1 +60,1 @@\n-    J2dTraceLn1(J2D_TRACE_INFO, \"D3DMaskCache::Init pCtx=%x\", pCtx);\n+    J2dTraceLn(J2D_TRACE_INFO, \"D3DMaskCache::Init pCtx=%x\", pCtx);\n@@ -106,2 +106,2 @@\n-    J2dTraceLn1(J2D_TRACE_INFO, \"D3DVertexCacher::AddMaskQuad: %d\",\n-                maskCacheIndex);\n+    J2dTraceLn(J2D_TRACE_INFO, \"D3DVertexCacher::AddMaskQuad: %d\",\n+               maskCacheIndex);\n","filename":"src\/java.desktop\/windows\/native\/libawt\/java2d\/d3d\/D3DMaskCache.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2008, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -57,3 +57,3 @@\n-    J2dTraceLn4(J2D_TRACE_VERBOSE, \"  x=%d y=%d w=%d h=%d\", x, y, w, h);\n-    J2dTraceLn2(J2D_TRACE_VERBOSE, \"  maskoff=%d maskscan=%d\",\n-                maskoff, maskscan);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  x=%d y=%d w=%d h=%d\", x, y, w, h);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  maskoff=%d maskscan=%d\",\n+               maskoff, maskscan);\n","filename":"src\/java.desktop\/windows\/native\/libawt\/java2d\/d3d\/D3DMaskFill.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2008, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -48,1 +48,1 @@\n-    J2dTraceLn1(J2D_TRACE_VERBOSE, \"  state=%d\", paintState);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  state=%d\", paintState);\n@@ -92,1 +92,1 @@\n-    J2dTraceLn1(J2D_TRACE_INFO, \"D3DPaints_SetColor: pixel=%08x\", pixel);\n+    J2dTraceLn(J2D_TRACE_INFO, \"D3DPaints_SetColor: pixel=%08x\", pixel);\n","filename":"src\/java.desktop\/windows\/native\/libawt\/java2d\/d3d\/D3DPaints.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2012, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -40,1 +40,1 @@\n-    J2dTraceLn1(J2D_TRACE_ERROR, \"D3D Error: \" msg \" res=%d\", res)\n+    J2dTraceLn(J2D_TRACE_ERROR, \"D3D Error: \" msg \" res=%d\", res)\n@@ -63,1 +63,1 @@\n-        J2dTraceLn1(J2D_TRACE_VERBOSE, \"  \" #RES \"=0x%x\", (RES)); \\\n+        J2dTraceLn(J2D_TRACE_VERBOSE, \"  \" #RES \"=0x%x\", (RES)); \\\n@@ -79,2 +79,2 @@\n-        J2dTraceLn3(J2D_TRACE_ERROR,       \\\n-                    \"%s is null in %s:%d\", #value, __FILE__, __LINE__); \\\n+        J2dTraceLn(J2D_TRACE_ERROR,        \\\n+                   \"%s is null in %s:%d\", #value, __FILE__, __LINE__); \\\n","filename":"src\/java.desktop\/windows\/native\/libawt\/java2d\/d3d\/D3DPipeline.h","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -62,3 +62,3 @@\n-        J2dRlsTraceLn1(J2D_TRACE_ERROR,\n-                       \"D3DPPLM::CreateInstance: unexpected instance: 0x%x,\"\\\n-                       \" abort.\", pMgr);\n+        J2dRlsTraceLn(J2D_TRACE_ERROR,\n+                      \"D3DPPLM::CreateInstance: unexpected instance: 0x%x,\"\\\n+                      \" abort.\", pMgr);\n@@ -204,1 +204,1 @@\n-        J2dTraceLn2(J2D_TRACE_VERBOSE,\n+        J2dTraceLn(J2D_TRACE_VERBOSE,\n@@ -212,1 +212,1 @@\n-                J2dTraceLn1(J2D_TRACE_VERBOSE, \"  adapter %d: removed\", i);\n+                J2dTraceLn(J2D_TRACE_VERBOSE, \"  adapter %d: removed\", i);\n@@ -219,2 +219,2 @@\n-                    J2dTraceLn3(J2D_TRACE_VERBOSE,\n-                            \"  adapter %d: found hmnd[%d]=0x%x\", i, mon, hMon);\n+                    J2dTraceLn(J2D_TRACE_VERBOSE,\n+                               \"  adapter %d: found hmnd[%d]=0x%x\", i, mon, hMon);\n@@ -226,3 +226,3 @@\n-                J2dTraceLn2(J2D_TRACE_VERBOSE,\n-                            \"  adapter %d: could not find hmnd=0x%x \"\\\n-                            \"in the list of new hmnds\", i, hMon);\n+                J2dTraceLn(J2D_TRACE_VERBOSE,\n+                           \"  adapter %d: could not find hmnd=0x%x \"\\\n+                           \"in the list of new hmnds\", i, hMon);\n@@ -279,2 +279,2 @@\n-                J2dTraceLn1(J2D_TRACE_VERBOSE,\n-                            \"  HandleLostDevices: checking adapter %d\", i);\n+                J2dTraceLn(J2D_TRACE_VERBOSE,\n+                           \"  HandleLostDevices: checking adapter %d\", i);\n@@ -377,3 +377,3 @@\n-                    J2dTraceLn2(J2D_TRACE_VERBOSE,\n-                                \"  device: vendorID=0x%04x, deviceId=0x%04x\",\n-                                dwVId, dwDId);\n+                    J2dTraceLn(J2D_TRACE_VERBOSE,\n+                               \"  device: vendorID=0x%04x, deviceId=0x%04x\",\n+                               dwVId, dwDId);\n@@ -453,1 +453,1 @@\n-                J2dRlsTrace2(J2D_TRACE_INFO,\n+                J2dRlsTrace(J2D_TRACE_INFO,\n@@ -455,1 +455,1 @@\n-                             osvi.dwMajorVersion, osvi.dwMinorVersion);\n+                            osvi.dwMajorVersion, osvi.dwMinorVersion);\n@@ -460,3 +460,3 @@\n-                J2dRlsTrace2(J2D_TRACE_INFO,\n-                             \"OS_UNKNOWN: dwPlatformId=%d dwMajorVersion=%d\\n\",\n-                             osvi.dwPlatformId, osvi.dwMajorVersion);\n+                J2dRlsTrace(J2D_TRACE_INFO,\n+                            \"OS_UNKNOWN: dwPlatformId=%d dwMajorVersion=%d\\n\",\n+                            osvi.dwPlatformId, osvi.dwMajorVersion);\n@@ -495,4 +495,4 @@\n-                J2dRlsTraceLn2(J2D_TRACE_ERROR,\n-                    \"D3DPPLM::CheckForBadHardware: found matching \"\\\n-                    \"hardware: VendorId=0x%04x DeviceId=0x%04x\",\n-                    vendorId, deviceId);\n+                J2dRlsTraceLn(J2D_TRACE_ERROR,\n+                              \"D3DPPLM::CheckForBadHardware: found matching \"\\\n+                              \"hardware: VendorId=0x%04x DeviceId=0x%04x\",\n+                              vendorId, deviceId);\n@@ -505,5 +505,5 @@\n-                    J2dRlsTraceLn4(J2D_TRACE_ERROR,\n-                                   \"  update your driver to at \"\\\n-                                   \"least version %d.%d.%d.%d\",\n-                                   HIWORD(li.HighPart), LOWORD(li.HighPart),\n-                                   HIWORD(li.LowPart),  LOWORD(li.LowPart));\n+                    J2dRlsTraceLn(J2D_TRACE_ERROR,\n+                                  \"  update your driver to at \"\\\n+                                  \"least version %d.%d.%d.%d\",\n+                                  HIWORD(li.HighPart), LOWORD(li.HighPart),\n+                                  HIWORD(li.LowPart),  LOWORD(li.LowPart));\n@@ -545,33 +545,33 @@\n-        J2dRlsTraceLn1(J2D_TRACE_INFO, \"Adapter Ordinal  : %d\", Adapter);\n-        J2dRlsTraceLn1(J2D_TRACE_INFO, \"Adapter Handle   : 0x%x\",\n-                       pd3d9->GetAdapterMonitor(Adapter));\n-        J2dRlsTraceLn1(J2D_TRACE_INFO, \"Description      : %s\",\n-                       aid.Description);\n-        J2dRlsTraceLn2(J2D_TRACE_INFO, \"GDI Name, Driver : %s, %s\",\n-                       aid.DeviceName, aid.Driver);\n-        J2dRlsTraceLn1(J2D_TRACE_INFO, \"Vendor Id        : 0x%04x\",\n-                       aid.VendorId);\n-        J2dRlsTraceLn1(J2D_TRACE_INFO, \"Device Id        : 0x%04x\",\n-                       aid.DeviceId);\n-        J2dRlsTraceLn1(J2D_TRACE_INFO, \"SubSys Id        : 0x%x\",\n-                       aid.SubSysId);\n-        J2dRlsTraceLn4(J2D_TRACE_INFO, \"Driver Version   : %d.%d.%d.%d\",\n-                       HIWORD(aid.DriverVersion.HighPart),\n-                       LOWORD(aid.DriverVersion.HighPart),\n-                       HIWORD(aid.DriverVersion.LowPart),\n-                       LOWORD(aid.DriverVersion.LowPart));\n-        J2dRlsTrace3(J2D_TRACE_INFO,\n-                     \"[I] GUID             : {%08X-%04X-%04X-\",\n-                       aid.DeviceIdentifier.Data1,\n-                       aid.DeviceIdentifier.Data2,\n-                       aid.DeviceIdentifier.Data3);\n-        J2dRlsTrace4(J2D_TRACE_INFO, \"%02X%02X-%02X%02X\",\n-                       aid.DeviceIdentifier.Data4[0],\n-                       aid.DeviceIdentifier.Data4[1],\n-                       aid.DeviceIdentifier.Data4[2],\n-                       aid.DeviceIdentifier.Data4[3]);\n-        J2dRlsTrace4(J2D_TRACE_INFO, \"%02X%02X%02X%02X}\\n\",\n-                       aid.DeviceIdentifier.Data4[4],\n-                       aid.DeviceIdentifier.Data4[5],\n-                       aid.DeviceIdentifier.Data4[6],\n-                       aid.DeviceIdentifier.Data4[7]);\n+        J2dRlsTraceLn(J2D_TRACE_INFO, \"Adapter Ordinal  : %d\", Adapter);\n+        J2dRlsTraceLn(J2D_TRACE_INFO, \"Adapter Handle   : 0x%x\",\n+                      pd3d9->GetAdapterMonitor(Adapter));\n+        J2dRlsTraceLn(J2D_TRACE_INFO, \"Description      : %s\",\n+                      aid.Description);\n+        J2dRlsTraceLn(J2D_TRACE_INFO, \"GDI Name, Driver : %s, %s\",\n+                      aid.DeviceName, aid.Driver);\n+        J2dRlsTraceLn(J2D_TRACE_INFO, \"Vendor Id        : 0x%04x\",\n+                      aid.VendorId);\n+        J2dRlsTraceLn(J2D_TRACE_INFO, \"Device Id        : 0x%04x\",\n+                      aid.DeviceId);\n+        J2dRlsTraceLn(J2D_TRACE_INFO, \"SubSys Id        : 0x%x\",\n+                      aid.SubSysId);\n+        J2dRlsTraceLn(J2D_TRACE_INFO, \"Driver Version   : %d.%d.%d.%d\",\n+                      HIWORD(aid.DriverVersion.HighPart),\n+                      LOWORD(aid.DriverVersion.HighPart),\n+                      HIWORD(aid.DriverVersion.LowPart),\n+                      LOWORD(aid.DriverVersion.LowPart));\n+        J2dRlsTrace(J2D_TRACE_INFO,\n+                    \"[I] GUID             : {%08X-%04X-%04X-\",\n+                    aid.DeviceIdentifier.Data1,\n+                    aid.DeviceIdentifier.Data2,\n+                    aid.DeviceIdentifier.Data3);\n+        J2dRlsTrace(J2D_TRACE_INFO, \"%02X%02X-%02X%02X\",\n+                    aid.DeviceIdentifier.Data4[0],\n+                    aid.DeviceIdentifier.Data4[1],\n+                    aid.DeviceIdentifier.Data4[2],\n+                    aid.DeviceIdentifier.Data4[3]);\n+        J2dRlsTrace(J2D_TRACE_INFO, \"%02X%02X%02X%02X}\\n\",\n+                    aid.DeviceIdentifier.Data4[4],\n+                    aid.DeviceIdentifier.Data4[5],\n+                    aid.DeviceIdentifier.Data4[6],\n+                    aid.DeviceIdentifier.Data4[7]);\n@@ -615,3 +615,3 @@\n-            J2dRlsTrace1(J2D_TRACE_WARNING,\n-                \"unknown rasterizer: %s, only (ref|hal|nul) \"\\\n-                \"supported, hal selected instead\", pRas);\n+            J2dRlsTrace(J2D_TRACE_WARNING,\n+                        \"unknown rasterizer: %s, only (ref|hal|nul) \"\\\n+                        \"supported, hal selected instead\", pRas);\n@@ -627,4 +627,4 @@\n-            J2dRlsTraceLn2(J2D_TRACE_ERROR, \\\n-                           \"D3DPPLM::CheckDeviceCaps: adapter %d: Failed \"\\\n-                           \"(cap %s not supported)\", \\\n-                           adapter, #CAP); \\\n+            J2dRlsTraceLn(J2D_TRACE_ERROR, \\\n+                          \"D3DPPLM::CheckDeviceCaps: adapter %d: Failed \"\\\n+                          \"(cap %s not supported)\", \\\n+                          adapter, #CAP); \\\n@@ -687,3 +687,3 @@\n-        J2dRlsTraceLn1(J2D_TRACE_ERROR,\n-                       \"D3DPPLM::CheckDeviceCaps: adapter %d: Failed \"\\\n-                       \"(pixel shaders 2.0 required)\", adapter);\n+        J2dRlsTraceLn(J2D_TRACE_ERROR,\n+                      \"D3DPPLM::CheckDeviceCaps: adapter %d: Failed \"\\\n+                      \"(pixel shaders 2.0 required)\", adapter);\n@@ -693,2 +693,2 @@\n-    J2dRlsTraceLn1(J2D_TRACE_INFO,\n-                   \"D3DPPLM::CheckDeviceCaps: adapter %d: Passed\", adapter);\n+    J2dRlsTraceLn(J2D_TRACE_INFO,\n+                  \"D3DPPLM::CheckDeviceCaps: adapter %d: Passed\", adapter);\n@@ -709,3 +709,3 @@\n-        J2dRlsTraceLn1(J2D_TRACE_ERROR,\n-                \"D3DPPLM::D3DEnabledOnAdapter: no \" \\\n-                \"suitable d3d device on adapter %d\", adapter);\n+        J2dRlsTraceLn(J2D_TRACE_ERROR,\n+                      \"D3DPPLM::D3DEnabledOnAdapter: no \" \\\n+                      \"suitable d3d device on adapter %d\", adapter);\n@@ -762,3 +762,3 @@\n-    J2dTraceLn1(J2D_TRACE_INFO,\n-                \"D3DPPLM::CreateDefaultFocusWindow: adapter=%d\",\n-                adapterOrdinal);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"D3DPPLM::CreateDefaultFocusWindow: adapter=%d\",\n+               adapterOrdinal);\n@@ -790,3 +790,4 @@\n-        J2dRlsTraceLn1(J2D_TRACE_ERROR,\n-            \"D3DPPLM::CreateDefaultFocusWindow: \"\\\n-            \"error getting monitor info for adapter=%d\", adapterOrdinal);\n+        J2dRlsTraceLn(J2D_TRACE_ERROR,\n+                      \"D3DPPLM::CreateDefaultFocusWindow: \"\\\n+                      \"error getting monitor info for adapter=%d\",\n+                      adapterOrdinal);\n@@ -803,3 +804,3 @@\n-        J2dTraceLn2(J2D_TRACE_INFO,\n-            \"  Created default focus window %x for adapter %d\",\n-            hWnd, adapterOrdinal);\n+        J2dTraceLn(J2D_TRACE_INFO,\n+                   \"  Created default focus window %x for adapter %d\",\n+                   hWnd, adapterOrdinal);\n@@ -815,3 +816,3 @@\n-        J2dTraceLn1(J2D_TRACE_VERBOSE,\n-                    \"  no fs windows, using default focus window=0x%x\",\n-                    defaultFocusWindow);\n+        J2dTraceLn(J2D_TRACE_VERBOSE,\n+                   \"  no fs windows, using default focus window=0x%x\",\n+                   defaultFocusWindow);\n@@ -820,2 +821,2 @@\n-    J2dTraceLn1(J2D_TRACE_VERBOSE, \"  using fs window=0x%x\",\n-                pAdapters[currentFSFocusAdapter].fsFocusWindow);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  using fs window=0x%x\",\n+               pAdapters[currentFSFocusAdapter].fsFocusWindow);\n@@ -827,2 +828,2 @@\n-    J2dTraceLn2(J2D_TRACE_INFO,\"D3DPPLM::SetFSFocusWindow hwnd=0x%x adapter=%d\",\n-                hWnd, adapterOrdinal);\n+    J2dTraceLn(J2D_TRACE_INFO,\"D3DPPLM::SetFSFocusWindow hwnd=0x%x adapter=%d\",\n+               hWnd, adapterOrdinal);\n@@ -849,2 +850,2 @@\n-                        J2dTraceLn1(J2D_TRACE_VERBOSE,\n-                                    \"  adapter %d is still in fs mode\", i);\n+                        J2dTraceLn(J2D_TRACE_VERBOSE,\n+                                   \"  adapter %d is still in fs mode\", i);\n@@ -871,3 +872,3 @@\n-                J2dTraceLn1(J2D_TRACE_WARNING,\n-                            \"D3DPM::SetFSFocusWindow: setting the fs \"\\\n-                            \"window again for adapter %d\", adapterOrdinal);\n+                J2dTraceLn(J2D_TRACE_WARNING,\n+                           \"D3DPM::SetFSFocusWindow: setting the fs \"\\\n+                           \"window again for adapter %d\", adapterOrdinal);\n@@ -890,3 +891,3 @@\n-        J2dRlsTraceLn1(J2D_TRACE_ERROR,\n-            \"D3DPPLM::GetD3DContext: invalid parameters or \"\\\n-            \"failed init for adapter %d\", adapterOrdinal);\n+        J2dRlsTraceLn(J2D_TRACE_ERROR,\n+                      \"D3DPPLM::GetD3DContext: invalid parameters or \"\\\n+                      \"failed init for adapter %d\", adapterOrdinal);\n@@ -901,2 +902,2 @@\n-            J2dTraceLn1(J2D_TRACE_ERROR, \"  non-null context in \"\\\n-                        \"uninitialized adapter %d\", adapterOrdinal);\n+            J2dTraceLn(J2D_TRACE_ERROR, \"  non-null context in \"\\\n+                       \"uninitialized adapter %d\", adapterOrdinal);\n@@ -905,2 +906,2 @@\n-            J2dTraceLn1(J2D_TRACE_VERBOSE,\n-                        \"  initializing context for adapter %d\",adapterOrdinal);\n+            J2dTraceLn(J2D_TRACE_VERBOSE,\n+                       \"  initializing context for adapter %d\",adapterOrdinal);\n@@ -911,3 +912,3 @@\n-                    J2dRlsTraceLn1(J2D_TRACE_ERROR,\n-                        \"D3DPPLM::GetD3DContext: failed to create context \"\\\n-                        \"for adapter=%d\", adapterOrdinal);\n+                    J2dRlsTraceLn(J2D_TRACE_ERROR, \"D3DPPLM::GetD3DContext: \"\\\n+                                  \"failed to create context \"\\\n+                                  \"for adapter=%d\", adapterOrdinal);\n@@ -916,2 +917,3 @@\n-                J2dRlsTraceLn1(J2D_TRACE_ERROR,\n-                    \"D3DPPLM::GetContext: no d3d on adapter %d\",adapterOrdinal);\n+                J2dRlsTraceLn(J2D_TRACE_ERROR,\n+                              \"D3DPPLM::GetContext: no d3d on adapter %d\",\n+                              adapterOrdinal);\n@@ -970,2 +972,2 @@\n-    J2dRlsTraceLn1(J2D_TRACE_INFO, \"D3DInitializer::CleanImpl (%s)\",\n-                                    reInit ? \"RELAUNCH\" : \"normal\");\n+    J2dRlsTraceLn(J2D_TRACE_INFO, \"D3DInitializer::CleanImpl (%s)\",\n+                  reInit ? \"RELAUNCH\" : \"normal\");\n@@ -981,1 +983,1 @@\n-    J2dRlsTraceLn1(J2D_TRACE_INFO, \"D3DAdapterInitializer::InitImpl(%d) started\", adapter);\n+    J2dRlsTraceLn(J2D_TRACE_INFO, \"D3DAdapterInitializer::InitImpl(%d) started\", adapter);\n@@ -991,1 +993,1 @@\n-    J2dRlsTraceLn1(J2D_TRACE_INFO, \"D3DAdapterInitializer::InitImpl(%d) finished\", adapter);\n+    J2dRlsTraceLn(J2D_TRACE_INFO, \"D3DAdapterInitializer::InitImpl(%d) finished\", adapter);\n","filename":"src\/java.desktop\/windows\/native\/libawt\/java2d\/d3d\/D3DPipelineManager.cpp","additions":117,"deletions":115,"binary":false,"changes":232,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -70,2 +70,2 @@\n-    J2dTraceLn4(J2D_TRACE_VERBOSE, \"  x1=%d y1=%d x2=%d y2=%d\",\n-                x1, y1, x2, y2);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  x1=%d y1=%d x2=%d y2=%d\",\n+               x1, y1, x2, y2);\n@@ -109,4 +109,4 @@\n-            J2dTraceLn4(J2D_TRACE_WARNING,\n-                \"D3DRQ_SwapBuffers: surface\/window dimensions mismatch: \"\\\n-                \"win: w=%d h=%d, bb: w=%d h=%d\",\n-                ww, wh, params.BackBufferWidth, params.BackBufferHeight);\n+            J2dTraceLn(J2D_TRACE_WARNING,\n+                       \"D3DRQ_SwapBuffers: surface\/window dimensions mismatch: \"\\\n+                       \"win: w=%d h=%d, bb: w=%d h=%d\",\n+                       ww, wh, params.BackBufferWidth, params.BackBufferHeight);\n@@ -203,1 +203,1 @@\n-    J2dTraceLn1(J2D_TRACE_INFO, \"D3DRQ_flushBuffer: limit=%d\", limit);\n+    J2dTraceLn(J2D_TRACE_INFO, \"D3DRQ_flushBuffer: limit=%d\", limit);\n@@ -222,1 +222,1 @@\n-        J2dTraceLn1(J2D_TRACE_VERBOSE, \"D3DRQ_flushBuffer: opcode=%d\", opcode);\n+        J2dTraceLn(J2D_TRACE_VERBOSE, \"D3DRQ_flushBuffer: opcode=%d\", opcode);\n@@ -842,2 +842,2 @@\n-            J2dRlsTraceLn1(J2D_TRACE_ERROR,\n-                \"D3DRQ_flushBuffer: invalid opcode=%d\", opcode);\n+            J2dRlsTraceLn(J2D_TRACE_ERROR,\n+                          \"D3DRQ_flushBuffer: invalid opcode=%d\", opcode);\n","filename":"src\/java.desktop\/windows\/native\/libawt\/java2d\/d3d\/D3DRenderQueue.cpp","additions":11,"deletions":11,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2008, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -38,3 +38,3 @@\n-    J2dTraceLn4(J2D_TRACE_INFO,\n-                \"D3DRenderer_doDrawLineD3D x1=%-4d y1=%-4d x2=%-4d y2=%-4d\",\n-                x1, y1, x2, y2);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"D3DRenderer_doDrawLineD3D x1=%-4d y1=%-4d x2=%-4d y2=%-4d\",\n+               x1, y1, x2, y2);\n@@ -49,3 +49,3 @@\n-    J2dTraceLn4(J2D_TRACE_INFO,\n-                \"D3DRenderer_DrawRect x=%-4d y=%-4d w=%-4d h=%-4d\",\n-                x, y, w, h);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"D3DRenderer_DrawRect x=%-4d y=%-4d w=%-4d h=%-4d\",\n+               x, y, w, h);\n@@ -61,1 +61,1 @@\n-    J2dTraceLn4(J2D_TRACE_INFO,\n+    J2dTraceLn(J2D_TRACE_INFO,\n@@ -63,1 +63,1 @@\n-                x, y, w, h);\n+               x, y, w, h);\n@@ -123,8 +123,8 @@\n-    J2dTraceLn6(J2D_TRACE_INFO,\n-                \"D3DRenderer_FillParallelogram \"\n-                \"x=%6.2f y=%6.2f \"\n-                \"dx1=%6.2f dy1=%6.2f \"\n-                \"dx2=%6.2f dy2=%6.2f \",\n-                fx11, fy11,\n-                dx21, dy21,\n-                dx12, dy12);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"D3DRenderer_FillParallelogram \"\n+               \"x=%6.2f y=%6.2f \"\n+               \"dx1=%6.2f dy1=%6.2f \"\n+               \"dx2=%6.2f dy2=%6.2f \",\n+               fx11, fy11,\n+               dx21, dy21,\n+               dx12, dy12);\n@@ -147,8 +147,8 @@\n-    J2dTraceLn8(J2D_TRACE_INFO,\n-                \"D3DRenderer_DrawParallelogram \"\n-                \"x=%6.2f y=%6.2f \"\n-                \"dx1=%6.2f dy1=%6.2f lwr1=%6.2f \"\n-                \"dx2=%6.2f dy2=%6.2f lwr2=%6.2f \",\n-                fx11, fy11,\n-                dx21, dy21, lwr21,\n-                dx12, dy12, lwr12);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"D3DRenderer_DrawParallelogram \"\n+               \"x=%6.2f y=%6.2f \"\n+               \"dx1=%6.2f dy1=%6.2f lwr1=%6.2f \"\n+               \"dx2=%6.2f dy2=%6.2f lwr2=%6.2f \",\n+               fx11, fy11,\n+               dx21, dy21, lwr21,\n+               dx12, dy12, lwr12);\n@@ -254,8 +254,8 @@\n-    J2dTraceLn6(J2D_TRACE_INFO,\n-                \"D3DRenderer_FillAAParallelogram \"\n-                \"x=%6.2f y=%6.2f \"\n-                \"dx1=%6.2f dy1=%6.2f \"\n-                \"dx2=%6.2f dy2=%6.2f \",\n-                fx11, fy11,\n-                dx21, dy21,\n-                dx12, dy12);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"D3DRenderer_FillAAParallelogram \"\n+               \"x=%6.2f y=%6.2f \"\n+               \"dx1=%6.2f dy1=%6.2f \"\n+               \"dx2=%6.2f dy2=%6.2f \",\n+               fx11, fy11,\n+               dx21, dy21,\n+               dx12, dy12);\n@@ -293,8 +293,8 @@\n-    J2dTraceLn8(J2D_TRACE_INFO,\n-                \"D3DRenderer_DrawAAParallelogram \"\n-                \"x=%6.2f y=%6.2f \"\n-                \"dx1=%6.2f dy1=%6.2f lwr1=%6.2f \"\n-                \"dx2=%6.2f dy2=%6.2f lwr2=%6.2f \",\n-                fx11, fy11,\n-                dx21, dy21, lwr21,\n-                dx12, dy12, lwr12);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"D3DRenderer_DrawAAParallelogram \"\n+               \"x=%6.2f y=%6.2f \"\n+               \"dx1=%6.2f dy1=%6.2f lwr1=%6.2f \"\n+               \"dx2=%6.2f dy2=%6.2f lwr2=%6.2f \",\n+               fx11, fy11,\n+               dx21, dy21, lwr21,\n+               dx12, dy12, lwr12);\n","filename":"src\/java.desktop\/windows\/native\/libawt\/java2d\/d3d\/D3DRenderer.cpp","additions":41,"deletions":41,"binary":false,"changes":82,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2008, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -64,1 +64,1 @@\n-            J2dTraceLn1(J2D_TRACE_VERBOSE, \"  resource type=%d\", type);\n+            J2dTraceLn(J2D_TRACE_VERBOSE, \"  resource type=%d\", type);\n@@ -93,3 +93,3 @@\n-        J2dTraceLn2(J2D_TRACE_WARNING,\n-                    \"D3DResource::SetSDOps: overwriting \"\\\n-                    \"this->pOps=0x%x with pOps=0x%x\", this->pOps, pOps);\n+        J2dTraceLn(J2D_TRACE_WARNING,\n+                   \"D3DResource::SetSDOps: overwriting \"\\\n+                   \"this->pOps=0x%x with pOps=0x%x\", this->pOps, pOps);\n@@ -160,1 +160,1 @@\n-    J2dTraceLn1(J2D_TRACE_INFO, \"D3DRM::Init pCtx=%x\", pCtx);\n+    J2dTraceLn(J2D_TRACE_INFO, \"D3DRM::Init pCtx=%x\", pCtx);\n@@ -214,1 +214,1 @@\n-        J2dTraceLn1(J2D_TRACE_VERBOSE, \"  releasing pResource=%x\", pResource);\n+        J2dTraceLn(J2D_TRACE_VERBOSE, \"  releasing pResource=%x\", pResource);\n@@ -240,1 +240,1 @@\n-        J2dTraceLn1(J2D_TRACE_VERBOSE, \"  pResource=%x\", pResource);\n+        J2dTraceLn(J2D_TRACE_VERBOSE, \"  pResource=%x\", pResource);\n@@ -264,2 +264,2 @@\n-    J2dTraceLn4(J2D_TRACE_VERBOSE, \"  w=%d h=%d isRTT=%d isOpaque=%d\",\n-                width, height, isRTT, isOpaque);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  w=%d h=%d isRTT=%d isOpaque=%d\",\n+               width, height, isRTT, isOpaque);\n@@ -320,1 +320,1 @@\n-        J2dTraceLn1(J2D_TRACE_VERBOSE, \"  created texture: 0x%x\", pTexture);\n+        J2dTraceLn(J2D_TRACE_VERBOSE, \"  created texture: 0x%x\", pTexture);\n@@ -345,2 +345,2 @@\n-    J2dTraceLn3(J2D_TRACE_VERBOSE, \"  w=%d h=%d isOpaque=%d\",\n-                width, height, isOpaque);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  w=%d h=%d isOpaque=%d\",\n+               width, height, isOpaque);\n@@ -366,1 +366,1 @@\n-        J2dTraceLn1(J2D_TRACE_VERBOSE, \"  created RT Surface: 0x%x \", pSurface);\n+        J2dTraceLn(J2D_TRACE_VERBOSE, \"  created RT Surface: 0x%x \", pSurface);\n@@ -388,1 +388,1 @@\n-    J2dTraceLn2(J2D_TRACE_VERBOSE, \"  w=%d h=%d\", width, height);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  w=%d h=%d\", width, height);\n@@ -416,1 +416,1 @@\n-        J2dTraceLn1(J2D_TRACE_VERBOSE, \"  created OSP Surface: 0x%x \",pSurface);\n+        J2dTraceLn(J2D_TRACE_VERBOSE, \"  created OSP Surface: 0x%x \",pSurface);\n@@ -439,2 +439,2 @@\n-    J2dTraceLn4(J2D_TRACE_VERBOSE, \"  w=%d h=%d hwnd=%x numBuffers=%d\",\n-                width, height, hWnd, numBuffers);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  w=%d h=%d hwnd=%x numBuffers=%d\",\n+               width, height, hWnd, numBuffers);\n@@ -484,1 +484,1 @@\n-        J2dTraceLn1(J2D_TRACE_VERBOSE,\"  created swap chain: 0x%x \",pSwapChain);\n+        J2dTraceLn(J2D_TRACE_VERBOSE,\"  created swap chain: 0x%x \",pSwapChain);\n","filename":"src\/java.desktop\/windows\/native\/libawt\/java2d\/d3d\/D3DResourceManager.cpp","additions":19,"deletions":19,"binary":false,"changes":38,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2008, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -58,4 +58,2 @@\n-\/\/#define J2dTraceLn(a, b) fprintf(stderr, \"%s\\n\", b);\n-\/\/#define J2dTraceLn1(a, b, c) fprintf(stderr, b, c);\n-#define J2dTraceLn(a, b)\n-#define J2dTraceLn1(a, b, c)\n+\/\/#define J2dTraceLn(level, ...) (fprintf(stderr, __VA_ARGS__), fprintf(stderr, \"\\n\"));\n+#define J2dTraceLn(level, ...)\n@@ -215,3 +213,3 @@\n-    J2dTraceLn1(J2D_TRACE_INFO,\n-                \"D3DShaderGen_GenerateConvolveShader: flags=%d\",\n-                flags);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"D3DShaderGen_GenerateConvolveShader: flags=%d\",\n+               flags);\n@@ -276,3 +274,3 @@\n-    J2dTraceLn1(J2D_TRACE_INFO,\n-                \"D3DShaderGen_GenerateRescaleShader: flags=%d\",\n-                flags);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"D3DShaderGen_GenerateRescaleShader: flags=%d\",\n+               flags);\n@@ -341,3 +339,3 @@\n-    J2dTraceLn1(J2D_TRACE_INFO,\n-                \"D3DShaderGen_GenerateLookupShader: flags=%d\",\n-                flags);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"D3DShaderGen_GenerateLookupShader: flags=%d\",\n+               flags);\n@@ -430,3 +428,3 @@\n-    J2dTraceLn1(J2D_TRACE_INFO,\n-                \"D3DShaderGen_GenerateBasicGradShader\",\n-                flags);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"D3DShaderGen_GenerateBasicGradShader\",\n+               flags);\n@@ -692,3 +690,3 @@\n-    J2dTraceLn1(J2D_TRACE_INFO,\n-                \"D3DShaderGen_GenerateLinearGradShader\",\n-                flags);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"D3DShaderGen_GenerateLinearGradShader\",\n+               flags);\n@@ -723,3 +721,3 @@\n-    J2dTraceLn1(J2D_TRACE_INFO,\n-                \"D3DShaderGen_GenerateRadialGradShader\",\n-                flags);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"D3DShaderGen_GenerateRadialGradShader\",\n+               flags);\n","filename":"src\/java.desktop\/windows\/native\/libawt\/java2d\/d3d\/D3DShaderGen.c","additions":21,"deletions":23,"binary":false,"changes":44,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -251,2 +251,2 @@\n-        J2dTraceLn1(J2D_TRACE_VERBOSE,\n-                    \"  created texture pResource=%x\", d3dsdo->pResource);\n+        J2dTraceLn(J2D_TRACE_VERBOSE,\n+                   \"  created texture pResource=%x\", d3dsdo->pResource);\n@@ -296,2 +296,2 @@\n-        J2dTraceLn1(J2D_TRACE_VERBOSE, \"  created RT surface pResource=0x%x\",\n-                    d3dsdo->pResource);\n+        J2dTraceLn(J2D_TRACE_VERBOSE, \"  created RT surface pResource=0x%x\",\n+                   d3dsdo->pResource);\n@@ -393,2 +393,2 @@\n-        J2dTraceLn1(J2D_TRACE_VERBOSE, \"  created swap chain pResource=0x%x\",\n-                    d3dsdo->pResource);\n+        J2dTraceLn(J2D_TRACE_VERBOSE, \"  created swap chain pResource=0x%x\",\n+                   d3dsdo->pResource);\n@@ -534,1 +534,1 @@\n-    J2dTraceLn(J2D_TRACE_INFO, \"D3DSurfaceData_getNativeResourceNative\")\n+    J2dTraceLn(J2D_TRACE_INFO, \"D3DSurfaceData_getNativeResourceNative\");\n","filename":"src\/java.desktop\/windows\/native\/libawt\/java2d\/d3d\/D3DSurfaceData.cpp","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -136,2 +136,2 @@\n-    J2dTraceLn1(J2D_TRACE_INFO,\n-                \"D3DTR_UpdateLCDTextColor: contrast=%d\", contrast);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"D3DTR_UpdateLCDTextColor: contrast=%d\", contrast);\n","filename":"src\/java.desktop\/windows\/native\/libawt\/java2d\/d3d\/D3DTextRenderer.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -736,5 +736,5 @@\n-        J2dTraceLn2(J2D_TRACE_VERBOSE,\n-                    \"D3DVC::Render Starting flushing of %d vertices \"\\\n-                    \"in %d batches\",\n-                    pendingVertices,\n-                    (currentBatch - firstPendingBatch + 1));\n+        J2dTraceLn(J2D_TRACE_VERBOSE,\n+                   \"D3DVC::Render Starting flushing of %d vertices \"\\\n+                   \"in %d batches\",\n+                   pendingVertices,\n+                   (currentBatch - firstPendingBatch + 1));\n@@ -788,4 +788,4 @@\n-        J2dTraceLn2(J2D_TRACE_VERBOSE,\n-                    \"D3DVC::EnsureCapacity exceeded capacity. \"\\\n-                    \"current v: %d, requested vertices: %d\\n\",\n-                    firstUnusedVertex, vNum);\n+        J2dTraceLn(J2D_TRACE_VERBOSE,\n+                   \"D3DVC::EnsureCapacity exceeded capacity. \"\\\n+                   \"current v: %d, requested vertices: %d\\n\",\n+                   firstUnusedVertex, vNum);\n@@ -797,5 +797,5 @@\n-    J2dTraceLn5(J2D_TRACE_VERBOSE,\n-                \"D3DVC::EnsureCapacity current batch: %d \"\\\n-                \" batch.type=%d newType=%d vNum=%d firstUnusedV=%d\",\n-                currentBatch, batches[currentBatch].pType, newPType, vNum,\n-                firstUnusedVertex);\n+    J2dTraceLn(J2D_TRACE_VERBOSE,\n+               \"D3DVC::EnsureCapacity current batch: %d \"\\\n+               \" batch.type=%d newType=%d vNum=%d firstUnusedV=%d\",\n+               currentBatch, batches[currentBatch].pType, newPType, vNum,\n+               firstUnusedVertex);\n","filename":"src\/java.desktop\/windows\/native\/libawt\/java2d\/d3d\/D3DVertexCacher.cpp","additions":15,"deletions":15,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2004, 2015, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2004, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -248,3 +248,3 @@\n-        J2dRlsTrace5(J2D_TRACE_VERBOSE,\n-            \"[V]     pixfmt=%d db=%d alpha=%d depth=%d stencil=%d valid=\",\n-                     pixfmt, db, alpha, depth, stencil);\n+        J2dRlsTrace(J2D_TRACE_VERBOSE, \"[V]     \"\\\n+                    \"pixfmt=%d db=%d alpha=%d depth=%d stencil=%d valid=\",\n+                    pixfmt, db, alpha, depth, stencil);\n@@ -267,3 +267,2 @@\n-    J2dRlsTraceLn1(J2D_TRACE_INFO,\n-        \"WGLGC_GetPixelFormatForDC: chose %d as the best pixel format\",\n-                   chosenPixFmt);\n+    J2dRlsTraceLn(J2D_TRACE_INFO, \"WGLGC_GetPixelFormatForDC: \"\\\n+                  \"chose %d as the best pixel format\", chosenPixFmt);\n@@ -598,3 +597,3 @@\n-    J2dRlsTraceLn1(J2D_TRACE_INFO,\n-        \"WGLGraphicsConfig_getWGLConfigInfo: OpenGL version=%s\",\n-                   (versionstr == NULL) ? \"null\" : (char *)versionstr);\n+    J2dRlsTraceLn(J2D_TRACE_INFO,\n+                  \"WGLGraphicsConfig_getWGLConfigInfo: OpenGL version=%s\",\n+                  (versionstr == NULL) ? \"null\" : (char *)versionstr);\n","filename":"src\/java.desktop\/windows\/native\/libawt\/java2d\/opengl\/WGLGraphicsConfig.c","additions":9,"deletions":10,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2004, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2004, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -215,3 +215,3 @@\n-    J2dTraceLn4(J2D_TRACE_VERBOSE, \"  src: %d %p dst: %d %p\",\n-                srcOps->drawableType, srcOps,\n-                dstOps->drawableType, dstOps);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  src: %d %p dst: %d %p\",\n+               srcOps->drawableType, srcOps,\n+               dstOps->drawableType, dstOps);\n@@ -357,2 +357,2 @@\n-    J2dTraceLn2(J2D_TRACE_VERBOSE, \"  created window: w=%d h=%d\",\n-                oglsdo->width, oglsdo->height);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  created window: w=%d h=%d\",\n+               oglsdo->width, oglsdo->height);\n","filename":"src\/java.desktop\/windows\/native\/libawt\/java2d\/opengl\/WGLSurfaceData.c","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1999, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1999, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -135,3 +135,3 @@\n-    J2dTraceLn5(J2D_TRACE_VERBOSE,\n-                \"  color=0x%x x1=%-4d y1=%-4d x2=%-4d y2=%-4d\",\n-                color, x1, y1, x2, y2);\n+    J2dTraceLn(J2D_TRACE_VERBOSE,\n+               \"  color=0x%x x1=%-4d y1=%-4d x2=%-4d y2=%-4d\",\n+               color, x1, y1, x2, y2);\n@@ -182,3 +182,3 @@\n-    J2dTraceLn5(J2D_TRACE_VERBOSE,\n-                \"  color=0x%x x=%-4d y=%-4d w=%-4d h=%-4d\",\n-                color, x, y, w, h);\n+    J2dTraceLn(J2D_TRACE_VERBOSE,\n+               \"  color=0x%x x=%-4d y=%-4d w=%-4d h=%-4d\",\n+               color, x, y, w, h);\n@@ -227,5 +227,5 @@\n-    J2dTraceLn5(J2D_TRACE_VERBOSE,\n-                \"  color=0x%x x=%-4d y=%-4d w=%-4d h=%-4d\",\n-                color, x, y, w, h);\n-    J2dTraceLn2(J2D_TRACE_VERBOSE, \"  arcW=%-4d arcH=%-4d\",\n-                arcW, arcH);\n+    J2dTraceLn(J2D_TRACE_VERBOSE,\n+               \"  color=0x%x x=%-4d y=%-4d w=%-4d h=%-4d\",\n+               color, x, y, w, h);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  arcW=%-4d arcH=%-4d\",\n+               arcW, arcH);\n@@ -271,3 +271,3 @@\n-    J2dTraceLn5(J2D_TRACE_VERBOSE,\n-                \"  color=0x%x x=%-4d y=%-4d w=%-4d h=%-4d\",\n-                color, x, y, w, h);\n+    J2dTraceLn(J2D_TRACE_VERBOSE,\n+               \"  color=0x%x x=%-4d y=%-4d w=%-4d h=%-4d\",\n+               color, x, y, w, h);\n@@ -310,6 +310,6 @@\n-    J2dTraceLn5(J2D_TRACE_VERBOSE,\n-                \"  color=0x%x x=%-4d y=%-4d w=%-4d h=%-4d\",\n-                color, x, y, w, h);\n-    J2dTraceLn2(J2D_TRACE_VERBOSE,\n-                \"  angleStart=%-4d angleExtent=%-4d\",\n-                angleStart, angleExtent);\n+    J2dTraceLn(J2D_TRACE_VERBOSE,\n+               \"  color=0x%x x=%-4d y=%-4d w=%-4d h=%-4d\",\n+               color, x, y, w, h);\n+    J2dTraceLn(J2D_TRACE_VERBOSE,\n+               \"  angleStart=%-4d angleExtent=%-4d\",\n+               angleStart, angleExtent);\n@@ -367,4 +367,4 @@\n-    J2dTraceLn5(J2D_TRACE_VERBOSE,\n-                \"  color=0x%x transx=%-4d transy=%-4d \"\\\n-                \"npoints=%-4d isclosed=%-4d\",\n-                color, transx, transy, npoints, isclosed);\n+    J2dTraceLn(J2D_TRACE_VERBOSE,\n+               \"  color=0x%x transx=%-4d transy=%-4d \"\\\n+               \"npoints=%-4d isclosed=%-4d\",\n+               color, transx, transy, npoints, isclosed);\n@@ -437,3 +437,3 @@\n-    J2dTraceLn5(J2D_TRACE_VERBOSE,\n-                \"  color=0x%x x=%-4d y=%-4d w=%-4d h=%-4d\",\n-                color, x, y, w, h);\n+    J2dTraceLn(J2D_TRACE_VERBOSE,\n+               \"  color=0x%x x=%-4d y=%-4d w=%-4d h=%-4d\",\n+               color, x, y, w, h);\n@@ -470,5 +470,5 @@\n-    J2dTraceLn5(J2D_TRACE_VERBOSE,\n-                \"  color=0x%x x=%-4d y=%-4d w=%-4d h=%-4d\",\n-                color, x, y, w, h);\n-    J2dTraceLn2(J2D_TRACE_VERBOSE, \"  arcW=%-4d arcH=%-4d\",\n-                arcW, arcH);\n+    J2dTraceLn(J2D_TRACE_VERBOSE,\n+               \"  color=0x%x x=%-4d y=%-4d w=%-4d h=%-4d\",\n+               color, x, y, w, h);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  arcW=%-4d arcH=%-4d\",\n+               arcW, arcH);\n@@ -513,3 +513,3 @@\n-    J2dTraceLn5(J2D_TRACE_VERBOSE,\n-                \"  color=0x%x x=%-4d y=%-4d w=%-4d h=%-4d\",\n-                color, x, y, w, h);\n+    J2dTraceLn(J2D_TRACE_VERBOSE,\n+               \"  color=0x%x x=%-4d y=%-4d w=%-4d h=%-4d\",\n+               color, x, y, w, h);\n@@ -581,6 +581,6 @@\n-    J2dTraceLn5(J2D_TRACE_VERBOSE,\n-                \"  color=0x%x x=%-4d y=%-4d w=%-4d h=%-4d\",\n-                color, x, y, w, h);\n-    J2dTraceLn2(J2D_TRACE_VERBOSE,\n-                \"  angleStart=%-4d angleExtent=%-4d\",\n-                angleStart, angleExtent);\n+    J2dTraceLn(J2D_TRACE_VERBOSE,\n+               \"  color=0x%x x=%-4d y=%-4d w=%-4d h=%-4d\",\n+               color, x, y, w, h);\n+    J2dTraceLn(J2D_TRACE_VERBOSE,\n+               \"  angleStart=%-4d angleExtent=%-4d\",\n+               angleStart, angleExtent);\n@@ -642,3 +642,3 @@\n-    J2dTraceLn4(J2D_TRACE_VERBOSE,\n-                \"  color=0x%x transx=%-4d transy=%-4d npoints=%-4d\",\n-                color, transx, transy, npoints);\n+    J2dTraceLn(J2D_TRACE_VERBOSE,\n+               \"  color=0x%x transx=%-4d transy=%-4d npoints=%-4d\",\n+               color, transx, transy, npoints);\n@@ -713,3 +713,3 @@\n-    J2dTraceLn4(J2D_TRACE_VERBOSE,\n-                \"  color=0x%x transx=%-4d transy=%-4d isfill=%-4d\",\n-                color, transX, transY, isfill);\n+    J2dTraceLn(J2D_TRACE_VERBOSE,\n+               \"  color=0x%x transx=%-4d transy=%-4d isfill=%-4d\",\n+               color, transX, transY, isfill);\n@@ -895,3 +895,3 @@\n-    J2dTraceLn4(J2D_TRACE_VERBOSE, \"   srcx=%-4d srcy=%-4d dx=%-4d dy=%-4d\",\n-                srcx, srcy, dx, dy);\n-    J2dTraceLn2(J2D_TRACE_VERBOSE, \"     w=%-4d h=%-4d\", width, height);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"   srcx=%-4d srcy=%-4d dx=%-4d dy=%-4d\",\n+               srcx, srcy, dx, dy);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"     w=%-4d h=%-4d\", width, height);\n","filename":"src\/java.desktop\/windows\/native\/libawt\/java2d\/windows\/GDIRenderer.cpp","additions":51,"deletions":51,"binary":false,"changes":102,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1999, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1999, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -79,3 +79,3 @@\n-        J2dTraceLn2(J2D_TRACE_VERBOSE,\n-                    \"  current batch limit for thread 0x%x is %d\",\n-                     GetCurrentThreadId(), ::GdiGetBatchLimit());\n+        J2dTraceLn(J2D_TRACE_VERBOSE,\n+                   \"  current batch limit for thread 0x%x is %d\",\n+                   GetCurrentThreadId(), ::GdiGetBatchLimit());\n@@ -406,2 +406,2 @@\n-    J2dTraceLn2(J2D_TRACE_VERBOSE, \"  wsdo=0x%x wsdo->window=0x%x\",\n-                wsdo, wsdo->window);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  wsdo=0x%x wsdo->window=0x%x\",\n+               wsdo, wsdo->window);\n@@ -417,4 +417,4 @@\n-            J2dTraceLn2(J2D_TRACE_WARNING,\n-                        \"GDIWindowSurfaceData_initOps: Surface depth mismatch: \"\\\n-                        \"wsdo->depth=%d device depth=%d. Surface invalidated.\",\n-                        wsdo->depth, wsdo->device->GetBitDepth());\n+            J2dTraceLn(J2D_TRACE_WARNING,\n+                       \"GDIWindowSurfaceData_initOps: Surface depth mismatch: \"\\\n+                       \"wsdo->depth=%d device depth=%d. Surface invalidated.\",\n+                       wsdo->depth, wsdo->device->GetBitDepth());\n@@ -422,4 +422,4 @@\n-            J2dTraceLn1(J2D_TRACE_WARNING,\n-                        \"GDIWindowSurfaceData_initOps: Incorrect \"\\\n-                        \"screen number (screen=%d). Surface invalidated.\",\n-                        screen);\n+            J2dTraceLn(J2D_TRACE_WARNING,\n+                       \"GDIWindowSurfaceData_initOps: Incorrect \"\\\n+                       \"screen number (screen=%d). Surface invalidated.\",\n+                       screen);\n@@ -464,3 +464,3 @@\n-        J2dTraceLn1(J2D_TRACE_WARNING,\n-                    \"GDIWindowSurfaceData_GetComp: Null pData? pData=0x%x\",\n-                    pData);\n+        J2dTraceLn(J2D_TRACE_WARNING,\n+                   \"GDIWindowSurfaceData_GetComp: Null pData? pData=0x%x\",\n+                   pData);\n@@ -1060,2 +1060,2 @@\n-    J2dTraceLn2(J2D_TRACE_VERBOSE, \"  wsdo=0x%x wsdo->window=0x%x\",\n-                wsdo, wsdo->window);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  wsdo=0x%x wsdo->window=0x%x\",\n+               wsdo, wsdo->window);\n","filename":"src\/java.desktop\/windows\/native\/libawt\/java2d\/windows\/GDIWindowSurfaceData.cpp","additions":19,"deletions":19,"binary":false,"changes":38,"status":"modified"},{"patch":"@@ -96,6 +96,6 @@\n-    J2dTraceLn1(J2D_TRACE_INFO, \"  d3dEnabled = %s\",\n-                (useD3D ? \"true\" : \"false\"));\n-    J2dTraceLn1(J2D_TRACE_INFO, \"  d3dSet = %s\",\n-                (forceD3DUsage ? \"true\" : \"false\"));\n-    J2dTraceLn1(J2D_TRACE_INFO, \"  setHighDPIAware = %s\",\n-                (setHighDPIAware ? \"true\" : \"false\"));\n+    J2dTraceLn(J2D_TRACE_INFO, \"  d3dEnabled = %s\",\n+               (useD3D ? \"true\" : \"false\"));\n+    J2dTraceLn(J2D_TRACE_INFO, \"  d3dSet = %s\",\n+               (forceD3DUsage ? \"true\" : \"false\"));\n+    J2dTraceLn(J2D_TRACE_INFO, \"  setHighDPIAware = %s\",\n+               (setHighDPIAware ? \"true\" : \"false\"));\n","filename":"src\/java.desktop\/windows\/native\/libawt\/java2d\/windows\/WindowsFlags.cpp","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -102,1 +102,3 @@\n-        J2dTraceLn1(J2D_TRACE_INFO, \"Devices::IsValidMonitor: GetMonitorInfo failed for monitor with handle %p\", hMon);\n+        J2dTraceLn(J2D_TRACE_INFO,\n+                   \"Devices::IsValidMonitor: GetMonitorInfo failed for monitor with handle %p\",\n+                   hMon);\n@@ -108,1 +110,3 @@\n-        J2dTraceLn2(J2D_TRACE_INFO, \"Devices::IsValidMonitor: CreateDC failed for monitor with handle %p, device: %S\", hMon, mieInfo.szDevice);\n+        J2dTraceLn(J2D_TRACE_INFO,\n+                   \"Devices::IsValidMonitor: CreateDC failed for monitor with handle %p, device: %S\",\n+                   hMon, mieInfo.szDevice);\n@@ -186,1 +190,1 @@\n-    J2dTraceLn1(J2D_TRACE_INFO, \"Devices::Devices numDevices=%d\", numDevices);\n+    J2dTraceLn(J2D_TRACE_INFO, \"Devices::Devices numDevices=%d\", numDevices);\n@@ -227,1 +231,1 @@\n-        J2dTraceLn2(J2D_TRACE_VERBOSE, \"  hmon[%d]=0x%x\", i, monHds[i]);\n+        J2dTraceLn(J2D_TRACE_VERBOSE, \"  hmon[%d]=0x%x\", i, monHds[i]);\n@@ -250,2 +254,2 @@\n-                J2dTraceLn1(J2D_TRACE_WARNING,\n-                            \"Devices::UpdateInstance: device removed: %d\", i);\n+                J2dTraceLn(J2D_TRACE_WARNING,\n+                           \"Devices::UpdateInstance: device removed: %d\", i);\n@@ -280,1 +284,1 @@\n-    J2dTraceLn1(J2D_TRACE_VERBOSE, \"  refCount=%d\", refCount);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  refCount=%d\", refCount);\n@@ -322,3 +326,3 @@\n-    J2dTraceLn2(J2D_TRACE_INFO,\n-                \"Devices::GetDeviceReference index=%d adjust?=%d\",\n-                index, adjust);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"Devices::GetDeviceReference index=%d adjust?=%d\",\n+               index, adjust);\n@@ -342,3 +346,3 @@\n-    J2dTraceLn2(J2D_TRACE_INFO,\n-                \"Devices::GetDevice index=%d adjust?=%d\",\n-                index, adjust);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"Devices::GetDevice index=%d adjust?=%d\",\n+               index, adjust);\n@@ -347,3 +351,3 @@\n-            J2dTraceLn1(J2D_TRACE_WARNING,\n-                        \"Devices::GetDevice: \"\\\n-                        \"incorrect index %d, returning NULL.\", index);\n+            J2dTraceLn(J2D_TRACE_WARNING,\n+                       \"Devices::GetDevice: \"\\\n+                       \"incorrect index %d, returning NULL.\", index);\n@@ -352,3 +356,3 @@\n-        J2dTraceLn1(J2D_TRACE_WARNING,\n-                    \"Devices::GetDevice: \"\\\n-                    \"adjusted index %d to 0.\", index);\n+        J2dTraceLn(J2D_TRACE_WARNING,\n+                   \"Devices::GetDevice: \"\\\n+                   \"adjusted index %d to 0.\", index);\n@@ -388,1 +392,1 @@\n-    J2dTraceLn1(J2D_TRACE_VERBOSE, \"  refCount=%d\", refs);\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"  refCount=%d\", refs);\n@@ -410,3 +414,3 @@\n-        J2dTraceLn1(J2D_TRACE_ERROR,\n-                    \"Devices::Release: Negative ref count! refCount=%d\",\n-                    refs);\n+        J2dTraceLn(J2D_TRACE_ERROR,\n+                   \"Devices::Release: Negative ref count! refCount=%d\",\n+                   refs);\n","filename":"src\/java.desktop\/windows\/native\/libawt\/windows\/Devices.cpp","additions":28,"deletions":24,"binary":false,"changes":52,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1996, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1996, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -125,3 +125,3 @@\n-    J2dTraceLn4(J2D_TRACE_VERBOSE2, \\\n-                \"CS.Wait:  tid, cs, file, line = 0x%x, 0x%x, %s, %d\", \\\n-                GetCurrentThreadId(), &(cs), __FILE__, __LINE__); \\\n+    J2dTraceLn(J2D_TRACE_VERBOSE2, \\\n+               \"CS.Wait:  tid, cs, file, line = 0x%x, 0x%x, %s, %d\", \\\n+               GetCurrentThreadId(), &(cs), __FILE__, __LINE__); \\\n@@ -129,3 +129,3 @@\n-    J2dTraceLn4(J2D_TRACE_VERBOSE2, \\\n-                \"CS.Enter: tid, cs, file, line = 0x%x, 0x%x, %s, %d\", \\\n-                GetCurrentThreadId(), &(cs), __FILE__, __LINE__); \\\n+    J2dTraceLn(J2D_TRACE_VERBOSE2, \\\n+               \"CS.Enter: tid, cs, file, line = 0x%x, 0x%x, %s, %d\", \\\n+               GetCurrentThreadId(), &(cs), __FILE__, __LINE__); \\\n@@ -135,3 +135,3 @@\n-    J2dTraceLn4(J2D_TRACE_VERBOSE2, \\\n-                \"CS.Leave: tid, cs, file, line = 0x%x, 0x%x, %s, %d\", \\\n-                GetCurrentThreadId(), &(cs), __FILE__, __LINE__); \\\n+    J2dTraceLn(J2D_TRACE_VERBOSE2, \\\n+               \"CS.Leave: tid, cs, file, line = 0x%x, 0x%x, %s, %d\", \\\n+               GetCurrentThreadId(), &(cs), __FILE__, __LINE__); \\\n@@ -139,3 +139,3 @@\n-    J2dTraceLn4(J2D_TRACE_VERBOSE2, \\\n-                \"CS.Left:  tid, cs, file, line = 0x%x, 0x%x, %s, %d\", \\\n-                GetCurrentThreadId(), &(cs), __FILE__, __LINE__); \\\n+    J2dTraceLn(J2D_TRACE_VERBOSE2, \\\n+               \"CS.Left:  tid, cs, file, line = 0x%x, 0x%x, %s, %d\", \\\n+               GetCurrentThreadId(), &(cs), __FILE__, __LINE__); \\\n","filename":"src\/java.desktop\/windows\/native\/libawt\/windows\/awt_Toolkit.h","additions":13,"deletions":13,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1999, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1999, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -846,2 +846,2 @@\n-    J2dTraceLn1(J2D_TRACE_INFO,\n-                \"AwtWin32GraphicsDevice::GetDCFromScreen screen=%d\", screen);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"AwtWin32GraphicsDevice::GetDCFromScreen screen=%d\", screen);\n@@ -857,3 +857,3 @@\n-    J2dTraceLn2(J2D_TRACE_INFO,\n-                \"AwtWin32GraphicsDevice::AreSameMonitors mhnd1=%x mhnd2=%x\",\n-                mon1, mon2);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"AwtWin32GraphicsDevice::AreSameMonitors mhnd1=%x mhnd2=%x\",\n+               mon1, mon2);\n@@ -888,2 +888,2 @@\n-    J2dTraceLn1(J2D_TRACE_INFO,\n-                \"AwtWin32GraphicsDevice::GetScreenFromHMONITOR mhnd=%x\", mon);\n+    J2dTraceLn(J2D_TRACE_INFO,\n+               \"AwtWin32GraphicsDevice::GetScreenFromHMONITOR mhnd=%x\", mon);\n@@ -901,1 +901,1 @@\n-            J2dTraceLn1(J2D_TRACE_VERBOSE, \"  Found device: %d\", i);\n+            J2dTraceLn(J2D_TRACE_VERBOSE, \"  Found device: %d\", i);\n@@ -906,3 +906,3 @@\n-    J2dTraceLn1(J2D_TRACE_WARNING,\n-                \"AwtWin32GraphicsDevice::GetScreenFromHMONITOR(): \"\\\n-                \"couldn't find screen for HMONITOR %x, returning default\", mon);\n+    J2dTraceLn(J2D_TRACE_WARNING,\n+               \"AwtWin32GraphicsDevice::GetScreenFromHMONITOR(): \"\\\n+               \"couldn't find screen for HMONITOR %x, returning default\", mon);\n@@ -1122,3 +1122,3 @@\n-        J2dTraceLn1(J2D_TRACE_ERROR,\n-                    \"Error %d setting topmost attribute to fs window\",\n-                    ::GetLastError());\n+        J2dTraceLn(J2D_TRACE_ERROR,\n+                   \"Error %d setting topmost attribute to fs window\",\n+                   ::GetLastError());\n@@ -1157,3 +1157,3 @@\n-        J2dTraceLn1(J2D_TRACE_ERROR,\n-                    \"Error %d unsetting topmost attribute to fs window\",\n-                    ::GetLastError());\n+        J2dTraceLn(J2D_TRACE_ERROR,\n+                   \"Error %d unsetting topmost attribute to fs window\",\n+                   ::GetLastError());\n","filename":"src\/java.desktop\/windows\/native\/libawt\/windows\/awt_Win32GraphicsDevice.cpp","additions":18,"deletions":18,"binary":false,"changes":36,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1999, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1999, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -112,1 +112,1 @@\n-            J2dTraceLn1(J2D_TRACE_VERBOSE, \" composition enabled: %d\",bRes);\n+            J2dTraceLn(J2D_TRACE_VERBOSE, \" composition enabled: %d\",bRes);\n@@ -114,3 +114,3 @@\n-            J2dTraceLn1(J2D_TRACE_ERROR,\n-                    \"IsDWMCompositionEnabled: error %x when detecting\"\\\n-                    \"if composition is enabled\", res);\n+            J2dTraceLn(J2D_TRACE_ERROR,\n+                       \"IsDWMCompositionEnabled: error %x when detecting\"\\\n+                       \"if composition is enabled\", res);\n","filename":"src\/java.desktop\/windows\/native\/libawt\/windows\/awt_Win32GraphicsEnv.cpp","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2008, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,0 +28,2 @@\n+import java.io.Serial;\n+\n@@ -43,0 +45,2 @@\n+\n+    @Serial\n","filename":"src\/java.instrument\/share\/classes\/java\/lang\/instrument\/IllegalClassFormatException.java","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2004, 2008, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2004, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,0 +28,2 @@\n+import java.io.Serial;\n+\n@@ -37,0 +39,2 @@\n+\n+    @Serial\n","filename":"src\/java.instrument\/share\/classes\/java\/lang\/instrument\/UnmodifiableClassException.java","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,0 +28,2 @@\n+import java.io.Serial;\n+\n@@ -34,1 +36,0 @@\n-\n@@ -36,0 +37,2 @@\n+\n+    @Serial\n","filename":"src\/java.instrument\/share\/classes\/java\/lang\/instrument\/UnmodifiableModuleException.java","additions":5,"deletions":2,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -141,0 +141,1 @@\n+            hashCode = -1; \/\/ Force recalculation\n@@ -444,0 +445,1 @@\n+\n@@ -450,0 +452,1 @@\n+        hashCode = -1; \/\/ Force recalculation\n@@ -465,0 +468,1 @@\n+\n@@ -469,0 +473,1 @@\n+        hashCode = -1; \/\/ Force recalculation\n@@ -488,0 +493,1 @@\n+        hashCode = -1; \/\/ Force recalculation\n","filename":"src\/java.management\/share\/classes\/javax\/management\/ImmutableDescriptor.java","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,1 +32,0 @@\n-import jdk.internal.util.StaticProperty;\n@@ -98,1 +97,1 @@\n-                        StaticProperty.javaHome() + \"\\\\bin\\\\sspi_bridge.dll\",\n+                        System.getProperty(\"java.home\") + \"\\\\bin\\\\sspi_bridge.dll\",\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/jgss\/wrapper\/SunNativeProvider.java","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -59,0 +59,1 @@\n+        cvc-complex-type.2.4.d.1 = cvc-complex-type.2.4.d: Ungültiger Content wurde beginnend mit Element ''{0}'' gefunden. An dieser Stelle wird kein untergeordnetes Element ''{1}'' erwartet.\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/xerces\/internal\/impl\/msg\/XMLSchemaMessages_de.properties","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -59,0 +59,1 @@\n+        cvc-complex-type.2.4.d.1 = cvc-complex-type.2.4.d: 要素''{0}''で始まる無効なコンテンツが見つかりました。ここでは子要素''{1}''を使用できません。\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/xerces\/internal\/impl\/msg\/XMLSchemaMessages_ja.properties","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -59,0 +59,1 @@\n+        cvc-complex-type.2.4.d.1 = cvc-complex-type.2.4.d: 发现了以元素 ''{0}'' 开头的无效内容。此处不应含有子元素 ''{1}''。\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/xerces\/internal\/impl\/msg\/XMLSchemaMessages_zh_CN.properties","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,1 +34,1 @@\n- * @LastModified: Nov 2024\n+ * @LastModified: Apr 2025\n@@ -308,1 +308,0 @@\n-  public static final String ER_EXTENSION_FUNCTION_CANNOT_BE_INVOKED = \"ER_EXTENSION_FUNCTION_CANNOT_BE_INVOKED\";\n@@ -769,5 +768,0 @@\n-  \/** Field ER_EXTENSION_FUNCTION_CANNOT_BE_INVOKED                       *\/\n-\n-  { ER_EXTENSION_FUNCTION_CANNOT_BE_INVOKED,\n-       \"Erweiterungsfunktion \\\"{0}\\\" kann nicht aufgerufen werden, wenn das Feature \\\"XMLConstants.FEATURE_SECURE_PROCESSING\\\" auf \\\"true\\\" gesetzt ist.\"},\n-\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/xpath\/internal\/res\/XPATHErrorResources_de.java","additions":2,"deletions":8,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,1 +34,1 @@\n- * @LastModified: Nov 2024\n+ * @LastModified: Apr 2025\n@@ -308,1 +308,0 @@\n-  public static final String ER_EXTENSION_FUNCTION_CANNOT_BE_INVOKED = \"ER_EXTENSION_FUNCTION_CANNOT_BE_INVOKED\";\n@@ -769,5 +768,0 @@\n-  \/** Field ER_EXTENSION_FUNCTION_CANNOT_BE_INVOKED                       *\/\n-\n-  { ER_EXTENSION_FUNCTION_CANNOT_BE_INVOKED,\n-       \"\\u62E1\\u5F35\\u95A2\\u6570: XMLConstants.FEATURE_SECURE_PROCESSING\\u6A5F\\u80FD\\u304Ctrue\\u306B\\u8A2D\\u5B9A\\u3055\\u308C\\u308B\\u3068''{0}''\\u3092\\u8D77\\u52D5\\u3067\\u304D\\u307E\\u305B\\u3093\\u3002\"},\n-\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/xpath\/internal\/res\/XPATHErrorResources_ja.java","additions":2,"deletions":8,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,1 +34,1 @@\n- * @LastModified: Nov 2024\n+ * @LastModified: Apr 2025\n@@ -308,1 +308,0 @@\n-  public static final String ER_EXTENSION_FUNCTION_CANNOT_BE_INVOKED = \"ER_EXTENSION_FUNCTION_CANNOT_BE_INVOKED\";\n@@ -769,5 +768,0 @@\n-  \/** Field ER_EXTENSION_FUNCTION_CANNOT_BE_INVOKED                       *\/\n-\n-  { ER_EXTENSION_FUNCTION_CANNOT_BE_INVOKED,\n-       \"\\u5F53 XMLConstants.FEATURE_SECURE_PROCESSING \\u529F\\u80FD\\u8BBE\\u7F6E\\u4E3A\\u201C\\u771F\\u201D\\u65F6, \\u4E0D\\u80FD\\u8C03\\u7528\\u6269\\u5C55\\u51FD\\u6570 ''{0}''\\u3002\"},\n-\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/xpath\/internal\/res\/XPATHErrorResources_zh_CN.java","additions":2,"deletions":8,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -186,1 +186,1 @@\n-            if (options.isExplicitlyEnabled(Option.XLINT, lc)) {\n+            if (options.isLintExplicitlyEnabled(lc)) {\n@@ -188,1 +188,1 @@\n-            } else if (options.isExplicitlyDisabled(Option.XLINT, lc)) {\n+            } else if (options.isLintExplicitlyDisabled(lc)) {\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/code\/Lint.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -208,1 +208,1 @@\n-        lintOptions = !options.isExplicitlyDisabled(Option.XLINT, LintCategory.OPTIONS);\n+        lintOptions = !options.isLintDisabled(LintCategory.OPTIONS);\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/comp\/Modules.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -506,1 +506,1 @@\n-                    boolean lintPaths = !options.isExplicitlyDisabled(Option.XLINT, LintCategory.PATH);\n+                    boolean lintPaths = !options.isLintDisabled(LintCategory.PATH);\n@@ -579,1 +579,1 @@\n-        boolean lintOptions = !options.isExplicitlyDisabled(Option.XLINT, LintCategory.OPTIONS);\n+        boolean lintOptions = !options.isLintDisabled(LintCategory.OPTIONS);\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/main\/Arguments.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 1999, 2024, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 1999, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -254,1 +254,1 @@\n-compiler.misc.not.an.intf.component=Komponententyp {0} ist keine Schnittstelle\n+compiler.misc.not.an.intf.component=Komponententyp {0} ist keine Schnittstelle oder kein java.lang.Object\n@@ -392,1 +392,1 @@\n-compiler.err.implicit.class.should.not.have.package.declaration=Implizit deklarierte Klasse darf keine Packagedeklaration aufweisen\n+compiler.err.implicit.class.should.not.have.package.declaration=Kompakte Quelldatei darf keine Packagedeklaration aufweisen\n@@ -394,1 +394,1 @@\n-compiler.err.implicit.class.does.not.have.main.method=Implizit deklarierte Klasse weist keine Hauptmethode im Format \"void main()\" oder \"void main(String[] args)\" auf\n+compiler.err.implicit.class.does.not.have.main.method=Kompakte Quelldatei weist keine Hauptmethode im Format \"void main()\" oder \"void main(String[] args)\" auf\n@@ -504,0 +504,2 @@\n+compiler.err.illegal.char.literal.multiple.surrogates=Zeichenliteral enthält mehrere UTF-16-Codeeinheiten\n+\n@@ -514,0 +516,1 @@\n+# lint: this-escape\n@@ -516,0 +519,1 @@\n+# lint: this-escape\n@@ -530,0 +534,1 @@\n+# lint: text-blocks\n@@ -532,0 +537,1 @@\n+# lint: text-blocks\n@@ -1115,0 +1121,1 @@\n+# lint: path\n@@ -1134,0 +1141,1 @@\n+# lint: path\n@@ -1185,0 +1193,1 @@\n+# lint: output-file-clash\n@@ -1338,0 +1347,1 @@\n+# lint: serial\n@@ -1340,0 +1350,1 @@\n+# lint: dangling-doc-comments\n@@ -1343,0 +1354,1 @@\n+# lint: path\n@@ -1346,0 +1358,1 @@\n+# lint: path\n@@ -1349,0 +1362,1 @@\n+# lint: missing-explicit-ctor\n@@ -1351,0 +1365,1 @@\n+# lint: strictfp\n@@ -1353,0 +1368,1 @@\n+# lint: finally\n@@ -1356,0 +1372,1 @@\n+# lint: module\n@@ -1359,0 +1376,1 @@\n+# lint: incubating\n@@ -1362,0 +1380,1 @@\n+# lint: deprecation\n@@ -1365,0 +1384,1 @@\n+# lint: removal\n@@ -1368,0 +1388,1 @@\n+# lint: preview\n@@ -1374,0 +1395,1 @@\n+# lint: preview\n@@ -1377,0 +1399,1 @@\n+# lint: restricted\n@@ -1380,0 +1403,1 @@\n+# lint: deprecation\n@@ -1383,0 +1407,1 @@\n+# lint: removal\n@@ -1391,0 +1416,1 @@\n+# lint: serial\n@@ -1393,0 +1419,1 @@\n+# lint: serial\n@@ -1395,0 +1422,1 @@\n+# lint: serial\n@@ -1408,0 +1436,1 @@\n+# lint: serial\n@@ -1410,0 +1439,1 @@\n+# lint: serial\n@@ -1413,0 +1443,1 @@\n+# lint: serial\n@@ -1416,0 +1447,1 @@\n+# lint: serial\n@@ -1419,0 +1451,1 @@\n+# lint: serial\n@@ -1422,0 +1455,1 @@\n+# lint: serial\n@@ -1425,0 +1459,1 @@\n+# lint: serial\n@@ -1428,0 +1463,1 @@\n+# lint: serial\n@@ -1431,0 +1467,1 @@\n+# lint: serial\n@@ -1434,0 +1471,1 @@\n+# lint: serial\n@@ -1437,0 +1475,1 @@\n+# lint: serial\n@@ -1440,0 +1479,1 @@\n+# lint: serial\n@@ -1442,0 +1482,1 @@\n+# lint: serial\n@@ -1445,0 +1486,1 @@\n+# lint: serial\n@@ -1448,0 +1490,1 @@\n+# lint: serial\n@@ -1451,0 +1494,1 @@\n+# lint: serial\n@@ -1453,0 +1497,1 @@\n+# lint: serial\n@@ -1456,0 +1501,1 @@\n+# lint: serial\n@@ -1459,0 +1505,1 @@\n+# lint: serial\n@@ -1462,0 +1509,1 @@\n+# lint: serial\n@@ -1464,0 +1512,1 @@\n+# lint: serial\n@@ -1466,0 +1515,1 @@\n+# lint: serial\n@@ -1468,0 +1518,1 @@\n+# lint: serial\n@@ -1471,0 +1522,1 @@\n+# lint: serial\n@@ -1473,0 +1525,1 @@\n+# lint: serial\n@@ -1475,0 +1528,1 @@\n+# lint: serial\n@@ -1478,0 +1532,1 @@\n+# lint: overloads\n@@ -1481,0 +1536,1 @@\n+# lint: overrides\n@@ -1484,0 +1540,1 @@\n+# lint: overrides\n@@ -1493,0 +1550,1 @@\n+# lint: path\n@@ -1495,0 +1553,1 @@\n+# lint: fallthrough\n@@ -1498,0 +1557,1 @@\n+# lint: cast\n@@ -1510,0 +1570,1 @@\n+# lint: static\n@@ -1513,0 +1574,1 @@\n+# lint: static\n@@ -1516,0 +1578,1 @@\n+# lint: options\n@@ -1519,0 +1582,1 @@\n+# lint: options\n@@ -1534,0 +1598,1 @@\n+# lint: options\n@@ -1537,0 +1602,1 @@\n+# lint: options\n@@ -1545,0 +1611,1 @@\n+# lint: options\n@@ -1548,0 +1615,1 @@\n+# lint: classfile\n@@ -1550,0 +1618,1 @@\n+# lint: requires-automatic\n@@ -1552,0 +1621,1 @@\n+# lint: requires-transitive-automatic\n@@ -1559,0 +1629,1 @@\n+# lint: processing\n@@ -1562,0 +1633,1 @@\n+# lint: processing\n@@ -1565,0 +1637,1 @@\n+# lint: processing\n@@ -1568,0 +1641,1 @@\n+# lint: processing\n@@ -1571,0 +1645,1 @@\n+# lint: processing\n@@ -1577,0 +1652,1 @@\n+# lint: processing\n@@ -1580,0 +1656,1 @@\n+# lint: processing\n@@ -1586,0 +1663,1 @@\n+# lint: processing\n@@ -1589,0 +1667,1 @@\n+# lint: processing\n@@ -1593,0 +1672,1 @@\n+# lint: processing\n@@ -1611,0 +1691,1 @@\n+# lint: try\n@@ -1614,0 +1695,1 @@\n+# lint: try\n@@ -1617,0 +1699,1 @@\n+# lint: try\n@@ -1619,0 +1702,1 @@\n+# lint: unchecked\n@@ -1622,0 +1706,1 @@\n+# lint: unchecked\n@@ -1625,0 +1710,1 @@\n+# lint: unchecked\n@@ -1627,0 +1713,1 @@\n+# lint: unchecked\n@@ -1630,0 +1717,1 @@\n+# lint: unchecked\n@@ -1633,0 +1721,1 @@\n+# lint: unchecked\n@@ -1636,0 +1725,1 @@\n+# lint: unchecked\n@@ -1639,0 +1729,1 @@\n+# lint: varargs\n@@ -1641,0 +1732,1 @@\n+# lint: dep-ann\n@@ -1644,0 +1736,1 @@\n+# lint: deprecation\n@@ -1647,0 +1740,1 @@\n+# lint: path\n@@ -1656,0 +1750,1 @@\n+# lint: path\n@@ -1659,0 +1754,1 @@\n+# lint: path\n@@ -1664,0 +1760,1 @@\n+# lint: divzero\n@@ -1666,0 +1763,1 @@\n+# lint: empty\n@@ -1669,0 +1767,1 @@\n+# lint: classfile\n@@ -1672,0 +1771,1 @@\n+# lint: classfile\n@@ -1684,0 +1784,1 @@\n+# lint: rawtypes\n@@ -1695,0 +1796,1 @@\n+# lint: varargs\n@@ -1698,0 +1800,1 @@\n+# lint: serial\n@@ -1701,0 +1804,1 @@\n+# lint: serial\n@@ -1813,0 +1917,1 @@\n+# lint: classfile\n@@ -1816,0 +1921,1 @@\n+# lint: classfile\n@@ -1907,0 +2013,1 @@\n+# lint: unchecked\n@@ -1916,0 +2023,1 @@\n+# lint: lossy-conversions\n@@ -2038,0 +2146,1 @@\n+# lint: auxiliaryclass\n@@ -2177,0 +2286,1 @@\n+# lint: unchecked\n@@ -2180,0 +2290,1 @@\n+# lint: unchecked\n@@ -2183,0 +2294,1 @@\n+# lint: overrides\n@@ -2248,0 +2360,1 @@\n+# lint: preview\n@@ -2251,0 +2364,1 @@\n+# lint: preview\n@@ -2254,0 +2368,1 @@\n+# lint: preview\n@@ -2518,0 +2633,1 @@\n+# lint: module\n@@ -2587,0 +2703,1 @@\n+# lint: opens\n@@ -2647,0 +2764,1 @@\n+# lint: options\n@@ -2657,0 +2775,1 @@\n+# lint: options\n@@ -2678,0 +2797,1 @@\n+# lint: exports\n@@ -2680,0 +2800,1 @@\n+# lint: exports\n@@ -2682,0 +2803,1 @@\n+# lint: exports\n@@ -2684,0 +2806,1 @@\n+# lint: exports\n@@ -2715,1 +2838,4 @@\n-compiler.misc.doesnt.extend.sealed=Unterklasse {0} muss verschlüsselte Klasse erweitern\n+compiler.misc.doesnt.extend.sealed=Klasse {0} muss verschlüsselte Klasse erweitern\n+\n+# 0: kind name, 1: type\n+compiler.misc.doesnt.implement.sealed={0} {1} muss verschlüsselte Klasse erweitern\n@@ -2915,0 +3041,1 @@\n+# lint: preview\n@@ -2917,0 +3044,1 @@\n+# lint: identity\n@@ -2919,0 +3047,3 @@\n+# lint: identity\n+compiler.warn.attempt.to.use.value.based.where.identity.expected=Verwendung einer wertbasierten Klasse mit einem Vorgang, der eine zuverlässige Identität erwartet\n+\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/resources\/compiler_de.properties","additions":136,"deletions":5,"binary":false,"changes":141,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 1999, 2024, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 1999, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -254,1 +254,1 @@\n-compiler.misc.not.an.intf.component=コンポーネント・タイプ{0}はインタフェースではありません\n+compiler.misc.not.an.intf.component=コンポーネント・タイプ{0}はインタフェースまたはjava.lang.Objectではありません\n@@ -392,1 +392,1 @@\n-compiler.err.implicit.class.should.not.have.package.declaration=暗黙的に宣言されたクラスにパッケージ宣言を含めることはできません\n+compiler.err.implicit.class.should.not.have.package.declaration=コンパクト・ソース・ファイルにパッケージ宣言を含めることはできません\n@@ -394,1 +394,1 @@\n-compiler.err.implicit.class.does.not.have.main.method=暗黙的に宣言されたクラスにvoid main()またはvoid main(String[] args)という形式のmainメソッドがありません\n+compiler.err.implicit.class.does.not.have.main.method=コンパクト・ソース・ファイルにvoid main()またはvoid main(String[] args)という形式のmainメソッドがありません\n@@ -504,0 +504,2 @@\n+compiler.err.illegal.char.literal.multiple.surrogates=文字リテラルに複数のUTF-16コード・ユニットが含まれています\n+\n@@ -514,0 +516,1 @@\n+# lint: this-escape\n@@ -516,0 +519,1 @@\n+# lint: this-escape\n@@ -530,0 +534,1 @@\n+# lint: text-blocks\n@@ -532,0 +537,1 @@\n+# lint: text-blocks\n@@ -1115,0 +1121,1 @@\n+# lint: path\n@@ -1134,0 +1141,1 @@\n+# lint: path\n@@ -1185,0 +1193,1 @@\n+# lint: output-file-clash\n@@ -1338,0 +1347,1 @@\n+# lint: serial\n@@ -1340,0 +1350,1 @@\n+# lint: dangling-doc-comments\n@@ -1343,0 +1354,1 @@\n+# lint: path\n@@ -1346,0 +1358,1 @@\n+# lint: path\n@@ -1349,0 +1362,1 @@\n+# lint: missing-explicit-ctor\n@@ -1351,0 +1365,1 @@\n+# lint: strictfp\n@@ -1353,0 +1368,1 @@\n+# lint: finally\n@@ -1356,0 +1372,1 @@\n+# lint: module\n@@ -1359,0 +1376,1 @@\n+# lint: incubating\n@@ -1362,0 +1380,1 @@\n+# lint: deprecation\n@@ -1365,0 +1384,1 @@\n+# lint: removal\n@@ -1368,0 +1388,1 @@\n+# lint: preview\n@@ -1374,0 +1395,1 @@\n+# lint: preview\n@@ -1377,0 +1399,1 @@\n+# lint: restricted\n@@ -1380,0 +1403,1 @@\n+# lint: deprecation\n@@ -1383,0 +1407,1 @@\n+# lint: removal\n@@ -1391,0 +1416,1 @@\n+# lint: serial\n@@ -1393,0 +1419,1 @@\n+# lint: serial\n@@ -1395,0 +1422,1 @@\n+# lint: serial\n@@ -1408,0 +1436,1 @@\n+# lint: serial\n@@ -1410,0 +1439,1 @@\n+# lint: serial\n@@ -1413,0 +1443,1 @@\n+# lint: serial\n@@ -1416,0 +1447,1 @@\n+# lint: serial\n@@ -1419,0 +1451,1 @@\n+# lint: serial\n@@ -1422,0 +1455,1 @@\n+# lint: serial\n@@ -1425,0 +1459,1 @@\n+# lint: serial\n@@ -1428,0 +1463,1 @@\n+# lint: serial\n@@ -1431,0 +1467,1 @@\n+# lint: serial\n@@ -1434,0 +1471,1 @@\n+# lint: serial\n@@ -1437,0 +1475,1 @@\n+# lint: serial\n@@ -1440,0 +1479,1 @@\n+# lint: serial\n@@ -1442,0 +1482,1 @@\n+# lint: serial\n@@ -1445,0 +1486,1 @@\n+# lint: serial\n@@ -1448,0 +1490,1 @@\n+# lint: serial\n@@ -1451,0 +1494,1 @@\n+# lint: serial\n@@ -1453,0 +1497,1 @@\n+# lint: serial\n@@ -1456,0 +1501,1 @@\n+# lint: serial\n@@ -1459,0 +1505,1 @@\n+# lint: serial\n@@ -1462,0 +1509,1 @@\n+# lint: serial\n@@ -1464,0 +1512,1 @@\n+# lint: serial\n@@ -1466,0 +1515,1 @@\n+# lint: serial\n@@ -1468,0 +1518,1 @@\n+# lint: serial\n@@ -1471,0 +1522,1 @@\n+# lint: serial\n@@ -1473,0 +1525,1 @@\n+# lint: serial\n@@ -1475,0 +1528,1 @@\n+# lint: serial\n@@ -1478,0 +1532,1 @@\n+# lint: overloads\n@@ -1481,0 +1536,1 @@\n+# lint: overrides\n@@ -1484,0 +1540,1 @@\n+# lint: overrides\n@@ -1493,0 +1550,1 @@\n+# lint: path\n@@ -1495,0 +1553,1 @@\n+# lint: fallthrough\n@@ -1498,0 +1557,1 @@\n+# lint: cast\n@@ -1510,0 +1570,1 @@\n+# lint: static\n@@ -1513,0 +1574,1 @@\n+# lint: static\n@@ -1516,0 +1578,1 @@\n+# lint: options\n@@ -1519,0 +1582,1 @@\n+# lint: options\n@@ -1534,0 +1598,1 @@\n+# lint: options\n@@ -1537,0 +1602,1 @@\n+# lint: options\n@@ -1545,0 +1611,1 @@\n+# lint: options\n@@ -1548,0 +1615,1 @@\n+# lint: classfile\n@@ -1550,0 +1618,1 @@\n+# lint: requires-automatic\n@@ -1552,0 +1621,1 @@\n+# lint: requires-transitive-automatic\n@@ -1559,0 +1629,1 @@\n+# lint: processing\n@@ -1562,0 +1633,1 @@\n+# lint: processing\n@@ -1565,0 +1637,1 @@\n+# lint: processing\n@@ -1568,0 +1641,1 @@\n+# lint: processing\n@@ -1571,0 +1645,1 @@\n+# lint: processing\n@@ -1577,0 +1652,1 @@\n+# lint: processing\n@@ -1580,0 +1656,1 @@\n+# lint: processing\n@@ -1586,0 +1663,1 @@\n+# lint: processing\n@@ -1589,0 +1667,1 @@\n+# lint: processing\n@@ -1593,0 +1672,1 @@\n+# lint: processing\n@@ -1611,0 +1691,1 @@\n+# lint: try\n@@ -1614,0 +1695,1 @@\n+# lint: try\n@@ -1617,0 +1699,1 @@\n+# lint: try\n@@ -1619,0 +1702,1 @@\n+# lint: unchecked\n@@ -1622,0 +1706,1 @@\n+# lint: unchecked\n@@ -1625,0 +1710,1 @@\n+# lint: unchecked\n@@ -1627,0 +1713,1 @@\n+# lint: unchecked\n@@ -1630,0 +1717,1 @@\n+# lint: unchecked\n@@ -1633,0 +1721,1 @@\n+# lint: unchecked\n@@ -1636,0 +1725,1 @@\n+# lint: unchecked\n@@ -1639,0 +1729,1 @@\n+# lint: varargs\n@@ -1641,0 +1732,1 @@\n+# lint: dep-ann\n@@ -1644,0 +1736,1 @@\n+# lint: deprecation\n@@ -1647,0 +1740,1 @@\n+# lint: path\n@@ -1656,0 +1750,1 @@\n+# lint: path\n@@ -1659,0 +1754,1 @@\n+# lint: path\n@@ -1664,0 +1760,1 @@\n+# lint: divzero\n@@ -1666,0 +1763,1 @@\n+# lint: empty\n@@ -1669,0 +1767,1 @@\n+# lint: classfile\n@@ -1672,0 +1771,1 @@\n+# lint: classfile\n@@ -1684,0 +1784,1 @@\n+# lint: rawtypes\n@@ -1695,0 +1796,1 @@\n+# lint: varargs\n@@ -1698,0 +1800,1 @@\n+# lint: serial\n@@ -1701,0 +1804,1 @@\n+# lint: serial\n@@ -1813,0 +1917,1 @@\n+# lint: classfile\n@@ -1816,0 +1921,1 @@\n+# lint: classfile\n@@ -1907,0 +2013,1 @@\n+# lint: unchecked\n@@ -1916,0 +2023,1 @@\n+# lint: lossy-conversions\n@@ -2038,0 +2146,1 @@\n+# lint: auxiliaryclass\n@@ -2177,0 +2286,1 @@\n+# lint: unchecked\n@@ -2180,0 +2290,1 @@\n+# lint: unchecked\n@@ -2183,0 +2294,1 @@\n+# lint: overrides\n@@ -2248,0 +2360,1 @@\n+# lint: preview\n@@ -2251,0 +2364,1 @@\n+# lint: preview\n@@ -2254,0 +2368,1 @@\n+# lint: preview\n@@ -2518,0 +2633,1 @@\n+# lint: module\n@@ -2587,0 +2703,1 @@\n+# lint: opens\n@@ -2647,0 +2764,1 @@\n+# lint: options\n@@ -2657,0 +2775,1 @@\n+# lint: options\n@@ -2678,0 +2797,1 @@\n+# lint: exports\n@@ -2680,0 +2800,1 @@\n+# lint: exports\n@@ -2682,0 +2803,1 @@\n+# lint: exports\n@@ -2684,0 +2806,1 @@\n+# lint: exports\n@@ -2715,1 +2838,4 @@\n-compiler.misc.doesnt.extend.sealed=サブクラス{0}はシール・クラスを拡張する必要があります\n+compiler.misc.doesnt.extend.sealed=クラス{0}はシール・クラスを拡張する必要があります\n+\n+# 0: kind name, 1: type\n+compiler.misc.doesnt.implement.sealed={0} {1}はシール・インタフェースを拡張する必要があります\n@@ -2915,0 +3041,1 @@\n+# lint: preview\n@@ -2917,0 +3044,1 @@\n+# lint: identity\n@@ -2919,0 +3047,3 @@\n+# lint: identity\n+compiler.warn.attempt.to.use.value.based.where.identity.expected=信頼できるアイデンティティを必要とする操作での値ベース・クラスの使用\n+\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/resources\/compiler_ja.properties","additions":136,"deletions":5,"binary":false,"changes":141,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 1999, 2024, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 1999, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -254,1 +254,1 @@\n-compiler.misc.not.an.intf.component=组件类型{0}不是接口\n+compiler.misc.not.an.intf.component=组件类型 {0} 不是接口或 java.lang.Object\n@@ -392,1 +392,1 @@\n-compiler.err.implicit.class.should.not.have.package.declaration=隐式声明的类不应有程序包声明\n+compiler.err.implicit.class.should.not.have.package.declaration=压缩源文件不应有程序包声明\n@@ -394,1 +394,1 @@\n-compiler.err.implicit.class.does.not.have.main.method=隐式声明的类没有 void main() 或 void main(String[] args) 形式的 main 方法\n+compiler.err.implicit.class.does.not.have.main.method=压缩源文件没有 void main() 或 void main(String[] args) 形式的 main 方法\n@@ -504,0 +504,2 @@\n+compiler.err.illegal.char.literal.multiple.surrogates=字符文字包含多个 UTF-16 代码单元\n+\n@@ -514,0 +516,1 @@\n+# lint: this-escape\n@@ -516,0 +519,1 @@\n+# lint: this-escape\n@@ -530,0 +534,1 @@\n+# lint: text-blocks\n@@ -532,0 +537,1 @@\n+# lint: text-blocks\n@@ -1115,0 +1121,1 @@\n+# lint: path\n@@ -1134,0 +1141,1 @@\n+# lint: path\n@@ -1185,0 +1193,1 @@\n+# lint: output-file-clash\n@@ -1338,0 +1347,1 @@\n+# lint: serial\n@@ -1340,0 +1350,1 @@\n+# lint: dangling-doc-comments\n@@ -1343,0 +1354,1 @@\n+# lint: path\n@@ -1346,0 +1358,1 @@\n+# lint: path\n@@ -1349,0 +1362,1 @@\n+# lint: missing-explicit-ctor\n@@ -1351,0 +1365,1 @@\n+# lint: strictfp\n@@ -1353,0 +1368,1 @@\n+# lint: finally\n@@ -1356,0 +1372,1 @@\n+# lint: module\n@@ -1359,0 +1376,1 @@\n+# lint: incubating\n@@ -1362,0 +1380,1 @@\n+# lint: deprecation\n@@ -1365,0 +1384,1 @@\n+# lint: removal\n@@ -1368,0 +1388,1 @@\n+# lint: preview\n@@ -1374,0 +1395,1 @@\n+# lint: preview\n@@ -1377,0 +1399,1 @@\n+# lint: restricted\n@@ -1380,0 +1403,1 @@\n+# lint: deprecation\n@@ -1383,0 +1407,1 @@\n+# lint: removal\n@@ -1391,0 +1416,1 @@\n+# lint: serial\n@@ -1393,0 +1419,1 @@\n+# lint: serial\n@@ -1395,0 +1422,1 @@\n+# lint: serial\n@@ -1408,0 +1436,1 @@\n+# lint: serial\n@@ -1410,0 +1439,1 @@\n+# lint: serial\n@@ -1413,0 +1443,1 @@\n+# lint: serial\n@@ -1416,0 +1447,1 @@\n+# lint: serial\n@@ -1419,0 +1451,1 @@\n+# lint: serial\n@@ -1422,0 +1455,1 @@\n+# lint: serial\n@@ -1425,0 +1459,1 @@\n+# lint: serial\n@@ -1428,0 +1463,1 @@\n+# lint: serial\n@@ -1431,0 +1467,1 @@\n+# lint: serial\n@@ -1434,0 +1471,1 @@\n+# lint: serial\n@@ -1437,0 +1475,1 @@\n+# lint: serial\n@@ -1440,0 +1479,1 @@\n+# lint: serial\n@@ -1442,0 +1482,1 @@\n+# lint: serial\n@@ -1445,0 +1486,1 @@\n+# lint: serial\n@@ -1448,0 +1490,1 @@\n+# lint: serial\n@@ -1451,0 +1494,1 @@\n+# lint: serial\n@@ -1453,0 +1497,1 @@\n+# lint: serial\n@@ -1456,0 +1501,1 @@\n+# lint: serial\n@@ -1459,0 +1505,1 @@\n+# lint: serial\n@@ -1462,0 +1509,1 @@\n+# lint: serial\n@@ -1464,0 +1512,1 @@\n+# lint: serial\n@@ -1466,0 +1515,1 @@\n+# lint: serial\n@@ -1468,0 +1518,1 @@\n+# lint: serial\n@@ -1471,0 +1522,1 @@\n+# lint: serial\n@@ -1473,0 +1525,1 @@\n+# lint: serial\n@@ -1475,0 +1528,1 @@\n+# lint: serial\n@@ -1478,0 +1532,1 @@\n+# lint: overloads\n@@ -1481,0 +1536,1 @@\n+# lint: overrides\n@@ -1484,0 +1540,1 @@\n+# lint: overrides\n@@ -1493,0 +1550,1 @@\n+# lint: path\n@@ -1495,0 +1553,1 @@\n+# lint: fallthrough\n@@ -1498,0 +1557,1 @@\n+# lint: cast\n@@ -1510,0 +1570,1 @@\n+# lint: static\n@@ -1513,0 +1574,1 @@\n+# lint: static\n@@ -1516,0 +1578,1 @@\n+# lint: options\n@@ -1519,0 +1582,1 @@\n+# lint: options\n@@ -1534,0 +1598,1 @@\n+# lint: options\n@@ -1537,0 +1602,1 @@\n+# lint: options\n@@ -1545,0 +1611,1 @@\n+# lint: options\n@@ -1548,0 +1615,1 @@\n+# lint: classfile\n@@ -1550,0 +1618,1 @@\n+# lint: requires-automatic\n@@ -1552,0 +1621,1 @@\n+# lint: requires-transitive-automatic\n@@ -1559,0 +1629,1 @@\n+# lint: processing\n@@ -1562,0 +1633,1 @@\n+# lint: processing\n@@ -1565,0 +1637,1 @@\n+# lint: processing\n@@ -1568,0 +1641,1 @@\n+# lint: processing\n@@ -1571,0 +1645,1 @@\n+# lint: processing\n@@ -1577,0 +1652,1 @@\n+# lint: processing\n@@ -1580,0 +1656,1 @@\n+# lint: processing\n@@ -1586,0 +1663,1 @@\n+# lint: processing\n@@ -1589,0 +1667,1 @@\n+# lint: processing\n@@ -1593,0 +1672,1 @@\n+# lint: processing\n@@ -1611,0 +1691,1 @@\n+# lint: try\n@@ -1614,0 +1695,1 @@\n+# lint: try\n@@ -1617,0 +1699,1 @@\n+# lint: try\n@@ -1619,0 +1702,1 @@\n+# lint: unchecked\n@@ -1622,0 +1706,1 @@\n+# lint: unchecked\n@@ -1625,0 +1710,1 @@\n+# lint: unchecked\n@@ -1627,0 +1713,1 @@\n+# lint: unchecked\n@@ -1630,0 +1717,1 @@\n+# lint: unchecked\n@@ -1633,0 +1721,1 @@\n+# lint: unchecked\n@@ -1636,0 +1725,1 @@\n+# lint: unchecked\n@@ -1639,0 +1729,1 @@\n+# lint: varargs\n@@ -1641,0 +1732,1 @@\n+# lint: dep-ann\n@@ -1644,0 +1736,1 @@\n+# lint: deprecation\n@@ -1647,0 +1740,1 @@\n+# lint: path\n@@ -1656,0 +1750,1 @@\n+# lint: path\n@@ -1659,0 +1754,1 @@\n+# lint: path\n@@ -1664,0 +1760,1 @@\n+# lint: divzero\n@@ -1666,0 +1763,1 @@\n+# lint: empty\n@@ -1669,0 +1767,1 @@\n+# lint: classfile\n@@ -1672,0 +1771,1 @@\n+# lint: classfile\n@@ -1684,0 +1784,1 @@\n+# lint: rawtypes\n@@ -1695,0 +1796,1 @@\n+# lint: varargs\n@@ -1698,0 +1800,1 @@\n+# lint: serial\n@@ -1701,0 +1804,1 @@\n+# lint: serial\n@@ -1813,0 +1917,1 @@\n+# lint: classfile\n@@ -1816,0 +1921,1 @@\n+# lint: classfile\n@@ -1907,0 +2013,1 @@\n+# lint: unchecked\n@@ -1916,0 +2023,1 @@\n+# lint: lossy-conversions\n@@ -2038,0 +2146,1 @@\n+# lint: auxiliaryclass\n@@ -2177,0 +2286,1 @@\n+# lint: unchecked\n@@ -2180,0 +2290,1 @@\n+# lint: unchecked\n@@ -2183,0 +2294,1 @@\n+# lint: overrides\n@@ -2248,0 +2360,1 @@\n+# lint: preview\n@@ -2251,0 +2364,1 @@\n+# lint: preview\n@@ -2254,0 +2368,1 @@\n+# lint: preview\n@@ -2518,0 +2633,1 @@\n+# lint: module\n@@ -2587,0 +2703,1 @@\n+# lint: opens\n@@ -2647,0 +2764,1 @@\n+# lint: options\n@@ -2657,0 +2775,1 @@\n+# lint: options\n@@ -2678,0 +2797,1 @@\n+# lint: exports\n@@ -2680,0 +2800,1 @@\n+# lint: exports\n@@ -2682,0 +2803,1 @@\n+# lint: exports\n@@ -2684,0 +2806,1 @@\n+# lint: exports\n@@ -2715,1 +2838,4 @@\n-compiler.misc.doesnt.extend.sealed=子类 {0} 必须扩展密封类\n+compiler.misc.doesnt.extend.sealed=类 {0} 必须扩展密封类\n+\n+# 0: kind name, 1: type\n+compiler.misc.doesnt.implement.sealed={0} {1} 必须扩展密封接口\n@@ -2915,0 +3041,1 @@\n+# lint: preview\n@@ -2917,0 +3044,1 @@\n+# lint: identity\n@@ -2919,0 +3047,3 @@\n+# lint: identity\n+compiler.warn.attempt.to.use.value.based.where.identity.expected=使用基于值的类，其操作需要可靠的身份\n+\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/resources\/compiler_zh_CN.properties","additions":136,"deletions":5,"binary":false,"changes":141,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 1999, 2024, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 1999, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -35,1 +35,1 @@\n-javac.opt.nowarn=Generiert keine Warnungen\n+javac.opt.nowarn=Nur obligatorische Warnungen generieren\n@@ -100,3 +100,3 @@\n-javac.opt.Xlint=Aktiviert die empfohlenen Warnungen\n-javac.opt.Xlint.all=Alle Warnungen aktivieren\n-javac.opt.Xlint.none=Alle Warnungen deaktivieren\n+javac.opt.Xlint=Empfohlene Warnungskategorien aktivieren\n+javac.opt.Xlint.all=Alle Warnungskategorien aktivieren\n+javac.opt.Xlint.none=Alle Warnungskategorien deaktivieren\n@@ -105,1 +105,1 @@\n-javac.opt.Xlint.custom=Warnungen, die aktiviert oder deaktiviert werden sollen, durch Komma getrennt.\\nStellen Sie einem Schlüssel \"-\" voran, um die angegebene Warnung zu deaktivieren.\\nVerwenden Sie \"--help-lint\", um die unterstützten Schlüssel anzuzeigen.\n+javac.opt.Xlint.custom=Durch Komma getrennte Warnungskategorien, die aktiviert oder deaktiviert werden sollen.\\nStellen Sie einem Schlüssel \"-\" voran, um die angegebene Warnung zu deaktivieren.\\nVerwenden Sie \"--help-lint\", um die unterstützten Schlüssel anzuzeigen.\n@@ -162,1 +162,1 @@\n-javac.opt.Xlint.desc.strictfp=Warnt vor unnötiger Verwendung des strictfp-Modifizierers.\n+javac.opt.Xlint.desc.strictfp=Warnt vor unnötiger Verwendung des strictfp-Modifikators.\n@@ -178,1 +178,7 @@\n-javac.opt.Xlint.desc.synchronization=Warnt vor Synchronisierungsversuchen mit Instanzen wertbasierter Klassen.\n+javac.opt.Xlint.desc.synchronization=\\\n+    Warnt vor Synchronisierungsversuchen mit Instanzen wertbasierter Klassen.\\n\\\n+\\                         Dieser Schlüssel ist ein veralteter Alias für die Kategorie ''identity'', die dieselben Verwendungen und\\n\\\n+\\                         Effekte hat. Benutzern wird empfohlen, die Kategorie ''identity'' für alle zukünftigen\\n\\\n+\\                         und vorhandenen Verwendungen von ''synchronization'' zu verwenden.\n+\n+javac.opt.Xlint.desc.identity=Warnt vor Verwendungen wertbasierter Klassen, wenn eine Identitätsklasse erwartet wird.\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/resources\/javac_de.properties","additions":14,"deletions":8,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 1999, 2024, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 1999, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -35,1 +35,1 @@\n-javac.opt.nowarn=警告を発生させない\n+javac.opt.nowarn=必須の警告のみを生成します\n@@ -100,3 +100,3 @@\n-javac.opt.Xlint=推奨の警告を有効にする\n-javac.opt.Xlint.all=すべての警告を有効にします\n-javac.opt.Xlint.none=すべての警告を無効にします\n+javac.opt.Xlint=推奨の警告カテゴリを有効にします\n+javac.opt.Xlint.all=すべての警告カテゴリを有効にします\n+javac.opt.Xlint.none=すべての警告カテゴリを無効にします\n@@ -105,1 +105,1 @@\n-javac.opt.Xlint.custom=有効または無効にする警告(カンマ区切り)。\\n指定した警告を無効にするには、キーの前に''-''を指定します。\\nサポートされているキーを表示するには--help-lintを使用します。\n+javac.opt.Xlint.custom=有効または無効にする警告カテゴリ(カンマ区切り)。\\n指定した警告を無効にするには、キーの前に''-''を指定します。\\nサポートされているキーを表示するには--help-lintを使用します。\n@@ -178,1 +178,3 @@\n-javac.opt.Xlint.desc.synchronization=値ベース・クラスのインスタンスでの同期の試行について警告します。\n+javac.opt.Xlint.desc.synchronization=値ベース・クラスのインスタンスでの同期の試行について警告します。\\n                         このキーは、''identity''の非推奨のエイリアスであり、同じ使用方法と効果を\\n                         持ちます。ユーザーには、今後および既存の''synchronization''の使用に対して''identity''カテゴリを\\n                         使用することをお薦めします。\n+\n+javac.opt.Xlint.desc.identity=アイデンティティ・クラスが必要な場所での値ベース・クラスの使用について警告します。\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/resources\/javac_ja.properties","additions":9,"deletions":7,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 1999, 2024, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 1999, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -35,1 +35,1 @@\n-javac.opt.nowarn=不生成任何警告\n+javac.opt.nowarn=仅生成必需警告\n@@ -100,3 +100,3 @@\n-javac.opt.Xlint=启用建议的警告\n-javac.opt.Xlint.all=启用所有警告\n-javac.opt.Xlint.none=禁用所有警告\n+javac.opt.Xlint=启用建议的警告类别\n+javac.opt.Xlint.all=启用所有警告类别\n+javac.opt.Xlint.none=禁用所有警告类别\n@@ -105,1 +105,1 @@\n-javac.opt.Xlint.custom=要启用或禁用的警告（以逗号分隔）。\\n在关键字前面加上 ''-'' 可禁用指定的警告。\\n使用 --help-lint 可查看受支持的关键字。\n+javac.opt.Xlint.custom=要启用或禁用的警告类别（以逗号分隔）。\\n在关键字前面加上 ''-'' 可禁用指定的警告。\\n使用 --help-lint 可查看受支持的关键字。\n@@ -178,1 +178,3 @@\n-javac.opt.Xlint.desc.synchronization=有关尝试在基于值的类的实例上同步的警告。\n+javac.opt.Xlint.desc.synchronization=有关尝试在基于值的类的实例上同步的警告。\\n                         此密钥是 ''identity'' 的已过时别名，具有相同的用法和\\n                         效果。建议用户在 ''synchronization'' 的所有未来和现有\\n                         用法中使用 ''identity'' 类别。\n+\n+javac.opt.Xlint.desc.identity=有关在需要身份类的情况下使用基于值的类的警告。\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/resources\/javac_zh_CN.properties","additions":9,"deletions":7,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2018, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -103,1 +103,4 @@\n-launcher.err.cant.find.main.method=Methode \"main(String[])\" nicht gefunden in Klasse: {0}\n+launcher.err.cant.find.main.method=Konnte keine main(String[])- oder main()-Methode in der Klasse: {0} finden.\n+\n+# 0: string\n+launcher.err.cant.instantiate=Abstrakte Klasse: {0} kann nicht instanziiert werden\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/resources\/launcher_de.properties","additions":5,"deletions":2,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2018, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -103,1 +103,4 @@\n-launcher.err.cant.find.main.method=クラスにmain(String[])メソッドが見つかりません: {0}\n+launcher.err.cant.find.main.method=クラスにmain(String[])またはmain()メソッドが見つかりません: {0}\n+\n+# 0: string\n+launcher.err.cant.instantiate=抽象クラス: {0}はインスタンス化できません\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/resources\/launcher_ja.properties","additions":5,"deletions":2,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2018, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -103,1 +103,4 @@\n-launcher.err.cant.find.main.method=在类 {0} 中找不到 main(String[]) 方法\n+launcher.err.cant.find.main.method=在类 {0} 中找不到 main(String[]) 或 main() 方法\n+\n+# 0: string\n+launcher.err.cant.instantiate=无法实例化抽象类 {0}\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/resources\/launcher_zh_CN.properties","additions":5,"deletions":2,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -175,1 +175,2 @@\n-     * Check whether the given lint category is explicitly enabled or disabled.\n+     * Determine if a specific {@link LintCategory} is enabled via a custom\n+     * option flag of the form {@code -Xlint}, {@code -Xlint:all}, or {@code -Xlint:key}.\n@@ -178,1 +179,1 @@\n-     * If the category is neither enabled nor disabled, return the given default value.\n+     * Note: It's possible the category was also disabled; this method does not check that.\n@@ -180,1 +181,0 @@\n-     * @param option the plain (non-custom) option\n@@ -182,2 +182,1 @@\n-     * @param defaultValue presumed default value\n-     * @return true if {@code lc} would be included\n+     * @return true if {@code lc} has been enabled\n@@ -185,15 +184,4 @@\n-    public boolean isSet(Option option, LintCategory lc, boolean defaultValue) {\n-        Option customOption = option.getCustom();\n-        if (lc.optionList.stream().anyMatch(alias -> isSet(customOption, alias))) {\n-            return true;\n-        }\n-        if (lc.optionList.stream().anyMatch(alias -> isSet(customOption, \"-\" + alias))) {\n-            return false;\n-        }\n-        if (isSet(option) || isSet(customOption, Option.LINT_CUSTOM_ALL)) {\n-            return true;\n-        }\n-        if (isSet(customOption, Option.LINT_CUSTOM_NONE)) {\n-            return false;\n-        }\n-        return defaultValue;\n+    public boolean isLintEnabled(LintCategory lc) {\n+        return isLintExplicitlyEnabled(lc) ||\n+            isSet(Option.XLINT_CUSTOM) ||\n+            isSet(Option.XLINT_CUSTOM, Option.LINT_CUSTOM_ALL);\n@@ -203,2 +191,22 @@\n-     * Determine if a specific {@link LintCategory} was explicitly enabled via a custom option flag\n-     * of the form {@code -Flag:all} or {@code -Flag:key}.\n+     * Determine if a specific {@link LintCategory} is disabled via a custom\n+     * option flag of the form {@code -Xlint:none} or {@code -Xlint:-key}.\n+     *\n+     * <p>\n+     * Note: It's possible the category was also enabled; this method does not check that.\n+     *\n+     * @param lc the {@link LintCategory} in question\n+     * @return true if {@code lc} has been disabled\n+     *\/\n+    public boolean isLintDisabled(LintCategory lc) {\n+        return isLintExplicitlyDisabled(lc) || isSet(Option.XLINT_CUSTOM, Option.LINT_CUSTOM_NONE);\n+    }\n+\n+    \/**\n+     * Determine if a specific {@link LintCategory} is explicitly enabled via a custom\n+     * option flag of the form {@code -Xlint:key}.\n+     *\n+     * <p>\n+     * Note: This does not check for option flags of the form {@code -Xlint} or {@code -Xlint:all}.\n+     *\n+     * <p>\n+     * Note: It's possible the category was also disabled; this method does not check that.\n@@ -206,1 +214,0 @@\n-     * @param option the option\n@@ -210,2 +217,2 @@\n-    public boolean isExplicitlyEnabled(Option option, LintCategory lc) {\n-        return isSet(option, lc, false);\n+    public boolean isLintExplicitlyEnabled(LintCategory lc) {\n+        return lc.optionList.stream().anyMatch(alias -> isSet(Option.XLINT_CUSTOM, alias));\n@@ -215,2 +222,8 @@\n-     * Determine if a specific {@link LintCategory} was explicitly disabled via a custom option flag\n-     * of the form {@code -Flag:none} or {@code -Flag:-key}.\n+     * Determine if a specific {@link LintCategory} is explicitly disabled via a custom\n+     * option flag of the form {@code -Xlint:-key}.\n+     *\n+     * <p>\n+     * Note: This does not check for an option flag of the form {@code -Xlint:none}.\n+     *\n+     * <p>\n+     * Note: It's possible the category was also enabled; this method does not check that.\n@@ -218,1 +231,0 @@\n-     * @param option the option\n@@ -222,2 +234,2 @@\n-    public boolean isExplicitlyDisabled(Option option, LintCategory lc) {\n-        return !isSet(option, lc, true);\n+    public boolean isLintExplicitlyDisabled(LintCategory lc) {\n+        return lc.optionList.stream().anyMatch(alias -> isSet(Option.XLINT_CUSTOM, \"-\" + alias));\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/util\/Options.java","additions":42,"deletions":30,"binary":false,"changes":72,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2010, 2019, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2010, 2024, Oracle and\/or its affiliates. All rights reserved.\n","filename":"src\/jdk.compiler\/share\/classes\/sun\/tools\/serialver\/resources\/serialver_de.properties","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2010, 2019, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2010, 2024, Oracle and\/or its affiliates. All rights reserved.\n","filename":"src\/jdk.compiler\/share\/classes\/sun\/tools\/serialver\/resources\/serialver_ja.properties","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2010, 2019, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2010, 2024, Oracle and\/or its affiliates. All rights reserved.\n","filename":"src\/jdk.compiler\/share\/classes\/sun\/tools\/serialver\/resources\/serialver_zh_CN.properties","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -54,0 +54,4 @@\n+class name java\/io\/Reader\n+method name readAllLines descriptor ()Ljava\/util\/List; thrownTypes java\/io\/IOException flags 1 signature ()Ljava\/util\/List<Ljava\/lang\/String;>;\n+method name readAllAsString descriptor ()Ljava\/lang\/String; thrownTypes java\/io\/IOException flags 1\n+\n@@ -121,0 +125,1 @@\n+-method name cbrt descriptor (D)D\n@@ -132,0 +137,1 @@\n+method name cbrt descriptor (D)D flags 9 runtimeAnnotations @Ljdk\/internal\/vm\/annotation\/IntrinsicCandidate;\n@@ -148,0 +154,14 @@\n+class name java\/lang\/ScopedValue\n+header extends java\/lang\/Object nestMembers java\/lang\/ScopedValue$CallableOp,java\/lang\/ScopedValue$Carrier flags 31 signature <T:Ljava\/lang\/Object;>Ljava\/lang\/Object;\n+innerclass innerClass java\/lang\/ScopedValue$Carrier outerClass java\/lang\/ScopedValue innerClassName Carrier flags 19\n+innerclass innerClass java\/lang\/ScopedValue$CallableOp outerClass java\/lang\/ScopedValue innerClassName CallableOp flags 609\n+\n+class name java\/lang\/ScopedValue$CallableOp\n+header extends java\/lang\/Object nestHost java\/lang\/ScopedValue flags 601 signature <T:Ljava\/lang\/Object;X:Ljava\/lang\/Throwable;>Ljava\/lang\/Object; runtimeAnnotations @Ljava\/lang\/FunctionalInterface;\n+innerclass innerClass java\/lang\/ScopedValue$CallableOp outerClass java\/lang\/ScopedValue innerClassName CallableOp flags 609\n+\n+class name java\/lang\/ScopedValue$Carrier\n+header extends java\/lang\/Object nestHost java\/lang\/ScopedValue flags 31\n+innerclass innerClass java\/lang\/ScopedValue$Carrier outerClass java\/lang\/ScopedValue innerClassName Carrier flags 19\n+innerclass innerClass java\/lang\/ScopedValue$CallableOp outerClass java\/lang\/ScopedValue innerClassName CallableOp flags 609\n+\n@@ -429,0 +449,6 @@\n+class name java\/security\/AsymmetricKey\n+header extends java\/lang\/Object implements java\/security\/Key,java\/security\/DEREncodable flags 601\n+\n+class name java\/security\/DEREncodable\n+header extends java\/lang\/Object sealed true permittedSubclasses java\/security\/AsymmetricKey,java\/security\/KeyPair,java\/security\/spec\/PKCS8EncodedKeySpec,java\/security\/spec\/X509EncodedKeySpec,javax\/crypto\/EncryptedPrivateKeyInfo,java\/security\/cert\/X509Certificate,java\/security\/cert\/X509CRL,java\/security\/PEMRecord flags 601 classAnnotations @Ljdk\/internal\/javac\/PreviewFeature;(feature=eLjdk\/internal\/javac\/PreviewFeature$Feature;PEM_API;)\n+\n@@ -436,0 +462,39 @@\n+class name java\/security\/KeyPair\n+header extends java\/lang\/Object implements java\/io\/Serializable,java\/security\/DEREncodable flags 31\n+\n+class name java\/security\/PEMDecoder\n+header extends java\/lang\/Object flags 31 classAnnotations @Ljdk\/internal\/javac\/PreviewFeature;(feature=eLjdk\/internal\/javac\/PreviewFeature$Feature;PEM_API;)\n+innerclass innerClass java\/util\/Base64$Decoder outerClass java\/util\/Base64 innerClassName Decoder flags 9\n+method name of descriptor ()Ljava\/security\/PEMDecoder; flags 9\n+method name decode descriptor (Ljava\/lang\/String;)Ljava\/security\/DEREncodable; flags 1\n+method name decode descriptor (Ljava\/io\/InputStream;)Ljava\/security\/DEREncodable; thrownTypes java\/io\/IOException flags 1\n+method name decode descriptor (Ljava\/lang\/String;Ljava\/lang\/Class;)Ljava\/security\/DEREncodable; flags 1 signature <S::Ljava\/security\/DEREncodable;>(Ljava\/lang\/String;Ljava\/lang\/Class<TS;>;)TS;\n+method name decode descriptor (Ljava\/io\/InputStream;Ljava\/lang\/Class;)Ljava\/security\/DEREncodable; thrownTypes java\/io\/IOException flags 1 signature <S::Ljava\/security\/DEREncodable;>(Ljava\/io\/InputStream;Ljava\/lang\/Class<TS;>;)TS;\n+method name withFactory descriptor (Ljava\/security\/Provider;)Ljava\/security\/PEMDecoder; flags 1\n+method name withDecryption descriptor ([C)Ljava\/security\/PEMDecoder; flags 1\n+\n+class name java\/security\/PEMEncoder\n+header extends java\/lang\/Object flags 31 classAnnotations @Ljdk\/internal\/javac\/PreviewFeature;(feature=eLjdk\/internal\/javac\/PreviewFeature$Feature;PEM_API;)\n+innerclass innerClass java\/lang\/invoke\/MethodHandles$Lookup outerClass java\/lang\/invoke\/MethodHandles innerClassName Lookup flags 19\n+method name of descriptor ()Ljava\/security\/PEMEncoder; flags 9\n+method name encodeToString descriptor (Ljava\/security\/DEREncodable;)Ljava\/lang\/String; flags 1\n+method name encode descriptor (Ljava\/security\/DEREncodable;)[B flags 1\n+method name withEncryption descriptor ([C)Ljava\/security\/PEMEncoder; flags 1\n+\n+class name java\/security\/PEMRecord\n+header extends java\/lang\/Record implements java\/security\/DEREncodable record true flags 31 classAnnotations @Ljdk\/internal\/javac\/PreviewFeature;(feature=eLjdk\/internal\/javac\/PreviewFeature$Feature;PEM_API;)\n+recordcomponent name type descriptor Ljava\/lang\/String;\n+recordcomponent name pem descriptor Ljava\/lang\/String;\n+recordcomponent name leadingData descriptor [B\n+innerclass innerClass java\/util\/Base64$Decoder outerClass java\/util\/Base64 innerClassName Decoder flags 9\n+innerclass innerClass java\/lang\/invoke\/MethodHandles$Lookup outerClass java\/lang\/invoke\/MethodHandles innerClassName Lookup flags 19\n+method name <init> descriptor (Ljava\/lang\/String;Ljava\/lang\/String;[B)V flags 1 methodParameters 0:type,0:pem,0:leadingData\n+method name <init> descriptor (Ljava\/lang\/String;Ljava\/lang\/String;)V flags 1\n+method name getEncoded descriptor ()[B flags 1\n+method name toString descriptor ()Ljava\/lang\/String; flags 1\n+method name hashCode descriptor ()I flags 11\n+method name equals descriptor (Ljava\/lang\/Object;)Z flags 11\n+method name type descriptor ()Ljava\/lang\/String; flags 1\n+method name pem descriptor ()Ljava\/lang\/String; flags 1\n+method name leadingData descriptor ()[B flags 1\n+\n@@ -442,0 +507,12 @@\n+class name java\/security\/cert\/X509CRL\n+header extends java\/security\/cert\/CRL implements java\/security\/cert\/X509Extension,java\/security\/DEREncodable flags 421\n+\n+class name java\/security\/cert\/X509Certificate\n+header extends java\/security\/cert\/Certificate implements java\/security\/cert\/X509Extension,java\/security\/DEREncodable flags 421\n+\n+class name java\/security\/spec\/PKCS8EncodedKeySpec\n+header extends java\/security\/spec\/EncodedKeySpec implements java\/security\/DEREncodable flags 21\n+\n+class name java\/security\/spec\/X509EncodedKeySpec\n+header extends java\/security\/spec\/EncodedKeySpec implements java\/security\/DEREncodable flags 21\n+\n@@ -644,0 +721,8 @@\n+class name javax\/crypto\/EncryptedPrivateKeyInfo\n+header extends java\/lang\/Object implements java\/security\/DEREncodable flags 21\n+method name encryptKey descriptor (Ljava\/security\/PrivateKey;[CLjava\/lang\/String;Ljava\/security\/spec\/AlgorithmParameterSpec;Ljava\/security\/Provider;)Ljavax\/crypto\/EncryptedPrivateKeyInfo; flags 9 classAnnotations @Ljdk\/internal\/javac\/PreviewFeature;(feature=eLjdk\/internal\/javac\/PreviewFeature$Feature;PEM_API;)\n+method name encryptKey descriptor (Ljava\/security\/PrivateKey;[C)Ljavax\/crypto\/EncryptedPrivateKeyInfo; flags 9 classAnnotations @Ljdk\/internal\/javac\/PreviewFeature;(feature=eLjdk\/internal\/javac\/PreviewFeature$Feature;PEM_API;)\n+method name encryptKey descriptor (Ljava\/security\/PrivateKey;Ljava\/security\/Key;Ljava\/lang\/String;Ljava\/security\/spec\/AlgorithmParameterSpec;Ljava\/security\/Provider;Ljava\/security\/SecureRandom;)Ljavax\/crypto\/EncryptedPrivateKeyInfo; flags 9 classAnnotations @Ljdk\/internal\/javac\/PreviewFeature;(feature=eLjdk\/internal\/javac\/PreviewFeature$Feature;PEM_API;)\n+method name getKey descriptor ([C)Ljava\/security\/PrivateKey; thrownTypes java\/security\/GeneralSecurityException flags 1 classAnnotations @Ljdk\/internal\/javac\/PreviewFeature;(feature=eLjdk\/internal\/javac\/PreviewFeature$Feature;PEM_API;)\n+method name getKey descriptor (Ljava\/security\/Key;Ljava\/security\/Provider;)Ljava\/security\/PrivateKey; thrownTypes java\/security\/GeneralSecurityException flags 1 classAnnotations @Ljdk\/internal\/javac\/PreviewFeature;(feature=eLjdk\/internal\/javac\/PreviewFeature$Feature;PEM_API;)\n+\n@@ -681,0 +766,4 @@\n+class name javax\/net\/ssl\/ExtendedSSLSession\n+method name exportKeyingMaterialKey descriptor (Ljava\/lang\/String;Ljava\/lang\/String;[BI)Ljavax\/crypto\/SecretKey; thrownTypes javax\/net\/ssl\/SSLKeyException flags 1\n+method name exportKeyingMaterialData descriptor (Ljava\/lang\/String;[BI)[B thrownTypes javax\/net\/ssl\/SSLKeyException flags 1\n+\n","filename":"src\/jdk.compiler\/share\/data\/symbols\/java.base-P.sym.txt","additions":89,"deletions":0,"binary":false,"changes":89,"status":"modified"},{"patch":"@@ -29,0 +29,3 @@\n+module name java.desktop\n+header exports java\/applet,java\/awt,java\/awt\/color,java\/awt\/desktop,java\/awt\/dnd,java\/awt\/event,java\/awt\/font,java\/awt\/geom,java\/awt\/im,java\/awt\/im\/spi,java\/awt\/image,java\/awt\/image\/renderable,java\/awt\/print,java\/beans,java\/beans\/beancontext,javax\/accessibility,javax\/imageio,javax\/imageio\/event,javax\/imageio\/metadata,javax\/imageio\/plugins\/bmp,javax\/imageio\/plugins\/jpeg,javax\/imageio\/plugins\/tiff,javax\/imageio\/spi,javax\/imageio\/stream,javax\/print,javax\/print\/attribute,javax\/print\/attribute\/standard,javax\/print\/event,javax\/sound,javax\/sound\/midi,javax\/sound\/midi\/spi,javax\/sound\/sampled,javax\/sound\/sampled\/spi,javax\/swing,javax\/swing\/border,javax\/swing\/colorchooser,javax\/swing\/event,javax\/swing\/filechooser,javax\/swing\/plaf,javax\/swing\/plaf\/basic,javax\/swing\/plaf\/metal,javax\/swing\/plaf\/multi,javax\/swing\/plaf\/nimbus,javax\/swing\/plaf\/synth,javax\/swing\/table,javax\/swing\/text,javax\/swing\/text\/html,javax\/swing\/text\/html\/parser,javax\/swing\/text\/rtf,javax\/swing\/tree,javax\/swing\/undo extraModulePackages sun\/print requires name\\u0020;java.base\\u0020;flags\\u0020;8000,name\\u0020;java.prefs\\u0020;flags\\u0020;0,name\\u0020;java.datatransfer\\u0020;flags\\u0020;20,name\\u0020;java.xml\\u0020;flags\\u0020;20 uses java\/awt\/im\/spi\/InputMethodDescriptor,javax\/accessibility\/AccessibilityProvider,javax\/imageio\/spi\/ImageInputStreamSpi,javax\/imageio\/spi\/ImageOutputStreamSpi,javax\/imageio\/spi\/ImageReaderSpi,javax\/imageio\/spi\/ImageTranscoderSpi,javax\/imageio\/spi\/ImageWriterSpi,javax\/print\/PrintServiceLookup,javax\/print\/StreamPrintServiceFactory,javax\/sound\/midi\/spi\/MidiDeviceProvider,javax\/sound\/midi\/spi\/MidiFileReader,javax\/sound\/midi\/spi\/MidiFileWriter,javax\/sound\/midi\/spi\/SoundbankReader,javax\/sound\/sampled\/spi\/AudioFileReader,javax\/sound\/sampled\/spi\/AudioFileWriter,javax\/sound\/sampled\/spi\/FormatConversionProvider,javax\/sound\/sampled\/spi\/MixerProvider,sun\/swing\/InteropProvider provides interface\\u0020;sun\/datatransfer\/DesktopDatatransferService\\u0020;impls\\u0020;sun\/awt\/datatransfer\/DesktopDatatransferServiceImpl,interface\\u0020;java\/net\/ContentHandlerFactory\\u0020;impls\\u0020;sun\/awt\/www\/content\/MultimediaContentHandlers,interface\\u0020;javax\/print\/PrintServiceLookup\\u0020;impls\\u0020;sun\/print\/PrintServiceLookupProvider,interface\\u0020;javax\/print\/StreamPrintServiceFactory\\u0020;impls\\u0020;sun\/print\/PSStreamPrinterFactory,interface\\u0020;javax\/sound\/midi\/spi\/MidiDeviceProvider\\u0020;impls\\u0020;com\/sun\/media\/sound\/MidiInDeviceProvider\\u005C;u002C;com\/sun\/media\/sound\/MidiOutDeviceProvider\\u005C;u002C;com\/sun\/media\/sound\/RealTimeSequencerProvider\\u005C;u002C;com\/sun\/media\/sound\/SoftProvider,interface\\u0020;javax\/sound\/midi\/spi\/MidiFileReader\\u0020;impls\\u0020;com\/sun\/media\/sound\/StandardMidiFileReader,interface\\u0020;javax\/sound\/midi\/spi\/MidiFileWriter\\u0020;impls\\u0020;com\/sun\/media\/sound\/StandardMidiFileWriter,interface\\u0020;javax\/sound\/midi\/spi\/SoundbankReader\\u0020;impls\\u0020;com\/sun\/media\/sound\/AudioFileSoundbankReader\\u005C;u002C;com\/sun\/media\/sound\/DLSSoundbankReader\\u005C;u002C;com\/sun\/media\/sound\/JARSoundbankReader\\u005C;u002C;com\/sun\/media\/sound\/SF2SoundbankReader,interface\\u0020;javax\/sound\/sampled\/spi\/AudioFileReader\\u0020;impls\\u0020;com\/sun\/media\/sound\/AiffFileReader\\u005C;u002C;com\/sun\/media\/sound\/AuFileReader\\u005C;u002C;com\/sun\/media\/sound\/SoftMidiAudioFileReader\\u005C;u002C;com\/sun\/media\/sound\/WaveFileReader\\u005C;u002C;com\/sun\/media\/sound\/WaveFloatFileReader\\u005C;u002C;com\/sun\/media\/sound\/WaveExtensibleFileReader,interface\\u0020;javax\/sound\/sampled\/spi\/AudioFileWriter\\u0020;impls\\u0020;com\/sun\/media\/sound\/AiffFileWriter\\u005C;u002C;com\/sun\/media\/sound\/AuFileWriter\\u005C;u002C;com\/sun\/media\/sound\/WaveFileWriter\\u005C;u002C;com\/sun\/media\/sound\/WaveFloatFileWriter,interface\\u0020;javax\/sound\/sampled\/spi\/FormatConversionProvider\\u0020;impls\\u0020;com\/sun\/media\/sound\/AlawCodec\\u005C;u002C;com\/sun\/media\/sound\/AudioFloatFormatConverter\\u005C;u002C;com\/sun\/media\/sound\/PCMtoPCMCodec\\u005C;u002C;com\/sun\/media\/sound\/UlawCodec,interface\\u0020;javax\/sound\/sampled\/spi\/MixerProvider\\u0020;impls\\u0020;com\/sun\/media\/sound\/DirectAudioDeviceProvider\\u005C;u002C;com\/sun\/media\/sound\/PortMixerProvider target macos-aarch64 flags 8000\n+\n@@ -33,0 +36,9 @@\n+class name javax\/sound\/SoundClip\n+header extends java\/lang\/Object flags 31\n+method name createSoundClip descriptor (Ljava\/io\/File;)Ljavax\/sound\/SoundClip; thrownTypes java\/io\/IOException flags 9\n+method name canPlay descriptor ()Z flags 1\n+method name isPlaying descriptor ()Z flags 1\n+method name play descriptor ()V flags 1\n+method name loop descriptor ()V flags 1\n+method name stop descriptor ()V flags 1\n+\n","filename":"src\/jdk.compiler\/share\/data\/symbols\/java.desktop-P.sym.txt","additions":12,"deletions":0,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -93,0 +93,1 @@\n+method name largestShapeFor descriptor (Ljava\/lang\/Class;)Ljdk\/incubator\/vector\/VectorShape; flags 9 signature (Ljava\/lang\/Class<*>;)Ljdk\/incubator\/vector\/VectorShape;\n","filename":"src\/jdk.compiler\/share\/data\/symbols\/jdk.incubator.vector-P.sym.txt","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -29,0 +29,3 @@\n+class name jdk\/jfr\/Contextual\n+header extends java\/lang\/Object implements java\/lang\/annotation\/Annotation flags 2601 runtimeAnnotations @Ljdk\/jfr\/MetadataDefinition;@Ljdk\/jfr\/Label;(value=\"Context\")@Ljava\/lang\/annotation\/Retention;(value=eLjava\/lang\/annotation\/RetentionPolicy;RUNTIME;)@Ljava\/lang\/annotation\/Target;(value={eLjava\/lang\/annotation\/ElementType;FIELD;})\n+\n@@ -32,0 +35,5 @@\n+class name jdk\/jfr\/Throttle\n+header extends java\/lang\/Object implements java\/lang\/annotation\/Annotation flags 2601 runtimeAnnotations @Ljdk\/jfr\/MetadataDefinition;@Ljava\/lang\/annotation\/Target;(value={eLjava\/lang\/annotation\/ElementType;TYPE;})@Ljava\/lang\/annotation\/Inherited;@Ljava\/lang\/annotation\/Retention;(value=eLjava\/lang\/annotation\/RetentionPolicy;RUNTIME;)\n+field name NAME descriptor Ljava\/lang\/String; constantValue throttle flags 19\n+method name value descriptor ()Ljava\/lang\/String; annotationDefaultValue \"off\" flags 401\n+\n","filename":"src\/jdk.compiler\/share\/data\/symbols\/jdk.jfr-P.sym.txt","additions":8,"deletions":0,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -42,1 +42,0 @@\n-  _no_cause_specified (\"Unknown GCCause\"),\n@@ -57,1 +56,0 @@\n-  _shenandoah_allocation_failure_evac (\"Allocation Failure During Evacuation\"),\n@@ -59,0 +57,2 @@\n+  _shenandoah_allocation_failure_evac (\"Allocation Failure During Evacuation\"),\n+  _shenandoah_humongous_allocation_failure(\"Humongous Allocation Failure\"),\n","filename":"src\/jdk.hotspot.agent\/share\/classes\/sun\/jvm\/hotspot\/gc\/shared\/GCCause.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -103,3 +103,3 @@\n-    INDY_BSM_OFFSET = db.lookupIntConstant(\"ConstantPool::_indy_bsm_offset\").intValue();\n-    INDY_ARGC_OFFSET = db.lookupIntConstant(\"ConstantPool::_indy_argc_offset\").intValue();\n-    INDY_ARGV_OFFSET = db.lookupIntConstant(\"ConstantPool::_indy_argv_offset\").intValue();\n+    INDY_BSM_OFFSET = db.lookupIntConstant(\"BSMAttributeEntry::_bsmi_offset\").intValue();\n+    INDY_ARGC_OFFSET = db.lookupIntConstant(\"BSMAttributeEntry::_argc_offset\").intValue();\n+    INDY_ARGV_OFFSET = db.lookupIntConstant(\"BSMAttributeEntry::_argv_offset\").intValue();\n","filename":"src\/jdk.hotspot.agent\/share\/classes\/sun\/jvm\/hotspot\/oops\/ConstantPool.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -1,60 +0,0 @@\n-\/*\n- * Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\n- *\/\n-\n-package sun.jvm.hotspot.runtime;\n-\n-import sun.jvm.hotspot.types.TypeDataBase;\n-\n-\n-\/** Encapsulates the LockingMode enum in globalDefinitions.hpp in\n-    the VM. *\/\n-\n-public class LockingMode {\n-  private static int monitor;\n-  private static int legacy;\n-  private static int lightweight;\n-\n-  static {\n-    VM.registerVMInitializedObserver(\n-        (o, d) -> initialize(VM.getVM().getTypeDataBase()));\n-  }\n-\n-  private static synchronized void initialize(TypeDataBase db) {\n-    monitor     = db.lookupIntConstant(\"LM_MONITOR\").intValue();\n-    legacy      = db.lookupIntConstant(\"LM_LEGACY\").intValue();\n-    lightweight = db.lookupIntConstant(\"LM_LIGHTWEIGHT\").intValue();\n-  }\n-\n-  public static int getMonitor() {\n-    return monitor;\n-  }\n-\n-  public static int getLegacy() {\n-    return legacy;\n-  }\n-\n-  public static int getLightweight() {\n-    return lightweight;\n-  }\n-}\n","filename":"src\/jdk.hotspot.agent\/share\/classes\/sun\/jvm\/hotspot\/runtime\/LockingMode.java","additions":0,"deletions":60,"binary":false,"changes":60,"status":"deleted"},{"patch":"@@ -161,0 +161,1 @@\n+        virtualConstructor.addMapping(\"JfrRecorderThread\", JavaThread.class);\n@@ -198,1 +199,2 @@\n-            \" DeoptimizeObjectsALotThread, StringDedupThread, NotificationThread, ServiceThread or JvmtiAgentThread)\", e);\n+            \" DeoptimizeObjectsALotThread, StringDedupThread, NotificationThread, ServiceThread,\" +\n+            \" JfrRecorderThread, or JvmtiAgentThread)\", e);\n@@ -225,22 +227,6 @@\n-            if (VM.getVM().getCommandLineFlag(\"LockingMode\").getInt() == LockingMode.getLightweight()) {\n-                OopHandle object = monitor.object();\n-                for (int i = 0; i < getNumberOfThreads(); i++) {\n-                    JavaThread thread = getJavaThreadAt(i);\n-                    if (thread.isLockOwned(object)) {\n-                        return thread;\n-                     }\n-                }\n-                \/\/ We should have found the owner, however, as the VM could be in any state, including the middle\n-                \/\/ of performing GC, it is not always possible to do so. Just return null if we can't locate it.\n-                System.out.println(\"Warning: We failed to find a thread that owns an anonymous lock. This is likely\");\n-                System.out.println(\"due to the JVM currently running a GC. Locking information may not be accurate.\");\n-                return null;\n-            } else {\n-                assert(VM.getVM().getCommandLineFlag(\"LockingMode\").getInt() == LockingMode.getLegacy());\n-                Address o = (Address)monitor.stackLocker();\n-                for (int i = 0; i < getNumberOfThreads(); i++) {\n-                    JavaThread thread = getJavaThreadAt(i);\n-                    if (thread.isLockOwned(o))\n-                        return thread;\n-                }\n-                return null;\n+            OopHandle object = monitor.object();\n+            for (int i = 0; i < getNumberOfThreads(); i++) {\n+                JavaThread thread = getJavaThreadAt(i);\n+                if (thread.isLockOwned(object)) {\n+                    return thread;\n+                 }\n@@ -248,0 +234,5 @@\n+            \/\/ We should have found the owner, however, as the VM could be in any state, including the middle\n+            \/\/ of performing GC, it is not always possible to do so. Just return null if we can't locate it.\n+            System.out.println(\"Warning: We failed to find a thread that owns an anonymous lock. This is likely\");\n+            System.out.println(\"due to the JVM currently running a GC. Locking information may not be accurate.\");\n+            return null;\n","filename":"src\/jdk.hotspot.agent\/share\/classes\/sun\/jvm\/hotspot\/runtime\/Threads.java","additions":14,"deletions":23,"binary":false,"changes":37,"status":"modified"},{"patch":"@@ -27,1 +27,0 @@\n-import jdk.internal.util.StaticProperty;\n@@ -73,1 +72,1 @@\n-            return switch (StaticProperty.osArch()) {\n+            return switch (System.getProperty(\"os.arch\")) {\n","filename":"src\/jdk.incubator.vector\/share\/classes\/jdk\/incubator\/vector\/VectorMathLibrary.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -182,0 +182,1 @@\n+        SB,\n","filename":"src\/jdk.internal.vm.ci\/share\/classes\/jdk\/vm\/ci\/aarch64\/AArch64.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -657,0 +657,2 @@\n+    native String getInvalidationReasonDescription(int invalidationReason);\n+\n@@ -845,1 +847,1 @@\n-    native void invalidateHotSpotNmethod(HotSpotNmethod nmethodMirror, boolean deoptimize);\n+    native void invalidateHotSpotNmethod(HotSpotNmethod nmethodMirror, boolean deoptimize, int invalidationReason);\n","filename":"src\/jdk.internal.vm.ci\/share\/classes\/jdk\/vm\/ci\/hotspot\/CompilerToVM.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -157,2 +157,1 @@\n-    @Override\n-    public void invalidateInstalledCode(InstalledCode installedCode) {\n+    public void invalidateInstalledCode(InstalledCode installedCode, int invalidationReason) {\n@@ -161,1 +160,1 @@\n-            nmethod.invalidate(true);\n+            nmethod.invalidate(true, invalidationReason);\n@@ -167,0 +166,5 @@\n+    @Override\n+    public void invalidateInstalledCode(InstalledCode installedCode) {\n+        invalidateInstalledCode(installedCode, jvmciInvalidationReason());\n+    }\n+\n@@ -204,0 +208,4 @@\n+\n+    private static int jvmciInvalidationReason() {\n+        return HotSpotJVMCIRuntime.runtime().config.getConstant(\"nmethod::InvalidationReason::JVMCI_INVALIDATE\", Integer.class);\n+    }\n","filename":"src\/jdk.internal.vm.ci\/share\/classes\/jdk\/vm\/ci\/hotspot\/HotSpotCodeCacheProvider.java","additions":11,"deletions":3,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -30,0 +30,1 @@\n+import jdk.vm.ci.common.JVMCIError;\n@@ -79,0 +80,6 @@\n+    \/**\n+     * Identify the reason that caused this nmethod to be invalidated.\n+     * A value of -1 means that the nmethod was not invalidated.\n+     *\/\n+    private int invalidationReason;\n+\n@@ -85,0 +92,1 @@\n+        this.invalidationReason = -1;\n@@ -125,0 +133,10 @@\n+    \/**\n+     * Invalidate this nmethod using the reason specified in {@code invalidationReason} and\n+     * optionally deoptimize the method if {@code deoptimize} is set.\n+     * @param deoptimize whether or not to deoptimize the method.\n+     * @param invalidationReason invalidation reason code.\n+     *\/\n+    public void invalidate(boolean deoptimize, int invalidationReason) {\n+        compilerToVM().invalidateHotSpotNmethod(this, deoptimize, invalidationReason);\n+    }\n+\n@@ -127,1 +145,1 @@\n-        compilerToVM().invalidateHotSpotNmethod(this, deoptimize);\n+        invalidate(deoptimize, jvmciInvalidationReason());\n@@ -191,0 +209,18 @@\n+\n+    \/**\n+     * @return an integer representing the reason why this nmethod was invalidated.\n+     *\/\n+    public int getInvalidationReason() {\n+        return invalidationReason;\n+    }\n+\n+    \/**\n+     * @return a String describing the reason why this nmethod was invalidated.\n+     *\/\n+    public String getInvalidationReasonDescription() {\n+        return compilerToVM().getInvalidationReasonDescription(this.getInvalidationReason());\n+    }\n+\n+    private static int jvmciInvalidationReason() {\n+        return HotSpotJVMCIRuntime.runtime().config.getConstant(\"nmethod::InvalidationReason::JVMCI_INVALIDATE\", Integer.class);\n+    }\n","filename":"src\/jdk.internal.vm.ci\/share\/classes\/jdk\/vm\/ci\/hotspot\/HotSpotNmethod.java","additions":37,"deletions":1,"binary":false,"changes":38,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n-6SPACE=\\u0020    \\u0020\n+6SPACE=\\     \\u0020\n@@ -40,2 +40,2 @@\n-.jarsigner.verify.options.jar.file.alias.=\\u0020      jarsigner -verify [options] jar-file [alias...]\n-.jarsigner.version=\\u0020      jarsigner -version\n+.jarsigner.verify.options.jar.file.alias.=\\       jarsigner -verify [options] jar-file [alias...]\n+.jarsigner.version=\\       jarsigner -version\n@@ -54,1 +54,1 @@\n-.suboptions.can.be.all.grouped.or.summary=\\u0020                           Als Unteroptionen sind \"all\", \"grouped\" und \"summary\" möglich\n+.suboptions.can.be.all.grouped.or.summary=\\                            Als Unteroptionen sind \"all\", \"grouped\" und \"summary\" möglich\n@@ -66,1 +66,1 @@\n-.providerArg.option.1=\\u0020 [-providerArg <Argument>]] ... Konfiguriert Argument für -addprovider\n+.providerArg.option.1=\\  [-providerArg <Argument>]] ... Konfiguriert Argument für -addprovider\n@@ -68,1 +68,1 @@\n-.providerArg.option.2=\\u0020 [-providerArg <Argument>]] ... Konfiguriert Argument für -providerClass\n+.providerArg.option.2=\\  [-providerArg <Argument>]] ... Konfiguriert Argument für -providerClass\n@@ -86,5 +86,5 @@\n-.s.signature.was.verified.=\\u0020 s = Signatur wurde verifiziert\\u0020\n-.m.entry.is.listed.in.manifest=\\u0020 m = Eintrag ist in Manifest aufgeführt\n-.k.at.least.one.certificate.was.found.in.keystore=\\u0020 k = Mindestens ein Zertifikat im Keystore gefunden\n-.X.not.signed.by.specified.alias.es.=\\u0020 X = Nicht von den angegebenen Aliasnamen signiert\n-.q.unsigned.entry=\\u0020 ? = Nicht signierter Eintrag\n+.s.signature.was.verified.=\\  s = Signatur wurde verifiziert\\u0020\n+.m.entry.is.listed.in.manifest=\\  m = Eintrag ist in Manifest aufgeführt\n+.k.at.least.one.certificate.was.found.in.keystore=\\  k = Mindestens ein Zertifikat im Keystore gefunden\n+.X.not.signed.by.specified.alias.es.=\\  X = Nicht von den angegebenen Aliasnamen signiert\n+.q.unsigned.entry=\\  ? = Nicht signierter Eintrag\n@@ -99,1 +99,2 @@\n-jar.signed.=JAR-Datei signiert.\n+multiple.manifest.warning.=Doppelte Manifesteinträge in der JAR-Datei erkannt. JarSigner hat nur einen Eintrag bearbeitet. Die anderen wurden verworfen.\n+jar.signed.=JAR signiert.\n@@ -101,1 +102,1 @@\n-jar.verified.=JAR-Datei verifiziert.\n+jar.verified.=JAR verifiziert.\n@@ -106,1 +107,1 @@\n-history.nonexistent.entries=\\u0020   Warnung: Nicht vorhandene signierte Einträge:\\u0020\n+history.nonexistent.entries=\\    Warnung: Nicht vorhandene signierte Einträge:\\u0020\n@@ -116,2 +117,2 @@\n-key.bit.weak=%s Schlüssel (schwach)\n-key.bit.disabled=%s Schlüssel (deaktiviert)\n+key.bit.weak=%s-Schlüssel (schwach)\n+key.bit.disabled=%s-Schlüssel (deaktiviert)\n@@ -125,3 +126,3 @@\n-.adding.=\\u0020  Wird hinzugefügt:\\u0020\n-.updating.=\\u0020Wird aktualisiert:\\u0020\n-.signing.=\\u0020 Wird signiert:\\u0020\n+.adding.=\\   Wird hinzugefügt:\\u0020\n+.updating.=\\ Wird aktualisiert:\\u0020\n+.signing.=\\  Wird signiert:\\u0020\n@@ -152,1 +153,1 @@\n-TSA.location.=TSA-Ort:\\u0020\n+TSA.location.=TSA-Speicherort:\\u0020\n@@ -162,1 +163,1 @@\n-trusted.certificate=vertrauenswürdiges Zertifikat\n+trusted.certificate=Vertrauenswürdiges Zertifikat\n@@ -164,1 +165,1 @@\n-This.jar.contains.entries.whose.signer.certificate.has.expired.=Diese JAR-Datei enthält Einträge, deren Signaturgeberzertifikat abgelaufen ist.\n+This.jar.contains.entries.whose.signer.certificate.has.expired.=Diese JAR-Datei enthält Einträge, deren Signaturgeberzertifikat abgelaufen ist.\\u0020\n@@ -191,3 +192,3 @@\n-size.bit.alg=%1$d-Bit %2$s\n-The.full.keyAlgName.signing.key.is.considered.a.security.risk..It.will.be.disabled.in.a.future.update.=Der %s Signaturschlüssel wird als Sicherheitsrisiko betrachtet. Wird in einem zukünftigen Update deaktiviert.\n-The.full.keyAlgName.signing.key.is.considered.a.security.risk.and.is.disabled.=Der %s Signaturschlüssel wird als Sicherheitsrisiko betrachtet und ist deaktiviert.\n+size.bit.alg=%1$d-Bit-%2$s\n+The.full.keyAlgName.signing.key.is.considered.a.security.risk..It.will.be.disabled.in.a.future.update.=Der %1$s-Signaturschlüssel gilt als Sicherheitsrisiko. Er wird in einem zukünftigen Update deaktiviert.\n+The.full.keyAlgName.signing.key.is.considered.a.security.risk.and.is.disabled.=Der %s-Signaturschlüssel gilt als Sicherheitsrisiko und ist deaktiviert.\n@@ -208,0 +209,14 @@\n+manifest.missing.when.reading.jarfile=Manifest fehlt beim Lesen über JarFile\n+manifest.missing.when.reading.jarinputstream=Manifest fehlt beim Lesen über JarInputStream\n+manifest.attribute.1.present.when.reading.jarfile.but.missing.via.jarinputstream=Manifesthauptattribut %s ist beim Lesen über JarFile vorhanden, aber fehlt beim Lesen über JarInputStream\n+manifest.attribute.1.present.when.reading.jarinputstream.but.missing.via.jarfile=Manifesthauptattribut %s ist beim Lesen über JarInputStream vorhanden, aber fehlt beim Lesen über JarFile\n+manifest.attribute.1.differs.jarfile.value.2.jarinputstream.value.3=Manifesthauptattribut %1$s unterschiedlich: JarFile-Wert = %2$s, JarInputStream-Wert = %3$s\n+entry.1.present.when.reading.jarinputstream.but.missing.via.jarfile=Eintrag %s ist beim Lesen über JarInputStream vorhanden, aber fehlt beim Lesen über JarFile\n+entry.1.present.when.reading.jarfile.but.missing.via.jarinputstream=Eintrag %s ist beim Lesen über JarFile vorhanden, aber fehlt beim Lesen über JarInputStream\n+entry.1.present.in.jarfile.but.unreadable=Eintrag %s ist in JarFile vorhanden, aber nicht lesbar\n+codesigners.different.for.entry.1.when.reading.jarfile.and.jarinputstream=Codesignaturgeber für Eintrag %s beim Lesen über JarFile anders als bei JarInputStream\n+entry.1.is.signed.in.jarfile.but.is.not.signed.in.jarinputstream=Eintrag %s ist in JarFile, aber nicht in JarInputStream signiert\n+entry.1.is.signed.in.jarinputstream.but.is.not.signed.in.jarfile=Eintrag %s ist in JarInputStream, aber nicht in JarFile signiert\n+jar.contains.internal.inconsistencies.result.in.different.contents.via.jarfile.and.jarinputstream=Diese JAR-Datei enthält interne Inkonsistenzen, die zu anderem Inhalt beim Lesen über JarFile als beim Lesen über JarInputStream führen können:\n+signature.verification.failed.on.entry.1.when.reading.via.jarinputstream=Signaturverifizierung war für Eintrag %s beim Lesen über JarInputStream nicht erfolgreich\n+signature.verification.failed.on.entry.1.when.reading.via.jarfile=Signaturverifizierung war für Eintrag %s beim Lesen über JarFile nicht erfolgreich\n","filename":"src\/jdk.jartool\/share\/classes\/sun\/security\/tools\/jarsigner\/resources\/jarsigner_de.properties","additions":40,"deletions":25,"binary":false,"changes":65,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n-6SPACE=\\u0020    \\u0020\n+6SPACE=\\     \\u0020\n@@ -40,2 +40,2 @@\n-.jarsigner.verify.options.jar.file.alias.=\\u0020      jarsigner -verify [options] jar-file [alias...]\n-.jarsigner.version=\\u0020      jarsigner -version\n+.jarsigner.verify.options.jar.file.alias.=\\       jarsigner -verify [options] jar-file [alias...]\n+.jarsigner.version=\\       jarsigner -version\n@@ -50,1 +50,1 @@\n-.sigalg.algorithm.name.of.signature.algorithm=[-sigalg <algorithm>]       シグネチャ・アルゴリズムの名前\n+.sigalg.algorithm.name.of.signature.algorithm=[-sigalg <algorithm>]       署名アルゴリズムの名前\n@@ -54,1 +54,1 @@\n-.suboptions.can.be.all.grouped.or.summary=\\u0020                           サブオプションとして、all、groupedまたはsummaryを使用できます\n+.suboptions.can.be.all.grouped.or.summary=\\                            サブオプションとして、all、groupedまたはsummaryを使用できます\n@@ -61,1 +61,1 @@\n-.internalsf.include.the.SF.file.inside.the.signature.block=[-internalsf]               シグネチャ・ブロックに.SFファイルを含める\n+.internalsf.include.the.SF.file.inside.the.signature.block=[-internalsf]               署名ブロックに.SFファイルを含める\n@@ -66,1 +66,1 @@\n-.providerArg.option.1=\\u0020 [-providerArg <arg>]] ... -addproviderの引数を構成する\n+.providerArg.option.1=\\  [-providerArg <arg>]] ... -addproviderの引数を構成する\n@@ -68,1 +68,1 @@\n-.providerArg.option.2=\\u0020 [-providerArg <arg>]] ... -providerClassの引数を構成する\n+.providerArg.option.2=\\  [-providerArg <arg>]] ... -providerClassの引数を構成する\n@@ -86,5 +86,5 @@\n-.s.signature.was.verified.=\\u0020 s=シグネチャが検証されました\\u0020\n-.m.entry.is.listed.in.manifest=\\u0020 m=エントリがマニフェスト内にリストされます\n-.k.at.least.one.certificate.was.found.in.keystore=\\u0020 k=1つ以上の証明書がキーストアで検出されました\n-.X.not.signed.by.specified.alias.es.=\\u0020 X =指定した別名で署名されていません\n-.q.unsigned.entry=\\u0020 ? = 署名なしのエントリ\n+.s.signature.was.verified.=\\  s=署名が検証されました\\u0020\n+.m.entry.is.listed.in.manifest=\\  m=エントリがマニフェスト内にリストされます\n+.k.at.least.one.certificate.was.found.in.keystore=\\  k=1つ以上の証明書がキーストアで検出されました\n+.X.not.signed.by.specified.alias.es.=\\  X =指定した別名で署名されていません\n+.q.unsigned.entry=\\  ? = 署名なしのエントリ\n@@ -92,1 +92,1 @@\n-.Signature.related.entries.=(シグネチャ関連エントリ)\n+.Signature.related.entries.=(署名関連エントリ)\n@@ -99,0 +99,1 @@\n+multiple.manifest.warning.=jarファイルで重複したマニフェスト・エントリが検出されました。JarSignerは1つでのみ動作し、その他は破棄されました。\n@@ -106,1 +107,1 @@\n-history.nonexistent.entries=\\u0020   警告: 存在しない署名済エントリ:\\u0020\n+history.nonexistent.entries=\\    警告: 存在しない署名済エントリ:\\u0020\n@@ -116,1 +117,1 @@\n-key.bit.weak=%sキー(弱い)\n+key.bit.weak=%sキー(弱)\n@@ -122,1 +123,1 @@\n-signature.filename.must.consist.of.the.following.characters.A.Z.0.9.or.=シグネチャのファイル名に使用できる文字は、A-Z、0-9、_、- のみです。\n+signature.filename.must.consist.of.the.following.characters.A.Z.0.9.or.=署名のファイル名に使用できる文字は、A-Z、0-9、_、- のみです\n@@ -125,3 +126,3 @@\n-.adding.=\\u0020  追加中:\\u0020\n-.updating.=\\u0020更新中:\\u0020\n-.signing.=\\u0020 署名中:\\u0020\n+.adding.=\\   追加中:\\u0020\n+.updating.=\\ 更新中:\\u0020\n+.signing.=\\  署名中:\\u0020\n@@ -151,1 +152,1 @@\n-requesting.a.signature.timestamp=シグネチャ・タイムスタンプのリクエスト\n+requesting.a.signature.timestamp=署名タイムスタンプのリクエスト\n@@ -167,1 +168,1 @@\n-This.jar.contains.entries.whose.signer.certificate.is.self.signed.=このjarには、署名者の証明書が自己署名されているエントリが含まれています。\\u0020\n+This.jar.contains.entries.whose.signer.certificate.is.self.signed.=このjarには、署名者の証明書が自己署名されているエントリが含まれています。\n@@ -191,3 +192,3 @@\n-size.bit.alg=%1$dビット%2$s\n-The.full.keyAlgName.signing.key.is.considered.a.security.risk..It.will.be.disabled.in.a.future.update.=%s署名キーはセキュリティ・リスクとみなされます。今後の更新では無効になります。\n-The.full.keyAlgName.signing.key.is.considered.a.security.risk.and.is.disabled.=%s署名キーはセキュリティ・リスクとみなされ、無効になっています。\n+size.bit.alg=%1$d-ビット %2$s\n+The.full.keyAlgName.signing.key.is.considered.a.security.risk..It.will.be.disabled.in.a.future.update.=%s署名キーはセキュリティ・リスクとみなされます。これは将来の更新で無効化されます。\n+The.full.keyAlgName.signing.key.is.considered.a.security.risk.and.is.disabled.=%s署名キーはセキュリティ・リスクとみなされ、無効化されています。\n@@ -208,0 +209,14 @@\n+manifest.missing.when.reading.jarfile=JarFileを介して読み取るときにマニフェストがありません\n+manifest.missing.when.reading.jarinputstream=JarInputStreamを介して読み取るときにマニフェストがありません\n+manifest.attribute.1.present.when.reading.jarfile.but.missing.via.jarinputstream=マニフェストのメイン属性%sは、JarFileを介して読み取るときは存在しますが、JarInputStreamを介して読み取るときにはありません\n+manifest.attribute.1.present.when.reading.jarinputstream.but.missing.via.jarfile=マニフェストのメイン属性%sは、JarInputStreamを介して読み取るときは存在しますが、JarFileを介して読み取るときにはありません\n+manifest.attribute.1.differs.jarfile.value.2.jarinputstream.value.3=マニフェストのメイン属性%1$sが異なります: JarFileの値 = %2$s、JarInputStreamの値 = %3$s\n+entry.1.present.when.reading.jarinputstream.but.missing.via.jarfile=エントリ%sは、JarInputStreamを介して読み取るときは存在しますが、JarFileを介して読み取るときにはありません\n+entry.1.present.when.reading.jarfile.but.missing.via.jarinputstream=エントリ%sは、JarFileを介して読み取るときは存在しますが、JarInputStreamを介して読み取るときにはありません\n+entry.1.present.in.jarfile.but.unreadable=エントリ%sはJarFileに存在しますが読み取れません\n+codesigners.different.for.entry.1.when.reading.jarfile.and.jarinputstream=JarFileとJarInputStreamから読み取る場合のエントリ%sのコード署名者が異なります\n+entry.1.is.signed.in.jarfile.but.is.not.signed.in.jarinputstream=エントリ%sは、JarFileでは署名されていますが、JarInputStreamでは署名されていません\n+entry.1.is.signed.in.jarinputstream.but.is.not.signed.in.jarfile=エントリ%sは、JarInputStreamでは署名されていますが、JarFileでは署名されていません\n+jar.contains.internal.inconsistencies.result.in.different.contents.via.jarfile.and.jarinputstream=このJARファイルには内部的な不整合があるため、JarFileとJarInputStreamから読み取る場合にコンテンツが異なる可能性があります:\n+signature.verification.failed.on.entry.1.when.reading.via.jarinputstream=JarInputStreamを介して読み取るときに署名検証がエントリ%sで失敗しました\n+signature.verification.failed.on.entry.1.when.reading.via.jarfile=JarFileを介して読み取るときに署名検証がエントリ%sで失敗しました\n","filename":"src\/jdk.jartool\/share\/classes\/sun\/security\/tools\/jarsigner\/resources\/jarsigner_ja.properties","additions":40,"deletions":25,"binary":false,"changes":65,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n-6SPACE=\\u0020    \\u0020\n+6SPACE=\\     \\u0020\n@@ -40,2 +40,2 @@\n-.jarsigner.verify.options.jar.file.alias.=\\u0020      jarsigner -verify [选项] jar-file [别名...]\n-.jarsigner.version=\\u0020      jarsigner -version\n+.jarsigner.verify.options.jar.file.alias.=\\       jarsigner -verify [选项] jar-file [别名...]\n+.jarsigner.version=\\       jarsigner -version\n@@ -54,1 +54,1 @@\n-.suboptions.can.be.all.grouped.or.summary=\\u0020                           子选项可以是 all, grouped 或 summary\n+.suboptions.can.be.all.grouped.or.summary=\\                            子选项可以是 all, grouped 或 summary\n@@ -66,1 +66,1 @@\n-.providerArg.option.1=\\u0020 [-providerArg <参数>]] ... 配置 -addprovider 的参数\n+.providerArg.option.1=\\  [-providerArg <参数>]] ... 配置 -addprovider 的参数\n@@ -68,1 +68,1 @@\n-.providerArg.option.2=\\u0020 [-providerArg <参数>]] ... 配置 -providerClass 的参数\n+.providerArg.option.2=\\  [-providerArg <参数>]] ... 配置 -providerClass 的参数\n@@ -86,5 +86,5 @@\n-.s.signature.was.verified.=\\u0020 s = 已验证签名\\u0020\n-.m.entry.is.listed.in.manifest=\\u0020 m = 在清单中列出条目\n-.k.at.least.one.certificate.was.found.in.keystore=\\u0020 k = 在密钥库中至少找到了一个证书\n-.X.not.signed.by.specified.alias.es.=\\u0020 X = 未由指定别名签名\n-.q.unsigned.entry=\\u0020 ? = 未签名条目\n+.s.signature.was.verified.=\\  s = 已验证签名\\u0020\n+.m.entry.is.listed.in.manifest=\\  m = 在清单中列出条目\n+.k.at.least.one.certificate.was.found.in.keystore=\\  k = 在密钥库中至少找到了一个证书\n+.X.not.signed.by.specified.alias.es.=\\  X = 未由指定别名签名\n+.q.unsigned.entry=\\  ? = 未签名条目\n@@ -99,0 +99,1 @@\n+multiple.manifest.warning.=在 jar 文件中检测到重复的清单条目。JarSigner 仅对其中一个条目进行了操作，其他条目都已放弃。\n@@ -106,1 +107,1 @@\n-history.nonexistent.entries=警告：不存在的签名条目：\\u0020\n+history.nonexistent.entries=\\    警告：不存在的签名条目：\\u0020\n@@ -111,1 +112,1 @@\n-with.weak=%s (弱)\n+with.weak=%s（弱）\n@@ -117,1 +118,1 @@\n-key.bit.disabled=%s 密钥（已禁用）\n+key.bit.disabled=%s 密钥（禁用）\n@@ -121,1 +122,1 @@\n-jarsigner.=jarsigner:\\u0020\n+jarsigner.=jarsigner：\\u0020\n@@ -125,3 +126,3 @@\n-.adding.=\\u0020  正在添加:\\u0020\n-.updating.=\\u0020正在更新:\\u0020\n-.signing.=\\u0020 正在签名:\\u0020\n+.adding.=\\   正在添加：\\u0020\n+.updating.=\\ 正在更新：\\u0020\n+.signing.=\\  正在签名：\\u0020\n@@ -154,1 +155,1 @@\n-no.response.from.the.Timestamping.Authority.=时间戳颁发机构没有响应。如果要从防火墙后面连接, 则可能需要指定 HTTP 或 HTTPS 代理。请为 jarsigner 提供以下选项:\\u0020\n+no.response.from.the.Timestamping.Authority.=时间戳颁发机构没有响应。如果要从防火墙后面连接, 则可能需要指定 HTTP 或 HTTPS 代理。请为 jarsigner 提供以下选项:\n@@ -158,2 +159,2 @@\n-Warning.=警告:\\u0020\n-Error.=错误:\\u0020\n+Warning.=警告：\\u0020\n+Error.=错误：\\u0020\n@@ -192,2 +193,2 @@\n-The.full.keyAlgName.signing.key.is.considered.a.security.risk..It.will.be.disabled.in.a.future.update.=%s 签名密钥被视为安全风险。在将来的更新中将禁用它。\n-The.full.keyAlgName.signing.key.is.considered.a.security.risk.and.is.disabled.=%s 签名密钥被视为安全风险并被禁用。\n+The.full.keyAlgName.signing.key.is.considered.a.security.risk..It.will.be.disabled.in.a.future.update.=%s 签名密钥被视为存在安全风险。它将在未来的更新中被禁用。\n+The.full.keyAlgName.signing.key.is.considered.a.security.risk.and.is.disabled.=%s 签名密钥被视为存在安全风险而且被禁用。\n@@ -208,0 +209,14 @@\n+manifest.missing.when.reading.jarfile=通过 JarFile 读取时缺少清单\n+manifest.missing.when.reading.jarinputstream=通过 JarInputStream 读取时缺少清单\n+manifest.attribute.1.present.when.reading.jarfile.but.missing.via.jarinputstream=通过 JarFile 读取时，清单主属性 %s 存在，但通过 JarInputStream 读取时缺失\n+manifest.attribute.1.present.when.reading.jarinputstream.but.missing.via.jarfile=通过 JarInputStream 读取时，清单主属性 %s 存在，但通过 JarFile 读取时缺失\n+manifest.attribute.1.differs.jarfile.value.2.jarinputstream.value.3=清单主属性 %1$s 不同：JarFile 值 = %2$s，JarInputStream 值 = %3$s\n+entry.1.present.when.reading.jarinputstream.but.missing.via.jarfile=通过 JarInputStream 读取时，条目 %s 存在，但通过 JarFile 读取时缺失\n+entry.1.present.when.reading.jarfile.but.missing.via.jarinputstream=通过 JarFile 读取时，条目 %s 存在，但通过 JarInputStream 读取时缺失\n+entry.1.present.in.jarfile.but.unreadable=条目 %s 存在于 JarFile 中，但无法读取\n+codesigners.different.for.entry.1.when.reading.jarfile.and.jarinputstream=从 JarFile 和 JarInputStream 读取时，条目 %s 的代码签名者不同\n+entry.1.is.signed.in.jarfile.but.is.not.signed.in.jarinputstream=条目 %s 已在 JarFile 中签名，但未在 JarInputStream 中签名\n+entry.1.is.signed.in.jarinputstream.but.is.not.signed.in.jarfile=条目 %s 已在 JarInputStream 中签名，但未在 JarFile 中签名\n+jar.contains.internal.inconsistencies.result.in.different.contents.via.jarfile.and.jarinputstream=此 JAR 文件包含内部不一致，通过 JarFile 和 JarInputStream 读取时可能会导致内容不同：\n+signature.verification.failed.on.entry.1.when.reading.via.jarinputstream=通过 JarInputStream 读取时，条目 %s 的签名验证失败\n+signature.verification.failed.on.entry.1.when.reading.via.jarfile=通过 JarFile 读取时，条目 %s 的签名验证失败\n","filename":"src\/jdk.jartool\/share\/classes\/sun\/security\/tools\/jarsigner\/resources\/jarsigner_zh_CN.properties","additions":38,"deletions":23,"binary":false,"changes":61,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 1999, 2024, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 1999, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -61,0 +61,1 @@\n+error.release.value.toohigh.versioned.entry={0} hat Klassendateiversion {1}, aber Klassendateiversion {2} oder niedriger ist für Release {3} der Java-Plattform erforderlich\n@@ -85,0 +86,6 @@\n+warn.validator.duplicate.cen.entry=Warnung: {0} zentrale Verzeichniseinträge für {1} gefunden\n+warn.validator.duplicate.loc.entry=Warnung: {0} lokale Dateiheader für {1} gefunden\n+warn.validator.invalid.entry.name=Warnung: Eintragsname {0} ist ungültig\n+warn.validator.cen.only.entry=Warnung: Kein Äquivalent für zentralen Verzeichniseintrag {0} in den lokalen Dateiheadern gefunden\n+warn.validator.loc.only.entry=Warnung: Kein äquivalenter Eintrag für den lokalen Dateiheader {0} im zentralen Verzeichnis gefunden\n+warn.validator.order.mismatch=Warnung: Zentrale Verzeichniseinträge und lokale Dateiheadereinträge sind nicht in derselben Reihenfolge\n@@ -118,1 +125,3 @@\n-main.help.opt.main.validate=\\      --validate             Validiert den Inhalt des JAR-Archivs. Diese Option\\n                             validiert, dass die von einem Multi-Release-JAR-Archiv\\n                             exportierte API über die verschiedenen Releaseversionen\\n                             hinweg konsistent ist.\n+main.help.opt.main.validate=\\      --validate             Validiert den Inhalt des JAR-Archivs. Diese Option:\\n                             - Validiert, dass die von einem Multi-Release-JAR-Archiv\\n                             exportierte API über die verschiedenen Releaseversionen\\n                             hinweg konsistent ist.\\n                             - Gibt eine Warnung aus, wenn ungültige oder doppelte Dateinamen vorhanden sind\n+\n+\n@@ -142,1 +151,0 @@\n-main.help.opt.extract=\\ Vorgangsmodifikatoren, die nur im Extraktionsmodus gültig sind:\\n\n","filename":"src\/jdk.jartool\/share\/classes\/sun\/tools\/jar\/resources\/jar_de.properties","additions":11,"deletions":3,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 1999, 2024, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 1999, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -61,0 +61,1 @@\n+error.release.value.toohigh.versioned.entry={0}にはクラス・ファイル・バージョン{1}がありますが、Javaプラットフォームのリリース{3}をターゲットとするにはクラス・ファイル・バージョン{2}以下が必要です\n@@ -85,0 +86,6 @@\n+warn.validator.duplicate.cen.entry=警告: {1}に対して{0}の中央ディレクトリ・エントリがありました\n+warn.validator.duplicate.loc.entry=警告: {1}に対して{0}のローカル・ファイル・ヘッダーがありました\n+warn.validator.invalid.entry.name=警告: エントリ名{0}が無効です\n+warn.validator.cen.only.entry=警告: 中央ディレクトリ・エントリ{0}と同等のものがローカル・ファイル・ヘッダーに見つかりませんでした\n+warn.validator.loc.only.entry=警告: ローカル・ファイル・ヘッダー{0}と同等のエントリが中央ディレクトリに見つかりませんでした\n+warn.validator.order.mismatch=警告: 中央ディレクトリとローカル・ファイル・ヘッダーのエントリが同じ順序ではありません\n@@ -118,1 +125,3 @@\n-main.help.opt.main.validate=\\      --validate            jarアーカイブの内容を検証します。このオプションは\\n                             複数リリースのjarアーカイブでエクスポートされたAPIが\\n                             すべての異なるリリース・バージョンで一貫していることを\\n                             検証します。\n+main.help.opt.main.validate=\\      --validate            jarアーカイブの内容を検証します。このオプションは\\n                             - 複数リリースのjarアーカイブでエクスポートされたAPIが\\n                             すべての異なるリリース・バージョンで一貫していることを\\n                             検証します。\\n                             - 無効または重複するファイル名がある場合は警告を発行します\n+\n+\n@@ -142,1 +151,0 @@\n-main.help.opt.extract=\\ 抽出モードでのみ有効な操作修飾子:\\n\n","filename":"src\/jdk.jartool\/share\/classes\/sun\/tools\/jar\/resources\/jar_ja.properties","additions":11,"deletions":3,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 1999, 2024, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 1999, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -61,0 +61,1 @@\n+error.release.value.toohigh.versioned.entry={0} 具有类文件版本 {1}，但是 Java 平台的目标发行版 {3} 需要类文件版本 {2} 或更低版本\n@@ -85,0 +86,6 @@\n+warn.validator.duplicate.cen.entry=警告：为 {1} 找到 {0} 个中央目录条目\n+warn.validator.duplicate.loc.entry=警告：为 {1} 找到 {0} 个本地文件标头\n+warn.validator.invalid.entry.name=警告：条目名称 {0} 无效\n+warn.validator.cen.only.entry=警告：在本地文件标头中找不到中央目录条目 {0} 的等效条目\n+warn.validator.loc.only.entry=警告：在中央目录中找不到本地文件标头 {0} 的等效条目\n+warn.validator.order.mismatch=警告：中央目录和本地文件标头条目的顺序不同\n@@ -118,1 +125,3 @@\n-main.help.opt.main.validate=\\      --validate             验证 jar 档案的内容。此选项\\n                             将验证由多发行版 jar 档案导出\\n                             的 API 在所有不同的发行版本中\\n                             是否一致。\n+main.help.opt.main.validate=\\      --validate             验证 jar 档案的内容。此选项：\\n                             - 验证由多发行版 jar 档案导出\\n                             的 API 在所有不同的发行版本中\\n                             是否一致。\\n                             - 如果文件名无效或重复，则发出警告\n+\n+\n@@ -142,1 +151,0 @@\n-main.help.opt.extract=\\ 仅在提取模式下有效的操作修饰符：\\n\n","filename":"src\/jdk.jartool\/share\/classes\/sun\/tools\/jar\/resources\/jar_zh_CN.properties","additions":11,"deletions":3,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -388,3 +388,1 @@\n-            var tablist = HtmlTree.DIV(HtmlStyles.tableTabs)\n-                    .put(HtmlAttr.ROLE, \"tablist\")\n-                    .put(HtmlAttr.ARIA_ORIENTATION, \"horizontal\");\n+            var tablist = HtmlTree.DIV(HtmlStyles.tableTabs);\n@@ -394,0 +392,2 @@\n+                tablist.put(HtmlAttr.ROLE, \"tablist\")\n+                       .put(HtmlAttr.ARIA_ORIENTATION, \"horizontal\");\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/Table.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -602,1 +602,1 @@\n-    Group specified elements together in overview page.\\n\\\n+    Group specified packages or modules together in overview page.\\n\\\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/standard.properties","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2010, 2024, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2010, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -100,0 +100,3 @@\n+doclet.System_property_in=Systemeigenschaft in {0}\n+doclet.External_specification_in=Externe Spezifikation in {0}\n+doclet.Section_in=Abschnitt in {0}\n@@ -119,1 +122,1 @@\n-doclet.Deprecated_API_Checkbox_All_Releases=Alle\n+doclet.Deprecated_API_Checkbox_All_Releases=Alle umschalten\n@@ -126,1 +129,1 @@\n-doclet.New_API_Checkbox_All_Releases=Alle\n+doclet.New_API_Checkbox_All_Releases=Alle umschalten\n@@ -136,0 +139,2 @@\n+doclet.Preview_Notes=Hinweise zur Vorschau-API\n+doclet.Preview_Notes_Elements=Elemente mit Vorschauhinweisen\n@@ -177,2 +182,0 @@\n-doclet.Section=Abschnitt\n-doclet.External_Specification=Externe Spezifikation\n@@ -183,1 +186,1 @@\n-doclet.System_Property=Systemeigenschaft\n+doclet.Summary_Page=Zusammenfassung (Seite)\n@@ -198,2 +201,3 @@\n-doclet.search.keyboard_info= Sie können die <STRG>- oder <CMD>-Taste zusammen mit den Pfeiltasten nach links und rechts verwenden, um zwischen Ergebnisregisterkarten auf dieser Seite zu wechseln.\n-doclet.search.browser_info= Mit der URL-Vorlage unten können Sie diese Seite als Suchmaschine in Browsern konfigurieren, die dieses Feature unterstützen. Das Feature wurde erfolgreich mit Google Chrome und Mozilla Firefox getestet. Beachten Sie, dass andere Browser dieses Feature möglicherweise nicht unterstützen oder ein anderes URL-Format erfordern.\n+# 0: [V] 1: [^] 2: [<]\/[>] (down, up, left and right arrow keys)\n+doclet.search.keyboard_info= Sie können mit den Tasten {0}\/{1} zwischen Suchergebnissen und mit den Tasten {2} zwischen Ergebnisregisterkarten wechseln.\n+doclet.search.browser_info= Die unten stehende URL-Vorlage kann nützlich sein, um diese Seite als Suchmaschine oder Bookmarklet in Browsern zu konfigurieren, die dieses Feature unterstützen.\n@@ -289,1 +293,12 @@\n-\n+doclet.help.keyboard_navigation.title=Tastaturnavigation\n+doclet.help.keyboard_navigation.intro=Dokumentationsseiten enthalten Tastenkombinationen für den einfachen Zugriff auf häufige Navigationsaufgaben.\n+# Arguments in the messages below are <kbd> elements representing various keyboard keys\n+doclet.help.keyboard_navigation.index=Verwenden Sie {0}, um auf einer beliebigen Seite auf das Sucheingabefeld zuzugreifen.\n+doclet.help.keyboard_navigation.filter=Verwenden Sie {0}, um in der Randleiste von Klassenseiten auf das Filtereingabefeld zuzugreifen.\n+doclet.help.keyboard_navigation.escape=Verwenden Sie {0}, um die Eingabe zu löschen und den Tastaturfokus von einem Eingabefeld zu entfernen.\n+doclet.help.keyboard_navigation.search=Verwenden Sie {0}\/{1}\/{2}, um Listenelemente auszuwählen, nachdem Sie einen Suchbegriff in ein Such- oder Filtereingabefeld eingegeben haben.\n+doclet.help.keyboard_navigation.tabs=Verwenden Sie {0}\/{1}, um in Zusammenfassungstabellen mit Registerkarten zwischen Registerkarten zu wechseln.\n+doclet.help.releases.head=Releasedetails\n+doclet.help.releases.body.specify.top-level=Die Details für die einzelnen Module, Packages, Klassen oder Schnittstellen enthalten normalerweise das Release, in dem die Deklaration eingeführt wurde.\n+doclet.help.releases.body.specify.member=Wenn ein Member nach der anfänglichen Einführung der umschließenden Klasse oder Schnittstelle hinzugefügt wird, enthalten die Details des Members das Release, in dem es eingeführt wurde.\n+doclet.help.releases.body.refer=Auf einigen Übersichtsseiten (\"Neue API\", \"Veraltet\") können Sie den Inhalt der Seite nach dem Release filtern, in dem die Deklaration eingeführt oder eingestellt wurde.\n@@ -504,0 +519,2 @@\n+doclet.usage.syntax-highlight.description=Syntaxhervorhebung für Codefragmente in {@snippet}-Tags\\nund <pre><code>-Elementen aktivieren.\n+\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/standard_de.properties","additions":26,"deletions":9,"binary":false,"changes":35,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2010, 2024, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2010, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -100,0 +100,3 @@\n+doclet.System_property_in={0}のシステム・プロパティ\n+doclet.External_specification_in={0}の外部仕様\n+doclet.Section_in={0}のセクション\n@@ -119,1 +122,1 @@\n-doclet.Deprecated_API_Checkbox_All_Releases=すべて\n+doclet.Deprecated_API_Checkbox_All_Releases=すべて設定\n@@ -126,1 +129,1 @@\n-doclet.New_API_Checkbox_All_Releases=すべて\n+doclet.New_API_Checkbox_All_Releases=すべて設定\n@@ -136,0 +139,2 @@\n+doclet.Preview_Notes=プレビューAPIのノート\n+doclet.Preview_Notes_Elements=プレビュー・ノートを含む要素\n@@ -177,2 +182,0 @@\n-doclet.Section=セクション\n-doclet.External_Specification=外部仕様\n@@ -183,1 +186,1 @@\n-doclet.System_Property=システム・プロパティ\n+doclet.Summary_Page=サマリー・ページ\n@@ -198,2 +201,3 @@\n-doclet.search.keyboard_info= <ctrl>または<cmd>キーを左右の矢印キーと組み合せて使用すると、このページの結果タブを切り替えることができます。\n-doclet.search.browser_info= 次のURLテンプレートは、この機能をサポートするブラウザでこのページを検索エンジンとして構成するために使用できます。Google ChromeおよびMozilla Firefoxで動作することがテストされています。他のブラウザでは、この機能がサポートされていないか、別のURL形式が必要になる場合があります。\n+# 0: [V] 1: [^] 2: [<]\/[>] (down, up, left and right arrow keys)\n+doclet.search.keyboard_info= {0}\/{1}キーを使用して検索結果間を移動し、{2}キーを使用して結果タブ間を切り替えます。\n+doclet.search.browser_info= 下のURLテンプレートは、この機能をサポートするブラウザで検索エンジンまたはブックマークとして、このページを構成するのに役立つ可能性があります。\n@@ -289,1 +293,12 @@\n-\n+doclet.help.keyboard_navigation.title=キーボード・ナビゲーション\n+doclet.help.keyboard_navigation.intro=ドキュメント・ページは、一般的なナビゲーション・タスクへのアクセスを容易にするキーボード・ショートカットを提供します。\n+# Arguments in the messages below are <kbd> elements representing various keyboard keys\n+doclet.help.keyboard_navigation.index=任意のページの検索入力フィールドにアクセスするには{0}と入力します。\n+doclet.help.keyboard_navigation.filter=クラス・ページのサイドバーのフィルタ入力フィールドにアクセスするには{0}と入力します。\n+doclet.help.keyboard_navigation.escape=任意の入力フィールドの入力をクリアし、キーボード・フォーカスを解放するには{0}と入力します。\n+doclet.help.keyboard_navigation.search=検索またはフィルタ入力フィールドに検索語を入力した後でリスト項目を選択するには{0}\/{1}\/{2}と入力します。\n+doclet.help.keyboard_navigation.tabs=タブ付きサマリー表のタブ間を切り替えるには{0}\/{1}と入力します。\n+doclet.help.releases.head=リリース詳細\n+doclet.help.releases.body.specify.top-level=各モジュール、パッケージ、クラスまたはインタフェースの詳細には、通常、宣言が導入されたリリースが含まれます。\n+doclet.help.releases.body.specify.member=含まれているクラスまたはインタフェースの初期導入後にメンバーが追加された場合、メンバーの詳細にはそれが導入されたリリースが含まれます。\n+doclet.help.releases.body.refer=一部のサマリー・ページ(新規API、非推奨)では、宣言が導入または非推奨化されたリリースに従ってページのコンテンツをフィルタできます。\n@@ -504,0 +519,2 @@\n+doclet.usage.syntax-highlight.description={@snippet}タグおよび<pre><code>要素のコード・フラグメントの\\n構文ハイライト表示を有効にします。\n+\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/standard_ja.properties","additions":26,"deletions":9,"binary":false,"changes":35,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2010, 2024, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2010, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -100,0 +100,3 @@\n+doclet.System_property_in={0} 中的系统属性\n+doclet.External_specification_in={0} 中的外部规范\n+doclet.Section_in={0} 中的节\n@@ -119,1 +122,1 @@\n-doclet.Deprecated_API_Checkbox_All_Releases=全部\n+doclet.Deprecated_API_Checkbox_All_Releases=全部切换\n@@ -126,1 +129,1 @@\n-doclet.New_API_Checkbox_All_Releases=全部\n+doclet.New_API_Checkbox_All_Releases=全部切换\n@@ -136,0 +139,2 @@\n+doclet.Preview_Notes=预览 API 注释\n+doclet.Preview_Notes_Elements=包含预览注释的元素\n@@ -177,2 +182,0 @@\n-doclet.Section=节\n-doclet.External_Specification=外部规范\n@@ -183,1 +186,1 @@\n-doclet.System_Property=系统属性\n+doclet.Summary_Page=概要页\n@@ -198,2 +201,3 @@\n-doclet.search.keyboard_info= 您可以使用 <ctrl> 或 <cmd> 键与左箭头和右箭头键组合在此页面中的结果选项卡之间切换。\n-doclet.search.browser_info= 下面的 URL 模板可用于在支持此功能的浏览器中将此页面配置为搜索引擎。已经对其进行了测试以在 Google Chrome 和 Mozilla Firefox 中使用。请注意，其他浏览器可能不支持此功能或需要不同的 URL 格式。\n+# 0: [V] 1: [^] 2: [<]\/[>] (down, up, left and right arrow keys)\n+doclet.search.keyboard_info= 使用 {0}\/{1} 键在搜索结果之间移动，使用 {2} 键在结果选项卡之间切换。\n+doclet.search.browser_info= 下面的 URL 模板可能有助于在支持此功能的浏览器中将此页面配置为搜索引擎或 bookmarklet。\n@@ -289,1 +293,12 @@\n-\n+doclet.help.keyboard_navigation.title=键盘导航\n+doclet.help.keyboard_navigation.intro=文档页面提供键盘快捷键，以方便访问常见的导航任务。\n+# Arguments in the messages below are <kbd> elements representing various keyboard keys\n+doclet.help.keyboard_navigation.index=键入 {0} 以访问任何页面中的搜索输入字段。\n+doclet.help.keyboard_navigation.filter=键入 {0} 以访问类页面子工具栏中的筛选器输入字段。\n+doclet.help.keyboard_navigation.escape=键入 {0} 以清除任何输入字段中的输入并释放键盘焦点。\n+doclet.help.keyboard_navigation.search=在搜索或筛选器输入字段中输入搜索词后，键入 {0}\/{1}\/{2} 以选择列表项。\n+doclet.help.keyboard_navigation.tabs=键入 {0}\/{1} 以在选项卡式概要表中的选项卡之间切换。\n+doclet.help.releases.head=发行版详细信息\n+doclet.help.releases.body.specify.top-level=每个模块、程序包、类或接口的详细信息通常包括引入声明的发行版。\n+doclet.help.releases.body.specify.member=当在最初引入封闭类或接口后添加成员时，成员的详细信息包括引入它的发行版。\n+doclet.help.releases.body.refer=某些概要页（新建 API、已过时）允许您根据声明被引入或已过时的发行版筛选页面的内容。\n@@ -504,0 +519,2 @@\n+doclet.usage.syntax-highlight.description=为 {@snippet} 标记和 <pre><code> 元素中的代码片段\\n启用语法突出显示。\n+\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/standard_zh_CN.properties","additions":26,"deletions":9,"binary":false,"changes":35,"status":"modified"},{"patch":"@@ -32,2 +32,2 @@\n-    --body-text-color: #282828;\n-    --block-text-color: #282828;\n+    --body-text-color: #181818;\n+    --block-text-color: #181818;\n@@ -659,1 +659,1 @@\n-.inherited-list.expanded h3 {\n+.inherited-list h3 {\n@@ -665,2 +665,2 @@\n-.inherited-list.expanded h3 a:link,\n-.inherited-list.expanded h3 a:visited {\n+.inherited-list h3 a:link,\n+.inherited-list h3 a:visited {\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/stylesheet.css","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2010, 2024, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2010, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -221,1 +221,1 @@\n-doclet.Modifier=Modifizierer\n+doclet.Modifier=Modifikator\n@@ -223,1 +223,1 @@\n-doclet.Modifier_and_Type=Modifizierer und Typ\n+doclet.Modifier_and_Type=Modifikator und Typ\n@@ -226,1 +226,1 @@\n-doclet.search_placeholder=Suchen\n+doclet.search_placeholder=In Dokumentation suchen (\"\/\" eingeben)\n@@ -229,0 +229,1 @@\n+doclet.Member=Mitglied\n@@ -244,1 +245,1 @@\n-doclet.filter_label=Filter\n+doclet.filter_label=Inhalt filtern (\".\" eingeben)\n@@ -316,0 +317,3 @@\n+# {0} is a select input containing all_modules message below and module names\n+doclet.search.in=in {0}\n+doclet.search.all_modules=allen Modulen\n@@ -322,0 +326,1 @@\n+doclet.search.linkSearchPageLabel=Gehe zur Suchseite\n@@ -356,0 +361,3 @@\n+\n+# 0: location\n+doclet.error.snippet.ambiguous.link=Snippet-Linktags: {0} und {1} überschneiden sich in {2}\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/resources\/doclets_de.properties","additions":13,"deletions":5,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2010, 2024, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2010, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -226,1 +226,1 @@\n-doclet.search_placeholder=検索\n+doclet.search_placeholder=ドキュメントの検索(\/と入力)\n@@ -229,0 +229,1 @@\n+doclet.Member=メンバー\n@@ -244,1 +245,1 @@\n-doclet.filter_label=フィルタ\n+doclet.filter_label=コンテンツのフィルタ(.と入力)\n@@ -316,0 +317,3 @@\n+# {0} is a select input containing all_modules message below and module names\n+doclet.search.in={0}内\n+doclet.search.all_modules=すべてのモジュール\n@@ -322,0 +326,1 @@\n+doclet.search.linkSearchPageLabel=検索ページに移動します\n@@ -356,0 +361,3 @@\n+\n+# 0: location\n+doclet.error.snippet.ambiguous.link=スニペット・リンク・タグ: {2}の{0}と{1}の重複\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/resources\/doclets_ja.properties","additions":11,"deletions":3,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2010, 2024, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2010, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -226,1 +226,1 @@\n-doclet.search_placeholder=搜索\n+doclet.search_placeholder=搜索文档（键入 \/）\n@@ -229,0 +229,1 @@\n+doclet.Member=成员\n@@ -244,1 +245,1 @@\n-doclet.filter_label=筛选器\n+doclet.filter_label=筛选内容（键入 .）\n@@ -316,0 +317,3 @@\n+# {0} is a select input containing all_modules message below and module names\n+doclet.search.in=在 {0} 中\n+doclet.search.all_modules=全部模块\n@@ -322,0 +326,1 @@\n+doclet.search.linkSearchPageLabel=转至搜索页\n@@ -356,0 +361,3 @@\n+\n+# 0: location\n+doclet.error.snippet.ambiguous.link=片段链接标记：{0} 和 {1} 在 {2} 中重叠\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/resources\/doclets_zh_CN.properties","additions":11,"deletions":3,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 1997, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -35,0 +35,2 @@\n+main.usage.short=Verwendung:\\n    javadoc [options] [packagenames] [sourcefiles] [@files]\n+\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/tool\/resources\/javadoc_de.properties","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 1997, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -35,0 +35,2 @@\n+main.usage.short=使用方法:\\n    javadoc [options] [packagenames] [sourcefiles] [@files]\n+\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/tool\/resources\/javadoc_ja.properties","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 1997, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -35,0 +35,2 @@\n+main.usage.short=用法：\\n    javadoc [options] [packagenames] [sourcefiles] [@files]\n+\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/tool\/resources\/javadoc_zh_CN.properties","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -513,2 +513,3 @@\n-<span id=\"option-group\">`-group` *name* *p1*`,`*p2...*<\/span>\n-:   Group the specified packages together in the Overview page.\n+<span id=\"option-group\">`-group` *name* *g1*`,`*g2...*<\/span>\n+:   Group the specified packages, or modules when documenting modular code,\n+    together in the Overview page.\n","filename":"src\/jdk.javadoc\/share\/man\/javadoc.md","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2012, 2024, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2012, 2021, Oracle and\/or its affiliates. All rights reserved.\n","filename":"src\/jdk.jconsole\/share\/classes\/sun\/tools\/jconsole\/resources\/messages_de.properties","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2023, Oracle and\/or its affiliates. All rights reserved.\n","filename":"src\/jdk.jdi\/share\/classes\/com\/sun\/tools\/example\/debug\/tty\/TTYResources_de.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -48,0 +48,1 @@\n+import jdk.jfr.internal.settings.MethodSetting;\n@@ -238,1 +239,1 @@\n-        if (MethodTimingEvent.enabled()) {\n+        if (MethodSetting.isInitialized() && MethodTimingEvent.enabled()) {\n","filename":"src\/jdk.jfr\/share\/classes\/jdk\/jfr\/internal\/JDKEvents.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -424,4 +424,1 @@\n-            Object[] array = (Object[]) o;\n-            if (array.length > 0) {\n-                return textify(array[0]) + \"[]\"; \/\/ can it be recursive?\n-            }\n+            return textifyArray((Object[])o);\n@@ -432,0 +429,18 @@\n+    private String textifyArray(Object[] array) {\n+        int length = array.length;\n+        if (length > 0) {\n+            Object element = array[0];\n+            if (element != null) {\n+                if (element instanceof String s) {\n+                    \/\/ Probably an enumeration type, e.g. ThreadState. Remove array indirection\n+                    return textify(s);\n+                }\n+                if (element.getClass().isArray()) {\n+                    Object[] subArray = (Object[]) element;\n+                    return element.getClass().getComponentType().getName() + \"[\" + subArray.length + \"]\" + \"[\" + length + \"]\";\n+                }\n+            }\n+        }\n+        return array.getClass().getComponentType().getName() + \"[\" + length + \"]\";\n+    }\n+\n","filename":"src\/jdk.jfr\/share\/classes\/jdk\/jfr\/internal\/consumer\/ChunkParser.java","additions":20,"deletions":5,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -80,1 +80,1 @@\n-                assert false : msg;\n+                \/\/ assert false : msg;\n","filename":"src\/jdk.jfr\/share\/classes\/jdk\/jfr\/internal\/consumer\/ConstantMap.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -45,0 +45,1 @@\n+    private volatile static boolean initialized;\n@@ -58,0 +59,1 @@\n+        ensureInitialized();\n@@ -60,0 +62,13 @@\n+\n+    \/\/ Expected to be called when holding external lock, so no extra\n+    \/\/ synchronization is required here.\n+    private static void ensureInitialized() {\n+        if (!initialized) {\n+            PlatformTracer.initialize();\n+            initialized = true;\n+        }\n+    }\n+\n+    public static boolean isInitialized() {\n+        return initialized;\n+    }\n","filename":"src\/jdk.jfr\/share\/classes\/jdk\/jfr\/internal\/settings\/MethodSetting.java","additions":15,"deletions":0,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -56,2 +56,0 @@\n-    private static boolean initialized;\n-\n@@ -162,1 +160,0 @@\n-        ensureInitialized();\n@@ -255,8 +252,0 @@\n-    \/\/ Expected to be called when holding external lock, so no extra\n-    \/\/ synchronization is required here.\n-    private static void ensureInitialized() {\n-        if (!initialized) {\n-            initialize();\n-            initialized = true;\n-        }\n-    }\n@@ -277,1 +266,1 @@\n-    private static void initialize() {\n+    public static void initialize() {\n","filename":"src\/jdk.jfr\/share\/classes\/jdk\/jfr\/internal\/tracing\/PlatformTracer.java","additions":1,"deletions":12,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -0,0 +1,68 @@\n+#\n+# Copyright (c) 2015, 2018, Oracle and\/or its affiliates. All rights reserved.\n+# DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+#\n+# This code is free software; you can redistribute it and\/or modify it\n+# under the terms of the GNU General Public License version 2 only, as\n+# published by the Free Software Foundation.  Oracle designates this\n+# particular file as subject to the \"Classpath\" exception as provided\n+# by Oracle in the LICENSE file that accompanied this code.\n+#\n+# This code is distributed in the hope that it will be useful, but WITHOUT\n+# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+# FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+# version 2 for more details (a copy is included in the LICENSE file that\n+# accompanied this code).\n+#\n+# You should have received a copy of the GNU General Public License version\n+# 2 along with this work; if not, write to the Free Software Foundation,\n+# Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+#\n+# Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+# or visit www.oracle.com if you need additional information or have any\n+# questions.\n+#\n+\n+main.usage.summary=Verwendung: {0} <extract | info | list | verify> <options> jimage...\\nMit -h oder --help können Sie eine Liste der möglichen Optionen aufrufen.\n+\n+main.usage=Verwendung: {0} <extract | info | list | verify> <Optionen> jimage...\\n\\n  extract  - Extrahiert alle jimage-Einträge und platziert sie in einem mit der Option\\n             --dir=<Verzeichnis> (Standardwert = \".\") angegebenen Verzeichnis.\\n\\n  info     - Gibt detaillierte Informationen aus, die im jimage-Header enthalten sind.\\n\\n  list     - Gibt die Namen aller Einträge im jimage aus. Bei Verwendung mit\\n             --verbose gibt der Befehl \"list\" auch die Eintragsgröße und Offset-Attribute aus.\\n\\n  verify   - Meldet alle .class-Einträge, die nicht als Klassen verifiziert werden.\\n\\nMögliche Optionen:\n+\n+main.usage.extract=\\  extract  - Extrahiert alle jimage-Einträge und platziert sie in einem mit der Option\\n             --dir=<Verzeichnis> (Standardwert = \".\") angegebenen Verzeichnis.\n+\n+main.usage.info=\\  info     - Gibt detaillierte Informationen aus, die im jimage-Header enthalten sind.\n+\n+main.usage.list=\\  list     - Gibt die Namen aller Einträge im jimage aus. Bei Verwendung mit\\n             --verbose gibt der Befehl \"list\" auch die Eintragsgröße und Offset-Attribute aus.\n+\n+main.usage.verify=\\  verify   - Meldet alle .class-Einträge, die nicht als Klassen verifiziert werden.\n+\n+error.prefix=Fehler:\n+warn.prefix=Warnung:\n+\n+main.opt.dir=\\          --dir                        Zielverzeichnis für extract-Direktive\n+\n+main.opt.include=\\          --include <Musterliste>     Musterliste für das Filtern von Einträgen.\n+\n+main.opt.full-version=\\          --full-version               Gibt vollständige Versionsinformationen aus\n+\n+main.opt.help=\\  -?, -h, --help                       Gibt diese Hilfemeldung aus\n+\n+main.opt.verbose=\\          --verbose                    Gibt beim Auflisten die Eintragsgröße\\n                                       und Offset-Attribute aus\n+\n+main.opt.version=\\          --version                    Gibt Versionsinformationen aus\n+\n+main.command.files=\\       @<filename>                  Liest Optionen aus der Datei\n+\n+main.opt.footer=\\nBei Optionen, die eine <Musterliste> erfordern, ist der Wert eine durch Komma getrennte\\nListe von Elementen, die jeweils eines der folgenden Formate verwenden:\\n  <Glob-Muster>\\n  glob:<Glob-Muster>\\n  regex:<Regex-Muster>\n+\n+\n+\n+err.not.a.task=Aufgabe muss einen der folgenden Werte aufweisen: <extract | info | list | verify>: {0}\n+err.missing.arg=kein Wert angegeben für {0}\n+err.ambiguous.arg=Wert für Option {0} beginnt mit \"--\", aber muss das Format {0}=<Wert> verwenden\n+err.not.a.dir=Kein Verzeichnis: {0}\n+err.not.a.jimage=Keine jimage-Datei: {0}\n+err.invalid.jimage={0} kann nicht geöffnet werden: {1}\n+err.no.jimage=Kein jimage angegeben\n+err.option.unsupported={0} nicht unterstützt: {1}\n+err.unknown.option=unbekannte Option: {0}\n+err.cannot.create.dir=Verzeichnis {0} kann nicht erstellt werden\n","filename":"src\/jdk.jlink\/share\/classes\/jdk\/tools\/jimage\/resources\/jimage_de.properties","additions":68,"deletions":0,"binary":false,"changes":68,"status":"added"},{"patch":"@@ -0,0 +1,68 @@\n+#\n+# Copyright (c) 2015, 2018, Oracle and\/or its affiliates. All rights reserved.\n+# DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+#\n+# This code is free software; you can redistribute it and\/or modify it\n+# under the terms of the GNU General Public License version 2 only, as\n+# published by the Free Software Foundation.  Oracle designates this\n+# particular file as subject to the \"Classpath\" exception as provided\n+# by Oracle in the LICENSE file that accompanied this code.\n+#\n+# This code is distributed in the hope that it will be useful, but WITHOUT\n+# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+# FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+# version 2 for more details (a copy is included in the LICENSE file that\n+# accompanied this code).\n+#\n+# You should have received a copy of the GNU General Public License version\n+# 2 along with this work; if not, write to the Free Software Foundation,\n+# Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+#\n+# Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+# or visit www.oracle.com if you need additional information or have any\n+# questions.\n+#\n+\n+main.usage.summary=使用方法: {0} <extract | info | list | verify> <options> jimage...\\n使用可能なオプションのリストについては、-hまたは--helpを使用します。\n+\n+main.usage=使用方法: {0} <extract | info | list | verify> <options> jimage...\\n\\n  extract  - すべてのjimageエントリを抽出し、--dir=<directory> (default=''.'')\\n             オプションで指定されたディレクトリに配置します。\\n\\n  info     - jimageヘッダーに含まれる詳細情報を出力します。\\n\\n  list     - jimage内のすべてのエントリの名前を出力します。--verboseと共に\\n             使用すると、listはエントリ・サイズとオフセット属性も出力します。\\n\\n  verify   - クラスとして検証しない任意の.classエントリを報告します。\\n\\n使用可能なオプションには次のものがあります:\n+\n+main.usage.extract=\\  extract  - すべてのjimageエントリを抽出し、--dir=<directory> (default='.')\\n             オプションで指定されたディレクトリに配置します。\n+\n+main.usage.info=\\  info     - jimageヘッダーに含まれる詳細情報を出力します。\n+\n+main.usage.list=\\  list     - jimage内のすべてのエントリの名前を出力します。--verboseと共に\\n             使用すると、listはエントリ・サイズとオフセット属性も出力します。\n+\n+main.usage.verify=\\  verify   - クラスとして検証しない任意の.classエントリに関するエラーを報告します。\n+\n+error.prefix=エラー:\n+warn.prefix=警告:\n+\n+main.opt.dir=\\          --dir                        抽出ディレクティブのターゲット・ディレクトリ\n+\n+main.opt.include=\\          --include <pattern-list>     フィルタリング・エントリのパターン・リスト。\n+\n+main.opt.full-version=\\          --full-version               完全なバージョン情報を出力します\n+\n+main.opt.help=\\  -?, -h, --help                       このヘルプ・メッセージを出力します\n+\n+main.opt.verbose=\\          --verbose                    エントリ・サイズとオフセット属性の出力の\\n                                       リスティング\n+\n+main.opt.version=\\          --version                    バージョン情報を出力します\n+\n+main.command.files=\\       @<filename>                  ファイルからオプションを読み取ります\n+\n+main.opt.footer=\\n<pattern-list>を必要とするオプションの場合、値は、次の形式のいずれかを使用する、\\n要素のカンマ区切りリストになります:\\n  <glob-pattern>\\n  glob:<glob-pattern>\\n  regex:<regex-pattern>\n+\n+\n+\n+err.not.a.task=タスクは<extract | info | list | verify>のいずれかである必要があります: {0}\n+err.missing.arg={0}に値が指定されていません\n+err.ambiguous.arg=オプション{0}の値が\"--\"で始まっています。{0}=<value>形式を使用する必要があります\n+err.not.a.dir=ディレクトリではありません: {0}\n+err.not.a.jimage=jimageファイルではありません: {0}\n+err.invalid.jimage={0}を開けません: {1}\n+err.no.jimage=jimageが提供されていません\n+err.option.unsupported={0}はサポートされていません: {1}\n+err.unknown.option=不明なオプション: {0}\n+err.cannot.create.dir=ディレクトリ{0}を作成できません\n","filename":"src\/jdk.jlink\/share\/classes\/jdk\/tools\/jimage\/resources\/jimage_ja.properties","additions":68,"deletions":0,"binary":false,"changes":68,"status":"added"},{"patch":"@@ -0,0 +1,68 @@\n+#\n+# Copyright (c) 2015, 2018, Oracle and\/or its affiliates. All rights reserved.\n+# DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+#\n+# This code is free software; you can redistribute it and\/or modify it\n+# under the terms of the GNU General Public License version 2 only, as\n+# published by the Free Software Foundation.  Oracle designates this\n+# particular file as subject to the \"Classpath\" exception as provided\n+# by Oracle in the LICENSE file that accompanied this code.\n+#\n+# This code is distributed in the hope that it will be useful, but WITHOUT\n+# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+# FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+# version 2 for more details (a copy is included in the LICENSE file that\n+# accompanied this code).\n+#\n+# You should have received a copy of the GNU General Public License version\n+# 2 along with this work; if not, write to the Free Software Foundation,\n+# Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+#\n+# Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+# or visit www.oracle.com if you need additional information or have any\n+# questions.\n+#\n+\n+main.usage.summary=用法：{0} <extract | info | list | verify> <options> jimage...\\n使用 -h 或 --help 列出可能的选项。\n+\n+main.usage=用法：{0} <extract | info | list | verify> <options> jimage...\\n\\n  extract  - 提取所有 jimage 条目，并将其放置在\\n             由 --dir=<directory> (default=''.'') 选项指定的目录中。\\n\\n  info     - 输出 jimage 标头中包含的详细信息。\\n\\n  list     - 输出 jimage 中所有条目的名称。与\\n             --verbose 一起使用时，list 还将输出条目大小和偏移量属性。\\n\\n  verify   - 报告任何未验证为类的 .class 条目。\\n\\n可能的选项包括：\n+\n+main.usage.extract=\\  extract  - 提取所有 jimage 条目，并将其放置在\\n             由 --dir=<directory> (default='.') 选项指定的目录中。\n+\n+main.usage.info=\\  info     - 输出 jimage 标头中包含的详细信息。\n+\n+main.usage.list=\\  list     - 输出 jimage 中所有条目的名称。与 \\n             --verbose 一起使用时，list 还将输出条目大小和偏移量属性。\n+\n+main.usage.verify=\\  verify   - 报告任何未验证为类的 .class 条目的错误。\n+\n+error.prefix=错误:\n+warn.prefix=警告:\n+\n+main.opt.dir=\\          --dir                        提取指令的目标目录\n+\n+main.opt.include=\\          --include <pattern-list>     用于筛选条目的模式列表。\n+\n+main.opt.full-version=\\          --full-version               输出完整版本信息\n+\n+main.opt.help=\\  -?, -h, --help                       输出此帮助消息\n+\n+main.opt.verbose=\\          --verbose                    列表输出条目大小和偏移量\\n                                       属性\n+\n+main.opt.version=\\          --version                    输出版本信息\n+\n+main.command.files=\\       @<文件名>                           从文件中读取选项\n+\n+main.opt.footer=\\n对于需要 <pattern-list> 的选项，值将为逗号分隔的元素列表，\\n每个元素使用以下格式之一：\\n  <glob-pattern>\\n  glob:<glob-pattern>\\n  regex:<regex-pattern>\n+\n+\n+\n+err.not.a.task=任务必须是 <extract | info | list | verify> 之一：{0}\n+err.missing.arg=没有为{0}指定值\n+err.ambiguous.arg=选项 {0} 的值以 \"--\" 开头，应使用 {0}=<value> 格式\n+err.not.a.dir=不是目录：{0}\n+err.not.a.jimage=不是 jimage 文件：{0}\n+err.invalid.jimage=无法打开 {0}： {1}\n+err.no.jimage=未提供 jimage\n+err.option.unsupported=不支持{0}: {1}\n+err.unknown.option=未知选项: {0}\n+err.cannot.create.dir=无法创建目录 {0}\n","filename":"src\/jdk.jlink\/share\/classes\/jdk\/tools\/jimage\/resources\/jimage_zh_CN.properties","additions":68,"deletions":0,"binary":false,"changes":68,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2015, 2024, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2015, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -64,1 +64,1 @@\n-main.extended.help.footer=Bei Optionen, die eine <Musterliste> erfordern, ist der Wert eine kommagetrennte\\nListe von Elementen, die jeweils eines der folgenden Formate verwenden:\\n  <Globales Muster>\\n  glob:<Globales Muster>\\n  regex:<Regex-Muster>\\n  @<Dateiname>, wobei der Dateiname der Name einer Datei mit zu verwendenden Mustern ist,\\n              ein Muster pro Zeile\\n\\n\n+main.extended.help.footer=Bei Optionen, die eine <Musterliste> erfordern, ist der Wert eine kommagetrennte\\nListe von Elementen, die jeweils eines der folgenden Formate verwenden:\\n  <Glob-Muster>\\n  glob:<Glob-Muster>\\n  regex:<Regex-Muster>\\n  @<Dateiname>, wobei der Dateiname der Name einer Datei mit zu verwendenden Mustern ist,\\n              ein Muster pro Zeile\\n\\n\n@@ -78,1 +78,1 @@\n-err.no.module.path=--module-path Option muss mit --add-modules ALL-MODULE-PATH angegeben werden\n+err.no.module.path=Option --module-path muss mit --add-modules ALL-MODULE-PATH angegeben werden\n@@ -98,0 +98,1 @@\n+err.ambiguous.arg=Wert für Option {0} beginnt mit \"--\", aber muss das Format {0}=<Wert> verwenden\n","filename":"src\/jdk.jlink\/share\/classes\/jdk\/tools\/jlink\/resources\/jlink_de.properties","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2015, 2024, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2015, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -98,0 +98,1 @@\n+err.ambiguous.arg=オプション{0}の値が\"--\"で始まっています。{0}=<value>形式を使用する必要があります\n","filename":"src\/jdk.jlink\/share\/classes\/jdk\/tools\/jlink\/resources\/jlink_ja.properties","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2015, 2024, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2015, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -98,0 +98,1 @@\n+err.ambiguous.arg=选项 {0} 的值以 \"--\" 开头，应使用 {0}=<value> 格式\n","filename":"src\/jdk.jlink\/share\/classes\/jdk\/tools\/jlink\/resources\/jlink_zh_CN.properties","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -50,1 +50,1 @@\n-main.opt.exclude=Schließt Dateien aus, die der angegebenen kommagetrennten Musterliste entsprechen. Jedes Element verwendet eines der folgenden Formate: <Globales Muster>, glob:<Globales Muster> oder regex:<Regex-Muster>\n+main.opt.exclude=Schließt Dateien aus, die der angegebenen kommagetrennten Musterliste entsprechen. Jedes Element verwendet eines der folgenden Formate: <Glob-Muster>, glob:<Glob-Muster> oder regex:<Regex-Muster>\n","filename":"src\/jdk.jlink\/share\/classes\/jdk\/tools\/jmod\/resources\/jmod_de.properties","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2017, 2024, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -182,1 +182,5 @@\n-:   Specifies the target platform.\n+:   Specifies the target platform of a JMOD file intended for a specific\n+    operating system and architecture. The value should follow\n+    the format `<os>-<arch>`, where `<os>` is the operating system\n+    and `<arch>` is the hardware architecture. Example values include\n+    `linux-amd64`, `windows-amd64`, and `macos-aarch64`.\n@@ -193,1 +197,1 @@\n-    path names. You may comment out lines by prefixinga hash symbol (`#`) to\n+    path names. You may comment out lines by prefixing a hash symbol (`#`) to\n@@ -204,2 +208,1 @@\n-      --os-arch \"x86_x64\" --os-name \"macOS\"\n-      --os-version \"10.10.5\" greetingsmod\n+      --target-platform \"macos-aarch64\" greetingsmod\n@@ -220,1 +223,1 @@\n-## jmod Create Example\n+## jmod Create Examples\n@@ -222,1 +225,1 @@\n-The following is an example of creating a JMOD file:\n+Create a JMOD file containing only compiled classes:\n@@ -225,5 +228,1 @@\n-jmod create --class-path mods\/com.greetings --cmds commands\n-  --config configfiles --header-files src\/h --libs lib\n-  --main-class com.greetings.Main --man-pages man --module-version 1.0\n-  --os-arch \"x86_x64\" --os-name \"macOS\"\n-  --os-version \"10.10.5\" greetingsmod\n+jmod create --class-path build\/foo\/classes jmods\/foo1.jmod\n@@ -231,0 +230,1 @@\n+\n@@ -235,1 +235,7 @@\n-   jmods\/foo1.jmod\n+   jmods\/foo2.jmod\n+```\n+\n+Create a JMOD file bundling compiled classes, native commands, configuration files,\n+header files, native libraries, man pages, and metadata including the\n+main class, module version, and target platform details:\n+\n@@ -237,0 +243,6 @@\n+jmod create --class-path mods\/com.greetings --cmds commands\n+  --config configfiles --header-files src\/h --libs lib\n+  --man-pages man --main-class com.greetings.Main --module-version 1.0\n+  --target-platform \"macos-aarch64\" greetingsmod\n+```\n+\n","filename":"src\/jdk.jlink\/share\/man\/jmod.md","additions":25,"deletions":13,"binary":false,"changes":38,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2017, 2022, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -47,1 +47,2 @@\n-error.invalid-install-dir=Ungültiges Installationsverzeichnis \"{0}\"\n+error.deb-invalid-value-for-package-name=Ungültiger Wert \"{0}\" für den Packagenamen.\n+error.deb-invalid-value-for-package-name.advice=Setzen Sie die Option \"--linux-package-name\" auf einen gültigen Debian-Packagenamen. Die Packagenamen dürfen nur Kleinbuchstaben (a-z), Ziffern (0-9), Pluszeichen (+), Minuszeichen (-) und Punkte (.) umfassen. Sie müssen mindestens zwei Zeichen lang sein und mit einem Buchstaben beginnen.\n@@ -49,2 +50,4 @@\n-error.invalid-value-for-package-name=Ungültiger Wert \"{0}\" für den Bundle-Namen.\n-error.invalid-value-for-package-name.advice=Setzen Sie die Option \"linux-bundle-name\" auf einen gültigen Debian-Packagenamen. Die Packagenamen dürfen nur Kleinbuchstaben (a-z), Ziffern (0-9), Pluszeichen (+), Minuszeichen (-) und Punkte (.) umfassen. Sie müssen mindestens zwei Zeichen lang sein und mit einem alphanumerischen Zeichen beginnen.\n+error.rpm-invalid-value-for-package-name=Ungültiger Wert \"{0}\" für den Packagenamen.\n+error.rpm-invalid-value-for-package-name.advice=Setzen Sie die Option \"--linux-package-name\" auf einen gültigen RPM-Packagenamen. Die Packagenamen dürfen nur Buchstaben (a-z, A-Z), Ziffern (0-9), Pluszeichen (+), Minuszeichen (-), Punkte (.) und Unterstriche (_) umfassen. Sie müssen mindestens ein Zeichen lang sein und mit einem Buchstaben beginnen.\n+\n+error.rpm-arch-not-detected=\"RPM-Architektur konnte nicht erkannt werden\"\n","filename":"src\/jdk.jpackage\/linux\/classes\/jdk\/jpackage\/internal\/resources\/LinuxResources_de.properties","additions":7,"deletions":4,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2017, 2022, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -47,1 +47,2 @@\n-error.invalid-install-dir=無効なインストール・ディレクトリ\"{0}\"\n+error.deb-invalid-value-for-package-name=パッケージ名に対して値\"{0}\"は無効です。\n+error.deb-invalid-value-for-package-name.advice=\"--linux-package-name\"オプションを有効なDebianパッケージ名に設定してください。パッケージ名には、小文字(a-z)、数字(0-9)、プラス(+)とマイナス(-)の記号およびピリオド(.)のみを含めるようにしてください。長さは2文字以上とし、文字で始める必要があります。\n@@ -49,2 +50,4 @@\n-error.invalid-value-for-package-name=バンドル名の値\"{0}\"が無効です。\n-error.invalid-value-for-package-name.advice=\"linux-bundle-name\"オプションを有効なDebianパッケージ名に設定してください。パッケージ名には、小文字(a-z)、数字(0-9)、プラス(+)とマイナス(-)の記号およびピリオド(.)のみを含めるようにしてください。長さは2文字以上とし、英数字で始める必要があります。\n+error.rpm-invalid-value-for-package-name=パッケージ名に対して値\"{0}\"は無効です。\n+error.rpm-invalid-value-for-package-name.advice=\"--linux-package-name\"オプションを有効なRPMパッケージ名に設定してください。パッケージ名には、文字(a-z、A-Z)、数字(0-9)、プラス(+)とマイナス(-)の記号、ピリオド(.)およびアダースコア(_)のみを含めるようにしてください。長さは1文字以上とし、文字で始める必要があります。\n+\n+error.rpm-arch-not-detected=\"RPM archの検出に失敗しました\"\n","filename":"src\/jdk.jpackage\/linux\/classes\/jdk\/jpackage\/internal\/resources\/LinuxResources_ja.properties","additions":7,"deletions":4,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2017, 2022, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -47,1 +47,2 @@\n-error.invalid-install-dir=安装目录 \"{0}\" 无效\n+error.deb-invalid-value-for-package-name=程序包名称的值 \"{0}\" 无效。\n+error.deb-invalid-value-for-package-name.advice=将 \"--linux-package-name\" 选项设置为有效的 Debian 程序包名称。请注意，程序包名称只能包含小写字母 (a-z)、数字 (0-9)、加号 (+) 和减号 (-) 以及句点 (.)。名称长度必须至少为两个字符并且必须以字母字符开头。\n@@ -49,2 +50,4 @@\n-error.invalid-value-for-package-name=包名的值 \"{0}\" 无效。\n-error.invalid-value-for-package-name.advice=将 \"linux-bundle-name\" 选项设置为有效的 Debian 程序包名称。请注意，程序包名称只能包含小写字母 (a-z)、数字 (0-9)、加号 (+) 和减号 (-) 以及句点 (.)。名称长度必须至少为两个字符并且必须以字母数字字符开头。\n+error.rpm-invalid-value-for-package-name=程序包名称的值 \"{0}\" 无效。\n+error.rpm-invalid-value-for-package-name.advice=将 \"--linux-package-name\" 选项设置为有效的 RPM 程序包名称。请注意，程序包名称只能包含字母 (a-z, A-Z)、数字 (0-9)、加号 (+) 和减号 (-)、句点 (.) 以及下划线 (_)。名称长度必须至少为一个字符并且必须以字母开头。\n+\n+error.rpm-arch-not-detected=\"无法检测 RPM 体系结构\"\n","filename":"src\/jdk.jpackage\/linux\/classes\/jdk\/jpackage\/internal\/resources\/LinuxResources_zh_CN.properties","additions":7,"deletions":4,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2017, 2024, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,4 +37,0 @@\n-error.no-app-signing-key=Kein Signaturschlüssel für Mac App Store-App\n-error.no-app-signing-key.advice=Installieren Sie Ihre App-Signaturschlüssel mit XCode in Ihrem Mac-Schlüsselbund.\n-error.no-pkg-signing-key=Kein Signaturschlüssel für Mac App Store-Installationsprogramm\n-error.no-pkg-signing-key.advice=Installieren Sie Ihre App-Signaturschlüssel mit XCode in Ihrem Mac-Schlüsselbund.\n@@ -54,1 +50,0 @@\n-resource.post-install-script=Auszuführendes Skript nach dem Auffüllen des Anwendungsimages\n@@ -75,6 +70,0 @@\n-message.app-image-dir-does-not-exist=Angegebenes Anwendungsimageverzeichnis {0}: {1} ist nicht vorhanden.\n-message.app-image-dir-does-not-exist.advice=Bestätigen Sie, dass der Wert für {0} vorhanden ist.\n-message.app-image-requires-app-name=Beim Verwenden eines internen Anwendungsimages müssen Sie den Anwendungsnamen angeben.\n-message.app-image-requires-app-name.advice=Legen Sie den Anwendungsnamen mit dem CLI-Kennzeichen -name, dem fx:application\/@name ANT-Attribut oder dem Bundler-Argument \"appName\" fest.\n-message.app-image-requires-identifier=ID kann nicht aus Anwendungsimage extrahiert werden.\n-message.app-image-requires-identifier.advice=Verwenden Sie \"--verbose\" für eine erweiterte Fehlermeldung, oder geben Sie sie mit \"--mac-package-identifier\" an.\n@@ -94,1 +83,0 @@\n-message.install-dir-ignored=Warnung: \"--install-dir\" wird von DMG nicht unterstützt. Stattdessen wird standardmäßig \/Applications verwendet.\n","filename":"src\/jdk.jpackage\/macosx\/classes\/jdk\/jpackage\/internal\/resources\/MacResources_de.properties","additions":1,"deletions":13,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2017, 2024, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,4 +37,0 @@\n-error.no-app-signing-key=Mac App Storeアプリケーションの署名キーがありません\n-error.no-app-signing-key.advice=XCodeを使用してアプリケーションの署名キーをMacキーチェーンにインストールします。\n-error.no-pkg-signing-key=Mac App Storeインストーラの署名キーがありません\n-error.no-pkg-signing-key.advice=XCodeを使用してアプリケーションの署名キーをMacキーチェーンにインストールします。\n@@ -54,1 +50,0 @@\n-resource.post-install-script=アプリケーション・イメージを移入した後に実行するスクリプト\n@@ -75,6 +70,0 @@\n-message.app-image-dir-does-not-exist=指定されたアプリケーション・イメージ・ディレクトリ {0}: {1}は存在しません。\n-message.app-image-dir-does-not-exist.advice={0}の値が存在することを確認してください\n-message.app-image-requires-app-name=外部アプリケーション・イメージを使用する場合、アプリケーション名を指定する必要があります。\n-message.app-image-requires-app-name.advice=-name CLIフラグ、fx:application\/@name ANT属性または'appName'バンドラ引数でアプリケーション名を設定します。\n-message.app-image-requires-identifier=アプリケーション・イメージから識別子を抽出できません。\n-message.app-image-requires-identifier.advice=拡張エラー・メッセージに\"--verbose\"を使用するか、\"--mac-package-identifier\"を使用して指定します。\n@@ -94,1 +83,0 @@\n-message.install-dir-ignored=警告: \"--install-dir\"はDMGでサポートされていません。\/Applicationsにデフォルト設定されます。\n","filename":"src\/jdk.jpackage\/macosx\/classes\/jdk\/jpackage\/internal\/resources\/MacResources_ja.properties","additions":1,"deletions":13,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2017, 2024, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,4 +37,0 @@\n-error.no-app-signing-key=无 Mac App Store 应用程序签名密钥\n-error.no-app-signing-key.advice=使用 XCode 将应用程序签名密钥安装到 Mac 密钥链中。\n-error.no-pkg-signing-key=无 Mac App Store 安装程序签名密钥\n-error.no-pkg-signing-key.advice=使用 XCode 将应用程序签名密钥安装到 Mac 密钥链中。\n@@ -54,1 +50,0 @@\n-resource.post-install-script=要在填充应用程序映像之后运行的脚本\n@@ -75,6 +70,0 @@\n-message.app-image-dir-does-not-exist=指定的应用程序映像目录 {0}：{1} 不存在。\n-message.app-image-dir-does-not-exist.advice=确认 {0} 的值是否存在。\n-message.app-image-requires-app-name=使用外部应用程序映像时, 必须指定应用程序名称。\n-message.app-image-requires-app-name.advice=通过 -name CLI 标记, fx:application\/@name ANT 属性或通过 'appName' 打包程序参数设置应用程序名称。\n-message.app-image-requires-identifier=无法从应用程序映像提取标识符。\n-message.app-image-requires-identifier.advice=请使用 \"--verbose\" 获取扩展错误消息，或者通过 \"--mac-package-identifier\" 指定它。\n@@ -94,1 +83,0 @@\n-message.install-dir-ignored=警告：\"--install-dir\" 不受 DMG 支持，将默认为 \/Applications。\n","filename":"src\/jdk.jpackage\/macosx\/classes\/jdk\/jpackage\/internal\/resources\/MacResources_zh_CN.properties","additions":1,"deletions":13,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -36,1 +36,1 @@\n-MSG_Help_linux_install=\\  --linux-package-name <Packagename>\\n          Name für das Linux-Package, Standardwert: Anwendungsname\\n  --linux-deb-maintainer <E-Mail-Adresse>\\n          Maintainer für .deb-Package\\n  --linux-menu-group <Menügruppenname>\\n          Menügruppe, in der diese Anwendung abgelegt wird\\n  --linux-package-deps <package-dep-string>\\n          Erforderliche Packages oder Funktionen für die Anwendung\\n  --linux-rpm-license-type <Typzeichenfolge>\\n          Typ der Lizenz (\"License: <Wert>\" der RPM-SPEC-Datei)\\n  --linux-app-release <Releasewert>\\n          Releasewert der RPM-SPEC-Datei <Name> oder \\n          Debian-Revisionswert der DEB-Kontrolldatei\\n  --linux-app-category <Kategoriewert>\\n          Gruppenwert der RPM-SPEC-Datei <Name> oder \\n          Abschnittswert der DEB-Kontrolldatei\\n  --linux-shortcut\\n          Erstellt eine Verknüpfung für die Anwendung.\\n\n+MSG_Help_linux_install=\\  --linux-package-name <Packagename>\\n          Name für das Linux-Package, Standardwert: Anwendungsname\\n  --linux-deb-maintainer <E-Mail-Adresse>\\n          Maintainer für .deb-Package\\n  --linux-menu-group <Menügruppenname>\\n          Menügruppe, in der diese Anwendung abgelegt wird\\n  --linux-package-deps <package-dep-string>\\n          Erforderliche Packages oder Funktionen für die Anwendung\\n  --linux-rpm-license-type <Typzeichenfolge>\\n          Typ der Lizenz (\"License: <Wert>\" der RPM-SPEC-Datei)\\n  --linux-app-release <Releasewert>\\n          Releasewert der RPM-Datei <Name>.spec oder \\n          Debian-Revisionswert der DEB-Kontrolldatei\\n  --linux-app-category <Kategoriewert>\\n          Gruppenwert der RPM-Datei <Name>.spec oder \\n          Abschnittswert der DEB-Kontrolldatei\\n  --linux-shortcut\\n          Erstellt einen Shortcut für die Anwendung.\\n\n","filename":"src\/jdk.jpackage\/share\/classes\/jdk\/jpackage\/internal\/resources\/HelpResources_de.properties","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2017, 2023, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,0 +33,2 @@\n+resource.post-app-image-script=Auszuführendes Skript nach dem Auffüllen des Anwendungsimages\n+\n@@ -38,2 +40,0 @@\n-message.app-image-dir-does-not-exist=Angegebenes Anwendungsimageverzeichnis {0}: {1} ist nicht vorhanden\n-message.app-image-dir-does-not-exist.advice=Bestätigen Sie, dass der Wert für {0} vorhanden ist\n@@ -41,1 +41,0 @@\n-message.runtime-image-dir-does-not-exist.advice=Bestätigen Sie, dass der Wert für {0} vorhanden ist\n@@ -48,3 +47,3 @@\n-error.version-string-empty=\"Version darf keine leere Zeichenfolge sein\"\n-error.version-string-zero-length-component=\"Version [{0}] enthält eine Komponente mit einer Nulllänge\"\n-error.version-string-invalid-component=\"Version [{0}] enthält ungültige Komponente [{1}]\"\n+error.version-string-empty=Version darf keine leere Zeichenfolge sein\n+error.version-string-zero-length-component=Version [{0}] enthält eine Komponente mit Nulllänge\n+error.version-string-invalid-component=Version [{0}] enthält ungültige Komponente [{1}]\n@@ -64,1 +63,0 @@\n-error.no-main-jar-parameter=\"--main-jar-Parameter für nicht modulare Anwendung fehlt\"\n@@ -78,0 +76,1 @@\n+error.no.name.advice=Geben Sie den Namen mit --name an\n@@ -82,1 +81,3 @@\n-error.invalid-app-image=Fehler: app-image-Verzeichnis \"{0}\" wurde von einer anderen jpackage-Version generiert, oder \"{1}\" ist nicht wohlgeformt\n+error.invalid-app-image=Fehler: app-image-Verzeichnis \"{0}\" wurde von einer anderen jpackage-Version generiert, oder Datei \"{1}\" ist nicht wohlgeformt\n+\n+error.invalid-install-dir=Ungültiges Installationsverzeichnis \"{0}\"\n@@ -99,1 +100,0 @@\n-ERR_MissingAppResources=Fehler: Keine Anwendungs-JAR-Dateien gefunden\n@@ -103,1 +103,0 @@\n-ERR_NoJreInstallerName=Fehler: Für JRE-Installationsprogramme ist ein Namensparameter erforderlich\n@@ -113,2 +112,0 @@\n-ERR_InputNotDirectory=Fehler: Das angegebene Eingabeverzeichnis ist kein Verzeichnis: {0}\n-ERR_CannotReadInputDir=Fehler: Keine Berechtigung zum Lesen aus Eingabeverzeichnis vorhanden: {0}\n","filename":"src\/jdk.jpackage\/share\/classes\/jdk\/jpackage\/internal\/resources\/MainResources_de.properties","additions":10,"deletions":13,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2017, 2023, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,0 +33,2 @@\n+resource.post-app-image-script=アプリケーション・イメージを移入した後に実行するスクリプト\n+\n@@ -38,2 +40,0 @@\n-message.app-image-dir-does-not-exist=指定されたアプリケーション・イメージ・ディレクトリ{0}: {1}は存在しません\n-message.app-image-dir-does-not-exist.advice={0}の値が存在することを確認してください\n@@ -41,1 +41,0 @@\n-message.runtime-image-dir-does-not-exist.advice={0}の値が存在することを確認してください\n@@ -48,3 +47,3 @@\n-error.version-string-empty=\"バージョンを空の文字列にすることはできません\"\n-error.version-string-zero-length-component=\"バージョン[{0}]に長さゼロのコンポーネントが含まれます\"\n-error.version-string-invalid-component=\"バージョン[{0}]に無効なコンポーネント[{1}]が含まれます\"\n+error.version-string-empty=バージョンを空の文字列にすることはできません\n+error.version-string-zero-length-component=バージョン[{0}]に長さゼロのコンポーネントが含まれます\n+error.version-string-invalid-component=バージョン[{0}]に無効なコンポーネント[{1}]が含まれます\n@@ -64,1 +63,0 @@\n-error.no-main-jar-parameter=\"非モジュラ・アプリケーションに--main-jarパラメータがありません\"\n@@ -78,0 +76,1 @@\n+error.no.name.advice=--nameで名前を指定します\n@@ -82,1 +81,3 @@\n-error.invalid-app-image=エラー: app-imageディレクトリ\"{0}\"は、別のjpackageバージョンまたは不正な\"{1}\"で生成されました\n+error.invalid-app-image=エラー: app-imageディレクトリ\"{0}\"は、別のjpackageバージョンまたは不正な\"{1}\"ファイルで生成されました\n+\n+error.invalid-install-dir=無効なインストール・ディレクトリ\"{0}\"\n@@ -99,1 +100,0 @@\n-ERR_MissingAppResources=エラー: アプリケーションjarが見つかりませんでした\n@@ -103,1 +103,0 @@\n-ERR_NoJreInstallerName=エラー: Jreインストーラには名前パラメータが必要です\n@@ -113,2 +112,0 @@\n-ERR_InputNotDirectory=エラー: 指定された入力ディレクトリはディレクトリではありません: {0}\n-ERR_CannotReadInputDir=エラー: 入力ディレクトリから読み取る権限がありません: {0}\n","filename":"src\/jdk.jpackage\/share\/classes\/jdk\/jpackage\/internal\/resources\/MainResources_ja.properties","additions":10,"deletions":13,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2017, 2023, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,0 +33,2 @@\n+resource.post-app-image-script=要在填充应用程序映像之后运行的脚本\n+\n@@ -38,2 +40,0 @@\n-message.app-image-dir-does-not-exist=指定的应用程序映像目录 {0}：{1} 不存在\n-message.app-image-dir-does-not-exist.advice=确认 {0} 的值是否存在\n@@ -41,1 +41,0 @@\n-message.runtime-image-dir-does-not-exist.advice=确认 {0} 的值是否存在\n@@ -48,3 +47,3 @@\n-error.version-string-empty=\"版本不能为空字符串\"\n-error.version-string-zero-length-component=\"版本 [{0}] 包含长度为零的组件\"\n-error.version-string-invalid-component=\"版本 [{0}] 包含无效组件 [{1}]\"\n+error.version-string-empty=版本不能为空字符串\n+error.version-string-zero-length-component=版本 [{0}] 包含长度为零的组件\n+error.version-string-invalid-component=版本 [{0}] 包含无效组件 [{1}]\n@@ -64,1 +63,0 @@\n-error.no-main-jar-parameter=\"非模块化应用程序缺少 --main-jar 参数\"\n@@ -78,0 +76,1 @@\n+error.no.name.advice=使用 --name 指定名称\n@@ -82,1 +81,3 @@\n-error.invalid-app-image=错误：另一个 jpackage 版本或格式错误的 \"{1}\" 生成了 app-image 目录 \"{0}\"\n+error.invalid-app-image=错误：另一个 jpackage 版本或格式错误的 \"{1}\" 文件生成了 app-image 目录 \"{0}\"\n+\n+error.invalid-install-dir=安装目录 \"{0}\" 无效\n@@ -99,1 +100,0 @@\n-ERR_MissingAppResources=错误: 找不到应用程序 jar\n@@ -103,1 +103,0 @@\n-ERR_NoJreInstallerName=错误：Jre 安装程序需要一个名称参数\n@@ -113,2 +112,0 @@\n-ERR_InputNotDirectory=错误：指定的输入目录不是目录：{0}\n-ERR_CannotReadInputDir=错误：无权从输入目录读取：{0}\n","filename":"src\/jdk.jpackage\/share\/classes\/jdk\/jpackage\/internal\/resources\/MainResources_zh_CN.properties","additions":10,"deletions":13,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -19,1 +19,1 @@\n-  <String Id=\"OsConditionMessage\">[ProductName][ProductVersion] is not supported on this version of Windows<\/String>\r\n+  <String Id=\"OsConditionMessage\">[ProductName][ProductVersion] wird unter dieser Windows-Version nicht unterstützt<\/String>\r\n","filename":"src\/jdk.jpackage\/windows\/classes\/jdk\/jpackage\/internal\/resources\/MsiInstallerStrings_de.wxl","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -19,1 +19,1 @@\n-  <String Id=\"OsConditionMessage\">[ProductName][ProductVersion] is not supported on this version of Windows<\/String>\r\n+  <String Id=\"OsConditionMessage\">[ProductName][ProductVersion]は、 このバージョンのWindowsでサポートされていません<\/String>\r\n","filename":"src\/jdk.jpackage\/windows\/classes\/jdk\/jpackage\/internal\/resources\/MsiInstallerStrings_ja.wxl","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -19,1 +19,1 @@\n-  <String Id=\"OsConditionMessage\">[ProductName][ProductVersion] is not supported on this version of Windows<\/String>\r\n+  <String Id=\"OsConditionMessage\">此版本的 Windows 不支持 [ProductName][ProductVersion]<\/String>\r\n","filename":"src\/jdk.jpackage\/windows\/classes\/jdk\/jpackage\/internal\/resources\/MsiInstallerStrings_zh_CN.wxl","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2017, 2024, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -35,1 +35,0 @@\n-resource.post-app-image-script=Auszuführendes Skript nach dem Auffüllen des Anwendungsimages\n@@ -44,0 +43,1 @@\n+resource.installer-exe=Ausführbares Installationsprogramm\n@@ -70,1 +70,0 @@\n-message.version-string-too-many-components=Versionszeichenfolge kann bis zu 3 Komponenten aufweisen: major.minor.build.\n","filename":"src\/jdk.jpackage\/windows\/classes\/jdk\/jpackage\/internal\/resources\/WinResources_de.properties","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2017, 2024, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -35,1 +35,0 @@\n-resource.post-app-image-script=アプリケーション・イメージを移入した後に実行するスクリプト\n@@ -44,0 +43,1 @@\n+resource.installer-exe=インストーラ実行可能ファイル\n@@ -70,1 +70,0 @@\n-message.version-string-too-many-components=バージョン文字列には、コンポーネントを3つ(メジャー.マイナー.ビルド)まで含めることができます。\n","filename":"src\/jdk.jpackage\/windows\/classes\/jdk\/jpackage\/internal\/resources\/WinResources_ja.properties","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2017, 2024, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -35,1 +35,0 @@\n-resource.post-app-image-script=要在填充应用程序映像之后运行的脚本\n@@ -44,0 +43,1 @@\n+resource.installer-exe=安装程序可执行文件\n@@ -70,1 +70,0 @@\n-message.version-string-too-many-components=版本字符串最多可以具有 3 个组成部分 - major.minor.build。\n","filename":"src\/jdk.jpackage\/windows\/classes\/jdk\/jpackage\/internal\/resources\/WinResources_zh_CN.properties","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -157,0 +157,1 @@\n+jshell.err.incomplete.input = Unvollständige Eingabe: {0}\n","filename":"src\/jdk.jshell\/share\/classes\/jdk\/internal\/jshell\/tool\/resources\/l10n_de.properties","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -157,0 +157,1 @@\n+jshell.err.incomplete.input = 不完全な入力: {0}\n","filename":"src\/jdk.jshell\/share\/classes\/jdk\/internal\/jshell\/tool\/resources\/l10n_ja.properties","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -157,0 +157,1 @@\n+jshell.err.incomplete.input = 输入不完整：{0}\n","filename":"src\/jdk.jshell\/share\/classes\/jdk\/internal\/jshell\/tool\/resources\/l10n_zh_CN.properties","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -161,1 +161,2 @@\n-         * @spec https:\/\/datatracker.ietf.org\/doc\/html\/rfc8259 JavaScript Object Notation\n+         * @spec https:\/\/datatracker.ietf.org\/doc\/html\/rfc8259 RFC 8259: The JavaScript\n+         *      Object Notation (JSON) Data Interchange Format\n","filename":"src\/jdk.management\/share\/classes\/com\/sun\/management\/HotSpotDiagnosticMXBean.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -1608,1 +1608,1 @@\n-               \"eret\", \"drps\", \"isb\",])\n+               \"eret\", \"drps\", \"isb\", \"sb\",])\n","filename":"test\/hotspot\/gtest\/aarch64\/aarch64-asmtest.py","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -190,0 +190,1 @@\n+    __ sb();                                           \/\/       sb\n@@ -1440,7 +1441,7 @@\n-    0x14000000,     0x17ffffd7,     0x140004af,     0x94000000,\n-    0x97ffffd4,     0x940004ac,     0x3400000a,     0x34fffa2a,\n-    0x3400952a,     0x35000008,     0x35fff9c8,     0x350094c8,\n-    0xb400000b,     0xb4fff96b,     0xb400946b,     0xb500001d,\n-    0xb5fff91d,     0xb500941d,     0x10000013,     0x10fff8b3,\n-    0x100093b3,     0x90000013,     0x36300016,     0x3637f836,\n-    0x36309336,     0x3758000c,     0x375ff7cc,     0x375892cc,\n+    0x14000000,     0x17ffffd7,     0x140004b0,     0x94000000,\n+    0x97ffffd4,     0x940004ad,     0x3400000a,     0x34fffa2a,\n+    0x3400954a,     0x35000008,     0x35fff9c8,     0x350094e8,\n+    0xb400000b,     0xb4fff96b,     0xb400948b,     0xb500001d,\n+    0xb5fff91d,     0xb500943d,     0x10000013,     0x10fff8b3,\n+    0x100093d3,     0x90000013,     0x36300016,     0x3637f836,\n+    0x36309356,     0x3758000c,     0x375ff7cc,     0x375892ec,\n@@ -1451,13 +1452,13 @@\n-    0x540090a0,     0x54000001,     0x54fff541,     0x54009041,\n-    0x54000002,     0x54fff4e2,     0x54008fe2,     0x54000002,\n-    0x54fff482,     0x54008f82,     0x54000003,     0x54fff423,\n-    0x54008f23,     0x54000003,     0x54fff3c3,     0x54008ec3,\n-    0x54000004,     0x54fff364,     0x54008e64,     0x54000005,\n-    0x54fff305,     0x54008e05,     0x54000006,     0x54fff2a6,\n-    0x54008da6,     0x54000007,     0x54fff247,     0x54008d47,\n-    0x54000008,     0x54fff1e8,     0x54008ce8,     0x54000009,\n-    0x54fff189,     0x54008c89,     0x5400000a,     0x54fff12a,\n-    0x54008c2a,     0x5400000b,     0x54fff0cb,     0x54008bcb,\n-    0x5400000c,     0x54fff06c,     0x54008b6c,     0x5400000d,\n-    0x54fff00d,     0x54008b0d,     0x5400000e,     0x54ffefae,\n-    0x54008aae,     0x5400000f,     0x54ffef4f,     0x54008a4f,\n+    0x540090c0,     0x54000001,     0x54fff541,     0x54009061,\n+    0x54000002,     0x54fff4e2,     0x54009002,     0x54000002,\n+    0x54fff482,     0x54008fa2,     0x54000003,     0x54fff423,\n+    0x54008f43,     0x54000003,     0x54fff3c3,     0x54008ee3,\n+    0x54000004,     0x54fff364,     0x54008e84,     0x54000005,\n+    0x54fff305,     0x54008e25,     0x54000006,     0x54fff2a6,\n+    0x54008dc6,     0x54000007,     0x54fff247,     0x54008d67,\n+    0x54000008,     0x54fff1e8,     0x54008d08,     0x54000009,\n+    0x54fff189,     0x54008ca9,     0x5400000a,     0x54fff12a,\n+    0x54008c4a,     0x5400000b,     0x54fff0cb,     0x54008beb,\n+    0x5400000c,     0x54fff06c,     0x54008b8c,     0x5400000d,\n+    0x54fff00d,     0x54008b2d,     0x5400000e,     0x54ffefae,\n+    0x54008ace,     0x5400000f,     0x54ffef4f,     0x54008a6f,\n@@ -1470,271 +1471,271 @@\n-    0xd5033fdf,     0xd503207f,     0xd50320ff,     0xd5033e9f,\n-    0xd50332bf,     0xd61f0200,     0xd63f0280,     0xdac123ea,\n-    0xdac127fb,     0xdac12be8,     0xdac12fe0,     0xdac133e1,\n-    0xdac137f5,     0xdac13bf1,     0xdac13ffd,     0xdac147fd,\n-    0xd61f0b9f,     0xd61f0c3f,     0xd63f0aff,     0xd63f0ebf,\n-    0xd51b4434,     0xd51b4216,     0xd53b443b,     0xd53b4213,\n-    0xd53b00eb,     0xd53b0030,     0xdac143e6,     0xc8117c80,\n-    0xc80afed8,     0xc85f7e6a,     0xc85ffca1,     0xc89ffd1e,\n-    0xc8dffe2c,     0x88097cee,     0x8801fe05,     0x885f7d82,\n-    0x885ffd8a,     0x889fff83,     0x88dfff4e,     0x481e7dca,\n-    0x4815fd2d,     0x485f7f76,     0x485ffe7c,     0x489fffcb,\n-    0x48dffc53,     0x08027c37,     0x0800fe0c,     0x085f7ded,\n-    0x085ffeb1,     0x089ffd6d,     0x08dffd1e,     0xc87f3578,\n-    0xc87feaa1,     0xc83b506d,     0xc82c87a6,     0x887f1166,\n-    0x887f93d0,     0x883e32a4,     0x883bf12f,     0xf80011f9,\n-    0xb81b1022,     0x381ea354,     0x79002fd7,     0xf85cf39a,\n-    0xb8580309,     0x385e218c,     0x784051e1,     0x389e11d8,\n-    0x789fa1f8,     0x79c01865,     0xb881131b,     0xfc5dd3ad,\n-    0xbc5d1137,     0xfc00900b,     0xbc181015,     0xf818ec7d,\n-    0xb81b8c91,     0x381efc40,     0x78007c3d,     0xf857beb0,\n-    0xb8413dd4,     0x385fddd6,     0x78409e2f,     0x389eddea,\n-    0x789e7d94,     0x78de3d55,     0xb8805c13,     0xfc5cadc0,\n-    0xbc428c23,     0xfc1a2dc4,     0xbc1caf92,     0xf81475f6,\n-    0xb81f95d1,     0x381e757e,     0x78014561,     0xf8402436,\n-    0xb85896e2,     0x385f4763,     0x785db4f0,     0x3880374f,\n-    0x789e25e7,     0x78dd0563,     0xb88166f9,     0xfc529540,\n-    0xbc4374d3,     0xfc1166ae,     0xbc1ba6c0,     0xf820ea7b,\n-    0xb82d68c8,     0x38367a04,     0x782f4b59,     0xf878c8a4,\n-    0xb8674a24,     0x386b78f1,     0x78776bc0,     0x38a15aca,\n-    0x78bedbd5,     0x78fcd94b,     0xb8aa4a7c,     0xfc6ecbbe,\n-    0xbc65d8a8,     0xfc2de919,     0xbc3a7b11,     0xf91f1193,\n-    0xb91ed5f7,     0x391ec9bd,     0x79182ceb,     0xf95d4b0a,\n-    0xb9581010,     0x395fc034,     0x795fb221,     0x399d8731,\n-    0x799efb3b,     0x79dd1a2e,     0xb998e4ea,     0xfd583723,\n-    0xbd5ea12c,     0xfd18dc38,     0xbd1b0e83,     0x58ffdaa2,\n-    0x1800001d,     0xf885d1c0,     0xd8ffda40,     0xf8a77820,\n-    0xf9980220,     0x1a030301,     0x3a140311,     0x5a0d000b,\n-    0x7a07015c,     0x9a1001e4,     0xba140182,     0xda0d01bd,\n-    0xfa0c00ce,     0x0b31f194,     0x2b206d7b,     0xcb29f027,\n-    0x6b210f63,     0x8b2cb34d,     0xab2a88b1,     0xcb2f511e,\n-    0xeb3332f3,     0x3a4533aa,     0x7a4d312b,     0xba442146,\n-    0xfa42818c,     0x3a466a02,     0x7a4b68ed,     0xba4a9b6b,\n-    0xfa4dd86d,     0x1a8a637a,     0x1a9cd6aa,     0x5a9bd137,\n-    0x5a8fd7aa,     0x9a95233e,     0x9a95c620,     0xda9422b0,\n-    0xda8397d3,     0x5ac00173,     0x5ac00418,     0x5ac00b3b,\n-    0x5ac0106e,     0x5ac0162e,     0xdac001e7,     0xdac00798,\n-    0xdac00b31,     0xdac00f42,     0xdac010bc,     0xdac01759,\n-    0xdac1021b,     0xdac104d1,     0xdac10995,     0xdac10c80,\n-    0xdac1136c,     0xdac11791,     0xdac1185c,     0xdac11d51,\n-    0xd71f09ee,     0xd71f0dc3,     0xd73f0b2f,     0xd73f0e6e,\n-    0x1ac40a05,     0x1ac40f3a,     0x1acc2042,     0x1ac8263d,\n-    0x1ac42867,     0x1ada2c99,     0x9ad10899,     0x9ad10f40,\n-    0x9ad521f7,     0x9adb263c,     0x9ac0286a,     0x9ac92f27,\n-    0x9bdd7de6,     0x9b427d4f,     0x1b0b2cf1,     0x1b1ddcf7,\n-    0x9b0b2f6e,     0x9b0cbf04,     0x9b2b728e,     0x9b2cdd6d,\n-    0x9bae275e,     0x9ba7954d,     0x7ec315fe,     0x1ef0098c,\n-    0x1ef21bff,     0x1ef02ab3,     0x1ef5394f,     0x1efc4942,\n-    0x1eff5bc7,     0x1ee28832,     0x7ea3d546,     0x1e270979,\n-    0x1e201981,     0x1e3d2a63,     0x1e263ae6,     0x1e3b4b80,\n-    0x1e2758a2,     0x1e39899d,     0x7ef8d58d,     0x1e720913,\n-    0x1e751b56,     0x1e622a74,     0x1e683ade,     0x1e754a76,\n-    0x1e755a4c,     0x1e638a06,     0x1fc373a3,     0x1f0a35cf,\n-    0x1f0aea4c,     0x1f2f74e7,     0x1f2032e0,     0x1f4d21d8,\n-    0x1f49d0ef,     0x1f7f43b3,     0x1f705522,     0x1e20409e,\n-    0x1e20c361,     0x1e214319,     0x1e21c2ae,     0x1e22c0cd,\n-    0x1e23c32c,     0x1ee243d9,     0x1e6042bc,     0x1e60c2f0,\n-    0x1e6143a5,     0x1e61c276,     0x1e62428d,     0x1ee1c393,\n-    0x1e3800d1,     0x9e3800ed,     0x1e78035c,     0x9e7800d1,\n-    0x1e220081,     0x9e22028e,     0x1e6202a7,     0x9e6202fb,\n-    0x1e24028d,     0x9e64039e,     0x1e3002aa,     0x9e700225,\n-    0x1e2601cb,     0x9e6602ad,     0x1e2701db,     0x9e6702e4,\n-    0x1e3e2300,     0x1e6e2180,     0x1e202228,     0x1e602388,\n-    0x29021b40,     0x297c78c0,     0x69660970,     0xa908018f,\n-    0xa9427ae7,     0x29a03cfa,     0x29fc3d4b,     0x69c84033,\n-    0xa988240e,     0xa9fa0d9b,     0x28a02d88,     0x28c8408a,\n-    0x68f87a6a,     0xa8ba09f8,     0xa8c52a18,     0x280257be,\n-    0x28727948,     0xa83868de,     0xa8440a98,     0x0c40733f,\n-    0x4cdfa1e5,     0x0ccd6cea,     0x4cdf260d,     0x0d40c227,\n-    0x4ddfcb30,     0x0dc7cc6b,     0x4c408ced,     0x0cdf8769,\n-    0x4d60c346,     0x0dffca17,     0x4de8cda6,     0x4cda4834,\n-    0x0c4049ef,     0x4d40e6dd,     0x4ddfe946,     0x0dcfeccf,\n-    0x4cdf0546,     0x0cc7006b,     0x0d60e32c,     0x0dffe5eb,\n-    0x0dfce8de,     0x0e31bb9b,     0x4e31bbbc,     0x0e71b841,\n-    0x4e71bbbc,     0x4eb1b841,     0x0e30aab4,     0x4e30abdd,\n-    0x0e70aa30,     0x4e70a9cd,     0x4eb0a96a,     0x6e30fbdd,\n-    0x0e31abdd,     0x2e31aa93,     0x4e31aaf6,     0x6e31a96a,\n-    0x0e71a8a4,     0x2e71a81f,     0x4e71aad5,     0x6e71a928,\n-    0x4eb1a81f,     0x6eb1aa93,     0x6eb0f96a,     0x7e30fbbc,\n-    0x7e70f862,     0x7eb0fb59,     0x7ef0f8c5,     0x0ea0c883,\n-    0x4ea0c928,     0x4ee0caf6,     0x2ea0ca93,     0x6ea0c9cd,\n-    0x6ee0c8c5,     0x0ea0dbdd,     0x4ea0db38,     0x4ee0dad5,\n-    0x0ea0eb7a,     0x4ea0eb38,     0x4ee0e883,     0x2ea0db38,\n-    0x6ea0db7a,     0x6ee0db17,     0x0e20ba0f,     0x4e20bad5,\n-    0x0e60b883,     0x4e60bb38,     0x0ea0b928,     0x4ea0bb59,\n-    0x4ee0bab4,     0x0ea0fa30,     0x4ea0fa51,     0x4ee0f862,\n-    0x0ef8f841,     0x4ef8f820,     0x2ea0fb38,     0x6ea0f8a4,\n-    0x6ee0f883,     0x2ef8f9ac,     0x6ef8f81f,     0x2ea1fbbc,\n-    0x6ea1f96a,     0x6ee1fb7a,     0x2ef9f862,     0x6ef9f9ac,\n-    0x2e205a72,     0x6e20581f,     0x0e231c41,     0x4e2f1dcd,\n-    0x0ebf1fdd,     0x4ea21c20,     0x2e351e93,     0x6e2e1dac,\n-    0x0e338651,     0x4e3886f6,     0x0e6f85cd,     0x4e7e87bc,\n-    0x0ea087fe,     0x4ea1841f,     0x4ee38441,     0x0e3c0f7a,\n-    0x4e3e0fbc,     0x0e660ca4,     0x4e600ffe,     0x0ea60ca4,\n-    0x4ea80ce6,     0x4ee00ffe,     0x2e3c0f7a,     0x6e340e72,\n-    0x2e6b0d49,     0x6e6a0d28,     0x2eae0dac,     0x6ea20c20,\n-    0x6ef60eb4,     0x0e23d441,     0x4e3ad738,     0x4e64d462,\n-    0x0e421420,     0x4e4b1549,     0x2e3a8738,     0x6e3c877a,\n-    0x2e728630,     0x6e6087fe,     0x2ea58483,     0x6eac856a,\n-    0x6ef98717,     0x0e2c2d6a,     0x4e262ca4,     0x0e742e72,\n-    0x4e642c62,     0x0ead2d8b,     0x4eaa2d28,     0x4eec2d6a,\n-    0x2e312e0f,     0x6e332e51,     0x2e642c62,     0x6e6c2d6a,\n-    0x2eae2dac,     0x6eae2dac,     0x6ef12e0f,     0x0eafd5cd,\n-    0x4ea4d462,     0x4ee9d507,     0x0ed616b4,     0x4edc177a,\n-    0x0e329e30,     0x4e269ca4,     0x0e649c62,     0x4e669ca4,\n-    0x0eae9dac,     0x4eb49e72,     0x2eb7d6d5,     0x6eb2d630,\n-    0x6ef4d672,     0x2ecd158b,     0x6ed716d5,     0x2e39d717,\n-    0x6e2ed5ac,     0x6e7cd77a,     0x2e591717,     0x6e5e17bc,\n-    0x2e30ddee,     0x6e2ddd8b,     0x6e7adf38,     0x2e431c41,\n-    0x6e4e1dac,     0x0e61941f,     0x4e6c956a,     0x0eb29630,\n-    0x4ea99507,     0x0e24cc62,     0x4e25cc83,     0x4e6fcdcd,\n-    0x0e550e93,     0x4e530e51,     0x2e729630,     0x6e659483,\n-    0x2ea39441,     0x6ead958b,     0x0ea0cffe,     0x4ea7ccc5,\n-    0x4eeacd28,     0x0ed10e0f,     0x4edf0fdd,     0x2e20fffe,\n-    0x6e22fc20,     0x6e76feb4,     0x2e493d07,     0x6e563eb4,\n-    0x0e396717,     0x4e3e67bc,     0x0e7766d5,     0x4e7d679b,\n-    0x0ebb6759,     0x4ea764c5,     0x2e236441,     0x6e396717,\n-    0x2e726630,     0x6e61641f,     0x2ea764c5,     0x6eae65ac,\n-    0x0e2ba549,     0x4e3ea7bc,     0x0e71a60f,     0x4e7fa7dd,\n-    0x0eb8a6f6,     0x4ea1a41f,     0x0e35f693,     0x4e21f41f,\n-    0x4e67f4c5,     0x0e5035ee,     0x4e543672,     0x0e216c1f,\n-    0x4e346e72,     0x0e7d6f9b,     0x4e766eb4,     0x0eb26e30,\n-    0x4eae6dac,     0x2e2d6d8b,     0x6e2b6d49,     0x2e686ce6,\n-    0x6e606ffe,     0x2eb36e51,     0x6ebd6f9b,     0x0e3eafbc,\n-    0x4e20affe,     0x0e69ad07,     0x4e6cad6a,     0x0eb6aeb4,\n-    0x4eacad6a,     0x0e66b4a4,     0x4e7ab738,     0x0eb3b651,\n-    0x4eb3b651,     0x0e3826f6,     0x4e252483,     0x0e7f27dd,\n-    0x4e71260f,     0x0eb826f6,     0x4eb52693,     0x0eb5f693,\n-    0x4eb8f6f6,     0x4ee4f462,     0x0ed1360f,     0x4ec834e6,\n-    0x2eaeedac,     0x6eb2ee30,     0x6eeded8b,     0x2ecf2dcd,\n-    0x6ed92f17,     0x0f81100f,     0x4f848862,     0x4fc31841,\n-    0x0fad518b,     0x4fa780c5,     0x4fd059ee,     0x2fa890e6,\n-    0x4fa38841,     0x6fc1900f,     0x0f7b8149,     0x4f4688a4,\n-    0x0faf81cd,     0x4fa58083,     0x0e3736d5,     0x4e393717,\n-    0x0e61341f,     0x4e7b3759,     0x0ea43462,     0x4ea1341f,\n-    0x4efd379b,     0x0e343e72,     0x4e2c3d6a,     0x0e793f17,\n-    0x4e753e93,     0x0ea53c83,     0x4eb43e72,     0x4ee23c20,\n-    0x2e3b8f59,     0x6e3c8f7a,     0x2e798f17,     0x6e648c62,\n-    0x2eb48e72,     0x6eae8dac,     0x6ee68ca4,     0x2e3e37bc,\n-    0x6e2037fe,     0x2e7f37dd,     0x6e723630,     0x2ebd379b,\n-    0x6ea834e6,     0x6eeb3549,     0x2e3f3fdd,     0x6e343e72,\n-    0x2e693d07,     0x6e663ca4,     0x2ea93d07,     0x6eb13e0f,\n-    0x6eeb3d49,     0x0e39e717,     0x4e2ae528,     0x4e64e462,\n-    0x2ebee7bc,     0x6eb7e6d5,     0x6ee1e41f,     0x2e27e4c5,\n-    0x6e3de79b,     0x6e62e420,     0x659239e8,     0x65d03b94,\n-    0x65d0232d,     0x65d120c2,     0x659129f2,     0x65933ca3,\n-    0x25969683,     0x25961d15,     0x254d1c48,     0x259e3f61,\n-    0x25953b96,     0x255b91d1,     0x247686ed,     0x24309098,\n-    0x2462edb9,     0x24a57468,     0xba5fd3e3,     0x3a5f03e5,\n-    0xfa411be4,     0x7a42cbe2,     0x93df03ff,     0xc820ffff,\n-    0x8822fc7f,     0xc8247cbf,     0x88267fff,     0x4e010fe0,\n-    0x5e040420,     0x4e081fe1,     0x4e0c1fe1,     0x4e0a1fe1,\n-    0x4e071fe1,     0x4e042c20,     0x4e062c20,     0x4e052c20,\n-    0x4e083c20,     0x0e0c3c20,     0x0e0a3c20,     0x0e073c20,\n-    0x9eae0020,     0x0f03f409,     0x6f03f40e,     0x4cc0ac3f,\n-    0x0ea1b820,     0x0ef9b820,     0x4ef9b820,     0x4e21c862,\n-    0x0e79c862,     0x4e79c862,     0x4e61b8a4,     0x0e79b8a4,\n-    0x4e79b8a4,     0x05a08020,     0x05104fe0,     0x05505001,\n-    0x05906fe2,     0x05d03005,     0x05101fea,     0x05901feb,\n-    0x04b0e3e0,     0x0470e7e1,     0x042f9c20,     0x043f9c35,\n-    0x047f9c20,     0x04ff9c20,     0x04299420,     0x04319160,\n-    0x0461943e,     0x04a19020,     0x04038100,     0x040381a0,\n-    0x040387e1,     0x04438be2,     0x04c38fe3,     0x040181e0,\n-    0x04018100,     0x04018621,     0x04418b22,     0x04418822,\n-    0x04818c23,     0x040081e0,     0x04008120,     0x04008761,\n-    0x04008621,     0x04408822,     0x04808c23,     0x042053ff,\n-    0x047f5401,     0x25208028,     0x2538cfe0,     0x2578d001,\n-    0x25b8efe2,     0x25f8f007,     0x2538dfea,     0x25b8dfeb,\n-    0xa400a3e0,     0xa420a7e0,     0xa4484be0,     0xa467afe0,\n-    0xa4a8a7ea,     0xa547a814,     0xa4084ffe,     0xa55c53e0,\n-    0xa5e1540b,     0xe400fbf6,     0xe408ffff,     0xe420e7e0,\n-    0xe4484be0,     0xe460efe0,     0xe547e400,     0xe4014be0,\n-    0xe4a84fe0,     0xe5f15000,     0x858043e0,     0x85a043ff,\n-    0xe59f5d08,     0x0420e3e9,     0x0460e3ea,     0x04a0e3eb,\n-    0x04e0e3ec,     0x25104042,     0x25104871,     0x25904861,\n-    0x25904c92,     0x05344020,     0x05744041,     0x05b44062,\n-    0x05f44083,     0x252c8840,     0x253c1420,     0x25681572,\n-    0x25a21ce3,     0x25ea1e34,     0x253c0421,     0x25680572,\n-    0x25a20ce3,     0x25ea0e34,     0x0522c020,     0x05e6c0a4,\n-    0x2401a001,     0x2443a051,     0x24858881,     0x24c78cd1,\n-    0x24850891,     0x24c70cc1,     0x250f9001,     0x25508051,\n-    0x25802491,     0x25df28c1,     0x25850c81,     0x251e10d1,\n-    0x65816001,     0x65c36051,     0x65854891,     0x65c74cc1,\n-    0x05733820,     0x05b238a4,     0x05f138e6,     0x0570396a,\n-    0x65d0a001,     0x65d6a443,     0x65d4a826,     0x6594ac26,\n-    0x6554ac26,     0x6556ac26,     0x6552ac26,     0x65cbac85,\n-    0x65caac01,     0x6589ac85,     0x6588ac01,     0x65c9ac85,\n-    0x65c8ac01,     0x65dea833,     0x659ca509,     0x65d8a801,\n-    0x65dcac01,     0x655cb241,     0x0520a1e0,     0x0521a601,\n-    0x052281e0,     0x05238601,     0x04a14026,     0x042244a6,\n-    0x046344a6,     0x04a444a6,     0x04e544a7,     0x0568aca7,\n-    0x05b23230,     0x853040af,     0xc5b040af,     0xe57080af,\n-    0xe5b080af,     0x25034440,     0x254054c4,     0x25034640,\n-    0x25415a05,     0x25834440,     0x25c54489,     0x250b5d3a,\n-    0x2550dc20,     0x2518e3e1,     0x2518e021,     0x2518e0a1,\n-    0x2518e121,     0x2518e1a1,     0x2558e3e2,     0x2558e042,\n-    0x2558e0c2,     0x2558e142,     0x2598e3e3,     0x2598e063,\n-    0x2598e0e3,     0x2598e163,     0x25d8e3e4,     0x25d8e084,\n-    0x25d8e104,     0x25d8e184,     0x2518e407,     0x05214800,\n-    0x05614800,     0x05a14800,     0x05e14800,     0x05214c00,\n-    0x05614c00,     0x05a14c00,     0x05e14c00,     0x05304001,\n-    0x05314001,     0x05a18610,     0x05e18610,     0x05271e11,\n-    0x6545e891,     0x6585e891,     0x65c5e891,     0x6545c891,\n-    0x6585c891,     0x65c5c891,     0x45b0c210,     0x45f1c231,\n-    0x1e601000,     0x1e603000,     0x1e621000,     0x1e623000,\n-    0x1e641000,     0x1e643000,     0x1e661000,     0x1e663000,\n-    0x1e681000,     0x1e683000,     0x1e6a1000,     0x1e6a3000,\n-    0x1e6c1000,     0x1e6c3000,     0x1e6e1000,     0x1e6e3000,\n-    0x1e701000,     0x1e703000,     0x1e721000,     0x1e723000,\n-    0x1e741000,     0x1e743000,     0x1e761000,     0x1e763000,\n-    0x1e781000,     0x1e783000,     0x1e7a1000,     0x1e7a3000,\n-    0x1e7c1000,     0x1e7c3000,     0x1e7e1000,     0x1e7e3000,\n-    0xf8268267,     0xf82d023c,     0xf8301046,     0xf83d2083,\n-    0xf8263290,     0xf82d528c,     0xf8284299,     0xf8337160,\n-    0xf8386286,     0xf8bf820e,     0xf8a600e0,     0xf8af1353,\n-    0xf8a922ea,     0xf8b53396,     0xf8a251e3,     0xf8b340f4,\n-    0xf8a470fd,     0xf8a06209,     0xf8f48097,     0xf8f002ea,\n-    0xf8eb10d9,     0xf8ff21b0,     0xf8f7302c,     0xf8ee52a9,\n-    0xf8f041fa,     0xf8e471e4,     0xf8e863c6,     0xf864823d,\n-    0xf87d013a,     0xf86f1162,     0xf87d20e3,     0xf86132bb,\n-    0xf870510e,     0xf8704336,     0xf86572b4,     0xf8706217,\n-    0xb83e8294,     0xb8200264,     0xb8381284,     0xb8242358,\n-    0xb8333102,     0xb828530e,     0xb83042df,     0xb824703f,\n-    0xb82a6194,     0xb8a080e9,     0xb8b80090,     0xb8bb1146,\n-    0xb8bb21b8,     0xb8b032df,     0xb8b653f4,     0xb8bd41c9,\n-    0xb8b47287,     0xb8bc6169,     0xb8ee828c,     0xb8e10138,\n-    0xb8f3126d,     0xb8f020b0,     0xb8e03183,     0xb8e851ef,\n-    0xb8f041e4,     0xb8fe7005,     0xb8ea6376,     0xb8638120,\n-    0xb873015d,     0xb8781284,     0xb86723b8,     0xb86e3175,\n-    0xb87b51ed,     0xb87f41d1,     0xb863721e,     0xb87660f4,\n-    0xce216874,     0xce104533,     0xce648c15,     0xce8e3302,\n-    0xce6e82ab,     0xce6c87d1,     0xcec08063,     0xce638937,\n-    0x25e0c358,     0x25a1c7d3,     0x0580785a,     0x05426328,\n-    0x05009892,     0x25a0cc29,     0x2561cec8,     0x058044b3,\n-    0x05401c99,     0x05006b49,     0x25e0d6f7,     0x2561c528,\n-    0x0583c8bc,     0x0542522f,     0x05001ec0,     0x25e0de65,\n-    0x25a1c113,     0x05803cad,     0x0540f3c0,     0x0500ab15,\n-    0x2560c28c,     0x2561d7c0,     0x05801ed7,     0x0542633b,\n-    0x05003696,     0x2560d4b4,     0x25e1c918,     0x058021ff,\n-    0x05400e15,     0x0500f3de,     0x0473025a,     0x04bd05ab,\n-    0x658e0025,     0x658a08e2,     0x659a0493,     0x043e1062,\n-    0x04f418b4,     0x046d15bd,     0x04611fce,     0x04d6a07c,\n-    0x04001929,     0x041a09da,     0x04d098f4,     0x04db10d4,\n-    0x0459a3ad,     0x041aa029,     0x041919fb,     0x04d39e24,\n-    0x04118302,     0x04101dba,     0x04d7ae16,     0x04dea571,\n-    0x04180210,     0x05e786fc,     0x05e4915c,     0x04881cf1,\n-    0x044a0f04,     0x04090969,     0x048b16c4,     0x044101e4,\n-    0x04dcbf44,     0x65809745,     0x658d833f,     0x65c68468,\n-    0x65c79b07,     0x65829e38,     0x049dafca,     0x6582bba8,\n-    0x65c0b7ff,     0x65c1b4e0,     0x658dbadd,     0x65819a9d,\n-    0x65ed9246,     0x65b30815,     0x65e6263c,     0x65eebb94,\n-    0x65bad14e,     0x65efe178,     0x65fc5697,     0x65e07f14,\n-    0x040c55a6,     0x04977f4d,     0x043d3046,     0x04b733a0,\n-    0x046830a4,     0x04ed322d,     0x05686948,     0x05bd6c13,\n-    0x65c88ef0,     0x450db3d7,     0x4540b6d9,     0x043e3979,\n-    0x445896ce,     0x445a9005,     0x44d98069,     0x445b87ae,\n-    0x04da348e,     0x04982edb,     0x0499397f,     0x0408338c,\n-    0x04ca309c,     0x65c721e6,     0x65c63641,     0x65982882,\n-    0x04812b8b,     0x0e251083,     0x4e3712d5,     0x0e61101f,\n-    0x4e6d118b,     0x0eba1338,     0x4eb712d5,     0x2e31120f,\n-    0x6e2e11ac,     0x2e6810e6,     0x6e6f11cd,     0x2eaa1128,\n-    0x6eb1120f,\n+    0xd5033fdf,     0xd50330ff,     0xd503207f,     0xd50320ff,\n+    0xd5033e9f,     0xd50332bf,     0xd61f0200,     0xd63f0280,\n+    0xdac123ea,     0xdac127fb,     0xdac12be8,     0xdac12fe0,\n+    0xdac133e1,     0xdac137f5,     0xdac13bf1,     0xdac13ffd,\n+    0xdac147fd,     0xd61f0b9f,     0xd61f0c3f,     0xd63f0aff,\n+    0xd63f0ebf,     0xd51b4434,     0xd51b4216,     0xd53b443b,\n+    0xd53b4213,     0xd53b00eb,     0xd53b0030,     0xdac143e6,\n+    0xc8117c80,     0xc80afed8,     0xc85f7e6a,     0xc85ffca1,\n+    0xc89ffd1e,     0xc8dffe2c,     0x88097cee,     0x8801fe05,\n+    0x885f7d82,     0x885ffd8a,     0x889fff83,     0x88dfff4e,\n+    0x481e7dca,     0x4815fd2d,     0x485f7f76,     0x485ffe7c,\n+    0x489fffcb,     0x48dffc53,     0x08027c37,     0x0800fe0c,\n+    0x085f7ded,     0x085ffeb1,     0x089ffd6d,     0x08dffd1e,\n+    0xc87f3578,     0xc87feaa1,     0xc83b506d,     0xc82c87a6,\n+    0x887f1166,     0x887f93d0,     0x883e32a4,     0x883bf12f,\n+    0xf80011f9,     0xb81b1022,     0x381ea354,     0x79002fd7,\n+    0xf85cf39a,     0xb8580309,     0x385e218c,     0x784051e1,\n+    0x389e11d8,     0x789fa1f8,     0x79c01865,     0xb881131b,\n+    0xfc5dd3ad,     0xbc5d1137,     0xfc00900b,     0xbc181015,\n+    0xf818ec7d,     0xb81b8c91,     0x381efc40,     0x78007c3d,\n+    0xf857beb0,     0xb8413dd4,     0x385fddd6,     0x78409e2f,\n+    0x389eddea,     0x789e7d94,     0x78de3d55,     0xb8805c13,\n+    0xfc5cadc0,     0xbc428c23,     0xfc1a2dc4,     0xbc1caf92,\n+    0xf81475f6,     0xb81f95d1,     0x381e757e,     0x78014561,\n+    0xf8402436,     0xb85896e2,     0x385f4763,     0x785db4f0,\n+    0x3880374f,     0x789e25e7,     0x78dd0563,     0xb88166f9,\n+    0xfc529540,     0xbc4374d3,     0xfc1166ae,     0xbc1ba6c0,\n+    0xf820ea7b,     0xb82d68c8,     0x38367a04,     0x782f4b59,\n+    0xf878c8a4,     0xb8674a24,     0x386b78f1,     0x78776bc0,\n+    0x38a15aca,     0x78bedbd5,     0x78fcd94b,     0xb8aa4a7c,\n+    0xfc6ecbbe,     0xbc65d8a8,     0xfc2de919,     0xbc3a7b11,\n+    0xf91f1193,     0xb91ed5f7,     0x391ec9bd,     0x79182ceb,\n+    0xf95d4b0a,     0xb9581010,     0x395fc034,     0x795fb221,\n+    0x399d8731,     0x799efb3b,     0x79dd1a2e,     0xb998e4ea,\n+    0xfd583723,     0xbd5ea12c,     0xfd18dc38,     0xbd1b0e83,\n+    0x58ffda82,     0x1800001d,     0xf885d1c0,     0xd8ffda20,\n+    0xf8a77820,     0xf9980220,     0x1a030301,     0x3a140311,\n+    0x5a0d000b,     0x7a07015c,     0x9a1001e4,     0xba140182,\n+    0xda0d01bd,     0xfa0c00ce,     0x0b31f194,     0x2b206d7b,\n+    0xcb29f027,     0x6b210f63,     0x8b2cb34d,     0xab2a88b1,\n+    0xcb2f511e,     0xeb3332f3,     0x3a4533aa,     0x7a4d312b,\n+    0xba442146,     0xfa42818c,     0x3a466a02,     0x7a4b68ed,\n+    0xba4a9b6b,     0xfa4dd86d,     0x1a8a637a,     0x1a9cd6aa,\n+    0x5a9bd137,     0x5a8fd7aa,     0x9a95233e,     0x9a95c620,\n+    0xda9422b0,     0xda8397d3,     0x5ac00173,     0x5ac00418,\n+    0x5ac00b3b,     0x5ac0106e,     0x5ac0162e,     0xdac001e7,\n+    0xdac00798,     0xdac00b31,     0xdac00f42,     0xdac010bc,\n+    0xdac01759,     0xdac1021b,     0xdac104d1,     0xdac10995,\n+    0xdac10c80,     0xdac1136c,     0xdac11791,     0xdac1185c,\n+    0xdac11d51,     0xd71f09ee,     0xd71f0dc3,     0xd73f0b2f,\n+    0xd73f0e6e,     0x1ac40a05,     0x1ac40f3a,     0x1acc2042,\n+    0x1ac8263d,     0x1ac42867,     0x1ada2c99,     0x9ad10899,\n+    0x9ad10f40,     0x9ad521f7,     0x9adb263c,     0x9ac0286a,\n+    0x9ac92f27,     0x9bdd7de6,     0x9b427d4f,     0x1b0b2cf1,\n+    0x1b1ddcf7,     0x9b0b2f6e,     0x9b0cbf04,     0x9b2b728e,\n+    0x9b2cdd6d,     0x9bae275e,     0x9ba7954d,     0x7ec315fe,\n+    0x1ef0098c,     0x1ef21bff,     0x1ef02ab3,     0x1ef5394f,\n+    0x1efc4942,     0x1eff5bc7,     0x1ee28832,     0x7ea3d546,\n+    0x1e270979,     0x1e201981,     0x1e3d2a63,     0x1e263ae6,\n+    0x1e3b4b80,     0x1e2758a2,     0x1e39899d,     0x7ef8d58d,\n+    0x1e720913,     0x1e751b56,     0x1e622a74,     0x1e683ade,\n+    0x1e754a76,     0x1e755a4c,     0x1e638a06,     0x1fc373a3,\n+    0x1f0a35cf,     0x1f0aea4c,     0x1f2f74e7,     0x1f2032e0,\n+    0x1f4d21d8,     0x1f49d0ef,     0x1f7f43b3,     0x1f705522,\n+    0x1e20409e,     0x1e20c361,     0x1e214319,     0x1e21c2ae,\n+    0x1e22c0cd,     0x1e23c32c,     0x1ee243d9,     0x1e6042bc,\n+    0x1e60c2f0,     0x1e6143a5,     0x1e61c276,     0x1e62428d,\n+    0x1ee1c393,     0x1e3800d1,     0x9e3800ed,     0x1e78035c,\n+    0x9e7800d1,     0x1e220081,     0x9e22028e,     0x1e6202a7,\n+    0x9e6202fb,     0x1e24028d,     0x9e64039e,     0x1e3002aa,\n+    0x9e700225,     0x1e2601cb,     0x9e6602ad,     0x1e2701db,\n+    0x9e6702e4,     0x1e3e2300,     0x1e6e2180,     0x1e202228,\n+    0x1e602388,     0x29021b40,     0x297c78c0,     0x69660970,\n+    0xa908018f,     0xa9427ae7,     0x29a03cfa,     0x29fc3d4b,\n+    0x69c84033,     0xa988240e,     0xa9fa0d9b,     0x28a02d88,\n+    0x28c8408a,     0x68f87a6a,     0xa8ba09f8,     0xa8c52a18,\n+    0x280257be,     0x28727948,     0xa83868de,     0xa8440a98,\n+    0x0c40733f,     0x4cdfa1e5,     0x0ccd6cea,     0x4cdf260d,\n+    0x0d40c227,     0x4ddfcb30,     0x0dc7cc6b,     0x4c408ced,\n+    0x0cdf8769,     0x4d60c346,     0x0dffca17,     0x4de8cda6,\n+    0x4cda4834,     0x0c4049ef,     0x4d40e6dd,     0x4ddfe946,\n+    0x0dcfeccf,     0x4cdf0546,     0x0cc7006b,     0x0d60e32c,\n+    0x0dffe5eb,     0x0dfce8de,     0x0e31bb9b,     0x4e31bbbc,\n+    0x0e71b841,     0x4e71bbbc,     0x4eb1b841,     0x0e30aab4,\n+    0x4e30abdd,     0x0e70aa30,     0x4e70a9cd,     0x4eb0a96a,\n+    0x6e30fbdd,     0x0e31abdd,     0x2e31aa93,     0x4e31aaf6,\n+    0x6e31a96a,     0x0e71a8a4,     0x2e71a81f,     0x4e71aad5,\n+    0x6e71a928,     0x4eb1a81f,     0x6eb1aa93,     0x6eb0f96a,\n+    0x7e30fbbc,     0x7e70f862,     0x7eb0fb59,     0x7ef0f8c5,\n+    0x0ea0c883,     0x4ea0c928,     0x4ee0caf6,     0x2ea0ca93,\n+    0x6ea0c9cd,     0x6ee0c8c5,     0x0ea0dbdd,     0x4ea0db38,\n+    0x4ee0dad5,     0x0ea0eb7a,     0x4ea0eb38,     0x4ee0e883,\n+    0x2ea0db38,     0x6ea0db7a,     0x6ee0db17,     0x0e20ba0f,\n+    0x4e20bad5,     0x0e60b883,     0x4e60bb38,     0x0ea0b928,\n+    0x4ea0bb59,     0x4ee0bab4,     0x0ea0fa30,     0x4ea0fa51,\n+    0x4ee0f862,     0x0ef8f841,     0x4ef8f820,     0x2ea0fb38,\n+    0x6ea0f8a4,     0x6ee0f883,     0x2ef8f9ac,     0x6ef8f81f,\n+    0x2ea1fbbc,     0x6ea1f96a,     0x6ee1fb7a,     0x2ef9f862,\n+    0x6ef9f9ac,     0x2e205a72,     0x6e20581f,     0x0e231c41,\n+    0x4e2f1dcd,     0x0ebf1fdd,     0x4ea21c20,     0x2e351e93,\n+    0x6e2e1dac,     0x0e338651,     0x4e3886f6,     0x0e6f85cd,\n+    0x4e7e87bc,     0x0ea087fe,     0x4ea1841f,     0x4ee38441,\n+    0x0e3c0f7a,     0x4e3e0fbc,     0x0e660ca4,     0x4e600ffe,\n+    0x0ea60ca4,     0x4ea80ce6,     0x4ee00ffe,     0x2e3c0f7a,\n+    0x6e340e72,     0x2e6b0d49,     0x6e6a0d28,     0x2eae0dac,\n+    0x6ea20c20,     0x6ef60eb4,     0x0e23d441,     0x4e3ad738,\n+    0x4e64d462,     0x0e421420,     0x4e4b1549,     0x2e3a8738,\n+    0x6e3c877a,     0x2e728630,     0x6e6087fe,     0x2ea58483,\n+    0x6eac856a,     0x6ef98717,     0x0e2c2d6a,     0x4e262ca4,\n+    0x0e742e72,     0x4e642c62,     0x0ead2d8b,     0x4eaa2d28,\n+    0x4eec2d6a,     0x2e312e0f,     0x6e332e51,     0x2e642c62,\n+    0x6e6c2d6a,     0x2eae2dac,     0x6eae2dac,     0x6ef12e0f,\n+    0x0eafd5cd,     0x4ea4d462,     0x4ee9d507,     0x0ed616b4,\n+    0x4edc177a,     0x0e329e30,     0x4e269ca4,     0x0e649c62,\n+    0x4e669ca4,     0x0eae9dac,     0x4eb49e72,     0x2eb7d6d5,\n+    0x6eb2d630,     0x6ef4d672,     0x2ecd158b,     0x6ed716d5,\n+    0x2e39d717,     0x6e2ed5ac,     0x6e7cd77a,     0x2e591717,\n+    0x6e5e17bc,     0x2e30ddee,     0x6e2ddd8b,     0x6e7adf38,\n+    0x2e431c41,     0x6e4e1dac,     0x0e61941f,     0x4e6c956a,\n+    0x0eb29630,     0x4ea99507,     0x0e24cc62,     0x4e25cc83,\n+    0x4e6fcdcd,     0x0e550e93,     0x4e530e51,     0x2e729630,\n+    0x6e659483,     0x2ea39441,     0x6ead958b,     0x0ea0cffe,\n+    0x4ea7ccc5,     0x4eeacd28,     0x0ed10e0f,     0x4edf0fdd,\n+    0x2e20fffe,     0x6e22fc20,     0x6e76feb4,     0x2e493d07,\n+    0x6e563eb4,     0x0e396717,     0x4e3e67bc,     0x0e7766d5,\n+    0x4e7d679b,     0x0ebb6759,     0x4ea764c5,     0x2e236441,\n+    0x6e396717,     0x2e726630,     0x6e61641f,     0x2ea764c5,\n+    0x6eae65ac,     0x0e2ba549,     0x4e3ea7bc,     0x0e71a60f,\n+    0x4e7fa7dd,     0x0eb8a6f6,     0x4ea1a41f,     0x0e35f693,\n+    0x4e21f41f,     0x4e67f4c5,     0x0e5035ee,     0x4e543672,\n+    0x0e216c1f,     0x4e346e72,     0x0e7d6f9b,     0x4e766eb4,\n+    0x0eb26e30,     0x4eae6dac,     0x2e2d6d8b,     0x6e2b6d49,\n+    0x2e686ce6,     0x6e606ffe,     0x2eb36e51,     0x6ebd6f9b,\n+    0x0e3eafbc,     0x4e20affe,     0x0e69ad07,     0x4e6cad6a,\n+    0x0eb6aeb4,     0x4eacad6a,     0x0e66b4a4,     0x4e7ab738,\n+    0x0eb3b651,     0x4eb3b651,     0x0e3826f6,     0x4e252483,\n+    0x0e7f27dd,     0x4e71260f,     0x0eb826f6,     0x4eb52693,\n+    0x0eb5f693,     0x4eb8f6f6,     0x4ee4f462,     0x0ed1360f,\n+    0x4ec834e6,     0x2eaeedac,     0x6eb2ee30,     0x6eeded8b,\n+    0x2ecf2dcd,     0x6ed92f17,     0x0f81100f,     0x4f848862,\n+    0x4fc31841,     0x0fad518b,     0x4fa780c5,     0x4fd059ee,\n+    0x2fa890e6,     0x4fa38841,     0x6fc1900f,     0x0f7b8149,\n+    0x4f4688a4,     0x0faf81cd,     0x4fa58083,     0x0e3736d5,\n+    0x4e393717,     0x0e61341f,     0x4e7b3759,     0x0ea43462,\n+    0x4ea1341f,     0x4efd379b,     0x0e343e72,     0x4e2c3d6a,\n+    0x0e793f17,     0x4e753e93,     0x0ea53c83,     0x4eb43e72,\n+    0x4ee23c20,     0x2e3b8f59,     0x6e3c8f7a,     0x2e798f17,\n+    0x6e648c62,     0x2eb48e72,     0x6eae8dac,     0x6ee68ca4,\n+    0x2e3e37bc,     0x6e2037fe,     0x2e7f37dd,     0x6e723630,\n+    0x2ebd379b,     0x6ea834e6,     0x6eeb3549,     0x2e3f3fdd,\n+    0x6e343e72,     0x2e693d07,     0x6e663ca4,     0x2ea93d07,\n+    0x6eb13e0f,     0x6eeb3d49,     0x0e39e717,     0x4e2ae528,\n+    0x4e64e462,     0x2ebee7bc,     0x6eb7e6d5,     0x6ee1e41f,\n+    0x2e27e4c5,     0x6e3de79b,     0x6e62e420,     0x659239e8,\n+    0x65d03b94,     0x65d0232d,     0x65d120c2,     0x659129f2,\n+    0x65933ca3,     0x25969683,     0x25961d15,     0x254d1c48,\n+    0x259e3f61,     0x25953b96,     0x255b91d1,     0x247686ed,\n+    0x24309098,     0x2462edb9,     0x24a57468,     0xba5fd3e3,\n+    0x3a5f03e5,     0xfa411be4,     0x7a42cbe2,     0x93df03ff,\n+    0xc820ffff,     0x8822fc7f,     0xc8247cbf,     0x88267fff,\n+    0x4e010fe0,     0x5e040420,     0x4e081fe1,     0x4e0c1fe1,\n+    0x4e0a1fe1,     0x4e071fe1,     0x4e042c20,     0x4e062c20,\n+    0x4e052c20,     0x4e083c20,     0x0e0c3c20,     0x0e0a3c20,\n+    0x0e073c20,     0x9eae0020,     0x0f03f409,     0x6f03f40e,\n+    0x4cc0ac3f,     0x0ea1b820,     0x0ef9b820,     0x4ef9b820,\n+    0x4e21c862,     0x0e79c862,     0x4e79c862,     0x4e61b8a4,\n+    0x0e79b8a4,     0x4e79b8a4,     0x05a08020,     0x05104fe0,\n+    0x05505001,     0x05906fe2,     0x05d03005,     0x05101fea,\n+    0x05901feb,     0x04b0e3e0,     0x0470e7e1,     0x042f9c20,\n+    0x043f9c35,     0x047f9c20,     0x04ff9c20,     0x04299420,\n+    0x04319160,     0x0461943e,     0x04a19020,     0x04038100,\n+    0x040381a0,     0x040387e1,     0x04438be2,     0x04c38fe3,\n+    0x040181e0,     0x04018100,     0x04018621,     0x04418b22,\n+    0x04418822,     0x04818c23,     0x040081e0,     0x04008120,\n+    0x04008761,     0x04008621,     0x04408822,     0x04808c23,\n+    0x042053ff,     0x047f5401,     0x25208028,     0x2538cfe0,\n+    0x2578d001,     0x25b8efe2,     0x25f8f007,     0x2538dfea,\n+    0x25b8dfeb,     0xa400a3e0,     0xa420a7e0,     0xa4484be0,\n+    0xa467afe0,     0xa4a8a7ea,     0xa547a814,     0xa4084ffe,\n+    0xa55c53e0,     0xa5e1540b,     0xe400fbf6,     0xe408ffff,\n+    0xe420e7e0,     0xe4484be0,     0xe460efe0,     0xe547e400,\n+    0xe4014be0,     0xe4a84fe0,     0xe5f15000,     0x858043e0,\n+    0x85a043ff,     0xe59f5d08,     0x0420e3e9,     0x0460e3ea,\n+    0x04a0e3eb,     0x04e0e3ec,     0x25104042,     0x25104871,\n+    0x25904861,     0x25904c92,     0x05344020,     0x05744041,\n+    0x05b44062,     0x05f44083,     0x252c8840,     0x253c1420,\n+    0x25681572,     0x25a21ce3,     0x25ea1e34,     0x253c0421,\n+    0x25680572,     0x25a20ce3,     0x25ea0e34,     0x0522c020,\n+    0x05e6c0a4,     0x2401a001,     0x2443a051,     0x24858881,\n+    0x24c78cd1,     0x24850891,     0x24c70cc1,     0x250f9001,\n+    0x25508051,     0x25802491,     0x25df28c1,     0x25850c81,\n+    0x251e10d1,     0x65816001,     0x65c36051,     0x65854891,\n+    0x65c74cc1,     0x05733820,     0x05b238a4,     0x05f138e6,\n+    0x0570396a,     0x65d0a001,     0x65d6a443,     0x65d4a826,\n+    0x6594ac26,     0x6554ac26,     0x6556ac26,     0x6552ac26,\n+    0x65cbac85,     0x65caac01,     0x6589ac85,     0x6588ac01,\n+    0x65c9ac85,     0x65c8ac01,     0x65dea833,     0x659ca509,\n+    0x65d8a801,     0x65dcac01,     0x655cb241,     0x0520a1e0,\n+    0x0521a601,     0x052281e0,     0x05238601,     0x04a14026,\n+    0x042244a6,     0x046344a6,     0x04a444a6,     0x04e544a7,\n+    0x0568aca7,     0x05b23230,     0x853040af,     0xc5b040af,\n+    0xe57080af,     0xe5b080af,     0x25034440,     0x254054c4,\n+    0x25034640,     0x25415a05,     0x25834440,     0x25c54489,\n+    0x250b5d3a,     0x2550dc20,     0x2518e3e1,     0x2518e021,\n+    0x2518e0a1,     0x2518e121,     0x2518e1a1,     0x2558e3e2,\n+    0x2558e042,     0x2558e0c2,     0x2558e142,     0x2598e3e3,\n+    0x2598e063,     0x2598e0e3,     0x2598e163,     0x25d8e3e4,\n+    0x25d8e084,     0x25d8e104,     0x25d8e184,     0x2518e407,\n+    0x05214800,     0x05614800,     0x05a14800,     0x05e14800,\n+    0x05214c00,     0x05614c00,     0x05a14c00,     0x05e14c00,\n+    0x05304001,     0x05314001,     0x05a18610,     0x05e18610,\n+    0x05271e11,     0x6545e891,     0x6585e891,     0x65c5e891,\n+    0x6545c891,     0x6585c891,     0x65c5c891,     0x45b0c210,\n+    0x45f1c231,     0x1e601000,     0x1e603000,     0x1e621000,\n+    0x1e623000,     0x1e641000,     0x1e643000,     0x1e661000,\n+    0x1e663000,     0x1e681000,     0x1e683000,     0x1e6a1000,\n+    0x1e6a3000,     0x1e6c1000,     0x1e6c3000,     0x1e6e1000,\n+    0x1e6e3000,     0x1e701000,     0x1e703000,     0x1e721000,\n+    0x1e723000,     0x1e741000,     0x1e743000,     0x1e761000,\n+    0x1e763000,     0x1e781000,     0x1e783000,     0x1e7a1000,\n+    0x1e7a3000,     0x1e7c1000,     0x1e7c3000,     0x1e7e1000,\n+    0x1e7e3000,     0xf8268267,     0xf82d023c,     0xf8301046,\n+    0xf83d2083,     0xf8263290,     0xf82d528c,     0xf8284299,\n+    0xf8337160,     0xf8386286,     0xf8bf820e,     0xf8a600e0,\n+    0xf8af1353,     0xf8a922ea,     0xf8b53396,     0xf8a251e3,\n+    0xf8b340f4,     0xf8a470fd,     0xf8a06209,     0xf8f48097,\n+    0xf8f002ea,     0xf8eb10d9,     0xf8ff21b0,     0xf8f7302c,\n+    0xf8ee52a9,     0xf8f041fa,     0xf8e471e4,     0xf8e863c6,\n+    0xf864823d,     0xf87d013a,     0xf86f1162,     0xf87d20e3,\n+    0xf86132bb,     0xf870510e,     0xf8704336,     0xf86572b4,\n+    0xf8706217,     0xb83e8294,     0xb8200264,     0xb8381284,\n+    0xb8242358,     0xb8333102,     0xb828530e,     0xb83042df,\n+    0xb824703f,     0xb82a6194,     0xb8a080e9,     0xb8b80090,\n+    0xb8bb1146,     0xb8bb21b8,     0xb8b032df,     0xb8b653f4,\n+    0xb8bd41c9,     0xb8b47287,     0xb8bc6169,     0xb8ee828c,\n+    0xb8e10138,     0xb8f3126d,     0xb8f020b0,     0xb8e03183,\n+    0xb8e851ef,     0xb8f041e4,     0xb8fe7005,     0xb8ea6376,\n+    0xb8638120,     0xb873015d,     0xb8781284,     0xb86723b8,\n+    0xb86e3175,     0xb87b51ed,     0xb87f41d1,     0xb863721e,\n+    0xb87660f4,     0xce216874,     0xce104533,     0xce648c15,\n+    0xce8e3302,     0xce6e82ab,     0xce6c87d1,     0xcec08063,\n+    0xce638937,     0x25e0c358,     0x25a1c7d3,     0x0580785a,\n+    0x05426328,     0x05009892,     0x25a0cc29,     0x2561cec8,\n+    0x058044b3,     0x05401c99,     0x05006b49,     0x25e0d6f7,\n+    0x2561c528,     0x0583c8bc,     0x0542522f,     0x05001ec0,\n+    0x25e0de65,     0x25a1c113,     0x05803cad,     0x0540f3c0,\n+    0x0500ab15,     0x2560c28c,     0x2561d7c0,     0x05801ed7,\n+    0x0542633b,     0x05003696,     0x2560d4b4,     0x25e1c918,\n+    0x058021ff,     0x05400e15,     0x0500f3de,     0x0473025a,\n+    0x04bd05ab,     0x658e0025,     0x658a08e2,     0x659a0493,\n+    0x043e1062,     0x04f418b4,     0x046d15bd,     0x04611fce,\n+    0x04d6a07c,     0x04001929,     0x041a09da,     0x04d098f4,\n+    0x04db10d4,     0x0459a3ad,     0x041aa029,     0x041919fb,\n+    0x04d39e24,     0x04118302,     0x04101dba,     0x04d7ae16,\n+    0x04dea571,     0x04180210,     0x05e786fc,     0x05e4915c,\n+    0x04881cf1,     0x044a0f04,     0x04090969,     0x048b16c4,\n+    0x044101e4,     0x04dcbf44,     0x65809745,     0x658d833f,\n+    0x65c68468,     0x65c79b07,     0x65829e38,     0x049dafca,\n+    0x6582bba8,     0x65c0b7ff,     0x65c1b4e0,     0x658dbadd,\n+    0x65819a9d,     0x65ed9246,     0x65b30815,     0x65e6263c,\n+    0x65eebb94,     0x65bad14e,     0x65efe178,     0x65fc5697,\n+    0x65e07f14,     0x040c55a6,     0x04977f4d,     0x043d3046,\n+    0x04b733a0,     0x046830a4,     0x04ed322d,     0x05686948,\n+    0x05bd6c13,     0x65c88ef0,     0x450db3d7,     0x4540b6d9,\n+    0x043e3979,     0x445896ce,     0x445a9005,     0x44d98069,\n+    0x445b87ae,     0x04da348e,     0x04982edb,     0x0499397f,\n+    0x0408338c,     0x04ca309c,     0x65c721e6,     0x65c63641,\n+    0x65982882,     0x04812b8b,     0x0e251083,     0x4e3712d5,\n+    0x0e61101f,     0x4e6d118b,     0x0eba1338,     0x4eb712d5,\n+    0x2e31120f,     0x6e2e11ac,     0x2e6810e6,     0x6e6f11cd,\n+    0x2eaa1128,     0x6eb1120f,\n","filename":"test\/hotspot\/gtest\/aarch64\/asmtest.out.h","additions":292,"deletions":291,"binary":false,"changes":583,"status":"modified"},{"patch":"@@ -0,0 +1,59 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+#include \"classfile\/vmClasses.hpp\"\n+#include \"memory\/resourceArea.hpp\"\n+#include \"oops\/instanceKlass.hpp\"\n+#include \"oops\/jmethodIDTable.hpp\"\n+#include \"oops\/method.hpp\"\n+#include \"unittest.hpp\"\n+#include \"utilities\/growableArray.hpp\"\n+\n+\/\/ Tests for creating and deleting jmethodIDs\n+TEST_VM(jmethodIDTable, test_jmethod_ids) {\n+  InstanceKlass* klass = vmClasses::ClassLoader_klass();\n+  Array<Method*>* methods = klass->methods();\n+  int length = methods->length();\n+  \/\/ How many entries are in the jmethodID table?\n+  uint64_t initial_entries = JmethodIDTable::get_entry_count();\n+  ResourceMark rm;\n+  GrowableArray<uint64_t> ints(10);\n+  for (int i = 0; i < length; i++) {\n+    Method* m = methods->at(i);\n+    jmethodID mid = m->jmethod_id();\n+    ints.push((uint64_t)mid);\n+  }\n+  uint64_t entries_now = JmethodIDTable::get_entry_count();\n+  ASSERT_TRUE(entries_now == initial_entries + length) << \"should have more entries \" << entries_now << \" \" << initial_entries + length;\n+\n+  \/\/ Test that new entries aren't created, and the values are the same.\n+  for (int i = 0; i < length; i++) {\n+    Method* m = methods->at(i);\n+    jmethodID mid = m->jmethod_id();\n+    ASSERT_TRUE(ints.at(i) == (uint64_t)mid) << \"should be the same\";\n+  }\n+  \/\/ should have the same number of entries\n+  entries_now = JmethodIDTable::get_entry_count();\n+  ASSERT_TRUE(entries_now == initial_entries + length) << \"should have more entries \" << entries_now << \" \" << initial_entries + length;\n+}\n+\n","filename":"test\/hotspot\/gtest\/oops\/test_jmethodIDTable.cpp","additions":59,"deletions":0,"binary":false,"changes":59,"status":"added"},{"patch":"@@ -25,1 +25,0 @@\n-#include \"unittest.hpp\"\n@@ -33,0 +32,2 @@\n+#include \"unittest.hpp\"\n+\n@@ -60,1 +61,1 @@\n-  int ret = jio_snprintf(ullong_max, sizeof(ullong_max), JULONG_FORMAT, ULLONG_MAX);\n+  int ret = jio_snprintf(ullong_max, sizeof(ullong_max), \"%llu\", ULLONG_MAX);\n","filename":"test\/hotspot\/gtest\/runtime\/test_arguments.cpp","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -0,0 +1,120 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\n+ *\/\n+\n+#include \"utilities\/debug.hpp\"\n+#include \"utilities\/deferredStatic.hpp\"\n+#include \"utilities\/globalDefinitions.hpp\"\n+\n+#include <type_traits>\n+\n+#include \"unittest.hpp\"\n+\n+class DeferredStaticTestClass {\n+public:\n+  static unsigned _initialized_count;\n+  int _value;\n+  bool _allow_destruction;\n+\n+  DeferredStaticTestClass() : DeferredStaticTestClass(0) {}\n+\n+  DeferredStaticTestClass(int value, bool allow_destruction = false)\n+    : _value(value), _allow_destruction(allow_destruction)\n+  {\n+    ++_initialized_count;\n+  }\n+\n+  ~DeferredStaticTestClass() {\n+    if (!_allow_destruction) {\n+      ShouldNotReachHere();\n+    }\n+  }\n+};\n+\n+unsigned DeferredStaticTestClass::_initialized_count = 0;\n+\n+using TC = DeferredStaticTestClass;\n+\n+DeferredStatic<TC> default_constructed;\n+\n+static_assert(std::is_same<TC*, decltype(default_constructed.get())>::value,\n+              \"expected\");\n+\n+TEST(DeferredStaticTest, default_constructed) {\n+  unsigned init_count = TC::_initialized_count;\n+  default_constructed.initialize();\n+  ASSERT_EQ(init_count + 1, TC::_initialized_count);\n+  ASSERT_EQ(0, default_constructed->_value);\n+  ASSERT_EQ(0, default_constructed.get()->_value);\n+  ASSERT_EQ(0, (*default_constructed)._value);\n+\n+  int new_value = 5;\n+  *default_constructed.get() = TC(new_value, true \/* allow_destruction *\/);\n+  ASSERT_EQ(init_count + 2, TC::_initialized_count);\n+  ASSERT_EQ(new_value, default_constructed->_value);\n+  ASSERT_EQ(new_value, default_constructed.get()->_value);\n+  ASSERT_EQ(new_value, (*default_constructed)._value);\n+\n+  int new_value2 = 8;\n+  default_constructed->_value = new_value2;\n+  ASSERT_EQ(init_count + 2, TC::_initialized_count);\n+  ASSERT_EQ(new_value2, default_constructed->_value);\n+  ASSERT_EQ(new_value2, default_constructed.get()->_value);\n+  ASSERT_EQ(new_value2, (*default_constructed)._value);\n+}\n+\n+DeferredStatic<TC> arg_constructed;\n+\n+TEST(DeferredStaticTest, arg_constructed) {\n+  unsigned init_count = TC::_initialized_count;\n+  int arg = 10;\n+  arg_constructed.initialize(arg);\n+  ASSERT_EQ(init_count + 1, TC::_initialized_count);\n+  ASSERT_EQ(arg, arg_constructed->_value);\n+  ASSERT_EQ(arg, arg_constructed.get()->_value);\n+  ASSERT_EQ(arg, (*arg_constructed)._value);\n+}\n+\n+DeferredStatic<const TC> const_test_object;\n+\n+static_assert(std::is_same<const TC*, decltype(const_test_object.get())>::value,\n+              \"expected\");\n+\n+static_assert(std::is_same<const int*, decltype(&const_test_object->_value)>::value,\n+              \"expected\");\n+\n+TEST(DeferredStaticTest, const_test_object) {\n+  unsigned init_count = TC::_initialized_count;\n+  int arg = 20;\n+  const_test_object.initialize(arg);\n+  ASSERT_EQ(init_count + 1, TC::_initialized_count);\n+  ASSERT_EQ(arg, const_test_object->_value);\n+  ASSERT_EQ(arg, const_test_object.get()->_value);\n+  ASSERT_EQ(arg, (*const_test_object)._value);\n+\n+  \/\/ Doesn't compile, as expected.\n+  \/\/ *const_test_object.get() = TC(0, true \/* allow_destruction *\/);\n+\n+  \/\/ Doesn't compile, as expected.\n+  \/\/ const_test_object->_value = 0;\n+}\n","filename":"test\/hotspot\/gtest\/utilities\/test_deferredStatic.cpp","additions":120,"deletions":0,"binary":false,"changes":120,"status":"added"},{"patch":"@@ -40,1 +40,0 @@\n-gtest\/LockStackGtests.java                              8356201 generic-all\n","filename":"test\/hotspot\/jtreg\/ProblemList-StaticJdk.txt","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -69,0 +69,1 @@\n+compiler\/jvmci\/jdk.vm.ci.code.test\/src\/jdk\/vm\/ci\/code\/test\/CodeInvalidationReasonTest.java 8360168 linux-riscv64\n@@ -82,0 +83,4 @@\n+compiler\/c2\/aarch64\/TestStaticCallStub.java 8359963 linux-aarch64,macosx-aarch64\n+\n+compiler\/onSpinWait\/TestOnSpinWaitAArch64.java 8360936 linux-aarch64,macosx-aarch64\n+\n@@ -127,1 +132,0 @@\n-serviceability\/jvmti\/ModuleAwareAgents\/ThreadStart\/MAAThreadStart.java 8225354 windows-all\n","filename":"test\/hotspot\/jtreg\/ProblemList.txt","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -145,1 +145,0 @@\n-  gtest\/LockStackGtests.java \\\n","filename":"test\/hotspot\/jtreg\/TEST.groups","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2023, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2023, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,36 +24,0 @@\n-\/**\n- * @test\n- * @bug 8316653\n- * @requires vm.debug\n- * @summary Test flag with max value.\n- *\n- * @run main\/othervm -XX:NMethodSizeLimit=1M\n- *                   compiler.arguments.TestC1Globals\n- *\/\n-\n-\/**\n- * @test\n- * @bug 8318817\n- * @requires vm.debug\n- * @requires os.family == \"linux\"\n- * @summary Test flag with max value combined with transparent huge pages on\n- *          Linux.\n- *\n- * @run main\/othervm -XX:NMethodSizeLimit=1M\n- *                   -XX:+UseTransparentHugePages\n- *                   compiler.arguments.TestC1Globals\n- *\/\n-\n-\/**\n- * @test\n- * @bug 8320682\n- * @requires vm.debug\n- * @summary Test flag with max value and specific compilation.\n- *\n- * @run main\/othervm -XX:NMethodSizeLimit=1M\n- *                   -XX:CompileOnly=java.util.HashMap::putMapEntries\n- *                   -Xcomp\n- *                   compiler.arguments.TestC1Globals\n- *\n- *\/\n-\n","filename":"test\/hotspot\/jtreg\/compiler\/arguments\/TestC1Globals.java","additions":1,"deletions":37,"binary":false,"changes":38,"status":"modified"},{"patch":"@@ -0,0 +1,58 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+ \/*\n+ * @test\n+ * @library \/test\/lib \/\n+ * @bug 8356865\n+ * @key randomness\n+ * @requires vm.flagless & vm.compiler2.enabled & vm.debug == true\n+ * @summary Tests that using reasonable values for -XX:FastAllocateSizeLimit does not crash the VM.\n+ * @run driver compiler.arguments.TestFastAllocateSizeLimit\n+ *\/\n+\n+package compiler.arguments;\n+\n+import java.io.IOException;\n+import java.util.Random;\n+\n+import jdk.test.lib.process.ProcessTools;\n+import jdk.test.lib.process.OutputAnalyzer;\n+import jdk.test.lib.Utils;\n+\n+public class TestFastAllocateSizeLimit {\n+    private static final Random RANDOM = Utils.getRandomInstance();\n+\n+    public static void main(String[] args) throws IOException {\n+        if (args.length == 0) {\n+            \/\/ range defined in globals.hpp is [0, (1 << (BitsPerInt - LogBytesPerLong - 1)) - 1]\n+            int sizeLimit = RANDOM.nextInt(1 << 28);\n+            ProcessBuilder pb = ProcessTools.createLimitedTestJavaProcessBuilder(\"-XX:FastAllocateSizeLimit=\" +\n+                sizeLimit, \"-Xcomp\", \"compiler.arguments.TestFastAllocateSizeLimit\", \"run\");\n+            OutputAnalyzer output = new OutputAnalyzer(pb.start());\n+            output.shouldHaveExitValue(0);\n+        } else {\n+            System.out.println(\"Test passed.\");\n+        }\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/compiler\/arguments\/TestFastAllocateSizeLimit.java","additions":58,"deletions":0,"binary":false,"changes":58,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,1 +29,0 @@\n- *                   -XX:+IgnoreUnrecognizedVMOptions -XX:NMethodSizeLimit=655360\n","filename":"test\/hotspot\/jtreg\/compiler\/c1\/TestLinearScanOrderMain.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -35,0 +35,1 @@\n+import compiler.lib.verify.*;\n@@ -39,0 +40,3 @@\n+import compiler.lib.generators.Generator;\n+import static compiler.lib.generators.Generators.G;\n+\n@@ -58,1 +62,2 @@\n-    private static Random r = jdk.test.lib.Utils.getRandomInstance();\n+    private static Generator<Float> genF = G.uniformFloats();\n+    private static Generator<Short> genHF = G.uniformFloat16s();\n@@ -60,5 +65,5 @@\n-    private static final Float16 RANDOM1 = Float16.valueOf(r.nextFloat() * MAX_VALUE.floatValue());\n-    private static final Float16 RANDOM2 = Float16.valueOf(r.nextFloat() * MAX_VALUE.floatValue());\n-    private static final Float16 RANDOM3 = Float16.valueOf(r.nextFloat() * MAX_VALUE.floatValue());\n-    private static final Float16 RANDOM4 = Float16.valueOf(r.nextFloat() * MAX_VALUE.floatValue());\n-    private static final Float16 RANDOM5 = Float16.valueOf(r.nextFloat() * MAX_VALUE.floatValue());\n+    private static final Float16 RANDOM1 = Float16.valueOf(genF.next());\n+    private static final Float16 RANDOM2 = Float16.valueOf(genF.next());\n+    private static final Float16 RANDOM3 = Float16.valueOf(genF.next());\n+    private static final Float16 RANDOM4 = Float16.valueOf(genF.next());\n+    private static final Float16 RANDOM5 = Float16.valueOf(genF.next());\n@@ -71,0 +76,15 @@\n+    private static Float16 POSITIVE_ZERO_VAR = POSITIVE_ZERO;\n+\n+    private static final float INEXACT_FP16 = 2051.0f;\n+    private static final float EXACT_FP16 = 2052.0f;\n+    private static final float SNAN_FP16 = Float.intBitsToFloat(0x7F8000F0);\n+    private static final float QNAN_FP16 = Float.intBitsToFloat(0x7FC00000);\n+\n+    private Float16 GOLDEN_DIV_POT;\n+    private Float16 GOLDEN_MUL2;\n+    private short GOLDEN_INEXACT;\n+    private short GOLDEN_EXACT;\n+    private short GOLDEN_RANDOM_PAT1;\n+    private short GOLDEN_RANDOM_PAT2;\n+    private short GOLDEN_SNAN;\n+    private short GOLDEN_QNAN;\n@@ -81,5 +101,13 @@\n-        fl = new float[count];\n-        for (int i = 0; i < count; i++) {\n-            src[i] = Float.floatToFloat16(r.nextFloat() * MAX_VALUE.floatValue());\n-            fl[i] = r.nextFloat();\n-        }\n+        fl  = new float[count];\n+\n+        G.fill(genF, fl);\n+        G.fill(genHF, src);\n+\n+        GOLDEN_DIV_POT = testDivByPOT();\n+        GOLDEN_MUL2 = testMulByTWO();\n+        GOLDEN_INEXACT = testInexactFP16ConstantPatterns();\n+        GOLDEN_EXACT = testExactFP16ConstantPatterns();\n+        GOLDEN_RANDOM_PAT1 = testRandomFP16ConstantPatternSet1();\n+        GOLDEN_RANDOM_PAT2 = testRandomFP16ConstantPatternSet2();\n+        GOLDEN_SNAN = testSNaNFP16ConstantPatterns();\n+        GOLDEN_QNAN = testQNaNFP16ConstantPatterns();\n@@ -273,1 +301,1 @@\n-    public void testDivByPOT() {\n+    public Float16 testDivByPOT() {\n@@ -284,1 +312,6 @@\n-        dst[0] = float16ToRawShortBits(res);\n+        return res;\n+    }\n+\n+    @Check(test=\"testDivByPOT\")\n+    public void checkDivByPOT(Float16 actual) {\n+        Verify.checkEQ(Float16.float16ToRawShortBits(GOLDEN_DIV_POT), Float16.float16ToRawShortBits(actual));\n@@ -292,1 +325,1 @@\n-    public void testMulByTWO() {\n+    public Float16 testMulByTWO() {\n@@ -299,1 +332,6 @@\n-        assertResult(res.floatValue(), (float)((20 * (20 - 1))\/2) * 2.0f, \"testMulByTWO\");\n+        return res;\n+    }\n+\n+    @Check(test=\"testMulByTWO\")\n+    public void checkMulByTWO(Float16 actual) {\n+        Verify.checkEQ(Float16.float16ToRawShortBits(GOLDEN_MUL2), Float16.float16ToRawShortBits(actual));\n@@ -302,0 +340,130 @@\n+    @Test\n+    @IR(counts = {IRNode.ADD_HF, \" 0 \", IRNode.SUB_HF, \" 0 \", IRNode.MUL_HF, \" 0 \", IRNode.DIV_HF, \" 0 \"},\n+        applyIfCPUFeatureOr = {\"avx512_fp16\", \"true\", \"zfh\", \"true\"})\n+    @IR(counts = {IRNode.ADD_HF, \" 0 \", IRNode.SUB_HF, \" 0 \", IRNode.MUL_HF, \" 0 \", IRNode.DIV_HF, \" 0 \"},\n+        applyIfCPUFeatureAnd = {\"fphp\", \"true\", \"asimdhp\", \"true\"})\n+    \/\/ Test point checks various floating point operations with exactly one floating\n+    \/\/ point constant value passed as left or right argument, it then downcasts the\n+    \/\/ result of computation to a float16 value. This pattern is used to infer a\n+    \/\/ float16 IR during idealization. Floating point constant input is not-representable\n+    \/\/ in float16 value range and is an inexact float16 value thereby preventing\n+    \/\/ float16 IR inference.\n+    public short testInexactFP16ConstantPatterns() {\n+        short res = 0;\n+        res += Float.floatToFloat16(POSITIVE_ZERO_VAR.floatValue() + INEXACT_FP16);\n+        res += Float.floatToFloat16(POSITIVE_ZERO_VAR.floatValue() - INEXACT_FP16);\n+        res += Float.floatToFloat16(INEXACT_FP16 * POSITIVE_ZERO_VAR.floatValue());\n+        res += Float.floatToFloat16(POSITIVE_ZERO_VAR.floatValue() \/ INEXACT_FP16);\n+        return res;\n+    }\n+\n+    @Check(test=\"testInexactFP16ConstantPatterns\")\n+    public void checkInexactFP16ConstantPatterns(short actual) {\n+        Verify.checkEQ(GOLDEN_INEXACT, actual);\n+    }\n+\n+    @Test\n+    @IR(counts = {IRNode.ADD_HF, \" >0 \", IRNode.SUB_HF, \" >0 \", IRNode.MUL_HF, \" >0 \", IRNode.DIV_HF, \" >0 \"},\n+        applyIfCPUFeatureOr = {\"avx512_fp16\", \"true\", \"zfh\", \"true\"})\n+    @IR(counts = {IRNode.ADD_HF, \" >0 \", IRNode.SUB_HF, \" >0 \", IRNode.MUL_HF, \" >0 \", IRNode.DIV_HF, \" >0 \"},\n+        applyIfCPUFeatureAnd = {\"fphp\", \"true\", \"asimdhp\", \"true\"})\n+    @Warmup(10000)\n+    public short testSNaNFP16ConstantPatterns() {\n+        short res = 0;\n+        res += Float.floatToFloat16(POSITIVE_ZERO_VAR.floatValue() + SNAN_FP16);\n+        res += Float.floatToFloat16(POSITIVE_ZERO_VAR.floatValue() - SNAN_FP16);\n+        res += Float.floatToFloat16(POSITIVE_ZERO_VAR.floatValue() * SNAN_FP16);\n+        res += Float.floatToFloat16(POSITIVE_ZERO_VAR.floatValue() \/ SNAN_FP16);\n+        return res;\n+    }\n+\n+    @Check(test=\"testSNaNFP16ConstantPatterns\")\n+    public void checkSNaNFP16ConstantPatterns(short actual) {\n+        Verify.checkEQ(GOLDEN_SNAN, actual);\n+    }\n+\n+    @Test\n+    @IR(counts = {IRNode.ADD_HF, \" >0 \", IRNode.SUB_HF, \" >0 \", IRNode.MUL_HF, \" >0 \", IRNode.DIV_HF, \" >0 \"},\n+        applyIfCPUFeatureOr = {\"avx512_fp16\", \"true\", \"zfh\", \"true\"})\n+    @IR(counts = {IRNode.ADD_HF, \" >0 \", IRNode.SUB_HF, \" >0 \", IRNode.MUL_HF, \" >0 \", IRNode.DIV_HF, \" >0 \"},\n+        applyIfCPUFeatureAnd = {\"fphp\", \"true\", \"asimdhp\", \"true\"})\n+    @Warmup(10000)\n+    public short testQNaNFP16ConstantPatterns() {\n+        short res = 0;\n+        res += Float.floatToFloat16(POSITIVE_ZERO_VAR.floatValue() + QNAN_FP16);\n+        res += Float.floatToFloat16(POSITIVE_ZERO_VAR.floatValue() - QNAN_FP16);\n+        res += Float.floatToFloat16(POSITIVE_ZERO_VAR.floatValue() * QNAN_FP16);\n+        res += Float.floatToFloat16(POSITIVE_ZERO_VAR.floatValue() \/ QNAN_FP16);\n+        return res;\n+    }\n+\n+    @Check(test=\"testQNaNFP16ConstantPatterns\")\n+    public void checkQNaNFP16ConstantPatterns(short actual) {\n+        Verify.checkEQ(GOLDEN_QNAN, actual);\n+    }\n+\n+    @Test\n+    @IR(counts = {IRNode.ADD_HF, \" >0 \", IRNode.SUB_HF, \" >0 \", IRNode.MUL_HF, \" >0 \", IRNode.DIV_HF, \" >0 \"},\n+        applyIfCPUFeatureOr = {\"avx512_fp16\", \"true\", \"zfh\", \"true\"})\n+    @IR(counts = {IRNode.ADD_HF, \" >0 \", IRNode.SUB_HF, \" >0 \", IRNode.MUL_HF, \" >0 \", IRNode.DIV_HF, \" >0 \"},\n+        applyIfCPUFeatureAnd = {\"fphp\", \"true\", \"asimdhp\", \"true\"})\n+    @Warmup(10000)\n+    \/\/ Test point checks various floating point operations with exactly one floating\n+    \/\/ point constant value passed as left or right argument, it then downcasts the\n+    \/\/ result of computation to a float16 value. This pattern is used to infer a\n+    \/\/ Float16 IR during idealization. Floating point constant input is representable\n+    \/\/ in Float16 value range thereby leading to a successful Float16 IR inference.\n+    public short testExactFP16ConstantPatterns() {\n+        short res = 0;\n+        res += Float.floatToFloat16(EXACT_FP16 + POSITIVE_ZERO_VAR.floatValue());\n+        res += Float.floatToFloat16(POSITIVE_ZERO_VAR.floatValue() - EXACT_FP16);\n+        res += Float.floatToFloat16(POSITIVE_ZERO_VAR.floatValue() * EXACT_FP16);\n+        res += Float.floatToFloat16(POSITIVE_ZERO_VAR.floatValue() \/ EXACT_FP16);\n+        return res;\n+    }\n+\n+    @Check(test=\"testExactFP16ConstantPatterns\")\n+    public void checkExactFP16ConstantPatterns(short actual) {\n+        Verify.checkEQ(GOLDEN_EXACT, actual);\n+    }\n+\n+    @Test\n+    @IR(counts = {IRNode.ADD_HF, \" >0 \", IRNode.SUB_HF, \" >0 \", IRNode.MUL_HF, \" >0 \", IRNode.DIV_HF, \" >0 \"},\n+        applyIfCPUFeatureOr = {\"avx512_fp16\", \"true\", \"zfh\", \"true\"})\n+    @IR(counts = {IRNode.ADD_HF, \" >0 \", IRNode.SUB_HF, \" >0 \", IRNode.MUL_HF, \" >0 \", IRNode.DIV_HF, \" >0 \"},\n+        applyIfCPUFeatureAnd = {\"fphp\", \"true\", \"asimdhp\", \"true\"})\n+    @Warmup(10000)\n+    public short testRandomFP16ConstantPatternSet1() {\n+        short res = 0;\n+        res += Float.floatToFloat16(RANDOM1_VAR.floatValue() + RANDOM2.floatValue());\n+        res += Float.floatToFloat16(RANDOM2_VAR.floatValue() - RANDOM3.floatValue());\n+        res += Float.floatToFloat16(RANDOM3_VAR.floatValue() * RANDOM4.floatValue());\n+        res += Float.floatToFloat16(RANDOM4_VAR.floatValue() \/ RANDOM5.floatValue());\n+        return res;\n+    }\n+\n+    @Check(test=\"testRandomFP16ConstantPatternSet1\")\n+    public void checkRandomFP16ConstantPatternSet1(short actual) {\n+        Verify.checkEQ(GOLDEN_RANDOM_PAT1, actual);\n+    }\n+\n+\n+    @Test\n+    @IR(counts = {IRNode.ADD_HF, \" >0 \", IRNode.SUB_HF, \" >0 \", IRNode.MUL_HF, \" >0 \", IRNode.DIV_HF, \" >0 \"},\n+        applyIfCPUFeatureOr = {\"avx512_fp16\", \"true\", \"zfh\", \"true\"})\n+    @IR(counts = {IRNode.ADD_HF, \" >0 \", IRNode.SUB_HF, \" >0 \", IRNode.MUL_HF, \" >0 \", IRNode.DIV_HF, \" >0 \"},\n+        applyIfCPUFeatureAnd = {\"fphp\", \"true\", \"asimdhp\", \"true\"})\n+    @Warmup(10000)\n+    public short testRandomFP16ConstantPatternSet2() {\n+        short res = 0;\n+        res += Float.floatToFloat16(RANDOM2.floatValue() + RANDOM1_VAR.floatValue());\n+        res += Float.floatToFloat16(RANDOM3.floatValue() - RANDOM2_VAR.floatValue());\n+        res += Float.floatToFloat16(RANDOM4.floatValue() * RANDOM3_VAR.floatValue());\n+        res += Float.floatToFloat16(RANDOM5.floatValue() \/ RANDOM4_VAR.floatValue());\n+        return res;\n+    }\n+\n+    @Check(test=\"testRandomFP16ConstantPatternSet2\")\n+    public void checkRandomFP16ConstantPatternSet2(short actual) {\n+        Verify.checkEQ(GOLDEN_RANDOM_PAT2, actual);\n+    }\n@@ -376,0 +544,1 @@\n+    @Warmup(10000)\n@@ -378,3 +547,3 @@\n-        assertResult(subtract(Float16.NaN, valueOf(2.0f)).floatValue(), Float.NaN, \"testAddConstantFolding\");\n-        assertResult(subtract(Float16.NaN, Float16.NaN).floatValue(), Float.NaN, \"testAddConstantFolding\");\n-        assertResult(subtract(Float16.NaN, Float16.POSITIVE_INFINITY).floatValue(), Float.NaN, \"testAddConstantFolding\");\n+        assertResult(subtract(Float16.NaN, valueOf(2.0f)).floatValue(), Float.NaN, \"testSubConstantFolding\");\n+        assertResult(subtract(Float16.NaN, Float16.NaN).floatValue(), Float.NaN, \"testSubConstantFolding\");\n+        assertResult(subtract(Float16.NaN, Float16.POSITIVE_INFINITY).floatValue(), Float.NaN, \"testSubConstantFolding\");\n@@ -383,1 +552,1 @@\n-        assertResult(subtract(Float16.POSITIVE_INFINITY, Float16.NEGATIVE_INFINITY).floatValue(), Float.POSITIVE_INFINITY, \"testAddConstantFolding\");\n+        assertResult(subtract(Float16.POSITIVE_INFINITY, Float16.NEGATIVE_INFINITY).floatValue(), Float.POSITIVE_INFINITY, \"testSubConstantFolding\");\n@@ -386,2 +555,2 @@\n-        assertResult(subtract(Float16.POSITIVE_INFINITY, Float16.POSITIVE_INFINITY).floatValue(), Float.NaN, \"testAddConstantFolding\");\n-        assertResult(subtract(Float16.NEGATIVE_INFINITY, Float16.NEGATIVE_INFINITY).floatValue(), Float.NaN, \"testAddConstantFolding\");\n+        assertResult(subtract(Float16.POSITIVE_INFINITY, Float16.POSITIVE_INFINITY).floatValue(), Float.NaN, \"testSubConstantFolding\");\n+        assertResult(subtract(Float16.NEGATIVE_INFINITY, Float16.NEGATIVE_INFINITY).floatValue(), Float.NaN, \"testSubConstantFolding\");\n@@ -390,2 +559,2 @@\n-        assertResult(subtract(Float16.POSITIVE_INFINITY, valueOf(2.0f)).floatValue(), Float.POSITIVE_INFINITY, \"testAddConstantFolding\");\n-        assertResult(subtract(Float16.NEGATIVE_INFINITY, valueOf(2.0f)).floatValue(), Float.NEGATIVE_INFINITY, \"testAddConstantFolding\");\n+        assertResult(subtract(Float16.POSITIVE_INFINITY, valueOf(2.0f)).floatValue(), Float.POSITIVE_INFINITY, \"testSubConstantFolding\");\n+        assertResult(subtract(Float16.NEGATIVE_INFINITY, valueOf(2.0f)).floatValue(), Float.NEGATIVE_INFINITY, \"testSubConstantFolding\");\n@@ -394,1 +563,1 @@\n-        assertResult(subtract(NEGATIVE_ZERO, POSITIVE_ZERO).floatValue(), 0.0f, \"testAddConstantFolding\");\n+        assertResult(subtract(NEGATIVE_ZERO, POSITIVE_ZERO).floatValue(), 0.0f, \"testSubConstantFolding\");\n@@ -397,1 +566,1 @@\n-        assertResult(subtract(NEGATIVE_MAX_VALUE, MAX_HALF_ULP).floatValue(), Float.NEGATIVE_INFINITY, \"testAddConstantFolding\");\n+        assertResult(subtract(NEGATIVE_MAX_VALUE, MAX_HALF_ULP).floatValue(), Float.NEGATIVE_INFINITY, \"testSubConstantFolding\");\n@@ -400,1 +569,1 @@\n-        assertResult(subtract(NEGATIVE_MAX_VALUE, LT_MAX_HALF_ULP).floatValue(), NEGATIVE_MAX_VALUE.floatValue(), \"testAddConstantFolding\");\n+        assertResult(subtract(NEGATIVE_MAX_VALUE, LT_MAX_HALF_ULP).floatValue(), NEGATIVE_MAX_VALUE.floatValue(), \"testSubConstantFolding\");\n@@ -402,1 +571,1 @@\n-        assertResult(subtract(valueOf(1.0f), valueOf(2.0f)).floatValue(), -1.0f, \"testAddConstantFolding\");\n+        assertResult(subtract(valueOf(1.0f), valueOf(2.0f)).floatValue(), -1.0f, \"testSubConstantFolding\");\n@@ -406,1 +575,0 @@\n-    @Warmup(value = 10000)\n@@ -411,0 +579,1 @@\n+    @Warmup(10000)\n@@ -431,0 +600,1 @@\n+    @Warmup(10000)\n@@ -450,0 +620,1 @@\n+    @Warmup(10000)\n@@ -492,0 +663,1 @@\n+    @Warmup(10000)\n@@ -517,0 +689,1 @@\n+    @Warmup(10000)\n@@ -538,0 +711,1 @@\n+    @Warmup(10000)\n@@ -575,0 +749,1 @@\n+    @Warmup(10000)\n@@ -611,1 +786,0 @@\n-    @Warmup(value = 10000)\n@@ -618,0 +792,1 @@\n+    @Warmup(10000)\n","filename":"test\/hotspot\/jtreg\/compiler\/c2\/irTests\/TestFloat16ScalarOperations.java","additions":204,"deletions":29,"binary":false,"changes":233,"status":"modified"},{"patch":"@@ -0,0 +1,118 @@\n+\/*\n+ * Copyright (c) 2025, Institute of Software, Chinese Academy of Sciences.\n+ * All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package compiler.c2.irTests.stringopts;\n+\n+import compiler.lib.ir_framework.*;\n+\n+\/**\n+ * @test\n+ * @bug 8359270\n+ * @requires vm.debug == true & vm.compiler2.enabled\n+ * @requires os.arch==\"amd64\" | os.arch==\"x86_64\" | os.arch==\"riscv64\" | os.arch==\"aarch64\"\n+ * @summary C2: alignment check should consider base offset when emitting arraycopy runtime call.\n+ * @library \/test\/lib \/\n+ * @run driver compiler.c2.irTests.stringopts.TestArrayCopySelect\n+ *\/\n+\n+public class TestArrayCopySelect {\n+\n+    public static final String input_strU = \"\\u0f21\\u0f22\\u0f23\\u0f24\\u0f25\\u0f26\\u0f27\\u0f28\";\n+    public static final char[] input_arrU = new char[] {'\\u0f21', '\\u0f22', '\\u0f23', '\\u0f24',\n+                                                        '\\u0f25', '\\u0f26', '\\u0f27', '\\u0f28'};\n+\n+    public static String output_strU;\n+    public static char[] output_arrU;\n+\n+    public static void main(String[] args) {\n+        TestFramework.runWithFlags(\"-XX:-UseCompactObjectHeaders\",\n+                                   \"-XX:-CompactStrings\",\n+                                   \"-XX:CompileCommand=inline,java.lang.StringBuilder::toString\",\n+                                   \"-XX:CompileCommand=inline,java.lang.StringUTF16::getChars\",\n+                                   \"-XX:CompileCommand=inline,java.lang.StringUTF16::toBytes\");\n+\n+        TestFramework.runWithFlags(\"-XX:+UseCompactObjectHeaders\",\n+                                   \"-XX:-CompactStrings\",\n+                                   \"-XX:CompileCommand=inline,java.lang.StringBuilder::toString\",\n+                                   \"-XX:CompileCommand=inline,java.lang.StringUTF16::getChars\",\n+                                   \"-XX:CompileCommand=inline,java.lang.StringUTF16::toBytes\");\n+    }\n+\n+    @Test\n+    @Warmup(10000)\n+    @IR(applyIf = {\"UseCompactObjectHeaders\", \"false\"},\n+        counts = {IRNode.CALL_OF, \"arrayof_jshort_disjoint_arraycopy\", \">0\"})\n+    static void testSBToStringAligned() {\n+        \/\/ Exercise the StringBuilder.toString API\n+        StringBuilder sb = new StringBuilder(input_strU);\n+        output_strU = sb.append(input_strU).toString();\n+    }\n+\n+    @Test\n+    @Warmup(10000)\n+    @IR(applyIf = {\"UseCompactObjectHeaders\", \"true\"},\n+        counts = {IRNode.CALL_OF, \"arrayof_jshort_disjoint_arraycopy\", \"0\"})\n+    static void testSBToStringUnAligned() {\n+        \/\/ Exercise the StringBuilder.toString API\n+        StringBuilder sb = new StringBuilder(input_strU);\n+        output_strU = sb.append(input_strU).toString();\n+    }\n+\n+    @Test\n+    @Warmup(10000)\n+    @IR(applyIf = {\"UseCompactObjectHeaders\", \"false\"},\n+        counts = {IRNode.CALL_OF, \"arrayof_jshort_disjoint_arraycopy\", \">0\"})\n+    static void testStrUGetCharsAligned() {\n+        \/\/ Exercise the StringUTF16.getChars API\n+        output_arrU = input_strU.toCharArray();\n+    }\n+\n+    @Test\n+    @Warmup(10000)\n+    @IR(applyIf = {\"UseCompactObjectHeaders\", \"true\"},\n+        counts = {IRNode.CALL_OF, \"arrayof_jshort_disjoint_arraycopy\", \"0\"})\n+    static void testStrUGetCharsUnAligned() {\n+        \/\/ Exercise the StringUTF16.getChars API\n+        output_arrU = input_strU.toCharArray();\n+    }\n+\n+    @Test\n+    @Warmup(10000)\n+    @IR(applyIf = {\"UseCompactObjectHeaders\", \"false\"},\n+        counts = {IRNode.CALL_OF, \"arrayof_jshort_disjoint_arraycopy\", \">0\"})\n+    static void testStrUtoBytesAligned() {\n+        \/\/ Exercise the StringUTF16.toBytes API\n+        output_strU = String.valueOf(input_arrU);\n+    }\n+\n+    @Test\n+    @Warmup(10000)\n+    @IR(applyIf = {\"UseCompactObjectHeaders\", \"true\"},\n+        counts = {IRNode.CALL_OF, \"arrayof_jshort_disjoint_arraycopy\", \"0\"})\n+    static void testStrUtoBytesUnAligned() {\n+        \/\/ Exercise the StringUTF16.toBytes API\n+        output_strU = String.valueOf(input_arrU);\n+    }\n+\n+}\n","filename":"test\/hotspot\/jtreg\/compiler\/c2\/irTests\/stringopts\/TestArrayCopySelect.java","additions":118,"deletions":0,"binary":false,"changes":118,"status":"added"},{"patch":"@@ -191,1 +191,1 @@\n-        long minUseSpace = WHITE_BOX.getUintxVMFlag(\"CodeCacheMinimumUseSpace\");\n+        long minUseSpace = WHITE_BOX.getSizeTVMFlag(\"CodeCacheMinimumUseSpace\");\n","filename":"test\/hotspot\/jtreg\/compiler\/codecache\/CheckSegmentedCodeCache.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -0,0 +1,77 @@\n+\/*\n+ * Copyright (c) 2025 IBM Corporation. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8358694\n+ * @summary Verifies that CodeCacheSegmentSize enforces power-of-two constraint:\n+ *          - fails gracefully for invalid value\n+ *          - succeeds for valid value\n+ * @library \/test\/lib\n+ * @run driver CodeCacheSegmentSizeTest\n+ *\/\n+\n+import jdk.test.lib.Platform;\n+import jdk.test.lib.process.ProcessTools;\n+import jdk.test.lib.process.OutputAnalyzer;\n+\n+public class CodeCacheSegmentSizeTest {\n+    public static void main(String[] args) throws Exception {\n+        testInvalidValue();\n+        testValidValue();\n+    }\n+\n+    private static void testInvalidValue() throws Exception {\n+        ProcessBuilder pb = ProcessTools.createLimitedTestJavaProcessBuilder(\n+            \"-XX:+UnlockExperimentalVMOptions\",\n+            \"-XX:CodeCacheSegmentSize=65\", \/\/ invalid value (not power of two)\n+            \"-version\"\n+        );\n+\n+        OutputAnalyzer output = new OutputAnalyzer(pb.start());\n+\n+        \/\/ Ensure no crash (no assert failure)\n+        output.shouldNotContain(\"assert\");\n+\n+        \/\/ Expected graceful error output\n+        output.shouldContain(\"CodeCacheSegmentSize (65) must be a power of two\");\n+        output.shouldContain(\"Error: Could not create the Java Virtual Machine.\");\n+        output.shouldContain(\"Error: A fatal exception has occurred. Program will exit.\");\n+\n+        \/\/ Graceful exit with error code 1\n+        output.shouldHaveExitValue(1);\n+    }\n+\n+    private static void testValidValue() throws Exception {\n+        ProcessBuilder pb = ProcessTools.createLimitedTestJavaProcessBuilder(\n+            \"-XX:+UnlockExperimentalVMOptions\",\n+            \"-XX:CodeCacheSegmentSize=64\", \/\/ a valid power of 2\n+            \"-version\"\n+        );\n+\n+        OutputAnalyzer output = new OutputAnalyzer(pb.start());\n+\n+        output.shouldHaveExitValue(0);\n+    }\n+}\n+\n","filename":"test\/hotspot\/jtreg\/compiler\/codecache\/CodeCacheSegmentSizeTest.java","additions":77,"deletions":0,"binary":false,"changes":77,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -44,1 +44,1 @@\n-            = WhiteBox.getWhiteBox().getUintxVMFlag(\"CodeCacheSegmentSize\");\n+            = WhiteBox.getWhiteBox().getSizeTVMFlag(\"CodeCacheSegmentSize\");\n@@ -46,1 +46,1 @@\n-            = WhiteBox.getWhiteBox().getUintxVMFlag(\"CodeCacheMinBlockLength\");\n+            = WhiteBox.getWhiteBox().getSizeTVMFlag(\"CodeCacheMinBlockLength\");\n","filename":"test\/hotspot\/jtreg\/compiler\/codecache\/jmx\/CodeCacheUtils.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -56,1 +56,1 @@\n-            = Helper.WHITE_BOX.getUintxVMFlag(\"ReservedCodeCacheSize\");\n+            = Helper.WHITE_BOX.getSizeTVMFlag(\"ReservedCodeCacheSize\");\n","filename":"test\/hotspot\/jtreg\/compiler\/codecache\/stress\/RandomAllocationTest.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -51,2 +51,2 @@\n-    private static final long largeBlobSize = Helper.WHITE_BOX.getUintxVMFlag(\"ReservedCodeCacheSize\") >> 6;\n-    private static final long codeCacheMinBlockLength = Helper.WHITE_BOX.getUintxVMFlag(\"CodeCacheMinBlockLength\");\n+    private static final long largeBlobSize = Helper.WHITE_BOX.getSizeTVMFlag(\"ReservedCodeCacheSize\") >> 6;\n+    private static final long codeCacheMinBlockLength = Helper.WHITE_BOX.getSizeTVMFlag(\"CodeCacheMinBlockLength\");\n","filename":"test\/hotspot\/jtreg\/compiler\/codecache\/stress\/ReturnBlobToWrongHeapTest.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -0,0 +1,382 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test id=GetAndSet\n+ * @bug 8020282\n+ * @summary Test that we do not generate redundant leas on x86 for AtomicReference.getAndSet.\n+ * @requires os.simpleArch == \"x64\" & vm.opt.TieredCompilation != false\n+ * @modules jdk.compiler\/com.sun.tools.javac.util\n+ * @library \/test\/lib \/\n+ * @run driver compiler.codegen.TestRedundantLea GetAndSet\n+ *\/\n+\n+\/*\n+ * @test id=StringEquals\n+ * @bug 8020282\n+ * @summary Test that we do not generate redundant leas on x86 for String.Equals.\n+ * @requires os.simpleArch == \"x64\" & vm.opt.TieredCompilation != false\n+ * @modules jdk.compiler\/com.sun.tools.javac.util\n+ * @library \/test\/lib \/\n+ * @run driver compiler.codegen.TestRedundantLea StringEquals\n+ *\/\n+\n+\/*\n+ * @test id=StringInflate\n+ * @bug 8020282\n+ * @summary Test that we do not generate redundant leas on x86 for StringConcat intrinsics.\n+ * @requires os.simpleArch == \"x64\" & vm.opt.TieredCompilation != false\n+ * @modules jdk.compiler\/com.sun.tools.javac.util\n+ * @library \/test\/lib \/\n+ * @run driver compiler.codegen.TestRedundantLea StringInflate\n+ *\/\n+\n+\/*\n+ * @test id=RegexFind\n+ * @bug 8020282\n+ * @summary Test that we do not generate redundant leas on x86 when performing regex matching.\n+ * @requires os.simpleArch == \"x64\" & vm.opt.TieredCompilation != false & vm.opt.UseAvx == 3\n+ * @modules jdk.compiler\/com.sun.tools.javac.util\n+ * @library \/test\/lib \/\n+ * @run driver compiler.codegen.TestRedundantLea RegexFind\n+ *\/\n+\n+\/*\n+ * @test id=StoreNSerial\n+ * @bug 8020282\n+ * @summary Test that we do not generate redundant leas on x86 when storing narrow oops to object arrays.\n+ * @requires os.simpleArch == \"x64\" & vm.gc.Serial\n+ * @modules jdk.compiler\/com.sun.tools.javac.util\n+ * @library \/test\/lib \/\n+ * @run driver compiler.codegen.TestRedundantLea StoreNSerial\n+ *\/\n+\n+\/*\n+ * @test id=StoreNParallel\n+ * @bug 8020282\n+ * @summary Test that we do not generate redundant leas on x86 when storing narrow oops to object arrays.\n+ * @requires os.simpleArch == \"x64\" & vm.gc.Parallel\n+ * @modules jdk.compiler\/com.sun.tools.javac.util\n+ * @library \/test\/lib \/\n+ * @run driver compiler.codegen.TestRedundantLea StoreNParallel\n+ *\/\n+\n+\n+package compiler.codegen;\n+\n+import java.util.concurrent.atomic.*;\n+import java.util.regex.Matcher;\n+import java.util.regex.Pattern;\n+\n+import com.sun.tools.javac.util.*;\n+\n+import compiler.lib.ir_framework.*;\n+\n+\/\/ The following tests ensure that we do not generate a redundant lea instruction on x86.\n+\/\/ These get generated on chained dereferences for the rules leaPCompressedOopOffset,\n+\/\/ leaP8Narrow, and leaP32Narrow and stem from a decodeHeapOopNotNull that is not needed\n+\/\/ unless the derived oop is added to an oop map. The redundant lea is removed with an\n+\/\/ opto assembly peephole optimization. Hence, all tests below feature a negative test\n+\/\/ run with -XX:-OptoPeephole to detect changes that obsolete that peephole.\n+\/\/ Further, all tests are run with different max heap sizes to trigger the generation of\n+\/\/ different lea match rules: -XX:MaxHeapSize=32m generates leaP(8|32)Narrow and\n+\/\/ -XX:MaxHeapSize=4g generates leaPCompressedOopOffset, since the address computation\n+\/\/ needs to shift left by 3.\n+public class TestRedundantLea {\n+    public static void main(String[] args) {\n+        String testName = args[0];\n+        TestFramework framework;\n+        switch (testName) {\n+            case \"GetAndSet\" -> {\n+                framework = new TestFramework(GetAndSetTest.class);\n+            }\n+            case \"StringEquals\" -> {\n+                framework = new TestFramework(StringEqualsTest.class);\n+                framework.addHelperClasses(StringEqualsTestHelper.class);\n+            }\n+            case \"StringInflate\" -> {\n+                framework = new TestFramework(StringInflateTest.class);\n+                framework.addFlags(\"--add-exports=jdk.compiler\/com.sun.tools.javac.util=ALL-UNNAMED\");\n+            }\n+            case \"RegexFind\" -> {\n+                framework = new TestFramework(RegexFindTest.class);\n+            }\n+            case \"StoreNSerial\" -> {\n+                framework = new TestFramework(StoreNTest.class);\n+                framework.addFlags(\"-XX:+UseSerialGC\");\n+            }\n+            case \"StoreNParallel\" -> {\n+                framework = new TestFramework(StoreNTest.class);\n+                framework.addFlags(\"-XX:+UseParallelGC\");\n+            }\n+            default -> {\n+                throw new IllegalArgumentException(\"Unknown test name \\\"\" + testName +\"\\\"\");\n+            }\n+        }\n+\n+        Scenario[] scenarios = new Scenario[2];\n+        \/\/ Scenario for the negative test without peephole optimizations.\n+        scenarios[0] = new Scenario(0, \"-XX:+IgnoreUnrecognizedVMOptions\", \"-XX:-OptoPeephole\");\n+        \/\/ Scenario for the positive test with +OptoPeephole (the default on x64).\n+        scenarios[1] = new Scenario(1);\n+        framework.addScenarios(scenarios).start();\n+    }\n+}\n+\n+\/\/ This generates a leaP* rule for the chained dereference of obj.value that\n+\/\/ gets passed to the get and set VM intrinsic.\n+class GetAndSetTest {\n+    private static final Object CURRENT = new Object();\n+    private final AtomicReference<Object> obj = new AtomicReference<Object>();\n+\n+    @Test\n+    @IR(counts = {IRNode.LEA_P, \"=1\"},\n+        phase = {CompilePhase.FINAL_CODE},\n+        applyIfPlatform = {\"mac\", \"false\"})\n+    \/\/ Negative test\n+    @IR(counts = {IRNode.DECODE_HEAP_OOP_NOT_NULL, \"=1\"},\n+        phase = {CompilePhase.FINAL_CODE},\n+        applyIf = {\"OptoPeephole\", \"false\"})\n+    \/\/ Test that the peephole worked for leaP(8|32)Narrow\n+    @IR(failOn = {IRNode.DECODE_HEAP_OOP_NOT_NULL},\n+        phase = {CompilePhase.FINAL_CODE},\n+        applyIf = {\"OptoPeephole\", \"true\"})\n+    public void testGetAndSet() {\n+        obj.getAndSet(CURRENT);\n+    }\n+}\n+\n+\/\/ This generates leaP* rules for the chained dereferences of the String.value\n+\/\/ fields that are used in the string_equals VM intrinsic.\n+class StringEqualsTest {\n+    final StringEqualsTestHelper strEqHelper = new StringEqualsTestHelper(\"I am the string that is tested against\");\n+\n+    @Setup\n+    private static Object[] setup() {\n+        return new Object[]{\"I will be compared!\"};\n+    }\n+\n+    @Test\n+    @IR(counts = {IRNode.LEA_P, \"=2\"},\n+        phase = {CompilePhase.FINAL_CODE},\n+        applyIfPlatform = {\"mac\", \"false\"})\n+    \/\/ Negative test\n+    @IR(counts = {IRNode.DECODE_HEAP_OOP_NOT_NULL, \"=3\"},\n+        phase = {CompilePhase.FINAL_CODE},\n+        applyIf = {\"OptoPeephole\", \"false\"})\n+    \/\/ Test that the peephole worked for leaPCompressedOopOffset\n+    @IR(counts = {IRNode.DECODE_HEAP_OOP_NOT_NULL, \"=1\"},\n+        phase = {CompilePhase.FINAL_CODE},\n+        applyIf = {\"OptoPeephole\", \"true\"})\n+    @Arguments(setup = \"setup\")\n+    public boolean test(String str) {\n+        return strEqHelper.doEquals(str);\n+    }\n+}\n+\n+class StringEqualsTestHelper {\n+    private String str;\n+\n+    public StringEqualsTestHelper(String str) {\n+        this.str = str;\n+    }\n+\n+    @ForceInline\n+    public boolean doEquals(String other) {\n+        return this.str.equals(other);\n+    }\n+}\n+\n+\/\/ With all VM instrinsics disabled, this test only generates a leaP* rule\n+\/\/ before the string_inflate intrinsic (with -XX:-OptimizeStringConcat no\n+\/\/ leaP* rule is generated). With VM intrinsics enabled (this is the case\n+\/\/ here) leaP* rules are also generated for the string_equals and arrays_hashcode\n+\/\/ VM instrinsics.\n+\/\/ This generates a larger number of decodes for -XX:UseAVX={0,1} than for\n+\/\/ other flags.\n+class StringInflateTest {\n+    @Setup\n+    private static Object[] setup() {\n+        Names names = new Names(new Context());\n+        Name n1 = names.fromString(\"one\");\n+        Name n2 = names.fromString(\"two\");\n+        return new Object[] {n1, n2};\n+    }\n+\n+    @Test\n+    @IR(counts = {IRNode.LEA_P, \"=2\"},\n+        phase = {CompilePhase.FINAL_CODE},\n+        applyIfPlatform = {\"mac\", \"false\"})\n+    \/\/ Negative\n+    @IR(counts = {IRNode.DECODE_HEAP_OOP_NOT_NULL, \"=5\"},\n+        phase = {CompilePhase.FINAL_CODE},\n+        applyIfAnd = {\"OptoPeephole\", \"false\", \"UseAVX\", \">=2\"})\n+    @IR(counts = {IRNode.DECODE_HEAP_OOP_NOT_NULL, \"=13\"},\n+        phase = {CompilePhase.FINAL_CODE},\n+        applyIfAnd = {\"OptoPeephole\", \"false\", \"UseAVX\", \"<2\"})\n+    \/\/ 2 decodes get removed\n+    @IR(counts = {IRNode.DECODE_HEAP_OOP_NOT_NULL, \"=3\"},\n+        phase = {CompilePhase.FINAL_CODE},\n+        applyIfAnd = {\"OptoPeephole\", \"true\", \"UseAVX\", \">=2\"})\n+    @IR(counts = {IRNode.DECODE_HEAP_OOP_NOT_NULL, \"=11\"},\n+        phase = {CompilePhase.FINAL_CODE},\n+        applyIfAnd = {\"OptoPeephole\", \"true\", \"UseAVX\", \"<2\"})\n+    @Arguments(setup = \"setup\")\n+    public static Name test(Name n1, Name n2) {\n+        return n1.append(n2);\n+    }\n+}\n+\n+\/\/ This test case generates leaP* rules before arrayof_jint_fill intrinsics,\n+\/\/ but only with -XX:+UseAVX3.\n+class RegexFindTest {\n+    @Setup\n+    private static Object[] setup() {\n+        Pattern pat = Pattern.compile(\"27\");\n+        Matcher m = pat.matcher(\" 274  leaPCompressedOopOffset  === _ 275 277  [[ 2246 165 294 ]] #16\/0x0000000000000010byte[int:>=0]\");\n+        return new Object[] { m };\n+    }\n+\n+    @Test\n+    @IR(counts = {IRNode.LEA_P, \"=1\"},\n+        phase = {CompilePhase.FINAL_CODE},\n+        applyIfPlatform = {\"mac\", \"false\"})\n+    \/\/ Due to unpredictable code generation, we cannot match the exact number of decodes below.\n+    \/\/ Negative test\n+    @IR(counts = {IRNode.DECODE_HEAP_OOP_NOT_NULL, \">=7\"},\n+        phase = {CompilePhase.FINAL_CODE},\n+        applyIfAnd = {\"OptoPeephole\", \"false\", \"UseAVX\", \"=3\"})\n+    \/\/ Test that the peephole worked for leaPCompressedOopOffset\n+    @IR(counts = {IRNode.DECODE_HEAP_OOP_NOT_NULL, \">=6\"},\n+        phase = {CompilePhase.FINAL_CODE},\n+        applyIfAnd = {\"OptoPeephole\", \"true\", \"UseAVX\", \"=3\"})\n+    @Arguments(setup = \"setup\")\n+    public boolean test(Matcher m) {\n+        return m.find();\n+    }\n+}\n+\n+\/\/ The matcher generates leaP* rules for storing an object in an array of objects\n+\/\/ at a constant offset, but only when using the Serial or Parallel GC.\n+\/\/ Here, we can also manipulate the offset such that we get a leaP32Narrow rule\n+\/\/ and we can demonstrate that the peephole also removes simple cases of unneeded\n+\/\/ spills.\n+class StoreNTest {\n+    private static final int SOME_SIZE = 42;\n+    private static final int OFFSET8BIT_IDX = 3;\n+    private static final int OFFSET32BIT_IDX = 33;\n+\n+    private static final Object CURRENT = new Object();\n+    private static final Object OTHER = new Object();\n+\n+    private StoreNTestHelper[] classArr8bit = new StoreNTestHelper[SOME_SIZE];\n+    private StoreNTestHelper[] classArr32bit = new StoreNTestHelper[SOME_SIZE];\n+    private Object[] objArr8bit = new Object[SOME_SIZE];\n+    private Object[] objArr32bit = new Object[SOME_SIZE];\n+\n+    @Test\n+    @IR(counts = {IRNode.LEA_P, \"=2\"},\n+        phase = {CompilePhase.FINAL_CODE},\n+        applyIfPlatform = {\"mac\", \"false\"})\n+    \/\/ Negative test\n+    @IR(counts = {IRNode.DECODE_HEAP_OOP_NOT_NULL, \"=2\"},\n+        phase = {CompilePhase.FINAL_CODE},\n+        applyIf = {\"OptoPeephole\", \"false\"})\n+    \/\/ Test that the peephole worked for leaPCompressedOopOffset\n+    @IR(failOn = {IRNode.DECODE_HEAP_OOP_NOT_NULL},\n+        phase = {CompilePhase.FINAL_CODE},\n+        applyIf = {\"OptoPeephole\", \"true\"})\n+    \/\/ Test that the peephole removes a spill.\n+    @IR(counts = {IRNode.MEM_TO_REG_SPILL_COPY, \"=4\"},\n+        phase = {CompilePhase.FINAL_CODE},\n+        applyIfAnd ={\"OptoPeephole\", \"false\", \"UseCompactObjectHeaders\", \"false\"})\n+    @IR(counts = {IRNode.MEM_TO_REG_SPILL_COPY, \"=3\"},\n+        phase = {CompilePhase.FINAL_CODE},\n+        applyIfAnd ={\"OptoPeephole\", \"true\", \"UseCompactObjectHeaders\", \"false\"})\n+    public void testRemoveSpill() {\n+        this.classArr8bit[OFFSET8BIT_IDX] = new StoreNTestHelper(CURRENT, OTHER);\n+        this.classArr32bit[OFFSET32BIT_IDX] = new StoreNTestHelper(OTHER, CURRENT);\n+    }\n+\n+    \/\/ This variation of the test above generates a split spill register path.\n+    \/\/ Due to the complicated graph structure with the phis, the peephole\n+    \/\/ cannot remove the redundant decode shared by both leaP*s.\n+    @Test\n+    @IR(counts = {IRNode.LEA_P, \"=2\"},\n+        phase = {CompilePhase.FINAL_CODE},\n+        applyIfPlatform = {\"mac\", \"false\"})\n+    @IR(counts = {IRNode.DECODE_HEAP_OOP_NOT_NULL, \"=1\"},\n+        phase = {CompilePhase.FINAL_CODE},\n+        applyIf = {\"OptoPeephole\", \"false\"})\n+    @IR(counts = {IRNode.DECODE_HEAP_OOP_NOT_NULL, \"=1\"},\n+        phase = {CompilePhase.FINAL_CODE},\n+        applyIf = {\"OptoPeephole\", \"true\"})\n+    public void testPhiSpill() {\n+        this.classArr8bit[OFFSET8BIT_IDX] = new StoreNTestHelper(CURRENT, OTHER);\n+        this.classArr8bit[OFFSET32BIT_IDX] = new StoreNTestHelper(CURRENT, OTHER);\n+    }\n+\n+    @Test\n+    @IR(counts = {IRNode.LEA_P, \"=2\"},\n+        phase = {CompilePhase.FINAL_CODE},\n+        applyIfPlatform = {\"mac\", \"false\"})\n+    \/\/ Negative test\n+    @IR(counts = {IRNode.DECODE_HEAP_OOP_NOT_NULL, \"=2\"},\n+        phase = {CompilePhase.FINAL_CODE},\n+        applyIf = {\"OptoPeephole\", \"false\"})\n+    \/\/ Test that the peephole worked for leaPCompressedOopOffset\n+    @IR(failOn = {IRNode.DECODE_HEAP_OOP_NOT_NULL},\n+        phase = {CompilePhase.FINAL_CODE},\n+        applyIf = {\"OptoPeephole\", \"true\"})\n+    public void testNoAlloc() {\n+        this.objArr8bit[OFFSET8BIT_IDX] = CURRENT;\n+        this.objArr32bit[OFFSET32BIT_IDX] = OTHER;\n+    }\n+\n+    @Test\n+    @IR(counts = {IRNode.LEA_P, \"=2\"},\n+        phase = {CompilePhase.FINAL_CODE},\n+        applyIfPlatform = {\"mac\", \"false\"})\n+    \/\/ Negative test\n+    @IR(counts = {IRNode.DECODE_HEAP_OOP_NOT_NULL, \"=1\"},\n+        phase = {CompilePhase.FINAL_CODE},\n+        applyIf = {\"OptoPeephole\", \"false\"})\n+    \/\/ Test that the peephole worked for leaPCompressedOopOffset\n+    @IR(failOn = {IRNode.DECODE_HEAP_OOP_NOT_NULL},\n+        phase = {CompilePhase.FINAL_CODE},\n+        applyIf = {\"OptoPeephole\", \"true\"})\n+    public void testNoAllocSameArray() {\n+        this.objArr8bit[OFFSET8BIT_IDX] = CURRENT;\n+        this.objArr8bit[OFFSET32BIT_IDX] = OTHER;\n+    }\n+}\n+\n+class StoreNTestHelper {\n+    Object o1;\n+    Object o2;\n+\n+    public StoreNTestHelper(Object o1, Object o2) {\n+        this.o1 = o1;\n+        this.o2 = o2;\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/compiler\/codegen\/TestRedundantLea.java","additions":382,"deletions":0,"binary":false,"changes":382,"status":"added"},{"patch":"@@ -232,2 +232,2 @@\n-    public static void invalidateHotSpotNmethod(HotSpotNmethod nmethodMirror, boolean deoptimize) {\n-        CTVM.invalidateHotSpotNmethod(nmethodMirror, deoptimize);\n+    public static void invalidateHotSpotNmethod(HotSpotNmethod nmethodMirror, boolean deoptimize, int invalidationReason) {\n+        CTVM.invalidateHotSpotNmethod(nmethodMirror, deoptimize, invalidationReason);\n","filename":"test\/hotspot\/jtreg\/compiler\/jvmci\/common\/patches\/jdk.internal.vm.ci\/jdk\/vm\/ci\/hotspot\/CompilerToVMHelper.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -0,0 +1,77 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/**\n+ * @test\n+ * @requires vm.jvmci\n+ * @requires vm.simpleArch == \"x64\" | vm.simpleArch == \"aarch64\" | vm.simpleArch == \"riscv64\"\n+ * @library \/test\/lib \/\n+ * @modules jdk.internal.vm.ci\/jdk.vm.ci.hotspot\n+ *          jdk.internal.vm.ci\/jdk.vm.ci.meta\n+ *          jdk.internal.vm.ci\/jdk.vm.ci.code\n+ *          jdk.internal.vm.ci\/jdk.vm.ci.code.site\n+ *          jdk.internal.vm.ci\/jdk.vm.ci.runtime\n+ *          jdk.internal.vm.ci\/jdk.vm.ci.aarch64\n+ *          jdk.internal.vm.ci\/jdk.vm.ci.amd64\n+ *          jdk.internal.vm.ci\/jdk.vm.ci.riscv64\n+ * @compile CodeInstallationTest.java DebugInfoTest.java TestAssembler.java TestHotSpotVMConfig.java amd64\/AMD64TestAssembler.java aarch64\/AArch64TestAssembler.java riscv64\/RISCV64TestAssembler.java\n+ * @run junit\/othervm -XX:+UnlockExperimentalVMOptions -XX:+EnableJVMCI -XX:-UseJVMCICompiler jdk.vm.ci.code.test.CodeInvalidationReasonTest\n+ *\/\n+\n+package jdk.vm.ci.code.test;\n+\n+import jdk.test.lib.Asserts;\n+import jdk.vm.ci.code.Register;\n+import jdk.vm.ci.hotspot.HotSpotNmethod;\n+\n+import org.junit.Test;\n+\n+import java.lang.reflect.Method;\n+\n+\/**\n+ * Test if setting HotSpotNmethod invalidation reason around works.\n+ *\/\n+public class CodeInvalidationReasonTest extends CodeInstallationTest {\n+\n+    public static int add(int a, int b) {\n+        return a + b;\n+    }\n+\n+    private static void compileAdd(TestAssembler asm) {\n+        Register arg0 = asm.emitIntArg0();\n+        Register arg1 = asm.emitIntArg1();\n+        Register ret = asm.emitIntAdd(arg0, arg1);\n+        asm.emitIntRet(ret);\n+    }\n+\n+    @Test\n+    public void test() {\n+        Method method = getMethod(\"add\", int.class, int.class);\n+\n+        HotSpotNmethod nmethod = test(CodeInvalidationReasonTest::compileAdd, method, 5, 7);\n+        Asserts.assertEquals(-1 \/* since it was not invalidated yet. *\/, nmethod.getInvalidationReason());\n+\n+        nmethod.invalidate(true, config.NMETHOD_INVALIDATION_REASON_JVMCI_INVALIDATE);\n+        Asserts.assertEquals(config.NMETHOD_INVALIDATION_REASON_JVMCI_INVALIDATE, nmethod.getInvalidationReason());\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/compiler\/jvmci\/jdk.vm.ci.code.test\/src\/jdk\/vm\/ci\/code\/test\/CodeInvalidationReasonTest.java","additions":77,"deletions":0,"binary":false,"changes":77,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -74,1 +74,1 @@\n-        nmethod.invalidate(false);\n+        nmethod.invalidate(false, config.NMETHOD_INVALIDATION_REASON_JVMCI_INVALIDATE);\n@@ -80,1 +80,1 @@\n-        nmethod.invalidate(true);\n+        nmethod.invalidate(true, config.NMETHOD_INVALIDATION_REASON_JVMCI_INVALIDATE);\n","filename":"test\/hotspot\/jtreg\/compiler\/jvmci\/jdk.vm.ci.code.test\/src\/jdk\/vm\/ci\/code\/test\/SimpleCodeInstallationTest.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -58,0 +58,2 @@\n+    public final int NMETHOD_INVALIDATION_REASON_JVMCI_INVALIDATE = getConstant(\"nmethod::InvalidationReason::JVMCI_INVALIDATE\", Integer.class);\n+\n@@ -68,1 +70,2 @@\n-                int conc = getConstant(\"NMethodPatchingType::conc_data_patch\", Integer.class);\n+                int conc1 = getConstant(\"NMethodPatchingType::conc_data_patch\", Integer.class);\n+                int conc2 = getConstant(\"NMethodPatchingType::conc_instruction_and_data_patch\", Integer.class);\n@@ -71,1 +74,1 @@\n-                } else if (patchingType == conc) {\n+                } else if (patchingType == conc1 || patchingType == conc2) {\n","filename":"test\/hotspot\/jtreg\/compiler\/jvmci\/jdk.vm.ci.code.test\/src\/jdk\/vm\/ci\/code\/test\/TestHotSpotVMConfig.java","additions":6,"deletions":3,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -608,0 +608,23 @@\n+    \/**\n+     * Fills the memory segments with shorts obtained by calling next on the generator.\n+     *\n+     * @param generator The generator from which to source the values.\n+     * @param ms Memory segment to be filled with random values.\n+     *\/\n+    public void fillShort(Generator<Short> generator, MemorySegment ms) {\n+        var layout = ValueLayout.JAVA_SHORT_UNALIGNED;\n+        for (long i = 0; i < ms.byteSize() \/ layout.byteSize(); i++) {\n+            ms.setAtIndex(layout, i, generator.next());\n+        }\n+    }\n+\n+    \/**\n+     * Fill the array with shorts using the distribution of the generator.\n+     *\n+     * @param a Array to be filled with random values.\n+     *\/\n+    public void fill(Generator<Short> generator, short[] a) {\n+        fillShort(generator, MemorySegment.ofArray(a));\n+    }\n+\n+\n","filename":"test\/hotspot\/jtreg\/compiler\/lib\/generators\/Generators.java","additions":23,"deletions":0,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -652,0 +652,5 @@\n+    public static final String DECODE_HEAP_OOP_NOT_NULL = PREFIX + \"DECODE_HEAP_OOP_NOT_NULL\" + POSTFIX;\n+    static {\n+        machOnly(DECODE_HEAP_OOP_NOT_NULL, \"decodeHeapOop_not_null\");\n+    }\n+\n@@ -873,0 +878,6 @@\n+    \/\/ Only supported on x86.\n+    public static final String LEA_P = PREFIX + \"LEA_P\" + POSTFIX;\n+    static {\n+        machOnly(LEA_P, \"leaP(CompressedOopOffset|(8|32)Narrow)\");\n+    }\n+\n@@ -1211,0 +1222,5 @@\n+    public static final String MEM_TO_REG_SPILL_COPY = PREFIX + \"MEM_TO_REG_SPILL_COPY\" + POSTFIX;\n+    static {\n+        machOnly(MEM_TO_REG_SPILL_COPY, \"MemToRegSpillCopy\");\n+    }\n+\n","filename":"test\/hotspot\/jtreg\/compiler\/lib\/ir_framework\/IRNode.java","additions":16,"deletions":0,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2024, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,3 +29,0 @@\n- * @run main\/othervm -Xbatch -XX:LockingMode=1\n- *                   -XX:CompileOnly=compiler.locks.TestSynchronizeWithEmptyBlock::*\n- *                   compiler.locks.TestSynchronizeWithEmptyBlock\n","filename":"test\/hotspot\/jtreg\/compiler\/locks\/TestSynchronizeWithEmptyBlock.java","additions":1,"deletions":4,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -0,0 +1,195 @@\n+\/*\n+ * Copyright (c) 2025, NVIDIA CORPORATION & AFFILIATES. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package compiler.loopopts;\n+\n+import java.util.Arrays;\n+import java.util.Objects;\n+\n+import compiler.lib.generators.*;\n+import compiler.lib.ir_framework.*;\n+import jdk.test.lib.Asserts;\n+\n+ \/*\n+  * @test\n+  * @bug 8357726\n+  * @summary Improve C2 to recognize counted loops with multiple casts in trip counter\n+  * @library \/test\/lib \/\n+  * @run driver compiler.loopopts.TestCountedLoopCastIV  DisableUnroll\n+  * @run driver compiler.loopopts.TestCountedLoopCastIV\n+  *\/\n+\n+public class TestCountedLoopCastIV {\n+    private static final int LEN = 1024;\n+    private static final Generators random = Generators.G;\n+\n+    private static int[] in;\n+    private static int[] out;\n+\n+    static {\n+        in = new int[LEN];\n+        out = new int[LEN];\n+        random.fill(random.ints(), in);\n+    }\n+\n+    private static void cleanUp() {\n+        Arrays.fill(out, 0);\n+    }\n+\n+    private static void verify(int[] ref, int[] res, int start,\n+                               int limit, int stride,\n+                               int in_offset, int out_offset) {\n+        for (int i = start; i < limit; i += stride) {\n+            Asserts.assertEquals(ref[i + in_offset], res[i + out_offset]);\n+        }\n+    }\n+\n+    \/\/ Test a counted loop with two explicit range checkes\n+    \/\/ which will create CastIINodes for loop induction variable.\n+    \/\/ In this case, the loop start, limit and stride are\n+    \/\/ all constants.\n+    \/\/\n+    \/\/ The first IR check with \"-XX:LoopUnrollLimit=0\" makes sure\n+    \/\/ the loop is transformed into exactly one CountedLoopNode,\n+    \/\/ verifying the CastII recognition works correctly.\n+    \/\/\n+    \/\/ The second IR check ensures the optimization works properly\n+    \/\/ with default vm settings.\n+    \/\/\n+    @Test\n+    @IR(counts = {IRNode.COUNTED_LOOP, \"1\" }, applyIf = {\"LoopUnrollLimit\", \"0\"})\n+    @IR(counts = {IRNode.COUNTED_LOOP, \">0\" })\n+    static void test1() {\n+        for (int i = 0; i < LEN; i += 16) {\n+            Objects.checkIndex(i, LEN - 3);\n+            int a = in[i + 3];\n+            Objects.checkIndex(i, LEN - 15);\n+            out[i + 15] = a;\n+        }\n+    }\n+\n+    @Run(test = \"test1\")\n+    public static void runTest1() {\n+        test1();\n+        verify(in, out, 0, LEN, 16, 3, 15);\n+    }\n+\n+    \/\/ Similar to test1, but the loop limit is a variable.\n+    @Test\n+    @IR(counts = {IRNode.COUNTED_LOOP, \"1\" }, applyIf = {\"LoopUnrollLimit\", \"0\"})\n+    @IR(counts = {IRNode.COUNTED_LOOP, \">0\" })\n+    static void test2(int limit) {\n+        for (int i = 0; i < limit; i += 16) {\n+            Objects.checkIndex(i, LEN - 3);\n+            int a = in[i + 3];\n+            Objects.checkIndex(i, LEN - 15);\n+            out[i + 15] = a;\n+        }\n+    }\n+\n+    @Run(test = \"test2\")\n+    private void runTest2() {\n+        cleanUp();\n+        test2(100);\n+        verify(in, out, 0, 100, 16, 3, 15);\n+\n+        cleanUp();\n+        test2(500);\n+        verify(in, out, 0, 500, 16, 3, 15);\n+\n+        cleanUp();\n+        test2(LEN);\n+        verify(in, out, 0, LEN, 16, 3, 15);\n+    }\n+\n+    \/\/ Similar to test1 and test2, but the loop is a\n+    \/\/ while loop with a variable start and limit.\n+    @Test\n+    @IR(counts = {IRNode.COUNTED_LOOP, \"1\" }, applyIf = {\"LoopUnrollLimit\", \"0\"})\n+    @IR(counts = {IRNode.COUNTED_LOOP, \">0\" })\n+    static void test3(int start, int limit) {\n+        int i = start;\n+        while (i < limit) {\n+            Objects.checkIndex(i, LEN);\n+            int a = in[i];\n+            Objects.checkIndex(i, LEN - 3);\n+            out[i + 3] = a;\n+            i++;\n+        }\n+    }\n+\n+    @Run(test = \"test3\")\n+    private void runTest3() {\n+        cleanUp();\n+        test3(0, 100);\n+        verify(in, out, 0, 100, 1, 0, 3);\n+\n+        cleanUp();\n+        test3(128, 500);\n+        verify(in, out, 128, 500, 1, 0, 3);\n+\n+        cleanUp();\n+        test3(LEN - 128, LEN - 3);\n+        verify(in, out, LEN - 128, LEN - 3, 1, 0, 3);\n+    }\n+\n+    \/\/ Similar to test3, but the type of induction variable\n+    \/\/ is long.\n+    @Test\n+    @IR(counts = {IRNode.COUNTED_LOOP, \"1\" }, applyIf = {\"LoopUnrollLimit\", \"0\"})\n+    @IR(counts = {IRNode.COUNTED_LOOP, \">0\" })\n+    static void test4(long start, long limit) {\n+        for (long i = start; i < limit; i++) {\n+            Objects.checkIndex(i, LEN);\n+            int a = in[(int) i];\n+            Objects.checkIndex(i, LEN - 3);\n+            out[(int) i + 3] = a;\n+        }\n+    }\n+\n+    @Run(test = \"test4\")\n+    private void runTest4() {\n+        cleanUp();\n+        test3(0, 100);\n+        verify(in, out, 0, 100, 1, 0, 3);\n+\n+        cleanUp();\n+        test3(128, 500);\n+        verify(in, out, 128, 500, 1, 0, 3);\n+\n+        cleanUp();\n+        test3(LEN - 128, LEN - 3);\n+        verify(in, out, LEN - 128, LEN - 3, 1, 0, 3);\n+    }\n+\n+    public static void main(String[] args) {\n+        if (args != null && args.length > 0 && args[0].equals(\"DisableUnroll\")) {\n+            TestFramework.runWithFlags(\"-XX:LoopUnrollLimit=0\");\n+        } else {\n+            if (args != null && args.length != 0) {\n+                throw new RuntimeException(\"Unexpected args\");\n+            }\n+            TestFramework.run();\n+        }\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/compiler\/loopopts\/TestCountedLoopCastIV.java","additions":195,"deletions":0,"binary":false,"changes":195,"status":"added"},{"patch":"@@ -0,0 +1,134 @@\n+\/*\n+ * Copyright (c) 2025, Red Hat, Inc. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/**\n+ * @test\n+ * @bug 8356708\n+ * @summary C2: loop strip mining expansion doesn't take sunk stores into account\n+ *\n+ * @run main\/othervm -XX:-TieredCompilation -XX:-UseOnStackReplacement -XX:-BackgroundCompilation -XX:LoopMaxUnroll=0\n+ *                   -XX:+UnlockDiagnosticVMOptions -XX:+StressGCM -XX:StressSeed=26601954 TestStoresSunkInOuterStripMinedLoop\n+ * @run main\/othervm -XX:-TieredCompilation -XX:-UseOnStackReplacement -XX:-BackgroundCompilation -XX:LoopMaxUnroll=0\n+ *                   -XX:+UnlockDiagnosticVMOptions -XX:+StressGCM TestStoresSunkInOuterStripMinedLoop\n+ * @run main TestStoresSunkInOuterStripMinedLoop\n+ *\n+ *\/\n+\n+public class TestStoresSunkInOuterStripMinedLoop {\n+    private static int field;\n+    private static volatile int volatileField;\n+\n+    public static void main(String[] args) {\n+        A a1 = new A();\n+        A a2 = new A();\n+        A a3 = new A();\n+        for (int i = 0; i < 20_000; i++) {\n+            field = 0;\n+            test1();\n+            if (field != 1500) {\n+                throw new RuntimeException(field + \" != 1500\");\n+            }\n+            a1.field = 0;\n+            test2(a1, a2);\n+            if (a1.field != 1500) {\n+                throw new RuntimeException(a1.field + \" != 1500\");\n+            }\n+            a1.field = 0;\n+            test3(a1, a2);\n+            if (a1.field != 1500) {\n+                throw new RuntimeException(a1.field + \" != 1500\");\n+            }\n+            a1.field = 0;\n+            test4(a1, a2, a3);\n+            if (a1.field != 1500) {\n+                throw new RuntimeException(a1.field + \" != 1500\");\n+            }\n+        }\n+    }\n+\n+    \/\/ Single store sunk in outer loop, no store in inner loop\n+    private static float test1() {\n+        int v = field;\n+        float f = 1;\n+        for (int i = 0; i < 1500; i++) {\n+            f *= 2;\n+            v++;\n+            field = v;\n+        }\n+        return f;\n+    }\n+\n+    \/\/ Multiple stores sunk in outer loop, no store in inner loop\n+    private static float test2(A a1, A a2) {\n+        field = a1.field + a2.field;\n+        volatileField = 42;\n+        int v = a1.field;\n+        float f = 1;\n+        for (int i = 0; i < 1500; i++) {\n+            f *= 2;\n+            v++;\n+            a1.field = v;\n+            a2.field = v;\n+        }\n+        return f;\n+    }\n+\n+    \/\/ Store sunk in outer loop, store in inner loop\n+    private static float test3(A a1, A a2) {\n+        field = a1.field + a2.field;\n+        volatileField = 42;\n+        int v = a1.field;\n+        float f = 1;\n+        A a = a2;\n+        for (int i = 0; i < 1500; i++) {\n+            f *= 2;\n+            v++;\n+            a.field = v;\n+            a = a1;\n+            a2.field = v;\n+        }\n+        return f;\n+    }\n+\n+    \/\/ Multiple stores sunk in outer loop, store in inner loop\n+    private static float test4(A a1, A a2, A a3) {\n+        field = a1.field + a2.field + a3.field;\n+        volatileField = 42;\n+        int v = a1.field;\n+        float f = 1;\n+        A a = a2;\n+        for (int i = 0; i < 1500; i++) {\n+            f *= 2;\n+            v++;\n+            a.field = v;\n+            a = a1;\n+            a2.field = v;\n+            a3.field = v;\n+        }\n+        return f;\n+    }\n+\n+    static class A {\n+        int field;\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/compiler\/loopstripmining\/TestStoresSunkInOuterStripMinedLoop.java","additions":134,"deletions":0,"binary":false,"changes":134,"status":"added"},{"patch":"@@ -36,0 +36,1 @@\n+ * @run driver compiler.onSpinWait.TestOnSpinWaitAArch64 c2 sb 1\n@@ -38,1 +39,2 @@\n- * @run driver compiler.onSpinWait.TestOnSpinWaitAArch64 c1 yield\n+ * @run driver compiler.onSpinWait.TestOnSpinWaitAArch64 c1 yield 1\n+ * @run driver compiler.onSpinWait.TestOnSpinWaitAArch64 c1 sb 1\n@@ -53,1 +55,1 @@\n-        String spinWaitInstCount = (args.length == 3) ? args[2] : \"1\";\n+        String spinWaitInstCount = args[2];\n@@ -59,1 +61,0 @@\n-        command.add(\"-XX:+PrintAssembly\");\n@@ -72,0 +73,1 @@\n+        command.add(\"-XX:CompileCommand=print,\" + Launcher.class.getName() + \"::\" + \"test\");\n@@ -78,0 +80,5 @@\n+        if (\"sb\".equals(spinWaitInst) && analyzer.contains(\"CPU does not support SB\")) {\n+            System.out.println(\"Skipping the test. The current CPU does not support SB instruction.\");\n+            return;\n+        }\n+\n@@ -92,0 +99,2 @@\n+      } else if (\"sb\".equals(spinWaitInst)) {\n+          return \"ff30 03d5\";\n","filename":"test\/hotspot\/jtreg\/compiler\/onSpinWait\/TestOnSpinWaitAArch64.java","additions":12,"deletions":3,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -40,0 +40,1 @@\n+import java.util.Arrays;\n@@ -49,1 +50,1 @@\n-    private static short SCALAR_FP16 = (short)0x7777;\n+    private static short FP16_SCALAR = (short)0x7777;\n@@ -52,0 +53,2 @@\n+    private static final Float16 FP16_CONST = Float16.valueOf(1023.0f);\n+\n@@ -63,4 +66,8 @@\n-    public static boolean assertResults(short expected, short actual) {\n-        Float16 expected_fp16 = shortBitsToFloat16(expected);\n-        Float16 actual_fp16 = shortBitsToFloat16(actual);\n-        return !expected_fp16.equals(actual_fp16);\n+    public static void assertResults(int arity, short ... values) {\n+        assert values.length == (arity + 2);\n+        Float16 expected_fp16 = shortBitsToFloat16(values[arity]);\n+        Float16 actual_fp16 = shortBitsToFloat16(values[arity + 1]);\n+        if(!expected_fp16.equals(actual_fp16)) {\n+            String inputs = Arrays.toString(Arrays.copyOfRange(values, 0, arity - 1));\n+            throw new AssertionError(\"Result Mismatch!, input = \" + inputs + \" actual = \" + actual_fp16 +  \" expected = \" + expected_fp16);\n+        }\n@@ -87,1 +94,1 @@\n-    @IR(counts = {IRNode.ADD_VHF, \">= 1\"},\n+    @IR(counts = {IRNode.ADD_VHF, \" >0 \"},\n@@ -89,1 +96,1 @@\n-    @IR(counts = {IRNode.ADD_VHF, \">= 1\"},\n+    @IR(counts = {IRNode.ADD_VHF, \" >0 \"},\n@@ -101,4 +108,1 @@\n-            if (assertResults(expected, output[i])) {\n-                throw new RuntimeException(\"Invalid result: [\" + i + \"] input1 = \" + input1[i] + \" input2 = \" + input2[i] +\n-                                           \" output = \" + output[i] + \" expected = \" + expected);\n-            }\n+            assertResults(2, input1[i], input2[i], expected, output[i]);\n@@ -108,0 +112,1 @@\n+\n@@ -110,1 +115,1 @@\n-    @IR(counts = {IRNode.SUB_VHF, \">= 1\"},\n+    @IR(counts = {IRNode.SUB_VHF, \" >0 \"},\n@@ -112,1 +117,1 @@\n-    @IR(counts = {IRNode.SUB_VHF, \">= 1\"},\n+    @IR(counts = {IRNode.SUB_VHF, \" >0 \"},\n@@ -124,4 +129,1 @@\n-            if (assertResults(expected, output[i])) {\n-                throw new RuntimeException(\"Invalid result: [\" + i + \"] input1 = \" + input1[i] + \" input2 = \" + input2[i] +\n-                                           \" output = \" + output[i] + \" expected = \" + expected);\n-            }\n+            assertResults(2, input1[i], input2[i], expected, output[i]);\n@@ -131,0 +133,1 @@\n+\n@@ -133,1 +136,1 @@\n-    @IR(counts = {IRNode.MUL_VHF, \">= 1\"},\n+    @IR(counts = {IRNode.MUL_VHF, \" >0 \"},\n@@ -135,1 +138,1 @@\n-    @IR(counts = {IRNode.MUL_VHF, \">= 1\"},\n+    @IR(counts = {IRNode.MUL_VHF, \" >0 \"},\n@@ -147,4 +150,1 @@\n-            if (assertResults(expected, output[i])) {\n-                throw new RuntimeException(\"Invalid result: [\" + i + \"] input1 = \" + input1[i] + \" input2 = \" + input2[i] +\n-                                           \" output = \" + output[i] + \" expected = \" + expected);\n-            }\n+            assertResults(2, input1[i], input2[i], expected, output[i]);\n@@ -156,1 +156,1 @@\n-    @IR(counts = {IRNode.DIV_VHF, \">= 1\"},\n+    @IR(counts = {IRNode.DIV_VHF, \" >0 \"},\n@@ -158,1 +158,1 @@\n-    @IR(counts = {IRNode.DIV_VHF, \">= 1\"},\n+    @IR(counts = {IRNode.DIV_VHF, \" >0 \"},\n@@ -170,4 +170,1 @@\n-            if (assertResults(expected, output[i])) {\n-                throw new RuntimeException(\"Invalid result: [\" + i + \"] input1 = \" + input1[i] + \" input2 = \" + input2[i] +\n-                                           \" output = \" + output[i] + \" expected = \" + expected);\n-            }\n+            assertResults(2, input1[i], input2[i], expected, output[i]);\n@@ -179,1 +176,1 @@\n-    @IR(counts = {IRNode.MIN_VHF, \">= 1\"},\n+    @IR(counts = {IRNode.MIN_VHF, \" >0 \"},\n@@ -181,1 +178,1 @@\n-    @IR(counts = {IRNode.MIN_VHF, \">= 1\"},\n+    @IR(counts = {IRNode.MIN_VHF, \" >0 \"},\n@@ -193,4 +190,1 @@\n-            if (assertResults(expected, output[i])) {\n-                throw new RuntimeException(\"Invalid result: [\" + i + \"] input1 = \" + input1[i] + \" input2 = \" + input2[i] +\n-                                           \" output = \" + output[i] + \" expected = \" + expected);\n-            }\n+            assertResults(2, input1[i], input2[i], expected, output[i]);\n@@ -202,1 +196,1 @@\n-    @IR(counts = {IRNode.MAX_VHF, \">= 1\"},\n+    @IR(counts = {IRNode.MAX_VHF, \" >0 \"},\n@@ -204,1 +198,1 @@\n-    @IR(counts = {IRNode.MAX_VHF, \">= 1\"},\n+    @IR(counts = {IRNode.MAX_VHF, \" >0 \"},\n@@ -216,4 +210,1 @@\n-            if (assertResults(expected, output[i])) {\n-                throw new RuntimeException(\"Invalid result: [\" + i + \"] input1 = \" + input1[i] + \" input2 = \" + input2[i] +\n-                                           \" output = \" + output[i] + \" expected = \" + expected);\n-            }\n+            assertResults(2, input1[i], input2[i], expected, output[i]);\n@@ -225,1 +216,1 @@\n-    @IR(counts = {IRNode.SQRT_VHF, \">= 1\"},\n+    @IR(counts = {IRNode.SQRT_VHF, \" >0 \"},\n@@ -227,1 +218,1 @@\n-    @IR(counts = {IRNode.SQRT_VHF, \">= 1\"},\n+    @IR(counts = {IRNode.SQRT_VHF, \" >0 \"},\n@@ -239,4 +230,1 @@\n-            if (assertResults(expected, output[i])) {\n-                throw new RuntimeException(\"Invalid result: [\" + i + \"] input = \" + input1[i] +\n-                                           \" output = \" + output[i] + \" expected = \" + expected);\n-            }\n+            assertResults(1, input1[i], expected, output[i]);\n@@ -248,1 +236,1 @@\n-    @IR(counts = {IRNode.FMA_VHF, \">= 1\"},\n+    @IR(counts = {IRNode.FMA_VHF, \" >0 \"},\n@@ -250,1 +238,1 @@\n-    @IR(counts = {IRNode.FMA_VHF, \">= 1\"},\n+    @IR(counts = {IRNode.FMA_VHF, \" >0 \"},\n@@ -264,4 +252,1 @@\n-            if (assertResults(expected, output[i])) {\n-                throw new RuntimeException(\"Invalid result: [\" + i + \"] input1 = \" + input1[i] + \" input2 = \" + input2[i] +\n-                                           \"input3 = \" + input3[i] + \" output = \" + output[i] + \" expected = \" + expected);\n-            }\n+            assertResults(3, input1[i], input2[i], input3[i], expected, output[i]);\n@@ -273,1 +258,1 @@\n-    @IR(counts = {IRNode.FMA_VHF, \" >= 1\"},\n+    @IR(counts = {IRNode.FMA_VHF, \" >0 \"},\n@@ -275,1 +260,1 @@\n-    @IR(counts = {IRNode.FMA_VHF, \">= 1\"},\n+    @IR(counts = {IRNode.FMA_VHF, \" >0 \"},\n@@ -279,1 +264,1 @@\n-            output[i] = float16ToRawShortBits(fma(shortBitsToFloat16(input1[i]), shortBitsToFloat16(SCALAR_FP16),\n+            output[i] = float16ToRawShortBits(fma(shortBitsToFloat16(input1[i]), shortBitsToFloat16(FP16_SCALAR),\n@@ -287,1 +272,1 @@\n-            short expected = float16ToRawShortBits(fma(shortBitsToFloat16(input1[i]), shortBitsToFloat16(SCALAR_FP16),\n+            short expected = float16ToRawShortBits(fma(shortBitsToFloat16(input1[i]), shortBitsToFloat16(FP16_SCALAR),\n@@ -289,4 +274,1 @@\n-            if (assertResults(expected, output[i])) {\n-                throw new RuntimeException(\"Invalid result: [\" + i + \"] input1 = \" + input1[i] + \" input2 = \" + SCALAR_FP16 +\n-                                           \"input3 = 3.0 \" + \"output = \" + output[i] + \" expected = \" + expected);\n-            }\n+            assertResults(2, input1[i], FP16_SCALAR, expected, output[i]);\n@@ -299,1 +281,1 @@\n-    @IR(counts = {IRNode.FMA_VHF, \" >= 1\"},\n+    @IR(counts = {IRNode.FMA_VHF, \" >0 \"},\n@@ -301,1 +283,1 @@\n-    @IR(counts = {IRNode.FMA_VHF, \">= 1\"},\n+    @IR(counts = {IRNode.FMA_VHF, \" >0 \"},\n@@ -310,0 +292,1 @@\n+\n@@ -315,4 +298,1 @@\n-            if (assertResults(expected, output[i])) {\n-                throw new RuntimeException(\"Invalid result: [\" + i + \"] input1 = \" + input1[i] + \" input2 = \" + input2[i] +\n-                                           \"input3 = \" + input3 + \" output = \" + output[i] + \" expected = \" + expected);\n-            }\n+            assertResults(3, input1[i], input2[i], input3, expected, output[i]);\n@@ -344,4 +324,112 @@\n-            if (assertResults(expected, output[i])) {\n-                throw new RuntimeException(\"Invalid result: [\" + i + \"] input1 = \" + input1 + \" input2 = \" + input2 +\n-                                           \"input3 = \" + input3 + \" output = \" + output[i] + \" expected = \" + expected);\n-            }\n+            assertResults(3, input1, input2, input3, expected, output[i]);\n+        }\n+    }\n+\n+\n+    @Test\n+    @Warmup(50)\n+    @IR(counts = {IRNode.ADD_VHF, \" >0 \"},\n+        applyIfCPUFeatureOr = {\"avx512_fp16\", \"true\", \"zvfh\", \"true\", \"sve\", \"true\"})\n+    @IR(counts = {IRNode.ADD_VHF, \" >0 \"},\n+        applyIfCPUFeatureAnd = {\"fphp\", \"true\", \"asimdhp\", \"true\"})\n+    public void vectorAddConstInputFloat16() {\n+         for (int i = 0; i < LEN; ++i) {\n+             output[i] = float16ToRawShortBits(add(shortBitsToFloat16(input1[i]), FP16_CONST));\n+         }\n+     }\n+\n+    @Check(test=\"vectorAddConstInputFloat16\")\n+    public void checkResultAddConstantInputFloat16() {\n+        for (int i = 0; i < LEN; ++i) {\n+            short expected = floatToFloat16(float16ToFloat(input1[i]) + FP16_CONST.floatValue());\n+            assertResults(2, input1[i], float16ToRawShortBits(FP16_CONST), expected, output[i]);\n+        }\n+    }\n+\n+    @Test\n+    @Warmup(50)\n+    @IR(counts = {IRNode.SUB_VHF, \" >0 \"},\n+        applyIfCPUFeature = {\"avx512_fp16\", \"true\"})\n+    public void vectorSubConstInputFloat16() {\n+        for (int i = 0; i < LEN; ++i) {\n+            output[i] = float16ToRawShortBits(subtract(shortBitsToFloat16(input1[i]), FP16_CONST));\n+        }\n+    }\n+\n+    @Check(test=\"vectorSubConstInputFloat16\")\n+    public void checkResultSubConstantInputFloat16() {\n+        for (int i = 0; i < LEN; ++i) {\n+            short expected = floatToFloat16(float16ToFloat(input1[i]) - FP16_CONST.floatValue());\n+            assertResults(2, input1[i], float16ToRawShortBits(FP16_CONST), expected, output[i]);\n+        }\n+    }\n+\n+    @Test\n+    @Warmup(50)\n+    @IR(counts = {IRNode.MUL_VHF, \" >0 \"},\n+        applyIfCPUFeature = {\"avx512_fp16\", \"true\"})\n+    public void vectorMulConstantInputFloat16() {\n+        for (int i = 0; i < LEN; ++i) {\n+            output[i] = float16ToRawShortBits(multiply(FP16_CONST, shortBitsToFloat16(input2[i])));\n+        }\n+    }\n+\n+    @Check(test=\"vectorMulConstantInputFloat16\")\n+    public void checkResultMulConstantInputFloat16() {\n+        for (int i = 0; i < LEN; ++i) {\n+            short expected = floatToFloat16(FP16_CONST.floatValue() * float16ToFloat(input2[i]));\n+            assertResults(2, float16ToRawShortBits(FP16_CONST), input2[i], expected, output[i]);\n+        }\n+    }\n+\n+    @Test\n+    @Warmup(50)\n+    @IR(counts = {IRNode.DIV_VHF, \" >0 \"},\n+        applyIfCPUFeature = {\"avx512_fp16\", \"true\"})\n+    public void vectorDivConstantInputFloat16() {\n+        for (int i = 0; i < LEN; ++i) {\n+            output[i] = float16ToRawShortBits(divide(FP16_CONST, shortBitsToFloat16(input2[i])));\n+        }\n+    }\n+\n+    @Check(test=\"vectorDivConstantInputFloat16\")\n+    public void checkResultDivConstantInputFloat16() {\n+        for (int i = 0; i < LEN; ++i) {\n+            short expected = floatToFloat16(FP16_CONST.floatValue() \/ float16ToFloat(input2[i]));\n+            assertResults(2, float16ToRawShortBits(FP16_CONST), input2[i], expected, output[i]);\n+        }\n+    }\n+\n+    @Test\n+    @Warmup(50)\n+    @IR(counts = {IRNode.MAX_VHF, \" >0 \"},\n+        applyIfCPUFeature = {\"avx512_fp16\", \"true\"})\n+    public void vectorMaxConstantInputFloat16() {\n+        for (int i = 0; i < LEN; ++i) {\n+            output[i] = float16ToRawShortBits(max(FP16_CONST, shortBitsToFloat16(input2[i])));\n+        }\n+    }\n+\n+    @Check(test=\"vectorMaxConstantInputFloat16\")\n+    public void checkResultMaxConstantInputFloat16() {\n+        for (int i = 0; i < LEN; ++i) {\n+            short expected = floatToFloat16(Math.max(FP16_CONST.floatValue(), float16ToFloat(input2[i])));\n+            assertResults(2, float16ToRawShortBits(FP16_CONST), input2[i], expected, output[i]);\n+        }\n+    }\n+\n+    @Test\n+    @Warmup(50)\n+    @IR(counts = {IRNode.MIN_VHF, \" >0 \"},\n+        applyIfCPUFeature = {\"avx512_fp16\", \"true\"})\n+    public void vectorMinConstantInputFloat16() {\n+        for (int i = 0; i < LEN; ++i) {\n+            output[i] = float16ToRawShortBits(min(FP16_CONST, shortBitsToFloat16(input2[i])));\n+        }\n+    }\n+\n+    @Check(test=\"vectorMinConstantInputFloat16\")\n+    public void checkResultMinConstantInputFloat16() {\n+        for (int i = 0; i < LEN; ++i) {\n+            short expected = floatToFloat16(Math.min(FP16_CONST.floatValue(), float16ToFloat(input2[i])));\n+            assertResults(2, float16ToRawShortBits(FP16_CONST), input2[i], expected, output[i]);\n","filename":"test\/hotspot\/jtreg\/compiler\/vectorization\/TestFloat16VectorOperations.java","additions":159,"deletions":71,"binary":false,"changes":230,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -57,1 +57,1 @@\n-            = WHITE_BOX.getUintxVMFlag(\"ReservedCodeCacheSize\");\n+            = WHITE_BOX.getSizeTVMFlag(\"ReservedCodeCacheSize\");\n","filename":"test\/hotspot\/jtreg\/compiler\/whitebox\/AllocationCodeBlobTest.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -29,0 +29,1 @@\n+ * @requires !vm.asan\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/DockerBasicTest.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -31,0 +31,1 @@\n+ * @requires !vm.asan\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/ShareTmpDir.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -30,0 +30,1 @@\n+ * @requires !vm.asan\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestCPUAwareness.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -30,0 +30,1 @@\n+ * @requires !vm.asan\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestCPUSets.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -31,0 +31,1 @@\n+ * @requires !vm.asan\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestContainerInfo.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -33,0 +33,1 @@\n+ * @requires !vm.asan\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestJFREvents.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -31,0 +31,1 @@\n+ * @requires !vm.asan\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestJFRNetworkEvents.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -29,0 +29,1 @@\n+ * @requires !vm.asan\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestJFRWithJMX.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -34,0 +34,1 @@\n+ * @requires !vm.asan\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestJcmdWithSideCar.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -33,0 +33,1 @@\n+ * @requires !vm.asan\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestLimitsUpdating.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -35,0 +35,1 @@\n+ * @requires !vm.asan\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestMemoryWithCgroupV1.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -39,0 +39,1 @@\n+ * @requires !vm.asan\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestMemoryWithSubgroups.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,0 +29,1 @@\n+ * @requires !vm.asan\n@@ -113,0 +114,1 @@\n+            \"CPU Usage\",\n@@ -116,0 +118,1 @@\n+            \"Memory Throttle Limit\",\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestMisc.java","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -31,0 +31,1 @@\n+ * @requires !vm.asan\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestPids.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -0,0 +1,181 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package gc;\n+\n+\/**\n+ * @test\n+ * @bug 8352565\n+ * @summary Determine whether the native method implementation of\n+ * Reference.get() works as expected.  Disable the intrinsic implementation to\n+ * force use of the native method.\n+ * @library \/test\/lib\n+ * @modules java.base\/java.lang.ref:open\n+ * @build jdk.test.whitebox.WhiteBox\n+ * @run driver jdk.test.lib.helpers.ClassFileInstaller jdk.test.whitebox.WhiteBox\n+ * @run main\/othervm\n+ *    -Xbootclasspath\/a:.\n+ *    -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI\n+ *    -XX:DisableIntrinsic=_Reference_get0\n+ *    gc.TestNativeReferenceGet\n+ *\/\n+\n+import java.lang.ref.ReferenceQueue;\n+import java.lang.ref.WeakReference;\n+import java.util.ArrayList;\n+import java.util.List;\n+import jdk.test.whitebox.WhiteBox;\n+\n+public final class TestNativeReferenceGet {\n+\n+    private static final WhiteBox WB = WhiteBox.getWhiteBox();\n+\n+    private static void gcUntilOld(Object o) {\n+        while (!WB.isObjectInOldGen(o)) {\n+            WB.fullGC();\n+        }\n+    }\n+\n+    private static final class TestObject {\n+        public final int value;\n+\n+        public TestObject(int value) {\n+            this.value = value;\n+        }\n+    }\n+\n+    private static final ReferenceQueue<TestObject> queue =\n+        new ReferenceQueue<TestObject>();\n+\n+    private static final class Ref extends WeakReference<TestObject> {\n+        public Ref(TestObject obj) {\n+            super(obj, queue);\n+        }\n+    }\n+\n+    private static final int NUM_REFS = 100;\n+\n+    private static List<Ref> references = null;\n+    private static List<TestObject> referents = null;\n+\n+    \/\/ Create all the objects used by the test, and ensure they are all in the\n+    \/\/ old generation.\n+    private static void setup() {\n+        references = new ArrayList<Ref>(NUM_REFS);\n+        referents = new ArrayList<TestObject>(NUM_REFS);\n+\n+        for (int i = 0; i < NUM_REFS; ++i) {\n+            TestObject obj = new TestObject(i);\n+            referents.add(obj);\n+            references.add(new Ref(obj));\n+        }\n+\n+        gcUntilOld(references);\n+        gcUntilOld(referents);\n+        for (int i = 0; i < NUM_REFS; ++i) {\n+            gcUntilOld(references.get(i));\n+            gcUntilOld(referents.get(i));\n+        }\n+    }\n+\n+    \/\/ Discard all the strong references.\n+    private static void dropReferents() {\n+        \/\/ Not using List.clear() because it doesn't document null'ing elements.\n+        for (int i = 0; i < NUM_REFS; ++i) {\n+            referents.set(i, null);\n+        }\n+    }\n+\n+    \/\/ Create new strong references from the weak references, by using the\n+    \/\/ native method implementation of Reference.get() and recording the value\n+    \/\/ in references.\n+    private static void strengthenReferents() {\n+        for (int i = 0; i < NUM_REFS; ++i) {\n+            referents.set(i, references.get(i).get());\n+        }\n+    }\n+\n+    private static void check() {\n+        \/\/ None of the references should have been cleared and enqueued,\n+        \/\/ because we have strong references to all the referents.\n+        try {\n+            while (WB.waitForReferenceProcessing()) {}\n+        } catch (InterruptedException e) {\n+            throw new RuntimeException(\"Test interrupted\");\n+        }\n+        if (queue.poll() != null) {\n+            throw new RuntimeException(\"Reference enqueued\");\n+        }\n+\n+        \/\/ Check details of expected state.\n+        for (int i = 0; i < NUM_REFS; ++i) {\n+            Ref reference = (Ref) references.get(i);\n+            TestObject referent = reference.get();\n+            if (referent == null) {\n+                throw new RuntimeException(\"Referent not strengthened\");\n+            } else if (referent != referents.get(i)) {\n+                throw new RuntimeException(\n+                    \"Reference referent differs from saved referent: \" + i);\n+            } else if (referent.value != i) {\n+                throw new RuntimeException(\n+                    \"Referent \" + i + \" value: \" + referent.value);\n+            }\n+        }\n+    }\n+\n+    private static void testConcurrent() {\n+        System.out.println(\"Testing concurrent GC\");\n+        try {\n+            WB.concurrentGCAcquireControl();\n+            dropReferents();\n+            WB.concurrentGCRunTo(WB.BEFORE_MARKING_COMPLETED);\n+            strengthenReferents();\n+            WB.concurrentGCRunToIdle();\n+            check();\n+        } finally {\n+            WB.concurrentGCReleaseControl();\n+        }\n+    }\n+\n+    private static void testNonconcurrent() {\n+        System.out.println(\"Testing nonconcurrent GC\");\n+        \/\/ A GC between clearing and strengthening will result in test failure.\n+        \/\/ We try to make that unlikely via this immediately preceeding GC.\n+        WB.fullGC();\n+        dropReferents();\n+        strengthenReferents();\n+        WB.fullGC();\n+        check();\n+    }\n+\n+    public static final void main(String[] args) {\n+        setup();\n+        if (WB.supportsConcurrentGCBreakpoints()) {\n+            testConcurrent();\n+        } else {\n+            testNonconcurrent();\n+        }\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/gc\/TestNativeReferenceGet.java","additions":181,"deletions":0,"binary":false,"changes":181,"status":"added"},{"patch":"@@ -60,2 +60,2 @@\n-                switch (i & 0x3) {\n-                    case 0:\n+                switch (i & 0x7) {\n+                    case 0,1,2:\n@@ -66,1 +66,1 @@\n-                    case 1:\n+                    case 3,4:\n@@ -70,1 +70,1 @@\n-                    case 2,3:\n+                    case 5,6,7:\n","filename":"test\/hotspot\/jtreg\/gc\/shenandoah\/generational\/TestOldGrowthTriggers.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -1,32 +0,0 @@\n-\/*\n- * Copyright (c) 2023, 2024, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\n- *\/\n-\n-\/* @test\n- * @summary Run LockStack gtests with LockingMode=2\n- * @library \/test\/lib\n- * @modules java.base\/jdk.internal.misc\n- *          java.xml\n- * @requires vm.flagless\n- * @run main\/native GTestWrapper --gtest_filter=LockStackTest* -XX:LockingMode=2\n- *\/\n","filename":"test\/hotspot\/jtreg\/gtest\/LockStackGtests.java","additions":0,"deletions":32,"binary":false,"changes":32,"status":"deleted"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2023, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,0 +27,1 @@\n+import jdk.test.whitebox.WhiteBox;\n@@ -37,1 +38,3 @@\n- * @run main\/othervm -XX:+UnlockDiagnosticVMOptions -XX:GuaranteedAsyncDeflationInterval=2000 -XX:LockingMode=0 ConcurrentDeflation\n+ * @build jdk.test.whitebox.WhiteBox\n+ * @run driver jdk.test.lib.helpers.ClassFileInstaller jdk.test.whitebox.WhiteBox\n+ * @run main\/othervm -Xbootclasspath\/a:. -XX:+UnlockDiagnosticVMOptions -XX:GuaranteedAsyncDeflationInterval=2000 -XX:+WhiteBoxAPI ConcurrentDeflation\n@@ -41,0 +44,1 @@\n+    static final WhiteBox WB = WhiteBox.getWhiteBox();\n@@ -76,0 +80,6 @@\n+                try {\n+                    \/\/ Force inflation\n+                    monitors[index].wait(1);\n+                } catch (InterruptedException e) {\n+                    throw new RuntimeException(e);\n+                }\n","filename":"test\/hotspot\/jtreg\/runtime\/Monitor\/ConcurrentDeflation.java","additions":12,"deletions":2,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -36,15 +36,0 @@\n- *     -XX:LockingMode=0\n- *     -Xms256m -Xmx256m\n- *     TestRecursiveLocking 120 1\n- *\n- * @run main\/othervm\/timeout=240 -Xbootclasspath\/a:.\n- *     -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI\n- *     -Xint\n- *     -XX:LockingMode=1\n- *     -Xms256m -Xmx256m\n- *     TestRecursiveLocking 120 1\n- *\n- * @run main\/othervm\/timeout=240 -Xbootclasspath\/a:.\n- *     -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI\n- *     -Xint\n- *     -XX:LockingMode=2\n@@ -66,15 +51,0 @@\n- *     -XX:LockingMode=0\n- *     -Xms256m -Xmx256m\n- *     TestRecursiveLocking 120 2\n- *\n- * @run main\/othervm\/timeout=240 -Xbootclasspath\/a:.\n- *     -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI\n- *     -Xint\n- *     -XX:LockingMode=1\n- *     -Xms256m -Xmx256m\n- *     TestRecursiveLocking 120 2\n- *\n- * @run main\/othervm\/timeout=240 -Xbootclasspath\/a:.\n- *     -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI\n- *     -Xint\n- *     -XX:LockingMode=2\n@@ -97,15 +67,0 @@\n- *     -XX:LockingMode=0\n- *     -Xms256m -Xmx256m\n- *     TestRecursiveLocking 120 1\n- *\n- * @run main\/othervm\/timeout=240 -Xbootclasspath\/a:.\n- *     -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI\n- *     -XX:TieredStopAtLevel=1\n- *     -XX:LockingMode=1\n- *     -Xms256m -Xmx256m\n- *     TestRecursiveLocking 120 1\n- *\n- * @run main\/othervm\/timeout=240 -Xbootclasspath\/a:.\n- *     -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI\n- *     -XX:TieredStopAtLevel=1\n- *     -XX:LockingMode=2\n@@ -128,15 +83,0 @@\n- *     -XX:LockingMode=0\n- *     -Xms256m -Xmx256m\n- *     TestRecursiveLocking 120 2\n- *\n- * @run main\/othervm\/timeout=240 -Xbootclasspath\/a:.\n- *     -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI\n- *     -XX:TieredStopAtLevel=1\n- *     -XX:LockingMode=1\n- *     -Xms256m -Xmx256m\n- *     TestRecursiveLocking 120 2\n- *\n- * @run main\/othervm\/timeout=240 -Xbootclasspath\/a:.\n- *     -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI\n- *     -XX:TieredStopAtLevel=1\n- *     -XX:LockingMode=2\n@@ -159,15 +99,0 @@\n- *     -XX:LockingMode=0\n- *     -Xms256m -Xmx256m\n- *     TestRecursiveLocking 120 1\n- *\n- * @run main\/othervm\/timeout=240 -Xbootclasspath\/a:.\n- *     -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI\n- *     -XX:-EliminateNestedLocks\n- *     -XX:LockingMode=1\n- *     -Xms256m -Xmx256m\n- *     TestRecursiveLocking 120 1\n- *\n- * @run main\/othervm\/timeout=240 -Xbootclasspath\/a:.\n- *     -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI\n- *     -XX:-EliminateNestedLocks\n- *     -XX:LockingMode=2\n@@ -185,1 +110,0 @@\n- *\n@@ -187,13 +111,0 @@\n- * @run main\/othervm\/timeout=240 -Xbootclasspath\/a:.\n- *     -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI\n- *     -XX:LockingMode=0\n- *     -XX:-EliminateNestedLocks\n- *     -Xms256m -Xmx256m\n- *     TestRecursiveLocking 120 2\n- *\n- * @run main\/othervm\/timeout=240 -Xbootclasspath\/a:.\n- *     -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI\n- *     -XX:LockingMode=1\n- *     -XX:-EliminateNestedLocks\n- *     -Xms256m -Xmx256m\n- *     TestRecursiveLocking 120 2\n@@ -203,1 +114,0 @@\n- *     -XX:LockingMode=2\n","filename":"test\/hotspot\/jtreg\/runtime\/Monitor\/StressWrapper_TestRecursiveLocking_36M.java","additions":0,"deletions":90,"binary":false,"changes":90,"status":"modified"},{"patch":"@@ -36,15 +36,0 @@\n- *     -XX:LockingMode=0\n- *     -Xms256m -Xmx256m\n- *     TestRecursiveLocking 5 1\n- *\n- * @run main\/othervm -Xbootclasspath\/a:.\n- *     -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI\n- *     -Xint\n- *     -XX:LockingMode=1\n- *     -Xms256m -Xmx256m\n- *     TestRecursiveLocking 5 1\n- *\n- * @run main\/othervm -Xbootclasspath\/a:.\n- *     -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI\n- *     -Xint\n- *     -XX:LockingMode=2\n@@ -66,15 +51,0 @@\n- *     -XX:LockingMode=0\n- *     -Xms256m -Xmx256m\n- *     TestRecursiveLocking 5 2\n- *\n- * @run main\/othervm -Xbootclasspath\/a:.\n- *     -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI\n- *     -Xint\n- *     -XX:LockingMode=1\n- *     -Xms256m -Xmx256m\n- *     TestRecursiveLocking 5 2\n- *\n- * @run main\/othervm -Xbootclasspath\/a:.\n- *     -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI\n- *     -Xint\n- *     -XX:LockingMode=2\n@@ -97,15 +67,0 @@\n- *     -XX:LockingMode=0\n- *     -Xms256m -Xmx256m\n- *     TestRecursiveLocking 5 1\n- *\n- * @run main\/othervm -Xbootclasspath\/a:.\n- *     -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI\n- *     -XX:TieredStopAtLevel=1\n- *     -XX:LockingMode=1\n- *     -Xms256m -Xmx256m\n- *     TestRecursiveLocking 5 1\n- *\n- * @run main\/othervm -Xbootclasspath\/a:.\n- *     -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI\n- *     -XX:TieredStopAtLevel=1\n- *     -XX:LockingMode=2\n@@ -128,15 +83,0 @@\n- *     -XX:LockingMode=0\n- *     -Xms256m -Xmx256m\n- *     TestRecursiveLocking 5 2\n- *\n- * @run main\/othervm -Xbootclasspath\/a:.\n- *     -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI\n- *     -XX:TieredStopAtLevel=1\n- *     -XX:LockingMode=1\n- *     -Xms256m -Xmx256m\n- *     TestRecursiveLocking 5 2\n- *\n- * @run main\/othervm -Xbootclasspath\/a:.\n- *     -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI\n- *     -XX:TieredStopAtLevel=1\n- *     -XX:LockingMode=2\n@@ -159,15 +99,0 @@\n- *     -XX:LockingMode=0\n- *     -Xms256m -Xmx256m\n- *     TestRecursiveLocking 5 1\n- *\n- * @run main\/othervm -Xbootclasspath\/a:.\n- *     -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI\n- *     -XX:-EliminateNestedLocks\n- *     -XX:LockingMode=1\n- *     -Xms256m -Xmx256m\n- *     TestRecursiveLocking 5 1\n- *\n- * @run main\/othervm -Xbootclasspath\/a:.\n- *     -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI\n- *     -XX:-EliminateNestedLocks\n- *     -XX:LockingMode=2\n@@ -185,1 +110,0 @@\n- *\n@@ -187,13 +111,0 @@\n- * @run main\/othervm -Xbootclasspath\/a:.\n- *     -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI\n- *     -XX:LockingMode=0\n- *     -XX:-EliminateNestedLocks\n- *     -Xms256m -Xmx256m\n- *     TestRecursiveLocking 5 2\n- *\n- * @run main\/othervm -Xbootclasspath\/a:.\n- *     -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI\n- *     -XX:LockingMode=1\n- *     -XX:-EliminateNestedLocks\n- *     -Xms256m -Xmx256m\n- *     TestRecursiveLocking 5 2\n@@ -203,1 +114,0 @@\n- *     -XX:LockingMode=2\n@@ -215,1 +125,0 @@\n-    static final int flagLockingMode = WB.getIntVMFlag(\"LockingMode\").intValue();\n@@ -217,3 +126,0 @@\n-    static final int LM_MONITOR = 0;\n-    static final int LM_LEGACY = 1;\n-    static final int LM_LIGHTWEIGHT = 2;\n@@ -232,7 +138,3 @@\n-            \/\/ Legacy mode has no lock stack, i.e., there is no limit\n-            \/\/ on recursion, so for legacy mode we can't say that\n-            \/\/ \"outer\" must be inflated here, which we can say for all\n-            \/\/ the other locking modes.\n-            if (flagLockingMode != LM_LEGACY) {\n-                outer.assertInflated();\n-            }\n+            \/\/ There is limit on recursion, so \"outer\" must be\n+            \/\/ inflated here.\n+            outer.assertInflated();\n@@ -243,3 +145,1 @@\n-            if (flagLockingMode != LM_MONITOR) {\n-                assertNotInflated();\n-            }\n+            assertNotInflated();\n@@ -251,3 +151,1 @@\n-            if (flagLockingMode != LM_MONITOR) {\n-                assertNotInflated();\n-            }\n+            assertNotInflated();\n@@ -259,3 +157,1 @@\n-            if (flagLockingMode != LM_MONITOR) {\n-                assertNotInflated();\n-            }\n+            assertNotInflated();\n@@ -267,3 +163,1 @@\n-            if (flagLockingMode != LM_LEGACY) {\n-                assertInflated();\n-            }\n+            assertInflated();\n@@ -286,3 +180,1 @@\n-                if (flagLockingMode != LM_MONITOR) {\n-                    OUTER.assertNotInflated();\n-                }\n+                OUTER.assertNotInflated();\n@@ -291,7 +183,2 @@\n-\n-                if (flagLockingMode != LM_LEGACY) {\n-                    OUTER.assertInflated();\n-                }\n-                if (flagLockingMode != LM_MONITOR) {\n-                    INNER.assertNotInflated();\n-                }\n+                OUTER.assertInflated();\n+                INNER.assertNotInflated();\n@@ -311,16 +198,13 @@\n-            if (flagLockingMode == LM_LIGHTWEIGHT) {\n-                \/\/ First time we lock A, A is the only one on the lock\n-                \/\/ stack.\n-                if (counter == 1) {\n-                    assertNotInflated();\n-                } else {\n-                    \/\/ Second time we want to lock A, the lock stack\n-                    \/\/ looks like this [A, B]. Lightweight locking\n-                    \/\/ doesn't allow interleaving ([A, B, A]), instead\n-                    \/\/ it inflates A and removes it from the lock\n-                    \/\/ stack. Which leaves us with only [B] on the\n-                    \/\/ lock stack. After more recursions it will grow\n-                    \/\/ to [B, B ... B].\n-                    assertInflated();\n-                }\n-            } else if (flagLockingMode == LM_MONITOR) {\n+\n+            \/\/ First time we lock A, A is the only one on the lock\n+            \/\/ stack.\n+            if (counter == 1) {\n+                assertNotInflated();\n+            } else {\n+                \/\/ Second time we want to lock A, the lock stack\n+                \/\/ looks like this [A, B]. Lightweight locking\n+                \/\/ doesn't allow interleaving ([A, B, A]), instead\n+                \/\/ it inflates A and removes it from the lock\n+                \/\/ stack. Which leaves us with only [B] on the\n+                \/\/ lock stack. After more recursions it will grow\n+                \/\/ to [B, B ... B].\n@@ -330,0 +214,1 @@\n+\n@@ -337,10 +222,7 @@\n-            if (flagLockingMode != LM_MONITOR) {\n-                \/\/ Legacy tolerates endless recursions. While testing\n-                \/\/ lightweight we don't go deeper than the size of the\n-                \/\/ lock stack, which in this test case will be filled\n-                \/\/ with a number of B-elements. See comment in runA()\n-                \/\/ above for more info.\n-                assertNotInflated();\n-            } else {\n-                assertInflated();\n-            }\n+\n+            \/\/ Legacy tolerates endless recursions. While testing\n+            \/\/ lightweight we don't go deeper than the size of the\n+            \/\/ lock stack, which in this test case will be filled\n+            \/\/ with a number of B-elements. See comment in runA()\n+            \/\/ above for more info.\n+            assertNotInflated();\n@@ -373,6 +255,0 @@\n-            if (flagLockingMode == LM_LEGACY) {\n-                A.assertNotInflated();\n-            }\n-            \/\/ Implied else: for LM_MONITOR or LM_LIGHTWEIGHT it can be\n-            \/\/ either inflated or not because A is not locked anymore\n-            \/\/ and subject to deflation.\n@@ -380,3 +256,5 @@\n-            if (flagLockingMode != LM_MONITOR) {\n-                B.assertNotInflated();\n-            }\n+            \/\/ Here A can be either inflated or not because A is not\n+            \/\/ locked anymore and subject to deflation.\n+\n+            B.assertNotInflated();\n+\n@@ -446,1 +324,0 @@\n-        System.out.println(\"INFO: LockingMode=\" + flagLockingMode);\n","filename":"test\/hotspot\/jtreg\/runtime\/Monitor\/TestRecursiveLocking.java","additions":36,"deletions":159,"binary":false,"changes":195,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -64,3 +64,6 @@\n-      \/\/ If the second mapping happens to be adjacent to the first mapping, reserve another mapping and release the second mapping; for\n-      \/\/ this test, we want to see two disjunct mappings.\n-      if (addr2 == addr1 + reserveSize) {\n+      \/\/ For this test, we want to see two disjunct mappings.\n+      if ((addr2 == addr1 + reserveSize) || (addr2 == addr1 - reserveSize)) {\n+        \/\/               <---r1---><---r2--->...<---tmp--->\n+        \/\/ <---tmp--->...<---r1---><---r2--->\n+        \/\/\n+        \/\/ Reserve a new region and find whether r1 or r2 to be released.\n@@ -68,2 +71,14 @@\n-        wb.NMTReleaseMemory(addr2, reserveSize);\n-        addr2 = tmp;\n+        long r1 = addr1 < addr2 ? addr1 : addr2;\n+        long r2 = addr1 > addr2 ? addr1 : addr2;\n+        long tmp_end = tmp + reserveSize;\n+        long r1_end = r1 + reserveSize;\n+        long r2_end = r2 + reserveSize;\n+        if (tmp >= r2_end) {\n+          wb.NMTReleaseMemory(r2, reserveSize);\n+          addr1 = r1;\n+          addr2 = tmp;\n+        } else if (tmp_end <= r1) {\n+          wb.NMTReleaseMemory(r1, reserveSize);\n+          addr1 = tmp;\n+          addr2 = r2;\n+        }\n","filename":"test\/hotspot\/jtreg\/runtime\/NMT\/VirtualAllocTestType.java","additions":21,"deletions":6,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2023, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,1 +29,1 @@\n- * @run main\/othervm -XX:+TraceBytecodes -XX:TraceBytecodesAt=2000 -XX:TraceBytecodesStopAt=3000 TraceBytecodes\n+ * @run main\/othervm -XX:+TraceBytecodes -XX:TraceBytecodesAt=1000000 -XX:TraceBytecodesStopAt=1001000 TraceBytecodes\n@@ -32,1 +32,2 @@\n-\/\/ This is just a very simple sanity test. Trace about 1000 bytecodes. See the .jtr file for the output.\n+\/\/ CountBytecodes returns 1826384 bytecodes, so trace starting at a million to trace parallel threads.\n+\/\/ This is just a very simple sanity test. See the .jtr file for the output.\n@@ -34,2 +35,2 @@\n-public class TraceBytecodes {\n-    public static void main(String args[]) {\n+public class TraceBytecodes extends Thread {\n+    public void run() {\n@@ -38,0 +39,28 @@\n+\n+    private static TraceBytecodes[] threads = new TraceBytecodes[2];\n+    private static boolean success = true;\n+\n+    private static boolean report_success() {\n+        for (int i = 0; i < 2; i++) {\n+          try {\n+            threads[i].join();\n+          } catch (InterruptedException e) {}\n+        }\n+        return success;\n+    }\n+\n+    public static void main(String args[]) {\n+        threads[0] = new TraceBytecodes();\n+        threads[1] = new TraceBytecodes();\n+        for (int i = 0; i < 2; i++) {\n+            threads[i].setName(\"Loading Thread #\" + (i + 1));\n+            threads[i].start();\n+            System.out.println(\"Thread \" + (i + 1) + \" was started...\");\n+        }\n+\n+        if (report_success()) {\n+           System.out.println(\"PASSED\");\n+        } else {\n+            throw new RuntimeException(\"FAILED\");\n+        }\n+    }\n","filename":"test\/hotspot\/jtreg\/runtime\/interpreter\/TraceBytecodes.java","additions":34,"deletions":5,"binary":false,"changes":39,"status":"modified"},{"patch":"@@ -47,3 +47,8 @@\n-        int length = Integer.MAX_VALUE\/2 + 1;\n-        char character = (char)0XD1; \/\/ N with tilde\n-        long utf8Length = 2L * length;\n+        \/\/ We want a string whose UTF-8 length is > Integer.MAX_VALUE, but\n+        \/\/ whose \"natural\" length is < Integer.MAX_VALUE\/2 so it can be\n+        \/\/ created regardless of whether compact-strings are enabled or not.\n+        \/\/ So we use a character that encodes as 3-bytes in UTF-8.\n+        \/\/   U+08A0 : e0 a2 a0 : ARABIC LETTER BEH WITH SMALL V BELOW\n+        char character = '\\u08A0';\n+        int length = Integer.MAX_VALUE\/2 - 1;\n+        long utf8Length = 3L * length;\n","filename":"test\/hotspot\/jtreg\/runtime\/jni\/checked\/TestLargeUTF8Length.java","additions":8,"deletions":3,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2024, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,1 +33,1 @@\n- * @run main\/othervm -Xbootclasspath\/a:. -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI -Xint -XX:LockingMode=2 TestLockStackCapacity\n+ * @run main\/othervm -Xbootclasspath\/a:. -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI -Xint TestLockStackCapacity\n@@ -42,2 +42,0 @@\n-    static final int LockingMode = WB.getIntVMFlag(\"LockingMode\").intValue();\n-    static final int LM_LIGHTWEIGHT = 2;\n@@ -98,4 +96,0 @@\n-        if (LockingMode != LM_LIGHTWEIGHT) {\n-            throw new SkippedException(\"Test only valid for LM_LIGHTWEIGHT\");\n-        }\n-\n@@ -103,1 +97,1 @@\n-            throw new SkippedException(\"Test only valid if LM_LIGHTWEIGHT supports recursion\");\n+            throw new SkippedException(\"Test only valid if lightweight locking supports recursion\");\n","filename":"test\/hotspot\/jtreg\/runtime\/lockStack\/TestLockStackCapacity.java","additions":3,"deletions":9,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -52,1 +52,0 @@\n-    static final int LM_MONITOR = 0;\n@@ -57,2 +56,2 @@\n-        if (WB.getIntVMFlag(\"LockingMode\") == LM_MONITOR) {\n-            throw new SkippedException(\"LM_MONITOR always inflates. Invalid test.\");\n+        if (WB.getBooleanVMFlag(\"VerifyHeavyMonitors\")) {\n+            throw new SkippedException(\"VerifyHeavyMonitors always inflates. Invalid test.\");\n","filename":"test\/hotspot\/jtreg\/runtime\/locking\/TestRecursiveMonitorChurn.java","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,1 +26,1 @@\n- * @bug 8141211 8147477\n+ * @bug 8141211 8147477 8358080\n@@ -37,0 +37,2 @@\n+import java.util.regex.Matcher;\n+import java.util.regex.Pattern;\n@@ -47,1 +49,1 @@\n-        OutputAnalyzer output = new OutputAnalyzer(pb.start());\n+        OutputAnalyzer output = ProcessTools.executeProcess(pb);\n@@ -50,1 +52,15 @@\n-        output.shouldHaveExitValue(0);\n+        output.shouldMatch(\"info..exceptions,stacktrace.*at ExceptionsTest[$]InternalClass.bar[(]ExceptionsTest.java:[0-9]+\" +\n+                           \".*\\n.*\" +\n+                           \"info..exceptions,stacktrace.*at ExceptionsTest[$]InternalClass.foo[(]ExceptionsTest.java:[0-9]+\" +\n+                           \".*\\n.*\" +\n+                           \"info..exceptions,stacktrace.*at ExceptionsTest[$]InternalClass.main[(]ExceptionsTest.java:[0-9]+\");\n+\n+        \/\/ Note: \"(?s)\" means that the \".\" in the regexp can match the newline character.\n+        \/\/ To avoid verbosity, stack trace for bar2()->baz2() should be printed only once:\n+        \/\/ - It should be printed when the exception is thrown inside bzz2()\n+        \/\/ - It should not be printed when the interpreter is looking for an exception handler inside bar2()\n+        output.shouldMatch(\"(?s)baz2.*bar2\");\n+        output.shouldNotMatch(\"(?s)baz2.*bar2,*baz2.*bar2\");\n+\n+        \/\/ Two stack traces should include main()->foo2(), as an exception is thrown at two different BCIs in bar2().\n+        output.shouldMatch(\"(?s)foo2.*main.*foo2.*main\");\n@@ -60,1 +76,1 @@\n-        ProcessBuilder pb = ProcessTools.createLimitedTestJavaProcessBuilder(\"-Xlog:exceptions=info\",\n+        ProcessBuilder pb = ProcessTools.createLimitedTestJavaProcessBuilder(\"-Xlog:exceptions,exceptions+stacktrace\",\n@@ -69,1 +85,1 @@\n-        updateEnvironment(pb, \"_JAVA_OPTIONS\", \"-Xlog:exceptions=info\");\n+        updateEnvironment(pb, \"_JAVA_OPTIONS\", \"-Xlog:exceptions,exceptions+stacktrace\");\n@@ -83,1 +99,10 @@\n-        public static void main(String[] args) throws Exception {\n+        public static void main(String[] args) {\n+            foo();\n+            foo2();\n+        }\n+\n+        static void foo() {\n+            bar();\n+        }\n+\n+        static void bar() {\n@@ -90,0 +115,24 @@\n+\n+        static void foo2() {\n+            try {\n+                bar2();\n+            } catch (Exception e) {\n+                System.out.println(\"Exception 2 caught.\");\n+            }\n+        }\n+\n+        static void bar2() {\n+            try {\n+                baz2();\n+            } catch (RuntimeException e) {\n+                throw e; \/\/ Rethrow -- should print a new callstack.\n+            }\n+        }\n+\n+        static void baz2() {\n+            bzz2();\n+        }\n+\n+        static void bzz2() {\n+            throw new RuntimeException(\"Test exception 2 for logging\");\n+        }\n","filename":"test\/hotspot\/jtreg\/runtime\/logging\/ExceptionsTest.java","additions":56,"deletions":7,"binary":false,"changes":63,"status":"modified"},{"patch":"@@ -1,1 +1,1 @@\n--Xlog:exceptions=info\n+-Xlog:exceptions,exceptions+stacktrace\n","filename":"test\/hotspot\/jtreg\/runtime\/logging\/ExceptionsTest_options_file","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1,303 +0,0 @@\n-\/*\n- * Copyright (c) 2021, 2024, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-import jdk.test.lib.Asserts;\n-import jdk.test.lib.Utils;\n-import jdk.test.lib.process.ProcessTools;\n-import jdk.test.lib.process.OutputAnalyzer;\n-\n-import java.lang.reflect.Constructor;\n-import java.lang.reflect.InvocationTargetException;\n-import java.util.List;\n-import java.util.concurrent.atomic.AtomicReference;\n-import java.util.concurrent.ExecutorService;\n-import java.util.concurrent.Executor;\n-import java.util.concurrent.Executors;\n-import java.util.concurrent.ThreadFactory;\n-import java.util.regex.Matcher;\n-import java.util.regex.Pattern;\n-\n-\/*\n- * Tests that JNI monitors work correctly with virtual threads,\n- * There are multiple test scenarios that we check using unified logging output\n- * (both positive and negative tests). Each test case is handled by its own @-test\n- * definition so that we can run each sub-test independently.\n- *\n- * The original bug was only discovered because the ForkJoinPool worker thread terminated\n- * and trigerred an assertion failure. So we use a custom scheduler to give us control.\n- *\/\n-\n-\/**\n- * @test id=normal\n- * @bug 8327743\n- * @summary Normal lock then unlock\n- * @library \/test\/lib\n- * @modules java.base\/java.lang:+open\n- * @requires vm.continuations\n- * @run driver JNIMonitor Normal\n- *\/\n-\n-\/**\n- * @test id=multiNormal\n- * @bug 8327743\n- * @summary Normal lock then unlock by multiple threads\n- * @library \/test\/lib\n- * @modules java.base\/java.lang:+open\n- * @requires vm.continuations\n- * @run driver JNIMonitor MultiNormal\n- *\/\n-\n-\/**\n- * @test id=missingUnlock\n- * @bug 8327743\n- * @summary Don't do the unlock and exit normally\n- * @library \/test\/lib\n- * @modules java.base\/java.lang:+open\n- * @requires vm.continuations\n- * @run driver JNIMonitor MissingUnlock\n- *\/\n-\n-\/**\n- * @test id=multiMissingUnlock\n- * @bug 8327743\n- * @summary Don't do the unlock and exit normally, by multiple threads\n- * @library \/test\/lib\n- * @modules java.base\/java.lang:+open\n- * @requires vm.continuations\n- * @run driver JNIMonitor MultiMissingUnlock\n- *\/\n-\n-\/**\n- * @test id=missingUnlockWithThrow\n- * @bug 8327743\n- * @summary Don't do the unlock and exit by throwing\n- * @library \/test\/lib\n- * @modules java.base\/java.lang:+open\n- * @requires vm.continuations\n- * @run driver JNIMonitor MissingUnlockWithThrow\n- *\/\n-\n-\/**\n- * @test id=multiMissingUnlockWithThrow\n- * @bug 8327743\n- * @summary Don't do the unlock and exit by throwing, by multiple threads\n- * @library \/test\/lib\n- * @modules java.base\/java.lang:+open\n- * @requires vm.continuations\n- * @run driver JNIMonitor MultiMissingUnlockWithThrow\n- *\/\n-\n-public class JNIMonitor {\n-\n-    public static void main(String[] args) throws Exception {\n-        String test = args[0];\n-        String[] cmdArgs = new String[] {\n-            \"-Djava.library.path=\" + Utils.TEST_NATIVE_PATH,\n-            \/\/ Grant access to ThreadBuilders$VirtualThreadBuilder\n-            \"--add-opens=java.base\/java.lang=ALL-UNNAMED\",\n-            \/\/ Enable the JNI warning\n-            \"-Xcheck:jni\",\n-            \"-Xlog:jni=debug\",\n-            \/\/ Enable thread termination logging as a visual cross-check\n-            \"-Xlog:thread+os=info\",\n-            \/\/ We only count monitors in LM_LEGACY mode\n-            \"-XX:LockingMode=1\",\n-            \/\/ Disable compact headers since that switches locking mode to LM_LIGHTWEIGHT\n-            \"-XX:-UseCompactObjectHeaders\",\n-            \"JNIMonitor$\" + test,\n-        };\n-        OutputAnalyzer oa = ProcessTools.executeTestJava(cmdArgs);\n-        oa.shouldHaveExitValue(0);\n-        oa.stdoutShouldMatch(terminated);\n-\n-        switch(test) {\n-            case \"Normal\":\n-            case \"MultiNormal\":\n-                oa.stdoutShouldNotMatch(stillLocked);\n-                break;\n-            case \"MissingUnlock\":\n-                oa.stdoutShouldMatch(stillLocked);\n-                break;\n-            case \"MultiMissingUnlock\":\n-                parseOutputForPattern(oa.stdoutAsLines(), stillLocked, MULTI_THREAD_COUNT);\n-                break;\n-            case \"MissingUnlockWithThrow\":\n-                oa.stdoutShouldMatch(stillLocked);\n-                oa.stderrShouldContain(throwMsg);\n-                break;\n-            case \"MultiMissingUnlockWithThrow\":\n-                parseOutputForPattern(oa.stdoutAsLines(), stillLocked, MULTI_THREAD_COUNT);\n-                parseOutputForPattern(oa.stderrAsLines(), throwMsg, MULTI_THREAD_COUNT);\n-                break;\n-\n-            default: throw new Error(\"Unknown arg: \" + args[0]);\n-        }\n-        oa.reportDiagnosticSummary();\n-    }\n-\n-    \/\/ The number of threads for a multi tests. Arbitrarily chosen to be > 1 but small\n-    \/\/ enough to not waste too much time.\n-    static final int MULTI_THREAD_COUNT = 5;\n-\n-    \/\/ The logging message for leaving a monitor JNI locked has the form\n-    \/\/   [0.187s][debug][jni] VirtualThread (tid: 28, carrier id: 29) exiting with Objects still locked by JNI MonitorEnter.\n-    \/\/ but if the test is run with other logging options then whitespace may get introduced in the\n-    \/\/ log decorator sections, so ignore those.\n-    static final String stillLocked = \"VirtualThread \\\\(tid:.*exiting with Objects still locked by JNI MonitorEnter\";\n-    \/\/ The carrier thread termination logging has the form:\n-    \/\/ [1.394s][info][os,thread] JavaThread exiting (name: \"pool-1-thread-1\", tid: 3090592).\n-    static final String terminated = \"JavaThread exiting \\\\(name: \\\"pool-1-thread-1\\\"\";\n-\n-    static final String throwMsg = \"Terminating via exception as requested\";\n-\n-    \/\/ Check the process logging output for the given pattern to see if the expected number of\n-    \/\/ lines are found.\n-    private static void parseOutputForPattern(List<String> lines, String pattern, int expected) {\n-        Pattern p = Pattern.compile(pattern);\n-        int found = 0;\n-        for (String line : lines) {\n-            Matcher m = p.matcher(line);\n-            if (m.find()) {\n-                found++;\n-            }\n-        }\n-        if (found != expected) {\n-            throw new RuntimeException(\"Checking for pattern \\\"\" + pattern + \"\\\": expected \"\n-                                       + expected + \" but found \" + found);\n-        }\n-    }\n-\n-\n-    \/\/ straight-forward interface to JNI monitor functions\n-    static native int monitorEnter(Object o);\n-    static native int monitorExit(Object o);\n-\n-    \/\/ Isolate the native library loading to the actual test cases, not the class that\n-    \/\/ jtreg Driver will load and execute.\n-    static class TestBase {\n-\n-        static {\n-            System.loadLibrary(\"JNIMonitor\");\n-        }\n-\n-        \/\/ This gives us a way to control the scheduler used for our virtual threads. The test\n-        \/\/ only works as intended when the virtual threads run on the same carrier thread (as\n-        \/\/ that carrier maintains ownership of the monitor if the virtual thread fails to unlock it).\n-        \/\/ The original issue was also only discovered due to the carrier thread terminating\n-        \/\/ unexpectedly, so we can force that condition too by shutting down our custom scheduler.\n-        private static Thread.Builder.OfVirtual virtualThreadBuilder(Executor scheduler) {\n-            Thread.Builder.OfVirtual builder = Thread.ofVirtual();\n-            try {\n-                Class<?> clazz = Class.forName(\"java.lang.ThreadBuilders$VirtualThreadBuilder\");\n-                Constructor<?> ctor = clazz.getDeclaredConstructor(Executor.class);\n-                ctor.setAccessible(true);\n-                return (Thread.Builder.OfVirtual) ctor.newInstance(scheduler);\n-            } catch (InvocationTargetException e) {\n-                Throwable cause = e.getCause();\n-                if (cause instanceof RuntimeException re) {\n-                    throw re;\n-                }\n-                throw new RuntimeException(e);\n-            } catch (Exception e) {\n-                throw new RuntimeException(e);\n-            }\n-        }\n-\n-        static void runTest(int nThreads, boolean skipUnlock, boolean throwOnExit) throws Throwable {\n-            final Object[] monitors = new Object[nThreads];\n-            for (int i = 0; i < nThreads; i++) {\n-                monitors[i] = new Object();\n-            }\n-            final AtomicReference<Throwable> exception = new AtomicReference();\n-            \/\/ Ensure all our VT's operate of the same carrier, sequentially.\n-            ExecutorService scheduler = Executors.newSingleThreadExecutor();\n-            ThreadFactory factory = virtualThreadBuilder(scheduler).factory();\n-            for (int i = 0 ; i < nThreads; i++) {\n-                Object monitor = skipUnlock ? monitors[i] : monitors[0];\n-                Thread th = factory.newThread(() -> {\n-                        try {\n-                            int res = monitorEnter(monitor);\n-                            Asserts.assertTrue(res == 0, \"monitorEnter should return 0.\");\n-                            Asserts.assertTrue(Thread.holdsLock(monitor), \"monitor should be owned\");\n-                            Thread.yield();\n-                            if (!skipUnlock) {\n-                                res = monitorExit(monitor);\n-                                Asserts.assertTrue(res == 0, \"monitorExit should return 0.\");\n-                                Asserts.assertFalse(Thread.holdsLock(monitor), \"monitor should be unowned\");\n-                            }\n-                        } catch (Throwable t) {\n-                            exception.set(t);\n-                        }\n-                        if (throwOnExit) {\n-                            throw new RuntimeException(throwMsg);\n-                        }\n-                    });\n-                th.start();\n-                th.join();\n-                if (exception.get() != null) {\n-                    throw exception.get();\n-                }\n-            }\n-            \/\/ Now force carrier thread to shutdown.\n-            scheduler.shutdown();\n-        }\n-    }\n-\n-    \/\/ These are the actual test case classes that get exec'd.\n-\n-    static class Normal extends TestBase {\n-        public static void main(String[] args) throws Throwable {\n-            runTest(1, false, false);\n-        }\n-    }\n-\n-    static class MultiNormal extends TestBase {\n-        public static void main(String[] args) throws Throwable {\n-            runTest(MULTI_THREAD_COUNT, false, false);\n-        }\n-    }\n-\n-    static class MissingUnlock extends TestBase  {\n-        public static void main(String[] args) throws Throwable {\n-            runTest(1, true, false);\n-        }\n-    }\n-\n-    static class MultiMissingUnlock extends TestBase {\n-        public static void main(String[] args) throws Throwable {\n-            runTest(MULTI_THREAD_COUNT, true, false);\n-        }\n-    }\n-\n-    static class MissingUnlockWithThrow extends TestBase {\n-        public static void main(String[] args) throws Throwable {\n-            runTest(1, true, true);\n-        }\n-    }\n-\n-    static class MultiMissingUnlockWithThrow extends TestBase {\n-        public static void main(String[] args) throws Throwable {\n-            runTest(MULTI_THREAD_COUNT, true, true);\n-        }\n-    }\n-\n-}\n","filename":"test\/hotspot\/jtreg\/runtime\/vthread\/JNIMonitor\/JNIMonitor.java","additions":0,"deletions":303,"binary":false,"changes":303,"status":"deleted"},{"patch":"@@ -1,52 +0,0 @@\n-\/*\n- * Copyright (c) 2016, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-\n-\/**\n- * @test\n- * @summary Verify ThreadStart JVMTI event with can_generate_early_vmstart capability\n- * @requires vm.jvmti\n- * @run main\/othervm\/native -agentlib:MAAThreadStart MAAThreadStart\n- *\/\n-\n-public class MAAThreadStart {\n-\n-    static {\n-        try {\n-            System.loadLibrary(\"MAAThreadStart\");\n-        } catch (UnsatisfiedLinkError ule) {\n-            System.err.println(\"Could not load MAAThreadStart library\");\n-            System.err.println(\"java.library.path: \"\n-                + System.getProperty(\"java.library.path\"));\n-            throw ule;\n-        }\n-    }\n-\n-    native static int check();\n-\n-    public static void main(String args[]) {\n-        int status = check();\n-        if (status != 0) {\n-            throw new RuntimeException(\"Non-zero status returned from the agent: \" + status);\n-        }\n-    }\n-}\n","filename":"test\/hotspot\/jtreg\/serviceability\/jvmti\/ModuleAwareAgents\/ThreadStart\/MAAThreadStart.java","additions":0,"deletions":52,"binary":false,"changes":52,"status":"deleted"},{"patch":"@@ -1,177 +0,0 @@\n-\/*\n- * Copyright (c) 2016, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-\n-#include <stdio.h>\n-#include <string.h>\n-#include \"jvmti.h\"\n-\n-#ifdef __cplusplus\n-extern \"C\" {\n-#endif\n-\n-#ifndef JNI_ENV_ARG\n-\n-#ifdef __cplusplus\n-#define JNI_ENV_ARG(x, y) y\n-#define JNI_ENV_PTR(x) x\n-#else\n-#define JNI_ENV_ARG(x,y) x, y\n-#define JNI_ENV_PTR(x) (*x)\n-#endif\n-\n-#endif\n-\n-#define TranslateError(err) \"JVMTI error\"\n-\n-#define PASSED 0\n-#define FAILED 2\n-\n-static const char *EXC_CNAME = \"java\/lang\/Exception\";\n-\n-static jvmtiEnv *jvmti = NULL;\n-static jint result = PASSED;\n-static jboolean printdump = JNI_FALSE;\n-\n-static int thread_start_events_vm_start = 0;\n-\n-static jint Agent_Initialize(JavaVM *jvm, char *options, void *reserved);\n-\n-JNIEXPORT\n-jint JNICALL Agent_OnLoad(JavaVM *jvm, char *options, void *reserved) {\n-    return Agent_Initialize(jvm, options, reserved);\n-}\n-\n-JNIEXPORT\n-jint JNICALL Agent_OnAttach(JavaVM *jvm, char *options, void *reserved) {\n-    return Agent_Initialize(jvm, options, reserved);\n-}\n-\n-JNIEXPORT\n-jint JNICALL JNI_OnLoad(JavaVM *jvm, void *reserved) {\n-    return JNI_VERSION_9;\n-}\n-\n-static\n-jint throw_exc(JNIEnv *env, char *msg) {\n-    jclass exc_class = JNI_ENV_PTR(env)->FindClass(JNI_ENV_ARG(env, EXC_CNAME));\n-\n-    if (exc_class == NULL) {\n-        printf(\"throw_exc: Error in FindClass(env, %s)\\n\", EXC_CNAME);\n-        return -1;\n-    }\n-    return JNI_ENV_PTR(env)->ThrowNew(JNI_ENV_ARG(env, exc_class), msg);\n-}\n-\n-\n-void JNICALL Callback_ThreadStart(jvmtiEnv *jvmti_env, JNIEnv *env, jthread thread) {\n-    jvmtiError err;\n-    jvmtiPhase phase;\n-\n-    err = (*jvmti)->GetPhase(jvmti_env,&phase);\n-    if (err != JVMTI_ERROR_NONE) {\n-        printf(\"ThreadStart event: GetPhase error: %s (%d)\\n\", TranslateError(err), err);\n-        result = FAILED;\n-        return;\n-    }\n-\n-    if (phase == JVMTI_PHASE_START) {\n-        thread_start_events_vm_start++;\n-    }\n-\n-    if (printdump == JNI_TRUE) {\n-        printf(\">>>    ThreadStart event: phase(%d)\\n\", phase);\n-    }\n-}\n-\n-static\n-jint Agent_Initialize(JavaVM *jvm, char *options, void *reserved) {\n-    jint res, size;\n-    jvmtiCapabilities caps;\n-    jvmtiEventCallbacks callbacks;\n-    jvmtiError err;\n-\n-    if (options != NULL && strcmp(options, \"printdump\") == 0) {\n-        printdump = JNI_TRUE;\n-    }\n-\n-    res = JNI_ENV_PTR(jvm)->GetEnv(JNI_ENV_ARG(jvm, (void **) &jvmti),\n-        JVMTI_VERSION_9);\n-    if (res != JNI_OK || jvmti == NULL) {\n-        printf(\"    Error: wrong result of a valid call to GetEnv!\\n\");\n-        return JNI_ERR;\n-    }\n-\n-    printf(\"Enabling following capability: can_generate_early_vmstart\\n\");\n-    memset(&caps, 0, sizeof(caps));\n-    caps.can_generate_early_vmstart = 1;\n-\n-    err = (*jvmti)->AddCapabilities(jvmti, &caps);\n-    if (err != JVMTI_ERROR_NONE) {\n-        printf(\"    Error in AddCapabilites: %s (%d)\\n\", TranslateError(err), err);\n-        return JNI_ERR;\n-    }\n-\n-    size = (jint)sizeof(callbacks);\n-\n-    memset(&callbacks, 0, sizeof(callbacks));\n-    callbacks.ThreadStart = Callback_ThreadStart;\n-\n-    err = (*jvmti)->SetEventCallbacks(jvmti, &callbacks, size);\n-    if (err != JVMTI_ERROR_NONE) {\n-        printf(\"    Error in SetEventCallbacks: %s (%d)\\n\", TranslateError(err), err);\n-        return JNI_ERR;\n-    }\n-\n-    err = (*jvmti)->SetEventNotificationMode(jvmti, JVMTI_ENABLE, JVMTI_EVENT_THREAD_START, NULL);\n-    if (err != JVMTI_ERROR_NONE) {\n-        printf(\"    Error in SetEventNotificationMode: %s (%d)\\n\", TranslateError(err), err);\n-        return JNI_ERR;\n-    }\n-\n-    return JNI_OK;\n-}\n-\n-JNIEXPORT jint JNICALL\n-Java_MAAThreadStart_check(JNIEnv *env, jclass cls) {\n-    jobject loader = NULL;\n-\n-    if (jvmti == NULL) {\n-        throw_exc(env, \"JVMTI client was not properly loaded!\\n\");\n-        return FAILED;\n-    }\n-\n-    \/*\n-     * Expecting that ThreadStart events are sent during VM Start phase when\n-     * can_generate_early_vmstart capability is enabled.\n-     *\/\n-    if (thread_start_events_vm_start == 0) {\n-        throw_exc(env, \"Didn't get ThreadStart events in VM early start phase!\\n\");\n-        return FAILED;\n-    }\n-\n-    return result;\n-}\n-\n-#ifdef __cplusplus\n-}\n-#endif\n","filename":"test\/hotspot\/jtreg\/serviceability\/jvmti\/ModuleAwareAgents\/ThreadStart\/libMAAThreadStart.c","additions":0,"deletions":177,"binary":false,"changes":177,"status":"deleted"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2023, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2023, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -49,3 +49,0 @@\n-import com.sun.management.HotSpotDiagnosticMXBean;\n-import java.lang.management.ManagementFactory;\n-\n@@ -280,3 +277,1 @@\n-        boolean legacyLockingMode = ManagementFactory.getPlatformMXBean(HotSpotDiagnosticMXBean.class)\n-                                        .getVMOption(\"LockingMode\").getValue().equals(\"1\");\n-        return is_virtual && !isBoundVThread && !legacyLockingMode;\n+        return is_virtual && !isBoundVThread;\n","filename":"test\/hotspot\/jtreg\/serviceability\/jvmti\/vthread\/StopThreadTest\/StopThreadTest.java","additions":2,"deletions":7,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2024, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -49,1 +49,1 @@\n-            LingeredApp.startApp(theApp, \"-Xmx4m\");\n+            LingeredApp.startApp(theApp, \"-Xmx8m\");\n","filename":"test\/hotspot\/jtreg\/serviceability\/sa\/ClhsdbJstackWithConcurrentLock.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -50,0 +50,1 @@\n+                    \"share\/opto\"\n","filename":"test\/hotspot\/jtreg\/sources\/TestIncludesAreSorted.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,3 +26,0 @@\n-import jdk.internal.jimage.ImageLocation;\n-import jdk.internal.jimage.ImageReader;\n-\n@@ -30,0 +27,4 @@\n+import java.nio.file.DirectoryStream;\n+import java.nio.file.FileSystem;\n+import java.nio.file.FileVisitResult;\n+import java.nio.file.FileVisitor;\n@@ -32,1 +33,6 @@\n-import java.util.Arrays;\n+import java.nio.file.SimpleFileVisitor;\n+import java.nio.file.attribute.BasicFileAttributes;\n+import java.nio.file.spi.FileSystemProvider;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n@@ -42,11 +48,15 @@\n-        return Arrays.stream(reader.getEntryNames())\n-                     .filter(name -> name.endsWith(\".class\"))\n-                     .filter(name -> !name.endsWith(\"module-info.class\"))\n-                     .map(ClassPathJimageEntry::toFileName)\n-                     .map(Utils::fileNameToClassName);\n-    }\n-\n-    private static String toFileName(String name) {\n-        final char nameSeparator = '\/';\n-        assert name.charAt(0) == nameSeparator : name;\n-        return name.substring(name.indexOf(nameSeparator, 1) + 1);\n+        Path modulesRoot = jrtFileSystem.getPath(\"\/modules\");\n+        List<String> classNames = new ArrayList<>();\n+        FileVisitor<Path> collectClassNames = new SimpleFileVisitor<>() {\n+            @Override\n+            public FileVisitResult visitFile(Path path, BasicFileAttributes attrs) {\n+                classNames.add(Utils.fileNameToClassName(modulesRoot.relativize(path).toString()));\n+                return FileVisitResult.CONTINUE;\n+            }\n+        };\n+        try {\n+            Files.walkFileTree(modulesRoot, collectClassNames);\n+        } catch (IOException e) {\n+            throw new Error(e);\n+        }\n+        return classNames.stream();\n@@ -63,1 +73,1 @@\n-            reader.close();\n+            jrtFileSystem.close();\n@@ -72,1 +82,1 @@\n-    private final ImageReader reader;\n+    private final FileSystem jrtFileSystem;\n@@ -80,1 +90,5 @@\n-            reader = ImageReader.open(root);\n+            jrtFileSystem = FileSystemProvider.installedProviders().stream()\n+                    .filter(p -> \"jrt\".equals(p.getScheme()))\n+                    .findFirst()\n+                    .orElseThrow(() -> new Error(\"cannot find JRT filesystem for \" + root))\n+                    .newFileSystem(root, Map.of());\n@@ -88,5 +102,9 @@\n-        String resource = Utils.classNameToFileName(name);\n-        for (String m : reader.getModuleNames()) {\n-            ImageLocation location = reader.findLocation(m, resource);\n-            if (location != null) {\n-                return reader.getResource(location);\n+        \/\/ Relative path to search for inside each \/modules\/<module> directory.\n+        Path resourcePath = jrtFileSystem.getPath(Utils.classNameToFileName(name));\n+        Path modulesRoot = jrtFileSystem.getPath(\"\/modules\");\n+        try (DirectoryStream<Path> modules = Files.newDirectoryStream(modulesRoot)) {\n+            for (Path module : modules) {\n+                Path p = module.resolve(resourcePath);\n+                if (Files.isRegularFile(p)) {\n+                    return Files.readAllBytes(p);\n+                }\n@@ -94,0 +112,2 @@\n+        } catch (IOException e) {\n+            throw new RuntimeException(e);\n@@ -97,1 +117,0 @@\n-\n","filename":"test\/hotspot\/jtreg\/testlibrary\/ctw\/src\/sun\/hotspot\/tools\/ctw\/ClassPathJimageEntry.java","additions":44,"deletions":25,"binary":false,"changes":69,"status":"modified"},{"patch":"@@ -311,0 +311,2 @@\n+                \/\/ Do not pay extra for verifying inline caches during nmethod cleanups\n+                \"-XX:-VerifyInlineCaches\",\n","filename":"test\/hotspot\/jtreg\/testlibrary\/ctw\/src\/sun\/hotspot\/tools\/ctw\/CtwRunner.java","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -189,1 +189,1 @@\n-     * Converts the filename to classname.\n+     * Converts the {@code \/}-separated filename to its corresponding class name.\n@@ -192,1 +192,1 @@\n-     * @return corresponding classname\n+     * @return corresponding class name\n@@ -203,0 +203,6 @@\n+    \/**\n+     * Converts a fully qualified class name to a {@code \/}-separated filename.\n+     *\n+     * @param classname fully qualified class name to convert\n+     * @return corresponding filename\n+     *\/\n","filename":"test\/hotspot\/jtreg\/testlibrary\/ctw\/src\/sun\/hotspot\/tools\/ctw\/Utils.java","additions":9,"deletions":3,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2002, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2002, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -35,1 +35,1 @@\n- * or remote mode according to test command line options.\n+ * mode according to test command line options.\n@@ -97,1 +97,1 @@\n-     * Defines mode (local or remote) and type of connector (default, launching,\n+     * Defines mode (local) and type of connector (default, launching,\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/share\/jdb\/Launcher.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -1,1847 +0,0 @@\n-\/*\n- * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-\n-package nsk.share.jpda;\n-\n-import java.io.*;\n-import java.net.*;\n-import java.util.*;\n-\n-import nsk.share.*;\n-\n-\/**\n- * <code>BindServer<\/code> is an utility to perform JPDA tests\n- * in remote mode across network.\n- * <p>\n- * This utility should be started on remote host. It listens for connection\n- * from JPDA tests and launches debuggee VM on this host.\n- * <p>\n- * <code>BindServer<\/code> works together with <code>Binder<\/code> used in\n- * the tests to incapsulate actions required for launching debuggee VM.\n- * See <code>ProcessBinder<\/code> and <code>DebugeeArgumentHandler<\/code>\n- * to know how run tests in local or remote mode across network or\n- * on an single host.\n- * <p>\n- * <code>BindServer<\/code> is started on the debuggee host.\n- * It recognizes following command line options:\n- * <ul>\n- *   <li><code>-bind.file=<i>filename<\/i><\/code> - configuration file\n- *   <li><code>-verbose<\/code> - print verbose messages\n- * <\/ul>\n- * <p>\n- * Only required option is <code>-bind.file<\/code>, which points to the file\n- * where pairs of particular pathes are presented as they are seen from\n- * both hosts along with some other <code>BindServer<\/code> options.\n- * See <i>execution.html<\/i> to read more about format of bind-file.\n- *\n- * @see DebugeeBinder\n- * @see DebugeeArgumentHandler\n- *\/\n-public final class BindServer {\n-\n-    \/** Version of <code>BindServer<\/code> implementation. *\/\n-    public static final long VERSION = 2;\n-\n-    \/** Timeout in milliseconds used for waiting for inner threads. *\/\n-    private static long THREAD_TIMEOUT = DebugeeBinder.THREAD_TIMEOUT;      \/\/ milliseconds\n-\n-    private static int PASSED = 0;\n-    private static int FAILED = 2;\n-    private static int JCK_BASE = 95;\n-\n-    private static int TRACE_LEVEL_PACKETS = 10;\n-    private static int TRACE_LEVEL_THREADS = 20;\n-    private static int TRACE_LEVEL_ACTIONS = 30;\n-    private static int TRACE_LEVEL_SOCKETS = 40;\n-    private static int TRACE_LEVEL_IO = 50;\n-\n-    private static String pathSeparator = System.getProperty(\"path.separator\");\n-    private static String fileSeparator = System.getProperty(\"file.separator\");\n-\n-    private static char pathSeparatorChar = pathSeparator.charAt(0);\n-    private static char fileSeparatorChar = fileSeparator.charAt(0);\n-\n-    private static Log log = null;\n-    private static Log.Logger logger = null;\n-    private static ArgumentHandler argHandler = null;\n-\n-    private static String pathConvertions[][] = null;\n-\n-\n-    private int totalRequests = 0;\n-    private int acceptedRequests = 0;\n-    private int unauthorizedRequests = 0;\n-    private int busyRequests = 0;\n-\n-    \/**\n-     * Start <code>BindServer<\/code> utility from command line.\n-     * This method invokes <code>run()<\/code> and redirects output\n-     * to <code>System.err<\/code>.\n-     *\n-     * @param argv list of command line arguments\n-     *\/\n-    public static void main (String argv[]) {\n-        System.exit(run(argv,System.err) + JCK_BASE);\n-    }\n-\n-    \/**\n-     * Start <code>BindServer<\/code> utility from JCK-compatible\n-     * environment.\n-     *\n-     * @param argv list of command line arguments\n-     * @param out outpur stream for log messages\n-     *\n-     * @return FAILED if error occured\n-     *         PASSED oterwise\n-     *\/\n-    public static int run(String argv[], PrintStream out) {\n-        return new BindServer().runIt(argv, out);\n-    }\n-    \/**\n-     * Perform execution of <code>BindServer<\/code>.\n-     * This method handles command line arguments, starts seperate\n-     * thread for listening connection from test on remote host,\n-     * and waits for command \"exit\" from a user.\n-     * Finally it closes all conections and prints connections\n-     * statiscs.\n-     *\n-     * @param argv list of command line arguments\n-     * @param out outpur stream for log messages\n-     *\n-     * @return FAILED if error occured\n-     *         PASSED oterwise\n-     *\/\n-    private int runIt(String argv[], PrintStream out) {\n-        try {\n-            argHandler = new ArgumentHandler(argv);\n-        } catch (ArgumentHandler.BadOption e) {\n-            out.println(\"ERROR: \" + e.getMessage());\n-            return FAILED;\n-        }\n-\n-        if (argHandler.getArguments().length > 0) {\n-            out.println(\"ERROR: \" + \"Too many positional arguments in command line\");\n-            return FAILED;\n-        }\n-\n-        log = new Log(out, argHandler);\n-        logger = new Log.Logger(log, \"\");\n-\n-        logger.trace(TRACE_LEVEL_THREADS, \"BindServer: starting main thread\");\n-\n-        logger.display(\"Listening to port: \" + argHandler.getBindPortNumber());\n-        logger.display(\"Authorizing host: \" + argHandler.getDebuggerHost());\n-\n-        pathConvertions = new String[][] {\n-            { \"TESTED_JAVA_HOME\", argHandler.getDebuggerJavaHome(), argHandler.getDebugeeJavaHome() },\n-            { \"TESTBASE\", argHandler.getDebuggerTestbase(), argHandler.getDebugeeTestbase() },\n-            { \"WORKDIR\", argHandler.getDebuggerWorkDir(), argHandler.getDebugeeWorkDir() }\n-        };\n-\n-        logger.display(\"Translating pathes:\");\n-        for (int i = 0; i < pathConvertions.length; i++) {\n-            logger.display(pathConvertions[i][0] + \":\" +\"\\n\"\n-                         + \"  \" + pathConvertions[i][1] + \"\\n\"\n-                         + \"  =>\" + \"\\n\"\n-                         + \"  \" + pathConvertions[i][2]);\n-        }\n-\n-        String windir = argHandler.getDebugeeWinDir();\n-        if (!(windir == null || windir.equals(\"\"))) {\n-            logger.display(\"Using WINDIR: \\n\"\n-                         + \"  \" + argHandler.getDebugeeWinDir());\n-        }\n-\n-        BufferedReader stdIn = new BufferedReader(\n-            new InputStreamReader(System.in, System.getProperty(\"stdin.encoding\")));\n-        try (ListeningThread listeningThread = new ListeningThread(this)) {\n-            listeningThread.bind();\n-            listeningThread.start();\n-\n-            System.out.println(\"\\n\"\n-                              + \"BindServer started\" + \"\\n\"\n-                              + \"Type \\\"exit\\\" to shut down BindServer\"\n-                              + \"\\n\");\n-\n-            for (; ; ) {\n-                try {\n-                    String userInput = stdIn.readLine();\n-                    if (userInput == null || userInput.equals(\"exit\")\n-                            || userInput.equals(\"quit\")) {\n-                        logger.display(\"Shutting down BindServer\");\n-                        stdIn.close();\n-                        stdIn = null;\n-                        break;\n-                    } else if (userInput.trim().equals(\"\")) {\n-                        continue;\n-                    } else {\n-                        System.out.println(\"ERROR: Unknown command: \" + userInput);\n-                    }\n-                } catch (IOException e) {\n-                    e.printStackTrace(log.getOutStream());\n-                    throw new Failure(\"Caught exception while reading console command:\\n\\t\"\n-                            + e);\n-                }\n-            }\n-\n-            printSummary(System.out);\n-\n-            logger.trace(TRACE_LEVEL_THREADS, \"BindServer: exiting main thread\");\n-        }\n-\n-        return PASSED;\n-    }\n-\n-    \/**\n-     * Print usefull summary statistics about connections occured.\n-     *\n-     * @param out output stream for printing statistics\n-     *\/\n-    private void printSummary(PrintStream out) {\n-        out.println(\"\\n\"\n-                + \"Connections summary:\" + \"\\n\"\n-                + \"  Tolal connections:     \" + totalRequests + \"\\n\"\n-                + \"  Accepted authorized:   \" + acceptedRequests + \"\\n\"\n-                + \"  Rejected unauthorized  \" + unauthorizedRequests + \"\\n\"\n-                + \"  Rejected being busy:   \" + busyRequests + \"\\n\");\n-    };\n-\n-    \/**\n-     * Check if given <code>path<\/code> starts with the specified prefix taking\n-     * into account difference between <code>slashChar<code> used in <code>path<\/code>\n-     * and <code>fileSeparatorChar<\/code> used in <code>prefix<\/code>.\n-     *\n-     * @param path path to check\n-     * @param prefix prefix to compare with\n-     * @param slashChar file separator used in <code>path<\/code>\n-     *\/\n-    private static boolean checkPathPrefix(String path, String prefix, char slashChar) {\n-        int prefixLength = prefix.length();\n-        if (prefixLength > path.length()) {\n-            return false;\n-        }\n-        for (int i = 0; i < prefixLength; i++) {\n-            char pathChar = path.charAt(i);\n-            char prefixChar = prefix.charAt(i);\n-\n-            if (pathChar != prefixChar) {\n-                if ((pathChar == slashChar || pathChar == fileSeparatorChar\n-                         || pathChar == '\\\\' || pathChar == '\/')\n-                    && (prefixChar == slashChar || prefixChar == fileSeparatorChar\n-                         || prefixChar == '\\\\' || prefixChar == '\/')) {\n-                    \/\/ do nothing\n-                } else {\n-                    return false;\n-                }\n-            }\n-        }\n-        return true;\n-    }\n-\n-    \/**\n-     * Convert given path according to list of prefixes from\n-     * <code>pathConvertions<\/code> table.\n-     *\n-     * @param path path for converting\n-     * @param slash file separator used in <code>path<\/code>\n-     * @param name path identifier used for error messages\n-     * @param strict force throwing Failure if path is not matched\n-     *\n-     * @return string with the converted path\n-     *\n-     * @throws Failure if path does not matched for translation\n-     *\/\n-    private static String convertPath(String path, String slash, String name, boolean strict) {\n-        if (path == null)\n-            return null;\n-\n-        char slashChar = slash.charAt(0);\n-\n-        for (int i = 0; i < pathConvertions.length; i++) {\n-            String from = pathConvertions[i][1];\n-            String to = pathConvertions[i][2];\n-            if (checkPathPrefix(path, from, slashChar)) {\n-                return (to + path.substring(from.length())).replace(slashChar, fileSeparatorChar);\n-            }\n-        }\n-        if (strict) {\n-            throw new Failure(\"Path not matched for translation \" + name + \":\\n\\t\" + path);\n-        }\n-        return path;\n-    }\n-\n-    \/**\n-     * Convert given list of pathes according to list of prefixes from\n-     * <code>pathConvertions<\/code> table by invoking <code>convertPath()<\/code>\n-     * for each path from the list.\n-     *\n-     * @param list list of pathes for converting\n-     * @param slash file separator used in pathes\n-     * @param name path identifier used for error messages\n-     * @param strict force throwing Failure if some path is not matched\n-     *\n-     * @return list of strings with converted pathes\n-     *\n-     * @throws Failure if some path does not matched for translation\n-     *\n-     * @see #convertPath()\n-     *\/\n-    private static String[] convertPathes(String[] list, String slash, String name, boolean strict) {\n-        String[] converted = new String[list.length];\n-        for (int i = 0; i < list.length; i++) {\n-            converted[i] = convertPath(list[i], slash, name, strict);\n-        }\n-        return converted;\n-    }\n-\n-    \/**\n-     * Pause current thread for specified amount of time in milliseconds,\n-     * This method uses <code>Object.wait(long)<\/code> method as a reliable\n-     * method which prevents whole VM from suspending.\n-     *\n-     * @param millisecs - amount of time in milliseconds\n-     *\/\n-    private static void sleeping(int millisecs) {\n-        Object obj = new Object();\n-\n-        synchronized(obj) {\n-            try {\n-                obj.wait(millisecs);\n-            } catch (InterruptedException e) {\n-                e.printStackTrace(log.getOutStream());\n-                new Failure(\"Thread interrupted while sleeping:\\n\\t\" + e);\n-            }\n-        }\n-    }\n-\n-    \/**\n-     * Wait for given thread finished for specified timeout or\n-     * interrupt this thread if not finished.\n-     *\n-     * @param thr thread to wait for\n-     * @param millisecs timeout in milliseconds\n-     *\/\n-    private static void waitInterruptThread(Thread thr, long millisecs) {\n-        if (thr != null) {\n-            String name = thr.getName();\n-            try {\n-                if (thr.isAlive()) {\n-                    logger.trace(TRACE_LEVEL_THREADS, \"Waiting for thread: \" + name);\n-                    thr.join(millisecs);\n-                }\n-            } catch (InterruptedException e) {\n-                e.printStackTrace(log.getOutStream());\n-                throw new Failure (\"Thread interrupted while waiting for another thread:\\n\\t\"\n-                                     + e);\n-            } finally {\n-                if (thr.isAlive()) {\n-                    logger.trace(TRACE_LEVEL_THREADS, \"Interrupting not finished thread: \" + name);\n-                    thr.interrupt();\n-\/*\n-                    logger.display(\"Stopping not finished thread: \" + thr);\n-                    thr.stop();\n- *\/\n-                }\n-            }\n-        }\n-    }\n-\n-    \/**\n-     * Wait for given thread finished for default timeout\n-     * <code>THREAD_TIMEOUT<\/code> and\n-     * interrupt this thread if not finished.\n-     *\n-     * @param thr thread to wait for\n-     *\/\n-    private static void waitInterruptThread(Thread thr) {\n-        waitInterruptThread(thr, THREAD_TIMEOUT);\n-    }\n-\n-\/\/\/\/\/\/\/\/\/ Thread listening a TCP\/IP socket \/\/\/\/\/\/\/\/\/\/\n-\n-    \/**\n-     * An inner thread used for listening connection from remote test\n-     * and starting separate serving thread for each accepted connection.\n-     *\n-     * @see ServingThread\n-     *\/\n-    private static class ListeningThread extends Thread implements AutoCloseable {\n-        private volatile boolean shouldStop = false;\n-        private volatile boolean closed = false;\n-\n-        private BindServer owner = null;\n-        private volatile ServingThread servingThread = null;\n-        private volatile int taskCount = 0;\n-\n-        private ObjectOutputStream socOut = null;\n-        private ObjectInputStream socIn = null;\n-\n-        private String autorizedHostName = argHandler.getDebuggerHost();\n-        private InetAddress autorizedInetAddresses[] = null;\n-        private int port = argHandler.getBindPortNumber();\n-        private Socket socket = null;\n-        private ServerSocket serverSocket = null;\n-        private InetAddress clientInetAddr = null;\n-        private String clientHostName = null;\n-        private SocketConnection connection = null;\n-\n-        \/**\n-         * Make listening thread for given <code>BindServer<\/code> object\n-         * as an owner and bind it to listening port by invoking method\n-         * <code>bind()<\/code>.\n-         *\n-         * @see bind()\n-         *\/\n-        public ListeningThread(BindServer owner) {\n-            super(\"ListeningThread\");\n-            this.owner = owner;\n-            try {\n-                autorizedInetAddresses = InetAddress.getAllByName(autorizedHostName);\n-            } catch (UnknownHostException e) {\n-                e.printStackTrace(log.getOutStream());\n-                throw new Failure(\"Cannot resolve DEBUGGER_HOST value: \" + autorizedHostName);\n-            }\n-        }\n-\n-        \/**\n-         * Bind ServerSocket to the specified port.\n-         *\/\n-        public void bind() {\n-            for (int i = 0; !shouldStop && i < DebugeeBinder.CONNECT_TRIES; i++) {\n-                try {\n-                    logger.trace(TRACE_LEVEL_SOCKETS, \"ListeningThread: binding to server socket ...\");\n-                    \/\/ length of the queue = 2\n-                    serverSocket = new ServerSocket(port, 2);\n-                    \/\/ timeout for the ServerSocket.accept()\n-                    serverSocket.setSoTimeout(DebugeeBinder.CONNECT_TRY_DELAY);\n-                    logger.trace(TRACE_LEVEL_SOCKETS, \"ListeningThread: socket bound: \" + serverSocket);\n-                    logger.display(\"Bound to listening port\");\n-                    return;\n-                } catch (BindException e) {\n-                    logger.display(\"Socket binding try #\" + i + \" failed:\\n\\t\" + e);\n-                    sleeping(DebugeeBinder.CONNECT_TRY_DELAY);\n-                } catch (IOException e) {\n-                    e.printStackTrace(log.getOutStream());\n-                    throw new Failure(\"Caught exception while binding to socket:\\n\\t\"\n-                                    + e);\n-                }\n-            }\n-            throw new Failure(\"Unable to bind to socket after \"\n-                + DebugeeBinder.CONNECT_TRIES + \" tries\");\n-        }\n-\n-        \/**\n-         * Accept socket connection from authorized remote host and\n-         * start separate <code>SrvingThread<\/code> to handle each connection.\n-         * Connection from unauthorized hosts or connections made while\n-         * current connection is alive are rejected.\n-         *\n-         * @see ServingThread\n-         * @see #llowConnection()\n-         * @see allowServing()\n-         *\/\n-        public void run() {\n-            String reply = null;\n-\n-            logger.trace(TRACE_LEVEL_THREADS, \"ListeningThread: started\");\n-            logger.display(\"Listening for connection from remote host\");\n-            while(!(shouldStop || isInterrupted())) {\n-                try {\n-                    try {\n-                        logger.trace(TRACE_LEVEL_SOCKETS, \"ListeningThread: waiting for connection from test\");\n-                        socket = serverSocket.accept();\n-                        logger.trace(TRACE_LEVEL_SOCKETS, \"ListeningThread: connection accepted\");\n-                    } catch(InterruptedIOException e) {\n-\/\/                        logger.trace(TRACE_LEVEL_SOCKETS, \"ListeningThread: timeout of waiting for connection from test\");\n-                        continue;\n-                    }\n-                    owner.totalRequests++;\n-                    logger.display(\"\");\n-                    clientInetAddr = socket.getInetAddress();\n-                    clientHostName = clientInetAddr.getHostName();\n-                    logger.display(\"Connection #\" + owner.totalRequests\n-                                    + \" requested from host: \" + clientHostName);\n-                    connection = new SocketConnection(logger, \"BindServer\");\n-\/\/                    connection.setPingTimeout(DebugeeBinder.PING_TIMEOUT);\n-                    connection.setSocket(socket);\n-                    socket = null;\n-                    if (allowConnection()) {\n-                        if (allowServing()) {\n-                            owner.acceptedRequests++;\n-                            reply = \"host authorized: \" + clientHostName;\n-                            logger.display(\"Accepting connection #\" + owner.acceptedRequests\n-                                            + \": \" + reply);\n-                            servingThread = new ServingThread(this, connection);\n-                            servingThread.start();\n-                            cleanHostConnection();\n-                        } else {\n-                            owner.busyRequests++;\n-                            reply = \"BindServer is busy\";\n-                            logger.complain(\"Rejecting connection #\" + owner.busyRequests\n-                                            + \": \" + reply);\n-                            connection.writeObject(new RequestFailed(reply));\n-                            closeHostConnection();\n-                        }\n-                    } else {\n-                        owner.unauthorizedRequests++;\n-                        reply = \"host unauthorized: \" + clientHostName;\n-                        logger.complain(\"Rejecting connection #\" + owner.unauthorizedRequests\n-                                            + \": \" + reply);\n-                        connection.writeObject(new RequestFailed(reply));\n-                        closeHostConnection();\n-                    }\n-                } catch (Exception e) {\n-                    logger.complain(\"Caught exception while accepting connection:\\n\" + e);\n-                    e.printStackTrace(log.getOutStream());\n-                }\n-            }\n-            logger.trace(TRACE_LEVEL_THREADS, \"ListeningThread: exiting\");\n-            closeConnection();\n-        }\n-\n-        \/**\n-         * Check if the connection made is from authorized host.\n-         *\n-         * @return true if connection is allowed because host authorized\n-         *         false if connection is rejected because host unauthorized\n-         *\/\n-        private boolean allowConnection() {\n-            \/\/ check if local host from loopback address\n-            if (autorizedHostName.equals(\"localhost\"))\n-                return clientInetAddr.isLoopbackAddress();\n-\n-            \/\/ check if equal hostname\n-            if (autorizedHostName.equals(clientHostName))\n-                return true;\n-\n-            \/\/ check if equal host address\n-            for (int i = 0; i < autorizedInetAddresses.length; i++) {\n-                if (clientInetAddr.equals(autorizedInetAddresses[i])) {\n-                    return true;\n-                }\n-            }\n-            return false;\n-        }\n-\n-        \/**\n-         * Check if no current connection exists or it is dead.\n-         * If current connection presents it will be tested by pinging\n-         * remote host and aborted if host sends no reply. If an alive\n-         * connection exists, new connection will be rejected.\n-         *\n-         * @return true if no alive connection exists\n-         *         false otherwise\n-         *\/\n-        private boolean allowServing() {\n-            if (servingThread == null) {\n-                return true;\n-            }\n-            if (servingThread.done) {\n-                return true;\n-            }\n-            if (!servingThread.isConnectionAlive()) {\n-                logger.display(\"# WARNING: Previous connection from remote host is dead: aborting connection\");\n-                servingThread.close();\n-                servingThread = null;\n-                return true;\n-            }\n-\n-\/*\n-            logger.complain(\"Previous connection from remote host is alive: starting new connection\");\n-            servingThread = null;\n-            return true;\n- *\/\n-            logger.complain(\"Previous connection from remote host is alive: reject new connection\");\n-            return false;\n-        }\n-\n-        \/**\n-         * Wait for this thread finished\n-         * for specified timeout or interrupt it.\n-         *\n-         * @param millis timeout in milliseconds\n-         *\/\n-        public void waitForThread(long millis) {\n-            shouldStop = true;\n-            waitInterruptThread(this, millis);\n-        }\n-\n-        \/**\n-         * Close socket connection from remote host.\n-         *\/\n-        private void closeHostConnection() {\n-            if (connection != null) {\n-                connection.close();\n-            }\n-            if (socket != null) {\n-                try {\n-                    socket.close();\n-                } catch (IOException e) {\n-                    logger.complain(\"Caught IOException while closing socket:\\n\\t\"\n-                                    + e);\n-                }\n-                socket = null;\n-            }\n-        }\n-\n-        \/**\n-         * Assign <null> to connection and socket objects\n-         * but do not close them.\n-         *\/\n-        private void cleanHostConnection() {\n-            connection = null;\n-            socket = null;\n-        }\n-\n-        \/**\n-         * Close all connections and sockets.\n-         *\/\n-        private void closeConnection() {\n-            closeHostConnection();\n-            if (serverSocket != null) {\n-                try {\n-                    serverSocket.close();\n-                } catch (IOException e) {\n-                    logger.complain(\"Caught IOException while closing ServerSocket:\\n\\t\"\n-                                    + e);\n-                }\n-                serverSocket = null;\n-            }\n-        }\n-\n-        \/**\n-         * Close thread by closing all connections and waiting\n-         * for thread to finish.\n-         *\n-         * @see #closeConnection()\n-         *\/\n-        @Override\n-        public synchronized void close() {\n-            if (closed) {\n-                return;\n-            }\n-            try {\n-                closeHostConnection();\n-                if (servingThread != null) {\n-                    servingThread.close();\n-                    servingThread = null;\n-                }\n-                waitForThread(THREAD_TIMEOUT);\n-                closeConnection();\n-                closed = true;\n-                logger.trace(TRACE_LEVEL_THREADS, \"ListeningThread closed\");\n-            } catch (Throwable e) {\n-                e.printStackTrace(log.getOutStream());\n-                logger.complain(\"Caught exception while closing ListeningThread:\\n\\t\" + e);\n-            }\n-        }\n-\n-    } \/\/ ListeningThread\n-\n-\/\/\/\/\/\/\/\/\/ Thread working with a communication channel \/\/\/\/\/\/\/\/\/\/\n-\n-    \/**\n-     * An internal thread for handling each connection from a test\n-     * on remote host. It reads requests from test and starts separate\n-     * <code>LaunchingThread<\/code> to execute each request.\n-     *\n-     * @see LaunchingThread\n-     *\/\n-    private static class ServingThread extends Thread {\n-        private volatile boolean shouldStop = false;\n-        private volatile boolean closed = false;\n-        private volatile boolean done = false;\n-\n-        private ListeningThread owner = null;\n-        private LaunchingThread launchingThread = null;\n-\n-        private SocketConnection connection = null;\n-\n-        \/**\n-         * Make serving thread with specified input\/output connection streams\n-         * and given <code>Listenerthread<\/code> as an owner.\n-         *\n-         * @param owner owner of this thread\n-         * @param connection established socket connection with test\n-         *\/\n-        public ServingThread(ListeningThread owner, SocketConnection connection) {\n-            super(\"ServingThread\");\n-            this.owner = owner;\n-            this.connection = connection;\n-        }\n-\n-        \/**\n-         * Read requests from socket connection and start <code>LaunchingThread<\/code>\n-         * to perform each requested action.\n-         *\/\n-        public void run() {\n-            logger.trace(TRACE_LEVEL_THREADS, \"ServingThread: starting handling requests from debugger\");\n-            try {\n-                \/\/ sending OK(version)\n-                logger.trace(TRACE_LEVEL_ACTIONS, \"ServingThread: sending initial OK(VERSION) to debugger\");\n-                connection.writeObject(new OK(VERSION));\n-\n-                \/\/ receiving TaskID(id)\n-                logger.trace(TRACE_LEVEL_IO, \"ServingThread: waiting for TaskID from debugger\");\n-                Object taskID = connection.readObject();\n-                logger.trace(TRACE_LEVEL_IO, \"ServingThread: received TaskID from debugger: \" + taskID);\n-                if (taskID instanceof TaskID) {\n-                    String id = ((TaskID)taskID).id;\n-                    owner.taskCount++;\n-                    logger.println(\"[\" + owner.taskCount + \"\/\" + owner.owner.totalRequests + \"]: \" + id);\n-                } else {\n-                    throw new Failure(\"Unexpected TaskID received form debugger: \" + taskID);\n-                }\n-\n-                \/\/ starting launching thread\n-                launchingThread = new LaunchingThread(this, connection);\n-                launchingThread.start();\n-\n-                \/\/ receiving and handling requests\n-                while(!(shouldStop || isInterrupted())) {\n-                    logger.trace(TRACE_LEVEL_IO, \"ServingThread: waiting for request from debugger\");\n-                    Object request = connection.readObject();\n-                    logger.trace(TRACE_LEVEL_IO, \"ServingThread: received request from debugger: \" + request);\n-                    if (request == null) {\n-                        logger.display(\"Connection closed\");\n-                        break;\n-                    } else if (request instanceof Disconnect) {\n-                        logger.display(\"Closing connection by request\");\n-                        request = null;\n-                        break;\n-                    } else {\n-                        boolean success = false;\n-                        long timeToFinish = System.currentTimeMillis() + THREAD_TIMEOUT;\n-                        while (System.currentTimeMillis() < timeToFinish) {\n-                            if (launchingThread.doneRequest()) {\n-                                success = true;\n-                                logger.trace(TRACE_LEVEL_ACTIONS, \"ServingThread: asking launching thread to handle request: \" + request);\n-                                launchingThread.handleRequest(request);\n-                                break;\n-                            }\n-                            try {\n-                                launchingThread.join(DebugeeBinder.TRY_DELAY);\n-                            } catch (InterruptedException e) {\n-                                throw new Failure(\"ServingThread interrupted while waiting for LaunchingThread:\\n\\t\"\n-                                                + e);\n-                            }\n-                        }\n-                        if (!success) {\n-                            logger.complain(\"Rejecting request because of being busy:\\n\" + request);\n-                            connection.writeObject(\n-                                new RequestFailed(\"Busy with handling previous request\"));\n-                        }\n-                    }\n-                }\n-            } catch (Exception e) {\n-                e.printStackTrace(log.getOutStream());\n-                logger.complain(\"Caught exception while handling request:\\n\\t\" + e);\n-            } finally {\n-                logger.trace(TRACE_LEVEL_THREADS, \"ServingThread: exiting\");\n-                closeConnection();\n-                done = true;\n-            }\n-        }\n-\n-        \/**\n-         * Check if present socket connection is alive.\n-         *\/\n-        private boolean isConnectionAlive() {\n-            return (connection != null && connection.isConnected());\n-        }\n-\n-        \/**\n-         * Wait for this thread finished\n-         * for specified timeout or interrupt it.\n-         *\n-         * @param millis timeout in milliseconds\n-         *\/\n-        public void waitForThread(long millis) {\n-            shouldStop = true;\n-            waitInterruptThread(this, millis);\n-        }\n-\n-        \/**\n-         * Close socket connection from remote host.\n-         *\/\n-        private void closeConnection() {\n-            if (connection != null) {\n-                connection.close();\n-            }\n-            if (launchingThread != null) {\n-                launchingThread.handleRequest(null);\n-            }\n-        }\n-\n-        \/**\n-         * Close thread closing socket connection and\n-         * waiting for thread finished.\n-         *\/\n-        public synchronized void close() {\n-            if (closed) {\n-                return;\n-            }\n-            closeConnection();\n-            if (launchingThread != null) {\n-                launchingThread.close();\n-                launchingThread = null;\n-            }\n-            waitForThread(THREAD_TIMEOUT);\n-            closed = true;\n-            logger.trace(TRACE_LEVEL_THREADS, \"ServingThread closed\");\n-        }\n-\n-    } \/\/ ServingThread\n-\n-\/\/\/\/\/\/\/\/\/ Thread serving a particular Binder's request \/\/\/\/\/\/\/\/\/\/\n-\n-    \/**\n-     * An internal thread to execute each request from a test on remote host.\n-     * Requests are coming from ServingThread by invoking handleRequest(Object)\n-     * method.\n-     *\/\n-    private static class LaunchingThread extends Thread {\n-        private volatile boolean shouldStop = false;\n-        private volatile boolean closed = false;\n-        public volatile boolean done = false;\n-\n-        private ServingThread owner = null;\n-\/\/        private ProcessWaitingThread waitingThread = null;\n-        private Process process = null;\n-\n-        private StreamRedirectingThread stdoutRedirectingThread = null;\n-        private StreamRedirectingThread stderrRedirectingThread = null;\n-\n-        \/** Notification about request occurence. *\/\n-        private volatile Object notification = new Object();\n-        \/** Request to execute. *\/\n-        private volatile Object request = null;\n-        \/** Socket stream to send replies to. *\/\n-        private SocketConnection connection = null;\n-\n-        \/**\n-         * Make thread for executing requests from a test and\n-         * send reply.\n-         *\n-         * @param owner owner of this thread\n-         * @connection socket connection for sending replies\n-         *\/\n-        public LaunchingThread(ServingThread owner, SocketConnection connection) {\n-            super(\"LaunchingThread\");\n-            this.owner = owner;\n-            this.connection = connection;\n-        }\n-\n-        \/**\n-         * Notify this thread that new request has come.\n-         *\n-         * @param request request to execute\n-         *\/\n-        public void handleRequest(Object request) {\n-            synchronized (notification) {\n-                this.request = request;\n-                notification.notifyAll();\n-            }\n-        }\n-\n-        \/**\n-         * Check if request has been executed.\n-         *\/\n-        public boolean doneRequest() {\n-            return done;\n-        }\n-\n-        \/**\n-         * Wait for request notification from <code>ServingThread<\/code>\n-         * and execute an action according to the request.\n-         * Request <i>null<\/code> means thread should finish.\n-         *\/\n-        public void run() {\n-            logger.trace(TRACE_LEVEL_THREADS, \"LaunchingThread: started to handle request\");\n-            done = true;\n-            while (!isInterrupted()) {\n-                \/\/ wait for new request notification\n-                logger.trace(TRACE_LEVEL_ACTIONS, \"LaunchingThread: waiting for request\");\n-                synchronized (notification) {\n-                    try {\n-                        notification.wait();\n-                    } catch (InterruptedException e) {\n-                        logger.complain(\"LaunchingThread interrupted while waiting for request:\\n\\t\"\n-                                        + e);\n-                        break;\n-                    }\n-                }\n-\n-                \/\/ execute the request\n-                try {\n-                    logger.trace(TRACE_LEVEL_ACTIONS, \"LaunchingThread: handling request: \" + request);\n-                    if (request == null) {\n-                        break;\n-                    } else if (request instanceof LaunchDebugee) {\n-                        launchDebugee((LaunchDebugee)request);\n-                    } else if (request instanceof WaitForDebugee) {\n-                        waitForDebugee((WaitForDebugee)request);\n-                    } else if (request instanceof DebugeeExitCode) {\n-                        debugeeExitCode((DebugeeExitCode)request);\n-                    } else if (request instanceof KillDebugee) {\n-                        killDebugee((KillDebugee)request);\n-                    } else {\n-                        String reason = \"Unknown request: \" + request;\n-                        logger.complain(reason);\n-                        sendReply(new RequestFailed(reason));\n-                    }\n-                } catch (Exception e) {\n-                    e.printStackTrace(log.getOutStream());\n-                    logger.complain(\"Caught exception while handling request:\\n\\t\" + e);\n-                }\n-                done = true;\n-            }\n-            done = true;\n-            logger.trace(TRACE_LEVEL_THREADS, \"LaunchingThread: exiting\");\n-            closeConnection();\n-        }\n-\n-        \/**\n-         * Send given reply to remote test.\n-         *\n-         * @param reply reply object to send\n-         *\/\n-        public void sendReply(Object reply) throws IOException {\n-            connection.writeObject(reply);\n-        }\n-\n-        \/**\n-         * Send given output line to remote test.\n-         *\n-         * @param reply wrapper object for output line to send\n-         *\/\n-        public void sendStreamMessage(RedirectedStream wrapper) throws IOException {\n-            logger.trace(TRACE_LEVEL_ACTIONS, \"Sending output line wrapper to debugger: \" + wrapper);\n-            if (connection.isConnected()) {\n-                sendReply(wrapper);\n-            } else {\n-                logger.complain(\"NOT redirected: \" + wrapper.line);\n-            }\n-        }\n-\n-        \/**\n-         * Launch two <code>StreamRedirectingThread<\/code> threads to redirect\n-         * stdin\/stderr output of debuggee VM process via <code>BindServer<\/code>\n-         * connection.\n-         *\n-         * @param process debuggee VM process\n-         *\/\n-        private void launchStreamRedirectors(Process process) {\n-            stdoutRedirectingThread =\n-                new StdoutRedirectingThread(this, process.getInputStream(),\n-                                            DebugeeProcess.DEBUGEE_STDOUT_LOG_PREFIX);\n-            stdoutRedirectingThread.start();\n-            stderrRedirectingThread =\n-                new StderrRedirectingThread(this, process.getErrorStream(),\n-                                            DebugeeProcess.DEBUGEE_STDERR_LOG_PREFIX);\n-            stderrRedirectingThread.start();\n-        }\n-\n-        \/**\n-         * Execute request for launching debuggee.\n-         *\n-         * @param request request to execute\n-         *\/\n-        private void launchDebugee(LaunchDebugee request) throws IOException {\n-            logger.trace(TRACE_LEVEL_ACTIONS, \"LaunchDebugee: handle request: \" + request);\n-\n-            if (process != null) {\n-                logger.complain(\"Unable to launch debuggee: process already launched\");\n-                sendReply(new RequestFailed(\"Debuggee process already launched\"));\n-                return;\n-            }\n-\n-            try {\n-                String[] cmd = request.cmd;\n-                cmd[0] = convertPath(cmd[0], request.slash, \"TESTED_JAVA_HOME\", true);\n-                for (int i = 1; i < cmd.length; i++) {\n-                    cmd[i] = convertPath(cmd[i], request.slash, \"JAVA_ARGS\", false);\n-                }\n-                String workDir = convertPath(request.workDir, request.slash, \"WORKDIR\", true);\n-                String[] classPathes = convertPathes(request.classPathes, request.slash, \"CLASSPATH\", true);\n-                String windir = argHandler.getDebugeeWinDir();\n-\n-                boolean win = (!(windir == null || windir.equals(\"\")));\n-                String[] envp = new String[win ? 3 : 1] ;\n-                envp[0] = \"CLASSPATH=\" + ArgumentParser.joinArguments(classPathes, \"\", pathSeparator);\n-                if (win) {\n-                    envp[1] = \"WINDIR=\" + windir;\n-                    envp[2] = \"SystemRoot=\" + windir;\n-                }\n-\n-                logger.display(\"Setting environment:\\n\"\n-                                + \"  \" + ArgumentHandler.joinArguments(envp, \"\", \"\\n  \"));\n-                logger.display(\"Setting work dir:\\n\"\n-                                + \"  \" + workDir);\n-                logger.display(\"Launching debuggee:\\n\"\n-                                + \"  \" + ArgumentHandler.joinArguments(cmd, \"\\\"\"));\n-\n-                process = Runtime.getRuntime().exec(cmd, envp, new File(workDir));\n-                logger.display(\"  debuggee launched successfully\");\n-\n-                launchStreamRedirectors(process);\n-            } catch (Exception e) {\n-                if (!(e instanceof Failure)) {\n-                    e.printStackTrace(log.getOutStream());\n-                }\n-                logger.complain(\"Caught exception while launching debuggee:\\n\\t\" + e);\n-                sendReply(new CaughtException(e));\n-                return;\n-            }\n-\n-            sendReply(new OK());\n-        }\n-\n-        \/**\n-         * Execute request for waiting for debuggee exited.\n-         *\n-         * @param request request to execute\n-         *\/\n-        private void waitForDebugee(WaitForDebugee request) throws IOException {\n-            logger.trace(TRACE_LEVEL_ACTIONS, \"WaitForDebugee: handle request: \" + request);\n-\n-            if (process == null) {\n-                String reply = \"No debuggee process to wait for\";\n-                logger.complain(reply);\n-                sendReply(new RequestFailed(reply));\n-                return;\n-            }\n-\n-            logger.display(\"Waiting for debuggee to exit\");\n-\/*\n-            \/\/ because timeout is not supported now\n-            \/\/ we do not use separate thread for waiting for process\n-            \/\/ and so following lines are commented out\n-\n-            waitingThread = new ProcessWaitingThread();\n-            logger.trace(TRACE_LEVEL_ACTIONS, \"LaunchingThread: starting thread for waiting for debugee process\");\n-            waitingThread.start();\n-            try {\n-                waitingThread.join(request.timeout);\n-                if (waitingThread.isAlive()) {\n-                    String reply = \"Timeout exceeded while waiting for debuggee to exit\";\n-                    logger.complain(reply);\n-                    waitingThread.interrupt();\n-                    sendReply(socOut, new RequestFailed(reply));\n-                    return;\n-                }\n-            } catch (InterruptedException e) {\n-                e.printStackTrace(log.getOutStream());\n-                logger.complain(\"Caught exception while waiting for debuggee:\\n\\t\" + e);\n-                sendReply(new CaughtException(e));\n-                return;\n-            }\n-            int exitStatus = waitingThread.exitStatus;\n-            waitingThread = null;\n- *\/\n-            int exitStatus;\n-            try {\n-                exitStatus = process.waitFor();\n-                waitForRedirectors(THREAD_TIMEOUT);\n-                process.destroy();\n-            } catch (InterruptedException e) {\n-                e.printStackTrace(log.getOutStream());\n-                logger.complain(\"Caught exception while waiting for debuggee process to exit:\\n\\t\"\n-                                + e);\n-                sendReply(new CaughtException(e));\n-                return;\n-            }\n-            logger.display(\"  debuggee exited with exit status: \" + exitStatus);\n-            sendReply(new OK(exitStatus));\n-        }\n-\n-        \/**\n-         * Execute request for returning debuggee exit code.\n-         *\n-         * @param request request to execute\n-         *\/\n-        private void debugeeExitCode(DebugeeExitCode request) throws IOException {\n-            logger.trace(TRACE_LEVEL_ACTIONS, \"DebugeeExitCode: handle request: \" + request);\n-\n-            if (process == null) {\n-                String reply = \"No debuggee process to get exit code for\";\n-                logger.complain(reply);\n-                sendReply(new RequestFailed(reply));\n-                return;\n-            }\n-\n-            int exitStatus = 0;\n-            try {\n-                exitStatus = process.exitValue();\n-            } catch (IllegalThreadStateException e) {\n-                logger.display(\"# WARNING: Caught exception while getting exit status of debuggee:\\n\\t\"\n-                                + e);\n-                sendReply(new CaughtException(e));\n-                return;\n-            }\n-            logger.trace(TRACE_LEVEL_ACTIONS, \"DebugeeExitCode: return debuggee exit status: \" + exitStatus);\n-            sendReply(new OK(exitStatus));\n-        }\n-\n-        \/**\n-         * Execute request for unconditional terminating debuggee process.\n-         *\n-         * @param request request to execute\n-         *\/\n-        private void killDebugee(KillDebugee request) throws IOException {\n-            logger.trace(TRACE_LEVEL_ACTIONS, \"killDebugee: handle request: \" + request);\n-\n-            if (process == null) {\n-                String reply = \"No debuggee process to kill\";\n-                logger.complain(reply);\n-                sendReply(new RequestFailed(reply));\n-                return;\n-            }\n-\n-            logger.trace(TRACE_LEVEL_ACTIONS, \"killDebugee: killing debuggee process\");\n-            process.destroy();\n-\n-            logger.trace(TRACE_LEVEL_ACTIONS, \"killDebugee: debuggee process killed\");\n-            sendReply(new OK());\n-        }\n-\n-        \/**\n-         * Terminate debigee VM process if still alive.\n-         *\/\n-        private void terminateDebugeeAtExit() {\n-            if (process != null) {\n-                logger.trace(TRACE_LEVEL_ACTIONS, \"Checking that debuggee process has exited correctly\");\n-                try {\n-                    int value = process.exitValue();\n-                } catch (IllegalThreadStateException e) {\n-                    logger.complain(\"Debuggee process has not exited correctly: trying to kill it\");\n-                    process.destroy();\n-                    try {\n-                        int value = process.exitValue();\n-                    } catch (IllegalThreadStateException ie) {\n-                        logger.complain(\"Debuggee process is alive after killing it\");\n-                    }\n-                    process = null;\n-                    return;\n-                }\n-                logger.trace(TRACE_LEVEL_ACTIONS, \"Debuggee process has exited correctly\");\n-            }\n-        }\n-\n-        \/**\n-         * Wait for stream redirecting threads finished\n-         * for specified timeout.\n-         *\n-         * @param millis timeout in milliseconds\n-         *\/\n-        private void waitForRedirectors(long millis) {\n-            try {\n-                if (stdoutRedirectingThread != null) {\n-                    stdoutRedirectingThread.join(millis);\n-                }\n-                if (stderrRedirectingThread != null) {\n-                    stderrRedirectingThread.join(millis);\n-                }\n-            } catch (InterruptedException e) {\n-                e.printStackTrace(log.getOutStream());\n-                logger.complain(\"Caught exception while waiting for debuggee process exited:\\n\\t\"\n-                                + e);\n-            }\n-        }\n-\n-        \/**\n-         * Wait for this thread finished\n-         * for specified timeout or interrupt it.\n-         *\n-         * @param millis timeout in milliseconds\n-         *\/\n-        public void waitForThread(long millis) {\n-            shouldStop = true;\n-            handleRequest(null);\n-            waitInterruptThread(this, millis);\n-        }\n-\n-        \/**\n-         * Close connection with debuggee.\n-         *\/\n-        public void closeConnection() {\n-            \/\/ no connections to close\n-        }\n-\n-        \/**\n-         * Close thread by closing all connections with debuggee,\n-         * finishing all redirectors and wait for thread finished.\n-         *\/\n-        public synchronized void close() {\n-            if (closed) {\n-                return;\n-            }\n-            closeConnection();\n-            terminateDebugeeAtExit();\n-            if (stdoutRedirectingThread != null) {\n-                stdoutRedirectingThread.close();\n-                stdoutRedirectingThread = null;\n-            }\n-            if (stderrRedirectingThread != null) {\n-                stderrRedirectingThread.close();\n-                stderrRedirectingThread = null;\n-            }\n-            waitForThread(THREAD_TIMEOUT);\n-            closed = true;\n-            logger.trace(TRACE_LEVEL_THREADS, \"LaunchingThread closed\");\n-        }\n-\n-        \/**\n-         * An inner thread for waiting for debuggee process exited\n-         * and saving its exit status. (currently not used)\n-         *\/\n-\/*\n-        private class ProcessWaitingThread extends Thread {\n-            int exitStatus = 0;\n-\n-            ProcessWaitingThread() {\n-                super(\"ProcessWaitingThread\");\n-            }\n-\n-            public void run() {\n-                logger.trace(TRACE_LEVEL_THREADS, \"ProcessWaitingThread: starting waiting for process\");\n-                try {\n-                    exitStatus = process.waitFor();\n-                } catch (InterruptedException e) {\n-                    e.printStackTrace(log.getOutStream());\n-                    logger.complain(\"Caught exception while waiting for debuggee process:\\n\\t\"\n-                                    + e);\n-                }\n-                logger.trace(TRACE_LEVEL_ACTIONS, \"ProcessWaitingThread: process finished with status: \" + exitStatus);\n-                logger.trace(TRACE_LEVEL_THREADS, \"ProcessWaitingThread: exiting\");\n-            }\n-\n-            public synchronized void close() {\n-                logger.trace(TRACE_LEVEL_THREADS, \"ProcessWaitingThread closed\");\n-            }\n-\n-        } \/\/ ProcessWaitingThread\n- *\/\n-    } \/\/ LaunchingThread\n-\n-\/\/\/\/\/\/\/\/\/ Redirecting threads \/\/\/\/\/\/\/\/\/\n-\n-    \/**\n-     * An abstract base class for internal threads which redirects stderr\/stdout\n-     * output from debuggee process via <code>BindServer<\/code> connection.\n-     * <p>\n-     * Two derived classes will redirect <i>stderr<\/i> or <\/i>stdout<\/i> stream\n-     * by enwrapping stream line by <code>DebugeeStderr<\/code> or\n-     * <code>DebugeeStderr<\/code> objects. They should implement only one\n-     * abstract method <code>enwrapLine(String)<\/code> to make the difference.\n-     *\/\n-    public static abstract class StreamRedirectingThread extends Thread {\n-        private volatile boolean shouldStop = false;\n-        private volatile boolean closed = false;\n-\n-        private LaunchingThread owner = null;\n-\n-        private BufferedReader bin = null;\n-        private String prefix = null;\n-\n-        \/**\n-         * Make a thread to enwrap and redirect lines from specified\n-         * input stream with given prefix.\n-         *\n-         * @param owner owner of this thread\n-         * @param is input stream to redirect lines from\n-         * @param prefix prefix to add to each line\n-         *\/\n-        public StreamRedirectingThread(LaunchingThread owner, InputStream is, String prefix) {\n-            super(\"StreamRedirectingThread\");\n-            this.prefix = prefix;\n-            this.owner = owner;\n-            bin = new BufferedReader(new InputStreamReader(is));\n-        }\n-\n-        \/**\n-         * Read lines from an input stream, enwrap them, and send to remote\n-         * test via <code>BindServer<\/code> connection.\n-         *\/\n-        public void run() {\n-            logger.trace(TRACE_LEVEL_THREADS, \"StreamRedirectingThread: starting redirect output stream\");\n-            try {\n-                String line;\n-                logger.trace(TRACE_LEVEL_IO, \"StreamRedirectingThread: waiting for line from debuggee output\");\n-                while(!shouldStop) {\n-                    line = bin.readLine();\n-                    if (line == null)\n-                        break;\n-                    owner.sendStreamMessage(enwrapLine(prefix + line));\n-                }\n-            } catch (EOFException e) {\n-                logger.display(\"Debuggee output stream closed by process\");\n-            } catch (IOException e) {\n-                e.printStackTrace(log.getOutStream());\n-                logger.display(\"# WARNING: Connection to debuggee output stream aborted:\\n\\t\" + e);\n-            } catch (Exception e) {\n-                e.printStackTrace(log.getOutStream());\n-                logger.complain(\"Caught exception while redirecting debuggee output stream:\\n\\t\"\n-                                + e);\n-            }\n-            logger.trace(TRACE_LEVEL_THREADS, \"StreamRedirectingThread: exiting\");\n-            closeConnection();\n-        }\n-\n-        \/**\n-         * Envrap output line by the appropriate wrapper.\n-         * @param line line to enwrap\n-         *\/\n-        protected abstract RedirectedStream enwrapLine(String line);\n-\n-        \/**\n-         * Wait for this thread finished or interrupt it.\n-         *\n-         * @param millis timeout in milliseconds\n-         *\/\n-        public void waitForThread(long millis) {\n-            shouldStop = true;\n-            waitInterruptThread(this, millis);\n-        }\n-\n-        \/**\n-         * Close redirected process output stream.\n-         *\/\n-        public void closeConnection() {\n-            if (closed) {\n-                return;\n-            }\n-            if (bin != null) {\n-                try {\n-                    bin.close();\n-                } catch (IOException e) {\n-                    e.printStackTrace(log.getOutStream());\n-                    logger.complain(\"Caught exception while closing debuggee output stream:\\n\\t\"\n-                                    + e);\n-                }\n-                bin = null;\n-            }\n-            closed = true;\n-            logger.trace(TRACE_LEVEL_THREADS, \"StreamRedirectingThread closed\");\n-        }\n-\n-        \/**\n-         * Close thread by waiting redirected stream closed\n-         * and finish the thread.\n-         *\/\n-        public synchronized void close() {\n-            if (closed) {\n-                return;\n-            }\n-            waitForThread(THREAD_TIMEOUT);\n-            closeConnection();\n-            closed = true;\n-            logger.trace(TRACE_LEVEL_THREADS, \"StreamRedirectingThread closed\");\n-        }\n-\n-    } \/\/ StreamRedirectingThread\n-\n-    \/**\n-     * Particalar case of <code>StreamRedirectingThread<\/code> to redirect\n-     * <i>stderr<\/i> stream by enwrapping lines into <code>DebugeeStderr<\/code>\n-     * objects.\n-     *\/\n-    private static class StderrRedirectingThread extends StreamRedirectingThread {\n-\n-        \/**\n-         * Make a thread to redirect <i>stderr<\/i> output stream.\n-         *\/\n-        StderrRedirectingThread(LaunchingThread owner, InputStream is, String prefix) {\n-            super(owner, is, prefix);\n-            setName(\"StderrRedirectingThread\");\n-        }\n-\n-        \/**\n-         * Enwrap given line into <code>DebugeeStderr<\/code> object.\n-         *\/\n-        protected RedirectedStream enwrapLine(String line) {\n-            return new DebugeeStderr(line);\n-        }\n-\n-    }\n-\n-    \/**\n-     * Particalar case of <code>StreamRedirectingThread<\/code> to redirect\n-     * <i>stdout<\/i> stream by enwrapping lines into <code>DebugeeStdout<\/code>\n-     * objects.\n-     *\/\n-    private static class StdoutRedirectingThread extends StreamRedirectingThread {\n-\n-        \/**\n-         * Make a thread to redirect <i>stdout<\/i> output stream.\n-         *\/\n-        StdoutRedirectingThread(LaunchingThread owner, InputStream is, String prefix) {\n-            super(owner, is, prefix);\n-            setName(\"StdoutRedirectingThread\");\n-        }\n-\n-        \/**\n-         * Enwrap given line into <code>DebugeeStdout<\/code> object.\n-         *\/\n-        protected RedirectedStream enwrapLine(String line) {\n-            return new DebugeeStdout(line);\n-        }\n-\n-    }\n-\n-\/\/\/\/\/\/\/\/\/ BinderServer's packets \/\/\/\/\/\/\/\/\/\/\n-\n-    \/**\n-     * Base serializable object to transmit request or reply\n-     * via <code>BindServer<\/code> connection.\n-     *\/\n-    public static class Packet implements Serializable {}\n-\n-    \/\/\/\/\/\/\/\/\/ Binder's requests \/\/\/\/\/\/\/\/\/\/\n-\n-    \/**\n-     * Base class to represent request to <code>BindServer<\/code>.\n-     *\/\n-    public static abstract class Request extends Packet {}\n-\n-    \/**\n-     * This class implements task identification command.\n-     *\/\n-    public static class TaskID extends Request {\n-        public String id;\n-\n-        public TaskID(String id) {\n-            this.id = id;\n-        }\n-\n-        public String toString() {\n-            return \"TaskID: id=\" + id;\n-        }\n-    }\n-\n-    \/**\n-     * This class implements a request for launching a debugee.\n-     *\/\n-    public static class LaunchDebugee extends Request {\n-        public String slash;         \/\/ slash symbol used on debugger host\n-        public String[] cmd;         \/\/ command line arguments as seen on debugger host\n-        public String workDir;       \/\/ path to working directory as seen on debugger host\n-        public String[] classPathes; \/\/ list of class pathes as seen on debugger host\n-\n-        public LaunchDebugee(String[] cmd, String slash, String workDir,\n-                            String[] pathes, String[] classPathes,\n-                            String[] libPathes) {\n-            this.cmd = cmd;\n-            this.slash = slash;\n-            this.workDir = workDir;\n-            this.classPathes = classPathes;\n-        }\n-\n-        public String toString() {\n-            return \"LaunchDebugee:\"\n-                + \"\\n\\tcommand=\" + ArgumentParser.joinArguments(cmd, \"\\\"\")\n-                + \"\\n\\tWORKDIR=\" + workDir\n-                + \"\\n\\tCLASSPATH=\" + ArgumentParser.joinArguments(classPathes, \"\", \":\")\n-                + \"\\n\\tslash=\" + slash;\n-        }\n-    }\n-\n-    \/**\n-     * This class implements a request for waiting for debugee\n-     * termination.\n-     *\/\n-    public static class WaitForDebugee extends Request {\n-        public long timeout = 0; \/\/ timeout in minutes for waiting\n-\n-        public WaitForDebugee(long value) {\n-            timeout = value;\n-        }\n-\n-        public String toString() {\n-            return \"WaitForDebugee: timeout=\" + timeout;\n-        }\n-    }\n-\n-    \/**\n-     * This class implements a request for exit code of\n-     * debugee process.\n-     *\/\n-    public static class DebugeeExitCode extends Request {\n-        public String toString() {\n-            return \"SebugeeExitCode\";\n-        }\n-    }\n-\n-    \/**\n-     * This class implements a request for killing debugee process.\n-     *\/\n-    public static class KillDebugee extends Request {\n-        public String toString() {\n-            return \"KillDebugee\";\n-        }\n-    }\n-\n-    \/**\n-     * This class implements a request to disconnect connection with test.\n-     *\/\n-    public static class Disconnect extends Request {\n-        public String toString() {\n-            return \"Disconnect\";\n-        }\n-    }\n-\n-    \/\/\/\/\/\/\/\/\/ BindServer's responses \/\/\/\/\/\/\/\/\/\/\n-\n-    \/**\n-     * Base class to represent response from <code>BindServer<\/code>.\n-     *\/\n-    public static abstract class Response extends Packet {}\n-\n-    \/**\n-     * This class implements a response that a previoulsy received\n-     * request has been successfully performed.\n-     *\/\n-    public static class OK extends Response {\n-        public long info = BindServer.VERSION; \/\/ optional additional info\n-\n-        public OK() {\n-        }\n-\n-        public OK(long value) {\n-            info = value;\n-        }\n-\n-        public String toString() {\n-            return \"OK(\" + info + \")\";\n-        }\n-    }\n-\n-    \/**\n-     * This class implements a response that the BindServer is\n-     * unable to serve a previoulsy received request.\n-     *\/\n-    public static class RequestFailed extends Response {\n-        public String reason; \/\/ the short explanation of failure\n-\n-        public RequestFailed(String reason) {\n-            this.reason = reason;\n-        }\n-\n-        public String toString() {\n-            return \"RequestFailed(\" + reason + \")\";\n-        }\n-    }\n-\n-    \/**\n-     * This class implements a response that the BindServer is\n-     * unable to serve a previoulsy received request because of\n-     * caught exception.\n-     *\/\n-    public static class CaughtException extends RequestFailed {\n-        public CaughtException(Exception cause) {\n-            super(\"Caught exception: \" + cause);\n-        }\n-    }\n-\n-    \/\/\/\/\/\/\/\/\/ Wrappers for redirected messages \/\/\/\/\/\/\/\/\/\/\n-\n-    \/**\n-     * Base class to represent wrappers for redirected streams.\n-     *\/\n-    public static class RedirectedStream extends Packet {\n-        public String line; \/\/ line containing line from redirected stream\n-\n-        public RedirectedStream(String str) {\n-            line = str;\n-        }\n-\n-        public String toString() {\n-            return \"RedirectedStream(\" + line + \")\";\n-        }\n-    }\n-\n-    \/**\n-     * This class enwraps redirected line of <i>stdout<\/i> stream.\n-     *\/\n-    public static class DebugeeStdout extends RedirectedStream {\n-\n-        public DebugeeStdout(String str) {\n-            super(str);\n-        }\n-\n-        public String toString() {\n-            return \"DebugeeStdout(\" + line + \")\";\n-        }\n-    }\n-\n-    \/**\n-     * This class enwraps redirected line of <i>stderr<\/i> stream.\n-     *\/\n-    public static class DebugeeStderr extends RedirectedStream {\n-        public DebugeeStderr(String str) {\n-            super(str);\n-        }\n-\n-        public String toString() {\n-            return \"DebugeeStderr(\" + line + \")\";\n-        }\n-    }\n-\n-\/\/\/\/\/\/\/ ArgumentHandler for BindServer command line \/\/\/\/\/\/\/\/\/\n-\n-    \/**\n-     * This class is used to parse arguments from command line\n-     * and specified <i>bind-file<\/i>,\n-     *\/\n-    private static class ArgumentHandler extends ArgumentParser {\n-\n-        protected Properties fileOptions;\n-\n-        \/**\n-         * Make parser object for command line arguments.\n-         *\n-         * @param args list of command line arguments\n-         *\/\n-        public ArgumentHandler(String[] args) {\n-            super(args);\n-        }\n-\n-        \/**\n-         * Check if given command line option is aloowed.\n-         *\n-         * @param option option name\n-         * @param value option value\n-         *\/\n-        protected boolean checkOption(String option, String value) {\n-            if (option.equals(\"bind.file\")) {\n-                \/\/ accept any file name\n-                return true;\n-            }\n-            return super.checkOption(option, value);\n-        }\n-\n-        \/**\n-         * Check if all recignized options are compatible.\n-         *\/\n-        protected void checkOptions() {\n-            if (getBindFileName() == null) {\n-                throw new BadOption(\"Option -bind.file is requred \");\n-            }\n-            super.checkOptions();\n-        }\n-\n-        \/**\n-         * Check if value of this option points to a existing directory.\n-         *\n-         * @param option option name\n-         * @param dir option value\n-         *\/\n-        private void checkDir(String option, String dir) {\n-            File file = new File(dir);\n-            if (!file.exists()) {\n-                throw new BadOption(option + \" does not exist: \" + dir);\n-            }\n-            if (!file.isAbsolute()) {\n-                throw new BadOption(option + \" is not absolute pathname: \" + dir);\n-            }\n-            if (!file.isDirectory()) {\n-                throw new BadOption(option + \" is not directory: \" + dir);\n-            }\n-        }\n-\n-        \/**\n-         * Check if option from <i>bind-file<\/i> is allowed.\n-         *\n-         * @param option option name\n-         * @param value option value\n-         *\/\n-        protected boolean checkAdditionalOption(String option, String value) {\n-\n-            if (option.equals(\"DEBUGGER_HOST\")) {\n-                \/\/ accept any hostname\n-                return true;\n-            }\n-\n-            if (option.equals(\"BINDSERVER_PORT\")) {\n-                \/\/ accept only integer value\n-                try {\n-                    int port = Integer.parseInt(value);\n-                } catch (NumberFormatException e) {\n-                    throw new Failure(\"Not integer value of bind-file option \" + option\n-                                        + \": \" + value);\n-                }\n-                return true;\n-            }\n-\n-            if (option.equals(\"DEBUGGER_TESTED_JAVA_HOME\")\n-                    || option.equals(\"DEBUGGER_WORKDIR\")\n-                    || option.equals(\"DEBUGGER_TESTBASE\")) {\n-                if (value == null || value.equals(\"\")) {\n-                    throw new BadOption(\"Empty value of bind-file option \" + option);\n-                }\n-                return true;\n-            }\n-\n-            if (option.equals(\"DEBUGGEE_TESTED_JAVA_HOME\")\n-                    || option.equals(\"DEBUGGEE_WORKDIR\")\n-                    || option.equals(\"DEBUGGEE_TESTBASE\")) {\n-                if (value == null || value.equals(\"\")) {\n-                    throw new BadOption(\"Empty value of bind-file option \" + option);\n-                }\n-                checkDir(option, value);\n-                return true;\n-            }\n-\n-            if (option.equals(\"DEBUGGEE_WINDIR\")) {\n-                if (!(value == null || value.equals(\"\"))) {\n-                    checkDir(option, value);\n-                }\n-                return true;\n-            }\n-\n-            return false;\n-        }\n-\n-        \/**\n-         * Check if all recignized options form <i>bind-file<\/i> are compatible.\n-         *\/\n-        protected void checkAdditionalOptions() {\n-\n-            if (getDebuggerJavaHome() == null) {\n-                throw new BadOption(\"Option DEBUGGER_JAVA_HOME missed from bind-file\");\n-            }\n-            if (getDebuggerWorkDir() == null) {\n-                throw new BadOption(\"Option DEBUGGER_WORKDIR missed from bind-file\");\n-            }\n-            if (getDebuggerTestbase() == null) {\n-                throw new BadOption(\"Option DEBUGGER_TESTBASE missed from bind-file\");\n-            }\n-\n-            if (getDebugeeJavaHome() == null) {\n-                throw new BadOption(\"Option DEBUGGEE_JAVA_HOME missed from bind-file\");\n-            }\n-            if (getDebugeeWorkDir() == null) {\n-                throw new BadOption(\"Option DEBUGGEE_WORKDIR missed from bind-file\");\n-            }\n-            if (getDebugeeTestbase() == null) {\n-                throw new BadOption(\"Option DEBUGGEE_TESTBASE missed from bind-file\");\n-            }\n-        }\n-\n-        \/**\n-         * Parse options form specified <i>bind-file<\/i>.\n-         *\/\n-        protected void parseAdditionalOptions() {\n-            Enumeration keys = fileOptions.keys();\n-            while (keys.hasMoreElements()) {\n-                String option = (String)keys.nextElement();\n-                String value = fileOptions.getProperty(option);\n-                if (! checkAdditionalOption(option, value)) {\n-                    throw new BadOption(\"Unrecognized bind-file option: \" + option);\n-                }\n-            }\n-            checkAdditionalOptions();\n-        }\n-\n-        \/**\n-         * Parse all options from command line and specified <i>bind-file<\/i>.\n-         *\/\n-        protected void parseArguments() {\n-            super.parseArguments();\n-            String fileName = getBindFileName();\n-            try {\n-                FileInputStream bindFile = new FileInputStream(fileName);\n-                fileOptions = new Properties();\n-                fileOptions.load(bindFile);\n-                bindFile.close();\n-            } catch(FileNotFoundException e) {\n-                throw new BadOption(\"Unable to open bind-file \" + fileName + \": \" + e);\n-            } catch(IOException e) {\n-                e.printStackTrace(log.getOutStream());\n-                throw new Failure(\"Caught exception while reading bind-file:\\n\" + e);\n-            }\n-            parseAdditionalOptions();\n-        }\n-\n-        \/** Return name of specified <i>bind-file<i>. *\/\n-        public String getBindFileName() {\n-            return options.getProperty(\"bind.file\");\n-        }\n-\n-        \/** Return specified debuggee host name . *\/\n-        public String getDebuggerHost() {\n-            return fileOptions.getProperty(\"DEBUGGER_HOST\", \"localhost\");\n-        }\n-\n-        \/** Return string representation of port number for <code>BindServer<code> connection. *\/\n-        public String getBindPort() {\n-            return fileOptions.getProperty(\"BINDSERVER_PORT\", \"9000\");\n-        }\n-\n-        \/** Return specified port number for <code>BindServer<code> connection. *\/\n-        public int getBindPortNumber() {\n-            try {\n-                return Integer.parseInt(getBindPort());\n-            } catch (NumberFormatException e) {\n-                throw new Failure(\"Not integer value of BindServer port\");\n-            }\n-        }\n-\n-        \/** Return specified path to tested JDK used for debuggee VM. *\/\n-        public String getDebugeeJavaHome() {\n-            return fileOptions.getProperty(\"DEBUGGEE_TESTED_JAVA_HOME\");\n-        }\n-\n-        \/** Return specified path to tested JDK used for debugger. *\/\n-        public String getDebuggerJavaHome() {\n-            return fileOptions.getProperty(\"DEBUGGER_TESTED_JAVA_HOME\");\n-        }\n-\n-        \/** Return specified path to working dir from debuggee host. *\/\n-        public String getDebugeeWorkDir() {\n-            return fileOptions.getProperty(\"DEBUGGEE_WORKDIR\");\n-        }\n-\n-        \/** Return specified path to working dir from debugger host. *\/\n-        public String getDebuggerWorkDir() {\n-            return fileOptions.getProperty(\"DEBUGGER_WORKDIR\");\n-        }\n-\n-        \/** Return specified path to testbase dir from debuggee host. *\/\n-        public String getDebugeeTestbase() {\n-            return fileOptions.getProperty(\"DEBUGGEE_TESTBASE\");\n-        }\n-\n-        \/** Return specified path to testbase dir from debugger host. *\/\n-        public String getDebuggerTestbase() {\n-            return fileOptions.getProperty(\"DEBUGGER_TESTBASE\");\n-        }\n-\n-        \/** Return specified path to system directory on Wimdows platform. *\/\n-        public String getDebugeeWinDir() {\n-            return fileOptions.getProperty(\"DEBUGGEE_WINDIR\");\n-        }\n-\n-    } \/\/ ArgumentHandler\n-\n-} \/\/ BindServer\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/share\/jpda\/BindServer.java","additions":0,"deletions":1847,"binary":false,"changes":1847,"status":"deleted"},{"patch":"@@ -70,2 +70,0 @@\n- * <li> <code>-bind.port=<\/code>&lt;<i>port<\/i>&gt; -\n- *   port number for BindServer connection\n@@ -424,41 +422,0 @@\n-    private boolean bindPortInited = false;\n-    \/**\n-     * Return string representation of the port number for BindServer connection,\n-     * specified by <code>-bind.port<\/code> command line option, or\n-     * \"<i>DEFAULT_BIND_PORT<\/i>\" string by default.\n-     *\n-     * @see #getBindPortNumber()\n-     * @see #setRawArguments(String[])\n-     *\/\n-    public String getBindPort() {\n-        String port = options.getProperty(\"bind.port\");\n-        if (port == null) {\n-            if (!bindPortInited) {\n-                port = findFreePort();\n-                if (port == null) {\n-                    port = DEFAULT_BIND_PORT;\n-                }\n-                options.setProperty(\"bind.port\", port);\n-                bindPortInited = true;\n-            }\n-        }\n-        return port;\n-    }\n-\n-    \/**\n-     * Return port number for BindServer connection,\n-     * specified by <code>-bind.port<\/code> command line option, or\n-     * \"<i>DEFAULT_BIND_PORT<\/i>\" port number by default.\n-     *\n-     * @see #getBindPort()\n-     * @see #setRawArguments(String[])\n-     *\/\n-    public int getBindPortNumber() {\n-        String value = getBindPort();\n-        try {\n-            return Integer.parseInt(value);\n-        } catch (NumberFormatException e) {\n-            throw new TestBug(\"Not integer value of \\\"bind.port\\\" argument: \" + value);\n-        }\n-    }\n-\n@@ -686,1 +643,0 @@\n-            || option.equals(\"bind.port\")\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/share\/jpda\/DebugeeArgumentHandler.java","additions":0,"deletions":44,"binary":false,"changes":44,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -55,1 +55,0 @@\n- * @see BindServer\n@@ -57,0 +56,1 @@\n+ * @see nsk.share.jdb.Launcher\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/share\/jpda\/DebugeeBinder.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -44,1 +44,1 @@\n- * that the process should be started in (locally, remotely or manually).\n+ * that the process should be started in (locally).\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/share\/jpda\/DebugeeProcess.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,4 +32,1 @@\n- * This channel is based on TCP\/IP sockets and works in all\n- * modes (local, remote and manual). In a remote mode\n- * connection to <code>BindServer<\/code> is used for redirecting IOPipe messages.\n- * In all other modes direct TCP\/IP coonnection between two VMs is used.\n+ * This channel is based on TCP\/IP sockets.\n@@ -37,1 +34,2 @@\n- * @see BindServer\n+ * @see jpda.DebugeeArgumentHandler\n+ * @see jpda.DebugeeProcess\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/share\/jpda\/IOPipe.java","additions":4,"deletions":6,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -595,2 +595,0 @@\n-java\/net\/Socket\/asyncClose\/Race.java                            8317801 aix-ppc64\n-\n@@ -837,0 +835,1 @@\n+java\/awt\/Cursor\/CursorDragTest\/ListDragCursor.java 7177297 macosx-all\n@@ -843,0 +842,2 @@\n+tools\/sincechecker\/modules\/jdk.management.jfr\/JdkManagementJfrCheckSince.java 8354921 generic-all\n+\n","filename":"test\/jdk\/ProblemList.txt","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2020, 2024 SAP SE. All rights reserved.\n+ * Copyright (c) 2020, 2025 SAP SE. All rights reserved.\n@@ -37,36 +37,0 @@\n- * @run driver EATests\n- *                 -XX:+UnlockDiagnosticVMOptions\n- *                 -Xms256m -Xmx256m\n- *                 -Xbootclasspath\/a:.\n- *                 -XX:CompileCommand=dontinline,*::dontinline_*\n- *                 -XX:+WhiteBoxAPI\n- *                 -Xbatch\n- *                 -XX:+DoEscapeAnalysis -XX:+EliminateAllocations -XX:+EliminateLocks -XX:+EliminateNestedLocks\n- *                 -XX:LockingMode=1\n- * @run driver EATests\n- *                 -XX:+UnlockDiagnosticVMOptions\n- *                 -Xms256m -Xmx256m\n- *                 -Xbootclasspath\/a:.\n- *                 -XX:CompileCommand=dontinline,*::dontinline_*\n- *                 -XX:+WhiteBoxAPI\n- *                 -Xbatch\n- *                 -XX:+DoEscapeAnalysis -XX:+EliminateAllocations -XX:-EliminateLocks -XX:+EliminateNestedLocks\n- *                 -XX:LockingMode=1\n- * @run driver EATests\n- *                 -XX:+UnlockDiagnosticVMOptions\n- *                 -Xms256m -Xmx256m\n- *                 -Xbootclasspath\/a:.\n- *                 -XX:CompileCommand=dontinline,*::dontinline_*\n- *                 -XX:+WhiteBoxAPI\n- *                 -Xbatch\n- *                 -XX:+DoEscapeAnalysis -XX:-EliminateAllocations -XX:+EliminateLocks -XX:+EliminateNestedLocks\n- *                 -XX:LockingMode=1\n- * @run driver EATests\n- *                 -XX:+UnlockDiagnosticVMOptions\n- *                 -Xms256m -Xmx256m\n- *                 -Xbootclasspath\/a:.\n- *                 -XX:CompileCommand=dontinline,*::dontinline_*\n- *                 -XX:+WhiteBoxAPI\n- *                 -Xbatch\n- *                 -XX:-DoEscapeAnalysis -XX:-EliminateAllocations -XX:+EliminateLocks -XX:+EliminateNestedLocks\n- *                 -XX:LockingMode=1\n@@ -82,1 +46,0 @@\n- *                 -XX:LockingMode=2\n@@ -91,1 +54,0 @@\n- *                 -XX:LockingMode=2\n@@ -100,1 +62,0 @@\n- *                 -XX:LockingMode=2\n@@ -109,1 +70,0 @@\n- *                 -XX:LockingMode=2\n@@ -127,10 +87,0 @@\n- * @run driver EATests\n- *                 -XX:+UnlockDiagnosticVMOptions\n- *                 -Xms256m -Xmx256m\n- *                 -Xbootclasspath\/a:.\n- *                 -XX:CompileCommand=dontinline,*::dontinline_*\n- *                 -XX:+WhiteBoxAPI\n- *                 -Xbatch\n- *                 -XX:+DoEscapeAnalysis -XX:+EliminateAllocations -XX:+EliminateLocks -XX:+EliminateNestedLocks\n- *                 -XX:LockingMode=1\n- *                 -XX:DiagnoseSyncOnValueBasedClasses=2\n@@ -147,1 +97,0 @@\n- *                 -XX:LockingMode=2\n@@ -150,12 +99,0 @@\n- * @comment Re-lock may race with deflation.\n- * @run driver EATests\n- *                 -XX:+UnlockDiagnosticVMOptions\n- *                 -Xms256m -Xmx256m\n- *                 -Xbootclasspath\/a:.\n- *                 -XX:CompileCommand=dontinline,*::dontinline_*\n- *                 -XX:+WhiteBoxAPI\n- *                 -Xbatch\n- *                 -XX:+DoEscapeAnalysis -XX:+EliminateAllocations -XX:+EliminateLocks -XX:+EliminateNestedLocks\n- *                 -XX:LockingMode=0\n- *                 -XX:GuaranteedAsyncDeflationInterval=1000\n- *\n@@ -163,1 +100,1 @@\n- * @comment Regression test for re-locking racing with deflation with LM_LIGHTWEIGHT.\n+ * @comment Regression test for re-locking racing with deflation with lightweight locking.\n@@ -172,1 +109,0 @@\n- *                 -XX:LockingMode=2\n@@ -1818,2 +1754,2 @@\n- * <code>-XX:LockingMode=2<\/code> the lock stack of the thread will be full\n- * because of this.\n+ * lightweight the lock stack of the thread will be full because of\n+ * this.\n","filename":"test\/jdk\/com\/sun\/jdi\/EATests.java","additions":4,"deletions":68,"binary":false,"changes":72,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,2 +28,0 @@\n- * @library \/java\/awt\/regtesthelpers\n- * @build PassFailJFrame\n@@ -33,0 +31,2 @@\n+import java.awt.BorderLayout;\n+import java.awt.Button;\n@@ -34,0 +34,1 @@\n+import java.awt.EventQueue;\n@@ -38,0 +39,2 @@\n+import java.util.concurrent.CountDownLatch;\n+import java.util.concurrent.TimeUnit;\n@@ -40,2 +43,1 @@\n-    public static void main(String[] args) throws Exception {\n-        String INSTRUCTIONS = \"\"\"\n+    private static final String INSTRUCTIONS = \"\"\"\n@@ -47,4 +49,10 @@\n-                If the mouse cursor starts as a Text Line Cursor and changes\n-                to a regular Pointer Cursor, then Hand Cursor when hovering\n-                the list, pass the test. This test fails if the cursor does\n-                not update at all when pointing over the different components.\n+                The mouse cursor should appear as an I-beam cursor\n+                and should stay the same while dragging across the\n+                components. Once you reach the list, release the\n+                left mouse button. As soon as you release the left\n+                mouse button, the cursor should change to a Hand\n+                cursor. If true, this test passes.\n+\n+                The test fails if the cursor updates while dragging\n+                over the components before releasing the left\n+                mouse button.\n@@ -53,8 +61,18 @@\n-        PassFailJFrame.builder()\n-                .title(\"Test Instructions\")\n-                .instructions(INSTRUCTIONS)\n-                .rows((int) INSTRUCTIONS.lines().count() + 2)\n-                .columns(35)\n-                .testUI(ListDragCursor::createUI)\n-                .build()\n-                .awaitAndCheck();\n+    private static Frame testFrame;\n+    private static Frame instructionsFrame;\n+\n+    private static final CountDownLatch countDownLatch = new CountDownLatch(1);\n+\n+    public static void main(String[] args) throws Exception {\n+        try {\n+            EventQueue.invokeAndWait(() -> {\n+                instructionsFrame = createInstructionsFrame();\n+                testFrame = createTestFrame();\n+            });\n+            if (!countDownLatch.await(5, TimeUnit.MINUTES)) {\n+                throw new RuntimeException(\"Test timeout : No action was\"\n+                        + \" taken on the test.\");\n+            }\n+        } finally {\n+            EventQueue.invokeAndWait(ListDragCursor::disposeFrames);\n+        }\n@@ -63,1 +81,1 @@\n-    public static Frame createUI() {\n+    static Frame createTestFrame() {\n@@ -81,1 +99,36 @@\n-        frame.setBounds(300, 100, 300, 150);\n+        frame.setSize(300, 150);\n+        frame.setLocation(instructionsFrame.getX()\n+                + instructionsFrame.getWidth(),\n+                instructionsFrame.getY());\n+        frame.setVisible(true);\n+        return frame;\n+    }\n+\n+    static Frame createInstructionsFrame() {\n+        Frame frame = new Frame(\"Test Instructions\");\n+        Panel mainPanel = new Panel(new BorderLayout());\n+        TextArea textArea = new TextArea(INSTRUCTIONS,\n+                15, 35, TextArea.SCROLLBARS_NONE);\n+\n+        Panel btnPanel = new Panel();\n+        Button passBtn = new Button(\"Pass\");\n+        Button failBtn = new Button(\"Fail\");\n+        btnPanel.add(passBtn);\n+        btnPanel.add(failBtn);\n+\n+        passBtn.addActionListener(e -> {\n+            countDownLatch.countDown();\n+            System.out.println(\"Test passed.\");\n+        });\n+        failBtn.addActionListener(e -> {\n+            countDownLatch.countDown();\n+            throw new RuntimeException(\"Test Failed.\");\n+        });\n+\n+        mainPanel.add(textArea, BorderLayout.CENTER);\n+        mainPanel.add(btnPanel, BorderLayout.SOUTH);\n+\n+        frame.add(mainPanel);\n+        frame.pack();\n+        frame.setLocationRelativeTo(null);\n+        frame.setVisible(true);\n@@ -84,0 +137,9 @@\n+\n+    static void disposeFrames() {\n+        if (testFrame != null) {\n+            testFrame.dispose();\n+        }\n+        if (instructionsFrame != null) {\n+            instructionsFrame.dispose();\n+        }\n+    }\n","filename":"test\/jdk\/java\/awt\/Cursor\/CursorDragTest\/ListDragCursor.java","additions":81,"deletions":19,"binary":false,"changes":100,"status":"modified"},{"patch":"@@ -0,0 +1,65 @@\n+\/*\n+ * Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.awt.GraphicsDevice;\n+import java.awt.GraphicsEnvironment;\n+import java.awt.Window;\n+\n+\/**\n+ * @test\n+ * @key headful\n+ * @bug 8359266\n+ * @summary Tests for a race condition when setting a full-screen window\n+ *\/\n+public final class FullScreenWindowRace {\n+\n+    public static void main(String[] args) throws InterruptedException {\n+        Window window = new Window(null);\n+        GraphicsDevice gd = GraphicsEnvironment.getLocalGraphicsEnvironment()\n+                                               .getDefaultScreenDevice();\n+\n+        Thread thread = new Thread(() -> {\n+            while (gd.getFullScreenWindow() == null) {\n+                \/\/ Busy wait - can be optimized away without volatile\n+            }\n+        });\n+\n+        thread.setDaemon(true);\n+        thread.start();\n+\n+        \/\/ Give thread some time to start and begin the loop\n+        Thread.sleep(2000);\n+\n+        gd.setFullScreenWindow(window);\n+\n+        thread.join(15000);\n+\n+        boolean alive = thread.isAlive();\n+\n+        gd.setFullScreenWindow(null);\n+        window.dispose();\n+        if (alive) {\n+            throw new RuntimeException(\"Full screen window is NOT detected!\");\n+        }\n+    }\n+}\n","filename":"test\/jdk\/java\/awt\/GraphicsDevice\/FullScreenWindowRace.java","additions":65,"deletions":0,"binary":false,"changes":65,"status":"added"},{"patch":"@@ -0,0 +1,49 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.awt.HeadlessException;\n+\n+\/*\n+ * @test 8358526\n+ * @summary Verify behaviour of no-args HeadlessException and getMessage\n+ * @run main\/othervm -Djava.awt.headless=true HeadlessExceptionTest\n+ * @run main\/othervm HeadlessExceptionTest\n+ *\/\n+\n+public class HeadlessExceptionTest {\n+\n+    public static void main (String[] args) {\n+        String nullmsg = new HeadlessException().getMessage();\n+        String emptymsg = new HeadlessException(\"\").getMessage();\n+        System.out.println(\"nullmsg=\" + nullmsg);\n+        System.out.println(\"emptymsg=\" + emptymsg);\n+        if (nullmsg != null) {\n+            if (\"\".equals(nullmsg)) {\n+                throw new RuntimeException(\"empty message instead of null\");\n+            }\n+            if (!nullmsg.equals(emptymsg)) {\n+                throw new RuntimeException(\"non-null messages differ\");\n+            }\n+        }\n+    }\n+}\n","filename":"test\/jdk\/java\/awt\/Headless\/HeadlessExceptionTest.java","additions":49,"deletions":0,"binary":false,"changes":49,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2023, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -123,1 +123,1 @@\n-        frame.setLocation(500,500);\n+        frame.setLocationRelativeTo(null);\n","filename":"test\/jdk\/java\/awt\/MenuItem\/SetLabelTest.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -3,1 +3,1 @@\n-# Copyright (c) 2015, 2020, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2015, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -52,1 +52,1 @@\n-    -cp \"${CP}\" -Xcheck:jni JNICheck | grep -v SIG | grep -v Signal | grep -v Handler | grep -v jsig | grep -v CallStatic > \"${CP}\"\/log.txt\n+    -cp \"${CP}\" -Xcheck:jni JNICheck | grep -v SIG | grep -v Signal | grep -v Handler | grep -v jsig > \"${CP}\"\/log.txt\n","filename":"test\/jdk\/java\/awt\/font\/JNICheck\/JNICheck.sh","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -30,0 +30,2 @@\n+ * @library \/test\/lib\n+ * @build jtreg.SkippedException\n@@ -36,0 +38,1 @@\n+import java.util.List;\n@@ -48,0 +51,2 @@\n+import jtreg.SkippedException;\n+\n@@ -51,3 +56,5 @@\n-    private static final String FONT_WINDOWS = \"Myanmar Text\";\n-    private static final String FONT_LINUX = \"Padauk\";\n-    private static final String FONT_MACOS = \"Myanmar MN\";\n+    private static final List<String> FONT_CANDIDATES =\n+            List.of(\"Myanmar MN\",\n+                    \"Padauk\",\n+                    \"Myanmar Text\",\n+                    \"Noto Sans Myanmar\");\n@@ -64,6 +71,2 @@\n-            System.err.println(\"Unsupported OS: exiting\");\n-            return;\n-        }\n-        if (!fontExists()) {\n-            System.err.println(\"Required font is not installed: \" + FONT_NAME);\n-            return;\n+            throw new SkippedException(\"No suitable font found out of the list: \"\n+                    + String.join(\", \", FONT_CANDIDATES));\n@@ -133,10 +136,6 @@\n-        String osName = System.getProperty(\"os.name\").toLowerCase();\n-        if (osName.contains(\"windows\")) {\n-            return FONT_WINDOWS;\n-        } else if (osName.contains(\"linux\")) {\n-            return FONT_LINUX;\n-        } else if (osName.contains(\"mac\")) {\n-            return FONT_MACOS;\n-        } else {\n-            return null;\n-        }\n+        return Arrays.stream(GraphicsEnvironment\n+                             .getLocalGraphicsEnvironment()\n+                             .getAvailableFontFamilyNames())\n+                     .filter(FONT_CANDIDATES::contains)\n+                     .findFirst()\n+                     .orElse(null);\n@@ -145,6 +144,0 @@\n-    private static boolean fontExists() {\n-        String[] fontFamilyNames = GraphicsEnvironment\n-                                   .getLocalGraphicsEnvironment()\n-                                   .getAvailableFontFamilyNames();\n-        return Arrays.asList(fontFamilyNames).contains(FONT_NAME);\n-    }\n","filename":"test\/jdk\/java\/awt\/font\/TextLayout\/MyanmarTextTest.java","additions":19,"deletions":26,"binary":false,"changes":45,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,1 +29,3 @@\n- * @run main\/manual=yesno DialogType\n+ * @library \/java\/awt\/regtesthelpers \/test\/lib\n+ * @build PassFailJFrame\n+ * @run main\/manual DialogType\n@@ -32,3 +34,8 @@\n-import java.awt.print.*;\n-import javax.print.attribute.*;\n-import javax.print.attribute.standard.*;\n+import java.awt.print.PrinterJob;\n+\n+import javax.print.attribute.Attribute;\n+import javax.print.attribute.HashPrintRequestAttributeSet;\n+import javax.print.attribute.PrintRequestAttributeSet;\n+import javax.print.attribute.standard.DialogTypeSelection;\n+\n+import jtreg.SkippedException;\n@@ -37,0 +44,9 @@\n+    private static PrinterJob job;\n+\n+    private static final String INSTRUCTIONS = \"\"\"\n+        Two print dialogs are shown in succession.\n+        Click Cancel in the dialogs to close them.\n+\n+        On macOS & on Windows, the first dialog is a native\n+        dialog provided by the OS, the second dialog is\n+        implemented in Swing, the dialogs differ in appearance.\n@@ -38,10 +54,2 @@\n-  static String[] instructions = {\n-     \"This test assumes and requires that you have a printer installed\",\n-     \"It verifies that the dialogs behave properly when using new API\",\n-     \"to optionally select a native dialog where one is present.\",\n-     \"Two dialogs are shown in succession.\",\n-     \"The test passes as long as no exceptions are thrown, *AND*\",\n-     \"if running on Windows only, the first dialog is a native windows\",\n-     \"control which differs in appearance from the second dialog\",\n-     \"\"\n-  };\n+        The test passes as long as no exceptions are thrown.\n+        (If there's an exception, the test will fail automatically.)\n@@ -49,1 +57,3 @@\n-  public static void main(String[] args) {\n+        The test verifies that the dialogs behave properly when using new API\n+        to optionally select a native dialog where one is present.\n+    \"\"\";\n@@ -51,3 +61,12 @@\n-      for (int i=0;i<instructions.length;i++) {\n-         System.out.println(instructions[i]);\n-      }\n+    public static void main(String[] args) throws Exception {\n+        job = PrinterJob.getPrinterJob();\n+        if (job.getPrintService() == null) {\n+            throw new SkippedException(\"Test skipped, printer is unavailable\");\n+        }\n+        PassFailJFrame passFailJFrame = PassFailJFrame.builder()\n+            .instructions(INSTRUCTIONS)\n+            .columns(40)\n+            .build();\n+        testDialogType();\n+        passFailJFrame.awaitAndCheck();\n+    }\n@@ -55,4 +74,4 @@\n-      PrinterJob job = PrinterJob.getPrinterJob();\n-      if (job.getPrintService() == null) {\n-         return;\n-      }\n+    private static void testDialogType() {\n+        setPrintDialogAttributes(DialogTypeSelection.NATIVE);\n+        setPrintDialogAttributes(DialogTypeSelection.COMMON);\n+    }\n@@ -60,14 +79,9 @@\n-      PrintRequestAttributeSet aset = new HashPrintRequestAttributeSet();\n-      aset.add(DialogTypeSelection.NATIVE);\n-      job.printDialog(aset);\n-      Attribute[] attrs = aset.toArray();\n-      for (int i=0;i<attrs.length;i++) {\n-          System.out.println(attrs[i]);\n-      }\n-      aset.add(DialogTypeSelection.COMMON);\n-      job.printDialog(aset);\n-      attrs = aset.toArray();\n-      for (int i=0;i<attrs.length;i++) {\n-          System.out.println(attrs[i]);\n-      }\n-   }\n+    private static void setPrintDialogAttributes(DialogTypeSelection selection) {\n+        PrintRequestAttributeSet aset = new HashPrintRequestAttributeSet();\n+        aset.add(selection);\n+        job.printDialog(aset);\n+        Attribute[] attrs = aset.toArray();\n+        for (int i = 0; i < attrs.length; i++) {\n+            System.out.println(attrs[i]);\n+        }\n+    }\n","filename":"test\/jdk\/java\/awt\/print\/Dialog\/DialogType.java","additions":51,"deletions":37,"binary":false,"changes":88,"status":"modified"},{"patch":"@@ -179,1 +179,1 @@\n-        \/\/ Verify inequalities us <= fs <= ts (JDK-8349092)\n+        \/\/ Verify inequalities us <= ts and fs <= ts (JDK-8349092)\n@@ -182,2 +182,2 @@\n-        if (us > fs)\n-            throw new RuntimeException(f + \" usable space \" + us + \" > free space \" + fs);\n+        if (us > ts)\n+            throw new RuntimeException(f + \" usable space \" + us + \" > total space \" + ts);\n@@ -272,9 +272,3 @@\n-        \/\/ usable space <= free space\n-        if (us > s.free()) {\n-            \/\/ free and usable change dynamically\n-            System.err.println(\"Warning: us > s.free()\");\n-            if (1.0 - Math.abs((double)s.free()\/(double)us) > 0.01) {\n-                fail(s.name() + \" usable vs. free space\", us, \">\", s.free());\n-            } else {\n-                pass();\n-            }\n+        \/\/ usable space <= total space\n+        if (us > s.total()) {\n+            fail(s.name() + \" usable vs. total space\", us, \">\", s.total());\n","filename":"test\/jdk\/java\/io\/File\/GetXSpace.java","additions":6,"deletions":12,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -699,1 +699,1 @@\n-            if (!Platform.isBusybox(\"\/bin\/true\")) {\n+            if (!Files.isSymbolicLink(Paths.get(\"\/bin\/true\"))) {\n@@ -714,1 +714,1 @@\n-            if (!Platform.isBusybox(\"\/bin\/false\")) {\n+            if (!Files.isSymbolicLink(Paths.get(\"\/bin\/false\"))) {\n","filename":"test\/jdk\/java\/lang\/ProcessBuilder\/Basic.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -298,4 +298,6 @@\n-                    } else if (Platform.isBusybox(\"\/bin\/sleep\")) {\n-                        \/\/ With busybox sleep is just a sym link to busybox.\n-                        \/\/ The busbox executable is seen as ProcessHandle.Info command.\n-                        expected = \"busybox\";\n+                    } else if (Files.isSymbolicLink(Paths.get(\"\/bin\/sleep\"))) {\n+                        \/\/ Busybox sleep is a symbolic link to \/bin\/busybox.\n+                        \/\/ Rust coreutils sleep is a symbolic link to coreutils\n+                        \/\/ The busbox\/coreutils executables are seen as ProcessHandle.Info command.\n+                        Path executable = Files.readSymbolicLink(Paths.get(\"\/bin\/sleep\"));\n+                        expected = executable.getFileName().toString();\n","filename":"test\/jdk\/java\/lang\/ProcessHandle\/InfoTest.java","additions":7,"deletions":5,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -3,0 +3,1 @@\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,1 +32,1 @@\n- * @bug 8132374\n+ * @bug 8132374 8359830\n@@ -35,0 +36,1 @@\n+ * @build jtreg.SkippedException\n@@ -40,1 +42,1 @@\n-    public static void main(String args[]) throws Throwable {\n+    public static void main(String[] args) throws Throwable {\n@@ -43,1 +45,1 @@\n-            throw new Error(\"Cant query 'os.version' property!\");\n+            throw new Error(\"Missing value for os.version system property\");\n@@ -47,0 +49,1 @@\n+            output.shouldHaveExitValue(0);\n@@ -50,14 +53,3 @@\n-        }\n-        else if (Platform.isOSX()) {\n-            OutputAnalyzer output = ProcessTools.executeProcess(\"sw_vers\", \"-productVersion\");\n-            String swVersOutput = output.getOutput().trim();\n-            if (!osVersion.equals(swVersOutput)) {\n-                \/\/ This section can be removed if minimum build SDK is xcode 12+\n-                if (swVersOutput.startsWith(osVersion)) {\n-                    throw new SkippedException(\"MacOS version only matches in parts, this is expected when \" +\n-                                               \"JDK was built with Xcode < 12 and MacOS version patch is > 0\");\n-                }\n-                throw new Error(osVersion + \" != \" + swVersOutput);\n-            }\n-        }\n-        else if (Platform.isAix()) {\n+        } else if (Platform.isOSX()) {\n+            testMacOS(osVersion);\n+        } else if (Platform.isAix()) {\n@@ -65,0 +57,1 @@\n+            output1.shouldHaveExitValue(0);\n@@ -66,0 +59,1 @@\n+            output2.shouldHaveExitValue(0);\n@@ -70,2 +64,1 @@\n-        }\n-        else if (Platform.isWindows()) {\n+        } else if (Platform.isWindows()) {\n@@ -73,0 +66,1 @@\n+            output.shouldHaveExitValue(0);\n@@ -77,3 +71,2 @@\n-        }\n-        else {\n-            System.out.println(\"This test is currently not supported on \" +\n+        } else {\n+            throw new jtreg.SkippedException(\"This test is currently not supported on \" +\n@@ -83,0 +76,17 @@\n+\n+    private static void testMacOS(final String sysPropOsVersion) throws Exception {\n+        final ProcessBuilder pb = new ProcessBuilder(\"sw_vers\", \"-productVersion\");\n+        \/\/ if the test was launched with SYSTEM_VERSION_COMPAT environment variable set,\n+        \/\/ then propagate that to the sw_vers too\n+        final String versionCompat = System.getenv().get(\"SYSTEM_VERSION_COMPAT\");\n+        if (versionCompat != null) {\n+            pb.environment().put(\"SYSTEM_VERSION_COMPAT\", versionCompat);\n+        }\n+        final OutputAnalyzer output = ProcessTools.executeCommand(pb);\n+        output.shouldHaveExitValue(0);\n+        final String swVersOutput = output.getOutput().trim();\n+        if (!sysPropOsVersion.equals(swVersOutput)) {\n+            throw new Error(\"sw_vers reports macOS version: \" + swVersOutput\n+                    + \" but os.version system property reports version: \" + sysPropOsVersion);\n+        }\n+    }\n","filename":"test\/jdk\/java\/lang\/System\/OsVersionTest.java","additions":32,"deletions":22,"binary":false,"changes":54,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,24 +34,0 @@\n-\/**\n- * @test id=LM_LIGHTWEIGHT\n- * @requires vm.continuations\n- * @modules java.base\/java.lang:+open\n- * @library \/test\/lib\n- * @run junit\/othervm -XX:LockingMode=2 CarrierThreadInfo\n- *\/\n-\n-\/**\n- * @test id=LM_LEGACY\n- * @requires vm.continuations\n- * @modules java.base\/java.lang:+open\n- * @library \/test\/lib\n- * @run junit\/othervm -XX:LockingMode=1 CarrierThreadInfo\n- *\/\n-\n-\/**\n- * @test id=LM_MONITOR\n- * @requires vm.continuations\n- * @modules java.base\/java.lang:+open\n- * @library \/test\/lib\n- * @run junit\/othervm -XX:LockingMode=0 CarrierThreadInfo\n- *\/\n-\n","filename":"test\/jdk\/java\/lang\/Thread\/virtual\/CarrierThreadInfo.java","additions":1,"deletions":25,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -1,39 +0,0 @@\n-\/*\n- * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-\n-import java.lang.management.ManagementFactory;\n-import com.sun.management.HotSpotDiagnosticMXBean;\n-\n-class LockingMode {\n-    private LockingMode() { }\n-\n-    \/**\n-     * Returns true if using legacy locking mode.\n-     *\/\n-    static boolean isLegacy() {\n-        return ManagementFactory.getPlatformMXBean(HotSpotDiagnosticMXBean.class)\n-                .getVMOption(\"LockingMode\")\n-                .getValue()\n-                .equals(\"1\");\n-    }\n-}\n\\ No newline at end of file\n","filename":"test\/jdk\/java\/lang\/Thread\/virtual\/LockingMode.java","additions":0,"deletions":39,"binary":false,"changes":39,"status":"deleted"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2024, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,1 +28,1 @@\n- * @requires vm.continuations & vm.opt.LockingMode != 1\n+ * @requires vm.continuations\n@@ -36,1 +36,1 @@\n- * @requires vm.continuations & vm.opt.LockingMode != 1\n+ * @requires vm.continuations\n@@ -44,1 +44,1 @@\n- * @requires vm.continuations & vm.opt.LockingMode != 1\n+ * @requires vm.continuations\n@@ -52,1 +52,1 @@\n- * @requires vm.continuations & vm.opt.LockingMode != 1\n+ * @requires vm.continuations\n@@ -61,1 +61,1 @@\n- * @requires vm.continuations & vm.opt.LockingMode != 1\n+ * @requires vm.continuations\n@@ -68,1 +68,1 @@\n- * @requires vm.debug == true & vm.continuations & vm.opt.LockingMode != 1\n+ * @requires vm.debug == true & vm.continuations\n","filename":"test\/jdk\/java\/lang\/Thread\/virtual\/MiscMonitorTests.java","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -29,1 +29,0 @@\n- * @build LockingMode\n@@ -34,1 +33,1 @@\n- * @test id=LM_LEGACY\n+ * @test id=Xint\n@@ -37,2 +36,1 @@\n- * @build LockingMode\n- * @run junit\/othervm\/native -XX:LockingMode=1 --enable-native-access=ALL-UNNAMED MonitorEnterExit\n+ * @run junit\/othervm\/native -Xint --enable-native-access=ALL-UNNAMED MonitorEnterExit\n@@ -42,1 +40,1 @@\n- * @test id=LM_LIGHTWEIGHT\n+ * @test id=Xcomp\n@@ -45,2 +43,1 @@\n- * @build LockingMode\n- * @run junit\/othervm\/native -XX:LockingMode=2 --enable-native-access=ALL-UNNAMED MonitorEnterExit\n+ * @run junit\/othervm\/native -Xcomp --enable-native-access=ALL-UNNAMED MonitorEnterExit\n@@ -50,1 +47,1 @@\n- * @test id=Xint-LM_LEGACY\n+ * @test id=Xcomp-TieredStopAtLevel1\n@@ -53,2 +50,1 @@\n- * @build LockingMode\n- * @run junit\/othervm\/native -Xint -XX:LockingMode=1 --enable-native-access=ALL-UNNAMED MonitorEnterExit\n+ * @run junit\/othervm\/native -Xcomp -XX:TieredStopAtLevel=1 --enable-native-access=ALL-UNNAMED MonitorEnterExit\n@@ -58,1 +54,1 @@\n- * @test id=Xint-LM_LIGHTWEIGHT\n+ * @test id=Xcomp-noTieredCompilation\n@@ -61,50 +57,1 @@\n- * @build LockingMode\n- * @run junit\/othervm\/native -Xint -XX:LockingMode=2 --enable-native-access=ALL-UNNAMED MonitorEnterExit\n- *\/\n-\n-\/*\n- * @test id=Xcomp-LM_LEGACY\n- * @modules java.base\/java.lang:+open jdk.management\n- * @library \/test\/lib\n- * @build LockingMode\n- * @run junit\/othervm\/native -Xcomp -XX:LockingMode=1 --enable-native-access=ALL-UNNAMED MonitorEnterExit\n- *\/\n-\n-\/*\n- * @test id=Xcomp-LM_LIGHTWEIGHT\n- * @modules java.base\/java.lang:+open jdk.management\n- * @library \/test\/lib\n- * @build LockingMode\n- * @run junit\/othervm\/native -Xcomp -XX:LockingMode=2 --enable-native-access=ALL-UNNAMED MonitorEnterExit\n- *\/\n-\n-\/*\n- * @test id=Xcomp-TieredStopAtLevel1-LM_LEGACY\n- * @modules java.base\/java.lang:+open jdk.management\n- * @library \/test\/lib\n- * @build LockingMode\n- * @run junit\/othervm\/native -Xcomp -XX:TieredStopAtLevel=1 -XX:LockingMode=1 --enable-native-access=ALL-UNNAMED MonitorEnterExit\n- *\/\n-\n-\/*\n- * @test id=Xcomp-TieredStopAtLevel1-LM_LIGHTWEIGHT\n- * @modules java.base\/java.lang:+open jdk.management\n- * @library \/test\/lib\n- * @build LockingMode\n- * @run junit\/othervm\/native -Xcomp -XX:TieredStopAtLevel=1 -XX:LockingMode=2 --enable-native-access=ALL-UNNAMED MonitorEnterExit\n- *\/\n-\n-\/*\n- * @test id=Xcomp-noTieredCompilation-LM_LEGACY\n- * @modules java.base\/java.lang:+open jdk.management\n- * @library \/test\/lib\n- * @build LockingMode\n- * @run junit\/othervm\/native -Xcomp -XX:-TieredCompilation -XX:LockingMode=1 --enable-native-access=ALL-UNNAMED MonitorEnterExit\n- *\/\n-\n-\/*\n- * @test id=Xcomp-noTieredCompilation-LM_LIGHTWEIGHT\n- * @modules java.base\/java.lang:+open jdk.management\n- * @library \/test\/lib\n- * @build LockingMode\n- * @run junit\/othervm\/native -Xcomp -XX:-TieredCompilation -XX:LockingMode=2 --enable-native-access=ALL-UNNAMED MonitorEnterExit\n+ * @run junit\/othervm\/native -Xcomp -XX:-TieredCompilation --enable-native-access=ALL-UNNAMED MonitorEnterExit\n@@ -132,1 +79,0 @@\n-import org.junit.jupiter.api.condition.DisabledIf;\n@@ -237,1 +183,0 @@\n-    @DisabledIf(\"LockingMode#isLegacy\")\n@@ -362,1 +307,0 @@\n-    @DisabledIf(\"LockingMode#isLegacy\")\n@@ -406,1 +350,0 @@\n-    @DisabledIf(\"LockingMode#isLegacy\")\n","filename":"test\/jdk\/java\/lang\/Thread\/virtual\/MonitorEnterExit.java","additions":8,"deletions":65,"binary":false,"changes":73,"status":"modified"},{"patch":"@@ -29,1 +29,0 @@\n- * @build LockingMode\n@@ -34,1 +33,1 @@\n- * @test id=LM_LEGACY\n+ * @test id=Xint\n@@ -37,2 +36,1 @@\n- * @build LockingMode\n- * @run junit\/othervm\/native -XX:LockingMode=1 --enable-native-access=ALL-UNNAMED MonitorWaitNotify\n+ * @run junit\/othervm\/native -Xint --enable-native-access=ALL-UNNAMED MonitorWaitNotify\n@@ -42,1 +40,1 @@\n- * @test id=LM_LIGHTWEIGHT\n+ * @test id=Xcomp\n@@ -45,2 +43,1 @@\n- * @build LockingMode\n- * @run junit\/othervm\/native -XX:LockingMode=2 --enable-native-access=ALL-UNNAMED MonitorWaitNotify\n+ * @run junit\/othervm\/native -Xcomp --enable-native-access=ALL-UNNAMED MonitorWaitNotify\n@@ -50,1 +47,1 @@\n- * @test id=Xint-LM_LEGACY\n+ * @test id=Xcomp-TieredStopAtLevel1\n@@ -53,2 +50,1 @@\n- * @build LockingMode\n- * @run junit\/othervm\/native -Xint -XX:LockingMode=1 --enable-native-access=ALL-UNNAMED MonitorWaitNotify\n+ * @run junit\/othervm\/native -Xcomp -XX:TieredStopAtLevel=1 --enable-native-access=ALL-UNNAMED MonitorWaitNotify\n@@ -58,1 +54,1 @@\n- * @test id=Xint-LM_LIGHTWEIGHT\n+ * @test id=Xcomp-noTieredCompilation\n@@ -61,50 +57,1 @@\n- * @build LockingMode\n- * @run junit\/othervm\/native -Xint -XX:LockingMode=2 --enable-native-access=ALL-UNNAMED MonitorWaitNotify\n- *\/\n-\n-\/*\n- * @test id=Xcomp-LM_LEGACY\n- * @modules java.base\/java.lang:+open jdk.management\n- * @library \/test\/lib\n- * @build LockingMode\n- * @run junit\/othervm\/native -Xcomp -XX:LockingMode=1 --enable-native-access=ALL-UNNAMED MonitorWaitNotify\n- *\/\n-\n-\/*\n- * @test id=Xcomp-LM_LIGHTWEIGHT\n- * @modules java.base\/java.lang:+open jdk.management\n- * @library \/test\/lib\n- * @build LockingMode\n- * @run junit\/othervm\/native -Xcomp -XX:LockingMode=2 --enable-native-access=ALL-UNNAMED MonitorWaitNotify\n- *\/\n-\n-\/*\n- * @test id=Xcomp-TieredStopAtLevel1-LM_LEGACY\n- * @modules java.base\/java.lang:+open jdk.management\n- * @library \/test\/lib\n- * @build LockingMode\n- * @run junit\/othervm\/native -Xcomp -XX:TieredStopAtLevel=1 -XX:LockingMode=1 --enable-native-access=ALL-UNNAMED MonitorWaitNotify\n- *\/\n-\n-\/*\n- * @test id=Xcomp-TieredStopAtLevel1-LM_LIGHTWEIGHT\n- * @modules java.base\/java.lang:+open jdk.management\n- * @library \/test\/lib\n- * @build LockingMode\n- * @run junit\/othervm\/native -Xcomp -XX:TieredStopAtLevel=1 -XX:LockingMode=2 --enable-native-access=ALL-UNNAMED MonitorWaitNotify\n- *\/\n-\n-\/*\n- * @test id=Xcomp-noTieredCompilation-LM_LEGACY\n- * @modules java.base\/java.lang:+open jdk.management\n- * @library \/test\/lib\n- * @build LockingMode\n- * @run junit\/othervm\/native -Xcomp -XX:-TieredCompilation -XX:LockingMode=1 --enable-native-access=ALL-UNNAMED MonitorWaitNotify\n- *\/\n-\n-\/*\n- * @test id=Xcomp-noTieredCompilation-LM_LIGHTWEIGHT\n- * @modules java.base\/java.lang:+open jdk.management\n- * @library \/test\/lib\n- * @build LockingMode\n- * @run junit\/othervm\/native -Xcomp -XX:-TieredCompilation -XX:LockingMode=2 --enable-native-access=ALL-UNNAMED MonitorWaitNotify\n+ * @run junit\/othervm\/native -Xcomp -XX:-TieredCompilation --enable-native-access=ALL-UNNAMED MonitorWaitNotify\n@@ -134,1 +81,0 @@\n-import org.junit.jupiter.api.condition.DisabledIf;\n@@ -309,1 +255,0 @@\n-    @DisabledIf(\"LockingMode#isLegacy\")\n@@ -367,1 +312,0 @@\n-    @DisabledIf(\"LockingMode#isLegacy\")\n@@ -705,1 +649,0 @@\n-    @DisabledIf(\"LockingMode#isLegacy\")\n@@ -762,1 +705,0 @@\n-    @DisabledIf(\"LockingMode#isLegacy\")\n","filename":"test\/jdk\/java\/lang\/Thread\/virtual\/MonitorWaitNotify.java","additions":8,"deletions":66,"binary":false,"changes":74,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,1 +29,0 @@\n- * @build LockingMode\n@@ -37,1 +36,0 @@\n- * @build LockingMode\n@@ -45,1 +43,0 @@\n- * @build LockingMode\n@@ -53,1 +50,0 @@\n- * @build LockingMode\n@@ -69,1 +65,0 @@\n-import org.junit.jupiter.api.condition.DisabledIf;\n@@ -388,1 +383,0 @@\n-    @DisabledIf(\"LockingMode#isLegacy\")\n@@ -438,1 +432,0 @@\n-    @DisabledIf(\"LockingMode#isLegacy\")\n","filename":"test\/jdk\/java\/lang\/Thread\/virtual\/Parking.java","additions":1,"deletions":8,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -32,1 +32,0 @@\n- * @requires vm.opt.LockingMode != 1\n","filename":"test\/jdk\/java\/lang\/Thread\/virtual\/RetryMonitorEnterWhenPinned.java","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -30,1 +30,0 @@\n- * @build LockingMode\n@@ -39,1 +38,0 @@\n- * @build LockingMode\n@@ -73,1 +71,0 @@\n-import org.junit.jupiter.api.condition.DisabledIf;\n@@ -1115,1 +1112,0 @@\n-    @DisabledIf(\"LockingMode#isLegacy\")\n","filename":"test\/jdk\/java\/lang\/Thread\/virtual\/ThreadAPI.java","additions":0,"deletions":4,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2024, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,1 +27,0 @@\n- * @requires vm.opt.LockingMode != 1\n@@ -32,7 +31,0 @@\n-\/*\n- * @test id=LM_LIGHTWEIGHT\n- * @requires vm.opt.LockingMode != 1\n- * @library \/test\/lib\n- * @run main\/othervm -XX:LockingMode=2 LotsOfContendedMonitorEnter\n- *\/\n-\n","filename":"test\/jdk\/java\/lang\/Thread\/virtual\/stress\/LotsOfContendedMonitorEnter.java","additions":1,"deletions":9,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2024, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,12 +31,0 @@\n-\/*\n- * @test id=LM_LEGACY\n- * @library \/test\/lib\n- * @run main\/othervm -XX:LockingMode=1 LotsOfUncontendedMonitorEnter\n- *\/\n-\n-\/*\n- * @test id=LM_LIGHTWEIGHT\n- * @library \/test\/lib\n- * @run main\/othervm -XX:LockingMode=2 LotsOfUncontendedMonitorEnter\n- *\/\n-\n","filename":"test\/jdk\/java\/lang\/Thread\/virtual\/stress\/LotsOfUncontendedMonitorEnter.java","additions":1,"deletions":13,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2024, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,1 +29,1 @@\n- * @requires vm.debug != true & vm.continuations & vm.opt.LockingMode != 1\n+ * @requires vm.debug != true & vm.continuations\n@@ -35,1 +35,1 @@\n- * @requires vm.debug == true & vm.continuations & vm.opt.LockingMode != 1\n+ * @requires vm.debug == true & vm.continuations\n","filename":"test\/jdk\/java\/lang\/Thread\/virtual\/stress\/Skynet100kWithMonitors.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -0,0 +1,31 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8351983\n+ * @summary HttpCookie Parser Incorrectly Handles Cookies with Expires Attribute\n+ * @run testng java.base\/java.net.MaxAgeExpires\n+ *\/\n+public class MaxAgeExpiresDriver {\n+}\n\\ No newline at end of file\n","filename":"test\/jdk\/java\/net\/HttpCookie\/whitebox\/MaxAgeExpiresDriver.java","additions":31,"deletions":0,"binary":false,"changes":31,"status":"added"},{"patch":"@@ -0,0 +1,137 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package java.net;\n+\n+import java.time.*;\n+import java.time.format.DateTimeFormatter;\n+import java.util.*;\n+import org.testng.Assert;\n+import org.testng.annotations.Test;\n+import org.testng.annotations.DataProvider;\n+\n+public class MaxAgeExpires {\n+\n+    static final DateTimeFormatter dtFormatter =\n+        DateTimeFormatter.RFC_1123_DATE_TIME;\n+\n+    static final String NOW_PLUS_500_SEC =\n+        dtFormatter.format(ZonedDateTime.ofInstant(Instant.now()\n+                                        .plusSeconds(500), ZoneId.of(\"UTC\")));\n+\n+    \/\/ Test dates 1 minute apart\n+    static final String DT1 = \"Mon, 01 Jan 2024 01:00:00 GMT\";\n+    static final String DT2 = \"Mon, 01 Jan 2024 01:01:00 GMT\";\n+    static final String DT3 = \"Mon, 01 Jan 2024 01:02:00 GMT\";\n+\n+    static final String FAR_FUTURE = \"Mon, 01 Jan 4024 01:02:00 GMT\";\n+\n+    static final ZonedDateTime zdt1 = ZonedDateTime.parse(DT1, dtFormatter);\n+    static final ZonedDateTime zdt2 = ZonedDateTime.parse(DT2, dtFormatter);\n+    static final ZonedDateTime zdt3 = ZonedDateTime.parse(DT3, dtFormatter);\n+\n+    static long zdtToMillis(ZonedDateTime zdt) {\n+        return zdt.toInstant().getEpochSecond() * 1000; \/\/ always exact seconds\n+    }\n+\n+    @DataProvider(name = \"testData\")\n+    public Object[][] testData() {\n+        return new Object[][] {\n+            \/\/ Date string in past. But checking based on current time.\n+            {-1L, -1L, -1L, DT1, 0, true},\n+            {-1L, -1L, 1000, DT1, 1000, false},\n+            {-1L, -1L, 0, DT1, 0, true},\n+            {-1L, -1L, 1000, NOW_PLUS_500_SEC, 1000, false},\n+\n+            \/\/ Far in the future. Just check hasExpired() not the exact maxAge\n+            {-1L, -1L, -1L, FAR_FUTURE, -1L, false},\n+\n+            \/\/ Tests using fixed creation and verification dates\n+            \/\/ (independent of current time)\n+            \/\/                                        expires=\n+            \/\/                                   maxAge= |\n+            \/\/ create time      expiry check time   |    |expected maxAge\n+            \/\/      |                   |           |    |    |  hasExpired()\n+            \/\/      |                   |           |    |    |   |  expected\n+            {zdtToMillis(zdt1), zdtToMillis(zdt3), -1L, DT2, 60, true},\n+            {zdtToMillis(zdt1), zdtToMillis(zdt3),  20, DT2, 20, true},\n+            {zdtToMillis(zdt1), zdtToMillis(zdt2),  40, DT3, 40, true},\n+            {zdtToMillis(zdt1), zdtToMillis(zdt2), -1L, DT3,120, false}\n+\n+        };\n+    };\n+\n+\n+    @Test(dataProvider = \"testData\")\n+    public void test1(long creationInstant, \/\/ if -1, then current time is used\n+                    long expiryCheckInstant,  \/\/ if -1 then current time is used\n+                    long maxAge, \/\/ if -1, then not included in String\n+                    String expires, \/\/ if null, then not included in String\n+                    long expectedAge, \/\/ expected return value from getMaxAge()\n+                    boolean hasExpired) \/\/ expected return value from hasExpired()\n+    throws Exception\n+    {\n+        StringBuilder sb = new StringBuilder();\n+        sb.append(\"Set-Cookie: name=value\");\n+        if (expires != null)\n+            sb.append(\"; expires=\" + expires);\n+        if (maxAge != -1)\n+            sb.append(\"; max-age=\" + Long.toString(maxAge));\n+\n+        String s = sb.toString();\n+        System.out.println(s);\n+        HttpCookie cookie;\n+        if (creationInstant == -1)\n+            cookie = HttpCookie.parse(s).get(0);\n+        else\n+            cookie = HttpCookie.parse(s, false, creationInstant).get(0);\n+\n+        if (expectedAge != -1 && cookie.getMaxAge() != expectedAge) {\n+            System.out.println(\"getMaxAge returned \" + cookie.getMaxAge());\n+            System.out.println(\"expectedAge was \" + expectedAge);\n+            throw new RuntimeException(\"Test failed: wrong age\");\n+        }\n+\n+        boolean expired = expiryCheckInstant == -1\n+            ? cookie.hasExpired()\n+            : cookie.hasExpired(expiryCheckInstant);\n+\n+        if (expired != hasExpired) {\n+            System.out.println(\"cookie.hasExpired() returned \" + expired);\n+            System.out.println(\"hasExpired was \" + hasExpired);\n+            System.out.println(\"getMaxAge() returned \" + cookie.getMaxAge());\n+            throw new RuntimeException(\"Test failed: wrong hasExpired\");\n+        }\n+    }\n+\n+    @Test\n+    public void test2() {\n+        \/\/ Miscellaneous tests that setMaxAge() overrides whatever was set already\n+        HttpCookie cookie = HttpCookie.parse(\"Set-Cookie: name=value; max-age=100\").get(0);\n+        Assert.assertEquals(cookie.getMaxAge(), 100);\n+        cookie.setMaxAge(200);\n+        Assert.assertEquals(cookie.getMaxAge(), 200);\n+        cookie.setMaxAge(-2);\n+        Assert.assertEquals(cookie.getMaxAge(), -2);\n+    }\n+}\n","filename":"test\/jdk\/java\/net\/HttpCookie\/whitebox\/java.base\/java\/net\/MaxAgeExpires.java","additions":137,"deletions":0,"binary":false,"changes":137,"status":"added"},{"patch":"@@ -0,0 +1,110 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.io.IOException;\n+import java.net.InetAddress;\n+import java.net.InetSocketAddress;\n+import java.net.ServerSocket;\n+import java.net.Socket;\n+import java.nio.channels.AsynchronousServerSocketChannel;\n+import java.nio.channels.ServerSocketChannel;\n+\n+import org.junit.jupiter.api.Test;\n+import static org.junit.jupiter.api.Assertions.fail;\n+\n+\/*\n+ * @test\n+ * @bug 8330940\n+ * @summary verify that java.net.ServerSocket and the server socket channels in java.nio.channels\n+ *          when configured with a backlog of >=200 on Windows, will allow for those many\n+ *          backlogged Socket connections\n+ * @requires os.family == \"windows\"\n+ * @run junit LargeBacklogTest\n+ *\/\n+class LargeBacklogTest {\n+\n+    @Test\n+    void testServerSocket() throws Exception {\n+        final int backlog = 242;\n+        \/\/ Create a ServerSocket configured with the given backlog.\n+        \/\/ The ServerSocket never accept()s a connection so each connect() attempt\n+        \/\/ will be backlogged.\n+        try (var server = new ServerSocket(0, backlog, InetAddress.getLoopbackAddress())) {\n+            final int serverPort = server.getLocalPort();\n+            testBackloggedConnects(backlog, serverPort);\n+        }\n+    }\n+\n+    @Test\n+    void testServerSocketChannel() throws Exception {\n+        final int backlog = 213;\n+        \/\/ Create a ServerSocketChannel configured with the given backlog.\n+        \/\/ The channel never accept()s a connection so each connect() attempt\n+        \/\/ will be backlogged.\n+        try (var serverChannel = ServerSocketChannel.open()) {\n+            serverChannel.bind(new InetSocketAddress(InetAddress.getLoopbackAddress(), 0), backlog);\n+            final int serverPort = ((InetSocketAddress) serverChannel.getLocalAddress()).getPort();\n+            testBackloggedConnects(backlog, serverPort);\n+        }\n+    }\n+\n+    @Test\n+    void testAsynchronousServerSocketChannel() throws Exception {\n+        final int backlog = 209;\n+        \/\/ Create a AsynchronousServerSocketChannel configured with the given backlog.\n+        \/\/ The channel never accept()s a connection so each connect() attempt\n+        \/\/ will be backlogged.\n+        try (var serverChannel = AsynchronousServerSocketChannel.open()) {\n+            serverChannel.bind(new InetSocketAddress(InetAddress.getLoopbackAddress(), 0), backlog);\n+            final int serverPort = ((InetSocketAddress) serverChannel.getLocalAddress()).getPort();\n+            testBackloggedConnects(backlog, serverPort);\n+        }\n+    }\n+\n+    private static void testBackloggedConnects(final int backlog, final int serverPort) {\n+        int numSuccessfulConnects = 0;\n+        System.err.println(\"attempting \" + backlog + \" connections to port \" + serverPort);\n+        \/\/ attempt the Socket connections\n+        for (int i = 1; i <= backlog; i++) {\n+            try (final Socket sock = new Socket(InetAddress.getLoopbackAddress(), serverPort)) {\n+                numSuccessfulConnects++;\n+                System.err.println(\"connection \" + i + \" established \" + sock);\n+            } catch (IOException ioe) {\n+                System.err.println(\"connection attempt \" + i + \" failed: \" + ioe);\n+                \/\/ do not attempt any more connections\n+                break;\n+            }\n+        }\n+        System.err.println(numSuccessfulConnects + \" connections successfully established\");\n+        \/\/ ideally we expect the number of successful connections to be equal to the backlog value.\n+        \/\/ however in certain environments, it's possible that some other process attempts a\n+        \/\/ connection to the server's port. so we allow for a small number of connection attempts\n+        \/\/ to fail (due to exceeding the backlog)\n+        final int minimumExpectedSuccessfulConns = backlog - 5;\n+        if (numSuccessfulConnects < minimumExpectedSuccessfulConns) {\n+            fail(\"expected at least \" + minimumExpectedSuccessfulConns\n+                    + \" successful connections for a backlog of \" + backlog + \", but only \"\n+                    + numSuccessfulConnects + \" were successful\");\n+        }\n+    }\n+}\n","filename":"test\/jdk\/java\/net\/ServerSocket\/LargeBacklogTest.java","additions":110,"deletions":0,"binary":false,"changes":110,"status":"added"},{"patch":"@@ -0,0 +1,45 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8360045\n+ * @summary Verify StringTokenizer.nextToken(null) does not alter the\n+ *      existing delimiter\n+ * @run junit NextTokenWithNullDelimTest\n+ *\/\n+\n+import java.util.StringTokenizer;\n+import org.junit.jupiter.api.Test;\n+\n+import static org.junit.jupiter.api.Assertions.assertDoesNotThrow;\n+import static org.junit.jupiter.api.Assertions.assertThrows;\n+\n+public class NextTokenWithNullDelimTest {\n+    @Test\n+    void testNextTokenWithNullDelim() {\n+        StringTokenizer st = new StringTokenizer(\"test\");\n+        assertThrows(NullPointerException.class, () -> st.nextToken(null));\n+        assertDoesNotThrow(st::hasMoreTokens);\n+    }\n+}\n","filename":"test\/jdk\/java\/util\/StringTokenizer\/NextTokenWithNullDelimTest.java","additions":45,"deletions":0,"binary":false,"changes":45,"status":"added"},{"patch":"@@ -48,9 +48,0 @@\n-\/*\n- * @test\n- * @summary Exercise multithreaded maps, using only heavy monitors.\n- * @requires os.arch==\"x86\" | os.arch==\"i386\" | os.arch==\"amd64\" | os.arch==\"x86_64\" | os.arch==\"aarch64\" | os.arch == \"ppc64\" | os.arch == \"ppc64le\" | os.arch == \"riscv64\" | os.arch == \"s390x\"\n- * @requires vm.debug\n- * @library \/test\/lib\n- * @run main\/othervm\/timeout=1600 -XX:LockingMode=0 -XX:+VerifyHeavyMonitors MapLoops\n- *\/\n-\n","filename":"test\/jdk\/java\/util\/concurrent\/ConcurrentHashMap\/MapLoops.java","additions":0,"deletions":9,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -0,0 +1,76 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8358624\n+ * @summary Test ImmutableDescriptor hashcode and serialization\n+ *\n+ * @run main ImmutableDescriptorSerialHashCodeTest\n+ *\/\n+\n+import java.io.ByteArrayInputStream;\n+import java.io.ByteArrayOutputStream;\n+import java.io.ObjectInputStream;\n+import java.io.ObjectOutputStream;\n+import javax.management.Descriptor;\n+import javax.management.ImmutableDescriptor;\n+\n+public class ImmutableDescriptorSerialHashCodeTest {\n+    public static void main(String[] args) throws Exception {\n+\n+        Descriptor d1 = new ImmutableDescriptor(\"a=aval\", \"B=Bval\", \"cC=cCval\");\n+        Descriptor d2 = new ImmutableDescriptor(\"a=aval\", \"B=Bval\", \"cC=cCval\");\n+\n+        test (d1, d2, \"Objects created from same String\"); \/\/ Sanity check\n+        Descriptor dSer = serialize(d1);\n+        test(d1, dSer, \"After serialization\"); \/\/ Actual test\n+        System.out.println(\"PASSED\");\n+    }\n+\n+    \/**\n+      * Test that two Descriptor objects are both equal, and have equal hashcodes.\n+      *\/\n+    private static void test(Descriptor d1, Descriptor d2, String msg) throws Exception {\n+        if (!d1.equals(d2)) {\n+            throw new RuntimeException(msg + \": Descriptors not equal: \" +\n+                    \"\\nd1: \" + d1 +\n+                    \"\\nd2: \" + d2);\n+        }\n+        if (d1.hashCode() != d2.hashCode()) {\n+            throw new RuntimeException(msg + \": Hash code mismatch.  hash1: \" + d1.hashCode()\n+                                + \", hash2: \" + d2.hashCode());\n+        }\n+    }\n+\n+    private static <T> T serialize(T x) throws Exception {\n+        ByteArrayOutputStream bout = new ByteArrayOutputStream();\n+        ObjectOutputStream oout = new ObjectOutputStream(bout);\n+        oout.writeObject(x);\n+        oout.close();\n+        byte[] bytes = bout.toByteArray();\n+        ByteArrayInputStream bin = new ByteArrayInputStream(bytes);\n+        ObjectInputStream oin = new ObjectInputStream(bin);\n+        return (T) oin.readObject();\n+    }\n+}\n","filename":"test\/jdk\/javax\/management\/descriptor\/ImmutableDescriptorSerialHashCodeTest.java","additions":76,"deletions":0,"binary":false,"changes":76,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2012, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2012, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,1 +27,0 @@\n- * @author Ilya Boyandin\n@@ -59,0 +58,6 @@\n+    private static boolean isWindowsLF;\n+\n+    private static String INSTRUCTIONS_WINDOWSLF =\n+        \"There are eight controls, JCheckBox\/JRadioButton with black background\\n\" +\n+        \"and JRadioButtonMenuItem\/JCheckboxMenuItem with gray background\\n\";\n+\n@@ -60,1 +65,3 @@\n-            \"There are eight controls with black backgrounds.\\n\" +\n+            \"There are eight controls with black backgrounds.\\n\";\n+\n+    private static final String INSTRUCTIONS_COMMON =\n@@ -85,0 +92,2 @@\n+        isWindowsLF = \"Windows\".equals(UIManager.getLookAndFeel().getID());\n+\n@@ -153,2 +162,4 @@\n-                        ? INSTRUCTIONS + INSTRUCTIONS_ADDITIONS_METAL\n-                        : INSTRUCTIONS\n+                        ? INSTRUCTIONS + INSTRUCTIONS_COMMON + INSTRUCTIONS_ADDITIONS_METAL\n+                        : isWindowsLF\n+                            ? (INSTRUCTIONS_WINDOWSLF + INSTRUCTIONS_COMMON)\n+                            : (INSTRUCTIONS + INSTRUCTIONS_COMMON)\n@@ -192,1 +203,7 @@\n-        b.setBackground(Color.black);\n+        if (isWindowsLF\n+            && ((b instanceof JRadioButtonMenuItem)\n+               || (b instanceof JCheckBoxMenuItem))) {\n+            b.setBackground(Color.lightGray);\n+        } else {\n+            b.setBackground(Color.black);\n+        }\n","filename":"test\/jdk\/javax\/swing\/JCheckBox\/4449413\/bug4449413.java","additions":23,"deletions":6,"binary":false,"changes":29,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2012, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2012, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -25,1 +25,1 @@\n- * @bug 4957669 5017871\n+ * @bug 4957669 5017871 8358729\n@@ -30,2 +30,1 @@\n- * @compile -XDignore.symbol.file=true ClassnameCharTest.java\n- * @run main ClassnameCharTest\n+ * @run junit ClassnameCharTest\n@@ -35,0 +34,2 @@\n+import java.lang.classfile.ClassFile;\n+import java.lang.constant.ClassDesc;\n@@ -36,2 +37,0 @@\n-import java.security.AccessControlContext;\n-import java.security.AccessController;\n@@ -39,3 +38,0 @@\n-import java.security.PrivilegedActionException;\n-import java.security.PrivilegedExceptionAction;\n-import java.util.jar.*;\n@@ -45,0 +41,2 @@\n+import org.junit.jupiter.api.Test;\n+\n@@ -46,3 +44,0 @@\n-    static String FNPrefix = System.getProperty(\"test.src\", \".\") + File.separator;\n-    static File classesJar = new File(FNPrefix + \"testclasses.jar\");\n-    static HttpServer server;\n@@ -50,1 +45,7 @@\n-    public static void realMain(String[] args) throws Exception {\n+    private static HttpServer server;\n+    private static final byte[] bytes =\n+            ClassFile.of().build(ClassDesc.of(\"fo o\"), _ -> {});\n+\n+    @Test\n+    void testClassName() throws IOException {\n+        \/\/ Build the server and set the context\n@@ -52,29 +53,9 @@\n-        server.createContext(\"\/\", new HttpHandler() {\n-            @Override\n-            public void handle(HttpExchange exchange) {\n-                try {\n-                    String filename = exchange.getRequestURI().getPath();\n-                    System.out.println(\"getRequestURI = \" + exchange.getRequestURI());\n-                    System.out.println(\"filename = \" + filename);\n-                    try (FileInputStream fis = new FileInputStream(classesJar);\n-                         JarInputStream jis = new JarInputStream(fis)) {\n-                        JarEntry entry;\n-                        while ((entry = jis.getNextJarEntry()) != null) {\n-                            if (filename.endsWith(entry.getName())) {\n-                                ByteArrayOutputStream baos = new ByteArrayOutputStream();\n-                                byte[] buf = new byte[8092];\n-                                int count = 0;\n-                                while ((count = jis.read(buf)) != -1)\n-                                    baos.write(buf, 0, count);\n-                                exchange.sendResponseHeaders(200, baos.size());\n-                                try (OutputStream os = exchange.getResponseBody()) {\n-                                    baos.writeTo(os);\n-                                }\n-                                return;\n-                            }\n-                        }\n-                        fail(\"Failed to find \" + filename);\n-                    }\n-                } catch (IOException e) {\n-                    unexpected(e);\n-                }\n+        server.createContext(\"\/\", exchange -> {\n+            String filename = exchange.getRequestURI().getPath();\n+            System.out.println(\"getRequestURI = \" + exchange.getRequestURI());\n+            System.out.println(\"filename = \" + filename);\n+            ByteArrayOutputStream baos = new ByteArrayOutputStream();\n+            baos.write(bytes, 0, bytes.length);\n+            exchange.sendResponseHeaders(200, baos.size());\n+            try (OutputStream os = exchange.getResponseBody()) {\n+                baos.writeTo(os);\n@@ -90,1 +71,0 @@\n-            pass();\n@@ -102,1 +82,0 @@\n-        private AccessControlContext acc;\n@@ -108,1 +87,0 @@\n-            acc = AccessController.getContext();\n@@ -112,1 +90,1 @@\n-        public Class<?> findClass(String name) throws ClassNotFoundException {\n+        public Class<?> findClass(String name) {\n@@ -120,6 +98,0 @@\n-            \/\/ check loaded JAR files\n-            try {\n-                return super.findClass(name);\n-            } catch (ClassNotFoundException e) {\n-            }\n-\n@@ -129,1 +101,4 @@\n-            final String path = (new StringBuffer(encodedName)).append(\".class\").append(cookie).toString();\n+            final String path = encodedName + \".class\" + cookie;\n+            Exception exc = null;\n+            \/\/ try block used for checked exceptions as well as ClassFormatError\n+            \/\/ from defineClass call\n@@ -131,22 +106,6 @@\n-                byte[] b = AccessController.doPrivileged(\n-                        new PrivilegedExceptionAction<byte[]>() {\n-                            public byte[] run() throws IOException {\n-                                try {\n-                                    URL finalURL = new URL(base, path);\n-\n-                                    \/\/ Make sure the codebase won't be modified\n-                                    if (base.getProtocol().equals(finalURL.getProtocol()) &&\n-                                            base.getHost().equals(finalURL.getHost()) &&\n-                                            base.getPort() == finalURL.getPort()) {\n-                                        return getBytes(finalURL);\n-                                    }\n-                                    else {\n-                                        return null;\n-                                    }\n-                                } catch (Exception e) {\n-                                    return null;\n-                                }\n-                            }\n-                        }, acc);\n-\n-                if (b != null) {\n+                URL finalURL = new URL(base, path);\n+                \/\/ Make sure the codebase won't be modified\n+                if (base.getProtocol().equals(finalURL.getProtocol()) &&\n+                        base.getHost().equals(finalURL.getHost()) &&\n+                        base.getPort() == finalURL.getPort()) {\n+                    byte[] b = getBytes(finalURL);\n@@ -154,2 +113,0 @@\n-                } else {\n-                    throw new ClassNotFoundException(name);\n@@ -157,2 +114,3 @@\n-            } catch (PrivilegedActionException e) {\n-                throw new ClassNotFoundException(name, e.getException());\n+                \/\/ protocol\/host\/port mismatch, fail with RuntimeException\n+            } catch (Exception underlyingE) {\n+                exc = underlyingE; \/\/ Most likely CFE from defineClass\n@@ -160,0 +118,3 @@\n+            \/\/ Fail if there was either a protocol\/host\/port mismatch\n+            \/\/ or an exception was thrown (which is propagated)\n+            throw new RuntimeException(name, exc);\n@@ -189,59 +150,0 @@\n-\n-    \/\/--------------------- Infrastructure ---------------------------\n-    static volatile int passed = 0, failed = 0;\n-\n-    static boolean pass() {\n-        passed++;\n-        return true;\n-    }\n-\n-    static boolean fail() {\n-        failed++;\n-        if (server != null) {\n-            server.stop(0);\n-        }\n-        Thread.dumpStack();\n-        return false;\n-    }\n-\n-    static boolean fail(String msg) {\n-        System.out.println(msg);\n-        return fail();\n-    }\n-\n-    static void unexpected(Throwable t) {\n-        failed++;\n-        if (server != null) {\n-            server.stop(0);\n-        }\n-        t.printStackTrace();\n-    }\n-\n-    static boolean check(boolean cond) {\n-        if (cond) {\n-            pass();\n-        } else {\n-            fail();\n-        }\n-        return cond;\n-    }\n-\n-    static boolean equal(Object x, Object y) {\n-        if (x == null ? y == null : x.equals(y)) {\n-            return pass();\n-        } else {\n-            return fail(x + \" not equal to \" + y);\n-        }\n-    }\n-\n-    public static void main(String[] args) throws Throwable {\n-        try {\n-            realMain(args);\n-        } catch (Throwable t) {\n-            unexpected(t);\n-        }\n-        System.out.println(\"\\nPassed = \" + passed + \" failed = \" + failed);\n-        if (failed > 0) {\n-            throw new AssertionError(\"Some tests failed\");\n-        }\n-    }\n","filename":"test\/jdk\/jdk\/internal\/loader\/URLClassPath\/ClassnameCharTest.java","additions":40,"deletions":138,"binary":false,"changes":178,"status":"modified"},{"filename":"test\/jdk\/jdk\/internal\/loader\/URLClassPath\/testclasses.jar","binary":true,"status":"deleted"},{"patch":"@@ -31,0 +31,1 @@\n+ * @requires !vm.asan\n","filename":"test\/jdk\/jdk\/internal\/platform\/docker\/TestDockerBasic.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -38,0 +38,1 @@\n+ * @requires !vm.asan\n","filename":"test\/jdk\/jdk\/internal\/platform\/docker\/TestDockerCpuMetrics.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -36,0 +36,1 @@\n+ * @requires !vm.asan\n","filename":"test\/jdk\/jdk\/internal\/platform\/docker\/TestDockerMemoryMetrics.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -43,0 +43,1 @@\n+ * @requires !vm.asan\n","filename":"test\/jdk\/jdk\/internal\/platform\/docker\/TestDockerMemoryMetricsSubgroup.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -30,0 +30,1 @@\n+ * @requires !vm.asan\n","filename":"test\/jdk\/jdk\/internal\/platform\/docker\/TestGetFreeSwapSpaceSize.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -33,0 +33,1 @@\n+ * @requires !vm.asan\n","filename":"test\/jdk\/jdk\/internal\/platform\/docker\/TestLimitsUpdating.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -31,0 +31,1 @@\n+ * @requires !vm.asan\n","filename":"test\/jdk\/jdk\/internal\/platform\/docker\/TestPidsLimit.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -29,0 +29,1 @@\n+ * @requires !vm.asan\n","filename":"test\/jdk\/jdk\/internal\/platform\/docker\/TestSystemMetrics.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -29,0 +29,1 @@\n+ * @requires !vm.asan\n","filename":"test\/jdk\/jdk\/internal\/platform\/docker\/TestUseContainerSupport.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-* Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+* Copyright (c) 2018, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -67,3 +67,0 @@\n-import com.sun.management.HotSpotDiagnosticMXBean;\n-import java.lang.management.ManagementFactory;\n-\n@@ -284,33 +281,0 @@\n-    @Test\n-    public void testPinnedMonitor() {\n-        if (!legacyLockingMode()) return;\n-\n-        \/\/ Test pinning due to held monitor\n-        final AtomicReference<Continuation.Pinned> res = new AtomicReference<>();\n-\n-        Continuation cont = new Continuation(FOO, ()-> {\n-            syncFoo(1);\n-        }) {\n-            @Override\n-            protected void onPinned(Continuation.Pinned reason) {\n-                assert Continuation.isPinned(FOO);\n-                res.set(reason);\n-            }\n-        };\n-\n-        cont.run();\n-        assertEquals(res.get(), Continuation.Pinned.MONITOR);\n-        boolean isDone = cont.isDone();\n-        assertEquals(isDone, true);\n-    }\n-\n-    static double syncFoo(int a) {\n-        long x = 8;\n-        String s = \"yyy\";\n-        String r;\n-        synchronized(FOO) {\n-            r = bar2(a + 1);\n-        }\n-        return Integer.parseInt(r)+1;\n-    }\n-\n@@ -422,5 +386,0 @@\n-\n-    static boolean legacyLockingMode() {\n-        return ManagementFactory.getPlatformMXBean(HotSpotDiagnosticMXBean.class)\n-                    .getVMOption(\"LockingMode\").getValue().equals(\"1\");\n-    }\n","filename":"test\/jdk\/jdk\/internal\/vm\/Continuation\/Basic.java","additions":1,"deletions":42,"binary":false,"changes":43,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-* Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+* Copyright (c) 2018, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -476,1 +476,2 @@\n-        return traceHas(Op.PIN::contains) && legacyLockingMode();\n+        \/\/ Returns false since we never pin after we removed legacy locking.\n+        return traceHas(Op.PIN::contains) && false;\n@@ -1035,5 +1036,0 @@\n-\n-    static boolean legacyLockingMode() {\n-        return ManagementFactory.getPlatformMXBean(HotSpotDiagnosticMXBean.class)\n-                    .getVMOption(\"LockingMode\").getValue().equals(\"1\");\n-    }\n","filename":"test\/jdk\/jdk\/internal\/vm\/Continuation\/Fuzz.java","additions":3,"deletions":7,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -53,1 +53,1 @@\n-    private static final long CodeCacheExpectedSize = WhiteBox.getWhiteBox().getUintxVMFlag(\"ReservedCodeCacheSize\");\n+    private static final long CodeCacheExpectedSize = WhiteBox.getWhiteBox().getSizeTVMFlag(\"ReservedCodeCacheSize\");\n","filename":"test\/jdk\/jdk\/jfr\/event\/compiler\/TestCodeCacheConfig.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -68,2 +68,2 @@\n-    public static final long SEGMENT_SIZE = WhiteBox.getWhiteBox().getUintxVMFlag(\"CodeCacheSegmentSize\");\n-    public static final long MIN_BLOCK_LENGTH = WhiteBox.getWhiteBox().getUintxVMFlag(\"CodeCacheMinBlockLength\");\n+    public static final long SEGMENT_SIZE = WhiteBox.getWhiteBox().getSizeTVMFlag(\"CodeCacheSegmentSize\");\n+    public static final long MIN_BLOCK_LENGTH = WhiteBox.getWhiteBox().getSizeTVMFlag(\"CodeCacheMinBlockLength\");\n","filename":"test\/jdk\/jdk\/jfr\/event\/compiler\/TestCodeSweeper.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -0,0 +1,46 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package jdk.jfr.event.tracing;\n+\n+import jdk.internal.misc.Unsafe;\n+import jdk.jfr.FlightRecorder;\n+import jdk.jfr.Recording;\n+\/**\n+* @test\n+* @summary Tests that PlatformTracer is not initialized if a method filter has not been set.\n+* @requires vm.flagless\n+* @requires vm.hasJFR\n+* @modules java.base\/jdk.internal.misc jdk.jfr\/jdk.jfr.internal.tracing\n+* @library \/test\/lib\n+* @run main\/othervm -XX:StartFlightRecording jdk.jfr.event.tracing.TestLazyPlatformTracer\n+*\/\n+public class TestLazyPlatformTracer {\n+\n+    public static void main(String... args) throws Exception {\n+        \/\/ Stop recording so end chunk events are emitted\n+        FlightRecorder.getFlightRecorder().getRecordings().getFirst().stop();\n+        if (!Unsafe.getUnsafe().shouldBeInitialized(jdk.jfr.internal.tracing.PlatformTracer.class)) {\n+            throw new AssertionError(\"PlatformTracer should not have been initialized\");\n+        }\n+    }\n+}\n","filename":"test\/jdk\/jdk\/jfr\/event\/tracing\/TestLazyPlatformTracer.java","additions":46,"deletions":0,"binary":false,"changes":46,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,1 +31,0 @@\n-import java.io.InputStream;\n@@ -44,2 +43,23 @@\n-            { \"jrt:\/java.base\/java\/lang\/Object.class\",    true },\n-            { \"jrt:\/java.desktop\/java\/lang\/Object.class\", false },\n+                {\"jrt:\/java.base\/java\/lang\/Object.class\", true},\n+                \/\/ Valid resource with and without percent-encoding.\n+                {\"jrt:\/java.base\/java\/lang\/Runtime$Version.class\", true},\n+                {\"jrt:\/java.base\/java%2Flang%2FRuntime%24Version.class\", true},\n+                \/\/ Unnecessary percent encoding (just Object again).\n+                {\"jrt:\/java.base\/%6a%61%76%61%2f%6c%61%6e%67%2f%4f%62%6a%65%63%74%2e%63%6c%61%73%73\", true},\n+                \/\/ Query parameters and fragments are silently ignored.\n+                {\"jrt:\/java.base\/java\/lang\/Object.class?yes=no\", true},\n+                {\"jrt:\/java.base\/java\/lang\/Object.class#anchor\", true},\n+\n+                \/\/ Missing resource (no such class).\n+                {\"jrt:\/java.base\/java\/lang\/NoSuchClass.class\", false},\n+                \/\/ Missing resource (wrong module).\n+                {\"jrt:\/java.desktop\/java\/lang\/Object.class\", false},\n+                \/\/ Entries in jimage which don't reference resources.\n+                {\"jrt:\/modules\/java.base\/java\/lang\", false},\n+                {\"jrt:\/packages\/java.lang\", false},\n+                \/\/ Invalid (incomplete\/corrupt) URIs.\n+                {\"jrt:\/\", false},\n+                {\"jrt:\/java.base\", false},\n+                {\"jrt:\/java.base\/\", false},\n+                \/\/ Cannot escape anything in the module name.\n+                {\"jrt:\/java%2Ebase\/java\/lang\/Object.class\", false},\n","filename":"test\/jdk\/sun\/net\/www\/protocol\/jrt\/Basic.java","additions":24,"deletions":4,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2004, 2020, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2004, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,0 +37,5 @@\n+RC=$?\n+if [ $RC -ne 0 ]; then\n+  exit $RC\n+fi\n+\n","filename":"test\/jdk\/sun\/tools\/jstat\/jstatGcCapacityOutput1.sh","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2004, 2020, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2004, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -41,0 +41,5 @@\n+RC=$?\n+if [ $RC -ne 0 ]; then\n+  exit $RC\n+fi\n+\n","filename":"test\/jdk\/sun\/tools\/jstat\/jstatGcCauseOutput1.sh","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2013, 2020, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2013, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,0 +37,5 @@\n+RC=$?\n+if [ $RC -ne 0 ]; then\n+  exit $RC\n+fi\n+\n","filename":"test\/jdk\/sun\/tools\/jstat\/jstatGcMetaCapacityOutput1.sh","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2004, 2020, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2004, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,0 +37,5 @@\n+RC=$?\n+if [ $RC -ne 0 ]; then\n+  exit $RC\n+fi\n+\n","filename":"test\/jdk\/sun\/tools\/jstat\/jstatGcNewCapacityOutput1.sh","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2004, 2020, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2004, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,0 +37,5 @@\n+RC=$?\n+if [ $RC -ne 0 ]; then\n+  exit $RC\n+fi\n+\n","filename":"test\/jdk\/sun\/tools\/jstat\/jstatGcNewOutput1.sh","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2004, 2020, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2004, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,0 +37,5 @@\n+RC=$?\n+if [ $RC -ne 0 ]; then\n+  exit $RC\n+fi\n+\n","filename":"test\/jdk\/sun\/tools\/jstat\/jstatGcOldCapacityOutput1.sh","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2004, 2020, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2004, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,0 +37,5 @@\n+RC=$?\n+if [ $RC -ne 0 ]; then\n+  exit $RC\n+fi\n+\n","filename":"test\/jdk\/sun\/tools\/jstat\/jstatGcOldOutput1.sh","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2004, 2020, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2004, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,0 +37,5 @@\n+RC=$?\n+if [ $RC -ne 0 ]; then\n+  exit $RC\n+fi\n+\n","filename":"test\/jdk\/sun\/tools\/jstat\/jstatGcOutput1.sh","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2004, 2020, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2004, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,0 +37,5 @@\n+RC=$?\n+if [ $RC -ne 0 ]; then\n+  exit $RC\n+fi\n+\n","filename":"test\/jdk\/sun\/tools\/jstat\/jstatLineCounts1.sh","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2004, 2020, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2004, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,0 +37,5 @@\n+RC=$?\n+if [ $RC -ne 0 ]; then\n+  exit $RC\n+fi\n+\n","filename":"test\/jdk\/sun\/tools\/jstat\/jstatLineCounts2.sh","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2004, 2020, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2004, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,0 +37,5 @@\n+RC=$?\n+if [ $RC -ne 0 ]; then\n+  exit $RC\n+fi\n+\n","filename":"test\/jdk\/sun\/tools\/jstat\/jstatLineCounts3.sh","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2004, 2020, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2004, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,0 +37,5 @@\n+RC=$?\n+if [ $RC -ne 0 ]; then\n+  exit $RC\n+fi\n+\n","filename":"test\/jdk\/sun\/tools\/jstat\/jstatLineCounts4.sh","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -32,1 +32,1 @@\n-\/^[ ]*[0-9]+\\.[0-9]+[ ]*[0-9]+\\.[0-9]+[ ]*[0-9]+\\.[0-9]+[ ]*[0-9]+\\.[0-9]+[ ]*[0-9]+\\.[0-9]+[ ]*[0-9]+\\.[0-9]+[ ]*[0-9]+[ ]*[0-9]+\\.[0-9]+[ ]*[0-9]+[ ]*[0-9]+\\.[0-9]+[ ]*([0-9]+|-)[ ]*([0-9]+\\.[0-9]+|-)[ ]*[0-9]+\\.[0-9]+$\/\t{\n+\/^[ ]*([0-9]+\\.[0-9]+|-)[ ]*([0-9]+\\.[0-9]+|-)[ ]*([0-9]+\\.[0-9]+|-)[ ]*([0-9]+\\.[0-9]+|-)[ ]*([0-9]+\\.[0-9]+|-)[ ]*([0-9]+\\.[0-9]+|-)[ ]*[0-9]+[ ]*[0-9]+\\.[0-9]+[ ]*[0-9]+[ ]*[0-9]+\\.[0-9]+[ ]*([0-9]+|-)[ ]*([0-9]+\\.[0-9]+|-)[ ]*[0-9]+\\.[0-9]+$\/\t{\n","filename":"test\/jdk\/sun\/tools\/jstat\/lineCounts1.awk","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -24,1 +24,1 @@\n-\/^[ ]*[0-9]+\\.[0-9]+[ ]*[0-9]+\\.[0-9]+[ ]*[0-9]+\\.[0-9]+[ ]*[0-9]+\\.[0-9]+[ ]*[0-9]+\\.[0-9]+[ ]*[0-9]+\\.[0-9]+[ ]*[0-9]+[ ]*[0-9]+\\.[0-9]+[ ]*[0-9]+[ ]*[0-9]+\\.[0-9]+[ ]*([0-9]+|-)[ ]*([0-9]+\\.[0-9]+|-)[ ]*[0-9]+\\.[0-9]+$\/\t{\n+\/^[ ]*([0-9]+\\.[0-9]+|-)[ ]*([0-9]+\\.[0-9]+|-)[ ]*([0-9]+\\.[0-9]+|-)[ ]*([0-9]+\\.[0-9]+|-)[ ]*([0-9]+\\.[0-9]+|-)[ ]*([0-9]+\\.[0-9]+|-)[ ]*[0-9]+[ ]*[0-9]+\\.[0-9]+[ ]*[0-9]+[ ]*[0-9]+\\.[0-9]+[ ]*([0-9]+|-)[ ]*([0-9]+\\.[0-9]+|-)[ ]*[0-9]+\\.[0-9]+$\/\t{\n","filename":"test\/jdk\/sun\/tools\/jstat\/lineCounts2.awk","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -42,1 +42,1 @@\n-\/^[ ]*[0-9]+\\.[0-9]+[ ]*[0-9]+\\.[0-9]+[ ]*[0-9]+\\.[0-9]+[ ]*[0-9]+\\.[0-9]+[ ]*[0-9]+\\.[0-9]+[ ]*[0-9]+\\.[0-9]+[ ]*[0-9]+[ ]*[0-9]+\\.[0-9]+[ ]*[0-9]+[ ]*[0-9]+\\.[0-9]+[ ]*([0-9]+|-)[ ]*([0-9]+\\.[0-9]+|-)[ ]*[0-9]+\\.[0-9]+$\/\t{\n+\/^[ ]*([0-9]+\\.[0-9]+|-)[ ]*([0-9]+\\.[0-9]+|-)[ ]*([0-9]+\\.[0-9]+|-)[ ]*([0-9]+\\.[0-9]+|-)[ ]*([0-9]+\\.[0-9]+|-)[ ]*([0-9]+\\.[0-9]+|-)[ ]*[0-9]+[ ]*[0-9]+\\.[0-9]+[ ]*[0-9]+[ ]*[0-9]+\\.[0-9]+[ ]*([0-9]+|-)[ ]*([0-9]+\\.[0-9]+|-)[ ]*[0-9]+\\.[0-9]+$\/\t{\n","filename":"test\/jdk\/sun\/tools\/jstat\/lineCounts3.awk","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -47,1 +47,1 @@\n-\/^[ ]*[0-9]+\\.[0-9]+[ ]*[0-9]+\\.[0-9]+[ ]*[0-9]+\\.[0-9]+[ ]*[0-9]+\\.[0-9]+[ ]*[0-9]+\\.[0-9]+[ ]*[0-9]+\\.[0-9]+[ ]*[0-9]+[ ]*[0-9]+\\.[0-9]+[ ]*[0-9]+[ ]*[0-9]+\\.[0-9]+[ ]*([0-9]+|-)[ ]*([0-9]+\\.[0-9]+|-)[ ]*[0-9]+\\.[0-9]+$\/\t{\n+\/^[ ]*([0-9]+\\.[0-9]+|-)[ ]*([0-9]+\\.[0-9]+|-)[ ]*([0-9]+\\.[0-9]+|-)[ ]*([0-9]+\\.[0-9]+|-)[ ]*([0-9]+\\.[0-9]+|-)[ ]*([0-9]+\\.[0-9]+|-)[ ]*[0-9]+[ ]*[0-9]+\\.[0-9]+[ ]*[0-9]+[ ]*[0-9]+\\.[0-9]+[ ]*([0-9]+|-)[ ]*([0-9]+\\.[0-9]+|-)[ ]*[0-9]+\\.[0-9]+$\/\t{\n","filename":"test\/jdk\/sun\/tools\/jstat\/lineCounts4.awk","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -0,0 +1,30 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8346886\n+ * @summary Test for `@since` in jdk.management.jfr module\n+ * @library \/test\/lib \/test\/jdk\/tools\/sincechecker\n+ * @run main SinceChecker jdk.management.jfr\n+ *\/\n","filename":"test\/jdk\/tools\/sincechecker\/modules\/jdk.management.jfr\/JdkManagementJfrCheckSince.java","additions":30,"deletions":0,"binary":false,"changes":30,"status":"added"},{"patch":"@@ -121,2 +121,0 @@\n-        map.put(\"vm.rtm.cpu\", this::vmRTMCPU);\n-        map.put(\"vm.rtm.compiler\", this::vmRTMCompiler);\n@@ -420,22 +418,0 @@\n-    \/**\n-     * @return \"true\" if compiler in use supports RTM and \"false\" otherwise.\n-     * Note: Lightweight locking does not support RTM (for now).\n-     *\/\n-    protected String vmRTMCompiler() {\n-        boolean isRTMCompiler = false;\n-\n-        if (Compiler.isC2Enabled() &&\n-            (Platform.isX86() || Platform.isX64() || Platform.isPPC()) &&\n-            is_LM_LIGHTWEIGHT().equals(\"false\")) {\n-            isRTMCompiler = true;\n-        }\n-        return \"\" + isRTMCompiler;\n-    }\n-\n-    \/**\n-     * @return true if VM runs RTM supported CPU and false otherwise.\n-     *\/\n-    protected String vmRTMCPU() {\n-        return \"\" + CPUInfo.hasFeature(\"rtm\");\n-    }\n-\n@@ -535,28 +511,0 @@\n-    \/**\n-     * @return LockingMode.\n-     *\/\n-    protected String vmLockingMode() {\n-        return \"\" + WB.getIntVMFlag(\"LockingMode\");\n-    }\n-\n-    \/**\n-     * @return \"true\" if LockingMode == 0 (LM_MONITOR)\n-     *\/\n-    protected String is_LM_MONITOR() {\n-        return \"\" + vmLockingMode().equals(\"0\");\n-    }\n-\n-    \/**\n-     * @return \"true\" if LockingMode == 1 (LM_LEGACY)\n-     *\/\n-    protected String is_LM_LEGACY() {\n-        return \"\" + vmLockingMode().equals(\"1\");\n-    }\n-\n-    \/**\n-     * @return \"true\" if LockingMode == 2 (LM_LIGHTWEIGHT)\n-     *\/\n-    protected String is_LM_LIGHTWEIGHT() {\n-        return \"\" + vmLockingMode().equals(\"2\");\n-    }\n-\n","filename":"test\/jtreg-ext\/requires\/VMProps.java","additions":0,"deletions":52,"binary":false,"changes":52,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n- * @bug      8263468 8269401 8268422 8287524 8325874 8331873 8345555\n+ * @bug      8263468 8269401 8268422 8287524 8325874 8331873 8345555 8359024\n@@ -129,1 +129,1 @@\n-                <div class=\"table-tabs\" role=\"tablist\" aria-orientation=\"horizontal\">\n+                <div class=\"table-tabs\">\n@@ -145,1 +145,1 @@\n-                <div class=\"table-tabs\" role=\"tablist\" aria-orientation=\"horizontal\">\n+                <div class=\"table-tabs\">\n@@ -161,1 +161,1 @@\n-                <div class=\"table-tabs\" role=\"tablist\" aria-orientation=\"horizontal\">\n+                <div class=\"table-tabs\">\n@@ -177,1 +177,1 @@\n-                <div class=\"table-tabs\" role=\"tablist\" aria-orientation=\"horizontal\">\n+                <div class=\"table-tabs\">\n@@ -193,1 +193,1 @@\n-                <div class=\"table-tabs\" role=\"tablist\" aria-orientation=\"horizontal\">\n+                <div class=\"table-tabs\">\n@@ -209,1 +209,1 @@\n-                <div class=\"table-tabs\" role=\"tablist\" aria-orientation=\"horizontal\">\n+                <div class=\"table-tabs\">\n@@ -231,1 +231,1 @@\n-                <div class=\"table-tabs\" role=\"tablist\" aria-orientation=\"horizontal\">\n+                <div class=\"table-tabs\">\n@@ -247,1 +247,1 @@\n-                <div class=\"table-tabs\" role=\"tablist\" aria-orientation=\"horizontal\">\n+                <div class=\"table-tabs\">\n@@ -262,1 +262,1 @@\n-                <div class=\"table-tabs\" role=\"tablist\" aria-orientation=\"horizontal\">\n+                <div class=\"table-tabs\">\n@@ -296,1 +296,1 @@\n-                <div class=\"table-tabs\" role=\"tablist\" aria-orientation=\"horizontal\">\n+                <div class=\"table-tabs\">\n@@ -362,1 +362,1 @@\n-                <div class=\"table-tabs\" role=\"tablist\" aria-orientation=\"horizontal\">\n+                <div class=\"table-tabs\">\n@@ -397,1 +397,1 @@\n-                <div class=\"table-tabs\" role=\"tablist\" aria-orientation=\"horizontal\">\n+                <div class=\"table-tabs\">\n@@ -431,1 +431,1 @@\n-                <div class=\"table-tabs\" role=\"tablist\" aria-orientation=\"horizontal\">\n+                <div class=\"table-tabs\">\n@@ -459,1 +459,1 @@\n-                <div class=\"table-tabs\" role=\"tablist\" aria-orientation=\"horizontal\">\n+                <div class=\"table-tabs\">\n@@ -474,1 +474,1 @@\n-                <div class=\"table-tabs\" role=\"tablist\" aria-orientation=\"horizontal\">\n+                <div class=\"table-tabs\">\n@@ -489,1 +489,1 @@\n-                <div class=\"table-tabs\" role=\"tablist\" aria-orientation=\"horizontal\">\n+                <div class=\"table-tabs\">\n@@ -504,1 +504,1 @@\n-                <div class=\"table-tabs\" role=\"tablist\" aria-orientation=\"horizontal\">\n+                <div class=\"table-tabs\">\n@@ -519,1 +519,1 @@\n-                <div class=\"table-tabs\" role=\"tablist\" aria-orientation=\"horizontal\">\n+                <div class=\"table-tabs\">\n@@ -609,1 +609,1 @@\n-                <div class=\"table-tabs\" role=\"tablist\" aria-orientation=\"horizontal\">\n+                <div class=\"table-tabs\">\n@@ -624,1 +624,1 @@\n-                <div class=\"table-tabs\" role=\"tablist\" aria-orientation=\"horizontal\">\n+                <div class=\"table-tabs\">\n@@ -639,1 +639,1 @@\n-                <div class=\"table-tabs\" role=\"tablist\" aria-orientation=\"horizontal\">\n+                <div class=\"table-tabs\">\n@@ -683,1 +683,1 @@\n-                <div class=\"table-tabs\" role=\"tablist\" aria-orientation=\"horizontal\">\n+                <div class=\"table-tabs\">\n@@ -699,1 +699,1 @@\n-                <div class=\"table-tabs\" role=\"tablist\" aria-orientation=\"horizontal\">\n+                <div class=\"table-tabs\">\n@@ -715,1 +715,1 @@\n-                <div class=\"table-tabs\" role=\"tablist\" aria-orientation=\"horizontal\">\n+                <div class=\"table-tabs\">\n@@ -744,1 +744,1 @@\n-                <div class=\"table-tabs\" role=\"tablist\" aria-orientation=\"horizontal\">\n+                <div class=\"table-tabs\">\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testNewApiList\/TestNewApiList.java","additions":26,"deletions":26,"binary":false,"changes":52,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n- *           8331947 8281533 8343239 8318416 8346109\n+ *           8331947 8281533 8343239 8318416 8346109 8359024\n@@ -107,1 +107,1 @@\n-                    <div class=\"table-tabs\" role=\"tablist\" aria-orientation=\"horizontal\">\n+                    <div class=\"table-tabs\">\n@@ -125,1 +125,1 @@\n-                    <div class=\"table-tabs\" role=\"tablist\" aria-orientation=\"horizontal\">\n+                    <div class=\"table-tabs\">\n@@ -142,1 +142,1 @@\n-                    <div class=\"table-tabs\" role=\"tablist\" aria-orientation=\"horizontal\">\n+                    <div class=\"table-tabs\">\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testPreview\/TestPreview.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -0,0 +1,38 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8359596\n+ * @summary Verify behavior when both \"-Xlint:options\" and \"-Xlint:-options\" are given\n+ * @compile\/fail\/ref=LintOptions.out -Werror -XDrawDiagnostics -source 21 -target 21                                LintOptions.java\n+ * @compile\/fail\/ref=LintOptions.out -Werror -XDrawDiagnostics -source 21 -target 21 -Xlint:options                 LintOptions.java\n+ * @compile                          -Werror -XDrawDiagnostics -source 21 -target 21                -Xlint:-options LintOptions.java\n+ * @compile                          -Werror -XDrawDiagnostics -source 21 -target 21 -Xlint:options -Xlint:-options LintOptions.java\n+ * @compile                          -Werror -XDrawDiagnostics -source 21 -target 21                -Xlint:none     LintOptions.java\n+ * @compile                          -Werror -XDrawDiagnostics -source 21 -target 21 -Xlint:options -Xlint:none     LintOptions.java\n+ *\/\n+class LintOptions {\n+}\n","filename":"test\/langtools\/tools\/javac\/lint\/LintOptions.java","additions":38,"deletions":0,"binary":false,"changes":38,"status":"added"},{"patch":"@@ -0,0 +1,4 @@\n+- compiler.warn.source.no.system.modules.path: 21, (compiler.misc.source.no.system.modules.path.with.target: 21, 21)\n+- compiler.err.warnings.and.werror\n+1 error\n+1 warning\n","filename":"test\/langtools\/tools\/javac\/lint\/LintOptions.out","additions":4,"deletions":0,"binary":false,"changes":4,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -40,1 +40,1 @@\n-    private static final String FLAG_DEBUG_NAME = \"CodeCacheMinimumUseSpace\";\n+    private static final String FLAG_DEBUG_NAME = \"StopInterpreterAt\";\n","filename":"test\/lib-test\/jdk\/test\/whitebox\/vm_flags\/UintxTest.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -82,0 +82,9 @@\n+            \/\/ On some docker implementations e.g. RHEL8 ppc64le we have the following version output:\n+            \/\/    Docker version v25.0.3, build 4debf41\n+            \/\/ Trim potentially leading 'v' and trailing ','\n+            if (versNums.startsWith(\"v\")) {\n+                versNums = versNums.substring(1);\n+            }\n+            int cidx = versNums.indexOf(',');\n+            versNums = (cidx != -1) ? versNums.substring(0, cidx) : versNums;\n+\n@@ -87,1 +96,1 @@\n-            throw new RuntimeException(\"Failed to parse container runtime version: \" + version);\n+            throw new RuntimeException(\"Failed to parse container runtime version: \" + version, e);\n@@ -107,1 +116,1 @@\n-}\n\\ No newline at end of file\n+}\n","filename":"test\/lib\/jdk\/test\/lib\/containers\/docker\/ContainerRuntimeVersionTestUtils.java","additions":11,"deletions":2,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -106,1 +106,1 @@\n-        return WhiteBox.getWhiteBox().getUintxVMFlag(sizeOptionName);\n+        return WhiteBox.getWhiteBox().getSizeTVMFlag(sizeOptionName);\n","filename":"test\/lib\/jdk\/test\/whitebox\/code\/BlobType.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -0,0 +1,77 @@\n+\/*\n+ * Copyright (c) 2025, NVIDIA CORPORATION & AFFILIATES. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package org.openjdk.bench.vm.compiler;\n+\n+import org.openjdk.jmh.annotations.*;\n+\n+import java.util.Objects;\n+import java.util.concurrent.TimeUnit;\n+\n+@Warmup(iterations = 3, time = 1)\n+@Measurement(iterations = 5, time = 1)\n+@BenchmarkMode(Mode.Throughput)\n+@OutputTimeUnit(TimeUnit.SECONDS)\n+@State(Scope.Thread)\n+@Fork(value=3)\n+public class CountedLoopCastIV {\n+    @Param({\"1024\", \"1536\", \"2048\"})\n+    private int limit;\n+\n+    private static final int LEN = 2048;\n+    private int start;\n+    private int[] arr;\n+\n+    @Setup\n+    public void init() {\n+        arr = new int[LEN];\n+        for (int i = 0; i < LEN; i++) {\n+            arr[i] = i;\n+        }\n+\n+        start = 0;\n+        limit = Math.min(limit, LEN - 4);\n+    }\n+\n+    @Benchmark\n+    public void loop_iv_int() {\n+        int i = start;\n+        while (i < limit) {\n+            Objects.checkIndex(i, LEN - 1);\n+            int a = arr[i + 1];\n+            Objects.checkIndex(i, LEN - 3);\n+            arr[i + 3] = a;\n+            i++;\n+        }\n+    }\n+\n+    @Benchmark\n+    public void loop_iv_long() {\n+        for (long i = start; i < limit; i++) {\n+            Objects.checkIndex(i, LEN - 1);\n+            int a = arr[(int)i + 1];\n+            Objects.checkIndex(i, LEN - 3);\n+            arr[(int)i + 3] = a;\n+        }\n+    }\n+}\n","filename":"test\/micro\/org\/openjdk\/bench\/vm\/compiler\/CountedLoopCastIV.java","additions":77,"deletions":0,"binary":false,"changes":77,"status":"added"},{"patch":"@@ -0,0 +1,112 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package org.openjdk.bench.vm.compiler.x86;\n+\n+import org.openjdk.jmh.annotations.*;\n+\n+import java.util.concurrent.TimeUnit;\n+\n+@BenchmarkMode(Mode.AverageTime)\n+@OutputTimeUnit(TimeUnit.NANOSECONDS)\n+@Warmup(iterations = 10, time = 1, timeUnit = TimeUnit.SECONDS)\n+@Measurement(iterations = 10, time = 1, timeUnit = TimeUnit.SECONDS)\n+\/\/ Fix heap size since the StoreN benchmarks are allocating a lot and dependent on GC selection and compressed oop mode.\n+@Fork(value = 3, jvmArgsAppend = {\"-Xms1g\", \"-Xmx1g\"})\n+@State(Scope.Thread)\n+public class RedundantLeaPeephole {\n+    @State(Scope.Thread)\n+    public class StoreNHelper {\n+        Object o1;\n+        Object o2;\n+\n+        public StoreNHelper(Object o1, Object o2) {\n+            this.o1 = o1;\n+            this.o2 = o2;\n+        }\n+    }\n+\n+    @State(Scope.Thread)\n+    public class StringEqualsHelper {\n+        private String str;\n+\n+        public StringEqualsHelper(String str) {\n+            this.str = str;\n+        }\n+\n+        @CompilerControl(CompilerControl.Mode.INLINE)\n+        public boolean doEquals(String other) {\n+            return this.str.equals(other);\n+        }\n+    }\n+\n+    private static final int SIZE = 42;\n+    private static final int SMALL_IDX = 3;\n+    private static final int BIG_IDX = 33;\n+\n+    private static final Object O1 = new Object();\n+    private static final Object O2 = new Object();\n+\n+    private Object[] arr1 = new Object[SIZE];\n+    private Object[] arr2 = new Object[SIZE];\n+    private StoreNHelper[] arrH1 = new StoreNHelper[SIZE];\n+    private StoreNHelper[] arrH2 = new StoreNHelper[SIZE];\n+\n+    private StringEqualsHelper strEqHelper = new StringEqualsHelper(\"foo\");\n+\n+    @Benchmark\n+    @Fork(jvmArgsAppend = {\"-XX:+UseSerialGC\"})\n+    public void benchStoreNRemoveSpillSerial() {\n+        this.arrH1[SMALL_IDX] = new StoreNHelper(O1, O2);\n+        this.arrH2[BIG_IDX] = new StoreNHelper(O2, O1);\n+    }\n+\n+    @Benchmark\n+    @Fork(jvmArgsAppend = {\"-XX:+UseParallelGC\"})\n+    public void benchStoreNRemoveSpillParallel() {\n+        this.arrH1[SMALL_IDX] = new StoreNHelper(O1, O2);\n+        this.arrH2[BIG_IDX] = new StoreNHelper(O2, O1);\n+    }\n+\n+    @Benchmark\n+    @Fork(jvmArgsAppend = {\"-XX:+UseSerialGC\"})\n+    public void benchStoreNNoAllocSerial() {\n+        this.arr1[SMALL_IDX] = O1;\n+        this.arr1[BIG_IDX] = O2;\n+        this.arr2[SMALL_IDX] = O1;\n+        this.arr2[BIG_IDX] = O2;\n+    }\n+\n+    @Benchmark\n+    @Fork(jvmArgsAppend = {\"-XX:+UseParallelGC\"})\n+    public void benchStoreNNoAllocParallel() {\n+        this.arr1[SMALL_IDX] = O1;\n+        this.arr1[BIG_IDX] = O2;\n+        this.arr2[SMALL_IDX] = O1;\n+        this.arr2[BIG_IDX] = O2;\n+    }\n+\n+    @Benchmark\n+    public boolean benchStringEquals() {\n+        return this.strEqHelper.doEquals(\"bar\");\n+    }\n+}\n","filename":"test\/micro\/org\/openjdk\/bench\/vm\/compiler\/x86\/RedundantLeaPeephole.java","additions":112,"deletions":0,"binary":false,"changes":112,"status":"added"}]}