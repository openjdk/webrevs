{"files":[{"patch":"@@ -165,1 +165,1 @@\n-            boolean extraExportsOrOpens = addExtraExportsAndOpens(bootLayer);\n+            addExtraExportsAndOpens(bootLayer);\n@@ -455,1 +455,1 @@\n-        boolean extraExportsOrOpens = addExtraExportsAndOpens(bootLayer);\n+        addExtraExportsAndOpens(bootLayer);\n@@ -725,2 +725,1 @@\n-    private static boolean addExtraExportsAndOpens(ModuleLayer bootLayer) {\n-        boolean extraExportsOrOpens = false;\n+    private static void addExtraExportsAndOpens(ModuleLayer bootLayer) {\n@@ -733,1 +732,0 @@\n-            extraExportsOrOpens = true;\n@@ -742,1 +740,0 @@\n-            extraExportsOrOpens = true;\n@@ -745,1 +742,0 @@\n-        return extraExportsOrOpens;\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/module\/ModuleBootstrap.java","additions":3,"deletions":7,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -61,0 +61,1 @@\n+    private static String addOpensAllUnnamed = \"java.base\/java.lang=ALL-UNNAMED\";\n@@ -64,0 +65,3 @@\n+    private static String expectedOutput[] =\n+        { \"[class,load] com.simple.Main source: shared objects file\",\n+          \"method.setAccessible succeeded!\"};\n@@ -86,1 +90,2 @@\n-        String appClasses[] = {MAIN_CLASS, \"java\/lang\/ClassLoader\"};\n+        String appClasses[] = {MAIN_CLASS};\n+        OutputAnalyzer output;\n@@ -93,5 +98,5 @@\n-            OutputAnalyzer output = TestCommon.createArchive(\n-                                            destJar.toString(), appClasses,\n-                                            extraOpts[i][0], extraOpts[i][1],\n-                                            \"--module-path\", moduleDir.toString(),\n-                                            \"-m\", TEST_MODULE1);\n+            output = TestCommon.createArchive(\n+                             destJar.toString(), appClasses,\n+                             extraOpts[i][0], extraOpts[i][1],\n+                             \"--module-path\", moduleDir.toString(),\n+                             \"-m\", TEST_MODULE1);\n@@ -110,3 +115,1 @@\n-                    .assertNormalExit(\n-                    \"[class,load] com.simple.Main source: shared objects file\",\n-                    \"method.setAccessible succeeded!\");\n+                    .assertNormalExit(expectedOutput[0], expectedOutput[1]);\n@@ -115,0 +118,13 @@\n+        \/\/ Test --add-opens to ALL-UNNAMED modules\n+        output = TestCommon.createArchive(\n+                         destJar.toString(), appClasses,\n+                         \"--add-opens\", addOpensAllUnnamed,\n+                         MAIN_CLASS);\n+        TestCommon.checkDump(output);\n+\n+        TestCommon.run( \"-Xlog:class+load=trace\",\n+                        \"-cp\", destJar.toString(),\n+                        \"--add-opens\", addOpensAllUnnamed,\n+                        MAIN_CLASS, \"with_add_opens\")\n+                .assertNormalExit(expectedOutput[0], expectedOutput[1]);\n+\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/jigsaw\/modulepath\/AddOpens.java","additions":26,"deletions":10,"binary":false,"changes":36,"status":"modified"}]}