{"files":[{"patch":"@@ -28,7 +28,4 @@\n-            and then from outer loop to the inner loop again.\n-            This ended in a endless optimization cycle.\n- *\n- * @run main\/othervm -Xbatch -XX:-PartialPeelLoop -XX:CompileCommand=compileonly,compiler.c2.loopopts.TestSplitThruPhiInfinitely::run* compiler.c2.loopopts.TestSplitThruPhiInfinitely\n-\n-\n-\n+ *          and then from outer loop to the inner loop again.\n+ *          This ended in a endless optimization cycle.\n+ * @library \/test\/lib \/\n+ * @run driver compiler.c2.loopopts.TestSplitThruPhiInfinitely\n@@ -36,0 +33,1 @@\n+\n@@ -38,0 +36,2 @@\n+import compiler.lib.ir_framework.*;\n+\n@@ -42,1 +42,3 @@\n-    public static void run() {\n+    @Test\n+    @IR(counts = {IRNode.PHI, \" <= 10\"})\n+    public static void test() {\n@@ -53,3 +55,1 @@\n-        for (int i = 0; i < 10; i++ ) {\n-            run();\n-        }\n+        TestFramework.runWithFlags(\"-XX:-PartialPeelLoop\");\n","filename":"test\/hotspot\/jtreg\/compiler\/loopopts\/TestSplitThruPhiInfinitely.java","additions":11,"deletions":11,"binary":false,"changes":22,"status":"modified"}]}