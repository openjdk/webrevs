{"files":[{"patch":"@@ -33,1 +33,1 @@\n-include ToolsJdk.gmk\n+include JavaCompilation.gmk\n@@ -125,8 +125,14 @@\n-  RL_CREATE_PLUGIN_MOD_OUTPUT := $(SUPPORT_OUTPUTDIR)\/$(RL_BUILD_MODULE_NAME)\n-  JDK_RUN_TIME_IMAGE_SUPPORT_DIR := $(SUPPORT_OUTPUTDIR)\/images\/runtime-link-support\n-\n-  JLINK_RUNTIME_CREATE_ARG := -J--module-path=$(RL_CREATE_PLUGIN_MOD_OUTPUT)\n-  JLINK_RUNTIME_CREATE_ARG += -J--add-exports=java.base\/jdk.internal.module=$(RL_BUILD_MODULE_NAME)\n-  JLINK_RUNTIME_CREATE_ARG += -J--add-exports=java.base\/jdk.internal.jimage=$(RL_BUILD_MODULE_NAME)\n-  JLINK_RUNTIME_CREATE_ARG += -J--add-exports=jdk.jlink\/jdk.tools.jlink.internal=$(RL_BUILD_MODULE_NAME)\n-  JLINK_RUNTIME_CREATE_ARG += --create-linkable-runtime jimage=$(JDK_LINK_OUTPUT_DIR)\/lib\/modules:module-path=$(IMAGES_OUTPUTDIR)\/jmods\n+  RL_CREATE_PLUGIN_MOD_OUTPUT := $(BUILDTOOLS_OUTPUTDIR)\/$(RL_BUILD_MODULE_NAME)\n+  JDK_RUNTIME_IMAGE_SUPPORT_DIR := $(SUPPORT_OUTPUTDIR)\/images\/runtime-link-support\n+\n+  # We need to use FixPath for correct path handling on Windows. Avoid space\n+  # in FixPath call in order to avoid needing to use strip.\n+  RL_JIMAGE_PATH_ARG := $(call FixPath,$(JDK_LINK_OUTPUT_DIR)\/lib\/modules)\n+  RL_MOD_PATH_ARG := $(call FixPath,$(IMAGES_OUTPUTDIR)\/jmods)\n+  JLINK_RUNTIME_CREATE_ARG := \\\n+      -J--module-path=$(RL_CREATE_PLUGIN_MOD_OUTPUT) \\\n+      -J--add-exports=java.base\/jdk.internal.module=$(RL_BUILD_MODULE_NAME) \\\n+      -J--add-exports=java.base\/jdk.internal.jimage=$(RL_BUILD_MODULE_NAME) \\\n+      -J--add-exports=jdk.jlink\/jdk.tools.jlink.internal=$(RL_BUILD_MODULE_NAME) \\\n+      --create-linkable-runtime jimage=$(RL_JIMAGE_PATH_ARG):module-path=$(RL_MOD_PATH_ARG) \\\n+  #\n@@ -153,1 +159,1 @@\n-      SUPPORT_DIR := $(JDK_RUN_TIME_IMAGE_SUPPORT_DIR), \\\n+      SUPPORT_DIR := $(JDK_RUNTIME_IMAGE_SUPPORT_DIR), \\\n","filename":"make\/Images.gmk","additions":16,"deletions":10,"binary":false,"changes":26,"status":"modified"}]}