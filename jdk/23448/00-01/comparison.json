{"files":[{"patch":"@@ -48,0 +48,2 @@\n+import java.util.ArrayList;\n+import java.util.Collections;\n@@ -85,2 +87,6 @@\n-        expectSunapi(true, false, \"-XDrawDiagnostics\");\n-        expectSunapi(true, false, \"-XDrawDiagnostics\", \"--system\", System.getProperty(\"java.home\"));\n+        expectSunapi(false);\n+        expectSunapi(false, \"--system\", System.getProperty(\"java.home\"));\n+        expectSunapi(false, \"--release\", String.valueOf(Runtime.version().feature()));\n+        expectSunapi(false, \"--release\", String.valueOf(Runtime.version().feature() - 1));\n+        expectSunapi(true, \"--release\", String.valueOf(Runtime.version().feature()));\n+        expectSunapi(true, \"--release\", String.valueOf(Runtime.version().feature() - 1));\n@@ -89,1 +95,1 @@\n-        expectSunapi(false, false, \"-XDrawDiagnostics\", \"--system\", system.toString());\n+        expectNoSunapi(false, \"--system\", system.toString());\n@@ -92,3 +98,11 @@\n-        expectSunapi(false, true, \"-XDrawDiagnostics\");\n-        expectSunapi(false, true, \"-XDrawDiagnostics\", \"--system\", System.getProperty(\"java.home\"));\n-        expectSunapi(false, true, \"-XDrawDiagnostics\", \"--system\", system.toString());\n+        expectNoSunapi(true);\n+        expectNoSunapi(true, \"--system\", System.getProperty(\"java.home\"));\n+        expectNoSunapi(true, \"--system\", system.toString());\n+    }\n+\n+    private void expectSunapi(boolean ignoreSymbolFile, String... options) throws IOException {\n+        expectSunapi(true, ignoreSymbolFile, options);\n+    }\n+\n+    private void expectNoSunapi(boolean ignoreSymbolFile, String... options) throws IOException {\n+        expectSunapi(false, ignoreSymbolFile, options);\n@@ -105,0 +119,3 @@\n+        List<String> allOptions = new ArrayList<>();\n+        allOptions.add(\"-XDrawDiagnostics\");\n+        Collections.addAll(allOptions, options);\n@@ -110,1 +127,1 @@\n-                        .options(options)\n+                        .options(allOptions)\n","filename":"test\/langtools\/tools\/javac\/options\/system\/SystemSunProprietary.java","additions":24,"deletions":7,"binary":false,"changes":31,"status":"modified"}]}