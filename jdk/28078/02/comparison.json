{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1995, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1995, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -132,2 +132,2 @@\n-     * This method blocks until all the bytes are written to the output\n-     * stream.\n+     * If {@code len} is not zero, this method blocks until all the\n+     * bytes are written to the output stream.\n@@ -138,0 +138,1 @@\n+     * @throws  IndexOutOfBoundsException {@inheritDoc}\n@@ -140,2 +141,2 @@\n-     *          closed, or if an I\/O error occurs.\n-     * @throws  IndexOutOfBoundsException {@inheritDoc}\n+     *          closed and {@code len} is greater than zero,\n+     *          or if an I\/O error occurs.\n","filename":"src\/java.base\/share\/classes\/java\/io\/PipedOutputStream.java","additions":6,"deletions":5,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -25,6 +25,3 @@\n-   @bug 4143704\n-   @summary Test if write throws exception after reader\n-            closes the pipe.\n-*\/\n-\n-\n+ * @bug 4143704 8367943\n+ * @summary Test if write throws exception after reader closes the pipe.\n+ *\/\n@@ -32,1 +29,3 @@\n-import java.io.*;\n+import java.io.IOException;\n+import java.io.PipedInputStream;\n+import java.io.PipedOutputStream;\n@@ -36,2 +35,9 @@\n-        PipedInputStream in = new PipedInputStream();\n-        PipedOutputStream out = new PipedOutputStream(in);\n+        try (PipedInputStream in = new PipedInputStream();\n+             PipedOutputStream out = new PipedOutputStream(in)) {\n+            in.close();\n+            try {\n+                out.write('a');\n+                throw new Exception(\"Should not allow write after close\");\n+            } catch (IOException e) {\n+            }\n+        }\n@@ -39,5 +45,8 @@\n-        in.close();\n-        try {\n-            out.write('a');\n-            throw new Exception(\"Should not allow write after close\");\n-        } catch (IOException e) {\n+        try (PipedInputStream in = new PipedInputStream();\n+             PipedOutputStream out = new PipedOutputStream(in)) {\n+            out.close();\n+            try {\n+                out.write(new byte[7], 3, 0);\n+            } catch (IOException e) {\n+                throw new Exception(\"Should not fail 0-length write after close\");\n+            }\n","filename":"test\/jdk\/java\/io\/PipedOutputStream\/WriteAfterClose.java","additions":24,"deletions":15,"binary":false,"changes":39,"status":"modified"}]}