{"files":[{"patch":"@@ -851,2 +851,1 @@\n-                public ByteBuffer newDirectByteBuffer(int cap) {\n-                    long addr = UNSAFE.allocateMemory(cap);\n+                public ByteBuffer newDirectByteBuffer(long addr, int cap) {\n","filename":"src\/java.base\/share\/classes\/java\/nio\/Buffer.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -73,1 +73,1 @@\n-    ByteBuffer newDirectByteBuffer(int cap);\n+    ByteBuffer newDirectByteBuffer(long addr, int cap);\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/access\/JavaNioAccess.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -228,1 +228,2 @@\n-            return NIO_ACCESS.newDirectByteBuffer(size);\n+            long addr = unsafe.allocateMemory(size);\n+            return NIO_ACCESS.newDirectByteBuffer(addr, size);\n@@ -243,1 +244,2 @@\n-            return NIO_ACCESS.newDirectByteBuffer(size);\n+            long addr = unsafe.allocateMemory(size);\n+            return NIO_ACCESS.newDirectByteBuffer(addr, size);\n@@ -254,2 +256,2 @@\n-            return NIO_ACCESS.newDirectByteBuffer(size + alignment - 1)\n-                    .alignedSlice(alignment);\n+            return getTemporaryDirectBuffer(size + alignment - 1)\n+                .alignedSlice(alignment);\n@@ -270,2 +272,2 @@\n-        return NIO_ACCESS.newDirectByteBuffer(size + alignment - 1)\n-                .alignedSlice(alignment);\n+        return getTemporaryDirectBuffer(size + alignment - 1)\n+            .alignedSlice(alignment);\n","filename":"src\/java.base\/share\/classes\/sun\/nio\/ch\/Util.java","additions":8,"deletions":6,"binary":false,"changes":14,"status":"modified"}]}