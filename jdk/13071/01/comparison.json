{"files":[{"patch":"@@ -73,1 +73,0 @@\n-    ciEnv::current()->record_failure(\"CodeCache is full\");\n","filename":"src\/hotspot\/cpu\/aarch64\/codeBuffer_aarch64.cpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -31,3 +31,1 @@\n-    if (_finalize_stubs) {\n-      Unimplemented();\n-    }\n+    Unimplemented();\n","filename":"src\/hotspot\/cpu\/arm\/codeBuffer_arm.hpp","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -32,3 +32,1 @@\n-    if (_finalize_stubs) {\n-      Unimplemented();\n-    }\n+    Unimplemented();\n","filename":"src\/hotspot\/cpu\/ppc\/codeBuffer_ppc.hpp","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -75,1 +75,0 @@\n-    ciEnv::current()->record_failure(\"CodeCache is full\");\n","filename":"src\/hotspot\/cpu\/riscv\/codeBuffer_riscv.cpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -32,3 +32,1 @@\n-    if (_finalize_stubs) {\n-      Unimplemented();\n-    }\n+    Unimplemented();\n","filename":"src\/hotspot\/cpu\/s390\/codeBuffer_s390.hpp","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -32,3 +32,1 @@\n-    if (_finalize_stubs) {\n-      Unimplemented();\n-    }\n+    Unimplemented();\n","filename":"src\/hotspot\/cpu\/zero\/codeBuffer_zero.hpp","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1012,3 +1012,4 @@\n-void CodeBuffer::finalize_stubs() {\n-  if (!pd_finalize_stubs()) {\n-    return;\n+bool CodeBuffer::finalize_stubs() {\n+  if (_finalize_stubs && !pd_finalize_stubs()) {\n+    \/\/ stub allocation failure\n+    return false;\n@@ -1017,0 +1018,1 @@\n+  return true;\n","filename":"src\/hotspot\/share\/asm\/codeBuffer.cpp","additions":5,"deletions":3,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -718,1 +718,1 @@\n-  void finalize_stubs();\n+  bool finalize_stubs();\n","filename":"src\/hotspot\/share\/asm\/codeBuffer.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -53,1 +53,0 @@\n-      ciEnv::current()->record_failure(\"CodeCache is full\");\n","filename":"src\/hotspot\/share\/asm\/codeBuffer.inline.hpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -289,0 +289,5 @@\n+  if (!code()->finalize_stubs()) {\n+    bailout(\"CodeCache is full\");\n+    return;\n+  }\n+\n","filename":"src\/hotspot\/share\/c1\/c1_Compilation.cpp","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -1115,4 +1115,0 @@\n-    if (!failing()) {\n-      code_buffer->finalize_stubs();\n-    }\n-\n","filename":"src\/hotspot\/share\/ci\/ciEnv.cpp","additions":0,"deletions":4,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1749,0 +1749,5 @@\n+  if (!cb->finalize_stubs()) {\n+    C->record_failure(\"CodeCache is full\");\n+    return;\n+  }\n+\n","filename":"src\/hotspot\/share\/opto\/output.cpp","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"}]}