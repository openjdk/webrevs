{"files":[{"patch":"@@ -52,0 +52,1 @@\n+\n@@ -55,0 +56,1 @@\n+\n@@ -60,4 +62,5 @@\n-        Robot robot = new Robot();\n-        SwingUtilities.invokeAndWait(() -> createTestUI());\n-        robot.waitForIdle();\n-        robot.delay(250);\n+        try {\n+            Robot robot = new Robot();\n+            SwingUtilities.invokeAndWait(() -> createTestUI());\n+            robot.waitForIdle();\n+            robot.delay(250);\n@@ -65,7 +68,7 @@\n-        \/\/ enter some text in combo box\n-        robot.keyPress(KeyEvent.VK_A);\n-        robot.keyRelease(KeyEvent.VK_A);\n-        robot.keyPress(KeyEvent.VK_A);\n-        robot.keyRelease(KeyEvent.VK_A);\n-        robot.waitForIdle();\n-        robot.delay(250);\n+            \/\/ enter some text in combo box\n+            robot.keyPress(KeyEvent.VK_A);\n+            robot.keyRelease(KeyEvent.VK_A);\n+            robot.keyPress(KeyEvent.VK_A);\n+            robot.keyRelease(KeyEvent.VK_A);\n+            robot.waitForIdle();\n+            robot.delay(250);\n@@ -73,4 +76,4 @@\n-        \/\/ find and click action button\n-        SwingUtilities.invokeAndWait(() -> loc = btnAction.getLocationOnScreen());\n-        robot.waitForIdle();\n-        robot.delay(250);\n+            \/\/ find and click action button\n+            SwingUtilities.invokeAndWait(() -> loc = btnAction.getLocationOnScreen());\n+            robot.waitForIdle();\n+            robot.delay(250);\n@@ -78,9 +81,5 @@\n-        robot.mouseMove(loc.x, loc.y);\n-        robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n-        robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n-        robot.waitForIdle();\n-        robot.delay(250);\n-\n-        if (frame != null) {\n-            SwingUtilities.invokeAndWait(() -> frame.dispose());\n-        }\n+            robot.mouseMove(loc.x, loc.y);\n+            robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n+            robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n+            robot.waitForIdle();\n+            robot.delay(250);\n@@ -88,2 +87,9 @@\n-        if (!passed()) {\n-            throw new Error(\"Failed: button action was not fired\");\n+            if (!passed()) {\n+                throw new RuntimeException(\"Failed: button action was not fired\");\n+            }\n+        } finally {\n+            SwingUtilities.invokeAndWait(() -> {\n+                if (frame != null) {\n+                    frame.dispose();\n+                }\n+            });\n","filename":"test\/jdk\/javax\/swing\/JComboBox\/bug4530952.java","additions":32,"deletions":26,"binary":false,"changes":58,"status":"modified"}]}