{"files":[{"patch":"@@ -34,1 +34,1 @@\n- * @requires vm.debug == true & vm.flagless & vm.bits == 64 & vm.compiler2.enabled & vm.opt.final.EliminateAllocations\n+ * @requires vm.debug == true & vm.compiler2.enabled\n@@ -152,1 +152,4 @@\n-    @IR(counts = { IRNode.ALLOC, \">=1\", IRNode.SAFEPOINT_SCALAR_MERGE, \">=1\"}, phase = CompilePhase.ITER_GVN_AFTER_EA)\n+    @IR(counts = { IRNode.ALLOC, \">=1\", IRNode.SAFEPOINT_SCALAR_MERGE, \">=1\"},\n+        phase = CompilePhase.ITER_GVN_AFTER_EA,\n+        applyIfPlatform = {\"64-bit\", \"true\"},\n+        applyIf = {\"EliminateAllocations\", \"true\"})\n@@ -175,1 +178,4 @@\n-    @IR(counts = { IRNode.ALLOC, \">=1\", IRNode.SAFEPOINT_SCALAR_MERGE, \">=1\",  IRNode.SAFEPOINT_SCALAR_OBJECT, \">=2\"}, phase = CompilePhase.ITER_GVN_AFTER_EA)\n+    @IR(counts = { IRNode.ALLOC, \">=1\", IRNode.SAFEPOINT_SCALAR_MERGE, \">=1\",  IRNode.SAFEPOINT_SCALAR_OBJECT, \">=2\"},\n+        phase = CompilePhase.ITER_GVN_AFTER_EA,\n+        applyIfPlatform = {\"64-bit\", \"true\"},\n+        applyIf = {\"EliminateAllocations\", \"true\"})\n@@ -202,1 +208,4 @@\n-    @IR(counts = { IRNode.ALLOC, \">=2\"}, phase = CompilePhase.ITER_GVN_AFTER_EA)\n+    @IR(counts = { IRNode.ALLOC, \">=2\"},\n+        phase = CompilePhase.ITER_GVN_AFTER_EA,\n+        applyIfPlatform = {\"64-bit\", \"true\"},\n+        applyIf = {\"EliminateAllocations\", \"true\"})\n@@ -235,1 +244,4 @@\n-    @IR(counts = { IRNode.ALLOC, \">=1\", IRNode.SAFEPOINT_SCALAR_MERGE, \">=1\", IRNode.SAFEPOINT_SCALAR_OBJECT, \">=2\"}, phase= CompilePhase.ITER_GVN_AFTER_EA)\n+    @IR(counts = { IRNode.ALLOC, \">=1\", IRNode.SAFEPOINT_SCALAR_MERGE, \">=1\", IRNode.SAFEPOINT_SCALAR_OBJECT, \">=2\"},\n+        phase= CompilePhase.ITER_GVN_AFTER_EA,\n+        applyIfPlatform = {\"64-bit\", \"true\"},\n+        applyIf = {\"EliminateAllocations\", \"true\"})\n@@ -267,1 +279,4 @@\n-    @IR(counts = { IRNode.ALLOC, \">=4\"}, phase= CompilePhase.ITER_GVN_AFTER_EA)\n+    @IR(counts = { IRNode.ALLOC, \">=4\"},\n+        phase= CompilePhase.ITER_GVN_AFTER_EA,\n+        applyIfPlatform = {\"64-bit\", \"true\"},\n+        applyIf = {\"EliminateAllocations\", \"true\"})\n@@ -309,1 +324,4 @@\n-    @IR(counts = { IRNode.ALLOC, \">=1\"}, phase= CompilePhase.ITER_GVN_AFTER_EA)\n+    @IR(counts = { IRNode.ALLOC, \">=1\"},\n+        phase= CompilePhase.ITER_GVN_AFTER_EA,\n+        applyIfPlatform = {\"64-bit\", \"true\"},\n+        applyIf = {\"EliminateAllocations\", \"true\"})\n@@ -328,2 +346,8 @@\n-    @IR(counts = { IRNode.ALLOC, \"3\" }, phase = CompilePhase.PHASEIDEAL_BEFORE_EA)\n-    @IR(counts = { IRNode.ALLOC, \"0\" }, phase = CompilePhase.ITER_GVN_AFTER_ELIMINATION)\n+    @IR(counts = { IRNode.ALLOC, \"3\" },\n+        phase = CompilePhase.PHASEIDEAL_BEFORE_EA,\n+        applyIfPlatform = {\"64-bit\", \"true\"},\n+        applyIf = {\"EliminateAllocations\", \"true\"})\n+    @IR(counts = { IRNode.ALLOC, \"0\" },\n+        phase = CompilePhase.ITER_GVN_AFTER_ELIMINATION,\n+        applyIfPlatform = {\"64-bit\", \"true\"},\n+        applyIf = {\"EliminateAllocations\", \"true\"})\n@@ -345,2 +369,8 @@\n-    @IR(counts = { IRNode.ALLOC, \"3\" }, phase = CompilePhase.PHASEIDEAL_BEFORE_EA)\n-    @IR(counts = { IRNode.ALLOC, \"2\" }, phase = CompilePhase.ITER_GVN_AFTER_ELIMINATION)\n+    @IR(counts = { IRNode.ALLOC, \"3\" },\n+        phase = CompilePhase.PHASEIDEAL_BEFORE_EA,\n+        applyIfPlatform = {\"64-bit\", \"true\"},\n+        applyIf = {\"EliminateAllocations\", \"true\"})\n+    @IR(counts = { IRNode.ALLOC, \"2\" },\n+        phase = CompilePhase.ITER_GVN_AFTER_ELIMINATION,\n+        applyIfPlatform = {\"64-bit\", \"true\"},\n+        applyIf = {\"EliminateAllocations\", \"true\"})\n@@ -375,2 +405,8 @@\n-    @IR(counts = { IRNode.ALLOC, \"2\" }, phase = CompilePhase.PHASEIDEAL_BEFORE_EA)\n-    @IR(counts = { IRNode.ALLOC, \"0\" }, phase = CompilePhase.ITER_GVN_AFTER_ELIMINATION)\n+    @IR(counts = { IRNode.ALLOC, \"2\" },\n+        phase = CompilePhase.PHASEIDEAL_BEFORE_EA,\n+        applyIfPlatform = {\"64-bit\", \"true\"},\n+        applyIf = {\"EliminateAllocations\", \"true\"})\n+    @IR(counts = { IRNode.ALLOC, \"0\" },\n+        phase = CompilePhase.ITER_GVN_AFTER_ELIMINATION,\n+        applyIfPlatform = {\"64-bit\", \"true\"},\n+        applyIf = {\"EliminateAllocations\", \"true\"})\n@@ -399,2 +435,8 @@\n-    @IR(counts = { IRNode.ALLOC, \"2\" }, phase = CompilePhase.PHASEIDEAL_BEFORE_EA)\n-    @IR(counts = { IRNode.ALLOC, \"0\" }, phase = CompilePhase.ITER_GVN_AFTER_ELIMINATION)\n+    @IR(counts = { IRNode.ALLOC, \"2\" },\n+        phase = CompilePhase.PHASEIDEAL_BEFORE_EA,\n+        applyIfPlatform = {\"64-bit\", \"true\"},\n+        applyIf = {\"EliminateAllocations\", \"true\"})\n+    @IR(counts = { IRNode.ALLOC, \"0\" },\n+        phase = CompilePhase.ITER_GVN_AFTER_ELIMINATION,\n+        applyIfPlatform = {\"64-bit\", \"true\"},\n+        applyIf = {\"EliminateAllocations\", \"true\"})\n@@ -424,2 +466,8 @@\n-    @IR(counts = { IRNode.ALLOC, \"3\" }, phase = CompilePhase.PHASEIDEAL_BEFORE_EA)\n-    @IR(counts = { IRNode.ALLOC, \"0\" }, phase = CompilePhase.ITER_GVN_AFTER_ELIMINATION)\n+    @IR(counts = { IRNode.ALLOC, \"3\" },\n+        phase = CompilePhase.PHASEIDEAL_BEFORE_EA,\n+        applyIfPlatform = {\"64-bit\", \"true\"},\n+        applyIf = {\"EliminateAllocations\", \"true\"})\n+    @IR(counts = { IRNode.ALLOC, \"0\" },\n+        phase = CompilePhase.ITER_GVN_AFTER_ELIMINATION,\n+        applyIfPlatform = {\"64-bit\", \"true\"},\n+        applyIf = {\"EliminateAllocations\", \"true\"})\n@@ -452,2 +500,8 @@\n-    @IR(counts = { IRNode.ALLOC, \"3\" }, phase = CompilePhase.PHASEIDEAL_BEFORE_EA)\n-    @IR(counts = { IRNode.ALLOC, \"0\" }, phase = CompilePhase.ITER_GVN_AFTER_ELIMINATION)\n+    @IR(counts = { IRNode.ALLOC, \"3\" },\n+        phase = CompilePhase.PHASEIDEAL_BEFORE_EA,\n+        applyIfPlatform = {\"64-bit\", \"true\"},\n+        applyIf = {\"EliminateAllocations\", \"true\"})\n+    @IR(counts = { IRNode.ALLOC, \"0\" },\n+        phase = CompilePhase.ITER_GVN_AFTER_ELIMINATION,\n+        applyIfPlatform = {\"64-bit\", \"true\"},\n+        applyIf = {\"EliminateAllocations\", \"true\"})\n@@ -473,2 +527,8 @@\n-    @IR(counts = { IRNode.ALLOC, \"3\" }, phase = CompilePhase.PHASEIDEAL_BEFORE_EA)\n-    @IR(counts = { IRNode.ALLOC, \"2\" }, phase = CompilePhase.ITER_GVN_AFTER_ELIMINATION)\n+    @IR(counts = { IRNode.ALLOC, \"3\" },\n+        phase = CompilePhase.PHASEIDEAL_BEFORE_EA,\n+        applyIfPlatform = {\"64-bit\", \"true\"},\n+        applyIf = {\"EliminateAllocations\", \"true\"})\n+    @IR(counts = { IRNode.ALLOC, \"2\" },\n+        phase = CompilePhase.ITER_GVN_AFTER_ELIMINATION,\n+        applyIfPlatform = {\"64-bit\", \"true\"},\n+        applyIf = {\"EliminateAllocations\", \"true\"})\n@@ -497,2 +557,8 @@\n-    @IR(counts = { IRNode.ALLOC, \"4\" }, phase = CompilePhase.PHASEIDEAL_BEFORE_EA)\n-    @IR(counts = { IRNode.ALLOC, \"0\" }, phase = CompilePhase.ITER_GVN_AFTER_ELIMINATION)\n+    @IR(counts = { IRNode.ALLOC, \"4\" },\n+        phase = CompilePhase.PHASEIDEAL_BEFORE_EA,\n+        applyIfPlatform = {\"64-bit\", \"true\"},\n+        applyIf = {\"EliminateAllocations\", \"true\"})\n+    @IR(counts = { IRNode.ALLOC, \"0\" },\n+        phase = CompilePhase.ITER_GVN_AFTER_ELIMINATION,\n+        applyIfPlatform = {\"64-bit\", \"true\"},\n+        applyIf = {\"EliminateAllocations\", \"true\"})\n","filename":"test\/hotspot\/jtreg\/compiler\/c2\/irTests\/scalarReplacement\/AllocationMergesNestedPhiTests.java","additions":89,"deletions":23,"binary":false,"changes":112,"status":"modified"}]}