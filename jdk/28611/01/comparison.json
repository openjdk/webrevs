{"files":[{"patch":"@@ -177,0 +177,1 @@\n+    \/\/ The default value for the Quic maxInitialTimeout, in seconds. Will be clamped to [1, Integer.MAX_vALUE]\n@@ -180,0 +181,2 @@\n+    \/\/ The default value for the initial_max_data transport parameter that a QuicConnectionImpl\n+    \/\/ will send to its peer, if no value is provided by the higher level protocol.\n@@ -183,0 +186,3 @@\n+    \/\/ The default value for the initial_max_stream_data_bidi_local, initial_max_stream_data_bidi_remote,\n+    \/\/ and initial_max_stream_data_uni transport parameters that a QuicConnectionImpl\n+    \/\/ will send to its peer, if no value is provided by the higher level protocol.\n@@ -186,0 +192,4 @@\n+    \/\/ The default value for the initial_max_streams_bidi transport parameter that a QuicConnectionImpl\n+    \/\/ will send to its peer, if no value is provided by the higher level protocol.\n+    \/\/ The Http3ClientImpl typically provides a value of 0, so this property has no effect\n+    \/\/ on QuicConnectionImpl instances created on behalf of the HTTP\/3 client\n@@ -187,1 +197,3 @@\n-            Utils.getIntegerProperty(\"jdk.httpclient.quic.maxBidiStreams\", 100);\n+            Utils.getIntegerProperty(\"jdk.internal.httpclient.quic.maxBidiStreams\", 100);\n+    \/\/ The default value for the initial_max_streams_uni transport parameter that a QuicConnectionImpl\n+    \/\/ will send to its peer, if no value is provided by the higher level protocol.\n","filename":"src\/java.net.http\/share\/classes\/jdk\/internal\/net\/http\/quic\/QuicConnectionImpl.java","additions":13,"deletions":1,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -40,1 +40,1 @@\n- *                     -Djdk.httpclient.quic.maxBidiStreams=2\n+ *                     -Djdk.internal.httpclient.quic.maxBidiStreams=2\n@@ -64,1 +64,1 @@\n- *                     -Djdk.httpclient.quic.maxBidiStreams=2\n+ *                     -Djdk.internal.httpclient.quic.maxBidiStreams=2\n@@ -88,1 +88,1 @@\n- *                     -Djdk.httpclient.quic.maxBidiStreams=2\n+ *                     -Djdk.internal.httpclient.quic.maxBidiStreams=2\n@@ -112,1 +112,1 @@\n- *                     -Djdk.httpclient.quic.maxBidiStreams=2\n+ *                     -Djdk.internal.httpclient.quic.maxBidiStreams=2\n@@ -242,1 +242,1 @@\n-            int maxBidiStreams = Utils.getIntegerNetProperty(\"jdk.httpclient.quic.maxBidiStreams\", 100);\n+            int maxBidiStreams = Utils.getIntegerNetProperty(\"jdk.internal.httpclient.quic.maxBidiStreams\", 100);\n","filename":"test\/jdk\/java\/net\/httpclient\/http3\/H3MultipleConnectionsToSameHost.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -26,0 +26,18 @@\n+ * @summary this test verifies that the correct connection is\n+ *          used when a request is retried on a new connection\n+ *          due to stream limit reached.\n+ *          The maxBidiStreams limit is artificially set to 1.\n+ *          This configuration uses the default wait for a stream\n+ *          to become available before retrying.\n+ *          Different configurations are tested if possible,\n+ *          with both HTTP\/3 only and HTTP\/2 HTTP\/3 with altsvc.\n+ *          In one case the HTTP\/3 only server will be listening\n+ *          on the same port as the HTTP\/2 server, with the\n+ *          HTTP\/2 server advertising an AltService on a different\n+ *          port. In another case the AltService will be on the\n+ *          same port as the HTTP\/2 server and the HTTP\/3 server\n+ *          will be on a different port. In all case, the test\n+ *          verifies that the right connection is picked up\n+ *          for the retry.\n+ * @bug 8372951\n+ * @comment this test also tests bug 8372951\n@@ -33,1 +51,1 @@\n- *                     -Djdk.httpclient.quic.maxBidiStreams=1\n+ *                     -Djdk.internal.httpclient.quic.maxBidiStreams=1\n@@ -39,0 +57,18 @@\n+ * @summary this test verifies that the correct connection is\n+ *          used when a request is retried on a new connection\n+ *          due to stream limit reached.\n+ *          The maxBidiStreams limit is artificially set to 1.\n+ *          This configuration retries immediately on a new\n+ *          connection when no stream is available.\n+ *          Different configurations are tested if possible,\n+ *          with both HTTP\/3 only and HTTP\/2 HTTP\/3 with altsvc.\n+ *          In one case the HTTP\/3 only server will be listening\n+ *          on the same port as the HTTP\/2 server, with the\n+ *          HTTP\/2 server advertising an AltService on a different\n+ *          port. In another case the AltService will be on the\n+ *          same port as the HTTP\/2 server and the HTTP\/3 server\n+ *          will be on a different port. In all case, the test\n+ *          verifies that the right connection is picked up\n+ *          for the retry.\n+ * @bug 8372951\n+ * @comment this test also tests bug 8372951\n@@ -46,1 +82,1 @@\n- *                     -Djdk.httpclient.quic.maxBidiStreams=1\n+ *                     -Djdk.internal.httpclient.quic.maxBidiStreams=1\n@@ -96,1 +132,1 @@\n-    private static final String CLASS_NAME = H3ConnectionPoolTest.class.getSimpleName();\n+    private static final String CLASS_NAME = H3StreamLimitReachedTest.class.getSimpleName();\n","filename":"test\/jdk\/java\/net\/httpclient\/http3\/H3StreamLimitReachedTest.java","additions":39,"deletions":3,"binary":false,"changes":42,"status":"modified"},{"patch":"@@ -59,1 +59,4 @@\n- *          then HTTP3 requests are retried on newer connection\n+ *          then HTTP3 requests are retried on newer connection.\n+ *          This test uses an HTTP\/3 only test server, which is\n+ *          configured to allow the test to control when a new\n+ *          MAX_STREAMS frames is sent to the client.\n","filename":"test\/jdk\/java\/net\/httpclient\/http3\/StreamLimitTest.java","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"}]}