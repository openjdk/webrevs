{"files":[{"patch":"@@ -38,0 +38,2 @@\n+import java.util.concurrent.ThreadFactory;\n+import java.util.concurrent.ThreadLocalRandom;\n@@ -77,1 +79,4 @@\n-        var pthread = Thread.ofPlatform().start(() -> {\n+\n+        ThreadFactory factory = ThreadLocalRandom.current().nextBoolean()\n+                    ? Thread.ofPlatform().factory() : Thread.ofVirtual().factory();\n+        var notifier = factory.newThread(() -> {\n@@ -86,0 +91,1 @@\n+        notifier.start();\n@@ -88,1 +94,1 @@\n-        pthread.join();\n+        notifier.join();\n@@ -99,1 +105,1 @@\n-        Thread vthread1 = Thread.startVirtualThread(() -> {\n+        var vthread = Thread.startVirtualThread(() -> {\n@@ -113,3 +119,3 @@\n-        \/\/ We tested with a platform thread in race1. Here we\n-        \/\/ use a vthread to exercise different timing behavior.\n-        Thread vthread2 = Thread.startVirtualThread(() -> {\n+        ThreadFactory factory = ThreadLocalRandom.current().nextBoolean()\n+                    ? Thread.ofPlatform().factory() : Thread.ofVirtual().factory();\n+        var notifier = factory.newThread(() -> {\n@@ -123,0 +129,1 @@\n+        notifier.start();\n@@ -124,2 +131,2 @@\n-        vthread1.join();\n-        vthread2.join();\n+        vthread.join();\n+        notifier.join();\n","filename":"test\/jdk\/java\/lang\/Thread\/virtual\/stress\/NotifiedThenTimedOutWait.java","additions":15,"deletions":8,"binary":false,"changes":23,"status":"modified"}]}