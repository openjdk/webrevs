{"files":[{"patch":"@@ -2576,1 +2576,6 @@\n-  int threads_per_package = threads_per_core() * cores_per_cpu();\n+  int threads_per_package = _cpuid_info.tpl_cpuidB1_ebx.bits.logical_cpus;\n+  if (threads_per_package == 0) {\n+    \/\/ Fallback code to avoid div by zero in subsequent code.\n+    \/\/ CPUID 0Bh (ECX = 1) might return 0 on older AMD processor (EPYC 7763 at least)\n+    threads_per_package = threads_per_core() * cores_per_cpu();\n+  }\n@@ -2588,2 +2593,3 @@\n-  \/\/ estimate the number of cores\n-  _no_of_cores = cores_per_cpu() * _no_of_sockets;\n+  \/\/ estimate the number of cores.\n+  \/\/ 0 if hybrid CPU because it is difficult to derive number of cores.\n+  _no_of_cores = supports_hybrid() ? 0 : (cores_per_cpu() * _no_of_sockets);\n@@ -2730,0 +2736,4 @@\n+  if (supports_hybrid()) {\n+      WRITE_TO_BUF(\"Hybrid Architecture\");\n+  }\n+\n","filename":"src\/hotspot\/cpu\/x86\/vm_version_x86.cpp","additions":13,"deletions":3,"binary":false,"changes":16,"status":"modified"}]}