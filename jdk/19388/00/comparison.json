{"files":[{"patch":"@@ -34,2 +34,1 @@\n-class ParMarkBitMap: public CHeapObj<mtGC>\n-{\n+class ParMarkBitMap: public CHeapObj<mtGC> {\n@@ -49,3 +48,0 @@\n-  \/\/ Traditional interface for testing whether an object is marked or not (these\n-  \/\/ test only the begin bits).\n-  inline bool is_marked(idx_t bit)      const;\n@@ -60,4 +56,0 @@\n-  \/\/ Convert a heap address to\/from a bit index.\n-  inline idx_t     addr_to_bit(HeapWord* addr) const;\n-  inline HeapWord* bit_to_addr(idx_t bit) const;\n-\n@@ -69,3 +61,2 @@\n-  \/\/ Clear a range of bits or the entire bitmap (both begin and end bits are\n-  \/\/ cleared).\n-  inline void clear_range(idx_t beg, idx_t end);\n+  \/\/ Clear a range of bits corresponding to heap address range [beg, end).\n+  inline void clear_range(HeapWord* beg, HeapWord* end);\n@@ -114,0 +105,4 @@\n+  \/\/ Convert a heap address to\/from a bit index.\n+  inline idx_t     addr_to_bit(HeapWord* addr) const;\n+  inline HeapWord* bit_to_addr(idx_t bit) const;\n+\n","filename":"src\/hotspot\/share\/gc\/parallel\/parMarkBitMap.hpp","additions":7,"deletions":12,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -37,2 +37,4 @@\n-inline void ParMarkBitMap::clear_range(idx_t beg, idx_t end) {\n-  _beg_bits.clear_range(beg, end);\n+inline void ParMarkBitMap::clear_range(HeapWord* beg, HeapWord* end) {\n+  const idx_t beg_bit = addr_to_bit(beg);\n+  const idx_t end_bit = addr_to_bit(end);\n+  _beg_bits.clear_range(beg_bit, end_bit);\n@@ -65,4 +67,0 @@\n-inline bool ParMarkBitMap::is_marked(idx_t bit) const {\n-  return _beg_bits.at(bit);\n-}\n-\n@@ -70,1 +68,1 @@\n-  return is_marked(addr_to_bit(addr));\n+  return _beg_bits.at(addr_to_bit(addr));\n","filename":"src\/hotspot\/share\/gc\/parallel\/parMarkBitMap.inline.hpp","additions":5,"deletions":7,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -829,3 +829,1 @@\n-  const idx_t beg_bit = _mark_bitmap.addr_to_bit(bot);\n-  const idx_t end_bit = _mark_bitmap.addr_to_bit(top);\n-  _mark_bitmap.clear_range(beg_bit, end_bit);\n+  _mark_bitmap.clear_range(bot, top);\n@@ -1004,1 +1002,0 @@\n-  idx_t const dense_prefix_bit = _mark_bitmap.addr_to_bit(dense_prefix_end);\n@@ -1007,1 +1004,1 @@\n-      _mark_bitmap.is_marked(dense_prefix_bit)) {\n+      _mark_bitmap.is_marked(dense_prefix_end)) {\n","filename":"src\/hotspot\/share\/gc\/parallel\/psParallelCompact.cpp","additions":2,"deletions":5,"binary":false,"changes":7,"status":"modified"}]}