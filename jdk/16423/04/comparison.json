{"files":[{"patch":"@@ -295,0 +295,3 @@\n+                if (!ok) {\n+                    return false;\n+                }\n@@ -341,0 +344,3 @@\n+                if (!ok) {\n+                    return false;\n+                }\n","filename":"src\/jdk.jartool\/share\/classes\/sun\/tools\/jar\/Main.java","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2017, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,1 +26,1 @@\n- * @bug 8165944\n+ * @bug 8165944 8318971\n@@ -140,0 +140,17 @@\n+    @Test\n+    public void testMultipleFilesInClassesList() throws IOException {\n+        touch(\"test\");\n+        touch(\"classes.list\");\n+        Files.writeString(Path.of(\"classes.list\"), \"\"\"\n+                test\n+                 \"\"\");\n+        jar(\"cf test.jar @classes.list\");\n+        jar(\"tf test.jar\");\n+        println();\n+        String output = \"META-INF\/\" + nl +\n+                \"META-INF\/MANIFEST.MF\" + nl +\n+                \"test\" + nl;\n+        rm(\"test.jar test classes.list\");\n+        Assert.assertEquals(baos.toByteArray(), output.getBytes());\n+    }\n+\n@@ -156,0 +173,31 @@\n+    @Test(expectedExceptions = {IOException.class})\n+    public void testNonExistentFileInput() throws IOException {\n+        touch(\"existingTestFile.txt\");\n+        onCompletion = () -> rm(\"existingTestFile.txt\");\n+        try {\n+            jar(\"cf test.jar existingTestFile.txt nonExistentTestFile.txt\");\n+        } catch (IOException e) {\n+            Assert.assertEquals(e.getMessage().trim(), \"nonExistentTestFile.txt : no such file or directory\");\n+            Assert.assertTrue(Files.notExists(Path.of(\"test.jar\")), \"Jar file should not be created.\");\n+            throw e;\n+        }\n+    }\n+\n+    @Test(expectedExceptions = {IOException.class})\n+    public void testNonExistentFileInputClassList() throws IOException {\n+        touch(\"existingTestFile.txt\");\n+        touch(\"classes.list\");\n+        Files.writeString(Path.of(\"classes.list\"), \"\"\"\n+                existingTestFile.txt\n+                nonExistentTestFile.txt\n+                 \"\"\");\n+        onCompletion = () -> rm(\"existingTestFile.txt classes.list\");\n+        try {\n+            jar(\"cf test.jar @classes.list\");\n+        } catch (IOException e) {\n+            Assert.assertEquals(e.getMessage().trim(), \"nonExistentTestFile.txt : no such file or directory\");\n+            Assert.assertTrue(Files.notExists(Path.of(\"test.jar\")), \"Jar file should not be created.\");\n+            throw e;\n+        }\n+    }\n+\n","filename":"test\/jdk\/tools\/jar\/InputFilesTest.java","additions":50,"deletions":2,"binary":false,"changes":52,"status":"modified"}]}