{"files":[{"patch":"@@ -138,1 +138,1 @@\n-  static bool supports_thp()                    { return thp_mode() == THPMode::madvise || thp_mode() == THPMode::always; }\n+  static bool supports_thp()                    { return (thp_mode() == THPMode::madvise || thp_mode() == THPMode::always) && thp_pagesize() != 0; }\n","filename":"src\/hotspot\/os\/linux\/hugepages.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -91,1 +91,1 @@\n-        return _thpMode == THPMode.always || _thpMode == THPMode.madvise;\n+        return (_thpMode == THPMode.always || _thpMode == THPMode.madvise) && _thpPageSize != 0;\n","filename":"test\/hotspot\/jtreg\/runtime\/os\/HugePageConfiguration.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}