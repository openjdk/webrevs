{"files":[{"patch":"@@ -25,0 +25,2 @@\n+#include \"opto\/c2_globals.hpp\"\n+#include \"opto\/compile.hpp\"\n@@ -1148,1 +1150,8 @@\n-      assert(load_sz <= MaxVectorSize, \"Unexpected load size\");\n+      if (load_sz > MaxVectorSize) {\n+        \/\/ After loop opts, cast nodes are aggressively removed, if the input is then transformed\n+        \/\/ into a constant that is outside the range of the removed cast, we may encounter it here.\n+        \/\/ This should be a dead node then.\n+        assert(Compile::current()->post_loop_opts_phase(), \"Unexpected load size\");\n+        return phase->C->top();\n+      }\n+\n@@ -1167,1 +1176,8 @@\n-      assert(load_sz <= MaxVectorSize, \"Unexpected store size\");\n+      if (load_sz > MaxVectorSize) {\n+        \/\/ After loop opts, cast nodes are aggressively removed, if the input is then transformed\n+        \/\/ into a constant that is outside the range of the removed cast, we may encounter it here.\n+        \/\/ This should be a dead node then.\n+        assert(Compile::current()->post_loop_opts_phase(), \"Unexpected store size\");\n+        return phase->C->top();\n+      }\n+\n","filename":"src\/hotspot\/share\/opto\/vectornode.cpp","additions":18,"deletions":2,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2020, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2020, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,1 +29,1 @@\n- * @bug 8251871 8285301\n+ * @bug 8251871 8285301 8371964\n@@ -55,0 +55,3 @@\n+ * @run main\/othervm\/timeout=600 -XX:-TieredCompilation -Xbatch -XX:+IgnoreUnrecognizedVMOptions\n+ *      -XX:+UnlockDiagnosticVMOptions -XX:UseAVX=3 -XX:MaxVectorSize=32 -XX:ArrayOperationPartialInlineSize=32 -XX:+StressIGVN\n+ *      compiler.arraycopy.TestArrayCopyDisjoint\n","filename":"test\/hotspot\/jtreg\/compiler\/arraycopy\/TestArrayCopyDisjoint.java","additions":5,"deletions":2,"binary":false,"changes":7,"status":"modified"}]}