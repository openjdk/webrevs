{"files":[{"patch":"@@ -929,16 +929,23 @@\n-       if (fontSelectionType == FAMILY_AND_STYLE) {\n-           return;\n-       }\n-       fontMenuLabel.setText(FAMILY_LABEL_TEXT);\n-       fontMenuPanel.removeAll();\n-       fontMenuPanel.add(fontMenu);\n-       if (fontSelectionType == FAMILY_AND_SUBFAMILY) {\n-           styleLabel.setText(STYLE_LABEL_TEXT);\n-           stylePanel.removeAll();\n-           stylePanel.add(styleMenu);\n-       }\n-       fontSelectionType = FAMILY_AND_STYLE;\n-       if (!familyAndStyleRBMI.isSelected()) {\n-          familyAndStyleRBMI.setSelected(true);\n-       }\n-       revalidate();\n+        if (fontSelectionType == FAMILY_AND_STYLE) {\n+            return;\n+        }\n+        fontMenuLabel.setText(FAMILY_LABEL_TEXT);\n+        fontMenuPanel.removeAll();\n+        fontMenuPanel.add(fontMenu);\n+        if (fontSelectionType == FAMILY_AND_SUBFAMILY) {\n+            styleLabel.setText(STYLE_LABEL_TEXT);\n+            stylePanel.removeAll();\n+            stylePanel.add(styleMenu);\n+        }\n+        fontSelectionType = FAMILY_AND_STYLE;\n+        if (!familyAndStyleRBMI.isSelected()) {\n+           familyAndStyleRBMI.setSelected(true);\n+        }\n+        styleMenu.setSelectedIndex(0);\n+        currentFontName = (String)fontMenu.getSelectedItem();\n+        fp.setFontParams(currentFontName,\n+                         Float.parseFloat(sizeField.getText()),\n+                         0, \/\/ want to reset style to PLAIN\n+                         transformMenu.getSelectedIndex());\n+        revalidate();\n+        repaint();\n@@ -948,16 +955,23 @@\n-       if (fontSelectionType == FONT_NAME) {\n-           return;\n-       }\n-       fontMenuLabel.setText(NAME_LABEL_TEXT);\n-       fontMenuPanel.removeAll();\n-       fontMenuPanel.add(fontNameMenu);\n-       if (fontSelectionType == FAMILY_AND_SUBFAMILY) {\n-           styleLabel.setText(STYLE_LABEL_TEXT);\n-           stylePanel.removeAll();\n-           stylePanel.add(styleMenu);\n-       }\n-       fontSelectionType = FONT_NAME;\n-       if (!fontNameRBMI.isSelected()) {\n-          fontNameRBMI.setSelected(true);\n-       }\n-       revalidate();\n+        if (fontSelectionType == FONT_NAME) {\n+            return;\n+        }\n+        fontMenuLabel.setText(NAME_LABEL_TEXT);\n+        fontMenuPanel.removeAll();\n+        fontMenuPanel.add(fontNameMenu);\n+        if (fontSelectionType == FAMILY_AND_SUBFAMILY) {\n+            styleLabel.setText(STYLE_LABEL_TEXT);\n+            stylePanel.removeAll();\n+            stylePanel.add(styleMenu);\n+        }\n+        fontSelectionType = FONT_NAME;\n+        if (!fontNameRBMI.isSelected()) {\n+           fontNameRBMI.setSelected(true);\n+        }\n+        styleMenu.setSelectedIndex(0);\n+        currentFontName = (String)fontNameMenu.getSelectedItem();\n+        fp.setFontParams(currentFontName,\n+                         Float.parseFloat(sizeField.getText()),\n+                         0, \/\/ want to reset style to PLAIN\n+                         transformMenu.getSelectedIndex());\n+        revalidate();\n+        repaint();\n@@ -967,15 +981,25 @@\n-       if (fontSelectionType == FAMILY_AND_SUBFAMILY) {\n-           return;\n-       }\n-       fontMenuLabel.setText(FAMILY_LABEL_TEXT);\n-       fontMenuPanel.removeAll();\n-       fontMenuPanel.add(fontMenu);\n-       styleLabel.setText(SUBFAMILY_LABEL_TEXT);\n-       stylePanel.removeAll();\n-       updateSubFamilyMenu((String)fontMenu.getSelectedItem());\n-       stylePanel.add(fontSubFamilyMenu);\n-       fontSelectionType = FAMILY_AND_SUBFAMILY;\n-       if (!familyAndSubFamilyRBMI.isSelected()) {\n-          familyAndSubFamilyRBMI.setSelected(true);\n-       }\n-       revalidate();\n+        if (fontSelectionType == FAMILY_AND_SUBFAMILY) {\n+            return;\n+        }\n+        fontMenuLabel.setText(FAMILY_LABEL_TEXT);\n+        fontMenuPanel.removeAll();\n+        fontMenuPanel.add(fontMenu);\n+        styleLabel.setText(SUBFAMILY_LABEL_TEXT);\n+        stylePanel.removeAll();\n+        styleMenu.setSelectedIndex(0);\n+        String family = (String)fontMenu.getSelectedItem();\n+        updateSubFamilyMenu(family);\n+        stylePanel.add(fontSubFamilyMenu);\n+        fontSelectionType = FAMILY_AND_SUBFAMILY;\n+        if (!familyAndSubFamilyRBMI.isSelected()) {\n+           familyAndSubFamilyRBMI.setSelected(true);\n+        }\n+        String subname = (String)fontSubFamilyMenu.getSelectedItem();\n+        Font font = FontFamily.getFont(family, subname);\n+        currentFontName = (font != null) ? font.getFontName(l) : family;\n+        fp.setFontParams(currentFontName,\n+                         Float.parseFloat(sizeField.getText()),\n+                         0, \/\/ want to reset style to PLAIN\n+                         transformMenu.getSelectedIndex());\n+        revalidate();\n+        repaint();\n@@ -1273,1 +1297,1 @@\n-              else if (fullChars[fullIndex] == ' '  || fullChars[fullIndex] == '-') {\n+              else if (fullChars[fullIndex] == ' ' || fullChars[fullIndex] == '-') {\n","filename":"src\/demo\/share\/jfc\/Font2DTest\/Font2DTest.java","additions":72,"deletions":48,"binary":false,"changes":120,"status":"modified"}]}