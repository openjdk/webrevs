{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -532,0 +532,13 @@\n+    \/**\n+     * @since 27\n+     *\/\n+    public int codePointCount() {\n+        byte coder = this.coder;\n+        int count = this.count;\n+        byte[] value = this.value;\n+        if (isLatin1(coder)) {\n+            return count;\n+        }\n+        return StringUTF16.codePointCount(value, 0, count);\n+    }\n+\n","filename":"src\/java.base\/share\/classes\/java\/lang\/AbstractStringBuilder.java","additions":14,"deletions":1,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -256,0 +256,23 @@\n+    \/**\n+     * {@return the number of Unicode code points in this character sequence}\n+     * Isolated surrogate code units count as one code point each.\n+     *\n+     * @since 27\n+     *\/\n+    public default int codePointCount() {\n+        final int length = length();\n+        int n = length;\n+        final int lastIndex = length - 1;\n+\n+        \/\/ i < lastIndex works properly even for an empty sequence\n+        \/\/ thank to the fact that the length\/index type in Java is signed\n+        for (int i = 0; i < lastIndex;) {\n+            if (Character.isHighSurrogate(charAt(i++)) && Character.isLowSurrogate(charAt(i))) {\n+                n--;\n+                i++;\n+            }\n+        }\n+\n+        return n;\n+    }\n+\n","filename":"src\/java.base\/share\/classes\/java\/lang\/CharSequence.java","additions":24,"deletions":1,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1994, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1994, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -1717,0 +1717,13 @@\n+    \/**\n+     * {@return the number of Unicode code points in this String}\n+     * Isolated surrogate code units count as one code point each.\n+     *\n+     * @since 27\n+     *\/\n+    public int codePointCount() {\n+        if (isLatin1()) {\n+            return value.length;\n+        }\n+        return StringUTF16.codePointCount(value, 0, value.length >> 1);\n+    }\n+\n@@ -1720,1 +1733,1 @@\n-     * {@code codePointOffset} code points. Unpaired surrogates\n+     * {@code codePointOffset} code points. Isolated surrogate code units\n","filename":"src\/java.base\/share\/classes\/java\/lang\/String.java","additions":15,"deletions":2,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1994, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1994, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -273,0 +273,8 @@\n+    \/**\n+     * @since 27\n+     *\/\n+    @Override\n+    public synchronized int codePointCount() {\n+        return super.codePointCount();\n+    }\n+\n","filename":"src\/java.base\/share\/classes\/java\/lang\/StringBuffer.java","additions":9,"deletions":1,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1999, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1999, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -1661,1 +1661,1 @@\n-            if (nfd.codePointCount(0, nfd.length()) > 1) {\n+            if (nfd.codePointCount() > 1) {\n@@ -4160,1 +4160,1 @@\n-                        if (nfc.codePointCount(0, nfc.length()) == 1) {\n+                        if (nfc.codePointCount() == 1) {\n","filename":"src\/java.base\/share\/classes\/java\/util\/regex\/Pattern.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2010, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,1 +27,1 @@\n- * @bug 4533872 4915683 4922962 4985217 5017280 6242664 6588260\n+ * @bug 4533872 4915683 4922962 4985217 5017280 6242664 6588260 8364007\n@@ -389,1 +389,2 @@\n-     * Test codePointCount(int, int)\n+     * Test codePointCount(int, int) &\n+     *      codePointCount()\n@@ -391,2 +392,1 @@\n-     * This test case assumes that\n-     * Character.codePointCount(CharSequence, int, int) works\n+     * This test case assumes that Character.codePointCount(CharSequence, int, int) works\n@@ -422,0 +422,4 @@\n+            int result = str.codePointCount();\n+            int expected = Character.codePointCount(str, 0, str.length());\n+            check(result != expected, \"substring:codePointCount()\", result, expected);\n+\n","filename":"test\/jdk\/java\/lang\/String\/Supplementary.java","additions":9,"deletions":5,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2013, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,1 +27,1 @@\n- * @bug 4533872 4915683 4985217 5017280\n+ * @bug 4533872 4915683 4985217 5017280 8364007\n@@ -218,1 +218,1 @@\n-     * Test codePointCount(int, int)\n+     * Test codePointCount(int, int) & codePointCount()\n@@ -242,0 +242,5 @@\n+\n+            int result = sb.codePointCount();\n+            int expected = Character.codePointCount(sb, 0, sb.length());\n+            check(result != expected, \"codePointCount()\", result, expected);\n+\n","filename":"test\/jdk\/java\/lang\/StringBuilder\/Supplementary.java","additions":8,"deletions":3,"binary":false,"changes":11,"status":"modified"}]}