{"files":[{"patch":"@@ -131,2 +131,2 @@\n-  template <class T>\n-  inline void arraycopy_marking(T* dst, size_t count);\n+  template <bool IS_GENERATIONAL, class T>\n+  void arraycopy_marking(T* dst, size_t count);\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahBarrierSet.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -432,1 +432,5 @@\n-    arraycopy_marking(dst, count);\n+    if (_heap->mode()->is_generational()) {\n+     arraycopy_marking<true>(dst, count);\n+    } else {\n+      arraycopy_marking<false>(dst, count);\n+    }\n@@ -444,1 +448,1 @@\n-template <class T>\n+template <bool IS_GENERATIONAL, class T>\n@@ -448,1 +452,2 @@\n-    if (!_heap->marking_context()->allocated_after_mark_start(reinterpret_cast<HeapWord*>(dst))) {\n+    if (!_heap->marking_context()->allocated_after_mark_start(reinterpret_cast<HeapWord*>(dst)) ||\n+        (IS_GENERATIONAL && _heap->heap_region_containing(dst)->is_old() && _heap->is_concurrent_young_mark_in_progress())) {\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahBarrierSet.inline.hpp","additions":8,"deletions":3,"binary":false,"changes":11,"status":"modified"}]}