{"files":[{"patch":"@@ -42,23 +42,0 @@\n-    private static final Locale FAST_PATH_FORMAT_LOCALE;\n-    static {\n-        Locale locale = Locale.getDefault(Locale.Category.FORMAT);\n-\n-        boolean zero = false;\n-\n-        \/\/Avoid expensive initialization of DecimalFormatSymbols in the following languages\n-        String[] fast_path_languages = {\"en\", \"fr\", \"de\", \"it\", \"ja\", \"ko\", \"zh\"};\n-        for (String lange : fast_path_languages) {\n-            if (lange.equals(locale.getLanguage())) {\n-                zero = true;\n-                break;\n-            }\n-        }\n-\n-        if (!zero) {\n-            DecimalFormatSymbols dfs = DecimalFormatSymbols.getInstance(locale);\n-            zero = dfs.getZeroDigit() == '0';\n-        }\n-\n-        FAST_PATH_FORMAT_LOCALE = zero ? locale : null;\n-    }\n-\n@@ -198,1 +175,1 @@\n-                if (FAST_PATH_FORMAT_LOCALE == Locale.getDefault(Locale.Category.FORMAT)) {\n+                if (defaultLocaleDecimalSupport()) {\n@@ -344,0 +321,29 @@\n+\n+    private static boolean defaultLocaleDecimalSupport() {\n+        return Locale.getDefault(Locale.Category.FORMAT) == DecimalFormat.FAST_PATH_FORMAT_LOCALE;\n+    }\n+\n+    private static class DecimalFormat {\n+        static final Locale FAST_PATH_FORMAT_LOCALE;\n+        static {\n+            Locale locale = Locale.getDefault(Locale.Category.FORMAT);\n+\n+            boolean zero = false;\n+\n+            \/\/Avoid expensive initialization of DecimalFormatSymbols in the following languages\n+            String[] fast_path_languages = {\"en\", \"fr\", \"de\", \"it\", \"ja\", \"ko\", \"zh\"};\n+            for (String lange : fast_path_languages) {\n+                if (lange.equals(locale.getLanguage())) {\n+                    zero = true;\n+                    break;\n+                }\n+            }\n+\n+            if (!zero) {\n+                DecimalFormatSymbols dfs = DecimalFormatSymbols.getInstance(locale);\n+                zero = dfs.getZeroDigit() == '0';\n+            }\n+\n+            FAST_PATH_FORMAT_LOCALE = zero ? locale : null;\n+        }\n+    }\n","filename":"src\/java.base\/share\/classes\/java\/lang\/StringFormat.java","additions":30,"deletions":24,"binary":false,"changes":54,"status":"modified"}]}