{"files":[{"patch":"@@ -24,11 +24,0 @@\n-\/*\n- * @test\n- * @bug 8224261\n- * @key headful\n- * @library ..\/regtesthelpers\n- * @build Util\n- * @summary Verifies JProgressBar border is not painted when border\n- *          painting is set to false\n- * @run main TestProgressBarBorder\n- *\/\n-\n@@ -47,0 +36,11 @@\n+\/*\n+ * @test\n+ * @bug 8224261\n+ * @key headful\n+ * @library ..\/regtesthelpers\n+ * @build Util\n+ * @summary Verifies JProgressBar border is not painted when border\n+ *          painting is set to false\n+ * @run main TestProgressBarBorder\n+ *\/\n+\n@@ -49,3 +49,2 @@\n-    private static volatile boolean isImgEqual;\n-    private static BufferedImage borderPaintedImg;\n-    private static BufferedImage borderNotPaintedImg;\n+    private static volatile BufferedImage withBorder = null;\n+    private static volatile BufferedImage withoutBorder = null;\n@@ -54,0 +53,1 @@\n+        boolean equal;\n@@ -62,1 +62,5 @@\n-                createAndShowUI();\n+                initProgressBar();\n+                progressBar.setBorderPainted(true);\n+                withBorder = paintToImage(progressBar);\n+                progressBar.setBorderPainted(false);\n+                withoutBorder = paintToImage(progressBar);\n@@ -64,9 +68,4 @@\n-\n-            borderPaintedImg = paintToImage(progressBar);\n-            progressBar.setBorderPainted(false);\n-            borderNotPaintedImg = paintToImage(progressBar);\n-            isImgEqual = Util.compareBufferedImages(borderPaintedImg, borderNotPaintedImg);\n-\n-            if (isImgEqual) {\n-                ImageIO.write(borderPaintedImg, \"png\", new File(\"borderPaintedImg.png\"));\n-                ImageIO.write(borderNotPaintedImg, \"png\", new File(\"borderNotPaintedImg.png\"));\n+            equal = Util.compareBufferedImages(withBorder, withoutBorder);\n+            if (equal) {\n+                ImageIO.write(withBorder, \"png\", new File(\"withBorder.png\"));\n+                ImageIO.write(withoutBorder, \"png\", new File(\"withoutBorder.png\"));\n@@ -90,1 +89,1 @@\n-    private static void createAndShowUI() {\n+    private static void initProgressBar() {\n@@ -93,1 +92,0 @@\n-        \/\/ set initial value\n@@ -95,1 +93,0 @@\n-        progressBar.setBorderPainted(true);\n","filename":"test\/jdk\/javax\/swing\/JProgressBar\/TestProgressBarBorder.java","additions":24,"deletions":27,"binary":false,"changes":51,"status":"modified"}]}