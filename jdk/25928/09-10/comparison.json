{"files":[{"patch":"@@ -55,0 +55,16 @@\n+  \/\/ To minimize `count_leading_zeros(x)`, we should make the highest 1 bit in x\n+  \/\/ as far to the left as possible. A bit in x can be 1 iff this bit is not\n+  \/\/ forced to be 0, i.e. the corresponding bit in `x._bits._zeros` is 0. Thus:\n+  \/\/   min(clz(x)) = number of bits to the left of the highest 0 bit in x._bits._zeros\n+  \/\/               = count_leading_ones(x._bits._zeros) = clz(~x._bits._zeros)\n+  \/\/\n+  \/\/ To maximize `count_leading_zeros(x)`, we should make the leading zeros as\n+  \/\/ many as possible. A bit in x can be 0 iff this bit is not forced to be 1,\n+  \/\/ i.e. the corresponding bit in `x._bits._ones` is 0. Thus:\n+  \/\/   max(clz(x)) = clz(x._bits._ones)\n+  \/\/\n+  \/\/ Therefore, the range of `count_leading_zeros(x)` is:\n+  \/\/   [clz(~x._bits._zeros), clz(x._bits._ones)]\n+  \/\/\n+  \/\/ A more detailed proof using Z3 can be found at:\n+  \/\/   https:\/\/github.com\/openjdk\/jdk\/pull\/25928#discussion_r2256750507\n@@ -68,0 +84,2 @@\n+  \/\/ The proof of correctness is same as the above comments\n+  \/\/ in `CountLeadingZerosINode::Value`.\n@@ -81,0 +99,16 @@\n+  \/\/ To minimize `count_trailing_zeros(x)`, we should make the lowest 1 bit in x\n+  \/\/ as far to the right as possible. A bit in x can be 1 iff this bit is not\n+  \/\/ forced to be 0, i.e. the corresponding bit in `x._bits._zeros` is 0. Thus:\n+  \/\/   min(ctz(x)) = number of bits to the right of the lowest 0 bit in x._bits._zeros\n+  \/\/               = count_trailing_ones(x._bits._zeros) = ctz(~x._bits._zeros)\n+  \/\/\n+  \/\/ To maximize `count_trailing_zeros(x)`, we should make the trailing zeros as\n+  \/\/ many as possible. A bit in x can be 0 iff this bit is not forced to be 1,\n+  \/\/ i.e. the corresponding bit in `x._bits._ones` is 0. Thus:\n+  \/\/   max(ctz(x)) = ctz(x._bits._ones)\n+  \/\/\n+  \/\/ Therefore, the range of `count_trailing_zeros(x)` is:\n+  \/\/   [ctz(~x._bits._zeros), ctz(x._bits._ones)]\n+  \/\/\n+  \/\/ A more detailed proof using Z3 can be found at:\n+  \/\/   https:\/\/github.com\/openjdk\/jdk\/pull\/25928#discussion_r2256750507\n@@ -94,0 +128,2 @@\n+  \/\/ The proof of correctness is same as the above comments\n+  \/\/ in `CountTrailingZerosINode::Value`.\n","filename":"src\/hotspot\/share\/opto\/countbitsnode.cpp","additions":36,"deletions":0,"binary":false,"changes":36,"status":"modified"}]}