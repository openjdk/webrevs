{"files":[{"patch":"@@ -968,2 +968,19 @@\n-  tree.reserve_mapping(0, 100, rd1);\n-  VMATree::SummaryDiff diff = tree.commit_mapping(0, 50, rd2, true);\n+\/\/            1         2         3         4         5\n+\/\/  012345678901234567890123456789012345678901234567890\n+\/\/  ..................................................\n+\/\/ Legend:\n+\/\/ . - free(released)\n+  tree.reserve_mapping(0, 50, rd1);\n+\/\/            1         2         3         4         5\n+\/\/  012345678901234567890123456789012345678901234567890\n+\/\/  rrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrr\n+\/\/ Legend:\n+\/\/ r - reserve\n+\n+VMATree::SummaryDiff diff = tree.commit_mapping(0, 25, rd2, true);\n+\/\/            1         2         3         4         5\n+\/\/  012345678901234567890123456789012345678901234567890\n+\/\/  CCCCCCCCCCCCCCCCCCCCCCCCCrrrrrrrrrrrrrrrrrrrrrrrrr\n+\/\/ Legend:\n+\/\/ r - Test, reserve\n+\/\/ C - Test, commit\n@@ -971,2 +988,9 @@\n-  EXPECT_EQ(50, diff.tag[NMTUtil::tag_to_index(mtTest)].commit);\n-  diff = tree.commit_mapping(60, 10, rd2, true);\n+  EXPECT_EQ(25, diff.tag[NMTUtil::tag_to_index(mtTest)].commit);\n+\n+  diff = tree.commit_mapping(30, 5, rd2, true);\n+\/\/            1         2         3         4         5\n+\/\/  012345678901234567890123456789012345678901234567890\n+\/\/  CCCCCCCCCCCCCCCCCCCCCCCCCrrrrrCCCCCrrrrrrrrrrrrrrr\n+\/\/ Legend:\n+\/\/ r - Test, reserve\n+\/\/ C - Test, commit\n@@ -974,2 +998,9 @@\n-  EXPECT_EQ(10, diff.tag[NMTUtil::tag_to_index(mtTest)].commit);\n-  diff = tree.uncommit_mapping(0, 50, rd2);\n+  EXPECT_EQ(5, diff.tag[NMTUtil::tag_to_index(mtTest)].commit);\n+\n+  diff = tree.uncommit_mapping(0, 25, rd2);\n+\/\/            1         2         3         4         5\n+\/\/  012345678901234567890123456789012345678901234567890\n+\/\/  rrrrrrrrrrrrrrrrrrrrrrrrrrrrrrCCCCCrrrrrrrrrrrrrrr\n+\/\/ Legend:\n+\/\/ r - Test, reserve\n+\/\/ C - Test, commit\n@@ -977,1 +1008,1 @@\n-  EXPECT_EQ(-50, diff.tag[NMTUtil::tag_to_index(mtTest)].commit);\n+  EXPECT_EQ(-25, diff.tag[NMTUtil::tag_to_index(mtTest)].commit);\n@@ -1013,0 +1044,9 @@\n+  \/\/ How the memory regions are visualized:\n+  \/\/            1         2         3         4         5         6         7       |\n+  \/\/  0123456789012345678901234567890123456789012345678901234567890123456789        |_> memory address\n+  \/\/  aaaaaaBBBBBBBcccccccDDDDDDDeeeeeeeFFFFFFFF...........................         |->some letters showing the state of the memory\n+  \/\/ Legend:\n+  \/\/ . - None (free\/released)\n+  \/\/ r - MemTag (reserved)\n+  \/\/ C - MemTag (committed)\n+  \/\/ MemTag is Test if omitted.\n@@ -1021,4 +1061,2 @@\n-    \/\/  aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa....................\n-    \/\/  Legend:\n-    \/\/  a - Test (reserved)\n-    \/\/  . - free\n+    \/\/  rrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrr....................\n+\n@@ -1038,1 +1076,0 @@\n-    \/\/ Pre : .........0------------------------------50.........\n@@ -1042,5 +1079,3 @@\n-    \/\/  aaaaaaaaaaaaaaaaaaaaaaaaaAAAAAAAAAAaaaaaaaaaaaaaaa....................\n-    \/\/  Legend:\n-    \/\/  a - Test (reserved)\n-    \/\/  A - Test (committed)\n-    \/\/  . - free\n+    \/\/  rrrrrrrrrrrrrrrrrrrrrrrrrCCCCCCCCCCrrrrrrrrrrrrrrr....................\n+\n+    \/\/ Pre : .........0------------------------------50.........\n@@ -1052,1 +1087,1 @@\n-    ExpectedTree<4> et2 = {{      0  , 25,      35,    50        },\n+    ExpectedTree<4> et2 = {{     0,     25,     35,     50        },\n@@ -1060,1 +1095,0 @@\n-    \/\/ Pre:  .........0-------------------25********50--------100.........\n@@ -1064,6 +1098,4 @@\n-    \/\/  AAAAAAAAAAAAAAAAAAAAaaaaaAAAAAAAAAAaaaaaaaaaaaaaaa....................\n-    \/\/  Legend:\n-    \/\/  a - Test (reserved)\n-    \/\/  A - Test (committed)\n-    \/\/  . - free\n-    \/\/ Post: .........0********20---------25********50--------100.........\n+    \/\/  CCCCCCCCCCCCCCCCCCCCrrrrrCCCCCCCCCCrrrrrrrrrrrrrrr....................\n+\n+    \/\/ Pre:  .........0-------------------25********35--------50.........\n+    \/\/ Post: .........0********20---------25********35--------50.........\n@@ -1074,1 +1106,1 @@\n-    ExpectedTree<5> et3 = {{     0,     20,     25,     35,    50        },\n+    ExpectedTree<5> et3 = {{     0,     20,     25,     35,    50         },\n@@ -1082,1 +1114,0 @@\n-    \/\/ Pre:  .........0********20---------25********35------------------50.........\n@@ -1086,5 +1117,3 @@\n-    \/\/  AAAAAAAAAAAAAAAAAAAAaaaaaAAAAAAAAAAaaaaaAAAAAAAAAA....................\n-    \/\/  Legend:\n-    \/\/  a - Test (reserved)\n-    \/\/  A - Test (committed)\n-    \/\/  . - free\n+    \/\/  CCCCCCCCCCCCCCCCCCCCrrrrrCCCCCCCCCCrrrrrCCCCCCCCCC....................\n+\n+    \/\/ Pre:  .........0********20---------25********35------------------50.........\n@@ -1105,1 +1134,1 @@\n-    tree.reserve_mapping(0, 100, call_stack_1); \/\/ reserving in an empty tree\n+    tree.reserve_mapping(0, 50, call_stack_1); \/\/ reserving in an empty tree\n@@ -1107,1 +1136,7 @@\n-    \/\/ Post: .........0---------100.........\n+    \/\/            1         2         3         4         5\n+    \/\/  012345678901234567890123456789012345678901234567890\n+    \/\/  aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.\n+    \/\/  Legend:\n+    \/\/  a - Test (reserved)\n+    \/\/  . - free\n+    \/\/ Post: .........0---------50..........\n@@ -1112,1 +1147,1 @@\n-    ExpectedTree<2> et1 = {{      0  , 100        },\n+    ExpectedTree<2> et1 = {{      0  , 50         },\n@@ -1119,3 +1154,10 @@\n-    tree.commit_mapping(20, 20, call_stack_2, true);\n-    \/\/ Pre:  .........0----------------------------100.........\n-    \/\/ Post: .........0---------20********40-------100.........\n+    tree.commit_mapping(10, 10, call_stack_2, true);\n+    \/\/            1         2         3         4         5\n+    \/\/  012345678901234567890123456789012345678901234567890\n+    \/\/  aaaaaaaaaaCCCCCCCCCCaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.\n+    \/\/  Legend:\n+    \/\/  a - Test (reserved)\n+    \/\/  C - Test (committed)\n+    \/\/  . - free\n+    \/\/ Pre:  .........0----------------------------50.........\n+    \/\/ Post: .........0---------10********20-------50.........\n@@ -1126,1 +1168,1 @@\n-    ExpectedTree<4> et2 = {{     0,     20,     40,    100        },\n+    ExpectedTree<4> et2 = {{     0,     10,     20,    50         },\n@@ -1136,3 +1178,10 @@\n-    tree.commit_mapping(10, 20, call_stack_3);\n-    \/\/ Pre:  .........0-------------20**************40-------100.........\n-    \/\/ Post: .........0---------10********30********40-------100.........\n+    tree.commit_mapping(5, 10, call_stack_3);\n+    \/\/            1         2         3         4         5\n+    \/\/  012345678901234567890123456789012345678901234567890\n+    \/\/  aaaaaaaaaaCCCCCCCCCCaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.\n+    \/\/  Legend:\n+    \/\/  a - Test (reserved)\n+    \/\/  C - Test (committed)\n+    \/\/  . - free\n+    \/\/ Pre:  .........0-------------10**************20-------50.........\n+    \/\/ Post: .........0----------5********15********20-------50.........\n@@ -1143,1 +1192,1 @@\n-    ExpectedTree<5> et3 = {{     0,     10,     30,     40,    100        },\n+    ExpectedTree<5> et3 = {{     0,      5,     15,     20,     50        },\n@@ -1153,3 +1202,10 @@\n-    tree.commit_mapping(30, 20, call_stack_4);\n-    \/\/ Pre:  .........0---------10********30**40-------------100.........\n-    \/\/ Post: .........0---------10********30********50-------100.........\n+    tree.commit_mapping(15, 10, call_stack_4);\n+    \/\/            1         2         3         4         5\n+    \/\/  012345678901234567890123456789012345678901234567890\n+    \/\/  aaaaaaaaaaCCCCCCCCCCaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.\n+    \/\/  Legend:\n+    \/\/  a - Test (reserved)\n+    \/\/  C - Test (committed)\n+    \/\/  . - free\n+    \/\/ Pre:  .........0----------5********15**20-------------50.........\n+    \/\/ Post: .........0----------5********15********25-------50.........\n@@ -1160,1 +1216,1 @@\n-    ExpectedTree<5> et4 = {{     0,     10,     30,     50,    100        },\n+    ExpectedTree<5> et4 = {{     0,      5,     15,     25,     50        },\n@@ -1169,1 +1225,1 @@\n-    tree.reserve_mapping(0, 100, call_stack_1);\n+    tree.reserve_mapping(0, 50, call_stack_1);\n@@ -1171,1 +1227,1 @@\n-    tree.commit_mapping(20, 20, call_stack_2, true);\n+    tree.commit_mapping(10, 10, call_stack_2, true);\n@@ -1173,1 +1229,1 @@\n-    tree.commit_mapping(0, 10, call_stack_2, true);\n+    tree.commit_mapping(0, 5, call_stack_2, true);\n@@ -1175,2 +1231,2 @@\n-    tree.uncommit_mapping(0, 5, call_stack_2);\n-    \/\/ Pre:  .........0*****************10--------20********40-------100.........\n+    tree.uncommit_mapping(0, 3, call_stack_2);\n+    \/\/ Pre:  .........0*****************5--------10********20-------50.........\n@@ -1181,1 +1237,1 @@\n-    \/\/ Post: .........0--------5********10--------20********40-------100.........\n+    \/\/ Post: .........0--------3********5--------10********20-------50.........\n@@ -1186,1 +1242,1 @@\n-    ExpectedTree<6> et1 = {{     0,     5,      10,     20,     40,    100        },\n+    ExpectedTree<6> et1 = {{     0,     3,       5,     10,     20,     50        },\n@@ -1193,3 +1249,3 @@\n-    tree.uncommit_mapping(20, 10, call_stack_2);\n-    \/\/ Pre:  .........0--------5********10---20*************40-------100.........\n-    \/\/ Post: .........0--------5********10--------30********40-------100.........\n+    tree.uncommit_mapping(5, 10, call_stack_2);\n+    \/\/ Pre:  .........0--------3********5----10*************20-------50..........\n+    \/\/ Post: .........0--------3********5---------15********20-------50..........\n@@ -1200,1 +1256,1 @@\n-    ExpectedTree<6> et2 = {{     0,     5,      10,     30,     40,    100        },\n+    ExpectedTree<6> et2 = {{     0,      3,      5,     15,     20,     50        },\n","filename":"test\/hotspot\/gtest\/nmt\/test_vmatree.cpp","additions":114,"deletions":58,"binary":false,"changes":172,"status":"modified"}]}