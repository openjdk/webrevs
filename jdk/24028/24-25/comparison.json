{"files":[{"patch":"@@ -621,0 +621,6 @@\n+\/\/            1         2         3         4         5         6         7         8         9         10         11\n+\/\/  01234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789\n+\/\/  AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA..........\n+\/\/  Legend:\n+\/\/  A - Test (reserved)\n+\/\/  . - free\n@@ -624,0 +630,8 @@\n+\/\/              1         2         3         4         5         6         7         8         9         10         11\n+\/\/    01234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789\n+\/\/    AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBBBBBBBBBBBBBBBBBBBBBBBBCCCCCCCCCCCCCCCCCCCCCCCCC..........\n+\/\/    Legend:\n+\/\/     A - Test (reserved)\n+\/\/     B - Native Memory Tracking (reserved)\n+\/\/     C - Test (reserved)\n+\/\/     . - free\n@@ -633,0 +647,6 @@\n+\/\/            1         2         3         4         5         6         7         8         9         10         11\n+\/\/  01234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789\n+\/\/  AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA..........\n+\/\/  Legend:\n+\/\/  A - Test (reserved)\n+\/\/  . - free\n@@ -636,0 +656,4 @@\n+\/\/            1         2         3         4         5         6         7         8         9         10        11\n+\/\/  01234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789\n+\/\/  ..............................................................................................................\n+\/\/  Legend:\n@@ -643,0 +667,6 @@\n+\/\/            1         2         3         4         5         6         7         8         9         10         11\n+\/\/  01234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789\n+\/\/  AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA..........\n+\/\/  Legend:\n+\/\/  A - Test (reserved)\n+\/\/  . - free\n@@ -646,0 +676,6 @@\n+\/\/            1         2         3         4         5         6         7         8         9         10         11\n+\/\/  01234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789\n+\/\/  aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa..........\n+\/\/  Legend:\n+\/\/  a - Test (committed)\n+\/\/  . - free\n@@ -653,1 +689,7 @@\n-    VMATree::SummaryDiff all_diff = tree.reserve_mapping(0, 100, rd);\n+    VMATree::SummaryDiff all_diff = tree.reserve_mapping(0, 10, rd);\n+\/\/            1         2\n+\/\/  01234567890123456789\n+\/\/  AAAAAAAAAA..........\n+\/\/  Legend:\n+\/\/  A - Test (reserved)\n+\/\/  . - free\n@@ -655,2 +697,8 @@\n-    EXPECT_EQ(diff.reserve, 100);\n-    all_diff = tree.reserve_mapping(100, 100, rd);\n+    EXPECT_EQ(diff.reserve, 10);\n+    all_diff = tree.reserve_mapping(10, 10, rd);\n+\/\/            1         2         3\n+\/\/  012345678901234567890123456789\n+\/\/  AAAAAAAAAAAAAAAAAAAA..........\n+\/\/  Legend:\n+\/\/  A - Test (reserved)\n+\/\/  . - free\n@@ -658,1 +706,1 @@\n-    EXPECT_EQ(100, diff.reserve);\n+    EXPECT_EQ(10, diff.reserve);\n@@ -664,1 +712,7 @@\n-    VMATree::SummaryDiff all_diff = tree.reserve_mapping(0, 100, rd);\n+    VMATree::SummaryDiff all_diff = tree.reserve_mapping(0, 10, rd);\n+\/\/            1         2\n+\/\/  01234567890123456789\n+\/\/  AAAAAAAAAA..........\n+\/\/  Legend:\n+\/\/  A - Test (reserved)\n+\/\/  . - free\n@@ -666,2 +720,9 @@\n-    EXPECT_EQ(diff.reserve, 100);\n-    all_diff = tree.reserve_mapping(100, 100, rd2);\n+    EXPECT_EQ(diff.reserve, 10);\n+    all_diff = tree.reserve_mapping(10, 10, rd2);\n+\/\/            1         2         3\n+\/\/  012345678901234567890123456789\n+\/\/  AAAAAAAAAABBBBBBBBBB..........\n+\/\/  Legend:\n+\/\/  A - Test (reserved)\n+\/\/  B - Native Memory Tracking (reserved)\n+\/\/  . - free\n@@ -671,1 +732,1 @@\n-    EXPECT_EQ(100, diff.reserve);\n+    EXPECT_EQ(10, diff.reserve);\n@@ -678,5 +739,23 @@\n-    tree.commit_mapping(128, 128, rd);\n-    tree.commit_mapping(512, 128, rd);\n-    VMATree::SummaryDiff diff = tree.commit_mapping(0, 1024, rd);\n-    EXPECT_EQ(768, diff.tag[NMTUtil::tag_to_index(mtTest)].commit);\n-    EXPECT_EQ(768, diff.tag[NMTUtil::tag_to_index(mtTest)].reserve);\n+    tree.commit_mapping(16, 16, rd);\n+\/\/            1         2         3         4\n+\/\/  0123456789012345678901234567890123456789\n+\/\/  ................aaaaaaaaaaaaaaaa..........\n+\/\/  Legend:\n+\/\/  a - Test (committed)\n+\/\/  . - free\n+    tree.commit_mapping(32, 32, rd);\n+\/\/            1         2         3         4         5         6         7\n+\/\/  0123456789012345678901234567890123456789012345678901234567890123456789\n+\/\/  ................aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa..........\n+\/\/  Legend:\n+\/\/  a - Test (committed)\n+\/\/  . - free\n+    VMATree::SummaryDiff diff = tree.commit_mapping(0, 64, rd);\n+\/\/            1         2         3         4         5         6         7\n+\/\/  0123456789012345678901234567890123456789012345678901234567890123456789\n+\/\/  aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa..........\n+\/\/  Legend:\n+\/\/  a - Test (committed)\n+\/\/  . - free\n+    EXPECT_EQ(16, diff.tag[NMTUtil::tag_to_index(mtTest)].commit);\n+    EXPECT_EQ(16, diff.tag[NMTUtil::tag_to_index(mtTest)].reserve);\n","filename":"test\/hotspot\/gtest\/nmt\/test_vmatree.cpp","additions":92,"deletions":13,"binary":false,"changes":105,"status":"modified"}]}