{"files":[{"patch":"@@ -374,1 +374,2 @@\n-    _requested_static_archive_top = _requested_static_archive_bottom + static_archive_size;\n+    \/\/ Zero is acceptable for _requested_static_archive_bottom. Using casts to avoid UBSAN complain of nullptr arithmetic.\n+    _requested_static_archive_top = (address)((uintptr_t)_requested_static_archive_bottom + static_archive_size);\n@@ -382,1 +383,2 @@\n-  address my_archive_requested_top = my_archive_requested_bottom + buffer_size;\n+  \/\/ Zero is acceptable for my_archive_requested_bottom. Using casts to avoid UBSAN complain of nullptr arithmetic.\n+  address my_archive_requested_top = (address)((uintptr_t)my_archive_requested_bottom + buffer_size);\n@@ -1049,1 +1051,2 @@\n-  address requested_addr = _requested_static_archive_bottom + offset;\n+  \/\/ Zero is acceptable for _requested_static_archive_bottom. Using casts to avoid UBSAN complain of nullptr arithmetic.\n+  address requested_addr = (address)((uintptr_t)_requested_static_archive_bottom + offset);\n@@ -1115,2 +1118,4 @@\n-    address new_bottom = bottom + _buffer_to_requested_delta;\n-    address new_top = top + _buffer_to_requested_delta;\n+    \/\/ It is acceptable that new_bottom\/new_top becomes zero.\n+    \/\/ Using casts to avoid UBSAN complain on addition of non-zero pointers resulted in zero(nullptr).\n+    address new_bottom = (address)((uintptr_t)bottom + _buffer_to_requested_delta);\n+    address new_top = (address)((uintptr_t)top + _buffer_to_requested_delta);\n@@ -1179,1 +1184,2 @@\n-    _requested_static_archive_top = _requested_static_archive_bottom + my_archive_size;\n+    \/\/ Zero is acceptable for _requested_static_archive_bottom. Using casts to avoid UBSAN complain of nullptr arithmetic.\n+    _requested_static_archive_top = (address)((uintptr_t)_requested_static_archive_bottom + my_archive_size);\n","filename":"src\/hotspot\/share\/cds\/archiveBuilder.cpp","additions":12,"deletions":6,"binary":false,"changes":18,"status":"modified"}]}