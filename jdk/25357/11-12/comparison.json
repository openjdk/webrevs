{"files":[{"patch":"@@ -400,0 +400,6 @@\n+\n+#define KELVIN_DEBUG\n+#ifdef KELVIN_DEBUG\n+    log_info(gc)(\"adjust_evac_budgets shrinks old_evac_reserve to old_evac_committed: %zu\", old_evacuated_committed);\n+#endif\n+\n@@ -411,0 +417,6 @@\n+\n+#ifdef KELVIN_DEBUG\n+  log_info(gc)(\"adjust_evac_budgets overwrites young_evac_reserve: %zu\", young_evacuated_reserve_used);\n+  log_info(gc)(\"  cset live in aged regions: %zu\", young_advance_promoted);\n+#endif\n+\n@@ -419,0 +431,5 @@\n+#ifdef KELVIN_DEBUG\n+  log_info(gc)(\"adjust_evac_budgets old_consumed (%zu) is old_evac_commited (%zu) plus young_promoted_reserved_used (%zu)\",\n+               old_consumed, old_evacuated_committed, young_advance_promoted_reserve_used);\n+#endif\n+\n@@ -422,0 +439,3 @@\n+#ifdef KELVIN_DEBUG\n+    log_info(gc)(\" old_available (%zu) < old_consumed (%zu)\", old_available, old_consumed);\n+#endif\n@@ -427,0 +447,4 @@\n+#ifdef KELVIN_DEBUG\n+    log_info(gc)(\" Adjusting values of young_advance_promoted_reserved_used (%zu) and old_consumed (%zu)\",\n+                 young_advance_promoted_reserve_used, old_consumed);\n+#endif\n@@ -453,0 +477,6 @@\n+#ifdef KELVIN_DEBUG\n+  log_info(gc)(\" unaffiliated_old_regions: %zu, old_evacuated_committed: %zu, excess_old: %zu\",\n+               unaffiliated_old_regions, old_evacuated_committed, excess_old);\n+#endif\n+\n+\n@@ -466,0 +496,1 @@\n+\n@@ -476,0 +507,9 @@\n+\n+#ifdef KELVIN_DEBUG\n+  log_info(gc)(\" regions_to_xfer: %zu, adjusted excess_old: %zu\", regions_to_xfer, excess_old);\n+  log_info(gc)(\" set_promoted_reserve(%zu = %zu + %zu)\",\n+               total_promotion_reserve, young_advance_promoted_reserve_used, excess_old);\n+  log_info(gc)(\"KELVIN WONDERS WHY WE DON'T ADJUST YOUNG_EVAC_RESERVE OR OLD_EVAC_RESERVE\");\n+#endif\n+\n+\n@@ -788,0 +828,6 @@\n+#define KELVIN_DEBUG\n+#ifdef KELVIN_DEBUG\n+      log_info(gc)(\"Choosing collection set, young_reserve: %zu, old_reserve: %zu, promo_reserve: %zu\",\n+                   heap->young_generation()->get_evacuation_reserve(), heap->old_generation()->get_evacuation_reserve(), \n+                   heap->old_generation()->get_promoted_reserve());\n+#endif\n@@ -789,0 +835,9 @@\n+#ifdef KELVIN_DEBUG\n+      log_info(gc)(\"After choosing collection set, young_reserve: %zu, old_reserve: %zu, promo_reserve: %zu\",\n+                   heap->young_generation()->get_evacuation_reserve(), heap->old_generation()->get_evacuation_reserve(), \n+                   heap->old_generation()->get_promoted_reserve());\n+      log_info(gc)(\" cset young_bytes_untenurable: %zu, young_byte_tenurable: %zu, old_bytes: %zu\",\n+                   collection_set->get_live_bytes_in_untenurable_regions(),\n+                   collection_set->get_live_bytes_in_tenurable_regions(),\n+                   collection_set->get_live_bytes_in_old_regions());\n+#endif\n@@ -791,0 +846,9 @@\n+#ifdef KELVIN_DEBUG\n+      log_info(gc)(\"After adjusting evacuation budgets, young_reserve: %zu, old_reserve: %zu, promo_reserve: %zu\",\n+                   heap->young_generation()->get_evacuation_reserve(), heap->old_generation()->get_evacuation_reserve(), \n+                   heap->old_generation()->get_promoted_reserve());\n+      log_info(gc)(\" cset young_bytes_untenurable: %zu, young_byte_tenurable: %zu, old_bytes: %zu\",\n+                   collection_set->get_live_bytes_in_untenurable_regions(),\n+                   collection_set->get_live_bytes_in_tenurable_regions(),\n+                   collection_set->get_live_bytes_in_old_regions());\n+#endif\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahGeneration.cpp","additions":64,"deletions":0,"binary":false,"changes":64,"status":"modified"}]}