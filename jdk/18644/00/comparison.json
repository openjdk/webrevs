{"files":[{"patch":"@@ -26,1 +26,1 @@\n- * @bug 7093691\n+ * @bug 7093691 8310072\n@@ -28,0 +28,1 @@\n+ * @key headful\n@@ -54,0 +55,1 @@\n+    private static final int TOLERANCE = 20;\n@@ -102,1 +104,0 @@\n-        boolean isIdentical = true;\n@@ -106,1 +107,1 @@\n-        int y = 10;\n+        int y = enabledImage.getHeight() \/ 2;\n@@ -116,0 +117,16 @@\n+            } else if (lafName.equals(\"Windows\")) {\n+                \/\/ In Windows LAF, the ComboBox sizes are different.\n+                \/\/ Combo size is 116 x 22 where as Combo2 size is 115 X 20 and\n+                \/\/ that results in pixel offset of 1px for width and 1px for height.\n+                eColor1 = new Color(enabledImage.getRGB(x, y));\n+                eColor2 = new Color(enabledImage2.getRGB(x + 1, y - 1));\n+                dColor1 = new Color(disabledImage.getRGB(x, y));\n+                dColor2 = new Color(disabledImage2.getRGB(x + 1, y - 1));\n+            } else if (lafName.equals(\"GTK+\")) {\n+                \/\/ In GTK LAF, the ComboBox sizes are different.\n+                \/\/ Combo size is 159 x 30 where as Combo2 size is 179 X 34 and\n+                \/\/ that results in pixel offset of 10px for width and 2px for height.\n+                eColor1 = new Color(enabledImage.getRGB(x, y));\n+                eColor2 = new Color(enabledImage2.getRGB(x + 10, y + 2));\n+                dColor1 = new Color(disabledImage.getRGB(x, y));\n+                dColor2 = new Color(disabledImage2.getRGB(x + 10, y + 2));\n@@ -123,2 +140,2 @@\n-                isIdentical = false;\n-                break;\n+                failingLafs.append(lafName + \", \");\n+                return;\n@@ -127,6 +144,1 @@\n-\n-        if (isIdentical) {\n-            System.out.println(\"PASSED\");\n-        } else {\n-            failingLafs.append(lafName + \", \");\n-        }\n+        System.out.println(\"Test Passed: \"+lafName);\n@@ -136,3 +148,3 @@\n-        if ((c1.getRed() != c2.getRed())\n-                || (c1.getBlue() != c2.getBlue())\n-                || (c1.getGreen() != c2.getGreen())) {\n+        int redDiff = c1.getRed() - c2.getRed();\n+        int blueDiff = c1.getBlue() - c2.getBlue();\n+        int greenDiff = c1.getGreen() - c2.getGreen();\n@@ -140,0 +152,4 @@\n+        \/\/ Added TOLERANCE for pixel color difference. In Windows LAF the\n+        \/\/ background color between disabled and disabled DLCR image is slightly\n+        \/\/ different (240, 240, 240 vs 255, 255, 255).\n+        if ((redDiff > TOLERANCE) || (blueDiff > TOLERANCE) || (greenDiff > TOLERANCE)) {\n","filename":"test\/jdk\/javax\/swing\/JComboBox\/DisabledComboBoxFontTestAuto.java","additions":30,"deletions":14,"binary":false,"changes":44,"status":"modified"}]}