{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2012, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -101,0 +101,1 @@\n+        LookAndFeel.uninstallColorsAndFont(progressBar);\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/AquaProgressBarUI.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -216,0 +216,1 @@\n+        LookAndFeel.uninstallColorsAndFont(spinner);\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/AquaSpinnerUI.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -380,0 +380,2 @@\n+        LookAndFeel.uninstallColorsAndFont(tabPane);\n+\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/AquaTabbedPaneCopyFromBasicUI.java","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2017, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -190,0 +190,18 @@\n+    \/**\n+     * Convenience method for removing a component's foreground\n+     * and background color properties by setting them to null.\n+     *\n+     * @see #uninstallColorsAndFont\n+     * @see #installColors\n+     * @param c component from which to remove the colors\n+     *\/\n+    public static void uninstallColors(JComponent c) {\n+        if (c.getForeground() instanceof UIResource) {\n+            c.setForeground(null);\n+        }\n+        if (c.getBackground() instanceof UIResource) {\n+            c.setBackground(null);\n+        }\n+    }\n+\n+\n@@ -220,0 +238,17 @@\n+    \/**\n+     * Convenience method for removing a component's foreground color,\n+     * background color, and font properties by setting them to null.\n+     *\n+     * @see #uninstallColors\n+     * @see #installColorsAndFont\n+     * @param c component from which to remove the colors and font\n+     *\/\n+    public static void uninstallColorsAndFont(JComponent c) {\n+        if (c.getFont() instanceof UIResource) {\n+            c.setFont(null);\n+        }\n+\n+        uninstallColors(c);\n+    }\n+\n+\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/LookAndFeel.java","additions":36,"deletions":1,"binary":false,"changes":37,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -287,0 +287,1 @@\n+        LookAndFeel.uninstallColorsAndFont(b);\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/plaf\/basic\/BasicButtonUI.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2014, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -225,0 +225,2 @@\n+\n+        LookAndFeel.uninstallColorsAndFont(chooser);\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/plaf\/basic\/BasicColorChooserUI.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -429,4 +429,0 @@\n-        LookAndFeel.installColorsAndFont( comboBox,\n-                                          \"ComboBox.background\",\n-                                          \"ComboBox.foreground\",\n-                                          \"ComboBox.font\" );\n@@ -434,0 +430,1 @@\n+        LookAndFeel.uninstallColorsAndFont( comboBox );\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/plaf\/basic\/BasicComboBoxUI.java","additions":2,"deletions":5,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -430,1 +430,2 @@\n-    protected void uninstallDefaults(JLabel c){\n+    protected void uninstallDefaults(JLabel c) {\n+        LookAndFeel.uninstallColorsAndFont(c);\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/plaf\/basic\/BasicLabelUI.java","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -911,9 +911,1 @@\n-        if (list.getFont() instanceof UIResource) {\n-            list.setFont(null);\n-        }\n-        if (list.getForeground() instanceof UIResource) {\n-            list.setForeground(null);\n-        }\n-        if (list.getBackground() instanceof UIResource) {\n-            list.setBackground(null);\n-        }\n+        LookAndFeel.uninstallColorsAndFont(list);\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/plaf\/basic\/BasicListUI.java","additions":1,"deletions":9,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -172,0 +172,1 @@\n+            LookAndFeel.uninstallColorsAndFont(menuBar);\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/plaf\/basic\/BasicMenuBarUI.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -325,0 +325,1 @@\n+        LookAndFeel.uninstallColorsAndFont(menuItem);\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/plaf\/basic\/BasicMenuItemUI.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -194,0 +194,1 @@\n+        LookAndFeel.uninstallColorsAndFont(optionPane);\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/plaf\/basic\/BasicOptionPaneUI.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2014, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -97,0 +97,2 @@\n+        LookAndFeel.uninstallColors(p); \/\/ Uninstalling the font causes cascading problems!!\n+\/\/        LookAndFeel.uninstallColorsAndFont(p);\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/plaf\/basic\/BasicPanelUI.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -203,0 +203,1 @@\n+        LookAndFeel.uninstallColorsAndFont(popupMenu);\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/plaf\/basic\/BasicPopupMenuUI.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2014, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -191,0 +191,1 @@\n+        LookAndFeel.uninstallColorsAndFont(progressBar);\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/plaf\/basic\/BasicProgressBarUI.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -253,0 +253,1 @@\n+        LookAndFeel.uninstallColorsAndFont(scrollpane);\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/plaf\/basic\/BasicScrollPaneUI.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2014, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -104,0 +104,1 @@\n+        LookAndFeel.uninstallColors(s);\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/plaf\/basic\/BasicSeparatorUI.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -309,0 +309,1 @@\n+        LookAndFeel.uninstallColorsAndFont(slider);\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/plaf\/basic\/BasicSliderUI.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -276,0 +276,2 @@\n+        LookAndFeel.uninstallColorsAndFont(spinner);\n+\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/plaf\/basic\/BasicSpinnerUI.java","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -460,0 +460,1 @@\n+        LookAndFeel.uninstallColors(splitPane);\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/plaf\/basic\/BasicSplitPaneUI.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -468,0 +468,2 @@\n+        LookAndFeel.uninstallColorsAndFont(tabPane);\n+\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/plaf\/basic\/BasicTabbedPaneUI.java","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -408,1 +408,3 @@\n-    protected void uninstallDefaults() {}\n+    protected void uninstallDefaults() {\n+        LookAndFeel.uninstallColorsAndFont(header);\n+    }\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/plaf\/basic\/BasicTableHeaderUI.java","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -1668,0 +1668,2 @@\n+\n+        LookAndFeel.uninstallColorsAndFont(table);\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/plaf\/basic\/BasicTableUI.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -281,0 +281,2 @@\n+        LookAndFeel.uninstallColorsAndFont(toolBar);\n+\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/plaf\/basic\/BasicToolBarUI.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -108,0 +108,1 @@\n+        LookAndFeel.uninstallColorsAndFont(c);\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/plaf\/basic\/BasicToolTipUI.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2014, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -93,0 +93,1 @@\n+        LookAndFeel.uninstallColorsAndFont(c);\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/plaf\/basic\/BasicViewportUI.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2003, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -73,0 +73,6 @@\n+    @Override\n+    protected void uninstallDefaults() {\n+        super.uninstallDefaults();\n+        LookAndFeel.uninstallColors(desktopIcon);\n+    }\n+\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/plaf\/metal\/MetalDesktopIconUI.java","additions":7,"deletions":1,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -76,1 +76,1 @@\n-    static final String TEXT[] = new String[]{\n+    static final String[] TEXT = new String[]{\n@@ -88,1 +88,0 @@\n-    static JComponent component;\n@@ -100,7 +99,3 @@\n-                    for (final boolean html : new boolean[]{true, false}) {\n-                        for (String text : TEXT) {\n-                            if (html) {\n-                                text = \"<html>\" + text + \"<\/html>\";\n-                            }\n-                            test(text);\n-                        }\n+                    for (String text : TEXT) {\n+                        test(\"<html>\" + text + \"<\/html>\");\n+                        test(text);\n@@ -115,31 +110,0 @@\n-        \/\/ Each Callable create a component to be tested\n-        final List<Callable<JComponent>> comps = List.of(\n-                () -> new JLabel(text),\n-                () -> new JButton(text),\n-                () -> new JMenuItem(text),\n-                () -> new JMenu(text),\n-                () -> new JList<>(new String[]{text}),\n-                () -> new JComboBox<>(new String[]{text}),\n-                () -> new JTextField(text),\n-                () -> new JTextArea(text),\n-                () -> new JCheckBox(text),\n-                () -> new JFormattedTextField(text),\n-                () -> new JRadioButton(text),\n-                () -> new JTree(new DefaultMutableTreeNode(text)),\n-                () -> new JSpinner(new SpinnerListModel(new String[]{text})),\n-                () -> {\n-                    JToolTip tip = new JToolTip();\n-                    tip.setTipText(text);\n-                    return tip;\n-                    },\n-                () -> {\n-                    JEditorPane pane = new JEditorPane();\n-                    pane.setText(text);\n-                    return pane;\n-                    },\n-                () -> {\n-                    JTable table = new JTable(1, 1);\n-                    table.getModel().setValueAt(text, 0, 0);\n-                    return table;\n-                    }\n-        );\n@@ -147,4 +111,12 @@\n-        for (final Callable<JComponent> creator : comps) {\n-            checkComponent(creator);\n-        }\n-    }\n+        checkComponent(new JButton(text));\n+        checkComponent(new JMenuItem(text));\n+        checkComponent(new JMenu(text));\n+        checkComponent(new JList<>(new String[]{text}));\n+        checkComponent(new JComboBox<>(new String[]{text}));\n+        checkComponent(new JTextField(text));\n+        checkComponent(new JTextArea(text));\n+        checkComponent(new JCheckBox(text));\n+        checkComponent(new JFormattedTextField(text));\n+        checkComponent(new JRadioButton(text));\n+        checkComponent(new JTree(new DefaultMutableTreeNode(text)));\n+        checkComponent(new JSpinner(new SpinnerListModel(new String[]{text})));\n@@ -152,2 +124,3 @@\n-    static void checkComponent(Callable<JComponent> creator) throws Exception {\n-        EventQueue.invokeAndWait(() -> {\n+        JToolTip tip = new JToolTip();\n+        tip.setToolTipText(text);\n+        checkComponent(tip);\n@@ -155,5 +128,8 @@\n-            try {\n-                component = creator.call();\n-            } catch (Exception e) {\n-                throw new RuntimeException(e);\n-            }\n+        JEditorPane pane = new JEditorPane();\n+        pane.setText(text);\n+        checkComponent(pane);\n+\n+        JTable table = new JTable(1, 1);\n+        table.getModel().setValueAt(text, 0, 0);\n+        checkComponent(table);\n+    }\n@@ -161,0 +137,2 @@\n+    static void checkComponent(JComponent component) throws Exception {\n+        EventQueue.invokeAndWait(() -> {\n","filename":"test\/jdk\/javax\/swing\/GraphicsConfigNotifier\/StalePreferredSize.java","additions":29,"deletions":51,"binary":false,"changes":80,"status":"modified"}]}