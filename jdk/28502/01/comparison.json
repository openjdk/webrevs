{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2014, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -83,2 +83,0 @@\n-                            } else if (f.isMaximum() && f.isIcon()) {\n-                                f.setIcon(false);\n@@ -86,1 +84,6 @@\n-                                f.setMaximum(false);\n+                                \/\/ If frame being activated is set to maximised\n+                                \/\/ and iconified, let it be maximised\n+                                \/\/ else remain non-maximised\n+                                if (f.isIcon()) {\n+                                    f.setIcon(false);\n+                                }\n","filename":"src\/java.desktop\/windows\/classes\/com\/sun\/java\/swing\/plaf\/windows\/WindowsDesktopManager.java","additions":7,"deletions":4,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -0,0 +1,100 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 6681958\n+ * @summary Verifies Maximization state of JInternalFrames is\n+ *          not corrupted by WindowsDesktopManager\n+ * @requires (os.family == \"windows\")\n+ * @library \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame\n+ * @run main\/manual JIFMaximizedTrfAttribute\n+ *\/\n+\n+import java.awt.event.ActionEvent;\n+import java.awt.event.ActionListener;\n+import java.awt.BorderLayout;\n+\n+import javax.swing.JButton;\n+import javax.swing.JDesktopPane;\n+import javax.swing.JFrame;\n+import javax.swing.JInternalFrame;\n+import javax.swing.UIManager;\n+\n+import java.beans.PropertyVetoException;\n+\n+public class JIFMaximizedTrfAttribute {\n+\n+    static final String INSTRUCTIONS = \"\"\"\n+        A maximised JInternalFrame would be shown with a\n+        button \"open another internal frame\".\n+        Press the button on the internal frame.\n+        A second internal frame is created and opened.\n+        If second internal frame is maximized,\n+        press Pass else press Fail.\"\"\";\n+\n+    public static void main(String[] args) throws Exception {\n+        \/\/ Set Windows L&F\n+        UIManager.setLookAndFeel(\"com.sun.java.swing.plaf.windows.WindowsLookAndFeel\");\n+        PassFailJFrame.builder()\n+                .title(\"Test Instructions\")\n+                .instructions(INSTRUCTIONS)\n+                .columns(50)\n+                .testUI(JIFMaximizedTrfAttribute::createUI)\n+                .position(PassFailJFrame.Position.TOP_LEFT_CORNER)\n+                .build()\n+                .awaitAndCheck();\n+    }\n+\n+    static JFrame createUI() {\n+\n+        final JDesktopPane pane = new JDesktopPane();\n+        final JInternalFrame internal = new JInternalFrame(\"the first internal frame\", true, true, true, true);\n+        pane.add(internal);\n+        internal.setBounds(0, 0, 200, 100);\n+        try {\n+            internal.setMaximum(true);\n+        } catch (PropertyVetoException e) { }\n+        internal.setVisible(true);\n+        JButton button = new JButton(\"open another internal frame\");\n+        button.addActionListener(new ActionListener() {\n+            public void actionPerformed(ActionEvent evt) {\n+                final JInternalFrame internal2 = new JInternalFrame(\"another one\", true, true, true, true);\n+                pane.add(internal2);\n+                internal2.setBounds(250, 150, 200, 100);\n+                try {\n+                    internal2.setMaximum(true);\n+                } catch (PropertyVetoException e) {}\n+                internal2.setVisible(true);\n+            }\n+        });\n+        internal.add(button, BorderLayout.SOUTH);\n+\n+        JFrame f = new JFrame(\"JIFMaximizedTrfAttribute\");\n+        f.add(pane, BorderLayout.CENTER);\n+        f.setSize(800, 600);\n+        f.setLocationRelativeTo(null);\n+        return f;\n+    }\n+}\n","filename":"test\/jdk\/javax\/swing\/JInternalFrame\/JIFMaximizedTrfAttribute.java","additions":100,"deletions":0,"binary":false,"changes":100,"status":"added"}]}