{"files":[{"patch":"@@ -1258,16 +1258,7 @@\n-  if (expanded_by > 0) {\n-    size_t actual_expand_bytes = expanded_by * HeapRegion::GrainBytes;\n-    assert(actual_expand_bytes <= aligned_expand_bytes, \"post-condition\");\n-    policy()->record_new_heap_size(num_regions());\n-  } else {\n-    log_debug(gc, ergo, heap)(\"Did not expand the heap (heap expansion operation failed)\");\n-\n-    \/\/ The expansion of the virtual storage space was unsuccessful.\n-    \/\/ Let's see if it was because we ran out of swap.\n-    if (G1ExitOnExpansionFailure &&\n-        _hrm.available() >= regions_to_expand) {\n-      \/\/ We had head room...\n-      vm_exit_out_of_memory(aligned_expand_bytes, OOM_MMAP_ERROR, \"G1 heap expansion\");\n-    }\n-  }\n-  return expanded_by > 0;\n+  assert(expanded_by > 0, \"must have failed during commit.\");\n+\n+  size_t actual_expand_bytes = expanded_by * HeapRegion::GrainBytes;\n+  assert(actual_expand_bytes <= aligned_expand_bytes, \"post-condition\");\n+  policy()->record_new_heap_size(num_regions());\n+\n+  return true;\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CollectedHeap.cpp","additions":7,"deletions":16,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -239,4 +239,0 @@\n-  develop(bool, G1ExitOnExpansionFailure, false,                            \\\n-          \"Raise a fatal VM exit out of memory failure in the event \"       \\\n-          \" that heap expansion fails due to running out of swap.\")         \\\n-                                                                            \\\n","filename":"src\/hotspot\/share\/gc\/g1\/g1_globals.hpp","additions":0,"deletions":4,"binary":false,"changes":4,"status":"modified"}]}