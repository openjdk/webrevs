{"files":[{"patch":"@@ -2,2 +2,2 @@\n- * Copyright (c) 2016, 2023, Oracle and\/or its affiliates. All rights reserved.\n- * Copyright (c) 2016, 2023 SAP SE. All rights reserved.\n+ * Copyright (c) 2016, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2024 SAP SE. All rights reserved.\n@@ -3917,1 +3917,1 @@\n-  __ z_sllg(offset, offset, LogBytesPerWord); \/\/ Convert to to offset.\n+  __ z_sllg(offset, offset, LogBytesPerWord); \/\/ Convert to offset.\n@@ -3922,9 +3922,4 @@\n-  \/\/ Make sure klass is initialized & doesn't have finalizer.\n-  \/\/ Make sure klass is fully initialized.\n-  const int state_offset = in_bytes(InstanceKlass::init_state_offset());\n-  if (Immediate::is_uimm12(state_offset)) {\n-    __ z_cli(state_offset, iklass, InstanceKlass::fully_initialized);\n-  } else {\n-    __ z_cliy(state_offset, iklass, InstanceKlass::fully_initialized);\n-  }\n-  __ z_brne(slow_case);\n+  \/\/ make sure klass is initialized\n+  assert(VM_Version::supports_fast_class_init_checks(),\n+         \"Optimization requires support for fast class initialization checks\");\n+  __ clinit_barrier(iklass, Z_thread, nullptr \/*L_fast_path*\/, &slow_case);\n","filename":"src\/hotspot\/cpu\/s390\/templateTable_s390.cpp","additions":7,"deletions":12,"binary":false,"changes":19,"status":"modified"}]}