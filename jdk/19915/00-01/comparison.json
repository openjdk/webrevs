{"files":[{"patch":"@@ -156,1 +156,1 @@\n-  heap->free_set()->log_status();\n+  heap->free_set()->log_status_with_heap_lock();\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahConcurrentGC.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -150,1 +150,1 @@\n-      heap->free_set()->log_status();\n+      heap->free_set()->log_status_with_heap_lock();\n@@ -178,1 +178,1 @@\n-      heap->free_set()->log_status();\n+      heap->free_set()->log_status_with_heap_lock();\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahControlThread.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1082,0 +1082,1 @@\n+  log_status();\n@@ -1132,1 +1133,1 @@\n-void ShenandoahFreeSet::log_status() {\n+void ShenandoahFreeSet::log_status_with_heap_lock() {\n@@ -1135,0 +1136,12 @@\n+  if (LogTarget(Info, gc, free)::is_enabled()\n+#ifdef ASSERT\n+   || LogTarget(Debug, gc, free)::is_enabled()\n+#endif\n+   ) {\n+    ShenandoahHeapLocker locker(_heap->lock());\n+    log_status();\n+   }\n+}\n+\n+void ShenandoahFreeSet::log_status() {\n+  shenandoah_assert_heaplocked();\n@@ -1138,1 +1151,0 @@\n-    ShenandoahHeapLocker locker(_heap->lock());\n@@ -1192,1 +1204,0 @@\n-    ShenandoahHeapLocker locker(_heap->lock());\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahFreeSet.cpp","additions":14,"deletions":3,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -321,0 +321,2 @@\n+  void log_status();\n+\n@@ -343,1 +345,2 @@\n-  void log_status();\n+\n+  void log_status_with_heap_lock();\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahFreeSet.hpp","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -241,1 +241,0 @@\n-  heap->free_set()->log_status();\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahFullGC.cpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -381,1 +381,0 @@\n-  _free_set->log_status();\n@@ -2297,1 +2296,0 @@\n-  _free_set->log_status();\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahHeap.cpp","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"}]}