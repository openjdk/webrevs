{"files":[{"patch":"@@ -45,0 +45,2 @@\n+import java.util.regex.Matcher;\n+import java.util.regex.Pattern;\n@@ -49,0 +51,2 @@\n+\n+import jdk.test.lib.Asserts;\n@@ -288,4 +292,17 @@\n-                                             int expected_number_of_push_pop_at_load_barrier_fregs) throws Exception {\n-        String keyString = keyword + expected_number_of_push_pop_at_load_barrier_fregs + \" \" + expected_freg_type + \" registers\";\n-        if (!containOnlyOneOccuranceOfKeyword(stdout, keyString)) {\n-            throw new RuntimeException(\"Stdout is expected to contain only one occurance of keyString: \" + \"'\" + keyString + \"'\");\n+                                             int expected_number_of_fregs) throws Exception {\n+        String expected = keyword + expected_number_of_fregs + \" \" + expected_freg_type + \" registers\";\n+\n+        String regex = keyword + \"(\\\\d+) \" + expected_freg_type + \" registers\";\n+        Pattern p = Pattern.compile(regex);\n+        Matcher m = p.matcher(stdout);\n+\n+        if (m.find()) {\n+            String found = m.group();\n+            Asserts.assertEquals(found, expected, \"found '\" + found + \"' but should print '\" + expected + \"'\");\n+        } else {\n+            throw new RuntimeException(\"'\" + regex + \"' is not found in stdout\");\n+        }\n+\n+        if (m.find()) {\n+            throw new RuntimeException(\"Stdout is expected to contain only one occurance of '\" + regex +\n+                                       \"'. Found another occurance: '\" + m.group() + \"'\");\n","filename":"test\/hotspot\/jtreg\/gc\/z\/TestRegistersPushPopAtZGCLoadBarrierStub.java","additions":21,"deletions":4,"binary":false,"changes":25,"status":"modified"}]}