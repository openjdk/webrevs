{"files":[{"patch":"@@ -559,1 +559,0 @@\n-\n@@ -711,0 +710,1 @@\n+        List<JCExpression> elems = na.elems;\n@@ -713,0 +713,3 @@\n+            if (elems == null) {\n+                elems = List.nil();\n+            }\n@@ -715,1 +718,1 @@\n-        for (List<JCExpression> l = na.elems; l.nonEmpty(); l=l.tail) {\n+        for (List<JCExpression> l = elems; l.nonEmpty(); l = l.tail) {\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/comp\/Annotate.java","additions":5,"deletions":2,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -0,0 +1,19 @@\n+\/*\n+ * @test \/nodynamiccopyright\/\n+ * @bug 8320144\n+ * @summary Compilation crashes when a custom annotation with invalid default value is used\n+ * @compile\/fail\/ref=T8320144.out -XDrawDiagnostics T8320144.java\n+ *\/\n+import java.lang.annotation.ElementType;\n+import java.lang.annotation.Retention;\n+import java.lang.annotation.RetentionPolicy;\n+import java.lang.annotation.Target;\n+\n+public class T8320144 {\n+    @Retention(RetentionPolicy.RUNTIME)\n+    @Target({ElementType.TYPE})\n+    public @interface TestAnnotation {\n+        public String[] excludeModules() default new String[0];\n+        public String[] value() default new String[] { 3 };\n+    }\n+}\n","filename":"test\/langtools\/tools\/javac\/T8320144.java","additions":19,"deletions":0,"binary":false,"changes":19,"status":"added"},{"patch":"@@ -0,0 +1,4 @@\n+T8320144.java:16:54: compiler.err.new.not.allowed.in.annotation\n+T8320144.java:17:45: compiler.err.new.not.allowed.in.annotation\n+T8320144.java:17:56: compiler.err.prob.found.req: (compiler.misc.inconvertible.types: int, java.lang.String)\n+3 errors\n","filename":"test\/langtools\/tools\/javac\/T8320144.out","additions":4,"deletions":0,"binary":false,"changes":4,"status":"added"}]}