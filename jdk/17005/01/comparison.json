{"files":[{"patch":"@@ -33,1 +33,1 @@\n- * @run driver TestAutoCreateSharedArchiveUpgrade\n+ * @run driver\/timeout=600 TestAutoCreateSharedArchiveUpgrade\n@@ -55,1 +55,1 @@\n-    \/\/ If you're unning this test using something like\n+    \/\/ If you're running this test using something like\n@@ -93,1 +93,1 @@\n-            } catch (NumberFormatException e) {\n+            } catch (RuntimeException e) {\n@@ -106,1 +106,4 @@\n-        if (fetchVersion >= 19) {\n+        \/\/\n+        if (fetchVersion < 19 && fetchVersion > 0) {\n+            throw new RuntimeException(\"Unsupported JDK version \" + fetchVersion);\n+        } else if (fetchVersion >= 19) {\n@@ -118,0 +121,14 @@\n+        if (fetchVersion >= 19) {\n+            oldJVM = fetchJDK(fetchVersion) + FS + \"bin\" + FS + \"java\";\n+        } else if (fetchVersion > 0) {\n+            throw new RuntimeException(\"Unsupported JDK version \" + fetchVersion);\n+        } else if (PREV_JDK != null) {\n+            oldJVM = PREV_JDK + FS + \"bin\" + FS + \"java\";\n+        } else if (BOOT_JDK != null) {\n+            oldJVM = BOOT_JDK + FS + \"bin\" + FS + \"java\";\n+        } else {\n+            throw new SkippedException(\"Use -Dtest.previous.jdk or -Dtest.boot.jdk to specify a \" +\n+                                      \"previous version of the JDK that supports \" +\n+                                      \"-XX:+AutoCreateSharedArchive\");\n+        }\n+\n@@ -190,0 +207,3 @@\n+            case 21:\n+                build = 35;\n+                break;\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/dynamicArchive\/TestAutoCreateSharedArchiveUpgrade.java","additions":24,"deletions":4,"binary":false,"changes":28,"status":"modified"}]}