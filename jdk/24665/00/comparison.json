{"files":[{"patch":"@@ -573,1 +573,1 @@\n-    resolved_klasses()->at_put(resolved_klass_index, nullptr);\n+    \/\/ This might be at a safepoint but do this in the right order.\n@@ -575,0 +575,1 @@\n+    resolved_klasses()->at_put(resolved_klass_index, nullptr);\n@@ -653,3 +654,2 @@\n-    if (klass != nullptr) {\n-      return klass;\n-    }\n+    assert(klass != nullptr, \"must be resolved\");\n+    return klass;\n@@ -722,1 +722,1 @@\n-    this_cp->resolved_klasses()->at_put(resolved_klass_index, nullptr);\n+    Atomic::store(adr, (Klass*)nullptr);\n@@ -742,1 +742,1 @@\n-    assert(k != nullptr, \"should be resolved\");\n+    assert(k != nullptr, \"must be resolved\");\n@@ -1131,8 +1131,1 @@\n-    {\n-      CPKlassSlot kslot = this_cp->klass_slot_at(cp_index);\n-      int resolved_klass_index = kslot.resolved_klass_index();\n-      if (this_cp->resolved_klasses()->at(resolved_klass_index) == nullptr) {\n-        (*status_return) = false;\n-        return nullptr;\n-      }\n-      \/\/ the klass is waiting in the CP; go get it\n+      assert(this_cp->resolved_klass_at(cp_index) != nullptr, \"must be resolved\");\n@@ -1140,1 +1133,0 @@\n-    }\n","filename":"src\/hotspot\/share\/oops\/constantPool.cpp","additions":7,"deletions":15,"binary":false,"changes":22,"status":"modified"}]}