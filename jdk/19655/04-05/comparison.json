{"files":[{"patch":"@@ -40,12 +40,2 @@\n-    if (pc != nullptr) {\n-      bool created = false;\n-      const char** cached_frame_text = _cache.put_if_absent(pc, &created);\n-      if (created) {\n-        stringStream ss(4 * K);\n-        stack->print_frame(&ss, pc);\n-        const size_t len = strlen(ss.base());\n-        char* store = NEW_ARENA_ARRAY(&_text_storage, char, len + 1);\n-        strcpy(store, ss.base());\n-        (*cached_frame_text) = store;\n-      }\n-      _out->print_raw_cr(*cached_frame_text);\n+    if (pc == nullptr) {\n+      break;\n@@ -53,0 +43,11 @@\n+    bool created = false;\n+    const char** cached_frame_text = _cache.put_if_absent(pc, &created);\n+    if (created) {\n+      stringStream ss(4 * K);\n+      stack->print_frame(&ss, pc);\n+      const size_t len = ss.size();\n+      char* store = NEW_ARENA_ARRAY(&_text_storage, char, len + 1);\n+      memcpy(store, ss.base(), len + 1);\n+      (*cached_frame_text) = store;\n+    }\n+    _out->print_raw_cr(*cached_frame_text);\n","filename":"src\/hotspot\/share\/nmt\/nativeCallStackPrinter.cpp","additions":13,"deletions":12,"binary":false,"changes":25,"status":"modified"}]}