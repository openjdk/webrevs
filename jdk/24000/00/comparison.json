{"files":[{"patch":"@@ -863,27 +863,0 @@\n-void MetaspaceShared::get_default_classlist(char* default_classlist, const size_t buf_size) {\n-  \/\/ Construct the path to the class list (in jre\/lib)\n-  \/\/ Walk up two directories from the location of the VM and\n-  \/\/ optionally tack on \"lib\" (depending on platform)\n-  os::jvm_path(default_classlist, (jint)(buf_size));\n-  for (int i = 0; i < 3; i++) {\n-    char *end = strrchr(default_classlist, *os::file_separator());\n-    if (end != nullptr) *end = '\\0';\n-  }\n-  size_t classlist_path_len = strlen(default_classlist);\n-  if (classlist_path_len >= 3) {\n-    if (strcmp(default_classlist + classlist_path_len - 3, \"lib\") != 0) {\n-      if (classlist_path_len < buf_size - 4) {\n-        jio_snprintf(default_classlist + classlist_path_len,\n-                     buf_size - classlist_path_len,\n-                     \"%slib\", os::file_separator());\n-        classlist_path_len += 4;\n-      }\n-    }\n-  }\n-  if (classlist_path_len < buf_size - 10) {\n-    jio_snprintf(default_classlist + classlist_path_len,\n-                 buf_size - classlist_path_len,\n-                 \"%sclasslist\", os::file_separator());\n-  }\n-}\n-\n@@ -893,0 +866,1 @@\n+  const char* filesep = os::file_separator();\n@@ -894,1 +868,2 @@\n-  get_default_classlist(default_classlist, sizeof(default_classlist));\n+  jio_snprintf(default_classlist, JVM_MAXPATHLEN, \"%s%slib%sclasslist\",\n+               Arguments::get_java_home(), filesep, filesep);\n@@ -949,1 +924,3 @@\n-    get_default_classlist(default_classlist, sizeof(default_classlist));\n+    const char* filesep = os::file_separator();\n+    jio_snprintf(default_classlist, JVM_MAXPATHLEN, \"%s%slib%sclasslist\",\n+                 Arguments::get_java_home(), filesep, filesep);\n","filename":"src\/hotspot\/share\/cds\/metaspaceShared.cpp","additions":6,"deletions":29,"binary":false,"changes":35,"status":"modified"},{"patch":"@@ -198,1 +198,0 @@\n-  static void get_default_classlist(char* default_classlist, const size_t buf_size);\n","filename":"src\/hotspot\/share\/cds\/metaspaceShared.hpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"}]}