{"files":[{"patch":"@@ -24,7 +24,0 @@\n-\/*\n-  @key headful\n-  @bug 4515763\n-  @summary Tests that clicking mouse and pressing keys generates correct amount of click-counts\n-  @run main ClickDuringKeypress\n-*\/\n-\n@@ -43,0 +36,8 @@\n+\/*\n+  @test\n+  @key headful\n+  @bug 4515763\n+  @summary Tests that clicking mouse and pressing keys generates correct amount of click-counts\n+  @run main ClickDuringKeypress\n+*\/\n+\n@@ -46,1 +47,1 @@\n-   final static int DOUBLE_CLICK_AUTO_DELAY = 10;\n+   final static int DOUBLE_CLICK_AUTO_DELAY = 20;\n@@ -53,1 +54,1 @@\n-   static volatile ClickDuringKeypress clicker;\n+   static final ClickDuringKeypress clicker = new ClickDuringKeypress();\n@@ -56,1 +57,0 @@\n-       clicker = new ClickDuringKeypress();\n@@ -60,0 +60,2 @@\n+           robot.setAutoWaitForIdle(true);\n+           robot.delay(2000);\n@@ -61,1 +63,2 @@\n-           EventQueue.invokeAndWait(frame::show);\n+           robot.delay(2000);\n+           EventQueue.invokeAndWait(() -> frame.setVisible(true));\n@@ -75,1 +78,0 @@\n-              synchronized(clicker) {\n@@ -77,2 +79,0 @@\n-                  ClickDuringKeypress.clicker.notifyAll();\n-              }\n@@ -85,11 +85,5 @@\n-       synchronized(clicker) {\n-           try {\n-               if (!ready) {\n-                   clicker.wait(5000);\n-               }\n-           } catch (InterruptedException ex) {\n-           }\n-           if (!ready) {\n-               System.out.println(\"Not Activated. Test fails\");\n-               throw new RuntimeException(\"Not Activated. Test fails\");\n-           }\n+       robot.waitForIdle();\n+       robot.delay(1000);\n+       if (!ready) {\n+           System.out.println(\"Not Activated. Test fails\");\n+           throw new RuntimeException(\"Not Activated. Test fails\");\n@@ -102,1 +96,0 @@\n-      robot.delay(10);\n@@ -111,1 +104,0 @@\n-        robot.delay(10);\n@@ -114,1 +106,0 @@\n-        robot.delay(10);\n@@ -117,1 +108,0 @@\n-        robot.delay(10);\n","filename":"test\/jdk\/java\/awt\/event\/MouseEvent\/ClickDuringKeypress\/ClickDuringKeypress.java","additions":19,"deletions":29,"binary":false,"changes":48,"status":"modified"}]}