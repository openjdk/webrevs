{"files":[{"patch":"@@ -235,1 +235,1 @@\n-                        debug.log(\"Not initiating idle connection close\");\n+                        debug.log(\"Idle timeout event already cancelled, not initiating idle connection close\");\n@@ -2079,1 +2079,1 @@\n-                    final String stateStr = \"Erroneous close=\" + tc.isErroneousClose() +\n+                    final String stateStr = \"Abnormal close=\" + tc.isAbnormalClose() +\n","filename":"src\/java.net.http\/share\/classes\/jdk\/internal\/net\/http\/Http2Connection.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -70,1 +70,1 @@\n-     * Even a normal {@linkplain #isErroneousClose() non-erroneous} termination will have\n+     * Even a {@linkplain #isAbnormalClose() normal} termination will have\n@@ -81,1 +81,1 @@\n-     * is not considered as an erroneous termination and this method returns {@code false} for\n+     * is not considered as an abnormal termination and this method returns {@code false} for\n@@ -84,1 +84,1 @@\n-    public abstract boolean isErroneousClose();\n+    public abstract boolean isAbnormalClose();\n@@ -118,1 +118,1 @@\n-     * {@linkplain #isErroneousClose() erroneous} termination due to the given {@code cause}.\n+     * {@linkplain #isAbnormalClose() abnormal} termination due to the given {@code cause}.\n@@ -131,2 +131,2 @@\n-     * Returns a connection termination cause that represents a normal\n-     * {@linkplain #isErroneousClose() non-erroneous} termination.\n+     * Returns a connection termination cause that represents a\n+     * {@linkplain #isAbnormalClose() normal} termination.\n@@ -139,2 +139,2 @@\n-     * Returns a connection termination cause that represents a normal\n-     * {@linkplain #isErroneousClose() non-erroneous} termination due to the connection\n+     * Returns a connection termination cause that represents a\n+     * {@linkplain #isAbnormalClose() normal} termination due to the connection\n@@ -144,1 +144,1 @@\n-        return new NoError(\"HTTP\/2 connection idle timed out\", \"idle timed out\");\n+        return NoError.IDLE_TIMED_OUT;\n@@ -149,1 +149,1 @@\n-     * {@linkplain #isErroneousClose() erroneous} termination due to the given {@code errorCode}.\n+     * {@linkplain #isAbnormalClose() abnormal} termination due to the given {@code errorCode}.\n@@ -182,0 +182,2 @@\n+        private static final IOException NO_ERROR_IDLE_TIMED_OUT_MARKER =\n+                new IOException(\"HTTP\/2 connection idle timed out - no error\");\n@@ -184,1 +186,1 @@\n-            \/\/ remove the stacktrace from this marker exception instance\n+            \/\/ remove the stacktrace from the marker exception instances\n@@ -186,0 +188,1 @@\n+            NO_ERROR_IDLE_TIMED_OUT_MARKER.setStackTrace(new StackTraceElement[0]);\n@@ -188,1 +191,2 @@\n-        private static final NoError INSTANCE = new NoError();\n+        private static final NoError INSTANCE = new NoError(false);\n+        private static final NoError IDLE_TIMED_OUT = new NoError(true);\n@@ -190,4 +194,1 @@\n-        private NoError() {\n-            super(ErrorFrame.NO_ERROR, NO_ERROR_MARKER);\n-            setPeerVisibleReason(\"no error\");\n-        }\n+        private final boolean idleTimedOut;\n@@ -195,5 +196,5 @@\n-        private NoError(final String loggedAs, final String peerVisibleReason) {\n-            super(ErrorFrame.NO_ERROR, loggedAs);\n-            if (peerVisibleReason != null) {\n-                setPeerVisibleReason(peerVisibleReason);\n-            }\n+        private NoError(final boolean idleTimedOut) {\n+            super(ErrorFrame.NO_ERROR,\n+                    idleTimedOut ? NO_ERROR_IDLE_TIMED_OUT_MARKER : NO_ERROR_MARKER);\n+            this.idleTimedOut = idleTimedOut;\n+            setPeerVisibleReason(idleTimedOut ? \"idle timed out\" : \"no error\");\n@@ -203,1 +204,1 @@\n-        public boolean isErroneousClose() {\n+        public boolean isAbnormalClose() {\n@@ -209,1 +210,3 @@\n-            return \"No error - normal termination\";\n+            return this.idleTimedOut\n+                    ? \"No error - idle timed out\"\n+                    : \"No error - normal termination\";\n@@ -225,1 +228,1 @@\n-        public boolean isErroneousClose() {\n+        public boolean isAbnormalClose() {\n@@ -252,1 +255,1 @@\n-        public boolean isErroneousClose() {\n+        public boolean isAbnormalClose() {\n@@ -268,1 +271,1 @@\n-        public boolean isErroneousClose() {\n+        public boolean isAbnormalClose() {\n","filename":"src\/java.net.http\/share\/classes\/jdk\/internal\/net\/http\/Http2TerminationCause.java","additions":29,"deletions":26,"binary":false,"changes":55,"status":"modified"}]}