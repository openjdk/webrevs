{"files":[{"patch":"@@ -325,6 +325,1 @@\n-        \/* Get the range of pages we are to print. If the\n-         * last page to print is unknown, then we print to\n-         * the end of the document. Note that firstPage\n-         * and lastPage are 0 based page indices.\n-         *\/\n-\n+        \/\/ Note that firstPage is 0 based page index.\n@@ -332,7 +327,1 @@\n-        int lastPage = getLastPage();\n-        if(lastPage == Pageable.UNKNOWN_NUMBER_OF_PAGES) {\n-            int totalPages = mDocument.getNumberOfPages();\n-            if (totalPages != Pageable.UNKNOWN_NUMBER_OF_PAGES) {\n-                lastPage = mDocument.getNumberOfPages() - 1;\n-            }\n-        }\n+        int totalPages = mDocument.getNumberOfPages();\n@@ -363,1 +352,1 @@\n-                        if (printLoop(false, firstPage, lastPage)) {\n+                        if (printLoop(false, firstPage, totalPages)) {\n@@ -377,1 +366,1 @@\n-                        printLoop(true, firstPage, lastPage);\n+                        printLoop(true, firstPage, totalPages);\n@@ -387,1 +376,0 @@\n-                     lastPage = prMembers[loopi][1] -1;\n@@ -637,1 +625,1 @@\n-    private native boolean printLoop(boolean waitUntilDone, int firstPage, int lastPage) throws PrinterException;\n+    private native boolean printLoop(boolean waitUntilDone, int firstPage, int totalPages) throws PrinterException;\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/lwawt\/macosx\/CPrinterJob.java","additions":5,"deletions":17,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -659,1 +659,1 @@\n-  (JNIEnv *env, jobject jthis, jboolean blocks, jint firstPage, jint lastPage)\n+  (JNIEnv *env, jobject jthis, jboolean blocks, jint firstPage, jint totalPages)\n@@ -675,1 +675,1 @@\n-    jobject page = (*env)->CallObjectMethod(env, jthis, jm_getPageFormat, 0); \/\/ AWT_THREADING Safe (!appKit)\n+    jobject page = (*env)->CallObjectMethod(env, jthis, jm_getPageFormat, firstPage); \/\/ AWT_THREADING Safe (!appKit)\n@@ -682,1 +682,1 @@\n-        [printerView setFirstPage:firstPage lastPage:lastPage];\n+        [printerView setTotalPages:totalPages];\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/CPrinterJob.m","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -35,1 +35,1 @@\n-    jint fFirstPage, fLastPage;\n+    jint fTotalPages;\n@@ -40,1 +40,1 @@\n-- (void)setFirstPage:(jint)firstPage lastPage:(jint)lastPage;\n+- (void)setTotalPages:(jint)totalPages;\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/PrinterView.h","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -75,3 +75,2 @@\n-- (void)setFirstPage:(jint)firstPage lastPage:(jint)lastPage {\n-    fFirstPage = firstPage;\n-    fLastPage = lastPage;\n+- (void)setTotalPages:(jint)totalPages {\n+    fTotalPages = totalPages;\n@@ -142,1 +141,1 @@\n-    aRange->location = fFirstPage + 1;\n+    aRange->location = 1;\n@@ -144,1 +143,1 @@\n-    if (fLastPage == java_awt_print_Pageable_UNKNOWN_NUMBER_OF_PAGES)\n+    if (fTotalPages == java_awt_print_Pageable_UNKNOWN_NUMBER_OF_PAGES)\n@@ -150,1 +149,1 @@\n-        aRange->length = (fLastPage + 1) - fFirstPage;\n+        aRange->length = fTotalPages;\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/PrinterView.m","additions":5,"deletions":6,"binary":false,"changes":11,"status":"modified"}]}