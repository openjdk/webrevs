{"files":[{"patch":"@@ -36,0 +36,1 @@\n+import compiler.lib.generators.Generator;\n@@ -37,3 +38,1 @@\n-import jdk.incubator.vector.Float16;\n-import static jdk.incubator.vector.Float16.*;\n-import static java.lang.Float.*;\n+import compiler.lib.verify.Verify;\n@@ -41,0 +40,1 @@\n+import jdk.incubator.vector.Float16;\n@@ -42,1 +42,0 @@\n-import compiler.lib.generators.Generator;\n@@ -44,0 +43,2 @@\n+import static java.lang.Float.*;\n+import static jdk.incubator.vector.Float16.*;\n@@ -76,8 +77,0 @@\n-    public static void assertResults(short expected, short actual, String reductionFunc) {\n-        Float16 expected_fp16 = shortBitsToFloat16(expected);\n-        Float16 actual_fp16 = shortBitsToFloat16(actual);\n-        if(!expected_fp16.equals(actual_fp16)) {\n-            throw new AssertionError(\"Result Mismatch!, reduction type = \" + reductionFunc + \" actual = \" + actual_fp16 +  \" expected = \" + expected_fp16);\n-        }\n-    }\n-\n@@ -466,1 +459,1 @@\n-            result = float16ToRawShortBits(Float16.add(Float16.shortBitsToFloat16(result), Float16.shortBitsToFloat16(input1[i])));\n+            result = float16ToRawShortBits(add(shortBitsToFloat16(result), shortBitsToFloat16(input1[i])));\n@@ -477,1 +470,1 @@\n-        assertResults(expected, vectorAddReductionFloat16(), \"vectorAddReductionFloat16\");\n+        Verify.checkEQ(shortBitsToFloat16(expected), shortBitsToFloat16(vectorAddReductionFloat16()));\n@@ -488,1 +481,1 @@\n-            result = float16ToRawShortBits(Float16.multiply(Float16.shortBitsToFloat16(result), Float16.shortBitsToFloat16(input1[i])));\n+            result = float16ToRawShortBits(multiply(shortBitsToFloat16(result), shortBitsToFloat16(input1[i])));\n@@ -499,1 +492,1 @@\n-        assertResults(expected, vectorMulReductionFloat16(), \"vectorMulReductionFloat16\");\n+        Verify.checkEQ(shortBitsToFloat16(expected), shortBitsToFloat16(vectorMulReductionFloat16()));\n@@ -512,4 +505,4 @@\n-            result = float16ToRawShortBits(Float16.add(Float16.shortBitsToFloat16(result), Float16.shortBitsToFloat16(input1[i])));\n-            result = float16ToRawShortBits(Float16.add(Float16.shortBitsToFloat16(result), Float16.shortBitsToFloat16(input1[i+1])));\n-            result = float16ToRawShortBits(Float16.add(Float16.shortBitsToFloat16(result), Float16.shortBitsToFloat16(input1[i+2])));\n-            result = float16ToRawShortBits(Float16.add(Float16.shortBitsToFloat16(result), Float16.shortBitsToFloat16(input1[i+3])));\n+            result = float16ToRawShortBits(add(shortBitsToFloat16(result), shortBitsToFloat16(input1[i])));\n+            result = float16ToRawShortBits(add(shortBitsToFloat16(result), shortBitsToFloat16(input1[i+1])));\n+            result = float16ToRawShortBits(add(shortBitsToFloat16(result), shortBitsToFloat16(input1[i+2])));\n+            result = float16ToRawShortBits(add(shortBitsToFloat16(result), shortBitsToFloat16(input1[i+3])));\n@@ -529,1 +522,1 @@\n-        assertResults(expected, vectorAddReductionFloat16Partial(), \"vectorAddReductionFloat16Partial\");\n+        Verify.checkEQ(shortBitsToFloat16(expected), shortBitsToFloat16(vectorAddReductionFloat16Partial()));\n@@ -539,4 +532,4 @@\n-            result = float16ToRawShortBits(Float16.multiply(Float16.shortBitsToFloat16(result), Float16.shortBitsToFloat16(input1[i])));\n-            result = float16ToRawShortBits(Float16.multiply(Float16.shortBitsToFloat16(result), Float16.shortBitsToFloat16(input1[i+1])));\n-            result = float16ToRawShortBits(Float16.multiply(Float16.shortBitsToFloat16(result), Float16.shortBitsToFloat16(input1[i+2])));\n-            result = float16ToRawShortBits(Float16.multiply(Float16.shortBitsToFloat16(result), Float16.shortBitsToFloat16(input1[i+3])));\n+            result = float16ToRawShortBits(multiply(shortBitsToFloat16(result), shortBitsToFloat16(input1[i])));\n+            result = float16ToRawShortBits(multiply(shortBitsToFloat16(result), shortBitsToFloat16(input1[i+1])));\n+            result = float16ToRawShortBits(multiply(shortBitsToFloat16(result), shortBitsToFloat16(input1[i+2])));\n+            result = float16ToRawShortBits(multiply(shortBitsToFloat16(result), shortBitsToFloat16(input1[i+3])));\n@@ -556,1 +549,1 @@\n-        assertResults(expected, vectorMulReductionFloat16Partial(), \"vectorMulReductionFloat16Partial\");\n+        Verify.checkEQ(shortBitsToFloat16(expected), shortBitsToFloat16(vectorMulReductionFloat16Partial()));\n","filename":"test\/hotspot\/jtreg\/compiler\/vectorization\/TestFloat16VectorOperations.java","additions":19,"deletions":26,"binary":false,"changes":45,"status":"modified"},{"patch":"@@ -323,1 +323,1 @@\n-           result = float16ToRawShortBits(Float16.add(Float16.shortBitsToFloat16(result), Float16.shortBitsToFloat16(vector1[i])));\n+           result = float16ToRawShortBits(add(shortBitsToFloat16(result), shortBitsToFloat16(vector1[i])));\n@@ -332,1 +332,1 @@\n-           result = float16ToRawShortBits(Float16.multiply(Float16.shortBitsToFloat16(result), Float16.shortBitsToFloat16(vector1[i])));\n+           result = float16ToRawShortBits(multiply(shortBitsToFloat16(result), shortBitsToFloat16(vector1[i])));\n","filename":"test\/micro\/org\/openjdk\/bench\/jdk\/incubator\/vector\/Float16OperationsBenchmark.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}