{"files":[{"patch":"@@ -84,2 +84,5 @@\n-  if (state == nullptr && thread != nullptr && thread->is_exiting()) {\n-    \/\/ Don't add a JvmtiThreadState to a thread that is exiting.\n+  if (state == nullptr && thread != nullptr &&\n+      (thread->is_exiting() || thread->is_attaching_via_jni())) {\n+    \/\/ Don't add a JvmtiThreadState to a thread that is exiting or is attaching.\n+    \/\/ When a thread is attaching, it may not have a Java level thread object\n+    \/\/ created yet.\n","filename":"src\/hotspot\/share\/prims\/jvmtiThreadState.inline.hpp","additions":5,"deletions":2,"binary":false,"changes":7,"status":"modified"}]}