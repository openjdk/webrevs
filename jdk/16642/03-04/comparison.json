{"files":[{"patch":"@@ -3142,7 +3142,5 @@\n-  \/\/ If the current thread is attaching from native and its thread oop is being\n-  \/\/ allocated, things are not ready for allocation sampling.\n-  if (thread->is_Java_thread()) {\n-    JavaThread* jt = JavaThread::cast(thread);\n-    if (jt->is_attaching_via_jni() && jt->threadObj() == nullptr) {\n-      return false;\n-    }\n+  \/\/ If the current thread is attaching from native and its Java thread object\n+  \/\/ is being allocated, things are not ready for allocation sampling.\n+  JavaThread* jt = JavaThread::cast(thread);\n+  if (jt->is_attaching_via_jni() && jt->threadObj() == nullptr) {\n+    return false;\n","filename":"src\/hotspot\/share\/prims\/jvmtiExport.cpp","additions":5,"deletions":7,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -92,1 +92,0 @@\n-#ifdef ASSERT\n@@ -97,4 +96,2 @@\n-  if (state != nullptr) {\n-    assert(state->get_thread_oop() != nullptr, \"incomplete state\");\n-  }\n-#endif\n+  assert(state == nullptr || state->get_thread_oop() != nullptr,\n+         \"incomplete state\");\n","filename":"src\/hotspot\/share\/prims\/jvmtiThreadState.inline.hpp","additions":2,"deletions":5,"binary":false,"changes":7,"status":"modified"}]}