{"files":[{"patch":"@@ -418,2 +418,2 @@\n-  _region_start(nullptr),\n-  DEBUG_ONLY(_region_end(nullptr) COMMA)\n+  _heap_start(nullptr),\n+  DEBUG_ONLY(_heap_end(nullptr) COMMA)\n@@ -428,1 +428,1 @@\n-bool ParallelCompactData::initialize(MemRegion covered_region)\n+bool ParallelCompactData::initialize(MemRegion reserved_heap)\n@@ -430,3 +430,3 @@\n-  _region_start = covered_region.start();\n-  const size_t region_size = covered_region.word_size();\n-  DEBUG_ONLY(_region_end = _region_start + region_size;)\n+  _heap_start = reserved_heap.start();\n+  const size_t heap_size = reserved_heap.word_size();\n+  DEBUG_ONLY(_heap_end = _heap_start + heap_size;)\n@@ -434,1 +434,1 @@\n-  assert(region_align_down(_region_start) == _region_start,\n+  assert(region_align_down(_heap_start) == _heap_start,\n@@ -437,1 +437,1 @@\n-  bool result = initialize_region_data(region_size) && initialize_block_data();\n+  bool result = initialize_region_data(heap_size) && initialize_block_data();\n@@ -470,1 +470,1 @@\n-bool ParallelCompactData::initialize_region_data(size_t region_size)\n+bool ParallelCompactData::initialize_region_data(size_t heap_size)\n@@ -472,2 +472,1 @@\n-  assert((region_size & RegionSizeOffsetMask) == 0,\n-         \"region size not a multiple of RegionSize\");\n+  assert(is_aligned(heap_size, RegionSize), \"precondition\");\n@@ -475,1 +474,1 @@\n-  const size_t count = region_size >> Log2RegionSize;\n+  const size_t count = heap_size >> Log2RegionSize;\n@@ -533,1 +532,1 @@\n-  const size_t obj_ofs = pointer_delta(addr, _region_start);\n+  const size_t obj_ofs = pointer_delta(addr, _heap_start);\n","filename":"src\/hotspot\/share\/gc\/parallel\/psParallelCompact.cpp","additions":12,"deletions":13,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -402,1 +402,1 @@\n-  bool initialize(MemRegion covered_region);\n+  bool initialize(MemRegion reserved_heap);\n@@ -484,1 +484,1 @@\n-  bool initialize_region_data(size_t region_size);\n+  bool initialize_region_data(size_t heap_size);\n@@ -487,2 +487,1 @@\n-private:\n-  HeapWord*       _region_start;\n+  HeapWord*       _heap_start;\n@@ -490,1 +489,1 @@\n-  HeapWord*       _region_end;\n+  HeapWord*       _heap_end;\n@@ -665,1 +664,1 @@\n-  assert(addr >= _region_start, \"bad addr\");\n+  assert(addr >= _heap_start, \"bad addr\");\n@@ -667,1 +666,1 @@\n-  assert(addr < _region_end, \"bad addr\");\n+  assert(addr < _heap_end, \"bad addr\");\n@@ -674,3 +673,3 @@\n-  assert(addr >= _region_start, \"bad addr \" PTR_FORMAT \" _region_start \" PTR_FORMAT, p2i(addr), p2i(_region_start));\n-  assert(addr <= _region_end, \"bad addr \" PTR_FORMAT \" _region_end \" PTR_FORMAT, p2i(addr), p2i(_region_end));\n-  return pointer_delta(addr, _region_start) >> Log2RegionSize;\n+  assert(addr >= _heap_start, \"bad addr \" PTR_FORMAT \" _region_start \" PTR_FORMAT, p2i(addr), p2i(_heap_start));\n+  assert(addr <= _heap_end, \"bad addr \" PTR_FORMAT \" _region_end \" PTR_FORMAT, p2i(addr), p2i(_heap_end));\n+  return pointer_delta(addr, _heap_start) >> Log2RegionSize;\n@@ -689,1 +688,1 @@\n-  return _region_start + (region << Log2RegionSize);\n+  return _heap_start + (region << Log2RegionSize);\n@@ -710,2 +709,2 @@\n-  assert(addr >= _region_start, \"bad addr\");\n-  assert(addr < _region_end + RegionSize, \"bad addr\");\n+  assert(addr >= _heap_start, \"bad addr\");\n+  assert(addr < _heap_end + RegionSize, \"bad addr\");\n@@ -718,2 +717,2 @@\n-  assert(addr >= _region_start, \"bad addr\");\n-  assert(addr <= _region_end, \"bad addr\");\n+  assert(addr >= _heap_start, \"bad addr\");\n+  assert(addr <= _heap_end, \"bad addr\");\n@@ -732,2 +731,2 @@\n-  assert(addr >= _region_start, \"bad addr\");\n-  assert(addr <= _region_end, \"bad addr\");\n+  assert(addr >= _heap_start, \"bad addr\");\n+  assert(addr <= _heap_end, \"bad addr\");\n@@ -740,3 +739,3 @@\n-  assert(addr >= _region_start, \"bad addr\");\n-  assert(addr <= _region_end, \"bad addr\");\n-  return pointer_delta(addr, _region_start) >> Log2BlockSize;\n+  assert(addr >= _heap_start, \"bad addr\");\n+  assert(addr <= _heap_end, \"bad addr\");\n+  return pointer_delta(addr, _heap_start) >> Log2BlockSize;\n@@ -755,1 +754,1 @@\n-  return _region_start + (block << Log2BlockSize);\n+  return _heap_start + (block << Log2BlockSize);\n@@ -767,2 +766,2 @@\n-  assert(addr >= _region_start, \"bad addr\");\n-  assert(addr < _region_end + RegionSize, \"bad addr\");\n+  assert(addr >= _heap_start, \"bad addr\");\n+  assert(addr < _heap_end + RegionSize, \"bad addr\");\n@@ -775,2 +774,2 @@\n-  assert(addr >= _region_start, \"bad addr\");\n-  assert(addr <= _region_end, \"bad addr\");\n+  assert(addr >= _heap_start, \"bad addr\");\n+  assert(addr <= _heap_end, \"bad addr\");\n","filename":"src\/hotspot\/share\/gc\/parallel\/psParallelCompact.hpp","additions":24,"deletions":25,"binary":false,"changes":49,"status":"modified"}]}