{"files":[{"patch":"@@ -134,6 +134,0 @@\n-                if (bytesRead1 == 0 || bytesRead2 == 0) {\n-                    break; \/\/ no more bytes for a stream\n-                }\n-                if (bytesRead1 != bytesRead2) {\n-                    return false;\n-                }\n@@ -144,5 +138,6 @@\n-            }\n-            \/\/ Streams are equal only if we've read them both to the end\n-            if (bytesRead1 == 0 &&\n-                bytesRead2 == 0) {\n-                return true;\n+                if (bytesRead1 == 0) {\n+                    \/\/ If we reach here, bytesRead2 must be 0 as well, otherwise\n+                    \/\/ we return false on the !Arrays.equals() check above.\n+                    assert bytesRead2 == 0 : \"Arrays must have been read to the end\";\n+                    return true;\n+                }\n@@ -153,1 +148,0 @@\n-        return false;\n","filename":"src\/jdk.jlink\/share\/classes\/jdk\/tools\/jlink\/internal\/runtimelink\/JimageDiffGenerator.java","additions":6,"deletions":12,"binary":false,"changes":18,"status":"modified"}]}