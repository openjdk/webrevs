{"files":[{"patch":"@@ -374,0 +374,44 @@\n+TEST_VM(os, realpath) {\n+  static const char* path = \"\\\\1234567890123456789\";\n+\n+\tchar buffer[MAX_PATH];\n+\n+  errno = 0;\n+\tconst char* returnedBuffer = os::realpath(path, buffer, 10);\n+  EXPECT_TRUE(errno == ENAMETOOLONG);\n+  EXPECT_TRUE(returnedBuffer == nullptr);\n+\n+\terrno = 0;\n+\treturnedBuffer = os::realpath(path, buffer, MAX_PATH);\n+  EXPECT_TRUE(errno == 0);\n+  EXPECT_TRUE(returnedBuffer == buffer);\n+\n+  errno = 0;\n+  returnedBuffer = os::realpath(path, buffer, strlen(path) + 3); \n+  EXPECT_TRUE(errno == 0);\n+  EXPECT_TRUE(returnedBuffer == buffer);\n+\n+  errno = 0;\n+  returnedBuffer = os::realpath(path, buffer, strlen(path) - 1);\n+  EXPECT_TRUE(errno == ENAMETOOLONG);\n+  EXPECT_TRUE(returnedBuffer == nullptr);\n+\n+  \/* the following tests cause an assert in fastdebug mode *\/\n+  DEBUG_ONLY(if (false)) {\n+    errno = 0;\n+    returnedBuffer = os::realpath(nullptr, buffer, sizeof(buffer));\n+    EXPECT_TRUE(errno == EINVAL);\n+    EXPECT_TRUE(returnedBuffer == nullptr);\n+\n+    errno = 0;\n+    returnedBuffer = os::realpath(path, buffer, sizeof(buffer));\n+    EXPECT_TRUE(errno == EINVAL);\n+    EXPECT_TRUE(returnedBuffer == nullptr);\n+\n+    errno = 0;\n+    returnedBuffer = os::realpath(path, buffer, 0);\n+    EXPECT_TRUE(errno == EINVAL);\n+    EXPECT_TRUE(returnedBuffer == nullptr);\n+  }\n+}\n+\n","filename":"test\/hotspot\/gtest\/runtime\/test_os.cpp","additions":44,"deletions":0,"binary":false,"changes":44,"status":"modified"}]}