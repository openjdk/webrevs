{"files":[{"patch":"@@ -379,1 +379,3 @@\n-  static const char* path = \"\/1234567890123456789\";\n+  \/* POSIX requires that the file exists, Windows doesn't *\/\n+  static const char* nosuchpath = \"\/1234567890123456789\";\n+  static const char* tmppath = \"\/tmp\";\n@@ -384,2 +386,2 @@\n-\tconst char* returnedBuffer = os::realpath(path, buffer, 10);\n-  EXPECT_TRUE(errno == ENAMETOOLONG);\n+\tconst char* returnedBuffer = os::realpath(nosuchpath, buffer, sizeof(nosuchpath) - 2);\n+  \/* Returns ENOENT on Linux, ENAMETOOLONG on Windows *\/\n@@ -387,0 +389,7 @@\n+  EXPECT_TRUE(errno == ENAMETOOLONG || errno == ENOENT);\n+\n+  errno = 0;\n+\treturnedBuffer = os::realpath(nosuchpath, buffer, sizeof(nosuchpath) + 3);\n+  \/* Returns ENOENT on Linux, 0 on Windows *\/\n+  EXPECT_TRUE(errno == 0 || errno == ENOENT);\n+  EXPECT_TRUE(returnedBuffer == nullptr || returnedBuffer == buffer);\n@@ -389,2 +398,1 @@\n-\treturnedBuffer = os::realpath(path, buffer, MAX_PATH);\n-  EXPECT_TRUE(errno == 0);\n+\treturnedBuffer = os::realpath(tmppath, buffer, MAX_PATH);\n@@ -394,2 +402,1 @@\n-  returnedBuffer = os::realpath(path, buffer, strlen(path) + 3); \n-  EXPECT_TRUE(errno == 0);\n+  returnedBuffer = os::realpath(tmppath, buffer, strlen(tmppath) + 3); \n@@ -399,1 +406,1 @@\n-  returnedBuffer = os::realpath(path, buffer, strlen(path) - 1);\n+  returnedBuffer = os::realpath(tmppath, buffer, strlen(tmppath) - 1);\n@@ -411,1 +418,1 @@\n-    returnedBuffer = os::realpath(path, buffer, sizeof(buffer));\n+    returnedBuffer = os::realpath(tmppath, buffer, sizeof(buffer));\n@@ -416,1 +423,1 @@\n-    returnedBuffer = os::realpath(path, buffer, 0);\n+    returnedBuffer = os::realpath(tmppath, buffer, 0);\n","filename":"test\/hotspot\/gtest\/runtime\/test_os.cpp","additions":17,"deletions":10,"binary":false,"changes":27,"status":"modified"}]}