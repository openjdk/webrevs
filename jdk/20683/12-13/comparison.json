{"files":[{"patch":"@@ -419,0 +419,1 @@\n+  \/* test a non-existant path, but provide a short buffer *\/\n@@ -429,0 +430,1 @@\n+  \/* test a non-existant path, but provide an adequate buffer *\/\n@@ -434,1 +436,0 @@\n-  EXPECT_TRUE(errno == 0);\n@@ -440,0 +441,1 @@\n+  \/* test an existing path using a large buffer *\/\n@@ -442,1 +444,1 @@\n-  EXPECT_TRUE(returnedBuffer != nullptr);\n+  EXPECT_TRUE(returnedBuffer == buffer);\n@@ -444,0 +446,1 @@\n+  \/* test an existing path using a buffer that is too small on a normal macOS install *\/\n@@ -454,0 +457,1 @@\n+  \/* test an existing path using a buffer that is too small *\/\n@@ -459,17 +463,17 @@\n-  \/* the following tests cause an assert in fastdebug mode *\/\n-  DEBUG_ONLY(if (false)) {\n-    errno = 0;\n-    returnedBuffer = os::realpath(nullptr, buffer, sizeof(buffer));\n-    EXPECT_TRUE(returnedBuffer == nullptr);\n-    EXPECT_TRUE(errno == EINVAL);\n-\n-    errno = 0;\n-    returnedBuffer = os::realpath(tmppath, buffer, sizeof(buffer));\n-    EXPECT_TRUE(returnedBuffer == nullptr);\n-    EXPECT_TRUE(errno == EINVAL);\n-\n-    errno = 0;\n-    returnedBuffer = os::realpath(tmppath, buffer, 0);\n-    EXPECT_TRUE(returnedBuffer == nullptr);\n-    EXPECT_TRUE(errno == EINVAL);\n-  }\n+  \/* the following tests cause an assert inside os::realpath() in fastdebug mode *\/\n+#ifndef ASSERT\n+  errno = 0;\n+  returnedBuffer = os::realpath(nullptr, buffer, sizeof(buffer));\n+  EXPECT_TRUE(returnedBuffer == nullptr);\n+  EXPECT_TRUE(errno == EINVAL);\n+\n+  errno = 0;\n+  returnedBuffer = os::realpath(tmppath, nullptr, sizeof(buffer));\n+  EXPECT_TRUE(returnedBuffer == nullptr);\n+  EXPECT_TRUE(errno == EINVAL);\n+\n+  errno = 0;\n+  returnedBuffer = os::realpath(tmppath, buffer, 0);\n+  EXPECT_TRUE(returnedBuffer == nullptr);\n+  EXPECT_TRUE(errno == EINVAL);\n+#endif\n","filename":"test\/hotspot\/gtest\/runtime\/test_os.cpp","additions":23,"deletions":19,"binary":false,"changes":42,"status":"modified"}]}