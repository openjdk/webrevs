{"files":[{"patch":"@@ -3,0 +3,3 @@\n+[*]\n+charset = utf-8\n+\n","filename":".editorconfig","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,0 +2,1 @@\n+*\tencoding=utf-8\n","filename":".gitattributes","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -308,0 +308,8 @@\n+<li><p>UTF-8 support is needed to compile the JDK. On Unix systems, this\n+typically means that the <code>C.UTF-8<\/code> or\n+<code>en_US.UTF-8<\/code> locale needs to be available. For Windows\n+users, please see the section on <a href=\"#locale-requirements\">Locale\n+Requirements<\/a> below.<\/p><\/li>\n+<li><p>On Windows, if using <a href=\"#cygwin\">Cygwin<\/a>, extra care\n+must be taken to make sure the environment is consistent. It is\n+recommended that you follow this procedure:<\/p>\n","filename":"doc\/building.html","additions":8,"deletions":0,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -86,0 +86,5 @@\n+* UTF-8 support is needed to compile the JDK. On Unix systems, this typically\n+  means that the `C.UTF-8` or `en_US.UTF-8` locale needs to be available. For\n+  Windows users, please see the section on [Locale\n+  Requirements](#locale-requirements) below.\n+\n","filename":"doc\/building.md","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -99,1 +99,1 @@\n-    -serialwarn -encoding ISO-8859-1 -docencoding UTF-8 -breakiterator \\\n+    -serialwarn -encoding utf-8 -docencoding utf-8 -breakiterator \\\n@@ -106,1 +106,1 @@\n-    -serialwarn -encoding ISO-8859-1 -breakiterator -splitIndex --system none \\\n+    -serialwarn -encoding utf-8 -breakiterator -splitIndex --system none \\\n","filename":"make\/Docs.gmk","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -137,0 +137,1 @@\n+  AC_MSG_CHECKING([for locale to use])\n@@ -141,0 +142,4 @@\n+      AC_MSG_RESULT([C.UTF-8 (recommended)])\n+    elif $LOCALE -a | $GREP -q -E \"^en_US\\.(utf8|UTF-8)$\"; then\n+      LOCALE_USED=en_US.UTF-8\n+      AC_MSG_RESULT([en_US.UTF-8 (acceptable fallback)])\n@@ -142,2 +147,12 @@\n-      AC_MSG_WARN([C.UTF-8 locale not found, using C locale])\n-      LOCALE_USED=C\n+      # As a fallback, check if users locale is UTF-8. USER_LOCALE was saved\n+      # by the wrapper configure script before autconf messed up LC_ALL.\n+      if $ECHO $USER_LOCALE | $GREP -q -E \"\\.(utf8|UTF-8)$\"; then\n+        LOCALE_USED=$USER_LOCALE\n+        AC_MSG_RESULT([$USER_LOCALE (untested fallback)])\n+        AC_MSG_WARN([Could not find C.UTF-8 or en_US.UTF-8 locale. This is not supported, and the build might fail unexpectedly.])\n+      else\n+        AC_MSG_RESULT([no UTF-8 locale found])\n+        AC_MSG_WARN([No UTF-8 locale found. This is not supported. Proceeding with the C locale, but the build might fail unexpectedly.])\n+        LOCALE_USED=C\n+      fi\n+      AC_MSG_NOTICE([The recommended locale is C.UTF-8, but en_US.UTF-8 is also accepted.])\n@@ -146,2 +161,3 @@\n-    AC_MSG_WARN([locale command not not found, using C locale])\n-    LOCALE_USED=C\n+    LOCALE_USED=C.UTF-8\n+    AC_MSG_RESULT([C.UTF-8 (default)])\n+    AC_MSG_WARN([locale command not not found, using C.UTF-8 locale])\n","filename":"make\/autoconf\/basic.m4","additions":20,"deletions":4,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -52,1 +52,3 @@\n-# Make sure all shell commands are executed with the C locale\n+# Save user's current locale, but make sure all future shell commands are\n+# executed with the C locale\n+export USER_LOCALE=$LC_ALL\n","filename":"make\/autoconf\/configure","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -576,4 +576,2 @@\n-    # The -utf-8 option sets source and execution character sets to UTF-8 to enable correct\n-    # compilation of all source files regardless of the active code page on Windows.\n-    TOOLCHAIN_CFLAGS_JVM=\"-nologo -MD -Zc:preprocessor -Zc:inline -Zc:throwingNew -permissive- -utf-8 -MP\"\n-    TOOLCHAIN_CFLAGS_JDK=\"-nologo -MD -Zc:preprocessor -Zc:inline -Zc:throwingNew -permissive- -utf-8 -Zc:wchar_t-\"\n+    TOOLCHAIN_CFLAGS_JVM=\"-nologo -MD -Zc:preprocessor -Zc:inline -Zc:throwingNew -permissive- -MP\"\n+    TOOLCHAIN_CFLAGS_JDK=\"-nologo -MD -Zc:preprocessor -Zc:inline -Zc:throwingNew -permissive- -Zc:wchar_t-\"\n@@ -582,0 +580,10 @@\n+  # Set character encoding in source\n+  if test \"x$TOOLCHAIN_TYPE\" = xgcc || test \"x$TOOLCHAIN_TYPE\" = xclang; then\n+    CHARSET_CFLAGS=\"-finput-charset=utf-8\"\n+  elif test \"x$TOOLCHAIN_TYPE\" = xmicrosoft; then\n+    # The -utf-8 option sets both source and execution character sets\n+    CHARSET_CFLAGS=\"-utf-8 -validate-charset\"\n+  fi\n+  TOOLCHAIN_CFLAGS_JVM=\"$TOOLCHAIN_CFLAGS_JVM $CHARSET_CFLAGS\"\n+  TOOLCHAIN_CFLAGS_JDK=\"$TOOLCHAIN_CFLAGS_JDK $CHARSET_CFLAGS\"\n+\n","filename":"make\/autoconf\/flags-cflags.m4","additions":12,"deletions":4,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -83,6 +83,4 @@\n-# 2. Apply the file unicode2x.sed which does a whole bunch of \\u00XX to \\xXX\n-#    conversions.\n-# 3. Delete all lines starting with #.\n-# 4. Delete empty lines.\n-# 5. Append lines ending with \\ with the next line.\n-# 6. Remove leading and trailing white space. Note that tabs must be explicit\n+# 2. Delete all lines starting with #.\n+# 3. Delete empty lines.\n+# 4. Append lines ending with \\ with the next line.\n+# 5. Remove leading and trailing white space. Note that tabs must be explicit\n@@ -90,2 +88,2 @@\n-# 7. Replace the first \\= with just =.\n-# 8. Finally it's all sorted to create a stable output.\n+# 6. Replace the first \\= with just =.\n+# 7. Finally it's all sorted to create a stable output.\n@@ -111,1 +109,0 @@\n-\t    | $(SED) -f \"$$(TOPDIR)\/make\/common\/support\/unicode2x.sed\" \\\n@@ -268,1 +265,1 @@\n-  PARANOIA_FLAGS := -implicit:none -Xprefer:source -XDignore.symbol.file=true -encoding ascii\n+  PARANOIA_FLAGS := -implicit:none -Xprefer:source -XDignore.symbol.file=true\n@@ -272,0 +269,2 @@\n+  # Set character encoding in source\n+  $1_FLAGS += -encoding utf-8\n","filename":"make\/common\/JavaCompilation.gmk","additions":9,"deletions":10,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -230,0 +230,2 @@\n+# \\xA9 is the copyright symbol in ANSI encoding (Windows-1252), which rc.exe\n+# assumes the resource file is in.\n","filename":"make\/common\/JdkNativeCompilation.gmk","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1,100 +0,0 @@\n-s\/\\\\u0020\/\\x20\/g\n-s\/\\\\u003A\/\\x3A\/g\n-s\/\\\\u006B\/\\x6B\/g\n-s\/\\\\u0075\/\\x75\/g\n-s\/\\\\u00A0\/\\xA0\/g\n-s\/\\\\u00A3\/\\xA3\/g\n-s\/\\\\u00B0\/\\xB0\/g\n-s\/\\\\u00B7\/\\xB7\/g\n-s\/\\\\u00BA\/\\xBA\/g\n-s\/\\\\u00BF\/\\xBF\/g\n-s\/\\\\u00C0\/\\xC0\/g\n-s\/\\\\u00C1\/\\xC1\/g\n-s\/\\\\u00C2\/\\xC2\/g\n-s\/\\\\u00C4\/\\xC4\/g\n-s\/\\\\u00C5\/\\xC5\/g\n-s\/\\\\u00C8\/\\xC8\/g\n-s\/\\\\u00C9\/\\xC9\/g\n-s\/\\\\u00CA\/\\xCA\/g\n-s\/\\\\u00CD\/\\xCD\/g\n-s\/\\\\u00CE\/\\xCE\/g\n-s\/\\\\u00D3\/\\xD3\/g\n-s\/\\\\u00D4\/\\xD4\/g\n-s\/\\\\u00D6\/\\xD6\/g\n-s\/\\\\u00DA\/\\xDA\/g\n-s\/\\\\u00DC\/\\xDC\/g\n-s\/\\\\u00DD\/\\xDD\/g\n-s\/\\\\u00DF\/\\xDF\/g\n-s\/\\\\u00E0\/\\xE0\/g\n-s\/\\\\u00E1\/\\xE1\/g\n-s\/\\\\u00E2\/\\xE2\/g\n-s\/\\\\u00E3\/\\xE3\/g\n-s\/\\\\u00E4\/\\xE4\/g\n-s\/\\\\u00E5\/\\xE5\/g\n-s\/\\\\u00E6\/\\xE6\/g\n-s\/\\\\u00E7\/\\xE7\/g\n-s\/\\\\u00E8\/\\xE8\/g\n-s\/\\\\u00E9\/\\xE9\/g\n-s\/\\\\u00EA\/\\xEA\/g\n-s\/\\\\u00EB\/\\xEB\/g\n-s\/\\\\u00EC\/\\xEC\/g\n-s\/\\\\u00ED\/\\xED\/g\n-s\/\\\\u00EE\/\\xEE\/g\n-s\/\\\\u00EF\/\\xEF\/g\n-s\/\\\\u00F1\/\\xF1\/g\n-s\/\\\\u00F2\/\\xF2\/g\n-s\/\\\\u00F3\/\\xF3\/g\n-s\/\\\\u00F4\/\\xF4\/g\n-s\/\\\\u00F5\/\\xF5\/g\n-s\/\\\\u00F6\/\\xF6\/g\n-s\/\\\\u00F9\/\\xF9\/g\n-s\/\\\\u00FA\/\\xFA\/g\n-s\/\\\\u00FC\/\\xFC\/g\n-s\/\\\\u0020\/\\x20\/g\n-s\/\\\\u003f\/\\x3f\/g\n-s\/\\\\u006f\/\\x6f\/g\n-s\/\\\\u0075\/\\x75\/g\n-s\/\\\\u00a0\/\\xa0\/g\n-s\/\\\\u00a3\/\\xa3\/g\n-s\/\\\\u00b0\/\\xb0\/g\n-s\/\\\\u00ba\/\\xba\/g\n-s\/\\\\u00bf\/\\xbf\/g\n-s\/\\\\u00c1\/\\xc1\/g\n-s\/\\\\u00c4\/\\xc4\/g\n-s\/\\\\u00c5\/\\xc5\/g\n-s\/\\\\u00c8\/\\xc8\/g\n-s\/\\\\u00c9\/\\xc9\/g\n-s\/\\\\u00ca\/\\xca\/g\n-s\/\\\\u00cd\/\\xcd\/g\n-s\/\\\\u00d6\/\\xd6\/g\n-s\/\\\\u00dc\/\\xdc\/g\n-s\/\\\\u00dd\/\\xdd\/g\n-s\/\\\\u00df\/\\xdf\/g\n-s\/\\\\u00e0\/\\xe0\/g\n-s\/\\\\u00e1\/\\xe1\/g\n-s\/\\\\u00e2\/\\xe2\/g\n-s\/\\\\u00e3\/\\xe3\/g\n-s\/\\\\u00e4\/\\xe4\/g\n-s\/\\\\u00e5\/\\xe5\/g\n-s\/\\\\u00e7\/\\xe7\/g\n-s\/\\\\u00e8\/\\xe8\/g\n-s\/\\\\u00e9\/\\xe9\/g\n-s\/\\\\u00ea\/\\xea\/g\n-s\/\\\\u00eb\/\\xeb\/g\n-s\/\\\\u00ec\/\\xec\/g\n-s\/\\\\u00ed\/\\xed\/g\n-s\/\\\\u00ee\/\\xee\/g\n-s\/\\\\u00ef\/\\xef\/g\n-s\/\\\\u00f0\/\\xf0\/g\n-s\/\\\\u00f1\/\\xf1\/g\n-s\/\\\\u00f2\/\\xf2\/g\n-s\/\\\\u00f3\/\\xf3\/g\n-s\/\\\\u00f4\/\\xf4\/g\n-s\/\\\\u00f5\/\\xf5\/g\n-s\/\\\\u00f6\/\\xf6\/g\n-s\/\\\\u00f7\/\\xf7\/g\n-s\/\\\\u00f8\/\\xf8\/g\n-s\/\\\\u00f9\/\\xf9\/g\n-s\/\\\\u00fa\/\\xfa\/g\n-s\/\\\\u00fc\/\\xfc\/g\n-s\/\\\\u00ff\/\\xff\/g\n","filename":"make\/common\/support\/unicode2x.sed","additions":0,"deletions":100,"binary":false,"changes":100,"status":"deleted"},{"patch":"@@ -90,1 +90,1 @@\n-    \"bokm\\xE5l\", \"nb_NO\",\n+    \"bokmål\", \"nb_NO\",\n@@ -101,1 +101,1 @@\n-    \"fran\\xE7\\x61is\", \"fr_FR\",\n+    \"français\", \"fr_FR\",\n@@ -165,1 +165,1 @@\n-    \"fran\\xE7\\x61is\", \"fr\",\n+    \"français\", \"fr\",\n","filename":"src\/java.base\/unix\/native\/libjava\/locale_str.h","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -137,1 +137,1 @@\n-                L\"\\xA4\", L\"\", L\"\\xA4 \", L\"\", L\"\", L\"\", L\"\", L\"\", L\"\", L\"\", L\"\", L\"\", L\"\", L\"\", L\"\", L\"\",\n+                L\"¤\", L\"\", L\"¤ \", L\"\", L\"\", L\"\", L\"\", L\"\", L\"\", L\"\", L\"\", L\"\", L\"\", L\"\", L\"\", L\"\",\n@@ -148,1 +148,1 @@\n-                L\"(\\xA4\", L\"-\\xA4\", L\"\\xA4-\", L\"\\xA4\", L\"(\", L\"-\", L\"\", L\"\", L\"-\", L\"-\\xA4 \", L\"\", L\"\\xA4 \", L\"\\xA4 -\", L\"\", L\"(\\xA4 \", L\"(\"\n+                L\"(¤\", L\"-¤\", L\"¤-\", L\"¤\", L\"(\", L\"-\", L\"\", L\"\", L\"-\", L\"-¤ \", L\"\", L\"¤ \", L\"¤ -\", L\"\", L\"(¤ \", L\"(\"\n@@ -161,1 +161,1 @@\n-                L\"\", L\"\\xA4 \", L\"\", L\" \\xA4\", L\"\", L\"\", L\"\", L\"\", L\"\", L\"\", L\"\", L\"\", L\"\", L\"\", L\"\", L\"\",\n+                L\"\", L\"¤ \", L\"\", L\" ¤\", L\"\", L\"\", L\"\", L\"\", L\"\", L\"\", L\"\", L\"\", L\"\", L\"\", L\"\", L\"\",\n@@ -172,1 +172,1 @@\n-                L\")\", L\"\", L\"\", L\"-\", L\"\\xA4)\", L\"\\xA4\", L\"-\\xA4\", L\"\\xA4-\", L\" \\xA4\", L\"\", L\" \\xA4-\", L\"-\", L\"\", L\"- \\xA4\", L\")\", L\" \\xA4)\"\n+                L\")\", L\"\", L\"\", L\"-\", L\"¤)\", L\"¤\", L\"-¤\", L\"¤-\", L\" ¤\", L\"\", L\" ¤-\", L\"-\", L\"\", L\"- ¤\", L\")\", L\" ¤)\"\n","filename":"src\/java.base\/windows\/native\/libjava\/HostLocaleProviderAdapter_md.c","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"}]}