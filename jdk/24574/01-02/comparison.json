{"files":[{"patch":"@@ -285,0 +285,5 @@\n+<li><p>UTF-8 support is needed to compile the JDK. On Unix systems, this\n+typically means that the <code>C.UTF-8<\/code> or\n+<code>en_US.UTF-8<\/code> locale needs to be available. For Windows\n+users, please see the section on <a href=\"#locale-requirements\">Locale\n+Requirements<\/a> below.<\/p><\/li>\n","filename":"doc\/building.html","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -86,0 +86,5 @@\n+* UTF-8 support is needed to compile the JDK. On Unix systems, this typically\n+  means that the `C.UTF-8` or `en_US.UTF-8` locale needs to be available. For\n+  Windows users, please see the section on [Locale\n+  Requirements](#locale-requirements) below.\n+\n","filename":"doc\/building.md","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -192,1 +192,1 @@\n-but also decreases test’s readability and stability. It is much easier\n+but also decreases test's readability and stability. It is much easier\n@@ -201,1 +201,1 @@\n-localize a defect’s root-cause. One should use <code>ASSERT<\/code> if it\n+localize a defect's root-cause. One should use <code>ASSERT<\/code> if it\n@@ -238,1 +238,1 @@\n-<p><code>EXPECT_EQ<\/code> just compares pointers’ values, which is\n+<p><code>EXPECT_EQ<\/code> just compares pointers' values, which is\n@@ -296,1 +296,1 @@\n-<code>CompilerLogging<\/code>, G1 GC — test group <code>G1GC<\/code>, and\n+<code>CompilerLogging<\/code>, G1 GC - test group <code>G1GC<\/code>, and\n@@ -348,1 +348,1 @@\n-<p>It greatly simplifies understanding of friendship’s purpose and\n+<p>It greatly simplifies understanding of friendship's purpose and\n@@ -438,1 +438,1 @@\n-changing flags’ values. GoogleTest provides two ways to set up\n+changing flags' values. GoogleTest provides two ways to set up\n@@ -447,1 +447,1 @@\n-<li><p>Changing a flag’s value could break the invariants between flags'\n+<li><p>Changing a flag's value could break the invariants between flags'\n","filename":"doc\/hotspot-unit-tests.html","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -137,0 +137,1 @@\n+  AC_MSG_CHECKING([for locale to use])\n@@ -141,0 +142,4 @@\n+      AC_MSG_RESULT([C.UTF-8 (recommended)])\n+    elif $LOCALE -a | $GREP -q -E \"^en_US\\.(utf8|UTF-8)$\"; then\n+      LOCALE_USED=en_US.UTF-8\n+      AC_MSG_RESULT([en_US.UTF-8 (acceptable fallback)])\n@@ -142,2 +147,10 @@\n-      AC_MSG_WARN([C.UTF-8 locale not found, using C locale])\n-      LOCALE_USED=C\n+      # As a fallback, check if users locale is UTF-8. USER_LOCALE was saved\n+      # by the wrapper configure script before autconf messed up LC_ALL.\n+      if $ECHO $USER_LOCALE | $GREP -q -E \"\\.(utf8|UTF-8)$\"; then\n+        LOCALE_USED=$USER_LOCALE\n+        AC_MSG_RESULT([$USER_LOCALE (untested fallback)])\n+        AC_MSG_WARN([Could not find C.UTF-8 or en_US.UTF-8 locale. This is not supported, and the build might fail unexpectedly.])\n+      else\n+        AC_MSG_RESULT([no UTF-8 locale found])\n+        AC_MSG_ERROR([No UTF-8 locale found. This is required for building successfully.])\n+      fi\n@@ -146,2 +159,3 @@\n-    AC_MSG_WARN([locale command not not found, using C locale])\n-    LOCALE_USED=C\n+    LOCALE_USED=C.UTF-8\n+    AC_MSG_RESULT([C.UTF-8 (default)])\n+    AC_MSG_WARN([locale command not not found, using C.UTF-8 locale])\n","filename":"make\/autoconf\/basic.m4","additions":18,"deletions":4,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -52,1 +52,3 @@\n-# Make sure all shell commands are executed with the C locale\n+# Save user's current locale, but make sure all future shell commands are\n+# executed with the C locale\n+export USER_LOCALE=$LC_ALL\n","filename":"make\/autoconf\/configure","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -576,2 +576,0 @@\n-    # The -utf-8 option sets source and execution character sets to UTF-8 to enable correct\n-    # compilation of all source files regardless of the active code page on Windows.\n@@ -586,0 +584,1 @@\n+    # The -utf-8 option sets both source and execution character sets\n","filename":"make\/autoconf\/flags-cflags.m4","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -83,4 +83,4 @@\n-# 3. Delete all lines starting with #.\n-# 4. Delete empty lines.\n-# 5. Append lines ending with \\ with the next line.\n-# 6. Remove leading and trailing white space. Note that tabs must be explicit\n+# 2. Delete all lines starting with #.\n+# 3. Delete empty lines.\n+# 4. Append lines ending with \\ with the next line.\n+# 5. Remove leading and trailing white space. Note that tabs must be explicit\n@@ -88,2 +88,2 @@\n-# 7. Replace the first \\= with just =.\n-# 8. Finally it's all sorted to create a stable output.\n+# 6. Replace the first \\= with just =.\n+# 7. Finally it's all sorted to create a stable output.\n","filename":"make\/common\/JavaCompilation.gmk","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"}]}