{"files":[{"patch":"@@ -31,1 +31,1 @@\n-import java.util.Objects;\n+import java.util.Optional;\n@@ -33,1 +33,0 @@\n-import java.util.stream.Collectors;\n@@ -402,1 +401,1 @@\n-     * Obtain the set of lint warning categories suppressed at the given symbol's declaration.\n+     * Obtain the set of recognized lint warning categories suppressed at the given symbol's declaration.\n@@ -419,1 +418,1 @@\n-     * Retrieve the lint categories suppressed by the given @SuppressWarnings annotation.\n+     * Retrieve the recognized lint categories suppressed by the given @SuppressWarnings annotation.\n@@ -432,1 +431,1 @@\n-    \/\/ Find the @SuppressWarnings annotation in the attribute stream and extract the suppressions\n+    \/\/ Find the @SuppressWarnings annotation in the given stream and extract the recognized suppressions\n@@ -435,1 +434,2 @@\n-        return attributes\n+        EnumSet<LintCategory> result = LintCategory.newEmptySet();\n+        attributes\n@@ -437,8 +437,15 @@\n-          .map(attribute -> attribute.member(names.value))\n-          .flatMap(attribute -> Stream.of(((Attribute.Array)attribute).values))\n-          .map(Attribute.Constant.class::cast)\n-          .map(elem -> elem.value)\n-          .map(String.class::cast)\n-          .map(LintCategory::get)\n-          .filter(Objects::nonNull)\n-          .collect(Collectors.toCollection(LintCategory::newEmptySet));\n+          .map(this::suppressionsFrom)\n+          .forEach(result::addAll);\n+        return result;\n+    }\n+\n+    \/\/ Given a @SuppressWarnings annotation, extract the recognized suppressions\n+    private EnumSet<LintCategory> suppressionsFrom(Attribute.Compound suppressWarnings) {\n+        EnumSet<LintCategory> result = LintCategory.newEmptySet();\n+        Attribute.Array values = (Attribute.Array)suppressWarnings.member(names.value);\n+        for (Attribute value : values.values) {\n+            Optional.of((String)((Attribute.Constant)value).value)\n+              .map(LintCategory::get)\n+              .ifPresent(result::add);\n+        }\n+        return result;\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/code\/Lint.java","additions":21,"deletions":14,"binary":false,"changes":35,"status":"modified"}]}