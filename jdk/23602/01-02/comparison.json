{"files":[{"patch":"@@ -2268,1 +2268,1 @@\n-  Label Lloop, Lexit;\n+  Label Lloop, Lafter_loop, Lexit;\n@@ -2270,11 +2270,3 @@\n-#ifdef ASSERT\n-  {\n-    Label ok;\n-    cmpdi(CR0, count, 0);\n-    bgt(CR0, ok);\n-    stop(\"count must be positive\");\n-    bind(ok);\n-  }\n-#endif\n-\n-  mtctr(count);\n+  srdi_(scratch, count, 1);\n+  beq(CR0, Lafter_loop);\n+  mtctr(scratch);\n@@ -2282,2 +2274,2 @@\n-  bind(Lloop);\n-  ld(scratch, 0 , addr);\n+  bind(Lloop); \/\/ 2x unrolled\n+  ld(scratch, 0, addr);\n@@ -2286,1 +2278,4 @@\n-  addi(addr, addr, wordSize);\n+  ld(scratch, 8, addr);\n+  xor_(scratch, scratch, value);\n+  beq(CR0, Lexit);\n+  addi(addr, addr, 2 * wordSize);\n@@ -2289,0 +2284,6 @@\n+  bind(Lafter_loop);\n+  andi_(scratch, count, 1);\n+  beq(CR0, Lexit); \/\/ if taken: CR0 eq and scratch == 0\n+  ld(scratch, 0, addr);\n+  xor_(scratch, scratch, value);\n+\n","filename":"src\/hotspot\/cpu\/ppc\/macroAssembler_ppc.cpp","additions":16,"deletions":15,"binary":false,"changes":31,"status":"modified"}]}