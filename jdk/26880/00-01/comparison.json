{"files":[{"patch":"@@ -606,1 +606,1 @@\n-double G1CollectionSet::select_candidates_from_optional_groups(double time_remaining_ms, uint& num_regions_selected, bool force_all) {\n+double G1CollectionSet::select_candidates_from_optional_groups(double time_remaining_ms, uint& num_regions_selected) {\n@@ -617,1 +617,1 @@\n-    if (predicted_time_ms > time_remaining_ms && !force_all) {\n+    if (predicted_time_ms > time_remaining_ms) {\n@@ -642,1 +642,1 @@\n-uint G1CollectionSet::select_optional_collection_set_regions(double time_remaining_ms, bool force_all) {\n+uint G1CollectionSet::select_optional_collection_set_regions(double time_remaining_ms) {\n@@ -649,1 +649,1 @@\n-  double total_prediction_ms = select_candidates_from_optional_groups(time_remaining_ms, num_regions_selected, force_all);\n+  double total_prediction_ms = select_candidates_from_optional_groups(time_remaining_ms, num_regions_selected);\n@@ -695,1 +695,1 @@\n-bool G1CollectionSet::finalize_optional_for_evacuation(double remaining_pause_time, bool force_all) {\n+bool G1CollectionSet::finalize_optional_for_evacuation(double remaining_pause_time) {\n@@ -698,1 +698,1 @@\n-  uint num_regions_selected = select_optional_collection_set_regions(remaining_pause_time, force_all);\n+  uint num_regions_selected = select_optional_collection_set_regions(remaining_pause_time);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CollectionSet.cpp","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -194,2 +194,2 @@\n-  uint select_optional_collection_set_regions(double time_remaining_ms, bool force_all = false);\n-  double select_candidates_from_optional_groups(double time_remaining_ms, uint& num_regions_selected, bool force_all = false);\n+  uint select_optional_collection_set_regions(double time_remaining_ms);\n+  double select_candidates_from_optional_groups(double time_remaining_ms, uint& num_regions_selected);\n@@ -288,1 +288,1 @@\n-  bool finalize_optional_for_evacuation(double remaining_pause_time, bool force_all = false);\n+  bool finalize_optional_for_evacuation(double remaining_pause_time);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CollectionSet.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -822,2 +822,7 @@\n-    double time_used_ms = os::elapsedTime() * 1000.0 - pause_start_time_ms;\n-    double time_left_ms = MaxGCPauseMillis - time_used_ms;\n+    double time_left_ms;\n+    if(EvacuateAllOptionalRegions){\n+      time_left_ms = DBL_MAX;\n+    }else{\n+      double time_used_ms = os::elapsedTime() * 1000.0 - pause_start_time_ms;\n+      time_left_ms = MaxGCPauseMillis - time_used_ms;\n+    }\n@@ -825,2 +830,2 @@\n-    if ((time_left_ms <= 0 && !EvacuateAllOptionalRegions) ||\n-        !collection_set()->finalize_optional_for_evacuation(time_left_ms * policy()->optional_evacuation_fraction(), EvacuateAllOptionalRegions)) {\n+    if (time_left_ms <= 0 ||\n+        !collection_set()->finalize_optional_for_evacuation(time_left_ms * policy()->optional_evacuation_fraction())) {\n","filename":"src\/hotspot\/share\/gc\/g1\/g1YoungCollector.cpp","additions":9,"deletions":4,"binary":false,"changes":13,"status":"modified"}]}