{"files":[{"patch":"@@ -0,0 +1,75 @@\n+\/*\n+ * Copyright (c) 2005, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.awt.Button;\n+import java.awt.FileDialog;\n+import java.awt.Frame;\n+\n+import java.awt.event.ActionEvent;\n+import java.awt.event.ActionListener;\n+\n+\/*\n+ * @test\n+ * @bug 6227750\n+ * @summary Tests that FileDialog can be closed by clicking the 'close' (X) button\n+ * @library \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame\n+ * @run main\/manual DoubleActionCloseX\n+ *\/\n+\n+public class DoubleActionCloseX {\n+    public static void main(String[] args) throws Exception {\n+        String INSTRUCTIONS = \"\"\"\n+                NOTE: On Linux and Mac, there is no 'close'(X) button\n+                      when file dialog is visible, press Pass.\n+\n+                Click the 'Open File Dialog' button to open FileDialog.\n+                A file dialog will appear on the screen.\n+                Click on the 'close'(X) button.\n+                The dialog should be closed.\n+                If not, the test failed, press Fail otherwise press Pass.\n+                \"\"\";\n+\n+        PassFailJFrame.builder()\n+                .title(\"DoubleActionCloseX Instruction\")\n+                .instructions(INSTRUCTIONS)\n+                .columns(40)\n+                .testUI(DoubleActionCloseX::createUI)\n+                .build()\n+                .awaitAndCheck();\n+    }\n+    public static Frame createUI() {\n+        Frame f = new Frame(\"DoubleActionCloseX Test\");\n+        Button b = new Button(\"Open File Dialog\");\n+        FileDialog fd = new FileDialog(f);\n+        b.addActionListener(new ActionListener() {\n+            @Override\n+            public void actionPerformed(ActionEvent e) {\n+                fd.setVisible(true);\n+            }\n+        });\n+        f.add(b);\n+        f.setSize(300, 200);\n+        return f;\n+    }\n+}\n","filename":"test\/jdk\/java\/awt\/FileDialog\/DoubleActionCloseX.java","additions":75,"deletions":0,"binary":false,"changes":75,"status":"added"},{"patch":"@@ -0,0 +1,122 @@\n+\/*\n+ * Copyright (c) 2005, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.awt.Button;\n+import java.awt.Dimension;\n+import java.awt.EventQueue;\n+import java.awt.FileDialog;\n+import java.awt.Frame;\n+import java.awt.Point;\n+import java.awt.Robot;\n+import java.awt.event.ActionEvent;\n+import java.awt.event.ActionListener;\n+import java.awt.event.InputEvent;\n+import java.awt.event.KeyEvent;\n+import java.util.concurrent.CountDownLatch;\n+\n+\/*\n+ * @test\n+ * @bug 5097243\n+ * @summary Tests that FileDialog can be closed by ESC any time\n+ * @key headful\n+ * @run main DoubleActionESC\n+ *\/\n+\n+public class DoubleActionESC {\n+    private static Frame f;\n+    private static Button showBtn;\n+    private static FileDialog fd;\n+    private static Robot robot;\n+    private static volatile Point p;\n+    private static volatile Dimension d;\n+    private static volatile CountDownLatch latch;\n+    private static final int REPEAT_COUNT = 2;\n+\n+    public static void main(String[] args) throws Exception {\n+        latch = new CountDownLatch(1);\n+\n+        robot = new Robot();\n+        robot.setAutoDelay(100);\n+        try {\n+            EventQueue.invokeAndWait(() -> {\n+                createAndShowUI();\n+            });\n+\n+            robot.delay(1000);\n+            EventQueue.invokeAndWait(() -> {\n+                p = showBtn.getLocationOnScreen();\n+                d = showBtn.getSize();\n+            });\n+\n+            for (int i = 0; i < REPEAT_COUNT; ++i) {\n+                Thread thread = new Thread(() -> {\n+                    robot.mouseMove(p.x + d.width \/ 2, p.y + d.height \/ 2);\n+                    robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n+                    robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n+                });\n+                thread.start();\n+                robot.delay(3000);\n+\n+                Thread thread1 = new Thread(() -> {\n+                    robot.keyPress(KeyEvent.VK_ESCAPE);\n+                    robot.keyRelease(KeyEvent.VK_ESCAPE);\n+                    robot.waitForIdle();\n+                });\n+                thread1.start();\n+                robot.delay(3000);\n+            }\n+\n+            latch.await();\n+            if (fd.isVisible()) {\n+                throw new RuntimeException(\"File Dialog is not closed\");\n+            }\n+        } finally {\n+            EventQueue.invokeAndWait(() -> {\n+                if (f != null) {\n+                    f.dispose();\n+                }\n+            });\n+        }\n+    }\n+\n+    public static void createAndShowUI() {\n+        f = new Frame(\"DoubleActionESC Test\");\n+        showBtn = new Button(\"Show File Dialog\");\n+        fd = new FileDialog(f);\n+        showBtn.addActionListener(new ActionListener() {\n+            @Override\n+            public void actionPerformed(ActionEvent e) {\n+                if (e.getSource() == showBtn) {\n+                    fd.setSize(200, 200);\n+                    fd.setLocation(200, 200);\n+                    fd.setVisible(true);\n+                    latch.countDown();\n+                }\n+            }\n+        });\n+        f.add(showBtn);\n+        f.setSize(300, 200);\n+        f.setLocationRelativeTo(null);\n+        f.setVisible(true);\n+    }\n+}\n","filename":"test\/jdk\/java\/awt\/FileDialog\/DoubleActionESC.java","additions":122,"deletions":0,"binary":false,"changes":122,"status":"added"},{"patch":"@@ -0,0 +1,82 @@\n+\/*\n+ * Copyright (c) 2003, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.awt.Button;\n+import java.awt.Dialog;\n+import java.awt.FileDialog;\n+import java.awt.FlowLayout;\n+import java.awt.Frame;\n+\n+import java.awt.event.ActionEvent;\n+import java.awt.event.ActionListener;\n+\n+\/*\n+ * @test\n+ * @bug 4906972\n+ * @summary Tests using of JNI reference to peer object.\n+ * @requires (os.family == \"windows\")\n+ * @library \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame\n+ * @run main\/manual TestFileDialogDupJNIRef\n+ *\/\n+\n+public class TestFileDialogDupJNIRef {\n+    public static void main(String[] args) throws Exception {\n+        String INSTRUCTIONS = \"\"\"\n+                This is a crash test.\n+                After test started you will see 'Test Frame' with one button.\n+                1. Click the button to open FileDialog.\n+                2. Go to the dialog and choose any directory with some files in it..\n+                3. Click on any file to highlight it.\n+                4. Click on the file again to rename.\n+                5. Leave the file in edit mode and click Open button\n+\n+                If there was no crash the test passed, Press Pass.\n+                \"\"\";\n+\n+        PassFailJFrame.builder()\n+                .title(\"TestFileDialogDupJNIRef Instruction\")\n+                .instructions(INSTRUCTIONS)\n+                .columns(40)\n+                .testUI(TestFileDialogDupJNIRef::createUI)\n+                .build()\n+                .awaitAndCheck();\n+    }\n+\n+    public static Frame createUI() {\n+        Frame frame = new Frame(\"TestFileDialogDupJNIRef Test Frame\");\n+        Button open = new Button(\"Open File Dialog\");\n+\n+        open.addActionListener(new ActionListener() {\n+                public void actionPerformed(ActionEvent e) {\n+                    FileDialog fd = new FileDialog(frame);\n+                    fd.setVisible(true);\n+                }\n+            });\n+\n+        frame.setLayout(new FlowLayout());\n+        frame.add(open);\n+        frame.setSize(250, 70);\n+        return frame;\n+    }\n+}\n","filename":"test\/jdk\/java\/awt\/FileDialog\/TestFileDialogDupJNIRef.java","additions":82,"deletions":0,"binary":false,"changes":82,"status":"added"}]}