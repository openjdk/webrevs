{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -52,1 +52,2 @@\n- * &commat;jls section-number description\n+ * &commat;jls chapter.section description\n+ * &commat;jls preview-feature-chapter.section description\n@@ -59,0 +60,1 @@\n+ * &commat;jls primitive-types-in-patterns-instanceof-switch-5.7.1 Exact Testing Conversions\n@@ -67,0 +69,1 @@\n+ * <dd><a href=\"..\/..\/specs\/primitive-types-in-patterns-instanceof-switch-jls.html#jls-5.7.1\">5.7.1 Exact Testing Conversions<\/a>\n@@ -69,2 +72,13 @@\n- * Copies of JLS and JVMS are expected to have been placed in the {@code specs}\n- * folder. These documents are not included in open-source repositories.\n+ * In inline tags (note you need manual JLS\/JVMS prefix):\n+ * <pre>\n+ * JLS {&commat;jls 3.4}\n+ * <\/pre>\n+ *\n+ * produces (note the section sign and no trailing dot):\n+ * <pre>\n+ * JLS <a href=\"..\/..\/specs\/jls\/jls-3.html#jls-3.4\">§3.4<\/a>\n+ * <\/pre>\n+ *\n+ * Copies of JLS, JVMS, and preview JLS and JVMS changes are expected to have\n+ * been placed in the {@code specs} folder. These documents are not included\n+ * in open-source repositories.\n@@ -101,1 +115,1 @@\n-    private static final Pattern TAG_PATTERN = Pattern.compile(\"(?s)(.+ )?(?<chapter>[1-9][0-9]*)(?<section>[0-9a-z_.]*)( .*)?$\");\n+    private static final Pattern TAG_PATTERN = Pattern.compile(\"(?s)(.+ )?(?<preview>([a-z0-9]+-)+)?(?<chapter>[1-9][0-9]*)(?<section>[0-9a-z_.]*)( .*)?$\");\n@@ -160,0 +174,2 @@\n+                \/\/ preview-feature-4.6 is preview-feature-, 4, .6\n+                String preview = m.group(\"preview\"); \/\/ null if no preview feature\n@@ -164,2 +180,20 @@\n-                String url = String.format(\"%1$s\/specs\/%2$s\/%2$s-%3$s.html#%2$s-%3$s%4$s\",\n-                        rootParent, idPrefix, chapter, section);\n+                String url = preview == null ?\n+                        String.format(\"%1$s\/specs\/%2$s\/%2$s-%3$s.html#%2$s-%3$s%4$s\",\n+                                rootParent, idPrefix, chapter, section) :\n+                        String.format(\"%1$s\/specs\/%5$s%2$s.html#%2$s-%3$s%4$s\",\n+                                rootParent, idPrefix, chapter, section, preview);\n+\n+                var literal = expand(contents).trim();\n+                var prefix = (preview == null ? \"\" : preview) + chapter + section;\n+                if (literal.startsWith(prefix)) {\n+                    var hasFullTitle = literal.length() > prefix.length();\n+                    if (hasFullTitle) {\n+                        \/\/ Drop the preview part\n+                        literal = chapter + section + literal.substring(prefix.length());\n+                    } else {\n+                        \/\/ No section sign if the tag refers to a chapter, like {@jvms 4}\n+                        String sectionSign = section.isEmpty() ? \"\" : \"§\";\n+                        \/\/ Change whole text to \"§chapter.x\" in inline tags.\n+                        literal = sectionSign + chapter + section;\n+                    }\n+                }\n@@ -170,1 +204,1 @@\n-                        .append(expand(contents))\n+                        .append(literal)\n","filename":"make\/jdk\/src\/classes\/build\/tools\/taglet\/JSpec.java","additions":42,"deletions":8,"binary":false,"changes":50,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2024, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2024, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -67,6 +67,3 @@\n- * @see <a href=\"..\/..\/..\/..\/..\/specs\/primitive-types-in-patterns-instanceof-switch-jls.html#jls-5.7.1\">\n- * JLS 5.7.1 Exact Testing Conversions<\/a>\n- * @see <a href=\"..\/..\/..\/..\/..\/specs\/primitive-types-in-patterns-instanceof-switch-jls.html#jls-5.7.2\">\n- * JLS 5.7.2 Unconditionally Exact Testing Conversions<\/a>\n- * @see <a href=\"..\/..\/..\/..\/..\/specs\/primitive-types-in-patterns-instanceof-switch-jls.html#jls-15.20.2\">\n- * JLS 15.20.2 The instanceof Operator<\/a>\n+ * @jls primitive-types-in-patterns-instanceof-switch-5.7.1 Exact Testing Conversions\n+ * @jls primitive-types-in-patterns-instanceof-switch-5.7.2 Unconditionally Exact Testing Conversions\n+ * @jls primitive-types-in-patterns-instanceof-switch-15.20.2 The {@code instanceof} Operator\n","filename":"src\/java.base\/share\/classes\/java\/lang\/runtime\/ExactConversionsSupport.java","additions":4,"deletions":7,"binary":false,"changes":11,"status":"modified"}]}