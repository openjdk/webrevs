{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -274,1 +274,1 @@\n-        sb.append(quote(c));\n+        sb.append(quote(c, true));\n@@ -282,1 +282,7 @@\n-    private static String quote(char ch) {\n+    private static String quote(char ch, boolean charContext) {\n+        \/*\n+         * In a char context, single quote (') must be escaped and\n+         * double quote (\") need not be escaped. In a non-char\n+         * context, in other words a string context, the reverse is\n+         * true.\n+         *\/\n@@ -289,2 +295,2 @@\n-        case '\\'':  return \"\\\\'\";\n-        case '\\\"':  return \"\\\\\\\"\";\n+        case '\\'':  return (charContext ? \"\\\\'\" : \"'\");\n+        case '\\\"':  return (charContext ? \"\\\"\"  : \"\\\\\\\"\");\n@@ -326,1 +332,1 @@\n-            sb.append(quote(s.charAt(i)));\n+            sb.append(quote(s.charAt(i), false));\n","filename":"src\/java.base\/share\/classes\/sun\/reflect\/annotation\/AnnotationInvocationHandler.java","additions":12,"deletions":6,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,1 +26,1 @@\n- * @bug 8162817 8168921\n+ * @bug 8162817 8168921 8322218\n@@ -195,2 +195,2 @@\n-       \"@CharArray({'a', 'b', 'c', '\\\\''})\")\n-        @CharArray({'a', 'b', 'c', '\\''})\n+       \"@CharArray({'a', 'b', 'c', '\\\\'', '\\\"'})\")\n+        @CharArray({'a', 'b', 'c', '\\'', '\"'})\n@@ -212,2 +212,2 @@\n-       \"@StringArray({\\\"A\\\", \\\"B\\\", \\\"C\\\", \\\"\\\\\\\"Quote\\\\\\\"\\\"})\")\n-        @StringArray({\"A\", \"B\", \"C\", \"\\\"Quote\\\"\"})\n+       \"@StringArray({\\\"A\\\", \\\"B\\\", \\\"C\\\", \\\"\\\\\\\"Quote\\\\\\\"\\\", \\\"'\\\", \\\"\\\\\\\"\\\"})\")\n+        @StringArray({\"A\", \"B\", \"C\", \"\\\"Quote\\\"\", \"'\", \"\\\"\"})\n","filename":"test\/jdk\/java\/lang\/annotation\/AnnotationToStringTest.java","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"}]}