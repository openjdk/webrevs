{"files":[{"patch":"@@ -120,0 +120,1 @@\n+  assert(CDSConfig::is_dumping_aot_linked_classes(), \"sanity\");\n@@ -121,1 +122,1 @@\n-  if (!CDSConfig::is_dumping_aot_linked_classes() || !SystemDictionaryShared::is_builtin(ik)) {\n+  if (!SystemDictionaryShared::is_builtin(ik)) {\n@@ -198,1 +199,1 @@\n-        \/\/ This class was recorded as a AOT-linked for the base archive,\n+        \/\/ This class was recorded as AOT-linked for the base archive,\n","filename":"src\/hotspot\/share\/cds\/aotClassLinker.cpp","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -316,1 +316,6 @@\n-    _estimated_hashtable_bytes += _klasses->length() * 16 * sizeof(Klass*);\n+    \/\/ This is difficult to estimate when dumping the dynamic archive, as the\n+    \/\/ AOTLinkedClassTable may need to contain classes in the static archive as well.\n+    \/\/\n+    \/\/ Just give a generous estimate for now. We will remove estimate_archive_size()\n+    \/\/ in JDK-8340416\n+    _estimated_hashtable_bytes += 20 * 1024 * 1024;\n@@ -828,0 +833,2 @@\n+        ADD_COUNT(num_hidden_klasses);\n+        hidden = \" hidden\";\n@@ -875,4 +882,0 @@\n-      if (ik->is_hidden()) {\n-        ADD_COUNT(num_hidden_klasses);\n-        hidden = \" hidden\";\n-      }\n","filename":"src\/hotspot\/share\/cds\/archiveBuilder.cpp","additions":8,"deletions":5,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -99,1 +99,1 @@\n-  \/* The following 3 flags are aliases of -Xshare:dump, *\/                  \\\n+  \/* The following 3 flags are aliases of -Xshare:dump,                 *\/  \\\n","filename":"src\/hotspot\/share\/cds\/cds_globals.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}