{"files":[{"patch":"@@ -83,7 +83,2 @@\n-      bool is_virtual = java_lang_VirtualThread::is_instance(_current->jvmti_vthread());\n-      bool should_rebind = (_is_mount && !is_virtual) || (!_is_mount && is_virtual);\n-      if (should_rebind) {\n-        \/\/ We rebinded on start_transition but the mount\/unmount operation\n-        \/\/ failed so now we need to rebind to the original state.\n-        _current->rebind_to_jvmti_thread_state_of(_is_mount ? _vthread() : _current->threadObj());\n-        OrderAccess::fence();  \/\/ dont reorder with clear of transition flags\n+      if (_is_mount) {\n+        _current->rebind_to_jvmti_thread_state_of(_vthread());\n@@ -91,0 +86,2 @@\n+      DEBUG_ONLY(bool is_virtual = java_lang_VirtualThread::is_instance(_current->jvmti_vthread()));\n+      assert((_is_mount && is_virtual) || (!_is_mount && !is_virtual), \"wrong identity\");\n","filename":"src\/hotspot\/share\/runtime\/mountUnmountDisabler.cpp","additions":4,"deletions":7,"binary":false,"changes":11,"status":"modified"}]}