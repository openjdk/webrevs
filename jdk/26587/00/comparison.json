{"files":[{"patch":"@@ -528,3 +528,1 @@\n-    ClassUnloadingContext ctx(1 \/* num_nmethod_unlink_workers *\/,\n-                              false \/* unregister_nmethods_during_purge *\/,\n-                              false \/* lock_nmethod_free_separately *\/);\n+    ClassUnloadingContext* ctx = ClassUnloadingContext::context();\n@@ -546,1 +544,1 @@\n-      ctx.purge_nmethods();\n+      ctx->purge_nmethods();\n@@ -554,1 +552,1 @@\n-      ctx.free_nmethods();\n+      ctx->free_nmethods();\n@@ -562,7 +560,0 @@\n-\n-    \/\/ Delete metaspaces for unloaded class loaders and clean up loader_data graph\n-    ClassLoaderDataGraph::purge(true \/* at_safepoint *\/);\n-    DEBUG_ONLY(MetaspaceUtils::verify();)\n-\n-    \/\/ Need to clear claim bits for the next mark.\n-    ClassLoaderDataGraph::clear_claimed_marks();\n","filename":"src\/hotspot\/share\/gc\/serial\/serialFullGC.cpp","additions":3,"deletions":12,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -606,0 +606,3 @@\n+  ClassUnloadingContext ctx(1 \/* num_nmethod_unlink_workers *\/,\n+                            false \/* unregister_nmethods_during_purge *\/,\n+                            false \/* lock_nmethod_free_separately *\/);\n@@ -630,0 +633,7 @@\n+  \/\/ Delete metaspaces for unloaded class loaders and clean up loader_data graph\n+  ClassLoaderDataGraph::purge(\/*at_safepoint*\/true);\n+  DEBUG_ONLY(MetaspaceUtils::verify();)\n+\n+  \/\/ Need to clear claim bits for the next mark.\n+  ClassLoaderDataGraph::clear_claimed_marks();\n+\n","filename":"src\/hotspot\/share\/gc\/serial\/serialHeap.cpp","additions":10,"deletions":0,"binary":false,"changes":10,"status":"modified"}]}