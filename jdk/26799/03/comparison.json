{"files":[{"patch":"@@ -324,4 +324,5 @@\n-                if (slowPath) {\n-                    jint tmph = sh;\n-                    while (tmph > 0) {\n-                        j2d_glTexSubImage2D(GL_TEXTURE_2D, 0,\n+                if (pf != NULL) {\n+                    if (slowPath) {\n+                        jint tmph = sh;\n+                        while (tmph > 0) {\n+                            j2d_glTexSubImage2D(GL_TEXTURE_2D, 0,\n@@ -331,2 +332,8 @@\n-                        pSrc = PtrAddBytes(pSrc, srcInfo->scanStride);\n-                        tmph--;\n+                            pSrc = PtrAddBytes(pSrc, srcInfo->scanStride);\n+                            tmph--;\n+                        }\n+                    } else {\n+                        j2d_glTexSubImage2D(GL_TEXTURE_2D, 0,\n+                                            0, 0, sw, sh,\n+                                            pf->format, pf->type,\n+                                            pSrc);\n@@ -334,5 +341,0 @@\n-                } else {\n-                    j2d_glTexSubImage2D(GL_TEXTURE_2D, 0,\n-                                        0, 0, sw, sh,\n-                                        pf->format, pf->type,\n-                                        pSrc);\n@@ -341,0 +343,1 @@\n+\n@@ -409,7 +412,8 @@\n-    if (srcInfo->scanStride % srcInfo->pixelStride != 0) {\n-        jint width = dx2 - dx1;\n-        jint height = dy2 - dy1;\n-        GLvoid *pSrc = srcInfo->rasBase;\n-\n-        while (height > 0) {\n-            j2d_glTexSubImage2D(dstOps->textureTarget, 0,\n+    if (pf != NULL) {\n+        if (srcInfo->scanStride % srcInfo->pixelStride != 0) {\n+            jint width = dx2 - dx1;\n+            jint height = dy2 - dy1;\n+            GLvoid *pSrc = srcInfo->rasBase;\n+\n+            while (height > 0) {\n+                j2d_glTexSubImage2D(dstOps->textureTarget, 0,\n@@ -418,2 +422,7 @@\n-            pSrc = PtrAddBytes(pSrc, srcInfo->scanStride);\n-            height--;\n+                pSrc = PtrAddBytes(pSrc, srcInfo->scanStride);\n+                height--;\n+            }\n+        } else {\n+            j2d_glTexSubImage2D(dstOps->textureTarget, 0,\n+                                dx1, dy1, dx2-dx1, dy2-dy1,\n+                                pf->format, pf->type, srcInfo->rasBase);\n@@ -421,4 +430,0 @@\n-    } else {\n-        j2d_glTexSubImage2D(dstOps->textureTarget, 0,\n-                            dx1, dy1, dx2-dx1, dy2-dy1,\n-                            pf->format, pf->type, srcInfo->rasBase);\n","filename":"src\/java.desktop\/share\/native\/common\/java2d\/opengl\/OGLBlitLoops.c","additions":29,"deletions":24,"binary":false,"changes":53,"status":"modified"},{"patch":"@@ -282,1 +282,3 @@\n-                if (transparentColor < 0) {\n+                if (colorMap &&\n+                    colorMap->Colors &&\n+                    transparentColor < 0) {\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/splashscreen_gif.c","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -279,4 +279,1 @@\n-        fp_glib_check_version = dlsym(gtk3_libhandle, \"glib_check_version\");\n-        if (!fp_glib_check_version) {\n-            dlerror();\n-        }\n+        fp_glib_check_version = dl_symbol(\"glib_check_version\");\n","filename":"src\/java.desktop\/unix\/native\/libawt_xawt\/awt\/gtk3_interface.c","additions":1,"deletions":4,"binary":false,"changes":5,"status":"modified"}]}