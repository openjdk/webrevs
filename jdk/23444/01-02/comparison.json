{"files":[{"patch":"@@ -176,0 +176,1 @@\n+            \/\/ If no memory has been allocated then don't force its creation\n@@ -179,2 +180,5 @@\n-        if (UnsafeAccess.UNSAFE.getLong(getFailedSpeculationsAddress()) != 0) {\n-            failedSpeculations = compilerToVM().getFailedSpeculations(failedSpeculationsAddress, failedSpeculations);\n+        \/\/ Go through getFailedSpeculationsAddress() to ensure that any concurrent\n+        \/\/ initialization of failedSpeculationsAddress is seen by this thread.\n+        long address = getFailedSpeculationsAddress();\n+        if (UnsafeAccess.UNSAFE.getLong(address) != 0) {\n+            failedSpeculations = compilerToVM().getFailedSpeculations(address, failedSpeculations);\n","filename":"src\/jdk.internal.vm.ci\/share\/classes\/jdk\/vm\/ci\/hotspot\/HotSpotSpeculationLog.java","additions":6,"deletions":2,"binary":false,"changes":8,"status":"modified"}]}