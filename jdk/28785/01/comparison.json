{"files":[{"patch":"@@ -936,2 +936,2 @@\n-  ProjNode* proj1 = region->in(idx1)->isa_Proj();\n-  ProjNode* proj2 = region->in(idx2)->isa_Proj();\n+  IfProjNode* proj1 = region->in(idx1)->isa_IfProj();\n+  IfProjNode* proj2 = region->in(idx2)->isa_IfProj();\n","filename":"src\/hotspot\/share\/opto\/cfgnode.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -345,3 +345,3 @@\n-  bool has_shared_region(ProjNode* proj, ProjNode*& success, ProjNode*& fail);\n-  bool has_only_uncommon_traps(ProjNode* proj, ProjNode*& success, ProjNode*& fail, PhaseIterGVN* igvn);\n-  Node* merge_uncommon_traps(ProjNode* proj, ProjNode* success, ProjNode* fail, PhaseIterGVN* igvn);\n+  bool has_shared_region(IfProjNode* proj, IfProjNode*& success, IfProjNode*& fail) const;\n+  bool has_only_uncommon_traps(IfProjNode* proj, IfProjNode*& success, IfProjNode*& fail, PhaseIterGVN* igvn) const;\n+  Node* merge_uncommon_traps(IfProjNode* proj, IfProjNode* success, IfProjNode* fail, PhaseIterGVN* igvn);\n@@ -349,5 +349,5 @@\n-  bool is_cmp_with_loadrange(ProjNode* proj);\n-  bool is_null_check(ProjNode* proj, PhaseIterGVN* igvn);\n-  bool is_side_effect_free_test(ProjNode* proj, PhaseIterGVN* igvn);\n-  void reroute_side_effect_free_unc(ProjNode* proj, ProjNode* dom_proj, PhaseIterGVN* igvn);\n-  bool fold_compares_helper(ProjNode* proj, ProjNode* success, ProjNode* fail, PhaseIterGVN* igvn);\n+  bool is_cmp_with_loadrange(IfProjNode* proj) const;\n+  bool is_null_check(IfProjNode* proj, PhaseIterGVN* igvn) const;\n+  bool is_side_effect_free_test(IfProjNode* proj, PhaseIterGVN* igvn) const;\n+  static void reroute_side_effect_free_unc(IfProjNode* proj, IfProjNode* dom_proj, PhaseIterGVN* igvn);\n+  bool fold_compares_helper(IfProjNode* proj, IfProjNode* success, IfProjNode* fail, PhaseIterGVN* igvn);\n@@ -544,0 +544,5 @@\n+  \/\/ Return the other IfProj node.\n+  IfProjNode* other_if_proj() const {\n+    return in(0)->as_If()->proj_out(1 - _con)->as_IfProj();\n+  }\n+\n","filename":"src\/hotspot\/share\/opto\/cfgnode.hpp","additions":13,"deletions":8,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -772,1 +772,1 @@\n-    ctrl->is_Proj() &&\n+    ctrl->is_IfProj() &&\n@@ -785,2 +785,2 @@\n-bool IfNode::has_shared_region(ProjNode* proj, ProjNode*& success, ProjNode*& fail) {\n-  ProjNode* otherproj = proj->other_if_proj();\n+bool IfNode::has_shared_region(IfProjNode* proj, IfProjNode*& success, IfProjNode*& fail) const {\n+  IfProjNode* otherproj = proj->other_if_proj();\n@@ -794,3 +794,3 @@\n-      ProjNode* proj = proj_out(i);\n-      if (success == nullptr && proj->outcnt() == 1 && proj->unique_out() == region) {\n-        success = proj;\n+      IfProjNode* next_proj = proj_out(i)->as_IfProj();\n+      if (success == nullptr && next_proj->outcnt() == 1 && next_proj->unique_out() == region) {\n+        success = next_proj;\n@@ -798,1 +798,1 @@\n-        fail = proj;\n+        fail = next_proj;\n@@ -800,1 +800,2 @@\n-        success = fail = nullptr;\n+        success = nullptr;\n+        fail = nullptr;\n@@ -851,2 +852,2 @@\n-bool IfNode::has_only_uncommon_traps(ProjNode* proj, ProjNode*& success, ProjNode*& fail, PhaseIterGVN* igvn) {\n-  ProjNode* otherproj = proj->other_if_proj();\n+bool IfNode::has_only_uncommon_traps(IfProjNode* proj, IfProjNode*& success, IfProjNode*& fail, PhaseIterGVN* igvn) const {\n+  IfProjNode* otherproj = proj->other_if_proj();\n@@ -889,2 +890,2 @@\n-        success = unc_proj;\n-        fail = unc_proj->other_if_proj();\n+        success = unc_proj->as_IfProj();\n+        fail = unc_proj->as_IfProj()->other_if_proj();\n@@ -899,1 +900,1 @@\n-bool IfNode::fold_compares_helper(ProjNode* proj, ProjNode* success, ProjNode* fail, PhaseIterGVN* igvn) {\n+bool IfNode::fold_compares_helper(IfProjNode* proj, IfProjNode* success, IfProjNode* fail, PhaseIterGVN* igvn) {\n@@ -907,1 +908,1 @@\n-  ProjNode* otherproj = proj->other_if_proj();\n+  IfProjNode* otherproj = proj->other_if_proj();\n@@ -1109,1 +1110,1 @@\n-Node* IfNode::merge_uncommon_traps(ProjNode* proj, ProjNode* success, ProjNode* fail, PhaseIterGVN* igvn) {\n+Node* IfNode::merge_uncommon_traps(IfProjNode* proj, IfProjNode* success, IfProjNode* fail, PhaseIterGVN* igvn) {\n@@ -1113,1 +1114,1 @@\n-  ProjNode* otherproj = proj->other_if_proj();\n+  IfProjNode* otherproj = proj->other_if_proj();\n@@ -1240,1 +1241,1 @@\n-bool IfNode::is_cmp_with_loadrange(ProjNode* proj) {\n+bool IfNode::is_cmp_with_loadrange(IfProjNode* proj) const {\n@@ -1259,1 +1260,1 @@\n-bool IfNode::is_null_check(ProjNode* proj, PhaseIterGVN* igvn) {\n+bool IfNode::is_null_check(IfProjNode* proj, PhaseIterGVN* igvn) const {\n@@ -1276,1 +1277,1 @@\n-bool IfNode::is_side_effect_free_test(ProjNode* proj, PhaseIterGVN* igvn) {\n+bool IfNode::is_side_effect_free_test(IfProjNode* proj, PhaseIterGVN* igvn) const {\n@@ -1316,1 +1317,1 @@\n-void IfNode::reroute_side_effect_free_unc(ProjNode* proj, ProjNode* dom_proj, PhaseIterGVN* igvn) {\n+void IfNode::reroute_side_effect_free_unc(IfProjNode* proj, IfProjNode* dom_proj, PhaseIterGVN* igvn) {\n@@ -1318,1 +1319,1 @@\n-  ProjNode* otherproj = proj->other_if_proj();\n+  IfProjNode* otherproj = proj->other_if_proj();\n@@ -1349,3 +1350,3 @@\n-      ProjNode* success = nullptr;\n-      ProjNode* fail = nullptr;\n-      ProjNode* dom_cmp = ctrl->as_Proj();\n+      IfProjNode* success = nullptr;\n+      IfProjNode* fail = nullptr;\n+      IfProjNode* dom_cmp = ctrl->as_IfProj();\n@@ -1365,2 +1366,2 @@\n-      ProjNode* success = nullptr;\n-      ProjNode* fail = nullptr;\n+      IfProjNode* success = nullptr;\n+      IfProjNode* fail = nullptr;\n@@ -1368,2 +1369,2 @@\n-      ProjNode* dom_cmp = dom->isa_Proj();\n-      ProjNode* other_cmp = ctrl->isa_Proj();\n+      IfProjNode* dom_cmp = dom->isa_IfProj();\n+      IfProjNode* other_cmp = ctrl->isa_IfProj();\n","filename":"src\/hotspot\/share\/opto\/ifnode.cpp","additions":29,"deletions":28,"binary":false,"changes":57,"status":"modified"},{"patch":"@@ -6174,1 +6174,1 @@\n-    Node* other_proj = node->as_IfProj()->other_if_proj();\n+    IfProjNode* other_proj = node->as_IfProj()->other_if_proj();\n","filename":"src\/hotspot\/share\/opto\/library_call.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -3106,1 +3106,1 @@\n-  ProjNode* other_proj = ctrl_use->as_IfProj()->other_if_proj();\n+  IfProjNode* other_proj = ctrl_use->as_IfProj()->other_if_proj();\n","filename":"src\/hotspot\/share\/opto\/memnode.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -263,6 +263,1 @@\n-  return other_if_proj()->is_uncommon_trap_proj(reason);\n-}\n-\n-ProjNode* ProjNode::other_if_proj() const {\n-  assert(_con == 0 || _con == 1, \"not an if?\");\n-  return in(0)->as_If()->proj_out(1-_con);\n+  return as_IfProj()->other_if_proj()->is_uncommon_trap_proj(reason);\n","filename":"src\/hotspot\/share\/opto\/multnode.cpp","additions":1,"deletions":6,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -203,3 +203,0 @@\n-\n-  \/\/ Return other proj node when this is a If proj node\n-  ProjNode* other_if_proj() const;\n","filename":"src\/hotspot\/share\/opto\/multnode.hpp","additions":0,"deletions":3,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -68,1 +68,1 @@\n-  ProjNode* other_proj = success_proj->other_if_proj();\n+  IfProjNode* other_proj = success_proj->other_if_proj();\n@@ -399,1 +399,1 @@\n-  ProjNode* other_proj = success_proj->other_if_proj();\n+  IfProjNode* other_proj = success_proj->other_if_proj();\n","filename":"src\/hotspot\/share\/opto\/predicates.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}