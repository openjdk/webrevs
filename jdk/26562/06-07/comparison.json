{"files":[{"patch":"@@ -56,0 +56,1 @@\n+#include \"utilities\/decoder.hpp\"\n@@ -57,0 +58,1 @@\n+#include \"utilities\/nativeStackPrinter.hpp\"\n@@ -58,0 +60,1 @@\n+#include \"compiler\/disassembler.hpp\"\n@@ -249,2 +252,4 @@\n-    if (sig == SIGBUS && pc != info->si_addr && CodeCache::contains(info->si_addr)\n-        && !CodeCache::contains(pc)) {\n+    if (sig == SIGBUS\n+        && pc != info->si_addr\n+        && CodeCache::contains(info->si_addr)\n+        && os::address_is_in_vm(pc)) {\n@@ -255,1 +260,1 @@\n-          tty->print_cr(\"Healing WXMode %s at %p to WXWrite\",\n+          tty->print(\"Healing WXMode %s at %p to WXWrite\",\n@@ -257,0 +262,13 @@\n+          char name[128];\n+          int offset = 0;\n+          if (os::dll_address_to_function_name(pc, name, sizeof name, &offset)) {\n+            tty->print_cr(\"  (%s+0x%x)\", name, offset);\n+          } else {\n+            tty->cr();\n+          }\n+          if (Verbose) {\n+            char buf[O_BUFLEN];\n+            NativeStackPrinter nsp(thread);\n+            nsp.print_stack(tty, buf, sizeof(buf), pc,\n+                            true \/* print_source_info *\/, -1 \/* max stack *\/);\n+          }\n@@ -258,2 +276,4 @@\n-      assert(StressWXHealing,\n-             \"We should not reach here unless StressWXHealing\");\n+#ifndef PRODUCT\n+        guarantee(StressWXHealing,\n+                  \"We should not reach here unless StressWXHealing\");\n+#endif\n","filename":"src\/hotspot\/os_cpu\/bsd_aarch64\/os_bsd_aarch64.cpp","additions":25,"deletions":5,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -38,1 +38,1 @@\n-  Thread *_thread;\n+  Thread* _thread;\n@@ -46,1 +46,1 @@\n-    JavaThread *javaThread\n+    JavaThread* javaThread\n@@ -60,1 +60,1 @@\n-    JavaThread *javaThread\n+    JavaThread* javaThread\n@@ -75,1 +75,1 @@\n-      JavaThread *javaThread\n+      JavaThread* javaThread\n","filename":"src\/hotspot\/share\/runtime\/threadWXSetters.inline.hpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -599,2 +599,0 @@\n-  MACOS_AARCH64_ONLY(os::current_thread_enable_wx(WXWrite));\n-\n","filename":"src\/hotspot\/share\/runtime\/threads.cpp","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"}]}