{"files":[{"patch":"@@ -43,1 +43,0 @@\n-import java.util.Arrays;\n@@ -76,1 +75,0 @@\n-import static org.junit.jupiter.api.Assertions.assertTrue;\n@@ -80,1 +78,0 @@\n-import org.junit.jupiter.api.BeforeEach;\n@@ -122,1 +119,3 @@\n-    record Heart(AtomicBoolean beat) implements TestWatcher, BeforeEachCallback {\n+    final static class TestStopper implements TestWatcher, BeforeEachCallback {\n+        final AtomicReference<String> failed = new AtomicReference<>();\n+        TestStopper() { }\n@@ -126,1 +125,2 @@\n-                beat.set(false);\n+                String msg = \"Aborting due to: \" + cause;\n+                failed.compareAndSet(null, msg);\n@@ -137,1 +137,2 @@\n-            Assumptions.assumeTrue(beat.get(), \"It's dead, Jim.\");\n+            String msg = failed.get();\n+            Assumptions.assumeTrue(msg == null, msg);\n@@ -142,1 +143,1 @@\n-    static final Heart heart = new Heart(new AtomicBoolean(true));\n+    static final TestStopper stopper = new TestStopper();\n@@ -175,6 +176,0 @@\n-\/\/    static String name(ITestResult result) {\n-\/\/        var params = result.getParameters();\n-\/\/        return result.getName()\n-\/\/                + (params == null ? \"()\" : Arrays.toString(result.getParameters()));\n-\/\/    }\n-\n","filename":"test\/jdk\/java\/net\/httpclient\/AbstractThrowingPublishers.java","additions":8,"deletions":13,"binary":false,"changes":21,"status":"modified"}]}