{"files":[{"patch":"@@ -47,2 +47,6 @@\n-    private static final long MINIMUM_HEAP_SIZE = 1024 * 1024 * 1024; \/\/ 1GB\n-    private static final long EXPECTED_MIN_YOUNG = 357564416;  \/\/ default 1\/3 of minimum heap + alignment\n+    private static final long HEAPWORD_SIZE = Platform.is64bit() ? 8 : 4;\n+    \/\/ Must be a power of 2\n+    private static final long GEN_ALIGNMENT = 64 * 1024 * HEAPWORD_SIZE;\n+\n+    private static final long MINIMUM_HEAP_SIZE = 256 * 1024 * 1024; \/\/ 256M\n+    private static final long EXPECTED_MIN_YOUNG = alignDown(MINIMUM_HEAP_SIZE \/ 3, GEN_ALIGNMENT);\n@@ -51,0 +55,5 @@\n+    \/\/ s has to be a power of 2\n+    private static long alignDown(long s, long align) {\n+        return s & (~(align-1));\n+    }\n+\n@@ -54,2 +63,2 @@\n-        flagList.add(\"-Xms1g\");\n-        flagList.add(\"-Xmx2g\");\n+        flagList.add(\"-Xms256m\");\n+        flagList.add(\"-Xmx1g\");\n@@ -65,1 +74,1 @@\n-            throw new RuntimeException(\"Wrong value for MinHeapSize. Expected \" + MINIMUM_HEAP_SIZE + \" but got \" + minimumHeap);\n+            throw new RuntimeException(\"Wrong value for minimum heap. Expected \" + MINIMUM_HEAP_SIZE + \" but got \" + minimumHeap);\n@@ -70,1 +79,1 @@\n-            throw new RuntimeException(\"Wrong value for NewSize. Expected \" + EXPECTED_MIN_YOUNG + \" but got \" + minimumYoung);\n+            throw new RuntimeException(\"Wrong value for minimum young. Expected \" + EXPECTED_MIN_YOUNG + \" but got \" + minimumYoung);\n@@ -75,1 +84,1 @@\n-            throw new RuntimeException(\"Wrong value for OldSize. Expected \" + EXPECTED_MIN_OLD + \" but got \" + minimumOld);\n+            throw new RuntimeException(\"Wrong value for minimum old. Expected \" + EXPECTED_MIN_OLD + \" but got \" + minimumOld);\n","filename":"test\/hotspot\/jtreg\/gc\/arguments\/TestParallelGCErgo.java","additions":16,"deletions":7,"binary":false,"changes":23,"status":"modified"}]}