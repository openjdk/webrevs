{"files":[{"patch":"@@ -983,3 +983,8 @@\n-                if (pendingLine.length() > pendingLinePointer &&\n-                    Character.isLowSurrogate(pendingLine.charAt(pendingLinePointer))) {\n-                    dataToConvert.append(readUserInputChar());\n+                \/\/surrogates cannot be converted independently,\n+                \/\/read the low surrogate and append it to dataToConvert:\n+                char lowSurrogate = readUserInputChar();\n+                if (Character.isLowSurrogate(lowSurrogate)) {\n+                    dataToConvert.append(lowSurrogate);\n+                } else {\n+                    \/\/if not the low surrogate, rollback the reading of the character:\n+                    pendingLinePointer--;\n","filename":"src\/jdk.jshell\/share\/classes\/jdk\/internal\/jshell\/tool\/ConsoleIOContext.java","additions":8,"deletions":3,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -52,2 +52,6 @@\n-            inputSink.write(\"new String(System.in.readNBytes(4))\\n\\uD83D\\uDE03\\n\");\n-            waitOutput(out, \"\\\"\\uD83D\\uDE03\\\"\");\n+            inputSink.write(\"new String(System.in.readNBytes(5))\\n\\uD83D\\uDE03\\n\");\n+            waitOutput(out, patternQuote(\"\\\"\\uD83D\\uDE03\\\\n\\\"\"));\n+            inputSink.write(\"new String(System.in.readNBytes(2))\\n\\uD83D\\n\");\n+            waitOutput(out, patternQuote(\"\\\"?\\\\n\\\"\"));\n+            inputSink.write(\"new String(System.in.readNBytes(2))\\n\\uDE03\\n\");\n+            waitOutput(out, patternQuote(\"\\\"?\\\\n\\\"\"));\n","filename":"test\/langtools\/jdk\/jshell\/InputUITest.java","additions":6,"deletions":2,"binary":false,"changes":8,"status":"modified"}]}