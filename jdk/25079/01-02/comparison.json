{"files":[{"patch":"@@ -41,0 +41,1 @@\n+import java.util.function.Function;\n@@ -46,0 +47,4 @@\n+    static final String LINE_SEPARATOR = System.getProperty(\"line.separator\");\n+    static final String LINE_SEPARATOR_ESCAPED = LINE_SEPARATOR.replace(\"\\n\", \"\\\\n\")\n+                                                               .replace(\"\\r\", \"\\\\r\");\n+\n@@ -51,0 +56,4 @@\n+        Function<Integer, String> genSnippet =\n+                realCharsToRead -> \"new String(System.in.readNBytes(\" +\n+                                   (realCharsToRead + LINE_SEPARATOR.length()) +\n+                                   \"))\\n\";\n@@ -52,6 +61,6 @@\n-            inputSink.write(\"new String(System.in.readNBytes(5))\\n\\uD83D\\uDE03\\n\");\n-            waitOutput(out, patternQuote(\"\\\"\\uD83D\\uDE03\\\\n\\\"\"));\n-            inputSink.write(\"new String(System.in.readNBytes(2))\\n\\uD83D\\n\");\n-            waitOutput(out, patternQuote(\"\\\"?\\\\n\\\"\"));\n-            inputSink.write(\"new String(System.in.readNBytes(2))\\n\\uDE03\\n\");\n-            waitOutput(out, patternQuote(\"\\\"?\\\\n\\\"\"));\n+            inputSink.write(genSnippet.apply(4) + \"\\uD83D\\uDE03\\n\");\n+            waitOutput(out, patternQuote(\"\\\"\\uD83D\\uDE03\" + LINE_SEPARATOR_ESCAPED + \"\\\"\"));\n+            inputSink.write(genSnippet.apply(1) + \"\\uD83D\\n\");\n+            waitOutput(out, patternQuote(\"\\\"?\" + LINE_SEPARATOR_ESCAPED + \"\\\"\"));\n+            inputSink.write(genSnippet.apply(1) + \"\\uDE03\\n\");\n+            waitOutput(out, patternQuote(\"\\\"?\" + LINE_SEPARATOR_ESCAPED + \"\\\"\"));\n","filename":"test\/langtools\/jdk\/jshell\/InputUITest.java","additions":15,"deletions":6,"binary":false,"changes":21,"status":"modified"}]}