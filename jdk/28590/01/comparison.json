{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -30,1 +30,1 @@\n- * @run main Bug4407042 10\n+ * @run junit Bug4407042\n@@ -33,0 +33,3 @@\n+import org.junit.jupiter.api.Assumptions;\n+import org.junit.jupiter.api.Test;\n+\n@@ -37,1 +40,0 @@\n-\/\/ Usage: java Bug4407042 [duration]\n@@ -44,1 +46,1 @@\n-    static int duration = 100;\n+    static int duration = 10;\n@@ -46,0 +48,1 @@\n+    @Test\n@@ -48,5 +51,4 @@\n-        if (!TestUtils.usesAsciiDigits(locale)\n-                || !TestUtils.usesGregorianCalendar(locale)) {\n-            System.out.println(\"Skipping this test because locale is \" + locale);\n-            return;\n-        }\n+        Assumptions.assumeTrue(TestUtils.usesAsciiDigits(locale),\n+                locale + \" does not use ASCII digits\");\n+        Assumptions.assumeTrue(TestUtils.usesGregorianCalendar(locale),\n+                locale + \" does not use a Gregorian calendar\");\n@@ -127,7 +129,0 @@\n-\n-    public static void main (String[] args) {\n-        if (args.length == 1) {\n-            duration = Math.max(10, Integer.parseInt(args[0]));\n-        }\n-        new Bug4407042().test();\n-    }\n","filename":"test\/jdk\/java\/text\/Format\/DateFormat\/Bug4407042.java","additions":11,"deletions":16,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2004, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2004, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,1 +31,1 @@\n- * @run main Bug4845901\n+ * @run junit\/othervm Bug4845901\n@@ -34,0 +34,3 @@\n+import org.junit.jupiter.api.Assumptions;\n+import org.junit.jupiter.api.Test;\n+\n@@ -38,1 +41,3 @@\n-    public static void main (String args[]) {\n+\n+    @Test\n+    void test() {\n@@ -40,4 +45,2 @@\n-        if (!TestUtils.usesGregorianCalendar(locale)) {\n-            System.out.println(\"Skipping this test because locale is \" + locale);\n-            return;\n-        }\n+        Assumptions.assumeTrue(TestUtils.usesGregorianCalendar(locale),\n+                locale + \" does not use a Gregorian calendar\");\n","filename":"test\/jdk\/java\/text\/Format\/DateFormat\/Bug4845901.java","additions":10,"deletions":7,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,1 +28,1 @@\n- * @run main Bug6530336\n+ * @run junit\/othervm Bug6530336\n@@ -31,0 +31,5 @@\n+import org.junit.jupiter.api.Assumptions;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.params.ParameterizedTest;\n+import org.junit.jupiter.params.provider.FieldSource;\n+\n@@ -37,24 +42,2 @@\n-public class Bug6530336 {\n-\n-    public static void main(String[] args) throws Exception {\n-        Locale defaultLocale = Locale.getDefault();\n-        TimeZone defaultTimeZone = TimeZone.getDefault();\n-\n-        boolean err = false;\n-\n-        try {\n-            Locale locales[] = Locale.getAvailableLocales();\n-            TimeZone timezone_LA = TimeZone.getTimeZone(\"America\/Los_Angeles\");\n-            TimeZone.setDefault(timezone_LA);\n-\n-            TimeZone timezones[] = {\n-                TimeZone.getTimeZone(\"America\/New_York\"),\n-                TimeZone.getTimeZone(\"America\/Denver\"),\n-            };\n-\n-            String[] expected = {\n-                \"Sun Jul 15 12:00:00 PDT 2007\",\n-                \"Sun Jul 15 14:00:00 PDT 2007\",\n-            };\n-\n-            Date[] dates = new Date[2];\n+import static org.junit.jupiter.api.Assertions.assertDoesNotThrow;\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n@@ -62,15 +45,1 @@\n-            for (int i = 0; i < locales.length; i++) {\n-                Locale locale = locales[i];\n-                if (!TestUtils.usesGregorianCalendar(locale)) {\n-                    continue;\n-                }\n-\n-                Locale.setDefault(locale);\n-\n-                for (int j = 0; j < timezones.length; j++) {\n-                    Calendar cal = Calendar.getInstance(timezones[j]);\n-                    cal.set(2007, 6, 15, 15, 0, 0);\n-                    dates[j] = cal.getTime();\n-                }\n-\n-                SimpleDateFormat sdf = new SimpleDateFormat(\"EEE MMM dd HH:mm:ss zzz yyyy\");\n+public class Bug6530336 {\n@@ -78,14 +47,16 @@\n-                for (int j = 0; j < timezones.length; j++) {\n-                    sdf.setTimeZone(timezones[j]);\n-                    String date = sdf.format(dates[j]);\n-                    \/\/ CLDR localizes GMT format into for some locales. Ignore those cases\n-                    if (date.matches(\".*GMT[\\\\s+-]\\\\D.*\") ||\n-                            date.contains(\"UTC\") ||\n-                            date.contains(\"TMG\") || \/\/ Interlingue\n-                            date.contains(\"\\u07dc\\u07ed\\u07d5\\u07d6\") || \/\/ N’Ko\n-                            date.contains(\"\\ua2e7\\ua0c5\\ua395\\ua3e6\\ua12e\\ua209\") || \/\/ Sichuan Yi, Nuosu\n-                            date.contains(\"\\u06af\\u0631\\u06cc\\u0646\\u06cc\\u0686\")) { \/\/ Central Kurdish\n-                        continue;\n-                    }\n-                    sdf.setTimeZone(timezone_LA);\n-                    String date_LA = sdf.parse(date).toString();\n+    private static final Locale[] locales = Locale.getAvailableLocales();\n+    private static final TimeZone[] timezones = {\n+            TimeZone.getTimeZone(\"America\/New_York\"),\n+            TimeZone.getTimeZone(\"America\/Denver\"),\n+    };\n+    private static final TimeZone timezone_LA = TimeZone.getTimeZone(\"America\/Los_Angeles\");\n+    private static final String[] expected = {\n+            \"Sun Jul 15 12:00:00 PDT 2007\",\n+            \"Sun Jul 15 14:00:00 PDT 2007\",\n+    };\n+    private static final Date[] dates = new Date[2];\n+\n+    @BeforeAll\n+    static void setup() {\n+        TimeZone.setDefault(timezone_LA);\n+    }\n@@ -93,9 +64,11 @@\n-                    if (!expected[j].equals(date_LA)) {\n-                        System.err.println(\"Got wrong Pacific time (\" +\n-                            date_LA + \") for (\" + date + \") in \" + locale +\n-                            \" in \" + timezones[j] +\n-                            \".\\nExpected=\" + expected[j]);\n-                        err = true;\n-                    }\n-                }\n-            }\n+    @ParameterizedTest\n+    @FieldSource(\"locales\")\n+    void test(Locale locale) {\n+        Assumptions.assumeTrue(TestUtils.usesGregorianCalendar(locale),\n+                locale + \" does not use a Gregorian calendar\");\n+        Locale.setDefault(locale);\n+\n+        for (int j = 0; j < timezones.length; j++) {\n+            Calendar cal = Calendar.getInstance(timezones[j]);\n+            cal.set(2007, 6, 15, 15, 0, 0);\n+            dates[j] = cal.getTime();\n@@ -103,7 +76,0 @@\n-        catch (Exception e) {\n-            e.printStackTrace();\n-            err = true;\n-        }\n-        finally {\n-            Locale.setDefault(defaultLocale);\n-            TimeZone.setDefault(defaultTimeZone);\n@@ -111,2 +77,13 @@\n-            if (err) {\n-                throw new RuntimeException(\"Failed.\");\n+        SimpleDateFormat sdf = new SimpleDateFormat(\"EEE MMM dd HH:mm:ss zzz yyyy\");\n+\n+        for (int j = 0; j < timezones.length; j++) {\n+            sdf.setTimeZone(timezones[j]);\n+            String date = sdf.format(dates[j]);\n+            \/\/ CLDR localizes GMT format into for some locales. Ignore those cases\n+            if (date.matches(\".*GMT[\\\\s+-]\\\\D.*\") ||\n+                    date.contains(\"UTC\") ||\n+                    date.contains(\"TMG\") || \/\/ Interlingue\n+                    date.contains(\"ߜ߭ߕߖ\") || \/\/ N’Ko\n+                    date.contains(\"ꋧꃅꎕꏦꄮꈉ\") || \/\/ Sichuan Yi, Nuosu\n+                    date.contains(\"گرینیچ\")) { \/\/ Central Kurdish\n+                continue;\n@@ -114,0 +91,4 @@\n+            sdf.setTimeZone(timezone_LA);\n+            String date_LA = assertDoesNotThrow(() -> sdf.parse(date).toString());\n+            assertEquals(expected[j], date_LA,\n+                    \"Got wrong Pacific time (%s) for (%s) in %s in %s.\".formatted(date_LA, date, locale, timezones[j]));\n@@ -116,1 +97,0 @@\n-\n","filename":"test\/jdk\/java\/text\/Format\/DateFormat\/Bug6530336.java","additions":54,"deletions":74,"binary":false,"changes":128,"status":"modified"},{"patch":"@@ -28,0 +28,1 @@\n+import org.junit.jupiter.api.Assumptions;\n@@ -173,4 +174,2 @@\n-        if (!TestUtils.usesAsciiDigits(locale)) {\n-            System.out.println(\"Skipping this test because locale is \" + locale);\n-            return;\n-        }\n+        Assumptions.assumeTrue(TestUtils.usesAsciiDigits(locale),\n+                locale + \" does not use ASCII digits\");\n","filename":"test\/jdk\/java\/text\/Format\/DateFormat\/DateFormatRegression.java","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -56,0 +56,1 @@\n+import org.junit.jupiter.api.Assumptions;\n@@ -129,4 +130,2 @@\n-        if (!TestUtils.usesAsciiDigits(locale)) {\n-            System.out.println(\"Skipping this test because locale is \" + locale);\n-            return;\n-        }\n+        Assumptions.assumeTrue(TestUtils.usesAsciiDigits(locale),\n+                locale + \" does not use ASCII digits\");\n","filename":"test\/jdk\/java\/text\/Format\/MessageFormat\/MessageRegression.java","additions":4,"deletions":5,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -61,0 +61,1 @@\n+import org.junit.jupiter.api.Assumptions;\n@@ -112,4 +113,2 @@\n-        if (!TestUtils.usesAsciiDigits(locale)) {\n-            System.out.println(\"Skipping this test because locale is \" + locale);\n-            return;\n-        }\n+        Assumptions.assumeTrue(TestUtils.usesAsciiDigits(locale),\n+                locale + \" does not use ASCII digits\");\n","filename":"test\/jdk\/java\/text\/Format\/NumberFormat\/NumberRegression.java","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -35,0 +35,1 @@\n+import org.junit.jupiter.api.Assumptions;\n@@ -133,4 +134,2 @@\n-        if (!TestUtils.usesGregorianCalendar(locale)) {\n-            System.out.println(\"Skipping this test because locale is \" + locale);\n-            return;\n-        }\n+        Assumptions.assumeTrue(TestUtils.usesGregorianCalendar(locale),\n+                locale + \" does not use a Gregorian calendar\");\n","filename":"test\/jdk\/java\/util\/Calendar\/CalendarLimitTest.java","additions":4,"deletions":5,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -58,0 +58,1 @@\n+import org.junit.jupiter.api.Assumptions;\n@@ -578,4 +579,2 @@\n-        if (!TestUtils.usesGregorianCalendar(locale)) {\n-            System.out.println(\"Skipping this test because locale is \" + locale);\n-            return;\n-        }\n+        Assumptions.assumeTrue(TestUtils.usesGregorianCalendar(locale),\n+                locale + \" does not use a Gregorian calendar\");\n@@ -596,4 +595,2 @@\n-        if (!TestUtils.usesGregorianCalendar(locale)) {\n-            System.out.println(\"Skipping this test because locale is \" + locale);\n-            return;\n-        }\n+        Assumptions.assumeTrue(TestUtils.usesGregorianCalendar(locale),\n+                locale + \" does not use a Gregorian calendar\");\n@@ -836,4 +833,2 @@\n-        if (!TestUtils.usesGregorianCalendar(locale)) {\n-            System.out.println(\"Skipping this test because locale is \" + locale);\n-            return;\n-        }\n+        Assumptions.assumeTrue(TestUtils.usesGregorianCalendar(locale),\n+                locale + \" does not use a Gregorian calendar\");\n@@ -924,4 +919,2 @@\n-        if (!TestUtils.usesGregorianCalendar(locale)) {\n-            System.out.println(\"Skipping this test because locale is \" + locale);\n-            return;\n-        }\n+        Assumptions.assumeTrue(TestUtils.usesGregorianCalendar(locale),\n+                locale + \" does not use a Gregorian calendar\");\n@@ -950,4 +943,2 @@\n-        if (!TestUtils.usesGregorianCalendar(locale)) {\n-            System.out.println(\"Skipping this test because locale is \" + locale);\n-            return;\n-        }\n+        Assumptions.assumeTrue(TestUtils.usesGregorianCalendar(locale),\n+                locale + \" does not use a Gregorian calendar\");\n@@ -1376,4 +1367,2 @@\n-        if (!TestUtils.usesGregorianCalendar(locale)) {\n-            System.out.println(\"Skipping this test because locale is \" + locale);\n-            return;\n-        }\n+        Assumptions.assumeTrue(TestUtils.usesGregorianCalendar(locale),\n+                locale + \" does not use a Gregorian calendar\");\n@@ -1855,5 +1844,4 @@\n-        if (!TestUtils.usesAsciiDigits(locale)\n-                || !TestUtils.usesGregorianCalendar(locale)) {\n-            System.out.println(\"Skipping this test because locale is \" + locale);\n-            return;\n-        }\n+        Assumptions.assumeTrue(TestUtils.usesAsciiDigits(locale),\n+                locale + \" does not use ASCII digits\");\n+        Assumptions.assumeTrue(TestUtils.usesGregorianCalendar(locale),\n+                locale + \" does not use a Gregorian calendar\");\n@@ -1964,4 +1952,2 @@\n-        if (!TestUtils.usesGregorianCalendar(locale)) {\n-            System.out.println(\"Skipping this test because locale is \" + locale);\n-            return;\n-        }\n+        Assumptions.assumeTrue(TestUtils.usesGregorianCalendar(locale),\n+                locale + \" does not use a Gregorian calendar\");\n","filename":"test\/jdk\/java\/util\/Calendar\/CalendarRegression.java","additions":19,"deletions":33,"binary":false,"changes":52,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -51,0 +51,1 @@\n+import org.junit.jupiter.api.Assumptions;\n@@ -226,4 +227,2 @@\n-        if (!TestUtils.usesGregorianCalendar(locale)) {\n-            System.out.println(\"Skipping this test because locale is \" + locale);\n-            return;\n-        }\n+        Assumptions.assumeTrue(TestUtils.usesGregorianCalendar(locale),\n+                locale + \" does not use a Gregorian calendar\");\n@@ -628,4 +627,2 @@\n-        if (!TestUtils.usesGregorianCalendar(locale)) {\n-            System.out.println(\"Skipping this test because locale is \" + locale);\n-            return;\n-        }\n+        Assumptions.assumeTrue(TestUtils.usesGregorianCalendar(locale),\n+                locale + \" does not use a Gregorian calendar\");\n","filename":"test\/jdk\/java\/util\/Calendar\/CalendarTest.java","additions":6,"deletions":9,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -35,0 +35,1 @@\n+import org.junit.jupiter.api.Assumptions;\n@@ -47,4 +48,2 @@\n-        if (!TestUtils.usesGregorianCalendar(locale)) {\n-            System.out.println(\"Skipping this test because locale is \" + locale);\n-            return;\n-        }\n+        Assumptions.assumeTrue(TestUtils.usesGregorianCalendar(locale),\n+                locale + \" does not use a Gregorian calendar\");\n","filename":"test\/jdk\/java\/util\/Calendar\/bug4409072.java","additions":4,"deletions":5,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2010, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,1 +32,1 @@\n- * @run main\/othervm -Duser.language.display=ja\n+ * @run junit\/othervm -Duser.language.display=ja\n@@ -35,1 +35,1 @@\n- * @run main\/othervm -Duser.language=en\n+ * @run junit\/othervm -Duser.language=en\n@@ -40,0 +40,3 @@\n+import org.junit.jupiter.api.Assumptions;\n+import org.junit.jupiter.api.Test;\n+\n@@ -47,1 +50,2 @@\n-    public static void main(String[] args) {\n+    @Test\n+    void test() {\n@@ -49,4 +53,2 @@\n-        if (TestUtils.hasSpecialVariant(reservedLocale)) {\n-            System.out.println(\"Skipping this test because locale is \" + reservedLocale);\n-            return;\n-        }\n+        Assumptions.assumeFalse(TestUtils.hasSpecialVariant(reservedLocale),\n+                reservedLocale + \" has special variant\");\n","filename":"test\/jdk\/java\/util\/Locale\/LocaleCategory.java","additions":10,"deletions":8,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -37,0 +37,1 @@\n+import org.junit.jupiter.api.Assumptions;\n@@ -167,4 +168,2 @@\n-        if (!TestUtils.usesGregorianCalendar(locale)) {\n-            System.out.println(\"Skipping this test because locale is \" + locale);\n-            return;\n-        }\n+        Assumptions.assumeTrue(TestUtils.usesGregorianCalendar(locale),\n+                locale + \" does not use a Gregorian calendar\");\n@@ -295,4 +294,2 @@\n-        if (!TestUtils.usesGregorianCalendar(locale)) {\n-            System.out.println(\"Skipping this test because locale is \" + locale);\n-            return;\n-        }\n+        Assumptions.assumeTrue(TestUtils.usesGregorianCalendar(locale),\n+                locale + \" does not use a Gregorian calendar\");\n","filename":"test\/jdk\/java\/util\/TimeZone\/TimeZoneRegression.java","additions":5,"deletions":8,"binary":false,"changes":13,"status":"modified"}]}