{"files":[{"patch":"@@ -99,1 +99,1 @@\n-  if (!phase->is_IterGVN() || alloc == nullptr || ctl->is_top()) {\n+  if (!phase->is_IterGVN() || alloc == nullptr || phase->type(ctl) == Type::TOP) {\n@@ -130,1 +130,1 @@\n-  \/\/ Find all transitive control inputs of ctl\n+  \/\/ Find all transitive control inputs of ctl that are not dead\n@@ -137,1 +137,1 @@\n-    assert(n->bottom_type() == Type::CONTROL || n->bottom_type()->base() == Type::Tuple, \"must be a control node %s\", n->Name());\n+    assert(phase->type(n) == Type::CONTROL || phase->type(n)->base() == Type::Tuple, \"must be a control node %s\", n->Name());\n@@ -145,1 +145,1 @@\n-        if (in != nullptr && !in->is_top()) {\n+        if (in != nullptr && phase->type(in) != Type::TOP) {\n@@ -151,1 +151,1 @@\n-      if (in != nullptr && !in->is_top()) {\n+      if (in != nullptr && phase->type(in) != Type::TOP) {\n@@ -169,9 +169,4 @@\n-      if (c != nullptr) {\n-        if (c->is_top()) {\n-          \/\/ out is a dead node, ignore it\n-          continue;\n-        } else if (!controls.member(c)) {\n-          \/\/ c is not a transitive control input of ctl, so out is not executed before ctl, which\n-          \/\/ means it does not affect the escape status of alloc at ctl\n-          continue;\n-        }\n+      if (c != nullptr && !controls.member(c)) {\n+        \/\/ c is not a live transitive control input of ctl, so out is not executed before ctl,\n+        \/\/ which means it does not affect the escape status of alloc at ctl\n+        continue;\n","filename":"src\/hotspot\/share\/opto\/memnode.cpp","additions":9,"deletions":14,"binary":false,"changes":23,"status":"modified"}]}