{"files":[{"patch":"@@ -699,0 +699,19 @@\n+  const TypePtr* adr_type = this->adr_type();\n+  if (adr_type == nullptr) {\n+    \/\/ This means the access is dead\n+    return phase->C->top();\n+  } else if (adr_type->base() == TypePtr::AnyPtr) {\n+    \/\/ Compile::get_alias_index will complain with these accesses\n+    if (adr_type->ptr() == TypePtr::Null) {\n+      \/\/ Access to null cannot happen, this means the access must be in a dead path\n+      return phase->C->top();\n+    } else {\n+      \/\/ Give up on a very wide access\n+      return nullptr;\n+    }\n+  }\n+\n+  int alias_idx = phase->C->get_alias_index(adr_type);\n+  assert(alias_idx != Compile::AliasIdxTop, \"must not be a dead node\");\n+  assert(alias_idx != Compile::AliasIdxBot || !phase->C->do_aliasing(), \"must not be a very wide access\");\n+\n@@ -822,1 +841,0 @@\n-        int alias_idx = phase->C->get_alias_index(adr_type());\n@@ -845,1 +863,0 @@\n-      int alias_idx = phase->C->get_alias_index(adr_type());\n@@ -2191,1 +2208,1 @@\n-  if (can_reshape && (addr_t != nullptr)) {\n+  if (addr_t != nullptr) {\n@@ -2224,1 +2241,1 @@\n-  if (in(0) != nullptr && !adr_type()->isa_rawptr() && can_reshape) {\n+  if (in(0) != nullptr && !adr_type()->isa_rawptr()) {\n@@ -2256,0 +2273,2 @@\n+  \/\/ This performs complex analysis that requires a complete graph.\n+  assert(can_reshape, \"should be in IGVN\");\n@@ -2258,0 +2277,1 @@\n+    \/\/ find_previous_store returns top when the access is dead\n@@ -3860,0 +3880,1 @@\n+        \/\/ find_previous_store returns top when the access is dead\n","filename":"src\/hotspot\/share\/opto\/memnode.cpp","additions":25,"deletions":4,"binary":false,"changes":29,"status":"modified"}]}