{"files":[{"patch":"@@ -254,1 +254,1 @@\n-    @IR(failOn = {IRNode.LOAD_P_OF_CLASS, \"Outer\", IRNode.LOAD_N_OF_CLASS, \"Outer\"})\n+    @IR(counts = { IRNode.Z_LOAD_P_WITH_BARRIER_FLAG, Common.ELIDED, \"2\" }, phase = CompilePhase.FINAL_CODE)\n@@ -257,2 +257,4 @@\n-        Common.blackhole(o1);\n-        \/\/ This load is directly optimized away by C2.\n+        Common.outer = o1;\n+        \/\/ Prevent the field loads from getting folded by making o1 escape, the fullFence is\n+        \/\/ necessary because otherwise the loads can float above the store and get folded\n+        VarHandle.fullFence();\n","filename":"test\/hotspot\/jtreg\/compiler\/gcbarriers\/TestZGCBarrierElision.java","additions":5,"deletions":3,"binary":false,"changes":8,"status":"modified"}]}