{"files":[{"patch":"@@ -1697,1 +1697,1 @@\n-  JvmtiThreadState *state = get_jvmti_thread_state(thread);\n+  JvmtiThreadState *state = thread->jvmti_thread_state();\n@@ -1716,1 +1716,1 @@\n-  JvmtiThreadState *state = get_jvmti_thread_state(thread);\n+  JvmtiThreadState *state = thread->jvmti_thread_state();\n","filename":"src\/hotspot\/share\/prims\/jvmtiExport.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -45,1 +45,0 @@\n-#include \"prims\/jvmtiExport.hpp\"\n@@ -1630,3 +1629,2 @@\n-  if (JvmtiExport::can_post_frame_pop()) {\n-    \/\/ JvmtiExport::has_frame_pops and JvmtiExport::continuation_yield_cleanup may safepoint\n-    ContinuationWrapper::SafepointOp so(Thread::current(), cont);\n+  if (JvmtiExport::has_frame_pops(thread)) {\n+    int num_frames = num_java_frames(cont);\n@@ -1634,4 +1632,2 @@\n-    if (JvmtiExport::has_frame_pops(thread)) {\n-      int num_frames = num_java_frames(cont);\n-      JvmtiExport::continuation_yield_cleanup(JavaThread::current(), num_frames);\n-    }\n+    ContinuationWrapper::SafepointOp so(Thread::current(), cont);\n+    JvmtiExport::continuation_yield_cleanup(JavaThread::current(), num_frames);\n","filename":"src\/hotspot\/share\/runtime\/continuationFreezeThaw.cpp","additions":4,"deletions":8,"binary":false,"changes":12,"status":"modified"}]}