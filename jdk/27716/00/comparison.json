{"files":[{"patch":"@@ -45,0 +45,1 @@\n+#include \"prims\/jvmtiExport.hpp\"\n@@ -1629,3 +1630,2 @@\n-  if (JvmtiExport::has_frame_pops(thread)) {\n-    int num_frames = num_java_frames(cont);\n-\n+  if (JvmtiExport::can_post_frame_pop()) {\n+    \/\/ JvmtiExport::has_frame_pops and JvmtiExport::continuation_yield_cleanup may safepoint\n@@ -1633,1 +1633,5 @@\n-    JvmtiExport::continuation_yield_cleanup(JavaThread::current(), num_frames);\n+\n+    if (JvmtiExport::has_frame_pops(thread)) {\n+      int num_frames = num_java_frames(cont);\n+      JvmtiExport::continuation_yield_cleanup(JavaThread::current(), num_frames);\n+    }\n","filename":"src\/hotspot\/share\/runtime\/continuationFreezeThaw.cpp","additions":8,"deletions":4,"binary":false,"changes":12,"status":"modified"}]}