{"files":[{"patch":"@@ -313,0 +313,2 @@\n+  \/* Manufactory JEDEC id encoded, ISA vol 2 3.1.2.. *\/                                        \\\n+  decl(mvendorid         ,  RV_NO_FLAG_BIT,  false,  NO_UPDATE_DEFAULT)                        \\\n@@ -319,2 +321,0 @@\n-  \/* Manufactory JEDEC id encoded, ISA vol 2 3.1.2.. *\/                                        \\\n-  decl(mvendorid         ,  RV_NO_FLAG_BIT,  false,  NO_UPDATE_DEFAULT)                        \\\n","filename":"src\/hotspot\/cpu\/riscv\/vm_version_riscv.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -170,9 +170,2 @@\n-  if (is_valid(RISCV_HWPROBE_KEY_MVENDORID)) {\n-    VM_Version::mvendorid.enable_feature(query[RISCV_HWPROBE_KEY_MVENDORID].value);\n-  }\n-  if (is_valid(RISCV_HWPROBE_KEY_MARCHID)) {\n-    VM_Version::marchid.enable_feature(query[RISCV_HWPROBE_KEY_MARCHID].value);\n-  }\n-  if (is_valid(RISCV_HWPROBE_KEY_MIMPID)) {\n-    VM_Version::mimpid.enable_feature(query[RISCV_HWPROBE_KEY_MIMPID].value);\n-  }\n+  \/\/ ====== extensions ======\n+  \/\/\n@@ -180,0 +173,1 @@\n+    VM_Version::ext_a.enable_feature();\n@@ -182,5 +176,0 @@\n-    VM_Version::ext_a.enable_feature();\n-  }\n-  if (is_set(RISCV_HWPROBE_KEY_IMA_EXT_0, RISCV_HWPROBE_IMA_FD)) {\n-    VM_Version::ext_f.enable_feature();\n-    VM_Version::ext_d.enable_feature();\n@@ -191,0 +180,4 @@\n+  if (is_set(RISCV_HWPROBE_KEY_IMA_EXT_0, RISCV_HWPROBE_IMA_FD)) {\n+    VM_Version::ext_d.enable_feature();\n+    VM_Version::ext_f.enable_feature();\n+  }\n@@ -205,0 +198,6 @@\n+\n+#ifndef PRODUCT\n+  if (is_set(RISCV_HWPROBE_KEY_IMA_EXT_0, RISCV_HWPROBE_EXT_ZACAS)) {\n+    VM_Version::ext_Zacas.enable_feature();\n+  }\n+#endif\n@@ -211,0 +210,5 @@\n+#ifndef PRODUCT\n+  if (is_set(RISCV_HWPROBE_KEY_IMA_EXT_0, RISCV_HWPROBE_EXT_ZBKB)) {\n+    VM_Version::ext_Zbkb.enable_feature();\n+  }\n+#endif\n@@ -215,5 +219,2 @@\n-  if (is_set(RISCV_HWPROBE_KEY_IMA_EXT_0, RISCV_HWPROBE_EXT_ZICBOZ)) {\n-    VM_Version::ext_Zicboz.enable_feature();\n-  }\n-  if (is_set(RISCV_HWPROBE_KEY_IMA_EXT_0, RISCV_HWPROBE_EXT_ZBKB)) {\n-    VM_Version::ext_Zbkb.enable_feature();\n+  if (is_set(RISCV_HWPROBE_KEY_IMA_EXT_0, RISCV_HWPROBE_EXT_ZFA)) {\n+    VM_Version::ext_Zfa.enable_feature();\n@@ -229,0 +230,12 @@\n+  if (is_set(RISCV_HWPROBE_KEY_IMA_EXT_0, RISCV_HWPROBE_EXT_ZICBOZ)) {\n+    VM_Version::ext_Zicboz.enable_feature();\n+  }\n+  \/\/ Currently tests shows that cmove using Zicond instructions will bring\n+  \/\/ performance regression, but to get a test coverage all the time, will\n+  \/\/ still prefer to enabling it in debug version.\n+  if (is_set(RISCV_HWPROBE_KEY_IMA_EXT_0, RISCV_HWPROBE_EXT_ZICOND)) {\n+    VM_Version::ext_Zicond.enable_feature();\n+  }\n+  if (is_set(RISCV_HWPROBE_KEY_IMA_EXT_0, RISCV_HWPROBE_EXT_ZTSO)) {\n+    VM_Version::ext_Ztso.enable_feature();\n+  }\n@@ -232,2 +245,0 @@\n-#endif\n-#ifndef PRODUCT\n@@ -238,0 +249,3 @@\n+  if (is_set(RISCV_HWPROBE_KEY_IMA_EXT_0, RISCV_HWPROBE_EXT_ZVFH)) {\n+    VM_Version::ext_Zvfh.enable_feature();\n+  }\n@@ -246,11 +260,5 @@\n-  if (is_set(RISCV_HWPROBE_KEY_IMA_EXT_0, RISCV_HWPROBE_EXT_ZVFH)) {\n-    VM_Version::ext_Zvfh.enable_feature();\n-  }\n-#ifndef PRODUCT\n-  if (is_set(RISCV_HWPROBE_KEY_IMA_EXT_0, RISCV_HWPROBE_EXT_ZFA)) {\n-    VM_Version::ext_Zfa.enable_feature();\n-  }\n-#endif\n-#ifndef PRODUCT\n-  if (is_set(RISCV_HWPROBE_KEY_IMA_EXT_0, RISCV_HWPROBE_EXT_ZTSO)) {\n-    VM_Version::ext_Ztso.enable_feature();\n+\n+  \/\/ ====== non-extensions ======\n+  \/\/\n+  if (is_valid(RISCV_HWPROBE_KEY_MARCHID)) {\n+    VM_Version::marchid.enable_feature(query[RISCV_HWPROBE_KEY_MARCHID].value);\n@@ -258,4 +266,2 @@\n-#endif\n-#ifndef PRODUCT\n-  if (is_set(RISCV_HWPROBE_KEY_IMA_EXT_0, RISCV_HWPROBE_EXT_ZACAS)) {\n-    VM_Version::ext_Zacas.enable_feature();\n+  if (is_valid(RISCV_HWPROBE_KEY_MIMPID)) {\n+    VM_Version::mimpid.enable_feature(query[RISCV_HWPROBE_KEY_MIMPID].value);\n@@ -263,5 +269,2 @@\n-  \/\/ Currently tests shows that cmove using Zicond instructions will bring\n-  \/\/ performance regression, but to get a test coverage all the time, will\n-  \/\/ still prefer to enabling it in debug version.\n-  if (is_set(RISCV_HWPROBE_KEY_IMA_EXT_0, RISCV_HWPROBE_EXT_ZICOND)) {\n-    VM_Version::ext_Zicond.enable_feature();\n+  if (is_valid(RISCV_HWPROBE_KEY_MVENDORID)) {\n+    VM_Version::mvendorid.enable_feature(query[RISCV_HWPROBE_KEY_MVENDORID].value);\n@@ -269,1 +272,0 @@\n-#endif\n@@ -280,1 +282,0 @@\n-\n","filename":"src\/hotspot\/os_cpu\/linux_riscv\/riscv_hwprobe.cpp","additions":44,"deletions":43,"binary":false,"changes":87,"status":"modified"}]}