{"files":[{"patch":"@@ -159,0 +159,5 @@\n+  \/\/ normally when the two ids are equal the entry span is 1 but we\n+  \/\/ have a special case when the base and max are both NO_STUBID in\n+  \/\/ which case the entry count is 0. n.b. that only happens in the\n+  \/\/ case where a stub group is empty e.g. when either C1 or C2 is\n+  \/\/ omitted from the build\n@@ -161,1 +166,4 @@\n-  assert(idx2 >= 0 && idx2 >= idx1, \"bad stub ids first %d and second %d\", idx1, idx2);\n+  assert((idx1 < 0 && idx2  < 0) || (idx1 >= 0 && idx2 >= idx1), \"bad stub ids first %d and second %d\", idx1, idx2);\n+  if (idx1 < 0) {\n+    return 0;\n+  }\n@@ -167,0 +175,5 @@\n+  \/\/ normally when the two ids are equal the entry span is 1 but we\n+  \/\/ have a special case when the base and max are both NO_BLOBID in\n+  \/\/ which case the entry count is 0. n.b. that only happens in the\n+  \/\/ case where a stub group is empty e.g. when either C1 or C2 is\n+  \/\/ omitted from the build\n@@ -169,1 +182,4 @@\n-  assert(idx2 >= 0 && idx2 >= idx1, \"bad blob ids first %d and second %d\", idx1, idx2);\n+  assert((idx1 < 0 && idx2  < 0) || (idx1 >= 0 && idx2 >= idx1), \"bad blob ids first %d and second %d\", idx1, idx2);\n+  if (idx1 < 0) {\n+    return 0;\n+  }\n@@ -780,3 +796,10 @@\n-      ls.print_cr(\"  blobs: %s(%d)\",\n-                  blob_details(g._base)._name,\n-                  static_cast<int>(g._base));\n+      \/\/ some groups don't have a blob\n+      if (g._base == BlobId::NO_BLOBID) {\n+        ls.print_cr(\"  blobs: %s(%d)\",\n+                    \"no_blobs\",\n+                    static_cast<int>(g._base));\n+      } else {\n+        ls.print_cr(\"  blobs: %s(%d)\",\n+                    blob_details(g._base)._name,\n+                    static_cast<int>(g._base));\n+      }\n@@ -799,3 +822,10 @@\n-      ls.print_cr(\"  stubs: %s(%d)\",\n-                  stub_details(b._base)._name,\n-                  static_cast<int>(b._base));\n+      \/\/ some blobs don't have a stub\n+      if (b._base == StubId::NO_STUBID) {\n+        ls.print_cr(\"  stubs: %s(%d)\",\n+                    \"no_stubs\",\n+                    static_cast<int>(b._base));\n+      } else {\n+        ls.print_cr(\"  stubs: %s(%d)\",\n+                    stub_details(b._base)._name,\n+                    static_cast<int>(b._base));\n+      }\n@@ -908,2 +938,2 @@\n-  \/\/ delegate\n-  return stub_base(blob_base(stub_group));\n+  BlobId base = blob_base(stub_group);\n+  return (base == BlobId::NO_BLOBID ? StubId::NO_STUBID : stub_base(base));\n@@ -913,2 +943,2 @@\n-  \/\/ delegate\n-  return stub_max(blob_max(stub_group));\n+  BlobId base = blob_max(stub_group);\n+  return (base == BlobId::NO_BLOBID ? StubId::NO_STUBID : stub_max(base));\n","filename":"src\/hotspot\/share\/runtime\/stubInfo.cpp","additions":42,"deletions":12,"binary":false,"changes":54,"status":"modified"}]}