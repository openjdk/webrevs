{"files":[{"patch":"@@ -1478,0 +1478,1 @@\n+    ShouldNotReachHere();\n@@ -1482,1 +1483,1 @@\n-  const Register pow31_1_2 = tmp5;\n+  const Register pow31_2   = tmp5;\n@@ -1487,1 +1488,1 @@\n-  \/\/ result has already been zeroed earlier\n+  \/\/ result has a value initially\n@@ -1491,2 +1492,2 @@\n-  ld(pow31_1_2, ExternalAddress(StubRoutines::riscv::arrays_hashcode_powers_of_31()\n-                                + 2 * sizeof(jint))); \/\/ [31^^1][31^^2]\n+  lw(pow31_2, ExternalAddress(StubRoutines::riscv::arrays_hashcode_powers_of_31()\n+                              + 2 * sizeof(jint))); \/\/ [31^^2]\n@@ -1512,2 +1513,0 @@\n-  DO_ELEMENT_LOAD(tmp1, 0)\n-  DO_ELEMENT_LOAD(tmp3, 1)\n@@ -1515,0 +1514,1 @@\n+  DO_ELEMENT_LOAD(tmp1, 0);\n@@ -1518,1 +1518,2 @@\n-  mulw(tmp3, tmp3, pow31_1_2);     \/\/ 31^^2 * ary[i+1]\n+  DO_ELEMENT_LOAD(tmp3, 1);\n+  mulw(tmp3, tmp3, pow31_2);       \/\/ 31^^2 * ary[i+1]\n@@ -1520,4 +1521,3 @@\n-  DO_ELEMENT_LOAD(tmp1, 2)\n-  DO_ELEMENT_LOAD(tmp3, 3)\n-  srli(tmp2, pow31_1_2, 32);\n-  mulw(tmp1, tmp1, tmp2);          \/\/ 31^^1 * ary[i+2]\n+  DO_ELEMENT_LOAD(tmp1, 2);\n+  slli(tmp2, tmp1, 5);             \/\/ optimize 31^^1 * ary[i+2]\n+  subw(tmp1, tmp2, tmp1);          \/\/ with ary[i+2]<<5 - ary[i+2]\n@@ -1525,0 +1525,1 @@\n+  DO_ELEMENT_LOAD(tmp3, 3);\n@@ -1536,3 +1537,3 @@\n-  slli(tmp2, result, 5);\n-  subw(result, tmp2, result);\n-  addw(result, result, tmp1); \/\/ result = result + ary[i]\n+  slli(tmp2, result, 5);           \/\/ optimize 31 * result\n+  subw(result, tmp2, result);      \/\/ with result<<5 - result\n+  addw(result, result, tmp1);\n","filename":"src\/hotspot\/cpu\/riscv\/c2_MacroAssembler_riscv.cpp","additions":15,"deletions":14,"binary":false,"changes":29,"status":"modified"}]}