{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -70,1 +70,0 @@\n-#include \"runtime\/atomicAccess.hpp\"\n@@ -151,1 +150,1 @@\n-  if (_size >= _max_capacity) {\n+  if (_size.load_relaxed() >= _max_capacity) {\n@@ -155,1 +154,1 @@\n-  size_t cur_idx = AtomicAccess::fetch_then_add(&_size, 1u);\n+  size_t cur_idx = _size.fetch_then_add(1u);\n@@ -162,1 +161,1 @@\n-  if (AtomicAccess::load_acquire(&_buckets[bucket]) == nullptr) {\n+  if (_buckets[bucket].load_acquire() == nullptr) {\n@@ -169,1 +168,1 @@\n-    if (AtomicAccess::load_acquire(&_buckets[bucket]) == nullptr) {\n+    if (_buckets[bucket].load_acquire() == nullptr) {\n@@ -178,1 +177,1 @@\n-  TaskQueueEntryChunk* result = ::new (&_buckets[bucket][bucket_idx]) TaskQueueEntryChunk;\n+  TaskQueueEntryChunk* result = ::new (&_buckets[bucket].load_relaxed()[bucket_idx]) TaskQueueEntryChunk;\n@@ -200,1 +199,1 @@\n-  _buckets = NEW_C_HEAP_ARRAY(TaskQueueEntryChunk*, _num_buckets, mtGC);\n+  _buckets = NEW_C_HEAP_ARRAY(Atomic<TaskQueueEntryChunk*>, _num_buckets, mtGC);\n@@ -203,1 +202,1 @@\n-    _buckets[i] = nullptr;\n+    _buckets[i].store_relaxed(nullptr);\n@@ -243,3 +242,3 @@\n-    if (_buckets[i] != nullptr) {\n-      MmapArrayAllocator<TaskQueueEntryChunk>::free(_buckets[i],  bucket_size(i));\n-      _buckets[i] = nullptr;\n+    if (_buckets[i].load_relaxed() != nullptr) {\n+      MmapArrayAllocator<TaskQueueEntryChunk>::free(_buckets[i].load_relaxed(),  bucket_size(i));\n+      _buckets[i].store_relaxed(nullptr);\n@@ -262,1 +261,1 @@\n-    if (AtomicAccess::load_acquire(&_buckets[i]) != nullptr) {\n+    if (_buckets[i].load_acquire() != nullptr) {\n@@ -282,1 +281,1 @@\n-    AtomicAccess::release_store(&_buckets[i], bucket_base);\n+    _buckets[i].release_store(bucket_base);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1ConcurrentMark.cpp","additions":13,"deletions":14,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -40,0 +40,1 @@\n+#include \"runtime\/atomic.hpp\"\n@@ -175,1 +176,1 @@\n-    TaskQueueEntryChunk* volatile* _buckets;\n+    Atomic<TaskQueueEntryChunk*>* _buckets;\n@@ -177,1 +178,1 @@\n-    volatile size_t _size;\n+    Atomic<size_t> _size;\n@@ -215,1 +216,1 @@\n-      _size = 0;\n+      _size.store_relaxed(0);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1ConcurrentMark.hpp","additions":5,"deletions":4,"binary":false,"changes":9,"status":"modified"}]}