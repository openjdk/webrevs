{"files":[{"patch":"@@ -207,2 +207,5 @@\n-         get_live_data_bytes(), used_before_promote);\n-  size_t result = used_before_promote - get_live_data_bytes();\n+         get_marked_data_bytes(), used_before_promote);\n+  ShenandoahMarkingContext *ctx = ShenandoahHeap::heap()->complete_marking_context();\n+  HeapWord* tams = ctx->top_at_mark_start(this);\n+  size_t bytes_allocated_during_mark = pointer_delta(get_top_before_promote(), tams) * HeapWordSize;\n+  size_t result = used_before_promote - (get_marked_data_bytes() + bytes_allocated_during_mark);\n@@ -210,1 +213,0 @@\n-\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahHeapRegion.inline.hpp","additions":5,"deletions":3,"binary":false,"changes":8,"status":"modified"}]}