{"files":[{"patch":"@@ -41,3 +41,0 @@\n-import java.security.AccessControlContext;\n-import java.security.AccessController;\n-import java.security.PrivilegedAction;\n@@ -65,2 +62,0 @@\n-    @SuppressWarnings(\"removal\")\n-    private final AccessControlContext acc = AccessController.getContext();\n@@ -370,1 +365,0 @@\n-    @SuppressWarnings(\"removal\")\n@@ -372,2 +366,2 @@\n-        if ((this.acc == null) && (null != System.getSecurityManager())) {\n-            throw new SecurityException(\"AccessControlContext is not set\");\n+        try {\n+            SAXParserFactory.newInstance().newSAXParser().parse(input, DocumentHandler.this);\n@@ -375,17 +369,7 @@\n-        AccessControlContext stack = AccessController.getContext();\n-        SharedSecrets.getJavaSecurityAccess().doIntersectionPrivilege(new PrivilegedAction<Void>() {\n-            public Void run() {\n-                try {\n-                    SAXParserFactory.newInstance().newSAXParser().parse(input, DocumentHandler.this);\n-                }\n-                catch (ParserConfigurationException | IOException exception) {\n-                    handleException(exception);\n-                }\n-                catch (SAXException wrapper) {\n-                    Exception exception = wrapper.getException();\n-                    if (exception == null) {\n-                        exception = wrapper;\n-                    }\n-                    handleException(exception);\n-                }\n-                return null;\n+        catch (ParserConfigurationException | IOException exception) {\n+            handleException(exception);\n+        }\n+        catch (SAXException wrapper) {\n+            Exception exception = wrapper.getException();\n+            if (exception == null) {\n+                exception = wrapper;\n@@ -393,1 +377,2 @@\n-        }, stack, this.acc);\n+            handleException(exception);\n+        }\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/beans\/decoder\/DocumentHandler.java","additions":11,"deletions":26,"binary":false,"changes":37,"status":"modified"},{"patch":"@@ -42,2 +42,0 @@\n-import java.security.AccessControlContext;\n-import java.security.AccessController;\n@@ -115,18 +113,0 @@\n-   \/*\n-    * The event's AccessControlContext.\n-    *\/\n-    @SuppressWarnings(\"removal\")\n-    private transient volatile AccessControlContext acc =\n-        AccessController.getContext();\n-\n-   \/*\n-    * Returns the acc this event was constructed with.\n-    *\/\n-    @SuppressWarnings(\"removal\")\n-    final AccessControlContext getAccessControlContext() {\n-        if (acc == null) {\n-            throw new SecurityException(\"AWTEvent is missing AccessControlContext\");\n-        }\n-        return acc;\n-    }\n-\n@@ -284,5 +264,0 @@\n-                @SuppressWarnings(\"removal\")\n-                public AccessControlContext getAccessControlContext(AWTEvent ev) {\n-                    return ev.getAccessControlContext();\n-                }\n-\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/AWTEvent.java","additions":0,"deletions":25,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -72,2 +72,0 @@\n-import java.security.AccessControlContext;\n-import java.security.AccessController;\n@@ -504,7 +502,0 @@\n-    \/*\n-     * The component's AccessControlContext.\n-     *\/\n-    @SuppressWarnings(\"removal\")\n-    private transient volatile AccessControlContext acc =\n-        AccessController.getContext();\n-\n@@ -709,11 +700,0 @@\n-    \/*\n-     * Returns the acc this component was constructed with.\n-     *\/\n-    @SuppressWarnings(\"removal\")\n-    final AccessControlContext getAccessControlContext() {\n-        if (acc == null) {\n-            throw new SecurityException(\"Component is missing AccessControlContext\");\n-        }\n-        return acc;\n-    }\n-\n@@ -975,5 +955,0 @@\n-            @SuppressWarnings(\"removal\")\n-            public AccessControlContext getAccessControlContext(Component comp) {\n-                return comp.getAccessControlContext();\n-            }\n-\n@@ -8970,1 +8945,0 @@\n-    @SuppressWarnings(\"removal\")\n@@ -8977,2 +8951,0 @@\n-        acc = AccessController.getContext();\n-\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/Component.java","additions":0,"deletions":28,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -33,2 +33,0 @@\n-import java.security.AccessControlContext;\n-import java.security.AccessController;\n@@ -106,19 +104,0 @@\n-    \/*\n-     * The menu's AccessControlContext.\n-     *\/\n-    @SuppressWarnings(\"removal\")\n-    private transient volatile AccessControlContext acc =\n-            AccessController.getContext();\n-\n-    \/*\n-     * Returns the acc this menu component was constructed with.\n-     *\/\n-    @SuppressWarnings(\"removal\")\n-    final AccessControlContext getAccessControlContext() {\n-        if (acc == null) {\n-            throw new SecurityException(\n-                    \"MenuComponent is missing AccessControlContext\");\n-        }\n-        return acc;\n-    }\n-\n@@ -445,1 +424,0 @@\n-    @SuppressWarnings(\"removal\")\n@@ -452,2 +430,0 @@\n-        acc = AccessController.getContext();\n-\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/MenuComponent.java","additions":0,"deletions":24,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -35,2 +35,0 @@\n-import java.security.AccessControlContext;\n-import java.security.AccessController;\n@@ -105,20 +103,0 @@\n-    \/*\n-     * The tray icon's AccessControlContext.\n-     *\n-     * Unlike the acc in Component, this field is made final\n-     * because TrayIcon is not serializable.\n-     *\/\n-    @SuppressWarnings(\"removal\")\n-    private final AccessControlContext acc = AccessController.getContext();\n-\n-    \/*\n-     * Returns the acc this tray icon was constructed with.\n-     *\/\n-    @SuppressWarnings(\"removal\")\n-    final AccessControlContext getAccessControlContext() {\n-        if (acc == null) {\n-            throw new SecurityException(\"TrayIcon is missing AccessControlContext\");\n-        }\n-        return acc;\n-    }\n-\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/TrayIcon.java","additions":0,"deletions":22,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -45,10 +45,0 @@\n-import java.security.AccessController;\n-import java.security.PrivilegedAction;\n-\n-import java.security.AccessControlContext;\n-\n-import jdk.internal.access.SharedSecrets;\n-import jdk.internal.access.JavaSecurityAccess;\n-\n-import sun.awt.AWTAccessor;\n-\n@@ -1704,3 +1694,0 @@\n-        private static final JavaSecurityAccess javaSecurityAccess =\n-            SharedSecrets.getJavaSecurityAccess();\n-\n@@ -1708,30 +1695,0 @@\n-            final Object src = e.getSource();\n-\n-            final PrivilegedAction<Void> action = new PrivilegedAction<Void>() {\n-                public Void run() {\n-                    actionPerformedImpl(e);\n-                    return null;\n-                }\n-            };\n-\n-            @SuppressWarnings(\"removal\")\n-            final AccessControlContext stack = AccessController.getContext();\n-            @SuppressWarnings(\"removal\")\n-            final AccessControlContext srcAcc = AWTAccessor.getComponentAccessor().getAccessControlContext((Component)src);\n-            @SuppressWarnings(\"removal\")\n-            final AccessControlContext eventAcc = AWTAccessor.getAWTEventAccessor().getAccessControlContext(e);\n-\n-                if (srcAcc == null) {\n-                    javaSecurityAccess.doIntersectionPrivilege(action, stack, eventAcc);\n-                } else {\n-                    javaSecurityAccess.doIntersectionPrivilege(\n-                        new PrivilegedAction<Void>() {\n-                            public Void run() {\n-                                javaSecurityAccess.doIntersectionPrivilege(action, eventAcc);\n-                                return null;\n-                             }\n-                    }, stack, srcAcc);\n-                }\n-        }\n-\n-        private void actionPerformedImpl(ActionEvent e) {\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/TransferHandler.java","additions":0,"deletions":43,"binary":false,"changes":43,"status":"modified"},{"patch":"@@ -52,2 +52,0 @@\n-import java.security.AccessController;\n-import java.security.AccessControlContext;\n@@ -1065,2 +1063,0 @@\n-        @SuppressWarnings(\"removal\")\n-        private AccessControlContext acc;\n@@ -1120,1 +1116,0 @@\n-        @SuppressWarnings(\"removal\")\n@@ -1122,1 +1117,0 @@\n-            acc = AccessController.getContext();\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/UIDefaults.java","additions":0,"deletions":6,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -47,1 +47,0 @@\n-import java.security.AccessControlContext;\n@@ -247,7 +246,0 @@\n-\n-        \/*\n-         * Returns the acc this component was constructed with.\n-         *\/\n-        @SuppressWarnings(\"removal\")\n-        AccessControlContext getAccessControlContext(Component comp);\n-\n@@ -367,6 +359,0 @@\n-        \/**\n-         * Returns the acc this event was constructed with.\n-         *\/\n-        @SuppressWarnings(\"removal\")\n-        AccessControlContext getAccessControlContext(AWTEvent ev);\n-\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/AWTAccessor.java","additions":0,"deletions":14,"binary":false,"changes":14,"status":"modified"}]}