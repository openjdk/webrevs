{"files":[{"patch":"@@ -3332,0 +3332,12 @@\n+  \/\/ Wait until also outer_klass gets fully loaded.\n+  InstanceKlass* pool_holder = outer_klass->constants()->pool_holder();\n+  ClassLoaderData* loader_data = pool_holder->class_loader_data();\n+  if (loader_data == nullptr) {\n+    HandleMark hm(THREAD);\n+    Handle h_init_lock(THREAD, pool_holder->init_lock());\n+    ObjectLocker ol(h_init_lock, THREAD);\n+\n+    loader_data = pool_holder->class_loader_data();\n+    assert(loader_data != nullptr, \"class still has not been loaded\");\n+  }\n+\n","filename":"src\/hotspot\/share\/oops\/instanceKlass.cpp","additions":12,"deletions":0,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -1329,4 +1329,0 @@\n-  InstanceKlass* k = InstanceKlass::cast(klass);\n-\n-  \/\/ Ensure class is linked\n-  k->link_class(CHECK_NULL);\n@@ -1335,1 +1331,2 @@\n-  Klass* outer_klass = k->compute_enclosing_class(&inner_is_member, CHECK_NULL);\n+  Klass* outer_klass\n+    = InstanceKlass::cast(klass)->compute_enclosing_class(&inner_is_member, CHECK_NULL);\n@@ -1353,4 +1350,0 @@\n-\n-  \/\/ Ensure class is linked\n-  k->link_class(CHECK_NULL);\n-\n","filename":"src\/hotspot\/share\/prims\/jvm.cpp","additions":2,"deletions":9,"binary":false,"changes":11,"status":"modified"}]}