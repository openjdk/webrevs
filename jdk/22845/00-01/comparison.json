{"files":[{"patch":"@@ -833,0 +833,16 @@\n+  if test \"x$FLAGS_CPU\" = xriscv64; then\n+    AC_MSG_CHECKING([if RVV\/vector sigcontext supported])\n+    AC_COMPILE_IFELSE([AC_LANG_PROGRAM([#include <linux\/ptrace.h>],\n+        [\n+          return (int)sizeof(struct __riscv_v_ext_state);\n+        ])],\n+        [\n+          AC_MSG_RESULT([yes])\n+        ],\n+        [\n+          $1_DEFINES_CPU_JVM=\"${$1_DEFINES_CPU_JVM} -DNO_RVV_SIGCONTEXT\"\n+          AC_MSG_RESULT([no])\n+        ]\n+    )\n+  fi\n+\n@@ -919,18 +935,0 @@\n-\n-  if test \"x$OPENJDK_TARGET_CPU\" = \"xriscv64\"; then\n-    AC_MSG_CHECKING([if RVV\/vector sigcontext supported])\n-    AC_COMPILE_IFELSE([AC_LANG_PROGRAM([#include <linux\/ptrace.h>],\n-        [\n-          return (int)sizeof(struct __riscv_v_ext_state);\n-        ])],\n-        [\n-          AC_MSG_RESULT([yes])\n-          $2RVV_CFLAGS=\"\"\n-        ],\n-        [\n-          AC_MSG_RESULT([no])\n-          $2RVV_CFLAGS=\"-DNO_RVV_SIGCONTEXT\"\n-        ]\n-    )\n-  fi\n-  AC_SUBST($2RVV_CFLAGS)\n","filename":"make\/autoconf\/flags-cflags.m4","additions":16,"deletions":18,"binary":false,"changes":34,"status":"modified"},{"patch":"@@ -834,3 +834,0 @@\n-# Riscv RVV\n-RVV_CFLAGS := @RVV_CFLAGS@\n-\n","filename":"make\/autoconf\/spec.gmk.template","additions":0,"deletions":3,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -138,4 +138,0 @@\n-ifeq ($(call isTargetCpu, riscv64), true)\n-  JVM_CFLAGS += $(RVV_CFLAGS)\n-endif\n-\n","filename":"make\/hotspot\/lib\/CompileJvm.gmk","additions":0,"deletions":4,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -364,2 +364,2 @@\n-    st->print_cr(\"Vector state: JVM compiled without vector sigcontext support\");\n-#else\n+  st->print_cr(\"Vector state: JVM compiled without vector sigcontext support\");\n+#else \/\/ ifndef NO_RVV_SIGCONTEXT\n@@ -383,0 +383,1 @@\n+  \/\/ The size passed to user-space is calculated accordingly:\n@@ -420,1 +421,1 @@\n-#endif\n+#endif \/\/ #ifndef NO_RVV_SIGCONTEXT\n","filename":"src\/hotspot\/os_cpu\/linux_riscv\/os_linux_riscv.cpp","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"}]}