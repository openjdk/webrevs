{"files":[{"patch":"@@ -88,1 +88,1 @@\n-    @IR(applyIf = {\"SuperWordReductions\", \"false\"},\n+    @IR(applyIfOr = {\"SuperWordReductions\", \"false\", \"LoopMaxUnroll\", \"< 8\"},\n@@ -98,1 +98,1 @@\n-    @IR(applyIf = {\"SuperWordReductions\", \"false\"},\n+    @IR(applyIfOr = {\"SuperWordReductions\", \"false\", \"LoopMaxUnroll\", \"< 8\"},\n","filename":"test\/hotspot\/jtreg\/compiler\/loopopts\/superword\/ProdRed_Double.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -84,1 +84,1 @@\n-    @IR(applyIf = {\"SuperWordReductions\", \"false\"},\n+    @IR(applyIfOr = {\"SuperWordReductions\", \"false\", \"LoopMaxUnroll\", \"< 8\"},\n","filename":"test\/hotspot\/jtreg\/compiler\/loopopts\/superword\/ProdRed_Float.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -83,1 +83,1 @@\n-    @IR(applyIf = {\"SuperWordReductions\", \"false\"},\n+    @IR(applyIfOr = {\"SuperWordReductions\", \"false\", \"LoopMaxUnroll\", \"< 8\"},\n","filename":"test\/hotspot\/jtreg\/compiler\/loopopts\/superword\/ProdRed_Int.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -145,1 +145,1 @@\n-    @IR(applyIf = {\"SuperWordReductions\", \"false\"},\n+    @IR(applyIfOr = {\"SuperWordReductions\", \"false\", \"LoopMaxUnroll\", \"< 8\"},\n@@ -164,1 +164,1 @@\n-    @IR(applyIf = {\"SuperWordReductions\", \"false\"},\n+    @IR(applyIfOr = {\"SuperWordReductions\", \"false\", \"LoopMaxUnroll\", \"< 8\"},\n@@ -183,1 +183,1 @@\n-    @IR(applyIf = {\"SuperWordReductions\", \"false\"},\n+    @IR(applyIfOr = {\"SuperWordReductions\", \"false\", \"LoopMaxUnroll\", \"< 8\"},\n@@ -202,1 +202,1 @@\n-    @IR(applyIf = {\"SuperWordReductions\", \"false\"},\n+    @IR(applyIfOr = {\"SuperWordReductions\", \"false\", \"LoopMaxUnroll\", \"< 8\"},\n@@ -221,1 +221,1 @@\n-    @IR(applyIf = {\"SuperWordReductions\", \"false\"},\n+    @IR(applyIfOr = {\"SuperWordReductions\", \"false\", \"LoopMaxUnroll\", \"< 8\"},\n","filename":"test\/hotspot\/jtreg\/compiler\/loopopts\/superword\/RedTest_int.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -145,0 +145,2 @@\n+    \/* Require avx2 due to filtering out small vector lengths\n+       for long and int (SuperWord::implemented). *\/\n@@ -146,1 +148,4 @@\n-    @IR(applyIf = {\"SuperWordReductions\", \"false\"},\n+    @IR(applyIfOr = {\"SuperWordReductions\", \"false\", \"LoopMaxUnroll\", \"< 8\"},\n+        failOn = {IRNode.ADD_REDUCTION_VL})\n+    @IR(applyIfCPUFeature = {\"avx2\", \"false\"},\n+        applyIfAnd = {\"SuperWordReductions\", \"true\", \"LoopMaxUnroll\", \">= 8\"},\n@@ -165,1 +170,4 @@\n-    @IR(applyIf = {\"SuperWordReductions\", \"false\"},\n+    @IR(applyIfOr = {\"SuperWordReductions\", \"false\", \"LoopMaxUnroll\", \"< 8\"},\n+        failOn = {IRNode.OR_REDUCTION_V})\n+    @IR(applyIfCPUFeature = {\"avx2\", \"false\"},\n+        applyIfAnd = {\"SuperWordReductions\", \"true\", \"LoopMaxUnroll\", \">= 8\"},\n@@ -184,1 +192,4 @@\n-    @IR(applyIf = {\"SuperWordReductions\", \"false\"},\n+    @IR(applyIfOr = {\"SuperWordReductions\", \"false\", \"LoopMaxUnroll\", \"< 8\"},\n+        failOn = {IRNode.AND_REDUCTION_V})\n+    @IR(applyIfCPUFeature = {\"avx2\", \"false\"},\n+        applyIfAnd = {\"SuperWordReductions\", \"true\", \"LoopMaxUnroll\", \">= 8\"},\n@@ -203,1 +214,4 @@\n-    @IR(applyIf = {\"SuperWordReductions\", \"false\"},\n+    @IR(applyIfOr = {\"SuperWordReductions\", \"false\", \"LoopMaxUnroll\", \"< 8\"},\n+        failOn = {IRNode.XOR_REDUCTION_V})\n+    @IR(applyIfCPUFeature = {\"avx2\", \"false\"},\n+        applyIfAnd = {\"SuperWordReductions\", \"true\", \"LoopMaxUnroll\", \">= 8\"},\n@@ -222,1 +236,4 @@\n-    @IR(applyIf = {\"SuperWordReductions\", \"false\"},\n+    @IR(applyIfOr = {\"SuperWordReductions\", \"false\", \"LoopMaxUnroll\", \"< 8\"},\n+        failOn = {IRNode.MUL_REDUCTION_VL})\n+    @IR(applyIfCPUFeature = {\"avx512dq\", \"false\"},\n+        applyIfAnd = {\"SuperWordReductions\", \"true\", \"LoopMaxUnroll\", \">= 8\"},\n","filename":"test\/hotspot\/jtreg\/compiler\/loopopts\/superword\/RedTest_long.java","additions":22,"deletions":5,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -96,2 +96,2 @@\n-    @IR(applyIf = {\"SuperWordReductions\", \"false\"},\n-        failOn = {IRNode.ADD_REDUCTION_VD})\n+    @IR(applyIfOr = {\"SuperWordReductions\", \"false\", \"LoopMaxUnroll\", \"< 8\"},\n+        failOn = {IRNode.ADD_REDUCTION_VD, IRNode.ABS_V, IRNode.NEG_V})\n","filename":"test\/hotspot\/jtreg\/compiler\/loopopts\/superword\/SumRedAbsNeg_Double.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -93,2 +93,2 @@\n-    @IR(applyIf = {\"SuperWordReductions\", \"false\"},\n-        failOn = {IRNode.ADD_REDUCTION_VF})\n+    @IR(applyIfOr = {\"SuperWordReductions\", \"false\", \"LoopMaxUnroll\", \"< 8\"},\n+        failOn = {IRNode.ADD_REDUCTION_VF, IRNode.ABS_V, IRNode.NEG_V})\n","filename":"test\/hotspot\/jtreg\/compiler\/loopopts\/superword\/SumRedAbsNeg_Float.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -91,0 +91,1 @@\n+    \/\/ Require avx for SQRT_VD\n@@ -92,2 +93,5 @@\n-    @IR(applyIf = {\"SuperWordReductions\", \"false\"},\n-        failOn = {IRNode.ADD_REDUCTION_VD})\n+    @IR(applyIfOr = {\"SuperWordReductions\", \"false\", \"LoopMaxUnroll\", \"< 8\"},\n+        failOn = {IRNode.ADD_REDUCTION_VD, IRNode.SQRT_V})\n+    @IR(applyIfCPUFeature = {\"avx\", \"false\"},\n+        applyIfAnd = {\"SuperWordReductions\", \"true\", \"LoopMaxUnroll\", \">= 8\"},\n+        failOn = {IRNode.ADD_REDUCTION_VD, IRNode.SQRT_V})\n@@ -96,1 +100,1 @@\n-        counts = {IRNode.ADD_REDUCTION_VD, \">= 1\"})\n+        counts = {IRNode.ADD_REDUCTION_VD, \">= 1\", IRNode.SQRT_V, \">= 1\"})\n","filename":"test\/hotspot\/jtreg\/compiler\/loopopts\/superword\/SumRedSqrt_Double.java","additions":7,"deletions":3,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -91,1 +91,1 @@\n-    @IR(applyIf = {\"SuperWordReductions\", \"false\"},\n+    @IR(applyIfOr = {\"SuperWordReductions\", \"false\", \"LoopMaxUnroll\", \"< 8\"},\n","filename":"test\/hotspot\/jtreg\/compiler\/loopopts\/superword\/SumRed_Double.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -91,1 +91,1 @@\n-    @IR(applyIf = {\"SuperWordReductions\", \"false\"},\n+    @IR(applyIfOr = {\"SuperWordReductions\", \"false\", \"LoopMaxUnroll\", \"< 8\"},\n","filename":"test\/hotspot\/jtreg\/compiler\/loopopts\/superword\/SumRed_Float.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -91,1 +91,1 @@\n-    @IR(applyIf = {\"SuperWordReductions\", \"false\"},\n+    @IR(applyIfOr = {\"SuperWordReductions\", \"false\", \"LoopMaxUnroll\", \"< 8\"},\n","filename":"test\/hotspot\/jtreg\/compiler\/loopopts\/superword\/SumRed_Int.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -96,1 +96,1 @@\n-    @IR(applyIf = {\"SuperWordReductions\", \"false\"},\n+    @IR(applyIfOr = {\"SuperWordReductions\", \"false\", \"LoopMaxUnroll\", \"< 8\"},\n@@ -100,1 +100,1 @@\n-        counts = {IRNode.ADD_REDUCTION_VL, \"= 0\"})\n+        failOn = {IRNode.ADD_REDUCTION_VL})\n","filename":"test\/hotspot\/jtreg\/compiler\/loopopts\/superword\/SumRed_Long.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}