{"files":[{"patch":"@@ -2964,4 +2964,5 @@\n-  const size_t cur_occupancy =  (old_regions_count() + humongous_regions_count()) * G1HeapRegion::GrainBytes;\n-  \/\/ For humongous allocations, consider that allocation in the result as well -\n-  \/\/ it will be allocated as such. Otherwise G1 will allocate the object in young\n-  \/\/ gen. In that case, do not account here.\n+  \/\/ For simplicity, just count whole regions.\n+  const size_t cur_occupancy = (old_regions_count() + humongous_regions_count()) * G1HeapRegion::GrainBytes;\n+  \/\/ Humongous allocations will always be assigned to non-young heap, so consider\n+  \/\/ that allocation in the result as well. Otherwise the allocation will always\n+  \/\/ be in young gen, so there is no need to account it here.\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CollectedHeap.cpp","additions":5,"deletions":4,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -1035,0 +1035,3 @@\n+  \/\/ Returns how much memory there is assigned to non-young heap that can not be\n+  \/\/ allocated into any more without garbage collection after a hypothetical\n+  \/\/ allocation of allocation_word_size.\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CollectedHeap.hpp","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"}]}