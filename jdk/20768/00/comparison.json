{"files":[{"patch":"@@ -578,1 +578,1 @@\n-  cpu_count = os::Linux::active_processor_count();\n+  cpu_count = os::active_physical_processor_count();\n","filename":"src\/hotspot\/os\/linux\/cgroupSubsystem_linux.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -87,1 +87,1 @@\n-                                     os::Linux::active_processor_count() != cgroup_subsystem->active_processor_count();\n+                                     os::active_physical_processor_count() != cgroup_subsystem->active_processor_count();\n","filename":"src\/hotspot\/os\/linux\/osContainer_linux.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -4832,1 +4832,3 @@\n-int os::Linux::active_processor_count() {\n+\/\/ Return the active CPUs irrespective of the system being containerized\n+\/\/ or not. Thus, this returns the host active cpus in a container.\n+int os::pd_active_physical_processor_count() {\n@@ -4864,1 +4866,1 @@\n-    active_cpus = os::Linux::active_processor_count();\n+    active_cpus = os::pd_active_physical_processor_count();\n","filename":"src\/hotspot\/os\/linux\/os_linux.cpp","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -33,1 +33,0 @@\n-  friend class CgroupSubsystem;\n@@ -35,1 +34,0 @@\n-  friend class OSContainer;\n@@ -61,1 +59,0 @@\n-  static int active_processor_count();\n@@ -259,0 +256,1 @@\n+  static int active_processor_count();\n","filename":"src\/hotspot\/os\/linux\/os_linux.hpp","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1863,0 +1863,8 @@\n+int os::active_physical_processor_count() {\n+#ifdef LINUX\n+  return os::pd_active_physical_processor_count();\n+#else\n+  return os::active_processor_count();\n+#endif\n+}\n+\n","filename":"src\/hotspot\/share\/runtime\/os.cpp","additions":8,"deletions":0,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -257,0 +257,1 @@\n+  LINUX_ONLY(static int pd_active_physical_processor_count();)\n@@ -371,0 +372,6 @@\n+  \/\/ Returns the number of active CPUs of the physical system. It is\n+  \/\/ the same as active_processor_count() except on Linux where this\n+  \/\/ function also returns the physical CPUs instead of the containerized\n+  \/\/ value.\n+  static int active_physical_processor_count();\n+\n","filename":"src\/hotspot\/share\/runtime\/os.hpp","additions":7,"deletions":0,"binary":false,"changes":7,"status":"modified"}]}