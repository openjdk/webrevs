{"files":[{"patch":"@@ -77,2 +77,25 @@\n-\/\/ Visual Studio => error C2370: '...': redefinition; different storage class\n-#ifndef TARGET_COMPILER_visCPP\n+\/\/ The syntax for redeclaring these for deprecation is tricky, and not\n+\/\/ supported by some versions of some compilers.  Dispatch on compiler and\n+\/\/ version to decide whether to redeclare deprecated.\n+\n+#if defined(__clang__)\n+#if __clang_major__ >= 19\n+\/\/ clang18 and earlier may accept the declaration but go wrong with uses.\n+\/\/ Different warnings and link-time failures are both possible.\n+#define CAN_DEPRECATE_HARDWARE_INTERFERENCE_SIZES 1\n+#endif \/\/ restrict clang version\n+\n+#elif defined(__GNUC__)\n+#if (__GNUC__ > 13) || (__GNUC__ == 13 && __GNUC_MINOR__ >= 2)\n+\/\/ g++11.5 accepts the declaration and reports deprecation for uses, but also\n+\/\/ has link-time failure for uses. Haven't tested intermediate versions.\n+#define CAN_DEPRECATE_HARDWARE_INTERFERENCE_SIZES 1\n+#endif \/\/ restrict gcc version\n+\n+#elif defined(_MSVC)\n+\/\/ VS2022-17.13.2 => error C2370: '...': redefinition; different storage class\n+\n+#endif \/\/ Compiler dispatch\n+\n+\/\/ Redeclare deprecated if such is supported.\n+#ifdef CAN_DEPRECATE_HARDWARE_INTERFERENCE_SIZES\n@@ -81,1 +104,2 @@\n-#endif \/\/ not TARGET_COMPILER_visCPP\n+#undef CAN_DEPRECATE_HARDWARE_INTERFERENCE_SIZES\n+#endif \/\/ CAN_DEPRECATE_HARDWARE_INTERFERENCE_SIZES\n","filename":"src\/hotspot\/share\/cppstdlib\/new.hpp","additions":27,"deletions":3,"binary":false,"changes":30,"status":"modified"}]}