{"files":[{"patch":"@@ -184,1 +184,1 @@\n-  Chunk* c = _head;\n+  Chunk* c = Atomic::load_acquire(&_head);\n@@ -193,1 +193,3 @@\n-  if (_head == nullptr || _head->_size == Chunk::CAPACITY) {\n+  juint size = 0;\n+  if (_head == nullptr || (size = Atomic::load(&_head->_size)) == Chunk::CAPACITY) {\n+    size = 0;\n@@ -197,1 +199,1 @@\n-  oop* handle = &_head->_data[_head->_size];\n+  oop* handle = &_head->_data[size];\n@@ -199,1 +201,1 @@\n-  Atomic::release_store(&_head->_size, _head->_size + 1);\n+  Atomic::release_store(&_head->_size, size + 1);\n@@ -205,1 +207,1 @@\n-  Chunk* chunk = _head;\n+  Chunk* chunk = Atomic::load_acquire(&_head);\n@@ -207,1 +209,1 @@\n-    count += chunk->_size;\n+    count += Atomic::load(&chunk->_size);\n@@ -225,1 +227,1 @@\n-      oops_do_chunk(f, c, c->_size);\n+      oops_do_chunk(f, c, Atomic::load_acquire(&c->_size));\n@@ -261,1 +263,1 @@\n-  Chunk* chunk = _head;\n+  Chunk* chunk = Atomic::load_acquire(&_head);\n","filename":"src\/hotspot\/share\/classfile\/classLoaderData.cpp","additions":10,"deletions":8,"binary":false,"changes":18,"status":"modified"}]}