{"files":[{"patch":"@@ -501,1 +501,1 @@\n-        if (duration.isZero() || duration.isNegative())\n+        if (!duration.isPositive())\n@@ -621,2 +621,2 @@\n-     * {@code waitFor(long, TimeUnit)}, which is specified to poll\n-     * {@code exitValue()}.\n+     * {@code waitFor(long, TimeUnit)} and {@code waitFor(Duration)},\n+     * which are specified to poll {@code exitValue()}.\n","filename":"src\/java.base\/share\/classes\/java\/lang\/Process.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -28,0 +28,1 @@\n+ * @library \/test\/lib\n@@ -34,0 +35,1 @@\n+import jdk.test.lib.process.ProcessTools;\n@@ -44,5 +46,5 @@\n-            Arguments.of(Duration.ZERO, false),\n-            Arguments.of(Duration.ofSeconds(-100), false),\n-            Arguments.of(Duration.ofSeconds(100), true),\n-            Arguments.of(Duration.ofSeconds(Long.MAX_VALUE), true), \/\/ nano overflow\n-            Arguments.of(Duration.ofSeconds(Long.MIN_VALUE), false) \/\/ nano underflow\n+            Arguments.of(Duration.ZERO, 3_600_000, false),\n+            Arguments.of(Duration.ofSeconds(-100), 3_600_000, false),\n+            Arguments.of(Duration.ofSeconds(100), 0, true),\n+            Arguments.of(Duration.ofSeconds(Long.MAX_VALUE), 0, true), \/\/ nano overflow\n+            Arguments.of(Duration.ofSeconds(Long.MIN_VALUE), 3_600_000, false) \/\/ nano underflow\n@@ -54,1 +56,1 @@\n-    void testEdgeDurations(Duration d, boolean expected)\n+    void testEdgeDurations(Duration d, int sleepMillis, boolean expected)\n@@ -56,2 +58,3 @@\n-        assertEquals(expected,\n-            new ProcessBuilder(\"sleep\", \"3\").start().waitFor(d));\n+        var pb = ProcessTools.createTestJavaProcessBuilder(\n+            WaitForDuration.class.getSimpleName(), Integer.toString(sleepMillis));\n+        assertEquals(expected, pb.start().waitFor(d));\n@@ -62,2 +65,7 @@\n-        assertThrows(NullPointerException.class, () ->\n-            new ProcessBuilder(\"sleep\", \"3\").start().waitFor(null));\n+        var pb = ProcessTools.createTestJavaProcessBuilder(\n+            WaitForDuration.class.getSimpleName(), \"0\");\n+        assertThrows(NullPointerException.class, () -> pb.start().waitFor(null));\n+    }\n+\n+    public static void main(String... args) throws InterruptedException {\n+        Thread.sleep(Integer.parseInt(args[0]));\n","filename":"test\/jdk\/java\/lang\/Process\/WaitForDuration.java","additions":18,"deletions":10,"binary":false,"changes":28,"status":"modified"}]}