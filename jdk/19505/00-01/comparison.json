{"files":[{"patch":"@@ -57,3 +57,4 @@\n-        pipe = SocketIOPipe.createClientIOPipe(log, argParser.getPort(), 0);\n-        log.display(\"Sending signal '\" + AODTestRunner.SIGNAL_READY_FOR_ATTACH + \"'\");\n-        pipe.println(AODTestRunner.SIGNAL_READY_FOR_ATTACH);\n+        try {\n+            pipe = SocketIOPipe.createClientIOPipe(log, argParser.getPort(), 0);\n+            log.display(\"Sending signal '\" + AODTestRunner.SIGNAL_READY_FOR_ATTACH + \"'\");\n+            pipe.println(AODTestRunner.SIGNAL_READY_FOR_ATTACH);\n@@ -61,1 +62,1 @@\n-        targetApplicationActions();\n+            targetApplicationActions();\n@@ -63,2 +64,2 @@\n-        String signal = pipe.readln();\n-        log.display(\"Signal received: '\" + signal + \"'\");\n+            String signal = pipe.readln();\n+            log.display(\"Signal received: '\" + signal + \"'\");\n@@ -66,3 +67,7 @@\n-        if ((signal == null) || !signal.equals(AODTestRunner.SIGNAL_FINISH))\n-            throw new TestBug(\"Unexpected signal: '\" + signal + \"'\");\n-        pipe.close();\n+            if ((signal == null) || !signal.equals(AODTestRunner.SIGNAL_FINISH))\n+                throw new TestBug(\"Unexpected signal: '\" + signal + \"'\");\n+        } finally {\n+            if (pipe != null) {\n+                pipe.close();\n+            }\n+        }\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/share\/aod\/DummyTargetApplication.java","additions":14,"deletions":9,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -199,1 +199,0 @@\n-        int exitCode = 0;\n@@ -201,1 +200,2 @@\n-            exitCode = waitForDebugee();\n+            int exitCode = waitForDebugee();\n+            return exitCode;\n@@ -205,0 +205,14 @@\n+        } finally {\n+            try {\n+                waitForRedirectors(timeout);\n+            } finally {\n+                if (process != null) {\n+                    process.destroy();\n+                }\n+                if (pipe != null) {\n+                    pipe.close();\n+                }\n+                if (binder != null) {\n+                    binder.close();\n+                }\n+            }\n@@ -206,11 +220,0 @@\n-        waitForRedirectors(timeout);\n-        if (process != null) {\n-            process.destroy();\n-        }\n-        if (pipe != null) {\n-            pipe.close();\n-        }\n-        if (binder != null) {\n-            binder.close();\n-        }\n-        return exitCode;\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/share\/jpda\/DebugeeProcess.java","additions":16,"deletions":13,"binary":false,"changes":29,"status":"modified"}]}