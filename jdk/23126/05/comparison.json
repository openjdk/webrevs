{"files":[{"patch":"@@ -630,1 +630,0 @@\n-  JavaThreadInObjectWaitState jtiows(thread, ms != 0);\n","filename":"src\/hotspot\/share\/prims\/jvm.cpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -1662,0 +1662,1 @@\n+    JavaThreadInObjectWaitState jtiows(current, millis != 0, interruptible);\n@@ -1683,2 +1684,0 @@\n-  current->set_current_waiting_monitor(this);\n-\n@@ -1687,1 +1686,3 @@\n-  if (ce != nullptr && ce->is_virtual_thread()) {\n+  bool is_virtual = ce != nullptr && ce->is_virtual_thread();\n+  if (is_virtual) {\n+    current->set_current_waiting_monitor(this);\n@@ -1695,0 +1696,2 @@\n+  \/\/ The jtiows does nothing for non-interruptible.\n+  JavaThreadInObjectWaitState jtiows(current, millis != 0, interruptible);\n@@ -1696,0 +1699,3 @@\n+  if (!is_virtual) { \/\/ it was already set for virtual thread\n+    current->set_current_waiting_monitor(this);\n+  }\n","filename":"src\/hotspot\/share\/runtime\/objectMonitor.cpp","additions":9,"deletions":3,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -490,1 +490,1 @@\n-  JavaThreadInObjectWaitState(JavaThread *java_thread, bool timed) :\n+  JavaThreadInObjectWaitState(JavaThread *java_thread, bool timed, bool interruptible) :\n@@ -492,2 +492,3 @@\n-                            timed ? JavaThreadStatus::IN_OBJECT_WAIT_TIMED : JavaThreadStatus::IN_OBJECT_WAIT) {\n-    if (is_alive()) {\n+                            interruptible ? (timed ? JavaThreadStatus::IN_OBJECT_WAIT_TIMED : JavaThreadStatus::IN_OBJECT_WAIT)\n+                                          : java_lang_Thread::get_thread_status(java_thread->threadObj())) {\n+    if (is_alive() && interruptible) { \/\/ non-interruptible is not active\n","filename":"src\/hotspot\/share\/services\/threadService.hpp","additions":5,"deletions":4,"binary":false,"changes":9,"status":"modified"}]}