{"files":[{"patch":"@@ -75,7 +75,0 @@\n-  if (DiagnoseSyncOnValueBasedClasses != 0) {\n-    load_klass(hdr, obj);\n-    ldrb(hdr, Address(hdr, Klass::misc_flags_offset()));\n-    tst(hdr, KlassFlags::_misc_is_value_based_class);\n-    br(Assembler::NE, slow_case);\n-  }\n-\n@@ -85,0 +78,8 @@\n+\n+    if (DiagnoseSyncOnValueBasedClasses != 0) {\n+      load_klass(hdr, obj);\n+      ldrb(hdr, Address(hdr, Klass::misc_flags_offset()));\n+      tst(hdr, KlassFlags::_misc_is_value_based_class);\n+      br(Assembler::NE, slow_case);\n+    }\n+\n","filename":"src\/hotspot\/cpu\/aarch64\/c1_MacroAssembler_aarch64.cpp","additions":8,"deletions":7,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -363,1 +363,1 @@\n-    \/\/ Clear cache in case fast locking succeeds.\n+    \/\/ Clear cache in case fast locking succeeds or we need to take the slow-path.\n","filename":"src\/hotspot\/cpu\/aarch64\/c2_MacroAssembler_aarch64.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -696,7 +696,0 @@\n-    if (DiagnoseSyncOnValueBasedClasses != 0) {\n-      load_klass(tmp, obj_reg);\n-      ldrb(tmp, Address(tmp, Klass::misc_flags_offset()));\n-      tst(tmp, KlassFlags::_misc_is_value_based_class);\n-      br(Assembler::NE, slow_case);\n-    }\n-\n@@ -707,0 +700,8 @@\n+\n+      if (DiagnoseSyncOnValueBasedClasses != 0) {\n+        load_klass(tmp, obj_reg);\n+        ldrb(tmp, Address(tmp, Klass::misc_flags_offset()));\n+        tst(tmp, KlassFlags::_misc_is_value_based_class);\n+        br(Assembler::NE, slow_case);\n+      }\n+\n","filename":"src\/hotspot\/cpu\/aarch64\/interp_masm_aarch64.cpp","additions":8,"deletions":7,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -7037,1 +7037,1 @@\n-    \/\/ Clear cache in case fast locking succeeds.\n+    \/\/ Clear cache in case fast locking succeeds or we need to take the slow-path.\n@@ -7041,0 +7041,7 @@\n+  if (DiagnoseSyncOnValueBasedClasses != 0) {\n+    load_klass(t1, obj);\n+    ldrb(t1, Address(t1, Klass::misc_flags_offset()));\n+    tst(t1, KlassFlags::_misc_is_value_based_class);\n+    br(Assembler::NE, slow);\n+  }\n+\n","filename":"src\/hotspot\/cpu\/aarch64\/macroAssembler_aarch64.cpp","additions":8,"deletions":1,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -58,6 +58,0 @@\n-  if (DiagnoseSyncOnValueBasedClasses != 0) {\n-    load_klass(hdr, obj, rscratch1);\n-    testb(Address(hdr, Klass::misc_flags_offset()), KlassFlags::_misc_is_value_based_class);\n-    jcc(Assembler::notZero, slow_case);\n-  }\n-\n@@ -68,0 +62,7 @@\n+\n+    if (DiagnoseSyncOnValueBasedClasses != 0) {\n+      load_klass(hdr, obj, rscratch1);\n+      testb(Address(hdr, Klass::misc_flags_offset()), KlassFlags::_misc_is_value_based_class);\n+      jcc(Assembler::notZero, slow_case);\n+    }\n+\n","filename":"src\/hotspot\/cpu\/x86\/c1_MacroAssembler_x86.cpp","additions":7,"deletions":6,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -479,1 +479,1 @@\n-    \/\/ Clear cache in case fast locking succeeds.\n+    \/\/ Clear cache in case fast locking succeeds or we need to take the slow-path.\n","filename":"src\/hotspot\/cpu\/x86\/c2_MacroAssembler_x86.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1026,6 +1026,0 @@\n-    if (DiagnoseSyncOnValueBasedClasses != 0) {\n-      load_klass(tmp_reg, obj_reg, rklass_decode_tmp);\n-      testb(Address(tmp_reg, Klass::misc_flags_offset()), KlassFlags::_misc_is_value_based_class);\n-      jcc(Assembler::notZero, slow_case);\n-    }\n-\n@@ -1035,0 +1029,6 @@\n+      if (DiagnoseSyncOnValueBasedClasses != 0) {\n+        load_klass(tmp_reg, obj_reg, rklass_decode_tmp);\n+        testb(Address(tmp_reg, Klass::misc_flags_offset()), KlassFlags::_misc_is_value_based_class);\n+        jcc(Assembler::notZero, slow_case);\n+      }\n+\n","filename":"src\/hotspot\/cpu\/x86\/interp_masm_x86.cpp","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -10362,1 +10362,1 @@\n-    \/\/ Clear cache in case fast locking succeeds.\n+    \/\/ Clear cache in case fast locking succeeds or we need to take the slow-path.\n@@ -10366,0 +10366,6 @@\n+  if (DiagnoseSyncOnValueBasedClasses != 0) {\n+    load_klass(tmp, obj, rscratch1);\n+    testb(Address(tmp, Klass::misc_flags_offset()), KlassFlags::_misc_is_value_based_class);\n+    jcc(Assembler::notZero, slow);\n+  }\n+\n","filename":"src\/hotspot\/cpu\/x86\/macroAssembler_x86.cpp","additions":7,"deletions":1,"binary":false,"changes":8,"status":"modified"}]}