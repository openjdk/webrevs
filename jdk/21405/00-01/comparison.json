{"files":[{"patch":"@@ -597,0 +597,18 @@\n+  SafepointMechanism::ThreadData* poll_data() { return &_poll_data; }\n+\n+  static ByteSize polling_word_offset() {\n+    ByteSize offset = byte_offset_of(Thread, _poll_data) +\n+                      byte_offset_of(SafepointMechanism::ThreadData, _polling_word);\n+    \/\/ At least on x86_64, safepoint polls encode the offset as disp8 imm.\n+    assert(in_bytes(offset) < 128, \"Offset >= 128\");\n+    return offset;\n+  }\n+\n+  static ByteSize polling_page_offset() {\n+    ByteSize offset = byte_offset_of(Thread, _poll_data) +\n+                      byte_offset_of(SafepointMechanism::ThreadData, _polling_page);\n+    \/\/ At least on x86_64, safepoint polls encode the offset as disp8 imm.\n+    assert(in_bytes(offset) < 128, \"Offset >= 128\");\n+    return offset;\n+  }\n+\n","filename":"src\/hotspot\/share\/runtime\/javaThread.hpp","additions":18,"deletions":0,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -113,0 +113,1 @@\n+  friend class JavaThread;\n@@ -138,1 +139,1 @@\n- protected:\n+ private:\n@@ -140,0 +141,2 @@\n+  \/\/ It is important for performance to put this at lower offset\n+  \/\/ in Thread. The accessors are in JavaThread.\n@@ -142,20 +145,0 @@\n- public:\n-  SafepointMechanism::ThreadData* poll_data()  { return &_poll_data; }\n-\n-  static ByteSize polling_word_offset() {\n-    ByteSize offset = byte_offset_of(Thread, _poll_data) +\n-                      byte_offset_of(SafepointMechanism::ThreadData, _polling_word);\n-    \/\/ At least on x86_64, safepoint polls encode the offset as disp8 imm.\n-    assert(in_bytes(offset) < 128, \"Offset >= 128\");\n-    return offset;\n-  }\n-\n-  static ByteSize polling_page_offset() {\n-    ByteSize offset = byte_offset_of(Thread, _poll_data) +\n-                      byte_offset_of(SafepointMechanism::ThreadData, _polling_page);\n-    \/\/ At least on x86_64, safepoint polls encode the offset as disp8 imm.\n-    assert(in_bytes(offset) < 128, \"Offset >= 128\");\n-    return offset;\n-  }\n-\n- private:\n","filename":"src\/hotspot\/share\/runtime\/thread.hpp","additions":4,"deletions":21,"binary":false,"changes":25,"status":"modified"}]}