{"files":[{"patch":"@@ -790,4 +790,3 @@\n-  \/\/ In this case we must not zap contents of such an array but we can overwrite\n-  \/\/ the header; since only pinned typearrays are allowed, this fits nicely with\n-  \/\/ putting filler arrays into the dead range as the object header sizes match and\n-  \/\/ no user data is overwritten.\n+  \/\/ In this case we should not zap, because that would overwrite\n+  \/\/ user-observable data. Memory corresponding to obj-header is safe to\n+  \/\/ change, since it's not directly user-observable.\n@@ -798,11 +797,2 @@\n-  CollectedHeap::fill_with_objects(start, range_size, !has_pinned_objects());\n-  HeapWord* current = start;\n-  do {\n-    \/\/ Update the BOT if the a threshold is crossed.\n-    size_t obj_size = cast_to_oop(current)->size();\n-    update_bot_for_block(current, current + obj_size);\n-\n-    \/\/ Advance to the next object.\n-    current += obj_size;\n-    guarantee(current <= end, \"Should never go past end\");\n-  } while (current != end);\n+  CollectedHeap::fill_with_object(start, range_size, !has_pinned_objects());\n+  update_bot_for_block(start, start + range_size);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1HeapRegion.cpp","additions":5,"deletions":15,"binary":false,"changes":20,"status":"modified"}]}