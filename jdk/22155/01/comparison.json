{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -39,1 +39,0 @@\n-import java.security.AccessController;\n","filename":"src\/jdk.management.agent\/share\/classes\/jdk\/internal\/agent\/Agent.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2004, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2004, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -56,7 +56,1 @@\n-        java.security.AccessController.doPrivileged(\n-            new java.security.PrivilegedAction<Void>() {\n-                public Void run() {\n-                    System.loadLibrary(\"management_agent\");\n-                    return null;\n-                }\n-            });\n+        System.loadLibrary(\"management_agent\");\n","filename":"src\/jdk.management.agent\/unix\/classes\/jdk\/internal\/agent\/FileSystemImpl.java","additions":2,"deletions":8,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2004, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2004, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -67,7 +67,1 @@\n-        java.security.AccessController.doPrivileged(\n-            new java.security.PrivilegedAction<Void>() {\n-                public Void run() {\n-                    System.loadLibrary(\"management_agent\");\n-                    return null;\n-                }\n-            });\n+        System.loadLibrary(\"management_agent\");\n","filename":"src\/jdk.management.agent\/windows\/classes\/jdk\/internal\/agent\/FileSystemImpl.java","additions":2,"deletions":8,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -152,7 +152,0 @@\n-            if (permission != null) {\n-                @SuppressWarnings(\"removal\")\n-                SecurityManager sm = System.getSecurityManager();\n-                if (sm != null) {\n-                    sm.checkPermission(permission);\n-                }\n-            }\n","filename":"src\/jdk.management\/share\/classes\/com\/sun\/management\/internal\/DiagnosticCommandImpl.java","additions":0,"deletions":7,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,1 +31,0 @@\n-import java.security.AccessController;\n@@ -120,7 +119,1 @@\n-        AccessController.doPrivileged(\n-            new java.security.PrivilegedAction<Void>() {\n-                public Void run() {\n-                    System.loadLibrary(\"management\");\n-                    return null;\n-                }\n-            });\n+        System.loadLibrary(\"management\");\n","filename":"src\/jdk.management\/share\/classes\/com\/sun\/management\/internal\/Flag.java","additions":2,"deletions":9,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -36,2 +36,0 @@\n-import java.security.AccessController;\n-import java.security.PrivilegedAction;\n@@ -68,13 +66,11 @@\n-        @SuppressWarnings(\"removal\")\n-        final GcInfoBuilder builder = AccessController.doPrivileged (new PrivilegedAction<GcInfoBuilder>() {\n-                public GcInfoBuilder run() {\n-                    try {\n-                        Class<?> cl = Class.forName(\"com.sun.management.GcInfo\");\n-                        Field f = cl.getDeclaredField(\"builder\");\n-                        f.setAccessible(true);\n-                        return (GcInfoBuilder)f.get(gcNotifInfo.getGcInfo());\n-                    } catch(ClassNotFoundException | NoSuchFieldException | IllegalAccessException e) {\n-                        return null;\n-                    }\n-                }\n-            });\n+\n+        GcInfoBuilder builder = null;\n+        try {\n+            Class<?> cl = Class.forName(\"com.sun.management.GcInfo\");\n+            Field f = cl.getDeclaredField(\"builder\");\n+            f.setAccessible(true);\n+            builder = (GcInfoBuilder) f.get(gcNotifInfo.getGcInfo());\n+        } catch (ClassNotFoundException | NoSuchFieldException | IllegalAccessException e) {\n+            \/\/ ignore\n+        }\n+\n","filename":"src\/jdk.management\/share\/classes\/com\/sun\/management\/internal\/GarbageCollectionNotifInfoCompositeData.java","additions":12,"deletions":16,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2004, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2004, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -41,2 +41,0 @@\n-import java.security.AccessController;\n-import java.security.PrivilegedAction;\n@@ -74,26 +72,18 @@\n-        @SuppressWarnings(\"removal\")\n-        final GcInfoBuilder builder = AccessController.doPrivileged (new PrivilegedAction<GcInfoBuilder>() {\n-                        public GcInfoBuilder run() {\n-                            try {\n-                                Class<?> cl = Class.forName(\"com.sun.management.GcInfo\");\n-                                Field f = cl.getDeclaredField(\"builder\");\n-                                f.setAccessible(true);\n-                                return (GcInfoBuilder)f.get(info);\n-                            } catch(ClassNotFoundException | NoSuchFieldException | IllegalAccessException e) {\n-                                return null;\n-                            }\n-                        }\n-                    });\n-        @SuppressWarnings(\"removal\")\n-        final Object[] extAttr = AccessController.doPrivileged (new PrivilegedAction<Object[]>() {\n-                        public Object[] run() {\n-                            try {\n-                                Class<?> cl = Class.forName(\"com.sun.management.GcInfo\");\n-                                Field f = cl.getDeclaredField(\"extAttributes\");\n-                                f.setAccessible(true);\n-                                return (Object[])f.get(info);\n-                            } catch(ClassNotFoundException | NoSuchFieldException | IllegalAccessException e) {\n-                                return null;\n-                            }\n-                        }\n-                    });\n+        GcInfoBuilder builder = null;\n+        try {\n+            Class<?> cl = Class.forName(\"com.sun.management.GcInfo\");\n+            Field f = cl.getDeclaredField(\"builder\");\n+            f.setAccessible(true);\n+            builder = (GcInfoBuilder)f.get(info);\n+        } catch(ClassNotFoundException | NoSuchFieldException | IllegalAccessException e) {\n+            \/\/ ignore\n+        }\n+        Object[] extAttr = null;\n+        try {\n+            Class<?> cl = Class.forName(\"com.sun.management.GcInfo\");\n+            Field f = cl.getDeclaredField(\"extAttributes\");\n+            f.setAccessible(true);\n+            extAttr = (Object[])f.get(info);\n+        } catch(ClassNotFoundException | NoSuchFieldException | IllegalAccessException e) {\n+            \/\/ ignore\n+        }\n","filename":"src\/jdk.management\/share\/classes\/com\/sun\/management\/internal\/GcInfoCompositeData.java","additions":19,"deletions":29,"binary":false,"changes":48,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,4 +32,0 @@\n-import java.security.AccessController;\n-import java.security.PrivilegedAction;\n-import java.security.PrivilegedActionException;\n-import java.security.PrivilegedExceptionAction;\n@@ -56,3 +52,1 @@\n-        PrivilegedAction<Boolean> pa = () -> Boolean.parseBoolean(System.getProperty(propertyName, \"false\"));\n-        @SuppressWarnings(\"removal\")\n-        boolean allowAnyFileSuffix = AccessController.doPrivileged(pa);\n+        boolean allowAnyFileSuffix = Boolean.getBoolean(propertyName);\n@@ -63,7 +57,0 @@\n-        @SuppressWarnings(\"removal\")\n-        SecurityManager security = System.getSecurityManager();\n-        if (security != null) {\n-            security.checkWrite(outputFile);\n-            Util.checkControlAccess();\n-        }\n-\n@@ -110,1 +97,0 @@\n-        Util.checkControlAccess();\n@@ -170,6 +156,0 @@\n-        \/\/ need ManagementPermission(\"control\")\n-        @SuppressWarnings(\"removal\")\n-        SecurityManager sm = System.getSecurityManager();\n-        if (sm != null)\n-            Util.checkControlAccess();\n-\n@@ -177,1 +157,0 @@\n-            PrivilegedExceptionAction<Void> pa = () -> {\n@@ -179,12 +158,0 @@\n-                return null;\n-            };\n-            try {\n-                AccessController.doPrivileged(pa);\n-            } catch (PrivilegedActionException pae) {\n-                Throwable cause = pae.getCause();\n-                if (cause instanceof IOException ioe)\n-                    throw ioe;\n-                if (cause instanceof RuntimeException e)\n-                    throw e;\n-                throw new RuntimeException(cause);\n-            }\n","filename":"src\/jdk.management\/share\/classes\/com\/sun\/management\/internal\/HotSpotDiagnostic.java","additions":2,"deletions":35,"binary":false,"changes":37,"status":"modified"},{"patch":"@@ -33,1 +33,0 @@\n-import java.security.AccessController;\n@@ -58,4 +57,1 @@\n-       AccessController.doPrivileged((PrivilegedAction<Void>) () -> {\n-           System.loadLibrary(\"management_ext\");\n-           return null;\n-       });\n+       System.loadLibrary(\"management_ext\");\n","filename":"src\/jdk.management\/share\/classes\/com\/sun\/management\/internal\/PlatformMBeanProviderImpl.java","additions":1,"deletions":5,"binary":false,"changes":6,"status":"modified"}]}