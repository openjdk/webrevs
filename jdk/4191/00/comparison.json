{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -889,1 +889,1 @@\n-                set(DAY_OF_MONTH, (int)(nfd - month1) + 1);\n+                set(DAY_OF_MONTH, getCalendarDate(nfd).getDayOfMonth());\n@@ -1461,1 +1461,1 @@\n-                    int monthLength = gcal.getMonthLength(d);\n+                    int monthLength = actualMonthLength();\n@@ -2242,1 +2242,1 @@\n-        if (eraIndex == -1) {\n+        if (eraIndex != -1) {\n","filename":"src\/java.base\/share\/classes\/java\/util\/JapaneseImperialCalendar.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,1 +27,1 @@\n- * @bug 4609228\n+ * @bug 4609228 8187649\n","filename":"test\/jdk\/java\/util\/Calendar\/CalendarTestScripts\/JapaneseTests.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -438,2 +438,20 @@\n-\t# Needs to wait for 6191841 fix. (WEEK_OF_MONTH needs to change\n-\t# ERA and YEAR in a transition month.)\n+\tuse jcal\n+\tclear all\n+\n+\t# Make sure this test does not throw AIOOBE\n+\tset date Heisei 1 Aug 1\n+\troll week_of_month 1\n+\tcheck date Heisei 1 Aug 8\n+\n+\t# Check transition dates\n+\tset date Showa 64 Jan 7\n+\troll week_of_month 1\n+\tcheck date Showa 64 Jan 7\n+\troll week_of_month -1\n+\tcheck date Showa 64 Jan 7\n+\n+\tset date Heisei 1 Jan 31\n+\troll week_of_month 1\n+\tcheck date Heisei 1 Jan 10\n+\troll week_of_month -1\n+\tcheck date Heisei 1 Jan 31\n@@ -442,2 +460,20 @@\n-\t# Needs to wait for 6191841 fix. (DAY_OF_MONTH needs to change\n-\t# ERA and YEAR in a transition month.)\n+\tuse jcal\n+\tclear all\n+\n+\t# Make sure this test does not throw AIOOBE\n+\tSet date Heisei 1 Aug 1\n+\troll day_of_month 1\n+\tcheck date Heisei 1 Aug 2\n+\n+\t# Check transition dates\n+\tset date Showa 64 Jan 7\n+\troll day_of_month 1\n+\tcheck date Showa 64 Jan 1\n+\troll day_of_month -1\n+\tcheck date Showa 64 Jan 7\n+\n+\tset date Heisei 1 Jan 31\n+\troll day_of_month 1\n+\tcheck date Heisei 1 Jan 8\n+\troll day_of_month -1\n+\tcheck date Heisei 1 Jan 31\n","filename":"test\/jdk\/java\/util\/Calendar\/CalendarTestScripts\/japanese\/japanese_roll.cts","additions":40,"deletions":4,"binary":false,"changes":44,"status":"modified"}]}