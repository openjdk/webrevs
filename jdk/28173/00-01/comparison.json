{"files":[{"patch":"@@ -42,1 +42,0 @@\n-import javax.swing.SwingUtilities;\n@@ -46,7 +45,4 @@\n-    static final int WIDTH = 100;\n-    static final int HEIGHT = 100;\n-    static final int FONTSIZE = 32;\n-\n-    static int getEmptyPixel() {\n-        return 0xFFFFFFFF;\n-    }\n+    private static final int WIDTH = 100;\n+    private static final int HEIGHT = 100;\n+    private static final int FONTSIZE = 32;\n+    private static final Color EMPTY_PIXEL = new Color(0xFFFFFFFF);\n@@ -56,8 +52,3 @@\n-            SwingUtilities.invokeAndWait(new Runnable() {\n-                @Override\n-                public void run() {\n-                    Graphics g = img.getGraphics();\n-                    g.setColor(new Color(getEmptyPixel()));\n-                    g.fillRect(0, 0, WIDTH, HEIGHT);\n-                }\n-            });\n+        Graphics g = img.getGraphics();\n+        g.setColor(EMPTY_PIXEL);\n+        g.fillRect(0, 0, WIDTH, HEIGHT);\n@@ -70,3 +61,2 @@\n-        SwingUtilities.invokeAndWait(() -> {\n-            final JTextPane comp = new JTextPane();\n-            final StyledDocument doc = comp.getStyledDocument();\n+        final JTextPane textPane = new JTextPane();\n+        final StyledDocument doc = textPane.getStyledDocument();\n@@ -74,7 +64,7 @@\n-            Style style = comp.addStyle(\"superscript\", null);\n-            StyleConstants.setSuperscript(style, true);\n-            StyleConstants.setFontSize(style, FONTSIZE);\n-            StyleConstants.setBackground(style, Color.YELLOW);\n-            try {\n-                doc.insertString(doc.getLength(), \"hello\", style);\n-            } catch (Exception e) {}\n+        Style style = textPane.addStyle(\"superscript\", null);\n+        StyleConstants.setSuperscript(style, true);\n+        StyleConstants.setFontSize(style, FONTSIZE);\n+        StyleConstants.setBackground(style, Color.YELLOW);\n+        try {\n+            doc.insertString(doc.getLength(), \"hello\", style);\n+        } catch (Exception e) {}\n@@ -82,3 +72,2 @@\n-            comp.setSize(WIDTH, HEIGHT);\n-            comp.setDocument(doc);\n-            comp.setBackground(Color.RED);\n+        textPane.setSize(WIDTH, HEIGHT);\n+        textPane.setBackground(Color.RED);\n@@ -86,2 +75,1 @@\n-            comp.paint(img.getGraphics());\n-        });\n+        textPane.paint(img.getGraphics());\n@@ -93,4 +81,4 @@\n-        for (int x = 10; x < WIDTH\/ 2; x++) {\n-            Color col = new Color(bimg.getRGB(x, 0));\n-            System.out.println(Integer.toHexString(bimg.getRGB(x, 0)));\n-            if (col.equals(Color.YELLOW)) {\n+        for (int x = 10; x < WIDTH \/ 2; x++) {\n+            int col = bimg.getRGB(x, 0);\n+            System.out.println(Integer.toHexString(col));\n+            if (col == Color.YELLOW.getRGB()) {\n","filename":"test\/jdk\/javax\/swing\/text\/GlyphView\/TestGlyphBGHeight.java","additions":23,"deletions":35,"binary":false,"changes":58,"status":"modified"}]}