{"files":[{"patch":"@@ -258,3 +258,2 @@\n-        Segment seg = Segment.LIMIT;\n-        Segment.LIMIT.patternBldr.setLength(0);\n-        Segment.FORMAT.patternBldr.setLength(0);\n+        StringBuilder[] segments = new StringBuilder[]{new StringBuilder(), new StringBuilder()};\n+        int part = 0; \/\/ 0 denotes LIMIT. 1 denotes FORMAT.\n@@ -271,1 +270,1 @@\n-                        seg.patternBldr.append(ch);\n+                        segments[part].append(ch);\n@@ -278,1 +277,1 @@\n-                    if (inQuote || seg == Segment.FORMAT) {\n+                    if (inQuote || part == 1) {\n@@ -280,1 +279,1 @@\n-                        seg.patternBldr.append(ch);\n+                        segments[part].append(ch);\n@@ -284,1 +283,1 @@\n-                        if (Segment.LIMIT.patternBldr.isEmpty()) {\n+                        if (segments[0].isEmpty()) {\n@@ -288,1 +287,1 @@\n-                        limit = stringToNum(Segment.LIMIT.patternBldr.toString());\n+                        limit = stringToNum(segments[0].toString());\n@@ -296,2 +295,2 @@\n-                        Segment.LIMIT.patternBldr.setLength(0);\n-                        seg = Segment.FORMAT;\n+                        segments[0].setLength(0);\n+                        part = 1;\n@@ -302,1 +301,1 @@\n-                        seg.patternBldr.append(ch);\n+                        segments[part].append(ch);\n@@ -304,1 +303,1 @@\n-                        if (seg != Segment.FORMAT) {\n+                        if (part != 1) {\n@@ -311,3 +310,3 @@\n-                        formats.add(Segment.FORMAT.patternBldr.toString());\n-                        Segment.FORMAT.patternBldr.setLength(0);\n-                        seg = Segment.LIMIT;\n+                        formats.add(segments[1].toString());\n+                        segments[1].setLength(0);\n+                        part = 0;\n@@ -317,1 +316,1 @@\n-                    seg.patternBldr.append(ch);\n+                    segments[part].append(ch);\n@@ -322,1 +321,1 @@\n-        if (seg == Segment.FORMAT) {\n+        if (part == 1) {\n@@ -324,1 +323,1 @@\n-            formats.add(Segment.FORMAT.patternBldr.toString());\n+            formats.add(segments[1].toString());\n@@ -330,12 +329,0 @@\n-    \/\/ Used to explicitly define the segment mode while applying a pattern\n-    private enum Segment {\n-        LIMIT(new StringBuilder()),\n-        FORMAT(new StringBuilder());\n-\n-        private final StringBuilder patternBldr;\n-\n-        Segment(StringBuilder patternBldr) {\n-            this.patternBldr = patternBldr;\n-        }\n-    }\n-\n","filename":"src\/java.base\/share\/classes\/java\/text\/ChoiceFormat.java","additions":17,"deletions":30,"binary":false,"changes":47,"status":"modified"}]}