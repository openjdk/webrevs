{"files":[{"patch":"@@ -49,2 +49,1 @@\n-        TestFramework.runWithFlags(\"-XX:+IgnoreUnrecognizedVMOptions\",\n-                                   \"-XX:StressLongCountedLoop=0\");\n+        TestFramework.run();\n@@ -58,2 +57,4 @@\n-           \"test_sllc_n\", \"test_sllv\", \"test_srlc\", \"test_srlc_n\", \"test_srlv\",\n-           \"test_srac\", \"test_srac_n\", \"test_srav\"\n+           \"test_sllc_n\", \"test_sllc_o\", \"test_sllc_on\", \"test_sllv\",\n+           \"test_srlc\", \"test_srlc_n\", \"test_srlc_o\", \"test_srlc_on\",\n+           \"test_srlv\", \"test_srac\", \"test_srac_n\", \"test_srac_o\",\n+           \"test_srac_on\", \"test_srav\"\n@@ -404,2 +405,1 @@\n-            System.err.println(\"FAILED: \" + errn + \" errors\");\n-            System.exit(97);\n+            throw new Error(\"FAILED: \" + errn + \" errors\");\n@@ -411,1 +411,1 @@\n-    \/\/ Not vectorized: simple addition not profitalbe, see JDK-8307516.\n+    \/\/ Not vectorized: simple addition not profitable, see JDK-8307516.\n@@ -421,2 +421,2 @@\n-    @IR(counts = { IRNode.ADD_VI, \">= 1\" },\n-        applyIfCPUFeature = {\"sse2\", \"true\"})\n+    @IR(counts = { IRNode.ADD_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n@@ -430,2 +430,2 @@\n-    @IR(counts = { IRNode.ADD_VI, \">= 1\" },\n-        applyIfCPUFeature = {\"sse2\", \"true\"})\n+    @IR(counts = { IRNode.ADD_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n@@ -439,2 +439,2 @@\n-    @IR(counts = { IRNode.ADD_VI, \">= 1\" },\n-        applyIfCPUFeature = {\"sse2\", \"true\"})\n+    @IR(counts = { IRNode.ADD_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n@@ -448,2 +448,2 @@\n-    @IR(counts = { IRNode.ADD_VI, \">= 1\" },\n-        applyIfCPUFeature = {\"sse2\", \"true\"})\n+    @IR(counts = { IRNode.ADD_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n@@ -457,2 +457,2 @@\n-    @IR(counts = { IRNode.SUB_VI, \">= 1\" },\n-        applyIfCPUFeature = {\"sse2\", \"true\"})\n+    @IR(counts = { IRNode.SUB_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n@@ -466,2 +466,2 @@\n-    @IR(counts = { IRNode.SUB_VI, \">= 1\", },\n-        applyIfCPUFeature = {\"sse2\", \"true\"})\n+    @IR(counts = { IRNode.SUB_VI, \"> 0\", },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n@@ -475,2 +475,2 @@\n-    @IR(counts = { IRNode.SUB_VI, \">= 1\", IRNode.LSHIFT_VI, \">= 1\" },\n-        applyIfCPUFeature = {\"sse2\", \"true\"})\n+    @IR(counts = { IRNode.SUB_VI, \"> 0\", IRNode.LSHIFT_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n@@ -484,2 +484,2 @@\n-    @IR(counts = { IRNode.SUB_VI, \">= 1\", IRNode.LSHIFT_VI, \">= 1\" },\n-        applyIfCPUFeature = {\"sse2\", \"true\"})\n+    @IR(counts = { IRNode.SUB_VI, \"> 0\", IRNode.LSHIFT_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n@@ -493,2 +493,2 @@\n-    @IR(counts = { IRNode.MUL_VI, \">= 1\" },\n-        applyIfCPUFeature = {\"sse4.1\", \"true\"})\n+    @IR(counts = { IRNode.MUL_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse4.1\", \"true\", \"asimd\", \"true\"})\n@@ -502,2 +502,2 @@\n-    @IR(counts = { IRNode.MUL_VI, \">= 1\" },\n-        applyIfCPUFeature = {\"sse4.1\", \"true\"})\n+    @IR(counts = { IRNode.MUL_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse4.1\", \"true\", \"asimd\", \"true\"})\n@@ -510,1 +510,2 @@\n-    \/\/ Not vectorized: no vector div. Might vectorize after JDK-8282365 (transform div to mul\/add\/shift).\n+    \/\/ Not vectorized: no vector div. Might vectorize after JDK-8282365\n+    \/\/ (transform div to mul\/add\/shift).\n@@ -517,1 +518,2 @@\n-    \/\/ Not vectorized: no vector div. Might vectorize after JDK-8282365 (transform div to mul\/add\/shift).\n+    \/\/ Not vectorized: no vector div. Might vectorize after JDK-8282365\n+    \/\/ (transform div to mul\/add\/shift).\n@@ -539,2 +541,2 @@\n-    @IR(counts = { IRNode.AND_VI, \">= 1\" },\n-        applyIfCPUFeature = {\"sse2\", \"true\"})\n+    @IR(counts = { IRNode.AND_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n@@ -548,2 +550,2 @@\n-    @IR(counts = { IRNode.AND_VI, \">= 1\" },\n-        applyIfCPUFeature = {\"sse2\", \"true\"})\n+    @IR(counts = { IRNode.AND_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n@@ -557,2 +559,2 @@\n-    @IR(counts = { IRNode.AND_VI, \">= 1\" },\n-        applyIfCPUFeature = {\"sse2\", \"true\"})\n+    @IR(counts = { IRNode.AND_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n@@ -566,2 +568,2 @@\n-    @IR(counts = { IRNode.OR_VI, \">= 1\" },\n-        applyIfCPUFeature = {\"sse2\", \"true\"})\n+    @IR(counts = { IRNode.OR_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n@@ -575,2 +577,2 @@\n-    @IR(counts = { IRNode.OR_VI, \">= 1\" },\n-        applyIfCPUFeature = {\"sse2\", \"true\"})\n+    @IR(counts = { IRNode.OR_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n@@ -584,2 +586,2 @@\n-    @IR(counts = { IRNode.OR_VI, \">= 1\" },\n-        applyIfCPUFeature = {\"sse2\", \"true\"})\n+    @IR(counts = { IRNode.OR_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n@@ -593,2 +595,2 @@\n-    @IR(counts = { IRNode.XOR_VI, \">= 1\" },\n-        applyIfCPUFeature = {\"sse2\", \"true\"})\n+    @IR(counts = { IRNode.XOR_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n@@ -602,2 +604,2 @@\n-    @IR(counts = { IRNode.XOR_VI, \">= 1\" },\n-        applyIfCPUFeature = {\"sse2\", \"true\"})\n+    @IR(counts = { IRNode.XOR_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n@@ -611,2 +613,2 @@\n-    @IR(counts = { IRNode.XOR_VI, \">= 1\" },\n-        applyIfCPUFeature = {\"sse2\", \"true\"})\n+    @IR(counts = { IRNode.XOR_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n@@ -620,2 +622,2 @@\n-    @IR(counts = { IRNode.LSHIFT_VI, \">= 1\" },\n-        applyIfCPUFeature = {\"sse2\", \"true\"})\n+    @IR(counts = { IRNode.LSHIFT_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n@@ -629,2 +631,2 @@\n-    @IR(counts = { IRNode.LSHIFT_VI, \">= 1\" },\n-        applyIfCPUFeature = {\"sse2\", \"true\"})\n+    @IR(counts = { IRNode.LSHIFT_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n@@ -637,0 +639,5 @@\n+    @Test\n+    @IR(counts = { IRNode.LSHIFT_VI,     \"= 0\",\n+                   IRNode.LOAD_VECTOR_I, \"> 0\",\n+                   IRNode.STORE_VECTOR,  \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n@@ -643,0 +650,5 @@\n+    @Test\n+    @IR(counts = { IRNode.LSHIFT_VI,     \"= 0\",\n+                   IRNode.LOAD_VECTOR_I, \"> 0\",\n+                   IRNode.STORE_VECTOR,  \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n@@ -650,2 +662,2 @@\n-    @IR(counts = { IRNode.LSHIFT_VI, \">= 1\" },\n-        applyIfCPUFeature = {\"sse2\", \"true\"})\n+    @IR(counts = { IRNode.LSHIFT_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n@@ -659,2 +671,2 @@\n-    @IR(counts = { IRNode.URSHIFT_VI, \">= 1\" },\n-        applyIfCPUFeature = {\"sse2\", \"true\"})\n+    @IR(counts = { IRNode.URSHIFT_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n@@ -668,2 +680,2 @@\n-    @IR(counts = { IRNode.URSHIFT_VI, \">= 1\" },\n-        applyIfCPUFeature = {\"sse2\", \"true\"})\n+    @IR(counts = { IRNode.URSHIFT_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n@@ -676,0 +688,5 @@\n+    @Test\n+    @IR(counts = { IRNode.URSHIFT_VI,    \"= 0\",\n+                   IRNode.LOAD_VECTOR_I, \"> 0\",\n+                   IRNode.STORE_VECTOR,  \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n@@ -682,0 +699,5 @@\n+    @Test\n+    @IR(counts = { IRNode.URSHIFT_VI,    \"= 0\",\n+                   IRNode.LOAD_VECTOR_I, \"> 0\",\n+                   IRNode.STORE_VECTOR,  \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n@@ -689,2 +711,2 @@\n-    @IR(counts = { IRNode.URSHIFT_VI, \">= 1\" },\n-        applyIfCPUFeature = {\"sse2\", \"true\"})\n+    @IR(counts = { IRNode.URSHIFT_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n@@ -698,2 +720,2 @@\n-    @IR(counts = { IRNode.RSHIFT_VI, \">= 1\" },\n-        applyIfCPUFeature = {\"sse2\", \"true\"})\n+    @IR(counts = { IRNode.RSHIFT_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n@@ -707,2 +729,2 @@\n-    @IR(counts = { IRNode.RSHIFT_VI, \">= 1\" },\n-        applyIfCPUFeature = {\"sse2\", \"true\"})\n+    @IR(counts = { IRNode.RSHIFT_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n@@ -715,0 +737,5 @@\n+    @Test\n+    @IR(counts = { IRNode.RSHIFT_VI,     \"= 0\",\n+                   IRNode.LOAD_VECTOR_I, \"> 0\",\n+                   IRNode.STORE_VECTOR,  \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n@@ -721,0 +748,5 @@\n+    @Test\n+    @IR(counts = { IRNode.RSHIFT_VI,     \"= 0\",\n+                   IRNode.LOAD_VECTOR_I, \"> 0\",\n+                   IRNode.STORE_VECTOR,  \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n@@ -728,2 +760,2 @@\n-    @IR(counts = { IRNode.RSHIFT_VI, \">= 1\" },\n-        applyIfCPUFeature = {\"sse2\", \"true\"})\n+    @IR(counts = { IRNode.RSHIFT_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n@@ -736,0 +768,1 @@\n+    \/\/ Not vectorized currently\n@@ -745,0 +778,1 @@\n+    \/\/ Not vectorized currently\n@@ -754,0 +788,1 @@\n+    \/\/ Not vectorized currently\n@@ -763,0 +798,1 @@\n+    \/\/ Not vectorized currently\n","filename":"test\/hotspot\/jtreg\/compiler\/c2\/cr7200264\/TestIntVect.java","additions":101,"deletions":65,"binary":false,"changes":166,"status":"modified"}]}