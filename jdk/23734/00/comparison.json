{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,0 +31,1 @@\n+import jdk.test.whitebox.WhiteBox;\n@@ -40,1 +41,3 @@\n- * @run testng DynLibsTest\n+ * @build jdk.test.whitebox.WhiteBox\n+ * @run driver jdk.test.lib.helpers.ClassFileInstaller jdk.test.whitebox.WhiteBox\n+ * @run testng\/othervm -Xbootclasspath\/a:. -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI DynLibsTest\n@@ -47,3 +50,10 @@\n-        output.shouldContain(Platform.buildSharedLibraryName(\"jvm\"));\n-        output.shouldContain(Platform.buildSharedLibraryName(\"java\"));\n-        output.shouldContain(Platform.buildSharedLibraryName(\"management\"));\n+        if (WhiteBox.getWhiteBox().isStatic()) {\n+            output.shouldContain(\"java\");\n+            output.shouldNotContain(Platform.buildSharedLibraryName(\"jvm\"));\n+            output.shouldNotContain(Platform.buildSharedLibraryName(\"java\"));\n+            output.shouldNotContain(Platform.buildSharedLibraryName(\"management\"));\n+        } else {\n+            output.shouldContain(Platform.buildSharedLibraryName(\"jvm\"));\n+            output.shouldContain(Platform.buildSharedLibraryName(\"java\"));\n+            output.shouldContain(Platform.buildSharedLibraryName(\"management\"));\n+        }\n","filename":"test\/hotspot\/jtreg\/serviceability\/dcmd\/vm\/DynLibsTest.java","additions":15,"deletions":5,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -2,2 +2,2 @@\n- * Copyright (c) 2023, 2024, Oracle and\/or its affiliates. All rights reserved.\n- * Copyright (c) 2023, 2024, Red Hat, Inc. and\/or its affiliates.\n+ * Copyright (c) 2023, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2023, 2025, Red Hat, Inc. and\/or its affiliates.\n@@ -43,1 +43,3 @@\n- * @run testng\/othervm -XX:+UsePerfData SystemDumpMapTest\n+ * @build jdk.test.whitebox.WhiteBox\n+ * @run driver jdk.test.lib.helpers.ClassFileInstaller jdk.test.whitebox.WhiteBox\n+ * @run testng\/othervm -Xbootclasspath\/a:. -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI -XX:+UsePerfData SystemDumpMapTest\n","filename":"test\/hotspot\/jtreg\/serviceability\/dcmd\/vm\/SystemDumpMapTest.java","additions":5,"deletions":3,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,2 +2,2 @@\n- * Copyright (c) 2023, 2024, Oracle and\/or its affiliates. All rights reserved.\n- * Copyright (c) 2023, 2024, Red Hat, Inc. and\/or its affiliates.\n+ * Copyright (c) 2023, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2023, 2025, Red Hat, Inc. and\/or its affiliates.\n@@ -39,1 +39,3 @@\n- * @run testng\/othervm -XX:+UsePerfData SystemMapTest\n+ * @build jdk.test.whitebox.WhiteBox\n+ * @run driver jdk.test.lib.helpers.ClassFileInstaller jdk.test.whitebox.WhiteBox\n+ * @run testng\/othervm -Xbootclasspath\/a:. -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI -XX:+UsePerfData SystemMapTest\n@@ -52,1 +54,3 @@\n- * @run testng\/othervm -XX:+UsePerfData -XX:+UseZGC SystemMapTest\n+ * @build jdk.test.whitebox.WhiteBox\n+ * @run driver jdk.test.lib.helpers.ClassFileInstaller jdk.test.whitebox.WhiteBox\n+ * @run testng\/othervm -Xbootclasspath\/a:. -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI -XX:+UsePerfData -XX:+UseZGC SystemMapTest\n","filename":"test\/hotspot\/jtreg\/serviceability\/dcmd\/vm\/SystemMapTest.java","additions":8,"deletions":4,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,2 +2,2 @@\n- * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n- * Copyright (c) 2024, Red Hat, Inc. and\/or its affiliates.\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2025, Red Hat, Inc. and\/or its affiliates.\n@@ -26,0 +26,2 @@\n+import jdk.test.lib.StringArrayUtils;\n+import jdk.test.whitebox.WhiteBox;\n@@ -85,2 +87,0 @@\n-            \/\/ libjvm\n-            regexBase_committed + \"\/lib\/.*\/libjvm.so\",\n@@ -93,0 +93,5 @@\n+        static final String shouldMatchUnconditionally_linux_libjvm[] = {\n+            \/\/ libjvm\n+            regexBase_committed + \"\/lib\/.*\/libjvm.so\"\n+        };\n+\n@@ -106,1 +111,6 @@\n-            return shouldMatchUnconditionally_linux;\n+            if (WhiteBox.getWhiteBox().isStatic()) {\n+                return shouldMatchUnconditionally_linux;\n+            } else {\n+                return StringArrayUtils.concat(shouldMatchUnconditionally_linux,\n+                                               shouldMatchUnconditionally_linux_libjvm);\n+            }\n@@ -128,0 +138,3 @@\n+        };\n+\n+        static final String shouldMatchUnconditionally_windows_libjvm[] = {\n@@ -145,1 +158,6 @@\n-            return shouldMatchUnconditionally_windows;\n+            if (WhiteBox.getWhiteBox().isStatic()) {\n+                return shouldMatchUnconditionally_windows;\n+            } else {\n+                return StringArrayUtils.concat(shouldMatchUnconditionally_windows,\n+                                               shouldMatchUnconditionally_windows_libjvm);\n+            }\n@@ -168,2 +186,0 @@\n-            \/\/ libjvm\n-            macOSbase + macow + space + someNumber + space + \"\/.*\/lib\/server\/libjvm.dylib\",\n@@ -174,0 +190,5 @@\n+        static final String shouldMatchUnconditionally_macOS_libjvm[] = {\n+            \/\/ libjvm\n+            macOSbase + macow + space + someNumber + space + \"\/.*\/lib\/server\/libjvm.dylib\",\n+        };\n+\n@@ -186,1 +207,6 @@\n-            return shouldMatchUnconditionally_macOS;\n+            if (WhiteBox.getWhiteBox().isStatic()) {\n+                return shouldMatchUnconditionally_macOS;\n+            } else {\n+                return StringArrayUtils.concat(shouldMatchUnconditionally_macOS,\n+                                               shouldMatchUnconditionally_macOS_libjvm);\n+            }\n","filename":"test\/hotspot\/jtreg\/serviceability\/dcmd\/vm\/SystemMapTestBase.java","additions":35,"deletions":9,"binary":false,"changes":44,"status":"modified"}]}