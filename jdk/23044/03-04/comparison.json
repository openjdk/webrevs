{"files":[{"patch":"@@ -84,1 +84,1 @@\n-    public static void main(String[] args) {\n+    public static void main(String[] args) throws Exception {\n@@ -155,1 +155,11 @@\n-        System.out.println(\"Successfully completed testing all 12 cases. Test Passed !!\");\n+        System.out.println(\"CASE 13: Testing ICC_Profile.getInstance(..)\"\n+                           + \" with VALID profile data ...\");\n+        testProfileCreation(true);\n+        System.out.println(\"CASE 13: Passed \\n\");\n+\n+        System.out.println(\"CASE 14: Testing ICC_Profile.getInstance(..)\"\n+                           + \" with INVALID profile data ...\");\n+        testProfileCreation(false);\n+        System.out.println(\"CASE 14: Passed \\n\");\n+\n+        System.out.println(\"Successfully completed testing all 14 cases. Test Passed !!\");\n@@ -169,2 +179,1 @@\n-            throw new RuntimeException(\"Test Failed ! Expected IllegalArgumentException:\"\n-                                       + \" NOT thrown\");\n+            throw new RuntimeException(\"Test Failed ! Expected IAE NOT thrown\");\n@@ -172,1 +181,1 @@\n-            System.out.println(\"Expected IllegalArgumentException thrown: \" + iae.getMessage());\n+            System.out.println(\"Expected IAE thrown: \" + iae.getMessage());\n@@ -198,0 +207,26 @@\n+    private static void testProfileCreation(boolean validCase) {\n+        ICC_Profile builtInProfile = ICC_Profile.getInstance(ColorSpace.CS_GRAY);\n+        byte[] profileData = builtInProfile.getData();\n+\n+        int validDeviceClass = ICC_Profile.icSigInputClass;\n+        BigInteger big = BigInteger.valueOf(validDeviceClass);\n+        \/\/valid case set device class to 0x73636E72 (icSigInputClass)\n+        \/\/invalid case set device class to 0x00000000\n+        byte[] field = validCase ? big.toByteArray()\n+                                 : ByteBuffer.allocate(4).putInt(0).array();\n+        System.arraycopy(field, 0, profileData, PROFILE_CLASS_START_INDEX, 4);\n+\n+        try {\n+            ICC_Profile.getInstance(profileData);\n+            if (!validCase) {\n+                throw new RuntimeException(\"Test Failed ! Expected IAE NOT thrown\");\n+            }\n+        } catch (IllegalArgumentException iae) {\n+            if (!validCase) {\n+                System.out.println(\"Expected IAE thrown: \" + iae.getMessage());\n+            } else {\n+                throw new RuntimeException(\"Unexpected IAE thrown\");\n+            }\n+        }\n+    }\n+\n@@ -205,2 +240,1 @@\n-            throw new RuntimeException(\"Test Failed ! Expected IllegalArgumentException:\"\n-                                       + \" NOT thrown\");\n+            throw new RuntimeException(\"Test Failed ! Expected IAE NOT thrown\");\n@@ -208,2 +242,1 @@\n-            System.out.println(\"Expected IllegalArgumentException thrown: \"\n-                               + iae.getMessage());\n+            System.out.println(\"Expected IAE thrown: \" + iae.getMessage());\n","filename":"test\/jdk\/java\/awt\/color\/ICC_Profile\/ValidateICCHeaderData.java","additions":42,"deletions":9,"binary":false,"changes":51,"status":"modified"}]}