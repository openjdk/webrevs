{"files":[{"patch":"@@ -141,0 +141,1 @@\n+  const char* mode;\n@@ -143,1 +144,2 @@\n-      return CDSConfig::is_using_archive() ? \"interpreted mode, sharing\" : \"interpreted mode\";\n+      mode = \"interpreted mode\";\n+      break;\n@@ -145,6 +147,2 @@\n-      if (CDSConfig::is_using_archive()) {\n-        if (CompilationModeFlag::quick_only()) {\n-          return \"mixed mode, emulated-client, sharing\";\n-        } else {\n-          return \"mixed mode, sharing\";\n-         }\n+      if (CompilationModeFlag::quick_only()) {\n+        mode = \"mixed mode, emulated-client\";\n@@ -152,5 +150,1 @@\n-        if (CompilationModeFlag::quick_only()) {\n-          return \"mixed mode, emulated-client\";\n-        } else {\n-          return \"mixed mode\";\n-        }\n+        mode = \"mixed mode\";\n@@ -158,0 +152,1 @@\n+      break;\n@@ -160,1 +155,3 @@\n-         return CDSConfig::is_using_archive() ? \"compiled mode, emulated-client, sharing\" : \"compiled mode, emulated-client\";\n+        mode = \"compiled mode, emulated-client\";\n+      } else {\n+        mode = \"compiled mode\";\n@@ -162,1 +159,3 @@\n-      return CDSConfig::is_using_archive() ? \"compiled mode, sharing\" : \"compiled mode\";\n+      break;\n+    default:\n+      ShouldNotReachHere();\n@@ -164,2 +163,11 @@\n-  ShouldNotReachHere();\n-  return \"\";\n+\n+  const char* static_info = \", static\";\n+  const char* sharing_info = \", sharing\";\n+  size_t len = strlen(mode) + (is_vm_statically_linked() ? strlen(static_info) : 0) +\n+               (CDSConfig::is_using_archive() ? strlen(sharing_info) : 0) + 1;\n+  char* vm_info = NEW_C_HEAP_ARRAY(char, len, mtInternal);\n+  \/\/ jio_snprintf places null character in the last character.\n+  jio_snprintf(vm_info, len, \"%s%s%s\", mode,\n+               is_vm_statically_linked() ? static_info : \"\",\n+               CDSConfig::is_using_archive() ? sharing_info : \"\");\n+  return vm_info;\n","filename":"src\/hotspot\/share\/runtime\/abstract_vm_version.cpp","additions":24,"deletions":16,"binary":false,"changes":40,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -56,1 +56,1 @@\n-    static String VMType;\n+    static String VMType = null;\n@@ -64,8 +64,8 @@\n-        if (Platform.isServer()) {\n-            VMType = \"-server\";\n-        } else if (Platform.isClient()) {\n-            VMType = \"-client\";\n-        } else if (Platform.isMinimal()) {\n-            VMType = \"-minimal\";\n-        } else {\n-            VMType = null;\n+        if (!Platform.isStatic()) {\n+            if (Platform.isServer()) {\n+                VMType = \"-server\";\n+            } else if (Platform.isClient()) {\n+                VMType = \"-client\";\n+            } else if (Platform.isMinimal()) {\n+                VMType = \"-minimal\";\n+            }\n","filename":"test\/hotspot\/jtreg\/runtime\/CommandLine\/OptionsValidation\/common\/optionsvalidation\/JVMOptionsUtils.java","additions":10,"deletions":10,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -54,1 +54,1 @@\n-                \"isSlowDebugBuild\", \"hasSA\", \"isRoot\", \"isTieredSupported\",\n+                \"isStatic\", \"isSlowDebugBuild\", \"hasSA\", \"isRoot\", \"isTieredSupported\",\n","filename":"test\/lib-test\/jdk\/test\/lib\/TestMutuallyExclusivePlatformPredicates.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -73,0 +73,4 @@\n+    public static boolean isStatic() {\n+        return vmInfo.contains(\"static\");\n+    }\n+\n","filename":"test\/lib\/jdk\/test\/lib\/Platform.java","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -202,1 +202,3 @@\n-        finalOptions.add(CommandLineOptionTest.getVMTypeOption());\n+        if (!Platform.isStatic()) {\n+            finalOptions.add(CommandLineOptionTest.getVMTypeOption());\n+        }\n@@ -397,1 +399,3 @@\n-        finalOptions.add(CommandLineOptionTest.getVMTypeOption());\n+        if (!Platform.isStatic()) {\n+            finalOptions.add(CommandLineOptionTest.getVMTypeOption());\n+        }\n","filename":"test\/lib\/jdk\/test\/lib\/cli\/CommandLineOptionTest.java","additions":7,"deletions":3,"binary":false,"changes":10,"status":"modified"}]}