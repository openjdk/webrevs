{"files":[{"patch":"@@ -794,5 +794,4 @@\n-                return new ContentBuilder(\n-                    links.createLink(targetLink, label),\n-                    HtmlTree.SUP(links.createLink(targetLink.withFragment(htmlIds.forPreviewSection(packageElement).name()),\n-                                                  contents.previewMark))\n-                );\n+                return new ContentBuilder(links.createLink(targetLink, label),\n+                        HtmlTree.SUP(HtmlStyles.previewMark,\n+                                links.createLink(targetLink.withFragment(htmlIds.forPreviewSection(packageElement).name()),\n+                                        contents.previewMark)));\n@@ -803,4 +802,2 @@\n-                return new ContentBuilder(\n-                    label,\n-                    HtmlTree.SUP(contents.previewMark)\n-                );\n+                return new ContentBuilder(label,\n+                        HtmlTree.SUP(HtmlStyles.previewMark, contents.previewMark));\n@@ -838,5 +835,4 @@\n-                link = new ContentBuilder(\n-                        link,\n-                        HtmlTree.SUP(links.createLink(targetLink.withFragment(htmlIds.forPreviewSection(mdle).name()),\n-                                                      contents.previewMark))\n-                );\n+                link = new ContentBuilder(link,\n+                        HtmlTree.SUP(HtmlStyles.previewMark,\n+                                links.createLink(targetLink.withFragment(htmlIds.forPreviewSection(mdle).name()),\n+                                                      contents.previewMark)));\n@@ -847,4 +843,2 @@\n-            return new ContentBuilder(\n-                label,\n-                HtmlTree.SUP(contents.previewMark)\n-            );\n+            return new ContentBuilder(label,\n+                    HtmlTree.SUP(HtmlStyles.previewMark, contents.previewMark));\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/HtmlDocletWriter.java","additions":12,"deletions":18,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -46,0 +46,1 @@\n+import jdk.javadoc.internal.doclets.formats.html.markup.HtmlStyles;\n@@ -56,1 +57,0 @@\n-import jdk.javadoc.internal.html.HtmlTag;\n@@ -340,3 +340,4 @@\n-            content.add(HtmlTree.SUP(getSuperscript(fileName, typeElement,\n-                    m_writer.htmlIds.forPreviewSection(previewTarget),\n-                    m_writer.contents.previewMark)));\n+            content.add(HtmlTree.SUP(HtmlStyles.previewMark,\n+                    getSuperscript(fileName, typeElement,\n+                            m_writer.htmlIds.forPreviewSection(previewTarget),\n+                            m_writer.contents.previewMark)));\n@@ -347,3 +348,4 @@\n-            content.add(HtmlTree.SUP(getSuperscript(fileName, typeElement,\n-                    m_writer.htmlIds.forRestrictedSection(restrictedTarget),\n-                    m_writer.contents.restrictedMark)));\n+            content.add(HtmlTree.SUP(HtmlStyles.restrictedMark,\n+                    getSuperscript(fileName, typeElement,\n+                            m_writer.htmlIds.forRestrictedSection(restrictedTarget),\n+                            m_writer.contents.restrictedMark)));\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/HtmlLinkFactory.java","additions":9,"deletions":7,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -45,1 +45,0 @@\n-import java.util.stream.Collectors;\n@@ -617,2 +616,3 @@\n-                            HtmlTree.SUP(links.createLink(previewRequiresTransitiveId,\n-                                         contents.previewMark)));\n+                            HtmlTree.SUP(HtmlStyles.previewMark,\n+                                    links.createLink(previewRequiresTransitiveId,\n+                                            contents.previewMark)));\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/ModuleWriter.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -51,1 +51,0 @@\n-import jdk.javadoc.internal.html.HtmlTag;\n@@ -245,3 +244,4 @@\n-                     content.add(HtmlTree.SUP(writer.links.createLink(\n-                             configuration.htmlIds.forPreviewSection(typeElement),\n-                             configuration.contents.previewMark)));\n+                     content.add(HtmlTree.SUP(HtmlStyles.previewMark,\n+                             writer.links.createLink(\n+                                     configuration.htmlIds.forPreviewSection(typeElement),\n+                                     configuration.contents.previewMark)));\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/Signatures.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -690,0 +690,10 @@\n+    \/**\n+     * The class used for a {@code sup} element marking an element as preview feature.\n+     *\/\n+    previewMark,\n+\n+    \/**\n+     * The class used for a {@code sup} element marking a method as restricted.\n+     *\/\n+    restrictedMark,\n+\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/markup\/HtmlStyles.java","additions":10,"deletions":0,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-    \/* Background colors for various structural elements *\/\n+    \/* Background colors for various elements *\/\n@@ -37,0 +37,1 @@\n+    --mark-background-color: #f7f7f7;\n@@ -144,2 +145,1 @@\n-:not(h1, h2, h3, h4, h5, h6) > code,\n-:not(h1, h2, h3, h4, h5, h6) > tt {\n+:not(h1, h2, h3, h4, h5, h6, sup, sub, small, big) > :is(code, tt) {\n@@ -160,3 +160,0 @@\n-sup {\n-    font-size:8px;\n-}\n@@ -826,0 +823,13 @@\n+sup.preview-mark,\n+sup.restricted-mark {\n+    font-family: var(--code-font-family);\n+    font-weight: normal;\n+    font-size: 8px;\n+    background-color: var(--mark-background-color);\n+    padding: 1px;\n+    border-radius: 2px;\n+}\n+sup.preview-mark > a:link,\n+sup.restricted-mark > a:link {\n+    font-weight: normal;\n+}\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/stylesheet.css","additions":16,"deletions":6,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -1051,25 +1051,1 @@\n-     * Creates an HTML {@code SUP} element with the given content.\n-     *\n-     * @param body  the content\n-     * @return the element\n-     *\/\n-    public static HtmlTree SUP(Content body) {\n-        return new HtmlTree(HtmlTag.SUP)\n-                .add(body);\n-    }\n-\n-    \/**\n-     * Creates an HTML {@code TD} element with the given style and some content.\n-     *\n-     * @param style the style\n-     * @param body  the content\n-     * @return the element\n-     *\/\n-    public static HtmlTree TD(HtmlStyle style, Content body) {\n-        return new HtmlTree(HtmlTag.TD)\n-                .setStyle(style)\n-                .add(body);\n-    }\n-\n-    \/**\n-     * Creates an HTML {@code TH} element with the given style and scope, and some content.\n+     * Creates an HTML {@code SUP} element with the given style and content.\n@@ -1078,1 +1054,0 @@\n-     * @param scope the value for the {@code scope} attribute\n@@ -1082,2 +1057,2 @@\n-    public static HtmlTree TH(HtmlStyle style, String scope, Content body) {\n-        return new HtmlTree(HtmlTag.TH)\n+    public static HtmlTree SUP(HtmlStyle style, Content body) {\n+        return new HtmlTree(HtmlTag.SUP)\n@@ -1085,14 +1060,0 @@\n-                .put(HtmlAttr.SCOPE, scope)\n-                .add(body);\n-    }\n-\n-    \/**\n-     * Creates an HTML {@code TH} element with the given scope, and some content.\n-     *\n-     * @param scope the value for the {@code scope} attribute\n-     * @param body  the content\n-     * @return the element\n-     *\/\n-    public static HtmlTree TH(String scope, Content body) {\n-        return new HtmlTree(HtmlTag.TH)\n-                .put(HtmlAttr.SCOPE, scope)\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/html\/HtmlTree.java","additions":3,"deletions":42,"binary":false,"changes":45,"status":"modified"},{"patch":"@@ -367,1 +367,1 @@\n-                <a href=\"java.base\/p\/Foo.html#m(T)\">p.Foo.m<wbr>(T)<\/a><sup>\\\n+                <a href=\"java.base\/p\/Foo.html#m(T)\">p.Foo.m<wbr>(T)<\/a><sup class=\"preview-mark\">\\\n@@ -372,1 +372,1 @@\n-                <a href=\"java.base\/p\/Foo.html#m(p.Y)\">p.Foo.m<wbr>(T)<\/a><sup>\\\n+                <a href=\"java.base\/p\/Foo.html#m(p.Y)\">p.Foo.m<wbr>(T)<\/a><sup class=\"preview-mark\">\\\n@@ -378,1 +378,1 @@\n-                <a href=\"java.base\/p\/Foo.html#%3Cinit%3E(T)\">p.Foo<wbr>(T)<\/a><sup>\\\n+                <a href=\"java.base\/p\/Foo.html#%3Cinit%3E(T)\">p.Foo<wbr>(T)<\/a><sup class=\"preview-mark\">\\\n@@ -383,1 +383,1 @@\n-                <a href=\"java.base\/p\/Foo.html#%3Cinit%3E(p.Y)\">p.Foo<wbr>(T)<\/a><sup>\\\n+                <a href=\"java.base\/p\/Foo.html#%3Cinit%3E(p.Y)\">p.Foo<wbr>(T)<\/a><sup class=\"preview-mark\">\\\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testErasure\/TestErasure.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n- *           8331947 8281533\n+ *           8331947 8281533 8318416\n@@ -62,1 +62,4 @@\n-                \"<a href=\\\"\" + doc + \"java.base\/preview\/Core.html\\\" title=\\\"class or interface in preview\\\" class=\\\"external-link\\\">Core<\/a><sup><a href=\\\"\" + doc + \"java.base\/preview\/Core.html#preview-preview.Core\\\" title=\\\"class or interface in preview\\\" class=\\\"external-link\\\">PREVIEW<\/a>\");\n+                \"<a href=\\\"\" + doc + \"java.base\/preview\/Core.html\\\" title=\\\"class or interface in preview\\\" class=\"\n+                        + \"\\\"external-link\\\">Core<\/a><sup class=\\\"preview-mark\\\"><a href=\\\"\" + doc + \"java.base\/pr\"\n+                        + \"eview\/Core.html#preview-preview.Core\\\" title=\\\"class or interface in preview\\\" class=\\\"\"\n+                        + \"external-link\\\">PREVIEW<\/a>\");\n@@ -109,1 +112,3 @@\n-                    <div class=\"col-summary-item-name even-row-color package package-tab1\"><a href=\"java.base\/preview\/package-summary.html\">preview<\/a><sup><a href=\"java.base\/preview\/package-summary.html#preview-preview\">PREVIEW<\/a><\/sup><\/div>\n+                    <div class=\"col-summary-item-name even-row-color package package-tab1\"><a href=\"java.base\/prev\\\n+                    iew\/package-summary.html\">preview<\/a><sup class=\"preview-mark\"><a href=\"java.base\/preview\/pack\\\n+                    age-summary.html#preview-preview\">PREVIEW<\/a><\/sup><\/div>\n@@ -125,1 +130,3 @@\n-                    <div class=\"col-summary-item-name even-row-color record-class record-class-tab1\"><a href=\"java.base\/preview\/CoreRecord.html\" title=\"class in preview\">preview.CoreRecord<\/a><sup><a href=\"java.base\/preview\/CoreRecord.html#preview-preview.CoreRecord\">PREVIEW<\/a><\/sup><\/div>\n+                    <div class=\"col-summary-item-name even-row-color record-class record-class-tab1\"><a href=\"java\\\n+                    .base\/preview\/CoreRecord.html\" title=\"class in preview\">preview.CoreRecord<\/a><sup class=\"prev\\\n+                    iew-mark\"><a href=\"java.base\/preview\/CoreRecord.html#preview-preview.CoreRecord\">PREVIEW<\/a><\/sup><\/div>\n@@ -140,1 +147,3 @@\n-                    <div class=\"col-summary-item-name even-row-color method method-tab1\"><a href=\"java.base\/preview\/CoreRecordComponent.html#i()\">preview.CoreRecordComponent.i()<\/a><sup><a href=\"java.base\/preview\/CoreRecordComponent.html#preview-i()\">PREVIEW<\/a><\/sup><\/div>\n+                    <div class=\"col-summary-item-name even-row-color method method-tab1\"><a href=\"java.base\/previe\\\n+                    w\/CoreRecordComponent.html#i()\">preview.CoreRecordComponent.i()<\/a><sup class=\"preview-mark\"><\\\n+                    a href=\"java.base\/preview\/CoreRecordComponent.html#preview-i()\">PREVIEW<\/a><\/sup><\/div>\n@@ -163,4 +172,4 @@\n-                    ss in preview\"><code>CoreRecord<\/code><\/a><sup><a href=\"CoreRecord.html#preview\\\n-                    -preview.CoreRecord\">PREVIEW<\/a><\/sup>, <a href=\"CoreRecord.html\" title=\"class \\\n-                    in preview\"><code>core record<\/code><\/a><sup><a href=\"CoreRecord.html#preview-p\\\n-                    review.CoreRecord\">PREVIEW<\/a><\/sup>,\n+                    ss in preview\"><code>CoreRecord<\/code><\/a><sup class=\"preview-mark\"><a href=\"Co\\\n+                    reRecord.html#preview-preview.CoreRecord\">PREVIEW<\/a><\/sup>, <a href=\"CoreRecor\\\n+                    d.html\" title=\"class in preview\"><code>core record<\/code><\/a><sup class=\"previe\\\n+                    w-mark\"><a href=\"CoreRecord.html#preview-preview.CoreRecord\">PREVIEW<\/a><\/sup>,\n@@ -171,2 +180,2 @@\n-                    \/a><sup><a href=\"CoreRecord.html#preview-preview.CoreRecord\">PREVIEW<\/a><\/sup><\\\n-                    \/li>\n+                    \/a><sup class=\"preview-mark\"><a href=\"CoreRecord.html#preview-preview.CoreRecor\\\n+                    d\">PREVIEW<\/a><\/sup><\/li>\n@@ -191,1 +200,3 @@\n-                    \"title=\\\"class or interface in java.util\\\" class=\\\"external-link\\\">List<\/a>&lt;<a href=\\\"API.html\\\" title=\\\"class in api\\\">API<\/a><sup><a href=\\\"#preview-api.API\\\">PREVIEW<\/a><\/sup>&gt;\");\n+                    \"title=\\\"class or interface in java.util\\\" class=\\\"external-link\\\">List<\/a>&lt;<a href=\\\"API.h\"\n+                            + \"tml\\\" title=\\\"class in api\\\">API<\/a><sup class=\\\"preview-mark\\\"><a href=\\\"#preview-\"\n+                            + \"api.API\\\">PREVIEW<\/a><\/sup>&gt;\");\n@@ -193,3 +204,6 @@\n-                    \"<a href=\\\"API.html#test()\\\"><code>API.test()<\/code><\/a><sup><a href=\\\"API.html#preview-api.API\\\">PREVIEW<\/a><\/sup>\",\n-                    \"<a href=\\\"API.html#testNoPreviewInSig()\\\"><code>API.testNoPreviewInSig()<\/code><\/a><sup><a href=\\\"API.html#preview-api.API\\\">PREVIEW<\/a><\/sup>\",\n-                    \"<a href=\\\"API3.html#test()\\\"><code>API3.test()<\/code><\/a><sup><a href=\\\"API3.html#preview-test()\\\">PREVIEW<\/a><\/sup>\");\n+                    \"<a href=\\\"API.html#test()\\\"><code>API.test()<\/code><\/a><sup class=\\\"preview-mark\\\"><a href=\\\"\"\n+                            + \"API.html#preview-api.API\\\">PREVIEW<\/a><\/sup>\",\n+                    \"<a href=\\\"API.html#testNoPreviewInSig()\\\"><code>API.testNoPreviewInSig()<\/code><\/a><sup class\"\n+                            + \"=\\\"preview-mark\\\"><a href=\\\"API.html#preview-api.API\\\">PREVIEW<\/a><\/sup>\",\n+                    \"<a href=\\\"API3.html#test()\\\"><code>API3.test()<\/code><\/a><sup class=\\\"preview-mark\\\"><a href=\"\n+                            + \"\\\"API3.html#preview-test()\\\">PREVIEW<\/a><\/sup>\");\n@@ -197,1 +211,2 @@\n-                    \"<div class=\\\"block\\\"><a href=\\\"#test()\\\"><code>test()<\/code><\/a><sup><a href=\\\"#preview-test()\\\">PREVIEW<\/a><\/sup><\/div>\");\n+                    \"<div class=\\\"block\\\"><a href=\\\"#test()\\\"><code>test()<\/code><\/a><sup class=\\\"preview-mark\\\"><\"\n+                            + \"a href=\\\"#preview-test()\\\">PREVIEW<\/a><\/sup><\/div>\");\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testPreview\/TestPreview.java","additions":31,"deletions":16,"binary":false,"changes":47,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n- * @bug 8316972 8325217\n+ * @bug 8316972 8325217 8318416\n@@ -95,2 +95,2 @@\n-                <li><a href=\"#restrictedMethod()\"><code>restrictedMethod()<\/code><\/a><sup><a href=\"\\\n-                #restricted-restrictedMethod()\">RESTRICTED<\/a><\/sup><\/li>\n+                <li><a href=\"#restrictedMethod()\"><code>restrictedMethod()<\/code><\/a><sup class=\"re\\\n+                stricted-mark\"><a href=\"#restricted-restrictedMethod()\">RESTRICTED<\/a><\/sup><\/li>\n@@ -98,2 +98,3 @@\n-                <sup><a href=\"#preview-restrictedPreviewMethod()\">PREVIEW<\/a><\/sup>&nbsp;<sup><a hr\\\n-                ef=\"#restricted-restrictedPreviewMethod()\">RESTRICTED<\/a><\/sup><\/li>\"\"\",\n+                <sup class=\"preview-mark\"><a href=\"#preview-restrictedPreviewMethod()\">PREVIEW<\/a><\\\n+                \/sup>&nbsp;<sup class=\"restricted-mark\"><a href=\"#restricted-restrictedPreviewMetho\\\n+                d()\">RESTRICTED<\/a><\/sup><\/li>\"\"\",\n@@ -160,2 +161,2 @@\n-                hod()\">pkg.I.restrictedMethod()<\/a><sup><a href=\"pkg\/I.html#restricted-restrictedMe\\\n-                thod()\">RESTRICTED<\/a><\/sup><\/div>\n+                hod()\">pkg.I.restrictedMethod()<\/a><sup class=\"restricted-mark\"><a href=\"pkg\/I.html\\\n+                #restricted-restrictedMethod()\">RESTRICTED<\/a><\/sup><\/div>\n@@ -166,3 +167,4 @@\n-                iewMethod()\">pkg.I.restrictedPreviewMethod()<\/a><sup><a href=\"pkg\/I.html#preview-re\\\n-                strictedPreviewMethod()\">PREVIEW<\/a><\/sup>&nbsp;<sup><a href=\"pkg\/I.html#restricted\\\n-                -restrictedPreviewMethod()\">RESTRICTED<\/a><\/sup><\/div>\n+                iewMethod()\">pkg.I.restrictedPreviewMethod()<\/a><sup class=\"preview-mark\"><a href=\"\\\n+                pkg\/I.html#preview-restrictedPreviewMethod()\">PREVIEW<\/a><\/sup>&nbsp;<sup class=\"re\\\n+                stricted-mark\"><a href=\"pkg\/I.html#restricted-restrictedPreviewMethod()\">RESTRICTED\\\n+                <\/a><\/sup><\/div>\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testRestricted\/TestRestricted.java","additions":12,"deletions":10,"binary":false,"changes":22,"status":"modified"}]}