[{"commit":{"message":"8373794: Move nmethod header from CodeCache:\n\nnmethod objects in the CodeCache have the following layout:\n\n| CodeBlob header | NMethod header | Constants | MainCode | StubCode\n| Data\/oops |\n\nAlthough mutable and immutable metadata have already been moved out of\nthe code cache by JDK-8343789 and JDK-8331087 respectively, the\nembedded `nmethod` header fields still occupy ~160 B (with the\n`CodeBlob` header adding another 64 B). In JDK25 the total header\nfootprint is 224 B. This space is reserved inside executable memory,\nwhich decreases overall executable code density.\n\nThis patch relocates the `nmethod` header to a C-heap-allocated\nstructure and keeps only 8-byte pointer to that header in the\nCodeCache. The resulting layout is:\n\n| CodeBlob header | Ptr to NMethodHeader | Constants | MainCode\n| StubCode | Data\/oops |\n\nThis change reduces the size of the CodeCache-resident header from 224\nB to 72 B (64 B `CodeBlob` header + 8 B pointer), achieving roughly a\n3x reduction in header footprint.\n\nThis change follows the direction established by JDK-7072317,\nJDK-8331087 and JDK-8343789."},"files":[{"filename":"src\/hotspot\/cpu\/aarch64\/templateTable_aarch64.cpp"},{"filename":"src\/hotspot\/cpu\/arm\/templateTable_arm.cpp"},{"filename":"src\/hotspot\/cpu\/ppc\/templateTable_ppc_64.cpp"},{"filename":"src\/hotspot\/cpu\/riscv\/templateTable_riscv.cpp"},{"filename":"src\/hotspot\/cpu\/s390\/templateTable_s390.cpp"},{"filename":"src\/hotspot\/cpu\/x86\/templateTable_x86.cpp"},{"filename":"src\/hotspot\/share\/code\/codeBlob.cpp"},{"filename":"src\/hotspot\/share\/code\/codeBlob.hpp"},{"filename":"src\/hotspot\/share\/code\/nmethod.cpp"},{"filename":"src\/hotspot\/share\/code\/nmethod.hpp"},{"filename":"src\/hotspot\/share\/jvmci\/vmStructs_jvmci.cpp"},{"filename":"src\/hotspot\/share\/runtime\/deoptimization.cpp"},{"filename":"src\/hotspot\/share\/runtime\/vmStructs.cpp"},{"filename":"src\/jdk.hotspot.agent\/share\/classes\/sun\/jvm\/hotspot\/code\/NMethod.java"},{"filename":"src\/jdk.internal.vm.ci\/share\/classes\/jdk\/vm\/ci\/hotspot\/HotSpotResolvedJavaMethodImpl.java"},{"filename":"src\/jdk.internal.vm.ci\/share\/classes\/jdk\/vm\/ci\/hotspot\/HotSpotVMConfig.java"},{"filename":"test\/hotspot\/jtreg\/serviceability\/sa\/ClhsdbField.java"}],"sha":"bbb3711df942ec48b0b0a6eeb287f5364afa9098"}]