{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -44,2 +44,2 @@\n- * Change file permission for out-of-the-box management an do test used by\n- * PasswordFilePermissionTest and SSLConfigFilePermissionTest tests\n+ * Change file permission for out-of-the-box management, and test.\n+ * Used by PasswordFilePermissionTest and SSLConfigFilePermissionTest tests.\n@@ -143,1 +143,3 @@\n-        if (doTest() != 0) {\n+        int e = doTest();\n+        if (e != 0) {\n+            System.out.println(\"FAILURE: expected exit code 0, got: \" + e);\n@@ -149,1 +151,1 @@\n-     * Test 1 - SSL config file is secure - VM should start\n+     * Test 2 - SSL config file is NOT secure - VM should not start\n@@ -157,1 +159,3 @@\n-        if (doTest() == 0) {\n+        int e = doTest();\n+        if (e == 0) {\n+            System.out.println(\"FAILURE: expected exit code non-zero, got: \" + e);\n@@ -175,1 +179,0 @@\n-\n@@ -184,4 +187,5 @@\n-            if ((output.getExitValue() == 0)  ||\n-                !output.getOutput().contains(\"Exception thrown by the agent : \" +\n-                        \"java.rmi.server.ExportException: Port already in use\")) {\n-                return output.getExitValue();\n+            if (output.getOutput().contains(\"Exception thrown by the agent: java.rmi.server.ExportException: Port already in use\")) {\n+                if (i < MAX_GET_FREE_PORT_TRIES - 1) {\n+                    System.out.println(\"Retrying...\");\n+                    continue;\n+                }\n@@ -189,0 +193,2 @@\n+            \/\/ Fail on too many port failures, and all other startup failures.\n+            return output.getExitValue();\n@@ -190,1 +196,0 @@\n-\n","filename":"test\/jdk\/sun\/management\/jmxremote\/bootstrap\/AbstractFilePermissionTest.java","additions":17,"deletions":12,"binary":false,"changes":29,"status":"modified"}]}