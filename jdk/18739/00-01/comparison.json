{"files":[{"patch":"@@ -29,1 +29,0 @@\n-import java.security.*;\n@@ -32,0 +31,2 @@\n+import sun.security.action.GetPropertyAction;\n+\n@@ -42,3 +43,12 @@\n-    static final int MAX_EVENT_LIST_SIZE =\n-        AccessController.doPrivileged((PrivilegedAction<Integer>) () ->\n-                Integer.getInteger(\"sun.nio.fs.maxWatchEvents\", 512));\n+    static final int MAX_EVENT_LIST_SIZE;\n+    static {\n+        String rawValue = GetPropertyAction.privilegedGetProperty(\n+            \"jdk.nio.file.maxWatchEvents\", \"512\");\n+        int intValue;\n+        try {\n+            intValue = Integer.decode(rawValue);\n+        } catch (NumberFormatException e) {\n+            intValue = 512;\n+        }\n+        MAX_EVENT_LIST_SIZE = intValue;\n+    }\n","filename":"src\/java.base\/share\/classes\/sun\/nio\/fs\/AbstractWatchKey.java","additions":14,"deletions":4,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -30,1 +30,2 @@\n- * @run main\/othervm -Dsun.nio.fs.maxWatchEvents=700 LotsOfEntries 600 pass\n+ * @run main\/othervm -Djdk.nio.file.maxWatchEvents=invalid LotsOfEntries 600 fail\n+ * @run main\/othervm -Djdk.nio.file.maxWatchEvents=700 LotsOfEntries 600 pass\n","filename":"test\/jdk\/java\/nio\/file\/WatchService\/LotsOfEntries.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"}]}