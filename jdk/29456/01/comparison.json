{"files":[{"patch":"@@ -66,1 +66,1 @@\n-  volatile bool           _is_preempted;\n+  Atomic<bool>            _is_preempted;\n@@ -91,1 +91,1 @@\n-        AtomicAccess::store(&_is_preempted, true);\n+        _is_preempted.store_relaxed(true);\n@@ -99,1 +99,1 @@\n-    return !AtomicAccess::load(&_is_preempted);\n+    return !_is_preempted.load_relaxed();\n@@ -150,3 +150,3 @@\n-  AtomicAccess::store(&_promoted_expended, static_cast<size_t>(0));\n-  AtomicAccess::store(&_promotion_failure_count, static_cast<size_t>(0));\n-  AtomicAccess::store(&_promotion_failure_words, static_cast<size_t>(0));\n+  _promoted_expended.store_relaxed(0);\n+  _promotion_failure_count.store_relaxed(0);\n+  _promotion_failure_words.store_relaxed(0);\n@@ -158,1 +158,1 @@\n-  return AtomicAccess::add(&_promoted_expended, increment);\n+  return _promoted_expended.add_then_fetch(increment);\n@@ -162,1 +162,1 @@\n-  return AtomicAccess::sub(&_promoted_expended, decrement);\n+  return _promoted_expended.sub_then_fetch(decrement);\n@@ -166,1 +166,1 @@\n-  return AtomicAccess::load(&_promoted_expended);\n+  return _promoted_expended.load_relaxed();\n@@ -585,2 +585,2 @@\n-  AtomicAccess::inc(&_promotion_failure_count);\n-  AtomicAccess::add(&_promotion_failure_words, size);\n+  _promotion_failure_count.add_then_fetch(1UL);\n+  _promotion_failure_words.and_then_fetch(size);\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahOldGeneration.cpp","additions":11,"deletions":11,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -67,1 +67,1 @@\n-  size_t _promoted_expended;\n+  Atomic<size_t> _promoted_expended;\n@@ -81,2 +81,2 @@\n-  size_t _promotion_failure_count;\n-  size_t _promotion_failure_words;\n+  Atomic<size_t> _promotion_failure_count;\n+  Atomic<size_t> _promotion_failure_words;\n@@ -129,2 +129,2 @@\n-  size_t get_promotion_failed_count() const { return AtomicAccess::load(&_promotion_failure_count); }\n-  size_t get_promotion_failed_words() const { return AtomicAccess::load(&_promotion_failure_words); }\n+  size_t get_promotion_failed_count() const { return _promotion_failure_count.load_relaxed(); }\n+  size_t get_promotion_failed_words() const { return _promotion_failure_words.load_relaxed(); }\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahOldGeneration.hpp","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"}]}