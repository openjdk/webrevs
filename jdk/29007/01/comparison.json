{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2025, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,2 +27,0 @@\n-import static jdk.jpackage.internal.util.XmlUtils.initDocumentBuilder;\n-\n@@ -53,1 +51,1 @@\n-        final var plistReader = new PListReader(initDocumentBuilder().parse(Files.newInputStream(infoPListFile)));\n+        final var plistReader = new PListReader(Files.readAllBytes(infoPListFile));\n","filename":"src\/jdk.jpackage\/macosx\/classes\/jdk\/jpackage\/internal\/AppImageInfoPListFile.java","additions":2,"deletions":4,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,1 +31,0 @@\n-import static jdk.jpackage.internal.cli.StandardAppImageFileOption.LAUNCHER_AS_SERVICE;\n@@ -33,0 +32,1 @@\n+import static jdk.jpackage.internal.cli.StandardAppImageFileOption.LAUNCHER_AS_SERVICE;\n@@ -36,0 +36,1 @@\n+import java.io.ByteArrayInputStream;\n@@ -165,1 +166,17 @@\n-            final Document doc = XmlUtils.initDocumentBuilder().parse(Files.newInputStream(appImageFilePath));\n+            \/\/\n+            \/\/ Use javax.xml.parsers.DocumentBuilder#parse(java.io.InputStream).\n+            \/\/ Don't use javax.xml.parsers.DocumentBuilder#parse(java.io.File) as this will introduce\n+            \/\/ dependency on how the XML parser reports filesystem I\/O errors.\n+            \/\/ E.g.: the default JDK XML parser throws java.io.FileNotFoundException if the supplied\n+            \/\/ directory is not found and throws org.xml.sax.SAXParseException if the supplied file is a directory.\n+            \/\/ Another DOM XML parser (a different version of Xerces?) may behave differently.\n+            \/\/\n+            \/\/ The use of javax.xml.parsers.DocumentBuilder#parse(java.io.InputStream) eliminates\n+            \/\/ differences in how XML parsers handle file system I\/O errors.\n+            \/\/ Filesystem I\/O is delegated to java.nio.file.Files#readAllBytes(java.nio.file.Path),\n+            \/\/ XML parser deals with the byte stream in memory and the error handling code\n+            \/\/ doesn't depend on how XML parser reports filesystem I\/O errors because\n+            \/\/ it reads data from memory, not from the filesystem.\n+            \/\/\n+            final Document doc = XmlUtils.initDocumentBuilder().parse(\n+                    new ByteArrayInputStream(Files.readAllBytes(appImageFilePath)));\n","filename":"src\/jdk.jpackage\/share\/classes\/jdk\/jpackage\/internal\/AppImageFile.java","additions":20,"deletions":3,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2025, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -38,1 +38,0 @@\n-import javax.xml.parsers.ParserConfigurationException;\n@@ -314,1 +313,1 @@\n-    public PListReader(byte[] xmlData) throws ParserConfigurationException, SAXException, IOException {\n+    public PListReader(byte[] xmlData) throws SAXException, IOException {\n","filename":"src\/jdk.jpackage\/share\/classes\/jdk\/jpackage\/internal\/util\/PListReader.java","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2024, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2024, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,1 +31,0 @@\n-import java.nio.file.Files;\n@@ -135,1 +134,1 @@\n-                    Files.newInputStream(getPathInAppImage(appImageDir)));\n+                    getPathInAppImage(appImageDir).toFile());\n","filename":"test\/jdk\/tools\/jpackage\/helpers\/jdk\/jpackage\/test\/AppImageFile.java","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2025, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -42,1 +42,0 @@\n-import javax.xml.parsers.ParserConfigurationException;\n@@ -370,1 +369,1 @@\n-    private void verifyMacEntitlements(JPackageCommand cmd) throws ParserConfigurationException, SAXException, IOException {\n+    private void verifyMacEntitlements(JPackageCommand cmd) throws SAXException, IOException {\n@@ -460,2 +459,4 @@\n-                var bytes = ResourceLocator.class.getResourceAsStream(resourceName).readAllBytes();\n-                return new PListReader(bytes).toMap(true);\n+                try (var in = ResourceLocator.class.getResourceAsStream(resourceName)) {\n+                    var bytes = in.readAllBytes();\n+                    return new PListReader(bytes).toMap(true);\n+                }\n","filename":"test\/jdk\/tools\/jpackage\/helpers\/jdk\/jpackage\/test\/LauncherVerifier.java","additions":6,"deletions":5,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2021, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2021, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -67,2 +67,1 @@\n-        org.w3c.dom.Document doc\n-                = b.parse(Files.newInputStream(distributionFile));\n+        org.w3c.dom.Document doc = b.parse(distributionFile.toFile());\n","filename":"test\/jdk\/tools\/jpackage\/macosx\/HostArchPkgTest.java","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -183,3 +183,2 @@\n-            Document doc = XmlUtils.initDocumentBuilder().parse(\n-                    Files.newInputStream(TKit.SRC_ROOT.resolve(\n-                            \"windows\/classes\/jdk\/jpackage\/internal\/resources\/main.wxs\")));\n+            Document doc = XmlUtils.initDocumentBuilder().parse(TKit.SRC_ROOT.resolve(\n+                    \"windows\/classes\/jdk\/jpackage\/internal\/resources\/main.wxs\").toFile());\n","filename":"test\/jdk\/tools\/jpackage\/windows\/WinLongVersionTest.java","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"}]}