{"files":[{"patch":"@@ -63,0 +63,3 @@\n+    final Map<PackageElement, List<Element>> pkgToSubclassTypeParameter;\n+    final Map<PackageElement, List<Element>> pkgToSubinterfaceTypeParameter;\n+    final Map<PackageElement, List<Element>> pkgToImplementsTypeParameter;\n@@ -108,0 +111,3 @@\n+        this.pkgToSubclassTypeParameter = pkgDivide(mapper.classToSubclassTypeParam);\n+        this.pkgToSubinterfaceTypeParameter = pkgDivide(mapper.classToSubinterfaceTypeParam);\n+        this.pkgToImplementsTypeParameter = pkgDivide(mapper.classToImplementsTypeParam);\n@@ -341,0 +347,9 @@\n+        classSubWriter.addUseInfo(pkgToSubclassTypeParameter.get(pkg),\n+                contents.getContent(\"doclet.ClassUse_SubclassTypeParameter\", classLink,\n+                pkgLink), content);\n+        classSubWriter.addUseInfo(pkgToSubinterfaceTypeParameter.get(pkg),\n+                contents.getContent(\"doclet.ClassUse_SubinterfaceTypeParameter\", classLink,\n+                pkgLink), content);\n+        classSubWriter.addUseInfo(pkgToImplementsTypeParameter.get(pkg),\n+                contents.getContent(\"doclet.ClassUse_ImplementsTypeParameter\", classLink,\n+                pkgLink), content);\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/ClassUseWriter.java","additions":15,"deletions":0,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2010, 2022, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2010, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -283,1 +283,2 @@\n-    as A, methods that return A, and methods and constructors with parameters of type A.  \\\n+    as A, methods that return A, methods and constructors with parameters of type A, and \\\n+    subclasses with parameters of type A.  \\\n@@ -383,0 +384,3 @@\n+doclet.ClassUse_SubclassTypeParameter=Subclasses with type arguments of type {0} in {1}\n+doclet.ClassUse_SubinterfaceTypeParameter=Subinterfaces with type arguments of type {0} in {1}\n+doclet.ClassUse_ImplementsTypeParameter=Classes in {1} that implement interfaces with type arguments of type {0}\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/standard.properties","additions":6,"deletions":2,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -95,1 +95,16 @@\n-    public Map<TypeElement, List<TypeElement>> classToImplementingClass = new HashMap<>();\n+    public final Map<TypeElement, List<TypeElement>> classToImplementingClass = new HashMap<>();\n+\n+    \/**\n+     * Mapping of TypeElements to list of TypeElements which uses this class in a superclass type parameter\n+     *\/\n+    public final Map<TypeElement, List<TypeElement>> classToSubclassTypeParam = new HashMap<>();\n+\n+    \/**\n+     * Mapping of TypeElements to list of TypeElements which uses this class in a superclass type parameter\n+     *\/\n+    public final Map<TypeElement, List<TypeElement>> classToSubinterfaceTypeParam = new HashMap<>();\n+\n+    \/**\n+     * Mapping of TypeElements to list of TypeElements which uses this interface in a superinterface type parameter\n+     *\/\n+    public final Map<TypeElement, List<TypeElement>> classToImplementsTypeParam = new HashMap<>();\n@@ -217,0 +232,12 @@\n+            mapTypeParameters(classToSubclassTypeParam, aClass.getSuperclass(), aClass);\n+\n+            if (utils.isInterface(aClass)) {\n+                for (var superinterface : aClass.getInterfaces()) {\n+                    mapTypeParameters(classToSubinterfaceTypeParam, superinterface, aClass);\n+                }\n+            } else {\n+                for (var superinterface : aClass.getInterfaces()) {\n+                    mapTypeParameters(classToImplementsTypeParam, superinterface, aClass);\n+                }\n+            }\n+\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/util\/ClassUseMapper.java","additions":29,"deletions":2,"binary":false,"changes":31,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2002, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2002, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,1 +27,1 @@\n- *      8182765 8196202 8202626 8261976\n+ *      8182765 8196202 8202626 8261976 8323698\n@@ -29,1 +29,1 @@\n- * @library ..\/..\/lib\n+ * @library \/tools\/lib ..\/..\/lib\n@@ -36,0 +36,5 @@\n+import toolbox.ToolBox;\n+\n+import java.io.IOException;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n@@ -44,0 +49,2 @@\n+    private final ToolBox tb = new ToolBox();\n+\n@@ -194,0 +201,79 @@\n+\n+    @Test\n+    public void testSuperclassAndInterfaceTypeArgument(Path base) throws IOException {\n+        Path src = base.resolve(\"src\");\n+\n+        Files.createDirectories(src);\n+        tb.writeJavaFiles(src,\n+                \"\"\"\n+                    public class One {}\n+                    \"\"\",\n+                \"\"\"\n+                    import java.util.*;\n+                    public class Two extends ArrayList<One> implements Comparator<One> {\n+                    }\n+                    \"\"\",\n+                \"\"\"\n+                    import java.util.*;\n+                    public interface Three extends Comparator<One> {\n+                    }\n+                    \"\"\");\n+\n+        javadoc(\n+                \"-use\",\n+                \"-d\", base.resolve(\"out\").toString(),\n+                src.resolve(\"One.java\").toString(),\n+                src.resolve(\"Two.java\").toString(),\n+                src.resolve(\"Three.java\").toString()\n+        );\n+        checkExit(Exit.OK);\n+\n+        checkOrder(\"class-use\/One.html\",\n+                \"\"\"\n+                    <div class=\"caption\"><span>Subclasses with type arguments of \\\n+                    type <a href=\"..\/One.html\" title=\"class in Unnamed Package\">One<\/a> \\\n+                    in <a href=\"..\/package-summary.html\">Unnamed Package<\/a><\/span><\/div>\n+                    \"\"\",\n+                \"\"\"\n+                    <div class=\"summary-table three-column-summary\">\n+                    <div class=\"table-header col-first\">Modifier and Type<\/div>\n+                    <div class=\"table-header col-second\">Class<\/div>\n+                    <div class=\"table-header col-last\">Description<\/div>\n+                    <div class=\"col-first even-row-color\"><code>class&nbsp;<\/code><\/div>\n+                    <div class=\"col-second even-row-color\"><code><a href=\"..\/Two.html\" class=\"type-name-link\" \\\n+                    title=\"class in Unnamed Package\">Two<\/a><\/code><\/div>\n+                    <div class=\"col-last even-row-color\">&nbsp;<\/div>\n+                    <\/div>\n+                    \"\"\",\n+                \"\"\"\n+                    <div class=\"caption\"><span>Subinterfaces with type arguments of \\\n+                    type <a href=\"..\/One.html\" title=\"class in Unnamed Package\">One<\/a> \\\n+                    in <a href=\"..\/package-summary.html\">Unnamed Package<\/a><\/span><\/div>\n+                    \"\"\",\n+                \"\"\"\n+                    <div class=\"summary-table three-column-summary\">\n+                    <div class=\"table-header col-first\">Modifier and Type<\/div>\n+                    <div class=\"table-header col-second\">Interface<\/div>\n+                    <div class=\"table-header col-last\">Description<\/div>\n+                    <div class=\"col-first even-row-color\"><code>interface&nbsp;<\/code><\/div>\n+                    <div class=\"col-second even-row-color\"><code><a href=\"..\/Three.html\" class=\"type-name-link\" title=\"interface in Unnamed Package\">Three<\/a><\/code><\/div>\n+                    <div class=\"col-last even-row-color\">&nbsp;<\/div>\n+                    <\/div>\n+                    \"\"\",\n+                \"\"\"\n+                    <div class=\"caption\"><span>Classes in <a href=\"..\/package-summary.html\">\\\n+                    Unnamed Package<\/a> that implement interfaces with type arguments of type \\\n+                    <a href=\"..\/One.html\" title=\"class in Unnamed Package\">One<\/a><\/span><\/div>\n+                    \"\"\",\n+                \"\"\"\n+                    <div class=\"summary-table three-column-summary\">\n+                    <div class=\"table-header col-first\">Modifier and Type<\/div>\n+                    <div class=\"table-header col-second\">Class<\/div>\n+                    <div class=\"table-header col-last\">Description<\/div>\n+                    <div class=\"col-first even-row-color\"><code>class&nbsp;<\/code><\/div>\n+                    <div class=\"col-second even-row-color\"><code><a href=\"..\/Two.html\" class=\"type-name-link\" \\\n+                    title=\"class in Unnamed Package\">Two<\/a><\/code><\/div>\n+                    <div class=\"col-last even-row-color\">&nbsp;<\/div>\n+                    <\/div>\n+                    \"\"\");\n+    }\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testUseOption\/TestUseOption.java","additions":89,"deletions":3,"binary":false,"changes":92,"status":"modified"}]}