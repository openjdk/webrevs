{"files":[{"patch":"@@ -937,1 +937,1 @@\n-         * We can call \"drawChars\" on each one of them in turn, setting\n+         * We can call \"drawString\" on each one of them in turn, setting\n@@ -945,0 +945,4 @@\n+         * If we do use \"drawString\" on each character, we need to use a\n+         * font without translation transform, since the font translation\n+         * transform will already be reflected in the glyph positions, and\n+         * we do not want to apply the translation twice.\n@@ -950,0 +954,9 @@\n+        Font font2 = font;\n+        if (font.isTransformed()) {\n+            AffineTransform t = font.getTransform();\n+            if ((t.getType() & AffineTransform.TYPE_TRANSLATION) != 0) {\n+                t.setTransform(t.getScaleX(), t.getShearY(), t.getShearX(), t.getScaleY(), 0, 0);\n+                font2 = font.deriveFont(t);\n+            }\n+        }\n+\n@@ -953,1 +966,1 @@\n-                       font, gvFrc, 0f);\n+                       font2, gvFrc, 0f);\n","filename":"src\/java.desktop\/share\/classes\/sun\/print\/PathGraphics.java","additions":15,"deletions":2,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -529,0 +529,1 @@\n+        double devangle = Math.atan2(deviceTransform.getShearY(), deviceTransform.getScaleY());\n@@ -535,1 +536,1 @@\n-        double advanceScaleY = Math.sqrt(pty.x*pty.x+pty.y*pty.y);\n+        double advanceScaleY = -Math.sqrt(pty.x*pty.x+pty.y*pty.y);\n@@ -540,1 +541,1 @@\n-                    scaledFontSizeY, iangle, awScale,\n+                    scaledFontSizeY, iangle, devangle, awScale,\n@@ -571,1 +572,1 @@\n-                        scaledFontSizeY, iangle, awScale,\n+                        scaledFontSizeY, iangle, devangle, awScale,\n@@ -634,0 +635,1 @@\n+        \/* This glyph position includes the font's transform translation, if any *\/\n@@ -638,12 +640,0 @@\n-\n-        \/* Already have the translate from the deviceTransform,\n-         * but the font may have a translation component too.\n-         *\/\n-        if (font.isTransformed()) {\n-            AffineTransform fontTx = font.getTransform();\n-            float translateX = (float)(fontTx.getTranslateX());\n-            float translateY = (float)(fontTx.getTranslateY());\n-            if (Math.abs(translateX) < 0.00001) translateX = 0f;\n-            if (Math.abs(translateY) < 0.00001) translateY = 0f;\n-            userpos.x += translateX; userpos.y += translateY;\n-        }\n@@ -694,0 +684,1 @@\n+        double devangle = Math.atan2(deviceTransform.getShearY(), deviceTransform.getScaleY());\n@@ -700,1 +691,1 @@\n-        double advanceScaleY = Math.sqrt(pty.x*pty.x+pty.y*pty.y);\n+        double advanceScaleY = -Math.sqrt(pty.x*pty.x+pty.y*pty.y);\n@@ -760,0 +751,2 @@\n+        advanceTransform.rotate(devangle); \/\/ radians\n+        advanceTransform.rotate(iangle * Math.PI \/ 1800.0); \/\/ 1\/10 degrees -> radians\n@@ -836,1 +829,2 @@\n-                          float deviceSize, int rotation, float awScale,\n+                          float deviceSize, int iangle, double devangle,\n+                          float awScale,\n@@ -844,2 +838,1 @@\n-         boolean setFont = wPrinterJob.setFont(family, deviceSize, style,\n-                                               rotation, awScale);\n+         boolean setFont = wPrinterJob.setFont(family, deviceSize, style, iangle, awScale);\n@@ -879,0 +872,2 @@\n+             advanceTransform.rotate(devangle); \/\/ radians\n+             advanceTransform.rotate(iangle * Math.PI \/ 1800.0); \/\/ 1\/10 degrees -> radians\n","filename":"src\/java.desktop\/windows\/classes\/sun\/awt\/windows\/WPathGraphics.java","additions":14,"deletions":19,"binary":false,"changes":33,"status":"modified"},{"patch":"@@ -809,1 +809,1 @@\n-java\/awt\/print\/PrinterJob\/PrintTextTest.java 8148334 generic-all\n+java\/awt\/print\/PrinterJob\/PrintTextTest.java 8148334 macosx-all\n","filename":"test\/jdk\/ProblemList.txt","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n- * @bug 6425068 7157659 8132890\n+ * @bug 6425068 7157659 8029204 8132890 8148334 8344637\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintTextTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}