{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -46,0 +46,1 @@\n+ * @requires test.thread.factory != \"Virtual\"\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/monitoring\/MemoryUsage\/from\/from001\/TestDescription.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -46,0 +46,1 @@\n+ * @requires test.thread.factory != \"Virtual\"\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/monitoring\/ThreadInfo\/from_c\/from_c001\/TestDescription.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -50,0 +50,1 @@\n+ * @requires test.thread.factory != \"Virtual\"\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/monitoring\/ThreadInfo\/getLockName\/getlockname001\/TestDescription.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -45,0 +45,1 @@\n+ * @requires test.thread.factory != \"Virtual\"\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/monitoring\/ThreadInfo\/getLockOwnerName\/getlockownername001\/TestDescription.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -44,0 +44,1 @@\n+ * @requires test.thread.factory != \"Virtual\"\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/monitoring\/ThreadInfo\/isInNative\/isinnative001\/TestDescription.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -62,1 +62,1 @@\n-        \/\/ Expect >= 0 value for current thread\n+        \/\/ Expect >= 0 value for current platform thread.\n@@ -64,4 +64,11 @@\n-        if (result < 0)\n-            throw new TestFailure(\"Failure! getCurrentThreadAllocatedBytes() should \"\n-                    + \"return >= 0 value for current thread. Received : \" + result);\n-        \/\/ Expect >= 0 value for current thread from getThreadAllocatedBytes(id)\n+        if (Thread.currentThread().isVirtual()) {\n+            if (result != -1)\n+                throw new TestFailure(\"Failure! getCurrentThreadAllocatedBytes() should \"\n+                    + \"return -1 for virtual thread. \"\n+                    + \"Recieved : \" + result);\n+        } else {\n+            if (result < 0)\n+                throw new TestFailure(\"Failure! getCurrentThreadAllocatedBytes() should \"\n+                        + \"return >= 0 value for current thread. Received : \" + result);\n+        }\n+        \/\/ Expect >= 0 value for current iplatform thread from getThreadAllocatedBytes(id).\n@@ -69,3 +76,10 @@\n-        if (result < 0)\n-            throw new TestFailure(\"Failure! getThreadAllocatedBytes(id) should \"\n-                    + \"return >= 0 value for current thread. Received : \" + result);\n+        if (Thread.currentThread().isVirtual()) {\n+            if (result != -1)\n+                throw new TestFailure(\"Failure! ggetThreadAllocatedBytes(id) should \"\n+                    + \"return -1 for virtual thread. \"\n+                    + \"Recieved : \" + result);\n+        } else {\n+            if (result < 0)\n+                throw new TestFailure(\"Failure! getThreadAllocatedBytes(id) should \"\n+                        + \"return >= 0 value for current thread. Received : \" + result);\n+        }\n@@ -106,3 +120,10 @@\n-            if (result < 0)\n-            throw new TestFailure(\"Failure! getThreadAllocatedBytes(long id) should \"\n-                    + \"return > 0 value for RUNNING thread. Recieved : \" + result);\n+            if (thread.isVirtual()) {\n+                if (result != -1)\n+                    throw new TestFailure(\"Failure! getThreadAllocatedBytes(long id) should \"\n+                        + \"return -1 for virtual thread. \"\n+                        + \"Recieved : \" + result);\n+            } else {\n+                if (result < 0)\n+                throw new TestFailure(\"Failure! getThreadAllocatedBytes(long id) should \"\n+                        + \"return > 0 value for RUNNING thread. Recieved : \" + result);\n+            }\n@@ -110,3 +131,10 @@\n-            if (resultArr[0] < 0)\n-                throw new TestFailure(\"Failure! getThreadAllocatedBytes(long[] ids) should \"\n-                    + \"return > 0 value for RUNNING thread. Recieved : \" + resultArr[0]);\n+            if (thread.isVirtual()) {\n+                if (resultArr[0] != -1)\n+                    throw new TestFailure(\"Failure! getThreadAllocatedBytes(long[] ids) should \"\n+                        + \"return -1 for virtual thread. \"\n+                        + \"Recieved : \" + resultArr[0]);\n+            } else {\n+                if (resultArr[0] < 0)\n+                    throw new TestFailure(\"Failure! getThreadAllocatedBytes(long[] ids) should \"\n+                        + \"return > 0 value for RUNNING thread. Recieved : \" + resultArr[0]);\n+            }\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/monitoring\/ThreadMXBean\/GetThreadAllocatedBytes\/BaseBehaviorTest.java","additions":43,"deletions":15,"binary":false,"changes":58,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -81,1 +81,1 @@\n-            \/\/ Expect > 0 value for running threads\n+            \/\/ Expect > 0 value for running platform threads and -1 for virtual threads.\n@@ -83,3 +83,10 @@\n-            if (resultArr[0] < 0)\n-                throw new TestFailure(\"Failure! getThreadCpuTime(long[] ids) should \"\n-                    + \"return > 0 value for RUNNING thread. Recieved : \" + resultArr[0]);\n+            if (thread.isVirtual()) {\n+                if (resultArr[0] != -1)\n+                    throw new TestFailure(\"Failure! getThreadCpuTime(long[] ids) should \"\n+                            + \"return -1 for virtual threads.\"\n+                            + \"Recieved : \" + resultArr[0]);\n+            } else {\n+                if (resultArr[0] < 0)\n+                    throw new TestFailure(\"Failure! getThreadCpuTime(long[] ids) should \"\n+                            + \"return > 0 value for RUNNING thread. Recieved : \" + resultArr[0]);\n+            }\n@@ -87,3 +94,10 @@\n-            if (resultArr[0] < 0)\n-                throw new TestFailure(\"Failure! getThreadUserTime(long[] ids) should \"\n-                    + \"return > 0 value for RUNNING thread. Recieved : \" + resultArr[0]);\n+            if (thread.isVirtual()) {\n+                if (resultArr[0] != -1)\n+                    throw new TestFailure(\"Failure! getThreadUserTime(long[] ids) should \"\n+                            + \"return -1 for virtual threads.\"\n+                            + \"Recieved : \" + resultArr[0]);\n+            } else {\n+                if (resultArr[0] < 0)\n+                    throw new TestFailure(\"Failure! getThreadUserTime(long[] ids) should \"\n+                            + \"return > 0 value for RUNNING thread. Recieved : \" + resultArr[0]);\n+            }\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/monitoring\/ThreadMXBean\/GetThreadCpuTime\/BaseBehaviorTest.java","additions":22,"deletions":8,"binary":false,"changes":30,"status":"modified"}]}