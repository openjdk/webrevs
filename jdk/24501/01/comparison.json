{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,1 +24,0 @@\n-import java.awt.Button;\n@@ -32,1 +31,0 @@\n-import java.awt.print.PrinterException;\n@@ -34,0 +32,2 @@\n+import java.io.File;\n+import java.lang.Override;\n@@ -37,1 +37,3 @@\n-import javax.swing.JOptionPane;\n+import javax.print.attribute.HashPrintRequestAttributeSet;\n+import javax.print.attribute.PrintRequestAttributeSet;\n+import javax.print.attribute.standard.Destination;\n@@ -42,1 +44,1 @@\n- * @summary Printer graphics must behave the same as screen graphics\n+ * @summary Printer graphics must throw expected exceptions\n@@ -44,3 +46,1 @@\n- * @library \/java\/awt\/regtesthelpers\n- * @build PassFailJFrame\n- * @run main\/manual PrintNullString\n+ * @run main PrintNullString\n@@ -49,9 +49,0 @@\n-    private static final String INSTRUCTIONS =\n-            \"This test should print a page which contains the same\\n\" +\n-            \"text messages as in the test window on the screen.\\n\" +\n-            \"\\n\" +\n-            \"The messages should contain only 'OK' and 'expected' messages.\\n\" +\n-            \"Press Pass if it's the case; otherwise press Fail.\\n\" +\n-            \"\\n\" +\n-            \"If the page fails to print, but there were no exceptions\\n\" +\n-            \"then the problem is likely elsewhere (i.e. your printer)\";\n@@ -63,34 +54,7 @@\n-\n-        PassFailJFrame.builder()\n-                .instructions(INSTRUCTIONS)\n-                .testUI(PrintNullString::new)\n-                .rows((int) INSTRUCTIONS.lines().count() + 1)\n-                .columns(45)\n-                .build()\n-                .awaitAndCheck();\n-    }\n-\n-    public PrintNullString() {\n-        super(\"PrintNullString\");\n-\n-        TextCanvas c = new TextCanvas();\n-        add(\"Center\", c);\n-\n-        Button b = new Button(\"Print\");\n-        add(\"South\", b);\n-        b.addActionListener(e -> {\n-            PrinterJob pj = PrinterJob.getPrinterJob();\n-            if (pj.printDialog()) {\n-                pj.setPrintable(c);\n-                try {\n-                    pj.print();\n-                } catch (PrinterException ex) {\n-                    ex.printStackTrace();\n-                    String msg = \"PrinterException: \" + ex.getMessage();\n-                    JOptionPane.showMessageDialog(b, msg, \"Error occurred\",\n-                            JOptionPane.ERROR_MESSAGE);\n-                    PassFailJFrame.forceFail(msg);\n-                }\n-            }\n-        });\n-        pack();\n+        PrinterJob pj = PrinterJob.getPrinterJob();\n+        pj.setPrintable(new TextCanvas(), new PageFormat());\n+        PrintRequestAttributeSet pSet = new HashPrintRequestAttributeSet();\n+        File file = new File(\"out.prn\");\n+        file.deleteOnExit();\n+        pSet.add(new Destination(file.toURI()));\n+        pj.print(pSet);\n@@ -106,6 +70,0 @@\n-        @Override\n-        public void paint(Graphics g) {\n-            Graphics2D g2d = (Graphics2D) g;\n-            paint(g2d);\n-        }\n-\n@@ -129,1 +87,1 @@\n-                g2d.drawString(\"FAILURE: No NPE for null String, int\", 20, 40);\n+                throw new RuntimeException(\"FAILURE: No NPE for null String, int\");\n@@ -140,1 +98,1 @@\n-                g2d.drawString(\"FAILURE: No NPE for null String, float\", 20, 80);\n+                throw new RuntimeException(\"FAILURE: No NPE for null String, float\");\n@@ -151,1 +109,1 @@\n-                g2d.drawString(\"FAILURE: No NPE for null iterator, int\", 20, 120);\n+                throw new RuntimeException(\"FAILURE: No NPE for null iterator, int\");\n@@ -158,1 +116,1 @@\n-                g2d.drawString(\"FAILURE: No IAE for empty iterator, int\", 20, 140);\n+                throw new RuntimeException(\"FAILURE: No IAE for empty iterator, int\");\n@@ -166,1 +124,1 @@\n-                g2d.drawString(\"FAILURE: No NPE for null iterator, float\", 20, 160);\n+                throw new RuntimeException(\"FAILURE: No NPE for null iterator, float\");\n@@ -173,1 +131,1 @@\n-                g2d.drawString(\"FAILURE: No IAE for empty iterator, float\", 20, 180);\n+                throw new RuntimeException(\"FAILURE: No IAE for empty iterator, float\");\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintNullString.java","additions":21,"deletions":63,"binary":false,"changes":84,"status":"modified"}]}