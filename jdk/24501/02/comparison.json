{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,3 +24,0 @@\n-import java.awt.Button;\n-import java.awt.Dimension;\n-import java.awt.Frame;\n@@ -29,1 +26,0 @@\n-import java.awt.Panel;\n@@ -32,1 +28,0 @@\n-import java.awt.print.PrinterException;\n@@ -34,0 +29,1 @@\n+import java.io.File;\n@@ -37,1 +33,3 @@\n-import javax.swing.JOptionPane;\n+import javax.print.attribute.HashPrintRequestAttributeSet;\n+import javax.print.attribute.PrintRequestAttributeSet;\n+import javax.print.attribute.standard.Destination;\n@@ -42,1 +40,1 @@\n- * @summary Printer graphics must behave the same as screen graphics\n+ * @summary Printer graphics must throw expected exceptions\n@@ -44,3 +42,1 @@\n- * @library \/java\/awt\/regtesthelpers\n- * @build PassFailJFrame\n- * @run main\/manual PrintNullString\n+ * @run main PrintNullString\n@@ -48,10 +44,1 @@\n-public class PrintNullString extends Frame {\n-    private static final String INSTRUCTIONS =\n-            \"This test should print a page which contains the same\\n\" +\n-            \"text messages as in the test window on the screen.\\n\" +\n-            \"\\n\" +\n-            \"The messages should contain only 'OK' and 'expected' messages.\\n\" +\n-            \"Press Pass if it's the case; otherwise press Fail.\\n\" +\n-            \"\\n\" +\n-            \"If the page fails to print, but there were no exceptions\\n\" +\n-            \"then the problem is likely elsewhere (i.e. your printer)\";\n+public class PrintNullString {\n@@ -63,34 +50,7 @@\n-\n-        PassFailJFrame.builder()\n-                .instructions(INSTRUCTIONS)\n-                .testUI(PrintNullString::new)\n-                .rows((int) INSTRUCTIONS.lines().count() + 1)\n-                .columns(45)\n-                .build()\n-                .awaitAndCheck();\n-    }\n-\n-    public PrintNullString() {\n-        super(\"PrintNullString\");\n-\n-        TextCanvas c = new TextCanvas();\n-        add(\"Center\", c);\n-\n-        Button b = new Button(\"Print\");\n-        add(\"South\", b);\n-        b.addActionListener(e -> {\n-            PrinterJob pj = PrinterJob.getPrinterJob();\n-            if (pj.printDialog()) {\n-                pj.setPrintable(c);\n-                try {\n-                    pj.print();\n-                } catch (PrinterException ex) {\n-                    ex.printStackTrace();\n-                    String msg = \"PrinterException: \" + ex.getMessage();\n-                    JOptionPane.showMessageDialog(b, msg, \"Error occurred\",\n-                            JOptionPane.ERROR_MESSAGE);\n-                    PassFailJFrame.forceFail(msg);\n-                }\n-            }\n-        });\n-        pack();\n+        PrinterJob pj = PrinterJob.getPrinterJob();\n+        pj.setPrintable(new PrintText(), new PageFormat());\n+        PrintRequestAttributeSet pSet = new HashPrintRequestAttributeSet();\n+        File file = new File(\"out.prn\");\n+        file.deleteOnExit();\n+        pSet.add(new Destination(file.toURI()));\n+        pj.print(pSet);\n@@ -99,1 +59,1 @@\n-    private static class TextCanvas extends Panel implements Printable {\n+    private static class PrintText implements Printable {\n@@ -106,6 +66,0 @@\n-        @Override\n-        public void paint(Graphics g) {\n-            Graphics2D g2d = (Graphics2D) g;\n-            paint(g2d);\n-        }\n-\n@@ -120,4 +74,0 @@\n-            paint(g2d);\n-\n-            return PAGE_EXISTS;\n-        }\n@@ -125,1 +75,0 @@\n-        private void paint(Graphics2D g2d) {\n@@ -129,1 +78,1 @@\n-                g2d.drawString(\"FAILURE: No NPE for null String, int\", 20, 40);\n+                throw new RuntimeException(\"FAILURE: No NPE for null String, int\");\n@@ -140,1 +89,1 @@\n-                g2d.drawString(\"FAILURE: No NPE for null String, float\", 20, 80);\n+                throw new RuntimeException(\"FAILURE: No NPE for null String, float\");\n@@ -151,1 +100,1 @@\n-                g2d.drawString(\"FAILURE: No NPE for null iterator, int\", 20, 120);\n+                throw new RuntimeException(\"FAILURE: No NPE for null iterator, int\");\n@@ -158,1 +107,1 @@\n-                g2d.drawString(\"FAILURE: No IAE for empty iterator, int\", 20, 140);\n+                throw new RuntimeException(\"FAILURE: No IAE for empty iterator, int\");\n@@ -166,1 +115,1 @@\n-                g2d.drawString(\"FAILURE: No NPE for null iterator, float\", 20, 160);\n+                throw new RuntimeException(\"FAILURE: No NPE for null iterator, float\");\n@@ -173,1 +122,1 @@\n-                g2d.drawString(\"FAILURE: No IAE for empty iterator, float\", 20, 180);\n+                throw new RuntimeException(\"FAILURE: No IAE for empty iterator, float\");\n@@ -177,1 +126,0 @@\n-        }\n@@ -179,3 +127,1 @@\n-        @Override\n-        public Dimension getPreferredSize() {\n-            return new Dimension(450, 250);\n+            return PAGE_EXISTS;\n@@ -184,1 +130,1 @@\n-}\n+}\n\\ No newline at end of file\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintNullString.java","additions":24,"deletions":78,"binary":false,"changes":102,"status":"modified"}]}