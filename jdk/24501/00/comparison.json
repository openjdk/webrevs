{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,1 +24,0 @@\n-import java.awt.Button;\n@@ -50,8 +49,4 @@\n-            \"This test should print a page which contains the same\\n\" +\n-            \"text messages as in the test window on the screen.\\n\" +\n-            \"\\n\" +\n-            \"The messages should contain only 'OK' and 'expected' messages.\\n\" +\n-            \"Press Pass if it's the case; otherwise press Fail.\\n\" +\n-            \"\\n\" +\n-            \"If the page fails to print, but there were no exceptions\\n\" +\n-            \"then the problem is likely elsewhere (i.e. your printer)\";\n+            \"This test will automatically initiate a print\\n\\n\" +\n+            \"A passing test will print 'OK' and 'expected' messages.\\n\" +\n+            \"Test failed if no exception thrown.\\n\\n\" +\n+            \"The test will complete automatically.\";\n@@ -64,1 +59,1 @@\n-        PassFailJFrame.builder()\n+        PassFailJFrame passFailJFrame = PassFailJFrame.builder()\n@@ -66,1 +61,0 @@\n-                .testUI(PrintNullString::new)\n@@ -69,2 +63,3 @@\n-                .build()\n-                .awaitAndCheck();\n+                .build();\n+        new PrintNullString();\n+        passFailJFrame.awaitAndCheck();\n@@ -74,2 +69,0 @@\n-        super(\"PrintNullString\");\n-\n@@ -78,18 +71,0 @@\n-\n-        Button b = new Button(\"Print\");\n-        add(\"South\", b);\n-        b.addActionListener(e -> {\n-            PrinterJob pj = PrinterJob.getPrinterJob();\n-            if (pj.printDialog()) {\n-                pj.setPrintable(c);\n-                try {\n-                    pj.print();\n-                } catch (PrinterException ex) {\n-                    ex.printStackTrace();\n-                    String msg = \"PrinterException: \" + ex.getMessage();\n-                    JOptionPane.showMessageDialog(b, msg, \"Error occurred\",\n-                            JOptionPane.ERROR_MESSAGE);\n-                    PassFailJFrame.forceFail(msg);\n-                }\n-            }\n-        });\n@@ -97,0 +72,15 @@\n+        PrinterJob pj = PrinterJob.getPrinterJob();\n+        if (pj.printDialog()) {\n+            pj.setPrintable(c);\n+            try {\n+                pj.print();\n+            } catch (PrinterException ex) {\n+                ex.printStackTrace();\n+                String msg = \"PrinterException: \" + ex.getMessage();\n+                JOptionPane.showMessageDialog(c, msg, \"Error occurred\",\n+                        JOptionPane.ERROR_MESSAGE);\n+                PassFailJFrame.forceFail(msg);\n+            }\n+        } else {\n+            PassFailJFrame.forceFail(\"User cancelled printing\");\n+        }\n@@ -106,6 +96,0 @@\n-        @Override\n-        public void paint(Graphics g) {\n-            Graphics2D g2d = (Graphics2D) g;\n-            paint(g2d);\n-        }\n-\n@@ -129,1 +113,1 @@\n-                g2d.drawString(\"FAILURE: No NPE for null String, int\", 20, 40);\n+                PassFailJFrame.forceFail(\"FAILURE: No NPE for null String, int\");\n@@ -140,1 +124,1 @@\n-                g2d.drawString(\"FAILURE: No NPE for null String, float\", 20, 80);\n+                PassFailJFrame.forceFail(\"FAILURE: No NPE for null String, float\");\n@@ -151,1 +135,1 @@\n-                g2d.drawString(\"FAILURE: No NPE for null iterator, int\", 20, 120);\n+                PassFailJFrame.forceFail(\"FAILURE: No NPE for null iterator, int\");\n@@ -158,1 +142,1 @@\n-                g2d.drawString(\"FAILURE: No IAE for empty iterator, int\", 20, 140);\n+                PassFailJFrame.forceFail(\"FAILURE: No IAE for empty iterator, int\");\n@@ -166,1 +150,1 @@\n-                g2d.drawString(\"FAILURE: No NPE for null iterator, float\", 20, 160);\n+                PassFailJFrame.forceFail(\"FAILURE: No NPE for null iterator, float\");\n@@ -173,1 +157,1 @@\n-                g2d.drawString(\"FAILURE: No IAE for empty iterator, float\", 20, 180);\n+                PassFailJFrame.forceFail(\"FAILURE: No IAE for empty iterator, float\");\n@@ -177,0 +161,1 @@\n+            PassFailJFrame.forcePass();\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintNullString.java","additions":31,"deletions":46,"binary":false,"changes":77,"status":"modified"}]}