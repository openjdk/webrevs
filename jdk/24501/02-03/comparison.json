{"files":[{"patch":"@@ -28,0 +28,1 @@\n+import java.awt.print.PrinterException;\n@@ -44,6 +45,8 @@\n-public class PrintNullString {\n-\n-    public static void main(String[] args) throws Exception {\n-        if (PrinterJob.lookupPrintServices().length == 0) {\n-            throw new RuntimeException(\"Printer not configured or available.\");\n-        }\n+public class PrintNullString implements Printable {\n+    private final String nullStr = null;\n+    private final String emptyStr = \"\";\n+    private final AttributedString emptyAttStr = new AttributedString(emptyStr);\n+    private final AttributedCharacterIterator nullIterator = null;\n+    private final AttributedCharacterIterator emptyIterator = emptyAttStr.getIterator();\n+\n+    public PrintNullString() throws PrinterException {\n@@ -51,1 +54,1 @@\n-        pj.setPrintable(new PrintText(), new PageFormat());\n+        pj.setPrintable(this, new PageFormat());\n@@ -59,69 +62,67 @@\n-    private static class PrintText implements Printable {\n-        private final String nullStr = null;\n-        private final String emptyStr = \"\";\n-        private final AttributedString emptyAttStr = new AttributedString(emptyStr);\n-        private final AttributedCharacterIterator nullIterator = null;\n-        private final AttributedCharacterIterator emptyIterator = emptyAttStr.getIterator();\n-\n-        @Override\n-        public int print(Graphics g, PageFormat pgFmt, int pgIndex) {\n-            if (pgIndex > 0) {\n-                return NO_SUCH_PAGE;\n-            }\n-\n-            Graphics2D g2d = (Graphics2D) g;\n-            g2d.translate(pgFmt.getImageableX(), pgFmt.getImageableY());\n-\n-            \/\/ API 1: null & empty drawString(String, int, int);\n-            try {\n-                g2d.drawString(nullStr, 20, 40);\n-                throw new RuntimeException(\"FAILURE: No NPE for null String, int\");\n-            } catch (NullPointerException e) {\n-                g2d.drawString(\"caught expected NPE for null String, int\", 20, 40);\n-            }\n-\n-            g2d.drawString(emptyStr, 20, 60);\n-            g2d.drawString(\"OK for empty String, int\", 20, 60);\n-\n-            \/\/ API 2: null & empty drawString(String, float, float);\n-            try {\n-                g2d.drawString(nullStr, 20.0f, 80.0f);\n-                throw new RuntimeException(\"FAILURE: No NPE for null String, float\");\n-            } catch (NullPointerException e) {\n-                g2d.drawString(\"caught expected NPE for null String, float\", 20, 80);\n-            }\n-\n-            g2d.drawString(emptyStr, 20.0f, 100.0f);\n-            g2d.drawString(\"OK for empty String, float\", 20.0f, 100.f);\n-\n-            \/\/ API 3: null & empty drawString(Iterator, int, int);\n-            try {\n-                g2d.drawString(nullIterator, 20, 120);\n-                throw new RuntimeException(\"FAILURE: No NPE for null iterator, int\");\n-            } catch (NullPointerException e) {\n-                g2d.drawString(\"caught expected NPE for null iterator, int\", 20, 120);\n-            }\n-\n-            try {\n-                g2d.drawString(emptyIterator, 20, 140);\n-                throw new RuntimeException(\"FAILURE: No IAE for empty iterator, int\");\n-            } catch (IllegalArgumentException e) {\n-                g2d.drawString(\"caught expected IAE for empty iterator, int\", 20, 140);\n-            }\n-\n-            \/\/ API 4: null & empty drawString(Iterator, float, int);\n-            try {\n-                g2d.drawString(nullIterator, 20.0f, 160.0f);\n-                throw new RuntimeException(\"FAILURE: No NPE for null iterator, float\");\n-            } catch (NullPointerException e) {\n-                g2d.drawString(\"caught expected NPE for null iterator, float\", 20, 160);\n-            }\n-\n-            try {\n-                g2d.drawString(emptyIterator, 20.0f, 180.0f);\n-                throw new RuntimeException(\"FAILURE: No IAE for empty iterator, float\");\n-            } catch (IllegalArgumentException e) {\n-                g2d.drawString(\"caught expected IAE for empty iterator, float\", 20, 180);\n-            }\n-\n-            return PAGE_EXISTS;\n+    @Override\n+    public int print(Graphics g, PageFormat pgFmt, int pgIndex) {\n+        if (pgIndex > 0) {\n+            return NO_SUCH_PAGE;\n+        }\n+\n+        Graphics2D g2d = (Graphics2D) g;\n+        g2d.translate(pgFmt.getImageableX(), pgFmt.getImageableY());\n+\n+        \/\/ API 1: null & empty drawString(String, int, int);\n+        try {\n+            g2d.drawString(nullStr, 20, 40);\n+            throw new RuntimeException(\"FAILURE: No NPE for null String, int\");\n+        } catch (NullPointerException e) {\n+            g2d.drawString(\"caught expected NPE for null String, int\", 20, 40);\n+        }\n+\n+        g2d.drawString(emptyStr, 20, 60);\n+        g2d.drawString(\"OK for empty String, int\", 20, 60);\n+\n+        \/\/ API 2: null & empty drawString(String, float, float);\n+        try {\n+            g2d.drawString(nullStr, 20.0f, 80.0f);\n+            throw new RuntimeException(\"FAILURE: No NPE for null String, float\");\n+        } catch (NullPointerException e) {\n+            g2d.drawString(\"caught expected NPE for null String, float\", 20, 80);\n+        }\n+\n+        g2d.drawString(emptyStr, 20.0f, 100.0f);\n+        g2d.drawString(\"OK for empty String, float\", 20.0f, 100.f);\n+\n+        \/\/ API 3: null & empty drawString(Iterator, int, int);\n+        try {\n+            g2d.drawString(nullIterator, 20, 120);\n+            throw new RuntimeException(\"FAILURE: No NPE for null iterator, int\");\n+        } catch (NullPointerException e) {\n+            g2d.drawString(\"caught expected NPE for null iterator, int\", 20, 120);\n+        }\n+\n+        try {\n+            g2d.drawString(emptyIterator, 20, 140);\n+            throw new RuntimeException(\"FAILURE: No IAE for empty iterator, int\");\n+        } catch (IllegalArgumentException e) {\n+            g2d.drawString(\"caught expected IAE for empty iterator, int\", 20, 140);\n+        }\n+\n+        \/\/ API 4: null & empty drawString(Iterator, float, int);\n+        try {\n+            g2d.drawString(nullIterator, 20.0f, 160.0f);\n+            throw new RuntimeException(\"FAILURE: No NPE for null iterator, float\");\n+        } catch (NullPointerException e) {\n+            g2d.drawString(\"caught expected NPE for null iterator, float\", 20, 160);\n+        }\n+\n+        try {\n+            g2d.drawString(emptyIterator, 20.0f, 180.0f);\n+            throw new RuntimeException(\"FAILURE: No IAE for empty iterator, float\");\n+        } catch (IllegalArgumentException e) {\n+            g2d.drawString(\"caught expected IAE for empty iterator, float\", 20, 180);\n+        }\n+\n+        return PAGE_EXISTS;\n+    }\n+\n+    public static void main(String[] args) throws Exception {\n+        if (PrinterJob.lookupPrintServices().length == 0) {\n+            throw new RuntimeException(\"Printer not configured or available.\");\n@@ -129,0 +130,1 @@\n+        new PrintNullString();\n@@ -130,1 +132,1 @@\n-}\n\\ No newline at end of file\n+}\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintNullString.java","additions":79,"deletions":77,"binary":false,"changes":156,"status":"modified"}]}