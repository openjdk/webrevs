{"files":[{"patch":"@@ -374,0 +374,1 @@\n+        Component comp = null;\n@@ -379,4 +380,7 @@\n-                    setLeftComponent(rightComponent);\n-                }\n-                if (leftComponent != null) {\n-                    setRightComponent(leftComponent);\n+                    comp = this.leftComponent;\n+                    this.leftComponent = this.rightComponent;\n+                    this.rightComponent = comp;\n+                } else if (leftComponent != null) {\n+                    comp = this.rightComponent;\n+                    this.rightComponent = this.leftComponent;\n+                    this.leftComponent = comp;\n@@ -386,1 +390,1 @@\n-                    setLeftComponent(leftComponent);\n+                    this.leftComponent = rightComponent;\n@@ -389,1 +393,1 @@\n-                    setRightComponent(rightComponent);\n+                    this.rightComponent = leftComponent;\n@@ -392,0 +396,3 @@\n+            SwingUtilities.updateComponentTreeUI(this);\n+            this.revalidate();\n+            this.repaint();\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/JSplitPane.java","additions":13,"deletions":6,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n- * @bug 4265389\n+ * @bug 4265389 8365886\n@@ -51,0 +51,27 @@\n+    private static void testSwitchOrientation() {\n+        JSplitPane jsp = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT,\n+                                        new JButton(\"Red\"), new JButton(\"Green\"));\n+        for (int i = 0; i < 3; i++) {\n+            ComponentOrientation co = jsp.getComponentOrientation();\n+            if (co.isLeftToRight()) {\n+                jsp.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);\n+            } else {\n+                jsp.setComponentOrientation(ComponentOrientation.LEFT_TO_RIGHT);\n+            }\n+\n+            StringBuilder sb = new StringBuilder();\n+            sb.append(\"Left=\");\n+            if (jsp.getLeftComponent() instanceof JButton leftButton) {\n+                sb.append(leftButton.getText());\n+            }\n+            sb.append(\" Right=\");\n+            if (jsp.getRightComponent() instanceof JButton rightButton) {\n+                sb.append(rightButton.getText());\n+            }\n+            System.out.println(sb);\n+        }\n+        if (jsp.getLeftComponent() == null) {\n+            throw new RuntimeException(\"JSplitPane repeated orientation change not working\");\n+        }\n+    }\n+\n@@ -66,0 +93,1 @@\n+                testSwitchOrientation();\n","filename":"test\/jdk\/javax\/swing\/JSplitPane\/TestSplitPaneOrientationTest.java","additions":29,"deletions":1,"binary":false,"changes":30,"status":"modified"}]}