{"files":[{"patch":"@@ -28,0 +28,4 @@\n+inputs:\n+  fail-on-cache-miss:\n+    description: 'Fail on cache miss?'\n+    required: true\n@@ -48,0 +52,2 @@\n+        fail-on-cache-miss: ${{ inputs.fail-on-cache-miss }}\n+        enableCrossOsArchive: true\n@@ -59,6 +65,0 @@\n-        # If runner architecture is x64 set JAVA_HOME_17_X64 otherwise set to JAVA_HOME_17_arm64\n-        if [[ '${{ runner.arch }}' == 'X64' ]]; then\n-          JDK=\"$JAVA_HOME_17_X64\"\n-        else\n-          JDK=\"$JAVA_HOME_17_arm64\"\n-        fi\n@@ -66,1 +66,1 @@\n-        bash make\/build.sh --jdk \"$JDK\"\n+        bash make\/build.sh --jdk \"$JAVA_HOME_17_X64\"\n","filename":".github\/actions\/get-jtreg\/action.yml","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -92,0 +92,2 @@\n+        with:\n+          fail-on-cache-miss: true\n","filename":".github\/workflows\/build-linux.yml","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -85,0 +85,2 @@\n+        with:\n+          fail-on-cache-miss: true\n","filename":".github\/workflows\/build-macos.yml","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -96,0 +96,2 @@\n+        with:\n+          fail-on-cache-miss: true\n","filename":".github\/workflows\/build-windows.yml","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -57,2 +57,2 @@\n-  select:\n-    name: 'Select platforms'\n+  prepare:\n+    name: 'Prepare the run'\n@@ -76,1 +76,15 @@\n-        # This function must be inlined in main.yml, or we'd be forced to checkout the repo\n+      - name: 'Checkout the scripts'\n+        uses: actions\/checkout@v4\n+        with:\n+          sparse-checkout: |\n+            .github\n+            make\/conf\/github-actions.conf\n+\n+      - name: 'Get or build JTReg'\n+        id: jtreg\n+        uses: .\/.github\/actions\/get-jtreg\n+        with:\n+          fail-on-cache-miss: false\n+\n+      # TODO: Now that we are checking out the repo scripts, we can put the following code\n+      # into a separate file\n@@ -152,1 +166,1 @@\n-    needs: select\n+    needs: prepare\n@@ -159,1 +173,1 @@\n-    if: needs.select.outputs.linux-x64 == 'true'\n+    if: needs.prepare.outputs.linux-x64 == 'true'\n@@ -163,1 +177,1 @@\n-    needs: select\n+    needs: prepare\n@@ -177,1 +191,1 @@\n-    if: needs.select.outputs.linux-x86-hs == 'true'\n+    if: needs.prepare.outputs.linux-x86-hs == 'true'\n@@ -181,1 +195,1 @@\n-    needs: select\n+    needs: prepare\n@@ -191,1 +205,1 @@\n-    if: needs.select.outputs.linux-x64-variants == 'true'\n+    if: needs.prepare.outputs.linux-x64-variants == 'true'\n@@ -195,1 +209,1 @@\n-    needs: select\n+    needs: prepare\n@@ -205,1 +219,1 @@\n-    if: needs.select.outputs.linux-x64-variants == 'true'\n+    if: needs.prepare.outputs.linux-x64-variants == 'true'\n@@ -209,1 +223,1 @@\n-    needs: select\n+    needs: prepare\n@@ -219,1 +233,1 @@\n-    if: needs.select.outputs.linux-x64-variants == 'true'\n+    if: needs.prepare.outputs.linux-x64-variants == 'true'\n@@ -223,1 +237,1 @@\n-    needs: select\n+    needs: prepare\n@@ -234,1 +248,1 @@\n-    if: needs.select.outputs.linux-x64-variants == 'true'\n+    if: needs.prepare.outputs.linux-x64-variants == 'true'\n@@ -238,2 +252,1 @@\n-    needs:\n-      - select\n+    needs: prepare\n@@ -245,1 +258,1 @@\n-    if: needs.select.outputs.linux-cross-compile == 'true'\n+    if: needs.prepare.outputs.linux-cross-compile == 'true'\n@@ -249,1 +262,1 @@\n-    needs: select\n+    needs: prepare\n@@ -255,1 +268,1 @@\n-    if: needs.select.outputs.alpine-linux-x64 == 'true'\n+    if: needs.prepare.outputs.alpine-linux-x64 == 'true'\n@@ -259,1 +272,1 @@\n-    needs: select\n+    needs: prepare\n@@ -267,1 +280,1 @@\n-    if: needs.select.outputs.macos-x64 == 'true'\n+    if: needs.prepare.outputs.macos-x64 == 'true'\n@@ -271,1 +284,1 @@\n-    needs: select\n+    needs: prepare\n@@ -279,1 +292,1 @@\n-    if: needs.select.outputs.macos-aarch64 == 'true'\n+    if: needs.prepare.outputs.macos-aarch64 == 'true'\n@@ -283,1 +296,1 @@\n-    needs: select\n+    needs: prepare\n@@ -291,1 +304,1 @@\n-    if: needs.select.outputs.windows-x64 == 'true'\n+    if: needs.prepare.outputs.windows-x64 == 'true'\n@@ -295,1 +308,1 @@\n-    needs: select\n+    needs: prepare\n@@ -305,1 +318,1 @@\n-    if: needs.select.outputs.windows-aarch64 == 'true'\n+    if: needs.prepare.outputs.windows-aarch64 == 'true'\n@@ -309,1 +322,1 @@\n-    needs: select\n+    needs: prepare\n@@ -321,1 +334,1 @@\n-    if: needs.select.outputs.docs == 'true'\n+    if: needs.prepare.outputs.docs == 'true'\n","filename":".github\/workflows\/main.yml","additions":43,"deletions":30,"binary":false,"changes":73,"status":"modified"},{"patch":"@@ -138,0 +138,2 @@\n+        with:\n+          fail-on-cache-miss: true\n","filename":".github\/workflows\/test.yml","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"}]}