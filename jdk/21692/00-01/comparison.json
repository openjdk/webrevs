{"files":[{"patch":"@@ -0,0 +1,68 @@\n+#\n+# Copyright (c) 2023, 2024, Oracle and\/or its affiliates. All rights reserved.\n+# DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+#\n+# This code is free software; you can redistribute it and\/or modify it\n+# under the terms of the GNU General Public License version 2 only, as\n+# published by the Free Software Foundation.  Oracle designates this\n+# particular file as subject to the \"Classpath\" exception as provided\n+# by Oracle in the LICENSE file that accompanied this code.\n+#\n+# This code is distributed in the hope that it will be useful, but WITHOUT\n+# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+# FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+# version 2 for more details (a copy is included in the LICENSE file that\n+# accompanied this code).\n+#\n+# You should have received a copy of the GNU General Public License version\n+# 2 along with this work; if not, write to the Free Software Foundation,\n+# Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+#\n+# Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+# or visit www.oracle.com if you need additional information or have any\n+# questions.\n+#\n+\n+name: 'Build JTReg'\n+description: 'Build JTReg'\n+\n+runs:\n+  using: composite\n+  steps:\n+    - name: 'Get JTReg version configuration'\n+      id: version\n+      uses: .\/.github\/actions\/config\n+      with:\n+        var: JTREG_VERSION\n+\n+    - name: 'Check cache for already built JTReg'\n+      id: get-cached\n+      uses: actions\/cache@v4\n+      with:\n+        path: jtreg\/installed\n+        key: jtreg-${{ steps.version.outputs.value }}\n+\n+    - name: 'Checkout the JTReg source'\n+      uses: actions\/checkout@v4\n+      with:\n+        repository: openjdk\/jtreg\n+        ref: jtreg-${{ steps.version.outputs.value }}\n+        path: jtreg\/src\n+      if: (steps.get-cached.outputs.cache-hit != 'true')\n+\n+    - name: 'Build JTReg'\n+      run: |\n+        # Build JTReg and move files to the proper locations\n+        bash make\/build.sh --jdk \"$JAVA_HOME_17_X64\"\n+        mkdir ..\/installed\n+        mv build\/images\/jtreg\/* ..\/installed\n+      working-directory: jtreg\/src\n+      shell: bash\n+      if: (steps.get-cached.outputs.cache-hit != 'true')\n+\n+    - name: 'Upload JTReg artifact'\n+      uses: actions\/upload-artifact@v4\n+      with:\n+        name: bundles-jtreg-${{ steps.version.outputs.value }}\n+        path: jtreg\/installed\n+        retention-days: 1\n","filename":".github\/actions\/build-jtreg\/action.yml","additions":68,"deletions":0,"binary":false,"changes":68,"status":"added"},{"patch":"@@ -27,5 +27,1 @@\n-description: 'Download JTReg from cache or source location'\n-inputs:\n-  fail-on-cache-miss:\n-    description: 'Fail on cache miss?'\n-    required: true\n+description: 'Get JTReg'\n@@ -46,3 +42,3 @@\n-    - name: 'Check cache for JTReg'\n-      id: get-cached-jtreg\n-      uses: actions\/cache@v4\n+    - name: 'Download JTReg artifact'\n+      id: download-jtreg\n+      uses: actions\/download-artifact@v4\n@@ -50,0 +46,1 @@\n+        name: bundles-jtreg-${{ steps.version.outputs.value }}\n@@ -51,21 +48,0 @@\n-        key: jtreg-${{ steps.version.outputs.value }}\n-        fail-on-cache-miss: ${{ inputs.fail-on-cache-miss }}\n-        enableCrossOsArchive: true\n-\n-    - name: 'Checkout the JTReg source'\n-      uses: actions\/checkout@v4\n-      with:\n-        repository: openjdk\/jtreg\n-        ref: jtreg-${{ steps.version.outputs.value }}\n-        path: jtreg\/src\n-      if: steps.get-cached-jtreg.outputs.cache-hit != 'true'\n-\n-    - name: 'Build JTReg'\n-      run: |\n-        # Build JTReg and move files to the proper locations\n-        bash make\/build.sh --jdk \"$JAVA_HOME_17_X64\"\n-        mkdir ..\/installed\n-        mv build\/images\/jtreg\/* ..\/installed\n-      working-directory: jtreg\/src\n-      shell: bash\n-      if: steps.get-cached-jtreg.outputs.cache-hit != 'true'\n","filename":".github\/actions\/get-jtreg\/action.yml","additions":5,"deletions":29,"binary":false,"changes":34,"status":"modified"},{"patch":"@@ -92,2 +92,0 @@\n-        with:\n-          fail-on-cache-miss: true\n","filename":".github\/workflows\/build-linux.yml","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -85,2 +85,0 @@\n-        with:\n-          fail-on-cache-miss: true\n","filename":".github\/workflows\/build-macos.yml","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -96,2 +96,0 @@\n-        with:\n-          fail-on-cache-miss: true\n","filename":".github\/workflows\/build-windows.yml","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -83,1 +83,1 @@\n-      - name: 'Get or build JTReg'\n+      - name: 'Build JTReg'\n@@ -85,3 +85,1 @@\n-        uses: .\/.github\/actions\/get-jtreg\n-        with:\n-          fail-on-cache-miss: false\n+        uses: .\/.github\/actions\/build-jtreg\n","filename":".github\/workflows\/main.yml","additions":2,"deletions":4,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -138,2 +138,0 @@\n-        with:\n-          fail-on-cache-miss: true\n","filename":".github\/workflows\/test.yml","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"}]}