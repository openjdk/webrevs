{"files":[{"patch":"@@ -107,7 +107,1 @@\n-  constexpr int mmap_fd =\n-  #ifdef __APPLE__\n-    VM_MAKE_TAG(VM_MEMORY_JAVA);\n-  #else\n-    -1;\n-  #endif\n-  const void* const res = mmap((void*)addr, length, PROT_READ | PROT_WRITE, MAP_FIXED | MAP_ANONYMOUS | MAP_PRIVATE, mmap_fd, 0);\n+  const void* const res = mmap((void*)addr, length, PROT_READ | PROT_WRITE, MAP_FIXED | MAP_ANONYMOUS | MAP_PRIVATE, bsd_mmap_fd, 0);\n@@ -160,7 +154,1 @@\n-  constexpr int mmap_fd =\n-  #ifdef __APPLE__\n-    VM_MAKE_TAG(VM_MEMORY_JAVA);\n-  #else\n-    -1;\n-  #endif\n-  const void* const res = mmap((void*)start, length, PROT_NONE, MAP_FIXED | MAP_ANONYMOUS | MAP_PRIVATE | MAP_NORESERVE, mmap_fd, 0);\n+  const void* const res = mmap((void*)start, length, PROT_NONE, MAP_FIXED | MAP_ANONYMOUS | MAP_PRIVATE | MAP_NORESERVE, bsd_mmap_fd, 0);\n@@ -187,7 +175,1 @@\n-  constexpr int mmap_fd =\n-  #ifdef __APPLE__\n-    VM_MAKE_TAG(VM_MEMORY_JAVA);\n-  #else\n-    -1;\n-  #endif\n-  const void* const res = mmap((void*)untype(addr), size, PROT_NONE, MAP_FIXED | MAP_ANONYMOUS | MAP_PRIVATE | MAP_NORESERVE, mmap_fd, 0);\n+  const void* const res = mmap((void*)untype(addr), size, PROT_NONE, MAP_FIXED | MAP_ANONYMOUS | MAP_PRIVATE | MAP_NORESERVE, bsd_mmap_fd, 0);\n","filename":"src\/hotspot\/os\/bsd\/gc\/z\/zPhysicalMemoryBacking_bsd.cpp","additions":3,"deletions":21,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -1521,1 +1521,1 @@\n-                                       MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, VM_MAKE_TAG(VM_MEMORY_JAVA), 0);\n+                                       MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, bsd_mmap_fd, 0);\n@@ -1648,1 +1648,1 @@\n-        MAP_PRIVATE|MAP_FIXED|MAP_NORESERVE|MAP_ANONYMOUS, VM_MAKE_TAG(VM_MEMORY_JAVA), 0);\n+        MAP_PRIVATE|MAP_FIXED|MAP_NORESERVE|MAP_ANONYMOUS, bsd_mmap_fd, 0);\n@@ -1693,7 +1693,1 @@\n-  constexpr int mmap_fd =\n-  #ifdef __APPLE__\n-    VM_MAKE_TAG(VM_MEMORY_JAVA);\n-  #else\n-    -1;\n-  #endif\n-  char* addr = (char*)::mmap(requested_addr, bytes, PROT_NONE, flags, mmap_fd, 0);\n+  char* addr = (char*)::mmap(requested_addr, bytes, PROT_NONE, flags, bsd_mmap_fd, 0);\n","filename":"src\/hotspot\/os\/bsd\/os_bsd.cpp","additions":3,"deletions":9,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -30,0 +30,4 @@\n+#ifdef __APPLE__\n+#include <mach\/vm_statistics.h>\n+#endif\n+\n@@ -32,0 +36,8 @@\n+\/\/ Shared constant for mmap file descriptor used across BSD OS implementations\n+static constexpr int bsd_mmap_fd =\n+#ifdef __APPLE__\n+  VM_MAKE_TAG(VM_MEMORY_JAVA);\n+#else\n+  -1;\n+#endif\n+\n","filename":"src\/hotspot\/os\/bsd\/os_bsd.hpp","additions":12,"deletions":0,"binary":false,"changes":12,"status":"modified"}]}