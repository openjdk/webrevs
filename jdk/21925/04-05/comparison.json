{"files":[{"patch":"@@ -28,0 +28,1 @@\n+import com.sun.hotspot.igv.view.widgets.FigureWidget;\n@@ -85,1 +86,1 @@\n-    private static final JButton selectedColorButton = new JButton();\n+    private static final JButton selectedColorButton = new JButton(\"Preview\");\n@@ -89,1 +90,1 @@\n-        selectedColorButton.setPreferredSize(new Dimension(32, 32));\n+        selectedColorButton.setPreferredSize(new Dimension(3 * 32, 32));\n@@ -93,0 +94,1 @@\n+        selectedColorButton.setForeground(Color.BLACK); \/\/ Set text color\n@@ -99,0 +101,1 @@\n+                selectedColorButton.setForeground(FigureWidget.getTextColor(selectedColor));\n@@ -141,1 +144,4 @@\n-            colorButton.addActionListener(e -> selectedColorButton.setBackground(color));\n+            colorButton.addActionListener(e -> {\n+                selectedColorButton.setBackground(color);\n+                selectedColorButton.setForeground(FigureWidget.getTextColor(color));\n+            });\n","filename":"src\/utils\/IdealGraphVisualizer\/View\/src\/main\/java\/com\/sun\/hotspot\/igv\/view\/actions\/ColorAction.java","additions":9,"deletions":3,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -93,11 +93,14 @@\n-            if (selected) {\n-                extraLabelWidget.setForeground(getTextColor());\n-            } else {\n-                Color bg = figure.getColor();\n-                double brightness = bg.getRed() * 0.21 + bg.getGreen() * 0.72 + bg.getBlue() * 0.07;\n-                if (brightness < 150) {\n-                    extraLabelWidget.setForeground(Color.LIGHT_GRAY);\n-                } else {\n-                    extraLabelWidget.setForeground(Color.DARK_GRAY);\n-                }\n-            }\n+            extraLabelWidget.setForeground(getTextColorHelper(figure.getColor(), !selected));\n+        }\n+    }\n+\n+    public static Color getTextColor(Color color) {\n+        return getTextColorHelper(color, false);\n+    }\n+\n+    private static Color getTextColorHelper(Color bg, boolean useGrey) {\n+        double brightness = bg.getRed() * 0.21 + bg.getGreen() * 0.72 + bg.getBlue() * 0.07;\n+        if (brightness < 150) {\n+            return useGrey ? Color.LIGHT_GRAY : Color.WHITE;\n+        } else {\n+            return useGrey ? Color.DARK_GRAY : Color.BLACK;\n@@ -199,1 +202,1 @@\n-            lw.setForeground(getTextColor());\n+            lw.setForeground(getTextColor(figure.getColor()));\n@@ -241,10 +244,0 @@\n-    private Color getTextColor() {\n-        Color bg = figure.getColor();\n-        double brightness = bg.getRed() * 0.21 + bg.getGreen() * 0.72 + bg.getBlue() * 0.07;\n-        if (brightness < 150) {\n-            return Color.WHITE;\n-        } else {\n-            return Color.BLACK;\n-        }\n-    }\n-\n","filename":"src\/utils\/IdealGraphVisualizer\/View\/src\/main\/java\/com\/sun\/hotspot\/igv\/view\/widgets\/FigureWidget.java","additions":15,"deletions":22,"binary":false,"changes":37,"status":"modified"}]}