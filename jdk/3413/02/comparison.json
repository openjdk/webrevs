{"files":[{"patch":"@@ -118,7 +118,8 @@\n-                .setDefaultTab(resources.getText(\"doclet.All_Classes\"))\n-                .addTab(contents.interfaceSummary, utils::isInterface)\n-                .addTab(contents.classSummary, e -> utils.isOrdinaryClass((TypeElement)e))\n-                .addTab(contents.enumSummary, utils::isEnum)\n-                .addTab(contents.exceptionSummary, e -> utils.isException((TypeElement)e))\n-                .addTab(contents.errorSummary, e -> utils.isError((TypeElement)e))\n-                .addTab(contents.annotationTypeSummary, utils::isAnnotationType);\n+                .setDefaultTab(contents.allClassesAndInterfaces)\n+                .addTab(contents.interfacesString, utils::isInterface)\n+                .addTab(contents.classesString, e -> utils.isOrdinaryClass((TypeElement)e))\n+                .addTab(contents.enumsString, utils::isEnum)\n+                .addTab(contents.recordsString, e -> utils.isRecord((TypeElement)e))\n+                .addTab(contents.exceptionsString, e -> utils.isException((TypeElement)e))\n+                .addTab(contents.errorsString, e -> utils.isError((TypeElement)e))\n+                .addTab(contents.annotationTypesString, utils::isAnnotationType);\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/AllClassesIndexWriter.java","additions":8,"deletions":7,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -28,0 +28,1 @@\n+import java.util.ArrayList;\n@@ -58,0 +59,1 @@\n+import jdk.javadoc.internal.doclets.toolkit.util.VisibleMemberTable;\n@@ -153,1 +155,11 @@\n-                .setMemberSummaryBuilder(configuration.getBuilderFactory().getMemberSummaryBuilder(this));\n+                .setSubNavLinks(() -> {\n+                    List<Content> list = new ArrayList<>();\n+                    VisibleMemberTable vmt = configuration.getVisibleMemberTable(typeElement);\n+                    Set<VisibleMemberTable.Kind> summarySet =\n+                            VisibleMemberTable.Kind.forSummariesOf(element.getKind());\n+                    for (VisibleMemberTable.Kind kind : summarySet) {\n+                        list.add(HtmlTree.LI(links.createLink(HtmlIds.forMemberSummary(kind),\n+                                contents.getNavLinkLabelContent(kind), vmt.hasVisibleMembers(kind))));\n+                    }\n+                    return list;\n+                });\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/ClassWriterImpl.java","additions":13,"deletions":1,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -39,1 +39,0 @@\n-import jdk.javadoc.internal.doclets.toolkit.util.DocletConstants;\n@@ -131,0 +130,1 @@\n+    public final Content navClassesAndInterfaces;\n@@ -132,0 +132,1 @@\n+    public final Content navDescription;\n@@ -137,1 +138,0 @@\n-    public final Content navModuleDescription;\n@@ -153,0 +153,1 @@\n+    public final Content packageSubNavLabel;\n@@ -185,6 +186,7 @@\n-    public final String annotationTypeSummary;\n-    public final String classSummary;\n-    public final String enumSummary;\n-    public final String errorSummary;\n-    public final String exceptionSummary;\n-    public final String interfaceSummary;\n+    public final String allClassesAndInterfaces;\n+    public final String annotationTypesString;\n+    public final String classesString;\n+    public final String enumsString;\n+    public final String errorsString;\n+    public final String exceptionsString;\n+    public final String interfacesString;\n@@ -192,1 +194,1 @@\n-    public final String recordSummary;\n+    public final String recordsString;\n@@ -281,0 +283,1 @@\n+        navClassesAndInterfaces = getContent(\"doclet.navClassesAndInterfaces\");\n@@ -287,1 +290,1 @@\n-        navModuleDescription = getContent(\"doclet.navModuleDescription\");\n+        navDescription = getContent(\"doclet.navDescription\");\n@@ -303,0 +306,1 @@\n+        packageSubNavLabel = getContent(\"doclet.Package_Sub_Nav\");\n@@ -339,0 +343,4 @@\n+        navLinkLabels.put(VisibleMemberTable.Kind.ANNOTATION_TYPE_MEMBER_OPTIONAL,\n+                getContent(\"doclet.navAnnotationTypeOptionalMember\"));\n+        navLinkLabels.put(VisibleMemberTable.Kind.ANNOTATION_TYPE_MEMBER_REQUIRED,\n+                getContent(\"doclet.navAnnotationTypeRequiredMember\"));\n@@ -340,6 +348,7 @@\n-        this.annotationTypeSummary = resources.getText(\"doclet.Annotation_Types_Summary\");\n-        this.classSummary = resources.getText(\"doclet.Class_Summary\");\n-        this.enumSummary = resources.getText(\"doclet.Enum_Summary\");\n-        this.errorSummary = resources.getText(\"doclet.Error_Summary\");\n-        this.exceptionSummary = resources.getText(\"doclet.Exception_Summary\");\n-        this.interfaceSummary = resources.getText(\"doclet.Interface_Summary\");\n+        this.allClassesAndInterfaces = resources.getText(\"doclet.All_Classes_And_Interfaces\");\n+        this.annotationTypesString = resources.getText(\"doclet.AnnotationTypes\");\n+        this.classesString = resources.getText(\"doclet.Classes\");\n+        this.enumsString = resources.getText(\"doclet.Enums\");\n+        this.errorsString = resources.getText(\"doclet.Errors\");\n+        this.exceptionsString = resources.getText(\"doclet.Exceptions\");\n+        this.interfacesString = resources.getText(\"doclet.Interfaces\");\n@@ -347,1 +356,1 @@\n-        this.recordSummary = resources.getText(\"doclet.Record_Class_Summary\");\n+        this.recordsString = resources.getText(\"doclet.RecordClasses\");\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/Contents.java","additions":26,"deletions":17,"binary":false,"changes":43,"status":"modified"},{"patch":"@@ -29,0 +29,1 @@\n+import javax.lang.model.element.Element;\n@@ -146,0 +147,9 @@\n+    @Override\n+    protected Navigation getNavBar(PageMode pageMode, Element element) {\n+        return super.getNavBar(pageMode, element)\n+                .setSubNavLinks(() -> List.of(\n+                        HtmlTree.LI(links.createLink(HtmlIds.HELP_NAVIGATION, contents.navHelpNavigation)),\n+                        HtmlTree.LI(links.createLink(HtmlIds.HELP_PAGES, contents.navHelpPages)))\n+                );\n+    }\n+\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/HelpWriter.java","additions":10,"deletions":0,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -142,2 +142,0 @@\n-                { \"doclet.Annotation_Types_Summary\", \"doclet.Annotation_Interfaces_Summary\" },\n-                { \"doclet.Enum_Summary\", \"doclet.Enum_Class_Summary\" },\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/HtmlDoclet.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -45,0 +45,1 @@\n+import jdk.javadoc.internal.doclets.toolkit.util.VisibleMemberTable;\n@@ -75,0 +76,1 @@\n+    static final HtmlId CLASS_SUMMARY = HtmlId.of(\"class-summary\");\n@@ -98,0 +100,1 @@\n+    static final HtmlId RELATED_PACKAGE_SUMMARY = HtmlId.of(\"related-package-summary\");\n@@ -427,0 +430,20 @@\n+    \/**\n+     * Returns an id for the member summary table of the given {@code kind} in a class page.\n+     *\n+     * @param kind the kind of member\n+     *\n+     * @return the id\n+     *\/\n+    static HtmlId forMemberSummary(VisibleMemberTable.Kind kind) {\n+        return switch (kind) {\n+            case INNER_CLASSES -> NESTED_CLASS_SUMMARY;\n+            case ENUM_CONSTANTS -> ENUM_CONSTANT_SUMMARY;\n+            case FIELDS -> FIELD_SUMMARY;\n+            case CONSTRUCTORS -> CONSTRUCTOR_SUMMARY;\n+            case METHODS -> METHOD_SUMMARY;\n+            case ANNOTATION_TYPE_MEMBER_OPTIONAL -> ANNOTATION_TYPE_OPTIONAL_ELEMENT_SUMMARY;\n+            case ANNOTATION_TYPE_MEMBER_REQUIRED -> ANNOTATION_TYPE_REQUIRED_ELEMENT_SUMMARY;\n+            case PROPERTIES -> PROPERTY_SUMMARY;\n+        };\n+    }\n+\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/HtmlIds.java","additions":23,"deletions":0,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -200,5 +200,10 @@\n-                .setDisplaySummaryModuleDescLink(!utils.getFullBody(mdle).isEmpty() && !options.noComment())\n-                .setDisplaySummaryModulesLink(display(requires) || display(indirectModules))\n-                .setDisplaySummaryPackagesLink(display(packages) || display(indirectPackages)\n-                        || display(indirectOpenPackages))\n-                .setDisplaySummaryServicesLink(displayServices(uses, usesTrees) || displayServices(provides.keySet(), providesTrees));\n+                .setSubNavLinks(() -> List.of(\n+                        HtmlTree.LI(links.createLink(HtmlIds.MODULE_DESCRIPTION, contents.navDescription,\n+                            !utils.getFullBody(mdle).isEmpty() && !options.noComment())),\n+                        HtmlTree.LI(links.createLink(HtmlIds.MODULES, contents.navModules,\n+                            display(requires) || display(indirectModules))),\n+                        HtmlTree.LI(links.createLink(HtmlIds.PACKAGES, contents.navPackages,\n+                            display(packages) || display(indirectPackages) || display(indirectOpenPackages))),\n+                        HtmlTree.LI(links.createLink(HtmlIds.SERVICES, contents.navServices,\n+                            displayServices(uses, usesTrees) || displayServices(provides.keySet(), providesTrees)))\n+                ));\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/ModuleWriterImpl.java","additions":10,"deletions":5,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -30,1 +30,0 @@\n-import java.util.SortedSet;\n@@ -38,1 +37,0 @@\n-import jdk.javadoc.internal.doclets.formats.html.markup.Comment;\n@@ -46,0 +44,1 @@\n+import jdk.javadoc.internal.doclets.formats.html.markup.Text;\n@@ -47,1 +46,0 @@\n-import jdk.javadoc.internal.doclets.toolkit.builders.MemberSummaryBuilder;\n@@ -78,5 +76,0 @@\n-    private MemberSummaryBuilder memberSummaryBuilder;\n-    private boolean displaySummaryModuleDescLink;\n-    private boolean displaySummaryModulesLink;\n-    private boolean displaySummaryPackagesLink;\n-    private boolean displaySummaryServicesLink;\n@@ -86,0 +79,1 @@\n+    private SubNavLinks subNavLinks;\n@@ -106,0 +100,12 @@\n+    \/**\n+     * An interface to provide links for the sub-navigation area.\n+     *\/\n+    public interface SubNavLinks {\n+        \/**\n+         * {@return a list of links to display in the sub-navigation area}\n+         * Links should be wrapped in {@code HtmlTree.LI} elements as they are\n+         * displayed within an unordered list.\n+         *\/\n+        List<Content> getSubNavLinks();\n+    }\n+\n@@ -144,22 +150,2 @@\n-    public Navigation setMemberSummaryBuilder(MemberSummaryBuilder memberSummaryBuilder) {\n-        this.memberSummaryBuilder = memberSummaryBuilder;\n-        return this;\n-    }\n-\n-    public Navigation setDisplaySummaryModuleDescLink(boolean displaySummaryModuleDescLink) {\n-        this.displaySummaryModuleDescLink = displaySummaryModuleDescLink;\n-        return this;\n-    }\n-\n-    public Navigation setDisplaySummaryModulesLink(boolean displaySummaryModulesLink) {\n-        this.displaySummaryModulesLink = displaySummaryModulesLink;\n-        return this;\n-    }\n-\n-    public Navigation setDisplaySummaryPackagesLink(boolean displaySummaryPackagesLink) {\n-        this.displaySummaryPackagesLink = displaySummaryPackagesLink;\n-        return this;\n-    }\n-\n-    public Navigation setDisplaySummaryServicesLink(boolean displaySummaryServicesLink) {\n-        this.displaySummaryServicesLink = displaySummaryServicesLink;\n+    public Navigation setUserHeader(Content userHeader) {\n+        this.userHeader = userHeader;\n@@ -169,2 +155,2 @@\n-    public Navigation setUserHeader(Content userHeader) {\n-        this.userHeader = userHeader;\n+    public Navigation setSubNavLinks(SubNavLinks subNavLinks) {\n+        this.subNavLinks = subNavLinks;\n@@ -353,1 +339,0 @@\n-        List<Content> listContents = new ArrayList<>();\n@@ -355,36 +340,0 @@\n-            case CLASS:\n-                if (element.getKind() == ElementKind.ANNOTATION_TYPE) {\n-                    addAnnotationTypeSummaryLink(\"doclet.navField\",\n-                            FIELDS, listContents);\n-                    addAnnotationTypeSummaryLink(\"doclet.navAnnotationTypeRequiredMember\",\n-                            ANNOTATION_TYPE_MEMBER_REQUIRED, listContents);\n-                    addAnnotationTypeSummaryLink(\"doclet.navAnnotationTypeOptionalMember\",\n-                            ANNOTATION_TYPE_MEMBER_OPTIONAL, listContents);\n-                } else {\n-                    TypeElement typeElement = (TypeElement) element;\n-                    for (VisibleMemberTable.Kind kind : summarySet) {\n-                        if (kind == ENUM_CONSTANTS && !configuration.utils.isEnum(typeElement)) {\n-                            continue;\n-                        }\n-                        if (kind == CONSTRUCTORS && configuration.utils.isEnum(typeElement)) {\n-                            continue;\n-                        }\n-                        AbstractMemberWriter writer\n-                                = ((AbstractMemberWriter) memberSummaryBuilder.getMemberSummaryWriter(kind));\n-                        if (writer == null) {\n-                            addContentToList(listContents, contents.getNavLinkLabelContent(kind));\n-                        } else {\n-                            addTypeSummaryLink(memberSummaryBuilder.members(kind),\n-                                    memberSummaryBuilder.getVisibleMemberTable(),\n-                                    kind, listContents);\n-                        }\n-                    }\n-                }\n-                if (!listContents.isEmpty()) {\n-                    Content li = HtmlTree.LI(contents.summaryLabel);\n-                    li.add(Entity.NO_BREAK_SPACE);\n-                    tree.add(li);\n-                    addListToNav(listContents, tree);\n-                }\n-                break;\n-\n@@ -392,24 +341,4 @@\n-                if (displaySummaryModuleDescLink) {\n-                    addContentToList(listContents,\n-                            links.createLink(HtmlIds.MODULE_DESCRIPTION, contents.navModuleDescription));\n-                } else {\n-                    addContentToList(listContents, contents.navModuleDescription);\n-                }\n-                if (displaySummaryModulesLink) {\n-                    addContentToList(listContents,\n-                            links.createLink(HtmlIds.MODULES, contents.navModules));\n-                } else {\n-                    addContentToList(listContents, contents.navModules);\n-                }\n-                if (displaySummaryPackagesLink) {\n-                    addContentToList(listContents,\n-                            links.createLink(HtmlIds.PACKAGES, contents.navPackages));\n-                } else {\n-                    addContentToList(listContents, contents.navPackages);\n-                }\n-                if (displaySummaryServicesLink) {\n-                    addContentToList(listContents,\n-                            links.createLink(HtmlIds.SERVICES, contents.navServices));\n-                } else {\n-                    addContentToList(listContents, contents.navServices);\n-                }\n+            case PACKAGE:\n+            case CLASS:\n+            case HELP:\n+                List<Content> listContents = subNavLinks.getSubNavLinks();\n@@ -417,3 +346,7 @@\n-                    Content li = HtmlTree.LI(contents.moduleSubNavLabel);\n-                    li.add(Entity.NO_BREAK_SPACE);\n-                    tree.add(li);\n+                    tree.add(HtmlTree.LI(switch (documentedPage) {\n+                        case MODULE -> contents.moduleSubNavLabel;\n+                        case PACKAGE -> contents.packageSubNavLabel;\n+                        case CLASS -> contents.summaryLabel;\n+                        case HELP -> contents.helpSubNavLabel;\n+                        default -> Text.EMPTY;\n+                    }).add(Entity.NO_BREAK_SPACE));\n@@ -424,125 +357,0 @@\n-            case HELP:\n-                addContentToList(listContents,\n-                        links.createLink(HtmlIds.HELP_NAVIGATION, contents.navHelpNavigation));\n-                addContentToList(listContents,\n-                        links.createLink(HtmlIds.HELP_PAGES, contents.navHelpPages));\n-                Content li = HtmlTree.LI(contents.helpSubNavLabel);\n-                li.add(Entity.NO_BREAK_SPACE);\n-                tree.add(li);\n-                addListToNav(listContents, tree);\n-                break;\n-\n-            default:\n-                break;\n-        }\n-    }\n-\n-    \/**\n-     * Adds the navigation summary link.\n-     *\n-     * @param members members to be linked\n-     * @param vmt the visible member table\n-     * @param kind the visible member kind\n-     * @param listContents the list of contents\n-     *\/\n-    private void addTypeSummaryLink(SortedSet<? extends Element> members,\n-            VisibleMemberTable vmt,\n-            VisibleMemberTable.Kind kind, List<Content> listContents) {\n-        if (!members.isEmpty()) {\n-            addTypeSummaryLink(null, kind, true, listContents);\n-            return;\n-        }\n-        Set<TypeElement> visibleClasses = vmt.getVisibleTypeElements();\n-        for (TypeElement t : visibleClasses) {\n-            if (configuration.getVisibleMemberTable(t).hasVisibleMembers(kind)) {\n-                addTypeSummaryLink(null, kind, true, listContents);\n-                return;\n-            }\n-        }\n-        addTypeSummaryLink(null, kind, false, listContents);\n-    }\n-\n-    \/**\n-     * Adds the navigation Type summary link.\n-     *\n-     * @param typeElement the Type being documented\n-     * @param kind the kind of member being documented\n-     * @param link true if the members are listed and need to be linked\n-     * @param listContents the list of contents to which the summary will be added\n-     *\/\n-    private void addTypeSummaryLink(TypeElement typeElement, VisibleMemberTable.Kind kind, boolean link,\n-            List<Content> listContents) {\n-        switch (kind) {\n-            case CONSTRUCTORS:\n-                if (link) {\n-                    addContentToList(listContents,\n-                            links.createLink(HtmlIds.CONSTRUCTOR_SUMMARY, contents.navConstructor));\n-                } else {\n-                    addContentToList(listContents, contents.navConstructor);\n-                }\n-                break;\n-            case ENUM_CONSTANTS:\n-                if (link) {\n-                    if (typeElement == null) {\n-                        addContentToList(listContents,\n-                                links.createLink(HtmlIds.ENUM_CONSTANT_SUMMARY, contents.navEnum));\n-                    } else {\n-                        addContentToList(listContents,\n-                                links.createLink( htmlIds.forInheritedEnumConstants(typeElement), contents.navEnum));\n-                    }\n-                } else {\n-                    addContentToList(listContents, contents.navEnum);\n-                }\n-                break;\n-            case FIELDS:\n-                if (link) {\n-                    if (typeElement == null) {\n-                        addContentToList(listContents,\n-                                links.createLink(HtmlIds.FIELD_SUMMARY, contents.navField));\n-                    } else {\n-                        addContentToList(listContents,\n-                                links.createLink(htmlIds.forInheritedFields(typeElement), contents.navField));\n-                    }\n-                } else {\n-                    addContentToList(listContents, contents.navField);\n-                }\n-                break;\n-            case METHODS:\n-                if (link) {\n-                    if (typeElement == null) {\n-                        addContentToList(listContents,\n-                                links.createLink(HtmlIds.METHOD_SUMMARY, contents.navMethod));\n-                    } else {\n-                        addContentToList(listContents,\n-                                links.createLink(htmlIds.forInheritedMethods(typeElement), contents.navMethod));\n-                    }\n-                } else {\n-                    addContentToList(listContents, contents.navMethod);\n-                }\n-                break;\n-            case INNER_CLASSES:\n-                if (link) {\n-                    if (typeElement == null) {\n-                        addContentToList(listContents,\n-                                links.createLink(HtmlIds.NESTED_CLASS_SUMMARY, contents.navNested));\n-                    } else {\n-                        addContentToList(listContents,\n-                                links.createLink(htmlIds.forInheritedClasses(typeElement), contents.navNested));\n-                    }\n-                } else {\n-                    addContentToList(listContents, contents.navNested);\n-                }\n-                break;\n-            case PROPERTIES:\n-                if (link) {\n-                    if (typeElement == null) {\n-                        addContentToList(listContents,\n-                                links.createLink(HtmlIds.PROPERTY_SUMMARY, contents.navProperty));\n-                    } else {\n-                        addContentToList(listContents,\n-                                links.createLink(htmlIds.forInheritedProperties(typeElement), contents.navProperty));\n-                    }\n-                } else {\n-                    addContentToList(listContents, contents.navProperty);\n-                }\n-                break;\n@@ -554,47 +362,0 @@\n-    \/**\n-     * Adds the navigation Type summary link.\n-     *\n-     * @param label the label to be added\n-     * @param kind the kind of member being documented\n-     * @param listContents the list of contents to which the summary will be added\n-     *\/\n-    private void addAnnotationTypeSummaryLink(String label, VisibleMemberTable.Kind kind, List<Content> listContents) {\n-        AbstractMemberWriter writer = ((AbstractMemberWriter) memberSummaryBuilder.\n-                getMemberSummaryWriter(kind));\n-        if (writer == null) {\n-            addContentToList(listContents, contents.getContent(label));\n-        } else {\n-            boolean link = memberSummaryBuilder.getVisibleMemberTable().hasVisibleMembers(kind);\n-            switch (kind) {\n-                case FIELDS:\n-                    if (link) {\n-                        addContentToList(listContents, links.createLink(HtmlIds.FIELD_SUMMARY,\n-                                contents.navField));\n-                    } else {\n-                        addContentToList(listContents, contents.navField);\n-                    }\n-                    break;\n-                case ANNOTATION_TYPE_MEMBER_REQUIRED:\n-                    if (link) {\n-                        addContentToList(listContents, links.createLink(\n-                                HtmlIds.ANNOTATION_TYPE_REQUIRED_ELEMENT_SUMMARY,\n-                                contents.navAnnotationTypeRequiredMember));\n-                    } else {\n-                        addContentToList(listContents, contents.navAnnotationTypeRequiredMember);\n-                    }\n-                    break;\n-                case ANNOTATION_TYPE_MEMBER_OPTIONAL:\n-                    if (link) {\n-                        addContentToList(listContents, links.createLink(\n-                                HtmlIds.ANNOTATION_TYPE_OPTIONAL_ELEMENT_SUMMARY,\n-                                contents.navAnnotationTypeOptionalMember));\n-                    } else {\n-                        addContentToList(listContents, contents.navAnnotationTypeOptionalMember);\n-                    }\n-                    break;\n-                default:\n-                    break;\n-            }\n-        }\n-    }\n-\n@@ -607,23 +368,15 @@\n-        switch (documentedPage) {\n-            case CLASS:\n-                List<Content> listContents = new ArrayList<>();\n-                if (element.getKind() == ElementKind.ANNOTATION_TYPE) {\n-                    addAnnotationTypeDetailLink(listContents);\n-                } else {\n-                    TypeElement typeElement = (TypeElement) element;\n-                    for (VisibleMemberTable.Kind kind : detailSet) {\n-                        AbstractMemberWriter writer\n-                                = ((AbstractMemberWriter) memberSummaryBuilder.\n-                                getMemberSummaryWriter(kind));\n-                        if (kind == ENUM_CONSTANTS && !configuration.utils.isEnum(typeElement)) {\n-                            continue;\n-                        }\n-                        if (kind == CONSTRUCTORS && configuration.utils.isEnum(typeElement)) {\n-                            continue;\n-                        }\n-                        if (writer == null) {\n-                            addContentToList(listContents, contents.getNavLinkLabelContent(kind));\n-                        } else {\n-                            addTypeDetailLink(kind, memberSummaryBuilder.hasMembers(kind), listContents);\n-                        }\n-                    }\n+        if (documentedPage == PageMode.CLASS) {\n+            List<Content> listContents = new ArrayList<>();\n+            VisibleMemberTable vmt = configuration.getVisibleMemberTable((TypeElement) element);\n+            if (element.getKind() == ElementKind.ANNOTATION_TYPE) {\n+                \/\/ Handle annotation interfaces separately as required and optional elements\n+                \/\/ share a combined details section.\n+                addTypeDetailLink(FIELDS, !vmt.getVisibleMembers(FIELDS).isEmpty(), listContents);\n+                boolean hasAnnotationElements =\n+                        !vmt.getVisibleMembers(ANNOTATION_TYPE_MEMBER_OPTIONAL).isEmpty()\n+                                || !vmt.getVisibleMembers(ANNOTATION_TYPE_MEMBER_REQUIRED).isEmpty();\n+                addTypeDetailLink(ANNOTATION_TYPE_MEMBER_REQUIRED, hasAnnotationElements, listContents);\n+            } else {\n+                Set<VisibleMemberTable.Kind> detailSet = VisibleMemberTable.Kind.forDetailsOf(element.getKind());\n+                for (VisibleMemberTable.Kind kind : detailSet) {\n+                    addTypeDetailLink(kind, !vmt.getVisibleMembers(kind).isEmpty(), listContents);\n@@ -631,9 +384,7 @@\n-                if (!listContents.isEmpty()) {\n-                    Content li = HtmlTree.LI(contents.detailLabel);\n-                    li.add(Entity.NO_BREAK_SPACE);\n-                    tree.add(li);\n-                    addListToNav(listContents, tree);\n-                }\n-                break;\n-            default:\n-                break;\n+            }\n+            if (!listContents.isEmpty()) {\n+                Content li = HtmlTree.LI(contents.detailLabel);\n+                li.add(Entity.NO_BREAK_SPACE);\n+                tree.add(li);\n+                addListToNav(listContents, tree);\n+            }\n@@ -651,104 +402,12 @@\n-        switch (kind) {\n-            case CONSTRUCTORS:\n-                if (link) {\n-                    addContentToList(listContents, links.createLink(HtmlIds.CONSTRUCTOR_DETAIL, contents.navConstructor));\n-                } else {\n-                    addContentToList(listContents, contents.navConstructor);\n-                }\n-                break;\n-            case ENUM_CONSTANTS:\n-                if (link) {\n-                    addContentToList(listContents, links.createLink(HtmlIds.ENUM_CONSTANT_DETAIL, contents.navEnum));\n-                } else {\n-                    addContentToList(listContents, contents.navEnum);\n-                }\n-                break;\n-            case FIELDS:\n-                if (link) {\n-                    addContentToList(listContents, links.createLink(HtmlIds.FIELD_DETAIL, contents.navField));\n-                } else {\n-                    addContentToList(listContents, contents.navField);\n-                }\n-                break;\n-            case METHODS:\n-                if (link) {\n-                    addContentToList(listContents, links.createLink(HtmlIds.METHOD_DETAIL, contents.navMethod));\n-                } else {\n-                    addContentToList(listContents, contents.navMethod);\n-                }\n-                break;\n-            case PROPERTIES:\n-                if (link) {\n-                    addContentToList(listContents, links.createLink(HtmlIds.PROPERTY_DETAIL, contents.navProperty));\n-                } else {\n-                    addContentToList(listContents, contents.navProperty);\n-                }\n-                break;\n-            default:\n-                break;\n-        }\n-    }\n-\n-    \/**\n-     * Adds the navigation Annotation Type detail link.\n-     *\n-     * @param listContents the list of contents to which the annotation detail will be added.\n-     *\/\n-    protected void addAnnotationTypeDetailLink(List<Content> listContents) {\n-        TypeElement annotationType = (TypeElement) element;\n-        AbstractMemberWriter writerField\n-                = ((AbstractMemberWriter) memberSummaryBuilder.\n-                        getMemberSummaryWriter(FIELDS));\n-        AbstractMemberWriter writerOptional\n-                = ((AbstractMemberWriter) memberSummaryBuilder.\n-                        getMemberSummaryWriter(ANNOTATION_TYPE_MEMBER_OPTIONAL));\n-        AbstractMemberWriter writerRequired\n-                = ((AbstractMemberWriter) memberSummaryBuilder.\n-                        getMemberSummaryWriter(ANNOTATION_TYPE_MEMBER_REQUIRED));\n-        if (writerField != null) {\n-            addAnnotationTypeDetailLink(FIELDS,\n-                    !configuration.utils.getFields(annotationType).isEmpty(),\n-                    listContents);\n-        } else {\n-            addContentToList(listContents, contents.navField);\n-        }\n-        if (writerOptional != null) {\n-            addAnnotationTypeDetailLink(ANNOTATION_TYPE_MEMBER_OPTIONAL,\n-                    !annotationType.getAnnotationMirrors().isEmpty(), listContents);\n-        } else if (writerRequired != null) {\n-            addAnnotationTypeDetailLink(ANNOTATION_TYPE_MEMBER_REQUIRED,\n-                    !annotationType.getAnnotationMirrors().isEmpty(), listContents);\n-        } else {\n-            addContentToList(listContents, contents.navAnnotationTypeMember);\n-        }\n-    }\n-\n-    \/**\n-     * Adds the navigation Annotation Type detail link.\n-     *\n-     * @param type the kind of member being documented\n-     * @param link true if the member details need to be linked\n-     * @param listContents the list of contents to which the annotation detail will be added.\n-     *\/\n-    protected void addAnnotationTypeDetailLink(VisibleMemberTable.Kind type, boolean link, List<Content> listContents) {\n-        switch (type) {\n-            case FIELDS:\n-                if (link) {\n-                    addContentToList(listContents,\n-                            links.createLink(HtmlIds.FIELD_DETAIL, contents.navField));\n-                } else {\n-                    addContentToList(listContents, contents.navField);\n-                }\n-                break;\n-            case ANNOTATION_TYPE_MEMBER_REQUIRED:\n-            case ANNOTATION_TYPE_MEMBER_OPTIONAL:\n-                if (link) {\n-                    addContentToList(listContents, links.createLink(HtmlIds.ANNOTATION_TYPE_ELEMENT_DETAIL,\n-                            contents.navAnnotationTypeMember));\n-                } else {\n-                    addContentToList(listContents, contents.navAnnotationTypeMember);\n-                }\n-                break;\n-            default:\n-                break;\n-        }\n+        addContentToList(listContents, switch (kind) {\n+            case CONSTRUCTORS -> links.createLink(HtmlIds.CONSTRUCTOR_DETAIL, contents.navConstructor, link);\n+            case ENUM_CONSTANTS -> links.createLink(HtmlIds.ENUM_CONSTANT_DETAIL, contents.navEnum, link);\n+            case FIELDS -> links.createLink(HtmlIds.FIELD_DETAIL, contents.navField, link);\n+            case METHODS -> links.createLink(HtmlIds.METHOD_DETAIL, contents.navMethod, link);\n+            case PROPERTIES -> links.createLink(HtmlIds.PROPERTY_DETAIL, contents.navProperty, link);\n+            case ANNOTATION_TYPE_MEMBER_REQUIRED,\n+                 ANNOTATION_TYPE_MEMBER_OPTIONAL ->\n+                    links.createLink(HtmlIds.ANNOTATION_TYPE_ELEMENT_DETAIL,\n+                            contents.navAnnotationTypeMember, link);\n+            default -> Text.EMPTY;\n+        });\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/Navigation.java","additions":63,"deletions":404,"binary":false,"changes":467,"status":"modified"},{"patch":"@@ -28,0 +28,2 @@\n+import java.util.ArrayList;\n+import java.util.Arrays;\n@@ -30,0 +32,3 @@\n+import java.util.function.Predicate;\n+import java.util.regex.Pattern;\n+import java.util.stream.Collectors;\n@@ -41,0 +46,1 @@\n+import jdk.javadoc.internal.doclets.formats.html.markup.HtmlId;\n@@ -71,0 +77,3 @@\n+    private List<PackageElement> relatedPackages;\n+    private SortedSet<TypeElement> allClasses;\n+\n@@ -78,0 +87,5 @@\n+    \/\/ Maximum number of subpackages and sibling packages to list in related packages table\n+    private final static int MAX_SUBPACKAGES = 20;\n+    private final static int MAX_SIBLING_PACKAGES = 5;\n+\n+\n@@ -94,0 +108,1 @@\n+        computePackageData();\n@@ -129,0 +144,45 @@\n+    private void computePackageData() {\n+        relatedPackages = findRelatedPackages();\n+        boolean isSpecified = utils.isSpecified(packageElement);\n+        allClasses = filterClasses(isSpecified\n+                ? utils.getAllClasses(packageElement)\n+                : configuration.typeElementCatalog.allClasses(packageElement));\n+    }\n+\n+    private SortedSet<TypeElement> filterClasses(SortedSet<TypeElement> types) {\n+        List<TypeElement> typeList = types\n+                .stream()\n+                .filter(te -> utils.isCoreClass(te) && configuration.isGeneratedDoc(te))\n+                .collect(Collectors.toList());\n+        return utils.filterOutPrivateClasses(typeList, options.javafx());\n+    }\n+\n+    private List<PackageElement> findRelatedPackages() {\n+        String pkgName = packageElement.getQualifiedName().toString();\n+\n+        \/\/ always add super package\n+        int lastdot = pkgName.lastIndexOf('.');\n+        String pkgPrefix = lastdot > 0 ? pkgName.substring(0, lastdot) : null;\n+        List<PackageElement> packages = new ArrayList<>(\n+                filterPackages(p -> p.getQualifiedName().toString().equals(pkgPrefix)));\n+\n+        \/\/ add subpackages unless there are very many of them\n+        Pattern subPattern = Pattern.compile(pkgName.replace(\".\", \"\\\\.\") + \"\\\\.\\\\w+\");\n+        List<PackageElement> subpackages = filterPackages(\n+                p -> subPattern.matcher(p.getQualifiedName().toString()).matches());\n+        if (subpackages.size() <= MAX_SUBPACKAGES) {\n+            packages.addAll(subpackages);\n+        }\n+\n+        \/\/ only add sibling packages if we are beneath threshold, and number of siblings is beneath threshold as well\n+        if (pkgPrefix != null && packages.size() <= MAX_SIBLING_PACKAGES) {\n+            Pattern siblingPattern = Pattern.compile(pkgPrefix.replace(\".\", \"\\\\.\") + \"\\\\.\\\\w+\");\n+\n+            List<PackageElement> siblings = filterPackages(\n+                    p -> siblingPattern.matcher(p.getQualifiedName().toString()).matches());\n+            if (siblings.size() <= MAX_SIBLING_PACKAGES) {\n+                packages.addAll(siblings);\n+            }\n+        }\n+        return packages;\n+    }\n@@ -134,1 +194,8 @@\n-                .setNavLinkModule(linkContent);\n+                .setNavLinkModule(linkContent)\n+                .setSubNavLinks(() -> List.of(\n+                        HtmlTree.LI(links.createLink(HtmlIds.PACKAGE_DESCRIPTION, contents.navDescription,\n+                                !utils.getFullBody(packageElement).isEmpty() && !options.noComment())),\n+                        HtmlTree.LI(links.createLink(HtmlIds.RELATED_PACKAGE_SUMMARY, contents.relatedPackages,\n+                                relatedPackages != null && !relatedPackages.isEmpty())),\n+                        HtmlTree.LI(links.createLink(HtmlIds.CLASS_SUMMARY, contents.navClassesAndInterfaces,\n+                                allClasses != null && !allClasses.isEmpty()))));\n@@ -166,1 +233,1 @@\n-    public void addRelatedPackagesSummary(List<PackageElement> relatedPackages, Content summaryContentTree) {\n+    public void addRelatedPackagesSummary(Content summaryContentTree) {\n@@ -175,5 +242,0 @@\n-    @Override\n-    public void addInterfaceSummary(SortedSet<TypeElement> interfaces, Content summaryContentTree) {\n-        TableHeader tableHeader= new TableHeader(contents.interfaceLabel, contents.descriptionLabel);\n-        addClassesSummary(interfaces, contents.interfaceSummary, tableHeader, summaryContentTree);\n-    }\n@@ -181,48 +243,20 @@\n-    @Override\n-    public void addClassSummary(SortedSet<TypeElement> classes, Content summaryContentTree) {\n-        TableHeader tableHeader= new TableHeader(contents.classLabel, contents.descriptionLabel);\n-        addClassesSummary(classes, contents.classSummary, tableHeader, summaryContentTree);\n-    }\n-\n-    @Override\n-    public void addEnumSummary(SortedSet<TypeElement> enums, Content summaryContentTree) {\n-        TableHeader tableHeader= new TableHeader(contents.enum_, contents.descriptionLabel);\n-        addClassesSummary(enums, contents.enumSummary, tableHeader, summaryContentTree);\n-    }\n-\n-    @Override\n-    public void addRecordSummary(SortedSet<TypeElement> records, Content summaryContentTree) {\n-        TableHeader tableHeader= new TableHeader(contents.record, contents.descriptionLabel);\n-        addClassesSummary(records, contents.recordSummary, tableHeader, summaryContentTree);\n-    }\n-\n-    @Override\n-    public void addExceptionSummary(SortedSet<TypeElement> exceptions, Content summaryContentTree) {\n-        TableHeader tableHeader= new TableHeader(contents.exception, contents.descriptionLabel);\n-        addClassesSummary(exceptions, contents.exceptionSummary, tableHeader, summaryContentTree);\n-    }\n-\n-    @Override\n-    public void addErrorSummary(SortedSet<TypeElement> errors, Content summaryContentTree) {\n-        TableHeader tableHeader= new TableHeader(contents.error, contents.descriptionLabel);\n-        addClassesSummary(errors, contents.errorSummary, tableHeader, summaryContentTree);\n-    }\n-\n-    @Override\n-    public void addAnnotationTypeSummary(SortedSet<TypeElement> annoTypes, Content summaryContentTree) {\n-        TableHeader tableHeader= new TableHeader(contents.annotationType, contents.descriptionLabel);\n-        addClassesSummary(annoTypes, contents.annotationTypeSummary, tableHeader, summaryContentTree);\n-    }\n-\n-    public void addClassesSummary(SortedSet<TypeElement> classes, String label,\n-            TableHeader tableHeader, Content summaryContentTree) {\n-        if(!classes.isEmpty()) {\n-            Table table = new Table(HtmlStyle.summaryTable)\n-                    .setCaption(Text.of(label))\n-                    .setHeader(tableHeader)\n-                    .setColumnStyles(HtmlStyle.colFirst, HtmlStyle.colLast);\n-\n-            for (TypeElement klass : classes) {\n-                if (!utils.isCoreClass(klass) || !configuration.isGeneratedDoc(klass)) {\n-                    continue;\n-                }\n+    \/**\n+     * Add all types to the content tree.\n+     *\n+     * @param summaryContentTree HtmlTree content to which the links will be added\n+     *\/\n+    public void addAllClassesAndInterfacesSummary(Content summaryContentTree) {\n+        Table table = new Table(HtmlStyle.summaryTable)\n+                .setHeader(new TableHeader(contents.classLabel, contents.descriptionLabel))\n+                .setColumnStyles(HtmlStyle.colFirst, HtmlStyle.colLast)\n+                .setId(HtmlIds.CLASS_SUMMARY)\n+                .setDefaultTab(contents.allClassesAndInterfaces)\n+                .addTab(contents.interfacesString, utils::isInterface)\n+                .addTab(contents.classesString, e -> utils.isOrdinaryClass((TypeElement)e))\n+                .addTab(contents.enumsString, utils::isEnum)\n+                .addTab(contents.recordsString, e -> utils.isRecord((TypeElement)e))\n+                .addTab(contents.exceptionsString, e -> utils.isException((TypeElement)e))\n+                .addTab(contents.errorsString, e -> utils.isError((TypeElement)e))\n+                .addTab(contents.annotationTypesString, utils::isAnnotationType);\n+        for (TypeElement typeElement : allClasses) {\n+            if (typeElement != null && utils.isCoreClass(typeElement)) {\n@@ -230,1 +264,1 @@\n-                        configuration, HtmlLinkInfo.Kind.PACKAGE, klass));\n+                        configuration, HtmlLinkInfo.Kind.PACKAGE, typeElement));\n@@ -232,4 +266,4 @@\n-                addPreviewSummary(klass, description);\n-                if (utils.isDeprecated(klass)) {\n-                    description.add(getDeprecatedPhrase(klass));\n-                    List<? extends DeprecatedTree> tags = utils.getDeprecatedTrees(klass);\n+                addPreviewSummary(typeElement, description);\n+                if (utils.isDeprecated(typeElement)) {\n+                    description.add(getDeprecatedPhrase(typeElement));\n+                    List<? extends DeprecatedTree> tags = utils.getDeprecatedTrees(typeElement);\n@@ -237,1 +271,1 @@\n-                        addSummaryDeprecatedComment(klass, tags.get(0), description);\n+                        addSummaryDeprecatedComment(typeElement, tags.get(0), description);\n@@ -240,1 +274,1 @@\n-                    addSummaryComment(klass, description);\n+                    addSummaryComment(typeElement, description);\n@@ -242,1 +276,1 @@\n-                table.addRow(classLink, description);\n+                table.addRow(typeElement, Arrays.asList(classLink, description));\n@@ -244,0 +278,2 @@\n+        }\n+        if (!table.isEmpty()) {\n@@ -245,0 +281,3 @@\n+            if (table.needsScript()) {\n+                getMainBodyScript().append(table.getScript());\n+            }\n@@ -253,0 +292,1 @@\n+                    .setId(HtmlIds.RELATED_PACKAGE_SUMMARY)\n@@ -343,0 +383,6 @@\n+\n+    private List<PackageElement> filterPackages(Predicate<? super PackageElement> filter) {\n+        return configuration.packages.stream()\n+                .filter(p -> p != packageElement && filter.test(p))\n+                .collect(Collectors.toList());\n+    }\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/PackageWriterImpl.java","additions":109,"deletions":63,"binary":false,"changes":172,"status":"modified"},{"patch":"@@ -57,2 +57,2 @@\n-     * @param id      the position of the link in the file\n-     * @param label      the content for the link\n+     * @param id    the position of the link in the file\n+     * @param label the content for the link\n@@ -66,0 +66,13 @@\n+    \/**\n+     * Creates a link of the form {@code <a href=\"#id\">label<\/a>} if {@code link}\n+     * is {@code true}, or else just returns {@code label}.\n+     *\n+     * @param id    the position of the link in the file\n+     * @param label the content for the link\n+     * @param link  whether to create a link or just return the label\n+     * @return a content tree for the link or just the label\n+     *\/\n+    public Content createLink(HtmlId id, Content label, boolean link) {\n+        return link ? createLink(id, label) : label;\n+    }\n+\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/markup\/Links.java","additions":15,"deletions":2,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -58,1 +58,3 @@\n-doclet.navModuleDescription=Description\n+doclet.Package_Sub_Nav=Package:\n+doclet.navClassesAndInterfaces=Classes and Interfaces\n+doclet.navDescription=Description\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/standard.properties","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -71,1 +71,0 @@\n-     * @param relatedPackages the interfaces to document.\n@@ -74,1 +73,1 @@\n-    void addRelatedPackagesSummary(List<PackageElement> relatedPackages, Content summaryContentTree);\n+    void addRelatedPackagesSummary(Content summaryContentTree);\n@@ -77,1 +76,1 @@\n-     * Adds the table of interfaces to the documentation tree.\n+     * Adds the table of all classes and interfaces to the documentation tree.\n@@ -79,1 +78,0 @@\n-     * @param interfaces the interfaces to document.\n@@ -82,49 +80,1 @@\n-    void addInterfaceSummary(SortedSet<TypeElement> interfaces, Content summaryContentTree);\n-\n-    \/**\n-     * Adds the table of classes to the documentation tree.\n-     *\n-     * @param classes the classes to document.\n-     * @param summaryContentTree the content tree to which the summaries will be added\n-     *\/\n-    void addClassSummary(SortedSet<TypeElement> classes, Content summaryContentTree);\n-\n-    \/**\n-     * Adds the table of enums to the documentation tree.\n-     *\n-     * @param enums the enums to document.\n-     * @param summaryContentTree the content tree to which the summaries will be added\n-     *\/\n-    void addEnumSummary(SortedSet<TypeElement> enums, Content summaryContentTree);\n-\n-    \/**\n-     * Adds the table of records to the documentation tree.\n-     *\n-     * @param records the records to document.\n-     * @param summaryContentTree the content tree to which the summaries will be added\n-     *\/\n-    void addRecordSummary(SortedSet<TypeElement> records, Content summaryContentTree);\n-\n-    \/**\n-     * Adds the table of exceptions to the documentation tree.\n-     *\n-     * @param exceptions the exceptions to document.\n-     * @param summaryContentTree the content tree to which the summaries will be added\n-     *\/\n-    void addExceptionSummary(SortedSet<TypeElement> exceptions, Content summaryContentTree);\n-\n-    \/**\n-     * Adds the table of errors to the documentation tree.\n-     *\n-     * @param errors the errors to document.\n-     * @param summaryContentTree the content tree to which the summaries will be added\n-     *\/\n-    void addErrorSummary(SortedSet<TypeElement> errors, Content summaryContentTree);\n-\n-    \/**\n-     * Adds the table of annotation types to the documentation tree.\n-     *\n-     * @param annoTypes the annotation types to document.\n-     * @param summaryContentTree the content tree to which the summaries will be added\n-     *\/\n-    void addAnnotationTypeSummary(SortedSet<TypeElement> annoTypes, Content summaryContentTree);\n+    void addAllClassesAndInterfacesSummary(Content summaryContentTree);\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/PackageSummaryWriter.java","additions":3,"deletions":53,"binary":false,"changes":56,"status":"modified"},{"patch":"@@ -169,9 +169,0 @@\n-    \/**\n-     * Returns true if there are members of the given kind, false otherwise.\n-     * @param kind\n-     * @return true if there are members of the given kind, false otherwise\n-     *\/\n-    public boolean hasMembers(VisibleMemberTable.Kind kind) {\n-        return !getVisibleMembers(kind).isEmpty();\n-    }\n-\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/builders\/MemberSummaryBuilder.java","additions":0,"deletions":9,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -28,8 +28,0 @@\n-import java.util.ArrayList;\n-import java.util.List;\n-import java.util.Set;\n-import java.util.SortedSet;\n-import java.util.function.Predicate;\n-import java.util.regex.Pattern;\n-import java.util.stream.Collectors;\n-\n@@ -37,1 +29,0 @@\n-import javax.lang.model.element.TypeElement;\n@@ -65,4 +56,0 @@\n-    \/\/ Maximum number of subpackages and sibling packages to list in related packages table\n-    private final static int MAX_SUBPACKAGES = 20;\n-    private final static int MAX_SIBLING_PACKAGES = 5;\n-\n@@ -159,7 +146,1 @@\n-        buildInterfaceSummary(summariesList);\n-        buildClassSummary(summariesList);\n-        buildEnumSummary(summariesList);\n-        buildRecordSummary(summariesList);\n-        buildExceptionSummary(summariesList);\n-        buildErrorSummary(summariesList);\n-        buildAnnotationTypeSummary(summariesList);\n+        buildAllClassesAndInterfacesSummary(summariesList);\n@@ -176,34 +157,1 @@\n-        List<PackageElement> packages = findRelatedPackages();\n-        if (!packages.isEmpty()) {\n-            packageWriter.addRelatedPackagesSummary(packages, summariesList);\n-        }\n-    }\n-\n-    \/**\n-     * Builds the summary for any interfaces in this package.\n-     *\n-     * @param summariesList the list of summaries to which the summary will be added\n-     *\/\n-    protected void buildInterfaceSummary(Content summariesList) {\n-        SortedSet<TypeElement> ilist = utils.isSpecified(packageElement)\n-                        ? utils.getTypeElementsAsSortedSet(utils.getInterfaces(packageElement))\n-                        : configuration.typeElementCatalog.interfaces(packageElement);\n-        SortedSet<TypeElement> interfaces = utils.filterOutPrivateClasses(ilist, options.javafx());\n-        if (!interfaces.isEmpty()) {\n-            packageWriter.addInterfaceSummary(interfaces, summariesList);\n-        }\n-    }\n-\n-    \/**\n-     * Builds the summary for any classes in this package.\n-     *\n-     * @param summariesList the list of summaries to which the summary will be added\n-     *\/\n-    protected void buildClassSummary(Content summariesList) {\n-        SortedSet<TypeElement> clist = utils.isSpecified(packageElement)\n-            ? utils.getTypeElementsAsSortedSet(utils.getOrdinaryClasses(packageElement))\n-            : configuration.typeElementCatalog.ordinaryClasses(packageElement);\n-        SortedSet<TypeElement> classes = utils.filterOutPrivateClasses(clist, options.javafx());\n-        if (!classes.isEmpty()) {\n-            packageWriter.addClassSummary(classes, summariesList);\n-        }\n+        packageWriter.addRelatedPackagesSummary(summariesList);\n@@ -213,1 +161,1 @@\n-     * Builds the summary for the enum types in this package.\n+     * Builds the summary for all classes and interfaces in this package.\n@@ -217,8 +165,2 @@\n-    protected void buildEnumSummary(Content summariesList) {\n-        SortedSet<TypeElement> elist = utils.isSpecified(packageElement)\n-            ? utils.getTypeElementsAsSortedSet(utils.getEnums(packageElement))\n-            : configuration.typeElementCatalog.enums(packageElement);\n-        SortedSet<TypeElement> enums = utils.filterOutPrivateClasses(elist, options.javafx());\n-        if (!enums.isEmpty()) {\n-            packageWriter.addEnumSummary(enums, summariesList);\n-        }\n+    protected void buildAllClassesAndInterfacesSummary(Content summariesList) {\n+        packageWriter.addAllClassesAndInterfacesSummary(summariesList);\n@@ -227,64 +169,0 @@\n-    \/**\n-     * Builds the summary for any record types in this package.\n-     *\n-     * @param summariesList the list of summaries to which the summary will be added\n-     *\/\n-    protected void buildRecordSummary(Content summariesList) {\n-        SortedSet<TypeElement> rlist = utils.isSpecified(packageElement)\n-                ? utils.getTypeElementsAsSortedSet(utils.getRecords(packageElement))\n-                : configuration.typeElementCatalog.records(packageElement);\n-        SortedSet<TypeElement> records = utils.filterOutPrivateClasses(rlist, options.javafx());\n-        if (!records.isEmpty()) {\n-            packageWriter.addRecordSummary(records, summariesList);\n-        }\n-    }\n-\n-    \/**\n-     * Builds the summary for any exception types in this package.\n-     *\n-     * @param summariesList the list of summaries to which the summary will be added\n-     *\/\n-    protected void buildExceptionSummary(Content summariesList) {\n-        Set<TypeElement> iexceptions =\n-            utils.isSpecified(packageElement)\n-                ? utils.getTypeElementsAsSortedSet(utils.getExceptions(packageElement))\n-                : configuration.typeElementCatalog.exceptions(packageElement);\n-        SortedSet<TypeElement> exceptions = utils.filterOutPrivateClasses(iexceptions,\n-                options.javafx());\n-        if (!exceptions.isEmpty()) {\n-            packageWriter.addExceptionSummary(exceptions, summariesList);\n-        }\n-    }\n-\n-    \/**\n-     * Builds the summary for any error types in this package.\n-     *\n-     * @param summariesList the list of summaries to which the summary will be added\n-     *\/\n-    protected void buildErrorSummary(Content summariesList) {\n-        Set<TypeElement> ierrors =\n-            utils.isSpecified(packageElement)\n-                ? utils.getTypeElementsAsSortedSet(utils.getErrors(packageElement))\n-                : configuration.typeElementCatalog.errors(packageElement);\n-        SortedSet<TypeElement> errors = utils.filterOutPrivateClasses(ierrors, options.javafx());\n-        if (!errors.isEmpty()) {\n-            packageWriter.addErrorSummary(errors, summariesList);\n-        }\n-    }\n-\n-    \/**\n-     * Builds the summary for any annotation types in this package.\n-     *\n-     * @param summariesList the list of summaries to which the summary will be added\n-     *\/\n-    protected void buildAnnotationTypeSummary(Content summariesList) {\n-        SortedSet<TypeElement> iannotationTypes =\n-            utils.isSpecified(packageElement)\n-                ? utils.getTypeElementsAsSortedSet(utils.getAnnotationTypes(packageElement))\n-                : configuration.typeElementCatalog.annotationTypes(packageElement);\n-        SortedSet<TypeElement> annotationTypes = utils.filterOutPrivateClasses(iannotationTypes,\n-                options.javafx());\n-        if (!annotationTypes.isEmpty()) {\n-            packageWriter.addAnnotationTypeSummary(annotationTypes, summariesList);\n-        }\n-    }\n@@ -316,36 +194,0 @@\n-\n-    private List<PackageElement> findRelatedPackages() {\n-        String pkgName = packageElement.getQualifiedName().toString();\n-\n-        \/\/ always add super package\n-        int lastdot = pkgName.lastIndexOf('.');\n-        String pkgPrefix = lastdot > 0 ? pkgName.substring(0, lastdot) : null;\n-        List<PackageElement> packages = new ArrayList<>(\n-                filterPackages(p -> p.getQualifiedName().toString().equals(pkgPrefix)));\n-\n-        \/\/ add subpackages unless there are very many of them\n-        Pattern subPattern = Pattern.compile(pkgName.replace(\".\", \"\\\\.\") + \"\\\\.\\\\w+\");\n-        List<PackageElement> subpackages = filterPackages(\n-                p -> subPattern.matcher(p.getQualifiedName().toString()).matches());\n-        if (subpackages.size() <= MAX_SUBPACKAGES) {\n-            packages.addAll(subpackages);\n-        }\n-\n-        \/\/ only add sibling packages if we are beneath threshold, and number of siblings is beneath threshold as well\n-        if (pkgPrefix != null && packages.size() <= MAX_SIBLING_PACKAGES) {\n-            Pattern siblingPattern = Pattern.compile(pkgPrefix.replace(\".\", \"\\\\.\") + \"\\\\.\\\\w+\");\n-\n-            List<PackageElement> siblings = filterPackages(\n-                    p -> siblingPattern.matcher(p.getQualifiedName().toString()).matches());\n-            if (siblings.size() <= MAX_SIBLING_PACKAGES) {\n-                packages.addAll(siblings);\n-            }\n-        }\n-        return packages;\n-    }\n-\n-    private List<PackageElement> filterPackages(Predicate<? super PackageElement> filter) {\n-        return configuration.packages.stream()\n-                .filter(p -> p != packageElement && filter.test(p))\n-                .collect(Collectors.toList());\n-    }\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/builders\/PackageSummaryBuilder.java","additions":5,"deletions":163,"binary":false,"changes":168,"status":"modified"},{"patch":"@@ -127,8 +127,0 @@\n-doclet.Interface_Summary=Interface Summary\n-doclet.Annotation_Types_Summary=Annotation Types Summary\n-doclet.Annotation_Interfaces_Summary=Annotation Interfaces Summary\n-doclet.Enum_Summary=Enum Summary\n-doclet.Enum_Class_Summary=Enum Class Summary\n-doclet.Exception_Summary=Exception Summary\n-doclet.Error_Summary=Error Summary\n-doclet.Class_Summary=Class Summary\n@@ -136,1 +128,0 @@\n-doclet.Related_Packages=Related Packages\n@@ -144,1 +135,0 @@\n-doclet.Record_Class_Summary=Record Class Summary\n@@ -149,0 +139,1 @@\n+doclet.Related_Packages=Related Packages\n@@ -155,0 +146,1 @@\n+doclet.All_Classes_And_Interfaces=All Classes and Interfaces\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/resources\/doclets.properties","additions":2,"deletions":10,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -356,1 +356,1 @@\n-    padding:0px;\n+    padding:0;\n@@ -359,1 +359,1 @@\n-    margin:0px;\n+    margin:0;\n@@ -381,1 +381,4 @@\n-\n+div.table-tabs {\n+    padding:10px 0 0 1px;\n+    margin:0;\n+}\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/resources\/stylesheet.css","additions":6,"deletions":3,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -602,1 +602,1 @@\n-        if (isEnum(te) || isInterface(te) || isAnnotationType(te)) {\n+        if (isEnum(te) || isInterface(te) || isAnnotationType(te) || isRecord(te)) {\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/util\/Utils.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -30,0 +30,1 @@\n+import javax.lang.model.element.ElementKind;\n@@ -109,2 +110,32 @@\n-        public static final EnumSet<Kind> summarySet = EnumSet.range(INNER_CLASSES, METHODS);\n-        public static final EnumSet<Kind> detailSet = EnumSet.range(ENUM_CONSTANTS, METHODS);\n+        private static final EnumSet<Kind> defaultSummarySet = EnumSet.of(\n+                INNER_CLASSES, FIELDS, CONSTRUCTORS, METHODS);\n+        private static final EnumSet<Kind> enumSummarySet = EnumSet.of(\n+                INNER_CLASSES, ENUM_CONSTANTS, FIELDS, METHODS);\n+        private static final EnumSet<Kind> annotationSummarySet = EnumSet.of(\n+                FIELDS, ANNOTATION_TYPE_MEMBER_OPTIONAL, ANNOTATION_TYPE_MEMBER_REQUIRED);\n+        private static final EnumSet<Kind> defaultDetailSet = EnumSet.of(\n+                FIELDS, CONSTRUCTORS, METHODS);\n+        private static final EnumSet<Kind> enumDetailSet = EnumSet.of(\n+                ENUM_CONSTANTS, FIELDS, METHODS);\n+\n+        \/**\n+         * {@return the set of possible member kinds for the summaries section of a type element}\n+         * @param kind the kind of type element being documented\n+         *\/\n+        public static Set<Kind> forSummariesOf(ElementKind kind) {\n+            return switch (kind) {\n+                case ANNOTATION_TYPE -> annotationSummarySet;\n+                case ENUM -> enumSummarySet;\n+                default -> defaultSummarySet;\n+            };\n+        }\n+\n+        \/**\n+         * {@return the set of possible member kinds for the details section of a type element}\n+         * @param kind the kind of type element being documented\n+         *\/\n+        public static Set<Kind> forDetailsOf(ElementKind kind) {\n+            return kind == ElementKind.ENUM\n+                    ? enumDetailSet\n+                    : defaultDetailSet;\n+        }\n@@ -121,3 +152,3 @@\n-    private List<VisibleMemberTable> allSuperclasses;\n-    private List<VisibleMemberTable> allSuperinterfaces;\n-    private List<VisibleMemberTable> parents;\n+    private final List<VisibleMemberTable> allSuperclasses;\n+    private final List<VisibleMemberTable> allSuperinterfaces;\n+    private final List<VisibleMemberTable> parents;\n@@ -126,1 +157,1 @@\n-    private Map<ExecutableElement, PropertyMembers> propertyMap = new HashMap<>();\n+    private final Map<ExecutableElement, PropertyMembers> propertyMap = new HashMap<>();\n@@ -297,1 +328,2 @@\n-     * Returns true if this table contains visible members.\n+     * Returns true if this table contains visible members of\n+     * any kind, including inherited members.\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/util\/VisibleMemberTable.java","additions":39,"deletions":7,"binary":false,"changes":46,"status":"modified"},{"patch":"@@ -72,1 +72,1 @@\n-                    <div class=\"caption\"><span>Class Summary<\/span><\/div>\n+                    <div class=\"caption\"><span>Classes<\/span><\/div>\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testHtmlTableStyles\/TestHtmlTableStyles.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -87,3 +87,1 @@\n-                    <div class=\"summary-table two-column-summary\">\"\"\",\n-                \"\"\"\n-                    <div class=\"summary-table two-column-summary\">\"\"\");\n+                    <div class=\"summary-table two-column-summary\" aria-labelledby=\"class-summary-tab0\">\"\"\");\n@@ -93,3 +91,1 @@\n-                    <div class=\"summary-table two-column-summary\">\"\"\",\n-                \"\"\"\n-                    <div class=\"summary-table two-column-summary\">\"\"\");\n+                    <div class=\"summary-table two-column-summary\" aria-labelledby=\"class-summary-tab0\">\"\"\");\n@@ -309,3 +305,13 @@\n-                    <div class=\"caption\"><span>Class Summary<\/span><\/div>\"\"\",\n-                \"\"\"\n-                    <div class=\"caption\"><span>Interface Summary<\/span><\/div>\"\"\");\n+                    <div class=\"table-tabs\" role=\"tablist\" aria-orientation=\"horizontal\"><button id=\\\n+                    \"class-summary-tab0\" role=\"tab\" aria-selected=\"true\" aria-controls=\"class-summar\\\n+                    y.tabpanel\" tabindex=\"0\" onkeydown=\"switchTab(event)\" onclick=\"show('class-summa\\\n+                    ry', 'class-summary', 2)\" class=\"active-table-tab\">All Classes and Interfaces<\/b\\\n+                    utton>\\\n+                    <button id=\"class-summary-tab1\" role=\"tab\" aria-selected=\"false\" aria-controls=\"\\\n+                    class-summary.tabpanel\" tabindex=\"-1\" onkeydown=\"switchTab(event)\" onclick=\"show\\\n+                    ('class-summary', 'class-summary-tab1', 2)\" class=\"table-tab\">Interfaces<\/button\\\n+                    >\\\n+                    <button id=\"class-summary-tab2\" role=\"tab\" aria-selected=\"false\" aria-controls=\"\\\n+                    class-summary.tabpanel\" tabindex=\"-1\" onkeydown=\"switchTab(event)\" onclick=\"show\\\n+                    ('class-summary', 'class-summary-tab2', 2)\" class=\"table-tab\">Classes<\/button><\/\\\n+                    div>\"\"\");\n@@ -315,3 +321,16 @@\n-                    <div class=\"caption\"><span>Enum Class Summary<\/span><\/div>\"\"\",\n-                \"\"\"\n-                    <div class=\"caption\"><span>Annotation Interfaces Summary<\/span><\/div>\"\"\");\n+                    <div class=\"table-tabs\" role=\"tablist\" aria-orientation=\"horizontal\"><button id=\\\n+                    \"class-summary-tab0\" role=\"tab\" aria-selected=\"true\" aria-controls=\"class-summar\\\n+                    y.tabpanel\" tabindex=\"0\" onkeydown=\"switchTab(event)\" onclick=\"show('class-summa\\\n+                    ry', 'class-summary', 2)\" class=\"active-table-tab\">All Classes and Interfaces<\/b\\\n+                    utton>\\\n+                    <button id=\"class-summary-tab2\" role=\"tab\" aria-selected=\"false\" aria-controls=\"\\\n+                    class-summary.tabpanel\" tabindex=\"-1\" onkeydown=\"switchTab(event)\" onclick=\"show\\\n+                    ('class-summary', 'class-summary-tab2', 2)\" class=\"table-tab\">Classes<\/button>\\\n+                    <button id=\"class-summary-tab3\" role=\"tab\" aria-selected=\"false\" aria-controls=\"\\\n+                    class-summary.tabpanel\" tabindex=\"-1\" onkeydown=\"switchTab(event)\" onclick=\"show\\\n+                    ('class-summary', 'class-summary-tab3', 2)\" class=\"table-tab\">Enum Classes<\/butt\\\n+                    on>\\\n+                    <button id=\"class-summary-tab7\" role=\"tab\" aria-selected=\"false\" aria-controls=\"\\\n+                    class-summary.tabpanel\" tabindex=\"-1\" onkeydown=\"switchTab(event)\" onclick=\"show\\\n+                    ('class-summary', 'class-summary-tab7', 2)\" class=\"table-tab\">Annotation Interfa\\\n+                    ces<\/button><\/div>\"\"\");\n@@ -430,3 +449,0 @@\n-                    <div class=\"table-header col-last\">Description<\/div>\"\"\",\n-                \"\"\"\n-                    <div class=\"table-header col-first\">Interface<\/div>\n@@ -437,4 +453,1 @@\n-                    <div class=\"table-header col-first\">Enum Class<\/div>\n-                    <div class=\"table-header col-last\">Description<\/div>\"\"\",\n-                \"\"\"\n-                    <div class=\"table-header col-first\">Annotation Interface<\/div>\n+                    <div class=\"table-header col-first\">Class<\/div>\n@@ -562,2 +575,3 @@\n-                    <div class=\"col-first even-row-color\"><a href=\"I1.html\" title=\"interface in pkg1\">I1<\/a><\/div>\n-                    <div class=\"col-last even-row-color\">\n+                    <div class=\"col-first odd-row-color class-summary class-summary-tab1\"><a \\\n+                    href=\"I1.html\" title=\"interface in pkg1\">I1<\/a><\/div>\n+                    <div class=\"col-last odd-row-color class-summary class-summary-tab1\">\n@@ -567,2 +581,3 @@\n-                    <div class=\"col-first even-row-color\"><a href=\"C1.html\" title=\"class in pkg1\">C1<\/a><\/div>\n-                    <div class=\"col-last even-row-color\">\n+                    <div class=\"col-first even-row-color class-summary class-summary-tab2\"><a\\\n+                     href=\"C1.html\" title=\"class in pkg1\">C1<\/a><\/div>\n+                    <div class=\"col-last even-row-color class-summary class-summary-tab2\">\n@@ -574,3 +589,3 @@\n-                    <div class=\"col-first even-row-color\"><a href=\"C2.ModalExclusionType.html\" title\\\n-                    =\"enum class in pkg2\">C2.ModalExclusionType<\/a><\/div>\n-                    <div class=\"col-last even-row-color\">\n+                    <div class=\"col-first odd-row-color class-summary class-summary-tab3\"><a \\\n+                    href=\"C2.ModalExclusionType.html\" title=\"enum class in pkg2\">C2.ModalExclusionType<\/a><\/div>\n+                    <div class=\"col-last odd-row-color class-summary class-summary-tab3\">\n@@ -580,2 +595,3 @@\n-                    <div class=\"col-first even-row-color\"><a href=\"C3.html\" title=\"annotation interface in pkg2\">C3<\/a><\/div>\n-                    <div class=\"col-last even-row-color\">\n+                    <div class=\"col-first even-row-color class-summary class-summary-tab7\"><a\\\n+                     href=\"C3.html\" title=\"annotation interface in pkg2\">C3<\/a><\/div>\n+                    <div class=\"col-last even-row-color class-summary class-summary-tab7\">\n@@ -726,2 +742,3 @@\n-                    <div class=\"col-first even-row-color\"><a href=\"I1.html\" title=\"interface in pkg1\">I1<\/a><\/div>\n-                    <div class=\"col-last even-row-color\"><\/div>\"\"\",\n+                    <div class=\"col-first odd-row-color class-summary class-summary-tab1\"><a \\\n+                    href=\"I1.html\" title=\"interface in pkg1\">I1<\/a><\/div>\n+                    <div class=\"col-last odd-row-color class-summary class-summary-tab1\"><\/div>\"\"\",\n@@ -729,2 +746,3 @@\n-                    <div class=\"col-first even-row-color\"><a href=\"C1.html\" title=\"class in pkg1\">C1<\/a><\/div>\n-                    <div class=\"col-last even-row-color\"><\/div>\"\"\");\n+                    <div class=\"col-first even-row-color class-summary class-summary-tab2\"><a\\\n+                     href=\"C1.html\" title=\"class in pkg1\">C1<\/a><\/div>\n+                    <div class=\"col-last even-row-color class-summary class-summary-tab2\"><\/div>\"\"\");\n@@ -734,3 +752,4 @@\n-                    <div class=\"col-first even-row-color\"><a href=\"C2.ModalExclusionType.html\" title\\\n-                    =\"enum class in pkg2\">C2.ModalExclusionType<\/a><\/div>\n-                    <div class=\"col-last even-row-color\"><\/div>\"\"\",\n+                    <div class=\"col-first odd-row-color class-summary class-summary-tab3\"><a \\\n+                    href=\"C2.ModalExclusionType.html\" title=\"enum class in pkg2\">C2.ModalExclusionTyp\\\n+                    e<\/a><\/div>\n+                    <div class=\"col-last odd-row-color class-summary class-summary-tab3\"><\/div>\"\"\",\n@@ -738,2 +757,3 @@\n-                    <div class=\"col-first even-row-color\"><a href=\"C3.html\" title=\"annotation interface in pkg2\">C3<\/a><\/div>\n-                    <div class=\"col-last even-row-color\"><\/div>\"\"\");\n+                    <div class=\"col-first even-row-color class-summary class-summary-tab7\"><a\\\n+                     href=\"C3.html\" title=\"annotation interface in pkg2\">C3<\/a><\/div>\n+                    <div class=\"col-last even-row-color class-summary class-summary-tab7\"><\/div>\"\"\");\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testHtmlTableTags\/TestHtmlTableTags.java","additions":57,"deletions":37,"binary":false,"changes":94,"status":"modified"},{"patch":"@@ -100,1 +100,1 @@\n-                    <div class=\"summary-table two-column-summary\">\"\"\",\n+                    <div class=\"summary-table two-column-summary\" aria-labelledby=\"class-summary-tab0\">\"\"\",\n@@ -121,1 +121,2 @@\n-                        <div class=\"caption\"><span>Class Summary<\/span><\/div>\n+                        <div id=\"class-summary\">\n+                        <div class=\"caption\"><span>Classes<\/span><\/div>\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testHtmlVersion\/TestHtmlVersion.java","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -1395,5 +1395,5 @@\n-                    <div class=\"table-tabs\" role=\"tablist\" aria-orientation=\"horizontal\">\\\n-                    <button id=\"all-classes-table-tab0\" role=\"tab\" aria-selected=\"true\" aria-control\\\n-                    s=\"all-classes-table.tabpanel\" tabindex=\"0\" onkeydown=\"switchTab(event)\" onclick\\\n-                    =\"show('all-classes-table', 'all-classes-table', 2)\" class=\"active-table-tab\">Al\\\n-                    l Classes<\/button>\\\n+                    <div class=\"table-tabs\" role=\"tablist\" aria-orientation=\"horizontal\"><button id=\\\n+                    \"all-classes-table-tab0\" role=\"tab\" aria-selected=\"true\" aria-controls=\"all-clas\\\n+                    ses-table.tabpanel\" tabindex=\"0\" onkeydown=\"switchTab(event)\" onclick=\"show('all\\\n+                    -classes-table', 'all-classes-table', 2)\" class=\"active-table-tab\">All Classes a\\\n+                    nd Interfaces<\/button>\\\n@@ -1403,2 +1403,2 @@\n-                    ass Summary<\/button>\\\n-                    <button id=\"all-classes-table-tab6\" role=\"tab\" aria-selected=\"false\" aria-contro\\\n+                    asses<\/button>\\\n+                    <button id=\"all-classes-table-tab7\" role=\"tab\" aria-selected=\"false\" aria-contro\\\n@@ -1406,3 +1406,2 @@\n-                    ck=\"show('all-classes-table', 'all-classes-table-tab6', 2)\" class=\"table-tab\">An\\\n-                    notation Interfaces Summary<\/button>\\\n-                    <\/div>\n+                    ck=\"show('all-classes-table', 'all-classes-table-tab7', 2)\" class=\"table-tab\">An\\\n+                    notation Interfaces<\/button><\/div>\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testModules\/TestModules.java","additions":9,"deletions":10,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -90,1 +90,1 @@\n-                    <div class=\"caption\"><span>Class Summary<\/span><\/div>\n+                    <div class=\"caption\"><span>Classes<\/span><\/div>\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testPackagePage\/TestPackagePage.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,1 +27,1 @@\n- * @bug 8189841 8253117\n+ * @bug 8189841 8253117 8263507\n@@ -29,0 +29,1 @@\n+ * @summary Improve structure of package summary pages\n@@ -44,0 +45,42 @@\n+    @Test\n+    public void testSummaryLinks() {\n+        javadoc(\"-d\", \"out-links\",\n+                \"-sourcepath\", testSrc,\n+                \"-subpackages\", \"pkg:pkg1\");\n+        checkExit(Exit.OK);\n+\n+        checkOutput(\"pkg\/package-summary.html\", true,\n+                \"\"\"\n+                    <div class=\"sub-nav\">\n+                    <div>\n+                    <ul class=\"sub-nav-list\">\n+                    <li>Package:&nbsp;<\/li>\n+                    <li>Description&nbsp;|&nbsp;<\/li>\n+                    <li>Related Packages&nbsp;|&nbsp;<\/li>\n+                    <li><a href=\"#class-summary\">Classes and Interfaces<\/a><\/li>\n+                    <\/ul>\n+                    <\/div>\"\"\");\n+        checkOutput(\"pkg1\/package-summary.html\", true,\n+                \"\"\"\n+                    <div class=\"sub-nav\">\n+                    <div>\n+                    <ul class=\"sub-nav-list\">\n+                    <li>Package:&nbsp;<\/li>\n+                    <li><a href=\"#package-description\">Description<\/a>&nbsp;|&nbsp;<\/li>\n+                    <li><a href=\"#related-package-summary\">Related Packages<\/a>&nbsp;|&nbsp;<\/li>\n+                    <li><a href=\"#class-summary\">Classes and Interfaces<\/a><\/li>\n+                    <\/ul>\n+                    <\/div>\"\"\");\n+        checkOutput(\"pkg1\/sub\/package-summary.html\", true,\n+                \"\"\"\n+                    <div class=\"sub-nav\">\n+                    <div>\n+                    <ul class=\"sub-nav-list\">\n+                    <li>Package:&nbsp;<\/li>\n+                    <li>Description&nbsp;|&nbsp;<\/li>\n+                    <li><a href=\"#related-package-summary\">Related Packages<\/a>&nbsp;|&nbsp;<\/li>\n+                    <li><a href=\"#class-summary\">Classes and Interfaces<\/a><\/li>\n+                    <\/ul>\n+                    <\/div>\"\"\");\n+    }\n+\n@@ -46,1 +89,1 @@\n-        javadoc(\"-d\", \"out\",\n+        javadoc(\"-d\", \"out-stripes\",\n@@ -53,10 +96,10 @@\n-                    <div class=\"col-first even-row-color\"><a href=\"C0.html\" title=\"class in pkg\">C0<\/a><\/div>\n-                    <div class=\"col-last even-row-color\">&nbsp;<\/div>\n-                    <div class=\"col-first odd-row-color\"><a href=\"C1.html\" title=\"class in pkg\">C1<\/a><\/div>\n-                    <div class=\"col-last odd-row-color\">&nbsp;<\/div>\n-                    <div class=\"col-first even-row-color\"><a href=\"C2.html\" title=\"class in pkg\">C2<\/a><\/div>\n-                    <div class=\"col-last even-row-color\">&nbsp;<\/div>\n-                    <div class=\"col-first odd-row-color\"><a href=\"C3.html\" title=\"class in pkg\">C3<\/a><\/div>\n-                    <div class=\"col-last odd-row-color\">&nbsp;<\/div>\n-                    <div class=\"col-first even-row-color\"><a href=\"C4.html\" title=\"class in pkg\">C4<\/a><\/div>\n-                    <div class=\"col-last even-row-color\">&nbsp;<\/div>\n+                    <div class=\"col-first even-row-color class-summary class-summary-tab2\"><a href=\"C0.html\" title=\"class in pkg\">C0<\/a><\/div>\n+                    <div class=\"col-last even-row-color class-summary class-summary-tab2\">&nbsp;<\/div>\n+                    <div class=\"col-first odd-row-color class-summary class-summary-tab2\"><a href=\"C1.html\" title=\"class in pkg\">C1<\/a><\/div>\n+                    <div class=\"col-last odd-row-color class-summary class-summary-tab2\">&nbsp;<\/div>\n+                    <div class=\"col-first even-row-color class-summary class-summary-tab2\"><a href=\"C2.html\" title=\"class in pkg\">C2<\/a><\/div>\n+                    <div class=\"col-last even-row-color class-summary class-summary-tab2\">&nbsp;<\/div>\n+                    <div class=\"col-first odd-row-color class-summary class-summary-tab2\"><a href=\"C3.html\" title=\"class in pkg\">C3<\/a><\/div>\n+                    <div class=\"col-last odd-row-color class-summary class-summary-tab2\">&nbsp;<\/div>\n+                    <div class=\"col-first even-row-color class-summary class-summary-tab2\"><a href=\"C4.html\" title=\"class in pkg\">C4<\/a><\/div>\n+                    <div class=\"col-last even-row-color class-summary class-summary-tab2\">&nbsp;<\/div>\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testPackageSummary\/TestPackageSummary.java","additions":56,"deletions":13,"binary":false,"changes":69,"status":"modified"},{"patch":"@@ -0,0 +1,27 @@\n+\/*\n+ * Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package pkg1;\n+\n+public @interface Annotation0 {\n+}\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testPackageSummary\/pkg1\/Annotation0.java","additions":27,"deletions":0,"binary":false,"changes":27,"status":"added"},{"patch":"@@ -0,0 +1,27 @@\n+\/*\n+ * Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package pkg1;\n+\n+public class Class0 {\n+}\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testPackageSummary\/pkg1\/Class0.java","additions":27,"deletions":0,"binary":false,"changes":27,"status":"added"},{"patch":"@@ -0,0 +1,27 @@\n+\/*\n+ * Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package pkg1;\n+\n+public enum Enum0 {\n+}\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testPackageSummary\/pkg1\/Enum0.java","additions":27,"deletions":0,"binary":false,"changes":27,"status":"added"},{"patch":"@@ -0,0 +1,27 @@\n+\/*\n+ * Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package pkg1;\n+\n+public class Error0 extends Error {\n+}\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testPackageSummary\/pkg1\/Error0.java","additions":27,"deletions":0,"binary":false,"changes":27,"status":"added"},{"patch":"@@ -0,0 +1,27 @@\n+\/*\n+ * Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package pkg1;\n+\n+public class Exception0 extends Exception {\n+}\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testPackageSummary\/pkg1\/Exception0.java","additions":27,"deletions":0,"binary":false,"changes":27,"status":"added"},{"patch":"@@ -0,0 +1,27 @@\n+\/*\n+ * Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package pkg1;\n+\n+public interface Interface0 {\n+}\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testPackageSummary\/pkg1\/Interface0.java","additions":27,"deletions":0,"binary":false,"changes":27,"status":"added"},{"patch":"@@ -0,0 +1,27 @@\n+\/*\n+ * Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package pkg1;\n+\n+public record Record0() {\n+}\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testPackageSummary\/pkg1\/Record0.java","additions":27,"deletions":0,"binary":false,"changes":27,"status":"added"},{"patch":"@@ -0,0 +1,5 @@\n+<html>\n+<body>\n+Test package\n+<\/body>\n+<\/html>\n\\ No newline at end of file\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testPackageSummary\/pkg1\/package.html","additions":5,"deletions":0,"binary":false,"changes":5,"status":"added"},{"patch":"@@ -0,0 +1,27 @@\n+\/*\n+ * Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package pkg1.sub;\n+\n+public class Sub0 {\n+}\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testPackageSummary\/pkg1\/sub\/Sub0.java","additions":27,"deletions":0,"binary":false,"changes":27,"status":"added"},{"patch":"@@ -809,1 +809,1 @@\n-                    l Classes<\/button>\\\n+                    l Classes and Interfaces<\/button>\\\n@@ -813,1 +813,1 @@\n-                    terface Summary<\/button>\\\n+                    terfaces<\/button>\\\n@@ -817,1 +817,1 @@\n-                    ass Summary<\/button>\\\n+                    asses<\/button>\\\n@@ -821,5 +821,1 @@\n-                    um Class Summary<\/button>\\\n-                    <button id=\"all-classes-table-tab4\" role=\"tab\" aria-selected=\"false\" aria-contro\\\n-                    ls=\"all-classes-table.tabpanel\" tabindex=\"-1\" onkeydown=\"switchTab(event)\" oncli\\\n-                    ck=\"show('all-classes-table', 'all-classes-table-tab4', 2)\" class=\"table-tab\">Ex\\\n-                    ception Summary<\/button>\\\n+                    um Classes<\/button>\\\n@@ -828,2 +824,2 @@\n-                    ck=\"show('all-classes-table', 'all-classes-table-tab5', 2)\" class=\"table-tab\">Er\\\n-                    ror Summary<\/button>\\\n+                    ck=\"show('all-classes-table', 'all-classes-table-tab5', 2)\" class=\"table-tab\">Ex\\\n+                    ceptions<\/button>\\\n@@ -832,2 +828,6 @@\n-                    ck=\"show('all-classes-table', 'all-classes-table-tab6', 2)\" class=\"table-tab\">An\\\n-                    notation Interfaces Summary<\/button>\\\n+                    ck=\"show('all-classes-table', 'all-classes-table-tab6', 2)\" class=\"table-tab\">Er\\\n+                    rors<\/button>\\\n+                    <button id=\"all-classes-table-tab7\" role=\"tab\" aria-selected=\"false\" aria-contro\\\n+                    ls=\"all-classes-table.tabpanel\" tabindex=\"-1\" onkeydown=\"switchTab(event)\" oncli\\\n+                    ck=\"show('all-classes-table', 'all-classes-table-tab7', 2)\" class=\"table-tab\">An\\\n+                    notation Interfaces<\/button>\\\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testSearch\/TestSearch.java","additions":12,"deletions":12,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -236,0 +236,1 @@\n+                \"package-summary.html\",\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testSingletonLists\/TestSingletonLists.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -101,1 +101,1 @@\n-                        padding:0px;\n+                        padding:0;\n@@ -104,1 +104,1 @@\n-                        margin:0px;\n+                        margin:0;\n@@ -212,1 +212,1 @@\n-                    <div class=\"col-last even-row-color\">\n+                    <div class=\"col-last even-row-color class-summary class-summary-tab2\">\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testStylesheet\/TestStylesheet.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -74,1 +74,1 @@\n-                    <div class=\"caption\"><span>Class Summary<\/span><\/div>\n+                    <div class=\"caption\"><span>Classes<\/span><\/div>\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testUnnamedPackage\/TestUnnamedPackage.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}