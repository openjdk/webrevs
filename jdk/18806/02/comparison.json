{"files":[{"patch":"@@ -2079,1 +2079,3 @@\n-  assert(_target_jt == nullptr || _target_jt->vthread() == target_h(), \"sanity check\");\n+  \/\/ Use jvmti_vthread() instead of vthread() as target could have temporary changed\n+  \/\/ identity to carrier thread (see VirtualThread.switchToCarrierThread).\n+  assert(_target_jt == nullptr || _target_jt->jvmti_vthread() == target_h(), \"sanity check\");\n","filename":"src\/hotspot\/share\/prims\/jvmtiEnvBase.cpp","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -509,1 +509,3 @@\n-    assert(_target_jt->vthread() == target_h(), \"sanity check\");\n+    \/\/ Use jvmti_vthread() instead of vthread() as target could have temporary changed\n+    \/\/ identity to carrier thread (see VirtualThread.switchToCarrierThread).\n+    assert(_target_jt->jvmti_vthread() == target_h(), \"sanity check\");\n@@ -529,1 +531,3 @@\n-    assert(_target_jt->vthread() == target_h(), \"sanity check\");\n+    \/\/ Use jvmti_vthread() instead of vthread() as target could have temporary changed\n+    \/\/ identity to carrier thread (see VirtualThread.switchToCarrierThread).\n+    assert(_target_jt->jvmti_vthread() == target_h(), \"sanity check\");\n","filename":"src\/hotspot\/share\/prims\/jvmtiEnvBase.hpp","additions":6,"deletions":2,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -301,1 +301,2 @@\n-    \/\/ use jvmti_vthread() as vthread() can be outdated\n+    \/\/ Use jvmti_vthread() instead of vthread() as target could have temporary changed\n+    \/\/ identity to carrier thread (see VirtualThread.switchToCarrierThread).\n","filename":"src\/hotspot\/share\/prims\/jvmtiEnvThreadState.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"}]}