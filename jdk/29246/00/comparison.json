{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,0 +28,1 @@\n+#include \"runtime\/atomic.hpp\"\n@@ -34,4 +35,4 @@\n-  uint           _nworkers;\n-  volatile uint  _nworking;\n-  volatile uint  _nawakening;\n-  volatile bool  _resurrected;\n+  Atomic<uint>   _nworkers;\n+  Atomic<uint>   _nworking;\n+  Atomic<uint>   _nawakening;\n+  Atomic<bool>   _resurrected;\n","filename":"src\/hotspot\/share\/gc\/z\/zMarkTerminate.hpp","additions":6,"deletions":5,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,1 +33,0 @@\n-#include \"runtime\/atomicAccess.hpp\"\n@@ -45,3 +44,3 @@\n-  AtomicAccess::store(&_nworkers, nworkers);\n-  AtomicAccess::store(&_nworking, nworkers);\n-  _nawakening = 0;\n+  _nworkers.store_relaxed(nworkers);\n+  _nworking.store_relaxed(nworkers);\n+  _nawakening.store_relaxed(0u);\n@@ -54,2 +53,1 @@\n-  AtomicAccess::store(&_nworking, _nworking - 1);\n-  if (_nworking == 0) {\n+  if (_nworking.sub_then_fetch(1u, memory_order_relaxed) == 0) {\n@@ -72,2 +70,1 @@\n-  AtomicAccess::store(&_nworking, _nworking - 1);\n-  if (_nworking == 0) {\n+  if (_nworking.sub_then_fetch(1u, memory_order_relaxed) == 0) {\n@@ -86,2 +83,2 @@\n-  if (_nawakening > 0) {\n-    AtomicAccess::store(&_nawakening, _nawakening - 1);\n+  if (_nawakening.load_relaxed() > 0) {\n+    _nawakening.sub_then_fetch(1u, memory_order_relaxed);\n@@ -90,1 +87,1 @@\n-  if (_nworking == 0) {\n+  if (_nworking.load_relaxed() == 0) {\n@@ -95,1 +92,1 @@\n-  AtomicAccess::store(&_nworking, _nworking + 1);\n+  _nworking.add_then_fetch(1u, memory_order_relaxed);\n@@ -101,3 +98,3 @@\n-  uint nworking = AtomicAccess::load(&_nworking);\n-  uint nawakening = AtomicAccess::load(&_nawakening);\n-  if (nworking + nawakening == AtomicAccess::load(&_nworkers)) {\n+  uint nworking = _nworking.load_relaxed();\n+  uint nawakening = _nawakening.load_relaxed();\n+  if (nworking + nawakening == _nworkers.load_relaxed()) {\n@@ -114,1 +111,1 @@\n-  if (_nworking + _nawakening != _nworkers) {\n+  if (_nworking.load_relaxed() + _nawakening.load_relaxed() != _nworkers.load_relaxed()) {\n@@ -116,1 +113,1 @@\n-    AtomicAccess::store(&_nawakening, _nawakening + 1);\n+    _nawakening.add_then_fetch(1u, memory_order_relaxed);\n@@ -122,2 +119,2 @@\n-  uint nworking = AtomicAccess::load(&_nworking);\n-  uint nawakening = AtomicAccess::load(&_nawakening);\n+  uint nworking = _nworking.load_relaxed();\n+  uint nawakening = _nawakening.load_relaxed();\n@@ -125,1 +122,1 @@\n-  return nworking + nawakening == AtomicAccess::load(&_nworkers);\n+  return nworking + nawakening == _nworkers.load_relaxed();\n@@ -131,1 +128,1 @@\n-    AtomicAccess::store(&_resurrected, value);\n+    _resurrected.store_relaxed(value);\n@@ -141,1 +138,1 @@\n-  return AtomicAccess::load(&_resurrected);\n+  return _resurrected.load_relaxed();\n","filename":"src\/hotspot\/share\/gc\/z\/zMarkTerminate.inline.hpp","additions":20,"deletions":23,"binary":false,"changes":43,"status":"modified"}]}