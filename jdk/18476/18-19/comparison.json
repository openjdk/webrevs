{"files":[{"patch":"@@ -1668,0 +1668,1 @@\n+  assert(!needs_eevex(dst, src1, src2) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -1675,0 +1676,1 @@\n+  assert((!needs_eevex(dst, src1) && needs_eevex(src2.base(), src2.index())) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -1700,0 +1702,1 @@\n+  assert(!needs_eevex(dst, src) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -1707,0 +1710,1 @@\n+  assert(!needs_eevex(dst, src.base(), src.index()) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -1717,0 +1721,1 @@\n+  assert(!needs_eevex(dst, src) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -1725,0 +1730,1 @@\n+  assert(!needs_eevex(dst, src.base(), src.index()) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -1735,0 +1741,1 @@\n+  assert(!needs_eevex(dst, src) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -1742,0 +1749,1 @@\n+  assert(!needs_eevex(dst, src.base(), src.index()) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -1980,0 +1988,1 @@\n+    assert(UseAPX && UseAVX > 2, \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -2027,0 +2036,1 @@\n+    assert(UseAPX && UseAVX > 2, \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -4494,0 +4504,1 @@\n+  assert(!needs_eevex(src.base(), src.index()), \"does not support extended gprs\");\n@@ -5732,0 +5743,1 @@\n+  assert(!needs_eevex(src.base(), src.index()), \"does not support extended gprs\");\n@@ -5749,0 +5761,1 @@\n+  assert(!needs_eevex(src.base(), src.index()), \"does not support extended gprs\");\n@@ -6199,1 +6212,0 @@\n-  assert(dst->encoding() < 16 && src->encoding() < 16, \"Instruction does not support extended registers\");\n@@ -6206,1 +6218,0 @@\n-  assert(dst->encoding() < 16 && src->encoding() < 16, \"Instruction does not support extended registers\");\n@@ -6213,1 +6224,0 @@\n-  assert(dst->encoding() < 16 && src->encoding() < 16, \"Instruction does not support extended registers\");\n@@ -6220,1 +6230,0 @@\n-  assert(dst->encoding() < 16 && src->encoding() < 16, \"Instruction does not support extended registers\");\n@@ -6228,1 +6237,0 @@\n-  assert(dst->encoding() < 16 && src->encoding() < 16, \"Instruction does not support extended registers\");\n@@ -6235,1 +6243,0 @@\n-  assert(dst->encoding() < 16 && src->encoding() < 16, \"Instruction does not support extended registers\");\n@@ -6242,1 +6249,0 @@\n-  assert(dst->encoding() < 16 && src->encoding() < 16, \"Instruction does not support extended registers\");\n@@ -11843,1 +11849,1 @@\n-  if ((UseAVX > 2 && !attributes->is_legacy_mode()) || (UseAPX && is_extended))\n+  if (UseAVX > 2 && !attributes->is_legacy_mode())\n@@ -11902,1 +11908,1 @@\n-  if ((UseAVX > 2 && !attributes->is_legacy_mode()) || (UseAPX && needs_eevex(dst_enc, nds_enc, src_enc)))\n+  if (UseAVX > 2 && !attributes->is_legacy_mode())\n@@ -11924,1 +11930,1 @@\n-  if (UseAVX > 0 || (UseAPX && needs_eevex(adr.base(), adr.index()))) {\n+  if (UseAVX > 0) {\n@@ -11938,1 +11944,1 @@\n-  if (UseAVX > 0 || (UseAPX && needs_eevex(dst_enc, src_enc))) {\n+  if (UseAVX > 0) {\n@@ -12435,0 +12441,1 @@\n+  assert(!needs_eevex(dst, src1, src2) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -12449,0 +12456,1 @@\n+  assert(!needs_eevex(dst, src1, src2) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -12456,0 +12464,1 @@\n+  assert(!needs_eevex(dst, src1, src2) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -12463,0 +12472,1 @@\n+  assert(!needs_eevex(dst, src1, src2) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -12470,0 +12480,1 @@\n+  assert(!needs_eevex(dst, src1, src2) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -12477,0 +12488,1 @@\n+  assert((!needs_eevex(dst, src1) && !needs_eevex(src2.base(), src2.index())) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -12487,0 +12499,1 @@\n+  assert((!needs_eevex(dst, src1) && !needs_eevex(src2.base(), src2.index())) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -12497,0 +12510,1 @@\n+  assert((!needs_eevex(dst, src1) && !needs_eevex(src2.base(), src2.index())) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -12507,0 +12521,1 @@\n+  assert((!needs_eevex(dst, src1) && !needs_eevex(src2.base(), src2.index())) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -12517,0 +12532,1 @@\n+  assert(!needs_eevex(dst, src1, src2) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -12524,0 +12540,1 @@\n+  assert((!needs_eevex(dst, src1.base(), src1.index()) && !needs_eevex(src2)) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -12534,0 +12551,1 @@\n+  assert(!needs_eevex(dst, src1, src2) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -12541,0 +12559,1 @@\n+  assert((!needs_eevex(dst, src1.base(), src1.index()) && !needs_eevex(src2)) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -12551,0 +12570,1 @@\n+  assert(!needs_eevex(dst, src1, src2) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -12558,0 +12578,1 @@\n+  assert((!needs_eevex(dst, src1.base(), src1.index()) && !needs_eevex(src2)) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -12568,0 +12589,1 @@\n+  assert(!needs_eevex(dst, src1, src2) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -12575,0 +12597,1 @@\n+  assert((!needs_eevex(dst, src1.base(), src1.index()) && !needs_eevex(src2)) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -12585,0 +12608,1 @@\n+  assert(!needs_eevex(dst, src1, src2) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -12592,0 +12616,1 @@\n+  assert((!needs_eevex(dst, src1.base(), src1.index()) && !needs_eevex(src2)) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -12602,0 +12627,1 @@\n+  assert(!needs_eevex(dst, src1, src2) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -12609,0 +12635,1 @@\n+  assert((!needs_eevex(dst, src1.base(), src1.index()) && !needs_eevex(src2)) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -13415,0 +13442,1 @@\n+    assert(UseAPX && UseAVX > 2, \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -13431,0 +13459,1 @@\n+    assert(UseAPX && UseAVX > 2, \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -13473,0 +13502,1 @@\n+  assert(!needs_eevex(dst, src1, src2) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -13480,0 +13510,1 @@\n+  assert((!needs_eevex(dst, src1) && needs_eevex(src2.base(), src2.index())) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -13505,0 +13536,1 @@\n+  assert(!needs_eevex(dst, src) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -13512,0 +13544,1 @@\n+  assert(!needs_eevex(dst, src.base(), src.index()) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -13522,0 +13555,1 @@\n+  assert(!needs_eevex(dst, src) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -13529,0 +13563,1 @@\n+  assert(!needs_eevex(dst, src.base(), src.index()) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -13539,0 +13574,1 @@\n+  assert(!needs_eevex(dst, src) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -13546,0 +13582,1 @@\n+  assert(!needs_eevex(dst, src.base(), src.index()) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -14032,0 +14069,1 @@\n+  assert(!needs_eevex(dst1, dst2, src) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -14305,0 +14343,1 @@\n+  assert(!needs_eevex(dst, src) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -14312,0 +14351,1 @@\n+  assert(!needs_eevex(dst, src.base(), src.index()) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -14323,0 +14363,1 @@\n+  assert(!needs_eevex(dst, src) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n@@ -14330,0 +14371,1 @@\n+  assert(!needs_eevex(dst, src.base(), src.index()) || (UseAPX && UseAVX > 2), \"extended gpr use requires UseAPX and UseAVX > 2\");\n","filename":"src\/hotspot\/cpu\/x86\/assembler_x86.cpp","additions":53,"deletions":11,"binary":false,"changes":64,"status":"modified"},{"patch":"@@ -1005,0 +1005,7 @@\n+  if (UseAPX && (UseAVX < 3)) {\n+    if (!FLAG_IS_DEFAULT(UseAPX)) {\n+        warning(\"UseAPX is only available when UseAVX > 2\");\n+    }\n+    FLAG_SET_DEFAULT(UseAPX, false);\n+  }\n+\n","filename":"src\/hotspot\/cpu\/x86\/vm_version_x86.cpp","additions":7,"deletions":0,"binary":false,"changes":7,"status":"modified"}]}