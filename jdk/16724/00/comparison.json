{"files":[{"patch":"@@ -46,1 +46,1 @@\n-size_t MallocMemorySummary::_snapshot[CALC_OBJ_SIZE_IN_TYPE(MallocMemorySnapshot, size_t)];\n+MallocMemorySnapshot MallocMemorySummary::_snapshot{};\n@@ -81,1 +81,0 @@\n-  assert(sizeof(_snapshot) >= sizeof(MallocMemorySnapshot), \"Sanity Check\");\n@@ -83,1 +82,0 @@\n-  ::new ((void*)_snapshot)MallocMemorySnapshot();\n","filename":"src\/hotspot\/share\/nmt\/mallocTracker.cpp","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -143,1 +143,1 @@\n-class MallocMemorySnapshot : public ResourceObj {\n+class MallocMemorySnapshot : public AnyObj {\n@@ -201,1 +201,1 @@\n-  static size_t _snapshot[CALC_OBJ_SIZE_IN_TYPE(MallocMemorySnapshot, size_t)];\n+  static MallocMemorySnapshot _snapshot;\n@@ -248,1 +248,1 @@\n-    return (MallocMemorySnapshot*)_snapshot;\n+    return &_snapshot;\n","filename":"src\/hotspot\/share\/nmt\/mallocTracker.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -34,2 +34,0 @@\n-#define CALC_OBJ_SIZE_IN_TYPE(obj, type) (align_up(sizeof(obj), sizeof(type))\/sizeof(type))\n-\n","filename":"src\/hotspot\/share\/nmt\/nmtCommon.hpp","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -35,1 +35,1 @@\n-size_t VirtualMemorySummary::_snapshot[CALC_OBJ_SIZE_IN_TYPE(VirtualMemorySnapshot, size_t)];\n+VirtualMemorySnapshot VirtualMemorySummary::_snapshot{};\n@@ -52,3 +52,0 @@\n-  assert(sizeof(_snapshot) >= sizeof(VirtualMemorySnapshot), \"Sanity Check\");\n-  \/\/ Use placement operator new to initialize static data area.\n-  ::new ((void*)_snapshot) VirtualMemorySnapshot();\n","filename":"src\/hotspot\/share\/nmt\/virtualMemoryTracker.cpp","additions":1,"deletions":4,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -98,1 +98,1 @@\n-class VirtualMemorySnapshot : public ResourceObj {\n+class VirtualMemorySnapshot : public AnyObj {\n@@ -175,1 +175,1 @@\n-    return (VirtualMemorySnapshot*)_snapshot;\n+    return &_snapshot;\n@@ -179,1 +179,1 @@\n-  static size_t _snapshot[CALC_OBJ_SIZE_IN_TYPE(VirtualMemorySnapshot, size_t)];\n+  static VirtualMemorySnapshot _snapshot;\n","filename":"src\/hotspot\/share\/nmt\/virtualMemoryTracker.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"}]}