{"files":[{"patch":"@@ -528,1 +528,3 @@\n-    ClassUnloadingContext* ctx = ClassUnloadingContext::context();\n+    ClassUnloadingContext ctx(1 \/* num_nmethod_unlink_workers *\/,\n+                              false \/* unregister_nmethods_during_purge *\/,\n+                              false \/* lock_nmethod_free_separately *\/);\n@@ -544,1 +546,1 @@\n-      ctx->purge_nmethods();\n+      ctx.purge_nmethods();\n@@ -552,1 +554,1 @@\n-      ctx->free_nmethods();\n+      ctx.free_nmethods();\n@@ -560,0 +562,7 @@\n+\n+    \/\/ Delete metaspaces for unloaded class loaders and clean up loader_data graph\n+    ClassLoaderDataGraph::purge(true \/* at_safepoint *\/);\n+    DEBUG_ONLY(MetaspaceUtils::verify();)\n+\n+    \/\/ Need to clear claim bits for the next mark.\n+    ClassLoaderDataGraph::clear_claimed_marks();\n","filename":"src\/hotspot\/share\/gc\/serial\/serialFullGC.cpp","additions":12,"deletions":3,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -606,3 +606,0 @@\n-  ClassUnloadingContext ctx(1 \/* num_nmethod_unlink_workers *\/,\n-                            false \/* unregister_nmethods_during_purge *\/,\n-                            false \/* lock_nmethod_free_separately *\/);\n@@ -633,7 +630,0 @@\n-  \/\/ Delete metaspaces for unloaded class loaders and clean up loader_data graph\n-  ClassLoaderDataGraph::purge(\/*at_safepoint*\/true);\n-  DEBUG_ONLY(MetaspaceUtils::verify();)\n-\n-  \/\/ Need to clear claim bits for the next mark.\n-  ClassLoaderDataGraph::clear_claimed_marks();\n-\n","filename":"src\/hotspot\/share\/gc\/serial\/serialHeap.cpp","additions":0,"deletions":10,"binary":false,"changes":10,"status":"modified"}]}