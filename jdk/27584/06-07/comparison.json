{"files":[{"patch":"@@ -35,2 +35,2 @@\n-    private native void enableEventsAndAccessField(boolean isEventExpected, Thread eventThread);\n-    private native void enableEventsAndModifyField(boolean isEventExpected, Thread eventThread);\n+    private native void enableEventsAndAccessField(int numOfEventsExpected, Thread eventThread);\n+    private native void enableEventsAndModifyField(int numOfEventsExpected, Thread eventThread);\n@@ -38,3 +38,3 @@\n-    void javaMethod(boolean isEventExpected, Thread eventThread) {\n-        enableEventsAndAccessField(isEventExpected, eventThread);\n-        enableEventsAndModifyField(isEventExpected, eventThread);\n+    void javaMethod(int numOfEventsExpected, Thread eventThread) {\n+        enableEventsAndAccessField(numOfEventsExpected, eventThread);\n+        enableEventsAndModifyField(numOfEventsExpected, eventThread);\n@@ -68,1 +68,1 @@\n-        testObject.javaMethod(true, Thread.currentThread());\n+        testObject.javaMethod(1, Thread.currentThread());\n@@ -71,1 +71,1 @@\n-        testObject.javaMethod(false, anotherThread);\n+        testObject.javaMethod(0, anotherThread);\n","filename":"test\/hotspot\/jtreg\/serviceability\/jvmti\/events\/FieldAccess\/FieldEventsFromJNI\/FieldEventsFromJNI.java","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -25,0 +25,1 @@\n+#include <atomic>\n@@ -32,2 +33,3 @@\n-static int access_cnt = 0;\n-static int modify_cnt = 0;\n+\/\/ The event counters are used to check events from differen threads.\n+static std::atomic<jint> access_cnt{0};\n+static std::atomic<jint> modify_cnt{0};\n@@ -138,1 +140,1 @@\n-    JNIEnv *jni, jobject self, jboolean isEventExpected, jthread eventThread) {\n+    JNIEnv *jni, jobject self, jint numOfEventsExpected, jthread eventThread) {\n@@ -171,1 +173,1 @@\n-  if (access_cnt != isEventExpected) {\n+  if (access_cnt != numOfEventsExpected) {\n@@ -179,1 +181,1 @@\n-    JNIEnv *jni, jobject self, jboolean isEventExpected, jthread eventThread) {\n+    JNIEnv *jni, jobject self, jint numOfEventsExpected, jthread eventThread) {\n@@ -204,1 +206,1 @@\n-  if (modify_cnt != isEventExpected) {\n+  if (modify_cnt != numOfEventsExpected) {\n","filename":"test\/hotspot\/jtreg\/serviceability\/jvmti\/events\/FieldAccess\/FieldEventsFromJNI\/libFieldEventsFromJNI.cpp","additions":8,"deletions":6,"binary":false,"changes":14,"status":"modified"}]}