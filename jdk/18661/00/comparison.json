{"files":[{"patch":"@@ -99,3 +99,2 @@\n-  DeadSpacer(ContiguousSpace* space) : _allowed_deadspace_words(0), _space(space) {\n-    size_t ratio = _space->allowed_dead_ratio();\n-    _active = ratio > 0;\n+  DeadSpacer(ContiguousSpace* space, size_t allowed_dead_ratio) : _allowed_deadspace_words(0), _space(space) {\n+    _active = allowed_dead_ratio > 0;\n@@ -109,1 +108,1 @@\n-        _allowed_deadspace_words = (space->capacity() * ratio \/ 100) \/ HeapWordSize;\n+        _allowed_deadspace_words = (space->capacity() * allowed_dead_ratio \/ 100) \/ HeapWordSize;\n@@ -153,0 +152,3 @@\n+    \/\/ The maximum percentage of objects that can be dead in the compacted\n+    \/\/ live part of a compacted space.\n+    size_t _allowed_dead_ratio;\n@@ -154,1 +156,1 @@\n-    void init(ContiguousSpace* space) {\n+    void init(ContiguousSpace* space, size_t allowed_dead_ratio) {\n@@ -158,0 +160,1 @@\n+      _allowed_dead_ratio = allowed_dead_ratio;\n@@ -179,0 +182,4 @@\n+  size_t get_allowed_dead_ratio(uint index) const {\n+    return _spaces[index]._allowed_dead_ratio;\n+  }\n+\n@@ -264,3 +271,3 @@\n-    _spaces[0].init(heap->old_gen()->space());\n-    _spaces[1].init(heap->young_gen()->eden());\n-    _spaces[2].init(heap->young_gen()->from());\n+    _spaces[0].init(heap->old_gen()->space(), MarkSweepDeadRatio);\n+    _spaces[1].init(heap->young_gen()->eden(), 0);\n+    _spaces[2].init(heap->young_gen()->from(), 0);\n@@ -270,1 +277,1 @@\n-      _spaces[3].init(heap->young_gen()->to());\n+      _spaces[3].init(heap->young_gen()->to(), 0);\n@@ -286,1 +293,1 @@\n-      DeadSpacer dead_spacer(space);\n+      DeadSpacer dead_spacer(space, get_allowed_dead_ratio(i));\n","filename":"src\/hotspot\/share\/gc\/serial\/serialFullGC.cpp","additions":17,"deletions":10,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -216,4 +216,0 @@\n-\n-size_t TenuredSpace::allowed_dead_ratio() const {\n-  return MarkSweepDeadRatio;\n-}\n","filename":"src\/hotspot\/share\/gc\/shared\/space.cpp","additions":0,"deletions":4,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -138,4 +138,0 @@\n-  \/\/ The maximum percentage of objects that can be dead in the compacted\n-  \/\/ live part of a compacted space (\"deadwood\" support.)\n-  virtual size_t allowed_dead_ratio() const { return 0; };\n-\n@@ -199,2 +195,0 @@\n-  \/\/ Mark sweep support\n-  size_t allowed_dead_ratio() const override;\n","filename":"src\/hotspot\/share\/gc\/shared\/space.hpp","additions":0,"deletions":6,"binary":false,"changes":6,"status":"modified"}]}