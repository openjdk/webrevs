{"files":[{"patch":"@@ -2142,0 +2142,1 @@\n+\/\/   (expr + addend) & mask\n@@ -2144,0 +2145,1 @@\n+\/\/   addend & mask\n@@ -2151,0 +2153,1 @@\n+\/\/             <--w bits--->\n@@ -2154,2 +2157,2 @@\n-\/\/ Given \"expr\" with at least \"w\" trailing zeros,\n-\/\/ let \"mod = 2^w\", \"suffix_mask = mod - 1\", and \"mask\" be any non-negative value <= suffix_mask.\n+\/\/   Given \"expr\" with at least \"w\" trailing zeros,\n+\/\/   let \"mod = 2^w\", \"suffix_mask = mod - 1\"\n@@ -2157,4 +2160,17 @@\n-\/\/    expr % mod == 0                             (multiple of power of two)\n-\/\/ => (a + expr) % mod         == a % mod         (zero element in modular arithmetic)\n-\/\/ => (a + expr) & suffix_mask == a & suffix_mask (remainder is the same as masking with suffix mask)\n-\/\/ => (a + expr) & mask        == a & mask        (terms equivalent under suffix mask are also equivalent under partial mask)\n+\/\/   Since \"mask\" only has bits set where \"suffix_mask\" does, we have:\n+\/\/     mask = suffix_mask & mask     (SUFFIX_MASK)\n+\/\/\n+\/\/   And since expr only has bits set above w, and suffix_mask only below:\n+\/\/     expr & suffix_mask == 0     (NO_BIT_OVERLAP)\n+\/\/\n+\/\/   From unsigned modular arithmetic (with unsigned modulo %), and since mod is\n+\/\/   a power of 2, and we are computing in a ring of powers of 2, we know that\n+\/\/     (x + y) % mod         = (x % mod         + y) % mod\n+\/\/     (x + y) & suffix_mask = (x & suffix_mask + y) & suffix_mask       (MOD_ARITH)\n+\/\/\n+\/\/   We can now prove the equality:\n+\/\/     (expr               + addend)               & mask\n+\/\/   = (expr               + addend) & suffix_mask & mask    (SUFFIX_MASK)\n+\/\/   = (expr & suffix_mask + addend) & suffix_mask & mask    (MOD_ARITH)\n+\/\/   = (0                  + addend) & suffix_mask & mask    (NO_BIT_OVERLAP)\n+\/\/   =                       addend                & mask    (SUFFIX_MASK)\n","filename":"src\/hotspot\/share\/opto\/mulnode.cpp","additions":22,"deletions":6,"binary":false,"changes":28,"status":"modified"}]}