{"files":[{"patch":"@@ -2059,1 +2059,2 @@\n-\/\/ Returns a lower bound on the number of trailing zeros in expr.\n+\/\/ Returns a lower bound on the number of trailing zeros in expr, or -1 if the number\n+\/\/ cannot be determined.\n@@ -2064,1 +2065,1 @@\n-    return 0;\n+    return -1;\n@@ -2081,1 +2082,1 @@\n-      return 0;\n+      return -1;\n@@ -2089,1 +2090,1 @@\n-  return 0;\n+  return -1;\n@@ -2106,0 +2107,5 @@\n+  jint expr_trailing_zeros = AndIL_min_trailing_zeros(phase, expr, bt);\n+  if (expr_trailing_zeros < 0) {\n+    return false;\n+  }\n+\n@@ -2107,1 +2113,1 @@\n-  if (mask_t == nullptr) {\n+  if (mask_t == nullptr || mask_t->lo_as_long() < 0) {\n@@ -2111,2 +2117,2 @@\n-  jint zeros = AndIL_min_trailing_zeros(phase, expr, bt);\n-  return zeros > 0 && ((((jlong)1) << zeros) > mask_t->hi_as_long() && mask_t->lo_as_long() >= 0);\n+  jint mask_bit_width = mask_t->hi_as_long() == 0 ? 0 : (BitsPerLong - count_leading_zeros(mask_t->hi_as_long()));\n+  return expr_trailing_zeros >= mask_bit_width;\n","filename":"src\/hotspot\/share\/opto\/mulnode.cpp","additions":13,"deletions":7,"binary":false,"changes":20,"status":"modified"}]}