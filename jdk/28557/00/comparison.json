{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,0 +32,1 @@\n+ *          java.base\/jdk.internal.platform\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/DockerBasicTest.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,0 +33,1 @@\n+ * @modules java.base\/jdk.internal.platform\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/ShareTmpDir.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -51,1 +51,1 @@\n-        if (!DockerTestUtils.canTestDocker()) {\n+        if (!DockerTestUtils.canTestDocker() || !DockerTestUtils.canUseResourceLimits()) {\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestCPUAwareness.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,0 +34,1 @@\n+ *          java.base\/jdk.internal.platform\n@@ -55,1 +56,1 @@\n-        if (!DockerTestUtils.canTestDocker()) {\n+        if (!DockerTestUtils.canTestDocker() || !DockerTestUtils.canUseResourceLimits()) {\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestCPUSets.java","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2024, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,0 +34,1 @@\n+ *          java.base\/jdk.internal.platform\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestContainerInfo.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -37,0 +37,1 @@\n+ *          java.base\/jdk.internal.platform\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestJFREvents.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,0 +34,1 @@\n+ *          java.base\/jdk.internal.platform\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestJFRNetworkEvents.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2020, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2020, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,0 +32,1 @@\n+ *          java.base\/jdk.internal.platform\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestJFRWithJMX.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -32,0 +32,1 @@\n+ *          java.base\/jdk.internal.platform\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestJcmd.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -36,0 +36,1 @@\n+ *          java.base\/jdk.internal.platform\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestJcmdWithSideCar.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -3,1 +3,1 @@\n- * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2024, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -35,0 +35,1 @@\n+ * @modules java.base\/jdk.internal.platform\n@@ -57,1 +58,1 @@\n-        if (!DockerTestUtils.canTestDocker()) {\n+        if (!DockerTestUtils.canTestDocker() || !DockerTestUtils.canUseResourceLimits()) {\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestLimitsUpdating.java","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -3,0 +3,1 @@\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -54,1 +55,1 @@\n-            if (!DockerTestUtils.canTestDocker()) {\n+            if (!DockerTestUtils.canTestDocker() || !DockerTestUtils.canUseResourceLimits()) {\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestMemoryWithCgroupV1.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -49,1 +49,0 @@\n-    private static final Metrics metrics = Metrics.systemMetrics();\n@@ -105,7 +104,3 @@\n-        \/\/ Test won't work on cgv1 rootless podman since resource limits don't\n-        \/\/ work there.\n-        if (\"cgroupv1\".equals(metrics.getProvider()) &&\n-            DockerTestUtils.isPodman() &&\n-            DockerTestUtils.isRootless()) {\n-            throw new SkippedException(\"Resource limits required for testPrintContainerInfoCPUShares(). \" +\n-                                       \"This is cgv1 with podman in rootless mode. Test skipped.\");\n+        \/\/ Test won't work on cgv1 rootless since resource limits don't work there.\n+        if (!DockerTestUtils.canUseResourceLimits()) {\n+            return;\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestMisc.java","additions":3,"deletions":8,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -34,0 +34,1 @@\n+ *          java.base\/jdk.internal.platform\n@@ -57,1 +58,1 @@\n-        if (!DockerTestUtils.canTestDocker()) {\n+        if (!DockerTestUtils.canTestDocker() || !DockerTestUtils.canUseResourceLimits()) {\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestPids.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -3,1 +3,1 @@\n- * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2024, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,0 +33,1 @@\n+ * @modules java.base\/jdk.internal.platform\n@@ -45,1 +46,1 @@\n-        if (!DockerTestUtils.canTestDocker()) {\n+        if (!DockerTestUtils.canTestDocker() || !DockerTestUtils.canUseResourceLimits()) {\n","filename":"test\/jdk\/jdk\/internal\/platform\/docker\/TestDockerBasic.java","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -49,1 +49,1 @@\n-        if (!DockerTestUtils.canTestDocker()) {\n+        if (!DockerTestUtils.canTestDocker() || !DockerTestUtils.canUseResourceLimits()) {\n","filename":"test\/jdk\/jdk\/internal\/platform\/docker\/TestDockerCpuMetrics.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -48,1 +48,1 @@\n-        if (!DockerTestUtils.canTestDocker()) {\n+        if (!DockerTestUtils.canTestDocker() || !DockerTestUtils.canUseResourceLimits()) {\n","filename":"test\/jdk\/jdk\/internal\/platform\/docker\/TestDockerMemoryMetrics.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -32,0 +32,1 @@\n+ * @modules java.base\/jdk.internal.platform\n@@ -35,0 +36,1 @@\n+\n@@ -44,1 +46,1 @@\n-        if (!DockerTestUtils.canTestDocker()) {\n+        if (!DockerTestUtils.canTestDocker() || !DockerTestUtils.canUseResourceLimits()) {\n","filename":"test\/jdk\/jdk\/internal\/platform\/docker\/TestGetFreeSwapSpaceSize.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -58,1 +58,1 @@\n-        if (!DockerTestUtils.canTestDocker()) {\n+        if (!DockerTestUtils.canTestDocker() || !DockerTestUtils.canUseResourceLimits()) {\n","filename":"test\/jdk\/jdk\/internal\/platform\/docker\/TestLimitsUpdating.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -33,0 +33,1 @@\n+ * @modules java.base\/jdk.internal.platform\n@@ -52,1 +53,1 @@\n-        if (!DockerTestUtils.canTestDocker()) {\n+        if (!DockerTestUtils.canTestDocker() || !DockerTestUtils.canUseResourceLimits()) {\n","filename":"test\/jdk\/jdk\/internal\/platform\/docker\/TestPidsLimit.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -41,0 +41,1 @@\n+import jdk.internal.platform.Metrics;\n@@ -50,0 +51,1 @@\n+    private static final Metrics metrics = Metrics.systemMetrics();\n@@ -136,0 +138,14 @@\n+    \/**\n+     * Determine if the engine can use resource limits.\n+     *\n+     * @return true if resource limits are supported in the current configuration\n+     * @throws Exception\n+     *\/\n+    public static boolean canUseResourceLimits() throws Exception {\n+        if (isRootless() && \"cgroupv1\".equals(metrics.getProvider())) {\n+            throw new SkippedException(\"Resource limits are not available on this system\");\n+        } else {\n+            return true;\n+        }\n+    }\n+\n","filename":"test\/lib\/jdk\/test\/lib\/containers\/docker\/DockerTestUtils.java","additions":17,"deletions":1,"binary":false,"changes":18,"status":"modified"}]}