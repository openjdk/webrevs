{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,0 +32,1 @@\n+ *          java.base\/jdk.internal.platform\n@@ -48,4 +49,1 @@\n-        if (!DockerTestUtils.canTestDocker()) {\n-            return;\n-        }\n-\n+        DockerTestUtils.checkCanTestDocker();\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/DockerBasicTest.java","additions":3,"deletions":5,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,0 +33,1 @@\n+ * @modules java.base\/jdk.internal.platform\n@@ -53,4 +54,1 @@\n-        if (!DockerTestUtils.canTestDocker()) {\n-            return;\n-        }\n-\n+        DockerTestUtils.checkCanTestDocker();\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/ShareTmpDir.java","additions":3,"deletions":5,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -51,3 +51,2 @@\n-        if (!DockerTestUtils.canTestDocker()) {\n-            return;\n-        }\n+        DockerTestUtils.checkCanTestDocker();\n+        DockerTestUtils.checkCanUseResourceLimits();\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestCPUAwareness.java","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,0 +34,1 @@\n+ *          java.base\/jdk.internal.platform\n@@ -55,5 +56,2 @@\n-        if (!DockerTestUtils.canTestDocker()) {\n-            return;\n-        }\n-\n-\n+        DockerTestUtils.checkCanTestDocker();\n+        DockerTestUtils.checkCanUseResourceLimits();\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestCPUSets.java","additions":4,"deletions":6,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2024, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,0 +34,1 @@\n+ *          java.base\/jdk.internal.platform\n@@ -52,4 +53,1 @@\n-        if (!DockerTestUtils.canTestDocker()) {\n-            return;\n-        }\n-\n+        DockerTestUtils.checkCanTestDocker();\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestContainerInfo.java","additions":3,"deletions":5,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -37,0 +37,1 @@\n+ *          java.base\/jdk.internal.platform\n@@ -64,3 +65,1 @@\n-        if (!DockerTestUtils.canTestDocker()) {\n-            return;\n-        }\n+        DockerTestUtils.checkCanTestDocker();\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestJFREvents.java","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,0 +34,1 @@\n+ *          java.base\/jdk.internal.platform\n@@ -51,4 +52,1 @@\n-        if (!DockerTestUtils.canTestDocker()) {\n-            return;\n-        }\n-\n+        DockerTestUtils.checkCanTestDocker();\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestJFRNetworkEvents.java","additions":3,"deletions":5,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2020, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2020, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,0 +32,1 @@\n+ *          java.base\/jdk.internal.platform\n@@ -76,3 +77,1 @@\n-        if (!DockerTestUtils.canTestDocker()) {\n-            throw new SkippedException(\"Docker is not supported on this host\");\n-        }\n+        DockerTestUtils.checkCanTestDocker();\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestJFRWithJMX.java","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -32,0 +32,1 @@\n+ *          java.base\/jdk.internal.platform\n@@ -65,1 +66,1 @@\n-        DockerTestUtils.canTestDocker();\n+        DockerTestUtils.checkCanTestDocker();\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestJcmd.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -36,0 +36,1 @@\n+ *          java.base\/jdk.internal.platform\n@@ -98,4 +99,1 @@\n-        if (!DockerTestUtils.canTestDocker()) {\n-            return;\n-        }\n-\n+        DockerTestUtils.checkCanTestDocker();\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestJcmdWithSideCar.java","additions":3,"deletions":5,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -3,1 +3,1 @@\n- * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2024, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -35,0 +35,1 @@\n+ * @modules java.base\/jdk.internal.platform\n@@ -57,4 +58,2 @@\n-        if (!DockerTestUtils.canTestDocker()) {\n-            return;\n-        }\n-\n+        DockerTestUtils.checkCanTestDocker();\n+        DockerTestUtils.checkCanUseResourceLimits();\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestLimitsUpdating.java","additions":4,"deletions":5,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -62,4 +62,1 @@\n-        if (!DockerTestUtils.canTestDocker()) {\n-            return;\n-        }\n-\n+        DockerTestUtils.checkCanTestDocker();\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestMemoryAwareness.java","additions":1,"deletions":4,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -57,4 +57,1 @@\n-        if (!DockerTestUtils.canTestDocker()) {\n-            System.out.println(\"Unable to run docker tests.\");\n-            return;\n-        }\n+        DockerTestUtils.checkCanTestDocker();\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestMemoryInvisibleParent.java","additions":1,"deletions":4,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -3,0 +3,1 @@\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -54,4 +55,2 @@\n-            if (!DockerTestUtils.canTestDocker()) {\n-                return;\n-            }\n-\n+            DockerTestUtils.checkCanTestDocker();\n+            DockerTestUtils.checkCanUseResourceLimits();\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestMemoryWithCgroupV1.java","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -55,4 +55,1 @@\n-        if (!DockerTestUtils.canTestDocker()) {\n-            System.out.println(\"Unable to run docker tests.\");\n-            return;\n-        }\n+        DockerTestUtils.checkCanTestDocker();\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestMemoryWithSubgroups.java","additions":1,"deletions":4,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -49,1 +49,0 @@\n-    private static final Metrics metrics = Metrics.systemMetrics();\n@@ -53,4 +52,1 @@\n-        if (!DockerTestUtils.canTestDocker()) {\n-            return;\n-        }\n-\n+        DockerTestUtils.checkCanTestDocker();\n@@ -105,8 +101,2 @@\n-        \/\/ Test won't work on cgv1 rootless podman since resource limits don't\n-        \/\/ work there.\n-        if (\"cgroupv1\".equals(metrics.getProvider()) &&\n-            DockerTestUtils.isPodman() &&\n-            DockerTestUtils.isRootless()) {\n-            throw new SkippedException(\"Resource limits required for testPrintContainerInfoCPUShares(). \" +\n-                                       \"This is cgv1 with podman in rootless mode. Test skipped.\");\n-        }\n+        \/\/ Test won't work on cgv1 rootless since resource limits don't work there.\n+        DockerTestUtils.checkCanUseResourceLimits();\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestMisc.java","additions":3,"deletions":13,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -34,0 +34,1 @@\n+ *          java.base\/jdk.internal.platform\n@@ -57,4 +58,2 @@\n-        if (!DockerTestUtils.canTestDocker()) {\n-            return;\n-        }\n-\n+        DockerTestUtils.checkCanTestDocker();\n+        DockerTestUtils.checkCanUseResourceLimits();\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestPids.java","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -3,1 +3,1 @@\n- * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2024, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,0 +33,1 @@\n+ * @modules java.base\/jdk.internal.platform\n@@ -45,4 +46,2 @@\n-        if (!DockerTestUtils.canTestDocker()) {\n-            return;\n-        }\n-\n+        DockerTestUtils.checkCanTestDocker();\n+        DockerTestUtils.checkCanUseResourceLimits();\n","filename":"test\/jdk\/jdk\/internal\/platform\/docker\/TestDockerBasic.java","additions":4,"deletions":5,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -49,3 +49,2 @@\n-        if (!DockerTestUtils.canTestDocker()) {\n-            return;\n-        }\n+        DockerTestUtils.checkCanTestDocker();\n+        DockerTestUtils.checkCanUseResourceLimits();\n","filename":"test\/jdk\/jdk\/internal\/platform\/docker\/TestDockerCpuMetrics.java","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -48,3 +48,2 @@\n-        if (!DockerTestUtils.canTestDocker()) {\n-            return;\n-        }\n+        DockerTestUtils.checkCanTestDocker();\n+        DockerTestUtils.checkCanUseResourceLimits();\n","filename":"test\/jdk\/jdk\/internal\/platform\/docker\/TestDockerMemoryMetrics.java","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -61,4 +61,1 @@\n-        if (!DockerTestUtils.canTestDocker()) {\n-            System.out.println(\"Unable to run docker tests.\");\n-            return;\n-        }\n+        DockerTestUtils.checkCanTestDocker();\n","filename":"test\/jdk\/jdk\/internal\/platform\/docker\/TestDockerMemoryMetricsSubgroup.java","additions":1,"deletions":4,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -32,0 +32,1 @@\n+ * @modules java.base\/jdk.internal.platform\n@@ -35,0 +36,1 @@\n+\n@@ -44,4 +46,2 @@\n-        if (!DockerTestUtils.canTestDocker()) {\n-            return;\n-        }\n-\n+        DockerTestUtils.checkCanTestDocker();\n+        DockerTestUtils.checkCanUseResourceLimits();\n","filename":"test\/jdk\/jdk\/internal\/platform\/docker\/TestGetFreeSwapSpaceSize.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -58,4 +58,2 @@\n-        if (!DockerTestUtils.canTestDocker()) {\n-            return;\n-        }\n-\n+        DockerTestUtils.checkCanTestDocker();\n+        DockerTestUtils.checkCanUseResourceLimits();\n","filename":"test\/jdk\/jdk\/internal\/platform\/docker\/TestLimitsUpdating.java","additions":2,"deletions":4,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -33,0 +33,1 @@\n+ * @modules java.base\/jdk.internal.platform\n@@ -52,4 +53,2 @@\n-        if (!DockerTestUtils.canTestDocker()) {\n-            return;\n-        }\n-\n+        DockerTestUtils.checkCanTestDocker();\n+        DockerTestUtils.checkCanUseResourceLimits();\n","filename":"test\/jdk\/jdk\/internal\/platform\/docker\/TestPidsLimit.java","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -45,4 +45,1 @@\n-        if (!DockerTestUtils.canTestDocker()) {\n-            return;\n-        }\n-\n+        DockerTestUtils.checkCanTestDocker();\n","filename":"test\/jdk\/jdk\/internal\/platform\/docker\/TestSystemMetrics.java","additions":1,"deletions":4,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -45,4 +45,1 @@\n-        if (!DockerTestUtils.canTestDocker()) {\n-            return;\n-        }\n-\n+        DockerTestUtils.checkCanTestDocker();\n","filename":"test\/jdk\/jdk\/internal\/platform\/docker\/TestUseContainerSupport.java","additions":1,"deletions":4,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -41,0 +41,1 @@\n+import jdk.internal.platform.Metrics;\n@@ -50,0 +51,1 @@\n+    private static final Metrics metrics = Metrics.systemMetrics();\n@@ -96,2 +98,1 @@\n-     * Convenience method, will check if docker engine is available and usable;\n-     * will print the appropriate message when not available.\n+     * Checks if the docker engine is available and usable, throws an exception if not.\n@@ -99,1 +100,0 @@\n-     * @return true if docker engine is available\n@@ -102,4 +102,2 @@\n-    public static boolean canTestDocker() throws Exception {\n-        if (isDockerEngineAvailable()) {\n-            return true;\n-        } else {\n+    public static void checkCanTestDocker() throws Exception {\n+        if (!isDockerEngineAvailable()) {\n@@ -136,0 +134,11 @@\n+    \/**\n+     * Checks if the engine can use resource limits, throws an exception if not.\n+     *\n+     * @throws Exception\n+     *\/\n+    public static void checkCanUseResourceLimits() throws Exception {\n+        if (isRootless() && \"cgroupv1\".equals(metrics.getProvider())) {\n+            throw new SkippedException(\"Resource limits are not available on this system\");\n+        }\n+    }\n+\n","filename":"test\/lib\/jdk\/test\/lib\/containers\/docker\/DockerTestUtils.java","additions":17,"deletions":8,"binary":false,"changes":25,"status":"modified"}]}