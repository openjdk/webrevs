{"files":[{"patch":"@@ -376,1 +376,1 @@\n-            MethodHandle mh = simpleConcat(concatType, constantStrings);\n+            MethodHandle mh = makeSimpleConcat(concatType, constantStrings);\n@@ -476,1 +476,1 @@\n-    private static MethodHandle simpleConcat(MethodType mt, String[] constants) {\n+    private static MethodHandle makeSimpleConcat(MethodType mt, String[] constants) {\n@@ -514,1 +514,1 @@\n-        } else if (paramCount == 2 && constants[1] == null) {\n+        } else if (paramCount == 2) {\n@@ -516,4 +516,5 @@\n-            \/\/ Two reference arguments, no surrounding constants\n-            if (!mt.hasPrimitives() && suffix.isEmpty() && prefix.isEmpty()) {\n-                return simpleConcat();\n-            }\n+            if (constants[1] == null) {\n+                \/\/ Two reference arguments, no surrounding constants\n+                if (!mt.hasPrimitives() && suffix.isEmpty() && prefix.isEmpty()) {\n+                    return simpleConcat();\n+                }\n@@ -521,5 +522,5 @@\n-            if (suffix.isEmpty() && !paramType1.isPrimitive()) {\n-                \/\/ \"prefix\" + i + s\n-                mh = simpleConcat3(paramType0);\n-                return MethodHandles.insertArguments(mh, 0, prefix);\n-            }\n+                if (suffix.isEmpty() && !paramType1.isPrimitive()) {\n+                    \/\/ \"prefix\" + param0 + param1\n+                    mh = simpleConcat3(paramType0);\n+                    return MethodHandles.insertArguments(mh, 0, prefix);\n+                }\n@@ -527,4 +528,5 @@\n-            if (prefix.isEmpty() && !paramType0.isPrimitive()) {\n-                \/\/ s + i + \"suffix\"\n-                mh = simpleConcat3(paramType1);\n-                return MethodHandles.insertArguments(mh, 2, suffix);\n+                if (prefix.isEmpty() && !paramType0.isPrimitive()) {\n+                    \/\/ param0 + param1 + \"suffix\"\n+                    mh = simpleConcat3(paramType1);\n+                    return MethodHandles.insertArguments(mh, 2, suffix);\n+                }\n@@ -532,0 +534,3 @@\n+        } else if (paramCount == 3 && !paramType0.isPrimitive() && !mt.parameterType(2).isPrimitive()\n+                && prefix.isEmpty() && constants[1] == null && constants[2] == null && suffix.isEmpty()) {\n+            mh = simpleConcat3(mt.parameterType(1));\n","filename":"src\/java.base\/share\/classes\/java\/lang\/invoke\/StringConcatFactory.java","additions":21,"deletions":16,"binary":false,"changes":37,"status":"modified"}]}