{"files":[{"patch":"@@ -70,1 +70,1 @@\n-      G1ConcurrentRefineThread* t = _threads[i];\n+      G1ConcurrentRefineThread* t = _threads->at(i);\n@@ -74,1 +74,1 @@\n-          assert(_threads[j] == nullptr, \"invariant\");\n+          assert(_threads->at(j) == nullptr, \"invariant\");\n@@ -82,1 +82,1 @@\n-    FREE_C_HEAP_ARRAY(G1ConcurrentRefineThread*, _threads);\n+    delete _threads;\n@@ -92,1 +92,1 @@\n-    _threads = NEW_C_HEAP_ARRAY(G1ConcurrentRefineThread*, max_num_threads, mtGC);\n+    _threads = new GrowableArray<G1ConcurrentRefineThread*>(_max_num_threads, mtGC);\n@@ -94,2 +94,2 @@\n-    _threads[0] = create_refinement_thread(0, true);\n-    if (_threads[0] == nullptr) {\n+    _threads->at(0) = create_refinement_thread(0, true);\n+    if (_threads->at(0) == nullptr) {\n@@ -102,1 +102,1 @@\n-        _threads[i] = nullptr;\n+        _threads->at(i) = nullptr;\n@@ -106,2 +106,2 @@\n-        _threads[i] = create_refinement_thread(i, true);\n-        if (_threads[i] == nullptr) {\n+        _threads->at(i) = create_refinement_thread(i, true);\n+        if (_threads->at(i) == nullptr) {\n@@ -121,1 +121,1 @@\n-  assert(Thread::current() == _threads[0], \"Not primary thread\");\n+  assert(Thread::current() == _threads->at(0), \"Not primary thread\");\n@@ -127,1 +127,1 @@\n-  G1ConcurrentRefineThread* thread_to_activate = _threads[worker_id];\n+  G1ConcurrentRefineThread* thread_to_activate = _threads->at(worker_id);\n@@ -133,1 +133,1 @@\n-    _threads[worker_id] = thread_to_activate;\n+    _threads->at(worker_id) = thread_to_activate;\n@@ -141,2 +141,2 @@\n-    if (_threads[i] != nullptr) {\n-      tc->do_thread(_threads[i]);\n+    if (_threads->at(i) != nullptr) {\n+      tc->do_thread(_threads->at(i));\n@@ -149,2 +149,2 @@\n-    if (_threads[i] != nullptr) {\n-      _threads[i]->stop();\n+    if (_threads->at(i) != nullptr) {\n+      _threads->at(i)->stop();\n","filename":"src\/hotspot\/share\/gc\/g1\/g1ConcurrentRefine.cpp","additions":16,"deletions":16,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -33,0 +33,1 @@\n+#include \"utilities\/growableArray.hpp\"\n@@ -46,1 +47,1 @@\n-  G1ConcurrentRefineThread** _threads;\n+  GrowableArray<G1ConcurrentRefineThread*>* _threads;\n","filename":"src\/hotspot\/share\/gc\/g1\/g1ConcurrentRefine.hpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"}]}