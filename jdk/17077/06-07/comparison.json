{"files":[{"patch":"@@ -93,2 +93,2 @@\n-    uint ensure_id = UseDynamicNumberOfGCThreads ? 0 : max_num_threads() - 1;\n-    if (!ensure_threads_created(ensure_id, true)) {\n+    _threads.push(create_refinement_thread(0, true));\n+    if (_threads.at(0) == nullptr) {\n@@ -98,0 +98,11 @@\n+\n+    if (UseDynamicNumberOfGCThreads) {\n+      for (uint i = 1; i < max_num_threads(); ++i) {\n+        _threads.push(nullptr);\n+      }\n+    } else {\n+      if (!ensure_threads_created(max_num_threads() - 1, true)) {\n+        vm_shutdown_during_initialization(\"Could not allocate refinement threads\");\n+        return JNI_ENOMEM;\n+      }\n+    }\n","filename":"src\/hotspot\/share\/gc\/g1\/g1ConcurrentRefine.cpp","additions":13,"deletions":2,"binary":false,"changes":15,"status":"modified"}]}