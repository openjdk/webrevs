{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -854,0 +854,2 @@\n+#define DEFAULT_PERFMAP_FILENAME \"\/tmp\/perf-<pid>.map\"\n+\n@@ -856,1 +858,1 @@\n-  _filename(\"filename\", \"Name of the map file\", \"STRING\", false)\n+  _filename(\"filename\", \"Name of the map file\", \"STRING\", false, DEFAULT_PERFMAP_FILENAME)\n@@ -862,1 +864,5 @@\n-  CodeCache::write_perf_map(_filename.value());\n+  const char* filename = _filename.value();\n+  if (strncmp(filename, DEFAULT_PERFMAP_FILENAME, strlen(DEFAULT_PERFMAP_FILENAME)) == 0) {\n+      filename = nullptr; \/\/ use the default filename based on the pid\n+  }\n+  CodeCache::write_perf_map(filename);\n@@ -994,0 +1000,2 @@\n+#define DEFAULT_CDS_ARCHIVE_FILENAME \"java_pid<pid>_<subcmd>.jsa\"\n+\n@@ -997,1 +1005,2 @@\n-  _filename(\"filename\", \"Name of shared archive to be dumped\", \"STRING\", false)\n+  _filename(\"filename\", \"Name of shared archive to be dumped\", \"STRING\", false,\n+            DEFAULT_CDS_ARCHIVE_FILENAME)\n@@ -1008,0 +1017,4 @@\n+  if (strncmp(file, DEFAULT_PERFMAP_FILENAME, strlen(DEFAULT_PERFMAP_FILENAME)) == 0) {\n+    file = nullptr; \/\/ use the default filename based on the suboption and pid\n+  }\n+\n","filename":"src\/hotspot\/share\/services\/diagnosticCommand.cpp","additions":17,"deletions":4,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -257,2 +257,7 @@\n-\\f[I]filename\\f[R]: (Optional) The name of the map file (STRING, no\n-default value)\n+\\f[I]filename\\f[R]: (Optional) The name of the map file (STRING,\n+\\[dq]\/tmp\/perf-<pid>.map\\[dq])\n+.PP\n+If \\f[V]filename\\f[R] is not specified, a default file name is chosen\n+using the pid of the target JVM process.\n+For example, if the pid is \\f[V]12345\\f[R], then the default\n+\\f[V]filename\\f[R] will be \\f[V]\/tmp\/perf-12345.map\\f[R].\n@@ -883,1 +888,1 @@\n-\\f[V]filepath\\f[R]: The file path to the output file (STRING, no default\n+\\f[I]filepath\\f[R]: The file path to the output file (STRING, no default\n@@ -916,1 +921,1 @@\n-\\f[V]subcmd\\f[R]: must be either \\f[V]static_dump\\f[R] or\n+\\f[I]subcmd\\f[R]: must be either \\f[V]static_dump\\f[R] or\n@@ -919,2 +924,2 @@\n-\\f[V]filename\\f[R]: (Optional) Name of the shared archive to be dumped\n-(STRING, no default value)\n+\\f[I]filename\\f[R]: (Optional) Name of the shared archive to be dumped\n+(STRING, \\[dq]java_pid<pid>_<subcmd>.jsa\\[dq])\n","filename":"src\/jdk.jcmd\/share\/man\/jcmd.1","additions":11,"deletions":6,"binary":false,"changes":17,"status":"modified"}]}