{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -854,0 +854,2 @@\n+#define DEFAULT_PERFMAP_FILENAME \"\/tmp\/perf-<pid>.map\"\n+\n@@ -856,1 +858,1 @@\n-  _filename(\"filename\", \"Name of the map file\", \"STRING\", false, \"\/tmp\/perf-<pid>.map\")\n+  _filename(\"filename\", \"Name of the map file\", \"STRING\", false, DEFAULT_PERFMAP_FILENAME)\n@@ -862,1 +864,5 @@\n-  CodeCache::write_perf_map(_filename.value());\n+  const char* filename = _filename.value();\n+  if (strncmp(filename, DEFAULT_PERFMAP_FILENAME, strlen(DEFAULT_PERFMAP_FILENAME)) == 0) {\n+      filename = nullptr; \/\/ use the default filename based on the pid\n+  }\n+  CodeCache::write_perf_map(filename);\n@@ -994,0 +1000,2 @@\n+#define DEFAULT_CDS_ARCHIVE_FILENAME \"java_pid<pid>_<subcmd>.jsa\"\n+\n@@ -998,1 +1006,1 @@\n-            \"java_pid<pid>_<subcmd>.jsa\")\n+            DEFAULT_CDS_ARCHIVE_FILENAME)\n@@ -1009,0 +1017,4 @@\n+  if (strncmp(file, DEFAULT_PERFMAP_FILENAME, strlen(DEFAULT_PERFMAP_FILENAME)) == 0) {\n+    file = nullptr; \/\/ use the default filename based on the suboption and pid\n+  }\n+\n","filename":"src\/hotspot\/share\/services\/diagnosticCommand.cpp","additions":16,"deletions":4,"binary":false,"changes":20,"status":"modified"}]}