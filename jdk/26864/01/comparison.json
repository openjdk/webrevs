{"files":[{"patch":"@@ -11,0 +11,1 @@\n+    if (type.isPrimitive() || type.isHidden() || type.isArray()) throw new IllegalArgumentException(\"Type has no class file: \" + type);\n@@ -12,2 +13,1 @@\n-        var name = type.getCanonicalName();\n-        if (name == null) throw new IllegalArgumentException(\"Type not supported: \" + type);\n+        var name = type.getName();\n","filename":"src\/jdk.jshell\/share\/classes\/jdk\/jshell\/tool\/resources\/TOOLING.jsh","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2023, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,1 +26,1 @@\n- * @bug 8306560\n+ * @bug 8306560 8365878\n@@ -82,0 +82,27 @@\n+\n+    @Test\n+    public void testDisassembleBuiltinInnerClass() {\n+        test(\n+            a -> assertCommand(a, \"\/open TOOLING\",\n+                        \"\"),\n+            a -> assertCommandUserOutputContains(a, \"javap(Base64.Decoder.class)\",\n+                        \"Classfile jrt:\/java.base\/java\/util\/Base64$Decoder.class\",\n+                        \"class java.util.Base64$Decoder\",\n+                        \"SourceFile: \\\"Base64.java\\\"\")\n+        );\n+    }\n+\n+    @Test\n+    public void testDisassembleAnonymousClass() {\n+        test(\n+            a -> assertCommand(a, \"Object o() {return new ArrayList<>(){ };}\", \/\/ must be in a method or it won't be anonymous\n+                        \"|  created method o()\"),\n+            a -> assertCommand(a, \"\/open TOOLING\",\n+                        \"\"),\n+            a -> assertCommandUserOutputContains(a, \"javap(o().getClass())\",\n+                        \"Classfile \", \/\/ Classfile \/...\/TOOLING-16063368030094702464.class\n+                        \" extends java.util.ArrayList<java.lang.Object>\", \/\/ class REPL.$JShell$22$1 extends java.util.ArrayList<java.lang.Object>\n+                        \"SourceFile: \\\"$JShell$\" \/\/ SourceFile: \"$JShell$22.java\"\n+            )\n+        );\n+    }\n","filename":"test\/langtools\/jdk\/jshell\/ToolingTest.java","additions":29,"deletions":2,"binary":false,"changes":31,"status":"modified"}]}