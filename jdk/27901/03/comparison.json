{"files":[{"patch":"@@ -214,0 +214,5 @@\n+            Tree typeAnno = new TypeAnnotationFinder().scan(tree, null);\n+            if (typeAnno != null) {\n+                int annoPos = ((JCTree) typeAnno).getStartPosition();\n+                throw new ParseException(beginIndex + annoPos, \"dc.ref.annotations.not.allowed\");\n+            }\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/parser\/ReferenceParser.java","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-CrashInAnnotateTest.java:11:37: compiler.err.proc.messager: syntax error in reference\n+CrashInAnnotateTest.java:11:12: compiler.err.proc.messager: annotations not allowed\n@@ -4,4 +4,4 @@\n-CrashInAnnotateTest.java:21:23: compiler.err.proc.messager: syntax error in reference\n-CrashInAnnotateTest.java:24:54: compiler.err.proc.messager: syntax error in reference\n-CrashInAnnotateTest.java:25:37: compiler.err.proc.messager: syntax error in reference\n-6 errors\n\\ No newline at end of file\n+CrashInAnnotateTest.java:21:12: compiler.err.proc.messager: annotations not allowed\n+CrashInAnnotateTest.java:24:12: compiler.err.proc.messager: annotations not allowed\n+CrashInAnnotateTest.java:25:12: compiler.err.proc.messager: annotations not allowed\n+6 errors\n","filename":"test\/langtools\/tools\/doclint\/CrashInAnnotateTest.out","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -0,0 +1,21 @@\n+\/*\n+ * @test \/nodynamiccopyright\/\n+ * @bug 8370237\n+ * @summary AssertionError in Annotate.fromAnnotations with -Xdoclint and type annotations\n+ * @compile\/fail\/ref=CrashInTypeAnnotateTest.out -Xdoclint:all,-missing -XDrawDiagnostics CrashInTypeAnnotateTest.java\n+ *\/\n+\n+import java.util.List;\n+import java.lang.annotation.ElementType;\n+import java.lang.annotation.Retention;\n+import java.lang.annotation.RetentionPolicy;\n+import java.lang.annotation.Target;\n+\n+@Target(ElementType.TYPE_PARAMETER)\n+@Retention(RetentionPolicy.RUNTIME)\n+@interface A {}\n+\n+\/** {@link List<@A String>}\n+ *\/\n+class CrashInTypeAnnotateTest {\n+}\n","filename":"test\/langtools\/tools\/doclint\/CrashInTypeAnnotateTest.java","additions":21,"deletions":0,"binary":false,"changes":21,"status":"added"},{"patch":"@@ -0,0 +1,2 @@\n+CrashInTypeAnnotateTest.java:18:17: compiler.err.proc.messager: annotations not allowed\n+1 error\n","filename":"test\/langtools\/tools\/doclint\/CrashInTypeAnnotateTest.out","additions":2,"deletions":0,"binary":false,"changes":2,"status":"added"},{"patch":"@@ -44,1 +44,1 @@\n-compiler.err.cant.attach.type.annotations               # bad class file\n+compiler.warn.cant.attach.type.annotations              # bad class file\n","filename":"test\/langtools\/tools\/javac\/diags\/examples.not-yet.txt","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}