{"files":[{"patch":"@@ -123,0 +123,1 @@\n+  assert(!_method->is_old(), \"the breakpoint method shouldn't be old\");\n@@ -186,0 +187,2 @@\n+\/\/ The caller of VM_ChangeBreakpoints operation should ensure that\n+\/\/ _bp.method is preserved until VM_ChangeBreakpoints is processed.\n@@ -188,0 +191,6 @@\n+  if (_bp->method()->is_old()) {\n+    \/\/ The bp->_method became old because VMOp with class redefinition happened for this class\n+    \/\/ after JvmtiBreakpoint was created but before JVM_ChangeBreakpoints started.\n+    \/\/ All class breakpoints are cleared during redefinition, so don't set\/clear this breakpoint.\n+   return;\n+  }\n@@ -252,0 +261,3 @@\n+\n+  \/\/ ensure that bp._method is not deallocated before VM_ChangeBreakpoints::doit()\n+  methodHandle mh(Thread::current(), bp.method());\n@@ -262,0 +274,2 @@\n+  \/\/ ensure that bp._method is not deallocated before VM_ChangeBreakpoints::doit()\n+  methodHandle mh(Thread::current(), bp.method());\n","filename":"src\/hotspot\/share\/prims\/jvmtiImpl.cpp","additions":14,"deletions":0,"binary":false,"changes":14,"status":"modified"}]}