{"files":[{"patch":"@@ -2328,0 +2328,1 @@\n+        DeferredCompletionFailureHandler.Handler prevCFHandler = dcfh.setHandler(dcfh.speculativeCodeHandler);\n@@ -2333,1 +2334,1 @@\n-                log.error(Errors.CantAttachTypeAnnotations(attributes, s.owner, s.name, ex.getDetailValue()));\n+                log.warning(Warnings.CantAttachTypeAnnotations(attributes, s.owner, s.name, ex.getDetailValue()));\n@@ -2337,0 +2338,2 @@\n+        } finally {\n+            dcfh.setHandler(prevCFHandler);\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/jvm\/ClassReader.java","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2468,1 +2468,1 @@\n-compiler.err.cant.attach.type.annotations=\\\n+compiler.warn.cant.attach.type.annotations=\\\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/resources\/compiler.properties","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n- * @bug 8337998\n+ * @bug 8337998 8370800\n@@ -59,1 +59,1 @@\n-                  private @Anno A<String> a;\n+                  public @Anno A<String> a;\n@@ -66,0 +66,3 @@\n+                  public void test() {\n+                    b.a.toString();\n+                  }\n@@ -77,1 +80,1 @@\n-        \/\/ now if we remove A.class there will be an error but javac should not crash\n+        \/\/ now if we remove A.class javac should not crash\n@@ -79,0 +82,1 @@\n+\n@@ -83,1 +87,2 @@\n-                        .options(\"-XDrawDiagnostics\")\n+                        \/\/ DO NOT SUBMIT - this is a draft, see discussion in PR\n+                        .options(\/*\"-Werror\",*\/ \"-XDrawDiagnostics\")\n@@ -91,3 +96,4 @@\n-                        \"B.class:-:-: compiler.err.cant.attach.type.annotations: @Anno, B, a,\"\n-                            + \" (compiler.misc.class.file.not.found: A)\",\n-                        \"1 error\");\n+\"B.class:-:-: compiler.warn.cant.attach.type.annotations: @Anno, B, a, (compiler.misc.class.file.not.found: A)\",\n+\"C.java:4:8: compiler.err.cant.access: A, (compiler.misc.class.file.not.found: A)\",\n+\"1 error\",\n+\"1 warning\");\n","filename":"test\/langtools\/tools\/javac\/annotations\/typeAnnotations\/CompletionErrorOnEnclosingType.java","additions":13,"deletions":7,"binary":false,"changes":20,"status":"modified"}]}