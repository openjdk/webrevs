{"files":[{"patch":"@@ -75,0 +75,1 @@\n+                  private @Anno A<String> f() { return null; };\n@@ -96,1 +97,2 @@\n-        \/\/ now if we remove A.class there will be an error but javac should not crash\n+        \/\/ Missing references through fields and methods are not reported as errors,\n+        \/\/ because those symbols aren't completed here.\n@@ -98,9 +100,8 @@\n-        List<String> log =\n-                new JavacTask(tb)\n-                        .outdir(out)\n-                        .classpath(out)\n-                        .options(\"-XDrawDiagnostics\")\n-                        .files(src.resolve(\"C.java\"))\n-                        .run(Expect.SUCCESS)\n-                        .writeAll()\n-                        .getOutputLines(Task.OutputKind.DIRECT);\n+        new JavacTask(tb)\n+                .outdir(out)\n+                .classpath(out)\n+                .options(\"-XDrawDiagnostics\")\n+                .files(src.resolve(\"C.java\"))\n+                .run(Expect.SUCCESS)\n+                .writeAll()\n+                .getOutputLines(Task.OutputKind.DIRECT);\n@@ -133,0 +134,9 @@\n+            for (var m : ElementFilter.methodsIn(te.getEnclosedElements())) {\n+                TypeMirror t = m.getReturnType();\n+                processingEnv\n+                        .getMessager()\n+                        .printMessage(\n+                                Diagnostic.Kind.NOTE,\n+                                \"%s (%s) has annotations [%s]\"\n+                                        .formatted(m, t, t.getAnnotationMirrors()));\n+            }\n@@ -155,0 +165,2 @@\n+                            + \" annotations [@Anno]\",\n+                        \"- compiler.note.proc.messager: f() (@Anno A<java.lang.String>) has\"\n@@ -177,2 +189,2 @@\n-                        \"B.class:-:-: compiler.err.cant.attach.type.annotations: @Anno, B, a,\"\n-                                + \" (compiler.misc.class.file.not.found: A)\",\n+                        \"B.class:-:-: compiler.err.cant.attach.type.annotations: @Anno, B, f,\"\n+                            + \" (compiler.misc.class.file.not.found: A)\",\n@@ -180,0 +192,2 @@\n+                        \"- compiler.note.proc.messager: f() (A<java.lang.String>) has annotations\"\n+                            + \" []\",\n","filename":"test\/langtools\/tools\/javac\/annotations\/typeAnnotations\/CompletionErrorOnEnclosingType.java","additions":26,"deletions":12,"binary":false,"changes":38,"status":"modified"}]}