{"files":[{"patch":"@@ -2313,7 +2313,5 @@\n-                if (sym.completer != Completer.NULL_COMPLETER) {\n-                    Assert.check(sym.completer instanceof TypeAnnotationsSymbolCompleter);\n-                    TypeAnnotationsSymbolCompleter completer = (TypeAnnotationsSymbolCompleter) sym.completer;\n-                    completer.attributes = newList.prependList(completer.attributes);\n-                } else {\n-                    sym.completer = new TypeAnnotationsSymbolCompleter(newList);\n-                }\n+                Completer previousCompleter = sym.completer;\n+                sym.completer = sym -> {\n+                    addTypeAnnotationsToSymbol(sym, newList);\n+                    previousCompleter.complete(sym);\n+                };\n@@ -2326,16 +2324,0 @@\n-    private class TypeAnnotationsSymbolCompleter implements Completer {\n-\n-        List<Attribute.TypeCompound> attributes;\n-\n-        private TypeAnnotationsSymbolCompleter(List<Attribute.TypeCompound> attributes) {\n-            this.attributes = attributes;\n-        }\n-\n-        @Override\n-        public void complete(Symbol sym) throws CompletionFailure {\n-            Assert.checkNonNull(attributes);\n-            addTypeAnnotationsToSymbol(sym, attributes);\n-            attributes = null;\n-        }\n-    }\n-\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/jvm\/ClassReader.java","additions":5,"deletions":23,"binary":false,"changes":28,"status":"modified"}]}