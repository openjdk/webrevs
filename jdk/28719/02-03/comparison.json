{"files":[{"patch":"@@ -96,0 +96,14 @@\n+bool WorkerThreads::allow_creation_failure() const {\n+  if (!is_init_completed()) {\n+    \/\/ Never allow creation failures during VM init\n+    return false;\n+  }\n+\n+  if (_created_workers == 0) {\n+    \/\/ Never allow creation failures of the first worker, it will cause the VM to exit\n+    return false;\n+  }\n+\n+  return true;\n+}\n+\n@@ -97,0 +111,3 @@\n+  if (InjectGCWorkerCreationFailure && allow_creation_failure()) {\n+    return nullptr;\n+  }\n@@ -117,7 +134,0 @@\n-  if (_created_workers > 0 && InjectGCWorkerCreationFailure) {\n-    assert(is_init_completed(), \"Initialization not completed\");\n-    log_error(gc, task)(\"Failed to create worker thread (InjectGCWorkerCreationFailure)\");\n-    _active_workers = MIN2(_created_workers, num_workers);\n-    return _active_workers;\n-  }\n-\n","filename":"src\/hotspot\/share\/gc\/shared\/workerThread.cpp","additions":17,"deletions":7,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -106,0 +106,1 @@\n+  bool allow_creation_failure() const;\n","filename":"src\/hotspot\/share\/gc\/shared\/workerThread.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"}]}