{"files":[{"patch":"@@ -432,2 +432,8 @@\n-    if (!mode_flag_cmd_line) {\n-      \/\/ By default, -Xshare:dump runs in interpreter-only mode, which is required for deterministic archive.\n+    if (!mode_flag_cmd_line JVMCI_ONLY(&& !UseJVMCICompiler && !UseGraalJIT && !EnableJVMCIProduct && !EnableJVMCI)) {\n+      \/\/ By default, -Xshare:dump runs in interpreter-only mode, which is required for\n+      \/\/ generating deterministic archives when building the JDK.\n+      \/\/\n+      \/\/ We check the JVMCI flags here to avoid running with -Xint when the JVMCI compiler is used.\n+      \/\/ Ideally we should only check EnableJVMCI, but that flag can be ergonomically enabled\n+      \/\/ in CompilerConfig::check_args_consistency(), which is called after the current function returns.\n+      \/\/ So we have to manually check all the relevant flags here. TODO: This should be refactored.\n","filename":"src\/hotspot\/share\/cds\/cdsConfig.cpp","additions":8,"deletions":2,"binary":false,"changes":10,"status":"modified"}]}