{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -309,0 +309,11 @@\n+#ifdef X86\n+  const size_t max_reachable = (size_t)max_jint;\n+  if (cache_size > max_reachable) {\n+    err_msg message(\"Code cache size (%zuK) exceeds the maximum supported on x86 (%zuK) due to \"\n+                    \"32-bit relative branch reach. \"\n+                    \"Segments: NonNMethod=%zuK NonProfiled=%zuK Profiled=%zuK.\",\n+                    cache_size\/K, max_reachable\/K,\n+                    non_nmethod.size\/K, non_profiled.size\/K, profiled.size\/K);\n+    vm_exit_during_initialization(\"Invalid code cache sizes\", message);\n+  }\n+#endif\n","filename":"src\/hotspot\/share\/code\/codeCache.cpp","additions":12,"deletions":1,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,1 +26,1 @@\n- * @bug 8015774\n+ * @bug 8015774 8375598\n@@ -250,0 +250,9 @@\n+\n+        \/\/ JDK-8375598: On x86\/x64, a too large code cache may exceed the reach of 32-bit relative branches.\n+        \/\/ The VM should fail fast during initialization.\n+        if (Platform.isX86() || Platform.isX64()) {\n+            pb = ProcessTools.createLimitedTestJavaProcessBuilder(\"-XX:+SegmentedCodeCache\",\n+                                                                  \"-XX:NonNMethodCodeHeapSize=3G\",\n+                                                                  \"-version\");\n+            failsWith(pb, \"Invalid code cache sizes\");\n+        }\n","filename":"test\/hotspot\/jtreg\/compiler\/codecache\/CheckSegmentedCodeCache.java","additions":11,"deletions":2,"binary":false,"changes":13,"status":"modified"}]}