{"files":[{"patch":"@@ -66,0 +66,12 @@\n+static bool has_neoverse_n1_errata_1542419() {\n+  const int major_rev_num = VM_Version::cpu_variant();\n+  const int minor_rev_num = VM_Version::cpu_revision();\n+  \/\/ Neoverse N1: 0xd0c\n+  \/\/ Erratum 1542419 affects r3p0, r3p1 and r4p0.\n+  return (VM_Version::cpu_family() == VM_Version::CPU_ARM &&\n+          VM_Version::model_is(0xd0c) &&\n+          ((major_rev_num == 3 && minor_rev_num == 0) ||\n+           (major_rev_num == 3 && minor_rev_num == 1) ||\n+           (major_rev_num == 4 && minor_rev_num == 0)));\n+}\n+\n@@ -644,9 +656,6 @@\n-  \/\/ Neoverse N1: 0xd0c\n-  if (_cpu == CPU_ARM && model_is(0xd0c) && FLAG_IS_DEFAULT(NeoverseN1Errata1542419)) {\n-    const int major_rev_num = cpu_variant();\n-    const int minor_rev_num = cpu_revision();\n-    if (!(major_rev_num >= 4 && minor_rev_num >= 1)) {\n-      \/\/ As Neoverse N1 r4p1 and later are not affected by the erratum,\n-      \/\/ enable the workaround by default for earlier revisions.\n-      FLAG_SET_DEFAULT(NeoverseN1Errata1542419, true);\n-    }\n+  if (FLAG_IS_DEFAULT(NeoverseN1Errata1542419) && has_neoverse_n1_errata_1542419()) {\n+    FLAG_SET_DEFAULT(NeoverseN1Errata1542419, true);\n+  }\n+\n+  if (NeoverseN1Errata1542419 && !has_neoverse_n1_errata_1542419()) {\n+    warning(\"NeoverseN1Errata1542419 is set for the CPU not having Neoverse N1 errata 1542419\");\n","filename":"src\/hotspot\/cpu\/aarch64\/vm_version_aarch64.cpp","additions":18,"deletions":9,"binary":false,"changes":27,"status":"modified"}]}