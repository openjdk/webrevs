{"files":[{"patch":"@@ -883,2 +883,2 @@\n-    assert(ICacheInvalidationContext::current() != nullptr,\n-           \"UseDeferredICacheInvalidation requires ICacheInvalidationContext to be set.\");\n+    assert(ICacheInvalidationContext::is_deferring_icache_invalidation(),\n+           \"UseDeferredICacheInvalidation requires ICacheInvalidationContext to defer icache invalidation.\");\n","filename":"src\/hotspot\/cpu\/aarch64\/gc\/z\/zBarrierSetAssembler_aarch64.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -141,2 +141,2 @@\n-  static AArch64ICacheInvalidationContext* current() {\n-    return _current_context;\n+  static bool is_deferring_icache_invalidation() {\n+    return _current_context != nullptr && UseDeferredICacheInvalidation;\n","filename":"src\/hotspot\/os_cpu\/linux_aarch64\/icache_linux_aarch64.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -140,0 +140,6 @@\n+\n+#ifdef ASSERT\n+  static bool is_deferring_icache_invalidation() {\n+    return false;\n+  }\n+#endif\n","filename":"src\/hotspot\/share\/runtime\/icache.hpp","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"}]}