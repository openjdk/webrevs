{"files":[{"patch":"@@ -29,0 +29,1 @@\n+#include \"memory\/arena.hpp\"\n@@ -63,1 +64,1 @@\n-  struct Link : public CHeapObj<mtNMT> {\n+  struct Link : public ArenaObj {\n@@ -81,1 +82,1 @@\n-    Link* new_link = new Link(_buckets[bucket], StackIndex(idx));\n+    Link* new_link = new (&_arena) Link(_buckets[bucket], StackIndex(idx));\n@@ -86,0 +87,2 @@\n+  \/\/ For storage of the Links\n+  Arena _arena;\n@@ -87,1 +90,1 @@\n-  \/\/ 4099 gives a 50% probability of collisions at 76 stacks (as per birthday problem).    os::\n+  \/\/ 4099 gives a 50% probability of collisions at 76 stacks (as per birthday problem).\n@@ -107,1 +110,1 @@\n-  :  _buckets(nullptr), _stacks(), _is_detailed_mode(is_detailed_mode) {\n+  : _arena(mtNMT), _buckets(nullptr), _stacks(), _is_detailed_mode(is_detailed_mode) {\n@@ -109,1 +112,1 @@\n-      _buckets = NEW_C_HEAP_ARRAY(Link*, _nr_buckets, mtNMT);\n+      _buckets = NEW_ARENA_ARRAY(&_arena, Link*, _nr_buckets);\n@@ -115,4 +118,0 @@\n-\n-  ~NativeCallStackStorage() {\n-    FREE_C_HEAP_ARRAY(Link*, _buckets);\n-  }\n","filename":"src\/hotspot\/share\/nmt\/nmtNativeCallStackStorage.hpp","additions":8,"deletions":9,"binary":false,"changes":17,"status":"modified"}]}