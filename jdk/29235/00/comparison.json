{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2021, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,0 +32,1 @@\n+@property BOOL announceEditUpdates;\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/a11y\/NavigableTextAccessibility.h","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2021, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -19,1 +19,0 @@\n- * 2 along with this work; if not, write to the Free Software Foundation,\n@@ -63,0 +62,16 @@\n+- (id)init {\n+    self = [super init];\n+    if (self) {\n+        _announceEditUpdates = YES;\n+    }\n+    return self;\n+}\n+\n+- (void)suppressEditUpdates {\n+    _announceEditUpdates = NO;\n+}\n+\n+- (void)resumeEditUpdates {\n+    _announceEditUpdates = YES;\n+}\n+\n@@ -120,0 +135,3 @@\n+    if (!_announceEditUpdates) {\n+        return @\"\";\n+    }\n@@ -309,0 +327,6 @@\n+- (void)postSelectedTextChanged\n+{\n+    [super postSelectedTextChanged];\n+    [self resumeEditUpdates];\n+}\n+\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/a11y\/NavigableTextAccessibility.m","additions":26,"deletions":2,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2021, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,0 +27,1 @@\n+#import \"ThreadUtilities.h\"\n@@ -47,1 +48,9 @@\n-    return [super accessibilityValue];\n+    id val = [super accessibilityValue];\n+    NSArray *clist = [super accessibilityChildren];\n+    for (NSUInteger i = 0; i < [clist count]; i++) {\n+        id child = [clist objectAtIndex:i];\n+        if ([child conformsToProtocol:@protocol(NSAccessibilityNavigableStaticText)]) {\n+            val = [child accessibilityValue];\n+        }\n+    }\n+    return val;\n@@ -71,0 +80,15 @@\n+- (void)postValueChanged\n+{\n+    AWT_ASSERT_APPKIT_THREAD;\n+    NSAccessibilityPostNotification(self, NSAccessibilityValueChangedNotification);\n+    NSArray *clist = [super accessibilityChildren];\n+    for (NSUInteger i = 0; i < [clist count]; i++) {\n+        id child = [clist objectAtIndex:i];\n+        if ([child conformsToProtocol:@protocol(NSAccessibilityNavigableStaticText)]) {\n+            NSAccessibilityPostNotification(child, NSAccessibilityLayoutChangedNotification);\n+            NSAccessibilityPostNotification(child, NSAccessibilityAnnouncementRequestedNotification);\n+            [child suppressEditUpdates];\n+        }\n+    }\n+}\n+\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/a11y\/SpinboxAccessibility.m","additions":26,"deletions":2,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -0,0 +1,86 @@\n+\/*\n+ * Copyright (c) 2026, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.awt.GridLayout;\n+import java.lang.reflect.InvocationTargetException;\n+import javax.swing.JLabel;\n+import javax.swing.JPanel;\n+import javax.swing.JSpinner;\n+import javax.swing.SpinnerListModel;\n+\n+\/*\n+ * @test\n+ * @bug 8286258\n+ * @library \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame\n+ * @requires (os.family == \"mac\")\n+ * @summary Checks that JSpinner with custom model announces\n+ *          the value every time it is changed\n+ * @run main\/manual CustomSpinnerAccessibilityTest\n+ *\/\n+\n+public class CustomSpinnerAccessibilityTest extends JPanel {\n+    private static final String INSTRUCTIONS = \"\"\"\n+            1. Turn on VoiceOver\n+            2. In the window named \"Test UI\" click on the text editor inside the\n+               spinner component\n+            3. Using up and down arrows change current month\n+            4. Wait for the VoiceOver to finish speaking\n+            5. Repeat steps 3 and 4 couple more times\n+\n+            If every time value of the spinner is changed VoiceOver\n+            announces the new value click \"Pass\".\n+            If instead the value is narrated only partially\n+            and the new value is never fully narrated press \"Fail\".\n+            \"\"\";\n+\n+    public CustomSpinnerAccessibilityTest() {\n+        super(new GridLayout(0, 2));\n+        String[] monthStrings = new java.text.DateFormatSymbols().getMonths();\n+        int lastIndex = monthStrings.length - 1;\n+        if (monthStrings[lastIndex] == null\n+                || monthStrings[lastIndex].length() <= 0) {\n+            String[] tmp = new String[lastIndex];\n+            System.arraycopy(monthStrings, 0,\n+                    tmp, 0, lastIndex);\n+            monthStrings = tmp;\n+        }\n+\n+        SpinnerListModel model = new SpinnerListModel(monthStrings);\n+        JLabel label = new JLabel(\"Month: \");\n+        add(label);\n+        JSpinner spinner = new JSpinner(model);\n+        label.setLabelFor(spinner);\n+        add(spinner);\n+    }\n+\n+    public static void main(String[] args) throws InterruptedException,\n+            InvocationTargetException {\n+        PassFailJFrame.builder()\n+                .title(\"Custom Spinner Accessibility Test\")\n+                .instructions(INSTRUCTIONS)\n+                .testUI(CustomSpinnerAccessibilityTest::new)\n+                .build()\n+                .awaitAndCheck();\n+    }\n+}\n","filename":"test\/jdk\/javax\/accessibility\/JSpinner\/CustomSpinnerAccessibilityTest.java","additions":86,"deletions":0,"binary":false,"changes":86,"status":"added"}]}