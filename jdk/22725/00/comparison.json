{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,7 +27,1 @@\n-\n-#include \"utilities\/vmassert_uninstall.hpp\"\n-#include <iomanip>\n-#include <string.h>\n-#include <sstream>\n-#include \"utilities\/vmassert_reinstall.hpp\"\n-\n+#include \"utilities\/ostream.hpp\"\n@@ -74,3 +68,4 @@\n-          std::ostringstream err_stream;\n-          err_stream << \"*** memset_with_concurrent_readers failed: set start \"\n-                     << set_start << \", set end \" << set_end << std::endl;\n+          stringStream err_stream{};\n+          err_stream.print_cr(\"*** memset_with_concurrent_readers failed: \"\n+                              \"set start %zu, set end %zu\",\n+                              set_start, set_end);\n@@ -82,9 +77,10 @@\n-              err_stream << std::dec << chunk << \",\" << line << \": \" << std::hex\n-                         << std::setw(2) << line_byte(lp, 0) << \" \"\n-                         << std::setw(2) << line_byte(lp, 1) << \"  \"\n-                         << std::setw(2) << line_byte(lp, 2) << \" \"\n-                         << std::setw(2) << line_byte(lp, 3) << \"  \"\n-                         << std::setw(2) << line_byte(lp, 4) << \" \"\n-                         << std::setw(2) << line_byte(lp, 5) << \"  \"\n-                         << std::setw(2) << line_byte(lp, 6) << \" \"\n-                         << std::setw(2) << line_byte(lp, 7) << std::endl;\n+              err_stream.print_cr(\"%u, %u: \"\n+                                  \"%02x %02x  \"\n+                                  \"%02x %02x  \"\n+                                  \"%02x %02x  \"\n+                                  \"%02x %02x\",\n+                                  chunk, line,\n+                                  line_byte(lp, 0), line_byte(lp, 1),\n+                                  line_byte(lp, 2), line_byte(lp, 3),\n+                                  line_byte(lp, 4), line_byte(lp, 5),\n+                                  line_byte(lp, 6), line_byte(lp, 7));\n@@ -96,1 +92,1 @@\n-          ASSERT_TRUE(head_clear && middle_set && tail_clear) << err_stream.str();\n+          ASSERT_TRUE(head_clear && middle_set && tail_clear) << err_stream.freeze();\n","filename":"test\/hotspot\/gtest\/gc\/shared\/test_memset_with_concurrent_readers.cpp","additions":17,"deletions":21,"binary":false,"changes":38,"status":"modified"}]}