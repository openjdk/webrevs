{"files":[{"patch":"@@ -37,0 +37,1 @@\n+import java.lang.reflect.InvocationTargetException;\n@@ -48,1 +49,1 @@\n-public class RootPaneDefaultButtonTest extends JDialog {\n+public class RootPaneDefaultButtonTest {\n@@ -53,0 +54,75 @@\n+    static class TestDialog extends JDialog {\n+        JRadioButton radioButton1 = new JRadioButton(\n+                \"\\\"Button 1\\\" is the default button\");\n+        JRadioButton radioButton2 = new JRadioButton(\n+                \"\\\"Button 2\\\" is the default button\");\n+        JRadioButton radioButton3 = new JRadioButton(\"No default button\");\n+\n+        JButton button1 = new JButton(\"Button 1\");\n+        JButton button2 = new JButton(\"Button 2\");\n+\n+        TestDialog() {\n+            getContentPane().setLayout(new BorderLayout());\n+            getContentPane().add(createRadioButtonPanel(), BorderLayout.NORTH);\n+            getContentPane().add(createPushButtonRow(), BorderLayout.SOUTH);\n+            pack();\n+\n+            radioButton1.addActionListener(new ActionListener() {\n+                @Override\n+                public void actionPerformed(ActionEvent e) {\n+                    getRootPane().setDefaultButton(button1);\n+                }\n+            });\n+\n+            radioButton2.addActionListener(new ActionListener() {\n+                @Override\n+                public void actionPerformed(ActionEvent e) {\n+                    getRootPane().setDefaultButton(button2);\n+                }\n+            });\n+\n+            radioButton3.addActionListener(new ActionListener() {\n+                @Override\n+                public void actionPerformed(ActionEvent e) {\n+                    getRootPane().setDefaultButton(null);\n+                }\n+            });\n+\n+            ButtonGroup g = new ButtonGroup();\n+            g.add(radioButton1);\n+            g.add(radioButton2);\n+            g.add(radioButton3);\n+            radioButton1.doClick();\n+        }\n+\n+        private JPanel createPushButtonRow() {\n+            JPanel p = new JPanel(new GridLayout(1, 2));\n+            p.add(button1);\n+            p.add(button2);\n+            p.setBorder(new EmptyBorder(5,5,5,5));\n+            return p;\n+        }\n+\n+        private JPanel createRadioButtonPanel() {\n+            JPanel p = new JPanel(new GridLayout(3, 1));\n+            p.add(radioButton1);\n+            p.add(radioButton2);\n+            p.add(radioButton3);\n+            p.setBorder(new EmptyBorder(5,5,5,5));\n+            return p;\n+        }\n+    }\n+\n+    private static boolean isSimilar(Color c1, Color c2) {\n+        if (Math.abs(c1.getRed() - c2.getRed()) > 15) {\n+            return false;\n+        }\n+        if (Math.abs(c1.getGreen() - c2.getGreen()) > 15) {\n+            return false;\n+        }\n+        if (Math.abs(c1.getBlue() - c2.getBlue()) > 15) {\n+            return false;\n+        }\n+        return true;\n+    }\n+\n@@ -59,2 +135,3 @@\n-        RootPaneDefaultButtonTest window1 = new RootPaneDefaultButtonTest();\n-        RootPaneDefaultButtonTest window2 = new RootPaneDefaultButtonTest();\n+        RootPaneDefaultButtonTest test = new RootPaneDefaultButtonTest();\n+        test.run();\n+    }\n@@ -62,6 +139,2 @@\n-        SwingUtilities.invokeAndWait(new Runnable() {\n-            @Override\n-            public void run() {\n-                Rectangle r1 = new Rectangle(0, 20,\n-                        window1.getWidth(), window1.getHeight());\n-                window1.setBounds(r1);\n+    TestDialog window1, window2;\n+    Robot robot;\n@@ -69,3 +142,4 @@\n-                Rectangle r2 = new Rectangle((int) (r1.getMaxX() + 10), 20,\n-                        window2.getWidth(), window2.getHeight());\n-                window2.setBounds(r2);\n+    public RootPaneDefaultButtonTest() throws Exception {\n+        SwingUtilities.invokeAndWait(() -> {\n+            window1 = new TestDialog();\n+            window2 = new TestDialog();\n@@ -73,3 +147,10 @@\n-                window1.setVisible(true);\n-                window2.setVisible(true);\n-            }\n+            Rectangle r1 = new Rectangle(0, 20,\n+                    window1.getWidth(), window1.getHeight());\n+            window1.setBounds(r1);\n+\n+            Rectangle r2 = new Rectangle((int) (r1.getMaxX() + 10), 20,\n+                    window2.getWidth(), window2.getHeight());\n+            window2.setBounds(r2);\n+\n+            window1.setVisible(true);\n+            window2.setVisible(true);\n@@ -77,0 +158,2 @@\n+        robot = new Robot();\n+    }\n@@ -78,1 +161,6 @@\n-        Robot robot = new Robot();\n+\n+    \/**\n+     * This is not run on the EDT; once it finishes this test is complete.\n+     *\/\n+    private void run() throws Exception {\n+        robot.delay(1000);\n@@ -119,2 +207,2 @@\n-    private static void test(Robot robot, AbstractButton buttonToClick,\n-                             ButtonRenderingExpectation... expectations)\n+    private void test(Robot robot, AbstractButton buttonToClick,\n+                      ButtonRenderingExpectation... expectations)\n@@ -184,73 +272,0 @@\n-\n-    private static boolean isSimilar(Color c1, Color c2) {\n-        if (Math.abs(c1.getRed() - c2.getRed()) > 15) {\n-            return false;\n-        }\n-        if (Math.abs(c1.getGreen() - c2.getGreen()) > 15) {\n-            return false;\n-        }\n-        if (Math.abs(c1.getBlue() - c2.getBlue()) > 15) {\n-            return false;\n-        }\n-        return true;\n-    }\n-\n-    JRadioButton radioButton1 = new JRadioButton(\n-            \"\\\"Button 1\\\" is the default button\");\n-    JRadioButton radioButton2 = new JRadioButton(\n-            \"\\\"Button 2\\\" is the default button\");\n-    JRadioButton radioButton3 = new JRadioButton(\"No default button\");\n-\n-    JButton button1 = new JButton(\"Button 1\");\n-    JButton button2 = new JButton(\"Button 2\");\n-\n-    public RootPaneDefaultButtonTest() {\n-        getContentPane().setLayout(new BorderLayout());\n-        getContentPane().add(createRadioButtonPanel(), BorderLayout.NORTH);\n-        getContentPane().add(createPushButtonRow(), BorderLayout.SOUTH);\n-        pack();\n-\n-        radioButton1.addActionListener(new ActionListener() {\n-            @Override\n-            public void actionPerformed(ActionEvent e) {\n-                getRootPane().setDefaultButton(button1);\n-            }\n-        });\n-\n-        radioButton2.addActionListener(new ActionListener() {\n-            @Override\n-            public void actionPerformed(ActionEvent e) {\n-                getRootPane().setDefaultButton(button2);\n-            }\n-        });\n-\n-        radioButton3.addActionListener(new ActionListener() {\n-            @Override\n-            public void actionPerformed(ActionEvent e) {\n-                getRootPane().setDefaultButton(null);\n-            }\n-        });\n-\n-        ButtonGroup g = new ButtonGroup();\n-        g.add(radioButton1);\n-        g.add(radioButton2);\n-        g.add(radioButton3);\n-        radioButton1.doClick();\n-    }\n-\n-    private JPanel createPushButtonRow() {\n-        JPanel p = new JPanel(new GridLayout(1, 2));\n-        p.add(button1);\n-        p.add(button2);\n-        p.setBorder(new EmptyBorder(5,5,5,5));\n-        return p;\n-    }\n-\n-    private JPanel createRadioButtonPanel() {\n-        JPanel p = new JPanel(new GridLayout(3, 1));\n-        p.add(radioButton1);\n-        p.add(radioButton2);\n-        p.add(radioButton3);\n-        p.setBorder(new EmptyBorder(5,5,5,5));\n-        return p;\n-    }\n","filename":"test\/jdk\/com\/apple\/laf\/RootPane\/RootPaneDefaultButtonTest.java","additions":106,"deletions":91,"binary":false,"changes":197,"status":"modified"}]}