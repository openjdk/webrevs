{"files":[{"patch":"@@ -336,1 +336,1 @@\n-            Type ownertype = types.asEnclosingSuper(site, owner);\n+            Type ownertype = types.asOuterSuper(site, owner);\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/code\/Symbol.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2238,0 +2238,27 @@\n+    \/**\n+     * Return the base type of t or any of its outer types that starts\n+     * with the given symbol.  If none exists, return null.\n+     *\n+     * @param t a type\n+     * @param sym a symbol\n+     *\/\n+    public Type asOuterSuper(Type t, Symbol sym) {\n+        switch (t.getTag()) {\n+        case CLASS:\n+            do {\n+                Type s = asSuper(t, sym);\n+                if (s != null) return s;\n+                t = t.getEnclosingType();\n+            } while (t.hasTag(CLASS));\n+            return null;\n+        case ARRAY:\n+            return isSubtype(t, sym.type) ? sym.type : null;\n+        case TYPEVAR:\n+            return asSuper(t, sym);\n+        case ERROR:\n+            return t;\n+        default:\n+            return null;\n+        }\n+    }\n+\n@@ -2297,1 +2324,1 @@\n-                    Type base = asEnclosingSuper(t, owner);\n+                    Type base = asOuterSuper(t, owner);\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/code\/Types.java","additions":28,"deletions":1,"binary":false,"changes":29,"status":"modified"},{"patch":"@@ -4707,1 +4707,1 @@\n-                    Type s = types.asEnclosingSuper(site, v.owner);\n+                    Type s = types.asOuterSuper(site, v.owner);\n@@ -4905,1 +4905,1 @@\n-            Type s = types.asEnclosingSuper(site, sym.owner);\n+            Type s = types.asOuterSuper(site, sym.owner);\n@@ -5067,1 +5067,1 @@\n-                            site = types.asEnclosingSuper(site, clazzOuter.tsym);\n+                            site = types.asOuterSuper(site, clazzOuter.tsym);\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/comp\/Attr.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"}]}