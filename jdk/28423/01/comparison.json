{"files":[{"patch":"@@ -1231,1 +1231,1 @@\n-        applyIfCPUFeatureOr = {\"sse4.1\", \"true\", \"asimd\", \"true\"},\n+        applyIfCPUFeatureOr = {\"sse4.1\", \"true\"},\n@@ -1233,2 +1233,6 @@\n-    @IR(failOn = IRNode.LOAD_VECTOR_I,\n-        applyIf = {\"AutoVectorizationOverrideProfitability\", \"= 0\"})\n+    \/\/ AArch64 SVE has problems with LoadVector being <I:4>, not <I:8>, as test expects.\n+    @IR(counts = {IRNode.LOAD_VECTOR_I,    \"> 0\",\n+                  IRNode.MUL_REDUCTION_VI, \"> 0\",\n+                  IRNode.MUL_VI,           \"> 0\"},\n+        applyIfCPUFeatureOr = {\"asimd\", \"true\"},\n+        applyIfAnd = {\"AutoVectorizationOverrideProfitability\", \"> 0\", \"UseSVE\", \"0\"})\n@@ -1351,1 +1355,1 @@\n-        applyIfCPUFeatureOr = {\"sse4.1\", \"true\", \"asimd\", \"true\"},\n+        applyIfCPUFeatureOr = {\"sse4.1\", \"true\"},\n@@ -1353,2 +1357,6 @@\n-    @IR(failOn = IRNode.LOAD_VECTOR_I,\n-        applyIf = {\"AutoVectorizationOverrideProfitability\", \"= 0\"})\n+    \/\/ AArch64 SVE has problems with LoadVector being <I:4>, not <I:8>, as test expects.\n+    @IR(counts = {IRNode.LOAD_VECTOR_I,    \"> 0\",\n+                  IRNode.MUL_REDUCTION_VI, \"> 0\",\n+                  IRNode.MUL_VI,           \"> 0\"},\n+        applyIfCPUFeatureOr = {\"asimd\", \"true\"},\n+        applyIfAnd = {\"AutoVectorizationOverrideProfitability\", \"> 0\", \"UseSVE\", \"0\"})\n@@ -1471,1 +1479,1 @@\n-        applyIfCPUFeatureOr = {\"sse4.1\", \"true\", \"asimd\", \"true\"},\n+        applyIfCPUFeature = {\"sse4.1\", \"true\"},\n@@ -1473,2 +1481,6 @@\n-    @IR(failOn = IRNode.LOAD_VECTOR_I,\n-        applyIf = {\"AutoVectorizationOverrideProfitability\", \"= 0\"})\n+    \/\/ AArch64 SVE has problems with LoadVector being <I:4>, not <I:8>, as test expects.\n+    @IR(counts = {IRNode.LOAD_VECTOR_I,    \"> 0\",\n+                  IRNode.MUL_REDUCTION_VI, \"> 0\",\n+                  IRNode.MUL_VI,           \"> 0\"},\n+        applyIfCPUFeatureOr = {\"asimd\", \"true\"},\n+        applyIfAnd = {\"AutoVectorizationOverrideProfitability\", \"> 0\", \"UseSVE\", \"0\"})\n@@ -1600,9 +1612,1 @@\n-        applyIf = {\"AutoVectorizationOverrideProfitability\", \"> 0\"})\n-    \/\/ Note: NEON does not support MulVL for auto vectorization. There is\n-    \/\/       a scalarized implementation, but that is not profitable for\n-    \/\/       auto vectorization in almost all cases, and would not be\n-    \/\/       profitable here at any rate.\n-    \/\/       Hence, we have to keep the reduction inside the loop, and\n-    \/\/       cannot use the MulVL as the vector accumulator.\n-    @IR(failOn = IRNode.LOAD_VECTOR_L,\n-        applyIf = {\"AutoVectorizationOverrideProfitability\", \"= 0\"})\n+        applyIfAnd = {\"UseSVE\", \"0\", \"AutoVectorizationOverrideProfitability\", \"> 0\"})\n@@ -1666,5 +1670,2 @@\n-        applyIfCPUFeatureAnd = {\"asimd\", \"true\"})\n-    \/\/ While AndReductionV is implemented in NEON (see longAndSimple), MulVL is not.\n-    \/\/ Filed: JDK-8370686\n-    @IR(failOn = IRNode.LOAD_VECTOR_L,\n-        applyIf = {\"AutoVectorizationOverrideProfitability\", \"= 0\"})\n+        applyIfCPUFeatureAnd = {\"asimd\", \"true\"},\n+        applyIf = {\"UseSVE\", \"0\"})\n@@ -1687,5 +1688,2 @@\n-        applyIfCPUFeatureAnd = {\"asimd\", \"true\"})\n-    \/\/ While OrReductionV is implemented in NEON (see longOrSimple), MulVL is not.\n-    \/\/ Filed: JDK-8370686\n-    @IR(failOn = IRNode.LOAD_VECTOR_L,\n-        applyIf = {\"AutoVectorizationOverrideProfitability\", \"= 0\"})\n+        applyIfCPUFeatureAnd = {\"asimd\", \"true\"},\n+        applyIf = {\"UseSVE\", \"0\"})\n@@ -1708,5 +1706,2 @@\n-        applyIfCPUFeatureAnd = {\"asimd\", \"true\"})\n-    \/\/ While MaxReductionV is implemented in NEON (see longXorSimple), MulVL is not.\n-    \/\/ Filed: JDK-8370686\n-    @IR(failOn = IRNode.LOAD_VECTOR_L,\n-        applyIf = {\"AutoVectorizationOverrideProfitability\", \"= 0\"})\n+        applyIfCPUFeatureAnd = {\"asimd\", \"true\"},\n+        applyIf = {\"UseSVE\", \"0\"})\n@@ -1729,5 +1724,2 @@\n-        applyIfCPUFeatureAnd = {\"asimd\", \"true\"})\n-    \/\/ While MaxReductionV is implemented in NEON (see longAddSimple), MulVL is not.\n-    \/\/ Filed: JDK-8370686\n-    @IR(failOn = IRNode.LOAD_VECTOR_L,\n-        applyIf = {\"AutoVectorizationOverrideProfitability\", \"= 0\"})\n+        applyIfCPUFeatureAnd = {\"asimd\", \"true\"},\n+        applyIf = {\"UseSVE\", \"0\"})\n@@ -1751,5 +1743,0 @@\n-    \/\/ I think this could vectorize, but currently does not. Filed: JDK-8370673\n-    @IR(failOn = IRNode.LOAD_VECTOR_L,\n-        applyIfCPUFeatureAnd = {\"asimd\", \"true\"})\n-    \/\/ MulVL is not implemented on NEON, so we also not have the reduction.\n-    \/\/ Filed: JDK-8370686\n@@ -1757,1 +1744,2 @@\n-        applyIf = {\"AutoVectorizationOverrideProfitability\", \"= 0\"})\n+        applyIfCPUFeatureAnd = {\"asimd\", \"true\"},\n+        applyIf = {\"UseSVE\", \"0\"})\n@@ -1775,5 +1763,0 @@\n-    \/\/ I think this could vectorize, but currently does not. Filed: JDK-8370671\n-    @IR(failOn = IRNode.LOAD_VECTOR_L,\n-        applyIfCPUFeatureAnd = {\"asimd\", \"true\"})\n-    \/\/ While MaxReductionV is implemented in NEON (see longMinSimple), MulVL is not.\n-    \/\/ Filed: JDK-8370686\n@@ -1781,1 +1764,2 @@\n-        applyIf = {\"AutoVectorizationOverrideProfitability\", \"= 0\"})\n+        applyIfCPUFeatureAnd = {\"asimd\", \"true\"},\n+        applyIf = {\"UseSVE\", \"0\"})\n@@ -1799,5 +1783,0 @@\n-    \/\/ I think this could vectorize, but currently does not. Filed: JDK-8370671\n-    @IR(failOn = IRNode.LOAD_VECTOR_L,\n-        applyIfCPUFeatureAnd = {\"asimd\", \"true\"})\n-    \/\/ While MaxReductionV is implemented in NEON (see longMaxSimple), MulVL is not.\n-    \/\/ Filed: JDK-8370686\n@@ -1805,1 +1784,2 @@\n-        applyIf = {\"AutoVectorizationOverrideProfitability\", \"= 0\"})\n+        applyIfCPUFeatureAnd = {\"asimd\", \"true\"},\n+        applyIf = {\"UseSVE\", \"0\"})\n@@ -1823,5 +1803,2 @@\n-        applyIfCPUFeatureAnd = {\"asimd\", \"true\"})\n-    \/\/ While AndReductionV is implemented in NEON (see longAndSimple), MulVL is not.\n-    \/\/ Filed: JDK-8370686\n-    @IR(failOn = IRNode.LOAD_VECTOR_L,\n-        applyIf = {\"AutoVectorizationOverrideProfitability\", \"= 0\"})\n+        applyIfCPUFeatureAnd = {\"asimd\", \"true\"},\n+        applyIf = {\"UseSVE\", \"0\"})\n@@ -1844,5 +1821,2 @@\n-        applyIfCPUFeatureAnd = {\"asimd\", \"true\"})\n-    \/\/ While OrReductionV is implemented in NEON (see longOrSimple), MulVL is not.\n-    \/\/ Filed: JDK-8370686\n-    @IR(failOn = IRNode.LOAD_VECTOR_L,\n-        applyIf = {\"AutoVectorizationOverrideProfitability\", \"= 0\"})\n+        applyIfCPUFeatureAnd = {\"asimd\", \"true\"},\n+        applyIf = {\"UseSVE\", \"0\"})\n@@ -1865,5 +1839,2 @@\n-        applyIfCPUFeatureAnd = {\"asimd\", \"true\"})\n-    \/\/ While MaxReductionV is implemented in NEON (see longXorSimple), MulVL is not.\n-    \/\/ Filed: JDK-8370686\n-    @IR(failOn = IRNode.LOAD_VECTOR_L,\n-        applyIf = {\"AutoVectorizationOverrideProfitability\", \"= 0\"})\n+        applyIfCPUFeatureAnd = {\"asimd\", \"true\"},\n+        applyIf = {\"UseSVE\", \"0\"})\n@@ -1886,5 +1857,2 @@\n-        applyIfCPUFeatureAnd = {\"asimd\", \"true\"})\n-    \/\/ While MaxReductionV is implemented in NEON (see longAddSimple), MulVL is not.\n-    \/\/ Filed: JDK-8370686\n-    @IR(failOn = IRNode.LOAD_VECTOR_L,\n-        applyIf = {\"AutoVectorizationOverrideProfitability\", \"= 0\"})\n+        applyIfCPUFeatureAnd = {\"asimd\", \"true\"},\n+        applyIf = {\"UseSVE\", \"0\"})\n@@ -1915,5 +1883,2 @@\n-        applyIfCPUFeatureAnd = {\"asimd\", \"true\"})\n-    \/\/ MulVL is not implemented on NEON, so we also not have the reduction.\n-    \/\/ Filed: JDK-8370686\n-    @IR(failOn = IRNode.LOAD_VECTOR_L,\n-        applyIf = {\"AutoVectorizationOverrideProfitability\", \"= 0\"})\n+        applyIfCPUFeatureAnd = {\"asimd\", \"true\"},\n+        applyIf = {\"UseSVE\", \"0\"})\n@@ -1939,5 +1904,2 @@\n-        applyIfCPUFeatureAnd = {\"asimd\", \"true\"})\n-    \/\/ While MaxReductionV is implemented in NEON (see longMinSimple), MulVL is not.\n-    \/\/ Filed: JDK-8370686\n-    @IR(failOn = IRNode.LOAD_VECTOR_L,\n-        applyIf = {\"AutoVectorizationOverrideProfitability\", \"= 0\"})\n+        applyIfCPUFeatureAnd = {\"asimd\", \"true\"},\n+        applyIf = {\"UseSVE\", \"0\"})\n@@ -1963,5 +1925,2 @@\n-        applyIfCPUFeatureAnd = {\"asimd\", \"true\"})\n-    \/\/ While MaxReductionV is implemented in NEON (see longMaxSimple), MulVL is not.\n-    \/\/ Filed: JDK-8370686\n-    @IR(failOn = IRNode.LOAD_VECTOR_L,\n-        applyIf = {\"AutoVectorizationOverrideProfitability\", \"= 0\"})\n+        applyIfCPUFeatureAnd = {\"asimd\", \"true\"},\n+        applyIf = {\"UseSVE\", \"0\"})\n@@ -1985,5 +1944,2 @@\n-        applyIfCPUFeatureAnd = {\"asimd\", \"true\"})\n-    \/\/ I think this could vectorize, but currently does not. Filed: JDK-8370677\n-    \/\/ But: it is not clear that it would be profitable, given the sequential reduction.\n-    @IR(failOn = IRNode.LOAD_VECTOR_F,\n-        applyIf = {\"AutoVectorizationOverrideProfitability\", \"< 2\"})\n+        applyIfCPUFeatureAnd = {\"asimd\", \"true\"},\n+        applyIf = {\"UseSVE\", \"0\"})\n@@ -2009,5 +1965,2 @@\n-        applyIfCPUFeatureAnd = {\"asimd\", \"true\"})\n-    \/\/ I think this could vectorize, but currently does not. Filed: JDK-8370677\n-    \/\/ But: it is not clear that it would be profitable, given the sequential reduction.\n-    @IR(failOn = IRNode.LOAD_VECTOR_F,\n-        applyIf = {\"AutoVectorizationOverrideProfitability\", \"< 2\"})\n+        applyIfCPUFeatureAnd = {\"asimd\", \"true\"},\n+        applyIf = {\"UseSVE\", \"0\"})\n@@ -2068,5 +2021,2 @@\n-        applyIfCPUFeatureAnd = {\"asimd\", \"true\"})\n-    \/\/ I think this could vectorize, but currently does not. Filed: JDK-8370677\n-    \/\/ But: it is not clear that it would be profitable, given the sequential reduction.\n-    @IR(failOn = IRNode.LOAD_VECTOR_F,\n-        applyIf = {\"AutoVectorizationOverrideProfitability\", \"= 0\"})\n+        applyIfCPUFeatureAnd = {\"asimd\", \"true\"},\n+        applyIf = {\"UseSVE\", \"0\"})\n@@ -2089,5 +2039,2 @@\n-        applyIfCPUFeatureAnd = {\"asimd\", \"true\"})\n-    \/\/ I think this could vectorize, but currently does not. Filed: JDK-8370677\n-    \/\/ But: it is not clear that it would be profitable, given the sequential reduction.\n-    @IR(failOn = IRNode.LOAD_VECTOR_F,\n-        applyIf = {\"AutoVectorizationOverrideProfitability\", \"= 0\"})\n+        applyIfCPUFeatureAnd = {\"asimd\", \"true\"},\n+        applyIf = {\"UseSVE\", \"0\"})\n@@ -2145,5 +2092,2 @@\n-        applyIfCPUFeatureAnd = {\"asimd\", \"true\"})\n-    \/\/ I think this could vectorize, but currently does not. Filed: JDK-8370677\n-    \/\/ But: it is not clear that it would be profitable, given the sequential reduction.\n-    @IR(failOn = IRNode.LOAD_VECTOR_F,\n-        applyIf = {\"AutoVectorizationOverrideProfitability\", \"= 0\"})\n+        applyIfCPUFeatureAnd = {\"asimd\", \"true\"},\n+        applyIf = {\"UseSVE\", \"0\"})\n@@ -2166,5 +2110,2 @@\n-        applyIfCPUFeatureAnd = {\"asimd\", \"true\"})\n-    \/\/ I think this could vectorize, but currently does not. Filed: JDK-8370677\n-    \/\/ But: it is not clear that it would be profitable, given the sequential reduction.\n-    @IR(failOn = IRNode.LOAD_VECTOR_F,\n-        applyIf = {\"AutoVectorizationOverrideProfitability\", \"= 0\"})\n+        applyIfCPUFeatureAnd = {\"asimd\", \"true\"},\n+        applyIf = {\"UseSVE\", \"0\"})\n@@ -2222,5 +2163,2 @@\n-        applyIfCPUFeatureAnd = {\"asimd\", \"true\"})\n-    \/\/ I think this could vectorize, but currently does not. Filed: JDK-8370677\n-    \/\/ But: it is not clear that it would be profitable, given the sequential reduction.\n-    @IR(failOn = IRNode.LOAD_VECTOR_D,\n-        applyIf = {\"AutoVectorizationOverrideProfitability\", \"< 2\"})\n+        applyIfCPUFeatureAnd = {\"asimd\", \"true\"},\n+        applyIf = {\"UseSVE\", \"0\"})\n@@ -2246,5 +2184,2 @@\n-        applyIfCPUFeatureAnd = {\"asimd\", \"true\"})\n-    \/\/ I think this could vectorize, but currently does not. Filed: JDK-8370677\n-    \/\/ But: it is not clear that it would be profitable, given the sequential reduction.\n-    @IR(failOn = IRNode.LOAD_VECTOR_D,\n-        applyIf = {\"AutoVectorizationOverrideProfitability\", \"< 2\"})\n+        applyIfCPUFeatureAnd = {\"asimd\", \"true\"},\n+        applyIf = {\"UseSVE\", \"0\"})\n@@ -2305,5 +2240,2 @@\n-        applyIfCPUFeatureAnd = {\"asimd\", \"true\"})\n-    \/\/ I think this could vectorize, but currently does not. Filed: JDK-8370677\n-    \/\/ But: it is not clear that it would be profitable, given the sequential reduction.\n-    @IR(failOn = IRNode.LOAD_VECTOR_D,\n-        applyIf = {\"AutoVectorizationOverrideProfitability\", \"= 0\"})\n+        applyIfCPUFeatureAnd = {\"asimd\", \"true\"},\n+        applyIf = {\"UseSVE\", \"0\"})\n@@ -2326,5 +2258,2 @@\n-        applyIfCPUFeatureAnd = {\"asimd\", \"true\"})\n-    \/\/ I think this could vectorize, but currently does not. Filed: JDK-8370677\n-    \/\/ But: it is not clear that it would be profitable, given the sequential reduction.\n-    @IR(failOn = IRNode.LOAD_VECTOR_D,\n-        applyIf = {\"AutoVectorizationOverrideProfitability\", \"= 0\"})\n+        applyIfCPUFeatureAnd = {\"asimd\", \"true\"},\n+        applyIf = {\"UseSVE\", \"0\"})\n@@ -2382,5 +2311,2 @@\n-        applyIfCPUFeatureAnd = {\"asimd\", \"true\"})\n-    \/\/ I think this could vectorize, but currently does not. Filed: JDK-8370677\n-    \/\/ But: it is not clear that it would be profitable, given the sequential reduction.\n-    @IR(failOn = IRNode.LOAD_VECTOR_D,\n-        applyIf = {\"AutoVectorizationOverrideProfitability\", \"= 0\"})\n+        applyIfCPUFeatureAnd = {\"asimd\", \"true\"},\n+        applyIf = {\"UseSVE\", \"0\"})\n@@ -2403,1 +2329,2 @@\n-        applyIfCPUFeatureAnd = {\"asimd\", \"true\"})\n+        applyIfCPUFeatureAnd = {\"asimd\", \"true\"},\n+        applyIf = {\"UseSVE\", \"0\"})\n","filename":"test\/hotspot\/jtreg\/compiler\/loopopts\/superword\/TestReductions.java","additions":74,"deletions":147,"binary":false,"changes":221,"status":"modified"}]}