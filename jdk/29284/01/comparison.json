{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2020, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2020, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -206,0 +206,1 @@\n+    private static final String ALT_LOCATION_STRING = \"alternatively, falling back to\";\n@@ -223,2 +224,14 @@\n-        if (stringWithLocation.contains(\"or \") && !Platform.isWindows()) {\n-            Matcher m = Pattern.compile(\"or.* ([^ ]+[^\\\\)])\\\\)?\").matcher(stringWithLocation);\n+        if (Platform.isLinux() && stringWithLocation.contains(ALT_LOCATION_STRING)) {\n+            \/*\n+             * If hotspot detects that \/proc\/sys\/kernel\/core_pattern starts with a \"|\",\n+             * it generates a messages something like the following:\n+             * # Core dump will be written. Default location: Determined by the following:\n+             *   \"\/var\/bin\/core.sh %p\" (alternatively, falling back to\n+             *   \/ws\/jdk\/build\/linux-x64\/test-support\/jtreg_open_test_hotspot_jtreg_serviceability_sa_ClhsdbFindPC_java\/scratch\/2\/core.10353)\n+             * We try to detect this and glean this alternative path from the message. The\n+             * hope here is that either this is where the core file actually ends up, or that\n+             * the script referenced by the core_pattern is just zipping the core file, in\n+             * which case a call to unzipCores() will have already unzipped the core file\n+             * into this path.\n+             *\/\n+            Matcher m = Pattern.compile(ALT_LOCATION_STRING + \".* ([^ ]+[^\\\\)])\\\\)?\").matcher(stringWithLocation);\n@@ -229,0 +242,1 @@\n+            System.out.println(\"getCoreFileLocation found alt coreWithPid = \" + coreWithPid);\n","filename":"test\/lib\/jdk\/test\/lib\/util\/CoreUtils.java","additions":17,"deletions":3,"binary":false,"changes":20,"status":"modified"}]}