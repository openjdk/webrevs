{"files":[{"patch":"@@ -2363,1 +2363,1 @@\n-    \/\/ See if this phi should be sliced. Determine the merge width of input\n+    \/\/ See if this Phi should be sliced. Determine the merge width of input\n@@ -2393,1 +2393,1 @@\n-    bool saw_self = false;\n+    bool split_must_terminate = false; \/\/ Is splitting guaranteed to terminate?\n@@ -2405,1 +2405,3 @@\n-        saw_self = saw_self || (n->base_memory() == this);\n+        if (n->base_memory() == this) {\n+          split_must_terminate = true;\n+        }\n@@ -2425,1 +2427,1 @@\n-    \/\/ Here, we cannot break the circularity through saw_self = true as there\n+    \/\/ Here, we cannot break the circularity through a self-loop as there\n@@ -2428,1 +2430,0 @@\n-    bool terminates = true;\n@@ -2430,1 +2431,1 @@\n-    if (!saw_self && adr_type() == TypePtr::BOTTOM &&\n+    if (!split_must_terminate && adr_type() == TypePtr::BOTTOM &&\n@@ -2437,1 +2438,1 @@\n-      auto add_to_worklist = [&](Node* input) {\n+      auto maybe_add_to_worklist = [&](Node* input) {\n@@ -2446,1 +2447,2 @@\n-      while (terminates && worklist.size() > 0) {\n+      split_must_terminate = true; \/\/ Assume no circularity until proven otherwise.\n+      while (split_must_terminate && worklist.size() > 0) {\n@@ -2451,1 +2453,1 @@\n-            terminates = false;\n+            split_must_terminate = false;\n@@ -2454,1 +2456,1 @@\n-          add_to_worklist(input);\n+          maybe_add_to_worklist(input);\n@@ -2460,1 +2462,1 @@\n-              terminates = false;\n+              split_must_terminate = false;\n@@ -2463,1 +2465,1 @@\n-            add_to_worklist(input);\n+            maybe_add_to_worklist(input);\n@@ -2469,6 +2471,1 @@\n-    \/\/ Do not proceed in case of non-termination.\n-    if (!saw_self && !terminates) {\n-      merge_width = 0;\n-    }\n-\n-    if (merge_width > Compile::AliasIdxRaw) {\n+    if (split_must_terminate && merge_width > Compile::AliasIdxRaw) {\n","filename":"src\/hotspot\/share\/opto\/cfgnode.cpp","additions":15,"deletions":18,"binary":false,"changes":33,"status":"modified"}]}