[{"commit":{"message":"Split into two separate tasks"},"files":[],"sha":"cc5a6ecad4a0ee9d02b1e0647e61517fa090609f"},{"commit":{"message":"Merge branch 'master' into redo-jdk8364184"},"files":[],"sha":"868ad1697d70ea769200e28c0c8f5be08ab90670"},{"commit":{"message":"8364184: [REDO] AArch64: [VectorAPI] sve vector math operations are not supported after JDK-8353217\n\n`-ftrivial-auto-var-init=pattern` [1] supported by gcc-12 was added\nrecently to help detect uses of uninitialized memory. [2] Under\nthis extension mode, `__builtin_clear_padding` is called to clear\nthe padding bits in object representation. But the builtin function\ndoes not support variable length aggregates [3].\n\n`vfloat2_sve_sleef` is a typedef of `svfloat32x2_t`, which is\ndefined as an opaque sizeless type in ARM C Language Extensions\n(ACLE) [4]. When `__builtin_clear_padding` is applied to such a type,\nit triggers the unsupported code path and results in build failures\nwhen compiling libsleef on Linux-AArch64, as reported in JDK-8364185 [5].\n\nSwitching the initialization mode with gcc-12 from `pattern` to `zero`\navoids the use of this unsupported `__builtin_clear_padding` and\nresolves the issue.\n\nI did not encounter similar problems when building with Clang-16 [6].\n\nThis patch:\n1. Keeps the libsleef SVE support enabled\n2. Changes the initialization mode from `pattern` to `zero` when\n   compiling libsleef SVE component on Linux-AArch64 with gcc-12 to\n   fix the build failure and help avoid potential security issues\n   related to uninitialized padding\n\nTesting:\n1. Release and fastdebug build with gcc-12 and Clang-16\n2. `test\/jdk\/jdk\/incubator\/vector` passed on both 256-bit SVE and NEON\n   machines\n\n[1] https:\/\/gcc.gnu.org\/onlinedocs\/gcc-12.1.0\/gcc\/Optimize-Options.html#index-ftrivial-auto-var-init\n[2] https:\/\/github.com\/openjdk\/jdk\/commit\/fae37aaae8b36fd74309b84fa1fdf017c7d932ed\n[3] https:\/\/gcc.gnu.org\/pipermail\/gcc-patches\/2020-November\/559214.html\n[4] https:\/\/arm-software.github.io\/acle\/main\/acle.html#arm_sveh\n[5] https:\/\/bugs.openjdk.org\/browse\/JDK-8364185\n[6] https:\/\/releases.llvm.org\/16.0.0\/tools\/clang\/docs\/ReleaseNotes.html"},"files":[{"filename":"make\/autoconf\/flags-cflags.m4"}],"sha":"e4bb34c1b453dafcef8a853fdebef494cb895f09"}]