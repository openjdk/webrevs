{"files":[{"patch":"@@ -166,1 +166,2 @@\n-  EntryDataType _data[2];\n+  \/\/ VLA implementation.\n+  EntryDataType _data[1];\n@@ -187,0 +188,8 @@\n+\n+  EntryDataType const* base_addr() const;\n+\n+  EntryDataType const* entry_addr(EntryCountType index) const;\n+\n+  EntryDataType* entry_addr(EntryCountType index);\n+\n+  EntryDataType at(EntryCountType index) const;\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CardSetContainers.hpp","additions":10,"deletions":1,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -148,1 +148,1 @@\n-  _data[0] = checked_cast<EntryDataType>(card_in_region);\n+  *entry_addr(0) = checked_cast<EntryDataType>(card_in_region);\n@@ -170,0 +170,18 @@\n+inline G1CardSetArray::EntryDataType const* G1CardSetArray::base_addr() const {\n+  const void* ptr = reinterpret_cast<const char*>(this) + header_size_in_bytes();\n+  return reinterpret_cast<EntryDataType const*>(ptr);\n+}\n+\n+inline G1CardSetArray::EntryDataType const* G1CardSetArray::entry_addr(EntryCountType index) const {\n+  assert(index < _num_entries, \"precondition\");\n+  return base_addr() + index;\n+}\n+\n+inline G1CardSetArray::EntryDataType* G1CardSetArray::entry_addr(EntryCountType index) {\n+  return const_cast<EntryDataType*>(const_cast<const G1CardSetArray*>(this)->entry_addr(index));\n+}\n+\n+inline G1CardSetArray::EntryDataType G1CardSetArray::at(EntryCountType index) const {\n+  return *entry_addr(index);\n+}\n+\n@@ -171,1 +189,1 @@\n-  assert(card_idx < (1u << (sizeof(_data[0]) * BitsPerByte)),\n+  assert(card_idx < (1u << (sizeof(EntryDataType) * BitsPerByte)),\n@@ -176,1 +194,1 @@\n-    if (_data[idx] == card_idx) {\n+    if (at(idx) == card_idx) {\n@@ -189,1 +207,1 @@\n-    if (_data[idx] == card_idx) {\n+    if (at(idx) == card_idx) {\n@@ -199,1 +217,1 @@\n-  _data[num_entries] = checked_cast<EntryDataType>(card_idx);\n+  *entry_addr(num_entries) = checked_cast<EntryDataType>(card_idx);\n@@ -210,1 +228,1 @@\n-    if (_data[idx] == card_idx) {\n+    if (at(idx) == card_idx) {\n@@ -221,1 +239,1 @@\n-    found(_data[idx]);\n+    found(at(idx));\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CardSetContainers.inline.hpp","additions":25,"deletions":7,"binary":false,"changes":32,"status":"modified"}]}