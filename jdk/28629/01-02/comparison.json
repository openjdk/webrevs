{"files":[{"patch":"@@ -894,2 +894,5 @@\n-    \/\/ Upper bound for a single step shrink\n-    size_t max_shrink_bytes = SpaceAlignment;\n+    assert(old_gen()->capacity_in_bytes() >= old_gen()->min_gen_size(), \"inv\");\n+\n+    \/\/ Upper bound for a single step shrink; both min_gen_size constraint and per-step delta.\n+    const size_t max_shrink_bytes = MIN2(old_gen()->capacity_in_bytes() - old_gen()->min_gen_size(),\n+                                         SpaceAlignment);\n@@ -898,4 +901,2 @@\n-    assert(old_gen()->capacity_in_bytes() >= old_gen()->min_gen_size(), \"inv);\n-    const size_t max_shrink_bytes = old_gen()->capacity_in_bytes() - old_gen()->min_gen_size();\n-    \/\/ Subject to the min_gen_size contraint.\n-    shrink_bytes = MIN2(shrink_bytes, max_shrink_bytes);\n+    assert(old_gen()->capacity_in_bytes() >= shrink_bytes, \"inv\");\n+    assert(old_gen()->capacity_in_bytes() - shrink_bytes >= old_gen()->min_gen_size(), \"inv\");\n","filename":"src\/hotspot\/share\/gc\/parallel\/parallelScavengeHeap.cpp","additions":7,"deletions":6,"binary":false,"changes":13,"status":"modified"}]}