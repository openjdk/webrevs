{"files":[{"patch":"@@ -894,2 +894,5 @@\n-    \/\/ Upper bound for a single step shrink\n-    size_t max_shrink_bytes = SpaceAlignment;\n+    assert(old_gen()->capacity_in_bytes() >= old_gen()->min_gen_size(), \"inv\");\n+\n+    \/\/ Upper bound for a single step shrink; both min_gen_size constraint and per-step delta.\n+    const size_t max_shrink_bytes = MIN2(old_gen()->capacity_in_bytes() - old_gen()->min_gen_size(),\n+                                         SpaceAlignment);\n@@ -897,0 +900,4 @@\n+\n+    assert(old_gen()->capacity_in_bytes() >= shrink_bytes, \"inv\");\n+    assert(old_gen()->capacity_in_bytes() - shrink_bytes >= old_gen()->min_gen_size(), \"inv\");\n+\n","filename":"src\/hotspot\/share\/gc\/parallel\/parallelScavengeHeap.cpp","additions":9,"deletions":2,"binary":false,"changes":11,"status":"modified"}]}