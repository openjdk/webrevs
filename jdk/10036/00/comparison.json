{"files":[{"patch":"@@ -411,6 +411,5 @@\n-     * followed by modifier fields. These are ignored here. *\/\n-    temp_tz = strchr(tz, ',');\n-    tz_len = (temp_tz == NULL) ? strlen(tz) : temp_tz - tz;\n-    tz_buf = (char *)malloc(tz_len + 1);\n-    memcpy(tz_buf, tz, tz_len);\n-    tz_buf[tz_len] = 0;\n+     * followed by modifier fields until early AIX6.1.\n+     * This restriction has been removed from AIX7. *\/\n+\n+    tz_buf = strdup(tz);\n+    tz_len = strlen(tz_buf);\n@@ -585,0 +584,10 @@\n+#if defined(_AIX)\n+    \/\/ strftime() with \"%z\" does not return ISO 8601 format by AIX default.\n+    \/\/ XPG_SUS_ENV=ON environment variable is required.\n+    \/\/ But Hotspot does not support XPG_SUS_ENV=ON.\n+    \/\/ Ignore daylight saving settings to calculate current time difference\n+    localtm.tm_isdst = 0;\n+    int gmt_off = (int)(difftime(mktime(&localtm), mktime(&gmt)) \/ 60.0);\n+    sprintf(buf, (const char *)\"GMT%c%02.2d:%02.2d\",\n+            gmt_off < 0 ? '-' : '+' , abs(gmt_off \/ 60), gmt_off % 60);\n+#else\n@@ -591,0 +600,1 @@\n+#endif\n","filename":"src\/java.base\/unix\/native\/libjava\/TimeZone_md.c","additions":16,"deletions":6,"binary":false,"changes":22,"status":"modified"}]}