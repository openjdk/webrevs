{"files":[{"patch":"@@ -1224,1 +1224,1 @@\n-  int  quote_c        = 0;\n+  char quote_c        = 0;\n@@ -1227,2 +1227,8 @@\n-  int c = getc(stream);\n-  while(c != EOF && pos < (int)(sizeof(token)-1)) {\n+  int c_or_eof = getc(stream);\n+  while(c_or_eof != EOF && pos < (int)(sizeof(token)-1)) {\n+    \/\/ We have checked the c_or_eof for EOF. getc should only ever return the\n+    \/\/ EOF or an unsigned char converted to an int. We cast down to a char to\n+    \/\/ avoid the char to int promotions we would otherwise do in the comparisons\n+    \/\/ below (which would be incorrect if we ever compared to a non-ascii char),\n+    \/\/ and the int to char conversions we would otherwise do in the assignments.\n+    const char c = checked_cast<char>(checked_cast<unsigned char>(c_or_eof));\n@@ -1236,1 +1242,1 @@\n-          token[pos++] = checked_cast<char>(c);\n+          token[pos++] = c;\n@@ -1256,1 +1262,1 @@\n-        token[pos++] = checked_cast<char>(c);\n+        token[pos++] = c;\n@@ -1259,1 +1265,1 @@\n-    c = getc(stream);\n+    c_or_eof = getc(stream);\n","filename":"src\/hotspot\/share\/runtime\/arguments.cpp","additions":12,"deletions":6,"binary":false,"changes":18,"status":"modified"}]}