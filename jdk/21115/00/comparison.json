{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -38,2 +38,4 @@\n-NarrowPtrStruct CompressedOops::_narrow_oop = { nullptr, 0, true };\n-MemRegion       CompressedOops::_heap_address_range;\n+address CompressedOops::_base = nullptr;\n+int CompressedOops::_shift = 0;\n+bool CompressedOops::_use_implicit_null_checks = true;\n+MemRegion CompressedOops::_heap_address_range;\n@@ -91,1 +93,1 @@\n-  _narrow_oop._base    = base;\n+  _base = base;\n@@ -95,1 +97,1 @@\n-  _narrow_oop._shift   = shift;\n+  _shift = shift;\n@@ -100,1 +102,1 @@\n-  _narrow_oop._use_implicit_null_checks   = use;\n+  _use_implicit_null_checks = use;\n@@ -151,1 +153,1 @@\n-  return _narrow_oop._base != nullptr && is_disjoint_heap_base_address(_narrow_oop._base);\n+  return _base != nullptr && is_disjoint_heap_base_address(_base);\n@@ -158,1 +160,1 @@\n-  return _narrow_oop._base != nullptr && !is_disjoint_heap_base_address(_narrow_oop._base);\n+  return _base != nullptr && !is_disjoint_heap_base_address(_base);\n","filename":"src\/hotspot\/share\/oops\/compressedOops.cpp","additions":10,"deletions":8,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -37,1 +37,3 @@\n-struct NarrowPtrStruct {\n+class CompressedOops : public AllStatic {\n+  friend class VMStructs;\n+\n@@ -40,1 +42,1 @@\n-  address _base;\n+  static address _base;\n@@ -42,1 +44,1 @@\n-  \/\/ 0 if using wide ptrs or zero based unscaled narrow ptrs,\n+  \/\/ 0 if using wide oops or zero based unscaled narrow oops,\n@@ -44,10 +46,3 @@\n-  int     _shift;\n-  \/\/ Generate code with implicit null checks for narrow ptrs.\n-  bool    _use_implicit_null_checks;\n-};\n-\n-class CompressedOops : public AllStatic {\n-  friend class VMStructs;\n-\n-  \/\/ For UseCompressedOops.\n-  static NarrowPtrStruct _narrow_oop;\n+  static int _shift;\n+  \/\/ Generate code with implicit null checks for narrow oops.\n+  static bool _use_implicit_null_checks;\n@@ -89,2 +84,2 @@\n-  static address  base()                     { return _narrow_oop._base; }\n-  static address  base_addr()                { return (address)&_narrow_oop._base; }\n+  static address  base()                     { return _base; }\n+  static address  base_addr()                { return (address)&_base; }\n@@ -94,2 +89,2 @@\n-  static int      shift()                    { return _narrow_oop._shift; }\n-  static bool     use_implicit_null_checks() { return _narrow_oop._use_implicit_null_checks; }\n+  static int      shift()                    { return _shift; }\n+  static bool     use_implicit_null_checks() { return _use_implicit_null_checks; }\n","filename":"src\/hotspot\/share\/oops\/compressedOops.hpp","additions":12,"deletions":17,"binary":false,"changes":29,"status":"modified"},{"patch":"@@ -376,3 +376,3 @@\n-     static_field(CompressedOops,              _narrow_oop._base,                             address)                               \\\n-     static_field(CompressedOops,              _narrow_oop._shift,                            int)                                   \\\n-     static_field(CompressedOops,              _narrow_oop._use_implicit_null_checks,         bool)                                  \\\n+     static_field(CompressedOops,              _base,                                         address)                               \\\n+     static_field(CompressedOops,              _shift,                                        int)                                   \\\n+     static_field(CompressedOops,              _use_implicit_null_checks,                     bool)                                  \\\n","filename":"src\/hotspot\/share\/runtime\/vmStructs.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -67,2 +67,2 @@\n-    baseField = type.getAddressField(\"_narrow_oop._base\");\n-    shiftField = type.getCIntegerField(\"_narrow_oop._shift\");\n+    baseField = type.getAddressField(\"_base\");\n+    shiftField = type.getCIntegerField(\"_shift\");\n","filename":"src\/jdk.hotspot.agent\/share\/classes\/sun\/jvm\/hotspot\/oops\/CompressedOops.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"}]}