{"files":[{"patch":"@@ -136,8 +136,14 @@\n-    @Parameter({\"IMAGE\", \"GOOD_SIGNING_KEY_USER_NAME\"})\n-    @Parameter({\"MAC_DMG\", \"GOOD_SIGNING_KEY_USER_NAME\"})\n-    @Parameter({\"MAC_PKG\", \"GOOD_SIGNING_KEY_USER_NAME_PKG\", \"GOOD_SIGNING_KEY_USER_NAME\"})\n-\n-    @Parameter({\"IMAGE\", \"GOOD_CODESIGN_SIGN_IDENTITY\"})\n-    @Parameter({\"MAC_PKG\", \"GOOD_CODESIGN_SIGN_IDENTITY\", \"GOOD_PKG_SIGN_IDENTITY\"})\n-    @Parameter({\"MAC_PKG\", \"GOOD_PKG_SIGN_IDENTITY\"})\n-    public static void testMultipleCertificates(PackageType type, SignOption... options) {\n+    \/\/ Case \"--mac-signing-key-user-name\": jpackage selects first certificate\n+    \/\/ found with warning message. Certificate hash is pass to \"codesign\" in this\n+    \/\/ case.\n+    @Parameter({\"IMAGE\", \"0\", \"GOOD_SIGNING_KEY_USER_NAME\"})\n+    @Parameter({\"MAC_DMG\", \"0\", \"GOOD_SIGNING_KEY_USER_NAME\"})\n+    @Parameter({\"MAC_PKG\", \"0\", \"GOOD_SIGNING_KEY_USER_NAME_PKG\", \"GOOD_SIGNING_KEY_USER_NAME\"})\n+\n+    \/\/ Case \"--mac-app-image-sign-identity\": sign identity will be pass to\n+    \/\/ \"codesign\" and \"codesign\" should fail due to multiple certificates with\n+    \/\/ same common name found.\n+    @Parameter({\"IMAGE\", \"1\", \"GOOD_CODESIGN_SIGN_IDENTITY\"})\n+    @Parameter({\"MAC_PKG\", \"1\", \"GOOD_CODESIGN_SIGN_IDENTITY\", \"GOOD_PKG_SIGN_IDENTITY\"})\n+    @Parameter({\"MAC_PKG\", \"1\", \"GOOD_PKG_SIGN_IDENTITY\"})\n+    public static void testMultipleCertificates(PackageType type, int jpackageExitCode, SignOption... options) {\n@@ -157,1 +163,1 @@\n-            }).execute(1);\n+            }).execute(jpackageExitCode);\n","filename":"test\/jdk\/tools\/jpackage\/macosx\/MacSignTest.java","additions":15,"deletions":9,"binary":false,"changes":24,"status":"modified"}]}