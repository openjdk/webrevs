[{"commit":{"message":"8342782: Removing confusing javadoc\n\nThis is in response to this PR comment:\nhttps:\/\/github.com\/openjdk\/jdk\/pull\/21962#discussion_r1833401410"},"files":[{"filename":"src\/java.desktop\/share\/classes\/java\/awt\/AWTEventMulticaster.java"}],"sha":"179378d69e0ff6c34eb9f5dc83a2ccdc37cc6a3c"},{"commit":{"message":"8342782: adding curly brackets\n\nThis is in response to these PR comments:\nhttps:\/\/github.com\/openjdk\/jdk\/pull\/21962#discussion_r1833399928\nhttps:\/\/github.com\/openjdk\/jdk\/pull\/21962#discussion_r1833413838"},"files":[{"filename":"src\/java.desktop\/share\/classes\/java\/awt\/AWTEventMulticaster.java"}],"sha":"5eb9a6238a32a4a4f3e475a8b9ba2700c7f7c834"},{"commit":{"message":"8342782: removing new comment in javadoc\n\nThis is in response to this PR comment:\nhttps:\/\/github.com\/openjdk\/jdk\/pull\/21962#pullrequestreview-2422181991"},"files":[{"filename":"src\/java.desktop\/share\/classes\/java\/awt\/AWTEventMulticaster.java"}],"sha":"23248111d777fdcf6f74123b7aebf98b7ad20dec"},{"commit":{"message":"8342782: code cleanup for PR\n\nThe previous implementation could, technically, traverse 1,000+ nodes, only to eventually return true if level > 500. So now we return true as soon as we detect this condition.\n\n(This is probably only a theoretical gripe, though. Because in reality *when we first hit 500* we'd have already rebalanced, so it'd be very hard to make an unbalanced tree with 1,000 elements...)"},"files":[{"filename":"src\/java.desktop\/share\/classes\/java\/awt\/AWTEventMulticaster.java"}],"sha":"d3c7d7859973bb1422949a2c9ba9b05e9097530a"},{"commit":{"message":"8342782: code cleanup for PR"},"files":[{"filename":"src\/java.desktop\/share\/classes\/java\/awt\/AWTEventMulticaster.java"}],"sha":"b17cac0d1a085ec298f04a14dbcc07d67578c011"},{"commit":{"message":"8342782: code cleanup for PR"},"files":[{"filename":"src\/java.desktop\/share\/classes\/java\/awt\/AWTEventMulticaster.java"}],"sha":"d1d064b9fa24df796da97c5def701806e174532c"},{"commit":{"message":"8342782: Adding test for 8342782.\n\nPrior to this PR this fails:\n```\n----------System.out:(1\/18)----------\nmaximum a = 32768\n----------System.err:(1030\/94412)----------\njava.lang.StackOverflowError\n\tat java.desktop\/java.awt.AWTEventMulticaster.actionPerformed(AWTEventMulticaster.java:451)\n\tat java.desktop\/java.awt.AWTEventMulticaster.actionPerformed(AWTEventMulticaster.java:451)\n\tat java.desktop\/java.awt.AWTEventMulticaster.actionPerformed(AWTEventMulticaster.java:451)\n\tat java.desktop\/java.awt.AWTEventMulticaster.actionPerformed(AWTEventMulticaster.java:451)\n\tat java.desktop\/java.awt.AWTEventMulticaster.actionPerformed(AWTEventMulticaster.java:451)\n\tat java.desktop\/java.awt.AWTEventMulticaster.actionPerformed(AWTEventMulticaster.java:451)\n\t...\n```\n\nAfter this PR this test passes and logs:\n```\nmaximum a = 131072\n```"},"files":[{"filename":"test\/jdk\/java\/awt\/event\/StressTest\/LargeAWTEventMulticasterTest.java"}],"sha":"3fe23d0eb44c177d87fa2c8c25a3b9cc0aa584ec"},{"commit":{"message":"8342782: sometimes let addInternal call new rebalance method"},"files":[{"filename":"src\/java.desktop\/share\/classes\/java\/awt\/AWTEventMulticaster.java"}],"sha":"31937fcd7ce5359ec1786145d16864b772930c3d"},{"commit":{"message":"8342782: reverting previous 3 commits\n\nThe previous commit noted some performance problems; I'll try a new approach shortly."},"files":[{"filename":"src\/java.desktop\/share\/classes\/java\/awt\/AWTEventMulticaster.java"}],"sha":"6a1ea21b0550b041361b3564dd83a0239b86ffa3"},{"commit":{"message":"8342782: make listener notifications avoid recursion\n\nThis successfully avoids recursion \/ large stacks, but it negatively impacts performance.\n\nHere is a table showing the relative time it takes to execute one of these methods as the size of the AWTEventMulticaster increases in size:\n1     ->  99.5505618%\n2     ->  172.972973%\n4     ->  289.6749522%\n8     ->  205.6451613%\n16    ->  191.4498141%\n32    ->  132.5908558%\n64    ->  147.2392638%\n128   ->  117.5475687%\n256   ->  118.8359788%\n512   ->  102.5245442%\n1024  ->  103.8095238%\n2048  ->  93.36898396%\n4096  ->  95.54210237%\n8192  ->  96.96969697%\n16384  -> \t96.28610729%\n32768  ->  87.19242902%\n\nAt 65536+ we see where this change really shines:\nThe previous code throws a StackOverflowError, and this code doesn't.\n\nHowever: 65536 nodes is (I assume) an extreme edge case. Slowing down event notifications by 300% for smaller trees is a significant risk that I'm not ready to propose to the OpenJDK project."},"files":[{"filename":"src\/java.desktop\/share\/classes\/java\/awt\/AWTEventMulticaster.java"}],"sha":"83085f467d977ae8fbacd3e4742ff50e980edda5"},{"commit":{"message":"8342782: make getListenerCount & populateListenerArray use less recursion\n\nSimilar to the previous commit:\nThese methods now *may* function without recursion, if the tree structure lets us traverse through it one node at a time."},"files":[{"filename":"src\/java.desktop\/share\/classes\/java\/awt\/AWTEventMulticaster.java"}],"sha":"4d493662773d972b26c5097c3b8272cfb9581644"},{"commit":{"message":"8342782: add removeWithoutRecursion\n\nThis resolves the original demo case in the ticket, but larger architectural danger still exists: traversing an unbalanced tree can still throw a StackOverflowError if the size of the tree is directly proportional to the size of the stack."},"files":[{"filename":"src\/java.desktop\/share\/classes\/java\/awt\/AWTEventMulticaster.java"}],"sha":"f61a3f0389488125aca7060c0aaaa6e5c52450c4"},{"commit":{"message":"Merge pull request #5 from openjdk\/master\n\nupdating to openjdk\/jdk"},"files":[],"sha":"81085d416d9ce4ef360ac0bb270a393ee9392d89"},{"commit":{"message":"Merge pull request #4 from openjdk\/master\n\nUpdating mickleness\/jdk from openjdk\/jdk"},"files":[],"sha":"69481fc38f4021224ec4a8d1a75b275a89dfa832"},{"commit":{"message":"Merge pull request #3 from openjdk\/master\n\nMerge from openjdk\/jdk"},"files":[],"sha":"57346a421446d51192ceada277626ba1ae92d8d7"},{"commit":{"message":"Merge pull request #2 from openjdk\/master\n\nMerge openjdk\/jdk"},"files":[],"sha":"333c87c2107262532815db6978c5e8f59c5a967e"},{"commit":{"message":"Merge pull request #1 from openjdk\/master\n\nMerge openjdk\/jdk into mickleness\/jdk"},"files":[],"sha":"5dbf0a67ad41a53e03f02c41b1b6364fc3a633ee"}]