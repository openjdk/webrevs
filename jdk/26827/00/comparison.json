{"files":[{"patch":"@@ -2575,2 +2575,2 @@\n-  \/\/ Vector nodes should not truncate.\n-  if (type->isa_vect() != nullptr || type->isa_vectmask() != nullptr || in->is_Reduction()) {\n+  \/\/ Vector nodes and casts should not truncate.\n+  if (type->isa_vect() != nullptr || type->isa_vectmask() != nullptr || in->is_Reduction() || in->is_ConstraintCast()) {\n","filename":"src\/hotspot\/share\/opto\/superword.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -431,0 +431,26 @@\n+    @Test(compLevel = CompLevel.C2)\n+    @IR(counts = { IRNode.CAST_II, \">0\" })\n+    @Warmup(0)\n+    public Object[] testCastII() {\n+        byte[] bytes = new byte[400];\n+        intField = 6;\n+        int i = 0;\n+        int j = 1;\n+\n+        do {\n+            bytes[j] = (byte) i;\n+            int k = 1;\n+\n+            do {\n+                i <<= intField;\n+                i += (k ^ i);\n+                i -= j;\n+\n+                for (int u = 1; 1 > u; u++) {\n+                }\n+            } while (++k < 8);\n+        } while (++j < 191);\n+\n+        return new Object[] { bytes };\n+    }\n+\n","filename":"test\/hotspot\/jtreg\/compiler\/vectorization\/TestSubwordTruncation.java","additions":26,"deletions":0,"binary":false,"changes":26,"status":"modified"}]}