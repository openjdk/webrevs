{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -49,1 +49,0 @@\n-import java.util.concurrent.atomic.AtomicReference;\n@@ -51,1 +50,9 @@\n-import javax.swing.*;\n+import javax.swing.BorderFactory;\n+import javax.swing.CellRendererPane;\n+import javax.swing.JEditorPane;\n+import javax.swing.JPasswordField;\n+import javax.swing.JTextArea;\n+import javax.swing.JTextField;\n+import javax.swing.JTextPane;\n+import javax.swing.JViewport;\n+import javax.swing.SwingUtilities;\n@@ -106,2 +113,1 @@\n-    private final AtomicReference<FontRenderContext> frc =\n-        new AtomicReference<FontRenderContext>(null);\n+    private volatile FontRenderContext frc;\n@@ -328,0 +334,1 @@\n+\n@@ -343,1 +350,2 @@\n-                        return (frc.get() == null)\n+                        FontRenderContext frc = TextComponentPrintable.this.frc;\n+                        return (frc == null)\n@@ -345,1 +353,1 @@\n-                            : FontDesignMetrics.getMetrics(font, frc.get());\n+                            : FontDesignMetrics.getMetrics(font, frc);\n@@ -357,1 +365,2 @@\n-                        return (frc.get() == null)\n+                        FontRenderContext frc = TextComponentPrintable.this.frc;\n+                        return (frc == null)\n@@ -359,1 +368,1 @@\n-                            : FontDesignMetrics.getMetrics(font, frc.get());\n+                            : FontDesignMetrics.getMetrics(font, frc);\n@@ -373,1 +382,2 @@\n-                        return (frc.get() == null)\n+                        FontRenderContext frc = TextComponentPrintable.this.frc;\n+                        return (frc == null)\n@@ -375,1 +385,1 @@\n-                            : FontDesignMetrics.getMetrics(font, frc.get());\n+                            : FontDesignMetrics.getMetrics(font, frc);\n@@ -383,1 +393,2 @@\n-                        return (frc.get() == null)\n+                        FontRenderContext frc = TextComponentPrintable.this.frc;\n+                        return (frc == null)\n@@ -385,1 +396,1 @@\n-                            : FontDesignMetrics.getMetrics(font, frc.get());\n+                            : FontDesignMetrics.getMetrics(font, frc);\n@@ -401,1 +412,2 @@\n-                        return (frc.get() == null)\n+                        FontRenderContext frc = TextComponentPrintable.this.frc;\n+                        return (frc == null)\n@@ -403,1 +415,1 @@\n-                            : FontDesignMetrics.getMetrics(font, frc.get());\n+                            : FontDesignMetrics.getMetrics(font, frc);\n@@ -469,1 +481,1 @@\n-                frc.set(((Graphics2D)graphics).getFontRenderContext());\n+                frc = ((Graphics2D)graphics).getFontRenderContext();\n","filename":"src\/java.desktop\/share\/classes\/sun\/swing\/text\/TextComponentPrintable.java","additions":28,"deletions":16,"binary":false,"changes":44,"status":"modified"}]}