{"files":[{"patch":"@@ -24,2 +24,0 @@\n-import java.awt.BorderLayout;\n-import java.awt.Container;\n@@ -28,1 +26,3 @@\n-import javax.swing.JFrame;\n+import javax.swing.JComponent;\n+import javax.swing.JLabel;\n+import javax.swing.JPanel;\n@@ -35,1 +35,1 @@\n- * @requires (os.name == \"linux\")\n+ *  @requires (os.name == \"linux\")\n@@ -50,3 +50,4 @@\n-            This command lets you type 'a with acute (à)' character when\n-            you press 'Tab' key. After the test, please DO NOT fail to\n-            restore the original key mapping by doing the following.\n+            This command lets you type 'a with acute (à)' character when you press\n+            'Tab' key in the JTextField provided below the logging area.\n+            After the test, please DO NOT fail to restore the original\n+            key mapping by doing the following.\n@@ -73,2 +74,4 @@\n-                .columns(40)\n-                .testUI(() -> new TestFrame(\"Test Accented Chars\"))\n+                .columns(45)\n+                .testTimeOut(10)\n+                .splitUIBottom(bug4490692::createUI)\n+                .logArea(8)\n@@ -78,1 +81,0 @@\n-}\n@@ -80,2 +82,4 @@\n-class TestFrame extends JFrame implements KeyListener {\n-    JTextField text;\n+    private static JComponent createUI() {\n+        JPanel panel = new JPanel();\n+        JTextField textField = new JTextField(\"\", 20);\n+        panel.add(new JLabel(\"Text field:\"));\n@@ -83,9 +87,15 @@\n-    TestFrame(String title) {\n-        super(title);\n-        text = new JTextField();\n-        text.addKeyListener(this);\n-        Container c = getContentPane();\n-        c.setLayout(new BorderLayout());\n-        c.add(text, BorderLayout.CENTER);\n-        setSize(300, 200);\n-    }\n+        textField.addKeyListener(new KeyListener() {\n+            @Override\n+            public void keyPressed(KeyEvent e) {\n+                PassFailJFrame.log(e.paramString());\n+                if (e.getKeyCode() == 23 || e.getKeyCode() == 60\n+                        || e.paramString().contains(\"rawCode=23\")\n+                        || e.paramString().contains(\"rawCode=60\")) {\n+                    if (e.getKeyChar() == 0x00e1) {\n+                        PassFailJFrame.forcePass();\n+                    } else {\n+                        PassFailJFrame.forceFail(\"Tab keypress DID NOT\"\n+                                + \" produce the expected accented character - aacute\");\n+                    }\n+                }\n+            }\n@@ -93,8 +103,2 @@\n-    @Override\n-    public void keyPressed(KeyEvent e) {\n-        if (e.getKeyCode() == 23 || e.getKeyCode() == 60) {\n-            if (e.getKeyChar() == 0x00e1) {\n-                PassFailJFrame.forcePass();\n-            } else {\n-                PassFailJFrame.forceFail(\"Tab keypress DID NOT\"\n-                        + \" produce the expected accented character - aacute\");\n+            @Override\n+            public void keyTyped(KeyEvent e) {\n@@ -102,2 +106,0 @@\n-        }\n-    }\n@@ -105,3 +107,4 @@\n-    @Override\n-    public void keyTyped(KeyEvent e) {\n-    }\n+            @Override\n+            public void keyReleased(KeyEvent e) {\n+            }\n+        });\n@@ -109,2 +112,2 @@\n-    @Override\n-    public void keyReleased(KeyEvent e) {\n+        panel.add(textField);\n+        return panel;\n","filename":"test\/jdk\/java\/awt\/im\/bug4490692.java","additions":39,"deletions":36,"binary":false,"changes":75,"status":"modified"}]}