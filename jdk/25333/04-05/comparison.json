{"files":[{"patch":"@@ -158,1 +158,1 @@\n-        Event.WriteFinished e = new Event.WriteFinished(t);\n+        Event e = new Event.WriteFinished(t);\n","filename":"src\/jdk.httpserver\/share\/classes\/sun\/net\/httpserver\/ChunkedOutputStream.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n-class Event {\n+import java.util.Objects;\n@@ -30,1 +30,1 @@\n-    ExchangeImpl exchange;\n+abstract sealed class Event {\n@@ -32,1 +32,3 @@\n-    protected Event (ExchangeImpl t) {\n+    final ExchangeImpl exchange;\n+\n+    protected Event(ExchangeImpl t) {\n@@ -41,1 +43,1 @@\n-    public static class StopRequested extends Event {\n+    static final class StopRequested extends Event {\n@@ -48,1 +50,1 @@\n-     * Event indicating that writing is finished.\n+     * Event indicating that writing is finished for a given exchange.\n@@ -50,1 +52,1 @@\n-    public static class WriteFinished extends Event {\n+    static final class WriteFinished extends Event {\n@@ -52,1 +54,1 @@\n-            super (t);\n+            super(Objects.requireNonNull(t));\n","filename":"src\/jdk.httpserver\/share\/classes\/sun\/net\/httpserver\/Event.java","additions":9,"deletions":7,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -97,1 +97,1 @@\n-        Event.WriteFinished e = new Event.WriteFinished(t);\n+        Event e = new Event.WriteFinished(t);\n","filename":"src\/jdk.httpserver\/share\/classes\/sun\/net\/httpserver\/FixedLengthOutputStream.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -184,1 +184,1 @@\n-        if (!bound || started || isFinishing()) {\n+        if (!bound || started || finished()) {\n@@ -227,1 +227,2 @@\n-    public final boolean isFinishing() {\n+    private final boolean finished(){\n+        \/\/ if the latch is 0, the server is finished\n@@ -231,0 +232,4 @@\n+    public final boolean isFinishing() {\n+        return finished();\n+    }\n+\n@@ -489,2 +494,2 @@\n-            \/\/ isFinishing() will be true when there are no active exchange after terminating\n-             while (!isFinishing()) {\n+            \/\/ finished() will be true when there are no active exchange after terminating\n+             while (!finished()) {\n","filename":"src\/jdk.httpserver\/share\/classes\/sun\/net\/httpserver\/ServerImpl.java","additions":9,"deletions":4,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -78,1 +78,1 @@\n-        Event.WriteFinished e = new Event.WriteFinished(t);\n+        Event e = new Event.WriteFinished(t);\n","filename":"src\/jdk.httpserver\/share\/classes\/sun\/net\/httpserver\/UndefLengthOutputStream.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -35,1 +35,0 @@\n-import java.net.URI;\n","filename":"test\/jdk\/com\/sun\/net\/httpserver\/ServerStopTerminationTest.java","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"}]}