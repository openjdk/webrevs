{"files":[{"patch":"@@ -1636,0 +1636,8 @@\n+  address generate_unsafecopy_common_error_exit() {\n+    address start = __ pc();\n+    __ mv(x10, 0);\n+    __ leave();\n+    __ ret();\n+    return start;\n+  }\n+\n@@ -1653,1 +1661,1 @@\n-    inc_counter_np(SharedRuntime::_unsafe_set_memory_ctr);\n+    \/\/ inc_counter_np(SharedRuntime::_unsafe_set_memory_ctr);\n@@ -1655,1 +1663,1 @@\n-    Label L_exit, L_fill_elements;\n+    Label L_exit, L_fill_elements, L_loop;\n@@ -1660,2 +1668,2 @@\n-    const Register cnt_words = x29; \/\/ temp register\n-    const Register tmp_reg   = t1; \/\/ temp register\n+    const Register cnt_words = x28; \/\/ temp register\n+    const Register tmp_reg   = x29; \/\/ temp register\n@@ -1666,0 +1674,2 @@\n+    __ enter(); \/\/ required for proper stackwalking of RuntimeStub frame\n+\n@@ -1670,1 +1680,1 @@\n-    \/\/ Zero extend value\n+    \/\/ Propagate byte to 64-bit width\n@@ -1676,1 +1686,0 @@\n-    __ zext(value, value, 16);\n@@ -1680,1 +1689,0 @@\n-    __ zext(value, value, 32);\n@@ -1691,1 +1699,1 @@\n-    __ subiw(count, count, 1);\n+    __ subi(count, count, 1);\n@@ -1698,1 +1706,1 @@\n-    __ subiw(count, count, 2);\n+    __ subi(count, count, 2);\n@@ -1705,1 +1713,1 @@\n-    __ subiw(count, count, 4);\n+    __ subi(count, count, 4);\n@@ -1709,1 +1717,1 @@\n-    __ srliw(cnt_words, count, 3); \/\/ number of words\n+    __ srli(cnt_words, count, 3); \/\/ number of words\n@@ -1711,1 +1719,1 @@\n-    __ subw(count, count, tmp_reg);\n+    __ sub(count, count, tmp_reg);\n@@ -1734,2 +1742,0 @@\n-    Label L_loop1;\n-\n@@ -1739,1 +1745,1 @@\n-    __ bind(L_loop1);\n+    __ bind(L_loop);\n@@ -1742,2 +1748,2 @@\n-    __ subiw(count, count, 1);\n-    __ bnez(count, L_loop1);\n+    __ subi(count, count, 1);\n+    __ bnez(count, L_loop);\n@@ -1746,0 +1752,1 @@\n+    __ leave();\n@@ -2320,0 +2327,3 @@\n+    address ucm_common_error_exit     = generate_unsafecopy_common_error_exit();\n+    UnsafeMemoryAccess::set_common_exit_stub_pc(ucm_common_error_exit);\n+\n","filename":"src\/hotspot\/cpu\/riscv\/stubGenerator_riscv.cpp","additions":27,"deletions":17,"binary":false,"changes":44,"status":"modified"}]}