{"files":[{"patch":"@@ -1663,1 +1663,1 @@\n-    Label L_exit, L_fill_elements, L_loop;\n+    Label L_exit1, L_exit2, L_fill_elements, L_loop;\n@@ -1725,16 +1725,20 @@\n-    Label L_fill_2, L_fill_1;\n-    __ test_bit(t0, count, 2);\n-    __ beqz(t0, L_fill_2);\n-    __ sw(value, Address(dest, 0));\n-    __ addi(dest, dest, 4);\n-    __ bind(L_fill_2);\n-    __ test_bit(t0, count, 1);\n-    __ beqz(t0, L_fill_1);\n-    __ sh(value, Address(dest, 0));\n-    __ addi(dest, dest, 2);\n-    __ bind(L_fill_1);\n-    __ test_bit(t0, count, 0);\n-    __ beqz(t0, L_exit);\n-    __ sb(value, Address(dest, 0));\n-    __ leave();\n-    __ ret();\n+    {\n+      Label L_fill_2, L_fill_1;\n+      __ test_bit(t0, count, 2);\n+      __ beqz(t0, L_fill_2);\n+      __ sw(value, Address(dest, 0));\n+      __ addi(dest, dest, 4);\n+      __ bind(L_fill_2);\n+      __ test_bit(t0, count, 1);\n+      __ beqz(t0, L_fill_1);\n+      __ sh(value, Address(dest, 0));\n+      __ addi(dest, dest, 2);\n+      __ bind(L_fill_1);\n+      __ test_bit(t0, count, 0);\n+      __ beqz(t0, L_exit1);\n+      __ sb(value, Address(dest, 0));\n+\n+      __ bind(L_exit1);\n+      __ leave();\n+      __ ret();\n+    }\n@@ -1744,11 +1748,27 @@\n-    __ beqz(count, L_exit);\n-\n-    __ bind(L_loop);\n-    __ sb(value, Address(dest, 0));\n-    __ addi(dest, dest, 1);\n-    __ subi(count, count, 1);\n-    __ bnez(count, L_loop);\n-\n-    __ bind(L_exit);\n-    __ leave();\n-    __ ret();\n+    {\n+      Label L_fill_2, L_fill_1;\n+      __ test_bit(t0, count, 2);\n+      __ beqz(t0, L_fill_2);\n+      __ sb(value, Address(dest, 0));\n+      __ sb(value, Address(dest, 1));\n+      __ sb(value, Address(dest, 2));\n+      __ sb(value, Address(dest, 3));\n+      __ addi(dest, dest, 4);\n+\n+      __ bind(L_fill_2);\n+      __ test_bit(t0, count, 1);\n+      __ beqz(t0, L_fill_1);\n+      __ sb(value, Address(dest, 0));\n+      __ sb(value, Address(dest, 1));\n+      __ addi(dest, dest, 2);\n+\n+      __ bind(L_fill_1);\n+      __ test_bit(t0, count, 0);\n+      __ beqz(t0, L_exit2);\n+      __ sb(value, Address(dest, 0));\n+      __ addi(dest, dest, 1);\n+\n+      __ bind(L_exit2);\n+      __ leave();\n+      __ ret();\n+    }\n","filename":"src\/hotspot\/cpu\/riscv\/stubGenerator_riscv.cpp","additions":48,"deletions":28,"binary":false,"changes":76,"status":"modified"}]}