{"files":[{"patch":"@@ -33,0 +33,2 @@\n+import jtreg.SkippedException;\n+\n@@ -57,4 +59,2 @@\n-        if (\"cgroupv1\".equals(metrics.getProvider())) {\n-\n-            Common.prepareWhiteBox();\n-            DockerTestUtils.buildJdkContainerImage(imageName);\n+        Common.prepareWhiteBox();\n+        DockerTestUtils.buildJdkContainerImage(imageName);\n@@ -62,0 +62,1 @@\n+        if (\"cgroupv1\".equals(metrics.getProvider())) {\n@@ -63,4 +64,4 @@\n-                testMemoryLimitSubgroupV1(\"100m\", \"104857600\", false);\n-                testMemoryLimitSubgroupV1(\"500m\", \"524288000\", false);\n-                testMemoryLimitSubgroupV1(\"100m\", \"104857600\", true);\n-                testMemoryLimitSubgroupV1(\"500m\", \"524288000\", true);\n+                testMemoryLimitSubgroupV1(\"200m\", \"100m\", \"104857600\", false);\n+                testMemoryLimitSubgroupV1(\"1g\", \"500m\", \"524288000\", false);\n+                testMemoryLimitSubgroupV1(\"200m\", \"100m\", \"104857600\", true);\n+                testMemoryLimitSubgroupV1(\"1g\", \"500m\", \"524288000\", true);\n@@ -71,4 +72,0 @@\n-\n-            Common.prepareWhiteBox();\n-            DockerTestUtils.buildJdkContainerImage(imageName);\n-\n@@ -76,4 +73,4 @@\n-                testMemoryLimitSubgroupV2(\"100m\", \"104857600\", false);\n-                testMemoryLimitSubgroupV2(\"500m\", \"524288000\", false);\n-                testMemoryLimitSubgroupV2(\"100m\", \"104857600\", true);\n-                testMemoryLimitSubgroupV2(\"500m\", \"524288000\", true);\n+                testMemoryLimitSubgroupV2(\"200m\", \"100m\", \"104857600\", false);\n+                testMemoryLimitSubgroupV2(\"1g\", \"500m\", \"524288000\", false);\n+                testMemoryLimitSubgroupV2(\"200m\", \"100m\", \"104857600\", true);\n+                testMemoryLimitSubgroupV2(\"1g\", \"500m\", \"524288000\", true);\n@@ -84,1 +81,1 @@\n-            System.out.println(\"Metrics are from neither cgroup v1 nor v2, skipped for now.\");\n+            throw new SkippedException(\"Metrics are from neither cgroup v1 nor v2, skipped for now.\");\n@@ -88,1 +85,1 @@\n-    private static void testMemoryLimitSubgroupV1(String valueToSet, String expectedValue, boolean privateNamespace)\n+    private static void testMemoryLimitSubgroupV1(String containerMemorySize, String valueToSet, String expectedValue, boolean privateNamespace)\n@@ -98,1 +95,1 @@\n-            .addDockerOpts(\"--memory\", \"1g\");\n+            .addDockerOpts(\"--memory\", containerMemorySize);\n@@ -108,1 +105,1 @@\n-    private static void testMemoryLimitSubgroupV2(String valueToSet, String expectedValue, boolean privateNamespace)\n+    private static void testMemoryLimitSubgroupV2(String containerMemorySize, String valueToSet, String expectedValue, boolean privateNamespace)\n@@ -118,1 +115,1 @@\n-            .addDockerOpts(\"--memory\", \"1g\");\n+            .addDockerOpts(\"--memory\", containerMemorySize);\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestMemoryWithSubgroups.java","additions":18,"deletions":21,"binary":false,"changes":39,"status":"modified"},{"patch":"@@ -33,0 +33,2 @@\n+import jtreg.SkippedException;\n+\n@@ -71,1 +73,1 @@\n-            System.out.println(\"Metrics are from neither cgroup v1 nor v2, skipped for now.\");\n+            throw new SkippedException(\"Metrics are from neither cgroup v1 nor v2, skipped for now.\");\n","filename":"test\/jdk\/jdk\/internal\/platform\/docker\/TestDockerMemoryMetricsSubgroup.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"}]}