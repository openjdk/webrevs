{"files":[{"patch":"@@ -28,0 +28,1 @@\n+import java.lang.classfile.attribute.BootstrapMethodsAttribute;\n@@ -29,0 +30,1 @@\n+import java.lang.classfile.constantpool.ConstantPoolBuilder;\n@@ -37,3 +39,19 @@\n- * is stored in the {@code BootstrapMethods} attribute, but is modeled by\n- * the {@link ConstantPool}, since the bootstrap method table is logically\n- * part of the constant pool.\n+ * is stored in the {@link BootstrapMethodsAttribute BootstrapMethods}\n+ * attribute, but is modeled by the {@link ConstantPool}, since the bootstrap\n+ * method table is logically part of the constant pool.\n+ * <p>\n+ * Conceptually, a bootstrap method entry is a record:\n+ * {@snippet lang=text :\n+ * \/\/ @link region=1 substring=\"BootstrapMethodEntry\" target=\"ConstantPoolBuilder#bsmEntry(DirectMethodHandleDesc, List)\"\n+ * \/\/ @link substring=\"DirectMethodHandleDesc\" target=\"#bootstrapMethod\" :\n+ * BootstrapMethodEntry(DirectMethodHandleDesc, List<ConstantDesc>) \/\/ @link substring=\"List<ConstantDesc>\" target=\"#arguments()\"\n+ * \/\/ @end region=1\n+ * }\n+ * <p>\n+ * Physically, a bootstrap method entry is a record:\n+ * {@snippet lang=text :\n+ * \/\/ @link region=1 substring=\"BootstrapMethodEntry\" target=\"ConstantPoolBuilder#bsmEntry(MethodHandleEntry, List)\"\n+ * \/\/ @link substring=\"MethodHandleEntry\" target=\"#bootstrapMethod\" :\n+ * BootstrapMethodEntry(MethodHandleEntry, List<LoadableConstantEntry>) \/\/ @link substring=\"List<LoadableConstantEntry>\" target=\"#arguments()\"\n+ * \/\/ @end region=1\n+ * }\n@@ -41,0 +59,1 @@\n+ * @see ConstantPoolBuilder#bsmEntry ConstantPoolBuilder::bsmEntry\n@@ -48,0 +67,7 @@\n+     *\n+     * @apiNote\n+     * Given a {@link ConstantPoolBuilder} {@code builder} and a {@code\n+     * BootstrapMethodEntry} {@code entry}, use {@link\n+     * ConstantPoolBuilder#canWriteDirect\n+     * builder.canWriteDirect(entry.constantPool())} instead of object equality\n+     * of the constant pool to determine if an entry is compatible.\n@@ -52,1 +78,2 @@\n-     * {@return the index into the bootstrap method table corresponding to this entry}\n+     * {@return the index into the bootstrap method table corresponding to this\n+     * entry}\n@@ -58,0 +85,4 @@\n+     *\n+     * @apiNote\n+     * A symbolic descriptor for the bootstrap method is available through\n+     * {@link MethodHandleEntry#asSymbol() bootstrapMethod().asSymbol()}.\n@@ -63,0 +94,5 @@\n+     *\n+     * @apiNote\n+     * A symbolic descriptor for each entry in the returned list is available\n+     * via {@link LoadableConstantEntry#constantValue\n+     * LoadableConstantEntry::constantValue}.\n","filename":"src\/java.base\/share\/classes\/java\/lang\/classfile\/BootstrapMethodEntry.java","additions":40,"deletions":4,"binary":false,"changes":44,"status":"modified"},{"patch":"@@ -31,4 +31,3 @@\n- * A constant pool entry that may be used by annotation constant values,\n- * which includes the four kinds of primitive constants and UTF8 constants.\n- * These entries are also the only entries that do not refer to other\n- * constant pool entries.\n+ * Marker interface for constant pool entries that can represent constant values\n+ * associated with elements of annotations.  They are also the only entries that\n+ * do not refer to other constant pool entries.\n@@ -43,0 +42,1 @@\n+ * @jvms 4.7.16.1 The {@code element_value} structure\n@@ -50,3 +50,3 @@\n-     * {@return the constant value}  The constant value will be an {@link Integer},\n-     * {@link Long}, {@link Float}, {@link Double} for the primitive constants,\n-     * or {@link String} for UTF8 constants.\n+     * {@return the constant value}  The constant value will be an {@link\n+     * Integer}, {@link Long}, {@link Float}, {@link Double} for the primitive\n+     * constants, or {@link String} for UTF8 constants.\n","filename":"src\/java.base\/share\/classes\/java\/lang\/classfile\/constantpool\/AnnotationConstantValueEntry.java","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -33,3 +33,19 @@\n- * Models a {@code CONSTANT_Class_info} constant in the constant pool of a\n- * classfile.\n- * @jvms 4.4.1 The CONSTANT_Class_info Structure\n+ * Models a {@code CONSTANT_Class_info} structure, representing a reference\n+ * type, in the constant pool of a {@code class} file.  This describes a class\n+ * or interface with the internal form of its binary name (JVMS {@jvms 4.2.1}),\n+ * or an array type with its descriptor string (JVMS {@jvms 4.3.2}).\n+ * <p>\n+ * Conceptually, a class entry is a record:\n+ * {@snippet lang=text :\n+ * \/\/ @link substring=\"ClassEntry\" target=\"ConstantPoolBuilder#classEntry(ClassDesc)\" :\n+ * ClassEntry(ClassDesc) \/\/ @link substring=\"ClassDesc\" target=\"#asSymbol()\"\n+ * }\n+ * where the {@code ClassDesc} must not be primitive.\n+ * <p>\n+ * Physically, a class entry is a record:\n+ * {@snippet lang=text :\n+ * \/\/ @link substring=\"ClassEntry\" target=\"ConstantPoolBuilder#classEntry(Utf8Entry)\" :\n+ * ClassEntry(Utf8Entry) \/\/ @link substring=\"Utf8Entry\" target=\"Utf8Entry\"\n+ * }\n+ * where the {@code Utf8Entry} is a valid internal form of binary name or array\n+ * type descriptor string.\n@@ -37,0 +53,9 @@\n+ * @apiNote\n+ * The internal form of a binary name, where all occurrences of {@code .} in the\n+ * name are replaced by {@code \/}, is informally known as an <dfn>{@index\n+ * \"internal name\"}<\/dfn>.  This concept also applies to package names in\n+ * addition to class and interface names.\n+ *\n+ * @see ConstantPoolBuilder#classEntry ConstantPoolBuilder::classEntry\n+ * @see ClassDesc\n+ * @jvms 4.4.1 The {@code CONSTANT_Class_info} Structure\n@@ -43,0 +68,5 @@\n+    \/**\n+     * {@inheritDoc}\n+     * <p>\n+     * This is equivalent to {@link #asSymbol() asSymbol()}.\n+     *\/\n@@ -49,1 +79,8 @@\n-     * {@return the UTF8 constant pool entry for the class name}\n+     * {@return the {@code Utf8Entry} referred by this class entry}  If the\n+     * value of the UTF8 starts with a {@code [}, this represents an array type\n+     * and the value is a descriptor string; otherwise, this represents a class\n+     * or interface and the value is the {@linkplain ##internal-name internal\n+     * form} of a binary name.\n+     *\n+     * @see ConstantPoolBuilder#classEntry(Utf8Entry)\n+     *      ConstantPoolBuilder::classEntry(Utf8Entry)\n@@ -54,1 +91,4 @@\n-     * {@return the class name, as an internal binary name}\n+     * {@return the represented reference type, as the {@linkplain\n+     * ##internal-name internal form} of a binary name or an array descriptor\n+     * string}  The return value is equivalent to {@link #name()\n+     * name().stringValue()}.\n@@ -59,1 +99,6 @@\n-     * {@return the class name, as a symbolic descriptor}\n+     * {@return the represented reference type, as a symbolic descriptor}  The\n+     * returned descriptor is never {@linkplain ClassDesc#isPrimitive()\n+     * primitive}.\n+     *\n+     * @see ConstantPoolBuilder#classEntry(ClassDesc)\n+     *      ConstantPoolBuilder::classEntry(ClassDesc)\n","filename":"src\/java.base\/share\/classes\/java\/lang\/classfile\/constantpool\/ClassEntry.java","additions":51,"deletions":6,"binary":false,"changes":57,"status":"modified"},{"patch":"@@ -36,3 +36,19 @@\n- * Models a {@code CONSTANT_Dynamic_info} constant in the constant pool of a\n- * classfile.\n- * @jvms 4.4.10 The CONSTANT_Dynamic_info and CONSTANT_InvokeDynamic_info Structures\n+ * Models a {@code CONSTANT_Dynamic_info} structure, representing a <dfn>{@index\n+ * \"dynamically-computed constant\"}<\/dfn>, in the constant pool of a {@code\n+ * class} file.\n+ * <p>\n+ * Conceptually, a constant dynamic entry is a record:\n+ * {@snippet lang=text :\n+ * \/\/ @link substring=\"ConstantDynamicEntry\" target=\"ConstantPoolBuilder#constantDynamicEntry(DynamicConstantDesc)\" :\n+ * ConstantDynamicEntry(DynamicConstantDesc) \/\/ @link substring=\"DynamicConstantDesc\" target=\"#asSymbol()\"\n+ * }\n+ * <p>\n+ * Physically, a constant dynamic entry is a record:\n+ * {@snippet lang=text :\n+ * \/\/ @link region substring=\"ConstantDynamicEntry\" target=\"ConstantPoolBuilder#constantDynamicEntry(BootstrapMethodEntry, NameAndTypeEntry)\"\n+ * \/\/ @link substring=\"BootstrapMethodEntry\" target=\"#bootstrap()\"\n+ * ConstantDynamicEntry(BootstrapMethodEntry, NameAndTypeEntry) \/\/ @link substring=\"NameAndTypeEntry\" target=\"#nameAndType()\"\n+ * \/\/ @end\n+ * }\n+ * where the type in the {@code NameAndTypeEntry} is a {@linkplain #typeSymbol()\n+ * field descriptor} string.\n@@ -40,0 +56,11 @@\n+ * @apiNote\n+ * A dynamically-computed constant is frequently called a <dfn>{@index \"dynamic\n+ * constant\"}<\/dfn>, or a <dfn>{@index \"condy\"}<\/dfn>, from the abbreviation of\n+ * \"constant dynamic\".\n+ *\n+ * @see ConstantPoolBuilder#constantDynamicEntry\n+ *      ConstantPoolBuilder::constantDynamicEntry\n+ * @see DynamicConstantDesc\n+ * @see java.lang.invoke##condycon Dynamically-computed constants\n+ * @jvms 4.4.10 The {@code CONSTANT_Dynamic_info} and {@code\n+ *              CONSTANT_InvokeDynamic_info} Structures\n@@ -47,1 +74,2 @@\n-     * {@return a symbolic descriptor for the dynamic constant's type}\n+     * {@return a symbolic descriptor for the {@linkplain #type() field type} of\n+     * this dynamically-computed constant}\n@@ -53,0 +81,5 @@\n+    \/**\n+     * {@inheritDoc}\n+     * <p>\n+     * This is equivalent to {@link #asSymbol() asSymbol()}.\n+     *\/\n@@ -59,1 +92,4 @@\n-     * {@return the symbolic descriptor for the {@code invokedynamic} constant}\n+     * {@return a symbolic descriptor for this dynamically-computed constant}\n+     *\n+     * @see ConstantPoolBuilder#constantDynamicEntry(DynamicConstantDesc)\n+     *      ConstantPoolBuilder::constantDynamicEntry(DynamicConstantDesc)\n@@ -71,1 +107,6 @@\n-     * {@return the type of the constant}\n+     * {@inheritDoc}\n+     *\n+     * @apiNote\n+     * The data type of a dynamically-computed constant depends on its\n+     * {@linkplain #type() descriptor}, while the data type of all other\n+     * constants can be determined by their {@linkplain #tag() constant type}.\n@@ -75,1 +116,1 @@\n-        return TypeKind.fromDescriptor(type().stringValue());\n+        return TypeKind.fromDescriptor(type());\n","filename":"src\/java.base\/share\/classes\/java\/lang\/classfile\/constantpool\/ConstantDynamicEntry.java","additions":48,"deletions":7,"binary":false,"changes":55,"status":"modified"},{"patch":"@@ -30,0 +30,1 @@\n+import java.lang.classfile.attribute.BootstrapMethodsAttribute;\n@@ -34,3 +35,8 @@\n- * Provides read access to the constant pool and bootstrap method table of a\n- * classfile.\n- * @jvms 4.4 The Constant Pool\n+ * Provides read access to the constant pool and the bootstrap method table of a\n+ * {@code class} file.\n+ *\n+ * <h2 id=\"index\">Index in the Constant Pool<\/h2>\n+ * The constant pool entries are accessed by index.  A valid index is in the\n+ * range of {@link #size() [1, size())}.  It is {@linkplain PoolEntry#width()\n+ * unusable} if a {@link LongEntry} or {@link DoubleEntry} is at its previous\n+ * index.\n@@ -38,0 +44,2 @@\n+ * @see BootstrapMethodsAttribute\n+ * @jvms 4.4 The Constant Pool\n@@ -58,1 +66,5 @@\n-     * {@return the size of the constant pool}\n+     * {@return the exclusive upper bound of the valid indices of this constant\n+     * pool}  The actual number of entries is lower because {@code 0}, {@code\n+     * size()} are not valid, and a valid index may be unusable.\n+     *\n+     * @see ##index Index in the Constant Pool\n@@ -69,1 +81,2 @@\n-     *         constant pool, or the entry is not of the given type\n+     *         constant pool or considered unusable, or the entry is not\n+     *         of the given type\n@@ -75,0 +88,4 @@\n+     *\n+     * @apiNote\n+     * This skips any unusable index and is less error-prone than iterating by\n+     * raw index.\n@@ -96,1 +113,0 @@\n-\n","filename":"src\/java.base\/share\/classes\/java\/lang\/classfile\/constantpool\/ConstantPool.java","additions":22,"deletions":6,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -28,1 +28,2 @@\n-import java.lang.classfile.ClassBuilder;\n+import java.lang.classfile.ClassFile;\n+import java.lang.classfile.ClassFileBuilder;\n@@ -30,0 +31,3 @@\n+import java.lang.classfile.CodeBuilder;\n+import java.lang.classfile.attribute.ConstantValueAttribute;\n+import java.lang.classfile.instruction.ConstantInstruction;\n@@ -31,0 +35,1 @@\n+import java.lang.invoke.MethodHandleInfo;\n@@ -32,0 +37,1 @@\n+import java.util.function.Consumer;\n@@ -42,3 +48,12 @@\n- * Builder for the constant pool of a classfile.  Provides read and write access\n- * to the constant pool that is being built.  Writing is append-only and idempotent\n- * (entry-bearing methods will return an existing entry if there is one).\n+ * Builder for the constant pool of a {@code class} file.  Provides read and\n+ * write access to the constant pool that is {@linkplain ClassFileBuilder#constantPool()\n+ * being built}.  Writing is append-only (the index of new entries will always\n+ * increase) and idempotent (entry-bearing methods will return an existing entry\n+ * if there is a suitable one).\n+ * <p>\n+ * For {@code class} file building, an overload of {@link ClassFile#build(\n+ * ClassEntry, ConstantPoolBuilder, Consumer) ClassFile::build} takes a\n+ * {@code ConstantPoolBuilder}.  For {@code class} file transformations via\n+ * {@link ClassFile#transformClass ClassFile::transformClass}, the {@link\n+ * ClassFile.ConstantPoolSharingOption} controls how the constant pool builder\n+ * of the resulting {@code class} is created.\n@@ -46,3 +61,16 @@\n- * A {@linkplain ConstantPoolBuilder} is associated with a {@link ClassBuilder}.\n- * The {@linkplain ConstantPoolBuilder} also provides access to some of the\n- * state of the {@linkplain ClassBuilder}, such as classfile processing options.\n+ * <h2 id=\"adoption\">Non-directly-writable constant pool entries<\/h2>\n+ * In {@code class} file building and constant pool building, some constant pool\n+ * entries supplied will not be {@linkplain #canWriteDirect(ConstantPool)\n+ * directly writable} to this constant pool.  For example, {@link #classEntry(Utf8Entry)\n+ * classEntry(Utf8Entry)} may be called with an UTF8 entry not directly writable.\n+ * Such entries will be first converted to a pool entry in this builder, reusing\n+ * suitable entries or adding new entries if there is none suitable.  As a\n+ * result, all pool entries returned by writing methods in this builder is\n+ * directly writable to this constant pool.\n+ * <p>\n+ * Some non-constant-pool builder methods may have their outputs adjusted if\n+ * they receive non-directly-writable pool entries.  For example, if an {@link\n+ * ConstantInstruction#ofLoad ldc_w} instruction with a non-directly-writable\n+ * entry is written to a {@link CodeBuilder}, the {@code CodeBuilder} may emit\n+ * a functionally equivalent {@code ldc} instruction instead, if the converted\n+ * entry can be encoded in such an instruction.\n@@ -50,0 +78,1 @@\n+ * @see ClassFileBuilder#constantPool() ClassFileBuilder::constantPool\n@@ -58,2 +87,4 @@\n-     * be pre-populated with the contents of the constant pool associated with\n-     * the class reader.\n+     * be pre-populated with the contents of the constant pool {@linkplain\n+     * ClassModel#constantPool() associated with} the given class model.  The\n+     * index of new entries will start from the {@link ConstantPool#size()\n+     * size()} of the source pool.\n@@ -62,0 +93,4 @@\n+     * @see ClassFile#build(ClassEntry, ConstantPoolBuilder, Consumer)\n+     *      ClassFile::build(ClassEntry, ConstantPoolBuilder, Consumer)\n+     * @see ClassFile.ConstantPoolSharingOption#SHARED_POOL\n+     *      ConstantPoolSharingOption.SHARED_POOL\n@@ -69,1 +104,4 @@\n-     * will be empty.\n+     * will be empty.  The index of new entries will start from {@code 1}.\n+     *\n+     * @see ClassFile.ConstantPoolSharingOption#NEW_POOL\n+     *      ConstantPoolSharingOption.NEW_POOL\n@@ -76,3 +114,4 @@\n-     * {@return whether the provided constant pool is index-compatible with this\n-     * one}  This may be because they are the same constant pool, or because this\n-     * constant pool was copied from the other.\n+     * {@return {@code true} if the index of any entry in the given constant\n+     * pool refers to the same entry in this builder}  This may be because they\n+     * are the same builder, or because this builder was {@linkplain\n+     * #of(ClassModel) pre-populated} from the given constant pool.\n@@ -80,1 +119,2 @@\n-     * @param constantPool the other constant pool\n+     * @param constantPool the given constant pool\n+     * @see ##adoption Non-directly-writable constant pool entries\n@@ -85,3 +125,1 @@\n-     * {@return A {@link Utf8Entry} describing the provided {@linkplain String}}\n-     * If a UTF8 entry in the pool already describes this string, it is returned;\n-     * otherwise, a new entry is added and the new entry is returned.\n+     * {@return a {@link Utf8Entry} describing the provided {@link String}}\n@@ -90,0 +128,1 @@\n+     * @see Utf8Entry#stringValue() Utf8Entry::stringValue\n@@ -94,4 +133,7 @@\n-     * {@return A {@link Utf8Entry} describing the field descriptor of the provided\n-     * {@linkplain ClassDesc}}\n-     * If a UTF8 entry in the pool already describes this field descriptor, it is returned;\n-     * otherwise, a new entry is added and the new entry is returned.\n+     * {@return a {@link Utf8Entry} describing the {@linkplain\n+     * ClassDesc#descriptorString() field descriptor string} of the provided\n+     * {@link ClassDesc}}\n+     *\n+     * @apiNote\n+     * The resulting {@code Utf8Entry} is usually not {@linkplain\n+     * #classEntry(Utf8Entry) referable by} a {@link ClassEntry}.\n@@ -106,4 +148,3 @@\n-     * {@return A {@link Utf8Entry} describing the method descriptor of the provided\n-     * {@linkplain MethodTypeDesc}}\n-     * If a UTF8 entry in the pool already describes this field descriptor, it is returned;\n-     * otherwise, a new entry is added and the new entry is returned.\n+     * {@return a {@link Utf8Entry} describing the {@linkplain\n+     * MethodTypeDesc#descriptorString() method descriptor string} of the\n+     * provided {@link MethodTypeDesc}}\n@@ -118,5 +159,4 @@\n-     * {@return A {@link ClassEntry} describing the class whose internal name\n-     * is encoded in the provided {@linkplain Utf8Entry}}\n-     * If a Class entry in the pool already describes this class,\n-     * it is returned; otherwise, a new entry is added and the new entry is\n-     * returned.\n+     * {@return a {@link ClassEntry} referring to the provided {@link\n+     * Utf8Entry}}  The {@code Utf8Entry} describes the internal form\n+     * of the binary name of a class or interface or the field descriptor\n+     * string of an array type.\n@@ -124,1 +164,2 @@\n-     * @param ne the constant pool entry describing the internal name of the class\n+     * @param ne the {@code Utf8Entry}\n+     * @see ClassEntry#name() ClassEntry::name\n@@ -129,5 +170,2 @@\n-     * {@return A {@link ClassEntry} describing the class described by\n-     * provided {@linkplain ClassDesc}}\n-     * If a Class entry in the pool already describes this class,\n-     * it is returned; otherwise, a new entry is added and the new entry is\n-     * returned.\n+     * {@return a {@link ClassEntry} describing the same reference type\n+     * as the provided {@link ClassDesc}}\n@@ -135,2 +173,4 @@\n-     * @param classDesc the symbolic descriptor for the class\n-     * @throws IllegalArgumentException if {@code classDesc} represents a primitive type\n+     * @param classDesc the symbolic descriptor for the reference type\n+     * @throws IllegalArgumentException if {@code classDesc} represents a\n+     *         primitive type\n+     * @see ClassEntry#asSymbol() ClassEntry::asSymbol\n@@ -148,5 +188,3 @@\n-     * {@return A {@link PackageEntry} describing the class whose internal name\n-     * is encoded in the provided {@linkplain Utf8Entry}}\n-     * If a Package entry in the pool already describes this class,\n-     * it is returned; otherwise, a new entry is added and the new entry is\n-     * returned.\n+     * {@return a {@link PackageEntry} referring to the provided {@link\n+     * Utf8Entry}}  The {@code Utf8Entry} describes the internal form\n+     * of the name of a package.\n@@ -154,2 +192,2 @@\n-     * @param nameEntry the constant pool entry describing the internal name of\n-     *                  the package\n+     * @param nameEntry the {@code Utf8Entry}\n+     * @see PackageEntry#name() PackageEntry::name\n@@ -160,5 +198,2 @@\n-     * {@return A {@link PackageEntry} describing the class described by\n-     * provided {@linkplain PackageDesc}}\n-     * If a Package entry in the pool already describes this class,\n-     * it is returned; otherwise, a new entry is added and the new entry is\n-     * returned.\n+     * {@return a {@link PackageEntry} describing the same package as the\n+     * provided {@link PackageDesc}}\n@@ -166,1 +201,2 @@\n-     * @param packageDesc the symbolic descriptor for the class\n+     * @param packageDesc the symbolic descriptor for the package\n+     * @see PackageEntry#asSymbol() PackageEntry::asSymbol\n@@ -173,5 +209,2 @@\n-     * {@return A {@link ModuleEntry} describing the module whose name\n-     * is encoded in the provided {@linkplain Utf8Entry}}\n-     * If a module entry in the pool already describes this class,\n-     * it is returned; otherwise, a new entry is added and the new entry is\n-     * returned.\n+     * {@return a {@link ModuleEntry} referring to the provided {@link\n+     * Utf8Entry}}  The {@code Utf8Entry} describes the module name.\n@@ -180,0 +213,1 @@\n+     * @see ModuleEntry#name() ModuleEntry::name\n@@ -184,5 +218,2 @@\n-     * {@return A {@link ModuleEntry} describing the module described by\n-     * provided {@linkplain ModuleDesc}}\n-     * If a module entry in the pool already describes this class,\n-     * it is returned; otherwise, a new entry is added and the new entry is\n-     * returned.\n+     * {@return a {@link ModuleEntry} describing the same module as the provided\n+     * {@link ModuleDesc}}\n@@ -190,1 +221,2 @@\n-     * @param moduleDesc the symbolic descriptor for the class\n+     * @param moduleDesc the symbolic descriptor for the module\n+     * @see ModuleEntry#asSymbol() ModuleEntry::asSymbol\n@@ -197,4 +229,5 @@\n-     * {@return A {@link NameAndTypeEntry} describing the provided name and type}\n-     * If a NameAndType entry in the pool already describes this name and type,\n-     * it is returned; otherwise, a new entry is added and the new entry is\n-     * returned.\n+     * {@return a {@link NameAndTypeEntry} referring to the provided name and\n+     * type {@link Utf8Entry}}  The name {@code Utf8Entry} describes an\n+     * unqualified name or the special name {@value ConstantDescs#INIT_NAME},\n+     * and the type {@code Utf8Entry} describes a field or method descriptor\n+     * string.\n@@ -202,2 +235,4 @@\n-     * @param nameEntry the member name\n-     * @param typeEntry the member field or method descriptor\n+     * @param nameEntry the name {@code Utf8Entry}\n+     * @param typeEntry the type {@code Utf8Entry}\n+     * @see NameAndTypeEntry#name() NameAndTypeEntry::name\n+     * @see NameAndTypeEntry#type() NameAndTypeEntry::type\n@@ -208,4 +243,2 @@\n-     * {@return A {@link NameAndTypeEntry} describing the provided name and type}\n-     * If a NameAndType entry in the pool already describes this name and type,\n-     * it is returned; otherwise, a new entry is added and the new entry is\n-     * returned.\n+     * {@return a {@link NameAndTypeEntry} describing the provided unqualified\n+     * name and field descriptor}\n@@ -213,2 +246,2 @@\n-     * @param name the member name\n-     * @param type the symbolic descriptor for a field type\n+     * @param name the unqualified name\n+     * @param type the field descriptor\n@@ -221,4 +254,3 @@\n-     * {@return A {@link NameAndTypeEntry} describing the provided name and type}\n-     * If a NameAndType entry in the pool already describes this name and type,\n-     * it is returned; otherwise, a new entry is added and the new entry is\n-     * returned.\n+     * {@return a {@link NameAndTypeEntry} describing the provided name and\n+     * method descriptor}  The name can be an unqualified name or the\n+     * special name {@value ConstantDescs#INIT_NAME}.\n@@ -226,2 +258,2 @@\n-     * @param name the member name\n-     * @param type the symbolic descriptor for a method type\n+     * @param name the unqualified name, or {@value ConstantDescs#INIT_NAME}\n+     * @param type the method descriptor\n@@ -234,4 +266,5 @@\n-     * {@return A {@link FieldRefEntry} describing a field of a class}\n-     * If a FieldRef entry in the pool already describes this field,\n-     * it is returned; otherwise, a new entry is added and the new entry is\n-     * returned.\n+     * {@return a {@link FieldRefEntry} referring to a {@link ClassEntry} and a\n+     * {@link NameAndTypeEntry}}  The {@code ClassEntry} describes a class or\n+     * interface that has this field as a member, and the {@code\n+     * NameAndTypeEntry} describes the unqualified name and the field descriptor\n+     * for this field.\n@@ -239,2 +272,4 @@\n-     * @param owner the class the field is a member of\n-     * @param nameAndType the name and type of the field\n+     * @param owner the {@code ClassEntry}\n+     * @param nameAndType the {@code NameAndTypeEntry}\n+     * @see FieldRefEntry#owner() FieldRefEntry::owner\n+     * @see FieldRefEntry#nameAndType() FieldRefEntry::nameAndType\n@@ -245,4 +280,1 @@\n-     * {@return A {@link FieldRefEntry} describing a field of a class}\n-     * If a FieldRef entry in the pool already describes this field,\n-     * it is returned; otherwise, a new entry is added and the new entry is\n-     * returned.\n+     * {@return a {@link FieldRefEntry} describing a field of a class}\n@@ -250,3 +282,3 @@\n-     * @param owner the class the field is a member of\n-     * @param name the name of the field\n-     * @param type the type of the field\n+     * @param owner the class or interface the field is a member of\n+     * @param name the unqualified name of the field\n+     * @param type the field descriptor\n@@ -254,0 +286,1 @@\n+     * @see FieldRefEntry#typeSymbol() FieldRefEntry::typeSymbol\n@@ -260,4 +293,5 @@\n-     * {@return A {@link MethodRefEntry} describing a method of a class}\n-     * If a MethodRefEntry entry in the pool already describes this method,\n-     * it is returned; otherwise, a new entry is added and the new entry is\n-     * returned.\n+     * {@return a {@link MethodRefEntry} referring to a {@link ClassEntry} and a\n+     * {@link NameAndTypeEntry}}  The {@code ClassEntry} describes a class that\n+     * has this method as a member, and the {@code NameAndTypeEntry} describes\n+     * the unqualified name or the special name {@value ConstantDescs#INIT_NAME}\n+     * and the method descriptor for this method.\n@@ -265,2 +299,4 @@\n-     * @param owner the class the method is a member of\n-     * @param nameAndType the name and type of the method\n+     * @param owner the {@code ClassEntry}\n+     * @param nameAndType the {@code NameAndTypeEntry}\n+     * @see MethodRefEntry#owner() MethodRefEntry::owner\n+     * @see MethodRefEntry#nameAndType() MethodRefEntry::nameAndType\n@@ -271,4 +307,1 @@\n-     * {@return A {@link MethodRefEntry} describing a method of a class}\n-     * If a MethodRefEntry entry in the pool already describes this method,\n-     * it is returned; otherwise, a new entry is added and the new entry is\n-     * returned.\n+     * {@return a {@link MethodRefEntry} describing a method of a class}\n@@ -277,2 +310,3 @@\n-     * @param name the name of the method\n-     * @param type the type of the method\n+     * @param name the unqualified name, or special name {@value\n+     *        ConstantDescs#INIT_NAME}, of the method\n+     * @param type the method descriptor\n@@ -280,0 +314,1 @@\n+     * @see MethodRefEntry#typeSymbol() MethodRefEntry::typeSymbol\n@@ -286,4 +321,5 @@\n-     * {@return A {@link InterfaceMethodRefEntry} describing a method of a class}\n-     * If a InterfaceMethodRefEntry entry in the pool already describes this method,\n-     * it is returned; otherwise, a new entry is added and the new entry is\n-     * returned.\n+     * {@return an {@link InterfaceMethodRefEntry} referring to a {@link\n+     * ClassEntry} and a {@link NameAndTypeEntry}}  The {@code ClassEntry}\n+     * describes an interface that has this method as a member, and the {@code\n+     * NameAndTypeEntry} describes the unqualified name and the method\n+     * descriptor for this method.\n@@ -291,2 +327,5 @@\n-     * @param owner the class the method is a member of\n-     * @param nameAndType the name and type of the method\n+     * @param owner the {@code ClassEntry}\n+     * @param nameAndType the {@code NameAndTypeEntry}\n+     * @see InterfaceMethodRefEntry#owner() InterfaceMethodRefEntry::owner\n+     * @see InterfaceMethodRefEntry#nameAndType()\n+     *      InterfaceMethodRefEntry::nameAndType\n@@ -297,4 +336,2 @@\n-     * {@return A {@link InterfaceMethodRefEntry} describing a method of a class}\n-     * If a InterfaceMethodRefEntry entry in the pool already describes this method,\n-     * it is returned; otherwise, a new entry is added and the new entry is\n-     * returned.\n+     * {@return an {@link InterfaceMethodRefEntry} describing a method of an\n+     * interface}\n@@ -302,3 +339,3 @@\n-     * @param owner the class the method is a member of\n-     * @param name the name of the method\n-     * @param type the type of the method\n+     * @param owner the interface the method is a member of\n+     * @param name the unqualified name of the method\n+     * @param type the method descriptor\n@@ -306,0 +343,1 @@\n+     * @see InterfaceMethodRefEntry#typeSymbol() InterfaceMethodRefEntry::typeSymbol\n@@ -312,4 +350,2 @@\n-     * {@return A {@link MethodTypeEntry} describing a method type}\n-     * If a MethodType entry in the pool already describes this method type,\n-     * it is returned; otherwise, a new entry is added and the new entry is\n-     * returned.\n+     * {@return a {@link MethodTypeEntry} describing the same method type as\n+     * the provided {@link MethodTypeDesc}}\n@@ -318,0 +354,1 @@\n+     * @see MethodTypeEntry#asSymbol() MethodTypeEntry::asSymbol\n@@ -322,4 +359,2 @@\n-     * {@return A {@link MethodTypeEntry} describing a method type}\n-     * If a MethodType entry in the pool already describes this method type,\n-     * it is returned; otherwise, a new entry is added and the new entry is\n-     * returned.\n+     * {@return a {@link MethodTypeEntry} referring to a {@link Utf8Entry}}\n+     * The {@code Utf8Entry} represents a method descriptor string.\n@@ -327,1 +362,2 @@\n-     * @param descriptor the constant pool entry for the method type descriptor\n+     * @param descriptor the {@code Utf8Entry}\n+     * @see MethodTypeEntry#descriptor() MethodTypeEntry::descriptor\n@@ -332,4 +368,2 @@\n-     * {@return A {@link MethodHandleEntry} describing a direct method handle}\n-     * If a MethodHandle entry in the pool already describes this method handle,\n-     * it is returned; otherwise, a new entry is added and the new entry is\n-     * returned.\n+     * {@return a {@link MethodHandleEntry} describing the same method handle as\n+     * the given {@link DirectMethodHandleDesc}}\n@@ -338,0 +372,1 @@\n+     * @see MethodHandleEntry#asSymbol() MethodHandleEntry::asSymbol\n@@ -350,4 +385,4 @@\n-     * {@return A {@link MethodHandleEntry} describing a field accessor or method}\n-     * If a MethodHandle entry in the pool already describes this method handle,\n-     * it is returned; otherwise, a new entry is added and the new entry is\n-     * returned.\n+     * {@return a {@link MethodHandleEntry} encoding a reference kind and\n+     * referring to a {@link MemberRefEntry}}  The reference kind must be\n+     * in {@code [1, 9]}, and the {@code MemberRefEntry} is subject to\n+     * various restrictions based on the reference kind (JVMS {@jvms 4.4.8}).\n@@ -355,2 +390,5 @@\n-     * @param refKind the reference kind of the method handle (JVMS {@jvms 4.4.8})\n-     * @param reference the constant pool entry describing the field or method\n+     * @param refKind the reference kind of the method handle\n+     * @param reference the {@code MemberRefEntry}\n+     * @see MethodHandleInfo##refKinds Reference kinds\n+     * @see MethodHandleEntry#kind() MethodHandleEntry::kind\n+     * @see MethodHandleEntry#reference() MethodHandleEntry::reference\n@@ -361,4 +399,2 @@\n-     * {@return An {@link InvokeDynamicEntry} describing a dynamic call site}\n-     * If an InvokeDynamic entry in the pool already describes this site,\n-     * it is returned; otherwise, a new entry is added and the new entry is\n-     * returned.\n+     * {@return an {@link InvokeDynamicEntry} describing the same dynamic call\n+     * site as the provided {@link DynamicCallSiteDesc}}\n@@ -366,1 +402,2 @@\n-     * @param dcsd the symbolic descriptor of the method handle\n+     * @param dcsd the symbolic descriptor of the dynamic call site\n+     * @see InvokeDynamicEntry#asSymbol() InvokeDynamicEntry::asSymbol\n@@ -373,4 +410,5 @@\n-     * {@return An {@link InvokeDynamicEntry} describing a dynamic call site}\n-     * If an InvokeDynamic entry in the pool already describes this site,\n-     * it is returned; otherwise, a new entry is added and the new entry is\n-     * returned.\n+     * {@return an {@link InvokeDynamicEntry} referring to a {@link\n+     * BootstrapMethodEntry} and a {@link NameAndTypeEntry}}\n+     * The {@code BootstrapMethodEntry} describes the bootstrap method\n+     * and its invocation arguments in addition to the name and type,\n+     * and the {@code NameAndTypeEntry} a name and a method descriptor.\n@@ -378,2 +416,4 @@\n-     * @param bootstrapMethodEntry the entry in the bootstrap method table\n-     * @param nameAndType the invocation name and type\n+     * @param bootstrapMethodEntry the {@code BootstrapMethodEntry}\n+     * @param nameAndType the {@code NameAndTypeEntry}\n+     * @see InvokeDynamicEntry#bootstrap() InvokeDynamicEntry::bootstrap\n+     * @see InvokeDynamicEntry#nameAndType() InvokeDynamicEntry::nameAndType\n@@ -385,4 +425,2 @@\n-     * {@return A {@link ConstantDynamicEntry} describing a dynamic constant}\n-     * If a ConstantDynamic entry in the pool already describes this site,\n-     * it is returned; otherwise, a new entry is added and the new entry is\n-     * returned.\n+     * {@return a {@link ConstantDynamicEntry} describing the dynamic constant\n+     * as the provided {@link DynamicConstantDesc}}\n@@ -391,0 +429,1 @@\n+     * @see ConstantDynamicEntry#asSymbol() ConstantDynamicEntry::asSymbol\n@@ -397,4 +436,5 @@\n-     * {@return A {@link ConstantDynamicEntry} describing a dynamic constant}\n-     * If a ConstantDynamic entry in the pool already describes this site,\n-     * it is returned; otherwise, a new entry is added and the new entry is\n-     * returned.\n+     * {@return a {@link ConstantDynamicEntry} referring to a {@link\n+     * BootstrapMethodEntry} and a {@link NameAndTypeEntry}}\n+     * The {@code BootstrapMethodEntry} describes the bootstrap method\n+     * and its invocation arguments in addition to the name and type,\n+     * and the {@code NameAndTypeEntry} a name and a field descriptor.\n@@ -402,2 +442,4 @@\n-     * @param bootstrapMethodEntry the entry in the bootstrap method table\n-     * @param nameAndType the invocation name and type\n+     * @param bootstrapMethodEntry the {@code BootstrapMethodEntry}\n+     * @param nameAndType the {@code NameAndTypeEntry}\n+     * @see ConstantDynamicEntry#bootstrap() ConstantDynamicEntry::bootstrap\n+     * @see ConstantDynamicEntry#nameAndType() ConstantDynamicEntry::nameAndType\n@@ -408,3 +450,1 @@\n-     * {@return An {@link IntegerEntry} describing the provided value}\n-     * If an integer entry in the pool already describes this value, it is returned;\n-     * otherwise, a new entry is added and the new entry is returned.\n+     * {@return an {@link IntegerEntry} describing the provided value}\n@@ -413,0 +453,1 @@\n+     * @see IntegerEntry#intValue() IntegerEntry::intValue\n@@ -417,3 +458,1 @@\n-     * {@return A {@link FloatEntry} describing the provided value}\n-     * If a float entry in the pool already describes this value, it is returned;\n-     * otherwise, a new entry is added and the new entry is returned.\n+     * {@return a {@link FloatEntry} describing the provided value}\n@@ -422,0 +461,1 @@\n+     * @see FloatEntry#floatValue() FloatEntry::floatValue\n@@ -426,3 +466,1 @@\n-     * {@return A {@link LongEntry} describing the provided value}\n-     * If a long entry in the pool already describes this value, it is returned;\n-     * otherwise, a new entry is added and the new entry is returned.\n+     * {@return a {@link LongEntry} describing the provided value}\n@@ -431,0 +469,1 @@\n+     * @see LongEntry#longValue() LongEntry::longValue\n@@ -435,3 +474,1 @@\n-     * {@return A {@link DoubleEntry} describing the provided value}\n-     * If a double entry in the pool already describes this value, it is returned;\n-     * otherwise, a new entry is added and the new entry is returned.\n+     * {@return a {@link DoubleEntry} describing the provided value}\n@@ -440,0 +477,1 @@\n+     * @see DoubleEntry#doubleValue() DoubleEntry::doubleValue\n@@ -444,3 +482,2 @@\n-     * {@return A {@link StringEntry} referencing the provided UTF8 entry}\n-     * If a String entry in the pool already describes this value, it is returned;\n-     * otherwise, a new entry is added and the new entry is returned.\n+     * {@return a {@link StringEntry} referring to a {@link Utf8Entry}}\n+     * The {@code Utf8Entry} describes the string value.\n@@ -448,1 +485,2 @@\n-     * @param utf8 the UTF8 entry describing the string\n+     * @param utf8 the {@code Utf8Entry}\n+     * @see StringEntry#utf8() StringEntry::utf8\n@@ -453,3 +491,1 @@\n-     * {@return A {@link StringEntry} describing the provided value}\n-     * If a string entry in the pool already describes this value, it is returned;\n-     * otherwise, a new entry is added and the new entry is returned.\n+     * {@return a {@link StringEntry} describing the provided value}\n@@ -458,0 +494,1 @@\n+     * @see StringEntry#stringValue() StringEntry::stringValue\n@@ -464,2 +501,3 @@\n-     * {@return A {@link ConstantValueEntry} describing the provided\n-     * Integer, Long, Float, Double, or String constant}\n+     * {@return a {@link ConstantValueEntry} describing the provided constant\n+     * {@link Integer}, {@link Long}, {@link Float}, {@link Double}, or {@link\n+     * String} value}\n@@ -467,2 +505,7 @@\n-     * @param c the constant\n-     * @see ConstantValueEntry#constantValue()\n+     * @param c the provided constant value\n+     * @throws IllegalArgumentException if the value is not one of {@code\n+     *         Integer}, {@code Long}, {@code Float}, {@code Double}, or {@code\n+     *         String}\n+     * @see ConstantValueEntry#constantValue() ConstantValueEntry::constantValue\n+     * @see ConstantValueAttribute#of(ConstantDesc)\n+     *      ConstantValueAttribute::of(ConstantDesc)\n@@ -480,5 +523,2 @@\n-     * {@return A {@link LoadableConstantEntry} describing the provided\n-     * constant}  The constant should be an Integer, String, Long, Float,\n-     * Double, ClassDesc (for a Class constant), MethodTypeDesc (for a MethodType\n-     * constant), DirectMethodHandleDesc (for a MethodHandle constant), or\n-     * a DynamicConstantDesc (for a dynamic constant.)\n+     * {@return a {@link LoadableConstantEntry} describing the provided constant\n+     * value}\n@@ -486,1 +526,1 @@\n-     * @param c the constant\n+     * @param c the nominal descriptor for the constant\n@@ -503,1 +543,1 @@\n-     * bootstrap method and static arguments}\n+     * bootstrap method and arguments}\n@@ -506,1 +546,1 @@\n-     * @param arguments the bootstrap arguments\n+     * @param arguments the arguments\n@@ -515,2 +555,4 @@\n-     * {@return a {@link BootstrapMethodEntry} describing the provided\n-     * bootstrap method and static arguments}\n+     * {@return a {@link BootstrapMethodEntry} referring to a {@link\n+     * MethodHandleEntry} and a list of {@link LoadableConstantEntry}}\n+     * The {@code MethodHandleEntry} is the bootstrap method, and the\n+     * list of {@code LoadableConstantEntry} is the arguments.\n@@ -518,2 +560,5 @@\n-     * @param methodReference the bootstrap method\n-     * @param arguments the bootstrap arguments\n+     * @param methodReference the {@code MethodHandleEntry}\n+     * @param arguments the list of {@code LoadableConstantEntry}\n+     * @see BootstrapMethodEntry#bootstrapMethod()\n+     *      BootstrapMethodEntry::bootstrapMethod\n+     * @see BootstrapMethodEntry#arguments() BootstrapMethodEntry::arguments\n","filename":"src\/java.base\/share\/classes\/java\/lang\/classfile\/constantpool\/ConstantPoolBuilder.java","additions":238,"deletions":193,"binary":false,"changes":431,"status":"modified"},{"patch":"@@ -30,1 +30,3 @@\n- * pool.\n+ * pool or the bootstrap method table.  This is also thrown when the lazy\n+ * evaluation of constant pool or bootstrap method table entries encounter\n+ * format errors.\n@@ -50,1 +52,2 @@\n-     * @param message the detail message.\n+     * @param message the detail message, may be {@code null} for no detail\n+     *                message\n@@ -58,5 +61,4 @@\n-     * a detail message of {@code (cause==null ? null : cause.toString())}.\n-     * @param cause the cause (which is saved for later retrieval by the\n-     *        {@link Throwable#getCause()} method).  (A {@code null} value is\n-     *        permitted, and indicates that the cause is nonexistent or\n-     *        unknown.)\n+     * a detail message of {@code cause == null ? null : cause.toString()}.\n+     *\n+     * @param cause the cause, may be {@code null} for nonexistent or unknown\n+     *              cause\n@@ -72,6 +74,4 @@\n-     * @param message the detail message (which is saved for later retrieval\n-     *        by the {@link Throwable#getMessage()} method).\n-     * @param cause the cause (which is saved for later retrieval by the\n-     *        {@link Throwable#getCause()} method).  (A {@code null} value\n-     *        is permitted, and indicates that the cause is nonexistent or\n-     *        unknown.)\n+     * @param message the detail message, may be {@code null} for no detail\n+     *                message\n+     * @param cause the cause, may be {@code null} for nonexistent or unknown\n+     *              cause\n","filename":"src\/java.base\/share\/classes\/java\/lang\/classfile\/constantpool\/ConstantPoolException.java","additions":13,"deletions":13,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -31,3 +31,2 @@\n- * Models a constant pool entry that can be used as the constant in a\n- * {@link Attributes#constantValue() ConstantValue} attribute; this includes the four\n- * primitive constant types and {@linkplain String} constants.\n+ * Marker interface for constant pool entries that can represent constant values\n+ * in the {@link Attributes#constantValue() ConstantValue} attribute.\n@@ -35,0 +34,2 @@\n+ * @see ConstantPoolBuilder#constantValueEntry\n+ *      ConstantPoolBuilder::constantValueEntry\n@@ -42,2 +43,2 @@\n-     * {@return the constant value}  The constant value will be an {@link Integer},\n-     * {@link Long}, {@link Float}, {@link Double}, or {@link String}.\n+     * {@return the constant value}  The constant value will be an {@link\n+     * Integer}, {@link Long}, {@link Float}, {@link Double}, or {@link String}.\n@@ -46,0 +47,1 @@\n+     *      ConstantPoolBuilder::constantValueEntry\n","filename":"src\/java.base\/share\/classes\/java\/lang\/classfile\/constantpool\/ConstantValueEntry.java","additions":7,"deletions":5,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -32,3 +32,15 @@\n- * Models a {@code CONSTANT_Double_info} constant in the constant pool of a\n- * classfile.\n- * @jvms 4.4.5 The CONSTANT_Long_info and CONSTANT_Double_info Structures\n+ * Models a {@code CONSTANT_Double_info} structure, representing a {@code\n+ * double} constant, in the constant pool of a {@code class} file.\n+ * <p>\n+ * Conceptually, a double entry is a record:\n+ * {@snippet lang=text :\n+ * \/\/ @link substring=\"DoubleEntry\" target=\"ConstantPoolBuilder#doubleEntry(double)\" :\n+ * DoubleEntry(double) \/\/ @link substring=\"double\" target=\"#doubleValue()\"\n+ * }\n+ * where all NaN values of the {@code double} may be collapsed into a single\n+ * \"canonical\" NaN value.\n+ * <p>\n+ * Physically, a double entry stores an arbitrary 8-byte value.\n+ * <p>\n+ * This constant has a {@linkplain #width() width} of {@code 2}, making its\n+ * subsequent constant pool index valid and unusable.\n@@ -36,0 +48,3 @@\n+ * @see ConstantPoolBuilder#doubleEntry ConstantPoolBuilder::doubleEntry\n+ * @jvms 4.4.5 The {@code CONSTANT_Long_info} and {@code CONSTANT_Double_info}\n+ *             Structures\n@@ -43,1 +58,4 @@\n-     * {@return the double value}\n+     * {@return the {@code double} value}\n+     *\n+     * @see ConstantPoolBuilder#doubleEntry(double)\n+     *      ConstantPoolBuilder::doubleEntry(double)\n@@ -47,3 +65,0 @@\n-    \/**\n-     * {@return the type of the constant}\n-     *\/\n","filename":"src\/java.base\/share\/classes\/java\/lang\/classfile\/constantpool\/DoubleEntry.java","additions":22,"deletions":7,"binary":false,"changes":29,"status":"modified"},{"patch":"@@ -30,3 +30,14 @@\n- * Models a dynamic constant pool entry, which is either {@link ConstantDynamicEntry}\n- * or {@link InvokeDynamicEntry}.\n- * @jvms 4.4.10 The CONSTANT_Dynamic_info and CONSTANT_InvokeDynamic_info Structures\n+ * Superinterface modeling dynamically-computed constant pool entries, which\n+ * include {@link ConstantDynamicEntry} and {@link InvokeDynamicEntry}, in the\n+ * constant pool of a {@code class} file.\n+ * <p>\n+ * Conceptually, dynamically-computed constant pool entries are not treated as\n+ * a single type.  The subtypes appear in distinct locations and serve distinct\n+ * purposes.  They resemble each other structurally and share parts of their\n+ * resolution processes.\n+ * <p>\n+ * Physically, a dynamically-computed constant pool entry is a record:\n+ * {@snippet lang=text :\n+ * \/\/ @link substring=\"BootstrapMethodEntry\" target=\"#bootstrap()\" :\n+ * DynamicConstantPoolEntry(BootstrapMethodEntry, NameAndTypeEntry) \/\/ @link substring=\"NameAndTypeEntry\" target=\"#nameAndType()\"\n+ * }\n@@ -34,0 +45,5 @@\n+ * @see java.lang.invoke##jvm_mods Dynamic resolution of call sites and\n+ *      constants\n+ * @jvms 4.4.10 The {@code CONSTANT_Dynamic_info} and {@code\n+ *              CONSTANT_InvokeDynamic_info} Structures\n+ * @jvms 5.4.3.6 Dynamically-Computed Constant and Call Site Resolution\n@@ -42,0 +58,6 @@\n+     *\n+     * @see java.lang.invoke##bsm Execution of bootstrap methods\n+     * @see ConstantPoolBuilder#constantDynamicEntry(BootstrapMethodEntry, NameAndTypeEntry)\n+     *      ConstantPoolBuilder::constantDynamicEntry(BootstrapMethodEntry, NameAndTypeEntry)\n+     * @see ConstantPoolBuilder#invokeDynamicEntry(BootstrapMethodEntry, NameAndTypeEntry)\n+     *      ConstantPoolBuilder::invokeDynamicEntry(BootstrapMethodEntry, NameAndTypeEntry)\n@@ -46,1 +68,3 @@\n-     * {@return index of the entry in the bootstrap method table for this constant}\n+     * {@return index of the entry in the bootstrap method table for this\n+     * constant}  The return value is equivalent to {@code\n+     * bootstrap().bsmIndex()}.\n@@ -51,1 +75,8 @@\n-     * {@return the invocation name and type}\n+     * {@return the name and the descriptor string indicated by this symbolic\n+     * reference}\n+     *\n+     * @see java.lang.invoke##bsm Execution of bootstrap methods\n+     * @see ConstantPoolBuilder#constantDynamicEntry(BootstrapMethodEntry, NameAndTypeEntry)\n+     *      ConstantPoolBuilder::constantDynamicEntry(BootstrapMethodEntry, NameAndTypeEntry)\n+     * @see ConstantPoolBuilder#invokeDynamicEntry(BootstrapMethodEntry, NameAndTypeEntry)\n+     *      ConstantPoolBuilder::invokeDynamicEntry(BootstrapMethodEntry, NameAndTypeEntry)\n@@ -56,1 +87,1 @@\n-     * {@return the invocation name}\n+     * {@return the name indicated by this symbolic reference}\n@@ -63,1 +94,8 @@\n-     * {@return the invocation type}\n+     * {@return the descriptor string indicated by this symbolic reference}\n+     * This is a field descriptor string if this entry is a {@link\n+     * ConstantDynamicEntry}, or a method descriptor string if this entry is a\n+     * {@link InvokeDynamicEntry}.\n+     *\n+     * @apiNote\n+     * Each subinterface has its specific accessor named {@code typeSymbol} for\n+     * the symbolic descriptor derived from this descriptor string.\n","filename":"src\/java.base\/share\/classes\/java\/lang\/classfile\/constantpool\/DynamicConstantPoolEntry.java","additions":45,"deletions":7,"binary":false,"changes":52,"status":"modified"},{"patch":"@@ -33,3 +33,23 @@\n- * Models a {@code CONSTANT_Fieldref_info} constant in the constant pool of a\n- * classfile.\n- * @jvms 4.4.2 The CONSTANT_Fieldref_info, CONSTANT_Methodref_info, and CONSTANT_InterfaceMethodref_info Structures\n+ * Models a {@code CONSTANT_Fieldref_info} structure, or a symbolic reference\n+ * to a field, in the constant pool of a {@code class} file.\n+ * <p>\n+ * Conceptually, a field reference entry is a record:\n+ * {@snippet lang=text :\n+ * \/\/ @link region=1 substring=\"FieldRefEntry\" target=\"ConstantPoolBuilder#fieldRefEntry(ClassDesc, String, ClassDesc)\"\n+ * \/\/ @link region=2 substring=\"ClassDesc owner\" target=\"#owner()\"\n+ * \/\/ @link substring=\"String name\" target=\"#name()\" :\n+ * FieldRefEntry(ClassDesc owner, String name, ClassDesc type) \/\/ @link substring=\"ClassDesc type\" target=\"#typeSymbol()\"\n+ * \/\/ @end region=1\n+ * \/\/ @end region=2\n+ * }\n+ * where the {@code ClassDesc owner} represents a class or interface.\n+ * <p>\n+ * Physically, a field reference entry is a record:\n+ * {@snippet lang=text :\n+ * \/\/ @link region=1 substring=\"FieldRefEntry\" target=\"ConstantPoolBuilder#fieldRefEntry(ClassEntry, NameAndTypeEntry)\"\n+ * \/\/ @link substring=\"ClassEntry owner\" target=\"#owner()\" :\n+ * FieldRefEntry(ClassEntry owner, NameAndTypeEntry) \/\/ @link substring=\"NameAndTypeEntry\" target=\"#nameAndType()\"\n+ * \/\/ @end region=1\n+ * }\n+ * where the type in the {@code NameAndTypeEntry} is a {@linkplain #typeSymbol()\n+ * field descriptor} string.\n@@ -37,0 +57,4 @@\n+ * @see ConstantPoolBuilder#fieldRefEntry ConstantPoolBuilder::fieldRefEntry\n+ * @jvms 4.4.2 The {@code CONSTANT_Fieldref_info}, {@code\n+ *             CONSTANT_Methodref_info}, and {@code\n+ *             CONSTANT_InterfaceMethodref_info} Structures\n@@ -43,1 +67,1 @@\n-     * {@return a symbolic descriptor for the field's type}\n+     * {@return a symbolic descriptor for the {@linkplain #type() field type}}\n","filename":"src\/java.base\/share\/classes\/java\/lang\/classfile\/constantpool\/FieldRefEntry.java","additions":28,"deletions":4,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -32,3 +32,12 @@\n- * Models a {@code CONSTANT_Float_info} constant in the constant pool of a\n- * classfile.\n- * @jvms 4.4.4 The CONSTANT_Integer_info and CONSTANT_Float_info Structures\n+ * Models a {@code CONSTANT_Float_info} structure, or a {@code float} constant,\n+ * in the constant pool of a {@code class} file.\n+ * <p>\n+ * Conceptually, a float entry is a record:\n+ * {@snippet lang=text :\n+ * \/\/ @link substring=\"FloatEntry\" target=\"ConstantPoolBuilder#floatEntry(float)\" :\n+ * FloatEntry(float) \/\/ @link substring=\"float\" target=\"#floatValue()\"\n+ * }\n+ * where all NaN values of the {@code float} may be collapsed into a single\n+ * \"canonical\" NaN value.\n+ * <p>\n+ * Physically, a float entry stores an arbitrary 4-byte value.\n@@ -36,0 +45,3 @@\n+ * @see ConstantPoolBuilder#floatEntry ConstantPoolBuilder::floatEntry\n+ * @jvms 4.4.4 The {@code CONSTANT_Integer_info} and {@code CONSTANT_Float_info}\n+ *             Structures\n@@ -43,1 +55,4 @@\n-     * {@return the float value}\n+     * {@return the {@code float} value}\n+     *\n+     * @see ConstantPoolBuilder#floatEntry(float)\n+     *      ConstantPoolBuilder::floatEntry(float)\n@@ -45,1 +60,0 @@\n-\n@@ -48,3 +62,0 @@\n-    \/**\n-     * {@return the type of the constant}\n-     *\/\n","filename":"src\/java.base\/share\/classes\/java\/lang\/classfile\/constantpool\/FloatEntry.java","additions":19,"deletions":8,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -32,3 +32,10 @@\n- * Models a {@code CONSTANT_Integer_info} constant in the constant pool of a\n- * classfile.\n- * @jvms 4.4.4 The CONSTANT_Integer_info and CONSTANT_Float_info Structures\n+ * Models a {@code CONSTANT_Integer_info} structure, or an {@code int} constant,\n+ * in the constant pool of a {@code class} file.\n+ * <p>\n+ * Conceptually, an integer entry is a record:\n+ * {@snippet lang=text :\n+ * \/\/ @link substring=\"IntegerEntry\" target=\"ConstantPoolBuilder#intEntry(int)\" :\n+ * IntegerEntry(int) \/\/ @link substring=\"int\" target=\"#intValue()\"\n+ * }\n+ * <p>\n+ * Physically, an integer entry stores an arbitrary 4-byte value.\n@@ -36,0 +43,3 @@\n+ * @see ConstantPoolBuilder#intEntry ConstantPoolBuilder::intEntry\n+ * @jvms 4.4.4 The {@code CONSTANT_Integer_info} and {@code CONSTANT_Float_info}\n+ *             Structures\n@@ -43,1 +53,3 @@\n-     * {@return the integer value}\n+     * {@return the {@code int} value}\n+     *\n+     * @see ConstantPoolBuilder#intEntry(int) ConstantPoolBuilder::intEntry(int)\n@@ -47,3 +59,0 @@\n-    \/**\n-     * {@return the type of the constant}\n-     *\/\n","filename":"src\/java.base\/share\/classes\/java\/lang\/classfile\/constantpool\/IntegerEntry.java","additions":16,"deletions":7,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -33,3 +33,24 @@\n- * Models a {@code CONSTANT_InterfaceMethodRef_info} constant in the constant pool of a\n- * classfile.\n- * @jvms 4.4.2 The CONSTANT_Fieldref_info, CONSTANT_Methodref_info, and CONSTANT_InterfaceMethodref_info Structures\n+ * Models a {@code CONSTANT_InterfaceMethodRef_info} structure, or a symbolic\n+ * reference to an interface method, in the constant pool of a {@code class}\n+ * file.\n+ * <p>\n+ * Conceptually, an interface method reference entry is a record:\n+ * {@snippet lang=text :\n+ * \/\/ @link region=1 substring=\"InterfaceMethodRefEntry\" target=\"ConstantPoolBuilder#interfaceMethodRefEntry(ClassDesc, String, MethodTypeDesc)\"\n+ * \/\/ @link region=2 substring=\"ClassDesc owner\" target=\"#owner()\"\n+ * \/\/ @link substring=\"String name\" target=\"#name()\" :\n+ * InterfaceMethodRefEntry(ClassDesc owner, String name, MethodTypeDesc type) \/\/ @link substring=\"MethodTypeDesc type\" target=\"#typeSymbol()\"\n+ * \/\/ @end region=1\n+ * \/\/ @end region=2\n+ * }\n+ * where the {@code ClassDesc owner} represents an interface.\n+ * <p>\n+ * Physically, an interface method reference entry is a record:\n+ * {@snippet lang=text :\n+ * \/\/ @link region=1 substring=\"InterfaceMethodRefEntry\" target=\"ConstantPoolBuilder#interfaceMethodRefEntry(ClassEntry, NameAndTypeEntry)\"\n+ * \/\/ @link substring=\"ClassEntry owner\" target=\"#owner()\" :\n+ * InterfaceMethodRefEntry(ClassEntry owner, NameAndTypeEntry) \/\/ @link substring=\"NameAndTypeEntry\" target=\"#nameAndType()\"\n+ * \/\/ @end region=1\n+ * }\n+ * where the type in the {@code NameAndTypeEntry} is a {@linkplain #typeSymbol()\n+ * method descriptor} string.\n@@ -37,0 +58,5 @@\n+ * @see ConstantPoolBuilder#interfaceMethodRefEntry\n+ *      ConstantPoolBuilder::interfaceMethodRefEntry\n+ * @jvms 4.4.2 The {@code CONSTANT_Fieldref_info}, {@code\n+ *             CONSTANT_Methodref_info}, and {@code\n+ *             CONSTANT_InterfaceMethodref_info} Structures\n@@ -44,1 +70,1 @@\n-     * {@return a symbolic descriptor for the interface method's type}\n+     * {@return a symbolic descriptor for the {@linkplain #type() method type}}\n","filename":"src\/java.base\/share\/classes\/java\/lang\/classfile\/constantpool\/InterfaceMethodRefEntry.java","additions":30,"deletions":4,"binary":false,"changes":34,"status":"modified"},{"patch":"@@ -35,2 +35,19 @@\n- * Models a constant pool entry for a dynamic call site.\n- * @jvms 4.4.10 The CONSTANT_Dynamic_info and CONSTANT_InvokeDynamic_info Structures\n+ * Models a {@code CONSTANT_InvokeDynamic_info} structure, or the symbolic\n+ * reference to a <dfn>{@index \"dynamically-computed call site\"}<\/dfn>, in the\n+ * constant pool of a {@code class} file.\n+ * <p>\n+ * Conceptually, an invoke dynamic entry is a record:\n+ * {@snippet lang=text :\n+ * \/\/ @link substring=\"InvokeDynamicEntry\" target=\"ConstantPoolBuilder#constantDynamicEntry(DynamicConstantDesc)\" :\n+ * InvokeDynamicEntry(DynamicCallSiteDesc) \/\/ @link substring=\"DynamicCallSiteDesc\" target=\"#asSymbol()\"\n+ * }\n+ * <p>\n+ * Physically, an invoke dynamic entry is a record:\n+ * {@snippet lang=text :\n+ * \/\/ @link region substring=\"InvokeDynamicEntry\" target=\"ConstantPoolBuilder#constantDynamicEntry(BootstrapMethodEntry, NameAndTypeEntry)\"\n+ * \/\/ @link substring=\"BootstrapMethodEntry\" target=\"#bootstrap()\"\n+ * InvokeDynamicEntry(BootstrapMethodEntry, NameAndTypeEntry) \/\/ @link substring=\"NameAndTypeEntry\" target=\"#nameAndType()\"\n+ * \/\/ @end\n+ * }\n+ * where the type in the {@code NameAndTypeEntry} is a {@linkplain #typeSymbol()\n+ * method descriptor} string.\n@@ -38,0 +55,9 @@\n+ * @apiNote\n+ * A dynamically-computed call site is frequently called a <dfn>{@index \"dynamic\n+ * call site\"}<\/dfn>, or an <dfn>{@index \"indy\"}<\/dfn>, from the abbreviation of\n+ * \"invoke dynamic\".\n+ *\n+ * @see ConstantPoolBuilder#invokeDynamicEntry\n+ *      ConstantPoolBuilder::invokeDynamicEntry\n+ * @jvms 4.4.10 The {@code CONSTANT_Dynamic_info} and {@code\n+ *              CONSTANT_InvokeDynamic_info} Structures\n@@ -45,1 +71,2 @@\n-     * {@return a symbolic descriptor for the call site's invocation type}\n+     * {@return a symbolic descriptor for the {@linkplain #type() invocation\n+     * type} of this dynamic call site}\n@@ -52,1 +79,4 @@\n-     * {@return a symbolic descriptor for the dynamic call site}\n+     * {@return a symbolic descriptor for this dynamic call site}\n+     *\n+     * @see ConstantPoolBuilder#invokeDynamicEntry(DynamicCallSiteDesc)\n+     *      ConstantPoolBuilder::invokeDynamicEntry(DynamicCallSiteDesc)\n","filename":"src\/java.base\/share\/classes\/java\/lang\/classfile\/constantpool\/InvokeDynamicEntry.java","additions":34,"deletions":4,"binary":false,"changes":38,"status":"modified"},{"patch":"@@ -27,0 +27,2 @@\n+import java.lang.classfile.CodeBuilder;\n+import java.lang.classfile.Opcode;\n@@ -28,0 +30,1 @@\n+import java.lang.classfile.instruction.ConstantInstruction;\n@@ -32,1 +35,1 @@\n- * {@code LDC} instructions.\n+ * {@link ConstantInstruction.LoadConstantInstruction ldc} instructions.\n@@ -34,0 +37,5 @@\n+ * @see CodeBuilder#ldc(LoadableConstantEntry)\n+ *      CodeBuilder::ldc(LoadableConstantEntry)\n+ * @see ConstantPoolBuilder#loadableConstantEntry\n+ *      ConstantPoolBuilder::loadableConstantEntry\n+ * @jvms 4.4 The Constant Pool\n@@ -41,1 +49,4 @@\n-     * {@return the constant described by this entry}\n+     * {@return a symbolic descriptor of this constant}\n+     *\n+     * @see ConstantPoolBuilder#loadableConstantEntry(ConstantDesc)\n+     *      ConstantPoolBuilder::loadableConstantEntry(ConstantDesc)\n@@ -46,1 +57,6 @@\n-     * {@return the type of the constant}\n+     * {@return the data type of this constant}\n+     * <p>\n+     * If the data type is of {@linkplain TypeKind#slotSize() category} 2, this\n+     * constant must be loaded with {@link Opcode#LDC2_W ldc2_w}; otherwise, the\n+     * data type is of category 1, and this constant must be loaded with {@link\n+     * Opcode#LDC ldc} or {@link Opcode#LDC_W ldc_w}.\n@@ -51,0 +67,14 @@\n+\n+    \/**\n+     * {@inheritDoc}\n+     *\n+     * @apiNote\n+     * The width of this entry does not decide if this entry should be loaded\n+     * with {@link Opcode#LDC ldc} or {@link Opcode#LDC2_W ldc2_w}.\n+     * For example, {@link ConstantDynamicEntry} always has width {@code 1}, but\n+     * it must be loaded with {@code ldc2_w} if its {@linkplain #typeKind()\n+     * type} is {@link TypeKind#LONG long} or {@link TypeKind#DOUBLE double}.\n+     * Use {@link #typeKind() typeKind().slotSize()} for this purpose instead.\n+     *\/\n+    @Override\n+    int width();\n","filename":"src\/java.base\/share\/classes\/java\/lang\/classfile\/constantpool\/LoadableConstantEntry.java","additions":33,"deletions":3,"binary":false,"changes":36,"status":"modified"},{"patch":"@@ -32,3 +32,13 @@\n- * Models a {@code CONSTANT_Long_info} constant in the constant pool of a\n- * classfile.\n- * @jvms 4.4.5 The CONSTANT_Long_info and CONSTANT_Double_info Structures\n+ * Models a {@code CONSTANT_Long_info} structure, or a {@code long} constant, in\n+ * the constant pool of a {@code class} file.\n+ * <p>\n+ * Conceptually, a long entry is a record:\n+ * {@snippet lang=text :\n+ * \/\/ @link substring=\"LongEntry\" target=\"ConstantPoolBuilder#longEntry(long)\" :\n+ * LongEntry(long) \/\/ @link substring=\"long\" target=\"#longValue()\"\n+ * }\n+ * <p>\n+ * Physically, a long entry stores an arbitrary 8-byte value.\n+ * <p>\n+ * This constant has a {@linkplain #width() width} of {@code 2}, making its\n+ * subsequent constant pool index valid and unusable.\n@@ -36,0 +46,3 @@\n+ * @see ConstantPoolBuilder#longEntry ConstantPoolBuilder::longEntry\n+ * @jvms 4.4.5 The {@code CONSTANT_Long_info} and {@code CONSTANT_Double_info}\n+ *             Structures\n@@ -43,1 +56,4 @@\n-     * {@return the long value}\n+     * {@return the {@code long} value}\n+     *\n+     * @see ConstantPoolBuilder#longEntry(long)\n+     *      ConstantPoolBuilder::longEntry(long)\n","filename":"src\/java.base\/share\/classes\/java\/lang\/classfile\/constantpool\/LongEntry.java","additions":20,"deletions":4,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -30,2 +30,14 @@\n- * Models a member reference constant in the constant pool of a classfile,\n- * which includes references to fields, methods, and interface methods.\n+ * Superinterface modeling symbolic references to a member of a class or interface\n+ * in the constant pool of a {@code class} file, which include references to\n+ * {@linkplain FieldRefEntry fields}, {@linkplain MethodRefEntry class methods},\n+ * and {@linkplain InterfaceMethodRefEntry interface methods}.\n+ * <p>\n+ * Conceptually, member reference entries are not treated as a single type.  The\n+ * subtypes appear in distinct locations and serve distinct purposes.  They\n+ * resemble each other structurally and share parts of the resolution processes.\n+ * <p>\n+ * Physically, a member reference entry is a record:\n+ * {@snippet lang=text :\n+ * \/\/ @link substring=\"ClassEntry owner\" target=\"#owner()\" :\n+ * MemberRefEntry(ClassEntry owner, NameAndTypeEntry) \/\/ @link substring=\"NameAndTypeEntry\" target=\"#nameAndType()\"\n+ * }\n@@ -33,0 +45,3 @@\n+ * @jvms 4.4.2 The {@code CONSTANT_Fieldref_info}, {@code\n+ *             CONSTANT_Methodref_info}, and {@code\n+ *             CONSTANT_InterfaceMethodref_info} Structures\n@@ -39,1 +54,5 @@\n-     * {@return the class in which this member ref lives}\n+     * {@return the class or interface which this member belongs to}\n+     *\n+     * @apiNote\n+     * A symbolic descriptor for the owner is available through {@link\n+     * ClassEntry#asSymbol() owner().asSymbol()}.\n@@ -44,1 +63,1 @@\n-     * {@return the name and type of the member}\n+     * {@return the name and descriptor string of the member}\n@@ -50,0 +69,4 @@\n+     *\n+     * @apiNote\n+     * A string value for the name is available through {@link\n+     * Utf8Entry#stringValue() name().stringValue()}.\n@@ -56,1 +79,8 @@\n-     * {@return the type of the member}\n+     * {@return the descriptor string of the member}  This is a field descriptor\n+     * string if this entry is a {@link FieldRefEntry}, or a method descriptor\n+     * string if this entry is a {@link MethodRefEntry} or {@link\n+     * InterfaceMethodRefEntry}.\n+     *\n+     * @apiNote\n+     * Each subinterface defines a {@code typeSymbol()} accessor for the\n+     * symbolic descriptor for the member type.\n","filename":"src\/java.base\/share\/classes\/java\/lang\/classfile\/constantpool\/MemberRefEntry.java","additions":35,"deletions":5,"binary":false,"changes":40,"status":"modified"},{"patch":"@@ -29,0 +29,2 @@\n+import java.lang.invoke.MethodHandle;\n+import java.lang.invoke.MethodHandleInfo;\n@@ -33,3 +35,22 @@\n- * Models a {@code CONSTANT_MethodHandle_info} constant in the constant pool of a\n- * classfile.\n- * @jvms 4.4.8 The CONSTANT_MethodHandle_info Structure\n+ * Models a {@code CONSTANT_MethodHandle_info} structure, or a symbolic\n+ * reference to a {@linkplain MethodHandle method handle}, in the constant pool\n+ * of a {@code class} file.\n+ * <p>\n+ * Conceptually, a method handle entry is a record:\n+ * {@snippet lang=text :\n+ * \/\/ @link substring=\"MethodHandleEntry\" target=\"ConstantPoolBuilder#methodHandleEntry(DirectMethodHandleDesc)\" :\n+ * MethodHandleEntry(DirectMethodHandleDesc) \/\/ @link substring=\"DirectMethodHandleDesc\" target=\"#typeSymbol()\"\n+ * }\n+ * <p>\n+ * Physically, a method handle entry is a record:\n+ * {@snippet lang=text :\n+ * \/\/ @link region=1 substring=\"MethodHandleEntry\" target=\"ConstantPoolBuilder#methodHandleEntry(int, MemberRefEntry)\"\n+ * \/\/ @link substring=\"int refKind\" target=\"#kind()\" :\n+ * MethodHandleEntry(int refKind, MemberRefEntry) \/\/ @link substring=\"MemberRefEntry\" target=\"#reference()\"\n+ * \/\/ @end region=1\n+ * }\n+ * where the {@code refKind} is in the range {@code [1, 9]}.\n+ *\n+ * @see ConstantPoolBuilder#methodHandleEntry\n+ *      ConstantPoolBuilder::methodHandleEntry\n+ * @jvms 4.4.8 The {@code CONSTANT_MethodHandle_info} Structure\n@@ -43,0 +64,5 @@\n+    \/**\n+     * {@inheritDoc}\n+     * <p>\n+     * This is equivalent to {@link #asSymbol() asSymbol()}.\n+     *\/\n@@ -50,1 +76,2 @@\n-     * @see java.lang.invoke.MethodHandleInfo\n+     *\n+     * @see MethodHandleInfo##refkinds Reference kinds\n@@ -55,1 +82,2 @@\n-     * {@return the constant pool entry describing the method}\n+     * {@return the constant pool entry describing the field or method,\n+     * according to the {@linkplain #kind() reference kind}}\n@@ -61,0 +89,3 @@\n+     *\n+     * @see ConstantPoolBuilder#methodHandleEntry(DirectMethodHandleDesc)\n+     *      ConstantPoolBuilder::methodHandleEntry(DirectMethodHandleDesc)\n","filename":"src\/java.base\/share\/classes\/java\/lang\/classfile\/constantpool\/MethodHandleEntry.java","additions":36,"deletions":5,"binary":false,"changes":41,"status":"modified"},{"patch":"@@ -33,3 +33,23 @@\n- * Models a {@code CONSTANT_MethodRef_info} constant in the constant pool of a\n- * classfile.\n- * @jvms 4.4.2 The CONSTANT_Fieldref_info, CONSTANT_Methodref_info, and CONSTANT_InterfaceMethodref_info Structures\n+ * Models a {@code CONSTANT_MethodRef_info} structure, or a symbolic reference\n+ * to a class method, in the constant pool of a {@code class} file.\n+ * <p>\n+ * Conceptually, a class method reference entry is a record:\n+ * {@snippet lang=text :\n+ * \/\/ @link region=1 substring=\"MethodRefEntry\" target=\"ConstantPoolBuilder#methodRefEntry(ClassDesc, String, MethodTypeDesc)\"\n+ * \/\/ @link region=2 substring=\"ClassDesc owner\" target=\"#owner()\"\n+ * \/\/ @link substring=\"String name\" target=\"#name()\" :\n+ * MethodRefEntry(ClassDesc owner, String name, MethodTypeDesc type) \/\/ @link substring=\"MethodTypeDesc type\" target=\"#typeSymbol()\"\n+ * \/\/ @end region=1\n+ * \/\/ @end region=2\n+ * }\n+ * where the {@code ClassDesc owner} represents a class.\n+ * <p>\n+ * Physically, a class method reference entry is a record:\n+ * {@snippet lang=text :\n+ * \/\/ @link region=1 substring=\"MethodRefEntry\" target=\"ConstantPoolBuilder#methodRefEntry(ClassEntry, NameAndTypeEntry)\"\n+ * \/\/ @link substring=\"ClassEntry owner\" target=\"#owner()\" :\n+ * MethodRefEntry(ClassEntry owner, NameAndTypeEntry) \/\/ @link substring=\"NameAndTypeEntry\" target=\"#nameAndType()\"\n+ * \/\/ @end region=1\n+ * }\n+ * where the type in the {@code NameAndTypeEntry} is a {@linkplain #typeSymbol()\n+ * method descriptor} string.\n@@ -37,0 +57,4 @@\n+ * @see ConstantPoolBuilder#methodRefEntry ConstantPoolBuilder::methodRefEntry\n+ * @jvms 4.4.2 The {@code CONSTANT_Fieldref_info}, {@code\n+ *             CONSTANT_Methodref_info}, and {@code\n+ *             CONSTANT_InterfaceMethodref_info} Structures\n@@ -43,1 +67,1 @@\n-     * {@return a symbolic descriptor for the method's type}\n+     * {@return a symbolic descriptor for the {@linkplain #type() method type}}\n","filename":"src\/java.base\/share\/classes\/java\/lang\/classfile\/constantpool\/MethodRefEntry.java","additions":28,"deletions":4,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -33,3 +33,16 @@\n- * Models a {@code CONSTANT_MethodType_info} constant in the constant pool of a\n- * classfile.\n- * @jvms 4.4.9 The CONSTANT_MethodType_info Structure\n+ * Models a {@code CONSTANT_MethodType_info} structure, or a symbolic reference\n+ * to a method type, in the constant pool of a {@code class} file.\n+ * <p>\n+ * Conceptually, a method type entry is a record:\n+ * {@snippet lang=text :\n+ * \/\/ @link substring=\"MethodTypeEntry\" target=\"ConstantPoolBuilder#methodTypeEntry(MethodTypeDesc)\" :\n+ * MethodTypeEntry(MethodTypeDesc) \/\/ @link substring=\"MethodTypeDesc\" target=\"#asSymbol()\"\n+ * }\n+ * <p>\n+ * Physically, a method type entry is a record:\n+ * {@snippet lang=text :\n+ * \/\/ @link substring=\"MethodTypeEntry\" target=\"ConstantPoolBuilder#methodTypeEntry(Utf8Entry)\" :\n+ * MethodTypeEntry(Utf8Entry) \/\/ @link substring=\"Utf8Entry\" target=\"#descriptor()\"\n+ * }\n+ * where the {@code Utf8Entry} is a {@linkplain #asSymbol() method descriptor}\n+ * string.\n@@ -37,0 +50,1 @@\n+ * @jvms 4.4.9 The {@code CONSTANT_MethodType_info} Structure\n@@ -43,0 +57,5 @@\n+    \/**\n+     * {@inheritDoc}\n+     * <p>\n+     * This is equivalent to {@link #asSymbol() asSymbol()}.\n+     *\/\n@@ -49,1 +68,1 @@\n-     * {@return the constant pool entry describing the method type}\n+     * {@return the {@linkplain #asSymbol() method descriptor} string}\n@@ -54,1 +73,2 @@\n-     * {@return a symbolic descriptor for the method type}\n+     * {@return a symbolic descriptor for the {@linkplain #descriptor() method\n+     * type}}\n","filename":"src\/java.base\/share\/classes\/java\/lang\/classfile\/constantpool\/MethodTypeEntry.java","additions":25,"deletions":5,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -32,3 +32,15 @@\n- * Models a {@code CONSTANT_Module_info} constant in the constant pool of a\n- * classfile.\n- * @jvms 4.4.11 The CONSTANT_Module_info Structure\n+ * Models a {@code CONSTANT_Module_info} structure, denoting a module, in the\n+ * constant pool of a {@code class} file.\n+ * <p>\n+ * Conceptually, a module entry is a record:\n+ * {@snippet lang=text :\n+ * \/\/ @link substring=\"ModuleEntry\" target=\"ConstantPoolBuilder#moduleEntry(ModuleDesc)\" :\n+ * ModuleEntry(ModuleDesc) \/\/ @link substring=\"ModuleDesc\" target=\"#asSymbol()\"\n+ * }\n+ * <p>\n+ * Physically, a module entry is a record:\n+ * {@snippet lang=text :\n+ * \/\/ @link substring=\"ModuleEntry\" target=\"ConstantPoolBuilder#moduleEntry(Utf8Entry)\" :\n+ * ModuleEntry(Utf8Entry) \/\/ @link substring=\"Utf8Entry\" target=\"#name()\"\n+ * }\n+ * where the {@code Utf8Entry} is a {@linkplain #asSymbol() module name}.\n@@ -36,0 +48,1 @@\n+ * @jvms 4.4.11 The {@code CONSTANT_Module_info} Structure\n@@ -41,1 +54,1 @@\n-     * {@return the name of the module}\n+     * {@return the name of the {@linkplain #asSymbol() module}}\n@@ -46,1 +59,1 @@\n-     * {@return a symbolic descriptor for the module}\n+     * {@return a symbolic descriptor for the {@linkplain #name() module name}}\n","filename":"src\/java.base\/share\/classes\/java\/lang\/classfile\/constantpool\/ModuleEntry.java","additions":18,"deletions":5,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -27,0 +27,2 @@\n+import java.lang.invoke.TypeDescriptor;\n+\n@@ -30,3 +32,25 @@\n- * Models a {@code CONSTANT_NameAndType_info} constant in the constant pool of a\n- * classfile.\n- * @jvms 4.4.6 The CONSTANT_NameAndType_info Structure\n+ * Models a {@code CONSTANT_NameAndType_info} structure, representing a field or\n+ * method, in the constant pool of a {@code class} file.\n+ * <p>\n+ * Conceptually, a name and type entry may be one of the following records:\n+ * {@snippet lang=text :\n+ * \/\/ @link region substring=\"NameAndTypeEntry\" target=\"ConstantPoolBuilder#nameAndTypeEntry(String, ClassDesc)\"\n+ * \/\/ @link substring=\"String\" target=\"#name()\" :\n+ * NameAndTypeEntry(String, ClassDesc) \/\/ @link substring=\"ClassDesc\" target=\"#type()\"\n+ * \/\/ @end\n+ * \/\/ @link region substring=\"NameAndTypeEntry\" target=\"ConstantPoolBuilder#nameAndTypeEntry(String, MethodTypeDesc)\"\n+ * \/\/ @link substring=\"String\" target=\"#name()\" :\n+ * NameAndTypeEntry(String, MethodTypeDesc) \/\/ @link substring=\"MethodTypeDesc\" target=\"#type()\"\n+ * \/\/ @end\n+ * }\n+ * where {@code String} is an unqualified name.\n+ * <p>\n+ * Physically, a name and type entry is a record:\n+ * {@snippet lang=text :\n+ * \/\/ @link region substring=\"NameAndTypeEntry\" target=\"ConstantPoolBuilder#nameAndTypeEntry(Utf8Entry, Utf8Entry)\"\n+ * \/\/ @link substring=\"Utf8Entry name\" target=\"#name()\" :\n+ * NameAndTypeEntry(Utf8Entry name, Utf8Entry type) \/\/ @link substring=\"Utf8Entry type\" target=\"#type()\"\n+ * \/\/ @end\n+ * }\n+ * where {@code Utf8Entry name} is an unqualified name, and {@code Utf8Entry\n+ * type} is a field or method descriptor string.\n@@ -34,0 +58,1 @@\n+ * @jvms 4.4.6 The {@code CONSTANT_NameAndType_info} Structure\n@@ -41,0 +66,4 @@\n+     *\n+     * @apiNote\n+     * A string value for the name is available through {@link\n+     * Utf8Entry#stringValue() name().stringValue()}.\n@@ -45,1 +74,4 @@\n-     * {@return the field or method descriptor}\n+     * {@return the field or method {@linkplain TypeDescriptor descriptor}\n+     * string}  It is a method descriptor strings if it starts with {@code (}.\n+     * Otherwise, it is a field descriptor string, and must start with one of\n+     * the {@code BCDFIJSZL[} characters.\n","filename":"src\/java.base\/share\/classes\/java\/lang\/classfile\/constantpool\/NameAndTypeEntry.java","additions":36,"deletions":4,"binary":false,"changes":40,"status":"modified"},{"patch":"@@ -32,3 +32,17 @@\n- * Models a {@code CONSTANT_Package_info} constant in the constant pool of a\n- * classfile.\n- * @jvms 4.4.12 The CONSTANT_Package_info Structure\n+ * Models a {@code CONSTANT_Package_info}, representing a package, in the\n+ * constant pool of a {@code class} file.\n+ * <p>\n+ * Conceptually, a package entry is a record:\n+ * {@snippet lang=text :\n+ * \/\/ @link substring=\"PackageEntry\" target=\"ConstantPoolBuilder#packageEntry(PackageDesc)\" :\n+ * PackageEntry(PackageDesc) \/\/ @link substring=\"PackageDesc\" target=\"#asSymbol()\"\n+ * }\n+ * where the {@code PackageDesc} must not be the unnamed package.\n+ * <p>\n+ * Physically, a package entry is a record:\n+ * {@snippet lang=text :\n+ * \/\/ @link substring=\"PackageEntry\" target=\"ConstantPoolBuilder#packageEntry(Utf8Entry)\" :\n+ * PackageEntry(Utf8Entry) \/\/ @link substring=\"Utf8Entry\" target=\"#name()\"\n+ * }\n+ * where the {@code Utf8Entry} is the {@linkplain ClassEntry##internal-name\n+ * internal form} of a binary package name and is not empty.\n@@ -36,0 +50,1 @@\n+ * @jvms 4.4.12 The {@code CONSTANT_Package_info} Structure\n@@ -41,1 +56,2 @@\n-     * {@return the package name}\n+     * {@return the {@linkplain ClassEntry##internal-name internal form} of the\n+     * {@linkplain #asSymbol() package} name}\n@@ -46,1 +62,1 @@\n-     * {@return a symbolic descriptor for the package name}\n+     * {@return a symbolic descriptor for the {@linkplain #name() package name}}\n","filename":"src\/java.base\/share\/classes\/java\/lang\/classfile\/constantpool\/PackageEntry.java","additions":21,"deletions":5,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -27,0 +27,3 @@\n+import java.lang.classfile.Attribute;\n+import java.lang.classfile.ClassFileBuilder;\n+\n@@ -28,1 +31,12 @@\n- * Models an entry in the constant pool of a classfile.\n+ * Models an entry in the constant pool of a {@code class} file.\n+ *\n+ * @implNote\n+ * <h2 id=\"unbound\">Unbound constant pool entries<\/h2>\n+ * Implementations may create unbound constant pool entries not belonging to\n+ * an actual constant pool.  They are convenient to represent constant pool\n+ * entries referred by unbound {@linkplain Attribute attributes}.  Their\n+ * {@link #constantPool() constantPool()} returns a dummy constant pool that\n+ * throws {@link UnsupportedOperationException} upon queries, their {@link\n+ * #index() index()} return a non-positive invalid value, and they will always\n+ * be converted by the {@linkplain ClassFileBuilder#constantPool() contextual\n+ * constant pool} when they are written to {@code class} files.\n@@ -30,0 +44,1 @@\n+ * @see ConstantPoolBuilder##adoption Non-directly-writable constant pool entries\n@@ -91,0 +106,8 @@\n+     *\n+     * @apiNote\n+     * Given a {@link ConstantPoolBuilder} {@code builder} and a {@code\n+     * PoolEntry} {@code entry}, use {@link ConstantPoolBuilder#canWriteDirect\n+     * builder.canWriteDirect(entry.constantPool())} instead of object equality\n+     * of the constant pool to determine if an entry is compatible.\n+     *\n+     * @see ##unbound Unbound constant pool entries\n@@ -105,0 +128,4 @@\n+     * A valid index is always positive; if the index is non-positive, this\n+     * entry is {@linkplain ##unbound unbound}.\n+     *\n+     * @see ##unbound Unbound constant pool entries\n@@ -110,0 +137,7 @@\n+     * <p>\n+     * All pool entries except {@link LongEntry CONSTANT_Long} and {@link\n+     * DoubleEntry CONSTANT_Double} have width {@code 1}. These two exceptions\n+     * have width {@code 2}, and their subsequent indices at {@link #index()\n+     * index() + 1} are considered unusable.\n+     *\n+     * @see ConstantPool##index Index in the Constant Pool\n","filename":"src\/java.base\/share\/classes\/java\/lang\/classfile\/constantpool\/PoolEntry.java","additions":35,"deletions":1,"binary":false,"changes":36,"status":"modified"},{"patch":"@@ -30,3 +30,14 @@\n- * Models a {@code CONSTANT_String_info} constant in the constant pool of a\n- * classfile.\n- * @jvms 4.4.3 The CONSTANT_String_info Structure\n+ * Models a {@code CONSTANT_String_info} structure, or a string constant, in the\n+ * constant pool of a {@code class} file.\n+ * <p>\n+ * Conceptually, a string entry is a record:\n+ * {@snippet lang=text :\n+ * \/\/ @link substring=\"StringEntry\" target=\"ConstantPoolBuilder#stringEntry(String)\" :\n+ * StringEntry(String) \/\/ @link regex=\"String(?=[)])\" target=\"#stringValue()\"\n+ * }\n+ * <p>\n+ * Physically, a string entry is a record:\n+ * {@snippet lang=text :\n+ * \/\/ @link substring=\"StringEntry\" target=\"ConstantPoolBuilder#stringEntry(Utf8Entry)\" :\n+ * StringEntry(Utf8Entry) \/\/ @link substring=\"Utf8Entry\" target=\"#utf8()\"\n+ * }\n@@ -34,0 +45,1 @@\n+ * @jvms 4.4.3 The {@code CONSTANT_String_info} Structure\n@@ -41,0 +53,3 @@\n+     *\n+     * @see ConstantPoolBuilder#stringEntry(Utf8Entry)\n+     *      ConstantPoolBuilder::stringEntry(Utf8Entry)\n@@ -46,0 +61,3 @@\n+     *\n+     * @see ConstantPoolBuilder#stringEntry(String)\n+     *      ConstantPoolBuilder::stringEntry(String)\n","filename":"src\/java.base\/share\/classes\/java\/lang\/classfile\/constantpool\/StringEntry.java","additions":21,"deletions":3,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -27,0 +27,2 @@\n+import java.io.DataInput;\n+\n@@ -30,3 +32,15 @@\n- * Models a {@code CONSTANT_UTF8_info} constant in the constant pool of a\n- * classfile.\n- * @jvms 4.4.7 The CONSTANT_Utf8_info Structure\n+ * Models a {@code CONSTANT_UTF8_info} constant, representing strings, in the\n+ * constant pool of a {@code class} file.  This describes strings in the\n+ * {@linkplain DataInput##modified-utf-8 Modified UTF-8} format.\n+ * <p>\n+ * Conceptually, a UTF8 entry is a record:\n+ * {@snippet lang=text :\n+ * \/\/ @link substring=\"Utf8Entry\" target=\"ConstantPoolBuilder#utf8Entry(String)\" :\n+ * Utf8Entry(String) \/\/ @link substring=\"String\" target=\"#stringValue()\"\n+ * }\n+ * where the encoded data length must be no more than 65535 bytes.\n+ * <p>\n+ * Physically, a UTF8 entry is of flexible length: it is represented as an array\n+ * structure, with an {@code u2} for the data length in bytes, followed by that\n+ * number of bytes of Modified UTF-8 data.  It can represent at most 65535 bytes\n+ * of data due to the physical restrictions.\n@@ -34,0 +48,2 @@\n+ * @jvms 4.4.7 The {@code CONSTANT_Utf8_info} Structure\n+ * @see DataInput##modified-utf-8 Modified UTF-8\n@@ -42,0 +58,2 @@\n+     *\n+     * @see ConstantPoolBuilder#utf8Entry(String) ConstantPoolBuilder::utf8Entry\n","filename":"src\/java.base\/share\/classes\/java\/lang\/classfile\/constantpool\/Utf8Entry.java","additions":21,"deletions":3,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n- * <h2>Provides interfaces describing classfile constant pool entries for the {@link java.lang.classfile} library.<\/h2>\n+ * <h2>Provides interfaces describing constant pool entries for the {@link java.lang.classfile} library.<\/h2>\n@@ -29,1 +29,7 @@\n- * The {@code java.lang.classfile.constantpool} package contains interfaces describing classfile constant pool entries.\n+ * The {@code java.lang.classfile.constantpool} package contains interfaces describing constant pool entries in the\n+ * {@code class} file format.  Constant pool entries are low-level models to faithfully represent the exact structure\n+ * of a {@code class} file.\n+ * <p>\n+ * Unless otherwise specified, passing {@code null} or an array or collection containing a {@code null} element as an\n+ * argument to a constructor or method of any Class-File API class or interface will cause a {@link NullPointerException}\n+ * to be thrown.\n@@ -31,0 +37,37 @@\n+ * <h2 id=\"reading\">Reading the constant pool entries<\/h2>\n+ * When read from {@code class} files, the pool entries are lazily inflated; the contents of these entries, besides the\n+ * bare structure, are not evaluated to speed up parsing.  Entries to users interest, usually accessed from other models\n+ * and elements, have their contents read on demand.  For example, to search for methods, a user should filter first by\n+ * access flags and then by method name, and use {@link Utf8Entry#equalsString(String) Utf8Entry::equalsString} instead\n+ * of checking equality with the string value.  This avoids inflation of UTF-8 entries as much as possible:\n+ * {@snippet lang=\"java\" class=\"PackageSnippets\" region=\"isStaticWorkMethod\"}\n+ * <p>\n+ * The entries also define accessors to validated symbolic information with nominal descriptor abstractions from the\n+ * {@link java.lang.constant} package.  These symbolic information accessors perform validation against the read\n+ * {@code class} files, and throw {@link IllegalArgumentException} when the accessed constant pool entry contains\n+ * invalid data.  The nominal descriptors represent validated data, which saves users from extra validations in future\n+ * processing.\n+ * <p>\n+ * Due to the lazy nature of {@code class} file parsing, {@link IllegalArgumentException} indicating malformed\n+ * {@code class} file data can be thrown at any method invocation.  For example, an exception may come from a {@link\n+ * ClassEntry} when it is first read from the constant pool (referring to an illegal entry), when its referred Utf8\n+ * entry is expanded (malformed Utf8 data), or when its symbolic information is accessed (the string is not valid).\n+ *\n+ * <h2 id=\"writing\">Writing the constant pool entries<\/h2>\n+ * In general, users do not need to worry about working with the constant pool and its entries when writing {@code\n+ * class} files.  Most Class-File API models and elements have two sets of factory methods: one that accepts symbolic\n+ * information, and another that accepts physical constant pool entries.  The constant pool builder associated with\n+ * {@code class} file builders, {@link ClassFileBuilder#constantPool ClassFileBuilder::constantPool}, automatically\n+ * creates or reuses pool entries from the symbolic information.  Validated data in symbolic information helps {@code\n+ * class} file generation by avoiding extraneous parsing of raw constant pool entry data.\n+ * <p>\n+ * As always, users can use factories that accept constant pool entries if they already have them by hand, or if they\n+ * desire fine-grained control over {@code class} file generation.\n+ * <p>\n+ * If many models and elements are reused from another {@link ClassModel} in class building, the class building process\n+ * can use a constant pool builder that extends from the given {@code ClassModel}, available through {@link\n+ * ConstantPoolBuilder#of(ClassModel) ConstantPoolBuilder::of(ClassModel)}, so that byte data with constant pool\n+ * references can be copied in batch, speeding up class building.  This is especially applicable to class transformations,\n+ * and {@link ClassFile.ConstantPoolSharingOption ConstantPoolSharingOption} exists to control this behavior.\n+ *\n+ * @jvms 4.4 The Constant Pool\n@@ -35,0 +78,4 @@\n+import java.lang.classfile.ClassFile;\n+import java.lang.classfile.ClassFileBuilder;\n+import java.lang.classfile.ClassModel;\n+import java.lang.classfile.MethodModel;\n","filename":"src\/java.base\/share\/classes\/java\/lang\/classfile\/constantpool\/package-info.java","additions":49,"deletions":2,"binary":false,"changes":51,"status":"modified"},{"patch":"@@ -0,0 +1,43 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package java.lang.classfile.constantpool.snippet;\n+\n+import java.lang.classfile.ClassFile;\n+import java.lang.classfile.MethodModel;\n+import java.lang.classfile.constantpool.Utf8Entry;\n+\n+class PackageSnippets {\n+\n+    \/\/ @start region=isStaticWorkMethod\n+    boolean isStaticWorkMethod(MethodModel method) {\n+        \/\/ check static flag first to avoid unnecessary evaluation of UTF-8 entry\n+        return (method.flags().flagsMask() & ClassFile.ACC_STATIC) != 0\n+                \/\/ use equalsString to avoid full conversion to String for comparison\n+                \/\/ the Utf8Entry can also act as a basic CharSequence without full conversion\n+                \/\/ @link substring=\"methodName\" target=\"MethodModel#methodName\" :\n+                && method.methodName().equalsString(\"work\"); \/\/ @link substring=\"equalsString\" target=\"Utf8Entry#equalsString\"\n+    }\n+    \/\/ @end\n+}\n","filename":"src\/java.base\/share\/classes\/java\/lang\/classfile\/constantpool\/snippet-files\/PackageSnippets.java","additions":43,"deletions":0,"binary":false,"changes":43,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2023, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -44,1 +44,3 @@\n-        \"src\/java.base\/share\/classes\/java\/lang\/classfile\/components\/snippet-files\/PackageSnippets.java\"})\n+        \"src\/java.base\/share\/classes\/java\/lang\/classfile\/components\/snippet-files\/PackageSnippets.java\",\n+        \"src\/java.base\/share\/classes\/java\/lang\/classfile\/constantpool\/snippet-files\/PackageSnippets.java\",\n+    })\n","filename":"test\/jdk\/jdk\/classfile\/SnippetsTest.java","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"}]}