{"files":[{"patch":"@@ -43,0 +43,2 @@\n+import java.util.concurrent.CountDownLatch;\n+import java.util.concurrent.TimeUnit;\n@@ -62,0 +64,1 @@\n+    private final CountDownLatch serverLatch;\n@@ -71,1 +74,2 @@\n-        serverReadTimeout = (int) (5000 * timeoutFactor);\n+        serverReadTimeout = (int) (30000 * timeoutFactor);\n+        serverLatch = new CountDownLatch(1);\n@@ -103,0 +107,1 @@\n+                serverLatch.countDown();\n@@ -169,3 +174,4 @@\n-                    \/\/ Give server a chance to read before we shutdown via\n-                    \/\/ the try-with-resources block.\n-                    Thread.sleep(serverReadTimeout);\n+                    if (!serverLatch.await(serverReadTimeout,\n+                                           TimeUnit.MILLISECONDS)) {\n+                        log(\"Client: server thread not done yet, timing out\");\n+                    }\n","filename":"test\/jdk\/sun\/security\/ssl\/SSLCipher\/SSLSocketNoServerHelloClientShutdown.java","additions":10,"deletions":4,"binary":false,"changes":14,"status":"modified"}]}