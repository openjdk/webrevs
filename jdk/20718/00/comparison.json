{"files":[{"patch":"@@ -426,0 +426,2 @@\n+                 ||\n+                 isCurrentlyResolvingPermitting(env) && ((JCClassDecl) env.tree).sym == sym.owner\n@@ -461,0 +463,16 @@\n+\n+    \/\/ it's a bit hacky, but basically if we are currently resolving symbol inside permitting block\n+    \/\/ then at least one symbol in permitting block should be unresolved,\n+    \/\/ while extending and implementing should be resolved\n+    private boolean isCurrentlyResolvingPermitting(Env<AttrContext> env) {\n+        return env.tree instanceof JCClassDecl classDecl\n+            && classDecl.permitting.stream().anyMatch(permitting -> !symNotNull(permitting))\n+            && (classDecl.extending == null || symNotNull(classDecl.extending))\n+            && classDecl.implementing.stream().allMatch(this::symNotNull);\n+    }\n+\n+    private boolean symNotNull(JCTree tree) {\n+        return tree instanceof JCFieldAccess fieldAccess && fieldAccess.sym != null\n+            || tree instanceof JCIdent ident && ident.sym != null;\n+    }\n+\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/comp\/Resolve.java","additions":18,"deletions":0,"binary":false,"changes":18,"status":"modified"}]}