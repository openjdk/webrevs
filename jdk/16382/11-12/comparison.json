{"files":[{"patch":"@@ -4252,1 +4252,1 @@\n-  feq_s(t0, src, src); \/\/ replacing fclass with feq as performance optimization for SiFive\n+  feq_s(t0, src, src); \/\/ replacing fclass with feq as performance optimization\n@@ -4257,1 +4257,10 @@\n-  fadd_s(ftmp, src, ftmp, RoundingMode::rdn); \/\/ RDN is required here otherwise some inputs produce incorrect results\n+  \/\/   Adding 0.5f to some floats exceeds the precision limits for a float and rounding takes place.\n+  \/\/   RDN is required for fadd_s, RNE gives incorrect results:\n+  \/\/     --------------------------------------------------------------------\n+  \/\/     fadd.s rne (src + 0.5f): src = 8388609.000000  ftmp = 8388610.000000\n+  \/\/     fcvt.w.s rdn: ftmp = 8388610.000000 dst = 8388610\n+  \/\/     --------------------------------------------------------------------\n+  \/\/     fadd.s rdn (src + 0.5f): src = 8388609.000000  ftmp = 8388609.000000\n+  \/\/     fcvt.w.s rdn: ftmp = 8388609.000000 dst = 8388609\n+  \/\/     --------------------------------------------------------------------\n+  fadd_s(ftmp, src, ftmp, RoundingMode::rdn);\n@@ -4273,1 +4282,1 @@\n-  feq_d(t0, src, src); \/\/ replacing fclass with feq as performance optimization for SiFive\n+  feq_d(t0, src, src); \/\/ replacing fclass with feq as performance optimization\n","filename":"src\/hotspot\/cpu\/riscv\/macroAssembler_riscv.cpp","additions":12,"deletions":3,"binary":false,"changes":15,"status":"modified"}]}