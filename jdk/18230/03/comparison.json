{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2012, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2012, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,0 +37,1 @@\n+#include \"utilities\/macros.hpp\"\n@@ -288,1 +289,3 @@\n-  \/\/ Test accessing the committed area.\n+  \/\/ Test accessing the committed area. But not for ASAN. We don't know which portions\n+  \/\/ of the chunk are still poisoned.\n+#if !INCLUDE_ASAN\n@@ -297,0 +300,1 @@\n+#endif \/\/ !INCLUDE_ASAN\n","filename":"src\/hotspot\/share\/memory\/metaspace\/metachunk.cpp","additions":6,"deletions":2,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -51,0 +51,1 @@\n+#include \"utilities\/macros.hpp\"\n@@ -436,0 +437,3 @@\n+  \/\/ Down here, from ASAN's view, this memory may be poisoned, since we only unpoison\n+  \/\/ way up at the ChunkManager level.\n+#if !INCLUDE_ASAN\n@@ -443,0 +447,1 @@\n+#endif \/\/ !INCLUDE_ASAN\n","filename":"src\/hotspot\/share\/memory\/metaspace\/virtualSpaceNode.cpp","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -638,0 +638,6 @@\n+#ifdef ADDRESS_SANITIZER\n+#define INCLUDE_ASAN 1\n+#else\n+#define INCLUDE_ASAN 0\n+#endif\n+\n","filename":"src\/hotspot\/share\/utilities\/macros.hpp","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -37,0 +37,1 @@\n+#include \"utilities\/macros.hpp\"\n@@ -159,0 +160,5 @@\n+      \/\/ At the VirtualSpaceNode level, all memory is still poisoned.\n+      \/\/ Since we bypass the normal way of allocating chunks (ChunkManager::get_chunk), we\n+      \/\/ need to unpoison this chunk.\n+      ASAN_UNPOISON_MEMORY_REGION(c->base(), c->committed_words() * BytesPerWord);\n+\n","filename":"test\/hotspot\/gtest\/metaspace\/test_virtualspacenode.cpp","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"}]}