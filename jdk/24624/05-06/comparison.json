{"files":[{"patch":"@@ -38,1 +38,0 @@\n- * @library \/javax\/swing\/regtesthelpers\n@@ -46,2 +45,0 @@\n-    private static Point comboBoxLocation;\n-    private static Dimension comboBoxSize;\n@@ -52,15 +49,3 @@\n-        robot = new Robot();\n-        SwingUtilities.invokeAndWait(() -> {\n-            frame = new JFrame(\"ComboPopup\");\n-\n-            comboBox = new JComboBox<>();\n-            comboBox.setEditable(true);\n-            comboBox.addItem(\"test\");\n-            comboBox.addItem(\"test2\");\n-            comboBox.addItem(\"test3\");\n-\n-            closeButton = new JButton(\"Close\");\n-            closeButton.addActionListener((e) -> {\n-                clickComboBox();\n-                frame.setVisible(false);\n-            });\n+        try {\n+            robot = new Robot();\n+            robot.setAutoDelay(50);\n@@ -68,5 +53,1 @@\n-            frame.getContentPane().add(comboBox, \"North\");\n-            frame.getContentPane().add(closeButton, \"South\");\n-            frame.setSize(200, 200);\n-            frame.setVisible(true);\n-        });\n+            SwingUtilities.invokeAndWait(ComboPopupBug::createUI);\n@@ -74,2 +55,2 @@\n-        robot.waitForIdle();\n-        robot.delay(1000);\n+            robot.waitForIdle();\n+            robot.delay(1000);\n@@ -77,1 +58,0 @@\n-        try {\n@@ -80,1 +60,3 @@\n-            SwingUtilities.invokeAndWait(() -> frame.dispose());\n+            if (frame != null) {\n+                SwingUtilities.invokeAndWait(() -> frame.dispose());\n+            }\n@@ -85,2 +67,2 @@\n-        comboBoxLocation = comboBox.getLocationOnScreen();\n-        comboBoxSize = comboBox.getSize();\n+        Point comboBoxLocation = comboBox.getLocationOnScreen();\n+        Dimension comboBoxSize = comboBox.getSize();\n@@ -93,0 +75,22 @@\n+\n+    private static void createUI() {\n+        frame = new JFrame(\"ComboPopup\");\n+\n+        comboBox = new JComboBox<>();\n+        comboBox.setEditable(true);\n+        comboBox.addItem(\"test\");\n+        comboBox.addItem(\"test2\");\n+        comboBox.addItem(\"test3\");\n+\n+        closeButton = new JButton(\"Close\");\n+        closeButton.addActionListener((e) -> {\n+            clickComboBox();\n+            frame.setVisible(false);\n+        });\n+\n+        frame.getContentPane().add(comboBox, \"North\");\n+        frame.getContentPane().add(closeButton, \"South\");\n+        frame.setSize(200, 200);\n+        frame.setLocationRelativeTo(null);\n+        frame.setVisible(true);\n+    }\n","filename":"test\/jdk\/javax\/swing\/JComboBox\/ComboPopupBug.java","additions":33,"deletions":29,"binary":false,"changes":62,"status":"modified"}]}