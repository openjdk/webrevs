{"files":[{"patch":"@@ -67,27 +67,0 @@\n-int C2HandleAnonOMOwnerStub::max_size() const {\n-  \/\/ Max size of stub has been determined by testing with 0, in which case\n-  \/\/ C2CodeStubList::emit() will throw an assertion and report the actual size that\n-  \/\/ is needed.\n-  return 24;\n-}\n-\n-void C2HandleAnonOMOwnerStub::emit(C2_MacroAssembler& masm) {\n-  __ bind(entry());\n-  Register mon = monitor();\n-  Register t = tmp();\n-  assert(t != noreg, \"need tmp register\");\n-\n-  \/\/ Fix owner to be the current thread.\n-  __ str(rthread, Address(mon, ObjectMonitor::owner_offset()));\n-\n-  \/\/ Pop owner object from lock-stack.\n-  __ ldrw(t, Address(rthread, JavaThread::lock_stack_top_offset()));\n-  __ subw(t, t, oopSize);\n-#ifdef ASSERT\n-  __ str(zr, Address(rthread, t));\n-#endif\n-  __ strw(t, Address(rthread, JavaThread::lock_stack_top_offset()));\n-\n-  __ b(continuation());\n-}\n-\n","filename":"src\/hotspot\/cpu\/aarch64\/c2_CodeStubs_aarch64.cpp","additions":0,"deletions":27,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -74,28 +74,0 @@\n-int C2HandleAnonOMOwnerStub::max_size() const {\n-  \/\/ Max size of stub has been determined by testing with 0 without using RISC-V compressed\n-  \/\/ instruction-set extension, in which case C2CodeStubList::emit() will throw an assertion\n-  \/\/ and report the actual size that is needed.\n-  return 20 DEBUG_ONLY(+8);\n-}\n-\n-void C2HandleAnonOMOwnerStub::emit(C2_MacroAssembler& masm) {\n-  __ bind(entry());\n-  Register mon = monitor();\n-  Register t = tmp();\n-  assert(t != noreg, \"need tmp register\");\n-\n-  \/\/ Fix owner to be the current thread.\n-  __ sd(xthread, Address(mon, ObjectMonitor::owner_offset()));\n-\n-  \/\/ Pop owner object from lock-stack.\n-  __ lwu(t, Address(xthread, JavaThread::lock_stack_top_offset()));\n-  __ subw(t, t, oopSize);\n-#ifdef ASSERT\n-  __ add(t0, xthread, t);\n-  __ sd(zr, Address(t0, 0));\n-#endif\n-  __ sw(t, Address(xthread, JavaThread::lock_stack_top_offset()));\n-\n-  __ j(continuation());\n-}\n-\n","filename":"src\/hotspot\/cpu\/riscv\/c2_CodeStubs_riscv.cpp","additions":0,"deletions":28,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -120,15 +120,0 @@\n-#ifdef _LP64\n-class C2HandleAnonOMOwnerStub : public C2CodeStub {\n-private:\n-  Register _monitor;\n-  Register _tmp;\n-public:\n-  C2HandleAnonOMOwnerStub(Register monitor, Register tmp = noreg) : C2CodeStub(),\n-    _monitor(monitor), _tmp(tmp) {}\n-  Register monitor() { return _monitor; }\n-  Register tmp() { return _tmp; }\n-  int max_size() const;\n-  void emit(C2_MacroAssembler& masm);\n-};\n-#endif\n-\n","filename":"src\/hotspot\/share\/opto\/c2_CodeStubs.hpp","additions":0,"deletions":15,"binary":false,"changes":15,"status":"modified"}]}