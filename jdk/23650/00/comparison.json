{"files":[{"patch":"@@ -176,0 +176,1 @@\n+            values.add(LintCategory.PROPRIETARY);\n@@ -318,0 +319,5 @@\n+        \/**\n+         * Warn about use of internal proprietary API's.\n+         *\/\n+        PROPRIETARY(\"proprietary\"),\n+\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/code\/Lint.java","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -168,0 +168,1 @@\n+        boolean verboseProprietary = lint.isEnabled(LintCategory.PROPRIETARY);\n@@ -176,0 +177,2 @@\n+        proprietaryHandler = new MandatoryWarningHandler(log, null, verboseProprietary,\n+                enforceMandatoryWarnings, LintCategory.PROPRIETARY);\n@@ -205,0 +208,4 @@\n+    \/** A handler for messages about use of internal proprietary API's.\n+     *\/\n+    private MandatoryWarningHandler proprietaryHandler;\n+\n@@ -259,0 +266,9 @@\n+    \/** Warn about use of an internal proprietary API.\n+     *  @param pos        Position to be used for error reporting.\n+     *  @param sym        The proprietary API symbol.\n+     *\/\n+    void warnProprietary(DiagnosticPosition pos, Symbol sym) {\n+        if (!lint.isSuppressed(LintCategory.PROPRIETARY))\n+            proprietaryHandler.report(pos, LintWarnings.SunProprietary(sym));\n+    }\n+\n@@ -301,0 +317,1 @@\n+        proprietaryHandler.reportDeferredDiagnostic();\n@@ -476,0 +493,1 @@\n+        proprietaryHandler.clear();\n@@ -3786,3 +3804,1 @@\n-            deferredLintHandler.report(_l -> {\n-                log.mandatoryWarning(pos, Warnings.SunProprietary(s));\n-            });\n+            deferredLintHandler.report(_l -> warnProprietary(pos, s));\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/comp\/Check.java","additions":19,"deletions":3,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -1775,0 +1775,18 @@\n+# 0: file name\n+compiler.note.proprietary.filename=\\\n+    {0} uses an internal proprietary API that may be removed in a future release\n+\n+compiler.note.proprietary.plural=\\\n+    Some input files use an internal proprietary API that may be removed in a future release\n+\n+# The following string may appear after one of the above proprietary messages.\n+compiler.note.proprietary.recompile=\\\n+    Recompile with -Xlint:proprietary for details.\n+\n+# 0: file name\n+compiler.note.proprietary.filename.additional=\\\n+    {0} has additional uses of an internal proprietary API that may be removed in a future release\n+\n+compiler.note.proprietary.plural.additional=\\\n+    Some input files additionally use an internal proprietary API that may be removed in a future release\n+\n@@ -1963,0 +1981,1 @@\n+# lint: proprietary\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/resources\/compiler.properties","additions":19,"deletions":0,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 1999, 2024, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 1999, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -250,0 +250,3 @@\n+javac.opt.Xlint.desc.proprietary=\\\n+    Warn about use of internal proprietary APIs.\n+\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/resources\/javac.properties","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,1 +26,1 @@\n-class SunProprietary {\n+class Proprietary {\n","filename":"test\/langtools\/tools\/javac\/diags\/examples\/Proprietary.java","additions":2,"deletions":2,"binary":false,"changes":4,"previous_filename":"test\/langtools\/tools\/javac\/diags\/examples\/SunProprietary.java","status":"copied"},{"patch":"@@ -0,0 +1,30 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/\/ key: compiler.note.proprietary.filename\n+\/\/ key: compiler.note.proprietary.recompile\n+\/\/ options: -Xlint:-proprietary\n+\n+class ProprietaryFilename {\n+    sun.misc.Unsafe x;\n+}\n","filename":"test\/langtools\/tools\/javac\/diags\/examples\/ProprietaryFilename.java","additions":30,"deletions":0,"binary":false,"changes":30,"status":"added"},{"patch":"@@ -0,0 +1,34 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/\/ key: compiler.warn.sun.proprietary\n+\/\/ key: compiler.note.proprietary.filename.additional\n+\/\/ options: -Xmaxwarns 1\n+\n+class ProprietaryFilename {\n+    sun.misc.Unsafe x;\n+}\n+\n+class ProprietaryFilenameAdditional {\n+    sun.misc.Unsafe x;\n+}\n","filename":"test\/langtools\/tools\/javac\/diags\/examples\/ProprietaryFilenameAdditional.java","additions":34,"deletions":0,"binary":false,"changes":34,"status":"added"},{"patch":"@@ -0,0 +1,30 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/\/ key: compiler.note.proprietary.plural\n+\/\/ key: compiler.note.proprietary.recompile\n+\/\/ options: -Xlint:-proprietary\n+\n+class Proprietary1 {\n+    sun.misc.Unsafe x;\n+}\n","filename":"test\/langtools\/tools\/javac\/diags\/examples\/ProprietaryPlural\/Proprietary1.java","additions":30,"deletions":0,"binary":false,"changes":30,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,1 +24,1 @@\n-class SunApiPlural {\n+class Proprietary2 {\n","filename":"test\/langtools\/tools\/javac\/diags\/examples\/ProprietaryPlural\/Proprietary2.java","additions":2,"deletions":2,"binary":false,"changes":4,"previous_filename":"test\/langtools\/tools\/javac\/diags\/examples\/SunApiPluralAdditional\/SunApiPlural.java","status":"copied"},{"patch":"@@ -0,0 +1,30 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/\/ key: compiler.note.proprietary.plural.additional\n+\/\/ key: compiler.warn.sun.proprietary\n+\/\/ options: -Xmaxwarns 1\n+\n+class Proprietary1 {\n+    sun.misc.Unsafe x;\n+}\n","filename":"test\/langtools\/tools\/javac\/diags\/examples\/ProprietaryPluralAdditional\/Proprietary1.java","additions":30,"deletions":0,"binary":false,"changes":30,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,1 +24,1 @@\n-class SunApiPlural {\n+class Proprietary2 {\n","filename":"test\/langtools\/tools\/javac\/diags\/examples\/ProprietaryPluralAdditional\/Proprietary2.java","additions":2,"deletions":2,"binary":false,"changes":4,"previous_filename":"test\/langtools\/tools\/javac\/diags\/examples\/SunApiPluralAdditional\/SunApiPlural.java","status":"copied"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,1 +24,1 @@\n-class SunApiPlural {\n+class Proprietary3 {\n","filename":"test\/langtools\/tools\/javac\/diags\/examples\/ProprietaryPluralAdditional\/Proprietary3.java","additions":2,"deletions":2,"binary":false,"changes":4,"previous_filename":"test\/langtools\/tools\/javac\/diags\/examples\/SunApiPluralAdditional\/SunApiPlural.java","status":"copied"},{"patch":"@@ -0,0 +1,4 @@\n+Proprietary.java:11:13: compiler.warn.sun.proprietary: sun.misc.Unsafe\n+- compiler.err.warnings.and.werror\n+1 error\n+1 warning\n","filename":"test\/langtools\/tools\/javac\/lint\/Proprietary.1.out","additions":4,"deletions":0,"binary":false,"changes":4,"status":"added"},{"patch":"@@ -0,0 +1,2 @@\n+- compiler.note.proprietary.filename: Proprietary.java\n+- compiler.note.proprietary.recompile\n","filename":"test\/langtools\/tools\/javac\/lint\/Proprietary.2.out","additions":2,"deletions":0,"binary":false,"changes":2,"status":"added"},{"patch":"@@ -0,0 +1,14 @@\n+\/*\n+ * @test \/nodynamiccopyright\/\n+ * @bug 8349848\n+ * @summary Test for -Xlint:proprietary\n+ *\n+ * @compile\/fail\/ref=Proprietary.1.out  -XDrawDiagnostics -Werror                     Proprietary.java\n+ * @compile\/ref=Proprietary.2.out       -XDrawDiagnostics -Werror -Xlint:-proprietary Proprietary.java\n+ *\/\n+\n+class Proprietary {\n+    sun.misc.Unsafe x;      \/\/ should get a warning here\n+    @SuppressWarnings(\"proprietary\")\n+    sun.misc.Unsafe y;      \/\/ should not get a warning here\n+}\n","filename":"test\/langtools\/tools\/javac\/lint\/Proprietary.java","additions":14,"deletions":0,"binary":false,"changes":14,"status":"added"}]}