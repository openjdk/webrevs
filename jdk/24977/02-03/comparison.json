{"files":[{"patch":"@@ -27,0 +27,2 @@\n+ * @library .. \/test\/lib\n+ * @build jdk.test.lib.Platform\n@@ -33,3 +35,2 @@\n-import org.junit.jupiter.api.BeforeAll;\n-import org.junit.jupiter.api.MethodOrderer;\n-import org.junit.jupiter.api.Order;\n+import jdk.test.lib.Platform;\n+\n@@ -37,3 +38,0 @@\n-import org.junit.jupiter.api.TestMethodOrder;\n-import org.junit.jupiter.api.condition.EnabledOnOs;\n-import org.junit.jupiter.api.condition.OS;\n@@ -44,1 +42,0 @@\n-@TestMethodOrder(MethodOrderer.OrderAnnotation.class)\n@@ -52,4 +49,3 @@\n-    @BeforeAll\n-    static void createFiles() throws IOException {\n-        DIR.mkdir();\n-        FILE.createNewFile();\n+    void deleteReadOnlyFile(File f) {\n+        f.setReadOnly();\n+        assertTrue(f.delete());\n@@ -58,1 +54,0 @@\n-    \/\/ This test must be run first\n@@ -60,6 +55,3 @@\n-    @Order(1)\n-    @EnabledOnOs({OS.AIX, OS.LINUX, OS.MAC})\n-    void deleteReadOnlyFile() {\n-        FILE.setReadOnly();\n-        assertTrue(FILE.delete());\n-    }\n+    void deleteReadOnlyRegularFile() throws IOException {\n+        assertTrue(DIR.mkdir());\n+        assertTrue(FILE.createNewFile());\n@@ -67,5 +59,0 @@\n-    \/\/ This test must be run first\n-    @Test\n-    @Order(1)\n-    @EnabledOnOs({OS.WINDOWS})\n-    void deleteReadOnlyFileWin() {\n@@ -75,1 +62,2 @@\n-        assertEquals(DELETE_READ_ONLY, deleted);\n+        boolean shouldBeDeleted = !Platform.isWindows() || DELETE_READ_ONLY;\n+        assertEquals(shouldBeDeleted, deleted);\n@@ -81,1 +69,0 @@\n-    }\n@@ -83,6 +70,0 @@\n-    \/\/ This test must be run after DIR is empty\n-    @Test\n-    @Order(2)\n-    @EnabledOnOs({OS.AIX, OS.LINUX, OS.MAC})\n-    void deleteReadOnlyDir() {\n-        DIR.setReadOnly();\n@@ -92,1 +73,0 @@\n-    \/\/ This test must be run after DIR is empty\n@@ -94,5 +74,3 @@\n-    @Order(2)\n-    @EnabledOnOs({OS.WINDOWS})\n-    void deleteReadOnlyDirWin() {\n-        DIR.setReadOnly();\n-        assertTrue(DIR.delete());\n+    void deleteReadOnlyDirectory() throws IOException {\n+        assertTrue(DIR.mkdir());\n+        deleteReadOnlyFile(DIR);\n","filename":"test\/jdk\/java\/io\/File\/DeleteReadOnly.java","additions":15,"deletions":37,"binary":false,"changes":52,"status":"modified"}]}