{"files":[{"patch":"@@ -44,2 +44,2 @@\n-    private static final boolean DELETE_READONLY =\n-        Boolean.getBoolean(\"jdk.io.File.deleteReadOnly\");\n+    private static final boolean ALLOW_DELETE_READ_ONLY_FILES =\n+        Boolean.getBoolean(\"jdk.io.File.allowDeleteReadOnlyFiles\");\n@@ -571,1 +571,1 @@\n-        return delete0(f, DELETE_READONLY);\n+        return delete0(f, ALLOW_DELETE_READ_ONLY_FILES);\n@@ -573,1 +573,1 @@\n-    private native boolean delete0(File f, boolean deleteReadOnly);\n+    private native boolean delete0(File f, boolean allowDeleteReadOnlyFiles);\n","filename":"src\/java.base\/windows\/classes\/java\/io\/WinNTFileSystem.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -652,1 +652,1 @@\n-removeFileOrDirectory(const jchar *path, jboolean deleteReadOnly)\n+removeFileOrDirectory(const jchar *path, jboolean allowDeleteReadOnlyFiles)\n@@ -663,3 +663,5 @@\n-        BOOL attrSet = FALSE;\n-        if (deleteReadOnly && ((a & FILE_ATTRIBUTE_READONLY) != 0))\n-            attrSet = SetFileAttributesW(path, a & (~FILE_ATTRIBUTE_READONLY));\n+        BOOL readOnlyAttrCleared = FALSE;\n+        if (allowDeleteReadOnlyFiles && ((a & FILE_ATTRIBUTE_READONLY) != 0)) {\n+            DWORD notReadOnlyAttr = a & (~FILE_ATTRIBUTE_READONLY);\n+            readOnlyAttrCleared = SetFileAttributesW(path, notReadOnlyAttr);\n+        }\n@@ -670,1 +672,1 @@\n-        if (!deleted && attrSet)\n+        if (!deleted && readOnlyAttrCleared)\n@@ -679,1 +681,1 @@\n-                                     jboolean deleteReadOnly)\n+                                     jboolean allowDeleteReadOnlyFiles)\n@@ -686,1 +688,1 @@\n-    if (removeFileOrDirectory(pathbuf, deleteReadOnly) == 0) {\n+    if (removeFileOrDirectory(pathbuf, allowDeleteReadOnlyFiles) == 0) {\n","filename":"src\/java.base\/windows\/native\/libjava\/WinNTFileSystem_md.c","additions":9,"deletions":7,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n- * @run junit\/othervm -Djdk.io.File.deleteReadOnly=true DeleteReadOnly\n+ * @run junit\/othervm -Djdk.io.File.allowDeleteReadOnlyFiles=true DeleteReadOnly\n@@ -46,1 +46,1 @@\n-    private static final String PROP = \"jdk.io.File.deleteReadOnly\";\n+    private static final String PROP = \"jdk.io.File.allowDeleteReadOnlyFiles\";\n","filename":"test\/jdk\/java\/io\/File\/DeleteReadOnly.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}