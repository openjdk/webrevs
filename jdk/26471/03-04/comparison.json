{"files":[{"patch":"@@ -36,0 +36,2 @@\n+import java.awt.Component;\n+import java.awt.Dimension;\n@@ -39,0 +41,1 @@\n+import java.awt.Point;\n@@ -50,0 +53,3 @@\n+import javax.swing.JButton;\n+import javax.swing.JComponent;\n+\n@@ -55,1 +61,0 @@\n-    private static volatile int eventType;\n@@ -60,1 +65,0 @@\n-    private static boolean passed = true;\n@@ -100,1 +104,0 @@\n-                eventType = WindowEvent.WINDOW_ACTIVATED;\n@@ -107,1 +110,0 @@\n-                eventType = WindowEvent.WINDOW_DEACTIVATED;\n@@ -141,2 +143,2 @@\n-        if (!windowFocusGainedLatch.await(1500, TimeUnit.MILLISECONDS)) {\n-                passed = false;\n+        if (!windowFocusGainedLatch.await(1000, TimeUnit.MILLISECONDS)) {\n+            throw new RuntimeException(\"Frame did not gain focus\");\n@@ -144,5 +146,1 @@\n-        robot.mouseMove(\n-            button.getLocationOnScreen().x + button.getSize().width \/ 2,\n-            button.getLocationOnScreen().y + button.getSize().height \/ 2);\n-        robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n-        robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n+        clickButtonCenter(robot, button);\n@@ -150,2 +148,2 @@\n-        if (eventType != WindowEvent.WINDOW_ACTIVATED) {\n-            windowActivatedLatch.await(1500, TimeUnit.MILLISECONDS);\n+        if (!windowActivatedLatch.await(1000, TimeUnit.MILLISECONDS)) {\n+            throw new RuntimeException(\"Frame was not activated\");\n@@ -153,2 +151,4 @@\n-        if (eventType != WindowEvent.WINDOW_ACTIVATED) {\n-            passed = false;\n+        clickButtonCenter(robot, button2);\n+\n+        if (!windowDeactivatedLatch.await(2000, TimeUnit.MILLISECONDS)) {\n+            throw new RuntimeException(\"Frame was not deactivated\");\n@@ -156,1 +156,1 @@\n-        eventType = -1;\n+    }\n@@ -158,3 +158,6 @@\n-        robot.mouseMove(\n-            button2.getLocationOnScreen().x + button2.getSize().width \/ 2,\n-            button2.getLocationOnScreen().y + button2.getSize().height \/ 2);\n+    private static void clickButtonCenter(Robot robot, Component button) {\n+        Point location = button.getLocationOnScreen();\n+        Dimension size = button.getSize();\n+        int x = location.x + size.width \/ 2;\n+        int y = location.y + size.height \/ 2;\n+        robot.mouseMove(x, y);\n@@ -163,13 +166,0 @@\n-\n-        if (eventType != WindowEvent.WINDOW_DEACTIVATED) {\n-            windowDeactivatedLatch.await(1500, TimeUnit.MILLISECONDS);\n-        }\n-        if (eventType != WindowEvent.WINDOW_DEACTIVATED) {\n-            passed = false;\n-        }\n-        if (frame.hasFocus()) {\n-            passed = false;\n-        }\n-        if (!passed) {\n-            throw new RuntimeException(\"Test failed.\");\n-        }\n","filename":"test\/jdk\/java\/awt\/Frame\/MiscUndecorated\/ActiveAWTWindowTest.java","additions":22,"deletions":32,"binary":false,"changes":54,"status":"modified"}]}