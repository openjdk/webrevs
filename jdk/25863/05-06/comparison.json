{"files":[{"patch":"@@ -453,0 +453,1 @@\n+        char[] cb = new char[TRANSFER_BUFFER_SIZE];\n@@ -455,1 +456,1 @@\n-        int fragPos = -1;\n+        boolean hasFrag = false;\n@@ -457,2 +458,0 @@\n-\n-        char[] cb = new char[TRANSFER_BUFFER_SIZE];\n@@ -460,0 +459,1 @@\n+\n@@ -477,4 +477,4 @@\n-                        \/\/ line terminator is a CR or an LF just after a CR\n-                        if (fragPos != -1) {\n-                            lines.add(new String(cb, fragPos, term - fragPos));\n-                            fragPos = -1;\n+                        \/\/ line terminator is a CR or an LF not just after a CR\n+                        if (hasFrag) {\n+                            lines.add(new String(cb, 0, term));\n+                            hasFrag = false;\n@@ -488,0 +488,4 @@\n+                    else if (isCR && cb[pos] == '\\n') { \/\/ pos < limit\n+                        pos++;\n+                        isCR = false;\n+                    }\n@@ -491,1 +495,5 @@\n-                    if (fragPos == -1) {\n+                    int fragPos;\n+                    if (hasFrag) {\n+                        fragPos = 0;\n+                        fragLen += len;\n+                    } else {\n@@ -494,2 +502,0 @@\n-                    } else {\n-                        fragLen += len;\n@@ -507,1 +513,1 @@\n-                    fragPos = 0;\n+                    hasFrag = true;\n@@ -515,2 +521,2 @@\n-        if (fragPos != -1)\n-            lines.add(new String(cb, fragPos, fragLen));\n+        if (hasFrag)\n+            lines.add(new String(cb, 0, fragLen));\n","filename":"src\/java.base\/share\/classes\/java\/io\/Reader.java","additions":19,"deletions":13,"binary":false,"changes":32,"status":"modified"}]}