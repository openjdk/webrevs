{"files":[{"patch":"@@ -49,0 +49,2 @@\n+    private static SystemTray systemTray;\n+    private static TrayIcon trayIcon;\n@@ -66,1 +68,1 @@\n-                       \"  something is wrong the corresponding message is displayed.\\n\" +\n+                       \"  something is wrong the corresponding message the test will automatically fail.\\n\" +\n@@ -70,9 +72,13 @@\n-        PassFailJFrame.builder()\n-                .title(\"Event Message Display\")\n-                .instructions(instructions)\n-                .testTimeOut(10)\n-                .rows(15)\n-                .columns(45)\n-                .testUI(DisposeInActionEventTest::showFrameAndIcon)\n-                .build()\n-                .awaitAndCheck();\n+        try {\n+            PassFailJFrame.builder()\n+                    .title(\"DisposeInActionEventTest\")\n+                    .instructions(instructions)\n+                    .testTimeOut(10)\n+                    .rows(15)\n+                    .columns(45)\n+                    .testUI(DisposeInActionEventTest::showFrameAndIcon)\n+                    .build()\n+                    .awaitAndCheck();\n+        } finally {\n+            systemTray.remove(trayIcon);\n+        }\n@@ -82,1 +88,1 @@\n-        JFrame frame = new JFrame(\"DisposeInActionEventTest\");\n+        JFrame frame = new JFrame(\"Event Message Display\");\n@@ -85,1 +91,0 @@\n-        JScrollPane spane = new JScrollPane();\n@@ -87,2 +92,1 @@\n-        spane.add(textArea);\n-        frame.getContentPane().add(spane);\n+        frame.getContentPane().add(new JScrollPane(textArea));\n@@ -99,2 +103,2 @@\n-        SystemTray systemTray = SystemTray.getSystemTray();\n-        TrayIcon trayIcon = new TrayIcon(img);\n+        systemTray = SystemTray.getSystemTray();\n+        trayIcon = new TrayIcon(img);\n@@ -110,1 +114,0 @@\n-                    textArea.append(e + \"\\n\");\n@@ -112,1 +115,1 @@\n-                    throw new RuntimeException();\n+                    PassFailJFrame.forceFail(\"Exception caught: \" + e.getMessage());\n@@ -120,1 +123,0 @@\n-            textArea.append(e + \"\\n\");\n@@ -122,1 +124,1 @@\n-            throw new RuntimeException(\"Test failed.\");\n+            PassFailJFrame.forceFail(\"Exception caught: \" + e.getMessage());\n","filename":"test\/jdk\/java\/awt\/TrayIcon\/DisposeInActionEventTest\/DisposeInActionEventTest.java","additions":22,"deletions":20,"binary":false,"changes":42,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n- * @bug 6384984 8004032\n+ * @bug 6384984 8004032 8316931\n","filename":"test\/jdk\/java\/awt\/TrayIcon\/ShowAfterDisposeTest\/ShowAfterDisposeTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}