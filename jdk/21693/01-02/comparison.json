{"files":[{"patch":"@@ -234,6 +234,1 @@\n-            try {\n-                initJLineIfNeeded();\n-                return jline.readLine();\n-            } catch (EndOfFileException eofe) {\n-                return null;\n-            }\n+            return readLine();\n@@ -260,1 +255,6 @@\n-            return readLine(Locale.getDefault(Locale.Category.FORMAT), \"\");\n+            try {\n+                initJLineIfNeeded();\n+                return jline.readLine();\n+            } catch (EndOfFileException eofe) {\n+                return null;\n+            }\n","filename":"src\/jdk.internal.le\/share\/classes\/jdk\/internal\/org\/jline\/JdkConsoleProviderImpl.java","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -243,9 +243,1 @@\n-            try {\n-                return sendAndReceive(() -> {\n-                    remoteInput.write(Task.READ_LINE_NO_PROMPT.ordinal());\n-                    char[] line = readChars();\n-                    return new String(line);\n-                });\n-            } catch (IOException ex) {\n-                throw new IOError(ex);\n-            }\n+            return readLine();\n@@ -290,1 +282,9 @@\n-            return readLine(Locale.getDefault(Locale.Category.FORMAT), \"\");\n+            try {\n+                return sendAndReceive(() -> {\n+                    remoteInput.write(Task.READ_LINE_NO_PROMPT.ordinal());\n+                    char[] line = readChars();\n+                    return new String(line);\n+                });\n+            } catch (IOException ex) {\n+                throw new IOError(ex);\n+            }\n","filename":"src\/jdk.jshell\/share\/classes\/jdk\/jshell\/execution\/impl\/ConsoleImpl.java","additions":10,"deletions":10,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -28,0 +28,1 @@\n+ * @enablePreview\n@@ -70,0 +71,7 @@\n+        console = new ThrowingJShellConsole() {\n+            @Override\n+            public String readLine() throws IOError {\n+                return \"AB\";\n+            }\n+        };\n+        assertEval(\"System.console().readLine()\", \"\\\"AB\\\"\");\n@@ -213,0 +221,4 @@\n+            public String readLine() throws IOError {\n+                return console.readLine();\n+            }\n+            @Override\n@@ -243,0 +255,4 @@\n+        public String readLine() throws IOError {\n+            throw new IllegalStateException(\"Not expected!\");\n+        }\n+        @Override\n","filename":"test\/langtools\/jdk\/jshell\/ConsoleTest.java","additions":16,"deletions":0,"binary":false,"changes":16,"status":"modified"}]}