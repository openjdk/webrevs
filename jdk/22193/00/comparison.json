{"files":[{"patch":"@@ -31,1 +31,1 @@\n- * @run main\/othervm GetStackTraceALotWhenBlocking 500000\n+ * @run main\/othervm\/timeout=300 GetStackTraceALotWhenBlocking 100000\n@@ -71,0 +71,1 @@\n+        long lastTime = System.nanoTime();\n@@ -73,4 +74,0 @@\n-                if ((i % 10_000) == 0) {\n-                    System.out.format(\"%s => %d of %d%n\", Instant.now(), i, iterations);\n-                }\n-\n@@ -81,0 +78,11 @@\n+\n+                long currentTime = System.nanoTime();\n+                if (i == iterations || ((currentTime - lastTime) > 1_000_000_000L)) {\n+                    System.out.format(\"%s => %d of %d%n\", Instant.now(), i, iterations);\n+                    lastTime = currentTime;\n+                }\n+\n+                if (Thread.currentThread().isInterrupted()) {\n+                    \/\/ fail quickly if interrupted by jtreg\n+                    throw new RuntimeException(\"interrupted\");\n+                }\n","filename":"test\/jdk\/java\/lang\/Thread\/virtual\/stress\/GetStackTraceALotWhenBlocking.java","additions":13,"deletions":5,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -31,1 +31,1 @@\n- * @run main\/othervm --enable-native-access=ALL-UNNAMED GetStackTraceALotWhenPinned 500000\n+ * @run main\/othervm\/timeout=300 --enable-native-access=ALL-UNNAMED GetStackTraceALotWhenPinned 100000\n@@ -39,1 +39,1 @@\n- * @run main\/othervm\/timeout=300 --enable-native-access=ALL-UNNAMED GetStackTraceALotWhenPinned 200000\n+ * @run main\/othervm\/timeout=300 --enable-native-access=ALL-UNNAMED GetStackTraceALotWhenPinned 50000\n@@ -81,1 +81,1 @@\n-        long lastTimestamp = System.currentTimeMillis();\n+        long lastTime = System.nanoTime();\n@@ -89,2 +89,2 @@\n-            long currentTime = System.currentTimeMillis();\n-            if (i == iterations || ((currentTime - lastTimestamp) > 500)) {\n+            long currentTime = System.nanoTime();\n+            if (i == iterations || ((currentTime - lastTime) > 1_000_000_000L)) {\n@@ -92,1 +92,6 @@\n-                lastTimestamp = currentTime;\n+                lastTime = currentTime;\n+            }\n+\n+            if (Thread.currentThread().isInterrupted()) {\n+                \/\/ fail quickly if interrupted by jtreg\n+                throw new RuntimeException(\"interrupted\");\n","filename":"test\/jdk\/java\/lang\/Thread\/virtual\/stress\/GetStackTraceALotWhenPinned.java","additions":11,"deletions":6,"binary":false,"changes":17,"status":"modified"}]}