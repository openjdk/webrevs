{"files":[{"patch":"@@ -5782,1 +5782,1 @@\n-  assert(UseAVX > 2 && VM_Version::supports_avx512vlbw(), \"\");\n+  assert(UseAVX > 2 && VM_Version::supports_avx512vl(), \"\");\n","filename":"src\/hotspot\/cpu\/x86\/macroAssembler_x86.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1754,0 +1754,4 @@\n+      if ((size_in_bits != 512) && !VM_Version::supports_avx512vl()) {\n+        return false;\n+      }\n+      break;\n","filename":"src\/hotspot\/cpu\/x86\/x86.ad","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -11473,2 +11473,2 @@\n-\/\/ fast clearing of an array\n-\/\/ Small ClearArray non-AVX512.\n+\/\/ Fast clearing of an array\n+\/\/ Small non-constant length ClearArray for non-AVX512 targets.\n@@ -11534,1 +11534,1 @@\n-\/\/ Small ClearArray AVX512 non-constant length.\n+\/\/ Small non-constant length ClearArray for AVX512 targets.\n@@ -11595,1 +11595,1 @@\n-\/\/ Large ClearArray non-AVX512.\n+\/\/ Large non-constant length ClearArray for non-AVX512 targets.\n@@ -11645,1 +11645,1 @@\n-\/\/ Large ClearArray AVX512.\n+\/\/ Large non-constant length ClearArray for AVX512 targets.\n@@ -11695,1 +11695,1 @@\n-\/\/ Small ClearArray AVX512 constant length.\n+\/\/ Small constant length ClearArray for AVX512 targets.\n@@ -11699,1 +11699,1 @@\n-               ((UseAVX > 2) && VM_Version::supports_avx512vlbw()));\n+               ((UseAVX > 2) && VM_Version::supports_avx512vl()));\n","filename":"src\/hotspot\/cpu\/x86\/x86_32.ad","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -10395,1 +10395,1 @@\n-\/\/ Small ClearArray non-AVX512.\n+\/\/ Small non-constant lenght ClearArray for non-AVX512 targets.\n@@ -10455,1 +10455,1 @@\n-\/\/ Small ClearArray AVX512 non-constant length.\n+\/\/ Small non-constant length ClearArray for AVX512 targets.\n@@ -10516,1 +10516,1 @@\n-\/\/ Large ClearArray non-AVX512.\n+\/\/ Large non-constant length ClearArray for non-AVX512 targets.\n@@ -10567,1 +10567,1 @@\n-\/\/ Large ClearArray AVX512.\n+\/\/ Large non-constant length ClearArray for AVX512 targets.\n@@ -10618,1 +10618,1 @@\n-\/\/ Small ClearArray AVX512 constant length.\n+\/\/ Small constant length ClearArray for AVX512 targets.\n@@ -10621,2 +10621,2 @@\n-  predicate(!((ClearArrayNode*)n)->is_large() &&\n-              ((UseAVX > 2) && VM_Version::supports_avx512vlbw()));\n+  predicate(!((ClearArrayNode*)n)->is_large() && MaxVectorSize >= 32 &&\n+              ((UseAVX > 2) && VM_Version::supports_avx512vl()));\n","filename":"src\/hotspot\/cpu\/x86\/x86_64.ad","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -34,0 +34,2 @@\n+ * @run main\/othervm -XX:+UnlockDiagnosticVMOptions -XX:+IgnoreUnrecognizedVMOptions -XX:-TieredCompilation -Xbatch\n+ *   -XX:InitArrayShortSize=32768 -XX:MaxVectorSize=8 -XX:-IdealizeClearArrayNode -XX:UseAVX=3 compiler.c2.ClearArray\n","filename":"test\/hotspot\/jtreg\/compiler\/c2\/ClearArray.java","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"}]}