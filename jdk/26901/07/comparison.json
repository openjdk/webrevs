{"files":[{"patch":"@@ -4683,2 +4683,2 @@\n-      errno = ::GetLastError();\n-      log_debug(os)(\"is_symbolic_link() failed to FindClose: GetLastError->%ld.\", errno);\n+      DWORD errcode = ::GetLastError();\n+      log_debug(os)(\"is_symbolic_link() failed to FindClose: GetLastError->%lu.\", errcode);\n@@ -4688,2 +4688,2 @@\n-    errno = ::GetLastError();\n-    log_debug(os)(\"is_symbolic_link() failed to FindFirstFileW: GetLastError->%ld.\", errno);\n+    DWORD errcode = ::GetLastError();\n+    log_debug(os)(\"is_symbolic_link() failed to FindFirstFileW: GetLastError->%lu.\", errcode);\n@@ -4699,2 +4699,2 @@\n-    errno = ::GetLastError();\n-    log_debug(os)(\"get_path_to_target() failed to CreateFileW: GetLastError->%ld.\", errno);\n+    DWORD errcode = ::GetLastError();\n+    log_debug(os)(\"get_path_to_target() failed to CreateFileW: GetLastError->%lu.\", errcode);\n@@ -4708,2 +4708,2 @@\n-    errno = ::GetLastError();\n-    log_debug(os)(\"get_path_to_target() failed to GetFinalPathNameByHandleW: GetLastError->%ld.\", errno);\n+    DWORD errcode = ::GetLastError();\n+    log_debug(os)(\"get_path_to_target() failed to GetFinalPathNameByHandleW: GetLastError->%lu.\", errcode);\n@@ -4719,2 +4719,2 @@\n-    errno = ::GetLastError();\n-    log_debug(os)(\"get_path_to_target() failed to GetFinalPathNameByHandleW: GetLastError->%ld.\", errno);\n+    DWORD errcode = ::GetLastError();\n+    log_debug(os)(\"get_path_to_target() failed to GetFinalPathNameByHandleW: GetLastError->%lu.\", errcode);\n@@ -4725,2 +4725,2 @@\n-    errno = ::GetLastError();\n-    log_debug(os)(\"get_path_to_target() failed to CloseHandle: GetLastError->%ld.\", errno);\n+    DWORD errcode = ::GetLastError();\n+    log_debug(os)(\"get_path_to_target() failed to CloseHandle: GetLastError->%lu.\", errcode);\n@@ -4807,3 +4807,2 @@\n-      \/\/ it is a symbolic link, but we failed to resolve it,\n-      \/\/ errno has been set in the call to get_path_to_target(),\n-      \/\/ no need to overwrite it\n+      \/\/ it is a symbolic link, but we failed to resolve it\n+      errno = ENOENT;\n@@ -4820,2 +4819,7 @@\n-    errno = ::GetLastError();\n-    log_debug(os)(\"os::stat() failed to GetFileAttributesExW: GetLastError->%ld.\", errno);\n+    DWORD errcode = ::GetLastError();\n+    if (errcode == ERROR_FILE_NOT_FOUND || errcode == ERROR_PATH_NOT_FOUND) {\n+      errno = ENOENT;\n+    } else {\n+      errno = 0;\n+    }\n+    log_debug(os)(\"os::stat() failed to GetFileAttributesExW: GetLastError->%lu.\", errcode);\n@@ -5021,3 +5025,2 @@\n-      \/\/ it is a symbolic link, but we failed to resolve it,\n-      \/\/ errno has been set in the call to get_path_to_target(),\n-      \/\/ no need to overwrite it\n+      \/\/ it is a symbolic link, but we failed to resolve it\n+      errno = ENOENT;\n@@ -5031,1 +5034,1 @@\n-  \/\/ if opening files failed, GetLastError should be called immediately after that\n+  \/\/ if opening files failed, errno has been set to indicate the problem\n@@ -5033,2 +5036,1 @@\n-    errno = ::GetLastError();\n-    log_debug(os)(\"os::open() failed to _wopen: GetLastError->%ld.\", errno);\n+    log_debug(os)(\"os::open() failed to _wopen: errno->%s.\", strerror(errno));\n@@ -5102,1 +5104,2 @@\n-    errno = ::GetLastError();\n+    DWORD errcode = ::GetLastError();\n+    log_debug(os)(\"os::dir_is_empty() failed to FindFirstFileW: GetLastError->%lu.\", errcode);\n","filename":"src\/hotspot\/os\/windows\/os_windows.cpp","additions":27,"deletions":24,"binary":false,"changes":51,"status":"modified"},{"patch":"@@ -244,6 +244,0 @@\n-#ifdef _WINDOWS\n-  } else if (errno == ERROR_FILE_NOT_FOUND || errno == ERROR_PATH_NOT_FOUND) {\n-    \/\/ On Windows, the errno could be ERROR_PATH_NOT_FOUND (3) in case the directory\n-    \/\/ path doesn't exist.\n-    type = FileType::NOT_EXIST;\n-#endif\n","filename":"src\/hotspot\/share\/cds\/aotClassLocation.cpp","additions":0,"deletions":6,"binary":false,"changes":6,"status":"modified"}]}