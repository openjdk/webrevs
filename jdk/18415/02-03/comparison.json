{"files":[{"patch":"@@ -41,3 +41,3 @@\n- * @library \/test\/lib \/java\/awt\/regtesthelpers\n- * @build jdk.test.lib.Platform PassFailJFrame\n- * @run main\/manual bug4150029\n+ * @library \/test\/lib\n+ * @build jdk.test.lib.Platform\n+ * @run main bug4150029\n@@ -88,2 +88,0 @@\n-\/\/            fileChooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);\n-\n@@ -91,9 +89,1 @@\n-                frame = new JFrame(\"Backspace Shortcut for Directory Navigation Test\");\n-                frame.getContentPane().setLayout(new BorderLayout());\n-                fileChooser = new JFileChooser(subDir);\n-                fileChooser.setControlButtonsAreShown(false);\n-                frame.getContentPane().add(fileChooser, BorderLayout.CENTER);\n-                frame.pack();\n-                frame.setLocationRelativeTo(null);\n-                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n-                frame.setVisible(true);\n+                createAndShowUI();\n@@ -112,2 +102,17 @@\n-    private static void doTesting() {\n-        Point p = frame.getLocationOnScreen();\n+    private static void createAndShowUI() {\n+        frame = new JFrame(\"Backspace Shortcut for Directory Navigation Test\");\n+        frame.setLayout(new BorderLayout());\n+        fileChooser = new JFileChooser(subDir);\n+        fileChooser.setControlButtonsAreShown(false);\n+        frame.add(fileChooser, BorderLayout.CENTER);\n+        frame.pack();\n+        frame.setLocationRelativeTo(null);\n+        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n+        frame.setVisible(true);\n+    }\n+\n+    private static void doTesting() throws Exception {\n+        SwingUtilities.invokeAndWait(() -> {\n+            Point p = frame.getLocationOnScreen();\n+\n+        });\n@@ -115,1 +120,2 @@\n-        robot.mousePress(InputEvent.BUTTON1_MASK);\n+        robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n+        robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n@@ -136,3 +142,1 @@\n-        if (passed_1 && passed_2) {\n-            System.out.println(\"Passed\");\n-        } else {\n+        if (!(passed_1 && passed_2)) {\n","filename":"test\/jdk\/javax\/swing\/JFileChooser\/4150029\/bug4150029.java","additions":24,"deletions":20,"binary":false,"changes":44,"status":"modified"}]}