{"files":[{"patch":"@@ -39,2 +39,0 @@\n-import java.nio.ByteBuffer;\n-import java.nio.channels.FileChannel;\n@@ -43,0 +41,1 @@\n+import java.util.ArrayList;\n@@ -46,3 +45,0 @@\n-import static java.nio.file.StandardOpenOption.CREATE;\n-import static java.nio.file.StandardOpenOption.WRITE;\n-\n@@ -72,22 +68,6 @@\n-        try (FileChannel fc = FileChannel.open(path, CREATE, WRITE)) {\n-            int len = 0;\n-            int plen = PHRASE.length();\n-            ByteBuffer strBuf = ByteBuffer.allocate(plen*Character.BYTES);\n-            ByteBuffer lineSeparatorBuf =\n-                ByteBuffer.wrap(System.lineSeparator().getBytes());\n-            int n = 0;\n-            while (len < size) {\n-                int fromIndex = rnd.nextInt(0, plen \/ 2);\n-                int toIndex = rnd.nextInt(fromIndex, plen);\n-                String str = PHRASE.substring(fromIndex, toIndex);\n-                byte[] strBytes = str.getBytes();\n-                strBuf.put(strBytes);\n-                strBuf.flip();\n-                fc.write(strBuf);\n-                strBuf.clear();\n-                fc.write(lineSeparatorBuf);\n-                lineSeparatorBuf.clear();\n-                len += toIndex - fromIndex;\n-                n++;\n-            }\n-            System.out.println(n + \" lines written\");\n+        int plen = PHRASE.length();\n+        List<String> strings = new ArrayList<String>(size);\n+        while (strings.size() < size) {\n+            int fromIndex = rnd.nextInt(0, plen \/ 2);\n+            int toIndex = rnd.nextInt(fromIndex, plen);\n+            strings.add(PHRASE.substring(fromIndex, toIndex));\n@@ -95,0 +75,2 @@\n+        Files.write(path, strings);\n+        System.out.println(strings.size() + \" lines written\");\n@@ -106,2 +88,1 @@\n-        try (FileReader fr = new FileReader(file);\n-             BufferedReader br = new BufferedReader(fr)) {\n+        try (BufferedReader br = new BufferedReader(new FileReader(file))) {\n","filename":"test\/jdk\/java\/io\/BufferedReader\/ReadAll.java","additions":10,"deletions":29,"binary":false,"changes":39,"status":"modified"}]}