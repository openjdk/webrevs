{"files":[{"patch":"@@ -574,2 +574,10 @@\n-      size_t buffer_size = c1_only ? c1_size : (c1_size\/3 + 2*c2_size\/3);\n-      size_t max_count = (ReservedCodeCacheSize - (CodeCacheMinimumUseSpace DEBUG_ONLY(* 3))) \/ buffer_size;\n+      size_t buffer_size = 0;\n+      if (c1_only) {\n+        buffer_size = c1_size;\n+      } else if (c2_only) {\n+        buffer_size = c2_size;\n+      } else {\n+        buffer_size = c1_size \/ 3 + c2_size * 2\/3;\n+      }\n+      size_t max_buffer_size = FLAG_IS_CMDLINE(NonNMethodCodeHeapSize) ? NonNMethodCodeHeapSize : ReservedCodeCacheSize;\n+      size_t max_count = (max_buffer_size - (CodeCacheMinimumUseSpace DEBUG_ONLY(* 3))) \/ (int)buffer_size;\n@@ -594,1 +602,1 @@\n-#endif\n+#endif \/\/ _LP64\n","filename":"src\/hotspot\/share\/compiler\/compilationPolicy.cpp","additions":11,"deletions":3,"binary":false,"changes":14,"status":"modified"}]}