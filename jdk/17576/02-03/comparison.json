{"files":[{"patch":"@@ -901,1 +901,1 @@\n-    if (logical_processors < si.dwNumberOfProcessors) {\n+    if (logical_processors > 0 && logical_processors < si.dwNumberOfProcessors) {\n@@ -906,1 +906,7 @@\n-    warning(\"GetProcessAffinityMask() failed: GetLastError->%ld.\", GetLastError());\n+    char buf[512];\n+    size_t buf_len = os::lasterror(buf, sizeof(buf));\n+    if (buf_len != 0) {\n+      warning(buf);\n+    } else {\n+      warning(\"Attempt to get the process affinity mask failed.\");\n+    }\n@@ -916,3 +922,1 @@\n-    \/\/ will continue to use the dwNumberOfProcessors field. For details on the\n-    \/\/ latest Windows scheduling behavior, see\n-    \/\/ https:\/\/learn.microsoft.com\/en-us\/windows\/win32\/procthread\/processor-groups#behavior-starting-with-windows-11-and-windows-server-2022\n+    \/\/ will continue to use the dwNumberOfProcessors field.\n@@ -4045,2 +4049,1 @@\n-  \/\/ Windows 11 starts at build 22000 (Version 21H2) as per\n-  \/\/ https:\/\/learn.microsoft.com\/en-us\/windows\/release-health\/windows11-release-information\n+  \/\/ Windows 11 starts at build 22000 (Version 21H2)\n@@ -4051,2 +4054,1 @@\n-  \/\/ Windows Server 2022 starts at build 20348.169 as per\n-  \/\/ https:\/\/learn.microsoft.com\/en-us\/windows\/release-health\/release-information\n+  \/\/ Windows Server 2022 starts at build 20348.169\n@@ -4059,1 +4061,7 @@\n-    warning(\"IsProcessInJob() failed: GetLastError->%ld.\", GetLastError());\n+    char buf[512];\n+    size_t buf_len = os::lasterror(buf, sizeof(buf));\n+    if (buf_len != 0) {\n+      warning(buf);\n+    } else {\n+      warning(\"Attempt to determine whether the process is running in a job failed.\");\n+    }\n@@ -4101,1 +4109,7 @@\n-          warning(\"QueryInformationJobObject() failed: GetLastError->%ld.\", GetLastError());\n+          char buf[512];\n+          size_t buf_len = os::lasterror(buf, sizeof(buf));\n+          if (buf_len != 0) {\n+            warning(buf);\n+          } else {\n+            warning(\"Attempt to query job object information failed.\");\n+          }\n@@ -4123,1 +4137,0 @@\n-  \/\/ https:\/\/learn.microsoft.com\/en-us\/windows\/win32\/api\/sysinfoapi\/nf-sysinfoapi-getlogicalprocessorinformationex\n","filename":"src\/hotspot\/os\/windows\/os_windows.cpp","additions":25,"deletions":12,"binary":false,"changes":37,"status":"modified"}]}