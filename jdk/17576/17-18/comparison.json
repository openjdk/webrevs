{"files":[{"patch":"@@ -32,0 +32,13 @@\n+system_root=$SystemRoot\n+if [ \"${system_root}\" = \"\" ]\n+then\n+  echo \"SystemRoot environment variable not set. Checking SYSTEMROOT environment variable.\"\n+  system_root=$SYSTEMROOT\n+fi\n+\n+if [ \"${system_root}\" = \"\" ]\n+then\n+  echo \"The SystemRoot environment variable needs to be set. Test cannot execute.\"\n+  exit 1\n+fi\n+\n@@ -53,1 +66,1 @@\n-javac=\"${TESTJAVA}\/bin\/javac\"\n+javac=\"${TESTJAVA}\/bin\/javac${EXE_SUFFIX}\"\n@@ -57,1 +70,1 @@\n-log_file=\"${TESTCLASSES}\/$src_file_base.output.log\"\n+log_file=\"$src_file_base.output.log\"\n@@ -67,3 +80,10 @@\n-get_proc_info_name=GetProcessorInfo\n-get_proc_info_log=\"${TESTCLASSES}\/$get_proc_info_name.output.log\"\n-${TESTNATIVEPATH}\/$get_proc_info_name > $get_proc_info_log 2>&1\n+get_proc_info_name=\"GetProcessorInfo${EXE_SUFFIX}\"\n+get_proc_info_path=\"${TESTNATIVEPATH}\/${get_proc_info_name}\"\n+get_proc_info_log=\"$get_proc_info_name.output.log\"\n+$get_proc_info_path > $get_proc_info_log 2>&1\n+\n+status=$?\n+if [ ! $status -eq \"0\" ]; then\n+  echo \"Could not launch $get_proc_info_path\";\n+  exit 1\n+fi\n@@ -84,1 +104,1 @@\n-  echo \"TESTBUG: $get_proc_info_name did not output a processor count.\";\n+  echo \"TESTBUG: $get_proc_info_path did not output a processor count.\";\n@@ -125,1 +145,1 @@\n-cmd_line=\"start \/wait \/b \/affinity $affinity $java_cmd_line > $log_file\"\n+cmd_line=\"$system_root\/System32\/cmd.exe \/\/c start \/\/wait \/\/b \/\/affinity $affinity $java_cmd_line > $log_file\"\n@@ -128,1 +148,1 @@\n-cmd \/c $cmd_line\n+$cmd_line\n@@ -154,2 +174,0 @@\n-else\n-  echo \"Test passed.\"\n@@ -157,0 +175,2 @@\n+\n+echo \"Test passed.\"\n","filename":"test\/hotspot\/jtreg\/runtime\/6942632\/GetAvailableProcessors.sh","additions":30,"deletions":10,"binary":false,"changes":40,"status":"modified"}]}