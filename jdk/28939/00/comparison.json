{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2004, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2004, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -98,0 +98,2 @@\n+            robot.waitForIdle();\n+            robot.delay(250);\n","filename":"test\/jdk\/java\/awt\/Choice\/PopupPosTest\/PopupPosTest.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -47,1 +47,1 @@\n-    AtomicBoolean typed = new AtomicBoolean(false);\n+    final AtomicBoolean typed = new AtomicBoolean(false);\n@@ -117,0 +117,1 @@\n+        robot.delay(1000);\n","filename":"test\/jdk\/java\/awt\/Focus\/ClearLwQueueBreakTest\/ClearLwQueueBreakTest.java","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,0 +27,1 @@\n+import java.awt.Robot;\n@@ -38,2 +39,1 @@\n-    private static volatile boolean passed;\n-\n+    private static Robot robot;\n@@ -41,7 +41,5 @@\n-        EventQueue.invokeAndWait(() -> {\n-            try {\n-                createAndShowUI();\n-\n-                f.setSize(200, 200);\n-                passed = verifyFrameSize(new Dimension(300, 300));\n-                isFrameSizeOk(passed);\n+        robot = new Robot();\n+        try {\n+            EventQueue.invokeAndWait(FrameSetMinimumSizeTest::createAndShowUI);\n+            robot.waitForIdle();\n+            robot.delay(500);\n@@ -49,3 +47,4 @@\n-                f.setSize(200, 400);\n-                passed = verifyFrameSize(new Dimension(300, 400));\n-                isFrameSizeOk(passed);\n+            test(\n+                new Dimension(200, 200),\n+                new Dimension(300, 300)\n+            );\n@@ -53,3 +52,4 @@\n-                f.setSize(400, 200);\n-                passed = verifyFrameSize(new Dimension(400, 300));\n-                isFrameSizeOk(passed);\n+            test(\n+                new Dimension(200, 400),\n+                new Dimension(300, 400)\n+            );\n@@ -57,1 +57,4 @@\n-                f.setMinimumSize(null);\n+            test(\n+                new Dimension(400, 200),\n+                new Dimension(400, 300)\n+            );\n@@ -59,4 +62,7 @@\n-                f.setSize(200, 200);\n-                passed = verifyFrameSize(new Dimension(200, 200));\n-                isFrameSizeOk(passed);\n-            } finally {\n+            EventQueue.invokeAndWait(() -> f.setMinimumSize(null));\n+            test(\n+                new Dimension(200, 200),\n+                new Dimension(200, 200)\n+            );\n+        } finally {\n+            EventQueue.invokeAndWait(() -> {\n@@ -66,2 +72,10 @@\n-            }\n-        });\n+            });\n+        }\n+    }\n+\n+    private static void test(Dimension size, Dimension expected) throws Exception {\n+        robot.waitForIdle();\n+        robot.delay(250);\n+        EventQueue.invokeAndWait(() -> f.setSize(size));\n+        robot.waitForIdle();\n+        EventQueue.invokeAndWait(() -> verifyFrameSize(expected));\n@@ -74,0 +88,1 @@\n+        f.setLocationRelativeTo(null);\n@@ -77,2 +92,1 @@\n-    private static boolean verifyFrameSize(Dimension expected) {\n-\n+    private static void verifyFrameSize(Dimension expected) {\n@@ -80,9 +94,4 @@\n-            return false;\n-        }\n-        return true;\n-    }\n-\n-    private static void isFrameSizeOk(boolean passed) {\n-        if (!passed) {\n-            throw new RuntimeException(\"Frame's setMinimumSize not honoured for the\" +\n-                    \" frame size: \" + f.getSize());\n+            String message =\n+                    \"Frame's setMinimumSize not honoured for the frame size: %s. Expected %s\"\n+                            .formatted(f.getSize(), expected);\n+            throw new RuntimeException(message);\n","filename":"test\/jdk\/java\/awt\/Frame\/FrameSetMinimumSizeTest.java","additions":43,"deletions":34,"binary":false,"changes":77,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2006, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2006, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,3 +34,10 @@\n-import java.awt.*;\n-import java.awt.event.*;\n-import javax.swing.*;\n+import java.awt.FlowLayout;\n+import java.awt.Robot;\n+import javax.swing.AbstractAction;\n+import javax.swing.JButton;\n+import javax.swing.JFrame;\n+import javax.swing.JTextField;\n+import javax.swing.KeyStroke;\n+import java.awt.event.ActionEvent;\n+import java.awt.event.KeyAdapter;\n+import java.awt.event.KeyEvent;\n@@ -45,1 +52,1 @@\n-    AtomicBoolean gotEvent = new AtomicBoolean(false);\n+    final AtomicBoolean gotEvent = new AtomicBoolean(false);\n@@ -85,0 +92,1 @@\n+        robot.delay(1000);\n@@ -88,0 +96,1 @@\n+        robot.delay(500);\n","filename":"test\/jdk\/java\/awt\/KeyboardFocusmanager\/TypeAhead\/ButtonActionKeyTest\/ButtonActionKeyTest.java","additions":14,"deletions":5,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -100,0 +100,1 @@\n+            robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n","filename":"test\/jdk\/java\/awt\/LightweightComponent\/LightWeightTabFocus\/LightWeightTabFocus.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,0 +37,1 @@\n+ * @build jdk.test.lib.Platform\n@@ -40,0 +41,3 @@\n+import jdk.test.lib.Platform;\n+import jtreg.SkippedException;\n+\n@@ -43,0 +47,11 @@\n+        if (Platform.isOnWayland()) {\n+            \/\/ Some tested systems are still use XTEST(X11 protocol)\n+            \/\/ for key and mouse press emulation, but this will not work\n+            \/\/ outside of X11.\n+            \/\/ An emulated input event will reach X11 clients, but not the\n+            \/\/ Wayland compositor, which is responsible for window restacking.\n+            \/\/\n+            \/\/ This skip can be removed later once all systems switch to\n+            \/\/ the default remote desktop XDG portal.\n+             throw new SkippedException(\"SKIPPED: robot functionality is limited on the current platform.\");\n+        }\n","filename":"test\/jdk\/java\/awt\/Modal\/ToFront\/DialogToFrontModeless1Test.java","additions":16,"deletions":1,"binary":false,"changes":17,"status":"modified"}]}