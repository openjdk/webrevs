{"files":[{"patch":"@@ -82,0 +82,1 @@\n+\/\/ 0\n@@ -132,1 +133,0 @@\n-\n@@ -185,1 +185,27 @@\n-ATTRIBUTE_ALIGNED(64) static const uint16_t kyberAvx512_12To16Perms[] = {\n+ATTRIBUTE_ALIGNED(64) static const uint16_t kyberAvx512_nttMultPerms[] = {\n+    0x00, 0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0E,\n+    0x10, 0x12, 0x14, 0x16, 0x18, 0x1A, 0x1C, 0x1E,\n+    0x20, 0x22, 0x24, 0x26, 0x28, 0x2A, 0x2C, 0x2E,\n+    0x30, 0x32, 0x34, 0x36, 0x38, 0x3A, 0x3C, 0x3E,\n+\n+    0x01, 0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F,\n+    0x11, 0x13, 0x15, 0x17, 0x19, 0x1B, 0x1D, 0x1F,\n+    0x21, 0x23, 0x25, 0x27, 0x29, 0x2B, 0x2D, 0x2F,\n+    0x31, 0x33, 0x35, 0x37, 0x39, 0x3B, 0x3D, 0x3F,\n+\n+    0x00, 0x20, 0x01, 0x21, 0x02, 0x22, 0x03, 0x23,\n+    0x04, 0x24, 0x05, 0x25, 0x06, 0x26, 0x07, 0x27,\n+    0x08, 0x28, 0x09, 0x29, 0x0A, 0x2A, 0x0B, 0x2B,\n+    0x0C, 0x2C, 0x0D, 0x2D, 0x0E, 0x2E, 0x0F, 0x2F,\n+\n+    0x10, 0x30, 0x11, 0x31, 0x12, 0x32, 0x13, 0x33,\n+    0x14, 0x34, 0x15, 0x35, 0x16, 0x36, 0x17, 0x37,\n+    0x18, 0x38, 0x19, 0x39, 0x1A, 0x3A, 0x1B, 0x3B,\n+    0x1C, 0x3C, 0x1D, 0x3D, 0x1E, 0x3E, 0x1F, 0x3F\n+  };\n+\n+static address kyberAvx512_nttMultPermsAddr() {\n+  return (address) kyberAvx512_nttMultPerms;\n+}\n+\n+  ATTRIBUTE_ALIGNED(64) static const uint16_t kyberAvx512_12To16Perms[] = {\n@@ -227,25 +253,0 @@\n-ATTRIBUTE_ALIGNED(64) static const uint16_t kyberAvx512_nttMultPerms[] = {\n-    0x00, 0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0E,\n-    0x10, 0x12, 0x14, 0x16, 0x18, 0x1A, 0x1C, 0x1E,\n-    0x20, 0x22, 0x24, 0x26, 0x28, 0x2A, 0x2C, 0x2E,\n-    0x30, 0x32, 0x34, 0x36, 0x38, 0x3A, 0x3C, 0x3E,\n-\n-    0x01, 0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F,\n-    0x11, 0x13, 0x15, 0x17, 0x19, 0x1B, 0x1D, 0x1F,\n-    0x21, 0x23, 0x25, 0x27, 0x29, 0x2B, 0x2D, 0x2F,\n-    0x31, 0x33, 0x35, 0x37, 0x39, 0x3B, 0x3D, 0x3F,\n-\n-    0x00, 0x20, 0x01, 0x21, 0x02, 0x22, 0x03, 0x23,\n-    0x04, 0x24, 0x05, 0x25, 0x06, 0x26, 0x07, 0x27,\n-    0x08, 0x28, 0x09, 0x29, 0x0A, 0x2A, 0x0B, 0x2B,\n-    0x0C, 0x2C, 0x0D, 0x2D, 0x0E, 0x2E, 0x0F, 0x2F,\n-\n-    0x10, 0x30, 0x11, 0x31, 0x12, 0x32, 0x13, 0x33,\n-    0x14, 0x34, 0x15, 0x35, 0x16, 0x36, 0x17, 0x37,\n-    0x18, 0x38, 0x19, 0x39, 0x1A, 0x3A, 0x1B, 0x3B,\n-    0x1C, 0x3C, 0x1D, 0x3D, 0x1E, 0x3E, 0x1F, 0x3F\n-  };\n-\n-static address kyberAvx512_nttMultPermsAddr() {\n-  return (address) kyberAvx512_nttMultPerms;\n-}\n@@ -794,2 +795,3 @@\n-\/\/ parsed (short[112]) = c_rarg1\n-\/\/ kyberConsts (short[]) = c_rarg2\n+\/\/ condensedOffs (int) = c_rarg1\n+\/\/ parsed (short[112]) = c_rarg2\n+\/\/ parsedLength (int) = c_rarg3\n@@ -840,2 +842,0 @@\n-    __ evmovdquw(xmm6, xmm27, Assembler::AVX_512bit);\n-    __ evmovdquw(xmm7, xmm28, Assembler::AVX_512bit);\n@@ -845,2 +845,0 @@\n-    __ evmovdquw(xmm14, xmm27, Assembler::AVX_512bit);\n-    __ evmovdquw(xmm15, xmm28, Assembler::AVX_512bit);\n@@ -853,2 +851,2 @@\n-    __ evpermi2w(xmm6, xmm3, xmm2, Assembler::AVX_512bit);\n-    __ evpermi2w(xmm7, xmm4, xmm2, Assembler::AVX_512bit);\n+    __ evpermt2w(xmm3, xmm27, xmm2, Assembler::AVX_512bit);\n+    __ evpermt2w(xmm4, xmm28, xmm2, Assembler::AVX_512bit);\n@@ -856,2 +854,2 @@\n-    __ evpermi2w(xmm14, xmm11, xmm10, Assembler::AVX_512bit);\n-    __ evpermi2w(xmm15, xmm12, xmm10, Assembler::AVX_512bit);\n+    __ evpermt2w(xmm11, xmm27, xmm10, Assembler::AVX_512bit);\n+    __ evpermt2w(xmm12, xmm28, xmm10, Assembler::AVX_512bit);\n@@ -859,2 +857,3 @@\n-    __ evpsraw(xmm2, k0, xmm7, 4, false, Assembler::AVX_512bit);\n-    __ evpsllw(xmm0, k0, xmm7, 8, false, Assembler::AVX_512bit);\n+\n+    __ evpsraw(xmm2, k0, xmm4, 4, false, Assembler::AVX_512bit);\n+    __ evpsllw(xmm0, k0, xmm4, 8, false, Assembler::AVX_512bit);\n@@ -862,2 +861,2 @@\n-    __ evpsllw(xmm8, k0, xmm15, 8, false, Assembler::AVX_512bit);\n-    __ evpsraw(xmm10, k0, xmm15, 4, false, Assembler::AVX_512bit);\n+    __ evpsllw(xmm8, k0, xmm12, 8, false, Assembler::AVX_512bit);\n+    __ evpsraw(xmm10, k0, xmm12, 4, false, Assembler::AVX_512bit);\n@@ -868,3 +867,1 @@\n-    __ evpaddw(xmm0, k0, xmm0, xmm6, false, Assembler::AVX_512bit);\n-    __ evpaddw(xmm9, k0, xmm9, xmm10, false, Assembler::AVX_512bit);\n-    __ evpaddw(xmm8, k0, xmm8, xmm14, false, Assembler::AVX_512bit);\n+    __ evpaddw(xmm0, k0, xmm0, xmm3, false, Assembler::AVX_512bit);\n@@ -872,0 +869,2 @@\n+    __ evpaddw(xmm9, k0, xmm9, xmm10, false, Assembler::AVX_512bit);\n+    __ evpaddw(xmm8, k0, xmm8, xmm11, false, Assembler::AVX_512bit);\n","filename":"src\/hotspot\/cpu\/x86\/stubGenerator_x86_64_kyber.cpp","additions":43,"deletions":44,"binary":false,"changes":87,"status":"modified"}]}