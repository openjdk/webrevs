{"files":[{"patch":"@@ -428,1 +428,1 @@\n- _new_aot_flags_used = true;\n+  _new_aot_flags_used = true;\n@@ -490,0 +490,4 @@\n+  if (!has_output && !has_config) {\n+      vm_exit_during_initialization(\"At least one of AOTCacheOutput and AOTConfiguration must be specified when using -XX:AOTMode=record\");\n+  }\n+\n@@ -502,4 +506,0 @@\n-  } else {\n-    if (!has_config) {\n-      vm_exit_during_initialization(\"-XX:AOTMode=record cannot be used without setting AOTCacheOutput or AOTConfiguration\");\n-    }\n@@ -526,1 +526,1 @@\n-    vm_exit_during_initialization(\"-XX:AOTMode=create cannot be used without setting AOTConfiguration\");\n+    vm_exit_during_initialization(\"AOTConfiguration must be specified when using -XX:AOTMode=create\");\n","filename":"src\/hotspot\/share\/cds\/cdsConfig.cpp","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -1082,3 +1082,3 @@\n-    if (strncmp(\"-XX:AOTCacheOutput=\", arg, 19) == 0 ||\n-        strncmp(\"-XX:AOTConfiguration=\", arg, 21) == 0 ||\n-        strncmp(\"-XX:AOTMode=\", arg, 12) == 0) {\n+    if (strstr(arg, \"-XX:AOTCacheOutput=\") == arg || \/\/ arg starts with ...\n+        strstr(arg, \"-XX:AOTConfiguration=\") == arg ||\n+        strstr(arg, \"-XX:AOTMode=\") == arg) {\n","filename":"src\/hotspot\/share\/cds\/metaspaceShared.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -3063,1 +3063,1 @@\n-    if (strncmp(option->optionString, \"-XX:AOTMode=\", 12) == 0) {\n+    if (strstr(option->optionString, \"-XX:AOTMode=\") == option->optionString) {\n@@ -3599,1 +3599,1 @@\n-    if (strncmp(optionString, \"-XX:AOTMode=\", 12) == 0 &&\n+    if (strstr(optionString, \"-XX:AOTMode=\") == optionString &&\n","filename":"src\/hotspot\/share\/runtime\/arguments.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -278,1 +278,1 @@\n-        out.shouldContain(\"-XX:AOTMode=record cannot be used without setting AOTCacheOutput or AOTConfiguration\");\n+        out.shouldContain(\"At least one of AOTCacheOutput and AOTConfiguration must be specified when using -XX:AOTMode=record\");\n@@ -285,1 +285,1 @@\n-        out.shouldContain(\"-XX:AOTMode=create cannot be used without setting AOTConfiguration\");\n+        out.shouldContain(\"AOTConfiguration must be specified when using -XX:AOTMode=create\");\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/aotFlags\/AOTFlags.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n- * @run driver JavaAOTOptions\n+ * @run driver JavaAOTOptionsEnvVar\n@@ -44,1 +44,1 @@\n-public class JavaAOTOptions {\n+public class JavaAOTOptionsEnvVar {\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/aotFlags\/JavaAOTOptionsEnvVar.java","additions":2,"deletions":2,"binary":false,"changes":4,"previous_filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/aotFlags\/JavaAOTOptions.java","status":"renamed"}]}