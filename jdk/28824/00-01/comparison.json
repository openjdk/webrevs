{"files":[{"patch":"@@ -2467,1 +2467,1 @@\n-CPUTime_t os::detailed_thread_cpu_time(Thread* t) {\n+cpu_time_t os::detailed_thread_cpu_time(Thread* t) {\n@@ -2472,4 +2472,1 @@\n-    return {\n-      -1,\n-      -1\n-    };\n+    return { -1, -1 };\n@@ -2483,9 +2480,0 @@\n-\n-jlong os::thread_cpu_time(Thread *thread, bool user_sys_cpu_time) {\n-  CPUTime_t cpu_time = detailed_thread_cpu_time(thread);\n-  if (cpu_time.user == -1) {\n-    return -1;\n-  }\n-  return user_sys_cpu_time ? cpu_time.user + cpu_time.system : cpu_time.user;\n-}\n-\n","filename":"src\/hotspot\/os\/aix\/os_aix.cpp","additions":2,"deletions":14,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -2293,1 +2293,1 @@\n-CPUTime_t os::detailed_thread_cpu_time(Thread* t) {\n+cpu_time_t os::detailed_thread_cpu_time(Thread* t) {\n@@ -2303,4 +2303,1 @@\n-    return {\n-      -1,\n-      -1\n-    };\n+    return { -1, -1 };\n@@ -2310,2 +2307,2 @@\n-    ((jlong) tinfo.user_time.seconds * (jlong)1000000000) + ((jlong) tinfo.user_time.microseconds * (jlong)1000),\n-    ((jlong) tinfo.system_time.seconds * (jlong)1000000000) + ((jlong)tinfo.system_time.microseconds * (jlong)1000)\n+    ((jlong) tinfo.user_time.seconds * NANOSECS_PER_SEC) + ((jlong) tinfo.user_time.microseconds * MICROS_PER_SEC),\n+    ((jlong) tinfo.system_time.seconds * NANOSECS_PER_SEC) + ((jlong)tinfo.system_time.microseconds * MICROS_PER_SEC)\n@@ -2315,1 +2312,1 @@\n-  return {0, 0};\n+  return { 0, 0 };\n@@ -2353,14 +2350,0 @@\n-jlong os::thread_cpu_time(Thread *thread, bool user_sys_cpu_time) {\n-#ifdef __APPLE__\n-  CPUTime_t cpu_time = detailed_thread_cpu_time(thread);\n-  if (cpu_time.user == -1) {\n-    return -1;\n-  }\n-  return user_sys_cpu_time ? cpu_time.user + cpu_time.system : cpu_time.user;\n-#else\n-  Unimplemented();\n-  return 0;\n-#endif\n-}\n-\n-\n","filename":"src\/hotspot\/os\/bsd\/os_bsd.cpp","additions":5,"deletions":22,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -5001,1 +5001,1 @@\n-CPUTime_t os::detailed_thread_cpu_time(Thread* t) {\n+cpu_time_t os::detailed_thread_cpu_time(Thread* t) {\n@@ -5033,8 +5033,0 @@\n-jlong os::thread_cpu_time(Thread *thread, bool user_sys_cpu_time) {\n-  if (user_sys_cpu_time) {\n-    return total_thread_cpu_time(thread);\n-  } else {\n-    return user_thread_cpu_time(thread);\n-  }\n-}\n-\n","filename":"src\/hotspot\/os\/linux\/os_linux.cpp","additions":1,"deletions":9,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -4893,1 +4893,3 @@\n-CPUTime_t os::detailed_thread_cpu_time(Thread* t) {\n+constexpr jlong filetime_interval = 100;\n+\n+cpu_time_t os::detailed_thread_cpu_time(Thread* t) {\n@@ -4901,4 +4903,1 @@\n-    return {\n-      -1,\n-      -1\n-    };\n+    return { -1, -1 };\n@@ -4908,2 +4907,2 @@\n-    FT2INT64(UserTime) * 100,\n-    FT2INT64(KernelTime) * 100\n+    FT2INT64(UserTime) * filetime_interval,\n+    FT2INT64(KernelTime) * filetime_interval\n@@ -4935,8 +4934,0 @@\n-jlong os::thread_cpu_time(Thread* thread, bool user_sys_cpu_time) {\n-  CPUTime_t cpu_time = detailed_thread_cpu_time(thread);\n-  if (cpu_time.user == -1) {\n-    return -1;\n-  }\n-  return user_sys_cpu_time ? cpu_time.user + cpu_time.system : cpu_time.user;\n-}\n-\n","filename":"src\/hotspot\/os\/windows\/os_windows.cpp","additions":6,"deletions":15,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -82,3 +82,3 @@\n-    CPUTime_t cpu_time_vm = CPUTimeUsage::GC::detailed_gc_operation_vm_thread();\n-    CPUTime_t cpu_time_gc = CPUTimeUsage::GC::detailed_gc_threads();\n-    CPUTime_t cpu_time_stringdedup = CPUTimeUsage::GC::detailed_stringdedup();\n+    cpu_time_t cpu_time_vm = CPUTimeUsage::GC::detailed_gc_operation_vm_thread();\n+    cpu_time_t cpu_time_gc = CPUTimeUsage::GC::detailed_gc_threads();\n+    cpu_time_t cpu_time_stringdedup = CPUTimeUsage::GC::detailed_stringdedup();\n@@ -97,3 +97,3 @@\n-    CPUTime_t cpu_time_vm = CPUTimeUsage::GC::detailed_gc_operation_vm_thread();\n-    CPUTime_t cpu_time_gc = CPUTimeUsage::GC::detailed_gc_threads();\n-    CPUTime_t cpu_time_stringdedup = CPUTimeUsage::GC::detailed_stringdedup();\n+    cpu_time_t cpu_time_vm = CPUTimeUsage::GC::detailed_gc_operation_vm_thread();\n+    cpu_time_t cpu_time_gc = CPUTimeUsage::GC::detailed_gc_threads();\n+    cpu_time_t cpu_time_stringdedup = CPUTimeUsage::GC::detailed_stringdedup();\n","filename":"src\/hotspot\/share\/gc\/shared\/gcTraceTime.cpp","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -38,4 +38,4 @@\n-  bool _active;                 \/\/ true if times will be measured and printed\n-  jlong _starting_user_time;   \/\/ user time at start of measurement\n-  jlong _starting_system_time; \/\/ system time at start of measurement\n-  double _starting_real_time;   \/\/ real time at start of measurement\n+  bool _active;                 \/\/ True if times will be measured and printed\n+  jlong _starting_user_time;    \/\/ User time at start of measurement\n+  jlong _starting_system_time;  \/\/ System time at start of measurement\n+  double _starting_real_time;   \/\/ Real time at start of measurement\n","filename":"src\/hotspot\/share\/gc\/shared\/gcTraceTime.hpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -509,0 +509,7 @@\n+jlong os::thread_cpu_time(Thread* thread, bool user_sys_cpu_time) {\n+  cpu_time_t cpu_time = detailed_thread_cpu_time(thread);\n+  if (cpu_time.user == -1) {\n+    return -1;\n+  }\n+  return user_sys_cpu_time ? cpu_time.user + cpu_time.system : cpu_time.user;\n+}\n","filename":"src\/hotspot\/share\/runtime\/os.cpp","additions":7,"deletions":0,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -170,1 +170,1 @@\n-struct CPUTime {\n+struct cpu_time {\n@@ -174,1 +174,1 @@\n-typedef struct CPUTime CPUTime_t;\n+typedef struct cpu_time cpu_time_t;\n@@ -1003,1 +1003,1 @@\n-  static CPUTime_t detailed_thread_cpu_time(Thread* t);\n+  static cpu_time_t detailed_thread_cpu_time(Thread* t);\n","filename":"src\/hotspot\/share\/runtime\/os.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -38,2 +38,2 @@\n-static inline CPUTime_t detailed_thread_cpu_time_or_zero(Thread* thread) {\n-  CPUTime_t cpu_time = os::detailed_thread_cpu_time(thread);\n+static inline cpu_time_t detailed_thread_cpu_time_or_zero(Thread* thread) {\n+  cpu_time_t cpu_time = os::detailed_thread_cpu_time(thread);\n@@ -42,4 +42,1 @@\n-    return {\n-      0,\n-      0\n-    };\n+    return { 0, 0 };\n@@ -72,4 +69,1 @@\n-  CPUTime_t _cpu_time = {\n-    0,\n-    0\n-  };\n+  cpu_time_t _cpu_time = { 0, 0 };\n@@ -79,1 +73,1 @@\n-    CPUTime_t new_value = detailed_thread_cpu_time_or_zero(thread);\n+    cpu_time_t new_value = detailed_thread_cpu_time_or_zero(thread);\n@@ -83,1 +77,1 @@\n-  CPUTime_t cpu_time() { return _cpu_time; };\n+  cpu_time_t cpu_time() { return _cpu_time; };\n@@ -107,1 +101,1 @@\n-CPUTime_t CPUTimeUsage::GC::detailed_gc_threads() {\n+cpu_time_t CPUTimeUsage::GC::detailed_gc_threads() {\n@@ -113,1 +107,1 @@\n-CPUTime_t CPUTimeUsage::GC::detailed_gc_operation_vm_thread() {\n+cpu_time_t CPUTimeUsage::GC::detailed_gc_operation_vm_thread() {\n@@ -118,1 +112,1 @@\n-CPUTime_t CPUTimeUsage::GC::detailed_stringdedup() {\n+cpu_time_t CPUTimeUsage::GC::detailed_stringdedup() {\n@@ -122,4 +116,1 @@\n-  return {\n-    0,\n-    0\n-  };\n+  return { 0, 0 };\n","filename":"src\/hotspot\/share\/services\/cpuTimeUsage.cpp","additions":10,"deletions":19,"binary":false,"changes":29,"status":"modified"},{"patch":"@@ -42,1 +42,1 @@\n-    static CPUTime_t detailed_gc_threads();\n+    static cpu_time_t detailed_gc_threads();\n@@ -45,2 +45,2 @@\n-    static CPUTime_t detailed_gc_operation_vm_thread();\n-    static CPUTime_t detailed_stringdedup();\n+    static cpu_time_t detailed_gc_operation_vm_thread();\n+    static cpu_time_t detailed_stringdedup();\n","filename":"src\/hotspot\/share\/services\/cpuTimeUsage.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -301,0 +301,1 @@\n+const jlong MICROS_PER_SEC        = CONST64(1000);\n","filename":"src\/hotspot\/share\/utilities\/globalDefinitions.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"}]}