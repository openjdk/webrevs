{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -25,0 +25,1 @@\n+#include \"cppstdlib\/new.hpp\"\n@@ -26,1 +27,1 @@\n-#include \"runtime\/atomicAccess.hpp\"\n+#include \"runtime\/atomic.hpp\"\n@@ -83,1 +84,1 @@\n-  _tasks = NEW_C_HEAP_ARRAY(bool, n, mtInternal);\n+  _tasks = NEW_C_HEAP_ARRAY(Atomic<bool>, n, mtInternal);\n@@ -85,1 +86,1 @@\n-    _tasks[i] = false;\n+    ::new (&_tasks[i]) Atomic<bool>(false);\n@@ -91,1 +92,1 @@\n-  if (AtomicAccess::cmpxchg(&_verification_done, false, true)) {\n+  if (_verification_done.compare_exchange(false, true)) {\n@@ -97,1 +98,1 @@\n-    if (!_tasks[i]) {\n+    if (!_tasks[i].load_relaxed()) {\n@@ -112,1 +113,1 @@\n-    assert(!_tasks[task_index], \"%d is both claimed and skipped.\", task_index);\n+    assert(!_tasks[task_index].load_relaxed(), \"%d is both claimed and skipped.\", task_index);\n@@ -119,1 +120,1 @@\n-  return !_tasks[t] && !AtomicAccess::cmpxchg(&_tasks[t], false, true);\n+  return !_tasks[t].load_relaxed() && !_tasks[t].compare_exchange(false, true);\n@@ -123,2 +124,2 @@\n-  assert(_verification_done, \"all_tasks_claimed must have been called.\");\n-  FREE_C_HEAP_ARRAY(bool, _tasks);\n+  assert(_verification_done.load_relaxed(), \"all_tasks_claimed must have been called.\");\n+  FREE_C_HEAP_ARRAY(Atomic<bool>, _tasks);\n@@ -130,1 +131,1 @@\n-  t = _num_claimed;\n+  t = _num_claimed.load_relaxed();\n@@ -132,1 +133,1 @@\n-    t = AtomicAccess::add(&_num_claimed, 1u) - 1;\n+    t = _num_claimed.fetch_then_add(1u);\n","filename":"src\/hotspot\/share\/gc\/shared\/workerUtils.cpp","additions":13,"deletions":12,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2002, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2002, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,0 +31,1 @@\n+#include \"runtime\/atomic.hpp\"\n@@ -82,1 +83,1 @@\n-  volatile bool* _tasks;\n+  Atomic<bool>* _tasks;\n@@ -86,1 +87,1 @@\n-  DEBUG_ONLY(volatile bool _verification_done = false;)\n+  DEBUG_ONLY(Atomic<bool> _verification_done;)\n@@ -130,1 +131,1 @@\n-  volatile uint _num_claimed;   \/\/ Number of tasks claimed.\n+  Atomic<uint> _num_claimed;    \/\/ Number of tasks claimed.\n@@ -138,1 +139,2 @@\n-    assert(_num_claimed >= _num_tasks, \"Claimed %u tasks of %u\", _num_claimed, _num_tasks);\n+    assert(_num_claimed.load_relaxed() >= _num_tasks,\n+           \"Claimed %u tasks of %u\", _num_claimed.load_relaxed(), _num_tasks);\n","filename":"src\/hotspot\/share\/gc\/shared\/workerUtils.hpp","additions":7,"deletions":5,"binary":false,"changes":12,"status":"modified"}]}