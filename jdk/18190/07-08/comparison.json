{"files":[{"patch":"@@ -496,3 +496,0 @@\n-  \/\/ in case no specific filename was passed to heap_dump command,\n-  \/\/ attempt to use the HeapDumpPath if it was set\n-  const char* filename = HeapDumpPath;\n@@ -522,8 +519,8 @@\n-  if (filename == nullptr && !_filename.is_set()) {\n-    output()->print_cr(\"Filename or -XX:HeapDumpPath must be set!\");\n-    return;\n-  } else if (_filename.is_set()) {\n-    filename = _filename.value();\n-  } else {\n-    \/\/ use HeapDumpPath (file or directory is possible)\n-    use_heapdump_path = true;\n+  if (!_filename.is_set()) {\n+    if (HeapDumpPath != nullptr) {\n+      \/\/ use HeapDumpPath (file or directory is possible)\n+      use_heapdump_path = true;\n+    } else {\n+      output()->print_cr(\"Filename or -XX:HeapDumpPath must be set!\");\n+      return;\n+    }\n@@ -540,1 +537,1 @@\n-    dumper.dump(filename, output(), (int)level, _overwrite.value(), (uint)parallel);\n+    dumper.dump(_filename.value(), output(), (int)level, _overwrite.value(), (uint)parallel);\n","filename":"src\/hotspot\/share\/services\/diagnosticCommand.cpp","additions":9,"deletions":12,"binary":false,"changes":21,"status":"modified"}]}