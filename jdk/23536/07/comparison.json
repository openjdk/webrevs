{"files":[{"patch":"@@ -37,0 +37,1 @@\n+import java.io.File;\n@@ -65,1 +66,17 @@\n-        var processBuilder = new ProcessBuilder(systeminfoPath);\n+        List<String> command = new ArrayList<>();\n+\n+        File systemRoot =\n+            System.getenv(\"SystemRoot\") != null ? new File(System.getenv(\"SystemRoot\")) :\n+            System.getenv(\"WINDIR\")     != null ? new File(System.getenv (\"WINDIR\")) :\n+            null;\n+        if (systemRoot == null) {\n+            throw new RuntimeException(\"SystemRoot or WINDIR environment variable is not set.\");\n+        }\n+        String systemDirW = new File(systemRoot, \"System32\").getPath();\n+\n+        \/\/ Force language to English before running systeminfo to get the OS version\n+        command.addAll(List.of(\"cmd.exe\", \"\/c\", \"set\", \"PATH=%PATH%;\" + systemDirW + \";\" + systemDirW + \"\\\\wbem\", \"&&\"));\n+        command.addAll(List.of(\"chcp\", \"437\", \">nul\", \"2>&1\", \"&&\"));\n+        command.add(systeminfoPath);\n+\n+        var processBuilder = new ProcessBuilder(command);\n","filename":"test\/hotspot\/jtreg\/runtime\/os\/windows\/TestAvailableProcessors.java","additions":18,"deletions":1,"binary":false,"changes":19,"status":"modified"}]}