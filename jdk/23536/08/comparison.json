{"files":[{"patch":"@@ -37,0 +37,1 @@\n+import java.io.File;\n@@ -65,1 +66,17 @@\n-        var processBuilder = new ProcessBuilder(systeminfoPath);\n+        List<String> command = new ArrayList<>();\n+\n+        String systemRoot = System.getenv(\"SystemRoot\");\n+        if (systemRoot == null) {\n+            systemRoot = System.getenv(\"WINDIR\");\n+            if (systemRoot == null) {\n+                throw new RuntimeException(\"SystemRoot or WINDIR environment variable is not set.\");\n+            }\n+        }\n+        String system32 = Path.of(systemRoot, \"System32\").toString();\n+\n+        \/\/ It switches the active code page to cp437, the default code page for US english.\n+        command.addAll(List.of(\"cmd.exe\", \"\/c\", \"set\", \"PATH=%PATH%;\" + system32 + \";\" + system32 + \"\\\\wbem\", \"&&\"));\n+        command.addAll(List.of(\"chcp\", \"437\", \">nul\", \"2>&1\", \"&&\"));\n+        command.add(systeminfoPath);\n+\n+        var processBuilder = new ProcessBuilder(command);\n","filename":"test\/hotspot\/jtreg\/runtime\/os\/windows\/TestAvailableProcessors.java","additions":18,"deletions":1,"binary":false,"changes":19,"status":"modified"}]}