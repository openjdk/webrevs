{"files":[{"patch":"@@ -68,4 +68,1 @@\n-        File systemRoot =\n-            System.getenv(\"SystemRoot\") != null ? new File(System.getenv(\"SystemRoot\")) :\n-            System.getenv(\"WINDIR\")     != null ? new File(System.getenv (\"WINDIR\")) :\n-            null;\n+        String systemRoot = System.getenv(\"SystemRoot\");\n@@ -73,1 +70,4 @@\n-            throw new RuntimeException(\"SystemRoot or WINDIR environment variable is not set.\");\n+            systemRoot = System.getenv(\"WINDIR\");\n+            if (systemRoot == null) {\n+                throw new RuntimeException(\"SystemRoot or WINDIR environment variable is not set.\");\n+            }\n@@ -75,1 +75,1 @@\n-        String systemDirW = new File(systemRoot, \"System32\").getPath();\n+        String system32 = Path.of(systemRoot, \"System32\").toString();\n@@ -77,2 +77,2 @@\n-        \/\/ Force language to English before running systeminfo to get the OS version\n-        command.addAll(List.of(\"cmd.exe\", \"\/c\", \"set\", \"PATH=%PATH%;\" + systemDirW + \";\" + systemDirW + \"\\\\wbem\", \"&&\"));\n+        \/\/ It switches the active code page to cp437, the default code page for US english.\n+        command.addAll(List.of(\"cmd.exe\", \"\/c\", \"set\", \"PATH=%PATH%;\" + system32 + \";\" + system32 + \"\\\\wbem\", \"&&\"));\n","filename":"test\/hotspot\/jtreg\/runtime\/os\/windows\/TestAvailableProcessors.java","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"}]}