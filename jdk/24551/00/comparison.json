{"files":[{"patch":"@@ -535,8 +535,1 @@\n-    private static final ColorModel[] COLOR_MODELS = {\n-        \/\/ Transparency.OPAQUE\n-        new DirectColorModel(24, 0x00ff0000, 0x0000ff00, 0x000000ff, 0x00000000),\n-        \/\/ Transparency.BITMASK\n-        new DirectColorModel(25, 0x00ff0000, 0x0000ff00, 0x000000ff, 0x01000000),\n-        \/\/ Transparency.TRANSLUCENT\n-        ColorModel.getRGBdefault(),\n-    };\n+    private static final ColorModel[] COLOR_MODELS = new ColorModel[3];\n@@ -612,2 +605,2 @@\n-        ColorModel cm = COLOR_MODELS[transparency - 1];\n-        BufferedImage img = new BufferedImage(cm, raster, false, null);\n+        ColorModel cm = colorModelFor(transparency);\n+        BufferedImage img = new BufferedImage(cm, raster, true, null);\n@@ -621,0 +614,12 @@\n+    private ColorModel colorModelFor(int transparency) {\n+        synchronized (COLOR_MODELS) {\n+            int index = transparency - 1;\n+            if (COLOR_MODELS[index] == null) {\n+                COLOR_MODELS[index] = GraphicsEnvironment.getLocalGraphicsEnvironment()\n+                        .getDefaultScreenDevice().getDefaultConfiguration()\n+                        .getColorModel(transparency);\n+            }\n+            return COLOR_MODELS[index];\n+        }\n+    }\n+\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/java\/swing\/plaf\/gtk\/GTKEngine.java","additions":15,"deletions":10,"binary":false,"changes":25,"status":"modified"}]}