{"files":[{"patch":"@@ -105,0 +105,1 @@\n+#include \"utilities\/vmError.hpp\"\n@@ -2731,0 +2732,8 @@\n+WB_ENTRY(void, WB_ControlledCrash(JNIEnv* env, jobject o, jint how))\n+#ifdef ASSERT\n+  VMError::controlled_crash(how);\n+#else\n+  THROW_MSG(vmSymbols::java_lang_UnsupportedOperationException(), \"Only available in debug builds\");\n+#endif\n+WB_END\n+\n@@ -3022,1 +3031,2 @@\n-  {CC\"isStatic\", CC\"()Z\",                             (void*)&WB_IsStaticallyLinked}\n+  {CC\"isStatic\", CC\"()Z\",                             (void*)&WB_IsStaticallyLinked},\n+  {CC\"controlledCrash\",CC\"(I)V\",                      (void*)&WB_ControlledCrash},\n@@ -3025,1 +3035,0 @@\n-\n","filename":"src\/hotspot\/share\/prims\/whitebox.cpp","additions":11,"deletions":2,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -33,0 +33,2 @@\n+ * @build jdk.test.whitebox.WhiteBox\n+ * @run driver jdk.test.lib.helpers.ClassFileInstaller jdk.test.whitebox.WhiteBox\n@@ -38,0 +40,2 @@\n+\n+import jdk.test.whitebox.WhiteBox;\n@@ -48,0 +52,6 @@\n+        if (args.length > 0 && args[0].equals(\"test\")) {\n+            Thread.sleep(2000); \/\/ Wait to accumulate log entries\n+            WhiteBox.getWhiteBox().controlledCrash(2);\n+            throw new RuntimeException(\"Still alive?\");\n+        }\n+\n@@ -49,3 +59,4 @@\n-            \"-XX:+UnlockDiagnosticVMOptions\", \"-Xmx100M\", \"-XX:-CreateCoredumpOnCrash\",\n-            \"-XX:ErrorHandlerTest=2\",\n-            \"-version\");\n+            \"-Xbootclasspath\/a:.\",\n+            \"-XX:+UnlockDiagnosticVMOptions\", \"-XX:+WhiteBoxAPI\",\n+            \"-Xmx100M\", \"-XX:-CreateCoredumpOnCrash\",\n+            ShowEventsOnCrashTest.class.getName(), \"test\");\n","filename":"test\/hotspot\/jtreg\/runtime\/ErrorHandling\/ShowEventsOnCrashTest.java","additions":14,"deletions":3,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -854,0 +854,3 @@\n+\n+  \/\/ Force a controlled crash (debug builds only)\n+  public native void controlledCrash(int how);\n","filename":"test\/lib\/jdk\/test\/whitebox\/WhiteBox.java","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"}]}