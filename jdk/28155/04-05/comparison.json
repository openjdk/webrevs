{"files":[{"patch":"@@ -608,1 +608,0 @@\n-        String targetRelease;\n@@ -610,10 +609,4 @@\n-        try {\n-            targetRelease = getReleaseInfo(target).get();\n-            if (currentRelease.equals(targetRelease)) {\n-                return;\n-            }\n-        } catch (NoSuchElementException nsee) {\n-            \/\/ target release has no release.txt\n-            \/\/ the java.base module must be older than the jlink runtime\n-            \/\/ silently ignore and fall through to version mismatch\n-            targetRelease = \"\";\n+        Optional<String> releaseInfo = getReleaseInfo(target);\n+        if (releaseInfo.isEmpty()) {\n+            throw new IllegalArgumentException(taskHelper.getMessage(\"err.jlink.version.missing\",\n+                    currentRelease));\n@@ -622,4 +615,7 @@\n-        \/\/ Current runtime image and the target runtime image are not compatible build\n-        throw new IllegalArgumentException(taskHelper.getMessage(\"err.jlink.version.mismatch\",\n-                currentRelease,\n-                targetRelease));\n+        var targetRelease = releaseInfo.get();\n+        if (!currentRelease.equals(targetRelease)) {\n+            \/\/ Current runtime image and the target runtime image are not compatible build\n+            throw new IllegalArgumentException(taskHelper.getMessage(\"err.jlink.version.mismatch\",\n+                    currentRelease,\n+                    targetRelease));\n+        }\n","filename":"src\/jdk.jlink\/share\/classes\/jdk\/tools\/jlink\/internal\/JlinkTask.java","additions":11,"deletions":15,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -134,0 +134,2 @@\n+err.jlink.version.missing=jlink build {0} cannot find the build signature \\\n+\\ in the java.base specified on module path, likely from an earlier build.\n","filename":"src\/jdk.jlink\/share\/classes\/jdk\/tools\/jlink\/resources\/jlink.properties","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"}]}