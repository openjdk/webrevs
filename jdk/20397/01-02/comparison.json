{"files":[{"patch":"@@ -51,0 +51,1 @@\n+static jboolean is_vm_dead = JNI_FALSE;\n@@ -341,0 +342,1 @@\n+    is_vm_dead = JNI_TRUE;\n@@ -361,0 +363,6 @@\n+    if (is_vm_dead == JNI_TRUE) {\n+        printf(\"\\nIgnoring ClassPrepare event during the dead phase\\n\");\n+        err = (*jvmti)->RawMonitorExit(jvmti, event_mon);\n+        check_jvmti_error(jvmti, \"ClassPrepare event: Failed in RawMonitorExit\", err);\n+        return;\n+    }\n@@ -363,5 +371,3 @@\n-        if (phase != JVMTI_PHASE_DEAD) {\n-            printf(\"  ## Error: unexpected phase: %d, expected: %d or %d or %d\\n\",\n-                   phase, JVMTI_PHASE_START, JVMTI_PHASE_LIVE, JVMTI_PHASE_DEAD);\n-            result = FAILED;\n-        }\n+        printf(\"  ## Error: unexpected phase: %d, expected: %d or %d\\n\",\n+               phase, JVMTI_PHASE_START, JVMTI_PHASE_LIVE);\n+        result = FAILED;\n","filename":"test\/hotspot\/jtreg\/serviceability\/jvmti\/StartPhase\/AllowedFunctions\/libAllowedFunctions.c","additions":11,"deletions":5,"binary":false,"changes":16,"status":"modified"}]}