{"files":[{"patch":"@@ -43,6 +43,1 @@\n-    static boolean error = false;\n-\n-    public static void read (InputStream i) throws IOException {\n-        while (i.read() != -1);\n-        i.close();\n-    }\n+    static boolean handlerIsDaemon = false;\n@@ -55,1 +50,1 @@\n-                    read(is);\n+                    is.readAllBytes();\n@@ -61,1 +56,1 @@\n-                    error = Thread.currentThread().isDaemon();\n+                    handlerIsDaemon = Thread.currentThread().isDaemon();\n@@ -81,3 +76,4 @@\n-            read(is);\n-            if (error) {\n-                throw new RuntimeException(\"error in test\");\n+            is.readAllBytes();\n+            is.close();\n+            if (handlerIsDaemon) {\n+                throw new RuntimeException(\"request was handled by a daemon thread\");\n","filename":"test\/jdk\/com\/sun\/net\/httpserver\/bugs\/B6431193.java","additions":7,"deletions":11,"binary":false,"changes":18,"status":"modified"}]}