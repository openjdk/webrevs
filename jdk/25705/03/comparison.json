{"files":[{"patch":"@@ -837,0 +837,1 @@\n+java\/awt\/Cursor\/CursorDragTest\/ListDragCursor.java 7177297 macosx-all\n","filename":"test\/jdk\/ProblemList.txt","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -28,2 +28,0 @@\n- * @library \/java\/awt\/regtesthelpers\n- * @build PassFailJFrame\n@@ -33,0 +31,1 @@\n+import java.awt.Button;\n@@ -34,0 +33,2 @@\n+import java.awt.Dimension;\n+import java.awt.EventQueue;\n@@ -35,0 +36,1 @@\n+import java.awt.GridBagLayout;\n@@ -38,0 +40,1 @@\n+import java.util.concurrent.CountDownLatch;\n@@ -40,6 +43,3 @@\n-    public static void main(String[] args) throws Exception {\n-        String INSTRUCTIONS = \"\"\"\n-                1. Move mouse to the TextArea.\n-                2. Press the left mouse button.\n-                3. Drag mouse to the list.\n-                4. Release the left mouse button.\n+    static Frame testFrame;\n+    static Frame instructionsFrame;\n+    static CountDownLatch countDownLatch;\n@@ -47,5 +47,3 @@\n-                If the mouse cursor starts as a Text Line Cursor and changes\n-                to a regular Pointer Cursor, then Hand Cursor when hovering\n-                the list, pass the test. This test fails if the cursor does\n-                not update at all when pointing over the different components.\n-                \"\"\";\n+    public static CountDownLatch createCountDownLatch() {\n+        return new CountDownLatch(1);\n+    }\n@@ -53,8 +51,8 @@\n-        PassFailJFrame.builder()\n-                .title(\"Test Instructions\")\n-                .instructions(INSTRUCTIONS)\n-                .rows((int) INSTRUCTIONS.lines().count() + 2)\n-                .columns(35)\n-                .testUI(ListDragCursor::createUI)\n-                .build()\n-                .awaitAndCheck();\n+    public static void main(String[] args) throws Exception {\n+        countDownLatch = createCountDownLatch();\n+        EventQueue.invokeAndWait(() -> {\n+            createTestFrame();\n+            createInstructionsFrame();\n+        });\n+        countDownLatch.await();\n+        System.out.println(\"Test Passed\");\n@@ -63,1 +61,1 @@\n-    public static Frame createUI() {\n+    static void createTestFrame() {\n@@ -81,2 +79,56 @@\n-        frame.setBounds(300, 100, 300, 150);\n-        return frame;\n+        frame.setSize(300, 150);\n+        frame.setLocation(450, 400);\n+        frame.setVisible(true);\n+    }\n+\n+    static void createInstructionsFrame() {\n+        String INSTRUCTIONS = \"\"\"\n+                1. Move mouse to the TextArea.\n+                2. Press the left mouse button.\n+                3. Drag mouse to the list.\n+                4. Release the left mouse button.\n+\n+                The mouse cursor should appear as an I-beam cursor\n+                and should stay the same while dragging across the\n+                components. Once you reach the list, release the\n+                left mouse button. Immediately after, the cursor\n+                should change to a Hand cursor. If true, this test\n+                passes.\n+\n+                The test fails if the cursor updates while dragging\n+                over the components before releasing the left\n+                mouse button.\n+                \"\"\";\n+\n+        TextArea textArea = new TextArea(INSTRUCTIONS,\n+                15, 60, TextArea.SCROLLBARS_NONE);\n+        Button passBtn = new Button(\"PASS\");\n+        Button failBtn = new Button(\"FAIL\");\n+        Panel btnPanel = new Panel(new GridBagLayout());\n+        Panel panel = new Panel(new GridBagLayout());\n+        instructionsFrame = new Frame(\"Test Instructions\");\n+        passBtn.setMaximumSize(new Dimension(100, 30));\n+        failBtn.setMaximumSize(new Dimension(100, 30));\n+        btnPanel.add(passBtn);\n+        btnPanel.add(failBtn);\n+        passBtn.addActionListener(e -> disposeFrames());\n+        failBtn.addActionListener(e -> {\n+            disposeFrames();\n+            throw new RuntimeException(\"Test Failed\");\n+        });\n+        panel.add(textArea);\n+        panel.add(btnPanel);\n+        instructionsFrame.add(panel);\n+        instructionsFrame.pack();\n+        instructionsFrame.setLocation(300, 100);\n+        instructionsFrame.setVisible(true);\n+    }\n+\n+    static void disposeFrames() {\n+        countDownLatch.countDown();\n+        if (testFrame != null) {\n+            testFrame.dispose();\n+        }\n+        if (instructionsFrame != null) {\n+            instructionsFrame.dispose();\n+        }\n","filename":"test\/jdk\/java\/awt\/Cursor\/CursorDragTest\/ListDragCursor.java","additions":76,"deletions":24,"binary":false,"changes":100,"status":"modified"}]}