{"files":[{"patch":"@@ -1473,1 +1473,1 @@\n-  log_gc_vtime();\n+  CollectedHeap::stop();\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CollectedHeap.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -164,1 +164,1 @@\n-  log_gc_vtime();\n+  CollectedHeap::stop();\n","filename":"src\/hotspot\/share\/gc\/parallel\/parallelScavengeHeap.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -149,5 +149,1 @@\n-  log_gc_vtime();\n-}\n-\n-double SerialHeap::elapsed_gc_vtime() {\n-  return (double) Universe::heap()->vm_vtime() \/ NANOSECS_PER_SEC;\n+  CollectedHeap::stop();\n","filename":"src\/hotspot\/share\/gc\/serial\/serialHeap.cpp","additions":1,"deletions":5,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -278,1 +278,0 @@\n-  double elapsed_gc_vtime() override;\n","filename":"src\/hotspot\/share\/gc\/serial\/serialHeap.hpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -239,1 +239,3 @@\n-    if (process_vtime == -1 || gc_vtime == -1) return;\n+    if (process_vtime == -1 || gc_vtime == -1) {\n+      return;\n+    }\n","filename":"src\/hotspot\/share\/gc\/shared\/collectedHeap.cpp","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -245,1 +245,1 @@\n-  virtual void stop() {}\n+  virtual void stop() { log_gc_vtime(); }\n","filename":"src\/hotspot\/share\/gc\/shared\/collectedHeap.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -32,4 +32,4 @@\n-  jlong _start;\n-  bool _enabled;\n-  bool _gcLogging;\n-  Thread *_thread;\n+  jlong         _start;\n+  bool          _enabled;\n+  bool          _gcLogging;\n+  Thread*       _thread;\n@@ -38,1 +38,1 @@\n-  VTimeScope(VMThread *thread);\n+  VTimeScope(VMThread *thread, bool operation_is_gc);\n","filename":"src\/hotspot\/share\/gc\/shared\/vtimeScope.hpp","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -32,1 +32,1 @@\n-inline VTimeScope::VTimeScope(VMThread *thread)\n+inline VTimeScope::VTimeScope(VMThread *thread, bool operation_is_gc)\n@@ -34,1 +34,1 @@\n-      _gcLogging(log_is_enabled(Info, gc) || log_is_enabled(Info, gc, cpu)),\n+      _gcLogging(operation_is_gc && (log_is_enabled(Info, gc) || log_is_enabled(Info, gc, cpu))),\n@@ -36,1 +36,1 @@\n-  if (_enabled && _gcLogging) {\n+  if (_gcLogging && _enabled) {\n@@ -54,1 +54,1 @@\n-}\n\\ No newline at end of file\n+}\n","filename":"src\/hotspot\/share\/gc\/shared\/vtimeScope.inline.hpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2205,1 +2205,1 @@\n-  log_gc_vtime();\n+  CollectedHeap::stop();\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahHeap.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -107,0 +107,1 @@\n+  CollectedHeap::stop();\n@@ -108,1 +109,0 @@\n-  log_gc_vtime();\n","filename":"src\/hotspot\/share\/gc\/z\/zCollectedHeap.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -282,1 +282,1 @@\n-    VTimeScope vTimeScope(this);\n+    VTimeScope vTimeScope(this, op->operation_is_gc());\n","filename":"src\/hotspot\/share\/runtime\/vmThread.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}