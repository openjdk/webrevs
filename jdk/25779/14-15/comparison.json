{"files":[{"patch":"@@ -70,1 +70,0 @@\n-jlong  CollectedHeap::_vmthread_cpu_time = 0;\n@@ -222,1 +221,8 @@\n-  return (double)(cl.cpu_time() + _vmthread_cpu_time) \/ NANOSECS_PER_SEC;\n+  double string_dedup_cpu_time = UseStringDeduplication ?\n+    os::thread_cpu_time((Thread*)StringDedup::_processor->_thread) : 0;\n+\n+  if (string_dedup_cpu_time == -1) {\n+    return -1;\n+  }\n+\n+  return (double)(cl.cpu_time() + _vmthread_cpu_time + string_dedup_cpu_time) \/ NANOSECS_PER_SEC;\n@@ -306,0 +312,1 @@\n+  _vmthread_cpu_time(0),\n@@ -633,1 +640,0 @@\n-    double string_dedup_cpu_time = UseStringDeduplication ? (double)os::thread_cpu_time((Thread*)StringDedup::_processor->_thread) \/ NANOSECS_PER_SEC : 0;\n@@ -635,1 +641,1 @@\n-    if (process_cpu_time == -1 || gc_cpu_time == -1 || string_dedup_cpu_time == -1) {\n+    if (process_cpu_time == -1 || gc_cpu_time == -1) {\n@@ -641,1 +647,2 @@\n-    if (gc_cpu_time > process_cpu_time || process_cpu_time == 0 || gc_cpu_time == 0) {\n+    if (gc_cpu_time > process_cpu_time ||\n+        process_cpu_time == 0 || gc_cpu_time == 0) {\n@@ -646,1 +653,1 @@\n-      usage = 100 * (gc_cpu_time + string_dedup_cpu_time) \/ process_cpu_time;\n+      usage = 100 * gc_cpu_time \/ process_cpu_time;\n@@ -648,1 +655,1 @@\n-    out.print(\"GC CPU usage: %.2f%% (Process: %.4fs GC: %.4fs)\", usage, process_cpu_time, gc_cpu_time + string_dedup_cpu_time);\n+    out.print(\"GC CPU usage: %.2f%% (Process: %.4fs GC: %.4fs)\", usage, process_cpu_time, gc_cpu_time);\n","filename":"src\/hotspot\/share\/gc\/shared\/collectedHeap.cpp","additions":14,"deletions":7,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -135,1 +135,1 @@\n-  static jlong _vmthread_cpu_time;\n+  jlong _vmthread_cpu_time;\n@@ -253,1 +253,1 @@\n-  static void add_vmthread_cpu_time(jlong time);\n+  void add_vmthread_cpu_time(jlong time);\n","filename":"src\/hotspot\/share\/gc\/shared\/collectedHeap.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}