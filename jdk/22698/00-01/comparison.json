{"files":[{"patch":"@@ -54,0 +54,1 @@\n+    private static JFrame f;\n@@ -56,2 +57,3 @@\n-        Robot robot = new Robot();\n-        robot.setAutoDelay(100);\n+        try {\n+            Robot robot = new Robot();\n+            robot.setAutoDelay(100);\n@@ -59,1 +61,1 @@\n-        SwingUtilities.invokeAndWait(() -> createAndShowGUI());\n+            SwingUtilities.invokeAndWait(() -> createAndShowGUI());\n@@ -61,2 +63,2 @@\n-        robot.waitForIdle();\n-        robot.delay(1000);\n+            robot.waitForIdle();\n+            robot.delay(1000);\n@@ -64,4 +66,4 @@\n-        SwingUtilities.invokeAndWait(() -> {\n-            p = jep.getLocationOnScreen();\n-            dim = jep.getSize();\n-        });\n+            SwingUtilities.invokeAndWait(() -> {\n+                p = jep.getLocationOnScreen();\n+                dim = jep.getSize();\n+            });\n@@ -69,17 +71,17 @@\n-        robot.mouseMove(p.x + dim.width \/ 2, p.y + dim.height \/ 2);\n-        robot.waitForIdle();\n-        robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n-        robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n-        robot.waitForIdle();\n-        robot.keyPress(KeyEvent.VK_HOME);\n-        robot.keyRelease(KeyEvent.VK_HOME);\n-        robot.waitForIdle();\n-        robot.keyPress(KeyEvent.VK_RIGHT);\n-        robot.keyRelease(KeyEvent.VK_RIGHT);\n-        robot.waitForIdle();\n-        robot.keyPress(KeyEvent.VK_X);\n-        robot.keyRelease(KeyEvent.VK_X);\n-        robot.waitForIdle();\n-        robot.keyPress(KeyEvent.VK_RIGHT);\n-        robot.keyRelease(KeyEvent.VK_RIGHT);\n-        robot.waitForIdle();\n+            robot.mouseMove(p.x + dim.width \/ 2, p.y + dim.height \/ 2);\n+            robot.waitForIdle();\n+            robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n+            robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n+            robot.waitForIdle();\n+            robot.keyPress(KeyEvent.VK_HOME);\n+            robot.keyRelease(KeyEvent.VK_HOME);\n+            robot.waitForIdle();\n+            robot.keyPress(KeyEvent.VK_RIGHT);\n+            robot.keyRelease(KeyEvent.VK_RIGHT);\n+            robot.waitForIdle();\n+            robot.keyPress(KeyEvent.VK_X);\n+            robot.keyRelease(KeyEvent.VK_X);\n+            robot.waitForIdle();\n+            robot.keyPress(KeyEvent.VK_RIGHT);\n+            robot.keyRelease(KeyEvent.VK_RIGHT);\n+            robot.waitForIdle();\n@@ -87,2 +89,9 @@\n-        if (!passed) {\n-            throw new RuntimeException(\"Test failed.\");\n+            if (!passed) {\n+                throw new RuntimeException(\"Test failed.\");\n+            }\n+        } finally {\n+            SwingUtilities.invokeAndWait(() -> {\n+                if (f != null) {\n+                    f.dispose();\n+                }\n+            });\n@@ -95,1 +104,1 @@\n-        JFrame f = new JFrame(\"bug4506788\");\n+        f = new JFrame(\"bug4506788\");\n","filename":"test\/jdk\/javax\/swing\/text\/StyledEditorKit\/4506788\/bug4506788.java","additions":38,"deletions":29,"binary":false,"changes":67,"status":"modified"}]}