{"files":[{"patch":"@@ -843,1 +843,1 @@\n-                         that.getQualifiedName().compareTo(this.getQualifiedName()) < 0);\n+                         this.getQualifiedName().compareTo(that.getQualifiedName()) < 0);\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/code\/Symbol.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -41,1 +41,1 @@\n-public abstract class Name implements javax.lang.model.element.Name, PoolConstant {\n+public abstract class Name implements javax.lang.model.element.Name, PoolConstant, Comparable<Name> {\n@@ -105,1 +105,6 @@\n-    \/** An arbitrary but consistent complete order among all Names.\n+    \/** Order names lexicographically.\n+     *\n+     *  <p>\n+     *  The ordering defined by this method must match the ordering\n+     *  defined by the corresponding {@link #toString()} values.\n+     *  @see String#compareTo\n@@ -107,2 +112,28 @@\n-    public int compareTo(Name other) {\n-        return other.getIndex() - this.getIndex();\n+    @Override\n+    public int compareTo(Name name) {\n+        byte[] buf1 = getByteArray();\n+        byte[] buf2 = name.getByteArray();\n+        int off1 = getByteOffset();\n+        int off2 = name.getByteOffset();\n+        int len1 = getByteLength();\n+        int len2 = name.getByteLength();\n+        while (len1 > 0 && len2 > 0) {\n+            int val1 = buf1[off1++] & 0xff;\n+            int val2 = buf2[off2++] & 0xff;\n+            if (val1 == 0xc0 && (buf1[off1] & 0x3f) == 0) {\n+                val1 = 0;       \/\/ char 0x0000 encoded in two bytes\n+                off1++;\n+                len1--;\n+            }\n+            if (val2 == 0xc0 && (buf2[off2] & 0x3f) == 0) {\n+                val2 = 0;       \/\/ char 0x0000 encoded in two bytes\n+                off2++;\n+                len2--;\n+            }\n+            int diff = val1 - val2;\n+            if (diff != 0)\n+                return diff;\n+            len1--;\n+            len2--;\n+        }\n+        return len1 > 0 ? 1 : len2 > 0 ? -1 : 0;\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/util\/Name.java","additions":35,"deletions":4,"binary":false,"changes":39,"status":"modified"}]}