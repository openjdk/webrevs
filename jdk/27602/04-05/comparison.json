{"files":[{"patch":"@@ -75,3 +75,1 @@\n-    if (log_is_enabled(Debug, perf)) {\n-      log_debug(perf)(\"Could not commit PerfData memory\");\n-    }\n+    log_debug(perf)(\"Could not commit PerfData memory\");\n@@ -376,3 +374,1 @@\n-    if (log_is_enabled(Debug, perf)) {\n-      log_debug(perf)(\"could not change to directory %s\", dirname);\n-    }\n+    log_debug(perf)(\"could not change to directory %s\", dirname);\n@@ -416,3 +412,1 @@\n-    if (log_is_enabled(Debug, perf)) {\n-      log_debug(perf)(\"fstat failed on %s: %s\", filename, os::strerror(errno));\n-    }\n+    log_debug(perf)(\"fstat failed on %s: %s\", filename, os::strerror(errno));\n@@ -423,3 +417,1 @@\n-    if (log_is_enabled(Debug, perf)) {\n-      log_debug(perf)(\"file %s has multiple links\", filename);\n-    }\n+    log_debug(perf)(\"file %s has multiple links\", filename);\n@@ -824,3 +816,1 @@\n-        if (log_is_enabled(Debug, perf)) {\n-          log_debug(perf)(\"%s directory is insecure\", dirname);\n-        }\n+        log_debug(perf)(\"%s directory is insecure\", dirname);\n@@ -833,3 +823,1 @@\n-      if (log_is_enabled(Debug, perf)) {\n-        log_debug(perf)(\"could not create directory %s: %s\", dirname, os::strerror(errno));\n-      }\n+      log_debug(perf)(\"could not create directory %s: %s\", dirname, os::strerror(errno));\n@@ -925,3 +913,1 @@\n-    if (log_is_enabled(Debug, perf)) {\n-      log_debug(perf)(\"could not truncate shared memory file: %s\", os::strerror(errno));\n-    }\n+    log_debug(perf)(\"could not truncate shared memory file: %s\", os::strerror(errno));\n@@ -934,3 +920,1 @@\n-    if (log_is_enabled(Debug, perf)) {\n-      log_debug(perf)(\"could not set shared memory file size: %s\", os::strerror(errno));\n-    }\n+    log_debug(perf)(\"could not set shared memory file size: %s\", os::strerror(errno));\n@@ -1058,3 +1042,1 @@\n-    if (log_is_enabled(Debug, perf)) {\n-      log_debug(perf)(\"mmap failed -  %s\", os::strerror(errno));\n-    }\n+    log_debug(perf)(\"mmap failed -  %s\", os::strerror(errno));\n@@ -1136,3 +1118,1 @@\n-    if (log_is_enabled(Debug, perf)) {\n-      log_debug(perf)(\"fstat failed: %s\", os::strerror(errno));\n-    }\n+    log_debug(perf)(\"fstat failed: %s\", os::strerror(errno));\n@@ -1213,3 +1193,1 @@\n-    if (log_is_enabled(Debug, perf)) {\n-      log_debug(perf)(\"mmap failed: %s\", os::strerror(errno));\n-    }\n+    log_debug(perf)(\"mmap failed: %s\", os::strerror(errno));\n@@ -1247,3 +1225,1 @@\n-      if (log_is_enabled(Debug, perf)) {\n-        log_debug(perf)(\"Reverting to non-shared PerfMemory region.\");\n-      }\n+      log_debug(perf)(\"Reverting to non-shared PerfMemory region.\");\n","filename":"src\/hotspot\/os\/posix\/perfMemory_posix.cpp","additions":12,"deletions":36,"binary":false,"changes":48,"status":"modified"},{"patch":"@@ -66,3 +66,1 @@\n-    if (log_is_enabled(Debug, perf)) {\n-      log_debug(perf)(\"Could not commit PerfData memory\");\n-    }\n+    log_debug(perf)(\"Could not commit PerfData memory\");\n@@ -100,4 +98,2 @@\n-    if (log_is_enabled(Debug, perf)) {\n-      log_debug(perf)(\"Could not create Perfdata save file: %s: %s\",\n-                      destfile, os::strerror(errno));\n-    }\n+    log_debug(perf)(\"Could not create Perfdata save file: %s: %s\",\n+                    destfile, os::strerror(errno));\n@@ -109,4 +105,2 @@\n-        if (log_is_enabled(Debug, perf)) {\n-          log_debug(perf)(\"Could not write Perfdata save file: %s: %s\",\n-                          destfile, os::strerror(errno));\n-        }\n+        log_debug(perf)(\"Could not write Perfdata save file: %s: %s\",\n+                        destfile, os::strerror(errno));\n@@ -122,3 +116,1 @@\n-      if (log_is_enabled(Debug, perf)) {\n-        log_debug(perf)(\"Could not close %s: %s\", destfile, os::strerror(errno));\n-      }\n+      log_debug(perf)(\"Could not close %s: %s\", destfile, os::strerror(errno));\n@@ -224,4 +216,2 @@\n-      if (log_is_enabled(Debug, perf)) {\n-        log_debug(perf)(\"could not get attributes for file %s: \"\n-                        \" lasterror = %d\", path, lasterror);\n-      }\n+      log_debug(perf)(\"could not get attributes for file %s: \"\n+                      \" lasterror = %d\", path, lasterror);\n@@ -238,3 +228,1 @@\n-    if (log_is_enabled(Debug, perf)) {\n-      log_debug(perf)(\"%s is a reparse point\", path);\n-    }\n+    log_debug(perf)(\"%s is a reparse point\", path);\n@@ -257,4 +245,2 @@\n-    if (log_is_enabled(Debug, perf)) {\n-      log_debug(perf)(\"%s is not a directory, file attributes = \"\n-                      INTPTR_FORMAT, path, fa);\n-    }\n+    log_debug(perf)(\"%s is not a directory, file attributes = \"\n+                    INTPTR_FORMAT, path, fa);\n@@ -497,4 +483,2 @@\n-      if (log_is_enabled(Debug, perf)) {\n-        log_debug(perf)(\"Could not unlink shared memory backing\"\n-                        \" store file %s : %s\", path, os::strerror(errno));\n-      }\n+      log_debug(perf)(\"Could not unlink shared memory backing\"\n+                      \" store file %s : %s\", path, os::strerror(errno));\n@@ -519,5 +503,3 @@\n-    if (log_is_enabled(Debug, perf)) {\n-      DWORD lastError = GetLastError();\n-      if (lastError != ERROR_INVALID_PARAMETER) {\n-        log_debug(perf)(\"OpenProcess failed: %d\", GetLastError());\n-      }\n+    DWORD lastError = GetLastError();\n+    if (lastError != ERROR_INVALID_PARAMETER) {\n+      log_debug(perf)(\"OpenProcess failed: %d\", GetLastError());\n@@ -530,3 +512,1 @@\n-    if (log_is_enabled(Debug, perf)) {\n-      log_debug(perf)(\"GetExitCodeProcess failed: %d\", GetLastError());\n-    }\n+    log_debug(perf)(\"GetExitCodeProcess failed: %d\", GetLastError());\n@@ -549,3 +529,1 @@\n-    if (log_is_enabled(Debug, perf)) {\n-      log_debug(perf)(\"bypassing file system criteria checks for %s\", path);\n-    }\n+    log_debug(perf)(\"bypassing file system criteria checks for %s\", path);\n@@ -557,3 +535,1 @@\n-    if (log_is_enabled(Debug, perf)) {\n-      log_debug(perf)(\"expected device specifier in path: %s\", path);\n-    }\n+    log_debug(perf)(\"expected device specifier in path: %s\", path);\n@@ -580,5 +556,3 @@\n-    if (log_is_enabled(Debug, perf)) {\n-      log_debug(perf)(\"could not get device information for %s: \"\n-                      \" path = %s: lasterror = %d\",\n-                      root_path, path, GetLastError());\n-    }\n+    log_debug(perf)(\"could not get device information for %s: \"\n+                    \" path = %s: lasterror = %d\",\n+                    root_path, path, GetLastError());\n@@ -590,4 +564,2 @@\n-    if (log_is_enabled(Debug, perf)) {\n-      log_debug(perf)(\"file system type %s on device %s does not support\"\n-                      \" ACLs\", fs_type, root_path);\n-    }\n+    log_debug(perf)(\"file system type %s on device %s does not support\"\n+                    \" ACLs\", fs_type, root_path);\n@@ -599,4 +571,2 @@\n-    if (log_is_enabled(Debug, perf)) {\n-      log_debug(perf)(\"file system type %s on device %s is compressed\",\n-                      fs_type, root_path);\n-    }\n+    log_debug(perf)(\"file system type %s on device %s is compressed\",\n+                    fs_type, root_path);\n@@ -708,3 +678,1 @@\n-    if (log_is_enabled(Debug, perf)) {\n-      log_debug(perf)(\"CreateFileMapping failed, lasterror = %d\", GetLastError());\n-    }\n+    log_debug(perf)(\"CreateFileMapping failed, lasterror = %d\", GetLastError());\n@@ -721,3 +689,1 @@\n-    if (log_is_enabled(Debug, perf)) {\n-      log_debug(perf)(\"file mapping already exists, lasterror = %d\", GetLastError());\n-    }\n+    log_debug(perf)(\"file mapping already exists, lasterror = %d\", GetLastError());\n@@ -787,3 +753,1 @@\n-    if (log_is_enabled(Debug, perf)) {\n-      log_debug(perf)(\"OpenProcessToken failure: lasterror = %d\", GetLastError());\n-    }\n+    log_debug(perf)(\"OpenProcessToken failure: lasterror = %d\", GetLastError());\n@@ -799,4 +763,2 @@\n-      if (log_is_enabled(Debug, perf)) {\n-        log_debug(perf)(\"GetTokenInformation failure: lasterror = %d,\"\n-                        \" rsize = %d\", lasterror, rsize);\n-      }\n+      log_debug(perf)(\"GetTokenInformation failure: lasterror = %d,\"\n+                      \" rsize = %d\", lasterror, rsize);\n@@ -812,4 +774,2 @@\n-    if (log_is_enabled(Debug, perf)) {\n-      log_debug(perf)(\"GetTokenInformation failure: lasterror = %d,\"\n-                      \" rsize = %d\", GetLastError(), rsize);\n-    }\n+    log_debug(perf)(\"GetTokenInformation failure: lasterror = %d,\"\n+                    \" rsize = %d\", GetLastError(), rsize);\n@@ -825,4 +785,2 @@\n-    if (log_is_enabled(Debug, perf)) {\n-      log_debug(perf)(\"GetTokenInformation failure: lasterror = %d,\"\n-                      \" rsize = %d\", GetLastError(), rsize);\n-    }\n+    log_debug(perf)(\"GetTokenInformation failure: lasterror = %d,\"\n+                    \" rsize = %d\", GetLastError(), rsize);\n@@ -870,4 +828,2 @@\n-    if (log_is_enabled(Debug, perf)) {\n-      log_debug(perf)(\"GetSecurityDescriptor failure: lasterror = %d\",\n-                      GetLastError());\n-    }\n+    log_debug(perf)(\"GetSecurityDescriptor failure: lasterror = %d\",\n+                    GetLastError());\n@@ -890,4 +846,2 @@\n-      if (log_is_enabled(Debug, perf)) {\n-        log_debug(perf)(\"GetAclInformation failure: lasterror = %d\", GetLastError());\n-        return false;\n-      }\n+      log_debug(perf)(\"GetAclInformation failure: lasterror = %d\", GetLastError());\n+      return false;\n@@ -918,3 +872,1 @@\n-    if (log_is_enabled(Debug, perf)) {\n-      log_debug(perf)(\"InitializeAcl failure: lasterror = %d\", GetLastError());\n-    }\n+    log_debug(perf)(\"InitializeAcl failure: lasterror = %d\", GetLastError());\n@@ -931,3 +883,1 @@\n-        if (log_is_enabled(Debug, perf)) {\n-          log_debug(perf)(\"InitializeAcl failure: lasterror = %d\", GetLastError());\n-        }\n+        log_debug(perf)(\"InitializeAcl failure: lasterror = %d\", GetLastError());\n@@ -958,3 +908,1 @@\n-          if (log_is_enabled(Debug, perf)) {\n-            log_debug(perf)(\"AddAce failure: lasterror = %d\", GetLastError());\n-          }\n+          log_debug(perf)(\"AddAce failure: lasterror = %d\", GetLastError());\n@@ -973,4 +921,2 @@\n-      if (log_is_enabled(Debug, perf)) {\n-        log_debug(perf)(\"AddAccessAllowedAce failure: lasterror = %d\",\n-                        GetLastError());\n-      }\n+      log_debug(perf)(\"AddAccessAllowedAce failure: lasterror = %d\",\n+                      GetLastError());\n@@ -989,3 +935,1 @@\n-        if (log_is_enabled(Debug, perf)) {\n-          log_debug(perf)(\"InitializeAcl failure: lasterror = %d\", GetLastError());\n-        }\n+        log_debug(perf)(\"InitializeAcl failure: lasterror = %d\", GetLastError());\n@@ -997,3 +941,1 @@\n-        if (log_is_enabled(Debug, perf)) {\n-          log_debug(perf)(\"AddAce failure: lasterror = %d\", GetLastError());\n-        }\n+        log_debug(perf)(\"AddAce failure: lasterror = %d\", GetLastError());\n@@ -1009,4 +951,2 @@\n-    if (log_is_enabled(Debug, perf)) {\n-      log_debug(perf)(\"SetSecurityDescriptorDacl failure:\"\n-                      \" lasterror = %d\", GetLastError());\n-    }\n+    log_debug(perf)(\"SetSecurityDescriptorDacl failure:\"\n+                    \" lasterror = %d\", GetLastError());\n@@ -1029,4 +969,2 @@\n-      if (log_is_enabled(Debug, perf)) {\n-        log_debug(perf)(\"SetSecurityDescriptorControl failure:\"\n-                        \" lasterror = %d\", GetLastError());\n-      }\n+      log_debug(perf)(\"SetSecurityDescriptorControl failure:\"\n+                      \" lasterror = %d\", GetLastError());\n@@ -1061,4 +999,2 @@\n-    if (log_is_enabled(Debug, perf)) {\n-      log_debug(perf)(\"InitializeSecurityDescriptor failure: \"\n-                      \"lasterror = %d\", GetLastError());\n-    }\n+    log_debug(perf)(\"InitializeSecurityDescriptor failure: \"\n+                    \"lasterror = %d\", GetLastError());\n@@ -1117,5 +1053,2 @@\n-\n-    if (log_is_enabled(Debug, perf)) {\n-      log_debug(perf)(\"AllocateAndInitializeSid failure: \"\n-                      \"lasterror = %d\", GetLastError());\n-    }\n+    log_debug(perf)(\"AllocateAndInitializeSid failure: \"\n+                    \"lasterror = %d\", GetLastError());\n@@ -1135,5 +1068,2 @@\n-\n-    if (log_is_enabled(Debug, perf)) {\n-      log_debug(perf)(\"AllocateAndInitializeSid failure: \"\n-                      \"lasterror = %d\", GetLastError());\n-    }\n+    log_debug(perf)(\"AllocateAndInitializeSid failure: \"\n+                    \"lasterror = %d\", GetLastError());\n@@ -1240,3 +1170,1 @@\n-        if (log_is_enabled(Debug, perf)) {\n-          log_debug(perf)(\"%s directory is insecure\", dirname);\n-        }\n+        log_debug(perf)(\"%s directory is insecure\", dirname);\n@@ -1253,4 +1181,2 @@\n-        if (log_is_enabled(Debug, perf)) {\n-          lasterror = GetLastError();\n-          log_debug(perf)(\"SetFileSecurity failed for %s directory. lasterror %d\", dirname, lasterror);\n-        }\n+        lasterror = GetLastError();\n+        log_debug(perf)(\"SetFileSecurity failed for %s directory. lasterror %d\", dirname, lasterror);\n@@ -1259,3 +1185,1 @@\n-      if (log_is_enabled(Debug, perf)) {\n-        log_debug(perf)(\"CreateDirectory failed: %d\", GetLastError());\n-      }\n+      log_debug(perf)(\"CreateDirectory failed: %d\", GetLastError());\n@@ -1327,4 +1251,2 @@\n-    if (log_is_enabled(Debug, perf)) {\n-      DWORD lasterror = GetLastError();\n-      log_debug(perf)(\"could not create file %s: %d\", filename, lasterror);\n-    }\n+    DWORD lasterror = GetLastError();\n+    log_debug(perf)(\"could not create file %s: %d\", filename, lasterror);\n@@ -1356,4 +1278,2 @@\n-      if (log_is_enabled(Debug, perf)) {\n-        log_debug(perf)(\"Could not get status information from file %s: %s\",\n-                        filename, os::strerror(errno));\n-      }\n+      log_debug(perf)(\"Could not get status information from file %s: %s\",\n+                      filename, os::strerror(errno));\n@@ -1372,3 +1292,1 @@\n-      if (log_is_enabled(Debug, perf)) {\n-        log_debug(perf)(\"could not flush file %s: %d\", filename, lasterror);\n-      }\n+      log_debug(perf)(\"could not flush file %s: %d\", filename, lasterror);\n@@ -1405,4 +1323,2 @@\n-    if (log_is_enabled(Debug, perf)) {\n-      log_debug(perf)(\"OpenFileMapping failed for shared memory object %s:\"\n-                      \" lasterror = %d\", objectname, lasterror);\n-    }\n+    log_debug(perf)(\"OpenFileMapping failed for shared memory object %s:\"\n+                    \" lasterror = %d\", objectname, lasterror);\n@@ -1488,3 +1404,1 @@\n-    if (log_is_enabled(Debug, perf)) {\n-      log_debug(perf)(\"MapViewOfFile failed, lasterror = %d\", GetLastError());\n-    }\n+    log_debug(perf)(\"MapViewOfFile failed, lasterror = %d\", GetLastError());\n@@ -1554,3 +1468,1 @@\n-    if (log_is_enabled(Debug, perf)) {\n-      log_debug(perf)(\"stat %s failed: %s\", filename, os::strerror(errno));\n-    }\n+    log_debug(perf)(\"stat %s failed: %s\", filename, os::strerror(errno));\n@@ -1562,3 +1474,1 @@\n-    if (log_is_enabled(Debug, perf)) {\n-      log_debug(perf)(\"unexpected file size: size = %zu\", statbuf.st_size);\n-    }\n+    log_debug(perf)(\"unexpected file size: size = %zu\", statbuf.st_size);\n@@ -1638,3 +1548,1 @@\n-    if (log_is_enabled(Debug, perf)) {\n-      log_debug(perf)(\"MapViewOfFile failed, lasterror = %d\", GetLastError());\n-    }\n+    log_debug(perf)(\"MapViewOfFile failed, lasterror = %d\", GetLastError());\n@@ -1709,3 +1617,1 @@\n-      if (log_is_enabled(Debug, perf)) {\n-        log_debug(perf)(\"Reverting to non-shared PerfMemory region.\");\n-      }\n+      log_debug(perf)(\"Reverting to non-shared PerfMemory region.\");\n","filename":"src\/hotspot\/os\/windows\/perfMemory_windows.cpp","additions":72,"deletions":166,"binary":false,"changes":238,"status":"modified"},{"patch":"@@ -27,1 +27,0 @@\n-#include \"logging\/logStream.hpp\"\n@@ -118,3 +117,1 @@\n-    if (log_is_enabled(Debug, perf)) {\n-      log_debug(perf)(\"Could not create PerfData Memory region, reverting to malloc\");\n-    }\n+    log_debug(perf)(\"Could not create PerfData Memory region, reverting to malloc\");\n@@ -254,4 +251,2 @@\n-      if (log_is_enabled(Debug, perf)) {\n-        log_debug(perf)(\"Invalid performance data file path name specified, \"\\\n-                        \"fall back to a default name\");\n-      }\n+      log_debug(perf)(\"Invalid performance data file path name specified, \"\\\n+                      \"fall back to a default name\");\n","filename":"src\/hotspot\/share\/runtime\/perfMemory.cpp","additions":3,"deletions":8,"binary":false,"changes":11,"status":"modified"}]}