{"files":[{"patch":"@@ -76,2 +76,1 @@\n-      LogStreamHandle(Debug, perf) log;\n-      log.print_cr(\"Could not commit PerfData memory\\n\");\n+      log_debug(perf)(\"Could not commit PerfData memory\");\n@@ -305,1 +304,1 @@\n-        log.print_cr(\"directory %s is a symlink and is not secure\\n\", dirname);\n+        log.print_cr(\"directory %s is a symlink and is not secure\", dirname);\n@@ -307,1 +306,1 @@\n-        log.print_cr(\"could not open directory %s: %s\\n\", dirname, os::strerror(errno));\n+        log.print_cr(\"could not open directory %s: %s\", dirname, os::strerror(errno));\n@@ -378,2 +377,1 @@\n-      LogStreamHandle(Debug, perf) log;\n-      log.print_cr(\"could not change to directory %s\", dirname);\n+      log_debug(perf)(\"could not change to directory %s\", dirname);\n@@ -419,2 +417,1 @@\n-      LogStreamHandle(Debug, perf) log;\n-      log.print_cr(\"fstat failed on %s: %s\\n\", filename, os::strerror(errno));\n+      log_debug(perf)(\"fstat failed on %s: %s\", filename, os::strerror(errno));\n@@ -427,2 +424,1 @@\n-      LogStreamHandle(Debug, perf) log;\n-      log.print_cr(\"file %s has multiple links\\n\", filename);\n+      log_debug(perf)(\"file %s has multiple links\", filename);\n@@ -459,1 +455,1 @@\n-        log.print_cr(\"Could not retrieve passwd entry: %s\\n\", os::strerror(result));\n+        log.print_cr(\"Could not retrieve passwd entry: %s\", os::strerror(result));\n@@ -472,1 +468,1 @@\n-        log.print_cr(\"Could not retrieve passwd entry: %s\\n\", os::strerror(errno));\n+        log.print_cr(\"Could not retrieve passwd entry: %s\", os::strerror(errno));\n@@ -475,1 +471,1 @@\n-        log.print_cr(\"Could not determine user name: %s\\n\",\n+        log.print_cr(\"Could not determine user name: %s\",\n@@ -688,1 +684,0 @@\n-    LogStreamHandle(Debug, perf) log;\n@@ -690,2 +685,2 @@\n-      log.print_cr(\"Could not unlink shared memory backing\"\n-                   \" store file %s : %s\\n\", path, os::strerror(errno));\n+      log_debug(perf)(\"Could not unlink shared memory backing\"\n+                      \" store file %s : %s\", path, os::strerror(errno));\n@@ -830,2 +825,1 @@\n-          LogStreamHandle(Debug, perf) log;\n-          log.print_cr(\"%s directory is insecure\\n\", dirname);\n+          log_debug(perf)(\"%s directory is insecure\", dirname);\n@@ -840,2 +834,1 @@\n-        LogStreamHandle(Debug, perf) log;\n-        log.print_cr(\"could not create directory %s: %s\\n\", dirname, os::strerror(errno));\n+        log_debug(perf)(\"could not create directory %s: %s\", dirname, os::strerror(errno));\n@@ -882,1 +875,1 @@\n-        log.print_cr(\"file %s is a symlink and is not secure\\n\", filename);\n+        log.print_cr(\"file %s is a symlink and is not secure\", filename);\n@@ -884,1 +877,1 @@\n-        log.print_cr(\"could not create file %s: %s\\n\", filename, os::strerror(errno));\n+        log.print_cr(\"could not create file %s: %s\", filename, os::strerror(errno));\n@@ -933,2 +926,1 @@\n-      LogStreamHandle(Debug, perf) log;\n-      log.print_cr(\"could not truncate shared memory file: %s\\n\", os::strerror(errno));\n+      log_debug(perf)(\"could not truncate shared memory file: %s\", os::strerror(errno));\n@@ -943,2 +935,1 @@\n-      LogStreamHandle(Debug, perf) log;\n-      log.print_cr(\"could not set shared memory file size: %s\\n\", os::strerror(errno));\n+      log_debug(perf)(\"could not set shared memory file size: %s\", os::strerror(errno));\n@@ -1068,2 +1059,1 @@\n-      LogStreamHandle(Debug, perf) log;\n-      log.print_cr(\"mmap failed -  %s\\n\", os::strerror(errno));\n+      log_debug(perf)(\"mmap failed -  %s\", os::strerror(errno));\n@@ -1147,2 +1137,1 @@\n-      LogStreamHandle(Debug, perf) log;\n-      log.print_cr(\"fstat failed: %s\\n\", os::strerror(errno));\n+      log_debug(perf)(\"fstat failed: %s\", os::strerror(errno));\n@@ -1225,2 +1214,1 @@\n-      LogStreamHandle(Debug, perf) log;\n-      log.print_cr(\"mmap failed: %s\\n\", os::strerror(errno));\n+      log_debug(perf)(\"mmap failed: %s\", os::strerror(errno));\n@@ -1260,2 +1248,1 @@\n-        LogStreamHandle(Debug, perf) log;\n-        log.print_cr(\"Reverting to non-shared PerfMemory region.\\n\");\n+        log_debug(perf)(\"Reverting to non-shared PerfMemory region.\");\n","filename":"src\/hotspot\/os\/posix\/perfMemory_posix.cpp","additions":21,"deletions":34,"binary":false,"changes":55,"status":"modified"},{"patch":"@@ -67,2 +67,1 @@\n-      LogStreamHandle(Debug, perf) log;\n-      log.print_cr(\"Could not commit PerfData memory\\n\");\n+      log_debug(perf)(\"Could not commit PerfData memory\");\n@@ -102,3 +101,2 @@\n-      LogStreamHandle(Debug, perf) log;\n-      log.print_cr(\"Could not create Perfdata save file: %s: %s\\n\",\n-                   destfile, os::strerror(errno));\n+      log_debug(perf)(\"Could not create Perfdata save file: %s: %s\",\n+                      destfile, os::strerror(errno));\n@@ -112,3 +110,2 @@\n-          LogStreamHandle(Debug, perf) log;\n-          log.print_cr(\"Could not write Perfdata save file: %s: %s\\n\",\n-                       destfile, os::strerror(errno));\n+          log_debug(perf)(\"Could not write Perfdata save file: %s: %s\",\n+                          destfile, os::strerror(errno));\n@@ -126,2 +123,1 @@\n-        LogStreamHandle(Debug, perf) log;\n-        log.print_cr(\"Could not close %s: %s\\n\", destfile, os::strerror(errno));\n+        log_debug(perf)(\"Could not close %s: %s\", destfile, os::strerror(errno));\n@@ -229,3 +225,2 @@\n-        LogStreamHandle(Debug, perf) log;\n-        log.print_cr(\"could not get attributes for file %s: \"\n-                     \" lasterror = %d\\n\", path, lasterror);\n+        log_debug(perf)(\"could not get attributes for file %s: \"\n+                        \" lasterror = %d\", path, lasterror);\n@@ -244,2 +239,1 @@\n-      LogStreamHandle(Debug, perf) log;\n-      log.print_cr(\"%s is a reparse point\\n\", path);\n+      log_debug(perf)(\"%s is a reparse point\", path);\n@@ -264,3 +258,2 @@\n-      LogStreamHandle(Debug, perf) log;\n-      log.print_cr(\"%s is not a directory, file attributes = \"\n-                   INTPTR_FORMAT \"\\n\", path, fa);\n+      log_debug(perf)(\"%s is not a directory, file attributes = \"\n+                      INTPTR_FORMAT, path, fa);\n@@ -505,3 +498,2 @@\n-        LogStreamHandle(Debug, perf) log;\n-        log.print_cr(\"Could not unlink shared memory backing\"\n-                     \" store file %s : %s\\n\", path, os::strerror(errno));\n+        log_debug(perf)(\"Could not unlink shared memory backing\"\n+                        \" store file %s : %s\", path, os::strerror(errno));\n@@ -530,2 +522,1 @@\n-        LogStreamHandle(Debug, perf) log;\n-        log.print_cr(\"OpenProcess failed: %d\\n\", GetLastError());\n+        log_debug(perf)(\"OpenProcess failed: %d\", GetLastError());\n@@ -540,2 +531,1 @@\n-      LogStreamHandle(Debug, perf) log;\n-      log.print_cr(\"GetExitCodeProcess failed: %d\\n\", GetLastError());\n+      log_debug(perf)(\"GetExitCodeProcess failed: %d\", GetLastError());\n@@ -560,2 +550,1 @@\n-      LogStreamHandle(Debug, perf) log;\n-      log.print_cr(\"bypassing file system criteria checks for %s\\n\", path);\n+      log_debug(perf)(\"bypassing file system criteria checks for %s\", path);\n@@ -569,2 +558,1 @@\n-      LogStreamHandle(Debug, perf) log;\n-      log.print_cr(\"expected device specifier in path: %s\\n\", path);\n+      log_debug(perf)(\"expected device specifier in path: %s\", path);\n@@ -593,4 +581,3 @@\n-      LogStreamHandle(Debug, perf) log;\n-      log.print_cr(\"could not get device information for %s: \"\n-                   \" path = %s: lasterror = %d\\n\",\n-                   root_path, path, GetLastError());\n+      log_debug(perf)(\"could not get device information for %s: \"\n+                      \" path = %s: lasterror = %d\",\n+                      root_path, path, GetLastError());\n@@ -604,3 +591,2 @@\n-      LogStreamHandle(Debug, perf) log;\n-      log.print_cr(\"file system type %s on device %s does not support\"\n-                   \" ACLs\\n\", fs_type, root_path);\n+      log_debug(perf)(\"file system type %s on device %s does not support\"\n+                      \" ACLs\", fs_type, root_path);\n@@ -614,3 +600,2 @@\n-      LogStreamHandle(Debug, perf) log;\n-      log.print_cr(\"file system type %s on device %s is compressed\\n\",\n-                   fs_type, root_path);\n+      log_debug(perf)(\"file system type %s on device %s is compressed\",\n+                      fs_type, root_path);\n@@ -724,2 +709,1 @@\n-      LogStreamHandle(Debug, perf) log;\n-      log.print_cr(\"CreateFileMapping failed, lasterror = %d\\n\", GetLastError());\n+      log_debug(perf)(\"CreateFileMapping failed, lasterror = %d\", GetLastError());\n@@ -738,2 +722,1 @@\n-      LogStreamHandle(Debug, perf) log;\n-      log.print_cr(\"file mapping already exists, lasterror = %d\\n\", GetLastError());\n+      log_debug(perf)(\"file mapping already exists, lasterror = %d\", GetLastError());\n@@ -805,2 +788,1 @@\n-      LogStreamHandle(Debug, perf) log;\n-      log.print_cr(\"OpenProcessToken failure: lasterror = %d \\n\", GetLastError());\n+      log_debug(perf)(\"OpenProcessToken failure: lasterror = %d\", GetLastError());\n@@ -818,3 +800,2 @@\n-        LogStreamHandle(Debug, perf) log;\n-        log.print_cr(\"GetTokenInformation failure: lasterror = %d,\"\n-                     \" rsize = %d\\n\", lasterror, rsize);\n+        log_debug(perf)(\"GetTokenInformation failure: lasterror = %d,\"\n+                        \" rsize = %d\", lasterror, rsize);\n@@ -832,3 +813,2 @@\n-      LogStreamHandle(Debug, perf) log;\n-      log.print_cr(\"GetTokenInformation failure: lasterror = %d,\"\n-                   \" rsize = %d\\n\", GetLastError(), rsize);\n+      log_debug(perf)(\"GetTokenInformation failure: lasterror = %d,\"\n+                      \" rsize = %d\", GetLastError(), rsize);\n@@ -846,3 +826,2 @@\n-      LogStreamHandle(Debug, perf) log;\n-      log.print_cr(\"GetTokenInformation failure: lasterror = %d,\"\n-                   \" rsize = %d\\n\", GetLastError(), rsize);\n+      log_debug(perf)(\"GetTokenInformation failure: lasterror = %d,\"\n+                      \" rsize = %d\", GetLastError(), rsize);\n@@ -892,3 +871,2 @@\n-      LogStreamHandle(Debug, perf) log;\n-      log.print_cr(\"GetSecurityDescriptor failure: lasterror = %d \\n\",\n-                   GetLastError());\n+      log_debug(perf)(\"GetSecurityDescriptor failure: lasterror = %d\",\n+                      GetLastError());\n@@ -913,2 +891,1 @@\n-        LogStreamHandle(Debug, perf) log;\n-        log.print_cr(\"GetAclInformation failure: lasterror = %d \\n\", GetLastError());\n+        log_debug(perf)(\"GetAclInformation failure: lasterror = %d\", GetLastError());\n@@ -942,2 +919,1 @@\n-      LogStreamHandle(Debug, perf) log;\n-      log.print_cr(\"InitializeAcl failure: lasterror = %d \\n\", GetLastError());\n+      log_debug(perf)(\"InitializeAcl failure: lasterror = %d\", GetLastError());\n@@ -956,2 +932,1 @@\n-          LogStreamHandle(Debug, perf) log;\n-          log.print_cr(\"InitializeAcl failure: lasterror = %d \\n\", GetLastError());\n+          log_debug(perf)(\"InitializeAcl failure: lasterror = %d\", GetLastError());\n@@ -984,2 +959,1 @@\n-            LogStreamHandle(Debug, perf) log;\n-            log.print_cr(\"AddAce failure: lasterror = %d \\n\", GetLastError());\n+            log_debug(perf)(\"AddAce failure: lasterror = %d\", GetLastError());\n@@ -1000,3 +974,2 @@\n-        LogStreamHandle(Debug, perf) log;\n-        log.print_cr(\"AddAccessAllowedAce failure: lasterror = %d \\n\",\n-                     GetLastError());\n+        log_debug(perf)(\"AddAccessAllowedAce failure: lasterror = %d\",\n+                        GetLastError());\n@@ -1017,2 +990,1 @@\n-          LogStreamHandle(Debug, perf) log;\n-          log.print_cr(\"InitializeAcl failure: lasterror = %d \\n\", GetLastError());\n+          log_debug(perf)(\"InitializeAcl failure: lasterror = %d\", GetLastError());\n@@ -1026,2 +998,1 @@\n-          LogStreamHandle(Debug, perf) log;\n-          log.print_cr(\"AddAce failure: lasterror = %d \\n\", GetLastError());\n+          log_debug(perf)(\"AddAce failure: lasterror = %d\", GetLastError());\n@@ -1039,3 +1010,2 @@\n-      LogStreamHandle(Debug, perf) log;\n-      log.print_cr(\"SetSecurityDescriptorDacl failure:\"\n-                   \" lasterror = %d \\n\", GetLastError());\n+      log_debug(perf)(\"SetSecurityDescriptorDacl failure:\"\n+                      \" lasterror = %d\", GetLastError());\n@@ -1060,3 +1030,2 @@\n-        LogStreamHandle(Debug, perf) log;\n-        log.print_cr(\"SetSecurityDescriptorControl failure:\"\n-                     \" lasterror = %d \\n\", GetLastError());\n+        log_debug(perf)(\"SetSecurityDescriptorControl failure:\"\n+                        \" lasterror = %d\", GetLastError());\n@@ -1093,3 +1062,2 @@\n-      LogStreamHandle(Debug, perf) log;\n-      log.print_cr(\"InitializeSecurityDescriptor failure: \"\n-                   \"lasterror = %d \\n\", GetLastError());\n+      log_debug(perf)(\"InitializeSecurityDescriptor failure: \"\n+                      \"lasterror = %d\", GetLastError());\n@@ -1151,3 +1119,2 @@\n-      LogStreamHandle(Debug, perf) log;\n-      log.print_cr(\"AllocateAndInitializeSid failure: \"\n-                   \"lasterror = %d \\n\", GetLastError());\n+      log_debug(perf)(\"AllocateAndInitializeSid failure: \"\n+                      \"lasterror = %d\", GetLastError());\n@@ -1170,3 +1137,2 @@\n-      LogStreamHandle(Debug, perf) log;\n-      log.print_cr(\"AllocateAndInitializeSid failure: \"\n-                   \"lasterror = %d \\n\", GetLastError());\n+      log_debug(perf)(\"AllocateAndInitializeSid failure: \"\n+                      \"lasterror = %d\", GetLastError());\n@@ -1275,2 +1241,1 @@\n-          LogStreamHandle(Debug, perf) log;\n-          log.print_cr(\"%s directory is insecure\\n\", dirname);\n+          log_debug(perf)(\"%s directory is insecure\", dirname);\n@@ -1290,3 +1255,1 @@\n-          LogStreamHandle(Debug, perf) log;\n-          log.print_cr(\"SetFileSecurity failed for %s directory.  lasterror %d \\n\",\n-                                                        dirname, lasterror);\n+          log_debug(perf)(\"SetFileSecurity failed for %s directory. lasterror %d\", dirname, lasterror);\n@@ -1297,2 +1260,1 @@\n-        LogStreamHandle(Debug, perf) log;\n-        log.print_cr(\"CreateDirectory failed: %d\\n\", GetLastError());\n+        log_debug(perf)(\"CreateDirectory failed: %d\", GetLastError());\n@@ -1365,1 +1327,0 @@\n-    DWORD lasterror = GetLastError();\n@@ -1367,2 +1328,2 @@\n-      LogStreamHandle(Debug, perf) log;\n-      log.print_cr(\"could not create file %s: %d\\n\", filename, lasterror);\n+      DWORD lasterror = GetLastError();\n+      log_debug(perf)(\"could not create file %s: %d\", filename, lasterror);\n@@ -1396,3 +1357,2 @@\n-        LogStreamHandle(Debug, perf) log;\n-        log.print_cr(\"Could not get status information from file %s: %s\\n\",\n-                     filename, os::strerror(errno));\n+        log_debug(perf)(\"Could not get status information from file %s: %s\",\n+                        filename, os::strerror(errno));\n@@ -1413,2 +1373,1 @@\n-        LogStreamHandle(Debug, perf) log;\n-        log.print_cr(\"could not flush file %s: %d\\n\", filename, lasterror);\n+        log_debug(perf)(\"could not flush file %s: %d\", filename, lasterror);\n@@ -1447,3 +1406,2 @@\n-      LogStreamHandle(Debug, perf) log;\n-      log.print_cr(\"OpenFileMapping failed for shared memory object %s:\"\n-                   \" lasterror = %d\\n\", objectname, lasterror);\n+      log_debug(perf)(\"OpenFileMapping failed for shared memory object %s:\"\n+                      \" lasterror = %d\", objectname, lasterror);\n@@ -1531,2 +1489,1 @@\n-      LogStreamHandle(Debug, perf) log;\n-      log.print_cr(\"MapViewOfFile failed, lasterror = %d\\n\", GetLastError());\n+      log_debug(perf)(\"MapViewOfFile failed, lasterror = %d\", GetLastError());\n@@ -1598,2 +1555,1 @@\n-      LogStreamHandle(Debug, perf) log;\n-      log.print_cr(\"stat %s failed: %s\\n\", filename, os::strerror(errno));\n+      log_debug(perf)(\"stat %s failed: %s\", filename, os::strerror(errno));\n@@ -1607,2 +1563,1 @@\n-      LogStreamHandle(Debug, perf) log;\n-      log.print_cr(\"unexpected file size: size = %zu\\n\", statbuf.st_size);\n+      log_debug(perf)(\"unexpected file size: size = %zu\", statbuf.st_size);\n@@ -1684,2 +1639,1 @@\n-      LogStreamHandle(Debug, perf) log;\n-      log.print_cr(\"MapViewOfFile failed, lasterror = %d\\n\", GetLastError());\n+      log_debug(perf)(\"MapViewOfFile failed, lasterror = %d\", GetLastError());\n@@ -1756,2 +1710,1 @@\n-        LogStreamHandle(Debug, perf) log;\n-        log.print_cr(\"Reverting to non-shared PerfMemory region.\\n\");\n+        log_debug(perf)(\"Reverting to non-shared PerfMemory region.\");\n","filename":"src\/hotspot\/os\/windows\/perfMemory_windows.cpp","additions":68,"deletions":115,"binary":false,"changes":183,"status":"modified"},{"patch":"@@ -119,2 +119,1 @@\n-      LogStreamHandle(Debug, perf) log;\n-      log.print_cr(\"Could not create PerfData Memory region, reverting to malloc\");\n+      log_debug(perf)(\"Could not create PerfData Memory region, reverting to malloc\");\n@@ -256,3 +255,2 @@\n-        LogStreamHandle(Debug, perf) log;\n-        log.print_cr(\"Invalid performance data file path name specified, \"\\\n-                     \"fall back to a default name\");\n+        log_debug(perf)(\"Invalid performance data file path name specified, \"\\\n+                        \"fall back to a default name\");\n","filename":"src\/hotspot\/share\/runtime\/perfMemory.cpp","additions":3,"deletions":5,"binary":false,"changes":8,"status":"modified"}]}