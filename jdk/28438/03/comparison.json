{"files":[{"patch":"@@ -88,1 +88,3 @@\n-  _resolution_error_table->put(key, entry);\n+  bool created = false;\n+  _resolution_error_table->put_if_absent(key, entry, &created);\n+  assert(created, \"should be created not updated\");\n@@ -129,0 +131,9 @@\n+void ResolutionErrorEntry::set_nest_host_error(const char* message) {\n+  \/\/ If a message is already set, free it.\n+  if (nest_host_error() != nullptr) {\n+    FREE_C_HEAP_ARRAY(char, _nest_host_error);\n+  }\n+  _nest_host_error = message;\n+}\n+\n+\n","filename":"src\/hotspot\/share\/classfile\/resolutionErrors.cpp","additions":12,"deletions":1,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -94,4 +94,1 @@\n-  void set_nest_host_error(const char* message) {\n-    _nest_host_error = message;\n-  }\n-\n+  void set_nest_host_error(const char* message);\n","filename":"src\/hotspot\/share\/classfile\/resolutionErrors.hpp","additions":2,"deletions":5,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -1867,1 +1867,6 @@\n-    if (entry != nullptr && entry->nest_host_error() == nullptr) {\n+    if (entry == nullptr) {\n+      \/\/ Only add a new resolution error if one hasn't been found for this constant pool index. In this case,\n+      \/\/ resolution succeeded but there's an error in this nest host.\n+      assert(pool->resolved_klass_at(which) != nullptr, \"klass should be resolved if there is no entry\");\n+      ResolutionErrorTable::add_entry(pool, which, message);\n+    } else {\n@@ -1871,1 +1876,1 @@\n-      \/\/ the message. If we see it is already set then we can ignore it.\n+      \/\/ the message, and set it again.\n@@ -1873,2 +1878,0 @@\n-    } else {\n-      ResolutionErrorTable::add_entry(pool, which, message);\n","filename":"src\/hotspot\/share\/classfile\/systemDictionary.cpp","additions":7,"deletions":4,"binary":false,"changes":11,"status":"modified"}]}