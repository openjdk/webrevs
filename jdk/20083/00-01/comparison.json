{"files":[{"patch":"@@ -51,1 +51,1 @@\n-final class TranslatedException extends Exception {\n+public final class TranslatedException extends Exception {\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/vm\/TranslatedException.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -43,0 +43,1 @@\n+import jdk.internal.vm.TranslatedException;\n@@ -103,0 +104,9 @@\n+        } catch (TranslatedException decoded) {\n+            Assert.assertEquals(decoded.getCause().getClass(), OutOfMemoryError.class);\n+        } catch (Throwable decoded) {\n+            throw new AssertionError(\"unexpected exception: \" + decoded);\n+        }\n+\n+        try {\n+            VMSupport.decodeAndThrowThrowable(5, 0L, true, false);\n+            throw new AssertionError(\"expected decodeAndThrowThrowable to throw an exception\");\n@@ -145,1 +155,1 @@\n-                        assertThrowableEquals(throwable, decoded);\n+                        assertThrowableEquals(throwable, decoded.getCause());\n@@ -155,1 +165,3 @@\n-    private static void assertThrowableEquals(Throwable original, Throwable decoded) {\n+    private static void assertThrowableEquals(Throwable originalIn, Throwable decodedIn) {\n+        Throwable original = originalIn;\n+        Throwable decoded = decodedIn;\n@@ -160,2 +172,2 @@\n-                    Assert.assertEquals(decoded.getClass().getName(), \"jdk.internal.vm.TranslatedException\");\n-                    Assert.assertEquals(decoded.toString(), \"jdk.internal.vm.TranslatedException[jdk.internal.vm.test.TestTranslatedException$Untranslatable]: test exception\");\n+                    Assert.assertEquals(decoded.getClass().getName(), \"java.lang.InternalError\");\n+                    Assert.assertEquals(decoded.toString(), \"java.lang.InternalError: test exception [jdk.internal.vm.test.TestTranslatedException$Untranslatable]\");\n@@ -185,1 +197,1 @@\n-            original.printStackTrace(System.err);\n+            originalIn.printStackTrace(System.err);\n@@ -188,1 +200,1 @@\n-            original.printStackTrace(System.err);\n+            decodedIn.printStackTrace(System.err);\n","filename":"test\/jdk\/jdk\/internal\/vm\/TestTranslatedException.java","additions":18,"deletions":6,"binary":false,"changes":24,"status":"modified"}]}