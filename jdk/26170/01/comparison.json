{"files":[{"patch":"@@ -36,0 +36,1 @@\n+#include \"java_awt_event_KeyEvent.h\"\n@@ -1200,0 +1201,18 @@\n+static int getNumpadKey(jint jkey) {\n+    switch (jkey) {\n+        case java_awt_event_KeyEvent_VK_NUMPAD0: return XK_KP_Insert;\n+        case java_awt_event_KeyEvent_VK_NUMPAD1: return XK_KP_End;\n+        case java_awt_event_KeyEvent_VK_NUMPAD2: return XK_KP_Down;\n+        case java_awt_event_KeyEvent_VK_NUMPAD3: return XK_KP_Page_Down;\n+        case java_awt_event_KeyEvent_VK_NUMPAD4: return XK_KP_Left;\n+        case java_awt_event_KeyEvent_VK_NUMPAD5: return XK_KP_Begin;\n+        case java_awt_event_KeyEvent_VK_NUMPAD6: return XK_KP_Right;\n+        case java_awt_event_KeyEvent_VK_NUMPAD7: return XK_KP_Home;\n+        case java_awt_event_KeyEvent_VK_NUMPAD8: return XK_KP_Up;\n+        case java_awt_event_KeyEvent_VK_NUMPAD9: return XK_KP_Prior;\n+        case java_awt_event_KeyEvent_VK_DECIMAL:\n+        case java_awt_event_KeyEvent_VK_SEPARATOR: return XK_KP_Delete;\n+        default: return 0;\n+    }\n+}\n+\n@@ -1208,3 +1227,6 @@\n-    AWT_LOCK();\n-    int key = awt_getX11KeySym(jkey);\n-    AWT_UNLOCK();\n+    int key = getNumpadKey(jkey);\n+    if (!key) {\n+        AWT_LOCK();\n+        key = awt_getX11KeySym(jkey);\n+        AWT_UNLOCK();\n+    }\n","filename":"src\/java.desktop\/unix\/native\/libawt_xawt\/awt\/screencast_pipewire.c","additions":25,"deletions":3,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2004, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2004, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,1 +26,1 @@\n-  @bug 5013984\n+  @bug 5013984 8360647\n@@ -40,1 +40,1 @@\n-    HashMap<Integer, Character> transMap = new HashMap();\n+    HashMap<Integer, Character> transMap = new HashMap<>();\n@@ -50,2 +50,2 @@\n-        Object value = transMap.get(e.getKeyCode());\n-        if (value != null && e.getKeyChar() != ((Character)value).charValue()) {\n+        Character value = transMap.get(e.getKeyCode());\n+        if (value != null && e.getKeyChar() != value) {\n@@ -57,1 +57,14 @@\n-    public void start () {\n+    private void testKeyRange(Robot robot, int start, int end) {\n+        System.out.printf(\"\\nTesting range on %d to %d\\n\", start, end);\n+        for(int vkey = start; vkey <= end; vkey++) {\n+            try {\n+                robot.keyPress(vkey);\n+                robot.keyRelease(vkey);\n+                System.out.println(KeyEvent.getKeyText(vkey) + \" \" + vkey);\n+            } catch (RuntimeException ignored) {}\n+        }\n+        robot.delay(100);\n+    }\n+\n+    public void start() throws Exception {\n+        Robot robot = new Robot();\n@@ -65,1 +78,0 @@\n-            Robot robot = new Robot();\n@@ -75,9 +87,7 @@\n-            for(int vkey = 0x20; vkey < 0x7F; vkey++) {\n-                try {\n-                    robot.keyPress(vkey);\n-                    robot.keyRelease(vkey);\n-                    System.out.println(KeyEvent.getKeyText(vkey) + \" \" + vkey);\n-                } catch (RuntimeException e) {\n-                }\n-            }\n-            robot.delay(100);\n+            testKeyRange(robot, 0x20, 0x7E);\n+\n+            \/\/ Try again with a different numpad state.\n+            robot.keyPress(KeyEvent.VK_NUM_LOCK);\n+            robot.keyRelease(KeyEvent.VK_NUM_LOCK);\n+\n+            testKeyRange(robot, KeyEvent.VK_NUMPAD0, KeyEvent.VK_DIVIDE);\n@@ -85,1 +95,0 @@\n-            e.printStackTrace();\n@@ -87,0 +96,3 @@\n+        } finally {\n+            robot.keyPress(KeyEvent.VK_NUM_LOCK);\n+            robot.keyRelease(KeyEvent.VK_NUM_LOCK);\n@@ -90,1 +102,1 @@\n-    public static void main(String[] args) {\n+    public static void main(String[] args) throws Exception {\n","filename":"test\/jdk\/java\/awt\/event\/KeyEvent\/KeyCharTest\/KeyCharTest.java","additions":30,"deletions":18,"binary":false,"changes":48,"status":"modified"}]}