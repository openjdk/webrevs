{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2004, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2004, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,1 +26,1 @@\n-  @bug 5013984\n+  @bug 5013984 8360647\n@@ -40,1 +40,1 @@\n-    HashMap<Integer, Character> transMap = new HashMap();\n+    HashMap<Integer, Character> transMap = new HashMap<>();\n@@ -50,2 +50,2 @@\n-        Object value = transMap.get(e.getKeyCode());\n-        if (value != null && e.getKeyChar() != ((Character)value).charValue()) {\n+        Character value = transMap.get(e.getKeyCode());\n+        if (value != null && e.getKeyChar() != value) {\n@@ -57,1 +57,14 @@\n-    public void start () {\n+    private void testKeyRange(Robot robot, int start, int end) {\n+        System.out.printf(\"\\nTesting range on %d to %d\\n\", start, end);\n+        for(int vkey = start; vkey <= end; vkey++) {\n+            try {\n+                robot.keyPress(vkey);\n+                robot.keyRelease(vkey);\n+                System.out.println(KeyEvent.getKeyText(vkey) + \" \" + vkey);\n+            } catch (RuntimeException ignored) {}\n+        }\n+        robot.delay(100);\n+    }\n+\n+    public void start() throws Exception {\n+        Robot robot = new Robot();\n@@ -65,1 +78,0 @@\n-            Robot robot = new Robot();\n@@ -75,9 +87,7 @@\n-            for(int vkey = 0x20; vkey < 0x7F; vkey++) {\n-                try {\n-                    robot.keyPress(vkey);\n-                    robot.keyRelease(vkey);\n-                    System.out.println(KeyEvent.getKeyText(vkey) + \" \" + vkey);\n-                } catch (RuntimeException e) {\n-                }\n-            }\n-            robot.delay(100);\n+            testKeyRange(robot, 0x20, 0x7E);\n+\n+            \/\/ Try again with a different numpad state.\n+            robot.keyPress(KeyEvent.VK_NUM_LOCK);\n+            robot.keyRelease(KeyEvent.VK_NUM_LOCK);\n+\n+            testKeyRange(robot, KeyEvent.VK_NUMPAD0, KeyEvent.VK_DIVIDE);\n@@ -85,1 +95,0 @@\n-            e.printStackTrace();\n@@ -87,0 +96,3 @@\n+        } finally {\n+            robot.keyPress(KeyEvent.VK_NUM_LOCK);\n+            robot.keyRelease(KeyEvent.VK_NUM_LOCK);\n@@ -90,1 +102,1 @@\n-    public static void main(String[] args) {\n+    public static void main(String[] args) throws Exception {\n","filename":"test\/jdk\/java\/awt\/event\/KeyEvent\/KeyCharTest\/KeyCharTest.java","additions":30,"deletions":18,"binary":false,"changes":48,"status":"modified"}]}