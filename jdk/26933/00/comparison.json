{"files":[{"patch":"@@ -30,2 +30,0 @@\n-import sun.java2d.Disposer;\n-import sun.java2d.DisposerRecord;\n@@ -51,6 +49,0 @@\n-    \/** The referent to be registered with the Disposer. *\/\n-    private final Object disposerReferent = new Object();\n-\n-    \/** The DisposerRecord that resets the underlying MemoryCache. *\/\n-    private final DisposerRecord disposerRecord;\n-\n@@ -71,3 +63,0 @@\n-\n-        disposerRecord = new StreamDisposerRecord(cache);\n-        Disposer.addRecord(disposerReferent, disposerRecord);\n@@ -168,1 +157,0 @@\n-        disposerRecord.dispose(); \/\/ this resets the MemoryCache\n@@ -170,0 +158,1 @@\n+        cache.reset();\n@@ -172,15 +161,0 @@\n-\n-    private static class StreamDisposerRecord implements DisposerRecord {\n-        private MemoryCache cache;\n-\n-        public StreamDisposerRecord(MemoryCache cache) {\n-            this.cache = cache;\n-        }\n-\n-        public synchronized void dispose() {\n-            if (cache != null) {\n-                cache.reset();\n-                cache = null;\n-            }\n-        }\n-    }\n","filename":"src\/java.desktop\/share\/classes\/javax\/imageio\/stream\/MemoryCacheImageInputStream.java","additions":1,"deletions":27,"binary":false,"changes":28,"status":"modified"}]}