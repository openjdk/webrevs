{"files":[{"patch":"@@ -100,1 +100,4 @@\n-    static void h2Test(final boolean useHeader) throws Exception {\n+    \/\/ If rightPassword is true we expect the authentication to succeed and 200 OK\n+    \/\/ If false, then an error should be returned.\n+\n+    static void h2Test(final boolean useHeader, boolean rightPassword) throws Exception {\n@@ -127,1 +130,1 @@\n-            var plainCreds = \"user:pwd\";\n+            var plainCreds = rightPassword? \"user:pwd\" : \"user:wrongPwd\";\n@@ -151,6 +154,1 @@\n-            if (useHeader) {\n-                assertTrue(resp.statusCode() == 200, \"Expected 200 response\");\n-                assertTrue(h.authValue().equals(encoded), \"Expected user set header to be set\");\n-                assertTrue(!sa.wasCalled(), \"Expected authenticator not to be called\");\n-                System.out.println(\"h2Test: using user set header OK\");\n-            } else {\n+            if (!useHeader) {\n@@ -162,0 +160,9 @@\n+            } else if (rightPassword) {\n+                assertTrue(resp.statusCode() == 200, \"Expected 200 response\");\n+                assertTrue(h.authValue().equals(encoded), \"Expected user set header to be set\");\n+                assertTrue(!sa.wasCalled(), \"Expected authenticator not to be called\");\n+                System.out.println(\"h2Test: using user set header OK\");\n+            } else {\n+                assertTrue(resp.statusCode() == 401, \"Expected 401 response\");\n+                assertTrue(!sa.wasCalled(), \"Expected authenticator not to be called\");\n+                System.out.println(\"h2Test: using user set header with wrong password OK\");\n@@ -221,2 +228,3 @@\n-        h2Test(true);\n-        h2Test(false);\n+        h2Test(true, true);\n+        h2Test(false, true);\n+        h2Test(true, false);\n@@ -460,0 +468,1 @@\n+\n@@ -474,0 +483,1 @@\n+\n","filename":"test\/jdk\/java\/net\/httpclient\/UserAuthWithAuthenticator.java","additions":20,"deletions":10,"binary":false,"changes":30,"status":"modified"}]}