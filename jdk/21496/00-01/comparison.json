{"files":[{"patch":"@@ -2744,1 +2744,1 @@\n-  beq(flag, success);  \/\/ There is a successor so we are done.\n+  beq(flag, success);  \/\/ If there is a successor we are done.\n@@ -3056,1 +3056,0 @@\n-    Label set_eq_unlocked;\n@@ -3078,1 +3077,3 @@\n-    bne(CCR0, set_eq_unlocked); \/\/ If so we are done.\n+    \/\/ Invert equal bit\n+    crnand(flag, Assembler::equal, flag, Assembler::equal);\n+    beq(CCR0, unlocked); \/\/ If there is a successor we are done.\n@@ -3083,6 +3084,1 @@\n-\n-    crxor(CCR0, Assembler::equal, CCR0, Assembler::equal); \/\/ Set flag = NE => slow path\n-    b(slow_path);\n-\n-    bind(set_eq_unlocked);\n-    crorc(CCR0, Assembler::equal, CCR0, Assembler::equal); \/\/ Set flag = EQ => fast path\n+    b(slow_path); \/\/ flag == NE\n","filename":"src\/hotspot\/cpu\/ppc\/macroAssembler_ppc.cpp","additions":5,"deletions":9,"binary":false,"changes":14,"status":"modified"}]}