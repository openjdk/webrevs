{"files":[{"patch":"@@ -1492,2 +1492,1 @@\n-  Node* halt = _gvn.transform(new HaltNode(if_f, frame, \"unexpected null in intrinsic\"));\n-  C->root()->add_req(halt);\n+  halt(if_f, frame, \"unexpected null in intrinsic\");\n@@ -2076,0 +2075,6 @@\n+void GraphKit::halt(Node* ctrl, Node* frameptr, const char* reason, bool generate_code_in_product) {\n+  Node* halt = new HaltNode(ctrl, frameptr, reason\n+                            PRODUCT_ONLY(COMMA generate_code_in_product));\n+  halt = _gvn.transform(halt);\n+  root()->add_req(halt);\n+}\n@@ -2198,5 +2203,3 @@\n-  HaltNode* halt = new HaltNode(control(), frameptr(), \"uncommon trap returned which should never happen\"\n-                                                       PRODUCT_ONLY(COMMA \/*reachable*\/false));\n-  _gvn.set_type_bottom(halt);\n-  root()->add_req(halt);\n-\n+  halt(control(), frameptr(),\n+       \"uncommon trap returned which should never happen\",\n+       false \/* don't emit code in product, it is just a waste of code space *\/);\n","filename":"src\/hotspot\/share\/opto\/graphKit.cpp","additions":10,"deletions":7,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -712,0 +712,2 @@\n+  void halt(Node* ctrl, Node* frameptr, const char* reason, bool generate_code_in_product = true);\n+\n","filename":"src\/hotspot\/share\/opto\/graphKit.hpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1232,2 +1232,1 @@\n-      Node* halt = _gvn.transform(new HaltNode(not_subtype_ctrl, frameptr(), \"failed receiver subtype check\"));\n-      C->root()->add_req(halt);\n+      halt(not_subtype_ctrl, frameptr(), \"failed receiver subtype check\");\n","filename":"src\/hotspot\/share\/opto\/parse1.cpp","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2343,4 +2343,1 @@\n-      HaltNode* halt = new HaltNode(control(), frameptr(), ss.as_string(C->comp_arena())\n-                                                           PRODUCT_ONLY(COMMA \/*reachable*\/false));\n-      _gvn.set_type_bottom(halt);\n-      root()->add_req(halt);\n+      halt(control(), frameptr(), ss.as_string(C->comp_arena()));\n","filename":"src\/hotspot\/share\/opto\/vectorIntrinsics.cpp","additions":1,"deletions":4,"binary":false,"changes":5,"status":"modified"}]}