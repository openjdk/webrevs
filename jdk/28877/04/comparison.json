{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2021, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -30,2 +30,2 @@\n- * @run testng ReadFieldsCNF\n- * @run testng\/othervm -Djdk.serialGetFieldCnfeReturnsNull=true ReadFieldsCNF\n+ * @run junit ReadFieldsCNF\n+ * @run junit\/othervm -Djdk.serialGetFieldCnfeReturnsNull=true ReadFieldsCNF\n@@ -44,3 +44,0 @@\n-import org.testng.annotations.Test;\n-import org.testng.Assert;\n-\n@@ -50,0 +47,3 @@\n+import org.junit.jupiter.api.Assertions;\n+import org.junit.jupiter.api.Test;\n+\n@@ -61,1 +61,1 @@\n-    private static void testVectorWithRole() throws IOException {\n+    void testVectorWithRole() throws IOException {\n@@ -78,1 +78,1 @@\n-            Assert.fail(\"classname not found\");\n+            Assertions.fail(\"classname not found\");\n@@ -88,1 +88,1 @@\n-            Assert.fail(\"Should not reach here, an exception should always occur\");\n+            Assertions.fail(\"Should not reach here, an exception should always occur\");\n@@ -92,1 +92,1 @@\n-            Assert.assertEquals(expected, cnfe.getMessage(), \"Wrong classname\");\n+            Assertions.assertEquals(expected, cnfe.getMessage(), \"Wrong classname\");\n@@ -94,1 +94,1 @@\n-                Assert.fail(\"Expected IOException got ClassNotFoundException\", cnfe);\n+                Assertions.fail(\"Expected IOException got ClassNotFoundException\", cnfe);\n@@ -99,1 +99,1 @@\n-                Assert.fail(\"Expected ClassNotFoundException got StreamCorruptedException \", ioe);\n+                Assertions.fail(\"Expected ClassNotFoundException got StreamCorruptedException \", ioe);\n@@ -111,1 +111,1 @@\n-    private static void testHolderWithRole() throws IOException {\n+    void testHolderWithRole() throws IOException {\n@@ -126,1 +126,1 @@\n-            Assert.fail(\"classname found at index: \" + off + \" (0x\" + Integer.toHexString(off) + \")\");\n+            Assertions.fail(\"classname found at index: \" + off + \" (0x\" + Integer.toHexString(off) + \")\");\n@@ -136,1 +136,1 @@\n-            Assert.fail(\"Should not reach here, an exception should always occur\");\n+            Assertions.fail(\"Should not reach here, an exception should always occur\");\n@@ -140,1 +140,1 @@\n-            Assert.assertEquals(expected, cnfe.getMessage(), \"Wrong classname\");\n+            Assertions.assertEquals(expected, cnfe.getMessage(), \"Wrong classname\");\n@@ -144,1 +144,1 @@\n-                Assert.fail(\"Expected ClassNotFoundException got StreamCorruptedException \", ioe);\n+                Assertions.fail(\"Expected ClassNotFoundException got StreamCorruptedException \", ioe);\n","filename":"test\/jdk\/java\/io\/Serializable\/GetField\/ReadFieldsCNF.java","additions":17,"deletions":17,"binary":false,"changes":34,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -35,1 +35,1 @@\n- * @run testng\/timeout=300 NonSerializableTest\n+ * @run junit\/timeout=300 NonSerializableTest\n@@ -41,0 +41,2 @@\n+import java.util.List;\n+import java.util.stream.Stream;\n@@ -42,5 +44,2 @@\n-import org.testng.annotations.DataProvider;\n-import org.testng.annotations.BeforeClass;\n-import org.testng.annotations.Test;\n-import static org.testng.Assert.assertTrue;\n-import static org.testng.Assert.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n@@ -51,0 +50,4 @@\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.params.ParameterizedTest;\n+import org.junit.jupiter.params.provider.MethodSource;\n+\n@@ -54,2 +57,2 @@\n-    @BeforeClass\n-    public void setup() throws Exception {\n+    @BeforeAll\n+    public static void setup() throws Exception {\n@@ -62,3 +65,3 @@\n-    @DataProvider\n-    public Object[][] provider() {\n-        return new String[][][] {\n+    \/\/ Test cases to compile and run\n+    public static Stream<List<String>> provider() {\n+        return Stream.of(\n@@ -66,2 +69,2 @@\n-            {{\"NonSerialA_1\", \"-cp\", \".\", \"TestEntry\", \"-s\", \"A\"}},\n-            {{\"NonSerialA_1\", \"-cp\", \".\", \"TestEntry\", \"-d\"}},\n+            List.of(\"NonSerialA_1\", \"-cp\", \".\", \"TestEntry\", \"-s\", \"A\"),\n+            List.of(\"NonSerialA_1\", \"-cp\", \".\", \"TestEntry\", \"-d\"),\n@@ -70,2 +73,2 @@\n-            {{\"NonSerialA_1\", \"-cp\", \".\", \"TestEntry\", \"-s\", \"A\"}},\n-            {{\"NonSerialA_2\", \"-cp\", \".\", \"TestEntry\", \"-d\"}},\n+            List.of(\"NonSerialA_1\", \"-cp\", \".\", \"TestEntry\", \"-s\", \"A\"),\n+            List.of(\"NonSerialA_2\", \"-cp\", \".\", \"TestEntry\", \"-d\"),\n@@ -74,2 +77,2 @@\n-            {{\"NonSerialA_1\", \"-cp\", \".\", \"TestEntry\", \"-s\", \"A\"}},\n-            {{\"SerialA_1\", \"-cp\", \".\", \"TestEntry\", \"-d\"}},\n+            List.of(\"NonSerialA_1\", \"-cp\", \".\", \"TestEntry\", \"-s\", \"A\"),\n+            List.of(\"SerialA_1\", \"-cp\", \".\", \"TestEntry\", \"-d\"),\n@@ -78,2 +81,2 @@\n-            {{\"SerialA_1\", \"-cp\", \".\", \"TestEntry\", \"-s\", \"A\"}},\n-            {{\"NonSerialA_1\", \"-cp\", \".\", \"TestEntry\", \"-doe\"}},\n+            List.of(\"SerialA_1\", \"-cp\", \".\", \"TestEntry\", \"-s\", \"A\"),\n+            List.of(\"NonSerialA_1\", \"-cp\", \".\", \"TestEntry\", \"-doe\"),\n@@ -82,2 +85,2 @@\n-            {{\"SerialA_1\", \"-cp\", \".\", \"TestEntry\", \"-s\", \"A\"}},\n-            {{\"SerialA_2\", \"-cp\", \".\", \"TestEntry\", \"-d\"}},\n+            List.of(\"SerialA_1\", \"-cp\", \".\", \"TestEntry\", \"-s\", \"A\"),\n+            List.of(\"SerialA_2\", \"-cp\", \".\", \"TestEntry\", \"-d\"),\n@@ -86,2 +89,2 @@\n-            {{\"SerialA_2\", \"-cp\", \".\", \"TestEntry\", \"-s\", \"A\"}},\n-            {{\"SerialA_1\", \"-cp\", \".\", \"TestEntry\", \"-d\"}},\n+            List.of(\"SerialA_2\", \"-cp\", \".\", \"TestEntry\", \"-s\", \"A\"),\n+            List.of(\"SerialA_1\", \"-cp\", \".\", \"TestEntry\", \"-d\"),\n@@ -90,2 +93,2 @@\n-            {{\"SerialA_1\", \"-cp\", \".\", \"TestEntry\", \"-s\", \"A\"}},\n-            {{\"SerialA_3\", \"-cp\", \".\", \"TestEntry\", \"-de\"}},\n+            List.of(\"SerialA_1\", \"-cp\", \".\", \"TestEntry\", \"-s\", \"A\"),\n+            List.of(\"SerialA_3\", \"-cp\", \".\", \"TestEntry\", \"-de\"),\n@@ -94,3 +97,2 @@\n-            {{\"SerialA_3\", \"-cp\", \".\", \"TestEntry\", \"-s\", \"A\"}},\n-            {{\"SerialA_1\", \"-cp\", \".\", \"TestEntry\", \"-de\"}},\n-        };\n+            List.of(\"SerialA_3\", \"-cp\", \".\", \"TestEntry\", \"-s\", \"A\"),\n+            List.of(\"SerialA_1\", \"-cp\", \".\", \"TestEntry\", \"-de\"));\n@@ -99,2 +101,4 @@\n-    @Test(dataProvider=\"provider\")\n-    public void test(String[] args) throws Exception {\n+    @ParameterizedTest\n+    @MethodSource(\"provider\")\n+    public void test(List<String> argList) throws Exception {\n+        String[] args = argList.toArray(new String[0]);\n@@ -104,1 +108,1 @@\n-        String params[] = Arrays.copyOfRange(args, 1, args.length);\n+        String[] params = Arrays.copyOfRange(args, 1, args.length);\n@@ -106,3 +110,4 @@\n-        Process p = ProcessTools.startProcess(\"Serializable Test\", pb);\n-        int exitValue = p.waitFor();\n-        assertEquals(exitValue, 0, \"Test failed\");\n+        try (Process p = ProcessTools.startProcess(\"Serializable Test\", pb)) {\n+            int exitValue = p.waitFor();\n+            assertEquals(0, exitValue, \"Test failed\");\n+        }\n","filename":"test\/jdk\/java\/io\/Serializable\/class\/NonSerializableTest.java","additions":40,"deletions":35,"binary":false,"changes":75,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -40,0 +40,1 @@\n+import java.io.Serial;\n@@ -52,1 +53,0 @@\n-@TestInstance(TestInstance.Lifecycle.PER_CLASS)\n@@ -58,0 +58,1 @@\n+        @Serial\n@@ -73,0 +74,1 @@\n+        @Serial\n@@ -80,1 +82,1 @@\n-    public Object[][] recordClasses() {\n+    public static Object[][] recordClasses() {\n@@ -127,1 +129,1 @@\n-    public Object[][] notSerRecordClasses() {\n+    public static Object[][] notSerRecordClasses() {\n","filename":"test\/jdk\/java\/io\/Serializable\/records\/RecordClassTest.java","additions":6,"deletions":4,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -38,0 +38,1 @@\n+import java.io.Serial;\n@@ -47,1 +48,0 @@\n-import org.junit.jupiter.api.TestInstance;\n@@ -51,1 +51,0 @@\n-@TestInstance(TestInstance.Lifecycle.PER_CLASS)\n@@ -55,0 +54,1 @@\n+        @Serial\n@@ -59,0 +59,1 @@\n+        @Serial\n@@ -67,0 +68,1 @@\n+        @Serial\n@@ -70,1 +72,1 @@\n-    public Object[][] recordObjects() {\n+    public static Object[][] recordObjects() {\n@@ -106,1 +108,1 @@\n-    public Object[][] recordClasses() {\n+    public static Object[][] recordClasses() {\n","filename":"test\/jdk\/java\/io\/Serializable\/records\/SerialVersionUIDTest.java","additions":7,"deletions":5,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,3 +33,3 @@\n-import org.testng.annotations.DataProvider;\n-import org.testng.annotations.Test;\n-import org.testng.Assert;\n+import org.junit.jupiter.api.Assertions;\n+import org.junit.jupiter.params.ParameterizedTest;\n+import org.junit.jupiter.params.provider.MethodSource;\n@@ -41,1 +41,1 @@\n- * @run testng CheckArrayTest\n+ * @run junit CheckArrayTest\n@@ -56,2 +56,2 @@\n-    @DataProvider(name = \"Patterns\")\n-    Object[][] patterns() {\n+    \/\/ Test patterns for arrays\n+    private static Object[][] patterns() {\n@@ -67,1 +67,2 @@\n-    @Test(dataProvider = \"Patterns\")\n+    @ParameterizedTest\n+    @MethodSource(\"patterns\")\n@@ -78,1 +79,1 @@\n-                Assert.assertTrue(array.length >= arraySize,\n+                Assertions.assertTrue(array.length >= arraySize,\n@@ -81,1 +82,1 @@\n-                Assert.assertFalse(array.length > arraySize,\n+                Assertions.assertFalse(array.length > arraySize,\n@@ -91,1 +92,2 @@\n-    @Test(dataProvider = \"Patterns\")\n+    @ParameterizedTest\n+    @MethodSource(\"patterns\")\n@@ -101,1 +103,1 @@\n-            Assert.assertTrue(array.length >= arraySize,\n+            Assertions.assertTrue(array.length >= arraySize,\n@@ -104,1 +106,1 @@\n-            Assert.assertFalse(array.length > arraySize,\n+            Assertions.assertFalse(array.length > arraySize,\n","filename":"test\/jdk\/java\/io\/Serializable\/serialFilter\/CheckArrayTest.java","additions":15,"deletions":13,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,0 +28,1 @@\n+import java.io.Serial;\n@@ -30,6 +31,4 @@\n-import org.testng.annotations.BeforeClass;\n-import org.testng.annotations.DataProvider;\n-import org.testng.annotations.Test;\n-\n-import static org.testng.Assert.assertTrue;\n-import static org.testng.Assert.assertFalse;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+import static org.junit.jupiter.api.Assertions.assertFalse;\n+import org.junit.jupiter.params.ParameterizedTest;\n+import org.junit.jupiter.params.provider.MethodSource;\n@@ -39,1 +38,1 @@\n- * @run testng\/othervm CheckInputOrderTest\n+ * @run junit\/othervm CheckInputOrderTest\n@@ -46,0 +45,1 @@\n+    @Serial\n@@ -48,2 +48,2 @@\n-    @DataProvider(name=\"Patterns\")\n-    Object[][] patterns() {\n+    \/\/ Test cases for serial filter strings\n+    static Object[][] patterns() {\n@@ -78,1 +78,2 @@\n-    @Test(dataProvider=\"Patterns\")\n+    @ParameterizedTest\n+    @MethodSource(\"patterns\")\n","filename":"test\/jdk\/java\/io\/Serializable\/serialFilter\/CheckInputOrderTest.java","additions":12,"deletions":11,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,3 +24,2 @@\n-import static org.testng.Assert.assertEquals;\n-import static org.testng.Assert.assertSame;\n-import static org.testng.Assert.assertTrue;\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n@@ -38,3 +37,5 @@\n-import org.testng.Assert;\n-import org.testng.annotations.Test;\n-import org.testng.annotations.DataProvider;\n+import org.junit.jupiter.api.Assertions;\n+import org.junit.jupiter.api.Test;\n+import org.junit.jupiter.api.condition.EnabledIf;\n+import org.junit.jupiter.params.ParameterizedTest;\n+import org.junit.jupiter.params.provider.MethodSource;\n@@ -45,2 +46,2 @@\n- * @run testng\/othervm GlobalFilterTest\n- * @run testng\/othervm -Djdk.serialFilter=java.**\n+ * @run junit\/othervm GlobalFilterTest\n+ * @run junit\/othervm -Djdk.serialFilter=java.**\n@@ -50,1 +51,0 @@\n-@Test\n@@ -57,0 +57,7 @@\n+    private static final String EXPECTED_GLOBAL_FILTER = System.getProperty(\"expected-\" + serialPropName,\n+            Security.getProperty(serialPropName));\n+\n+    static boolean hasGlobalFilter() {\n+        return EXPECTED_GLOBAL_FILTER != null && !EXPECTED_GLOBAL_FILTER.isEmpty();\n+    }\n+\n@@ -61,8 +68,1 @@\n-    @DataProvider(name=\"globalPatternElements\")\n-    Object[][] globalPatternElements() {\n-        String globalFilter =\n-                System.getProperty(\"expected-\" + serialPropName,\n-                        Security.getProperty(serialPropName));\n-        if (globalFilter == null) {\n-            return new Object[0][];\n-        }\n+    static Object[][] globalPatternElements() {\n@@ -70,1 +70,1 @@\n-        String[] patterns = globalFilter.split(\";\");\n+        String[] patterns = EXPECTED_GLOBAL_FILTER.split(\";\");\n@@ -86,1 +86,1 @@\n-                Assert.assertNotNull(o, \"fail generation failed\");\n+                Assertions.assertNotNull(o, \"fail generation failed\");\n@@ -101,1 +101,1 @@\n-    static void globalFilter() {\n+    void globalFilter() {\n@@ -107,1 +107,1 @@\n-        Assert.assertNotEquals(Objects.toString(filter, null), asSetSystemProp,\n+        Assertions.assertNotEquals(asSetSystemProp, Objects.toString(filter, null),\n@@ -115,1 +115,1 @@\n-        Assert.assertEquals(Objects.toString(filter, null), pattern,\n+        assertEquals(pattern, Objects.toString(filter, null),\n@@ -123,3 +123,2 @@\n-    @Test()\n-    @SuppressWarnings(\"removal\")\n-    static void setGlobalFilter() {\n+    @Test\n+    void setGlobalFilter() {\n@@ -132,1 +131,1 @@\n-                Assert.fail(\"set only once process-wide filter\");\n+                Assertions.fail(\"set only once process-wide filter\");\n@@ -144,1 +143,1 @@\n-                Assert.fail(\"set only once process-wide filter\");\n+                Assertions.fail(\"set only once process-wide filter\");\n@@ -157,2 +156,4 @@\n-    @Test(dataProvider = \"globalPatternElements\")\n-    static void globalFilterElements(String pattern, boolean allowed,Object obj) {\n+    @ParameterizedTest\n+    @EnabledIf(\"hasGlobalFilter\")\n+    @MethodSource(\"globalPatternElements\")\n+    void globalFilterElements(String pattern, boolean allowed,Object obj) {\n@@ -180,1 +181,1 @@\n-                Assert.fail(\"Deserializing\", cnf);\n+                Assertions.fail(\"Deserializing\", cnf);\n@@ -182,1 +183,1 @@\n-            Assert.assertTrue(allowed, \"filter should have thrown an exception\");\n+            assertTrue(allowed, \"filter should have thrown an exception\");\n@@ -184,1 +185,1 @@\n-            Assert.fail(\"bad format pattern\", iae);\n+            Assertions.fail(\"bad format pattern\", iae);\n@@ -186,1 +187,1 @@\n-            Assert.assertFalse(allowed, \"filter should not have thrown an exception: \" + ice);\n+            Assertions.assertFalse(allowed, \"filter should not have thrown an exception: \" + ice);\n@@ -188,1 +189,1 @@\n-            Assert.fail(\"Unexpected IOException\", ioe);\n+            Assertions.fail(\"Unexpected IOException\", ioe);\n","filename":"test\/jdk\/java\/io\/Serializable\/serialFilter\/GlobalFilterTest.java","additions":36,"deletions":35,"binary":false,"changes":71,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2021, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,3 +24,0 @@\n-import org.testng.Assert;\n-import org.testng.annotations.DataProvider;\n-import org.testng.annotations.Test;\n@@ -34,0 +31,5 @@\n+import org.junit.jupiter.api.Assertions;\n+import org.junit.jupiter.api.function.Executable;\n+import org.junit.jupiter.params.ParameterizedTest;\n+import org.junit.jupiter.params.provider.MethodSource;\n+\n@@ -40,3 +42,3 @@\n- * @run testng\/othervm -Djdk.serialFilter=.* InvalidGlobalFilterTest\n- * @run testng\/othervm -Djdk.serialFilter=! InvalidGlobalFilterTest\n- * @run testng\/othervm -Djdk.serialFilter=\/ InvalidGlobalFilterTest\n+ * @run junit\/othervm -Djdk.serialFilter=.* InvalidGlobalFilterTest\n+ * @run junit\/othervm -Djdk.serialFilter=! InvalidGlobalFilterTest\n+ * @run junit\/othervm -Djdk.serialFilter=\/ InvalidGlobalFilterTest\n@@ -45,1 +47,0 @@\n-@Test\n@@ -67,2 +68,2 @@\n-    @DataProvider(name = \"MethodsToCall\")\n-    private Object[][] cases() {\n+    \/\/ Test cases for exceptions\n+    private static Object[][] cases() {\n@@ -70,4 +71,4 @@\n-                {serialFilter, \"getSerialFilter\", (Assert.ThrowingRunnable) () -> ObjectInputFilter.Config.getSerialFilter()},\n-                {serialFilter, \"setSerialFilter\", (Assert.ThrowingRunnable) () -> ObjectInputFilter.Config.setSerialFilter(new NoopFilter())},\n-                {serialFilter, \"new ObjectInputStream(is)\", (Assert.ThrowingRunnable) () -> new ObjectInputStream(new ByteArrayInputStream(new byte[0]))},\n-                {serialFilter, \"new OISSubclass()\", (Assert.ThrowingRunnable) () -> new OISSubclass()},\n+                {serialFilter, \"getSerialFilter\", (Executable) () -> ObjectInputFilter.Config.getSerialFilter()},\n+                {serialFilter, \"setSerialFilter\", (Executable) () -> ObjectInputFilter.Config.setSerialFilter(new NoopFilter())},\n+                {serialFilter, \"new ObjectInputStream(is)\", (Executable) () -> new ObjectInputStream(new ByteArrayInputStream(new byte[0]))},\n+                {serialFilter, \"new OISSubclass()\", (Executable) () -> new OISSubclass()},\n@@ -81,2 +82,3 @@\n-    @Test(dataProvider = \"MethodsToCall\")\n-    public void initFaultTest(String pattern, String method, Assert.ThrowingRunnable runnable) {\n+    @ParameterizedTest\n+    @MethodSource(\"cases\")\n+    public void initFaultTest(String pattern, String method, Executable runnable) {\n@@ -84,1 +86,1 @@\n-        IllegalStateException ex = Assert.expectThrows(IllegalStateException.class,\n+        IllegalStateException ex = Assertions.assertThrows(IllegalStateException.class,\n@@ -89,1 +91,1 @@\n-            Assert.fail(\"No expected message for filter: \" + serialFilter);\n+            Assertions.fail(\"No expected message for filter: \" + serialFilter);\n@@ -92,1 +94,1 @@\n-        Assert.assertEquals(ex.getMessage(), expected, \"wrong message\");\n+        Assertions.assertEquals(expected, ex.getMessage(), \"wrong message\");\n","filename":"test\/jdk\/java\/io\/Serializable\/serialFilter\/InvalidGlobalFilterTest.java","additions":21,"deletions":19,"binary":false,"changes":40,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,0 +28,1 @@\n+import java.io.Serial;\n@@ -31,6 +32,6 @@\n-import org.testng.annotations.BeforeClass;\n-import org.testng.annotations.DataProvider;\n-import org.testng.annotations.Test;\n-\n-import static org.testng.Assert.assertTrue;\n-import static org.testng.Assert.fail;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+import static org.junit.jupiter.api.Assertions.fail;\n+import org.junit.jupiter.api.condition.DisabledIf;\n+import org.junit.jupiter.api.condition.EnabledIf;\n+import org.junit.jupiter.params.ParameterizedTest;\n+import org.junit.jupiter.params.provider.MethodSource;\n@@ -40,2 +41,2 @@\n- * @run testng\/othervm -Djdk.serialFilter=!java.**;!java.lang.Long;maxdepth=5;maxarray=5;maxbytes=90;maxrefs=5          MixedFiltersTest\n- * @run testng\/othervm -Djdk.serialFilter=java.**;java.lang.Long;maxdepth=1000;maxarray=1000;maxbytes=1000;maxrefs=1000 MixedFiltersTest\n+ * @run junit\/othervm -Djdk.serialFilter=!java.**;!java.lang.Long;maxdepth=5;maxarray=5;maxbytes=90;maxrefs=5          MixedFiltersTest\n+ * @run junit\/othervm -Djdk.serialFilter=java.**;java.lang.Long;maxdepth=1000;maxarray=1000;maxbytes=1000;maxrefs=1000 MixedFiltersTest\n@@ -49,0 +50,1 @@\n+    @Serial\n@@ -51,0 +53,2 @@\n+    private static final String JDK_SERIAL_FILTER = System.getProperty(\"jdk.serialFilter\",\n+            Security.getProperty(\"jdk.serialFilter\"));\n@@ -52,7 +56,2 @@\n-    boolean globalRejected;\n-\n-    @BeforeClass\n-    public void setup() {\n-        String pattern = System.getProperty(\"jdk.serialFilter\",\n-                Security.getProperty(\"jdk.serialFilter\"));\n-        globalRejected = pattern.startsWith(\"!\");\n+    private static boolean globalRejected() {\n+        return JDK_SERIAL_FILTER.startsWith(\"!\");\n@@ -61,5 +60,1 @@\n-    @DataProvider(name=\"RejectedInGlobal\")\n-    Object[][] rejectedInGlobal() {\n-        if (!globalRejected) {\n-            return new Object[0][];\n-        }\n+    static Object[][] rejectedInGlobal() {\n@@ -82,1 +77,3 @@\n-    @Test(dataProvider=\"RejectedInGlobal\")\n+    @ParameterizedTest\n+    @EnabledIf(\"globalRejected\")\n+    @MethodSource(\"rejectedInGlobal\")\n@@ -99,6 +96,1 @@\n-    @DataProvider(name=\"AllowedInGlobal\")\n-    Object[][] allowedInGlobal() {\n-        if (globalRejected) {\n-            return new Object[0][];\n-        }\n-\n+    static Object[][] allowedInGlobal() {\n@@ -121,1 +113,3 @@\n-    @Test(dataProvider=\"AllowedInGlobal\")\n+    @ParameterizedTest\n+    @DisabledIf(\"globalRejected\")\n+    @MethodSource(\"allowedInGlobal\")\n","filename":"test\/jdk\/java\/io\/Serializable\/serialFilter\/MixedFiltersTest.java","additions":23,"deletions":29,"binary":false,"changes":52,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2021, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,4 +24,0 @@\n-import org.testng.Assert;\n-import org.testng.annotations.DataProvider;\n-import org.testng.annotations.Test;\n-\n@@ -49,0 +45,4 @@\n+import org.junit.jupiter.api.Assertions;\n+import org.junit.jupiter.params.ParameterizedTest;\n+import org.junit.jupiter.params.provider.MethodSource;\n+\n@@ -50,2 +50,2 @@\n- * @run testng\/othervm SerialFactoryExample\n- * @run testng\/othervm -Djdk.serialFilterFactory=SerialFactoryExample$FilterInThread SerialFactoryExample\n+ * @run junit\/othervm SerialFactoryExample\n+ * @run junit\/othervm -Djdk.serialFilterFactory=SerialFactoryExample$FilterInThread SerialFactoryExample\n@@ -79,1 +79,0 @@\n-@Test\n@@ -82,1 +81,1 @@\n-    @DataProvider(name = \"Examples\")\n+    \/\/ Test cases for filters\n@@ -111,1 +110,2 @@\n-    @Test(dataProvider = \"Examples\")\n+    @ParameterizedTest\n+    @MethodSource(\"examples\")\n@@ -131,1 +131,1 @@\n-                Assert.fail(\"IllegalClassException should have occurred\");\n+                Assertions.fail(\"IllegalClassException should have occurred\");\n@@ -134,2 +134,2 @@\n-            Assert.assertEquals(ioe.getClass(), InvalidClassException.class, \"Wrong exception\");\n-            Assert.assertEquals(REJECTED, expected, \"Exception should not have occurred\");\n+            Assertions.assertEquals(InvalidClassException.class, ioe.getClass(), \"Wrong exception\");\n+            Assertions.assertEquals(expected, REJECTED, \"Exception should not have occurred\");\n@@ -145,1 +145,2 @@\n-    @Test(dataProvider = \"Examples\")\n+    @ParameterizedTest\n+    @MethodSource(\"examples\")\n@@ -169,1 +170,1 @@\n-                    Assert.assertEquals(actualStatus, expected, \"Wrong Status\");\n+                    Assertions.assertEquals(expected, actualStatus, \"Wrong Status\");\n@@ -174,1 +175,1 @@\n-            Assert.fail(\"unexpected exception\", ex);\n+            Assertions.fail(\"unexpected exception\", ex);\n","filename":"test\/jdk\/java\/io\/Serializable\/serialFilter\/SerialFactoryExample.java","additions":17,"deletions":16,"binary":false,"changes":33,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2021, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,3 +24,0 @@\n-import org.testng.Assert;\n-import org.testng.annotations.DataProvider;\n-import org.testng.annotations.Test;\n@@ -35,0 +32,5 @@\n+import org.junit.jupiter.api.Assertions;\n+import org.junit.jupiter.api.function.Executable;\n+import org.junit.jupiter.params.ParameterizedTest;\n+import org.junit.jupiter.params.provider.MethodSource;\n+\n@@ -36,4 +38,4 @@\n- * @run testng\/othervm  -Djdk.serialFilterFactory=ForcedError_NoSuchClass SerialFactoryFaults\n- * @run testng\/othervm  -Djdk.serialFilterFactory=SerialFactoryFaults$NoPublicConstructor SerialFactoryFaults\n- * @run testng\/othervm  -Djdk.serialFilterFactory=SerialFactoryFaults$ConstructorThrows SerialFactoryFaults\n- * @run testng\/othervm  -Djdk.serialFilterFactory=SerialFactoryFaults$FactorySetsFactory SerialFactoryFaults\n+ * @run junit\/othervm  -Djdk.serialFilterFactory=ForcedError_NoSuchClass SerialFactoryFaults\n+ * @run junit\/othervm  -Djdk.serialFilterFactory=SerialFactoryFaults$NoPublicConstructor SerialFactoryFaults\n+ * @run junit\/othervm  -Djdk.serialFilterFactory=SerialFactoryFaults$ConstructorThrows SerialFactoryFaults\n+ * @run junit\/othervm  -Djdk.serialFilterFactory=SerialFactoryFaults$FactorySetsFactory SerialFactoryFaults\n@@ -43,1 +45,0 @@\n-@Test\n@@ -55,2 +56,2 @@\n-    @DataProvider(name = \"MethodsToCall\")\n-    private Object[][] cases() {\n+    \/\/ Test cases of faults\n+    private static Object[][] cases() {\n@@ -58,4 +59,4 @@\n-                {\"getSerialFilterFactory\", (Assert.ThrowingRunnable) () -> Config.getSerialFilterFactory()},\n-                {\"setSerialFilterFactory\", (Assert.ThrowingRunnable) () -> Config.setSerialFilterFactory(new NoopFactory())},\n-                {\"new ObjectInputStream(is)\", (Assert.ThrowingRunnable) () -> new ObjectInputStream(new ByteArrayInputStream(new byte[0]))},\n-                {\"new OISSubclass()\", (Assert.ThrowingRunnable) () -> new OISSubclass()},\n+                {\"getSerialFilterFactory\", (Executable) () -> Config.getSerialFilterFactory()},\n+                {\"setSerialFilterFactory\", (Executable) () -> Config.setSerialFilterFactory(new NoopFactory())},\n+                {\"new ObjectInputStream(is)\", (Executable) () -> new ObjectInputStream(new ByteArrayInputStream(new byte[0]))},\n+                {\"new OISSubclass()\", (Executable) () -> new OISSubclass()},\n@@ -69,3 +70,4 @@\n-    @Test(dataProvider = \"MethodsToCall\")\n-    public void initFaultTest(String name, Assert.ThrowingRunnable runnable) {\n-        IllegalStateException ex = Assert.expectThrows(IllegalStateException.class,\n+    @ParameterizedTest\n+    @MethodSource(\"cases\")\n+    public void initFaultTest(String name, Executable runnable) {\n+        IllegalStateException ex = Assertions.assertThrows(IllegalStateException.class,\n@@ -76,2 +78,1 @@\n-            Assert.assertEquals(msg,\n-                    \"invalid jdk.serialFilterFactory: ForcedError_NoSuchClass: java.lang.ClassNotFoundException: ForcedError_NoSuchClass\", \"wrong exception\");\n+            Assertions.assertEquals(\"invalid jdk.serialFilterFactory: ForcedError_NoSuchClass: java.lang.ClassNotFoundException: ForcedError_NoSuchClass\", msg, \"wrong exception\");\n@@ -79,2 +80,1 @@\n-            Assert.assertEquals(msg,\n-                    \"invalid jdk.serialFilterFactory: SerialFactoryFaults$NoPublicConstructor: java.lang.NoSuchMethodException: SerialFactoryFaults$NoPublicConstructor.<init>()\", \"wrong exception\");\n+            Assertions.assertEquals(\"invalid jdk.serialFilterFactory: SerialFactoryFaults$NoPublicConstructor: java.lang.NoSuchMethodException: SerialFactoryFaults$NoPublicConstructor.<init>()\", msg, \"wrong exception\");\n@@ -82,2 +82,1 @@\n-            Assert.assertEquals(msg,\n-                    \"invalid jdk.serialFilterFactory: SerialFactoryFaults$ConstructorThrows: java.lang.RuntimeException: constructor throwing a runtime exception\", \"wrong exception\");\n+            Assertions.assertEquals(\"invalid jdk.serialFilterFactory: SerialFactoryFaults$ConstructorThrows: java.lang.RuntimeException: constructor throwing a runtime exception\", msg, \"wrong exception\");\n@@ -85,2 +84,1 @@\n-            Assert.assertEquals(msg,\n-                    \"invalid jdk.serialFilterFactory: SerialFactoryFaults$FactorySetsFactory: java.lang.IllegalStateException: Serial filter factory initialization incomplete\", \"wrong exception\");\n+            Assertions.assertEquals(\"invalid jdk.serialFilterFactory: SerialFactoryFaults$FactorySetsFactory: java.lang.IllegalStateException: Serial filter factory initialization incomplete\", msg, \"wrong exception\");\n@@ -88,1 +86,1 @@\n-            Assert.fail(\"No test for filter factory: \" + factoryName);\n+            Assertions.fail(\"No test for filter factory: \" + factoryName);\n","filename":"test\/jdk\/java\/io\/Serializable\/serialFilter\/SerialFactoryFaults.java","additions":25,"deletions":27,"binary":false,"changes":52,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2021, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2021, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -25,3 +25,0 @@\n-import org.testng.Assert;\n-import org.testng.annotations.DataProvider;\n-import org.testng.annotations.Test;\n@@ -41,0 +38,9 @@\n+import org.junit.jupiter.api.Assertions;\n+import org.junit.jupiter.api.MethodOrderer;\n+import org.junit.jupiter.api.Order;\n+import org.junit.jupiter.api.Test;\n+import org.junit.jupiter.api.TestMethodOrder;\n+import org.junit.jupiter.api.condition.EnabledIf;\n+import org.junit.jupiter.params.ParameterizedTest;\n+import org.junit.jupiter.params.provider.MethodSource;\n+\n@@ -43,2 +49,2 @@\n- * @run testng\/othervm SerialFilterFactoryTest\n- * @run testng\/othervm -Djdk.serialFilterFactory=SerialFilterFactoryTest$PropertyFilterFactory\n+ * @run junit\/othervm SerialFilterFactoryTest\n+ * @run junit\/othervm -Djdk.serialFilterFactory=SerialFilterFactoryTest$PropertyFilterFactory\n@@ -46,1 +52,1 @@\n- * @run testng\/othervm -Djdk.serialFilterFactory=SerialFilterFactoryTest$NotMyFilterFactory\n+ * @run junit\/othervm -Djdk.serialFilterFactory=SerialFilterFactoryTest$NotMyFilterFactory\n@@ -51,1 +57,1 @@\n-@Test\n+@TestMethodOrder(MethodOrderer.OrderAnnotation.class)\n@@ -73,1 +79,1 @@\n-            Assert.fail(\"unexpected IOE\", ioe);\n+            Assertions.fail(\"unexpected IOE\", ioe);\n@@ -112,1 +118,1 @@\n-    @DataProvider(name=\"FilterCases\")\n+    \/\/ Test cases for filter factory\n@@ -127,1 +133,1 @@\n-    @Test(expectedExceptions=NullPointerException.class)\n+    @Test\n@@ -129,1 +135,3 @@\n-        Config.setSerialFilterFactory(null);\n+        Assertions.assertThrows(NullPointerException.class, () -> {\n+            Config.setSerialFilterFactory(null);\n+        });\n@@ -139,1 +147,0 @@\n-    @SuppressWarnings(\"removal\")\n@@ -148,1 +155,1 @@\n-                Assert.fail(\"First setSerialFilterFactory should not throw\");\n+                Assertions.fail(\"First setSerialFilterFactory should not throw\");\n@@ -152,1 +159,1 @@\n-        Assert.expectThrows(IllegalStateException.class,\n+        Assertions.assertThrows(IllegalStateException.class,\n@@ -155,1 +162,1 @@\n-        Assert.assertEquals(resetFF, currFF, \"Setting again should not change filter factory\");\n+        Assertions.assertEquals(currFF, resetFF, \"Setting again should not change filter factory\");\n@@ -170,2 +177,4 @@\n-    @Test(dataProvider=\"FilterCases\")\n-    @SuppressWarnings(\"removal\")\n+    @ParameterizedTest\n+    @EnabledIf(\"isValidFilterFactory\")\n+    @MethodSource(\"filterCases\")\n+    @Order(1)\n@@ -185,2 +194,2 @@\n-        Assert.assertNull(factory.current(), \"initially current should be null\");\n-        Assert.assertEquals(factory.next(), configFilter, \"initially next should be the configured filter\");\n+        Assertions.assertNull(factory.current(), \"initially current should be null\");\n+        Assertions.assertEquals(configFilter, factory.next(), \"initially next should be the configured filter\");\n@@ -190,1 +199,1 @@\n-            Assert.assertEquals(currFilter, configFilter, \"getObjectInputFilter should be configured filter\");\n+            Assertions.assertEquals(configFilter, currFilter, \"getObjectInputFilter should be configured filter\");\n@@ -192,1 +201,1 @@\n-            Assert.assertEquals(currFilter, configFilter, \"getObjectInputFilter should be null\");\n+            Assertions.assertEquals(configFilter, currFilter, \"getObjectInputFilter should be null\");\n@@ -197,2 +206,2 @@\n-            Assert.assertEquals(factory.current(), currFilter, \"when setObjectInputFilter, current should be current filter\");\n-            Assert.assertEquals(factory.next(), streamFilter, \"next should be stream specific filter\");\n+            Assertions.assertEquals(currFilter, factory.current(), \"when setObjectInputFilter, current should be current filter\");\n+            Assertions.assertEquals(streamFilter, factory.next(), \"next should be stream specific filter\");\n@@ -202,1 +211,1 @@\n-            Assert.assertEquals(currFilter, streamFilter, \"getObjectInputFilter should be set\");\n+            Assertions.assertEquals(streamFilter, currFilter, \"getObjectInputFilter should be set\");\n@@ -205,1 +214,1 @@\n-            Assert.assertThrows(IllegalStateException.class, () -> ois.setObjectInputFilter(streamFilter));\n+            Assertions.assertThrows(IllegalStateException.class, () -> ois.setObjectInputFilter(streamFilter));\n@@ -210,1 +219,1 @@\n-            Assert.assertEquals(validator.count, 1, \"Wrong number of calls to the stream filter\");\n+            Assertions.assertEquals(1, validator.count, \"Wrong number of calls to the stream filter\");\n@@ -220,1 +229,1 @@\n-            Assert.assertEquals(jdkSerialFilterFactory.getClass().getName(), jdkSerialFilterFactoryProp,\n+            Assertions.assertEquals(jdkSerialFilterFactoryProp, jdkSerialFilterFactory.getClass().getName(),\n@@ -227,1 +236,2 @@\n-    @Test(dependsOnMethods=\"testCase\")\n+    @Test\n+    @Order(99)\n@@ -230,2 +240,2 @@\n-        IllegalStateException ise = Assert.expectThrows(IllegalStateException.class, () -> Config.setSerialFilterFactory(factory));\n-        Assert.assertTrue(ise.getMessage().startsWith(\"Cannot replace filter factory: \"));\n+        IllegalStateException ise = Assertions.assertThrows(IllegalStateException.class, () -> Config.setSerialFilterFactory(factory));\n+        Assertions.assertTrue(ise.getMessage().startsWith(\"Cannot replace filter factory: \"));\n@@ -246,1 +256,1 @@\n-                Assert.fail(\"setting filter to null after a non-null filter should throw\");\n+                Assertions.fail(\"setting filter to null after a non-null filter should throw\");\n@@ -250,1 +260,1 @@\n-                Assert.fail(\"setting filter to null after a null filter should not throw\");\n+                Assertions.fail(\"setting filter to null after a null filter should not throw\");\n","filename":"test\/jdk\/java\/io\/Serializable\/serialFilter\/SerialFilterFactoryTest.java","additions":43,"deletions":33,"binary":false,"changes":76,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2021, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,5 +24,0 @@\n-\n-import org.testng.Assert;\n-import org.testng.annotations.DataProvider;\n-import org.testng.annotations.Test;\n-\n@@ -38,0 +33,5 @@\n+import org.junit.jupiter.api.Assertions;\n+import org.junit.jupiter.api.Test;\n+import org.junit.jupiter.params.ParameterizedTest;\n+import org.junit.jupiter.params.provider.MethodSource;\n+\n@@ -39,1 +39,1 @@\n- * @run testng\/othervm -Djava.util.logging.config.file=${test.src}\/logging.properties\n+ * @run junit\/othervm -Djava.util.logging.config.file=${test.src}\/logging.properties\n@@ -43,1 +43,0 @@\n-@Test\n@@ -56,1 +55,1 @@\n-                Assert.assertEquals(merge(st1, st2), r, \"merge\");\n+                Assertions.assertEquals(r, merge(st1, st2), \"merge\");\n@@ -58,2 +57,2 @@\n-            Assert.assertSame(ObjectInputFilter.merge(filter1, null), filter1, \"merge with null fail\");\n-            Assert.assertThrows(NullPointerException.class, () -> ObjectInputFilter.merge(null, filter1));\n+            Assertions.assertSame(ObjectInputFilter.merge(filter1, null), filter1, \"merge with null fail\");\n+            Assertions.assertThrows(NullPointerException.class, () -> ObjectInputFilter.merge(null, filter1));\n@@ -87,1 +86,1 @@\n-    @DataProvider(name = \"AllowPredicateCases\")\n+    \/\/ Test cases of filter strings\n@@ -98,1 +97,2 @@\n-    @Test(dataProvider = \"AllowPredicateCases\")\n+    @ParameterizedTest\n+    @MethodSource(\"allowPredicateCases\")\n@@ -102,1 +102,1 @@\n-            Assert.assertThrows(NullPointerException.class, () -> ObjectInputFilter.allowFilter(predicate, expected));\n+            Assertions.assertThrows(NullPointerException.class, () -> ObjectInputFilter.allowFilter(predicate, expected));\n@@ -104,2 +104,1 @@\n-            Assert.assertEquals(ObjectInputFilter.allowFilter(predicate, otherStatus).checkInput(info),\n-                    expected, \"Predicate result\");\n+            Assertions.assertEquals(                    expected, ObjectInputFilter.allowFilter(predicate, otherStatus).checkInput(info), \"Predicate result\");\n@@ -109,1 +108,0 @@\n-    @DataProvider(name = \"RejectPredicateCases\")\n@@ -120,1 +118,2 @@\n-    @Test(dataProvider = \"RejectPredicateCases\")\n+    @ParameterizedTest\n+    @MethodSource(\"rejectPredicateCases\")\n@@ -124,1 +123,1 @@\n-            Assert.assertThrows(NullPointerException.class, () -> ObjectInputFilter.allowFilter(predicate, expected));\n+            Assertions.assertThrows(NullPointerException.class, () -> ObjectInputFilter.allowFilter(predicate, expected));\n@@ -126,2 +125,2 @@\n-            Assert.assertEquals(ObjectInputFilter.rejectFilter(predicate, otherStatus)\n-                    .checkInput(info), expected, \"Predicate result\");\n+            Assertions.assertEquals(expected, ObjectInputFilter.rejectFilter(predicate, otherStatus)\n+                    .checkInput(info), \"Predicate result\");\n@@ -136,1 +135,1 @@\n-        Assert.assertEquals(ObjectInputFilter.rejectUndecidedClass(undecided).checkInput(info), REJECTED, \"undecided -> rejected\");\n+        Assertions.assertEquals(REJECTED, ObjectInputFilter.rejectUndecidedClass(undecided).checkInput(info), \"undecided -> rejected\");\n@@ -138,1 +137,1 @@\n-        Assert.assertEquals(ObjectInputFilter.rejectUndecidedClass(allowed).checkInput(info), ALLOWED, \"allowed -> rejected\");\n+        Assertions.assertEquals(ALLOWED, ObjectInputFilter.rejectUndecidedClass(allowed).checkInput(info), \"allowed -> rejected\");\n@@ -140,1 +139,1 @@\n-        Assert.assertEquals(ObjectInputFilter.rejectUndecidedClass(rejected).checkInput(info), REJECTED, \"rejected -> rejected\");\n+        Assertions.assertEquals(REJECTED, ObjectInputFilter.rejectUndecidedClass(rejected).checkInput(info), \"rejected -> rejected\");\n@@ -167,1 +166,1 @@\n-                Assert.assertEquals(st, expected, \"Wrong status for class: \" + obj.getClass());\n+                Assertions.assertEquals(expected, st, \"Wrong status for class: \" + obj.getClass());\n@@ -169,1 +168,1 @@\n-                Assert.assertEquals(rawSt, st, \"raw filter and rejectUndecided filter disagree\");\n+                Assertions.assertEquals(st, rawSt, \"raw filter and rejectUndecided filter disagree\");\n","filename":"test\/jdk\/java\/io\/Serializable\/serialFilter\/SerialFilterFunctionTest.java","additions":25,"deletions":26,"binary":false,"changes":51,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -49,3 +49,4 @@\n-import org.testng.Assert;\n-import org.testng.annotations.Test;\n-import org.testng.annotations.DataProvider;\n+import org.junit.jupiter.api.Assertions;\n+import org.junit.jupiter.api.Test;\n+import org.junit.jupiter.params.ParameterizedTest;\n+import org.junit.jupiter.params.provider.MethodSource;\n@@ -56,1 +57,1 @@\n- * @run testng\/othervm -Djava.util.logging.config.file=${test.src}\/logging.properties\n+ * @run junit\/othervm -Djava.util.logging.config.file=${test.src}\/logging.properties\n@@ -58,1 +59,1 @@\n- * @run testng\/othervm -Djdk.serialSetFilterAfterRead=true SerialFilterTest\n+ * @run junit\/othervm -Djdk.serialSetFilterAfterRead=true SerialFilterTest\n@@ -62,1 +63,0 @@\n-@Test\n@@ -92,1 +92,0 @@\n-    @DataProvider(name=\"Patterns\")\n@@ -94,1 +93,1 @@\n-        Object[][] patterns = new Object[][]{\n+        return new Object[][]{\n@@ -108,1 +107,0 @@\n-        return patterns;\n@@ -111,1 +109,0 @@\n-    @DataProvider(name=\"InvalidPatterns\")\n@@ -123,1 +120,0 @@\n-    @DataProvider(name=\"Limits\")\n@@ -136,1 +132,0 @@\n-    @DataProvider(name=\"InvalidLimits\")\n@@ -160,1 +155,0 @@\n-    @DataProvider(name=\"Objects\")\n@@ -171,1 +165,1 @@\n-            Assert.fail(\"missing class: \" + className, e);\n+            Assertions.fail(\"missing class: \" + className, e);\n@@ -216,1 +210,0 @@\n-    @DataProvider(name=\"Arrays\")\n@@ -247,1 +240,2 @@\n-    @Test(dataProvider=\"Objects\")\n+    @ParameterizedTest\n+    @MethodSource(\"objects\")\n@@ -254,8 +248,8 @@\n-        System.out.printf(\"v: %s%n\", validator);\n-\n-        Assert.assertEquals(validator.count, count, \"callback count wrong\");\n-        Assert.assertEquals(validator.classes, classes, \"classes mismatch\");\n-        Assert.assertEquals(validator.maxArray, maxArray, \"maxArray mismatch\");\n-        Assert.assertEquals(validator.maxRefs, maxRefs, \"maxRefs wrong\");\n-        Assert.assertEquals(validator.maxDepth, maxDepth, \"depth wrong\");\n-        Assert.assertEquals(validator.maxBytes, maxBytes, \"maxBytes wrong\");\n+        System.err.printf(\"v: %s%n\", validator);\n+\n+        Assertions.assertEquals(count, validator.count, \"callback count wrong\");\n+        Assertions.assertEquals(classes, validator.classes, \"classes mismatch\");\n+        Assertions.assertEquals(maxArray, validator.maxArray, \"maxArray mismatch\");\n+        Assertions.assertEquals(maxRefs, validator.maxRefs, \"maxRefs wrong\");\n+        Assertions.assertEquals(maxDepth, validator.maxDepth, \"depth wrong\");\n+        Assertions.assertEquals(maxBytes, validator.maxBytes, \"maxBytes wrong\");\n@@ -272,1 +266,2 @@\n-    @Test(dataProvider=\"Patterns\")\n+    @ParameterizedTest\n+    @MethodSource(\"patterns\")\n@@ -300,1 +295,1 @@\n-                    Assert.assertEquals(global, initial, \"initial filter should be the global filter\");\n+                    Assertions.assertEquals(initial, global, \"initial filter should be the global filter\");\n@@ -306,1 +301,1 @@\n-                        Assert.fail(\"Should not be able to set filter twice\");\n+                        Assertions.fail(\"Should not be able to set filter twice\");\n@@ -311,1 +306,1 @@\n-                    Assert.fail(\"Should not reach end-of-file\", eof);\n+                    Assertions.fail(\"Should not reach end-of-file\", eof);\n@@ -313,1 +308,1 @@\n-                    Assert.fail(\"Deserializing\", cnf);\n+                    Assertions.fail(\"Deserializing\", cnf);\n@@ -316,1 +311,1 @@\n-                Assert.fail(\"Unexpected IOException\", ex);\n+                Assertions.fail(\"Unexpected IOException\", ex);\n@@ -339,1 +334,1 @@\n-                Assert.assertEquals(actual1, expected1, \"unexpected string\");\n+                Assertions.assertEquals(expected1, actual1, \"unexpected string\");\n@@ -348,1 +343,1 @@\n-                    Assert.fail(\"Should not be able to set filter after readObject has been called\");\n+                    Assertions.fail(\"Should not be able to set filter after readObject has been called\");\n@@ -352,1 +347,1 @@\n-                    Assert.fail(\"With jdk.serialSetFilterAfterRead property set = true; \" +\n+                    Assertions.fail(\"With jdk.serialSetFilterAfterRead property set = true; \" +\n@@ -355,1 +350,1 @@\n-                Assert.fail(\"Should not reach end-of-file\", eof);\n+                Assertions.fail(\"Should not reach end-of-file\", eof);\n@@ -365,1 +360,2 @@\n-    @Test(dataProvider=\"Arrays\")\n+    @ParameterizedTest\n+    @MethodSource(\"arrays\")\n@@ -370,1 +366,1 @@\n-        Assert.assertEquals(o.getClass(), array.getClass(), \"Filter not called with the array\");\n+        Assertions.assertEquals(array.getClass(), o.getClass(), \"Filter not called with the array\");\n@@ -382,1 +378,2 @@\n-    @Test(dataProvider=\"Limits\")\n+    @ParameterizedTest\n+    @MethodSource(\"limits\")\n@@ -387,1 +384,1 @@\n-        Assert.assertEquals(\n+        Assertions.assertEquals(ObjectInputFilter.Status.REJECTED,\n@@ -389,1 +386,0 @@\n-                ObjectInputFilter.Status.REJECTED,\n@@ -391,1 +387,1 @@\n-        Assert.assertEquals(\n+        Assertions.assertEquals(ObjectInputFilter.Status.UNDECIDED,\n@@ -393,1 +389,0 @@\n-                ObjectInputFilter.Status.UNDECIDED,\n@@ -402,1 +397,2 @@\n-    @Test(dataProvider=\"InvalidLimits\", expectedExceptions=java.lang.IllegalArgumentException.class)\n+    @ParameterizedTest\n+    @MethodSource(\"invalidLimits\")\n@@ -404,6 +400,3 @@\n-        try {\n-            ObjectInputFilter filter = ObjectInputFilter.Config.createFilter(pattern);\n-        } catch (IllegalArgumentException iae) {\n-            System.out.printf(\"    success exception: %s%n\", iae);\n-            throw iae;\n-        }\n+        var iae = Assertions.assertThrows(IllegalArgumentException.class,\n+                () -> ObjectInputFilter.Config.createFilter(pattern));\n+        System.err.printf(\"    success exception: %s%n\", iae);\n@@ -415,1 +408,1 @@\n-    @Test(expectedExceptions=InvalidClassException.class)\n+    @Test\n@@ -417,11 +410,5 @@\n-        byte[] bytes = writeObjects(0); \/\/ an Integer\n-        try {\n-            Object o = validate(bytes, new ObjectInputFilter() {\n-                public ObjectInputFilter.Status checkInput(ObjectInputFilter.FilterInfo f) {\n-                    return null;\n-                }\n-            });\n-        } catch (InvalidClassException ice) {\n-            System.out.printf(\"    success exception: %s%n\", ice);\n-            throw ice;\n-        }\n+        var ice = Assertions.assertThrows(InvalidClassException.class, () -> {\n+            byte[] bytes = writeObjects(0); \/\/ an Integer\n+            validate(bytes, f -> null);\n+        });\n+        System.err.printf(\"    success exception: %s%n\", ice);\n@@ -434,1 +421,2 @@\n-    @Test(dataProvider=\"InvalidPatterns\", expectedExceptions=IllegalArgumentException.class)\n+    @ParameterizedTest\n+    @MethodSource(\"invalidPatterns\")\n@@ -436,6 +424,3 @@\n-        try {\n-            ObjectInputFilter.Config.createFilter(pattern);\n-        } catch (IllegalArgumentException iae) {\n-            System.out.printf(\"    success exception: %s%n\", iae);\n-            throw iae;\n-        }\n+        var iae = Assertions.assertThrows(IllegalArgumentException.class,\n+                () -> ObjectInputFilter.Config.createFilter(pattern));\n+        System.err.printf(\"    success exception: %s%n\", iae);\n@@ -450,1 +435,1 @@\n-        Assert.assertNull(filter, \"empty pattern did not return null\");\n+        Assertions.assertNull(filter, \"empty pattern did not return null\");\n@@ -453,1 +438,1 @@\n-        Assert.assertNull(filter, \"pattern with only delimiters did not return null\");\n+        Assertions.assertNull(filter, \"pattern with only delimiters did not return null\");\n@@ -475,1 +460,1 @@\n-            Assert.fail(\"Deserializing\", cnf);\n+            Assertions.fail(\"Deserializing\", cnf);\n@@ -517,1 +502,1 @@\n-            System.out.printf(\"     checkInput: class: %s, arrayLen: %d, refs: %d, depth: %d, bytes; %d%n\",\n+            System.err.printf(\"     checkInput: class: %s, arrayLen: %d, refs: %d, depth: %d, bytes; %d%n\",\n@@ -564,1 +549,1 @@\n-            Assert.assertTrue(allowed, \"filter should have thrown an exception\");\n+            Assertions.assertTrue(allowed, \"filter should have thrown an exception\");\n@@ -566,1 +551,1 @@\n-            Assert.fail(\"bad format pattern\", iae);\n+            Assertions.fail(\"bad format pattern\", iae);\n@@ -568,1 +553,1 @@\n-            Assert.assertFalse(allowed, \"filter should not have thrown an exception: \" + ice);\n+            Assertions.assertFalse(allowed, \"filter should not have thrown an exception: \" + ice);\n@@ -570,1 +555,1 @@\n-            Assert.fail(\"Unexpected IOException\", ioe);\n+            Assertions.fail(\"Unexpected IOException\", ioe);\n@@ -581,1 +566,1 @@\n-        Assert.assertNotNull(o, \"success generation failed\");\n+        Assertions.assertNotNull(o, \"success generation failed\");\n@@ -586,1 +571,1 @@\n-        Assert.assertNotNull(o, \"fail generation failed\");\n+        Assertions.assertNotNull(o, \"fail generation failed\");\n@@ -619,1 +604,1 @@\n-                Assert.fail(\"no such class available: \" + pattern);\n+                Assertions.fail(\"no such class available: \" + pattern);\n@@ -624,1 +609,1 @@\n-                Assert.fail(\"newInstance: \" + ex1);\n+                Assertions.fail(\"newInstance: \" + ex1);\n@@ -664,1 +649,1 @@\n-        Assert.fail(\"Object could not be generated for pattern: \"\n+        Assertions.fail(\"Object could not be generated for pattern: \"\n@@ -680,1 +665,1 @@\n-        Assert.assertNotEquals(ndx, -1, \"missing value in limit\");\n+        Assertions.assertNotEquals(-1, ndx, \"missing value in limit\");\n@@ -706,1 +691,1 @@\n-        Assert.fail(\"Object could not be generated for pattern: \"\n+        Assertions.fail(\"Object could not be generated for pattern: \"\n@@ -739,1 +724,1 @@\n-                Assert.fail(\"exception generating stream\", ie);\n+                Assertions.fail(\"exception generating stream\", ie);\n","filename":"test\/jdk\/java\/io\/Serializable\/serialFilter\/SerialFilterTest.java","additions":69,"deletions":84,"binary":false,"changes":153,"status":"modified"}]}