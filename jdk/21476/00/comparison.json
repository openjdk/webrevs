{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,0 +31,1 @@\n+\n@@ -33,7 +34,0 @@\n-import java.util.concurrent.CountDownLatch;\n-import javax.swing.BorderFactory;\n-import javax.swing.JPanel;\n-import javax.swing.JTextArea;\n-import javax.swing.SwingUtilities;\n-import javax.swing.JButton;\n-import javax.swing.JFrame;\n@@ -42,1 +36,2 @@\n-import java.util.concurrent.TimeUnit;\n+\n+import javax.swing.BorderFactory;\n@@ -44,0 +39,2 @@\n+import javax.swing.JButton;\n+import javax.swing.JComponent;\n@@ -45,0 +42,1 @@\n+import javax.swing.JPanel;\n@@ -47,61 +45,44 @@\n-\n-    public static void main(String args[]) throws Exception {\n-        final CountDownLatch latch = new CountDownLatch(1);\n-        TestUI test = new TestUI(latch);\n-\n-        SwingUtilities.invokeLater(new Runnable() {\n-            @Override\n-            public void run() {\n-                try {\n-                    test.createUI();\n-                } catch (Exception ex) {\n-                    throw new RuntimeException(\"Exception while creating test UI\");\n-                }\n-            }\n-        });\n-\n-        boolean status = latch.await(5, TimeUnit.MINUTES);\n-\n-        if (!status) {\n-            System.out.println(\"Test timed out.\");\n-        }\n-\n-        SwingUtilities.invokeAndWait(new Runnable() {\n-            @Override\n-            public void run() {\n-                try {\n-                    test.disposeUI();\n-                } catch (Exception ex) {\n-                    throw new RuntimeException(\"Exception while disposing test UI\");\n-                }\n-            }\n-        });\n-\n-        if (test.testResult == false) {\n-            throw new RuntimeException(\"Test Failed.\");\n-        }\n-    }\n-}\n-\n-class TestUI {\n-\n-    private static JFrame mainFrame;\n-    private static JPanel mainControlPanel;\n-\n-    private static JTextArea instructionTextArea;\n-\n-    private static JPanel resultButtonPanel;\n-    private static JButton passButton;\n-    private static JButton failButton;\n-\n-    private static JPanel testPanel;\n-    private static JButton testButton;\n-    private static JLabel buttonPressCountLabel;\n-\n-    private static GridBagLayout layout;\n-    private final CountDownLatch latch;\n-    public boolean testResult = false;\n-    private int buttonPressCount = 0;\n-\n-    public TestUI(CountDownLatch latch) throws Exception {\n-        this.latch = latch;\n+    private static final String instructions = \"\"\"\n+            <html><body>\n+            <ol>\n+            <li>\n+                <strong>Test 1:<\/strong>\n+                <ol style=\"margin-top: 0px\">\n+                    <li>Click <b>Test Button<\/b> with left mouse button<\/li>\n+                    <li>Observe: Button Press count change to 1<\/li>\n+                <\/ol>\n+            <\/li>\n+            <li>\n+                <strong>Test 2:<\/strong>\n+                <ol style=\"margin-top: 0px\">\n+                    <li>Change the system time to one hour less than current time<\/li>\n+                    <li>Click <b>Test Button<\/b> with left mouse button<\/li>\n+                    <li>Observe: Button Press count change to 2<\/li>\n+                <\/ol>\n+            <\/li>\n+            <li>\n+                <strong>Test 3:<\/strong>\n+                <ol style=\"margin-top: 0px\">\n+                    <li>Change the system time by adding two hours<\/li>\n+                    <li>Click <b>Test Button<\/b> with left mouse button<\/li>\n+                    <li>Observe: Button Press count changes to 3<\/li>\n+                <\/ol>\n+            <\/li>\n+\n+            <li style=\"margin-top: 8px; padding-top: 8px; border-top: 1px solid\">\n+            Restore the system time.<\/li>\n+            <li style=\"margin-top: 8px; padding-top: 8px; border-top: 1px solid\">\n+            Press <b>Pass<\/b> if Button Press count is 3,\n+            and <b>Fail<\/b> otherwise.<\/li>\n+            <\/ol>\n+            <\/body><\/html>\n+            \"\"\";\n+\n+    public static void main(String[] args) throws Exception {\n+        PassFailJFrame.builder()\n+                      .instructions(instructions)\n+                      .rows(20)\n+                      .columns(40)\n+                      .splitUI(TimeChangeButtonClickTest::createTestPanel)\n+                      .build()\n+                      .awaitAndCheck();\n@@ -110,39 +91,3 @@\n-    public final void createUI() throws Exception {\n-\n-        mainFrame = new JFrame(\"TimeChangeButtonClickTest\");\n-\n-        layout = new GridBagLayout();\n-        mainControlPanel = new JPanel(layout);\n-        resultButtonPanel = new JPanel(layout);\n-        testPanel = new JPanel(layout);\n-\n-        GridBagConstraints gbc = new GridBagConstraints();\n-\n-        \/\/ Create Test instructions\n-        String instructions\n-                = \"Test 1 : --------------------\\n\"\n-                + \"1. Click 'Test Button' with left mouse button\\n\"\n-                + \"Observe : Button Press count change to 1\\n\"\n-                + \"Test 2 : --------------------\\n\"\n-                + \"1. Change the system time to one hour less than current time\\n\"\n-                + \"2. Click 'Test Button' with left mouse button\\n\"\n-                + \"Observe : Button Press count change to 2\\n\"\n-                + \"Test 3 : --------------------\\n\"\n-                + \"1. Change the system time by adding two hours\\n\"\n-                + \"2. Click 'Test Button' with left mouse button\\n\"\n-                + \"Observe : Button Press count change to 3\\n\"\n-                + \"--------------------\\n\"\n-                + \"Restore the system time.\\n\"\n-                + \"--------------------\\n\"\n-                + \"Press 'Pass' if Button Press count is 3, 'Fail' otherwise\";\n-\n-        instructionTextArea = new JTextArea();\n-        instructionTextArea.setText(instructions);\n-        instructionTextArea.setEditable(false);\n-        instructionTextArea.setBorder(BorderFactory.\n-                createTitledBorder(\"Test Instructions\"));\n-\n-        gbc.gridx = 0;\n-        gbc.gridy = 0;\n-        gbc.fill = GridBagConstraints.HORIZONTAL;\n-        mainControlPanel.add(instructionTextArea, gbc);\n+    private static JComponent createTestPanel() {\n+        final JLabel buttonPressCountLabel = new JLabel(\n+                \"Button Press Count: 0\");\n@@ -150,2 +95,1 @@\n-        \/\/ Create Test Button and label\n-        testButton = new JButton(\"Test Button\");\n+        JButton testButton = new JButton(\"Test Button\");\n@@ -153,0 +97,2 @@\n+            private int buttonPressCount;\n+\n@@ -157,38 +103,1 @@\n-                        \"Button Press Count : \" + buttonPressCount);\n-            }\n-        });\n-\n-        gbc.gridx = 0;\n-        gbc.gridy = 0;\n-        testPanel.add(testButton, gbc);\n-\n-        gbc.gridx = 0;\n-        gbc.gridy = 1;\n-        testPanel.add(Box.createVerticalStrut(50));\n-\n-        gbc.gridx = 0;\n-        gbc.gridy = 2;\n-        buttonPressCountLabel = new JLabel(\n-                \"Button Press Count : \" + buttonPressCount);\n-        testPanel.add(buttonPressCountLabel, gbc);\n-\n-        mainControlPanel.add(testPanel);\n-\n-        \/\/ Create resultButtonPanel with Pass, Fail buttons\n-        passButton = new JButton(\"Pass\");\n-        passButton.setActionCommand(\"Pass\");\n-        passButton.addActionListener((ActionEvent e) -> {\n-            System.out.println(\"Pass Button pressed!\");\n-            testResult = true;\n-            latch.countDown();\n-\n-        });\n-\n-        failButton = new JButton(\"Fail\");\n-        failButton.setActionCommand(\"Fail\");\n-        failButton.addActionListener(new ActionListener() {\n-            @Override\n-            public void actionPerformed(ActionEvent e) {\n-                System.out.println(\"Fail Button pressed!\");\n-                testResult = false;\n-                latch.countDown();\n+                        \"Button Press Count: \" + buttonPressCount);\n@@ -198,0 +107,2 @@\n+        JPanel buttonPanel = new JPanel(new GridBagLayout());\n+        GridBagConstraints gbc = new GridBagConstraints();\n@@ -200,6 +111,2 @@\n-        resultButtonPanel.add(passButton, gbc);\n-        gbc.gridx = 1;\n-        gbc.gridy = 0;\n-        resultButtonPanel.add(failButton, gbc);\n-\n-        gbc.gridx = 0;\n+        gbc.fill = GridBagConstraints.HORIZONTAL;\n+        buttonPanel.add(testButton, gbc);\n@@ -207,1 +114,2 @@\n-        mainControlPanel.add(resultButtonPanel, gbc);\n+        gbc.ipady = 16;\n+        buttonPanel.add(buttonPressCountLabel, gbc);\n@@ -209,1 +117,2 @@\n-        mainFrame.add(mainControlPanel);\n+        Box testPanel = Box.createVerticalBox();\n+        testPanel.setBorder(BorderFactory.createEmptyBorder(8, 8, 8, 8));\n@@ -211,3 +120,3 @@\n-        mainFrame.pack();\n-        mainFrame.setVisible(true);\n-    }\n+        testPanel.add(Box.createVerticalGlue());\n+        testPanel.add(buttonPanel);\n+        testPanel.add(Box.createVerticalGlue());\n@@ -215,3 +124,1 @@\n-    public void disposeUI() {\n-        mainFrame.setVisible(false);\n-        mainFrame.dispose();\n+        return testPanel;\n@@ -220,1 +127,0 @@\n-\n","filename":"test\/jdk\/javax\/swing\/JButton\/TimeChangeButtonClickTest.java","additions":70,"deletions":164,"binary":false,"changes":234,"status":"modified"}]}