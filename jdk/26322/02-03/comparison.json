{"files":[{"patch":"@@ -327,1 +327,0 @@\n-        copyResource(DocPaths.TOC_JS, DocPaths.SCRIPT_FILES.resolve(DocPaths.TOC_JS), true);\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/HtmlDoclet.java","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -375,1 +375,0 @@\n-        addScriptElement(head, DocPaths.TOC_JS);\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/markup\/Head.java","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -25,0 +25,8 @@\n+const sortLexicalLabel = \"Sort lexicographically\";\n+const sortSourceLabel  = \"Sort by source order\";\n+const TOC_ALPHA  = \"alpha\";\n+const TOC_SOURCE = \"source\";\n+var origOlOrder = new Map();\n+var origContainerOrder = new Map();\n+var snapshotted = false;\n+\n@@ -400,0 +408,3 @@\n+\n+    snapshotAllOnce();\n+\n@@ -631,0 +642,154 @@\n+\n+    function allTocNavs() {\n+        return Array.from(document.querySelectorAll(\"nav.toc\"));\n+    }\n+\n+    function nestedTocLists(scope) {\n+        return Array.from(scope.querySelectorAll(\"ol.toc-list > li > ol\"));\n+    }\n+\n+    function textForLi(li) {\n+        var a = li.querySelector(\":scope > a\");\n+        return (a ? a.textContent : li.textContent).trim();\n+    }\n+\n+    function alphaCompare(a, b) {\n+        return textForLi(a).localeCompare(textForLi(b), undefined, {\n+            numeric: true,\n+            sensitivity: \"base\"\n+        });\n+    }\n+\n+    function snapshotTocOnce(nav){\n+        nestedTocLists(nav).forEach(function(ol){\n+            if (!origOlOrder.has(ol)) origOlOrder.set(ol, Array.from(ol.children));\n+        });\n+    }\n+    function restoreToc(nav){\n+        nestedTocLists(nav).forEach(function(ol){\n+            var orig = origOlOrder.get(ol);\n+            if (orig) orig.forEach(function(li){ ol.appendChild(li); });\n+        });\n+    }\n+    function sortTocAlpha(nav){\n+        nestedTocLists(nav).forEach(function(ol){\n+            var lis = Array.from(ol.children);\n+            if (lis.length < 2) return;\n+            lis.slice().sort(alphaCompare).forEach(function(li){ ol.appendChild(li); });\n+        });\n+    }\n+\n+    function snapshotAllOnce() {\n+        if (snapshotted) return;\n+        allTocNavs().forEach(snapshotTocOnce);\n+        document.querySelectorAll(\"main ul.member-list, main div.member-details, main section.member-details\")\n+            .forEach(function(container) {\n+                if (!origContainerOrder.has(container))\n+                    origContainerOrder.set(container, Array.from(container.children));\n+            });\n+        snapshotted = true;\n+    }\n+\n+    function restoreAllMemberContainers(){\n+        origContainerOrder.forEach(function(kids, container){\n+            kids.forEach(function(ch){ container.appendChild(ch); });\n+        });\n+    }\n+\n+    function reorderMemberDetailsAlpha() {\n+        var sidebarNav = document.querySelector(\".main-grid nav.toc\");\n+        var mainRoot = document.querySelector(\".main-grid main\");\n+        if (!sidebarNav || !mainRoot) return;\n+\n+        var containers = Array.from(\n+            mainRoot.querySelectorAll(\"section[id$='-detail'], section[id$='-details'], section.member-details, div.member-details, ul.member-list\")\n+        );\n+\n+        containers.forEach(function(container) {\n+            var scope = container.matches(\"ul.member-list, .member-details\") ?\n+                            container :\n+                            (container.querySelector(\"ul.member-list, .member-details\") || container);\n+            if (!scope) return;\n+\n+            var links = Array.from(sidebarNav.querySelectorAll(\"a[href^='#']\")).filter(function(a) {\n+                var id = a.getAttribute(\"href\").slice(1);\n+                if (!id) return false;\n+                var target = document.getElementById(decodeURI(id));\n+                return target && scope.contains(target);\n+            });\n+            if (links.length < 2) return;\n+\n+            var items = links.map(function(a) {\n+                var id = a.getAttribute(\"href\").slice(1);\n+                var target = document.getElementById(decodeURI(id));\n+                if (!target) return null;\n+                var block = target.closest(\"section.detail, div.detail\") || target;\n+                var li = block.closest(\"li\") || block;\n+                var host = li.parentElement;\n+                if (!host) return null;\n+                return {\n+                    host: host,\n+                    node: li,\n+                    text: (a.textContent || \"\").trim()\n+                };\n+            }).filter(Boolean);\n+\n+            if (items.length < 2) return;\n+            var host = items[0].host;\n+            if (!items.every(function(it) {\n+                    return it.host === host;\n+                })) return;\n+\n+            if (!origContainerOrder.has(host)) origContainerOrder.set(host, Array.from(host.children));\n+\n+            items.slice()\n+                .sort(function(x, y) {\n+                    return x.text.localeCompare(y.text, undefined, {\n+                        numeric: true,\n+                        sensitivity: \"base\"\n+                    });\n+                })\n+                .forEach(function(it) {\n+                    host.appendChild(it.node);\n+                });\n+        });\n+    }\n+\n+    function updateToggleButtons(order){\n+        var next = (order === TOC_ALPHA) ? sortSourceLabel : sortLexicalLabel;\n+        document.querySelectorAll(\".toc-sort-toggle\").forEach(function(btn){\n+            btn.setAttribute(\"aria-label\", next);\n+            btn.setAttribute(\"title\", next);\n+            btn.setAttribute(\"aria-pressed\", order === TOC_ALPHA ? \"true\" : \"false\");\n+            var img = btn.querySelector(\"img\");\n+            if (img) img.alt = next;\n+        });\n+    }\n+\n+    var tocOrder = TOC_SOURCE;\n+    updateToggleButtons(tocOrder);\n+\n+    function applyAlpha(){\n+        snapshotAllOnce();\n+        reorderMemberDetailsAlpha();\n+        allTocNavs().forEach(sortTocAlpha);\n+        initSectionData(); prevHash = null; handleScroll();\n+        updateToggleButtons(TOC_ALPHA);\n+        tocOrder = TOC_ALPHA;\n+    }\n+    function applySource(){\n+        snapshotAllOnce();\n+        restoreAllMemberContainers();\n+        allTocNavs().forEach(restoreToc);\n+        initSectionData(); prevHash = null; handleScroll();\n+        updateToggleButtons(TOC_SOURCE);\n+        tocOrder = TOC_SOURCE;\n+    }\n+\n+    document.addEventListener(\"click\", function(ev){\n+        var btn = ev.target && ev.target.closest && ev.target.closest(\".toc-sort-toggle\");\n+        if (!btn) return;\n+        if (tocOrder === TOC_SOURCE) applyAlpha(); else applySource();\n+        try { btn.blur(); } catch(_) {}\n+    });\n+\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/script.js.template","additions":165,"deletions":0,"binary":false,"changes":165,"status":"modified"},{"patch":"@@ -1960,16 +1960,0 @@\n-\/*\n- * Hide navigation links and search box in print layout\n- *\/\n-@media print {\n-    ul.nav-list, div.sub-nav, .main-grid nav.toc, button.copy {\n-        display:none;\n-    }\n-}\n-\n-nav.toc div.toc-header .toc-sort-toggle {\n-    display: flex;\n-    flex-wrap: nowrap;\n-    align-items: center;\n-    gap: 0.5em;\n-    overflow-x: auto;\n-}\n@@ -1978,1 +1962,1 @@\n-    flex: 1 1 0;\n+    flex: 1 1 auto;\n@@ -1980,4 +1964,0 @@\n-    height: 2em;\n-    width: auto;\n-    font-size: 1em;\n-    background-size: 18px;\n@@ -1986,1 +1966,1 @@\n-nav.toc div.toc-header button#toc-lexical-order-toggle {\n+nav.toc div.toc-header .toc-sort-toggle {\n@@ -1991,1 +1971,1 @@\n-    padding: 0.5em;\n+    padding: .5em;\n@@ -1997,1 +1977,3 @@\n-.main-grid nav.toc button > img {\n+nav.toc div.toc-header .toc-sort-toggle > img {\n+    width: 22px;\n+    height: 22px;\n@@ -1999,2 +1981,10 @@\n-    width: 20px;\n-    height: 20px;\n+}\n+\n+\n+\/*\n+ * Hide navigation links and search box in print layout\n+ *\/\n+@media print {\n+    ul.nav-list, div.sub-nav, .main-grid nav.toc, button.copy {\n+        display:none;\n+    }\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/stylesheet.css","additions":16,"deletions":26,"binary":false,"changes":42,"status":"modified"},{"patch":"@@ -1,70 +0,0 @@\n-\/*\n- * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * Licensed under the Universal Permissive License v 1.0 as shown at https:\/\/oss.oracle.com\/licenses\/upl\/\n- *\/\n-\n-const LABEL_ALPHA  = \"Sort lexicographically\";\n-const LABEL_SOURCE = \"Sort by source order\";\n-\n-document.addEventListener(\"DOMContentLoaded\", () => {\n-  const sidebarNav = document.querySelector(\".main-grid nav.toc\")\n-                   || Array.from(document.querySelectorAll(\"nav.toc\"))\n-                           .find(n => !n.closest(\"#navbar-top\"));\n-  if (!sidebarNav) return;\n-\n-  const btn = sidebarNav.querySelector(\"#toc-lexical-order-toggle\");\n-  const toc = sidebarNav.querySelector(\"ol.toc-list\");\n-  if (!btn || !toc) return;\n-  const img = btn.querySelector(\"img\");\n-\n-  const sections = Array.from(toc.children);\n-\n-  const nestedMap = new Map();\n-  sections.forEach(section => {\n-    const subList = section.querySelector(\":scope > ol.toc-list\");\n-    if (subList) {\n-      nestedMap.set(subList, Array.from(subList.children));\n-    }\n-  });\n-\n-  function reorder(mode) {\n-    toc.textContent = \"\";\n-    sections.forEach(li => toc.appendChild(li));\n-\n-    nestedMap.forEach((originalChildren, subList) => {\n-      subList.textContent = \"\";\n-      if (mode === \"alpha\") {\n-        originalChildren\n-          .slice()\n-          .sort((a, b) =>\n-            a.textContent.trim()\n-             .localeCompare(b.textContent.trim(), undefined, {\n-               numeric: true,\n-               sensitivity: \"base\"\n-             })\n-          )\n-          .forEach(child => subList.appendChild(child));\n-      } else {\n-        originalChildren.forEach(child => subList.appendChild(child));\n-      }\n-    });\n-\n-    const nextLabel = (mode === \"alpha\") ? LABEL_SOURCE : LABEL_ALPHA;\n-    btn.setAttribute(\"aria-label\", nextLabel);\n-    if (img) img.alt = nextLabel;\n-    localStorage.setItem(\"toc-order-mode\", mode);\n-  }\n-\n-  reorder(localStorage.getItem(\"toc-order-mode\") || \"source\");\n-\n-  btn.addEventListener(\"click\", () => {\n-    const newMode = (btn.getAttribute(\"aria-label\") === LABEL_ALPHA)\n-                  ? \"alpha\"\n-                  : \"source\";\n-    reorder(newMode);\n-  });\n-\n-  btn.blur();\n-});\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/toc.js","additions":0,"deletions":70,"binary":false,"changes":70,"status":"deleted"},{"patch":"@@ -10,3 +10,6 @@\n-<svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" viewBox=\"0 0 100 100\">\n-    <polygon points=\"50,12.5 75,37.5 25,37.5\"\/>\n-    <polygon points=\"25,62.5 75,62.5 50,87.5\"\/>\n+<svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" viewBox=\"0 0 32 32\">\n+<line fill=\"none\" stroke=\"#000000\" stroke-width=\"2\" stroke-miterlimit=\"10\" x1=\"23\" y1=\"26.1\" x2=\"23\" y2=\"5\"\/>\n+    <polyline fill=\"none\" stroke=\"#000000\" stroke-width=\"2\" stroke-miterlimit=\"10\" points=\"18.7,21.8 23,26.1 27.3,21.8 \"\/>\n+    <polyline fill=\"none\" stroke=\"#000000\" stroke-width=\"2\" stroke-miterlimit=\"10\" points=\"12,15 12,14 9.1,6 8.9,6 6,14 6,15 \"\/>\n+    <line fill=\"none\" stroke=\"#000000\" stroke-width=\"2\" stroke-miterlimit=\"10\" x1=\"6\" y1=\"12\" x2=\"12\" y2=\"12\"\/>\n+    <polyline fill=\"none\" stroke=\"#000000\" stroke-width=\"2\" stroke-miterlimit=\"10\" points=\"5,18 12,18 12,19 6,25 6,26 13,26 \"\/>\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/toggle.svg","additions":6,"deletions":3,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -106,3 +106,0 @@\n-    \/** The name of the table of contents toggle javascript file. *\/\n-    public static final DocPath TOC_JS = DocPath.create(\"toc.js\");\n-\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/util\/DocPaths.java","additions":0,"deletions":3,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -66,2 +66,1 @@\n-                \"script-files\/search-page.js\",\n-                \"script-files\/toc.js\"\n+                \"script-files\/search-page.js\"\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testPassthruFiles\/TestPassThruFiles.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -249,1 +249,0 @@\n-            \"script-files\/toc.js\",\n","filename":"test\/langtools\/jdk\/javadoc\/tool\/api\/basic\/APITest.java","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"}]}