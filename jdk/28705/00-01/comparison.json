{"files":[{"patch":"@@ -42,1 +42,1 @@\n-import static sun.nio.ch.NioSocketImpl.MAX_ADAPTOR_BUFFER_SIZE;\n+import static sun.nio.ch.Streams.MAX_BUFFER_SIZE;\n@@ -84,3 +84,0 @@\n-        if (bb.remaining() > MAX_ADAPTOR_BUFFER_SIZE) {\n-            bb = bb.slice(bb.position(), MAX_ADAPTOR_BUFFER_SIZE);\n-        }\n@@ -116,0 +113,1 @@\n+        len = Math.min(len, MAX_BUFFER_SIZE);\n","filename":"src\/java.base\/share\/classes\/sun\/nio\/ch\/ChannelInputStream.java","additions":2,"deletions":4,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -35,1 +35,1 @@\n-import static sun.nio.ch.NioSocketImpl.MAX_ADAPTOR_BUFFER_SIZE;\n+import static sun.nio.ch.Streams.MAX_BUFFER_SIZE;\n@@ -69,3 +69,5 @@\n-            ByteBuffer writeBuf = bb.remaining() <= MAX_ADAPTOR_BUFFER_SIZE\n-                ? bb : bb.slice(bb.position(), MAX_ADAPTOR_BUFFER_SIZE);\n-            int n = ch.write(writeBuf);\n+            int limit = bb.limit();\n+            if (bb.remaining() > MAX_BUFFER_SIZE) {\n+                bb.limit(bb.position() + MAX_BUFFER_SIZE);\n+            }\n+            int n = ch.write(bb);\n@@ -74,0 +76,1 @@\n+            bb.limit(limit);\n","filename":"src\/java.base\/share\/classes\/sun\/nio\/ch\/ChannelOutputStream.java","additions":7,"deletions":4,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -83,1 +83,1 @@\n-    static final int MAX_ADAPTOR_BUFFER_SIZE = 128 * 1024;\n+    private static final int MAX_BUFFER_SIZE = 128 * 1024;\n@@ -358,2 +358,2 @@\n-                \/\/ read up to MAX_ADAPTOR_BUFFER_SIZE bytes\n-                int size = Math.min(len, MAX_ADAPTOR_BUFFER_SIZE);\n+                \/\/ read up to MAX_BUFFER_SIZE bytes\n+                int size = Math.min(len, MAX_BUFFER_SIZE);\n@@ -456,2 +456,2 @@\n-                    \/\/ write up to MAX_ADAPTOR_BUFFER_SIZE bytes\n-                    int size = Math.min((end - pos), MAX_ADAPTOR_BUFFER_SIZE);\n+                    \/\/ write up to MAX_BUFFER_SIZE bytes\n+                    int size = Math.min((end - pos), MAX_BUFFER_SIZE);\n","filename":"src\/java.base\/share\/classes\/sun\/nio\/ch\/NioSocketImpl.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -61,1 +61,1 @@\n-import static sun.nio.ch.NioSocketImpl.MAX_ADAPTOR_BUFFER_SIZE;\n+import static sun.nio.ch.Streams.MAX_BUFFER_SIZE;\n@@ -1377,1 +1377,1 @@\n-        len = Math.min(len, MAX_ADAPTOR_BUFFER_SIZE);\n+        len = Math.min(len, MAX_BUFFER_SIZE);\n@@ -1474,1 +1474,1 @@\n-                    int size = Math.min(end - pos, MAX_ADAPTOR_BUFFER_SIZE);\n+                    int size = Math.min(end - pos, MAX_BUFFER_SIZE);\n","filename":"src\/java.base\/share\/classes\/sun\/nio\/ch\/SocketChannelImpl.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2021, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -36,0 +36,4 @@\n+    \/\/ The maximum number of bytes to read\/write per syscall to avoid needing\n+    \/\/ a huge buffer from the temporary buffer cache\n+    static final int MAX_BUFFER_SIZE = 128 * 1024;\n+\n","filename":"src\/java.base\/share\/classes\/sun\/nio\/ch\/Streams.java","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"}]}