{"files":[{"patch":"@@ -88,0 +88,4 @@\n+  AC_ARG_WITH(giflib-include, [AS_HELP_STRING([--with-giflib-include],\n+      [specify directory for the system giflib include files])])\n+  AC_ARG_WITH(giflib-lib, [AS_HELP_STRING([--with-giflib-lib],\n+      [specify directory for the system giflib library])])\n@@ -100,0 +104,2 @@\n+    GIFLIB_CFLAGS=\"\"\n+    GIFLIB_LIBS=\"\"\n@@ -101,4 +107,31 @@\n-    AC_CHECK_HEADER(gif_lib.h, [],\n-        [ AC_MSG_ERROR([--with-giflib=system specified, but gif_lib.h not found!])])\n-    AC_CHECK_LIB(gif, DGifGetCode, [],\n-        [ AC_MSG_ERROR([--with-giflib=system specified, but no giflib found!])])\n+    GIFLIB_H_FOUND=no\n+    if test \"x${with_giflib_include}\" != x; then\n+      GIFLIB_CFLAGS=\"-I${with_giflib_include}\"\n+      GIFLIB_H_FOUND=yes\n+    fi\n+    if test \"x$GIFLIB_H_FOUND\" = xno; then\n+      AC_CHECK_HEADER(gif_lib.h,\n+          [\n+            GIFLIB_CFLAGS=\"\"\n+            GIFLIB_H_FOUND=yes\n+          ])\n+    fi\n+    if test \"x$GIFLIB_H_FOUND\" = xno; then\n+      AC_MSG_ERROR([--with-giflib=system specified, but gif_lib.h not found!])\n+    fi\n+\n+    GIFLIB_LIB_FOUND=no\n+    if test \"x${with_giflib_lib}\" != x; then\n+      GIFLIB_LIBS=\"-L${with_giflib_lib} -lgif\"\n+      GIFLIB_LIB_FOUND=yes\n+    fi\n+    if test \"x$GIFLIB_LIB_FOUND\" = xno; then\n+      AC_CHECK_LIB(gif, DGifGetCode,\n+          [\n+            GIFLIB_LIBS=\"-lgif\"\n+            GIFLIB_LIB_FOUND=yes\n+          ])\n+    fi\n+    if test \"x$GIFLIB_LIB_FOUND\" = xno; then\n+      AC_MSG_ERROR([--with-giflib=system specified, but no giflib found!])\n+    fi\n@@ -113,0 +146,1 @@\n+  AC_SUBST(GIFLIB_CFLAGS)\n","filename":"make\/autoconf\/lib-bundled.m4","additions":38,"deletions":4,"binary":false,"changes":42,"status":"modified"},{"patch":"@@ -805,0 +805,1 @@\n+GIFLIB_CFLAGS := @GIFLIB_CFLAGS@\n","filename":"make\/autoconf\/spec.gmk.template","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"}]}