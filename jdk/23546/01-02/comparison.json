{"files":[{"patch":"@@ -97,1 +97,1 @@\n-  if (!CDSConfig::is_dumping_method_handles()) {\n+  if (!CDSConfig::is_initing_classes_at_dump_time()) {\n@@ -110,1 +110,1 @@\n-  \/\/ When CDSConfig::is_dumping_method_handles() is enabled,\n+  \/\/ When CDSConfig::is_initing_classes_at_dump_time is enabled,\n","filename":"src\/hotspot\/share\/cds\/aotClassInitializer.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -648,0 +648,4 @@\n+bool CDSConfig::is_initing_classes_at_dump_time() {\n+  return is_dumping_heap() && is_dumping_aot_linked_classes();\n+}\n+\n@@ -660,1 +664,1 @@\n-  return is_dumping_aot_linked_classes() && is_dumping_heap();\n+  return is_initing_classes_at_dump_time();\n","filename":"src\/hotspot\/share\/cds\/cdsConfig.cpp","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -125,0 +125,1 @@\n+  static bool is_initing_classes_at_dump_time()              NOT_CDS_JAVA_HEAP_RETURN_(false);\n","filename":"src\/hotspot\/share\/cds\/cdsConfig.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -1483,1 +1483,1 @@\n-  if (CDSConfig::is_dumping_method_handles()) {\n+  if (CDSConfig::is_initing_classes_at_dump_time()) {\n@@ -1489,1 +1489,1 @@\n-    \/\/ Without CDSConfig::is_dumping_method_handles(), we only allow archived objects to\n+    \/\/ Without CDSConfig::is_initing_classes_at_dump_time(), we only allow archived objects to\n@@ -1552,1 +1552,1 @@\n-  if (CDSConfig::is_dumping_method_handles()) {\n+  if (CDSConfig::is_initing_classes_at_dump_time()) {\n@@ -1692,1 +1692,1 @@\n-  if (CDSConfig::is_dumping_method_handles()) {\n+  if (CDSConfig::is_initing_classes_at_dump_time()) {\n","filename":"src\/hotspot\/share\/cds\/heapShared.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -954,0 +954,1 @@\n+    }\n@@ -955,0 +956,1 @@\n+    if (CDSConfig::is_initing_classes_at_dump_time()) {\n@@ -960,0 +962,1 @@\n+      JavaValue result(T_VOID);\n","filename":"src\/hotspot\/share\/cds\/metaspaceShared.cpp","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"}]}