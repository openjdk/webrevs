{"files":[{"patch":"@@ -2488,1 +2488,0 @@\n-                usedInDeclaration.addAll(types2Classes(te.getInterfaces()));\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/util\/Utils.java","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n- *           8331947 8281533\n+ *           8331947 8281533 8343239\n@@ -179,0 +179,30 @@\n+    \/\/ 8343239 pre-existing permanent API that is later retrofitted\n+    \/\/ to extend a @PreviewFeature interface should not be flagged as a preview feature\n+    @Test\n+    public void nonPreviewExtendsPreview() {\n+        javadoc(\"-d\", \"out-non-preview-extends-preview\",\n+                \"--add-exports\", \"java.base\/jdk.internal.javac=api2\",\n+                \"--source-path\", Paths.get(testSrc, \"api2\").toAbsolutePath().toString(),\n+                \"--show-packages=all\",\n+                \"api2\/nonpreviewextendspreview\");\n+        checkExit(Exit.OK);\n+        checkOutput(\"api2\/nonpreviewextendspreview\/NonPreviewExtendsPreview.html\", false,\n+                \"\"\"\n+                 <code>NonPreviewExtendsPreview<\/code> relies on preview features of the Java platform:\n+                \"\"\",\n+                \"\"\"\n+                <code>NonPreviewExtendsPreview<\/code> refers to one or more preview APIs:\n+                \"\"\");\n+        checkOutput(\"api2\/nonpreviewextendspreview\/CoreInterface.html\", true,\n+                \"\"\"\n+                <div class=\"horizontal-scroll\">\n+                <div class=\"type-signature\"><span class=\"modifiers\">public interface <\/span><span class=\"element-name type-name-label\">CoreInterface<\/span><\/div>\n+                <div class=\"preview-block\" id=\"preview-nonpreviewextendspreview.CoreInterface\"><span class=\"preview-label\"><code>CoreInterface<\/code> is a preview API of the Java platform.<\/span>\n+                <div class=\"preview-comment\">Programs can only use <code>CoreInterface<\/code> when preview features are enabled.<\/div>\n+                <div class=\"preview-comment\">Preview features may be removed in a future release, or upgraded to permanent features of the Java platform.<\/div>\n+                <\/div>\n+                <div class=\"block\">Preview feature<\/div>\n+                <\/div>\n+                \"\"\");\n+    }\n+\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testPreview\/TestPreview.java","additions":31,"deletions":1,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -0,0 +1,32 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package nonpreviewextendspreview;\n+\n+import jdk.internal.javac.PreviewFeature;\n+\n+\/**\n+ * Preview feature\n+ *\/\n+@PreviewFeature(feature= PreviewFeature.Feature.TEST)\n+public interface CoreInterface {\n+}\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testPreview\/api2\/nonpreviewextendspreview\/CoreInterface.java","additions":32,"deletions":0,"binary":false,"changes":32,"status":"added"},{"patch":"@@ -0,0 +1,32 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package nonpreviewextendspreview;\n+\n+\/**\n+ * Non preview feature\n+ *\/\n+public interface NonPreviewExtendsPreview extends CoreInterface {\n+    default int getNumber() {\n+        return 0;\n+    }\n+}\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testPreview\/api2\/nonpreviewextendspreview\/NonPreviewExtendsPreview.java","additions":32,"deletions":0,"binary":false,"changes":32,"status":"added"},{"patch":"@@ -24,4 +24,4 @@\n-module com.foo {\n-    requires jdk.httpserver;\n-    requires net.foo;\n-}\n+\/**\n+ * Non preview package.\n+ *\/\n+package api2.nonpreviewextendspreview;\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testPreview\/api2\/nonpreviewextendspreview\/package-info.java","additions":4,"deletions":4,"binary":false,"changes":8,"previous_filename":"test\/jdk\/tools\/jlink\/plugins\/SystemModuleDescriptors\/src\/com.foo\/module-info.java","status":"copied"}]}