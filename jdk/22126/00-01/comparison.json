{"files":[{"patch":"@@ -2518,1 +2518,2 @@\n-        } else if (forWhat.getKind().isClass() || forWhat.getKind().isInterface()) {\n+        } else if ((forWhat.getKind().isClass() || forWhat.getKind().isInterface())\n+                && !utils.nonPreviewExtendsPreview(forWhat)) {\n@@ -2534,14 +2535,3 @@\n-                Content note1;\n-                if (utils.isNonPreviewExtendingPreview(forWhat)) {\n-                    HtmlTree referredPreviewAPIs = HtmlTree.CODE();\n-                    utils.getReferredPreviewFeatures(forWhat)\n-                            .forEach(feature ->\n-                                    referredPreviewAPIs.add(\n-                                            HtmlTree.CODE(Text.of(feature.getSimpleName()))));\n-                    note1 = contents.getContent(\"doclet.NonPreviewAsPreview\",\n-                            nameCode,\n-                            referredPreviewAPIs);\n-                } else {\n-                    note1 = contents.getContent(\"doclet.PreviewTrailingNote1\",\n-                            nameCode);\n-                }\n+                Content note1 =\n+                        contents.getContent(\"doclet.PreviewTrailingNote1\",\n+                                            nameCode);\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/HtmlDocletWriter.java","additions":5,"deletions":15,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -442,1 +442,0 @@\n-doclet.NonPreviewAsPreview=Programs can only use {0} as {1} when preview features are enabled.\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/standard.properties","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2713,14 +2713,1 @@\n-    \/\/ copied and trimmed down version of HtmlDocletWriter.getPreviewNotes\n-    public Set<TypeElement> getReferredPreviewFeatures(Element el) {\n-        PreviewSummary previewAPITypes = declaredUsingPreviewAPIs(el);\n-        Set<TypeElement> previewAPI = new HashSet<>(previewAPITypes.previewAPI);\n-        for (Element enclosed : el.getEnclosedElements()) {\n-            if (!enclosed.getKind().isClass() && !enclosed.getKind().isInterface()) {\n-                PreviewSummary memberAPITypes = declaredUsingPreviewAPIs(enclosed);\n-                previewAPI.addAll(memberAPITypes.previewAPI);\n-            }\n-        }\n-        return previewAPI;\n-    }\n-\n-    public boolean isNonPreviewExtendingPreview(Element el) {\n+    public boolean nonPreviewExtendsPreview(Element el) {\n@@ -2761,1 +2748,1 @@\n-                    && !isNonPreviewExtendingPreview(el);\n+                    && !nonPreviewExtendsPreview(el);\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/util\/Utils.java","additions":2,"deletions":15,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -189,16 +189,0 @@\n-\n-        checkOutput(\"api2\/nonpreviewextendspreview\/NonPreviewExtendsPreview.html\", true,\n-                \"\"\"\n-                <div class=\"horizontal-scroll\">\n-                <div class=\"type-signature\"><span class=\"modifiers\">public interface <\/span><span class=\"element-name type-name-label\">NonPreviewExtendsPreview<\/span><span class=\"extends-implements\">\n-                extends <a href=\"CoreInterface.html\" title=\"interface in nonpreviewextendspreview\">CoreInterface<\/a><sup><a href=\"CoreInterface.html#preview-nonpreviewextendspreview.CoreInterface\">PREVIEW<\/a><\/sup><\/span><\/div>\n-                <div class=\"preview-block\" id=\"preview-nonpreviewextendspreview.NonPreviewExtendsPreview\"><span class=\"preview-label\"><code>NonPreviewExtendsPreview<\/code> relies on preview features of the Java platform:<\/span>\n-                <ul class=\"preview-comment\">\n-                <li><code>NonPreviewExtendsPreview<\/code> refers to one or more preview APIs:  <a href=\"CoreInterface.html\" title=\"interface in nonpreviewextendspreview\"><code>CoreInterface<\/code><\/a>.<\/li>\n-                <\/ul>\n-                <div class=\"preview-comment\">Programs can only use <code>NonPreviewExtendsPreview<\/code> as <code><code>CoreInterface<\/code><\/code> when preview features are enabled.<\/div>\n-                <div class=\"preview-comment\">Preview features may be removed in a future release, or upgraded to permanent features of the Java platform.<\/div>\n-                <\/div>\n-                <div class=\"block\">Non preview feature<\/div>\n-                <\/div>\n-                \"\"\");\n@@ -207,1 +191,4 @@\n-                <div class=\"preview-comment\">Programs can only use <code>NonPreviewExtendsPreview<\/code> when preview features are enabled.<\/div>\n+                 <code>NonPreviewExtendsPreview<\/code> relies on preview features of the Java platform:\n+                \"\"\",\n+                \"\"\"\n+                <code>NonPreviewExtendsPreview<\/code> refers to one or more preview APIs:\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testPreview\/TestPreview.java","additions":4,"deletions":17,"binary":false,"changes":21,"status":"modified"}]}