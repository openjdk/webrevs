{"files":[{"patch":"@@ -45,0 +45,17 @@\n+\/\/ We maintain an invariant in java world that default dynamic rounding mode is RNE,\n+\/\/ please check JDK-8330094, JDK-8330266 for more details.\n+\/\/ Currently, sleef source on riscv does not change rounding mode to others except\n+\/\/ of RNE. But we still think it's safer to make sure that after calling into sleef\n+\/\/ the dynamic rounding mode is always RNE.\n+\n+#ifdef ASSERT\n+#define CHECK_FRM   __asm__ __volatile__ (     \\\n+    \"    frrm   t0              \\n\\t\"          \\\n+    \"    beqz   t0, 2f          \\n\\t\"          \\\n+    \"    csrrw  x0, cycle, x0   \\n\\t\"          \\\n+    \"2:                         \\n\\t\"          \\\n+    : : : \"memory\" );\n+#else\n+#define CHECK_FRM\n+#endif\n+\n@@ -48,1 +65,3 @@\n-  return Sleef_##op##rvvm1(input);             \\\n+  type res = Sleef_##op##rvvm1(input);         \\\n+  CHECK_FRM                                    \\\n+  return res;                                  \\\n@@ -54,1 +73,3 @@\n-  return Sleef_##op##rvvm1(input1, input2);     \\\n+  type res = Sleef_##op##rvvm1(input1, input2); \\\n+  CHECK_FRM                                     \\\n+  return res;                                   \\\n","filename":"src\/jdk.incubator.vector\/linux\/native\/libsleef\/lib\/vector_math_rvv.c","additions":23,"deletions":2,"binary":false,"changes":25,"status":"modified"}]}