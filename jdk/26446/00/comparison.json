{"files":[{"patch":"@@ -69,0 +69,1 @@\n+import com.sun.tools.javac.util.Log;\n@@ -142,0 +143,1 @@\n+import javax.tools.DiagnosticListener;\n@@ -657,1 +659,4 @@\n-            Scanner scanner = ScannerFactory.instance(new Context()).newScanner(wrappedCode, false);\n+            Context ctx = new Context();\n+            ctx.put(DiagnosticListener.class, (DiagnosticListener) d -> {});\n+            Scanner scanner = ScannerFactory.instance(ctx).newScanner(wrappedCode, false);\n+            Log.instance(ctx).useSource(cut.getSourceFile());\n","filename":"src\/jdk.jshell\/share\/classes\/jdk\/jshell\/SourceCodeAnalysisImpl.java","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n- * @bug 8274148 8301580\n+ * @bug 8274148 8301580 8359497\n@@ -117,0 +117,6 @@\n+    public void testNoCrashOnLexicalErrors() { \/\/JDK-8359497\n+        assertHighlights(\"\"\"\n+                         \"\n+                         \"\"\");\n+    }\n+\n","filename":"test\/langtools\/jdk\/jshell\/SnippetHighlightTest.java","additions":7,"deletions":1,"binary":false,"changes":8,"status":"modified"}]}