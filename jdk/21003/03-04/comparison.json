{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,1 +37,0 @@\n-import java.nio.charset.StandardCharsets;\n@@ -39,1 +38,0 @@\n-import java.util.Arrays;\n@@ -50,5 +48,0 @@\n-    \/\/ Helps SparseOutputStream detect write of the last CEN entry\n-    private static final String LAST_CEN_COMMENT = \"LastCEN\";\n-    private static final byte[] LAST_CEN_COMMENT_BYTES =\n-            LAST_CEN_COMMENT.getBytes(StandardCharsets.UTF_8);\n-\n@@ -74,2 +67,1 @@\n-    static final int MAX_EXTRA_FIELD_SIZE =\n-            65_535 - ZipFile.CENHDR - NAME_LENGTH - LAST_CEN_COMMENT.length();\n+    static final int MAX_EXTRA_FIELD_SIZE = 65_535 - ZipFile.CENHDR - NAME_LENGTH;\n@@ -99,0 +91,4 @@\n+    private static final byte[] EXTRA_BYTES = makeLargeExtraField();\n+    \/\/ Helps SparseOutputStream detect write of the last CEN entry\n+    private static final byte[] LAST_EXTRA_BYTES = makeLargeExtraField();\n+\n@@ -130,4 +126,0 @@\n-                if (i == NUM_ENTRIES -1) {\n-                    \/\/ Help SparseOutputStream detect the last CEN entry write\n-                    entry.setComment(LAST_CEN_COMMENT);\n-                }\n@@ -136,2 +128,0 @@\n-\n-\n@@ -143,1 +133,0 @@\n-            byte[] extra = makeLargeExtraField();\n@@ -145,1 +134,1 @@\n-                entry.setExtra(extra);\n+                entry.setExtra(EXTRA_BYTES);\n@@ -147,0 +136,2 @@\n+            \/\/ Help SparseOutputSream detect the last entry\n+            entries[entries.length-1].setExtra(LAST_EXTRA_BYTES);\n@@ -170,1 +161,1 @@\n-    private byte[] makeLargeExtraField() {\n+    private static byte[] makeLargeExtraField() {\n@@ -208,1 +199,1 @@\n-                if (Arrays.equals(LAST_CEN_COMMENT_BYTES, 0, LAST_CEN_COMMENT_BYTES.length, b, off, len)) {\n+                if (b == LAST_EXTRA_BYTES) {\n","filename":"test\/jdk\/java\/util\/zip\/ZipFile\/CenSizeTooLarge.java","additions":11,"deletions":20,"binary":false,"changes":31,"status":"modified"}]}