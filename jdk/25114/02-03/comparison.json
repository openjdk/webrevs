{"files":[{"patch":"@@ -400,1 +400,0 @@\n-  _sample_threshold = get_sampling_interval();\n@@ -424,1 +423,1 @@\n-    log_debug(gc, tlab)(\"Should sample: %s _sample_threshold: %zu total: %zu tlab: %zu unsampled: %zu outside_tlab: %zu\",\n+    log_debug(gc, tlab)(\"Should sample: %s _sample_threshold: %zu total: %zu tlab: %zu current tlab: %zu outside_tlab: %zu\",\n@@ -429,1 +428,1 @@\n-                        unsampled_in_current_tlab(tlab_top),\n+                        current_tlab_bytes_since_last_sample(tlab_top),\n","filename":"src\/hotspot\/share\/runtime\/threadHeapSampler.cpp","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -59,1 +59,1 @@\n-  size_t unsampled_in_current_tlab(HeapWord* tlab_top)  const {\n+  size_t current_tlab_bytes_since_last_sample(HeapWord* tlab_top)  const {\n@@ -71,1 +71,1 @@\n-    return _accumulated_tlab_bytes_since_sample + unsampled_in_current_tlab(tlab_top);\n+    return _accumulated_tlab_bytes_since_sample + current_tlab_bytes_since_last_sample(tlab_top);\n@@ -80,0 +80,1 @@\n+      _sample_threshold(0),\n@@ -98,2 +99,2 @@\n-    const size_t unsampled = bytes_since_last_sample(tlab_top);\n-    return _sample_threshold - MIN2(unsampled, _sample_threshold);\n+    const size_t since_last_sample = bytes_since_last_sample(tlab_top);\n+    return _sample_threshold - MIN2(since_last_sample, _sample_threshold);\n@@ -117,1 +118,1 @@\n-    _accumulated_tlab_bytes_since_sample += unsampled_in_current_tlab(tlab_top);\n+    _accumulated_tlab_bytes_since_sample += current_tlab_bytes_since_last_sample(tlab_top);\n","filename":"src\/hotspot\/share\/runtime\/threadHeapSampler.hpp","additions":7,"deletions":6,"binary":false,"changes":13,"status":"modified"}]}