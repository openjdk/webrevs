{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1999, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1999, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -1656,0 +1656,7 @@\n+\n+            \/\/ Verify we are not trying to access a proxy field from a static method\n+            Symbol proxy = proxies.get(v);\n+            if (proxy != null && proxy.owner == currentClass && currentMethodSym.isStatic())\n+                log.error(pos, Errors.NonStaticCantBeRef(Kinds.kindName(v), v));\n+\n+            \/\/ Access symbol\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/comp\/Lower.java","additions":8,"deletions":1,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -2861,1 +2861,1 @@\n-# 0: symbol kind, 1: symbol\n+# 0: kind name, 1: symbol\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/resources\/compiler.properties","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -0,0 +1,20 @@\n+\/*\n+ * @test \/nodynamiccopyright\/\n+ * @bug 8322882\n+ * @summary Disallow attempts to access a free variable proxy field from a static method\n+ * @compile\/fail\/ref=LocalFreeVarStaticInstantiate.out -XDrawDiagnostics LocalFreeVarStaticInstantiate.java\n+ *\/\n+\n+class LocalFreeVarStaticInstantiate {\n+\n+    static void foo(Object there) {\n+        class Local {\n+            {\n+                there.hashCode();\n+            }\n+            static {\n+                new Local();    \/\/ can't get there from here\n+            }\n+        }\n+    }\n+}\n","filename":"test\/langtools\/tools\/javac\/LocalFreeVarStaticInstantiate.java","additions":20,"deletions":0,"binary":false,"changes":20,"status":"added"},{"patch":"@@ -0,0 +1,2 @@\n+LocalFreeVarStaticInstantiate.java:16:17: compiler.err.non-static.cant.be.ref: kindname.variable, there\n+1 error\n","filename":"test\/langtools\/tools\/javac\/LocalFreeVarStaticInstantiate.out","additions":2,"deletions":0,"binary":false,"changes":2,"status":"added"}]}