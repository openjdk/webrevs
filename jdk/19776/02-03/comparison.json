{"files":[{"patch":"@@ -403,1 +403,1 @@\n-      \/\/ Allow for \"<cmd> -help\" or \"<cmd> --help\" to enable\n+      \/\/ Allow for \"<cmd> -h\" or \"<cmd> --help\" to enable\n@@ -406,6 +406,3 @@\n-      const char *args = line.args_addr();\n-      if (strncmp(args, \" -help\", 6) == 0 || strncmp(args, \" --help\", 7) == 0) {\n-        stringStream updated_line;\n-        reorder_help_cmd(line, updated_line);\n-        CmdLine updated_cmd(updated_line.base(),\n-                            updated_line.size(), false);\n+      stringStream updated_line;\n+      if (reorder_help_cmd(line, updated_line)) {\n+        CmdLine updated_cmd(updated_line.base(), updated_line.size(), false);\n@@ -414,0 +411,1 @@\n+\n@@ -425,4 +423,16 @@\n-void DCmd::reorder_help_cmd(CmdLine line, stringStream& updated_line) {\n-  updated_line.print(\"%s\", \"help \");\n-  updated_line.write(line.cmd_addr(), line.cmd_len());\n-  updated_line.write(\"\\0\", 1);\n+bool DCmd::reorder_help_cmd(CmdLine line, stringStream &updated_line) {\n+  stringStream args;\n+  args.print(\"%s\", line.args_addr());\n+  char *rest = args.as_string();\n+  char *token = strtok_r(rest, \" \", &rest);\n+  while (token != NULL) {\n+    if (strncmp(token, \"-h\", 2) == 0 || strncmp(token, \"--help\", 6) == 0) {\n+      updated_line.print(\"%s\", \"help \");\n+      updated_line.write(line.cmd_addr(), line.cmd_len());\n+      updated_line.write(\"\\0\", 1);\n+      return true;\n+    }\n+    token = strtok_r(rest, \" \", &rest);\n+  }\n+\n+  return false;\n","filename":"src\/hotspot\/share\/services\/diagnosticFramework.cpp","additions":21,"deletions":11,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -315,2 +315,2 @@\n-  \/\/ Helper method to substitute \"<cmd> help\" for \"help <cmd>\".\n-  static void reorder_help_cmd(CmdLine line, stringStream& updated_line);\n+  \/\/ Helper method to substitute \"<cmd> -h\" for \"help <cmd>\" if applicable.\n+  static bool reorder_help_cmd(CmdLine line, stringStream& updated_line);\n","filename":"src\/hotspot\/share\/services\/diagnosticFramework.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -41,1 +41,1 @@\n-    private static final String HELP_ONE_DASH = \"-help\";\n+    private static final String HELP_ONE_DASH = \"-h\";\n","filename":"test\/jdk\/sun\/tools\/jcmd\/TestJcmdSubcommandHelp.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}