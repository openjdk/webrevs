{"files":[{"patch":"@@ -342,2 +342,2 @@\n-\/\/ but which have an Agent_OnLoad, to be treated like -agentpath (JVMTI agents)\n-void AgentList::promote_xrun_to_jvmti() {\n+\/\/ but which have an Agent_OnLoad, to be treated like -agentpath\n+void AgentList::convert_xrun_agents() {\n@@ -352,1 +352,6 @@\n-      vm_exit_during_initialization(\"Could not find JVM_OnLoad or Agent_OnLoad function in the library\", agent->name());\n+      on_load_entry = lookup_Agent_OnLoad_entry_point(agent);\n+      if (on_load_entry != nullptr) {\n+        agent->_is_xrun = false; \/\/ promoted\n+      } else {\n+        vm_exit_during_initialization(\"Could not find JVM_OnLoad or Agent_OnLoad function in the library\", agent->name());\n+      }\n@@ -354,1 +359,0 @@\n-    agent->_is_xrun = false; \/\/ promoted\n@@ -358,1 +362,1 @@\n-\/\/ Invokes Agent_OnLoad for -agentlib:.. -agentpath:  and converted \/ promoted -Xrun agents.\n+\/\/ Invokes Agent_OnLoad for -agentlib:.. -agentpath:  and converted -Xrun agents.\n@@ -364,2 +368,2 @@\n-  \/\/ Promote -Xrun to -agentlib: if there is no JVM_OnLoad\n-  promote_xrun_to_jvmti();\n+  \/\/ Convert -Xrun to -agentlib: if there is no JVM_OnLoad\n+  convert_xrun_agents();\n","filename":"src\/hotspot\/share\/prims\/agentList.cpp","additions":11,"deletions":7,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -66,1 +66,1 @@\n-  static void promote_xrun_to_jvmti();\n+  static void convert_xrun_agents();\n","filename":"src\/hotspot\/share\/prims\/agentList.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}