{"files":[{"patch":"@@ -628,1 +628,6 @@\n-  return agent->is_instrument_lib() ? is_env_jplis_agent(env, agent) : true;\n+  if (agent->is_instrument_lib()) {\n+    return is_env_jplis_agent(env, agent);\n+  }\n+  \/\/ The agent maps to the correct os library.\n+  \/\/ But if this is another JvmtiEnv for the same agent, we can't time it twice.\n+  return !agent->is_timestamped();\n","filename":"src\/hotspot\/share\/prims\/agentList.cpp","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -726,2 +726,2 @@\n-  \/\/ OnLoad JVMTI agents are timestamped as part of posting the VMInit event above.\n-  \/\/ For -Xrun agents and JVMTI agents with no VMInit callback, we ensure they are also timestamped.\n+  \/\/ Agents are timestamped as part of posting the VMInit event above.\n+  \/\/ For -Xrun agents and agents with no VMInit callback, we explicitly ensure they are also timestamped.\n","filename":"src\/hotspot\/share\/prims\/jvmtiExport.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}