{"files":[{"patch":"@@ -35,1 +35,1 @@\n- * @modules java.base\/jdk.internal.access\n+ * @modules java.base\/java.lang.ref:open\n@@ -49,2 +49,0 @@\n-import jdk.internal.access.JavaLangRefAccess;\n-import jdk.internal.access.SharedSecrets;\n@@ -106,1 +104,1 @@\n-    private static void clearReferents() {\n+    private static void dropReferents() {\n@@ -122,6 +120,0 @@\n-    private static void checkQueue() {\n-        if (queue.poll() != null) {\n-            throw new RuntimeException(\"Reference enqueued\");\n-        }\n-    }\n-\n@@ -132,5 +124,1 @@\n-            JavaLangRefAccess jlra = SharedSecrets.getJavaLangRefAccess();\n-            while (jlra.waitForReferenceProcessing()) {\n-                checkQueue();\n-            }\n-            checkQueue();       \/\/ One last check after refproc complete.\n+            while (WB.waitForReferenceProcessing()) {}\n@@ -140,0 +128,4 @@\n+        if (queue.poll() != null) {\n+            throw new RuntimeException(\"Reference enqueued\");\n+        }\n+\n@@ -160,1 +152,1 @@\n-            clearReferents();\n+            dropReferents();\n@@ -175,1 +167,1 @@\n-        clearReferents();\n+        dropReferents();\n","filename":"test\/hotspot\/jtreg\/gc\/TestNativeReferenceGet.java","additions":9,"deletions":17,"binary":false,"changes":26,"status":"modified"}]}