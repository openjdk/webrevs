{"files":[{"patch":"@@ -424,5 +424,6 @@\n-        bool is_extended_memsz = aligned_map_memsz == ROUNDUP(lib_php->p_memsz + (lib_php->p_offset & (page_size - 1)), page_size);\n-        if (!is_extended_memsz &&\n-            existing_map->memsz != page_size &&\n-            existing_map->fd != lib_fd &&\n-            aligned_map_memsz != ROUNDUP(lib_php->p_memsz, page_size)) {\n+        \/\/ The lib offset may be aligned down, so lib_php->p_memsz > existing_map->memsz\n+        bool offset_aligned_down = aligned_map_memsz == ROUNDUP(lib_php->p_memsz + (lib_php->p_offset & (page_size - 1)), page_size);\n+        if ((existing_map->memsz != page_size) &&\n+            (existing_map->fd != lib_fd) &&\n+            (aligned_map_memsz != ROUNDUP(lib_php->p_memsz, page_size)) &&\n+            !offset_aligned_down) {\n@@ -441,2 +442,1 @@\n-        if (is_extended_memsz) {\n-          \/\/ The offset in the core dump is aligned down to page_size.\n+        if (offset_aligned_down) {\n","filename":"src\/jdk.hotspot.agent\/linux\/native\/libsaproc\/ps_core.c","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"}]}