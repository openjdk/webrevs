{"files":[{"patch":"@@ -423,0 +423,3 @@\n+        size_t aligned_map_memsz = ROUNDUP(existing_map->memsz, page_size);\n+        \/\/ The lib offset may be aligned down, so lib_php->p_memsz > existing_map->memsz\n+        bool offset_aligned_down = aligned_map_memsz == ROUNDUP(lib_php->p_memsz + (lib_php->p_offset & (page_size - 1)), page_size);\n@@ -425,1 +428,2 @@\n-            (ROUNDUP(existing_map->memsz, page_size) != ROUNDUP(lib_php->p_memsz, page_size))) {\n+            (aligned_map_memsz != ROUNDUP(lib_php->p_memsz, page_size)) &&\n+            !offset_aligned_down) {\n@@ -438,1 +442,5 @@\n-        existing_map->memsz = ROUNDUP(lib_php->p_memsz, page_size);\n+        if (offset_aligned_down) {\n+          \/\/ We should trust the core dump in this case.\n+        } else {\n+          existing_map->memsz = ROUNDUP(lib_php->p_memsz, page_size);\n+        }\n","filename":"src\/jdk.hotspot.agent\/linux\/native\/libsaproc\/ps_core.c","additions":10,"deletions":2,"binary":false,"changes":12,"status":"modified"}]}