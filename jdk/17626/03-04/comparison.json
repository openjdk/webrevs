{"files":[{"patch":"@@ -42,0 +42,1 @@\n+#include \"runtime\/globals.hpp\"\n@@ -56,0 +57,1 @@\n+#include \"utilities\/globalDefinitions.hpp\"\n@@ -345,1 +347,2 @@\n-        success = try_set_owner_from(nullptr, locking_thread) == nullptr;\n+        prev_owner = try_set_owner_from(nullptr, locking_thread);\n+        success = prev_owner == nullptr;\n@@ -347,0 +350,5 @@\n+    } else if (LockingMode == LM_LEGACY && locking_thread->is_lock_owned((address)prev_owner)) {\n+      assert(_recursions == 0, \"must be\");\n+      _recursions = 1;\n+      set_owner_from_BasicLock(prev_owner, locking_thread);\n+      success = true;\n@@ -348,0 +356,3 @@\n+    assert(success, \"Failed to enter_for: locking_thread=\" INTPTR_FORMAT\n+           \", this=\" INTPTR_FORMAT \"{owner=\" INTPTR_FORMAT \"}, observed owner: \" INTPTR_FORMAT,\n+           p2i(locking_thread), p2i(this), p2i(owner_raw()), p2i(prev_owner));\n","filename":"src\/hotspot\/share\/runtime\/objectMonitor.cpp","additions":12,"deletions":1,"binary":false,"changes":13,"status":"modified"}]}