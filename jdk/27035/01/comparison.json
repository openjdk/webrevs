{"files":[{"patch":"@@ -605,1 +605,0 @@\n-  OrderAccess::fence();      \/\/ guarantee at least release consistency.\n@@ -613,4 +612,3 @@\n-  \/\/ Conceptually we need a #loadstore|#storestore \"release\" MEMBAR before\n-  \/\/ the ST of 0 into the lock-word which releases the lock, so fence\n-  \/\/ more than covers this on all platforms.\n-  *adr = 0;\n+  \/\/ So we need a #loadstore|#storestore \"release\" memory barrier before\n+  \/\/ the ST of 0 into the lock-word which releases the lock.\n+  Atomic::release_store(adr, 0);\n","filename":"src\/hotspot\/share\/runtime\/thread.cpp","additions":3,"deletions":5,"binary":false,"changes":8,"status":"modified"}]}