{"files":[{"patch":"@@ -43,0 +43,1 @@\n+import java.util.Optional;\n@@ -95,1 +96,1 @@\n-    final JShellConsole console;\n+    final Optional<JShellConsole> console;\n@@ -120,1 +121,1 @@\n-        this.console = b.console;\n+        this.console = Optional.ofNullable(b.console);\n@@ -248,1 +249,1 @@\n-         * will return {@code null} while running a snippet.\n+         * will return {@code null} while running a snippet).\n@@ -818,1 +819,1 @@\n-        public JShellConsole console() {\n+        public Optional<JShellConsole> console() {\n","filename":"src\/jdk.jshell\/share\/classes\/jdk\/jshell\/JShell.java","additions":5,"deletions":4,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -51,0 +51,1 @@\n+import java.util.Optional;\n@@ -102,2 +103,2 @@\n-            JShellConsole console = env.console();\n-            String consoleModule = console != null ? \"jdk.jshell\" : \"java.base\";\n+            Optional<JShellConsole> console = env.console();\n+            String consoleModule = console.isPresent() ? \"jdk.jshell\" : \"java.base\";\n@@ -134,1 +135,1 @@\n-            if (console != null) {\n+            if (console.isPresent()) {\n@@ -139,1 +140,1 @@\n-                ConsoleOutputStream consoleOutput = new ConsoleOutputStream(console);\n+                ConsoleOutputStream consoleOutput = new ConsoleOutputStream(console.get());\n","filename":"src\/jdk.jshell\/share\/classes\/jdk\/jshell\/execution\/JdiDefaultExecutionControl.java","additions":5,"deletions":4,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -31,0 +31,1 @@\n+import java.util.Optional;\n@@ -87,1 +88,5 @@\n-     * @return returns console, or {@code null} if none\n+     * @implSpec The default implementation of this method\n+     *           return an empty {@code Optional}.\n+     *\n+     * @return returns console, or an empty {@code Optional} if none,\n+     *         never {@code null}\n@@ -90,2 +95,2 @@\n-    default JShellConsole console() {\n-        return null;\n+    default Optional<JShellConsole> console() {\n+        return Optional.empty();\n","filename":"src\/jdk.jshell\/share\/classes\/jdk\/jshell\/spi\/ExecutionEnv.java","additions":8,"deletions":3,"binary":false,"changes":11,"status":"modified"}]}