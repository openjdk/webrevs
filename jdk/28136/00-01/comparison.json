{"files":[{"patch":"@@ -3864,3 +3864,1 @@\n-    assert(vector_len == AVX_128bit ? VM_Version::supports_avx() :\n-            (vector_len == AVX_256bit ? VM_Version::supports_avx2() :\n-            (vector_len == AVX_512bit ? VM_Version::supports_evex() : false)), \"\");\n+  assert(vector_len == AVX_512bit ? VM_Version::supports_evex() : VM_Version::supports_avx(), \"\");\n@@ -3873,3 +3871,1 @@\n-  assert(vector_len == AVX_128bit ? VM_Version::supports_avx() :\n-          (vector_len == AVX_256bit ? VM_Version::supports_avx2() :\n-          (vector_len == AVX_512bit ? VM_Version::supports_evex() : false)), \"\");\n+  assert(vector_len == AVX_512bit ? VM_Version::supports_evex() : VM_Version::supports_avx(), \"\");\n@@ -3883,0 +3879,1 @@\n+  assert(vector_len == AVX_512bit || VM_Version::supports_avx512vl(), \"\");\n@@ -3895,0 +3892,1 @@\n+  assert(vector_len == AVX_512bit || VM_Version::supports_avx512vl(), \"\");\n","filename":"src\/hotspot\/cpu\/x86\/assembler_x86.cpp","additions":4,"deletions":6,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -81,4 +81,0 @@\n-\/\/ size 0 and 1 are used for initial and final shuffles respectivelly of\n-\/\/ dilithiumAlmostInverseNtt and dilithiumAlmostNtt.\n-\/\/ NOTE: For size 0 and 1, input1[] and input2[] are modified in-place\n-\/\/\n@@ -91,0 +87,5 @@\n+\/\/\n+\/\/ NOTE: size 0 and 1 are used for initial and final shuffles respectivelly of\n+\/\/ dilithiumAlmostInverseNtt and dilithiumAlmostNtt. For size 0 and 1, input1[]\n+\/\/ and input2[] are modified in-place (and output2 is used as a temporary)\n+\/\/\n@@ -134,1 +135,3 @@\n-        case 1:\n+        \/\/ Special cases\n+        case 1: \/\/ initial shuffle for dilithiumAlmostInverseNtt\n+          \/\/ shuffle all even 32bit columns to input1, and odd to input2\n@@ -136,1 +139,1 @@\n-            \/\/ 0b-1-2-3-1\n+            \/\/ 0b-3-1-3-1\n@@ -151,1 +154,2 @@\n-        case 0:\n+        case 0: \/\/ final unshuffle for dilithiumAlmostNtt\n+          \/\/ reverse case 1: all even are in input1 and odd in input2, put back\n@@ -212,0 +216,1 @@\n+          \/\/ shuffle all even 32bit columns to input1, and odd to input2\n@@ -223,0 +228,1 @@\n+          \/\/ reverse case 1: all even are in input1 and odd in input2, put back\n@@ -397,1 +403,1 @@\n-                            int vector_len, MacroAssembler *_masm) {\n+                                               int vector_len, MacroAssembler *_masm) {\n","filename":"src\/hotspot\/cpu\/x86\/stubGenerator_x86_64_dilithium.cpp","additions":14,"deletions":8,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -1274,1 +1274,0 @@\n-  \/\/ Currently we only have them for AVX512\n","filename":"src\/hotspot\/cpu\/x86\/vm_version_x86.cpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2024, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2025, Intel Corporation. All rights reserved.\n@@ -26,1 +26,0 @@\n-\n@@ -29,1 +28,0 @@\n-import java.lang.reflect.Field;\n@@ -31,1 +29,0 @@\n-import java.lang.reflect.Constructor;\n@@ -55,0 +52,4 @@\n+\n+\/\/ To run manually: java --add-opens java.base\/sun.security.provider=ALL-UNNAMED --add-exports java.base\/sun.security.provider=ALL-UNNAMED\n+\/\/  -XX:+UnlockDiagnosticVMOptions -XX:+UseDilithiumIntrinsics test\/jdk\/sun\/security\/provider\/acvp\/ML_DSA_Intrinsic_Test.java\n+\n@@ -110,0 +111,1 @@\n+        \/\/ Hint: if test fails, you can hardcode the seed to make the test more reproducible\n@@ -123,2 +125,2 @@\n-                \/\/ seed = rnd.nextLong();\n-                \/\/rnd.setSeed(seed);\n+                \/\/ Hint: if test fails, you can hardcode the seed to make the test more reproducible:\n+                \/\/ rnd.setSeed(seed);\n@@ -217,1 +219,0 @@\n-        int[] coeffs3 = new int[ML_DSA_N];\n@@ -219,1 +220,0 @@\n-            coeffs3[j] =\n@@ -517,1 +517,0 @@\n-\/\/ java --add-opens java.base\/sun.security.provider=ALL-UNNAMED  -XX:+UseDilithiumIntrinsics test\/jdk\/sun\/security\/provider\/acvp\/ML_DSA_Intrinsic_Test.java\n","filename":"test\/jdk\/sun\/security\/provider\/acvp\/ML_DSA_Intrinsic_Test.java","additions":8,"deletions":9,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2025, Intel Corporation. All rights reserved.\n","filename":"test\/micro\/org\/openjdk\/bench\/javax\/crypto\/full\/MLDSABench.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}