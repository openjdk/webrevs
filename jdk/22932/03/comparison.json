{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1996, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1996, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -2111,2 +2111,33 @@\n-                             jintArray smallIconRaster, jint smw, jint smh)\n-{\n+                             jintArray smallIconRaster, jint smw, jint smh) {\n+    HICON hNewIcon = NULL;\n+    HICON hNewIconSm = NULL;\n+\n+    try {\n+        hNewIcon = CreateIconFromRaster(env, iconRaster, w, h);\n+        if (env->ExceptionCheck()) {\n+            if (hNewIcon) {\n+                DestroyIcon(hNewIcon);\n+            }\n+            return;\n+        }\n+\n+        hNewIconSm = CreateIconFromRaster(env, smallIconRaster, smw, smh);\n+        if (env->ExceptionCheck()) {\n+            if (hNewIcon != NULL) {\n+                DestroyIcon(hNewIcon);\n+            }\n+            if (hNewIconSm != NULL) {\n+                DestroyIcon(hNewIconSm);\n+            }\n+            return;\n+        }\n+    } catch (...) {\n+        if (hNewIcon != NULL) {\n+            DestroyIcon(hNewIcon);\n+        }\n+        if (hNewIconSm != NULL) {\n+            DestroyIcon(hNewIconSm);\n+        }\n+        return;\n+    }\n+\n@@ -2115,1 +2146,0 @@\n-    \/\/Destroy previous icon if it isn't inherited\n@@ -2119,1 +2149,0 @@\n-    m_hIcon = NULL;\n@@ -2123,4 +2152,3 @@\n-    m_hIconSm = NULL;\n-    m_hIcon = CreateIconFromRaster(env, iconRaster, w, h);\n-    JNU_CHECK_EXCEPTION(env);\n-    m_hIconSm = CreateIconFromRaster(env, smallIconRaster, smw, smh);\n+\n+    m_hIcon = hNewIcon;\n+    m_hIconSm = hNewIconSm;\n@@ -2139,0 +2167,1 @@\n+\n@@ -2141,0 +2170,2 @@\n+\n+    \/\/ Destroy previous icons if they were not inherited\n","filename":"src\/java.desktop\/windows\/native\/libawt\/windows\/awt_Window.cpp","additions":40,"deletions":9,"binary":false,"changes":49,"status":"modified"}]}