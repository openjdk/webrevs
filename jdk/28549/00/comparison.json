{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -35,0 +35,3 @@\n+import java.io.IOException;\n+import java.io.ObjectOutputStream;\n+import java.io.Serial;\n@@ -376,0 +379,11 @@\n+    \/**\n+     * See readObject() and writeObject() in JComponent for more\n+     * information about serialization in Swing.\n+     *\/\n+    @Serial\n+    private void writeObject(ObjectOutputStream s) throws IOException {\n+        s.defaultWriteObject();\n+        setForeground(null);\n+        setBackground(null);\n+    }\n+\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/table\/DefaultTableCellRenderer.java","additions":15,"deletions":1,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -0,0 +1,87 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 4337898\n+ * @summary Verifies Serializing DefaultTableCellRenderer doesn't change colors\n+ * @library \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame\n+ * @run main\/manual DefRendererSerialize\n+ *\/\n+\n+import java.io.ByteArrayOutputStream;\n+import java.io.IOException;\n+import java.io.ObjectOutputStream;\n+\n+import javax.swing.JFrame;\n+import javax.swing.JTable;\n+import javax.swing.UIManager;\n+import javax.swing.table.DefaultTableCellRenderer;\n+\n+public class DefRendererSerialize {\n+\n+    static final String INSTRUCTIONS = \"\"\"\n+        A JTable is shown\n+        If the table text is black on white and not black on gray,\n+        then test passed, otherwise it failed.\"\"\";\n+\n+    public static void main(String[] args) throws Exception {\n+        UIManager.setLookAndFeel(\"javax.swing.plaf.metal.MetalLookAndFeel\");\n+        PassFailJFrame.builder()\n+                .title(\"DefRendererSerialize Instructions\")\n+                .instructions(INSTRUCTIONS)\n+                .columns(20)\n+                .testUI(DefRendererSerialize::createTestUI)\n+                .build()\n+                .awaitAndCheck();\n+    }\n+\n+    static JFrame createTestUI() {\n+      String[][] rowData = { {\"1-1\",\"1-2\",\"1-3\"},\n+                             {\"2-1\",\"2-2\",\"2-3\"},\n+                             {\"3-1\",\"3-2\",\"3-3\"} };\n+\n+      String[] columnData = {\"Column 1\", \"Column 2\", \"Column 3\"};\n+\n+      JTable table = new JTable(rowData, columnData);\n+\n+      table.setDefaultRenderer(table.getColumnClass(1),\n+                               new DefaultTableCellRenderer());\n+\n+      \/\/ If this try block is removed, table text remains black on white.\n+\n+      try {\n+         ObjectOutputStream ostream = new ObjectOutputStream(new ByteArrayOutputStream());\n+         ostream.writeObject(table.getDefaultRenderer(table.getColumnClass(1)));\n+      } catch (IOException ioex) {\n+         ioex.printStackTrace();\n+      }\n+\n+      JFrame frame = new JFrame(\"DefRendererSerialize\");\n+      frame.add(table);\n+\n+      frame.pack();\n+      return frame;\n+   }\n+}\n","filename":"test\/jdk\/javax\/swing\/DefaultTableCellRenderer\/DefRendererSerialize.java","additions":87,"deletions":0,"binary":false,"changes":87,"status":"added"}]}