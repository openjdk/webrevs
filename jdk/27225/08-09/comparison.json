{"files":[{"patch":"@@ -1679,5 +1679,6 @@\n-  while (true) {\n-    Node* unique_next = nullptr;\n-    for (DUIterator_Fast imax, l = last->fast_outs(imax); l < imax; l++) {\n-      Node* use = last->fast_out(l);\n-      if (use->is_Store() && use->in(MemNode::Memory) == last) {\n+  Node* unique_next = store;\n+  do {\n+    out = unique_next;\n+    for (DUIterator_Fast imax, l = out->fast_outs(imax); l < imax; l++) {\n+      Node* use = out->fast_out(l);\n+      if (use->is_Mem() && use->in(MemNode::Memory) == out) {\n@@ -1686,1 +1687,1 @@\n-          assert(unique_next == nullptr, \"memory node should only have one usage in the loop body\");\n+          assert(unique_next == out, \"memory node should only have one usage in the loop body\");\n@@ -1691,5 +1692,1 @@\n-    if (unique_next == nullptr) {\n-      break;\n-    }\n-    last = unique_next;\n-  }\n+  } while (out != unique_next);\n","filename":"src\/hotspot\/share\/opto\/loopTransform.cpp","additions":8,"deletions":11,"binary":false,"changes":19,"status":"modified"}]}