{"files":[{"patch":"@@ -1788,14 +1788,12 @@\n-  if (loop->tail()->in(0)->is_BaseCountedLoopEnd()) {\n-    \/\/ The moved store node is always attached right after the inner loop exit, and just before the safepoint\n-    const Node* if_false = loop->tail()->in(0)->as_BaseCountedLoopEnd()->proj_out(false);\n-    for (DUIterator j = if_false->outs(); if_false->has_out(j); j++) {\n-      Node* store = if_false->out(j)->isa_Store();\n-      \/\/ We only make changes if the memory input of the store is outside the outer loop body,\n-      \/\/ as this is when we would normally expect a Phi as input. If the memory input\n-      \/\/ is in the loop body as well, then we can safely assume it is still correct as the entire\n-      \/\/ body was cloned as a unit\n-      if (store && !outer_loop->is_member(get_loop(get_ctrl(store->in(MemNode::Memory))))) {\n-        Node* mem_out = find_mem_out_outer_strip_mined(store, outer_loop);\n-        Node* store_new = old_new[store->_idx];\n-        store_new->set_req(MemNode::Memory, mem_out);\n-      }\n+  \/\/ The moved store node is always attached right after the inner loop exit, and just before the safepoint\n+  const Node* if_false = main_end->proj_out(false);\n+  for (DUIterator j = if_false->outs(); if_false->has_out(j); j++) {\n+    Node* store = if_false->out(j)->isa_Store();\n+    \/\/ We only make changes if the memory input of the store is outside the outer loop body,\n+    \/\/ as this is when we would normally expect a Phi as input. If the memory input\n+    \/\/ is in the loop body as well, then we can safely assume it is still correct as the entire\n+    \/\/ body was cloned as a unit\n+    if (store && !outer_loop->is_member(get_loop(get_ctrl(store->in(MemNode::Memory))))) {\n+      Node* mem_out = find_mem_out_outer_strip_mined(store, outer_loop);\n+      Node* store_new = old_new[store->_idx];\n+      store_new->set_req(MemNode::Memory, mem_out);\n","filename":"src\/hotspot\/share\/opto\/loopTransform.cpp","additions":12,"deletions":14,"binary":false,"changes":26,"status":"modified"}]}