{"files":[{"patch":"@@ -59,1 +59,1 @@\n-    public interface RetryableTest<T extends Exception> {\n+    interface RetryableTest<T extends Exception> {\n@@ -63,0 +63,17 @@\n+    \/\/ retry the given lambda (RetryableTest) if an exception\n+    \/\/ that satisfies the predicate (retryOn) is caught.\n+    <T extends Exception> void testWithRetry(RetryableTest<T> test,\n+                                             Predicate<Throwable> retryOn,\n+                                             int max) throws T {\n+        for (int i=0; i < max; i++) {\n+            try {\n+                test.runTest();\n+                break;\n+            } catch (Throwable t) {\n+                if (i < max -1 && retryOn.test(t)) {\n+                    System.out.println(\"Got \" + t + \"; will retry\");\n+                } else throw t;\n+            }\n+        }\n+    }\n+\n@@ -67,1 +84,1 @@\n-    public class BindExceptionOnDisconnect extends BindException {\n+    class BindExceptionOnDisconnect extends BindException {\n@@ -82,1 +99,1 @@\n-        retry(() -> {\n+        testWithRetry(() -> {\n@@ -93,1 +110,1 @@\n-            retry(() -> {\n+            testWithRetry(() -> {\n@@ -105,1 +122,1 @@\n-            retry(() -> {\n+            testWithRetry(() -> {\n@@ -115,16 +132,0 @@\n-    \/\/ retry the given lambda (RetryableTest) if an exception\n-    \/\/ that satisfies the predicate (retryOn) is caught.\n-    <T extends Exception> void retry(RetryableTest<T> test,\n-                                     Predicate<Throwable> retryOn,\n-                                     int max) throws T {\n-        for (int i=0; i < max; i++) {\n-            try {\n-                test.runTest();\n-                break;\n-            } catch (Throwable t) {\n-                if (i < max -1 && retryOn.test(t)) {\n-                    System.out.println(\"Got \" + t + \"; will retry\");\n-                } else throw t;\n-            }\n-        }\n-    }\n","filename":"test\/jdk\/java\/nio\/channels\/DatagramChannel\/AfterDisconnect.java","additions":22,"deletions":21,"binary":false,"changes":43,"status":"modified"}]}