{"files":[{"patch":"@@ -32,2 +32,0 @@\n-import jtreg.SkippedException;\n-\n@@ -38,0 +36,1 @@\n+ * @requires os.family==\"windows\"\n@@ -39,1 +38,1 @@\n- * @build PassFailJFrame jtreg.SkippedException\n+ * @build PassFailJFrame\n@@ -44,1 +43,0 @@\n-\n@@ -52,1 +50,5 @@\n-    public static void main (String[] args) throws Exception {\n+    public static void main(String[] args) throws Exception {\n+\n+        if (PrinterJob.lookupPrintServices().length == 0) {\n+            throw new RuntimeException(\"Printer not configured or available.\");\n+        }\n@@ -70,2 +72,1 @@\n-    public void pageDialogExample() throws PrinterException\n-    {\n+    public void pageDialogExample() throws PrinterException {\n@@ -76,1 +77,1 @@\n-        if(originalPageFormat == pageFormat) return;\n+        if (originalPageFormat == pageFormat) return;\n@@ -78,1 +79,1 @@\n-        job.setPrintable(this,pageFormat);\n+        job.setPrintable(this, pageFormat);\n@@ -82,2 +83,1 @@\n-    public int print(Graphics g, PageFormat pageFormat, int pageIndex)\n-    {\n+    public int print(Graphics g, PageFormat pageFormat, int pageIndex) {\n@@ -86,1 +86,1 @@\n-        final Rectangle rect = new Rectangle(0,0,boxWidth,boxHeight);\n+        final Rectangle rect = new Rectangle(0, 0, boxWidth, boxHeight);\n@@ -92,1 +92,1 @@\n-        final Graphics2D g2d = (Graphics2D)g;\n+        final Graphics2D g2d = (Graphics2D) g;\n@@ -98,1 +98,1 @@\n-        g2d.drawRect(0,0,(int)pageW,(int)pageH);\n+        g2d.drawRect(0, 0, (int) pageW, (int) pageH);\n@@ -102,1 +102,1 @@\n-        final double scale = Math.min( (pageW\/boxWidth), (pageH\/boxHeight) );\n+        final double scale = Math.min((pageW \/ boxWidth), (pageH \/ boxHeight));\n@@ -104,1 +104,1 @@\n-        if(scale < 1.0) g2d.scale(scale, scale);\n+        if (scale < 1.0) g2d.scale(scale, scale);\n@@ -109,2 +109,1 @@\n-        g2d.dispose();\n-        return(PAGE_EXISTS);\n+        return (PAGE_EXISTS);\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PageDlgPrnButton.java","additions":17,"deletions":18,"binary":false,"changes":35,"status":"modified"},{"patch":"@@ -35,2 +35,0 @@\n-import jtreg.SkippedException;\n-\n@@ -43,1 +41,1 @@\n- * @build PassFailJFrame jtreg.SkippedException\n+ * @build PassFailJFrame\n@@ -47,1 +45,0 @@\n-\n@@ -62,2 +59,1 @@\n-            throw new SkippedException(\"Printer not configured or available.\"\n-                    + \" Test cannot continue.\");\n+            throw new RuntimeException(\"Printer not configured or available.\");\n@@ -90,0 +86,1 @@\n+                    PassFailJFrame.forceFail(\"Print Failed\");\n@@ -111,1 +108,0 @@\n-            g2d.dispose();\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintCompoundString.java","additions":3,"deletions":7,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -40,2 +40,0 @@\n-import jtreg.SkippedException;\n-\n@@ -48,1 +46,1 @@\n- * @build PassFailJFrame jtreg.SkippedException\n+ * @build PassFailJFrame\n@@ -52,3 +50,1 @@\n-\n-    private PrintImageCanvas printImageCanvas;\n-\n+    private final PrintImageCanvas printImageCanvas = new PrintImageCanvas();\n@@ -57,1 +53,0 @@\n-    private final MenuItem exitMenu = new MenuItem(\"Exit\");\n@@ -70,2 +65,1 @@\n-            throw new SkippedException(\"Printer not configured or available.\"\n-                    + \" Test cannot continue.\");\n+            throw new RuntimeException(\"Printer not configured or available.\");\n@@ -89,3 +83,0 @@\n-\n-        printImageCanvas = new PrintImageCanvas(this);\n-\n@@ -93,1 +84,0 @@\n-\n@@ -97,1 +87,0 @@\n-\n@@ -106,2 +95,0 @@\n-        me.add(\"-\");\n-        me.add(exitMenu);\n@@ -113,1 +100,0 @@\n-        exitMenu.addActionListener(this);\n@@ -122,2 +108,0 @@\n-        } else if (target.equals(exitMenu)) {\n-            dispose();\n@@ -128,1 +112,0 @@\n-\n@@ -138,0 +121,1 @@\n+                PassFailJFrame.forceFail(\" Print Failed\");\n@@ -145,1 +129,0 @@\n-\n@@ -155,0 +138,1 @@\n+                PassFailJFrame.forceFail(\"Print Failed\");\n@@ -164,3 +148,0 @@\n-    public PrintImageCanvas(PrintImage pds) {\n-    }\n-\n@@ -180,1 +161,0 @@\n-\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintImage.java","additions":5,"deletions":25,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -37,2 +37,0 @@\n-import jtreg.SkippedException;\n-\n@@ -45,1 +43,1 @@\n- * @build PassFailJFrame jtreg.SkippedException\n+ * @build PassFailJFrame\n@@ -49,1 +47,0 @@\n-\n@@ -66,2 +63,1 @@\n-            throw new SkippedException(\"Printer not configured or available.\"\n-                    + \" Test cannot continue.\");\n+            throw new RuntimeException(\"Printer not configured or available.\");\n@@ -94,0 +90,1 @@\n+                    PassFailJFrame.forceFail(\"Print Failed\");\n@@ -103,1 +100,0 @@\n-\n@@ -117,0 +113,1 @@\n+            paint(g2d);\n@@ -118,2 +115,0 @@\n-            paint(g);\n-            g2d.dispose();\n@@ -123,2 +118,1 @@\n-        public void paint(Graphics g1) {\n-            Graphics2D g = (Graphics2D) g1;\n+        public void paint(Graphics2D g2d) {\n@@ -128,2 +122,2 @@\n-                g.drawString(nullStr, 20, 40);\n-                g.drawString(\"FAILURE: No NPE for null String, int\", 20, 40);\n+                g2d.drawString(nullStr, 20, 40);\n+                g2d.drawString(\"FAILURE: No NPE for null String, int\", 20, 40);\n@@ -131,1 +125,1 @@\n-                g.drawString(\"caught expected NPE for null String, int\", 20, 40);\n+                g2d.drawString(\"caught expected NPE for null String, int\", 20, 40);\n@@ -134,2 +128,2 @@\n-            g.drawString(emptyStr, 20, 60);\n-            g.drawString(\"OK for empty String, int\", 20, 60);\n+            g2d.drawString(emptyStr, 20, 60);\n+            g2d.drawString(\"OK for empty String, int\", 20, 60);\n@@ -139,2 +133,2 @@\n-                g.drawString(nullStr, 20.0f, 80.0f);\n-                g.drawString(\"FAILURE: No NPE for null String, float\", 20, 80);\n+                g2d.drawString(nullStr, 20.0f, 80.0f);\n+                g2d.drawString(\"FAILURE: No NPE for null String, float\", 20, 80);\n@@ -142,1 +136,1 @@\n-                g.drawString(\"caught expected NPE for null String, float\", 20, 80);\n+                g2d.drawString(\"caught expected NPE for null String, float\", 20, 80);\n@@ -145,2 +139,2 @@\n-            g.drawString(emptyStr, 20.0f, 100.0f);\n-            g.drawString(\"OK for empty String, float\", 20.0f, 100.f);\n+            g2d.drawString(emptyStr, 20.0f, 100.0f);\n+            g2d.drawString(\"OK for empty String, float\", 20.0f, 100.f);\n@@ -150,2 +144,2 @@\n-                g.drawString(nullIterator, 20, 120);\n-                g.drawString(\"FAILURE: No NPE for null iterator, float\", 20, 120);\n+                g2d.drawString(nullIterator, 20, 120);\n+                g2d.drawString(\"FAILURE: No NPE for null iterator, float\", 20, 120);\n@@ -153,1 +147,1 @@\n-                g.drawString(\"caught expected NPE for null iterator, int\", 20, 120);\n+                g2d.drawString(\"caught expected NPE for null iterator, int\", 20, 120);\n@@ -157,2 +151,2 @@\n-                g.drawString(emptyIterator, 20, 140);\n-                g.drawString(\"FAILURE: No IAE for empty iterator, int\", 20, 140);\n+                g2d.drawString(emptyIterator, 20, 140);\n+                g2d.drawString(\"FAILURE: No IAE for empty iterator, int\", 20, 140);\n@@ -160,1 +154,1 @@\n-                g.drawString(\"caught expected IAE for empty iterator, int\", 20, 140);\n+                g2d.drawString(\"caught expected IAE for empty iterator, int\", 20, 140);\n@@ -165,2 +159,2 @@\n-                g.drawString(nullIterator, 20.0f, 160.0f);\n-                g.drawString(\"FAILURE: No NPE for null iterator, float\", 20, 160);\n+                g2d.drawString(nullIterator, 20.0f, 160.0f);\n+                g2d.drawString(\"FAILURE: No NPE for null iterator, float\", 20, 160);\n@@ -168,1 +162,1 @@\n-                g.drawString(\"caught expected NPE for null iterator, float\", 20, 160);\n+                g2d.drawString(\"caught expected NPE for null iterator, float\", 20, 160);\n@@ -172,2 +166,2 @@\n-                g.drawString(emptyIterator, 20, 180);\n-                g.drawString(\"FAILURE: No IAE for empty iterator, float\", 20, 180);\n+                g2d.drawString(emptyIterator, 20, 180);\n+                g2d.drawString(\"FAILURE: No IAE for empty iterator, float\", 20, 180);\n@@ -175,1 +169,1 @@\n-                g.drawString(\"caught expected IAE for empty iterator, float\", 20, 180);\n+                g2d.drawString(\"caught expected IAE for empty iterator, float\", 20, 180);\n@@ -177,1 +171,0 @@\n-            g.dispose();\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintNullString.java","additions":27,"deletions":34,"binary":false,"changes":61,"status":"modified"},{"patch":"@@ -35,2 +35,0 @@\n-import jtreg.SkippedException;\n-\n@@ -43,1 +41,1 @@\n- * @build PassFailJFrame jtreg.SkippedException\n+ * @build PassFailJFrame\n@@ -47,1 +45,0 @@\n-\n@@ -62,2 +59,1 @@\n-            throw new SkippedException(\"Printer not configured or available.\"\n-                    + \" Test cannot continue.\");\n+            throw new RuntimeException(\"Printer not configured or available.\");\n@@ -90,0 +86,1 @@\n+                    PassFailJFrame.forceFail(\"Print Failed\");\n@@ -111,1 +108,0 @@\n-            g2d.dispose();\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintParenString.java","additions":3,"deletions":7,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -38,2 +38,0 @@\n-import jtreg.SkippedException;\n-\n@@ -45,1 +43,1 @@\n- * @build PassFailJFrame jtreg.SkippedException\n+ * @build PassFailJFrame\n@@ -50,1 +48,0 @@\n-\n@@ -66,2 +63,1 @@\n-            throw new SkippedException(\"Printer not configured or available.\"\n-                    + \" Test cannot continue.\");\n+            throw new RuntimeException(\"Printer not configured or available.\");\n@@ -94,0 +90,1 @@\n+                    PassFailJFrame.forceFail(\"Print Failed\");\n@@ -113,2 +110,0 @@\n-\n-            g2d.dispose();\n@@ -119,1 +114,0 @@\n-\n@@ -130,1 +124,2 @@\n-            int posx = 20, posy = 40;\n+            int posx = 20;\n+            int posy = 40;\n@@ -140,2 +135,0 @@\n-\n-            g2d.dispose();\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintTranslatedFont.java","additions":5,"deletions":12,"binary":false,"changes":17,"status":"modified"}]}