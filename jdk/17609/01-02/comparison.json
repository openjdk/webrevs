{"files":[{"patch":"@@ -38,4 +38,2 @@\n- * @library \/java\/awt\/regtesthelpers\n- * @library \/test\/lib\n- * @build PassFailJFrame\n- * @build jtreg.SkippedException\n+ * @library \/test\/lib \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame jtreg.SkippedException\n@@ -111,0 +109,1 @@\n+        g2d.dispose();\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PageDlgPrnButton.java","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -30,2 +30,0 @@\n-import java.awt.event.ActionEvent;\n-import java.awt.event.ActionListener;\n@@ -44,4 +42,2 @@\n- * @library \/java\/awt\/regtesthelpers\n- * @library \/test\/lib\n- * @build PassFailJFrame\n- * @build jtreg.SkippedException\n+ * @library \/test\/lib \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame jtreg.SkippedException\n@@ -50,1 +46,1 @@\n-public class PrintCompoundString extends Frame implements ActionListener {\n+public class PrintCompoundString extends Frame {\n@@ -86,1 +82,0 @@\n-        printButton.addActionListener(this);\n@@ -88,0 +83,11 @@\n+        printButton.addActionListener(e -> {\n+            PrinterJob pj = PrinterJob.getPrinterJob();\n+            if (pj.printDialog()) {\n+                pj.setPrintable(c);\n+                try {\n+                    pj.print();\n+                } catch (PrinterException pe) {\n+                    pe.printStackTrace();\n+                }\n+            }\n+        });\n@@ -92,16 +98,0 @@\n-    public void actionPerformed(ActionEvent e) {\n-\n-        PrinterJob pj = PrinterJob.getPrinterJob();\n-\n-        if (pj != null && pj.printDialog()) {\n-\n-            pj.setPrintable(c);\n-            try {\n-                pj.print();\n-            } catch (PrinterException pe) {\n-            } finally {\n-                System.err.println(\"PRINT RETURNED\");\n-            }\n-        }\n-    }\n-\n@@ -118,1 +108,2 @@\n-            paint(g);\n+            String str = \"Test string compound printing \\u2203\\u2200\\u2211\";\n+            g2d.drawString(str, 20, 40);\n@@ -120,0 +111,1 @@\n+            g2d.dispose();\n@@ -123,7 +115,0 @@\n-        public void paint(Graphics g1) {\n-            Graphics2D g = (Graphics2D) g1;\n-\n-            String str = \"Test string compound printing \\u2203\\u2200\\u2211\";\n-            g.drawString(str, 20, 40);\n-        }\n-\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintCompoundString.java","additions":17,"deletions":32,"binary":false,"changes":49,"status":"modified"},{"patch":"@@ -47,4 +47,2 @@\n- * @library \/java\/awt\/regtesthelpers\n- * @library \/test\/lib\n- * @build PassFailJFrame\n- * @build jtreg.SkippedException\n+ * @library \/test\/lib \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame jtreg.SkippedException\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintImage.java","additions":2,"deletions":4,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -30,2 +30,0 @@\n-import java.awt.event.ActionEvent;\n-import java.awt.event.ActionListener;\n@@ -46,4 +44,2 @@\n- * @library \/java\/awt\/regtesthelpers\n- * @library \/test\/lib\n- * @build PassFailJFrame\n- * @build jtreg.SkippedException\n+ * @library \/test\/lib \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame jtreg.SkippedException\n@@ -52,1 +48,1 @@\n-public class PrintNullString extends Frame implements ActionListener {\n+public class PrintNullString extends Frame {\n@@ -90,1 +86,0 @@\n-        printButton.addActionListener(this);\n@@ -92,0 +87,11 @@\n+        printButton.addActionListener(e -> {\n+            PrinterJob pj = PrinterJob.getPrinterJob();\n+            if (pj.printDialog()) {\n+                pj.setPrintable(c);\n+                try {\n+                    pj.print();\n+                } catch (PrinterException pe) {\n+                    pe.printStackTrace();\n+                }\n+            }\n+        });\n@@ -96,16 +102,0 @@\n-    public void actionPerformed(ActionEvent e) {\n-\n-        PrinterJob pj = PrinterJob.getPrinterJob();\n-\n-        if (pj != null && pj.printDialog()) {\n-\n-            pj.setPrintable(c);\n-            try {\n-                pj.print();\n-            } catch (PrinterException pe) {\n-            } finally {\n-                System.out.println(\"PRINT RETURNED\");\n-            }\n-        }\n-    }\n-\n@@ -129,1 +119,1 @@\n-\n+            g2d.dispose();\n@@ -142,4 +132,1 @@\n-            }\/* catch (Exception e) {\n-          g.drawString(\"FAILURE: unexpected exception for null String, int\",\n-                        20, 40);\n-        }*\/\n+            }\n@@ -147,1 +134,0 @@\n-            \/\/try {\n@@ -150,4 +136,0 @@\n-        \/*} catch (Exception e) {\n-          g.drawString(\"FAILURE: unexpected exception for empty String, int\",\n-                        20, 60);\n-        }*\/\n@@ -161,5 +143,2 @@\n-            } \/*catch (Exception e) {\n-          g.drawString(\"FAILURE: unexpected exception for null String, float\",\n-                        20, 80);\n-        }*\/\n-            \/\/try {\n+            }\n+\n@@ -168,4 +147,0 @@\n-        \/* } catch (Exception e) {\n-          g.drawString(\"FAILURE: unexpected exception for empty String, float\",\n-                        20, 100);\n-        }*\/\n@@ -179,4 +154,2 @@\n-            } \/*catch (Exception e) {\n-          g.drawString(\"FAILURE: unexpected exception for null iterator, int\",\n-                       20, 120);\n-        } *\/\n+            }\n+\n@@ -185,2 +158,1 @@\n-                g.drawString(\"FAILURE: No IAE for empty iterator, int\",\n-                        20, 140);\n+                g.drawString(\"FAILURE: No IAE for empty iterator, int\", 20, 140);\n@@ -188,6 +160,2 @@\n-                g.drawString(\"caught expected IAE for empty iterator, int\",\n-                        20, 140);\n-            } \/*catch (Exception e) {\n-          g.drawString(\"FAILURE: unexpected exception for empty iterator, int\",\n-                       20, 140);\n-        } *\/\n+                g.drawString(\"caught expected IAE for empty iterator, int\", 20, 140);\n+            }\n@@ -201,4 +169,1 @@\n-            } \/*catch (Exception e) {\n-          g.drawString(\"FAILURE: unexpected exception for null iterator, float\",\n-                        20, 160);\n-        } *\/\n+            }\n@@ -208,2 +173,1 @@\n-                g.drawString(\"FAILURE: No IAE for empty iterator, float\",\n-                        20, 180);\n+                g.drawString(\"FAILURE: No IAE for empty iterator, float\", 20, 180);\n@@ -211,6 +175,3 @@\n-                g.drawString(\"caught expected IAE for empty iterator, float\",\n-                        20, 180);\n-            } \/*catch (Exception e) {\n-          g.drawString(\"FAILURE: unexpected exception for empty iterator, float\",\n-                       20, 180);\n-        } *\/\n+                g.drawString(\"caught expected IAE for empty iterator, float\", 20, 180);\n+            }\n+            g.dispose();\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintNullString.java","additions":28,"deletions":67,"binary":false,"changes":95,"status":"modified"},{"patch":"@@ -30,2 +30,0 @@\n-import java.awt.event.ActionEvent;\n-import java.awt.event.ActionListener;\n@@ -44,4 +42,2 @@\n- * @library \/java\/awt\/regtesthelpers\n- * @library \/test\/lib\n- * @build PassFailJFrame\n- * @build jtreg.SkippedException\n+ * @library \/test\/lib \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame jtreg.SkippedException\n@@ -50,1 +46,1 @@\n-public class PrintParenString extends Frame implements ActionListener {\n+public class PrintParenString extends Frame {\n@@ -86,1 +82,0 @@\n-        printButton.addActionListener(this);\n@@ -88,0 +83,11 @@\n+        printButton.addActionListener(e -> {\n+            PrinterJob pj = PrinterJob.getPrinterJob();\n+            if (pj.printDialog()) {\n+                pj.setPrintable(c);\n+                try {\n+                    pj.print();\n+                } catch (PrinterException pe) {\n+                    pe.printStackTrace();\n+                }\n+            }\n+        });\n@@ -92,18 +98,1 @@\n-    public void actionPerformed(ActionEvent e) {\n-\n-        PrinterJob pj = PrinterJob.getPrinterJob();\n-\n-        if (pj != null && pj.printDialog()) {\n-\n-            pj.setPrintable(c);\n-            try {\n-                pj.print();\n-            } catch (PrinterException pe) {\n-                pe.printStackTrace();\n-            } finally {\n-                System.out.println(\"PRINT RETURNED\");\n-            }\n-        }\n-    }\n-\n-    class TextCanvas extends Panel implements Printable {\n+    static class TextCanvas extends Panel implements Printable {\n@@ -119,8 +108,0 @@\n-            paint(g);\n-\n-            return Printable.PAGE_EXISTS;\n-        }\n-\n-        public void paint(Graphics g1) {\n-            Graphics2D g = (Graphics2D) g1;\n-\n@@ -128,1 +109,1 @@\n-            g.drawString(str, 20, 40);\n+            g2d.drawString(str, 20, 40);\n@@ -130,0 +111,2 @@\n+            g2d.dispose();\n+            return Printable.PAGE_EXISTS;\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintParenString.java","additions":18,"deletions":35,"binary":false,"changes":53,"status":"modified"},{"patch":"@@ -32,2 +32,0 @@\n-import java.awt.event.ActionEvent;\n-import java.awt.event.ActionListener;\n@@ -46,4 +44,2 @@\n- * @library \/java\/awt\/regtesthelpers\n- * @library \/test\/lib\n- * @build PassFailJFrame\n- * @build jtreg.SkippedException\n+ * @library \/test\/lib \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame jtreg.SkippedException\n@@ -53,1 +49,1 @@\n-public class PrintTranslatedFont extends Frame implements ActionListener {\n+public class PrintTranslatedFont extends Frame {\n@@ -90,1 +86,0 @@\n-        printButton.addActionListener(this);\n@@ -92,0 +87,11 @@\n+        printButton.addActionListener(e -> {\n+            PrinterJob pj = PrinterJob.getPrinterJob();\n+            if (pj.printDialog()) {\n+                pj.setPrintable(c);\n+                try {\n+                    pj.print();\n+                } catch (PrinterException pe) {\n+                    pe.printStackTrace();\n+                }\n+            }\n+        });\n@@ -96,17 +102,0 @@\n-    public void actionPerformed(ActionEvent e) {\n-\n-        PrinterJob pj = PrinterJob.getPrinterJob();\n-\n-        if (pj != null && pj.printDialog()) {\n-\n-            pj.setPrintable(c);\n-            try {\n-                pj.print();\n-            } catch (PrinterException pe) {\n-                pe.printStackTrace();\n-            } finally {\n-                System.out.println(\"PRINT RETURNED\");\n-            }\n-        }\n-    }\n-\n@@ -123,1 +112,1 @@\n-            paint(g);\n+            paint(g2d);\n@@ -125,0 +114,1 @@\n+            g2d.dispose();\n@@ -128,2 +118,1 @@\n-        public void paint(Graphics g1) {\n-            Graphics2D g = (Graphics2D) g1;\n+        public void paint(Graphics2D g2d) {\n@@ -136,1 +125,1 @@\n-            g.setFont(f);\n+            g2d.setFont(f);\n@@ -138,1 +127,1 @@\n-            FontMetrics fm = g.getFontMetrics();\n+            FontMetrics fm = g2d.getFontMetrics();\n@@ -142,2 +131,2 @@\n-            g.drawString(str, posx, posy);\n-            g.drawLine(posx + tx, posy + ty + 2, posx + tx + sw, posy + ty + 2);\n+            g2d.drawString(str, posx, posy);\n+            g2d.drawLine(posx + tx, posy + ty + 2, posx + tx + sw, posy + ty + 2);\n@@ -149,2 +138,4 @@\n-            g.drawString(str, posx, posy);\n-            g.drawLine(posx + tx, posy + ty + 2, posx + tx + sw, posy + ty + 2);\n+            g2d.drawString(str, posx, posy);\n+            g2d.drawLine(posx + tx, posy + ty + 2, posx + tx + sw, posy + ty + 2);\n+\n+            g2d.dispose();\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintTranslatedFont.java","additions":25,"deletions":34,"binary":false,"changes":59,"status":"modified"}]}