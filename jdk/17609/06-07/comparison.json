{"files":[{"patch":"@@ -37,1 +37,1 @@\n- * @library \/test\/lib \/java\/awt\/regtesthelpers\n+ * @library \/java\/awt\/regtesthelpers\n@@ -44,1 +44,0 @@\n-            \"For non-windows OS, this test PASSes.\\n\" +\n@@ -51,2 +50,1 @@\n-\n-        if (PrinterJob.lookupPrintServices().length == 0) {\n+        if (PrinterJob.lookupPrintServices().length < 2) {\n@@ -73,1 +71,3 @@\n-        if (originalPageFormat == pageFormat) return;\n+        if (originalPageFormat == pageFormat) {\n+            throw new RuntimeException(\"OriginalPageFormat equals pageFormat\");\n+        }\n@@ -76,1 +76,3 @@\n-        job.print();\n+        if (job.printDialog()) {\n+            job.print();\n+        }\n@@ -79,0 +81,1 @@\n+    @Override\n@@ -85,3 +88,0 @@\n-\n-        if (pageIndex > 0) return (NO_SUCH_PAGE);\n-\n@@ -90,0 +90,4 @@\n+        if (pageIndex > 0) {\n+            return NO_SUCH_PAGE;\n+        }\n+\n@@ -100,1 +104,3 @@\n-        if (scale < 1.0) g2d.scale(scale, scale);\n+        if (scale < 1.0) {\n+            g2d.scale(scale, scale);\n+        }\n@@ -105,1 +111,1 @@\n-        return (PAGE_EXISTS);\n+        return PAGE_EXISTS;\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PageDlgPrnButton.java","additions":17,"deletions":11,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -24,3 +24,0 @@\n-import java.awt.Button;\n-import java.awt.Dimension;\n-import java.awt.Frame;\n@@ -29,1 +26,0 @@\n-import java.awt.Panel;\n@@ -35,0 +31,6 @@\n+import javax.swing.BorderFactory;\n+import javax.swing.Box;\n+import javax.swing.JButton;\n+import javax.swing.JComponent;\n+import javax.swing.JOptionPane;\n+\n@@ -40,1 +42,1 @@\n- * @library \/test\/lib \/java\/awt\/regtesthelpers\n+ * @library \/java\/awt\/regtesthelpers\n@@ -44,3 +46,2 @@\n-public class PrintCompoundString extends Frame {\n-    private final TextCanvas c;\n-\n+public class PrintCompoundString implements Printable {\n+    private static final String STR = \"Test string compound printing \\u2203\\u2200\\u2211\";\n@@ -48,5 +49,2 @@\n-            \"You must have a printer available to perform this test\\n\" +\n-            \"This test should print a page which contains the same\\n\" +\n-            \"text message as in the test window on the screen\\n\" +\n-            \"You should also monitor the command line to see if any exceptions\\n\" +\n-            \"were thrown\\n\" +\n+            \"This test should print following text\\n\\n\" +\n+            STR +\"\\n\\n\" +\n@@ -57,1 +55,0 @@\n-\n@@ -64,1 +61,1 @@\n-                .testUI(PrintCompoundString::new)\n+                .splitUI(PrintCompoundString::createTestUI)\n@@ -71,17 +68,8 @@\n-    public PrintCompoundString() {\n-        super(\"JDK 1.2 drawString Printing\");\n-\n-        c = new TextCanvas();\n-        add(\"Center\", c);\n-\n-        Button printButton = new Button(\"Print\");\n-        add(\"South\", printButton);\n-        printButton.addActionListener(e -> {\n-            PrinterJob pj = PrinterJob.getPrinterJob();\n-            if (pj.printDialog()) {\n-                pj.setPrintable(c);\n-                try {\n-                    pj.print();\n-                } catch (PrinterException pe) {\n-                    PassFailJFrame.forceFail(\"Print Failed\");\n-                    pe.printStackTrace();\n+    private static JComponent createTestUI() {\n+        JButton b = new JButton(\"Print\");\n+        b.addActionListener((ae) -> {\n+            try {\n+                PrinterJob job = PrinterJob.getPrinterJob();\n+                job.setPrintable(new PrintCompoundString());\n+                if (job.printDialog()) {\n+                    job.print();\n@@ -89,0 +77,6 @@\n+            } catch (PrinterException ex) {\n+                ex.printStackTrace();\n+                String msg = \"PrinterException: \" + ex.getMessage();\n+                JOptionPane.showMessageDialog(b, msg, \"Error occurred\",\n+                        JOptionPane.ERROR_MESSAGE);\n+                PassFailJFrame.forceFail(msg);\n@@ -92,1 +86,6 @@\n-        pack();\n+        Box main = Box.createHorizontalBox();\n+        main.setBorder(BorderFactory.createEmptyBorder(8, 8, 8, 8));\n+        main.add(Box.createHorizontalGlue());\n+        main.add(b);\n+        main.add(Box.createHorizontalGlue());\n+        return main;\n@@ -95,14 +94,4 @@\n-    class TextCanvas extends Panel implements Printable {\n-\n-        public int print(Graphics g, PageFormat pgFmt, int pgIndex) {\n-\n-            if (pgIndex > 0)\n-                return Printable.NO_SUCH_PAGE;\n-\n-            Graphics2D g2d = (Graphics2D) g;\n-            g2d.translate(pgFmt.getImageableX(), pgFmt.getImageableY());\n-\n-            String str = \"Test string compound printing \\u2203\\u2200\\u2211\";\n-            g2d.drawString(str, 20, 40);\n-\n-            return Printable.PAGE_EXISTS;\n+    @Override\n+    public int print(Graphics g, PageFormat pgFmt, int pgIndex) {\n+        if (pgIndex > 0) {\n+            return Printable.NO_SUCH_PAGE;\n@@ -111,3 +100,5 @@\n-        public Dimension getPreferredSize() {\n-            return new Dimension(450, 250);\n-        }\n+        Graphics2D g2d = (Graphics2D) g;\n+        g2d.translate(pgFmt.getImageableX(), pgFmt.getImageableY());\n+        g2d.drawString(STR, 20, 40);\n+\n+        return Printable.PAGE_EXISTS;\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintCompoundString.java","additions":41,"deletions":50,"binary":false,"changes":91,"status":"modified"},{"patch":"@@ -41,1 +41,1 @@\n- * @test %I %W\n+ * @test\n@@ -45,1 +45,2 @@\n- * @library \/test\/lib \/java\/awt\/regtesthelpers\n+ * @requires os.family==\"windows\"\n+ * @library \/java\/awt\/regtesthelpers\n@@ -53,1 +54,0 @@\n-\n@@ -55,3 +55,2 @@\n-            \"You must have a printer available to perform this test,\\n\" +\n-            \"prefererably Canon LaserShot A309GII.\\n\" +\n-            \"Printing must be done in Win 98 Japanese 2nd Edition.\\n\" +\n+            \"Printing must be done in Japanese 2nd Edition.\\n\" +\n+            \"Preferably Canon LaserShot A309GII.\\n\" +\n@@ -59,1 +58,1 @@\n-            \"Passing test : Output of text image for PrintTest1 and PrintTest2 should be \" +\n+            \"Passing test : Output of text image for PrintTest1 and PrintTest2 should be\\n\" +\n@@ -63,1 +62,0 @@\n-\n@@ -86,2 +84,1 @@\n-        pack();\n-        setSize(500, 500);\n+        setSize(500, 300);\n@@ -121,1 +118,1 @@\n-                PassFailJFrame.forceFail(\" Print Failed\");\n+                PassFailJFrame.forceFail(\"Print Failed\");\n@@ -124,1 +121,1 @@\n-        } else\n+        } else {\n@@ -126,0 +123,1 @@\n+        }\n@@ -141,1 +139,1 @@\n-        } else\n+        } else {\n@@ -143,0 +141,1 @@\n+        }\n@@ -147,1 +146,1 @@\n-\n+    @Override\n@@ -151,0 +150,1 @@\n+        g.setColor(new Color(0, 0, 0, 200));\n@@ -154,0 +154,1 @@\n+    @Override\n@@ -156,2 +157,1 @@\n-\n-        if (pi >= 1)\n+        if (pi > 0) {\n@@ -159,6 +159,0 @@\n-        else {\n-            g.setColor(new Color(0, 0, 0, 200));\n-            Font drawFont = new Font(\"MS Mincho\", Font.ITALIC, 50);\n-            g.setFont(drawFont);\n-            g.drawString(\"PrintSample!\", 100, 150);\n-            return PAGE_EXISTS;\n@@ -166,0 +160,2 @@\n+        paint(g);\n+        return PAGE_EXISTS;\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintImage.java","additions":18,"deletions":22,"binary":false,"changes":40,"status":"modified"},{"patch":"@@ -24,1 +24,0 @@\n-import java.awt.Button;\n@@ -37,0 +36,3 @@\n+import javax.swing.JButton;\n+import javax.swing.JOptionPane;\n+\n@@ -42,1 +44,1 @@\n- * @library \/test\/lib \/java\/awt\/regtesthelpers\n+ * @library \/java\/awt\/regtesthelpers\n@@ -47,2 +49,0 @@\n-    private final TextCanvas c;\n-\n@@ -50,1 +50,0 @@\n-            \"You must have a printer available to perform this test\\n\" +\n@@ -54,3 +53,0 @@\n-            \"There should be no FAILURE messages.\\n\" +\n-            \"You should also monitor the command line to see if any exceptions\\n\" +\n-            \"were thrown\\n\" +\n@@ -61,1 +57,0 @@\n-\n@@ -76,1 +71,1 @@\n-        super(\"JDK 1.2 drawString Printing\");\n+        super(\"PrintNullString\");\n@@ -78,1 +73,1 @@\n-        c = new TextCanvas();\n+        TextCanvas c = new TextCanvas();\n@@ -81,3 +76,3 @@\n-        Button printButton = new Button(\"Print\");\n-        add(\"South\", printButton);\n-        printButton.addActionListener(e -> {\n+        JButton b = new JButton(\"Print\");\n+        add(\"South\", b);\n+        b.addActionListener(e -> {\n@@ -89,3 +84,6 @@\n-                } catch (PrinterException pe) {\n-                    PassFailJFrame.forceFail(\"Print Failed\");\n-                    pe.printStackTrace();\n+                } catch (PrinterException ex) {\n+                    ex.printStackTrace();\n+                    String msg = \"PrinterException: \" + ex.getMessage();\n+                    JOptionPane.showMessageDialog(b, msg, \"Error occurred\",\n+                            JOptionPane.ERROR_MESSAGE);\n+                    PassFailJFrame.forceFail(msg);\n@@ -95,1 +93,0 @@\n-\n@@ -106,1 +103,5 @@\n-        public int print(Graphics g, PageFormat pgFmt, int pgIndex) {\n+        @Override\n+        public void paint(Graphics g) {\n+            Graphics2D g2d = (Graphics2D) g;\n+            paint(g2d);\n+        }\n@@ -108,2 +109,5 @@\n-            if (pgIndex > 0)\n-                return Printable.NO_SUCH_PAGE;\n+        @Override\n+        public int print(Graphics g, PageFormat pgFmt, int pgIndex) {\n+            if (pgIndex > 0) {\n+                return NO_SUCH_PAGE;\n+            }\n@@ -115,1 +119,1 @@\n-            return Printable.PAGE_EXISTS;\n+            return PAGE_EXISTS;\n@@ -119,1 +123,0 @@\n-\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintNullString.java","additions":26,"deletions":23,"binary":false,"changes":49,"status":"modified"},{"patch":"@@ -24,3 +24,0 @@\n-import java.awt.Button;\n-import java.awt.Dimension;\n-import java.awt.Frame;\n@@ -29,1 +26,0 @@\n-import java.awt.Panel;\n@@ -35,0 +31,6 @@\n+import javax.swing.BorderFactory;\n+import javax.swing.Box;\n+import javax.swing.JButton;\n+import javax.swing.JComponent;\n+import javax.swing.JOptionPane;\n+\n@@ -40,1 +42,1 @@\n- * @library \/test\/lib \/java\/awt\/regtesthelpers\n+ * @library \/java\/awt\/regtesthelpers\n@@ -44,3 +46,2 @@\n-public class PrintParenString extends Frame {\n-    private final TextCanvas c;\n-\n+public class PrintParenString implements Printable {\n+    private static final String STR = \"String containing unclosed parenthesis (.\";\n@@ -48,5 +49,2 @@\n-            \"You must have a printer available to perform this test\\n\" +\n-            \"This test should print a page which contains the same\\n\" +\n-            \"text message as in the test window on the screen\\n\" +\n-            \"You should also monitor the command line to see if any exceptions\\n\" +\n-            \"were thrown\\n\" +\n+            \"This test should print a page with following text\\n\\n\" +\n+            STR + \"\\n\\n\" +\n@@ -57,1 +55,0 @@\n-\n@@ -64,1 +61,1 @@\n-                .testUI(PrintParenString::new)\n+                .splitUI(PrintParenString::createTestUI)\n@@ -71,17 +68,8 @@\n-    public PrintParenString() {\n-        super(\"JDK 1.2 drawString Printing\");\n-\n-        c = new TextCanvas();\n-        add(\"Center\", c);\n-\n-        Button printButton = new Button(\"Print\");\n-        add(\"South\", printButton);\n-        printButton.addActionListener(e -> {\n-            PrinterJob pj = PrinterJob.getPrinterJob();\n-            if (pj.printDialog()) {\n-                pj.setPrintable(c);\n-                try {\n-                    pj.print();\n-                } catch (PrinterException pe) {\n-                    PassFailJFrame.forceFail(\"Print Failed\");\n-                    pe.printStackTrace();\n+    private static JComponent createTestUI() {\n+        JButton b = new JButton(\"Print\");\n+        b.addActionListener((ae) -> {\n+            try {\n+                PrinterJob job = PrinterJob.getPrinterJob();\n+                job.setPrintable(new PrintParenString());\n+                if (job.printDialog()) {\n+                    job.print();\n@@ -89,0 +77,6 @@\n+            } catch (PrinterException ex) {\n+                ex.printStackTrace();\n+                String msg = \"PrinterException: \" + ex.getMessage();\n+                JOptionPane.showMessageDialog(b, msg, \"Error occurred\",\n+                        JOptionPane.ERROR_MESSAGE);\n+                PassFailJFrame.forceFail(msg);\n@@ -92,1 +86,6 @@\n-        pack();\n+        Box main = Box.createHorizontalBox();\n+        main.setBorder(BorderFactory.createEmptyBorder(8, 8, 8, 8));\n+        main.add(Box.createHorizontalGlue());\n+        main.add(b);\n+        main.add(Box.createHorizontalGlue());\n+        return main;\n@@ -95,14 +94,4 @@\n-    static class TextCanvas extends Panel implements Printable {\n-\n-        public int print(Graphics g, PageFormat pgFmt, int pgIndex) {\n-\n-            if (pgIndex > 0)\n-                return Printable.NO_SUCH_PAGE;\n-\n-            Graphics2D g2d = (Graphics2D) g;\n-            g2d.translate(pgFmt.getImageableX(), pgFmt.getImageableY());\n-\n-            String str = \"String containing unclosed parenthesis (.\";\n-            g2d.drawString(str, 20, 40);\n-\n-            return Printable.PAGE_EXISTS;\n+    @Override\n+    public int print(Graphics g, PageFormat pgFmt, int pgIndex) {\n+        if (pgIndex > 0) {\n+            return Printable.NO_SUCH_PAGE;\n@@ -111,3 +100,5 @@\n-        public Dimension getPreferredSize() {\n-            return new Dimension(450, 250);\n-        }\n+        Graphics2D g2d = (Graphics2D) g;\n+        g2d.translate(pgFmt.getImageableX(), pgFmt.getImageableY());\n+        g2d.drawString(STR, 20, 40);\n+\n+        return Printable.PAGE_EXISTS;\n@@ -115,1 +106,1 @@\n-}\n\\ No newline at end of file\n+}\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintParenString.java","additions":42,"deletions":51,"binary":false,"changes":93,"status":"modified"},{"patch":"@@ -24,1 +24,0 @@\n-import java.awt.Button;\n@@ -38,0 +37,3 @@\n+import javax.swing.JButton;\n+import javax.swing.JOptionPane;\n+\n@@ -42,1 +44,1 @@\n- * @library \/test\/lib \/java\/awt\/regtesthelpers\n+ * @library \/java\/awt\/regtesthelpers\n@@ -48,2 +50,0 @@\n-    private final TextCanvas c;\n-\n@@ -51,1 +51,0 @@\n-            \"You must have a printer available to perform this test\\n\" +\n@@ -61,1 +60,0 @@\n-\n@@ -76,1 +74,1 @@\n-        super(\"JDK 1.2 drawString Printing\");\n+        super(\"PrintTranslatedFont\");\n@@ -78,1 +76,1 @@\n-        c = new TextCanvas();\n+        TextCanvas c = new TextCanvas();\n@@ -81,3 +79,3 @@\n-        Button printButton = new Button(\"Print\");\n-        add(\"South\", printButton);\n-        printButton.addActionListener(e -> {\n+        JButton b = new JButton(\"Print\");\n+        add(\"South\", b);\n+        b.addActionListener(e -> {\n@@ -89,3 +87,6 @@\n-                } catch (PrinterException pe) {\n-                    PassFailJFrame.forceFail(\"Print Failed\");\n-                    pe.printStackTrace();\n+                } catch (PrinterException ex) {\n+                    ex.printStackTrace();\n+                    String msg = \"PrinterException: \" + ex.getMessage();\n+                    JOptionPane.showMessageDialog(b, msg, \"Error occurred\",\n+                            JOptionPane.ERROR_MESSAGE);\n+                    PassFailJFrame.forceFail(msg);\n@@ -100,0 +101,5 @@\n+        @Override\n+        public void paint(Graphics g) {\n+            Graphics2D g2d = (Graphics2D) g;\n+            paint(g2d);\n+        }\n@@ -101,0 +107,1 @@\n+        @Override\n@@ -102,2 +109,1 @@\n-\n-            if (pgIndex > 0)\n+            if (pgIndex > 0) {\n@@ -105,0 +111,1 @@\n+            }\n@@ -108,1 +115,0 @@\n-\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintTranslatedFont.java","additions":23,"deletions":17,"binary":false,"changes":40,"status":"modified"}]}