{"files":[{"patch":"@@ -127,1 +127,3 @@\n-        final long startTime = System.nanoTime(); \/\/ taking custom start time just in case\n+        \/\/ taking start time before entering completeExchange to account for possible\n+        \/\/ delays in reaching server.stop().\n+        final long startTime = System.nanoTime();\n@@ -155,1 +157,1 @@\n-    public void shouldCompeteAfterDelay() throws InterruptedException {\n+    public void shouldCompleteAfterDelay() throws InterruptedException {\n@@ -162,8 +164,0 @@\n-        \/\/ Complete the exchange 10 second into the future.\n-        \/\/ Runs in parallel, so won't block the server stop\n-        final Duration exchangeDuration = Duration.ofSeconds(Utils.adjustTimeout(10));\n-        final long startTime = System.nanoTime(); \/\/ taking custom start time just in case\n-        completeExchange(exchangeDuration);\n-        log(\"Complete Exchange triggered\");\n-\n-\n@@ -173,1 +167,1 @@\n-        final long elapsed = timeShutdown(delayDuration, startTime);\n+        final long elapsed = timeShutdown(delayDuration);\n@@ -176,0 +170,7 @@\n+        \/\/ Complete the exchange 10 second into the future.\n+        \/\/ Runs in parallel, so won't block the server stop\n+        final Duration exchangeDuration = Duration.ofSeconds(Utils.adjustTimeout(10));\n+        \/\/ taking start time before entering completeExchange to account for possible\n+        \/\/ delays in reaching server.stop().\n+        completeExchange(exchangeDuration);\n+        log(\"Complete Exchange triggered\");\n","filename":"test\/jdk\/com\/sun\/net\/httpserver\/ServerStopTerminationTest.java","additions":12,"deletions":11,"binary":false,"changes":23,"status":"modified"}]}