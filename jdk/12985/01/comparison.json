{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,1 +34,1 @@\n- * @LastModified: May 2021\n+ * @LastModified: Mar 2023\n@@ -208,1 +208,1 @@\n-            value = SecuritySupport.readJAXPProperty(systemProperty);\n+            value = SecuritySupport.readConfig(systemProperty);\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/xalan\/internal\/utils\/FeaturePropertyBase.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -42,1 +42,1 @@\n- * @LastModified: May 2021\n+ * @LastModified: Mar 2023\n@@ -151,1 +151,1 @@\n-            return attributes.get(pName);\n+            return fSecurityManager.getLimitAsString(pName);\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/xerces\/internal\/jaxp\/DocumentBuilderFactoryImpl.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -565,1 +565,1 @@\n-            value = SecuritySupport.readJAXPProperty(sysPropertyName);\n+            value = SecuritySupport.readConfig(sysPropertyName);\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/xerces\/internal\/utils\/XMLSecurityManager.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -234,1 +234,1 @@\n-            value = SecuritySupport.readJAXPProperty(systemProperty);\n+            value = SecuritySupport.readConfig(systemProperty);\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/xerces\/internal\/utils\/XMLSecurityPropertyManager.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -243,5 +243,5 @@\n-         * <b>jaxp.properties:<\/b> This configuration file is in standard\n-         * {@link java.util.Properties} format and typically located in the {@code conf}\n-         * directory of the Java installation. If the file exists and the system\n-         * property is specified, its value will be used to override the default\n-         * of the property.\n+         * <b>Configuration File:<\/b>\n+         * The property can be set set in the\n+         * <a href=\"..\/..\/module-summary.html#ConfigurationFile\">configuration file<\/a>.\n+         * If the file exists and the system property is specified, its value will\n+         * be used to override the default of the property.\n@@ -306,5 +306,5 @@\n-         * <b>jaxp.properties:<\/b> This configuration file is in standard\n-         * {@link java.util.Properties} format and typically located in the {@code conf}\n-         * directory of the Java installation. If the file exists and the system\n-         * property is specified, its value will be used to override the default\n-         * of the property.\n+         * <b>Configuration File:<\/b>\n+         * The property can be set in the\n+         * <a href=\"..\/..\/module-summary.html#ConfigurationFile\">configuration file<\/a>.\n+         * If the file exists and the system property is specified, its value will\n+         * be used to override the default of the property.\n@@ -370,5 +370,5 @@\n-         * <b>jaxp.properties:<\/b> This configuration file is in standard\n-         * {@link java.util.Properties} format and typically located in the {@code conf}\n-         * directory of the Java installation. If the file exists and the system\n-         * property is specified, its value will be used to override the default\n-         * of the property.\n+         * <b>Configuration File:<\/b>\n+         * The property can be set in the\n+         * <a href=\"..\/..\/module-summary.html#ConfigurationFile\">configuration file<\/a>.\n+         * If the file exists and the system property is specified, its value will\n+         * be used to override the default of the property.\n@@ -387,1 +387,1 @@\n-         * jaxp.properties by using the {@code javax.xml.catalog.files} property\n+         * configuration file by using the {@code javax.xml.catalog.files} property\n@@ -408,5 +408,5 @@\n-         * <b>jaxp.properties:<\/b> This configuration file is in standard\n-         * {@link java.util.Properties} format and typically located in the {@code conf}\n-         * directory of the Java installation. If the file exists and the system\n-         * property is specified, its value will be used to override the default\n-         * value of the property.\n+         * <b>Configuration File:<\/b>\n+         * The property can be set in the\n+         * <a href=\"..\/..\/module-summary.html#ConfigurationFile\">configuration file<\/a>.\n+         * If the file exists and the system property is specified, its value will\n+         * be used to override the default of the property.\n","filename":"src\/java.xml\/share\/classes\/javax\/xml\/XMLConstants.java","additions":22,"deletions":22,"binary":false,"changes":44,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -45,1 +45,1 @@\n- * <th scope=\"col\" rowspan=\"2\">jaxp.properties [1]<\/th>\n+ * <th scope=\"col\" rowspan=\"2\"><a href=\"..\/..\/..\/module-summary.html#ConfigurationFile\">configuration file<\/a> [1]<\/th>\n@@ -169,1 +169,3 @@\n- * system properties, and {@code jaxp.properties}, with a preference in the same order.\n+ * system properties, and\n+ * <a href=\"..\/..\/..\/module-summary.html#ConfigurationFile\">configuration file<\/a>,\n+ * with a preference in the same order.\n@@ -178,3 +180,4 @@\n- * by system properties and\/or in {@code jaxp.properties}. In case of multiple\n- * interfaces, the latest in a procedure shall take preference. For\n- * {@link Feature#FILES}, this means that the URI(s) specified through the methods\n+ * by system properties and\/or in the\n+ * <a href=\"..\/..\/..\/module-summary.html#ConfigurationFile\">configuration file<\/a>.\n+ * In case of multiple interfaces, the latest in a procedure shall take preference.\n+ * For {@link Feature#FILES}, this means that the URI(s) specified through the methods\n@@ -185,8 +188,3 @@\n- * System properties when set shall override those in {@code jaxp.properties}.\n- * <p>\n- * The {@code jaxp.properties} file is typically in the conf directory of the Java\n- * installation. The file is read only once by the JAXP implementation and\n- * its values are then cached for future use. If the file does not exist\n- * when the first attempt is made to read from it, no further attempts are\n- * made to check for its existence. It is not possible to change the value\n- * of any properties in {@code jaxp.properties} after it has been read.\n+ * System properties when set shall override those in the\n+ * <a href=\"..\/..\/..\/module-summary.html#ConfigurationFile\">configuration file<\/a>.\n+ *\n@@ -492,1 +490,1 @@\n-     * jaxp.properties file, jaxp system properties, and jaxp api properties\n+     * configuration file, jaxp system properties, and jaxp api properties\n@@ -625,1 +623,1 @@\n-            value = SecuritySupport.readJAXPProperty(sysPropertyName);\n+            value = SecuritySupport.readConfig(sysPropertyName);\n","filename":"src\/java.xml\/share\/classes\/javax\/xml\/catalog\/CatalogFeatures.java","additions":14,"deletions":16,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2017, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -36,1 +36,1 @@\n- * or system property or the jaxp.properties file to take advantage of the feature.\n+ * or system property or the configuration file to take advantage of the feature.\n","filename":"src\/java.xml\/share\/classes\/javax\/xml\/catalog\/package-info.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2004, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2004, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,1 +28,0 @@\n-import java.io.File;\n@@ -32,1 +31,0 @@\n-import java.util.Properties;\n@@ -54,11 +52,0 @@\n-    \/**\n-     * Cache for properties in java.home\/conf\/jaxp.properties\n-     *\/\n-    private final static Properties cacheProps = new Properties();\n-\n-    \/**\n-     * Flag indicating if properties from java.home\/conf\/jaxp.properties\n-     * have been cached.\n-     *\/\n-    private static volatile boolean firstTime = true;\n-\n@@ -236,25 +223,4 @@\n-        \/\/ try to read from $java.home\/conf\/jaxp.properties\n-        try {\n-            if (firstTime) {\n-                synchronized (cacheProps) {\n-                    if (firstTime) {\n-                        String configFile = SecuritySupport.getSystemProperty(\"java.home\") + File.separator +\n-                            \"conf\" + File.separator + \"jaxp.properties\";\n-                        File f = new File(configFile);\n-                        firstTime = false;\n-                        if (SecuritySupport.doesFileExist(f)) {\n-                            dPrint(()->\"Read properties file \"+f);\n-                            cacheProps.load(SecuritySupport.getFileInputStream(f));\n-                        }\n-                    }\n-                }\n-            }\n-            final String factoryClassName = cacheProps.getProperty(factoryId);\n-\n-            if (factoryClassName != null) {\n-                dPrint(()->\"found in ${java.home}\/conf\/jaxp.properties, value=\" + factoryClassName);\n-                return newInstance(type, factoryClassName, null, true);\n-            }\n-        }\n-        catch (Exception ex) {\n-            if (debug) ex.printStackTrace();\n+        \/\/ try to read from the configuration file\n+        String factoryClassName = SecuritySupport.readConfig(factoryId);\n+        if (factoryClassName != null) {\n+            return newInstance(type, factoryClassName, null, true);\n","filename":"src\/java.xml\/share\/classes\/javax\/xml\/datatype\/FactoryFinder.java","additions":5,"deletions":39,"binary":false,"changes":44,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,1 +28,0 @@\n-import java.io.File;\n@@ -32,1 +31,0 @@\n-import java.util.Properties;\n@@ -53,11 +51,0 @@\n-    \/**\n-     * Cache for properties in java.home\/conf\/jaxp.properties\n-     *\/\n-    private static final Properties cacheProps = new Properties();\n-\n-    \/**\n-     * Flag indicating if properties from java.home\/conf\/jaxp.properties\n-     * have been cached.\n-     *\/\n-    static volatile boolean firstTime = true;\n-\n@@ -234,25 +221,4 @@\n-        \/\/ try to read from $java.home\/conf\/jaxp.properties\n-        try {\n-            if (firstTime) {\n-                synchronized (cacheProps) {\n-                    if (firstTime) {\n-                        String configFile = SecuritySupport.getSystemProperty(\"java.home\") + File.separator +\n-                            \"conf\" + File.separator + \"jaxp.properties\";\n-                        File f = new File(configFile);\n-                        firstTime = false;\n-                        if (SecuritySupport.doesFileExist(f)) {\n-                            dPrint(()->\"Read properties file \"+f);\n-                            cacheProps.load(SecuritySupport.getFileInputStream(f));\n-                        }\n-                    }\n-                }\n-            }\n-            final String factoryClassName = cacheProps.getProperty(factoryId);\n-\n-            if (factoryClassName != null) {\n-                dPrint(()->\"found in ${java.home}\/conf\/jaxp.properties, value=\" + factoryClassName);\n-                return newInstance(type, factoryClassName, null, true);\n-            }\n-        }\n-        catch (Exception ex) {\n-            if (debug) ex.printStackTrace();\n+        \/\/ try to read from the configuration file\n+        String factoryClassName = SecuritySupport.readConfig(factoryId);\n+        if (factoryClassName != null) {\n+            return newInstance(type, factoryClassName, null, true);\n","filename":"src\/java.xml\/share\/classes\/javax\/xml\/parsers\/FactoryFinder.java","additions":5,"deletions":39,"binary":false,"changes":44,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,1 +28,0 @@\n-import java.io.File;\n@@ -32,1 +31,0 @@\n-import java.util.Properties;\n@@ -55,11 +53,0 @@\n-    \/**\n-     * Cache for properties in java.home\/conf\/jaxp.properties\n-     *\/\n-    final private static Properties cacheProps = new Properties();\n-\n-    \/**\n-     * Flag indicating if properties from java.home\/conf\/jaxp.properties\n-     * have been cached.\n-     *\/\n-    private static volatile boolean firstTime = true;\n-\n@@ -269,37 +256,4 @@\n-        \/\/ Try read $java.home\/conf\/stax.properties followed by\n-        \/\/ $java.home\/conf\/jaxp.properties if former not present\n-        String configFile = null;\n-        try {\n-            if (firstTime) {\n-                synchronized (cacheProps) {\n-                    if (firstTime) {\n-                        configFile = SecuritySupport.getSystemProperty(\"java.home\") + File.separator +\n-                            \"conf\" + File.separator + \"stax.properties\";\n-                        final File fStax = new File(configFile);\n-                        firstTime = false;\n-                        if (SecuritySupport.doesFileExist(fStax)) {\n-                            dPrint(()->\"Read properties file \"+fStax);\n-                            cacheProps.load(SecuritySupport.getFileInputStream(fStax));\n-                        }\n-                        else {\n-                            configFile = SecuritySupport.getSystemProperty(\"java.home\") + File.separator +\n-                                \"conf\" + File.separator + \"jaxp.properties\";\n-                            final File fJaxp = new File(configFile);\n-                            if (SecuritySupport.doesFileExist(fJaxp)) {\n-                                dPrint(()->\"Read properties file \"+fJaxp);\n-                                cacheProps.load(SecuritySupport.getFileInputStream(fJaxp));\n-                            }\n-                        }\n-                    }\n-                }\n-            }\n-            final String factoryClassName = cacheProps.getProperty(factoryId);\n-\n-            if (factoryClassName != null) {\n-                final String foundIn = configFile;\n-                dPrint(()->\"found in \" + foundIn + \" value=\" + factoryClassName);\n-                return newInstance(type, factoryClassName, cl, true);\n-            }\n-        }\n-        catch (Exception ex) {\n-            if (debug) ex.printStackTrace();\n+        \/\/ try to read from the configuration file\n+        String factoryClassName = SecuritySupport.readConfig(factoryId);\n+        if (factoryClassName != null) {\n+            return newInstance(type, factoryClassName, cl, true);\n","filename":"src\/java.xml\/share\/classes\/javax\/xml\/stream\/FactoryFinder.java","additions":5,"deletions":51,"binary":false,"changes":56,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2009, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2009, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -137,17 +137,5 @@\n-   *   Use the configuration file \"stax.properties\". The file is in standard\n-   *   {@link java.util.Properties} format and typically located in the\n-   *   conf directory of the Java installation. It contains the fully qualified\n-   *   name of the implementation class with the key being the system property\n-   *   defined above.\n-   *\n-   *   <p>\n-   *   The stax.properties file is read only once by the implementation\n-   *   and its values are then cached for future use.  If the file does not exist\n-   *   when the first attempt is made to read from it, no further attempts are\n-   *   made to check for its existence.  It is not possible to change the value\n-   *   of any property in stax.properties after it has been read for the first time.\n-   *\n-   *   <p>\n-   *   Use the jaxp configuration file \"jaxp.properties\". The file is in the same\n-   *   format as stax.properties and will only be read if stax.properties does\n-   *   not exist.\n+   *   Use the value of the property {@code factoryId} set in the\n+   * <a href=\"..\/..\/..\/module-summary.html#ConfigurationFile\">configuration file<\/a>,\n+   * stax.properties or jaxp.properties by default. If the file exists and\n+   * the property {@code factoryId} is specified in the file, its value will be\n+   * used as the implementation class.\n","filename":"src\/java.xml\/share\/classes\/javax\/xml\/stream\/XMLEventFactory.java","additions":6,"deletions":18,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -224,17 +224,5 @@\n-   *   Use the configuration file \"stax.properties\". The file is in standard\n-   *   {@link java.util.Properties} format and typically located in the\n-   *   {@code conf} directory of the Java installation. It contains the fully qualified\n-   *   name of the implementation class with the key being the system property\n-   *   defined above.\n-   *\n-   *   <p>\n-   *   The stax.properties file is read only once by the implementation\n-   *   and its values are then cached for future use.  If the file does not exist\n-   *   when the first attempt is made to read from it, no further attempts are\n-   *   made to check for its existence.  It is not possible to change the value\n-   *   of any property in stax.properties after it has been read for the first time.\n-   *\n-   *   <p>\n-   *   Use the jaxp configuration file \"jaxp.properties\". The file is in the same\n-   *   format as stax.properties and will only be read if stax.properties does\n-   *   not exist.\n+   *   Use the value of the property {@code factoryId} set in the\n+   * <a href=\"..\/..\/..\/module-summary.html#ConfigurationFile\">configuration file<\/a>,\n+   * stax.properties or jaxp.properties by default. If the file exists and\n+   * the property {@code factoryId} is specified in the file, its value will be\n+   * used as the implementation class.\n","filename":"src\/java.xml\/share\/classes\/javax\/xml\/stream\/XMLInputFactory.java","additions":5,"deletions":17,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -199,17 +199,5 @@\n-   *   Use the configuration file \"stax.properties\". The file is in standard\n-   *   {@link java.util.Properties} format and typically located in the\n-   *   {@code conf} directory of the Java installation. It contains the fully qualified\n-   *   name of the implementation class with the key being the system property\n-   *   defined above.\n-   *\n-   *   <p>\n-   *   The stax.properties file is read only once by the implementation\n-   *   and its values are then cached for future use.  If the file does not exist\n-   *   when the first attempt is made to read from it, no further attempts are\n-   *   made to check for its existence.  It is not possible to change the value\n-   *   of any property in stax.properties after it has been read for the first time.\n-   *\n-   *   <p>\n-   *   Use the jaxp configuration file \"jaxp.properties\". The file is in the same\n-   *   format as stax.properties and will only be read if stax.properties does\n-   *   not exist.\n+   *   Use the value of the property {@code factoryId} set in the\n+   * <a href=\"..\/..\/..\/module-summary.html#ConfigurationFile\">configuration file<\/a>,\n+   * stax.properties or jaxp.properties by default. If the file exists and\n+   * the property {@code factoryId} is specified in the file, its value will be\n+   * used as the implementation class.\n","filename":"src\/java.xml\/share\/classes\/javax\/xml\/stream\/XMLOutputFactory.java","additions":5,"deletions":17,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,3 +28,0 @@\n-import java.io.File;\n-import java.lang.reflect.Method;\n-import java.lang.reflect.Modifier;\n@@ -34,1 +31,0 @@\n-import java.util.Properties;\n@@ -56,11 +52,0 @@\n-    \/**\n-     * Cache for properties in java.home\/conf\/jaxp.properties\n-     *\/\n-    private final static Properties cacheProps = new Properties();\n-\n-    \/**\n-     * Flag indicating if properties from java.home\/conf\/jaxp.properties\n-     * have been cached.\n-     *\/\n-    static volatile boolean firstTime = true;\n-\n@@ -220,25 +205,4 @@\n-        \/\/ try to read from $java.home\/conf\/jaxp.properties\n-        try {\n-            if (firstTime) {\n-                synchronized (cacheProps) {\n-                    if (firstTime) {\n-                        String configFile = SecuritySupport.getSystemProperty(\"java.home\") + File.separator +\n-                            \"conf\" + File.separator + \"jaxp.properties\";\n-                        File f = new File(configFile);\n-                        firstTime = false;\n-                        if (SecuritySupport.doesFileExist(f)) {\n-                            dPrint(()->\"Read properties file \"+f);\n-                            cacheProps.load(SecuritySupport.getFileInputStream(f));\n-                        }\n-                    }\n-                }\n-            }\n-            final String factoryClassName = cacheProps.getProperty(factoryId);\n-\n-            if (factoryClassName != null) {\n-                dPrint(()->\"found in ${java.home}\/conf\/jaxp.properties, value=\" + factoryClassName);\n-                return newInstance(type, factoryClassName, null, true);\n-            }\n-        }\n-        catch (Exception ex) {\n-            if (debug) ex.printStackTrace();\n+        \/\/ try to read from the configuration file\n+        String factoryClassName = SecuritySupport.readConfig(factoryId);\n+        if (factoryClassName != null) {\n+            return newInstance(type, factoryClassName, null, true);\n","filename":"src\/java.xml\/share\/classes\/javax\/xml\/transform\/FactoryFinder.java","additions":5,"deletions":41,"binary":false,"changes":46,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,1 +29,0 @@\n-import java.io.File;\n@@ -31,2 +30,0 @@\n-import java.lang.reflect.Method;\n-import java.lang.reflect.Modifier;\n@@ -36,1 +33,0 @@\n-import java.util.Properties;\n@@ -54,9 +50,0 @@\n-    \/**\n-     * <p>Cache properties for performance.<\/p>\n-     *\/\n-    private static final Properties cacheProps = new Properties();\n-\n-    \/**\n-     * <p>First time requires initialization overhead.<\/p>\n-     *\/\n-    private static volatile boolean firstTime = true;\n@@ -182,31 +169,6 @@\n-        String javah = SecuritySupport.getSystemProperty( \"java.home\" );\n-        String configFile = javah + File.separator +\n-        \"conf\" + File.separator + \"jaxp.properties\";\n-\n-\n-        \/\/ try to read from $java.home\/conf\/jaxp.properties\n-        try {\n-            if(firstTime){\n-                synchronized(cacheProps){\n-                    if(firstTime){\n-                        File f=new File( configFile );\n-                        firstTime = false;\n-                        if(SecuritySupport.doesFileExist(f)){\n-                            debugPrintln(()->\"Read properties file \" + f);\n-                            cacheProps.load(SecuritySupport.getFileInputStream(f));\n-                        }\n-                    }\n-                }\n-            }\n-            final String factoryClassName = cacheProps.getProperty(propertyName);\n-            debugPrintln(()->\"found \" + factoryClassName + \" in $java.home\/conf\/jaxp.properties\");\n-\n-            if (factoryClassName != null) {\n-                sf = createInstance(factoryClassName);\n-                if(sf != null){\n-                    return sf;\n-                }\n-            }\n-        } catch (Exception ex) {\n-            if (debug) {\n-                ex.printStackTrace();\n+        \/\/ try to read from the configuration file\n+        String factoryClassName = SecuritySupport.readConfig(propertyName);\n+        if (factoryClassName != null) {\n+            sf = createInstance(factoryClassName);\n+            if(sf != null){\n+                return sf;\n","filename":"src\/java.xml\/share\/classes\/javax\/xml\/validation\/SchemaFactoryFinder.java","additions":7,"deletions":45,"binary":false,"changes":52,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2004, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2004, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,1 +29,0 @@\n-import java.io.File;\n@@ -177,30 +176,5 @@\n-        String javah = SecuritySupport.getSystemProperty( \"java.home\" );\n-        String configFile = javah + File.separator +\n-        \"conf\" + File.separator + \"jaxp.properties\";\n-\n-        \/\/ try to read from $java.home\/conf\/jaxp.properties\n-        try {\n-            if(firstTime){\n-                synchronized(cacheProps){\n-                    if(firstTime){\n-                        File f=new File( configFile );\n-                        firstTime = false;\n-                        if(SecuritySupport.doesFileExist(f)){\n-                            debugPrintln(()->\"Read properties file \" + f);\n-                            cacheProps.load(SecuritySupport.getFileInputStream(f));\n-                        }\n-                    }\n-                }\n-            }\n-            final String factoryClassName = cacheProps.getProperty(propertyName);\n-            debugPrintln(()->\"found \" + factoryClassName + \" in $java.home\/conf\/jaxp.properties\");\n-\n-            if (factoryClassName != null) {\n-                xpathFactory = createInstance(factoryClassName);\n-                if(xpathFactory != null){\n-                    return xpathFactory;\n-                }\n-            }\n-        } catch (Exception ex) {\n-            if (debug) {\n-                ex.printStackTrace();\n+        String factoryClassName = SecuritySupport.readConfig(propertyName);\n+        if (factoryClassName != null) {\n+            xpathFactory = createInstance(factoryClassName);\n+            if(xpathFactory != null){\n+                return xpathFactory;\n","filename":"src\/java.xml\/share\/classes\/javax\/xml\/xpath\/XPathFactoryFinder.java","additions":6,"deletions":32,"binary":false,"changes":38,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -286,0 +286,6 @@\n+    \/**\n+     * System Property for the Configuration File\n+     * @since 21\n+     *\/\n+    public static final String CONFIG_FILE = \"jdk.xml.config.file\";\n+\n","filename":"src\/java.xml\/share\/classes\/jdk\/xml\/internal\/JdkConstants.java","additions":7,"deletions":1,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -410,1 +410,1 @@\n-            value = SecuritySupport.readJAXPProperty(sysPropertyName);\n+            value = SecuritySupport.readConfig(sysPropertyName);\n","filename":"src\/java.xml\/share\/classes\/jdk\/xml\/internal\/JdkXmlFeatures.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,0 +33,1 @@\n+import java.nio.file.Paths;\n@@ -162,1 +163,1 @@\n-            value = readJAXPProperty(propName);\n+            value = readConfig(propName);\n@@ -168,1 +169,4 @@\n-     * Reads the specified property from $java.home\/conf\/jaxp.properties\n+     * Returns the value of the specified property from the Configuration file.\n+     * The method reads the System Property \"java.xml.config.file\" for a custom\n+     * configuration file, if doesn't exist, falls back to the JDK default that\n+     * is typically located at $java.home\/conf\/jaxp.properties.\n@@ -170,2 +174,18 @@\n-     * @param propName the name of the property\n-     * @return the value of the property\n+     * @param propName the specified property\n+     * @return the value of the specified property, null if the property is not\n+     * found\n+     *\/\n+    public static String readConfig(String propName) {\n+        return readConfig(propName, false);\n+    }\n+\n+    \/**\n+     * Returns the value of the specified property from the Configuration file.\n+     * The method reads the System Property \"java.xml.config.file\" for a custom\n+     * configuration file, if doesn't exist, falls back to the JDK default that\n+     * is typically located at $java.home\/conf\/jaxp.properties.\n+     *\n+     * @param propName the specified property\n+     * @param stax a flag indicating whether to read stax.properties\n+     * @return the value of the specified property, null if the property is not\n+     * found\n@@ -173,15 +193,18 @@\n-    public static String readJAXPProperty(String propName) {\n-        String value = null;\n-        InputStream is = null;\n-        try {\n-            if (firstTime) {\n-                synchronized (cacheProps) {\n-                    if (firstTime) {\n-                        String configFile = getSystemProperty(\"java.home\") + File.separator\n-                                + \"conf\" + File.separator + \"jaxp.properties\";\n-                        File f = new File(configFile);\n-                        if (isFileExists(f)) {\n-                            is = getFileInputStream(f);\n-                            cacheProps.load(is);\n-                        }\n-                        firstTime = false;\n+    public static String readConfig(String propName, boolean stax) {\n+        \/\/ use the System Property if specified\n+        String configFile = SecuritySupport.getSystemProperty(JdkConstants.CONFIG_FILE);\n+        if (configFile != null && loadProperties(configFile)) {\n+            return cacheProps.getProperty(propName);\n+        }\n+\n+        \/\/ fall back to the default configuration file\n+        if (firstTime) {\n+            synchronized (cacheProps) {\n+                if (firstTime) {\n+                    boolean found = false;\n+                    if (stax) {\n+                        found = loadProperties(\n+                            Paths.get(SecuritySupport.getSystemProperty(\"java.home\"),\n+                                    \"conf\", \"stax.properties\")\n+                                    .toAbsolutePath().normalize().toString()\n+                        );\n@@ -189,0 +212,8 @@\n+\n+                    if (!found) {\n+                        loadProperties(\n+                            Paths.get(SecuritySupport.getSystemProperty(\"java.home\"),\n+                                \"conf\", \"jaxp.properties\")\n+                                .toAbsolutePath().normalize().toString());\n+                    }\n+                    firstTime = false;\n@@ -191,9 +222,0 @@\n-            value = cacheProps.getProperty(propName);\n-\n-        } catch (IOException ex) {\n-        } finally {\n-            if (is != null) {\n-                try {\n-                    is.close();\n-                } catch (IOException ex) {}\n-            }\n@@ -202,1 +224,19 @@\n-        return value;\n+        return cacheProps.getProperty(propName);\n+    }\n+\n+    \/**\n+     * Loads the properties from the specified file into the cache.\n+     * @param file the specified file\n+     * @return true if success, false otherwise\n+     *\/\n+    private static boolean loadProperties(String file) {\n+        File f = new File(file);\n+        if (SecuritySupport.doesFileExist(f)) {\n+            try (final InputStream in = SecuritySupport.getFileInputStream(f)) {\n+                cacheProps.load(in);\n+                return true;\n+            } catch (IOException e) {\n+                \/\/ ignore file not found error\n+            }\n+        }\n+        return false;\n","filename":"src\/java.xml\/share\/classes\/jdk\/xml\/internal\/SecuritySupport.java","additions":70,"deletions":30,"binary":false,"changes":100,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -588,1 +588,1 @@\n-            value = SecuritySupport.readJAXPProperty(sysPropertyName);\n+            value = SecuritySupport.readConfig(sysPropertyName);\n","filename":"src\/java.xml\/share\/classes\/jdk\/xml\/internal\/XMLSecurityManager.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -30,0 +30,86 @@\n+ * <h2 id=\"ConfigurationFile\">Configuration File<\/h2>\n+ * The java.xml (JAXP) Configuration File is used for configuring factories in the\n+ * <a href=\"#LookupMechanism\">Factory Lookup Mechanism<\/a>, secure processing,\n+ * and Catalog API.\n+ *\n+ * <h3>Format<\/h3>\n+ * The configuration file is in standard {@link java.util.Properties} format.\n+ * <p>\n+ * The keys are:\n+ * <ul>\n+ * <li>\n+ * For the <a href=\"#LookupMechanism\">Factory Lookup Mechanism<\/a>, System properties\n+ * as listed in column System Property of the table <a href=\"#Factories\">JAXP Factories<\/a>.\n+ * <\/li>\n+ * <li>\n+ * <p>\n+ * For secure processing, {@code Full Name} in\n+ * table <a href=\"#Properties\">Implementation Specific Properties<\/a> and\n+ * <a href=\"#Features\">Features<\/a>\n+ * <\/li>\n+ * <li>\n+ * <p>\n+ * For the Catalog API, {@code System Property} in table {@code Catalog Features}\n+ * of class {@link javax.xml.catalog.CatalogFeatures CatalogFeatures}\n+ * <\/li>\n+ * <\/ul>\n+ * <p>\n+ * The values are:\n+ * <ul>\n+ * <li>\n+ * For the <a href=\"#LookupMechanism\">Factory Lookup Mechanism<\/a>, the fully\n+ * qualified name of the implementation class.\n+ * <\/li>\n+ * <li>\n+ * <p>\n+ * For secure processing, {@code Value} in\n+ * table <a href=\"#Properties\">Implementation Specific Properties<\/a> and\n+ * <a href=\"#Features\">Features<\/a>\n+ * <\/li>\n+ * <li>\n+ * <p>\n+ * For the Catalog API, {@code value} in table {@code Catalog Features}\n+ * of class {@link javax.xml.catalog.CatalogFeatures CatalogFeatures}\n+ * <\/li>\n+ * <\/ul>\n+ * <p>\n+ * Below are examples on what can be placed in the configuration file:\n+ * <pre>\n+ *     {@code javax.xml.parsers.DocumentBuilderFactory=packagename.DocumentBuilderFactoryImpl}\n+ *     {@code jdk.xml.entityExpansionLimit=2000}\n+ * <\/pre>\n+ *\n+ *\n+ * <h3 id=\"CF_Default\">Default<\/h3>\n+ * The JDK may be distributed with a configuration file called {@code jaxp.properties}\n+ * that is used by all factories listed in <a href=\"#Factories\">the Factories table<\/a> below.\n+ * It may also include one called {@code stax.properties} that will be used by\n+ * the StAX factories for the <a href=\"#LookupMechanism\">Factory Lookup Mechanism<\/a>\n+ * only. The files, if exist, are typically located in the {@code conf}\n+ * directory of the Java installation.\n+ * <p>\n+ * The default files will be read only once during a factory initialization and\n+ * the values are used while the factory is alive.  If the file does not exist when\n+ * the first attempt is made to read from it, no further attempts are made to check\n+ * for its existence. It is not possible to change the value of any property after\n+ * it has been read for the first time.\n+ *\n+ *\n+ * <h3>System Property<\/h3>\n+ * The system property {@code jdk.xml.config.file} can be used to set up a\n+ * configuration file outside of the JDK to override the default configuration\n+ * file (jaxp.properties).\n+ * <p>\n+ * When the system property is specified, the configuration file it points to\n+ * will override the default file in its entirety, that means no setting in the\n+ * latter will be used by the factories. If the system property does not exist\n+ * when a factory is instantiated, no further attempt will be made to locate it\n+ * while the factory is alive.\n+ * <p>\n+ * The value of the property shall be a valid file path to a configuration file.\n+ * If the file path is not absolute, it will be considered relative to the working\n+ * directory.\n+ * <p>\n+ * Unlike other system properties, this property can not be placed in a configuration\n+ * file.\n+ *\n@@ -55,1 +141,1 @@\n- * <td style=\"text-align:center\"><a href=\"#JaxpProperties\">jaxp.properties<\/a><\/td>\n+ * <td style=\"text-align:center\"><a href=\"#ConfigurationFile\">Configuration File<\/a>, <a href=\"#CF_Default\">jaxp.properties<\/a> by default<\/td>\n@@ -64,1 +150,1 @@\n- * <td style=\"text-align:center\"><a href=\"#JaxpProperties\">jaxp.properties<\/a><\/td>\n+ * <td style=\"text-align:center\"><a href=\"#ConfigurationFile\">Configuration File<\/a>, <a href=\"#CF_Default\">jaxp.properties<\/a> by default<\/td>\n@@ -73,1 +159,1 @@\n- * <td style=\"text-align:center\"><a href=\"#JaxpProperties\">jaxp.properties<\/a><\/td>\n+ * <td style=\"text-align:center\"><a href=\"#ConfigurationFile\">Configuration File<\/a>, <a href=\"#CF_Default\">jaxp.properties<\/a> by default<\/td>\n@@ -83,2 +169,2 @@\n- *     <a href=\"#StAXProperties\">stax.properties<\/a> and then\n- *     <a href=\"#JaxpProperties\">jaxp.properties<\/a>\n+ *     <a href=\"#ConfigurationFile\">Configuration File<\/a>,\n+ *     <a href=\"#CF_Default\">stax.properties<\/a> and\/or <a href=\"#CF_Default\">jaxp.properties<\/a> by default\n@@ -95,2 +181,2 @@\n- *     <a href=\"#StAXProperties\">stax.properties<\/a> and then\n- *     <a href=\"#JaxpProperties\">jaxp.properties<\/a>\n+ *     <a href=\"#ConfigurationFile\">Configuration File<\/a>,\n+ *     <a href=\"#CF_Default\">stax.properties<\/a> and\/or <a href=\"#CF_Default\">jaxp.properties<\/a> by default\n@@ -107,2 +193,2 @@\n- *     <a href=\"#StAXProperties\">stax.properties<\/a> and then\n- *     <a href=\"#JaxpProperties\">jaxp.properties<\/a>\n+ *     <a href=\"#ConfigurationFile\">Configuration File<\/a>,\n+ *     <a href=\"#CF_Default\">stax.properties<\/a> and\/or <a href=\"#CF_Default\">jaxp.properties<\/a> by default\n@@ -118,1 +204,1 @@\n- * <td style=\"text-align:center\"><a href=\"#JaxpProperties\">jaxp.properties<\/a><\/td>\n+ * <td style=\"text-align:center\"><a href=\"#ConfigurationFile\">Configuration File<\/a>, <a href=\"#CF_Default\">jaxp.properties<\/a> by default<\/td>\n@@ -127,1 +213,1 @@\n- * <td style=\"text-align:center\"><a href=\"#JaxpProperties\">jaxp.properties<\/a><\/td>\n+ * <td style=\"text-align:center\"><a href=\"#ConfigurationFile\">Configuration File<\/a>, <a href=\"#CF_Default\">jaxp.properties<\/a> by default<\/td>\n@@ -136,1 +222,1 @@\n- * <td style=\"text-align:center\"><a href=\"#JaxpProperties\">jaxp.properties<\/a><\/td>\n+ * <td style=\"text-align:center\"><a href=\"#ConfigurationFile\">Configuration File<\/a>, <a href=\"#CF_Default\">jaxp.properties<\/a> by default<\/td>\n@@ -150,17 +236,0 @@\n- * <h3 id=\"JaxpProperties\">jaxp.properties<\/h3>\n- * {@code jaxp.properties} is a configuration file in standard\n- * {@link java.util.Properties} format and typically located in the {@code conf}\n- * directory of the Java installation. It contains the fully qualified\n- * name of the implementation class with the key being the system property name\n- * defined in <a href=\"#Factories\">the table<\/a> above.\n- * <p>\n- * The {@code jaxp.properties} file is read only once by the implementation and\n- * the values are then cached for future use.  If the file does not exist when\n- * the first attempt is made to read from it, no further attempts\n- * are made to check for its existence. It is not possible to change the value\n- * of any property after it has been read for the first time.\n- *\n- * <h3 id=\"StAXProperties\">stax.properties<\/h3>\n- * {@code stax.properties} is a configuration file that functions the same as\n- * {@code jaxp.properties} except that it is only used by StAX factory lookup.\n- *\n@@ -178,4 +247,1 @@\n- * Use the configuration file <a href=\"#JaxpProperties\">jaxp.properties<\/a> as\n- * indicated in the table <a href=\"#Factories\">JAXP Factories<\/a>. For StAX,\n- * if <a href=\"#StAXProperties\">stax.properties<\/a> exists, the factories will\n- * first attempt to read from it instead of <a href=\"#JaxpProperties\">jaxp.properties<\/a>.\n+ * Use the <a href=\"#ConfigurationFile\">Configuration File<\/a>.\n@@ -238,4 +304,4 @@\n- * naming convention, System Properties, jaxp.properties, scope and order,\n- * and processors to which a property applies. A table listing the implementation\n- * specific features and properties which the implementation currently supports\n- * can be found at the end of this note.\n+ * naming convention, System Properties, scope and order, and processors to which\n+ * a property applies. A table listing the implementation specific features and\n+ * properties that the implementation currently supports can be found at the end\n+ * of this note.\n@@ -274,3 +340,3 @@\n- * <h3>jaxp.properties<\/h3>\n- * A system property can be specified in the <a href=\"#JaxpProperties\">jaxp.properties<\/a>\n- * file to set the behavior for all invocations of the JDK. The format is\n+ * <h3>Configuration File<\/h3>\n+ * A system property can be specified in the <a href=\"#ConfigurationFile\">Configuration File<\/a>\n+ * to set the behavior for all invocations of the JDK. The format is\n@@ -298,1 +364,1 @@\n- * Properties specified in the jaxp.properties file affect all invocations of\n+ * Properties specified in the configuration file affect all invocations of\n@@ -303,2 +369,2 @@\n- * the default settings or those that may have been set in jaxp.properties or\n- * by secure processing.\n+ * the default settings or those that may have been set in the configuration file\n+ * or by secure processing.\n@@ -307,1 +373,1 @@\n- * take preference over system properties, the jaxp.properties file, as well as\n+ * take preference over system properties, the configuration file, as well as\n@@ -439,1 +505,1 @@\n- * <th scope=\"col\" rowspan=\"2\">jaxp.properties <a href=\"#Note3\">[3]<\/a><\/th>\n+ * <th scope=\"col\" rowspan=\"2\">Configuration File <a href=\"#Note3\">[3]<\/a><\/th>\n@@ -675,1 +741,1 @@\n- * <th scope=\"col\" rowspan=\"2\">jaxp.properties <a href=\"#Note3\">[3]<\/a><\/th>\n+ * <th scope=\"col\" rowspan=\"2\">Configuration File <a href=\"#Note3\">[3]<\/a><\/th>\n@@ -790,1 +856,1 @@\n- * <li>Value set in jaxp.properties;<\/li>\n+ * <li>Value set in the configuration file;<\/li>\n","filename":"src\/java.xml\/share\/classes\/module-info.java","additions":114,"deletions":48,"binary":false,"changes":162,"status":"modified"},{"patch":"@@ -0,0 +1,69 @@\n+\/*\n+ * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package common.config;\n+\n+import org.testng.annotations.DataProvider;\n+\n+\/**\n+ * Configuration Test\n+ *\/\n+public class ConfigurationTest {\n+    static final String SP_CONFIG = \"jdk.xml.config.file\";\n+    static final String SP_ENTITY_EXPANSION = \"jdk.xml.entityExpansionLimit\";\n+\n+\n+    static final boolean IS_WINDOWS = System.getProperty(\"os.name\").contains(\"Windows\");\n+    static final String SRC_DIR;\n+    static final String TEST_SOURCE_DIR;\n+    static {\n+        String srcDir = System.getProperty(\"test.src\", \".\");\n+        if (IS_WINDOWS) {\n+            srcDir = srcDir.replace('\\\\', '\/');\n+        }\n+        SRC_DIR = srcDir;\n+        TEST_SOURCE_DIR = srcDir + \"\/files\/\";\n+    }\n+\n+   \/*\n+     * DataProvider for testing the configuration file and system property.\n+     *\n+     * Fields:\n+     *     configuration file, property name, property value\n+     *\/\n+    @DataProvider(name = \"getProperty\")\n+    public Object[][] getProperty() {\n+\n+        return new Object[][]{\n+            {null, SP_ENTITY_EXPANSION, \"64000\"},\n+            {\"jaxp.properties\", SP_ENTITY_EXPANSION, \"1000\"},\n+        };\n+    }\n+\n+    static String getPath(String file) {\n+        String temp = TEST_SOURCE_DIR + file;\n+        if (IS_WINDOWS) {\n+            temp = \"\/\" + temp;\n+        }\n+        return temp;\n+    }\n+}\n","filename":"test\/jaxp\/javax\/xml\/jaxp\/unittest\/common\/config\/ConfigurationTest.java","additions":69,"deletions":0,"binary":false,"changes":69,"status":"added"},{"patch":"@@ -0,0 +1,92 @@\n+\/*\n+ * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package common.config;\n+\n+import static common.config.ConfigurationTest.SP_CONFIG;\n+import static common.config.ConfigurationTest.getPath;\n+import javax.xml.parsers.DocumentBuilder;\n+import javax.xml.parsers.DocumentBuilderFactory;\n+import javax.xml.parsers.ParserConfigurationException;\n+import org.testng.Assert;\n+import org.testng.annotations.DataProvider;\n+import org.testng.annotations.Test;\n+\n+\/**\n+ * @test @bug 8303530\n+ * @library \/javax\/xml\/jaxp\/libs \/javax\/xml\/jaxp\/unittest\n+ * @modules java.xml\/jdk.xml.internal\n+ * @run testng\/othervm common.config.DOMImplTest\n+ * @summary verifies that JAXP configuration file is customizable with a system\n+ * property \"jdk.xml.config.file\".\n+ *\/\n+public class DOMImplTest extends DocumentBuilderFactory {\n+    \/*\n+     * DataProvider for testing the configuration file and system property.\n+     *\n+     * Fields:\n+     *     configuration file, factory implementation class\n+     *\/\n+    @DataProvider(name = \"getImpl\")\n+    public Object[][] getImpl() {\n+\n+        return new Object[][]{\n+            {null, \"com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl\"},\n+            {\"jaxpImpls.properties\", \"common.config.DOMImplTest\"},\n+        };\n+    }\n+\n+    @Test(dataProvider = \"getImpl\")\n+    public void testDOMImpl(String config, String expected) throws Exception {\n+        if (config != null) {\n+            System.setProperty(SP_CONFIG, getPath(config));\n+        }\n+        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();\n+        System.clearProperty(SP_CONFIG);\n+        Assert.assertEquals(dbf.getClass().getName(), expected);\n+    }\n+\n+    @Override\n+    public DocumentBuilder newDocumentBuilder() throws ParserConfigurationException {\n+        return null;\n+    }\n+\n+    @Override\n+    public void setAttribute(String name, Object value) throws IllegalArgumentException {\n+        \/\/ do nothing\n+    }\n+\n+    @Override\n+    public Object getAttribute(String name) throws IllegalArgumentException {\n+        return null;\n+    }\n+\n+    @Override\n+    public void setFeature(String name, boolean value) throws ParserConfigurationException {\n+        \/\/ do nothing\n+    }\n+\n+    @Override\n+    public boolean getFeature(String name) throws ParserConfigurationException {\n+        return false;\n+    }\n+}\n","filename":"test\/jaxp\/javax\/xml\/jaxp\/unittest\/common\/config\/DOMImplTest.java","additions":92,"deletions":0,"binary":false,"changes":92,"status":"added"},{"patch":"@@ -0,0 +1,47 @@\n+\/*\n+ * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package common.config;\n+\n+import javax.xml.parsers.DocumentBuilderFactory;\n+import org.testng.Assert;\n+import org.testng.annotations.Test;\n+\n+\/**\n+ * @test @bug 8303530\n+ * @library \/javax\/xml\/jaxp\/libs \/javax\/xml\/jaxp\/unittest\n+ * @modules java.xml\/jdk.xml.internal\n+ * @run testng\/othervm common.config.DOMPropertyTest\n+ * @summary verifies that JAXP configuration file is customizable with a system\n+ * property \"jdk.xml.config.file\".\n+ *\/\n+public class DOMPropertyTest extends ConfigurationTest {\n+\n+   @Test(dataProvider = \"getProperty\")\n+    public void testProperty(String config, String property, String expected) throws Exception {\n+        if (config != null) {\n+            System.setProperty(SP_CONFIG, getPath(config));\n+        }\n+        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();\n+        Assert.assertEquals(dbf.getAttribute(property), expected);\n+    }\n+}\n","filename":"test\/jaxp\/javax\/xml\/jaxp\/unittest\/common\/config\/DOMPropertyTest.java","additions":47,"deletions":0,"binary":false,"changes":47,"status":"added"},{"patch":"@@ -0,0 +1,205 @@\n+\/*\n+ * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package common.config;\n+\n+import static common.config.ConfigurationTest.getPath;\n+import java.util.Iterator;\n+import javax.xml.namespace.NamespaceContext;\n+import javax.xml.namespace.QName;\n+import javax.xml.stream.Location;\n+import javax.xml.stream.XMLEventFactory;\n+import javax.xml.stream.events.Attribute;\n+import javax.xml.stream.events.Characters;\n+import javax.xml.stream.events.Comment;\n+import javax.xml.stream.events.DTD;\n+import javax.xml.stream.events.EndDocument;\n+import javax.xml.stream.events.EndElement;\n+import javax.xml.stream.events.EntityDeclaration;\n+import javax.xml.stream.events.EntityReference;\n+import javax.xml.stream.events.Namespace;\n+import javax.xml.stream.events.ProcessingInstruction;\n+import javax.xml.stream.events.StartDocument;\n+import javax.xml.stream.events.StartElement;\n+import org.testng.Assert;\n+import org.testng.annotations.DataProvider;\n+import org.testng.annotations.Test;\n+\n+\/**\n+ * @test @bug 8303530\n+ * @library \/javax\/xml\/jaxp\/libs \/javax\/xml\/jaxp\/unittest\n+ * @modules java.xml\/jdk.xml.internal\n+ * @run testng\/othervm common.config.EventFactoryTest\n+ * @summary verifies that JAXP configuration file is customizable with a system\n+ * property \"jdk.xml.config.file\".\n+ *\/\n+public class EventFactoryTest extends XMLEventFactory {\n+   @DataProvider(name = \"getImpl\")\n+    public Object[][] getImpl() {\n+\n+        return new Object[][]{\n+            {null, \"com.sun.xml.internal.stream.events.XMLEventFactoryImpl\"},\n+            {\"jaxpImpls.properties\", \"common.config.EventFactoryTest\"},\n+        };\n+    }\n+\n+    @Test(dataProvider = \"getImpl\")\n+    public void testEventFactory(String config, String expected) throws Exception {\n+        if (config != null) {\n+            System.setProperty(ConfigurationTest.SP_CONFIG, getPath(config));\n+        }\n+\n+        XMLEventFactory ef = XMLEventFactory.newFactory();\n+        System.clearProperty(ConfigurationTest.SP_CONFIG);\n+        Assert.assertEquals(ef.getClass().getName(), expected);\n+    }\n+\n+    @Override\n+    public void setLocation(Location location) {\n+        \/\/ do nothing\n+    }\n+\n+    @Override\n+    public Attribute createAttribute(String prefix, String namespaceURI, String localName, String value) {\n+        return null;\n+    }\n+\n+    @Override\n+    public Attribute createAttribute(String localName, String value) {\n+        return null;\n+    }\n+\n+    @Override\n+    public Attribute createAttribute(QName name, String value) {\n+        return null;\n+    }\n+\n+    @Override\n+    public Namespace createNamespace(String namespaceURI) {\n+        return null;\n+    }\n+\n+    @Override\n+    public Namespace createNamespace(String prefix, String namespaceUri) {\n+        return null;\n+    }\n+\n+    @Override\n+    public StartElement createStartElement(QName name, Iterator<? extends Attribute> attributes, Iterator<? extends Namespace> namespaces) {\n+        return null;\n+    }\n+\n+    @Override\n+    public StartElement createStartElement(String prefix, String namespaceUri, String localName) {\n+        return null;\n+    }\n+\n+    @Override\n+    public StartElement createStartElement(String prefix, String namespaceUri, String localName, Iterator<? extends Attribute> attributes, Iterator<? extends Namespace> namespaces) {\n+        return null;\n+    }\n+\n+    @Override\n+    public StartElement createStartElement(String prefix, String namespaceUri, String localName, Iterator<? extends Attribute> attributes, Iterator<? extends Namespace> namespaces, NamespaceContext context) {\n+        return null;\n+    }\n+\n+    @Override\n+    public EndElement createEndElement(QName name, Iterator<? extends Namespace> namespaces) {\n+        return null;\n+    }\n+\n+    @Override\n+    public EndElement createEndElement(String prefix, String namespaceUri, String localName) {\n+        return null;\n+    }\n+\n+    @Override\n+    public EndElement createEndElement(String prefix, String namespaceUri, String localName, Iterator<? extends Namespace> namespaces) {\n+        return null;\n+    }\n+\n+    @Override\n+    public Characters createCharacters(String content) {\n+        return null;\n+    }\n+\n+    @Override\n+    public Characters createCData(String content) {\n+        return null;\n+    }\n+\n+    @Override\n+    public Characters createSpace(String content) {\n+        return null;\n+    }\n+\n+    @Override\n+    public Characters createIgnorableSpace(String content) {\n+        return null;\n+    }\n+\n+    @Override\n+    public StartDocument createStartDocument() {\n+        return null;\n+    }\n+\n+    @Override\n+    public StartDocument createStartDocument(String encoding, String version, boolean standalone) {\n+        return null;\n+    }\n+\n+    @Override\n+    public StartDocument createStartDocument(String encoding, String version) {\n+        return null;\n+    }\n+\n+    @Override\n+    public StartDocument createStartDocument(String encoding) {\n+        return null;\n+    }\n+\n+    @Override\n+    public EndDocument createEndDocument() {\n+        return null;\n+    }\n+\n+    @Override\n+    public EntityReference createEntityReference(String name, EntityDeclaration declaration) {\n+        return null;\n+    }\n+\n+    @Override\n+    public Comment createComment(String text) {\n+        return null;\n+    }\n+\n+    @Override\n+    public ProcessingInstruction createProcessingInstruction(String target, String data) {\n+        return null;\n+    }\n+\n+    @Override\n+    public DTD createDTD(String dtd) {\n+        return null;\n+    }\n+}\n","filename":"test\/jaxp\/javax\/xml\/jaxp\/unittest\/common\/config\/EventFactoryTest.java","additions":205,"deletions":0,"binary":false,"changes":205,"status":"added"},{"patch":"@@ -0,0 +1,192 @@\n+\/*\n+ * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package common.config;\n+\n+import static common.config.ConfigurationTest.getPath;\n+import java.io.InputStream;\n+import java.io.Reader;\n+import javax.xml.stream.EventFilter;\n+import javax.xml.stream.StreamFilter;\n+import javax.xml.stream.XMLEventReader;\n+import javax.xml.stream.XMLInputFactory;\n+import javax.xml.stream.XMLReporter;\n+import javax.xml.stream.XMLResolver;\n+import javax.xml.stream.XMLStreamException;\n+import javax.xml.stream.XMLStreamReader;\n+import javax.xml.stream.util.XMLEventAllocator;\n+import javax.xml.transform.Source;\n+import org.testng.Assert;\n+import org.testng.annotations.DataProvider;\n+import org.testng.annotations.Test;\n+\n+\/**\n+ * @test @bug 8303530\n+ * @library \/javax\/xml\/jaxp\/libs \/javax\/xml\/jaxp\/unittest\n+ * @modules java.xml\/jdk.xml.internal\n+ * @run testng\/othervm common.config.InputFactoryTest\n+ * @summary verifies that JAXP configuration file is customizable with a system\n+ * property \"jdk.xml.config.file\".\n+ *\/\n+public class InputFactoryTest extends XMLInputFactory {\n+    @DataProvider(name = \"getImpl\")\n+    public Object[][] getImpl() {\n+\n+        return new Object[][]{\n+            {null, \"com.sun.xml.internal.stream.XMLInputFactoryImpl\"},\n+            {\"jaxpImpls.properties\", \"common.config.InputFactoryTest\"},\n+\n+        };\n+    }\n+\n+    @Test(dataProvider = \"getImpl\")\n+    public void testInputFactory(String config, String expected) throws Exception {\n+        if (config != null) {\n+            System.setProperty(ConfigurationTest.SP_CONFIG, getPath(config));\n+        }\n+\n+        XMLInputFactory xif = XMLInputFactory.newFactory();\n+        System.clearProperty(ConfigurationTest.SP_CONFIG);\n+        Assert.assertEquals(xif.getClass().getName(), expected);\n+    }\n+\n+    @Override\n+    public XMLStreamReader createXMLStreamReader(Reader reader) throws XMLStreamException {\n+        return null;\n+    }\n+\n+    @Override\n+    public XMLStreamReader createXMLStreamReader(Source source) throws XMLStreamException {\n+        return null;\n+    }\n+\n+    @Override\n+    public XMLStreamReader createXMLStreamReader(InputStream stream) throws XMLStreamException {\n+        return null;\n+    }\n+\n+    @Override\n+    public XMLStreamReader createXMLStreamReader(InputStream stream, String encoding) throws XMLStreamException {\n+        return null;\n+    }\n+\n+    @Override\n+    public XMLStreamReader createXMLStreamReader(String systemId, InputStream stream) throws XMLStreamException {\n+        return null;\n+    }\n+\n+    @Override\n+    public XMLStreamReader createXMLStreamReader(String systemId, Reader reader) throws XMLStreamException {\n+        return null;\n+    }\n+\n+    @Override\n+    public XMLEventReader createXMLEventReader(Reader reader) throws XMLStreamException {\n+        return null;\n+    }\n+\n+    @Override\n+    public XMLEventReader createXMLEventReader(String systemId, Reader reader) throws XMLStreamException {\n+        return null;\n+    }\n+\n+    @Override\n+    public XMLEventReader createXMLEventReader(XMLStreamReader reader) throws XMLStreamException {\n+        return null;\n+    }\n+\n+    @Override\n+    public XMLEventReader createXMLEventReader(Source source) throws XMLStreamException {\n+        return null;\n+    }\n+\n+    @Override\n+    public XMLEventReader createXMLEventReader(InputStream stream) throws XMLStreamException {\n+        return null;\n+    }\n+\n+    @Override\n+    public XMLEventReader createXMLEventReader(InputStream stream, String encoding) throws XMLStreamException {\n+        return null;\n+    }\n+\n+    @Override\n+    public XMLEventReader createXMLEventReader(String systemId, InputStream stream) throws XMLStreamException {\n+        return null;\n+    }\n+\n+    @Override\n+    public XMLStreamReader createFilteredReader(XMLStreamReader reader, StreamFilter filter) throws XMLStreamException {\n+        return null;\n+    }\n+\n+    @Override\n+    public XMLEventReader createFilteredReader(XMLEventReader reader, EventFilter filter) throws XMLStreamException {\n+        return null;\n+    }\n+\n+    @Override\n+    public XMLResolver getXMLResolver() {\n+        return null;\n+    }\n+\n+    @Override\n+    public void setXMLResolver(XMLResolver resolver) {\n+        \/\/ do nothing\n+    }\n+\n+    @Override\n+    public XMLReporter getXMLReporter() {\n+        return null;\n+    }\n+\n+    @Override\n+    public void setXMLReporter(XMLReporter reporter) {\n+        \/\/ do nothing\n+    }\n+\n+    @Override\n+    public void setProperty(String name, Object value) throws IllegalArgumentException {\n+        \/\/ do nothing\n+    }\n+\n+    @Override\n+    public Object getProperty(String name) throws IllegalArgumentException {\n+        return null;\n+    }\n+\n+    @Override\n+    public boolean isPropertySupported(String name) {\n+        return false;\n+    }\n+\n+    @Override\n+    public void setEventAllocator(XMLEventAllocator allocator) {\n+        \/\/ do nothing\n+    }\n+\n+    @Override\n+    public XMLEventAllocator getEventAllocator() {\n+        return null;\n+    }\n+\n+}\n","filename":"test\/jaxp\/javax\/xml\/jaxp\/unittest\/common\/config\/InputFactoryTest.java","additions":192,"deletions":0,"binary":false,"changes":192,"status":"added"},{"patch":"@@ -0,0 +1,119 @@\n+\/*\n+ * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package common.config;\n+\n+import static common.config.ConfigurationTest.getPath;\n+import java.io.OutputStream;\n+import java.io.Writer;\n+import javax.xml.stream.XMLEventWriter;\n+import javax.xml.stream.XMLOutputFactory;\n+import javax.xml.stream.XMLStreamException;\n+import javax.xml.stream.XMLStreamWriter;\n+import javax.xml.transform.Result;\n+import org.testng.Assert;\n+import org.testng.annotations.DataProvider;\n+import org.testng.annotations.Test;\n+\n+\/**\n+ * @test @bug 8303530\n+ * @library \/javax\/xml\/jaxp\/libs \/javax\/xml\/jaxp\/unittest\n+ * @modules java.xml\/jdk.xml.internal\n+ * @run testng\/othervm common.config.OutputFactoryTest\n+ * @summary verifies that JAXP configuration file is customizable with a system\n+ * property \"jdk.xml.config.file\".\n+ *\/\n+public class OutputFactoryTest extends XMLOutputFactory {\n+    @DataProvider(name = \"getImpl\")\n+    public Object[][] getImpl() {\n+\n+        return new Object[][]{\n+            {null, \"com.sun.xml.internal.stream.XMLOutputFactoryImpl\"},\n+            {\"jaxpImpls.properties\", \"common.config.OutputFactoryTest\"},};\n+    }\n+\n+    @Test(dataProvider = \"getImpl\")\n+    public void testOutputFactory(String config, String expected) throws Exception {\n+        if (config != null) {\n+            System.setProperty(ConfigurationTest.SP_CONFIG, getPath(config));\n+        }\n+\n+        XMLOutputFactory xof = XMLOutputFactory.newFactory();\n+        System.clearProperty(ConfigurationTest.SP_CONFIG);\n+        Assert.assertEquals(xof.getClass().getName(), expected);\n+    }\n+\n+    @Override\n+    public XMLStreamWriter createXMLStreamWriter(Writer stream) throws XMLStreamException {\n+        return null;\n+    }\n+\n+    @Override\n+    public XMLStreamWriter createXMLStreamWriter(OutputStream stream) throws XMLStreamException {\n+        return null;\n+    }\n+\n+    @Override\n+    public XMLStreamWriter createXMLStreamWriter(OutputStream stream, String encoding) throws XMLStreamException {\n+        return null;\n+    }\n+\n+    @Override\n+    public XMLStreamWriter createXMLStreamWriter(Result result) throws XMLStreamException {\n+        return null;\n+    }\n+\n+    @Override\n+    public XMLEventWriter createXMLEventWriter(Result result) throws XMLStreamException {\n+        return null;\n+    }\n+\n+    @Override\n+    public XMLEventWriter createXMLEventWriter(OutputStream stream) throws XMLStreamException {\n+        return null;\n+    }\n+\n+    @Override\n+    public XMLEventWriter createXMLEventWriter(OutputStream stream, String encoding) throws XMLStreamException {\n+        return null;\n+    }\n+\n+    @Override\n+    public XMLEventWriter createXMLEventWriter(Writer stream) throws XMLStreamException {\n+        return null;\n+    }\n+\n+    @Override\n+    public void setProperty(String name, Object value) throws IllegalArgumentException {\n+        \/\/ do nothing\n+    }\n+\n+    @Override\n+    public Object getProperty(String name) throws IllegalArgumentException {\n+        return null;\n+    }\n+\n+    @Override\n+    public boolean isPropertySupported(String name) {\n+        return false;\n+    }\n+}\n","filename":"test\/jaxp\/javax\/xml\/jaxp\/unittest\/common\/config\/OutputFactoryTest.java","additions":119,"deletions":0,"binary":false,"changes":119,"status":"added"},{"patch":"@@ -0,0 +1,79 @@\n+\/*\n+ * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package common.config;\n+\n+import static common.config.ConfigurationTest.getPath;\n+import javax.xml.parsers.ParserConfigurationException;\n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+import org.testng.Assert;\n+import org.testng.annotations.DataProvider;\n+import org.testng.annotations.Test;\n+import org.xml.sax.SAXException;\n+import org.xml.sax.SAXNotRecognizedException;\n+import org.xml.sax.SAXNotSupportedException;\n+\n+\/**\n+ * @test @bug 8303530\n+ * @library \/javax\/xml\/jaxp\/libs \/javax\/xml\/jaxp\/unittest\n+ * @modules java.xml\/jdk.xml.internal\n+ * @run testng\/othervm common.config.SAXImplTest\n+ * @summary verifies that JAXP configuration file is customizable with a system\n+ * property \"jdk.xml.config.file\".\n+ *\/\n+public class SAXImplTest extends SAXParserFactory {\n+    @DataProvider(name = \"getImpl\")\n+    public Object[][] getImpl() {\n+\n+        return new Object[][]{\n+            {null, \"com.sun.org.apache.xerces.internal.jaxp.SAXParserFactoryImpl\"},\n+            {\"jaxpImpls.properties\", \"common.config.SAXImplTest\"},};\n+    }\n+\n+    @Test(dataProvider = \"getImpl\")\n+    public void testSAXImpl(String config, String expected) throws Exception {\n+        if (config != null) {\n+            System.setProperty(ConfigurationTest.SP_CONFIG, getPath(config));\n+        }\n+        SAXParserFactory spf = SAXParserFactory.newInstance();\n+        System.clearProperty(ConfigurationTest.SP_CONFIG);\n+        Assert.assertEquals(spf.getClass().getName(), expected);\n+    }\n+\n+    @Override\n+    public SAXParser newSAXParser() throws ParserConfigurationException, SAXException {\n+        return null;\n+    }\n+\n+    @Override\n+    public void setFeature(String name, boolean value)\n+            throws ParserConfigurationException, SAXNotRecognizedException, SAXNotSupportedException {\n+        \/\/\n+    }\n+\n+    @Override\n+    public boolean getFeature(String name)\n+            throws ParserConfigurationException, SAXNotRecognizedException, SAXNotSupportedException {\n+        return false;\n+    }\n+}\n","filename":"test\/jaxp\/javax\/xml\/jaxp\/unittest\/common\/config\/SAXImplTest.java","additions":79,"deletions":0,"binary":false,"changes":79,"status":"added"},{"patch":"@@ -0,0 +1,52 @@\n+\/*\n+ * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package common.config;\n+\n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+import org.testng.Assert;\n+import org.testng.annotations.Test;\n+import org.xml.sax.XMLReader;\n+\n+\/**\n+ * @test @bug 8303530\n+ * @library \/javax\/xml\/jaxp\/libs \/javax\/xml\/jaxp\/unittest\n+ * @modules java.xml\/jdk.xml.internal\n+ * @run testng\/othervm common.config.SAXPropertyTest\n+ * @summary verifies that JAXP configuration file is customizable with a system\n+ * property \"jdk.xml.config.file\".\n+ *\/\n+public class SAXPropertyTest extends ConfigurationTest {\n+    @Test(dataProvider = \"getProperty\")\n+    public void testProperty(String config, String property, String expected) throws Exception {\n+        if (config != null) {\n+            System.setProperty(ConfigurationTest.SP_CONFIG, getPath(config));\n+        }\n+        SAXParserFactory spf = SAXParserFactory.newInstance();\n+        SAXParser sp = spf.newSAXParser();\n+        System.clearProperty(ConfigurationTest.SP_CONFIG);\n+        Assert.assertEquals(sp.getProperty(property), expected);\n+        XMLReader reader = sp.getXMLReader();\n+        Assert.assertEquals(reader.getProperty(property), expected);\n+    }\n+}\n","filename":"test\/jaxp\/javax\/xml\/jaxp\/unittest\/common\/config\/SAXPropertyTest.java","additions":52,"deletions":0,"binary":false,"changes":52,"status":"added"},{"patch":"@@ -0,0 +1,101 @@\n+\/*\n+ * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package common.config;\n+\n+import static common.config.ConfigurationTest.getPath;\n+import javax.xml.XMLConstants;\n+import javax.xml.transform.Source;\n+import javax.xml.validation.Schema;\n+import javax.xml.validation.SchemaFactory;\n+import org.testng.Assert;\n+import org.testng.annotations.DataProvider;\n+import org.testng.annotations.Test;\n+import org.w3c.dom.ls.LSResourceResolver;\n+import org.xml.sax.ErrorHandler;\n+import org.xml.sax.SAXException;\n+\n+\/**\n+ * @test @bug 8303530\n+ * @library \/javax\/xml\/jaxp\/libs \/javax\/xml\/jaxp\/unittest\n+ * @modules java.xml\/jdk.xml.internal\n+ * @run testng\/othervm common.config.SchemaFactoryTest\n+ * @summary verifies that JAXP configuration file is customizable with a system\n+ * property \"jdk.xml.config.file\".\n+ *\/\n+public class SchemaFactoryTest extends SchemaFactory {\n+    @DataProvider(name = \"getImpl\")\n+    public Object[][] getImpl() {\n+\n+        return new Object[][]{\n+            {null, \"com.sun.org.apache.xerces.internal.jaxp.validation.XMLSchemaFactory\"},\n+            {\"jaxpImpls.properties\", \"common.config.SchemaFactoryTest\"},\n+\n+        };\n+    }\n+\n+    @Test(dataProvider = \"getImpl\")\n+    public void testFactory(String config, String expected) throws Exception {\n+        if (config != null) {\n+            System.setProperty(ConfigurationTest.SP_CONFIG, getPath(config));\n+        }\n+\n+        SchemaFactory sf = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);\n+        System.clearProperty(ConfigurationTest.SP_CONFIG);\n+        Assert.assertEquals(sf.getClass().getName(), expected);\n+    }\n+\n+    @Override\n+    public boolean isSchemaLanguageSupported(String schemaLanguage) {\n+        return false;\n+    }\n+\n+    @Override\n+    public void setErrorHandler(ErrorHandler errorHandler) {\n+        \/\/ do nothing\n+    }\n+\n+    @Override\n+    public ErrorHandler getErrorHandler() {\n+        return null;\n+    }\n+\n+    @Override\n+    public void setResourceResolver(LSResourceResolver resourceResolver) {\n+        \/\/ do nothing\n+    }\n+\n+    @Override\n+    public LSResourceResolver getResourceResolver() {\n+        return null;\n+    }\n+\n+    @Override\n+    public Schema newSchema(Source[] schemas) throws SAXException {\n+        return null;\n+    }\n+\n+    @Override\n+    public Schema newSchema() throws SAXException {\n+        return null;\n+    }\n+}\n","filename":"test\/jaxp\/javax\/xml\/jaxp\/unittest\/common\/config\/SchemaFactoryTest.java","additions":101,"deletions":0,"binary":false,"changes":101,"status":"added"},{"patch":"@@ -0,0 +1,49 @@\n+\/*\n+ * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package common.config;\n+\n+import javax.xml.XMLConstants;\n+import javax.xml.validation.SchemaFactory;\n+import org.testng.Assert;\n+import org.testng.annotations.Test;\n+\n+\/**\n+ * @test @bug 8303530\n+ * @library \/javax\/xml\/jaxp\/libs \/javax\/xml\/jaxp\/unittest\n+ * @modules java.xml\/jdk.xml.internal\n+ * @run testng\/othervm common.config.SchemaPropertyTest\n+ * @summary verifies that JAXP configuration file is customizable with a system\n+ * property \"jdk.xml.config.file\".\n+ *\/\n+public class SchemaPropertyTest extends ConfigurationTest {\n+    @Test(dataProvider = \"getProperty\")\n+    public void testProperty(String config, String property, String expected) throws Exception {\n+        if (config != null) {\n+            System.setProperty(ConfigurationTest.SP_CONFIG, getPath(config));\n+        }\n+\n+        SchemaFactory sf = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);\n+        System.clearProperty(ConfigurationTest.SP_CONFIG);\n+        Assert.assertEquals(sf.getProperty(property), expected);\n+    }\n+}\n","filename":"test\/jaxp\/javax\/xml\/jaxp\/unittest\/common\/config\/SchemaPropertyTest.java","additions":49,"deletions":0,"binary":false,"changes":49,"status":"added"},{"patch":"@@ -0,0 +1,47 @@\n+\/*\n+ * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package common.config;\n+\n+import javax.xml.stream.XMLInputFactory;\n+import org.testng.Assert;\n+import org.testng.annotations.Test;\n+\n+\/**\n+ * @test @bug 8303530\n+ * @library \/javax\/xml\/jaxp\/libs \/javax\/xml\/jaxp\/unittest\n+ * @modules java.xml\/jdk.xml.internal\n+ * @run testng\/othervm common.config.StAXPropertyTest\n+ * @summary verifies that JAXP configuration file is customizable with a system\n+ * property \"jdk.xml.config.file\".\n+ *\/\n+public class StAXPropertyTest extends ConfigurationTest {\n+    @Test(dataProvider = \"getProperty\")\n+    public void testProperty(String config, String property, String expected) throws Exception {\n+        if (config != null) {\n+            System.setProperty(ConfigurationTest.SP_CONFIG, getPath(config));\n+        }\n+        XMLInputFactory xif = XMLInputFactory.newFactory();\n+        System.clearProperty(ConfigurationTest.SP_CONFIG);\n+        Assert.assertEquals(xif.getProperty(property), expected);\n+    }\n+}\n","filename":"test\/jaxp\/javax\/xml\/jaxp\/unittest\/common\/config\/StAXPropertyTest.java","additions":47,"deletions":0,"binary":false,"changes":47,"status":"added"},{"patch":"@@ -0,0 +1,127 @@\n+\/*\n+ * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package common.config;\n+\n+import static common.config.ConfigurationTest.getPath;\n+import javax.xml.transform.ErrorListener;\n+import javax.xml.transform.Source;\n+import javax.xml.transform.Templates;\n+import javax.xml.transform.Transformer;\n+import javax.xml.transform.TransformerConfigurationException;\n+import javax.xml.transform.TransformerFactory;\n+import javax.xml.transform.URIResolver;\n+import org.testng.Assert;\n+import org.testng.annotations.DataProvider;\n+import org.testng.annotations.Test;\n+\n+\/**\n+ * @test @bug 8303530\n+ * @library \/javax\/xml\/jaxp\/libs \/javax\/xml\/jaxp\/unittest\n+ * @modules java.xml\/jdk.xml.internal\n+ * @run testng\/othervm common.config.TransformerFactoryTest\n+ * @summary verifies that JAXP configuration file is customizable with a system\n+ * property \"jdk.xml.config.file\".\n+ *\/\n+public class TransformerFactoryTest extends TransformerFactory {\n+    @DataProvider(name = \"getImpl\")\n+    public Object[][] getImpl() {\n+\n+        return new Object[][]{\n+            {null, \"com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl\"},\n+            {\"jaxpImpls.properties\", \"common.config.TransformerFactoryTest\"},\n+\n+        };\n+    }\n+\n+    @Test(dataProvider = \"getImpl\")\n+    public void testFactory(String config, String expected) throws Exception {\n+        if (config != null) {\n+            System.setProperty(ConfigurationTest.SP_CONFIG, getPath(config));\n+        }\n+\n+        TransformerFactory tf = TransformerFactory.newInstance();\n+        System.clearProperty(ConfigurationTest.SP_CONFIG);\n+        Assert.assertEquals(tf.getClass().getName(), expected);\n+    }\n+\n+    @Override\n+    public Transformer newTransformer(Source source) throws TransformerConfigurationException {\n+        return null;\n+    }\n+\n+    @Override\n+    public Transformer newTransformer() throws TransformerConfigurationException {\n+        return null;\n+    }\n+\n+    @Override\n+    public Templates newTemplates(Source source) throws TransformerConfigurationException {\n+        return null;\n+    }\n+\n+    @Override\n+    public Source getAssociatedStylesheet(Source source, String media, String title, String charset) throws TransformerConfigurationException {\n+        return null;\n+    }\n+\n+    @Override\n+    public void setURIResolver(URIResolver resolver) {\n+        \/\/ do nothing\n+    }\n+\n+    @Override\n+    public URIResolver getURIResolver() {\n+        return null;\n+    }\n+\n+    @Override\n+    public void setFeature(String name, boolean value) throws TransformerConfigurationException {\n+        \/\/ do nothing\n+    }\n+\n+    @Override\n+    public boolean getFeature(String name) {\n+        return false;\n+    }\n+\n+    @Override\n+    public void setAttribute(String name, Object value) {\n+        \/\/ do nothing\n+    }\n+\n+    @Override\n+    public Object getAttribute(String name) {\n+        return null;\n+    }\n+\n+    @Override\n+    public void setErrorListener(ErrorListener listener) {\n+        \/\/ do nothing\n+    }\n+\n+    @Override\n+    public ErrorListener getErrorListener() {\n+        return null;\n+    }\n+\n+}\n","filename":"test\/jaxp\/javax\/xml\/jaxp\/unittest\/common\/config\/TransformerFactoryTest.java","additions":127,"deletions":0,"binary":false,"changes":127,"status":"added"},{"patch":"@@ -0,0 +1,47 @@\n+\/*\n+ * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package common.config;\n+\n+import javax.xml.transform.TransformerFactory;\n+import org.testng.Assert;\n+import org.testng.annotations.Test;\n+\n+\/**\n+ * @test @bug 8303530\n+ * @library \/javax\/xml\/jaxp\/libs \/javax\/xml\/jaxp\/unittest\n+ * @modules java.xml\/jdk.xml.internal\n+ * @run testng\/othervm common.config.TransformerPropertyTest\n+ * @summary verifies that JAXP configuration file is customizable with a system\n+ * property \"jdk.xml.config.file\".\n+ *\/\n+public class TransformerPropertyTest extends ConfigurationTest {\n+    @Test(dataProvider = \"getProperty\")\n+    public void testProperty(String config, String property, String expected) throws Exception {\n+        if (config != null) {\n+            System.setProperty(ConfigurationTest.SP_CONFIG, getPath(config));\n+        }\n+        TransformerFactory tf = TransformerFactory.newInstance();\n+        System.clearProperty(ConfigurationTest.SP_CONFIG);\n+        Assert.assertEquals(tf.getAttribute(property), expected);\n+    }\n+}\n","filename":"test\/jaxp\/javax\/xml\/jaxp\/unittest\/common\/config\/TransformerPropertyTest.java","additions":47,"deletions":0,"binary":false,"changes":47,"status":"added"},{"patch":"@@ -0,0 +1,95 @@\n+\/*\n+ * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package common.config;\n+\n+import static common.config.ConfigurationTest.getPath;\n+import javax.xml.xpath.XPath;\n+import javax.xml.xpath.XPathFactory;\n+import javax.xml.xpath.XPathFactoryConfigurationException;\n+import javax.xml.xpath.XPathFunctionResolver;\n+import javax.xml.xpath.XPathVariableResolver;\n+import org.testng.Assert;\n+import org.testng.annotations.DataProvider;\n+import org.testng.annotations.Test;\n+\n+\/**\n+ * @test @bug 8303530\n+ * @library \/javax\/xml\/jaxp\/libs \/javax\/xml\/jaxp\/unittest\n+ * @modules java.xml\/jdk.xml.internal\n+ * @run testng\/othervm common.config.XPathFactoryTest\n+ * @summary verifies that JAXP configuration file is customizable with a system\n+ * property \"jdk.xml.config.file\".\n+ *\/\n+public class XPathFactoryTest extends XPathFactory {\n+    @DataProvider(name = \"getImpl\")\n+    public Object[][] getImpl() {\n+\n+        return new Object[][]{\n+            {null, \"com.sun.org.apache.xpath.internal.jaxp.XPathFactoryImpl\"},\n+            {\"jaxpImpls.properties\", \"common.config.XPathFactoryTest\"},\n+\n+        };\n+    }\n+\n+    @Test(dataProvider = \"getImpl\")\n+    public void testFactory(String config, String expected) throws Exception {\n+        if (config != null) {\n+            System.setProperty(ConfigurationTest.SP_CONFIG, getPath(config));\n+        }\n+\n+        XPathFactory xf = XPathFactory.newInstance();\n+        System.clearProperty(ConfigurationTest.SP_CONFIG);\n+        Assert.assertEquals(xf.getClass().getName(), expected);\n+    }\n+\n+    @Override\n+    public boolean isObjectModelSupported(String objectModel) {\n+        return false;\n+    }\n+\n+    @Override\n+    public void setFeature(String name, boolean value) throws XPathFactoryConfigurationException {\n+        \/\/ do nothing\n+    }\n+\n+    @Override\n+    public boolean getFeature(String name) throws XPathFactoryConfigurationException {\n+        return false;\n+    }\n+\n+    @Override\n+    public void setXPathVariableResolver(XPathVariableResolver resolver) {\n+        \/\/ do nothing\n+    }\n+\n+    @Override\n+    public void setXPathFunctionResolver(XPathFunctionResolver resolver) {\n+        \/\/ do nothing\n+    }\n+\n+    @Override\n+    public XPath newXPath() {\n+        return null;\n+    }\n+\n+}\n","filename":"test\/jaxp\/javax\/xml\/jaxp\/unittest\/common\/config\/XPathFactoryTest.java","additions":95,"deletions":0,"binary":false,"changes":95,"status":"added"},{"patch":"@@ -0,0 +1,63 @@\n+\/*\n+ * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package common.config;\n+\n+import javax.xml.xpath.XPathFactory;\n+import org.testng.Assert;\n+import org.testng.annotations.DataProvider;\n+import org.testng.annotations.Test;\n+\n+\/**\n+ * @test @bug 8303530\n+ * @library \/javax\/xml\/jaxp\/libs \/javax\/xml\/jaxp\/unittest\n+ * @modules java.xml\/jdk.xml.internal\n+ * @run testng\/othervm common.config.XPathPropertyTest\n+ * @summary verifies that JAXP configuration file is customizable with a system\n+ * property \"jdk.xml.config.file\".\n+ *\/\n+public class XPathPropertyTest extends ConfigurationTest {\n+   \/*\n+     * DataProvider for testing the configuration file and system property.\n+     *\n+     * Fields:\n+     *     configuration file, property name, property value\n+     *\/\n+    @DataProvider(name = \"getProperty\")\n+    public Object[][] getProperty() {\n+\n+        return new Object[][]{\n+            {null, \"jdk.xml.xpathExprOpLimit\", \"100\"},\n+            {\"jaxp.properties\", \"jdk.xml.xpathExprOpLimit\", \"200\"},\n+        };\n+    }\n+\n+    @Test(dataProvider = \"getProperty\")\n+    public void testProperty(String config, String property, String expected) throws Exception {\n+        if (config != null) {\n+            System.setProperty(ConfigurationTest.SP_CONFIG, getPath(config));\n+        }\n+        XPathFactory xf = XPathFactory.newInstance();\n+        System.clearProperty(ConfigurationTest.SP_CONFIG);\n+        Assert.assertEquals(xf.getProperty(property), expected);\n+    }\n+}\n","filename":"test\/jaxp\/javax\/xml\/jaxp\/unittest\/common\/config\/XPathPropertyTest.java","additions":63,"deletions":0,"binary":false,"changes":63,"status":"added"},{"patch":"@@ -0,0 +1,37 @@\n+################################################################################\n+#       XML Library (java.xml) Configuration File\n+#\n+# This file is in java.util.Properties format and typically located in the conf \n+# directory of the Java installation. It may contain key\/value pairs for specifying\n+# the implementation class of a factory and\/or properties that have corresponding\n+# system properties. \n+#\n+# This file can be replaced by specifying a filename with the jdk.xml.config.file \n+# system property. For example java -Djdk.xml.config.file=myfile \n+################################################################################\n+\n+# ---- Configuration for test ----\n+#\n+# Disable Extension Functions\n+jdk.xml.enableExtensionFunctions=false\n+# Disallow overriding the default parser\n+jdk.xml.overrideDefaultParser=false\n+#\n+# Implementation specific limits:\n+jdk.xml.entityExpansionLimit=1000\n+jdk.xml.totalEntitySizeLimit=100000\n+jdk.xml.maxGeneralEntitySizeLimit=1024\n+jdk.xml.maxParameterEntitySizeLimit=1024\n+jdk.xml.entityReplacementLimit=10000\n+#\n+# General XML limits\n+jdk.xml.elementAttributeLimit=100\n+jdk.xml.maxOccurLimit=5000\n+jdk.xml.maxElementDepth=0\n+jdk.xml.maxXMLNameLimit=1000\n+#\n+# XPath Limits\n+jdk.xml.xpathExprGrpLimit=10\n+jdk.xml.xpathExprOpLimit=200\n+jdk.xml.xpathTotalOpLimit=10000\n+\n","filename":"test\/jaxp\/javax\/xml\/jaxp\/unittest\/common\/config\/files\/jaxp.properties","additions":37,"deletions":0,"binary":false,"changes":37,"status":"added"},{"patch":"@@ -0,0 +1,48 @@\n+################################################################################\n+#       XML Library (java.xml) Configuration File\n+#\n+# This file is in java.util.Properties format and typically located in the conf \n+# directory of the Java installation. It may contain key\/value pairs for specifying\n+# the implementation class of a factory and\/or properties that have corresponding\n+# system properties. \n+#\n+# This file can be replaced by specifying a filename with the jdk.xml.config.file \n+# system property. For example java -Djdk.xml.config.file=myfile \n+################################################################################\n+\n+# ---- Configuration for test ----\n+# \n+# Factory implementation class\n+javax.xml.parsers.DocumentBuilderFactory=common.config.DOMImplTest\n+javax.xml.parsers.SAXParserFactory=common.config.SAXImplTest\n+javax.xml.stream.XMLEventFactory=common.config.EventFactoryTest\n+javax.xml.stream.XMLInputFactory=common.config.InputFactoryTest\n+javax.xml.stream.XMLOutputFactory=common.config.OutputFactoryTest\n+javax.xml.transform.TransformerFactory=common.config.TransformerFactoryTest\n+javax.xml.validation.SchemaFactory\\:http\\:\/\/www.w3.org\/2001\/XMLSchema=common.config.SchemaFactoryTest\n+javax.xml.xpath.XPathFactory\\:http\\:\/\/java.sun.com\/jaxp\/xpath\/dom=common.config.XPathFactoryTest\n+#\n+# Disable Extension Functions\n+jdk.xml.enableExtensionFunctions=false\n+# Disallow overriding the default parser\n+jdk.xml.overrideDefaultParser=false\n+#\n+# Implementation specific limits:\n+#\n+jdk.xml.entityExpansionLimit=1000\n+jdk.xml.totalEntitySizeLimit=100000\n+jdk.xml.maxGeneralEntitySizeLimit=1024\n+jdk.xml.maxParameterEntitySizeLimit=1024\n+jdk.xml.entityReplacementLimit=10000\n+#\n+# General XML limits\n+jdk.xml.elementAttributeLimit=100\n+jdk.xml.maxOccurLimit=5000\n+jdk.xml.maxElementDepth=0\n+jdk.xml.maxXMLNameLimit=1000\n+#\n+# XPath Limits\n+jdk.xml.xpathExprGrpLimit=10\n+jdk.xml.xpathExprOpLimit=100\n+jdk.xml.xpathTotalOpLimit=10000\n+\n","filename":"test\/jaxp\/javax\/xml\/jaxp\/unittest\/common\/config\/files\/jaxpImpls.properties","additions":48,"deletions":0,"binary":false,"changes":48,"status":"added"}]}