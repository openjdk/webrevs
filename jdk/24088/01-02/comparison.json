{"files":[{"patch":"@@ -352,10 +352,1 @@\n-  Thread* current_thread = Thread::current();\n-\n-  \/\/ The current thread must not belong to the SuspendibleThreadSet, because an\n-  \/\/ on-the-fly safepoint can be waiting for the current thread, and the\n-  \/\/ current thread will be blocked in VMThread::execute, resulting in\n-  \/\/ deadlock.\n-  assert(!current_thread->is_suspendible_thread(), \"precondition\");\n-  assert(!current_thread->is_indirectly_suspendible_thread(), \"precondition\");\n-\n-  HandshakeOperation cto(hs_cl, nullptr, current_thread);\n+  HandshakeOperation cto(hs_cl, nullptr, Thread::current());\n","filename":"src\/hotspot\/share\/runtime\/handshake.cpp","additions":1,"deletions":10,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -530,0 +530,7 @@\n+  \/\/ The current thread must not belong to the SuspendibleThreadSet, because an\n+  \/\/ on-the-fly safepoint can be waiting for the current thread, and the\n+  \/\/ current thread will be blocked in wait_until_executed, resulting in\n+  \/\/ deadlock.\n+  assert(!t->is_suspendible_thread(), \"precondition\");\n+  assert(!t->is_indirectly_suspendible_thread(), \"precondition\");\n+\n","filename":"src\/hotspot\/share\/runtime\/vmThread.cpp","additions":7,"deletions":0,"binary":false,"changes":7,"status":"modified"}]}