{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2023, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -47,0 +47,7 @@\n+    public void ensureReadyAndWaiting(Thread vt, Thread.State expState, ReentrantLock rlock) {\n+        \/\/ wait while the thread is not ready or thread state is unexpected\n+        while (!threadReady || (vt.getState() != expState) || !rlock.hasQueuedThreads()) {\n+            sleep(1);\n+        }\n+    }\n+\n@@ -100,1 +107,1 @@\n-        task.ensureReady(vt, expState);\n+        task.ensureReadyAndWaiting(vt, expState, reentrantLock);\n","filename":"test\/hotspot\/jtreg\/serviceability\/jvmti\/vthread\/ThreadListStackTracesTest\/ThreadListStackTracesTest.java","additions":9,"deletions":2,"binary":false,"changes":11,"status":"modified"}]}