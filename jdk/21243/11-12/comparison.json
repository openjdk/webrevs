{"files":[{"patch":"@@ -341,2 +341,3 @@\n-                StackMapGenerator gen = StackMapGenerator.of(DirectCodeBuilder.this, buf);\n-                attributes.withAttribute(gen.stackMapTableAttribute());\n+                var dcb = DirectCodeBuilder.this;\n+                StackMapGenerator gen = StackMapGenerator.of(dcb, buf);\n+                dcb.attributes.withAttribute(gen.stackMapTableAttribute());\n@@ -365,1 +366,2 @@\n-                buf.setLabelContext(DirectCodeBuilder.this);\n+                DirectCodeBuilder dcb = DirectCodeBuilder.this;\n+                buf.setLabelContext(dcb);\n@@ -372,2 +374,2 @@\n-                            methodInfo.methodName().stringValue(),\n-                            methodInfo.methodTypeSymbol().displayDescriptor()));\n+                            dcb.methodInfo.methodName().stringValue(),\n+                            dcb.methodInfo.methodTypeSymbol().displayDescriptor()));\n@@ -376,1 +378,2 @@\n-                if (codeAndExceptionsMatch(codeLength)) {\n+                var context = dcb.context;\n+                if (dcb.original != null && codeAndExceptionsMatch(codeLength)) {\n@@ -378,1 +381,1 @@\n-                        attributes.withAttribute(original.findAttribute(Attributes.stackMapTable()).orElse(null));\n+                        dcb.attributes.withAttribute(dcb.original.findAttribute(Attributes.stackMapTable()).orElse(null));\n@@ -396,3 +399,3 @@\n-                buf.writeBytes(bytecodesBufWriter);\n-                writeExceptionHandlers(buf);\n-                attributes.writeTo(buf);\n+                buf.writeBytes(dcb.bytecodesBufWriter);\n+                dcb.writeExceptionHandlers(buf);\n+                dcb.attributes.writeTo(buf);\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/classfile\/impl\/DirectCodeBuilder.java","additions":13,"deletions":10,"binary":false,"changes":23,"status":"modified"}]}