{"files":[{"patch":"@@ -763,2 +763,3 @@\n-    int limit = 3;\n-    do {\n+    int trials_remaining = 4;\n+    useconds_t next_delay = 1000;\n+    while (true) {\n@@ -766,1 +767,13 @@\n-    } while (ret == EAGAIN && limit-- > 0);\n+\n+      if (ret != EAGAIN) {\n+        break;\n+      }\n+\n+      if (--trials_remaining <= 0) {\n+        break;\n+      }\n+\n+      log_debug(os, thread)(\"Failed to start native thread (%s), retrying after %dus.\", os::errno_name(ret), next_delay);\n+      ::usleep(next_delay);\n+      next_delay *= 2;\n+    }\n","filename":"src\/hotspot\/os\/aix\/os_aix.cpp","additions":16,"deletions":3,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -646,2 +646,3 @@\n-    int limit = 3;\n-    do {\n+    int trials_remaining = 4;\n+    useconds_t next_delay = 1000;\n+    while (true) {\n@@ -649,1 +650,13 @@\n-    } while (ret == EAGAIN && limit-- > 0);\n+\n+      if (ret != EAGAIN) {\n+        break;\n+      }\n+\n+      if (--trials_remaining <= 0) {\n+        break;\n+      }\n+\n+      log_debug(os, thread)(\"Failed to start native thread (%s), retrying after %dus.\", os::errno_name(ret), next_delay);\n+      ::usleep(next_delay);\n+      next_delay *= 2;\n+    }\n","filename":"src\/hotspot\/os\/bsd\/os_bsd.cpp","additions":16,"deletions":3,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -1059,2 +1059,3 @@\n-    int limit = 3;\n-    do {\n+    int trials_remaining = 4;\n+    useconds_t next_delay = 1000;\n+    while (true) {\n@@ -1062,1 +1063,13 @@\n-    } while (ret == EAGAIN && limit-- > 0);\n+\n+      if (ret != EAGAIN) {\n+        break;\n+      }\n+\n+      if (--trials_remaining <= 0) {\n+        break;\n+      }\n+\n+      log_debug(os, thread)(\"Failed to start native thread (%s), retrying after %dus.\", os::errno_name(ret), next_delay);\n+      ::usleep(next_delay);\n+      next_delay *= 2;\n+    }\n","filename":"src\/hotspot\/os\/linux\/os_linux.cpp","additions":16,"deletions":3,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -760,2 +760,3 @@\n-  int limit = 3;\n-  do {\n+  int trials_remaining = 4;\n+  DWORD next_delay_ms = 1;\n+  while (true) {\n@@ -769,1 +770,17 @@\n-  } while (thread_handle == nullptr && errno == EAGAIN && limit-- > 0);\n+\n+    if (thread_handle != nullptr) {\n+      break;\n+    }\n+\n+    if (errno != EAGAIN) {\n+      break;\n+    }\n+\n+    if (--trials_remaining <= 0) {\n+      break;\n+    }\n+\n+    log_debug(os, thread)(\"Failed to start native thread (%s), retrying after %dms.\", os::errno_name(errno), next_delay_ms);\n+    Sleep(next_delay_ms);\n+    next_delay_ms *= 2;\n+  }\n","filename":"src\/hotspot\/os\/windows\/os_windows.cpp","additions":20,"deletions":3,"binary":false,"changes":23,"status":"modified"}]}