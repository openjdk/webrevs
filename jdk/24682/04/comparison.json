{"files":[{"patch":"@@ -764,2 +764,3 @@\n-    int limit = 3;\n-    do {\n+    int trials_remaining = 3;\n+    useconds_t next_delay = 1000;\n+    while (true) {\n@@ -767,1 +768,13 @@\n-    } while (ret == EAGAIN && limit-- > 0);\n+\n+      if (ret != EAGAIN) {\n+        break;\n+      }\n+\n+      if (trials_remaining-- <= 0) {\n+        break;\n+      }\n+\n+      log_debug(os, thread)(\"Failed to start native thread (%s), retrying after %dus.\", os::errno_name(ret), next_delay);\n+      ::usleep(next_delay);\n+      next_delay *= 2;\n+    }\n","filename":"src\/hotspot\/os\/aix\/os_aix.cpp","additions":16,"deletions":3,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -647,2 +647,3 @@\n-    int limit = 3;\n-    do {\n+    int trials_remaining = 3;\n+    useconds_t next_delay = 1000;\n+    while (true) {\n@@ -650,1 +651,13 @@\n-    } while (ret == EAGAIN && limit-- > 0);\n+\n+      if (ret != EAGAIN) {\n+        break;\n+      }\n+\n+      if (trials_remaining-- <= 0) {\n+        break;\n+      }\n+\n+      log_debug(os, thread)(\"Failed to start native thread (%s), retrying after %dus.\", os::errno_name(ret), next_delay);\n+      ::usleep(next_delay);\n+      next_delay *= 2;\n+    }\n","filename":"src\/hotspot\/os\/bsd\/os_bsd.cpp","additions":16,"deletions":3,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -1060,2 +1060,3 @@\n-    int limit = 3;\n-    do {\n+    int trials_remaining = 3;\n+    useconds_t next_delay = 1000;\n+    while (true) {\n@@ -1063,1 +1064,13 @@\n-    } while (ret == EAGAIN && limit-- > 0);\n+\n+      if (ret != EAGAIN) {\n+        break;\n+      }\n+\n+      if (trials_remaining-- <= 0) {\n+        break;\n+      }\n+\n+      log_debug(os, thread)(\"Failed to start native thread (%s), retrying after %dus.\", os::errno_name(ret), next_delay);\n+      ::usleep(next_delay);\n+      next_delay *= 2;\n+    }\n","filename":"src\/hotspot\/os\/linux\/os_linux.cpp","additions":16,"deletions":3,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -761,2 +761,3 @@\n-  int limit = 3;\n-  do {\n+  int trials_remaining = 3;\n+  DWORD next_delay_ms = 1;\n+  while (true) {\n@@ -770,1 +771,17 @@\n-  } while (thread_handle == nullptr && errno == EAGAIN && limit-- > 0);\n+\n+    if (thread_handle != nullptr) {\n+      break;\n+    }\n+\n+    if (errno != EAGAIN) {\n+      break;\n+    }\n+\n+    if (trials_remaining-- <= 0) {\n+      break;\n+    }\n+\n+    log_debug(os, thread)(\"Failed to start native thread (%s), retrying after %dms.\", os::errno_name(errno), next_delay_ms);\n+    Sleep(next_delay_ms);\n+    next_delay_ms *= 2;\n+  }\n","filename":"src\/hotspot\/os\/windows\/os_windows.cpp","additions":20,"deletions":3,"binary":false,"changes":23,"status":"modified"}]}