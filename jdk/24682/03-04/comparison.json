{"files":[{"patch":"@@ -647,9 +647,4 @@\n-    {\n-      int trials_remaining = 3;\n-      useconds_t next_delay = 1000;\n-      while (true) {\n-        ret = pthread_create(&tid, &attr, (void* (*)(void*)) thread_native_entry, thread);\n-\n-        if (ret != EAGAIN) {\n-          break;\n-        }\n+    int trials_remaining = 3;\n+    useconds_t next_delay = 1000;\n+    while (true) {\n+      ret = pthread_create(&tid, &attr, (void* (*)(void*)) thread_native_entry, thread);\n@@ -657,3 +652,3 @@\n-        if (trials_remaining-- <= 0) {\n-          break;\n-        }\n+      if (ret != EAGAIN) {\n+        break;\n+      }\n@@ -661,3 +656,2 @@\n-        log_debug(os, thread)(\"Failed to start native thread (%s), retrying after %dus.\", os::errno_name(ret), next_delay);\n-        ::usleep(next_delay);\n-        next_delay *= 2;\n+      if (trials_remaining-- <= 0) {\n+        break;\n@@ -665,0 +659,4 @@\n+\n+      log_debug(os, thread)(\"Failed to start native thread (%s), retrying after %dus.\", os::errno_name(ret), next_delay);\n+      ::usleep(next_delay);\n+      next_delay *= 2;\n","filename":"src\/hotspot\/os\/bsd\/os_bsd.cpp","additions":13,"deletions":15,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -1060,9 +1060,4 @@\n-    {\n-      int trials_remaining = 3;\n-      useconds_t next_delay = 1000;\n-      while (true) {\n-        ret = pthread_create(&tid, &attr, (void* (*)(void*)) thread_native_entry, thread);\n-\n-        if (ret != EAGAIN) {\n-          break;\n-        }\n+    int trials_remaining = 3;\n+    useconds_t next_delay = 1000;\n+    while (true) {\n+      ret = pthread_create(&tid, &attr, (void* (*)(void*)) thread_native_entry, thread);\n@@ -1070,3 +1065,3 @@\n-        if (trials_remaining-- <= 0) {\n-          break;\n-        }\n+      if (ret != EAGAIN) {\n+        break;\n+      }\n@@ -1074,3 +1069,2 @@\n-        log_debug(os, thread)(\"Failed to start native thread (%s), retrying after %dus.\", os::errno_name(ret), next_delay);\n-        ::usleep(next_delay);\n-        next_delay *= 2;\n+      if (trials_remaining-- <= 0) {\n+        break;\n@@ -1078,0 +1072,4 @@\n+\n+      log_debug(os, thread)(\"Failed to start native thread (%s), retrying after %dus.\", os::errno_name(ret), next_delay);\n+      ::usleep(next_delay);\n+      next_delay *= 2;\n","filename":"src\/hotspot\/os\/linux\/os_linux.cpp","additions":13,"deletions":15,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -761,19 +761,14 @@\n-  {\n-    int trials_remaining = 3;\n-    DWORD next_delay_ms = 1;\n-    while (true) {\n-      thread_handle =\n-        (HANDLE)_beginthreadex(nullptr,\n-                              (unsigned)stack_size,\n-                              &thread_native_entry,\n-                              thread,\n-                              initflag,\n-                              &thread_id);\n-\n-      if (thread_handle != nullptr) {\n-        break;\n-      }\n-\n-      if (errno != EAGAIN) {\n-        break;\n-      }\n+  int trials_remaining = 3;\n+  DWORD next_delay_ms = 1;\n+  while (true) {\n+    thread_handle =\n+      (HANDLE)_beginthreadex(nullptr,\n+                             (unsigned)stack_size,\n+                             &thread_native_entry,\n+                             thread,\n+                             initflag,\n+                             &thread_id);\n+\n+    if (thread_handle != nullptr) {\n+      break;\n+    }\n@@ -781,3 +776,3 @@\n-      if (trials_remaining-- <= 0) {\n-        break;\n-      }\n+    if (errno != EAGAIN) {\n+      break;\n+    }\n@@ -785,3 +780,2 @@\n-      log_debug(os, thread)(\"Failed to start native thread (%s), retrying after %dms.\", os::errno_name(errno), next_delay_ms);\n-      Sleep(next_delay_ms);\n-      next_delay_ms *= 2;\n+    if (trials_remaining-- <= 0) {\n+      break;\n@@ -789,0 +783,4 @@\n+\n+    log_debug(os, thread)(\"Failed to start native thread (%s), retrying after %dms.\", os::errno_name(errno), next_delay_ms);\n+    Sleep(next_delay_ms);\n+    next_delay_ms *= 2;\n","filename":"src\/hotspot\/os\/windows\/os_windows.cpp","additions":23,"deletions":25,"binary":false,"changes":48,"status":"modified"}]}