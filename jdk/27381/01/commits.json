[{"commit":{"message":"* exploit the fact that this is always a single region to (un-)commit"},"files":[{"filename":"src\/hotspot\/share\/gc\/g1\/g1RegionToSpaceMapper.cpp"}],"sha":"779daa7fb403a0d8fdf068095c9321c9e9d0a634"},{"commit":{"message":"* ayang idea to use an iterative approach for better readability"},"files":[{"filename":"src\/hotspot\/share\/gc\/g1\/g1RegionToSpaceMapper.cpp"}],"sha":"a7088fec7294b8fa86cf940daf69b4eab6cd8210"},{"commit":{"message":"8071277\n\nHi all,\n\n  please review this change to G1 commit\/uncommit to merge commit\/uncommit calls to the operating system as much as possible. This significantly improves startup performanc\n\nPerformance results before\/after on Zen3 processor for a \"HelloWorld\" application:\n\n```\n $ hyperfine -w 10 -r 10 \"baseline\/bin\/java -XX:+UseG1GC -Xms128m -Xmx128m Hello\"\nBenchmark 1: baseline\/bin\/java -XX:+UseG1GC -Xms128m -Xmx128m Hello\n  Time (mean ± σ): 16.4 ms ± 0.4 ms [User: 11.0 ms, System: 14.4 ms]\n  Range (min … max): 15.7 ms … 16.8 ms 10 runs\n\n$ hyperfine -w 10 -r 10 \"baseline\/bin\/java -XX:+UseG1GC -Xms2g -Xmx2g Hello\"\nBenchmark 1: baseline\/bin\/java -XX:+UseG1GC -Xms2g -Xmx2g Hello\n  Time (mean ± σ): 24.7 ms ± 0.4 ms [User: 10.7 ms, System: 22.7 ms]\n  Range (min … max): 24.2 ms … 25.4 ms 10 runs\n\nMy reimplementation of JDK-8071277 does show improvements here:\n\n$ hyperfine -w 10 -r 10 \"changes\/bin\/java -XX:+UseG1GC -Xms128m -Xmx128m Hello\"\nBenchmark 1: changes\/bin\/java -XX:+UseG1GC -Xms128m -Xmx128m Hello\n  Time (mean ± σ): 15.9 ms ± 0.4 ms [User: 11.9 ms, System: 13.1 ms]\n  Range (min … max): 15.4 ms … 16.7 ms 10 runs\n\n$ hyperfine -w 10 -r 10 \"changes\/bin\/java -XX:+UseG1GC -Xms2g -Xmx2g Hello\"\nBenchmark 1: changes\/bin\/java -XX:+UseG1GC -Xms2g -Xmx2g Hello\n  Time (mean ± σ): 19.7 ms ± 0.3 ms [User: 11.3 ms, System: 17.4 ms]\n  Range (min … max): 19.2 ms … 20.1 ms 10 runs\n\n```\n\nI.e., depending on actually committed heap size (`-Xms`), reduction of startup time by 20% or so in above cases.\n\nTesting: tier1-5, gha\n\nThanks,\n  Thomas"},"files":[{"filename":"src\/hotspot\/share\/gc\/g1\/g1NUMA.cpp"},{"filename":"src\/hotspot\/share\/gc\/g1\/g1RegionToSpaceMapper.cpp"},{"filename":"src\/hotspot\/share\/gc\/g1\/g1RegionToSpaceMapper.hpp"}],"sha":"302482772981e017e00ce26dfa3b5a4d6a6eeba6"}]