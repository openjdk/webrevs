{"files":[{"patch":"@@ -42,0 +42,2 @@\n+import java.security.CodeSource;\n+import java.security.ProtectionDomain;\n@@ -297,3 +299,6 @@\n-                URL url = System.codeSource(currentClass);\n-                if (url != null) {\n-                    mod += \" (\" + url + \")\";\n+                CodeSource cs = currentClass.getProtectionDomain().getCodeSource();\n+                if (cs != null) {\n+                    URL url = cs.getLocation();\n+                    if (url != null) {\n+                        mod += \" (\" + url + \")\";\n+                    }\n","filename":"src\/java.base\/share\/classes\/java\/lang\/Module.java","additions":8,"deletions":3,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -45,1 +45,0 @@\n-import java.net.URL;\n@@ -50,3 +49,0 @@\n-import java.security.AccessController;\n-import java.security.CodeSource;\n-import java.security.PrivilegedAction;\n@@ -54,1 +50,0 @@\n-import java.util.Collections;\n@@ -60,1 +55,0 @@\n-import java.util.PropertyPermission;\n@@ -63,1 +57,0 @@\n-import java.util.WeakHashMap;\n@@ -95,1 +88,0 @@\n-import sun.security.util.SecurityConstants;\n@@ -279,7 +271,0 @@\n-    static URL codeSource(Class<?> clazz) {\n-        PrivilegedAction<ProtectionDomain> pa = clazz::getProtectionDomain;\n-        @SuppressWarnings(\"removal\")\n-        CodeSource cs = AccessController.doPrivileged(pa).getCodeSource();\n-        return (cs != null) ? cs.getLocation() : null;\n-    }\n-\n@@ -1419,4 +1404,1 @@\n-                PrivilegedAction<LoggerFinder> pa =\n-                        () -> LoggerFinderLoader.getLoggerFinder();\n-                finder = AccessController.doPrivileged(pa, null,\n-                        LOGGERFINDER_PERMISSION);\n+                finder = LoggerFinderLoader.getLoggerFinder();\n","filename":"src\/java.base\/share\/classes\/java\/lang\/System.java","additions":1,"deletions":19,"binary":false,"changes":20,"status":"modified"}]}