{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -1408,1 +1408,1 @@\n-            if (containerSize.height <= 0 || containerSize.width <= 0 ) {\n+            if (containerSize.height <= 0 && containerSize.width <= 0 ) {\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/plaf\/basic\/BasicSplitPaneUI.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -0,0 +1,173 @@\n+\/*\n+ * Copyright (c) 2026, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 4765299\n+ * @key headful\n+ * @summary Verifies componentResized() is called with nested JSplitPanes\n+ * @run main TestSplitPaneCompResize\n+ *\/\n+\n+import java.awt.Dimension;\n+import java.awt.Point;\n+import java.awt.Robot;\n+import java.awt.event.ComponentAdapter;\n+import java.awt.event.ComponentEvent;\n+import java.awt.event.InputEvent;\n+\n+import javax.swing.JButton;\n+import javax.swing.JFrame;\n+import javax.swing.JList;\n+import javax.swing.JScrollPane;\n+import javax.swing.JSplitPane;\n+import javax.swing.JPanel;\n+import javax.swing.ListSelectionModel;\n+import javax.swing.plaf.basic.BasicSplitPaneDivider;\n+import javax.swing.plaf.basic.BasicSplitPaneUI;\n+import javax.swing.SwingUtilities;\n+\n+public class TestSplitPaneCompResize {\n+\n+    private static JFrame frame;\n+    private JSplitPane outer;\n+    private static JButton leftOneTouchButton;\n+    private static volatile Point leftBtnPos;\n+    private static volatile boolean resized;\n+\n+    public TestSplitPaneCompResize() {\n+\n+        \/\/ set up a simple list embedded inside a scroll pane\n+        String[] listItems = {\"Item1\", \"Item2\"};\n+        JList list = new JList<>(listItems);\n+        list.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);\n+        list.setSelectedIndex(0);\n+\n+        JScrollPane comp = new JScrollPane(list);\n+        JSplitPane inner = new JSplitPane(JSplitPane.VERTICAL_SPLIT,\n+                                          comp, new JPanel());\n+        JPanel rightPanel = new JPanel();\n+\n+        outer = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT,\n+                               inner, rightPanel);\n+        outer.setDividerLocation(150);\n+\n+        \/\/Provide minimum sizes for the two components in the split pane\n+        Dimension minimumSize = new Dimension(100, 50);\n+        comp.setMinimumSize(minimumSize);\n+        inner.setMinimumSize(minimumSize);\n+        rightPanel.setMinimumSize(minimumSize);\n+\n+        \/\/Provide a preferred size for the split pane\n+        outer.setPreferredSize(new Dimension(400, 200));\n+        inner.addComponentListener(new ComponentAdapter() {\n+            public void componentResized(ComponentEvent e) {\n+                System.out.println(\"inner resized\");\n+            }\n+        });\n+        comp.addComponentListener(new ComponentAdapter() {\n+            public void componentResized(ComponentEvent e) {\n+                resized = true;\n+                System.out.println(\"comp resized\");\n+            }\n+        });\n+    }\n+\n+    public JSplitPane getSplitPane() {\n+        return outer;\n+    }\n+\n+\n+    public static void main(String[] s) throws Exception {\n+        Robot robot = new Robot();\n+        try {\n+            SwingUtilities.invokeAndWait(() -> {\n+                frame = new JFrame(\"SplitPaneDemo\");\n+\n+                TestSplitPaneCompResize sp = new TestSplitPaneCompResize();\n+                JSplitPane jsp = sp.getSplitPane();\n+                frame.getContentPane().add(jsp);\n+                jsp.setUI(new MySplitPaneUI());\n+                jsp.setOneTouchExpandable(true);\n+                frame.pack();\n+                frame.setLocationRelativeTo(null);\n+                frame.setVisible(true);\n+            });\n+\n+            robot.waitForIdle();\n+            robot.delay(1000);\n+\n+            SwingUtilities.invokeAndWait(() -> {\n+                leftBtnPos = leftOneTouchButton.getLocationOnScreen();\n+                leftBtnPos.x += leftOneTouchButton.getWidth() \/ 2;\n+                leftBtnPos.y += leftOneTouchButton.getHeight() \/ 2;\n+            });\n+\n+            resized = false;\n+            robot.mouseMove(leftBtnPos.x, leftBtnPos.y);\n+            robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n+            robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n+            robot.waitForIdle();\n+            robot.delay(1000);\n+\n+            if (!resized) {\n+                throw new RuntimeException(\"ComponentResized not called\");\n+            }\n+        } finally {\n+            SwingUtilities.invokeAndWait(() -> {\n+                if (frame != null) {\n+                    frame.dispose();\n+                }\n+            });\n+        }\n+    }\n+\n+\n+    static class MySplitPaneUI extends BasicSplitPaneUI {\n+\n+        public MySplitPaneUI() {\n+            super();\n+        }\n+\n+        public BasicSplitPaneDivider createDefaultDivider() {\n+            return new MySplitPaneDivider(this);\n+        }\n+    }\n+\n+    static class MySplitPaneDivider extends BasicSplitPaneDivider {\n+\n+        public MySplitPaneDivider(BasicSplitPaneUI ui) {\n+            super(ui);\n+        }\n+\n+        protected JButton createLeftOneTouchButton() {\n+            leftOneTouchButton = super.createLeftOneTouchButton();\n+            return leftOneTouchButton;\n+        }\n+\n+        protected JButton createRightOneTouchButton() {\n+            JButton rightOneTouchButton = super.createRightOneTouchButton();\n+            return rightOneTouchButton;\n+        }\n+    }\n+}\n","filename":"test\/jdk\/javax\/swing\/JSplitPane\/TestSplitPaneCompResize.java","additions":173,"deletions":0,"binary":false,"changes":173,"status":"added"}]}