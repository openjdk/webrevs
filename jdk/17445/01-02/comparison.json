{"files":[{"patch":"@@ -1793,10 +1793,9 @@\n-                       \", adapters=\" UINT32_FORMAT,\n-                       blob_count(), nmethod_count(), adapter_count());\n-    st->print_cr(\" stopped_count=%d, restarted_count=%d, full_count=%d\",\n-                 CompileBroker::get_total_compiler_stopped_count(),\n-                 CompileBroker::get_total_compiler_restarted_count(),\n-                 full_count);\n-    st->print_cr(\" compilation=%s\", CompileBroker::should_compile_new_jobs() ?\n-              \"enabled\" : Arguments::mode() == Arguments::_int ?\n-              \"disabled (interpreter mode)\" :\n-              \"disabled (not enough contiguous free space left)\");\n+                 \", adapters=\" UINT32_FORMAT \", full_count=\" UINT32_FORMAT,\n+                 blob_count(), nmethod_count(), adapter_count(), full_count);\n+    st->print_cr(\"Compilation:%s, stopped_count=%d, restarted_count=%d\",\n+                CompileBroker::should_compile_new_jobs() ?\n+                \"enabled\" : Arguments::mode() == Arguments::_int ?\n+                \"disabled (interpreter mode)\" :\n+                \"disabled (not enough contiguous free space left)\",\n+                CompileBroker::get_total_compiler_stopped_count(),\n+                CompileBroker::get_total_compiler_restarted_count());\n","filename":"src\/hotspot\/share\/code\/codeCache.cpp","additions":9,"deletions":10,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -58,5 +58,4 @@\n-     * CodeCache: size=245760Kb used=1366Kb max_used=1943Kb free=244393Kb\n-     *  bounds [0x00007fe8bc9f2000, 0x00007fe8bcc62000, 0x00007fe8cb9f2000]\n-     *  total_blobs=474, nmethods=87, adapters=293\n-     *  stopped_count=0, restarted_count=0, full_count=0\n-     *  compilation=enabled\n+     * CodeCache: size=245760Kb used=1366Kb max_used=1935Kb free=244393Kb\n+     *  bounds [0x00007ff4d89f2000, 0x00007ff4d8c62000, 0x00007ff4e79f2000]\n+     *  total_blobs=474, nmethods=87, adapters=293, full_count=0\n+     * Compilation:enabled, stopped_count=0, restarted_count=0\n@@ -67,1 +66,1 @@\n-     *  bounds [0x00007f89c8622000, 0x00007f89c8892000, 0x00007f89cf9f2000]\n+     *  bounds [0x00007f09f8622000, 0x00007f09f8892000, 0x00007f09ff9f2000]\n@@ -69,7 +68,6 @@\n-     *  bounds [0x00007f89c09f2000, 0x00007f89c0c62000, 0x00007f89c7dc1000]\n-     * CodeHeap 'non-nmethods': size=8580Kb used=1258Kb max_used=1834Kb free=7321Kb\n-     *  bounds [0x00007f89c7dc1000, 0x00007f89c8031000, 0x00007f89c8622000]\n-     * CodeCache: size=245760Kb, used=1367Kb, max_used=1943Kb, free=244390Kb\n-     *  total_blobs=474, nmethods=87, adapters=293\n-     *  stopped_count=0, restarted_count=0, full_count=0\n-     *  compilation=enabled\n+     *  bounds [0x00007f09f09f2000, 0x00007f09f0c62000, 0x00007f09f7dc1000]\n+     * CodeHeap 'non-nmethods': size=8580Kb used=1257Kb max_used=1833Kb free=7323Kb\n+     *  bounds [0x00007f09f7dc1000, 0x00007f09f8031000, 0x00007f09f8622000]\n+     * CodeCache: size=245760Kb, used=1366Kb, max_used=1942Kb, free=244392Kb\n+     *  total_blobs=474, nmethods=87, adapters=293, full_count=0\n+     * Compilation:enabled, stopped_count=0, restarted_count=0\n@@ -80,3 +78,2 @@\n-    static Pattern line3 = Pattern.compile(\" total_blobs=(\\\\p{Digit}*), nmethods=(\\\\p{Digit}*), adapters=(\\\\p{Digit}*)\");\n-    static Pattern line4 = Pattern.compile(\" stopped_count=(\\\\p{Digit}*), restarted_count=(\\\\p{Digit}*), full_count=(\\\\p{Digit}*)\");\n-    static Pattern line5 = Pattern.compile(\" compilation=(.*)\");\n+    static Pattern line3 = Pattern.compile(\" total_blobs=(\\\\p{Digit}*), nmethods=(\\\\p{Digit}*), adapters=(\\\\p{Digit}*), full_count=(\\\\p{Digit}*)\");\n+    static Pattern line4 = Pattern.compile(\"Compilation:(.*?), stopped_count=(\\\\p{Digit}*), restarted_count=(\\\\p{Digit}*)\");\n@@ -194,1 +191,11 @@\n-            System.out.println(\"stopped_count=\" + m.group(1));\n+            if (!m.group(1).contains(\"enabled\") && !m.group(1).contains(\"disabled\")) {\n+                Assert.fail(\"Failed parsing dcmd codecache output\");\n+            }\n+            int stopped = Integer.parseInt(m.group(2));\n+            if (stopped < 0) {\n+                Assert.fail(\"Failed parsing dcmd codecache output\");\n+            }\n+            int restarted = Integer.parseInt(m.group(3));\n+            if (restarted < 0) {\n+                Assert.fail(\"Failed parsing dcmd codecache output\");\n+            }\n@@ -196,7 +203,0 @@\n-            Assert.fail(\"Regexp 3 failed to match line: \" + line);\n-        }\n-\n-        \/\/ Validate fifth line\n-        line = lines.next();\n-        m = line5.matcher(line);\n-        if (!m.matches()) {\n","filename":"test\/hotspot\/jtreg\/serviceability\/dcmd\/compiler\/CodeCacheTest.java","additions":24,"deletions":24,"binary":false,"changes":48,"status":"modified"}]}