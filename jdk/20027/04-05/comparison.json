{"files":[{"patch":"@@ -76,0 +76,2 @@\n+    private Throwable printerAbortExcpn;\n+\n@@ -250,1 +252,1 @@\n-    private void completePrintLoop() {\n+    private void completePrintLoop(Throwable excpn)  {\n@@ -260,0 +262,2 @@\n+        printerAbortExcpn = excpn;\n+\n@@ -374,2 +378,0 @@\n-                    } catch (PrinterAbortException pex) {\n-                        throw pex;\n@@ -379,0 +381,3 @@\n+                    if (printerAbortExcpn != null) {\n+                        throw (PrinterAbortException) printerAbortExcpn;\n+                    }\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/lwawt\/macosx\/CPrinterJob.java","additions":8,"deletions":3,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -37,1 +37,0 @@\n-static bool printLoopExit = false;\n@@ -269,1 +268,0 @@\n-        printLoopExit = true;\n@@ -281,4 +279,4 @@\n-    if (!printLoopExit) {\n-        DECLARE_METHOD(jf_completePrintLoop, sjc_CPrinterJob, \"completePrintLoop\", \"()V\");\n-        (*env)->CallVoidMethod(env, fPrinterJob, jf_completePrintLoop);\n-        CHECK_EXCEPTION();\n+    jthrowable excpn = (*env)->ExceptionOccurred(env);\n+    if (excpn != NULL) {\n+        (*env)->ExceptionDescribe(env);\n+        (*env)->ExceptionClear(env);\n@@ -286,0 +284,3 @@\n+    DECLARE_METHOD(jf_completePrintLoop, sjc_CPrinterJob, \"completePrintLoop\", \"(Ljava\/lang\/Throwable;)V\");\n+    (*env)->CallVoidMethod(env, fPrinterJob, jf_completePrintLoop, excpn);\n+    CHECK_EXCEPTION();\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/PrinterView.m","additions":7,"deletions":6,"binary":false,"changes":13,"status":"modified"}]}