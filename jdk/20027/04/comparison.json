{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -374,0 +374,2 @@\n+                    } catch (PrinterAbortException pex) {\n+                        throw pex;\n@@ -754,3 +756,2 @@\n-            try {\n-                LWCToolkit.invokeLater(new Runnable() { public void run() {\n-                    try {\n+            EventQueue.invokeLater(() -> {\n+                try {\n@@ -758,5 +759,4 @@\n-                    } catch (PrinterAbortException pae) {\n-                        \/\/ no-op, let the native side handle it\n-                    }\n-                }}, null);\n-            } catch (java.lang.reflect.InvocationTargetException ite) {}\n+                } catch (PrinterAbortException pae) {\n+                    \/\/ no-op, let the native side handle it\n+                }\n+            });\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/lwawt\/macosx\/CPrinterJob.java","additions":9,"deletions":9,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2013, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -36,0 +36,2 @@\n+static jclass sjc_PAbortEx = NULL;\n+static bool printLoopExit = false;\n@@ -38,0 +40,1 @@\n+#define GET_PRINERABORTEXCEPTION_CLASS(ret) GET_CLASS_RETURN(sjc_PAbortEx, \"java\/awt\/print\/PrinterAbortException\", ret);\n@@ -263,1 +266,7 @@\n-    CHECK_EXCEPTION();\n+    if (b) {\n+        GET_PRINERABORTEXCEPTION_CLASS(b);\n+        (*env)->ThrowNew(env, sjc_PAbortEx, \"Printer Job cancelled\");\n+        printLoopExit = true;\n+    } else {\n+        CHECK_EXCEPTION();\n+    }\n@@ -272,3 +281,5 @@\n-    DECLARE_METHOD(jf_completePrintLoop, sjc_CPrinterJob, \"completePrintLoop\", \"()V\");\n-    (*env)->CallVoidMethod(env, fPrinterJob, jf_completePrintLoop);\n-    CHECK_EXCEPTION();\n+    if (!printLoopExit) {\n+        DECLARE_METHOD(jf_completePrintLoop, sjc_CPrinterJob, \"completePrintLoop\", \"()V\");\n+        (*env)->CallVoidMethod(env, fPrinterJob, jf_completePrintLoop);\n+        CHECK_EXCEPTION();\n+    }\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/PrinterView.m","additions":16,"deletions":5,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -35,1 +35,1 @@\n- * @bug 4245280\n+ * @bug 4245280 8335231\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/Cancel\/PrinterJobCancel.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}