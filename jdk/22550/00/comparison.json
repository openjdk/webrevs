{"files":[{"patch":"@@ -79,3 +79,2 @@\n-  if (ArchiveBuilder::is_active() && ArchiveBuilder::current()->is_in_buffer_space((address)this)) {\n-    return ArchiveBuilder::current()->offset_to_buffered<InstanceKlass*>(_klass_offset);\n-  } else {\n+  if (MetaspaceShared::is_in_shared_metaspace(this)) {\n+    \/\/ <this> is inside a mmaped CDS archive.\n@@ -83,0 +82,4 @@\n+  } else {\n+    \/\/ <this> is a temporary copy of a RunTimeClassInfo that's being initialized\n+    \/\/ by the ArchiveBuilder.\n+    return ArchiveBuilder::current()->offset_to_buffered<InstanceKlass*>(_klass_offset);\n","filename":"src\/hotspot\/share\/cds\/runTimeClassInfo.cpp","additions":6,"deletions":3,"binary":false,"changes":9,"status":"modified"}]}