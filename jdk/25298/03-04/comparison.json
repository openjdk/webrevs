{"files":[{"patch":"@@ -1941,2 +1941,4 @@\n-  int k1 = bsm_attribute_entry(idx1)->bootstrap_method_index();\n-  int k2 = cp2->bsm_attribute_entry(idx2)->bootstrap_method_index();\n+  BSMAttributeEntry* e1 = bsm_attribute_entry(idx1);\n+  BSMAttributeEntry* e2 = bsm_attribute_entry(idx2);\n+  int k1 = e1->bootstrap_method_index();\n+  int k2 = cp2->e2->bootstrap_method_index();\n@@ -1948,2 +1950,2 @@\n-  int argc = bsm_attribute_entry(idx1)->argument_count();\n-  if (argc == cp2->bsm_attribute_entry(idx2)->argument_count()) {\n+  int argc = e1->argument_count();\n+  if (argc == cp2->e2->argument_count()) {\n@@ -1951,2 +1953,2 @@\n-      k1 = bsm_attribute_entry(idx1)->argument_index(j);\n-      k2 = cp2->bsm_attribute_entry(idx2)->argument_index(j);\n+      k1 = e1->argument_index(j);\n+      k2 = cp2->e2->argument_index(j);\n","filename":"src\/hotspot\/share\/oops\/constantPool.cpp","additions":8,"deletions":6,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -85,0 +85,3 @@\n+  \/\/ The argument indexes are stored right after the object, in a contiguous array.\n+  \/\/ [ bsmi_0 argc_0 arg_00 arg_01 ... arg_0N bsmi_1 argc_1 arg_10 ... arg_1N ... ]\n+  \/\/ So in order to find the argument array, jump over ourselves.\n","filename":"src\/hotspot\/share\/oops\/constantPool.hpp","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -28,1 +28,0 @@\n-#include \"oops\/constantPool.hpp\"\n","filename":"src\/hotspot\/share\/prims\/jvmtiClassFileReconstituter.cpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -662,1 +662,1 @@\n-void VM_RedefineClasses::append_operand(const constantPoolHandle& scratch_cp, int old_bs_i,\n+void VM_RedefineClasses::append_operand(const constantPoolHandle& scratch_cp, const int old_bs_i,\n@@ -665,1 +665,2 @@\n-  u2 old_ref_i = scratch_cp->bsm_attribute_entry(old_bs_i)->bootstrap_method_index();\n+  BSMAttributeEntry* old_bsme = scratch_cp->bsm_attribute_entry(old_bs_i);\n+  u2 old_ref_i = old_bsme->bootstrap_method_index();\n@@ -679,1 +680,1 @@\n-  u2 argc      = scratch_cp->bsm_attribute_entry(old_bs_i)->argument_count();\n+  u2 argc      = old_bsme->argument_count();\n@@ -686,1 +687,1 @@\n-    u2 old_arg_ref_i = scratch_cp->bsm_attribute_entry(old_bs_i)->argument_index(i);\n+    u2 old_arg_ref_i = old_bsme->argument_index(i);\n","filename":"src\/hotspot\/share\/prims\/jvmtiRedefineClasses.cpp","additions":5,"deletions":4,"binary":false,"changes":9,"status":"modified"}]}