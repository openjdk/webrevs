{"files":[{"patch":"@@ -279,3 +279,2 @@\n-  if (survivor_size < from()->used()) {\n-    survivor_size = align_up(from()->used(), SpaceAlignment);\n-  }\n+  assert(survivor_size >= from()->used(), \"inv\");\n+  assert(size > 2 * survivor_size, \"inv\");\n@@ -404,1 +403,12 @@\n-  assert(desired_new_size <= max_new_size, \"just checking\");\n+  if (!from()->is_empty()) {\n+    \/\/ Mininum constraint to hold all live objs inside from-space.\n+    size_t min_survivor_size = align_up(from()->used(), alignment);\n+\n+    \/\/ SurvivorRatio := eden_size \/ survivor_size\n+    \/\/ young-gen-size = eden_size                     + 2 * survivor_size\n+    \/\/                = SurvivorRatio * survivor_size + 2 * survivor_size\n+    \/\/                = (SurvivorRatio + 2) * survivor_size\n+    size_t min_young_gen_size = min_survivor_size * (SurvivorRatio + 2);\n+\n+    desired_new_size = MAX2(min_young_gen_size, desired_new_size);\n+  }\n","filename":"src\/hotspot\/share\/gc\/serial\/defNewGeneration.cpp","additions":14,"deletions":4,"binary":false,"changes":18,"status":"modified"}]}