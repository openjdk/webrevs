{"files":[{"patch":"@@ -0,0 +1,45 @@\n+import java.math.Accessor;\n+import java.time.Duration;\n+import java.util.Random;\n+\n+public class TestDivWord {\n+    \n+    private static void randomCaseTests() {\n+        final int MAX_DIVISIONS = 1 << 30;\n+        Random rnd = new Random();\n+        \n+        for (int nDivs = 1; nDivs <= MAX_DIVISIONS; nDivs <<= 1) {\n+            Duration elapsed = Duration.ZERO;\n+            \n+            for (int i = 0; i < nDivs; i++) {\n+                \/\/ divWord(n, d) is used when n < 0\n+                long n = rnd.nextLong() & (1L << 63);\n+                int d = rnd.nextInt();\n+                \/\/ Avoid d == 0\n+                if (d == 0)\n+                    d = 1;\n+                \n+                long t0 = System.nanoTime();\n+                Accessor.divWord(n, d);\n+                long t1 = System.nanoTime();\n+                \n+                elapsed = elapsed.plusNanos(t1 - t0);\n+            }\n+            \n+            System.out.println(\"Time to do \" + nDivs + \" divisions: \" + elapsed);\n+            System.out.println(\"Average time for division: \" + elapsed.dividedBy(nDivs) + \"\\n\");\n+        }\n+    }\n+    \n+    private static void oldImplementationWorstCaseTest() {\n+        long n = 0xfffffffffffffffeL;\n+        int d = 3;\n+        System.out.println(Long.toUnsignedString(n) + \" \/ \" + d + \" = \" + Long.divideUnsigned(n, d));\n+        Accessor.divWord(n, d);\n+    }\n+    \n+    public static void main(String[] args) {\n+        randomCaseTests();\n+        \/\/oldImplementationWorstCaseTest();\n+    }\n+}\n","filename":"test\/jdk\/java\/math\/BigInteger\/TestDivWord.java","additions":45,"deletions":0,"binary":false,"changes":45,"status":"added"},{"patch":"@@ -32,0 +32,4 @@\n+    public static long divWord(long n, int d) {\n+        return MutableBigInteger.divWord(n, d);\n+    }\n+\n","filename":"test\/jdk\/java\/math\/BigInteger\/java.base\/java\/math\/Accessor.java","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"}]}