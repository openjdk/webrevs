{"files":[{"patch":"@@ -661,8 +661,6 @@\n-  if (old_size == 0) {\n-    if (CDSConfig::is_dumping_static_archive()) {\n-      \/\/ Need to deterministically fill all the alignment gaps in C++ structures.\n-      ::memset((char*)client_ptr, 0, size);\n-    } else {\n-      DEBUG_ONLY(::memset((char*)client_ptr, uninitBlockPad, size);)\n-    }\n-  } else if (old_size < size) {\n+  if ((size == old_size) && CDSConfig::is_dumping_static_archive()) {\n+    \/\/ Need to deterministically fill all the alignment gaps in C++ structures.\n+    ::memset((char*)client_ptr, 0, size);\n+  }\n+\n+  if (old_size <= size) {\n@@ -681,1 +679,0 @@\n-\n@@ -697,1 +694,1 @@\n-  return record_and_clear_bits(outer_ptr, size, 0, mem_tag, stack);\n+  return os::record_and_clear_bits(outer_ptr, size, size, mem_tag, stack);\n@@ -705,1 +702,0 @@\n-\n@@ -758,1 +754,1 @@\n-    ptr = record_and_clear_bits(outer_ptr, size, old_size, mem_tag, stack);\n+    ptr = os::record_and_clear_bits(outer_ptr, size, old_size, mem_tag, stack);\n","filename":"src\/hotspot\/share\/runtime\/os.cpp","additions":8,"deletions":12,"binary":false,"changes":20,"status":"modified"}]}