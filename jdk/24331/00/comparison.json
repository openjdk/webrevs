{"files":[{"patch":"@@ -1287,7 +1287,1 @@\n-    if (UseCompactObjectHeaders) {\n-      load_narrow_klass_compact(tmp1, receiver);\n-    } else if (UseCompressedClassPointers) {\n-      lwz(tmp1, oopDesc::klass_offset_in_bytes(), receiver);\n-    } else {\n-      ld(tmp1, oopDesc::klass_offset_in_bytes(), receiver);\n-    }\n+    load_klass_no_decode(tmp1, receiver); \/\/ 2 instructions with UseCompactObjectHeaders\n@@ -1309,5 +1303,1 @@\n-    if (UseCompressedClassPointers) {\n-      lwz(tmp1, oopDesc::klass_offset_in_bytes(), receiver);\n-    } else {\n-      ld(tmp1, oopDesc::klass_offset_in_bytes(), receiver);\n-    }\n+    load_klass_no_decode(tmp1, receiver); \/\/ 2 instructions with UseCompactObjectHeaders\n@@ -3539,1 +3529,1 @@\n-void MacroAssembler::load_klass(Register dst, Register src) {\n+void MacroAssembler::load_klass_no_decode(Register dst, Register src) {\n@@ -3542,1 +3532,0 @@\n-    decode_klass_not_null(dst);\n@@ -3545,1 +3534,0 @@\n-    decode_klass_not_null(dst);\n@@ -3551,0 +3539,7 @@\n+void MacroAssembler::load_klass(Register dst, Register src) {\n+  load_klass_no_decode(dst, src);\n+  if (UseCompressedClassPointers) { \/\/ also true for UseCompactObjectHeaders\n+    decode_klass_not_null(dst);\n+  }\n+}\n+\n","filename":"src\/hotspot\/cpu\/ppc\/macroAssembler_ppc.cpp","additions":10,"deletions":15,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -805,0 +805,1 @@\n+  void load_klass_no_decode(Register dst, Register src);\n","filename":"src\/hotspot\/cpu\/ppc\/macroAssembler_ppc.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"}]}