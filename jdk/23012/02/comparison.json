{"files":[{"patch":"@@ -1221,0 +1221,10 @@\n+\n+  \/\/ Given a profile data offset, generate an Address which points to\n+  \/\/ the corresponding slot in mdo->data().\n+  \/\/ Clobbers rscratch2.\n+  auto slot_at = [=](ByteSize offset) -> Address {\n+    return __ form_address(rscratch2, mdo,\n+                           md->byte_offset_of_slot(data, offset),\n+                           LogBytesPerWord);\n+  };\n+\n@@ -1224,2 +1234,1 @@\n-    __ lea(rscratch2, Address(mdo, md->byte_offset_of_slot(data, ReceiverTypeData::receiver_offset(i))));\n-    __ ldr(rscratch1, Address(rscratch2));\n+    __ ldr(rscratch1, slot_at(ReceiverTypeData::receiver_offset(i)));\n@@ -1228,2 +1237,2 @@\n-    Address data_addr(mdo, md->byte_offset_of_slot(data, ReceiverTypeData::receiver_count_offset(i)));\n-    __ addptr(data_addr, DataLayout::counter_increment);\n+    __ addptr(slot_at(ReceiverTypeData::receiver_count_offset(i)),\n+              DataLayout::counter_increment);\n@@ -1237,3 +1246,1 @@\n-    __ lea(rscratch2,\n-           Address(mdo, md->byte_offset_of_slot(data, ReceiverTypeData::receiver_offset(i))));\n-    Address recv_addr(rscratch2);\n+    Address recv_addr(slot_at(ReceiverTypeData::receiver_offset(i)));\n@@ -1244,2 +1251,1 @@\n-    __ lea(rscratch2, Address(mdo, md->byte_offset_of_slot(data, ReceiverTypeData::receiver_count_offset(i))));\n-    __ str(rscratch1, Address(rscratch2));\n+    __ str(rscratch1, slot_at(ReceiverTypeData::receiver_count_offset(i)));\n@@ -1417,2 +1423,1 @@\n-                          md->byte_offset_of_slot(data, DataLayout::flags_offset()),\n-                          0);\n+                          md->byte_offset_of_slot(data, DataLayout::flags_offset()), 0);\n@@ -2569,1 +2574,0 @@\n-          Address recv_addr(mdo, md->byte_offset_of_slot(data, VirtualCallData::receiver_offset(i)));\n@@ -2571,2 +2575,5 @@\n-          __ lea(rscratch2, recv_addr);\n-          __ str(rscratch1, Address(rscratch2));\n+          Address recv_addr =\n+            __ form_address(rscratch2, mdo,\n+                            md->byte_offset_of_slot(data, VirtualCallData::receiver_offset(i)),\n+                            LogBytesPerWord);\n+          __ str(rscratch1, recv_addr);\n","filename":"src\/hotspot\/cpu\/aarch64\/c1_LIRAssembler_aarch64.cpp","additions":21,"deletions":14,"binary":false,"changes":35,"status":"modified"},{"patch":"@@ -1176,0 +1176,1 @@\n+  \/\/ Clobber: rscratch1, rscratch2\n@@ -1177,0 +1178,2 @@\n+\n+  \/\/ Clobber: rscratch1\n","filename":"src\/hotspot\/cpu\/aarch64\/macroAssembler_aarch64.hpp","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"}]}