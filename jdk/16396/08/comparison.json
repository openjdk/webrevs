{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -186,1 +186,1 @@\n-        robot.mousePress(InputEvent.BUTTON1_MASK);\n+        robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n@@ -188,1 +188,1 @@\n-            robot.mouseRelease(InputEvent.BUTTON1_MASK);\n+            robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n@@ -229,0 +229,3 @@\n+    private volatile boolean success1 = false;\n+    private volatile boolean success2 = false;\n+\n@@ -268,0 +271,1 @@\n+            robot.setAutoWaitForIdle(true);\n@@ -269,1 +273,2 @@\n-            robot.mousePress(InputEvent.BUTTON1_MASK);\n+            robot.delay(50);\n+            robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n@@ -271,1 +276,1 @@\n-                 p.translate(Util.sign(targetPoint.x - p.x),\n+                p.translate(Util.sign(targetPoint.x - p.x),\n@@ -274,1 +279,1 @@\n-                Thread.sleep(50);\n+                robot.delay(50);\n@@ -278,1 +283,1 @@\n-                robot.mouseRelease(InputEvent.BUTTON1_MASK);\n+                robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n@@ -282,3 +287,7 @@\n-            if (!dragSourceListener.isDropFinished()) {\n-                throw new RuntimeException(\"Drop not finished\");\n-            }\n+            EventQueue.invokeAndWait(() -> {\n+                if (!dragSourceListener.isDropFinished()) {\n+                    throw new RuntimeException(\"Drop not finished\");\n+                }\n+                success1 = dragSourceListener.getDropSuccess();\n+                dragSourceListener.reset();\n+            });\n@@ -286,1 +295,0 @@\n-            boolean success1 = dragSourceListener.getDropSuccess();\n@@ -288,1 +296,0 @@\n-            dragSourceListener.reset();\n@@ -290,1 +297,2 @@\n-            robot.mousePress(InputEvent.BUTTON1_MASK);\n+            robot.delay(50);\n+            robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n@@ -292,1 +300,1 @@\n-                 p.translate(Util.sign(targetPoint.x - p.x),\n+                p.translate(Util.sign(targetPoint.x - p.x),\n@@ -295,1 +303,1 @@\n-                Thread.sleep(50);\n+                robot.delay(50);\n@@ -299,1 +307,1 @@\n-                robot.mouseRelease(InputEvent.BUTTON1_MASK);\n+                robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n@@ -303,3 +311,7 @@\n-            if (!dragSourceListener.isDropFinished()) {\n-                throw new RuntimeException(\"Drop not finished\");\n-            }\n+            EventQueue.invokeAndWait(() -> {\n+                if (!dragSourceListener.isDropFinished()) {\n+                    throw new RuntimeException(\"Drop not finished\");\n+                }\n+                success2 = dragSourceListener.getDropSuccess();\n+                dragSourceListener.reset();\n+            });\n@@ -307,1 +319,0 @@\n-            boolean success2 = dragSourceListener.getDropSuccess();\n","filename":"test\/jdk\/java\/awt\/dnd\/InterJVMGetDropSuccessTest\/InterJVMGetDropSuccessTest.java","additions":31,"deletions":20,"binary":false,"changes":51,"status":"modified"}]}