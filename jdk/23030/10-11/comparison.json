{"files":[{"patch":"@@ -3020,17 +3020,22 @@\n-  if (input_value_order == ValueOrder::NotAdjacent) {\n-    return false;\n-  }\n-\n-  if (input_value_order == ValueOrder::Reverse &&\n-      (memory_size != 1 ||\n-       !Matcher::match_rule_supported(Op_ReverseBytesI) ||\n-       !Matcher::match_rule_supported(Op_ReverseBytesL) ||\n-       !Matcher::match_rule_supported(Op_ReverseBytesS)\n-      )) {\n-    \/\/ ReverseBytes are not supported by platform\n-    return false;\n-  }\n-\n-  if (_value_order == ValueOrder::Unknown) {\n-    \/\/ Initial state is Unknown, and we find a valid input value order\n-    return true;\n+  switch (input_value_order) {\n+    case ValueOrder::NotAdjacent:\n+      return false;\n+    case ValueOrder::Reverse:\n+      if (memory_size != 1 ||\n+          !Matcher::match_rule_supported(Op_ReverseBytesS) ||\n+          !Matcher::match_rule_supported(Op_ReverseBytesI) ||\n+          !Matcher::match_rule_supported(Op_ReverseBytesL)) {\n+        \/\/ ReverseBytes are not supported by platform\n+        return false;\n+      }\n+    case ValueOrder::Const:\n+    case ValueOrder::Platform:\n+      if (_value_order == ValueOrder::Unknown) {\n+        \/\/ Initial state is Unknown, and we find a valid input value order\n+        return true;\n+      }\n+      \/\/ The value order can not be changed\n+      return _value_order == input_value_order;\n+    case ValueOrder::Unknown:\n+    default:\n+      ShouldNotReachHere();\n@@ -3038,3 +3043,1 @@\n-\n-  \/\/ The value order can not be changed\n-  return _value_order == input_value_order;\n+  return false;\n","filename":"src\/hotspot\/share\/opto\/memnode.cpp","additions":23,"deletions":20,"binary":false,"changes":43,"status":"modified"},{"patch":"@@ -36,1 +36,1 @@\n- * @bug 8318446 8331054 8331311 8335392\n+ * @bug 8318446 8331054 8331311 8335392 8347405\n@@ -45,1 +45,1 @@\n- * @bug 8318446 8331054 8331311 8335392\n+ * @bug 8318446 8331054 8331311 8335392 8347405\n","filename":"test\/hotspot\/jtreg\/compiler\/c2\/TestMergeStores.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}