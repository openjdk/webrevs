{"files":[{"patch":"@@ -32,0 +32,1 @@\n+#include \"utilities\/align.hpp\"\n@@ -352,4 +353,0 @@\n-  auto is_word_aligned = [] (const void* const p) {\n-      return is_aligned(p, sizeof(Word));\n-  };\n-\n@@ -361,1 +358,1 @@\n-  while (!is_word_aligned(i_card)) {\n+  while (!is_aligned(i_card, sizeof(Word))) {\n@@ -381,1 +378,1 @@\n-  \/\/ Byte comparison\n+  \/\/ Per-CardValue comparison.\n@@ -391,0 +388,5 @@\n+\/\/ Because non-objArray objs can be imprecisely-marked (only obj-start card is\n+\/\/ dirty instead of the part containing old-to-young pointers), if the\n+\/\/ obj-start of a non-objArray is dirty, all cards that obj resides are\n+\/\/ considered as dirty, since that obj will be iterated (scanned for\n+\/\/ old-to-young pointers) as a whole.\n@@ -410,1 +412,1 @@\n-    \/\/ final obj in dirty-chunk crosses card-boundary\n+    \/\/ Final obj in dirty-chunk crosses card-boundary.\n@@ -413,1 +415,2 @@\n-      \/\/ ObjArrays are always precisely-marked so we are not allowed to jump to the end of the current object.\n+      \/\/ ObjArrays are always precisely-marked so we are not allowed to jump to\n+      \/\/ the end of the current object.\n@@ -417,1 +420,1 @@\n-    \/\/ final card occupied by this obj\n+    \/\/ Final card occupied by this obj.\n@@ -476,0 +479,3 @@\n+  \/\/ if mr.end() is not card-aligned, that final card should not be cleared\n+  \/\/ because it can be annotated dirty due to old-to-young pointers in\n+  \/\/ newly-promoted objs on that card.\n","filename":"src\/hotspot\/share\/gc\/serial\/cardTableRS.cpp","additions":15,"deletions":9,"binary":false,"changes":24,"status":"modified"}]}