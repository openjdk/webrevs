{"files":[{"patch":"@@ -300,8 +300,3 @@\n-    if (_target_jt != nullptr) {\n-      assert(_target_jt->vthread() == target_h(), \"sanity check\");\n-      do_thread(_target_jt);\n-      return;\n-    }\n-    if (!JvmtiEnvBase::is_vthread_alive(target_h())) {\n-      return; \/\/ _completed remains false.\n-    }\n+    assert(_target_jt == nullptr || !_target_jt->is_exiting(), \"sanity check\");\n+    \/\/ use jvmti_vthread() as vthread() can be outdated\n+    assert(_target_jt == nullptr || _target_jt->jvmti_vthread() == target_h(), \"sanity check\");\n","filename":"src\/hotspot\/share\/prims\/jvmtiEnvThreadState.cpp","additions":3,"deletions":8,"binary":false,"changes":11,"status":"modified"}]}