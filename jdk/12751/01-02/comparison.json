{"files":[{"patch":"@@ -219,3 +219,5 @@\n-                \/\/ Every second check if process is still alive\n-                boolean succeeded = Utils.waitForCondition(() -> {\n-                    \/\/Fail if process finished before printed expected string\n+                \/\/ Every second check if line is printed and if process is still alive\n+                Utils.waitForCondition(() -> latch.getCount() == 0 || !p.isAlive(),\n+                        unit.toMillis(Utils.adjustTimeout(timeout)), 1000);\n+\n+                if (latch.getCount() != 0) {\n@@ -223,1 +225,0 @@\n-                        latch.countDown();\n@@ -225,0 +226,2 @@\n+                    } else {\n+                        throw new TimeoutException();\n@@ -226,9 +229,0 @@\n-                    try {\n-                       return latch.await(1, TimeUnit.SECONDS);\n-                    } catch (InterruptedException e) {\n-                        throw new RuntimeException(e);\n-                    }\n-                }, unit.toMillis(Utils.adjustTimeout(timeout)), 0);\n-\n-                if (!succeeded) {\n-                    throw new TimeoutException();\n","filename":"test\/lib\/jdk\/test\/lib\/process\/ProcessTools.java","additions":7,"deletions":13,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -153,2 +153,0 @@\n-            String name = Thread.currentThread().getName();\n-\n","filename":"test\/lib\/jdk\/test\/lib\/thread\/ProcessThread.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"}]}