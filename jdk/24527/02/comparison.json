{"files":[{"patch":"@@ -27,0 +27,1 @@\n+import java.lang.ref.Reference;\n@@ -28,0 +29,2 @@\n+import java.lang.reflect.InvocationTargetException;\n+import java.lang.reflect.Method;\n@@ -559,0 +562,21 @@\n+  \/**\n+   * Wait for reference processing, via Reference.waitForReferenceProcessing().\n+   * Callers of this method will need the\n+   * @modules java.base\/java.lang.ref:open\n+   * jtreg tag.\n+   *\n+   * This method should usually be called after a call to WhiteBox.fullGC().\n+   *\/\n+  public static void waitForReferenceProcessing() {\n+    try {\n+      Method wfrp = Reference.class.getDeclaredMethod(\"waitForReferenceProcessing\");\n+      wfrp.setAccessible(true);\n+      wfrp.invoke(null, new Object[0]);\n+    } catch (IllegalAccessException iae) {\n+      throw new RuntimeException(\"Need to add @modules java.base\/java.lang.ref:open?\",\n+              iae);\n+    } catch (NoSuchMethodException | InvocationTargetException e) {\n+      throw new RuntimeException(\"Reflection problem\", e);\n+    }\n+  }\n+\n","filename":"test\/lib\/jdk\/test\/whitebox\/WhiteBox.java","additions":24,"deletions":0,"binary":false,"changes":24,"status":"modified"}]}