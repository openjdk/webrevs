{"files":[{"patch":"@@ -181,3 +181,1 @@\n-void PSOldGen::try_expand_to_hold(size_t live_bytes) {\n-  \/\/ Leaving room for a minimal delta\n-  size_t target_capacity_bytes = live_bytes + SpaceAlignment;\n+void PSOldGen::try_expand_till_size(size_t target_capacity_bytes) {\n","filename":"src\/hotspot\/share\/gc\/parallel\/psOldGen.cpp","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -85,1 +85,1 @@\n-  void try_expand_to_hold(size_t live_bytes);\n+  void try_expand_till_size(size_t live_bytes);\n","filename":"src\/hotspot\/share\/gc\/parallel\/psOldGen.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -895,3 +895,5 @@\n-      size_t live_and_waste_words = total_live_words + old_space->capacity_in_words() * (MarkSweepDeadRatio \/ 100.0);\n-      \/\/ Try to expand old-gen in order to fit all live objs (plus waste).\n-      ParallelScavengeHeap::heap()->old_gen()->try_expand_to_hold(live_and_waste_words * HeapWordSize);\n+      \/\/ Try to expand old-gen in order to fit all live objs, waste, and minimal delta room.\n+      size_t target_capacity_bytes = total_live_words * HeapWordSize\n+                                   + old_space->capacity_in_bytes() * (MarkSweepDeadRatio \/ 100.0)\n+                                   + SpaceAlignment;\n+      ParallelScavengeHeap::heap()->old_gen()->try_expand_till_size(target_capacity_bytes);\n","filename":"src\/hotspot\/share\/gc\/parallel\/psParallelCompact.cpp","additions":5,"deletions":3,"binary":false,"changes":8,"status":"modified"}]}