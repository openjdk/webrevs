{"files":[{"patch":"@@ -1390,2 +1390,3 @@\n-instanceOop InstanceKlass::allocate_instance(InstanceKlass* ik, TRAPS) {\n-  if (ik == nullptr) {\n+instanceOop InstanceKlass::allocate_instance(oop java_class, TRAPS) {\n+  Klass* k = java_lang_Class::as_Klass(java_class);\n+  if (k == nullptr) {\n@@ -1395,0 +1396,1 @@\n+  InstanceKlass* ik = cast(k);\n","filename":"src\/hotspot\/share\/oops\/instanceKlass.cpp","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -835,1 +835,1 @@\n-  static instanceOop allocate_instance(InstanceKlass* cls, TRAPS);\n+  static instanceOop allocate_instance(oop cls, TRAPS);\n","filename":"src\/hotspot\/share\/oops\/instanceKlass.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -966,3 +966,1 @@\n-  instanceOop i = InstanceKlass::allocate_instance(\n-                    InstanceKlass::cast(java_lang_Class::as_Klass(JNIHandles::resolve_non_null(clazz))),\n-                    CHECK_NULL);\n+  instanceOop i = InstanceKlass::allocate_instance(JNIHandles::resolve_non_null(clazz), CHECK_NULL);\n@@ -982,3 +980,1 @@\n-  instanceOop i = InstanceKlass::allocate_instance(\n-                    InstanceKlass::cast(java_lang_Class::as_Klass(JNIHandles::resolve_non_null(clazz))),\n-                    CHECK_NULL);\n+  instanceOop i = InstanceKlass::allocate_instance(JNIHandles::resolve_non_null(clazz), CHECK_NULL);\n@@ -1002,3 +998,1 @@\n-  instanceOop i = InstanceKlass::allocate_instance(\n-                    InstanceKlass::cast(java_lang_Class::as_Klass(JNIHandles::resolve_non_null(clazz))),\n-                    CHECK_NULL);\n+  instanceOop i = InstanceKlass::allocate_instance(JNIHandles::resolve_non_null(clazz), CHECK_NULL);\n@@ -1022,4 +1016,2 @@\n-  instanceOop i = InstanceKlass::allocate_instance(\n-                    InstanceKlass::cast(java_lang_Class::as_Klass(JNIHandles::resolve_non_null(clazz))),\n-                    CHECK_NULL);\n-  obj = JNIHandles::make_local(THREAD, i);\n+  instanceOop i = InstanceKlass::allocate_instance(JNIHandles::resolve_non_null(clazz), CHECK_NULL);\n+    obj = JNIHandles::make_local(THREAD, i);\n","filename":"src\/hotspot\/share\/prims\/jni.cpp","additions":5,"deletions":13,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -334,3 +334,1 @@\n-  instanceOop i = InstanceKlass::allocate_instance(\n-                    InstanceKlass::cast(java_lang_Class::as_Klass(JNIHandles::resolve_non_null(cls))),\n-                    CHECK_NULL);\n+  instanceOop i = InstanceKlass::allocate_instance(JNIHandles::resolve_non_null(cls), CHECK_NULL);\n","filename":"src\/hotspot\/share\/prims\/unsafe.cpp","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"}]}