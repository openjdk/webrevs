{"files":[{"patch":"@@ -24,0 +24,1 @@\n+import org.junit.jupiter.api.condition.EnabledIf;\n@@ -49,8 +50,0 @@\n-\/*\n- * @test\n- * @bug 8289643 8291986\n- * @requires os.family == \"mac\" | (os.family == \"linux\" & !vm.musl)\n- * @summary File descriptor leak detection with ProcessBuilder.startPipeline\n- * @run junit\/othervm -Xint PipelineLeaksFD\n- *\/\n-\n@@ -63,0 +56,2 @@\n+    private static final boolean LSOF_AVAILABLE = checkForLSOF();\n+\n@@ -77,0 +72,17 @@\n+    \/\/ True if lsof is runnable and collect pipe usage.\n+    private static boolean lsofAvailable() {\n+        return LSOF_AVAILABLE;\n+    }\n+\n+    \/\/ Check if lsof is available\n+    private static boolean checkForLSOF() {\n+        try {\n+            pipesForPid(MY_PID);\n+            return true;\n+        } catch (IOException ioe) {\n+            System.err.println(\"Skipping: \" + ioe);\n+            return false;\n+        }\n+    }\n+\n+    @EnabledIf(\"lsofAvailable\")\n@@ -134,0 +146,1 @@\n+    @EnabledIf(\"lsofAvailable\")\n","filename":"test\/jdk\/java\/lang\/ProcessBuilder\/PipelineLeaksFD.java","additions":21,"deletions":8,"binary":false,"changes":29,"status":"modified"}]}