{"files":[{"patch":"@@ -958,3 +958,2 @@\n-                                                      int constant,\n-                                                      bool decrement) {\n-  increment_mdp_data_at(mdp_in, noreg, constant, decrement);\n+                                                      int constant) {\n+  increment_mdp_data_at(mdp_in, noreg, constant);\n@@ -964,3 +963,2 @@\n-                                                      Register reg,\n-                                                      int constant,\n-                                                      bool decrement) {\n+                                                      Register index,\n+                                                      int constant) {\n@@ -968,2 +966,0 @@\n-  \/\/ %%% this does 64bit counters at best it is wasting space\n-  \/\/ at worst it is a rare bug when counters overflow\n@@ -971,1 +967,1 @@\n-  assert_different_registers(t1, t0, mdp_in, reg);\n+  assert_different_registers(t1, t0, mdp_in, index);\n@@ -976,1 +972,1 @@\n-  if (reg != noreg) {\n+  if (index != noreg) {\n@@ -978,1 +974,1 @@\n-    add(t1, t1, reg);\n+    add(t1, t1, index);\n@@ -982,17 +978,3 @@\n-  if (decrement) {\n-    ld(t0, addr);\n-    subi(t0, t0, DataLayout::counter_increment);\n-    Label L;\n-    bltz(t0, L);      \/\/ skip store if counter underflow\n-    sd(t0, addr);\n-    bind(L);\n-  } else {\n-    assert(DataLayout::counter_increment == 1,\n-           \"flow-free idiom only works with 1\");\n-    ld(t0, addr);\n-    addi(t0, t0, DataLayout::counter_increment);\n-    Label L;\n-    blez(t0, L);       \/\/ skip store if counter overflow\n-    sd(t0, addr);\n-    bind(L);\n-  }\n+  ld(t0, addr);\n+  addi(t0, t0, DataLayout::counter_increment);\n+  sd(t0, addr);\n","filename":"src\/hotspot\/cpu\/riscv\/interp_masm_riscv.cpp","additions":10,"deletions":28,"binary":false,"changes":38,"status":"modified"},{"patch":"@@ -236,5 +236,2 @@\n-  void increment_mdp_data_at(Address data, bool decrement = false);\n-  void increment_mdp_data_at(Register mdp_in, int constant,\n-                             bool decrement = false);\n-  void increment_mdp_data_at(Register mdp_in, Register reg, int constant,\n-                             bool decrement = false);\n+  void increment_mdp_data_at(Register mdp_in, int constant);\n+  void increment_mdp_data_at(Register mdp_in, Register index, int constant);\n","filename":"src\/hotspot\/cpu\/riscv\/interp_masm_riscv.hpp","additions":2,"deletions":5,"binary":false,"changes":7,"status":"modified"}]}