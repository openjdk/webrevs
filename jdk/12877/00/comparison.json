{"files":[{"patch":"@@ -719,1 +719,1 @@\n-void CodeBuffer::copy_code_to(CodeBlob* dest_blob) {\n+void CodeBuffer::copy_code_to(CodeBlob* dest_blob, bool flush_icache) {\n@@ -744,1 +744,3 @@\n-  ICache::invalidate_range(dest_blob->code_begin(), dest_blob->code_size());\n+  if (flush_icache) {\n+    ICache::invalidate_range(dest_blob->code_begin(), dest_blob->code_size());\n+  }\n","filename":"src\/hotspot\/share\/asm\/codeBuffer.cpp","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -504,1 +504,1 @@\n-  void copy_code_to(CodeBlob* blob);\n+  void copy_code_to(CodeBlob* blob, bool flush_icache);\n@@ -700,1 +700,1 @@\n-  void copy_code_and_locs_to(CodeBlob* blob) {\n+  void copy_code_and_locs_to(CodeBlob* blob, bool flush_icache) {\n@@ -703,1 +703,1 @@\n-    copy_code_to(blob);\n+    copy_code_to(blob, flush_icache);\n","filename":"src\/hotspot\/share\/asm\/codeBuffer.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -316,3 +316,0 @@\n-\n-  \/\/ done\n-  masm()->flush();\n","filename":"src\/hotspot\/share\/c1\/c1_Compilation.cpp","additions":0,"deletions":3,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -161,1 +161,1 @@\n-  cb->copy_code_and_locs_to(this);\n+  cb->copy_code_and_locs_to(this, true);\n","filename":"src\/hotspot\/share\/code\/codeBlob.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -701,1 +701,2 @@\n-    code_buffer->copy_code_and_locs_to(this);\n+    \/\/ ICache flushing not needed as done later in CodeCache::commit\n+    code_buffer->copy_code_and_locs_to(this, false);\n@@ -881,1 +882,2 @@\n-    code_buffer->copy_code_and_locs_to(this);\n+    \/\/ ICache flushing not needed as done later in CodeCache::commit\n+    code_buffer->copy_code_and_locs_to(this, false);\n","filename":"src\/hotspot\/share\/code\/nmethod.cpp","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"}]}