{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2009, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2009, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -88,0 +88,22 @@\n+    \/**\n+     * Boolean value indicating whether OCSP client can use GET for OCSP\n+     * requests. There is an ambiguity in RFC recommendations.\n+     *\n+     * RFC 5019 says a stronger thing, \"MUST\":\n+     *    \"When sending requests that are less than or equal to 255 bytes in\n+     *     total (after encoding) including the scheme and delimiters (http:\/\/),\n+     *     server name and base64-encoded OCSPRequest structure, clients MUST\n+     *     use the GET method (to enable OCSP response caching).\"\n+     *\n+     * RFC 6960 says a weaker thing, \"MAY\":\n+     *    \"HTTP-based OCSP requests can use either the GET or the POST method to\n+     *     submit their requests.  To enable HTTP caching, small requests (that\n+     *     after encoding are less than 255 bytes) MAY be submitted using GET.\"\n+     *\n+     * For performance reasons, we default to stronger behavior. But this\n+     * option also allows to fallback to weaker behavior in case of compatibility\n+     * problems.\n+     *\/\n+    private static final boolean USE_GET = initializeBoolean(\n+            \"com.sun.security.ocsp.useget\", \"true\");\n+\n@@ -102,0 +124,9 @@\n+    private static boolean initializeBoolean(String prop, String def) {\n+        String flag = GetPropertyAction.privilegedGetProperty(prop, def);\n+        boolean value = Boolean.parseBoolean(flag);\n+        if (debug != null) {\n+            debug.println(prop + \" set to \" + value);\n+        }\n+        return value;\n+    }\n+\n@@ -189,1 +220,1 @@\n-            if (encodedGetReq.length() <= 255) {\n+            if (USE_GET && encodedGetReq.length() <= 255) {\n","filename":"src\/java.base\/share\/classes\/sun\/security\/provider\/certpath\/OCSP.java","additions":33,"deletions":2,"binary":false,"changes":35,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2020, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2020, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,1 +26,1 @@\n- * @bug 8179503\n+ * @bug 8179503 8328638\n@@ -34,0 +34,1 @@\n+ * @run main\/othervm -Dcom.sun.security.ocsp.useget=false GetAndPostTests\n","filename":"test\/jdk\/java\/security\/cert\/CertPathValidator\/OCSP\/GetAndPostTests.java","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"}]}