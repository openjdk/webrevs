{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2009, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2009, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -88,0 +88,22 @@\n+    \/**\n+     * Boolean value indicating whether OCSP client can use GET for OCSP\n+     * requests. There is an ambiguity in RFC recommendations.\n+     *\n+     * RFC 5019 says a stronger thing, \"MUST\":\n+     *    \"When sending requests that are less than or equal to 255 bytes in\n+     *     total (after encoding) including the scheme and delimiters (http:\/\/),\n+     *     server name and base64-encoded OCSPRequest structure, clients MUST\n+     *     use the GET method (to enable OCSP response caching).\"\n+     *\n+     * RFC 6960 says a weaker thing, \"MAY\":\n+     *    \"HTTP-based OCSP requests can use either the GET or the POST method to\n+     *     submit their requests.  To enable HTTP caching, small requests (that\n+     *     after encoding are less than 255 bytes) MAY be submitted using GET.\"\n+     *\n+     * For performance reasons, we default to stronger behavior. But this\n+     * option also allows to fallback to weaker behavior in case of compatibility\n+     * problems.\n+     *\/\n+    private static final boolean USE_GET = initializeBoolean(\n+            \"com.sun.security.ocsp.useget\", \"true\");\n+\n@@ -102,0 +124,9 @@\n+    private static boolean initializeBoolean(String prop, String def) {\n+        String flag = GetPropertyAction.privilegedGetProperty(prop, def);\n+        boolean value = Boolean.parseBoolean(flag);\n+        if (debug != null) {\n+            debug.println(prop + \" set to \" + value);\n+        }\n+        return value;\n+    }\n+\n@@ -189,1 +220,1 @@\n-            if (encodedGetReq.length() <= 255) {\n+            if (USE_GET && encodedGetReq.length() <= 255) {\n","filename":"src\/java.base\/share\/classes\/sun\/security\/provider\/certpath\/OCSP.java","additions":33,"deletions":2,"binary":false,"changes":35,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2020, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2020, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,1 +26,1 @@\n- * @bug 8179503\n+ * @bug 8179503 8328638\n@@ -34,0 +34,1 @@\n+ * @run main\/othervm -Dcom.sun.security.ocsp.useget=false GetAndPostTests\n","filename":"test\/jdk\/java\/security\/cert\/CertPathValidator\/OCSP\/GetAndPostTests.java","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -33,0 +33,3 @@\n+ *  -Dcom.sun.security.ocsp.useget=false\n+ *  CAInterop actalisauthenticationrootca OCSP\n+ * @run main\/othervm\/timeout=180 -Djava.security.debug=certpath,ocsp\n@@ -43,0 +46,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop amazonrootca1 OCSP\n@@ -53,0 +57,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop amazonrootca2 OCSP\n@@ -63,0 +68,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop amazonrootca3 OCSP\n@@ -73,0 +79,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop amazonrootca4 OCSP\n@@ -83,0 +90,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop buypassclass2ca OCSP\n@@ -93,0 +101,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop buypassclass3ca OCSP\n@@ -103,0 +112,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop comodorsaca OCSP\n@@ -113,0 +123,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop comodoeccca OCSP\n@@ -123,0 +134,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop usertrustrsaca OCSP\n@@ -133,0 +145,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop usertrusteccca OCSP\n@@ -143,0 +156,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop letsencryptisrgx1 DEFAULT\n@@ -152,0 +166,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop letsencryptisrgx2 DEFAULT\n@@ -161,0 +176,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop globalsignrootcar6 OCSP\n@@ -171,0 +187,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop entrustrootcaec1 OCSP\n@@ -181,0 +198,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop entrustrootcag4 OCSP\n@@ -191,0 +209,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop godaddyrootg2ca OCSP\n@@ -201,0 +220,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop starfieldrootg2ca OCSP\n@@ -211,0 +231,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=falseCAInterop globalsigneccrootcar4 OCSP\n@@ -221,0 +242,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop gtsrootcar1 OCSP\n@@ -231,0 +253,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop gtsrootcar2 OCSP\n@@ -241,0 +264,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop gtsrootecccar3 OCSP\n@@ -251,0 +275,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop gtsrootecccar4 OCSP\n@@ -261,0 +286,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop microsoftecc2017 OCSP\n@@ -271,0 +297,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop microsoftrsa2017 OCSP\n@@ -281,0 +308,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop quovadisrootca1g3 OCSP\n@@ -291,0 +319,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop quovadisrootca2g3 OCSP\n@@ -301,0 +330,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop quovadisrootca3g3 OCSP\n@@ -311,0 +341,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop digicerttlseccrootg5 OCSP\n@@ -321,0 +352,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop digicerttlsrsarootg5 OCSP\n@@ -331,0 +363,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop sslrootrsaca OCSP\n@@ -341,0 +374,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop sslrootevrsaca OCSP\n@@ -351,0 +385,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop sslrooteccca OCSP\n@@ -361,0 +396,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop teliasonerarootcav1 OCSP\n@@ -371,0 +407,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop twcaglobalrootca OCSP\n@@ -381,0 +418,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop certignarootca OCSP\n@@ -391,0 +429,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop affirmtrustcommercialca OCSP\n@@ -401,0 +440,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop affirmtrustnetworkingca OCSP\n@@ -411,0 +451,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop affirmtrustpremiumca OCSP\n@@ -421,0 +462,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop affirmtrustpremiumeccca OCSP\n@@ -431,0 +473,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop teliarootcav2 OCSP\n@@ -441,0 +484,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop emsignrootcag1 OCSP\n@@ -451,0 +495,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop emsigneccrootcag3 OCSP\n@@ -461,0 +506,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop certainlyrootr1 DEFAULT\n@@ -470,0 +516,1 @@\n+ * @run main\/othervm -Djava.security.debug=certpath,ocsp -Dcom.sun.security.ocsp.useget=false CAInterop certainlyroote1 DEFAULT\n","filename":"test\/jdk\/security\/infra\/java\/security\/cert\/CertPathValidator\/certification\/CAInterop.java","additions":47,"deletions":0,"binary":false,"changes":47,"status":"modified"}]}