{"files":[{"patch":"@@ -133,1 +133,10 @@\n-  return align_down(s \/ (size_t)lgrp_spaces()->length(), MinObjAlignmentInBytes);\n+\n+  size_t average_free_in_bytes = s \/ (size_t)lgrp_spaces()->length();\n+\n+  \/\/ free_in_bytes() is aligned to MinObjAlignmentInBytes, but averaging across\n+  \/\/ all LGRPs can produce a non-aligned result. We align the value here because\n+  \/\/ it may be used directly for TLAB allocation, which requires the allocation\n+  \/\/ size to be properly aligned.\n+  size_t aligned_average = align_down(average_free_in_bytes, MinObjAlignmentInBytes);\n+\n+  return aligned_average;\n","filename":"src\/hotspot\/share\/gc\/parallel\/mutableNUMASpace.cpp","additions":10,"deletions":1,"binary":false,"changes":11,"status":"modified"}]}