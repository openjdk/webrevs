{"files":[{"patch":"@@ -205,2 +205,1 @@\n-template <typename DerivedPointerClosureType>\n-class EncodeGCModeConcurrentFrameClosure {\n+class TransformStackChunkClosure {\n@@ -208,1 +207,1 @@\n-  DerivedPointerClosureType* _cl;\n+  DerivedPointersSupport::RelativizeClosure* _cl;\n@@ -211,1 +210,1 @@\n-  EncodeGCModeConcurrentFrameClosure(stackChunkOop chunk, DerivedPointerClosureType* cl)\n+  TransformStackChunkClosure(stackChunkOop chunk, DerivedPointersSupport::RelativizeClosure* cl)\n@@ -299,1 +298,1 @@\n-  EncodeGCModeConcurrentFrameClosure<decltype(derived_cl)> frame_cl(this, &derived_cl);\n+  TransformStackChunkClosure frame_cl(this, &derived_cl);\n@@ -305,20 +304,0 @@\n-class TransformStackChunkClosure {\n-  stackChunkOop _chunk;\n-\n-public:\n-  TransformStackChunkClosure(stackChunkOop chunk) : _chunk(chunk) { }\n-\n-  template <ChunkFrames frame_kind, typename RegisterMapT>\n-  bool do_frame(const StackChunkFrameStream<frame_kind>& f, const RegisterMapT* map) {\n-    DerivedPointersSupport::RelativizeClosure derived_cl;\n-    f.iterate_derived_pointers(&derived_cl, map);\n-\n-    BarrierSetStackChunk* bs_chunk = BarrierSet::barrier_set()->barrier_set_stack_chunk();\n-    frame fr = f.to_frame();\n-    FrameOopIterator<RegisterMapT> iterator(fr, map);\n-    bs_chunk->encode_gc_mode(_chunk, &iterator);\n-\n-    return true;\n-  }\n-};\n-\n@@ -333,1 +312,2 @@\n-  TransformStackChunkClosure closure(this);\n+  DerivedPointersSupport::RelativizeClosure derived_cl;\n+  TransformStackChunkClosure closure(this, &derived_cl);\n","filename":"src\/hotspot\/share\/oops\/stackChunkOop.cpp","additions":6,"deletions":26,"binary":false,"changes":32,"status":"modified"}]}