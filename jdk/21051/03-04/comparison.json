{"files":[{"patch":"@@ -49,1 +49,0 @@\n-\n@@ -61,1 +60,1 @@\n-           WINDOW_DEACTIVATED,WINDOW_LOST_FOCUS event were generated.\n+           WINDOW_DEACTIVATED, WINDOW_LOST_FOCUS event were generated.\n@@ -80,1 +79,1 @@\n-                .testUI(AltTabEventsTest::createTestUI)\n+                .testUI(Test::new)\n@@ -86,3 +85,0 @@\n-    private static Frame createTestUI() {\n-        return new Test();\n-    }\n","filename":"test\/jdk\/java\/awt\/Focus\/AltTabEventsTest.java","additions":2,"deletions":6,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -33,0 +33,1 @@\n+import java.awt.EventQueue;\n@@ -47,2 +48,2 @@\n-    Frame frame = new Frame(\"Frame\");\n-    TextField tf = new TextField(\"Text Field\");\n+    static Frame frame;\n+    static TextField tf;\n@@ -50,10 +51,5 @@\n-    Dialog dialog = null;\n-    volatile boolean passed;\n-\n-    public ComponentLostFocusTest() {\n-        try{\n-            r = new Robot();\n-        } catch(Exception e){\n-            throw new RuntimeException(e);\n-        }\n-        r.setAutoDelay(100);\n+    static Dialog dialog = null;\n+    static volatile boolean passed;\n+    static Point loc;\n+\n+    private static void createTestUI() {\n@@ -63,0 +59,2 @@\n+        frame = new Frame(\"ComponentLostFocusTest Frame\");\n+        frame.setLayout(new FlowLayout());\n@@ -68,2 +66,1 @@\n-\n-        frame.setLayout (new FlowLayout ());\n+        tf = new TextField(\"Text Field\");\n@@ -77,3 +74,1 @@\n-    public void doTest() {\n-        \/\/ Do requesting focus to the modal dialog in order to after that\n-        \/\/ to do requesting focus to the frame\n+    public static void doTest() {\n@@ -103,1 +98,1 @@\n-                System.out.println(\"TextField gained focus: \"+e);\n+                System.out.println(\"TextField gained focus: \" + e);\n@@ -108,8 +103,0 @@\n-        doRequestFocusToTextField();\n-\n-        System.out.println(\"Focused window: \" + KeyboardFocusManager.getCurrentKeyboardFocusManager().getFocusedWindow());\n-        System.out.println(\"Focus owner: \" + KeyboardFocusManager.getCurrentKeyboardFocusManager().getFocusOwner());\n-\n-        if (!passed) {\n-            throw new RuntimeException(\"TextField got no focus! Test failed.\");\n-        }\n@@ -118,1 +105,1 @@\n-    private void doRequestFocusToTextField(){\n+    private static void doRequestFocusToTextField() {\n@@ -120,2 +107,1 @@\n-        Point loc = frame.getLocationOnScreen();\n-        r.mouseMove(loc.x + frame.getWidth()\/2, loc.y + frame.getInsets().top\/2);\n+        r.mouseMove(loc.x + frame.getWidth() \/ 2, loc.y + frame.getInsets().top \/ 2);\n@@ -131,2 +117,6 @@\n-    public static final void main(String args[]){\n-        ComponentLostFocusTest test = new ComponentLostFocusTest();\n+    public static final void main(String args[]) throws Exception {\n+        r = new Robot();\n+        r.setAutoDelay(100);\n+\n+        ComponentLostFocusTest test;\n+        EventQueue.invokeAndWait(() -> createTestUI());\n@@ -135,1 +125,24 @@\n-        test.doTest();\n+        try {\n+            EventQueue.invokeAndWait(() -> {\n+                doTest();\n+                loc = frame.getLocationOnScreen();\n+            });\n+            doRequestFocusToTextField();\n+\n+            System.out.println(\"Focused window: \" +\n+                KeyboardFocusManager.getCurrentKeyboardFocusManager().\n+                                     getFocusedWindow());\n+            System.out.println(\"Focus owner: \" +\n+                KeyboardFocusManager.getCurrentKeyboardFocusManager().\n+                                     getFocusOwner());\n+\n+            if (!passed) {\n+                throw new RuntimeException(\"TextField got no focus! Test failed.\");\n+            }\n+        } finally {\n+            EventQueue.invokeAndWait(() -> {\n+                if (frame != null) {\n+                    frame.dispose();\n+                }\n+            });\n+        }\n","filename":"test\/jdk\/java\/awt\/Focus\/ComponentLostFocusTest.java","additions":45,"deletions":32,"binary":false,"changes":77,"status":"modified"}]}