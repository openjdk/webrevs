{"files":[{"patch":"@@ -294,3 +294,3 @@\n-void G1CMMarkStack::add_chunk_to_list(TaskQueueEntryChunk* volatile* list, TaskQueueEntryChunk* elem) {\n-  elem->next = *list;\n-  *list = elem;\n+void G1CMMarkStack::add_chunk_to_list(Atomic<TaskQueueEntryChunk*>* list, TaskQueueEntryChunk* elem) {\n+  elem->next = list->load_relaxed();\n+  list->store_relaxed(elem);\n@@ -310,2 +310,2 @@\n-G1CMMarkStack::TaskQueueEntryChunk* G1CMMarkStack::remove_chunk_from_list(TaskQueueEntryChunk* volatile* list) {\n-  TaskQueueEntryChunk* result = *list;\n+G1CMMarkStack::TaskQueueEntryChunk* G1CMMarkStack::remove_chunk_from_list(Atomic<TaskQueueEntryChunk*>* list) {\n+  TaskQueueEntryChunk* result = list->load_relaxed();\n@@ -313,1 +313,1 @@\n-    *list = (*list)->next;\n+    list->store_relaxed(list->load_relaxed()->next);\n@@ -367,2 +367,2 @@\n-  _chunk_list = nullptr;\n-  _free_list = nullptr;\n+  _chunk_list.store_relaxed(nullptr);\n+  _free_list.store_relaxed(nullptr);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1ConcurrentMark.cpp","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -213,1 +213,1 @@\n-  TaskQueueEntryChunk* volatile _free_list;  \/\/ Linked list of free chunks that can be allocated by users.\n+  Atomic<TaskQueueEntryChunk*> _free_list;  \/\/ Linked list of free chunks that can be allocated by users.\n@@ -215,1 +215,1 @@\n-  TaskQueueEntryChunk* volatile _chunk_list; \/\/ List of chunks currently containing data.\n+  Atomic<TaskQueueEntryChunk*> _chunk_list; \/\/ List of chunks currently containing data.\n@@ -220,1 +220,1 @@\n-  void add_chunk_to_list(TaskQueueEntryChunk* volatile* list, TaskQueueEntryChunk* elem);\n+  void add_chunk_to_list(Atomic<TaskQueueEntryChunk*>* list, TaskQueueEntryChunk* elem);\n@@ -223,1 +223,1 @@\n-  TaskQueueEntryChunk* remove_chunk_from_list(TaskQueueEntryChunk* volatile* list);\n+  TaskQueueEntryChunk* remove_chunk_from_list(Atomic<TaskQueueEntryChunk*>* list);\n@@ -255,1 +255,1 @@\n-  bool is_empty() const { return _chunk_list == nullptr; }\n+  bool is_empty() const { return _chunk_list.load_relaxed() == nullptr; }\n","filename":"src\/hotspot\/share\/gc\/g1\/g1ConcurrentMark.hpp","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -93,1 +93,1 @@\n-  TaskQueueEntryChunk* cur = _chunk_list;\n+  TaskQueueEntryChunk* cur = _chunk_list.load_relaxed();\n","filename":"src\/hotspot\/share\/gc\/g1\/g1ConcurrentMark.inline.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}