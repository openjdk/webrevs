{"files":[{"patch":"@@ -33,1 +33,0 @@\n-import java.util.concurrent.CompletableFuture;\n@@ -117,1 +116,1 @@\n-        try (HttpClient client = pair.createClientWithEstablishedConnection()) {\n+        try (var client = pair.createClientWithEstablishedConnection()) {\n@@ -120,2 +119,1 @@\n-                HttpResponse<InputStream> response = client.send(\n-                        pair.request(), HttpResponse.BodyHandlers.ofInputStream());\n+                var response = client.send(pair.request(), HttpResponse.BodyHandlers.ofInputStream());\n@@ -143,1 +141,1 @@\n-        try (HttpClient client = pair.createClientWithEstablishedConnection()) {\n+        try (var client = pair.createClientWithEstablishedConnection()) {\n@@ -146,2 +144,1 @@\n-                CompletableFuture<HttpResponse<InputStream>> responseFuture = client.sendAsync(\n-                        pair.request(), HttpResponse.BodyHandlers.ofInputStream());\n+                var responseFuture = client.sendAsync(pair.request(), HttpResponse.BodyHandlers.ofInputStream());\n@@ -149,1 +146,1 @@\n-                HttpResponse<InputStream> response = responseFuture.get();\n+                var response = responseFuture.get();\n@@ -162,2 +159,2 @@\n-            try (InputStream responseBodyStream = response.body()) {\n-                int readByte = responseBodyStream.read();\n+            try (var responseBodyStream = response.body()) {\n+                var readByte = responseBodyStream.read();\n@@ -181,1 +178,1 @@\n-        try (HttpClient client = pair.createClientWithEstablishedConnection()) {\n+        try (var client = pair.createClientWithEstablishedConnection()) {\n@@ -184,2 +181,1 @@\n-                HttpResponse<InputStream> response = client.send(\n-                        pair.request(), HttpResponse.BodyHandlers.ofInputStream());\n+                var response = client.send(pair.request(), HttpResponse.BodyHandlers.ofInputStream());\n@@ -207,1 +203,1 @@\n-        try (HttpClient client = pair.createClientWithEstablishedConnection()) {\n+        try (var client = pair.createClientWithEstablishedConnection()) {\n@@ -210,2 +206,1 @@\n-                CompletableFuture<HttpResponse<InputStream>> responseFuture = client.sendAsync(\n-                        pair.request(), HttpResponse.BodyHandlers.ofInputStream());\n+                var responseFuture = client.sendAsync(pair.request(), HttpResponse.BodyHandlers.ofInputStream());\n@@ -213,1 +208,1 @@\n-                HttpResponse<InputStream> response = responseFuture.get();\n+                var response = responseFuture.get();\n@@ -226,1 +221,1 @@\n-            try (InputStream responseBodyStream = response.body()) {\n+            try (var responseBodyStream = response.body()) {\n@@ -231,1 +226,1 @@\n-                    int readByte = responseBodyStream.read();\n+                    var readByte = responseBodyStream.read();\n@@ -255,1 +250,1 @@\n-        try (HttpClient client = pair.createClientWithEstablishedConnection()) {\n+        try (var client = pair.createClientWithEstablishedConnection()) {\n@@ -279,1 +274,1 @@\n-        try (HttpClient client = pair.createClientWithEstablishedConnection()) {\n+        try (var client = pair.createClientWithEstablishedConnection()) {\n","filename":"test\/jdk\/java\/net\/httpclient\/TimeoutResponseBodyTest.java","additions":16,"deletions":21,"binary":false,"changes":37,"status":"modified"},{"patch":"@@ -32,1 +32,0 @@\n-import java.util.concurrent.CompletableFuture;\n@@ -105,1 +104,1 @@\n-        try (HttpClient client = pair.createClientWithEstablishedConnection()) {\n+        try (var client = pair.createClientWithEstablishedConnection()) {\n@@ -125,1 +124,1 @@\n-        try (HttpClient client = pair.createClientWithEstablishedConnection()) {\n+        try (var client = pair.createClientWithEstablishedConnection()) {\n@@ -128,2 +127,1 @@\n-                CompletableFuture<HttpResponse<Void>> responseFuture =\n-                        client.sendAsync(pair.request(), HttpResponse.BodyHandlers.discarding());\n+                var responseFuture = client.sendAsync(pair.request(), HttpResponse.BodyHandlers.discarding());\n","filename":"test\/jdk\/java\/net\/httpclient\/TimeoutResponseHeaderTest.java","additions":3,"deletions":5,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -39,1 +39,0 @@\n-import java.io.OutputStream;\n@@ -98,1 +97,1 @@\n-                String message = String.format(\n+                var message = String.format(\n@@ -106,1 +105,1 @@\n-            Duration totalResponseFailureWaitDuration = Duration\n+            var totalResponseFailureWaitDuration = Duration\n@@ -110,1 +109,1 @@\n-                String message = (\"`test.responseFailureWaitDurationMillis * jdk.httpclient.redirects.retrylimit` (%s * %s = %s) \" +\n+                var message = (\"`test.responseFailureWaitDurationMillis * jdk.httpclient.redirects.retrylimit` (%s * %s = %s) \" +\n@@ -166,3 +165,3 @@\n-            SSLContext sslContext = secure ? SSL_CONTEXT : null;\n-            String serverId = \"\" + SERVER_COUNTER.getAndIncrement();\n-            HttpTestServer server = createServer(version, sslContext);\n+            var sslContext = secure ? SSL_CONTEXT : null;\n+            var serverId = \"\" + SERVER_COUNTER.getAndIncrement();\n+            var server = createServer(version, sslContext);\n@@ -170,3 +169,3 @@\n-            String handlerPath = \"\/%s\/\".formatted(CLASS_NAME);\n-            String requestUriScheme = secure ? \"https\" : \"http\";\n-            URI requestUri = URI.create(\"%s:\/\/%s%s-\".formatted(requestUriScheme, server.serverAuthority(), handlerPath));\n+            var handlerPath = \"\/%s\/\".formatted(CLASS_NAME);\n+            var requestUriScheme = secure ? \"https\" : \"http\";\n+            var requestUri = URI.create(\"%s:\/\/%s%s-\".formatted(requestUriScheme, server.serverAuthority(), handlerPath));\n@@ -178,1 +177,1 @@\n-            HttpRequest request = createRequestBuilder(requestUri, version).timeout(REQUEST_TIMEOUT).build();\n+            var request = createRequestBuilder(requestUri, version).timeout(REQUEST_TIMEOUT).build();\n@@ -181,1 +180,1 @@\n-            ServerRequestPair pair = new ServerRequestPair(server, request, secure);\n+            var pair = new ServerRequestPair(server, request, secure);\n@@ -201,1 +200,1 @@\n-                String connectionKey = exchange.getConnectionKey();\n+                var connectionKey = exchange.getConnectionKey();\n@@ -258,1 +257,1 @@\n-                    String message = String.format(\n+                    var message = String.format(\n@@ -296,1 +295,1 @@\n-            Duration perBytePauseDuration = Duration.ofMillis(100);\n+            var perBytePauseDuration = Duration.ofMillis(100);\n@@ -301,1 +300,1 @@\n-            try (OutputStream responseBody = exchange.getResponseBody()) {\n+            try (var responseBody = exchange.getResponseBody()) {\n@@ -318,2 +317,2 @@\n-            Version version = server.getVersion();\n-            HttpClient client = createClientBuilderFor(version)\n+            var version = server.getVersion();\n+            var client = createClientBuilderFor(version)\n@@ -328,1 +327,1 @@\n-            HttpRequest headRequest = createRequestBuilder(request.uri(), version).HEAD().build();\n+            var headRequest = createRequestBuilder(request.uri(), version).HEAD().build();\n@@ -334,1 +333,1 @@\n-            HttpRequest.Builder requestBuilder = HttpRequest.newBuilder(uri).version(version);\n+            var requestBuilder = HttpRequest.newBuilder(uri).version(version);\n@@ -343,2 +342,2 @@\n-            Version version = server.getVersion();\n-            String versionString = version.toString();\n+            var version = server.getVersion();\n+            var versionString = version.toString();\n@@ -401,1 +400,1 @@\n-        Exception rootException = assertThrows(Exception.class, executable);\n+        var rootException = assertThrows(Exception.class, executable);\n","filename":"test\/jdk\/java\/net\/httpclient\/TimeoutResponseTestSupport.java","additions":22,"deletions":23,"binary":false,"changes":45,"status":"modified"},{"patch":"@@ -45,0 +45,1 @@\n+import java.time.Duration;\n@@ -171,0 +172,4 @@\n+                        \/\/ Explicitly configure a timeout to get a response\n+                        \/\/ timer event get registered at the client. The query\n+                        \/\/ should succeed without timing out.\n+                        .connectTimeout(Duration.ofMinutes(2))\n@@ -175,0 +180,2 @@\n+                    \/\/ We expect the response timer event to get evicted once\n+                    \/\/ the WebSocket handshake headers are received.\n","filename":"test\/jdk\/java\/net\/httpclient\/websocket\/WebSocketTest.java","additions":7,"deletions":0,"binary":false,"changes":7,"status":"modified"}]}