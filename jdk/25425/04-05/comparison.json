{"files":[{"patch":"@@ -2966,1 +2966,1 @@\n-  oop snapshot = VMThreadSnapshot::get_thread_snapshot(jthread, THREAD);\n+  oop snapshot = ThreadSnapshotFactory::get_thread_snapshot(jthread, THREAD);\n","filename":"src\/hotspot\/share\/prims\/jvm.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1143,1 +1143,1 @@\n-    int _depth;\n+    int _frame_depth;\n@@ -1148,2 +1148,2 @@\n-    OwnedLock(int depth, Type type, OopHandle obj): _depth(depth), _type(type), _obj(obj) {}\n-    OwnedLock(): _depth(0), _type(NOTHING), _obj(nullptr) {}\n+    OwnedLock(int depth, Type type, OopHandle obj): _frame_depth(depth), _type(type), _obj(obj) {}\n+    OwnedLock(): _frame_depth(0), _type(NOTHING), _obj(nullptr) {}\n@@ -1162,0 +1162,1 @@\n+    \/\/ park blocker or an object the tread waiting on\/trying to lock\n@@ -1174,1 +1175,1 @@\n-  int _stack_depth; \/\/ length of _methods and _bcis arrays\n+  int _frame_count; \/\/ length of _methods and _bcis arrays\n@@ -1178,1 +1179,1 @@\n-  OopHandle _name;\n+  OopHandle _thread_name;\n@@ -1185,2 +1186,2 @@\n-    _stack_depth(0), _methods(nullptr), _bcis(nullptr),\n-    _thread_status(), _name(nullptr),\n+    _frame_count(0), _methods(nullptr), _bcis(nullptr),\n+    _thread_status(), _thread_name(nullptr),\n@@ -1192,1 +1193,1 @@\n-    _name.release(oop_storage());\n+    _thread_name.release(oop_storage());\n@@ -1289,1 +1290,1 @@\n-    _name = OopHandle(oop_storage(), java_lang_Thread::name(_thread_h()));\n+    _thread_name = OopHandle(oop_storage(), java_lang_Thread::name(_thread_h()));\n@@ -1296,1 +1297,1 @@\n-    bool walk_cont = (_java_thread != nullptr) && (_java_thread->vthread_continuation() != nullptr);\n+    bool vthread_carrier = !is_virtual && (_java_thread != nullptr) && (_java_thread->vthread_continuation() != nullptr);\n@@ -1317,1 +1318,1 @@\n-      ? vframeStream(_java_thread, false, true, walk_cont)\n+      ? vframeStream(_java_thread, false, true, vthread_carrier)\n@@ -1335,1 +1336,1 @@\n-    _stack_depth = total_count;\n+    _frame_count = total_count;\n@@ -1436,1 +1437,1 @@\n-oop VMThreadSnapshot::get_thread_snapshot(jobject jthread, TRAPS) {\n+oop ThreadSnapshotFactory::get_thread_snapshot(jobject jthread, TRAPS) {\n@@ -1493,1 +1494,1 @@\n-  objArrayHandle trace = oopFactory::new_objArray_handle(ste_klass, cl._stack_depth, CHECK_NULL);\n+  objArrayHandle trace = oopFactory::new_objArray_handle(ste_klass, cl._frame_count, CHECK_NULL);\n@@ -1495,1 +1496,1 @@\n-  for (int i = 0; i < cl._stack_depth; i++) {\n+  for (int i = 0; i < cl._frame_count; i++) {\n@@ -1513,1 +1514,1 @@\n-        lock_info->_depth, lock_info->_type, lock_info->_obj, CHECK_NULL);\n+        lock_info->_frame_depth, lock_info->_type, lock_info->_obj, CHECK_NULL);\n@@ -1536,1 +1537,1 @@\n-  jdk_internal_vm_ThreadSnapshot::set_name(snapshot(), cl._name.resolve());\n+  jdk_internal_vm_ThreadSnapshot::set_name(snapshot(), cl._thread_name.resolve());\n","filename":"src\/hotspot\/share\/services\/threadService.cpp","additions":18,"deletions":17,"binary":false,"changes":35,"status":"modified"},{"patch":"@@ -636,1 +636,1 @@\n-class VMThreadSnapshot: AllStatic {\n+class ThreadSnapshotFactory: AllStatic {\n","filename":"src\/hotspot\/share\/services\/threadService.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}