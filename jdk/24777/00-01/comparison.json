{"files":[{"patch":"@@ -46,8 +46,9 @@\n- * static, and their encapsulating callers should perform:\n- * <ul>\n- * <li>Heap access, such as field reads into local variables;<\/li>\n- * <li>Validation, such as null checks, range checks, type checks,\n- * on local variables;<\/li>\n- * <li>All validated values should be in local variables instead of re-read from\n- * fields to avoid TOCTOU races.<\/li>\n- * <\/ul>\n+ * static, and their encapsulating callers should perform validation checks.\n+ * Any validation must be done on values that are exclusively accessed by the\n+ * current thread: shared fields must be read into local variables, and shared\n+ * arrays must be copied to an exclusive copy, to ensure each shared location\n+ * (a field or an array component) is accessed exactly once. If a shared\n+ * location is read multiple times for check and for use, race conditions may\n+ * cause two reads to produce distinct values, known as TOCTOU (time of check\n+ * and time of use), and the read for use may produce an illegal value. Finally,\n+ * the thread-exclusive validated values are passed to the intrinsic methods.\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/vm\/annotation\/IntrinsicCandidate.java","additions":9,"deletions":8,"binary":false,"changes":17,"status":"modified"}]}