{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -395,2 +395,2 @@\n-      assert(tl->_lo >= t_in_l->_lo && tl->_hi <= t_in_l->_hi, \"CastLL type should be narrower than or equal to the type of its input\");\n-      assert((tl != t_in_l) == (tl->_lo > t_in_l->_lo || tl->_hi < t_in_l->_hi), \"if type differs then this nodes's type must be narrower\");\n+      assert(t_in_l->contains(tl), \"CastLL type should be narrower than or equal to the type of its input\");\n+      assert((tl != t_in_l) == t_in_l->properly_contains(tl), \"if type differs then this nodes's type must be narrower\");\n","filename":"src\/hotspot\/share\/opto\/castnode.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -1819,0 +1819,5 @@\n+bool TypeInt::properly_contains(const TypeInt* t) const {\n+  assert(!_is_dual && !t->_is_dual, \"dual types should only be used for join calculation\");\n+  return TypeIntHelper::int_type_is_subset(this, t) && !TypeIntHelper::int_type_is_equal(this, t);\n+}\n+\n@@ -1947,0 +1952,5 @@\n+bool TypeLong::properly_contains(const TypeLong* t) const {\n+  assert(!_is_dual && !t->_is_dual, \"dual types should only be used for join calculation\");\n+  return TypeIntHelper::int_type_is_subset(this, t) && !TypeIntHelper::int_type_is_equal(this, t);\n+}\n+\n","filename":"src\/hotspot\/share\/opto\/type.cpp","additions":11,"deletions":1,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -811,0 +811,2 @@\n+  \/\/ Check whether t is a proper subset (i.e. a subset that is not equal to the superset) of this\n+  bool properly_contains(const TypeInt* t) const;\n@@ -893,0 +895,2 @@\n+  \/\/ Check whether t is a proper subset (i.e. a subset that is not equal to the superset) of this\n+  bool properly_contains(const TypeLong* t) const;\n","filename":"src\/hotspot\/share\/opto\/type.hpp","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -0,0 +1,63 @@\n+\/*\n+ * Copyright (c) 2026, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package compiler.igvn;\n+\n+\/**\n+ * @test\n+ * @bug 8375618\n+ * @summary A CastLLNode may change only a bit of its input, which triggers the incorrect assertion\n+ *          that the signed range must changes\n+ * @run main\/othervm -XX:-TieredCompilation -Xbatch ${test.main.class}\n+ * @run main ${test.main.class}\n+ *\/\n+public class CastLLBits {\n+    static long instanceCount;\n+\n+    public static void main(String[] args) {\n+        for (int i = 0; i < 2000; i++) {\n+            test();\n+        }\n+    }\n+\n+    static void test() {\n+        int i, i1 = 6, i9, i10, i11, i12;\n+        boolean b = false;\n+        for (i = 25; i > 5; i--) {\n+            i9 = 1;\n+            do {\n+                i1 += 0;\n+                for (i10 = 1; i10 < 3; ++i10) {\n+                    instanceCount = i9;\n+                }\n+                i12 = 3;\n+                while (--i12 > 0) {\n+                    i11 = (int) instanceCount;\n+                    i1 = i11;\n+                    if (b) {};\n+                    instanceCount &= 21;\n+                }\n+                i9++;\n+            } while (i9 < 9);\n+        }\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/compiler\/igvn\/CastLLBits.java","additions":63,"deletions":0,"binary":false,"changes":63,"status":"added"}]}