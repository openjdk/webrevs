{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,2 +28,9 @@\n-import java.nio.file.*;\n-import java.nio.file.attribute.*;\n+import java.nio.file.FileStore;\n+import java.nio.file.FileSystemException;\n+import java.nio.file.attribute.AclFileAttributeView;\n+import java.nio.file.attribute.BasicFileAttributeView;\n+import java.nio.file.attribute.DosFileAttributeView;\n+import java.nio.file.attribute.FileAttributeView;\n+import java.nio.file.attribute.FileOwnerAttributeView;\n+import java.nio.file.attribute.FileStoreAttributeView;\n+import java.nio.file.attribute.UserDefinedFileAttributeView;\n@@ -31,0 +38,1 @@\n+import java.util.Locale;\n@@ -47,0 +55,2 @@\n+    private int hashCode;\n+\n@@ -232,4 +242,7 @@\n-        if (!(ob instanceof WindowsFileStore))\n-            return false;\n-        WindowsFileStore other = (WindowsFileStore)ob;\n-        return root.equals(other.root);\n+        if (ob instanceof WindowsFileStore other) {\n+            if (root.equals(other.root))\n+                return true;\n+            if (volType == DRIVE_FIXED && other.volumeType() == DRIVE_FIXED)\n+                return root.equalsIgnoreCase(other.root);\n+        }\n+        return false;\n@@ -240,1 +253,5 @@\n-        return root.hashCode();\n+        if (hashCode == 0) { \/\/ Don't care about race\n+            hashCode = (volType == DRIVE_FIXED) ?\n+                root.toLowerCase(Locale.ROOT).hashCode() : root.hashCode();\n+        }\n+        return hashCode;\n@@ -254,1 +271,1 @@\n- }\n+}\n","filename":"src\/java.base\/windows\/classes\/sun\/nio\/fs\/WindowsFileStore.java","additions":26,"deletions":9,"binary":false,"changes":35,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -25,1 +25,1 @@\n- * @bug 4313887 6873621 6979526 7006126 7020517\n+ * @bug 4313887 6873621 6979526 7006126 7020517 8264400\n@@ -39,0 +39,1 @@\n+import jdk.test.lib.Platform;\n@@ -41,1 +42,0 @@\n-\n@@ -83,0 +83,9 @@\n+        if (Platform.isWindows()) {\n+            \/**\n+             * Test: FileStore.equals() should not be case sensitive\n+             *\/\n+            FileStore upper = Files.getFileStore(Path.of(\"C:\\\\\"));\n+            FileStore lower = Files.getFileStore(Path.of(\"c:\\\\\"));\n+            assertTrue(lower.equals(upper));\n+        }\n+\n","filename":"test\/jdk\/java\/nio\/file\/FileStore\/Basic.java","additions":12,"deletions":3,"binary":false,"changes":15,"status":"modified"}]}