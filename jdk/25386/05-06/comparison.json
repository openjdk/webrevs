{"files":[{"patch":"@@ -249,0 +249,7 @@\n+\n+#ifdef ASSERT\n+  bool address_input_has_same_base() const {\n+    Node *addp = in(Address);\n+    return !addp->is_AddP() || addp->in(Base)->is_top() || addp->in(Base) == in(Base);\n+  }\n+#endif\n","filename":"src\/hotspot\/share\/opto\/addnode.hpp","additions":7,"deletions":0,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -3421,4 +3421,1 @@\n-    assert( !addp->is_AddP() ||\n-            addp->in(AddPNode::Base)->is_top() || \/\/ Top OK for allocation\n-            addp->in(AddPNode::Base) == n->in(AddPNode::Base),\n-            \"Base pointers must match (addp %u)\", addp->_idx );\n+    assert(n->as_AddP()->address_input_has_same_base(), \"Base pointers must match (addp %u)\", addp->_idx );\n","filename":"src\/hotspot\/share\/opto\/compile.cpp","additions":1,"deletions":4,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2065,1 +2065,1 @@\n-bool PhaseIterGVN::verify_node_invariants_for(Node* n) {\n+bool PhaseIterGVN::verify_node_invariants_for(const Node* n) {\n@@ -2067,4 +2067,1 @@\n-    Node* addp = n->in(AddPNode::Address);\n-    if (addp->is_AddP() &&\n-        !addp->in(AddPNode::Base)->is_top() &&\n-        addp->in(AddPNode::Base) != n->in(AddPNode::Base)) {\n+    if (!n->as_AddP()->address_input_has_same_base()) {\n","filename":"src\/hotspot\/share\/opto\/phaseX.cpp","additions":2,"deletions":5,"binary":false,"changes":7,"status":"modified"}]}