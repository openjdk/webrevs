{"files":[{"patch":"@@ -2115,5 +2115,0 @@\n-bool os::can_execute_large_page_memory() {\n-  \/\/ Does not matter, we do not support huge pages.\n-  return false;\n-}\n-\n","filename":"src\/hotspot\/os\/aix\/os_aix.cpp","additions":0,"deletions":5,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -1812,5 +1812,0 @@\n-bool os::can_execute_large_page_memory() {\n-  \/\/ Does not matter, we do not support huge pages.\n-  return false;\n-}\n-\n","filename":"src\/hotspot\/os\/bsd\/os_bsd.cpp","additions":0,"deletions":5,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -4018,4 +4018,0 @@\n-bool os::can_execute_large_page_memory() {\n-  return UseTransparentHugePages;\n-}\n-\n","filename":"src\/hotspot\/os\/linux\/os_linux.cpp","additions":0,"deletions":4,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -3438,4 +3438,0 @@\n-bool os::can_execute_large_page_memory() {\n-  return true;\n-}\n-\n","filename":"src\/hotspot\/os\/windows\/os_windows.cpp","additions":0,"deletions":4,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -357,10 +357,2 @@\n-  if (os::can_execute_large_page_memory()) {\n-    if (InitialCodeCacheSize < ReservedCodeCacheSize) {\n-      \/\/ Make sure that the page size allows for an incremental commit of the reserved space\n-      min_pages = MAX2(min_pages, (size_t)8);\n-    }\n-    return aligned ? os::page_size_for_region_aligned(ReservedCodeCacheSize, min_pages) :\n-                     os::page_size_for_region_unaligned(ReservedCodeCacheSize, min_pages);\n-  } else {\n-    return os::vm_page_size();\n-  }\n+  return aligned ? os::page_size_for_region_aligned(ReservedCodeCacheSize, min_pages) :\n+                   os::page_size_for_region_unaligned(ReservedCodeCacheSize, min_pages);\n@@ -1202,1 +1194,5 @@\n-    ReservedCodeSpace rs = reserve_heap_memory(ReservedCodeCacheSize, page_size(false, 8));\n+\n+    \/\/ If InitialCodeCacheSize is equal to ReservedCodeCacheSize, then it's more likely\n+    \/\/ users want to use the largest available page.\n+    const size_t min_pages = (InitialCodeCacheSize == ReservedCodeCacheSize) ? 1 : 8;\n+    ReservedCodeSpace rs = reserve_heap_memory(ReservedCodeCacheSize, page_size(false, min_pages));\n","filename":"src\/hotspot\/share\/code\/codeCache.cpp","additions":7,"deletions":11,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -534,1 +534,0 @@\n-  static bool   can_execute_large_page_memory();\n","filename":"src\/hotspot\/share\/runtime\/os.hpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"}]}