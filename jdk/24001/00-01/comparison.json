{"files":[{"patch":"@@ -156,0 +156,1 @@\n+  \/\/ Uninitialized and no-keepalive stores do not need barrier.\n@@ -157,2 +158,7 @@\n-      HasDecorator<decorators, AS_NO_KEEPALIVE>::value ||\n-      HasDecorator<decorators, ON_WEAK_OOP_REF>::value ||\n+      HasDecorator<decorators, AS_NO_KEEPALIVE>::value) {\n+    return;\n+  }\n+\n+  \/\/ Stores to weak\/phantom require no barrier. The original references would\n+  \/\/ have been enqueued in the SATB buffer by the load barrier if they were needed.\n+  if (HasDecorator<decorators, ON_WEAK_OOP_REF>::value ||\n@@ -279,1 +285,2 @@\n-    barrier_set()->write_ref_field_post<decorators>(addr);\n+    ShenandoahBarrierSet* bs = ShenandoahBarrierSet::barrier_set();\n+    bs->write_ref_field_post<decorators>(addr);\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahBarrierSet.inline.hpp","additions":10,"deletions":3,"binary":false,"changes":13,"status":"modified"}]}