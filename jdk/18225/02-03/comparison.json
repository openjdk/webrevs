{"files":[{"patch":"@@ -33,0 +33,1 @@\n+ * @modules java.base\/jdk.internal.platform\n@@ -37,2 +38,1 @@\n- * @build JfrReporter jdk.test.whitebox.WhiteBox PrintContainerInfo\n- * @run driver jdk.test.lib.helpers.ClassFileInstaller -jar whitebox.jar jdk.test.whitebox.WhiteBox\n+ * @build JfrReporter\n@@ -48,0 +48,1 @@\n+import jdk.internal.platform.Metrics;\n@@ -56,0 +57,1 @@\n+    private static boolean isCgroupV1 = false;\n@@ -63,0 +65,8 @@\n+        \/\/ If cgroups is not configured, report success.\n+        Metrics metrics = Metrics.systemMetrics();\n+        if (metrics == null) {\n+            System.out.println(\"TEST PASSED!!!\");\n+            return;\n+        }\n+        isCgroupV1 = \"cgroupv1\".equals(metrics.getProvider());\n+\n@@ -64,1 +74,0 @@\n-        Common.prepareWhiteBox();\n@@ -222,1 +231,1 @@\n-        if (isCgroupV1(memValueToSet)) {\n+        if (isCgroupV1) {\n@@ -304,13 +313,0 @@\n-\n-    private static boolean isCgroupV1(String memValueToSet) throws Exception {\n-        DockerRunOptions opts = Common.newOpts(imageName, \"PrintContainerInfo\")\n-                      .addDockerOpts(\"--memory=\" + memValueToSet)\n-                      .addDockerOpts(\"--memory-swap=\" + memValueToSet); \/\/ no swap\n-        Common.addWhiteBoxOpts(opts);\n-\n-        OutputAnalyzer out = Common.run(opts);\n-        if (out.contains(\"cgroupv1\")) {\n-            return true;\n-        }\n-        return false;\n-    }\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestJFREvents.java","additions":13,"deletions":17,"binary":false,"changes":30,"status":"modified"}]}