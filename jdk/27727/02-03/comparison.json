{"files":[{"patch":"@@ -99,2 +99,2 @@\n-        testContentLengthServerH2.addHandler(new OptionalContentLengthHandler(), BODY_PATH);\n-        testContentLengthServerH3.addHandler(new OptionalContentLengthHandler(), BODY_PATH);\n+        testContentLengthServerH2.addHandler(new ContentLengthHandler(), BODY_PATH);\n+        testContentLengthServerH3.addHandler(new ContentLengthHandler(), BODY_PATH);\n@@ -167,0 +167,7 @@\n+    @DataProvider(name = \"h1body\")\n+    Object[][] h1body() {\n+        return new Object[][]{\n+                {HTTP_1_1, URI.create(testContentLengthURIH1 + BODY_PATH)}\n+        };\n+    }\n+\n@@ -323,1 +330,1 @@\n-    @Test(dataProvider = \"bodies\")\n+    @Test(dataProvider = \"h1body\")\n@@ -336,3 +343,0 @@\n-        if (version == HTTP_1_1) {\n-            assertEquals(resp.body(), \"Request completed\");\n-        }\n@@ -356,1 +360,1 @@\n-    @Test(dataProvider = \"bodies\")\n+    @Test(dataProvider = \"h1body\")\n@@ -369,3 +373,0 @@\n-        if (version == HTTP_1_1) {\n-            assertEquals(resp.body(), \"Request completed\");\n-        }\n@@ -452,23 +453,0 @@\n-\n-    \/**\n-     * A handler used for cases where the presence of a Content-Length\n-     * header is optional. If present, its value must match the number of\n-     * bytes sent in the request body.\n-     *\/\n-    static class OptionalContentLengthHandler implements HttpTestHandler {\n-\n-        @Override\n-        public void handle(HttpTestExchange exchange) throws IOException {\n-            testLog.println(\"OptionalContentLengthHandler: Received Headers \"\n-                    + exchange.getRequestHeaders().entrySet() +\n-                    \" from \" + exchange.getRequestMethod() + \" request.\");\n-            Optional<String> contentLength = exchange.getRequestHeaders().firstValue(\"Content-Length\");\n-\n-            \/\/ Check Content-length header was set\n-            if (contentLength.isPresent()) {\n-                handleResponse(Long.parseLong(contentLength.get()), exchange, \"Request completed\", 200);\n-            } else {\n-                handleResponse(-1, exchange, \"Request completed, no content length\", 200);\n-            }\n-        }\n-    }\n","filename":"test\/jdk\/java\/net\/httpclient\/ContentLengthHeaderTest.java","additions":11,"deletions":33,"binary":false,"changes":44,"status":"modified"}]}