{"files":[{"patch":"@@ -269,0 +269,1 @@\n+    _reads_is_archived(false),\n@@ -471,1 +472,1 @@\n-    if (_reads == nullptr) { _reads_is_growable = true; }\n+    \/\/if (_reads == nullptr) { _reads_is_growable = true; }\n@@ -521,3 +522,0 @@\n-  DEBUG_ONLY(\n-    _reads_is_archived = true;\n-  )\n","filename":"src\/hotspot\/share\/classfile\/moduleEntry.cpp","additions":2,"deletions":4,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -71,3 +71,6 @@\n-  void* _reads; \/\/ list of modules that are readable by this module\n-  DEBUG_ONLY(bool _reads_is_growable);\n-  DEBUG_ONLY(bool _reads_is_archived);\n+\n+  union {\n+    GrowableArray<ModuleEntry*>* _reads;  \/\/ list of modules that are readable by this module\n+    Array<ModuleEntry*>* _archived_reads; \/\/ List of readable modules stored in the CDS archive\n+  };\n+  bool _reads_is_archived;\n@@ -121,2 +124,2 @@\n-    assert(_reads_is_growable, \"sanity\");\n-    return (GrowableArray<ModuleEntry*>*)_reads;\n+    assert(!_reads_is_archived, \"sanity\");\n+    return _reads;\n@@ -126,2 +129,1 @@\n-    DEBUG_ONLY(_reads_is_growable = true);\n-    DEBUG_ONLY(_reads_is_archived = false);\n+    _reads_is_archived = false;\n@@ -131,1 +133,1 @@\n-    return (Array<ModuleEntry*>*)_reads;\n+    return _archived_reads;\n@@ -134,3 +136,2 @@\n-    _reads = r;\n-    DEBUG_ONLY(_reads_is_growable = false);\n-    DEBUG_ONLY(_reads_is_archived = true);\n+    _archived_reads = r;\n+    _reads_is_archived = true;\n","filename":"src\/hotspot\/share\/classfile\/moduleEntry.hpp","additions":12,"deletions":11,"binary":false,"changes":23,"status":"modified"}]}