{"files":[{"patch":"@@ -254,3 +254,1 @@\n-                int size = list.size();\n-                phc.index = size;\n-                maxIdx = size;\n+                phc.index = maxIdx = list.size();\n@@ -258,0 +256,1 @@\n+                assert list.get(phc.index) == phc;\n@@ -271,1 +270,1 @@\n-                    \/\/ Was already removed from the list.\n+                    \/\/ Not in the list.\n@@ -276,0 +275,1 @@\n+                assert list.get(phc.index) == phc;\n@@ -280,2 +280,2 @@\n-                    \/\/ Move the last element at current index, overwriting it.\n-                    \/\/ Update its index to a new location.\n+                    \/\/ Move the last, still alive element at current index,\n+                    \/\/ overwriting the removed one. Update its index to a new location.\n@@ -297,1 +297,0 @@\n-                \/\/ Success!\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/ref\/CleanerImpl.java","additions":6,"deletions":7,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -69,0 +69,1 @@\n+        this.index = -1;\n@@ -72,0 +73,3 @@\n+        \/\/ Check that list insertion populated the index.\n+        assert index >= 0;\n+\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/ref\/PhantomCleanable.java","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"}]}