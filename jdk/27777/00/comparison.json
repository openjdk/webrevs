{"files":[{"patch":"@@ -64,8 +64,7 @@\n-    unsigned char* old_ptr = ptr;\n-    JvmtiExport::post_class_file_load_hook(class_name,\n-                                           class_loader,\n-                                           protection_domain,\n-                                           &ptr,\n-                                           &end_ptr,\n-                                           &cached_class_file);\n-    if (old_ptr != ptr) {\n+    bool modified = JvmtiExport::post_class_file_load_hook(class_name,\n+                                                           class_loader,\n+                                                           protection_domain,\n+                                                           &ptr,\n+                                                           &end_ptr,\n+                                                           &cached_class_file);\n+    if (modified) {\n@@ -147,6 +146,6 @@\n-    JvmtiExport::post_class_file_load_hook(name,\n-                                           class_loader,\n-                                           protection_domain,\n-                                           &ptr,\n-                                           &end_ptr,\n-                                           cached_class_file);\n+    bool modified = JvmtiExport::post_class_file_load_hook(name,\n+                                                           class_loader,\n+                                                           protection_domain,\n+                                                           &ptr,\n+                                                           &end_ptr,\n+                                                           cached_class_file);\n@@ -154,1 +153,1 @@\n-    if (ptr != stream->buffer()) {\n+    if (modified) {\n","filename":"src\/hotspot\/share\/classfile\/klassFactory.cpp","additions":14,"deletions":15,"binary":false,"changes":29,"status":"modified"}]}