{"files":[{"patch":"@@ -139,0 +139,2 @@\n+java\/awt\/List\/KeyEventsTest\/KeyEventsTest.java 8201307 linux-all\n+java\/awt\/Paint\/ListRepaint.java 8201307 linux-all\n","filename":"test\/jdk\/ProblemList.txt","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -40,3 +40,3 @@\n-    private Frame frame, frame2;\n-    private Button button, button2;\n-    private TextField textField, textField2;\n+    private volatile Frame frame, frame2;\n+    private volatile Button button, button2;\n+    private volatile TextField textField, textField2;\n@@ -50,1 +50,1 @@\n-    public static void main(String[] args) {\n+    public static void main(String[] args) throws Exception {\n@@ -55,1 +55,1 @@\n-            EventQueue.invokeLater(() -> {\n+            EventQueue.invokeAndWait(() -> {\n","filename":"test\/jdk\/java\/awt\/Frame\/MiscUndecorated\/ActiveAWTWindowTest.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -36,2 +36,0 @@\n-import java.awt.EventQueue;\n-import java.awt.KeyboardFocusManager;\n@@ -39,0 +37,1 @@\n+import java.awt.KeyboardFocusManager;\n@@ -54,1 +53,1 @@\n-    TestState currentState;\n+    private volatile TestState currentState;\n@@ -69,1 +68,1 @@\n-            EventQueue.invokeAndWait(app::initAndShowGui);\n+            app.initAndShowGui();\n@@ -74,5 +73,3 @@\n-            EventQueue.invokeAndWait(() -> {\n-                if (app.keyFrame != null) {\n-                    app.keyFrame.dispose();\n-                }\n-            });\n+            if (app.keyFrame != null) {\n+                app.keyFrame.dispose();\n+            }\n@@ -187,21 +184,29 @@\n-            EventQueue.invokeAndWait(() -> {\n-                list.deselect(0);\n-                list.deselect(1);\n-                list.deselect(2);\n-                list.deselect(3);\n-                list.deselect(4);\n-                list.deselect(5);\n-                list.deselect(6);\n-                list.deselect(7);\n-                list.deselect(8);\n-\n-                int selectIndex = 0;\n-                int visibleIndex = 0;\n-\n-                if (currentState.getScrollMoved()) {\n-                    if (currentState.getKeyID() == KeyEvent.VK_PAGE_UP ||\n-                            currentState.getKeyID() == KeyEvent.VK_HOME) {\n-                        selectIndex = 8;\n-                        visibleIndex = 8;\n-                    } else if (currentState.getKeyID() == KeyEvent.VK_PAGE_DOWN ||\n-                            currentState.getKeyID() == KeyEvent.VK_END) {\n+            list.deselect(0);\n+            list.deselect(1);\n+            list.deselect(2);\n+            list.deselect(3);\n+            list.deselect(4);\n+            list.deselect(5);\n+            list.deselect(6);\n+            list.deselect(7);\n+            list.deselect(8);\n+\n+            int selectIndex = 0;\n+            int visibleIndex = 0;\n+\n+            if (currentState.getScrollMoved()) {\n+                if (currentState.getKeyID() == KeyEvent.VK_PAGE_UP ||\n+                        currentState.getKeyID() == KeyEvent.VK_HOME) {\n+                    selectIndex = 8;\n+                    visibleIndex = 8;\n+                } else if (currentState.getKeyID() == KeyEvent.VK_PAGE_DOWN ||\n+                        currentState.getKeyID() == KeyEvent.VK_END) {\n+                    selectIndex = 0;\n+                    visibleIndex = 0;\n+                }\n+            } else {\n+                if (currentState.getKeyID() == KeyEvent.VK_PAGE_UP ||\n+                        currentState.getKeyID() == KeyEvent.VK_HOME) {\n+                    if (currentState.getSelectedMoved()) {\n+                        selectIndex = 1;\n+                    } else {\n@@ -209,1 +214,0 @@\n-                        visibleIndex = 0;\n@@ -211,17 +215,7 @@\n-                } else {\n-                    if (currentState.getKeyID() == KeyEvent.VK_PAGE_UP ||\n-                            currentState.getKeyID() == KeyEvent.VK_HOME) {\n-                        if (currentState.getSelectedMoved()) {\n-                            selectIndex = 1;\n-                        } else {\n-                            selectIndex = 0;\n-                        }\n-                        visibleIndex = 0;\n-                    } else if (currentState.getKeyID() == KeyEvent.VK_PAGE_DOWN ||\n-                            currentState.getKeyID() == KeyEvent.VK_END) {\n-                        if (currentState.getSelectedMoved()) {\n-                            selectIndex = 7;\n-                        } else {\n-                            selectIndex = 8;\n-                        }\n-                        visibleIndex = 8;\n+                    visibleIndex = 0;\n+                } else if (currentState.getKeyID() == KeyEvent.VK_PAGE_DOWN ||\n+                        currentState.getKeyID() == KeyEvent.VK_END) {\n+                    if (currentState.getSelectedMoved()) {\n+                        selectIndex = 7;\n+                    } else {\n+                        selectIndex = 8;\n@@ -229,0 +223,1 @@\n+                    visibleIndex = 8;\n@@ -230,3 +225,4 @@\n-                list.select(selectIndex);\n-                list.makeVisible(visibleIndex);\n-            });\n+            }\n+            list.select(selectIndex);\n+            list.makeVisible(visibleIndex);\n+\n","filename":"test\/jdk\/java\/awt\/List\/KeyEventsTest\/KeyEventsTest.java","additions":47,"deletions":51,"binary":false,"changes":98,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,9 +37,15 @@\n-            final Frame frame = new Frame();\n-            frame.setSize(300, 300);\n-            frame.setLocationRelativeTo(null);\n-            ButtonRepaint button = new ButtonRepaint();\n-            frame.add(button);\n-            frame.setVisible(true);\n-            sleep();\n-            button.test();\n-            frame.dispose();\n+            Frame frame = null;\n+            try {\n+                frame = new Frame();\n+                frame.setSize(300, 300);\n+                frame.setLocationRelativeTo(null);\n+                ButtonRepaint button = new ButtonRepaint();\n+                frame.add(button);\n+                frame.setVisible(true);\n+                sleep();\n+                button.test();\n+            } finally {\n+                if (frame != null) {\n+                    frame.dispose();\n+                }\n+            }\n","filename":"test\/jdk\/java\/awt\/Paint\/ButtonRepaint.java","additions":16,"deletions":10,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -36,9 +36,15 @@\n-            final Frame frame = new Frame();\n-            frame.setSize(300, 300);\n-            frame.setLocationRelativeTo(null);\n-            CheckboxRepaint checkbox = new CheckboxRepaint();\n-            frame.add(checkbox);\n-            frame.setVisible(true);\n-            sleep();\n-            checkbox.test();\n-            frame.dispose();\n+            Frame frame = null;\n+            try {\n+                frame = new Frame();\n+                frame.setSize(300, 300);\n+                frame.setLocationRelativeTo(null);\n+                CheckboxRepaint checkbox = new CheckboxRepaint();\n+                frame.add(checkbox);\n+                frame.setVisible(true);\n+                sleep();\n+                checkbox.test();\n+            } finally {\n+                if (frame != null) {\n+                    frame.dispose();\n+                }\n+            }\n","filename":"test\/jdk\/java\/awt\/Paint\/CheckboxRepaint.java","additions":16,"deletions":10,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -39,9 +39,15 @@\n-            final Frame frame = new Frame();\n-            frame.setSize(300, 300);\n-            frame.setLocationRelativeTo(null);\n-            LabelRepaint label = new LabelRepaint();\n-            frame.add(label);\n-            frame.setVisible(true);\n-            sleep();\n-            label.test();\n-            frame.dispose();\n+            Frame frame = null;\n+            try {\n+                frame = new Frame();\n+                frame.setSize(300, 300);\n+                frame.setLocationRelativeTo(null);\n+                LabelRepaint label = new LabelRepaint();\n+                frame.add(label);\n+                frame.setVisible(true);\n+                sleep();\n+                label.test();\n+            } finally {\n+                if (frame != null) {\n+                    frame.dispose();\n+                }\n+            }\n","filename":"test\/jdk\/java\/awt\/Paint\/LabelRepaint.java","additions":15,"deletions":9,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -37,4 +37,1 @@\n-    static ListRepaint listRepaint;\n-    static Frame frame;\n-\n-    public static void main(final String[] args) throws Exception {\n+    public static void main(final String[] args) {\n@@ -42,0 +39,1 @@\n+            Frame frame = null;\n@@ -43,1 +41,11 @@\n-                EventQueue.invokeLater(ListRepaint::createAndShowGUI);\n+                frame = new Frame();\n+                frame.setSize(300, 300);\n+                frame.setLocationRelativeTo(null);\n+                ListRepaint list = new ListRepaint();\n+                list.add(\"1\");\n+                list.add(\"2\");\n+                list.add(\"3\");\n+                list.add(\"4\");\n+                list.select(0);\n+                frame.add(list);\n+                frame.setVisible(true);\n@@ -45,1 +53,1 @@\n-                EventQueue.invokeAndWait(listRepaint::test);\n+                list.test();\n@@ -47,6 +55,3 @@\n-                EventQueue.invokeAndWait(() -> {\n-                    if (frame != null) {\n-                        frame.dispose();\n-                        frame = null;\n-                    }\n-                });\n+                if (frame != null) {\n+                    frame.dispose();\n+                }\n@@ -64,16 +69,0 @@\n-    static void createAndShowGUI() {\n-        frame = new Frame();\n-        frame.setSize(300, 300);\n-        frame.setLocationRelativeTo(null);\n-\n-        listRepaint = new ListRepaint();\n-        listRepaint.add(\"1\");\n-        listRepaint.add(\"2\");\n-        listRepaint.add(\"3\");\n-        listRepaint.add(\"4\");\n-        listRepaint.select(0);\n-\n-        frame.add(listRepaint);\n-        frame.setVisible(true);\n-    }\n-\n","filename":"test\/jdk\/java\/awt\/Paint\/ListRepaint.java","additions":17,"deletions":28,"binary":false,"changes":45,"status":"modified"},{"patch":"@@ -34,0 +34,2 @@\n+import java.awt.event.ActionEvent;\n+import java.awt.event.ActionListener;\n@@ -35,0 +37,1 @@\n+\n@@ -56,4 +59,2 @@\n-                button.addActionListener(e -> {\n-                    if ((e.getModifiers() & InputEvent.BUTTON1_MASK)\n-                            != InputEvent.BUTTON1_MASK) {\n-                        System.out.println(\"Status: Failed\");\n+                button.addActionListener(new ActionListener() {\n+                    public void actionPerformed(ActionEvent e) {\n@@ -84,0 +85,2 @@\n+            robot.delay(3000);\n+            boolean result = passed;\n@@ -85,1 +88,0 @@\n-            robot.delay(500);\n@@ -87,1 +89,1 @@\n-            if (!passed) {\n+            if (!result) {\n","filename":"test\/jdk\/javax\/swing\/JButton\/bug4490179.java","additions":8,"deletions":6,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -91,1 +91,5 @@\n-        SwingUtilities.invokeAndWait(() -> frame.dispose());\n+        SwingUtilities.invokeAndWait(() -> {\n+            if (frame != null) {\n+                frame.dispose();\n+            }\n+        });\n","filename":"test\/jdk\/javax\/swing\/plaf\/basic\/BasicMenuUI\/4983388\/bug4983388.java","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"}]}