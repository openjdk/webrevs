{"files":[{"patch":"@@ -157,1 +157,0 @@\n-        MonitoredHost mh = null;\n@@ -160,3 +159,5 @@\n-            mh = getCachedMonitoredHost(hostId);\n-            if (mh != null) {\n-                return mh;\n+            MonitoredHost mh = monitoredHosts.get(hostId);\n+            \/\/ remove any errored MonitorHost from the cache\n+            if (mh != null && mh.isErrored()) {\n+                monitoredHosts.remove(hostId);\n+                mh = null;\n@@ -164,8 +165,0 @@\n-        }\n-\n-        hostId = resolveHostId(hostId);\n-\n-        synchronized(monitoredHosts) {\n-            \/\/ re-check the internal cache before attempting to find a Service\n-            \/\/ capable of returning a MonitoredHost from this HostIdentifier\n-            mh = getCachedMonitoredHost(hostId);\n@@ -175,0 +168,3 @@\n+            \/\/ not found in cache, now try to find a MonitoredHostService\n+            \/\/ which can get a MonitoredHost for the hostId\n+            hostId = resolveHostId(hostId);\n@@ -182,1 +178,2 @@\n-                throw new IllegalArgumentException(\"Could not find MonitoredHost for scheme: \" + hostId.getScheme());\n+                throw new IllegalArgumentException(\"Could not find MonitoredHost for scheme: \"\n+                        + hostId.getScheme());\n@@ -186,0 +183,1 @@\n+            return mh;\n@@ -187,19 +185,0 @@\n-\n-        return mh;\n-    }\n-\n-    \/\/ from an internal cache returns a MonitoredHost, if present, for the HostIdentifier.\n-    \/\/ Else returns null. The thread calling this method must hold the monitor lock on\n-    \/\/ \"monitoredHosts\" field\n-    private static MonitoredHost getCachedMonitoredHost(final HostIdentifier hostId) {\n-        assert Thread.holdsLock(monitoredHosts) : \"called without holding a lock\";\n-        MonitoredHost mh = monitoredHosts.get(hostId);\n-        if (mh == null) {\n-            return null;\n-        }\n-        \/\/ remove any errored MonitorHost from the cache\n-        if (mh.isErrored()) {\n-            monitoredHosts.remove(hostId);\n-            return null;\n-        }\n-        return mh;\n","filename":"src\/jdk.internal.jvmstat\/share\/classes\/sun\/jvmstat\/monitor\/MonitoredHost.java","additions":11,"deletions":32,"binary":false,"changes":43,"status":"modified"}]}