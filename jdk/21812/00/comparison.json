{"files":[{"patch":"@@ -1026,0 +1026,14 @@\n+  int old_c2_count = 0, new_c2_count = 0, old_c1_count = 0, new_c1_count = 0;\n+  const int c2_tasks_per_thread = 2, c1_tasks_per_thread = 4;\n+\n+  \/\/ Do a quick check first without taking the lock. The later ones are more expensive.\n+  if (_c2_compile_queue != nullptr) {\n+    old_c2_count = _compilers[1]->num_compiler_threads();\n+    new_c2_count = MIN2(_c2_count, _c2_compile_queue->size() \/ c2_tasks_per_thread);\n+  }\n+  if (_c1_compile_queue != nullptr) {\n+    old_c1_count = _compilers[0]->num_compiler_threads();\n+    new_c1_count = MIN2(_c1_count, _c1_compile_queue->size() \/ c1_tasks_per_thread);\n+  }\n+  if (new_c2_count <= old_c2_count && new_c1_count <= old_c1_count) return;\n+\n@@ -1035,3 +1049,3 @@\n-    int old_c2_count = _compilers[1]->num_compiler_threads();\n-    int new_c2_count = MIN4(_c2_count,\n-        _c2_compile_queue->size() \/ 2,\n+    old_c2_count = _compilers[1]->num_compiler_threads();\n+    new_c2_count = MIN4(_c2_count,\n+        _c2_compile_queue->size() \/ c2_tasks_per_thread,\n@@ -1096,3 +1110,3 @@\n-    int old_c1_count = _compilers[0]->num_compiler_threads();\n-    int new_c1_count = MIN4(_c1_count,\n-        _c1_compile_queue->size() \/ 4,\n+    old_c1_count = _compilers[0]->num_compiler_threads();\n+    new_c1_count = MIN4(_c1_count,\n+        _c1_compile_queue->size() \/ c1_tasks_per_thread,\n","filename":"src\/hotspot\/share\/compiler\/compileBroker.cpp","additions":20,"deletions":6,"binary":false,"changes":26,"status":"modified"}]}