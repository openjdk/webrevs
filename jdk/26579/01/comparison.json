{"files":[{"patch":"@@ -475,1 +475,1 @@\n-  const bool use_class_space = parser.klass_needs_narrow_id();\n+  const bool use_class_space = UseClassMetaspaceForAllClasses || parser.klass_needs_narrow_id();\n","filename":"src\/hotspot\/share\/oops\/instanceKlass.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -185,1 +185,1 @@\n-  return !is_abstract() && !is_interface();\n+  return UseClassMetaspaceForAllClasses || (!is_abstract() && !is_interface());\n","filename":"src\/hotspot\/share\/oops\/klass.inline.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2003,0 +2003,4 @@\n+                                                                            \\\n+  product(bool, UseClassMetaspaceForAllClasses, false, DIAGNOSTIC,          \\\n+          \"Use the class metaspace for all classes including \"              \\\n+          \"abstract and interface classes.\")                                \\\n","filename":"src\/hotspot\/share\/runtime\/globals.hpp","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -98,1 +98,1 @@\n-        if (metaspaceObject instanceof HotSpotResolvedJavaType t && !t.isArray()) {\n+        if (!HotSpotVMConfig.config().useClassMetaspaceForAllClasses && metaspaceObject instanceof HotSpotResolvedJavaType t && !t.isArray()) {\n","filename":"src\/jdk.internal.vm.ci\/share\/classes\/jdk\/vm\/ci\/hotspot\/HotSpotMetaspaceConstantImpl.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -70,0 +70,2 @@\n+    final boolean useClassMetaspaceForAllClasses = getFlag(\"UseClassMetaspaceForAllClasses\", Boolean.class);\n+\n","filename":"src\/jdk.internal.vm.ci\/share\/classes\/jdk\/vm\/ci\/hotspot\/HotSpotVMConfig.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"}]}