{"files":[{"patch":"@@ -186,1 +186,1 @@\n-            if (options.isExplicitlyEnabled(Option.XLINT, lc)) {\n+            if (options.isLintExplicitlyEnabled(lc)) {\n@@ -188,1 +188,1 @@\n-            } else if (options.isExplicitlyDisabled(Option.XLINT, lc)) {\n+            } else if (options.isLintExplicitlyDisabled(lc)) {\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/code\/Lint.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -208,1 +208,1 @@\n-        lintOptions = !options.isExplicitlyDisabled(Option.XLINT, LintCategory.OPTIONS);\n+        lintOptions = !options.isLintDisabled(LintCategory.OPTIONS);\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/comp\/Modules.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -506,1 +506,1 @@\n-                    boolean lintPaths = !options.isExplicitlyDisabled(Option.XLINT, LintCategory.PATH);\n+                    boolean lintPaths = !options.isLintDisabled(LintCategory.PATH);\n@@ -579,1 +579,1 @@\n-        boolean lintOptions = !options.isExplicitlyDisabled(Option.XLINT, LintCategory.OPTIONS);\n+        boolean lintOptions = !options.isLintDisabled(LintCategory.OPTIONS);\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/main\/Arguments.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -175,1 +175,2 @@\n-     * Check whether the given lint category is explicitly enabled or disabled.\n+     * Determine if a specific {@link LintCategory} is enabled via a custom\n+     * option flag of the form {@code -Xlint}, {@code -Xlint:all}, or {@code -Xlint:key}.\n@@ -178,1 +179,1 @@\n-     * If the category is neither enabled nor disabled, return the given default value.\n+     * Note: It's possible the category was also disabled; this method does not check that.\n@@ -180,1 +181,0 @@\n-     * @param option the plain (non-custom) option\n@@ -182,2 +182,1 @@\n-     * @param defaultValue presumed default value\n-     * @return true if {@code lc} would be included\n+     * @return true if {@code lc} has been enabled\n@@ -185,15 +184,4 @@\n-    public boolean isSet(Option option, LintCategory lc, boolean defaultValue) {\n-        Option customOption = option.getCustom();\n-        if (lc.optionList.stream().anyMatch(alias -> isSet(customOption, alias))) {\n-            return true;\n-        }\n-        if (lc.optionList.stream().anyMatch(alias -> isSet(customOption, \"-\" + alias))) {\n-            return false;\n-        }\n-        if (isSet(option) || isSet(customOption, Option.LINT_CUSTOM_ALL)) {\n-            return true;\n-        }\n-        if (isSet(customOption, Option.LINT_CUSTOM_NONE)) {\n-            return false;\n-        }\n-        return defaultValue;\n+    public boolean isLintEnabled(LintCategory lc) {\n+        return isLintExplicitlyEnabled(lc) ||\n+            isSet(Option.XLINT_CUSTOM) ||\n+            isSet(Option.XLINT_CUSTOM, Option.LINT_CUSTOM_ALL);\n@@ -203,2 +191,22 @@\n-     * Determine if a specific {@link LintCategory} was explicitly enabled via a custom option flag\n-     * of the form {@code -Flag:all} or {@code -Flag:key}.\n+     * Determine if a specific {@link LintCategory} is disabled via a custom\n+     * option flag of the form {@code -Xlint:none} or {@code -Xlint:-key}.\n+     *\n+     * <p>\n+     * Note: It's possible the category was also enabled; this method does not check that.\n+     *\n+     * @param lc the {@link LintCategory} in question\n+     * @return true if {@code lc} has been disabled\n+     *\/\n+    public boolean isLintDisabled(LintCategory lc) {\n+        return isLintExplicitlyDisabled(lc) || isSet(Option.XLINT_CUSTOM, Option.LINT_CUSTOM_NONE);\n+    }\n+\n+    \/**\n+     * Determine if a specific {@link LintCategory} is explicitly enabled via a custom\n+     * option flag of the form {@code -Xlint:key}.\n+     *\n+     * <p>\n+     * Note: This does not check for option flags of the form {@code -Xlint} or {@code -Xlint:all}.\n+     *\n+     * <p>\n+     * Note: It's possible the category was also disabled; this method does not check that.\n@@ -206,1 +214,0 @@\n-     * @param option the option\n@@ -210,2 +217,2 @@\n-    public boolean isExplicitlyEnabled(Option option, LintCategory lc) {\n-        return isSet(option, lc, false);\n+    public boolean isLintExplicitlyEnabled(LintCategory lc) {\n+        return lc.optionList.stream().anyMatch(alias -> isSet(Option.XLINT_CUSTOM, alias));\n@@ -215,2 +222,8 @@\n-     * Determine if a specific {@link LintCategory} was explicitly disabled via a custom option flag\n-     * of the form {@code -Flag:none} or {@code -Flag:-key}.\n+     * Determine if a specific {@link LintCategory} is explicitly disabled via a custom\n+     * option flag of the form {@code -Xlint:-key}.\n+     *\n+     * <p>\n+     * Note: This does not check for an option flag of the form {@code -Xlint:none}.\n+     *\n+     * <p>\n+     * Note: It's possible the category was also enabled; this method does not check that.\n@@ -218,1 +231,0 @@\n-     * @param option the option\n@@ -222,2 +234,2 @@\n-    public boolean isExplicitlyDisabled(Option option, LintCategory lc) {\n-        return !isSet(option, lc, true);\n+    public boolean isLintExplicitlyDisabled(LintCategory lc) {\n+        return lc.optionList.stream().anyMatch(alias -> isSet(Option.XLINT_CUSTOM, \"-\" + alias));\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/util\/Options.java","additions":42,"deletions":30,"binary":false,"changes":72,"status":"modified"},{"patch":"@@ -0,0 +1,38 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8359596\n+ * @summary Verify behavior when both \"-Xlint:options\" and \"-Xlint:-options\" are given\n+ * @compile\/fail\/ref=LintOptions.out -Werror -XDrawDiagnostics -source 21 -target 21                                LintOptions.java\n+ * @compile\/fail\/ref=LintOptions.out -Werror -XDrawDiagnostics -source 21 -target 21 -Xlint:options                 LintOptions.java\n+ * @compile                          -Werror -XDrawDiagnostics -source 21 -target 21                -Xlint:-options LintOptions.java\n+ * @compile                          -Werror -XDrawDiagnostics -source 21 -target 21 -Xlint:options -Xlint:-options LintOptions.java\n+ * @compile                          -Werror -XDrawDiagnostics -source 21 -target 21                -Xlint:none     LintOptions.java\n+ * @compile                          -Werror -XDrawDiagnostics -source 21 -target 21 -Xlint:options -Xlint:none     LintOptions.java\n+ *\/\n+class LintOptions {\n+}\n","filename":"test\/langtools\/tools\/javac\/lint\/LintOptions.java","additions":38,"deletions":0,"binary":false,"changes":38,"status":"added"},{"patch":"@@ -0,0 +1,4 @@\n+- compiler.warn.source.no.system.modules.path: 21, (compiler.misc.source.no.system.modules.path.with.target: 21, 21)\n+- compiler.err.warnings.and.werror\n+1 error\n+1 warning\n","filename":"test\/langtools\/tools\/javac\/lint\/LintOptions.out","additions":4,"deletions":0,"binary":false,"changes":4,"status":"added"}]}