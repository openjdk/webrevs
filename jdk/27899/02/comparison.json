{"files":[{"patch":"@@ -161,0 +161,4 @@\n+  ifeq ($(SHIP_DEBUG_SYMBOLS), public)\n+    CFLAGS_STRIPPED_DEBUGINFO := -DHAS_STRIPPED_DEBUGINFO\n+  endif\n+\n@@ -186,0 +190,1 @@\n+    whitebox.cpp_CXXFLAGS := $(CFLAGS_STRIPPED_DEBUGINFO), \\\n","filename":"make\/hotspot\/lib\/CompileJvm.gmk","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -512,0 +512,8 @@\n+WB_ENTRY(jboolean, WB_HasExternalSymbolsStripped(JNIEnv* env, jobject o))\n+#if defined(HAS_STRIPPED_DEBUGINFO)\n+  return true;\n+#else\n+  return false;\n+#endif\n+WB_END\n+\n@@ -2816,0 +2824,1 @@\n+  {CC\"hasExternalSymbolsStripped\",       CC\"()Z\",                   (void*)&WB_HasExternalSymbolsStripped},\n","filename":"src\/hotspot\/share\/prims\/whitebox.cpp","additions":9,"deletions":0,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,0 +29,1 @@\n+ * @library \/\n@@ -32,0 +33,1 @@\n+ * @build jdk.test.whitebox.WhiteBox\n@@ -33,1 +35,2 @@\n- * @run driver CheckForProperDetailStackTrace\n+ * @run driver jdk.test.lib.helpers.ClassFileInstaller jdk.test.whitebox.WhiteBox\n+ * @run main\/othervm -Xbootclasspath\/a:. -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI CheckForProperDetailStackTrace\n@@ -43,0 +46,1 @@\n+import jdk.test.whitebox.WhiteBox;\n@@ -62,1 +66,4 @@\n-    private static final boolean expectSourceInformation = Platform.isLinux() || Platform.isWindows();\n+    \/\/ Windows has source information only in full pdbs, not in stripped pdbs\n+    private static boolean expectSourceInformation = Platform.isLinux() || Platform.isWindows();\n+\n+    static WhiteBox wb = WhiteBox.getWhiteBox();\n@@ -141,0 +148,2 @@\n+        if (wb.hasExternalSymbolsStripped()) { expectSourceInformation = false; }\n+\n","filename":"test\/hotspot\/jtreg\/runtime\/NMT\/CheckForProperDetailStackTrace.java","additions":12,"deletions":3,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -81,0 +81,2 @@\n+  public native boolean  hasExternalSymbolsStripped();\n+\n","filename":"test\/lib\/jdk\/test\/whitebox\/WhiteBox.java","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"}]}