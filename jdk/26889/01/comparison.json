{"files":[{"patch":"@@ -86,2 +86,1 @@\n-    static UnixFileAttributes getIfExists(UnixPath path)\n-        throws UnixException\n+    static UnixFileAttributes getIfExists(UnixPath path) throws UnixException\n@@ -89,9 +88,1 @@\n-        UnixFileAttributes attrs = new UnixFileAttributes();\n-        int errno = UnixNativeDispatcher.stat2(path, attrs);\n-        if (errno == 0) {\n-            return attrs;\n-        } else if (errno == UnixConstants.ENOENT) {\n-            return null;\n-        } else {\n-            throw new UnixException(errno);\n-        }\n+        return getIfExists(path, true);\n@@ -109,1 +100,1 @@\n-                                         path.asByteArray(), flag, attrs);\n+                                         path, flag, attrs);\n@@ -113,2 +104,2 @@\n-\n-            throw x;\n+            else\n+                throw x;\n@@ -116,1 +107,0 @@\n-\n@@ -133,1 +123,1 @@\n-        UnixNativeDispatcher.fstatat(dfd, path.asByteArray(), flag, attrs);\n+        UnixNativeDispatcher.fstatat(dfd, path, flag, attrs);\n","filename":"src\/java.base\/unix\/classes\/sun\/nio\/fs\/UnixFileAttributes.java","additions":6,"deletions":16,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -253,10 +253,1 @@\n-            int errno = stat0(buffer.address(), attrs);\n-            if (errno != 0) {\n-                throw new UnixException(errno);\n-            }\n-        }\n-    }\n-\n-    static int stat2(UnixPath path, UnixFileAttributes attrs) {\n-        try (NativeBuffer buffer = copyToNativeBuffer(path)) {\n-            return stat0(buffer.address(), attrs);\n+            stat0(buffer.address(), attrs);\n@@ -265,2 +256,1 @@\n-\n-    private static native int stat0(long pathAddress, UnixFileAttributes attrs);\n+    private static native void stat0(long pathAddress, UnixFileAttributes attrs);\n@@ -291,1 +281,1 @@\n-    static void fstatat(int dfd, byte[] path, int flag, UnixFileAttributes attrs)\n+    static void fstatat(int dfd, UnixPath path, int flag, UnixFileAttributes attrs)\n@@ -294,1 +284,1 @@\n-        try (NativeBuffer buffer = NativeBuffers.asNativeBuffer(path)) {\n+        try (NativeBuffer buffer = copyToNativeBuffer(path)) {\n","filename":"src\/java.base\/unix\/classes\/sun\/nio\/fs\/UnixNativeDispatcher.java","additions":4,"deletions":14,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -648,1 +648,1 @@\n-JNIEXPORT jint JNICALL\n+JNIEXPORT void JNICALL\n@@ -665,1 +665,0 @@\n-            return 0;\n@@ -667,1 +666,1 @@\n-            return errno;\n+            throwUnixException(env, errno);\n@@ -674,1 +673,0 @@\n-        return 0;\n@@ -676,1 +674,1 @@\n-        return errno;\n+        throwUnixException(env, errno);\n@@ -777,3 +775,1 @@\n-    if (err == -1) {\n-        throwUnixException(env, errno);\n-    } else {\n+    if (err == 0) {\n@@ -781,0 +777,2 @@\n+    } else {\n+        throwUnixException(env, errno);\n","filename":"src\/java.base\/unix\/native\/libnio\/fs\/UnixNativeDispatcher.c","additions":6,"deletions":8,"binary":false,"changes":14,"status":"modified"}]}