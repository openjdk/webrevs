{"files":[{"patch":"@@ -98,8 +98,8 @@\n-        int errno = UnixNativeDispatcher.fstatat(UnixConstants.AT_FDCWD,\n-                                                 path, flag, attrs);\n-        if (errno == 0) {\n-            return attrs;\n-        } else if (errno == UnixConstants.ENOENT) {\n-            return null;\n-        } else {\n-            throw new UnixException(errno);\n+        try {\n+            UnixNativeDispatcher.fstatat(UnixConstants.AT_FDCWD,\n+                                         path, flag, attrs);\n+        } catch (UnixException x) {\n+            if (x.errno() == UnixConstants.ENOENT)\n+                return null;\n+            else\n+                throw x;\n@@ -107,0 +107,1 @@\n+        return attrs;\n","filename":"src\/java.base\/unix\/classes\/sun\/nio\/fs\/UnixFileAttributes.java","additions":9,"deletions":8,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -253,10 +253,1 @@\n-            int errno = stat0(buffer.address(), attrs);\n-            if (errno != 0) {\n-                throw new UnixException(errno);\n-            }\n-        }\n-    }\n-\n-    static int stat2(UnixPath path, UnixFileAttributes attrs) {\n-        try (NativeBuffer buffer = copyToNativeBuffer(path)) {\n-            return stat0(buffer.address(), attrs);\n+            stat0(buffer.address(), attrs);\n@@ -265,2 +256,1 @@\n-\n-    private static native int stat0(long pathAddress, UnixFileAttributes attrs);\n+    private static native void stat0(long pathAddress, UnixFileAttributes attrs);\n@@ -291,1 +281,1 @@\n-    static int fstatat(int dfd, UnixPath path, int flag, UnixFileAttributes attrs)\n+    static void fstatat(int dfd, UnixPath path, int flag, UnixFileAttributes attrs)\n@@ -295,1 +285,1 @@\n-            return fstatat0(dfd, buffer.address(), flag, attrs);\n+            fstatat0(dfd, buffer.address(), flag, attrs);\n@@ -298,1 +288,1 @@\n-    private static native int fstatat0(int dfd, long pathAddress, int flag,\n+    private static native void fstatat0(int dfd, long pathAddress, int flag,\n","filename":"src\/java.base\/unix\/classes\/sun\/nio\/fs\/UnixNativeDispatcher.java","additions":5,"deletions":15,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -648,1 +648,1 @@\n-JNIEXPORT jint JNICALL\n+JNIEXPORT void JNICALL\n@@ -665,1 +665,0 @@\n-            return 0;\n@@ -667,1 +666,1 @@\n-            return errno;\n+            throwUnixException(env, errno);\n@@ -674,1 +673,0 @@\n-        return 0;\n@@ -676,1 +674,1 @@\n-        return errno;\n+        throwUnixException(env, errno);\n@@ -744,1 +742,1 @@\n-JNIEXPORT int JNICALL\n+JNIEXPORT void JNICALL\n@@ -764,2 +762,0 @@\n-        } else if (errno == ENOENT) {\n-            return ENOENT;\n@@ -770,1 +766,1 @@\n-        return 0;\n+        return;\n@@ -776,1 +772,1 @@\n-        return -1;\n+        return;\n@@ -781,2 +777,0 @@\n-    } else if (errno == ENOENT) {\n-        return ENOENT;\n@@ -786,1 +780,0 @@\n-    return 0;\n","filename":"src\/java.base\/unix\/native\/libnio\/fs\/UnixNativeDispatcher.c","additions":6,"deletions":13,"binary":false,"changes":19,"status":"modified"}]}