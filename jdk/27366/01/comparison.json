{"files":[{"patch":"@@ -817,1 +817,0 @@\n-java\/awt\/Frame\/SizeMinimizedTest.java 8305915 linux-x64\n","filename":"test\/jdk\/ProblemList.txt","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2010, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -25,6 +25,5 @@\n-  @test\n-  @key headful\n-  @bug 6895647\n-  @summary X11 Frame locations should be what we set them to\n-  @author anthony.petrov@oracle.com: area=awt.toplevel\n-  @run main FrameLocation\n+ * @test\n+ * @key headful\n+ * @bug 6895647\n+ * @summary X11 Frame locations should be what we set them to\n+ * @run main FrameLocation\n@@ -33,1 +32,8 @@\n-import java.awt.*;\n+import javax.imageio.ImageIO;\n+import java.awt.Dimension;\n+import java.awt.EventQueue;\n+import java.awt.Frame;\n+import java.awt.Rectangle;\n+import java.awt.Robot;\n+import java.awt.Toolkit;\n+import java.io.File;\n@@ -38,0 +44,3 @@\n+    private static Frame f;\n+    private static volatile int xPos;\n+    private static volatile int yPos;\n@@ -39,4 +48,8 @@\n-    public static void main(String[] args) {\n-        Frame f = new Frame(\"test\");\n-        f.setBounds(X, Y, 250, 250); \/\/ the size doesn't matter\n-        f.setVisible(true);\n+    public static void main(String[] args) throws Exception {\n+        Robot robot = new Robot();\n+        try {\n+            EventQueue.invokeAndWait(() -> {\n+                f = new Frame(\"Frame Location Test\");\n+                f.setBounds(X, Y, 250, 250); \/\/ the size doesn't matter\n+                f.setVisible(true);\n+            });\n@@ -44,6 +57,4 @@\n-        for (int i = 0; i < 10; i++) {\n-            \/\/ 2 seconds must be enough for the WM to show the window\n-            try {\n-                Thread.sleep(2000);\n-            } catch (InterruptedException ex) {\n-            }\n+            for (int i = 0; i < 10; i++) {\n+                \/\/ 2 seconds must be enough for the WM to show the window\n+                robot.waitForIdle();\n+                robot.delay(2000);\n@@ -51,3 +62,5 @@\n-            \/\/ Check the location\n-            int x = f.getX();\n-            int y = f.getY();\n+                EventQueue.invokeAndWait(() -> {\n+                    \/\/ Check the location\n+                    xPos = f.getX();\n+                    yPos = f.getY();\n+                });\n@@ -55,3 +68,8 @@\n-            if (x != X || y != Y) {\n-                throw new RuntimeException(\"The frame location is wrong! Current: \" + x + \", \" + y + \";  expected: \" + X + \", \" + Y);\n-            }\n+                if (xPos != X || yPos != Y) {\n+                    Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();\n+                    ImageIO.write(robot.createScreenCapture(\n+                                    new Rectangle(0, 0, screenSize.width, screenSize.height)),\n+                            \"png\", new File(\"FailureImage.png\"));\n+                    throw new RuntimeException(\"The frame location is wrong! Current: \" +\n+                            xPos + \", \" + yPos + \";  expected: \" + X + \", \" + Y);\n+                }\n@@ -59,4 +77,5 @@\n-            \/\/ Emulate what happens when setGraphicsConfiguration() is called\n-            synchronized (f.getTreeLock()) {\n-                f.removeNotify();\n-                f.addNotify();\n+                \/\/ Emulate what happens when setGraphicsConfiguration() is called\n+                synchronized (f.getTreeLock()) {\n+                    f.removeNotify();\n+                    f.addNotify();\n+                }\n@@ -64,0 +83,6 @@\n+        } finally {\n+            EventQueue.invokeAndWait(() -> {\n+                if (f != null) {\n+                    f.dispose();\n+                }\n+            });\n@@ -65,2 +90,0 @@\n-\n-        f.dispose();\n@@ -69,1 +92,0 @@\n-\n","filename":"test\/jdk\/java\/awt\/Frame\/FrameLocation\/FrameLocation.java","additions":53,"deletions":31,"binary":false,"changes":84,"status":"modified"}]}