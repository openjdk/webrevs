{"files":[{"patch":"@@ -33,1 +33,0 @@\n-import java.awt.EventQueue;\n@@ -45,3 +44,0 @@\n-    private static Frame f;\n-    private static volatile int xPos;\n-    private static volatile int yPos;\n@@ -51,6 +47,3 @@\n-        try {\n-            EventQueue.invokeAndWait(() -> {\n-                f = new Frame(\"Frame Location Test\");\n-                f.setBounds(X, Y, 250, 250); \/\/ the size doesn't matter\n-                f.setVisible(true);\n-            });\n+        Frame f = new Frame(\"test\");\n+        f.setBounds(X, Y, 250, 250); \/\/ the size doesn't matter\n+        f.setVisible(true);\n@@ -58,4 +51,6 @@\n-            for (int i = 0; i < 10; i++) {\n-                \/\/ 2 seconds must be enough for the WM to show the window\n-                robot.waitForIdle();\n-                robot.delay(2000);\n+        for (int i = 0; i < 10; i++) {\n+            \/\/ 2 seconds must be enough for the WM to show the window\n+            try {\n+                Thread.sleep(2000);\n+            } catch (InterruptedException ex) {\n+            }\n@@ -63,5 +58,3 @@\n-                EventQueue.invokeAndWait(() -> {\n-                    \/\/ Check the location\n-                    xPos = f.getX();\n-                    yPos = f.getY();\n-                });\n+            \/\/ Check the location\n+            int x = f.getX();\n+            int y = f.getY();\n@@ -69,8 +62,7 @@\n-                if (xPos != X || yPos != Y) {\n-                    Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();\n-                    ImageIO.write(robot.createScreenCapture(\n-                                    new Rectangle(new Point(), screenSize)),\n-                            \"png\", new File(\"FailureImage.png\"));\n-                    throw new RuntimeException(\"The frame location is wrong! Current: \" +\n-                            xPos + \", \" + yPos + \";  expected: \" + X + \", \" + Y);\n-                }\n+            if (x != X || y != Y) {\n+                Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();\n+                ImageIO.write(robot.createScreenCapture(\n+                                new Rectangle(new Point(), screenSize)),\n+                        \"png\", new File(\"FailureImage.png\"));\n+                throw new RuntimeException(\"The frame location is wrong! Current: \" + x + \", \" + y + \";  expected: \" + X + \", \" + Y);\n+            }\n@@ -78,5 +70,4 @@\n-                \/\/ Emulate what happens when setGraphicsConfiguration() is called\n-                synchronized (f.getTreeLock()) {\n-                    f.removeNotify();\n-                    f.addNotify();\n-                }\n+            \/\/ Emulate what happens when setGraphicsConfiguration() is called\n+            synchronized (f.getTreeLock()) {\n+                f.removeNotify();\n+                f.addNotify();\n@@ -84,6 +75,0 @@\n-        } finally {\n-            EventQueue.invokeAndWait(() -> {\n-                if (f != null) {\n-                    f.dispose();\n-                }\n-            });\n@@ -91,0 +76,2 @@\n+\n+        f.dispose();\n","filename":"test\/jdk\/java\/awt\/Frame\/FrameLocation\/FrameLocation.java","additions":25,"deletions":38,"binary":false,"changes":63,"status":"modified"}]}