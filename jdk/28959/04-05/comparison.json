{"files":[{"patch":"@@ -39,1 +39,1 @@\n-import jdk.jpackage.internal.model.MacDmgPackage;\n+import jdk.jpackage.internal.resources.ResourceLocator;\n@@ -43,7 +43,2 @@\n-    public static void prepareLicense(MacDmgPackage pkg, BuildEnv env,\n-                Path licenseFile) throws IOException {\n-        final var licFile = pkg.licenseFile();\n-        if (licFile.isEmpty()) {\n-            return;\n-        }\n-\n+    public static void prepareLicensePListFile(Path licenseFile, Path licensePListFile)\n+            throws IOException {\n@@ -51,1 +46,1 @@\n-                Files.readAllBytes(licFile.orElseThrow());\n+                Files.readAllBytes(licenseFile);\n@@ -66,1 +61,1 @@\n-        env.createResource(DEFAULT_LICENSE_PLIST)\n+        new OverridableResource(DEFAULT_LICENSE_PLIST, ResourceLocator.class)\n@@ -69,1 +64,1 @@\n-                .saveToFile(licenseFile);\n+                .saveToFile(licensePListFile);\n@@ -107,1 +102,1 @@\n-    private static final String DEFAULT_LICENSE_PLIST=\"lic_template.plist\";\n+    private static final String DEFAULT_LICENSE_PLIST = \"lic_template.plist\";\n","filename":"src\/jdk.jpackage\/macosx\/classes\/jdk\/jpackage\/internal\/MacDmgLicense.java","additions":7,"deletions":12,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -107,1 +107,1 @@\n-    Path licenseFile() {\n+    Path licensePListFile() {\n@@ -188,1 +188,3 @@\n-        MacDmgLicense.prepareLicense(pkg, env, licenseFile());\n+        if (pkg.licenseFile().isPresent()) {\n+            MacDmgLicense.prepareLicensePListFile(pkg.licenseFile().get(), licensePListFile());\n+        }\n@@ -341,1 +343,1 @@\n-                    normalizedAbsolutePathString(licenseFile())\n+                    normalizedAbsolutePathString(licensePListFile())\n","filename":"src\/jdk.jpackage\/macosx\/classes\/jdk\/jpackage\/internal\/MacDmgPackager.java","additions":5,"deletions":3,"binary":false,"changes":8,"status":"modified"}]}