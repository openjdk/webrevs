{"files":[{"patch":"@@ -260,7 +260,1 @@\n-                    \/\/ JDK-8352728: we prefer java.io.File::getCanonicalFile\n-                    \/\/ over java.nio.file.Path::toRealPath because the former\n-                    \/\/ is more fault-tolerant, since the canonical form of a\n-                    \/\/ pathname is specified to exist even for nonexistent\n-                    \/\/ or inaccessible files.\n-                    path = currentPath.toFile().getCanonicalFile().toPath()\n-                            .resolveSibling(path);\n+                    path = currentPath.toRealPath().resolveSibling(path);\n","filename":"src\/java.base\/share\/classes\/java\/security\/Security.java","additions":1,"deletions":7,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -36,2 +36,0 @@\n-import static java.nio.file.StandardOpenOption.APPEND;\n-\n@@ -40,3 +38,2 @@\n- * @summary Ensures java.security is loadable in Windows and filesystem\n- * soft-links are resolved, even when the user does not have permissions\n- * on one of the parent directories.\n+ * @summary Ensures java.security is loadable in Windows, even when the user\n+ * does not have permissions on one of the parent directories.\n@@ -50,18 +47,0 @@\n-    private static final String LF = System.lineSeparator();\n-    private static final String TEST_PROPERTY =\n-            \"test.property.name=test_property_value\";\n-\n-    \/\/ Unlike symbolic links, directory junctions do not require elevation\n-    private static void createJunction(Path target, Path link)\n-            throws IOException, InterruptedException {\n-        if (!Files.isDirectory(target)) {\n-            throw new IOException(\"The target must be a directory: \" + target);\n-        }\n-        int exitCode =\n-                new ProcessBuilder(\"cmd\", \"\/c\", \"MKLINK\", \"\/J\", link.toString(),\n-                        target.toString()).inheritIO().start().waitFor();\n-        if (exitCode != 0) {\n-            throw new IOException(\"Unexpected exit code: \" + exitCode);\n-        }\n-    }\n-\n@@ -70,18 +49,0 @@\n-        \/\/ We will create the following directories structure:\n-        \/\/\n-        \/\/ ğŸ“ JDK-8352728-tmp-*\/\n-        \/\/ â”œâ”€ğŸ”’ jdk-parent-dir\/         (ACL with REMOVED-PERMISSIONS)\n-        \/\/ â”‚ â””â”€ğŸ“ jdk\/\n-        \/\/ â”‚   â”œâ”€ğŸ“ conf\/\n-        \/\/ â”‚   â”‚ â”œâ”€ğŸ“ security\/\n-        \/\/ â”‚   â”‚ â”‚ â”œâ”€ğŸ“„ java.security\n-        \/\/ â”‚   â”‚ â”‚ â”‚    ğŸ“ include link-to-other-dir\/other.properties\n-        \/\/ â”‚   â”‚ â”‚ â”œâ”€ğŸ”— link-to-other-dir\/ âŸ¹ ğŸ“ JDK-8352728-tmp-*\/other-dir\n-        \/\/ â”‚   â”‚ â”‚ â””â”€...               (JUNCTION)\n-        \/\/ â”‚   â”‚ â””â”€...\n-        \/\/ â”‚   â””â”€...\n-        \/\/ â”œâ”€ğŸ“ other-dir\/\n-        \/\/ â”‚ â””â”€ğŸ“„ other.properties\n-        \/\/ â”‚      ğŸ“ include ..\/relatively.included.properties\n-        \/\/ â””â”€ğŸ“„ relatively.included.properties\n-        \/\/      ğŸ“ test.property.name=test_property_value\n@@ -95,19 +56,0 @@\n-            \/\/ Create a properties file with a relative include in it\n-            Path otherDir = temp.resolve(\"other-dir\");\n-            Files.createDirectories(otherDir);\n-            Path other = otherDir.resolve(\"other.properties\");\n-            Path included = temp.resolve(\"relatively.included.properties\");\n-            Files.writeString(included, TEST_PROPERTY + LF);\n-            Files.writeString(other,\n-                    \"include ..\/\" + included.getFileName() + LF);\n-\n-            \/\/ Create a junction to the properties file dir, from the jdk dir\n-            Path javaSec = jdk.resolve(\"conf\", \"security\", \"java.security\");\n-            Path linkDir = javaSec.resolveSibling(\"link-to-other-dir\");\n-            createJunction(otherDir, linkDir);\n-\n-            \/\/ Include the properties file from java.security (through the link)\n-            Files.writeString(javaSec,\n-                    LF + \"include \" + linkDir.getFileName() + \"\/\" +\n-                            other.getFileName() + LF, APPEND);\n-\n@@ -132,1 +74,1 @@\n-                                jdk.resolve(\"bin\", \"java.exe\").toString(),\n+                        List.of(jdk.resolve(\"bin\", \"java.exe\").toString(),\n@@ -135,3 +77,1 @@\n-                                \"-version\"))\n-                        .shouldHaveExitValue(0)\n-                        .shouldContain(TEST_PROPERTY);\n+                                \"-version\"))).shouldHaveExitValue(0);\n","filename":"test\/jdk\/java\/security\/Security\/ConfigFileTestDirPermissions.java","additions":4,"deletions":64,"binary":false,"changes":68,"status":"modified"}]}