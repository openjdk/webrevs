{"files":[{"patch":"@@ -0,0 +1,61 @@\n+#\n+# Copyright (c) 2025, Red Hat, Inc.\n+#\n+# DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+#\n+# This code is free software; you can redistribute it and\/or modify it\n+# under the terms of the GNU General Public License version 2 only, as\n+# published by the Free Software Foundation.\n+#\n+# This code is distributed in the hope that it will be useful, but WITHOUT\n+# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+# FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+# version 2 for more details (a copy is included in the LICENSE file that\n+# accompanied this code).\n+#\n+# You should have received a copy of the GNU General Public License version\n+# 2 along with this work; if not, write to the Free Software Foundation,\n+# Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+#\n+# Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+# or visit www.oracle.com if you need additional information or have any\n+# questions.\n+#\n+\n+# @test\n+# @summary Ensures the java executable is able to load extra security\n+# properties files from anonymous pipes (non-regular files).\n+# @bug 8352728\n+# @requires os.family == \"linux\"\n+# @run shell\/timeout=30 ConfigFileTestAnonymousPipes.sh\n+\n+if [ -z \"${TESTJAVA}\" ]; then\n+    JAVA=java\n+else\n+    JAVA=\"${TESTJAVA}\/bin\/java\"\n+fi\n+\n+TEST_PROP=\"ConfigFileTestAnonymousPipes.property.name=PROPERTY_VALUE\"\n+\n+function check_java() {\n+    local java_output java_exit_code\n+    java_output=\"$(\"${JAVA}\" ${TESTVMOPTS} ${TESTJAVAOPTS} -XshowSettings:security:properties \\\n+                             -Djava.security.debug=properties \"$@\" -version 2>&1)\"\n+    java_exit_code=$?\n+    if [ ${java_exit_code} -ne 0 ] || ! grep -qF \"${TEST_PROP}\" <<<\"${java_output}\"; then\n+        echo \"TEST FAILED (java exit code: ${java_exit_code})\"\n+        echo \"${java_output}\"\n+        exit 1\n+    fi\n+}\n+\n+# https:\/\/www.gnu.org\/software\/bash\/manual\/bash.html#Pipelines\n+echo \"Extra properties from pipeline\"\n+echo \"${TEST_PROP}\" | check_java -Djava.security.properties=\/dev\/stdin || exit 1\n+\n+# https:\/\/www.gnu.org\/software\/bash\/manual\/bash.html#Process-Substitution\n+echo \"Extra properties from process-substitution, include other from pipeline\"\n+echo \"${TEST_PROP}\" | check_java -Djava.security.properties=<(echo \"include \/dev\/stdin\") || exit 1\n+\n+echo \"TEST PASS - OK\"\n+exit 0\n","filename":"test\/jdk\/java\/security\/Security\/ConfigFileTestAnonymousPipes.sh","additions":61,"deletions":0,"binary":false,"changes":61,"status":"added"}]}