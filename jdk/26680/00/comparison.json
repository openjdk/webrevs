{"files":[{"patch":"@@ -3300,2 +3300,6 @@\n-  JOBOBJECT_EXTENDED_LIMIT_INFORMATION jeli = {};\n-  BOOL res = QueryInformationJobObject(nullptr, JobObjectExtendedLimitInformation, &jeli, sizeof(jeli), nullptr);\n+  BOOL is_in_job_object = false;\n+  BOOL res = IsProcessInJob(GetCurrentProcess(), nullptr, &is_in_job_object);\n+  if (!res) {\n+    char buf[512];\n+    size_t buf_len = os::lasterror(buf, sizeof(buf));\n+    warning(\"Attempt to determine whether the process is running in a job failed for commit limit: %s\", buf_len != 0 ? buf : \"<unknown error>\");\n@@ -3303,0 +3307,11 @@\n+    \/\/ Conservatively assume no limit when there was an error calling IsProcessInJob.\n+    return SIZE_MAX;\n+  }\n+\n+  if (!is_in_job_object) {\n+    \/\/ Not limited by a Job Object\n+    return SIZE_MAX;\n+  }\n+\n+  JOBOBJECT_EXTENDED_LIMIT_INFORMATION jeli = {};\n+  res = QueryInformationJobObject(nullptr, JobObjectExtendedLimitInformation, &jeli, sizeof(jeli), nullptr);\n@@ -3306,1 +3321,1 @@\n-    warning(\"Attempt to query job object information failed: %s\", buf_len != 0 ? buf : \"<unknown error>\");\n+    warning(\"Attempt to query job object information failed for commit limit: %s\", buf_len != 0 ? buf : \"<unknown error>\");\n","filename":"src\/hotspot\/os\/windows\/os_windows.cpp","additions":18,"deletions":3,"binary":false,"changes":21,"status":"modified"}]}