{"files":[{"patch":"@@ -774,1 +774,1 @@\n-  Node* tlab_end = macro->make_load(toobig_false, mem, tlab_end_adr, 0, TypeRawPtr::BOTTOM, T_ADDRESS);\n+  Node* tlab_end = macro->make_load_raw(toobig_false, mem, tlab_end_adr, 0, TypeRawPtr::BOTTOM, T_ADDRESS);\n","filename":"src\/hotspot\/share\/gc\/shared\/c2\/barrierSetC2.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1201,1 +1201,1 @@\n-Node* PhaseMacroExpand::make_load(Node* ctl, Node* mem, Node* base, int offset, const Type* value_type, BasicType bt) {\n+Node* PhaseMacroExpand::make_load_raw(Node* ctl, Node* mem, Node* base, int offset, const Type* value_type, BasicType bt) {\n@@ -1210,1 +1210,1 @@\n-Node* PhaseMacroExpand::make_store(Node* ctl, Node* mem, Node* base, int offset, Node* value, BasicType bt) {\n+Node* PhaseMacroExpand::make_store_raw(Node* ctl, Node* mem, Node* base, int offset, Node* value, BasicType bt) {\n@@ -1760,1 +1760,1 @@\n-  rawmem = make_store(control, rawmem, object, oopDesc::mark_offset_in_bytes(), mark_node, TypeX_X->basic_type());\n+  rawmem = make_store_raw(control, rawmem, object, oopDesc::mark_offset_in_bytes(), mark_node, TypeX_X->basic_type());\n@@ -1763,1 +1763,1 @@\n-    rawmem = make_store(control, rawmem, object, oopDesc::klass_offset_in_bytes(), klass_node, T_METADATA);\n+    rawmem = make_store_raw(control, rawmem, object, oopDesc::klass_offset_in_bytes(), klass_node, T_METADATA);\n@@ -1769,1 +1769,1 @@\n-    rawmem = make_store(control, rawmem, object, arrayOopDesc::length_offset_in_bytes(), length, T_INT);\n+    rawmem = make_store_raw(control, rawmem, object, arrayOopDesc::length_offset_in_bytes(), length, T_INT);\n","filename":"src\/hotspot\/share\/opto\/macro.cpp","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -61,4 +61,4 @@\n-  Node* make_load( Node* ctl, Node* mem, Node* base, int offset,\n-                   const Type* value_type, BasicType bt);\n-  Node* make_store(Node* ctl, Node* mem, Node* base, int offset,\n-                   Node* value, BasicType bt);\n+  Node* make_load_raw(Node* ctl, Node* mem, Node* base, int offset,\n+                      const Type* value_type, BasicType bt);\n+  Node* make_store_raw(Node* ctl, Node* mem, Node* base, int offset,\n+                       Node* value, BasicType bt);\n","filename":"src\/hotspot\/share\/opto\/macro.hpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -4114,0 +4114,9 @@\n+Node* ClearArrayNode::make_address(Node* dest, Node* offset, PhaseGVN* phase) {\n+  Node* base = dest;\n+  if (phase->type(dest)->isa_oopptr() == nullptr) {\n+    \/\/ May be called as part of the initialization of a just allocated object\n+    base = phase->C->top();\n+  }\n+  return phase->transform(new AddPNode(base, dest, offset));\n+}\n+\n@@ -4124,6 +4133,1 @@\n-    Node* base = dest;\n-    if (phase->type(dest)->isa_oopptr() == nullptr) {\n-      base = phase->C->top();\n-    }\n-    Node* adr = new AddPNode(base, dest, phase->MakeConX(offset));\n-    adr = phase->transform(adr);\n+    Node* adr = make_address(dest, phase->MakeConX(offset), phase);\n@@ -4163,5 +4167,1 @@\n-  Node* base = dest;\n-  if (phase->type(dest)->isa_oopptr() == nullptr) {\n-    base = phase->C->top();\n-  }\n-  Node* adr = phase->transform(new AddPNode(base, dest, start_offset));\n+  Node* adr = make_address(dest, start_offset, phase);\n@@ -4191,6 +4191,1 @@\n-    Node* base = dest;\n-    if (phase->type(dest)->isa_oopptr() == nullptr) {\n-      base = phase->C->top();\n-    }\n-    Node* adr = new AddPNode(base, dest, phase->MakeConX(done_offset));\n-    adr = phase->transform(adr);\n+    Node* adr = make_address(dest, phase->MakeConX(done_offset), phase);\n","filename":"src\/hotspot\/share\/opto\/memnode.cpp","additions":12,"deletions":17,"binary":false,"changes":29,"status":"modified"},{"patch":"@@ -1078,0 +1078,1 @@\n+  static Node* make_address(Node* dest, Node* offset, PhaseGVN* phase);\n","filename":"src\/hotspot\/share\/opto\/memnode.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"}]}