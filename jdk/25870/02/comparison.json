{"files":[{"patch":"@@ -247,1 +247,1 @@\n-  if (frame_type < 64) {\n+  if (frame_type <= SAME_FRAME_END) {\n@@ -269,1 +269,1 @@\n-  if (frame_type < 128) {\n+  if (frame_type <= SAME_LOCALS_1_STACK_ITEM_FRAME_END) {\n@@ -272,1 +272,1 @@\n-      offset = frame_type - 64;\n+      offset = frame_type - SAME_LOCALS_1_STACK_ITEM_FRAME_START;\n@@ -279,1 +279,1 @@\n-      offset = _prev_frame->offset() + frame_type - 63;\n+      offset = _prev_frame->offset() + frame_type - (SAME_LOCALS_1_STACK_ITEM_FRAME_START - 1);\n@@ -343,1 +343,1 @@\n-  if (frame_type <= SAME_EXTENDED) {\n+  if (frame_type <= SAME_FRAME_EXTENDED) {\n@@ -347,1 +347,1 @@\n-    int chops = SAME_EXTENDED - frame_type;\n+    int chops = SAME_FRAME_EXTENDED - frame_type;\n@@ -350,0 +350,1 @@\n+    assert(chops == 0 || (frame_type >= CHOP_FRAME_START && frame_type <= CHOP_FRAME_END), \"should be\");\n@@ -383,1 +384,1 @@\n-  } else if (frame_type < SAME_EXTENDED + 4) {\n+  } else if (frame_type < SAME_FRAME_EXTENDED + 4) {\n@@ -385,1 +386,2 @@\n-    int appends = frame_type - SAME_EXTENDED;\n+    assert(frame_type >= APPEND_FRAME_START && frame_type <= APPEND_FRAME_END, \"should be\");\n+    int appends = frame_type - SAME_FRAME_EXTENDED;\n@@ -415,1 +417,1 @@\n-  if (frame_type == FULL) {\n+  if (frame_type == FULL_FRAME) {\n","filename":"src\/hotspot\/share\/classfile\/stackMapTable.cpp","additions":11,"deletions":9,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -109,0 +109,1 @@\n+  friend class VM_RedefineClasses;\n@@ -151,0 +152,6 @@\n+    SAME_FRAME_START = 0,\n+    SAME_FRAME_END = 63,\n+    SAME_LOCALS_1_STACK_ITEM_FRAME_START = 64,\n+    SAME_LOCALS_1_STACK_ITEM_FRAME_END = 127,\n+    RESERVED_START = 128,\n+    RESERVED_END = 246,\n@@ -152,2 +159,6 @@\n-    SAME_EXTENDED = 251,\n-    FULL = 255\n+    CHOP_FRAME_START = 248,\n+    CHOP_FRAME_END = 250,\n+    SAME_FRAME_EXTENDED = 251,\n+    APPEND_FRAME_START = 252,\n+    APPEND_FRAME_END = 254,\n+    FULL_FRAME = 255\n","filename":"src\/hotspot\/share\/classfile\/stackMapTable.hpp","additions":14,"deletions":3,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -32,0 +32,1 @@\n+#include \"classfile\/stackMapTable.hpp\"\n@@ -3269,1 +3270,1 @@\n-    if (frame_type <= 63) {\n+    if (frame_type <= StackMapReader::SAME_FRAME_END) {\n@@ -3277,1 +3278,2 @@\n-    else if (frame_type >= 64 && frame_type <= 127) {\n+    else if (frame_type >= StackMapReader::SAME_LOCALS_1_STACK_ITEM_FRAME_START &&\n+             frame_type <= StackMapReader::SAME_LOCALS_1_STACK_ITEM_FRAME_END) {\n@@ -3283,1 +3285,2 @@\n-    else if (frame_type >= 128 && frame_type <= 246) {\n+    else if (frame_type >= StackMapReader::RESERVED_START &&\n+             frame_type <= StackMapReader::RESERVED_END) {\n@@ -3292,1 +3295,1 @@\n-    else if (frame_type == 247) {\n+    else if (frame_type == StackMapReader::SAME_LOCALS_1_STACK_ITEM_EXTENDED) {\n@@ -3302,1 +3305,2 @@\n-    else if (frame_type >= 248 && frame_type <= 250) {\n+    else if (frame_type >= StackMapReader::CHOP_FRAME_START &&\n+             frame_type <= StackMapReader::CHOP_FRAME_END) {\n@@ -3307,1 +3311,1 @@\n-    \/\/   u1 frame_type = SAME_FRAME_EXTENDED; \/* 251*\/\n+    \/\/   u1 frame_type = SAME_EXTENDED; \/* 251 *\/\n@@ -3310,1 +3314,1 @@\n-    else if (frame_type == 251) {\n+    else if (frame_type == StackMapReader::SAME_FRAME_EXTENDED) {\n@@ -3317,1 +3321,1 @@\n-    \/\/   verification_type_info locals[frame_type - 251];\n+    \/\/   verification_type_info locals[frame_type - SAME_EXTENDED];\n@@ -3319,1 +3323,2 @@\n-    else if (frame_type >= 252 && frame_type <= 254) {\n+    else if (frame_type >= StackMapReader::APPEND_FRAME_START &&\n+             frame_type <= StackMapReader::APPEND_FRAME_END) {\n@@ -3323,1 +3328,1 @@\n-      u1 len = frame_type - 251;\n+      u1 len = frame_type - StackMapReader::APPEND_FRAME_START;\n@@ -3338,1 +3343,1 @@\n-    else if (frame_type == 255) {\n+    else if (frame_type == StackMapReader::FULL_FRAME) {\n","filename":"src\/hotspot\/share\/prims\/jvmtiRedefineClasses.cpp","additions":16,"deletions":11,"binary":false,"changes":27,"status":"modified"}]}