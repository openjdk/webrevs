{"files":[{"patch":"@@ -24,1 +24,0 @@\n-import java.awt.Button;\n@@ -27,3 +26,0 @@\n-import java.awt.Panel;\n-import java.awt.event.ActionEvent;\n-import java.awt.event.ActionListener;\n@@ -36,0 +32,1 @@\n+\n@@ -39,0 +36,1 @@\n+import javax.print.PrintException;\n@@ -45,0 +43,5 @@\n+import javax.swing.BorderFactory;\n+import javax.swing.Box;\n+import javax.swing.JButton;\n+import javax.swing.JComponent;\n+import javax.swing.JOptionPane;\n@@ -56,15 +59,1 @@\n-        extends Frame implements Doc, Printable, ActionListener {\n-\n-    Button print2D = new Button(\"2D Print\");\n-    Button printMerlin = new Button(\"PrintService\");\n-    PrinterJob pj = PrinterJob.getPrinterJob();\n-    PrintService defService = PrintServiceLookup.lookupDefaultPrintService();\n-    HashPrintRequestAttributeSet prSet = new HashPrintRequestAttributeSet();\n-\n-    public Collate2DPrintingTest() {\n-        Panel butPanel = new Panel();\n-        butPanel.add(print2D);\n-        butPanel.add(printMerlin);\n-        print2D.addActionListener(this);\n-        printMerlin.addActionListener(this);\n-        add(\"South\", butPanel);\n+        extends Frame implements Doc, Printable {\n@@ -72,0 +61,3 @@\n+    private static JComponent createTestUI() {\n+        HashPrintRequestAttributeSet prSet = new HashPrintRequestAttributeSet();\n+        PrintService defService = PrintServiceLookup.lookupDefaultPrintService();\n@@ -74,2 +66,39 @@\n-        pj.setPrintable(Collate2DPrintingTest.this);\n-        setSize(300, 200);\n+\n+        JButton print2D = new JButton(\"2D Print\");\n+        print2D.addActionListener((ae) -> {\n+            try {\n+                PrinterJob pj = PrinterJob.getPrinterJob();\n+                pj.setPrintable(new Collate2DPrintingTest());\n+                if (pj.printDialog(prSet)) {\n+                    pj.print(prSet);\n+                }\n+            } catch (PrinterException ex) {\n+                ex.printStackTrace();\n+                String msg = \"PrinterException: \" + ex.getMessage();\n+                JOptionPane.showMessageDialog(print2D, msg, \"Error occurred\",\n+                        JOptionPane.ERROR_MESSAGE);\n+                PassFailJFrame.forceFail(msg);\n+            }\n+        });\n+\n+        JButton printMerlin = new JButton(\"PrintService\");\n+        printMerlin.addActionListener((ae) -> {\n+            try {\n+                DocPrintJob pj = defService.createPrintJob();\n+                pj.print(new Collate2DPrintingTest(), prSet);\n+            } catch (PrintException ex) {\n+                ex.printStackTrace();\n+                String msg = \"PrintException: \" + ex.getMessage();\n+                JOptionPane.showMessageDialog(printMerlin, msg, \"Error occurred\",\n+                        JOptionPane.ERROR_MESSAGE);\n+                PassFailJFrame.forceFail(msg);\n+            }\n+        });\n+\n+        Box main = Box.createVerticalBox();\n+        main.setBorder(BorderFactory.createEmptyBorder(8, 8, 8, 8));\n+        main.add(Box.createVerticalGlue());\n+        main.add(print2D);\n+        main.add(printMerlin);\n+        main.add(Box.createVerticalGlue());\n+        return main;\n@@ -88,16 +117,0 @@\n-    public void actionPerformed(ActionEvent ae) {\n-        try {\n-            if (ae.getSource() == print2D) {\n-                if (pj.printDialog(prSet)) {\n-                    pj.print(prSet);\n-                }\n-            } else {\n-                DocPrintJob pj = defService.createPrintJob();\n-                pj.print(this, prSet);\n-            }\n-        } catch (Exception e) {\n-            PassFailJFrame.forceFail( \"Test Failed\");\n-            e.printStackTrace();\n-        }\n-    }\n-\n@@ -141,1 +154,1 @@\n-                .testUI(Collate2DPrintingTest::new)\n+                .splitUI(Collate2DPrintingTest::createTestUI)\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/Collate2DPrintingTest.java","additions":51,"deletions":38,"binary":false,"changes":89,"status":"modified"},{"patch":"@@ -24,1 +24,0 @@\n-import java.awt.Button;\n@@ -26,1 +25,0 @@\n-import java.awt.FlowLayout;\n@@ -30,1 +28,0 @@\n-import java.awt.Panel;\n@@ -37,0 +34,6 @@\n+import javax.swing.BorderFactory;\n+import javax.swing.Box;\n+import javax.swing.JButton;\n+import javax.swing.JComponent;\n+import javax.swing.JOptionPane;\n+\n@@ -48,21 +51,12 @@\n-    PrinterJob pJob;\n-    PageFormat pf;\n-\n-    public InvalidPage() {\n-        super(\"Validate Page Test\");\n-        pJob = PrinterJob.getPrinterJob();\n-        pf = pJob.defaultPage();\n-        Paper p = pf.getPaper();\n-        p.setImageableArea(0, 0, p.getWidth(), p.getHeight());\n-        pf.setPaper(p);\n-        setLayout(new FlowLayout());\n-        Panel panel = new Panel();\n-        Button printButton = new Button(\"Print\");\n-        printButton.addActionListener(e -> {\n-            if (pJob.printDialog()) {\n-                pJob.setPrintable(InvalidPage.this, pf);\n-                try {\n-                    pJob.print();\n-                } catch (PrinterException pe) {\n-                    PassFailJFrame.forceFail(\"Test Failed\");\n-                    pe.printStackTrace();\n+    private static JComponent createTestUI() {\n+        JButton b = new JButton(\"Print\");\n+        b.addActionListener((ae) -> {\n+            try {\n+                PrinterJob job = PrinterJob.getPrinterJob();\n+                PageFormat pf = job.defaultPage();\n+                Paper p = pf.getPaper();\n+                p.setImageableArea(0, 0, p.getWidth(), p.getHeight());\n+                pf.setPaper(p);\n+                job.setPrintable(new InvalidPage(), pf);\n+                if (job.printDialog()) {\n+                    job.print();\n@@ -70,0 +64,6 @@\n+            } catch (PrinterException ex) {\n+                ex.printStackTrace();\n+                String msg = \"PrinterException: \" + ex.getMessage();\n+                JOptionPane.showMessageDialog(b, msg, \"Error occurred\",\n+                        JOptionPane.ERROR_MESSAGE);\n+                PassFailJFrame.forceFail(msg);\n@@ -72,3 +72,7 @@\n-        panel.add(printButton);\n-        add(panel);\n-        pack();\n+\n+        Box main = Box.createHorizontalBox();\n+        main.setBorder(BorderFactory.createEmptyBorder(8, 8, 8, 8));\n+        main.add(Box.createHorizontalGlue());\n+        main.add(b);\n+        main.add(Box.createHorizontalGlue());\n+        return main;\n@@ -133,1 +137,1 @@\n-                .testUI(InvalidPage::new)\n+                .splitUI(InvalidPage::createTestUI)\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/InvalidPage.java","additions":32,"deletions":28,"binary":false,"changes":60,"status":"modified"}]}