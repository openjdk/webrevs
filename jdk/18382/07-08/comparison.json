{"files":[{"patch":"@@ -5068,0 +5068,1 @@\n+    __ mv(count, 64);\n@@ -5071,1 +5072,1 @@\n-    __ add(buff, buff, temp0);\n+    __ addi(buff, buff, 64);\n@@ -5073,1 +5074,4 @@\n-    \/\/ Reduction sum for s1_new, multiplication for s2_new\n+    \/\/ Reduction sum for s1_new\n+    \/\/ 0xFF * 64 = 0x3FC0, so:\n+    \/\/ 1. Need to do vector-widening reduction sum\n+    \/\/ 2. It is safe to perform sign-extension during vmv.x.s with 16-bits elements\n@@ -5075,0 +5079,1 @@\n+    \/\/ Multiplication for s2_new\n@@ -5083,3 +5088,2 @@\n-    \/\/ 0xFF   * 0x10 = 0xFF0   max per single vector element,\n-    \/\/ 0xFF0  * 0x10 = 0xFF00  max per vector,\n-    \/\/ 0xFF00 * 0x4  = 0x3FC00 max for the whole group, so:\n+    \/\/ Upper bound for reduction sum:\n+    \/\/ 0xFF * (64 + 63 + ... + 2 + 1) = 0x817E0 max for whole register group, so:\n@@ -5207,1 +5211,1 @@\n-    VectorRegister vzero = v4; \/\/ group: v5, v6, v7\n+    VectorRegister vzero = v31;\n@@ -5217,1 +5221,1 @@\n-    VectorRegister vtable_64 = v24; \/\/ group: v25, v26, v27\n+    VectorRegister vtable_64 = v24; \/\/ group: v24, v25, v26, v27\n@@ -5219,1 +5223,1 @@\n-    VectorRegister vtemp1 = v28; \/\/ group: v29, v30, v31\n+    VectorRegister vtemp1 = v28;\n@@ -5233,2 +5237,1 @@\n-    __ vmv_v_x(vtable_64, temp1);\n-    __ vsub_vv(vtable_64, vtable_64, vtemp1);\n+    __ vrsub_vx(vtable_64, vtemp1, temp1);\n@@ -5236,1 +5239,1 @@\n-    __ vmv_v_i(vzero, 0);\n+    __ vsetivli(temp0, 16, Assembler::e8, Assembler::m1);\n@@ -5239,4 +5242,0 @@\n-      __ mv(temp1, 16);\n-      __ vsetvli(temp0, temp1, Assembler::e8, Assembler::m1);\n-\n-      \/\/ Generating accumulation coefficients for further calculations\n@@ -5244,2 +5243,1 @@\n-      __ vmv_v_x(vtable_16, temp1);\n-      __ vsub_vv(vtable_16, vtable_16, vtemp1);\n+      __ vrsub_vi(vtable_16, vtemp1, 16);\n@@ -5247,0 +5245,1 @@\n+    __ vmv_v_i(vzero, 0);\n@@ -5288,1 +5287,0 @@\n-    __ mv(step, 64);\n","filename":"src\/hotspot\/cpu\/riscv\/stubGenerator_riscv.cpp","additions":16,"deletions":18,"binary":false,"changes":34,"status":"modified"}]}