{"files":[{"patch":"@@ -1570,1 +1570,1 @@\n-        L_by1_loop, L_exit;\n+        L_by1_loop, L_exit, L_skip1, L_skip2;\n@@ -1584,0 +1584,21 @@\n+  \/\/ Ensure basic 4-byte alignment of input byte buffer\n+  mv(tmp1, 4);\n+  blt(len, tmp1, L_by1_loop);\n+  test_bit(tmp1, buf, 0);\n+  beqz(tmp1, L_skip1);\n+    subw(len, len, 1);\n+    lbu(tmp1, Address(buf));\n+    add(buf, buf, 1);\n+    update_byte_crc32(crc, tmp1, table0);\n+  bind(L_skip1);\n+    test_bit(tmp1, buf, 1);\n+    beqz(tmp1, L_skip2);\n+    subw(len, len, 2);\n+    lhu(tmp1, Address(buf));\n+    add(buf, buf, 2);\n+    andi(tmp2, tmp1, right_8_bits);\n+    update_byte_crc32(crc, tmp2, table0);\n+    srli(tmp2, tmp1, 8);\n+    update_byte_crc32(crc, tmp2, table0);\n+  bind(L_skip2);\n+\n@@ -1628,3 +1649,2 @@\n-    lwu(tmp1, Address(buf));\n-    andi(tmp2, tmp1, right_8_bits);\n-    update_byte_crc32(crc, tmp2, table0);\n+    lbu(tmp1, Address(buf));\n+    update_byte_crc32(crc, tmp1, table0);\n@@ -1634,3 +1654,2 @@\n-    srli(tmp2, tmp1, 8);\n-    andi(tmp2, tmp2, right_8_bits);\n-    update_byte_crc32(crc, tmp2, table0);\n+    lbu(tmp1, Address(buf, 1));\n+    update_byte_crc32(crc, tmp1, table0);\n@@ -1640,3 +1659,2 @@\n-    srli(tmp2, tmp1, 16);\n-    andi(tmp2, tmp2, right_8_bits);\n-    update_byte_crc32(crc, tmp2, table0);\n+    lbu(tmp1, Address(buf, 2));\n+    update_byte_crc32(crc, tmp1, table0);\n","filename":"src\/hotspot\/cpu\/riscv\/macroAssembler_riscv.cpp","additions":28,"deletions":10,"binary":false,"changes":38,"status":"modified"}]}