{"files":[{"patch":"@@ -88,1 +88,1 @@\n-THIS_SNIPPET := modules\/$(MODULE)\/Java.gmk\n+THIS_SNIPPET := $(call GetModuleSnippetName, Java)\n","filename":"make\/CompileJavaModules.gmk","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -187,1 +187,1 @@\n-THIS_SNIPPET := modules\/$(MODULE)\/Jmod.gmk\n+THIS_SNIPPET := $(call GetModuleSnippetName, Jmod)\n","filename":"make\/CreateJmods.gmk","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -273,0 +273,1 @@\n+# These variables are read by SetupCopyDebuginfo\n","filename":"make\/Images.gmk","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -1410,1 +1410,1 @@\n-CLEAN_PHASES := gensrc java native include\n+CLEAN_PHASES += gensrc java native include\n","filename":"make\/Main.gmk","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -152,1 +152,1 @@\n-PHASE_MAKEDIRS := $(TOPDIR)\/make\n+PHASE_MAKEDIRS += $(TOPDIR)\/make\n","filename":"make\/MainSupport.gmk","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -37,0 +37,1 @@\n+include Modules.gmk\n@@ -40,2 +41,4 @@\n-# Define the snippet for MakeSnippetStart\/End\n-THIS_SNIPPET := modules\/$(MODULE)\/$(MAKEFILE_PREFIX).gmk\n+################################################################################\n+# Include module specific build settings\n+\n+THIS_SNIPPET := $(call GetModuleSnippetName, $(MAKEFILE_PREFIX))\n@@ -43,1 +46,2 @@\n-include MakeSnippetStart.gmk\n+ifneq ($(wildcard $(THIS_SNIPPET)), )\n+  include MakeSnippetStart.gmk\n@@ -45,2 +49,2 @@\n-# Include the file being wrapped.\n-include $(THIS_SNIPPET)\n+  # Include the file being wrapped.\n+  include $(THIS_SNIPPET)\n@@ -48,1 +52,2 @@\n-include MakeSnippetEnd.gmk\n+  include MakeSnippetEnd.gmk\n+endif\n","filename":"make\/ModuleWrapper.gmk","additions":11,"deletions":6,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -181,0 +181,4 @@\n+  ifeq ($$($1_LOG_ACTION), )\n+    $1_LOG_ACTION := Compiling\n+  endif\n+\n@@ -475,1 +479,1 @@\n-\t\t$$(call LogWarn, Compiling up to $$(words $$($1_SRCS)) files for $1)\n+\t\t$$(call LogWarn, $$($1_LOG_ACTION) up to $$(words $$($1_SRCS)) files for $1)\n","filename":"make\/common\/JavaCompilation.gmk","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -36,1 +36,1 @@\n-    $(UPGRADEABLE_PLATFORM_MODULES)\n+    $(UPGRADEABLE_PLATFORM_MODULES) $(CUSTOM_UPGRADEABLE_PLATFORM_MODULES)\n@@ -219,1 +219,1 @@\n-  $(DEPS_$(strip $1))\n+  $(filter-out $(IMPORT_MODULES), $(DEPS_$(strip $1)))\n@@ -257,1 +257,2 @@\n-    $(sort $(filter-out $(MODULES_FILTER), $(UPGRADEABLE_PLATFORM_MODULES)))\n+    $(sort $(filter-out $(MODULES_FILTER), \\\n+    $(UPGRADEABLE_PLATFORM_MODULES) $(CUSTOM_UPGRADEABLE_PLATFORM_MODULES)))\n@@ -319,0 +320,13 @@\n+################################################################################\n+# Get a full snippet path for the current module and a given base name.\n+#\n+# Param 1 - The base name of the snippet file to include\n+GetModuleSnippetName = \\\n+  $(if $(CUSTOM_MODULE_MAKE_ROOT), \\\n+    $(if $(wildcard $(CUSTOM_MODULE_MAKE_ROOT)\/$(MODULE)\/$(strip $1).gmk), \\\n+      $(CUSTOM_MODULE_MAKE_ROOT)\/$(MODULE)\/$(strip $1).gmk, \\\n+      $(wildcard modules\/$(MODULE)\/$(strip $1).gmk) \\\n+    ), \\\n+    $(wildcard modules\/$(MODULE)\/$(strip $1).gmk) \\\n+  )\n+\n","filename":"make\/common\/Modules.gmk","additions":17,"deletions":3,"binary":false,"changes":20,"status":"modified"}]}