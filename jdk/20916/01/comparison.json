{"files":[{"patch":"@@ -228,2 +228,2 @@\n-            return Boolean.parseBoolean(provider.getProperty(\n-                    \"SecureRandom.\" + algorithm + \" ThreadSafe\", \"false\"));\n+            Service service = provider.getService(\"SecureRandom\", algorithm);\n+            return Boolean.parseBoolean(service.getAttribute(\"ThreadSafe\"));\n","filename":"src\/java.base\/share\/classes\/java\/security\/SecureRandom.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+import java.util.Collections;\n@@ -31,1 +32,1 @@\n- * @bug 7004967\n+ * @bug 7004967 8329754\n@@ -38,0 +39,2 @@\n+        NoSync.test(SecureRandom.getInstance(\"AliasS1\", p), 5, 5);\n+\n@@ -44,0 +47,8 @@\n+\n+        try {\n+            NoSync.test(SecureRandom.getInstance(\"AliasS2\", p), 5, 5);\n+            throw new Exception(\"Failed\");\n+        } catch (RuntimeException re) {\n+            \/\/ Good\n+        }\n+\n@@ -45,0 +56,2 @@\n+        NoSync.test(SecureRandom.getInstance(\"AliasS3\", p), 5, 5);\n+\n@@ -51,0 +64,7 @@\n+\n+        try {\n+            NoSync.test(SecureRandom.getInstance(\"AliasS4\", p), 5, 5);\n+            throw new Exception(\"Failed\");\n+        } catch (RuntimeException re) {\n+            \/\/ Good\n+        }\n@@ -61,0 +81,3 @@\n+            \/\/ Good. Alias of S1, should pass because S1 is not marked as ThreadSafe\n+            put(\"Alg.alias.SecureRandom.AliasS1\", \"S1\");\n+\n@@ -65,0 +88,3 @@\n+            \/\/Bad. Alias of S2, should fail because S2 is marked as ThreadSafe\n+            put(\"alg.Alias.SecureRandom.AliasS2\", \"S2\");\n+\n@@ -67,1 +93,1 @@\n-                    S.class.getName(), null, null));\n+                    S.class.getName(), Collections.singletonList(\"AliasS3\"), null));\n@@ -71,1 +97,1 @@\n-                    S.class.getName(), null, Map.of(\"ThreadSafe\", \"true\")));\n+                    S.class.getName(), Collections.singletonList(\"AliasS4\"), Map.of(\"ThreadSafe\", \"true\")));\n@@ -83,0 +109,1 @@\n+\n","filename":"test\/jdk\/java\/security\/SecureRandom\/ThreadSafe.java","additions":30,"deletions":3,"binary":false,"changes":33,"status":"modified"}]}