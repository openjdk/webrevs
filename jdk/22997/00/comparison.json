{"files":[{"patch":"@@ -932,1 +932,1 @@\n-    assert(!_thread->is_in_VTMS_transition(), \"CFLH events are not allowed in VTMS transition\");\n+    assert(!_thread->hide_jvmti_events(), \"CFLH events are not allowed in VTMS alike transition\");\n@@ -1104,2 +1104,2 @@\n-  if (JavaThread::current()->is_in_VTMS_transition()) {\n-    return false; \/\/ no events should be posted if thread is in VTMS transition\n+  if (JavaThread::current()->hide_jvmti_events()) {\n+    return false; \/\/ no events should be posted if thread is in VTMS alike transition\n@@ -1241,2 +1241,2 @@\n-  if (thread->is_in_VTMS_transition()) {\n-    return; \/\/ no events should be posted if thread is in VTMS transition\n+  if (thread->hide_jvmti_events()) {\n+    return; \/\/ no events should be posted if thread is in VTMS alike transition\n@@ -1381,2 +1381,2 @@\n-  if (thread->is_in_VTMS_transition()) {\n-    return; \/\/ no events should be posted if thread is in VTMS transition\n+  if (thread->hide_jvmti_events()) {\n+    return; \/\/ no events should be posted if thread is in VTMS alike transition\n@@ -1418,2 +1418,2 @@\n-  if (thread->is_in_VTMS_transition()) {\n-    return; \/\/ no events should be posted if thread is in VTMS transition\n+  if (thread->hide_jvmti_events()) {\n+    return; \/\/ no events should be posted if thread is in VTMS alike transition\n@@ -1756,2 +1756,2 @@\n-  if (javaThread->is_in_VTMS_transition()) {\n-    return; \/\/ no events should be posted if thread is in VTMS transition\n+  if (javaThread->hide_jvmti_events()) {\n+    return; \/\/ no events should be posted if thread is in VTMS alike transition\n@@ -1780,2 +1780,2 @@\n-  if (thread->is_in_VTMS_transition()) {\n-    return; \/\/ no events should be posted if thread is in VTMS transition\n+  if (thread->hide_jvmti_events()) {\n+    return; \/\/ no events should be posted if thread is in VTMS alike transition\n@@ -1823,2 +1823,2 @@\n-  if (mh->jvmti_mount_transition() || thread->is_in_VTMS_transition()) {\n-    return; \/\/ no events should be posted if thread is in VTMS transition\n+  if (mh->jvmti_mount_transition() || thread->hide_jvmti_events()) {\n+    return; \/\/ no events should be posted if thread is in VTMS alike transition\n@@ -1915,2 +1915,2 @@\n-  if (mh->jvmti_mount_transition() || thread->is_in_VTMS_transition()) {\n-    return; \/\/ no events should be posted if thread is in VTMS transition\n+  if (mh->jvmti_mount_transition() || thread->hide_jvmti_events()) {\n+    return; \/\/ no events should be posted if thread is in VTMS alike transition\n@@ -1991,2 +1991,2 @@\n-  if (mh->jvmti_mount_transition() || thread->is_in_VTMS_transition()) {\n-    return; \/\/ no events should be posted if thread is in VTMS transition\n+  if (mh->jvmti_mount_transition() || thread->hide_jvmti_events()) {\n+    return; \/\/ no events should be posted if thread is in VTMS alike transition\n@@ -2033,2 +2033,2 @@\n-  if (thread->is_in_VTMS_transition()) {\n-    return; \/\/ no events should be posted if thread is in VTMS transition\n+  if (thread->hide_jvmti_events()) {\n+    return; \/\/ no events should be posted if thread is in VTMS alike transition\n@@ -2155,2 +2155,2 @@\n-      if (mh->jvmti_mount_transition() || thread->is_in_VTMS_transition()) {\n-        return; \/\/ no events should be posted if thread is in VTMS transition\n+      if (mh->jvmti_mount_transition() || thread->hide_jvmti_events()) {\n+        return; \/\/ no events should be posted if thread is in VTMS alike transition\n@@ -2201,2 +2201,2 @@\n-  if (thread->is_in_VTMS_transition()) {\n-    return; \/\/ no events should be posted if thread is in VTMS transition\n+  if (thread->hide_jvmti_events()) {\n+    return; \/\/ no events should be posted if thread is in VTMS alike transition\n@@ -2237,2 +2237,2 @@\n-  if (thread->is_in_VTMS_transition()) {\n-    return; \/\/ no events should be posted if thread is in VTMS transition\n+  if (thread->hide_jvmti_events()) {\n+    return; \/\/ no events should be posted if thread is in VTMS alike transition\n@@ -2287,2 +2287,2 @@\n-  if (thread->is_in_VTMS_transition()) {\n-    return; \/\/ no events should be posted if thread is in VTMS transition\n+  if (thread->hide_jvmti_events()) {\n+    return; \/\/ no events should be posted if thread is in VTMS alike transition\n@@ -2318,2 +2318,2 @@\n-  if (thread->is_in_VTMS_transition()) {\n-    return; \/\/ no events should be posted if thread is in VTMS transition\n+  if (thread->hide_jvmti_events()) {\n+    return; \/\/ no events should be posted if thread is in VTMS alike transition\n@@ -2393,2 +2393,2 @@\n-  if (thread->is_in_VTMS_transition()) {\n-    return; \/\/ no events should be posted if thread is in VTMS transition\n+  if (thread->hide_jvmti_events()) {\n+    return; \/\/ no events should be posted if thread is in VTMS alike transition\n@@ -2432,2 +2432,2 @@\n-  if (thread->is_in_VTMS_transition()) {\n-    return; \/\/ no events should be posted if thread is in VTMS transition\n+  if (thread->hide_jvmti_events()) {\n+    return; \/\/ no events should be posted if thread is in VTMS alike transition\n@@ -2506,1 +2506,1 @@\n-  assert(!thread->is_in_VTMS_transition(), \"compiled method load events are not allowed in VTMS transition\");\n+  assert(!thread->hide_jvmti_events(), \"compiled method load events are not allowed in VTMS transition\");\n@@ -2529,1 +2529,1 @@\n-  assert(!thread->is_in_VTMS_transition(), \"compiled method load events are not allowed in VTMS transition\");\n+  assert(!thread->hide_jvmti_events(), \"compiled method load events are not allowed in VTMS transition\");\n@@ -2554,1 +2554,1 @@\n-  assert(!thread->is_in_VTMS_transition(), \"dynamic code generated events are not allowed in VTMS transition\");\n+  assert(!thread->hide_jvmti_events(), \"dynamic code generated events are not allowed in VTMS transition\");\n@@ -2602,1 +2602,1 @@\n-  assert(!thread->is_in_VTMS_transition(), \"dynamic code generated events are not allowed in VTMS transition\");\n+  assert(!thread->hide_jvmti_events(), \"dynamic code generated events are not allowed in VTMS transition\");\n@@ -2757,2 +2757,2 @@\n-  if (thread->is_in_VTMS_transition()) {\n-    return; \/\/ no events should be posted if thread is in VTMS transition\n+  if (thread->hide_jvmti_events()) {\n+    return; \/\/ no events should be posted if thread is in VTMS alike transition\n@@ -2790,2 +2790,2 @@\n-  if (thread->is_in_VTMS_transition()) {\n-    return; \/\/ no events should be posted if thread is in VTMS transition\n+  if (thread->hide_jvmti_events()) {\n+    return; \/\/ no events should be posted if thread is in VTMS alike transition\n@@ -2824,2 +2824,2 @@\n-  if (thread->is_in_VTMS_transition()) {\n-    return; \/\/ no events should be posted if thread is in VTMS transition\n+  if (thread->hide_jvmti_events()) {\n+    return; \/\/ no events should be posted if thread is in VTMS alike transition\n@@ -2858,2 +2858,2 @@\n-  if (thread->is_in_VTMS_transition()) {\n-    return; \/\/ no events should be posted if thread is in VTMS transition\n+  if (thread->hide_jvmti_events()) {\n+    return; \/\/ no events should be posted if thread is in VTMS alike transition\n@@ -2900,2 +2900,2 @@\n-  if (thread->is_in_VTMS_transition()) {\n-    return; \/\/ no events should be posted if thread is in VTMS transition\n+  if (thread->hide_jvmti_events()) {\n+    return; \/\/ no events should be posted if thread is in VTMS alike transition\n@@ -2937,2 +2937,2 @@\n-  if (thread->is_in_VTMS_transition()) {\n-    return; \/\/ no events should be posted if thread is in VTMS transition\n+  if (thread->hide_jvmti_events()) {\n+    return; \/\/ no events should be posted if thread is in VTMS alike transition\n","filename":"src\/hotspot\/share\/prims\/jvmtiExport.cpp","additions":51,"deletions":51,"binary":false,"changes":102,"status":"modified"},{"patch":"@@ -724,0 +724,2 @@\n+  bool hide_jvmti_events() const                 { return _is_in_VTMS_transition || _is_disable_suspend; }\n+\n","filename":"src\/hotspot\/share\/runtime\/javaThread.hpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"}]}