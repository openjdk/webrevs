{"files":[{"patch":"@@ -4740,1 +4740,0 @@\n-                    boolean dominated = false;\n@@ -4742,2 +4741,4 @@\n-                    if (unconditionalCaseLabel == testCaseLabel) {\n-                        unconditionalFound = true;\n+                    \/\/ an unconditional pattern cannot be followed by any other label\n+                    if (allowPrimitivePatterns && unconditionalCaseLabel == testCaseLabel && unconditionalCaseLabel != label) {\n+                        log.error(label.pos(), Errors.PatternDominated);\n+                        continue;\n@@ -4745,0 +4746,2 @@\n+\n+                    boolean dominated = false;\n@@ -4746,3 +4749,3 @@\n-                        \/\/the current label is potentially dominated by the existing (test) label, check:\n-                        if (label instanceof JCConstantCaseLabel &&\n-                                types.isUnconditionallyExactCombined(currentType, testType)) {\n+                        \/\/ the current label is potentially dominated by the existing (test) label, check:\n+                        if (types.isUnconditionallyExactCombined(currentType, testType) &&\n+                                label instanceof JCConstantCaseLabel) {\n@@ -4750,1 +4753,1 @@\n-                                    TreeInfo.unguardedCase(testCase);\n+                                         TreeInfo.unguardedCase(testCase);\n@@ -4757,3 +4760,0 @@\n-                    if (allowPrimitivePatterns && unconditionalFound && unconditionalCaseLabel != label) {\n-                        dominated = true;\n-                    }\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/comp\/Check.java","additions":10,"deletions":10,"binary":false,"changes":20,"status":"modified"}]}