{"files":[{"patch":"@@ -36,1 +36,0 @@\n-import sun.security.util.SecurityConstants;\n@@ -92,7 +91,0 @@\n-    \/**\n-     * Creates a server socket with the given {@code SocketImpl}.\n-     *\/\n-    private ServerSocket(Void unused, SocketImpl impl) {\n-        this.impl = Objects.requireNonNull(impl);\n-    }\n-\n@@ -109,10 +101,1 @@\n-        this(checkPermission(), impl);\n-    }\n-\n-    private static Void checkPermission() {\n-        @SuppressWarnings(\"removal\")\n-        SecurityManager sm = System.getSecurityManager();\n-        if (sm != null) {\n-            sm.checkPermission(SecurityConstants.SET_SOCKETIMPL_PERMISSION);\n-        }\n-        return null;\n+        this.impl = Objects.requireNonNull(impl);\n@@ -240,1 +223,1 @@\n-        } catch (IOException | SecurityException e) {\n+        } catch (IOException e) {\n@@ -341,5 +324,0 @@\n-        @SuppressWarnings(\"removal\")\n-        SecurityManager security = System.getSecurityManager();\n-        if (security != null)\n-            security.checkListen(epoint.getPort());\n-\n@@ -367,8 +345,1 @@\n-            InetAddress in = getImpl().getInetAddress();\n-            @SuppressWarnings(\"removal\")\n-            SecurityManager sm = System.getSecurityManager();\n-            if (sm != null)\n-                sm.checkConnect(in.getHostAddress(), -1);\n-            return in;\n-        } catch (SecurityException e) {\n-            return InetAddress.getLoopbackAddress();\n+            return getImpl().getInetAddress();\n@@ -634,11 +605,0 @@\n-        \/\/ check permission, close SocketImpl\/connection if denied\n-        @SuppressWarnings(\"removal\")\n-        SecurityManager sm = System.getSecurityManager();\n-        if (sm != null) {\n-            try {\n-                sm.checkAccept(si.getInetAddress().getHostAddress(), si.getPort());\n-            } catch (SecurityException se) {\n-                si.close();\n-                throw se;\n-            }\n-        }\n@@ -838,1 +798,0 @@\n-    @SuppressWarnings(\"removal\")\n@@ -842,5 +801,1 @@\n-        InetAddress in;\n-        if (System.getSecurityManager() != null)\n-            in = getInetAddress();\n-        else\n-            in = impl.getInetAddress();\n+        InetAddress in = impl.getInetAddress();\n@@ -887,5 +842,0 @@\n-        @SuppressWarnings(\"removal\")\n-        SecurityManager security = System.getSecurityManager();\n-        if (security != null) {\n-            security.checkSetFactory();\n-        }\n","filename":"src\/java.base\/share\/classes\/java\/net\/ServerSocket.java","additions":4,"deletions":54,"binary":false,"changes":58,"status":"modified"},{"patch":"@@ -31,1 +31,0 @@\n-import sun.security.util.SecurityConstants;\n@@ -160,9 +159,0 @@\n-    \/**\n-     * Creates an unconnected socket with the given {@code SocketImpl}.\n-     *\/\n-    private Socket(Void unused, SocketImpl impl) {\n-        if (impl != null) {\n-            this.impl = impl;\n-        }\n-    }\n-\n@@ -215,2 +205,0 @@\n-            @SuppressWarnings(\"removal\")\n-            SecurityManager security = System.getSecurityManager();\n@@ -221,10 +209,0 @@\n-            if (security != null) {\n-                if (epoint.isUnresolved())\n-                    epoint = new InetSocketAddress(epoint.getHostName(), epoint.getPort());\n-                if (epoint.isUnresolved())\n-                    security.checkConnect(epoint.getHostName(), epoint.getPort());\n-                else\n-                    security.checkConnect(epoint.getAddress().getHostAddress(),\n-                                  epoint.getPort());\n-            }\n-\n@@ -262,4 +240,0 @@\n-        this(checkPermission(impl), impl);\n-    }\n-\n-    private static Void checkPermission(SocketImpl impl) {\n@@ -267,5 +241,1 @@\n-            @SuppressWarnings(\"removal\")\n-            SecurityManager sm = System.getSecurityManager();\n-            if (sm != null) {\n-                sm.checkPermission(SecurityConstants.SET_SOCKETIMPL_PERMISSION);\n-            }\n+            this.impl = impl;\n@@ -273,1 +243,0 @@\n-        return null;\n@@ -500,1 +469,1 @@\n-        } catch (IOException | IllegalArgumentException | SecurityException e) {\n+        } catch (IOException | IllegalArgumentException e) {\n@@ -687,9 +656,0 @@\n-        @SuppressWarnings(\"removal\")\n-        SecurityManager security = System.getSecurityManager();\n-        if (security != null) {\n-            if (epoint.isUnresolved())\n-                security.checkConnect(epoint.getHostName(), port);\n-            else\n-                security.checkConnect(addr.getHostAddress(), port);\n-        }\n-\n@@ -746,5 +706,0 @@\n-        @SuppressWarnings(\"removal\")\n-        SecurityManager security = System.getSecurityManager();\n-        if (security != null) {\n-            security.checkListen(port);\n-        }\n@@ -798,4 +753,0 @@\n-            @SuppressWarnings(\"removal\")\n-            SecurityManager sm = System.getSecurityManager();\n-            if (sm != null)\n-                sm.checkConnect(in.getHostAddress(), -1);\n@@ -805,2 +756,0 @@\n-        } catch (SecurityException e) {\n-            in = InetAddress.getLoopbackAddress();\n@@ -1858,5 +1807,0 @@\n-        @SuppressWarnings(\"removal\")\n-        SecurityManager security = System.getSecurityManager();\n-        if (security != null) {\n-            security.checkSetFactory();\n-        }\n","filename":"src\/java.base\/share\/classes\/java\/net\/Socket.java","additions":2,"deletions":58,"binary":false,"changes":60,"status":"modified"}]}