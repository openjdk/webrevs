[{"commit":{"message":"* remove WhiteBox references from test, not needed any more"},"files":[{"filename":"test\/hotspot\/jtreg\/gc\/parallel\/TestObjectCountAfterGC.java"}],"sha":"595e04b1c67a5de2f0f355f4aa84b4559c64de32"},{"commit":{"message":"* kstefanj review"},"files":[{"filename":"src\/hotspot\/share\/gc\/parallel\/psParallelCompact.cpp"},{"filename":"src\/hotspot\/share\/gc\/parallel\/psParallelCompact.hpp"}],"sha":"16118b68c7483131ce87ec80070b106083acdb5e"},{"commit":{"message":"* add test"},"files":[{"filename":"test\/hotspot\/jtreg\/gc\/parallel\/TestObjectCountAfterGC.java"}],"sha":"72a4f15ddbb907c70ba44011643e4b8a2d3b3b9e"},{"commit":{"message":"8375314\n\nHi all,\n\n  please review this change that avoids crashes when gathering `ObjectCountAfterGC` JFR statisics.\n\nThe cause for the crash is that the code purges metaspace after class unloading\/purging after https:\/\/bugs.openjdk.org\/browse\/JDK-8361404. The heap iteration code walks the heap with classes that were unloaded and purged, eventually crashing if for some reason the data is invalid due to metaspace purging uncommitting memory.\n\nSince it is somewhat ugly that we walk objects with dead klasses in them (as it was before the mentioned change), I moved the iteration to after the heap has been compacted, skipping filler objects that might be in there.\n\nUnfortunately I did not manage to write a good reproducer.\n\nTesting: gha, tier1-5\n\nThanks,\n  Thomas"},"files":[{"filename":"src\/hotspot\/share\/gc\/g1\/g1CollectedHeap.hpp"},{"filename":"src\/hotspot\/share\/gc\/g1\/g1CollectedHeap.inline.hpp"},{"filename":"src\/hotspot\/share\/gc\/parallel\/psParallelCompact.cpp"},{"filename":"src\/hotspot\/share\/gc\/shared\/collectedHeap.hpp"},{"filename":"src\/hotspot\/share\/gc\/shared\/collectedHeap.inline.hpp"}],"sha":"297d0807a649de46596b2a3f1b221a58d4c30c2f"}]