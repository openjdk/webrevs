{"files":[{"patch":"@@ -2277,1 +2277,3 @@\n-  __ bind(*stub->continuation());\n+  if (stub != nullptr) {\n+    __ bind(*stub->continuation());\n+  }\n@@ -2388,1 +2390,2 @@\n-                      *op->stub()->entry());\n+                      *op->stub()->entry(),\n+                      op->zero_array());\n","filename":"src\/hotspot\/cpu\/s390\/c1_LIRAssembler_s390.cpp","additions":5,"deletions":2,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,2 +2,2 @@\n- * Copyright (c) 2016, 2023, Oracle and\/or its affiliates. All rights reserved.\n- * Copyright (c) 2016, 2017 SAP SE. All rights reserved.\n+ * Copyright (c) 2016, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2024 SAP SE. All rights reserved.\n@@ -711,1 +711,7 @@\n-  CodeEmitInfo* info = state_for (x, x->state());\n+  CodeEmitInfo* info = nullptr;\n+  if (x->state_before() != nullptr && x->state_before()->force_reexecute()) {\n+    info = state_for(x, x->state_before());\n+    info->set_force_reexecute();\n+  } else {\n+    info = state_for(x, x->state());\n+  }\n@@ -736,0 +742,3 @@\n+  if (x->check_flag(Instruction::OmitChecksFlag)) {\n+    flags = 0;\n+  }\n@@ -770,1 +779,7 @@\n-  CodeEmitInfo* info = state_for (x, x->state());\n+  CodeEmitInfo* info = nullptr;\n+  if (x->state_before() != nullptr && x->state_before()->force_reexecute()) {\n+    info = state_for(x, x->state_before());\n+    info->set_force_reexecute();\n+  } else {\n+    info = state_for(x, x->state());\n+  }\n@@ -787,1 +802,2 @@\n-  __ allocate_array(reg, len, tmp1, tmp2, tmp3, tmp4, elem_type, klass_reg, slow_path);\n+  __ allocate_array(reg, len, tmp1, tmp2, tmp3, tmp4, elem_type,\n+                    klass_reg, slow_path, x->zero_array());\n","filename":"src\/hotspot\/cpu\/s390\/c1_LIRGenerator_s390.cpp","additions":21,"deletions":5,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -3,1 +3,1 @@\n- * Copyright (c) 2016, 2023 SAP SE. All rights reserved.\n+ * Copyright (c) 2016, 2024 SAP SE. All rights reserved.\n@@ -194,1 +194,0 @@\n-  Label done;\n@@ -206,1 +205,0 @@\n-  bind(done);\n@@ -277,1 +275,2 @@\n-  Label&   slow_case                   \/\/ Continuation point if fast allocation fails.\n+  Label&   slow_case,                  \/\/ Continuation point if fast allocation fails.\n+  bool     zero_array                  \/\/ zero the allocated array or not\n@@ -308,9 +307,11 @@\n-  Label done;\n-  Register object_fields = t1;\n-  Register Rzero = Z_R1_scratch;\n-  z_aghi(arr_size, -base_offset_in_bytes);\n-  z_bre(done); \/\/ Jump if size of fields is zero.\n-  z_la(object_fields, base_offset_in_bytes, obj);\n-  z_xgr(Rzero, Rzero);\n-  initialize_body(object_fields, arr_size, Rzero);\n-  bind(done);\n+  if (zero_array) {\n+    Label done;\n+    Register object_fields = t1;\n+    Register Rzero = Z_R1_scratch;\n+    z_aghi(arr_size, -base_offset_in_bytes);\n+    z_bre(done); \/\/ Jump if size of fields is zero.\n+    z_la(object_fields, base_offset_in_bytes, obj);\n+    z_xgr(Rzero, Rzero);\n+    initialize_body(object_fields, arr_size, Rzero);\n+    bind(done);\n+  }\n","filename":"src\/hotspot\/cpu\/s390\/c1_MacroAssembler_s390.cpp","additions":14,"deletions":13,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -3,1 +3,1 @@\n- * Copyright (c) 2016, 2023 SAP SE. All rights reserved.\n+ * Copyright (c) 2016, 2024 SAP SE. All rights reserved.\n@@ -92,1 +92,2 @@\n-    Label&   slow_case                 \/\/ Continuation point if fast allocation fails.\n+    Label&   slow_case,                \/\/ Continuation point if fast allocation fails.\n+    bool     zero_array                \/\/ zero the allocated array or not\n","filename":"src\/hotspot\/cpu\/s390\/c1_MacroAssembler_s390.hpp","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -238,1 +238,1 @@\n-#if defined(X86) || defined(AARCH64)\n+#if defined(X86) || defined(AARCH64) || defined(S390)\n","filename":"src\/hotspot\/share\/c1\/c1_Compiler.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -356,1 +356,1 @@\n-#if defined(X86) || defined(AARCH64)\n+#if defined(X86) || defined(AARCH64) || defined(S390)\n","filename":"src\/hotspot\/share\/c1\/c1_LIR.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}