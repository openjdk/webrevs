{"files":[{"patch":"@@ -521,3 +521,4 @@\n-\/\/ Match `n` for patterns:\n-\/\/     - (1) CON * a\n-\/\/     - (2) a * CON\n+\/\/ Match `n` for patterns: CON * a\n+\/\/ Note that `CON` will always be the second input node of a Mul node canonicalized by Ideal(). If this is not the case,\n+\/\/ `n` has not been processed by iGVN. So we skip the optimization for the current add node and wait for to be added to\n+\/\/ the queue again.\n@@ -525,11 +526,3 @@\n-  \/\/ This optimization technically only produces MulNode(CON, a), but we also match MulNode(a, CON) to cover more cases.\n-  if (n->Opcode() == Op_Mul(bt) && (n->in(1)->is_Con() || n->in(2)->is_Con())) {\n-    \/\/ Pattern (1)\n-    Node* con = n->in(1);\n-    Node* base = n->in(2);\n-\n-    \/\/ Pattern (2)\n-    if (!con->is_Con()) {\n-      \/\/ swap ConNode to lhs for easier matching\n-      swap(con, base);\n-    }\n+  if (n->Opcode() == Op_Mul(bt) && n->in(2)->is_Con()) {\n+    Node* con = n->in(2);\n+    Node* base = n->in(1);\n","filename":"src\/hotspot\/share\/opto\/addnode.cpp","additions":7,"deletions":14,"binary":false,"changes":21,"status":"modified"}]}