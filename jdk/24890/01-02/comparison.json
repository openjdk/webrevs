{"files":[{"patch":"@@ -2353,0 +2353,10 @@\n+void PhaseMacroExpand::refine_strip_mined_loop_macro_node() {\n+   \/\/ Perform refining of strip mined loop node in the  macro nodes list.\n+   for (int i = C->macro_count(); i > 0; i--) {\n+    Node* n = C->macro_node(i - 1);\n+    if (n->is_OuterStripMinedLoop()) {\n+      n->as_OuterStripMinedLoop()->adjust_strip_mined_loop(&_igvn);\n+    }\n+  }\n+}\n+\n@@ -2460,7 +2470,2 @@\n-  \/\/ Perform refining of strip mined loop node before we start to expand.\n-  for (int i = C->macro_count(); i > 0; i--) {\n-    Node* n = C->macro_node(i-1);\n-    if (n->Opcode() == Op_OuterStripMinedLoop) {\n-      n->as_OuterStripMinedLoop()->adjust_strip_mined_loop(&_igvn);\n-    }\n-  }\n+  \/\/ Perform refining of strip mined loop before expanding macro nodes.\n+  refine_strip_mined_loop_macro_node();\n","filename":"src\/hotspot\/share\/opto\/macro.cpp","additions":12,"deletions":7,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -205,0 +205,1 @@\n+  void refine_strip_mined_loop_macro_node();\n","filename":"src\/hotspot\/share\/opto\/macro.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"}]}