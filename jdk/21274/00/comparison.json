{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -61,0 +61,1 @@\n+    private boolean birthtime_invalid;\n@@ -166,1 +167,1 @@\n-        if (UnixNativeDispatcher.birthtimeSupported()) {\n+        if (UnixNativeDispatcher.birthtimeSupported() && !birthtime_invalid) {\n","filename":"src\/java.base\/unix\/classes\/sun\/nio\/fs\/UnixFileAttributes.java","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -186,0 +186,1 @@\n+static jfieldID attrs_birthtime_invalid;\n@@ -334,0 +335,3 @@\n+\n+    attrs_birthtime_invalid = (*env)->GetFieldID(env, clazz, \"birthtime_invalid\", \"Z\");\n+    CHECK_NULL_RETURN(attrs_birthtime_invalid, 0);\n@@ -623,13 +627,11 @@\n-    if ((buf->stx_mask & STATX_BTIME) != 0) {\n-        \/\/  Birth time was filled in so use it\n-        (*env)->SetLongField(env, attrs, attrs_st_birthtime_sec,\n-                             (jlong)buf->stx_btime.tv_sec);\n-        (*env)->SetLongField(env, attrs, attrs_st_birthtime_nsec,\n-                             (jlong)buf->stx_btime.tv_nsec);\n-    } else {\n-        \/\/  Birth time was not filled in: fall back to last modification time\n-        (*env)->SetLongField(env, attrs, attrs_st_birthtime_sec,\n-                             (jlong)buf->stx_mtime.tv_sec);\n-        (*env)->SetLongField(env, attrs, attrs_st_birthtime_nsec,\n-                             (jlong)buf->stx_mtime.tv_nsec);\n-    }\n+    (*env)->SetLongField(env, attrs, attrs_st_birthtime_sec,\n+                         (jlong)buf->stx_btime.tv_sec);\n+    (*env)->SetLongField(env, attrs, attrs_st_birthtime_nsec,\n+                         (jlong)buf->stx_btime.tv_nsec);\n+\n+    \/\/ Check mask for birth time and set flag accordingly\n+    jboolean birthtime_invalid = (buf->stx_mask & STATX_BTIME) != 0 ?\n+        JNI_FALSE : JNI_TRUE;\n+    (*env)->SetBooleanField(env, attrs, attrs_birthtime_invalid,\n+                            birthtime_invalid);\n+\n","filename":"src\/java.base\/unix\/native\/libnio\/fs\/UnixNativeDispatcher.c","additions":15,"deletions":13,"binary":false,"changes":28,"status":"modified"}]}