{"files":[{"patch":"@@ -26,0 +26,1 @@\n+import java.awt.EventQueue;\n@@ -27,0 +28,1 @@\n+import java.awt.Robot;\n@@ -31,1 +33,0 @@\n-import java.util.List;\n@@ -36,0 +37,1 @@\n+ * @key headful\n@@ -38,3 +40,1 @@\n- * @library \/java\/awt\/regtesthelpers\n- * @build PassFailJFrame\n- * @run main\/manual MouseEnterExitTest4\n+ * @run main MouseEnterExitTest4\n@@ -49,1 +49,1 @@\n-            PassFailJFrame.log(e.toString());\n+            throw new RuntimeException(\"Test failed due to Mouse Enter event\");\n@@ -53,1 +53,1 @@\n-            PassFailJFrame.log(e.toString());\n+            throw new RuntimeException(\"Test failed due to Mouse Exit event\");\n@@ -58,8 +58,1 @@\n-        String INSTRUCTIONS = \"\"\"\n-                1. You should see a frame titled \"Mouse Enter\/Exit test\" and a window\n-                   with a red button located over the frame\n-                2. Rapidly move the mouse to enter\/exit the button\n-                3. Verify that the window doesn't receive enter\/exit events\n-                4. Enter\/exit events are dumped to the area below\n-                5. If you see enter\/exit events dumped the test fails\n-                   \"\"\";\n+        Robot robot = new Robot();\n@@ -67,10 +60,24 @@\n-        PassFailJFrame.builder()\n-                .title(\"Test Instructions\")\n-                .instructions(INSTRUCTIONS)\n-                .rows((int) INSTRUCTIONS.lines().count() + 2)\n-                .columns(35)\n-                .testUI(initialize())\n-                .logArea(4)\n-                .build()\n-                .awaitAndCheck();\n-    }\n+        robot.setAutoDelay(100);\n+        try {\n+            EventQueue.invokeAndWait(() -> {\n+                button.setBackground(Color.red);\n+                window.add(button);\n+                frame.setBounds(100, 100, 300, 300);\n+                window.setBounds(200, 200, 100, 100);\n+                window.addMouseListener(listener);\n+                window.setVisible(true);\n+                frame.setVisible(true);\n+            });\n+            robot.waitForIdle();\n+            robot.delay(200);\n+            EventQueue.invokeAndWait(() -> robot.mouseMove(\n+                    frame.getLocationOnScreen().x + frame.getSize().width \/ 2,\n+                    frame.getLocationOnScreen().y + frame.getSize().height \/ 2));\n+            robot.waitForIdle();\n+            robot.delay(200);\n+            EventQueue.invokeAndWait(() -> robot.mouseMove(\n+                    window.getLocationOnScreen().x + window.getSize().width * 2,\n+                    window.getLocationOnScreen().y + window.getSize().height \/ 2));\n+            robot.waitForIdle();\n+            robot.delay(500);\n+            System.out.println(\"Test Passed\");\n@@ -78,7 +85,10 @@\n-    public static List<Window> initialize() {\n-        button.setBackground(Color.red);\n-        window.add(button);\n-        frame.setBounds(100, 100, 300, 300);\n-        window.setBounds(200, 200, 100, 100);\n-        window.addMouseListener(listener);\n-        return List.of(frame, window);\n+        } finally {\n+            EventQueue.invokeAndWait(() -> {\n+               if (frame != null) {\n+                   frame.dispose();\n+               }\n+               if (window != null) {\n+                   window.dispose();\n+               }\n+            });\n+        }\n","filename":"test\/jdk\/java\/awt\/Mouse\/MouseEnterExitTest4.java","additions":41,"deletions":31,"binary":false,"changes":72,"status":"modified"}]}