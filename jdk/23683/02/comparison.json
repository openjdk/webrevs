{"files":[{"patch":"@@ -369,1 +369,1 @@\n-            return decl.vartype.pos == Position.NOPOS;\n+            return decl.declaredUsingVar();\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/comp\/Analyzer.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -5719,1 +5719,1 @@\n-            tree.vartype = make.at(Position.NOPOS).Erroneous();\n+            tree.vartype = make.at(tree.pos()).Erroneous();\n@@ -5721,1 +5721,1 @@\n-            tree.vartype = make.at(Position.NOPOS).Type(type);\n+            tree.vartype = make.at(tree.pos()).Type(type);\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/comp\/Attr.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -0,0 +1,29 @@\n+\/*\n+ * @test \/nodynamiccopyright\/\n+ * @bug 8329951\n+ * @summary Check that \"var\" variable synthetic types have a source position\n+ * @compile\/process\/ref=VarWarnPosition.out -Xlint:deprecation -XDrawDiagnostics VarWarnPosition.java\n+ *\/\n+\n+import java.util.*;\n+import java.util.function.*;\n+\n+public class VarWarnPosition {\n+\n+    VarWarnPosition() {\n+\n+        \/\/ Test 1\n+        @SuppressWarnings(\"deprecation\")\n+        List<Depr> deprecatedList = null;\n+        for (var deprValue : deprecatedList) { }\n+\n+        \/\/ Test 2\n+        Consumer<Depr> c = d -> { };\n+\n+        \/\/ Test 3\n+        Consumer<Depr> c2 = (var d) -> { };\n+    }\n+}\n+\n+@Deprecated\n+class Depr {}\n","filename":"test\/langtools\/tools\/javac\/tree\/VarWarnPosition.java","additions":29,"deletions":0,"binary":false,"changes":29,"status":"added"},{"patch":"@@ -0,0 +1,6 @@\n+VarWarnPosition.java:18:14: compiler.warn.has.been.deprecated: Depr, compiler.misc.unnamed.package\n+VarWarnPosition.java:21:18: compiler.warn.has.been.deprecated: Depr, compiler.misc.unnamed.package\n+VarWarnPosition.java:21:28: compiler.warn.has.been.deprecated: Depr, compiler.misc.unnamed.package\n+VarWarnPosition.java:24:18: compiler.warn.has.been.deprecated: Depr, compiler.misc.unnamed.package\n+VarWarnPosition.java:24:30: compiler.warn.has.been.deprecated: Depr, compiler.misc.unnamed.package\n+5 warnings\n","filename":"test\/langtools\/tools\/javac\/tree\/VarWarnPosition.out","additions":6,"deletions":0,"binary":false,"changes":6,"status":"added"}]}