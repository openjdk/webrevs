{"files":[{"patch":"@@ -121,1 +121,0 @@\n-      jt->jfr_thread_local()->set_written();\n","filename":"src\/hotspot\/share\/jfr\/recorder\/checkpoint\/types\/jfrType.cpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -156,1 +156,0 @@\n-        tl->set_written();\n@@ -258,1 +257,0 @@\n-        tl->set_written();\n@@ -454,5 +452,6 @@\n-  return !JfrTraceIdEpoch::is_current_epoch_generation(Atomic::load(&_generation));\n-}\n-\n-void JfrThreadLocal::set_written() const {\n-  Atomic::store(&_generation, JfrTraceIdEpoch::epoch_generation());\n+  const u2 current_generation = JfrTraceIdEpoch::epoch_generation();\n+  if (Atomic::load(&_generation) != current_generation) {\n+    Atomic::store(&_generation, current_generation);\n+    return true;\n+  }\n+  return false;\n","filename":"src\/hotspot\/share\/jfr\/support\/jfrThreadLocal.cpp","additions":6,"deletions":7,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -354,1 +354,0 @@\n-  void set_written() const;\n","filename":"src\/hotspot\/share\/jfr\/support\/jfrThreadLocal.hpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"}]}