{"files":[{"patch":"@@ -111,4 +111,0 @@\n-    char jvm_path[JVM_MAXPATHLEN];\n-    os::jvm_path(jvm_path, sizeof(jvm_path));\n-    char *end = strrchr(jvm_path, *os::file_separator());\n-    if (end != nullptr) *end = '\\0';\n@@ -116,1 +112,17 @@\n-    tmp.print(\"%s%sclasses\", jvm_path, os::file_separator());\n+    if (is_vm_statically_linked()) {\n+      \/\/ It's easier to form the path using JAVA_HOME as os::jvm_path\n+      \/\/ gives the path to the launcher executable on static JDK.\n+      const char* subdir = WINDOWS_ONLY(\"bin\") NOT_WINDOWS(\"lib\");\n+      tmp.print(\"%s%s%s%s%s%sclasses\",\n+                Arguments::get_java_home(), os::file_separator(),\n+                subdir, os::file_separator(),\n+                Abstract_VM_Version::vm_variant(), os::file_separator());\n+    } else {\n+      \/\/ Assume .jsa is in the same directory where libjvm resides on\n+      \/\/ non-static JDK.\n+      char jvm_path[JVM_MAXPATHLEN];\n+      os::jvm_path(jvm_path, sizeof(jvm_path));\n+      char *end = strrchr(jvm_path, *os::file_separator());\n+      if (end != nullptr) *end = '\\0';\n+      tmp.print(\"%s%sclasses\", jvm_path, os::file_separator());\n+    }\n","filename":"src\/hotspot\/share\/cds\/cdsConfig.cpp","additions":17,"deletions":5,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -45,9 +45,0 @@\n-\n-# Need CDS archive\n-runtime\/cds\/NonJVMVariantLocation.java                        8357632 generic-all\n-runtime\/cds\/TestCDSVMCrash.java                               8357632 generic-all\n-runtime\/cds\/TestDefaultArchiveLoading.java#coops_coh          8357632 generic-all\n-runtime\/cds\/TestDefaultArchiveLoading.java#coops_nocoh        8357632 generic-all\n-runtime\/cds\/TestDefaultArchiveLoading.java#nocoops_coh        8357632 generic-all\n-runtime\/cds\/TestDefaultArchiveLoading.java#nocoops_nocoh      8357632 generic-all\n-serviceability\/jvmti\/RedefineClasses\/RedefineSharedClass.java 8357632 generic-all\n","filename":"test\/hotspot\/jtreg\/ProblemList-StaticJdk.txt","additions":0,"deletions":9,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -29,0 +29,1 @@\n+ * @requires !jdk.static\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/NonJVMVariantLocation.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"}]}