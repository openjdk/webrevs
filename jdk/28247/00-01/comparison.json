{"files":[{"patch":"@@ -34,10 +34,17 @@\n-  \/\/ Small values for mutator alloc, larger values for gc alloc;\n-  \/\/ odd for lab alloc, and even value for non-lab alloc;\n-  enum Type {\n-    _alloc_cds        = 0, \/\/ Allocate for CDS\n-    _alloc_tlab       = 1, \/\/ Allocate TLAB\n-    _alloc_shared     = 2, \/\/ Allocate common, outside of TLAB\n-    _alloc_shared_gc  = 4, \/\/ Allocate common, outside of GCLAB\/PLAB\n-    _alloc_gclab      = 5, \/\/ Allocate GCLAB\n-    _alloc_plab       = 7  \/\/ Allocate PLAB\n-  };\n+  \/\/ bit 0: mutator (0) or GC (1) alloc\n+  \/\/ bit 1: LAB (0) or shared (1) alloc\n+  \/\/ bit 2: if LAB, then GCLAB (0) or PLAB (1)\n+  \/\/ bit 3: if mutator, then normal (0) or CDS (1)\n+  typedef int Type;\n+\n+  static constexpr int bit_gc_alloc   = 1 << 1;\n+  static constexpr int bit_lab_alloc  = 1 << 2;\n+  static constexpr int bit_plab_alloc = 1 << 3;\n+  static constexpr int bit_cds_alloc  = 1 << 4;\n+\n+  static constexpr Type _alloc_shared    = 0;\n+  static constexpr Type _alloc_tlab      = bit_lab_alloc;\n+  static constexpr Type _alloc_cds       = bit_cds_alloc;\n+  static constexpr Type _alloc_shared_gc = bit_gc_alloc;\n+  static constexpr Type _alloc_gclab     = bit_gc_alloc | bit_lab_alloc;\n+  static constexpr Type _alloc_plab      = bit_gc_alloc | bit_lab_alloc | bit_plab_alloc;\n@@ -171,1 +178,1 @@\n-    return _alloc_type <= _alloc_shared;\n+    return !is_gc_alloc();\n@@ -175,1 +182,1 @@\n-    return _alloc_type >= _alloc_shared_gc;\n+    return (_alloc_type & bit_gc_alloc) == bit_gc_alloc;\n@@ -179,1 +186,1 @@\n-    return (_alloc_type & 1) == 1;\n+    return (_alloc_type & bit_lab_alloc) == bit_lab_alloc;\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahAllocRequest.hpp","additions":20,"deletions":13,"binary":false,"changes":33,"status":"modified"}]}