{"files":[{"patch":"@@ -34,9 +34,17 @@\n-  enum Type {\n-    _alloc_shared,      \/\/ Allocate common, outside of TLAB\n-    _alloc_shared_gc,   \/\/ Allocate common, outside of GCLAB\/PLAB\n-    _alloc_cds,         \/\/ Allocate for CDS\n-    _alloc_tlab,        \/\/ Allocate TLAB\n-    _alloc_gclab,       \/\/ Allocate GCLAB\n-    _alloc_plab,        \/\/ Allocate PLAB\n-    _ALLOC_LIMIT\n-  };\n+  \/\/ bit 0: mutator (0) or GC (1) alloc\n+  \/\/ bit 1: LAB (0) or shared (1) alloc\n+  \/\/ bit 2: if LAB, then GCLAB (0) or PLAB (1)\n+  \/\/ bit 3: if mutator, then normal (0) or CDS (1)\n+  typedef int Type;\n+\n+  static constexpr int bit_gc_alloc   = 1 << 1;\n+  static constexpr int bit_lab_alloc  = 1 << 2;\n+  static constexpr int bit_plab_alloc = 1 << 3;\n+  static constexpr int bit_cds_alloc  = 1 << 4;\n+\n+  static constexpr Type _alloc_shared    = 0;\n+  static constexpr Type _alloc_tlab      = bit_lab_alloc;\n+  static constexpr Type _alloc_cds       = bit_cds_alloc;\n+  static constexpr Type _alloc_shared_gc = bit_gc_alloc;\n+  static constexpr Type _alloc_gclab     = bit_gc_alloc | bit_lab_alloc;\n+  static constexpr Type _alloc_plab      = bit_gc_alloc | bit_lab_alloc | bit_plab_alloc;\n@@ -46,4 +54,0 @@\n-      case _alloc_shared:\n-        return \"Shared\";\n-      case _alloc_shared_gc:\n-        return \"Shared GC\";\n@@ -54,0 +58,4 @@\n+      case _alloc_shared:\n+        return \"Shared\";\n+      case _alloc_shared_gc:\n+        return \"Shared GC\";\n@@ -170,13 +178,1 @@\n-    switch (_alloc_type) {\n-      case _alloc_tlab:\n-      case _alloc_shared:\n-      case _alloc_cds:\n-        return true;\n-      case _alloc_gclab:\n-      case _alloc_plab:\n-      case _alloc_shared_gc:\n-        return false;\n-      default:\n-        ShouldNotReachHere();\n-        return false;\n-    }\n+    return (_alloc_type & bit_gc_alloc) == 0;\n@@ -186,13 +182,1 @@\n-    switch (_alloc_type) {\n-      case _alloc_tlab:\n-      case _alloc_shared:\n-      case _alloc_cds:\n-        return false;\n-      case _alloc_gclab:\n-      case _alloc_plab:\n-      case _alloc_shared_gc:\n-        return true;\n-      default:\n-        ShouldNotReachHere();\n-        return false;\n-    }\n+    return (_alloc_type & bit_gc_alloc) != 0;\n@@ -202,13 +186,1 @@\n-    switch (_alloc_type) {\n-      case _alloc_tlab:\n-      case _alloc_gclab:\n-      case _alloc_plab:\n-        return true;\n-      case _alloc_shared:\n-      case _alloc_shared_gc:\n-      case _alloc_cds:\n-        return false;\n-      default:\n-        ShouldNotReachHere();\n-        return false;\n-    }\n+    return (_alloc_type & bit_lab_alloc) != 0;\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahAllocRequest.hpp","additions":24,"deletions":52,"binary":false,"changes":76,"status":"modified"}]}