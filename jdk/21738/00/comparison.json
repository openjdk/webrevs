{"files":[{"patch":"@@ -59,1 +59,0 @@\n-    ReflectionMetaspaceType = ClassMirrorHolderMetaspaceType + 1,\n","filename":"src\/hotspot\/share\/memory\/metaspace.hpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2020, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2020, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -64,11 +64,0 @@\n-static const chunklevel_t g_sequ_refl_non_class[] = {\n-    chunklevel::CHUNK_LEVEL_2K,\n-    chunklevel::CHUNK_LEVEL_1K\n-    \/\/ .. repeat last\n-};\n-\n-static const chunklevel_t g_sequ_refl_class[] = {\n-    chunklevel::CHUNK_LEVEL_1K,\n-    \/\/ .. repeat last\n-};\n-\n@@ -98,2 +87,0 @@\n-  DEFINE_CLASS_FOR_ARRAY(refl_non_class)\n-  DEFINE_CLASS_FOR_ARRAY(refl_class)\n@@ -106,1 +93,0 @@\n-    case Metaspace::ReflectionMetaspaceType:        return &chunk_alloc_sequence_refl_class;\n@@ -114,1 +100,0 @@\n-    case Metaspace::ReflectionMetaspaceType:        return &chunk_alloc_sequence_refl_non_class;\n","filename":"src\/hotspot\/share\/memory\/metaspace\/metaspaceArenaGrowthPolicy.cpp","additions":1,"deletions":16,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -52,1 +52,0 @@\n-    case Metaspace::ReflectionMetaspaceType: s = \"Reflection\"; break;\n","filename":"src\/hotspot\/share\/memory\/metaspace\/metaspaceReporter.cpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -1754,1 +1754,1 @@\n-  const Metaspace::MetaspaceType type = is_micro ? Metaspace::ReflectionMetaspaceType : Metaspace::StandardMetaspaceType;\n+  const Metaspace::MetaspaceType type = is_micro ? Metaspace::ClassMirrorHolderMetaspaceType : Metaspace::StandardMetaspaceType;\n","filename":"src\/hotspot\/share\/prims\/whitebox.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2020, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -64,2 +64,0 @@\n-DEFINE_GROWTH_POLICY_TEST(ReflectionMetaspaceType, true)\n-DEFINE_GROWTH_POLICY_TEST(ReflectionMetaspaceType, false)\n","filename":"test\/hotspot\/gtest\/metaspace\/test_arenagrowthpolicy.cpp","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -221,1 +221,2 @@\n-  MetaspaceArenaTestHelper helper(context, is_micro ? Metaspace::ReflectionMetaspaceType : Metaspace::StandardMetaspaceType, false);\n+  const Metaspace::MetaspaceType type = is_micro ? Metaspace::ClassMirrorHolderMetaspaceType : Metaspace::StandardMetaspaceType;\n+  MetaspaceArenaTestHelper helper(context, type, false);\n@@ -281,1 +282,1 @@\n-  test_chunk_enlargment_simple(Metaspace::ReflectionMetaspaceType, true);\n+  test_chunk_enlargment_simple(Metaspace::ClassMirrorHolderMetaspaceType, true);\n@@ -285,1 +286,1 @@\n-  test_chunk_enlargment_simple(Metaspace::ReflectionMetaspaceType, false);\n+  test_chunk_enlargment_simple(Metaspace::ClassMirrorHolderMetaspaceType, false);\n@@ -437,2 +438,2 @@\n-  MetaspaceArenaTestHelper helper1(context, Metaspace::ReflectionMetaspaceType, false);\n-  MetaspaceArenaTestHelper helper2(context, Metaspace::ReflectionMetaspaceType, false);\n+  MetaspaceArenaTestHelper helper1(context, Metaspace::ClassMirrorHolderMetaspaceType, false);\n+  MetaspaceArenaTestHelper helper2(context, Metaspace::ClassMirrorHolderMetaspaceType, false);\n@@ -498,1 +499,3 @@\n-  MetaspaceArenaTestHelper smhelper_harrasser(context, Metaspace::ReflectionMetaspaceType, true, \"Harasser\");\n+  const Metaspace::MetaspaceType other_type =\n+         (type == Metaspace::StandardMetaspaceType) ? Metaspace::ClassMirrorHolderMetaspaceType : Metaspace::StandardMetaspaceType;\n+  MetaspaceArenaTestHelper smhelper_harrasser(context, other_type, true, \"Harasser\");\n@@ -620,10 +623,0 @@\n-TEST_VM(metaspace, MetaspaceArena_growth_refl_c_inplace) {\n-  test_controlled_growth(Metaspace::ReflectionMetaspaceType, true,\n-                         word_size_for_level(CHUNK_LEVEL_1K), true);\n-}\n-\n-TEST_VM(metaspace, MetaspaceArena_growth_refl_c_not_inplace) {\n-  test_controlled_growth(Metaspace::ReflectionMetaspaceType, true,\n-                         word_size_for_level(CHUNK_LEVEL_1K), false);\n-}\n-\n@@ -663,10 +656,0 @@\n-TEST_VM(metaspace, MetaspaceArena_growth_refl_nc_inplace) {\n-  test_controlled_growth(Metaspace::ReflectionMetaspaceType, false,\n-                         word_size_for_level(CHUNK_LEVEL_2K), true);\n-}\n-\n-TEST_VM(metaspace, MetaspaceArena_growth_refl_nc_not_inplace) {\n-  test_controlled_growth(Metaspace::ReflectionMetaspaceType, false,\n-                         word_size_for_level(CHUNK_LEVEL_2K), false);\n-}\n-\n","filename":"test\/hotspot\/gtest\/metaspace\/test_metaspacearena.cpp","additions":9,"deletions":26,"binary":false,"changes":35,"status":"modified"},{"patch":"@@ -230,1 +230,1 @@\n-        (fifty_fifty() ? Metaspace::StandardMetaspaceType : Metaspace::ReflectionMetaspaceType),\n+        (fifty_fifty() ? Metaspace::StandardMetaspaceType : Metaspace::ClassMirrorHolderMetaspaceType),\n","filename":"test\/hotspot\/gtest\/metaspace\/test_metaspacearena_stress.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}