{"files":[{"patch":"@@ -370,1 +370,1 @@\n-        int mod = getModifiers();\n+        int mod = getModifiers() & Modifier.fieldModifiers();\n@@ -403,1 +403,1 @@\n-        int mod = getModifiers();\n+        int mod = getModifiers() & Modifier.fieldModifiers();\n","filename":"src\/java.base\/share\/classes\/java\/lang\/reflect\/Field.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -129,1 +129,1 @@\n-        sb.append(Modifier.toString(getModifiers()));\n+        sb.append(Modifier.toString(getModifiers() & Modifier.parameterModifiers() ));\n","filename":"src\/java.base\/share\/classes\/java\/lang\/reflect\/Parameter.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2014, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,1 +26,1 @@\n- * @bug 4394937 8051382\n+ * @bug 4394937 8051382 8373125\n@@ -31,0 +31,1 @@\n+import static java.lang.reflect.Modifier.*;\n@@ -35,3 +36,7 @@\n-        if(!Modifier.toString(test).equals(expected))\n-            throw new RuntimeException(test +\n-                                          \" yields incorrect toString result\");\n+        String result = Modifier.toString(test);\n+        if(!expected.equals(result)) {\n+            System.err.println(\"For input 0x\" + Integer.toHexString(test));\n+            System.err.println(\"expected:\\t\" + expected + \"\\ngot\\t\\t\" + result);\n+\n+            throw new RuntimeException();\n+        }\n@@ -40,5 +45,5 @@\n-    public static void main(String [] argv) {\n-        int allMods = Modifier.PUBLIC | Modifier.PROTECTED | Modifier.PRIVATE |\n-            Modifier.ABSTRACT | Modifier.STATIC | Modifier.FINAL |\n-            Modifier.TRANSIENT | Modifier.VOLATILE | Modifier.SYNCHRONIZED |\n-            Modifier.NATIVE | Modifier.STRICT | Modifier.INTERFACE;\n+    public static void main(String... argv) {\n+        int allMods = PUBLIC    | PROTECTED | PRIVATE |\n+                      ABSTRACT  | STATIC    | FINAL |\n+                      TRANSIENT | VOLATILE  | SYNCHRONIZED |\n+                      NATIVE    | STRICT    | INTERFACE;\n@@ -49,1 +54,3 @@\n-        \/* zero should have an empty string *\/\n+        final int ALL_ONES = ~0;\n+\n+        \/\/ zero should have an empty string\n@@ -52,1 +59,1 @@\n-        \/* test to make sure all modifiers print out in the proper order *\/\n+        \/\/ test to make sure all modifiers print out in the proper order\n@@ -55,2 +62,28 @@\n-        \/* verify no extraneous modifiers are printed *\/\n-        testString(~0, allModsString);\n+        \/\/ verify no extraneous modifiers are printed\n+        testString(ALL_ONES, allModsString);\n+\n+        ModifierKindCase[] kindModifiers = {\n+            new ModifierKindCase(classModifiers(),\n+                                 \"public protected private abstract \" +\n+                                 \"static final strictfp\"),\n+\n+            new ModifierKindCase(constructorModifiers(),\"public protected private\"),\n+\n+            new ModifierKindCase(fieldModifiers(),\n+                                 \"public protected private \" +\n+                                 \"static final transient volatile\"),\n+\n+            new ModifierKindCase(interfaceModifiers(),\n+                                 \"public protected private \" +\n+                                 \"abstract static strictfp\"),\n+\n+            new ModifierKindCase(methodModifiers(),\n+                                 \"public protected private abstract \" +\n+                                 \"static final synchronized native strictfp\"),\n+\n+            new ModifierKindCase(parameterModifiers(), \"final\"),\n+        };\n+\n+        for (var modKindCase : kindModifiers) {\n+            testString(ALL_ONES & modKindCase.mask(), modKindCase.expected());\n+        }\n@@ -58,0 +91,2 @@\n+\n+    private record ModifierKindCase(int mask, String expected){}\n","filename":"test\/jdk\/java\/lang\/reflect\/Modifier\/toStringTest.java","additions":49,"deletions":14,"binary":false,"changes":63,"status":"modified"}]}