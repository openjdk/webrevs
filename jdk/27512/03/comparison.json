{"files":[{"patch":"@@ -163,1 +163,1 @@\n-      unaligned_access.value() != MISALIGNED_FAST);\n+      unaligned_scalar.value() != MISALIGNED_SCALAR_FAST);\n@@ -178,1 +178,6 @@\n-      unaligned_access.value() == MISALIGNED_FAST);\n+      (unaligned_scalar.value() == MISALIGNED_SCALAR_FAST));\n+  }\n+\n+  if (FLAG_IS_DEFAULT(AlignVector) && unaligned_vector.enabled()) {\n+    FLAG_SET_DEFAULT(AlignVector,\n+      unaligned_vector.value() != MISALIGNED_VECTOR_FAST);\n","filename":"src\/hotspot\/cpu\/riscv\/vm_version_riscv.cpp","additions":7,"deletions":2,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -194,1 +194,2 @@\n-  \/\/ unaligned_access Unaligned memory accesses (unknown, unspported, emulated, slow, firmware, fast)\n+  \/\/ unaligned_scalar Performance of misaligned scalar accesses (unknown, emulated, slow, fast, unsupported)\n+  \/\/ unaligned_vector Performance of misaligned vector accesses (unknown, unspported, slow, fast)\n@@ -254,1 +255,0 @@\n-  decl(unaligned_access ,  Unaligned       ,  RV_NO_FLAG_BIT,  false,  NO_UPDATE_DEFAULT)      \\\n@@ -259,0 +259,2 @@\n+  decl(unaligned_scalar ,  UnalignedScalar ,  RV_NO_FLAG_BIT,  false,  NO_UPDATE_DEFAULT)      \\\n+  decl(unaligned_vector ,  UnalignedVector ,  RV_NO_FLAG_BIT,  false,  NO_UPDATE_DEFAULT)      \\\n@@ -399,6 +401,13 @@\n-  enum UNALIGNED_ACCESS : int {\n-    MISALIGNED_UNKNOWN     = 0,\n-    MISALIGNED_EMULATED    = 1,\n-    MISALIGNED_SLOW        = 2,\n-    MISALIGNED_FAST        = 3,\n-    MISALIGNED_UNSUPPORTED = 4\n+  enum UNALIGNED_SCALAR_ACCESS : int {\n+    MISALIGNED_SCALAR_UNKNOWN     = 0,\n+    MISALIGNED_SCALAR_EMULATED    = 1,\n+    MISALIGNED_SCALAR_SLOW        = 2,\n+    MISALIGNED_SCALAR_FAST        = 3,\n+    MISALIGNED_SCALAR_UNSUPPORTED = 4\n+  };\n+\n+  enum UNALIGNED_VECTOR_ACCESS : int {\n+    MISALIGNED_VECTOR_UNKNOWN     = 0,\n+    MISALIGNED_VECTOR_SLOW        = 2,\n+    MISALIGNED_VECTOR_FAST        = 3,\n+    MISALIGNED_VECTOR_UNSUPPORTED = 4\n","filename":"src\/hotspot\/cpu\/riscv\/vm_version_riscv.hpp","additions":17,"deletions":8,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -92,1 +92,18 @@\n-#define RISCV_HWPROBE_KEY_ZICBOZ_BLOCK_SIZE 6\n+#define RISCV_HWPROBE_KEY_ZICBOZ_BLOCK_SIZE      6\n+\n+#define RISCV_HWPROBE_KEY_HIGHEST_VIRT_ADDRESS   7\n+\n+#define RISCV_HWPROBE_KEY_TIME_CSR_FREQ          8\n+\n+#define RISCV_HWPROBE_KEY_MISALIGNED_SCALAR_PERF 9\n+#define   RISCV_HWPROBE_MISALIGNED_SCALAR_UNKNOWN       0\n+#define   RISCV_HWPROBE_MISALIGNED_SCALAR_EMULATED      1\n+#define   RISCV_HWPROBE_MISALIGNED_SCALAR_SLOW          2\n+#define   RISCV_HWPROBE_MISALIGNED_SCALAR_FAST          3\n+#define   RISCV_HWPROBE_MISALIGNED_SCALAR_UNSUPPORTED   4\n+\n+#define RISCV_HWPROBE_KEY_MISALIGNED_VECTOR_PERF 10\n+#define   RISCV_HWPROBE_MISALIGNED_VECTOR_UNKNOWN       0\n+#define   RISCV_HWPROBE_MISALIGNED_VECTOR_SLOW          2\n+#define   RISCV_HWPROBE_MISALIGNED_VECTOR_FAST          3\n+#define   RISCV_HWPROBE_MISALIGNED_VECTOR_UNSUPPORTED   4\n@@ -120,1 +137,5 @@\n-                                       {RISCV_HWPROBE_KEY_ZICBOZ_BLOCK_SIZE, 0}};\n+                                       {RISCV_HWPROBE_KEY_ZICBOZ_BLOCK_SIZE,      0},\n+                                       {RISCV_HWPROBE_KEY_HIGHEST_VIRT_ADDRESS,   0},\n+                                       {RISCV_HWPROBE_KEY_TIME_CSR_FREQ,          0},\n+                                       {RISCV_HWPROBE_KEY_MISALIGNED_SCALAR_PERF, 0},\n+                                       {RISCV_HWPROBE_KEY_MISALIGNED_VECTOR_PERF, 0}};\n@@ -249,0 +270,2 @@\n+  \/\/ RISCV_HWPROBE_KEY_CPUPERF_0 is deprecated. Keep it there for backward\n+  \/\/ compatibility with old kernels.\n@@ -250,1 +273,1 @@\n-    VM_Version::unaligned_access.enable_feature(\n+    VM_Version::unaligned_scalar.enable_feature(\n@@ -253,0 +276,4 @@\n+  if (is_valid(RISCV_HWPROBE_KEY_MISALIGNED_VECTOR_PERF)) {\n+    VM_Version::unaligned_vector.enable_feature(\n+       query[RISCV_HWPROBE_KEY_MISALIGNED_VECTOR_PERF].value);\n+  }\n","filename":"src\/hotspot\/os_cpu\/linux_riscv\/riscv_hwprobe.cpp","additions":30,"deletions":3,"binary":false,"changes":33,"status":"modified"},{"patch":"@@ -306,1 +306,1 @@\n-  unaligned_access.enable_feature(MISALIGNED_FAST);\n+  unaligned_scalar.enable_feature(MISALIGNED_SCALAR_FAST);\n","filename":"src\/hotspot\/os_cpu\/linux_riscv\/vm_version_linux_riscv.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}