{"files":[{"patch":"@@ -1522,1 +1522,1 @@\n-      \/\/ UnsafeMemoryAccess page error: continue after ucm\n+      \/\/ UnsafeCopyMemory page error: continue after ucm\n@@ -1524,1 +1524,1 @@\n-      UnsafeMemoryMark ucmm(this, add_entry, true);\n+      UnsafeCopyMemoryMark ucmm(this, add_entry, true);\n@@ -1593,1 +1593,1 @@\n-      \/\/ UnsafeMemoryAccess page error: continue after ucm\n+      \/\/ UnsafeCopyMemory page error: continue after ucm\n@@ -1595,1 +1595,1 @@\n-      UnsafeMemoryMark ucmm(this, add_entry, true);\n+      UnsafeCopyMemoryMark ucmm(this, add_entry, true);\n@@ -8335,2 +8335,2 @@\n-    if (UnsafeMemoryAccess::_table == nullptr) {\n-      UnsafeMemoryAccess::create_table(18);\n+    if (UnsafeCopyMemory::_table == nullptr) {\n+      UnsafeCopyMemory::create_table(8 + 4); \/\/ 8 for copyMemory; 4 for setMemory\n","filename":"src\/hotspot\/cpu\/aarch64\/stubGenerator_aarch64.cpp","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -959,2 +959,2 @@\n-      \/\/ UnsafeMemoryAccess page error: continue after ucm\n-      UnsafeMemoryMark ucmm(this, unsafe_copy, true);\n+      \/\/ UnsafeCopyMemory page error: continue after ucm\n+      UnsafeCopyMemoryMark ucmm(this, unsafe_copy, true);\n@@ -1108,2 +1108,2 @@\n-      \/\/ UnsafeMemoryAccess page error: continue after ucm\n-      UnsafeMemoryMark ucmm(this, unsafe_copy, true);\n+      \/\/ UnsafeCopyMemory page error: continue after ucm\n+      UnsafeCopyMemoryMark ucmm(this, unsafe_copy, true);\n@@ -1764,2 +1764,2 @@\n-      \/\/ UnsafeMemoryAccess page error: continue after ucm\n-      UnsafeMemoryMark ucmm(this, unsafe_copy, true);\n+      \/\/ UnsafeCopyMemory page error: continue after ucm\n+      UnsafeCopyMemoryMark ucmm(this, unsafe_copy, true);\n@@ -1903,2 +1903,2 @@\n-      \/\/ UnsafeMemoryAccess page error: continue after ucm\n-      UnsafeMemoryMark ucmm(this, unsafe_copy, true);\n+      \/\/ UnsafeCopyMemory page error: continue after ucm\n+      UnsafeCopyMemoryMark ucmm(this, unsafe_copy, true);\n@@ -2061,2 +2061,2 @@\n-      \/\/ UnsafeMemoryMark page error: continue at UnsafeMemoryAccess common_error_exit\n-      UnsafeMemoryMark ucmm(this, !aligned, false);\n+      \/\/ UnsafeCopyMemoryMark page error: continue at UnsafeCopyMemory common_error_exit\n+      UnsafeCopyMemoryMark ucmm(this, !aligned, false);\n@@ -2095,1 +2095,1 @@\n-      min_copy = generate_forward_aligned_copy_loop(from, to, count, bytes_per_count, !aligned \/*add UnsafeMemoryAccess entry*\/);\n+      min_copy = generate_forward_aligned_copy_loop(from, to, count, bytes_per_count, !aligned \/*add UnsafeCopyMemory entry*\/);\n@@ -2097,1 +2097,1 @@\n-      min_copy = generate_backward_aligned_copy_loop(from, to, count, bytes_per_count, !aligned \/*add UnsafeMemoryAccess entry*\/);\n+      min_copy = generate_backward_aligned_copy_loop(from, to, count, bytes_per_count, !aligned \/*add UnsafeCopyMemory entry*\/);\n@@ -2108,1 +2108,1 @@\n-      copy_small_array(from, to, count, tmp1, tmp2, bytes_per_count, forward, L_small_array \/* entry *\/, !aligned \/*add UnsafeMemoryAccess entry*\/);\n+      copy_small_array(from, to, count, tmp1, tmp2, bytes_per_count, forward, L_small_array \/* entry *\/, !aligned \/*add UnsafeCopyMemory entry*\/);\n@@ -2119,1 +2119,1 @@\n-      int min_copy_shifted = align_dst_and_generate_shifted_copy_loop(from, to, count, bytes_per_count, forward, !aligned \/*add UnsafeMemoryAccess entry*\/);\n+      int min_copy_shifted = align_dst_and_generate_shifted_copy_loop(from, to, count, bytes_per_count, forward, !aligned \/*add UnsafeCopyMemory entry*\/);\n@@ -2865,1 +2865,1 @@\n-    UnsafeMemoryAccess::set_common_exit_stub_pc(ucm_common_error_exit);\n+    UnsafeCopyMemory::set_common_exit_stub_pc(ucm_common_error_exit);\n@@ -3137,2 +3137,2 @@\n-    if (UnsafeMemoryAccess::_table == nullptr) {\n-      UnsafeMemoryAccess::create_table(42);\n+    if (UnsafeCopyMemory::_table == nullptr) {\n+      UnsafeCopyMemory::create_table(32 + 4); \/\/ 32 for copyMemory; 4 for setMemory\n","filename":"src\/hotspot\/cpu\/arm\/stubGenerator_arm.cpp","additions":17,"deletions":17,"binary":false,"changes":34,"status":"modified"},{"patch":"@@ -964,1 +964,1 @@\n-  \/\/ This is common errorexit stub for UnsafeMemoryAccess.\n+  \/\/ This is common errorexit stub for UnsafeCopyMemory.\n@@ -1016,2 +1016,2 @@\n-      \/\/ UnsafeMemoryAccess page error: continue at UnsafeMemoryAccess common_error_exit\n-      UnsafeMemoryMark ucmm(this, !aligned, false);\n+      \/\/ UnsafeCopyMemory page error: continue at UnsafeCopyMemory common_error_exit\n+      UnsafeCopyMemoryMark ucmm(this, !aligned, false);\n@@ -1198,2 +1198,2 @@\n-      \/\/ UnsafeMemoryAccess page error: continue at UnsafeMemoryAccess common_error_exit\n-      UnsafeMemoryMark ucmm(this, !aligned, false);\n+      \/\/ UnsafeCopyMemory page error: continue at UnsafeCopyMemory common_error_exit\n+      UnsafeCopyMemoryMark ucmm(this, !aligned, false);\n@@ -1285,2 +1285,2 @@\n-      \/\/ UnsafeMemoryAccess page error: continue at UnsafeMemoryAccess common_error_exit\n-      UnsafeMemoryMark ucmm(this, !aligned, false);\n+      \/\/ UnsafeCopyMemory page error: continue at UnsafeCopyMemory common_error_exit\n+      UnsafeCopyMemoryMark ucmm(this, !aligned, false);\n@@ -1469,2 +1469,2 @@\n-      \/\/ UnsafeMemoryAccess page error: continue at UnsafeMemoryAccess common_error_exit\n-      UnsafeMemoryMark ucmm(this, !aligned, false);\n+      \/\/ UnsafeCopyMemory page error: continue at UnsafeCopyMemory common_error_exit\n+      UnsafeCopyMemoryMark ucmm(this, !aligned, false);\n@@ -1628,2 +1628,2 @@\n-      \/\/ UnsafeMemoryAccess page error: continue at UnsafeMemoryAccess common_error_exit\n-      UnsafeMemoryMark ucmm(this, !aligned, false);\n+      \/\/ UnsafeCopyMemory page error: continue at UnsafeCopyMemory common_error_exit\n+      UnsafeCopyMemoryMark ucmm(this, !aligned, false);\n@@ -1780,2 +1780,2 @@\n-      \/\/ UnsafeMemoryAccess page error: continue at UnsafeMemoryAccess common_error_exit\n-      UnsafeMemoryMark ucmm(this, !aligned, false);\n+      \/\/ UnsafeCopyMemory page error: continue at UnsafeCopyMemory common_error_exit\n+      UnsafeCopyMemoryMark ucmm(this, !aligned, false);\n@@ -1906,2 +1906,2 @@\n-      \/\/ UnsafeMemoryAccess page error: continue at UnsafeMemoryAccess common_error_exit\n-      UnsafeMemoryMark ucmm(this, !aligned, false);\n+      \/\/ UnsafeCopyMemory page error: continue at UnsafeCopyMemory common_error_exit\n+      UnsafeCopyMemoryMark ucmm(this, !aligned, false);\n@@ -2037,2 +2037,2 @@\n-      \/\/ UnsafeMemoryAccess page error: continue at UnsafeMemoryAccess common_error_exit\n-      UnsafeMemoryMark ucmm(this, !aligned, false);\n+      \/\/ UnsafeCopyMemory page error: continue at UnsafeCopyMemory common_error_exit\n+      UnsafeCopyMemoryMark ucmm(this, !aligned, false);\n@@ -3132,1 +3132,1 @@\n-    UnsafeMemoryAccess::set_common_exit_stub_pc(ucm_common_error_exit);\n+    UnsafeCopyMemory::set_common_exit_stub_pc(ucm_common_error_exit);\n@@ -4748,2 +4748,2 @@\n-    if (UnsafeMemoryAccess::_table == nullptr) {\n-      UnsafeMemoryAccess::create_table(18);\n+    if (UnsafeCopyMemory::_table == nullptr) {\n+      UnsafeCopyMemory::create_table(8 + 4); \/\/ 8 for copyMemory; 4 for setMemory\n","filename":"src\/hotspot\/cpu\/ppc\/stubGenerator_ppc.cpp","additions":20,"deletions":20,"binary":false,"changes":40,"status":"modified"},{"patch":"@@ -1118,1 +1118,1 @@\n-      \/\/ UnsafeMemoryAccess page error: continue after ucm\n+      \/\/ UnsafeCopyMemory page error: continue after ucm\n@@ -1120,1 +1120,1 @@\n-      UnsafeMemoryMark ucmm(this, add_entry, true);\n+      UnsafeCopyMemoryMark ucmm(this, add_entry, true);\n@@ -1194,1 +1194,1 @@\n-      \/\/ UnsafeMemoryAccess page error: continue after ucm\n+      \/\/ UnsafeCopyMemory page error: continue after ucm\n@@ -1196,1 +1196,1 @@\n-      UnsafeMemoryMark ucmm(this, add_entry, true);\n+      UnsafeCopyMemoryMark ucmm(this, add_entry, true);\n@@ -5482,2 +5482,2 @@\n-    if (UnsafeMemoryAccess::_table == nullptr) {\n-      UnsafeMemoryAccess::create_table(18);\n+    if (UnsafeCopyMemory::_table == nullptr) {\n+      UnsafeCopyMemory::create_table(8 + 4); \/\/ 8 for copyMemory; 4 for setMemory\n","filename":"src\/hotspot\/cpu\/riscv\/stubGenerator_riscv.cpp","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -1134,2 +1134,2 @@\n-      \/\/ UnsafeMemoryAccess page error: continue after ucm\n-      UnsafeMemoryMark ucmm(this, add_entry, true);\n+      \/\/ UnsafeCopyMemory page error: continue after ucm\n+      UnsafeCopyMemoryMark ucmm(this, add_entry, true);\n@@ -1324,2 +1324,2 @@\n-      \/\/ UnsafeMemoryAccess page error: continue after ucm\n-      UnsafeMemoryMark ucmm(this, add_entry, true);\n+      \/\/ UnsafeCopyMemory page error: continue after ucm\n+      UnsafeCopyMemoryMark ucmm(this, add_entry, true);\n@@ -1453,2 +1453,2 @@\n-      \/\/ UnsafeMemoryAccess page error: continue after ucm\n-      UnsafeMemoryMark ucmm(this, true, true);\n+      \/\/ UnsafeCopyMemory page error: continue after ucm\n+      UnsafeCopyMemoryMark ucmm(this, true, true);\n@@ -1508,2 +1508,2 @@\n-      \/\/ UnsafeMemoryAccess page error: continue after ucm\n-      UnsafeMemoryMark ucmm(this, true, true);\n+      \/\/ UnsafeCopyMemory page error: continue after ucm\n+      UnsafeCopyMemoryMark ucmm(this, true, true);\n@@ -4124,2 +4124,2 @@\n-    if (UnsafeMemoryAccess::_table == nullptr) {\n-      UnsafeMemoryAccess::create_table(26);\n+    if (UnsafeCopyMemory::_table == nullptr) {\n+      UnsafeCopyMemory::create_table(16 + 4); \/\/ 16 for copyMemory; 4 for setMemory\n","filename":"src\/hotspot\/cpu\/x86\/stubGenerator_x86_32.cpp","additions":10,"deletions":10,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -4012,2 +4012,2 @@\n-  if (UnsafeMemoryAccess::_table == nullptr) {\n-    UnsafeMemoryAccess::create_table(26);\n+  if (UnsafeCopyMemory::_table == nullptr) {\n+    UnsafeCopyMemory::create_table(16 + 4); \/\/ 16 for copyMemory; 4 for setMemory\n","filename":"src\/hotspot\/cpu\/x86\/stubGenerator_x86_64.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -563,2 +563,2 @@\n-    \/\/ UnsafeMemoryAccess page error: continue after ucm\n-    UnsafeMemoryMark ucmm(this, !is_oop && !aligned, true);\n+    \/\/ UnsafeCopyMemory page error: continue after ucm\n+    UnsafeCopyMemoryMark ucmm(this, !is_oop && !aligned, true);\n@@ -733,1 +733,1 @@\n-      UnsafeMemoryMark ucmm(this, !is_oop && !aligned, false, ucme_exit_pc);\n+      UnsafeCopyMemoryMark ucmm(this, !is_oop && !aligned, false, ucme_exit_pc);\n@@ -862,2 +862,2 @@\n-    \/\/ UnsafeMemoryAccess page error: continue after ucm\n-    UnsafeMemoryMark ucmm(this, !is_oop && !aligned, true);\n+    \/\/ UnsafeCopyMemory page error: continue after ucm\n+    UnsafeCopyMemoryMark ucmm(this, !is_oop && !aligned, true);\n@@ -1321,2 +1321,2 @@\n-    \/\/ UnsafeMemoryAccess page error: continue after ucm\n-    UnsafeMemoryMark ucmm(this, !aligned, true);\n+    \/\/ UnsafeCopyMemory page error: continue after ucm\n+    UnsafeCopyMemoryMark ucmm(this, !aligned, true);\n@@ -1377,1 +1377,1 @@\n-    UnsafeMemoryMark ucmm(this, !aligned, false, ucme_exit_pc);\n+    UnsafeCopyMemoryMark ucmm(this, !aligned, false, ucme_exit_pc);\n@@ -1435,2 +1435,2 @@\n-    \/\/ UnsafeMemoryAccess page error: continue after ucm\n-    UnsafeMemoryMark ucmm(this, !aligned, true);\n+    \/\/ UnsafeCopyMemory page error: continue after ucm\n+    UnsafeCopyMemoryMark ucmm(this, !aligned, true);\n@@ -1480,2 +1480,2 @@\n-    \/\/ UnsafeMemoryAccess page error: continue after ucm\n-    UnsafeMemoryMark ucmm(this, !aligned, true);\n+    \/\/ UnsafeCopyMemory page error: continue after ucm\n+    UnsafeCopyMemoryMark ucmm(this, !aligned, true);\n@@ -1552,2 +1552,2 @@\n-    \/\/ UnsafeMemoryAccess page error: continue after ucm\n-    UnsafeMemoryMark ucmm(this, !aligned, true);\n+    \/\/ UnsafeCopyMemory page error: continue after ucm\n+    UnsafeCopyMemoryMark ucmm(this, !aligned, true);\n@@ -1601,1 +1601,1 @@\n-    UnsafeMemoryMark ucmm(this, !aligned, false, ucme_exit_pc);\n+    UnsafeCopyMemoryMark ucmm(this, !aligned, false, ucme_exit_pc);\n@@ -1627,1 +1627,1 @@\n-    UnsafeMemoryMark(this, ((t == T_BYTE) && !aligned), true);\n+    UnsafeCopyMemoryMark(this, ((t == T_BYTE) && !aligned), true);\n@@ -1688,2 +1688,2 @@\n-    \/\/ UnsafeMemoryAccess page error: continue after ucm\n-    UnsafeMemoryMark ucmm(this, !aligned, true);\n+    \/\/ UnsafeCopyMemory page error: continue after ucm\n+    UnsafeCopyMemoryMark ucmm(this, !aligned, true);\n@@ -1725,2 +1725,2 @@\n-    \/\/ UnsafeMemoryAccess page error: continue after ucm\n-    UnsafeMemoryMark ucmm(this, !aligned, true);\n+    \/\/ UnsafeCopyMemory page error: continue after ucm\n+    UnsafeCopyMemoryMark ucmm(this, !aligned, true);\n@@ -1809,2 +1809,2 @@\n-    \/\/ UnsafeMemoryAccess page error: continue after ucm\n-    UnsafeMemoryMark ucmm(this, !is_oop && !aligned, true);\n+    \/\/ UnsafeCopyMemory page error: continue after ucm\n+    UnsafeCopyMemoryMark ucmm(this, !is_oop && !aligned, true);\n@@ -1846,1 +1846,1 @@\n-    UnsafeMemoryMark ucmm(this, !is_oop && !aligned, false, ucme_exit_pc);\n+    UnsafeCopyMemoryMark ucmm(this, !is_oop && !aligned, false, ucme_exit_pc);\n@@ -1919,2 +1919,2 @@\n-    \/\/ UnsafeMemoryAccess page error: continue after ucm\n-    UnsafeMemoryMark ucmm(this, !is_oop && !aligned, true);\n+    \/\/ UnsafeCopyMemory page error: continue after ucm\n+    UnsafeCopyMemoryMark ucmm(this, !is_oop && !aligned, true);\n@@ -1952,2 +1952,2 @@\n-    \/\/ UnsafeMemoryAccess page error: continue after ucm\n-    UnsafeMemoryMark ucmm(this, !is_oop && !aligned, true);\n+    \/\/ UnsafeCopyMemory page error: continue after ucm\n+    UnsafeCopyMemoryMark ucmm(this, !is_oop && !aligned, true);\n@@ -2034,2 +2034,2 @@\n-    \/\/ UnsafeMemoryAccess page error: continue after ucm\n-    UnsafeMemoryMark ucmm(this, !is_oop && !aligned, true);\n+    \/\/ UnsafeCopyMemory page error: continue after ucm\n+    UnsafeCopyMemoryMark ucmm(this, !is_oop && !aligned, true);\n@@ -2066,2 +2066,2 @@\n-    \/\/ UnsafeMemoryAccess page error: continue after ucm\n-    UnsafeMemoryMark ucmm(this, !is_oop && !aligned, true);\n+    \/\/ UnsafeCopyMemory page error: continue after ucm\n+    UnsafeCopyMemoryMark ucmm(this, !is_oop && !aligned, true);\n@@ -2143,2 +2143,2 @@\n-    \/\/ UnsafeMemoryAccess page error: continue after ucm\n-    UnsafeMemoryMark ucmm(this, !is_oop && !aligned, true);\n+    \/\/ UnsafeCopyMemory page error: continue after ucm\n+    UnsafeCopyMemoryMark ucmm(this, !is_oop && !aligned, true);\n@@ -2170,2 +2170,2 @@\n-    \/\/ UnsafeMemoryAccess page error: continue after ucm\n-    UnsafeMemoryMark ucmm(this, !is_oop && !aligned, true);\n+    \/\/ UnsafeCopyMemory page error: continue after ucm\n+    UnsafeCopyMemoryMark ucmm(this, !is_oop && !aligned, true);\n@@ -2518,2 +2518,0 @@\n-  __ cmpq(size, 8);\n-  __ jccb(Assembler::below, L_Tail);\n@@ -2521,1 +2519,1 @@\n-  \/\/ Number of (8*X)-byte chunks into rScratch1\n+  \/\/ Number of (8*X)-byte chunks into tmp\n@@ -2524,0 +2522,1 @@\n+  __ jccb(Assembler::zero, L_Tail);\n@@ -2604,0 +2603,2 @@\n+    assert_different_registers(dest, size, byteVal, wide_value, rScratch1);\n+\n@@ -2630,1 +2631,1 @@\n-      UnsafeMemoryMark usmm(this, true, true);\n+      UnsafeCopyMemoryMark usmm(this, true, true);\n@@ -2644,1 +2645,1 @@\n-      UnsafeMemoryMark usmm(this, true, true);\n+      UnsafeCopyMemoryMark usmm(this, true, true);\n@@ -2661,1 +2662,1 @@\n-      UnsafeMemoryMark usmm(this, true, true);\n+      UnsafeCopyMemoryMark usmm(this, true, true);\n@@ -2674,1 +2675,1 @@\n-    __ pop(rbp);    \/\/ Clear effect of enter()\n+    __ leave();    \/\/ Clear effect of enter()\n","filename":"src\/hotspot\/cpu\/x86\/stubGenerator_x86_64_arraycopy.cpp","additions":43,"deletions":42,"binary":false,"changes":85,"status":"modified"},{"patch":"@@ -2798,1 +2798,1 @@\n-      bool is_unsafe_memory_access = (in_native || in_java) && UnsafeMemoryAccess::contains_pc(pc);\n+      bool is_unsafe_memory_access = (in_native || in_java) && UnsafeCopyMemory::contains_pc(pc);\n@@ -2803,1 +2803,1 @@\n-          next_pc = UnsafeMemoryAccess::page_error_continue_pc(pc);\n+          next_pc = UnsafeCopyMemory::page_error_continue_pc(pc);\n","filename":"src\/hotspot\/os\/windows\/os_windows.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -343,1 +343,1 @@\n-        bool is_unsafe_memory_access = (thread->doing_unsafe_access() && UnsafeMemoryAccess::contains_pc(pc));\n+        bool is_unsafe_memory_access = (thread->doing_unsafe_access() && UnsafeCopyMemory::contains_pc(pc));\n@@ -347,1 +347,1 @@\n-            next_pc = UnsafeMemoryAccess::page_error_continue_pc(pc);\n+            next_pc = UnsafeCopyMemory::page_error_continue_pc(pc);\n@@ -371,2 +371,2 @@\n-        if (UnsafeMemoryAccess::contains_pc(pc)) {\n-          next_pc = UnsafeMemoryAccess::page_error_continue_pc(pc);\n+        if (UnsafeCopyMemory::contains_pc(pc)) {\n+          next_pc = UnsafeCopyMemory::page_error_continue_pc(pc);\n","filename":"src\/hotspot\/os_cpu\/aix_ppc\/os_aix_ppc.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -260,1 +260,1 @@\n-        bool is_unsafe_memory_access = (thread->doing_unsafe_access() && UnsafeMemoryAccess::contains_pc(pc));\n+        bool is_unsafe_memory_access = (thread->doing_unsafe_access() && UnsafeCopyMemory::contains_pc(pc));\n@@ -264,1 +264,1 @@\n-            next_pc = UnsafeMemoryAccess::page_error_continue_pc(pc);\n+            next_pc = UnsafeCopyMemory::page_error_continue_pc(pc);\n@@ -302,2 +302,2 @@\n-      if (UnsafeMemoryAccess::contains_pc(pc)) {\n-        next_pc = UnsafeMemoryAccess::page_error_continue_pc(pc);\n+      if (UnsafeCopyMemory::contains_pc(pc)) {\n+        next_pc = UnsafeCopyMemory::page_error_continue_pc(pc);\n","filename":"src\/hotspot\/os_cpu\/bsd_aarch64\/os_bsd_aarch64.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -444,1 +444,1 @@\n-        bool is_unsafe_memory_access = thread->doing_unsafe_access() && UnsafeMemoryAccess::contains_pc(pc);\n+        bool is_unsafe_memory_access = thread->doing_unsafe_access() && UnsafeCopyMemory::contains_pc(pc);\n@@ -448,1 +448,1 @@\n-            next_pc = UnsafeMemoryAccess::page_error_continue_pc(pc);\n+            next_pc = UnsafeCopyMemory::page_error_continue_pc(pc);\n@@ -524,2 +524,2 @@\n-        if (UnsafeMemoryAccess::contains_pc(pc)) {\n-          next_pc = UnsafeMemoryAccess::page_error_continue_pc(pc);\n+        if (UnsafeCopyMemory::contains_pc(pc)) {\n+          next_pc = UnsafeCopyMemory::page_error_continue_pc(pc);\n","filename":"src\/hotspot\/os_cpu\/bsd_x86\/os_bsd_x86.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -243,1 +243,1 @@\n-        bool is_unsafe_memory_access = (thread->doing_unsafe_access() && UnsafeMemoryAccess::contains_pc(pc));\n+        bool is_unsafe_memory_access = (thread->doing_unsafe_access() && UnsafeCopyMemory::contains_pc(pc));\n@@ -247,1 +247,1 @@\n-            next_pc = UnsafeMemoryAccess::page_error_continue_pc(pc);\n+            next_pc = UnsafeCopyMemory::page_error_continue_pc(pc);\n@@ -289,2 +289,2 @@\n-      if (UnsafeMemoryAccess::contains_pc(pc)) {\n-        next_pc = UnsafeMemoryAccess::page_error_continue_pc(pc);\n+      if (UnsafeCopyMemory::contains_pc(pc)) {\n+        next_pc = UnsafeCopyMemory::page_error_continue_pc(pc);\n","filename":"src\/hotspot\/os_cpu\/linux_aarch64\/os_linux_aarch64.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -329,1 +329,1 @@\n-             UnsafeMemoryAccess::contains_pc(pc))) {\n+             UnsafeCopyMemory::contains_pc(pc))) {\n@@ -367,2 +367,2 @@\n-    if (UnsafeMemoryAccess::contains_pc(pc)) {\n-      next_pc = UnsafeMemoryAccess::page_error_continue_pc(pc);\n+    if (UnsafeCopyMemory::contains_pc(pc)) {\n+      next_pc = UnsafeCopyMemory::page_error_continue_pc(pc);\n","filename":"src\/hotspot\/os_cpu\/linux_arm\/os_linux_arm.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -358,1 +358,1 @@\n-        bool is_unsafe_memory_access = (thread->doing_unsafe_access() && UnsafeMemoryAccess::contains_pc(pc));\n+        bool is_unsafe_memory_access = (thread->doing_unsafe_access() && UnsafeCopyMemory::contains_pc(pc));\n@@ -362,1 +362,1 @@\n-            next_pc = UnsafeMemoryAccess::page_error_continue_pc(pc);\n+            next_pc = UnsafeCopyMemory::page_error_continue_pc(pc);\n@@ -382,2 +382,2 @@\n-        if (UnsafeMemoryAccess::contains_pc(pc)) {\n-          next_pc = UnsafeMemoryAccess::page_error_continue_pc(pc);\n+        if (UnsafeCopyMemory::contains_pc(pc)) {\n+          next_pc = UnsafeCopyMemory::page_error_continue_pc(pc);\n","filename":"src\/hotspot\/os_cpu\/linux_ppc\/os_linux_ppc.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -233,1 +233,1 @@\n-        bool is_unsafe_memory_access = (thread->doing_unsafe_access() && UnsafeMemoryAccess::contains_pc(pc));\n+        bool is_unsafe_memory_access = (thread->doing_unsafe_access() && UnsafeCopyMemory::contains_pc(pc));\n@@ -237,1 +237,1 @@\n-            next_pc = UnsafeMemoryAccess::page_error_continue_pc(pc);\n+            next_pc = UnsafeCopyMemory::page_error_continue_pc(pc);\n@@ -275,2 +275,2 @@\n-      if (UnsafeMemoryAccess::contains_pc(pc)) {\n-        next_pc = UnsafeMemoryAccess::page_error_continue_pc(pc);\n+      if (UnsafeCopyMemory::contains_pc(pc)) {\n+        next_pc = UnsafeCopyMemory::page_error_continue_pc(pc);\n","filename":"src\/hotspot\/os_cpu\/linux_riscv\/os_linux_riscv.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -263,1 +263,1 @@\n-        bool is_unsafe_memory_access = thread->doing_unsafe_access() && UnsafeMemoryAccess::contains_pc(pc);\n+        bool is_unsafe_memory_access = thread->doing_unsafe_access() && UnsafeCopyMemory::contains_pc(pc);\n@@ -267,1 +267,1 @@\n-            next_pc = UnsafeMemoryAccess::page_error_continue_pc(pc);\n+            next_pc = UnsafeCopyMemory::page_error_continue_pc(pc);\n@@ -318,2 +318,2 @@\n-        if (UnsafeMemoryAccess::contains_pc(pc)) {\n-          next_pc = UnsafeMemoryAccess::page_error_continue_pc(pc);\n+        if (UnsafeCopyMemory::contains_pc(pc)) {\n+          next_pc = UnsafeCopyMemory::page_error_continue_pc(pc);\n","filename":"src\/hotspot\/os_cpu\/linux_x86\/os_linux_x86.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -4959,2 +4959,0 @@\n-  if (StubRoutines::unsafe_setmemory() == nullptr) return false;\n-\n","filename":"src\/hotspot\/share\/opto\/library_call.cpp","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -780,2 +780,1 @@\n-  int num_args      = 4;\n-  int argcnt = num_args;\n+  int argcnt = NOT_LP64(3) LP64_ONLY(4);\n@@ -784,4 +783,4 @@\n-  fields[argp++] = TypePtr::NOTNULL;    \/\/ dest\n-  fields[argp++] = TypeLong::LONG;      \/\/ size\n-  fields[argp++] = Type::HALF;          \/\/ size\n-  fields[argp++] = TypeInt::UBYTE;      \/\/ bytevalue\n+  fields[argp++] = TypePtr::NOTNULL;        \/\/ dest\n+  fields[argp++] = TypeX_X;                 \/\/ size\n+  LP64_ONLY(fields[argp++] = Type::HALF);  \/\/ size\n+  fields[argp++] = TypeInt::UBYTE;          \/\/ bytevalue\n","filename":"src\/hotspot\/share\/opto\/runtime.cpp","additions":5,"deletions":6,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -43,4 +43,4 @@\n-UnsafeMemoryAccess* UnsafeMemoryAccess::_table                      = nullptr;\n-int UnsafeMemoryAccess::_table_length                             = 0;\n-int UnsafeMemoryAccess::_table_max_length                         = 0;\n-address UnsafeMemoryAccess::_common_exit_stub_pc                  = nullptr;\n+UnsafeCopyMemory* UnsafeCopyMemory::_table                      = nullptr;\n+int UnsafeCopyMemory::_table_length                             = 0;\n+int UnsafeCopyMemory::_table_max_length                         = 0;\n+address UnsafeCopyMemory::_common_exit_stub_pc                  = nullptr;\n@@ -204,3 +204,3 @@\n-void UnsafeMemoryAccess::create_table(int max_size) {\n-  UnsafeMemoryAccess::_table = new UnsafeMemoryAccess[max_size];\n-  UnsafeMemoryAccess::_table_max_length = max_size;\n+void UnsafeCopyMemory::create_table(int max_size) {\n+  UnsafeCopyMemory::_table = new UnsafeCopyMemory[max_size];\n+  UnsafeCopyMemory::_table_max_length = max_size;\n@@ -209,3 +209,3 @@\n-bool UnsafeMemoryAccess::contains_pc(address pc) {\n-  for (int i = 0; i < UnsafeMemoryAccess::_table_length; i++) {\n-    UnsafeMemoryAccess* entry = &UnsafeMemoryAccess::_table[i];\n+bool UnsafeCopyMemory::contains_pc(address pc) {\n+  for (int i = 0; i < UnsafeCopyMemory::_table_length; i++) {\n+    UnsafeCopyMemory* entry = &UnsafeCopyMemory::_table[i];\n@@ -219,3 +219,3 @@\n-address UnsafeMemoryAccess::page_error_continue_pc(address pc) {\n-  for (int i = 0; i < UnsafeMemoryAccess::_table_length; i++) {\n-    UnsafeMemoryAccess* entry = &UnsafeMemoryAccess::_table[i];\n+address UnsafeCopyMemory::page_error_continue_pc(address pc) {\n+  for (int i = 0; i < UnsafeCopyMemory::_table_length; i++) {\n+    UnsafeCopyMemory* entry = &UnsafeCopyMemory::_table[i];\n@@ -521,1 +521,1 @@\n-UnsafeMemoryMark::UnsafeMemoryMark(StubCodeGenerator* cgen, bool add_entry, bool continue_at_scope_end, address error_exit_pc) {\n+UnsafeCopyMemoryMark::UnsafeCopyMemoryMark(StubCodeGenerator* cgen, bool add_entry, bool continue_at_scope_end, address error_exit_pc) {\n@@ -527,1 +527,1 @@\n-      err_exit_pc = error_exit_pc != nullptr ? error_exit_pc : UnsafeMemoryAccess::common_exit_stub_pc();\n+      err_exit_pc = error_exit_pc != nullptr ? error_exit_pc : UnsafeCopyMemory::common_exit_stub_pc();\n@@ -530,1 +530,1 @@\n-    _ucm_entry = UnsafeMemoryAccess::add_to_table(_cgen->assembler()->pc(), nullptr, err_exit_pc);\n+    _ucm_entry = UnsafeCopyMemory::add_to_table(_cgen->assembler()->pc(), nullptr, err_exit_pc);\n@@ -534,1 +534,1 @@\n-UnsafeMemoryMark::~UnsafeMemoryMark() {\n+UnsafeCopyMemoryMark::~UnsafeCopyMemoryMark() {\n","filename":"src\/hotspot\/share\/runtime\/stubRoutines.cpp","additions":17,"deletions":17,"binary":false,"changes":34,"status":"modified"},{"patch":"@@ -79,1 +79,1 @@\n-class UnsafeMemoryAccess : public CHeapObj<mtCode> {\n+class UnsafeCopyMemory : public CHeapObj<mtCode> {\n@@ -86,1 +86,1 @@\n-  static UnsafeMemoryAccess* _table;\n+  static UnsafeCopyMemory* _table;\n@@ -89,1 +89,1 @@\n-  UnsafeMemoryAccess() : _start_pc(nullptr), _end_pc(nullptr), _error_exit_pc(nullptr) {}\n+  UnsafeCopyMemory() : _start_pc(nullptr), _end_pc(nullptr), _error_exit_pc(nullptr) {}\n@@ -100,3 +100,3 @@\n-  static UnsafeMemoryAccess* add_to_table(address start_pc, address end_pc, address error_exit_pc) {\n-    guarantee(_table_length < _table_max_length, \"Incorrect UnsafeMemoryAccess::_table_max_length\");\n-    UnsafeMemoryAccess* entry = &_table[_table_length];\n+  static UnsafeCopyMemory* add_to_table(address start_pc, address end_pc, address error_exit_pc) {\n+    guarantee(_table_length < _table_max_length, \"Incorrect UnsafeCopyMemory::_table_max_length\");\n+    UnsafeCopyMemory* entry = &_table[_table_length];\n@@ -116,1 +116,1 @@\n-class UnsafeMemoryMark : public StackObj {\n+class UnsafeCopyMemoryMark : public StackObj {\n@@ -118,1 +118,1 @@\n-  UnsafeMemoryAccess*  _ucm_entry;\n+  UnsafeCopyMemory*  _ucm_entry;\n@@ -121,2 +121,2 @@\n-  UnsafeMemoryMark(StubCodeGenerator* cgen, bool add_entry, bool continue_at_scope_end, address error_exit_pc = nullptr);\n-  ~UnsafeMemoryMark();\n+  UnsafeCopyMemoryMark(StubCodeGenerator* cgen, bool add_entry, bool continue_at_scope_end, address error_exit_pc = nullptr);\n+  ~UnsafeCopyMemoryMark();\n","filename":"src\/hotspot\/share\/runtime\/stubRoutines.hpp","additions":10,"deletions":10,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -303,0 +303,1 @@\n+\n","filename":"src\/hotspot\/share\/utilities\/copy.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"}]}