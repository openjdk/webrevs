{"files":[{"patch":"@@ -40,1 +40,1 @@\n- * @summary Check for unwanted file (types\/extensions) in the jdk image\n+ * @summary Check for unwanted files (types\/extensions) in the jdk image\n@@ -51,0 +51,14 @@\n+    private static boolean isGpl(Path myFile) {\n+        if (myFile == null || !Files.exists(myFile)) {\n+            return false;\n+        }\n+\n+        try {\n+            String firstLine = Files.readAllLines(myFile).stream()\n+                                    .findFirst().orElse(\"\");\n+            return firstLine.contains(\"The GNU General Public License (GPL)\");\n+        } catch (IOException e) {\n+            return false;\n+        }\n+    }\n+\n@@ -162,2 +176,0 @@\n-        requiredFilesInLegalSubdirs.add(\"ADDITIONAL_LICENSE_INFO\");\n-        requiredFilesInLegalSubdirs.add(\"ASSEMBLY_EXCEPTION\");\n@@ -166,0 +178,7 @@\n+        Path javabaseLicenseFile = mainDirToScan.resolve(\"legal\/java.base\/LICENSE\");\n+        if (isGpl(javabaseLicenseFile)) {\n+            System.out.println(\"GPL info found in java.base LICENSE file\");\n+            requiredFilesInLegalSubdirs.add(\"ADDITIONAL_LICENSE_INFO\");\n+            requiredFilesInLegalSubdirs.add(\"ASSEMBLY_EXCEPTION\");\n+        }\n+\n","filename":"test\/jdk\/build\/CheckFiles.java","additions":22,"deletions":3,"binary":false,"changes":25,"status":"modified"}]}