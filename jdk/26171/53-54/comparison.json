{"files":[{"patch":"@@ -89,0 +89,1 @@\n+      _free_set->partitions()->assert_bounds(true);\n@@ -400,3 +401,5 @@\n-  _free_set->partitions()->decrease_used(ALLOC_PARTITION, total_free_bytes);\n-  _free_set->partitions()->increase_region_counts(ALLOC_PARTITION, total_regions_to_unretire);\n-  accounting_updater._need_update = true;\n+  if (total_regions_to_unretire > 0) {\n+    _free_set->partitions()->decrease_used(ALLOC_PARTITION, total_free_bytes);\n+    _free_set->partitions()->increase_region_counts(ALLOC_PARTITION, total_regions_to_unretire);\n+    accounting_updater._need_update = true;\n+  }\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahAllocator.cpp","additions":6,"deletions":3,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -1203,0 +1203,2 @@\n+  heap->free_set()->release_alloc_regions_under_lock();\n+\n@@ -1225,2 +1227,0 @@\n-  heap->free_set()->release_alloc_regions_under_lock();\n-\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahConcurrentGC.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -431,0 +431,2 @@\n+  heap->free_set()->release_alloc_regions_under_lock();\n+\n@@ -441,1 +443,0 @@\n-  heap->free_set()->release_alloc_regions_under_lock();\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahDegeneratedGC.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -854,1 +854,1 @@\n-  inline void release_alloc_regions() {\n+  void release_alloc_regions() {\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahFreeSet.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1121,1 +1121,0 @@\n-      free_set->collector_allocator()->release_alloc_regions();\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahFullGC.cpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -594,0 +594,1 @@\n+    assert(!is_atomic_alloc_region(), \"Must not\");\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahHeapRegion.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"}]}