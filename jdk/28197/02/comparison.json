{"files":[{"patch":"@@ -521,1 +521,1 @@\n-    dictionary->iterate(&ldp);\n+    dictionary->iterate_all(&ldp);\n","filename":"src\/hotspot\/share\/cds\/lambdaProxyClassDictionary.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -297,0 +297,1 @@\n+  \/\/ Iterate through the values in the table, stopping when do_value() returns false.\n@@ -305,0 +306,1 @@\n+  \/\/ Iterate through the values in the table, stopping when the lambda returns false.\n@@ -314,1 +316,3 @@\n-        function(decode(entry[0]));\n+        if (!function(decode(entry[0]))) {\n+          return;\n+        }\n@@ -318,1 +322,3 @@\n-          function(decode(entry[1]));\n+          if (!function(decode(entry[1]))) {\n+            return;\n+          }\n@@ -325,0 +331,14 @@\n+  \/\/ Unconditionally iterate through all the values in the table\n+  template <class ITER>\n+  inline void iterate_all(ITER* iter) const { iterate_all([&](V v) { iter->do_value(v); }); }\n+\n+  \/\/ Unconditionally iterate through all the values in the table using lambda\n+  template<typename Function>\n+  void iterate_all(Function function) const { \/\/ lambda enabled API\n+    auto wrapper = [&] (V v) {\n+      function(v);\n+      return true;\n+    };\n+    iterate(wrapper);\n+  }\n+\n","filename":"src\/hotspot\/share\/classfile\/compactHashtable.hpp","additions":22,"deletions":2,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -912,1 +912,1 @@\n-      _shared_table.iterate(&pss);\n+      _shared_table.iterate_all(&pss);\n","filename":"src\/hotspot\/share\/classfile\/stringTable.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -275,3 +275,1 @@\n-  SharedSymbolIterator iter(cl);\n-  _shared_table.iterate(&iter);\n-  _dynamic_shared_table.iterate(&iter);\n+  shared_symbols_do(cl);\n@@ -287,2 +285,2 @@\n-  _shared_table.iterate(&iter);\n-  _dynamic_shared_table.iterate(&iter);\n+  _shared_table.iterate_all(&iter);\n+  _dynamic_shared_table.iterate_all(&iter);\n@@ -672,1 +670,1 @@\n-      _shared_table.iterate(&dss);\n+      _shared_table.iterate_all(&dss);\n@@ -679,1 +677,1 @@\n-      _dynamic_shared_table.iterate(&dss);\n+      _dynamic_shared_table.iterate_all(&dss);\n","filename":"src\/hotspot\/share\/classfile\/symbolTable.cpp","additions":5,"deletions":7,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -1434,1 +1434,1 @@\n-  get_archive(is_static_archive)->_builtin_dictionary.iterate([&] (const RunTimeClassInfo* record) {\n+  get_archive(is_static_archive)->_builtin_dictionary.iterate_all([&] (const RunTimeClassInfo* record) {\n@@ -1438,1 +1438,1 @@\n-  get_archive(is_static_archive)->_unregistered_dictionary.iterate([&] (const RunTimeClassInfo* record) {\n+  get_archive(is_static_archive)->_unregistered_dictionary.iterate_all([&] (const RunTimeClassInfo* record) {\n@@ -1467,1 +1467,1 @@\n-  _builtin_dictionary.iterate(&p);\n+  _builtin_dictionary.iterate_all(&p);\n@@ -1469,1 +1469,1 @@\n-  _unregistered_dictionary.iterate(&p);\n+  _unregistered_dictionary.iterate_all(&p);\n","filename":"src\/hotspot\/share\/classfile\/systemDictionaryShared.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -86,1 +86,1 @@\n-    archived_training_data_dictionary()->iterate([&](TrainingData* td) {\n+    archived_training_data_dictionary()->iterate_all([&](TrainingData* td) {\n@@ -469,1 +469,1 @@\n-    _archived_training_data_dictionary.iterate([&](TrainingData* record) {\n+    _archived_training_data_dictionary.iterate_all([&](TrainingData* record) {\n@@ -695,1 +695,1 @@\n-  _archived_training_data_dictionary.iterate(&tdp);\n+  _archived_training_data_dictionary.iterate_all(&tdp);\n","filename":"src\/hotspot\/share\/oops\/trainingData.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -3039,1 +3039,1 @@\n-  _aot_adapter_handler_table.iterate([&](AdapterHandlerEntry* entry) {\n+  _aot_adapter_handler_table.iterate_all([&](AdapterHandlerEntry* entry) {\n@@ -3391,0 +3391,8 @@\n+const char* AdapterHandlerLibrary::name(AdapterHandlerEntry* handler) {\n+  return handler->fingerprint()->as_basic_args_string();\n+}\n+\n+uint32_t AdapterHandlerLibrary::id(AdapterHandlerEntry* handler) {\n+  return handler->id();\n+}\n+\n@@ -3396,1 +3404,6 @@\n-      return (found = (b == CodeCache::find_blob(handler->get_i2c_entry())));\n+      if (b == CodeCache::find_blob(handler->get_i2c_entry())) {\n+        found = true;\n+        return false; \/\/ abort iteration\n+      } else {\n+        return true; \/\/ keep looking\n+      }\n@@ -3402,2 +3415,7 @@\n-    auto findblob_runtime_table = [&] (AdapterFingerPrint* key, AdapterHandlerEntry* a) {\n-      return (found = (b == CodeCache::find_blob(a->get_i2c_entry())));\n+    auto findblob_runtime_table = [&] (AdapterFingerPrint* key, AdapterHandlerEntry* handler) {\n+      if (b == CodeCache::find_blob(handler->get_i2c_entry())) {\n+        found = true;\n+        return false; \/\/ abort iteration\n+      } else {\n+        return true; \/\/ keep looking\n+      }\n@@ -3411,8 +3429,0 @@\n-const char* AdapterHandlerLibrary::name(AdapterHandlerEntry* handler) {\n-  return handler->fingerprint()->as_basic_args_string();\n-}\n-\n-uint32_t AdapterHandlerLibrary::id(AdapterHandlerEntry* handler) {\n-  return handler->id();\n-}\n-\n@@ -3428,1 +3438,1 @@\n-        return true;\n+        return false; \/\/ abort iteration\n@@ -3430,1 +3440,1 @@\n-        return false; \/\/ keep looking\n+        return true; \/\/ keep looking\n@@ -3437,2 +3447,2 @@\n-    auto findblob_runtime_table = [&] (AdapterFingerPrint* key, AdapterHandlerEntry* a) {\n-      if (b == CodeCache::find_blob(a->get_i2c_entry())) {\n+    auto findblob_runtime_table = [&] (AdapterFingerPrint* key, AdapterHandlerEntry* handler) {\n+      if (b == CodeCache::find_blob(handler->get_i2c_entry())) {\n@@ -3441,2 +3451,2 @@\n-        a->print_adapter_on(st);\n-        return true;\n+        handler->print_adapter_on(st);\n+        return false; \/\/ abort iteration\n@@ -3444,1 +3454,1 @@\n-        return false; \/\/ keep looking\n+        return true; \/\/ keep looking\n","filename":"src\/hotspot\/share\/runtime\/sharedRuntime.cpp","additions":29,"deletions":19,"binary":false,"changes":48,"status":"modified"}]}