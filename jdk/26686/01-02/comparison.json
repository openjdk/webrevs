{"files":[{"patch":"@@ -100,7 +100,9 @@\n-            factory = Thread.ofVirtual().name(\"fetcher-\", 0).factory();\n-            try (var executor = Executors.newThreadPerTaskExecutor(factory)) {\n-                for (int i = 1; i <= requests; i++) {\n-                    final String actual = executor.submit(() -> fetch(url)).get();\n-                    if (!HELLO.equals(actual)) {\n-                        throw new RuntimeException(\"unexpected response: \\\"\" + actual\n-                                + \"\\\" for request \" + i);\n+            try {\n+                factory = Thread.ofVirtual().name(\"fetcher-\", 0).factory();\n+                try (var executor = Executors.newThreadPerTaskExecutor(factory)) {\n+                    for (int i = 1; i <= requests; i++) {\n+                        final String actual = executor.submit(() -> fetch(url)).get();\n+                        if (!HELLO.equals(actual)) {\n+                            throw new RuntimeException(\"unexpected response: \\\"\" + actual\n+                                    + \"\\\" for request \" + i);\n+                        }\n@@ -109,0 +111,2 @@\n+            } finally {\n+                server.stop(1);\n@@ -110,2 +114,0 @@\n-        } finally {\n-            server.stop(1);\n","filename":"test\/jdk\/java\/net\/vthread\/HttpALot.java","additions":11,"deletions":9,"binary":false,"changes":20,"status":"modified"}]}