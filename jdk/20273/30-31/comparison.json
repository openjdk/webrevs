{"files":[{"patch":"@@ -59,0 +59,1 @@\n+import static java.lang.classfile.ClassFile.*;\n@@ -120,1 +121,0 @@\n-\n@@ -1076,0 +1076,1 @@\n+\n@@ -1077,2 +1078,2 @@\n-        static final ClassDesc CD_DecimalDigits = ClassDesc.ofDescriptor(\"Ljdk\/internal\/util\/DecimalDigits;\");\n-        static final ClassDesc CD_StringConcatBase = ClassDesc.ofDescriptor(\"Ljava\/lang\/StringConcatHelper$StringConcatBase;\");\n+        static final ClassDesc CD_DecimalDigits      = ClassDesc.ofDescriptor(\"Ljdk\/internal\/util\/DecimalDigits;\");\n+        static final ClassDesc CD_StringConcatBase   = ClassDesc.ofDescriptor(\"Ljava\/lang\/StringConcatHelper$StringConcatBase;\");\n@@ -1104,0 +1105,1 @@\n+        static final int FORCE_INLINE_THRESHOLD = 16;\n@@ -1106,2 +1108,2 @@\n-        static final MethodType CONSTRUCTOR_METHOD_TYPE = MethodType.methodType(void.class, String[].class);\n-        private static final Consumer<CodeBuilder> CONSTRUCTOR_BUILDER = new Consumer<CodeBuilder>() {\n+        static final MethodType CONSTRUCTOR_METHOD_TYPE        = MethodType.methodType(void.class, String[].class);\n+        static final Consumer<CodeBuilder> CONSTRUCTOR_BUILDER = new Consumer<CodeBuilder>() {\n@@ -1110,2 +1112,5 @@\n-                int thisSlot = cb.receiverSlot();\n-                int constantsSlot = cb.parameterSlot(0);\n+                \/*\n+                 * super(constantsSlot);\n+                 *\/\n+                int thisSlot      = 0,\n+                    constantsSlot = 1;\n@@ -1229,1 +1234,0 @@\n-\n@@ -1257,2 +1261,2 @@\n-                        int forceInlineThreshold = 16;\n-                        boolean forceInline = concatArgs.parameterCount() < forceInlineThreshold;\n+                        final boolean forceInline = concatArgs.parameterCount() < FORCE_INLINE_THRESHOLD;\n+\n@@ -1262,5 +1266,2 @@\n-                                .withFlags(ClassFile.ACC_FINAL | ClassFile.ACC_SUPER | ClassFile.ACC_SYNTHETIC)\n-                                .withMethodBody(INIT_NAME,\n-                                        MTD_INIT,\n-                                        ClassFile.ACC_PRIVATE,\n-                                        CONSTRUCTOR_BUILDER)\n+                                .withFlags(ACC_FINAL | ACC_SUPER | ACC_SYNTHETIC)\n+                                .withMethodBody(INIT_NAME, MTD_INIT, ACC_PRIVATE, CONSTRUCTOR_BUILDER)\n@@ -1269,1 +1270,1 @@\n-                                        ClassFile.ACC_STATIC | ClassFile.ACC_PRIVATE,\n+                                        ACC_STATIC | ACC_PRIVATE,\n@@ -1280,1 +1281,1 @@\n-                                        ClassFile.ACC_STATIC | ClassFile.ACC_PRIVATE,\n+                                        ACC_STATIC | ACC_PRIVATE,\n@@ -1291,1 +1292,1 @@\n-                                        ClassFile.ACC_FINAL | ClassFile.ACC_PRIVATE,\n+                                        ACC_FINAL | ACC_PRIVATE,\n@@ -1297,1 +1298,6 @@\n-                                                mb.withCode(generateConcatMethod(concatClass, concatArgs, lengthArgs, coderArgs, prependArgs));\n+                                                mb.withCode(generateConcatMethod(\n+                                                        concatClass,\n+                                                        concatArgs,\n+                                                        lengthArgs,\n+                                                        coderArgs,\n+                                                        prependArgs));\n@@ -1300,0 +1306,1 @@\n+\n@@ -1303,1 +1310,1 @@\n-                                        ClassFile.ACC_STATIC | ClassFile.ACC_PRIVATE,\n+                                        ACC_STATIC | ACC_PRIVATE,\n@@ -1377,1 +1384,1 @@\n-         *                     String str4, String str6, String str6, String str7) {\n+         *                     String str4, String str5, String str6, String str7) {\n@@ -1488,1 +1495,1 @@\n-                     * suffix = constants[paranCount];\n+                     * suffix  = constants[paranCount];\n@@ -1642,1 +1649,1 @@\n-         *                String str4, String str6, String str6, String str7) {\n+         *                String str4, String str5, String str6, String str7) {\n","filename":"src\/java.base\/share\/classes\/java\/lang\/invoke\/StringConcatFactory.java","additions":30,"deletions":23,"binary":false,"changes":53,"status":"modified"}]}