{"files":[{"patch":"@@ -24,18 +24,17 @@\n- package compiler.vectorapi;\n-\n- import java.util.Random;\n- import jdk.incubator.vector.IntVector;\n- import jdk.incubator.vector.ShortVector;\n- import jdk.incubator.vector.VectorOperators;\n- import jdk.incubator.vector.VectorSpecies;\n- import jdk.test.lib.Asserts;\n- import jdk.test.lib.Utils;\n-\n- \/*\n-  * @test\n-  * @bug 8351627\n-  * @summary C2 AArch64 ROR\/ROL: assert((1 << ((T>>1)+3)) > shift) failed: Invalid Shift value\n-  * @modules jdk.incubator.vector\n-  * @library \/test\/lib\n-  * @run main\/othervm -XX:-TieredCompilation compiler.vectorapi.TestRotateWithZero\n-  *\/\n+package compiler.vectorapi;\n+\n+import compiler.lib.generators.*;\n+import jdk.incubator.vector.IntVector;\n+import jdk.incubator.vector.ShortVector;\n+import jdk.incubator.vector.VectorOperators;\n+import jdk.incubator.vector.VectorSpecies;\n+import jdk.test.lib.Asserts;\n+\n+\/*\n+ * @test\n+ * @bug 8351627\n+ * @summary C2 AArch64 ROR\/ROL: assert((1 << ((T>>1)+3)) > shift) failed: Invalid Shift value\n+ * @modules jdk.incubator.vector\n+ * @library \/test\/lib \/\n+ * @run main\/othervm -XX:-TieredCompilation compiler.vectorapi.TestRotateWithZero\n+ *\/\n@@ -45,0 +44,1 @@\n+    private static final Generators random = Generators.G;\n@@ -47,1 +47,0 @@\n-    private static final Random random = Utils.getRandomInstance();\n@@ -64,0 +63,2 @@\n+        random.fill(random.ints(), arr1);\n+        Generator<Integer> shortGen = random.uniformInts(Short.MIN_VALUE, Short.MAX_VALUE);\n@@ -65,3 +66,1 @@\n-            arr1[i] = random.nextInt();\n-            arr2[i] = 0;\n-            sarr1[i] = (short)random.nextInt();\n+            sarr1[i] = shortGen.next().shortValue();\n@@ -69,0 +68,1 @@\n+            arr2[i] = 0;\n@@ -80,1 +80,0 @@\n-        IntVector vzero = IntVector.zero(I_SPECIES);\n@@ -141,1 +140,0 @@\n-        ShortVector vzero = ShortVector.zero(S_SPECIES);\n","filename":"test\/hotspot\/jtreg\/compiler\/vectorapi\/TestRotateWithZero.java","additions":22,"deletions":24,"binary":false,"changes":46,"status":"modified"}]}