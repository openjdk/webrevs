{"files":[{"patch":"@@ -142,5 +142,0 @@\n-\n-  # Workaround stylesheet bug\n-  HEADER_STYLE := style=\"margin-top: 9px;\"\n-else\n-  HEADER_STYLE := style=\"margin-top: 14px;\"\n@@ -342,1 +337,1 @@\n-  $1_HEADER_TITLE := <div $$(HEADER_STYLE)><strong>$$($1_SHORT_NAME)<\/strong> \\\n+  $1_HEADER_TITLE := <div><strong>$$($1_SHORT_NAME)<\/strong> \\\n","filename":"make\/Docs.gmk","additions":1,"deletions":6,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -223,0 +223,1 @@\n+            writer.tableOfContents.addLink(HtmlIds.forMemberSummary(kind), getSummaryLabel());\n@@ -309,0 +310,14 @@\n+    private Content getSummaryLabel() {\n+        return switch (kind) {\n+            case FIELDS -> contents.fieldSummaryLabel;\n+            case METHODS -> contents.methodSummary;\n+            case CONSTRUCTORS -> contents.constructorSummaryLabel;\n+            case ENUM_CONSTANTS -> contents.enumConstantSummary;\n+            case NESTED_CLASSES -> contents.nestedClassSummary;\n+            case PROPERTIES -> contents.propertySummaryLabel;\n+            case ANNOTATION_TYPE_MEMBER_OPTIONAL -> contents.annotateTypeOptionalMemberSummaryLabel;\n+            case ANNOTATION_TYPE_MEMBER_REQUIRED -> contents.annotateTypeRequiredMemberSummaryLabel;\n+            default -> throw new IllegalArgumentException(kind.toString());\n+        };\n+    }\n+\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/AbstractMemberWriter.java","additions":16,"deletions":1,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -93,0 +93,2 @@\n+            writer.tableOfContents.addLink(HtmlIds.ANNOTATION_TYPE_ELEMENT_DETAIL, contents.annotationTypeDetailsLabel);\n+            writer.tableOfContents.pushNestedList();\n@@ -101,0 +103,2 @@\n+                writer.tableOfContents.addLink(htmlIds.forMember(typeElement, (ExecutableElement) member),\n+                        Text.of(name(member)));\n@@ -104,0 +108,1 @@\n+            writer.tableOfContents.popNestedList();\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/AnnotationTypeMemberWriter.java","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,0 +37,1 @@\n+import javax.lang.model.element.ModuleElement;\n@@ -45,0 +46,1 @@\n+import jdk.javadoc.internal.doclets.formats.html.markup.Text;\n@@ -421,9 +423,13 @@\n-        Content mdleLinkContent = getModuleLink(utils.elementUtils.getModuleOf(typeElement),\n-                contents.moduleLabel);\n-        Content classLinkContent = getLink(new HtmlLinkInfo(\n-                configuration, HtmlLinkInfo.Kind.PLAIN, typeElement)\n-                .label(resources.getText(\"doclet.Class\"))\n-                .skipPreview(true));\n-        return super.getNavBar(pageMode, element)\n-                .setNavLinkModule(mdleLinkContent)\n-                .setNavLinkClass(classLinkContent);\n+        List<Content> subnavLinks = new ArrayList<>();\n+        if (configuration.showModules) {\n+            ModuleElement mdle = utils.elementUtils.getModuleOf(typeElement);\n+            subnavLinks.add(getModuleLink(mdle, Text.of(mdle.getQualifiedName())));\n+        }\n+        PackageElement pkg = utils.containingPackage(typeElement);\n+        subnavLinks.add(getPackageLink(pkg, getLocalizedPackageName(pkg)));\n+        subnavLinks.add(getLink(\n+                new HtmlLinkInfo(configuration, HtmlLinkInfo.Kind.PLAIN, typeElement)\n+                        .style(HtmlStyle.currentSelection)\n+                        .skipPreview(true)));\n+\n+        return super.getNavBar(pageMode, element).setSubNavLinks(subnavLinks);\n@@ -432,0 +438,1 @@\n+\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/ClassUseWriter.java","additions":17,"deletions":10,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -51,1 +51,0 @@\n-import jdk.javadoc.internal.doclets.formats.html.markup.Entity;\n@@ -64,1 +63,0 @@\n-import jdk.javadoc.internal.doclets.toolkit.util.VisibleMemberTable;\n@@ -438,18 +436,0 @@\n-        if (configuration.showModules) {\n-            ModuleElement mdle = configuration.docEnv.getElementUtils().getModuleOf(typeElement);\n-            var classModuleLabel = HtmlTree.SPAN(HtmlStyle.moduleLabelInType, contents.moduleLabel);\n-            var moduleNameDiv = HtmlTree.DIV(HtmlStyle.subTitle, classModuleLabel);\n-            moduleNameDiv.add(Entity.NO_BREAK_SPACE);\n-            moduleNameDiv.add(getModuleLink(mdle,\n-                    Text.of(mdle.getQualifiedName())));\n-            div.add(moduleNameDiv);\n-        }\n-        PackageElement pkg = utils.containingPackage(typeElement);\n-        if (!pkg.isUnnamed()) {\n-            var classPackageLabel = HtmlTree.SPAN(HtmlStyle.packageLabelInType, contents.packageLabel);\n-            var pkgNameDiv = HtmlTree.DIV(HtmlStyle.subTitle, classPackageLabel);\n-            pkgNameDiv.add(Entity.NO_BREAK_SPACE);\n-            Content pkgNameContent = getPackageLink(pkg, getLocalizedPackageName(pkg));\n-            pkgNameDiv.add(pkgNameContent);\n-            div.add(pkgNameDiv);\n-        }\n@@ -475,15 +455,11 @@\n-        Content linkContent = getModuleLink(utils.elementUtils.getModuleOf(element),\n-                contents.moduleLabel);\n-        return super.getNavBar(pageMode, element)\n-                .setNavLinkModule(linkContent)\n-                .setSubNavLinks(() -> {\n-                    List<Content> list = new ArrayList<>();\n-                    VisibleMemberTable vmt = configuration.getVisibleMemberTable(typeElement);\n-                    Set<VisibleMemberTable.Kind> summarySet =\n-                            VisibleMemberTable.Kind.forSummariesOf(element.getKind());\n-                    for (VisibleMemberTable.Kind kind : summarySet) {\n-                        list.add(links.createLink(HtmlIds.forMemberSummary(kind),\n-                                contents.getNavLinkLabelContent(kind), vmt.hasVisibleMembers(kind)));\n-                    }\n-                    return list;\n-                });\n+        List<Content> subnavLinks = new ArrayList<>();\n+        if (configuration.showModules) {\n+            ModuleElement mdle = configuration.docEnv.getElementUtils().getModuleOf(typeElement);\n+            subnavLinks.add(getModuleLink(mdle, Text.of(mdle.getQualifiedName())));\n+        }\n+        PackageElement pkg = utils.containingPackage(typeElement);\n+        subnavLinks.add(getPackageLink(pkg, getLocalizedPackageName(pkg)));\n+        subnavLinks.add(getLink(new HtmlLinkInfo(configuration, HtmlLinkInfo.Kind.PLAIN, typeElement)\n+                        .style(HtmlStyle.currentSelection)\n+                        .skipPreview(true)));\n+        return super.getNavBar(pageMode, element).setSubNavLinks(subnavLinks);\n@@ -523,0 +499,1 @@\n+        tableOfContents.addLink(HtmlIds.TOP_OF_PAGE, contents.descriptionLabel);\n@@ -526,0 +503,1 @@\n+                tableOfContents.pushNestedList();\n@@ -527,0 +505,1 @@\n+                tableOfContents.popNestedList();\n@@ -538,0 +517,1 @@\n+            tableOfContents.pushNestedList();\n@@ -539,0 +519,1 @@\n+            tableOfContents.popNestedList();\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/ClassWriter.java","additions":17,"deletions":36,"binary":false,"changes":53,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -53,1 +53,0 @@\n-import jdk.javadoc.internal.doclets.toolkit.util.DocLink;\n@@ -147,1 +146,2 @@\n-        Content contentList = getContentsHeader();\n+        tableOfContents.addLink(HtmlIds.TOP_OF_PAGE, Text.of(resources.getText(\"doclet.Constants_Summary\")))\n+                .pushNestedList();\n@@ -152,1 +152,1 @@\n-                addLinkToPackageContent(abbrevPackageName, contentList);\n+                addLinkToTableOfContents(abbrevPackageName);\n@@ -156,1 +156,2 @@\n-        addContentsList(contentList);\n+        tableOfContents.popNestedList();\n+        bodyContents.setSideContent(tableOfContents.toContent(true));\n@@ -325,4 +326,9 @@\n-        String label = resources.getText(\"doclet.Constants_Summary\");\n-        HtmlTree body = getBody(getWindowTitle(label));\n-        bodyContents.setHeader(getHeader(PageMode.CONSTANT_VALUES));\n-        return body;\n+         String label = resources.getText(\"doclet.Constants_Summary\");\n+         HtmlTree body = getBody(getWindowTitle(label));\n+         bodyContents.setHeader(getHeader(PageMode.CONSTANT_VALUES));\n+         Content titleContent = contents.constantsSummaryTitle;\n+         var pHeading = HtmlTree.HEADING_TITLE(Headings.PAGE_TITLE_HEADING,\n+                 HtmlStyle.title, titleContent);\n+         var div = HtmlTree.DIV(HtmlStyle.header, pHeading);\n+         bodyContents.addMainContent(div);\n+         return body;\n@@ -331,1 +337,1 @@\n-     Content getContentsHeader() {\n+    Content getContentsHeader() {\n@@ -335,3 +341,1 @@\n-     void addLinkToPackageContent(String abbrevPackageName, Content content) {\n-        \/\/add link to summary\n-        Content link;\n+    void addLinkToTableOfContents(String abbrevPackageName) {\n@@ -339,2 +343,1 @@\n-            link = links.createLink(HtmlIds.UNNAMED_PACKAGE_ANCHOR,\n-                    contents.defaultPackageLabel, \"\");\n+            tableOfContents.addLink(HtmlIds.UNNAMED_PACKAGE_ANCHOR, contents.defaultPackageLabel);\n@@ -342,3 +345,1 @@\n-            Content packageNameContent = Text.of(abbrevPackageName + \".*\");\n-            link = links.createLink(DocLink.fragment(abbrevPackageName),\n-                    packageNameContent, \"\");\n+            tableOfContents.addLink(HtmlId.of(abbrevPackageName), Text.of(abbrevPackageName + \".*\"));\n@@ -346,15 +347,0 @@\n-        content.add(HtmlTree.LI(link));\n-    }\n-\n-     void addContentsList(Content content) {\n-        Content titleContent = contents.constantsSummaryTitle;\n-        var pHeading = HtmlTree.HEADING_TITLE(Headings.PAGE_TITLE_HEADING,\n-                HtmlStyle.title, titleContent);\n-        var div = HtmlTree.DIV(HtmlStyle.header, pHeading);\n-        bodyContents.addMainContent(div);\n-        Content headingContent = contents.contentsHeading;\n-        var heading = HtmlTree.HEADING_TITLE(Headings.CONTENT_HEADING,\n-                headingContent);\n-        var section = HtmlTree.SECTION(HtmlStyle.packages, heading);\n-        section.add(content);\n-        bodyContents.addMainContent(section);\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/ConstantsSummaryWriter.java","additions":19,"deletions":33,"binary":false,"changes":52,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -105,0 +105,2 @@\n+            writer.tableOfContents.addLink(HtmlIds.CONSTRUCTOR_DETAIL, contents.constructorDetailsLabel);\n+            writer.tableOfContents.pushNestedList();\n@@ -117,0 +119,3 @@\n+                writer.tableOfContents.addLink(htmlIds.forMember(currentConstructor),\n+                        Text.of(utils.getSimpleName(constructor)\n+                                + utils.makeSignature(currentConstructor, typeElement, false, true)));\n@@ -120,0 +125,1 @@\n+            writer.tableOfContents.popNestedList();\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/ConstructorWriter.java","additions":7,"deletions":1,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -107,0 +107,1 @@\n+    public final Content hideSidebar;\n@@ -172,0 +173,1 @@\n+    public final Content searchLabel;\n@@ -175,0 +177,1 @@\n+    public final Content showSidebar;\n@@ -182,0 +185,1 @@\n+    public final Content tableOfContentsLabel;\n@@ -256,0 +260,1 @@\n+        hideSidebar = getContent(\"doclet.hide_sidebar\");\n@@ -321,0 +326,1 @@\n+        searchLabel = getContent(\"doclet.search\");\n@@ -324,0 +330,1 @@\n+        showSidebar = getContent(\"doclet.show_sidebar\");\n@@ -331,0 +338,1 @@\n+        tableOfContentsLabel = getContent(\"doclet.table_of_contents\");\n@@ -437,1 +445,1 @@\n-    public Content join(Content separator, Collection<Content> items) {\n+    public Content join(Content separator, Collection<? extends Content> items) {\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/Contents.java","additions":10,"deletions":2,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -110,1 +110,1 @@\n-                        HtmlTree.INPUT(\"checkbox\", htmlId)\n+                        HtmlTree.INPUT(HtmlAttr.InputType.CHECKBOX, htmlId)\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/DeprecatedListWriter.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,0 +33,1 @@\n+import jdk.javadoc.internal.doclets.formats.html.markup.HtmlStyle;\n@@ -34,0 +35,1 @@\n+import jdk.javadoc.internal.doclets.formats.html.markup.Text;\n@@ -218,0 +220,1 @@\n+            List<Content> subnavLinks = new ArrayList<>();\n@@ -219,6 +222,11 @@\n-            Content mdleLinkContent = getModuleLink(utils.elementUtils.getModuleOf(element),\n-                    contents.moduleLabel);\n-            Content pkgLinkContent = getPackageLink(pkg, contents.packageLabel);\n-            return super.getNavBar(pageMode, element)\n-                    .setNavLinkModule(mdleLinkContent)\n-                    .setNavLinkPackage(pkgLinkContent);\n+            if (configuration.showModules) {\n+                var mdle = utils.elementUtils.getModuleOf(element);\n+                subnavLinks.add(links.createLink(pathToRoot.resolve(docPaths.moduleSummary(mdle)),\n+                        Text.of(mdle.getQualifiedName()),\n+                        pkg.isUnnamed() ? HtmlStyle.currentSelection : null, \"\"));\n+            }\n+            if (!pkg.isUnnamed()) {\n+                subnavLinks.add(links.createLink(pathString(pkg, DocPaths.PACKAGE_SUMMARY),\n+                        getLocalizedPackageName(pkg), HtmlStyle.currentSelection, \"\"));\n+            }\n+            return super.getNavBar(pageMode, element).setSubNavLinks(subnavLinks);\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/DocFilesHandler.java","additions":15,"deletions":7,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -72,0 +72,2 @@\n+            writer.tableOfContents.addLink(HtmlIds.ENUM_CONSTANT_DETAIL, contents.enumConstantDetailLabel);\n+            writer.tableOfContents.pushNestedList();\n@@ -84,0 +86,1 @@\n+                writer.tableOfContents.addLink(htmlIds.forMember(currentElement), Text.of(name(currentElement)));\n@@ -88,0 +91,1 @@\n+            writer.tableOfContents.popNestedList();\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/EnumConstantWriter.java","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -82,0 +82,2 @@\n+            writer.tableOfContents.addLink(HtmlIds.FIELD_DETAIL, contents.fieldDetailsLabel);\n+            writer.tableOfContents.pushNestedList();\n@@ -94,0 +96,1 @@\n+                writer.tableOfContents.addLink(htmlIds.forMember(currentElement), Text.of(name(element)));\n@@ -97,0 +100,1 @@\n+            writer.tableOfContents.popNestedList();\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/FieldWriter.java","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -125,10 +125,0 @@\n-\n-    \/**\n-     * Headings for index frames pages.\n-     *\/\n-    static class IndexFrames {\n-        \/** Heading for a list of module names in an index frame. *\/\n-        static final TagName MODULE_HEADING = TagName.H2;\n-        \/** Heading for a list of package names in an index frame. *\/\n-        static final TagName PACKAGE_HEADING = TagName.H2;\n-    }\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/Headings.java","additions":1,"deletions":11,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,1 +29,0 @@\n-import javax.lang.model.element.Element;\n@@ -40,1 +39,0 @@\n-import jdk.javadoc.internal.doclets.toolkit.util.DocLink;\n@@ -88,0 +86,1 @@\n+                .setSideContent(tableOfContents.toContent(false))\n@@ -104,5 +103,4 @@\n-        var mainTOC = HtmlTree.UL(HtmlStyle.helpTOC);\n-\n-        content.add(HtmlTree.HEADING(Headings.PAGE_TITLE_HEADING, HtmlStyle.title,\n-                                        getContent(\"doclet.help.main_heading\")))\n-                .add(mainTOC)\n+        var mainHeading = getContent(\"doclet.help.main_heading\");\n+        tableOfContents.addLink(HtmlIds.TOP_OF_PAGE, mainHeading);\n+        tableOfContents.pushNestedList();\n+        content.add(HtmlTree.HEADING(Headings.PAGE_TITLE_HEADING, HtmlStyle.title, mainHeading))\n@@ -110,1 +108,1 @@\n-                .add(getNavigationSection(mainTOC))\n+                .add(getNavigationSection())\n@@ -112,1 +110,1 @@\n-                .add(getPageKindSection(mainTOC))\n+                .add(getPageKindSection())\n@@ -116,9 +114,1 @@\n-    }\n-\n-    @Override\n-    protected Navigation getNavBar(PageMode pageMode, Element element) {\n-        return super.getNavBar(pageMode, element)\n-                .setSubNavLinks(() -> List.of(\n-                        links.createLink(HtmlIds.HELP_NAVIGATION, contents.navHelpNavigation),\n-                        links.createLink(HtmlIds.HELP_PAGES, contents.navHelpPages))\n-                );\n+        tableOfContents.popNestedList();\n@@ -136,2 +126,0 @@\n-     * @param mainTOC the main table-of-contents\n-     *\n@@ -140,1 +128,1 @@\n-    private Content getNavigationSection(HtmlTree mainTOC) {\n+    private Content getNavigationSection() {\n@@ -159,1 +147,2 @@\n-        var subTOC = HtmlTree.UL(HtmlStyle.helpSubTOC);\n+        tableOfContents.addLink(HtmlIds.HELP_NAVIGATION, navHeading);\n+        tableOfContents.pushNestedList();\n@@ -165,1 +154,1 @@\n-            section = newHelpSection(getContent(\"doclet.help.search.head\"), PageMode.SEARCH, subTOC);\n+            section = newHelpSection(getContent(\"doclet.help.search.head\"), PageMode.SEARCH);\n@@ -167,1 +156,1 @@\n-            var searchExamples = HtmlTree.UL(HtmlStyle.helpSectionList);\n+            var searchExamples = HtmlTree.OL(HtmlStyle.tocList);\n@@ -182,4 +171,1 @@\n-\n-        mainTOC.add(HtmlTree.LI(new ContentBuilder(\n-                links.createLink(DocLink.fragment(HtmlIds.HELP_NAVIGATION.name()), navHeading),\n-                Text.of(\": \"), subTOC)));\n+        tableOfContents.popNestedList();\n@@ -203,2 +189,0 @@\n-     * @param mainTOC the main table-of-contents\n-     *\n@@ -207,1 +191,1 @@\n-    private Content getPageKindSection(HtmlTree mainTOC) {\n+    private Content getPageKindSection() {\n@@ -213,1 +197,2 @@\n-        var subTOC = HtmlTree.UL(HtmlStyle.helpSubTOC);\n+        tableOfContents.addLink(HtmlIds.HELP_PAGES, pageKindsHeading);\n+        tableOfContents.pushNestedList();\n@@ -219,1 +204,1 @@\n-            section = newHelpSection(contents.overviewLabel, PageMode.OVERVIEW, subTOC);\n+            section = newHelpSection(contents.overviewLabel, PageMode.OVERVIEW);\n@@ -229,1 +214,1 @@\n-            section = newHelpSection(contents.moduleLabel, PageMode.MODULE, subTOC);\n+            section = newHelpSection(contents.moduleLabel, PageMode.MODULE);\n@@ -241,1 +226,1 @@\n-        section = newHelpSection(contents.packageLabel, PageMode.PACKAGE, subTOC)\n+        section = newHelpSection(contents.packageLabel, PageMode.PACKAGE)\n@@ -263,1 +248,1 @@\n-        section = newHelpSection(getContent(\"doclet.help.class_interface.head\"), PageMode.CLASS, subTOC)\n+        section = newHelpSection(getContent(\"doclet.help.class_interface.head\"), PageMode.CLASS)\n@@ -294,1 +279,1 @@\n-        section = newHelpSection(getContent(\"doclet.help.other_files.head\"), PageMode.DOC_FILE, subTOC)\n+        section = newHelpSection(getContent(\"doclet.help.other_files.head\"), PageMode.DOC_FILE)\n@@ -300,1 +285,1 @@\n-            section = newHelpSection(getContent(\"doclet.help.use.head\"), PageMode.USE, subTOC)\n+            section = newHelpSection(getContent(\"doclet.help.use.head\"), PageMode.USE)\n@@ -307,1 +292,1 @@\n-            section = newHelpSection(getContent(\"doclet.help.tree.head\"), PageMode.TREE, subTOC);\n+            section = newHelpSection(getContent(\"doclet.help.tree.head\"), PageMode.TREE);\n@@ -320,1 +305,1 @@\n-            section = newHelpSection(contents.previewAPI, PageMode.PREVIEW, subTOC);\n+            section = newHelpSection(contents.previewAPI, PageMode.PREVIEW);\n@@ -329,1 +314,1 @@\n-            section = newHelpSection(contents.newAPI, PageMode.NEW, subTOC);\n+            section = newHelpSection(contents.newAPI, PageMode.NEW);\n@@ -338,1 +323,1 @@\n-            section = newHelpSection(contents.deprecatedAPI, PageMode.DEPRECATED, subTOC);\n+            section = newHelpSection(contents.deprecatedAPI, PageMode.DEPRECATED);\n@@ -347,1 +332,1 @@\n-            section = newHelpSection(contents.restrictedMethods, PageMode.RESTRICTED, subTOC);\n+            section = newHelpSection(contents.restrictedMethods, PageMode.RESTRICTED);\n@@ -356,1 +341,1 @@\n-            section = newHelpSection(contents.constantsSummaryTitle, PageMode.CONSTANT_VALUES, subTOC);\n+            section = newHelpSection(contents.constantsSummaryTitle, PageMode.CONSTANT_VALUES);\n@@ -365,1 +350,1 @@\n-            section = newHelpSection(contents.serializedForm, PageMode.SERIALIZED_FORM, subTOC)\n+            section = newHelpSection(contents.serializedForm, PageMode.SERIALIZED_FORM)\n@@ -372,1 +357,1 @@\n-            section = newHelpSection(contents.systemPropertiesLabel, PageMode.SYSTEM_PROPERTIES, subTOC);\n+            section = newHelpSection(contents.systemPropertiesLabel, PageMode.SYSTEM_PROPERTIES);\n@@ -381,1 +366,1 @@\n-            section = newHelpSection(contents.externalSpecifications, PageMode.EXTERNAL_SPECS, subTOC);\n+            section = newHelpSection(contents.externalSpecifications, PageMode.EXTERNAL_SPECS);\n@@ -391,1 +376,1 @@\n-                section = newHelpSection(getContent(\"doclet.help.all_packages.head\"), PageMode.ALL_PACKAGES, subTOC)\n+                section = newHelpSection(getContent(\"doclet.help.all_packages.head\"), PageMode.ALL_PACKAGES)\n@@ -396,1 +381,1 @@\n-            section = newHelpSection(getContent(\"doclet.help.all_classes.head\"), PageMode.ALL_CLASSES, subTOC)\n+            section = newHelpSection(getContent(\"doclet.help.all_classes.head\"), PageMode.ALL_CLASSES)\n@@ -406,1 +391,1 @@\n-            section = newHelpSection(getContent(\"doclet.help.index.head\"), PageMode.INDEX, subTOC)\n+            section = newHelpSection(getContent(\"doclet.help.index.head\"), PageMode.INDEX)\n@@ -410,4 +395,1 @@\n-\n-        mainTOC.add(HtmlTree.LI(new ContentBuilder(\n-                links.createLink(DocLink.fragment(HtmlIds.HELP_PAGES.name()), pageKindsHeading),\n-                Text.of(\": \"), subTOC)));\n+        tableOfContents.popNestedList();\n@@ -430,3 +412,2 @@\n-    private HtmlTree newHelpSection(Content headingContent, HtmlTree toc, HtmlId id) {\n-        Content link = links.createLink(DocLink.fragment(id.name()), headingContent);\n-        toc.add(HtmlTree.LI(link));\n+    private HtmlTree newHelpSection(Content headingContent, HtmlId id) {\n+        tableOfContents.addLink(id, headingContent);\n@@ -439,2 +420,2 @@\n-    private HtmlTree newHelpSection(Content headingContent, Navigation.PageMode pm, HtmlTree toc) {\n-        return newHelpSection(headingContent, toc, htmlIds.forPage(pm));\n+    private HtmlTree newHelpSection(Content headingContent, Navigation.PageMode pm) {\n+        return newHelpSection(headingContent, htmlIds.forPage(pm));\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/HelpWriter.java","additions":41,"deletions":60,"binary":false,"changes":101,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -236,1 +236,0 @@\n-        boolean nodeprecated = options.noDeprecated();\n@@ -312,1 +311,1 @@\n-        copyResource(DocPaths.SCRIPT_JS, DocPaths.SCRIPT_FILES.resolve(DocPaths.SCRIPT_JS), true);\n+        copyResource(DocPaths.SCRIPT_JS_TEMPLATE, DocPaths.SCRIPT_FILES.resolve(DocPaths.SCRIPT_JS), true);\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/HtmlDoclet.java","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,0 +34,1 @@\n+import java.util.LinkedHashMap;\n@@ -73,0 +74,1 @@\n+import com.sun.source.doctree.IndexTree;\n@@ -85,0 +87,1 @@\n+import jdk.javadoc.internal.doclets.formats.html.markup.HtmlAttr;\n@@ -90,0 +93,1 @@\n+import jdk.javadoc.internal.doclets.formats.html.markup.ListBuilder;\n@@ -165,0 +169,2 @@\n+    protected final TableOfContents tableOfContents;\n+\n@@ -220,0 +226,1 @@\n+        this.tableOfContents = new TableOfContents(this);\n@@ -1468,0 +1475,9 @@\n+            } else if (docTree instanceof IndexTree index) {\n+                DocTree searchTerm = index.getSearchTerm();\n+                String tagText = (searchTerm instanceof TextTree tt) ? tt.getBody() : \"\";\n+                if (tagText.charAt(0) == '\"' && tagText.charAt(tagText.length() - 1) == '\"') {\n+                    tagText = tagText.substring(1, tagText.length() - 1);\n+                }\n+                sb.append(tagText);\n+            } else if (docTree instanceof EntityTree entity) {\n+                sb.append(utils.docTrees.getCharacters(entity));\n@@ -1486,0 +1502,2 @@\n+        } else {\n+            headingIds.add(id);\n@@ -1496,0 +1514,4 @@\n+        \/\/ Record second-level headings for use in table of contents\n+        if (tableOfContents != null && node.getName().toString().equalsIgnoreCase(\"h2\")) {\n+            tableOfContents.addLink(HtmlId.of(id), Text.of(headingContent));\n+        }\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/HtmlDocletWriter.java","additions":23,"deletions":1,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2021, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2021, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -70,0 +70,1 @@\n+    static final HtmlId TOP_OF_PAGE = HtmlId.of(\"\"); \/\/ empty fragment\/id indicates top of page\n@@ -93,1 +94,0 @@\n-    static final HtmlId NAVBAR_SUB_LIST = HtmlId.of(\"navbar-sub-list\");\n@@ -104,1 +104,1 @@\n-    static final HtmlId RESET_BUTTON = HtmlId.of(\"reset-button\");\n+    static final HtmlId RESET_SEARCH = HtmlId.of(\"reset-search\");\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/HtmlIds.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,1 +32,0 @@\n-import java.util.function.Consumer;\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/HtmlLinkFactory.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -88,1 +88,1 @@\n-    private String fragment = \"\";\n+    private String fragment = null;\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/HtmlLinkInfo.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -288,1 +288,1 @@\n-            List<? extends DeprecatedTree> tags = utils.getDeprecatedTrees(element);\n+            var tags = utils.getDeprecatedTrees(element);\n@@ -290,1 +290,1 @@\n-                addInlineDeprecatedComment(element, tags.get(0), div);\n+                addInlineDeprecatedComment(element, tags.getFirst(), div);\n@@ -353,1 +353,1 @@\n-        List<Content> pageLinks = Stream.of(IndexItem.Category.values())\n+        var pageLinks = Stream.of(IndexItem.Category.values())\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/IndexWriter.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -104,0 +104,2 @@\n+            writer.tableOfContents.addLink(HtmlIds.METHOD_DETAIL, contents.methodDetailLabel);\n+            writer.tableOfContents.pushNestedList();\n@@ -117,0 +119,3 @@\n+                writer.tableOfContents.addLink(htmlIds.forMember(currentMethod),\n+                        Text.of(utils.getSimpleName(method)\n+                                + utils.makeSignature(currentMethod, typeElement, false, true)));\n@@ -120,0 +125,1 @@\n+            writer.tableOfContents.popNestedList();\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/MethodWriter.java","additions":7,"deletions":1,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -254,0 +254,1 @@\n+        tableOfContents.addLink(HtmlIds.TOP_OF_PAGE, contents.navDescription);\n@@ -255,0 +256,1 @@\n+            tableOfContents.pushNestedList();\n@@ -256,0 +258,1 @@\n+            tableOfContents.popNestedList();\n@@ -277,10 +280,4 @@\n-                .setSubNavLinks(() -> List.of(\n-                        links.createLink(HtmlIds.MODULE_DESCRIPTION, contents.navDescription,\n-                            !utils.getFullBody(mdle).isEmpty() && !options.noComment()),\n-                        links.createLink(HtmlIds.MODULES, contents.navModules,\n-                            display(requires) || display(indirectModules)),\n-                        links.createLink(HtmlIds.PACKAGES, contents.navPackages,\n-                            display(packages) || display(indirectPackages) || display(indirectOpenPackages)),\n-                        links.createLink(HtmlIds.SERVICES, contents.navServices,\n-                            displayServices(uses, usesTrees) || displayServices(provides.keySet(), providesTrees))\n-                ));\n+                .setSubNavLinks(List.of(\n+                    links.createLink(pathToRoot.resolve(docPaths.moduleSummary(mdle)),\n+                            Text.of(mdle.getQualifiedName()),\n+                            HtmlStyle.currentSelection, \"\")));\n@@ -539,0 +536,1 @@\n+            tableOfContents.addLink(HtmlIds.MODULES, contents.navModules);\n@@ -583,0 +581,1 @@\n+            tableOfContents.addLink(HtmlIds.PACKAGES, contents.navPackages);\n@@ -753,0 +752,1 @@\n+            tableOfContents.addLink(HtmlIds.SERVICES, contents.navServices);\n@@ -892,0 +892,1 @@\n+        bodyContents.setSideContent(tableOfContents.toContent(false));\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/ModuleWriter.java","additions":12,"deletions":11,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -30,1 +30,0 @@\n-import java.util.Set;\n@@ -70,3 +69,0 @@\n-    private Content navLinkModule;\n-    private Content navLinkPackage;\n-    private Content navLinkClass;\n@@ -75,3 +71,1 @@\n-    private final Content searchLabel;\n-    private final String searchPlaceholder;\n-    private SubNavLinks subNavLinks;\n+    private List<Content> subNavLinks = List.of();\n@@ -102,12 +96,0 @@\n-    \/**\n-     * An interface to provide links for the subnavigation area.\n-     *\/\n-    public interface SubNavLinks {\n-        \/**\n-         * {@return a list of links to display in the subnavigation area}\n-         * Links should be wrapped in {@code HtmlTree.LI} elements as they are\n-         * displayed within an unordered list.\n-         *\/\n-        List<Content> getSubNavLinks();\n-    }\n-\n@@ -134,17 +116,0 @@\n-        this.searchLabel = contents.getContent(\"doclet.search\");\n-        this.searchPlaceholder = configuration.getDocResources().getText(\"doclet.search_placeholder\");\n-    }\n-\n-    public Navigation setNavLinkModule(Content navLinkModule) {\n-        this.navLinkModule = navLinkModule;\n-        return this;\n-    }\n-\n-    public Navigation setNavLinkPackage(Content navLinkPackage) {\n-        this.navLinkPackage = navLinkPackage;\n-        return this;\n-    }\n-\n-    public Navigation setNavLinkClass(Content navLinkClass) {\n-        this.navLinkClass = navLinkClass;\n-        return this;\n@@ -158,1 +123,1 @@\n-    public Navigation setSubNavLinks(SubNavLinks subNavLinks) {\n+    public Navigation setSubNavLinks(List<Content> subNavLinks) {\n@@ -172,4 +137,0 @@\n-                addModuleLink(target);\n-                addPackageLink(target);\n-                addPageLabel(target, contents.classLabel, true);\n-                addPageLabel(target, contents.useLabel, options.classUse());\n@@ -181,0 +142,1 @@\n+                addSearchLink(target);\n@@ -186,3 +148,0 @@\n-                addPackageLink(target);\n-                addPageLabel(target, contents.classLabel, true);\n-                addPageLabel(target, contents.useLabel, options.classUse());\n@@ -194,0 +153,1 @@\n+                addSearchLink(target);\n@@ -198,1 +158,0 @@\n-                addModuleOfElementLink(target);\n@@ -200,1 +159,0 @@\n-                addPageLabel(target, contents.classLabel, true);\n@@ -213,0 +171,1 @@\n+                addSearchLink(target);\n@@ -217,2 +176,0 @@\n-                addModuleOfElementLink(target);\n-                addPackageSummaryLink(target);\n@@ -232,0 +189,1 @@\n+                addSearchLink(target);\n@@ -236,7 +194,4 @@\n-                addModuleOfElementLink(target);\n-                if (element instanceof PackageElement) {\n-                    addPackageSummaryLink(target);\n-                    addPageLabel(target, contents.classLabel, true);\n-                } else {\n-                    addPackageOfElementLink(target);\n-                    addItemToList(target, navLinkClass);\n+                \/\/ Class-use page is still generated for deprecated classes with\n+                \/\/ -nodeprecated option, make sure not to link to non-existent page.\n+                if (!options.noDeprecated() || !configuration.utils.isDeprecated(element)) {\n+                    addPageElementLink(target);\n@@ -245,6 +200,8 @@\n-                if (element instanceof PackageElement) {\n-                    addItemToList(target, links.createLink(DocPaths.PACKAGE_TREE, contents.treeLabel));\n-                } else {\n-                    addItemToList(target, configuration.utils.isEnclosingPackageIncluded((TypeElement) element)\n-                            ? links.createLink(DocPath.parent.resolve(DocPaths.PACKAGE_TREE), contents.treeLabel)\n-                            : links.createLink(pathToRoot.resolve(DocPaths.OVERVIEW_TREE), contents.treeLabel));\n+                if (options.createTree()) {\n+                    if (configuration.utils.isPackage(element)) {\n+                        addItemToList(target, links.createLink(DocPaths.PACKAGE_TREE, contents.treeLabel));\n+                    } else {\n+                        addItemToList(target, configuration.utils.isEnclosingPackageIncluded((TypeElement) element)\n+                                ? links.createLink(DocPath.parent.resolve(DocPaths.PACKAGE_TREE), contents.treeLabel)\n+                                : links.createLink(pathToRoot.resolve(DocPaths.OVERVIEW_TREE), contents.treeLabel));\n+                    }\n@@ -256,0 +213,1 @@\n+                addSearchLink(target);\n@@ -260,6 +218,7 @@\n-                if (element == null) {\n-                    addPageLabel(target, contents.moduleLabel, configuration.showModules);\n-                    addPageLabel(target, contents.packageLabel, true);\n-                } else {\n-                    addModuleOfElementLink(target);\n-                    addPackageSummaryLink(target);\n+                if (element != null && !configuration.utils.isModule(element)) {\n+                    addPageElementLink(target);\n+                    if (options.classUse()) {\n+                        if (configuration.utils.isPackage(element) || configuration.utils.isTypeElement(element)) {\n+                            addItemToList(target, links.createLink(DocPaths.PACKAGE_USE, contents.useLabel));\n+                        }\n+                    }\n@@ -267,2 +226,0 @@\n-                addPageLabel(target, contents.classLabel, true);\n-                addPageLabel(target, contents.useLabel, options.classUse());\n@@ -274,0 +231,1 @@\n+                addSearchLink(target);\n@@ -281,0 +239,1 @@\n+            case SEARCH:\n@@ -282,4 +241,0 @@\n-                addModuleLink(target);\n-                addPackageLink(target);\n-                addPageLabel(target, contents.classLabel, true);\n-                addPageLabel(target, contents.useLabel, options.classUse());\n@@ -310,0 +265,5 @@\n+                if (documentedPage == PageMode.SEARCH) {\n+                    addActivePageLink(target, contents.searchLabel, options.createIndex());\n+                } else {\n+                    addSearchLink(target);\n+                }\n@@ -322,1 +282,0 @@\n-            case SEARCH:\n@@ -325,4 +284,0 @@\n-                addModuleLink(target);\n-                addPackageLink(target);\n-                addPageLabel(target, contents.classLabel, true);\n-                addPageLabel(target, contents.useLabel, options.classUse());\n@@ -334,0 +289,1 @@\n+                addSearchLink(target);\n@@ -338,5 +294,17 @@\n-                addModuleOfElementLink(target);\n-                addItemToList(target, navLinkPackage);\n-                addPageLabel(target, contents.classLabel, true);\n-                addPageLabel(target, contents.useLabel, options.classUse());\n-                addTreeLink(target);\n+                if (element != null) {\n+                    addPageElementLink(target);\n+                    if (options.classUse()) {\n+                        if (configuration.utils.isPackage(element)) {\n+                            addItemToList(target, links.createLink(pathToRoot.resolve(\n+                                    configuration.docPaths.forPackage((PackageElement) element)\n+                                            .resolve(DocPaths.PACKAGE_USE)), contents.useLabel));\n+                        }\n+                    }\n+                    if (options.createTree() && configuration.utils.isPackage(element)) {\n+                        addItemToList(target, links.createLink(pathToRoot.resolve(\n+                                configuration.docPaths.forPackage((PackageElement) element)\n+                                        .resolve(DocPaths.PACKAGE_TREE)), contents.treeLabel));\n+                    } else {\n+                        addTreeLink(target);\n+                    }\n+                }\n@@ -347,0 +315,1 @@\n+                addSearchLink(target);\n@@ -358,32 +327,0 @@\n-     * @param nested whether to create a flat or nested list\n-     *\/\n-    private void addSummaryLinks(Content target, boolean nested) {\n-        switch (documentedPage) {\n-            case MODULE, PACKAGE, CLASS, HELP -> {\n-                List<? extends Content> listContents = subNavLinks.getSubNavLinks()\n-                        .stream().map(HtmlTree::LI).toList();\n-                if (!listContents.isEmpty()) {\n-                Content label = switch (documentedPage) {\n-                        case MODULE -> contents.moduleSubNavLabel;\n-                        case PACKAGE -> contents.packageSubNavLabel;\n-                        case CLASS -> contents.summaryLabel;\n-                        case HELP -> contents.helpSubNavLabel;\n-                        default -> Text.EMPTY;\n-                    };\n-                    if (nested) {\n-                        target.add(HtmlTree.LI(HtmlTree.P(label))\n-                                .add(new HtmlTree(TagName.UL).add(listContents)));\n-                    } else {\n-                        target.add(HtmlTree.LI(label).add(Entity.NO_BREAK_SPACE));\n-                        addListToNav(listContents, target);\n-                    }\n-                }\n-            }\n-        }\n-    }\n-\n-    \/**\n-     * Adds the detail links to subnavigation.\n-     *\n-     * @param target the content to which the links will be added\n-     * @param nested whether to create a flat or nested list\n@@ -391,20 +328,4 @@\n-    private void addDetailLinks(Content target, boolean nested) {\n-        if (documentedPage == PageMode.CLASS) {\n-            List<Content> listContents = new ArrayList<>();\n-            VisibleMemberTable vmt = configuration.getVisibleMemberTable((TypeElement) element);\n-            Set<VisibleMemberTable.Kind> detailSet = VisibleMemberTable.Kind.forDetailsOf(element.getKind());\n-            for (VisibleMemberTable.Kind kind : detailSet) {\n-                addTypeDetailLink(kind, !vmt.getVisibleMembers(kind).isEmpty(), listContents);\n-            }\n-            if (!listContents.isEmpty()) {\n-                if (nested) {\n-                    var li = HtmlTree.LI(HtmlTree.P(contents.detailLabel));\n-                    li.add(new HtmlTree(TagName.UL).add(listContents));\n-                    target.add(li);\n-                } else {\n-                    var li = HtmlTree.LI(contents.detailLabel);\n-                    li.add(Entity.NO_BREAK_SPACE);\n-                    target.add(li);\n-                    addListToNav(listContents, target);\n-                }\n-            }\n+    private void addSummaryLinks(Content target) {\n+        List<? extends Content> listContents = subNavLinks.stream().map(HtmlTree::LI).toList();\n+        if (!listContents.isEmpty()) {\n+            addListToNav(listContents, target);\n@@ -423,6 +344,6 @@\n-            case CONSTRUCTORS -> links.createLink(HtmlIds.CONSTRUCTOR_DETAIL, contents.navConstructor, link);\n-            case ENUM_CONSTANTS -> links.createLink(HtmlIds.ENUM_CONSTANT_DETAIL, contents.navEnum, link);\n-            case FIELDS -> links.createLink(HtmlIds.FIELD_DETAIL, contents.navField, link);\n-            case METHODS -> links.createLink(HtmlIds.METHOD_DETAIL, contents.navMethod, link);\n-            case PROPERTIES -> links.createLink(HtmlIds.PROPERTY_DETAIL, contents.navProperty, link);\n-            case ANNOTATION_TYPE_MEMBER -> links.createLink(HtmlIds.ANNOTATION_TYPE_ELEMENT_DETAIL,\n+            case CONSTRUCTORS -> links.createLinkOrLabel(HtmlIds.CONSTRUCTOR_DETAIL, contents.navConstructor, link);\n+            case ENUM_CONSTANTS -> links.createLinkOrLabel(HtmlIds.ENUM_CONSTANT_DETAIL, contents.navEnum, link);\n+            case FIELDS -> links.createLinkOrLabel(HtmlIds.FIELD_DETAIL, contents.navField, link);\n+            case METHODS -> links.createLinkOrLabel(HtmlIds.METHOD_DETAIL, contents.navMethod, link);\n+            case PROPERTIES -> links.createLinkOrLabel(HtmlIds.PROPERTY_DETAIL, contents.navProperty, link);\n+            case ANNOTATION_TYPE_MEMBER -> links.createLinkOrLabel(HtmlIds.ANNOTATION_TYPE_ELEMENT_DETAIL,\n@@ -444,5 +365,4 @@\n-        for (Content liContent : listContents) {\n-            if (count < listContents.size() - 1) {\n-                liContent.add(Entity.NO_BREAK_SPACE);\n-                liContent.add(\"|\");\n-                liContent.add(Entity.NO_BREAK_SPACE);\n+        for (Content item : listContents) {\n+            target.add(item);\n+            if (count++ < listContents.size() - 1) {\n+                target.add(Entity.NO_BREAK_SPACE).add(Entity.of(\"gt\")).add(Entity.NO_BREAK_SPACE);\n@@ -450,2 +370,0 @@\n-            target.add(liContent);\n-            count++;\n@@ -461,6 +379,6 @@\n-    private void addPageLabel(Content target, Content label, boolean display) {\n-        if (display) {\n-            target.add(HtmlTree.LI(label));\n-        }\n-    }\n-\n+    \/**\n+     * Adds a link to the overview page if indicated by the configuration.\n+     * Otherwise a link to the first module or package is added.\n+     *\n+     * @param target content to add the link to\n+     *\/\n@@ -471,7 +389,3 @@\n-        }\n-    }\n-\n-    private void addModuleLink(Content target) {\n-        if (configuration.showModules) {\n-            if (configuration.modules.size() == 1) {\n-                ModuleElement mdle = configuration.modules.first();\n+        } else if (configuration.showModules && configuration.modules.size() > 0) {\n+            ModuleElement mdle = configuration.modules.first();\n+            if (!mdle.equals(element)) {\n@@ -482,2 +396,0 @@\n-            } else if (!configuration.modules.isEmpty()) {\n-                addPageLabel(target, contents.moduleLabel, true);\n@@ -485,11 +397,1 @@\n-        }\n-    }\n-\n-    private void addModuleOfElementLink(Content target) {\n-        if (configuration.showModules) {\n-            target.add(HtmlTree.LI(navLinkModule));\n-        }\n-    }\n-\n-    private void addPackageLink(Content target) {\n-        if (configuration.packages.size() == 1) {\n+        } else if (configuration.packages.size() > 0 && !(element instanceof PackageElement)) {\n@@ -515,2 +417,0 @@\n-                } else {\n-                    target.add(HtmlTree.LI(contents.packageLabel));\n@@ -519,2 +419,0 @@\n-        } else if (!configuration.packages.isEmpty()) {\n-            addPageLabel(target, contents.packageLabel, true);\n@@ -524,4 +422,0 @@\n-    private void addPackageOfElementLink(Content target) {\n-        target.add(HtmlTree.LI(links.createLink(DocPath.parent.resolve(DocPaths.PACKAGE_SUMMARY),\n-                contents.packageLabel)));\n-    }\n@@ -529,2 +423,11 @@\n-    private void addPackageSummaryLink(Content target) {\n-        target.add(HtmlTree.LI(links.createLink(DocPaths.PACKAGE_SUMMARY, contents.packageLabel)));\n+    private void addPageElementLink(Content list) {\n+        Content link = switch (element) {\n+            case ModuleElement mdle -> links.createLink(pathToRoot.resolve(\n+                    configuration.docPaths.moduleSummary(mdle)), contents.moduleLabel);\n+            case PackageElement pkg -> links.createLink(pathToRoot.resolve(\n+                    configuration.docPaths.forPackage(pkg).resolve(DocPaths.PACKAGE_SUMMARY)), contents.packageLabel);\n+            case TypeElement type -> links.createLink(pathToRoot.resolve(\n+                    configuration.docPaths.forClass(type)), contents.classLabel);\n+            default -> throw new RuntimeException();\n+        };\n+        list.add(HtmlTree.LI(link));\n@@ -574,0 +477,7 @@\n+    private void addSearchLink(Content target) {\n+        if (options.createIndex()) {\n+            target.add(HtmlTree.LI(links.createLink(\n+                    pathToRoot.resolve(DocPaths.SEARCH_PAGE), contents.searchLabel, \"\")));\n+        }\n+    }\n+\n@@ -591,10 +501,11 @@\n-        String reset = \"reset\";\n-        var inputText = HtmlTree.INPUT(\"text\", HtmlIds.SEARCH_INPUT)\n-                .put(HtmlAttr.PLACEHOLDER, searchPlaceholder);\n-        var inputReset = HtmlTree.INPUT(reset, HtmlIds.RESET_BUTTON)\n-                .put(HtmlAttr.VALUE, reset);\n-        var searchDiv = HtmlTree.DIV(HtmlStyle.navListSearch,\n-                links.createLink(pathToRoot.resolve(DocPaths.SEARCH_PAGE),\n-                        searchLabel, \"\"));\n-        searchDiv.add(inputText);\n-        searchDiv.add(inputReset);\n+        var resources = configuration.getDocResources();\n+        var inputText = HtmlTree.INPUT(HtmlAttr.InputType.TEXT, HtmlIds.SEARCH_INPUT)\n+                .put(HtmlAttr.PLACEHOLDER, resources.getText(\"doclet.search_placeholder\"))\n+                .put(HtmlAttr.ARIA_LABEL, resources.getText(\"doclet.search_in_documentation\"))\n+                .put(HtmlAttr.AUTOCOMPLETE, \"off\")\n+                .put(HtmlAttr.AUTOCAPITALIZE, \"off\");\n+        var inputReset = HtmlTree.INPUT(HtmlAttr.InputType.RESET, HtmlIds.RESET_SEARCH)\n+                .put(HtmlAttr.VALUE, resources.getText(\"doclet.search_reset\"));\n+        var searchDiv = HtmlTree.DIV(HtmlStyle.navListSearch)\n+                .add(inputText)\n+                .add(inputReset);\n@@ -615,1 +526,1 @@\n-        var navDiv = new HtmlTree(TagName.DIV);\n+        var navContent = new HtmlTree(TagName.DIV);\n@@ -621,9 +532,8 @@\n-        navDiv.setStyle(HtmlStyle.topNav)\n-                .setId(HtmlIds.NAVBAR_TOP)\n-                .add(new HtmlTree(TagName.BUTTON).setId(HtmlIds.NAVBAR_TOGGLE_BUTTON)\n-                        .put(HtmlAttr.ARIA_CONTROLS, HtmlIds.NAVBAR_TOP.name())\n-                        .put(HtmlAttr.ARIA_EXPANDED, String.valueOf(false))\n-                        .put(HtmlAttr.ARIA_LABEL, toggleNavLinks)\n-                        .add(iconSpan)\n-                        .add(iconSpan)\n-                        .add(iconSpan))\n+        navContent.setStyle(HtmlStyle.navContent).add(HtmlTree.DIV(HtmlStyle.navMenuButton,\n+                        new HtmlTree(TagName.BUTTON).setId(HtmlIds.NAVBAR_TOGGLE_BUTTON)\n+                                .put(HtmlAttr.ARIA_CONTROLS, HtmlIds.NAVBAR_TOP.name())\n+                                .put(HtmlAttr.ARIA_EXPANDED, String.valueOf(false))\n+                                .put(HtmlAttr.ARIA_LABEL, toggleNavLinks)\n+                                .add(iconSpan)\n+                                .add(iconSpan)\n+                                .add(iconSpan)))\n@@ -634,1 +544,0 @@\n-        boolean addSearch = options.createIndex() && documentedPage != PageMode.SEARCH;\n@@ -636,2 +545,0 @@\n-        var aboutDiv = HtmlTree.DIV(HtmlStyle.aboutLanguage, aboutContent);\n-        navDiv.add(aboutDiv);\n@@ -643,22 +550,14 @@\n-        navDiv.add(navList);\n-        var ulNavSummaryRight = HtmlTree.UL(HtmlStyle.subNavListSmall);\n-        addSummaryLinks(ulNavSummaryRight, true);\n-        addDetailLinks(ulNavSummaryRight, true);\n-        navDiv.add(ulNavSummaryRight);\n-        navigationBar.add(navDiv);\n-\n-        var subDiv = HtmlTree.DIV(HtmlStyle.subNav);\n-\n-        var div = new HtmlTree(TagName.DIV).setId(HtmlIds.NAVBAR_SUB_LIST);\n-        \/\/ Add the summary links if present.\n-        var ulNavSummary = HtmlTree.UL(HtmlStyle.subNavList);\n-        addSummaryLinks(ulNavSummary, false);\n-        div.add(ulNavSummary);\n-        \/\/ Add the detail links if present.\n-        var ulNavDetail = HtmlTree.UL(HtmlStyle.subNavList);\n-        addDetailLinks(ulNavDetail, false);\n-        div.add(ulNavDetail);\n-        subDiv.add(div);\n-\n-        if (addSearch) {\n-            addSearch(subDiv);\n+        navContent.add(navList);\n+        var aboutDiv = HtmlTree.DIV(HtmlStyle.aboutLanguage, aboutContent);\n+        navContent.add(aboutDiv);\n+        navigationBar.add(HtmlTree.DIV(HtmlStyle.topNav, navContent).setId(HtmlIds.NAVBAR_TOP));\n+\n+        var subNavContent = HtmlTree.DIV(HtmlStyle.navContent);\n+\n+        \/\/ Add the breadcrumb navigation links if present.\n+        var ulBreadcrumbNav = HtmlTree.OL(HtmlStyle.subNavList);\n+        addSummaryLinks(ulBreadcrumbNav);\n+        subNavContent.addUnchecked(ulBreadcrumbNav);\n+\n+        if (options.createIndex() && documentedPage != PageMode.SEARCH) {\n+            addSearch(subNavContent);\n@@ -666,1 +565,1 @@\n-        navigationBar.add(subDiv);\n+        navigationBar.add(HtmlTree.DIV(HtmlStyle.subNav, subNavContent));\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/Navigation.java","additions":130,"deletions":231,"binary":false,"changes":361,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2021, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2021, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -91,1 +91,1 @@\n-                                HtmlTree.INPUT(\"checkbox\", htmlId)\n+                                HtmlTree.INPUT(HtmlAttr.InputType.CHECKBOX, htmlId)\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/NewAPIListWriter.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -36,0 +36,1 @@\n+import jdk.javadoc.internal.doclets.formats.html.markup.Text;\n@@ -40,0 +41,3 @@\n+import java.util.ArrayList;\n+import java.util.List;\n+\n@@ -131,4 +135,8 @@\n-        Content linkContent = getModuleLink(utils.elementUtils.getModuleOf(packageElement),\n-                contents.moduleLabel);\n-        return super.getNavBar(pageMode, element)\n-                .setNavLinkModule(linkContent);\n+        List<Content> subnavLinks = new ArrayList<>();\n+        if (configuration.showModules) {\n+            var mdle = utils.elementUtils.getModuleOf(packageElement);\n+            subnavLinks.add(getModuleLink(mdle, Text.of(mdle.getQualifiedName())));\n+        }\n+        subnavLinks.add(links.createLink(pathString(packageElement, DocPaths.PACKAGE_SUMMARY),\n+                getLocalizedPackageName(packageElement), HtmlStyle.currentSelection, \"\"));\n+        return super.getNavBar(pageMode, element).setSubNavLinks(subnavLinks);\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/PackageTreeWriter.java","additions":13,"deletions":5,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,0 +28,2 @@\n+import java.util.ArrayList;\n+import java.util.List;\n@@ -219,4 +221,8 @@\n-        Content linkContent = getModuleLink(utils.elementUtils.getModuleOf(element),\n-                contents.moduleLabel);\n-        return super.getNavBar(pageMode, element)\n-                .setNavLinkModule(linkContent);\n+        List<Content> subnavLinks = new ArrayList<>();\n+        if (configuration.showModules) {\n+            var mdle = utils.elementUtils.getModuleOf(packageElement);\n+            subnavLinks.add(getModuleLink(mdle, Text.of(mdle.getQualifiedName())));\n+        }\n+        subnavLinks.add(links.createLink(pathString(packageElement, DocPaths.PACKAGE_SUMMARY),\n+                getLocalizedPackageName(packageElement), HtmlStyle.currentSelection, \"\"));\n+        return super.getNavBar(pageMode, element).setSubNavLinks(subnavLinks);\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/PackageUseWriter.java","additions":11,"deletions":5,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -45,1 +45,0 @@\n-import jdk.javadoc.internal.doclets.formats.html.markup.Entity;\n@@ -75,1 +74,1 @@\n-    private final HtmlTree section = HtmlTree.SECTION(HtmlStyle.packageDescription);\n+    private final HtmlTree section = HtmlTree.SECTION(HtmlStyle.packageDescription, new ContentBuilder());\n@@ -182,2 +181,3 @@\n-        if (!options.noComment()) {\n-            addPackageDescription(packageContent);\n+        tableOfContents.addLink(HtmlIds.TOP_OF_PAGE, contents.navDescription);\n+        if (options.noComment()) {\n+            return;\n@@ -185,0 +185,3 @@\n+        tableOfContents.pushNestedList();\n+        addPackageDescription(packageContent);\n+        tableOfContents.popNestedList();\n@@ -193,2 +196,2 @@\n-        if (!options.noComment()) {\n-            addPackageTags(packageContent);\n+        if (options.noComment()) {\n+            return;\n@@ -196,0 +199,1 @@\n+        addPackageTags(packageContent);\n@@ -202,9 +206,0 @@\n-        if (configuration.showModules) {\n-            ModuleElement mdle = configuration.docEnv.getElementUtils().getModuleOf(packageElement);\n-            var classModuleLabel = HtmlTree.SPAN(HtmlStyle.moduleLabelInPackage, contents.moduleLabel);\n-            var moduleNameDiv = HtmlTree.DIV(HtmlStyle.subTitle, classModuleLabel);\n-            moduleNameDiv.add(Entity.NO_BREAK_SPACE);\n-            moduleNameDiv.add(getModuleLink(mdle,\n-                    Text.of(mdle.getQualifiedName().toString())));\n-            div.add(moduleNameDiv);\n-        }\n@@ -278,11 +273,9 @@\n-        Content linkContent = getModuleLink(utils.elementUtils.getModuleOf(packageElement),\n-                contents.moduleLabel);\n-        return super.getNavBar(pageMode, element)\n-                .setNavLinkModule(linkContent)\n-                .setSubNavLinks(() -> List.of(\n-                        links.createLink(HtmlIds.PACKAGE_DESCRIPTION, contents.navDescription,\n-                                !utils.getFullBody(packageElement).isEmpty() && !options.noComment()),\n-                        links.createLink(HtmlIds.RELATED_PACKAGE_SUMMARY, contents.relatedPackages,\n-                                relatedPackages != null && !relatedPackages.isEmpty()),\n-                        links.createLink(HtmlIds.CLASS_SUMMARY, contents.navClassesAndInterfaces,\n-                                allClasses != null && !allClasses.isEmpty())));\n+        List<Content> subnavLinks = new ArrayList<>();\n+        if (configuration.showModules) {\n+            ModuleElement mdle = configuration.docEnv.getElementUtils().getModuleOf(packageElement);\n+            subnavLinks.add(links.createLink(pathToRoot.resolve(docPaths.moduleSummary(mdle)),\n+                    Text.of(mdle.getQualifiedName())));\n+        }\n+        subnavLinks.add(links.createLink(pathString(packageElement, DocPaths.PACKAGE_SUMMARY),\n+                getLocalizedPackageName(packageElement), HtmlStyle.currentSelection, \"\"));\n+        return super.getNavBar(pageMode, element).setSubNavLinks(subnavLinks);\n@@ -322,2 +315,1 @@\n-        addPackageSummary(relatedPackages, contents.relatedPackages, tableHeader,\n-                summaryContent, showModules);\n+        addRelatedPackageSummary(tableHeader, summaryContent, showModules);\n@@ -362,0 +354,1 @@\n+            tableOfContents.addLink(HtmlIds.CLASS_SUMMARY, contents.navClassesAndInterfaces);\n@@ -366,4 +359,4 @@\n-    protected void addPackageSummary(List<PackageElement> packages, Content label,\n-                                  TableHeader tableHeader, Content summaryContent,\n-                                  boolean showModules) {\n-        if (!packages.isEmpty()) {\n+    protected void addRelatedPackageSummary(TableHeader tableHeader, Content summaryContent,\n+                                     boolean showModules) {\n+        if (!relatedPackages.isEmpty()) {\n+            tableOfContents.addLink(HtmlIds.RELATED_PACKAGE_SUMMARY, contents.relatedPackages);\n@@ -372,1 +365,1 @@\n-                    .setCaption(label)\n+                    .setCaption(contents.relatedPackages)\n@@ -380,1 +373,1 @@\n-            for (PackageElement pkg : packages) {\n+            for (PackageElement pkg : relatedPackages) {\n@@ -430,0 +423,1 @@\n+        bodyContents.setSideContent(tableOfContents.toContent(false));\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/PackageWriter.java","additions":29,"deletions":35,"binary":false,"changes":64,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -91,1 +91,1 @@\n-                                HtmlTree.INPUT(\"checkbox\", htmlId)\n+                                HtmlTree.INPUT(HtmlAttr.InputType.CHECKBOX, htmlId)\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/PreviewListWriter.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -77,0 +77,2 @@\n+            writer.tableOfContents.addLink(HtmlIds.PROPERTY_DETAIL, contents.propertyDetailsLabel);\n+            writer.tableOfContents.pushNestedList();\n@@ -89,0 +91,2 @@\n+                writer.tableOfContents.addLink(htmlIds.forProperty(currentProperty),\n+                        Text.of(utils.getPropertyLabel(name(property))));\n@@ -92,0 +96,1 @@\n+            writer.tableOfContents.popNestedList();\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/PropertyWriter.java","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -84,3 +84,6 @@\n-                .add(HtmlTree.DIV(HtmlTree.INPUT(\"text\", HtmlId.of(\"page-search-input\"))\n-                                .put(HtmlAttr.PLACEHOLDER, resources.getText(\"doclet.search_placeholder\")))\n-                        .add(HtmlTree.INPUT(\"reset\", HtmlId.of(\"page-search-reset\"))\n+                .add(HtmlTree.DIV(HtmlTree.INPUT(HtmlAttr.InputType.TEXT, HtmlId.of(\"page-search-input\"))\n+                                .put(HtmlAttr.PLACEHOLDER, resources.getText(\"doclet.search_placeholder\"))\n+                                .put(HtmlAttr.ARIA_LABEL, resources.getText(\"doclet.search_in_documentation\"))\n+                                .put(HtmlAttr.AUTOCOMPLETE, \"off\")\n+                                .put(HtmlAttr.AUTOCAPITALIZE, \"off\"))\n+                        .add(HtmlTree.INPUT(HtmlAttr.InputType.RESET, HtmlId.of(\"page-search-reset\"))\n@@ -107,1 +110,1 @@\n-                        .add(HtmlTree.P(HtmlTree.INPUT(\"checkbox\", HtmlId.of(\"search-redirect\")))\n+                        .add(HtmlTree.P(HtmlTree.INPUT(HtmlAttr.InputType.CHECKBOX, HtmlId.of(\"search-redirect\")))\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/SearchWriter.java","additions":8,"deletions":5,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -190,1 +190,1 @@\n-     * @param source class content which will be added to the documentation\n+     * @param classContent class content which will be added to the documentation\n@@ -192,2 +192,3 @@\n-    public void addClassContent(Content source) {\n-        bodyContents.addMainContent(source);\n+    public void addClassContent(Content classContent) {\n+        bodyContents.addMainContent(classContent);\n+        bodyContents.setSideContent(tableOfContents.toContent(true));\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/SubWriterHolderWriter.java","additions":5,"deletions":4,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,1 +28,0 @@\n-import java.util.Arrays;\n@@ -157,3 +156,2 @@\n-                document.addEventListener(\"DOMContentLoaded\", function(e) {\n-                    document.querySelectorAll('input[type=\"checkbox\"]').forEach(\n-                        function(c) {\n+                document.addEventListener(\"DOMContentLoaded\", (e) => {\n+                    document.querySelectorAll('main input[type=\"checkbox\"]').forEach((c) => {\n@@ -165,2 +163,1 @@\n-                    document.querySelectorAll('input[type=\"checkbox\"]').forEach(\n-                        function(c) {\n+                    document.querySelectorAll('main input[type=\"checkbox\"]').forEach((c) => {\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/SummaryListWriter.java","additions":4,"deletions":7,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -0,0 +1,113 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package jdk.javadoc.internal.doclets.formats.html;\n+\n+import jdk.javadoc.internal.doclets.formats.html.markup.Entity;\n+import jdk.javadoc.internal.doclets.formats.html.markup.HtmlAttr;\n+import jdk.javadoc.internal.doclets.formats.html.markup.HtmlId;\n+import jdk.javadoc.internal.doclets.formats.html.markup.HtmlStyle;\n+import jdk.javadoc.internal.doclets.formats.html.markup.HtmlTree;\n+import jdk.javadoc.internal.doclets.formats.html.markup.ListBuilder;\n+import jdk.javadoc.internal.doclets.formats.html.markup.TagName;\n+import jdk.javadoc.internal.doclets.formats.html.markup.Text;\n+\n+\/**\n+ * A class used by various {@link HtmlDocletWriter} subclasses to build tables of contents.\n+ *\/\n+public class TableOfContents {\n+    private final ListBuilder listBuilder;\n+    private final HtmlDocletWriter writer;\n+\n+    \/**\n+     * Constructor\n+     * @param writer the writer\n+     *\/\n+    public TableOfContents(HtmlDocletWriter writer) {\n+        this.writer = writer;\n+        listBuilder = new ListBuilder(HtmlTree.OL(HtmlStyle.tocList));\n+    }\n+\n+    \/**\n+     * Adds a link to the table of contents.\n+     * @param id the link fragment\n+     * @param label the link label\n+     * @return this object\n+     *\/\n+    public TableOfContents addLink(HtmlId id, Content label) {\n+        listBuilder.add(writer.links.createLink(id, label).put(HtmlAttr.TABINDEX, \"0\"));\n+        return this;\n+    }\n+\n+    \/**\n+     * Adds a new nested list to add new items to.\n+     *\/\n+    public void pushNestedList() {\n+        listBuilder.pushNestedList(HtmlTree.OL(HtmlStyle.tocList));\n+    }\n+\n+    \/**\n+     * Closes the current nested list and go back to the parent list.\n+     *\/\n+    public void popNestedList() {\n+        listBuilder.popNestedList();\n+    }\n+\n+    \/**\n+     * Returns a content object containing the table of contents, consisting\n+     * of a header and the contents list itself. If the contents list is empty,\n+     * an empty content object is returned.\n+     *\n+     * @param hasFilterInput whether to add a filter text input\n+     * @return a content object\n+     *\/\n+    protected Content toContent(boolean hasFilterInput) {\n+        if (listBuilder.isEmpty()) {\n+            return Text.EMPTY;\n+        }\n+        var content = HtmlTree.NAV()\n+                .setStyle(HtmlStyle.toc)\n+                .put(HtmlAttr.ARIA_LABEL, writer.resources.getText(\"doclet.table_of_contents\"));\n+        var header = HtmlTree.DIV(HtmlStyle.tocHeader, writer.contents.contentsHeading);\n+        if (hasFilterInput) {\n+            header.add(Entity.NO_BREAK_SPACE)\n+                    .add(HtmlTree.INPUT(HtmlAttr.InputType.TEXT, HtmlStyle.filterInput)\n+                            .put(HtmlAttr.PLACEHOLDER, writer.resources.getText(\"doclet.filter_label\"))\n+                            .put(HtmlAttr.ARIA_LABEL, writer.resources.getText(\"doclet.filter_table_of_contents\"))\n+                            .put(HtmlAttr.AUTOCOMPLETE, \"off\")\n+                            .put(HtmlAttr.AUTOCAPITALIZE, \"off\"))\n+                    .add(HtmlTree.INPUT(HtmlAttr.InputType.RESET, HtmlStyle.resetFilter)\n+                            .put(HtmlAttr.VALUE, writer.resources.getText(\"doclet.filter_reset\")));\n+        }\n+        content.add(header);\n+        content.add(new HtmlTree(TagName.BUTTON).addStyle(HtmlStyle.hideSidebar)\n+                .add(HtmlTree.SPAN(writer.contents.hideSidebar).add(Entity.NO_BREAK_SPACE))\n+                .add(Entity.LEFT_POINTING_ANGLE));\n+        content.add(new HtmlTree(TagName.BUTTON).addStyle(HtmlStyle.showSidebar)\n+                .add(Entity.RIGHT_POINTING_ANGLE)\n+                .add(HtmlTree.SPAN(Entity.NO_BREAK_SPACE).add(writer.contents.showSidebar)));\n+        return content.add(listBuilder);\n+    }\n+\n+}\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/TableOfContents.java","additions":113,"deletions":0,"binary":false,"changes":113,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -40,2 +40,3 @@\n- * header that is always visible, and main content that\n- * can be scrolled if necessary.\n+ * header that is always visible, main content that\n+ * can be scrolled if necessary, and optional side and footer\n+ * contents that are only rendered if available.\n@@ -46,0 +47,1 @@\n+    private Content side = null;\n@@ -54,0 +56,5 @@\n+    public BodyContents setSideContent(Content side) {\n+        this.side = Objects.requireNonNull(side);\n+        return this;\n+    }\n+\n@@ -92,2 +99,5 @@\n-                .add(HtmlTree.MAIN().add(mainContents))\n-                .add(footer == null ? Text.EMPTY : footer);\n+                .add(HtmlTree.DIV(HtmlStyle.mainGrid)\n+                        .add(side == null ? Text.EMPTY : side)\n+                        .add(HtmlTree.MAIN()\n+                                .add(mainContents)\n+                                .add(footer == null ? Text.EMPTY : footer)));\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/markup\/BodyContents.java","additions":15,"deletions":5,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -41,0 +41,2 @@\n+    public static final Entity LEFT_POINTING_ANGLE = new Entity(\"&#10094;\");\n+    public static final Entity RIGHT_POINTING_ANGLE = new Entity(\"&#10095;\");\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/markup\/Entity.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -354,1 +354,1 @@\n-                mainBodyScript.append(\"var pathtoroot = \")\n+                mainBodyScript.append(\"const pathtoroot = \")\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/markup\/Head.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2010, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -41,0 +41,2 @@\n+    AUTOCOMPLETE,\n+    AUTOCAPITALIZE,\n@@ -94,0 +96,17 @@\n+    public enum InputType {\n+\n+        CHECKBOX,\n+        RESET,\n+        TEXT;\n+\n+        private final String type;\n+\n+        InputType() {\n+            type = Utils.toLowerCase(name());\n+        }\n+\n+        public String toString() {\n+            return type;\n+        }\n+    }\n+\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/markup\/HtmlAttr.java","additions":20,"deletions":1,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2010, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -57,1 +57,7 @@\n-    \/\/ {@code header} and {@code footer} elements on each page.\n+    \/\/ {@code header} element on each page, as well as the side navigation bar that displays\n+    \/\/ the table of contents on some pages.\n+\n+    \/**\n+     * The class for the link representing the current element in breadcrumb navigation and table of contents.\n+     *\/\n+    currentSelection,\n@@ -70,0 +76,15 @@\n+    \/**\n+     * The class for the {@code input} element to filter items in the table of contents.\n+     *\/\n+    filterInput,\n+\n+    \/**\n+     * The class for the {@code button} element to hide the sidebar.\n+     *\/\n+    hideSidebar,\n+\n+    \/**\n+     * The class for the {@code div} element containing the sidebar and main content.\n+     *\/\n+    mainGrid,\n+\n@@ -82,0 +103,10 @@\n+    \/**\n+     * The class for the {@code div} element containing navigation elements.\n+     *\/\n+    navContent,\n+\n+    \/**\n+     * The class for the {@code div} element containing the button to show or hide the menu.\n+     *\/\n+    navMenuButton,\n+\n@@ -92,0 +123,10 @@\n+    \/**\n+     * The class for the reset button in the sidebar filter input element.\n+     *\/\n+    resetFilter,\n+\n+    \/**\n+     * The class for the {@code button} element to show the sidebar.\n+     *\/\n+    showSidebar,\n+\n@@ -110,1 +151,11 @@\n-     * The class for the list of subsidiary navigation links for smaller displays.\n+     * The class for a {@code nav} element containing a table of contents.\n+     *\/\n+    toc,\n+\n+    \/**\n+     * The class for the {@code div} element representing the header of the table of contents.\n+     *\/\n+    tocHeader,\n+\n+    \/**\n+     * The class used for list elements in the table of contents.\n@@ -112,1 +163,1 @@\n-    subNavListSmall,\n+    tocList,\n@@ -127,15 +178,0 @@\n-    \/**\n-     * The class for the \"module\" label in the heading for a package declaration.\n-     *\/\n-    moduleLabelInPackage,\n-\n-    \/**\n-     * The class for the \"module\" label in the heading for a type declaration.\n-     *\/\n-    moduleLabelInType,\n-\n-    \/**\n-     * The class for the \"package\" label in the heading for a type declaration.\n-     *\/\n-    packageLabelInType,\n-\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/markup\/HtmlStyle.java","additions":55,"deletions":19,"binary":false,"changes":74,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2010, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -589,1 +589,1 @@\n-    public static HtmlTree INPUT(String type, HtmlId id) {\n+    public static HtmlTree INPUT(HtmlAttr.InputType type, HtmlId id) {\n@@ -591,1 +591,1 @@\n-                .put(HtmlAttr.TYPE, type)\n+                .put(HtmlAttr.TYPE, type.toString())\n@@ -596,0 +596,13 @@\n+    \/**\n+     * Creates an HTML {@code INPUT} element with the given type\n+     * and style. The element is marked as initially disabled.\n+     * @param type  the input type\n+     * @param style the input style\n+     * @return      the element\n+     *\/\n+    public static HtmlTree INPUT(HtmlAttr.InputType type, HtmlStyle style) {\n+        return new HtmlTree(TagName.INPUT)\n+                .put(HtmlAttr.TYPE, type.toString())\n+                .setStyle(style)\n+                .put(HtmlAttr.DISABLED, \"\");\n+    }\n@@ -721,0 +734,11 @@\n+    \/**\n+     * Creates an HTML {@code OL} element with the given style.\n+     *\n+     * @param style the style\n+     * @return the element\n+     *\/\n+    public static HtmlTree OL(HtmlStyle style) {\n+        return new HtmlTree(TagName.OL)\n+                .setStyle(style);\n+    }\n+\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/markup\/HtmlTree.java","additions":27,"deletions":3,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -56,1 +56,1 @@\n-    public Content createLink(HtmlId id, Content label) {\n+    public HtmlTree createLink(HtmlId id, Content label) {\n@@ -70,1 +70,1 @@\n-    public Content createLink(HtmlId id, Content label, boolean link) {\n+    public Content createLinkOrLabel(HtmlId id, Content label, boolean link) {\n@@ -83,1 +83,1 @@\n-    public Content createLink(HtmlId id, Content label, String title) {\n+    public HtmlTree createLink(HtmlId id, Content label, String title) {\n@@ -95,1 +95,1 @@\n-    public Content createLink(DocPath path, String label) {\n+    public HtmlTree createLink(DocPath path, String label) {\n@@ -106,1 +106,1 @@\n-    public Content createLink(DocPath path, Content label) {\n+    public HtmlTree createLink(DocPath path, Content label) {\n@@ -120,1 +120,1 @@\n-    public Content createLink(DocPath path, Content label, HtmlStyle style, String title) {\n+    public HtmlTree createLink(DocPath path, Content label, HtmlStyle style, String title) {\n@@ -132,1 +132,1 @@\n-    public Content createLink(DocPath path, Content label, String title) {\n+    public HtmlTree createLink(DocPath path, Content label, String title) {\n@@ -155,1 +155,1 @@\n-    public Content createLink(DocLink link, Content label, String title) {\n+    public HtmlTree createLink(DocLink link, Content label, String title) {\n@@ -173,1 +173,1 @@\n-    public Content createLink(DocLink link, Content label, HtmlStyle style,\n+    public HtmlTree createLink(DocLink link, Content label, HtmlStyle style,\n@@ -189,1 +189,1 @@\n-    public Content createLink(DocLink link, Content label, HtmlStyle style,\n+    public HtmlTree createLink(DocLink link, Content label, HtmlStyle style,\n@@ -212,1 +212,1 @@\n-    public Content createExternalLink(DocLink link, Content label) {\n+    public HtmlTree createExternalLink(DocLink link, Content label) {\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/markup\/Links.java","additions":12,"deletions":12,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -0,0 +1,115 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package jdk.javadoc.internal.doclets.formats.html.markup;\n+\n+import java.io.IOException;\n+import java.io.Writer;\n+import java.util.ArrayDeque;\n+import java.util.Deque;\n+import java.util.NoSuchElementException;\n+import java.util.Objects;\n+\n+import jdk.javadoc.internal.doclets.formats.html.Content;\n+\n+\/**\n+ * A utility class for building nested HTML lists. This class is implemented as a\n+ * stack of nested list\/item pairs where list items are added to the inner-most\n+ * list and nested lists are added to the current list item of the inner-most list.\n+ * Lists can be added to and removed from the stack using the {@link #pushNestedList}\n+ * and {@link #popNestedList} methods.\n+ *\/\n+public class ListBuilder extends Content {\n+\n+    private final HtmlTree root;\n+    private record Pair(HtmlTree list, HtmlTree item) {}\n+    private final Deque<Pair> stack = new ArrayDeque<>();\n+    private HtmlTree currentList;\n+    private HtmlTree currentItem;\n+\n+    \/**\n+     * Creates a new list builder.\n+     *\n+     * @param list the root list element\n+     *\/\n+    public ListBuilder(HtmlTree list) {\n+        Objects.requireNonNull(list, \"Root list element is required\");\n+        root = currentList = list;\n+    }\n+\n+    \/**\n+     * Adds a new list item with the given content to the current list. The last added list item\n+     * will also be used as container when pushing a new nested list.\n+     *\n+     * @param listItemContent the content for the new list item.\n+     * @return this list builder\n+     *\/\n+    public ListBuilder add(Content listItemContent) {\n+        currentItem = HtmlTree.LI(listItemContent);\n+        currentList.addUnchecked(currentItem);\n+        return this;\n+    }\n+\n+    \/**\n+     * Adds a new nested list to the current list item and makes it the recipient for new list items.\n+     * Note that the nested list is added even if empty; use {@code addNested} to avoid adding empty\n+     * lists.\n+     *\n+     * @param list the nested list\n+     * @return this list builder\n+     *\/\n+    public ListBuilder pushNestedList(HtmlTree list) {\n+        Objects.requireNonNull(currentItem, \"List item required for nested list\");\n+        stack.push(new Pair(currentList, currentItem));\n+        currentList = list;\n+        currentItem = null;\n+        return this;\n+    }\n+\n+    \/**\n+     * Pops the current list from the stack and returns to adding list items to the parent list.\n+     *\n+     * @return this list builder\n+     * @throws NoSuchElementException if the stack is empty\n+     *\/\n+    public ListBuilder popNestedList() {\n+        Pair pair = stack.pop();\n+        \/\/ First restore currentItem and add nested list to it before restoring currentList to outer list.\n+        currentItem = pair.item;\n+        currentItem.add(currentList);\n+        currentList = pair.list;\n+        return this;\n+    }\n+\n+    @Override\n+    public boolean write(Writer writer, String newline, boolean atNewline) throws IOException {\n+        return root.write(writer, newline, atNewline);\n+    }\n+\n+    @Override\n+    public boolean isEmpty() {\n+        return root.isEmpty();\n+    }\n+}\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/markup\/ListBuilder.java","additions":115,"deletions":0,"binary":false,"changes":115,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2010, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -38,0 +38,1 @@\n+    ASIDE,\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/markup\/TagName.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -1,236 +0,0 @@\n-\/*\n- * Copyright (c) 2013, 2023, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.  Oracle designates this\n- * particular file as subject to the \"Classpath\" exception as provided\n- * by Oracle in the LICENSE file that accompanied this code.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-\n-var moduleSearchIndex;\n-var packageSearchIndex;\n-var typeSearchIndex;\n-var memberSearchIndex;\n-var tagSearchIndex;\n-\n-var oddRowColor = \"odd-row-color\";\n-var evenRowColor = \"even-row-color\";\n-var sortAsc = \"sort-asc\";\n-var sortDesc = \"sort-desc\";\n-var tableTab = \"table-tab\";\n-var activeTableTab = \"active-table-tab\";\n-\n-function loadScripts(doc, tag) {\n-    createElem(doc, tag, 'script-files\/search.js');\n-\n-    createElem(doc, tag, 'module-search-index.js');\n-    createElem(doc, tag, 'package-search-index.js');\n-    createElem(doc, tag, 'type-search-index.js');\n-    createElem(doc, tag, 'member-search-index.js');\n-    createElem(doc, tag, 'tag-search-index.js');\n-}\n-\n-function createElem(doc, tag, path) {\n-    var script = doc.createElement(tag);\n-    var scriptElement = doc.getElementsByTagName(tag)[0];\n-    script.src = pathtoroot + path;\n-    scriptElement.parentNode.insertBefore(script, scriptElement);\n-}\n-\n-\/\/ Helper for  making content containing release names comparable lexicographically\n-function makeComparable(s) {\n-    return s.toLowerCase().replace(\/(\\d+)\/g,\n-        function(n, m) {\n-            return (\"000\" + m).slice(-4);\n-        });\n-}\n-\n-\/\/ Switches between two styles depending on a condition\n-function toggleStyle(classList, condition, trueStyle, falseStyle) {\n-    if (condition) {\n-        classList.remove(falseStyle);\n-        classList.add(trueStyle);\n-    } else {\n-        classList.remove(trueStyle);\n-        classList.add(falseStyle);\n-    }\n-}\n-\n-\/\/ Sorts the rows in a table lexicographically by the content of a specific column\n-function sortTable(header, columnIndex, columns) {\n-    var container = header.parentElement;\n-    var descending = header.classList.contains(sortAsc);\n-    container.querySelectorAll(\"div.table-header\").forEach(\n-        function(header) {\n-            header.classList.remove(sortAsc);\n-            header.classList.remove(sortDesc);\n-        }\n-    )\n-    var cells = container.children;\n-    var rows = [];\n-    for (var i = columns; i < cells.length; i += columns) {\n-        rows.push(Array.prototype.slice.call(cells, i, i + columns));\n-    }\n-    var comparator = function(a, b) {\n-        var ka = makeComparable(a[columnIndex].textContent);\n-        var kb = makeComparable(b[columnIndex].textContent);\n-        if (ka < kb)\n-            return descending ? 1 : -1;\n-        if (ka > kb)\n-            return descending ? -1 : 1;\n-        return 0;\n-    };\n-    var sorted = rows.sort(comparator);\n-    var visible = 0;\n-    sorted.forEach(function(row) {\n-        if (row[0].style.display !== 'none') {\n-            var isEvenRow = visible++ % 2 === 0;\n-        }\n-        row.forEach(function(cell) {\n-            toggleStyle(cell.classList, isEvenRow, evenRowColor, oddRowColor);\n-            container.appendChild(cell);\n-        })\n-    });\n-    toggleStyle(header.classList, descending, sortDesc, sortAsc);\n-}\n-\n-\/\/ Toggles the visibility of a table category in all tables in a page\n-function toggleGlobal(checkbox, selected, columns) {\n-    var display = checkbox.checked ? '' : 'none';\n-    document.querySelectorAll(\"div.table-tabs\").forEach(function(t) {\n-        var id = t.parentElement.getAttribute(\"id\");\n-        var selectedClass = id + \"-tab\" + selected;\n-        \/\/ if selected is empty string it selects all uncategorized entries\n-        var selectUncategorized = !Boolean(selected);\n-        var visible = 0;\n-        document.querySelectorAll('div.' + id)\n-            .forEach(function(elem) {\n-                if (selectUncategorized) {\n-                    if (elem.className.indexOf(selectedClass) === -1) {\n-                        elem.style.display = display;\n-                    }\n-                } else if (elem.classList.contains(selectedClass)) {\n-                    elem.style.display = display;\n-                }\n-                if (elem.style.display === '') {\n-                    var isEvenRow = visible++ % (columns * 2) < columns;\n-                    toggleStyle(elem.classList, isEvenRow, evenRowColor, oddRowColor);\n-                }\n-            });\n-        var displaySection = visible === 0 ? 'none' : '';\n-        t.parentElement.style.display = displaySection;\n-        document.querySelector(\"li#contents-\" + id).style.display = displaySection;\n-    })\n-}\n-\n-\/\/ Shows the elements of a table belonging to a specific category\n-function show(tableId, selected, columns) {\n-    if (tableId !== selected) {\n-        document.querySelectorAll('div.' + tableId + ':not(.' + selected + ')')\n-            .forEach(function(elem) {\n-                elem.style.display = 'none';\n-            });\n-    }\n-    document.querySelectorAll('div.' + selected)\n-        .forEach(function(elem, index) {\n-            elem.style.display = '';\n-            var isEvenRow = index % (columns * 2) < columns;\n-            toggleStyle(elem.classList, isEvenRow, evenRowColor, oddRowColor);\n-        });\n-    updateTabs(tableId, selected);\n-}\n-\n-function updateTabs(tableId, selected) {\n-    document.querySelector('div#' + tableId +' .summary-table')\n-        .setAttribute('aria-labelledby', selected);\n-    document.querySelectorAll('button[id^=\"' + tableId + '\"]')\n-        .forEach(function(tab, index) {\n-            if (selected === tab.id || (tableId === selected && index === 0)) {\n-                tab.className = activeTableTab;\n-                tab.setAttribute('aria-selected', true);\n-                tab.setAttribute('tabindex',0);\n-            } else {\n-                tab.className = tableTab;\n-                tab.setAttribute('aria-selected', false);\n-                tab.setAttribute('tabindex',-1);\n-            }\n-        });\n-}\n-\n-function switchTab(e) {\n-    var selected = document.querySelector('[aria-selected=true]');\n-    if (selected) {\n-        if ((e.keyCode === 37 || e.keyCode === 38) && selected.previousSibling) {\n-            \/\/ left or up arrow key pressed: move focus to previous tab\n-            selected.previousSibling.click();\n-            selected.previousSibling.focus();\n-            e.preventDefault();\n-        } else if ((e.keyCode === 39 || e.keyCode === 40) && selected.nextSibling) {\n-            \/\/ right or down arrow key pressed: move focus to next tab\n-            selected.nextSibling.click();\n-            selected.nextSibling.focus();\n-            e.preventDefault();\n-        }\n-    }\n-}\n-\n-var updateSearchResults = function() {};\n-\n-function indexFilesLoaded() {\n-    return moduleSearchIndex\n-        && packageSearchIndex\n-        && typeSearchIndex\n-        && memberSearchIndex\n-        && tagSearchIndex;\n-}\n-\/\/ Copy the contents of the local snippet to the clipboard\n-function copySnippet(button) {\n-    copyToClipboard(button.nextElementSibling.innerText);\n-    switchCopyLabel(button, button.firstElementChild);\n-}\n-function copyToClipboard(content) {\n-    var textarea = document.createElement(\"textarea\");\n-    textarea.style.height = 0;\n-    document.body.appendChild(textarea);\n-    textarea.value = content;\n-    textarea.select();\n-    document.execCommand(\"copy\");\n-    document.body.removeChild(textarea);\n-}\n-function switchCopyLabel(button, span) {\n-    var copied = span.getAttribute(\"data-copied\");\n-    button.classList.add(\"visible\");\n-    var initialLabel = span.innerHTML;\n-    span.innerHTML = copied;\n-    setTimeout(function() {\n-        button.classList.remove(\"visible\");\n-        setTimeout(function() {\n-            if (initialLabel !== copied) {\n-                span.innerHTML = initialLabel;\n-            }\n-        }, 100);\n-    }, 1900);\n-}\n-\/\/ Dynamically set scroll margin to accomodate for draft header\n-document.addEventListener(\"DOMContentLoaded\", function(e) {\n-    document.querySelectorAll(':not(input)[id]').forEach(\n-        function(c) {\n-            c.style[\"scroll-margin-top\"] = Math.ceil(document.querySelector(\"header\").offsetHeight) + \"px\"\n-        });\n-});\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/script.js","additions":0,"deletions":236,"binary":false,"changes":236,"status":"deleted"},{"patch":"@@ -0,0 +1,481 @@\n+\/*\n+ * Copyright (c) 2013, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+var moduleSearchIndex;\n+var packageSearchIndex;\n+var typeSearchIndex;\n+var memberSearchIndex;\n+var tagSearchIndex;\n+\n+var oddRowColor = \"odd-row-color\";\n+var evenRowColor = \"even-row-color\";\n+var sortAsc = \"sort-asc\";\n+var sortDesc = \"sort-desc\";\n+var tableTab = \"table-tab\";\n+var activeTableTab = \"active-table-tab\";\n+\n+const linkIcon = \"##REPLACE:doclet.Link_icon##\";\n+const linkToSection = \"##REPLACE:doclet.Link_to_section##\";\n+\n+function loadScripts(doc, tag) {\n+    createElem(doc, tag, 'script-files\/search.js');\n+\n+    createElem(doc, tag, 'module-search-index.js');\n+    createElem(doc, tag, 'package-search-index.js');\n+    createElem(doc, tag, 'type-search-index.js');\n+    createElem(doc, tag, 'member-search-index.js');\n+    createElem(doc, tag, 'tag-search-index.js');\n+}\n+\n+function createElem(doc, tag, path) {\n+    var script = doc.createElement(tag);\n+    var scriptElement = doc.getElementsByTagName(tag)[0];\n+    script.src = pathtoroot + path;\n+    scriptElement.parentNode.insertBefore(script, scriptElement);\n+}\n+\n+\/\/ Helper for  making content containing release names comparable lexicographically\n+function makeComparable(s) {\n+    return s.toLowerCase().replace(\/(\\d+)\/g,\n+        function(n, m) {\n+            return (\"000\" + m).slice(-4);\n+        });\n+}\n+\n+\/\/ Switches between two styles depending on a condition\n+function toggleStyle(classList, condition, trueStyle, falseStyle) {\n+    if (condition) {\n+        classList.remove(falseStyle);\n+        classList.add(trueStyle);\n+    } else {\n+        classList.remove(trueStyle);\n+        classList.add(falseStyle);\n+    }\n+}\n+\n+\/\/ Sorts the rows in a table lexicographically by the content of a specific column\n+function sortTable(header, columnIndex, columns) {\n+    var container = header.parentElement;\n+    var descending = header.classList.contains(sortAsc);\n+    container.querySelectorAll(\"div.table-header\").forEach(\n+        function(header) {\n+            header.classList.remove(sortAsc);\n+            header.classList.remove(sortDesc);\n+        }\n+    )\n+    var cells = container.children;\n+    var rows = [];\n+    for (var i = columns; i < cells.length; i += columns) {\n+        rows.push(Array.prototype.slice.call(cells, i, i + columns));\n+    }\n+    var comparator = function(a, b) {\n+        var ka = makeComparable(a[columnIndex].textContent);\n+        var kb = makeComparable(b[columnIndex].textContent);\n+        if (ka < kb)\n+            return descending ? 1 : -1;\n+        if (ka > kb)\n+            return descending ? -1 : 1;\n+        return 0;\n+    };\n+    var sorted = rows.sort(comparator);\n+    var visible = 0;\n+    sorted.forEach(function(row) {\n+        if (row[0].style.display !== 'none') {\n+            var isEvenRow = visible++ % 2 === 0;\n+        }\n+        row.forEach(function(cell) {\n+            toggleStyle(cell.classList, isEvenRow, evenRowColor, oddRowColor);\n+            container.appendChild(cell);\n+        })\n+    });\n+    toggleStyle(header.classList, descending, sortDesc, sortAsc);\n+}\n+\n+\/\/ Toggles the visibility of a table category in all tables in a page\n+function toggleGlobal(checkbox, selected, columns) {\n+    var display = checkbox.checked ? '' : 'none';\n+    document.querySelectorAll(\"div.table-tabs\").forEach(function(t) {\n+        var id = t.parentElement.getAttribute(\"id\");\n+        var selectedClass = id + \"-tab\" + selected;\n+        \/\/ if selected is empty string it selects all uncategorized entries\n+        var selectUncategorized = !Boolean(selected);\n+        var visible = 0;\n+        document.querySelectorAll('div.' + id)\n+            .forEach(function(elem) {\n+                if (selectUncategorized) {\n+                    if (elem.className.indexOf(selectedClass) === -1) {\n+                        elem.style.display = display;\n+                    }\n+                } else if (elem.classList.contains(selectedClass)) {\n+                    elem.style.display = display;\n+                }\n+                if (elem.style.display === '') {\n+                    var isEvenRow = visible++ % (columns * 2) < columns;\n+                    toggleStyle(elem.classList, isEvenRow, evenRowColor, oddRowColor);\n+                }\n+            });\n+        var displaySection = visible === 0 ? 'none' : '';\n+        t.parentElement.style.display = displaySection;\n+        document.querySelector(\"li#contents-\" + id).style.display = displaySection;\n+    })\n+}\n+\n+\/\/ Shows the elements of a table belonging to a specific category\n+function show(tableId, selected, columns) {\n+    if (tableId !== selected) {\n+        document.querySelectorAll('div.' + tableId + ':not(.' + selected + ')')\n+            .forEach(function(elem) {\n+                elem.style.display = 'none';\n+            });\n+    }\n+    document.querySelectorAll('div.' + selected)\n+        .forEach(function(elem, index) {\n+            elem.style.display = '';\n+            var isEvenRow = index % (columns * 2) < columns;\n+            toggleStyle(elem.classList, isEvenRow, evenRowColor, oddRowColor);\n+        });\n+    updateTabs(tableId, selected);\n+}\n+\n+function updateTabs(tableId, selected) {\n+    document.querySelector('div#' + tableId +' .summary-table')\n+        .setAttribute('aria-labelledby', selected);\n+    document.querySelectorAll('button[id^=\"' + tableId + '\"]')\n+        .forEach(function(tab, index) {\n+            if (selected === tab.id || (tableId === selected && index === 0)) {\n+                tab.className = activeTableTab;\n+                tab.setAttribute('aria-selected', true);\n+                tab.setAttribute('tabindex',0);\n+            } else {\n+                tab.className = tableTab;\n+                tab.setAttribute('aria-selected', false);\n+                tab.setAttribute('tabindex',-1);\n+            }\n+        });\n+}\n+\n+function switchTab(e) {\n+    var selected = document.querySelector('[aria-selected=true]');\n+    if (selected) {\n+        if ((e.keyCode === 37 || e.keyCode === 38) && selected.previousSibling) {\n+            \/\/ left or up arrow key pressed: move focus to previous tab\n+            selected.previousSibling.click();\n+            selected.previousSibling.focus();\n+            e.preventDefault();\n+        } else if ((e.keyCode === 39 || e.keyCode === 40) && selected.nextSibling) {\n+            \/\/ right or down arrow key pressed: move focus to next tab\n+            selected.nextSibling.click();\n+            selected.nextSibling.focus();\n+            e.preventDefault();\n+        }\n+    }\n+}\n+\n+var updateSearchResults = function() {};\n+\n+function indexFilesLoaded() {\n+    return moduleSearchIndex\n+        && packageSearchIndex\n+        && typeSearchIndex\n+        && memberSearchIndex\n+        && tagSearchIndex;\n+}\n+\/\/ Copy the contents of the local snippet to the clipboard\n+function copySnippet(button) {\n+    copyToClipboard(button.nextElementSibling.innerText);\n+    switchCopyLabel(button, button.firstElementChild);\n+}\n+function copyToClipboard(content) {\n+    var textarea = document.createElement(\"textarea\");\n+    textarea.style.height = 0;\n+    document.body.appendChild(textarea);\n+    textarea.value = content;\n+    textarea.select();\n+    document.execCommand(\"copy\");\n+    document.body.removeChild(textarea);\n+}\n+function switchCopyLabel(button, span) {\n+    var copied = span.getAttribute(\"data-copied\");\n+    button.classList.add(\"visible\");\n+    var initialLabel = span.innerHTML;\n+    span.innerHTML = copied;\n+    setTimeout(function() {\n+        button.classList.remove(\"visible\");\n+        setTimeout(function() {\n+            if (initialLabel !== copied) {\n+                span.innerHTML = initialLabel;\n+            }\n+        }, 100);\n+    }, 1900);\n+}\n+function setTopMargin() {\n+    \/\/ Dynamically set scroll margin to accomodate for draft header\n+    var headerHeight = Math.ceil(document.querySelector(\"header\").offsetHeight);\n+    document.querySelector(\":root\")\n+        .style.setProperty(\"--nav-height\", headerHeight + \"px\");\n+}\n+document.addEventListener(\"readystatechange\", (e) => {\n+    if (document.readyState === \"interactive\") {\n+        setTopMargin();\n+    }\n+    if (sessionStorage.getItem(\"sidebar\") === \"hidden\") {\n+        const sidebar = document.querySelector(\".main-grid nav.toc\");\n+        if (sidebar) sidebar.classList.add(\"hide-sidebar\");\n+    }\n+});\n+document.addEventListener(\"DOMContentLoaded\", function(e) {\n+    setTopMargin();\n+    \/\/ Make sure current element is visible in breadcrumb navigation on small displays\n+    const subnav = document.querySelector(\"ol.sub-nav-list\");\n+    if (subnav && subnav.lastElementChild) {\n+        subnav.lastElementChild.scrollIntoView({ behavior: \"instant\", inline: \"start\", block: \"nearest\" });\n+    }\n+    \/\/ Clone TOC sidebar to header for mobile navigation\n+    const navbar = document.querySelector(\"div#navbar-top\");\n+    const sidebar = document.querySelector(\".main-grid nav.toc\");\n+    const main = document.querySelector(\".main-grid main\");\n+    const mainnav = navbar.querySelector(\"ul.nav-list\");\n+    const toggleButton = document.querySelector(\"button#navbar-toggle-button\");\n+    const toc = sidebar ? sidebar.cloneNode(true) : null;\n+    if (toc) {\n+        navbar.appendChild(toc);\n+    }\n+    document.querySelectorAll(\"input.filter-input\").forEach(function(input) {\n+        input.removeAttribute(\"disabled\");\n+        input.value = \"\";\n+        input.addEventListener(\"input\", function(e) {\n+            const pattern = input.value ? input.value.trim()\n+                .replace(\/[\\[\\]{}()*+?.\\\\^$|]\/g, '\\\\$&')\n+                .replace(\/\\s+\/g, \".*\") : \"\";\n+            input.nextElementSibling.style.display = pattern ? \"inline\" : \"none\";\n+            const filter = new RegExp(pattern, \"i\");\n+            input.parentNode.parentNode.querySelectorAll(\"ol.toc-list li\").forEach((li) => {\n+                if (filter.test(li.innerText)) {\n+                    li.removeAttribute(\"style\");\n+                } else {\n+                    li.style.display = \"none\";\n+                }\n+            });\n+            if (expanded) {\n+                expand();\n+            }\n+        });\n+    });\n+    document.querySelectorAll(\"input.reset-filter\").forEach((button) => {\n+        button.removeAttribute(\"disabled\");\n+        button.addEventListener(\"click\", (e) => {\n+            const input = button.previousElementSibling;\n+            input.value = \"\";\n+            input.dispatchEvent(new InputEvent(\"input\"));\n+            input.focus();\n+            if (expanded) {\n+                expand();\n+            } else {\n+                prevHash = null;\n+                handleScroll();\n+            }\n+        })\n+    });\n+    var expanded = false;\n+    var windowWidth;\n+    function collapse() {\n+        if (expanded) {\n+            mainnav.removeAttribute(\"style\");\n+            if (toc) {\n+                toc.removeAttribute(\"style\");\n+            }\n+            toggleButton.classList.remove(\"expanded\")\n+            toggleButton.setAttribute(\"aria-expanded\", \"false\");\n+            expanded = false;\n+        }\n+    }\n+    function expand() {\n+        expanded = true;\n+        mainnav.style.display = \"block\";\n+        mainnav.style.removeProperty(\"height\");\n+        var maxHeight = window.innerHeight - subnav.offsetTop + 4;\n+        var expandedHeight = Math.min(maxHeight, mainnav.scrollHeight + 10);\n+        if (toc) {\n+            toc.style.display = \"flex\";\n+            expandedHeight = Math.min(maxHeight,\n+                Math.max(expandedHeight, toc.querySelector(\"div.toc-header\").offsetHeight\n+                                       + toc.querySelector(\"ol.toc-list\").scrollHeight + 10));\n+            toc.style.height = expandedHeight + \"px\";\n+        }\n+        mainnav.style.height = expandedHeight + \"px\";\n+        toggleButton.classList.add(\"expanded\");\n+        toggleButton.setAttribute(\"aria-expanded\", \"true\");\n+        windowWidth = window.innerWidth;\n+    }\n+    toggleButton.addEventListener(\"click\", (e) => {\n+        if (expanded) {\n+            collapse();\n+        } else {\n+            expand();\n+        }\n+    });\n+    if (toc) {\n+        toc.querySelectorAll(\"a\").forEach((link) => {\n+            link.addEventListener(\"click\", collapse);\n+        });\n+    }\n+    document.addEventListener('keydown', (e) => {\n+        if (e.key === \"Escape\") collapse();\n+    });\n+    document.querySelector(\"main\").addEventListener(\"click\", collapse);\n+    const searchInput = document.getElementById(\"search-input\");\n+    if (searchInput) searchInput.addEventListener(\"focus\", collapse);\n+    document.querySelectorAll(\"h1, h2, h3, h4, h5, h6\")\n+        .forEach((hdr, idx) => {\n+            \/\/ Create anchor links for headers with an associated id attribute\n+            var id = hdr.getAttribute(\"id\") || hdr.parentElement.getAttribute(\"id\")\n+                || (hdr.querySelector(\"a\") && hdr.querySelector(\"a\").getAttribute(\"id\"));\n+            if (id) {\n+                var template = document.createElement('template');\n+                template.innerHTML =\" <a href='#\" + encodeURI(id) + \"' class='anchor-link' aria-label='\" + linkToSection\n+                    + \"'><img src='\" + pathtoroot + \"resource-files\/link.svg' alt='\" + linkIcon +\"' tabindex='0'\"\n+                    + \" width='16' height='16'><\/a>\";\n+                hdr.append(...template.content.childNodes);\n+            }\n+        });\n+    var sections;\n+    var scrollTimeout;\n+    var scrollTimeoutNeeded;\n+    var prevHash;\n+    function initSectionData() {\n+        sections = [{ id: \"\", top: 0 }].concat(Array.from(main.querySelectorAll(\"section[id], h2[id], h2 a[id], div[id]\"))\n+            .filter((e) => {\n+                return sidebar.querySelector(\"a[href=\\\"#\" + encodeURI(e.getAttribute(\"id\")) + \"\\\"]\") !== null\n+            }).map((e) => {\n+                return {\n+                    id: e.getAttribute(\"id\"),\n+                    top: e.offsetTop\n+                };\n+            }));\n+    }\n+    function setScrollTimeout() {\n+        clearTimeout(scrollTimeout);\n+        scrollTimeoutNeeded = false;\n+        scrollTimeout = setTimeout(() => {\n+            scrollTimeout = null;\n+            handleScroll();\n+        }, 50);\n+    }\n+    function handleScroll() {\n+        if (!sidebar || !sidebar.offsetParent || sidebar.classList.contains(\"hide-sidebar\")) {\n+            return;\n+        }\n+        if (scrollTimeout || scrollTimeoutNeeded) {\n+            setScrollTimeout();\n+            return;\n+        }\n+        var scrollTop = document.documentElement.scrollTop;\n+        var scrollHeight = document.documentElement.scrollHeight;\n+        var currHash = null;\n+        if (scrollHeight - scrollTop < window.innerHeight + 10) {\n+            \/\/ Select last item if at bottom of the page\n+            currHash = \"#\" + encodeURI(sections.at(-1).id);\n+        } else {\n+            for (var i = 0; i < sections.length; i++) {\n+                var top = sections[i].top;\n+                var bottom = sections[i + 1] ? sections[i + 1].top : scrollHeight;\n+                if (top + ((bottom - top) \/ 2) > scrollTop || bottom > scrollTop + (window.innerHeight \/ 3)) {\n+                    currHash = \"#\" + encodeURI(sections[i].id);\n+                    break;\n+                }\n+            }\n+        }\n+        if (currHash !== prevHash) {\n+            setSelected(currHash);\n+        }\n+    }\n+    function setSelected(hash) {\n+        var prev = sidebar.querySelector(\"a.current-selection\");\n+        if (prev)\n+            prev.classList.remove(\"current-selection\");\n+        prevHash = hash;\n+        if (hash) {\n+            var curr = sidebar.querySelector(\"ol.toc-list a[href=\\\"\" + hash + \"\\\"]\");\n+            if (curr) {\n+                curr.classList.add(\"current-selection\");\n+                curr.scrollIntoView({ behavior: \"instant\", block: \"nearest\" });\n+            }\n+        }\n+    }\n+    if (sidebar) {\n+        initSectionData();\n+        document.querySelectorAll(\"a[href^='#']\").forEach((link) => {\n+            link.addEventListener(\"click\", (e) => {\n+                scrollTimeoutNeeded = true;\n+                setSelected(link.getAttribute(\"href\"));\n+            })\n+        });\n+        sidebar.querySelector(\"button.hide-sidebar\").addEventListener(\"click\", () => {\n+            sidebar.classList.add(\"hide-sidebar\");\n+            sessionStorage.setItem(\"sidebar\", \"hidden\");\n+        });\n+        sidebar.querySelector(\"button.show-sidebar\").addEventListener(\"click\", () => {\n+            sidebar.classList.remove(\"hide-sidebar\");\n+            sessionStorage.removeItem(\"sidebar\");\n+            initSectionData();\n+            handleScroll();\n+        });\n+        window.addEventListener(\"hashchange\", (e) => {\n+            scrollTimeoutNeeded = true;\n+        });\n+        if (document.location.hash) {\n+            scrollTimeoutNeeded = true;\n+            setSelected(document.location.hash);\n+        } else {\n+            handleScroll();\n+        }\n+        window.addEventListener(\"scroll\", handleScroll);\n+        window.addEventListener(\"scrollend\", () => {\n+            if (scrollTimeout) {\n+                clearTimeout(scrollTimeout);\n+                scrollTimeout = null;\n+                handleScroll();\n+            }\n+        })\n+    }\n+    \/\/ Resize handler\n+    function handleResize(e) {\n+        if (expanded) {\n+            if (windowWidth != window.innerWidth) {\n+                collapse();\n+            } else {\n+                expand();\n+            }\n+        }\n+        if (sections) {\n+            initSectionData();\n+            prevHash = null;\n+            handleScroll();\n+        }\n+        setTopMargin();\n+    }\n+    window.addEventListener(\"orientationchange\", handleResize);\n+    window.addEventListener(\"resize\", handleResize);\n+});\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/script.js.template","additions":481,"deletions":0,"binary":false,"changes":481,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,2 +34,0 @@\n-    linkIcon: \"##REPLACE:doclet.Link_icon##\",\n-    linkToSection: \"##REPLACE:doclet.Link_to_section##\"\n@@ -258,3 +256,0 @@\n-    if (term.length === 0) {\n-        return this.close();\n-    }\n@@ -410,40 +405,0 @@\n-    var expanded = false;\n-    var windowWidth;\n-    function collapse() {\n-        if (expanded) {\n-            $(\"div#navbar-top\").removeAttr(\"style\");\n-            $(\"button#navbar-toggle-button\")\n-                .removeClass(\"expanded\")\n-                .attr(\"aria-expanded\", \"false\");\n-            expanded = false;\n-        }\n-    }\n-    $(\"button#navbar-toggle-button\").click(function (e) {\n-        if (expanded) {\n-            collapse();\n-        } else {\n-            var navbar = $(\"div#navbar-top\");\n-            navbar.height(navbar.prop(\"scrollHeight\"));\n-            $(\"button#navbar-toggle-button\")\n-                .addClass(\"expanded\")\n-                .attr(\"aria-expanded\", \"true\");\n-            expanded = true;\n-            windowWidth = window.innerWidth;\n-        }\n-    });\n-    $(\"ul.sub-nav-list-small li a\").click(collapse);\n-    $(\"input#search-input\").focus(collapse);\n-    $(\"main\").click(collapse);\n-    $(\"section[id] > :header, :header[id], :header:has(a[id])\").each(function(idx, el) {\n-        \/\/ Create anchor links for headers with an associated id attribute\n-        var hdr = $(el);\n-        var id = hdr.attr(\"id\") || hdr.parent(\"section\").attr(\"id\") || hdr.children(\"a\").attr(\"id\");\n-        if (id) {\n-            hdr.append(\" <a href='#\" + id + \"' class='anchor-link' aria-label='\" + messages.linkToSection\n-                + \"'><img src='\" + pathtoroot + \"resource-files\/link.svg' alt='\" + messages.linkIcon +\"' tabindex='0'\"\n-                + \" width='16' height='16'><\/a>\");\n-        }\n-    });\n-    $(window).on(\"orientationchange\", collapse).on(\"resize\", function(e) {\n-        if (expanded && windowWidth !== window.innerWidth) collapse();\n-    });\n@@ -451,1 +406,1 @@\n-    var reset = $(\"#reset-button\");\n+    var reset = $(\"#reset-search\");\n@@ -455,1 +410,7 @@\n-        source: doSearch,\n+        source: function(request, response) {\n+            reset.css(\"display\", \"inline\");\n+            if (request.term.trim() === \"\") {\n+                return this.close();\n+            }\n+            return doSearch(request, response);\n+        },\n@@ -463,0 +424,6 @@\n+        close: function(event, ui) {\n+            reset.css(\"display\", search.val() ? \"inline\" : \"none\");\n+        },\n+        change: function(event, ui) {\n+            reset.css(\"display\", search.val() ? \"inline\" : \"none\");\n+        },\n@@ -483,0 +450,1 @@\n+        reset.css(\"display\", \"none\");\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/search.js.template","additions":16,"deletions":48,"binary":false,"changes":64,"status":"modified"},{"patch":"@@ -18,0 +18,1 @@\n+    --block-font-size: 14px;\n@@ -19,0 +20,3 @@\n+    --nav-font-size: 13.2px;\n+    \/* Line height for continuous text blocks *\/\n+    --block-line-height: 1.4em;\n@@ -62,0 +66,5 @@\n+    \/* Navigation bar dimensions *\/\n+    --top-nav-height: 44px;\n+    --sub-nav-height: 34px;\n+    --nav-height: calc(var(--top-nav-height) + var(--sub-nav-height));\n+    scroll-behavior: smooth;\n@@ -79,10 +88,2 @@\n-iframe {\n-    margin:0;\n-    padding:0;\n-    height:100%;\n-    width:100%;\n-    overflow-y:scroll;\n-    border:none;\n-}\n-:not(input)[id] {\n-    scroll-margin-top: 78px;\n+main [id] {\n+    scroll-margin-top: calc(var(--nav-height) + 6px);\n@@ -94,1 +95,1 @@\n-a[href]:hover, a[href]:focus {\n+a[href]:hover, a[href]:active {\n@@ -100,1 +101,1 @@\n-    font-size:1em;\n+    font-size:var(--code-font-size);\n@@ -133,2 +134,0 @@\n-    padding-top:4px;\n-    margin-top:8px;\n@@ -155,0 +154,3 @@\n+hr {\n+    border-color: #aaa;\n+}\n@@ -165,2 +167,3 @@\n-    float:right;\n-    padding:0 21px 8px 8px;\n+    flex: 0 0 auto;\n+    padding:0 20px;\n+    margin:0;\n@@ -168,2 +171,2 @@\n-    margin-top:-9px;\n-    height:2.9em;\n+    max-width: 50%;\n+    white-space: nowrap;\n@@ -172,1 +175,0 @@\n-    margin-left:.5em;\n@@ -181,1 +183,1 @@\n-        z-index:1;\n+        z-index:2;\n@@ -185,0 +187,7 @@\n+.nav-content {\n+    display:flex;\n+    flex-direction: row;\n+    align-items: center;\n+    width: 100%;\n+    height: 100%;\n+}\n@@ -188,1 +197,0 @@\n-    float:left;\n@@ -190,4 +198,2 @@\n-    clear:right;\n-    min-height:2.8em;\n-    padding:10px 0 0 0;\n-    overflow:hidden;\n+    height:var(--top-nav-height);\n+    overflow:visible;\n@@ -195,0 +201,9 @@\n+    position:relative;\n+}\n+.top-nav nav.toc {\n+    display: none;\n+    flex-direction: column;\n+}\n+.top-nav nav.toc button.show-sidebar,\n+.top-nav nav.toc button.hide-sidebar {\n+    display: none;\n@@ -199,2 +214,12 @@\n-ul.sub-nav-list-small {\n-    display: none;\n+ul.nav-list {\n+    display:inline-flex;\n+    margin:0;\n+    padding-left:4px;\n+    flex: 1 1 auto;\n+    white-space: nowrap;\n+}\n+ul.nav-list li {\n+    list-style:none;\n+    padding: 5px 6px;\n+    text-transform:uppercase;\n+    height: 1.2em;\n@@ -202,1 +227,1 @@\n-.sub-nav {\n+div.sub-nav {\n@@ -204,1 +229,0 @@\n-    float:left;\n@@ -207,1 +231,2 @@\n-    font-size:0.857em;\n+    font-size:var(--nav-font-size);\n+    height: var(--sub-nav-height);\n@@ -209,5 +234,11 @@\n-.sub-nav div {\n-    clear:left;\n-    float:left;\n-    padding:6px;\n-    text-transform:uppercase;\n+ol.sub-nav-list {\n+    flex: 1 1 90%;\n+    line-height: 1.8em;\n+    display: inline-flex;\n+    overflow: auto;\n+    scroll-snap-type: x mandatory;\n+    scroll-padding-left: 13px;\n+    scrollbar-width: none;\n+    padding-left:6px;\n+    white-space: nowrap;\n+    margin:0;\n@@ -215,2 +246,2 @@\n-.sub-nav .sub-nav-list {\n-    padding-top:4px;\n+ol.sub-nav-list::-webkit-scrollbar {\n+    display: none;\n@@ -218,4 +249,3 @@\n-ul.nav-list {\n-    display:block;\n-    margin:0 25px 0 0;\n-    padding:0;\n+ol.sub-nav-list li {\n+    list-style:none;\n+    scroll-snap-align: start;\n@@ -223,4 +253,2 @@\n-ul.sub-nav-list {\n-    float:left;\n-    margin:0 25px 0 0;\n-    padding:0;\n+ol.sub-nav-list a {\n+    padding: 3px;\n@@ -228,5 +256,3 @@\n-ul.nav-list li {\n-    list-style:none;\n-    float:left;\n-    padding: 5px 6px;\n-    text-transform:uppercase;\n+ol.sub-nav-list a.current-selection {\n+    background-color: var(--section-background-color);\n+    border-radius: 4px;\n@@ -235,1 +261,1 @@\n-    float:right;\n+    flex: 1 1 10%;\n@@ -238,2 +264,0 @@\n-    clear:none;\n-    text-align:right;\n@@ -241,0 +265,1 @@\n+    white-space: nowrap;\n@@ -242,5 +267,1 @@\n-ul.sub-nav-list li {\n-    list-style:none;\n-    float:left;\n-}\n-.top-nav a:link, .top-nav a:active, .top-nav a:visited {\n+.top-nav .nav-list a:link, .top-nav .nav-list a:active, .top-nav .nav-list a:visited {\n@@ -251,1 +272,1 @@\n-.top-nav a:hover {\n+.top-nav .nav-list a:hover {\n@@ -257,1 +278,1 @@\n-    margin: auto 5px;\n+    margin: 0 5px;\n@@ -301,0 +322,1 @@\n+    overflow-x:auto;\n@@ -313,0 +335,12 @@\n+.main-grid {\n+    display: flex;\n+    flex-direction: row;\n+}\n+.main-grid main {\n+    flex: 2.6 1 0;\n+    min-width: 240px\n+}\n+.main-grid nav.toc {\n+    flex: 1 1 0;\n+    min-width: 240px;\n+}\n@@ -331,1 +365,1 @@\n-    font-size:1em;\n+    font-size:var(--block-font-size);\n@@ -345,0 +379,114 @@\n+\/*\n+ * Styles for table of contents.\n+ *\/\n+.main-grid nav.toc {\n+    background-color: var(--section-background-color);\n+    border-right: 1px solid var(--border-color);\n+    position: sticky;\n+    top: calc(var(--nav-height));\n+    max-height: calc(100vh - var(--nav-height));\n+    display: flex;\n+    flex-direction: column;\n+    font-family: var(--body-font-family);\n+    z-index: 1;\n+}\n+.main-grid nav.toc div.toc-header {\n+    background-color: var(--section-background-color);\n+    border-right: 1px solid var(--border-color);\n+    top: var(--nav-height);\n+    z-index: 1;\n+    padding: 15px 20px;\n+}\n+.main-grid nav.toc > ol.toc-list {\n+    max-height: calc(100vh - var(--nav-height) - 100px);\n+    padding-left: 12px;\n+}\n+.main-grid nav.toc button {\n+    position: absolute;\n+    bottom: 16px;\n+    z-index: 3;\n+    background-color: var(--section-background-color);\n+    color: #666666;\n+    font-size: 0.76rem;\n+    border: none;\n+    cursor: pointer;\n+    padding: 6px 10px;\n+    white-space: nowrap;\n+}\n+.main-grid nav.toc button.hide-sidebar {\n+    right: 0;\n+}\n+.main-grid nav.toc button.show-sidebar {\n+    left: 0;\n+    display: none;\n+}\n+.main-grid nav.toc button span {\n+    display: none;\n+}\n+.main-grid nav.toc button:hover {\n+    color: var(--body-text-color);\n+    border: 1px solid var(--subnav-background-color);\n+}\n+.main-grid nav.toc button:active {\n+    background-color: var(--subnav-background-color);\n+    color: var(--link-color-active);\n+}\n+.main-grid nav.toc button:hover span,\n+.main-grid nav.toc button:active span  {\n+    display: inline;\n+}\n+.main-grid nav.toc button:hover {\n+    box-shadow: 1px 1px 5px rgba(0,0,0,0.2);\n+}\n+.main-grid nav.toc.hide-sidebar {\n+    min-width: revert;\n+    max-width: 28px;\n+}\n+.main-grid nav.toc.hide-sidebar div.toc-header,\n+.main-grid nav.toc.hide-sidebar ol.toc-list,\n+.main-grid nav.toc.hide-sidebar button.hide-sidebar {\n+    display: none;\n+}\n+.main-grid nav.toc.hide-sidebar button.show-sidebar {\n+    display: inline;\n+}\n+nav.toc div.toc-header {\n+    padding: 15px;\n+    display: inline-flex;\n+    align-items: center;\n+    color: var(--body-text-color);\n+    background-color: var(--body-background-color);\n+    font-size: 0.856em;\n+    font-weight: bold;\n+    white-space: nowrap;\n+    overflow-x: hidden;\n+    position: sticky;\n+    min-height: 20px;\n+}\n+nav.toc > ol.toc-list {\n+    overflow: hidden auto;\n+    overscroll-behavior: contain;\n+}\n+nav.toc ol.toc-list {\n+    list-style: none;\n+    padding-left: 8px;\n+    margin: 0;\n+}\n+nav.toc ol.toc-list ol.toc-list {\n+    margin-left: 8px;\n+}\n+nav.toc ol.toc-list li {\n+    margin: 0;\n+    font-size: var(--nav-font-size);\n+    overflow-x: hidden;\n+}\n+a.current-selection {\n+    font-weight: bold;\n+}\n+nav.toc a {\n+    display: block;\n+    padding: 8px;\n+}\n+nav.toc a.current-selection {\n+    background-color: var(--subnav-background-color);\n+}\n@@ -362,0 +510,3 @@\n+main > div.inheritance {\n+    overflow-x:auto;\n+}\n@@ -366,1 +517,1 @@\n-    margin:10px 0 10px 0;\n+    margin:4px 0 10px 0;\n@@ -602,1 +753,1 @@\n-    font-size:var(--body-font-size);\n+    font-size:var(--block-font-size);\n@@ -604,0 +755,1 @@\n+    line-height:var(--block-line-height);\n@@ -649,1 +801,0 @@\n-.module-label-in-package, .module-label-in-type, .package-label-in-type,\n@@ -689,3 +840,0 @@\n-nav {\n-    overflow:hidden;\n-}\n@@ -715,2 +863,1 @@\n-    overflow-y:auto;\n-    overflow-x:auto;\n+    overflow:auto;\n@@ -723,1 +870,1 @@\n-    z-index:1;\n+    z-index:10;\n@@ -741,1 +888,1 @@\n-    z-index: 2;\n+    z-index: 10;\n@@ -759,1 +906,5 @@\n-#search-input, #page-search-input {\n+.ui-menu .ui-menu-item-wrapper {\n+    padding-top: 5px;\n+    padding-bottom: 5px;\n+}\n+input[type=\"text\"] {\n@@ -767,0 +918,1 @@\n+    border-radius: 4px;\n@@ -768,1 +920,5 @@\n-    width: 250px;\n+    font-size: var(--nav-font-size);\n+    height: 17px;\n+}\n+input#search-input, input#page-search-input {\n+    width: calc(180px + 10vw);\n@@ -771,2 +927,4 @@\n-#search-input {\n-    margin-left: 4px;\n+input#search-input {\n+    margin: 0 4px;\n+    padding-right: 18px;\n+    max-width: 340px;\n@@ -774,1 +932,7 @@\n-#reset-button {\n+input.filter-input {\n+    width: 40%;\n+    max-width: 140px;\n+    margin: 0 4px;\n+    padding-right: 18px;\n+}\n+input#reset-search, input.reset-filter {\n@@ -783,3 +947,0 @@\n-    position:absolute;\n-    right:12px;\n-    top:10px;\n@@ -787,0 +948,1 @@\n+    display:none;\n@@ -788,1 +950,11 @@\n-::placeholder {\n+input#reset-search {\n+    position:absolute;\n+    right:15px;\n+    top:11px;\n+}\n+input.reset-filter {\n+    position: relative;\n+    right: 20px;\n+    top: 0;\n+}\n+input::placeholder {\n@@ -852,1 +1024,1 @@\n-    z-index: 1;\n+    z-index: 5;\n@@ -877,0 +1049,4 @@\n+.help-section {\n+    font-size: var(--block-font-size);\n+    line-height: var(--block-line-height);\n+}\n@@ -1103,4 +1279,4 @@\n-@media screen and (max-width: 920px) {\n-    header {\n-        max-height: 100vh;\n-        overflow-y: auto;\n+@media screen and (max-width: 1050px) {\n+    .summary section[class$=\"-summary\"], .details section[class$=\"-details\"],\n+    .class-uses .detail, .serialized-class-details {\n+        padding: 0 10px 5px 8px;\n@@ -1108,3 +1284,2 @@\n-    div#navbar-top {\n-        height: 2.8em;\n-        transition: height 0.35s ease;\n+    input#search-input {\n+        width: 22vw;\n@@ -1112,7 +1287,4 @@\n-    ul.nav-list {\n-        display: block;\n-        width: 40%;\n-        float:left;\n-        clear: left;\n-        margin: 10px 0 0 0;\n-        padding: 0;\n+}\n+@media screen and (max-width: 920px) {\n+    .main-grid nav.toc {\n+        display: none;\n@@ -1120,5 +1292,9 @@\n-    ul.nav-list li {\n-        float: none;\n-        padding: 6px;\n-        margin-left: 10px;\n-        margin-top: 2px;\n+    .top-nav nav.toc {\n+        display: none;\n+        position: absolute;\n+        top: var(--top-nav-height);\n+        left: 40vw;\n+        width: 60vw;\n+        z-index: 7;\n+        background-color: var(--section-background-color);\n+        box-sizing: border-box;\n@@ -1126,10 +1302,5 @@\n-    ul.sub-nav-list-small {\n-        display:block;\n-        height: 100%;\n-        width: 50%;\n-        float: right;\n-        clear: right;\n-        background-color: var(--subnav-background-color);\n-        color: var(--body-text-color);\n-        margin: 6px 0 0 0;\n-        padding: 0;\n+    .top-nav nav.toc div.toc-header {\n+        padding: 6px 15px;\n+        font-size: 0.94em;\n+        background-color: var(--section-background-color);\n+        top: calc(var(--top-nav-height) + 10px);\n@@ -1137,2 +1308,2 @@\n-    ul.sub-nav-list-small ul {\n-        padding-left: 20px;\n+    .top-nav nav.toc ol.toc-list li {\n+        font-size: 1.04em;\n@@ -1140,1 +1311,2 @@\n-    ul.sub-nav-list-small a:link, ul.sub-nav-list-small a:visited {\n+    nav.toc a:link, nav.toc a:visited {\n+        text-decoration:none;\n@@ -1143,1 +1315,2 @@\n-    ul.sub-nav-list-small a:hover {\n+    nav.toc a[href]:hover, nav.toc a[href]:focus {\n+        text-decoration:none;\n@@ -1146,6 +1319,2 @@\n-    ul.sub-nav-list-small li {\n-        list-style:none;\n-        float:none;\n-        padding: 6px;\n-        margin-top: 1px;\n-        text-transform:uppercase;\n+    :root {\n+        scroll-behavior: auto;\n@@ -1153,2 +1322,4 @@\n-    ul.sub-nav-list-small > li {\n-        margin-left: 10px;\n+    header {\n+        max-height: 100vh;\n+        overflow-y: visible;\n+        overscroll-behavior: contain;\n@@ -1156,2 +1327,2 @@\n-    ul.sub-nav-list-small li p {\n-        margin: 5px 0;\n+    nav {\n+        overflow: visible;\n@@ -1159,1 +1330,1 @@\n-    div#navbar-sub-list {\n+    ul.nav-list {\n@@ -1161,0 +1332,14 @@\n+        position: absolute;\n+        top: var(--top-nav-height);\n+        overflow: auto;\n+        z-index: 7;\n+        background-color: var(--navbar-background-color);\n+        width: 40%;\n+        padding: 0;\n+        box-sizing: border-box;\n+    }\n+    ul.nav-list li {\n+        float: none;\n+        padding: 6px;\n+        margin-left: 10px;\n+        margin-top: 2px;\n@@ -1165,0 +1350,7 @@\n+    .top-nav div.nav-menu-button {\n+        flex: 1 1 auto;\n+    }\n+    .sub-nav ol.sub-nav-list {\n+        margin-left: 4px;\n+        padding-left: 4px;\n+    }\n@@ -1170,1 +1362,0 @@\n-        float: left;\n@@ -1180,1 +1371,1 @@\n-        margin: 1px 0 4px 0;\n+        margin: 4px 0;\n@@ -1182,1 +1373,0 @@\n-        transition: all 0.1s;\n@@ -1202,0 +1392,1 @@\n+        max-width: 90%;\n@@ -1206,3 +1397,0 @@\n-    ul.sub-nav-list-small > li {\n-        margin-left: 5px;\n-    }\n@@ -1210,5 +1398,1 @@\n-        padding: 10px;\n-    }\n-    .summary section[class$=\"-summary\"], .details section[class$=\"-details\"],\n-    .class-uses .detail, .serialized-class-details {\n-        padding: 0 8px 5px 8px;\n+        padding: 10px 12px;\n@@ -1220,16 +1404,2 @@\n-@media screen and (max-width: 400px) {\n-    .about-language {\n-        font-size: 10px;\n-        padding-right: 12px;\n-    }\n-}\n-@media screen and (max-width: 400px) {\n-    .nav-list-search {\n-        width: 94%;\n-    }\n-    #search-input, #page-search-input {\n-        width: 70%;\n-    }\n-}\n-@media screen and (max-width: 320px) {\n-    .nav-list-search > label {\n+@media screen and (max-width: 600px) {\n+    .nav-list-search > a {\n@@ -1238,2 +1408,2 @@\n-    .nav-list-search {\n-        width: 90%;\n+    input#search-input {\n+        width: 18vw;\n@@ -1241,2 +1411,3 @@\n-    #search-input, #page-search-input {\n-        width: 80%;\n+    .summary section[class$=\"-summary\"], .details section[class$=\"-details\"],\n+    .class-uses .detail, .serialized-class-details {\n+        padding: 0;\n@@ -1245,1 +1416,0 @@\n-\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/stylesheet.css","additions":327,"deletions":157,"binary":false,"changes":484,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2010, 2023, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2010, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -235,1 +235,1 @@\n-doclet.search=SEARCH\n+doclet.search=Search\n@@ -237,0 +237,1 @@\n+doclet.search_in_documentation=Search in documentation\n@@ -250,0 +251,6 @@\n+doclet.table_of_contents=Table of contents\n+doclet.hide_sidebar=Hide sidebar\n+doclet.show_sidebar=Show sidebar\n+doclet.filter_label=Filter\n+doclet.filter_table_of_contents=Filter table of contents\n+doclet.filter_reset=Reset\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/resources\/doclets.properties","additions":9,"deletions":2,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2012, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2012, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -93,1 +93,1 @@\n-        if (newPath.isEmpty() && isEmpty(fragment)) {\n+        if (newPath.isEmpty() && fragment == null) {\n@@ -124,1 +124,1 @@\n-        if (path != null && isEmpty(fragment))\n+        if (path != null && fragment == null)\n@@ -130,1 +130,1 @@\n-        if (!isEmpty(fragment))\n+        if (fragment != null)\n@@ -134,4 +134,0 @@\n-\n-    private static boolean isEmpty(String s) {\n-        return (s == null) || s.isEmpty();\n-    }\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/util\/DocLink.java","additions":4,"deletions":8,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -97,0 +97,3 @@\n+    \/** The name of the template of the default javascript file. *\/\n+    public static final DocPath SCRIPT_JS_TEMPLATE = DocPath.create(\"script.js.template\");\n+\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/util\/DocPaths.java","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -71,1 +71,1 @@\n-                \"<a href=\\\"#nested-class-summary\\\">\",\n+                \"<a href=\\\"#nested-class-summary\\\" tabindex=\\\"0\\\">\",\n@@ -75,1 +75,1 @@\n-                \"<a href=\\\"#method-summary\\\">\",\n+                \"<a href=\\\"#method-summary\\\" tabindex=\\\"0\\\">\",\n@@ -79,1 +79,1 @@\n-                \"<a href=\\\"#field-detail\\\">\",\n+                \"<a href=\\\"#field-detail\\\" tabindex=\\\"0\\\">\",\n@@ -83,1 +83,1 @@\n-                \"<a href=\\\"#constructor-detail\\\">\");\n+                \"<a href=\\\"#constructor-detail\\\" tabindex=\\\"0\\\">\");\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testAnchorNames\/TestAnchorNames.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2004, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2004, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -55,2 +55,1 @@\n-                    <li>Summary:&nbsp;<\/li>\n-                    <li><a href=\"#field-summary\">Field<\/a>&nbsp;|&nbsp;<\/li>\"\"\",\n+                    <li><a href=\"#field-summary\" tabindex=\"0\">Field Summary<\/a><\/li>\"\"\",\n@@ -58,2 +57,3 @@\n-                    <li>Detail:&nbsp;<\/li>\n-                    <li><a href=\"#field-detail\">Field<\/a>&nbsp;|&nbsp;<\/li>\"\"\",\n+                    <li><a href=\"#field-detail\" tabindex=\"0\">Field Details<\/a>\n+                    <ol class=\"toc-list\">\n+                    <li><a href=\"#DEFAULT_NAME\" tabindex=\"0\">DEFAULT_NAME<\/a><\/li>\"\"\",\n@@ -76,12 +76,11 @@\n-                    <ul class=\"sub-nav-list\">\n-                    <li>Summary:&nbsp;<\/li>\n-                    <li>Field&nbsp;|&nbsp;<\/li>\n-                    <li><a href=\"#annotation-interface-required-element-summary\">Required<\/a>&nbsp;|&nbsp;<\/li>\n-                    <li><a href=\"#annotation-interface-optional-element-summary\">Optional<\/a><\/li>\n-                    <\/ul>\"\"\",\n-                \"\"\"\n-                    <ul class=\"sub-nav-list\">\n-                    <li>Detail:&nbsp;<\/li>\n-                    <li>Field&nbsp;|&nbsp;<\/li>\n-                    <li><a href=\"#annotation-interface-element-detail\">Element<\/a><\/li>\n-                    <\/ul>\"\"\");\n+                    <ol class=\"toc-list\">\n+                    <li><a href=\"#\" tabindex=\"0\">Description<\/a><\/li>\n+                    <li><a href=\"#annotation-interface-required-element-summary\" tabindex=\"0\">Required Element Summary<\/a><\/li>\n+                    <li><a href=\"#annotation-interface-optional-element-summary\" tabindex=\"0\">Optional Element Summary<\/a><\/li>\n+                    <li><a href=\"#annotation-interface-element-detail\" tabindex=\"0\">Element Details<\/a>\n+                    <ol class=\"toc-list\">\n+                    <li><a href=\"#value()\" tabindex=\"0\">value<\/a><\/li>\n+                    <li><a href=\"#optional()\" tabindex=\"0\">optional<\/a><\/li>\n+                    <\/ol>\n+                    <\/li>\n+                    <\/ol>\"\"\");\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testAnnotationTypes\/TestAnnotationTypes.java","additions":16,"deletions":17,"binary":false,"changes":33,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2002, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2002, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -110,7 +110,11 @@\n-                    <section class=\"packages\">\n-                    <h2 title=\"Contents\">Contents<\/h2>\n-                    <ul class=\"contents-list\">\n-                    <li><a href=\"#p1.p2a\">p1.p2a.*<\/a><\/li>\n-                    <li><a href=\"#p1.p2b\">p1.p2b.*<\/a><\/li>\n-                    <\/ul>\n-                    <\/section>\"\"\");\n+                    <nav role=\"navigation\" class=\"toc\" aria-label=\"Table of contents\">\n+                    <div class=\"toc-header\">Contents&nbsp;\"\"\",\n+                \"\"\"\n+                    <li><a href=\"#\" tabindex=\"0\">Constant Field Values<\/a>\n+                    <ol class=\"toc-list\">\n+                    <li><a href=\"#p1.p2a\" tabindex=\"0\">p1.p2a.*<\/a><\/li>\n+                    <li><a href=\"#p1.p2b\" tabindex=\"0\">p1.p2b.*<\/a><\/li>\n+                    <\/ol>\n+                    <\/li>\n+                    <\/ol>\n+                    <\/nav>\"\"\");\n@@ -143,6 +147,10 @@\n-                    <section class=\"packages\">\n-                    <h2 title=\"Contents\">Contents<\/h2>\n-                    <ul class=\"contents-list\">\n-                    <li><a href=\"#unnamed-package\">Unnamed Package<\/a><\/li>\n-                    <\/ul>\n-                    <\/section>\"\"\");\n+                    <nav role=\"navigation\" class=\"toc\" aria-label=\"Table of contents\">\n+                    <div class=\"toc-header\">Contents&nbsp;\"\"\",\n+                \"\"\"\n+                    <li><a href=\"#\" tabindex=\"0\">Constant Field Values<\/a>\n+                    <ol class=\"toc-list\">\n+                    <li><a href=\"#unnamed-package\" tabindex=\"0\">Unnamed Package<\/a><\/li>\n+                    <\/ol>\n+                    <\/li>\n+                    <\/ol>\n+                    <\/nav>\"\"\");\n@@ -182,7 +190,11 @@\n-                    <section class=\"packages\">\n-                    <h2 title=\"Contents\">Contents<\/h2>\n-                    <ul class=\"contents-list\">\n-                    <li><a href=\"#unnamed-package\">Unnamed Package<\/a><\/li>\n-                    <li><a href=\"#p1.p2a\">p1.p2a.*<\/a><\/li>\n-                    <\/ul>\n-                    <\/section>\"\"\");\n+                    <nav role=\"navigation\" class=\"toc\" aria-label=\"Table of contents\">\n+                    <div class=\"toc-header\">Contents&nbsp;\"\"\",\n+                \"\"\"\n+                   <li><a href=\"#\" tabindex=\"0\">Constant Field Values<\/a>\n+                   <ol class=\"toc-list\">\n+                   <li><a href=\"#unnamed-package\" tabindex=\"0\">Unnamed Package<\/a><\/li>\n+                   <li><a href=\"#p1.p2a\" tabindex=\"0\">p1.p2a.*<\/a><\/li>\n+                   <\/ol>\n+                   <\/li>\n+                   <\/ol>\n+                   <\/nav>\"\"\");\n@@ -248,8 +260,12 @@\n-                    <section class=\"packages\">\n-                    <h2 title=\"Contents\">Contents<\/h2>\n-                    <ul class=\"contents-list\">\n-                    <li><a href=\"#p.a\">p.a.*<\/a><\/li>\n-                    <li><a href=\"#p.b\">p.b.*<\/a><\/li>\n-                    <li><a href=\"#p.q\">p.q.*<\/a><\/li>\n-                    <\/ul>\n-                    <\/section>\"\"\");\n+                    <nav role=\"navigation\" class=\"toc\" aria-label=\"Table of contents\">\n+                    <div class=\"toc-header\">Contents&nbsp;\"\"\",\n+                \"\"\"\n+                    <li><a href=\"#\" tabindex=\"0\">Constant Field Values<\/a>\n+                    <ol class=\"toc-list\">\n+                    <li><a href=\"#p.a\" tabindex=\"0\">p.a.*<\/a><\/li>\n+                    <li><a href=\"#p.b\" tabindex=\"0\">p.b.*<\/a><\/li>\n+                    <li><a href=\"#p.q\" tabindex=\"0\">p.q.*<\/a><\/li>\n+                    <\/ol>\n+                    <\/li>\n+                    <\/ol>\n+                    <\/nav>\"\"\");\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testConstantValuesPage\/TestConstantValuesPage.java","additions":45,"deletions":29,"binary":false,"changes":74,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -59,5 +59,0 @@\n-                \"phi-HEADER-phi\",\n-                \"\"\"\n-                    <a href=\"..\/..\/module-summary.html\">Module<\/a>\"\"\",\n-                \"\"\"\n-                    <a href=\"..\/package-summary.html\">Package<\/a>\"\"\",\n@@ -65,1 +60,1 @@\n-                    <a href=\"..\/..\/..\/overview-tree.html\">Tree<\/a>\"\"\",\n+                    <a href=\"..\/package-tree.html\">Tree<\/a>\"\"\",\n@@ -70,0 +65,5 @@\n+                \"phi-HEADER-phi\",\n+                \"\"\"\n+                    <a href=\"..\/..\/module-summary.html\">acme.mdle<\/a>\"\"\",\n+                \"\"\"\n+                    <a href=\"..\/package-summary.html\" class=\"current-selection\">p<\/a>\"\"\",\n@@ -96,5 +96,0 @@\n-                \"phi-HEADER-phi\",\n-                \"\"\"\n-                    <a href=\"..\/..\/module-summary.html\">Module<\/a>\"\"\",\n-                \"\"\"\n-                    <a href=\"..\/package-summary.html\">Package<\/a>\"\"\",\n@@ -102,1 +97,1 @@\n-                    <a href=\"..\/..\/..\/overview-tree.html\">Tree<\/a>\"\"\",\n+                    <a href=\"..\/package-tree.html\">Tree<\/a>\"\"\",\n@@ -107,0 +102,5 @@\n+                \"phi-HEADER-phi\",\n+                \"\"\"\n+                    <a href=\"..\/..\/module-summary.html\">acme.mdle<\/a>\"\"\",\n+                \"\"\"\n+                    <a href=\"..\/package-summary.html\" class=\"current-selection\">p<\/a>\"\"\",\n@@ -120,3 +120,0 @@\n-                \"phi-HEADER-phi\",\n-                \"\"\"\n-                    <a href=\"..\/..\/..\/..\/module-summary.html\">Module<\/a>\"\"\",\n@@ -124,3 +121,1 @@\n-                    <a href=\"..\/..\/..\/package-summary.html\">Package<\/a>\"\"\",\n-                \"\"\"\n-                    <a href=\"..\/..\/..\/..\/..\/overview-tree.html\">Tree<\/a>\"\"\",\n+                    <a href=\"..\/..\/..\/package-tree.html\">Tree<\/a>\"\"\",\n@@ -131,0 +126,5 @@\n+                \"phi-HEADER-phi\",\n+                \"\"\"\n+                    <a href=\"..\/..\/..\/..\/module-summary.html\">acme2.mdle<\/a>\"\"\",\n+                \"\"\"\n+                    <a href=\"..\/..\/..\/package-summary.html\" class=\"current-selection\">p2<\/a>\"\"\",\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testCopyFiles\/TestCopyFiles.java","additions":19,"deletions":19,"binary":false,"changes":38,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -191,0 +191,3 @@\n+                \"\"\"\n+                    <nav role=\"navigation\" class=\"toc\" aria-label=\"Table of contents\">\n+                    <div class=\"toc-header\">Contents&nbsp;\"\"\",\n@@ -194,4 +197,0 @@\n-                \"\"\"\n-                    <section class=\"packages\">\n-                    <h2 title=\"Contents\">Contents<\/h2>\n-                    \"\"\",\n@@ -300,0 +299,1 @@\n+                    <div class=\"main-grid\">\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testHtmlVersion\/TestHtmlVersion.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -154,1 +154,5 @@\n-                    <div class=\"sub-title\"><span class=\"module-label-in-package\">Module<\/span>&nbsp;<a href=\"..\/module-summary.html\">m<\/a><\/div>\n+                    <ol class=\"sub-nav-list\">\n+                    <li><a href=\"..\/module-summary.html\">m<\/a><\/li>\n+                    &nbsp;&gt;&nbsp;\n+                    <li><a href=\"package-summary.html\" class=\"current-selection\">p<\/a><\/li>\n+                    <\/ol>\n@@ -158,1 +162,5 @@\n-                    <div class=\"sub-title\"><span class=\"module-label-in-package\">Module<\/span>&nbsp;<a href=\"..\/module-summary.html\">o<\/a><\/div>\n+                    <ol class=\"sub-nav-list\">\n+                    <li><a href=\"..\/module-summary.html\">o<\/a><\/li>\n+                    &nbsp;&gt;&nbsp;\n+                    <li><a href=\"package-summary.html\" class=\"current-selection\">p<\/a><\/li>\n+                    <\/ol>\n@@ -162,2 +170,7 @@\n-                    <div class=\"sub-title\"><span class=\"module-label-in-type\">Module<\/span>&nbsp;<a href=\"..\/module-summary.html\">m<\/a><\/div>\n-                    <div class=\"sub-title\"><span class=\"package-label-in-type\">Package<\/span>&nbsp;<a href=\"package-summary.html\">p<\/a><\/div>\n+                    <ol class=\"sub-nav-list\">\n+                    <li><a href=\"..\/module-summary.html\">m<\/a><\/li>\n+                    &nbsp;&gt;&nbsp;\n+                    <li><a href=\"package-summary.html\">p<\/a><\/li>\n+                    &nbsp;&gt;&nbsp;\n+                    <li><a href=\"C.html\" class=\"current-selection\" title=\"class in p\">C<\/a><\/li>\n+                    <\/ol>\n@@ -167,2 +180,7 @@\n-                    <div class=\"sub-title\"><span class=\"module-label-in-type\">Module<\/span>&nbsp;<a href=\"..\/module-summary.html\">o<\/a><\/div>\n-                    <div class=\"sub-title\"><span class=\"package-label-in-type\">Package<\/span>&nbsp;<a href=\"package-summary.html\">p<\/a><\/div>\n+                    <ol class=\"sub-nav-list\">\n+                    <li><a href=\"..\/module-summary.html\">o<\/a><\/li>\n+                    &nbsp;&gt;&nbsp;\n+                    <li><a href=\"package-summary.html\">p<\/a><\/li>\n+                    &nbsp;&gt;&nbsp;\n+                    <li><a href=\"C.html\" class=\"current-selection\" title=\"class in p\">C<\/a><\/li>\n+                    <\/ol>\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testModules\/TestModulePackages.java","additions":25,"deletions":7,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -75,4 +75,5 @@\n-                    <li><a href=\"#module-description\">Description<\/a>&nbsp;|&nbsp;<\/li>\n-                    <li>Modules&nbsp;|&nbsp;<\/li>\n-                    <li><a href=\"#packages-summary\">Packages<\/a>&nbsp;|&nbsp;<\/li>\n-                    <li><a href=\"#services-summary\">Services<\/a><\/li>\"\"\");\n+                    <ol class=\"toc-list\">\n+                    <li><a href=\"#\" tabindex=\"0\">Description<\/a><\/li>\n+                    <li><a href=\"#packages-summary\" tabindex=\"0\">Packages<\/a><\/li>\n+                    <li><a href=\"#services-summary\" tabindex=\"0\">Services<\/a><\/li>\n+                    <\/ol>\"\"\");\n@@ -100,4 +101,5 @@\n-                    <li><a href=\"#module-description\">Description<\/a>&nbsp;|&nbsp;<\/li>\n-                    <li>Modules&nbsp;|&nbsp;<\/li>\n-                    <li><a href=\"#packages-summary\">Packages<\/a>&nbsp;|&nbsp;<\/li>\n-                    <li><a href=\"#services-summary\">Services<\/a><\/li>\"\"\");\n+                    <ol class=\"toc-list\">\n+                    <li><a href=\"#\" tabindex=\"0\">Description<\/a><\/li>\n+                    <li><a href=\"#packages-summary\" tabindex=\"0\">Packages<\/a><\/li>\n+                    <li><a href=\"#services-summary\" tabindex=\"0\">Services<\/a><\/li>\n+                    <\/ol>\"\"\");\n@@ -123,4 +125,4 @@\n-                    <li>Description&nbsp;|&nbsp;<\/li>\n-                    <li>Modules&nbsp;|&nbsp;<\/li>\n-                    <li><a href=\"#packages-summary\">Packages<\/a>&nbsp;|&nbsp;<\/li>\n-                    <li>Services<\/li>\"\"\");\n+                    <ol class=\"toc-list\">\n+                    <li><a href=\"#\" tabindex=\"0\">Description<\/a><\/li>\n+                    <li><a href=\"#packages-summary\" tabindex=\"0\">Packages<\/a><\/li>\n+                    <\/ol>\"\"\");\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testModules\/TestModuleServicesLink.java","additions":15,"deletions":13,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -524,0 +524,1 @@\n+                    <div class=\"main-grid\">\n@@ -579,1 +580,1 @@\n-        checkOutput(\"index.html\", true,\n+        checkOutput(\"index.html\", false,\n@@ -589,1 +590,1 @@\n-                    <li><a href=\"..\/..\/module-summary.html\">Module<\/a><\/li>\"\"\");\n+                    <li><a href=\"..\/..\/module-summary.html\">moduleA<\/a><\/li>\"\"\");\n@@ -592,2 +593,2 @@\n-                    <li><a href=\"..\/module-summary.html\">Module<\/a><\/li>\"\"\");\n-        checkOutput(\"moduleB\/testpkgmdlB\/TestClassInModuleB.html\", true,\n+                    <li><a href=\"..\/module-summary.html\">moduleB<\/a><\/li>\"\"\");\n+        checkOutput(\"moduleB\/testpkgmdlB\/TestClassInModuleB.html\", false,\n@@ -598,1 +599,1 @@\n-                    <li><a href=\"..\/..\/module-summary.html\">Module<\/a><\/li>\"\"\");\n+                    <li><a href=\"..\/..\/module-summary.html\">moduleB<\/a><\/li>\"\"\");\n@@ -713,0 +714,1 @@\n+                    <div class=\"main-grid\">\n@@ -723,7 +725,5 @@\n-                    <ul class=\"sub-nav-list\">\n-                    <li>Module:&nbsp;<\/li>\n-                    <li><a href=\"#module-description\">Description<\/a>&nbsp;|&nbsp;<\/li>\n-                    <li><a href=\"#modules-summary\">Modules<\/a>&nbsp;|&nbsp;<\/li>\n-                    <li><a href=\"#packages-summary\">Packages<\/a>&nbsp;|&nbsp;<\/li>\n-                    <li>Services<\/li>\n-                    <\/ul>\"\"\",\n+                    <ol class=\"toc-list\">\n+                    <li><a href=\"#\" tabindex=\"0\">Description<\/a><\/li>\n+                    <li><a href=\"#packages-summary\" tabindex=\"0\">Packages<\/a><\/li>\n+                    <li><a href=\"#modules-summary\" tabindex=\"0\">Modules<\/a><\/li>\n+                    <\/ol>\"\"\",\n@@ -751,4 +751,5 @@\n-                    <li><a href=\"#module-description\">Description<\/a>&nbsp;|&nbsp;<\/li>\n-                    <li>Modules&nbsp;|&nbsp;<\/li>\n-                    <li><a href=\"#packages-summary\">Packages<\/a>&nbsp;|&nbsp;<\/li>\n-                    <li><a href=\"#services-summary\">Services<\/a><\/li>\"\"\",\n+                    <ol class=\"toc-list\">\n+                    <li><a href=\"#\" tabindex=\"0\">Description<\/a><\/li>\n+                    <li><a href=\"#packages-summary\" tabindex=\"0\">Packages<\/a><\/li>\n+                    <li><a href=\"#services-summary\" tabindex=\"0\">Services<\/a><\/li>\n+                    <\/ol>\"\"\",\n@@ -825,1 +826,1 @@\n-                    <li><a href=\"..\/module-summary.html\">Module<\/a><\/li>\"\"\",\n+                    <li><a href=\"..\/module-summary.html\">moduleA<\/a><\/li>\"\"\",\n@@ -827,2 +828,1 @@\n-                    <div class=\"sub-title\"><span class=\"module-label-in-package\">Module<\/span>&nbsp;\\\n-                    <a href=\"..\/module-summary.html\">moduleA<\/a><\/div>\"\"\");\n+                    <li><a href=\"..\/module-summary.html\">moduleA<\/a><\/li>\"\"\");\n@@ -831,1 +831,1 @@\n-                    <li><a href=\"..\/module-summary.html\">Module<\/a><\/li>\"\"\",\n+                    <li><a href=\"..\/module-summary.html\">moduleA<\/a><\/li>\"\"\",\n@@ -833,2 +833,1 @@\n-                    <div class=\"sub-title\"><span class=\"module-label-in-type\">Module<\/span>&nbsp;<a \\\n-                    href=\"..\/module-summary.html\">moduleA<\/a><\/div>\"\"\");\n+                    <li><a href=\"..\/module-summary.html\">moduleA<\/a><\/li>\"\"\");\n@@ -837,2 +836,1 @@\n-                    <div class=\"sub-title\"><span class=\"module-label-in-type\">Module<\/span>&nbsp;<a \\\n-                    href=\"..\/module-summary.html\">moduleB<\/a><\/div>\"\"\",\n+                    <li><a href=\"..\/module-summary.html\">moduleB<\/a><\/li>\"\"\",\n@@ -840,2 +838,1 @@\n-                    <div class=\"sub-title\"><span class=\"package-label-in-type\">Package<\/span>&nbsp;<\\\n-                    a href=\"package-summary.html\">testpkgmdlB<\/a><\/div>\"\"\");\n+                    <li><a href=\"package-summary.html\">testpkgmdlB<\/a><\/li>\"\"\");\n@@ -903,4 +900,5 @@\n-                    <li><a href=\"#module-description\">Description<\/a>&nbsp;|&nbsp;<\/li>\n-                    <li><a href=\"#modules-summary\">Modules<\/a>&nbsp;|&nbsp;<\/li>\n-                    <li><a href=\"#packages-summary\">Packages<\/a>&nbsp;|&nbsp;<\/li>\n-                    <li>Services<\/li>\"\"\",\n+                    <ol class=\"toc-list\">\n+                    <li><a href=\"#\" tabindex=\"0\">Description<\/a><\/li>\n+                    <li><a href=\"#packages-summary\" tabindex=\"0\">Packages<\/a><\/li>\n+                    <li><a href=\"#modules-summary\" tabindex=\"0\">Modules<\/a><\/li>\n+                    <\/ol>\"\"\",\n@@ -917,4 +915,5 @@\n-                    <li><a href=\"#module-description\">Description<\/a>&nbsp;|&nbsp;<\/li>\n-                    <li><a href=\"#modules-summary\">Modules<\/a>&nbsp;|&nbsp;<\/li>\n-                    <li><a href=\"#packages-summary\">Packages<\/a>&nbsp;|&nbsp;<\/li>\n-                    <li>Services<\/li>\"\"\",\n+                    <ol class=\"toc-list\">\n+                    <li><a href=\"#\" tabindex=\"0\">Description<\/a><\/li>\n+                    <li><a href=\"#packages-summary\" tabindex=\"0\">Packages<\/a><\/li>\n+                    <li><a href=\"#modules-summary\" tabindex=\"0\">Modules<\/a><\/li>\n+                    <\/ol>\"\"\",\n@@ -964,4 +963,5 @@\n-                    <li><a href=\"#module-description\">Description<\/a>&nbsp;|&nbsp;<\/li>\n-                    <li>Modules&nbsp;|&nbsp;<\/li>\n-                    <li><a href=\"#packages-summary\">Packages<\/a>&nbsp;|&nbsp;<\/li>\n-                    <li><a href=\"#services-summary\">Services<\/a><\/li>\"\"\",\n+                    <ol class=\"toc-list\">\n+                    <li><a href=\"#\" tabindex=\"0\">Description<\/a><\/li>\n+                    <li><a href=\"#packages-summary\" tabindex=\"0\">Packages<\/a><\/li>\n+                    <li><a href=\"#services-summary\" tabindex=\"0\">Services<\/a><\/li>\n+                    <\/ol>\"\"\",\n@@ -1040,4 +1040,6 @@\n-                    <li><a href=\"#module-description\">Description<\/a>&nbsp;|&nbsp;<\/li>\n-                    <li><a href=\"#modules-summary\">Modules<\/a>&nbsp;|&nbsp;<\/li>\n-                    <li><a href=\"#packages-summary\">Packages<\/a>&nbsp;|&nbsp;<\/li>\n-                    <li><a href=\"#services-summary\">Services<\/a><\/li>\"\"\",\n+                    <ol class=\"toc-list\">\n+                    <li><a href=\"#\" tabindex=\"0\">Description<\/a><\/li>\n+                    <li><a href=\"#packages-summary\" tabindex=\"0\">Packages<\/a><\/li>\n+                    <li><a href=\"#modules-summary\" tabindex=\"0\">Modules<\/a><\/li>\n+                    <li><a href=\"#services-summary\" tabindex=\"0\">Services<\/a><\/li>\n+                    <\/ol>\"\"\",\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testModules\/TestModules.java","additions":45,"deletions":43,"binary":false,"changes":88,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,1 +26,1 @@\n- * @bug 8196027 8196202\n+ * @bug 8196027 8196202 8320458\n@@ -57,0 +57,116 @@\n+    @Test\n+    public void testSingleModule(Path base) throws Exception {\n+        Path src = Files.createDirectories(base.resolve(\"src\"));\n+        ModuleBuilder mb = new ModuleBuilder(tb, \"m\")\n+                .comment(\"Module m.\")\n+                .exports(\"p1\")\n+                .classes(\"package p1; @Deprecated public class A {}\")\n+                .classes(\"package p1; public class B {}\");\n+        mb.write(src);\n+\n+        javadoc(\"-d\", base.resolve(\"out-single-module\").toString(),\n+                \"--module-source-path\", src.toString(),\n+                \"--module\", \"m\");\n+        checkExit(Exit.OK);\n+\n+        checkOutput(\"index.html\", true,\n+                \"\"\"\n+                    <script type=\"text\/javascript\">window.location.replace('m\/module-summary.html')<\/script>\n+                    <noscript>\n+                    <meta http-equiv=\"Refresh\" content=\"0;m\/module-summary.html\">\n+                    <\/noscript>\"\"\",\n+                \"\"\"\n+                    <p><a href=\"m\/module-summary.html\">m\/module-summary.html<\/a><\/p>\"\"\");\n+\n+        checkOutput(\"m\/module-summary.html\", true,\n+                \"\"\"\n+                    <ul id=\"navbar-top-firstrow\" class=\"nav-list\" title=\"Navigation\">\n+                    <li class=\"nav-bar-cell1-rev\">Module<\/li>\n+                    <li><a href=\"..\/overview-tree.html\">Tree<\/a><\/li>\n+                    <li><a href=\"..\/deprecated-list.html\">Deprecated<\/a><\/li>\n+                    <li><a href=\"..\/index-all.html\">Index<\/a><\/li>\n+                    <li><a href=\"..\/search.html\">Search<\/a><\/li>\n+                    <li><a href=\"..\/help-doc.html#module\">Help<\/a><\/li>\n+                    <\/ul>\"\"\");\n+\n+        checkOutput(\"overview-tree.html\", true,\n+                \"\"\"\n+                    <ul id=\"navbar-top-firstrow\" class=\"nav-list\" title=\"Navigation\">\n+                    <li><a href=\"m\/module-summary.html\">Module<\/a><\/li>\n+                    <li class=\"nav-bar-cell1-rev\">Tree<\/li>\n+                    <li><a href=\"deprecated-list.html\">Deprecated<\/a><\/li>\n+                    <li><a href=\"index-all.html\">Index<\/a><\/li>\n+                    <li><a href=\"search.html\">Search<\/a><\/li>\n+                    <li><a href=\"help-doc.html#tree\">Help<\/a><\/li>\n+                    <\/ul>\"\"\");\n+\n+        checkOutput(\"deprecated-list.html\", true,\n+                \"\"\"\n+                    <ul id=\"navbar-top-firstrow\" class=\"nav-list\" title=\"Navigation\">\n+                    <li><a href=\"m\/module-summary.html\">Module<\/a><\/li>\n+                    <li><a href=\"overview-tree.html\">Tree<\/a><\/li>\n+                    <li class=\"nav-bar-cell1-rev\">Deprecated<\/li>\n+                    <li><a href=\"index-all.html\">Index<\/a><\/li>\n+                    <li><a href=\"search.html\">Search<\/a><\/li>\n+                    <li><a href=\"help-doc.html#deprecated\">Help<\/a><\/li>\n+                    <\/ul>\"\"\");\n+\n+        checkOutput(\"index-all.html\", true,\n+                \"\"\"\n+                    <ul id=\"navbar-top-firstrow\" class=\"nav-list\" title=\"Navigation\">\n+                    <li><a href=\"m\/module-summary.html\">Module<\/a><\/li>\n+                    <li><a href=\"overview-tree.html\">Tree<\/a><\/li>\n+                    <li><a href=\"deprecated-list.html\">Deprecated<\/a><\/li>\n+                    <li class=\"nav-bar-cell1-rev\">Index<\/li>\n+                    <li><a href=\"search.html\">Search<\/a><\/li>\n+                    <li><a href=\"help-doc.html#index\">Help<\/a><\/li>\n+                    <\/ul>\"\"\");\n+\n+        checkOutput(\"search.html\", true,\n+                \"\"\"\n+                    <ul id=\"navbar-top-firstrow\" class=\"nav-list\" title=\"Navigation\">\n+                    <li><a href=\"m\/module-summary.html\">Module<\/a><\/li>\n+                    <li><a href=\"overview-tree.html\">Tree<\/a><\/li>\n+                    <li><a href=\"deprecated-list.html\">Deprecated<\/a><\/li>\n+                    <li><a href=\"index-all.html\">Index<\/a><\/li>\n+                    <li class=\"nav-bar-cell1-rev\">Search<\/li>\n+                    <li><a href=\"help-doc.html#search\">Help<\/a><\/li>\n+                    <\/ul>\"\"\");\n+\n+        checkOutput(\"help-doc.html\", true,\n+                \"\"\"\n+                    <ul id=\"navbar-top-firstrow\" class=\"nav-list\" title=\"Navigation\">\n+                    <li><a href=\"m\/module-summary.html\">Module<\/a><\/li>\n+                    <li><a href=\"overview-tree.html\">Tree<\/a><\/li>\n+                    <li><a href=\"deprecated-list.html\">Deprecated<\/a><\/li>\n+                    <li><a href=\"index-all.html\">Index<\/a><\/li>\n+                    <li><a href=\"search.html\">Search<\/a><\/li>\n+                    <li class=\"nav-bar-cell1-rev\">Help<\/li>\n+                    <\/ul>\"\"\");\n+\n+        checkOutput(\"m\/p1\/package-summary.html\", true,\n+                \"\"\"\n+                    <ul id=\"navbar-top-firstrow\" class=\"nav-list\" title=\"Navigation\">\n+                    <li><a href=\"..\/module-summary.html\">Module<\/a><\/li>\n+                    <li class=\"nav-bar-cell1-rev\">Package<\/li>\n+                    <li><a href=\"package-tree.html\">Tree<\/a><\/li>\n+                    <li><a href=\"..\/..\/deprecated-list.html\">Deprecated<\/a><\/li>\n+                    <li><a href=\"..\/..\/index-all.html\">Index<\/a><\/li>\n+                    <li><a href=\"..\/..\/search.html\">Search<\/a><\/li>\n+                    <li><a href=\"..\/..\/help-doc.html#package\">Help<\/a><\/li>\n+                    <\/ul>\"\"\");\n+\n+        checkOutput(\"m\/p1\/A.html\", true,\n+                \"\"\"\n+                    <ul id=\"navbar-top-firstrow\" class=\"nav-list\" title=\"Navigation\">\n+                    <li><a href=\"..\/module-summary.html\">Module<\/a><\/li>\n+                    <li class=\"nav-bar-cell1-rev\">Class<\/li>\n+                    <li><a href=\"package-tree.html\">Tree<\/a><\/li>\n+                    <li><a href=\"..\/..\/deprecated-list.html\">Deprecated<\/a><\/li>\n+                    <li><a href=\"..\/..\/index-all.html\">Index<\/a><\/li>\n+                    <li><a href=\"..\/..\/search.html\">Search<\/a><\/li>\n+                    <li><a href=\"..\/..\/help-doc.html#class\">Help<\/a><\/li>\n+                    <\/ul>\"\"\");\n+    }\n+\n+\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testNavigation\/TestModuleNavigation.java","additions":118,"deletions":2,"binary":false,"changes":120,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,2 +26,2 @@\n- * @bug      4131628 4664607 7025314 8023700 7198273 8025633 8026567 8081854 8150188 8151743 8196027 8182765\n- *           8196200 8196202 8223378 8258659 8261976\n+ * @bug      7025314 8023700 7198273 8025633 8026567 8081854 8196027 8182765\n+ *           8196200 8196202 8223378 8258659 8261976 8320458\n@@ -32,1 +32,1 @@\n- * @build    toolbox.ToolBox javadoc.tester.*\n+ * @build    toolbox.ToolBox javadoc.tester.* builder.ClassBuilder\n@@ -37,0 +37,1 @@\n+import java.nio.file.Files;\n@@ -38,1 +39,0 @@\n-import java.nio.file.Paths;\n@@ -41,0 +41,1 @@\n+import builder.ClassBuilder;\n@@ -56,2 +57,2 @@\n-    public void test(Path ignore) {\n-        javadoc(\"-d\", \"out\",\n+    public void testOverview(Path base) {\n+        javadoc(\"-d\", base.resolve(\"api\").toString(),\n@@ -64,0 +65,21 @@\n+        checkOutput(\"index.html\", true,\n+                \"\"\"\n+                    <ul id=\"navbar-top-firstrow\" class=\"nav-list\" title=\"Navigation\">\n+                    <li class=\"nav-bar-cell1-rev\">Overview<\/li>\n+                    <li><a href=\"pkg\/package-tree.html\">Tree<\/a><\/li>\n+                    <li><a href=\"index-all.html\">Index<\/a><\/li>\n+                    <li><a href=\"search.html\">Search<\/a><\/li>\n+                    <li><a href=\"help-doc.html#overview\">Help<\/a><\/li>\n+                    <\/ul>\"\"\");\n+\n+        checkOutput(\"pkg\/package-summary.html\", true,\n+                \"\"\"\n+                    <ul id=\"navbar-top-firstrow\" class=\"nav-list\" title=\"Navigation\">\n+                    <li><a href=\"..\/index.html\">Overview<\/a><\/li>\n+                    <li class=\"nav-bar-cell1-rev\">Package<\/li>\n+                    <li><a href=\"package-tree.html\">Tree<\/a><\/li>\n+                    <li><a href=\"..\/index-all.html\">Index<\/a><\/li>\n+                    <li><a href=\"..\/search.html\">Search<\/a><\/li>\n+                    <li><a href=\"..\/help-doc.html#package\">Help<\/a><\/li>\n+                    <\/ul>\"\"\");\n+\n@@ -67,1 +89,7 @@\n-                    <li><a href=\"..\/index.html\">Overview<\/a><\/li>\"\"\");\n+                    <li><a href=\"..\/index.html\">Overview<\/a><\/li>\n+                    <li class=\"nav-bar-cell1-rev\">Class<\/li>\n+                    <li><a href=\"package-tree.html\">Tree<\/a><\/li>\n+                    <li><a href=\"..\/index-all.html\">Index<\/a><\/li>\n+                    <li><a href=\"..\/search.html\">Search<\/a><\/li>\n+                    <li><a href=\"..\/help-doc.html#class\">Help<\/a><\/li>\n+                    <\/ul>\"\"\");\n@@ -72,1 +100,7 @@\n-                    <li><a href=\"..\/index.html\">Overview<\/a><\/li>\"\"\");\n+                    <li><a href=\"..\/index.html\">Overview<\/a><\/li>\n+                    <li class=\"nav-bar-cell1-rev\">Class<\/li>\n+                    <li><a href=\"package-tree.html\">Tree<\/a><\/li>\n+                    <li><a href=\"..\/index-all.html\">Index<\/a><\/li>\n+                    <li><a href=\"..\/search.html\">Search<\/a><\/li>\n+                    <li><a href=\"..\/help-doc.html#class\">Help<\/a><\/li>\n+                    <\/ul>\"\"\");\n@@ -77,1 +111,7 @@\n-                    <li><a href=\"..\/index.html\">Overview<\/a><\/li>\"\"\");\n+                    <li><a href=\"..\/index.html\">Overview<\/a><\/li>\n+                    <li class=\"nav-bar-cell1-rev\">Class<\/li>\n+                    <li><a href=\"package-tree.html\">Tree<\/a><\/li>\n+                    <li><a href=\"..\/index-all.html\">Index<\/a><\/li>\n+                    <li><a href=\"..\/search.html\">Search<\/a><\/li>\n+                    <li><a href=\"..\/help-doc.html#class\">Help<\/a><\/li>\n+                    <\/ul>\"\"\");\n@@ -87,42 +127,0 @@\n-\n-        \/\/ Remaining tests check for additional padding to offset the fixed navigation bar.\n-        checkOutput(\"pkg\/A.html\", true,\n-                \"\"\"\n-                    <!-- ========= END OF TOP NAVBAR ========= -->\n-                    <span class=\"skip-nav\" id=\"skip-navbar-top\"><\/span><\/nav>\n-                    <\/header>\n-                    <main role=\"main\">\n-                    <!-- ======== START OF CLASS DATA ======== -->\"\"\");\n-\n-        checkOutput(\"pkg\/package-summary.html\", true,\n-                \"\"\"\n-                    <!-- ========= END OF TOP NAVBAR ========= -->\n-                    <span class=\"skip-nav\" id=\"skip-navbar-top\"><\/span><\/nav>\n-                    <\/header>\n-                    <main role=\"main\">\n-                    <div class=\"header\">\"\"\");\n-    }\n-\n-    \/\/ Test for checking additional padding to offset the fixed navigation bar in HTML5.\n-    @Test\n-    public void test1(Path ignore) {\n-        javadoc(\"-d\", \"out-1\",\n-                \"-html5\",\n-                \"-sourcepath\", testSrc,\n-                \"pkg\");\n-        checkExit(Exit.OK);\n-        checkSubNav();\n-\n-        checkOutput(\"pkg\/A.html\", true,\n-                \"\"\"\n-                    <!-- ========= END OF TOP NAVBAR ========= -->\n-                    <span class=\"skip-nav\" id=\"skip-navbar-top\"><\/span><\/nav>\n-                    <\/header>\n-                    <main role=\"main\">\n-                    <!-- ======== START OF CLASS DATA ======== -->\"\"\");\n-\n-        checkOutput(\"pkg\/package-summary.html\", true,\n-                \"\"\"\n-                    <!-- ========= END OF TOP NAVBAR ========= -->\n-                    <span class=\"skip-nav\" id=\"skip-navbar-top\"><\/span><\/nav>\n-                    \"\"\");\n@@ -131,1 +129,0 @@\n-    \/\/ Test to make sure that no extra padding for nav bar gets generated if -nonavbar is specified.\n@@ -133,27 +130,1 @@\n-    public void test2(Path ignore) {\n-        javadoc(\"-d\", \"out-2\",\n-                \"-nonavbar\",\n-                \"-sourcepath\", testSrc,\n-                \"pkg\");\n-        checkExit(Exit.OK);\n-        checkSubNav();\n-\n-        checkOutput(\"pkg\/A.html\", false,\n-                \"\"\"\n-                    <!-- ========= END OF TOP NAVBAR ========= -->\n-                    <\/div>\n-                    <div class=\"skip-nav\"><a id=\"skip-navbar-top\"><\/a><\/div>\n-                    <\/nav>\n-                    <\/header>\n-                    <!-- ======== START OF CLASS DATA ======== -->\"\"\");\n-\n-        checkOutput(\"pkg\/package-summary.html\", false,\n-                \"\"\"\n-                    <!-- ========= END OF TOP NAVBAR ========= -->\n-                    <\/div>\n-                    <div class=\"skip-nav\"><a id=\"skip-navbar-top\"><\/a><\/div>\n-                    <\/nav>\"\"\");\n-    }\n-\n-    @Test\n-    public void test3(Path base) throws IOException {\n+    public void testNavLinks(Path base) throws IOException {\n@@ -204,1 +175,1 @@\n-        javadoc(\"-d\", \"out-3\",\n+        javadoc(\"-d\", base.resolve(\"api\").toString(),\n@@ -210,5 +181,0 @@\n-                \"Summary\",\n-                \"\"\"\n-                    <li><a href=\"#nested-class-summary\">Nested<\/a>&nbsp;|&nbsp;<\/li>\"\"\",\n-                \"\"\"\n-                    <li><a href=\"#field-summary\">Field<\/a>&nbsp;|&nbsp;<\/li>\"\"\",\n@@ -216,3 +182,22 @@\n-                    <li><a href=\"#constructor-summary\">Constr<\/a>&nbsp;|&nbsp;<\/li>\"\"\",\n-                \"\"\"\n-                    <li><a href=\"#method-summary\">Method<\/a><\/li>\"\"\");\n+                    <ol class=\"toc-list\">\n+                    <li><a href=\"#\" tabindex=\"0\">Description<\/a><\/li>\n+                    <li><a href=\"#nested-class-summary\" tabindex=\"0\">Nested Class Summary<\/a><\/li>\n+                    <li><a href=\"#field-summary\" tabindex=\"0\">Field Summary<\/a><\/li>\n+                    <li><a href=\"#constructor-summary\" tabindex=\"0\">Constructor Summary<\/a><\/li>\n+                    <li><a href=\"#method-summary\" tabindex=\"0\">Method Summary<\/a><\/li>\n+                    <li><a href=\"#field-detail\" tabindex=\"0\">Field Details<\/a>\n+                    <ol class=\"toc-list\">\n+                    <li><a href=\"#field\" tabindex=\"0\">field<\/a><\/li>\n+                    <\/ol>\n+                    <\/li>\n+                    <li><a href=\"#constructor-detail\" tabindex=\"0\">Constructor Details<\/a>\n+                    <ol class=\"toc-list\">\n+                    <li><a href=\"#%3Cinit%3E()\" tabindex=\"0\">X()<\/a><\/li>\n+                    <\/ol>\n+                    <\/li>\n+                    <li><a href=\"#method-detail\" tabindex=\"0\">Method Details<\/a>\n+                    <ol class=\"toc-list\">\n+                    <li><a href=\"#method()\" tabindex=\"0\">method()<\/a><\/li>\n+                    <\/ol>\n+                    <\/li>\n+                    <\/ol>\"\"\");\n@@ -221,5 +206,0 @@\n-                \"Summary\",\n-                \"\"\"\n-                    <li><a href=\"#nested-class-summary\">Nested<\/a>&nbsp;|&nbsp;<\/li>\"\"\",\n-                \"\"\"\n-                    <li><a href=\"#field-summary\">Field<\/a>&nbsp;|&nbsp;<\/li>\"\"\",\n@@ -227,3 +207,12 @@\n-                    <li><a href=\"#constructor-summary\">Constr<\/a>&nbsp;|&nbsp;<\/li>\"\"\",\n-                \"\"\"\n-                    <li><a href=\"#method-summary\">Method<\/a><\/li>\"\"\");\n+                    <ol class=\"toc-list\">\n+                    <li><a href=\"#\" tabindex=\"0\">Description<\/a><\/li>\n+                    <li><a href=\"#nested-class-summary\" tabindex=\"0\">Nested Class Summary<\/a><\/li>\n+                    <li><a href=\"#field-summary\" tabindex=\"0\">Field Summary<\/a><\/li>\n+                    <li><a href=\"#constructor-summary\" tabindex=\"0\">Constructor Summary<\/a><\/li>\n+                    <li><a href=\"#method-summary\" tabindex=\"0\">Method Summary<\/a><\/li>\n+                    <li><a href=\"#constructor-detail\" tabindex=\"0\">Constructor Details<\/a>\n+                    <ol class=\"toc-list\">\n+                    <li><a href=\"#%3Cinit%3E()\" tabindex=\"0\">Y()<\/a><\/li>\n+                    <\/ol>\n+                    <\/li>\n+                    <\/ol>\"\"\");\n@@ -232,5 +221,0 @@\n-                \"Summary\",\n-                \"<li>Nested&nbsp;|&nbsp;<\/li>\",\n-                \"<li>Field&nbsp;|&nbsp;<\/li>\",\n-                \"\"\"\n-                    <li><a href=\"#constructor-summary\">Constr<\/a>&nbsp;|&nbsp;<\/li>\"\"\",\n@@ -238,1 +222,10 @@\n-                    <li><a href=\"#method-summary\">Method<\/a><\/li>\"\"\");\n+                    <ol class=\"toc-list\">\n+                    <li><a href=\"#\" tabindex=\"0\">Description<\/a><\/li>\n+                    <li><a href=\"#constructor-summary\" tabindex=\"0\">Constructor Summary<\/a><\/li>\n+                    <li><a href=\"#method-summary\" tabindex=\"0\">Method Summary<\/a><\/li>\n+                    <li><a href=\"#constructor-detail\" tabindex=\"0\">Constructor Details<\/a>\n+                    <ol class=\"toc-list\">\n+                    <li><a href=\"#%3Cinit%3E()\" tabindex=\"0\">IC()<\/a><\/li>\n+                    <\/ol>\n+                    <\/li>\n+                    <\/ol>\"\"\");\n@@ -241,5 +234,0 @@\n-                \"Summary\",\n-                \"<li>Nested&nbsp;|&nbsp;<\/li>\",\n-                \"<li>Field&nbsp;|&nbsp;<\/li>\",\n-                \"\"\"\n-                    <li><a href=\"#constructor-summary\">Constr<\/a>&nbsp;|&nbsp;<\/li>\"\"\",\n@@ -247,1 +235,10 @@\n-                    <li><a href=\"#method-summary\">Method<\/a><\/li>\"\"\");\n+                    <ol class=\"toc-list\">\n+                    <li><a href=\"#\" tabindex=\"0\">Description<\/a><\/li>\n+                    <li><a href=\"#constructor-summary\" tabindex=\"0\">Constructor Summary<\/a><\/li>\n+                    <li><a href=\"#method-summary\" tabindex=\"0\">Method Summary<\/a><\/li>\n+                    <li><a href=\"#constructor-detail\" tabindex=\"0\">Constructor Details<\/a>\n+                    <ol class=\"toc-list\">\n+                    <li><a href=\"#%3Cinit%3E()\" tabindex=\"0\">C()<\/a><\/li>\n+                    <\/ol>\n+                    <\/li>\n+                    <\/ol>\"\"\");\n@@ -250,5 +247,4 @@\n-                \"Summary\",\n-                \"<li>Nested&nbsp;|&nbsp;<\/li>\",\n-                \"<li>Field&nbsp;|&nbsp;<\/li>\",\n-                \"<li>Constr&nbsp;|&nbsp;<\/li>\",\n-                \"<li>Method<\/li>\");\n+                \"\"\"\n+                    <ol class=\"toc-list\">\n+                    <li><a href=\"#\" tabindex=\"0\">Description<\/a><\/li>\n+                    <\/ol>\"\"\");\n@@ -304,0 +300,119 @@\n+\n+    @Test\n+    public void testSinglePackage(Path base) {\n+        javadoc(\"-d\", base.resolve(\"api\").toString(),\n+                \"-sourcepath\", testSrc,\n+                \"pkg\");\n+        checkExit(Exit.OK);\n+        checkSubNav();\n+\n+        checkOutput(\"index.html\", true,\n+                \"\"\"\n+                    <meta http-equiv=\"Refresh\" content=\"0;pkg\/package-summary.html\">\"\"\",\n+                \"\"\"\n+                 <p><a href=\"pkg\/package-summary.html\">pkg\/package-summary.html<\/a><\/p>\"\"\");\n+\n+        checkOutput(\"pkg\/package-summary.html\", true,\n+                \"\"\"\n+                    <ul id=\"navbar-top-firstrow\" class=\"nav-list\" title=\"Navigation\">\n+                    <li class=\"nav-bar-cell1-rev\">Package<\/li>\n+                    <li><a href=\"package-tree.html\">Tree<\/a><\/li>\n+                    <li><a href=\"..\/index-all.html\">Index<\/a><\/li>\n+                    <li><a href=\"..\/search.html\">Search<\/a><\/li>\n+                    <li><a href=\"..\/help-doc.html#package\">Help<\/a><\/li>\n+                    <\/ul>\"\"\");\n+\n+        checkOutput(\"pkg\/A.html\", true,\n+                \"\"\"\n+                    <ul id=\"navbar-top-firstrow\" class=\"nav-list\" title=\"Navigation\">\n+                    <li><a href=\"package-summary.html\">Package<\/a><\/li>\n+                    <li class=\"nav-bar-cell1-rev\">Class<\/li>\n+                    <li><a href=\"package-tree.html\">Tree<\/a><\/li>\n+                    <li><a href=\"..\/index-all.html\">Index<\/a><\/li>\n+                    <li><a href=\"..\/search.html\">Search<\/a><\/li>\n+                    <li><a href=\"..\/help-doc.html#class\">Help<\/a><\/li>\n+                    <\/ul>\"\"\");\n+\n+        checkOutput(\"pkg\/C.html\", true,\n+                \"\"\"\n+                    <ul id=\"navbar-top-firstrow\" class=\"nav-list\" title=\"Navigation\">\n+                    <li><a href=\"package-summary.html\">Package<\/a><\/li>\n+                    <li class=\"nav-bar-cell1-rev\">Class<\/li>\n+                    <li><a href=\"package-tree.html\">Tree<\/a><\/li>\n+                    <li><a href=\"..\/index-all.html\">Index<\/a><\/li>\n+                    <li><a href=\"..\/search.html\">Search<\/a><\/li>\n+                    <li><a href=\"..\/help-doc.html#class\">Help<\/a><\/li>\n+                    <\/ul>\"\"\");\n+\n+        checkOutput(\"pkg\/E.html\", true,\n+                \"\"\"\n+                    <ul id=\"navbar-top-firstrow\" class=\"nav-list\" title=\"Navigation\">\n+                    <li><a href=\"package-summary.html\">Package<\/a><\/li>\n+                    <li class=\"nav-bar-cell1-rev\">Class<\/li>\n+                    <li><a href=\"package-tree.html\">Tree<\/a><\/li>\n+                    <li><a href=\"..\/index-all.html\">Index<\/a><\/li>\n+                    <li><a href=\"..\/search.html\">Search<\/a><\/li>\n+                    <li><a href=\"..\/help-doc.html#class\">Help<\/a><\/li>\n+                    <\/ul>\"\"\");\n+\n+        checkOutput(\"pkg\/I.html\", true,\n+                \/\/ Test for 4664607\n+                \"\"\"\n+                    <div class=\"skip-nav\"><a href=\"#skip-navbar-top\" title=\"Skip navigation links\">Skip navigation links<\/a><\/div>\n+                    <ul id=\"navbar-top-firstrow\" class=\"nav-list\" title=\"Navigation\">\n+                    \"\"\",\n+                \"\"\"\n+                    <li><a href=\"package-summary.html\">Package<\/a><\/li>\n+                    <li class=\"nav-bar-cell1-rev\">Class<\/li>\"\"\");\n+    }\n+\n+    @Test\n+    public void testUnnamedPackage(Path base) throws Exception {\n+        Path src = Files.createDirectories(base.resolve(\"src\"));\n+        new ClassBuilder(tb, \"C\")\n+                .setModifiers(\"public\", \"class\")\n+                .write(src);\n+\n+        javadoc(\"-d\", base.resolve(\"api\").toString(),\n+                src.resolve(\"C.java\").toString());\n+        checkExit(Exit.OK);\n+\n+        checkOutput(\"index.html\", true,\n+                \"\"\"\n+                    <script type=\"text\/javascript\">window.location.replace('package-summary.html')<\/script>\n+                    <noscript>\n+                    <meta http-equiv=\"Refresh\" content=\"0;package-summary.html\">\n+                    <\/noscript>\"\"\");\n+\n+        checkOutput(\"package-summary.html\", true,\n+                \"\"\"\n+                    <ul id=\"navbar-top-firstrow\" class=\"nav-list\" title=\"Navigation\">\n+                    <li class=\"nav-bar-cell1-rev\">Package<\/li>\n+                    <li><a href=\"package-tree.html\">Tree<\/a><\/li>\n+                    <li><a href=\"index-all.html\">Index<\/a><\/li>\n+                    <li><a href=\"search.html\">Search<\/a><\/li>\n+                    <li><a href=\"help-doc.html#package\">Help<\/a><\/li>\n+                    <\/ul>\"\"\",\n+                \"\"\"\n+                    <ol class=\"sub-nav-list\">\n+                    <li><a href=\"package-summary.html\" class=\"current-selection\">Unnamed Package<\/a><\/li>\n+                    <\/ol>\"\"\");\n+\n+        checkOutput(\"C.html\", true,\n+                \"\"\"\n+                    <ul id=\"navbar-top-firstrow\" class=\"nav-list\" title=\"Navigation\">\n+                    <li><a href=\"package-summary.html\">Package<\/a><\/li>\n+                    <li class=\"nav-bar-cell1-rev\">Class<\/li>\n+                    <li><a href=\"package-tree.html\">Tree<\/a><\/li>\n+                    <li><a href=\"index-all.html\">Index<\/a><\/li>\n+                    <li><a href=\"search.html\">Search<\/a><\/li>\n+                    <li><a href=\"help-doc.html#class\">Help<\/a><\/li>\n+                    <\/ul>\"\"\",\n+                \"\"\"\n+                    <ol class=\"sub-nav-list\">\n+                    <li><a href=\"package-summary.html\">Unnamed Package<\/a><\/li>\n+                    &nbsp;&gt;&nbsp;\n+                    <li><a href=\"C.html\" class=\"current-selection\" title=\"class in Unnamed Package\">C<\/a><\/li>\n+                    <\/ol>\"\"\");\n+    }\n+\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testNavigation\/TestNavigation.java","additions":229,"deletions":114,"binary":false,"changes":343,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2002, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2002, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -81,1 +81,1 @@\n-        checkOutput(\"deprecated-list.html\", true,\n+        checkOutput(\"deprecated-list.html\", false,\n@@ -83,1 +83,1 @@\n-        checkOutput(\"index-all.html\", true,\n+        checkOutput(\"index-all.html\", false,\n@@ -85,1 +85,1 @@\n-        checkOutput(\"help-doc.html\", true,\n+        checkOutput(\"help-doc.html\", false,\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testPackagePage\/TestPackagePage.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,1 +27,1 @@\n- * @bug 8189841 8253117 8263507\n+ * @bug 8189841 8253117 8263507 8320458\n@@ -54,9 +54,5 @@\n-                    <div class=\"sub-nav\">\n-                    <div id=\"navbar-sub-list\">\n-                    <ul class=\"sub-nav-list\">\n-                    <li>Package:&nbsp;<\/li>\n-                    <li>Description&nbsp;|&nbsp;<\/li>\n-                    <li>Related Packages&nbsp;|&nbsp;<\/li>\n-                    <li><a href=\"#class-summary\">Classes and Interfaces<\/a><\/li>\n-                    <\/ul>\n-                    <\/div>\"\"\");\n+                    <ol class=\"toc-list\">\n+                    <li><a href=\"#\" tabindex=\"0\">Description<\/a><\/li>\n+                    <li><a href=\"#class-summary\" tabindex=\"0\">Classes and Interfaces<\/a><\/li>\n+                    <\/ol>\n+                    \"\"\");\n@@ -65,9 +61,6 @@\n-                    <div class=\"sub-nav\">\n-                    <div id=\"navbar-sub-list\">\n-                    <ul class=\"sub-nav-list\">\n-                    <li>Package:&nbsp;<\/li>\n-                    <li><a href=\"#package-description\">Description<\/a>&nbsp;|&nbsp;<\/li>\n-                    <li><a href=\"#related-package-summary\">Related Packages<\/a>&nbsp;|&nbsp;<\/li>\n-                    <li><a href=\"#class-summary\">Classes and Interfaces<\/a><\/li>\n-                    <\/ul>\n-                    <\/div>\"\"\");\n+                    <ol class=\"toc-list\">\n+                    <li><a href=\"#\" tabindex=\"0\">Description<\/a><\/li>\n+                    <li><a href=\"#related-package-summary\" tabindex=\"0\">Related Packages<\/a><\/li>\n+                    <li><a href=\"#class-summary\" tabindex=\"0\">Classes and Interfaces<\/a><\/li>\n+                    <\/ol>\n+                    \"\"\");\n@@ -76,9 +69,6 @@\n-                    <div class=\"sub-nav\">\n-                    <div id=\"navbar-sub-list\">\n-                    <ul class=\"sub-nav-list\">\n-                    <li>Package:&nbsp;<\/li>\n-                    <li>Description&nbsp;|&nbsp;<\/li>\n-                    <li><a href=\"#related-package-summary\">Related Packages<\/a>&nbsp;|&nbsp;<\/li>\n-                    <li><a href=\"#class-summary\">Classes and Interfaces<\/a><\/li>\n-                    <\/ul>\n-                    <\/div>\"\"\");\n+                    <ol class=\"toc-list\">\n+                    <li><a href=\"#\" tabindex=\"0\">Description<\/a><\/li>\n+                    <li><a href=\"#related-package-summary\" tabindex=\"0\">Related Packages<\/a><\/li>\n+                    <li><a href=\"#class-summary\" tabindex=\"0\">Classes and Interfaces<\/a><\/li>\n+                    <\/ol>\n+                    \"\"\");\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testPackageSummary\/TestPackageSummary.java","additions":19,"deletions":29,"binary":false,"changes":48,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -429,1 +429,1 @@\n-                    var pathtoroot = \".\/\";\n+                    const pathtoroot = \".\/\";\n@@ -433,4 +433,7 @@\n-                    <div class=\"nav-list-search\"><a href=\"search.html\">SEARCH<\/a>\n-                    <input type=\"text\" id=\"search-input\" disabled placeholder=\"Search\">\n-                    <input type=\"reset\" id=\"reset-button\" disabled value=\"reset\">\n-                    \"\"\");\n+                    <li><a href=\"search.html\">Search<\/a><\/li>\"\"\",\n+                \"\"\"\n+                    <div class=\"nav-list-search\">\n+                    <input type=\"text\" id=\"search-input\" disabled placeholder=\"Search\" aria-label=\"S\\\n+                    earch in documentation\" autocomplete=\"off\" autocapitalize=\"off\">\n+                    <input type=\"reset\" id=\"reset-search\" disabled value=\"Reset\">\n+                    <\/div>\"\"\");\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testSearch\/TestSearch.java","additions":9,"deletions":6,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -44,0 +44,1 @@\n+import java.util.Set;\n@@ -228,1 +229,1 @@\n-        private boolean inSeeList;\n+        private int inSeeOrTocList = 0;\n@@ -273,2 +274,3 @@\n-                    if (\"tag-list\".equals(attrs.get(\"class\"))) {\n-                        inSeeList = true;\n+                    String classAttr = attrs.get(\"class\");\n+                    if (classAttr != null && Set.of(\"tag-list\", \"toc-list\", \"sub-nav-list\").contains(classAttr)) {\n+                        inSeeOrTocList++;\n@@ -291,1 +293,1 @@\n-                    if (inSeeList) {\n+                    if (inSeeOrTocList > 0) {\n@@ -293,2 +295,2 @@\n-                        inSeeList = false;\n-                    } else if (c.get(\"li\") == 0) {\n+                        inSeeOrTocList--;\n+                    } else if (!c.containsKey(\"li\")) {\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testSingletonLists\/TestSingletonLists.java","additions":9,"deletions":7,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2021, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2021, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -115,2 +115,8 @@\n-                    <div class=\"top-nav\" id=\"navbar-top\"><button id=\"navbar-toggle-button\" aria-controls=\"navbar-top\" aria-expanded=\"false\" aria-label=\"Toggle navigation links\"><span class=\"nav-bar-toggle-icon\">&nbsp;<\/span><span class=\"nav-bar-toggle-icon\">&nbsp;<\/span><span class=\"nav-bar-toggle-icon\">&nbsp;<\/span><\/button>\n-                    <div class=\"skip-nav\"><a href=\"#skip-navbar-top\" title=\"Skip navigation links\">Skip navigation links<\/a><\/div>\n+                    <div class=\"top-nav\" id=\"navbar-top\">\n+                    <div class=\"nav-content\">\n+                    <div class=\"nav-menu-button\"><button id=\"navbar-toggle-button\" aria-controls=\"na\\\n+                    vbar-top\" aria-expanded=\"false\" aria-label=\"Toggle navigation links\"><span class\\\n+                    =\"nav-bar-toggle-icon\">&nbsp;<\/span><span class=\"nav-bar-toggle-icon\">&nbsp;<\/sp\\\n+                    an><span class=\"nav-bar-toggle-icon\">&nbsp;<\/span><\/button><\/div>\n+                    <div class=\"skip-nav\"><a href=\"#skip-navbar-top\" title=\"Skip navigation links\">S\\\n+                    kip navigation links<\/a><\/div>\n@@ -119,1 +125,0 @@\n-                    <li>Class<\/li>\n@@ -122,0 +127,1 @@\n+                    <li><a href=\"search.html\">Search<\/a><\/li>\n@@ -125,0 +131,1 @@\n+                    <\/div>\n@@ -126,4 +133,7 @@\n-                    <div id=\"navbar-sub-list\"><\/div>\n-                    <div class=\"nav-list-search\"><a href=\"search.html\">SEARCH<\/a>\n-                    <input type=\"text\" id=\"search-input\" disabled placeholder=\"Search\">\n-                    <input type=\"reset\" id=\"reset-button\" disabled value=\"reset\">\n+                    <div class=\"nav-content\">\n+                    <ol class=\"sub-nav-list\"><\/ol>\n+                    <div class=\"nav-list-search\">\n+                    <input type=\"text\" id=\"search-input\" disabled placeholder=\"Search\" aria-label=\"S\\\n+                    earch in documentation\" autocomplete=\"off\" autocapitalize=\"off\">\n+                    <input type=\"reset\" id=\"reset-search\" disabled value=\"Reset\">\n+                    <\/div>\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testSpecTag\/TestSpecTag.java","additions":18,"deletions":8,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -80,9 +80,0 @@\n-                \"\"\"\n-                    iframe {\n-                        margin:0;\n-                        padding:0;\n-                        height:100%;\n-                        width:100%;\n-                        overflow-y:scroll;\n-                        border:none;\n-                    }\"\"\",\n@@ -150,1 +141,1 @@\n-                    a[href]:hover, a[href]:focus {\n+                    a[href]:hover, a[href]:active {\n@@ -176,1 +167,1 @@\n-                    #reset-button {\n+                    input#reset-search, input.reset-filter {\n@@ -185,3 +176,0 @@\n-                        position:absolute;\n-                        right:12px;\n-                        top:10px;\n@@ -189,0 +177,1 @@\n+                        display:none;\n@@ -355,1 +344,0 @@\n-                \"help-section\",     \/\/ part of the help page\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testStylesheet\/TestStylesheet.java","additions":4,"deletions":16,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -1,68 +0,0 @@\n-\/*\n- * Copyright (c) 2011, 2022, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-\n-\/*\n- * @test\n- * @bug 7010342 8150000 8174974\n- * @summary Test for correct sub title generation.\n- * @library ..\/..\/lib\n- * @modules jdk.javadoc\/jdk.javadoc.internal.tool\n- * @build javadoc.tester.*\n- * @run main TestSubTitle\n- *\/\n-\n-import javadoc.tester.JavadocTester;\n-\n-public class TestSubTitle extends JavadocTester {\n-\n-    public static void main(String... args) throws Exception {\n-        var tester = new TestSubTitle();\n-        tester.runTests();\n-    }\n-\n-    @Test\n-    public void test() {\n-        javadoc(\"-d\", \"out\",\n-                \"-sourcepath\", testSrc,\n-                \"pkg\");\n-        checkExit(Exit.OK);\n-\n-        checkOutput(\"pkg\/package-summary.html\", true,\n-            \"\"\"\n-                <div class=\"block\">This is the description of package pkg.<\/div>\"\"\");\n-\n-        checkOutput(\"pkg\/C.html\", true,\n-                \"\"\"\n-                    <div class=\"sub-title\"><span class=\"package-label-in-type\">Package<\/span>&nbsp;<\\\n-                    a href=\"package-summary.html\">pkg<\/a><\/div>\"\"\");\n-\n-        checkOutput(\"pkg\/package-summary.html\", false,\n-            \"\"\"\n-                <p class=\"sub-title\">\n-                <div class=\"block\">This is the description of package pkg.<\/div>\n-                <\/p>\"\"\");\n-\n-        checkOutput(\"pkg\/C.html\", false,\n-            \"<p class=\\\"sub-title\\\">pkg<\/p>\");\n-    }\n-}\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testSubTitle\/TestSubTitle.java","additions":0,"deletions":68,"binary":false,"changes":68,"status":"deleted"},{"patch":"@@ -1,30 +0,0 @@\n-\/*\n- * Copyright (c) 2011, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-\n-package pkg;\n-\n-\/**\n- * Source file for C\n- *\/\n-public class C {\n-}\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testSubTitle\/pkg\/C.java","additions":0,"deletions":30,"binary":false,"changes":30,"status":"deleted"},{"patch":"@@ -1,8 +0,0 @@\n-<html lang=\"en\">\n-<head>\n-    <title>Package Summary<\/title>\n-<\/head>\n-<body>\n-This is the description of package pkg.\n-<\/body>\n-<\/html>\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testSubTitle\/pkg\/package.html","additions":0,"deletions":8,"binary":false,"changes":8,"status":"deleted"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testValueTag\/TestValueTagInModule.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2002, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2002, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -332,0 +332,1 @@\n+            addID(0, \"\"); \/\/ Register empty anchor as top of page\n","filename":"test\/langtools\/jdk\/javadoc\/lib\/javadoc\/tester\/LinkChecker.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2010, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -208,9 +208,11 @@\n-            \/\/ special handling for strings in search.js.template\n-            FileObject fo = fm.getFileForInput(javadocLoc,\n-                    \"jdk.javadoc.internal.doclets.formats.html\",\n-                    \"resources\/search.js.template\");\n-            CharSequence search_js = fo.getCharContent(true);\n-            Pattern p = Pattern.compile(\"##REPLACE:(?<key>[A-Za-z0-9._]+)##\");\n-            Matcher m = p.matcher(search_js);\n-            while (m.find()) {\n-                results.add(m.group(\"key\"));\n+            \/\/ special handling for strings in .js.template files\n+            for (String fileName : List.of(\"resources\/search.js.template\", \"resources\/script.js.template\")) {\n+                FileObject fo = fm.getFileForInput(javadocLoc,\n+                        \"jdk.javadoc.internal.doclets.formats.html\",\n+                        fileName);\n+                CharSequence search_js = fo.getCharContent(true);\n+                Pattern p = Pattern.compile(\"##REPLACE:(?<key>[A-Za-z0-9._]+)##\");\n+                Matcher m = p.matcher(search_js);\n+                while (m.find()) {\n+                    results.add(m.group(\"key\"));\n+                }\n","filename":"test\/langtools\/jdk\/javadoc\/tool\/CheckResourceKeys.java","additions":12,"deletions":10,"binary":false,"changes":22,"status":"modified"}]}