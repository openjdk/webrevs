{"files":[{"patch":"@@ -65,0 +65,1 @@\n+import com.sun.tools.javac.resources.CompilerProperties.Fragments;\n@@ -69,0 +70,1 @@\n+import com.sun.tools.javac.util.JCDiagnostic.Fragment;\n@@ -524,1 +526,1 @@\n-                        reportDiag(Warnings.TargetDefaultSourceConflict(targetString, source.requiredTarget()));\n+                        reportDiag(Errors.TargetDefaultSourceConflict(source.name, targetString));\n@@ -526,1 +528,1 @@\n-                        reportDiag(Warnings.SourceTargetConflict(sourceString, source.requiredTarget()));\n+                        reportDiag(Errors.SourceTargetConflict(sourceString, targetString));\n@@ -572,1 +574,1 @@\n-                        log.warning(LintCategory.OPTIONS, Warnings.SourceNoBootclasspath(source.name));\n+                        log.warning(LintCategory.OPTIONS, Warnings.SourceNoBootclasspath(source.name, releaseNote(source, targetString)));\n@@ -575,1 +577,1 @@\n-                        log.warning(LintCategory.OPTIONS, Warnings.SourceNoSystemModulesPath(source.name));\n+                        log.warning(LintCategory.OPTIONS, Warnings.SourceNoSystemModulesPath(source.name, releaseNote(source, targetString)));\n@@ -643,0 +645,16 @@\n+    private Fragment releaseNote(Source source, String targetString) {\n+        if (source.compareTo(Source.JDK8) <= 0) {\n+            if (targetString != null) {\n+                return Fragments.SourceNoBootclasspathWithTarget(source.name, targetString);\n+            } else {\n+                return Fragments.SourceNoBootclasspath(source.name);\n+            }\n+        } else {\n+            if (targetString != null) {\n+                return Fragments.SourceNoSystemModulesPathWithTarget(source.name, targetString);\n+            } else {\n+                return Fragments.SourceNoSystemModulesPath(source.name);\n+            }\n+        }\n+    }\n+\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/main\/Arguments.java","additions":22,"deletions":4,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -2118,1 +2118,1 @@\n-# 0: string\n+# 0: string, 1: fragment\n@@ -2120,1 +2120,1 @@\n-    bootstrap class path not set in conjunction with -source {0}\n+    bootstrap class path is not set in conjunction with -source {0}\\n{1}\n@@ -2122,1 +2122,1 @@\n-# 0: string\n+# 0: string, 1: fragment\n@@ -2124,1 +2124,21 @@\n-    system modules path not set in conjunction with -source {0}\n+    location of system modules is not set in conjunction with -source {0}\\n{1}\n+\n+# 0: string\n+compiler.misc.source.no.bootclasspath=\\\n+  not setting the bootstrap class path may lead to class files that cannot run on JDK {0}\\n\\\n+  --release {0} is recommended instead of -source {0} because it sets the bootstrap class path automatically\n+\n+# 0: string\n+compiler.misc.source.no.system.modules.path=\\\n+  not setting the location of system modules may lead to class files that cannot run on JDK {0}\\n\\\n+  --release {0} is recommended instead of -source {0} because it sets the location of system modules automatically\n+\n+# 0: string, 1: string\n+compiler.misc.source.no.bootclasspath.with.target=\\\n+  not setting the bootstrap class path may lead to class files that cannot run on JDK 8\\n\\\n+  --release {0} is recommended instead of -source {0} -target {1} because it sets the bootstrap class path automatically\n+\n+# 0: string, 1: string\n+compiler.misc.source.no.system.modules.path.with.target=\\\n+  not setting the location of system modules may lead to class files that cannot run on JDK {0}\\n\\\n+  --release {0} is recommended instead of -source {0} -target {1} because it sets the location of system modules automatically\n@@ -3968,3 +3988,4 @@\n-# 0: string, 1: target\n-compiler.warn.source.target.conflict=\\\n-    source release {0} requires target release {1}\n+# 0: string, 1: string\n+compiler.err.source.target.conflict=\\\n+    specified target release {1} is too old for the specified source release {0}\\n\\\n+    --release {1} is recommended when compiling code to run on JDK {1}\n@@ -3972,3 +3993,4 @@\n-# 0: string, 1: target\n-compiler.warn.target.default.source.conflict=\\\n-    target release {0} conflicts with default source release {1}\n+# 0: string, 1: string\n+compiler.err.target.default.source.conflict=\\\n+    specified target release {1} is too old for the default source release {0}\\n\\\n+    --release {1} is recommended when compiling code to run on JDK {1}\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/resources\/compiler.properties","additions":32,"deletions":10,"binary":false,"changes":42,"status":"modified"},{"patch":"@@ -1,1 +1,1 @@\n-- compiler.warn.source.no.system.modules.path: 15\n+- compiler.warn.source.no.system.modules.path: 15, (compiler.misc.source.no.system.modules.path: 15)\n","filename":"test\/langtools\/tools\/javac\/T8222035\/MinContextOpTest_A.out","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -210,2 +210,2 @@\n-compiler.warn.source.target.conflict\n-compiler.warn.target.default.source.conflict\n+compiler.err.source.target.conflict\n+compiler.err.target.default.source.conflict\n","filename":"test\/langtools\/tools\/javac\/diags\/examples.not-yet.txt","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2010, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -25,2 +25,1 @@\n-\/\/ key: compiler.warn.source.no.system.modules.path\n-\/\/ options: -source 15\n+\/\/ options: --release 15\n","filename":"test\/langtools\/tools\/javac\/diags\/examples\/EnumsMustBeStatic.java","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2010, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -25,2 +25,1 @@\n-\/\/ key: compiler.warn.source.no.system.modules.path\n-\/\/ options: -source 15\n+\/\/ options: --release 15\n","filename":"test\/langtools\/tools\/javac\/diags\/examples\/Expected3.java","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2010, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -25,2 +25,1 @@\n-\/\/ key: compiler.warn.source.no.system.modules.path\n-\/\/ options: -source 15\n+\/\/ options: --release 15\n","filename":"test\/langtools\/tools\/javac\/diags\/examples\/InnerClassCantHaveStatic.java","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2010, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -25,2 +25,1 @@\n-\/\/ key: compiler.warn.source.no.system.modules.path\n-\/\/ options: -source 15\n+\/\/ options: --release 15\n","filename":"test\/langtools\/tools\/javac\/diags\/examples\/InterfaceNotAllowed.java","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2010, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -25,2 +25,1 @@\n-\/\/ key: compiler.warn.source.no.system.modules.path\n-\/\/ options: -source 15\n+\/\/ options: --release 15\n","filename":"test\/langtools\/tools\/javac\/diags\/examples\/LocalEnum.java","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,0 +28,1 @@\n+\/\/ key: compiler.misc.source.no.bootclasspath.with.target\n","filename":"test\/langtools\/tools\/javac\/diags\/examples\/ObsoleteSourceAndTarget.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2014, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,0 +26,1 @@\n+\/\/ key: compiler.misc.source.no.bootclasspath\n","filename":"test\/langtools\/tools\/javac\/diags\/examples\/OptionRemovedSource.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2014, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,0 +27,1 @@\n+\/\/ key: compiler.misc.source.no.bootclasspath.with.target\n","filename":"test\/langtools\/tools\/javac\/diags\/examples\/OptionRemovedTarget.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,2 +26,1 @@\n-\/\/ key: compiler.warn.source.no.system.modules.path\n-\/\/ options: -source 15\n+\/\/ options: --release 15\n","filename":"test\/langtools\/tools\/javac\/diags\/examples\/Records.java","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2021, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,2 +26,1 @@\n-\/\/ key: compiler.warn.source.no.system.modules.path\n-\/\/ options: -source 16\n+\/\/ options: --release 16\n","filename":"test\/langtools\/tools\/javac\/diags\/examples\/SealedTypes.java","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2010, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -25,0 +25,1 @@\n+\/\/ key: compiler.misc.source.no.bootclasspath\n","filename":"test\/langtools\/tools\/javac\/diags\/examples\/SourceNoBootclasspath.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -25,0 +25,1 @@\n+\/\/ key: compiler.misc.source.no.system.modules.path\n","filename":"test\/langtools\/tools\/javac\/diags\/examples\/SourceNoSystemModulesPath.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -0,0 +1,28 @@\n+\/*\n+ * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/\/ key: compiler.warn.source.no.system.modules.path\n+\/\/ key: compiler.misc.source.no.system.modules.path.with.target\n+\/\/ options: -source 9 -target 9\n+\n+class SourceNoSystemModulesPath { }\n","filename":"test\/langtools\/tools\/javac\/diags\/examples\/SourceNoSystemModulesPathWithTarget.java","additions":28,"deletions":0,"binary":false,"changes":28,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,2 +26,1 @@\n- \/\/ key: compiler.warn.source.no.system.modules.path\n- \/\/ options: -source 14\n+ \/\/ options: --release 14\n","filename":"test\/langtools\/tools\/javac\/diags\/examples\/TextBlockSource.java","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,2 +26,1 @@\n-\/\/ key: compiler.warn.source.no.system.modules.path\n-\/\/ options: -source 21\n+\/\/ options: --release 21\n","filename":"test\/langtools\/tools\/javac\/diags\/examples\/UnderscoreInLambdaExpression.java","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -81,1 +81,1 @@\n-                \"- compiler.warn.source.no.bootclasspath: 8\",\n+                \"- compiler.warn.source.no.bootclasspath: 8, (compiler.misc.source.no.bootclasspath: 8)\",\n@@ -128,1 +128,1 @@\n-                \"- compiler.warn.source.no.system.modules.path: 9\",\n+                \"- compiler.warn.source.no.system.modules.path: 9, (compiler.misc.source.no.system.modules.path: 9)\",\n","filename":"test\/langtools\/tools\/javac\/options\/BCPOrSystemNotSpecified.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1,1 +1,1 @@\n-- compiler.warn.source.no.bootclasspath: 8\n+- compiler.warn.source.no.bootclasspath: 8, (compiler.misc.source.no.bootclasspath: 8)\n","filename":"test\/langtools\/tools\/javac\/options\/T6900037.out","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -142,1 +142,1 @@\n-        doTest(base, String.format(\"warning: source release %s requires target release %s\", Source.DEFAULT.name, Source.DEFAULT.name),\n+        doTest(base, String.format(\"error: specified target release %s is too old for the specified source release %s\", Source.MIN.name, Source.DEFAULT.name),\n@@ -148,1 +148,1 @@\n-        doTest(base, String.format(\"warning: target release %s conflicts with default source release %s\", Source.MIN.name, Source.DEFAULT.name),\n+        doTest(base, String.format(\"error: specified target release %s is too old for the default source release %s\", Source.MIN.name, Source.DEFAULT.name),\n","filename":"test\/langtools\/tools\/javac\/options\/smokeTests\/OptionSmokeTest.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1,1 +1,1 @@\n-- compiler.warn.source.no.system.modules.path: 10\n+- compiler.warn.source.no.system.modules.path: 10, (compiler.misc.source.no.system.modules.path: 10)\n","filename":"test\/langtools\/tools\/javac\/var_implicit_lambda\/VarInImplicitLambdaNegTest01_source10.out","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}