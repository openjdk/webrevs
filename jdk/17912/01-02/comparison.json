{"files":[{"patch":"@@ -155,2 +155,2 @@\n-      size_t new_capacity = MIN2(bucket_size(bucket) * 2, _max_capacity);\n-      if (!expand(new_capacity)) {\n+      size_t desired_capacity = bucket_size(bucket) * 2;\n+      if (!try_expand_to(desired_capacity)) {\n@@ -200,1 +200,1 @@\n-bool G1CMMarkStack::ChunkAllocator::expand(size_t new_capacity) {\n+bool G1CMMarkStack::ChunkAllocator::try_expand_to(size_t desired_capacity) {\n@@ -207,1 +207,3 @@\n-  if (reserve(new_capacity)) {\n+  desired_capacity = MIN2(desired_capacity, _max_capacity);\n+\n+  if (reserve(desired_capacity)) {\n@@ -209,1 +211,1 @@\n-                  old_capacity, new_capacity);\n+                  old_capacity, desired_capacity);\n@@ -216,2 +218,2 @@\n-  size_t new_capacity = MIN2(_capacity * 2, _max_capacity);\n-  return expand(new_capacity);\n+  size_t new_capacity = _capacity * 2;\n+  return try_expand_to(new_capacity);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1ConcurrentMark.cpp","additions":9,"deletions":7,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -230,1 +230,1 @@\n-    bool expand(size_t new_capacity);\n+    bool try_expand_to(size_t desired_capacity);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1ConcurrentMark.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}