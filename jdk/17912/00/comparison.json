{"files":[{"patch":"@@ -155,1 +155,2 @@\n-      if (!expand()) {\n+      size_t new_capacity = bucket_size(bucket) * 2;\n+      if (!expand(new_capacity)) {\n@@ -199,1 +200,1 @@\n-bool G1CMMarkStack::ChunkAllocator::expand() {\n+bool G1CMMarkStack::ChunkAllocator::expand(size_t new_capacity) {\n@@ -204,3 +205,0 @@\n-  size_t old_capacity = _capacity;\n-  \/\/ Double capacity if possible.\n-  size_t new_capacity = MIN2(old_capacity * 2, _max_capacity);\n@@ -208,0 +206,1 @@\n+  size_t old_capacity = _capacity;\n@@ -216,0 +215,7 @@\n+bool G1CMMarkStack::ChunkAllocator::expand() {\n+  \/\/ Double capacity if possible.\n+  size_t new_capacity = MIN2(_capacity * 2, _max_capacity);\n+\n+  return expand(new_capacity);\n+}\n+\n","filename":"src\/hotspot\/share\/gc\/g1\/g1ConcurrentMark.cpp","additions":11,"deletions":5,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -229,0 +229,1 @@\n+    bool expand(size_t new_capacity);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1ConcurrentMark.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"}]}