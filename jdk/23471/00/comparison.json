{"files":[{"patch":"@@ -0,0 +1,144 @@\n+#\n+# Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+# DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+#\n+# This code is free software; you can redistribute it and\/or modify it\n+# under the terms of the GNU General Public License version 2 only, as\n+# published by the Free Software Foundation.  Oracle designates this\n+# particular file as subject to the \"Classpath\" exception as provided\n+# by Oracle in the LICENSE file that accompanied this code.\n+#\n+# This code is distributed in the hope that it will be useful, but WITHOUT\n+# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+# FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+# version 2 for more details (a copy is included in the LICENSE file that\n+# accompanied this code).\n+#\n+# You should have received a copy of the GNU General Public License version\n+# 2 along with this work; if not, write to the Free Software Foundation,\n+# Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+#\n+# Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+# or visit www.oracle.com if you need additional information or have any\n+# questions.\n+#\n+\n+name: 'Build (linux-static)'\n+\n+on:\n+  workflow_call:\n+    inputs:\n+      platform:\n+        required: true\n+        type: string\n+      extra-conf-options:\n+        required: false\n+        type: string\n+      make-target:\n+        required: false\n+        type: string\n+        default: 'static-jdk-image'\n+      debug-levels:\n+        required: false\n+        type: string\n+        default: '[ \"debug\", \"release\" ]'\n+      gcc-major-version:\n+        required: true\n+        type: string\n+      gcc-package-suffix:\n+        required: false\n+        type: string\n+        default: ''\n+      apt-architecture:\n+        required: false\n+        type: string\n+      apt-extra-packages:\n+        required: false\n+        type: string\n+      configure-arguments:\n+        required: false\n+        type: string\n+      make-arguments:\n+        required: false\n+        type: string\n+\n+jobs:\n+  build-linux-static:\n+    name: build\n+    runs-on: ubuntu-22.04\n+\n+    strategy:\n+      fail-fast: false\n+      matrix:\n+        debug-level: ${{ fromJSON(inputs.debug-levels) }}\n+        include:\n+          - debug-level: release\n+            flags: --with-debug-level=release\n+\n+    steps:\n+      - name: 'Checkout the JDK source'\n+        uses: actions\/checkout@v4\n+\n+      - name: 'Get the BootJDK'\n+        id: bootjdk\n+        uses: .\/.github\/actions\/get-bootjdk\n+        with:\n+          platform: linux-x64\n+\n+      - name: 'Get JTReg'\n+        id: jtreg\n+        uses: .\/.github\/actions\/get-jtreg\n+\n+      - name: 'Get GTest'\n+        id: gtest\n+        uses: .\/.github\/actions\/get-gtest\n+\n+      - name: 'Set architecture'\n+        id: arch\n+        run: |\n+          # Set a proper suffix for packages if using a different architecture\n+          if [[ '${{ inputs.apt-architecture }}' != '' ]]; then\n+            echo 'suffix=:${{ inputs.apt-architecture }}' >> $GITHUB_OUTPUT\n+          fi\n+\n+      # Upgrading apt to solve libc6 installation bugs, see JDK-8260460.\n+      - name: 'Install toolchain and dependencies'\n+        run: |\n+          # Install dependencies using apt-get\n+          if [[ '${{ inputs.apt-architecture }}' != '' ]]; then\n+            sudo dpkg --add-architecture ${{ inputs.apt-architecture }}\n+          fi\n+          sudo apt-get update\n+          sudo apt-get install --only-upgrade apt\n+          sudo apt-get install gcc-${{ inputs.gcc-major-version }}${{ inputs.gcc-package-suffix }} g++-${{ inputs.gcc-major-version }}${{ inputs.gcc-package-suffix }} libxrandr-dev${{ steps.arch.outputs.suffix }} libxtst-dev${{ steps.arch.outputs.suffix }} libcups2-dev${{ steps.arch.outputs.suffix }} libasound2-dev${{ steps.arch.outputs.suffix }} ${{ inputs.apt-extra-packages }}\n+          sudo update-alternatives --install \/usr\/bin\/gcc gcc \/usr\/bin\/gcc-${{ inputs.gcc-major-version }} 100 --slave \/usr\/bin\/g++ g++ \/usr\/bin\/g++-${{ inputs.gcc-major-version }}\n+\n+      - name: 'Configure'\n+        run: >\n+          bash configure\n+          --with-conf-name=${{ inputs.platform }}\n+          ${{ matrix.flags }}\n+          --with-version-opt=${GITHUB_ACTOR}-${GITHUB_SHA}\n+          --with-boot-jdk=${{ steps.bootjdk.outputs.path }}\n+          --with-jtreg=${{ steps.jtreg.outputs.path }}\n+          --with-gtest=${{ steps.gtest.outputs.path }}\n+          --with-zlib=system\n+          --with-jmod-compress=zip-1\n+          ${{ inputs.extra-conf-options }} ${{ inputs.configure-arguments }} || (\n+          echo \"Dumping config.log:\" &&\n+          cat config.log &&\n+          exit 1)\n+\n+      - name: 'Build'\n+        id: build\n+        uses: .\/.github\/actions\/do-build\n+        with:\n+          make-target: '${{ inputs.make-target }} ${{ inputs.make-arguments }}'\n+          platform: ${{ inputs.platform }}\n+          debug-suffix: '${{ matrix.suffix }}'\n+\n+      - name: 'Upload bundles'\n+        uses: .\/.github\/actions\/upload-bundles\n+        with:\n+          platform: ${{ inputs.platform }}\n+          debug-suffix: '${{ matrix.suffix }}'\n","filename":".github\/workflows\/build-linux-static.yml","additions":144,"deletions":0,"binary":false,"changes":144,"status":"added"},{"patch":"@@ -169,0 +169,13 @@\n+    if: needs.prepare.outputs.linux-x64 == 'true'\n+\n+  build-linux-x64-static:\n+    name: linux-x64-static\n+    needs: prepare\n+    uses: .\/.github\/workflows\/build-linux-static.yml\n+    with:\n+      platform: linux-x64\n+      make-target: 'static-jdk-image'\n+      debug-levels: '[ \"release\" ]'\n+      gcc-major-version: '10'\n+      configure-arguments: ${{ github.event.inputs.configure-arguments }}\n+      make-arguments: ${{ github.event.inputs.make-arguments }}\n","filename":".github\/workflows\/main.yml","additions":13,"deletions":0,"binary":false,"changes":13,"status":"modified"}]}