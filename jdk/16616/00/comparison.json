{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2007, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -49,0 +49,1 @@\n+    private static final int MAX_SKIP_BUFFER_SIZE = 2048;\n@@ -102,0 +103,23 @@\n+    @Override\n+    public synchronized long skip(long n) throws IOException {\n+        long remaining = n;\n+        int nr;\n+\n+        if (n <= 0) {\n+            return 0;\n+        }\n+\n+        int size = (int)Math.min(MAX_SKIP_BUFFER_SIZE, remaining);\n+        byte[] skipBuffer = new byte[size];\n+        while (remaining > 0) {\n+            nr = readImpl(skipBuffer, 0, (int)Math.min(size, remaining));\n+            if (nr < 0) {\n+                eof = true;\n+                break;\n+            }\n+            remaining -= nr;\n+        }\n+\n+        return n - remaining;\n+    }\n+\n@@ -109,2 +133,1 @@\n-        int bufSize = 2048;\n-        byte[] db = new byte [bufSize];\n+        byte[] db = new byte [MAX_SKIP_BUFFER_SIZE];\n@@ -115,0 +138,1 @@\n+            int bufSize = Math.clamp(l, 0, MAX_SKIP_BUFFER_SIZE);\n","filename":"src\/jdk.httpserver\/share\/classes\/sun\/net\/httpserver\/LeftOverInputStream.java","additions":27,"deletions":3,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -162,1 +162,1 @@\n-            is.readAllBytes();\n+            is.skip(Integer.MAX_VALUE);\n","filename":"src\/jdk.httpserver\/share\/classes\/sun\/net\/httpserver\/simpleserver\/FileServerHandler.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}