{"files":[{"patch":"@@ -44,0 +44,1 @@\n+import java.util.concurrent.TimeoutException;\n@@ -110,1 +111,6 @@\n-    private static boolean waitForSubPids(File commFile) throws Exception {\n+    enum Result {\n+        FOUND_LEAKS_FD,\n+        FOUND_RETAINS_FD,\n+        FOUND_NONE \/\/ Unexpected.\n+    };\n+    private static Result waitForSubPids(File commFile) throws Exception {\n@@ -217,2 +223,7 @@\n-\n-        return out.contains(RETAINS_FD);\n+        if (out.contains(RETAINS_FD)) {\n+            return Result.FOUND_RETAINS_FD;\n+        } else if (out.contains(LEAKS_FD)) {\n+            return Result.FOUND_LEAKS_FD;\n+        } else {\n+            return Result.FOUND_NONE;\n+        }\n@@ -241,1 +252,2 @@\n-        if (waitForSubPids(commFile)) {\n+        Result result = waitForSubPids(commFile);\n+        if (result == Result.FOUND_RETAINS_FD) {\n@@ -243,1 +255,1 @@\n-        } else {\n+        } else if (result == Result.FOUND_LEAKS_FD) {\n@@ -245,0 +257,2 @@\n+        } else {\n+            throw new RuntimeException(\"Found neither message, I am confused!\");\n@@ -294,1 +308,6 @@\n-                System.out.println(\"Exception was thrown: \" + e.toString());\n+                if (e instanceof TimeoutException) {\n+                    TimeoutException te = (TimeoutException)e;\n+                    System.out.println(\"(Third VM) Timed out waiting for second VM: \" + te.toString());\n+                } else {\n+                    System.out.println(\"(Third VM) Exception was thrown: \" + e.toString());\n+                }\n@@ -364,1 +383,0 @@\n-\n","filename":"test\/hotspot\/jtreg\/runtime\/8176717\/TestInheritFD.java","additions":25,"deletions":7,"binary":false,"changes":32,"status":"modified"}]}