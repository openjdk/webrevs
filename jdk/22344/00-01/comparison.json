{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -198,1 +198,1 @@\n-                    ((AbstractMemorySegmentImpl)segment).scope() : null;\n+                    ((AbstractMemorySegmentImpl)segment).sessionImpl() : null;\n","filename":"src\/java.base\/share\/classes\/java\/lang\/invoke\/X-VarHandleByteArrayView.java.template","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -127,1 +127,1 @@\n-        $rawType$ rawValue = SCOPED_MEMORY_ACCESS.get$RawType$Unaligned(bb.scope(),\n+        $rawType$ rawValue = SCOPED_MEMORY_ACCESS.get$RawType$Unaligned(bb.sessionImpl(),\n@@ -134,1 +134,1 @@\n-        return SCOPED_MEMORY_ACCESS.get$Type$(bb.scope(),\n+        return SCOPED_MEMORY_ACCESS.get$Type$(bb.sessionImpl(),\n@@ -138,1 +138,1 @@\n-        return SCOPED_MEMORY_ACCESS.get$Type$Unaligned(bb.scope(),\n+        return SCOPED_MEMORY_ACCESS.get$Type$Unaligned(bb.sessionImpl(),\n@@ -151,1 +151,1 @@\n-        SCOPED_MEMORY_ACCESS.put$RawType$Unaligned(bb.scope(),\n+        SCOPED_MEMORY_ACCESS.put$RawType$Unaligned(bb.sessionImpl(),\n@@ -158,1 +158,1 @@\n-        SCOPED_MEMORY_ACCESS.put$Type$(bb.scope(),\n+        SCOPED_MEMORY_ACCESS.put$Type$(bb.sessionImpl(),\n@@ -163,1 +163,1 @@\n-        SCOPED_MEMORY_ACCESS.put$Type$Unaligned(bb.scope(),\n+        SCOPED_MEMORY_ACCESS.put$Type$Unaligned(bb.sessionImpl(),\n@@ -177,1 +177,1 @@\n-                          SCOPED_MEMORY_ACCESS.get$RawType$Volatile(bb.scope(),\n+                          SCOPED_MEMORY_ACCESS.get$RawType$Volatile(bb.sessionImpl(),\n@@ -186,1 +186,1 @@\n-        SCOPED_MEMORY_ACCESS.put$RawType$Volatile(bb.scope(),\n+        SCOPED_MEMORY_ACCESS.put$RawType$Volatile(bb.sessionImpl(),\n@@ -197,1 +197,1 @@\n-                          SCOPED_MEMORY_ACCESS.get$RawType$Acquire(bb.scope(),\n+                          SCOPED_MEMORY_ACCESS.get$RawType$Acquire(bb.sessionImpl(),\n@@ -206,1 +206,1 @@\n-        SCOPED_MEMORY_ACCESS.put$RawType$Release(bb.scope(),\n+        SCOPED_MEMORY_ACCESS.put$RawType$Release(bb.sessionImpl(),\n@@ -217,1 +217,1 @@\n-                          SCOPED_MEMORY_ACCESS.get$RawType$Opaque(bb.scope(),\n+                          SCOPED_MEMORY_ACCESS.get$RawType$Opaque(bb.sessionImpl(),\n@@ -226,1 +226,1 @@\n-        SCOPED_MEMORY_ACCESS.put$RawType$Opaque(bb.scope(),\n+        SCOPED_MEMORY_ACCESS.put$RawType$Opaque(bb.sessionImpl(),\n@@ -237,1 +237,1 @@\n-        return SCOPED_MEMORY_ACCESS.compareAndSet$RawType$(bb.scope(),\n+        return SCOPED_MEMORY_ACCESS.compareAndSet$RawType$(bb.sessionImpl(),\n@@ -248,1 +248,1 @@\n-                          SCOPED_MEMORY_ACCESS.compareAndExchange$RawType$(bb.scope(),\n+                          SCOPED_MEMORY_ACCESS.compareAndExchange$RawType$(bb.sessionImpl(),\n@@ -259,1 +259,1 @@\n-                          SCOPED_MEMORY_ACCESS.compareAndExchange$RawType$Acquire(bb.scope(),\n+                          SCOPED_MEMORY_ACCESS.compareAndExchange$RawType$Acquire(bb.sessionImpl(),\n@@ -270,1 +270,1 @@\n-                          SCOPED_MEMORY_ACCESS.compareAndExchange$RawType$Release(bb.scope(),\n+                          SCOPED_MEMORY_ACCESS.compareAndExchange$RawType$Release(bb.sessionImpl(),\n@@ -280,1 +280,1 @@\n-        return SCOPED_MEMORY_ACCESS.weakCompareAndSet$RawType$Plain(bb.scope(),\n+        return SCOPED_MEMORY_ACCESS.weakCompareAndSet$RawType$Plain(bb.sessionImpl(),\n@@ -290,1 +290,1 @@\n-        return SCOPED_MEMORY_ACCESS.weakCompareAndSet$RawType$(bb.scope(),\n+        return SCOPED_MEMORY_ACCESS.weakCompareAndSet$RawType$(bb.sessionImpl(),\n@@ -300,1 +300,1 @@\n-        return SCOPED_MEMORY_ACCESS.weakCompareAndSet$RawType$Acquire(bb.scope(),\n+        return SCOPED_MEMORY_ACCESS.weakCompareAndSet$RawType$Acquire(bb.sessionImpl(),\n@@ -310,1 +310,1 @@\n-        return SCOPED_MEMORY_ACCESS.weakCompareAndSet$RawType$Release(bb.scope(),\n+        return SCOPED_MEMORY_ACCESS.weakCompareAndSet$RawType$Release(bb.sessionImpl(),\n@@ -321,1 +321,1 @@\n-                          SCOPED_MEMORY_ACCESS.getAndSet$RawType$(bb.scope(),\n+                          SCOPED_MEMORY_ACCESS.getAndSet$RawType$(bb.sessionImpl(),\n@@ -332,1 +332,1 @@\n-                          SCOPED_MEMORY_ACCESS.getAndSet$RawType$Acquire(bb.scope(),\n+                          SCOPED_MEMORY_ACCESS.getAndSet$RawType$Acquire(bb.sessionImpl(),\n@@ -343,1 +343,1 @@\n-                          SCOPED_MEMORY_ACCESS.getAndSet$RawType$Release(bb.scope(),\n+                          SCOPED_MEMORY_ACCESS.getAndSet$RawType$Release(bb.sessionImpl(),\n@@ -356,1 +356,1 @@\n-            return SCOPED_MEMORY_ACCESS.getAndAdd$RawType$(bb.scope(),\n+            return SCOPED_MEMORY_ACCESS.getAndAdd$RawType$(bb.sessionImpl(),\n@@ -370,1 +370,1 @@\n-            return SCOPED_MEMORY_ACCESS.getAndAdd$RawType$Acquire(bb.scope(),\n+            return SCOPED_MEMORY_ACCESS.getAndAdd$RawType$Acquire(bb.sessionImpl(),\n@@ -384,1 +384,1 @@\n-            return SCOPED_MEMORY_ACCESS.getAndAdd$RawType$Release(bb.scope(),\n+            return SCOPED_MEMORY_ACCESS.getAndAdd$RawType$Release(bb.sessionImpl(),\n@@ -398,1 +398,1 @@\n-            nativeExpectedValue = SCOPED_MEMORY_ACCESS.get$RawType$Volatile(bb.scope(), base, offset);\n+            nativeExpectedValue = SCOPED_MEMORY_ACCESS.get$RawType$Volatile(bb.sessionImpl(),base, offset);\n@@ -400,1 +400,1 @@\n-        } while (!SCOPED_MEMORY_ACCESS.weakCompareAndSet$RawType$(bb.scope(), base, offset,\n+        } while (!SCOPED_MEMORY_ACCESS.weakCompareAndSet$RawType$(bb.sessionImpl(),base, offset,\n@@ -412,1 +412,1 @@\n-            return SCOPED_MEMORY_ACCESS.getAndBitwiseOr$RawType$(bb.scope(),\n+            return SCOPED_MEMORY_ACCESS.getAndBitwiseOr$RawType$(bb.sessionImpl(),\n@@ -426,1 +426,1 @@\n-            return SCOPED_MEMORY_ACCESS.getAndBitwiseOr$RawType$Release(bb.scope(),\n+            return SCOPED_MEMORY_ACCESS.getAndBitwiseOr$RawType$Release(bb.sessionImpl(),\n@@ -440,1 +440,1 @@\n-            return SCOPED_MEMORY_ACCESS.getAndBitwiseOr$RawType$Acquire(bb.scope(),\n+            return SCOPED_MEMORY_ACCESS.getAndBitwiseOr$RawType$Acquire(bb.sessionImpl(),\n@@ -454,1 +454,1 @@\n-            nativeExpectedValue = SCOPED_MEMORY_ACCESS.get$RawType$Volatile(bb.scope(), base, offset);\n+            nativeExpectedValue = SCOPED_MEMORY_ACCESS.get$RawType$Volatile(bb.sessionImpl(),base, offset);\n@@ -456,1 +456,1 @@\n-        } while (!SCOPED_MEMORY_ACCESS.weakCompareAndSet$RawType$(bb.scope(), base, offset,\n+        } while (!SCOPED_MEMORY_ACCESS.weakCompareAndSet$RawType$(bb.sessionImpl(),base, offset,\n@@ -466,1 +466,1 @@\n-            return SCOPED_MEMORY_ACCESS.getAndBitwiseAnd$RawType$(bb.scope(),\n+            return SCOPED_MEMORY_ACCESS.getAndBitwiseAnd$RawType$(bb.sessionImpl(),\n@@ -480,1 +480,1 @@\n-            return SCOPED_MEMORY_ACCESS.getAndBitwiseAnd$RawType$Release(bb.scope(),\n+            return SCOPED_MEMORY_ACCESS.getAndBitwiseAnd$RawType$Release(bb.sessionImpl(),\n@@ -494,1 +494,1 @@\n-            return SCOPED_MEMORY_ACCESS.getAndBitwiseAnd$RawType$Acquire(bb.scope(),\n+            return SCOPED_MEMORY_ACCESS.getAndBitwiseAnd$RawType$Acquire(bb.sessionImpl(),\n@@ -508,1 +508,1 @@\n-            nativeExpectedValue = SCOPED_MEMORY_ACCESS.get$RawType$Volatile(bb.scope(), base, offset);\n+            nativeExpectedValue = SCOPED_MEMORY_ACCESS.get$RawType$Volatile(bb.sessionImpl(),base, offset);\n@@ -510,1 +510,1 @@\n-        } while (!SCOPED_MEMORY_ACCESS.weakCompareAndSet$RawType$(bb.scope(), base, offset,\n+        } while (!SCOPED_MEMORY_ACCESS.weakCompareAndSet$RawType$(bb.sessionImpl(),base, offset,\n@@ -521,1 +521,1 @@\n-            return SCOPED_MEMORY_ACCESS.getAndBitwiseXor$RawType$(bb.scope(),\n+            return SCOPED_MEMORY_ACCESS.getAndBitwiseXor$RawType$(bb.sessionImpl(),\n@@ -535,1 +535,1 @@\n-            return SCOPED_MEMORY_ACCESS.getAndBitwiseXor$RawType$Release(bb.scope(),\n+            return SCOPED_MEMORY_ACCESS.getAndBitwiseXor$RawType$Release(bb.sessionImpl(),\n@@ -549,1 +549,1 @@\n-            return SCOPED_MEMORY_ACCESS.getAndBitwiseXor$RawType$Acquire(bb.scope(),\n+            return SCOPED_MEMORY_ACCESS.getAndBitwiseXor$RawType$Acquire(bb.sessionImpl(),\n@@ -563,1 +563,1 @@\n-            nativeExpectedValue = SCOPED_MEMORY_ACCESS.get$RawType$Volatile(bb.scope(), base, offset);\n+            nativeExpectedValue = SCOPED_MEMORY_ACCESS.get$RawType$Volatile(bb.sessionImpl(),base, offset);\n@@ -565,1 +565,1 @@\n-        } while (!SCOPED_MEMORY_ACCESS.weakCompareAndSet$RawType$(bb.scope(), base, offset,\n+        } while (!SCOPED_MEMORY_ACCESS.weakCompareAndSet$RawType$(bb.sessionImpl(),base, offset,\n","filename":"src\/java.base\/share\/classes\/java\/lang\/invoke\/X-VarHandleSegmentView.java.template","additions":43,"deletions":43,"binary":false,"changes":86,"status":"modified"},{"patch":"@@ -809,1 +809,1 @@\n-            return ((AbstractMemorySegmentImpl)segment).scope();\n+            return ((AbstractMemorySegmentImpl)segment).sessionImpl();\n","filename":"src\/java.base\/share\/classes\/java\/nio\/Buffer.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -398,1 +398,6 @@\n-        return scope().isAccessibleBy(thread);\n+        return sessionImpl().isAccessibleBy(thread);\n+    }\n+\n+    @ForceInline\n+    public final MemorySessionImpl sessionImpl() {\n+        return scope;\n@@ -586,1 +591,1 @@\n-            ScopedMemoryAccess.getScopedMemoryAccess().copyMemory(srcImpl.scope(), dstImpl.scope(),\n+            ScopedMemoryAccess.getScopedMemoryAccess().copyMemory(srcImpl.sessionImpl(), dstImpl.sessionImpl(),\n@@ -590,1 +595,1 @@\n-            ScopedMemoryAccess.getScopedMemoryAccess().copySwapMemory(srcImpl.scope(), dstImpl.scope(),\n+            ScopedMemoryAccess.getScopedMemoryAccess().copySwapMemory(srcImpl.sessionImpl(), dstImpl.sessionImpl(),\n@@ -613,1 +618,1 @@\n-            ScopedMemoryAccess.getScopedMemoryAccess().copyMemory(srcImpl.scope(), null,\n+            ScopedMemoryAccess.getScopedMemoryAccess().copyMemory(srcImpl.sessionImpl(), null,\n@@ -617,1 +622,1 @@\n-            ScopedMemoryAccess.getScopedMemoryAccess().copySwapMemory(srcImpl.scope(), null,\n+            ScopedMemoryAccess.getScopedMemoryAccess().copySwapMemory(srcImpl.sessionImpl(), null,\n@@ -639,1 +644,1 @@\n-            ScopedMemoryAccess.getScopedMemoryAccess().copyMemory(null, destImpl.scope(),\n+            ScopedMemoryAccess.getScopedMemoryAccess().copyMemory(null, destImpl.sessionImpl(),\n@@ -643,1 +648,1 @@\n-            ScopedMemoryAccess.getScopedMemoryAccess().copySwapMemory(null, destImpl.scope(),\n+            ScopedMemoryAccess.getScopedMemoryAccess().copySwapMemory(null, destImpl.sessionImpl(),\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/foreign\/AbstractMemorySegmentImpl.java","additions":12,"deletions":7,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -75,1 +75,1 @@\n-            SCOPED_MEMORY_ACCESS.load(scope(), NIO_ACCESS.mappedMemoryUtils(),\n+            SCOPED_MEMORY_ACCESS.load(sessionImpl(), NIO_ACCESS.mappedMemoryUtils(),\n@@ -82,1 +82,1 @@\n-            SCOPED_MEMORY_ACCESS.unload(scope(), NIO_ACCESS.mappedMemoryUtils(),\n+            SCOPED_MEMORY_ACCESS.unload(sessionImpl(), NIO_ACCESS.mappedMemoryUtils(),\n@@ -89,1 +89,1 @@\n-                SCOPED_MEMORY_ACCESS.isLoaded(scope(),\n+                SCOPED_MEMORY_ACCESS.isLoaded(sessionImpl(),\n@@ -95,1 +95,1 @@\n-            SCOPED_MEMORY_ACCESS.force(scope(), NIO_ACCESS.mappedMemoryUtils(),\n+            SCOPED_MEMORY_ACCESS.force(sessionImpl(), NIO_ACCESS.mappedMemoryUtils(),\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/foreign\/MappedMemorySegmentImpl.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -222,1 +222,1 @@\n-        ((AbstractMemorySegmentImpl)segment).scope().checkValidState();\n+        ((AbstractMemorySegmentImpl)segment).sessionImpl().checkValidState();\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/foreign\/MemorySessionImpl.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -65,1 +65,1 @@\n-            dst.scope().checkValidState();\n+            dst.sessionImpl().checkValidState();\n@@ -77,1 +77,1 @@\n-                SCOPED_MEMORY_ACCESS.putLongUnaligned(dst.scope(), dst.unsafeGetBase(), dst.unsafeGetOffset() + offset, longValue, !Architecture.isLittleEndian());\n+                SCOPED_MEMORY_ACCESS.putLongUnaligned(dst.sessionImpl(), dst.unsafeGetBase(), dst.unsafeGetOffset() + offset, longValue, !Architecture.isLittleEndian());\n@@ -82,1 +82,1 @@\n-                SCOPED_MEMORY_ACCESS.putIntUnaligned(dst.scope(), dst.unsafeGetBase(), dst.unsafeGetOffset() + offset, (int) longValue, !Architecture.isLittleEndian());\n+                SCOPED_MEMORY_ACCESS.putIntUnaligned(dst.sessionImpl(), dst.unsafeGetBase(), dst.unsafeGetOffset() + offset, (int) longValue, !Architecture.isLittleEndian());\n@@ -88,1 +88,1 @@\n-                SCOPED_MEMORY_ACCESS.putShortUnaligned(dst.scope(), dst.unsafeGetBase(), dst.unsafeGetOffset() + offset, (short) longValue, !Architecture.isLittleEndian());\n+                SCOPED_MEMORY_ACCESS.putShortUnaligned(dst.sessionImpl(), dst.unsafeGetBase(), dst.unsafeGetOffset() + offset, (short) longValue, !Architecture.isLittleEndian());\n@@ -94,1 +94,1 @@\n-                SCOPED_MEMORY_ACCESS.putByte(dst.scope(), dst.unsafeGetBase(), dst.unsafeGetOffset() + offset, value);\n+                SCOPED_MEMORY_ACCESS.putByte(dst.sessionImpl(), dst.unsafeGetBase(), dst.unsafeGetOffset() + offset, value);\n@@ -99,1 +99,1 @@\n-            SCOPED_MEMORY_ACCESS.setMemory(dst.scope(), dst.unsafeGetBase(), dst.unsafeGetOffset(), dst.length, value);\n+            SCOPED_MEMORY_ACCESS.setMemory(dst.sessionImpl(), dst.unsafeGetBase(), dst.unsafeGetOffset(), dst.length, value);\n@@ -127,2 +127,2 @@\n-                final long v = SCOPED_MEMORY_ACCESS.getLongUnaligned(src.scope(), src.unsafeGetBase(), src.unsafeGetOffset() + srcOffset + offset, !Architecture.isLittleEndian());\n-                SCOPED_MEMORY_ACCESS.putLongUnaligned(dst.scope(), dst.unsafeGetBase(), dst.unsafeGetOffset() + dstOffset + offset, v, !Architecture.isLittleEndian());\n+                final long v = SCOPED_MEMORY_ACCESS.getLongUnaligned(src.sessionImpl(), src.unsafeGetBase(), src.unsafeGetOffset() + srcOffset + offset, !Architecture.isLittleEndian());\n+                SCOPED_MEMORY_ACCESS.putLongUnaligned(dst.sessionImpl(), dst.unsafeGetBase(), dst.unsafeGetOffset() + dstOffset + offset, v, !Architecture.isLittleEndian());\n@@ -133,2 +133,2 @@\n-                final int v = SCOPED_MEMORY_ACCESS.getIntUnaligned(src.scope(), src.unsafeGetBase(),src.unsafeGetOffset() + srcOffset + offset, !Architecture.isLittleEndian());\n-                SCOPED_MEMORY_ACCESS.putIntUnaligned(dst.scope(), dst.unsafeGetBase(), dst.unsafeGetOffset() + dstOffset + offset, v, !Architecture.isLittleEndian());\n+                final int v = SCOPED_MEMORY_ACCESS.getIntUnaligned(src.sessionImpl(), src.unsafeGetBase(),src.unsafeGetOffset() + srcOffset + offset, !Architecture.isLittleEndian());\n+                SCOPED_MEMORY_ACCESS.putIntUnaligned(dst.sessionImpl(), dst.unsafeGetBase(), dst.unsafeGetOffset() + dstOffset + offset, v, !Architecture.isLittleEndian());\n@@ -140,2 +140,2 @@\n-                final short v = SCOPED_MEMORY_ACCESS.getShortUnaligned(src.scope(), src.unsafeGetBase(), src.unsafeGetOffset() + srcOffset + offset, !Architecture.isLittleEndian());\n-                SCOPED_MEMORY_ACCESS.putShortUnaligned(dst.scope(), dst.unsafeGetBase(), dst.unsafeGetOffset() + dstOffset + offset, v, !Architecture.isLittleEndian());\n+                final short v = SCOPED_MEMORY_ACCESS.getShortUnaligned(src.sessionImpl(), src.unsafeGetBase(), src.unsafeGetOffset() + srcOffset + offset, !Architecture.isLittleEndian());\n+                SCOPED_MEMORY_ACCESS.putShortUnaligned(dst.sessionImpl(), dst.unsafeGetBase(), dst.unsafeGetOffset() + dstOffset + offset, v, !Architecture.isLittleEndian());\n@@ -147,2 +147,2 @@\n-                final byte v = SCOPED_MEMORY_ACCESS.getByte(src.scope(), src.unsafeGetBase(), src.unsafeGetOffset() + srcOffset + offset);\n-                SCOPED_MEMORY_ACCESS.putByte(dst.scope(), dst.unsafeGetBase(), dst.unsafeGetOffset() + dstOffset + offset, v);\n+                final byte v = SCOPED_MEMORY_ACCESS.getByte(src.sessionImpl(), src.unsafeGetBase(), src.unsafeGetOffset() + srcOffset + offset);\n+                SCOPED_MEMORY_ACCESS.putByte(dst.sessionImpl(), dst.unsafeGetBase(), dst.unsafeGetOffset() + dstOffset + offset, v);\n@@ -153,1 +153,1 @@\n-            SCOPED_MEMORY_ACCESS.copyMemory(src.scope(), dst.scope(),\n+            SCOPED_MEMORY_ACCESS.copyMemory(src.sessionImpl(), dst.sessionImpl(),\n@@ -176,2 +176,2 @@\n-            if (SCOPED_MEMORY_ACCESS.getByte(src.scope(), src.unsafeGetBase(), src.unsafeGetOffset() + srcFromOffset) !=\n-                    SCOPED_MEMORY_ACCESS.getByte(dst.scope(), dst.unsafeGetBase(), dst.unsafeGetOffset() + dstFromOffset)) {\n+            if (SCOPED_MEMORY_ACCESS.getByte(src.sessionImpl(), src.unsafeGetBase(), src.unsafeGetOffset() + srcFromOffset) !=\n+                    SCOPED_MEMORY_ACCESS.getByte(dst.sessionImpl(), dst.unsafeGetBase(), dst.unsafeGetOffset() + dstFromOffset)) {\n@@ -180,1 +180,1 @@\n-            i = vectorizedMismatchLargeForBytes(src.scope(), dst.scope(),\n+            i = vectorizedMismatchLargeForBytes(src.sessionImpl(), dst.sessionImpl(),\n@@ -202,2 +202,2 @@\n-            final long s = SCOPED_MEMORY_ACCESS.getLongUnaligned(src.scope(), src.unsafeGetBase(), src.unsafeGetOffset() + srcFromOffset + offset, false);\n-            final long d = SCOPED_MEMORY_ACCESS.getLongUnaligned(dst.scope(), dst.unsafeGetBase(), dst.unsafeGetOffset() + dstFromOffset + offset, false);\n+            final long s = SCOPED_MEMORY_ACCESS.getLongUnaligned(src.sessionImpl(), src.unsafeGetBase(), src.unsafeGetOffset() + srcFromOffset + offset, false);\n+            final long d = SCOPED_MEMORY_ACCESS.getLongUnaligned(dst.sessionImpl(), dst.unsafeGetBase(), dst.unsafeGetOffset() + dstFromOffset + offset, false);\n@@ -212,2 +212,2 @@\n-            final int s = SCOPED_MEMORY_ACCESS.getIntUnaligned(src.scope(), src.unsafeGetBase(), src.unsafeGetOffset() + srcFromOffset + offset, false);\n-            final int d = SCOPED_MEMORY_ACCESS.getIntUnaligned(dst.scope(), dst.unsafeGetBase(), dst.unsafeGetOffset() + dstFromOffset + offset, false);\n+            final int s = SCOPED_MEMORY_ACCESS.getIntUnaligned(src.sessionImpl(), src.unsafeGetBase(), src.unsafeGetOffset() + srcFromOffset + offset, false);\n+            final int d = SCOPED_MEMORY_ACCESS.getIntUnaligned(dst.sessionImpl(), dst.unsafeGetBase(), dst.unsafeGetOffset() + dstFromOffset + offset, false);\n@@ -222,2 +222,2 @@\n-            final short s = SCOPED_MEMORY_ACCESS.getShortUnaligned(src.scope(), src.unsafeGetBase(), src.unsafeGetOffset() + srcFromOffset + offset, false);\n-            final short d = SCOPED_MEMORY_ACCESS.getShortUnaligned(dst.scope(), dst.unsafeGetBase(), dst.unsafeGetOffset() + dstFromOffset + offset, false);\n+            final short s = SCOPED_MEMORY_ACCESS.getShortUnaligned(src.sessionImpl(), src.unsafeGetBase(), src.unsafeGetOffset() + srcFromOffset + offset, false);\n+            final short d = SCOPED_MEMORY_ACCESS.getShortUnaligned(dst.sessionImpl(), dst.unsafeGetBase(), dst.unsafeGetOffset() + dstFromOffset + offset, false);\n@@ -232,2 +232,2 @@\n-            final byte s = SCOPED_MEMORY_ACCESS.getByte(src.scope(), src.unsafeGetBase(), src.unsafeGetOffset() + srcFromOffset + offset);\n-            final byte d = SCOPED_MEMORY_ACCESS.getByte(dst.scope(), dst.unsafeGetBase(), dst.unsafeGetOffset() + dstFromOffset + offset);\n+            final byte s = SCOPED_MEMORY_ACCESS.getByte(src.sessionImpl(), src.unsafeGetBase(), src.unsafeGetOffset() + srcFromOffset + offset);\n+            final byte d = SCOPED_MEMORY_ACCESS.getByte(dst.sessionImpl(), dst.unsafeGetBase(), dst.unsafeGetOffset() + dstFromOffset + offset);\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/foreign\/SegmentBulkOperations.java","additions":26,"deletions":26,"binary":false,"changes":52,"status":"modified"},{"patch":"@@ -176,1 +176,1 @@\n-                    MemorySessionImpl sessionImpl = ((AbstractMemorySegmentImpl) arg).scope();\n+                    MemorySessionImpl sessionImpl = ((AbstractMemorySegmentImpl) arg).sessionImpl();\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/foreign\/abi\/DowncallLinker.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -158,1 +158,1 @@\n-            MemorySessionImpl targetImpl = ((AbstractMemorySegmentImpl) target).scope();\n+            MemorySessionImpl targetImpl = ((AbstractMemorySegmentImpl) target).sessionImpl();\n@@ -165,1 +165,1 @@\n-                MemorySessionImpl capturedStateImpl = ((AbstractMemorySegmentImpl) capturedState).scope();\n+                MemorySessionImpl capturedStateImpl = ((AbstractMemorySegmentImpl) capturedState).sessionImpl();\n@@ -178,1 +178,1 @@\n-                    MemorySessionImpl sessionImpl = ms.scope();\n+                    MemorySessionImpl sessionImpl = ms.sessionImpl();\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/foreign\/abi\/fallback\/FallbackLinker.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2020, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2020, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -336,1 +336,1 @@\n-                    msp.scope(),\n+                    msp.sessionImpl(),\n@@ -377,1 +377,1 @@\n-                    msp.scope(),\n+                    msp.sessionImpl(),\n@@ -419,1 +419,1 @@\n-                    msp.scope(),\n+                    msp.sessionImpl(),\n@@ -461,1 +461,1 @@\n-                    msp.scope(),\n+                    msp.sessionImpl(),\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/misc\/X-ScopedMemoryAccess.java.template","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"}]}