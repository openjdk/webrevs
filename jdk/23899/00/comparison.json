{"files":[{"patch":"@@ -57,0 +57,1 @@\n+import com.sun.tools.javac.code.Symbol.MethodSymbol;\n@@ -61,0 +62,1 @@\n+import com.sun.tools.javac.code.Type.MethodType;\n@@ -1076,1 +1078,1 @@\n-                result.add(createArrayLengthSymbol(at, site));\n+                result.addAll(createArraySymbols(at, site));\n@@ -1164,5 +1166,15 @@\n-    private Element createArrayLengthSymbol(AnalyzeTask at, TypeMirror site) {\n-        Name length = Names.instance(at.getContext()).length;\n-        Type intType = Symtab.instance(at.getContext()).intType;\n-\n-        return new VarSymbol(Flags.PUBLIC | Flags.FINAL, length, intType, ((Type) site).tsym);\n+    private List<Element> createArraySymbols(AnalyzeTask at, TypeMirror site) {\n+        Symtab syms = Symtab.instance(at.getContext());\n+        Names names = Names.instance(at.getContext());\n+        Name length = names.length;\n+        Name clone = names.clone;\n+        Type lengthType = syms.intType;\n+        Type cloneType = new MethodType(com.sun.tools.javac.util.List.<Type>nil(),\n+                                        (Type) site,\n+                                        com.sun.tools.javac.util.List.<Type>nil(),\n+                                        syms.methodClass);\n+\n+        return List.of(\n+                new VarSymbol(Flags.PUBLIC | Flags.FINAL, length, lengthType, ((Type) site).tsym),\n+                new MethodSymbol(Flags.PUBLIC | Flags.FINAL, clone, cloneType, ((Type) site).tsym)\n+        );\n","filename":"src\/jdk.jshell\/share\/classes\/jdk\/jshell\/SourceCodeAnalysisImpl.java","additions":18,"deletions":6,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n- * @bug 8131025 8141092 8153761 8145263 8131019 8175886 8176184 8176241 8176110 8177466 8197439 8221759 8234896 8240658 8278039 8286206 8296789 8314662 8326333\n+ * @bug 8131025 8141092 8153761 8145263 8131019 8175886 8176184 8176241 8176110 8177466 8197439 8221759 8234896 8240658 8278039 8286206 8296789 8314662 8326333 8326333\n@@ -815,0 +815,1 @@\n+    \/\/JDK-8326333: jshell <TAB> completion on arrays is incomplete\n@@ -819,0 +820,1 @@\n+        assertCompletion(\"strs.cl|\", \"clone()\");\n@@ -822,0 +824,1 @@\n+        assertCompletion(\"ints.cl|\", \"clone()\");\n","filename":"test\/langtools\/jdk\/jshell\/CompletionSuggestionTest.java","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"}]}