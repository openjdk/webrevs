{"files":[{"patch":"@@ -28,0 +28,1 @@\n+import java.util.Objects;\n@@ -62,1 +63,1 @@\n-     * @throws IllegalArgumentException if {@code data} is null\n+     * @throws NullPointerException if {@code data} is null\n@@ -72,3 +73,1 @@\n-        if (data == null) {\n-            throw new IllegalArgumentException(\"Data must not be null\");\n-        }\n+        Objects.requireNonNull(data, \"Data must not be null\");\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/image\/Kernel.java","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n- *          throws only IllegalArgumentException\n+ *          throws only IllegalArgumentException or NullPointerException\n@@ -34,1 +34,7 @@\n-    private static void expectIllegalArgumentException(Runnable code) {\n+\n+    private static void test(int width, int height, float[] data,\n+                             Class<?> expected)\n+    {\n+        System.out.printf(\"Testing for width: %d, height: %d, data: %s%n\",\n+                          width, height, data == null ? \"null\" : \"not null\");\n+        Class<?> actual = null;\n@@ -36,5 +42,8 @@\n-            code.run();\n-            throw new RuntimeException(\"Expected IllegalArgumentException\" +\n-                \" but no exception was thrown\");\n-        } catch (IllegalArgumentException e) {\n-            \/\/ we expect IllegalArgumentException\n+            new Kernel(width, height, data);\n+        } catch (Exception e) {\n+            actual = e.getClass();\n+        }\n+        if (actual != expected) {\n+            System.err.println(\"Expected: \" + expected);\n+            System.err.println(\"Actual: \" + actual);\n+            throw new RuntimeException(\"Test failed\");\n@@ -44,4 +53,2 @@\n-    private static void testKernel(int width, int height, float[] data) {\n-        System.out.println(\"Testing for width: \" + width + \", height: \"\n-            + height + \", data: \" + (data == null ? \"null\" : \"not null\"));\n-        expectIllegalArgumentException(() -> new Kernel(width, height, data));\n+    private static void testIAE(int width, int height, int len) {\n+        test(width, height, new float[len], IllegalArgumentException.class);\n@@ -50,5 +57,3 @@\n-    public static void main(String[] args) {\n-        testKernel(-1, 1, new float[100]);\n-        testKernel(1, -1, new float[100]);\n-        testKernel(-1, -1, new float[100]);\n-        testKernel(1, 1, null);\n+    private static void testNPE(int width, int height) {\n+        test(width, height, null, NullPointerException.class);\n+    }\n@@ -56,3 +61,11 @@\n-        int width = 50;\n-        int height = Integer.MAX_VALUE;\n-        testKernel(width, height, new float[100]);\n+    public static void main(String[] args) {\n+        int[][] sizes = {{-1, 1}, {1, -1}, {-1, -1}, {50, Integer.MAX_VALUE}};\n+        int[] lens = {1, 100};\n+        for (int[] kernelSize : sizes) {\n+            for (int len : lens) {\n+                testIAE(kernelSize[0], kernelSize[1], len);\n+            }\n+            testNPE(kernelSize[0], kernelSize[1]);\n+        }\n+        testNPE(10, 10);     \/\/ NPE on valid width and height\n+        testIAE(10, 10, 10); \/\/ IAE on valid width and height but small data\n","filename":"test\/jdk\/java\/awt\/image\/ConvolveOp\/KernelInitialisationTest.java","additions":32,"deletions":19,"binary":false,"changes":51,"status":"modified"}]}