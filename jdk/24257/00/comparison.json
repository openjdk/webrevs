{"files":[{"patch":"@@ -343,0 +343,3 @@\n+    uint desired_eden_length = desired_young_length - _g1h->survivor_regions_count();\n+    uint allocated_eden_length = allocated_young_length - _g1h->survivor_regions_count();\n+\n@@ -345,2 +348,2 @@\n-      uint receiving_young = MIN3(_free_regions_at_end_of_collection,\n-                                  desired_young_length,\n+      uint receiving_eden = MIN3(_free_regions_at_end_of_collection,\n+                                  desired_eden_length,\n@@ -348,0 +351,2 @@\n+      \/\/ Ensure that we provision for at least one Eden region.\n+      receiving_eden = MAX2(receiving_eden, 1u);\n@@ -350,2 +355,2 @@\n-      receiving_additional_eden = allocated_young_length < receiving_young ?\n-                                  receiving_young - allocated_young_length : 0;\n+      receiving_additional_eden = allocated_eden_length < receiving_eden ?\n+                                  receiving_eden - allocated_eden_length : 0;\n@@ -355,1 +360,1 @@\n-                                receiving_young,\n+                                receiving_eden,\n@@ -357,1 +362,1 @@\n-    } else if (_free_regions_at_end_of_collection < (desired_young_length + _reserve_regions)) {\n+    } else if (_free_regions_at_end_of_collection < (desired_eden_length + _reserve_regions)) {\n@@ -360,1 +365,1 @@\n-      assert(free_outside_reserve < desired_young_length,\n+      assert(free_outside_reserve < desired_eden_length,\n@@ -362,1 +367,1 @@\n-             free_outside_reserve, desired_young_length);\n+             free_outside_reserve, desired_eden_length);\n@@ -364,1 +369,1 @@\n-      uint receiving_within_reserve = MIN2(desired_young_length - free_outside_reserve,\n+      uint receiving_within_reserve = MIN2(desired_eden_length - free_outside_reserve,\n@@ -366,1 +371,2 @@\n-      uint receiving_young = free_outside_reserve + receiving_within_reserve;\n+      uint receiving_eden = free_outside_reserve + receiving_within_reserve;\n+\n@@ -368,2 +374,2 @@\n-      receiving_additional_eden = allocated_young_length < receiving_young ?\n-                                  receiving_young - allocated_young_length : 0;\n+      receiving_additional_eden = allocated_eden_length < receiving_eden ?\n+                                  receiving_eden - allocated_eden_length : 0;\n@@ -377,1 +383,1 @@\n-                                receiving_young, receiving_additional_eden);\n+                                receiving_eden, receiving_additional_eden);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1Policy.cpp","additions":19,"deletions":13,"binary":false,"changes":32,"status":"modified"}]}