{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1996, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1996, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,3 +34,36 @@\n- * <p>{@code Array} permits widening conversions to occur during a get or set\n- * operation, but throws an {@code IllegalArgumentException} if a narrowing\n- * conversion would occur.\n+ * <p id=\"value-conversion\">\n+ * {@code Array} declares {@link #get get} and {@link #set set} access\n+ * operations with overloads for all primitive types.  They convert their\n+ * retrieved and new values depending on whether the array's component type\n+ * is primitive or reference:\n+ * <ul>\n+ * <li>If the array component type is a primitive type P:\n+ *     <ul>\n+ *     <li>{@link #get get} wraps the retrieved value in an instance of the\n+ *         {@linkplain java.lang##wrapperClass wrapper class} of P.\n+ *     <li>The get overload for primitive type O converts the retrieved value\n+ *         from P to O via an identity conversion (JLS {@jls 5.1.1}) or a\n+ *         widening primitive conversion (JLS {@jls 5.1.2}), or throws an {@code\n+ *         IllegalArgumentException} if no such conversion exists.\n+ *     <li>{@link #set set} requires the new value to be an instance of a\n+ *         wrapper class, or throws an {@code IllegalArgumentException}. The\n+ *         new value is unwrapped (JLS {@jls 5.1.8}) to a value of the wrapper\n+ *         class's corresponding primitive type I, and then converted from I to\n+ *         P via an identity conversion or a widening primitive conversion, or\n+ *         throws an {@code IllegalArgumentException} if no such conversion\n+ *         exists.\n+ *     <li>The set overload for primitive type I converts the new value from\n+ *         I to P via an identity conversion or a widening primitive conversion,\n+ *         or throws an {@code IllegalArgumentException} if no such conversion\n+ *         exists.\n+ *     <\/ul>\n+ * <li>If the array component type is a reference type R:\n+ *     <ul>\n+ *     <li>{@code get} performs no conversion.\n+ *     <li>The primitive get overloads throw an {@code IllegalArgumentException}.\n+ *     <li>{@code set} converts the new value to R as if through a narrowing\n+ *         reference conversion (JLS {@jls 5.1.6.3}), but throws an {@code\n+ *         IllegalArgumentException} instead of a {@code ClassCastException}.\n+ *     <li>The primitive set overloads throw an {@code IllegalArgumentException}.\n+ *     <\/ul>\n+ * <\/ul>\n@@ -300,3 +333,3 @@\n-     * object to the specified new value.  The new value is first\n-     * automatically unwrapped if the array has a primitive component\n-     * type.\n+     * object to the specified new value after {@linkplain ##value-conversion\n+     * possible conversions}.\n+     *\n@@ -309,2 +342,2 @@\n-     * is not an array, or if the array component type is primitive and\n-     * an unwrapping conversion fails\n+     * is not an array, if the array component type is primitive and the\n+     * unboxing conversion fails, or if the identity or widening conversion fails\n","filename":"src\/java.base\/share\/classes\/java\/lang\/reflect\/Array.java","additions":42,"deletions":9,"binary":false,"changes":51,"status":"modified"},{"patch":"@@ -51,4 +51,36 @@\n- *\n- * <p>A {@code Field} permits widening conversions to occur during a get or\n- * set access operation, but throws an {@code IllegalArgumentException} if a\n- * narrowing conversion would occur.\n+ * <p id=\"value-conversion\">\n+ * A {@code Field} declares {@link #get get} and {@link #set set} access\n+ * operations with overloads for all primitive types.  They convert the\n+ * retrieved and new values depending on whether the underlying field is of a\n+ * primitive or a reference type:\n+ * <ul>\n+ * <li>If the underlying field is of a primitive type P:\n+ *     <ul>\n+ *     <li>{@link #get get} wraps the retrieved value in an instance of the\n+ *         {@linkplain java.lang##wrapperClass wrapper class} of P.\n+ *     <li>The get overload for primitive type O converts the retrieved value\n+ *         from P to O via an identity conversion (JLS {@jls 5.1.1}) or a\n+ *         widening primitive conversion (JLS {@jls 5.1.2}), or throws an {@code\n+ *         IllegalArgumentException} if no such conversion exists.\n+ *     <li>{@link #set set} requires the new value to be an instance of a\n+ *         wrapper class, or throws an {@code IllegalArgumentException}. The\n+ *         new value is unwrapped (JLS {@jls 5.1.8}) to a value of the wrapper\n+ *         class's corresponding primitive type I, and then converted from I to\n+ *         P via an identity conversion or a widening primitive conversion, or\n+ *         throws an {@code IllegalArgumentException} if no such conversion\n+ *         exists.\n+ *     <li>The set overload for primitive type I converts the new value from\n+ *         I to P via an identity conversion or a widening primitive conversion,\n+ *         or throws an {@code IllegalArgumentException} if no such conversion\n+ *         exists.\n+ *     <\/ul>\n+ * <li>If the underlying field is of a reference type R:\n+ *     <ul>\n+ *     <li>{@code get} performs no conversion.\n+ *     <li>The primitive get overloads throw an {@code IllegalArgumentException}.\n+ *     <li>{@code set} converts the new value to R as if through a narrowing\n+ *         reference conversion (JLS {@jls 5.1.6.3}), but throws an {@code\n+ *         IllegalArgumentException} instead of a {@code ClassCastException}.\n+ *     <li>The primitive set overloads throw an {@code IllegalArgumentException}.\n+ *     <\/ul>\n+ * <\/ul>\n@@ -787,9 +819,2 @@\n-     * <p>If the underlying field is of a primitive type, an unwrapping\n-     * conversion is attempted to convert the new value to a value of\n-     * a primitive type.  If this attempt fails, the method throws an\n-     * {@code IllegalArgumentException}.\n-     *\n-     * <p>If, after possible unwrapping, the new value cannot be\n-     * converted to the type of the underlying field by an identity or\n-     * widening conversion, the method throws an\n-     * {@code IllegalArgumentException}.\n+     * <p>The new value is {@linkplain ##value-conversion converted to be\n+     * compatible} with the type of the underlying field.\n@@ -800,1 +825,1 @@\n-     * <p>The field is set to the possibly unwrapped and widened new value.\n+     * <p>The field is set to the possibly converted new value.\n@@ -815,2 +840,3 @@\n-     *              field (or a subclass or implementor thereof),\n-     *              or if an unwrapping conversion fails.\n+     *              field (or a subclass or implementor thereof), if an\n+     *              unboxing conversion fails, or if the identity or widening\n+     *              conversion fails\n@@ -838,4 +864,3 @@\n-     * This method is equivalent to\n-     * {@code set(obj, zObj)},\n-     * where {@code zObj} is a {@code Boolean} object and\n-     * {@code zObj.booleanValue() == z}.\n+     * If this field is of a primitive type, this method is equivalent to\n+     * {@code set(obj, zObj)}, where {@code zObj} is a {@code Boolean} object\n+     * and {@code zObj.booleanValue() == z}.\n@@ -854,1 +879,1 @@\n-     *              or if an unwrapping conversion fails.\n+     *              or if an identity or primitive widening conversion fails\n@@ -877,3 +902,2 @@\n-     * This method is equivalent to\n-     * {@code set(obj, bObj)},\n-     * where {@code bObj} is a {@code Byte} object and\n+     * If this field is of a primitive type, this method is equivalent to\n+     * {@code set(obj, bObj)}, where {@code bObj} is a {@code Byte} object and\n@@ -893,1 +917,1 @@\n-     *              or if an unwrapping conversion fails.\n+     *              or if an identity or primitive widening conversion fails\n@@ -916,4 +940,3 @@\n-     * This method is equivalent to\n-     * {@code set(obj, cObj)},\n-     * where {@code cObj} is a {@code Character} object and\n-     * {@code cObj.charValue() == c}.\n+     * If this field is of a primitive type, this method is equivalent to\n+     * {@code set(obj, cObj)}, where {@code cObj} is a {@code Character} object\n+     * and {@code cObj.charValue() == c}.\n@@ -932,1 +955,1 @@\n-     *              or if an unwrapping conversion fails.\n+     *              or if an identity or primitive widening conversion fails\n@@ -955,3 +978,2 @@\n-     * This method is equivalent to\n-     * {@code set(obj, sObj)},\n-     * where {@code sObj} is a {@code Short} object and\n+     * If this field is of a primitive type, this method is equivalent to\n+     * {@code set(obj, sObj)}, where {@code sObj} is a {@code Short} object and\n@@ -971,1 +993,1 @@\n-     *              or if an unwrapping conversion fails.\n+     *              or if an identity or primitive widening conversion fails\n@@ -994,4 +1016,3 @@\n-     * This method is equivalent to\n-     * {@code set(obj, iObj)},\n-     * where {@code iObj} is an {@code Integer} object and\n-     * {@code iObj.intValue() == i}.\n+     * If this field is of a primitive type, this method is equivalent to\n+     * {@code set(obj, iObj)}, where {@code iObj} is an {@code Integer} object\n+     * and {@code iObj.intValue() == i}.\n@@ -1010,1 +1031,1 @@\n-     *              or if an unwrapping conversion fails.\n+     *              or if an identity or primitive widening conversion fails\n@@ -1033,3 +1054,2 @@\n-     * This method is equivalent to\n-     * {@code set(obj, lObj)},\n-     * where {@code lObj} is a {@code Long} object and\n+     * If this field is of a primitive type, this method is equivalent to\n+     * {@code set(obj, lObj)}, where {@code lObj} is a {@code Long} object and\n@@ -1049,1 +1069,1 @@\n-     *              or if an unwrapping conversion fails.\n+     *              or if an identity or primitive widening conversion fails\n@@ -1072,3 +1092,2 @@\n-     * This method is equivalent to\n-     * {@code set(obj, fObj)},\n-     * where {@code fObj} is a {@code Float} object and\n+     * If this field is of a primitive type, this method is equivalent to\n+     * {@code set(obj, fObj)}, where {@code fObj} is a {@code Float} object and\n@@ -1088,1 +1107,1 @@\n-     *              or if an unwrapping conversion fails.\n+     *              or if an identity or primitive widening conversion fails\n@@ -1111,3 +1130,2 @@\n-     * This method is equivalent to\n-     * {@code set(obj, dObj)},\n-     * where {@code dObj} is a {@code Double} object and\n+     * If this field is of a primitive type, this method is equivalent to\n+     * {@code set(obj, dObj)}, where {@code dObj} is a {@code Double} object and\n@@ -1127,1 +1145,1 @@\n-     *              or if an unwrapping conversion fails.\n+     *              or if an identity or primitive widening conversion fails\n","filename":"src\/java.base\/share\/classes\/java\/lang\/reflect\/Field.java","additions":69,"deletions":51,"binary":false,"changes":120,"status":"modified"}]}