{"files":[{"patch":"@@ -7193,1 +7193,1 @@\n-    __ select_from_two_vectors_Neon($dst$$FloatRegister, $src1$$FloatRegister,\n+    __ select_from_two_vectors_neon($dst$$FloatRegister, $src1$$FloatRegister,\n@@ -7209,1 +7209,1 @@\n-    __ select_from_two_vectors_Neon($dst$$FloatRegister, $src1$$FloatRegister,\n+    __ select_from_two_vectors_neon($dst$$FloatRegister, $src1$$FloatRegister,\n@@ -7225,1 +7225,1 @@\n-    __ select_from_two_vectors_Neon($dst$$FloatRegister, $src1$$FloatRegister,\n+    __ select_from_two_vectors_neon($dst$$FloatRegister, $src1$$FloatRegister,\n@@ -7241,1 +7241,1 @@\n-    __ select_from_two_vectors_Neon($dst$$FloatRegister, $src1$$FloatRegister,\n+    __ select_from_two_vectors_neon($dst$$FloatRegister, $src1$$FloatRegister,\n@@ -7257,1 +7257,0 @@\n-    BasicType bt = Matcher::vector_element_basic_type(this);\n@@ -7259,1 +7258,1 @@\n-    __ select_from_two_vectors_SVE($dst$$FloatRegister, $src1$$FloatRegister,\n+    __ select_from_two_vectors_sve($dst$$FloatRegister, $src1$$FloatRegister,\n@@ -7261,1 +7260,2 @@\n-                                   $tmp$$FloatRegister, bt, length_in_bytes);\n+                                   $tmp$$FloatRegister, get_reg_variant(this),\n+                                   length_in_bytes);\n@@ -7273,1 +7273,0 @@\n-    BasicType bt = Matcher::vector_element_basic_type(this);\n@@ -7275,1 +7274,1 @@\n-    __ select_from_two_vectors_SVE($dst$$FloatRegister, $src1$$FloatRegister,\n+    __ select_from_two_vectors_sve($dst$$FloatRegister, $src1$$FloatRegister,\n@@ -7277,1 +7276,2 @@\n-                                   $tmp$$FloatRegister, bt, length_in_bytes);\n+                                   $tmp$$FloatRegister, get_reg_variant(this),\n+                                   length_in_bytes);\n@@ -7289,1 +7289,0 @@\n-    BasicType bt = Matcher::vector_element_basic_type(this);\n@@ -7291,1 +7290,1 @@\n-    __ select_from_two_vectors_SVE($dst$$FloatRegister, $src1$$FloatRegister,\n+    __ select_from_two_vectors_sve($dst$$FloatRegister, $src1$$FloatRegister,\n@@ -7293,1 +7292,2 @@\n-                                   $tmp$$FloatRegister, bt, length_in_bytes);\n+                                   $tmp$$FloatRegister, get_reg_variant(this),\n+                                   length_in_bytes);\n@@ -7305,1 +7305,0 @@\n-    BasicType bt = Matcher::vector_element_basic_type(this);\n@@ -7307,1 +7306,1 @@\n-    __ select_from_two_vectors_SVE($dst$$FloatRegister, $src1$$FloatRegister,\n+    __ select_from_two_vectors_sve($dst$$FloatRegister, $src1$$FloatRegister,\n@@ -7309,1 +7308,2 @@\n-                                   $tmp$$FloatRegister, bt, length_in_bytes);\n+                                   $tmp$$FloatRegister, get_reg_variant(this),\n+                                   length_in_bytes);\n","filename":"src\/hotspot\/cpu\/aarch64\/aarch64_vector.ad","additions":16,"deletions":16,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -5176,1 +5176,1 @@\n-    __ select_from_two_vectors_Neon($dst$$FloatRegister, $src1$$FloatRegister,\n+    __ select_from_two_vectors_neon($dst$$FloatRegister, $src1$$FloatRegister,\n@@ -5195,1 +5195,0 @@\n-    BasicType bt = Matcher::vector_element_basic_type(this);\n@@ -5197,1 +5196,1 @@\n-    __ select_from_two_vectors_SVE($dst$$FloatRegister, $src1$$FloatRegister,\n+    __ select_from_two_vectors_sve($dst$$FloatRegister, $src1$$FloatRegister,\n@@ -5199,1 +5198,2 @@\n-                                   $tmp$$FloatRegister, bt, length_in_bytes);\n+                                   $tmp$$FloatRegister, get_reg_variant(this),\n+                                   length_in_bytes);\n","filename":"src\/hotspot\/cpu\/aarch64\/aarch64_vector_ad.m4","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2857,1 +2857,1 @@\n-void C2_MacroAssembler::select_from_two_vectors_Neon(FloatRegister dst, FloatRegister src1,\n+void C2_MacroAssembler::select_from_two_vectors_neon(FloatRegister dst, FloatRegister src1,\n@@ -2884,3 +2884,1 @@\n-  bool is_byte = (bt == T_BYTE);\n-\n-  if (is_byte) {\n+  if (bt == T_BYTE) {\n@@ -2901,2 +2899,2 @@\n-    int elemSize = (bt == T_SHORT) ? 2 : 4;\n-    uint64_t tblOffset = (bt == T_SHORT) ? 0x0100u : 0x03020100u;\n+    int elem_size = (bt == T_SHORT) ? 2 : 4;\n+    uint64_t tbl_offset = (bt == T_SHORT) ? 0x0100u : 0x03020100u;\n@@ -2904,1 +2902,1 @@\n-    mov(tmp, size1, elemSize);\n+    mov(tmp, size1, elem_size);\n@@ -2906,1 +2904,1 @@\n-    mov(tmp, size2, tblOffset);\n+    mov(tmp, size2, tbl_offset);\n@@ -2925,1 +2923,1 @@\n-void C2_MacroAssembler::select_from_two_vectors_SVE(FloatRegister dst, FloatRegister src1,\n+void C2_MacroAssembler::select_from_two_vectors_sve(FloatRegister dst, FloatRegister src1,\n@@ -2927,1 +2925,1 @@\n-                                                    FloatRegister tmp, BasicType bt,\n+                                                    FloatRegister tmp, SIMD_RegVariant T,\n@@ -2929,2 +2927,0 @@\n-  SIMD_RegVariant size = elemType_to_regVariant(bt);\n-\n@@ -2935,1 +2931,1 @@\n-    sve_tbl(dst, size, tmp, index);\n+    sve_tbl(dst, T, tmp, index);\n@@ -2938,1 +2934,1 @@\n-    sve_tbl(dst, size, src1, src2, index);\n+    sve_tbl(dst, T, src1, src2, index);\n","filename":"src\/hotspot\/cpu\/aarch64\/c2_MacroAssembler_aarch64.cpp","additions":10,"deletions":14,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -197,1 +197,1 @@\n-  void select_from_two_vectors_Neon(FloatRegister dst, FloatRegister src1, FloatRegister src2,\n+  void select_from_two_vectors_neon(FloatRegister dst, FloatRegister src1, FloatRegister src2,\n@@ -201,2 +201,2 @@\n-  void select_from_two_vectors_SVE(FloatRegister dst, FloatRegister src1, FloatRegister src2,\n-                                   FloatRegister index, FloatRegister tmp, BasicType bt,\n+  void select_from_two_vectors_sve(FloatRegister dst, FloatRegister src1, FloatRegister src2,\n+                                   FloatRegister index, FloatRegister tmp, SIMD_RegVariant T,\n","filename":"src\/hotspot\/cpu\/aarch64\/c2_MacroAssembler_aarch64.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -42,1 +42,1 @@\n- *          generated for Neon and SVE\n+ *          generated on aarch64 and x86\n@@ -180,1 +180,2 @@\n-        applyIfCPUFeature = {\"asimd\", \"true\"})\n+        applyIfCPUFeature = {\"asimd\", \"true\"},\n+        applyIf = {\"MaxVectorSize\", \">=8\"})\n@@ -190,1 +191,2 @@\n-        applyIfCPUFeature = {\"asimd\", \"true\"})\n+        applyIfCPUFeature = {\"asimd\", \"true\"},\n+        applyIf = {\"MaxVectorSize\", \">=16\"})\n@@ -240,1 +242,2 @@\n-        applyIfCPUFeature = {\"asimd\", \"true\"})\n+        applyIfCPUFeature = {\"asimd\", \"true\"},\n+        applyIf = {\"MaxVectorSize\", \">=8\"})\n@@ -250,1 +253,2 @@\n-        applyIfCPUFeatureAnd = {\"asimd\", \"true\", \"sve2\", \"false\"})\n+        applyIfCPUFeatureAnd = {\"asimd\", \"true\", \"sve2\", \"false\"},\n+        applyIf = {\"MaxVectorSize\", \">=16\"})\n@@ -252,1 +256,2 @@\n-        applyIfCPUFeature = {\"sve2\", \"true\"})\n+        applyIfCPUFeature = {\"sve2\", \"true\"},\n+        applyIf = {\"MaxVectorSize\", \">=16\"})\n@@ -310,1 +315,2 @@\n-        applyIfCPUFeatureAnd = {\"asimd\", \"true\", \"sve2\", \"false\"})\n+        applyIfCPUFeatureAnd = {\"asimd\", \"true\", \"sve2\", \"false\"},\n+        applyIf = {\"MaxVectorSize\", \">=16\"})\n@@ -362,1 +368,2 @@\n-        applyIfCPUFeatureAnd = {\"asimd\", \"true\", \"sve2\", \"false\"})\n+        applyIfCPUFeatureAnd = {\"asimd\", \"true\", \"sve2\", \"false\"},\n+        applyIf = {\"MaxVectorSize\", \">=16\"})\n@@ -406,1 +413,2 @@\n-        applyIfCPUFeatureAnd = {\"asimd\", \"true\", \"sve2\", \"false\"})\n+        applyIfCPUFeatureAnd = {\"asimd\", \"true\", \"sve2\", \"false\"},\n+        applyIf = {\"MaxVectorSize\", \">=16\"})\n@@ -450,1 +458,2 @@\n-    applyIfCPUFeatureAnd = {\"asimd\", \"true\", \"sve2\", \"false\"})\n+        applyIfCPUFeatureAnd = {\"asimd\", \"true\", \"sve2\", \"false\"},\n+        applyIf = {\"MaxVectorSize\", \">=16\"})\n","filename":"test\/hotspot\/jtreg\/compiler\/vectorapi\/TestSelectFromTwoVectorOp.java","additions":19,"deletions":10,"binary":false,"changes":29,"status":"modified"}]}