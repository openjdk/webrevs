{"files":[{"patch":"@@ -1834,1 +1834,1 @@\n-       if (size_in_bits < 128 || (size_in_bits < 512 && !VM_Version::supports_avx512vl())) {\n+       if ((size_in_bits < 512 && !VM_Version::supports_avx512vl())) {\n","filename":"src\/hotspot\/cpu\/x86\/x86.ad","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -108,0 +108,1 @@\n+        \"avx512_vbmi\",\n","filename":"test\/hotspot\/jtreg\/compiler\/lib\/ir_framework\/test\/IREncodingPrinter.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -181,0 +181,3 @@\n+    @IR(counts = {IRNode.SELECT_FROM_TWO_VECTOR_VB, IRNode.VECTOR_SIZE_8, \">0\"},\n+        applyIfCPUFeatureAnd = {\"avx512_vbmi\", \"true\", \"avx512vl\", \"true\"},\n+        applyIf = {\"MaxVectorSize\", \">=8\"})\n@@ -188,0 +191,3 @@\n+    @IR(counts = {IRNode.SELECT_FROM_TWO_VECTOR_VB, IRNode.VECTOR_SIZE_16, \">0\"},\n+        applyIfCPUFeatureAnd = {\"avx512_vbmi\", \"true\", \"avx512vl\", \"true\"},\n+        applyIf = {\"MaxVectorSize\", \">=16\"})\n@@ -199,0 +205,3 @@\n+    @IR(counts = {IRNode.SELECT_FROM_TWO_VECTOR_VB, IRNode.VECTOR_SIZE_32, \">0\"},\n+        applyIfCPUFeatureAnd = {\"avx512_vbmi\", \"true\", \"avx512vl\", \"true\"},\n+        applyIf = {\"MaxVectorSize\", \">=32\"})\n@@ -210,0 +219,3 @@\n+    @IR(counts = {IRNode.SELECT_FROM_TWO_VECTOR_VB, IRNode.VECTOR_SIZE_64, \">0\"},\n+        applyIfCPUFeatureAnd = {\"avx512_vbmi\", \"true\", \"avx512f\", \"true\"},\n+        applyIf = {\"MaxVectorSize\", \">=64\"})\n@@ -229,0 +241,3 @@\n+    @IR(counts = {IRNode.SELECT_FROM_TWO_VECTOR_VS, IRNode.VECTOR_SIZE_4, \">0\"},\n+        applyIfCPUFeatureAnd = {\"avx512bw\", \"true\", \"avx512vl\", \"true\"},\n+        applyIf = {\"MaxVectorSize\", \">=8\"})\n@@ -238,0 +253,3 @@\n+    @IR(counts = {IRNode.SELECT_FROM_TWO_VECTOR_VS, IRNode.VECTOR_SIZE_8, \">0\"},\n+        applyIfCPUFeatureAnd = {\"avx512bw\", \"true\", \"avx512vl\", \"true\"},\n+        applyIf = {\"MaxVectorSize\", \">=16\"})\n@@ -249,0 +267,3 @@\n+    @IR(counts = {IRNode.SELECT_FROM_TWO_VECTOR_VS, IRNode.VECTOR_SIZE_16, \">0\"},\n+        applyIfCPUFeatureAnd = {\"avx512bw\", \"true\", \"avx512vl\", \"true\"},\n+        applyIf = {\"MaxVectorSize\", \">=32\"})\n@@ -260,0 +281,3 @@\n+    @IR(counts = {IRNode.SELECT_FROM_TWO_VECTOR_VS, IRNode.VECTOR_SIZE_32, \">0\"},\n+        applyIfCPUFeatureAnd = {\"avx512bw\", \"true\", \"avx512f\", \"true\"},\n+        applyIf = {\"MaxVectorSize\", \">=64\"})\n@@ -278,1 +302,2 @@\n-        applyIfCPUFeature = {\"asimd\", \"true\"})\n+        applyIfCPUFeatureOr = {\"asimd\", \"true\", \"avx512vl\", \"true\"},\n+        applyIf = {\"MaxVectorSize\", \">=8\"})\n@@ -287,1 +312,2 @@\n-        applyIfCPUFeature = {\"sve2\", \"true\"})\n+        applyIfCPUFeatureOr = {\"sve2\", \"true\", \"avx512vl\", \"true\"},\n+        applyIf = {\"MaxVectorSize\", \">=16\"})\n@@ -297,1 +323,1 @@\n-        applyIfCPUFeature = {\"sve2\", \"true\"},\n+        applyIfCPUFeatureOr = {\"sve2\", \"true\", \"avx512vl\", \"true\"},\n@@ -308,1 +334,1 @@\n-        applyIfCPUFeature = {\"sve2\", \"true\"},\n+        applyIfCPUFeatureOr = {\"sve2\", \"true\", \"avx512f\", \"true\"},\n@@ -328,1 +354,2 @@\n-        applyIfCPUFeature = {\"asimd\", \"true\"})\n+        applyIfCPUFeatureOr = {\"asimd\", \"true\", \"avx512vl\", \"true\"},\n+        applyIf = {\"MaxVectorSize\", \">=8\"})\n@@ -337,1 +364,2 @@\n-        applyIfCPUFeature = {\"sve2\", \"true\"})\n+        applyIfCPUFeatureOr = {\"sve2\", \"true\", \"avx512vl\", \"true\"},\n+        applyIf = {\"MaxVectorSize\", \">=16\"})\n@@ -347,1 +375,1 @@\n-        applyIfCPUFeature = {\"sve2\", \"true\"},\n+        applyIfCPUFeatureOr = {\"sve2\", \"true\", \"avx512vl\", \"true\"},\n@@ -358,1 +386,1 @@\n-        applyIfCPUFeature = {\"sve2\", \"true\"},\n+        applyIfCPUFeatureOr = {\"sve2\", \"true\", \"avx512f\", \"true\"},\n@@ -380,1 +408,2 @@\n-        applyIfCPUFeature = {\"sve2\", \"true\"})\n+        applyIfCPUFeatureOr = {\"sve2\", \"true\", \"avx512vl\", \"true\"},\n+        applyIf = {\"MaxVectorSize\", \">=16\"})\n@@ -390,1 +419,1 @@\n-        applyIfCPUFeature = {\"sve2\", \"true\"},\n+        applyIfCPUFeatureOr = {\"sve2\", \"true\", \"avx512vl\", \"true\"},\n@@ -401,1 +430,1 @@\n-        applyIfCPUFeature = {\"sve2\", \"true\"},\n+        applyIfCPUFeatureOr = {\"sve2\", \"true\", \"avx512f\", \"true\"},\n@@ -423,1 +452,2 @@\n-        applyIfCPUFeature = {\"sve2\", \"true\"})\n+        applyIfCPUFeatureOr = {\"sve2\", \"true\", \"avx512vl\", \"true\"},\n+        applyIf = {\"MaxVectorSize\", \">=16\"})\n@@ -433,1 +463,1 @@\n-        applyIfCPUFeature = {\"sve2\", \"true\"},\n+        applyIfCPUFeatureOr = {\"sve2\", \"true\", \"avx512vl\", \"true\"},\n@@ -444,1 +474,1 @@\n-        applyIfCPUFeature = {\"sve2\", \"true\"},\n+        applyIfCPUFeatureOr = {\"sve2\", \"true\", \"avx512f\", \"true\"},\n","filename":"test\/hotspot\/jtreg\/compiler\/vectorapi\/TestSelectFromTwoVectorOp.java","additions":44,"deletions":14,"binary":false,"changes":58,"status":"modified"}]}