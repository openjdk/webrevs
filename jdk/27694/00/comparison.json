{"files":[{"patch":"@@ -46,0 +46,1 @@\n+import java.util.concurrent.ExecutionException;\n@@ -142,0 +143,25 @@\n+    private static void assertTimeout(Throwable e) {\n+        Throwable x = e;\n+        while (x != null) {\n+            if (x instanceof HttpTimeoutException) {\n+                out.println(\"Caught expected timeout: \" + x);\n+                return;\n+            } else {\n+                x = x.getCause();\n+            }\n+        }\n+        assert x == null;\n+\n+        \/\/ print not matching exception stack trace\n+        e.printStackTrace(out);\n+\n+        \/\/ eliminate leading CompletionException \/ ExecutionException and\n+        \/\/ throws assertion error\n+        x = e;\n+        while (x instanceof CompletionException || x instanceof ExecutionException) {\n+            x = x.getCause();\n+        }\n+        if (x == null) x = e; \/\/ should not happen, but ensure we have a stack trace to report\n+        throw new AssertionError(\"Unexpected exception (no timeout in cause chain): \" + x, x);\n+    }\n+\n@@ -218,12 +244,1 @@\n-                    Throwable x = e;\n-                    if (x.getCause() instanceof SSLHandshakeException s) {\n-                        if (s.getCause() instanceof HttpTimeoutException) {\n-                            x = s;\n-                        }\n-                    }\n-                    if (!(x.getCause() instanceof HttpTimeoutException)) {\n-                        e.printStackTrace(out);\n-                        throw new RuntimeException(\"Unexpected exception: \" + e.getCause());\n-                    } else {\n-                        out.println(\"Caught expected timeout: \" + x.getCause());\n-                    }\n+                    assertTimeout(e);\n@@ -251,2 +266,2 @@\n-                } catch (HttpTimeoutException e) {\n-                    out.println(\"Caught expected timeout: \" + e);\n+                } catch (Throwable e) {\n+                    assertTimeout(e);\n","filename":"test\/jdk\/java\/net\/httpclient\/TimeoutBasic.java","additions":29,"deletions":14,"binary":false,"changes":43,"status":"modified"}]}