{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -429,13 +429,11 @@\n-  const size_t attach_range = highest_start - lowest_start;\n-  \/\/ Cap num_attempts at possible number.\n-  \/\/ At least one is possible even for 0 sized attach range.\n-  const uint64_t num_attempts_possible = (attach_range \/ attach_point_alignment) + 1;\n-  const uint64_t num_attempts_to_try   = MIN2((uint64_t)HeapSearchSteps, num_attempts_possible);\n-\n-  const size_t stepsize = (attach_range == 0) ? \/\/ Only one try.\n-    (size_t) highest_start : align_up(attach_range \/ num_attempts_to_try, attach_point_alignment);\n-\n-  \/\/ Try attach points from top to bottom.\n-  for (char* attach_point = highest_start;\n-       attach_point >= lowest_start && attach_point <= highest_start;  \/\/ Avoid wrap around.\n-       attach_point -= stepsize) {\n+  assert(is_aligned(highest_start, attach_point_alignment), \"precondition\");\n+  assert(is_aligned(lowest_start, attach_point_alignment), \"precondition\");\n+\n+  const size_t attach_range = pointer_delta(highest_start, lowest_start, sizeof(char));\n+  const size_t num_attempts_possible = (attach_range \/ attach_point_alignment) + 1;\n+  const size_t num_attempts_to_try   = MIN2((size_t)HeapSearchSteps, num_attempts_possible);\n+  const size_t num_intervals = num_attempts_to_try - 1;\n+  const size_t stepsize = num_intervals == 0 ? 0 : align_down(attach_range \/ num_intervals, attach_point_alignment);\n+\n+  for (size_t i = 0; i < num_attempts_to_try; ++i) {\n+    char* const attach_point = highest_start - stepsize * i;\n","filename":"src\/hotspot\/share\/memory\/memoryReserver.cpp","additions":12,"deletions":14,"binary":false,"changes":26,"status":"modified"}]}