{"files":[{"patch":"@@ -49,1 +49,5 @@\n-  _gc_state(_heap->gc_state()) {\n+  _saved_gc_state(_heap->gc_state()),\n+  _saved_gc_state_changed(_heap->_gc_state_changed) {\n+  \/\/ Clear state to deactivate barriers. Indicate that state has changed\n+  \/\/ so that verifier threads will use this value, rather than thread local\n+  \/\/ values (which we are _not_ changing here).\n@@ -51,0 +55,1 @@\n+  _heap->_gc_state_changed = true;\n@@ -54,2 +59,3 @@\n-  _heap->_gc_state.set(_gc_state);\n-  assert(_heap->gc_state() == _gc_state, \"Should be restored\");\n+  _heap->_gc_state.set(_saved_gc_state);\n+  _heap->_gc_state_changed = _saved_gc_state_changed;\n+  assert(_heap->gc_state() == _saved_gc_state, \"Should be restored\");\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahRootVerifier.cpp","additions":9,"deletions":3,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -35,1 +35,2 @@\n-  const char _gc_state;\n+  const char _saved_gc_state;\n+  const bool _saved_gc_state_changed;\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahRootVerifier.hpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"}]}