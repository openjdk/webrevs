{"files":[{"patch":"@@ -28,0 +28,1 @@\n+import java.net.InetAddress;\n@@ -37,1 +38,1 @@\n- * {@link #commit(long, long, String, String, int, boolean)} method\n+ * {@link #commit(long, long, String, String, int, String)} method\n@@ -148,1 +149,1 @@\n-    public static void offer(long start, String host, String address, int port, IOException thrown) {\n+    public static void offer(long start, String host, InetAddress address, int port, IOException thrown) {\n@@ -151,1 +152,1 @@\n-            commit(start, duration, host, address, port, exceptionToMessage(thrown));\n+            commit(start, duration, host, address.getHostAddress(), port, exceptionToMessage(thrown));\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/event\/SocketConnectEvent.java","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -576,2 +576,0 @@\n-        ReentrantLock connectLock = readLock;\n-        boolean connected = false;\n@@ -579,1 +577,2 @@\n-        IOException thrown = null;\n+        IOException connectEx = null;\n+        ReentrantLock connectLock = readLock;\n@@ -583,0 +582,1 @@\n+                boolean connected = false;\n@@ -614,1 +614,0 @@\n-            thrown = ioe;\n@@ -616,1 +615,1 @@\n-                throw ioe;\n+                connectEx = ioe;\n@@ -618,6 +617,1 @@\n-                thrown = SocketExceptions.of(ioe, isa);\n-                throw thrown;\n-            }\n-        } finally {\n-            if (SocketConnectEvent.enabled()) {\n-                    SocketConnectEvent.offer(start, isa.getHostString(), address.getHostAddress(), port, thrown);\n+                connectEx = SocketExceptions.of(ioe, isa);\n@@ -626,0 +620,6 @@\n+        if (SocketConnectEvent.enabled()) {\n+            SocketConnectEvent.offer(start, isa.getHostString(), address, port, connectEx);\n+        }\n+        if (connectEx != null) {\n+            throw connectEx;\n+        }\n","filename":"src\/java.base\/share\/classes\/sun\/nio\/ch\/NioSocketImpl.java","additions":11,"deletions":11,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -957,1 +957,1 @@\n-        IOException thrown = null;\n+        IOException connectEx = null;\n@@ -1001,2 +1001,2 @@\n-            thrown = SocketExceptions.of(ioe, sa);\n-            throw thrown;\n+            connectEx = SocketExceptions.of(ioe, sa);\n+            throw connectEx;\n@@ -1004,2 +1004,2 @@\n-            if (SocketConnectEvent.enabled() && (connected || thrown != null)) {\n-                SocketConnectEvent.offer(start, sa, thrown);\n+            if (SocketConnectEvent.enabled() && (connected || connectEx != null)) {\n+                SocketConnectEvent.offer(start, sa, connectEx);\n@@ -1061,1 +1061,1 @@\n-        IOException thrown = null;\n+        IOException connectEx = null;\n@@ -1101,2 +1101,2 @@\n-            thrown = SocketExceptions.of(ioe, remoteAddress);\n-            throw thrown;\n+            connectEx = SocketExceptions.of(ioe, remoteAddress);\n+            throw connectEx;\n@@ -1104,2 +1104,2 @@\n-            if (SocketConnectEvent.enabled() && (connected || thrown != null)) {\n-                SocketConnectEvent.offer(start, remoteAddress, thrown);\n+            if (SocketConnectEvent.enabled() && (connected || connectEx != null)) {\n+                SocketConnectEvent.offer(start, remoteAddress, connectEx);\n","filename":"src\/java.base\/share\/classes\/sun\/nio\/ch\/SocketChannelImpl.java","additions":10,"deletions":10,"binary":false,"changes":20,"status":"modified"}]}