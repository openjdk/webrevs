{"files":[{"patch":"@@ -512,1 +512,1 @@\n-\t$$(call ExecuteWithLog, $$($1_TEST_SUPPORT_DIR)\/gtest, \\\n+\t$$(call ExecuteWithLog, $$($1_TEST_SUPPORT_DIR)\/gtest, ( \\\n@@ -523,1 +523,1 @@\n-\t)\n+\t))\n@@ -647,1 +647,1 @@\n-\t$$(call ExecuteWithLog, $$($1_TEST_SUPPORT_DIR)\/micro, \\\n+\t$$(call ExecuteWithLog, $$($1_TEST_SUPPORT_DIR)\/micro, ( \\\n@@ -658,1 +658,1 @@\n-\t)\n+\t))\n@@ -761,1 +761,1 @@\n-\t  $$(call ExecuteWithLog, $$($1_AOT_JDK_OUTPUT_DIR), \\\n+\t  $$(call ExecuteWithLog, $$($1_AOT_JDK_OUTPUT_DIR), ( \\\n@@ -768,1 +768,1 @@\n-\t  )\n+\t  ))\n@@ -773,1 +773,1 @@\n-\t  $$(call ExecuteWithLog, $$($1_AOT_JDK_OUTPUT_DIR), \\\n+\t  $$(call ExecuteWithLog, $$($1_AOT_JDK_OUTPUT_DIR), ( \\\n@@ -780,1 +780,1 @@\n-\t  )\n+\t  ))\n@@ -783,1 +783,1 @@\n-\t  $$(call ExecuteWithLog, $$($1_AOT_JDK_OUTPUT_DIR), \\\n+\t  $$(call ExecuteWithLog, $$($1_AOT_JDK_OUTPUT_DIR), ( \\\n@@ -788,1 +788,1 @@\n-\t  )\n+\t  ))\n@@ -1088,1 +1088,1 @@\n-\t$$(call ExecuteWithLog, $$($1_TEST_SUPPORT_DIR)\/jtreg, \\\n+\t$$(call ExecuteWithLog, $$($1_TEST_SUPPORT_DIR)\/jtreg, ( \\\n@@ -1090,1 +1090,1 @@\n-\t)\n+\t))\n@@ -1207,1 +1207,1 @@\n-\t$$(call ExecuteWithLog, $$($1_TEST_SUPPORT_DIR)\/test-execution, \\\n+\t$$(call ExecuteWithLog, $$($1_TEST_SUPPORT_DIR)\/test-execution, ( \\\n@@ -1212,1 +1212,1 @@\n-\t)\n+\t))\n","filename":"make\/RunTests.gmk","additions":14,"deletions":14,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -114,1 +114,1 @@\n-      COMMAND := $(AR) $(ARFLAGS) -w $(lib) | $(GREP) -v '^\\.' | $(AWK) '{print $$1}' | $(SORT) -u > $(lib).exp, \\\n+      COMMAND := ( $(AR) $(ARFLAGS) -w $(lib) | $(GREP) -v '^\\.' | $(AWK) '{print $$1}' | $(SORT) -u > $(lib).exp ), \\\n","filename":"make\/StaticLibs.gmk","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -287,6 +287,0 @@\n-# Check if the command line contains redirection, that is <, > or >>,\n-# and if so, return a value that is interpreted as true in a make $(if)\n-# construct.\n-is_redirect = \\\n-    $(if $(filter < > >>, $1), true)\n-\n@@ -300,0 +294,5 @@\n+# NOTE: If the command redirects stdout, the caller needs to wrap it in a\n+# subshell (by adding parentheses around it), otherwise the redirect to the\n+# subshell tee process will create a race condition where the target file may\n+# not be fully written when the make recipe is done.\n+#\n@@ -303,3 +302,1 @@\n-  $(call LogCmdlines, Executing: \\\n-      [$(if $(call is_redirect, $2),$(LEFT_PAREN) )$(strip $2)$(if $(call \\\n-      is_redirect, $2), $(RIGHT_PAREN))]) \\\n+  $(call LogCmdlines, Executing: [$(strip $2)]) \\\n@@ -308,4 +305,1 @@\n-  ( $(RM) $(strip $1).log && \\\n-      $(if $(call is_redirect, $2),$(LEFT_PAREN) )$(strip $2)$(if $(call \\\n-      is_redirect, $2), $(RIGHT_PAREN)) \\\n-      > >($(TEE) -a $(strip $1).log) 2> >($(TEE) -a $(strip $1).log >&2) || \\\n+  ( $(RM) $(strip $1).log && $(strip $2) > >($(TEE) -a $(strip $1).log) 2> >($(TEE) -a $(strip $1).log >&2) || \\\n@@ -313,4 +307,2 @@\n-      $(CP) $(strip $1).log $(MAKESUPPORT_OUTPUTDIR)\/failure-logs\/$(subst \\\n-      \/,_,$(patsubst $(OUTPUTDIR)\/%,%,$(strip $1))).log && \\\n-      $(CP) $(strip $1).cmdline $(MAKESUPPORT_OUTPUTDIR)\/failure-logs\/$(subst \\\n-      \/,_,$(patsubst $(OUTPUTDIR)\/%,%,$(strip $1))).cmdline && \\\n+      $(CP) $(strip $1).log $(MAKESUPPORT_OUTPUTDIR)\/failure-logs\/$(subst \/,_,$(patsubst $(OUTPUTDIR)\/%,%,$(strip $1))).log && \\\n+      $(CP) $(strip $1).cmdline $(MAKESUPPORT_OUTPUTDIR)\/failure-logs\/$(subst \/,_,$(patsubst $(OUTPUTDIR)\/%,%,$(strip $1))).cmdline && \\\n","filename":"make\/common\/MakeBase.gmk","additions":9,"deletions":17,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -112,1 +112,1 @@\n-\t    $$($1_POST_PROCESS) $$($1_$2_PANDOC_OUTPUT) > $$($1_$2_OUTPUT_FILE) )\n+\t    ( $$($1_POST_PROCESS) $$($1_$2_PANDOC_OUTPUT) > $$($1_$2_OUTPUT_FILE) ) )\n","filename":"make\/common\/ProcessMarkdown.gmk","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -50,3 +50,2 @@\n-\t    $(CPP) $(DTRACE_CPP_FLAGS) $(SYSROOT_CFLAGS) $< > $(DTRACE_SUPPORT_DIR)\/$(@F).d)\n-\t$(call ExecuteWithLog, $@, \\\n-\t    $(DTRACE) $(DTRACE_FLAGS) -h -o $@ -s $(DTRACE_SUPPORT_DIR)\/$(@F).d)\n+\t    ($(CPP) $(DTRACE_CPP_FLAGS) $(SYSROOT_CFLAGS) $< > $(DTRACE_SUPPORT_DIR)\/$(@F).d))\n+\t$(call ExecuteWithLog, $@, $(DTRACE) $(DTRACE_FLAGS) -h -o $@ -s $(DTRACE_SUPPORT_DIR)\/$(@F).d)\n","filename":"make\/hotspot\/gensrc\/GensrcDtrace.gmk","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"}]}