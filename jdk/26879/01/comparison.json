{"files":[{"patch":"@@ -61,0 +61,2 @@\n+\n+    \/\/ In milliseconds\n@@ -62,1 +64,0 @@\n-    private long finishTime;\n@@ -64,0 +65,1 @@\n+\n@@ -182,1 +184,1 @@\n-        println(out, \"Execution time: \" + (currentTime - startTime) + \" seconds\");\n+        println(out, \"Execution time: \" + (currentTime - startTime)\/1000.0 + \" seconds\");\n@@ -189,2 +191,2 @@\n-        } else if (finishTime != 0 && currentTime >= finishTime) {\n-            println(out, \"Execution finished because time was exceeded: \" + (currentTime - startTime) + \" >= \" + (finishTime - startTime));\n+        } else if (options.getTime() != 0 && (currentTime - startTime) >= options.getTime() * 1000) {\n+            println(out, \"Execution finished because time was exceeded: \" + (currentTime - startTime) + \" >= \" + options.getTime() * 1000);\n@@ -212,6 +214,1 @@\n-        startTime = System.currentTimeMillis();\n-        if (stressTime == 0) {\n-            finishTime = 0;\n-        } else {\n-            finishTime = startTime + stressTime * 1000;\n-        }\n+        startTime = System.nanoTime()\/1000000;\n@@ -235,1 +232,1 @@\n-        currentTime = System.currentTimeMillis();\n+        currentTime = System.nanoTime()\/1000000;\n@@ -258,0 +255,2 @@\n+        boolean result = continueExecution();\n+        \/\/ Call print at the end to show the most up-to-date info.\n@@ -261,1 +260,1 @@\n-        return continueExecution();\n+        return result;\n@@ -270,1 +269,1 @@\n-        currentTime = System.currentTimeMillis();\n+        currentTime = System.nanoTime()\/1000000;\n@@ -277,1 +276,1 @@\n-                && (finishTime == 0 || currentTime < finishTime);\n+                && (options.getTime() == 0 || (currentTime - startTime) < options.getTime() * 1000);\n@@ -312,1 +311,1 @@\n-        return System.currentTimeMillis() - startTime;\n+        return System.nanoTime()\/1000000 - startTime;\n@@ -321,2 +320,3 @@\n-        long current = System.currentTimeMillis();\n-        if (current >= finishTime) {\n+        long elapsedTime = System.nanoTime()\/1000000 - startTime;\n+        long stressTime = options.getTime() * 1000;\n+        if (elapsedTime >= stressTime) {\n@@ -325,1 +325,1 @@\n-            return finishTime - current;\n+            return stressTime - elapsedTime;\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/share\/test\/Stresser.java","additions":18,"deletions":18,"binary":false,"changes":36,"status":"modified"}]}