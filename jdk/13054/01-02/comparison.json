{"files":[{"patch":"@@ -2855,0 +2855,3 @@\n+\n+\/\/ When notifications are disabled then just update the VTMS transition bit and return.\n+\/\/ Otherwise, the bit is updated in the given jvmtiVTMSTransitionDisabler function call.\n@@ -2862,5 +2865,1 @@\n-  const TypeFunc* tf = OptoRuntime::notify_jvmti_Type();\n-  Node* vt_oop = _gvn.transform(must_be_not_null(argument(0), true));\n-  Node* hide   = _gvn.transform(argument(1));\n-  Node* cond   = _gvn.transform(argument(2));\n-\n+  Node* hide = _gvn.transform(argument(1)); \/\/ hide argument: true for begin and false for end of VTMS transition\n@@ -2872,0 +2871,4 @@\n+    const TypeFunc* tf = OptoRuntime::notify_jvmti_Type();\n+    Node* vt_oop = _gvn.transform(must_be_not_null(argument(0), true)); \/\/ VirtualThread this argument\n+    Node* cond   = _gvn.transform(argument(2)); \/\/ firstMount or lastUnmount argument\n+\n@@ -2876,1 +2879,1 @@\n-    \/\/ set begin value to the VTMS transition bit in current JavaThread\n+    \/\/ set hide value to the VTMS transition bit in current JavaThread\n@@ -2882,1 +2885,1 @@\n-    access_store_at(nullptr, addr, addr_type, hide, _gvn.type(cond), T_BOOLEAN, IN_NATIVE | MO_UNORDERED);\n+    access_store_at(nullptr, addr, addr_type, hide, _gvn.type(hide), T_BOOLEAN, IN_NATIVE | MO_UNORDERED);\n@@ -2890,0 +2893,1 @@\n+\/\/ If notifications are enabled then just update the temporary VTMS transition bit.\n@@ -2903,1 +2907,1 @@\n-    Node* hide = _gvn.transform(argument(1));\n+    Node* hide = _gvn.transform(argument(1)); \/\/ hide argument for temporary VTMS transition notification\n@@ -2915,0 +2919,1 @@\n+\n","filename":"src\/hotspot\/share\/opto\/library_call.cpp","additions":13,"deletions":8,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -3920,0 +3920,2 @@\n+\/\/ If notifications are disabled then just update the VTMS transition bit and return.\n+\/\/ Otherwise, the bit is updated in the given jvmtiVTMSTransitionDisabler function call.\n@@ -3940,0 +3942,2 @@\n+\/\/ If notifications are disabled then just update the VTMS transition bit and return.\n+\/\/ Otherwise, the bit is updated in the given jvmtiVTMSTransitionDisabler function call below.\n@@ -3960,0 +3964,1 @@\n+\/\/ If notifications are enabled then just update the temporary VTMS transition bit.\n","filename":"src\/hotspot\/share\/prims\/jvm.cpp","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"}]}