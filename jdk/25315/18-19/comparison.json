{"files":[{"patch":"@@ -1230,0 +1230,2 @@\n+    \/\/ All sfpt inputs are implicitly included into debug info during the scalarisaction process below.\n+    \/\/ Keep non-debug inputs separately, so they stay non-debug.\n","filename":"src\/hotspot\/share\/opto\/escape.cpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -883,0 +883,2 @@\n+    \/\/ All sfpt inputs are implicitly included into debug info during the scalarisaction process below.\n+    \/\/ Keep non-debug inputs separately, so they stay non-debug.\n","filename":"src\/hotspot\/share\/opto\/macro.cpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -89,1 +89,4 @@\n-static bool is_redundant_rf_helper(Node* ctrl, Node* referent, PhaseIdealLoop* phase, PhaseGVN& gvn, bool rf_only) {\n+static bool is_redundant_rf_helper(ReachabilityFenceNode* rf, PhaseIdealLoop* phase, PhaseGVN& gvn, bool rf_only) {\n+  assert(phase != nullptr || rf_only, \"only RFs during GVN\");\n+\n+  Node* referent = rf->referent();\n@@ -111,1 +114,1 @@\n-      if (use != ctrl) {\n+      if (use != rf) {\n@@ -114,1 +117,1 @@\n-          if (phase->is_dominator(ctrl, use_ctrl)) {\n+          if (phase->is_dominator(rf, use_ctrl)) {\n@@ -118,2 +121,2 @@\n-          assert(rf_only, \"\");\n-          if (gvn.is_dominator(ctrl, use)) {\n+          assert(use->is_ReachabilityFence(), \"only RFs during GVN\");\n+          if (gvn.is_dominator(rf, use)) {\n@@ -134,1 +137,1 @@\n-  if (is_redundant_rf_helper(this, in(1), nullptr, *phase, true \/*rf_only*\/)) {\n+  if (is_redundant_rf_helper(this, nullptr, *phase, true \/*rf_only*\/)) {\n@@ -143,1 +146,1 @@\n-  if (phase.type(in(1)) == TypePtr::NULL_PTR) {\n+  if (phase.type(referent()) == TypePtr::NULL_PTR) {\n@@ -154,1 +157,1 @@\n-  ra->dump_register(rf->in(1), buf, sizeof(buf));\n+  ra->dump_register(rf->referent(), buf, sizeof(buf));\n@@ -224,1 +227,1 @@\n-  Node* referent = rf->in(1);\n+  Node* referent = rf->referent();\n@@ -236,2 +239,1 @@\n-  Node* referent = rf->in(1);\n-  return is_redundant_rf_helper(rf, referent, this, igvn(), rf_only);\n+  return is_redundant_rf_helper(rf, this, igvn(), rf_only);\n@@ -246,1 +248,0 @@\n-    Node* referent = rf->in(1);\n@@ -259,2 +260,2 @@\n-    Node* rf = phase->C->reachability_fence(i);\n-    Node* referent = rf->in(1);\n+    ReachabilityFenceNode* rf = phase->C->reachability_fence(i);\n+    Node* referent = rf->referent();\n@@ -262,1 +263,1 @@\n-    bool redundant = is_redundant_rf_helper(rf, referent, phase, phase->igvn(), rf_only);\n+    bool redundant = is_redundant_rf_helper(rf, phase, phase->igvn(), rf_only);\n@@ -303,1 +304,0 @@\n-    Node* referent = rf->in(1);\n@@ -331,1 +331,1 @@\n-    Node* rf = C->reachability_fence(i);\n+    ReachabilityFenceNode* rf = C->reachability_fence(i);\n@@ -335,1 +335,1 @@\n-      Node* referent = rf->in(1);\n+      Node* referent = rf->referent();\n@@ -400,2 +400,2 @@\n-static void enumerate_interfering_sfpts(Node* rf, PhaseIdealLoop* phase, Node_List& safepoints) {\n-  Node* referent = rf->in(1);\n+static void enumerate_interfering_sfpts(ReachabilityFenceNode* rf, PhaseIdealLoop* phase, Node_List& safepoints) {\n+  Node* referent = rf->referent();\n@@ -450,1 +450,1 @@\n-      const Type* referent_t = igvn().type(rf->in(1));\n+      const Type* referent_t = igvn().type(rf->referent());\n@@ -462,1 +462,1 @@\n-      Node* referent = rf->in(1);\n+      Node* referent = rf->referent();\n","filename":"src\/hotspot\/share\/opto\/reachability.cpp","additions":22,"deletions":22,"binary":false,"changes":44,"status":"modified"},{"patch":"@@ -73,0 +73,1 @@\n+  Node* referent() const { return in(1); }\n","filename":"src\/hotspot\/share\/opto\/reachability.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"}]}