{"files":[{"patch":"@@ -2613,23 +2613,0 @@\n-\n-void\n-VirtualThreadGetThreadStateClosure::do_thread(Thread *target) {\n-  assert(target->is_Java_thread(), \"just checking\");\n-  int vthread_state = java_lang_VirtualThread::state(_vthread_h());\n-  oop carrier_thread_oop = java_lang_VirtualThread::carrier_thread(_vthread_h());\n-  jint state;\n-\n-  if (vthread_state == java_lang_VirtualThread::RUNNING && carrier_thread_oop != nullptr) {\n-    state = (jint) java_lang_Thread::get_thread_status(carrier_thread_oop);\n-    JavaThread* java_thread = java_lang_Thread::thread(carrier_thread_oop);\n-    if (java_thread->is_suspended()) {\n-      state |= JVMTI_THREAD_STATE_SUSPENDED;\n-    }\n-  } else {\n-    state = (jint) java_lang_VirtualThread::map_state_to_thread_status(vthread_state);\n-  }\n-  if (java_lang_Thread::interrupted(_vthread_h())) {\n-    state |= JVMTI_THREAD_STATE_INTERRUPTED;\n-  }\n-  *_state_ptr = state;\n-  _result = JVMTI_ERROR_NONE;\n-}\n","filename":"src\/hotspot\/share\/prims\/jvmtiEnvBase.cpp","additions":0,"deletions":23,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -810,19 +810,0 @@\n-\/\/ HandshakeClosure to get virtual thread state at safepoint.\n-class VirtualThreadGetThreadStateClosure : public HandshakeClosure {\n-private:\n-  Handle _vthread_h;\n-  jint *_state_ptr;\n-  jvmtiError _result;\n-\n-public:\n-  VirtualThreadGetThreadStateClosure(Handle vthread_h, jint *state_ptr)\n-    : HandshakeClosure(\"VirtualThreadGetThreadState\"),\n-      _vthread_h(vthread_h),\n-      _state_ptr(state_ptr),\n-      _result(JVMTI_ERROR_NONE) {}\n-\n-  void do_thread(Thread *target);\n-  jvmtiError result() { return _result; }\n-};\n-\n-\n","filename":"src\/hotspot\/share\/prims\/jvmtiEnvBase.hpp","additions":0,"deletions":19,"binary":false,"changes":19,"status":"modified"}]}