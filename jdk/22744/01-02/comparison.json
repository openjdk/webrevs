{"files":[{"patch":"@@ -3087,3 +3087,0 @@\n-        <error id=\"JVMTI_ERROR_DUPLICATE\">\n-          There is already frame pop event request at the specified depth.\n-        <\/error>\n","filename":"src\/hotspot\/share\/prims\/jvmti.xml","additions":0,"deletions":3,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -1362,5 +1362,1 @@\n-  JvmtiEnvThreadState* ets = state->env_thread_state(this);\n-  if (ets->is_frame_pop(frame_number)) {\n-    return JVMTI_ERROR_DUPLICATE;\n-  }\n-  ets->set_frame_pop(frame_number);\n+  state->env_thread_state((JvmtiEnvBase*)this)->set_frame_pop(frame_number);\n","filename":"src\/hotspot\/share\/prims\/jvmtiEnvBase.cpp","additions":1,"deletions":5,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -251,4 +251,1 @@\n-#ifdef ASSERT\n-  Thread *current = Thread::current();\n-#endif\n-  assert(get_thread() == nullptr || get_thread()->is_handshake_safe_for(current),\n+  assert(get_thread() == nullptr || get_thread()->is_handshake_safe_for(Thread::current()),\n","filename":"src\/hotspot\/share\/prims\/jvmtiEnvThreadState.cpp","additions":1,"deletions":4,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -503,0 +503,3 @@\n+  err = jvmti->NotifyFramePop(thread, 0);\n+  check_jvmti_status(jni, err, \"VirtualThreadUnmount: error in JVMTI NotifyFramePop\");\n+\n","filename":"test\/hotspot\/jtreg\/serviceability\/jvmti\/vthread\/MethodExitTest\/libMethodExitTest.cpp","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"}]}