{"files":[{"patch":"@@ -735,10 +735,0 @@\n-  {\n-    \/\/ Delete metaspaces for unloaded class loaders and clean up loader_data graph\n-    GCTraceTime(Debug, gc, phases) t(\"Purge Class Loader Data\", gc_timer());\n-    ClassLoaderDataGraph::purge(true \/* at_safepoint *\/);\n-    DEBUG_ONLY(MetaspaceUtils::verify();)\n-  }\n-\n-  \/\/ Need to clear claim bits for the next mark.\n-  ClassLoaderDataGraph::clear_claimed_marks();\n-\n@@ -1047,4 +1037,0 @@\n-    ClassUnloadingContext ctx(1 \/* num_nmethod_unlink_workers *\/,\n-                              false \/* unregister_nmethods_during_purge *\/,\n-                              false \/* lock_nmethod_free_separately *\/);\n-\n@@ -1340,1 +1326,3 @@\n-    ClassUnloadingContext* ctx = ClassUnloadingContext::context();\n+    ClassUnloadingContext ctx(1 \/* num_nmethod_unlink_workers *\/,\n+                              false \/* unregister_nmethods_during_purge *\/,\n+                              false \/* lock_nmethod_free_separately *\/);\n@@ -1356,1 +1344,1 @@\n-      ctx->purge_nmethods();\n+      ctx.purge_nmethods();\n@@ -1364,1 +1352,1 @@\n-      ctx->free_nmethods();\n+      ctx.free_nmethods();\n@@ -1372,0 +1360,9 @@\n+    {\n+      \/\/ Delete metaspaces for unloaded class loaders and clean up loader_data graph\n+      GCTraceTime(Debug, gc, phases) t(\"Purge Class Loader Data\", gc_timer());\n+      ClassLoaderDataGraph::purge(true \/* at_safepoint *\/);\n+      DEBUG_ONLY(MetaspaceUtils::verify();)\n+    }\n+\n+    \/\/ Need to clear claim bits for the next mark.\n+    ClassLoaderDataGraph::clear_claimed_marks();\n","filename":"src\/hotspot\/share\/gc\/parallel\/psParallelCompact.cpp","additions":14,"deletions":17,"binary":false,"changes":31,"status":"modified"}]}