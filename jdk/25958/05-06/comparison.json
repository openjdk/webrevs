{"files":[{"patch":"@@ -1442,1 +1442,10 @@\n-  Handle thread_h(THREAD, JNIHandles::resolve(jthread));\n+\n+  JavaThread* java_thread = nullptr;\n+  oop thread_oop;\n+  bool has_javathread = tlh.cv_internal_thread_to_JavaThread(jthread, &java_thread, &thread_oop);\n+  Handle thread_h(THREAD, thread_oop);\n+  bool is_virtual = java_lang_VirtualThread::is_instance(thread_h());\n+\n+  if (!has_javathread && !is_virtual) {\n+    return nullptr; \/\/ thread terminated\n+  }\n@@ -1463,2 +1472,0 @@\n-  JavaThread* java_thread = nullptr;\n-  bool is_virtual = java_lang_VirtualThread::is_instance(thread_h());\n@@ -1476,3 +1483,0 @@\n-    if (java_thread == nullptr) {\n-        return nullptr; \/\/ thread terminated\n-    }\n","filename":"src\/hotspot\/share\/services\/threadService.cpp","additions":10,"deletions":6,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -29,2 +29,1 @@\n- * @requires vm.compMode != \"Xcomp\"\n- * @requires !vm.debug | (os.family == \"linux\")\n+ * @requires !vm.debug & (vm.compMode != \"Xcomp\")\n@@ -32,1 +31,0 @@\n- * @requires vm.jvmti\n","filename":"test\/jdk\/com\/sun\/management\/HotSpotDiagnosticMXBean\/DumpThreadsWithEliminatedLock.java","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"}]}