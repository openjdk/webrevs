{"files":[{"patch":"@@ -2969,1 +2969,1 @@\n-  return nullptr;\n+  THROW_NULL(vmSymbols::java_lang_UnsupportedOperationException());\n","filename":"src\/hotspot\/share\/prims\/jvm.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1476,0 +1476,3 @@\n+    if (java_thread == nullptr) {\n+        return nullptr; \/\/ thread terminated\n+    }\n","filename":"src\/hotspot\/share\/services\/threadService.cpp","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -180,1 +180,1 @@\n-    private static void dumpThread(Thread thread, TextWriter writer) {\n+    private static boolean dumpThread(Thread thread, TextWriter writer) {\n@@ -182,0 +182,3 @@\n+        if (snapshot == null) {\n+            return false; \/\/ thread terminated\n+        }\n@@ -220,0 +223,1 @@\n+        return true;\n@@ -287,2 +291,3 @@\n-            dumpThread(thread, jsonWriter);\n-            threadCount++;\n+            if (dumpThread(thread, jsonWriter)) {\n+                threadCount++;\n+            }\n@@ -308,1 +313,1 @@\n-    private static void dumpThread(Thread thread, JsonWriter jsonWriter) {\n+    private static boolean dumpThread(Thread thread, JsonWriter jsonWriter) {\n@@ -311,0 +316,3 @@\n+        if (snapshot == null) {\n+            return false; \/\/ thread terminated\n+        }\n@@ -372,0 +380,1 @@\n+        return true;\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/vm\/ThreadDumper.java","additions":13,"deletions":4,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -55,0 +55,2 @@\n+     * Return null if a ThreadSnapshot cannot be created, for example if the\n+     * thread has terminated.\n@@ -60,1 +62,1 @@\n-            throw new UnsupportedOperationException();\n+            return null; \/\/ thread terminated\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/vm\/ThreadSnapshot.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -29,1 +29,2 @@\n- * @requires !vm.debug & (vm.compMode != \"Xcomp\")\n+ * @requires vm.compMode != \"Xcomp\"\n+ * @requires !vm.debug | (os.family == \"linux\")\n@@ -31,0 +32,1 @@\n+ * @requires vm.jvmti\n@@ -171,1 +173,2 @@\n-}\n\\ No newline at end of file\n+}\n+\n","filename":"test\/jdk\/com\/sun\/management\/HotSpotDiagnosticMXBean\/DumpThreadsWithEliminatedLock.java","additions":5,"deletions":2,"binary":false,"changes":7,"status":"modified"}]}