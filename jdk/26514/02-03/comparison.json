{"files":[{"patch":"@@ -329,0 +329,18 @@\n+    FileMapInfo *static_mapinfo = FileMapInfo::current_info();\n+    FileMapInfo *dynamic_mapinfo = FileMapInfo::dynamic_info();\n+\n+    if (AOTMapLogger::is_logging_at_bootstrap()) {\n+      \/\/ The map logging needs to be done here, as it requires some stubs on Windows,\n+      \/\/ which are not generated until the end of init_globals().\n+      AOTMapLogger::runtime_log(static_mapinfo, dynamic_mapinfo);\n+    }\n+\n+    \/\/ Close any open file descriptors. However, mmap'ed pages will remain in memory.\n+    static_mapinfo->close();\n+    static_mapinfo->unmap_region(MetaspaceShared::bm);\n+\n+    if (dynamic_mapinfo != nullptr) {\n+      dynamic_mapinfo->close();\n+      dynamic_mapinfo->unmap_region(MetaspaceShared::bm);\n+    }\n+\n@@ -1981,12 +1999,0 @@\n-  if (AOTMapLogger::is_logging_at_bootstrap()) {\n-    AOTMapLogger::runtime_log(static_mapinfo, dynamic_mapinfo);\n-  }\n-\n-  static_mapinfo->close();\n-  static_mapinfo->unmap_region(MetaspaceShared::bm);\n-\n-  if (dynamic_mapinfo != nullptr) {\n-    dynamic_mapinfo->close();\n-    dynamic_mapinfo->unmap_region(MetaspaceShared::bm);\n-  }\n-\n","filename":"src\/hotspot\/share\/cds\/metaspaceShared.cpp","additions":18,"deletions":12,"binary":false,"changes":30,"status":"modified"}]}