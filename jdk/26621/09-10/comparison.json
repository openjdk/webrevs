{"files":[{"patch":"@@ -27,1 +27,0 @@\n-#include \"classfile\/classLoaderDataGraph.hpp\"\n@@ -614,12 +613,0 @@\n-\n-  \/\/ Print GC\/heap related information.\n-  Log(gc, exit) log;\n-  if (log.is_info()) {\n-    LogStream ls_info(log.info());\n-    Universe::print_on(&ls_info);\n-    if (log.is_trace()) {\n-      LogStream ls_trace(log.trace());\n-      MutexLocker mcld(ClassLoaderDataGraph_lock);\n-      ClassLoaderDataGraph::print_on(&ls_trace);\n-    }\n-  }\n","filename":"src\/hotspot\/share\/gc\/shared\/collectedHeap.cpp","additions":0,"deletions":13,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -1319,4 +1319,5 @@\n-  CPUTimeUsage::GCStatistics gc_stats = CPUTimeUsage::GC::statisics();\n-  const double gc_cpu_time = (double) gc_stats.total \/ NANOSECS_PER_SEC;\n-  const double gc_threads_cpu_time = (double) gc_stats.gc_threads \/ NANOSECS_PER_SEC;\n-  const double gc_vm_thread_cpu_time = (double) gc_stats.vm_thread \/ NANOSECS_PER_SEC;\n+\n+  const double gc_threads_cpu_time = (double) CPUTimeUsage::GC::gc_threads() \/ NANOSECS_PER_SEC;\n+  const double gc_vm_thread_cpu_time = (double) CPUTimeUsage::GC::vm_thread() \/ NANOSECS_PER_SEC;\n+  const double gc_string_dedup_cpu_time = (double) CPUTimeUsage::GC::stringdedup() \/ NANOSECS_PER_SEC;\n+  const double gc_cpu_time = (double) gc_threads_cpu_time + gc_vm_thread_cpu_time + gc_string_dedup_cpu_time;\n@@ -1342,2 +1343,1 @@\n-      double string_dedup_cpu_time = (double) gc_stats.stringdedup \/ NANOSECS_PER_SEC;\n-      cpuLog.print(\"       String Deduplication       %30.4f  %6.2f  %8.1f\", string_dedup_cpu_time, percent_of(string_dedup_cpu_time, process_cpu_time), string_dedup_cpu_time \/ elasped_time);\n+      cpuLog.print(\"       String Deduplication       %30.4f  %6.2f  %8.1f\", gc_string_dedup_cpu_time, percent_of(gc_string_dedup_cpu_time, process_cpu_time), gc_string_dedup_cpu_time \/ elasped_time);\n@@ -1352,0 +1352,12 @@\n+\n+  \/\/ Print GC\/heap related information.\n+  Log(gc, exit) log;\n+  if (log.is_info()) {\n+    LogStream ls_info(log.info());\n+    Universe::print_on(&ls_info);\n+    if (log.is_trace()) {\n+      LogStream ls_trace(log.trace());\n+      MutexLocker mcld(ClassLoaderDataGraph_lock);\n+      ClassLoaderDataGraph::print_on(&ls_trace);\n+    }\n+  }\n","filename":"src\/hotspot\/share\/memory\/universe.cpp","additions":18,"deletions":6,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -37,0 +37,9 @@\n+static inline jlong thread_cpu_time_or_zero(Thread* thread) {\n+  jlong cpu_time = os::thread_cpu_time(thread);\n+  if (cpu_time == -1) {\n+    CPUTimeUsage::Error::mark_error();\n+    return 0;\n+  }\n+  return cpu_time;\n+}\n+\n@@ -43,6 +52,1 @@\n-    jlong cpu_time = os::thread_cpu_time(thread);\n-    if (cpu_time != -1) {\n-      _cpu_time += cpu_time;\n-    } else {\n-      CPUTimeUsage::Error::mark_error();\n-    }\n+    _cpu_time += thread_cpu_time_or_zero(thread);\n@@ -63,12 +67,0 @@\n-CPUTimeUsage::GCStatistics CPUTimeUsage::GC::statisics() {\n-  jlong gc_threads_sample = gc_threads();\n-  jlong vm_thread_sample = vm_thread();\n-  jlong stringdedup_sample = stringdedup();\n-  return {\n-    gc_threads_sample + vm_thread_sample + stringdedup_sample,\n-    gc_threads_sample,\n-    vm_thread_sample,\n-    stringdedup_sample\n-  };\n-}\n-\n@@ -81,5 +73,1 @@\n-    jlong cpu_time = os::thread_cpu_time((Thread*)StringDedup::_processor->_thread);\n-    if (cpu_time == -1) {\n-      CPUTimeUsage::Error::mark_error();\n-    }\n-    return cpu_time;\n+    return thread_cpu_time_or_zero((Thread*)StringDedup::_processor->_thread);\n","filename":"src\/hotspot\/share\/services\/cpuTimeUsage.cpp","additions":11,"deletions":23,"binary":false,"changes":34,"status":"modified"},{"patch":"@@ -31,1 +31,0 @@\n-\n@@ -33,7 +32,0 @@\n-  struct GCStatistics {\n-    jlong total;\n-    jlong gc_threads;\n-    jlong vm_thread;\n-    jlong stringdedup;\n-  };\n-\n@@ -42,2 +34,0 @@\n-    static GCStatistics statisics();\n-\n","filename":"src\/hotspot\/share\/services\/cpuTimeUsage.hpp","additions":0,"deletions":10,"binary":false,"changes":10,"status":"modified"}]}