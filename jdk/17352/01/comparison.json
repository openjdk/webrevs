{"files":[{"patch":"@@ -28,0 +28,1 @@\n+import java.security.SecureRandom;\n@@ -38,1 +39,3 @@\n-\n+        SecureRandom random = new SecureRandom();\n+        String alias = Integer.toString(random.nextInt(1000, 9999));\n+        String newAlias = alias + \"1\";\n@@ -43,1 +46,1 @@\n-            ks.setCertificateEntry(\"246810\", CertUtils.getCertFromFile(\"246810.cer\"));\n+            ks.setCertificateEntry(alias, CertUtils.getCertFromFile(\"246810.cer\"));\n@@ -45,2 +48,2 @@\n-            if (ks.containsAlias(\"13579\")) {\n-                ks.deleteEntry(\"13579\");\n+            if (ks.containsAlias(newAlias)) {\n+                ks.deleteEntry(newAlias);\n@@ -55,2 +58,2 @@\n-                    \"-alias\", \"246810\",\n-                    \"-destalias\", \"13579\").shouldHaveExitValue(0);\n+                    \"-alias\", alias,\n+                    \"-destalias\", newAlias).shouldHaveExitValue(0);\n@@ -66,1 +69,1 @@\n-            if (!ks.containsAlias(\"13579\")) {\n+            if (!ks.containsAlias(newAlias)) {\n@@ -71,2 +74,12 @@\n-            ks.deleteEntry(\"13579\");\n-            ks.deleteEntry(\"246810\");\n+            try {\n+                ks.deleteEntry(newAlias);\n+            } catch (Exception e) {\n+                System.err.println(\"Couldn't delete alias \" + newAlias);\n+                e.printStackTrace(System.err);\n+            }\n+            try {\n+                ks.deleteEntry(alias);\n+            } catch (Exception e) {\n+                System.err.println(\"Couldn't delete alias \" + alias);\n+                e.printStackTrace(System.err);\n+            }\n","filename":"test\/jdk\/sun\/security\/mscapi\/KeytoolChangeAlias.java","additions":22,"deletions":9,"binary":false,"changes":31,"status":"modified"}]}