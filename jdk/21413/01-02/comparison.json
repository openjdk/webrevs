{"files":[{"patch":"@@ -188,1 +188,1 @@\n-    @Test(timeOut=60000)\n+    @Test\n@@ -190,2 +190,2 @@\n-        Instant expected, test;\n-        long diff;\n+        long beforeMillis, instantMillis, afterMillis, diff;\n+        int retryRemaining = 5; \/\/ MAX_RETRY_COUNT\n@@ -193,4 +193,12 @@\n-            expected = Instant.now(Clock.systemUTC());\n-            test = Instant.now();\n-            diff = Math.abs(test.toEpochMilli() - expected.toEpochMilli());\n-        } while( diff > 100 ); \/\/ retry if more than 0.1 sec\n+            beforeMillis = Instant.now(Clock.systemUTC()).toEpochMilli();\n+            instantMillis = Instant.now().toEpochMilli();\n+            afterMillis = Instant.now(Clock.systemUTC()).toEpochMilli();\n+            diff = instantMillis - beforeMillis;\n+            if (instantMillis < beforeMillis || instantMillis > afterMillis) {\n+                throw new RuntimeException(\": Invalid instant: (~\" + instantMillis + \"ms)\"\n+                        + \" when systemUTC in millis is in [\"\n+                        + beforeMillis + \", \"\n+                        + afterMillis + \"]\");\n+            }\n+        } while (diff > 100 && --retryRemaining > 0);  \/\/ retry if diff more than 0.1 sec\n+        assertTrue(retryRemaining > 0);\n","filename":"test\/jdk\/java\/time\/tck\/java\/time\/TCKInstant.java","additions":15,"deletions":7,"binary":false,"changes":22,"status":"modified"}]}