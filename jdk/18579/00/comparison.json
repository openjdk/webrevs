{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -86,0 +86,2 @@\n+  uintptr_t index(zoffset from_offset);\n+\n@@ -143,2 +145,0 @@\n-  zaddress find(zaddress_unsafe addr);\n-\n@@ -146,0 +146,5 @@\n+  zaddress find(zoffset from_offset, ZForwardingCursor* cursor);\n+  zaddress find(zaddress from_addr, ZForwardingCursor* cursor);\n+  zaddress find(zaddress_unsafe from_addr, ZForwardingCursor* cursor);\n+  zaddress find(zaddress_unsafe from_addr);\n+\n@@ -147,0 +152,2 @@\n+  zaddress insert(zoffset from_offset, zaddress to_addr, ZForwardingCursor* cursor);\n+  zaddress insert(zaddress from_addr, zaddress to_addr, ZForwardingCursor* cursor);\n","filename":"src\/hotspot\/share\/gc\/z\/zForwarding.hpp","additions":10,"deletions":3,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -221,5 +221,2 @@\n-inline zaddress ZForwarding::find(zaddress_unsafe addr) {\n-  const uintptr_t from_index = (ZAddress::offset(addr) - start()) >> object_alignment_shift();\n-  ZForwardingCursor cursor;\n-  const ZForwardingEntry entry = find(from_index, &cursor);\n-  return entry.populated() ? ZOffset::address(to_zoffset(entry.to_offset())) : zaddress::null;\n+inline uintptr_t ZForwarding::index(zoffset from_offset) {\n+  return (from_offset - start()) >> object_alignment_shift();\n@@ -246,0 +243,19 @@\n+inline zaddress ZForwarding::find(zoffset from_offset, ZForwardingCursor* cursor) {\n+  const uintptr_t from_index = index(from_offset);\n+  const ZForwardingEntry entry = find(from_index, cursor);\n+  return entry.populated() ? ZOffset::address(to_zoffset(entry.to_offset())) : zaddress::null;\n+}\n+\n+inline zaddress ZForwarding::find(zaddress from_addr, ZForwardingCursor* cursor) {\n+  return find(ZAddress::offset(from_addr), cursor);\n+}\n+\n+inline zaddress ZForwarding::find(zaddress_unsafe from_addr, ZForwardingCursor* cursor) {\n+  return find(ZAddress::offset(from_addr), cursor);\n+}\n+\n+inline zaddress ZForwarding::find(zaddress_unsafe from_addr) {\n+  ZForwardingCursor cursor;\n+  return find(from_addr, &cursor);\n+}\n+\n@@ -274,0 +290,11 @@\n+inline zaddress ZForwarding::insert(zoffset from_offset, zaddress to_addr, ZForwardingCursor* cursor) {\n+  const uintptr_t from_index = index(from_offset);\n+  const zoffset to_offset = ZAddress::offset(to_addr);\n+  const zoffset to_offset_final = insert(from_index, to_offset, cursor);\n+  return ZOffset::address(to_offset_final);\n+}\n+\n+inline zaddress ZForwarding::insert(zaddress from_addr, zaddress to_addr, ZForwardingCursor* cursor) {\n+  return insert(ZAddress::offset(from_addr), to_addr, cursor);\n+}\n+\n","filename":"src\/hotspot\/share\/gc\/z\/zForwarding.inline.hpp","additions":33,"deletions":6,"binary":false,"changes":39,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -55,29 +55,0 @@\n-static uintptr_t forwarding_index(ZForwarding* forwarding, zoffset from_offset) {\n-  return (from_offset - forwarding->start()) >> forwarding->object_alignment_shift();\n-}\n-\n-static zaddress forwarding_find(ZForwarding* forwarding, zoffset from_offset, ZForwardingCursor* cursor) {\n-  const uintptr_t from_index = forwarding_index(forwarding, from_offset);\n-  const ZForwardingEntry entry = forwarding->find(from_index, cursor);\n-  return entry.populated() ? ZOffset::address(to_zoffset(entry.to_offset())) : zaddress::null;\n-}\n-\n-static zaddress forwarding_find(ZForwarding* forwarding, zaddress_unsafe from_addr, ZForwardingCursor* cursor) {\n-  return forwarding_find(forwarding, ZAddress::offset(from_addr), cursor);\n-}\n-\n-static zaddress forwarding_find(ZForwarding* forwarding, zaddress from_addr, ZForwardingCursor* cursor) {\n-  return forwarding_find(forwarding, ZAddress::offset(from_addr), cursor);\n-}\n-\n-static zaddress forwarding_insert(ZForwarding* forwarding, zoffset from_offset, zaddress to_addr, ZForwardingCursor* cursor) {\n-  const uintptr_t from_index = forwarding_index(forwarding, from_offset);\n-  const zoffset to_offset = ZAddress::offset(to_addr);\n-  const zoffset to_offset_final = forwarding->insert(from_index, to_offset, cursor);\n-  return ZOffset::address(to_offset_final);\n-}\n-\n-static zaddress forwarding_insert(ZForwarding* forwarding, zaddress from_addr, zaddress to_addr, ZForwardingCursor* cursor) {\n-  return forwarding_insert(forwarding, ZAddress::offset(from_addr), to_addr, cursor);\n-}\n-\n@@ -371,1 +342,1 @@\n-  const zaddress to_addr_final = forwarding_insert(forwarding, from_addr, to_addr, cursor);\n+  const zaddress to_addr_final = forwarding->insert(from_addr, to_addr, cursor);\n@@ -385,1 +356,1 @@\n-  zaddress to_addr = forwarding_find(forwarding, from_addr, &cursor);\n+  zaddress to_addr = forwarding->find(from_addr, &cursor);\n@@ -413,1 +384,1 @@\n-  const zaddress to_addr = forwarding_find(forwarding, from_addr, &cursor);\n+  const zaddress to_addr = forwarding->find(from_addr, &cursor);\n@@ -629,1 +600,1 @@\n-      const zaddress to_addr = forwarding_find(_forwarding, from_addr, &cursor);\n+      const zaddress to_addr = _forwarding->find(from_addr, &cursor);\n@@ -653,1 +624,1 @@\n-    const zaddress to_addr = forwarding_insert(_forwarding, from_addr, allocated_addr, &cursor);\n+    const zaddress to_addr = _forwarding->insert(from_addr, allocated_addr, &cursor);\n","filename":"src\/hotspot\/share\/gc\/z\/zRelocate.cpp","additions":6,"deletions":35,"binary":false,"changes":41,"status":"modified"}]}