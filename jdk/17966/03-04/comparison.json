{"files":[{"patch":"@@ -172,4 +172,5 @@\n-  \/\/ isSwapEnabled - maybe compute once and save?\n-  GET_CONTAINER_INFO(julong, _memory->controller(), \"\/memory.memsw.limit_in_bytes\", \"Memory and Swap Limit is: \", JULONG_FORMAT, JULONG_FORMAT, memsw_bytes);\n-  GET_CONTAINER_INFO(julong, _memory->controller(), \"\/memory.swappiness\", \"Swappiness is: \", JULONG_FORMAT, JULONG_FORMAT, swappiness);\n-  if (memsw_bytes > 0 && swappiness > 0) {\n+  jlong memory_sw_limit = memory_and_swap_limit_in_bytes();\n+  jlong memory_limit = CgroupSubsystem::memory_limit_in_bytes();\n+  if (memory_sw_limit > 0 && memory_limit > 0) {\n+    jlong delta_swap = memory_sw_limit - memory_limit;\n+    if (delta_swap > 0) {\n@@ -177,2 +178,6 @@\n-                     \"mem swap usage is: \", JULONG_FORMAT, JULONG_FORMAT, memory_swap_usage);\n-      return memory_swap_usage;\n+                         \"mem swap usage is: \", JULONG_FORMAT, JULONG_FORMAT, memory_swap_usage);\n+      return (jlong)memory_swap_usage;\n+    } else {\n+      \/\/ no swap\n+      return 0;\n+    }\n@@ -180,1 +185,0 @@\n-  \/\/ fallback like we use in mbean code\n","filename":"src\/hotspot\/os\/linux\/cgroupV1Subsystem_linux.cpp","additions":11,"deletions":7,"binary":false,"changes":18,"status":"modified"}]}