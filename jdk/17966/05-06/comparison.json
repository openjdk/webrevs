{"files":[{"patch":"@@ -305,0 +305,9 @@\n+static jlong host_free_swap() {\n+  struct sysinfo si;\n+  int ret = sysinfo(&si);\n+  if (ret != 0) {\n+    return -1;\n+  }\n+  return (jlong)(si.freeswap * si.mem_unit);\n+}\n+\n@@ -306,0 +315,1 @@\n+  jlong host_free_swap_val = host_free_swap();\n@@ -307,2 +317,0 @@\n-    \/\/ see src\/jdk.management\/unix\/classes\/com\/sun\/management\/internal\/OperatingSystemImpl.java\n-    \/\/ long getFreeSwapSpaceSize()\n@@ -326,8 +334,4 @@\n-    return -1;\n-  } else {\n-    struct sysinfo si;\n-    int ret = sysinfo(&si);\n-    if (ret != 0) {\n-      return -1;\n-    }\n-    return (jlong)(si.freeswap * si.mem_unit);\n+    \/\/ unlimited or not supported. Fall through to return host value\n+    log_trace(os,container)(\"os::free_swap_space: container_swap_limit=\" JLONG_FORMAT\n+                            \" container_mem_limit=\" JLONG_FORMAT \" returning host value: \" JLONG_FORMAT,\n+                            mem_swap_limit, mem_limit, host_free_swap_val);\n@@ -335,0 +339,1 @@\n+  return host_free_swap_val;\n","filename":"src\/hotspot\/os\/linux\/os_linux.cpp","additions":15,"deletions":10,"binary":false,"changes":25,"status":"modified"}]}