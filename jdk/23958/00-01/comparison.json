{"files":[{"patch":"@@ -66,1 +66,1 @@\n-    return 12;\n+    return 11;\n","filename":"src\/hotspot\/share\/jfr\/dcmd\/jfrDcmds.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -79,1 +79,1 @@\n-            ArgumentParser parser = new ArgumentParser(getArgumentInfos(), arg, delimiter);\n+            ArgumentParser parser = new ArgumentParser(getParseArguments(source), arg, delimiter);\n@@ -101,0 +101,4 @@\n+    protected Argument[] getParseArguments(String source) {\n+        return getArgumentInfos();\n+    }\n+\n","filename":"src\/jdk.jfr\/share\/classes\/jdk\/jfr\/internal\/dcmd\/AbstractDCmd.java","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -34,0 +34,1 @@\n+import java.util.Arrays;\n@@ -56,1 +57,0 @@\n-\n@@ -88,0 +88,1 @@\n+        List<String> reports = parser.getOption(\"report-on-exit\");\n@@ -206,1 +207,0 @@\n-        List<String> reports = parser.getOption(\"report-on-exit\");\n@@ -245,0 +245,14 @@\n+    \n+    \/\/ Add report-on-exit for -XX:StartFlightRecording\n+    @Override\n+    protected Argument[] getParseArguments(String source) {\n+        Argument[] argumentInfo = getArgumentInfos();;\n+        if (!\"internal\".equals(source)) {\n+            return argumentInfo;\n+        }\n+        Argument[] newArray = Arrays.copyOf(argumentInfo, argumentInfo.length + 1);\n+        newArray[argumentInfo.length] = new Argument(\"report-on-exit\",\n+                \"Display views on exit. See 'jfr help view' for available views to report.\",\n+                \"STRING SET\", false, true, null, true);\n+        return newArray;\n+    }\n@@ -350,0 +364,1 @@\n+            \"$REPORT_ON_EXIT\", reportOnExit(),\n@@ -364,0 +379,1 @@\n+           \"$REPORT_ON_EXIT\", \"\",\n@@ -432,6 +448,1 @@\n-\n-                 report-on-exit   Specifies the name of the view to display when the Java Virtual\n-                                  Machine (JVM) shuts down. This option is not available if disk\n-                                  the disk option is set to false. For a list of available views,\n-                                  see 'jfr help view'. By default, no report is generated.\n-\n+                 $REPORT_ON_EXIT\n@@ -489,0 +500,11 @@\n+    private static String reportOnExit() {\n+        return\n+        \"\"\"\n+\n+          report-on-exit   Specifies the name of the view to display when the Java Virtual\n+                           Machine (JVM) shuts down. This option is not available if disk\n+                           the disk option is set to false. For a list of available views,\n+                           see 'jfr help view'. By default, no report is generated.\n+        \"\"\";\n+    }\n+\n@@ -545,5 +567,1 @@\n-                \"BOOLEAN\", false, true, \"false\", false),\n-            new Argument(\"report-on-exit\",\n-                \"Display views on exit. See 'jfr help view' for available views to report.\",\n-                \"STRING SET\", false, true, null, true)\n-\n+                \"BOOLEAN\", false, true, \"false\", false)\n","filename":"src\/jdk.jfr\/share\/classes\/jdk\/jfr\/internal\/dcmd\/DCmdStart.java","additions":31,"deletions":13,"binary":false,"changes":44,"status":"modified"}]}