{"files":[{"patch":"@@ -1198,1 +1198,1 @@\n-            IncorporationBinaryOpKey newOp = new IncorporationBinaryOpKey(opKind, new TypeOperands(ic.asTVar(op1), ic.asTVar(op2), types));\n+            IncorporationBinaryOpKey newOp = new IncorporationBinaryOpKey(opKind, ic.asTypeVar(op1), ic.asTypeVar(op2), types);\n@@ -1235,3 +1235,1 @@\n-    record IncorporationBinaryOpKey(IncorporationBinaryOpKind opKind, TypeOperands typeOperands) {}\n-\n-    record TypeOperands(Type op1, Type op2, Types types) {\n+    record IncorporationBinaryOpKey(IncorporationBinaryOpKind opKind, Type op1, Type op2, Types types) {\n@@ -1240,3 +1238,4 @@\n-            return (o instanceof TypeOperands typeOperands)\n-                    && types.isSameType(op1, typeOperands.op1)\n-                    && types.isSameType(op2, typeOperands.op2);\n+            return (o instanceof IncorporationBinaryOpKey anotherKey)\n+                    && opKind == anotherKey.opKind\n+                    && types.isSameType(op1, anotherKey.op1)\n+                    && types.isSameType(op2, anotherKey.op2);\n@@ -1246,1 +1245,3 @@\n-            int result = types.hashCode(op1);\n+            int result = opKind.hashCode();\n+            result *= 127;\n+            result += types.hashCode(op1);\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/comp\/Infer.java","additions":9,"deletions":8,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -220,2 +220,2 @@\n-    public final Type asTVar(Type t) {\n-        return types.subst(t, undetvars, inferencevars);\n+    public final Type asTypeVar(Type t) {\n+        return asTypeVarFun.apply(t);\n@@ -224,0 +224,7 @@\n+    Types.TypeMapping<Void> asTypeVarFun = new Type.StructuralTypeMapping<>() {\n+        @Override\n+        public Type visitUndetVar(UndetVar uv, Void aVoid) {\n+            return uv.qtype;\n+        }\n+    };\n+\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/comp\/InferenceContext.java","additions":9,"deletions":2,"binary":false,"changes":11,"status":"modified"}]}