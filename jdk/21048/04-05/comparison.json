{"files":[{"patch":"@@ -1085,2 +1085,1 @@\n-        ucp = null;\n-        resourceCache = null;\n+        resetArchivedStates(false);\n@@ -1089,5 +1088,9 @@\n-    \/\/ Called during -Xshare:dump from AppClassLoader.resetArchivedStates().\n-    void resetArchivedStatesForAppClassLoader() {\n-        setClassPath(null);\n-        if (!moduleToReader.isEmpty()) {\n-            moduleToReader.clear();\n+    \/\/ Called from BuiltinClassLoaders.resetArchivedStates() and ClassLoaders.AppClassLoader.resetArchivedStates().\n+    void resetArchivedStates(boolean all) {\n+        ucp = null;\n+        resourceCache = null;\n+        if (all) {\n+            setClassPath(null);\n+            if (!moduleToReader.isEmpty()) {\n+                moduleToReader.clear();\n+            }\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/loader\/BuiltinClassLoader.java","additions":10,"deletions":7,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -218,1 +218,1 @@\n-            resetArchivedStatesForAppClassLoader();\n+            super.resetArchivedStates(true);\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/loader\/ClassLoaders.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}