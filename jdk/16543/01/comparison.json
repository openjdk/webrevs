{"files":[{"patch":"@@ -508,0 +508,6 @@\n+  } else if (strcmp(outputstr, StdoutLog->name()) == 0) { \/\/ stdout\n+    idx = 0;\n+    assert(find_output(outputstr) == idx, \"sanity check\");\n+  } else if (strcmp(outputstr, StderrLog->name()) == 0) { \/\/ stderr\n+    idx = 1;\n+    assert(find_output(outputstr) == idx, \"sanity check\");\n","filename":"src\/hotspot\/share\/logging\/logConfiguration.cpp","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -259,1 +259,4 @@\n-  set_log_config(\"stdout\", \"logging=debug\");\n+\n+  if (!set_log_config(\"stdout\", \"logging=debug\")) {\n+    return;\n+  }\n@@ -267,5 +270,3 @@\n-  if (write_to_file(testing::internal::GetCapturedStdout())) {\n-    EXPECT_TRUE(file_contains_substring(TestLogFileName, \"header\"));\n-    EXPECT_TRUE(file_contains_substring(TestLogFileName, \"LogStreamWithAsyncLogImpl\"));\n-    EXPECT_TRUE(file_contains_substring(TestLogFileName, \"logStream msg1-msg2-msg3\"));\n-    EXPECT_TRUE(file_contains_substring(TestLogFileName, \"logStream newline\"));\n+  if (!write_to_file(testing::internal::GetCapturedStdout())) {\n+    return;\n+  }\n@@ -273,3 +274,7 @@\n-    if (AsyncLogWriter::instance() != nullptr) {\n-      EXPECT_TRUE(file_contains_substring(TestLogFileName, \"messages dropped due to async logging\"));\n-    }\n+  EXPECT_TRUE(file_contains_substring(TestLogFileName, \"header\"));\n+  EXPECT_TRUE(file_contains_substring(TestLogFileName, \"LogStreamWithAsyncLogImpl\"));\n+  EXPECT_TRUE(file_contains_substring(TestLogFileName, \"logStream msg1-msg2-msg3\"));\n+  EXPECT_TRUE(file_contains_substring(TestLogFileName, \"logStream newline\"));\n+\n+  if (AsyncLogWriter::instance() != nullptr) {\n+    EXPECT_TRUE(file_contains_substring(TestLogFileName, \"messages dropped due to async logging\"));\n@@ -282,1 +287,4 @@\n-  set_log_config(\"stderr\", \"logging=debug\");\n+\n+  if (!set_log_config(\"stderr\", \"logging=debug\")) {\n+    return;\n+  }\n@@ -290,5 +298,3 @@\n-  if (write_to_file(testing::internal::GetCapturedStderr())) {\n-    EXPECT_TRUE(file_contains_substring(TestLogFileName, \"header\"));\n-    EXPECT_TRUE(file_contains_substring(TestLogFileName, \"LogStreamWithAsyncLogImpl\"));\n-    EXPECT_TRUE(file_contains_substring(TestLogFileName, \"logStream msg1-msg2-msg3\"));\n-    EXPECT_TRUE(file_contains_substring(TestLogFileName, \"logStream newline\"));\n+  if (!write_to_file(testing::internal::GetCapturedStderr())) {\n+    return;\n+  }\n@@ -296,3 +302,7 @@\n-    if (AsyncLogWriter::instance() != nullptr) {\n-      EXPECT_TRUE(file_contains_substring(TestLogFileName, \"messages dropped due to async logging\"));\n-    }\n+  EXPECT_TRUE(file_contains_substring(TestLogFileName, \"header\"));\n+  EXPECT_TRUE(file_contains_substring(TestLogFileName, \"LogStreamWithAsyncLogImpl\"));\n+  EXPECT_TRUE(file_contains_substring(TestLogFileName, \"logStream msg1-msg2-msg3\"));\n+  EXPECT_TRUE(file_contains_substring(TestLogFileName, \"logStream newline\"));\n+\n+  if (AsyncLogWriter::instance() != nullptr) {\n+    EXPECT_TRUE(file_contains_substring(TestLogFileName, \"messages dropped due to async logging\"));\n","filename":"test\/hotspot\/gtest\/logging\/test_asynclog.cpp","additions":28,"deletions":18,"binary":false,"changes":46,"status":"modified"}]}