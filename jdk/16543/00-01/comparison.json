{"files":[{"patch":"@@ -508,1 +508,1 @@\n-  } else if (0 == strcmp(outputstr, StdoutLog->name())) { \/\/ stdout\n+  } else if (strcmp(outputstr, StdoutLog->name()) == 0) { \/\/ stdout\n@@ -511,1 +511,1 @@\n-  } else if (0 == strcmp(outputstr, StderrLog->name())) { \/\/ stderr\n+  } else if (strcmp(outputstr, StderrLog->name()) == 0) { \/\/ stderr\n","filename":"src\/hotspot\/share\/logging\/logConfiguration.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -259,3 +259,0 @@\n-  if (set_log_config(\"stdout\", \"logging=debug\")) {\n-    test_asynclog_ls();\n-    test_asynclog_drop_messages();\n@@ -263,2 +260,3 @@\n-    AsyncLogWriter::flush();\n-    fflush(nullptr);\n+  if (!set_log_config(\"stdout\", \"logging=debug\")) {\n+    return;\n+  }\n@@ -266,5 +264,2 @@\n-    if (write_to_file(testing::internal::GetCapturedStdout())) {\n-      EXPECT_TRUE(file_contains_substring(TestLogFileName, \"header\"));\n-      EXPECT_TRUE(file_contains_substring(TestLogFileName, \"LogStreamWithAsyncLogImpl\"));\n-      EXPECT_TRUE(file_contains_substring(TestLogFileName, \"logStream msg1-msg2-msg3\"));\n-      EXPECT_TRUE(file_contains_substring(TestLogFileName, \"logStream newline\"));\n+  test_asynclog_ls();\n+  test_asynclog_drop_messages();\n@@ -272,4 +267,14 @@\n-      if (AsyncLogWriter::instance() != nullptr) {\n-        EXPECT_TRUE(file_contains_substring(TestLogFileName, \"messages dropped due to async logging\"));\n-      }\n-    }\n+  AsyncLogWriter::flush();\n+  fflush(nullptr);\n+\n+  if (!write_to_file(testing::internal::GetCapturedStdout())) {\n+    return;\n+  }\n+\n+  EXPECT_TRUE(file_contains_substring(TestLogFileName, \"header\"));\n+  EXPECT_TRUE(file_contains_substring(TestLogFileName, \"LogStreamWithAsyncLogImpl\"));\n+  EXPECT_TRUE(file_contains_substring(TestLogFileName, \"logStream msg1-msg2-msg3\"));\n+  EXPECT_TRUE(file_contains_substring(TestLogFileName, \"logStream newline\"));\n+\n+  if (AsyncLogWriter::instance() != nullptr) {\n+    EXPECT_TRUE(file_contains_substring(TestLogFileName, \"messages dropped due to async logging\"));\n@@ -282,3 +287,0 @@\n-  if (set_log_config(\"stderr\", \"logging=debug\")) {\n-    test_asynclog_ls();\n-    test_asynclog_drop_messages();\n@@ -286,2 +288,3 @@\n-    AsyncLogWriter::flush();\n-    fflush(nullptr);\n+  if (!set_log_config(\"stderr\", \"logging=debug\")) {\n+    return;\n+  }\n@@ -289,5 +292,2 @@\n-    if (write_to_file(testing::internal::GetCapturedStderr())) {\n-      EXPECT_TRUE(file_contains_substring(TestLogFileName, \"header\"));\n-      EXPECT_TRUE(file_contains_substring(TestLogFileName, \"LogStreamWithAsyncLogImpl\"));\n-      EXPECT_TRUE(file_contains_substring(TestLogFileName, \"logStream msg1-msg2-msg3\"));\n-      EXPECT_TRUE(file_contains_substring(TestLogFileName, \"logStream newline\"));\n+  test_asynclog_ls();\n+  test_asynclog_drop_messages();\n@@ -295,4 +295,14 @@\n-      if (AsyncLogWriter::instance() != nullptr) {\n-        EXPECT_TRUE(file_contains_substring(TestLogFileName, \"messages dropped due to async logging\"));\n-      }\n-    }\n+  AsyncLogWriter::flush();\n+  fflush(nullptr);\n+\n+  if (!write_to_file(testing::internal::GetCapturedStderr())) {\n+    return;\n+  }\n+\n+  EXPECT_TRUE(file_contains_substring(TestLogFileName, \"header\"));\n+  EXPECT_TRUE(file_contains_substring(TestLogFileName, \"LogStreamWithAsyncLogImpl\"));\n+  EXPECT_TRUE(file_contains_substring(TestLogFileName, \"logStream msg1-msg2-msg3\"));\n+  EXPECT_TRUE(file_contains_substring(TestLogFileName, \"logStream newline\"));\n+\n+  if (AsyncLogWriter::instance() != nullptr) {\n+    EXPECT_TRUE(file_contains_substring(TestLogFileName, \"messages dropped due to async logging\"));\n","filename":"test\/hotspot\/gtest\/logging\/test_asynclog.cpp","additions":38,"deletions":28,"binary":false,"changes":66,"status":"modified"}]}