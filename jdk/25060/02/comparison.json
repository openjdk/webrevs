{"files":[{"patch":"@@ -126,1 +126,1 @@\n-    thread->set_interp_only_mode(0);\n+    thread->set_interp_only_mode(false);\n@@ -779,0 +779,1 @@\n+  assert(!is_interp_only_mode(), \"entering interp only when in interp only mode\");\n@@ -780,1 +781,1 @@\n-  _thread->increment_interp_only_mode();\n+  _thread->set_interp_only_mode(true);\n@@ -788,1 +789,1 @@\n-    --_saved_interp_only_mode;\n+    _saved_interp_only_mode = 0;\n@@ -790,1 +791,1 @@\n-    _thread->decrement_interp_only_mode();\n+    _thread->set_interp_only_mode(false);\n","filename":"src\/hotspot\/share\/prims\/jvmtiThreadState.cpp","additions":5,"deletions":4,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -194,0 +194,1 @@\n+  bool              _saved_interp_only_mode;\n@@ -214,1 +215,0 @@\n-  int               _saved_interp_only_mode;\n@@ -276,1 +276,1 @@\n-    return _thread == nullptr ?  _saved_interp_only_mode != 0 : _thread->is_interp_only_mode();\n+    return _thread == nullptr ? _saved_interp_only_mode : _thread->is_interp_only_mode();\n","filename":"src\/hotspot\/share\/prims\/jvmtiThreadState.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -147,1 +147,1 @@\n-  state->_saved_interp_only_mode = thread->get_interp_only_mode();\n+  state->_saved_interp_only_mode = thread->is_interp_only_mode();\n@@ -153,1 +153,1 @@\n-  thread->set_interp_only_mode(state == nullptr ? 0 : state->_saved_interp_only_mode);\n+  thread->set_interp_only_mode(state != nullptr && state->_saved_interp_only_mode);\n@@ -171,5 +171,1 @@\n-    MutexLocker mu(JvmtiThreadState_lock);\n-    state = current->jvmti_thread_state();\n-    if (state != nullptr && state->is_pending_interp_only_mode()) {\n-      JvmtiEventController::enter_interp_only_mode(state);\n-    }\n+    JvmtiEventController::enter_interp_only_mode(state);\n","filename":"src\/hotspot\/share\/prims\/jvmtiThreadState.inline.hpp","additions":3,"deletions":7,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -1170,0 +1170,1 @@\n+  \/\/ This field is checked by the interpreter which expects it to be an integer.\n@@ -1176,4 +1177,1 @@\n-  int get_interp_only_mode()                { return _interp_only_mode; }\n-  int set_interp_only_mode(int val)         { return _interp_only_mode = val; }\n-  void increment_interp_only_mode()         { ++_interp_only_mode; }\n-  void decrement_interp_only_mode()         { --_interp_only_mode; }\n+  void set_interp_only_mode(bool val)       { _interp_only_mode = val ? 1 : 0; }\n","filename":"src\/hotspot\/share\/runtime\/javaThread.hpp","additions":2,"deletions":4,"binary":false,"changes":6,"status":"modified"}]}