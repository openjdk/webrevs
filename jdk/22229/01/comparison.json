{"files":[{"patch":"@@ -28,2 +28,0 @@\n-import java.security.AccessController;\n-import java.security.PrivilegedAction;\n@@ -121,1 +119,1 @@\n-                if (matches(tool, moduleName))\n+                if (Objects.equals(tool.getClass().getModule().getName(), moduleName)) {\n@@ -123,0 +121,1 @@\n+                }\n@@ -129,17 +128,0 @@\n-\n-    \/**\n-     * Determine if this is the desired tool instance.\n-     * @param <T>               the interface of the tool\n-     * @param tool              the instance of the tool\n-     * @param moduleName        the name of the module containing the desired implementation\n-     * @return true if and only if the tool matches the specified criteria\n-     *\/\n-    @SuppressWarnings(\"removal\")\n-    private static <T> boolean matches(T tool, String moduleName) {\n-        PrivilegedAction<Boolean> pa = () -> {\n-            Module toolModule = tool.getClass().getModule();\n-            String toolModuleName = toolModule.getName();\n-            return Objects.equals(toolModuleName, moduleName);\n-        };\n-        return AccessController.doPrivileged(pa);\n-    }\n","filename":"src\/java.compiler\/share\/classes\/javax\/tools\/ToolProvider.java","additions":2,"deletions":20,"binary":false,"changes":22,"status":"modified"}]}