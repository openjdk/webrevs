{"files":[{"patch":"@@ -284,0 +284,9 @@\n+WB_ENTRY(jboolean, WB_isUbsanEnabled(JNIEnv* env, jobject o)) {\n+#if defined(UNDEFINED_BEHAVIOR_SANITIZER)\n+  return true;\n+#else\n+  return false;\n+#endif\n+}\n+WB_END\n+\n@@ -2687,2 +2696,2 @@\n-  {CC\"getCompressedOopsMaxHeapSize\", CC\"()J\",\n-      (void*)&WB_GetCompressedOopsMaxHeapSize},\n+  {CC\"getCompressedOopsMaxHeapSize\", CC\"()J\",         (void*)&WB_GetCompressedOopsMaxHeapSize},\n+  {CC\"isUbsanEnabled\",     CC\"()Z\",                   (void*)&WB_isUbsanEnabled},\n","filename":"src\/hotspot\/share\/prims\/whitebox.cpp","additions":11,"deletions":2,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -33,2 +33,4 @@\n- * @build HelloDocker\n- * @run driver DockerBasicTest\n+ * @build HelloDocker jdk.test.whitebox.WhiteBox\n+ *\n+ * @run driver jdk.test.lib.helpers.ClassFileInstaller jdk.test.whitebox.WhiteBox\n+ * @run main\/othervm -Xbootclasspath\/a:. -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI DockerBasicTest\n@@ -41,0 +43,1 @@\n+import jdk.test.whitebox.WhiteBox;\n@@ -47,0 +50,6 @@\n+        WhiteBox wb = WhiteBox.getWhiteBox();\n+        if (wb.isUbsanEnabled()) {\n+            System.out.println(\"ubsan is enabled, avoid docker tests\");\n+            return;\n+        }\n+\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/DockerBasicTest.java","additions":11,"deletions":2,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -75,0 +75,2 @@\n+  public native boolean isUbsanEnabled();\n+\n","filename":"test\/lib\/jdk\/test\/whitebox\/WhiteBox.java","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"}]}