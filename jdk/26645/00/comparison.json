{"files":[{"patch":"@@ -989,2 +989,1 @@\n-  \/\/ table. This is in addition to being the HG1eapRegionClosure to iterate over\n-  \/\/ all region's remembered sets.\n+  \/\/ table.\n@@ -995,1 +994,1 @@\n-  class G1MergeCardSetClosure : public G1HeapRegionClosure {\n+  class G1MergeCardSetClosure {\n@@ -1042,1 +1041,0 @@\n-\n@@ -1074,32 +1072,0 @@\n-    \/\/ Helper to merge the cards in the card set for the given region onto the card\n-    \/\/ table.\n-    \/\/\n-    \/\/ Called directly for humongous starts regions because we should not add\n-    \/\/ humongous eager reclaim candidates to the \"all\" list of regions to\n-    \/\/ clear the card table by default as we do not know yet whether this region\n-    \/\/ will be reclaimed (and reused).\n-    \/\/ If the humongous region contains dirty cards, g1 will scan them\n-    \/\/ because dumping the remembered set entries onto the card table will add\n-    \/\/ the humongous region to the \"dirty\" region list to scan. Then scanning\n-    \/\/ either clears the card during scan (if there is only an initial evacuation\n-    \/\/ pass) or the \"dirty\" list will be merged with the \"all\" list later otherwise.\n-    \/\/ (And there is no problem either way if the region does not contain dirty\n-    \/\/ cards).\n-    void merge_card_set_for_region(G1HeapRegion* r) {\n-      assert(r->in_collection_set() || r->is_starts_humongous(), \"must be\");\n-\n-      G1HeapRegionRemSet* rem_set = r->rem_set();\n-      if (!rem_set->is_empty()) {\n-        rem_set->iterate_for_merge(*this);\n-      }\n-    }\n-\n-    virtual bool do_heap_region(G1HeapRegion* r) {\n-      assert(r->in_collection_set(), \"must be\");\n-\n-      _scan_state->add_all_dirty_region(r->hrm_index());\n-      merge_card_set_for_region(r);\n-\n-      return false;\n-    }\n-\n@@ -1192,2 +1158,1 @@\n-        _cl.merge_card_set_for_region(r);\n-\n+        r->rem_set()->iterate_for_merge(_cl);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1RemSet.cpp","additions":3,"deletions":38,"binary":false,"changes":41,"status":"modified"}]}