{"files":[{"patch":"@@ -186,1 +186,1 @@\n-  __ block_comment(\"nmethod_entry_barrier (nmethod_entry_barrier) {\");\n+  __ align(8); \/\/ must align the following block which requires atomic updates\n@@ -188,4 +188,1 @@\n-  \/\/ Load stub address using toc (fixed instruction size, unlike load_const_optimized)\n-  __ calculate_address_from_global_toc(tmp, StubRoutines::method_entry_barrier(),\n-                                       true, true, false); \/\/ 2 instructions\n-  __ mtctr(tmp);\n+  __ block_comment(\"nmethod_entry_barrier (nmethod_entry_barrier) {\");\n@@ -195,1 +192,0 @@\n-  __ align(8); \/\/ align for atomic update\n@@ -202,0 +198,5 @@\n+  \/\/ Load stub address using toc (fixed instruction size, unlike load_const_optimized)\n+  __ calculate_address_from_global_toc(tmp, StubRoutines::method_entry_barrier(),\n+                                       true, true, false); \/\/ 2 instructions\n+  __ mtctr(tmp);\n+\n","filename":"src\/hotspot\/cpu\/ppc\/gc\/shared\/barrierSetAssembler_ppc.cpp","additions":7,"deletions":6,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -41,1 +41,1 @@\n-    return reinterpret_cast<NativeMovRegMem*>(get_barrier_start_address() + 3 * 4);\n+    return reinterpret_cast<NativeMovRegMem*>(get_barrier_start_address());\n@@ -98,6 +98,0 @@\n-    \/\/ calculate_address_from_global_toc (compound instruction)\n-    verify_op_code_manually(current_instruction, MacroAssembler::is_addis(*current_instruction));\n-    verify_op_code_manually(current_instruction, MacroAssembler::is_addi(*current_instruction));\n-\n-    verify_op_code_manually(current_instruction, MacroAssembler::is_mtctr(*current_instruction));\n-\n@@ -112,0 +106,6 @@\n+    \/\/ calculate_address_from_global_toc (compound instruction)\n+    verify_op_code_manually(current_instruction, MacroAssembler::is_addis(*current_instruction));\n+    verify_op_code_manually(current_instruction, MacroAssembler::is_addi(*current_instruction));\n+\n+    verify_op_code_manually(current_instruction, MacroAssembler::is_mtctr(*current_instruction));\n+\n","filename":"src\/hotspot\/cpu\/ppc\/gc\/shared\/barrierSetNMethod_ppc.cpp","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"}]}