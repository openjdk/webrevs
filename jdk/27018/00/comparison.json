{"files":[{"patch":"@@ -767,8 +767,0 @@\n-  \/\/ Indicates presence of @AOTSafeClassInitializer. Also see AOTClassInitializer for more details.\n-  bool has_aot_safe_initializer() const { return _misc_flags.has_aot_safe_initializer(); }\n-  void set_has_aot_safe_initializer()   { _misc_flags.set_has_aot_safe_initializer(true); }\n-\n-  \/\/ Indicates @AOTRuntimeSetup private static void runtimeSetup() presence.\n-  bool is_runtime_setup_required() const { return _misc_flags.is_runtime_setup_required(); }\n-  void set_is_runtime_setup_required()   { _misc_flags.set_is_runtime_setup_required(true); }\n-\n","filename":"src\/hotspot\/share\/oops\/instanceKlass.hpp","additions":0,"deletions":8,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -57,2 +57,0 @@\n-    flag(has_aot_safe_initializer           , 1 << 14) \/* has @AOTSafeClassInitializer annotation *\/ \\\n-    flag(is_runtime_setup_required          , 1 << 15) \/* has a runtimeSetup method to be called *\/ \\\n","filename":"src\/hotspot\/share\/oops\/instanceKlassFlags.hpp","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -305,1 +305,1 @@\n-  CDS_ONLY(_shared_class_flags = 0;)\n+  CDS_ONLY(_aot_class_flags = 0;)\n","filename":"src\/hotspot\/share\/oops\/klass.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -177,2 +177,2 @@\n-  u2 _shared_class_flags;\n-  enum CDSSharedClassFlags {\n+  u2 _aot_class_flags;\n+  enum  {\n@@ -184,5 +184,7 @@\n-    \/\/ This class was not loaded from a classfile in the module image\n-    \/\/ or classpath.\n-    _is_generated_shared_class             = 1 << 5,\n-    \/\/ archived mirror already initialized by AOT-cache assembly: no further need to call <clinit>\n-    _has_aot_initialized_mirror            = 1 << 6,\n+    _is_generated_shared_class             = 1 << 5, \/\/ This class was not loaded from a classfile in the module image\n+                                                     \/\/ or classpath.\n+    _has_aot_initialized_mirror            = 1 << 6, \/\/ archived mirror already initialized by AOT-cache assembly.\n+                                                     \/\/ no further need to call <clinit>\n+    _has_aot_safe_initializer              = 1 << 7, \/\/ has @AOTSafeClassInitializer annotation\n+    _is_runtime_setup_required             = 1 << 8, \/\/ has a runtimeSetup method to be called when\n+                                                     \/\/ this class is loaded from AOT cache\n@@ -327,1 +329,1 @@\n-    CDS_ONLY(_shared_class_flags |= _archived_lambda_proxy_is_available;)\n+    CDS_ONLY(_aot_class_flags |= _archived_lambda_proxy_is_available;)\n@@ -330,1 +332,1 @@\n-    CDS_ONLY(_shared_class_flags &= (u2)(~_archived_lambda_proxy_is_available);)\n+    CDS_ONLY(_aot_class_flags &= (u2)(~_archived_lambda_proxy_is_available);)\n@@ -333,1 +335,1 @@\n-    CDS_ONLY(return (_shared_class_flags & _archived_lambda_proxy_is_available) != 0;)\n+    CDS_ONLY(return (_aot_class_flags & _archived_lambda_proxy_is_available) != 0;)\n@@ -338,1 +340,1 @@\n-    CDS_ONLY(_shared_class_flags |= _has_value_based_class_annotation;)\n+    CDS_ONLY(_aot_class_flags |= _has_value_based_class_annotation;)\n@@ -341,1 +343,1 @@\n-    CDS_ONLY(_shared_class_flags &= (u2)(~_has_value_based_class_annotation);)\n+    CDS_ONLY(_aot_class_flags &= (u2)(~_has_value_based_class_annotation);)\n@@ -344,1 +346,1 @@\n-    CDS_ONLY(return (_shared_class_flags & _has_value_based_class_annotation) != 0;)\n+    CDS_ONLY(return (_aot_class_flags & _has_value_based_class_annotation) != 0;)\n@@ -349,1 +351,1 @@\n-    CDS_ONLY(_shared_class_flags |= _verified_at_dump_time;)\n+    CDS_ONLY(_aot_class_flags |= _verified_at_dump_time;)\n@@ -352,1 +354,1 @@\n-    CDS_ONLY(return (_shared_class_flags & _verified_at_dump_time) != 0;)\n+    CDS_ONLY(return (_aot_class_flags & _verified_at_dump_time) != 0;)\n@@ -357,1 +359,1 @@\n-    CDS_ONLY(_shared_class_flags |= _has_archived_enum_objs;)\n+    CDS_ONLY(_aot_class_flags |= _has_archived_enum_objs;)\n@@ -360,1 +362,1 @@\n-    CDS_ONLY(return (_shared_class_flags & _has_archived_enum_objs) != 0;)\n+    CDS_ONLY(return (_aot_class_flags & _has_archived_enum_objs) != 0;)\n@@ -365,1 +367,1 @@\n-    CDS_ONLY(_shared_class_flags |= _is_generated_shared_class;)\n+    CDS_ONLY(_aot_class_flags |= _is_generated_shared_class;)\n@@ -368,1 +370,1 @@\n-    CDS_ONLY(return (_shared_class_flags & _is_generated_shared_class) != 0;)\n+    CDS_ONLY(return (_aot_class_flags & _is_generated_shared_class) != 0;)\n@@ -373,1 +375,1 @@\n-    CDS_ONLY(_shared_class_flags |= _has_aot_initialized_mirror;)\n+    CDS_ONLY(_aot_class_flags |= _has_aot_initialized_mirror;)\n@@ -376,1 +378,19 @@\n-    CDS_ONLY(return (_shared_class_flags & _has_aot_initialized_mirror) != 0;)\n+    CDS_ONLY(return (_aot_class_flags & _has_aot_initialized_mirror) != 0;)\n+    NOT_CDS(return false;)\n+  }\n+\n+  \/\/ Indicates presence of @AOTSafeClassInitializer. Also see AOTClassInitializer for more details.\n+  void set_has_aot_safe_initializer() {\n+    CDS_ONLY(_aot_class_flags |= _has_aot_safe_initializer;)\n+  }\n+  bool has_aot_safe_initializer() const {\n+    CDS_ONLY(return (_aot_class_flags & _has_aot_safe_initializer) != 0;)\n+    NOT_CDS(return false;)\n+  }\n+\n+  \/\/ Indicates @AOTRuntimeSetup private static void runtimeSetup() presence.\n+  void set_is_runtime_setup_required() {\n+    CDS_ONLY(_aot_class_flags |= _is_runtime_setup_required;)\n+  }\n+  bool is_runtime_setup_required() const {\n+    CDS_ONLY(return (_aot_class_flags & _is_runtime_setup_required) != 0;)\n@@ -381,1 +401,1 @@\n-    CDS_ONLY(return (_shared_class_flags & _in_aot_cache) != 0;)\n+    CDS_ONLY(return (_aot_class_flags & _in_aot_cache) != 0;)\n@@ -386,1 +406,1 @@\n-    CDS_ONLY(_shared_class_flags |= _in_aot_cache;)\n+    CDS_ONLY(_aot_class_flags |= _in_aot_cache;)\n","filename":"src\/hotspot\/share\/oops\/klass.hpp","additions":43,"deletions":23,"binary":false,"changes":66,"status":"modified"}]}