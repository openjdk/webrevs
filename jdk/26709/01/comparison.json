{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,0 +33,1 @@\n+import java.util.Objects;\n@@ -302,0 +303,1 @@\n+        Objects.requireNonNull(task, \"task\");\n","filename":"src\/java.base\/share\/classes\/sun\/nio\/ch\/AsynchronousChannelGroupImpl.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,1 +26,1 @@\n- * @bug 4607272\n+ * @bug 4607272 8364761\n@@ -28,1 +28,1 @@\n- * @run main AsExecutor\n+ * @run junit AsExecutor\n@@ -31,0 +31,1 @@\n+import java.io.IOException;\n@@ -32,0 +33,2 @@\n+import java.util.ArrayList;\n+import java.util.List;\n@@ -36,0 +39,8 @@\n+import java.util.stream.Stream;\n+\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.params.ParameterizedTest;\n+import org.junit.jupiter.params.provider.Arguments;\n+import org.junit.jupiter.params.provider.MethodSource;\n+\n+import static org.junit.jupiter.api.Assertions.assertThrows;\n@@ -38,0 +49,6 @@\n+    private static ThreadFactory factory;\n+\n+    @BeforeAll\n+    public static void createThreadFactory() {\n+         factory = Executors.defaultThreadFactory();\n+    }\n@@ -39,9 +56,10 @@\n-    public static void main(String[] args) throws Exception {\n-        \/\/ create channel groups\n-        ThreadFactory factory = Executors.defaultThreadFactory();\n-        AsynchronousChannelGroup group1 = AsynchronousChannelGroup\n-            .withFixedThreadPool(5, factory);\n-        AsynchronousChannelGroup group2 = AsynchronousChannelGroup\n-            .withCachedThreadPool(Executors.newCachedThreadPool(factory), 0);\n-        AsynchronousChannelGroup group3 = AsynchronousChannelGroup\n-            .withThreadPool(Executors.newFixedThreadPool(10, factory));\n+    private static Stream<Arguments> channelGroups() throws IOException {\n+        List<Arguments> list = new ArrayList<Arguments>();\n+        list.add(Arguments.of(AsynchronousChannelGroup\n+            .withFixedThreadPool(5, factory)));\n+        list.add(Arguments.of(AsynchronousChannelGroup\n+            .withCachedThreadPool(Executors.newCachedThreadPool(factory), 0)));\n+        list.add(Arguments.of(AsynchronousChannelGroup\n+            .withThreadPool(Executors.newFixedThreadPool(10, factory))));\n+        return list.stream();\n+    }\n@@ -49,0 +67,5 @@\n+    @ParameterizedTest\n+    @MethodSource(\"channelGroups\")\n+    public void simpleTask(AsynchronousChannelGroup group)\n+        throws InterruptedException\n+    {\n@@ -50,4 +73,8 @@\n-            \/\/ execute simple tasks\n-            testSimpleTask(group1);\n-            testSimpleTask(group2);\n-            testSimpleTask(group3);\n+            Executor executor = (Executor)group;\n+            final CountDownLatch latch = new CountDownLatch(1);\n+            executor.execute(new Runnable() {\n+                    public void run() {\n+                        latch.countDown();\n+                    }\n+                });\n+            latch.await();\n@@ -55,3 +82,1 @@\n-            group1.shutdown();\n-            group2.shutdown();\n-            group3.shutdown();\n+            group.shutdown();\n@@ -61,1 +86,3 @@\n-    static void testSimpleTask(AsynchronousChannelGroup group) throws Exception {\n+    @ParameterizedTest\n+    @MethodSource(\"channelGroups\")\n+    public void nullTask(AsynchronousChannelGroup group) {\n@@ -63,7 +90,6 @@\n-        final CountDownLatch latch = new CountDownLatch(1);\n-        executor.execute(new Runnable() {\n-            public void run() {\n-                latch.countDown();\n-            }\n-        });\n-        latch.await();\n+        try {\n+            assertThrows(NullPointerException.class,\n+                         () -> executor.execute(null));\n+        } finally {\n+            group.shutdown();\n+        }\n","filename":"test\/jdk\/java\/nio\/channels\/AsynchronousChannelGroup\/AsExecutor.java","additions":53,"deletions":27,"binary":false,"changes":80,"status":"modified"}]}