{"files":[{"patch":"@@ -281,10 +281,8 @@\n-  if (c > 0 && c < max_jint) {\n-    if (is_power_of_2(c - 1)) {\n-      __ shift_left(left, exact_log2(c - 1), tmp);\n-      __ add(tmp, left, result);\n-      return true;\n-    } else if (is_power_of_2(c + 1)) {\n-      __ shift_left(left, exact_log2(c + 1), tmp);\n-      __ sub(tmp, left, result);\n-      return true;\n-    }\n+  if (is_power_of_2((juint)c - 1)) {\n+    __ shift_left(left, exact_log2((juint)c - 1), tmp);\n+    __ add(tmp, left, result);\n+    return true;\n+  } else if (is_power_of_2((juint)c + 1)) {\n+    __ shift_left(left, exact_log2((juint)c + 1), tmp);\n+    __ sub(tmp, left, result);\n+    return true;\n","filename":"src\/hotspot\/cpu\/aarch64\/c1_LIRGenerator_aarch64.cpp","additions":8,"deletions":10,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -331,12 +331,10 @@\n-  if (c > 0 && c < max_jint) {\n-    if (is_power_of_2(c + 1)) {\n-      LIR_Address::Scale scale = (LIR_Address::Scale) log2i_exact(c + 1);\n-      LIR_Address *addr = new LIR_Address(left, left, scale, 0, T_INT);\n-      __ sub(LIR_OprFact::address(addr), left, result); \/\/ rsb with shifted register\n-      return true;\n-    } else if (is_power_of_2(c - 1)) {\n-      LIR_Address::Scale scale = (LIR_Address::Scale) log2i_exact(c - 1);\n-      LIR_Address *addr = new LIR_Address(left, left, scale, 0, T_INT);\n-      __ add(left, LIR_OprFact::address(addr), result); \/\/ add with shifted register\n-      return true;\n-    }\n+  if (is_power_of_2((juint)c + 1)) {\n+    LIR_Address::Scale scale = (LIR_Address::Scale) log2i_exact((juint)c + 1);\n+    LIR_Address* addr = new LIR_Address(left, left, scale, 0, T_INT);\n+    __ sub(LIR_OprFact::address(addr), left, result); \/\/ rsb with shifted register\n+    return true;\n+  } else if (is_power_of_2((juint)c - 1)) {\n+    LIR_Address::Scale scale = (LIR_Address::Scale) log2i_exact((juint)c - 1);\n+    LIR_Address* addr = new LIR_Address(left, left, scale, 0, T_INT);\n+    __ add(left, LIR_OprFact::address(addr), result); \/\/ add with shifted register\n+    return true;\n","filename":"src\/hotspot\/cpu\/arm\/c1_LIRGenerator_arm.cpp","additions":10,"deletions":12,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -230,2 +230,2 @@\n-  if (c > 0 && c < max_jint && tmp->is_valid()) {\n-    if (is_power_of_2(c + 1)) {\n+  if (tmp->is_valid()) {\n+    if (is_power_of_2((juint)c + 1)) {\n@@ -233,1 +233,1 @@\n-      __ shift_left(left, log2i_exact(c + 1), left);\n+      __ shift_left(left, log2i_exact((juint)c + 1), left);\n@@ -236,1 +236,1 @@\n-    } else if (is_power_of_2(c - 1)) {\n+    } else if (is_power_of_2((juint)c - 1)) {\n@@ -238,1 +238,1 @@\n-      __ shift_left(left, log2i_exact(c - 1), left);\n+      __ shift_left(left, log2i_exact((juint)c - 1), left);\n@@ -242,1 +242,3 @@\n-  } else if(c == -1) {\n+  }\n+\n+  if(c == -1) {\n@@ -503,1 +505,1 @@\n-        if (iconst > 0 && iconst < max_jint && (is_power_of_2(iconst - 1) || is_power_of_2(iconst + 1))) {\n+        if (is_power_of_2((juint)iconst - 1) || is_power_of_2((juint)iconst + 1)) {\n","filename":"src\/hotspot\/cpu\/s390\/c1_LIRGenerator_s390.cpp","additions":9,"deletions":7,"binary":false,"changes":16,"status":"modified"}]}