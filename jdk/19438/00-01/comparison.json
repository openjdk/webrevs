{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n","filename":"test\/hotspot\/jtreg\/serviceability\/jvmti\/vthread\/CarrierThreadEventNotification\/CarrierThreadEventNotification.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -36,1 +36,1 @@\n-static jthread* tested_cthreads = nullptr;\n+static jthread* carrier_threads = nullptr;\n@@ -40,1 +40,1 @@\n-static const int CTHREAD_NAME_START_LEN = (int)strlen(\"ForkJoinPool\");\n+static const size_t CTHREAD_NAME_START_LEN = (int)strlen(\"ForkJoinPool\");\n@@ -44,1 +44,1 @@\n-  jthread* tested_cthreads = NULL;\n+  jthread* cthreads = nullptr;\n@@ -48,1 +48,1 @@\n-  jvmtiError err = jvmti->GetAllThreads(&all_cnt, &tested_cthreads);\n+  jvmtiError err = jvmti->GetAllThreads(&all_cnt, &cthreads);\n@@ -52,1 +52,1 @@\n-    jthread thread = tested_cthreads[idx];\n+    jthread thread = cthreads[idx];\n@@ -56,1 +56,1 @@\n-      tested_cthreads[ct_cnt++] = jni->NewGlobalRef(thread);\n+      cthreads[ct_cnt++] = jni->NewGlobalRef(thread);\n@@ -60,1 +60,1 @@\n-  *cthreads_p = tested_cthreads;\n+  *cthreads_p = cthreads;\n@@ -76,1 +76,1 @@\n-    if (cthread_cnt != 0 || tested_cthreads != nullptr) {\n+    if (cthread_cnt != 0 || carrier_threads != nullptr) {\n@@ -79,1 +79,1 @@\n-    cthread_cnt = get_cthreads(jni, &tested_cthreads);\n+    cthread_cnt = get_cthreads(jni, &carrier_threads);\n@@ -81,1 +81,1 @@\n-      jthread thread = tested_cthreads[i];\n+      jthread thread = carrier_threads[i];\n@@ -86,1 +86,1 @@\n-    if (tested_cthreads == nullptr) {\n+    if (carrier_threads == nullptr) {\n@@ -90,2 +90,1 @@\n-      jthread thread = tested_cthreads[i];\n-      char* tname = get_thread_name(jvmti, jni, thread);\n+      jthread thread = carrier_threads[i];\n@@ -95,1 +94,0 @@\n-      deallocate(jvmti, jni, (void*)tname);\n@@ -97,1 +95,1 @@\n-    jvmtiError err = jvmti->Deallocate((unsigned char*)tested_cthreads);\n+    jvmtiError err = jvmti->Deallocate((unsigned char*)carrier_threads);\n@@ -100,1 +98,1 @@\n-    tested_cthreads = nullptr;\n+    carrier_threads = nullptr;\n","filename":"test\/hotspot\/jtreg\/serviceability\/jvmti\/vthread\/CarrierThreadEventNotification\/libCarrierThreadEventNotification.cpp","additions":15,"deletions":17,"binary":false,"changes":32,"status":"modified"}]}