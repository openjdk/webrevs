{"files":[{"patch":"@@ -1770,1 +1770,5 @@\n-    st->print_cr(\"%d %d %d %s [\" INTPTR_FORMAT \", \" INTPTR_FORMAT \" - \" INTPTR_FORMAT \"]\",\n+    const char* jvmci_name = nullptr;\n+#if INCLUDE_JVMCI\n+    jvmci_name = nm->jvmci_name();\n+#endif\n+    st->print_cr(\"%d %d %d %s%s%s [\" INTPTR_FORMAT \", \" INTPTR_FORMAT \" - \" INTPTR_FORMAT \"]\",\n@@ -1772,1 +1776,1 @@\n-                 method_name,\n+                 method_name, jvmci_name ? \" jvmci_name=\" : \"\", jvmci_name ? jvmci_name : \"\",\n@@ -1814,4 +1818,12 @@\n-    const char* method_name =\n-      cb->is_nmethod() ? cb->as_nmethod()->method()->external_name()\n-                       : cb->name();\n-    fs.print_cr(INTPTR_FORMAT \" \" INTPTR_FORMAT \" %s\",\n+    const char* method_name = nullptr;\n+    const char* jvmci_name = nullptr;\n+    if (cb->is_nmethod()) {\n+      nmethod* nm = cb->as_nmethod();\n+      method_name = nm->method()->external_name();\n+#if INCLUDE_JVMCI\n+      jvmci_name = nm->jvmci_name();\n+#endif\n+    } else {\n+      method_name = cb->name();\n+    }\n+    fs.print_cr(INTPTR_FORMAT \" \" INTPTR_FORMAT \" %s%s%s\",\n@@ -1819,1 +1831,1 @@\n-                method_name);\n+                method_name, jvmci_name ? \" jvmci_name=\" : \"\", jvmci_name ? jvmci_name : \"\");\n","filename":"src\/hotspot\/share\/code\/codeCache.cpp","additions":19,"deletions":7,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -738,1 +738,10 @@\n-\n+#if INCLUDE_JVMCI\n+            const char* jvmci_name = nm->jvmci_name();\n+            if (jvmci_name != nullptr) {\n+              size_t size = ::strlen(blob_name) + ::strlen(\" jvmci_name=\") + ::strlen(jvmci_name) + 1;\n+              char* new_blob_name = (char*)os::malloc(size, mtInternal);\n+              os::snprintf(new_blob_name, size, \"%s jvmci_name=%s\", blob_name, jvmci_name);\n+              os::free((void*)blob_name);\n+              blob_name = new_blob_name;\n+            }\n+#endif\n@@ -2187,0 +2196,6 @@\n+#if INCLUDE_JVMCI\n+            const char* jvmci_name = nm->jvmci_name();\n+            if (jvmci_name != nullptr) {\n+              ast->print(\" jvmci_name=%s\", jvmci_name);\n+            }\n+#endif\n","filename":"src\/hotspot\/share\/code\/codeHeapState.cpp","additions":16,"deletions":1,"binary":false,"changes":17,"status":"modified"}]}