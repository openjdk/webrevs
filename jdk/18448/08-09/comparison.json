{"files":[{"patch":"@@ -37,1 +37,1 @@\n- * @run main\/manual SizeMinimizedTest\n+ * @run main SizeMinimizedTest\n@@ -42,2 +42,1 @@\n-    private static final int INITIAL_WIDTH = 100;\n-    private static final int INITIAL_HEIGHT = 100;\n+    private static final int INITIAL_SIZE = 100;\n@@ -46,2 +45,1 @@\n-    private static final int RESET_WIDTH = 200;\n-    private static final int RESET_HEIGHT = 200;\n+    private static final int RESET_SIZE = 200;\n@@ -58,34 +56,2 @@\n-            frame = new Frame(\"frame size test\");\n-            frame.setSize(INITIAL_WIDTH, INITIAL_HEIGHT);\n-            frame.setLocation(INITIAL_X, INITIAL_Y);\n-            frame.setVisible(true);\n-\n-            frame.addWindowListener(new WindowAdapter() {\n-                @Override\n-                public void windowOpened(WindowEvent e) {\n-                    System.out.println(\"Initial Frame Size: \" + frame.getSize());\n-                    System.out.println(\"Initial Frame Location: \" + frame.getLocationOnScreen());\n-                }\n-            });\n-\n-            frame.addWindowStateListener(new WindowAdapter() {\n-                @Override\n-                public void windowStateChanged(WindowEvent e) {\n-                    if (e.getNewState() == Frame.NORMAL) {\n-                        System.out.println(\"Frame Size: \" + frame.getSize());\n-                        System.out.println(\"Frame Location: \" + frame.getLocationOnScreen());\n-                        expectedSize = new Dimension(RESET_WIDTH, RESET_HEIGHT);\n-                        frameSize = frame.getSize();\n-\n-                        if (!expectedSize.equals(frameSize)) {\n-                            throw new RuntimeException(\"Test Failed due to size mismatch.\");\n-                        }\n-\n-                        expectedLoc = new Point(INITIAL_X + OFFSET * iterationCnt, INITIAL_Y);\n-                        frameLoc = frame.getLocationOnScreen();\n-\n-                        if (!expectedLoc.equals(frameLoc)) {\n-                            throw new RuntimeException(\"Test Failed due to location mismatch.\");\n-                        }\n-                    }\n-                }\n+            EventQueue.invokeAndWait(() -> {\n+                createUI();\n@@ -93,1 +59,2 @@\n-\n+            robot.waitForIdle();\n+            robot.delay(100);\n@@ -100,1 +67,1 @@\n-                frame.setSize(RESET_WIDTH, RESET_HEIGHT);\n+                frame.setSize(RESET_SIZE, RESET_SIZE);\n@@ -127,0 +94,42 @@\n+\n+    public static void createUI() {\n+        frame = new Frame(\"Frame size test\");\n+        frame.setSize(INITIAL_SIZE, INITIAL_SIZE);\n+        frame.setLocation(INITIAL_X, INITIAL_Y);\n+\n+        frame.addWindowListener(new WindowAdapter() {\n+            @Override\n+            public void windowOpened(WindowEvent e) {\n+                System.out.println(\"Initial Frame Size: \" + frame.getSize());\n+                System.out.println(\"Initial Frame Location: \" +\n+                        frame.getLocationOnScreen());\n+            }\n+        });\n+\n+        frame.addWindowStateListener(new WindowAdapter() {\n+            @Override\n+            public void windowStateChanged(WindowEvent e) {\n+                if (e.getNewState() == Frame.NORMAL) {\n+                    System.out.println(\"Frame Size: \" + frame.getSize());\n+                    System.out.println(\"Frame Location: \" +\n+                            frame.getLocationOnScreen());\n+                    expectedSize = new Dimension(RESET_SIZE, RESET_SIZE);\n+                    frameSize = frame.getSize();\n+\n+                    if (!expectedSize.equals(frameSize)) {\n+                        throw new RuntimeException(\"Test Failed due to size mismatch.\");\n+                    }\n+\n+                    expectedLoc = new Point(INITIAL_X + OFFSET * iterationCnt,\n+                            INITIAL_Y);\n+                    frameLoc = frame.getLocationOnScreen();\n+\n+                    if (!expectedLoc.equals(frameLoc)) {\n+                        throw new RuntimeException(\"Test Failed due to \" +\n+                                \"location mismatch.\");\n+                    }\n+                }\n+            }\n+        });\n+        frame.setVisible(true);\n+    }\n","filename":"test\/jdk\/java\/awt\/Frame\/SizeMinimizedTest.java","additions":50,"deletions":41,"binary":false,"changes":91,"status":"modified"}]}