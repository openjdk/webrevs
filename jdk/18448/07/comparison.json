{"files":[{"patch":"@@ -803,0 +803,1 @@\n+java\/awt\/Frame\/SizeMinimizedTest.java 4065534 linux-x64\n","filename":"test\/jdk\/ProblemList.txt","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -0,0 +1,62 @@\n+\/*\n+ * Copyright (c) 1999, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.awt.Frame;\n+import java.awt.Label;\n+\n+\/*\n+ * @test\n+ * @bug 4106068\n+ * @summary Test to verify maximized window is not too big\n+ * @library \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame\n+ * @run main\/manual FrameMaximizedTest\n+ *\/\n+\n+public class FrameMaximizedTest {\n+    public static void main (String[] args) throws Exception {\n+        String INSTRUCTIONS = \"\"\"\n+                Maximize the frame window. Check that the right and bottom edges of the\n+                window are not off the edge of the screen. If they are not, the test\n+                is successful and the bug is fixed.\n+                \"\"\";\n+\n+        PassFailJFrame.builder()\n+                .title(\"Test Instructions\")\n+                .instructions(INSTRUCTIONS)\n+                .rows(4)\n+                .columns(40)\n+                .testUI(new TestFrame())\n+                .build()\n+                .awaitAndCheck();\n+    }\n+}\n+\n+class TestFrame extends Frame {\n+    public TestFrame() {\n+        setTitle(\"FrameMaximizedTest\");\n+        setSize(500, 300);\n+        add(\"North\", new Label(\"Maximize me and check if my \" +\n+                \"bottom and right edge are on screen.\"));\n+    }\n+}\n","filename":"test\/jdk\/java\/awt\/Frame\/FrameMaximizedTest.java","additions":62,"deletions":0,"binary":false,"changes":62,"status":"added"},{"patch":"@@ -0,0 +1,59 @@\n+\/*\n+ * Copyright (c) 1999, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.awt.Frame;\n+\n+\/*\n+ * @test\n+ * @bug 4172782\n+ * @summary Test if non-resizable frame is minimizable\n+ * @library \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame\n+ * @run main\/manual FrameMinimizeTest\n+ *\/\n+\n+public class FrameMinimizeTest {\n+    public static void main(String[] args) throws Exception {\n+        String INSTRUCTIONS = \"\"\"\n+                When the blank FrameMinimizeTest frame is shown, verify that\n+                  1. It is not resizable;\n+                  2. It is minimizable.\n+                                \"\"\";\n+\n+        PassFailJFrame.builder()\n+                .title(\"Test Instructions\")\n+                .instructions(INSTRUCTIONS)\n+                .rows(4)\n+                .columns(35)\n+                .testUI(FrameMinimizeTest::initialize)\n+                .build()\n+                .awaitAndCheck();\n+    }\n+\n+    public static Frame initialize() {\n+        Frame f = new Frame(\"FrameMinimizeTest\");\n+        f.setSize(200, 200);\n+        f.setResizable(false);\n+        return f;\n+    }\n+}\n","filename":"test\/jdk\/java\/awt\/Frame\/FrameMinimizeTest.java","additions":59,"deletions":0,"binary":false,"changes":59,"status":"added"},{"patch":"@@ -0,0 +1,273 @@\n+\/*\n+ * Copyright (c) 1999, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.awt.BorderLayout;\n+import java.awt.Button;\n+import java.awt.Canvas;\n+import java.awt.Color;\n+import java.awt.Dialog;\n+import java.awt.Dimension;\n+import java.awt.Frame;\n+import java.awt.Graphics;\n+import java.awt.GridLayout;\n+import java.awt.Image;\n+import java.awt.Label;\n+import java.awt.MediaTracker;\n+import java.awt.Panel;\n+import java.awt.Toolkit;\n+import java.awt.event.ActionEvent;\n+import java.awt.event.ActionListener;\n+import java.awt.event.WindowAdapter;\n+import java.awt.event.WindowEvent;\n+import java.awt.image.ImageProducer;\n+import java.net.URL;\n+\n+\/*\n+ * @test\n+ * @bug 4175560\n+ * @summary Test use of user-defined icons\n+ * @library \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame\n+ * @run main\/manual MegaIconTest\n+ *\/\n+\n+public class MegaIconTest {\n+    public static void main(String[] args) throws Exception {\n+        String INSTRUCTIONS = \"\"\"\n+                Each of the buttons in the main window represents a test\n+                of certain icon functionality -  background transparency\/opacity\n+                of the icon, scaling etc.\n+                Clicking on each button brings up a window displaying the graphic\n+                that should appear in the corresponding icon.\n+                Click on each button, minimize the resulting window, and check that\n+                the icon is displayed as the test name indicates.\n+                On Win32, icons should also be displayed correctly in the title bar.\n+                If all the test pass, then this test passes, else fail.\n+                \"\"\";\n+\n+        PassFailJFrame.builder()\n+                .title(\"Test Instructions\")\n+                .instructions(INSTRUCTIONS)\n+                .rows(10)\n+                .columns(35)\n+                .testUI(MegaIconTest::initialize)\n+                .build()\n+                .awaitAndCheck();\n+    }\n+\n+    public static Frame initialize() {\n+        \/\/Create the iconTestFrames and add to IconTestButtons\n+        IconTestButtons itb = new IconTestButtons(new IconTestFrame[]{\n+                new IconTestFrame(\"Opaque, Scaled Icon Test\",\n+                        \"duke_404.gif\"),\n+\n+                new IconTestFrame(\"Transparent Icon\",\n+                        \"dukeWave.gif\"),\n+\n+                new IconTestFrameBG(\"Transparent, Scaled Icon with bg\",\n+                        \"fight.gif\", Color.red),\n+\n+                new IconTestFrameDlg(\"Transparent icon w\/ Dialog\",\n+                        \"dukeWave.gif\")\n+        });\n+        itb.pack();\n+        return itb;\n+    }\n+}\n+\n+class IconTestButtons extends Frame {\n+    public IconTestButtons(IconTestFrame[] iconTests) {\n+        IconTestFrame tempTest;\n+        Button newBtn;\n+        Panel newPnl;\n+        DoneLabel newLbl;\n+\n+        setTitle(\"MegaIconTest\");\n+\n+        setLayout(new GridLayout(iconTests.length, 1));\n+\n+        \/\/For each icon test frame\n+        \/\/Get name, add button with name and action to\n+        \/\/display the window, and add label \"done\" after\n+\n+        for (int i = 0; i < iconTests.length; i++) {\n+            tempTest = iconTests[i];\n+            newBtn = new Button(tempTest.getTestName());\n+            newLbl = new DoneLabel();\n+            newBtn.addActionListener(new IconTestActionListener(tempTest,\n+                    newLbl));\n+            newPnl = new Panel();\n+            newPnl.add(newBtn);\n+            newPnl.add(newLbl);\n+            add(newPnl);\n+        }\n+    }\n+\n+    protected class DoneLabel extends Label {\n+        public DoneLabel() {\n+            super(\"Done\");\n+            setVisible(false);\n+        }\n+    }\n+\n+    protected class IconTestActionListener implements ActionListener {\n+        IconTestFrame f;\n+        DoneLabel l;\n+\n+        public IconTestActionListener(IconTestFrame frame, DoneLabel label) {\n+            this.f = frame;\n+            this.l = label;\n+        }\n+\n+        public void actionPerformed(ActionEvent e) {\n+            f.pack();\n+            f.setVisible(true);\n+            l.setVisible(true);\n+            IconTestButtons.this.pack();\n+        }\n+    }\n+}\n+\n+class IconTestFrame extends Frame {\n+    private String testName;\n+    int width, height;\n+    Image iconImage;\n+    MediaTracker tracker;\n+\n+    public IconTestFrame(String testName, String iconFileName) {\n+        super(testName);\n+        this.testName = testName;\n+        tracker = new MediaTracker(this);\n+\n+        \/\/Set icon image\n+        URL url = MegaIconTest.class.getResource(iconFileName);\n+        Toolkit tk = Toolkit.getDefaultToolkit();\n+        if (tk == null) {\n+            System.out.println(\"Toolkit is null!\");\n+        }\n+        if (url == null) {\n+            System.out.println(\"Can't load icon is null!\");\n+            return;\n+        }\n+        try {\n+            iconImage = tk.createImage((ImageProducer) url.getContent());\n+        } catch (java.io.IOException e) {\n+            System.out.println(\"Unable to load icon image from url: \" + url);\n+        }\n+        tracker.addImage(iconImage, 0);\n+        try {\n+            tracker.waitForAll();\n+        } catch (java.lang.InterruptedException e) {\n+            System.err.println(e);\n+        }\n+        width = iconImage.getWidth(this);\n+        height = iconImage.getHeight(this);\n+        setIconImage(iconImage);\n+\n+        addWindowListener(new WindowAdapter() {\n+            public void windowClosing(WindowEvent e) {\n+                setVisible(false);\n+            }\n+        });\n+\n+        setLayout(new BorderLayout());\n+        setBackground(Color.YELLOW);\n+\n+        \/\/Add the icon graphic and instructions to the Frame\n+        add(new IconCanvas(), \"Center\");\n+        pack();\n+    }\n+\n+    class IconCanvas extends Canvas {\n+        public void paint(Graphics g) {\n+            if (IconTestFrame.this.iconImage == null) {\n+                throw new NullPointerException();\n+            }\n+            g.drawImage(IconTestFrame.this.iconImage, 0, 0, this);\n+        }\n+\n+        public Dimension getPreferredSize() {\n+            return new Dimension(IconTestFrame.this.width,\n+                    IconTestFrame.this.height);\n+        }\n+\n+        public Dimension getMinimumSize() {\n+            return getPreferredSize();\n+        }\n+\n+        public Dimension getMaximumSize() {\n+            return getPreferredSize();\n+        }\n+    }\n+\n+    public String getTestName() {\n+        return testName;\n+    }\n+}\n+\n+class IconTestFrameBG extends IconTestFrame {\n+    public IconTestFrameBG(String testName, String iconFileName, Color bg) {\n+        super(testName, iconFileName);\n+        setBackground(bg);\n+        Panel p = new Panel();\n+        p.setLayout(new GridLayout(3, 1));\n+        p.add(new Label(\"The background of this window has been set.\"));\n+        p.add(new Label(\"Unless the default icon background is the same color,\"));\n+        p.add(new Label(\"the icon background should NOT be this color.\"));\n+        add(p, \"North\");\n+        pack();\n+    }\n+}\n+\n+class IconTestFrameDlg extends IconTestFrame implements ActionListener {\n+    Dialog dlg;\n+    Button dlgBtn;\n+\n+    public IconTestFrameDlg(String testName, String iconFilename) {\n+        super(testName, iconFilename);\n+        Panel p = new Panel();\n+        p.setLayout(new GridLayout(4, 1));\n+        p.add(new Label(\"Click on the button below to display a child dialog.\"));\n+        p.add(new Label(\"On Win32, the Dialog's titlebar icon should match\"));\n+        p.add(new Label(\"the titlebar icon of this window.\"));\n+        p.add(new Label(\"Minimizing this Frame should yield only one icon.\"));\n+        add(p, \"North\");\n+\n+        dlg = new Dialog(this);\n+        dlg.setSize(200, 200);\n+        dlg.add(new Label(\"Dialog stuff.\"));\n+        dlg.addWindowListener(new WindowAdapter() {\n+            public void windowClosing(WindowEvent e) {\n+                setVisible(false);\n+            }\n+        });\n+\n+        dlgBtn = new Button(\"Display Dialog\");\n+        dlgBtn.addActionListener(this);\n+        add(dlgBtn, \"South\");\n+    }\n+\n+    public void actionPerformed(ActionEvent e) {\n+        dlg.setVisible(true);\n+    }\n+}\n","filename":"test\/jdk\/java\/awt\/Frame\/MegaIconTest\/MegaIconTest.java","additions":273,"deletions":0,"binary":false,"changes":273,"status":"added"},{"filename":"test\/jdk\/java\/awt\/Frame\/MegaIconTest\/dukeWave.gif","binary":true,"status":"added"},{"filename":"test\/jdk\/java\/awt\/Frame\/MegaIconTest\/duke_404.gif","binary":true,"status":"added"},{"patch":"","filename":"test\/jdk\/java\/awt\/Frame\/MegaIconTest\/fight.gif","additions":0,"deletions":0,"binary":false,"changes":0,"previous_filename":"src\/demo\/share\/jfc\/J2Ddemo\/images\/fight.gif","status":"copied"},{"patch":"@@ -0,0 +1,121 @@\n+\/*\n+ * Copyright (c) 1999, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.awt.Dimension;\n+import java.awt.Frame;\n+import java.awt.Point;\n+import java.awt.Robot;\n+import java.awt.event.ComponentAdapter;\n+import java.awt.event.ComponentEvent;\n+import java.awt.event.WindowAdapter;\n+import java.awt.event.WindowEvent;\n+\n+import javax.swing.SwingUtilities;\n+\n+\/*\n+ * @test\n+ * @key headful\n+ * @bug 4065534\n+ * @summary Frame.setSize() doesn't change size if window is in an iconified state\n+ * @run main SizeMinimizedTest\n+ *\/\n+\n+public class SizeMinimizedTest {\n+    private static Frame frame;\n+    private static final int INITIAL_WIDTH = 100;\n+    private static final int INITIAL_HEIGHT = 100;\n+    private static final int INITIAL_X = 150;\n+    private static final int INITIAL_Y = 50;\n+    private static final int RESET_WIDTH = 200;\n+    private static final int RESET_HEIGHT = 200;\n+    private static final int OFFSET = 10;\n+    private static int iterationCnt = 0;\n+    private static Dimension expectedSize;\n+    private static Dimension frameSize;\n+    private static Point expectedLoc;\n+    private static Point frameLoc;\n+\n+    public static void main(String[] args) throws Exception {\n+        Robot robot = new Robot();\n+        try {\n+            frame = new Frame(\"frame size test\");\n+            frame.setSize(INITIAL_WIDTH, INITIAL_HEIGHT);\n+            frame.setLocation(INITIAL_X, INITIAL_Y);\n+            frame.setVisible(true);\n+\n+            frame.addWindowListener(new WindowAdapter() {\n+                @Override\n+                public void windowOpened(WindowEvent e) {\n+                    System.out.println(\"Initial Frame Size: \" + frame.getSize());\n+                    System.out.println(\"Initial Frame Location: \" + frame.getLocationOnScreen());\n+                }\n+            });\n+            frame.addComponentListener(new ComponentAdapter() {\n+                @Override\n+                public void componentResized(ComponentEvent e) {\n+                    System.out.println(\"Frame Size: \" + frame.getSize());\n+\n+                    expectedSize = new Dimension(RESET_WIDTH, RESET_HEIGHT);\n+                    frameSize = frame.getSize();\n+\n+                    if (!expectedSize.equals(frameSize)) {\n+                        throw new RuntimeException(\"Test Failed due to size mismatch.\");\n+                    }\n+                }\n+\n+                @Override\n+                public void componentMoved(ComponentEvent e) {\n+                    System.out.println(\"Frame Location: \" + frame.getLocationOnScreen());\n+\n+                    expectedLoc = new Point(INITIAL_X + OFFSET * iterationCnt, INITIAL_Y);\n+                    frameLoc = frame.getLocationOnScreen();\n+\n+                    if (!expectedLoc.equals(frameLoc)) {\n+                        throw new RuntimeException(\"Test Failed due to location mismatch.\");\n+                    }\n+                }\n+            });\n+\n+            frame.setSize(RESET_WIDTH, RESET_HEIGHT);\n+            robot.waitForIdle();\n+            robot.delay(100);\n+\n+            for (int i = 0; i < 5; i++) {\n+                SwingUtilities.invokeAndWait(() -> {\n+                    Point pt = frame.getLocation();\n+                    frame.setLocation(pt.x + OFFSET, pt.y);\n+                });\n+                iterationCnt++;\n+                robot.waitForIdle();\n+                robot.delay(100);\n+            }\n+            System.out.println(\"Test Passed!\");\n+        } finally {\n+            SwingUtilities.invokeAndWait(() -> {\n+                if (frame != null) {\n+                    frame.dispose();\n+                }\n+            });\n+        }\n+    }\n+}\n","filename":"test\/jdk\/java\/awt\/Frame\/SizeMinimizedTest.java","additions":121,"deletions":0,"binary":false,"changes":121,"status":"added"}]}