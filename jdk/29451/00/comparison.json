{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -116,2 +116,8 @@\n-        runAndCheck(new Flags(TestDwarf.class.getCanonicalName(), \"nativeDereferenceNull\"),\n-                    new DwarfConstraint(0, \"dereference_null\", \"libTestDwarfHelper.h\", 46));\n+        \/\/ Null pointer dereferences exhibit different behaviour depending on if GCC or Clang is used.\n+        \/\/ When using GCC, the VM will crash gracefully and generate a hs_err which can be parsed.\n+        \/\/ On the contrary, with Clang the process exits immediately without hs_err.\n+        \/\/ Since runAndCheck needs an hs_err file, we have to skip this subtest.\n+        if (!isUsingClang()) {\n+            runAndCheck(new Flags(TestDwarf.class.getCanonicalName(), \"nativeDereferenceNull\"),\n+                        new DwarfConstraint(0, \"dereference_null\", \"libTestDwarfHelper.h\", 46));\n+        }\n@@ -243,0 +249,1 @@\n+    private static native boolean isUsingClang();\n","filename":"test\/hotspot\/jtreg\/runtime\/ErrorHandling\/TestDwarf.java","additions":10,"deletions":3,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,2 +31,2 @@\n-\/\/ Just big enough by doing some random things such that it is not inlined.\n-void foo(int x) {\n+\/\/ Explicitly don't inline: foo is large enough that GCC won't inline it, but Clang might.\n+__attribute__((noinline)) void foo(int x) {\n@@ -79,0 +79,9 @@\n+\/\/ Need to tell if Clang was used to build libTestDwarf.\n+JNIEXPORT jboolean JNICALL Java_TestDwarf_isUsingClang(JNIEnv* env, jobject obj) {\n+#if defined(__clang__)\n+    return JNI_TRUE;\n+#else\n+    return JNI_FALSE;\n+#endif\n+}\n+\n","filename":"test\/hotspot\/jtreg\/runtime\/ErrorHandling\/libTestDwarf.c","additions":12,"deletions":3,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -44,1 +44,1 @@\n-EXPORT void dereference_null() {\n+__attribute__((noinline)) EXPORT void dereference_null() {\n","filename":"test\/hotspot\/jtreg\/runtime\/ErrorHandling\/libTestDwarfHelper.h","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}