{"files":[{"patch":"@@ -1684,1 +1684,1 @@\n-void C2_MacroAssembler::compress_bits_v(Register dst, Register src, Register mask, Register tmp, bool is_long) {\n+void C2_MacroAssembler::compress_bits_v(Register dst, Register src, Register mask, bool is_long) {\n@@ -1694,2 +1694,2 @@\n-  mv(tmp, len);\n-  vsetvli(x0, tmp, Assembler::e8, lmul);\n+  mv(t0, len);\n+  vsetvli(x0, t0, Assembler::e8, lmul);\n@@ -1705,1 +1705,1 @@\n-  vsetvli(x0, tmp, Assembler::e8, lmul);\n+  vsetvli(x0, t0, Assembler::e8, lmul);\n@@ -1714,2 +1714,2 @@\n-void C2_MacroAssembler::compress_bits_i_v(Register dst, Register src, Register mask, Register tmp) {\n-  compress_bits_v(dst, src, mask, tmp, \/* is_long *\/ false);\n+void C2_MacroAssembler::compress_bits_i_v(Register dst, Register src, Register mask) {\n+  compress_bits_v(dst, src, mask, \/* is_long *\/ false);\n@@ -1718,2 +1718,2 @@\n-void C2_MacroAssembler::compress_bits_l_v(Register dst, Register src, Register mask, Register tmp) {\n-  compress_bits_v(dst, src, mask, tmp, \/* is_long *\/ true);\n+void C2_MacroAssembler::compress_bits_l_v(Register dst, Register src, Register mask) {\n+  compress_bits_v(dst, src, mask, \/* is_long *\/ true);\n","filename":"src\/hotspot\/cpu\/riscv\/c2_MacroAssembler_riscv.cpp","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -42,1 +42,1 @@\n-  void compress_bits_v(Register dst, Register src, Register mask, Register tmp, bool is_long);\n+  void compress_bits_v(Register dst, Register src, Register mask, bool is_long);\n@@ -169,2 +169,2 @@\n-  void compress_bits_i_v(Register dst, Register src, Register mask, Register tmp);\n-  void compress_bits_l_v(Register dst, Register src, Register mask, Register tmp);\n+  void compress_bits_i_v(Register dst, Register src, Register mask);\n+  void compress_bits_l_v(Register dst, Register src, Register mask);\n","filename":"src\/hotspot\/cpu\/riscv\/c2_MacroAssembler_riscv.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2883,1 +2883,2 @@\n-instruct compressBitsI(iRegINoSp dst, iRegIorL2I src, iRegIorL2I mask, iRegPNoSp tmp, vRegMask_V0 v0, vReg_V4 v4, vReg_V8 v8) %{\n+instruct compressBitsI(iRegINoSp dst, iRegIorL2I src, iRegIorL2I mask, vRegMask_V0 v0,\n+                       vReg_V4 v4, vReg_V4 v5, vReg_V8 v8, vReg_V4 v9) %{\n@@ -2886,1 +2887,1 @@\n-  effect(TEMP tmp, TEMP v0, TEMP v4, TEMP v8);\n+  effect(TEMP v0, TEMP v4, TEMP v5, TEMP v8, TEMP v9);\n@@ -2889,2 +2890,2 @@\n-            \"mv $tmp, 32\\n\\t\"\n-            \"vsetvli x0, $tmp, e8, m2, tu, mu\\n\\t\"\n+            \"mv t0, 32\\n\\t\"\n+            \"vsetvli x0, t0, e8, m2, tu, mu\\n\\t\"\n@@ -2896,1 +2897,1 @@\n-            \"vsetvli x0, $tmp, e8, m2, tu, mu\\n\\t\"\n+            \"vsetvli x0, t0, e8, m2, tu, mu\\n\\t\"\n@@ -2903,1 +2904,1 @@\n-    __ compress_bits_i_v(as_Register($dst$$reg), as_Register($src$$reg), as_Register($mask$$reg), as_Register($tmp$$reg));\n+    __ compress_bits_i_v(as_Register($dst$$reg), as_Register($src$$reg), as_Register($mask$$reg));\n@@ -2908,1 +2909,3 @@\n-instruct compressBitsL(iRegLNoSp dst, iRegL src, iRegL mask, iRegPNoSp tmp, vRegMask_V0 v0, vReg_V4 v4, vReg_V8 v8) %{\n+instruct compressBitsL(iRegLNoSp dst, iRegL src, iRegL mask, vRegMask_V0 v0,\n+                       vReg_V4 v4, vReg_V4 v5, vReg_V4 v6, vReg_V4 v7,\n+                       vReg_V8 v8, vReg_V4 v9, vReg_V4 v10, vReg_V4 v11) %{\n@@ -2911,1 +2914,1 @@\n-  effect(TEMP tmp, TEMP v0, TEMP v4, TEMP v8);\n+  effect(TEMP v0, TEMP v4, TEMP v5, TEMP v6, TEMP v7, TEMP v8, TEMP v9, TEMP v10, TEMP v11);\n@@ -2914,2 +2917,2 @@\n-            \"mv $tmp, 64\\n\\t\"\n-            \"vsetvli x0, $tmp, e8, m4, tu, mu\\n\\t\"\n+            \"mv t0, 64\\n\\t\"\n+            \"vsetvli x0, t0, e8, m4, tu, mu\\n\\t\"\n@@ -2921,1 +2924,1 @@\n-            \"vsetvli x0, $tmp, e8, m4, tu, mu\\n\\t\"\n+            \"vsetvli x0, t0, e8, m4, tu, mu\\n\\t\"\n@@ -2928,1 +2931,1 @@\n-    __ compress_bits_l_v(as_Register($dst$$reg), as_Register($src$$reg), as_Register($mask$$reg), as_Register($tmp$$reg));\n+    __ compress_bits_l_v(as_Register($dst$$reg), as_Register($src$$reg), as_Register($mask$$reg));\n","filename":"src\/hotspot\/cpu\/riscv\/riscv_v.ad","additions":15,"deletions":12,"binary":false,"changes":27,"status":"modified"}]}