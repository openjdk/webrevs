{"files":[{"patch":"@@ -63,2 +63,1 @@\n-        return Comparator.naturalOrder().equals(comparator) ?\n-                new OfRef<>(upstream) : new OfRef<>(upstream, comparator);\n+        return new OfRef<>(upstream, comparator);\n@@ -112,3 +111,0 @@\n-            super(upstream, StreamShape.REFERENCE,\n-                  StreamOpFlag.IS_ORDERED | StreamOpFlag.IS_SORTED);\n-            this.isNaturalSort = true;\n@@ -118,1 +114,1 @@\n-            this.comparator = comp;\n+            this(upstream, comp);\n@@ -127,0 +123,2 @@\n+            Objects.requireNonNull(comparator);\n+            boolean isNaturalSort = Comparator.naturalOrder().equals(comparator);\n@@ -128,3 +126,4 @@\n-                  StreamOpFlag.IS_ORDERED | StreamOpFlag.NOT_SORTED);\n-            this.isNaturalSort = false;\n-            this.comparator = Objects.requireNonNull(comparator);\n+                  StreamOpFlag.IS_ORDERED |\n+                          (isNaturalSort ? StreamOpFlag.SORTED : StreamOpFlag.NOT_SORTED));\n+            this.isNaturalSort = isNaturalSort;\n+            this.comparator = comparator;\n","filename":"src\/java.base\/share\/classes\/java\/util\/stream\/SortedOps.java","additions":8,"deletions":9,"binary":false,"changes":17,"status":"modified"}]}