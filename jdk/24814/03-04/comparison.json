{"files":[{"patch":"@@ -135,1 +135,1 @@\n-  return _tlab_usage.capacity();\n+  return _tlab_usage.tlab_capacity();\n@@ -139,1 +139,1 @@\n-  return _tlab_usage.used();\n+  return _tlab_usage.tlab_used();\n","filename":"src\/hotspot\/share\/gc\/z\/zHeap.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -32,1 +32,0 @@\n-\n@@ -39,0 +38,1 @@\n+\n@@ -43,1 +43,1 @@\n-  const size_t current_used = Atomic::xchg(&_used, (size_t) 0);\n+  const size_t used = Atomic::xchg(&_used, (size_t) 0);\n@@ -45,2 +45,2 @@\n-  \/\/ Avoid updates for the second young generation collection of a SystemGC\n-  if (current_used == 0) {\n+  \/\/ Avoid updates when nothing has been allocated since the last YC\n+  if (used == 0) {\n@@ -51,2 +51,2 @@\n-  const size_t old_used = used();\n-  const size_t old_capacity = capacity();\n+  const size_t old_tlab_used = tlab_used();\n+  const size_t old_tlab_capacity = tlab_capacity();\n@@ -55,1 +55,1 @@\n-  _used_history.add(current_used);\n+  _used_history.add(used);\n@@ -58,4 +58,4 @@\n-                      old_used \/ M,\n-                      used() \/ M,\n-                      old_capacity \/ M,\n-                      capacity() \/ M);\n+                      old_tlab_used \/ M,\n+                      tlab_used() \/ M,\n+                      old_tlab_capacity \/ M,\n+                      tlab_capacity() \/ M);\n@@ -64,1 +64,1 @@\n-size_t ZTLABUsage::used() const {\n+size_t ZTLABUsage::tlab_used() const {\n@@ -68,1 +68,1 @@\n-size_t ZTLABUsage::capacity() const {\n+size_t ZTLABUsage::tlab_capacity() const {\n","filename":"src\/hotspot\/share\/gc\/z\/zTLABUsage.cpp","additions":13,"deletions":13,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -39,1 +39,2 @@\n-\/\/ average of the last 10 used values.\n+\/\/ average of the last 10 used values. ZGC uses the last snapshotted value as\n+\/\/ the value returned as tlab_used().\n@@ -43,0 +44,1 @@\n+  \/\/ Accounting TLAB used until the next GC cycle\n@@ -44,0 +46,1 @@\n+  \/\/ Sequence of historic used values\n@@ -53,2 +56,2 @@\n-  size_t used() const;\n-  size_t capacity() const;\n+  size_t tlab_used() const;\n+  size_t tlab_capacity() const;\n","filename":"src\/hotspot\/share\/gc\/z\/zTLABUsage.hpp","additions":6,"deletions":3,"binary":false,"changes":9,"status":"modified"}]}