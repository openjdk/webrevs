{"files":[{"patch":"@@ -40,1 +40,1 @@\n- * For the sake of brefity, to run all of these checkers use\n+ * For the sake of brevity, to run all of these checkers use\n@@ -69,1 +69,0 @@\n- *  TODO (not yet added)\n@@ -77,1 +76,3 @@\n-    private static final Path DIR = Path.of(System.getProperty(\"doccheck.dir\"));\n+\n+    private static final String DOCCHECK_DIR = System.getProperty(\"doccheck.dir\");\n+    private static final Path DIR = Path.of(DOCCHECK_DIR != null ? DOCCHECK_DIR : \"\");\n@@ -85,0 +86,1 @@\n+    private static boolean extlinks;\n@@ -115,0 +117,1 @@\n+            extlinks = true;\n@@ -128,0 +131,3 @@\n+            if (CHECKS_LIST.contains(\"extlinks\")) {\n+                extlinks = true;\n+            }\n@@ -151,0 +157,4 @@\n+        if (extlinks) {\n+            checkers.add(new HtmlFileChecker(new ExtLinkChecker(), DOCS_DIR));\n+        }\n+\n@@ -160,4 +170,0 @@\n-\/\/        if (extlinks) {\n-\/\/            checkers.add(new HtmlFileChecker(new ExtLinkChecker(), DOCS_DIR));\n-\/\/        }\n-\n","filename":"test\/docs\/jdk\/javadoc\/doccheck\/DocCheck.java","additions":13,"deletions":7,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -1,1 +0,0 @@\n-ftp:\/\/ftp.pwg.org\/pub\/pwg\/standards\/temp_archive\/pwg5100.3.pdf\n@@ -7,1 +6,1 @@\n-http:\/\/docs.oracle.com\/javase\/specs\/jls\/se24\/html\/jls-12.html\n+http:\/\/docs.oracle.com\/javase\/specs\/jls\/se25\/html\/jls-12.html\n@@ -102,0 +101,2 @@\n+ key = http:\/\/www.ietf.org\/rfc\/rfc3720.txt\"\n+ value = {LinkedHashSet@1761}  size = 2\n@@ -245,0 +246,1 @@\n+https:\/\/datatracker.ietf.org\/doc\/html\/rfc5646\n@@ -264,3 +266,4 @@\n-https:\/\/docs.oracle.com\/en\/java\/javase\/24\/docs\/api\/java.base\/java\/lang\/String.html\n-https:\/\/docs.oracle.com\/en\/java\/javase\/24\/docs\/specs\/javadoc\/javadoc-search-spec.html\n-https:\/\/docs.oracle.com\/en\/java\/javase\/24\/docs\/specs\/man\/javadoc.html\n+https:\/\/docs.oracle.com\/en\/java\/javase\/24\/docs\/specs\/man\/java.html\n+https:\/\/docs.oracle.com\/en\/java\/javase\/25\/docs\/api\/java.base\/java\/lang\/String.html\n+https:\/\/docs.oracle.com\/en\/java\/javase\/25\/docs\/specs\/javadoc\/javadoc-search-spec.html\n+https:\/\/docs.oracle.com\/en\/java\/javase\/25\/docs\/specs\/man\/javadoc.html\n@@ -313,1 +316,0 @@\n-https:\/\/docs.oracle.com\/javase\/specs\/jls\/se24\/html\/\n@@ -315,14 +317,0 @@\n-https:\/\/docs.oracle.com\/javase\/specs\/jls\/se24\/html\/jls-10.html\n-https:\/\/docs.oracle.com\/javase\/specs\/jls\/se24\/html\/jls-11.html\n-https:\/\/docs.oracle.com\/javase\/specs\/jls\/se24\/html\/jls-12.html\n-https:\/\/docs.oracle.com\/javase\/specs\/jls\/se24\/html\/jls-13.html\n-https:\/\/docs.oracle.com\/javase\/specs\/jls\/se24\/html\/jls-14.html\n-https:\/\/docs.oracle.com\/javase\/specs\/jls\/se24\/html\/jls-15.html\n-https:\/\/docs.oracle.com\/javase\/specs\/jls\/se24\/html\/jls-17.html\n-https:\/\/docs.oracle.com\/javase\/specs\/jls\/se24\/html\/jls-18.html\n-https:\/\/docs.oracle.com\/javase\/specs\/jls\/se24\/html\/jls-3.html\n-https:\/\/docs.oracle.com\/javase\/specs\/jls\/se24\/html\/jls-4.html\n-https:\/\/docs.oracle.com\/javase\/specs\/jls\/se24\/html\/jls-5.html\n-https:\/\/docs.oracle.com\/javase\/specs\/jls\/se24\/html\/jls-6.html\n-https:\/\/docs.oracle.com\/javase\/specs\/jls\/se24\/html\/jls-7.html\n-https:\/\/docs.oracle.com\/javase\/specs\/jls\/se24\/html\/jls-8.html\n@@ -330,1 +318,18 @@\n-https:\/\/docs.oracle.com\/javase\/specs\/jls\/se24\/jls24.pdf\n+https:\/\/docs.oracle.com\/javase\/specs\/jls\/se25\/html\/\n+https:\/\/docs.oracle.com\/javase\/specs\/jls\/se25\/html\/index.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jls\/se25\/html\/jls-10.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jls\/se25\/html\/jls-11.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jls\/se25\/html\/jls-12.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jls\/se25\/html\/jls-13.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jls\/se25\/html\/jls-14.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jls\/se25\/html\/jls-15.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jls\/se25\/html\/jls-17.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jls\/se25\/html\/jls-18.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jls\/se25\/html\/jls-3.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jls\/se25\/html\/jls-4.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jls\/se25\/html\/jls-5.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jls\/se25\/html\/jls-6.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jls\/se25\/html\/jls-7.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jls\/se25\/html\/jls-8.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jls\/se25\/html\/jls-9.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jls\/se25\/jls25.pdf\n@@ -351,1 +356,0 @@\n-https:\/\/docs.oracle.com\/javase\/specs\/jvms\/se24\/html\/\n@@ -353,3 +357,0 @@\n-https:\/\/docs.oracle.com\/javase\/specs\/jvms\/se24\/html\/jvms-1.html\n-https:\/\/docs.oracle.com\/javase\/specs\/jvms\/se24\/html\/jvms-2.html\n-https:\/\/docs.oracle.com\/javase\/specs\/jvms\/se24\/html\/jvms-3.html\n@@ -357,3 +358,8 @@\n-https:\/\/docs.oracle.com\/javase\/specs\/jvms\/se24\/html\/jvms-5.html\n-https:\/\/docs.oracle.com\/javase\/specs\/jvms\/se24\/html\/jvms-6.html\n-https:\/\/docs.oracle.com\/javase\/specs\/jvms\/se24\/jvms24.pdf\n+https:\/\/docs.oracle.com\/javase\/specs\/jvms\/se25\/html\/index.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jvms\/se25\/html\/jvms-1.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jvms\/se25\/html\/jvms-2.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jvms\/se25\/html\/jvms-3.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jvms\/se25\/html\/jvms-4.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jvms\/se25\/html\/jvms-5.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jvms\/se25\/html\/jvms-6.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jvms\/se25\/jvms25.pdf\n@@ -427,22 +433,22 @@\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase24&id=GUID-FE2D2E28-C991-4EF9-9DBE-2A4982726313\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase24&id=homepage\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase24&id=i18n_overview\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase24&id=imf_overview\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase24&id=jndi_ldap_gl_prop\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase24&id=jndi_overview\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase24&id=logging_overview\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase24&id=monitoring_and_management_using_jmx_technology\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase24&id=rmi_guide\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase24&id=secure_coding_guidelines_javase\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase24&id=security_guide_impl_provider\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase24&id=security_guide_jca\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase24&id=security_guide_jca_provider\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase24&id=security_guide_jdk_providers\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase24&id=security_guide_jgss_tutorial\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase24&id=security_guide_overview\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase24&id=security_guide_pki\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase24&id=security_guide_sasl\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase24&id=security_guide_tools\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase24&id=serialization_filter_guide\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase24&id=serialver_tool_reference\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase24&id=using_jconsole\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=GUID-FE2D2E28-C991-4EF9-9DBE-2A4982726313\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=homepage\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=i18n_overview\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=imf_overview\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=jndi_ldap_gl_prop\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=jndi_overview\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=logging_overview\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=monitoring_and_management_using_jmx_technology\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=rmi_guide\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=secure_coding_guidelines_javase\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=security_guide_impl_provider\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=security_guide_jca\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=security_guide_jca_provider\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=security_guide_jdk_providers\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=security_guide_jgss_tutorial\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=security_guide_overview\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=security_guide_pki\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=security_guide_sasl\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=security_guide_tools\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=serialization_filter_guide\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=serialver_tool_reference\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=using_jconsole\n@@ -450,0 +456,1 @@\n+https:\/\/ftp.pwg.org\/pub\/pwg\/standards\/temp_archive\/pwg5100.3.pdf\n@@ -605,0 +612,1 @@\n+https:\/\/www.iana.org\/assignments\/language-subtag-registry\/language-subtag-registry\n@@ -620,1 +628,1 @@\n-https:\/\/www.oracle.com\/java\/javase\/terms\/license\/java24speclicense.html\n+https:\/\/www.oracle.com\/java\/javase\/terms\/license\/java25speclicense.html\n","filename":"test\/docs\/jdk\/javadoc\/doccheck\/ExtLinksJdk.txt","additions":59,"deletions":51,"binary":false,"changes":110,"previous_filename":"test\/docs\/jdk\/javadoc\/doccheck\/Ext-Links-JDK.txt","status":"renamed"},{"patch":"@@ -0,0 +1,37 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8337109\n+ * @summary Check external links in the generated documentation\n+ * @library \/test\/langtools\/tools\/lib ..\/..\/doccheck \/test\/lib ..\/..\/..\/..\/tools\/tester\n+ * @build DocTester toolbox.TestRunner\n+ * @run main\/othervm -Ddoccheck.checks=extlinks DocCheck\n+ *\/\n+\n+\n+public class jdkCheckExtlinks\n+{\n+void main(){};\n+}\n","filename":"test\/docs\/jdk\/javadoc\/doccheck\/checks\/jdkCheckExtlinks.java","additions":37,"deletions":0,"binary":false,"changes":37,"status":"added"},{"patch":"@@ -0,0 +1,31 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8337109\n+ * @summary Check the html in the generated documentation\n+ * @library \/test\/langtools\/tools\/lib ..\/..\/doccheck \/test\/lib ..\/..\/..\/..\/tools\/tester\n+ * @build DocTester toolbox.TestRunner\n+ * @run main\/othervm -Ddoccheck.checks=html DocCheck\n+ *\/\n","filename":"test\/docs\/jdk\/javadoc\/doccheck\/checks\/jdkCheckHtml.java","additions":31,"deletions":0,"binary":false,"changes":31,"status":"added"},{"patch":"@@ -0,0 +1,31 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8337109\n+ * @summary Check Links in the generated documentation\n+ * @library \/test\/langtools\/tools\/lib ..\/..\/doccheck \/test\/lib ..\/..\/..\/..\/tools\/tester\n+ * @build DocTester toolbox.TestRunner\n+ * @run main\/othervm -Ddoccheck.checks=links DocCheck\n+ *\/\n","filename":"test\/docs\/jdk\/javadoc\/doccheck\/checks\/jdkCheckLinks.java","additions":31,"deletions":0,"binary":false,"changes":31,"status":"added"},{"patch":"@@ -0,0 +1,31 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8337109\n+ * @summary Check doctype and character encoding in the generated documentation\n+ * @library \/test\/langtools\/tools\/lib ..\/..\/doccheck \/test\/lib ..\/..\/..\/..\/tools\/tester\n+ * @build DocTester toolbox.TestRunner\n+ * @run main\/othervm -Ddoccheck.checks=doctype,badchars DocCheck\n+ *\/\n","filename":"test\/docs\/jdk\/javadoc\/doccheck\/checks\/jdkDoctypeBadcharsCheck.java","additions":31,"deletions":0,"binary":false,"changes":31,"status":"added"},{"patch":"@@ -0,0 +1,193 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package doccheckutils.checkers;\n+\n+\n+import doccheckutils.HtmlChecker;\n+import doccheckutils.Log;\n+\n+import java.io.IOException;\n+import java.net.URI;\n+import java.net.URISyntaxException;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.util.*;\n+import java.util.stream.Collectors;\n+\n+\/**\n+ * Checks the external links referenced in HTML files.\n+ *\/\n+public class ExtLinkChecker implements HtmlChecker, AutoCloseable {\n+    private static final Path testBasePath = Path.of(System.getProperty(\"test.src\"));\n+    private static final Set<String> extLinks = new HashSet<>();\n+\n+    static {\n+        String input = null;\n+        try {\n+            input = Files.readString(testBasePath.getParent().resolve(\"ExtLinksJdk.txt\"));\n+        } catch (IOException e) {\n+            throw new RuntimeException(e);\n+        }\n+        extLinks.addAll(input.lines().collect(Collectors.toUnmodifiableSet()));\n+    }\n+\n+    private final Log log;\n+    private final Map<URI, Set<Path>> allURIs;\n+    private int badURIs;\n+    private Path currFile;\n+\n+    public ExtLinkChecker() {\n+        this.log = new Log();\n+        allURIs = new TreeMap<>();\n+    }\n+\n+    @Override\n+    public void startFile(Path path) {\n+        currFile = path.toAbsolutePath().normalize();\n+    }\n+\n+    @Override\n+    public void endFile() {\n+    }\n+\n+    @Override\n+    public void xml(int line, Map<String, String> attrs) {\n+    }\n+\n+    @Override\n+    public void docType(int line, String doctype) {\n+    }\n+\n+    @Override\n+    @SuppressWarnings(\"fallthrough\")\n+    public void startElement(int line, String name, Map<String, String> attrs, boolean selfClosing) {\n+        switch (name) {\n+            case \"a\":\n+            case \"link\":\n+                String href = attrs.get(\"href\");\n+                if (href != null) {\n+                    foundReference(line, href);\n+                }\n+                break;\n+        }\n+    }\n+\n+    @Override\n+    public void endElement(int line, String name) {\n+    }\n+\n+    private void foundReference(int line, String ref) {\n+        try {\n+            URI uri = new URI(ref);\n+            if (uri.isAbsolute()) {\n+                if (Objects.equals(uri.getScheme(), \"javascript\")) {\n+                    \/\/ ignore JavaScript URIs\n+                    return;\n+                }\n+                String fragment = uri.getRawFragment();\n+                URI noFrag = new URI(uri.toString().replaceAll(\"#\\\\Q\" + fragment + \"\\\\E$\", \"\"));\n+                allURIs.computeIfAbsent(noFrag, _ -> new LinkedHashSet<>()).add(currFile);\n+            }\n+        } catch (URISyntaxException e) {\n+            log.log(currFile, line, \"invalid URI: \" + e);\n+        }\n+    }\n+\n+    @Override\n+    public void report() {\n+        checkURIs();\n+    }\n+\n+    @Override\n+    public boolean isOK() {\n+        return badURIs == 0;\n+    }\n+\n+    @Override\n+    public void close() throws IOException {\n+        report();\n+    }\n+\n+    private void checkURIs() {\n+        System.err.println(\"ExtLinkChecker: checking external links\");\n+        allURIs.forEach(this::checkURI);\n+        System.err.println(\"ExtLinkChecker: finished checking external links\");\n+    }\n+\n+    private void checkURI(URI uri, Set<Path> files) {\n+        try {\n+            switch (uri.getScheme()) {\n+                case \"ftp\":\n+                case \"http\":\n+                case \"https\":\n+                  isVettedLink(uri, files);\n+                    break;\n+                default:\n+                    warning(files, uri);\n+            }\n+        } catch (Throwable t) {\n+            badURIs++;\n+            error(files, uri, t);\n+        }\n+    }\n+\n+    private void isVettedLink(URI uri, Set<Path> files) {\n+        if (!uri.toString().contains(\"docs.oracle.com\/\") && !extLinks.contains(uri.toString())) {\n+            System.err.println(\"The external link \" + uri + \"\\n\" + \"needs to be added to the whitelist \" +\n+                    \"test\/docs\/jdk\/javadoc\/doccheck\/ExtLinksJdk.txt in order to be checked regularly \");\n+            System.err.println(\"The link is present in:\");\n+            files.forEach(System.err::println);\n+        }\n+    }\n+\n+    private void warning(Set<Path> files, Object... args) {\n+        Iterator<Path> iter = files.iterator();\n+        Path first = iter.next();\n+        log.log(String.valueOf(first), \"URI not supported: %s\", args);\n+        reportAlsoFoundIn(iter);\n+    }\n+\n+    private void error(Set<Path> files, Object... args) {\n+        Iterator<Path> iter = files.iterator();\n+        Path first = iter.next();\n+        log.log(String.valueOf(first), \"Exception accessing uri: %s%n    [%s]\", args);\n+        reportAlsoFoundIn(iter);\n+    }\n+\n+    private void reportAlsoFoundIn(Iterator<Path> iter) {\n+        int MAX_EXTRA = 10;\n+        int n = 0;\n+        while (iter.hasNext()) {\n+            log.log(\"    Also found in %s\", log.againstBaseDir(iter.next()));\n+            if (n++ == MAX_EXTRA) {\n+                int rest = 0;\n+                while (iter.hasNext()) {\n+                    iter.next();\n+                    rest++;\n+                }\n+                log.log(\"    ... and %d more\", rest);\n+            }\n+        }\n+    }\n+}\n","filename":"test\/docs\/jdk\/javadoc\/doccheck\/doccheckutils\/checkers\/ExtLinkChecker.java","additions":193,"deletions":0,"binary":false,"changes":193,"status":"added"},{"patch":"@@ -185,5 +185,5 @@\n-        if (hostCounts.size() > 0) {\n-            log.log(\"\");\n-            log.log(\"Hosts\");\n-            hostCounts.forEach((h, n) -> log.log(\"%6d %s\", n, h));\n-        }\n+\/\/        if (hostCounts.size() > 0) {\n+\/\/            log.log(\"\");\n+\/\/            log.log(\"Hosts\");\n+\/\/            hostCounts.forEach((h, n) -> log.log(\"%6d %s\", n, h));\n+\/\/        }\n","filename":"test\/docs\/jdk\/javadoc\/doccheck\/doccheckutils\/checkers\/LinkChecker.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -1,31 +0,0 @@\n-\/*\n- * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-\n-\/*\n- * @test\n- * @bug 8337109\n- * @summary Check doctype and character encoding on the full docs\n- * @library \/test\/langtools\/tools\/lib ..\/..\/doccheck \/test\/lib ..\/..\/..\/..\/tools\/tester\n- * @build DocTester toolbox.TestRunner\n- * @run main\/othervm -Ddoccheck.dir= -Ddoccheck.checks=doctype,badchars DocCheck\n- *\/\n","filename":"test\/docs\/jdk\/javadoc\/doccheck\/modules\/fullAPICheck.java","additions":0,"deletions":31,"binary":false,"changes":31,"status":"deleted"},{"patch":"@@ -1,31 +0,0 @@\n-\/*\n- * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-\n-\/*\n- * @test\n- * @bug 8337109\n- * @summary Running Doccheck on generated HTML\n- * @library \/test\/langtools\/tools\/lib ..\/..\/doccheck \/test\/lib ..\/..\/..\/..\/tools\/tester\n- * @build DocTester toolbox.TestRunner\n- * @run main\/othervm -Ddoccheck.dir=api\/java.base -Ddoccheck.checks=links,html,badchars,doctype DocCheck\n- *\/\n","filename":"test\/docs\/jdk\/javadoc\/doccheck\/modules\/jdkJavadocCheckDocs.java","additions":0,"deletions":31,"binary":false,"changes":31,"status":"deleted"}]}