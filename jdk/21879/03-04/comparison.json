{"files":[{"patch":"@@ -0,0 +1,11 @@\n+# This file is used to check external links in the JDK generated documentation\n+# to prevent broken links from backsliding into the JDK source.\n+#\n+# The file serves as a \"whitelist\" of links that have been checked to be working as intended\n+# and JDK developers should add external links to this file whenever they add them to their documentation.\n+#\n+#\n+# The links in this file are checked before every release.\n+#\n+#\n+#\n@@ -6,1 +17,1 @@\n-http:\/\/docs.oracle.com\/javase\/specs\/jls\/se25\/html\/jls-12.html\n+http:\/\/docs.oracle.com\/javase\/specs\/jls\/se@@JAVASE_VERSION@@\/html\/jls-12.html\n@@ -101,2 +112,0 @@\n- key = http:\/\/www.ietf.org\/rfc\/rfc3720.txt\"\n- value = {LinkedHashSet@1761}  size = 2\n@@ -267,3 +276,3 @@\n-https:\/\/docs.oracle.com\/en\/java\/javase\/25\/docs\/api\/java.base\/java\/lang\/String.html\n-https:\/\/docs.oracle.com\/en\/java\/javase\/25\/docs\/specs\/javadoc\/javadoc-search-spec.html\n-https:\/\/docs.oracle.com\/en\/java\/javase\/25\/docs\/specs\/man\/javadoc.html\n+https:\/\/docs.oracle.com\/en\/java\/javase\/@@JAVASE_VERSION@@\/docs\/api\/java.base\/java\/lang\/String.html\n+https:\/\/docs.oracle.com\/en\/java\/javase\/@@JAVASE_VERSION@@\/docs\/specs\/javadoc\/javadoc-search-spec.html\n+https:\/\/docs.oracle.com\/en\/java\/javase\/@@JAVASE_VERSION@@\/docs\/specs\/man\/javadoc.html\n@@ -318,18 +327,18 @@\n-https:\/\/docs.oracle.com\/javase\/specs\/jls\/se25\/html\/\n-https:\/\/docs.oracle.com\/javase\/specs\/jls\/se25\/html\/index.html\n-https:\/\/docs.oracle.com\/javase\/specs\/jls\/se25\/html\/jls-10.html\n-https:\/\/docs.oracle.com\/javase\/specs\/jls\/se25\/html\/jls-11.html\n-https:\/\/docs.oracle.com\/javase\/specs\/jls\/se25\/html\/jls-12.html\n-https:\/\/docs.oracle.com\/javase\/specs\/jls\/se25\/html\/jls-13.html\n-https:\/\/docs.oracle.com\/javase\/specs\/jls\/se25\/html\/jls-14.html\n-https:\/\/docs.oracle.com\/javase\/specs\/jls\/se25\/html\/jls-15.html\n-https:\/\/docs.oracle.com\/javase\/specs\/jls\/se25\/html\/jls-17.html\n-https:\/\/docs.oracle.com\/javase\/specs\/jls\/se25\/html\/jls-18.html\n-https:\/\/docs.oracle.com\/javase\/specs\/jls\/se25\/html\/jls-3.html\n-https:\/\/docs.oracle.com\/javase\/specs\/jls\/se25\/html\/jls-4.html\n-https:\/\/docs.oracle.com\/javase\/specs\/jls\/se25\/html\/jls-5.html\n-https:\/\/docs.oracle.com\/javase\/specs\/jls\/se25\/html\/jls-6.html\n-https:\/\/docs.oracle.com\/javase\/specs\/jls\/se25\/html\/jls-7.html\n-https:\/\/docs.oracle.com\/javase\/specs\/jls\/se25\/html\/jls-8.html\n-https:\/\/docs.oracle.com\/javase\/specs\/jls\/se25\/html\/jls-9.html\n-https:\/\/docs.oracle.com\/javase\/specs\/jls\/se25\/jls25.pdf\n+https:\/\/docs.oracle.com\/javase\/specs\/jls\/se@@JAVASE_VERSION@@\/html\/\n+https:\/\/docs.oracle.com\/javase\/specs\/jls\/se@@JAVASE_VERSION@@\/html\/index.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jls\/se@@JAVASE_VERSION@@\/html\/jls-10.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jls\/se@@JAVASE_VERSION@@\/html\/jls-11.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jls\/se@@JAVASE_VERSION@@\/html\/jls-12.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jls\/se@@JAVASE_VERSION@@\/html\/jls-13.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jls\/se@@JAVASE_VERSION@@\/html\/jls-14.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jls\/se@@JAVASE_VERSION@@\/html\/jls-15.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jls\/se@@JAVASE_VERSION@@\/html\/jls-17.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jls\/se@@JAVASE_VERSION@@\/html\/jls-18.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jls\/se@@JAVASE_VERSION@@\/html\/jls-3.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jls\/se@@JAVASE_VERSION@@\/html\/jls-4.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jls\/se@@JAVASE_VERSION@@\/html\/jls-5.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jls\/se@@JAVASE_VERSION@@\/html\/jls-6.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jls\/se@@JAVASE_VERSION@@\/html\/jls-7.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jls\/se@@JAVASE_VERSION@@\/html\/jls-8.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jls\/se@@JAVASE_VERSION@@\/html\/jls-9.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jls\/se@@JAVASE_VERSION@@\/jls@@JAVASE_VERSION@@.pdf\n@@ -358,8 +367,8 @@\n-https:\/\/docs.oracle.com\/javase\/specs\/jvms\/se25\/html\/index.html\n-https:\/\/docs.oracle.com\/javase\/specs\/jvms\/se25\/html\/jvms-1.html\n-https:\/\/docs.oracle.com\/javase\/specs\/jvms\/se25\/html\/jvms-2.html\n-https:\/\/docs.oracle.com\/javase\/specs\/jvms\/se25\/html\/jvms-3.html\n-https:\/\/docs.oracle.com\/javase\/specs\/jvms\/se25\/html\/jvms-4.html\n-https:\/\/docs.oracle.com\/javase\/specs\/jvms\/se25\/html\/jvms-5.html\n-https:\/\/docs.oracle.com\/javase\/specs\/jvms\/se25\/html\/jvms-6.html\n-https:\/\/docs.oracle.com\/javase\/specs\/jvms\/se25\/jvms25.pdf\n+https:\/\/docs.oracle.com\/javase\/specs\/jvms\/se@@JAVASE_VERSION@@\/html\/index.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jvms\/se@@JAVASE_VERSION@@\/html\/jvms-1.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jvms\/se@@JAVASE_VERSION@@\/html\/jvms-2.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jvms\/se@@JAVASE_VERSION@@\/html\/jvms-3.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jvms\/se@@JAVASE_VERSION@@\/html\/jvms-4.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jvms\/se@@JAVASE_VERSION@@\/html\/jvms-5.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jvms\/se@@JAVASE_VERSION@@\/html\/jvms-6.html\n+https:\/\/docs.oracle.com\/javase\/specs\/jvms\/se@@JAVASE_VERSION@@\/jvms@@JAVASE_VERSION@@.pdf\n@@ -433,22 +442,22 @@\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=GUID-FE2D2E28-C991-4EF9-9DBE-2A4982726313\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=homepage\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=i18n_overview\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=imf_overview\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=jndi_ldap_gl_prop\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=jndi_overview\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=logging_overview\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=monitoring_and_management_using_jmx_technology\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=rmi_guide\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=secure_coding_guidelines_javase\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=security_guide_impl_provider\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=security_guide_jca\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=security_guide_jca_provider\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=security_guide_jdk_providers\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=security_guide_jgss_tutorial\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=security_guide_overview\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=security_guide_pki\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=security_guide_sasl\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=security_guide_tools\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=serialization_filter_guide\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=serialver_tool_reference\n-https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase25&id=using_jconsole\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase@@JAVASE_VERSION@@&id=GUID-FE2D2E28-C991-4EF9-9DBE-2A4982726313\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase@@JAVASE_VERSION@@&id=homepage\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase@@JAVASE_VERSION@@&id=i18n_overview\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase@@JAVASE_VERSION@@&id=imf_overview\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase@@JAVASE_VERSION@@&id=jndi_ldap_gl_prop\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase@@JAVASE_VERSION@@&id=jndi_overview\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase@@JAVASE_VERSION@@&id=logging_overview\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase@@JAVASE_VERSION@@&id=monitoring_and_management_using_jmx_technology\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase@@JAVASE_VERSION@@&id=rmi_guide\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase@@JAVASE_VERSION@@&id=secure_coding_guidelines_javase\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase@@JAVASE_VERSION@@&id=security_guide_impl_provider\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase@@JAVASE_VERSION@@&id=security_guide_jca\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase@@JAVASE_VERSION@@&id=security_guide_jca_provider\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase@@JAVASE_VERSION@@&id=security_guide_jdk_providers\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase@@JAVASE_VERSION@@&id=security_guide_jgss_tutorial\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase@@JAVASE_VERSION@@&id=security_guide_overview\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase@@JAVASE_VERSION@@&id=security_guide_pki\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase@@JAVASE_VERSION@@&id=security_guide_sasl\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase@@JAVASE_VERSION@@&id=security_guide_tools\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase@@JAVASE_VERSION@@&id=serialization_filter_guide\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase@@JAVASE_VERSION@@&id=serialver_tool_reference\n+https:\/\/docs.oracle.com\/pls\/topic\/lookup?ctx=javase@@JAVASE_VERSION@@&id=using_jconsole\n@@ -628,1 +637,1 @@\n-https:\/\/www.oracle.com\/java\/javase\/terms\/license\/java25speclicense.html\n+https:\/\/www.oracle.com\/java\/javase\/terms\/license\/java@@JAVASE_VERSION@@speclicense.html\n","filename":"test\/docs\/jdk\/javadoc\/doccheck\/ExtLinksJdk.txt","additions":64,"deletions":55,"binary":false,"changes":119,"status":"modified"},{"patch":"@@ -32,6 +32,0 @@\n-\n-\n-public class jdkCheckExtlinks\n-{\n-void main(){};\n-}\n","filename":"test\/docs\/jdk\/javadoc\/doccheck\/checks\/jdkCheckExtlinks.java","additions":0,"deletions":6,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -35,0 +35,1 @@\n+import java.text.MessageFormat;\n@@ -52,1 +53,4 @@\n-        extLinks.addAll(input.lines().collect(Collectors.toUnmodifiableSet()));\n+        extLinks.addAll(input.lines()\n+                .map(line -> line.replaceAll(\"\\\\@\\\\@JAVASE_VERSION\\\\@\\\\@\", String.valueOf(Runtime.version().feature())))\n+                .filter(line -> !line.startsWith(\"#\"))\n+                .collect(Collectors.toUnmodifiableSet()));\n@@ -102,1 +106,21 @@\n-            URI uri = new URI(ref);\n+            String uriPath = ref;\n+            String fragment = null;\n+\n+            \/\/ The checker runs into a problem with links that have more than one hash character.\n+            \/\/ You cannot create a URI unless you convert the second hash character into\n+\n+            int firstHashIndex = ref.indexOf('#');\n+            int lastHashIndex = ref.lastIndexOf('#');\n+            if (firstHashIndex != -1 && firstHashIndex != lastHashIndex) {\n+                uriPath = ref.substring(0, firstHashIndex);\n+                fragment = ref.substring(firstHashIndex + 1).replace(\"#\", \"%23\");\n+            } else if (firstHashIndex != -1) {\n+                uriPath = ref.substring(0, firstHashIndex);\n+                fragment = ref.substring(firstHashIndex + 1);\n+            }\n+\n+            URI uri = new URI(uriPath);\n+            if (fragment != null) {\n+                uri = new URI(uri + \"#\" + fragment);\n+            }\n+\n@@ -108,2 +132,2 @@\n-                String fragment = uri.getRawFragment();\n-                URI noFrag = new URI(uri.toString().replaceAll(\"#\\\\Q\" + fragment + \"\\\\E$\", \"\"));\n+                String rawFragment = uri.getRawFragment();\n+                URI noFrag = new URI(uri.toString().replaceAll(\"#\\\\Q\" + rawFragment + \"\\\\E$\", \"\"));\n@@ -156,5 +180,7 @@\n-        if (!uri.toString().contains(\"docs.oracle.com\/\") && !extLinks.contains(uri.toString())) {\n-            System.err.println(\"The external link \" + uri + \"\\n\" + \"needs to be added to the whitelist \" +\n-                    \"test\/docs\/jdk\/javadoc\/doccheck\/ExtLinksJdk.txt in order to be checked regularly \");\n-            System.err.println(\"The link is present in:\");\n-            files.forEach(System.err::println);\n+        if (!extLinks.contains(uri.toString())) {\n+            System.err.println(MessageFormat.format(\"\"\"\n+                    The external link {0} needs to be added to the whitelist test\/docs\/jdk\/javadoc\/doccheck\/ExtLinksJdk.txt in order to be checked regularly\\s\n+                    The link is present in:\n+                        {1}\n+                                        \n+                    \"\"\", uri, files.stream().map(Path::toString).collect(Collectors.joining(\"\\n    \"))));\n","filename":"test\/docs\/jdk\/javadoc\/doccheck\/doccheckutils\/checkers\/ExtLinkChecker.java","additions":35,"deletions":9,"binary":false,"changes":44,"status":"modified"},{"patch":"@@ -284,1 +284,0 @@\n-            log.log(currFile, line, \"invalid URI: \" + e);\n@@ -286,0 +285,1 @@\n+            log.log(currFile, line, \"invalid URI: \" + e);\n","filename":"test\/docs\/jdk\/javadoc\/doccheck\/doccheckutils\/checkers\/LinkChecker.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}