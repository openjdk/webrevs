{"files":[{"patch":"@@ -1,29 +0,0 @@\n-!--\n- Copyright (c) 2007, Oracle and\/or its affiliates. All rights reserved.\n- DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n-\n- This code is free software; you can redistribute it and\/or modify it\n- under the terms of the GNU General Public License version 2 only, as\n- published by the Free Software Foundation.\n-\n- This code is distributed in the hope that it will be useful, but WITHOUT\n- ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- version 2 for more details (a copy is included in the LICENSE file that\n- accompanied this code).\n-\n- You should have received a copy of the GNU General Public License version\n- 2 along with this work; if not, write to the Free Software Foundation,\n- Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n-\n- Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- or visit www.oracle.com if you need additional information or have any\n- questions.\n--->\n-\n-<title>PrintApplet<\/title>\n-<h1>PrintApplet<\/h1>\n-\n-\n-<applet code=\"PrintApplet.class\" width=300 height=300>\n-<\/applet><p>\n","filename":"test\/jdk\/java\/awt\/print\/Dialog\/PrintApplet.html","additions":0,"deletions":29,"binary":false,"changes":29,"status":"deleted"},{"patch":"@@ -1,142 +0,0 @@\n-\/*\n- * Copyright (c) 2007, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-\n-\/*\n-  @test\n-  @bug 5024549\n-  @key printer\n-  @summary   Pass if dialogs are modal.\n-  @run applet\/manual PrintApplet.html\n-*\/\n-import java.awt.*;\n-import java.awt.event.*;\n-import java.applet.*;\n-import java.awt.print.*;\n-import javax.swing.*;\n-\n-public class PrintApplet extends JApplet implements Printable {\n-    private JButton jButton1 = new JButton();\n-\n-\n-    public PrintApplet() {\n-    }\n-\n-    public void init() {\n-        try {\n-            jbInit();\n-        }\n-        catch(Exception e) {\n-            e.printStackTrace();\n-        }\n-    }\n-\n-    private void jbInit() throws Exception {\n-        jButton1.setText(\"PRINT\");\n-        jButton1.addActionListener(new java.awt.event.ActionListener() {\n-            public void actionPerformed(ActionEvent e) {\n-                jButton1_actionPerformed(e);\n-            }\n-        });\n-        jButton1.setBounds(new Rectangle(165, 248, 80, 30));\n-        this.setSize(new Dimension(400,300));\n-        this.getContentPane().setLayout(null);\n-        this.getContentPane().setBackground(Color.pink);\n-        this.getContentPane().add(jButton1, BorderLayout.SOUTH);\n-    }\n-\n-    public void start() {\n-    }\n-\n-    public void stop() {\n-    }\n-\n-    public void destroy() {\n-    }\n-\n-    public String getAppletInfo() {\n-        return \"Applet inf\";\n-    }\n-\n-    public String[][] getParameterInfo() {\n-        return null;\n-    }\n-\n-\n-   public int print(Graphics g, PageFormat pf, int page) throws PrinterException {\n-       System.out.println(\"Calling print\");\n-       if (page == 0) {\n-           Graphics2D g2 = (Graphics2D)g;\n-           g2.translate(pf.getImageableX(), pf.getImageableY());\n-           g2.setColor(Color.black);\n-           g2.drawString(\"Hello World\", 20, 100);\n-\n-           return Printable.PAGE_EXISTS;\n-       }\n-       return Printable.NO_SUCH_PAGE;\n-   }\n-\n-\n-\n-    void jButton1_actionPerformed(ActionEvent e) {\n-      PrinterJob printJob = null;\n-      PageFormat pageFormat = null;\n-      Paper prtPaper = null;\n-      boolean bPrintFlg = true;\n-\n-\n-      try{\n-         printJob = PrinterJob.getPrinterJob();\n-\n-      }\n-      catch(SecurityException se){\n-\n-         bPrintFlg = false;\n-      }\n-\n-      if (bPrintFlg) {\n-\n-         pageFormat = printJob.pageDialog(printJob.defaultPage());\n-         System.out.println(\"PrintApplet: pageFormat = \"+pageFormat.getWidth()\/72.0+\" x \"+pageFormat.getHeight()\/72.0);\n-         if (pageFormat != null) {\n-\n-            prtPaper = pageFormat.getPaper();\n-            pageFormat.setPaper(prtPaper);\n-\n-\n-            printJob.setPrintable(this, pageFormat);\n-         }\n-\n-         if (printJob.printDialog()) {\n-\n-             try {\n-                 printJob.print();\n-             }\n-             catch (java.awt.print.PrinterException ex) {\n-                 ex.printStackTrace();\n-             }\n-\n-         }\n-\n-      }\n-    }\n-}\n","filename":"test\/jdk\/java\/awt\/print\/Dialog\/PrintApplet.java","additions":0,"deletions":142,"binary":false,"changes":142,"status":"deleted"},{"patch":"@@ -0,0 +1,127 @@\n+\/*\n+ * Copyright (c) 2007, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.awt.Color;\n+import java.awt.Graphics2D;\n+import java.awt.event.ActionEvent;\n+import java.awt.print.PageFormat;\n+import java.awt.print.Paper;\n+import java.awt.print.Printable;\n+import java.awt.print.PrinterJob;\n+\n+import javax.swing.JButton;\n+\n+\/*\n+ * @test\n+ * @bug 5024549\n+ * @key printer\n+ * @library \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame\n+ * @summary Pass if dialogs are modal.\n+ * @run main\/manual PrintModalDialog\n+ *\/\n+\n+public class PrintModalDialog {\n+    private static JButton jButton1;\n+    private static final String INSTRUCTIONS =\n+            \"\"\"\n+             Click the \"PRINT\" button in the test window. A new dialog\n+             should appear to print the page. Test if this print new dialog\n+             is actually modal.\n+\n+             Modal in this case means that it blocks the user from interacting\n+             with other windows in the same application. You may still be able\n+             to interact with unrelated applications on the desktop.\n+             One sure way to test this is to first show the print dialog and\n+             then press \"Fail\", because if you can click on \"Fail\" and have it\n+             respond, then the print dialog was not modal. If clicking on it\n+             does nothing then cancel the print dialog and do the same for the\n+             other print dialog. If all is well, then press Pass.\n+            \"\"\";\n+\n+    public static void main(String[] args) throws Exception {\n+        PassFailJFrame\n+                .builder()\n+                .title(\"PrintModalDialog Instructions\")\n+                .instructions(INSTRUCTIONS)\n+                .rows(20)\n+                .columns(40)\n+                .splitUIBottom(PrintModalDialog::createAndShowGUI)\n+                .build()\n+                .awaitAndCheck();\n+    }\n+\n+    public static JButton createAndShowGUI() {\n+        jButton1 = new JButton(\"PRINT\");\n+        jButton1.addActionListener(e -> jButton1_actionPerformed(e));\n+        return jButton1;\n+    }\n+\n+    static void jButton1_actionPerformed(ActionEvent e) {\n+        PrinterJob printJob = null;\n+        PageFormat pageFormat = null;\n+        Paper prtPaper = null;\n+        boolean bPrintFlg = true;\n+\n+        try {\n+            printJob = PrinterJob.getPrinterJob();\n+        }\n+        catch (SecurityException se) {\n+            bPrintFlg = false;\n+        }\n+\n+        if (bPrintFlg) {\n+            pageFormat = printJob.pageDialog(printJob.defaultPage());\n+            System.out.println(\"PrintModalDialog: pageFormat = \" +\n+                    pageFormat.getWidth() \/ 72.0 + \" x \" +\n+                    pageFormat.getHeight() \/ 72.0);\n+            if (pageFormat != null) {\n+                prtPaper = pageFormat.getPaper();\n+                pageFormat.setPaper(prtPaper);\n+                printJob.setPrintable((g, pf, page) -> {\n+                    System.out.println(\"Calling print\");\n+                    if (page == 0) {\n+                        Graphics2D g2 = (Graphics2D)g;\n+                        g2.translate(pf.getImageableX(), pf.getImageableY());\n+                        g2.setColor(Color.black);\n+                        g2.drawString(\"Hello World\", 20, 100);\n+\n+                        return Printable.PAGE_EXISTS;\n+                    }\n+                    return Printable.NO_SUCH_PAGE;\n+                }, pageFormat);\n+            }\n+\n+            if (printJob.printDialog()) {\n+                try {\n+                    printJob.print();\n+                }\n+                catch (java.awt.print.PrinterException ex) {\n+                    ex.printStackTrace();\n+                    String msg = \"PrinterException: \" + ex.getMessage();\n+                    PassFailJFrame.forceFail(msg);\n+                }\n+            }\n+        }\n+    }\n+}\n","filename":"test\/jdk\/java\/awt\/print\/Dialog\/PrintModalDialog.java","additions":127,"deletions":0,"binary":false,"changes":127,"status":"added"}]}