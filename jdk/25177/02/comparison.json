{"files":[{"patch":"@@ -26,0 +26,4 @@\n+ *\n+ * If the VM does not have continuations, then no VTs can ever be scheduled\n+ * @requires vm.continuations\n+ *\n@@ -41,0 +45,1 @@\n+import java.util.concurrent.CountDownLatch;\n@@ -43,0 +48,1 @@\n+import java.util.concurrent.TimeUnit;\n@@ -81,1 +87,2 @@\n-        var quiescent = new Object();\n+        var quiescentLatch = new CountDownLatch(1);\n+\n@@ -96,6 +103,5 @@\n-                synchronized (quiescent) {\n-                    try {\n-                        quiescent.wait();\n-                    } catch (Throwable ex) {\n-                        throw new AssertionError(ex);\n-                    }\n+                \/\/ wait for ForkJoinPool to contract\n+                try {\n+                    quiescentLatch.await();\n+                } catch (Throwable ex) {\n+                    throw new AssertionError(ex);\n@@ -126,4 +132,1 @@\n-\n-        synchronized (quiescent) {\n-            quiescent.notify();\n-        }\n+        quiescentLatch.countDown(); \/\/ notify the thread that accesses the MemorySegment\n@@ -134,0 +137,1 @@\n+\n","filename":"test\/jdk\/java\/foreign\/TestBufferStackStress2.java","additions":15,"deletions":11,"binary":false,"changes":26,"status":"modified"}]}