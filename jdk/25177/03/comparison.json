{"files":[{"patch":"@@ -26,0 +26,4 @@\n+ *\n+ * @comment If the VM does not have continuations, then VTs will be scheduled on OS threads.\n+ * @requires vm.continuations\n+ *\n@@ -41,0 +45,1 @@\n+import java.util.concurrent.CountDownLatch;\n@@ -81,1 +86,2 @@\n-        var quiescent = new Object();\n+        var quiescentLatch = new CountDownLatch(1);\n+\n@@ -96,6 +102,5 @@\n-                synchronized (quiescent) {\n-                    try {\n-                        quiescent.wait();\n-                    } catch (Throwable ex) {\n-                        throw new AssertionError(ex);\n-                    }\n+                \/\/ wait for ForkJoinPool to contract\n+                try {\n+                    quiescentLatch.await();\n+                } catch (Throwable ex) {\n+                    throw new AssertionError(ex);\n@@ -126,4 +131,1 @@\n-\n-        synchronized (quiescent) {\n-            quiescent.notify();\n-        }\n+        quiescentLatch.countDown(); \/\/ notify the thread that accesses the MemorySegment\n@@ -134,0 +136,1 @@\n+\n","filename":"test\/jdk\/java\/foreign\/TestBufferStackStress2.java","additions":14,"deletions":11,"binary":false,"changes":25,"status":"modified"}]}