{"files":[{"patch":"@@ -1816,0 +1816,3 @@\n+            if (uiInputMap == null) {\n+                map.clear();\n+            }\n@@ -1818,3 +1821,0 @@\n-                if (uiInputMap == null) {\n-                    map.clear();\n-                }\n@@ -1843,0 +1843,3 @@\n+            if (uiActionMap == null) {\n+                map.clear();\n+            }\n@@ -1845,3 +1848,0 @@\n-                if (uiActionMap == null) {\n-                    map.clear();\n-                }\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/SwingUtilities.java","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -32,0 +32,1 @@\n+import java.awt.event.ActionEvent;\n@@ -33,0 +34,3 @@\n+import javax.swing.AbstractAction;\n+import javax.swing.Action;\n+import javax.swing.ActionMap;\n@@ -34,0 +38,1 @@\n+import javax.swing.InputMap;\n@@ -41,0 +46,1 @@\n+\n@@ -42,0 +48,3 @@\n+\n+        StringBuilder str = new StringBuilder();\n+\n@@ -56,4 +65,0 @@\n-        \/\/ Show the frame\n-        JFrame frame = new JFrame(\"UIMapTest\");\n-        frame.add(button);\n-\n@@ -62,2 +67,21 @@\n-            throw new RuntimeException(\"SwingUtilities.replaceUIInputMap \" +\n-                                       \"didn't remove previously installed map\");\n+            str.append(\"\\nSwingUtilities.replaceUIInputMap \" +\n+                       \"didn't remove previously installed input map\");\n+        }\n+\n+        \/\/ Get the InputMap for the button when it has focus\n+        InputMap inputMap = button.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW);\n+\n+        \/\/ Map the VK_ENTER key stroke to a specific action name\n+        inputMap.put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0), \"doEnterAction\");\n+        Action enterAction = new AbstractAction() {\n+            @Override\n+            public void actionPerformed(ActionEvent e) { }\n+        };\n+        button.getActionMap().put(\"doEnterAction\",  enterAction);\n+        SwingUtilities.replaceUIActionMap(button, null);\n+        if (button.getActionMap().size() != 0) {\n+            str.append(\"\\nSwingUtilities.replaceUIActionMap \" +\n+                       \"didn't remove previously installed action map\");\n+        }\n+        if (str.length() != 0) {\n+            throw new RuntimeException(str.toString());\n","filename":"test\/jdk\/javax\/swing\/SwingUtilities\/UIMapTest.java","additions":30,"deletions":6,"binary":false,"changes":36,"status":"modified"}]}