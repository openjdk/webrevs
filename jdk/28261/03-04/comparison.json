{"files":[{"patch":"@@ -3237,0 +3237,8 @@\n+  \/\/ It's important that we respect any user configuration by removing the\n+  \/\/ CPUs we're not allowed to run on from the affinity mask. For example,\n+  \/\/ if the user runs the JVM with \"numactl -C 0-1,4-5\" on a machine with\n+  \/\/ the following NUMA setup:\n+  \/\/ NUMA 0: CPUs 0-3, NUMA 1: CPUs 4-7\n+  \/\/ We expect to get the following affinity masks:\n+  \/\/ Affinity masks: idx 0 = (0, 1), idx 1 = (4, 5)\n+\n@@ -3242,0 +3250,2 @@\n+\n+    \/\/ Fill the affinity mask with all CPUs belonging to NUMA node i\n@@ -3244,7 +3254,2 @@\n-    \/\/ Make sure we respect any user configuration by removing the CPUs we're\n-    \/\/ not allowed to run on from the affinity mask. For example, if the user\n-    \/\/ runs the JVM with \"numactl -C 0-1,4-5\" on a machine with the following\n-    \/\/ NUMA setup:\n-    \/\/ NUMA 0: CPUs 0-3, NUMA 1: CPUs 4-7\n-    \/\/ We expect to get the following affinity masks:\n-    \/\/ Affinity masks: idx 0 = (0, 1), idx 1 = (4, 5)\n+    \/\/ Clear the bits of all CPUs that the process is not allowed to\n+    \/\/ execute tasks on\n@@ -3252,2 +3257,1 @@\n-      if (_numa_bitmask_isbitset(affinity_mask, j) &&\n-          !_numa_bitmask_isbitset(_numa_all_cpus_ptr, j)) {\n+      if (!_numa_bitmask_isbitset(_numa_all_cpus_ptr, j)) {\n","filename":"src\/hotspot\/os\/linux\/os_linux.cpp","additions":13,"deletions":9,"binary":false,"changes":22,"status":"modified"}]}