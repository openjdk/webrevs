{"files":[{"patch":"@@ -36,0 +36,1 @@\n+#include \"opto\/rootnode.hpp\"\n@@ -2556,2 +2557,1 @@\n-        igvn().register_new_node_with_optimizer(mask);\n-        phase()->set_ctrl(mask, phase()->get_ctrl(p->at(0)));\n+        phase()->register_new_node(mask, phase()->get_ctrl(p->at(0)));\n@@ -2631,2 +2631,1 @@\n-        igvn().register_new_node_with_optimizer(longval);\n-        phase()->set_ctrl(longval, phase()->get_ctrl(first));\n+        phase()->register_new_node(longval, phase()->get_ctrl(first));\n@@ -2672,2 +2671,1 @@\n-      igvn().register_new_node_with_optimizer(vn);\n-      phase()->set_ctrl(vn, phase()->get_ctrl(first));\n+      phase()->register_new_node(vn, phase()->get_ctrl(first));\n@@ -2742,2 +2740,1 @@\n-    igvn().register_new_node_with_optimizer(vn);\n-    phase()->set_ctrl(vn, phase()->get_ctrl(opd));\n+    phase()->register_new_node(vn, phase()->get_ctrl(opd));\n@@ -2763,2 +2760,2 @@\n-          cnt = ConNode::make(TypeInt::make(shift & mask));\n-          igvn().register_new_node_with_optimizer(cnt);\n+          cnt = igvn().intcon(shift & mask);\n+          phase()->set_ctrl(cnt, phase()->C->root());\n@@ -2768,2 +2765,1 @@\n-          cnt = ConNode::make(TypeInt::make(mask));\n-          igvn().register_new_node_with_optimizer(cnt);\n+          cnt = igvn().intcon(mask);\n@@ -2771,2 +2767,1 @@\n-          igvn().register_new_node_with_optimizer(cnt);\n-          phase()->set_ctrl(cnt, phase()->get_ctrl(opd));\n+          phase()->register_new_node(cnt, phase()->get_ctrl(opd));\n@@ -2781,2 +2776,1 @@\n-      igvn().register_new_node_with_optimizer(cnt);\n-      phase()->set_ctrl(cnt, phase()->get_ctrl(opd));\n+      phase()->register_new_node(cnt, phase()->get_ctrl(opd));\n@@ -2800,2 +2794,1 @@\n-         igvn().register_new_node_with_optimizer(conv);\n-         phase()->set_ctrl(conv, phase()->get_ctrl(opd));\n+         phase()->register_new_node(conv, phase()->get_ctrl(opd));\n@@ -2809,2 +2802,1 @@\n-    igvn().register_new_node_with_optimizer(vn);\n-    phase()->set_ctrl(vn, phase()->get_ctrl(opd));\n+    phase()->register_new_node(vn, phase()->get_ctrl(opd));\n@@ -2839,2 +2831,1 @@\n-  igvn().register_new_node_with_optimizer(pk);\n-  phase()->set_ctrl(pk, phase()->get_ctrl(opd));\n+  phase()->register_new_node(pk, phase()->get_ctrl(opd));\n@@ -3643,1 +3634,1 @@\n-      igvn().register_new_node_with_optimizer(invar);\n+      phase()->register_new_node(invar, pre_ctrl);\n@@ -3651,2 +3642,1 @@\n-    igvn().register_new_node_with_optimizer(xboi);\n-    phase()->set_ctrl(xboi, pre_ctrl);\n+    phase()->register_new_node(xboi, pre_ctrl);\n@@ -3662,1 +3652,1 @@\n-    igvn().register_new_node_with_optimizer(xbase);\n+    phase()->register_new_node(xbase, pre_ctrl);\n@@ -3666,1 +3656,1 @@\n-    igvn().register_new_node_with_optimizer(xbase);\n+    phase()->register_new_node(xbase, pre_ctrl);\n@@ -3674,2 +3664,1 @@\n-    igvn().register_new_node_with_optimizer(xboi);\n-    phase()->set_ctrl(xboi, pre_ctrl);\n+    phase()->register_new_node(xboi, pre_ctrl);\n@@ -3684,2 +3673,1 @@\n-  igvn().register_new_node_with_optimizer(XBOI);\n-  phase()->set_ctrl(XBOI, pre_ctrl);\n+  phase()->register_new_node(XBOI, pre_ctrl);\n@@ -3699,2 +3687,1 @@\n-  igvn().register_new_node_with_optimizer(XBOI_OP_old_limit);\n-  phase()->set_ctrl(XBOI_OP_old_limit, pre_ctrl);\n+  phase()->register_new_node(XBOI_OP_old_limit, pre_ctrl);\n@@ -3711,2 +3698,1 @@\n-  igvn().register_new_node_with_optimizer(adjust_pre_iter);\n-  phase()->set_ctrl(adjust_pre_iter, pre_ctrl);\n+  phase()->register_new_node(adjust_pre_iter, pre_ctrl);\n@@ -3725,2 +3711,1 @@\n-  igvn().register_new_node_with_optimizer(new_limit);\n-  phase()->set_ctrl(new_limit, pre_ctrl);\n+  phase()->register_new_node(new_limit, pre_ctrl);\n@@ -3734,2 +3719,1 @@\n-  igvn().register_new_node_with_optimizer(constrained_limit);\n-  phase()->set_ctrl(constrained_limit, pre_ctrl);\n+  phase()->register_new_node(constrained_limit, pre_ctrl);\n","filename":"src\/hotspot\/share\/opto\/superword.cpp","additions":23,"deletions":39,"binary":false,"changes":62,"status":"modified"}]}