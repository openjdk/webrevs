{"files":[{"patch":"@@ -425,1 +425,1 @@\n-  phase->register_new_node(result, phase->get_ctrl(n1));\n+  phase->register_new_node_with_ctrl_of(result, n1);\n@@ -2254,1 +2254,1 @@\n-      register_new_node(limit_l, get_ctrl(limit));\n+      register_new_node_with_ctrl_of(limit_l, limit);\n","filename":"src\/hotspot\/share\/opto\/loopTransform.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1676,0 +1676,3 @@\n+  void register_new_node_with_ctrl_of(Node* new_node, Node* ctrl_of) {\n+    register_new_node(new_node, get_ctrl(ctrl_of));\n+  }\n","filename":"src\/hotspot\/share\/opto\/loopnode.hpp","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -470,1 +470,1 @@\n-      register_new_node(neg, get_ctrl(add->in(2)));\n+      register_new_node_with_ctrl_of(neg, add->in(2));\n@@ -657,1 +657,1 @@\n-              register_new_node(nn, get_ctrl(n));\n+              register_new_node_with_ctrl_of(nn, n);\n@@ -663,1 +663,1 @@\n-              register_new_node(nn, get_ctrl(n));\n+              register_new_node_with_ctrl_of(nn, n);\n@@ -2271,1 +2271,1 @@\n-          register_new_node(pinned_clone, get_ctrl(use));\n+          register_new_node_with_ctrl_of(pinned_clone, use);\n@@ -3917,1 +3917,1 @@\n-          register_new_node(pinned_clone, get_ctrl(n_clone));\n+          register_new_node_with_ctrl_of(pinned_clone, n_clone);\n","filename":"src\/hotspot\/share\/opto\/loopopts.cpp","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -759,1 +759,1 @@\n-      register_new_node(pinned_clone, get_ctrl(use));\n+      register_new_node_with_ctrl_of(pinned_clone, use);\n","filename":"src\/hotspot\/share\/opto\/split_if.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -36,0 +36,1 @@\n+#include \"opto\/rootnode.hpp\"\n@@ -2556,2 +2557,1 @@\n-        igvn().register_new_node_with_optimizer(mask);\n-        phase()->set_ctrl(mask, phase()->get_ctrl(p->at(0)));\n+        phase()->register_new_node_with_ctrl_of(mask, p->at(0));\n@@ -2631,2 +2631,1 @@\n-        igvn().register_new_node_with_optimizer(longval);\n-        phase()->set_ctrl(longval, phase()->get_ctrl(first));\n+        phase()->register_new_node_with_ctrl_of(longval, first);\n@@ -2672,2 +2671,1 @@\n-      igvn().register_new_node_with_optimizer(vn);\n-      phase()->set_ctrl(vn, phase()->get_ctrl(first));\n+      phase()->register_new_node_with_ctrl_of(vn, first);\n@@ -2742,2 +2740,1 @@\n-    igvn().register_new_node_with_optimizer(vn);\n-    phase()->set_ctrl(vn, phase()->get_ctrl(opd));\n+    phase()->register_new_node_with_ctrl_of(vn, opd);\n@@ -2763,2 +2760,2 @@\n-          cnt = ConNode::make(TypeInt::make(shift & mask));\n-          igvn().register_new_node_with_optimizer(cnt);\n+          cnt = igvn().intcon(shift & mask);\n+          phase()->set_ctrl(cnt, phase()->C->root());\n@@ -2768,2 +2765,1 @@\n-          cnt = ConNode::make(TypeInt::make(mask));\n-          igvn().register_new_node_with_optimizer(cnt);\n+          cnt = igvn().intcon(mask);\n@@ -2771,2 +2767,1 @@\n-          igvn().register_new_node_with_optimizer(cnt);\n-          phase()->set_ctrl(cnt, phase()->get_ctrl(opd));\n+          phase()->register_new_node_with_ctrl_of(cnt, opd);\n@@ -2781,2 +2776,1 @@\n-      igvn().register_new_node_with_optimizer(cnt);\n-      phase()->set_ctrl(cnt, phase()->get_ctrl(opd));\n+      phase()->register_new_node_with_ctrl_of(cnt, opd);\n@@ -2800,2 +2794,1 @@\n-         igvn().register_new_node_with_optimizer(conv);\n-         phase()->set_ctrl(conv, phase()->get_ctrl(opd));\n+         phase()->register_new_node_with_ctrl_of(conv, opd);\n@@ -2809,2 +2802,1 @@\n-    igvn().register_new_node_with_optimizer(vn);\n-    phase()->set_ctrl(vn, phase()->get_ctrl(opd));\n+    phase()->register_new_node_with_ctrl_of(vn, opd);\n@@ -2839,2 +2831,1 @@\n-  igvn().register_new_node_with_optimizer(pk);\n-  phase()->set_ctrl(pk, phase()->get_ctrl(opd));\n+  phase()->register_new_node_with_ctrl_of(pk, opd);\n@@ -3643,1 +3634,1 @@\n-      igvn().register_new_node_with_optimizer(invar);\n+      phase()->register_new_node(invar, pre_ctrl);\n@@ -3651,2 +3642,1 @@\n-    igvn().register_new_node_with_optimizer(xboi);\n-    phase()->set_ctrl(xboi, pre_ctrl);\n+    phase()->register_new_node(xboi, pre_ctrl);\n@@ -3662,1 +3652,1 @@\n-    igvn().register_new_node_with_optimizer(xbase);\n+    phase()->register_new_node(xbase, pre_ctrl);\n@@ -3666,1 +3656,1 @@\n-    igvn().register_new_node_with_optimizer(xbase);\n+    phase()->register_new_node(xbase, pre_ctrl);\n@@ -3674,2 +3664,1 @@\n-    igvn().register_new_node_with_optimizer(xboi);\n-    phase()->set_ctrl(xboi, pre_ctrl);\n+    phase()->register_new_node(xboi, pre_ctrl);\n@@ -3684,2 +3673,1 @@\n-  igvn().register_new_node_with_optimizer(XBOI);\n-  phase()->set_ctrl(XBOI, pre_ctrl);\n+  phase()->register_new_node(XBOI, pre_ctrl);\n@@ -3699,2 +3687,1 @@\n-  igvn().register_new_node_with_optimizer(XBOI_OP_old_limit);\n-  phase()->set_ctrl(XBOI_OP_old_limit, pre_ctrl);\n+  phase()->register_new_node(XBOI_OP_old_limit, pre_ctrl);\n@@ -3711,2 +3698,1 @@\n-  igvn().register_new_node_with_optimizer(adjust_pre_iter);\n-  phase()->set_ctrl(adjust_pre_iter, pre_ctrl);\n+  phase()->register_new_node(adjust_pre_iter, pre_ctrl);\n@@ -3725,2 +3711,1 @@\n-  igvn().register_new_node_with_optimizer(new_limit);\n-  phase()->set_ctrl(new_limit, pre_ctrl);\n+  phase()->register_new_node(new_limit, pre_ctrl);\n@@ -3734,2 +3719,1 @@\n-  igvn().register_new_node_with_optimizer(constrained_limit);\n-  phase()->set_ctrl(constrained_limit, pre_ctrl);\n+  phase()->register_new_node(constrained_limit, pre_ctrl);\n","filename":"src\/hotspot\/share\/opto\/superword.cpp","additions":23,"deletions":39,"binary":false,"changes":62,"status":"modified"}]}