{"files":[{"patch":"@@ -304,6 +304,0 @@\n-    if test \"x$TOOLCHAIN_TYPE\" = xgcc; then\n-      C_O_FLAG_LTO=\"-flto=auto -fuse-linker-plugin -fno-strict-aliasing -fno-fat-lto-objects\"\n-    else\n-      C_O_FLAG_LTO=\"-flto -fno-strict-aliasing\"\n-    fi\n-\n@@ -314,1 +308,0 @@\n-      C_O_FLAG_LTO=\"${C_O_FLAG_LTO} -ffat-lto-objects\"\n@@ -346,1 +339,0 @@\n-    C_O_FLAG_LTO=\"-GL\"\n@@ -358,1 +350,0 @@\n-  CXX_O_FLAG_LTO=\"$C_O_FLAG_LTO\"\n@@ -391,2 +382,0 @@\n-  AC_SUBST(C_O_FLAG_LTO)\n-\n@@ -399,1 +388,0 @@\n-  AC_SUBST(CXX_O_FLAG_LTO)\n","filename":"make\/autoconf\/flags-cflags.m4","additions":0,"deletions":12,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -66,1 +66,0 @@\n-    LDFLAGS_LTO=\"-flto=auto -fuse-linker-plugin -fno-strict-aliasing $DEBUG_PREFIX_CFLAGS\"\n@@ -74,1 +73,0 @@\n-    LDFLAGS_LTO=\"-flto=auto -fuse-linker-plugin -fno-strict-aliasing $DEBUG_PREFIX_CFLAGS\"\n@@ -94,1 +92,0 @@\n-    LDFLAGS_LTO=\"-LTCG:INCREMENTAL\"\n@@ -159,1 +156,0 @@\n-  AC_SUBST(LDFLAGS_LTO)\n","filename":"make\/autoconf\/flags-ldflags.m4","additions":0,"deletions":4,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -516,1 +516,0 @@\n-C_O_FLAG_LTO := @C_O_FLAG_LTO@\n@@ -523,1 +522,0 @@\n-CXX_O_FLAG_LTO  := @CXX_O_FLAG_LTO@\n@@ -592,3 +590,0 @@\n-# LDFLAGS specific to link time optimization\n-LDFLAGS_LTO := @LDFLAGS_LTO@\n-\n","filename":"make\/autoconf\/spec.gmk.template","additions":0,"deletions":5,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -101,1 +101,0 @@\n-#   LINK_TIME_OPTIMIZATION if set to true, enables link time optimization\n","filename":"make\/common\/NativeCompilation.gmk","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -49,0 +49,12 @@\n+ifeq ($(if $(filter $(MODULE) true, $(subst $(COMMA),$(SPACE),$(ENABLE_LINKTIME_OPT))), true, false), true)\n+  ifeq ($(TOOLCHAIN_TYPE), gcc)\n+    CFLAGS_JDKEXE += -flto=$(JOBS) -fuse-linker-plugin -fno-fat-lto-objects\n+    CXXFLAGS_JDKEXE += -flto=$(JOBS) -fuse-linker-plugin -fno-fat-lto-objects\n+    LDFLAGS_JDKEXE += -flto=$(JOBS) -fuse-linker-plugin\n+  else ifeq ($(TOOLCHAIN_TYPE), microsoft)\n+    CFLAGS_JDKEXE += -GL -Gy\n+    CXXFLAGS_JDKEXE += -GL -Gy\n+    LDFLAGS_JDKEXE += -LTCG:INCREMENTAL\n+  endif\n+endif\n+\n","filename":"make\/common\/modules\/LauncherCommon.gmk","additions":12,"deletions":0,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -33,0 +33,12 @@\n+ifeq ($(if $(filter $(MODULE) true, $(subst $(COMMA),$(SPACE),$(ENABLE_LINKTIME_OPT))), true, false), true)\n+  ifeq ($(TOOLCHAIN_TYPE), gcc)\n+    CFLAGS_JDKLIB += -flto=$(JOBS) -fuse-linker-plugin -fno-fat-lto-objects\n+    CXXFLAGS_JDKLIB += -flto=$(JOBS) -fuse-linker-plugin -fno-fat-lto-objects\n+    LDFLAGS_JDKLIB += -flto=$(JOBS) -fuse-linker-plugin\n+  else ifeq ($(TOOLCHAIN_TYPE), microsoft)\n+    CFLAGS_JDKLIB += -GL -Gy\n+    CXXFLAGS_JDKLIB += -GL -Gy\n+    LDFLAGS_JDKLIB += -LTCG:INCREMENTAL\n+  endif\n+endif\n+\n","filename":"make\/common\/modules\/LibCommon.gmk","additions":12,"deletions":0,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -197,5 +197,0 @@\n-  ifeq (true, $$($1_LINK_TIME_OPTIMIZATION))\n-    $1_EXTRA_CFLAGS += $(C_O_FLAG_LTO)\n-    $1_EXTRA_CXXFLAGS += $(CXX_O_FLAG_LTO)\n-  endif\n-\n@@ -230,12 +225,0 @@\n-  ifeq ($$($1_LINK_TIME_OPTIMIZATION), true)\n-    $1_EXTRA_LDFLAGS += $(LDFLAGS_LTO)\n-    # Instruct the ld64 linker not to delete the temporary object file\n-    # generated during Link Time Optimization\n-    ifeq ($(call isTargetOs, macosx), true)\n-      $1_EXTRA_LDFLAGS += -Wl,-object_path_lto,$$($1_OBJECT_DIR)\/$$($1_NAME)_lto_helper.o\n-    endif\n-    ifeq ($(TOOLCHAIN_TYPE), microsoft)\n-      $1_EXTRA_LDFLAGS += -LTCGOUT:$$($1_OBJECT_DIR)\/$$($1_NAME).iobj\n-    endif\n-  endif\n-\n","filename":"make\/common\/native\/Flags.gmk","additions":0,"deletions":17,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -239,1 +239,0 @@\n-    LINK_TIME_OPTIMIZATION := $(JVM_LTO), \\\n","filename":"make\/hotspot\/lib\/CompileJvm.gmk","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -178,3 +178,14 @@\n-  JVM_LTO := true\n-  ifneq ($(call isCompiler, microsoft), true)\n-    JVM_LDFLAGS_FEATURES += $(CXX_O_FLAG_HIGHEST_JVM)\n+  ifeq ($(TOOLCHAIN_TYPE), gcc)\n+    JVM_CFLAGS_FEATURES += -flto=$(JOBS) -fuse-linker-plugin -fno-strict-aliasing \\\n+        -fno-fat-lto-objects\n+    JVM_LDFLAGS_FEATURES += $(CXX_O_FLAG_HIGHEST_JVM) -flto=$(JOBS) \\\n+        -fuse-linker-plugin -fno-strict-aliasing -fno-omit-frame-pointer\n+  else ifeq ($(TOOLCHAIN_TYPE), clang)\n+    JVM_CFLAGS_FEATURES += -flto -fno-strict-aliasing\n+    ifeq ($(call isTargetOs, aix), true)\n+      JVM_CFLAGS_FEATURES += -ffat-lto-objects\n+    endif\n+    JVM_LDFLAGS_FEATURES += $(CXX_O_FLAG_HIGHEST_JVM) -flto -fno-strict-aliasing\n+  else ifeq ($(TOOLCHAIN_TYPE), microsoft)\n+    JVM_CFLAGS_FEATURES += -GL -Gy\n+    JVM_LDFLAGS_FEATURES += -LTCG:INCREMENTAL\n@@ -183,2 +194,1 @@\n-  JVM_LTO := false\n-  ifeq ($(call isCompiler, gcc), true)\n+  ifeq ($(TOOLCHAIN_TYPE), gcc)\n","filename":"make\/hotspot\/lib\/JvmFeatures.gmk","additions":15,"deletions":5,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -42,4 +42,0 @@\n-  # disable lto in g1ParScanThreadState because of special inlining\/flattening used there\n-  ifeq ($(call check-jvm-feature, link-time-opt), true)\n-    BUILD_LIBJVM_g1ParScanThreadState.cpp_CXXFLAGS := -fno-lto\n-  endif\n","filename":"make\/hotspot\/lib\/JvmOverrideFiles.gmk","additions":0,"deletions":4,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -229,1 +229,0 @@\n-      LINK_TIME_OPTIMIZATION := true, \\\n","filename":"make\/modules\/java.desktop\/lib\/ClientLibraries.gmk","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"}]}