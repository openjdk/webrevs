{"files":[{"patch":"@@ -51,0 +51,1 @@\n+import jdk.internal.module.Modules;\n@@ -302,0 +303,43 @@\n+        \/**\n+         * Updates module {@code source} in the layer to use a service.\n+         *\n+         * @param  source\n+         *         The source module\n+         * @param  service\n+         *         The service class\n+         *\n+         * @return This controller\n+         *\n+         * @throws IllegalArgumentException\n+         *         If {@code source} is not in the module layer\n+         *\n+         * @see Module#addUses\n+         *\n+         * @since 25\n+         *\/\n+        public Controller addUses(Module source, Class<?> service) {\n+            ensureInLayer(source);\n+            source.implAddUses(service);\n+            return this;\n+        }\n+\n+        \/**\n+         * Updates the module layer to locate a service of the given type using\n+         * the given implementation class.\n+         *\n+         * @param  service\n+         *         The service class\n+         * @param  impl\n+         *         The implementation class\n+         *\n+         * @return This controller\n+         *\n+         * @since 25\n+         *\/\n+        public Controller addProvider(Class<?> service, Class<?> impl) {\n+            \/\/ the implementation module for the service may be named or unnamed\n+            Module implModule = impl.getModule();\n+            Modules.addProvider(layer, service, impl);\n+            return this;\n+        }\n+\n","filename":"src\/java.base\/share\/classes\/java\/lang\/ModuleLayer.java","additions":44,"deletions":0,"binary":false,"changes":44,"status":"modified"},{"patch":"@@ -175,0 +175,12 @@\n+    \/**\n+     * Add a provider to a module layer.\n+     *\n+     * @param layer the layer ot add the provider to (must not be {@code null})\n+     * @param service the service class (must not be {@code null})\n+     * @param impl the service implementation class (must not be {@code null})\n+     *\/\n+    public static void addProvider(ModuleLayer layer, Class<?> service, Class<?> impl) {\n+        \/\/ throws NPE if the layer is null\n+        JLA.getServicesCatalog(layer).addProvider(impl.getModule(), service, impl);\n+    }\n+\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/module\/Modules.java","additions":12,"deletions":0,"binary":false,"changes":12,"status":"modified"}]}