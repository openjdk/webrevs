{"files":[{"patch":"@@ -36,0 +36,1 @@\n+ *             InterfaceWithEnum EnumWithClinit\n@@ -104,0 +105,5 @@\n+\n+            \/\/ For MethodHandleTestApp.testLambdaWithEnums()\n+            if (runMode == RunMode.ASSEMBLY) {\n+                out.shouldNotContain(\"EnumWithClinit.<clinit>\");\n+            }\n@@ -209,0 +215,2 @@\n+        testLambdaWithEnums();\n+\n@@ -278,0 +286,23 @@\n+\n+\n+    static boolean InterfaceWithEnum_inited = false;\n+\n+    \/\/ Enum types used in lambdas shouldn't be initialized during the assembly phase.\n+    static void testLambdaWithEnums() {\n+        if (InterfaceWithEnum_inited) {\n+            throw new RuntimeException(\"InterfaceWithEnum should not be inited\");\n+        }\n+\n+        InterfaceWithEnum iwe = (x) -> {\n+            System.out.println(\"Hello from testLambdaWithEnums\");\n+        };\n+\n+        System.out.println(iwe);\n+        if (InterfaceWithEnum_inited) {\n+            throw new RuntimeException(\"InterfaceWithEnum should not be inited\");\n+        }\n+        iwe.func(EnumWithClinit.Dummy);\n+        if (!InterfaceWithEnum_inited) {\n+            throw new RuntimeException(\"InterfaceWithEnum should be inited\");\n+        }\n+    }\n@@ -335,0 +366,12 @@\n+interface InterfaceWithEnum {\n+    void func(EnumWithClinit e);\n+}\n+\n+enum EnumWithClinit {\n+    Dummy;\n+    static {\n+        MethodHandleTestApp.InterfaceWithEnum_inited = true;\n+        System.out.println(\"EnumWithClinit.<clinit>\");\n+    }\n+}\n+\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/aotClassLinking\/MethodHandleTest.java","additions":43,"deletions":0,"binary":false,"changes":43,"status":"modified"}]}