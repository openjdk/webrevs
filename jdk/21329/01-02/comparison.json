{"files":[{"patch":"@@ -204,8 +204,1 @@\n-    Handle path_string = java_lang_String::create_from_str(path, CHECK_(url_h));\n-    Klass* classLoaders_klass =\n-        vmClasses::jdk_internal_loader_ClassLoaders_klass();\n-    JavaCalls::call_static(&result, classLoaders_klass,\n-                           vmSymbols::toFileURL_name(),\n-                           vmSymbols::toFileURL_signature(),\n-                           path_string, CHECK_(url_h));\n-\n+    get_shared_jar_url_helper(&result, path, url_h, CHECK_(url_h));\n@@ -220,0 +213,9 @@\n+void CDSProtectionDomain::get_shared_jar_url_helper(JavaValue* result, const char* path, Handle url_h, TRAPS) {\n+  Handle path_string = java_lang_String::create_from_str(path, CHECK);\n+  JavaCalls::call_static(result,\n+                         vmClasses::jdk_internal_loader_ClassLoaders_klass(),\n+                         vmSymbols::toFileURL_name(),\n+                         vmSymbols::toFileURL_signature(),\n+                         path_string, CHECK);\n+}\n+\n","filename":"src\/hotspot\/share\/cds\/cdsProtectionDomain.cpp","additions":10,"deletions":8,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -83,0 +83,1 @@\n+  static void get_shared_jar_url_helper(JavaValue* result, const char* path, Handle url_h, TRAPS);\n","filename":"src\/hotspot\/share\/cds\/cdsProtectionDomain.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -758,1 +758,1 @@\n-  make_dummy_calls(CHECK);\n+  exercise_runtime_cds_code(CHECK);\n@@ -763,1 +763,1 @@\n-void MetaspaceShared::make_dummy_calls(TRAPS) {\n+void MetaspaceShared::exercise_runtime_cds_code(TRAPS) {\n@@ -768,9 +768,0 @@\n-  \/\/ Exercise JarVerifier\n-  Handle manifest_name = java_lang_String::create_from_str(\"dummy.jar\", CHECK);\n-  typeArrayOop bytes = oopFactory::new_byteArray(0, CHECK);\n-  Handle dummy_bytes(THREAD, bytes);\n-  JavaCalls::construct_new_instance(vmClasses::Jar_Verifier_klass(),\n-                                    vmSymbols::JarVerifier_constructor_signature(),\n-                                    manifest_name, dummy_bytes,\n-                                    CHECK);\n-\n@@ -779,8 +770,1 @@\n-  Handle path_string = java_lang_String::create_from_str(\"dummy.jar\", CHECK);\n-  JavaCalls::call_static(&result,\n-                         vmClasses::jdk_internal_loader_ClassLoaders_klass(),\n-                         vmSymbols::toFileURL_name(),\n-                         vmSymbols::toFileURL_signature(),\n-                         path_string,\n-                         CHECK);\n-\n+  CDSProtectionDomain::get_shared_jar_url_helper(&result, \"dummy.jar\", Handle(), CHECK);\n","filename":"src\/hotspot\/share\/cds\/metaspaceShared.cpp","additions":3,"deletions":19,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -78,1 +78,1 @@\n-  static void make_dummy_calls(TRAPS) NOT_CDS_RETURN;\n+  static void exercise_runtime_cds_code(TRAPS) NOT_CDS_RETURN;\n","filename":"src\/hotspot\/share\/cds\/metaspaceShared.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -149,1 +149,0 @@\n-  do_klass(Jar_Verifier_klass,                          java_util_jar_JarVerifier                             ) \\\n","filename":"src\/hotspot\/share\/classfile\/vmClassMacros.hpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -132,1 +132,0 @@\n-  template(java_util_jar_JarVerifier,                 \"java\/util\/jar\/JarVerifier\")                \\\n@@ -746,1 +745,0 @@\n-  template(JarVerifier_constructor_signature,               \"(Ljava\/lang\/String;[B)V\")                            \\\n","filename":"src\/hotspot\/share\/classfile\/vmSymbols.hpp","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -30,0 +30,3 @@\n+ * @requires vm.compMode != \"Xcomp\"\n+ * @comment Running this test with -Xcomp may load other classes which\n+ *          are not used in other modes\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/DumpRuntimeClassesTest.java","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"}]}