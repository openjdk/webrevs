{"files":[{"patch":"@@ -44,1 +44,1 @@\n-public class KEMBench extends CryptoBase {\n+public abstract class KEMBench extends CryptoBase {\n@@ -48,1 +48,1 @@\n-    @Param({\"ML-KEM-512\", \"ML-KEM-768\", \"ML-KEM-1024\" })\n+    @Param({})\n@@ -64,1 +64,2 @@\n-        kem = (prov == null) ? KEM.getInstance(algorithm) : KEM.getInstance(algorithm, prov);\n+        kem = (prov == null) ? KEM.getInstance(algorithm) :\n+                KEM.getInstance(algorithm, prov);\n@@ -66,1 +67,2 @@\n-        Provider kpgProv = prov;    \/\/ By default use the same provider for KEM and KPG\n+        \/\/ By default use the same provider for KEM and KPG\n+        Provider kpgProv = prov;\n@@ -71,0 +73,5 @@\n+            \/\/ The key pair generation spec is broken down from a colon-\n+            \/\/ delimited string spec into 3 fields:\n+            \/\/ [0] - the provider name\n+            \/\/ [1] - the algorithm name\n+            \/\/ [2] - the parameters (i.e. the name of the curve)\n@@ -72,1 +79,1 @@\n-            kpgProv = Security.getProvider(kpgTok[0]); \/\/ kpgTok[0] = provider name\n+            kpgProv = Security.getProvider(kpgTok[0]);\n@@ -94,1 +101,1 @@\n-    protected static Provider getInternalJce() {\n+    private static Provider getInternalJce() {\n@@ -96,2 +103,2 @@\n-            Class<?> dhClazz = Class.forName(\"com.sun.crypto.provider.DH\");\n-            return (Provider) (dhClazz.getField(\"PROVIDER\").get(null));\n+            Class<?> dhClazz = Class.forName(\"sun.security.ssl.HybridProvider\");\n+            return (Provider) dhClazz.getField(\"PROVIDER\").get(null);\n@@ -107,1 +114,2 @@\n-            bh.consume(kem.newEncapsulator(kp.getPublic()).encapsulate().encapsulation());\n+            bh.consume(kem.newEncapsulator(kp.getPublic()).encapsulate().\n+                    encapsulation());\n@@ -113,1 +121,2 @@\n-    public void decapsulate(Blackhole bh) throws InvalidKeyException, DecapsulateException {\n+    public void decapsulate(Blackhole bh) throws InvalidKeyException,\n+            DecapsulateException {\n@@ -115,1 +124,2 @@\n-            bh.consume(kem.newDecapsulator(keys[i].getPrivate()).decapsulate(messages[i]));\n+            bh.consume(kem.newDecapsulator(keys[i].getPrivate()).\n+                    decapsulate(messages[i]));\n@@ -127,2 +137,3 @@\n-    @Fork(value = 5, jvmArgs = {\"-XX:+AlwaysPreTouch\", \"--add-opens\", \"java.base\/com.sun.crypto.provider=ALL-UNNAMED\"})\n-    public static class InternalDH extends KEMBench {\n+    @Fork(value = 5, jvmArgs = {\"-XX:+AlwaysPreTouch\", \"--add-opens\",\n+            \"java.base\/sun.security.ssl=ALL-UNNAMED\"})\n+    public static class JSSE_DHasKEM extends KEMBench {\n@@ -146,2 +157,3 @@\n-    @Fork(value = 5, jvmArgs = {\"-XX:+AlwaysPreTouch\", \"--add-opens\", \"java.base\/com.sun.crypto.provider=ALL-UNNAMED\"})\n-    public static class Hybrid extends KEMBench {\n+    @Fork(value = 5, jvmArgs = {\"-XX:+AlwaysPreTouch\", \"--add-opens\",\n+            \"java.base\/sun.security.ssl=ALL-UNNAMED\"})\n+    public static class JSSE_Hybrid extends KEMBench {\n","filename":"test\/micro\/org\/openjdk\/bench\/javax\/crypto\/full\/KEMBench.java","additions":27,"deletions":15,"binary":false,"changes":42,"status":"modified"},{"patch":"@@ -51,1 +51,2 @@\n-        if (keyLength > 0) { \/\/ not all key pair generators allow the use of key length\n+        \/\/ not all key pair generators allow the use of key length\n+        if (keyLength > 0) {\n@@ -56,1 +57,1 @@\n-    protected static Provider getInternalJce() {\n+    private static Provider getInternalJce() {\n@@ -58,1 +59,1 @@\n-            Class<?> dhClazz = Class.forName(\"com.sun.crypto.provider.DH\");\n+            Class<?> dhClazz = Class.forName(\"sun.security.ssl.HybridProvider\");\n@@ -133,2 +134,3 @@\n-    @Fork(value = 5, jvmArgs = {\"-XX:+AlwaysPreTouch\", \"--add-opens\", \"java.base\/com.sun.crypto.provider=ALL-UNNAMED\"})\n-    public static class Hybrid extends KeyPairGeneratorBench {\n+    @Fork(value = 5, jvmArgs = {\"-XX:+AlwaysPreTouch\", \"--add-opens\",\n+            \"java.base\/sun.security.ssl=ALL-UNNAMED\"})\n+    public static class JSSE_Hybrid extends KeyPairGeneratorBench {\n","filename":"test\/micro\/org\/openjdk\/bench\/javax\/crypto\/full\/KeyPairGeneratorBench.java","additions":7,"deletions":5,"binary":false,"changes":12,"status":"modified"}]}