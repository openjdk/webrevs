{"files":[{"patch":"@@ -72,1 +72,1 @@\n-ParsePredicateNode* ParsePredicate::init_parse_predicate(Node* parse_predicate_proj,\n+ParsePredicateNode* ParsePredicate::init_parse_predicate(const Node* parse_predicate_proj,\n@@ -103,1 +103,1 @@\n-Deoptimization::DeoptReason RuntimePredicate::uncommon_trap_reason(IfProjNode* if_proj) {\n+Deoptimization::DeoptReason RuntimePredicate::uncommon_trap_reason(const IfProjNode* if_proj) {\n@@ -111,1 +111,1 @@\n-bool RuntimePredicate::is_predicate(Node* maybe_success_proj) {\n+bool RuntimePredicate::is_predicate(const Node* maybe_success_proj) {\n@@ -153,1 +153,1 @@\n-                                                               PhaseIdealLoop* phase) const {\n+                                                               const PhaseIdealLoop* phase) const {\n@@ -164,1 +164,1 @@\n-bool TemplateAssertionPredicate::is_predicate(Node* node) {\n+bool TemplateAssertionPredicate::is_predicate(const Node* node) {\n@@ -297,1 +297,1 @@\n-bool InitializedAssertionPredicate::is_predicate(Node* node) {\n+bool InitializedAssertionPredicate::is_predicate(const Node* node) {\n@@ -313,1 +313,1 @@\n-void RegularPredicateBlock::verify_block(Node* tail) {\n+void RegularPredicateBlock::verify_block(Node* tail) const {\n@@ -329,1 +329,1 @@\n-  Node* const _new_ctrl;\n+  Node* const _new_control;\n@@ -332,1 +332,1 @@\n-  CloneStrategy(PhaseIdealLoop* phase, Node* new_ctrl)\n+  CloneStrategy(PhaseIdealLoop* phase, Node* new_control)\n@@ -334,1 +334,1 @@\n-        _new_ctrl(new_ctrl) {}\n+        _new_control(new_control) {}\n@@ -338,1 +338,1 @@\n-    return _phase->clone_and_register(opaque_init, _new_ctrl)->as_OpaqueLoopInit();\n+    return _phase->clone_and_register(opaque_init, _new_control)->as_OpaqueLoopInit();\n@@ -342,1 +342,1 @@\n-    return _phase->clone_and_register(opaque_stride, _new_ctrl)->as_OpaqueLoopStride();\n+    return _phase->clone_and_register(opaque_stride, _new_control)->as_OpaqueLoopStride();\n@@ -349,1 +349,1 @@\n-  Node* const _new_ctrl;\n+  Node* const _new_control;\n@@ -353,1 +353,1 @@\n-  ReplaceInitAndCloneStrideStrategy(Node* new_init, Node* new_ctrl, PhaseIdealLoop* phase)\n+  ReplaceInitAndCloneStrideStrategy(Node* new_control, Node* new_init, PhaseIdealLoop* phase)\n@@ -355,1 +355,1 @@\n-        _new_ctrl(new_ctrl),\n+        _new_control(new_control),\n@@ -364,1 +364,1 @@\n-    return _phase->clone_and_register(opaque_stride, _new_ctrl)->as_OpaqueLoopStride();\n+    return _phase->clone_and_register(opaque_stride, _new_control)->as_OpaqueLoopStride();\n@@ -391,3 +391,3 @@\n-\/\/ same graph structure as found for this Template Assertion Expression. The cloned nodes get 'new_ctrl' as ctrl. There\n-\/\/ is no other update done for the cloned nodes. Return the newly cloned OpaqueTemplateAssertionPredicate.\n-OpaqueTemplateAssertionPredicateNode* TemplateAssertionExpression::clone(Node* new_control, PhaseIdealLoop* phase) {\n+\/\/ same graph structure as found for this Template Assertion Expression. The cloned nodes get 'new_control' as control.\n+\/\/ There is no other update done for the cloned nodes. Return the newly cloned OpaqueTemplateAssertionPredicate.\n+OpaqueTemplateAssertionPredicateNode* TemplateAssertionExpression::clone(Node* new_control, PhaseIdealLoop* phase) const {\n@@ -400,2 +400,2 @@\n-TemplateAssertionExpression::clone_and_replace_init(Node* new_control, Node* new_init, PhaseIdealLoop* phase) {\n-  ReplaceInitAndCloneStrideStrategy replace_init_and_clone_stride_strategy(new_init, new_control, phase);\n+TemplateAssertionExpression::clone_and_replace_init(Node* new_control, Node* new_init, PhaseIdealLoop* phase) const {\n+  ReplaceInitAndCloneStrideStrategy replace_init_and_clone_stride_strategy(new_control, new_init, phase);\n@@ -409,1 +409,1 @@\n-                                                               PhaseIdealLoop* phase) {\n+                                                               PhaseIdealLoop* phase) const {\n@@ -493,2 +493,2 @@\n-TemplateAssertionExpression::clone(const TransformStrategyForOpaqueLoopNodes& transform_strategy, Node* new_ctrl,\n-                                   PhaseIdealLoop* phase) {\n+TemplateAssertionExpression::clone(const TransformStrategyForOpaqueLoopNodes& transform_strategy, Node* new_control,\n+                                   PhaseIdealLoop* phase) const {\n@@ -503,1 +503,2 @@\n-  const OrigToNewHashtable& orig_to_new = data_node_graph.clone_with_opaque_loop_transform_strategy(transform_strategy, new_ctrl);\n+  const OrigToNewHashtable& orig_to_new = data_node_graph.clone_with_opaque_loop_transform_strategy(transform_strategy,\n+                                                                                                    new_control);\n@@ -540,1 +541,1 @@\n-void TemplateAssertionExpression::replace_opaque_stride_input(Node* new_stride, PhaseIterGVN& igvn) {\n+void TemplateAssertionExpression::replace_opaque_stride_input(Node* new_stride, PhaseIterGVN& igvn) const {\n@@ -558,1 +559,1 @@\n-TemplateAssertionExpression::clone_and_fold_opaque_loop_nodes(Node* new_control, PhaseIdealLoop* phase) {\n+TemplateAssertionExpression::clone_and_fold_opaque_loop_nodes(Node* new_control, PhaseIdealLoop* phase) const {\n@@ -586,1 +587,1 @@\n-bool TemplateAssertionExpressionNode::is_template_assertion_predicate(Node* node) {\n+bool TemplateAssertionExpressionNode::is_template_assertion_predicate(const Node* node) {\n@@ -647,1 +648,1 @@\n-                                                             const AssertionPredicateType assertion_predicate_type) {\n+                                                             const AssertionPredicateType assertion_predicate_type) const {\n@@ -656,1 +657,1 @@\n-                                                                const AssertionPredicateType assertion_predicate_type) {\n+                                                                const AssertionPredicateType assertion_predicate_type) const {\n@@ -672,1 +673,1 @@\n-                                                const AssertionPredicateType assertion_predicate_type) {\n+                                                const AssertionPredicateType assertion_predicate_type) const {\n@@ -683,1 +684,1 @@\n-                                                    const AssertionPredicateType assertion_predicate_type) {\n+                                                    const AssertionPredicateType assertion_predicate_type) const {\n@@ -695,1 +696,1 @@\n-IfTrueNode* AssertionPredicateIfCreator::create_success_path(IfNode* if_node, IdealLoopTree* loop) {\n+IfTrueNode* AssertionPredicateIfCreator::create_success_path(IfNode* if_node, IdealLoopTree* loop) const {\n@@ -701,1 +702,1 @@\n-void AssertionPredicateIfCreator::create_fail_path(IfNode* if_node, IdealLoopTree* loop, const char* halt_message) {\n+void AssertionPredicateIfCreator::create_fail_path(IfNode* if_node, IdealLoopTree* loop, const char* halt_message) const {\n@@ -708,1 +709,1 @@\n-                                                   const char* halt_message) {\n+                                                   const char* halt_message) const {\n@@ -717,1 +718,1 @@\n-OpaqueLoopInitNode* TemplateAssertionPredicateCreator::create_opaque_init(Node* new_control) {\n+OpaqueLoopInitNode* TemplateAssertionPredicateCreator::create_opaque_init(Node* new_control) const {\n@@ -763,1 +764,1 @@\n-IfTrueNode* TemplateAssertionPredicateCreator::create(Node* new_control) {\n+IfTrueNode* TemplateAssertionPredicateCreator::create(Node* new_control) const {\n@@ -806,1 +807,1 @@\n-    IfNode* template_assertion_predicate, Node* new_control, Node* new_init, Node* new_stride) const {\n+    const IfNode* template_assertion_predicate, Node* new_control, Node* new_init, Node* new_stride) const {\n@@ -859,1 +860,1 @@\n-InitializedAssertionPredicateCreator::create_assertion_expression_from_template(IfNode* template_assertion_predicate,\n+InitializedAssertionPredicateCreator::create_assertion_expression_from_template(const IfNode* template_assertion_predicate,\n","filename":"src\/hotspot\/share\/opto\/predicates.cpp","additions":40,"deletions":39,"binary":false,"changes":79,"status":"modified"},{"patch":"@@ -298,1 +298,1 @@\n-  static ParsePredicateNode* init_parse_predicate(Node* parse_predicate_proj, Deoptimization::DeoptReason deopt_reason);\n+  static ParsePredicateNode* init_parse_predicate(const Node* parse_predicate_proj, Deoptimization::DeoptReason deopt_reason);\n@@ -354,1 +354,1 @@\n-  static bool is_predicate(Node* maybe_success_proj);\n+  static bool is_predicate(const Node* maybe_success_proj);\n@@ -356,1 +356,1 @@\n-  static Deoptimization::DeoptReason uncommon_trap_reason(IfProjNode* if_proj);\n+  static Deoptimization::DeoptReason uncommon_trap_reason(const IfProjNode* if_proj);\n@@ -412,1 +412,1 @@\n-                                     PhaseIdealLoop* phase) const;\n+                                     const PhaseIdealLoop* phase) const;\n@@ -414,1 +414,1 @@\n-  static bool is_predicate(Node* node);\n+  static bool is_predicate(const Node* node);\n@@ -460,1 +460,1 @@\n-  static bool is_predicate(Node* node);\n+  static bool is_predicate(const Node* node);\n@@ -489,1 +489,1 @@\n-                                              Node* new_ctrl, PhaseIdealLoop* phase);\n+                                              Node* new_control, PhaseIdealLoop* phase) const;\n@@ -492,1 +492,1 @@\n-  OpaqueTemplateAssertionPredicateNode* clone(Node* new_control, PhaseIdealLoop* phase);\n+  OpaqueTemplateAssertionPredicateNode* clone(Node* new_control, PhaseIdealLoop* phase) const;\n@@ -494,1 +494,1 @@\n-                                                               PhaseIdealLoop* phase);\n+                                                               PhaseIdealLoop* phase) const;\n@@ -496,3 +496,3 @@\n-                                                                          Node* new_stride, PhaseIdealLoop* phase);\n-  void replace_opaque_stride_input(Node* new_stride, PhaseIterGVN& igvn);\n-  OpaqueInitializedAssertionPredicateNode* clone_and_fold_opaque_loop_nodes(Node* new_ctrl, PhaseIdealLoop* phase);\n+                                                                          Node* new_stride, PhaseIdealLoop* phase) const;\n+  void replace_opaque_stride_input(Node* new_stride, PhaseIterGVN& igvn) const;\n+  OpaqueInitializedAssertionPredicateNode* clone_and_fold_opaque_loop_nodes(Node* new_control, PhaseIdealLoop* phase) const;\n@@ -517,1 +517,1 @@\n-  static bool is_template_assertion_predicate(Node* node);\n+  static bool is_template_assertion_predicate(const Node* node);\n@@ -584,1 +584,1 @@\n-                                     AssertionPredicateType assertion_predicate_type);\n+                                     AssertionPredicateType assertion_predicate_type) const;\n@@ -586,1 +586,1 @@\n-                                  AssertionPredicateType assertion_predicate_type);\n+                                  AssertionPredicateType assertion_predicate_type) const;\n@@ -589,1 +589,1 @@\n-                     AssertionPredicateType assertion_predicate_type);\n+                     AssertionPredicateType assertion_predicate_type) const;\n@@ -591,4 +591,4 @@\n-                         AssertionPredicateType assertion_predicate_type);\n-  IfTrueNode* create_success_path(IfNode* if_node, IdealLoopTree* loop);\n-  void create_fail_path(IfNode* if_node, IdealLoopTree* loop, const char* halt_message);\n-  void create_halt_node(IfFalseNode* fail_proj, IdealLoopTree* loop, const char* halt_message);\n+                         AssertionPredicateType assertion_predicate_type) const;\n+  IfTrueNode* create_success_path(IfNode* if_node, IdealLoopTree* loop) const;\n+  void create_fail_path(IfNode* if_node, IdealLoopTree* loop, const char* halt_message) const;\n+  void create_halt_node(IfFalseNode* fail_proj, IdealLoopTree* loop, const char* halt_message) const;\n@@ -605,1 +605,1 @@\n-  OpaqueLoopInitNode* create_opaque_init(Node* new_control);\n+  OpaqueLoopInitNode* create_opaque_init(Node* new_control) const;\n@@ -625,1 +625,1 @@\n-  IfTrueNode* create(Node* new_control);\n+  IfTrueNode* create(Node* new_control) const;\n@@ -636,1 +636,1 @@\n-  InitializedAssertionPredicate create_from_template(IfNode* template_assertion_predicate, Node* new_control,\n+  InitializedAssertionPredicate create_from_template(const IfNode* template_assertion_predicate, Node* new_control,\n@@ -645,1 +645,1 @@\n-  OpaqueInitializedAssertionPredicateNode* create_assertion_expression_from_template(IfNode* template_assertion_predicate,\n+  OpaqueInitializedAssertionPredicateNode* create_assertion_expression_from_template(const IfNode* template_assertion_predicate,\n@@ -795,1 +795,1 @@\n-  DEBUG_ONLY(void verify_block(Node* tail);)\n+  DEBUG_ONLY(void verify_block(Node* tail) const;)\n","filename":"src\/hotspot\/share\/opto\/predicates.hpp","additions":25,"deletions":25,"binary":false,"changes":50,"status":"modified"}]}