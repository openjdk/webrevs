{"files":[{"patch":"@@ -368,5 +368,9 @@\n-        \/\/ Invalid if the pathname has a trailing space\n-        String pathname = f.getPath();\n-        int len = pathname.length();\n-        if (len > 0 && pathname.charAt(len - 1) == ' ')\n-            return true;\n+        \/\/ Invalid if the pathname or a directory in it has a trailing space\n+        File theFile = f;\n+        do {\n+            String p = theFile.getPath();\n+            int len = p.length();\n+            if (len > 0 && p.charAt(len - 1) == ' ')\n+                return true;\n+            theFile = theFile.getParentFile();\n+        } while (theFile != null);\n@@ -380,0 +384,1 @@\n+        final String pathname = f.getPath();\n","filename":"src\/java.base\/windows\/classes\/java\/io\/WinNTFileSystem.java","additions":10,"deletions":5,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -28,1 +28,2 @@\n-import static org.junit.jupiter.api.Assertions.*;\n+import static org.junit.jupiter.api.Assertions.assertFalse;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n@@ -37,1 +38,0 @@\n-    private static final String FILENAME_TRAILING_SPACE = \"foobargus \";\n@@ -39,0 +39,2 @@\n+    private static final String FILENAME_TRAILING_SPACE = \"foobargus \";\n+    private static final String DIRNAME_TRAILING_SPACE = \"foo \\\\bar\\\\gus\";\n@@ -61,1 +63,1 @@\n-            assertFalse(f.exists()); \/\/ should not reach here\n+            assertFalse(f.exists(), \"Creation of \" + f + \" should have failed\");\n@@ -68,0 +70,13 @@\n+\n+    @Test\n+    public void dirTrailingSpace() throws IOException {\n+        File f = null;\n+        try {\n+            f = new File(\".\", DIRNAME_TRAILING_SPACE);\n+            f.delete();\n+            assertFalse(f.mkdirs(), \"Creation of \" + f + \" should have failed\");\n+        } finally {\n+            if (f != null)\n+                f.delete();\n+        }\n+    }\n","filename":"test\/jdk\/java\/io\/File\/WinTrailingSpace.java","additions":18,"deletions":3,"binary":false,"changes":21,"status":"modified"}]}