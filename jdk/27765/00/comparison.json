{"files":[{"patch":"@@ -218,5 +218,0 @@\n-  if (FLAG_IS_DEFAULT(MaxRAM)) {\n-    \/\/ Do not use FLAG_SET_ERGO to update MaxRAM, as this will impact\n-    \/\/ heap setting done based on available phys_mem (see Arguments::set_heap_size).\n-    FLAG_SET_DEFAULT(MaxRAM, 1ULL*G);\n-  }\n@@ -556,1 +551,1 @@\n-void CompilerConfig::ergo_initialize() {\n+bool CompilerConfig::should_set_client_emulation_mode_flags() {\n@@ -558,1 +553,1 @@\n-  return;\n+  return false;\n@@ -564,1 +559,1 @@\n-        set_client_emulation_mode_flags();\n+        return true;\n@@ -567,1 +562,1 @@\n-      set_client_emulation_mode_flags();\n+      return true;\n@@ -571,0 +566,12 @@\n+  return false;\n+}\n+\n+void CompilerConfig::ergo_initialize() {\n+#if !COMPILER1_OR_COMPILER2\n+  return;\n+#endif\n+\n+  if (should_set_client_emulation_mode_flags()) {\n+    set_client_emulation_mode_flags();\n+  }\n+\n","filename":"src\/hotspot\/share\/compiler\/compilerDefinitions.cpp","additions":16,"deletions":9,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -154,0 +154,2 @@\n+  static bool should_set_client_emulation_mode_flags();\n+\n","filename":"src\/hotspot\/share\/compiler\/compilerDefinitions.hpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1523,0 +1523,6 @@\n+  if (CompilerConfig::should_set_client_emulation_mode_flags() &&\n+      FLAG_IS_DEFAULT(MaxRAM)) {\n+    \/\/ Reduce the maximum available memory if client emulation mode is enabled.\n+    FLAG_SET_DEFAULT(MaxRAM, 1ULL*G);\n+  }\n+\n","filename":"src\/hotspot\/share\/runtime\/arguments.cpp","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"}]}