{"files":[{"patch":"@@ -26,0 +26,1 @@\n+import java.awt.EventQueue;\n@@ -38,1 +39,0 @@\n-import java.io.IOException;\n@@ -53,4 +53,5 @@\n-    Frame frame = new Frame(\"Accessible Choice Test Frame\");\n-    Choice choice = new Choice();\n-    Button def = new Button(\"default owner\");\n-    CountDownLatch go = new CountDownLatch(1);\n+    static Frame frame = new Frame(\"Accessible Choice Test Frame\");\n+    static Choice choice = new Choice();\n+    static Button button = new Button(\"default owner\");\n+    static CountDownLatch go = new CountDownLatch(1);\n+    static volatile Point loc;\n@@ -59,5 +60,0 @@\n-        AccessibleChoiceTest app = new AccessibleChoiceTest();\n-        app.test();\n-    }\n-\n-    private void test() throws IOException {\n@@ -65,2 +61,5 @@\n-            init();\n-            start();\n+            System.out.println(\"ONE\");\n+            createAndShowUI();\n+            System.out.println(\"TWO\");\n+            test();\n+            System.out.println(\"THREE\");\n@@ -69,0 +68,1 @@\n+                System.out.println(\"FOUR\");\n@@ -74,4 +74,6 @@\n-    public void init() {\n-        frame.setLayout(new FlowLayout());\n-        frame.add(def);\n-        def.addFocusListener(new FocusAdapter() {\n+    public static void createAndShowUI() throws Exception {\n+        EventQueue.invokeAndWait(() -> {\n+            System.out.println(\"FIVE\");\n+            frame.setLayout(new FlowLayout());\n+            frame.add(button);\n+            button.addFocusListener(new FocusAdapter() {\n@@ -82,6 +84,7 @@\n-        choice.add(\"One\");\n-        choice.add(\"Two\");\n-        frame.add(choice);\n-        frame.pack();\n-        frame.setLocationRelativeTo(null);\n-        frame.setVisible(true);\n+            choice.add(\"One\");\n+            choice.add(\"Two\");\n+            frame.add(choice);\n+            frame.pack();\n+            frame.setLocationRelativeTo(null);\n+            frame.setVisible(true);\n+        });\n@@ -90,1 +93,1 @@\n-    public void start() throws IOException {\n+    public static void test() throws Exception {\n@@ -101,0 +104,2 @@\n+        System.out.println(\"SIX\");\n+\n@@ -102,2 +107,7 @@\n-        Point loc = def.getLocationOnScreen();\n-        robot.mouseMove(loc.x + 5, loc.y + 5);\n+        EventQueue.invokeAndWait(() -> {\n+            loc = button.getLocationOnScreen();\n+        });\n+        robot.mouseMove(loc.x + button.getWidth() \/ 2, loc.y\n+                + button.getHeight() \/ 2);\n+        robot.delay(500);\n+        System.out.println(\"SEVEN\");\n@@ -106,0 +116,1 @@\n+        System.out.println(\"EIGHT\");\n@@ -113,1 +124,1 @@\n-        if (!def.isFocusOwner()) {\n+        if (!button.isFocusOwner()) {\n@@ -129,1 +140,1 @@\n-        \/\/ Press Down key to select next item in the choice(Motif 2.1)\n+        \/\/ Press Down key to select next item in the choice\n@@ -134,2 +145,0 @@\n-        robot.delay(500);\n-\n@@ -138,0 +147,1 @@\n+            robot.delay(500);\n@@ -148,1 +158,1 @@\n-        if (choice.getSelectedItem() != choice.getItem(1)) {\n+        if (!choice.getSelectedItem().equals(choice.getItem(1))) {\n","filename":"test\/jdk\/java\/awt\/Focus\/UnaccessibleChoice\/AccessibleChoiceTest.java","additions":40,"deletions":30,"binary":false,"changes":70,"status":"modified"}]}