{"files":[{"patch":"@@ -238,4 +238,4 @@\n-\\  <MainClass>                to execute the main method of a compiled class\\n\\\n-\\  -jar <JarFile>.jar         to execute the main class of a JAR archive\\n\\\n-\\  -m <module>[\/<MainClass>]  to execute the main class of a module\\n\\\n-\\  <SourceFile>.java          to compile and execute a single-file program\\n\\n\\\n+\\  <mainclass>                to execute the main method of a compiled class\\n\\\n+\\  -jar <jarfile>.jar         to execute the main class of a JAR archive\\n\\\n+\\  -m <module>[\/<mainclass>]  to execute the main class of a module\\n\\\n+\\  <sourcefile>.java          to compile and execute a source-file program\\n\\n\\\n","filename":"src\/java.base\/share\/classes\/sun\/launcher\/resources\/launcher.properties","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -66,0 +66,7 @@\n+enum HelpKind {\n+    HELP_NONE,\n+    HELP_CONCISE,\n+    HELP_FULL,\n+    HELP_EXTRA\n+};\n+\n@@ -68,1 +75,1 @@\n-static jboolean printUsage = JNI_FALSE;   \/* print and exit*\/\n+static enum HelpKind printUsageKind = HELP_NONE; \/* if not NONE, print specified usage and exit*\/\n@@ -70,1 +77,0 @@\n-static jboolean printXUsage = JNI_FALSE;  \/* print and exit*\/\n@@ -123,1 +129,1 @@\n-static void PrintUsage(JNIEnv* env, jboolean doXUsage, jboolean conciseUsage);\n+static void PrintUsage(JNIEnv* env, enum HelpKind printUsageKind);\n@@ -182,1 +188,1 @@\n-            printUsage = JNI_FALSE; \\\n+            printUsageKind = HELP_NONE; \\\n@@ -192,1 +198,1 @@\n-            printUsage = JNI_TRUE; \\\n+            printUsageKind = HELP_FULL; \\\n@@ -540,2 +546,2 @@\n-    if (printXUsage || printUsage || what == 0 || mode == LM_UNKNOWN) {\n-        PrintUsage(env, printXUsage, !printXUsage && !printUsage);\n+    if (printUsageKind != HELP_NONE) {\n+        PrintUsage(env, printUsageKind);\n@@ -1241,1 +1247,1 @@\n-            printUsage = JNI_TRUE;\n+            printUsageKind = HELP_FULL;\n@@ -1244,1 +1250,1 @@\n-            printUsage = JNI_TRUE;\n+            printUsageKind = HELP_FULL;\n@@ -1262,1 +1268,1 @@\n-            printXUsage = JNI_TRUE;\n+            printUsageKind = HELP_EXTRA;\n@@ -1265,1 +1271,1 @@\n-            printXUsage = JNI_TRUE;\n+            printUsageKind = HELP_EXTRA;\n@@ -1356,0 +1362,1 @@\n+            printUsageKind = HELP_CONCISE;\n@@ -1924,1 +1931,1 @@\n-PrintUsage(JNIEnv* env, jboolean doXUsage, jboolean conciseUsage)\n+PrintUsage(JNIEnv* env, enum HelpKind printUsageKind)\n@@ -1932,36 +1939,41 @@\n-  if (conciseUsage) {\n-    NULL_CHECK(printConciseUsageMessage = (*env)->GetStaticMethodID(env, cls,\n-                                        \"printConciseUsageMessage\", \"(Z)V\"));\n-    (*env)->CallStaticVoidMethod(env, cls, printConciseUsageMessage, printTo);\n-  } else if (doXUsage) {\n-    NULL_CHECK(printXUsageMessage = (*env)->GetStaticMethodID(env, cls,\n-                                        \"printXUsageMessage\", \"(Z)V\"));\n-    (*env)->CallStaticVoidMethod(env, cls, printXUsageMessage, printTo);\n-  } else {\n-    NULL_CHECK(initHelp = (*env)->GetStaticMethodID(env, cls,\n-                                        \"initHelpMessage\", \"(Ljava\/lang\/String;)V\"));\n-\n-    NULL_CHECK(vmSelect = (*env)->GetStaticMethodID(env, cls, \"appendVmSelectMessage\",\n-                                        \"(Ljava\/lang\/String;Ljava\/lang\/String;)V\"));\n-\n-    NULL_CHECK(vmSynonym = (*env)->GetStaticMethodID(env, cls,\n-                                        \"appendVmSynonymMessage\",\n-                                        \"(Ljava\/lang\/String;Ljava\/lang\/String;)V\"));\n-\n-    NULL_CHECK(printHelp = (*env)->GetStaticMethodID(env, cls,\n-                                        \"printHelpMessage\", \"(Z)V\"));\n-\n-    NULL_CHECK(jprogname = (*env)->NewStringUTF(env, _program_name));\n-\n-    \/* Initialize the usage message with the usual preamble *\/\n-    (*env)->CallStaticVoidMethod(env, cls, initHelp, jprogname);\n-    CHECK_EXCEPTION_RETURN();\n-\n-\n-    \/* Assemble the other variant part of the usage *\/\n-    for (i=1; i<knownVMsCount; i++) {\n-      if (knownVMs[i].flag == VM_KNOWN) {\n-        NULL_CHECK(vm1 =  (*env)->NewStringUTF(env, knownVMs[i].name));\n-        NULL_CHECK(vm2 =  (*env)->NewStringUTF(env, knownVMs[i].name+1));\n-        (*env)->CallStaticVoidMethod(env, cls, vmSelect, vm1, vm2);\n-        CHECK_EXCEPTION_RETURN();\n+  switch (printUsageKind) {\n+    case HELP_NONE: break;\n+    case HELP_CONCISE:\n+      NULL_CHECK(printConciseUsageMessage = (*env)->GetStaticMethodID(env, cls,\n+                                          \"printConciseUsageMessage\", \"(Z)V\"));\n+      (*env)->CallStaticVoidMethod(env, cls, printConciseUsageMessage, printTo);\n+      break;\n+    case HELP_EXTRA:\n+      NULL_CHECK(printXUsageMessage = (*env)->GetStaticMethodID(env, cls,\n+                                          \"printXUsageMessage\", \"(Z)V\"));\n+      (*env)->CallStaticVoidMethod(env, cls, printXUsageMessage, printTo);\n+      break;\n+    case HELP_FULL:\n+      NULL_CHECK(initHelp = (*env)->GetStaticMethodID(env, cls,\n+                                          \"initHelpMessage\", \"(Ljava\/lang\/String;)V\"));\n+\n+      NULL_CHECK(vmSelect = (*env)->GetStaticMethodID(env, cls, \"appendVmSelectMessage\",\n+                                          \"(Ljava\/lang\/String;Ljava\/lang\/String;)V\"));\n+\n+      NULL_CHECK(vmSynonym = (*env)->GetStaticMethodID(env, cls,\n+                                          \"appendVmSynonymMessage\",\n+                                          \"(Ljava\/lang\/String;Ljava\/lang\/String;)V\"));\n+\n+      NULL_CHECK(printHelp = (*env)->GetStaticMethodID(env, cls,\n+                                          \"printHelpMessage\", \"(Z)V\"));\n+\n+      NULL_CHECK(jprogname = (*env)->NewStringUTF(env, _program_name));\n+\n+      \/* Initialize the usage message with the usual preamble *\/\n+      (*env)->CallStaticVoidMethod(env, cls, initHelp, jprogname);\n+      CHECK_EXCEPTION_RETURN();\n+\n+\n+      \/* Assemble the other variant part of the usage *\/\n+      for (i=1; i<knownVMsCount; i++) {\n+        if (knownVMs[i].flag == VM_KNOWN) {\n+          NULL_CHECK(vm1 =  (*env)->NewStringUTF(env, knownVMs[i].name));\n+          NULL_CHECK(vm2 =  (*env)->NewStringUTF(env, knownVMs[i].name+1));\n+          (*env)->CallStaticVoidMethod(env, cls, vmSelect, vm1, vm2);\n+          CHECK_EXCEPTION_RETURN();\n+        }\n@@ -1969,7 +1981,7 @@\n-    }\n-    for (i=1; i<knownVMsCount; i++) {\n-      if (knownVMs[i].flag == VM_ALIASED_TO) {\n-        NULL_CHECK(vm1 =  (*env)->NewStringUTF(env, knownVMs[i].name));\n-        NULL_CHECK(vm2 =  (*env)->NewStringUTF(env, knownVMs[i].alias+1));\n-        (*env)->CallStaticVoidMethod(env, cls, vmSynonym, vm1, vm2);\n-        CHECK_EXCEPTION_RETURN();\n+      for (i=1; i<knownVMsCount; i++) {\n+        if (knownVMs[i].flag == VM_ALIASED_TO) {\n+          NULL_CHECK(vm1 =  (*env)->NewStringUTF(env, knownVMs[i].name));\n+          NULL_CHECK(vm2 =  (*env)->NewStringUTF(env, knownVMs[i].alias+1));\n+          (*env)->CallStaticVoidMethod(env, cls, vmSynonym, vm1, vm2);\n+          CHECK_EXCEPTION_RETURN();\n+        }\n@@ -1977,1 +1989,0 @@\n-    }\n@@ -1979,2 +1990,3 @@\n-    \/* Complete the usage message and print to stderr*\/\n-    (*env)->CallStaticVoidMethod(env, cls, printHelp, printTo);\n+      \/* Complete the usage message and print to stderr*\/\n+      (*env)->CallStaticVoidMethod(env, cls, printHelp, printTo);\n+      break;\n","filename":"src\/java.base\/share\/native\/libjli\/java.c","additions":70,"deletions":58,"binary":false,"changes":128,"status":"modified"}]}