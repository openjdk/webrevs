{"files":[{"patch":"@@ -221,1 +221,1 @@\n-  _frame_size = align_up(register_save_size, frame::alignment_in_bytes) + frame::z_abi_160_size; \/\/ FIXME: this could be restricted to argument only\n+  _frame_size = align_up(register_save_size, frame::alignment_in_bytes) + frame::z_abi_160_size;\n@@ -224,1 +224,1 @@\n-  __ push_frame(_frame_size, Z_R14); \/\/ FIXME: check if Z_R1_scaratch can do a job here;\n+  __ push_frame(_frame_size, Z_R14);\n@@ -280,2 +280,13 @@\n-    } else if (false \/* vm_reg->is_VectorRegister() *\/){\n-      fatal(\"Vector register support is not there yet!\");\n+    } else if (vm_reg->is_VectorRegister()){\n+      VectorRegister vs_reg = vm_reg->as_VectorRegister();\n+      if (vs_reg->encoding() >= Z_V2->encoding() && vs_reg->encoding() <= Z_V31->encoding()) {\n+        reg_save_index += 2;\n+        Register spill_addr = Z_R0;\n+        if (action == ACTION_SAVE) {\n+          __ z_vst(vs_reg, Address(Z_SP, offset - reg_save_index * BytesPerWord));\n+        } else if (action == ACTION_RESTORE) {\n+          __ z_vl(vs_reg, Address(Z_SP, offset - reg_save_index * BytesPerWord));\n+        } else {\n+          assert(action == ACTION_COUNT_ONLY, \"Sanity\");\n+        }\n+      }\n","filename":"src\/hotspot\/cpu\/s390\/gc\/shared\/barrierSetAssembler_s390.cpp","additions":15,"deletions":4,"binary":false,"changes":19,"status":"modified"}]}