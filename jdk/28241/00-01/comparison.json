{"files":[{"patch":"@@ -88,1 +88,1 @@\n-  assert(pd_call_destination(addr()) == x, \"fail in reloc\");\n+  guarantee(pd_call_destination(addr()) == x, \"fail in reloc\");\n","filename":"src\/hotspot\/cpu\/aarch64\/relocInfo_aarch64.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1507,2 +1507,12 @@\n-    \/\/ Direct calls may no longer be in range and the use of a trampoline may now be required.\n-    \/\/ Instead, allow trampoline relocations to update their owners and perform the necessary checks.\n+    \/\/ After an nmethod is moved, some direct call sites may end up out of range.\n+    \/\/ CallRelocation::fix_relocation_after_move() assumes the target is always\n+    \/\/ reachable and does not check branch range. Calling it without range checks\n+    \/\/ could cause us to write an offset too large for the instruction.\n+    \/\/\n+    \/\/ If a call site has a trampoline, we skip the normal call relocation. The\n+    \/\/ associated trampoline_stub_Relocation will handle the call and the\n+    \/\/ trampoline, including range checks and updating the branch as needed.\n+    \/\/\n+    \/\/ If no trampoline exists, we can assume the call target is always\n+    \/\/ reachable and therefore within direct branch range, so calling\n+    \/\/ CallRelocation::fix_relocation_after_move() is safe.\n","filename":"src\/hotspot\/share\/code\/nmethod.cpp","additions":12,"deletions":2,"binary":false,"changes":14,"status":"modified"}]}