{"files":[{"patch":"@@ -66,0 +66,22 @@\n+\/\/ Branch-free implementation to convert !=0 to 1\n+\/\/ Set register dst to 1 if dst is non-zero. Use setbcr instruction on Power10.\n+void MacroAssembler::normalize_bool(Register dst, Register temp, bool is_64bit) {\n+\n+  if (VM_Version::has_brw()) {\n+    if (is_64bit) {\n+      cmpdi(CCR0, dst, 0);\n+    } else {\n+      cmpwi(CCR0, dst, 0);\n+    }\n+    setbcr(dst, CCR0, Assembler::equal);\n+  } else {\n+    neg(temp, dst);\n+    orr(temp, dst, temp);\n+    if (is_64bit) {\n+      srdi(dst, temp, 63);\n+    } else {\n+      srwi(dst, temp, 31);\n+    }\n+  }\n+}\n+\n@@ -345,21 +367,0 @@\n-\/\/ Branch-free implementation to convert !=0 to 1\n-\/\/ Set register dst to 1 if dst is non-zero. Use setbcr instruction on Power10.\n-void MacroAssembler::normalize_bool(Register dst, Register temp, bool is_64bit) {\n-\n-  if (VM_Version::has_brw()) {\n-    if (is_64bit) {\n-      cmpdi(CCR0, dst, 0);\n-    } else {\n-      cmpwi(CCR0, dst, 0);\n-    }\n-    setbcr(dst, CCR0, Assembler::equal);\n-  } else {\n-    neg(temp, dst);\n-    orr(temp, dst, temp);\n-    if (is_64bit) {\n-      srdi(dst, temp, 63);\n-    } else {\n-      srwi(dst, temp, 31);\n-    }\n-  }\n-}\n","filename":"src\/hotspot\/cpu\/ppc\/macroAssembler_ppc.cpp","additions":22,"deletions":21,"binary":false,"changes":43,"status":"modified"},{"patch":"@@ -57,0 +57,2 @@\n+  \/\/ Branch-free implementation to convert !=0 to 1.\n+  void normalize_bool(Register dst, Register temp, bool use_64bit);\n@@ -297,2 +299,0 @@\n-  \/\/ Branch-free implementation to convert !=0 to 1.\n-  void normalize_bool(Register dst, Register temp, bool use_64bit);\n","filename":"src\/hotspot\/cpu\/ppc\/macroAssembler_ppc.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}