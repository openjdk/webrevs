{"files":[{"patch":"@@ -62,1 +62,0 @@\n-            System.out.println(arg);\n@@ -226,1 +225,1 @@\n-    record CompressTestCase(String[] tokens, String expectedCompressValue, boolean expectedMainFlag) {}\n+    record CompressTestCase(String[] tokens, String expectedCompressValue) {}\n@@ -231,2 +230,2 @@\n-                new CompressTestCase(new String[] {\"-c\", \"0\"}, \"0\", false),\n-                new CompressTestCase(new String[] {\"--compress=zip-0\"}, \"zip-0\", false),\n+                new CompressTestCase(new String[] {\"-c\", \"0\"}, \"0\"),\n+                new CompressTestCase(new String[] {\"--compress=zip-0\"}, \"zip-0\"),\n@@ -234,2 +233,2 @@\n-                new CompressTestCase(new String[] {\"-c\", \"1\"}, \"1\", false),\n-                new CompressTestCase(new String[] {\"--compress=zip-1\"}, \"zip-1\", false),\n+                new CompressTestCase(new String[] {\"-c\", \"1\"}, \"1\"),\n+                new CompressTestCase(new String[] {\"--compress=zip-1\"}, \"zip-1\"),\n@@ -237,2 +236,2 @@\n-                new CompressTestCase(new String[] {\"-c\", \"2\"}, \"2\", false),\n-                new CompressTestCase(new String[] {\"--compress=zip-2\"}, \"zip-2\", false),\n+                new CompressTestCase(new String[] {\"-c\", \"2\"}, \"2\"),\n+                new CompressTestCase(new String[] {\"--compress=zip-2\"}, \"zip-2\"),\n@@ -240,7 +239,7 @@\n-                new CompressTestCase(new String[] {\"--compress=zip-3\"}, \"zip-3\", false),\n-                new CompressTestCase(new String[] {\"--compress=zip-4\"}, \"zip-4\", false),\n-                new CompressTestCase(new String[] {\"--compress=zip-5\"}, \"zip-5\", false),\n-                new CompressTestCase(new String[] {\"--compress=zip-6\"}, \"zip-6\", false),\n-                new CompressTestCase(new String[] {\"--compress=zip-7\"}, \"zip-7\", false),\n-                new CompressTestCase(new String[] {\"--compress=zip-8\"}, \"zip-8\", false),\n-                new CompressTestCase(new String[] {\"--compress=zip-9\"}, \"zip-9\", false)\n+                new CompressTestCase(new String[] {\"--compress=zip-3\"}, \"zip-3\"),\n+                new CompressTestCase(new String[] {\"--compress=zip-4\"}, \"zip-4\"),\n+                new CompressTestCase(new String[] {\"--compress=zip-5\"}, \"zip-5\"),\n+                new CompressTestCase(new String[] {\"--compress=zip-6\"}, \"zip-6\"),\n+                new CompressTestCase(new String[] {\"--compress=zip-7\"}, \"zip-7\"),\n+                new CompressTestCase(new String[] {\"--compress=zip-8\"}, \"zip-8\"),\n+                new CompressTestCase(new String[] {\"--compress=zip-9\"}, \"zip-9\")\n@@ -263,1 +262,0 @@\n-        assertEquals(testCase.expectedMainFlag(), mainFlag);\n@@ -265,1 +263,24 @@\n-}\n\\ No newline at end of file\n+\n+\n+    @Test\n+    public void testCompressInvalidValue() {\n+        var invalidOptValues = List.of(\n+                new CompressTestCase(new String[] {\"-c\", null}, null),\n+                new CompressTestCase(new String[] {\"-c\", \"3\"}, \"3\"),\n+                new CompressTestCase(new String[] {\"--compress=42\"}, \"42\"),\n+                new CompressTestCase(new String[] {\"--compress=zip-\"}, \"zip-\"),\n+                new CompressTestCase(new String[] {\"--compress=zip-10\"}, \"zip-10\")\n+        );\n+\n+        for (var args : invalidOptValues) {\n+            try {\n+                var remaining = optionsHelper.handleOptions(this, args.tokens);\n+                assertTrue(remaining.isEmpty());\n+                assertEquals(args.expectedCompressValue, compressArgValue);\n+            } catch (BadArgs e) {\n+                \/\/ expected\n+            }\n+        }\n+    }\n+}\n+\n","filename":"test\/jdk\/tools\/jlink\/TaskHelperTest.java","additions":38,"deletions":17,"binary":false,"changes":55,"status":"modified"}]}