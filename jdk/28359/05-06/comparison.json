{"files":[{"patch":"@@ -361,0 +361,33 @@\n+        \/\/ short command  without argument- JDK-8321139\n+        {\n+            String[] userOptions = {\"-c\"};\n+            String moduleName = \"invalidCompressLevelEmpty\";\n+            helper.generateDefaultJModule(moduleName, \"composite2\");\n+            helper.generateDefaultImage(userOptions, moduleName).assertFailure(\"Error: no value given for -c\");\n+        }\n+\n+        \/\/ invalid short command - JDK-8321139\n+        {\n+            String[] userOptions = {\"-c\", \"3\", \"--output\", \"image\"};\n+            String moduleName = \"invalidCompressLevel3\";\n+            helper.generateDefaultJModule(moduleName, \"composite2\");\n+            helper.generateDefaultImage(userOptions, moduleName).assertFailure(\"Error: Invalid compression level 3\");\n+        }\n+\n+\n+        \/\/ invalid argument value - JDK-8321139\n+        {\n+            String[] userOptions = {\"--compress\", \"42\", \"--output\", \"image\"};\n+            String moduleName = \"invalidCompressLevel42\";\n+            helper.generateDefaultJModule(moduleName, \"composite2\");\n+            helper.generateDefaultImage(userOptions, moduleName).assertFailure(\"Error: Invalid compression level 42\");\n+        }\n+\n+        \/\/ invalid argument value - JDK-8321139\n+        {\n+            String[] userOptions = {\"--compress\", \"zip-\", \"--output\", \"image\"};\n+            String moduleName = \"invalidCompressLevelZip\";\n+            helper.generateDefaultJModule(moduleName, \"composite2\");\n+            helper.generateDefaultImage(userOptions, moduleName).assertFailure(\"Error: Invalid compression level zip-\");\n+        }\n+\n","filename":"test\/jdk\/tools\/jlink\/JLinkTest.java","additions":33,"deletions":0,"binary":false,"changes":33,"status":"modified"},{"patch":"@@ -263,22 +263,0 @@\n-\n-\n-    @Test\n-    public void testCompressInvalidValue() {\n-        var invalidOptValues = List.of(\n-                new CompressTestCase(new String[] {\"-c\"}, null),\n-                new CompressTestCase(new String[] {\"-c 3\"}, \"3\"),\n-                new CompressTestCase(new String[] {\"--compress=42\"}, \"42\"),\n-                new CompressTestCase(new String[] {\"--compress=zip-\"}, \"zip-\"),\n-                new CompressTestCase(new String[] {\"--compress=zip-10\"}, \"zip-10\")\n-        );\n-\n-        for (var testCase : invalidOptValues) {\n-            try {\n-                var remaining = optionsHelper.handleOptions(this, testCase.tokens);\n-                assertTrue(remaining.isEmpty());\n-                assertEquals(testCase.expectedCompressValue, compressArgValue);\n-            } catch (BadArgs e) {\n-                \/\/ expected\n-            }\n-        }\n-    }\n","filename":"test\/jdk\/tools\/jlink\/TaskHelperTest.java","additions":0,"deletions":22,"binary":false,"changes":22,"status":"modified"}]}