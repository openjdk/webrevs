{"files":[{"patch":"@@ -1656,1 +1656,1 @@\n-  assert(stride.compute_non_zero_stride_con(exit_test.mask(), bt), \"illegal condition\");\n+  assert(stride.compute_non_zero_stride_con(exit_test.mask(), bt) != 0, \"illegal condition\");\n@@ -1686,1 +1686,1 @@\n-  \/\/ Find the trip-counter increment & limit.  Limit must be loop invariant.\n+  \/\/ Find the trip-counter increment & limit. Limit must be loop invariant.\n@@ -1759,3 +1759,3 @@\n-  if (!_stride_node->is_Con()) {     \/\/ Oops, swap these\n-    if (!_xphi->is_Con()) {     \/\/ Is the other guy a constant?\n-      return;            \/\/ Nope, unknown stride, bail out\n+  if (!_stride_node->is_Con()) { \/\/ Oops, swap these\n+    if (!_xphi->is_Con()) {      \/\/ Is the other guy a constant?\n+      return;                    \/\/ Nope, unknown stride, bail out\n@@ -1763,2 +1763,1 @@\n-\n-    swap(_xphi, _stride_node);        \/\/ 'incr' is commutative, so ok to swap\n+    swap(_xphi, _stride_node); \/\/ 'incr' is commutative, so ok to swap\n@@ -1841,3 +1840,3 @@\n-  Node* sfpt = _back_control->in(0)->in(0);\n-  if (_loop->_child != nullptr && sfpt->Opcode() == Op_SafePoint) {\n-    _safepoint = sfpt->as_SafePoint();\n+  Node* safepoint = _back_control->in(0)->in(0);\n+  if (_loop->_child != nullptr && safepoint->Opcode() == Op_SafePoint) {\n+    _safepoint = safepoint->as_SafePoint();\n@@ -2390,5 +2389,5 @@\n-    \/\/ while (true)\n-    \/\/    sum + = array[i];\n-    \/\/    i++;\n-    \/\/    i = i && 0x7fff;\n-    \/\/  }\n+    \/\/ while (true) {\n+    \/\/   sum + = array[i];\n+    \/\/   i++;\n+    \/\/   i = i && 0x7fff;\n+    \/\/ }\n@@ -2566,1 +2565,1 @@\n-  if (!TypeInteger::bottom(_iv_bt)->higher_equal(_structure.phi()->bottom_type())) {\n+  if (!TypeInteger::bottom(_iv_bt)->higher_equal(phi->bottom_type())) {\n@@ -2568,2 +2567,2 @@\n-        PhiNode::make(_structure.phi()->in(0), _structure.phi()->in(LoopNode::EntryControl), TypeInteger::bottom(_iv_bt));\n-    nphi->set_req(LoopNode::LoopBackControl, _structure.phi()->in(LoopNode::LoopBackControl));\n+        PhiNode::make(phi->in(0), phi->in(LoopNode::EntryControl), TypeInteger::bottom(_iv_bt));\n+    nphi->set_req(LoopNode::LoopBackControl, phi->in(LoopNode::LoopBackControl));\n@@ -2572,1 +2571,3 @@\n-    igvn->replace_node(_structure.phi(), nphi);\n+    igvn->replace_node(phi, nphi);\n+    phi = nphi->as_Phi();\n+  }\n@@ -5473,2 +5474,2 @@\n-volatile int CountedLoopConverter::_long_loop_counted_loops = 0; \/\/ Number of long loops successfully transformed to a\n-                                                                 \/\/ counted loop\n+\/\/ Number of long loops successfully transformed to a counted loop\n+volatile int CountedLoopConverter::_long_loop_counted_loops = 0;                                               \n","filename":"src\/hotspot\/share\/opto\/loopnode.cpp","additions":22,"deletions":21,"binary":false,"changes":43,"status":"modified"},{"patch":"@@ -4282,1 +4282,1 @@\n-    Node* loop_incr = loop_exit.incr();\n+    const Node* loop_incr = loop_exit.incr();\n","filename":"src\/hotspot\/share\/opto\/loopopts.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}