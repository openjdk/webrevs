{"files":[{"patch":"@@ -1797,1 +1797,0 @@\n-  _back_control = _phase->loop_exit_control(_head, _loop);\n@@ -2412,1 +2411,1 @@\n-bool CountedLoopConverter::has_truncation_wrap(CountedLoopNode::TruncatedIncrement truncation, Node* phi,\n+bool CountedLoopConverter::has_truncation_wrap(TruncatedIncrement truncation, Node* phi,\n@@ -2739,1 +2738,1 @@\n-                                                     const BasicType iv_bt, Node* loop_entry) const {\n+                                                           const BasicType iv_bt, Node* loop_entry) const {\n@@ -3071,1 +3070,1 @@\n-void CountedLoopNode::TruncatedIncrement::build(Node* expr) {\n+void CountedLoopConverter::TruncatedIncrement::build(Node* expr) {\n","filename":"src\/hotspot\/share\/opto\/loopnode.cpp","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -276,26 +276,0 @@\n-  \/\/ Match increment with optional truncation\n-  class TruncatedIncrement {\n-    bool _is_valid = false;\n-\n-    BasicType _bt;\n-\n-    Node* _incr = nullptr;\n-    Node* _outer_trunc = nullptr;\n-    Node* _inner_trunc = nullptr;\n-    const TypeInteger* _trunc_type = nullptr;\n-\n-  public:\n-    TruncatedIncrement(BasicType bt) :\n-      _bt(bt) {}\n-\n-    void build(Node* expr);\n-\n-    bool is_valid() const { return _is_valid; }\n-    Node* incr() const { return _incr; }\n-\n-    \/\/ Optional truncation for: CHAR: (i+1)&0x7fff, BYTE: ((i+1)<<8)>>8, or SHORT: ((i+1)<<16)>>16\n-    Node* outer_trunc() const { return _outer_trunc; } \/\/ the outermost truncating node (either the & or the final >>)\n-    Node* inner_trunc() const { return _inner_trunc; } \/\/ the inner truncating node, if applicable (the << in a <<\/>> pair)\n-    const TypeInteger* trunc_type() const { return _trunc_type; }\n-  };\n-\n@@ -2063,0 +2037,26 @@\n+  \/\/ Match increment with optional truncation\n+  class TruncatedIncrement {\n+    bool _is_valid = false;\n+\n+    BasicType _bt;\n+\n+    Node* _incr = nullptr;\n+    Node* _outer_trunc = nullptr;\n+    Node* _inner_trunc = nullptr;\n+    const TypeInteger* _trunc_type = nullptr;\n+\n+  public:\n+    TruncatedIncrement(BasicType bt) :\n+      _bt(bt) {}\n+\n+    void build(Node* expr);\n+\n+    bool is_valid() const { return _is_valid; }\n+    Node* incr() const { return _incr; }\n+\n+    \/\/ Optional truncation for: CHAR: (i+1)&0x7fff, BYTE: ((i+1)<<8)>>8, or SHORT: ((i+1)<<16)>>16\n+    Node* outer_trunc() const { return _outer_trunc; } \/\/ the outermost truncating node (either the & or the final >>)\n+    Node* inner_trunc() const { return _inner_trunc; } \/\/ the inner truncating node, if applicable (the << in a <<\/>> pair)\n+    const TypeInteger* trunc_type() const { return _trunc_type; }\n+  };\n+\n@@ -2074,1 +2074,1 @@\n-    CountedLoopNode::TruncatedIncrement _truncated_increment;\n+    TruncatedIncrement _truncated_increment;\n@@ -2101,1 +2101,1 @@\n-    CountedLoopNode::TruncatedIncrement& truncated_increment() { return _truncated_increment; }\n+    TruncatedIncrement& truncated_increment() { return _truncated_increment; }\n@@ -2135,1 +2135,1 @@\n-  bool has_truncation_wrap(CountedLoopNode::TruncatedIncrement truncation, Node* phi, jlong stride_con);\n+  bool has_truncation_wrap(TruncatedIncrement truncation, Node* phi, jlong stride_con);\n","filename":"src\/hotspot\/share\/opto\/loopnode.hpp","additions":29,"deletions":29,"binary":false,"changes":58,"status":"modified"},{"patch":"@@ -2846,1 +2846,1 @@\n-      CountedLoopNode::TruncatedIncrement add(T_INT);\n+      CountedLoopConverter::TruncatedIncrement add(T_INT);\n@@ -2856,1 +2856,1 @@\n-    CountedLoopNode::TruncatedIncrement add(T_INT);\n+    CountedLoopConverter::TruncatedIncrement add(T_INT);\n@@ -4288,1 +4288,1 @@\n-      CountedLoopNode::TruncatedIncrement increment(T_INT);\n+      CountedLoopConverter::TruncatedIncrement increment(T_INT);\n","filename":"src\/hotspot\/share\/opto\/loopopts.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"}]}