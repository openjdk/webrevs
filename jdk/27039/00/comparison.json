{"files":[{"patch":"@@ -1,1 +1,1 @@\n-\/*\n+package test.java.awt.Focus;\/*\n@@ -38,0 +38,1 @@\n+import java.awt.Rectangle;\n@@ -40,0 +41,1 @@\n+import java.awt.Toolkit;\n@@ -45,0 +47,5 @@\n+import java.io.File;\n+import java.util.concurrent.CountDownLatch;\n+import java.util.concurrent.TimeUnit;\n+\n+import javax.imageio.ImageIO;\n@@ -52,1 +59,0 @@\n-    static volatile boolean passed;\n@@ -56,0 +62,1 @@\n+    static CountDownLatch focusGainedLatch = new CountDownLatch(1);\n@@ -78,5 +85,1 @@\n-        new Thread(new Runnable() {\n-            public void run() {\n-                dialog.setVisible(true);\n-            }\n-        }).start();\n+        new Thread(() -> dialog.setVisible(true)).start();\n@@ -101,1 +104,1 @@\n-                passed = true;\n+                focusGainedLatch.countDown();\n@@ -119,0 +122,11 @@\n+    private static void captureScreen() {\n+        try {\n+            final Rectangle screenBounds = new Rectangle(\n+                    Toolkit.getDefaultToolkit().getScreenSize());\n+            ImageIO.write(r.createScreenCapture(screenBounds),\n+                    \"png\", new File(\"ComponentLostFocusTest.png\"));\n+        } catch (Exception e) {\n+            e.printStackTrace();\n+        }\n+    }\n+\n@@ -141,3 +155,3 @@\n-\n-            if (!passed) {\n-                throw new RuntimeException(\"TextField got no focus! Test failed.\");\n+            if (!focusGainedLatch.await(5, TimeUnit.SECONDS)) {\n+                captureScreen();\n+                throw new RuntimeException(\"Waited too long, TextField got no focus! Test failed.\");\n@@ -154,1 +168,0 @@\n-\n","filename":"test\/jdk\/java\/awt\/Focus\/ComponentLostFocusTest.java","additions":25,"deletions":12,"binary":false,"changes":37,"status":"modified"}]}