{"files":[{"patch":"@@ -82,10 +82,1 @@\n-compiler\/whitebox\/DeoptimizeRelocatedNMethod.java#G1 8369147 generic-all\n-compiler\/whitebox\/DeoptimizeRelocatedNMethod.java#Parallel 8369147 generic-all\n-compiler\/whitebox\/DeoptimizeRelocatedNMethod.java#Serial 8369147 generic-all\n-compiler\/whitebox\/DeoptimizeRelocatedNMethod.java#ZGC 8369147 generic-all\n-compiler\/whitebox\/RelocateNMethod.java#G1 8369147 generic-all\n-compiler\/whitebox\/RelocateNMethod.java#Parallel 8369147 generic-all\n-compiler\/whitebox\/RelocateNMethod.java#Serial 8369147 generic-all\n-compiler\/whitebox\/RelocateNMethod.java#ZGC 8369147 generic-all\n-compiler\/whitebox\/StressNMethodRelocation.java 8369147,8369148,8369149 generic-all\n-serviceability\/jvmti\/NMethodRelocation\/NMethodRelocationTest.java 8369150,8369151 generic-all\n+serviceability\/jvmti\/NMethodRelocation\/NMethodRelocationTest.java 8369150 generic-all\n","filename":"test\/hotspot\/jtreg\/ProblemList.txt","additions":1,"deletions":10,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -31,1 +31,1 @@\n- * @requires vm.gc.Serial\n+ * @requires vm.gc == \"null\" | vm.gc == \"Serial\"\n@@ -44,1 +44,1 @@\n- * @requires vm.gc.Parallel\n+ * @requires vm.gc == \"null\" | vm.gc == \"Parallel\"\n@@ -57,1 +57,1 @@\n- * @requires vm.gc.G1\n+ * @requires vm.gc == \"null\" | vm.gc == \"G1\"\n@@ -70,1 +70,1 @@\n- * @requires vm.gc.Shenandoah\n+ * @requires vm.gc == \"null\" | vm.gc == \"Shenandoah\"\n@@ -83,1 +83,1 @@\n- * @requires vm.gc.Z\n+ * @requires vm.gc == \"null\" | vm.gc == \"Z\"\n@@ -121,1 +121,1 @@\n-        WHITE_BOX.relocateNMethodFromMethod(method, BlobType.MethodProfiled.id);\n+        WHITE_BOX.relocateNMethodFromMethod(method, BlobType.MethodNonProfiled.id);\n","filename":"test\/hotspot\/jtreg\/compiler\/whitebox\/DeoptimizeRelocatedNMethod.java","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n- * @requires vm.gc.Serial\n+ * @requires vm.gc == \"null\" | vm.gc == \"Serial\"\n@@ -49,1 +49,1 @@\n- * @requires vm.gc.Parallel\n+ * @requires vm.gc == \"null\" | vm.gc == \"Parallel\"\n@@ -65,1 +65,1 @@\n- * @requires vm.gc.G1\n+ * @requires vm.gc == \"null\" | vm.gc == \"G1\"\n@@ -81,1 +81,1 @@\n- * @requires vm.gc.Shenandoah\n+ * @requires vm.gc == \"null\" | vm.gc == \"Shenandoah\"\n@@ -97,1 +97,1 @@\n- * @requires vm.gc.Z\n+ * @requires vm.gc == \"null\" | vm.gc == \"Z\"\n@@ -135,1 +135,1 @@\n-        WHITE_BOX.relocateNMethodFromMethod(method, BlobType.MethodProfiled.id);\n+        WHITE_BOX.relocateNMethodFromMethod(method, BlobType.MethodNonProfiled.id);\n","filename":"test\/hotspot\/jtreg\/compiler\/whitebox\/RelocateNMethod.java","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -29,1 +29,1 @@\n- * @requires vm.gc.Serial\n+ * @requires vm.gc == \"null\" | vm.gc == \"Serial\"\n@@ -45,1 +45,1 @@\n- * @requires vm.gc.Serial\n+ * @requires vm.gc == \"null\" | vm.gc == \"Serial\"\n@@ -61,1 +61,1 @@\n- * @requires vm.gc.Parallel\n+ * @requires vm.gc == \"null\" | vm.gc == \"Parallel\"\n@@ -77,1 +77,1 @@\n- * @requires vm.gc.Parallel\n+ * @requires vm.gc == \"null\" | vm.gc == \"Parallel\"\n@@ -93,1 +93,1 @@\n- * @requires vm.gc.G1\n+ * @requires vm.gc == \"null\" | vm.gc == \"G1\"\n@@ -109,1 +109,1 @@\n- * @requires vm.gc.G1\n+ * @requires vm.gc == \"null\" | vm.gc == \"G1\"\n@@ -125,1 +125,1 @@\n- * @requires vm.gc.Shenandoah\n+ * @requires vm.gc == \"null\" | vm.gc == \"Shenandoah\"\n@@ -141,1 +141,1 @@\n- * @requires vm.gc.Shenandoah\n+ * @requires vm.gc == \"null\" | vm.gc == \"Shenandoah\"\n@@ -157,1 +157,1 @@\n- * @requires vm.gc.Z\n+ * @requires vm.gc == \"null\" | vm.gc == \"Z\"\n@@ -173,1 +173,1 @@\n- * @requires vm.gc.Z\n+ * @requires vm.gc == \"null\" | vm.gc == \"Z\"\n","filename":"test\/hotspot\/jtreg\/compiler\/whitebox\/RelocateNMethodMultiplePaths.java","additions":10,"deletions":10,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -31,0 +31,1 @@\n+ * @requires vm.compiler2.enabled & vm.opt.SegmentedCodeCache != false & vm.opt.TieredCompilation != false\n@@ -34,2 +35,1 @@\n- *                   -XX:+SegmentedCodeCache -XX:+UnlockExperimentalVMOptions\n- *                   -XX:+NMethodRelocation compiler.whitebox.StressNMethodRelocation\n+ *                   -XX:+UnlockExperimentalVMOptions -XX:+NMethodRelocation compiler.whitebox.StressNMethodRelocation\n@@ -48,1 +48,1 @@\n-import java.util.Arrays;\n+import java.util.ArrayList;\n@@ -55,1 +55,0 @@\n-    private static final int ACTIVE_METHODS = 1024;\n@@ -57,1 +56,1 @@\n-    private static TestMethod[] methods;\n+    private static ArrayList<TestMethod> methods;\n@@ -61,1 +60,2 @@\n-    private static long DURATION = 60_000;\n+    private static long COMPILE_DURATION = 30_000;\n+    private static long RUN_DURATION = 60_000;\n@@ -68,1 +68,1 @@\n-        methods = new TestMethod[ACTIVE_METHODS];\n+        methods = new ArrayList<>();\n@@ -111,1 +111,1 @@\n-    private static void generateCode(TestMethod[] m) throws Exception {\n+    private static void generateCode(ArrayList<TestMethod> m) throws Exception {\n@@ -114,4 +114,6 @@\n-        for (int i = 0; i < ACTIVE_METHODS; ++i) {\n-            m[i] = new TestMethod();\n-            m[i].profile(num1, num2, result);\n-            m[i].compileWithC2();\n+        long startTime = System.currentTimeMillis();\n+        while (System.currentTimeMillis() - startTime < COMPILE_DURATION) {\n+            TestMethod testMethod = new TestMethod();\n+            testMethod.profile(num1, num2, result);\n+            testMethod.compileWithC2();\n+            m.add(testMethod);\n@@ -197,1 +199,1 @@\n-            while (System.currentTimeMillis() - startTime < DURATION) {\n+            while (System.currentTimeMillis() - startTime < RUN_DURATION) {\n@@ -223,1 +225,1 @@\n-                while (System.currentTimeMillis() - startTime < DURATION) {\n+                while (System.currentTimeMillis() - startTime < RUN_DURATION) {\n","filename":"test\/hotspot\/jtreg\/compiler\/whitebox\/StressNMethodRelocation.java","additions":16,"deletions":14,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -30,0 +30,1 @@\n+ * @requires vm.gc == \"null\" | vm.gc == \"Serial\"\n","filename":"test\/hotspot\/jtreg\/serviceability\/jvmti\/NMethodRelocation\/NMethodRelocationTest.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"}]}