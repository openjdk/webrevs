{"files":[{"patch":"@@ -1819,0 +1819,1 @@\n+  INSN( vsuxei8_v, 0b0100111, 0b000, 0b01, 0b0);\n","filename":"src\/hotspot\/cpu\/riscv\/assembler_riscv.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -3881,1 +3881,3 @@\n-      Register consts = t2; \/\/ caller saved\n+      Register consts =  t2; \/\/ caller saved\n+      Register state_c = x28; \/\/ caller saved\n+      VectorRegister vindex = v1;\n@@ -3934,1 +3936,1 @@\n-      \/\/ Splat indexes in v26 if SEW = e64, but don't hurt anything.\n+      \/\/ Splat indexes in vindex if SEW = e64, but don't hurt anything.\n@@ -3937,1 +3939,1 @@\n-      __ vmv_s_x(v26, t0);\n+      __ vmv_s_x(vindex, t0);\n@@ -3939,2 +3941,0 @@\n-      \/\/ Use index-load to get {f,e,b,a},{h,g,d,c}\n-      __ vluxei8_v(v16, state, v26);\n@@ -3942,2 +3942,6 @@\n-      __ addi(t0, state, const_add\/2);\n-      __ vluxei8_v(v17, t0, v26);\n+      \/\/ const_add is equal to 4x state variable, div by 2 is thus 2, a,b\n+      __ addi(state_c, state, const_add\/2);\n+\n+      \/\/ Use index-load to get {f,e,b,a},{h,g,d,c}\n+      __ vluxei8_v(v16, state, vindex);\n+      __ vluxei8_v(v17, state_c, vindex);\n@@ -4027,18 +4031,2 @@\n-      __ vid_v(v30);                                   \/\/ v30 = {3,2,1,0}\n-      __ vxor_vi(v30, v30, 0x3);                       \/\/ v30 = {0,1,2,3}\n-      __ vrgather_vv(v26, v16, v30);                   \/\/ v26 = {f,e,b,a}\n-      __ vrgather_vv(v27, v17, v30);                   \/\/ v27 = {h,g,d,c}\n-      __ vmsgeu_vi(v0, v30, 2);                        \/\/ v0  = {f,f,t,t}\n-      \/\/ Copy elements [3..2] of v26 ({f,e}) into elements [1..0] of v17.\n-      __ vslidedown_vi(v17, v26, 2);                   \/\/ v17 = {_,_,f,e}\n-      \/\/ Merge elements [3..2] of v27 ({g,h}) into elements [3..2] of v17\n-      __ vmerge_vvm(v17, v27, v17);                    \/\/ v17 = {h,g,f,e}\n-      \/\/ Copy elements [1..0] of v27 ({c,d}) into elements [3..2] of v16.\n-      __ vslideup_vi(v16, v27, 2);                     \/\/ v16 = {d,c,_,_}\n-      \/\/ Merge elements [1..0] of v26 ({a,b}) into elements [1..0] of v16\n-      __ vmerge_vvm(v16, v16, v26);                    \/\/ v16 = {d,c,b,a}\n-\n-      \/\/ Save the hash\n-      __ vseXX_v(vset_sew, v16, state);\n-      __ addi(state, state, const_add);\n-      __ vseXX_v(vset_sew, v17, state);\n+      __ vsuxei8_v(v16, state,   vindex);\n+      __ vsuxei8_v(v17, state_c, vindex);\n","filename":"src\/hotspot\/cpu\/riscv\/stubGenerator_riscv.cpp","additions":13,"deletions":25,"binary":false,"changes":38,"status":"modified"}]}