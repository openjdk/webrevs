{"files":[{"patch":"@@ -2,2 +2,2 @@\n- * Copyright (c) 2014, 2023, Oracle and\/or its affiliates. All rights reserved.\n- * Copyright (c) 2013, 2023 SAP SE. All rights reserved.\n+ * Copyright (c) 2014, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2024 SAP SE. All rights reserved.\n@@ -3806,2 +3806,4 @@\n-    \/\/ Make sure klass is fully initialized and get instance_size.\n-    __ lbz(Rscratch, in_bytes(InstanceKlass::init_state_offset()), RinstanceKlass);\n+    \/\/ Make sure klass is initialized.\n+    assert(VM_Version::supports_fast_class_init_checks(), \"Optimization requires support for fast class initialization checks\");\n+    __ clinit_barrier(RinstanceKlass, R16_thread, nullptr \/*L_fast_path*\/, &Lslow_case);\n+\n@@ -3810,1 +3812,0 @@\n-    __ cmpdi(CCR1, Rscratch, InstanceKlass::fully_initialized);\n@@ -3813,3 +3814,1 @@\n-\n-    __ crnand(CCR0, Assembler::equal, CCR1, Assembler::equal); \/\/ slow path bit set or not fully initialized?\n-    __ beq(CCR0, Lslow_case);\n+    __ bne(CCR0, Lslow_case);\n","filename":"src\/hotspot\/cpu\/ppc\/templateTable_ppc_64.cpp","additions":7,"deletions":8,"binary":false,"changes":15,"status":"modified"}]}