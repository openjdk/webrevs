{"files":[{"patch":"@@ -394,0 +394,6 @@\n+    private void checkNegativeImageIndex(int imageIndex) {\n+        if (imageIndex < minIndex) {\n+            throw new IndexOutOfBoundsException(\"imageIndex < \" + minIndex);\n+        }\n+    }\n+\n@@ -500,3 +506,1 @@\n-        if (imageIndex < minIndex) {\n-            throw new IndexOutOfBoundsException();\n-        }\n+        checkNegativeImageIndex(imageIndex);\n@@ -843,0 +847,1 @@\n+        checkNegativeImageIndex(imageIndex);\n@@ -857,0 +862,1 @@\n+        checkNegativeImageIndex(imageIndex);\n@@ -887,0 +893,1 @@\n+        checkNegativeImageIndex(imageIndex);\n@@ -905,3 +912,1 @@\n-        if (imageIndex != 0) {\n-            throw new IndexOutOfBoundsException(\"imageIndex != 0!\");\n-        }\n+        checkNegativeImageIndex(imageIndex);\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/jpeg\/JPEGImageReader.java","additions":11,"deletions":6,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -27,2 +27,2 @@\n- * @summary Test verifies that jpeg image reader getImageTypes() throws\n- *          IndexOutOfBoundsException when non-zero index is passed.\n+ * @summary Test verifies that jpeg image reader throws\n+ *          IndexOutOfBoundsException when \"-1\" image index is used.\n@@ -53,0 +53,2 @@\n+            \/\/ Iterate through all functions where we don't have sufficient\n+            \/\/ checks for -1 index\n@@ -54,0 +56,3 @@\n+            int width = ir.getWidth(-1);\n+            int height = ir.getHeight(-1);\n+            ImageTypeSpecifier specifier = ir.getRawImageType(-1);\n@@ -55,1 +60,1 @@\n-            if (Objects.equals(e.getMessage(), \"imageIndex != 0!\")) {\n+            if (Objects.equals(e.getMessage(), \"imageIndex < 0\")) {\n@@ -61,1 +66,1 @@\n-                + \" IndexOutOfBoundsException for non-zero image index\");\n+                + \" IndexOutOfBoundsException for -1 image index\");\n","filename":"test\/jdk\/javax\/imageio\/plugins\/jpeg\/JpegNegativeImageIndexTest.java","additions":9,"deletions":4,"binary":false,"changes":13,"status":"modified"}]}