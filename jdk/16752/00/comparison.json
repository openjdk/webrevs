{"files":[{"patch":"@@ -459,6 +459,8 @@\n-                    cps = new CUPSPrinter(printer);\n-                    mediaSizeNames = cps.getMediaSizeNames();\n-                    mediaTrays = cps.getMediaTrays();\n-                    customMediaSizeNames = cps.getCustomMediaSizeNames();\n-                    defaultMediaIndex = cps.getDefaultMediaIndex();\n-                    rawResolutions = cps.getRawResolutions();\n+                    if (cps == null) {\n+                        cps = new CUPSPrinter(printer);\n+                        mediaSizeNames = cps.getMediaSizeNames();\n+                        mediaTrays = cps.getMediaTrays();\n+                        customMediaSizeNames = cps.getCustomMediaSizeNames();\n+                        defaultMediaIndex = cps.getDefaultMediaIndex();\n+                        rawResolutions = cps.getRawResolutions();\n+                    }\n@@ -1228,3 +1230,11 @@\n-        \/\/ update getAttMap by sending again get-attributes IPP request\n-        init = false;\n-        initAttributes();\n+        if (!init) {\n+            \/\/ get all attributes for the first time.\n+            initAttributes();\n+        } else {\n+            \/\/ only need service attributes updated.\n+            \/\/ update getAttMap by sending again get-attributes IPP request\n+            if ((urlConnection = getIPPConnection(myURL)) != null) {\n+                opGetAttributes();\n+                urlConnection.disconnect();\n+            }\n+        }\n","filename":"src\/java.desktop\/unix\/classes\/sun\/print\/IPPPrintService.java","additions":19,"deletions":9,"binary":false,"changes":28,"status":"modified"}]}