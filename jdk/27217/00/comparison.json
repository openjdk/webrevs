{"files":[{"patch":"@@ -1678,8 +1678,1 @@\n-    if (id < 0) {\n-      StubCodeDesc* desc = StubCodeDesc::desc_for(addr);\n-      if (desc == nullptr) {\n-        desc = StubCodeDesc::desc_for(addr + frame::pc_return_offset);\n-      }\n-      const char* sub_name = (desc != nullptr) ? desc->name() : \"<unknown>\";\n-      assert(false, \"Address \" INTPTR_FORMAT \" for Stub:%s is missing in AOT Code Cache addresses table\", p2i(addr), sub_name);\n-    } else {\n+    if (id >= 0) {\n@@ -1688,28 +1681,37 @@\n-  } else {\n-    CodeBlob* cb = CodeCache::find_blob(addr);\n-    if (cb != nullptr) {\n-      \/\/ Search in code blobs\n-      int id_base = _shared_blobs_base;\n-      id = search_address(addr, _shared_blobs_addr, _blobs_max);\n-      if (id < 0) {\n-        assert(false, \"Address \" INTPTR_FORMAT \" for Blob:%s is missing in AOT Code Cache addresses table\", p2i(addr), cb->name());\n-      } else {\n-        return id_base + id;\n-      }\n-    } else {\n-      \/\/ Search in runtime functions\n-      id = search_address(addr, _extrs_addr, _extrs_length);\n-      if (id < 0) {\n-        ResourceMark rm;\n-        const int buflen = 1024;\n-        char* func_name = NEW_RESOURCE_ARRAY(char, buflen);\n-        int offset = 0;\n-        if (os::dll_address_to_function_name(addr, func_name, buflen, &offset)) {\n-          if (offset > 0) {\n-            \/\/ Could be address of C string\n-            uint dist = (uint)pointer_delta(addr, (address)os::init, 1);\n-            log_debug(aot, codecache)(\"Address \" INTPTR_FORMAT \" (offset %d) for runtime target '%s' is missing in AOT Code Cache addresses table\",\n-                                      p2i(addr), dist, (const char*)addr);\n-            assert(dist > (uint)(_all_max + MAX_STR_COUNT), \"change encoding of distance\");\n-            return dist;\n-          }\n+    StubCodeDesc* desc = StubCodeDesc::desc_for(addr);\n+    if (desc == nullptr) {\n+      desc = StubCodeDesc::desc_for(addr + frame::pc_return_offset);\n+    }\n+    const char* sub_name = (desc != nullptr) ? desc->name() : \"<unknown>\";\n+    assert(false, \"Address \" INTPTR_FORMAT \" for Stub:%s is missing in AOT Code Cache addresses table\", p2i(addr), sub_name);\n+    return id;\n+  }\n+  CodeBlob* cb = CodeCache::find_blob(addr);\n+  if (cb != nullptr) {\n+    \/\/ Search in code blobs\n+    int id_base = _shared_blobs_base;\n+    id = search_address(addr, _shared_blobs_addr, _blobs_max);\n+    if (id >= 0) {\n+      return id_base + id;\n+    }\n+    assert(false, \"Address \" INTPTR_FORMAT \" for Blob:%s is missing in AOT Code Cache addresses table\", p2i(addr), cb->name());\n+    return id;\n+  }\n+  \/\/ Search in runtime functions\n+  id = search_address(addr, _extrs_addr, _extrs_length);\n+  if (id >= 0) {\n+    return _extrs_base + id;\n+  }\n+  ResourceMark rm;\n+  const int buflen = 1024;\n+  char* func_name = NEW_RESOURCE_ARRAY(char, buflen);\n+  int offset = 0;\n+  if (os::dll_address_to_function_name(addr, func_name, buflen, &offset)) {\n+    if (offset > 0) {\n+      \/\/ Could be address of C string\n+      uint dist = (uint)pointer_delta(addr, (address)os::init, 1);\n+      log_debug(aot, codecache)(\"Address \" INTPTR_FORMAT \" (offset %d) for runtime target '%s' is missing in AOT Code Cache addresses table\",\n+                                p2i(addr), dist, (const char*)addr);\n+      assert(dist > (uint)(_all_max + MAX_STR_COUNT), \"change encoding of distance\");\n+      return dist;\n+    }\n@@ -1717,4 +1719,4 @@\n-          reloc.print_current_on(tty);\n-          code_blob->print_on(tty);\n-          code_blob->print_code_on(tty);\n-          assert(false, \"Address \" INTPTR_FORMAT \" for runtime target '%s+%d' is missing in AOT Code Cache addresses table\", p2i(addr), func_name, offset);\n+    reloc.print_current_on(tty);\n+    code_blob->print_on(tty);\n+    code_blob->print_code_on(tty);\n+    assert(false, \"Address \" INTPTR_FORMAT \" for runtime target '%s+%d' is missing in AOT Code Cache addresses table\", p2i(addr), func_name, offset);\n@@ -1722,1 +1724,1 @@\n-        } else {\n+  } else {\n@@ -1724,5 +1726,5 @@\n-          reloc.print_current_on(tty);\n-          code_blob->print_on(tty);\n-          code_blob->print_code_on(tty);\n-          os::find(addr, tty);\n-          assert(false, \"Address \" INTPTR_FORMAT \" for <unknown>\/('%s') is missing in AOT Code Cache addresses table\", p2i(addr), (const char*)addr);\n+    reloc.print_current_on(tty);\n+    code_blob->print_on(tty);\n+    code_blob->print_code_on(tty);\n+    os::find(addr, tty);\n+    assert(false, \"Address \" INTPTR_FORMAT \" for <unknown>\/('%s') is missing in AOT Code Cache addresses table\", p2i(addr), (const char*)addr);\n@@ -1730,5 +1732,0 @@\n-        }\n-      } else {\n-        return _extrs_base + id;\n-      }\n-    }\n","filename":"src\/hotspot\/share\/code\/aotCodeCache.cpp","additions":48,"deletions":51,"binary":false,"changes":99,"status":"modified"}]}