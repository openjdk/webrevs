{"files":[{"patch":"@@ -1917,4 +1917,0 @@\n-char *os::scan_pages(char *start, char* end, page_info* page_expected, page_info* page_found) {\n-  return end;\n-}\n-\n","filename":"src\/hotspot\/os\/aix\/os_aix.cpp","additions":0,"deletions":4,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1677,5 +1677,0 @@\n-char *os::scan_pages(char *start, char* end, page_info* page_expected, page_info* page_found) {\n-  return end;\n-}\n-\n-\n","filename":"src\/hotspot\/os\/bsd\/os_bsd.cpp","additions":0,"deletions":5,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -3015,6 +3015,0 @@\n-char *os::scan_pages(char *start, char* end, page_info* page_expected,\n-                     page_info* page_found) {\n-  return end;\n-}\n-\n-\n","filename":"src\/hotspot\/os\/linux\/os_linux.cpp","additions":0,"deletions":6,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -3828,5 +3828,0 @@\n-char *os::scan_pages(char *start, char* end, page_info* page_expected,\n-                     page_info* page_found) {\n-  return end;\n-}\n-\n","filename":"src\/hotspot\/os\/windows\/os_windows.cpp","additions":0,"deletions":5,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -239,14 +239,0 @@\n-\n-  scan_pages(NUMAPageScanRate);\n-}\n-\n-\/\/ Scan pages. Free pages that have smaller size or wrong placement.\n-void MutableNUMASpace::scan_pages(size_t page_count)\n-{\n-  size_t pages_per_chunk = page_count \/ lgrp_spaces()->length();\n-  if (pages_per_chunk > 0) {\n-    for (int i = 0; i < lgrp_spaces()->length(); i++) {\n-      LGRPSpace *ls = lgrp_spaces()->at(i);\n-      ls->scan_pages(page_size(), pages_per_chunk);\n-    }\n-  }\n@@ -694,40 +680,0 @@\n-\n-\/\/ Scan page_count pages and verify if they have the right size and right placement.\n-\/\/ If invalid pages are found they are freed in hope that subsequent reallocation\n-\/\/ will be more successful.\n-void MutableNUMASpace::LGRPSpace::scan_pages(size_t page_size, size_t page_count)\n-{\n-  char* range_start = (char*)align_up(space()->bottom(), page_size);\n-  char* range_end = (char*)align_down(space()->end(), page_size);\n-\n-  if (range_start > last_page_scanned() || last_page_scanned() >= range_end) {\n-    set_last_page_scanned(range_start);\n-  }\n-\n-  char *scan_start = last_page_scanned();\n-  char* scan_end = MIN2(scan_start + page_size * page_count, range_end);\n-\n-  os::page_info page_expected, page_found;\n-  page_expected.size = page_size;\n-  page_expected.lgrp_id = checked_cast<uint>(lgrp_id());\n-\n-  char *s = scan_start;\n-  while (s < scan_end) {\n-    char *e = os::scan_pages(s, (char*)scan_end, &page_expected, &page_found);\n-    if (e == nullptr) {\n-      break;\n-    }\n-    if (e != scan_end) {\n-      assert(e < scan_end, \"e: \" PTR_FORMAT \" scan_end: \" PTR_FORMAT, p2i(e), p2i(scan_end));\n-\n-      if ((page_expected.size != page_size || checked_cast<uint>(page_expected.lgrp_id) != lgrp_id())\n-          && page_expected.size != 0) {\n-        os::free_memory(s, pointer_delta(e, s, sizeof(char)), page_size);\n-      }\n-      page_expected = page_found;\n-    }\n-    s = e;\n-  }\n-\n-  set_last_page_scanned(scan_end);\n-}\n","filename":"src\/hotspot\/share\/gc\/parallel\/mutableNUMASpace.cpp","additions":0,"deletions":54,"binary":false,"changes":54,"status":"modified"},{"patch":"@@ -86,3 +86,0 @@\n-    char* _last_page_scanned;\n-    char* last_page_scanned()            { return _last_page_scanned; }\n-    void set_last_page_scanned(char* p)  { _last_page_scanned = p;    }\n@@ -90,1 +87,1 @@\n-    LGRPSpace(uint l, size_t alignment) : _lgrp_id(l), _allocation_failed(false), _last_page_scanned(nullptr) {\n+    LGRPSpace(uint l, size_t alignment) : _lgrp_id(l), _allocation_failed(false) {\n@@ -128,1 +125,0 @@\n-    void scan_pages(size_t page_size, size_t page_count);\n@@ -159,2 +155,0 @@\n-  \/\/ Scan and free invalid pages.\n-  void scan_pages(size_t page_count);\n","filename":"src\/hotspot\/share\/gc\/parallel\/mutableNUMASpace.hpp","additions":1,"deletions":7,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -526,2 +526,0 @@\n-  static char*  scan_pages(char *start, char* end, page_info* page_expected, page_info* page_found);\n-\n","filename":"src\/hotspot\/share\/runtime\/os.hpp","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"}]}