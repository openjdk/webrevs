{"files":[{"patch":"@@ -961,1 +961,0 @@\n-\n","filename":"src\/hotspot\/share\/prims\/jvmtiEventController.cpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -281,4 +281,5 @@\n-  JavaThread* java_thread = JavaThread::cast(thread);\n-  if (java_thread->thread_state() == _thread_in_native ||\n-      java_thread->thread_state() == _thread_blocked) {\n-    return thread->Thread::name();\n+  if (Thread::current()->is_Java_thread()) {\n+    JavaThreadState current_state = JavaThread::cast(Thread::current())->thread_state();\n+    if (current_state == _thread_in_native || current_state == _thread_blocked) {\n+      return thread->Thread::name();\n+    }\n@@ -286,0 +287,1 @@\n+  JavaThread* java_thread = JavaThread::cast(thread);\n","filename":"src\/hotspot\/share\/prims\/jvmtiTrace.cpp","additions":6,"deletions":4,"binary":false,"changes":10,"status":"modified"}]}