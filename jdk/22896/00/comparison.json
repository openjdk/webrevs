{"files":[{"patch":"@@ -33,0 +33,1 @@\n+import jdk.jpackage.test.Executor;\n@@ -44,0 +45,1 @@\n+ * @build jtreg.SkippedException\n@@ -67,0 +69,2 @@\n+        verifyDosNamesSupported();\n+\n@@ -87,0 +91,19 @@\n+\n+    private static void verifyDosNamesSupported() throws IOException {\n+        \/\/ Pick the file's name long enough to make Windows shorten it.\n+        final var probeDosNameFile = TKit.createTempFile(Path.of(\"probeDosName\"));\n+\n+        \/\/ The output should be a DOS variant of the `probeDosNameFile` path.\n+        \/\/ The filename should differ if the volume owning `probeDosNameFile` file supports DOS names.\n+        final var dosPath = new Executor()\n+                .addArguments(\"\/c\", String.format(\"for %%P in (\\\"%s\\\") do @echo %%~sP\", probeDosNameFile))\n+                .setExecutable(\"cmd\")\n+                .dumpOutput()\n+                .executeAndGetFirstLineOfOutput();\n+\n+        if (Path.of(dosPath).getFileName().equals(probeDosNameFile.getFileName())) {\n+            TKit.throwSkippedException(String.format(\"The volume %s owning the test work directory doesn't support DOS paths\",\n+                    probeDosNameFile.toAbsolutePath().getRoot()));\n+        }\n+    }\n+\n","filename":"test\/jdk\/tools\/jpackage\/windows\/WinLongPathTest.java","additions":23,"deletions":0,"binary":false,"changes":23,"status":"modified"}]}