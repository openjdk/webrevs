{"files":[{"patch":"@@ -31,0 +31,2 @@\n+#include \"logging\/logStream.hpp\"\n+\n@@ -71,0 +73,8 @@\n+    \/\/ Assume that the prediction for the newly added regions is the same as the\n+    \/\/ ones at the (current) end of the array. Particularly predictions at the end\n+    \/\/ of this array fairly seldom get updated, so having a better initial value\n+    \/\/ that is at least somewhat related to the actual application is preferable.\n+    double new_pred = _stats_arrays_length > 1\n+                    ? _accum_surv_rate_pred[_stats_arrays_length - 1] - _accum_surv_rate_pred[_stats_arrays_length - 2]\n+                    : InitialSurvivorRate;\n+\n@@ -74,2 +84,7 @@\n-      _surv_rate_predictors[i]->add(InitialSurvivorRate);\n-      _accum_surv_rate_pred[i] = ((i == 0) ? 0.0 : _accum_surv_rate_pred[i-1]) + InitialSurvivorRate;\n+      if (i == 0) {\n+        _surv_rate_predictors[i]->add(InitialSurvivorRate);\n+        _accum_surv_rate_pred[i] = 0.0;\n+      } else {\n+        _surv_rate_predictors[i]->add(_surv_rate_predictors[i-1]->last());\n+        _accum_surv_rate_pred[i] = _accum_surv_rate_pred[i-1] + new_pred;\n+      }\n@@ -77,1 +92,1 @@\n-    _last_pred = InitialSurvivorRate;\n+    _last_pred = new_pred;\n","filename":"src\/hotspot\/share\/gc\/g1\/g1SurvRateGroup.cpp","additions":18,"deletions":3,"binary":false,"changes":21,"status":"modified"}]}