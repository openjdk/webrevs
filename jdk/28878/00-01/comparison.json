{"files":[{"patch":"@@ -34,0 +34,1 @@\n+import java.lang.reflect.Field;\n@@ -185,0 +186,2 @@\n+    private static ThreadLocal<String> CURRENT_PATH = null;\n+\n@@ -186,6 +189,10 @@\n-        try {\n-            Class<?> c = Class.forName(\"jdk.javadoc.internal.doclets.formats.html.HtmlDocletWriter\");\n-            ThreadLocal<?> tl = (ThreadLocal<?>) c.getField(\"CURRENT_PATH\").get(null);\n-            return (String) tl.get();\n-        } catch (ReflectiveOperationException e) {\n-            throw new RuntimeException(\"Cannot determine current path\", e);\n+        if (CURRENT_PATH == null) {\n+            try {\n+                Field f = Class.forName(\"jdk.javadoc.internal.doclets.formats.html.HtmlDocletWriter\")\n+                               .getField(\"CURRENT_PATH\");\n+                @SuppressWarnings(\"unchecked\")\n+                ThreadLocal<String> tl = (ThreadLocal<String>) f.get(null);\n+                CURRENT_PATH = tl;\n+            } catch (ReflectiveOperationException e) {\n+                throw new RuntimeException(\"Cannot determine current path\", e);\n+            }\n@@ -193,0 +200,1 @@\n+        return CURRENT_PATH.get();\n","filename":"make\/jdk\/src\/classes\/build\/tools\/taglet\/JSpec.java","additions":14,"deletions":6,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -34,0 +34,1 @@\n+import java.lang.reflect.Field;\n@@ -144,0 +145,2 @@\n+    private static ThreadLocal<String> CURRENT_PATH = null;\n+\n@@ -145,6 +148,10 @@\n-        try {\n-            Class<?> c = Class.forName(\"jdk.javadoc.internal.doclets.formats.html.HtmlDocletWriter\");\n-            ThreadLocal<?> tl = (ThreadLocal<?>) c.getField(\"CURRENT_PATH\").get(null);\n-            return (String) tl.get();\n-        } catch (ReflectiveOperationException e) {\n-            throw new RuntimeException(\"Cannot determine current path\", e);\n+        if (CURRENT_PATH == null) {\n+            try {\n+                Field f = Class.forName(\"jdk.javadoc.internal.doclets.formats.html.HtmlDocletWriter\")\n+                               .getField(\"CURRENT_PATH\");\n+                @SuppressWarnings(\"unchecked\")\n+                ThreadLocal<String> tl = (ThreadLocal<String>) f.get(null);\n+                CURRENT_PATH = tl;\n+            } catch (ReflectiveOperationException e) {\n+                throw new RuntimeException(\"Cannot determine current path\", e);\n+            }\n@@ -152,0 +159,1 @@\n+        return CURRENT_PATH.get();\n","filename":"make\/jdk\/src\/classes\/build\/tools\/taglet\/ToolGuide.java","additions":14,"deletions":6,"binary":false,"changes":20,"status":"modified"}]}