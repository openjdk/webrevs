{"files":[{"patch":"@@ -217,1 +217,1 @@\n-    abstract VectorShuffle<E> iotaShuffle();\n+    abstract AbstractShuffle<E> iotaShuffle();\n@@ -219,1 +219,1 @@\n-    abstract VectorShuffle<E> iotaShuffle(int start, int step, boolean wrap);\n+    abstract AbstractShuffle<E> iotaShuffle(int start, int step, boolean wrap);\n","filename":"src\/jdk.incubator.vector\/share\/classes\/jdk\/incubator\/vector\/AbstractVector.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2311,3 +2311,4 @@\n-        VectorShuffle<Byte> iota = iotaShuffle();\n-        VectorMask<Byte> blendMask = iota.toVector().compare(VectorOperators.LT, (broadcast((byte)(length() - origin))));\n-        iota = iotaShuffle(origin, 1, true);\n+        ByteVector iotaVector = (ByteVector) iotaShuffle().toBitsVector();\n+        ByteVector filter = broadcast((byte)(length() - origin));\n+        VectorMask<Byte> blendMask = iotaVector.compare(VectorOperators.LT, filter);\n+        AbstractShuffle<Byte> iota = iotaShuffle(origin, 1, true);\n@@ -2341,3 +2342,4 @@\n-        VectorShuffle<Byte> iota = iotaShuffle();\n-        VectorMask<Byte> blendMask = iota.toVector().compare(VectorOperators.LT, (broadcast((byte)(length() - origin))));\n-        iota = iotaShuffle(origin, 1, true);\n+        ByteVector iotaVector = (ByteVector) iotaShuffle().toBitsVector();\n+        ByteVector filter = broadcast((byte)(length() - origin));\n+        VectorMask<Byte> blendMask = iotaVector.compare(VectorOperators.LT, filter);\n+        AbstractShuffle<Byte> iota = iotaShuffle(origin, 1, true);\n@@ -2362,4 +2364,4 @@\n-        VectorShuffle<Byte> iota = iotaShuffle();\n-        VectorMask<Byte> blendMask = iota.toVector().compare((part == 0) ? VectorOperators.GE : VectorOperators.LT,\n-                                                                  (broadcast((byte)(origin))));\n-        iota = iotaShuffle(-origin, 1, true);\n+        ByteVector iotaVector = (ByteVector) iotaShuffle().toBitsVector();\n+        ByteVector filter = broadcast((byte)origin);\n+        VectorMask<Byte> blendMask = iotaVector.compare((part == 0) ? VectorOperators.GE : VectorOperators.LT, filter);\n+        AbstractShuffle<Byte> iota = iotaShuffle(-origin, 1, true);\n@@ -2402,4 +2404,4 @@\n-        VectorShuffle<Byte> iota = iotaShuffle();\n-        VectorMask<Byte> blendMask = iota.toVector().compare(VectorOperators.GE,\n-                                                                  (broadcast((byte)(origin))));\n-        iota = iotaShuffle(-origin, 1, true);\n+        ByteVector iotaVector = (ByteVector) iotaShuffle().toBitsVector();\n+        ByteVector filter = broadcast((byte)origin);\n+        VectorMask<Byte> blendMask = iotaVector.compare(VectorOperators.GE, filter);\n+        AbstractShuffle<Byte> iota = iotaShuffle(-origin, 1, true);\n","filename":"src\/jdk.incubator.vector\/share\/classes\/jdk\/incubator\/vector\/ByteVector.java","additions":16,"deletions":14,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -2141,3 +2141,4 @@\n-        VectorShuffle<Double> iota = iotaShuffle();\n-        VectorMask<Double> blendMask = iota.toVector().compare(VectorOperators.LT, (broadcast((double)(length() - origin))));\n-        iota = iotaShuffle(origin, 1, true);\n+        LongVector iotaVector = (LongVector) iotaShuffle().toBitsVector();\n+        LongVector filter = LongVector.broadcast((LongVector.LongSpecies) vspecies().asIntegral(), (long)(length() - origin));\n+        VectorMask<Double> blendMask = iotaVector.compare(VectorOperators.LT, filter).cast(vspecies());\n+        AbstractShuffle<Double> iota = iotaShuffle(origin, 1, true);\n@@ -2171,3 +2172,4 @@\n-        VectorShuffle<Double> iota = iotaShuffle();\n-        VectorMask<Double> blendMask = iota.toVector().compare(VectorOperators.LT, (broadcast((double)(length() - origin))));\n-        iota = iotaShuffle(origin, 1, true);\n+        LongVector iotaVector = (LongVector) iotaShuffle().toBitsVector();\n+        LongVector filter = LongVector.broadcast((LongVector.LongSpecies) vspecies().asIntegral(), (long)(length() - origin));\n+        VectorMask<Double> blendMask = iotaVector.compare(VectorOperators.LT, filter).cast(vspecies());\n+        AbstractShuffle<Double> iota = iotaShuffle(origin, 1, true);\n@@ -2192,4 +2194,4 @@\n-        VectorShuffle<Double> iota = iotaShuffle();\n-        VectorMask<Double> blendMask = iota.toVector().compare((part == 0) ? VectorOperators.GE : VectorOperators.LT,\n-                                                                  (broadcast((double)(origin))));\n-        iota = iotaShuffle(-origin, 1, true);\n+        LongVector iotaVector = (LongVector) iotaShuffle().toBitsVector();\n+        LongVector filter = LongVector.broadcast((LongVector.LongSpecies) vspecies().asIntegral(), (long)origin);\n+        VectorMask<Double> blendMask = iotaVector.compare((part == 0) ? VectorOperators.GE : VectorOperators.LT, filter).cast(vspecies());\n+        AbstractShuffle<Double> iota = iotaShuffle(-origin, 1, true);\n@@ -2232,4 +2234,4 @@\n-        VectorShuffle<Double> iota = iotaShuffle();\n-        VectorMask<Double> blendMask = iota.toVector().compare(VectorOperators.GE,\n-                                                                  (broadcast((double)(origin))));\n-        iota = iotaShuffle(-origin, 1, true);\n+        LongVector iotaVector = (LongVector) iotaShuffle().toBitsVector();\n+        LongVector filter = LongVector.broadcast((LongVector.LongSpecies) vspecies().asIntegral(), (long)origin);\n+        VectorMask<Double> blendMask = iotaVector.compare(VectorOperators.GE, filter).cast(vspecies());\n+        AbstractShuffle<Double> iota = iotaShuffle(-origin, 1, true);\n","filename":"src\/jdk.incubator.vector\/share\/classes\/jdk\/incubator\/vector\/DoubleVector.java","additions":16,"deletions":14,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -2153,3 +2153,4 @@\n-        VectorShuffle<Float> iota = iotaShuffle();\n-        VectorMask<Float> blendMask = iota.toVector().compare(VectorOperators.LT, (broadcast((float)(length() - origin))));\n-        iota = iotaShuffle(origin, 1, true);\n+        IntVector iotaVector = (IntVector) iotaShuffle().toBitsVector();\n+        IntVector filter = IntVector.broadcast((IntVector.IntSpecies) vspecies().asIntegral(), (int)(length() - origin));\n+        VectorMask<Float> blendMask = iotaVector.compare(VectorOperators.LT, filter).cast(vspecies());\n+        AbstractShuffle<Float> iota = iotaShuffle(origin, 1, true);\n@@ -2183,3 +2184,4 @@\n-        VectorShuffle<Float> iota = iotaShuffle();\n-        VectorMask<Float> blendMask = iota.toVector().compare(VectorOperators.LT, (broadcast((float)(length() - origin))));\n-        iota = iotaShuffle(origin, 1, true);\n+        IntVector iotaVector = (IntVector) iotaShuffle().toBitsVector();\n+        IntVector filter = IntVector.broadcast((IntVector.IntSpecies) vspecies().asIntegral(), (int)(length() - origin));\n+        VectorMask<Float> blendMask = iotaVector.compare(VectorOperators.LT, filter).cast(vspecies());\n+        AbstractShuffle<Float> iota = iotaShuffle(origin, 1, true);\n@@ -2204,4 +2206,4 @@\n-        VectorShuffle<Float> iota = iotaShuffle();\n-        VectorMask<Float> blendMask = iota.toVector().compare((part == 0) ? VectorOperators.GE : VectorOperators.LT,\n-                                                                  (broadcast((float)(origin))));\n-        iota = iotaShuffle(-origin, 1, true);\n+        IntVector iotaVector = (IntVector) iotaShuffle().toBitsVector();\n+        IntVector filter = IntVector.broadcast((IntVector.IntSpecies) vspecies().asIntegral(), (int)origin);\n+        VectorMask<Float> blendMask = iotaVector.compare((part == 0) ? VectorOperators.GE : VectorOperators.LT, filter).cast(vspecies());\n+        AbstractShuffle<Float> iota = iotaShuffle(-origin, 1, true);\n@@ -2244,4 +2246,4 @@\n-        VectorShuffle<Float> iota = iotaShuffle();\n-        VectorMask<Float> blendMask = iota.toVector().compare(VectorOperators.GE,\n-                                                                  (broadcast((float)(origin))));\n-        iota = iotaShuffle(-origin, 1, true);\n+        IntVector iotaVector = (IntVector) iotaShuffle().toBitsVector();\n+        IntVector filter = IntVector.broadcast((IntVector.IntSpecies) vspecies().asIntegral(), (int)origin);\n+        VectorMask<Float> blendMask = iotaVector.compare(VectorOperators.GE, filter).cast(vspecies());\n+        AbstractShuffle<Float> iota = iotaShuffle(-origin, 1, true);\n","filename":"src\/jdk.incubator.vector\/share\/classes\/jdk\/incubator\/vector\/FloatVector.java","additions":16,"deletions":14,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -2296,3 +2296,4 @@\n-        VectorShuffle<Integer> iota = iotaShuffle();\n-        VectorMask<Integer> blendMask = iota.toVector().compare(VectorOperators.LT, (broadcast((int)(length() - origin))));\n-        iota = iotaShuffle(origin, 1, true);\n+        IntVector iotaVector = (IntVector) iotaShuffle().toBitsVector();\n+        IntVector filter = broadcast((int)(length() - origin));\n+        VectorMask<Integer> blendMask = iotaVector.compare(VectorOperators.LT, filter);\n+        AbstractShuffle<Integer> iota = iotaShuffle(origin, 1, true);\n@@ -2326,3 +2327,4 @@\n-        VectorShuffle<Integer> iota = iotaShuffle();\n-        VectorMask<Integer> blendMask = iota.toVector().compare(VectorOperators.LT, (broadcast((int)(length() - origin))));\n-        iota = iotaShuffle(origin, 1, true);\n+        IntVector iotaVector = (IntVector) iotaShuffle().toBitsVector();\n+        IntVector filter = broadcast((int)(length() - origin));\n+        VectorMask<Integer> blendMask = iotaVector.compare(VectorOperators.LT, filter);\n+        AbstractShuffle<Integer> iota = iotaShuffle(origin, 1, true);\n@@ -2347,4 +2349,4 @@\n-        VectorShuffle<Integer> iota = iotaShuffle();\n-        VectorMask<Integer> blendMask = iota.toVector().compare((part == 0) ? VectorOperators.GE : VectorOperators.LT,\n-                                                                  (broadcast((int)(origin))));\n-        iota = iotaShuffle(-origin, 1, true);\n+        IntVector iotaVector = (IntVector) iotaShuffle().toBitsVector();\n+        IntVector filter = broadcast((int)origin);\n+        VectorMask<Integer> blendMask = iotaVector.compare((part == 0) ? VectorOperators.GE : VectorOperators.LT, filter);\n+        AbstractShuffle<Integer> iota = iotaShuffle(-origin, 1, true);\n@@ -2387,4 +2389,4 @@\n-        VectorShuffle<Integer> iota = iotaShuffle();\n-        VectorMask<Integer> blendMask = iota.toVector().compare(VectorOperators.GE,\n-                                                                  (broadcast((int)(origin))));\n-        iota = iotaShuffle(-origin, 1, true);\n+        IntVector iotaVector = (IntVector) iotaShuffle().toBitsVector();\n+        IntVector filter = broadcast((int)origin);\n+        VectorMask<Integer> blendMask = iotaVector.compare(VectorOperators.GE, filter);\n+        AbstractShuffle<Integer> iota = iotaShuffle(-origin, 1, true);\n","filename":"src\/jdk.incubator.vector\/share\/classes\/jdk\/incubator\/vector\/IntVector.java","additions":16,"deletions":14,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -2162,3 +2162,4 @@\n-        VectorShuffle<Long> iota = iotaShuffle();\n-        VectorMask<Long> blendMask = iota.toVector().compare(VectorOperators.LT, (broadcast((long)(length() - origin))));\n-        iota = iotaShuffle(origin, 1, true);\n+        LongVector iotaVector = (LongVector) iotaShuffle().toBitsVector();\n+        LongVector filter = broadcast((long)(length() - origin));\n+        VectorMask<Long> blendMask = iotaVector.compare(VectorOperators.LT, filter);\n+        AbstractShuffle<Long> iota = iotaShuffle(origin, 1, true);\n@@ -2192,3 +2193,4 @@\n-        VectorShuffle<Long> iota = iotaShuffle();\n-        VectorMask<Long> blendMask = iota.toVector().compare(VectorOperators.LT, (broadcast((long)(length() - origin))));\n-        iota = iotaShuffle(origin, 1, true);\n+        LongVector iotaVector = (LongVector) iotaShuffle().toBitsVector();\n+        LongVector filter = broadcast((long)(length() - origin));\n+        VectorMask<Long> blendMask = iotaVector.compare(VectorOperators.LT, filter);\n+        AbstractShuffle<Long> iota = iotaShuffle(origin, 1, true);\n@@ -2213,4 +2215,4 @@\n-        VectorShuffle<Long> iota = iotaShuffle();\n-        VectorMask<Long> blendMask = iota.toVector().compare((part == 0) ? VectorOperators.GE : VectorOperators.LT,\n-                                                                  (broadcast((long)(origin))));\n-        iota = iotaShuffle(-origin, 1, true);\n+        LongVector iotaVector = (LongVector) iotaShuffle().toBitsVector();\n+        LongVector filter = broadcast((long)origin);\n+        VectorMask<Long> blendMask = iotaVector.compare((part == 0) ? VectorOperators.GE : VectorOperators.LT, filter);\n+        AbstractShuffle<Long> iota = iotaShuffle(-origin, 1, true);\n@@ -2253,4 +2255,4 @@\n-        VectorShuffle<Long> iota = iotaShuffle();\n-        VectorMask<Long> blendMask = iota.toVector().compare(VectorOperators.GE,\n-                                                                  (broadcast((long)(origin))));\n-        iota = iotaShuffle(-origin, 1, true);\n+        LongVector iotaVector = (LongVector) iotaShuffle().toBitsVector();\n+        LongVector filter = broadcast((long)origin);\n+        VectorMask<Long> blendMask = iotaVector.compare(VectorOperators.GE, filter);\n+        AbstractShuffle<Long> iota = iotaShuffle(-origin, 1, true);\n","filename":"src\/jdk.incubator.vector\/share\/classes\/jdk\/incubator\/vector\/LongVector.java","additions":16,"deletions":14,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -2312,3 +2312,4 @@\n-        VectorShuffle<Short> iota = iotaShuffle();\n-        VectorMask<Short> blendMask = iota.toVector().compare(VectorOperators.LT, (broadcast((short)(length() - origin))));\n-        iota = iotaShuffle(origin, 1, true);\n+        ShortVector iotaVector = (ShortVector) iotaShuffle().toBitsVector();\n+        ShortVector filter = broadcast((short)(length() - origin));\n+        VectorMask<Short> blendMask = iotaVector.compare(VectorOperators.LT, filter);\n+        AbstractShuffle<Short> iota = iotaShuffle(origin, 1, true);\n@@ -2342,3 +2343,4 @@\n-        VectorShuffle<Short> iota = iotaShuffle();\n-        VectorMask<Short> blendMask = iota.toVector().compare(VectorOperators.LT, (broadcast((short)(length() - origin))));\n-        iota = iotaShuffle(origin, 1, true);\n+        ShortVector iotaVector = (ShortVector) iotaShuffle().toBitsVector();\n+        ShortVector filter = broadcast((short)(length() - origin));\n+        VectorMask<Short> blendMask = iotaVector.compare(VectorOperators.LT, filter);\n+        AbstractShuffle<Short> iota = iotaShuffle(origin, 1, true);\n@@ -2363,4 +2365,4 @@\n-        VectorShuffle<Short> iota = iotaShuffle();\n-        VectorMask<Short> blendMask = iota.toVector().compare((part == 0) ? VectorOperators.GE : VectorOperators.LT,\n-                                                                  (broadcast((short)(origin))));\n-        iota = iotaShuffle(-origin, 1, true);\n+        ShortVector iotaVector = (ShortVector) iotaShuffle().toBitsVector();\n+        ShortVector filter = broadcast((short)origin);\n+        VectorMask<Short> blendMask = iotaVector.compare((part == 0) ? VectorOperators.GE : VectorOperators.LT, filter);\n+        AbstractShuffle<Short> iota = iotaShuffle(-origin, 1, true);\n@@ -2403,4 +2405,4 @@\n-        VectorShuffle<Short> iota = iotaShuffle();\n-        VectorMask<Short> blendMask = iota.toVector().compare(VectorOperators.GE,\n-                                                                  (broadcast((short)(origin))));\n-        iota = iotaShuffle(-origin, 1, true);\n+        ShortVector iotaVector = (ShortVector) iotaShuffle().toBitsVector();\n+        ShortVector filter = broadcast((short)origin);\n+        VectorMask<Short> blendMask = iotaVector.compare(VectorOperators.GE, filter);\n+        AbstractShuffle<Short> iota = iotaShuffle(-origin, 1, true);\n","filename":"src\/jdk.incubator.vector\/share\/classes\/jdk\/incubator\/vector\/ShortVector.java","additions":16,"deletions":14,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -2688,3 +2688,9 @@\n-        VectorShuffle<$Boxtype$> iota = iotaShuffle();\n-        VectorMask<$Boxtype$> blendMask = iota.toVector().compare(VectorOperators.LT, (broadcast(($type$)(length() - origin))));\n-        iota = iotaShuffle(origin, 1, true);\n+        $Bitstype$Vector iotaVector = ($Bitstype$Vector) iotaShuffle().toBitsVector();\n+#if[FP]\n+        $Bitstype$Vector filter = $Bitstype$Vector.broadcast(($Bitstype$Vector.$Bitstype$Species) vspecies().asIntegral(), ($bitstype$)(length() - origin));\n+        VectorMask<$Boxtype$> blendMask = iotaVector.compare(VectorOperators.LT, filter).cast(vspecies());\n+#else[FP]\n+        $abstractvectortype$ filter = broadcast(($type$)(length() - origin));\n+        VectorMask<$Boxtype$> blendMask = iotaVector.compare(VectorOperators.LT, filter);\n+#end[FP]\n+        AbstractShuffle<$Boxtype$> iota = iotaShuffle(origin, 1, true);\n@@ -2718,3 +2724,9 @@\n-        VectorShuffle<$Boxtype$> iota = iotaShuffle();\n-        VectorMask<$Boxtype$> blendMask = iota.toVector().compare(VectorOperators.LT, (broadcast(($type$)(length() - origin))));\n-        iota = iotaShuffle(origin, 1, true);\n+        $Bitstype$Vector iotaVector = ($Bitstype$Vector) iotaShuffle().toBitsVector();\n+#if[FP]\n+        $Bitstype$Vector filter = $Bitstype$Vector.broadcast(($Bitstype$Vector.$Bitstype$Species) vspecies().asIntegral(), ($bitstype$)(length() - origin));\n+        VectorMask<$Boxtype$> blendMask = iotaVector.compare(VectorOperators.LT, filter).cast(vspecies());\n+#else[FP]\n+        $abstractvectortype$ filter = broadcast(($type$)(length() - origin));\n+        VectorMask<$Boxtype$> blendMask = iotaVector.compare(VectorOperators.LT, filter);\n+#end[FP]\n+        AbstractShuffle<$Boxtype$> iota = iotaShuffle(origin, 1, true);\n@@ -2739,4 +2751,9 @@\n-        VectorShuffle<$Boxtype$> iota = iotaShuffle();\n-        VectorMask<$Boxtype$> blendMask = iota.toVector().compare((part == 0) ? VectorOperators.GE : VectorOperators.LT,\n-                                                                  (broadcast(($type$)(origin))));\n-        iota = iotaShuffle(-origin, 1, true);\n+        $Bitstype$Vector iotaVector = ($Bitstype$Vector) iotaShuffle().toBitsVector();\n+#if[FP]\n+        $Bitstype$Vector filter = $Bitstype$Vector.broadcast(($Bitstype$Vector.$Bitstype$Species) vspecies().asIntegral(), ($bitstype$)origin);\n+        VectorMask<$Boxtype$> blendMask = iotaVector.compare((part == 0) ? VectorOperators.GE : VectorOperators.LT, filter).cast(vspecies());\n+#else[FP]\n+        $abstractvectortype$ filter = broadcast(($type$)origin);\n+        VectorMask<$Boxtype$> blendMask = iotaVector.compare((part == 0) ? VectorOperators.GE : VectorOperators.LT, filter);\n+#end[FP]\n+        AbstractShuffle<$Boxtype$> iota = iotaShuffle(-origin, 1, true);\n@@ -2779,4 +2796,9 @@\n-        VectorShuffle<$Boxtype$> iota = iotaShuffle();\n-        VectorMask<$Boxtype$> blendMask = iota.toVector().compare(VectorOperators.GE,\n-                                                                  (broadcast(($type$)(origin))));\n-        iota = iotaShuffle(-origin, 1, true);\n+        $Bitstype$Vector iotaVector = ($Bitstype$Vector) iotaShuffle().toBitsVector();\n+#if[FP]\n+        $Bitstype$Vector filter = $Bitstype$Vector.broadcast(($Bitstype$Vector.$Bitstype$Species) vspecies().asIntegral(), ($bitstype$)origin);\n+        VectorMask<$Boxtype$> blendMask = iotaVector.compare(VectorOperators.GE, filter).cast(vspecies());\n+#else[FP]\n+        $abstractvectortype$ filter = broadcast(($type$)origin);\n+        VectorMask<$Boxtype$> blendMask = iotaVector.compare(VectorOperators.GE, filter);\n+#end[FP]\n+        AbstractShuffle<$Boxtype$> iota = iotaShuffle(-origin, 1, true);\n","filename":"src\/jdk.incubator.vector\/share\/classes\/jdk\/incubator\/vector\/X-Vector.java.template","additions":36,"deletions":14,"binary":false,"changes":50,"status":"modified"}]}