{"files":[{"patch":"@@ -122,5 +122,7 @@\n-                    int pos = (int) d.getStartPosition();\n-                    String substring = implCode.substring(pos, (int) d.getEndPosition());\n-                    \/\/ideally would be \"0\", but the positions are not fully set yet\n-                    assertTrue(substring.equals(\"0\"), () ->\n-                            String.format(\"%s at position %d '%s'\", d, pos, substring));\n+                    \/\/ Use line and column instead of start and end positions\n+                    \/\/ to handle platform-dependent newlines, which could be\n+                    \/\/ different between the text block and the written file.\n+                    int line = (int) d.getLineNumber();\n+                    int col = (int) d.getColumnNumber();\n+                    String substring = implCode.split(\"\\\\R\")[line - 1].substring(col - 1, col);\n+                    assertEquals(\"0\", substring);\n","filename":"test\/langtools\/tools\/javac\/diags\/DiagnosticGetEndPosition.java","additions":7,"deletions":5,"binary":false,"changes":12,"status":"modified"}]}