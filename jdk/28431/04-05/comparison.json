{"files":[{"patch":"@@ -328,1 +328,0 @@\n-\n@@ -331,0 +330,10 @@\n+        Consumer<Throwable> errorNotifier = error -> {\n+            try {\n+                subscriber.onError(error);\n+                cf.completeExceptionally(error);\n+            } finally {\n+                asyncReceiver.setRetryOnError(false);\n+                asyncReceiver.onReadError(error);\n+            }\n+        };\n+\n@@ -337,1 +346,2 @@\n-            cf.completeExceptionally(pe);\n+            errorNotifier.accept(pe);\n+            connection.close(pe);\n@@ -425,6 +435,1 @@\n-        ResponseSubscribers.getBodyAsync(executor, p, cf, (t) -> {\n-            subscriber.onError(t);\n-            cf.completeExceptionally(t);\n-            asyncReceiver.setRetryOnError(false);\n-            asyncReceiver.onReadError(t);\n-        });\n+        ResponseSubscribers.getBodyAsync(executor, p, cf, errorNotifier);\n","filename":"src\/java.net.http\/share\/classes\/jdk\/internal\/net\/http\/Http1Response.java","additions":13,"deletions":8,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -625,0 +625,1 @@\n+             assert responseCode >= 100 && responseCode <= 200 : \"unexpected responseCode: \" + responseCode;\n","filename":"src\/java.net.http\/share\/classes\/jdk\/internal\/net\/http\/Http3Stream.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"}]}