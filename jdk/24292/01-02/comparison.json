{"files":[{"patch":"@@ -49,2 +49,2 @@\n-  ScrollPane pane;\n-  MyCanvas myCanvas;\n+    ScrollPane pane;\n+    MyCanvas myCanvas;\n@@ -52,4 +52,10 @@\n-  class MyCanvas extends Canvas {\n-    public Dimension getPreferredSize() {\n-      return new Dimension(400, 800);\n-    }\n+    public bug8077409Test() {\n+        super();\n+        setLayout(new BorderLayout());\n+        pane = new ScrollPane();\n+\n+        myCanvas = new MyCanvas();\n+        pane.add(myCanvas);\n+\n+        add(pane, BorderLayout.CENTER);\n+        setSize(320, 480);\n@@ -57,9 +63,0 @@\n-    public void paint(Graphics g) {\n-      g.setColor(Color.BLACK);\n-      g.drawLine(0, 0, 399, 0);\n-      g.setColor(Color.RED);\n-      g.drawLine(0, 1, 399, 1);\n-      g.setColor(Color.BLUE);\n-      g.drawLine(0, 2, 399, 2);\n-      g.setColor(Color.GREEN);\n-      g.drawLine(0, 3, 399, 3);\n@@ -68,35 +65,30 @@\n-  }\n-\n-  public bug8077409Test() {\n-    super();\n-    setLayout(new BorderLayout());\n-    pane = new ScrollPane();\n-\n-    myCanvas = new MyCanvas();\n-    pane.add(myCanvas);\n-\n-    add(pane, BorderLayout.CENTER);\n-    setSize(320, 480);\n-\n-  }\n-\n-  @Override\n-  protected void processKeyEvent(KeyEvent e) {\n-    super.processKeyEvent(e);\n-\n-  }\n-\n-  public static void main(String[] args) throws AWTException, InterruptedException {\n-    final bug8077409Test obj = new bug8077409Test();\n-    try {\n-      obj.setLocationRelativeTo(null);\n-      Toolkit.getDefaultToolkit().addAWTEventListener(e -> {\n-        KeyEvent keyEvent = (KeyEvent) e;\n-        if (keyEvent.getID() == KeyEvent.KEY_RELEASED) {\n-          if (keyEvent.getKeyCode() == KeyEvent.VK_1) {\n-            System.out.println(obj.pane.toString());\n-            System.out.println(\"obj.myCanvas.pos: \" + obj.myCanvas.getBounds());\n-            System.out.println(obj.myCanvas.toString());\n-          } else if (keyEvent.getKeyCode() == KeyEvent.VK_2) {\n-            obj.repaint();\n-          } else if (keyEvent.getKeyCode() == KeyEvent.VK_DOWN) {\n+    public static void main(String[] args) throws AWTException, InterruptedException {\n+        final bug8077409Test obj = new bug8077409Test();\n+        try {\n+            obj.setLocationRelativeTo(null);\n+            Toolkit.getDefaultToolkit().addAWTEventListener(e -> {\n+                KeyEvent keyEvent = (KeyEvent) e;\n+                if (keyEvent.getID() == KeyEvent.KEY_RELEASED) {\n+                    if (keyEvent.getKeyCode() == KeyEvent.VK_1) {\n+                        System.out.println(obj.pane.toString());\n+                        System.out.println(\"obj.myCanvas.pos: \" + obj.myCanvas.getBounds());\n+                        System.out.println(obj.myCanvas.toString());\n+                    } else if (keyEvent.getKeyCode() == KeyEvent.VK_2) {\n+                        obj.repaint();\n+                    } else if (keyEvent.getKeyCode() == KeyEvent.VK_DOWN) {\n+                        Point scrollPosition = obj.pane.getScrollPosition();\n+                        scrollPosition.translate(0, 1);\n+                        obj.pane.setScrollPosition(scrollPosition);\n+                    } else if (keyEvent.getKeyCode() == KeyEvent.VK_UP) {\n+                        Point scrollPosition = obj.pane.getScrollPosition();\n+                        scrollPosition.translate(0, -1);\n+                        obj.pane.setScrollPosition(scrollPosition);\n+                    } else if (keyEvent.getKeyCode() == KeyEvent.VK_SPACE) {\n+                        obj.pane.validate();\n+                    }\n+                }\n+            }, AWTEvent.KEY_EVENT_MASK);\n+            obj.setVisible(true);\n+            Robot robot = new Robot();\n+            robot.waitForIdle();\n+            robot.delay(300);\n@@ -106,5 +98,4 @@\n-          } else if (keyEvent.getKeyCode() == KeyEvent.VK_UP) {\n-            Point scrollPosition = obj.pane.getScrollPosition();\n-            scrollPosition.translate(0, -1);\n-            obj.pane.setScrollPosition(scrollPosition);\n-          } else if (keyEvent.getKeyCode() == KeyEvent.VK_SPACE) {\n+\n+            int y = obj.pane.getComponent(0).getLocation().y;\n+            robot.waitForIdle();\n+            robot.delay(300);\n@@ -112,1 +103,9 @@\n-          }\n+            robot.waitForIdle();\n+            robot.delay(300);\n+            if (y != obj.pane.getComponent(0).getLocation().y) {\n+                throw new RuntimeException(\"Wrong position of component in ScrollPane\");\n+            } else {\n+                System.out.println(\"Passed.....\");\n+            }\n+        } finally {\n+            obj.dispose();\n@@ -114,22 +113,0 @@\n-      }, AWTEvent.KEY_EVENT_MASK);\n-      obj.setVisible(true);\n-      Robot robot = new Robot();\n-      robot.waitForIdle();\n-      robot.delay(300);\n-      Point scrollPosition = obj.pane.getScrollPosition();\n-      scrollPosition.translate(0, 1);\n-      obj.pane.setScrollPosition(scrollPosition);\n-\n-      int y = obj.pane.getComponent(0).getLocation().y;\n-      robot.waitForIdle();\n-      robot.delay(300);\n-      obj.pane.validate();\n-      robot.waitForIdle();\n-      robot.delay(300);\n-      if (y != obj.pane.getComponent(0).getLocation().y) {\n-        throw new RuntimeException(\"Wrong position of component in ScrollPane\");\n-      } else {\n-        System.out.println(\"Passed.....\");\n-      }\n-    } finally {\n-      obj.dispose();\n@@ -137,1 +114,24 @@\n-  }\n+\n+    @Override\n+    protected void processKeyEvent(KeyEvent e) {\n+        super.processKeyEvent(e);\n+\n+    }\n+\n+    class MyCanvas extends Canvas {\n+        public Dimension getPreferredSize() {\n+            return new Dimension(400, 800);\n+        }\n+\n+        public void paint(Graphics g) {\n+            g.setColor(Color.BLACK);\n+            g.drawLine(0, 0, 399, 0);\n+            g.setColor(Color.RED);\n+            g.drawLine(0, 1, 399, 1);\n+            g.setColor(Color.BLUE);\n+            g.drawLine(0, 2, 399, 2);\n+            g.setColor(Color.GREEN);\n+            g.drawLine(0, 3, 399, 3);\n+        }\n+\n+    }\n","filename":"test\/jdk\/java\/awt\/ScrollPane\/bug8077409Test.java","additions":79,"deletions":79,"binary":false,"changes":158,"status":"modified"}]}