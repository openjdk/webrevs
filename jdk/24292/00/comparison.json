{"files":[{"patch":"@@ -34,2 +34,13 @@\n-import java.awt.*;\n-import java.awt.event.*;\n+import java.awt.AWTEvent;\n+import java.awt.AWTException;\n+import java.awt.BorderLayout;\n+import java.awt.Canvas;\n+import java.awt.Color;\n+import java.awt.Dimension;\n+import java.awt.Frame;\n+import java.awt.Graphics;\n+import java.awt.Point;\n+import java.awt.Robot;\n+import java.awt.ScrollPane;\n+import java.awt.Toolkit;\n+import java.awt.event.KeyEvent;\n@@ -80,23 +91,21 @@\n-    obj.setVisible(true);\n-    Toolkit.getDefaultToolkit().addAWTEventListener(new AWTEventListener() {\n-      @Override\n-      public void eventDispatched(AWTEvent e) {\n-        KeyEvent keyEvent = (KeyEvent) e;\n-        if(keyEvent.getID() == KeyEvent.KEY_RELEASED) {\n-            if (keyEvent.getKeyCode() == KeyEvent.VK_1) {\n-              System.out.println(obj.pane.toString());\n-              System.out.println(\"obj.myCanvas.pos: \" + obj.myCanvas.getBounds());\n-              System.out.println(obj.myCanvas.toString());\n-            }  else if (keyEvent.getKeyCode() == KeyEvent.VK_2) {\n-              obj.repaint();\n-           } else if (keyEvent.getKeyCode() == KeyEvent.VK_DOWN) {\n-              Point scrollPosition = obj.pane.getScrollPosition();\n-              scrollPosition.translate(0, 1);\n-              obj.pane.setScrollPosition(scrollPosition);\n-            } else if (keyEvent.getKeyCode() == KeyEvent.VK_UP) {\n-              Point scrollPosition = obj.pane.getScrollPosition();\n-              scrollPosition.translate(0, -1);\n-              obj.pane.setScrollPosition(scrollPosition);\n-            } else if (keyEvent.getKeyCode() == KeyEvent.VK_SPACE) {\n-              obj.pane.validate();\n-            }\n+    try {\n+    obj.setLocationRelativeTo(null);\n+    Toolkit.getDefaultToolkit().addAWTEventListener(e -> {\n+      KeyEvent keyEvent = (KeyEvent) e;\n+      if(keyEvent.getID() == KeyEvent.KEY_RELEASED) {\n+          if (keyEvent.getKeyCode() == KeyEvent.VK_1) {\n+            System.out.println(obj.pane.toString());\n+            System.out.println(\"obj.myCanvas.pos: \" + obj.myCanvas.getBounds());\n+            System.out.println(obj.myCanvas.toString());\n+          }  else if (keyEvent.getKeyCode() == KeyEvent.VK_2) {\n+            obj.repaint();\n+         } else if (keyEvent.getKeyCode() == KeyEvent.VK_DOWN) {\n+            Point scrollPosition = obj.pane.getScrollPosition();\n+            scrollPosition.translate(0, 1);\n+            obj.pane.setScrollPosition(scrollPosition);\n+          } else if (keyEvent.getKeyCode() == KeyEvent.VK_UP) {\n+            Point scrollPosition = obj.pane.getScrollPosition();\n+            scrollPosition.translate(0, -1);\n+            obj.pane.setScrollPosition(scrollPosition);\n+          } else if (keyEvent.getKeyCode() == KeyEvent.VK_SPACE) {\n+            obj.pane.validate();\n@@ -105,1 +114,5 @@\n-    }, AWTEvent.KEY_EVENT_MASK);\n+      }, AWTEvent.KEY_EVENT_MASK);\n+      obj.setVisible(true);\n+      Robot robot = new Robot();\n+      robot.waitForIdle();\n+      robot.delay(300);\n@@ -111,0 +124,2 @@\n+      robot.waitForIdle();\n+      robot.delay(300);\n@@ -112,0 +127,2 @@\n+      robot.waitForIdle();\n+      robot.delay(300);\n@@ -114,0 +131,2 @@\n+      } else {\n+          System.out.println(\"Passed.....\");\n@@ -115,0 +134,3 @@\n+    } finally {\n+        obj.dispose();\n+    }\n","filename":"test\/jdk\/java\/awt\/ScrollPane\/bug8077409Test.java","additions":48,"deletions":26,"binary":false,"changes":74,"status":"modified"}]}