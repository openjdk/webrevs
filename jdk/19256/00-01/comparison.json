{"files":[{"patch":"@@ -29,0 +29,17 @@\n+    \/**\n+     * The various concat() functions in this class can be used for building\n+     * a command-line argument array for ProcessTools.createTestJavaProcessBuilder(),\n+     * etc. When some of the arguments are conditional, this is more convenient\n+     * than alternatives like ArrayList.\n+     *\n+     * Example:\n+     *\n+     * <pre>\n+     *     String args[] = StringArrayUtils.concat(\"-Xint\", \"-Xmx32m\");\n+     *     if (verbose) {\n+     *         args = StringArrayUtils.concat(args, \"-verbose\");\n+     *     }\n+     *     args = StringArrayUtils.concat(args, \"HelloWorld\");\n+     *     ProcessTools.createTestJavaProcessBuilder(args);\n+     * <\/pre>\n+     *\/\n@@ -33,10 +50,5 @@\n-    public static String[] concat(String prefix[], String... extra) {\n-        ArrayList<String> list = new ArrayList<String>();\n-        for (String s : prefix) {\n-            list.add(s);\n-        }\n-        for (String s : extra) {\n-            list.add(s);\n-        }\n-\n-        return list.toArray(new String[list.size()]);\n+    public static String[] concat(String[] prefix, String... extra) {\n+        String[] ret = new String[prefix.length + extra.length];\n+        System.arraycopy(prefix, 0, ret, 0, prefix.length);\n+        System.arraycopy(extra, 0, ret, prefix.length, extra.length);\n+        return ret;\n@@ -46,7 +58,4 @@\n-        ArrayList<String> list = new ArrayList<String>();\n-        list.add(prefix);\n-        for (String s : extra) {\n-            list.add(s);\n-        }\n-\n-        return list.toArray(new String[list.size()]);\n+        String[] ret = new String[1 + extra.length];\n+        ret[0] = prefix;\n+        System.arraycopy(extra, 0, ret, 1, extra.length);\n+        return ret;\n","filename":"test\/lib\/jdk\/test\/lib\/StringArrayUtils.java","additions":26,"deletions":17,"binary":false,"changes":43,"status":"modified"},{"patch":"@@ -138,1 +138,1 @@\n-        ProcessBuilder pb = ProcessTools.createLimitedTestJavaProcessBuilder(cmdLine);\n+        ProcessBuilder pb = ProcessTools.createTestJavaProcessBuilder(cmdLine);\n@@ -156,1 +156,1 @@\n-        ProcessBuilder pb = ProcessTools.createLimitedTestJavaProcessBuilder(cmdLine);\n+        ProcessBuilder pb = ProcessTools.createTestJavaProcessBuilder(cmdLine);\n@@ -177,1 +177,1 @@\n-        ProcessBuilder pb = ProcessTools.createLimitedTestJavaProcessBuilder(cmdLine);\n+        ProcessBuilder pb = ProcessTools.createTestJavaProcessBuilder(cmdLine);\n@@ -198,1 +198,1 @@\n-        ProcessBuilder pb = ProcessTools.createLimitedTestJavaProcessBuilder(cmdLine);\n+        ProcessBuilder pb = ProcessTools.createTestJavaProcessBuilder(cmdLine);\n","filename":"test\/lib\/jdk\/test\/lib\/cds\/CDSAppTester.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"}]}