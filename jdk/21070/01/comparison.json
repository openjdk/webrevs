{"files":[{"patch":"@@ -91,0 +91,1 @@\n+#include <string>\n@@ -4093,0 +4094,27 @@\n+std::string GetWindowsInstallationType() {\n+  HKEY hKey;\n+  const char* subKey = \"SOFTWARE\\\\Microsoft\\\\Windows NT\\\\CurrentVersion\";\n+  const char* valueName = \"InstallationType\";\n+  char value[256];\n+  DWORD valueLength = sizeof(value);\n+\n+  \/\/ Open the registry key\n+  if (RegOpenKeyExA(HKEY_LOCAL_MACHINE, subKey, 0, KEY_READ, &hKey) != ERROR_SUCCESS) {\n+      return \"\";\n+  }\n+\n+  \/\/ Query the value\n+  if (RegQueryValueExA(hKey, valueName, NULL, NULL, (LPBYTE)value, &valueLength) != ERROR_SUCCESS) {\n+      RegCloseKey(hKey);\n+      return \"\";\n+  }\n+\n+  RegCloseKey(hKey);\n+  return std::string(value, valueLength - 1); \/\/ Exclude null terminator\n+}\n+\n+bool IsNanoServer() {\n+  std::string installationType = GetWindowsInstallationType();\n+  return installationType == \"Nano Server\";\n+}\n+\n@@ -4110,1 +4138,7 @@\n-  strncat(kernel32_path, \"\\\\kernel32.dll\", MAX_PATH - ret);\n+\n+  if (IsNanoServer()) {\n+    \/\/ On Windows Nanoserver the kernel32.dll is located in the forwarders subdirectory\n+    strncat(kernel32_path, \"\\\\forwarders\\\\kernel32.dll\", MAX_PATH - ret);\n+  } else {\n+    strncat(kernel32_path, \"\\\\kernel32.dll\", MAX_PATH - ret);\n+  }\n","filename":"src\/hotspot\/os\/windows\/os_windows.cpp","additions":35,"deletions":1,"binary":false,"changes":36,"status":"modified"}]}