{"files":[{"patch":"@@ -4093,0 +4093,33 @@\n+void GetWindowsInstallationType(char* buffer, int bufferSize) {\n+  HKEY hKey;\n+  const char* subKey = \"SOFTWARE\\\\Microsoft\\\\Windows NT\\\\CurrentVersion\";\n+  const char* valueName = \"InstallationType\";\n+\n+  DWORD valueLength = bufferSize;\n+\n+  \/\/ Initialize buffer with empty string\n+  buffer[0] = '\\0';\n+\n+  \/\/ Open the registry key\n+  if (RegOpenKeyExA(HKEY_LOCAL_MACHINE, subKey, 0, KEY_READ, &hKey) != ERROR_SUCCESS) {\n+    \/\/ Return empty buffer if key cannot be opened\n+    return;\n+  }\n+\n+  \/\/ Query the value\n+  if (RegQueryValueExA(hKey, valueName, NULL, NULL, (LPBYTE)buffer, &valueLength) != ERROR_SUCCESS) {\n+    RegCloseKey(hKey);\n+    buffer[0] = '\\0';\n+    return;\n+  }\n+\n+  RegCloseKey(hKey);\n+}\n+\n+bool IsNanoServer() {\n+  const int BUFFER_SIZE = 256;\n+  char installationType[BUFFER_SIZE];\n+  GetWindowsInstallationType(installationType, BUFFER_SIZE);\n+  return (lstrcmpA(installationType, \"Nano Server\") == 0);\n+}\n+\n@@ -4110,1 +4143,7 @@\n-  strncat(kernel32_path, \"\\\\kernel32.dll\", MAX_PATH - ret);\n+\n+  if (IsNanoServer()) {\n+    \/\/ On Windows Nanoserver the kernel32.dll is located in the forwarders subdirectory\n+    strncat(kernel32_path, \"\\\\forwarders\\\\kernel32.dll\", MAX_PATH - ret);\n+  } else {\n+    strncat(kernel32_path, \"\\\\kernel32.dll\", MAX_PATH - ret);\n+  }\n","filename":"src\/hotspot\/os\/windows\/os_windows.cpp","additions":40,"deletions":1,"binary":false,"changes":41,"status":"modified"}]}