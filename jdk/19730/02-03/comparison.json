{"files":[{"patch":"@@ -29,1 +29,2 @@\n-import jdk.internal.misc.Unsafe;\n+import jdk.internal.access.JavaLangAccess;\n+import jdk.internal.access.SharedSecrets;\n@@ -40,12 +41,1 @@\n-    private static final Unsafe UNSAFE = Unsafe.getUnsafe();\n-    private static final int HI_BYTE_SHIFT;\n-    private static final int LO_BYTE_SHIFT;\n-    static {\n-        if (UNSAFE.isBigEndian()) {\n-            HI_BYTE_SHIFT = 8;\n-            LO_BYTE_SHIFT = 0;\n-        } else {\n-            HI_BYTE_SHIFT = 0;\n-            LO_BYTE_SHIFT = 8;\n-        }\n-    }\n+    private static final JavaLangAccess JLA = SharedSecrets.getJavaLangAccess();\n@@ -83,1 +73,1 @@\n-            putCharUTF16(str, index, (char) c);\n+            JLA.putCharUTF16(str, index, (char) c);\n@@ -92,2 +82,2 @@\n-            putCharUTF16(str, index    , c1);\n-            putCharUTF16(str, index + 1, c2);\n+            JLA.putCharUTF16(str, index    , c1);\n+            JLA.putCharUTF16(str, index + 1, c2);\n@@ -126,1 +116,1 @@\n-            putCharUTF16(str, index + i, '0' + (t >>> 28));\n+            JLA.putCharUTF16(str, index + i, '0' + (t >>> 28));\n@@ -131,13 +121,0 @@\n-    private static void putCharUTF16(byte[] str, int index, int c) {\n-        index <<= 1;\n-        str[index    ] = (byte)(c >> HI_BYTE_SHIFT);\n-        str[index + 1] = (byte)(c >> LO_BYTE_SHIFT);\n-    }\n-\n-\n-    private static char charAtUTF16(byte[] str, int index) {\n-        index <<= 1;\n-        return (char)(((str[index    ] & 0xff) << HI_BYTE_SHIFT)\n-                | ((str[index + 1] & 0xff) << LO_BYTE_SHIFT));\n-    }\n-\n@@ -168,1 +145,1 @@\n-            while (charAtUTF16(str, index - 1) == '0') {\n+            while (JLA.getUTF16Char(str, index - 1) == '0') {\n@@ -172,1 +149,1 @@\n-            if (charAtUTF16(str, index - 1) == '.') {\n+            if (JLA.getUTF16Char(str, index - 1) == '.') {\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/math\/ToDecimal.java","additions":9,"deletions":32,"binary":false,"changes":41,"status":"modified"}]}