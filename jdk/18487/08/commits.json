[{"commit":{"message":"Merge branch 'master' into 8322770"},"files":[{"filename":"src\/hotspot\/cpu\/aarch64\/aarch64.ad"},{"filename":"src\/hotspot\/cpu\/aarch64\/c2_MacroAssembler_aarch64.cpp"},{"filename":"src\/hotspot\/cpu\/aarch64\/vm_version_aarch64.cpp"}],"sha":"f5918cca0811ccf6f0424c2498db100b77a954c5"},{"commit":{"message":"cleanup: adjust a comment in the light of the latest change"},"files":[{"filename":"src\/hotspot\/cpu\/aarch64\/c2_MacroAssembler_aarch64.cpp"}],"sha":"6b8eb78c22c5f5644596d6a6a51bc143da77f41e"},{"commit":{"message":"cleanup: fix comment formatting\n\nCo-authored-by: Andrew Haley <aph-open@littlepinkcloud.com>"},"files":[{"filename":"src\/hotspot\/cpu\/aarch64\/stubGenerator_aarch64.cpp"}],"sha":"03821dfd55b9ffc45a82d2d1d1d77bb6a4f9a886"},{"commit":{"message":"Optimize both the stub and inlined parts of the implementation\n\nProcess T_CHAR\/T_SHORT elements using T8H arrangement instead of T4H.\nAdd a non-unrolled vectorized loop to the stub to handle vectorizable\ntail portions of arrays multiple to 4\/8 elements (for ints \/ other\ntypes). Make the stub process array as a whole instead of relying on\nthe inlined part to process an unvectorizable tail."},"files":[{"filename":"src\/hotspot\/cpu\/aarch64\/assembler_aarch64.hpp"},{"filename":"src\/hotspot\/cpu\/aarch64\/c2_MacroAssembler_aarch64.cpp"},{"filename":"src\/hotspot\/cpu\/aarch64\/stubGenerator_aarch64.cpp"}],"sha":"bfa93695b7813678936d4d25ed02866353eaae81"},{"commit":{"message":"cleanup: add comments and simplify the orr ins"},"files":[{"filename":"src\/hotspot\/cpu\/aarch64\/c2_MacroAssembler_aarch64.cpp"}],"sha":"31dc32813542ecd72aacf81667b7b066f577cbef"},{"commit":{"message":"cleanup: remove redundant copyright notice"},"files":[{"filename":"src\/hotspot\/share\/utilities\/intpow.hpp"}],"sha":"04119db326cff45b98f535af177b139d6082d96e"},{"commit":{"message":"cleanup: use a constexpr function for intpow instead of a templated class"},"files":[{"filename":"src\/hotspot\/cpu\/aarch64\/stubGenerator_aarch64.cpp"},{"filename":"src\/hotspot\/share\/utilities\/intpow.hpp"}],"sha":"eb9708c9bec44523e256d9ea662ce2c3deac02fb"},{"commit":{"message":"cleanup: address review comments"},"files":[{"filename":"src\/hotspot\/cpu\/aarch64\/c2_MacroAssembler_aarch64.cpp"},{"filename":"src\/hotspot\/cpu\/aarch64\/stubGenerator_aarch64.cpp"},{"filename":"src\/hotspot\/cpu\/aarch64\/stubRoutines_aarch64.hpp"}],"sha":"7ddae523ca474fdfda29daefa3223a916fd913a1"},{"commit":{"message":"cleanup: remove a redundant parameter"},"files":[{"filename":"src\/hotspot\/cpu\/aarch64\/stubGenerator_aarch64.cpp"}],"sha":"8e9f8d0ca98569ed7d69ceaff63b1a41ca9affaf"},{"commit":{"message":"8322770: AArch64: C2: Implement VectorizedHashCode\n\nThe code to calculate a hash code consists of two parts: a stub method that\nimplements a vectorized loop using Neon instruction which processes 16 or 32\nelements per iteration depending on the data type; and an unrolled inlined\nscalar loop that processes remaining tail elements.\n\n[Performance]\n\n[[Neoverse V2]]\n```\n                                                            |  328a053 (master) |  dc2909f (this)  |\n----------------------------------------------------------------------------------------------------------\n  Benchmark                               (size)  Mode  Cnt |    Score    Error |    Score   Error | Units\n----------------------------------------------------------------------------------------------------------\n  ArraysHashCode.bytes                         1  avgt   15 |    0.805 ?  0.206 |    0.815 ? 0.141 | ns\/op\n  ArraysHashCode.bytes                        10  avgt   15 |    4.362 ?  0.013 |    3.522 ? 0.124 | ns\/op\n  ArraysHashCode.bytes                       100  avgt   15 |   78.374 ?  0.136 |   12.935 ? 0.016 | ns\/op\n  ArraysHashCode.bytes                     10000  avgt   15 | 9247.335 ? 13.691 | 1344.770 ? 1.898 | ns\/op\n  ArraysHashCode.chars                         1  avgt   15 |    0.731 ?  0.035 |    0.723 ? 0.046 | ns\/op\n  ArraysHashCode.chars                        10  avgt   15 |    4.359 ?  0.007 |    3.385 ? 0.004 | ns\/op\n  ArraysHashCode.chars                       100  avgt   15 |   78.374 ?  0.117 |   11.903 ? 0.023 | ns\/op\n  ArraysHashCode.chars                     10000  avgt   15 | 9248.328 ? 13.644 | 1344.007 ? 1.795 | ns\/op\n  ArraysHashCode.ints                          1  avgt   15 |    0.746 ?  0.083 |    0.631 ? 0.020 | ns\/op\n  ArraysHashCode.ints                         10  avgt   15 |    4.357 ?  0.009 |    3.387 ? 0.005 | ns\/op\n  ArraysHashCode.ints                        100  avgt   15 |   78.391 ?  0.103 |   10.934 ? 0.015 | ns\/op\n  ArraysHashCode.ints                      10000  avgt   15 | 9248.125 ? 12.583 | 1340.644 ? 1.869 | ns\/op\n  ArraysHashCode.multibytes                    1  avgt   15 |    0.555 ?  0.020 |    0.559 ? 0.020 | ns\/op\n  ArraysHashCode.multibytes                   10  avgt   15 |    2.681 ?  0.020 |    2.175 ? 0.045 | ns\/op\n  ArraysHashCode.multibytes                  100  avgt   15 |   36.954 ?  0.051 |   12.870 ? 0.021 | ns\/op\n  ArraysHashCode.multibytes                10000  avgt   15 | 4862.703 ?  6.909 |  720.774 ? 3.487 | ns\/op\n  ArraysHashCode.multichars                    1  avgt   15 |    0.551 ?  0.017 |    0.552 ? 0.018 | ns\/op\n  ArraysHashCode.multichars                   10  avgt   15 |    2.683 ?  0.018 |    2.182 ? 0.086 | ns\/op\n  ArraysHashCode.multichars                  100  avgt   15 |   36.988 ?  0.054 |    8.830 ? 0.013 | ns\/op\n  ArraysHashCode.multichars                10000  avgt   15 | 4862.279 ?  6.839 |  756.074 ? 6.754 | ns\/op\n  ArraysHashCode.multiints                     1  avgt   15 |    0.555 ?  0.018 |    0.557 ? 0.019 | ns\/op\n  ArraysHashCode.multiints                    10  avgt   15 |    2.689 ?  0.029 |    2.184 ? 0.074 | ns\/op\n  ArraysHashCode.multiints                   100  avgt   15 |   36.992 ?  0.044 |    8.098 ? 0.012 | ns\/op\n  ArraysHashCode.multiints                 10000  avgt   15 | 4873.863 ?  6.689 |  783.540 ? 9.151 | ns\/op\n  ArraysHashCode.multishorts                   1  avgt   15 |    0.563 ?  0.021 |    0.561 ? 0.021 | ns\/op\n  ArraysHashCode.multishorts                  10  avgt   15 |    2.679 ?  0.020 |    2.164 ? 0.054 | ns\/op\n  ArraysHashCode.multishorts                 100  avgt   15 |   36.976 ?  0.053 |    8.828 ? 0.013 | ns\/op\n  ArraysHashCode.multishorts               10000  avgt   15 | 4861.118 ?  7.057 |  748.952 ? 6.040 | ns\/op\n  ArraysHashCode.shorts                        1  avgt   15 |    0.631 ?  0.020 |    0.643 ? 0.033 | ns\/op\n  ArraysHashCode.shorts                       10  avgt   15 |    4.362 ?  0.005 |    3.400 ? 0.025 | ns\/op\n  ArraysHashCode.shorts                      100  avgt   15 |   78.324 ?  0.151 |   11.892 ? 0.017 | ns\/op\n  ArraysHashCode.shorts                    10000  avgt   15 | 9246.323 ? 13.126 | 1344.304 ? 1.906 | ns\/op\n  StringHashCode.Algorithm.defaultLatin1       1  avgt   15 |    0.946 ?  0.061 |    0.924 ? 0.001 | ns\/op\n  StringHashCode.Algorithm.defaultLatin1      10  avgt   15 |    4.334 ?  0.046 |    3.447 ? 0.051 | ns\/op\n  StringHashCode.Algorithm.defaultLatin1     100  avgt   15 |   78.136 ?  0.105 |   12.950 ? 0.048 | ns\/op\n  StringHashCode.Algorithm.defaultLatin1   10000  avgt   15 | 9266.117 ? 13.184 | 1345.097 ? 1.963 | ns\/op\n  StringHashCode.Algorithm.defaultUTF16        1  avgt   15 |    0.692 ?  0.035 |    0.687 ? 0.034 | ns\/op\n  StringHashCode.Algorithm.defaultUTF16       10  avgt   15 |    4.323 ?  0.023 |    3.394 ? 0.015 | ns\/op\n  StringHashCode.Algorithm.defaultUTF16      100  avgt   15 |   78.317 ?  0.109 |   11.911 ? 0.017 | ns\/op\n  StringHashCode.Algorithm.defaultUTF16    10000  avgt   15 | 9249.620 ? 14.594 | 1344.533 ? 1.908 | ns\/op\n  StringHashCode.cached                      N\/A  avgt   15 |    0.518 ?  0.017 |    0.530 ? 0.031 | ns\/op\n  StringHashCode.empty                       N\/A  avgt   15 |    0.733 ?  0.086 |    0.849 ? 0.168 | ns\/op\n  StringHashCode.notCached                   N\/A  avgt   15 |    0.687 ?  0.084 |    0.630 ? 0.018 | ns\/op\n```\n\n[Test]\n\njtreg::tier1 passed on AArch64 and x86."},"files":[{"filename":"src\/hotspot\/cpu\/aarch64\/aarch64.ad"},{"filename":"src\/hotspot\/cpu\/aarch64\/assembler_aarch64.hpp"},{"filename":"src\/hotspot\/cpu\/aarch64\/c2_MacroAssembler_aarch64.cpp"},{"filename":"src\/hotspot\/cpu\/aarch64\/c2_MacroAssembler_aarch64.hpp"},{"filename":"src\/hotspot\/cpu\/aarch64\/stubGenerator_aarch64.cpp"},{"filename":"src\/hotspot\/cpu\/aarch64\/stubRoutines_aarch64.cpp"},{"filename":"src\/hotspot\/cpu\/aarch64\/stubRoutines_aarch64.hpp"},{"filename":"src\/hotspot\/cpu\/aarch64\/vm_version_aarch64.cpp"},{"filename":"src\/hotspot\/share\/utilities\/intpow.hpp"}],"sha":"4c6812f63bf9a6d5cf17c7899fe4a77e390c1645"}]