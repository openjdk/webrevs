{"files":[{"patch":"@@ -30,0 +30,1 @@\n+ * @key headful\n@@ -46,0 +47,1 @@\n+import java.util.concurrent.atomic.AtomicReference;\n@@ -102,0 +104,1 @@\n+        AtomicReference<JFrame> frameRef = new AtomicReference<>();\n@@ -107,0 +110,1 @@\n+            frameRef.set(t);\n@@ -109,2 +113,3 @@\n-        panelUpdateUICounter = 0;\n-        observedExpectedExceptionCounter = 0;\n+        try {\n+            panelUpdateUICounter = 0;\n+            observedExpectedExceptionCounter = 0;\n@@ -112,2 +117,2 @@\n-        TestDesktopProperty property =\n-                new TestDesktopProperty(\"test\", new Object());\n+            TestDesktopProperty property =\n+                    new TestDesktopProperty(\"test\", new Object());\n@@ -115,2 +120,3 @@\n-        SwingUtilities.invokeLater(property::updateUI);\n-        SwingUtilities.invokeAndWait(() -> {});\n+            SwingUtilities.invokeLater(property::updateUI);\n+            SwingUtilities.invokeAndWait(() -> {\n+            });\n@@ -118,2 +124,3 @@\n-        SwingUtilities.invokeLater(property::updateUI);\n-        SwingUtilities.invokeAndWait(() -> {});\n+            SwingUtilities.invokeLater(property::updateUI);\n+            SwingUtilities.invokeAndWait(() -> {\n+            });\n@@ -121,1 +128,1 @@\n-        CountDownLatch keepAliveLatch = new CountDownLatch(1);\n+            CountDownLatch keepAliveLatch = new CountDownLatch(1);\n@@ -123,4 +130,4 @@\n-        SwingUtilities.invokeLater(() -> {\n-            \/\/ We expect 3 updateUI invocations: during construction, the first\n-            \/\/ property.updateUI, & the second property.updateUI\n-            assertEquals(3, panelUpdateUICounter);\n+            SwingUtilities.invokeLater(() -> {\n+                \/\/ We expect 3 updateUI invocations: during construction, the first\n+                \/\/ property.updateUI, & the second property.updateUI\n+                assertEquals(3, panelUpdateUICounter);\n@@ -128,2 +135,2 @@\n-            \/\/ We expect 2 attempts on buttonUI.uninstallUI\n-            assertEquals(2, observedExpectedExceptionCounter);\n+                \/\/ We expect 2 attempts on buttonUI.uninstallUI\n+                assertEquals(2, observedExpectedExceptionCounter);\n@@ -131,3 +138,3 @@\n-            \/\/ The test is finished\n-            keepAliveLatch.countDown();\n-        });\n+                \/\/ The test is finished\n+                keepAliveLatch.countDown();\n+            });\n@@ -135,1 +142,4 @@\n-        keepAliveLatch.await();\n+            keepAliveLatch.await();\n+        } finally {\n+            SwingUtilities.invokeAndWait(() -> frameRef.get().dispose());\n+        }\n","filename":"test\/jdk\/com\/sun\/java\/swing\/plaf\/DesktopPropertyResetPendingFlagTest.java","additions":29,"deletions":19,"binary":false,"changes":48,"status":"modified"}]}