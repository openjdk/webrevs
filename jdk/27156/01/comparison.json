{"files":[{"patch":"@@ -820,1 +820,0 @@\n-java\/awt\/Focus\/InactiveFocusRace.java 8023263 linux-all\n","filename":"test\/jdk\/ProblemList.txt","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2002, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2002, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,0 +33,1 @@\n+import java.awt.EventQueue;\n@@ -51,0 +52,1 @@\n+    private static Robot robot;\n@@ -54,0 +56,1 @@\n+            robot = new Robot();\n@@ -55,1 +58,5 @@\n-            test.init();\n+            EventQueue.invokeAndWait(() -> {\n+                test.init();\n+            });\n+            robot.waitForIdle();\n+            robot.delay(1000);\n@@ -58,6 +65,8 @@\n-            if (activeFrame != null) {\n-                activeFrame.dispose();\n-            }\n-            if (inactiveFrame != null) {\n-                inactiveFrame.dispose();\n-            }\n+            EventQueue.invokeAndWait(() -> {\n+                if (activeFrame != null) {\n+                    activeFrame.dispose();\n+                }\n+                if (inactiveFrame != null) {\n+                    inactiveFrame.dispose();\n+                }\n+            });\n@@ -94,0 +103,6 @@\n+        inactiveFrame.addWindowListener(new WindowAdapter() {\n+            public void windowActivated(WindowEvent e) {\n+                System.err.println(\"inactive Window activated\");\n+                sema.raise();\n+            }\n+        });\n@@ -100,0 +115,1 @@\n+        inactiveFrame.setVisible(true);\n@@ -103,1 +119,3 @@\n-        Robot robot = null;\n+\n+\n+        \/\/ Wait for inactive frame to become active\n@@ -105,3 +123,6 @@\n-            robot = new Robot();\n-        } catch (Exception e) {\n-            throw new RuntimeException(\"Unable to create robot\");\n+            sema.doWait(TIMEOUT);\n+        } catch (InterruptedException ie) {\n+            throw new RuntimeException(\"Wait was interrupted\");\n+        }\n+        if (!sema.getState()) {\n+            throw new RuntimeException(\"Frame doesn't become active on show\");\n@@ -109,0 +130,1 @@\n+        sema.setState(false);\n@@ -110,2 +132,5 @@\n-        inactiveFrame.setVisible(true);\n-        activeFrame.setVisible(true);\n+        try {\n+            EventQueue.invokeAndWait(() -> activeFrame.setVisible(true));\n+        } catch (Exception e) {\n+            throw new RuntimeException(\"Interrupted active frame rendering\");\n+        }\n","filename":"test\/jdk\/java\/awt\/Focus\/InactiveFocusRace.java","additions":39,"deletions":14,"binary":false,"changes":53,"status":"modified"}]}