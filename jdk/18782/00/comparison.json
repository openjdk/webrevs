{"files":[{"patch":"@@ -443,2 +443,9 @@\n-  if (LockingMode == LM_LIGHTWEIGHT && !realloc_failures) {\n-    deoptee_thread->lock_stack().verify_consistent_lock_order(lock_order, exec_mode != Deoptimization::Unpack_none);\n+  if (LockingMode == LM_LIGHTWEIGHT && !realloc_failures && lock_order.is_nonempty()) {\n+    const int bci = chunk->first()->bci();\n+    const Bytecodes::Code bc = chunk->first()->method()->code_at(bci);\n+    const bool is_syncronized_entry = chunk->first()->method()->is_synchronized() &&\n+                                      chunk->first()->raw_bci() == SynchronizationEntryBCI;\n+    \/\/ If deoptimizing from monitorenter bytecode we maybe in transitional state. Skip verification.\n+    if (!is_syncronized_entry && bc != Bytecodes::Code::_monitorenter) {\n+      deoptee_thread->lock_stack().verify_consistent_lock_order(lock_order, exec_mode != Deoptimization::Unpack_none);\n+    }\n","filename":"src\/hotspot\/share\/runtime\/deoptimization.cpp","additions":9,"deletions":2,"binary":false,"changes":11,"status":"modified"}]}