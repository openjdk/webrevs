{"files":[{"patch":"@@ -443,1 +443,1 @@\n-  if (LockingMode == LM_LIGHTWEIGHT && !realloc_failures && lock_order.is_nonempty()) {\n+  if (lock_order.is_nonempty()) {\n@@ -446,0 +446,2 @@\n+    const bool previous_bc_not_monitorenter = bci == 0 ? !chunk->first()->method()->is_synchronized()\n+                                                       : chunk->first()->method()->code_at(bci - 1) != Bytecodes::_monitorenter;\n@@ -449,1 +451,3 @@\n-    if (!is_syncronized_entry && bc != Bytecodes::Code::_monitorenter) {\n+    \/\/ When reexecuting the current bc, the previous bc may not have finished yet.\n+    if (!is_syncronized_entry && bc != Bytecodes::Code::_monitorenter &&\n+        (!chunk->first()->should_reexecute() || previous_bc_not_monitorenter)) {\n","filename":"src\/hotspot\/share\/runtime\/deoptimization.cpp","additions":6,"deletions":2,"binary":false,"changes":8,"status":"modified"}]}