{"files":[{"patch":"@@ -80,0 +80,1 @@\n+        appLayoutAsserts = cmd.appLayoutAsserts;\n@@ -832,3 +833,16 @@\n-    JPackageCommand assertAppLayout() {\n-        assertAppImageFile();\n-        assertPackageFile();\n+    public static enum AppLayoutAssert {\n+        AppImageFile(JPackageCommand::assertAppImageFile),\n+        PackageFile(JPackageCommand::assertPackageFile),\n+        MainLauncher(cmd -> {\n+            TKit.assertExecutableFileExists(cmd.appLauncherPath());\n+        }),\n+        MainLauncherCfgFile(cmd -> {\n+            TKit.assertFileExists(cmd.appLauncherCfgPath(null));\n+        }),\n+        RuntimeDirectory(cmd -> {\n+            TKit.assertDirectoryExists(cmd.appRuntimeDirectory());\n+                if (TKit.isOSX() && !cmd.isRuntime()) {\n+                    TKit.assertFileExists(cmd.appRuntimeDirectory().resolve(\n+                            \"Contents\/MacOS\/libjli.dylib\"));\n+                }\n+        });\n@@ -836,1 +850,3 @@\n-        TKit.assertDirectoryExists(appRuntimeDirectory());\n+        AppLayoutAssert(Consumer<JPackageCommand> action) {\n+            this.action = action;\n+        }\n@@ -838,3 +854,2 @@\n-        if (!isRuntime()) {\n-            TKit.assertExecutableFileExists(appLauncherPath());\n-            TKit.assertFileExists(appLauncherCfgPath(null));\n+        private final Consumer<JPackageCommand> action;\n+    }\n@@ -842,5 +857,4 @@\n-            if (TKit.isOSX()) {\n-                TKit.assertFileExists(appRuntimeDirectory().resolve(\n-                        \"Contents\/MacOS\/libjli.dylib\"));\n-            }\n-        }\n+    public JPackageCommand setAppLayoutAsserts(AppLayoutAssert ... asserts) {\n+        this.appLayoutAsserts = Set.of(asserts);\n+        return this;\n+    }\n@@ -848,0 +862,4 @@\n+    JPackageCommand assertAppLayout() {\n+        for (var appLayoutAssert : appLayoutAsserts.stream().sorted().toList()) {\n+            appLayoutAssert.action.accept(this);\n+        }\n@@ -1128,0 +1146,1 @@\n+    private Set<AppLayoutAssert> appLayoutAsserts = Set.of(AppLayoutAssert.values());\n","filename":"test\/jdk\/tools\/jpackage\/helpers\/jdk\/jpackage\/test\/JPackageCommand.java","additions":31,"deletions":12,"binary":false,"changes":43,"status":"modified"},{"patch":"@@ -151,0 +151,7 @@\n+\n+            if (!isAppImageValid(cmd)) {\n+                cmd.setAppLayoutAsserts(\n+                        JPackageCommand.AppLayoutAssert.MainLauncher,\n+                        JPackageCommand.AppLayoutAssert.MainLauncherCfgFile,\n+                        JPackageCommand.AppLayoutAssert.RuntimeDirectory);\n+            }\n@@ -159,3 +166,0 @@\n-            } else {\n-                cmd.execute();\n-                HelloApp.executeLauncherAndVerifyOutput(cmd);\n","filename":"test\/jdk\/tools\/jpackage\/share\/InOutPathTest.java","additions":7,"deletions":3,"binary":false,"changes":10,"status":"modified"}]}