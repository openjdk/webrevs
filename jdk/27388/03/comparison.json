{"files":[{"patch":"@@ -32,1 +32,1 @@\n- * @run testng\/othervm -Djdk.internal.httpclient.debug=true BadHeadersTest\n+ * @run junit\/othervm -Djdk.internal.httpclient.debug=true BadHeadersTest\n@@ -41,4 +41,4 @@\n-import org.testng.annotations.AfterTest;\n-import org.testng.annotations.BeforeTest;\n-import org.testng.annotations.DataProvider;\n-import org.testng.annotations.Test;\n+import org.junit.jupiter.api.AfterAll;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.params.ParameterizedTest;\n+import org.junit.jupiter.params.provider.MethodSource;\n@@ -64,0 +64,1 @@\n+\n@@ -72,2 +73,3 @@\n-import static org.testng.Assert.assertTrue;\n-import static org.testng.Assert.fail;\n+import static org.junit.jupiter.api.Assertions.assertInstanceOf;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+import static org.junit.jupiter.api.Assertions.fail;\n@@ -88,5 +90,5 @@\n-    SSLContext sslContext;\n-    Http2TestServer http2TestServer;   \/\/ HTTP\/2 ( h2c )\n-    Http2TestServer https2TestServer;  \/\/ HTTP\/2 ( h2  )\n-    String http2URI;\n-    String https2URI;\n+    private static SSLContext sslContext;\n+    private static Http2TestServer http2TestServer;   \/\/ HTTP\/2 ( h2c )\n+    private static Http2TestServer https2TestServer;  \/\/ HTTP\/2 ( h2  )\n+    private static String http2URI;\n+    private static String https2URI;\n@@ -130,2 +132,1 @@\n-    @DataProvider(name = \"variants\")\n-    public Object[][] variants() {\n+    static Object[][] variants() {\n@@ -145,2 +146,2 @@\n-\n-    @Test(dataProvider = \"variants\")\n+    @ParameterizedTest\n+    @MethodSource(\"variants\")\n@@ -175,1 +176,2 @@\n-    @Test(dataProvider = \"variants\")\n+    @ParameterizedTest\n+    @MethodSource(\"variants\")\n@@ -214,2 +216,1 @@\n-            assertTrue(throwable instanceof ProtocolException,\n-                    \"Expected ProtocolException, got \" + throwable);\n+            assertInstanceOf(ProtocolException.class, throwable, \"Expected ProtocolException, got \" + throwable);\n@@ -242,2 +243,2 @@\n-    @BeforeTest\n-    public void setup() throws Exception {\n+    @BeforeAll\n+    static void setup() throws Exception {\n@@ -267,2 +268,2 @@\n-    @AfterTest\n-    public void teardown() throws Exception {\n+    @AfterAll\n+    static void teardown() throws Exception {\n","filename":"test\/jdk\/java\/net\/httpclient\/http2\/BadHeadersTest.java","additions":24,"deletions":23,"binary":false,"changes":47,"status":"modified"},{"patch":"@@ -29,1 +29,1 @@\n- * @run testng\/othervm\n+ * @run junit\/othervm\n@@ -36,3 +36,3 @@\n-import org.testng.annotations.AfterTest;\n-import org.testng.annotations.BeforeTest;\n-import org.testng.annotations.Test;\n+import org.junit.jupiter.api.AfterAll;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.api.Test;\n@@ -62,1 +62,1 @@\n-import static org.testng.Assert.*;\n+import static org.junit.jupiter.api.Assertions.*;\n@@ -76,2 +76,2 @@\n-    HttpServerAdapters.HttpTestServer server;\n-    URI uri;\n+    static HttpServerAdapters.HttpTestServer server;\n+    static URI uri;\n@@ -79,2 +79,2 @@\n-    @BeforeTest\n-    public void setup() throws Exception {\n+    @BeforeAll\n+    static void setup() throws Exception {\n@@ -90,2 +90,2 @@\n-    @AfterTest\n-    public void teardown() {\n+    @AfterAll\n+    static void teardown() {\n@@ -99,1 +99,1 @@\n-    public void test() throws Exception {\n+    void test() {\n@@ -126,2 +126,1 @@\n-            assertTrue(throwable instanceof ProtocolException,\n-                    \"Expected ProtocolException, got \" + throwable);\n+            assertInstanceOf(ProtocolException.class, throwable, \"Expected ProtocolException, got \" + throwable);\n","filename":"test\/jdk\/java\/net\/httpclient\/http2\/BadPushPromiseTest.java","additions":13,"deletions":14,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -35,1 +35,1 @@\n- * @run testng\/othervm -Djdk.httpclient.HttpClient.log=ssl,requests,responses,errors BasicTest\n+ * @run junit\/othervm -Djdk.httpclient.HttpClient.log=ssl,requests,responses,errors BasicTest\n@@ -56,1 +56,1 @@\n-import org.testng.annotations.Test;\n+import org.junit.jupiter.api.Test;\n@@ -63,1 +63,0 @@\n-@Test\n@@ -130,1 +129,1 @@\n-    public static void test() throws Exception {\n+    void test() throws Exception {\n","filename":"test\/jdk\/java\/net\/httpclient\/http2\/BasicTest.java","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2024, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -30,1 +30,1 @@\n- * @run testng\/othervm  -Djdk.internal.httpclient.debug=true\n+ * @run junit\/othervm   -Djdk.internal.httpclient.debug=true\n@@ -46,1 +46,0 @@\n-import java.net.http.HttpResponse.BodyHandler;\n@@ -48,3 +47,0 @@\n-import java.net.http.HttpResponse.BodySubscriber;\n-import java.net.http.HttpResponse.ResponseInfo;\n-import java.nio.ByteBuffer;\n@@ -52,1 +48,0 @@\n-import java.util.ArrayList;\n@@ -54,2 +49,0 @@\n-import java.util.List;\n-import java.util.Map.Entry;\n@@ -57,1 +50,0 @@\n-import java.util.concurrent.CompletionStage;\n@@ -60,1 +52,0 @@\n-import java.util.concurrent.Flow.Subscription;\n@@ -62,1 +53,0 @@\n-import java.util.function.BiFunction;\n@@ -75,4 +65,0 @@\n-import jdk.internal.net.http.frame.ContinuationFrame;\n-import jdk.internal.net.http.frame.HeaderFrame;\n-import jdk.internal.net.http.frame.HeadersFrame;\n-import jdk.internal.net.http.frame.Http2Frame;\n@@ -82,4 +68,4 @@\n-import org.testng.annotations.AfterTest;\n-import org.testng.annotations.BeforeTest;\n-import org.testng.annotations.DataProvider;\n-import org.testng.annotations.Test;\n+import org.junit.jupiter.api.AfterAll;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.params.ParameterizedTest;\n+import org.junit.jupiter.params.provider.MethodSource;\n@@ -87,6 +73,1 @@\n-import static java.util.List.of;\n-import static java.util.Map.entry;\n-import static org.testng.Assert.assertEquals;\n-import static org.testng.Assert.assertNotEquals;\n-import static org.testng.Assert.assertTrue;\n-import static org.testng.Assert.fail;\n+import static org.junit.jupiter.api.Assertions.*;\n@@ -96,6 +77,6 @@\n-    SSLContext sslContext;\n-    HttpTestServer http2TestServer;   \/\/ HTTP\/2 ( h2c )\n-    HttpTestServer https2TestServer;  \/\/ HTTP\/2 ( h2  )\n-    String http2URI;\n-    String https2URI;\n-    final AtomicInteger reqid = new AtomicInteger();\n+    private static SSLContext sslContext;\n+    private static HttpTestServer http2TestServer;   \/\/ HTTP\/2 ( h2c )\n+    private static HttpTestServer https2TestServer;  \/\/ HTTP\/2 ( h2  )\n+    private static String http2URI;\n+    private static String https2URI;\n+    private final AtomicInteger reqid = new AtomicInteger();\n@@ -103,3 +84,1 @@\n-\n-    @DataProvider(name = \"variants\")\n-    public Object[][] variants() {\n+    static Object[][] variants() {\n@@ -112,1 +91,2 @@\n-    @Test(dataProvider = \"variants\")\n+    @ParameterizedTest\n+    @MethodSource(\"variants\")\n@@ -151,1 +131,1 @@\n-                            assertEquals(ckey, label, \"Unexpected key for \" + query);\n+                            assertEquals(label, ckey, \"Unexpected key for \" + query);\n@@ -177,1 +157,1 @@\n-                            assertEquals(ckey, label, \"Unexpected key for \" + query);\n+                            assertEquals(label, ckey, \"Unexpected key for \" + query);\n@@ -230,1 +210,1 @@\n-                assertNotEquals(ckey, label);\n+                assertNotEquals(label, ckey);\n@@ -261,2 +241,2 @@\n-    @BeforeTest\n-    public void setup() throws Exception {\n+    @BeforeAll\n+    static void setup() throws Exception {\n@@ -267,4 +247,4 @@\n-        var http2TestServer = new Http2TestServer(\"localhost\", false, 0);\n-        http2TestServer.addHandler(new Http2TestHandler(), \"\/http2\/\");\n-        this.http2TestServer = HttpTestServer.of(http2TestServer);\n-        http2URI = \"http:\/\/\" + this.http2TestServer.serverAuthority() + \"\/http2\/x\";\n+        var http2TestServerLocal = new Http2TestServer(\"localhost\", false, 0);\n+        http2TestServerLocal.addHandler(new Http2TestHandler(), \"\/http2\/\");\n+        http2TestServer = HttpTestServer.of(http2TestServerLocal);\n+        http2URI = \"http:\/\/\" + http2TestServer.serverAuthority() + \"\/http2\/x\";\n@@ -272,4 +252,4 @@\n-        var https2TestServer = new Http2TestServer(\"localhost\", true, sslContext);\n-        https2TestServer.addHandler(new Http2TestHandler(), \"\/https2\/\");\n-        this.https2TestServer = HttpTestServer.of(https2TestServer);\n-        https2URI = \"https:\/\/\" + this.https2TestServer.serverAuthority() + \"\/https2\/x\";\n+        var https2TestServerLocal = new Http2TestServer(\"localhost\", true, sslContext);\n+        https2TestServerLocal.addHandler(new Http2TestHandler(), \"\/https2\/\");\n+        https2TestServer = HttpTestServer.of(https2TestServerLocal);\n+        https2URI = \"https:\/\/\" + https2TestServer.serverAuthority() + \"\/https2\/x\";\n@@ -279,2 +259,2 @@\n-        http2TestServer.setExchangeSupplier(FCHttp2TestExchange::new);\n-        https2TestServer.setExchangeSupplier(FCHttp2TestExchange::new);\n+        http2TestServerLocal.setExchangeSupplier(FCHttp2TestExchange::new);\n+        https2TestServerLocal.setExchangeSupplier(FCHttp2TestExchange::new);\n@@ -282,2 +262,2 @@\n-        this.http2TestServer.start();\n-        this.https2TestServer.start();\n+        http2TestServer.start();\n+        https2TestServer.start();\n@@ -286,2 +266,2 @@\n-    @AfterTest\n-    public void teardown() throws Exception {\n+    @AfterAll\n+    static void teardown() throws Exception {\n@@ -367,1 +347,0 @@\n-\n","filename":"test\/jdk\/java\/net\/httpclient\/http2\/ConnectionFlowControlTest.java","additions":35,"deletions":56,"binary":false,"changes":91,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -30,1 +30,1 @@\n- * @run testng\/othervm ContinuationFrameTest\n+ * @run junit\/othervm ContinuationFrameTest\n@@ -63,4 +63,4 @@\n-import org.testng.annotations.AfterTest;\n-import org.testng.annotations.BeforeTest;\n-import org.testng.annotations.DataProvider;\n-import org.testng.annotations.Test;\n+import org.junit.jupiter.api.AfterAll;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.params.ParameterizedTest;\n+import org.junit.jupiter.params.provider.MethodSource;\n@@ -69,2 +69,1 @@\n-import static org.testng.Assert.assertEquals;\n-import static org.testng.Assert.assertTrue;\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n@@ -74,8 +73,8 @@\n-    SSLContext sslContext;\n-    Http2TestServer http2TestServer;   \/\/ HTTP\/2 ( h2c )\n-    Http2TestServer https2TestServer;  \/\/ HTTP\/2 ( h2  )\n-    String http2URI;\n-    String https2URI;\n-    String noBodyhttp2URI;\n-    String noBodyhttps2URI;\n-    final ReferenceTracker TRACKER = ReferenceTracker.INSTANCE;\n+    private static SSLContext sslContext;\n+    private static Http2TestServer http2TestServer;   \/\/ HTTP\/2 ( h2c )\n+    private static Http2TestServer https2TestServer;  \/\/ HTTP\/2 ( h2  )\n+    private static String http2URI;\n+    private static String https2URI;\n+    private static String noBodyhttp2URI;\n+    private static String noBodyhttps2URI;\n+    private final static ReferenceTracker TRACKER = ReferenceTracker.INSTANCE;\n@@ -136,2 +135,1 @@\n-    @DataProvider(name = \"variants\")\n-    public Object[][] variants() {\n+    static Object[][] variants() {\n@@ -158,1 +156,1 @@\n-    HttpClient sharedClient;\n+    static HttpClient sharedClient;\n@@ -174,1 +172,2 @@\n-    @Test(dataProvider = \"variants\")\n+    @ParameterizedTest\n+    @MethodSource(\"variants\")\n@@ -200,3 +199,2 @@\n-                assertTrue(resp.statusCode() == 204,\n-                    \"Expected 204, got:\" + resp.statusCode());\n-                assertEquals(resp.version(), HTTP_2);\n+                assertEquals(204, resp.statusCode(), \"Expected 204, got:\" + resp.statusCode());\n+                assertEquals(HTTP_2, resp.version());\n@@ -207,4 +205,3 @@\n-            assertTrue(resp.statusCode() == 200,\n-                       \"Expected 200, got:\" + resp.statusCode());\n-            assertEquals(resp.body(), \"Hello there!\");\n-            assertEquals(resp.version(), HTTP_2);\n+            assertEquals(200, resp.statusCode(), \"Expected 200, got:\" + resp.statusCode());\n+            assertEquals(\"Hello there!\", resp.body());\n+            assertEquals(HTTP_2, resp.version());\n@@ -214,2 +211,2 @@\n-    @BeforeTest\n-    public void setup() throws Exception {\n+    @BeforeAll\n+    static void setup() throws Exception {\n@@ -243,2 +240,2 @@\n-    @AfterTest\n-    public void teardown() throws Exception {\n+    @AfterAll\n+    static void teardown() throws Exception {\n","filename":"test\/jdk\/java\/net\/httpclient\/http2\/ContinuationFrameTest.java","additions":28,"deletions":31,"binary":false,"changes":59,"status":"modified"}]}