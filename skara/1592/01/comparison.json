{"files":[{"patch":"@@ -34,1 +34,1 @@\n-    static List<String> get(JCheckConfiguration original, HostUser botUser, List<Comment> comments, boolean reviewMerge) throws IOException {\n+    static List<String> get(JCheckConfiguration original, HostUser botUser, List<Comment> comments, MergePullRequestReviewConfiguration reviewMerge) throws IOException {\n@@ -37,1 +37,1 @@\n-        if (additionalReviewers.isEmpty() && !reviewMerge) {\n+        if (additionalReviewers.isEmpty() && reviewMerge == MergePullRequestReviewConfiguration.JCHECK) {\n@@ -48,1 +48,1 @@\n-        if (reviewMerge) {\n+        if (reviewMerge == MergePullRequestReviewConfiguration.ALWAYS) {\n@@ -50,0 +50,2 @@\n+        } else if (reviewMerge == MergePullRequestReviewConfiguration.NEVER) {\n+            ret.add(\"merge=ignore\");\n","filename":"bots\/pr\/src\/main\/java\/org\/openjdk\/skara\/bots\/pr\/AdditionalConfiguration.java","additions":5,"deletions":3,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -86,1 +86,1 @@\n-                     boolean reviewMerge, Approval approval) throws IOException {\n+                     MergePullRequestReviewConfiguration reviewMerge, Approval approval) throws IOException {\n@@ -112,1 +112,1 @@\n-                                     boolean ignoreStaleReviews, Set<String> integrators, boolean reviewCleanBackport, boolean reviewMerge,\n+                                     boolean ignoreStaleReviews, Set<String> integrators, boolean reviewCleanBackport, MergePullRequestReviewConfiguration reviewMerge,\n","filename":"bots\/pr\/src\/main\/java\/org\/openjdk\/skara\/bots\/pr\/CheckRun.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -50,1 +50,1 @@\n-    private final boolean reviewMerge;\n+    private final MergePullRequestReviewConfiguration reviewMerge;\n@@ -53,1 +53,1 @@\n-            HostedRepository jcheckRepo, String jcheckName, String jcheckRef, List<Comment> comments, boolean reviewMerge) {\n+            HostedRepository jcheckRepo, String jcheckName, String jcheckRef, List<Comment> comments, MergePullRequestReviewConfiguration reviewMerge) {\n","filename":"bots\/pr\/src\/main\/java\/org\/openjdk\/skara\/bots\/pr\/CheckablePullRequest.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -0,0 +1,29 @@\n+\/*\n+ * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package org.openjdk.skara.bots.pr;\n+\n+enum MergePullRequestReviewConfiguration {\n+    ALWAYS,\n+    NEVER,\n+    JCHECK\n+}\n","filename":"bots\/pr\/src\/main\/java\/org\/openjdk\/skara\/bots\/pr\/MergePullRequestReviewConfiguration.java","additions":29,"deletions":0,"binary":false,"changes":29,"status":"added"},{"patch":"@@ -69,1 +69,1 @@\n-    private final boolean reviewMerge;\n+    private final MergePullRequestReviewConfiguration reviewMerge;\n@@ -95,1 +95,1 @@\n-                   boolean reviewCleanBackport, String mlbridgeBotName, boolean reviewMerge, boolean processPR, boolean processCommit,\n+                   boolean reviewCleanBackport, String mlbridgeBotName, MergePullRequestReviewConfiguration reviewMerge, boolean processPR, boolean processCommit,\n@@ -370,1 +370,1 @@\n-    public boolean reviewMerge(){\n+    public MergePullRequestReviewConfiguration reviewMerge() {\n","filename":"bots\/pr\/src\/main\/java\/org\/openjdk\/skara\/bots\/pr\/PullRequestBot.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -60,1 +60,1 @@\n-    private boolean reviewMerge = false;\n+    private MergePullRequestReviewConfiguration reviewMerge = MergePullRequestReviewConfiguration.JCHECK;\n@@ -204,1 +204,1 @@\n-    public PullRequestBotBuilder reviewMerge(boolean reviewMerge) {\n+    public PullRequestBotBuilder reviewMerge(MergePullRequestReviewConfiguration reviewMerge) {\n","filename":"bots\/pr\/src\/main\/java\/org\/openjdk\/skara\/bots\/pr\/PullRequestBotBuilder.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -208,1 +208,16 @@\n-                botBuilder.reviewMerge(repo.value().get(\"reviewMerge\").asBoolean());\n+                MergePullRequestReviewConfiguration result = null;\n+\n+                var val = repo.value().get(\"reviewMerge\").asString().toLowerCase().trim();\n+                if (val.equals(\"always\")) {\n+                    result = MergePullRequestReviewConfiguration.ALWAYS;\n+                } else if (val.equals(\"never\")) {\n+                    result = MergePullRequestReviewConfiguration.NEVER;\n+                } else if (val.equals(\"jcheck\")) {\n+                    result = MergePullRequestReviewConfiguration.JCHECK;\n+                } else {\n+                    throw new RuntimeException(\"Unexpected value for key \\\"reviewMerge\\\": '\" +\n+                                               repo.value().get(\"reviewMerge\") + \"', \" +\n+                                               \"expected one of \\\"always\\\", \\\"never\\\" or \\\"jcheck\\\"\");\n+                }\n+\n+                botBuilder.reviewMerge(result);\n","filename":"bots\/pr\/src\/main\/java\/org\/openjdk\/skara\/bots\/pr\/PullRequestBotFactory.java","additions":16,"deletions":1,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -69,1 +69,1 @@\n-                                                         pr.comments(), false);\n+                                                         pr.comments(), MergePullRequestReviewConfiguration.ALWAYS);\n@@ -77,1 +77,2 @@\n-                \"minimum=disable\"\n+                \"minimum=disable\",\n+                \"merge=check\"\n","filename":"bots\/pr\/src\/test\/java\/org\/openjdk\/skara\/bots\/pr\/AdditionalConfigurationTests.java","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -3137,1 +3137,1 @@\n-                                         .reviewMerge(true)\n+                                         .reviewMerge(MergePullRequestReviewConfiguration.ALWAYS)\n","filename":"bots\/pr\/src\/test\/java\/org\/openjdk\/skara\/bots\/pr\/CheckTests.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -141,1 +141,1 @@\n-                    .reviewMerge(true).build();\n+                    .reviewMerge(MergePullRequestReviewConfiguration.ALWAYS).build();\n","filename":"bots\/pr\/src\/test\/java\/org\/openjdk\/skara\/bots\/pr\/MergeTests.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -125,1 +125,1 @@\n-                          \"reviewMerge\": true,\n+                          \"reviewMerge\": \"always\",\n@@ -145,1 +145,1 @@\n-                          \"reviewMerge\": true,\n+                          \"reviewMerge\": \"always\",\n@@ -231,1 +231,1 @@\n-            assertTrue(pullRequestBot6.reviewMerge());\n+            assertEquals(MergePullRequestReviewConfiguration.ALWAYS, pullRequestBot6.reviewMerge());\n","filename":"bots\/pr\/src\/test\/java\/org\/openjdk\/skara\/bots\/pr\/PullRequestBotFactoryTest.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"}]}