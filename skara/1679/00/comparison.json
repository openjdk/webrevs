{"files":[{"patch":"@@ -35,0 +35,1 @@\n+import org.openjdk.skara.jcheck.TooFewReviewersIssue;\n@@ -599,1 +600,1 @@\n-    private Optional<String> getReviewersList() {\n+    private Optional<String> getReviewersList(boolean tooFewReviewers) {\n@@ -610,6 +611,8 @@\n-                                           if (!reviewCoverage.covers(review)) {\n-                                               entry += \" üîÑ Re-review required (review applies to [\" + hash.get().abbreviate()\n-                                                       + \"](\" + pr.filesUrl(hash.get()) + \"))\";\n-                                           } else {\n-                                               entry += \" ‚ö†Ô∏è Review applies to [\" + hash.get().abbreviate()\n-                                                       + \"](\" + pr.filesUrl(hash.get()) + \")\";\n+                                           if (!hash.get().equals(pr.headHash())) {\n+                                               if (!reviewCoverage.covers(review) && tooFewReviewers) {\n+                                                   entry += \" üîÑ Re-review required (review applies to [\" + hash.get().abbreviate()\n+                                                           + \"](\" + pr.filesUrl(hash.get()) + \"))\";\n+                                               } else {\n+                                                   entry += \" ‚ö†Ô∏è Review applies to [\" + hash.get().abbreviate()\n+                                                           + \"](\" + pr.filesUrl(hash.get()) + \")\";\n+                                               }\n@@ -677,1 +680,1 @@\n-            IssueTrackerIssue jepIssue, Collection<IssueTrackerIssue> csrIssues, JdkVersion version) {\n+            IssueTrackerIssue jepIssue, Collection<IssueTrackerIssue> csrIssues, JdkVersion version, boolean tooFewReviewers) {\n@@ -844,1 +847,1 @@\n-        getReviewersList().ifPresent(reviewers -> {\n+        getReviewersList(tooFewReviewers).ifPresent(reviewers -> {\n@@ -1336,0 +1339,1 @@\n+            boolean tooFewReviewers = false;\n@@ -1346,1 +1350,2 @@\n-                checkablePullRequest.executeChecks(localHash, censusInstance, visitor, targetJCheckConf);\n+                var issues = checkablePullRequest.executeChecks(localHash, censusInstance, visitor, targetJCheckConf);\n+                tooFewReviewers = issues.stream().anyMatch(TooFewReviewersIssue.class::isInstance);\n@@ -1412,1 +1417,1 @@\n-                    reviewNeeded, regularIssuesMap, jepIssue, issueToCsrMap.values(), version);\n+                    reviewNeeded, regularIssuesMap, jepIssue, issueToCsrMap.values(), version, tooFewReviewers);\n","filename":"bots\/pr\/src\/main\/java\/org\/openjdk\/skara\/bots\/pr\/CheckRun.java","additions":16,"deletions":11,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -234,1 +234,1 @@\n-    void executeChecks(Hash hash, CensusInstance censusInstance, PullRequestCheckIssueVisitor visitor, JCheckConfiguration conf) throws IOException {\n+    List<org.openjdk.skara.jcheck.Issue> executeChecks(Hash hash, CensusInstance censusInstance, PullRequestCheckIssueVisitor visitor, JCheckConfiguration conf) throws IOException {\n@@ -237,1 +237,2 @@\n-            for (var issue : issues) {\n+            var list = issues.asList();\n+            for (var issue : list) {\n@@ -240,0 +241,1 @@\n+            return list;\n","filename":"bots\/pr\/src\/main\/java\/org\/openjdk\/skara\/bots\/pr\/CheckablePullRequest.java","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -208,0 +208,2 @@\n+            assertFalse(authorPr.store().body().contains(\"Re-review required\"));\n+            assertFalse(authorPr.store().body().contains(\"Review applies to\"));\n@@ -1560,0 +1562,1 @@\n+            assertFalse(pr.store().body().contains(\"Review applies to\"));\n@@ -1576,0 +1579,6 @@\n+            \/\/ Check the status again\n+            TestBotRunner.runPeriodicItems(checkBot);\n+\n+            assertFalse(pr.store().body().contains(\"Re-review required\"));\n+            assertTrue(pr.store().body().contains(\"Review applies to\"));\n+\n@@ -1694,0 +1703,2 @@\n+            assertFalse(pr.store().body().contains(\"Re-review required\"));\n+            assertFalse(pr.store().body().contains(\"Review applies to\"));\n","filename":"bots\/pr\/src\/test\/java\/org\/openjdk\/skara\/bots\/pr\/CheckTests.java","additions":11,"deletions":0,"binary":false,"changes":11,"status":"modified"}]}