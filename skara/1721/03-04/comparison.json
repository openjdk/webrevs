{"files":[{"patch":"@@ -25,0 +25,1 @@\n+import org.junit.jupiter.api.BeforeAll;\n@@ -263,0 +264,15 @@\n+    private static boolean hgAvailable = true;\n+\n+    @BeforeAll\n+    static void checkHgAvailability() {\n+        try {\n+            var pb = new ProcessBuilder(\"hg\", \"--version\");\n+            pb.redirectErrorStream(true);\n+            var process = pb.start();\n+            process.waitFor();\n+            hgAvailable = (process.exitValue() == 0);\n+        } catch (Exception e) {\n+            hgAvailable = false;\n+        }\n+    }\n+\n@@ -267,1 +283,1 @@\n-            assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+            assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -288,1 +304,1 @@\n-            assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+            assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -319,1 +335,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n","filename":"jcheck\/src\/test\/java\/org\/openjdk\/skara\/jcheck\/JCheckTests.java","additions":19,"deletions":3,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -25,0 +25,1 @@\n+import org.junit.jupiter.api.BeforeAll;\n@@ -40,0 +41,15 @@\n+    private static boolean hgAvailable = true;\n+\n+    @BeforeAll\n+    static void checkHgAvailability() {\n+        try {\n+            var pb = new ProcessBuilder(\"hg\", \"--version\");\n+            pb.redirectErrorStream(true);\n+            var process = pb.start();\n+            process.waitFor();\n+            hgAvailable = (process.exitValue() == 0);\n+        } catch (Exception e) {\n+            hgAvailable = false;\n+        }\n+    }\n+\n@@ -53,1 +69,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -66,1 +82,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -79,1 +95,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -96,1 +112,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n","filename":"storage\/src\/test\/java\/org\/openjdk\/skara\/storage\/RepositoryStorageTests.java","additions":20,"deletions":4,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -50,0 +50,2 @@\n+    private static boolean hgAvailable = true;\n+\n@@ -54,0 +56,10 @@\n+\n+        try {\n+            var pb = new ProcessBuilder(\"hg\", \"--version\");\n+            pb.redirectErrorStream(true);\n+            var process = pb.start();\n+            process.waitFor();\n+            hgAvailable = (process.exitValue() == 0);\n+        } catch (Exception e) {\n+            hgAvailable = false;\n+        }\n@@ -59,1 +71,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -68,1 +80,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -78,1 +90,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -113,1 +125,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -129,1 +141,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -139,1 +151,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -155,1 +167,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -176,1 +188,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -186,1 +198,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -214,1 +226,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -238,1 +250,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -267,1 +279,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -277,1 +289,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -358,1 +370,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -428,1 +440,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -488,1 +500,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -564,1 +576,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -590,1 +602,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -619,1 +631,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -693,1 +705,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -703,1 +715,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -720,1 +732,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -730,1 +742,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -747,1 +759,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -769,1 +781,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -779,1 +791,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -796,1 +808,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -807,1 +819,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -825,1 +837,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -869,1 +881,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -914,1 +926,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -958,1 +970,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -983,1 +995,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -1033,1 +1045,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -1103,1 +1115,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -1167,1 +1179,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -1217,1 +1229,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -1268,1 +1280,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -1316,1 +1328,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -1343,1 +1355,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -1381,1 +1393,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -1409,1 +1421,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -1463,1 +1475,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -1548,1 +1560,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -1559,1 +1571,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -1572,1 +1584,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -1589,1 +1601,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -1600,1 +1612,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -1622,1 +1634,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -1648,1 +1660,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -1685,1 +1697,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -1710,1 +1722,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -1731,1 +1743,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -1817,1 +1829,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -1840,1 +1852,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -1868,1 +1880,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -1910,1 +1922,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -1932,1 +1944,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -2001,1 +2013,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -2048,1 +2060,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -2071,1 +2083,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -2128,1 +2140,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -2140,1 +2152,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -2161,1 +2173,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -2171,1 +2183,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -2185,1 +2197,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -2210,1 +2222,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -2236,1 +2248,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -2251,1 +2263,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -2261,1 +2273,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -2314,1 +2326,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -2326,1 +2338,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -2367,1 +2379,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -2476,1 +2488,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -2493,1 +2505,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -2510,1 +2522,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -2657,1 +2669,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -2720,1 +2732,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -2745,1 +2757,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -2772,1 +2784,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -2802,1 +2814,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -2822,1 +2834,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -2849,1 +2861,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -2899,1 +2911,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -2936,1 +2948,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -2954,1 +2966,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -2994,1 +3006,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -3037,1 +3049,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n","filename":"vcs\/src\/test\/java\/org\/openjdk\/skara\/vcs\/RepositoryTests.java","additions":100,"deletions":88,"binary":false,"changes":188,"status":"modified"},{"patch":"@@ -25,0 +25,1 @@\n+import org.junit.jupiter.api.BeforeAll;\n@@ -49,0 +50,15 @@\n+    private static boolean hgAvailable = true;\n+\n+    @BeforeAll\n+    static void checkHgAvailability() {\n+        try {\n+            var pb = new ProcessBuilder(\"hg\", \"--version\");\n+            pb.redirectErrorStream(true);\n+            var process = pb.start();\n+            process.waitFor();\n+            hgAvailable = (process.exitValue() == 0);\n+        } catch (Exception e) {\n+            hgAvailable = false;\n+        }\n+    }\n+\n@@ -50,2 +66,2 @@\n-    void skipTestsForWindows() {\n-        assumeTrue(!System.getProperty(\"os.name\").toLowerCase().contains(\"win\"));\n+    void assumeHgAvailable() {\n+        assumeTrue(hgAvailable);\n","filename":"vcs\/src\/test\/java\/org\/openjdk\/skara\/vcs\/openjdk\/converter\/GitToHgConverterTests.java","additions":18,"deletions":2,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -25,0 +25,1 @@\n+import org.junit.jupiter.api.BeforeAll;\n@@ -42,0 +43,15 @@\n+    private static boolean hgAvailable = true;\n+\n+    @BeforeAll\n+    static void checkHgAvailability() {\n+        try {\n+            var pb = new ProcessBuilder(\"hg\", \"--version\");\n+            pb.redirectErrorStream(true);\n+            var process = pb.start();\n+            process.waitFor();\n+            hgAvailable = (process.exitValue() == 0);\n+        } catch (Exception e) {\n+            hgAvailable = false;\n+        }\n+    }\n+\n@@ -43,2 +59,2 @@\n-    void skipTestsForWindows() {\n-        assumeTrue(!System.getProperty(\"os.name\").toLowerCase().contains(\"win\"));\n+    void assumeHgAvailable() {\n+        assumeTrue(hgAvailable);\n","filename":"vcs\/src\/test\/java\/org\/openjdk\/skara\/vcs\/openjdk\/converter\/HgToGitConverterTests.java","additions":18,"deletions":2,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -25,0 +25,1 @@\n+import org.junit.jupiter.api.BeforeAll;\n@@ -39,0 +40,16 @@\n+\n+    private static boolean hgAvailable = true;\n+\n+    @BeforeAll\n+    static void checkHgAvailability() {\n+        try {\n+            var pb = new ProcessBuilder(\"hg\", \"--version\");\n+            pb.redirectErrorStream(true);\n+            var process = pb.start();\n+            process.waitFor();\n+            hgAvailable = (process.exitValue() == 0);\n+        } catch (Exception e) {\n+            hgAvailable = false;\n+        }\n+    }\n+\n@@ -47,0 +64,1 @@\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -49,1 +67,0 @@\n-            assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n@@ -68,1 +85,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -88,1 +105,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -108,1 +125,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -128,1 +145,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -146,1 +163,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -167,1 +184,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n@@ -189,1 +206,1 @@\n-        assumeTrue(!(vcs == VCS.HG && System.getProperty(\"os.name\").toLowerCase().contains(\"win\")));\n+        assumeTrue(!(vcs == VCS.HG && !hgAvailable));\n","filename":"webrev\/src\/test\/java\/org\/openjdk\/skara\/webrev\/WebrevTests.java","additions":25,"deletions":8,"binary":false,"changes":33,"status":"modified"}]}