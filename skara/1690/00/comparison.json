{"files":[{"patch":"@@ -46,7 +46,2 @@\n-        \/\/ IssueProject name to list of repositories\n-        var repositories = new HashMap<String, List<HostedRepository>>();\n-        \/\/ IssueProject name to list of repositories for csr\n-        var repositoriesForCSR = new HashMap<String, List<HostedRepository>>();\n-        \/\/ IssueProject name to IssueProject instance\n-        var issueProjectMap = new HashMap<String, IssueProject>();\n-        \/\/ PullRequestBot name to PullRequestBot instance\n+        var repositories = new HashMap<IssueProject, List<HostedRepository>>();\n+        var repositoriesForCSR = new HashMap<IssueProject, List<HostedRepository>>();\n@@ -54,2 +49,1 @@\n-        \/\/ IssueProject name to IssuePRMap\n-        var issueProjectToIssuePRMapMap = new HashMap<String, Map<String, List<PRRecord>>>();\n+        var issueProjectToIssuePRMapMap = new HashMap<IssueProject, Map<String, List<PRRecord>>>();\n@@ -163,1 +157,1 @@\n-                issueProject = issueProjectMap.computeIfAbsent(repo.value().get(\"issues\").asString(), configuration::issueProject);\n+                issueProject = configuration.issueProject(repo.value().get(\"issues\").asString());\n@@ -165,4 +159,4 @@\n-                repositories.putIfAbsent(issueProject.name(), new ArrayList<>());\n-                repositories.get(issueProject.name()).add(repository);\n-                issueProjectToIssuePRMapMap.putIfAbsent(issueProject.name(), new ConcurrentHashMap<>());\n-                botBuilder.issuePRMap(issueProjectToIssuePRMapMap.get(issueProject.name()));\n+                repositories.putIfAbsent(issueProject, new ArrayList<>());\n+                repositories.get(issueProject).add(repository);\n+                issueProjectToIssuePRMapMap.putIfAbsent(issueProject, new ConcurrentHashMap<>());\n+                botBuilder.issuePRMap(issueProjectToIssuePRMapMap.get(issueProject));\n@@ -193,2 +187,2 @@\n-                    repositoriesForCSR.putIfAbsent(issueProject.name(), new ArrayList<>());\n-                    repositoriesForCSR.get(issueProject.name()).add(repository);\n+                    repositoriesForCSR.putIfAbsent(issueProject, new ArrayList<>());\n+                    repositoriesForCSR.get(issueProject).add(repository);\n@@ -285,3 +279,3 @@\n-        for (var issueProjectName : repositoriesForCSR.keySet()) {\n-            ret.add(0, new CSRIssueBot(issueProjectMap.get(issueProjectName), repositoriesForCSR.get(issueProjectName), pullRequestBotMap,\n-                    issueProjectToIssuePRMapMap.get(issueProjectName)));\n+        for (var issueProject : repositoriesForCSR.keySet()) {\n+            ret.add(0, new CSRIssueBot(issueProject, repositoriesForCSR.get(issueProject), pullRequestBotMap,\n+                    issueProjectToIssuePRMapMap.get(issueProject)));\n@@ -291,3 +285,3 @@\n-        for (var issueProjectName : issueProjectToIssuePRMapMap.keySet()) {\n-            ret.add(0, new IssueBot(issueProjectMap.get(issueProjectName), repositories.get(issueProjectName), pullRequestBotMap,\n-                    issueProjectToIssuePRMapMap.get(issueProjectName)));\n+        for (var issueProject : issueProjectToIssuePRMapMap.keySet()) {\n+            ret.add(0, new IssueBot(issueProject, repositories.get(issueProject), pullRequestBotMap,\n+                    issueProjectToIssuePRMapMap.get(issueProject)));\n","filename":"bots\/pr\/src\/main\/java\/org\/openjdk\/skara\/bots\/pr\/PullRequestBotFactory.java","additions":16,"deletions":22,"binary":false,"changes":38,"status":"modified"},{"patch":"@@ -65,0 +65,4 @@\n+    \/**\n+     * Creates and caches a new project if it hasn't been initialized.\n+     * Subsequent calls with the same name will return the cached instance.\n+     *\/\n","filename":"issuetracker\/src\/main\/java\/org\/openjdk\/skara\/issuetracker\/IssueTracker.java","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -87,0 +87,1 @@\n+    private final Map<String, IssueProject> issueProjects = new HashMap<>();\n@@ -171,1 +172,1 @@\n-        return new JiraProject(this, request, name);\n+        return issueProjects.computeIfAbsent(name, n -> new JiraProject(this, request, n));\n","filename":"issuetracker\/src\/main\/java\/org\/openjdk\/skara\/issuetracker\/jira\/JiraHost.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"}]}