{"files":[{"patch":"@@ -119,2 +119,1 @@\n-        if (bot.labelConfiguration().allowed().isEmpty()) {\n-            bot.setAutoLabelled(pr);\n+        if (bot.isAutoLabelled(pr)) {\n@@ -124,1 +123,2 @@\n-        if (bot.isAutoLabelled(pr) || pr.isClosed()) {\n+        if (bot.labelConfiguration().allowed().isEmpty()) {\n+            bot.setAutoLabelled(pr);\n@@ -129,0 +129,1 @@\n+        var labelNames = pr.labelNames();\n@@ -136,1 +137,1 @@\n-            return List.of(CheckWorkItem.fromWorkItemWithForceUpdate(bot, prId, errorHandler, triggerUpdatedAt));\n+            return needsRfrCheck(labelNames);\n@@ -140,1 +141,1 @@\n-        var existingAllowed = new HashSet<>(pr.labelNames());\n+        var existingAllowed = new HashSet<>(labelNames);\n@@ -144,1 +145,1 @@\n-            return List.of(CheckWorkItem.fromWorkItemWithForceUpdate(bot, prId, errorHandler, triggerUpdatedAt));\n+            return needsRfrCheck(labelNames);\n@@ -175,1 +176,8 @@\n-        return List.of(CheckWorkItem.fromWorkItemWithForceUpdate(bot, prId, errorHandler, triggerUpdatedAt));\n+        return needsRfrCheck(labelNames);\n+    }\n+\n+    private Collection<WorkItem> needsRfrCheck(List<String> labelNames) {\n+        if (!labelNames.contains(\"rfr\")) {\n+            return List.of(CheckWorkItem.fromWorkItemWithForceUpdate(bot, prId, errorHandler, triggerUpdatedAt));\n+        }\n+        return List.of();\n","filename":"bots\/pr\/src\/main\/java\/org\/openjdk\/skara\/bots\/pr\/LabelerWorkItem.java","additions":15,"deletions":7,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -191,1 +191,1 @@\n-            if (!bot.isAutoLabelled(pr)) {\n+            if (!bot.isAutoLabelled(pr) && !pr.isClosed()) {\n","filename":"bots\/pr\/src\/main\/java\/org\/openjdk\/skara\/bots\/pr\/PullRequestCommandWorkItem.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}