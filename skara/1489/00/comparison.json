{"files":[{"patch":"@@ -26,0 +26,1 @@\n+import org.openjdk.skara.bots.notify.prbranch.PullRequestBranchNotifier;\n@@ -30,1 +31,0 @@\n-import java.time.*;\n@@ -48,0 +48,1 @@\n+    private Boolean wildCardProtected = false;\n@@ -86,0 +87,7 @@\n+        if (!wildCardProtected && prListeners.stream()\n+                .anyMatch(e -> e instanceof PullRequestBranchNotifier && ((PullRequestBranchNotifier) e).isProtectBranches())) {\n+            log.info(\"Protecting branch *\");\n+            repository.protectBranchPattern(\"*\");\n+            wildCardProtected = true;\n+        }\n+\n","filename":"bots\/notify\/src\/main\/java\/org\/openjdk\/skara\/bots\/notify\/NotifyBot.java","additions":9,"deletions":1,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -55,4 +55,0 @@\n-            if (protectBranches) {\n-                log.info(\"Protecting branch \" + branch);\n-                pr.repository().protectBranchPattern(branch);\n-            }\n@@ -72,0 +68,2 @@\n+            log.info(\"Removing branch protection for *\");\n+            pr.repository().unprotectBranchPattern(\"*\");\n@@ -79,0 +77,2 @@\n+        log.info(\"Protecting branch * after deleting branch \" + branch);\n+        pr.repository().protectBranchPattern(\"*\");\n@@ -143,0 +143,4 @@\n+\n+    public boolean isProtectBranches() {\n+        return protectBranches;\n+    }\n","filename":"bots\/notify\/src\/main\/java\/org\/openjdk\/skara\/bots\/notify\/prbranch\/PullRequestBranchNotifier.java","additions":8,"deletions":4,"binary":false,"changes":12,"status":"modified"}]}