{"files":[{"patch":"@@ -30,1 +30,0 @@\n-import java.time.*;\n@@ -48,0 +47,1 @@\n+    private Boolean firstTimeCall = true;\n@@ -86,0 +86,5 @@\n+        if (firstTimeCall) {\n+            prListeners.forEach(listener -> listener.initialize(repository));\n+            firstTimeCall = false;\n+        }\n+\n","filename":"bots\/notify\/src\/main\/java\/org\/openjdk\/skara\/bots\/notify\/NotifyBot.java","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -25,0 +25,1 @@\n+import org.openjdk.skara.forge.HostedRepository;\n@@ -45,0 +46,3 @@\n+\n+    default void initialize(HostedRepository repo) {\n+    }\n","filename":"bots\/notify\/src\/main\/java\/org\/openjdk\/skara\/bots\/notify\/PullRequestListener.java","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -55,4 +55,0 @@\n-            if (protectBranches) {\n-                log.info(\"Protecting branch \" + branch);\n-                pr.repository().protectBranchPattern(branch);\n-            }\n@@ -70,0 +66,2 @@\n+            \/\/ We still need this code because it's possible that we have some pr branch protected,\n+            \/\/ but it will be fine for us to remove this code later\n@@ -72,0 +70,2 @@\n+            log.info(\"Removing branch protection for *\");\n+            pr.repository().unprotectBranchPattern(\"*\");\n@@ -79,0 +79,4 @@\n+        if (protectBranches) {\n+            log.info(\"Protecting branch * after deleting branch \" + branch);\n+            pr.repository().protectBranchPattern(\"*\");\n+        }\n@@ -143,0 +147,8 @@\n+\n+    @Override\n+    public void initialize(HostedRepository repository) {\n+        if (protectBranches) {\n+            log.info(\"Protecting branch *\");\n+            repository.protectBranchPattern(\"*\");\n+        }\n+    }\n","filename":"bots\/notify\/src\/main\/java\/org\/openjdk\/skara\/bots\/notify\/prbranch\/PullRequestBranchNotifier.java","additions":16,"deletions":4,"binary":false,"changes":20,"status":"modified"}]}