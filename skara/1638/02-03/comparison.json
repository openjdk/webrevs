{"files":[{"patch":"@@ -669,1 +669,1 @@\n-        var allAdditionalErrors = Stream.concat(visitor.hiddenMessages().stream(), additionalErrors.stream())\n+        var allAdditionalErrors = Stream.concat(visitor.hiddenErrorMessages().stream(), additionalErrors.stream())\n","filename":"bots\/pr\/src\/main\/java\/org\/openjdk\/skara\/bots\/pr\/CheckRun.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -57,2 +57,8 @@\n-    private void addMessage(Check check, String message, Severity severity, boolean readyForReviewWhenFailedAsError) {\n-        if (severity.equals(Severity.ERROR)) {\n+    private void setNotReadyForReviewOnError(Severity severity) {\n+        if (severity == Severity.ERROR) {\n+            readyForReview = false;\n+        }\n+    }\n+\n+    private void addMessage(Check check, String message, Severity severity) {\n+        if (severity == Severity.ERROR) {\n@@ -60,4 +66,1 @@\n-            if (this.readyForReview) {\n-                this.readyForReview = readyForReviewWhenFailedAsError;\n-            }\n-        } else if (severity.equals(Severity.WARNING)) {\n+        } else if (severity == Severity.WARNING) {\n@@ -76,1 +79,1 @@\n-    List<String> hiddenMessages() {\n+    List<String> hiddenErrorMessages() {\n@@ -134,1 +137,2 @@\n-        addMessage(issue.check(), output.toString(), issue.severity(), false);\n+        addMessage(issue.check(), output.toString(), issue.severity());\n+        setNotReadyForReviewOnError(issue.severity());\n@@ -150,1 +154,2 @@\n-        addMessage(issue.check(), \"Self-reviews are not allowed\", issue.severity(), false);\n+        addMessage(issue.check(), \"Self-reviews are not allowed\", issue.severity());\n+        setNotReadyForReviewOnError(issue.severity());\n@@ -156,1 +161,1 @@\n-                issue.role(), issue.numActual(), issue.numRequired()), issue.severity(), true);\n+                issue.role(), issue.numActual(), issue.numRequired()), issue.severity());\n@@ -162,1 +167,1 @@\n-        addMessage(issue.check(), \"Invalid reviewers \" + invalid, issue.severity(), true);\n+        addMessage(issue.check(), \"Invalid reviewers \" + invalid, issue.severity());\n@@ -177,1 +182,1 @@\n-        addMessage(issue.check(), desc, issue.severity(), true);\n+        addMessage(issue.check(), desc, issue.severity());\n@@ -203,1 +208,2 @@\n-        addMessage(issue.check(), \"Pull request's HEAD commit must contain a full name\", issue.severity(), false);\n+        addMessage(issue.check(), \"Pull request's HEAD commit must contain a full name\", issue.severity());\n+        setNotReadyForReviewOnError(issue.severity());\n@@ -209,1 +215,2 @@\n-        addMessage(issue.check(), \"Pull request's HEAD commit must contain a valid e-mail\", issue.severity(), false);\n+        addMessage(issue.check(), \"Pull request's HEAD commit must contain a valid e-mail\", issue.severity());\n+        setNotReadyForReviewOnError(issue.severity());\n@@ -240,1 +247,2 @@\n-        addMessage(issue.check(), \"Whitespace errors\", issue.severity(), false);\n+        addMessage(issue.check(), \"Whitespace errors\", issue.severity());\n+        setNotReadyForReviewOnError(issue.severity());\n@@ -247,1 +255,1 @@\n-        addMessage(issue.check(), \"Incorrectly formatted commit message\", issue.severity(), true);\n+        addMessage(issue.check(), \"Incorrectly formatted commit message\", issue.severity());\n@@ -262,1 +270,2 @@\n-        addMessage(issue.check(), \"The commit message contains \" + desc + \" on line \" + issue.line(), issue.severity(), false);\n+        addMessage(issue.check(), \"The commit message contains \" + desc + \" on line \" + issue.line(), issue.severity());\n+        setNotReadyForReviewOnError(issue.severity());\n@@ -268,1 +277,2 @@\n-                \"edit the title to be of the format `issue number`: `message`.\", issue.severity(), false);\n+                \"edit the title to be of the format `issue number`: `message`.\", issue.severity());\n+        setNotReadyForReviewOnError(issue.severity());\n@@ -273,1 +283,2 @@\n-        addMessage(issue.check(), String.format(\"Executable files are not allowed (file: %s)\", issue.path()), issue.severity(), false);\n+        addMessage(issue.check(), String.format(\"Executable files are not allowed (file: %s)\", issue.path()), issue.severity());\n+        setNotReadyForReviewOnError(issue.severity());\n@@ -278,1 +289,2 @@\n-        addMessage(issue.check(), String.format(\"Symbolic links are not allowed (file: %s)\", issue.path()), issue.severity(), false);\n+        addMessage(issue.check(), String.format(\"Symbolic links are not allowed (file: %s)\", issue.path()), issue.severity());\n+        setNotReadyForReviewOnError(issue.severity());\n@@ -283,1 +295,2 @@\n-        addMessage(issue.check(), String.format(\"Binary files are not allowed (file: %s)\", issue.path()), issue.severity(), false);\n+        addMessage(issue.check(), String.format(\"Binary files are not allowed (file: %s)\", issue.path()), issue.severity());\n+        setNotReadyForReviewOnError(issue.severity());\n@@ -288,1 +301,1 @@\n-        addMessage(issue.check(), issue.issue() + \" is used in problem lists: \" + issue.files(), issue.severity(), true);\n+        addMessage(issue.check(), issue.issue() + \" is used in problem lists: \" + issue.files(), issue.severity());\n@@ -295,1 +308,1 @@\n-            messages.add(\"Found trailing period in \" + String.join(\" ,\", issue.issuesWithTrailingPeriod()));\n+            messages.add(\"Found trailing period in issue title for \" + String.join(\", \", issue.issuesWithTrailingPeriod()));\n@@ -298,1 +311,1 @@\n-            messages.add(\"Found leading lowercase letter in \" + String.join(\" ,\", issue.issuesWithLeadingLowerCaseLetter()));\n+            messages.add(\"Found leading lowercase letter in issue title for \" + String.join(\", \", issue.issuesWithLeadingLowerCaseLetter()));\n@@ -301,1 +314,1 @@\n-                issue.severity(), true);\n+                issue.severity());\n","filename":"bots\/pr\/src\/main\/java\/org\/openjdk\/skara\/bots\/pr\/PullRequestCheckIssueVisitor.java","additions":38,"deletions":25,"binary":false,"changes":63,"status":"modified"},{"patch":"@@ -2845,1 +2845,1 @@\n-            assertTrue(pr.store().body().contains(\"Found trailing period in `1: This is an issue.` (failed with updated jcheck configuration in pull request)\"));\n+            assertTrue(pr.store().body().contains(\"Found trailing period in issue title for `1: This is an issue.` (failed with updated jcheck configuration in pull request)\"));\n@@ -3435,1 +3435,1 @@\n-            assertTrue(pr.store().body().contains(\"Found trailing period in `1: This is an issue.`\"));\n+            assertTrue(pr.store().body().contains(\"Found trailing period in issue title for `1: This is an issue.`\"));\n@@ -3443,1 +3443,1 @@\n-            assertFalse(pr.store().body().contains(\"Found trailing period in 1: This is an issue.\"));\n+            assertFalse(pr.store().body().contains(\"Found trailing period in issue title for 1: This is an issue.\"));\n@@ -3449,2 +3449,2 @@\n-            assertTrue(pr.store().body().contains(\"Found trailing period in `2: this is an issue2 etc.`\"));\n-            assertTrue(pr.store().body().contains(\"Found leading lowercase letter in `2: this is an issue2 etc.`\"));\n+            assertTrue(pr.store().body().contains(\"Found trailing period in issue title for `2: this is an issue2 etc.`\"));\n+            assertTrue(pr.store().body().contains(\"Found leading lowercase letter in issue title for `2: this is an issue2 etc.`\"));\n","filename":"bots\/pr\/src\/test\/java\/org\/openjdk\/skara\/bots\/pr\/CheckTests.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -81,1 +81,1 @@\n-            hasDisplayedErrors = i.severity().equals(Severity.ERROR);\n+            hasDisplayedErrors = i.severity() == Severity.ERROR;\n@@ -88,1 +88,1 @@\n-            hasDisplayedErrors = i.severity().equals(Severity.ERROR);\n+            hasDisplayedErrors = i.severity() == Severity.ERROR;\n@@ -95,1 +95,1 @@\n-            hasDisplayedErrors = i.severity().equals(Severity.ERROR);\n+            hasDisplayedErrors = i.severity() == Severity.ERROR;\n@@ -102,1 +102,1 @@\n-            hasDisplayedErrors = i.severity().equals(Severity.ERROR);\n+            hasDisplayedErrors = i.severity() == Severity.ERROR;\n@@ -112,1 +112,1 @@\n-            hasDisplayedErrors = i.severity().equals(Severity.ERROR);\n+            hasDisplayedErrors = i.severity() == Severity.ERROR;\n@@ -121,1 +121,1 @@\n-            hasDisplayedErrors = i.severity().equals(Severity.ERROR);\n+            hasDisplayedErrors = i.severity() == Severity.ERROR;\n@@ -128,1 +128,1 @@\n-            hasDisplayedErrors = i.severity().equals(Severity.ERROR);\n+            hasDisplayedErrors = i.severity() == Severity.ERROR;\n@@ -134,1 +134,1 @@\n-            hasDisplayedErrors = i.severity().equals(Severity.ERROR);\n+            hasDisplayedErrors = i.severity() == Severity.ERROR;\n@@ -157,1 +157,1 @@\n-            hasDisplayedErrors = i.severity().equals(Severity.ERROR);\n+            hasDisplayedErrors = i.severity() == Severity.ERROR;\n@@ -215,1 +215,1 @@\n-            hasDisplayedErrors = i.severity().equals(Severity.ERROR);\n+            hasDisplayedErrors = i.severity() == Severity.ERROR;\n@@ -225,1 +225,1 @@\n-            hasDisplayedErrors = i.severity().equals(Severity.ERROR);\n+            hasDisplayedErrors = i.severity() == Severity.ERROR;\n@@ -241,1 +241,1 @@\n-            hasDisplayedErrors = i.severity().equals(Severity.ERROR);\n+            hasDisplayedErrors = i.severity() == Severity.ERROR;\n@@ -251,1 +251,1 @@\n-            hasDisplayedErrors = i.severity().equals(Severity.ERROR);\n+            hasDisplayedErrors = i.severity() == Severity.ERROR;\n@@ -258,1 +258,1 @@\n-            hasDisplayedErrors = i.severity().equals(Severity.ERROR);\n+            hasDisplayedErrors = i.severity() == Severity.ERROR;\n@@ -265,1 +265,1 @@\n-            hasDisplayedErrors = i.severity().equals(Severity.ERROR);\n+            hasDisplayedErrors = i.severity() == Severity.ERROR;\n@@ -272,1 +272,1 @@\n-            hasDisplayedErrors = i.severity().equals(Severity.ERROR);\n+            hasDisplayedErrors = i.severity() == Severity.ERROR;\n@@ -279,1 +279,1 @@\n-            hasDisplayedErrors = i.severity().equals(Severity.ERROR);\n+            hasDisplayedErrors = i.severity() == Severity.ERROR;\n@@ -286,1 +286,1 @@\n-            hasDisplayedErrors = i.severity().equals(Severity.ERROR);\n+            hasDisplayedErrors = i.severity() == Severity.ERROR;\n@@ -294,1 +294,1 @@\n-            hasDisplayedErrors = i.severity().equals(Severity.ERROR);\n+            hasDisplayedErrors = i.severity() == Severity.ERROR;\n@@ -301,1 +301,1 @@\n-            hasDisplayedErrors = i.severity().equals(Severity.ERROR);\n+            hasDisplayedErrors = i.severity() == Severity.ERROR;\n@@ -309,1 +309,1 @@\n-            hasDisplayedErrors = i.severity().equals(Severity.ERROR);\n+            hasDisplayedErrors = i.severity() == Severity.ERROR;\n@@ -317,1 +317,1 @@\n-                println(i, \"Found trailing period in \" + String.join(\" ,\", i.issuesWithTrailingPeriod()));\n+                println(i, \"Found trailing period in issue title for \" + String.join(\", \", i.issuesWithTrailingPeriod()));\n@@ -320,1 +320,1 @@\n-                println(i, \"Found leading lowercase letter in \" + String.join(\" ,\", i.issuesWithLeadingLowerCaseLetter()));\n+                println(i, \"Found leading lowercase letter in issue title for \" + String.join(\", \", i.issuesWithLeadingLowerCaseLetter()));\n@@ -325,1 +325,1 @@\n-            hasDisplayedErrors = i.severity().equals(Severity.ERROR);\n+            hasDisplayedErrors = i.severity() == Severity.ERROR;\n","filename":"cli\/src\/main\/java\/org\/openjdk\/skara\/cli\/JCheckCLIVisitor.java","additions":24,"deletions":24,"binary":false,"changes":48,"status":"modified"},{"patch":"@@ -71,1 +71,1 @@\n-        return \"Issue's title shouldn't have trailing period\";\n+        return \"Issue's title should be properly formatted\";\n","filename":"jcheck\/src\/main\/java\/org\/openjdk\/skara\/jcheck\/IssuesTitleCheck.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}