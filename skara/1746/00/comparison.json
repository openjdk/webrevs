{"files":[{"patch":"@@ -113,1 +113,1 @@\n-        var mailingListReaderMap = new HashMap<List<String>, MailingListReader>();\n+        var mailingListReaderMap = new HashMap<Set<EmailAddress>, MailingListReader>();\n@@ -133,1 +133,1 @@\n-                var listNamesForReading = new HashSet<EmailAddress>();\n+                var listsForReading = new HashSet<EmailAddress>();\n@@ -135,1 +135,1 @@\n-                    listNamesForReading.add(list.list());\n+                    listsForReading.add(list.list());\n@@ -137,4 +137,0 @@\n-                var listsForReading = listNamesForReading.stream()\n-                                                         .map(EmailAddress::localPart)\n-                                                         .collect(Collectors.toList());\n-\n@@ -144,1 +140,1 @@\n-                    mailingListReaderMap.put(listsForReading, mailmanServer.getListReader(listsForReading.toArray(new String[0])));\n+                    mailingListReaderMap.put(listsForReading, mailmanServer.getListReader(listsForReading.toArray(new EmailAddress[0])));\n","filename":"bots\/mlbridge\/src\/main\/java\/org\/openjdk\/skara\/bots\/mlbridge\/MailingListBridgeBotFactory.java","additions":4,"deletions":8,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -26,1 +26,0 @@\n-import org.openjdk.skara.email.EmailAddress;\n@@ -43,1 +42,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -75,2 +74,2 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n-            var listAddress2 = EmailAddress.parse(listServer.createList(\"test2\"));\n+            var listAddress = listServer.createList(\"test\");\n+            var listAddress2 = listServer.createList(\"test2\");\n","filename":"bots\/mlbridge\/src\/test\/java\/org\/openjdk\/skara\/bots\/mlbridge\/LabelsUpdaterTests.java","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -67,1 +67,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -88,1 +88,1 @@\n-            var mailmanList = mailmanServer.getListReader(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress);\n@@ -140,1 +140,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -162,1 +162,1 @@\n-            var mailmanList = mailmanServer.getListReader(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress);\n@@ -215,1 +215,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -237,1 +237,1 @@\n-            var mailmanList = mailmanServer.getListReader(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress);\n@@ -296,1 +296,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n","filename":"bots\/mlbridge\/src\/test\/java\/org\/openjdk\/skara\/bots\/mlbridge\/MailingListArchiveReaderBotTests.java","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -119,1 +119,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -232,1 +232,1 @@\n-            var mailmanList = mailmanServer.getListReader(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress);\n@@ -313,1 +313,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -407,1 +407,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -482,1 +482,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -562,1 +562,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -640,1 +640,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -730,1 +730,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -785,1 +785,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -843,1 +843,1 @@\n-            var mailmanList = mailmanServer.getListReader(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress);\n@@ -893,1 +893,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -944,1 +944,1 @@\n-            var mailmanList = mailmanServer.getListReader(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress);\n@@ -991,1 +991,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -1065,1 +1065,1 @@\n-            var mailmanList = mailmanServer.getListReader(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress);\n@@ -1120,1 +1120,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -1193,1 +1193,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -1258,1 +1258,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -1324,1 +1324,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -1389,1 +1389,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -1446,1 +1446,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -1523,1 +1523,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -1614,1 +1614,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -1682,1 +1682,1 @@\n-            var mailmanList = mailmanServer.getListReader(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress);\n@@ -1725,1 +1725,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -1790,1 +1790,1 @@\n-            var mailmanList = mailmanServer.getListReader(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress);\n@@ -1812,1 +1812,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -1884,1 +1884,1 @@\n-            var mailmanList = mailmanServer.getListReader(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress);\n@@ -1905,1 +1905,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -1986,1 +1986,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -2073,1 +2073,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -2146,1 +2146,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -2218,1 +2218,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -2299,1 +2299,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -2364,1 +2364,1 @@\n-            var mailmanList = mailmanServer.getListReader(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress);\n@@ -2392,1 +2392,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -2459,1 +2459,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -2521,1 +2521,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -2587,1 +2587,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -2654,1 +2654,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -2746,1 +2746,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -2804,1 +2804,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -2862,1 +2862,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -2922,1 +2922,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -3015,2 +3015,2 @@\n-            var listAddress1 = EmailAddress.parse(listServer.createList(\"test1\"));\n-            var listAddress2 = EmailAddress.parse(listServer.createList(\"test2\"));\n+            var listAddress1 = listServer.createList(\"test1\");\n+            var listAddress2 = listServer.createList(\"test2\");\n@@ -3056,1 +3056,1 @@\n-            var mailmanList = mailmanServer.getListReader(listAddress1.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress1);\n@@ -3095,1 +3095,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -3187,1 +3187,1 @@\n-            var mailmanList = mailmanServer.getListReader(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress);\n@@ -3295,1 +3295,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -3382,1 +3382,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -3456,1 +3456,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -3533,1 +3533,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -3710,1 +3710,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -3800,1 +3800,1 @@\n-            var mailmanList = mailmanServer.getListReader(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress);\n@@ -3855,1 +3855,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -3942,1 +3942,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -4009,1 +4009,1 @@\n-            var mailmanList = mailmanServer.getListReader(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress);\n@@ -4035,1 +4035,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -4091,1 +4091,1 @@\n-            var mailmanList = mailmanServer.getListReader(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress);\n","filename":"bots\/mlbridge\/src\/test\/java\/org\/openjdk\/skara\/bots\/mlbridge\/MailingListBridgeBotTests.java","additions":59,"deletions":59,"binary":false,"changes":118,"status":"modified"},{"patch":"@@ -53,1 +53,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -55,1 +55,1 @@\n-            var mailmanList = mailmanServer.getListReader(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress);\n@@ -127,1 +127,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -129,1 +129,1 @@\n-            var mailmanList = mailmanServer.getListReader(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress);\n@@ -204,1 +204,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -206,1 +206,1 @@\n-            var mailmanList = mailmanServer.getListReader(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress);\n@@ -284,1 +284,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -286,1 +286,1 @@\n-            var mailmanList = mailmanServer.getListReader(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress);\n@@ -350,1 +350,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -352,1 +352,1 @@\n-            var mailmanList = mailmanServer.getListReader(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress);\n@@ -454,1 +454,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -456,1 +456,1 @@\n-            var mailmanList = mailmanServer.getListReader(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress);\n@@ -539,1 +539,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -541,1 +541,1 @@\n-            var mailmanList = mailmanServer.getListReader(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress);\n@@ -630,1 +630,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -632,1 +632,1 @@\n-            var mailmanList = mailmanServer.getListReader(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress);\n@@ -729,1 +729,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -731,1 +731,1 @@\n-            var mailmanList = mailmanServer.getListReader(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress);\n@@ -827,1 +827,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -829,1 +829,1 @@\n-            var mailmanList = mailmanServer.getListReader(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress);\n@@ -950,1 +950,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -952,1 +952,1 @@\n-            var mailmanList = mailmanServer.getListReader(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress);\n@@ -1047,1 +1047,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -1049,1 +1049,1 @@\n-            var mailmanList = mailmanServer.getListReader(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress);\n@@ -1127,1 +1127,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -1129,1 +1129,1 @@\n-            var mailmanList = mailmanServer.getListReader(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress);\n@@ -1194,1 +1194,1 @@\n-            var listAddress = EmailAddress.parse(listServer.createList(\"test\"));\n+            var listAddress = listServer.createList(\"test\");\n@@ -1196,1 +1196,1 @@\n-            var mailmanList = mailmanServer.getListReader(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress);\n","filename":"bots\/notify\/src\/test\/java\/org\/openjdk\/skara\/bots\/notify\/mailinglist\/MailingListNotifierTests.java","additions":28,"deletions":28,"binary":false,"changes":56,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+import org.openjdk.skara.email.EmailAddress;\n@@ -28,1 +29,1 @@\n-    MailingListReader getListReader(String... listNames);\n+    MailingListReader getListReader(EmailAddress... listNames);\n","filename":"mailinglist\/src\/main\/java\/org\/openjdk\/skara\/mailinglist\/MailingListServer.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -31,0 +31,1 @@\n+import org.openjdk.skara.email.EmailAddress;\n@@ -40,1 +41,1 @@\n-    URI getMboxUri(String listName, ZonedDateTime month) {\n+    URI getMboxUri(EmailAddress listName, ZonedDateTime month) {\n@@ -42,1 +43,1 @@\n-        return URIBuilder.base(archive).appendPath(listName + \"\/\" + dateStr + \".txt\").build();\n+        return URIBuilder.base(archive).appendPath(listName.localPart() + \"\/\" + dateStr + \".txt\").build();\n@@ -46,1 +47,1 @@\n-    public MailingListReader getListReader(String... listNames) {\n+    public MailingListReader getListReader(EmailAddress... listNames) {\n","filename":"mailinglist\/src\/main\/java\/org\/openjdk\/skara\/mailinglist\/mailman\/Mailman2Server.java","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -29,0 +29,1 @@\n+import org.openjdk.skara.email.EmailAddress;\n@@ -48,1 +49,1 @@\n-    public MailingListReader getListReader(String... listNames) {\n+    public MailingListReader getListReader(EmailAddress... listNames) {\n","filename":"mailinglist\/src\/main\/java\/org\/openjdk\/skara\/mailinglist\/mailman\/Mailman3Server.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -44,1 +44,1 @@\n-    protected final List<String> names = new ArrayList<>();\n+    protected final List<EmailAddress> names;\n@@ -55,1 +55,1 @@\n-    MailmanListReader(Collection<String> names, boolean useEtag) {\n+    MailmanListReader(Collection<EmailAddress> names, boolean useEtag) {\n@@ -57,7 +57,1 @@\n-        for (var name : names) {\n-            if (name.contains(\"@\")) {\n-                this.names.add(EmailAddress.parse(name).localPart());\n-            } else {\n-                this.names.add(name);\n-            }\n-        }\n+        this.names = List.copyOf(names);\n@@ -113,1 +107,1 @@\n-    Mailman2ListReader(Mailman2Server server, Collection<String> names, boolean useEtag) {\n+    Mailman2ListReader(Mailman2Server server, Collection<EmailAddress> names, boolean useEtag) {\n@@ -120,1 +114,1 @@\n-        return \"Mailman2List:\" + String.join(\", \", names);\n+        return \"Mailman2List:\" + names;\n@@ -153,1 +147,1 @@\n-                var sender = EmailAddress.from(name + \"@\" + mboxUri.getHost());\n+                var sender = EmailAddress.from(name.localPart() + \"@\" + mboxUri.getHost());\n@@ -188,1 +182,1 @@\n-    Mailman3ListReader(Mailman3Server server, Collection<String> names, ZonedDateTime startTime) {\n+    Mailman3ListReader(Mailman3Server server, Collection<EmailAddress> names, ZonedDateTime startTime) {\n@@ -220,3 +214,2 @@\n-            for (String name : names) {\n-                var mboxUri = URIBuilder.base(server.getArchiveUri()).appendPath(\"list\/\").appendPath(name)\n-                        .appendPath(\"@\").appendPath(server.getArchiveUri().getHost())\n+            for (EmailAddress name : names) {\n+                var mboxUri = URIBuilder.base(server.getArchiveUri()).appendPath(\"list\/\").appendPath(name.address())\n@@ -224,1 +217,1 @@\n-                var sender = EmailAddress.from(name + \"@\" + server.getArchiveUri().getHost());\n+                var sender = EmailAddress.from(name.localPart() + \"@\" + server.getArchiveUri().getHost());\n","filename":"mailinglist\/src\/main\/java\/org\/openjdk\/skara\/mailinglist\/mailman\/MailmanListReader.java","additions":10,"deletions":17,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+import org.openjdk.skara.email.EmailAddress;\n@@ -37,1 +38,1 @@\n-    public MailingListReader getListReader(String... listNames) {\n+    public MailingListReader getListReader(EmailAddress... listNames) {\n","filename":"mailinglist\/src\/main\/java\/org\/openjdk\/skara\/mailinglist\/mailman\/SendOnlyServer.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -37,1 +37,1 @@\n-    private final Collection<String> names;\n+    private final Collection<EmailAddress> names;\n@@ -40,1 +40,1 @@\n-    MboxFileListReader(Path base, Collection<String> names) {\n+    MboxFileListReader(Path base, Collection<EmailAddress> names) {\n@@ -50,1 +50,1 @@\n-                var file = base.resolve(name + \".mbox\");\n+                var file = base.resolve(name.localPart() + \".mbox\");\n@@ -52,1 +52,1 @@\n-                emails.addAll(Mbox.splitMbox(currentMbox, EmailAddress.from(name + \"@mbox.file\")));\n+                emails.addAll(Mbox.splitMbox(currentMbox, name));\n","filename":"mailinglist\/src\/main\/java\/org\/openjdk\/skara\/mailinglist\/mboxfile\/MboxFileListReader.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+import org.openjdk.skara.email.EmailAddress;\n@@ -85,1 +86,1 @@\n-    public MailingListReader getListReader(String... listNames) {\n+    public MailingListReader getListReader(EmailAddress... listNames) {\n","filename":"mailinglist\/src\/main\/java\/org\/openjdk\/skara\/mailinglist\/mboxfile\/MboxFileListServer.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -45,1 +45,1 @@\n-                            .recipient(EmailAddress.parse(listAddress))\n+                            .recipient(listAddress)\n@@ -49,1 +49,1 @@\n-                                    .sender(EmailAddress.parse(listAddress))\n+                                    .sender(listAddress)\n@@ -70,1 +70,1 @@\n-                                  .recipient(EmailAddress.parse(listAddress))\n+                                  .recipient(listAddress)\n@@ -75,1 +75,1 @@\n-                                      .sender(EmailAddress.parse(listAddress))\n+                                      .sender(listAddress)\n@@ -85,1 +85,1 @@\n-                                 .recipient(EmailAddress.parse(listAddress))\n+                                 .recipient(listAddress)\n@@ -90,1 +90,1 @@\n-                                     .sender(EmailAddress.parse(listAddress))\n+                                     .sender(listAddress)\n@@ -116,1 +116,1 @@\n-                            .recipient(EmailAddress.parse(listAddress))\n+                            .recipient(listAddress)\n@@ -122,1 +122,1 @@\n-                                    .sender(EmailAddress.parse(listAddress))\n+                                    .sender(listAddress)\n@@ -150,1 +150,1 @@\n-                             .recipient(EmailAddress.parse(listAddress))\n+                             .recipient(listAddress)\n@@ -153,1 +153,1 @@\n-                             .recipient(EmailAddress.parse(listAddress))\n+                             .recipient(listAddress)\n@@ -160,1 +160,1 @@\n-                                    .sender(EmailAddress.parse(listAddress))\n+                                    .sender(listAddress)\n@@ -183,1 +183,1 @@\n-                    .recipient(EmailAddress.parse(listAddress))\n+                    .recipient(listAddress)\n@@ -187,1 +187,1 @@\n-                    .recipient(EmailAddress.parse(listAddress))\n+                    .recipient(listAddress)\n@@ -191,1 +191,1 @@\n-                    .recipient(EmailAddress.parse(listAddress))\n+                    .recipient(listAddress)\n@@ -231,1 +231,1 @@\n-                        .recipient(EmailAddress.parse(listAddress))\n+                        .recipient(listAddress)\n@@ -244,1 +244,1 @@\n-                        .recipient(EmailAddress.parse(listAddress))\n+                        .recipient(listAddress)\n","filename":"mailinglist\/src\/test\/java\/org\/openjdk\/skara\/mailinglist\/Mailman2Tests.java","additions":16,"deletions":16,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -28,0 +28,1 @@\n+import org.openjdk.skara.email.EmailAddress;\n@@ -47,1 +48,1 @@\n-        var listName = props.get(\"mailman3.list\");\n+        var listName = EmailAddress.parse(props.get(\"mailman3.list\"));\n","filename":"mailinglist\/src\/test\/java\/org\/openjdk\/skara\/mailinglist\/Mailman3IntegrationTests.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -46,1 +46,1 @@\n-                            .recipient(EmailAddress.parse(listAddress))\n+                            .recipient(listAddress)\n@@ -50,1 +50,1 @@\n-                                    .sender(EmailAddress.parse(listAddress))\n+                                    .sender(listAddress)\n@@ -71,1 +71,1 @@\n-                                  .recipient(EmailAddress.parse(listAddress))\n+                                  .recipient(listAddress)\n@@ -76,1 +76,1 @@\n-                                      .sender(EmailAddress.parse(listAddress))\n+                                      .sender(listAddress)\n@@ -86,1 +86,1 @@\n-                                 .recipient(EmailAddress.parse(listAddress))\n+                                 .recipient(listAddress)\n@@ -91,1 +91,1 @@\n-                                     .sender(EmailAddress.parse(listAddress))\n+                                     .sender(listAddress)\n@@ -117,1 +117,1 @@\n-                             .recipient(EmailAddress.parse(listAddress))\n+                             .recipient(listAddress)\n@@ -120,1 +120,1 @@\n-                             .recipient(EmailAddress.parse(listAddress))\n+                             .recipient(listAddress)\n@@ -127,1 +127,1 @@\n-                                    .sender(EmailAddress.parse(listAddress))\n+                                    .sender(listAddress)\n@@ -155,1 +155,1 @@\n-                        .recipient(EmailAddress.parse(listAddress))\n+                        .recipient(listAddress)\n@@ -169,1 +169,1 @@\n-                        .recipient(EmailAddress.parse(listAddress))\n+                        .recipient(listAddress)\n@@ -182,1 +182,1 @@\n-                        .recipient(EmailAddress.parse(listAddress))\n+                        .recipient(listAddress)\n@@ -195,1 +195,1 @@\n-                        .recipient(EmailAddress.parse(listAddress))\n+                        .recipient(listAddress)\n@@ -207,1 +207,1 @@\n-                        .recipient(EmailAddress.parse(listAddress))\n+                        .recipient(listAddress)\n@@ -220,1 +220,1 @@\n-                        .recipient(EmailAddress.parse(listAddress))\n+                        .recipient(listAddress)\n","filename":"mailinglist\/src\/test\/java\/org\/openjdk\/skara\/mailinglist\/Mailman3Tests.java","additions":15,"deletions":15,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -41,1 +41,2 @@\n-            var list = mbox.getListReader(\"test\");\n+            var listName = EmailAddress.parse(\"test@mbox\");\n+            var list = mbox.getListReader(listName);\n@@ -48,1 +49,1 @@\n-                                    .sender(EmailAddress.from(\"test@mbox.file\"))\n+                                    .sender(listName)\n@@ -62,1 +63,2 @@\n-            var list = mbox.getListReader(\"test\");\n+            var listName = EmailAddress.parse(\"test@mbox\");\n+            var list = mbox.getListReader(listName);\n@@ -71,1 +73,1 @@\n-                                      .sender(EmailAddress.from(\"test@mbox.file\"))\n+                                      .sender(listName)\n@@ -83,1 +85,1 @@\n-                                     .sender(EmailAddress.from(\"test@mbox.file\"))\n+                                     .sender(listName)\n@@ -101,1 +103,1 @@\n-            var list = mbox.getListReader(\"test\");\n+            var list = mbox.getListReader(EmailAddress.from(\"test@mbox\"));\n@@ -111,1 +113,2 @@\n-            var list = mbox.getListReader(\"test\");\n+            var listName = EmailAddress.parse(\"test@mbox\");\n+            var list = mbox.getListReader(listName);\n@@ -120,1 +123,1 @@\n-                                    .sender(EmailAddress.from(\"test@mbox.file\"))\n+                                    .sender(listName)\n@@ -134,1 +137,2 @@\n-            var list = mbox.getListReader(\"test\");\n+            var listName = EmailAddress.parse(\"test@mbox\");\n+            var list = mbox.getListReader(listName);\n@@ -145,1 +149,1 @@\n-                                    .sender(EmailAddress.from(\"test@mbox.file\"))\n+                                    .sender(listName)\n@@ -159,1 +163,2 @@\n-            var list = mbox.getListReader(\"test\");\n+            var listName = EmailAddress.parse(\"test@mbox\");\n+            var list = mbox.getListReader(listName);\n@@ -166,1 +171,1 @@\n-                                    .sender(EmailAddress.from(\"test@mbox.file\"))\n+                                    .sender(listName)\n@@ -192,1 +197,1 @@\n-            var list = mbox.getListReader(\"test\");\n+            var list = mbox.getListReader(EmailAddress.parse(\"test@mbox\"));\n@@ -225,1 +230,1 @@\n-            var list = mbox.getListReader(\"test\");\n+            var list = mbox.getListReader(EmailAddress.parse(\"test@mbox\"));\n@@ -265,1 +270,1 @@\n-            var list = mbox.getListReader(\"test\");\n+            var list = mbox.getListReader(EmailAddress.parse(\"test@mbox\"));\n@@ -325,1 +330,1 @@\n-            var list = mbox.getListReader(\"test1\", \"test2\");\n+            var list = mbox.getListReader(EmailAddress.parse(\"test1@mbox\"), EmailAddress.parse(\"test2@mbox\"));\n@@ -367,1 +372,1 @@\n-            var list = mbox.getListReader(\"test1\", \"test2\");\n+            var list = mbox.getListReader(EmailAddress.parse(\"test1@mbox\"), EmailAddress.parse(\"test2@mbox\"));\n@@ -405,1 +410,1 @@\n-            var list = mbox.getListReader(\"test1\");\n+            var list = mbox.getListReader(EmailAddress.parse(\"test1@mbox\"));\n","filename":"mailinglist\/src\/test\/java\/org\/openjdk\/skara\/mailinglist\/MboxTests.java","additions":23,"deletions":18,"binary":false,"changes":41,"status":"modified"},{"patch":"@@ -113,1 +113,1 @@\n-    public abstract String createList(String name);\n+    public abstract EmailAddress createList(String name);\n@@ -158,1 +158,1 @@\n-    private final Map<String, Map<String, StringBuilder>> lists = new HashMap<>();\n+    private final Map<EmailAddress, Map<String, StringBuilder>> lists = new HashMap<>();\n@@ -167,2 +167,2 @@\n-                            .filter(recipient -> lists.containsKey(recipient.localPart()))\n-                            .map(recipient -> lists.get(recipient.localPart()))\n+                            .filter(lists::containsKey)\n+                            .map(lists::get)\n@@ -185,1 +185,1 @@\n-        var listMap = lists.get(listPath);\n+        var listMap = lists.get(EmailAddress.parse(listPath + \"@\" + httpServer.getAddress().getHostString()));\n@@ -195,3 +195,3 @@\n-    public String createList(String name) {\n-        var listName = EmailAddress.parse(name + \"@\" + httpServer.getAddress().getHostString()).toString();\n-        lists.put(name, new HashMap<>());\n+    public EmailAddress createList(String name) {\n+        var listName = EmailAddress.parse(name + \"@\" + httpServer.getAddress().getHostString());\n+        lists.put(listName, new HashMap<>());\n@@ -206,1 +206,1 @@\n-    private Map<String, List<EmailEntry>> lists = new HashMap<>();\n+    private Map<EmailAddress, List<EmailEntry>> lists = new HashMap<>();\n@@ -221,1 +221,1 @@\n-        var listPath = listMatcher.group(1);\n+        var listPath = EmailAddress.parse(listMatcher.group(1));\n@@ -260,1 +260,1 @@\n-    public String createList(String name) {\n+    public EmailAddress createList(String name) {\n@@ -262,2 +262,2 @@\n-        lists.put(emailAddress.address(), new ArrayList<>());\n-        return emailAddress.toString();\n+        lists.put(emailAddress, new ArrayList<>());\n+        return emailAddress;\n@@ -269,2 +269,2 @@\n-                .filter(recipient -> lists.containsKey(recipient.address()))\n-                .map(recipient -> lists.get(recipient.address()))\n+                .filter(recipient -> lists.containsKey(recipient))\n+                .map(recipient -> lists.get(recipient))\n","filename":"test\/src\/main\/java\/org\/openjdk\/skara\/test\/TestMailmanServer.java","additions":15,"deletions":15,"binary":false,"changes":30,"status":"modified"}]}