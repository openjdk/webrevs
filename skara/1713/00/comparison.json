{"files":[{"patch":"@@ -351,0 +351,16 @@\n+                    .onError(response -> {\n+                        \/\/ When GitLab returns 400, it may have still performed the update, so\n+                        \/\/ need to check the current file contents.\n+                        if (response.statusCode() == 400) {\n+                            log.info(\"Received status code 400 when writing file \" + filename\n+                                    + \" in repo \" + name() + \", checking if file was stored anyway\");\n+                            var currentContents = fileContents(filename, branch.name());\n+                            if (currentContents.isPresent() && content.equals(currentContents.get())) {\n+                                \/\/ Need to return something other than empty\n+                                log.info(\"Writing file \" + filename + \" in repo \" + name()\n+                                        + \" was found to be successful in spite of return code 400\");\n+                                return Optional.of(JSON.of());\n+                            }\n+                        }\n+                        return Optional.empty();\n+                    })\n","filename":"forge\/src\/main\/java\/org\/openjdk\/skara\/forge\/gitlab\/GitLabRepository.java","additions":16,"deletions":0,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -405,1 +405,2 @@\n-            log.warning(\"Request returned bad status: \" + response.statusCode());\n+            log.warning(\"Request \" + response.request().method() + \" \" + response.request().uri()\n+                    + \" returned bad status: \" + response.statusCode());\n","filename":"network\/src\/main\/java\/org\/openjdk\/skara\/network\/RestRequest.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -33,3 +33,2 @@\n-    int statusCode;\n-\n-    HttpRequest request;\n+    private final int statusCode;\n+    private final HttpRequest request;\n@@ -46,1 +45,1 @@\n-        super(\"[\" + statusCode + \"] \" + message, cause);\n+        super(\"[\" + statusCode + \"][\" + request.method() + \"][\" + request.uri() + \"] \" + message, cause);\n","filename":"network\/src\/main\/java\/org\/openjdk\/skara\/network\/UncheckedRestException.java","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"}]}