{"files":[{"patch":"@@ -730,2 +730,2 @@\n-                        if (issueTrackerIssue.get().isOpen() && version != null && issueType != null\n-                                && PRIMARY_TYPES.contains(issueType.asString())) {\n+                        if (!workItem.bot.fixVersionOverride() && issueTrackerIssue.get().isOpen()\n+                                && version != null && issueType != null && PRIMARY_TYPES.contains(issueType.asString())) {\n","filename":"bots\/pr\/src\/main\/java\/org\/openjdk\/skara\/bots\/pr\/CheckRun.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -82,0 +82,1 @@\n+    private final boolean fixVersionOverride;\n@@ -96,1 +97,1 @@\n-                   Map<String, List<PRRecord>> issuePRMap, Approval approval) {\n+                   Map<String, List<PRRecord>> issuePRMap, Approval approval, boolean fixVersionOverride) {\n@@ -132,0 +133,1 @@\n+        this.fixVersionOverride = fixVersionOverride;\n@@ -400,0 +402,4 @@\n+    public boolean fixVersionOverride() {\n+        return fixVersionOverride;\n+    }\n+\n","filename":"bots\/pr\/src\/main\/java\/org\/openjdk\/skara\/bots\/pr\/PullRequestBot.java","additions":7,"deletions":1,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -69,0 +69,1 @@\n+    private boolean fixVersionOverride = false;\n@@ -248,0 +249,5 @@\n+    public PullRequestBotBuilder fixVersionOverride(boolean fixVersionOverride) {\n+        this.fixVersionOverride = fixVersionOverride;\n+        return this;\n+    }\n+\n@@ -254,1 +260,1 @@\n-                mergeSources, jcheckMerge, enableBackport, issuePRMap, approval);\n+                mergeSources, jcheckMerge, enableBackport, issuePRMap, approval, fixVersionOverride);\n","filename":"bots\/pr\/src\/main\/java\/org\/openjdk\/skara\/bots\/pr\/PullRequestBotBuilder.java","additions":7,"deletions":1,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -247,0 +247,4 @@\n+            if (repo.value().contains(\"fixVersionOverride\")) {\n+                botBuilder.fixVersionOverride(repo.value().get(\"fixVersionOverride\").asBoolean());\n+            }\n+\n","filename":"bots\/pr\/src\/main\/java\/org\/openjdk\/skara\/bots\/pr\/PullRequestBotFactory.java","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -3165,1 +3165,1 @@\n-            assertFalse(pr.store().body().contains(\"(⚠️ The fixVersion in this issue is [0] but the fixVersion in .jcheck\/conf is 0.1, a new backport will be created when this pr is integrated.)\"));\n+            assertFalse(pr.store().body().contains(\"(⚠️ The fixVersion\"));\n@@ -3176,1 +3176,45 @@\n-            assertFalse(pr.store().body().contains(\"(⚠️ The fixVersion in this issue is [tbd] but the fixVersion in .jcheck\/conf is 0.1, a new backport will be created when this pr is integrated.)\"));\n+            assertFalse(pr.store().body().contains(\"(⚠️ The fixVersion\"));\n+        }\n+    }\n+\n+    @Test\n+    void fixVersionOverride(TestInfo testInfo) throws IOException {\n+        try (var credentials = new HostCredentials(testInfo);\n+             var tempFolder = new TemporaryDirectory()) {\n+            var author = credentials.getHostedRepository();\n+            var reviewer = credentials.getHostedRepository();\n+            var bot = credentials.getHostedRepository();\n+            var issueProject = credentials.getIssueProject();\n+            var issue = issueProject.createIssue(\"This is an issue\", List.of(), Map.of());\n+            issue.setProperty(\"issuetype\", JSON.of(\"Bug\"));\n+            issue.setProperty(\"priority\", JSON.of(\"4\"));\n+            issue.setState(Issue.State.OPEN);\n+            issue.setProperty(\"fixVersions\", JSON.array().add(\"18\"));\n+\n+            var censusBuilder = credentials.getCensusBuilder()\n+                    .addReviewer(reviewer.forge().currentUser().id())\n+                    .addCommitter(author.forge().currentUser().id());\n+            Map<String, List<PRRecord>> issuePRMap = new HashMap<>();\n+\n+            var prBot = PullRequestBot.newBuilder()\n+                    .repo(bot)\n+                    .issueProject(issueProject)\n+                    .censusRepo(censusBuilder.build())\n+                    .issuePRMap(issuePRMap)\n+                    .fixVersionOverride(true)\n+                    .build();\n+\n+            \/\/ Populate the projects repository\n+            var localRepo = CheckableRepository.init(tempFolder.path(), author.repositoryType());\n+            var masterHash = localRepo.resolve(\"master\").orElseThrow();\n+            localRepo.push(masterHash, author.authenticatedUrl(), \"master\", true);\n+\n+            \/\/ Make a change with a corresponding PR\n+            var editHash = CheckableRepository.appendAndCommit(localRepo);\n+            localRepo.push(editHash, author.authenticatedUrl(), \"refs\/heads\/edit\", true);\n+            var pr = credentials.createPullRequest(author, \"master\", \"edit\", \"1\");\n+\n+\n+            \/\/ Populate the projects repository\n+            TestBotRunner.runPeriodicItems(prBot);\n+            assertFalse(pr.store().body().contains(\"(⚠️ The fixVersion\"));\n","filename":"bots\/pr\/src\/test\/java\/org\/openjdk\/skara\/bots\/pr\/CheckTests.java","additions":46,"deletions":2,"binary":false,"changes":48,"status":"modified"}]}