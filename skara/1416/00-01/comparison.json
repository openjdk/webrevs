{"files":[{"patch":"@@ -2227,0 +2227,51 @@\n+\n+    @Test\n+    void testLatestBody(TestInfo testInfo) throws IOException {\n+        try (var credentials = new HostCredentials(testInfo);\n+             var tempFolder = new TemporaryDirectory()) {\n+            var author = credentials.getHostedRepository();\n+            var reviewer = credentials.getHostedRepository();\n+\n+            var censusBuilder = credentials.getCensusBuilder()\n+                    .addAuthor(author.forge().currentUser().id())\n+                    .addReviewer(reviewer.forge().currentUser().id());\n+            var seedFolder = tempFolder.path().resolve(\"seed\");\n+            var checkBot = PullRequestBot.newBuilder()\n+                    .repo(author)\n+                    .censusRepo(censusBuilder.build())\n+                    .censusLink(\"https:\/\/census.com\/{{contributor}}-profile\")\n+                    .seedStorage(seedFolder)\n+                    .build();\n+\n+            \/\/ Populate the projects repository\n+            var localRepo = CheckableRepository.init(tempFolder.path(), author.repositoryType());\n+            var masterHash = localRepo.resolve(\"master\").orElseThrow();\n+            localRepo.push(masterHash, author.url(), \"master\", true);\n+\n+            \/\/ Make a change with a corresponding PR\n+            var editHash = CheckableRepository.appendAndCommit(localRepo);\n+            localRepo.push(editHash, author.url(), \"refs\/heads\/edit\", true);\n+            var pr = credentials.createPullRequest(author, \"master\", \"edit\", \"This is a pull request\");\n+\n+            CheckWorkItem checkWorkItem = (CheckWorkItem) checkBot.getPeriodicItems().get(1);\n+            checkWorkItem.pr = author.pullRequest(pr.id());\n+            \/\/ Update PR body right now\n+            pr.store().setBody(\"It's a new Body\");\n+            try (var scratchFolder = new TemporaryDirectory()) {\n+                checkWorkItem.prRun(scratchFolder.path());\n+            }\n+            \/\/ PR body should not be updated by Bot\n+            assertEquals(\"It's a new Body\", pr.store().body());\n+\n+            checkWorkItem = (CheckWorkItem) checkBot.getPeriodicItems().get(1);\n+            checkWorkItem.pr = author.pullRequest(pr.id());\n+            try (var scratchFolder = new TemporaryDirectory()) {\n+                checkWorkItem.prRun(scratchFolder.path());\n+            }\n+            \/\/ PR body should be updated by Bot\n+            assertTrue(pr.store().body().contains(\"It's a new Body\"));\n+            assertTrue(pr.store().body().contains(\"Progress\"));\n+            assertTrue(pr.store().body().contains(\"<!-- Anything below this marker will be automatically updated\"));\n+            assertTrue(pr.store().body().contains(\"Reviewing\"));\n+        }\n+    }\n","filename":"bots\/pr\/src\/test\/java\/org\/openjdk\/skara\/bots\/pr\/CheckTests.java","additions":51,"deletions":0,"binary":false,"changes":51,"status":"modified"},{"patch":"@@ -94,1 +94,1 @@\n-        return store.body();\n+        return body;\n","filename":"test\/src\/main\/java\/org\/openjdk\/skara\/test\/TestIssue.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}