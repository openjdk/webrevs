{"files":[{"patch":"@@ -77,1 +77,1 @@\n-                .map(i -> (WorkItem) new IssueWorkItem(this, i, e -> poller.retryIssue(i)))\n+                .map(i -> (WorkItem) new CSRIssueWorkItem(this, i, e -> poller.retryIssue(i)))\n","filename":"bots\/pr\/src\/main\/java\/org\/openjdk\/skara\/bots\/pr\/CSRIssueBot.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -44,1 +44,1 @@\n-class IssueWorkItem implements WorkItem {\n+class CSRIssueWorkItem implements WorkItem {\n@@ -51,1 +51,1 @@\n-    public IssueWorkItem(CSRIssueBot bot, Issue csrIssue, Consumer<RuntimeException> errorHandler) {\n+    public CSRIssueWorkItem(CSRIssueBot bot, Issue csrIssue, Consumer<RuntimeException> errorHandler) {\n@@ -68,1 +68,1 @@\n-        if (!(other instanceof IssueWorkItem otherItem)) {\n+        if (!(other instanceof CSRIssueWorkItem otherItem)) {\n@@ -102,0 +102,1 @@\n+                .filter(pr -> bot.getPRBot(pr.repository().name()).enableCsr())\n","filename":"bots\/pr\/src\/main\/java\/org\/openjdk\/skara\/bots\/pr\/CSRIssueWorkItem.java","additions":4,"deletions":3,"binary":false,"changes":7,"previous_filename":"bots\/pr\/src\/main\/java\/org\/openjdk\/skara\/bots\/pr\/IssueWorkItem.java","status":"renamed"},{"patch":"@@ -144,1 +144,1 @@\n-     * Note: The type of  csr issue is the issue in module `issuetracker`.\n+     * Note: The type of csr issue is 'org.openjdk.skara.issuetracker.Issue'.\n@@ -161,3 +161,1 @@\n-            if (csrOptional.isPresent()) {\n-                csrIssueMap.put(issue, csrOptional.get());\n-            }\n+            csrOptional.ifPresent(csr -> csrIssueMap.put(issue, csr));\n@@ -1304,2 +1302,2 @@\n-        var project = workItem.bot.issueProject();\n-        if (project == null) {\n+        var issueProject = issueProject();\n+        if (issueProject == null) {\n@@ -1311,1 +1309,1 @@\n-            var jbsIssueOpt = project.issue(issue.shortId());\n+            var jbsIssueOpt = issueProject.issue(issue.shortId());\n@@ -1315,1 +1313,1 @@\n-                var issueId = issue.project().isEmpty() ? (project.name() + \"-\" + issue.id()) : issue.id();\n+                var issueId = issue.project().isEmpty() ? (issueProject.name() + \"-\" + issue.id()) : issue.id();\n","filename":"bots\/pr\/src\/main\/java\/org\/openjdk\/skara\/bots\/pr\/CheckRun.java","additions":6,"deletions":8,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -65,1 +65,1 @@\n-            var csr = issueProject.createIssue(\"This is an approved CSR\", List.of(), Map.of());\n+            var csr = issueProject.createIssue(\"This is a CSR\", List.of(), Map.of());\n@@ -95,0 +95,1 @@\n+            assertTrue(pr.store().body().contains(\"- [x] Change requires CSR request\"));\n@@ -488,4 +489,0 @@\n-    private String generateCSRProgressMessage(Issue issue) {\n-        return \"Change requires CSR request [\" + issue.id() + \"](\" + issue.webUrl() + \") to be approved\";\n-    }\n-\n","filename":"bots\/pr\/src\/test\/java\/org\/openjdk\/skara\/bots\/pr\/CSRBotTests.java","additions":2,"deletions":5,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -42,1 +42,1 @@\n-class CSRTests {\n+class CSRCommandTests {\n","filename":"bots\/pr\/src\/test\/java\/org\/openjdk\/skara\/bots\/pr\/CSRCommandTests.java","additions":1,"deletions":1,"binary":false,"changes":2,"previous_filename":"bots\/pr\/src\/test\/java\/org\/openjdk\/skara\/bots\/pr\/CSRTests.java","status":"renamed"},{"patch":"@@ -1975,1 +1975,2 @@\n-                    .censusRepo(censusBuilder.build()).issueProject(issueProject).build();\n+                    .censusRepo(censusBuilder.build()).issueProject(issueProject)\n+                    .enableCsr(true).build();\n","filename":"bots\/pr\/src\/test\/java\/org\/openjdk\/skara\/bots\/pr\/CheckTests.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -165,1 +165,0 @@\n-            assertNotNull(csrIssueBot1.getPRBot(\"repo2\"));\n@@ -172,2 +171,0 @@\n-            assertNotNull(csrIssueBot2.getPRBot(\"repo5\"));\n-            assertNotNull(csrIssueBot2.getPRBot(\"repo6\"));\n@@ -176,1 +173,1 @@\n-}\n\\ No newline at end of file\n+}\n","filename":"bots\/pr\/src\/test\/java\/org\/openjdk\/skara\/bots\/pr\/PullRequestBotFactoryTest.java","additions":1,"deletions":4,"binary":false,"changes":5,"status":"modified"}]}