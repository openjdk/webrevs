{"files":[{"patch":"@@ -45,1 +45,0 @@\n-import java.nio.channels.FileChannel;\n@@ -478,8 +477,5 @@\n-        \/\/ may prevent us doing so. When JMH upgrades to Java 8, replaces this with proper Optional\n-        \/\/ and lazy Supplier.\n-        Optional<Collection<String>> jvmArgsMid = options.getJvmArgs().orAnother(benchmark.getJvmArgs());\n-        if (jvmArgsMid.hasValue()) {\n-            jvmArgs.addAll(jvmArgsMid.get());\n-        } else {\n-            jvmArgs.addAll(ManagementFactory.getRuntimeMXBean().getInputArguments());\n-        }\n+        \/\/ may prevent us doing so.\n+        jvmArgs.addAll(options.getJvmArgs().orElseGet(\n+                () -> benchmark.getJvmArgs().orElseGet(\n+                        () -> ManagementFactory.getRuntimeMXBean().getInputArguments())));\n+\n","filename":"jmh-core\/src\/main\/java\/org\/openjdk\/jmh\/runner\/Runner.java","additions":5,"deletions":9,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -623,1 +623,1 @@\n-            return jvmArgs.orAnother(otherOptions.getJvmArgs().orAnother(Optional.<Collection<String>>none()));\n+            return jvmArgs.orAnother(otherOptions.getJvmArgs());\n@@ -625,1 +625,1 @@\n-            return jvmArgs.orAnother(Optional.<Collection<String>>none());\n+            return jvmArgs;\n@@ -642,1 +642,1 @@\n-            return jvmArgsAppend.orAnother(otherOptions.getJvmArgsAppend().orAnother(Optional.<Collection<String>>none()));\n+            return jvmArgsAppend.orAnother(otherOptions.getJvmArgsAppend());\n@@ -644,1 +644,1 @@\n-            return jvmArgsAppend.orAnother(Optional.<Collection<String>>none());\n+            return jvmArgsAppend;\n@@ -661,1 +661,1 @@\n-            return jvmArgsPrepend.orAnother(otherOptions.getJvmArgsPrepend().orAnother(Optional.<Collection<String>>none()));\n+            return jvmArgsPrepend.orAnother(otherOptions.getJvmArgsPrepend());\n@@ -663,1 +663,1 @@\n-            return jvmArgsPrepend.orAnother(Optional.<Collection<String>>none());\n+            return jvmArgsPrepend;\n","filename":"jmh-core\/src\/main\/java\/org\/openjdk\/jmh\/runner\/options\/OptionsBuilder.java","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -29,0 +29,1 @@\n+import java.util.function.Supplier;\n@@ -54,0 +55,4 @@\n+    public T orElseGet(Supplier<T> alternativeSupplier) {\n+        return val != null ? val : alternativeSupplier.get();\n+    }\n+\n","filename":"jmh-core\/src\/main\/java\/org\/openjdk\/jmh\/util\/Optional.java","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"}]}