{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,1 +24,0 @@\n-import java.awt.AWTException;\n@@ -26,2 +25,0 @@\n-import java.awt.event.ActionEvent;\n-import java.awt.event.ActionListener;\n@@ -29,1 +26,0 @@\n-import java.lang.reflect.InvocationTargetException;\n@@ -35,1 +31,0 @@\n-import javax.swing.JTextArea;\n@@ -42,1 +37,0 @@\n- * @author Scott Violet\n@@ -45,0 +39,2 @@\n+ * @summary Verifies if Alt+mnemonic char works when\n+ *          menu & menuitem have same mnemonic char\n@@ -48,1 +44,0 @@\n-\n@@ -51,3 +46,3 @@\n-    private JMenu menu;\n-\n-    private JFrame frame;\n+    private static JMenu menu;\n+    private static JFrame frame;\n+    private static Robot robot;\n@@ -55,3 +50,4 @@\n-    public static void main(String[] args) throws Throwable {\n-        new bug4213634();\n-    }\n+    public static void main(String[] args) throws Exception {\n+        try {\n+            robot = new Robot();\n+            SwingUtilities.invokeAndWait(bug4213634::createAndShowGUI);\n@@ -59,9 +55,10 @@\n-    bug4213634() throws AWTException, InterruptedException, InvocationTargetException {\n-        SwingUtilities.invokeAndWait(new Runnable() {\n-            @Override\n-            public void run() {\n-                createAndShowGUI();\n-            }\n-        });\n-\n-        test();\n+            robot.waitForIdle();\n+            robot.delay(1000);\n+            test();\n+        } finally {\n+            SwingUtilities.invokeAndWait(() -> {\n+                if (frame != null) {\n+                    frame.dispose();\n+                }\n+            });\n+        }\n@@ -70,2 +67,2 @@\n-    public  void createAndShowGUI() {\n-        frame = new JFrame(\"TEST\");\n+    public static void createAndShowGUI() {\n+        frame = new JFrame(\"bug4213634\");\n@@ -76,2 +73,0 @@\n-        JTextArea ta = new JTextArea(\"This test dedicated to Nancy and Kathleen, testers and bowlers extraordinaire\\n\\n\\nNo exception means pass.\");\n-        frame.getContentPane().add(\"Center\", ta);\n@@ -80,1 +75,2 @@\n-        frame.setBounds(100, 100, 400, 400);\n+        frame.setSize(300, 300);\n+        frame.setLocationRelativeTo(null);\n@@ -85,5 +81,1 @@\n-    private void test() throws AWTException, InterruptedException, InvocationTargetException {\n-        Robot robot = new Robot();\n-        robot.setAutoDelay(50);\n-        robot.waitForIdle();\n-\n+    private static void test() throws Exception {\n@@ -92,0 +84,1 @@\n+        robot.delay(100);\n@@ -93,10 +86,6 @@\n-        SwingUtilities.invokeAndWait(new Runnable() {\n-            @Override\n-            public void run() {\n-                if (!menu.isSelected()) {\n-                    throw new RuntimeException(\n-                        \"Failed: Menu didn't remain posted at end of test\");\n-                } else {\n-                    System.out.println(\"Test passed!\");\n-                    frame.dispose();\n-                }\n+        SwingUtilities.invokeAndWait(() -> {\n+            if (!menu.isSelected()) {\n+                throw new RuntimeException(\n+                    \"Failed: Menu didn't remain posted at end of test\");\n+            } else {\n+                System.out.println(\"Test passed!\");\n@@ -106,1 +95,2 @@\n-    private JMenu createMenu(String str, boolean bFlag) {\n+\n+    private static JMenu createMenu(String str, boolean bFlag) {\n@@ -111,1 +101,1 @@\n-        for(int i = 0; i < 10; i ++) {\n+        for (int i = 0; i < 10; i++) {\n@@ -113,5 +103,2 @@\n-            menuitem.addActionListener(new ActionListener() {\n-                public void actionPerformed(ActionEvent e) {\n-                    throw new RuntimeException(\n-                        \"Failed: Mnemonic activated\");\n-                }\n+            menuitem.addActionListener(e -> {\n+                throw new RuntimeException(\"Failed: Mnemonic activated\");\n@@ -119,1 +106,1 @@\n-            if(bFlag)\n+            if (bFlag) {\n@@ -121,0 +108,1 @@\n+            }\n","filename":"test\/jdk\/javax\/swing\/JMenu\/4213634\/bug4213634.java","additions":39,"deletions":51,"binary":false,"changes":90,"status":"modified"}]}