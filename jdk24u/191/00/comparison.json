{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -92,9 +92,19 @@\n-        byte[] bytes = str.toByteArray();\n-        str.reset();\n-        String out = new String(bytes, StandardCharsets.UTF_8);\n-        out = stripAnsi(out);\n-        out = out.replaceAll(\"[\\r\\n]+\", \"\\n\");\n-        if (checkOut != null) {\n-            checkOut.accept(out);\n-        } else {\n-            assertEquals(out, \"\", label + \": Expected empty -- \");\n+        try {\n+            byte[] bytes = str.toByteArray();\n+            str.reset();\n+            String out = new String(bytes, StandardCharsets.UTF_8);\n+            out = stripAnsi(out);\n+            out = out.replaceAll(\"[\\r\\n]+\", \"\\n\");\n+            if (checkOut != null) {\n+                checkOut.accept(out);\n+            } else {\n+                assertEquals(out, \"\", label + \": Expected empty -- \");\n+            }\n+        } catch (Throwable t) {\n+            logOutput(\"cmdout\", cmdout);\n+            logOutput(\"cmderr\", cmderr);\n+            logOutput(\"console\", console);\n+            logOutput(\"userout\", userout);\n+            logOutput(\"usererr\", usererr);\n+\n+            throw t;\n@@ -104,0 +114,6 @@\n+    private void logOutput(String outName, ByteArrayOutputStream out) {\n+        System.err.println(outName + \": \" +\n+                           new String(out.toByteArray(),\n+                                      StandardCharsets.UTF_8));\n+    }\n+\n","filename":"test\/langtools\/jdk\/jshell\/StartOptionTest.java","additions":26,"deletions":10,"binary":false,"changes":36,"status":"modified"}]}