{"files":[{"patch":"@@ -1288,7 +1288,1 @@\n-    if (UseCompactObjectHeaders) {\n-      load_narrow_klass_compact(tmp1, receiver);\n-    } else if (UseCompressedClassPointers) {\n-      lwz(tmp1, oopDesc::klass_offset_in_bytes(), receiver);\n-    } else {\n-      ld(tmp1, oopDesc::klass_offset_in_bytes(), receiver);\n-    }\n+    load_klass_no_decode(tmp1, receiver); \/\/ 2 instructions with UseCompactObjectHeaders\n@@ -1310,5 +1304,1 @@\n-    if (UseCompressedClassPointers) {\n-      lwz(tmp1, oopDesc::klass_offset_in_bytes(), receiver);\n-    } else {\n-      ld(tmp1, oopDesc::klass_offset_in_bytes(), receiver);\n-    }\n+    load_klass_no_decode(tmp1, receiver); \/\/ 2 instructions with UseCompactObjectHeaders\n@@ -3368,1 +3358,1 @@\n-void MacroAssembler::load_klass(Register dst, Register src) {\n+void MacroAssembler::load_klass_no_decode(Register dst, Register src) {\n@@ -3371,1 +3361,0 @@\n-    decode_klass_not_null(dst);\n@@ -3374,1 +3363,0 @@\n-    decode_klass_not_null(dst);\n@@ -3380,0 +3368,7 @@\n+void MacroAssembler::load_klass(Register dst, Register src) {\n+  load_klass_no_decode(dst, src);\n+  if (UseCompressedClassPointers) { \/\/ also true for UseCompactObjectHeaders\n+    decode_klass_not_null(dst);\n+  }\n+}\n+\n","filename":"src\/hotspot\/cpu\/ppc\/macroAssembler_ppc.cpp","additions":10,"deletions":15,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -772,0 +772,1 @@\n+  void load_klass_no_decode(Register dst, Register src);\n","filename":"src\/hotspot\/cpu\/ppc\/macroAssembler_ppc.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"}]}