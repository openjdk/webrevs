{"files":[{"patch":"@@ -2828,5 +2828,1 @@\n-      if (!UseArrayFlattening) {\n-        uncommon_trap(Deoptimization::Reason_intrinsic,\n-                      Deoptimization::Action_none);\n-        return true;\n-      } else {\n+      if (UseArrayFlattening) {\n@@ -2844,0 +2840,4 @@\n+      } else {\n+        uncommon_trap(Deoptimization::Reason_intrinsic,\n+                      Deoptimization::Action_none);\n+        return true;\n","filename":"src\/hotspot\/share\/opto\/library_call.cpp","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -29,0 +29,1 @@\n+ * @library \/test\/lib\n@@ -30,1 +31,1 @@\n- * @run main\/othervm -Xcomp -XX:CompileCommand=compileonly,compiler.valhalla.inlinetypes.PutFlatValueWithoutUseArrayFlattening::test\n+ * @run main\/othervm -XX:CompileCommand=compileonly,compiler.valhalla.inlinetypes.PutFlatValueWithoutUseArrayFlattening::test\n@@ -39,1 +40,0 @@\n-import jdk.internal.misc.Unsafe;\n@@ -41,0 +41,2 @@\n+import jdk.internal.misc.Unsafe;\n+import jdk.test.lib.Asserts;\n@@ -62,0 +64,1 @@\n+            Asserts.assertTrue(IS_FLATTENED, \"Field f should be flat, the test makes no sense otherwise. And why isn't it?!\");\n@@ -69,1 +72,0 @@\n-        assert IS_FLATTENED;\n","filename":"test\/hotspot\/jtreg\/compiler\/valhalla\/inlinetypes\/PutFlatValueWithoutUseArrayFlattening.java","additions":5,"deletions":3,"binary":false,"changes":8,"status":"modified"}]}