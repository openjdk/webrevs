{"files":[{"patch":"@@ -134,0 +134,7 @@\n+    public boolean isValueClass() {\n+        if (modifiers == -1) {\n+            getModifiers();\n+        }\n+        return (modifiers & VMModifiers.IDENTITY) == 0;\n+    }\n+\n","filename":"src\/jdk.jdi\/share\/classes\/com\/sun\/tools\/jdi\/ClassTypeImpl.java","additions":7,"deletions":0,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -148,0 +148,7 @@\n+    boolean isValueObject() {\n+        if (referenceType() instanceof ClassTypeImpl classType) {\n+            return classType.isValueClass();\n+        }\n+        return false;\n+    }\n+\n@@ -157,1 +164,1 @@\n-            if (((ReferenceTypeImpl)referenceType()).isInlined()) {\n+            if (isValueObject() && vm.canUseIsSameObject()) {\n@@ -170,4 +177,6 @@\n-        try {\n-            return JDWP.ObjectReference.ObjectHashCode.process(vm, this).hashCode;\n-        } catch (JDWPException exc) {\n-            throw exc.toJDIException();\n+        if (isValueObject() && vm.canUseIsSameObject()) {\n+            try {\n+                return JDWP.ObjectReference.ObjectHashCode.process(vm, this).hashCode;\n+            } catch (JDWPException exc) {\n+                throw exc.toJDIException();\n+            }\n@@ -175,0 +184,1 @@\n+        return Long.hashCode(ref());\n","filename":"src\/jdk.jdi\/share\/classes\/com\/sun\/tools\/jdi\/ObjectReferenceImpl.java","additions":15,"deletions":5,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -333,11 +333,0 @@\n-    \/\/ Inline type is a concrete value class.\n-    boolean isInlined() {\n-        if (modifiers == -1) {\n-            getModifiers();\n-        }\n-\n-        return ((modifiers & VMModifiers.IDENTITY) == 0)\n-            && ((modifiers & VMModifiers.INTERFACE) == 0)\n-            && ((modifiers & VMModifiers.ABSTRACT) == 0);\n-    }\n-\n","filename":"src\/jdk.jdi\/share\/classes\/com\/sun\/tools\/jdi\/ReferenceTypeImpl.java","additions":0,"deletions":11,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -838,0 +838,4 @@\n+    public boolean canUseIsSameObject() {\n+        return versionInfo().jdwpMajor >=27;\n+    }\n+\n","filename":"src\/jdk.jdi\/share\/classes\/com\/sun\/tools\/jdi\/VirtualMachineImpl.java","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"}]}