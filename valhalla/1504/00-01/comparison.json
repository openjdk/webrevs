{"files":[{"patch":"@@ -30,0 +30,1 @@\n+import jdk.internal.misc.PreviewFeatures;\n@@ -44,1 +45,1 @@\n-        return !fieldType.isPrimitive() && (!fieldType.isIdentity() || fieldType == Object.class);\n+        return PreviewFeatures.isEnabled() && !fieldType.isPrimitive() && (!fieldType.isIdentity() || fieldType == Object.class);\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/value\/ValueClass.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -27,3 +27,4 @@\n- * @enablePreview\n- * @modules java.base\/jdk.internal.value\n- * @run junit\/othervm ValueClassTest\n+ * @modules java.base\/jdk.internal.misc\n+ *          java.base\/jdk.internal.value\n+ * @run junit ValueClassTest\n+ * @run junit\/othervm --enable-preview ValueClassTest\n@@ -34,0 +35,1 @@\n+import jdk.internal.misc.PreviewFeatures;\n@@ -38,2 +40,1 @@\n-import static org.junit.jupiter.api.Assertions.assertFalse;\n-import static org.junit.jupiter.api.Assertions.assertTrue;\n+import static org.junit.jupiter.api.Assertions.*;\n@@ -45,3 +46,3 @@\n-        assertTrue(isValueObjectCompatible(Object.class), \"Object\");\n-        assertTrue(isValueObjectCompatible(Number.class), \"abstract value class\");\n-        assertTrue(isValueObjectCompatible(Integer.class), \"final value class\");\n+        assertEquals(PreviewFeatures.isEnabled(), isValueObjectCompatible(Object.class), \"Object\");\n+        assertEquals(PreviewFeatures.isEnabled(), isValueObjectCompatible(Number.class), \"abstract value class\");\n+        assertEquals(PreviewFeatures.isEnabled(), isValueObjectCompatible(Integer.class), \"final value class\");\n@@ -51,1 +52,1 @@\n-        assertTrue(isValueObjectCompatible(Comparable.class), \"interface\");\n+        assertEquals(PreviewFeatures.isEnabled(), isValueObjectCompatible(Comparable.class), \"interface\");\n@@ -67,1 +68,1 @@\n-        assertTrue(isValueObjectInstance(Integer.class), \"final value class\");\n+        assertEquals(PreviewFeatures.isEnabled(), isValueObjectInstance(Integer.class), \"final value class\");\n","filename":"test\/jdk\/valhalla\/valuetypes\/ValueClassTest.java","additions":11,"deletions":10,"binary":false,"changes":21,"status":"modified"}]}