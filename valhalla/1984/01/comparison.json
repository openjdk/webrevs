{"files":[{"patch":"@@ -35,1 +35,0 @@\n-runtime\/cds\/serviceability\/ReplaceCriticalClassesForSubgraphs.java                               8372599 generic-all\n","filename":"test\/hotspot\/jtreg\/ProblemList-enable-preview.txt","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,0 +31,1 @@\n+ * @modules java.base\/jdk.internal.misc\n@@ -36,0 +37,4 @@\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import jdk.internal.misc.PreviewFeatures;\n+\n@@ -43,1 +48,1 @@\n-        String tests[] = {\n+        ArrayList<String> tests = new ArrayList<String>(Arrays.asList(\n@@ -52,1 +57,0 @@\n-            \"-subgraph java\/lang\/Integer java.lang.Integer$IntegerCache\",\n@@ -59,3 +63,10 @@\n-            \"-nowhitebox -subgraph java\/lang\/ModuleLayer jdk.internal.module.ArchivedBootLayer\",\n-        };\n-        return tests;\n+            \"-nowhitebox -subgraph java\/lang\/ModuleLayer jdk.internal.module.ArchivedBootLayer\"));\n+\n+        \/\/ IntegerCache does not exist in preview mode so it should not be expected in the output\n+        if (!PreviewFeatures.isEnabled()) {\n+            \/\/ CDS should not be disabled -- these critical classes cannot be replaced because\n+            \/\/ JvmtiExport::early_class_hook_env() is false.\n+            tests.add(\"-subgraph java\/lang\/Integer java.lang.Integer$IntegerCache\");\n+        }\n+\n+        return tests.toArray(new String[0]);\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/serviceability\/ReplaceCriticalClassesForSubgraphs.java","additions":17,"deletions":6,"binary":false,"changes":23,"status":"modified"}]}