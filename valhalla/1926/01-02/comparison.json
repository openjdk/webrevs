{"files":[{"patch":"@@ -93,1 +93,0 @@\n-    Symbol.ClassSymbol currentClass;\n@@ -101,1 +100,0 @@\n-                currentClass = (Symbol.ClassSymbol) TreeInfo.symbolFor(cdef);\n@@ -106,1 +104,0 @@\n-                this.currentClass = null;\n@@ -150,17 +147,0 @@\n-    boolean isInThisSameCompUnit(Symbol sym) {\n-        return env.toplevel.getTypeDecls().stream().anyMatch(\n-                tree -> {\n-                    Symbol csym = TreeInfo.symbolFor(tree);\n-                    return csym.kind == TYP && csym instanceof Symbol.ClassSymbol && csym == outermostType(sym);\n-                });\n-    }\n-\n-    private Symbol outermostType(Symbol sym) {\n-        Symbol prev = null;\n-        while (sym.kind != PCK) {\n-            prev = sym;\n-            sym = sym.owner;\n-        }\n-        return prev;\n-    }\n-\n@@ -179,11 +159,26 @@\n-    private void identSelectVisitHelper(JCTree tree) {\n-        Symbol sym = TreeInfo.symbolFor(tree);\n-        if (!noUseSiteNullChecks &&\n-                sym.owner.kind == TYP &&\n-                sym.kind == VAR &&\n-                !isInThisSameCompUnit(sym) &&\n-                types.isNonNullable(sym.type)) {\n-            \/* we are accessing a non-nullable field declared in another\n-             * compilation unit\n-             *\/\n-            result = attr.makeNullCheck((JCExpression) tree, true);\n+    \/\/ where\n+        private void identSelectVisitHelper(JCTree tree) {\n+            Symbol sym = TreeInfo.symbolFor(tree);\n+            if (!noUseSiteNullChecks &&\n+                    sym.owner.kind == TYP &&\n+                    sym.kind == VAR &&\n+                    !isInThisSameCompUnit(sym) &&\n+                    types.isNonNullable(sym.type)) {\n+                \/* we are accessing a non-nullable field declared in another\n+                 * compilation unit\n+                 *\/\n+                result = attr.makeNullCheck((JCExpression) tree, true);\n+            }\n+        }\n+\n+        private boolean isInThisSameCompUnit(Symbol sym) {\n+            return env.toplevel.getTypeDecls().stream().anyMatch(tree -> TreeInfo.symbolFor(tree) == outermostType(sym));\n+        }\n+\n+        private Symbol outermostType(Symbol sym) {\n+            Symbol prev = null;\n+            while (sym.kind != PCK) {\n+                prev = sym;\n+                sym = sym.owner;\n+            }\n+            return prev;\n@@ -191,1 +186,0 @@\n-    }\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/comp\/NullChecksWriter.java","additions":26,"deletions":32,"binary":false,"changes":58,"status":"modified"}]}