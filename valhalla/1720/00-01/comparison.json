{"files":[{"patch":"@@ -1586,1 +1586,1 @@\n-                                    _decorators | C2_MISMATCHED | C2_CONTROL_DEPENDENT_LOAD | C2_UNKNOWN_CONTROL_LOAD, kit.control());\n+                                     _decorators | C2_MISMATCHED | C2_CONTROL_DEPENDENT_LOAD | C2_UNKNOWN_CONTROL_LOAD, kit.control());\n","filename":"src\/hotspot\/share\/opto\/inlinetypenode.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2911,1 +2911,1 @@\n-      value_type = Type::get_const_type(value_klass)->filter_speculative(value_type);\n+      value_type = Type::get_const_type(value_klass);\n","filename":"src\/hotspot\/share\/opto\/library_call.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -319,0 +319,1 @@\n+    static final Unsafe U = Unsafe.getUnsafe();\n@@ -320,0 +321,7 @@\n+    static final Field field5_mirror;\n+    static final long field5_offset;\n+    static final int field5_layout;\n+    static final VarHandle field5_vh;\n+    static final long array13_baseOffset;\n+    static final int array13_layout;\n+    static final VarHandle array13_vh;\n@@ -328,1 +336,9 @@\n-        } catch (NoSuchMethodException | IllegalAccessException e) {\n+\n+            field5_mirror = TestTearing.class.getDeclaredField(\"field5\");\n+            field5_offset = U.objectFieldOffset(field5_mirror);\n+            field5_layout = U.fieldLayout(field5_mirror);\n+            field5_vh = lookup.findVarHandle(TestTearing.class, \"field5\", MyLargeValueTearing.class).withInvokeExactBehavior();\n+            array13_baseOffset = U.arrayInstanceBaseOffset(array13);\n+            array13_layout = U.arrayLayout(array13);\n+            array13_vh = MethodHandles.arrayElementVarHandle(array13.getClass()).withInvokeExactBehavior();\n+        } catch (NoSuchFieldException | NoSuchMethodException | IllegalAccessException e) {\n@@ -415,0 +431,15 @@\n+\n+                if (field5_layout != 0) {\n+                    field5Value = U.getFlatValue(test, field5_offset, field5_layout, MyLargeValueTearing.class);\n+                    if (field5Value == null) {\n+                        field5Value = MyLargeValueTearing.DEFAULT;\n+                    } else {\n+                        field5Value = field5Value.incrementAndCheck();\n+                    }\n+                    if ((i & 15) == 0) {\n+                        U.putFlatValue(test, field5_offset, field5_layout, MyLargeValueTearing.class, null);\n+                    } else {\n+                        U.putFlatValue(test, field5_offset, field5_layout, MyLargeValueTearing.class, field5Value);\n+                    }\n+                }\n+\n@@ -428,0 +459,14 @@\n+                if (array13_layout != 0) {\n+                    array13Elem = U.getFlatValue(array13, array13_baseOffset, array13_layout, MyLargeValueTearing.class);\n+                    if (array13Elem == null) {\n+                        array13Elem = MyLargeValueTearing.DEFAULT;\n+                    } else {\n+                        array13Elem = array13Elem.incrementAndCheck();\n+                    }\n+                    if ((i & 15) == 0) {\n+                        U.putFlatValue(array13, array13_baseOffset, array13_layout, MyLargeValueTearing.class, null);\n+                    } else {\n+                        U.putFlatValue(array13, array13_baseOffset, array13_layout, MyLargeValueTearing.class, array13Elem);\n+                    }\n+                }\n+\n@@ -433,0 +478,13 @@\n+\n+                    field5Value = (MyLargeValueTearing) field5_vh.get(test);\n+                    if (field5Value == null) {\n+                        field5Value = MyLargeValueTearing.DEFAULT;\n+                    } else {\n+                        field5Value = field5Value.incrementAndCheck();\n+                    }\n+                    if ((i & 15) == 0) {\n+                        field5_vh.set(test, (MyLargeValueTearing) null);\n+                    } else {\n+                        field5_vh.set(test, field5Value);\n+                    }\n+\n@@ -445,0 +503,12 @@\n+\n+                    array13Elem = (MyLargeValueTearing) array13_vh.get(array13, 0);\n+                    if (array13Elem == null) {\n+                        array13Elem = MyLargeValueTearing.DEFAULT;\n+                    } else {\n+                        array13Elem = array13Elem.incrementAndCheck();\n+                    }\n+                    if ((i & 15) == 0) {\n+                        array13_vh.set(array13, 0, (MyLargeValueTearing) null);\n+                    } else {\n+                        array13_vh.set(array13, 0, array13Elem);\n+                    }\n","filename":"test\/hotspot\/jtreg\/compiler\/valhalla\/inlinetypes\/TestTearing.java","additions":71,"deletions":1,"binary":false,"changes":72,"status":"modified"}]}