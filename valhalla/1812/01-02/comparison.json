{"files":[{"patch":"@@ -50,4 +50,21 @@\n-  \/\/ The InstanceKlass objects have dynamic size because of vtables and other\n-  \/\/ features (see InstanceKlass::size). Therefore, we can't put C++ fields\n-  \/\/ directly into the InlineKlass class, but instead we stamp out a block of\n-  \/\/ these members after the part of the object that comes from the InstanceKlass.\n+  \/\/ All Klass objects have vtables starting at offset `sizeof(InstanceKlass)`.\n+  \/\/\n+  \/\/ This has the effect that sub-klasses of InstanceKlass can't have their own\n+  \/\/ C++ fields, because those would overlap with the vtables (or some of the\n+  \/\/ other dynamically-sized sections).\n+  \/\/\n+  \/\/ To work around this we stamp out the block members *after* all\n+  \/\/ dynamically-sized sections belonging to the InstanceKlass part of the\n+  \/\/ object.\n+  \/\/\n+  \/\/ InlineKlass object layout:\n+  \/\/   +-----------------------+\n+  \/\/   | sizeof(InstanceKlass) |\n+  \/\/   +-----------------------+ <= InstanceKlass:header_size()\n+  \/\/   | vtable                |\n+  \/\/   +-----------------------+\n+  \/\/   | other sections        |\n+  \/\/   +-----------------------+ <= end_of_instance_klass()\n+  \/\/   | InlineKlass::Members  |\n+  \/\/   +-----------------------+\n+  \/\/\n","filename":"src\/hotspot\/share\/oops\/inlineKlass.hpp","additions":21,"deletions":4,"binary":false,"changes":25,"status":"modified"}]}