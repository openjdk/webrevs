{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2020, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2020, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -1193,1 +1193,1 @@\n-    ttyLocker ttl;\n+    stringStream st;\n@@ -1195,2 +1195,2 @@\n-      tty->print_cr(\"Field layout log format: @offset size\/alignment [name] [signature] [comment]\");\n-      tty->print_cr(\"Heap oop size = %d\", heapOopSize);\n+      st.print_cr(\"Field layout log format: @offset size\/alignment [name] [signature] [comment]\");\n+      st.print_cr(\"Heap oop size = %d\", heapOopSize);\n@@ -1200,1 +1200,1 @@\n-      tty->print_cr(\"Layout of class %s@%p extends %s@%p\", _classname->as_C_string(),\n+      st.print_cr(\"Layout of class %s@%p extends %s@%p\", _classname->as_C_string(),\n@@ -1203,1 +1203,1 @@\n-      tty->print_cr(\"Layout of class %s@%p\", _classname->as_C_string(), _loader_data);\n+      st.print_cr(\"Layout of class %s@%p\", _classname->as_C_string(), _loader_data);\n@@ -1205,5 +1205,5 @@\n-    tty->print_cr(\"Instance fields:\");\n-    _layout->print(tty, false, _super_klass, _inline_type_field_klasses);\n-    tty->print_cr(\"Static fields:\");\n-    _static_layout->print(tty, true, nullptr, _inline_type_field_klasses);\n-    tty->print_cr(\"Instance size = %d bytes\", _info->_instance_size * wordSize);\n+    st.print_cr(\"Instance fields:\");\n+    _layout->print(&st, false, _super_klass, _inline_type_field_klasses);\n+    st.print_cr(\"Static fields:\");\n+    _static_layout->print(&st, true, nullptr, _inline_type_field_klasses);\n+    st.print_cr(\"Instance size = %d bytes\", _info->_instance_size * wordSize);\n@@ -1211,3 +1211,3 @@\n-      tty->print_cr(\"First field offset = %d\", _first_field_offset);\n-      tty->print_cr(\"Alignment = %d bytes\", _alignment);\n-      tty->print_cr(\"Exact size = %d bytes\", _payload_size_in_bytes);\n+      st.print_cr(\"First field offset = %d\", _first_field_offset);\n+      st.print_cr(\"Alignment = %d bytes\", _alignment);\n+      st.print_cr(\"Exact size = %d bytes\", _payload_size_in_bytes);\n@@ -1215,1 +1215,1 @@\n-        tty->print_cr(\"Null marker offset = %d\", _internal_null_marker_offset);\n+        st.print_cr(\"Null marker offset = %d\", _internal_null_marker_offset);\n@@ -1218,1 +1218,3 @@\n-    tty->print_cr(\"---\");\n+    st.print_cr(\"---\");\n+    \/\/ Print output all together.\n+    tty->print_raw(st.as_string());\n","filename":"src\/hotspot\/share\/classfile\/fieldLayoutBuilder.cpp","additions":18,"deletions":16,"binary":false,"changes":34,"status":"modified"}]}