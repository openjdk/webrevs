{"files":[{"patch":"@@ -4402,1 +4402,2 @@\n-                    if (sym.owner != env.enclClass.sym ||\n+                    if (localProxyVarsGen.hasAST(env.enclMethod, tree)) {\n+                        if (sym.owner != env.enclClass.sym ||\n@@ -4404,5 +4405,5 @@\n-                        \/* in this case we are seeing something like `super.field` or accessing a field of a\n-                         * super class while in the prologue of a subclass, at Resolve javac just didn't have enough\n-                         * information to determine this\n-                         *\/\n-                        if (localProxyVarsGen.removeASTReadInPrologue(env.enclMethod, tree)) {\n+                            \/* in this case we are seeing something like `super.field` or accessing a field of a\n+                             * super class while in the prologue of a subclass, at Resolve javac just didn't have enough\n+                             * information to determine this\n+                             *\/\n+                            localProxyVarsGen.removeASTReadInPrologue(env.enclMethod, tree);\n@@ -4410,0 +4411,2 @@\n+                        } else if (!sym.isFinal() && !sym.isStrict()) {\n+                            localProxyVarsGen.removeASTReadInPrologue(env.enclMethod, tree);\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/comp\/Attr.java","additions":9,"deletions":6,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -13,0 +13,20 @@\n+        public Inner1(int y) {\n+            y = x;                          \/\/ OK mutable field\n+            super();\n+        }\n+\n+        public Inner1(int y, int ignore1) {\n+            y = this.x;                     \/\/ OK mutable field\n+            super();\n+        }\n+\n+        public Inner1(int y, boolean ignore2) {\n+            y = Inner1.this.x;              \/\/ OK mutable field\n+            super();\n+        }\n+\n+        public Inner1(short[] x) {\n+            this.x++;                       \/\/ OK mutable field\n+            super();\n+        }\n+\n","filename":"test\/langtools\/tools\/javac\/SuperInit\/EarlyAssignments.java","additions":20,"deletions":0,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -1,33 +0,0 @@\n-\/*\n- * @test \/nodynamiccopyright\/\n- * @bug 8359370\n- * @summary [lworld] allow instance fields of identity classes to be readable in the prologue phase\n- * @compile\/fail\/ref=EarlyAssignments2.out -XDrawDiagnostics EarlyAssignments2.java\n- * @enablePreview\n- *\/\n-\n-public class EarlyAssignments2 {\n-    public static class Inner1 {\n-        public int x;\n-\n-        public Inner1(int y) {\n-            y = x;                          \/\/ FAIL - x might not have been initialized\n-            super();\n-        }\n-\n-        public Inner1(int y, int ignore1) {\n-            y = this.x;                     \/\/ FAIL - x might not have been initialized\n-            super();\n-        }\n-\n-        public Inner1(int y, boolean ignore2) {\n-            y = Inner1.this.x;              \/\/ FAIL - x might not have been initialized\n-            super();\n-        }\n-\n-        public Inner1(short[] x) {\n-            this.x++;                       \/\/ this should FAIL\n-            super();\n-        }\n-    }\n-}\n","filename":"test\/langtools\/tools\/javac\/SuperInit\/EarlyAssignments2.java","additions":0,"deletions":33,"binary":false,"changes":33,"status":"deleted"},{"patch":"@@ -1,7 +0,0 @@\n-EarlyAssignments2.java:14:17: compiler.err.var.might.not.have.been.initialized: x\n-EarlyAssignments2.java:19:21: compiler.err.var.might.not.have.been.initialized: x\n-EarlyAssignments2.java:24:28: compiler.err.var.might.not.have.been.initialized: x\n-EarlyAssignments2.java:29:17: compiler.err.var.might.not.have.been.initialized: x\n-- compiler.note.preview.filename: EarlyAssignments2.java, DEFAULT\n-- compiler.note.preview.recompile\n-4 errors\n","filename":"test\/langtools\/tools\/javac\/SuperInit\/EarlyAssignments2.out","additions":0,"deletions":7,"binary":false,"changes":7,"status":"deleted"}]}