{"files":[{"patch":"@@ -36,0 +36,1 @@\n+#include \"runtime\/arguments.hpp\"\n@@ -104,1 +105,1 @@\n-  if (UseCompactObjectHeaders || EnableValhalla) {\n+  if (UseCompactObjectHeaders || Arguments::is_valhalla_enabled()) {\n","filename":"src\/hotspot\/cpu\/aarch64\/c1_MacroAssembler_aarch64.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -52,0 +52,1 @@\n+#include \"runtime\/arguments.hpp\"\n@@ -5730,1 +5731,1 @@\n-    if (UseCompactObjectHeaders || EnableValhalla) {\n+    if (UseCompactObjectHeaders || Arguments::is_valhalla_enabled()) {\n","filename":"src\/hotspot\/cpu\/aarch64\/macroAssembler_aarch64.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -46,0 +46,1 @@\n+#include \"runtime\/arguments.hpp\"\n@@ -1186,1 +1187,1 @@\n-  if (EnableValhalla) {\n+  if (Arguments::is_valhalla_enabled()) {\n@@ -2034,1 +2035,1 @@\n-  if (EnableValhalla) {\n+  if (Arguments::is_valhalla_enabled()) {\n@@ -2785,1 +2786,1 @@\n-  if (!EnableValhalla) {\n+  if (!Arguments::is_valhalla_enabled()) {\n@@ -3039,1 +3040,1 @@\n-     if (!EnableValhalla) {\n+     if (!Arguments::is_valhalla_enabled()) {\n","filename":"src\/hotspot\/cpu\/aarch64\/templateTable_aarch64.cpp","additions":5,"deletions":4,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -36,0 +36,1 @@\n+#include \"runtime\/arguments.hpp\"\n@@ -86,1 +87,1 @@\n-  if (UseCompactObjectHeaders || EnableValhalla) {\n+  if (UseCompactObjectHeaders || Arguments::is_valhalla_enabled()) {\n","filename":"src\/hotspot\/cpu\/x86\/c1_MacroAssembler_x86.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -33,0 +33,1 @@\n+#include \"runtime\/arguments.hpp\"\n@@ -238,1 +239,1 @@\n-  if (EnableValhalla && InlineTypePassFieldsAsArgs) {\n+  if (Arguments::is_valhalla_enabled() && InlineTypePassFieldsAsArgs) {\n@@ -282,1 +283,1 @@\n-  if (EnableValhalla && InlineTypePassFieldsAsArgs) {\n+  if (Arguments::is_valhalla_enabled() && InlineTypePassFieldsAsArgs) {\n","filename":"src\/hotspot\/cpu\/x86\/gc\/g1\/g1BarrierSetAssembler_x86.cpp","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -49,0 +49,1 @@\n+#include \"runtime\/arguments.hpp\"\n@@ -3650,1 +3651,1 @@\n-    if (UseCompactObjectHeaders || EnableValhalla) {\n+    if (UseCompactObjectHeaders || Arguments::is_valhalla_enabled()) {\n","filename":"src\/hotspot\/cpu\/x86\/macroAssembler_x86.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -45,0 +45,1 @@\n+#include \"runtime\/arguments.hpp\"\n@@ -1134,1 +1135,1 @@\n-  if (EnableValhalla) {\n+  if (Arguments::is_valhalla_enabled()) {\n@@ -1960,1 +1961,1 @@\n-  if (EnableValhalla) {\n+  if (Arguments::is_valhalla_enabled()) {\n@@ -2682,1 +2683,1 @@\n-  if (!EnableValhalla) {\n+  if (!Arguments::is_valhalla_enabled()) {\n@@ -2960,1 +2961,1 @@\n-    if (!EnableValhalla) {\n+    if (!Arguments::is_valhalla_enabled()) {\n","filename":"src\/hotspot\/cpu\/x86\/templateTable_x86.cpp","additions":5,"deletions":4,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -45,0 +45,1 @@\n+#include \"runtime\/arguments.hpp\"\n@@ -1365,1 +1366,1 @@\n-  if (EnableValhalla && (stream()->cur_bc() == Bytecodes::_if_acmpeq || stream()->cur_bc() == Bytecodes::_if_acmpne)) {\n+  if (Arguments::is_valhalla_enabled() && (stream()->cur_bc() == Bytecodes::_if_acmpeq || stream()->cur_bc() == Bytecodes::_if_acmpne)) {\n@@ -2569,1 +2570,1 @@\n-    if (EnableValhalla) {\n+    if (Arguments::is_valhalla_enabled()) {\n@@ -4304,1 +4305,1 @@\n-  if (EnableValhalla && method()->intrinsic_id() == vmIntrinsics::_Object_init) {\n+  if (Arguments::is_valhalla_enabled() && method()->intrinsic_id() == vmIntrinsics::_Object_init) {\n","filename":"src\/hotspot\/share\/c1\/c1_GraphBuilder.cpp","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -45,0 +45,1 @@\n+#include \"runtime\/arguments.hpp\"\n@@ -3011,1 +3012,1 @@\n-  if (EnableValhalla && method()->intrinsic_id() == vmIntrinsics::_Object_init) {\n+  if (Arguments::is_valhalla_enabled() && method()->intrinsic_id() == vmIntrinsics::_Object_init) {\n","filename":"src\/hotspot\/share\/c1\/c1_LIRGenerator.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -46,0 +46,1 @@\n+#include \"runtime\/arguments.hpp\"\n@@ -303,1 +304,1 @@\n-    assert(!EnableValhalla || Universe::objectArrayKlass()->prototype_header() == markWord::prototype(), \"should be the same\");\n+    assert(!Arguments::is_valhalla_enabled() || Universe::objectArrayKlass()->prototype_header() == markWord::prototype(), \"should be the same\");\n@@ -478,1 +479,1 @@\n-    assert(!EnableValhalla || Universe::objectArrayKlass()->prototype_header() == markWord::prototype(), \"should be the same\");\n+    assert(!Arguments::is_valhalla_enabled() || Universe::objectArrayKlass()->prototype_header() == markWord::prototype(), \"should be the same\");\n@@ -744,1 +745,1 @@\n-  if (!src_obj->fast_no_hash_check() && (!(EnableValhalla && src_obj->mark().is_inline_type()))) {\n+  if (!src_obj->fast_no_hash_check() && (!(Arguments::is_valhalla_enabled() && src_obj->mark().is_inline_type()))) {\n@@ -748,1 +749,1 @@\n-    } else if (EnableValhalla) {\n+    } else if (Arguments::is_valhalla_enabled()) {\n","filename":"src\/hotspot\/share\/cds\/aotMappedHeapWriter.cpp","additions":5,"deletions":4,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -1394,1 +1394,1 @@\n-  if (CDSConfig::is_valhalla_preview()) {\n+  if (Arguments::is_valhalla_enabled()) {\n","filename":"src\/hotspot\/share\/cds\/aotMetaspace.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -150,1 +150,1 @@\n-    if (is_valhalla_preview()) {\n+    if (Arguments::is_valhalla_enabled()) {\n@@ -978,1 +978,1 @@\n-  if (is_valhalla_preview()) {\n+  if (Arguments::is_valhalla_enabled()) {\n","filename":"src\/hotspot\/share\/cds\/cdsConfig.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -29,1 +29,0 @@\n-#include \"runtime\/arguments.hpp\"\n@@ -210,4 +209,0 @@\n-  static bool is_valhalla_preview() {\n-    return Arguments::enable_preview() && EnableValhalla;\n-  }\n-\n","filename":"src\/hotspot\/share\/cds\/cdsConfig.hpp","additions":0,"deletions":5,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -316,1 +316,1 @@\n-  _has_valhalla_patched_classes = CDSConfig::is_valhalla_preview();\n+  _has_valhalla_patched_classes = Arguments::is_valhalla_enabled();\n@@ -1996,1 +1996,1 @@\n-    if (CDSConfig::is_valhalla_preview()) {\n+    if (Arguments::is_valhalla_enabled()) {\n@@ -2006,1 +2006,1 @@\n-      log_warning(cds)(\"This archive was %s with --enable-preview -XX:+EnableValhalla. It is \"\n+      log_warning(cds)(\"This archive was %s with --enable-preview. It is \"\n","filename":"src\/hotspot\/share\/cds\/filemap.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -104,1 +104,0 @@\n-  f(EnableValhalla) \\\n@@ -176,1 +175,1 @@\n-  bool   _has_valhalla_patched_classes; \/\/ Is this archived dumped with --enable-preview -XX:+EnableValhalla?\n+  bool   _has_valhalla_patched_classes; \/\/ Is this archived dumped with --enable-preview?\n","filename":"src\/hotspot\/share\/cds\/filemap.hpp","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2263,1 +2263,1 @@\n-    if (CDSConfig::is_valhalla_preview() && strcmp(klass_name, \"jdk\/internal\/module\/ArchivedModuleGraph\") == 0) {\n+    if (Arguments::is_valhalla_enabled() && strcmp(klass_name, \"jdk\/internal\/module\/ArchivedModuleGraph\") == 0) {\n","filename":"src\/hotspot\/share\/cds\/heapShared.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -41,0 +41,1 @@\n+#include \"runtime\/arguments.hpp\"\n@@ -729,1 +730,1 @@\n-  if (!EnableValhalla) {\n+  if (!Arguments::is_valhalla_enabled()) {\n","filename":"src\/hotspot\/share\/ci\/ciInstanceKlass.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -30,0 +30,1 @@\n+#include \"runtime\/arguments.hpp\"\n@@ -114,1 +115,1 @@\n-    return EnableValhalla && is_java_lang_Object();\n+    return Arguments::is_valhalla_enabled() && is_java_lang_Object();\n","filename":"src\/hotspot\/share\/ci\/ciKlass.hpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2268,1 +2268,1 @@\n-  if (EnableValhalla) {\n+  if (Arguments::is_valhalla_enabled()) {\n@@ -3772,1 +3772,1 @@\n-            if (EnableValhalla && tag == vmSymbols::tag_loadable_descriptors()) {\n+            if (Arguments::is_valhalla_enabled() && tag == vmSymbols::tag_loadable_descriptors()) {\n@@ -5528,1 +5528,1 @@\n-  if (EnableValhalla && !access_flags().is_identity_class() && !access_flags().is_interface()\n+  if (Arguments::is_valhalla_enabled() && !access_flags().is_identity_class() && !access_flags().is_interface()\n@@ -6127,1 +6127,1 @@\n-    if (EnableValhalla) {\n+    if (Arguments::is_valhalla_enabled()) {\n@@ -6142,2 +6142,2 @@\n-  \/\/ Determining is the class allows tearing or not (default is not)\n-  if (EnableValhalla && !_access_flags.is_identity_class()) {\n+  \/\/ Determining if the class allows tearing or not (default is not)\n+  if (Arguments::is_valhalla_enabled() && !_access_flags.is_identity_class()) {\n@@ -6196,1 +6196,1 @@\n-      if (EnableValhalla) {\n+      if (Arguments::is_valhalla_enabled()) {\n@@ -6241,1 +6241,1 @@\n-  if (EnableValhalla) {\n+  if (Arguments::is_valhalla_enabled()) {\n","filename":"src\/hotspot\/share\/classfile\/classFileParser.cpp","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -1121,1 +1121,1 @@\n-    if (!CDSConfig::is_valhalla_preview()) {\n+    if (!Arguments::is_valhalla_enabled()) {\n@@ -1126,1 +1126,1 @@\n-    if (CDSConfig::is_valhalla_preview() || !CDSConfig::is_dumping_static_archive()) {\n+    if (Arguments::is_valhalla_enabled() || !CDSConfig::is_dumping_static_archive()) {\n","filename":"src\/hotspot\/share\/classfile\/classLoader.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -86,0 +86,1 @@\n+#include \"runtime\/arguments.hpp\"\n@@ -1480,1 +1481,1 @@\n-      if (EnableValhalla && !safe_to_read_header(remaining_words)) {\n+      if (Arguments::is_valhalla_enabled() && !safe_to_read_header(remaining_words)) {\n@@ -2162,1 +2163,1 @@\n-  if (UseCompactObjectHeaders || (EnableValhalla && safe_to_read_header(remaining_words))) {\n+  if (UseCompactObjectHeaders || (Arguments::is_valhalla_enabled() && safe_to_read_header(remaining_words))) {\n","filename":"src\/hotspot\/share\/gc\/parallel\/psParallelCompact.cpp","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -36,0 +36,1 @@\n+#include \"runtime\/arguments.hpp\"\n@@ -383,1 +384,1 @@\n-    if (EnableValhalla) {\n+    if (Arguments::is_valhalla_enabled()) {\n","filename":"src\/hotspot\/share\/gc\/shared\/memAllocator.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -29,0 +29,1 @@\n+#include \"runtime\/arguments.hpp\"\n@@ -70,1 +71,1 @@\n-    if (EnableValhalla) {\n+    if (Arguments::is_valhalla_enabled()) {\n@@ -164,1 +165,1 @@\n-  if (UseCompactObjectHeaders || EnableValhalla) {\n+  if (UseCompactObjectHeaders || Arguments::is_valhalla_enabled()) {\n","filename":"src\/hotspot\/share\/gc\/z\/zObjArrayAllocator.cpp","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -44,0 +44,1 @@\n+#include \"runtime\/arguments.hpp\"\n@@ -159,1 +160,1 @@\n-        } else if (EnableValhalla) {\n+        } else if (Arguments::is_valhalla_enabled()) {\n","filename":"src\/hotspot\/share\/interpreter\/abstractInterpreter.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -59,1 +59,1 @@\n-    if (EnableValhalla && type == T_FLAT_ELEMENT) {\n+    if (type == T_FLAT_ELEMENT) {\n","filename":"src\/hotspot\/share\/oops\/arrayOop.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -375,1 +375,1 @@\n-  u2 identity_flag = (Arguments::enable_preview()) ? JVM_ACC_IDENTITY : 0;\n+  u2 identity_flag = (Arguments::is_valhalla_enabled()) ? JVM_ACC_IDENTITY : 0;\n","filename":"src\/hotspot\/share\/oops\/flatArrayKlass.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1102,1 +1102,1 @@\n-  if (EnableValhalla) {\n+  if (Arguments::is_valhalla_enabled()) {\n","filename":"src\/hotspot\/share\/oops\/instanceKlass.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -134,1 +134,1 @@\n-  \/\/ EnableValhalla: static prototype header bits (fast path instead of klass layout_helper)\n+  \/\/ prototype header bits (fast path instead of klass layout_helper)\n@@ -249,1 +249,1 @@\n-    return (!is_unlocked() || !has_no_hash() || (EnableValhalla && is_larval_state()));\n+    return (!is_unlocked() || !has_no_hash() || is_larval_state());\n","filename":"src\/hotspot\/share\/oops\/markWord.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -416,1 +416,1 @@\n-  if (!method_holder()->is_rewritten() || CDSConfig::is_valhalla_preview()) {\n+  if (!method_holder()->is_rewritten() || Arguments::is_valhalla_enabled()) {\n","filename":"src\/hotspot\/share\/oops\/method.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -379,1 +379,1 @@\n-  int identity_flag = (Arguments::enable_preview()) ? JVM_ACC_IDENTITY : 0;\n+  int identity_flag = (Arguments::is_valhalla_enabled()) ? JVM_ACC_IDENTITY : 0;\n","filename":"src\/hotspot\/share\/oops\/objArrayKlass.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -40,0 +40,1 @@\n+#include \"runtime\/arguments.hpp\"\n@@ -86,1 +87,1 @@\n-  if (UseCompactObjectHeaders || EnableValhalla) {\n+  if (UseCompactObjectHeaders || Arguments::is_valhalla_enabled()) {\n","filename":"src\/hotspot\/share\/oops\/oop.inline.hpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -79,1 +79,1 @@\n-  u2 identity_flag = (Arguments::enable_preview()) ? JVM_ACC_IDENTITY : 0;\n+  u2 identity_flag = (Arguments::is_valhalla_enabled()) ? JVM_ACC_IDENTITY : 0;\n","filename":"src\/hotspot\/share\/oops\/typeArrayKlass.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -47,0 +47,1 @@\n+#include \"runtime\/arguments.hpp\"\n@@ -1126,1 +1127,1 @@\n-  if (EnableValhalla && (bc == Bytecodes::_if_acmpeq || bc == Bytecodes::_if_acmpne)) {\n+  if (Arguments::is_valhalla_enabled() && (bc == Bytecodes::_if_acmpeq || bc == Bytecodes::_if_acmpne)) {\n@@ -1942,1 +1943,1 @@\n-  if (UseCompactObjectHeaders || EnableValhalla) {\n+  if (UseCompactObjectHeaders || Arguments::is_valhalla_enabled()) {\n@@ -1946,1 +1947,1 @@\n-    if (EnableValhalla) {\n+    if (Arguments::is_valhalla_enabled()) {\n","filename":"src\/hotspot\/share\/opto\/callnode.cpp","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -33,0 +33,1 @@\n+#include \"runtime\/arguments.hpp\"\n@@ -263,1 +264,1 @@\n-    return EnableValhalla && _type->isa_instptr() && _type->is_instptr()->can_be_inline_type();\n+    return Arguments::is_valhalla_enabled() && _type->isa_instptr() && _type->is_instptr()->can_be_inline_type();\n","filename":"src\/hotspot\/share\/opto\/cfgnode.hpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -85,0 +85,1 @@\n+#include \"runtime\/arguments.hpp\"\n@@ -5581,1 +5582,1 @@\n-  if (!EnableValhalla || ta == nullptr || tb == nullptr ||\n+  if (!Arguments::is_valhalla_enabled() || ta == nullptr || tb == nullptr ||\n","filename":"src\/hotspot\/share\/opto\/compile.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -52,0 +52,1 @@\n+#include \"runtime\/arguments.hpp\"\n@@ -1924,1 +1925,1 @@\n-  if (EnableValhalla) {\n+  if (Arguments::is_valhalla_enabled()) {\n@@ -3745,1 +3746,1 @@\n-  if (EnableValhalla && (not_inline || not_flat_in_array)) {\n+  if (Arguments::is_valhalla_enabled() && (not_inline || not_flat_in_array)) {\n","filename":"src\/hotspot\/share\/opto\/graphKit.cpp","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -57,0 +57,1 @@\n+#include \"runtime\/arguments.hpp\"\n@@ -2423,1 +2424,1 @@\n-      if (EnableValhalla) {\n+      if (Arguments::is_valhalla_enabled()) {\n","filename":"src\/hotspot\/share\/opto\/memnode.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -42,0 +42,1 @@\n+#include \"runtime\/arguments.hpp\"\n@@ -1288,1 +1289,1 @@\n-  if (EnableValhalla && method()->intrinsic_id() == vmIntrinsics::_Object_init) {\n+  if (Arguments::is_valhalla_enabled() && method()->intrinsic_id() == vmIntrinsics::_Object_init) {\n","filename":"src\/hotspot\/share\/opto\/parse1.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -48,0 +48,1 @@\n+#include \"runtime\/arguments.hpp\"\n@@ -2106,1 +2107,1 @@\n-  if (!EnableValhalla) {\n+  if (!Arguments::is_valhalla_enabled()) {\n","filename":"src\/hotspot\/share\/opto\/parse2.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -41,0 +41,1 @@\n+#include \"runtime\/arguments.hpp\"\n@@ -948,1 +949,1 @@\n-    assert(EnableValhalla, \"unexpected double null check\");\n+    assert(Arguments::is_valhalla_enabled(), \"unexpected double null check\");\n","filename":"src\/hotspot\/share\/opto\/subnode.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -764,1 +764,1 @@\n-  if (EnableValhalla && obj->klass()->is_inline_klass()) {\n+  if (Arguments::is_valhalla_enabled() && obj->klass()->is_inline_klass()) {\n@@ -3380,1 +3380,1 @@\n-  return EnableValhalla ? JNI_TRUE : JNI_FALSE;\n+  return Arguments::is_valhalla_enabled() ? JNI_TRUE : JNI_FALSE;\n","filename":"src\/hotspot\/share\/prims\/jvm.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -552,0 +552,1 @@\n+  { \"EnableValhalla\",               JDK_Version::jdk(25), JDK_Version::jdk(26), JDK_Version::undefined() },\n@@ -2118,2 +2119,2 @@\n-  \/\/ If --enable-preview and EnableValhalla is true, modules may have preview mode resources.\n-  bool enable_valhalla_preview = enable_preview() && EnableValhalla;\n+  \/\/ If --enable-preview is true, modules may have preview mode resources.\n+  bool enable_valhalla_preview = is_valhalla_enabled();\n@@ -2462,4 +2463,0 @@\n-      \/\/ --enable-preview enables Valhalla, EnableValhalla VM option will eventually be removed before integration\n-      if (FLAG_SET_CMDLINE(EnableValhalla, true) != JVMFlag::SUCCESS) {\n-        return JNI_EINVAL;\n-      }\n@@ -4008,1 +4005,1 @@\n-  if (!EnableValhalla || (is_interpreter_only() && !CDSConfig::is_dumping_archive() && !UseSharedSpaces)) {\n+  if (!is_valhalla_enabled() || (is_interpreter_only() && !CDSConfig::is_dumping_archive() && !UseSharedSpaces)) {\n","filename":"src\/hotspot\/share\/runtime\/arguments.cpp","additions":4,"deletions":7,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -521,0 +521,4 @@\n+  static bool is_valhalla_enabled() {\n+    \/\/ Valhalla is a feature opted-in by --enable-preview\n+    return enable_preview();\n+  }\n","filename":"src\/hotspot\/share\/runtime\/arguments.hpp","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1979,3 +1979,0 @@\n-  product(bool, EnableValhalla, true,                                       \\\n-          \"Enable experimental Valhalla features\")                          \\\n-                                                                            \\\n","filename":"src\/hotspot\/share\/runtime\/globals.hpp","additions":0,"deletions":3,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -34,0 +34,1 @@\n+#include \"runtime\/arguments.hpp\"\n@@ -293,1 +294,1 @@\n-  if (EnableValhalla) {\n+  if (Arguments::is_valhalla_enabled()) {\n","filename":"src\/hotspot\/share\/runtime\/jniHandles.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -654,0 +654,4 @@\n+tier1_serviceability_no_valhalla = \\\n+  :tier1_serviceability \\\n+  -serviceability\/jvmti\/valhalla\n+\n","filename":"test\/hotspot\/jtreg\/TEST.groups","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -39,1 +39,3 @@\n- * @run main\/othervm -Xint -XX:+UseNullableValueFlattening -XX:+UseArrayFlattening -XX:+UseFieldFlattening -XX:+PrintInlineLayout runtime.valhalla.inlinetypes.UnsafeTest\n+ * @run main\/othervm -Xint -XX:+UnlockDiagnosticVMOptions\n+                     -XX:+UseNullableValueFlattening -XX:+UseArrayFlattening -XX:+UseFieldFlattening\n+                     -XX:+PrintInlineLayout runtime.valhalla.inlinetypes.UnsafeTest\n","filename":"test\/hotspot\/jtreg\/runtime\/valhalla\/inlinetypes\/UnsafeTest.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2021, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2021, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -30,1 +30,1 @@\n- * @run main\/othervm\/native -agentlib:FieldAccessModify -XX:+EnableValhalla FieldAccessModify\n+ * @run main\/othervm\/native -agentlib:FieldAccessModify FieldAccessModify\n","filename":"test\/hotspot\/jtreg\/serviceability\/jvmti\/valhalla\/FieldAccessModify\/FieldAccessModify.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -30,1 +30,1 @@\n- * @run main\/othervm\/native -agentlib:ValueForceEarlyReturn -XX:+EnableValhalla ValueForceEarlyReturn\n+ * @run main\/othervm\/native -agentlib:ValueForceEarlyReturn ValueForceEarlyReturn\n","filename":"test\/hotspot\/jtreg\/serviceability\/jvmti\/valhalla\/ForceEarlyReturn\/ValueForceEarlyReturn.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -30,1 +30,1 @@\n- * @run main\/othervm\/native -agentlib:ValueGetClassFields -XX:+EnableValhalla ValueGetClassFields\n+ * @run main\/othervm\/native -agentlib:ValueGetClassFields ValueGetClassFields\n","filename":"test\/hotspot\/jtreg\/serviceability\/jvmti\/valhalla\/GetClassFields\/ValueGetClassFields.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -30,1 +30,1 @@\n- * @run main\/othervm\/native -agentlib:ValueGetObjectMonitorUsage -XX:+EnableValhalla ValueGetObjectMonitorUsage\n+ * @run main\/othervm\/native -agentlib:ValueGetObjectMonitorUsage ValueGetObjectMonitorUsage\n","filename":"test\/hotspot\/jtreg\/serviceability\/jvmti\/valhalla\/GetObjectMonitorUsage\/ValueGetObjectMonitorUsage.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -30,1 +30,1 @@\n- * @run main\/othervm\/native -agentlib:ValueGetObjectSize -XX:+EnableValhalla ValueGetObjectSize\n+ * @run main\/othervm\/native -agentlib:ValueGetObjectSize ValueGetObjectSize\n","filename":"test\/hotspot\/jtreg\/serviceability\/jvmti\/valhalla\/GetObjectSize\/ValueGetObjectSize.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -30,1 +30,1 @@\n- * @run main\/othervm\/native -agentlib:ValueGetSetLocal -XX:+EnableValhalla ValueGetSetLocal\n+ * @run main\/othervm\/native -agentlib:ValueGetSetLocal ValueGetSetLocal\n","filename":"test\/hotspot\/jtreg\/serviceability\/jvmti\/valhalla\/GetSetLocal\/ValueGetSetLocal.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+ * @requires vm.debug\n@@ -152,3 +153,3 @@\n-            LingeredApp.startApp(theApp, \"--enable-preview\",\n-                                 \"-XX:+UnlockDiagnosticVMOptions\",\n-                                 \"-XX:+PrintInlineLayout\", \"-XX:+PrintFlatArrayLayout\",\n+            \/\/ -XX:+PrintInlineLayout is debug-only arg\n+            LingeredApp.startApp(theApp, \"--enable-preview\", \"-XX:+UnlockDiagnosticVMOptions\",\n+                                \"-XX:+PrintInlineLayout\", \"-XX:+PrintFlatArrayLayout\",\n","filename":"test\/hotspot\/jtreg\/serviceability\/jvmti\/valhalla\/HeapDump\/HeapDump.java","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -48,0 +48,4 @@\n+tier1_part1_no_valhalla = \\\n+    :tier1_part1 \\\n+    -:jdk_valhalla\n+\n@@ -51,0 +55,4 @@\n+tier1_part2_no_valhalla = \\\n+    :tier1_part2 \\\n+    -:jdk_valhalla\n+\n@@ -61,0 +69,8 @@\n+tier1_part3_no_valhalla = \\\n+    :tier1_part3 \\\n+    -:jdk_valhalla\n+\n+tier1_no_valhalla = \\\n+    :tier1 \\\n+    -:jdk_valhalla\n+\n@@ -148,1 +164,2 @@\n-    java\/lang\/instrument\/valhalla\n+    java\/lang\/instrument\/valhalla \\\n+    java\/lang\/reflect\/valhalla\n","filename":"test\/jdk\/TEST.groups","additions":18,"deletions":1,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -1,1 +1,1 @@\n-#  Copyright (c) 2015, 2024, Oracle and\/or its affiliates. All rights reserved.\n+#  Copyright (c) 2015, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -91,0 +91,4 @@\n+tier1_no_valhalla = \\\n+    :tier1 \\\n+    -tools\/javac\/valhalla\n+\n","filename":"test\/langtools\/TEST.groups","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"}]}