{"files":[{"patch":"@@ -874,0 +874,1 @@\n+int java_lang_Class::_is_identity_offset;\n@@ -1101,0 +1102,1 @@\n+  set_is_identity(mirror(), k->is_array_klass() || k->is_identity_class());\n@@ -1415,0 +1417,4 @@\n+void java_lang_Class::set_is_identity(oop java_class, bool value) {\n+  assert(_is_identity_offset != 0, \"must be set\");\n+  java_class->bool_field_put(_is_identity_offset, value);\n+}\n@@ -1577,1 +1583,2 @@\n-  macro(_is_primitive_offset,        k, \"primitive\",           bool_signature,         false);\n+  macro(_is_primitive_offset,        k, \"primitive\",           bool_signature,         false); \\\n+  macro(_is_identity_offset,         k, \"identity\",            bool_signature,         false);\n","filename":"src\/hotspot\/share\/classfile\/javaClasses.cpp","additions":8,"deletions":1,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -264,0 +264,1 @@\n+  static int _is_identity_offset;\n@@ -278,0 +279,1 @@\n+  static void set_is_identity(oop java_class, bool value);\n","filename":"src\/hotspot\/share\/classfile\/javaClasses.hpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -247,1 +247,1 @@\n-    private Class(ClassLoader loader, Class<?> arrayComponentType, char mods, ProtectionDomain pd, boolean isPrim, char flags) {\n+    private Class(ClassLoader loader, Class<?> arrayComponentType, char mods, ProtectionDomain pd, boolean isPrim, boolean isIdentity, char flags) {\n@@ -256,0 +256,1 @@\n+        identity = isIdentity;\n@@ -645,7 +646,1 @@\n-        if (isPrimitive()) {\n-            return false;\n-        } else if (PreviewFeatures.isEnabled()) {\n-           return isArray() || Modifier.isIdentity(modifiers);\n-        } else {\n-            return !isInterface();\n-        }\n+        return identity;\n@@ -1086,1 +1081,2 @@\n-    private final transient boolean primitive;  \/\/ Set by the VM if the Class is a primitive type.\n+    private final transient boolean primitive;  \/\/ Set by the VM if the Class is a primitive type\n+    private final transient boolean identity;   \/\/ Set by the VM if the Class is an identity class\n","filename":"src\/java.base\/share\/classes\/java\/lang\/Class.java","additions":5,"deletions":9,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -152,1 +152,1 @@\n-                                                 ProtectionDomain.class, boolean.class, char.class);\n+                                                 ProtectionDomain.class, boolean.class, boolean.class, char.class);\n","filename":"test\/jdk\/java\/lang\/reflect\/AccessibleObject\/ModuleSetAccessibleTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -198,1 +198,1 @@\n-                                                 ProtectionDomain.class, boolean.class, char.class);\n+                                                 ProtectionDomain.class, boolean.class, boolean.class, char.class);\n","filename":"test\/jdk\/java\/lang\/reflect\/AccessibleObject\/TrySetAccessibleTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}