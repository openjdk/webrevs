{"files":[{"patch":"@@ -5117,1 +5117,1 @@\n-  return klass()->as_flat_array_klass()->layout_helper();\n+  return exact_klass()->as_flat_array_klass()->layout_helper();\n@@ -5121,1 +5121,1 @@\n-  return klass()->as_flat_array_klass()->element_byte_size();\n+  return exact_klass()->as_flat_array_klass()->element_byte_size();\n@@ -5125,1 +5125,1 @@\n-  return klass()->as_flat_array_klass()->log2_element_size();\n+  return exact_klass()->as_flat_array_klass()->log2_element_size();\n@@ -5671,1 +5671,1 @@\n-  if (is_flat() && offset != Type::OffsetBot && offset != Type::OffsetTop) {\n+  if (is_flat() && klass_is_exact() && offset != Type::OffsetBot && offset != Type::OffsetTop) {\n@@ -6688,8 +6688,1 @@\n-  if (is_flat() && el->is_inlinetypeptr()) {\n-    \/\/ Klass is required by TypeAryPtr::flat_layout_helper() and others\n-    if (el->inline_klass() != nullptr) {\n-      \/\/ TODO 8350865 We assume atomic if the atomic layout is available, use is_atomic() here\n-      bool atomic = is_null_free() ? el->inline_klass()->has_atomic_layout() : el->inline_klass()->has_nullable_atomic_layout();\n-      k_ary = ciArrayKlass::make(el->inline_klass(), is_null_free(), atomic, true);\n-    }\n-  } else if ((tinst = el->isa_instptr()) != nullptr) {\n+  if ((tinst = el->isa_instptr()) != nullptr) {\n","filename":"src\/hotspot\/share\/opto\/type.cpp","additions":5,"deletions":12,"binary":false,"changes":17,"status":"modified"}]}