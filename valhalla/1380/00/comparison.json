{"files":[{"patch":"@@ -438,1 +438,1 @@\n-  if (vk->flat_array()) {\n+  if (vk->flat_array() && vk->has_non_atomic_layout()) {\n@@ -456,3 +456,1 @@\n-  if (UseArrayFlattening && vk->has_atomic_layout()) {\n-    array = oopFactory::new_flatArray(vk, len, LayoutKind::ATOMIC_FLAT, CHECK_NULL);\n-  } else if (UseArrayFlattening && vk->is_naturally_atomic()) {\n+  if (UseArrayFlattening && vk->is_naturally_atomic() && vk->has_non_atomic_layout()) {\n@@ -460,0 +458,2 @@\n+  } else if (UseArrayFlattening && vk->has_atomic_layout()) {\n+    array = oopFactory::new_flatArray(vk, len, LayoutKind::ATOMIC_FLAT, CHECK_NULL);\n","filename":"src\/hotspot\/share\/prims\/jvm.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"}]}