{"files":[{"patch":"@@ -2821,1 +2821,1 @@\n-  ObjectSynchronizer::jni_enter(obj, thread);\n+  ObjectSynchronizer::jni_enter(obj, CHECK_(JNI_ERR));\n","filename":"src\/hotspot\/share\/prims\/jni.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -37,0 +37,3 @@\n+    static int returnValue = 999;\n+    static final int JNI_ERR = -1;  \/\/ from jni.h\n+\n@@ -63,0 +66,1 @@\n+        Asserts.assertEQ(returnValue, JNI_ERR);\n","filename":"test\/hotspot\/jtreg\/runtime\/valhalla\/inlinetypes\/InlineWithJni.java","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -28,1 +28,4 @@\n-    (*env)->MonitorEnter(env, obj);\n+    int ret = (*env)->MonitorEnter(env, obj);\n+    jclass class = (*env)->GetObjectClass(env, obj);\n+    jfieldID fieldId = (*env)->GetStaticFieldID(env, class, \"returnValue\", \"I\");\n+    (*env)->SetStaticIntField(env, class, fieldId, ret);\n","filename":"test\/hotspot\/jtreg\/runtime\/valhalla\/inlinetypes\/libInlineWithJni.c","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"}]}