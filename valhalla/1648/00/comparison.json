{"files":[{"patch":"@@ -226,1 +226,0 @@\n-serviceability\/jvmti\/valhalla\/GetSetLocal\/ValueGetSetLocal.java 8367590 generic-all\n","filename":"test\/hotspot\/jtreg\/ProblemList.txt","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -65,1 +65,3 @@\n-            if (!nTestLocals(Thread.currentThread())) {\n+            \/\/ SetLocalObject can only set locals for top frame of virtual threads.\n+            boolean testSetLocal = !Thread.currentThread().isVirtual();\n+            if (!nTestLocals(Thread.currentThread(), testSetLocal)) {\n@@ -69,1 +71,1 @@\n-            if (!Objects.equals(obj3, obj1)) {\n+            if (testSetLocal && !Objects.equals(obj3, obj1)) {\n@@ -89,1 +91,1 @@\n-    private static native boolean nTestLocals(Thread thread);\n+    private static native boolean nTestLocals(Thread thread, boolean testSetLocal);\n","filename":"test\/hotspot\/jtreg\/serviceability\/jvmti\/valhalla\/GetSetLocal\/ValueGetSetLocal.java","additions":5,"deletions":3,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -97,1 +97,1 @@\n-Java_ValueGetSetLocal_nTestLocals(JNIEnv *jni, jclass thisClass, jthread thread) {\n+Java_ValueGetSetLocal_nTestLocals(JNIEnv *jni, jclass thisClass, jthread thread, jboolean testSetLocal) {\n@@ -118,2 +118,4 @@\n-  \/\/ set obj3 = obj1\n-  set_local(thread, depth, 3, obj1);\n+  if (testSetLocal) {\n+    \/\/ set obj3 = obj1\n+    set_local(thread, depth, 3, obj1);\n+  }\n","filename":"test\/hotspot\/jtreg\/serviceability\/jvmti\/valhalla\/GetSetLocal\/libValueGetSetLocal.cpp","additions":5,"deletions":3,"binary":false,"changes":8,"status":"modified"}]}