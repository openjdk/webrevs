{"files":[{"patch":"@@ -439,1 +439,9 @@\n-        factory = insertArguments(factory, 0, componentType, flags, values.length, values, 0);\n+        Object src = values;\n+        if (componentType.baseClass().isPrimitive()) {\n+            \/\/ unbox values\n+            src = Array.newInstance(componentType.baseClass(), values.length);\n+            for (int i = 0; i < values.length; i++) {\n+                Array.set(src, i, values[i]);\n+            }\n+        }\n+        factory = insertArguments(factory, 0, componentType, flags, values.length, src, 0);\n","filename":"src\/java.base\/share\/classes\/java\/lang\/runtime\/ArrayCreation.java","additions":9,"deletions":1,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -26,1 +26,5 @@\n-   public static Method constantFilled3:\"()[Ljava\/lang\/String;\" stack 1 {\n+    const #1 = Dynamic REF_invokeStatic:java\/lang\/invoke\/ConstantBootstraps.primitiveClass\n+                   :\"(Ljava\/lang\/invoke\/MethodHandles$Lookup;Ljava\/lang\/String;Ljava\/lang\/Class;)Ljava\/lang\/Class;\"\n+                   :I:\"Ljava\/lang\/Class;\";\n+\n+    public static Method constantFilled3S:\"()[Ljava\/lang\/String;\" stack 1 {\n@@ -35,1 +39,10 @@\n-    public static Method constantFilled0:\"()[Ljava\/lang\/String;\" stack 1 {\n+    public static Method constantFilled3I:\"()[I\" stack 1 {\n+         invokedynamic\n+            InvokeDynamic REF_invokeStatic:java\/lang\/runtime\/ArrayCreation.constantFilled\n+                :\"(Ljava\/lang\/invoke\/MethodHandles$Lookup;Ljava\/lang\/String;Ljava\/lang\/invoke\/MethodType;Ljava\/lang\/reflect\/RuntimeType;IILjava\/lang\/Object;)Ljava\/lang\/invoke\/CallSite;\"\n+                :_:\"()[I\"\n+                #1, int 0, int 3, int 3;\n+         areturn;\n+     }\n+\n+    public static Method constantFilled0S:\"()[Ljava\/lang\/String;\" stack 1 {\n@@ -44,1 +57,10 @@\n-    public static Method constantFilledN:\"(I)[Ljava\/lang\/String;\" stack 1 {\n+    public static Method constantFilled0I:\"()[I\" stack 1 {\n+        invokedynamic\n+            InvokeDynamic REF_invokeStatic:java\/lang\/runtime\/ArrayCreation.constantFilled\n+                :\"(Ljava\/lang\/invoke\/MethodHandles$Lookup;Ljava\/lang\/String;Ljava\/lang\/invoke\/MethodType;Ljava\/lang\/reflect\/RuntimeType;IILjava\/lang\/Object;)Ljava\/lang\/invoke\/CallSite;\"\n+                :_:\"()[I\"\n+                #1, int 0, int 0, int 3;\n+        areturn;\n+    }\n+\n+    public static Method constantFilledNS:\"(I)[Ljava\/lang\/String;\" stack 1 {\n@@ -54,1 +76,11 @@\n-    public static Method dynamicFilled3:\"(Ljava\/lang\/String;)[Ljava\/lang\/String;\" stack 1 {\n+    public static Method constantFilledNI:\"(I)[I\" stack 1 {\n+        iload_0;\n+        invokedynamic\n+            InvokeDynamic REF_invokeStatic:java\/lang\/runtime\/ArrayCreation.constantFilled\n+                :\"(Ljava\/lang\/invoke\/MethodHandles$Lookup;Ljava\/lang\/String;Ljava\/lang\/invoke\/MethodType;Ljava\/lang\/reflect\/RuntimeType;IILjava\/lang\/Object;)Ljava\/lang\/invoke\/CallSite;\"\n+                :_:\"(I)[I\"\n+                #1, int 0, int -1, int 3;\n+        areturn;\n+    }\n+\n+    public static Method dynamicFilled3S:\"(Ljava\/lang\/String;)[Ljava\/lang\/String;\" stack 1 {\n@@ -64,1 +96,11 @@\n-    public static Method dynamicFilled0:\"(Ljava\/lang\/String;)[Ljava\/lang\/String;\" stack 1 {\n+    public static Method dynamicFilled3I:\"(I)[I\" stack 1 {\n+        iload_0;\n+        invokedynamic\n+            InvokeDynamic REF_invokeStatic:java\/lang\/runtime\/ArrayCreation.dynamicFilled\n+                :\"(Ljava\/lang\/invoke\/MethodHandles$Lookup;Ljava\/lang\/String;Ljava\/lang\/invoke\/MethodType;Ljava\/lang\/reflect\/RuntimeType;II)Ljava\/lang\/invoke\/CallSite;\"\n+                :_:\"(I)[I\"\n+                #1, int 0, int 3;\n+        areturn;\n+    }\n+\n+    public static Method dynamicFilled0S:\"(Ljava\/lang\/String;)[Ljava\/lang\/String;\" stack 1 {\n@@ -74,1 +116,11 @@\n-    public static Method dynamicFilledN:\"(ILjava\/lang\/String;)[Ljava\/lang\/String;\" stack 2 {\n+    public static Method dynamicFilled0I:\"(I)[I\" stack 1 {\n+        iload_0;\n+        invokedynamic\n+            InvokeDynamic REF_invokeStatic:java\/lang\/runtime\/ArrayCreation.dynamicFilled\n+                :\"(Ljava\/lang\/invoke\/MethodHandles$Lookup;Ljava\/lang\/String;Ljava\/lang\/invoke\/MethodType;Ljava\/lang\/reflect\/RuntimeType;II)Ljava\/lang\/invoke\/CallSite;\"\n+                :_:\"(I)[I\"\n+                #1, int 0, int 0;\n+        areturn;\n+    }\n+\n+    public static Method dynamicFilledNS:\"(ILjava\/lang\/String;)[Ljava\/lang\/String;\" stack 2 {\n@@ -85,1 +137,12 @@\n-    public static Method computed3:\"(Ljava\/util\/function\/IntFunction;)[Ljava\/lang\/String;\" stack 1 {\n+    public static Method dynamicFilledNI:\"(II)[I\" stack 2 {\n+        iload_0;\n+        iload_1;\n+        invokedynamic\n+            InvokeDynamic REF_invokeStatic:java\/lang\/runtime\/ArrayCreation.dynamicFilled\n+                :\"(Ljava\/lang\/invoke\/MethodHandles$Lookup;Ljava\/lang\/String;Ljava\/lang\/invoke\/MethodType;Ljava\/lang\/reflect\/RuntimeType;II)Ljava\/lang\/invoke\/CallSite;\"\n+                :_:\"(II)[I\"\n+                #1, int 0, int -1;\n+        areturn;\n+    }\n+\n+    public static Method computed3S:\"(Ljava\/util\/function\/IntFunction;)[Ljava\/lang\/String;\" stack 1 {\n@@ -95,1 +158,11 @@\n-    public static Method computed0:\"(Ljava\/util\/function\/IntFunction;)[Ljava\/lang\/String;\" stack 1 {\n+    public static Method computed3I:\"(Ljava\/util\/function\/IntFunction;)[I\" stack 1 {\n+        aload_0;\n+        invokedynamic\n+            InvokeDynamic REF_invokeStatic:java\/lang\/runtime\/ArrayCreation.computed\n+                :\"(Ljava\/lang\/invoke\/MethodHandles$Lookup;Ljava\/lang\/String;Ljava\/lang\/invoke\/MethodType;Ljava\/lang\/reflect\/RuntimeType;II)Ljava\/lang\/invoke\/CallSite;\"\n+                :_:\"(Ljava\/util\/function\/IntFunction;)[I\"\n+                #1, int 0, int 3;\n+        areturn;\n+    }\n+\n+    public static Method computed0S:\"(Ljava\/util\/function\/IntFunction;)[Ljava\/lang\/String;\" stack 1 {\n@@ -105,1 +178,11 @@\n-    public static Method computedN:\"(ILjava\/util\/function\/IntFunction;)[Ljava\/lang\/String;\" stack 2 {\n+    public static Method computed0I:\"(Ljava\/util\/function\/IntFunction;)[I\" stack 1 {\n+        aload_0;\n+        invokedynamic\n+            InvokeDynamic REF_invokeStatic:java\/lang\/runtime\/ArrayCreation.computed\n+                :\"(Ljava\/lang\/invoke\/MethodHandles$Lookup;Ljava\/lang\/String;Ljava\/lang\/invoke\/MethodType;Ljava\/lang\/reflect\/RuntimeType;II)Ljava\/lang\/invoke\/CallSite;\"\n+                :_:\"(Ljava\/util\/function\/IntFunction;)[I\"\n+                #1, int 0, int 0;\n+        areturn;\n+    }\n+\n+    public static Method computedNS:\"(ILjava\/util\/function\/IntFunction;)[Ljava\/lang\/String;\" stack 2 {\n@@ -116,1 +199,12 @@\n-    public static Method copied3:\"([Ljava\/lang\/Object;)[Ljava\/lang\/String;\" stack 1 {\n+    public static Method computedNI:\"(ILjava\/util\/function\/IntFunction;)[I\" stack 2 {\n+        iload_0;\n+        aload_1;\n+        invokedynamic\n+            InvokeDynamic REF_invokeStatic:java\/lang\/runtime\/ArrayCreation.computed\n+                :\"(Ljava\/lang\/invoke\/MethodHandles$Lookup;Ljava\/lang\/String;Ljava\/lang\/invoke\/MethodType;Ljava\/lang\/reflect\/RuntimeType;II)Ljava\/lang\/invoke\/CallSite;\"\n+                :_:\"(ILjava\/util\/function\/IntFunction;)[I\"\n+                #1, int 0, int -1;\n+        areturn;\n+    }\n+\n+    public static Method copied3S:\"([Ljava\/lang\/Object;)[Ljava\/lang\/String;\" stack 1 {\n@@ -126,1 +220,11 @@\n-    public static Method copied0:\"([Ljava\/lang\/Object;)[Ljava\/lang\/String;\" stack 1 {\n+    public static Method copied3I:\"([I)[I\" stack 1 {\n+        aload_0;\n+        invokedynamic\n+            InvokeDynamic REF_invokeStatic:java\/lang\/runtime\/ArrayCreation.copied\n+                :\"(Ljava\/lang\/invoke\/MethodHandles$Lookup;Ljava\/lang\/String;Ljava\/lang\/invoke\/MethodType;Ljava\/lang\/reflect\/RuntimeType;II)Ljava\/lang\/invoke\/CallSite;\"\n+                :_:\"([I)[I\"\n+                #1, int 0, int 3;\n+        areturn;\n+    }\n+\n+    public static Method copied0S:\"([Ljava\/lang\/Object;)[Ljava\/lang\/String;\" stack 1 {\n@@ -136,1 +240,11 @@\n-    public static Method copiedN:\"(I[Ljava\/lang\/Object;)[Ljava\/lang\/String;\" stack 2 {\n+    public static Method copied0I:\"([I)[I\" stack 1 {\n+        aload_0;\n+        invokedynamic\n+            InvokeDynamic REF_invokeStatic:java\/lang\/runtime\/ArrayCreation.copied\n+                :\"(Ljava\/lang\/invoke\/MethodHandles$Lookup;Ljava\/lang\/String;Ljava\/lang\/invoke\/MethodType;Ljava\/lang\/reflect\/RuntimeType;II)Ljava\/lang\/invoke\/CallSite;\"\n+                :_:\"([I)[I\"\n+                #1, int 0, int 0;\n+        areturn;\n+    }\n+\n+    public static Method copiedNS:\"(I[Ljava\/lang\/Object;)[Ljava\/lang\/String;\" stack 2 {\n@@ -147,1 +261,12 @@\n-    public static Method offsetCopied3:\"([Ljava\/lang\/Object;I)[Ljava\/lang\/String;\" stack 2 {\n+    public static Method copiedNI:\"(I[I)[I\" stack 2 {\n+        iload_0;\n+        aload_1;\n+        invokedynamic\n+            InvokeDynamic REF_invokeStatic:java\/lang\/runtime\/ArrayCreation.copied\n+                :\"(Ljava\/lang\/invoke\/MethodHandles$Lookup;Ljava\/lang\/String;Ljava\/lang\/invoke\/MethodType;Ljava\/lang\/reflect\/RuntimeType;II)Ljava\/lang\/invoke\/CallSite;\"\n+                :_:\"(I[I)[I\"\n+                #1, int 0, int -1;\n+        areturn;\n+    }\n+\n+    public static Method offsetCopied3S:\"([Ljava\/lang\/Object;I)[Ljava\/lang\/String;\" stack 2 {\n@@ -158,1 +283,12 @@\n-    public static Method offsetCopied0:\"([Ljava\/lang\/Object;I)[Ljava\/lang\/String;\" stack 2 {\n+    public static Method offsetCopied3I:\"([II)[I\" stack 2 {\n+        aload_0;\n+        iload_1;\n+        invokedynamic\n+            InvokeDynamic REF_invokeStatic:java\/lang\/runtime\/ArrayCreation.offsetCopied\n+                :\"(Ljava\/lang\/invoke\/MethodHandles$Lookup;Ljava\/lang\/String;Ljava\/lang\/invoke\/MethodType;Ljava\/lang\/reflect\/RuntimeType;II)Ljava\/lang\/invoke\/CallSite;\"\n+                :_:\"([II)[I\"\n+                #1, int 0, int 3;\n+        areturn;\n+    }\n+\n+    public static Method offsetCopied0S:\"([Ljava\/lang\/Object;I)[Ljava\/lang\/String;\" stack 2 {\n@@ -169,1 +305,12 @@\n-    public static Method offsetCopiedN:\"(I[Ljava\/lang\/Object;I)[Ljava\/lang\/String;\" stack 3 {\n+    public static Method offsetCopied0I:\"([II)[I\" stack 2 {\n+        aload_0;\n+        iload_1;\n+        invokedynamic\n+            InvokeDynamic REF_invokeStatic:java\/lang\/runtime\/ArrayCreation.offsetCopied\n+                :\"(Ljava\/lang\/invoke\/MethodHandles$Lookup;Ljava\/lang\/String;Ljava\/lang\/invoke\/MethodType;Ljava\/lang\/reflect\/RuntimeType;II)Ljava\/lang\/invoke\/CallSite;\"\n+                :_:\"([II)[I\"\n+                #1, int 0, int 0;\n+        areturn;\n+    }\n+\n+    public static Method offsetCopiedNS:\"(I[Ljava\/lang\/Object;I)[Ljava\/lang\/String;\" stack 3 {\n@@ -181,1 +328,13 @@\n-    public static Method constantEnumerated3:\"()[Ljava\/lang\/String;\" stack 1 {\n+    public static Method offsetCopiedNI:\"(I[II)[I\" stack 3 {\n+        iload_0;\n+        aload_1;\n+        iload_2;\n+        invokedynamic\n+            InvokeDynamic REF_invokeStatic:java\/lang\/runtime\/ArrayCreation.offsetCopied\n+                :\"(Ljava\/lang\/invoke\/MethodHandles$Lookup;Ljava\/lang\/String;Ljava\/lang\/invoke\/MethodType;Ljava\/lang\/reflect\/RuntimeType;II)Ljava\/lang\/invoke\/CallSite;\"\n+                :_:\"(I[II)[I\"\n+                #1, int 0, int -1;\n+        areturn;\n+    }\n+\n+    public static Method constantEnumerated3S:\"()[Ljava\/lang\/String;\" stack 1 {\n@@ -190,1 +349,10 @@\n-    public static Method constantEnumerated0:\"()[Ljava\/lang\/String;\" stack 1 {\n+    public static Method constantEnumerated3I:\"()[I\" stack 1 {\n+        invokedynamic\n+            InvokeDynamic REF_invokeStatic:java\/lang\/runtime\/ArrayCreation.constantEnumerated\n+                :\"(Ljava\/lang\/invoke\/MethodHandles$Lookup;Ljava\/lang\/String;Ljava\/lang\/invoke\/MethodType;Ljava\/lang\/reflect\/RuntimeType;I[Ljava\/lang\/Object;)Ljava\/lang\/invoke\/CallSite;\"\n+                :_:\"()[I\"\n+                #1, int 0, int 30, int 40, int 50;\n+        areturn;\n+    }\n+\n+    public static Method constantEnumerated0S:\"()[Ljava\/lang\/String;\" stack 1 {\n@@ -199,1 +367,10 @@\n-    public static Method dynamicEnumerated3\n+    public static Method constantEnumerated0I:\"()[I\" stack 1 {\n+        invokedynamic\n+            InvokeDynamic REF_invokeStatic:java\/lang\/runtime\/ArrayCreation.constantEnumerated\n+                :\"(Ljava\/lang\/invoke\/MethodHandles$Lookup;Ljava\/lang\/String;Ljava\/lang\/invoke\/MethodType;Ljava\/lang\/reflect\/RuntimeType;I[Ljava\/lang\/Object;)Ljava\/lang\/invoke\/CallSite;\"\n+                :_:\"()[I\"\n+                #1, int 0;\n+        areturn;\n+    }\n+\n+    public static Method dynamicEnumerated3S\n@@ -213,1 +390,13 @@\n-    public static Method dynamicEnumerated0:\"()[Ljava\/lang\/String;\" stack 1 {\n+    public static Method dynamicEnumerated3I:\"(III)[I\" stack 3 {\n+        iload_0;\n+        iload_1;\n+        iload_2;\n+        invokedynamic\n+            InvokeDynamic REF_invokeStatic:java\/lang\/runtime\/ArrayCreation.dynamicEnumerated\n+                :\"(Ljava\/lang\/invoke\/MethodHandles$Lookup;Ljava\/lang\/String;Ljava\/lang\/invoke\/MethodType;Ljava\/lang\/reflect\/RuntimeType;I)Ljava\/lang\/invoke\/CallSite;\"\n+                :_:\"(III)[I\"\n+                #1, int 0;\n+        areturn;\n+    }\n+\n+    public static Method dynamicEnumerated0S:\"()[Ljava\/lang\/String;\" stack 1 {\n@@ -222,0 +411,9 @@\n+    public static Method dynamicEnumerated0I:\"()[I\" stack 1 {\n+        invokedynamic\n+            InvokeDynamic REF_invokeStatic:java\/lang\/runtime\/ArrayCreation.dynamicEnumerated\n+                :\"(Ljava\/lang\/invoke\/MethodHandles$Lookup;Ljava\/lang\/String;Ljava\/lang\/invoke\/MethodType;Ljava\/lang\/reflect\/RuntimeType;I)Ljava\/lang\/invoke\/CallSite;\"\n+                :_:\"()[I\"\n+                #1, int 0;\n+        areturn;\n+    }\n+\n","filename":"test\/jdk\/java\/lang\/runtime\/ArrayCreationInvoker.jasm","additions":217,"deletions":19,"binary":false,"changes":236,"status":"modified"},{"patch":"@@ -36,1 +36,1 @@\n-        checkArray(ArrayCreationInvoker.constantFilled3(),\n+        checkArray(ArrayCreationInvoker.constantFilled3S(),\n@@ -38,1 +38,3 @@\n-        checkArray(ArrayCreationInvoker.constantFilled0(),\n+        checkArray(ArrayCreationInvoker.constantFilled3I(),\n+                   new int[]{ 3, 3, 3 });\n+        checkArray(ArrayCreationInvoker.constantFilled0S(),\n@@ -40,1 +42,3 @@\n-        checkArray(ArrayCreationInvoker.constantFilledN(5),\n+        checkArray(ArrayCreationInvoker.constantFilled0I(),\n+                   new int[]{ });\n+        checkArray(ArrayCreationInvoker.constantFilledNS(5),\n@@ -42,0 +46,6 @@\n+        checkArray(ArrayCreationInvoker.constantFilledNS(0),\n+                   new String[]{ });\n+        checkArray(ArrayCreationInvoker.constantFilledNI(5),\n+                   new int[]{ 3, 3, 3, 3, 3 });\n+        checkArray(ArrayCreationInvoker.constantFilledNI(0),\n+                   new int[]{ });\n@@ -43,1 +53,1 @@\n-        checkArray(ArrayCreationInvoker.dynamicFilled3(\"hi\"),\n+        checkArray(ArrayCreationInvoker.dynamicFilled3S(\"hi\"),\n@@ -45,1 +55,3 @@\n-        checkArray(ArrayCreationInvoker.dynamicFilled0(\"hi\"),\n+        checkArray(ArrayCreationInvoker.dynamicFilled3I(23),\n+                   new int[]{ 23, 23, 23 });\n+        checkArray(ArrayCreationInvoker.dynamicFilled0S(\"hi\"),\n@@ -47,1 +59,3 @@\n-        checkArray(ArrayCreationInvoker.dynamicFilledN(2, \"hi\"),\n+        checkArray(ArrayCreationInvoker.dynamicFilled0I(23),\n+                   new int[]{ });\n+        checkArray(ArrayCreationInvoker.dynamicFilledNS(2, \"hi\"),\n@@ -49,1 +63,1 @@\n-        checkArray(ArrayCreationInvoker.dynamicFilledN(0, \"hi\"),\n+        checkArray(ArrayCreationInvoker.dynamicFilledNS(0, \"hi\"),\n@@ -51,0 +65,4 @@\n+        checkArray(ArrayCreationInvoker.dynamicFilledNI(2, 23),\n+                   new int[]{ 23, 23 });\n+        checkArray(ArrayCreationInvoker.dynamicFilledNI(0, 23),\n+                   new int[]{ });\n@@ -52,1 +70,1 @@\n-        checkArray(ArrayCreationInvoker.computed3(i -> \"x\"+i),\n+        checkArray(ArrayCreationInvoker.computed3S(i -> \"x\"+i),\n@@ -54,1 +72,3 @@\n-        checkArray(ArrayCreationInvoker.computed0(i -> \"y\"+i),\n+        checkArray(ArrayCreationInvoker.computed3I(i -> i+5),\n+                   new int[]{ 5, 6, 7 });\n+        checkArray(ArrayCreationInvoker.computed0S(i -> \"y\"+i),\n@@ -56,1 +76,3 @@\n-        checkArray(ArrayCreationInvoker.computedN(5, i -> \"z\"+i),\n+        checkArray(ArrayCreationInvoker.computed0I(i -> i+6),\n+                   new int[]{ });\n+        checkArray(ArrayCreationInvoker.computedNS(5, i -> \"z\"+i),\n@@ -58,1 +80,1 @@\n-        checkArray(ArrayCreationInvoker.computedN(0, i -> \"w\"+i),\n+        checkArray(ArrayCreationInvoker.computedNS(0, i -> \"w\"+i),\n@@ -60,0 +82,4 @@\n+        checkArray(ArrayCreationInvoker.computedNI(5, i -> i+7),\n+                   new int[]{ 7, 8, 9, 10, 11 });\n+        checkArray(ArrayCreationInvoker.computedNI(0, i -> i+8),\n+                   new int[]{ });\n@@ -61,1 +87,2 @@\n-        Object[] src = new Object[]{ \"a\", \"b\", \"c\", \"d\", \"e\" };\n+        Object[] srcS = new Object[]{ \"a\", \"b\", \"c\", \"d\", \"e\" };\n+        int[] srcI = new int[]{ 1, 2, 3, 4, 5 };\n@@ -63,1 +90,1 @@\n-        checkArray(ArrayCreationInvoker.copied3(src),\n+        checkArray(ArrayCreationInvoker.copied3S(srcS),\n@@ -65,1 +92,3 @@\n-        checkArray(ArrayCreationInvoker.copied0(src),\n+        checkArray(ArrayCreationInvoker.copied3I(srcI),\n+                   new int[]{ 1, 2, 3 });\n+        checkArray(ArrayCreationInvoker.copied0S(srcS),\n@@ -67,1 +96,3 @@\n-        checkArray(ArrayCreationInvoker.copiedN(4, src),\n+        checkArray(ArrayCreationInvoker.copied0I(srcI),\n+                   new int[]{ });\n+        checkArray(ArrayCreationInvoker.copiedNS(4, srcS),\n@@ -69,1 +100,1 @@\n-        checkArray(ArrayCreationInvoker.copiedN(0, src),\n+        checkArray(ArrayCreationInvoker.copiedNS(0, srcS),\n@@ -71,0 +102,4 @@\n+        checkArray(ArrayCreationInvoker.copiedNI(4, srcI),\n+                   new int[]{ 1, 2, 3, 4 });\n+        checkArray(ArrayCreationInvoker.copiedNI(0, srcI),\n+                   new int[]{ });\n@@ -72,1 +107,1 @@\n-        checkArray(ArrayCreationInvoker.offsetCopied3(src, 0),\n+        checkArray(ArrayCreationInvoker.offsetCopied3S(srcS, 0),\n@@ -74,1 +109,1 @@\n-        checkArray(ArrayCreationInvoker.offsetCopied3(src, 2),\n+        checkArray(ArrayCreationInvoker.offsetCopied3S(srcS, 2),\n@@ -76,1 +111,5 @@\n-        checkArray(ArrayCreationInvoker.offsetCopied0(src, 0),\n+        checkArray(ArrayCreationInvoker.offsetCopied3I(srcI, 0),\n+                   new int[]{ 1, 2, 3 });\n+        checkArray(ArrayCreationInvoker.offsetCopied3I(srcI, 2),\n+                   new int[]{ 3, 4, 5 });\n+        checkArray(ArrayCreationInvoker.offsetCopied0S(srcS, 0),\n@@ -78,1 +117,1 @@\n-        checkArray(ArrayCreationInvoker.offsetCopied0(src, 2),\n+        checkArray(ArrayCreationInvoker.offsetCopied0S(srcS, 2),\n@@ -80,1 +119,5 @@\n-        checkArray(ArrayCreationInvoker.offsetCopiedN(4, src, 1),\n+        checkArray(ArrayCreationInvoker.offsetCopied0I(srcI, 0),\n+                   new int[]{ });\n+        checkArray(ArrayCreationInvoker.offsetCopied0I(srcI, 2),\n+                   new int[]{ });\n+        checkArray(ArrayCreationInvoker.offsetCopiedNS(4, srcS, 1),\n@@ -82,1 +125,1 @@\n-        checkArray(ArrayCreationInvoker.offsetCopiedN(0, src, 4),\n+        checkArray(ArrayCreationInvoker.offsetCopiedNS(0, srcS, 4),\n@@ -84,0 +127,4 @@\n+        checkArray(ArrayCreationInvoker.offsetCopiedNI(4, srcI, 1),\n+                   new int[]{ 2, 3, 4, 5 });\n+        checkArray(ArrayCreationInvoker.offsetCopiedNI(0, srcI, 4),\n+                   new int[]{ });\n@@ -85,1 +132,1 @@\n-        checkArray(ArrayCreationInvoker.constantEnumerated3(),\n+        checkArray(ArrayCreationInvoker.constantEnumerated3S(),\n@@ -87,1 +134,3 @@\n-        checkArray(ArrayCreationInvoker.constantEnumerated0(),\n+        checkArray(ArrayCreationInvoker.constantEnumerated3I(),\n+                   new int[]{ 30, 40, 50 });\n+        checkArray(ArrayCreationInvoker.constantEnumerated0S(),\n@@ -89,0 +138,2 @@\n+        checkArray(ArrayCreationInvoker.constantEnumerated0I(),\n+                   new int[]{ });\n@@ -90,1 +141,1 @@\n-        checkArray(ArrayCreationInvoker.dynamicEnumerated3(\"x\", \"y\", \"z\"),\n+        checkArray(ArrayCreationInvoker.dynamicEnumerated3S(\"x\", \"y\", \"z\"),\n@@ -92,1 +143,3 @@\n-        checkArray(ArrayCreationInvoker.dynamicEnumerated0(),\n+        checkArray(ArrayCreationInvoker.dynamicEnumerated3I(-12, 0, 583),\n+                   new int[]{ -12, 0, 583 });\n+        checkArray(ArrayCreationInvoker.dynamicEnumerated0S(),\n@@ -94,0 +147,2 @@\n+        checkArray(ArrayCreationInvoker.dynamicEnumerated0I(),\n+                   new int[]{ });\n@@ -97,0 +152,7 @@\n+        if (!arr.getClass().equals(expected.getClass()) || !Arrays.equals(arr, expected)) {\n+            throw new AssertionError(\"Unexpected result: %s, expected %s\".formatted(\n+                                     Arrays.toString(arr), Arrays.toString(expected)));\n+        }\n+    }\n+\n+    private static void checkArray(int[] arr, int[] expected) {\n@@ -102,0 +164,1 @@\n+\n","filename":"test\/jdk\/java\/lang\/runtime\/ArrayCreationTest.java","additions":89,"deletions":26,"binary":false,"changes":115,"status":"modified"}]}