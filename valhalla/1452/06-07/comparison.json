{"files":[{"patch":"@@ -92,1 +92,3 @@\n-  Klass* oop_field_klass = oop_field->is_objArray() ? oop_field->klass()->super() : oop_field->klass();\n+  \/\/ There should be no oops for ObjArrayKlass but InstanceKlass::array_klasses holds a list of ObjArrayKlass,\n+  \/\/ therefore we need the super of the refined array klass.\n+  Klass* oop_field_klass = oop_field->is_refined_objArray() ? oop_field->klass()->super() : oop_field->klass();\n","filename":"src\/hotspot\/share\/cds\/cdsEnumKlass.cpp","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1299,1 +1299,1 @@\n-        assert(resolved_k == k || ((ObjArrayKlass*)resolved_k)->next_refined_array_klass() == k, \"classes used by archived heap must not be replaced by JVMTI ClassFileLoadHook\");\n+        assert(resolved_k == k || resolved_k == k->super(), \"classes used by archived heap must not be replaced by JVMTI ClassFileLoadHook\");\n","filename":"src\/hotspot\/share\/cds\/heapShared.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -283,3 +283,0 @@\n-runtime\/valhalla\/inlinetypes\/ValuePreloadTest.java 8366440 generic-all\n-runtime\/verifier\/CFLH\/TestVerify.java 8366440 generic-all\n-\n","filename":"test\/hotspot\/jtreg\/ProblemList.txt","additions":0,"deletions":3,"binary":false,"changes":3,"status":"modified"}]}