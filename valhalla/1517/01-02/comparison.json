{"files":[{"patch":"@@ -194,6 +194,5 @@\n-#define ADD_WRAPPER_CLASS(name)                                                      \\\n-  {                                                                                  \\\n-    InstanceKlass* ik = SystemDictionary::find_instance_klass(Thread::current(), vmSymbols::java_lang_##name(), Handle(Thread::current(), nullptr)); \\\n-    assert(ik != nullptr, \"Must exist\");                                             \\\n-    SystemDictionary::add_to_initiating_loader(JavaThread::current(), ik, cld);      \\\n-  }\n+static void add_wrapper_class(JavaThread* current, ClassLoaderData* cld, Symbol* classname) {\n+  InstanceKlass* ik = SystemDictionary::find_instance_klass(current, classname, Handle(current, nullptr));\n+  assert(ik != nullptr, \"Must exist\");\n+  SystemDictionary::add_to_initiating_loader(current, ik, cld);\n+}\n@@ -212,8 +211,9 @@\n-    ADD_WRAPPER_CLASS(Boolean);\n-    ADD_WRAPPER_CLASS(Byte);\n-    ADD_WRAPPER_CLASS(Character);\n-    ADD_WRAPPER_CLASS(Short);\n-    ADD_WRAPPER_CLASS(Integer);\n-    ADD_WRAPPER_CLASS(Long);\n-    ADD_WRAPPER_CLASS(Float);\n-    ADD_WRAPPER_CLASS(Double);\n+    JavaThread* current = JavaThread::current();\n+    add_wrapper_class(current, cld, vmSymbols::java_lang_Boolean());\n+    add_wrapper_class(current, cld, vmSymbols::java_lang_Byte());\n+    add_wrapper_class(current, cld, vmSymbols::java_lang_Character());\n+    add_wrapper_class(current, cld, vmSymbols::java_lang_Short());\n+    add_wrapper_class(current, cld, vmSymbols::java_lang_Integer());\n+    add_wrapper_class(current, cld, vmSymbols::java_lang_Long());\n+    add_wrapper_class(current, cld, vmSymbols::java_lang_Float());\n+    add_wrapper_class(current, cld, vmSymbols::java_lang_Double());\n@@ -224,2 +224,0 @@\n-#undef ADD_WRAPPER_CLASS\n-\n","filename":"src\/hotspot\/share\/classfile\/systemDictionary.cpp","additions":14,"deletions":16,"binary":false,"changes":30,"status":"modified"}]}