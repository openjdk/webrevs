{"files":[{"patch":"@@ -1390,0 +1390,2 @@\n+  assert(!mh->has_scalarized_args() || adapter->get_sig_cc() != nullptr, \"sigcc should not be null here\");\n+\n","filename":"src\/hotspot\/share\/oops\/method.cpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2915,13 +2915,0 @@\n-            if (AOTCodeCache::is_using_adapter() && super_method->adapter()->get_sig_cc() == nullptr) {\n-              \/\/ Calling conventions have to be regenerated at runtime and are accessed through method adapters,\n-              \/\/ which are archived in the AOT code cache. If the adapters are not regenerated, the\n-              \/\/ calling conventions should be regenerated here.\n-              CompiledEntrySignature ces(super_method);\n-              ces.compute_calling_conventions();\n-              if (ces.has_scalarized_args()) {\n-                \/\/ Save a C heap allocated version of the scalarized signature and store it in the adapter\n-                GrowableArray<SigEntry>* heap_sig = new (mtInternal) GrowableArray<SigEntry>(ces.sig_cc()->length(), mtInternal);\n-                heap_sig->appendAll(ces.sig_cc());\n-                super_method->adapter()->set_sig_cc(heap_sig);\n-              }\n-            }\n@@ -3463,0 +3450,14 @@\n+\n+    if (get_sig_cc() == nullptr) {\n+      \/\/ Calling conventions have to be regenerated at runtime and are accessed through method adapters,\n+      \/\/ which are archived in the AOT code cache. If the adapters are not regenerated, the\n+      \/\/ calling conventions should be regenerated here.\n+      CompiledEntrySignature ces;\n+      ces.initialize_from_fingerprint(_fingerprint);\n+      if (ces.has_scalarized_args()) {\n+        \/\/ Save a C heap allocated version of the scalarized signature and store it in the adapter\n+        GrowableArray<SigEntry>* heap_sig = new (mtInternal) GrowableArray<SigEntry>(ces.sig_cc()->length(), mtInternal);\n+        heap_sig->appendAll(ces.sig_cc());\n+        set_sig_cc(heap_sig);\n+      }\n+    }\n@@ -3466,0 +3467,1 @@\n+\n","filename":"src\/hotspot\/share\/runtime\/sharedRuntime.cpp","additions":15,"deletions":13,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -40,2 +40,0 @@\n-runtime\/cds\/appcds\/aotCode\/AOTCodeCompressedOopsTest.java                                        8372602 generic-all\n-runtime\/cds\/appcds\/aotCode\/AOTCodeFlags.java                                                     8372602 generic-all\n","filename":"test\/hotspot\/jtreg\/ProblemList-enable-preview.txt","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -160,2 +160,0 @@\n-# Valhalla + AOT\n-runtime\/cds\/appcds\/methodHandles\/MethodHandlesGeneralTest.java#aot              8367408 generic-all\n","filename":"test\/hotspot\/jtreg\/ProblemList.txt","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"}]}