{"files":[{"patch":"@@ -47,0 +47,2 @@\n+import java.util.Locale;\n+\n@@ -90,14 +92,1 @@\n-        String opt = Options.instance(context).get(\"useSiteNullChecks\");\n-        if (opt == null) {\n-            useSiteNullChecks = UseSiteNullChecks.METHODS_AND_FIELDS;\n-        } else {\n-            useSiteNullChecks = switch (opt) {\n-                case \"none\" -> UseSiteNullChecks.NONE;\n-                case \"methods\" -> UseSiteNullChecks.METHODS;\n-                case \"methods+fields\" -> UseSiteNullChecks.METHODS_AND_FIELDS;\n-                default -> {\n-                    Assert.error(\"Unknown useSiteNullChecks: \" + opt);\n-                    throw new IllegalStateException(\"Unknown useSiteNullChecks: \" + opt);\n-                }\n-            };\n-        }\n+        useSiteNullChecks = UseSiteNullChecks.of(Options.instance(context).get(\"useSiteNullChecks\"));\n@@ -109,1 +98,1 @@\n-        METHODS_AND_FIELDS(true, true);\n+        METHODS_AND_FIELDS(true, true, \"methods+fields\");\n@@ -113,0 +102,1 @@\n+        final String compilerOpt;\n@@ -117,0 +107,20 @@\n+            this.compilerOpt = name().toLowerCase(Locale.ROOT);\n+        }\n+\n+        UseSiteNullChecks(boolean generateChecksForMethods, boolean generateChecksForFields, String compilerOpt) {\n+            this.generateChecksForMethods = generateChecksForMethods;\n+            this.generateChecksForFields = generateChecksForFields;\n+            this.compilerOpt = compilerOpt;\n+        }\n+\n+        static UseSiteNullChecks of(String compilerOpt) {\n+            if (compilerOpt == null) {\n+                return METHODS_AND_FIELDS;\n+            }\n+            for (UseSiteNullChecks useSiteNullChecks: UseSiteNullChecks.values()) {\n+                if (useSiteNullChecks.compilerOpt.equals(compilerOpt)) {\n+                    return useSiteNullChecks;\n+                }\n+            }\n+            Assert.error(\"Unknown useSiteNullChecks: \" + compilerOpt);\n+            throw new IllegalStateException(\"Unknown useSiteNullChecks: \" + compilerOpt);\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/comp\/NullChecksWriter.java","additions":25,"deletions":15,"binary":false,"changes":40,"status":"modified"}]}