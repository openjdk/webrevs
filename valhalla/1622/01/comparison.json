{"files":[{"patch":"@@ -102,0 +102,3 @@\n+\n+COMPILATION_OUTPUTDIR := $(if $($(MODULE)_BIN), $($(MODULE)_BIN), $(JDK_OUTPUTDIR)\/modules)\n+\n@@ -108,1 +111,1 @@\n-    BIN := $(if $($(MODULE)_BIN), $($(MODULE)_BIN), $(JDK_OUTPUTDIR)\/modules), \\\n+    BIN := $(COMPILATION_OUTPUTDIR), \\\n@@ -140,0 +143,9 @@\n+  # Temporarily compile valueclasses into a separate directory with the form:\n+  #   <tempdir>\/<module>\/<classpath>\n+  # and then copy the class files into:\n+  #   <outdir>\/<module>\/META-INF\/preview\/<classpath>\n+  # We cannot compile directly into the desired directory because it's the\n+  # compiler which creates the original '<module>\/<classpath>\/...' hierarchy.\n+  VALUECLASS_OUTPUTDIR := $(SUPPORT_OUTPUTDIR)\/$(VALUECLASSES_STR)\n+  PREVIEW_OUTPUTDIR := $(COMPILATION_OUTPUTDIR)\/$(MODULE)\/META-INF\/preview\n+\n@@ -147,1 +159,1 @@\n-        BIN := $(SUPPORT_OUTPUTDIR)\/$(VALUECLASSES_STR)\/, \\\n+        BIN := $(VALUECLASS_OUTPUTDIR)\/, \\\n@@ -165,0 +177,8 @@\n+    # Restructure the class file hierarchy from <module>\/<classpath>\/... to <module>\/META-INF\/preview\/<classpath>\/...\n+    $(PREVIEW_OUTPUTDIR)\/_copy_valueclasses.marker: $($(MODULE)-$(VALUECLASSES_STR))\n+\t\t$(call MakeTargetDir)\n+\t\t$(CP) -R $(VALUECLASS_OUTPUTDIR)\/$(MODULE)\/. $(@D)\/\n+\t\t$(TOUCH) $@\n+\n+    TARGETS += $(PREVIEW_OUTPUTDIR)\/_copy_valueclasses.marker\n+\n","filename":"make\/CompileJavaModules.gmk","additions":22,"deletions":2,"binary":false,"changes":24,"status":"modified"}]}