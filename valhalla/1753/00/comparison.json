{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1996, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1996, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -143,12 +143,2 @@\n-    public static Object get(Object array, int index)\n-        throws IllegalArgumentException, ArrayIndexOutOfBoundsException {\n-        Class<?> componentType = array.getClass().getComponentType();\n-        if (componentType != null && !componentType.isPrimitive()) {\n-            Object[] objArray = (Object[]) array.getClass().cast(array);\n-            return objArray[index];\n-        } else {\n-            return getReferenceOrPrimitive(array, index);\n-        }\n-    }\n-\n-    private static native Object getReferenceOrPrimitive(Object array, int index);\n+    public static native Object get(Object array, int index)\n+        throws IllegalArgumentException, ArrayIndexOutOfBoundsException;\n@@ -325,12 +315,2 @@\n-    public static void set(Object array, int index, Object value)\n-        throws IllegalArgumentException, ArrayIndexOutOfBoundsException {\n-        Class<?> componentType = array.getClass().getComponentType();\n-        if (componentType != null && !componentType.isPrimitive()) {\n-            Object[] objArray = (Object[]) array.getClass().cast(array);\n-            objArray[index] = componentType.cast(value);\n-        } else {\n-            setReferenceOrPrimitive(array, index, value);\n-        }\n-    }\n-\n-    private static native void setReferenceOrPrimitive(Object array, int index, Object value);\n+    public static native void set(Object array, int index, Object value)\n+        throws IllegalArgumentException, ArrayIndexOutOfBoundsException;\n","filename":"src\/java.base\/share\/classes\/java\/lang\/reflect\/Array.java","additions":5,"deletions":25,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1996, 1998, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1996, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -49,2 +49,2 @@\n-Java_java_lang_reflect_Array_getReferenceOrPrimitive(JNIEnv *env, jclass ignore, jobject arr,\n-                                                     jint index)\n+Java_java_lang_reflect_Array_get(JNIEnv *env, jclass ignore, jobject arr,\n+                                 jint index)\n@@ -115,2 +115,2 @@\n-Java_java_lang_reflect_Array_setReferenceOrPrimitive(JNIEnv *env, jclass ignore, jobject arr,\n-                                                     jint index, jobject val)\n+Java_java_lang_reflect_Array_set(JNIEnv *env, jclass ignore, jobject arr,\n+                                 jint index, jobject val)\n","filename":"src\/java.base\/share\/native\/libjava\/Array.c","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -161,0 +161,7 @@\n+\n+    @Test\n+    @SuppressWarnings(\"removal\")\n+    public void testArraysWrongType() {\n+        Integer[] array = {1, 2, 3};\n+        assertThrows(IllegalArgumentException.class, () -> Array.set(array, 2, new Byte((byte) 5)));\n+    }\n","filename":"test\/jdk\/valhalla\/valuetypes\/Reflection.java","additions":7,"deletions":0,"binary":false,"changes":7,"status":"modified"}]}