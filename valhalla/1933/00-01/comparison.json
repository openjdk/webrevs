{"files":[{"patch":"@@ -84,0 +84,1 @@\n+     * @throws IllegalArgumentException if any signature has null marker\n@@ -95,0 +96,1 @@\n+     * @throws IllegalArgumentException if any signature has null marker\n","filename":"src\/java.base\/share\/classes\/java\/lang\/classfile\/ClassSignature.java","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -135,1 +135,2 @@\n-     * @throws IllegalArgumentException if any of {@code arguments} is void\n+     * @throws IllegalArgumentException if any of {@code arguments} is void or\n+     *         any of the exceptions signatures has null marker\n","filename":"src\/java.base\/share\/classes\/java\/lang\/classfile\/MethodSignature.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -41,0 +41,1 @@\n+import jdk.internal.javac.PreviewFeature;\n@@ -152,1 +153,1 @@\n-        \/\/ TODO preview under NR\n+        @PreviewFeature(feature = PreviewFeature.Feature.NULL_RESTRICTION, reflective = true)\n@@ -154,0 +155,1 @@\n+            \/\/ See JCNullableTypeExpression.NullMaker\n@@ -158,1 +160,1 @@\n-            UNMARKED,\n+            UNSPECIFIED,\n@@ -160,1 +162,1 @@\n-             * A null-checked marker on a reference type, {@code !}.  This\n+             * A not-null marker on a reference type, {@code !}.  This\n@@ -163,1 +165,1 @@\n-            CHECKED,\n+            NOT_NULL,\n@@ -172,0 +174,1 @@\n+        @PreviewFeature(feature = PreviewFeature.Feature.NULL_RESTRICTION, reflective = true)\n@@ -181,0 +184,1 @@\n+        @PreviewFeature(feature = PreviewFeature.Feature.NULL_RESTRICTION, reflective = true)\n@@ -189,1 +193,2 @@\n-        RefTypeSig nullUnmarked();\n+        @PreviewFeature(feature = PreviewFeature.Feature.NULL_RESTRICTION, reflective = true)\n+        RefTypeSig nullUnspecified();\n@@ -197,0 +202,1 @@\n+        @PreviewFeature(feature = PreviewFeature.Feature.NULL_RESTRICTION, reflective = true)\n@@ -272,0 +278,1 @@\n+        @PreviewFeature(feature = PreviewFeature.Feature.NULL_RESTRICTION, reflective = true)\n@@ -275,0 +282,1 @@\n+        @PreviewFeature(feature = PreviewFeature.Feature.NULL_RESTRICTION, reflective = true)\n@@ -276,2 +284,2 @@\n-        default ClassTypeSig nullUnmarked() {\n-            return nullMarker(NullMarker.UNMARKED);\n+        default ClassTypeSig nullUnspecified() {\n+            return nullMarker(NullMarker.UNSPECIFIED);\n@@ -280,0 +288,1 @@\n+        @PreviewFeature(feature = PreviewFeature.Feature.NULL_RESTRICTION, reflective = true)\n@@ -282,1 +291,1 @@\n-            return nullMarker(NullMarker.CHECKED);\n+            return nullMarker(NullMarker.NOT_NULL);\n@@ -306,1 +315,2 @@\n-         *         {@linkplain Signature##identifier denoted}\n+         *         {@linkplain Signature##identifier denoted}, or if\n+         *         {@code outerType} has null marker\n@@ -340,1 +350,2 @@\n-         *         {@linkplain Signature##identifier denoted}\n+         *         {@linkplain Signature##identifier denoted}, or if\n+         *         {@code outerType} has null marker\n@@ -349,1 +360,1 @@\n-            return new SignaturesImpl.ClassTypeSigImpl(NullMarker.UNMARKED, Optional.ofNullable(outerType), className, List.of(typeArgs));\n+            return new SignaturesImpl.ClassTypeSigImpl(NullMarker.UNSPECIFIED, Optional.ofNullable(outerType), className, List.of(typeArgs));\n@@ -435,0 +446,1 @@\n+         * @throws IllegalArgumentException if {@code boundType} has null marker\n@@ -453,0 +465,1 @@\n+         * @throws IllegalArgumentException if {@code boundType} has null marker\n@@ -464,0 +477,1 @@\n+         * @throws IllegalArgumentException if {@code boundType} has null marker\n@@ -476,0 +490,1 @@\n+         * @throws IllegalArgumentException if {@code boundType} has null marker\n@@ -501,0 +516,1 @@\n+        @PreviewFeature(feature = PreviewFeature.Feature.NULL_RESTRICTION, reflective = true)\n@@ -504,0 +520,1 @@\n+        @PreviewFeature(feature = PreviewFeature.Feature.NULL_RESTRICTION, reflective = true)\n@@ -505,2 +522,2 @@\n-        default TypeVarSig nullUnmarked() {\n-            return nullMarker(NullMarker.UNMARKED);\n+        default TypeVarSig nullUnspecified() {\n+            return nullMarker(NullMarker.UNSPECIFIED);\n@@ -509,0 +526,1 @@\n+        @PreviewFeature(feature = PreviewFeature.Feature.NULL_RESTRICTION, reflective = true)\n@@ -511,1 +529,1 @@\n-            return nullMarker(NullMarker.CHECKED);\n+            return nullMarker(NullMarker.NOT_NULL);\n@@ -522,1 +540,1 @@\n-            return new SignaturesImpl.TypeVarSigImpl(NullMarker.UNMARKED, SignaturesImpl.validateIdentifier(identifier));\n+            return new SignaturesImpl.TypeVarSigImpl(NullMarker.UNSPECIFIED, SignaturesImpl.validateIdentifier(identifier));\n@@ -542,0 +560,1 @@\n+        @PreviewFeature(feature = PreviewFeature.Feature.NULL_RESTRICTION, reflective = true)\n@@ -545,0 +564,1 @@\n+        @PreviewFeature(feature = PreviewFeature.Feature.NULL_RESTRICTION, reflective = true)\n@@ -546,2 +566,2 @@\n-        default ArrayTypeSig nullUnmarked() {\n-            return nullMarker(NullMarker.UNMARKED);\n+        default ArrayTypeSig nullUnspecified() {\n+            return nullMarker(NullMarker.UNSPECIFIED);\n@@ -550,0 +570,1 @@\n+        @PreviewFeature(feature = PreviewFeature.Feature.NULL_RESTRICTION, reflective = true)\n@@ -552,1 +573,1 @@\n-            return nullMarker(NullMarker.CHECKED);\n+            return nullMarker(NullMarker.NOT_NULL);\n@@ -559,1 +580,1 @@\n-         *         null-checked\n+         *         has null marker\n@@ -571,1 +592,1 @@\n-         *         type is void or the component type is null-checked\n+         *         type is void or the component type has null marker\n@@ -581,1 +602,1 @@\n-                return new SignaturesImpl.ArrayTypeSigImpl(NullMarker.UNMARKED, dims + arr.arrayDepth(), arr.elemType());\n+                return new SignaturesImpl.ArrayTypeSigImpl(NullMarker.UNSPECIFIED, dims + arr.arrayDepth(), arr.elemType());\n@@ -585,1 +606,1 @@\n-            return new SignaturesImpl.ArrayTypeSigImpl(NullMarker.UNMARKED, dims, componentSignature);\n+            return new SignaturesImpl.ArrayTypeSigImpl(NullMarker.UNSPECIFIED, dims, componentSignature);\n@@ -626,1 +647,2 @@\n-         *         Signature##identifier denoted}\n+         *         Signature##identifier denoted}, or any of the bounds has\n+         *         null marker\n@@ -642,1 +664,2 @@\n-         *         Signature##identifier denoted}\n+         *         Signature##identifier denoted}, or any of the bounds has\n+         *         null marker\n","filename":"src\/java.base\/share\/classes\/java\/lang\/classfile\/Signature.java","additions":47,"deletions":24,"binary":false,"changes":71,"status":"modified"},{"patch":"@@ -212,1 +212,1 @@\n-                t = new ClassTypeSigImpl(RefTypeSig.NullMarker.UNMARKED, Optional.ofNullable(t), className, null2Empty(argTypes));\n+                t = new ClassTypeSigImpl(RefTypeSig.NullMarker.UNSPECIFIED, Optional.ofNullable(t), className, null2Empty(argTypes));\n@@ -316,1 +316,1 @@\n-        if (incoming.nullMarker() != RefTypeSig.NullMarker.UNMARKED) {\n+        if (incoming.nullMarker() != RefTypeSig.NullMarker.UNSPECIFIED) {\n@@ -347,2 +347,2 @@\n-            case UNMARKED -> \"\";\n-            case CHECKED -> \"!\";\n+            case UNSPECIFIED -> \"\";\n+            case NOT_NULL -> \"!\";\n@@ -380,1 +380,1 @@\n-            return arrayDepth > 1 ? new ArrayTypeSigImpl(NullMarker.UNMARKED, arrayDepth - 1, elemType) : elemType;\n+            return arrayDepth > 1 ? new ArrayTypeSigImpl(NullMarker.UNSPECIFIED, arrayDepth - 1, elemType) : elemType;\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/classfile\/impl\/SignaturesImpl.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"}]}