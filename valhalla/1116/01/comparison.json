{"files":[{"patch":"@@ -770,3 +770,0 @@\n-                                                                            \\\n-  product(bool, ExpandSubTypeCheckAtParseTime, false, DIAGNOSTIC,           \\\n-          \"Do not use subtype check macro node\")                            \\\n","filename":"src\/hotspot\/share\/opto\/c2_globals.hpp","additions":0,"deletions":3,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2858,0 +2858,6 @@\n+\n+    \/\/ At macro expansion, we would have already folded the SubTypeCheckNode\n+    \/\/ being expanded here because we always perform the static sub type\n+    \/\/ check in SubTypeCheckNode::sub() regardless of whether\n+    \/\/ StressReflectiveCode is set or not. We can therefore skip this\n+    \/\/ static check when StressReflectiveCode is on.\n@@ -3044,2 +3050,1 @@\n-  bool expand_subtype_check = C->post_loop_opts_phase() ||   \/\/ macro node expansion is over\n-                              ExpandSubTypeCheckAtParseTime; \/\/ forced expansion\n+  bool expand_subtype_check = C->post_loop_opts_phase(); \/\/ macro node expansion is over\n","filename":"src\/hotspot\/share\/opto\/graphKit.cpp","additions":7,"deletions":2,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -3,1 +3,1 @@\n- * Copyright (c) 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -35,1 +35,0 @@\n- *     -XX:+UnlockDiagnosticVMOptions -XX:+ExpandSubTypeCheckAtParseTime\n","filename":"test\/hotspot\/jtreg\/compiler\/types\/TestSubTypeCheckMacroTrichotomy.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -78,2 +78,1 @@\n-                \/\/ TODO 8331912 Remove -XX:-ExpandSubTypeCheckAtParseTime\n-                .addFlags(\"--enable-preview\", \"-XX:-ExpandSubTypeCheckAtParseTime\",\n+                .addFlags(\"--enable-preview\",\n","filename":"test\/hotspot\/jtreg\/compiler\/valhalla\/inlinetypes\/TestFlatInArraysFolding.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"}]}