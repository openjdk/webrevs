{"files":[{"patch":"@@ -487,1 +487,1 @@\n-            if (types.unboxedTypeOrType(arg).isPrimitive()) {\n+            if (types.unboxedTypeOrType(arg).isPrimitive() || arg.isErroneous()) {\n@@ -593,1 +593,3 @@\n-            if (types.unboxedTypeOrType(arg1).isPrimitive()) {\n+            if (types.unboxedTypeOrType(arg1).isPrimitive() ||\n+                    types.unboxedTypeOrType(arg1).isPrimitive() ||\n+                    arg1.isErroneous() || arg2.isErroneous()) {\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/comp\/Operators.java","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -0,0 +1,54 @@\n+\/*\n+ * Copyright (c) 2026, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @summary check that speculative attribution doesn't cause issues with type class op resolution\n+ *          when witness methods are present\n+ * @modules jdk.compiler\n+ *\/\n+\n+import java.nio.file.Path;\n+import java.util.List;\n+\n+public class TestBootstrap {\n+    static String testSrc = System.getProperty(\"test.src\", \".\");\n+\n+    public static void main(String... args) {\n+        Path x = Path.of(testSrc, \"x\");\n+        String[] jcArgs = { \"-d\", \".\", \"--patch-module\", \"java.base=\" + x.toAbsolutePath(),\n+                x.resolve(\"TestClass.java\").toString(),\n+                x.resolve(\"java\").resolve(\"lang\").resolve(\"Integral.java\").toString() };\n+        compile(jcArgs);\n+    }\n+\n+    static void compile(String... args) {\n+        int rc = com.sun.tools.javac.Main.compile(args);\n+        switch (rc) {\n+            case 0 -> throw new AssertionError(\"javac passed unexpectedly: \" + List.of(args));\n+            case 4 -> throw new AssertionError(\"javac crashed unexpectedly: \" + List.of(args));\n+        }\n+    }\n+}\n","filename":"test\/langtools\/tools\/javac\/typeClasses\/boot\/TestBootstrap.java","additions":54,"deletions":0,"binary":false,"changes":54,"status":"added"},{"patch":"@@ -0,0 +1,42 @@\n+\/*\n+ * Copyright (c) 2026, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package x;\n+\n+import java.util.function.IntConsumer;\n+import java.util.function.IntUnaryOperator;\n+\n+public class TestClass {\n+    \/\/void m(IntUnaryOperator intOp) { }\n+    void m(IntConsumer intConsumer) { }\n+\n+    void testUnary() {\n+        m(x -> -x);\n+    }\n+\n+    void testBinary() {\n+        m(x -> x + x);\n+    }\n+}\n","filename":"test\/langtools\/tools\/javac\/typeClasses\/boot\/x\/TestClass.java","additions":42,"deletions":0,"binary":false,"changes":42,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,1 +26,1 @@\n-package sun.security.ssl;\n+package java.lang;\n@@ -28,1 +28,1 @@\n-interface SSLCredentials {\n+public interface Integral<X> {\n","filename":"test\/langtools\/tools\/javac\/typeClasses\/boot\/x\/java\/lang\/Integral.java","additions":3,"deletions":3,"binary":false,"changes":6,"previous_filename":"src\/java.base\/share\/classes\/sun\/security\/ssl\/SSLCredentials.java","status":"copied"},{"patch":"@@ -0,0 +1,38 @@\n+\/*\n+ * Copyright (c) 2026, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package java.lang;\n+\n+public interface Numerical<X> {\n+    \/**\n+     * Lift an integral witness into a numerical witness.\n+     * @param integral the integral witness\n+     * @return a suitable numerical witness\n+     * @param <T> the type of the witness\n+     *\/\n+    __witness <T> Numerical<T> asNumerical(Integral<T> integral) {\n+        return integral;\n+    }\n+}\n","filename":"test\/langtools\/tools\/javac\/typeClasses\/boot\/x\/java\/lang\/Numerical.java","additions":38,"deletions":0,"binary":false,"changes":38,"status":"added"}]}