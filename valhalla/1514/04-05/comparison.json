{"files":[{"patch":"@@ -47,4 +47,0 @@\n-    private static void assertFalseIfPreview(boolean condition, String msg) {\n-        assertEquals(!PreviewFeatures.isEnabled(), condition, msg);\n-    }\n-\n@@ -53,1 +49,1 @@\n-        assertFalseIfPreview(Integer.class.isIdentity(), \"Integer is not an IDENTITY type\");\n+        assertEquals(!PreviewFeatures.isEnabled(), Integer.class.isIdentity(), \"Integer is not an IDENTITY type\");\n@@ -59,2 +55,7 @@\n-        int imod = Integer.class.getModifiers();\n-        assertFalseIfPreview(Modifier.isIdentity(imod), \"Modifier of Integer should not have IDENTITY set\");\n+        \/\/ Without --enable-preview (before Valhalla), there was no IDENTITY modifier.\n+        \/\/ With --enable-preview, Integer still should not have the IDENTITY modifier.\n+        \/\/ So only verify this in preview mode.\n+        if (PreviewFeatures.isEnabled()) {\n+            int imod = Integer.class.getModifiers();\n+            assertFalse(Modifier.isIdentity(imod), \"Modifier of Integer should not have IDENTITY set\");\n+        }\n@@ -62,1 +63,1 @@\n-        assertEquals(PreviewFeatures.isPreviewEnabled(), Modifier.isIdentity(amod), \"Modifier of array should have IDENTITY set\");\n+        assertEquals(PreviewFeatures.isEnabled(), Modifier.isIdentity(amod), \"Modifier of array should have IDENTITY set\");\n@@ -67,0 +68,3 @@\n+        \/\/ Without --enable-preview (before Valhalla), there was no IDENTITY accessflag.\n+        \/\/ With --enable-preview, Integer still should not have the IDENTITY accessflag.\n+        \/\/ So only verify this in preview mode.\n@@ -71,1 +75,1 @@\n-Without --enable-preview (before Valhalla), there was no IDENTITY accessflag.\n+        \/\/ AccessFlags for arrays are not set.\n@@ -73,1 +77,1 @@\n-        assertFalse(aacc.contains(Modifier.IDENTITY), \"Access flags of array of inline types should contain IDENTITY\");\n+        assertFalse(aacc.contains(Modifier.IDENTITY), \"Access flags of array of inline types should not contain IDENTITY\");\n","filename":"test\/jdk\/valhalla\/valuetypes\/IsIdentityClassTest.java","additions":14,"deletions":10,"binary":false,"changes":24,"status":"modified"}]}