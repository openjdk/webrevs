{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -299,1 +299,1 @@\n-        BANG(TokenKind.BANG, XEXPR1),  \/\/  !\n+        BANG(TokenKind.BANG, XEXPR1|XDECL1),  \/\/  !\n","filename":"src\/jdk.jshell\/share\/classes\/jdk\/jshell\/CompletenessAnalyzer.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -401,0 +401,4 @@\n+            } else if (nonNull) {\n+                \/\/do not add the \"zero\" initializer for the null restricted variable without initializer:\n+                winit = null;\n+                subkind = SubKind.VAR_DECLARATION_SUBKIND;\n","filename":"src\/jdk.jshell\/share\/classes\/jdk\/jshell\/Eval.java","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -100,1 +100,2 @@\n-                                     new VarDeclareWrap(wtype, brackets, wname, winit),\n+                                     winit != null ? new VarDeclareWrap(wtype, brackets, wname, winit)\n+                                                   : new VarDeclareWrap(wtype, brackets, wname),\n","filename":"src\/jdk.jshell\/share\/classes\/jdk\/jshell\/Wrap.java","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -41,0 +41,1 @@\n+import org.junit.jupiter.api.BeforeEach;\n@@ -42,0 +43,1 @@\n+import org.junit.jupiter.api.TestInfo;\n@@ -413,0 +415,36 @@\n+\n+    @Test\n+    public void testPreview() {\n+        \/\/this should be merged into the testcases above,\n+        \/\/but currently needs preview enabled:\n+        assertStatus(\"String! s = \\\"\\\"\", COMPLETE_WITH_SEMI, \"String! s = \\\"\\\"\");\n+        assertStatus(\"Boolean! b = !true\", COMPLETE_WITH_SEMI, \"Boolean! b = !true\");\n+        assertStatus(\"String! s = \\\"\\\";\", COMPLETE, \"String! s = \\\"\\\";\");\n+        assertStatus(\"Boolean! b = !true;\", COMPLETE, \"Boolean! b = !true;\");\n+\n+        \/\/these are ultimately broken, but OK to consider them complete snippets?\n+        assertStatus(\"String! s\", COMPLETE_WITH_SEMI, \"String! s\");\n+        assertStatus(\"Boolean! b\", COMPLETE_WITH_SEMI, \"Boolean! b\");\n+        assertStatus(\"String! s;\", COMPLETE, \"String! s;\");\n+        assertStatus(\"Boolean! b;\", COMPLETE, \"Boolean! b;\");\n+\n+        \/\/incomplete:\n+        assertStatus(\"Boolean! b =\", DEFINITELY_INCOMPLETE, \"Boolean! b =\");\n+        assertStatus(\"Boolean! test()\", DEFINITELY_INCOMPLETE, \"Boolean! test()\");\n+        assertStatus(\"Boolean! test() {\", DEFINITELY_INCOMPLETE, \"Boolean! test() {\");\n+    }\n+\n+    @BeforeEach\n+    public void setUp(TestInfo info) {\n+        setUp(b -> addExtraOptions(b, info));\n+    }\n+\n+    protected JShell.Builder addExtraOptions(JShell.Builder b, TestInfo testInfo) {\n+        return switch (testInfo.getTestMethod().orElseThrow().getName()) {\n+            case \"testPreview\" ->\n+                b.compilerOptions(\"--source\", System.getProperty(\"java.specification.version\"),\n+                                  \"--enable-preview\")\n+                 .remoteVMOptions(\"--enable-preview\");\n+            default -> b;\n+        };\n+    }\n","filename":"test\/langtools\/jdk\/jshell\/CompletenessTest.java","additions":39,"deletions":1,"binary":false,"changes":40,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -703,0 +703,1 @@\n+        assertDeclareFail(\"String! str;\", \"compiler.err.non.nullable.should.be.initialized\");\n","filename":"test\/langtools\/jdk\/jshell\/VariablesTest.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"}]}