{"files":[{"patch":"@@ -1964,1 +1964,1 @@\n-  int remove_scalarized_frames(StackChunkFrameStream<ChunkFrames::CompiledOnly>& scfs, stackChunkOop chunk, int &argsize);\n+  int remove_scalarized_frames(StackChunkFrameStream<ChunkFrames::CompiledOnly>& scfs, stackChunkOop chunk, int frames_size, int &argsize);\n@@ -2075,1 +2075,1 @@\n-int ThawBase::remove_scalarized_frames(StackChunkFrameStream<ChunkFrames::CompiledOnly>& f, stackChunkOop chunk, int &argsize) {\n+int ThawBase::remove_scalarized_frames(StackChunkFrameStream<ChunkFrames::CompiledOnly>& f, stackChunkOop chunk, int frames_size, int &argsize) {\n@@ -2079,1 +2079,1 @@\n-  while (f.cb()->as_nmethod_or_null()->needs_stack_repair()) {\n+  while (f.cb()->as_nmethod()->needs_stack_repair()) {\n@@ -2087,1 +2087,1 @@\n-  int frames_size = bottom - top;\n+  frames_size += bottom - top;\n@@ -2124,4 +2124,0 @@\n-  if (f.cb()->as_nmethod_or_null()->needs_stack_repair()) {\n-    return remove_scalarized_frames(f, chunk, argsize);\n-  }\n-\n@@ -2141,3 +2137,0 @@\n-    frame_size += f.cb()->frame_size();\n-    argsize = f.stack_argsize();\n-\n@@ -2150,0 +2143,9 @@\n+\n+    if (f.cb()->as_nmethod()->needs_stack_repair()) {\n+      return remove_scalarized_frames(f, chunk, frame_size, argsize);\n+    } else {\n+      frame_size += f.cb()->frame_size();\n+      argsize = f.stack_argsize();\n+    }\n+  } else if (f.cb()->as_nmethod()->needs_stack_repair()) {\n+    return remove_scalarized_frames(f, chunk, 0, argsize);\n","filename":"src\/hotspot\/share\/runtime\/continuationFreezeThaw.cpp","additions":13,"deletions":11,"binary":false,"changes":24,"status":"modified"}]}