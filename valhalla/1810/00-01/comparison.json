{"files":[{"patch":"@@ -110,8 +110,8 @@\n-            ToolBox.MemoryFileManager memoryFM1 = new ToolBox.MemoryFileManager(fm);\n-            new JavacTask(tb).fileManager(memoryFM1)\n-                              .sources(aJava, bJava)\n-                              .run();\n-            ToolBox.MemoryFileManager memoryFM2 = new ToolBox.MemoryFileManager(fm);\n-            new JavacTask(tb).fileManager(memoryFM2)\n-                              .sources(bJava, aJava)\n-                              .run();\n+            try (var memoryFM1 = new ToolBox.MemoryFileManager(fm, false);\n+                 var memoryFM2 = new ToolBox.MemoryFileManager(fm, false)) {\n+                new JavacTask(tb).fileManager(memoryFM1)\n+                        .sources(aJava, bJava)\n+                        .run();\n+                new JavacTask(tb).fileManager(memoryFM2)\n+                        .sources(bJava, aJava)\n+                        .run();\n@@ -119,2 +119,3 @@\n-            Assert.check(Arrays.equals(memoryFM1.getFileBytes(StandardLocation.CLASS_OUTPUT, \"B\"),\n-                                       memoryFM2.getFileBytes(StandardLocation.CLASS_OUTPUT, \"B\")));\n+                Assert.check(Arrays.equals(memoryFM1.getFileBytes(StandardLocation.CLASS_OUTPUT, \"B\"),\n+                        memoryFM2.getFileBytes(StandardLocation.CLASS_OUTPUT, \"B\")));\n+            }\n","filename":"test\/langtools\/tools\/javac\/classfiles\/InnerClasses\/T8068517.java","additions":11,"deletions":10,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -70,1 +70,0 @@\n-import toolbox.TestRunner.Test;\n","filename":"test\/langtools\/tools\/javac\/processing\/filer\/TestOriginatingElements.java","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -854,0 +854,8 @@\n+        \/**\n+         * Constructs a memory file manager which stores output files in memory,\n+         * and delegates to a default file manager for input files.\n+         *\/\n+        public MemoryFileManager() {\n+            this(ToolProvider.getSystemJavaCompiler().getStandardFileManager(null, null, null), true);\n+        }\n+\n@@ -876,0 +884,13 @@\n+        \/**\n+         * Returns the set of names of files that have been written to a given\n+         * location.\n+         *\n+         * @param location the location\n+         * @return the set of file names\n+         *\/\n+        public Set<String> getFileNames(Location location) {\n+            Map<String, Content> filesForLocation = files.get(location);\n+            return (filesForLocation == null)\n+                    ? Collections.emptySet() : filesForLocation.keySet();\n+        }\n+\n@@ -895,1 +916,1 @@\n-         * @return the content\n+         * @return the content as a string\n@@ -897,0 +918,5 @@\n+        public String getFileString(Location location, String name) {\n+            Content content = getFile(location, name);\n+            return (content == null) ? null : content.getString();\n+        }\n+\n","filename":"test\/langtools\/tools\/lib\/toolbox\/ToolBox.java","additions":27,"deletions":1,"binary":false,"changes":28,"status":"modified"}]}