{"files":[{"patch":"@@ -102,0 +102,3 @@\n+\n+COMPILATION_OUTPUTDIR := $(if $($(MODULE)_BIN), $($(MODULE)_BIN), $(JDK_OUTPUTDIR)\/modules)\n+\n@@ -108,1 +111,1 @@\n-    BIN := $(if $($(MODULE)_BIN), $($(MODULE)_BIN), $(JDK_OUTPUTDIR)\/modules), \\\n+    BIN := $(COMPILATION_OUTPUTDIR), \\\n@@ -141,0 +144,9 @@\n+  # Temporarily compile valueclasses into a separate directory with the form:\n+  #   <tempdir>\/<module>\/<classpath>\n+  # and then copy the class files into:\n+  #   <outdir>\/<module>\/META-INF\/preview\/<classpath>\n+  # We cannot compile directly into the desired directory because it's the\n+  # compiler which creates the original '<module>\/<classpath>\/...' hierarchy.\n+  VALUECLASS_OUTPUTDIR := $(SUPPORT_OUTPUTDIR)\/$(VALUECLASSES_STR)\n+  PREVIEW_OUTPUTDIR := $(COMPILATION_OUTPUTDIR)\/$(MODULE)\/META-INF\/preview\n+\n@@ -148,1 +160,1 @@\n-        BIN := $(SUPPORT_OUTPUTDIR)\/$(VALUECLASSES_STR)\/, \\\n+        BIN := $(VALUECLASS_OUTPUTDIR)\/, \\\n@@ -166,0 +178,10 @@\n+    # Restructure the value class hierarchy from \"<module>\/<classpath>\/...\"\n+    # to \"<module>\/META-INF\/preview\/<classpath>\/...\"\n+    # When module patching is removed, this could probably be a move rather than a copy.\n+    $(PREVIEW_OUTPUTDIR)\/_the.copy_valueclasses.marker: $($(MODULE)-$(VALUECLASSES_STR))\n+\t\t$(call MakeTargetDir)\n+\t\t$(CP) -R $(VALUECLASS_OUTPUTDIR)\/$(MODULE)\/. $(@D)\/\n+\t\t$(TOUCH) $@\n+\n+    TARGETS += $(PREVIEW_OUTPUTDIR)\/_the.copy_valueclasses.marker\n+\n","filename":"make\/CompileJavaModules.gmk","additions":24,"deletions":2,"binary":false,"changes":26,"status":"modified"}]}