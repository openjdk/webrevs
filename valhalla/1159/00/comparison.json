{"files":[{"patch":"@@ -1019,1 +1019,1 @@\n-    assert(_layout->start()->next_block()->kind() == LayoutRawBlock::EMPTY, \"Unexpected\");\n+    assert(_layout->start()->next_block()->kind() == LayoutRawBlock::EMPTY || !UseCompressedClassPointers, \"Unexpected\");\n","filename":"src\/hotspot\/share\/classfile\/fieldLayoutBuilder.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -54,0 +54,10 @@\n+\/*\n+ * @test id=NullMarker64NoCompressedOopsNoCompressedKlassPointers\n+ * @requires vm.bits == 64\n+ * @library \/test\/lib\n+ * @modules java.base\/jdk.internal.vm.annotation\n+ * @enablePreview\n+ * @compile FieldLayoutAnalyzer.java NullMarkersTest.java\n+ * @run main\/othervm NullMarkersTest 3\n+ *\/\n+\n@@ -278,1 +288,1 @@\n-  static ProcessBuilder exec(String compressedOopsArg, String... args) throws Exception {\n+  static ProcessBuilder exec(String compressedOopsArg, String compressedKlassPointersArg, String... args) throws Exception {\n@@ -287,0 +297,3 @@\n+    if (compressedKlassPointersArg != null) {\n+      Collections.addAll(argsList, compressedKlassPointersArg);\n+    }\n@@ -296,0 +309,1 @@\n+    String compressedKlassPointersArg;\n@@ -299,0 +313,1 @@\n+                compressedKlassPointersArg = null;\n@@ -301,0 +316,1 @@\n+                compressedKlassPointersArg =  \"-XX:+UseCompressedClassPointers\";\n@@ -303,0 +319,4 @@\n+                compressedKlassPointersArg = \"-XX:+UseCompressedClassPointers\";\n+                break;\n+      case \"3\": compressedOopsArg = \"-XX:-UseCompressedOops\";\n+                compressedKlassPointersArg = \"-XX:-UseCompressedClassPointers\";\n@@ -311,1 +331,1 @@\n-    ProcessBuilder pb = exec(compressedOopsArg, \"NullMarkersTest$TestRunner\");\n+    ProcessBuilder pb = exec(compressedOopsArg, compressedKlassPointersArg, \"NullMarkersTest$TestRunner\");\n@@ -314,0 +334,3 @@\n+    if (out.getExitValue() != 0) {\n+      out.outputTo(System.out);\n+    }\n","filename":"test\/hotspot\/jtreg\/runtime\/valhalla\/inlinetypes\/field_layout\/NullMarkersTest.java","additions":25,"deletions":2,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -54,0 +54,10 @@\n+\/*\n+ * @test id=64bitsNoCompressedOopsNoCompressKlassPointers\n+ * @requires vm.bits == 64\n+ * @library \/test\/lib\n+ * @modules java.base\/jdk.internal.vm.annotation\n+ * @enablePreview\n+ * @compile FieldLayoutAnalyzer.java ValueFieldInheritanceTest.java\n+ * @run main\/othervm -Xint ValueFieldInheritanceTest 3\n+ *\/\n+\n@@ -164,1 +174,1 @@\n-  static ProcessBuilder exec(String compressedOopsArg, String... args) throws Exception {\n+  static ProcessBuilder exec(String compressedOopsArg, String compressedKlassPointersArg, String... args) throws Exception {\n@@ -172,0 +182,3 @@\n+    if (compressedKlassPointersArg != null) {\n+      Collections.addAll(argsList, compressedKlassPointersArg);\n+    }\n@@ -180,0 +193,1 @@\n+    String compressedKlassPointersArg;\n@@ -183,0 +197,1 @@\n+                compressedKlassPointersArg = null;\n@@ -185,0 +200,1 @@\n+                compressedKlassPointersArg =  \"-XX:+UseCompressedClassPointers\";\n@@ -187,0 +203,4 @@\n+                compressedKlassPointersArg = \"-XX:+UseCompressedClassPointers\";\n+                break;\n+      case \"3\": compressedOopsArg = \"-XX:-UseCompressedOops\";\n+                compressedKlassPointersArg = \"-XX:-UseCompressedClassPointers\";\n@@ -195,1 +215,1 @@\n-    ProcessBuilder pb = exec(compressedOopsArg, \"ValueFieldInheritanceTest$TestRunner\");\n+    ProcessBuilder pb = exec(compressedOopsArg, compressedKlassPointersArg, \"ValueFieldInheritanceTest$TestRunner\");\n","filename":"test\/hotspot\/jtreg\/runtime\/valhalla\/inlinetypes\/field_layout\/ValueFieldInheritanceTest.java","additions":22,"deletions":2,"binary":false,"changes":24,"status":"modified"}]}