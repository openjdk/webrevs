{"files":[{"patch":"@@ -1782,0 +1782,1 @@\n+                            skipUnsupportedNullRestriction();\n@@ -1787,0 +1788,1 @@\n+                                skipUnsupportedNullRestriction();\n@@ -1788,0 +1790,1 @@\n+                                skipUnsupportedNullRestriction();\n@@ -2045,1 +2048,1 @@\n-                case MONKEYS_AT:\n+                case MONKEYS_AT: case BANG:\n@@ -2081,1 +2084,2 @@\n-                            nextKind == TokenKind.COLCOL;\n+                            nextKind == TokenKind.COLCOL ||\n+                            (allowNullRestrictedTypes && EMOTIONAL_QUALIFIER.test(nextKind));\n@@ -2926,4 +2930,1 @@\n-            if (allowNullRestrictedTypes && EMOTIONAL_QUALIFIER.test(token.kind)) {\n-                unsupportedNullRestriction();\n-                nextToken();\n-            }\n+            skipUnsupportedNullRestriction();\n@@ -2959,4 +2960,1 @@\n-            if (allowNullRestrictedTypes && EMOTIONAL_QUALIFIER.test(token.kind)) {\n-                checkNullRestrictionLocation();\n-                nextToken();\n-            }\n+            skipUnsupportedNullRestriction();\n@@ -2974,4 +2972,1 @@\n-                    if (allowNullRestrictedTypes && EMOTIONAL_QUALIFIER.test(token.kind)) {\n-                        checkNullRestrictionLocation();\n-                        nextToken();\n-                    }\n+                    skipUnsupportedNullRestriction();\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/parser\/JavacParser.java","additions":9,"deletions":14,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -45,0 +45,15 @@\n+    void testNoBangInMrefQualifier() {\n+        Runnable r = Foo!<String>::m;\n+        Runnable r = Foo<String!>::m;\n+        Runnable r = Foo<String>!::m;\n+        Runnable r = Foo<String>![]::m;\n+        Runnable r = Foo<String>![]!::m;\n+        Runnable r = Foo<String>.Foo!<Integer>::m;\n+        Runnable r = Foo<String>.Foo<Integer!>::m;\n+        Runnable r = Foo<String>.Foo<Integer>!::m;\n+        Runnable r = Foo<String>.Foo!<Integer>::m;\n+        Runnable r = Foo<String>.Foo<Integer!>::m;\n+        Runnable r = Foo<String>.Foo<Integer>![]::m;\n+        Runnable r = Foo<String>.Foo<Integer>![]!::m;\n+    }\n+\n","filename":"test\/langtools\/tools\/javac\/nullability\/NullRestrictionNegParserTest.java","additions":15,"deletions":0,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -26,2 +26,16 @@\n-NullRestrictionNegParserTest.java:46:24: compiler.err.unsupported.null.restriction\n-26 errors\n+NullRestrictionNegParserTest.java:46:25: compiler.err.unsupported.null.restriction\n+NullRestrictionNegParserTest.java:47:32: compiler.err.unsupported.null.restriction\n+NullRestrictionNegParserTest.java:48:33: compiler.err.unsupported.null.restriction\n+NullRestrictionNegParserTest.java:49:33: compiler.err.unsupported.null.restriction\n+NullRestrictionNegParserTest.java:50:33: compiler.err.unsupported.null.restriction\n+NullRestrictionNegParserTest.java:50:36: compiler.err.unsupported.null.restriction\n+NullRestrictionNegParserTest.java:51:37: compiler.err.unsupported.null.restriction\n+NullRestrictionNegParserTest.java:52:45: compiler.err.unsupported.null.restriction\n+NullRestrictionNegParserTest.java:53:46: compiler.err.unsupported.null.restriction\n+NullRestrictionNegParserTest.java:54:37: compiler.err.unsupported.null.restriction\n+NullRestrictionNegParserTest.java:55:45: compiler.err.unsupported.null.restriction\n+NullRestrictionNegParserTest.java:56:46: compiler.err.unsupported.null.restriction\n+NullRestrictionNegParserTest.java:57:46: compiler.err.unsupported.null.restriction\n+NullRestrictionNegParserTest.java:57:49: compiler.err.unsupported.null.restriction\n+NullRestrictionNegParserTest.java:61:24: compiler.err.unsupported.null.restriction\n+40 errors\n","filename":"test\/langtools\/tools\/javac\/nullability\/NullRestrictionNegParserTest.out","additions":16,"deletions":2,"binary":false,"changes":18,"status":"modified"}]}