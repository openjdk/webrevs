{"files":[{"patch":"@@ -311,1 +311,1 @@\n-        assertFail(\"compiler.err.type.found.req\",\n+        assertFail(\"compiler.err.type.found.req\", \/\/ --enable-preview -source\"\n@@ -313,1 +313,1 @@\n-                value class V {\n+                class V {\n@@ -324,1 +324,25 @@\n-            assertOKWithWarning(\"compiler.warn.attempt.to.synchronize.on.instance.of.value.based.class\",\n+            assertOKWithWarning(\"compiler.warn.attempt.to.synchronize.on.instance.of.value.based.class\", \/\/ empty options\n+                    \"\"\"\n+                    class V {\n+                        final Integer val = Integer.valueOf(42);\n+                        void test() {\n+                            synchronized (val) { \/\/ warn\n+                            }\n+                        }\n+                    }\n+                    \"\"\");\n+            setCompileOptions(new String[] {\"--source\",\n+                    Integer.toString(Runtime.version().feature())});\n+            assertOKWithWarning(\"compiler.warn.attempt.to.synchronize.on.instance.of.value.based.class\", \/\/ --source\n+                    \"\"\"\n+                    class V {\n+                        final Integer val = Integer.valueOf(42);\n+                        void test() {\n+                            synchronized (val) { \/\/ warn\n+                            }\n+                        }\n+                    }\n+                    \"\"\");\n+            setCompileOptions(new String[] {\"--enable-preview\", \"--source\",\n+                    Integer.toString(Runtime.version().feature())});\n+            assertFail(\"compiler.err.type.found.req\", \/\/ --enable-preview --source\n@@ -334,0 +358,3 @@\n+            \/* we should add tests for --release and --release --enable-preview once the stubs used for the latest\n+             * release have been updated, right now they are the same as those for 22\n+             *\/\n","filename":"test\/langtools\/tools\/javac\/valhalla\/value-objects\/ValueObjectCompilationTests.java","additions":30,"deletions":3,"binary":false,"changes":33,"status":"modified"}]}