{"files":[{"patch":"@@ -301,1 +301,1 @@\n-        if (!ImageResourcesTree.isTreeInfoResource(name)) {\n+        if (location.getType() == ImageLocation.LocationType.RESOURCE) {\n@@ -418,1 +418,2 @@\n-                        if (!ImageResourcesTree.isTreeInfoResource(name)) {\n+                        ImageLocation location = reader.findLocation(name);\n+                        if (location.getType() == ImageLocation.LocationType.RESOURCE) {\n@@ -420,6 +421,4 @@\n-                                int offset = name.indexOf('\/', 1);\n-\n-                                String newModule = offset != -1 ?\n-                                        name.substring(1, offset) :\n-                                        \"<unknown>\";\n-\n+                                String newModule = location.getModule();\n+                                if (newModule.isEmpty()) {\n+                                    newModule = \"<unknown>\";\n+                                }\n@@ -431,2 +430,0 @@\n-\n-                            ImageLocation location = reader.findLocation(name);\n","filename":"src\/jdk.jlink\/share\/classes\/jdk\/tools\/jimage\/JImageTask.java","additions":7,"deletions":10,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -50,4 +50,0 @@\n-    public static boolean isTreeInfoResource(String path) {\n-        return path.startsWith(\"\/packages\/\") || path.startsWith(\"\/modules\/\");\n-    }\n-\n","filename":"src\/jdk.jlink\/share\/classes\/jdk\/tools\/jlink\/internal\/ImageResourcesTree.java","additions":0,"deletions":4,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -86,0 +86,1 @@\n+                \"\/java.base\/module-info.class\",\n@@ -89,0 +90,1 @@\n+                \"\/java.logging\/module-info.class\",\n@@ -99,0 +101,1 @@\n+        assertContainsResources(nodes.get(\"\/modules\/java.base\"), \"module-info.class\");\n@@ -103,0 +106,1 @@\n+        assertContainsResources(nodes.get(\"\/modules\/java.logging\"), \"module-info.class\");\n","filename":"test\/jdk\/tools\/jlink\/whitebox\/jdk.jlink\/jdk\/tools\/jlink\/internal\/ImageResourcesTreeTest.java","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"}]}