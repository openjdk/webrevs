{"files":[{"patch":"@@ -3064,1 +3064,2 @@\n-    u2 recognized_modifiers = RECOGNIZED_INNER_CLASS_MODIFIERS;\n+    \/\/ Access flags\n+    u2 flags;\n@@ -3067,1 +3068,3 @@\n-      recognized_modifiers |= JVM_ACC_MODULE;\n+      flags = cfs->get_u2_fast() & (RECOGNIZED_INNER_CLASS_MODIFIERS | JVM_ACC_MODULE);\n+    } else {\n+      flags = cfs->get_u2_fast() & RECOGNIZED_INNER_CLASS_MODIFIERS;\n@@ -3070,3 +3073,0 @@\n-    \/\/ Access flags\n-    u2 flags = cfs->get_u2_fast() & recognized_modifiers;\n-\n@@ -3086,2 +3086,2 @@\n-    const char* name = inner_name_index == 0 ? \"unnamed\" : cp->symbol_at(inner_name_index)->as_utf8();\n-    verify_legal_class_modifiers(flags, name, false, CHECK_0);\n+    const char* inner_name = inner_name_index == 0 ? \"unnamed\" : cp->symbol_at(inner_name_index)->as_utf8();\n+    verify_legal_class_modifiers(flags, inner_name, CHECK_0);\n@@ -4425,1 +4425,1 @@\n-void ClassFileParser::verify_legal_class_modifiers(jint flags, const char* name, bool is_Object, TRAPS) const {\n+void ClassFileParser::verify_legal_class_modifiers(jint flags, const char* inner_name, TRAPS) const {\n@@ -4427,1 +4427,0 @@\n-  const bool is_inner_class = name != nullptr;\n@@ -4462,1 +4461,1 @@\n-    if (name == nullptr) { \/\/ Not an inner class\n+    if (inner_name == nullptr) { \/\/ Not an inner class\n@@ -4476,1 +4475,1 @@\n-        name, class_note, _class_name->as_C_string(), flags\n+        inner_name, class_note, _class_name->as_C_string(), flags\n@@ -5787,1 +5786,2 @@\n-  u2 recognized_modifiers = JVM_RECOGNIZED_CLASS_MODIFIERS;\n+  \/\/ Access flags\n+  u2 flags;\n@@ -5790,1 +5790,3 @@\n-    recognized_modifiers |= JVM_ACC_MODULE;\n+    flags = stream->get_u2_fast() & (JVM_RECOGNIZED_CLASS_MODIFIERS | JVM_ACC_MODULE);\n+  } else {\n+    flags = stream->get_u2_fast() & JVM_RECOGNIZED_CLASS_MODIFIERS;\n@@ -5793,3 +5795,0 @@\n-  \/\/ Access flags\n-  u2 flags = stream->get_u2_fast() & recognized_modifiers;\n-\n@@ -5810,0 +5809,11 @@\n+  verify_legal_class_modifiers(flags, nullptr, CHECK);\n+\n+  short bad_constant = class_bad_constant_seen();\n+  if (bad_constant != 0) {\n+    \/\/ Do not throw CFE until after the access_flags are checked because if\n+    \/\/ ACC_MODULE is set in the access flags, then NCDFE must be thrown, not CFE.\n+    classfile_parse_error(\"Unknown constant tag %u in class file %s\", bad_constant, THREAD);\n+    return;\n+  }\n+\n+  _access_flags.set_flags(flags);\n@@ -5822,14 +5832,0 @@\n-  bool is_java_lang_Object = class_name_in_cp == vmSymbols::java_lang_Object();\n-\n-  verify_legal_class_modifiers(flags, nullptr, is_java_lang_Object, CHECK);\n-\n-  _access_flags.set_flags(flags);\n-\n-  short bad_constant = class_bad_constant_seen();\n-  if (bad_constant != 0) {\n-    \/\/ Do not throw CFE until after the access_flags are checked because if\n-    \/\/ ACC_MODULE is set in the access flags, then NCDFE must be thrown, not CFE.\n-    classfile_parse_error(\"Unknown constant tag %u in class file %s\", bad_constant, THREAD);\n-    return;\n-  }\n-\n","filename":"src\/hotspot\/share\/classfile\/classFileParser.cpp","additions":26,"deletions":30,"binary":false,"changes":56,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -466,1 +466,1 @@\n-  void verify_legal_class_modifiers(jint flags, const char* name, bool is_Object, TRAPS) const;\n+  void verify_legal_class_modifiers(jint flags, const char* name, TRAPS) const;\n","filename":"src\/hotspot\/share\/classfile\/classFileParser.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -133,1 +133,0 @@\n-runtime\/AccModule\/ConstModule.java 8294051 generic-all\n","filename":"test\/hotspot\/jtreg\/ProblemList.txt","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"}]}