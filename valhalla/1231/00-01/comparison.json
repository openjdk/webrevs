{"files":[{"patch":"@@ -867,3 +867,4 @@\n-      \/\/ We are about to create a SafePointScalarObjectNode as if this is a normal object. Add an additional top input\n-      \/\/ to skip over the IsInit check later in PhaseOutput::filLocArray() for inline types.\n-      sfpt->add_req(C->top());\n+      \/\/ We are about to create a SafePointScalarObjectNode as if this is a normal object. Add an additional int input\n+      \/\/ with value 1 to indicate that the buffer is always initialized (i.e. IsInit is true). This input is checked\n+      \/\/ later in PhaseOutput::filLocArray() for inline types.\n+      sfpt->add_req(_igvn.intcon(1));\n@@ -993,1 +994,2 @@\n-  assert(safepoints.length() == 0 || !res_type->is_inlinetypeptr() || C->has_circular_inline_type(), \"Inline type allocations should not have safepoint uses\");\n+  assert(safepoints.length() == 0 || !res_type->is_inlinetypeptr() || C->has_circular_inline_type(),\n+         \"Inline type allocations should have been scalarized earlier\");\n@@ -1252,1 +1254,2 @@\n-      assert(!inline_alloc || C->has_circular_inline_type(), \"Inline type allocations should not have safepoint uses\");\n+      assert(!inline_alloc || C->has_circular_inline_type(),\n+             \"Inline type allocations should have been scalarized earlier\");\n","filename":"src\/hotspot\/share\/opto\/macro.cpp","additions":8,"deletions":5,"binary":false,"changes":13,"status":"modified"}]}