{"files":[{"patch":"@@ -5258,1 +5258,1 @@\n-                             \"\\\"%s\\\" (or dumping to %s\/core.%d)\",\n+                             \"\\\"%s\\\" (alternatively, falling back to %s\/core.%d)\",\n","filename":"src\/hotspot\/os\/linux\/os_linux.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -110,0 +110,1 @@\n+  stringStream buf(buffer, bufferSize);\n@@ -111,2 +112,2 @@\n-    jio_snprintf(buffer, bufferSize, \"CreateCoredumpOnCrash is disabled from command line\");\n-    VMError::record_coredump_status(buffer, false);\n+    buf.print(\"CreateCoredumpOnCrash is disabled from command line\");\n+    VMError::record_coredump_status(buf.freeze(), false);\n@@ -119,1 +120,5 @@\n-      jio_snprintf(buffer, bufferSize, \"core.%d (may not exist)\", current_process_id());\n+      \/\/ In the warning message, let the user know.\n+      if (check_only) {\n+        buf.print(\"the core path couldn't be determined. It commonly defaults to \");\n+      }\n+      buf.print(\"core.%d%s\", current_process_id(), check_only ? \"\" : \" (may not exist)\");\n@@ -122,1 +127,6 @@\n-      jio_snprintf(buffer, bufferSize, \"Core dumps may be processed with %s\", core_path);\n+      if (check_only) {\n+        buf.print(\"core dumps may be further processed by the following: \");\n+      } else {\n+        buf.print(\"Determined by the following: \");\n+      }\n+      buf.print(\"%s\", core_path);\n@@ -125,1 +135,4 @@\n-      jio_snprintf(buffer, bufferSize, \"%s (may not exist)\", core_path);\n+      if (check_only) {\n+        buf.print(\"the rlimit couldn't be determined. If resource limits permit, the core dump will be located at \");\n+      }\n+      buf.print(\"%s%s\", core_path, check_only ? \"\" : \" (may not exist)\");\n@@ -129,1 +142,1 @@\n-          jio_snprintf(buffer, bufferSize, \"%s\", core_path);\n+          buf.print(\"%s\", core_path);\n@@ -133,1 +146,1 @@\n-          jio_snprintf(buffer, bufferSize, \"Core dumps have been disabled. To enable core dumping, try \\\"ulimit -c unlimited\\\" before starting Java again\");\n+          buf.print(\"%s dumps have been disabled. To enable core dumping, try \\\"ulimit -c unlimited\\\" before starting Java again\", check_only ? \"core\" : \"Core\");\n@@ -137,1 +150,6 @@\n-          jio_snprintf(buffer, bufferSize, \"%s (max size \" UINT64_FORMAT \" k). To ensure a full core dump, try \\\"ulimit -c unlimited\\\" before starting Java again\", core_path, uint64_t(rlim.rlim_cur) \/ K);\n+          if (check_only) {\n+            buf.print(\"core dumps are constrained \");\n+          } else {\n+             buf.print( \"%s \", core_path);\n+          }\n+          buf.print( \"(max size \" UINT64_FORMAT \" k). To ensure a full core dump, try \\\"ulimit -c unlimited\\\" before starting Java again\", uint64_t(rlim.rlim_cur) \/ K);\n@@ -141,0 +159,1 @@\n+    const char* result = buf.freeze();\n@@ -142,1 +161,1 @@\n-      VMError::record_coredump_status(buffer, success);\n+      VMError::record_coredump_status(result, success);\n@@ -144,1 +163,1 @@\n-      warning(\"CreateCoredumpOnCrash specified, but %s\", buffer);\n+      warning(\"CreateCoredumpOnCrash specified, but %s\", result);\n","filename":"src\/hotspot\/os\/posix\/os_posix.cpp","additions":29,"deletions":10,"binary":false,"changes":39,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -75,2 +75,2 @@\n-           # Core dump will be written. Default location: Core dumps may be processed with \"\/usr\/share\/apport\/apport %p %s %c %P\" (or dumping to\n-             \/home\/cheleswer\/Desktop\/core.6212)\n+           # Core dump will be written. Default location: Determined by the following:\n+           \"\/usr\/share\/apport\/apport %p %s %c %P\" (alternatively, falling back to \/home\/cheleswer\/Desktop\/core.6212)\n","filename":"test\/hotspot\/jtreg\/runtime\/ErrorHandling\/TestCrashOnOutOfMemoryError.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"}]}