{"files":[{"patch":"@@ -1,1 +1,8 @@\n-# Welcome to the JDK!\n+# Welcome to OpenJDK 25 Updates!\n+\n+The JDK 25 Updates project uses two GitHub repositories.\n+Updates are continuously developed in the repository [jdk25u-dev](https:\/\/github.com\/openjdk\/jdk25u-dev). This is the repository usually targeted by contributors.\n+The [jdk25u](https:\/\/github.com\/openjdk\/jdk25u) repository is used for rampdown of the update releases of jdk25u and only accepts critical changes that must make the next release during rampdown. (You probably do not want to target jdk25u).\n+\n+For more OpenJDK 25 updates specific information such as timelines and contribution guidelines see the [project wiki page](https:\/\/wiki.openjdk.org\/display\/JDKUpdates\/JDK+25u\/).\n+\n","filename":"README.md","additions":8,"deletions":1,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -671,1 +671,1 @@\n-of Visual Studio is 2022.<\/p>\n+of Visual Studio is 2026.<\/p>\n","filename":"doc\/building.html","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -471,1 +471,1 @@\n-The maximum accepted version of Visual Studio is 2022.\n+The maximum accepted version of Visual Studio is 2026.\n","filename":"doc\/building.md","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n-VALID_VS_VERSIONS=\"2022 2019\"\n+VALID_VS_VERSIONS=\"2022 2019 2026\"\n@@ -60,0 +60,15 @@\n+VS_DESCRIPTION_2026=\"Microsoft Visual Studio 2026\"\n+VS_VERSION_INTERNAL_2026=145\n+VS_MSVCR_2026=vcruntime140.dll\n+VS_VCRUNTIME_1_2026=vcruntime140_1.dll\n+VS_MSVCP_2026=msvcp140.dll\n+VS_ENVVAR_2026=\"VS180COMNTOOLS\"\n+VS_USE_UCRT_2026=\"true\"\n+VS_VS_INSTALLDIR_2026=\"Microsoft Visual Studio\/18\"\n+VS_EDITIONS_2026=\"BuildTools Community Professional Enterprise\"\n+VS_SDK_INSTALLDIR_2026=\n+VS_VS_PLATFORM_NAME_2026=\"v145\"\n+VS_SDK_PLATFORM_NAME_2026=\n+VS_SUPPORTED_2026=true\n+VS_TOOLSET_SUPPORTED_2026=true\n+\n","filename":"make\/autoconf\/toolchain_microsoft.m4","additions":16,"deletions":1,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -159,0 +159,4 @@\n+  ifeq ($(SHIP_DEBUG_SYMBOLS), public)\n+    CFLAGS_STRIPPED_DEBUGINFO := -DHAS_STRIPPED_DEBUGINFO\n+  endif\n+\n@@ -184,0 +188,1 @@\n+    whitebox.cpp_CXXFLAGS := $(CFLAGS_STRIPPED_DEBUGINFO), \\\n","filename":"make\/hotspot\/lib\/CompileJvm.gmk","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -239,1 +239,1 @@\n-      DISABLED_WARNINGS_gcc_png.c := maybe-uninitialized unused-function, \\\n+      DISABLED_WARNINGS_gcc_png.c := maybe-uninitialized, \\\n@@ -250,1 +250,0 @@\n-      DISABLED_WARNINGS_clang_png.c := unused-function, \\\n","filename":"make\/modules\/java.desktop\/lib\/ClientLibraries.gmk","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -313,0 +313,10 @@\n+#ifdef R18_RESERVED\n+  \/*\n+  Do not modify r18_tls when restoring registers if it is a reserved register. On Windows,\n+  for example, r18_tls is used to store the pointer to the current thread's TEB (where TLS\n+  variables are stored). Therefore, modifying r18_tls would corrupt the TEB pointer.\n+  *\/\n+  __ pop(RegSet::range(r0, r17), sp);\n+  __ ldp(zr, r19, Address(__ post(sp, 2 * wordSize)));\n+  __ pop(RegSet::range(r20, r29), sp);\n+#else\n@@ -314,0 +324,1 @@\n+#endif\n@@ -326,0 +337,11 @@\n+#ifdef R18_RESERVED\n+  \/*\n+  Do not modify r18_tls when restoring registers if it is a reserved register. On Windows,\n+  for example, r18_tls is used to store the pointer to the current thread's TEB (where TLS\n+  variables are stored). Therefore, modifying r18_tls would corrupt the TEB pointer.\n+  *\/\n+  __ ldp(zr, r1, Address(__ post(sp, 2 * wordSize)));\n+  __ pop(RegSet::range(r2, r17), sp);\n+  __ ldp(zr, r19, Address(__ post(sp, 2 * wordSize)));\n+  __ pop(RegSet::range(r20, r29), sp);\n+#else\n@@ -328,0 +350,1 @@\n+#endif\n","filename":"src\/hotspot\/cpu\/aarch64\/c1_Runtime1_aarch64.cpp","additions":23,"deletions":0,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -334,7 +334,1 @@\n-    assert(patching_type == NMethodPatchingType::conc_data_patch, \"must be\");\n-    \/\/ Subsequent loads of oops must occur after load of guard value.\n-    \/\/ BarrierSetNMethod::disarm sets guard with release semantics.\n-    __ membar(__ LoadLoad);\n-    Address thread_disarmed_addr(rthread, in_bytes(bs_nm->thread_disarmed_guard_value_offset()));\n-    __ ldrw(rscratch2, thread_disarmed_addr);\n-    __ cmpw(rscratch1, rscratch2);\n+    ShouldNotReachHere();\n","filename":"src\/hotspot\/cpu\/aarch64\/gc\/shared\/barrierSetAssembler_aarch64.cpp","additions":1,"deletions":7,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -42,2 +42,1 @@\n-  conc_instruction_and_data_patch,\n-  conc_data_patch\n+  conc_instruction_and_data_patch\n","filename":"src\/hotspot\/cpu\/aarch64\/gc\/shared\/barrierSetAssembler_aarch64.hpp","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -61,2 +61,0 @@\n-  case NMethodPatchingType::conc_data_patch:\n-    return -4 * (5 + slow_path_size(nm));\n","filename":"src\/hotspot\/cpu\/aarch64\/gc\/shared\/barrierSetNMethod_aarch64.cpp","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -70,1 +70,1 @@\n-  virtual NMethodPatchingType nmethod_patching_type() { return NMethodPatchingType::conc_data_patch; }\n+  virtual NMethodPatchingType nmethod_patching_type() { return NMethodPatchingType::conc_instruction_and_data_patch; }\n","filename":"src\/hotspot\/cpu\/aarch64\/gc\/shenandoah\/shenandoahBarrierSetAssembler_aarch64.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -0,0 +1,649 @@\n+\/*\n+ * Copyright (c) 1997, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2012, 2025 SAP SE. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\n+ *\/\n+\n+#ifndef CPU_PPC_ATOMICACCESS_PPC_HPP\n+#define CPU_PPC_ATOMICACCESS_PPC_HPP\n+\n+#ifndef PPC64\n+#error \"Atomic currently only implemented for PPC64\"\n+#endif\n+\n+#include \"orderAccess_ppc.hpp\"\n+#include \"utilities\/debug.hpp\"\n+\n+\/\/ Implementation of class AtomicAccess\n+\n+\/\/\n+\/\/ machine barrier instructions:\n+\/\/\n+\/\/ - sync            two-way memory barrier, aka fence\n+\/\/ - lwsync          orders  Store|Store,\n+\/\/                            Load|Store,\n+\/\/                            Load|Load,\n+\/\/                   but not Store|Load\n+\/\/ - eieio           orders memory accesses for device memory (only)\n+\/\/ - isync           invalidates speculatively executed instructions\n+\/\/                   From the POWER ISA 2.06 documentation:\n+\/\/                    \"[...] an isync instruction prevents the execution of\n+\/\/                   instructions following the isync until instructions\n+\/\/                   preceding the isync have completed, [...]\"\n+\/\/                   From IBM's AIX assembler reference:\n+\/\/                    \"The isync [...] instructions causes the processor to\n+\/\/                   refetch any instructions that might have been fetched\n+\/\/                   prior to the isync instruction. The instruction isync\n+\/\/                   causes the processor to wait for all previous instructions\n+\/\/                   to complete. Then any instructions already fetched are\n+\/\/                   discarded and instruction processing continues in the\n+\/\/                   environment established by the previous instructions.\"\n+\/\/\n+\/\/ semantic barrier instructions:\n+\/\/ (as defined in orderAccess.hpp)\n+\/\/\n+\/\/ - release         orders Store|Store,       (maps to lwsync)\n+\/\/                           Load|Store\n+\/\/ - acquire         orders  Load|Store,       (maps to lwsync)\n+\/\/                           Load|Load\n+\/\/ - fence           orders Store|Store,       (maps to sync)\n+\/\/                           Load|Store,\n+\/\/                           Load|Load,\n+\/\/                          Store|Load\n+\/\/\n+\n+inline void pre_membar(atomic_memory_order order) {\n+  switch (order) {\n+    case memory_order_relaxed:\n+    case memory_order_acquire: break;\n+    case memory_order_release:\n+    case memory_order_acq_rel: __asm__ __volatile__ (\"lwsync\" : : : \"memory\"); break;\n+    default \/*conservative*\/ : __asm__ __volatile__ (\"sync\"   : : : \"memory\"); break;\n+  }\n+}\n+\n+inline void post_membar(atomic_memory_order order) {\n+  switch (order) {\n+    case memory_order_relaxed:\n+    case memory_order_release: break;\n+    case memory_order_acquire:\n+    case memory_order_acq_rel: __asm__ __volatile__ (\"isync\"  : : : \"memory\"); break;\n+    default \/*conservative*\/ : __asm__ __volatile__ (\"sync\"   : : : \"memory\"); break;\n+  }\n+}\n+\n+\n+\n+template<size_t byte_size>\n+struct Atomic::PlatformAdd {\n+  template<typename D, typename I>\n+  D add_then_fetch(D volatile* dest, I add_value, atomic_memory_order order) const;\n+\n+  template<typename D, typename I>\n+  D fetch_then_add(D volatile* dest, I add_value, atomic_memory_order order) const {\n+    return add_then_fetch(dest, add_value, order) - add_value;\n+  }\n+};\n+\n+template<>\n+template<typename D, typename I>\n+inline D Atomic::PlatformAdd<4>::add_then_fetch(D volatile* dest, I add_value,\n+                                                      atomic_memory_order order) const {\n+  STATIC_ASSERT(4 == sizeof(I));\n+  STATIC_ASSERT(4 == sizeof(D));\n+\n+  D result;\n+\n+  pre_membar(order);\n+\n+  __asm__ __volatile__ (\n+    \"1: lwarx   %[result], 0, %[dest]                 \\n\"\n+    \"   add     %[result], %[result], %[add_value]    \\n\"\n+    \"   stwcx.  %[result], 0, %[dest]                 \\n\"\n+    \"   bne-    1b                                    \\n\"\n+    : [result]     \"=&r\"  (result)\n+    : [add_value]  \"r\"    (add_value),\n+      [dest]       \"b\"    (dest)\n+    : \"cc\", \"memory\" );\n+\n+  post_membar(order);\n+\n+  return result;\n+}\n+\n+\n+template<>\n+template<typename D, typename I>\n+inline D Atomic::PlatformAdd<8>::add_then_fetch(D volatile* dest, I add_value,\n+                                                      atomic_memory_order order) const {\n+  STATIC_ASSERT(8 == sizeof(I));\n+  STATIC_ASSERT(8 == sizeof(D));\n+\n+  D result;\n+\n+  pre_membar(order);\n+\n+  __asm__ __volatile__ (\n+    \"1: ldarx   %[result], 0, %[dest]                 \\n\"\n+    \"   add     %[result], %[result], %[add_value]    \\n\"\n+    \"   stdcx.  %[result], 0, %[dest]                 \\n\"\n+    \"   bne-    1b                                    \\n\"\n+    : [result]     \"=&r\"  (result)\n+    : [add_value]  \"r\"    (add_value),\n+      [dest]       \"b\"    (dest)\n+    : \"cc\", \"memory\" );\n+\n+  post_membar(order);\n+\n+  return result;\n+}\n+\n+template<>\n+template<typename T>\n+inline T Atomic::PlatformXchg<4>::operator()(T volatile* dest,\n+                                                   T exchange_value,\n+                                                   atomic_memory_order order) const {\n+  STATIC_ASSERT(4 == sizeof(T));\n+  \/\/ Note that xchg doesn't necessarily do an acquire\n+  \/\/ (see synchronizer.cpp).\n+\n+  T old_value;\n+\n+  pre_membar(order);\n+\n+  __asm__ __volatile__ (\n+    \/* atomic loop *\/\n+    \"1:                                                 \\n\"\n+    \"   lwarx   %[old_value], 0, %[dest]                \\n\"\n+    \"   stwcx.  %[exchange_value], 0, %[dest]           \\n\"\n+    \"   bne-    1b                                      \\n\"\n+    \/* exit *\/\n+    \"2:                                                 \\n\"\n+    \/* out *\/\n+    : [old_value]       \"=&r\"   (old_value)\n+    \/* in *\/\n+    : [dest]            \"b\"     (dest),\n+      [exchange_value]  \"r\"     (exchange_value)\n+    \/* clobber *\/\n+    : \"cc\",\n+      \"memory\"\n+    );\n+\n+  post_membar(order);\n+\n+  return old_value;\n+}\n+\n+template<>\n+template<typename T>\n+inline T Atomic::PlatformXchg<8>::operator()(T volatile* dest,\n+                                                   T exchange_value,\n+                                                   atomic_memory_order order) const {\n+  STATIC_ASSERT(8 == sizeof(T));\n+  \/\/ Note that xchg doesn't necessarily do an acquire\n+  \/\/ (see synchronizer.cpp).\n+\n+  T old_value;\n+\n+  pre_membar(order);\n+\n+  __asm__ __volatile__ (\n+    \/* atomic loop *\/\n+    \"1:                                                 \\n\"\n+    \"   ldarx   %[old_value], 0, %[dest]                \\n\"\n+    \"   stdcx.  %[exchange_value], 0, %[dest]           \\n\"\n+    \"   bne-    1b                                      \\n\"\n+    \/* exit *\/\n+    \"2:                                                 \\n\"\n+    \/* out *\/\n+    : [old_value]       \"=&r\"   (old_value)\n+    \/* in *\/\n+    : [dest]            \"b\"     (dest),\n+      [exchange_value]  \"r\"     (exchange_value)\n+    \/* clobber *\/\n+    : \"cc\",\n+      \"memory\"\n+    );\n+\n+  post_membar(order);\n+\n+  return old_value;\n+}\n+\n+template<>\n+template<typename T>\n+inline T Atomic::PlatformCmpxchg<1>::operator()(T volatile* dest,\n+                                                      T compare_value,\n+                                                      T exchange_value,\n+                                                      atomic_memory_order order) const {\n+  STATIC_ASSERT(1 == sizeof(T));\n+\n+  \/\/ Note that cmpxchg guarantees a two-way memory barrier across\n+  \/\/ the cmpxchg, so it's really a 'fence_cmpxchg_fence' if not\n+  \/\/ specified otherwise (see atomicAccess.hpp).\n+\n+  const unsigned int masked_compare_val = (unsigned int)(unsigned char)compare_value;\n+\n+  unsigned int old_value;\n+\n+  pre_membar(order);\n+\n+  __asm__ __volatile__ (\n+    \/* simple guard *\/\n+    \"   lbz     %[old_value], 0(%[dest])                  \\n\"\n+    \"   cmpw    %[masked_compare_val], %[old_value]       \\n\"\n+    \"   bne-    2f                                        \\n\"\n+    \/* atomic loop *\/\n+    \"1:                                                   \\n\"\n+    \"   lbarx   %[old_value], 0, %[dest]                  \\n\"\n+    \"   cmpw    %[masked_compare_val], %[old_value]       \\n\"\n+    \"   bne-    2f                                        \\n\"\n+    \"   stbcx.  %[exchange_value], 0, %[dest]             \\n\"\n+    \"   bne-    1b                                        \\n\"\n+    \/* exit *\/\n+    \"2:                                                   \\n\"\n+    \/* out *\/\n+    : [old_value]       \"=&r\"   (old_value)\n+    \/* in *\/\n+    : [dest]                   \"b\"     (dest),\n+      [masked_compare_val]     \"r\"     (masked_compare_val),\n+      [exchange_value]         \"r\"     (exchange_value)\n+    \/* clobber *\/\n+    : \"cc\",\n+      \"memory\"\n+    );\n+\n+  post_membar(order);\n+\n+  return PrimitiveConversions::cast<T>((unsigned char)old_value);\n+}\n+\n+template<>\n+template<typename T>\n+inline T Atomic::PlatformCmpxchg<4>::operator()(T volatile* dest,\n+                                                      T compare_value,\n+                                                      T exchange_value,\n+                                                      atomic_memory_order order) const {\n+  STATIC_ASSERT(4 == sizeof(T));\n+\n+  \/\/ Note that cmpxchg guarantees a two-way memory barrier across\n+  \/\/ the cmpxchg, so it's really a 'fence_cmpxchg_fence' if not\n+  \/\/ specified otherwise (see atomicAccess.hpp).\n+\n+  T old_value;\n+\n+  pre_membar(order);\n+\n+  __asm__ __volatile__ (\n+    \/* simple guard *\/\n+    \"   lwz     %[old_value], 0(%[dest])                \\n\"\n+    \"   cmpw    %[compare_value], %[old_value]          \\n\"\n+    \"   bne-    2f                                      \\n\"\n+    \/* atomic loop *\/\n+    \"1:                                                 \\n\"\n+    \"   lwarx   %[old_value], 0, %[dest]                \\n\"\n+    \"   cmpw    %[compare_value], %[old_value]          \\n\"\n+    \"   bne-    2f                                      \\n\"\n+    \"   stwcx.  %[exchange_value], 0, %[dest]           \\n\"\n+    \"   bne-    1b                                      \\n\"\n+    \/* exit *\/\n+    \"2:                                                 \\n\"\n+    \/* out *\/\n+    : [old_value]       \"=&r\"   (old_value)\n+    \/* in *\/\n+    : [dest]            \"b\"     (dest),\n+      [compare_value]   \"r\"     (compare_value),\n+      [exchange_value]  \"r\"     (exchange_value)\n+    \/* clobber *\/\n+    : \"cc\",\n+      \"memory\"\n+    );\n+\n+  post_membar(order);\n+\n+  return old_value;\n+}\n+\n+template<>\n+template<typename T>\n+inline T Atomic::PlatformCmpxchg<8>::operator()(T volatile* dest,\n+                                                      T compare_value,\n+                                                      T exchange_value,\n+                                                      atomic_memory_order order) const {\n+  STATIC_ASSERT(8 == sizeof(T));\n+\n+  \/\/ Note that cmpxchg guarantees a two-way memory barrier across\n+  \/\/ the cmpxchg, so it's really a 'fence_cmpxchg_fence' if not\n+  \/\/ specified otherwise (see atomicAccess.hpp).\n+\n+  T old_value;\n+\n+  pre_membar(order);\n+\n+  __asm__ __volatile__ (\n+    \/* simple guard *\/\n+    \"   ld      %[old_value], 0(%[dest])                \\n\"\n+    \"   cmpd    %[compare_value], %[old_value]          \\n\"\n+    \"   bne-    2f                                      \\n\"\n+    \/* atomic loop *\/\n+    \"1:                                                 \\n\"\n+    \"   ldarx   %[old_value], 0, %[dest]                \\n\"\n+    \"   cmpd    %[compare_value], %[old_value]          \\n\"\n+    \"   bne-    2f                                      \\n\"\n+    \"   stdcx.  %[exchange_value], 0, %[dest]           \\n\"\n+    \"   bne-    1b                                      \\n\"\n+    \/* exit *\/\n+    \"2:                                                 \\n\"\n+    \/* out *\/\n+    : [old_value]       \"=&r\"   (old_value)\n+    \/* in *\/\n+    : [dest]            \"b\"     (dest),\n+      [compare_value]   \"r\"     (compare_value),\n+      [exchange_value]  \"r\"     (exchange_value)\n+    \/* clobber *\/\n+    : \"cc\",\n+      \"memory\"\n+    );\n+\n+  post_membar(order);\n+\n+  return old_value;\n+}\n+\n+template<size_t byte_size>\n+struct Atomic::PlatformOrderedLoad<byte_size, X_ACQUIRE>\n+{\n+  template <typename T>\n+  T operator()(const volatile T* p) const {\n+    T t = Atomic::load(p);\n+    \/\/ Use twi-isync for load_acquire (faster than lwsync).\n+    __asm__ __volatile__ (\"twi 0,%0,0\\n isync\\n\" : : \"r\" (t) : \"memory\");\n+    return t;\n+  }\n+};\n+\n+template<>\n+class Atomic::PlatformBitops<4, true> {\n+public:\n+  template<typename T>\n+  T fetch_then_and(T volatile* dest, T bits, atomic_memory_order order) const {\n+    STATIC_ASSERT(4 == sizeof(T));\n+    T old_value, result;\n+\n+    pre_membar(order);\n+\n+    __asm__ __volatile__ (\n+      \"1: lwarx   %[old_value], 0, %[dest]            \\n\"\n+      \"   and     %[result], %[old_value], %[bits]    \\n\"\n+      \"   stwcx.  %[result], 0, %[dest]               \\n\"\n+      \"   bne-    1b                                  \\n\"\n+      : [old_value]  \"=&r\"  (old_value),\n+        [result]     \"=&r\"  (result)\n+      : [dest]       \"b\"    (dest),\n+        [bits]       \"r\"    (bits)\n+      : \"cc\", \"memory\" );\n+\n+    post_membar(order);\n+    return old_value;\n+  }\n+\n+  template<typename T>\n+  T fetch_then_or(T volatile* dest, T bits, atomic_memory_order order) const {\n+    STATIC_ASSERT(4 == sizeof(T));\n+    T old_value, result;\n+\n+    pre_membar(order);\n+\n+    __asm__ __volatile__ (\n+      \"1: lwarx   %[old_value], 0, %[dest]            \\n\"\n+      \"   or      %[result], %[old_value], %[bits]    \\n\"\n+      \"   stwcx.  %[result], 0, %[dest]               \\n\"\n+      \"   bne-    1b                                  \\n\"\n+      : [old_value]  \"=&r\"  (old_value),\n+        [result]     \"=&r\"  (result)\n+      : [dest]       \"b\"    (dest),\n+        [bits]       \"r\"    (bits)\n+      : \"cc\", \"memory\" );\n+\n+    post_membar(order);\n+    return old_value;\n+  }\n+\n+  template<typename T>\n+  T fetch_then_xor(T volatile* dest, T bits, atomic_memory_order order) const {\n+    STATIC_ASSERT(4 == sizeof(T));\n+    T old_value, result;\n+\n+    pre_membar(order);\n+\n+    __asm__ __volatile__ (\n+      \"1: lwarx   %[old_value], 0, %[dest]            \\n\"\n+      \"   xor     %[result], %[old_value], %[bits]    \\n\"\n+      \"   stwcx.  %[result], 0, %[dest]               \\n\"\n+      \"   bne-    1b                                  \\n\"\n+      : [old_value]  \"=&r\"  (old_value),\n+        [result]     \"=&r\"  (result)\n+      : [dest]       \"b\"    (dest),\n+        [bits]       \"r\"    (bits)\n+      : \"cc\", \"memory\" );\n+\n+    post_membar(order);\n+    return old_value;\n+  }\n+\n+  template<typename T>\n+  T and_then_fetch(T volatile* dest, T bits, atomic_memory_order order) const {\n+    STATIC_ASSERT(4 == sizeof(T));\n+    T result;\n+\n+    pre_membar(order);\n+\n+    __asm__ __volatile__ (\n+      \"1: lwarx   %[result], 0, %[dest]            \\n\"\n+      \"   and     %[result], %[result], %[bits]    \\n\"\n+      \"   stwcx.  %[result], 0, %[dest]            \\n\"\n+      \"   bne-    1b                               \\n\"\n+      : [result]  \"=&r\"  (result)\n+      : [dest]    \"b\"    (dest),\n+        [bits]    \"r\"    (bits)\n+      : \"cc\", \"memory\" );\n+\n+    post_membar(order);\n+    return result;\n+  }\n+\n+  template<typename T>\n+  T or_then_fetch(T volatile* dest, T bits, atomic_memory_order order) const {\n+    STATIC_ASSERT(4 == sizeof(T));\n+    T result;\n+\n+    pre_membar(order);\n+\n+    __asm__ __volatile__ (\n+      \"1: lwarx   %[result], 0, %[dest]            \\n\"\n+      \"   or      %[result], %[result], %[bits]    \\n\"\n+      \"   stwcx.  %[result], 0, %[dest]            \\n\"\n+      \"   bne-    1b                               \\n\"\n+      : [result]  \"=&r\"  (result)\n+      : [dest]    \"b\"    (dest),\n+        [bits]    \"r\"    (bits)\n+      : \"cc\", \"memory\" );\n+\n+    post_membar(order);\n+    return result;\n+  }\n+\n+  template<typename T>\n+  T xor_then_fetch(T volatile* dest, T bits, atomic_memory_order order) const {\n+    STATIC_ASSERT(4 == sizeof(T));\n+    T result;\n+\n+    pre_membar(order);\n+\n+    __asm__ __volatile__ (\n+      \"1: lwarx   %[result], 0, %[dest]            \\n\"\n+      \"   xor     %[result], %[result], %[bits]    \\n\"\n+      \"   stwcx.  %[result], 0, %[dest]            \\n\"\n+      \"   bne-    1b                               \\n\"\n+      : [result]  \"=&r\"  (result)\n+      : [dest]    \"b\"    (dest),\n+        [bits]    \"r\"    (bits)\n+      : \"cc\", \"memory\" );\n+\n+    post_membar(order);\n+    return result;\n+  }\n+};\n+\n+template<>\n+class Atomic::PlatformBitops<8, true> {\n+public:\n+  template<typename T>\n+  T fetch_then_and(T volatile* dest, T bits, atomic_memory_order order) const {\n+    STATIC_ASSERT(8 == sizeof(T));\n+    T old_value, result;\n+\n+    pre_membar(order);\n+\n+    __asm__ __volatile__ (\n+      \"1: ldarx   %[old_value], 0, %[dest]            \\n\"\n+      \"   and     %[result], %[old_value], %[bits]    \\n\"\n+      \"   stdcx.  %[result], 0, %[dest]               \\n\"\n+      \"   bne-    1b                                  \\n\"\n+      : [old_value]  \"=&r\"  (old_value),\n+        [result]     \"=&r\"  (result)\n+      : [dest]       \"b\"    (dest),\n+        [bits]       \"r\"    (bits)\n+      : \"cc\", \"memory\" );\n+\n+    post_membar(order);\n+    return old_value;\n+  }\n+\n+  template<typename T>\n+  T fetch_then_or(T volatile* dest, T bits, atomic_memory_order order) const {\n+    STATIC_ASSERT(8 == sizeof(T));\n+    T old_value, result;\n+\n+    pre_membar(order);\n+\n+    __asm__ __volatile__ (\n+      \"1: ldarx   %[old_value], 0, %[dest]            \\n\"\n+      \"   or      %[result], %[old_value], %[bits]    \\n\"\n+      \"   stdcx.  %[result], 0, %[dest]               \\n\"\n+      \"   bne-    1b                                  \\n\"\n+      : [old_value]  \"=&r\"  (old_value),\n+        [result]     \"=&r\"  (result)\n+      : [dest]       \"b\"    (dest),\n+        [bits]       \"r\"    (bits)\n+      : \"cc\", \"memory\" );\n+\n+    post_membar(order);\n+    return old_value;\n+  }\n+\n+  template<typename T>\n+  T fetch_then_xor(T volatile* dest, T bits, atomic_memory_order order) const {\n+    STATIC_ASSERT(8 == sizeof(T));\n+    T old_value, result;\n+\n+    pre_membar(order);\n+\n+    __asm__ __volatile__ (\n+      \"1: ldarx   %[old_value], 0, %[dest]            \\n\"\n+      \"   xor     %[result], %[old_value], %[bits]    \\n\"\n+      \"   stdcx.  %[result], 0, %[dest]               \\n\"\n+      \"   bne-    1b                                  \\n\"\n+      : [old_value]  \"=&r\"  (old_value),\n+        [result]     \"=&r\"  (result)\n+      : [dest]       \"b\"    (dest),\n+        [bits]       \"r\"    (bits)\n+      : \"cc\", \"memory\" );\n+\n+    post_membar(order);\n+    return old_value;\n+  }\n+\n+  template<typename T>\n+  T and_then_fetch(T volatile* dest, T bits, atomic_memory_order order) const {\n+    STATIC_ASSERT(8 == sizeof(T));\n+    T result;\n+\n+    pre_membar(order);\n+\n+    __asm__ __volatile__ (\n+      \"1: ldarx   %[result], 0, %[dest]            \\n\"\n+      \"   and     %[result], %[result], %[bits]    \\n\"\n+      \"   stdcx.  %[result], 0, %[dest]            \\n\"\n+      \"   bne-    1b                               \\n\"\n+      : [result]     \"=&r\"  (result)\n+      : [dest]       \"b\"    (dest),\n+        [bits]       \"r\"    (bits)\n+      : \"cc\", \"memory\" );\n+\n+    post_membar(order);\n+    return result;\n+  }\n+\n+  template<typename T>\n+  T or_then_fetch(T volatile* dest, T bits, atomic_memory_order order) const {\n+    STATIC_ASSERT(8 == sizeof(T));\n+    T result;\n+\n+    pre_membar(order);\n+\n+    __asm__ __volatile__ (\n+      \"1: ldarx   %[result], 0, %[dest]            \\n\"\n+      \"   or      %[result], %[result], %[bits]    \\n\"\n+      \"   stdcx.  %[result], 0, %[dest]            \\n\"\n+      \"   bne-    1b                               \\n\"\n+      : [result]     \"=&r\"  (result)\n+      : [dest]       \"b\"    (dest),\n+        [bits]       \"r\"    (bits)\n+      : \"cc\", \"memory\" );\n+\n+    post_membar(order);\n+    return result;\n+  }\n+\n+  template<typename T>\n+  T xor_then_fetch(T volatile* dest, T bits, atomic_memory_order order) const {\n+    STATIC_ASSERT(8 == sizeof(T));\n+    T result;\n+\n+    pre_membar(order);\n+\n+    __asm__ __volatile__ (\n+      \"1: ldarx   %[result], 0, %[dest]            \\n\"\n+      \"   xor     %[result], %[result], %[bits]    \\n\"\n+      \"   stdcx.  %[result], 0, %[dest]            \\n\"\n+      \"   bne-    1b                               \\n\"\n+      : [result]     \"=&r\"  (result)\n+      : [dest]       \"b\"    (dest),\n+        [bits]       \"r\"    (bits)\n+      : \"cc\", \"memory\" );\n+\n+    post_membar(order);\n+    return result;\n+  }\n+};\n+#endif \/\/ CPU_PPC_ATOMICACCESS_PPC_HPP\n","filename":"src\/hotspot\/cpu\/ppc\/atomicAccess_ppc.hpp","additions":649,"deletions":0,"binary":false,"changes":649,"status":"added"},{"patch":"@@ -43,2 +43,1 @@\n-  conc_instruction_and_data_patch,\n-  conc_data_patch\n+  conc_instruction_and_data_patch\n","filename":"src\/hotspot\/cpu\/ppc\/gc\/shared\/barrierSetAssembler_ppc.hpp","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -72,1 +72,1 @@\n-  virtual NMethodPatchingType nmethod_patching_type() { return NMethodPatchingType::conc_data_patch; }\n+  virtual NMethodPatchingType nmethod_patching_type() { return NMethodPatchingType::conc_instruction_and_data_patch; }\n","filename":"src\/hotspot\/cpu\/ppc\/gc\/shenandoah\/shenandoahBarrierSetAssembler_ppc.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,2 +2,2 @@\n- * Copyright (c) 1997, 2020, Oracle and\/or its affiliates. All rights reserved.\n- * Copyright (c) 2012, 2014 SAP SE. All rights reserved.\n+ * Copyright (c) 1997, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2012, 2025 SAP SE. All rights reserved.\n@@ -26,4 +26,2 @@\n-#ifndef OS_CPU_LINUX_PPC_ORDERACCESS_LINUX_PPC_HPP\n-#define OS_CPU_LINUX_PPC_ORDERACCESS_LINUX_PPC_HPP\n-\n-\/\/ Included in orderAccess.hpp header file.\n+#ifndef CPU_PPC_ORDERACCESS_PPC_HPP\n+#define CPU_PPC_ORDERACCESS_PPC_HPP\n@@ -88,1 +86,1 @@\n-#endif \/\/ OS_CPU_LINUX_PPC_ORDERACCESS_LINUX_PPC_HPP\n+#endif \/\/ CPU_PPC_ORDERACCESS_PPC_HPP\n","filename":"src\/hotspot\/cpu\/ppc\/orderAccess_ppc.hpp","additions":5,"deletions":7,"binary":false,"changes":12,"previous_filename":"src\/hotspot\/os_cpu\/linux_ppc\/orderAccess_linux_ppc.hpp","status":"copied"},{"patch":"@@ -12586,2 +12586,2 @@\n-instruct insrwi_a(iRegIdst dst, iRegIsrc src, immI16 pos, immI16 shift) %{\n-  effect(DEF dst, USE src, USE pos, USE shift);\n+instruct insrwi_a(iRegIdst dst, iRegIsrc src, immI16 n, immI16 b) %{\n+  effect(DEF dst, USE src, USE n, USE b);\n@@ -12590,1 +12590,1 @@\n-  format %{ \"INSRWI  $dst, $src, $pos, $shift\" %}\n+  format %{ \"INSRWI  $dst, $src, $n, $b\" %}\n@@ -12593,1 +12593,1 @@\n-    __ insrwi($dst$$Register, $src$$Register, $shift$$constant, $pos$$constant);\n+    __ insrwi($dst$$Register, $src$$Register, $n$$constant, $b$$constant);\n@@ -12599,2 +12599,2 @@\n-instruct insrwi(iRegIdst dst, iRegIsrc src, immI16 pos, immI16 shift) %{\n-  effect(USE_DEF dst, USE src, USE pos, USE shift);\n+instruct insrwi(iRegIdst dst, iRegIsrc src, immI16 n, immI16 b) %{\n+  effect(USE_DEF dst, USE src, USE n, USE b);\n@@ -12603,1 +12603,1 @@\n-  format %{ \"INSRWI  $dst, $src, $pos, $shift\" %}\n+  format %{ \"INSRWI  $dst, $src, $n, $b\" %}\n@@ -12606,1 +12606,1 @@\n-    __ insrwi($dst$$Register, $src$$Register, $shift$$constant, $pos$$constant);\n+    __ insrwi($dst$$Register, $src$$Register, $n$$constant, $b$$constant);\n@@ -12628,1 +12628,1 @@\n-    insrwi_a(dst, tmpI1, imm24, imm8);\n+    insrwi_a(dst, tmpI1, imm8, imm24);\n@@ -12630,1 +12630,1 @@\n-    insrwi(dst, tmpI2, imm8, imm16);\n+    insrwi(dst, tmpI2, imm16, imm8);\n@@ -12633,1 +12633,1 @@\n-    insrwi(dst, src, imm0, imm8);\n+    insrwi(dst, src, imm8, imm0);\n@@ -12751,1 +12751,1 @@\n-    insrwi(dst, src, imm16, imm8);\n+    insrwi(dst, src, imm8, imm16);\n@@ -12780,1 +12780,1 @@\n-    insrwi(tmpI1, src, imm16, imm8);\n+    insrwi(tmpI1, src, imm8, imm16);\n","filename":"src\/hotspot\/cpu\/ppc\/ppc.ad","additions":13,"deletions":13,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -112,0 +112,4 @@\n+  if (!SuperwordUseVSX && FLAG_IS_DEFAULT(EnableVectorSupport)) {\n+    \/\/ VectorSupport intrinsics currently have issues with MaxVectorSize < 16 (JDK-8370803).\n+    FLAG_SET_ERGO(EnableVectorSupport, false);\n+  }\n","filename":"src\/hotspot\/cpu\/ppc\/vm_version_ppc.cpp","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -244,4 +244,0 @@\n-    case NMethodPatchingType::conc_data_patch:\n-      \/\/ Subsequent loads of oops must occur after load of guard value.\n-      \/\/ BarrierSetNMethod::disarm sets guard with release semantics.\n-      __ membar(MacroAssembler::LoadLoad); \/\/ fall through to stw_instruction_and_data_patch\n","filename":"src\/hotspot\/cpu\/riscv\/gc\/shared\/barrierSetAssembler_riscv.cpp","additions":0,"deletions":4,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -43,2 +43,1 @@\n-  conc_instruction_and_data_patch,\n-  conc_data_patch\n+  conc_instruction_and_data_patch\n","filename":"src\/hotspot\/cpu\/riscv\/gc\/shared\/barrierSetAssembler_riscv.hpp","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -53,2 +53,0 @@\n-    case NMethodPatchingType::conc_data_patch:\n-      return -4 * (5 + slow_path_size(nm));\n","filename":"src\/hotspot\/cpu\/riscv\/gc\/shared\/barrierSetNMethod_riscv.cpp","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -72,1 +72,1 @@\n-  virtual NMethodPatchingType nmethod_patching_type() { return NMethodPatchingType::conc_data_patch; }\n+  virtual NMethodPatchingType nmethod_patching_type() { return NMethodPatchingType::conc_instruction_and_data_patch; }\n","filename":"src\/hotspot\/cpu\/riscv\/gc\/shenandoah\/shenandoahBarrierSetAssembler_riscv.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -96,0 +96,46 @@\n+void MethodHandles::verify_method(MacroAssembler* _masm, Register method, vmIntrinsics::ID iid) {\n+  BLOCK_COMMENT(\"verify_method {\");\n+  __ verify_method_ptr(method);\n+  if (VerifyMethodHandles) {\n+    Label L_ok;\n+    assert_different_registers(method, t0, t1);\n+    const Register method_holder = t1;\n+    __ load_method_holder(method_holder, method);\n+\n+    switch (iid) {\n+      case vmIntrinsicID::_invokeBasic:\n+        \/\/ Require compiled LambdaForm class to be fully initialized.\n+        __ lbu(t0, Address(method_holder, InstanceKlass::init_state_offset()));\n+        __ membar(MacroAssembler::LoadLoad | MacroAssembler::LoadStore);\n+        __ mv(t1, InstanceKlass::fully_initialized);\n+        __ beq(t0, t1, L_ok);\n+        break;\n+      case vmIntrinsicID::_linkToStatic:\n+        __ clinit_barrier(method_holder, t0, &L_ok);\n+        break;\n+\n+      case vmIntrinsicID::_linkToVirtual:\n+      case vmIntrinsicID::_linkToSpecial:\n+      case vmIntrinsicID::_linkToInterface:\n+        \/\/ Class initialization check is too strong here. Just ensure that class initialization has been initiated.\n+        __ lbu(t0, Address(method_holder, InstanceKlass::init_state_offset()));\n+        __ membar(MacroAssembler::LoadLoad | MacroAssembler::LoadStore);\n+        __ mv(t1, InstanceKlass::being_initialized);\n+        __ bge(t0, t1, L_ok);\n+\n+        \/\/ init_state check failed, but it may be an abstract interface method\n+        __ lhu(t0, Address(method, Method::access_flags_offset()));\n+        __ test_bit(t1, t0, exact_log2(JVM_ACC_ABSTRACT));\n+        __ bnez(t1, L_ok);\n+        break;\n+\n+      default:\n+        fatal(\"unexpected intrinsic %d: %s\", vmIntrinsics::as_int(iid), vmIntrinsics::name_at(iid));\n+    }\n+\n+    \/\/ Method holder init state check failed for a concrete method.\n+    __ stop(\"Method holder klass is not initialized\");\n+    __ BIND(L_ok);\n+  }\n+  BLOCK_COMMENT(\"} verify_method\");\n+}\n@@ -99,1 +145,1 @@\n-                                            bool for_compiler_entry) {\n+                                            bool for_compiler_entry, vmIntrinsics::ID iid) {\n@@ -103,1 +149,1 @@\n-  __ verify_method_ptr(method);\n+  verify_method(_masm, method, iid);\n@@ -161,1 +207,1 @@\n-  jump_from_method_handle(_masm, method_temp, temp2, for_compiler_entry);\n+  jump_from_method_handle(_masm, method_temp, temp2, for_compiler_entry, vmIntrinsics::_invokeBasic);\n@@ -440,2 +486,1 @@\n-    __ verify_method_ptr(xmethod);\n-    jump_from_method_handle(_masm, xmethod, temp1, for_compiler_entry);\n+    jump_from_method_handle(_masm, xmethod, temp1, for_compiler_entry, iid);\n","filename":"src\/hotspot\/cpu\/riscv\/methodHandles_riscv.cpp","additions":50,"deletions":5,"binary":false,"changes":55,"status":"modified"},{"patch":"@@ -42,0 +42,2 @@\n+  static void verify_method(MacroAssembler* _masm, Register method, vmIntrinsics::ID iid) NOT_DEBUG_RETURN;\n+\n@@ -52,1 +54,1 @@\n-                                      bool for_compiler_entry);\n+                                      bool for_compiler_entry, vmIntrinsics::ID iid);\n","filename":"src\/hotspot\/cpu\/riscv\/methodHandles_riscv.hpp","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -277,13 +277,0 @@\n-\/\/-------------------------------------------------------------------\n-\n-int NativeMovRegMem::offset() const  {\n-  Unimplemented();\n-  return 0;\n-}\n-\n-void NativeMovRegMem::set_offset(int x) { Unimplemented(); }\n-\n-void NativeMovRegMem::verify() {\n-  Unimplemented();\n-}\n-\n","filename":"src\/hotspot\/cpu\/riscv\/nativeInst_riscv.cpp","additions":0,"deletions":13,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -40,1 +40,1 @@\n-\/\/ - - NativeMovRegMem\n+\/\/ - - NativeMovRegMem - Unimplemented\n@@ -236,12 +236,1 @@\n-  enum RISCV_specific_constants {\n-    instruction_size            =    NativeInstruction::instruction_size,\n-    instruction_offset          =    0,\n-    data_offset                 =    0,\n-    next_instruction_offset     =    NativeInstruction::instruction_size\n-  };\n-\n-  int instruction_start() const { return instruction_offset; }\n-\n-  address instruction_address() const { return addr_at(instruction_offset); }\n-\n-  int num_bytes_to_end_of_patch() const { return instruction_offset + instruction_size; }\n+  int num_bytes_to_end_of_patch() const { Unimplemented(); return 0; }\n@@ -249,1 +238,1 @@\n-  int offset() const;\n+  int offset() const { Unimplemented(); return 0; }\n@@ -251,1 +240,1 @@\n-  void set_offset(int x);\n+  void set_offset(int x) { Unimplemented(); }\n@@ -253,9 +242,1 @@\n-  void add_offset_in_bytes(int add_offset) {\n-    set_offset(offset() + add_offset);\n-  }\n-\n-  void verify();\n-  void print();\n-\n- private:\n-  inline friend NativeMovRegMem* nativeMovRegMem_at(address addr);\n+  void add_offset_in_bytes(int add_offset) { Unimplemented(); }\n@@ -265,3 +246,2 @@\n-  NativeMovRegMem* test = (NativeMovRegMem*)(addr - NativeMovRegMem::instruction_offset);\n-  DEBUG_ONLY(test->verify());\n-  return test;\n+  Unimplemented();\n+  return (NativeMovRegMem*)nullptr;\n","filename":"src\/hotspot\/cpu\/riscv\/nativeInst_riscv.hpp","additions":7,"deletions":27,"binary":false,"changes":34,"status":"modified"},{"patch":"@@ -1187,0 +1187,2 @@\n+constexpr uint64_t MAJIK_DWORD = 0xabbaabbaabbaabbaull;\n+\n@@ -1366,3 +1368,0 @@\n-  st->print(\"sd  fp, [sp, #%d]\\n\\t\", - 2 * wordSize);\n-  st->print(\"sd  ra, [sp, #%d]\\n\\t\", - wordSize);\n-  if (PreserveFramePointer) { st->print(\"sub  fp, sp, #%d\\n\\t\", 2 * wordSize); }\n@@ -1370,0 +1369,8 @@\n+  st->print(\"sd  fp, [sp, #%d]\\n\\t\", framesize - 2 * wordSize);\n+  st->print(\"sd  ra, [sp, #%d]\\n\\t\", framesize - wordSize);\n+  if (PreserveFramePointer) { st->print(\"add fp, sp, #%d\\n\\t\", framesize); }\n+\n+  if (VerifyStackAtCalls) {\n+    st->print(\"mv  t2, %ld\\n\\t\", MAJIK_DWORD);\n+    st->print(\"sd  t2, [sp, #%d]\\n\\t\", framesize - 3 * wordSize);\n+  }\n@@ -1419,0 +1426,5 @@\n+  if (VerifyStackAtCalls) {\n+    __ mv(t2, MAJIK_DWORD);\n+    __ sd(t2, Address(sp, framesize - 3 * wordSize));\n+  }\n+\n@@ -1440,4 +1452,0 @@\n-  if (VerifyStackAtCalls) {\n-    Unimplemented();\n-  }\n-\n@@ -2433,1 +2441,7 @@\n-      __ call_Unimplemented();\n+      int framesize = ra_->reg2offset_unchecked(OptoReg::add(ra_->_matcher._old_SP, -3 * VMRegImpl::slots_per_word));\n+      Label stack_ok;\n+      __ ld(t1, Address(sp, framesize));\n+      __ mv(t2, MAJIK_DWORD);\n+      __ beq(t2, t1, stack_ok);\n+      __ stop(\"MAJIK_DWORD not found\");\n+      __ bind(stack_ok);\n@@ -8544,1 +8558,1 @@\n-instruct convHF2F_reg_reg(fRegF dst, iRegINoSp src, iRegINoSp tmp) %{\n+instruct convHF2F_reg_reg(fRegF dst, iRegIorL2I src, iRegINoSp tmp) %{\n","filename":"src\/hotspot\/cpu\/riscv\/riscv.ad","additions":23,"deletions":9,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -117,0 +117,2 @@\n+      case Op_SubVHF:\n+      case Op_MulVHF:\n@@ -120,1 +122,0 @@\n-      case Op_MulVHF:\n@@ -122,1 +123,0 @@\n-      case Op_SubVHF:\n@@ -150,0 +150,1 @@\n+\n@@ -154,0 +155,13 @@\n+      \/\/ Currently, the masked versions of the following 8 Float16 operations are disabled.\n+      \/\/ When the support for Float16 vector classes is added in VectorAPI and the masked\n+      \/\/ Float16 IR can be generated, these masked operations will be enabled and relevant\n+      \/\/ backend support added.\n+      case Op_AddVHF:\n+      case Op_SubVHF:\n+      case Op_MulVHF:\n+      case Op_DivVHF:\n+      case Op_MaxVHF:\n+      case Op_MinVHF:\n+      case Op_SqrtVHF:\n+      case Op_FmaVHF:\n+        return false;\n@@ -157,0 +171,1 @@\n+\n","filename":"src\/hotspot\/cpu\/riscv\/riscv_v.ad","additions":17,"deletions":2,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -2489,1 +2489,1 @@\n-  return 2 * VMRegImpl::slots_per_word;\n+  return 2 * VMRegImpl::slots_per_word + (VerifyStackAtCalls ? 0 : 2) ;\n","filename":"src\/hotspot\/cpu\/riscv\/sharedRuntime_riscv.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1151,3 +1151,1 @@\n-    __ la(t, unsatisfied);\n-    __ load_long_misaligned(t1, Address(t, 0), t0, 2); \/\/ 2 bytes aligned, but not 4 or 8\n-\n+    __ la(t1, unsatisfied);\n","filename":"src\/hotspot\/cpu\/riscv\/templateInterpreterGenerator_riscv.cpp","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -168,5 +168,0 @@\n-  if (FLAG_IS_DEFAULT(AlignVector)) {\n-    FLAG_SET_DEFAULT(AlignVector,\n-      unaligned_vector.value() != MISALIGNED_VECTOR_FAST);\n-  }\n-\n@@ -273,0 +268,5 @@\n+  if (FLAG_IS_DEFAULT(AlignVector)) {\n+    FLAG_SET_DEFAULT(AlignVector,\n+      unaligned_vector.value() != MISALIGNED_VECTOR_FAST);\n+  }\n+\n","filename":"src\/hotspot\/cpu\/riscv\/vm_version_riscv.cpp","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -3527,0 +3527,1 @@\n+  __ addl(pos, 16 * 16);\n@@ -3530,1 +3531,0 @@\n-  __ addl(pos, 16 * 16);\n@@ -4019,1 +4019,1 @@\n-  Label encrypt_done, encrypt_by_8_new, encrypt_by_8;\n+  Label encrypt_done, encrypt_by_8_new, encrypt_by_8, exit;\n@@ -4026,0 +4026,2 @@\n+  __ cmpl(len, 128);\n+  __ jcc(Assembler::less, exit);\n@@ -4093,0 +4095,1 @@\n+  __ bind(exit);\n","filename":"src\/hotspot\/cpu\/x86\/stubGenerator_x86_64_aes.cpp","additions":5,"deletions":2,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -157,1 +157,2 @@\n-    available = vmstat.free_count * os::vm_page_size();\n+    \/\/ free_count is just a lowerbound, other page categories can be freed too and make memory available\n+    available = (vmstat.free_count + vmstat.inactive_count + vmstat.purgeable_count) * os::vm_page_size();\n","filename":"src\/hotspot\/os\/bsd\/os_bsd.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -105,0 +105,11 @@\n+#define CONTAINER_READ_NUMERICAL_KEY_VALUE_CHECKED(controller, filename, key, log_string, retval) \\\n+{                                                                                     \\\n+  bool is_ok;                                                                         \\\n+  is_ok = controller->read_numerical_key_value(filename, key, &retval);               \\\n+  if (!is_ok) {                                                                       \\\n+    log_trace(os, container)(log_string \" failed: %d\", OSCONTAINER_ERROR);            \\\n+    return OSCONTAINER_ERROR;                                                         \\\n+  }                                                                                   \\\n+  log_trace(os, container)(log_string \" is: \" JULONG_FORMAT, retval);                 \\\n+}\n+\n","filename":"src\/hotspot\/os\/linux\/cgroupSubsystem_linux.hpp","additions":11,"deletions":0,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -126,0 +126,6 @@\n+jlong CgroupV1MemoryController::uses_mem_hierarchy() {\n+  julong use_hierarchy;\n+  CONTAINER_READ_NUMBER_CHECKED(reader(), \"\/memory.use_hierarchy\", \"Use Hierarchy\", use_hierarchy);\n+  return (jlong)use_hierarchy;\n+}\n+\n@@ -162,6 +168,4 @@\n-  if (memlimit >= phys_mem) {\n-    verbose_log(memlimit, phys_mem);\n-    return (jlong)-1;\n-  } else {\n-    verbose_log(memlimit, phys_mem);\n-    return (jlong)memlimit;\n+  if (memlimit >= phys_mem && uses_mem_hierarchy()) {\n+    CONTAINER_READ_NUMERICAL_KEY_VALUE_CHECKED(reader(), \"\/memory.stat\",\n+                                               \"hierarchical_memory_limit\", \"Hierarchical Memory Limit\",\n+                                               memlimit);\n@@ -169,0 +173,2 @@\n+  verbose_log(memlimit, phys_mem);\n+  return (jlong)((memlimit < phys_mem) ? memlimit : -1);\n@@ -186,5 +192,4 @@\n-  if (memswlimit >= host_total_memsw) {\n-    log_trace(os, container)(\"Memory and Swap Limit is: Unlimited\");\n-    return (jlong)-1;\n-  } else {\n-    return (jlong)memswlimit;\n+  if (memswlimit >= host_total_memsw && uses_mem_hierarchy()) {\n+    CONTAINER_READ_NUMERICAL_KEY_VALUE_CHECKED(reader(), \"\/memory.stat\",\n+                                               \"hierarchical_memsw_limit\", \"Hierarchical Memory and Swap Limit\",\n+                                               memswlimit);\n@@ -192,0 +197,2 @@\n+  verbose_log(memswlimit, host_total_memsw);\n+  return (jlong)((memswlimit < host_total_memsw) ? memswlimit : -1);\n","filename":"src\/hotspot\/os\/linux\/cgroupV1Subsystem_linux.cpp","additions":18,"deletions":11,"binary":false,"changes":29,"status":"modified"},{"patch":"@@ -102,0 +102,1 @@\n+    jlong uses_mem_hierarchy();\n","filename":"src\/hotspot\/os\/linux\/cgroupV1Subsystem_linux.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -481,1 +481,1 @@\n-\/\/ i386: 224, amd64: 186, sparc: 143\n+\/\/ i386: 224, amd64: 186\n@@ -486,2 +486,0 @@\n-  #elif defined(__sparc__)\n-    #define SYS_gettid 143\n@@ -2473,0 +2471,1 @@\n+  assert(ret == 0, \"sysinfo failed: %s\", os::strerror(errno));\n@@ -2586,2 +2585,2 @@\n-  sysinfo(&si);\n-\n+  int ret = sysinfo(&si);\n+  assert(ret == 0, \"sysinfo failed: %s\", os::strerror(errno));\n@@ -2592,4 +2591,6 @@\n-  st->print(\", swap \" UINT64_FORMAT \"k\",\n-            ((jlong)si.totalswap * si.mem_unit) >> 10);\n-  st->print(\"(\" UINT64_FORMAT \"k free)\",\n-            ((jlong)si.freeswap * si.mem_unit) >> 10);\n+  if (ret == 0) {\n+    st->print(\", swap \" UINT64_FORMAT \"k\",\n+              ((jlong)si.totalswap * si.mem_unit) >> 10);\n+    st->print(\"(\" UINT64_FORMAT \"k free)\",\n+              ((jlong)si.freeswap * si.mem_unit) >> 10);\n+  }\n@@ -2727,2 +2728,0 @@\n-#elif defined(SPARC)\n-const char* search_string = \"cpu\";\n@@ -2780,2 +2779,0 @@\n-#elif defined(SPARC)\n-  strncpy(cpuinfo, \"sparcv9\", length);\n@@ -5264,1 +5261,1 @@\n-                             \"\\\"%s\\\" (or dumping to %s\/core.%d)\",\n+                             \"\\\"%s\\\" (alternatively, falling back to %s\/core.%d)\",\n","filename":"src\/hotspot\/os\/linux\/os_linux.cpp","additions":11,"deletions":14,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -110,0 +110,1 @@\n+  stringStream buf(buffer, bufferSize);\n@@ -111,2 +112,2 @@\n-    jio_snprintf(buffer, bufferSize, \"CreateCoredumpOnCrash is disabled from command line\");\n-    VMError::record_coredump_status(buffer, false);\n+    buf.print(\"CreateCoredumpOnCrash is disabled from command line\");\n+    VMError::record_coredump_status(buf.freeze(), false);\n@@ -119,1 +120,5 @@\n-      jio_snprintf(buffer, bufferSize, \"core.%d (may not exist)\", current_process_id());\n+      \/\/ In the warning message, let the user know.\n+      if (check_only) {\n+        buf.print(\"the core path couldn't be determined. It commonly defaults to \");\n+      }\n+      buf.print(\"core.%d%s\", current_process_id(), check_only ? \"\" : \" (may not exist)\");\n@@ -122,1 +127,6 @@\n-      jio_snprintf(buffer, bufferSize, \"Core dumps may be processed with %s\", core_path);\n+      if (check_only) {\n+        buf.print(\"core dumps may be further processed by the following: \");\n+      } else {\n+        buf.print(\"Determined by the following: \");\n+      }\n+      buf.print(\"%s\", core_path);\n@@ -125,1 +135,4 @@\n-      jio_snprintf(buffer, bufferSize, \"%s (may not exist)\", core_path);\n+      if (check_only) {\n+        buf.print(\"the rlimit couldn't be determined. If resource limits permit, the core dump will be located at \");\n+      }\n+      buf.print(\"%s%s\", core_path, check_only ? \"\" : \" (may not exist)\");\n@@ -129,1 +142,1 @@\n-          jio_snprintf(buffer, bufferSize, \"%s\", core_path);\n+          buf.print(\"%s\", core_path);\n@@ -133,1 +146,1 @@\n-          jio_snprintf(buffer, bufferSize, \"Core dumps have been disabled. To enable core dumping, try \\\"ulimit -c unlimited\\\" before starting Java again\");\n+          buf.print(\"%s dumps have been disabled. To enable core dumping, try \\\"ulimit -c unlimited\\\" before starting Java again\", check_only ? \"core\" : \"Core\");\n@@ -137,1 +150,6 @@\n-          jio_snprintf(buffer, bufferSize, \"%s (max size \" UINT64_FORMAT \" k). To ensure a full core dump, try \\\"ulimit -c unlimited\\\" before starting Java again\", core_path, uint64_t(rlim.rlim_cur) \/ K);\n+          if (check_only) {\n+            buf.print(\"core dumps are constrained \");\n+          } else {\n+             buf.print( \"%s \", core_path);\n+          }\n+          buf.print( \"(max size \" UINT64_FORMAT \" k). To ensure a full core dump, try \\\"ulimit -c unlimited\\\" before starting Java again\", uint64_t(rlim.rlim_cur) \/ K);\n@@ -141,0 +159,1 @@\n+    const char* result = buf.freeze();\n@@ -142,1 +161,1 @@\n-      VMError::record_coredump_status(buffer, success);\n+      VMError::record_coredump_status(result, success);\n@@ -144,1 +163,1 @@\n-      warning(\"CreateCoredumpOnCrash specified, but %s\", buffer);\n+      warning(\"CreateCoredumpOnCrash specified, but %s\", result);\n","filename":"src\/hotspot\/os\/posix\/os_posix.cpp","additions":29,"deletions":10,"binary":false,"changes":39,"status":"modified"},{"patch":"@@ -2,2 +2,2 @@\n- * Copyright (c) 1997, 2023, Oracle and\/or its affiliates. All rights reserved.\n- * Copyright (c) 2012, 2019 SAP SE. All rights reserved.\n+ * Copyright (c) 1997, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2012, 2025 SAP SE. All rights reserved.\n@@ -26,392 +26,2 @@\n-#ifndef OS_CPU_AIX_PPC_ATOMIC_AIX_PPC_HPP\n-#define OS_CPU_AIX_PPC_ATOMIC_AIX_PPC_HPP\n-\n-#ifndef PPC64\n-#error \"Atomic currently only implemented for PPC64\"\n-#endif\n-\n-#include \"orderAccess_aix_ppc.hpp\"\n-#include \"utilities\/debug.hpp\"\n-\n-\/\/ Implementation of class atomic\n-\n-\/\/\n-\/\/ machine barrier instructions:\n-\/\/\n-\/\/ - sync            two-way memory barrier, aka fence\n-\/\/ - lwsync          orders  Store|Store,\n-\/\/                            Load|Store,\n-\/\/                            Load|Load,\n-\/\/                   but not Store|Load\n-\/\/ - eieio           orders memory accesses for device memory (only)\n-\/\/ - isync           invalidates speculatively executed instructions\n-\/\/                   From the POWER ISA 2.06 documentation:\n-\/\/                    \"[...] an isync instruction prevents the execution of\n-\/\/                   instructions following the isync until instructions\n-\/\/                   preceding the isync have completed, [...]\"\n-\/\/                   From IBM's AIX assembler reference:\n-\/\/                    \"The isync [...] instructions causes the processor to\n-\/\/                   refetch any instructions that might have been fetched\n-\/\/                   prior to the isync instruction. The instruction isync\n-\/\/                   causes the processor to wait for all previous instructions\n-\/\/                   to complete. Then any instructions already fetched are\n-\/\/                   discarded and instruction processing continues in the\n-\/\/                   environment established by the previous instructions.\"\n-\/\/\n-\/\/ semantic barrier instructions:\n-\/\/ (as defined in orderAccess.hpp)\n-\/\/\n-\/\/ - release         orders Store|Store,       (maps to lwsync)\n-\/\/                           Load|Store\n-\/\/ - acquire         orders  Load|Store,       (maps to lwsync)\n-\/\/                           Load|Load\n-\/\/ - fence           orders Store|Store,       (maps to sync)\n-\/\/                           Load|Store,\n-\/\/                           Load|Load,\n-\/\/                          Store|Load\n-\/\/\n-\n-inline void pre_membar(atomic_memory_order order) {\n-  switch (order) {\n-    case memory_order_relaxed:\n-    case memory_order_acquire: break;\n-    case memory_order_release:\n-    case memory_order_acq_rel: __asm__ __volatile__ (\"lwsync\" : : : \"memory\"); break;\n-    default \/*conservative*\/ : __asm__ __volatile__ (\"sync\"   : : : \"memory\"); break;\n-  }\n-}\n-\n-inline void post_membar(atomic_memory_order order) {\n-  switch (order) {\n-    case memory_order_relaxed:\n-    case memory_order_release: break;\n-    case memory_order_acquire:\n-    case memory_order_acq_rel: __asm__ __volatile__ (\"isync\"  : : : \"memory\"); break;\n-    default \/*conservative*\/ : __asm__ __volatile__ (\"sync\"   : : : \"memory\"); break;\n-  }\n-}\n-\n-\n-template<size_t byte_size>\n-struct Atomic::PlatformAdd {\n-  template<typename D, typename I>\n-  D add_then_fetch(D volatile* dest, I add_value, atomic_memory_order order) const;\n-\n-  template<typename D, typename I>\n-  D fetch_then_add(D volatile* dest, I add_value, atomic_memory_order order) const {\n-    return add_then_fetch(dest, add_value, order) - add_value;\n-  }\n-};\n-\n-template<>\n-template<typename D, typename I>\n-inline D Atomic::PlatformAdd<4>::add_then_fetch(D volatile* dest, I add_value,\n-                                               atomic_memory_order order) const {\n-  STATIC_ASSERT(4 == sizeof(I));\n-  STATIC_ASSERT(4 == sizeof(D));\n-\n-  D result;\n-\n-  pre_membar(order);\n-\n-  __asm__ __volatile__ (\n-    \"1: lwarx   %0,  0, %2    \\n\"\n-    \"   add     %0, %0, %1    \\n\"\n-    \"   stwcx.  %0,  0, %2    \\n\"\n-    \"   bne-    1b            \\n\"\n-    : \/*%0*\/\"=&r\" (result)\n-    : \/*%1*\/\"r\" (add_value), \/*%2*\/\"r\" (dest)\n-    : \"cc\", \"memory\" );\n-\n-  post_membar(order);\n-\n-  return result;\n-}\n-\n-\n-template<>\n-template<typename D, typename I>\n-inline D Atomic::PlatformAdd<8>::add_then_fetch(D volatile* dest, I add_value,\n-                                               atomic_memory_order order) const {\n-  STATIC_ASSERT(8 == sizeof(I));\n-  STATIC_ASSERT(8 == sizeof(D));\n-\n-  D result;\n-\n-  pre_membar(order);\n-\n-  __asm__ __volatile__ (\n-    \"1: ldarx   %0,  0, %2    \\n\"\n-    \"   add     %0, %0, %1    \\n\"\n-    \"   stdcx.  %0,  0, %2    \\n\"\n-    \"   bne-    1b            \\n\"\n-    : \/*%0*\/\"=&r\" (result)\n-    : \/*%1*\/\"r\" (add_value), \/*%2*\/\"r\" (dest)\n-    : \"cc\", \"memory\" );\n-\n-  post_membar(order);\n-\n-  return result;\n-}\n-\n-template<>\n-template<typename T>\n-inline T Atomic::PlatformXchg<4>::operator()(T volatile* dest,\n-                                             T exchange_value,\n-                                             atomic_memory_order order) const {\n-  \/\/ Note that xchg doesn't necessarily do an acquire\n-  \/\/ (see synchronizer.cpp).\n-\n-  T old_value;\n-  const uint64_t zero = 0;\n-\n-  pre_membar(order);\n-\n-  __asm__ __volatile__ (\n-    \/* atomic loop *\/\n-    \"1:                                                 \\n\"\n-    \"   lwarx   %[old_value], %[dest], %[zero]          \\n\"\n-    \"   stwcx.  %[exchange_value], %[dest], %[zero]     \\n\"\n-    \"   bne-    1b                                      \\n\"\n-    \/* exit *\/\n-    \"2:                                                 \\n\"\n-    \/* out *\/\n-    : [old_value]       \"=&r\"   (old_value),\n-                        \"=m\"    (*dest)\n-    \/* in *\/\n-    : [dest]            \"b\"     (dest),\n-      [zero]            \"r\"     (zero),\n-      [exchange_value]  \"r\"     (exchange_value),\n-                        \"m\"     (*dest)\n-    \/* clobber *\/\n-    : \"cc\",\n-      \"memory\"\n-    );\n-\n-  post_membar(order);\n-\n-  return old_value;\n-}\n-\n-template<>\n-template<typename T>\n-inline T Atomic::PlatformXchg<8>::operator()(T volatile* dest,\n-                                             T exchange_value,\n-                                             atomic_memory_order order) const {\n-  STATIC_ASSERT(8 == sizeof(T));\n-  \/\/ Note that xchg doesn't necessarily do an acquire\n-  \/\/ (see synchronizer.cpp).\n-\n-  T old_value;\n-  const uint64_t zero = 0;\n-\n-  pre_membar(order);\n-\n-  __asm__ __volatile__ (\n-    \/* atomic loop *\/\n-    \"1:                                                 \\n\"\n-    \"   ldarx   %[old_value], %[dest], %[zero]          \\n\"\n-    \"   stdcx.  %[exchange_value], %[dest], %[zero]     \\n\"\n-    \"   bne-    1b                                      \\n\"\n-    \/* exit *\/\n-    \"2:                                                 \\n\"\n-    \/* out *\/\n-    : [old_value]       \"=&r\"   (old_value),\n-                        \"=m\"    (*dest)\n-    \/* in *\/\n-    : [dest]            \"b\"     (dest),\n-      [zero]            \"r\"     (zero),\n-      [exchange_value]  \"r\"     (exchange_value),\n-                        \"m\"     (*dest)\n-    \/* clobber *\/\n-    : \"cc\",\n-      \"memory\"\n-    );\n-\n-  post_membar(order);\n-\n-  return old_value;\n-}\n-\n-template<>\n-template<typename T>\n-inline T Atomic::PlatformCmpxchg<1>::operator()(T volatile* dest,\n-                                                T compare_value,\n-                                                T exchange_value,\n-                                                atomic_memory_order order) const {\n-  STATIC_ASSERT(1 == sizeof(T));\n-\n-  \/\/ Note that cmpxchg guarantees a two-way memory barrier across\n-  \/\/ the cmpxchg, so it's really a 'fence_cmpxchg_fence' if not\n-  \/\/ specified otherwise (see atomic.hpp).\n-\n-  \/\/ Using 32 bit internally.\n-  volatile int *dest_base = (volatile int*)((uintptr_t)dest & ~3);\n-\n-#ifdef VM_LITTLE_ENDIAN\n-  const unsigned int shift_amount        = ((uintptr_t)dest & 3) * 8;\n-#else\n-  const unsigned int shift_amount        = ((~(uintptr_t)dest) & 3) * 8;\n-#endif\n-  const unsigned int masked_compare_val  = ((unsigned int)(unsigned char)compare_value),\n-                     masked_exchange_val = ((unsigned int)(unsigned char)exchange_value),\n-                     xor_value           = (masked_compare_val ^ masked_exchange_val) << shift_amount;\n-\n-  unsigned int old_value, value32;\n-\n-  pre_membar(order);\n-\n-  __asm__ __volatile__ (\n-    \/* simple guard *\/\n-    \"   lbz     %[old_value], 0(%[dest])                  \\n\"\n-    \"   cmpw    %[masked_compare_val], %[old_value]       \\n\"\n-    \"   bne-    2f                                        \\n\"\n-    \/* atomic loop *\/\n-    \"1:                                                   \\n\"\n-    \"   lwarx   %[value32], 0, %[dest_base]               \\n\"\n-    \/* extract byte and compare *\/\n-    \"   srd     %[old_value], %[value32], %[shift_amount] \\n\"\n-    \"   clrldi  %[old_value], %[old_value], 56            \\n\"\n-    \"   cmpw    %[masked_compare_val], %[old_value]       \\n\"\n-    \"   bne-    2f                                        \\n\"\n-    \/* replace byte and try to store *\/\n-    \"   xor     %[value32], %[xor_value], %[value32]      \\n\"\n-    \"   stwcx.  %[value32], 0, %[dest_base]               \\n\"\n-    \"   bne-    1b                                        \\n\"\n-    \/* exit *\/\n-    \"2:                                                   \\n\"\n-    \/* out *\/\n-    : [old_value]           \"=&r\"   (old_value),\n-      [value32]             \"=&r\"   (value32),\n-                            \"=m\"    (*dest),\n-                            \"=m\"    (*dest_base)\n-    \/* in *\/\n-    : [dest]                \"b\"     (dest),\n-      [dest_base]           \"b\"     (dest_base),\n-      [shift_amount]        \"r\"     (shift_amount),\n-      [masked_compare_val]  \"r\"     (masked_compare_val),\n-      [xor_value]           \"r\"     (xor_value),\n-                            \"m\"     (*dest),\n-                            \"m\"     (*dest_base)\n-    \/* clobber *\/\n-    : \"cc\",\n-      \"memory\"\n-    );\n-\n-  post_membar(order);\n-\n-  return PrimitiveConversions::cast<T>((unsigned char)old_value);\n-}\n-\n-template<>\n-template<typename T>\n-inline T Atomic::PlatformCmpxchg<4>::operator()(T volatile* dest,\n-                                                T compare_value,\n-                                                T exchange_value,\n-                                                atomic_memory_order order) const {\n-  STATIC_ASSERT(4 == sizeof(T));\n-\n-  \/\/ Note that cmpxchg guarantees a two-way memory barrier across\n-  \/\/ the cmpxchg, so it's really a 'fence_cmpxchg_fence' if not\n-  \/\/ specified otherwise (see atomic.hpp).\n-\n-  T old_value;\n-  const uint64_t zero = 0;\n-\n-  pre_membar(order);\n-\n-  __asm__ __volatile__ (\n-    \/* simple guard *\/\n-    \"   lwz     %[old_value], 0(%[dest])                \\n\"\n-    \"   cmpw    %[compare_value], %[old_value]          \\n\"\n-    \"   bne-    2f                                      \\n\"\n-    \/* atomic loop *\/\n-    \"1:                                                 \\n\"\n-    \"   lwarx   %[old_value], %[dest], %[zero]          \\n\"\n-    \"   cmpw    %[compare_value], %[old_value]          \\n\"\n-    \"   bne-    2f                                      \\n\"\n-    \"   stwcx.  %[exchange_value], %[dest], %[zero]     \\n\"\n-    \"   bne-    1b                                      \\n\"\n-    \/* exit *\/\n-    \"2:                                                 \\n\"\n-    \/* out *\/\n-    : [old_value]       \"=&r\"   (old_value),\n-                        \"=m\"    (*dest)\n-    \/* in *\/\n-    : [dest]            \"b\"     (dest),\n-      [zero]            \"r\"     (zero),\n-      [compare_value]   \"r\"     (compare_value),\n-      [exchange_value]  \"r\"     (exchange_value),\n-                        \"m\"     (*dest)\n-    \/* clobber *\/\n-    : \"cc\",\n-      \"memory\"\n-    );\n-\n-  post_membar(order);\n-\n-  return old_value;\n-}\n-\n-template<>\n-template<typename T>\n-inline T Atomic::PlatformCmpxchg<8>::operator()(T volatile* dest,\n-                                                T compare_value,\n-                                                T exchange_value,\n-                                                atomic_memory_order order) const {\n-  STATIC_ASSERT(8 == sizeof(T));\n-\n-  \/\/ Note that cmpxchg guarantees a two-way memory barrier across\n-  \/\/ the cmpxchg, so it's really a 'fence_cmpxchg_fence' if not\n-  \/\/ specified otherwise (see atomic.hpp).\n-\n-  T old_value;\n-  const uint64_t zero = 0;\n-\n-  pre_membar(order);\n-\n-  __asm__ __volatile__ (\n-    \/* simple guard *\/\n-    \"   ld      %[old_value], 0(%[dest])                \\n\"\n-    \"   cmpd    %[compare_value], %[old_value]          \\n\"\n-    \"   bne-    2f                                      \\n\"\n-    \/* atomic loop *\/\n-    \"1:                                                 \\n\"\n-    \"   ldarx   %[old_value], %[dest], %[zero]          \\n\"\n-    \"   cmpd    %[compare_value], %[old_value]          \\n\"\n-    \"   bne-    2f                                      \\n\"\n-    \"   stdcx.  %[exchange_value], %[dest], %[zero]     \\n\"\n-    \"   bne-    1b                                      \\n\"\n-    \/* exit *\/\n-    \"2:                                                 \\n\"\n-    \/* out *\/\n-    : [old_value]       \"=&r\"   (old_value),\n-                        \"=m\"    (*dest)\n-    \/* in *\/\n-    : [dest]            \"b\"     (dest),\n-      [zero]            \"r\"     (zero),\n-      [compare_value]   \"r\"     (compare_value),\n-      [exchange_value]  \"r\"     (exchange_value),\n-                        \"m\"     (*dest)\n-    \/* clobber *\/\n-    : \"cc\",\n-      \"memory\"\n-    );\n-\n-  post_membar(order);\n-\n-  return old_value;\n-}\n-\n-template<size_t byte_size>\n-struct Atomic::PlatformOrderedLoad<byte_size, X_ACQUIRE> {\n-  template <typename T>\n-  T operator()(const volatile T* p) const {\n-    T t = Atomic::load(p);\n-    \/\/ Use twi-isync for load_acquire (faster than lwsync).\n-    __asm__ __volatile__ (\"twi 0,%0,0\\n isync\\n\" : : \"r\" (t) : \"memory\");\n-    return t;\n-  }\n-};\n-\n-#endif \/\/ OS_CPU_AIX_PPC_ATOMIC_AIX_PPC_HPP\n+\/\/ Including inline assembler functions that are shared between multiple PPC64 platforms.\n+#include \"atomicAccess_ppc.hpp\"\n","filename":"src\/hotspot\/os_cpu\/aix_ppc\/atomic_aix_ppc.hpp","additions":4,"deletions":394,"binary":false,"changes":398,"status":"modified"},{"patch":"@@ -2,2 +2,2 @@\n- * Copyright (c) 1997, 2020, Oracle and\/or its affiliates. All rights reserved.\n- * Copyright (c) 2012, 2019 SAP SE. All rights reserved.\n+ * Copyright (c) 1997, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2012, 2025 SAP SE. All rights reserved.\n@@ -26,59 +26,2 @@\n-#ifndef OS_CPU_AIX_PPC_ORDERACCESS_AIX_PPC_HPP\n-#define OS_CPU_AIX_PPC_ORDERACCESS_AIX_PPC_HPP\n-\n-\/\/ Included in orderAccess.hpp header file.\n-\n-\/\/ Compiler version last used for testing: xlc 12\n-\/\/ Please update this information when this file changes\n-\n-\/\/ Implementation of class OrderAccess.\n-\n-\/\/\n-\/\/ Machine barrier instructions:\n-\/\/\n-\/\/ - sync            Two-way memory barrier, aka fence.\n-\/\/ - lwsync          orders  Store|Store,\n-\/\/                            Load|Store,\n-\/\/                            Load|Load,\n-\/\/                   but not Store|Load\n-\/\/ - eieio           orders  Store|Store\n-\/\/ - isync           Invalidates speculatively executed instructions,\n-\/\/                   but isync may complete before storage accesses\n-\/\/                   associated with instructions preceding isync have\n-\/\/                   been performed.\n-\/\/\n-\/\/ Semantic barrier instructions:\n-\/\/ (as defined in orderAccess.hpp)\n-\/\/\n-\/\/ - release         orders Store|Store,       (maps to lwsync)\n-\/\/                           Load|Store\n-\/\/ - acquire         orders  Load|Store,       (maps to lwsync)\n-\/\/                           Load|Load\n-\/\/ - fence           orders Store|Store,       (maps to sync)\n-\/\/                           Load|Store,\n-\/\/                           Load|Load,\n-\/\/                          Store|Load\n-\/\/\n-\n-#define inlasm_sync()     __asm__ __volatile__ (\"sync\"   : : : \"memory\");\n-#define inlasm_lwsync()   __asm__ __volatile__ (\"lwsync\" : : : \"memory\");\n-#define inlasm_eieio()    __asm__ __volatile__ (\"eieio\"  : : : \"memory\");\n-#define inlasm_isync()    __asm__ __volatile__ (\"isync\"  : : : \"memory\");\n-\n-inline void OrderAccess::loadload()   { inlasm_lwsync(); }\n-inline void OrderAccess::storestore() { inlasm_lwsync(); }\n-inline void OrderAccess::loadstore()  { inlasm_lwsync(); }\n-inline void OrderAccess::storeload()  { inlasm_sync();   }\n-\n-inline void OrderAccess::acquire()    { inlasm_lwsync(); }\n-inline void OrderAccess::release()    { inlasm_lwsync(); }\n-inline void OrderAccess::fence()      { inlasm_sync();   }\n-inline void OrderAccess::cross_modify_fence_impl()\n-                                      { inlasm_isync();  }\n-\n-#undef inlasm_sync\n-#undef inlasm_lwsync\n-#undef inlasm_eieio\n-#undef inlasm_isync\n-\n-#endif \/\/ OS_CPU_AIX_PPC_ORDERACCESS_AIX_PPC_HPP\n+\/\/ Including inline assembler functions that are shared between multiple PPC64 platforms.\n+#include \"orderAccess_ppc.hpp\"\n","filename":"src\/hotspot\/os_cpu\/aix_ppc\/orderAccess_aix_ppc.hpp","additions":4,"deletions":61,"binary":false,"changes":65,"status":"modified"},{"patch":"@@ -2,2 +2,2 @@\n- * Copyright (c) 1997, 2023, Oracle and\/or its affiliates. All rights reserved.\n- * Copyright (c) 2012, 2019 SAP SE. All rights reserved.\n+ * Copyright (c) 1997, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2012, 2025 SAP SE. All rights reserved.\n@@ -26,370 +26,2 @@\n-#ifndef OS_CPU_LINUX_PPC_ATOMIC_LINUX_PPC_HPP\n-#define OS_CPU_LINUX_PPC_ATOMIC_LINUX_PPC_HPP\n-\n-#ifndef PPC64\n-#error \"Atomic currently only implemented for PPC64\"\n-#endif\n-\n-#include \"orderAccess_linux_ppc.hpp\"\n-#include \"utilities\/debug.hpp\"\n-\n-\/\/ Implementation of class atomic\n-\n-\/\/\n-\/\/ machine barrier instructions:\n-\/\/\n-\/\/ - sync            two-way memory barrier, aka fence\n-\/\/ - lwsync          orders  Store|Store,\n-\/\/                            Load|Store,\n-\/\/                            Load|Load,\n-\/\/                   but not Store|Load\n-\/\/ - eieio           orders memory accesses for device memory (only)\n-\/\/ - isync           invalidates speculatively executed instructions\n-\/\/                   From the POWER ISA 2.06 documentation:\n-\/\/                    \"[...] an isync instruction prevents the execution of\n-\/\/                   instructions following the isync until instructions\n-\/\/                   preceding the isync have completed, [...]\"\n-\/\/                   From IBM's AIX assembler reference:\n-\/\/                    \"The isync [...] instructions causes the processor to\n-\/\/                   refetch any instructions that might have been fetched\n-\/\/                   prior to the isync instruction. The instruction isync\n-\/\/                   causes the processor to wait for all previous instructions\n-\/\/                   to complete. Then any instructions already fetched are\n-\/\/                   discarded and instruction processing continues in the\n-\/\/                   environment established by the previous instructions.\"\n-\/\/\n-\/\/ semantic barrier instructions:\n-\/\/ (as defined in orderAccess.hpp)\n-\/\/\n-\/\/ - release         orders Store|Store,       (maps to lwsync)\n-\/\/                           Load|Store\n-\/\/ - acquire         orders  Load|Store,       (maps to lwsync)\n-\/\/                           Load|Load\n-\/\/ - fence           orders Store|Store,       (maps to sync)\n-\/\/                           Load|Store,\n-\/\/                           Load|Load,\n-\/\/                          Store|Load\n-\/\/\n-\n-inline void pre_membar(atomic_memory_order order) {\n-  switch (order) {\n-    case memory_order_relaxed:\n-    case memory_order_acquire: break;\n-    case memory_order_release:\n-    case memory_order_acq_rel: __asm__ __volatile__ (\"lwsync\" : : : \"memory\"); break;\n-    default \/*conservative*\/ : __asm__ __volatile__ (\"sync\"   : : : \"memory\"); break;\n-  }\n-}\n-\n-inline void post_membar(atomic_memory_order order) {\n-  switch (order) {\n-    case memory_order_relaxed:\n-    case memory_order_release: break;\n-    case memory_order_acquire:\n-    case memory_order_acq_rel: __asm__ __volatile__ (\"isync\"  : : : \"memory\"); break;\n-    default \/*conservative*\/ : __asm__ __volatile__ (\"sync\"   : : : \"memory\"); break;\n-  }\n-}\n-\n-\n-template<size_t byte_size>\n-struct Atomic::PlatformAdd {\n-  template<typename D, typename I>\n-  D add_then_fetch(D volatile* dest, I add_value, atomic_memory_order order) const;\n-\n-  template<typename D, typename I>\n-  D fetch_then_add(D volatile* dest, I add_value, atomic_memory_order order) const {\n-    return add_then_fetch(dest, add_value, order) - add_value;\n-  }\n-};\n-\n-template<>\n-template<typename D, typename I>\n-inline D Atomic::PlatformAdd<4>::add_then_fetch(D volatile* dest, I add_value,\n-                                                atomic_memory_order order) const {\n-  STATIC_ASSERT(4 == sizeof(I));\n-  STATIC_ASSERT(4 == sizeof(D));\n-\n-  D result;\n-\n-  pre_membar(order);\n-\n-  __asm__ __volatile__ (\n-    \"1: lwarx   %0,  0, %2    \\n\"\n-    \"   add     %0, %0, %1    \\n\"\n-    \"   stwcx.  %0,  0, %2    \\n\"\n-    \"   bne-    1b            \\n\"\n-    : \/*%0*\/\"=&r\" (result)\n-    : \/*%1*\/\"r\" (add_value), \/*%2*\/\"r\" (dest)\n-    : \"cc\", \"memory\" );\n-\n-  post_membar(order);\n-\n-  return result;\n-}\n-\n-\n-template<>\n-template<typename D, typename I>\n-inline D Atomic::PlatformAdd<8>::add_then_fetch(D volatile* dest, I add_value,\n-                                                atomic_memory_order order) const {\n-  STATIC_ASSERT(8 == sizeof(I));\n-  STATIC_ASSERT(8 == sizeof(D));\n-\n-  D result;\n-\n-  pre_membar(order);\n-\n-  __asm__ __volatile__ (\n-    \"1: ldarx   %0,  0, %2    \\n\"\n-    \"   add     %0, %0, %1    \\n\"\n-    \"   stdcx.  %0,  0, %2    \\n\"\n-    \"   bne-    1b            \\n\"\n-    : \/*%0*\/\"=&r\" (result)\n-    : \/*%1*\/\"r\" (add_value), \/*%2*\/\"r\" (dest)\n-    : \"cc\", \"memory\" );\n-\n-  post_membar(order);\n-\n-  return result;\n-}\n-\n-template<>\n-template<typename T>\n-inline T Atomic::PlatformXchg<4>::operator()(T volatile* dest,\n-                                             T exchange_value,\n-                                             atomic_memory_order order) const {\n-  \/\/ Note that xchg doesn't necessarily do an acquire\n-  \/\/ (see synchronizer.cpp).\n-\n-  T old_value;\n-  const uint64_t zero = 0;\n-\n-  pre_membar(order);\n-\n-  __asm__ __volatile__ (\n-    \/* atomic loop *\/\n-    \"1:                                                 \\n\"\n-    \"   lwarx   %[old_value], %[dest], %[zero]          \\n\"\n-    \"   stwcx.  %[exchange_value], %[dest], %[zero]     \\n\"\n-    \"   bne-    1b                                      \\n\"\n-    \/* exit *\/\n-    \"2:                                                 \\n\"\n-    \/* out *\/\n-    : [old_value]       \"=&r\"   (old_value),\n-                        \"=m\"    (*dest)\n-    \/* in *\/\n-    : [dest]            \"b\"     (dest),\n-      [zero]            \"r\"     (zero),\n-      [exchange_value]  \"r\"     (exchange_value),\n-                        \"m\"     (*dest)\n-    \/* clobber *\/\n-    : \"cc\",\n-      \"memory\"\n-    );\n-\n-  post_membar(order);\n-\n-  return old_value;\n-}\n-\n-template<>\n-template<typename T>\n-inline T Atomic::PlatformXchg<8>::operator()(T volatile* dest,\n-                                             T exchange_value,\n-                                             atomic_memory_order order) const {\n-  STATIC_ASSERT(8 == sizeof(T));\n-  \/\/ Note that xchg doesn't necessarily do an acquire\n-  \/\/ (see synchronizer.cpp).\n-\n-  T old_value;\n-  const uint64_t zero = 0;\n-\n-  pre_membar(order);\n-\n-  __asm__ __volatile__ (\n-    \/* atomic loop *\/\n-    \"1:                                                 \\n\"\n-    \"   ldarx   %[old_value], %[dest], %[zero]          \\n\"\n-    \"   stdcx.  %[exchange_value], %[dest], %[zero]     \\n\"\n-    \"   bne-    1b                                      \\n\"\n-    \/* exit *\/\n-    \"2:                                                 \\n\"\n-    \/* out *\/\n-    : [old_value]       \"=&r\"   (old_value),\n-                        \"=m\"    (*dest)\n-    \/* in *\/\n-    : [dest]            \"b\"     (dest),\n-      [zero]            \"r\"     (zero),\n-      [exchange_value]  \"r\"     (exchange_value),\n-                        \"m\"     (*dest)\n-    \/* clobber *\/\n-    : \"cc\",\n-      \"memory\"\n-    );\n-\n-  post_membar(order);\n-\n-  return old_value;\n-}\n-\n-template<>\n-template<typename T>\n-inline T Atomic::PlatformCmpxchg<1>::operator()(T volatile* dest,\n-                                                T compare_value,\n-                                                T exchange_value,\n-                                                atomic_memory_order order) const {\n-  STATIC_ASSERT(1 == sizeof(T));\n-\n-  \/\/ Note that cmpxchg guarantees a two-way memory barrier across\n-  \/\/ the cmpxchg, so it's really a 'fence_cmpxchg_fence' if not\n-  \/\/ specified otherwise (see atomic.hpp).\n-\n-  \/\/ Using 32 bit internally.\n-  unsigned int old_value, loaded_value;\n-  pre_membar(order);\n-\n-  __asm__ __volatile__ (\n-    \/* atomic loop *\/\n-    \"1:                                                   \\n\"\n-    \"   lbarx   %[old_value], 0, %[dest]                  \\n\"\n-    \/* extract byte and compare *\/\n-    \"   cmpw    %[compare_value], %[old_value]            \\n\"\n-    \"   bne-    2f                                        \\n\"\n-    \/* replace byte and try to store *\/\n-    \"   stbcx.  %[exchange_value], 0, %[dest]             \\n\"\n-    \"   bne-    1b                                        \\n\"\n-    \/* exit *\/\n-    \"2:                                                   \\n\"\n-    \/* out *\/\n-    : [old_value]           \"=&r\"   (old_value),\n-      [loaded_value]        \"=&r\"   (loaded_value),\n-                            \"=m\"    (*dest)\n-    \/* in *\/\n-    : [dest]            \"b\"     (dest),\n-      [compare_value]   \"r\"     (compare_value),\n-      [exchange_value]  \"r\"     (exchange_value),\n-                        \"m\"     (*dest)\n-    \/* clobber *\/\n-    : \"cc\",\n-      \"memory\"\n-    );\n-\n-  post_membar(order);\n-\n-  return PrimitiveConversions::cast<T>((unsigned char)old_value);\n-}\n-\n-template<>\n-template<typename T>\n-inline T Atomic::PlatformCmpxchg<4>::operator()(T volatile* dest,\n-                                                T compare_value,\n-                                                T exchange_value,\n-                                                atomic_memory_order order) const {\n-  STATIC_ASSERT(4 == sizeof(T));\n-\n-  \/\/ Note that cmpxchg guarantees a two-way memory barrier across\n-  \/\/ the cmpxchg, so it's really a 'fence_cmpxchg_fence' if not\n-  \/\/ specified otherwise (see atomic.hpp).\n-\n-  T old_value;\n-  const uint64_t zero = 0;\n-\n-  pre_membar(order);\n-\n-  __asm__ __volatile__ (\n-    \/* simple guard *\/\n-    \"   lwz     %[old_value], 0(%[dest])                \\n\"\n-    \"   cmpw    %[compare_value], %[old_value]          \\n\"\n-    \"   bne-    2f                                      \\n\"\n-    \/* atomic loop *\/\n-    \"1:                                                 \\n\"\n-    \"   lwarx   %[old_value], %[dest], %[zero]          \\n\"\n-    \"   cmpw    %[compare_value], %[old_value]          \\n\"\n-    \"   bne-    2f                                      \\n\"\n-    \"   stwcx.  %[exchange_value], %[dest], %[zero]     \\n\"\n-    \"   bne-    1b                                      \\n\"\n-    \/* exit *\/\n-    \"2:                                                 \\n\"\n-    \/* out *\/\n-    : [old_value]       \"=&r\"   (old_value),\n-                        \"=m\"    (*dest)\n-    \/* in *\/\n-    : [dest]            \"b\"     (dest),\n-      [zero]            \"r\"     (zero),\n-      [compare_value]   \"r\"     (compare_value),\n-      [exchange_value]  \"r\"     (exchange_value),\n-                        \"m\"     (*dest)\n-    \/* clobber *\/\n-    : \"cc\",\n-      \"memory\"\n-    );\n-\n-  post_membar(order);\n-\n-  return old_value;\n-}\n-\n-template<>\n-template<typename T>\n-inline T Atomic::PlatformCmpxchg<8>::operator()(T volatile* dest,\n-                                                T compare_value,\n-                                                T exchange_value,\n-                                                atomic_memory_order order) const {\n-  STATIC_ASSERT(8 == sizeof(T));\n-\n-  \/\/ Note that cmpxchg guarantees a two-way memory barrier across\n-  \/\/ the cmpxchg, so it's really a 'fence_cmpxchg_fence' if not\n-  \/\/ specified otherwise (see atomic.hpp).\n-\n-  T old_value;\n-  const uint64_t zero = 0;\n-\n-  pre_membar(order);\n-\n-  __asm__ __volatile__ (\n-    \/* simple guard *\/\n-    \"   ld      %[old_value], 0(%[dest])                \\n\"\n-    \"   cmpd    %[compare_value], %[old_value]          \\n\"\n-    \"   bne-    2f                                      \\n\"\n-    \/* atomic loop *\/\n-    \"1:                                                 \\n\"\n-    \"   ldarx   %[old_value], %[dest], %[zero]          \\n\"\n-    \"   cmpd    %[compare_value], %[old_value]          \\n\"\n-    \"   bne-    2f                                      \\n\"\n-    \"   stdcx.  %[exchange_value], %[dest], %[zero]     \\n\"\n-    \"   bne-    1b                                      \\n\"\n-    \/* exit *\/\n-    \"2:                                                 \\n\"\n-    \/* out *\/\n-    : [old_value]       \"=&r\"   (old_value),\n-                        \"=m\"    (*dest)\n-    \/* in *\/\n-    : [dest]            \"b\"     (dest),\n-      [zero]            \"r\"     (zero),\n-      [compare_value]   \"r\"     (compare_value),\n-      [exchange_value]  \"r\"     (exchange_value),\n-                        \"m\"     (*dest)\n-    \/* clobber *\/\n-    : \"cc\",\n-      \"memory\"\n-    );\n-\n-  post_membar(order);\n-\n-  return old_value;\n-}\n-\n-template<size_t byte_size>\n-struct Atomic::PlatformOrderedLoad<byte_size, X_ACQUIRE>\n-{\n-  template <typename T>\n-  T operator()(const volatile T* p) const {\n-    T t = Atomic::load(p);\n-    \/\/ Use twi-isync for load_acquire (faster than lwsync).\n-    __asm__ __volatile__ (\"twi 0,%0,0\\n isync\\n\" : : \"r\" (t) : \"memory\");\n-    return t;\n-  }\n-};\n-\n-#endif \/\/ OS_CPU_LINUX_PPC_ATOMIC_LINUX_PPC_HPP\n+\/\/ Including inline assembler functions that are shared between multiple PPC64 platforms.\n+#include \"atomicAccess_ppc.hpp\"\n","filename":"src\/hotspot\/os_cpu\/linux_ppc\/atomic_linux_ppc.hpp","additions":4,"deletions":372,"binary":false,"changes":376,"status":"modified"},{"patch":"@@ -2,2 +2,2 @@\n- * Copyright (c) 1997, 2020, Oracle and\/or its affiliates. All rights reserved.\n- * Copyright (c) 2012, 2014 SAP SE. All rights reserved.\n+ * Copyright (c) 1997, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2012, 2025 SAP SE. All rights reserved.\n@@ -26,63 +26,2 @@\n-#ifndef OS_CPU_LINUX_PPC_ORDERACCESS_LINUX_PPC_HPP\n-#define OS_CPU_LINUX_PPC_ORDERACCESS_LINUX_PPC_HPP\n-\n-\/\/ Included in orderAccess.hpp header file.\n-\n-#ifndef PPC64\n-#error \"OrderAccess currently only implemented for PPC64\"\n-#endif\n-\n-\/\/ Compiler version last used for testing: gcc 4.1.2\n-\/\/ Please update this information when this file changes\n-\n-\/\/ Implementation of class OrderAccess.\n-\n-\/\/\n-\/\/ Machine barrier instructions:\n-\/\/\n-\/\/ - sync            Two-way memory barrier, aka fence.\n-\/\/ - lwsync          orders  Store|Store,\n-\/\/                            Load|Store,\n-\/\/                            Load|Load,\n-\/\/                   but not Store|Load\n-\/\/ - eieio           orders  Store|Store\n-\/\/ - isync           Invalidates speculatively executed instructions,\n-\/\/                   but isync may complete before storage accesses\n-\/\/                   associated with instructions preceding isync have\n-\/\/                   been performed.\n-\/\/\n-\/\/ Semantic barrier instructions:\n-\/\/ (as defined in orderAccess.hpp)\n-\/\/\n-\/\/ - release         orders Store|Store,       (maps to lwsync)\n-\/\/                           Load|Store\n-\/\/ - acquire         orders  Load|Store,       (maps to lwsync)\n-\/\/                           Load|Load\n-\/\/ - fence           orders Store|Store,       (maps to sync)\n-\/\/                           Load|Store,\n-\/\/                           Load|Load,\n-\/\/                          Store|Load\n-\/\/\n-\n-#define inlasm_sync()     __asm__ __volatile__ (\"sync\"   : : : \"memory\");\n-#define inlasm_lwsync()   __asm__ __volatile__ (\"lwsync\" : : : \"memory\");\n-#define inlasm_eieio()    __asm__ __volatile__ (\"eieio\"  : : : \"memory\");\n-#define inlasm_isync()    __asm__ __volatile__ (\"isync\"  : : : \"memory\");\n-\n-inline void   OrderAccess::loadload()   { inlasm_lwsync(); }\n-inline void   OrderAccess::storestore() { inlasm_lwsync(); }\n-inline void   OrderAccess::loadstore()  { inlasm_lwsync(); }\n-inline void   OrderAccess::storeload()  { inlasm_sync();   }\n-\n-inline void   OrderAccess::acquire()    { inlasm_lwsync(); }\n-inline void   OrderAccess::release()    { inlasm_lwsync(); }\n-inline void   OrderAccess::fence()      { inlasm_sync();   }\n-inline void   OrderAccess::cross_modify_fence_impl()\n-                                        { inlasm_isync();  }\n-\n-#undef inlasm_sync\n-#undef inlasm_lwsync\n-#undef inlasm_eieio\n-#undef inlasm_isync\n-\n-#endif \/\/ OS_CPU_LINUX_PPC_ORDERACCESS_LINUX_PPC_HPP\n+\/\/ Including inline assembler functions that are shared between multiple PPC64 platforms.\n+#include \"orderAccess_ppc.hpp\"\n","filename":"src\/hotspot\/os_cpu\/linux_ppc\/orderAccess_linux_ppc.hpp","additions":4,"deletions":65,"binary":false,"changes":69,"status":"modified"},{"patch":"@@ -351,0 +351,1 @@\n+  dynamic_info->prepare_for_writing();\n","filename":"src\/hotspot\/share\/cds\/dynamicArchive.cpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -769,0 +769,1 @@\n+}\n@@ -770,0 +771,1 @@\n+void FileMapInfo::prepare_for_writing() {\n","filename":"src\/hotspot\/share\/cds\/filemap.cpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -362,0 +362,1 @@\n+  void  prepare_for_writing();\n","filename":"src\/hotspot\/share\/cds\/filemap.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -194,1 +194,1 @@\n-      ClassFileStream st((u1*)buf, len, nullptr);\n+      ClassFileStream st((u1*)buf, len, \"jrt:\/java.base\");\n","filename":"src\/hotspot\/share\/cds\/lambdaFormInvokers.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -116,0 +116,1 @@\n+FileMapInfo* MetaspaceShared::_output_mapinfo = nullptr;\n@@ -324,0 +325,18 @@\n+  if (CDSConfig::is_dumping_preimage_static_archive()) {\n+    \/\/ We are in the AOT training run. User code is executed.\n+    \/\/\n+    \/\/ On Windows, if the user code closes System.out and we open the AOT config file for output\n+    \/\/ only at VM exit, we might get back the same file HANDLE as stdout, and the AOT config\n+    \/\/ file may get corrupted by UL logs. By opening early, we ensure that the output\n+    \/\/ HANDLE is different than stdout so we can avoid such corruption.\n+    open_output_mapinfo();\n+  } else {\n+    \/\/ No need for the above as we won't execute any user code.\n+  }\n+}\n+\n+void MetaspaceShared::open_output_mapinfo() {\n+  const char* static_archive = CDSConfig::output_archive_path();\n+  assert(static_archive != nullptr, \"sanity\");\n+  _output_mapinfo = new FileMapInfo(static_archive, true);\n+  _output_mapinfo->open_as_output();\n@@ -554,2 +573,2 @@\n-  VM_PopulateDumpSharedSpace(StaticArchiveBuilder& b) :\n-    VM_Operation(), _heap_info(), _map_info(nullptr), _builder(b) {}\n+  VM_PopulateDumpSharedSpace(StaticArchiveBuilder& b, FileMapInfo* map_info) :\n+    VM_Operation(), _heap_info(), _map_info(map_info), _builder(b) {}\n@@ -561,1 +580,0 @@\n-  FileMapInfo* map_info() const { return _map_info; }\n@@ -691,6 +709,0 @@\n-  if (CDSConfig::is_dumping_final_static_archive()) {\n-    FileMapInfo::free_current_info(); \/\/ FIXME: should not free current info\n-  }\n-  const char* static_archive = CDSConfig::output_archive_path();\n-  assert(static_archive != nullptr, \"sanity\");\n-  _map_info = new FileMapInfo(static_archive, true);\n@@ -1015,1 +1027,8 @@\n-  VM_PopulateDumpSharedSpace op(builder);\n+  if (!CDSConfig::is_dumping_preimage_static_archive()) {\n+    if (CDSConfig::is_dumping_final_static_archive()) {\n+      FileMapInfo::free_current_info(); \/\/ FIXME: should not free current info\n+    }\n+    open_output_mapinfo();\n+  }\n+\n+  VM_PopulateDumpSharedSpace op(builder, _output_mapinfo);\n@@ -1029,1 +1048,3 @@\n-  bool status = write_static_archive(&builder, op.map_info(), op.heap_info());\n+  bool status = write_static_archive(&builder, _output_mapinfo, op.heap_info());\n+  assert(!_output_mapinfo->is_open(), \"Must be closed already\");\n+  _output_mapinfo = nullptr;\n@@ -1047,2 +1068,0 @@\n-\n-  map_info->open_as_output();\n@@ -1052,0 +1071,1 @@\n+  map_info->prepare_for_writing();\n@@ -1290,0 +1310,4 @@\n+  if (!ls.is_enabled()) {\n+    return;\n+  }\n+\n","filename":"src\/hotspot\/share\/cds\/metaspaceShared.cpp","additions":37,"deletions":13,"binary":false,"changes":50,"status":"modified"},{"patch":"@@ -62,0 +62,1 @@\n+  static FileMapInfo* _output_mapinfo;\n@@ -183,0 +184,1 @@\n+  static void open_output_mapinfo();\n","filename":"src\/hotspot\/share\/cds\/metaspaceShared.hpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1195,4 +1195,1 @@\n-    if (loader == nullptr) {\n-      \/\/ JFR classes\n-      ik->set_shared_classpath_index(0);\n-    }\n+    ik->set_shared_classpath_index(-1); \/\/ unsupported location\n","filename":"src\/hotspot\/share\/classfile\/classLoader.cpp","additions":1,"deletions":4,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -900,0 +900,1 @@\n+      nm->print_code_snippet(st, addr);\n","filename":"src\/hotspot\/share\/code\/codeBlob.cpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -230,5 +230,0 @@\n-    \/\/ Further down, just before FLAG_SET_ERGO(), all segment sizes are\n-    \/\/ aligned down to the next lower multiple of min_size. For large page\n-    \/\/ sizes, this may result in (non_nmethod.size == 0) which is not acceptable.\n-    \/\/ Therefore, force non_nmethod.size to at least min_size.\n-    non_nmethod.size = MAX2(non_nmethod.size, min_size);\n@@ -310,5 +305,4 @@\n-  non_profiled.size += non_nmethod.size & alignment_mask(min_size);\n-  non_profiled.size += profiled.size & alignment_mask(min_size);\n-  non_nmethod.size = align_down(non_nmethod.size, min_size);\n-  profiled.size = align_down(profiled.size, min_size);\n-  non_profiled.size = align_down(non_profiled.size, min_size);\n+  non_nmethod.size = align_up(non_nmethod.size, min_size);\n+  profiled.size = align_up(profiled.size, min_size);\n+  non_profiled.size = align_up(non_profiled.size, min_size);\n+  cache_size = non_nmethod.size + profiled.size + non_profiled.size;\n","filename":"src\/hotspot\/share\/code\/codeCache.cpp","additions":4,"deletions":10,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -4004,0 +4004,40 @@\n+void nmethod::print_code_snippet(outputStream* st, address addr) const {\n+  if (entry_point() <= addr && addr < code_end()) {\n+    \/\/ Pointing into the nmethod's code. Try to disassemble some instructions around addr.\n+    \/\/ Determine conservative start and end points.\n+    address start;\n+    if (frame_complete_offset() != CodeOffsets::frame_never_safe &&\n+        addr >= code_begin() + frame_complete_offset()) {\n+      start = code_begin() + frame_complete_offset();\n+    } else {\n+      start = (addr < verified_entry_point()) ? entry_point() : verified_entry_point();\n+    }\n+    address start_for_hex_dump = start; \/\/ We can choose a different starting point for hex dump, below.\n+    address end = code_end();\n+\n+    \/\/ Try using relocations to find closer instruction start and end points.\n+    \/\/ (Some platforms have variable length instructions and can only\n+    \/\/ disassemble correctly at instruction start addresses.)\n+    RelocIterator iter((nmethod*)this, start);\n+    while (iter.next() && iter.addr() < addr) { \/\/ find relocation before addr\n+      \/\/ Note: There's a relocation which doesn't point to an instruction start:\n+      \/\/ ZBarrierRelocationFormatStoreGoodAfterMov with ZGC on x86_64\n+      \/\/ We could detect and skip it, but hex dump is still usable when\n+      \/\/ disassembler produces garbage in such a very rare case.\n+      start = iter.addr();\n+      \/\/ We want at least 64 Bytes ahead in hex dump.\n+      if (iter.addr() <= (addr - 64)) start_for_hex_dump = iter.addr();\n+    }\n+    if (iter.has_current()) {\n+      if (iter.addr() == addr) iter.next(); \/\/ find relocation after addr\n+      if (iter.has_current()) end = iter.addr();\n+    }\n+\n+    \/\/ Always print hex. Disassembler may still have problems when hitting an incorrect instruction start.\n+    os::print_hex_dump(st, start_for_hex_dump, end, 1, \/* print_ascii=*\/false);\n+    if (!Disassembler::is_abstract()) {\n+      Disassembler::decode(start, end, st);\n+    }\n+  }\n+}\n+\n","filename":"src\/hotspot\/share\/code\/nmethod.cpp","additions":40,"deletions":0,"binary":false,"changes":40,"status":"modified"},{"patch":"@@ -996,0 +996,1 @@\n+  void print_code_snippet(outputStream* st, address addr) const;\n","filename":"src\/hotspot\/share\/code\/nmethod.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -31,0 +31,1 @@\n+#include \"gc\/g1\/g1Analytics.hpp\"\n@@ -390,1 +391,6 @@\n-  return attempt_allocation(min_size, requested_size, actual_size);\n+  \/\/ Do not allow a GC because we are allocating a new TLAB to avoid an issue\n+  \/\/ with UseGCOverheadLimit: although this GC would return null if the overhead\n+  \/\/ limit would be exceeded, but it would likely free at least some space.\n+  \/\/ So the subsequent outside-TLAB allocation could be successful anyway and\n+  \/\/ the indication that the overhead limit had been exceeded swallowed.\n+  return attempt_allocation(min_size, requested_size, actual_size, false \/* allow_gc *\/);\n@@ -393,3 +399,2 @@\n-HeapWord*\n-G1CollectedHeap::mem_allocate(size_t word_size,\n-                              bool*  gc_overhead_limit_was_exceeded) {\n+HeapWord* G1CollectedHeap::mem_allocate(size_t word_size,\n+                                        bool*  gc_overhead_limit_was_exceeded) {\n@@ -402,1 +407,1 @@\n-  return attempt_allocation(word_size, word_size, &dummy);\n+  return attempt_allocation(word_size, word_size, &dummy, true \/* allow_gc *\/);\n@@ -405,1 +410,1 @@\n-HeapWord* G1CollectedHeap::attempt_allocation_slow(uint node_index, size_t word_size) {\n+HeapWord* G1CollectedHeap::attempt_allocation_slow(uint node_index, size_t word_size, bool allow_gc) {\n@@ -432,0 +437,2 @@\n+      } else if (!allow_gc) {\n+        return nullptr;\n@@ -449,0 +456,7 @@\n+    \/\/ Has the gc overhead limit been reached in the meantime? If so, this mutator\n+    \/\/ should receive null even when unsuccessfully scheduling a collection as well\n+    \/\/ for global consistency.\n+    if (gc_overhead_limit_exceeded()) {\n+      return nullptr;\n+    }\n+\n@@ -450,1 +464,1 @@\n-    \/\/ another thread beat us to it). In this case immeditealy retry the allocation\n+    \/\/ another thread beat us to it). In this case immediately retry the allocation\n@@ -595,1 +609,2 @@\n-                                                     size_t* actual_word_size) {\n+                                                     size_t* actual_word_size,\n+                                                     bool allow_gc) {\n@@ -607,1 +622,1 @@\n-    result = attempt_allocation_slow(node_index, desired_word_size);\n+    result = attempt_allocation_slow(node_index, desired_word_size, allow_gc);\n@@ -691,0 +706,7 @@\n+    \/\/ Has the gc overhead limit been reached in the meantime? If so, this mutator\n+    \/\/ should receive null even when unsuccessfully scheduling a collection as well\n+    \/\/ for global consistency.\n+    if (gc_overhead_limit_exceeded()) {\n+      return nullptr;\n+    }\n+\n@@ -893,0 +915,27 @@\n+void G1CollectedHeap::update_gc_overhead_counter() {\n+  assert(SafepointSynchronize::is_at_safepoint(), \"precondition\");\n+\n+  if (!UseGCOverheadLimit) {\n+    return;\n+  }\n+\n+  bool gc_time_over_limit = (_policy->analytics()->long_term_pause_time_ratio() * 100) >= GCTimeLimit;\n+  double free_space_percent = percent_of(num_available_regions() * G1HeapRegion::GrainBytes, max_capacity());\n+  bool free_space_below_limit = free_space_percent < GCHeapFreeLimit;\n+\n+  log_debug(gc)(\"GC Overhead Limit: GC Time %f Free Space %f Counter %zu\",\n+                (_policy->analytics()->long_term_pause_time_ratio() * 100),\n+                free_space_percent,\n+                _gc_overhead_counter);\n+\n+  if (gc_time_over_limit && free_space_below_limit) {\n+    _gc_overhead_counter++;\n+  } else {\n+    _gc_overhead_counter = 0;\n+  }\n+}\n+\n+bool G1CollectedHeap::gc_overhead_limit_exceeded() {\n+  return _gc_overhead_counter >= GCOverheadLimitThreshold;\n+}\n+\n@@ -897,7 +946,16 @@\n-  \/\/ Let's attempt the allocation first.\n-  HeapWord* result =\n-    attempt_allocation_at_safepoint(word_size,\n-                                    expect_null_mutator_alloc_region);\n-  if (result != nullptr) {\n-    return result;\n-  }\n+  \/\/ Skip allocation if GC overhead limit has been exceeded to let the mutator run\n+  \/\/ into an OOME. It can either exit \"gracefully\" or try to free up memory asap.\n+  \/\/ For the latter situation, keep running GCs. If the mutator frees up enough\n+  \/\/ memory quickly enough, the overhead(s) will go below the threshold(s) again\n+  \/\/ and the VM may continue running.\n+  \/\/ If we did not continue garbage collections, the (gc overhead) limit may decrease\n+  \/\/ enough by itself to not count as exceeding the limit any more, in the worst\n+  \/\/ case bouncing back-and-forth all the time.\n+  if (!gc_overhead_limit_exceeded()) {\n+    \/\/ Let's attempt the allocation first.\n+    HeapWord* result =\n+      attempt_allocation_at_safepoint(word_size,\n+                                      expect_null_mutator_alloc_region);\n+    if (result != nullptr) {\n+      return result;\n+    }\n@@ -905,7 +963,8 @@\n-  \/\/ In a G1 heap, we're supposed to keep allocation from failing by\n-  \/\/ incremental pauses.  Therefore, at least for now, we'll favor\n-  \/\/ expansion over collection.  (This might change in the future if we can\n-  \/\/ do something smarter than full collection to satisfy a failed alloc.)\n-  result = expand_and_allocate(word_size);\n-  if (result != nullptr) {\n-    return result;\n+    \/\/ In a G1 heap, we're supposed to keep allocation from failing by\n+    \/\/ incremental pauses.  Therefore, at least for now, we'll favor\n+    \/\/ expansion over collection.  (This might change in the future if we can\n+    \/\/ do something smarter than full collection to satisfy a failed alloc.)\n+    result = expand_and_allocate(word_size);\n+    if (result != nullptr) {\n+      return result;\n+    }\n@@ -935,0 +994,4 @@\n+  \/\/ Update GC overhead limits after the initial garbage collection leading to this\n+  \/\/ allocation attempt.\n+  update_gc_overhead_counter();\n+\n@@ -969,0 +1032,4 @@\n+  if (gc_overhead_limit_exceeded()) {\n+    log_info(gc)(\"GC Overhead Limit exceeded too often (%zu).\", GCOverheadLimitThreshold);\n+  }\n+\n@@ -1134,0 +1201,1 @@\n+  _gc_overhead_counter(0),\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CollectedHeap.cpp","additions":91,"deletions":23,"binary":false,"changes":114,"status":"modified"},{"patch":"@@ -172,0 +172,11 @@\n+  \/\/ GC Overhead Limit functionality related members.\n+  \/\/\n+  \/\/ The goal is to return null for allocations prematurely (before really going\n+  \/\/ OOME) in case both GC CPU usage (>= GCTimeLimit) and not much available free\n+  \/\/ memory (<= GCHeapFreeLimit) so that applications can exit gracefully or try\n+  \/\/ to keep running by easing off memory.\n+  uintx _gc_overhead_counter;        \/\/ The number of consecutive garbage collections we were over the limits.\n+\n+  void update_gc_overhead_counter();\n+  bool gc_overhead_limit_exceeded();\n+\n@@ -428,7 +439,3 @@\n-  \/\/   this fails, they will attempt to do an evacuation pause and\n-  \/\/   retry the allocation.\n-  \/\/\n-  \/\/ * If all allocation attempts fail, even after trying to schedule\n-  \/\/   an evacuation pause, allocate_new_tlab() will return null,\n-  \/\/   whereas mem_allocate() will attempt a heap expansion and\/or\n-  \/\/   schedule a Full GC.\n+  \/\/   this fails, (only) mem_allocate() will attempt to do an evacuation\n+  \/\/   pause and retry the allocation. Allocate_new_tlab() will return null,\n+  \/\/   deferring to the following mem_allocate().\n@@ -439,1 +446,1 @@\n-  \/\/   will satisfy them with a special path.\n+  \/\/   will satisfy them in a special path.\n@@ -453,2 +460,2 @@\n-                                      size_t* actual_word_size);\n-\n+                                      size_t* actual_word_size,\n+                                      bool allow_gc);\n@@ -457,2 +464,3 @@\n-  \/\/ pause. This should only be used for non-humongous allocations.\n-  HeapWord* attempt_allocation_slow(uint node_index, size_t word_size);\n+  \/\/ pause if allow_gc is set. This should only be used for non-humongous\n+  \/\/ allocations.\n+  HeapWord* attempt_allocation_slow(uint node_index, size_t word_size, bool allow_gc);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CollectedHeap.hpp","additions":20,"deletions":12,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -573,2 +573,2 @@\n-  assert(_gc_pause_time_ms >= accounted_ms, \"GC pause time(%.3lfms) cannot be \"\n-         \"smaller than the sum of each phase(%.3lfms).\", _gc_pause_time_ms, accounted_ms);\n+  assert(_gc_pause_time_ms >= accounted_ms, \"GC pause time(%.15lf ms) cannot be \"\n+         \"smaller than the sum of each phase(%.15lf ms).\", _gc_pause_time_ms, accounted_ms);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1GCPhaseTimes.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -70,1 +70,1 @@\n-class GCLogMessage : public FormatBuffer<512> {};\n+class GCLogMessage : public FormatBuffer<1024> {};\n","filename":"src\/hotspot\/share\/gc\/shared\/collectedHeap.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -417,1 +417,1 @@\n-  product(bool, UseGCOverheadLimit, true,                                   \\\n+  product(bool, UseGCOverheadLimit, falseInDebug,                           \\\n","filename":"src\/hotspot\/share\/gc\/shared\/gc_globals.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -103,1 +103,2 @@\n-    \"%zu\/\" STRDEDUP_BYTES_FORMAT_NS \" (new), \"\n+    \"%zu (inspected), \"\n+    \"%zu\/\" STRDEDUP_BYTES_FORMAT_NS \" (new unknown), \"\n@@ -105,1 +106,2 @@\n-    \"avg \" STRDEDUP_PERCENT_FORMAT_NS \", \"\n+    \"total avg deduped\/new unknown bytes \" STRDEDUP_PERCENT_FORMAT_NS \", \"\n+    STRDEDUP_BYTES_FORMAT_NS \" (total deduped),\" STRDEDUP_BYTES_FORMAT_NS \" (total new unknown), \"\n@@ -107,0 +109,1 @@\n+    last_stat->_inspected,\n@@ -110,0 +113,1 @@\n+    STRDEDUP_BYTES_PARAM(total_stat->_deduped_bytes), STRDEDUP_BYTES_PARAM(total_stat->_new_bytes),\n@@ -220,4 +224,4 @@\n-  log_debug(stringdedup)(\"    Inspected:    %12zu\", _inspected);\n-  log_debug(stringdedup)(\"      Known:      %12zu(%5.1f%%)\", _known, known_percent);\n-  log_debug(stringdedup)(\"      Shared:     %12zu(%5.1f%%)\", _known_shared, known_shared_percent);\n-  log_debug(stringdedup)(\"      New:        %12zu(%5.1f%%)\" STRDEDUP_BYTES_FORMAT,\n+  log_debug(stringdedup)(\"    Inspected:     %12zu\", _inspected);\n+  log_debug(stringdedup)(\"      Known:       %12zu(%5.1f%%)\", _known, known_percent);\n+  log_debug(stringdedup)(\"      Shared:      %12zu(%5.1f%%)\", _known_shared, known_shared_percent);\n+  log_debug(stringdedup)(\"      New unknown: %12zu(%5.1f%%)\" STRDEDUP_BYTES_FORMAT,\n@@ -225,3 +229,3 @@\n-  log_debug(stringdedup)(\"      Replaced:   %12zu(%5.1f%%)\", _replaced, replaced_percent);\n-  log_debug(stringdedup)(\"      Deleted:    %12zu(%5.1f%%)\", _deleted, deleted_percent);\n-  log_debug(stringdedup)(\"    Deduplicated: %12zu(%5.1f%%)\" STRDEDUP_BYTES_FORMAT \"(%5.1f%%)\",\n+  log_debug(stringdedup)(\"      Replaced:    %12zu(%5.1f%%)\", _replaced, replaced_percent);\n+  log_debug(stringdedup)(\"      Deleted:     %12zu(%5.1f%%)\", _deleted, deleted_percent);\n+  log_debug(stringdedup)(\"    Deduplicated:  %12zu(%5.1f%%)\" STRDEDUP_BYTES_FORMAT \"(%5.1f%%)\",\n","filename":"src\/hotspot\/share\/gc\/shared\/stringdedup\/stringDedupStat.cpp","additions":13,"deletions":9,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -67,1 +67,3 @@\n-  msg.append(\"  \" PTR_FORMAT \" - klass \" PTR_FORMAT \" %s\\n\", p2i(obj), p2i(obj->klass()), obj->klass()->external_name());\n+  Klass* obj_klass = ShenandoahForwarding::klass(obj);\n+\n+  msg.append(\"  \" PTR_FORMAT \" - klass \" PTR_FORMAT \" %s\\n\", p2i(obj), p2i(obj_klass), obj_klass->external_name());\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahAsserts.cpp","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -296,0 +296,1 @@\n+  inline HeapWord* end()  const { return _heap_region.end(); }\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahHeap.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -60,0 +60,20 @@\n+HeapWord* ShenandoahMarkBitMap::get_prev_marked_addr(const HeapWord* limit,\n+                                                     const HeapWord* addr) const {\n+#ifdef ASSERT\n+  ShenandoahHeap* heap = ShenandoahHeap::heap();\n+  ShenandoahHeapRegion* r = heap->heap_region_containing(addr);\n+  ShenandoahMarkingContext* ctx = heap->marking_context();\n+  HeapWord* tams = ctx->top_at_mark_start(r);\n+  assert(limit != nullptr, \"limit must not be null\");\n+  assert(limit >= r->bottom(), \"limit must be more than bottom\");\n+  assert(addr <= tams, \"addr must be less than TAMS\");\n+#endif\n+\n+  \/\/ Round addr down to a possible object boundary to be safe.\n+  size_t const addr_offset = address_to_index(align_down(addr, HeapWordSize << LogMinObjAlignment));\n+  size_t const limit_offset = address_to_index(limit);\n+  size_t const last_offset = get_prev_one_offset(limit_offset, addr_offset);\n+\n+  \/\/ cast required to remove const-ness of the value pointed to.  We won't modify that object, but my caller might.\n+  return (last_offset > addr_offset)? (HeapWord*) addr + 1: index_to_address(last_offset);\n+}\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahMarkBitMap.cpp","additions":20,"deletions":0,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -122,1 +122,9 @@\n-  inline idx_t get_next_one_offset (idx_t l_index, idx_t r_index) const;\n+  \/\/ Helper for get_prev_{zero,one}_bit variants.\n+  \/\/ - flip designates whether searching for 1s or 0s.  Must be one of\n+  \/\/   find_{zeros,ones}_flip.\n+  \/\/ - aligned_left is true if l_index is a priori on a bm_word_t boundary.\n+  template<bm_word_t flip, bool aligned_left>\n+  inline idx_t get_prev_bit_impl(idx_t l_index, idx_t r_index) const;\n+\n+  \/\/ Search for the first marked address in the range [l_index, r_index), or r_index if none found.\n+  inline idx_t get_next_one_offset(idx_t l_index, idx_t r_index) const;\n@@ -124,1 +132,5 @@\n-  void clear_large_range (idx_t beg, idx_t end);\n+  \/\/ Search for last one in the range [l_index, r_index).  Return r_index if not found.\n+  inline idx_t get_prev_one_offset(idx_t l_index, idx_t r_index) const;\n+\n+  \/\/ Clear the strong and weak mark bits for all index positions >= l_index and < r_index.\n+  void clear_large_range(idx_t beg, idx_t end);\n@@ -165,3 +177,1 @@\n-  \/\/ Return the address corresponding to the next marked bit at or after\n-  \/\/ \"addr\", and before \"limit\", if \"limit\" is non-null.  If there is no\n-  \/\/ such bit, returns \"limit\" if that is non-null, or else \"endWord()\".\n+  \/\/ Return the first marked address in the range [addr, limit), or limit if none found.\n@@ -171,0 +181,4 @@\n+  \/\/ Return the last marked address in the range [limit, addr], or addr+1 if none found.\n+  HeapWord* get_prev_marked_addr(const HeapWord* limit,\n+                                 const HeapWord* addr) const;\n+\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahMarkBitMap.hpp","additions":19,"deletions":5,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -32,0 +32,1 @@\n+#include \"utilities\/count_leading_zeros.hpp\"\n@@ -174,0 +175,85 @@\n+template<ShenandoahMarkBitMap::bm_word_t flip, bool aligned_left>\n+inline ShenandoahMarkBitMap::idx_t ShenandoahMarkBitMap::get_prev_bit_impl(idx_t l_index, idx_t r_index) const {\n+  STATIC_ASSERT(flip == find_ones_flip || flip == find_zeros_flip);\n+  verify_range(l_index, r_index);\n+  assert(!aligned_left || is_aligned(l_index, BitsPerWord), \"l_index not aligned\");\n+\n+  \/\/ The first word often contains an interesting bit, either due to\n+  \/\/ density or because of features of the calling algorithm.  So it's\n+  \/\/ important to examine that first word with a minimum of fuss,\n+  \/\/ minimizing setup time for later words that will be wasted if the\n+  \/\/ first word is indeed interesting.\n+\n+  \/\/ The benefit from aligned_left being true is relatively small.\n+  \/\/ It saves an operation in the setup for the word search loop.\n+  \/\/ It also eliminates the range check on the final result.\n+  \/\/ However, callers often have a comparison with l_index, and\n+  \/\/ inlining often allows the two comparisons to be combined; it is\n+  \/\/ important when !aligned_left that return paths either return\n+  \/\/ l_index or a value dominating a comparison with l_index.\n+  \/\/ aligned_left is still helpful when the caller doesn't have a\n+  \/\/ range check because features of the calling algorithm guarantee\n+  \/\/ an interesting bit will be present.\n+\n+  if (l_index < r_index) {\n+    \/\/ Get the word containing r_index, and shift out the high-order bits (representing objects that come after r_index)\n+    idx_t index = to_words_align_down(r_index);\n+    assert(BitsPerWord - 2 >= bit_in_word(r_index), \"sanity\");\n+    size_t shift = BitsPerWord - 2 - bit_in_word(r_index);\n+    bm_word_t cword = (map(index) ^ flip) << shift;\n+    \/\/ After this shift, the highest order bits correspond to r_index.\n+\n+    \/\/ We give special handling if either of the two most significant bits (Weak or Strong) is set.  With 64-bit\n+    \/\/ words, the mask of interest is 0xc000_0000_0000_0000.  Symbolically, this constant is represented by:\n+    const bm_word_t first_object_mask = ((bm_word_t) 0x3) << (BitsPerWord - 2);\n+    if ((cword & first_object_mask) != 0) {\n+      \/\/ The first object is similarly often interesting. When it matters\n+      \/\/ (density or features of the calling algorithm make it likely\n+      \/\/ the first bit is set), going straight to the next clause compares\n+      \/\/ poorly with doing this check first; count_leading_zeros can be\n+      \/\/ relatively expensive, plus there is the additional range check.\n+      \/\/ But when the first bit isn't set, the cost of having tested for\n+      \/\/ it is relatively small compared to the rest of the search.\n+      return r_index;\n+    } else if (cword != 0) {\n+      \/\/ Note that there are 2 bits corresponding to every index value (Weak and Strong), and every odd index value\n+      \/\/  corresponds to the same object as index-1\n+      \/\/ Flipped and shifted first word is non-zero.  If leading_zeros is 0 or 1, we return r_index (above).\n+      \/\/ if leading zeros is 2 or 3, we return (r_index - 1) or (r_index - 2), and so forth\n+      idx_t result = r_index + 1 - count_leading_zeros(cword);\n+      if (aligned_left || (result >= l_index)) return result;\n+      else {\n+        \/\/ Sentinel value means no object found within specified range.\n+        return r_index + 2;\n+      }\n+    } else {\n+      \/\/ Flipped and shifted first word is zero.  Word search through\n+      \/\/ aligned up r_index for a non-zero flipped word.\n+      idx_t limit = aligned_left\n+                    ? to_words_align_down(l_index) \/\/ Minuscule savings when aligned.\n+                    : to_words_align_up(l_index);\n+      \/\/ Unsigned index is always >= unsigned limit if limit equals zero, so test for strictly greater than before decrement.\n+      while (index-- > limit) {\n+        cword = map(index) ^ flip;\n+        if (cword != 0) {\n+          \/\/ cword hods bits:\n+          \/\/    0x03 for the object corresponding to index (and index+1)       (count_leading_zeros is 62 or 63)\n+          \/\/    0x0c for the object corresponding to index + 2 (and index+3)   (count_leading_zeros is 60 or 61)\n+          \/\/    and so on.\n+          idx_t result = bit_index(index + 1) - (count_leading_zeros(cword) + 1);\n+          if (aligned_left || (result >= l_index)) return result;\n+          else {\n+            \/\/ Sentinel value means no object found within specified range.\n+            return r_index + 2;\n+          }\n+        }\n+      }\n+      \/\/ No bits in range; return r_index+2.\n+      return r_index + 2;\n+    }\n+  }\n+  else {\n+    return r_index + 2;\n+  }\n+}\n+\n@@ -178,0 +264,4 @@\n+inline ShenandoahMarkBitMap::idx_t ShenandoahMarkBitMap::get_prev_one_offset(idx_t l_offset, idx_t r_offset) const {\n+  return get_prev_bit_impl<find_ones_flip, false>(l_offset, r_offset);\n+}\n+\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahMarkBitMap.inline.hpp","additions":90,"deletions":0,"binary":false,"changes":90,"status":"modified"},{"patch":"@@ -70,0 +70,1 @@\n+  \/\/ Return address of the first marked address in the range [addr,limit), or limit if no marked object found\n@@ -72,0 +73,3 @@\n+  \/\/ Return address of the last marked object in range [limit, start], returning start+1 if no marked object found\n+  inline HeapWord* get_prev_marked_addr(const HeapWord* limit, const HeapWord* start) const;\n+\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahMarkingContext.hpp","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -75,0 +75,4 @@\n+inline HeapWord* ShenandoahMarkingContext::get_prev_marked_addr(const HeapWord* limit, const HeapWord* start) const {\n+  return _mark_bit_map.get_prev_marked_addr(limit, start);\n+}\n+\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahMarkingContext.inline.hpp","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -128,3 +128,2 @@\n-  assert(((((unsigned long long) from) & (CardTable::card_size() - 1)) == 0) &&\n-         ((((unsigned long long) to) & (CardTable::card_size() - 1)) == 0),\n-         \"reset_object_range bounds must align with card boundaries\");\n+  assert(CardTable::is_card_aligned(from) && CardTable::is_card_aligned(to),\n+         \"Must align with card boundaries\");\n@@ -225,5 +224,2 @@\n-\/\/ Given a card_index, return the starting address of the first block in the heap\n-\/\/ that straddles into this card. If this card is co-initial with an object, then\n-\/\/ this would return the first address of the range that this card covers, which is\n-\/\/ where the card's first object also begins.\n-HeapWord* ShenandoahCardCluster::block_start(const size_t card_index) const {\n+HeapWord* ShenandoahCardCluster::first_object_start(const size_t card_index, const ShenandoahMarkingContext* const ctx,\n+                                                    HeapWord* tams, HeapWord* end_range_of_interest) const {\n@@ -232,0 +228,2 @@\n+  assert(left < end_range_of_interest, \"No meaningful work to do\");\n+  ShenandoahHeapRegion* region = ShenandoahHeap::heap()->heap_region_containing(left);\n@@ -235,1 +233,0 @@\n-  ShenandoahHeapRegion* region = ShenandoahHeap::heap()->heap_region_containing(left);\n@@ -241,0 +238,62 @@\n+\n+  HeapWord* right = MIN2(region->top(), end_range_of_interest);\n+  HeapWord* end_of_search_next = MIN2(right, tams);\n+  \/\/ Since end_range_of_interest may not align on a card boundary, last_relevant_card_index is conservative.  Not all of the\n+  \/\/ memory within the last relevant card's span is < right.\n+  size_t last_relevant_card_index;\n+  if (end_range_of_interest == _end_of_heap) {\n+    last_relevant_card_index = _rs->card_index_for_addr(end_range_of_interest - 1);\n+  } else {\n+    last_relevant_card_index = _rs->card_index_for_addr(end_range_of_interest);\n+    if (_rs->addr_for_card_index(last_relevant_card_index) == end_range_of_interest) {\n+      last_relevant_card_index--;\n+    }\n+  }\n+  assert(card_index <= last_relevant_card_index, \"sanity: card_index: %zu, last_relevant: %zu, left: \" PTR_FORMAT\n+         \", end_of_range: \" PTR_FORMAT, card_index, last_relevant_card_index, p2i(left), p2i(end_range_of_interest));\n+\n+  \/\/ if marking context is valid and we are below tams, we use the marking bit map to find the first marked object that\n+  \/\/ intersects with this card.  If no such object exists, we return the first marked object that follows the start\n+  \/\/ of this card's memory range if such an object is found at or before last_relevant_card_index.  If there are no\n+  \/\/ marked objects in this range, we return nullptr.\n+  if ((ctx != nullptr) && (left < tams)) {\n+    if (ctx->is_marked(left)) {\n+      oop obj = cast_to_oop(left);\n+      assert(oopDesc::is_oop(obj), \"Should be an object\");\n+      return left;\n+    }\n+    \/\/ get the previous marked object, if any\n+    if (region->bottom() < left) {\n+      \/\/ In the case that this region was most recently marked as young, the fact that this region has been promoted in place\n+      \/\/ denotes that final mark (Young) has completed.  In the case that this region was most recently marked as old, the\n+      \/\/ fact that (ctx != nullptr) denotes that old marking has completed.  Otherwise, ctx would equal null.\n+      HeapWord* prev = ctx->get_prev_marked_addr(region->bottom(), left - 1);\n+      if (prev < left) {\n+        oop obj = cast_to_oop(prev);\n+        assert(oopDesc::is_oop(obj), \"Should be an object\");\n+        HeapWord* obj_end = prev + obj->size();\n+        if (obj_end > left) {\n+          return prev;\n+        }\n+      }\n+    }\n+    \/\/ Either prev >= left (no previous object found), or the previous object that was found ends before my card range begins.\n+    \/\/ In eiher case, find the next marked object if any on this or a following card\n+    assert(!ctx->is_marked(left), \"Was dealt with above\");\n+    assert(right > left, \"We don't expect to be examining cards above the smaller of TAMS or top\");\n+    HeapWord* next = ctx->get_next_marked_addr(left, end_of_search_next);\n+    \/\/ If end_of_search_next < right, we may return tams here, which is \"marked\" by default\n+    if (next < right) {\n+      oop obj = cast_to_oop(next);\n+      assert(oopDesc::is_oop(obj), \"Should be an object\");\n+      return next;\n+    } else {\n+      return nullptr;\n+    }\n+  }\n+\n+  assert((ctx == nullptr) || (left >= tams), \"Should have returned above\");\n+\n+  \/\/ The following code assumes that all data in region at or above left holds parsable objects\n+  assert((left >= tams) || ShenandoahGenerationalHeap::heap()->old_generation()->is_parsable(),\n+         \"The code that follows expects a parsable heap\");\n@@ -242,2 +301,1 @@\n-    \/\/ This card contains a co-initial object; a fortiori, it covers\n-    \/\/ also the case of a card being the first in a region.\n+    \/\/ This card contains a co-initial object; a fortiori, it covers also the case of a card being the first in a region.\n@@ -248,2 +306,0 @@\n-  HeapWord* p = nullptr;\n-  oop obj = cast_to_oop(p);\n@@ -259,1 +315,1 @@\n-  assert(cur_index >= 0 && (cur_index <= (ssize_t)card_index), \"Error\");\n+  assert(cur_index >= 0 && (cur_index <= (ssize_t) card_index), \"Error\");\n@@ -265,1 +321,30 @@\n-  p = _rs->addr_for_card_index(cur_index) + offset;\n+  HeapWord* p = _rs->addr_for_card_index(cur_index) + offset;\n+  if ((ctx != nullptr) && (p < tams)) {\n+    if (ctx->is_marked(p)) {\n+      oop obj = cast_to_oop(p);\n+      assert(oopDesc::is_oop(obj), \"Should be an object\");\n+      assert(Klass::is_valid(obj->klass()), \"Not a valid klass ptr\");\n+      assert(p + obj->size() > left, \"This object should span start of card\");\n+      assert(p < right, \"Result must precede right\");\n+      return p;\n+    } else {\n+      \/\/ Object that spans start of card is dead, so should not be scanned\n+      assert((ctx == nullptr) || (left + get_first_start(card_index) >= tams), \"Should have handled this case above\");\n+      if (starts_object(card_index)) {\n+        assert(left + get_first_start(card_index) < right, \"Result must precede right\");\n+        return left + get_first_start(card_index);\n+      } else {\n+        \/\/ Spanning object is dead and this card does not start an object, so the start object is in some card that follows\n+        size_t following_card_index = card_index;\n+        do {\n+          following_card_index++;\n+          if (following_card_index > last_relevant_card_index) {\n+            return nullptr;\n+          }\n+        } while (!starts_object(following_card_index));\n+        HeapWord* result_candidate = _rs->addr_for_card_index(following_card_index) + get_first_start(following_card_index);\n+        return (result_candidate >= right)? nullptr: result_candidate;\n+      }\n+    }\n+  }\n+\n@@ -270,1 +355,2 @@\n-  \/\/ 1. we ask this question only for regions in the old generation\n+  \/\/ 1. we ask this question only for regions in the old generation, and those\n+  \/\/    that are not humongous regions\n@@ -272,2 +358,2 @@\n-  \/\/    regions. Only GC will ever allocate in old regions, and then\n-  \/\/    too only during promotion\/evacuation phases. Thus there is no danger\n+  \/\/    regions walked by this code. Only GC will ever allocate in old regions,\n+  \/\/    and then too only during promotion\/evacuation phases. Thus there is no danger\n@@ -276,0 +362,2 @@\n+  \/\/    Furthermore, humongous regions (and their dirty cards) are never processed\n+  \/\/    by this code.\n@@ -280,1 +368,1 @@\n-  \/\/    during old or global collections.\n+  \/\/    during global collections during marking or update refs..\n@@ -282,1 +370,2 @@\n-  NOT_PRODUCT(obj = cast_to_oop(p);)\n+#ifdef ASSERT\n+  oop obj = cast_to_oop(p);\n@@ -284,2 +373,1 @@\n-#define WALK_FORWARD_IN_BLOCK_START false\n-  while (WALK_FORWARD_IN_BLOCK_START && p + obj->size() < left) {\n+  while (p + obj->size() < left) {\n@@ -287,0 +375,5 @@\n+    obj = cast_to_oop(p);\n+    assert(oopDesc::is_oop(obj), \"Should be an object\");\n+    assert(Klass::is_valid(obj->klass()), \"Not a valid klass ptr\");\n+    \/\/ Check assumptions in previous block comment if this assert fires\n+    fatal(\"Should never need forward walk in block start\");\n@@ -288,2 +381,3 @@\n-#undef WALK_FORWARD_IN_BLOCK_START \/\/ false\n-  assert(p + obj->size() > left, \"obj should end after left\");\n+  assert(p <= left, \"p should start at or before left end of card\");\n+  assert(p + obj->size() > left, \"obj should end after left end of card\");\n+#endif \/\/ ASSERT\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahScanRemembered.cpp","additions":118,"deletions":24,"binary":false,"changes":142,"status":"modified"},{"patch":"@@ -354,0 +354,1 @@\n+  const HeapWord* _end_of_heap;\n@@ -407,0 +408,1 @@\n+    _end_of_heap = ShenandoahHeap::heap()->end();\n@@ -653,6 +655,25 @@\n-  \/\/ Given a card_index, return the starting address of the first block in the heap\n-  \/\/ that straddles into the card. If the card is co-initial with an object, then\n-  \/\/ this would return the starting address of the heap that this card covers.\n-  \/\/ Expects to be called for a card affiliated with the old generation in\n-  \/\/ generational mode.\n-  HeapWord* block_start(size_t card_index) const;\n+  \/\/ Given a card_index, return the starting address of the first live object in the heap\n+  \/\/ that intersects with or follows this card. This must be a valid, parsable object, and must\n+  \/\/ be the first such object that intersects with this card. The object may start before,\n+  \/\/ at, or after the start of the card identified by card_index, and may end in or after the card.\n+  \/\/\n+  \/\/ The tams argument represents top for the enclosing region at the start of the most recently\n+  \/\/ initiated concurrent old marking effort.  If ctx is non-null, we use the marking context to identify\n+  \/\/ marked objects below tams.  Above tams, we know that every object is marked and that the memory is\n+  \/\/ parsable (so we can add an object's size to its address to find the next object).  If ctx is null,\n+  \/\/ we use crossing maps to find where object's start, and use object sizes to walk individual objects.\n+  \/\/ The region must be parsable if ctx is null.\n+  \/\/\n+  \/\/ The end_range_of_interest pointer argument represents an upper bound on how far we look in the forward direction\n+  \/\/ for the first object in the heap that intersects or follows this card.  If there are no live objects found at\n+  \/\/ an address less than end_range_of_interest returns nullptr.\n+  \/\/\n+  \/\/ Expects to be called for a card in a region affiliated with the old generation of the\n+  \/\/ generational heap, otherwise behavior is undefined.\n+  \/\/\n+  \/\/ If not null, ctx holds the complete marking context of the old generation. If null,\n+  \/\/ we expect that the marking context isn't available and the crossing maps are valid.\n+  \/\/ Note that crossing maps may be invalid following class unloading and before dead\n+  \/\/ or unloaded objects have been coalesced and filled.  Coalesce and fill updates the crossing maps.\n+  HeapWord* first_object_start(size_t card_index, const ShenandoahMarkingContext* const ctx,\n+                               HeapWord* tams, HeapWord* end_range_of_interest) const;\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahScanRemembered.hpp","additions":27,"deletions":6,"binary":false,"changes":33,"status":"modified"},{"patch":"@@ -53,1 +53,1 @@\n-                                                               ClosureType* cl, bool use_write_table, uint worker_id) {\n+                                                ClosureType* cl, bool use_write_table, uint worker_id) {\n@@ -105,1 +105,1 @@\n-  const HeapWord* tams = (ctx == nullptr ? region->bottom() : ctx->top_at_mark_start(region));\n+  HeapWord* const tams = (ctx == nullptr ? region->bottom() : ctx->top_at_mark_start(region));\n@@ -165,0 +165,4 @@\n+      if (end_addr <= left) {\n+        \/\/ The range of addresses to be scanned is empty\n+        continue;\n+      }\n@@ -170,5 +174,5 @@\n-      \/\/ NOTE: We'll not call block_start() repeatedly\n-      \/\/ on a very large object if its head card is dirty. If not,\n-      \/\/ (i.e. the head card is clean) we'll call it each time we\n-      \/\/ process a new dirty range on the object. This is always\n-      \/\/ the case for large object arrays, which are typically more\n+      \/\/ NOTE: We'll not call first_object_start() repeatedly\n+      \/\/ on a very large object, i.e. one spanning multiple cards,\n+      \/\/ if its head card is dirty. If not, (i.e. its head card is clean)\n+      \/\/ we'll call it each time we process a new dirty range on the object.\n+      \/\/ This is always the case for large object arrays, which are typically more\n@@ -176,1 +180,12 @@\n-      HeapWord* p = _scc->block_start(dirty_l);\n+      assert(ctx != nullptr || heap->old_generation()->is_parsable(), \"Error\");\n+      HeapWord* p = _scc->first_object_start(dirty_l, ctx, tams, right);\n+      assert((p == nullptr) || (p < right), \"No first object found is denoted by nullptr, p: \"\n+             PTR_FORMAT \", right: \" PTR_FORMAT \", end_addr: \" PTR_FORMAT \", next card addr: \" PTR_FORMAT,\n+             p2i(p), p2i(right), p2i(end_addr), p2i(_rs->addr_for_card_index(dirty_r + 1)));\n+      if (p == nullptr) {\n+        \/\/ There are no live objects to be scanned in this dirty range.  cur_index identifies first card in this\n+        \/\/ uninteresting dirty range.  At top of next loop iteration, we will either end the looop\n+        \/\/ (because cur_index < start_card_index) or we will begin the search for a range of clean cards.\n+        continue;\n+      }\n+\n@@ -178,0 +193,3 @@\n+      assert(oopDesc::is_oop(obj), \"Not an object at \" PTR_FORMAT \", left: \" PTR_FORMAT \", right: \" PTR_FORMAT,\n+             p2i(p), p2i(left), p2i(right));\n+      assert(ctx==nullptr || ctx->is_marked(obj), \"Error\");\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahScanRemembered.inline.hpp","additions":26,"deletions":8,"binary":false,"changes":34,"status":"modified"},{"patch":"@@ -220,1 +220,2 @@\n-            top_frame = frame(synthetic_sp, synthetic_sp, sender_sp, pc_desc->real_pc(sampled_nm), sampled_nm);\n+            intptr_t* const synthetic_fp = sender_sp AARCH64_ONLY( - frame::sender_sp_offset);\n+            top_frame = frame(synthetic_sp, synthetic_sp, synthetic_fp, pc_desc->real_pc(sampled_nm), sampled_nm);\n","filename":"src\/hotspot\/share\/jfr\/periodic\/sampling\/jfrThreadSampling.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -835,1 +835,0 @@\n-  AARCH64_ONLY(declare_constant(NMethodPatchingType::conc_data_patch))                 \\\n","filename":"src\/hotspot\/share\/jvmci\/vmStructs_jvmci.cpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2378,1 +2378,1 @@\n-        tty->print_cr(\"0xBADB100D   +VerifyStackAtCalls\");\n+        tty->print_cr(\"<Majik cookie>   +VerifyStackAtCalls\");\n","filename":"src\/hotspot\/share\/opto\/chaitin.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -609,0 +609,5 @@\n+          if (n->is_Mem() && n->as_Mem()->is_mismatched_access()) {\n+            DEBUG_ONLY(disq_node = n);\n+            NOT_PRODUCT(fail_eliminate = \"Mismatched access\");\n+            can_eliminate = false;\n+          }\n@@ -746,0 +751,35 @@\n+#ifdef ASSERT\n+  \/\/ Verify if a value can be written into a field.\n+  void verify_type_compatability(const Type* value_type, const Type* field_type) {\n+    BasicType value_bt = value_type->basic_type();\n+    BasicType field_bt = field_type->basic_type();\n+\n+    \/\/ Primitive types must match.\n+    if (is_java_primitive(value_bt) && value_bt == field_bt) { return; }\n+\n+    \/\/ I have been struggling to make a similar assert for non-primitive\n+    \/\/ types. I we can add one in the future. For now, I just let them\n+    \/\/ pass without checks.\n+    \/\/ In particular, I was struggling with a value that came from a call,\n+    \/\/ and had only a non-null check CastPP. There was also a checkcast\n+    \/\/ in the graph to verify the interface, but the corresponding\n+    \/\/ CheckCastPP result was not updated in the stack slot, and so\n+    \/\/ we ended up using the CastPP. That means that the field knows\n+    \/\/ that it should get an oop from an interface, but the value lost\n+    \/\/ that information, and so it is not a subtype.\n+    \/\/ There may be other issues, feel free to investigate further!\n+    if (!is_java_primitive(value_bt)) { return; }\n+\n+    tty->print_cr(\"value not compatible for field: %s vs %s\",\n+                  type2name(value_bt),\n+                  type2name(field_bt));\n+    tty->print(\"value_type: \");\n+    value_type->dump();\n+    tty->cr();\n+    tty->print(\"field_type: \");\n+    field_type->dump();\n+    tty->cr();\n+    assert(false, \"value_type does not fit field_type\");\n+  }\n+#endif\n+\n@@ -862,0 +902,1 @@\n+    DEBUG_ONLY(verify_type_compatability(field_val->bottom_type(), field_type);)\n","filename":"src\/hotspot\/share\/opto\/macro.cpp","additions":41,"deletions":0,"binary":false,"changes":41,"status":"modified"},{"patch":"@@ -198,0 +198,4 @@\n+WB_ENTRY(jlong, WB_GetMinimumJavaStackSize(JNIEnv* env, jobject o))\n+  return os::get_minimum_java_stack_size();\n+WB_END\n+\n@@ -507,0 +511,8 @@\n+WB_ENTRY(jboolean, WB_HasExternalSymbolsStripped(JNIEnv* env, jobject o))\n+#if defined(HAS_STRIPPED_DEBUGINFO)\n+  return true;\n+#else\n+  return false;\n+#endif\n+WB_END\n+\n@@ -2764,0 +2776,1 @@\n+  {CC\"hasExternalSymbolsStripped\",       CC\"()Z\",                   (void*)&WB_HasExternalSymbolsStripped},\n@@ -3044,1 +3057,2 @@\n-  {CC\"lockAndStuckInSafepoint\", CC\"()V\", (void*)&WB_TakeLockAndHangInSafepoint},\n+  {CC\"lockAndStuckInSafepoint\", CC\"()V\",              (void*)&WB_TakeLockAndHangInSafepoint},\n+  {CC\"getMinimumJavaStackSize\", CC\"()J\",              (void*)&WB_GetMinimumJavaStackSize},\n","filename":"src\/hotspot\/share\/prims\/whitebox.cpp","additions":15,"deletions":1,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -286,0 +286,2 @@\n+      #elif _MSC_VER == 1950\n+        #define HOTSPOT_BUILD_COMPILER \"MS VC++ 18.0 (VS2026)\"\n","filename":"src\/hotspot\/share\/runtime\/abstract_vm_version.cpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -42,0 +42,1 @@\n+  friend class VMStructs;\n","filename":"src\/hotspot\/share\/runtime\/continuationEntry.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -1385,0 +1385,3 @@\n+#if INCLUDE_JVMCI\n+      \/\/ big_value allows encoding double\/long value as e.g. [int = 0, long], and storing\n+      \/\/ the value in two array elements.\n@@ -1412,0 +1415,3 @@\n+#else \/\/ not INCLUDE_JVMCI\n+      obj->int_at_put(index, value->get_jint());\n+#endif \/\/ INCLUDE_JVMCI\n","filename":"src\/hotspot\/share\/runtime\/deoptimization.cpp","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2576,0 +2576,4 @@\n+jlong os::get_minimum_java_stack_size() {\n+  return static_cast<jlong>(_java_thread_min_stack_allowed);\n+}\n+\n","filename":"src\/hotspot\/share\/runtime\/os.cpp","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -400,0 +400,2 @@\n+  \/\/ get allowed minimum java stack size\n+  static jlong get_minimum_java_stack_size();\n","filename":"src\/hotspot\/share\/runtime\/os.hpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -627,0 +627,1 @@\n+  nonstatic_field(JavaThread,                  _cont_entry,                                   ContinuationEntry*)                    \\\n@@ -809,1 +810,2 @@\n-  volatile_nonstatic_field(Mutex,              _owner,                                        Thread*)\n+  volatile_nonstatic_field(Mutex,              _owner,                                        Thread*)                               \\\n+  static_field(ContinuationEntry,              _return_pc,                                    address)\n@@ -1283,0 +1285,1 @@\n+  declare_toplevel_type(ContinuationEntry)                                \\\n","filename":"src\/hotspot\/share\/runtime\/vmStructs.cpp","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -0,0 +1,146 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package com.sun.crypto.provider;\n+\n+import java.io.ByteArrayOutputStream;\n+import java.security.MessageDigest;\n+import java.security.PrivateKey;\n+import java.security.PublicKey;\n+import java.security.SecureRandom;\n+import java.security.SignatureSpi;\n+import java.security.InvalidKeyException;\n+import java.security.InvalidAlgorithmParameterException;\n+import java.security.InvalidParameterException;\n+import java.security.SignatureException;\n+import java.security.spec.AlgorithmParameterSpec;\n+import javax.crypto.Cipher;\n+import javax.crypto.BadPaddingException;\n+import javax.crypto.IllegalBlockSizeException;\n+\n+\/**\n+ * NONEwithRSA Signature implementation using the RSA\/ECB\/PKCS1Padding Cipher\n+ * implementation from SunJCE.\n+ *\/\n+public final class RSACipherAdaptor extends SignatureSpi {\n+\n+    private final RSACipher c;\n+    private ByteArrayOutputStream verifyBuf;\n+\n+    public RSACipherAdaptor() {\n+        c = new RSACipher();\n+    }\n+\n+    @Override\n+    protected void engineInitVerify(PublicKey publicKey)\n+            throws InvalidKeyException {\n+        c.engineInit(Cipher.DECRYPT_MODE, publicKey, null);\n+        if (verifyBuf == null) {\n+            verifyBuf = new ByteArrayOutputStream(128);\n+        } else {\n+            verifyBuf.reset();\n+        }\n+    }\n+\n+    @Override\n+    protected void engineInitSign(PrivateKey privateKey)\n+            throws InvalidKeyException {\n+        c.engineInit(Cipher.ENCRYPT_MODE, privateKey, null);\n+        verifyBuf = null;\n+    }\n+\n+    @Override\n+    protected void engineInitSign(PrivateKey privateKey, SecureRandom random)\n+            throws InvalidKeyException {\n+        c.engineInit(Cipher.ENCRYPT_MODE, privateKey, random);\n+        verifyBuf = null;\n+    }\n+\n+    @Override\n+    protected void engineUpdate(byte b) throws SignatureException {\n+        engineUpdate(new byte[] {b}, 0, 1);\n+    }\n+\n+    @Override\n+    protected void engineUpdate(byte[] b, int off, int len)\n+            throws SignatureException {\n+        if (verifyBuf != null) {\n+            verifyBuf.write(b, off, len);\n+        } else {\n+            byte[] out = c.engineUpdate(b, off, len);\n+            if ((out != null) && (out.length != 0)) {\n+                throw new SignatureException\n+                       (\"Cipher unexpectedly returned data\");\n+            }\n+        }\n+    }\n+\n+    @Override\n+    protected byte[] engineSign() throws SignatureException {\n+        try {\n+            return c.engineDoFinal(null, 0, 0);\n+        } catch (IllegalBlockSizeException | BadPaddingException e) {\n+           throw new SignatureException(\"doFinal() failed\", e);\n+        }\n+    }\n+\n+    @Override\n+    protected boolean engineVerify(byte[] sigBytes) throws SignatureException {\n+        try {\n+            byte[] out = c.engineDoFinal(sigBytes, 0, sigBytes.length);\n+            byte[] data = verifyBuf.toByteArray();\n+            verifyBuf.reset();\n+            return MessageDigest.isEqual(out, data);\n+        } catch (BadPaddingException e) {\n+            \/\/ e.g. wrong public key used\n+            \/\/ return false rather than throwing exception\n+            return false;\n+        } catch (IllegalBlockSizeException e) {\n+            throw new SignatureException(\"doFinal() failed\", e);\n+        }\n+    }\n+\n+    @Override\n+    protected void engineSetParameter(AlgorithmParameterSpec params)\n+            throws InvalidAlgorithmParameterException {\n+        if (params != null) {\n+            throw new InvalidParameterException(\"Parameters not supported\");\n+        }\n+    }\n+\n+    @Override\n+    @SuppressWarnings(\"deprecation\")\n+    protected void engineSetParameter(String param, Object value)\n+            throws InvalidParameterException {\n+        throw new InvalidParameterException(\"Parameters not supported\");\n+    }\n+\n+    @Override\n+    @SuppressWarnings(\"deprecation\")\n+    protected Object engineGetParameter(String param)\n+            throws InvalidParameterException {\n+        throw new InvalidParameterException(\"Parameters not supported\");\n+    }\n+}\n","filename":"src\/java.base\/share\/classes\/com\/sun\/crypto\/provider\/RSACipherAdaptor.java","additions":146,"deletions":0,"binary":false,"changes":146,"status":"added"},{"patch":"@@ -139,0 +139,6 @@\n+        attrs.put(\"SupportedKeyClasses\",\n+                \"java.security.interfaces.RSAPublicKey\" +\n+                \"|java.security.interfaces.RSAPrivateKey\");\n+        ps(\"Signature\", \"NONEwithRSA\",\n+                \"com.sun.crypto.provider.RSACipherAdaptor\", null, attrs);\n+        \/\/ continue adding cipher specific attributes\n@@ -150,3 +156,0 @@\n-        attrs.put(\"SupportedKeyClasses\",\n-                \"java.security.interfaces.RSAPublicKey\" +\n-                \"|java.security.interfaces.RSAPrivateKey\");\n","filename":"src\/java.base\/share\/classes\/com\/sun\/crypto\/provider\/SunJCE.java","additions":6,"deletions":3,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -241,1 +241,1 @@\n-     * Returns the unique {@link java.io.Console Console} object associated\n+     * Returns the unique {@link Console Console} object associated\n@@ -245,0 +245,1 @@\n+     * @see Console\n","filename":"src\/java.base\/share\/classes\/java\/lang\/System.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -40,0 +40,1 @@\n+import sun.security.util.CryptoAlgorithmConstraints;\n@@ -844,2 +845,3 @@\n-     * The JDK Reference Implementation additionally uses the\n-     * {@code jdk.security.provider.preferred}\n+     * The JDK Reference Implementation additionally uses\n+     * <ul>\n+     * <li>the {@code jdk.security.provider.preferred}\n@@ -847,1 +849,1 @@\n-     * the preferred provider order for the specified algorithm. This\n+     * the preferred provider order for the specified keystore type. This\n@@ -850,0 +852,8 @@\n+     * <\/li>\n+     * <li>the {@code jdk.crypto.disabledAlgorithms}\n+     * {@link Security#getProperty(String) Security} property to determine\n+     * if the specified keystore type is allowed. If the\n+     * {@systemProperty jdk.crypto.disabledAlgorithms} is set, it supersedes\n+     * the security property value.\n+     * <\/li>\n+     * <\/ul>\n@@ -872,0 +882,5 @@\n+\n+        if (!CryptoAlgorithmConstraints.permits(\"KEYSTORE\", type)) {\n+            throw new KeyStoreException(type + \" is disabled\");\n+        }\n+\n@@ -891,0 +906,8 @@\n+     * @implNote\n+     * The JDK Reference Implementation additionally uses\n+     * the {@code jdk.crypto.disabledAlgorithms}\n+     * {@link Security#getProperty(String) Security} property to determine\n+     * if the specified keystore type is allowed. If the\n+     * {@systemProperty jdk.crypto.disabledAlgorithms} is set, it supersedes\n+     * the security property value.\n+     *\n@@ -920,1 +943,2 @@\n-        if (provider == null || provider.isEmpty())\n+\n+        if (provider == null || provider.isEmpty()) {\n@@ -922,0 +946,6 @@\n+        }\n+\n+        if (!CryptoAlgorithmConstraints.permits(\"KEYSTORE\", type)) {\n+            throw new KeyStoreException(type + \" is disabled\");\n+        }\n+\n@@ -938,0 +968,8 @@\n+     * @implNote\n+     * The JDK Reference Implementation additionally uses\n+     * the {@code jdk.crypto.disabledAlgorithms}\n+     * {@link Security#getProperty(String) Security} property to determine\n+     * if the specified keystore type is allowed. If the\n+     * {@systemProperty jdk.crypto.disabledAlgorithms} is set, it supersedes\n+     * the security property value.\n+     *\n@@ -966,1 +1004,2 @@\n-        if (provider == null)\n+\n+        if (provider == null) {\n@@ -968,0 +1007,6 @@\n+        }\n+\n+        if (!CryptoAlgorithmConstraints.permits(\"KEYSTORE\", type)) {\n+            throw new KeyStoreException(type + \" is disabled\");\n+        }\n+\n@@ -1680,0 +1725,8 @@\n+     * @implNote\n+     * The JDK Reference Implementation additionally uses\n+     * the {@code jdk.crypto.disabledAlgorithms}\n+     * {@link Security#getProperty(String) Security} property to determine\n+     * if the specified keystore type is allowed. If the\n+     * {@systemProperty jdk.crypto.disabledAlgorithms} is set, it supersedes\n+     * the security property value. Disallowed type will be skipped.\n+     *\n@@ -1733,0 +1786,8 @@\n+     * @implNote\n+     * The JDK Reference Implementation additionally uses\n+     * the {@code jdk.crypto.disabledAlgorithms}\n+     * {@link Security#getProperty(String) Security} property to determine\n+     * if the specified keystore type is allowed. If the\n+     * {@systemProperty jdk.crypto.disabledAlgorithms} is set, it supersedes\n+     * the security property value. Disallowed type will be skipped.\n+     *\n@@ -1801,2 +1862,6 @@\n-                                keystore = new KeyStore(impl, p, s.getAlgorithm());\n-                                break;\n+                                String ksAlgo = s.getAlgorithm();\n+                                if (CryptoAlgorithmConstraints.permits(\n+                                        \"KEYSTORE\", ksAlgo)) {\n+                                    keystore = new KeyStore(impl, p, ksAlgo);\n+                                    break;\n+                                }\n","filename":"src\/java.base\/share\/classes\/java\/security\/KeyStore.java","additions":72,"deletions":7,"binary":false,"changes":79,"status":"modified"},{"patch":"@@ -36,0 +36,1 @@\n+import sun.security.util.CryptoAlgorithmConstraints;\n@@ -158,2 +159,4 @@\n-     * The JDK Reference Implementation additionally uses the\n-     * {@code jdk.security.provider.preferred}\n+     * The JDK Reference Implementation additionally uses the following\n+     * security properties:\n+     * <ul>\n+     * <li>the {@code jdk.security.provider.preferred}\n@@ -164,0 +167,8 @@\n+     * <\/li>\n+     * <li>the {@code jdk.crypto.disabledAlgorithms}\n+     * {@link Security#getProperty(String) Security} property to determine\n+     * if the specified algorithm is allowed. If the\n+     * {@systemProperty jdk.crypto.disabledAlgorithms} is set, it supersedes\n+     * the security property value.\n+     * <\/li>\n+     * <\/ul>\n@@ -187,1 +198,4 @@\n-        MessageDigest md;\n+\n+        if (!CryptoAlgorithmConstraints.permits(\"MessageDigest\", algorithm)) {\n+            throw new NoSuchAlgorithmException(algorithm + \" is disabled\");\n+        }\n@@ -191,0 +205,1 @@\n+        MessageDigest md;\n@@ -219,0 +234,8 @@\n+     * @implNote\n+     * The JDK Reference Implementation additionally uses\n+     * the {@code jdk.crypto.disabledAlgorithms}\n+     * {@link Security#getProperty(String) Security} property to determine\n+     * if the specified algorithm is allowed. If the\n+     * {@systemProperty jdk.crypto.disabledAlgorithms} is set, it supersedes\n+     * the security property value.\n+     *\n@@ -249,1 +272,2 @@\n-        if (provider == null || provider.isEmpty())\n+\n+        if (provider == null || provider.isEmpty()) {\n@@ -251,0 +275,5 @@\n+        }\n+\n+        if (!CryptoAlgorithmConstraints.permits(\"MessageDigest\", algorithm)) {\n+            throw new NoSuchAlgorithmException(algorithm + \" is disabled\");\n+        }\n@@ -252,1 +281,0 @@\n-        MessageDigest md;\n@@ -255,0 +283,1 @@\n+        MessageDigest md;\n@@ -274,0 +303,8 @@\n+     * @implNote\n+     * The JDK Reference Implementation additionally uses\n+     * the {@code jdk.crypto.disabledAlgorithms}\n+     * {@link Security#getProperty(String) Security} property to determine\n+     * if the specified algorithm is allowed. If the\n+     * {@systemProperty jdk.crypto.disabledAlgorithms} is set, it supersedes\n+     * the security property value.\n+     *\n@@ -304,1 +341,2 @@\n-        if (provider == null)\n+\n+        if (provider == null) {\n@@ -306,0 +344,6 @@\n+        }\n+\n+        if (!CryptoAlgorithmConstraints.permits(\"MessageDigest\", algorithm)) {\n+            throw new NoSuchAlgorithmException(algorithm + \" is disabled\");\n+        }\n+\n","filename":"src\/java.base\/share\/classes\/java\/security\/MessageDigest.java","additions":50,"deletions":6,"binary":false,"changes":56,"status":"modified"},{"patch":"@@ -39,4 +39,0 @@\n-import javax.crypto.Cipher;\n-import javax.crypto.IllegalBlockSizeException;\n-import javax.crypto.BadPaddingException;\n-import javax.crypto.NoSuchPaddingException;\n@@ -47,0 +43,2 @@\n+import sun.security.util.CryptoAlgorithmConstraints;\n+\n@@ -216,14 +214,0 @@\n-    \/\/ name of the special signature alg\n-    private static final String RSA_SIGNATURE = \"NONEwithRSA\";\n-\n-    \/\/ name of the equivalent cipher alg\n-    private static final String RSA_CIPHER = \"RSA\/ECB\/PKCS1Padding\";\n-\n-    \/\/ all the services we need to lookup for compatibility with Cipher\n-    private static final List<ServiceId> rsaIds = List.of(\n-        new ServiceId(\"Signature\", \"NONEwithRSA\"),\n-        new ServiceId(\"Cipher\", \"RSA\/ECB\/PKCS1Padding\"),\n-        new ServiceId(\"Cipher\", \"RSA\/ECB\"),\n-        new ServiceId(\"Cipher\", \"RSA\/\/PKCS1Padding\"),\n-        new ServiceId(\"Cipher\", \"RSA\"));\n-\n@@ -244,2 +228,4 @@\n-     * The JDK Reference Implementation additionally uses the\n-     * {@code jdk.security.provider.preferred}\n+     * The JDK Reference Implementation additionally uses the following\n+     * security properties:\n+     * <ul>\n+     * <li>the {@code jdk.security.provider.preferred}\n@@ -250,0 +236,8 @@\n+     * <\/li>\n+     * <li>the {@code jdk.crypto.disabledAlgorithms}\n+     * {@link Security#getProperty(String) Security} property to determine\n+     * if the specified algorithm is allowed. If the\n+     * {@systemProperty jdk.crypto.disabledAlgorithms} is set, it supersedes\n+     * the security property value.\n+     * <\/li>\n+     * <\/ul>\n@@ -271,5 +265,3 @@\n-        Iterator<Service> t;\n-        if (algorithm.equalsIgnoreCase(RSA_SIGNATURE)) {\n-            t = GetInstance.getServices(rsaIds);\n-        } else {\n-            t = GetInstance.getServices(\"Signature\", algorithm);\n+\n+        if (!CryptoAlgorithmConstraints.permits(\"Signature\", algorithm)) {\n+            throw new NoSuchAlgorithmException(algorithm + \" is disabled\");\n@@ -277,0 +269,2 @@\n+\n+        Iterator<Service> t = GetInstance.getServices(\"Signature\", algorithm);\n@@ -332,4 +326,0 @@\n-        if (s.getType().equals(\"Cipher\")) {\n-            \/\/ must be a CipherSpi, which we can wrap with the CipherAdapter\n-            return true;\n-        }\n@@ -373,0 +363,8 @@\n+     * @implNote\n+     * The JDK Reference Implementation additionally uses\n+     * the {@code jdk.crypto.disabledAlgorithms}\n+     * {@link Security#getProperty(String) Security} property to determine\n+     * if the specified algorithm is allowed. If the\n+     * {@systemProperty jdk.crypto.disabledAlgorithms} is set, it supersedes\n+     * the security property value.\n+     *\n@@ -401,11 +399,3 @@\n-        if (algorithm.equalsIgnoreCase(RSA_SIGNATURE)) {\n-            \/\/ exception compatibility with existing code\n-            if (provider == null || provider.isEmpty()) {\n-                throw new IllegalArgumentException(\"missing provider\");\n-            }\n-            Provider p = Security.getProvider(provider);\n-            if (p == null) {\n-                throw new NoSuchProviderException\n-                    (\"no such provider: \" + provider);\n-            }\n-            return getInstanceRSA(p);\n+\n+        if (!CryptoAlgorithmConstraints.permits(\"Signature\", algorithm)) {\n+            throw new NoSuchAlgorithmException(algorithm + \" is disabled\");\n@@ -413,0 +403,1 @@\n+\n@@ -427,0 +418,8 @@\n+     * @implNote\n+     * The JDK Reference Implementation additionally uses\n+     * the {@code jdk.crypto.disabledAlgorithms}\n+     * {@link Security#getProperty(String) Security} property to determine\n+     * if the specified algorithm is allowed. If the\n+     * {@systemProperty jdk.crypto.disabledAlgorithms} is set, it supersedes\n+     * the security property value.\n+     *\n@@ -453,6 +452,3 @@\n-        if (algorithm.equalsIgnoreCase(RSA_SIGNATURE)) {\n-            \/\/ exception compatibility with existing code\n-            if (provider == null) {\n-                throw new IllegalArgumentException(\"missing provider\");\n-            }\n-            return getInstanceRSA(provider);\n+\n+        if (!CryptoAlgorithmConstraints.permits(\"Signature\", algorithm)) {\n+            throw new NoSuchAlgorithmException(algorithm + \" is disabled\");\n@@ -460,0 +456,1 @@\n+\n@@ -465,22 +462,0 @@\n-    \/\/ return an implementation for NONEwithRSA, which is a special case\n-    \/\/ because of the Cipher.RSA\/ECB\/PKCS1Padding compatibility wrapper\n-    private static Signature getInstanceRSA(Provider p)\n-            throws NoSuchAlgorithmException {\n-        \/\/ try Signature first\n-        Service s = p.getService(\"Signature\", RSA_SIGNATURE);\n-        if (s != null) {\n-            Instance instance = GetInstance.getInstance(s, SignatureSpi.class);\n-            return getInstance(instance, RSA_SIGNATURE);\n-        }\n-        \/\/ check Cipher\n-        try {\n-            Cipher c = Cipher.getInstance(RSA_CIPHER, p);\n-            return Delegate.of(new CipherAdapter(c), RSA_SIGNATURE);\n-        } catch (GeneralSecurityException e) {\n-            \/\/ throw Signature style exception message to avoid confusion,\n-            \/\/ but append Cipher exception as cause\n-            throw new NoSuchAlgorithmException(\"no such algorithm: \"\n-                + RSA_SIGNATURE + \" for provider \" + p.getName(), e);\n-        }\n-    }\n-\n@@ -1182,15 +1157,4 @@\n-            if (s.getType().equals(\"Cipher\")) {\n-                \/\/ must be NONEwithRSA\n-                try {\n-                    Cipher c = Cipher.getInstance(RSA_CIPHER, s.getProvider());\n-                    return new CipherAdapter(c);\n-                } catch (NoSuchPaddingException e) {\n-                    throw new NoSuchAlgorithmException(e);\n-                }\n-            } else {\n-                Object o = s.newInstance(null);\n-                if (!(o instanceof SignatureSpi)) {\n-                    throw new NoSuchAlgorithmException\n-                        (\"Not a SignatureSpi: \" + o.getClass().getName());\n-                }\n-                return (SignatureSpi)o;\n+            Object o = s.newInstance(null);\n+            if (!(o instanceof SignatureSpi)) {\n+                throw new NoSuchAlgorithmException\n+                    (\"Not a SignatureSpi: \" + o.getClass().getName());\n@@ -1198,0 +1162,1 @@\n+            return (SignatureSpi)o;\n@@ -1474,88 +1439,0 @@\n-\n-    \/\/ adapter for RSA\/ECB\/PKCS1Padding ciphers\n-    @SuppressWarnings(\"deprecation\")\n-    private static class CipherAdapter extends SignatureSpi {\n-\n-        private final Cipher cipher;\n-\n-        private ByteArrayOutputStream data;\n-\n-        CipherAdapter(Cipher cipher) {\n-            this.cipher = cipher;\n-        }\n-\n-        protected void engineInitVerify(PublicKey publicKey)\n-                throws InvalidKeyException {\n-            cipher.init(Cipher.DECRYPT_MODE, publicKey);\n-            if (data == null) {\n-                data = new ByteArrayOutputStream(128);\n-            } else {\n-                data.reset();\n-            }\n-        }\n-\n-        protected void engineInitSign(PrivateKey privateKey)\n-                throws InvalidKeyException {\n-            cipher.init(Cipher.ENCRYPT_MODE, privateKey);\n-            data = null;\n-        }\n-\n-        protected void engineInitSign(PrivateKey privateKey,\n-                SecureRandom random) throws InvalidKeyException {\n-            cipher.init(Cipher.ENCRYPT_MODE, privateKey, random);\n-            data = null;\n-        }\n-\n-        protected void engineUpdate(byte b) throws SignatureException {\n-            engineUpdate(new byte[] {b}, 0, 1);\n-        }\n-\n-        protected void engineUpdate(byte[] b, int off, int len)\n-                throws SignatureException {\n-            if (data != null) {\n-                data.write(b, off, len);\n-                return;\n-            }\n-            byte[] out = cipher.update(b, off, len);\n-            if ((out != null) && (out.length != 0)) {\n-                throw new SignatureException\n-                    (\"Cipher unexpectedly returned data\");\n-            }\n-        }\n-\n-        protected byte[] engineSign() throws SignatureException {\n-            try {\n-                return cipher.doFinal();\n-            } catch (IllegalBlockSizeException | BadPaddingException e) {\n-                throw new SignatureException(\"doFinal() failed\", e);\n-            }\n-        }\n-\n-        protected boolean engineVerify(byte[] sigBytes)\n-                throws SignatureException {\n-            try {\n-                byte[] out = cipher.doFinal(sigBytes);\n-                byte[] dataBytes = data.toByteArray();\n-                data.reset();\n-                return MessageDigest.isEqual(out, dataBytes);\n-            } catch (BadPaddingException e) {\n-                \/\/ e.g. wrong public key used\n-                \/\/ return false rather than throwing exception\n-                return false;\n-            } catch (IllegalBlockSizeException e) {\n-                throw new SignatureException(\"doFinal() failed\", e);\n-            }\n-        }\n-\n-        protected void engineSetParameter(String param, Object value)\n-                throws InvalidParameterException {\n-            throw new InvalidParameterException(\"Parameters not supported\");\n-        }\n-\n-        protected Object engineGetParameter(String param)\n-                throws InvalidParameterException {\n-            throw new InvalidParameterException(\"Parameters not supported\");\n-        }\n-\n-    }\n-\n","filename":"src\/java.base\/share\/classes\/java\/security\/Signature.java","additions":48,"deletions":171,"binary":false,"changes":219,"status":"modified"},{"patch":"@@ -364,0 +364,5 @@\n+        \/\/ Eliminate trailing zeros.\n+        while (count > 1 && digits[count - 1] == '0') {\n+            --count;\n+        }\n+\n@@ -390,5 +395,0 @@\n-        \/\/ Eliminate trailing zeros.\n-        while (count > 1 && digits[count - 1] == '0') {\n-            --count;\n-        }\n-\n","filename":"src\/java.base\/share\/classes\/java\/text\/DigitList.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -363,3 +363,12 @@\n-                if (t != null) {       \/\/ sift down\n-                    for (int cs; (cs = (k << 2) + 1) < n; ) {\n-                        ScheduledForkJoinTask<?> leastChild = null, c;\n+                if (t != null) {\n+                    while (k > 0) {    \/\/ sift up if replaced with smaller value\n+                        ScheduledForkJoinTask<?> parent; int pk;\n+                        if ((parent = h[pk = (k - 1) >>> 2]) == null ||\n+                            parent.when <= d)\n+                            break;\n+                        parent.heapIndex = k;\n+                        h[k] = parent;\n+                        k = pk;\n+                    }\n+                    for (int cs; (cs = (k << 2) + 1) < n; ) { \/\/ sift down\n+                        ScheduledForkJoinTask<?> leastChild = null;\n@@ -367,10 +376,4 @@\n-                        long leastValue = Long.MAX_VALUE;\n-                        for (int ck = cs, j = 4;;) { \/\/ at most 4 children\n-                            if ((c = h[ck]) == null)\n-                                break;\n-                            long cd = c.when;\n-                            if (c.status < 0 && alsoReplace < 0) {\n-                                alsoReplace = ck;    \/\/ at most once per pass\n-                                c.heapIndex = -1;\n-                            }\n-                            else if (leastChild == null || cd < leastValue) {\n+                        long leastValue = d;    \/\/ at most 4 children\n+                        for (int ck, j = 0; j < 4 && (ck = j + cs) < n; ++j) {\n+                            ScheduledForkJoinTask<?> c; long cd;\n+                            if ((c = h[ck]) != null && (cd = c.when) < leastValue) {\n@@ -381,2 +384,0 @@\n-                            if (--j == 0 || ++ck >= n)\n-                                break;\n@@ -384,1 +385,1 @@\n-                        if (leastChild == null || d <= leastValue)\n+                        if (leastChild == null) \/\/ already ordered\n@@ -386,2 +387,6 @@\n-                        leastChild.heapIndex = k;\n-                        h[k] = leastChild;\n+                        if ((h[k] = leastChild).status >= 0 || alsoReplace >= 0)\n+                            leastChild.heapIndex = k;\n+                        else {\n+                            leastChild.heapIndex = -1;\n+                            alsoReplace = k;\n+                        }\n@@ -396,0 +401,1 @@\n+        assert checkHeap(h, n);\n@@ -454,0 +460,27 @@\n+    \/**\n+     * Invariant checks\n+     *\/\n+    private static boolean checkHeap(ScheduledForkJoinTask<?>[] h, int n) {\n+        for (int i = 0; i < h.length; ++i) {\n+            ScheduledForkJoinTask<?> t = h[i];\n+            if (t == null) {         \/\/ unused slots all null\n+                if (i < n)\n+                    return false;\n+            }\n+            else {\n+                long v = t.when;\n+                int x = t.heapIndex;\n+                if (x != i && x >= 0) \/\/ valid index unless removing\n+                    return false;\n+                if (i > 0 && h[(i - 1) >>> 2].when > v) \/\/ ordered wrt parent\n+                    return false;\n+                int cs = (i << 2) + 1; \/\/ ordered wrt children\n+                for (int ck, j = 0; j < 4 && (ck = cs + j) < n; ++j) {\n+                    if (h[ck].when < v)\n+                        return false;\n+                }\n+            }\n+        }\n+        return true;\n+    }\n+\n","filename":"src\/java.base\/share\/classes\/java\/util\/concurrent\/DelayScheduler.java","additions":51,"deletions":18,"binary":false,"changes":69,"status":"modified"},{"patch":"@@ -534,1 +534,7 @@\n-     * @param asExecutionException true if wrap as ExecutionException\n+     * @param asExecutionException true if wrap the result as an\n+     * ExecutionException. This applies only to actual exceptions, not\n+     * implicit CancellationExceptions issued when not THROWN or\n+     * available, which are not wrapped because by default they are\n+     * issued separately from ExecutionExceptions by callers. Which\n+     * may require further handling when this is not true (currently\n+     * only in InvokeAnyTask).\n@@ -541,6 +547,3 @@\n-        else if ((s & THROWN) == 0 || (a = aux) == null || (ex = a.ex) == null) {\n-            ex = new CancellationException();\n-            if (!asExecutionException || !(this instanceof InterruptibleTask))\n-                return ex;         \/\/ else wrap below\n-        }\n-        else if (a.thread != Thread.currentThread()) {\n+        if ((s & THROWN) == 0 || (a = aux) == null || (ex = a.ex) == null)\n+            return new CancellationException();\n+        if (a.thread != Thread.currentThread()) {\n@@ -1817,0 +1820,2 @@\n+            } catch (CancellationException ce) {\n+                throw new ExecutionException(ce);\n","filename":"src\/java.base\/share\/classes\/java\/util\/concurrent\/ForkJoinTask.java","additions":12,"deletions":7,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -270,4 +270,2 @@\n-            if (ClassLoader.getSystemClassLoader() != cl) {\n-                resetCCL = true;\n-                super.setContextClassLoader(cl);\n-            }\n+            resetCCL = ClassLoader.getSystemClassLoader() != cl;\n+            super.setContextClassLoader(cl);\n","filename":"src\/java.base\/share\/classes\/java\/util\/concurrent\/ForkJoinWorkerThread.java","additions":2,"deletions":4,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -33,1 +33,0 @@\n-\n@@ -49,0 +48,1 @@\n+import sun.security.util.CryptoAlgorithmConstraints;\n@@ -319,0 +319,4 @@\n+    \/\/ Parse the specified cipher transformation for algorithm and the\n+    \/\/ optional mode and padding. If the transformation contains only\n+    \/\/ algorithm, then only algorithm is returned. Otherwise, the\n+    \/\/ transformation must contain all 3 and they must be non-empty.\n@@ -324,0 +328,1 @@\n+\n@@ -325,1 +330,1 @@\n-         * array containing the components of a cipher transformation:\n+         * Components of a cipher transformation:\n@@ -327,3 +332,3 @@\n-         * index 0: algorithm component (e.g., AES)\n-         * index 1: feedback component (e.g., CFB)\n-         * index 2: padding component (e.g., PKCS5Padding)\n+         * 1) algorithm component (e.g., AES)\n+         * 2) feedback component (e.g., CFB) - optional\n+         * 3) padding component (e.g., PKCS5Padding) - optional\n@@ -331,1 +336,0 @@\n-        String[] parts = { \"\", \"\", \"\" };\n@@ -340,3 +344,11 @@\n-        if (endIdx == -1) {\n-            \/\/ algorithm\n-            parts[0] = transformation.trim();\n+\n+        boolean algorithmOnly = (endIdx == -1);\n+        String algo = (algorithmOnly ? transformation.trim() :\n+                transformation.substring(0, endIdx).trim());\n+        if (algo.isEmpty()) {\n+            throw new NoSuchAlgorithmException(\"Invalid transformation: \" +\n+                                   \"algorithm not specified-\"\n+                                   + transformation);\n+        }\n+        if (algorithmOnly) { \/\/ done\n+            return new String[] { algo };\n@@ -344,2 +356,1 @@\n-            \/\/ algorithm\/mode\/padding\n-            parts[0] = transformation.substring(0, endIdx).trim();\n+            \/\/ continue parsing mode and padding\n@@ -352,6 +363,6 @@\n-            parts[1] = transformation.substring(startIdx, endIdx).trim();\n-            parts[2] = transformation.substring(endIdx+1).trim();\n-        }\n-        if (parts[0].isEmpty()) {\n-            throw new NoSuchAlgorithmException(\"Invalid transformation: \" +\n-                                   \"algorithm not specified-\"\n+            String mode = transformation.substring(startIdx, endIdx).trim();\n+            String padding = transformation.substring(endIdx+1).trim();\n+            \/\/ ensure mode and padding are specified\n+            if (mode.isEmpty() || padding.isEmpty()) {\n+                throw new NoSuchAlgorithmException(\"Invalid transformation: \" +\n+                                   \"missing mode and\/or padding-\"\n@@ -359,0 +370,2 @@\n+            }\n+            return new String[] { algo, mode, padding };\n@@ -360,1 +373,0 @@\n-        return parts;\n@@ -456,5 +468,1 @@\n-        String alg = parts[0];\n-        String mode = parts[1];\n-        String pad = parts[2];\n-\n-        if ((mode.length() == 0) && (pad.length() == 0)) {\n+        if (parts.length == 1) {\n@@ -462,2 +470,1 @@\n-            Transform tr = new Transform(alg, \"\", null, null);\n-            return Collections.singletonList(tr);\n+            return List.of(new Transform(parts[0], \"\", null, null));\n@@ -465,7 +472,7 @@\n-            \/\/ Algorithm w\/ at least mode or padding or both\n-            List<Transform> list = new ArrayList<>(4);\n-            list.add(new Transform(alg, \"\/\" + mode + \"\/\" + pad, null, null));\n-            list.add(new Transform(alg, \"\/\" + mode, null, pad));\n-            list.add(new Transform(alg, \"\/\/\" + pad, mode, null));\n-            list.add(new Transform(alg, \"\", mode, pad));\n-            return list;\n+            \/\/ Algorithm w\/ both mode and padding\n+            return List.of(\n+                    new Transform(parts[0], \"\/\" + parts[1] + \"\/\" + parts[2],\n+                    null, null),\n+                    new Transform(parts[0], \"\/\" + parts[1], null, parts[2]),\n+                    new Transform(parts[0], \"\/\/\" + parts[2], parts[1], null),\n+                    new Transform(parts[0], \"\", parts[1], parts[2]));\n@@ -507,2 +514,4 @@\n-     * The JDK Reference Implementation additionally uses the\n-     * {@code jdk.security.provider.preferred}\n+     * The JDK Reference Implementation additionally uses the following\n+     * security properties:\n+     * <ul>\n+     * <li>the {@code jdk.security.provider.preferred}\n@@ -516,0 +525,8 @@\n+     * <\/li>\n+     * <li>the {@code jdk.crypto.disabledAlgorithms}\n+     * {@link Security#getProperty(String) Security} property to determine\n+     * if the specified algorithm is allowed. If the\n+     * {@systemProperty jdk.crypto.disabledAlgorithms} is set, it supersedes\n+     * the security property value.\n+     * <\/li>\n+     * <\/ul>\n@@ -544,0 +561,7 @@\n+\n+        \/\/ throws NoSuchAlgorithmException if java.security disables it\n+        if (!CryptoAlgorithmConstraints.permits(\"Cipher\", transformation)) {\n+            throw new NoSuchAlgorithmException(transformation +\n+                    \" is disabled\");\n+        }\n+\n@@ -607,0 +631,8 @@\n+     * @implNote\n+     * The JDK Reference Implementation additionally uses\n+     * the {@code jdk.crypto.disabledAlgorithms}\n+     * {@link Security#getProperty(String) Security} property to determine\n+     * if the specified algorithm is allowed. If the\n+     * {@systemProperty jdk.crypto.disabledAlgorithms} is set, it supersedes\n+     * the security property value.\n+     *\n@@ -680,0 +712,8 @@\n+     * @implNote\n+     * The JDK Reference Implementation additionally uses\n+     * the {@code jdk.crypto.disabledAlgorithms}\n+     * {@link Security#getProperty(String) Security} property to determine\n+     * if the specified algorithm is allowed. If the\n+     * {@systemProperty jdk.crypto.disabledAlgorithms} is set, it supersedes\n+     * the security property value.\n+     *\n@@ -717,0 +757,7 @@\n+\n+        \/\/ throws NoSuchAlgorithmException if java.security disables it\n+        if (!CryptoAlgorithmConstraints.permits(\"Cipher\", transformation)) {\n+            throw new NoSuchAlgorithmException(transformation +\n+                    \" is disabled\");\n+        }\n+\n","filename":"src\/java.base\/share\/classes\/javax\/crypto\/Cipher.java","additions":81,"deletions":34,"binary":false,"changes":115,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -49,1 +49,10 @@\n-        String property = Security.getProperty(propertyName);\n+        return getAlgorithms(propertyName, false);\n+    }\n+\n+    \/\/ Get algorithm constraints from the specified security property or\n+    \/\/ system property if allowSystemOverride == true.\n+    static Set<String> getAlgorithms(String propertyName,\n+            boolean allowSystemOverride) {\n+        String property = allowSystemOverride ?\n+                SecurityProperties.getOverridableProperty(propertyName) :\n+                Security.getProperty(propertyName);\n@@ -68,1 +77,2 @@\n-        Set<String> algorithmsInPropertySet = new TreeSet<>(String.CASE_INSENSITIVE_ORDER);\n+        Set<String> algorithmsInPropertySet =\n+                new TreeSet<>(String.CASE_INSENSITIVE_ORDER);\n@@ -83,2 +93,3 @@\n-        \/\/ decompose the algorithm into sub-elements\n-        Set<String> elements = decomposer.decompose(algorithm);\n+        if (decomposer != null) {\n+            \/\/ decompose the algorithm into sub-elements\n+            Set<String> elements = decomposer.decompose(algorithm);\n@@ -86,4 +97,5 @@\n-        \/\/ check the element of the elements\n-        for (String element : elements) {\n-            if (algorithms.contains(element)) {\n-                return false;\n+            \/\/ check the element of the elements\n+            for (String element : elements) {\n+                if (algorithms.contains(element)) {\n+                    return false;\n+                }\n@@ -92,1 +104,0 @@\n-\n@@ -95,1 +106,0 @@\n-\n","filename":"src\/java.base\/share\/classes\/sun\/security\/util\/AbstractAlgorithmConstraints.java","additions":21,"deletions":11,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -0,0 +1,152 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package sun.security.util;\n+\n+import java.lang.ref.SoftReference;\n+import java.security.AlgorithmParameters;\n+import java.security.CryptoPrimitive;\n+import java.security.Key;\n+import java.util.Arrays;\n+import java.util.Map;\n+import java.util.Set;\n+import java.util.concurrent.ConcurrentHashMap;\n+\n+\/**\n+ * This class implements the algorithm constraints for the\n+ * \"jdk.crypto.disabledAlgorithms\" security property. This security property\n+ * can be overridden by the system property of the same name. See the\n+ * java.security file for the syntax of the property value.\n+ *\/\n+public class CryptoAlgorithmConstraints extends AbstractAlgorithmConstraints {\n+    private static final Debug debug = Debug.getInstance(\"jca\");\n+\n+    \/\/ for validating the service\n+    private static final Set<String> SUPPORTED_SERVICES =\n+            Set.of(\"Cipher\", \"KeyStore\", \"MessageDigest\", \"Signature\");\n+\n+    \/\/ Disabled algorithm security property for JCE crypto services\n+    private static final String PROPERTY_CRYPTO_DISABLED_ALGS =\n+            \"jdk.crypto.disabledAlgorithms\";\n+\n+    private static class CryptoHolder {\n+        static final CryptoAlgorithmConstraints CONSTRAINTS =\n+                new CryptoAlgorithmConstraints(PROPERTY_CRYPTO_DISABLED_ALGS);\n+    }\n+\n+    private static void debug(String msg) {\n+        if (debug != null) {\n+            debug.println(\"CryptoAlgoConstraints: \", msg);\n+        }\n+    }\n+\n+    public static boolean permits(String service, String algo) {\n+        return CryptoHolder.CONSTRAINTS.cachedCheckAlgorithm(\n+                service + \".\" + algo);\n+    }\n+\n+    private final Set<String> disabledServices; \/\/ syntax is <service>.<algo>\n+    private volatile SoftReference<Map<String, Boolean>> cacheRef =\n+            new SoftReference<>(null);\n+\n+    \/**\n+     * Initialize algorithm constraints with the specified security property\n+     * {@code propertyName}. Note that if a system property of the same name\n+     * is set, it overrides the security property.\n+     *\n+     * @param propertyName the security property name that define the disabled\n+     *        algorithm constraints\n+     *\/\n+    CryptoAlgorithmConstraints(String propertyName) {\n+        super(null);\n+        disabledServices = getAlgorithms(propertyName, true);\n+        debug(\"Before \" + Arrays.deepToString(disabledServices.toArray()));\n+        for (String dk : disabledServices) {\n+            int idx = dk.indexOf(\".\");\n+            if (idx < 1 || idx == dk.length() - 1) {\n+                \/\/ wrong syntax: missing \".\" or empty service or algorithm\n+                throw new IllegalArgumentException(\"Invalid entry: \" + dk);\n+            }\n+            String service = dk.substring(0, idx);\n+            String algo = dk.substring(idx + 1);\n+            if (SUPPORTED_SERVICES.stream().anyMatch(e -> e.equalsIgnoreCase\n+                    (service))) {\n+                KnownOIDs oid = KnownOIDs.findMatch(algo);\n+                if (oid != null) {\n+                    debug(\"Add oid: \" + oid.value());\n+                    disabledServices.add(service + \".\" + oid.value());\n+                    debug(\"Add oid stdName: \" + oid.stdName());\n+                    disabledServices.add(service + \".\" + oid.stdName());\n+                    for (String a : oid.aliases()) {\n+                        debug(\"Add oid alias: \" + a);\n+                        disabledServices.add(service + \".\" + a);\n+                    }\n+                }\n+            } else {\n+                \/\/ unsupported service\n+                throw new IllegalArgumentException(\"Invalid entry: \" + dk);\n+            }\n+        }\n+        debug(\"After \" + Arrays.deepToString(disabledServices.toArray()));\n+    }\n+\n+    @Override\n+    public final boolean permits(Set<CryptoPrimitive> notUsed1,\n+            String serviceDesc, AlgorithmParameters notUsed2) {\n+        throw new UnsupportedOperationException(\"Unsupported permits() method\");\n+    }\n+\n+    @Override\n+    public final boolean permits(Set<CryptoPrimitive> primitives, Key key) {\n+        throw new UnsupportedOperationException(\"Unsupported permits() method\");\n+    }\n+\n+    @Override\n+    public final boolean permits(Set<CryptoPrimitive> primitives,\n+            String algorithm, Key key, AlgorithmParameters parameters) {\n+        throw new UnsupportedOperationException(\"Unsupported permits() method\");\n+    }\n+\n+    \/\/ Return false if algorithm is found in the disabledServices Set.\n+    \/\/ Otherwise, return true.\n+    private boolean cachedCheckAlgorithm(String serviceDesc) {\n+        Map<String, Boolean> cache;\n+        if ((cache = cacheRef.get()) == null) {\n+            synchronized (this) {\n+                if ((cache = cacheRef.get()) == null) {\n+                    cache = new ConcurrentHashMap<>();\n+                    cacheRef = new SoftReference<>(cache);\n+                }\n+            }\n+        }\n+        Boolean result = cache.get(serviceDesc);\n+        if (result != null) {\n+            return result;\n+        }\n+        result = checkAlgorithm(disabledServices, serviceDesc, null);\n+        cache.put(serviceDesc, result);\n+        return result;\n+    }\n+}\n","filename":"src\/java.base\/share\/classes\/sun\/security\/util\/CryptoAlgorithmConstraints.java","additions":152,"deletions":0,"binary":false,"changes":152,"status":"added"},{"patch":"@@ -187,1 +187,1 @@\n-    RSA(\"1.2.840.113549.1.1.1\"), \/\/ RSA encryption\n+    RSA(\"1.2.840.113549.1.1.1\", \"RSA\", \"RSA\/ECB\/PKCS1Padding\"), \/\/ RSA encryption\n","filename":"src\/java.base\/share\/classes\/sun\/security\/util\/KnownOIDs.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -774,0 +774,48 @@\n+#\n+# Algorithm restrictions for Java Crypto API services\n+#\n+# In some environments, certain algorithms may be undesirable for certain\n+# cryptographic services. For example, \"MD2\" is generally no longer considered\n+# to be a secure hash algorithm.  This section describes the mechanism for\n+# disabling algorithms at the JCA\/JCE level based on service name and algorithm\n+# name.\n+#\n+# If a system property of the same name is also specified, it supersedes the\n+# security property value defined here.\n+#\n+# The syntax of the disabled services string is described as follows:\n+#       \"DisabledService {, DisabledService}\"\n+#\n+#   DisabledService:\n+#       Service.AlgorithmName\n+#\n+# Service:  (one of the following, more services may be added later)\n+#     Cipher | KeyStore | MessageDigest | Signature\n+#\n+#   AlgorithmName:\n+#       (see below)\n+#\n+# The \"AlgorithmName\" is the standard algorithm name of the disabled\n+# service. See the Java Security Standard Algorithm Names Specification\n+# for information about Standard Algorithm Names.  Matching is\n+# performed using a case-insensitive exact matching rule. For Cipher service,\n+# its algorithm is the transformation string.\n+#\n+# Note: If the property value contains entries with invalid syntax or\n+# unsupported services at the time of checking, an ExceptionInInitializerError\n+# with a cause of IllegalArgumentException will be thrown.\n+#\n+# Note: The restriction is applied in the various getInstance(...) methods\n+# of the supported Service classes, i.e. Cipher, KeyStore, MessageDigest,\n+# and Signature. If the algorithm is disabled, a NoSuchAlgorithmException will\n+# be thrown by the getInstance methods of Cipher, MessageDigest, and Signature\n+# and a KeyStoreException by the getInstance methods of KeyStore.\n+#\n+# Note: This property is currently used by the JDK Reference implementation.\n+# It is not guaranteed to be examined and used by other implementations.\n+#\n+# Example:\n+#   jdk.crypto.disabledAlgorithms=Cipher.RSA\/ECB\/PKCS1Padding, MessageDigest.MD2\n+#\n+#jdk.crypto.disabledAlgorithms=\n+\n","filename":"src\/java.base\/share\/conf\/security\/java.security","additions":48,"deletions":0,"binary":false,"changes":48,"status":"modified"},{"patch":"@@ -391,2 +391,6 @@\n-        sysinfo(SI_ISALIST, list, sizeof(list));\n-        sprops.cpu_isalist = strdup(list);\n+        int ret = sysinfo(SI_ISALIST, list, sizeof(list));\n+        if (ret == 0) {\n+            sprops.cpu_isalist = strdup(list);\n+        } else {\n+            sprops.cpu_isalist = NULL;\n+        }\n","filename":"src\/java.base\/unix\/native\/libjava\/java_props_md.c","additions":6,"deletions":2,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -422,11 +422,0 @@\n-         * Windows 95                   4               0\n-         * Windows 98                   4               10\n-         * Windows ME                   4               90\n-         * Windows 3.51                 3               51\n-         * Windows NT 4.0               4               0\n-         * Windows 2000                 5               0\n-         * Windows XP 32 bit            5               1\n-         * Windows Server 2003 family   5               2\n-         * Windows XP 64 bit            5               2\n-         *       where ((&ver.wServicePackMinor) + 2) = 1\n-         *       and  si.wProcessorArchitecture = 9\n@@ -455,12 +444,0 @@\n-        case VER_PLATFORM_WIN32_WINDOWS:\n-           if (majorVersion == 4) {\n-                switch (minorVersion) {\n-                case  0: sprops.os_name = \"Windows 95\";           break;\n-                case 10: sprops.os_name = \"Windows 98\";           break;\n-                case 90: sprops.os_name = \"Windows Me\";           break;\n-                default: sprops.os_name = \"Windows 9X (unknown)\"; break;\n-                }\n-            } else {\n-                sprops.os_name = \"Windows 9X (unknown)\";\n-            }\n-            break;\n@@ -468,27 +445,1 @@\n-            if (majorVersion <= 4) {\n-                sprops.os_name = \"Windows NT\";\n-            } else if (majorVersion == 5) {\n-                switch (minorVersion) {\n-                case  0: sprops.os_name = \"Windows 2000\";         break;\n-                case  1: sprops.os_name = \"Windows XP\";           break;\n-                case  2:\n-                   \/*\n-                    * From MSDN OSVERSIONINFOEX and SYSTEM_INFO documentation:\n-                    *\n-                    * \"Because the version numbers for Windows Server 2003\n-                    * and Windows XP 6u4 bit are identical, you must also test\n-                    * whether the wProductType member is VER_NT_WORKSTATION.\n-                    * and si.wProcessorArchitecture is\n-                    * PROCESSOR_ARCHITECTURE_AMD64 (which is 9)\n-                    * If it is, the operating system is Windows XP 64 bit;\n-                    * otherwise, it is Windows Server 2003.\"\n-                    *\/\n-                    if (is_workstation && is_64bit) {\n-                        sprops.os_name = \"Windows XP\"; \/* 64 bit *\/\n-                    } else {\n-                        sprops.os_name = \"Windows 2003\";\n-                    }\n-                    break;\n-                default: sprops.os_name = \"Windows NT (unknown)\"; break;\n-                }\n-            } else if (majorVersion == 6) {\n+            if (majorVersion == 6) {\n@@ -500,2 +451,0 @@\n-                    case  0: sprops.os_name = \"Windows Vista\";        break;\n-                    case  1: sprops.os_name = \"Windows 7\";            break;\n@@ -508,2 +457,0 @@\n-                    case  0: sprops.os_name = \"Windows Server 2008\";    break;\n-                    case  1: sprops.os_name = \"Windows Server 2008 R2\"; break;\n","filename":"src\/java.base\/windows\/native\/libjava\/java_props_md.c","additions":1,"deletions":54,"binary":false,"changes":55,"status":"modified"},{"patch":"@@ -63,9 +63,3 @@\n-    \/\/ Workaround for apple bug FB13261205, since it only affects arm based macs\n-    \/\/ and arm support started with macOS 11 ignore the workaround for previous versions\n-    if (@available(macOS 11, *)) {\n-        if (architecture == -1) {\n-            architecture = [[NSRunningApplication currentApplication] executableArchitecture];\n-        }\n-        if (architecture == NSBundleExecutableArchitectureARM64) {\n-            return (CGDisplayModeGetPixelWidth(mode) >= 800);\n-        }\n+    \/\/ Workaround for apple bug FB13261205, only affects arm based macs\n+    if (architecture == -1) {\n+        architecture = [[NSRunningApplication currentApplication] executableArchitecture];\n@@ -73,0 +67,4 @@\n+    if (architecture == NSBundleExecutableArchitectureARM64) {\n+        return (CGDisplayModeGetPixelWidth(mode) >= 800);\n+    }\n+\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/CGraphicsDevice.m","additions":7,"deletions":9,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2006, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -76,0 +76,1 @@\n+    @Override\n@@ -90,0 +91,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/beans\/WildcardTypeImpl.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2013, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -64,0 +64,1 @@\n+    @Override\n@@ -73,0 +74,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/beans\/decoder\/NullElementHandler.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -75,0 +75,1 @@\n+    @Override\n@@ -85,0 +86,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/beans\/decoder\/ValueObjectImpl.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2006, 2012, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2006, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,0 +37,1 @@\n+    @Override\n@@ -44,0 +45,1 @@\n+    @Override\n@@ -51,0 +53,1 @@\n+    @Override\n@@ -63,0 +66,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/beans\/editors\/BooleanEditor.java","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1996, 2012, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1996, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,0 +37,1 @@\n+    @Override\n@@ -44,0 +45,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/beans\/editors\/ByteEditor.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1996, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1996, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -82,0 +82,1 @@\n+    @Override\n@@ -87,0 +88,1 @@\n+    @Override\n@@ -92,0 +94,1 @@\n+    @Override\n@@ -104,0 +107,1 @@\n+    @Override\n@@ -127,0 +131,1 @@\n+    @Override\n@@ -135,0 +140,1 @@\n+    @Override\n@@ -168,0 +174,1 @@\n+    @Override\n@@ -172,0 +179,1 @@\n+    @Override\n@@ -176,0 +184,1 @@\n+    @Override\n@@ -185,0 +194,1 @@\n+    @Override\n@@ -191,0 +201,1 @@\n+    @Override\n@@ -195,0 +206,1 @@\n+    @Override\n@@ -199,0 +211,1 @@\n+    @Override\n@@ -203,0 +216,1 @@\n+    @Override\n@@ -207,0 +221,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/beans\/editors\/ColorEditor.java","additions":16,"deletions":1,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1996, 2012, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1996, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,0 +37,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/beans\/editors\/DoubleEditor.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2006, 2014, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2006, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -66,0 +66,1 @@\n+    @Override\n@@ -70,0 +71,1 @@\n+    @Override\n@@ -95,0 +97,1 @@\n+    @Override\n@@ -101,0 +104,1 @@\n+    @Override\n@@ -109,0 +113,1 @@\n+    @Override\n@@ -113,0 +118,1 @@\n+    @Override\n@@ -120,0 +126,1 @@\n+    @Override\n@@ -124,0 +131,1 @@\n+    @Override\n@@ -127,0 +135,1 @@\n+    @Override\n@@ -131,0 +140,1 @@\n+    @Override\n@@ -135,0 +145,1 @@\n+    @Override\n@@ -141,0 +152,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/beans\/editors\/EnumEditor.java","additions":13,"deletions":1,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1996, 2012, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1996, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,0 +37,1 @@\n+    @Override\n@@ -44,0 +45,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/beans\/editors\/FloatEditor.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1996, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1996, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -81,0 +81,1 @@\n+    @Override\n@@ -86,0 +87,1 @@\n+    @Override\n@@ -133,0 +135,1 @@\n+    @Override\n@@ -137,0 +140,1 @@\n+    @Override\n@@ -145,0 +149,1 @@\n+    @Override\n@@ -161,0 +166,1 @@\n+    @Override\n@@ -165,0 +171,1 @@\n+    @Override\n@@ -175,0 +182,1 @@\n+    @Override\n@@ -198,0 +206,1 @@\n+    @Override\n@@ -202,0 +211,1 @@\n+    @Override\n@@ -206,0 +216,1 @@\n+    @Override\n@@ -210,0 +221,1 @@\n+    @Override\n@@ -214,0 +226,1 @@\n+    @Override\n@@ -218,0 +231,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/beans\/editors\/FontEditor.java","additions":15,"deletions":1,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2006, 2012, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2006, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -38,0 +38,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/beans\/editors\/IntegerEditor.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1996, 2012, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1996, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,0 +37,1 @@\n+    @Override\n@@ -44,0 +45,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/beans\/editors\/LongEditor.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1996, 2012, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1996, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,0 +37,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/beans\/editors\/NumberEditor.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1996, 2012, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1996, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -38,0 +38,1 @@\n+    @Override\n@@ -45,0 +46,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/beans\/editors\/ShortEditor.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1996, 2012, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1996, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,0 +33,1 @@\n+    @Override\n@@ -70,0 +71,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/beans\/editors\/StringEditor.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1996, 2012, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1996, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,0 +37,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/beans\/infos\/ComponentBeanInfo.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -408,0 +408,1 @@\n+            @Override\n@@ -413,0 +414,1 @@\n+            @Override\n@@ -420,0 +422,1 @@\n+            @Override\n@@ -466,0 +469,1 @@\n+            @Override\n@@ -475,0 +479,1 @@\n+            @Override\n@@ -484,0 +489,1 @@\n+            @Override\n@@ -491,0 +497,1 @@\n+            @Override\n@@ -525,0 +532,1 @@\n+            @Override\n@@ -534,0 +542,1 @@\n+            @Override\n@@ -543,0 +552,1 @@\n+            @Override\n@@ -550,0 +560,1 @@\n+            @Override\n@@ -584,0 +595,1 @@\n+            @Override\n@@ -593,0 +605,1 @@\n+            @Override\n@@ -602,0 +615,1 @@\n+            @Override\n@@ -609,0 +623,1 @@\n+            @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/beans\/util\/Cache.java","additions":16,"deletions":1,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2010, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -64,0 +64,1 @@\n+    @Override\n@@ -72,0 +73,1 @@\n+    @Override\n@@ -76,0 +78,1 @@\n+    @Override\n@@ -90,0 +93,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/bmp\/BMPImageReaderSpi.java","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2010, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -69,0 +69,1 @@\n+    @Override\n@@ -73,0 +74,1 @@\n+    @Override\n@@ -82,0 +84,1 @@\n+    @Override\n@@ -102,0 +105,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/bmp\/BMPImageWriterSpi.java","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -97,0 +97,1 @@\n+    @Override\n@@ -101,0 +102,1 @@\n+    @Override\n@@ -180,0 +182,1 @@\n+    @Override\n@@ -205,0 +208,1 @@\n+    @Override\n@@ -215,0 +219,1 @@\n+    @Override\n@@ -233,0 +238,1 @@\n+    @Override\n@@ -254,0 +260,1 @@\n+    @Override\n@@ -258,0 +265,1 @@\n+    @Override\n@@ -262,0 +270,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/bmp\/BMPMetadata.java","additions":10,"deletions":1,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2004, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -197,0 +197,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/bmp\/BMPMetadataFormat.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2005, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -36,0 +36,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/bmp\/BMPMetadataFormatResources.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2014, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -82,0 +82,1 @@\n+    @Override\n@@ -96,0 +97,1 @@\n+    @Override\n@@ -110,0 +112,1 @@\n+    @Override\n@@ -124,0 +127,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/common\/BogusColorSpace.java","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -42,0 +42,1 @@\n+    @Override\n@@ -46,0 +47,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/common\/InputStreamAdapter.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -61,0 +61,1 @@\n+    @Override\n@@ -65,0 +66,1 @@\n+    @Override\n@@ -69,0 +71,1 @@\n+    @Override\n@@ -100,0 +103,1 @@\n+    @Override\n@@ -131,0 +135,1 @@\n+    @Override\n@@ -135,0 +140,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/common\/SimpleCMYKColorSpace.java","additions":7,"deletions":1,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -77,0 +77,1 @@\n+    @Override\n@@ -92,0 +93,1 @@\n+    @Override\n@@ -107,0 +109,1 @@\n+    @Override\n@@ -112,0 +115,1 @@\n+    @Override\n@@ -122,0 +126,1 @@\n+    @Override\n@@ -127,0 +132,1 @@\n+    @Override\n@@ -134,0 +140,1 @@\n+    @Override\n@@ -141,0 +148,1 @@\n+    @Override\n@@ -150,0 +158,1 @@\n+    @Override\n@@ -169,0 +178,1 @@\n+    @Override\n@@ -178,0 +188,1 @@\n+    @Override\n@@ -197,0 +208,1 @@\n+    @Override\n@@ -202,0 +214,1 @@\n+    @Override\n@@ -207,0 +220,1 @@\n+    @Override\n@@ -221,0 +235,1 @@\n+    @Override\n@@ -235,0 +250,1 @@\n+    @Override\n@@ -382,0 +398,1 @@\n+    @Override\n@@ -402,0 +419,1 @@\n+    @Override\n@@ -425,0 +443,1 @@\n+    @Override\n@@ -514,0 +533,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/common\/SimpleRenderedImage.java","additions":21,"deletions":1,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2017, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -61,0 +61,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/common\/SingleTileRenderedImage.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2013, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -495,0 +495,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/common\/StandardMetadataFormat.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2013, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,0 +34,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/common\/StandardMetadataFormatResources.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2017, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -46,0 +46,1 @@\n+    @Override\n@@ -55,0 +56,1 @@\n+    @Override\n@@ -66,0 +68,1 @@\n+    @Override\n@@ -70,0 +73,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/common\/SubImageInputStream.java","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -118,0 +118,1 @@\n+    @Override\n@@ -122,0 +123,1 @@\n+    @Override\n@@ -255,0 +257,1 @@\n+    @Override\n@@ -297,0 +300,1 @@\n+    @Override\n@@ -318,0 +322,1 @@\n+    @Override\n@@ -335,0 +340,1 @@\n+    @Override\n@@ -368,0 +374,1 @@\n+    @Override\n@@ -394,0 +401,1 @@\n+    @Override\n@@ -417,0 +425,1 @@\n+    @Override\n@@ -423,0 +432,1 @@\n+    @Override\n@@ -428,0 +438,1 @@\n+    @Override\n@@ -433,0 +444,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/gif\/GIFImageMetadata.java","additions":13,"deletions":1,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -160,0 +160,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/gif\/GIFImageMetadataFormat.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2005, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,0 +34,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/gif\/GIFImageMetadataFormatResources.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2010, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -74,0 +74,1 @@\n+    @Override\n@@ -78,0 +79,1 @@\n+    @Override\n@@ -94,0 +96,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/gif\/GIFImageReaderSpi.java","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2010, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -76,0 +76,1 @@\n+    @Override\n@@ -97,0 +98,1 @@\n+    @Override\n@@ -101,0 +103,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/gif\/GIFImageWriterSpi.java","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -245,0 +245,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/gif\/GIFMetadata.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2013, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -80,0 +80,1 @@\n+    @Override\n@@ -84,0 +85,1 @@\n+    @Override\n@@ -152,0 +154,1 @@\n+    @Override\n@@ -193,0 +196,1 @@\n+    @Override\n@@ -211,0 +215,1 @@\n+    @Override\n@@ -233,0 +238,1 @@\n+    @Override\n@@ -273,0 +279,1 @@\n+    @Override\n@@ -288,0 +295,1 @@\n+    @Override\n@@ -293,0 +301,1 @@\n+    @Override\n@@ -298,0 +307,1 @@\n+    @Override\n@@ -304,0 +314,1 @@\n+    @Override\n@@ -309,0 +320,1 @@\n+    @Override\n@@ -314,0 +326,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/gif\/GIFStreamMetadata.java","additions":14,"deletions":1,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2004, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -95,0 +95,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/gif\/GIFStreamMetadataFormat.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2005, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,0 +34,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/gif\/GIFStreamMetadataFormatResources.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -52,0 +52,1 @@\n+    @Override\n@@ -56,0 +57,1 @@\n+    @Override\n@@ -99,0 +101,1 @@\n+    @Override\n@@ -295,0 +298,1 @@\n+    @Override\n@@ -392,0 +396,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/gif\/GIFWritableImageMetadata.java","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -58,0 +58,1 @@\n+    @Override\n@@ -62,0 +63,1 @@\n+    @Override\n@@ -80,0 +82,1 @@\n+    @Override\n@@ -93,0 +96,1 @@\n+    @Override\n@@ -167,0 +171,1 @@\n+    @Override\n@@ -261,0 +266,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/gif\/GIFWritableStreamMetadata.java","additions":7,"deletions":1,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -76,0 +76,1 @@\n+    @Override\n@@ -111,0 +112,1 @@\n+    @Override\n@@ -127,0 +129,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/jpeg\/AdobeMarkerSegment.java","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -107,0 +107,1 @@\n+    @Override\n@@ -120,0 +121,1 @@\n+    @Override\n@@ -126,0 +128,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/jpeg\/COMMarkerSegment.java","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -93,0 +93,1 @@\n+    @Override\n@@ -102,0 +103,1 @@\n+    @Override\n@@ -115,0 +117,1 @@\n+    @Override\n@@ -119,0 +122,1 @@\n+    @Override\n@@ -204,0 +208,1 @@\n+        @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/jpeg\/DHTMarkerSegment.java","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -86,0 +86,1 @@\n+    @Override\n@@ -95,0 +96,1 @@\n+    @Override\n@@ -108,0 +110,1 @@\n+    @Override\n@@ -112,0 +115,1 @@\n+    @Override\n@@ -267,0 +271,1 @@\n+        @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/jpeg\/DQTMarkerSegment.java","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -58,0 +58,1 @@\n+    @Override\n@@ -74,0 +75,1 @@\n+    @Override\n@@ -78,0 +80,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/jpeg\/DRIMarkerSegment.java","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -157,0 +157,1 @@\n+    @Override\n@@ -219,0 +220,1 @@\n+    @Override\n@@ -625,0 +627,1 @@\n+    @Override\n@@ -770,0 +773,1 @@\n+        @Override\n@@ -779,0 +783,1 @@\n+        @Override\n@@ -796,0 +801,1 @@\n+        @Override\n@@ -829,0 +835,1 @@\n+        @Override\n@@ -910,0 +917,1 @@\n+        @Override\n@@ -914,0 +922,1 @@\n+        @Override\n@@ -918,0 +927,1 @@\n+        @Override\n@@ -925,0 +935,1 @@\n+        @Override\n@@ -952,0 +963,1 @@\n+        @Override\n@@ -981,0 +993,1 @@\n+        @Override\n@@ -985,0 +998,1 @@\n+        @Override\n@@ -1017,0 +1031,1 @@\n+        @Override\n@@ -1053,0 +1068,1 @@\n+        @Override\n@@ -1057,0 +1073,1 @@\n+        @Override\n@@ -1094,0 +1111,1 @@\n+        @Override\n@@ -1224,0 +1242,1 @@\n+        @Override\n@@ -1235,0 +1254,1 @@\n+        @Override\n@@ -1252,0 +1272,1 @@\n+            @Override\n@@ -1253,0 +1274,1 @@\n+            @Override\n@@ -1254,0 +1276,1 @@\n+            @Override\n@@ -1255,0 +1278,1 @@\n+            @Override\n@@ -1259,0 +1283,1 @@\n+            @Override\n@@ -1260,0 +1285,1 @@\n+            @Override\n@@ -1262,0 +1288,1 @@\n+            @Override\n@@ -1263,0 +1290,1 @@\n+            @Override\n@@ -1264,0 +1292,1 @@\n+            @Override\n@@ -1267,0 +1296,1 @@\n+        @Override\n@@ -1282,0 +1312,1 @@\n+        @Override\n@@ -1290,0 +1321,1 @@\n+        @Override\n@@ -1298,0 +1330,1 @@\n+        @Override\n@@ -1306,0 +1339,1 @@\n+        @Override\n@@ -1325,0 +1359,1 @@\n+        @Override\n@@ -1448,0 +1483,1 @@\n+        @Override\n@@ -1544,0 +1580,1 @@\n+        @Override\n@@ -1556,0 +1593,1 @@\n+        @Override\n@@ -1560,0 +1598,1 @@\n+        @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/jpeg\/JFIFMarkerSegment.java","additions":39,"deletions":0,"binary":false,"changes":39,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -340,0 +340,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/jpeg\/JPEGImageMetadataFormat.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2005, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -125,0 +125,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/jpeg\/JPEGImageMetadataFormatResources.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2005, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,0 +34,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/jpeg\/JPEGImageReaderResources.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2004, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -62,0 +62,1 @@\n+    @Override\n@@ -66,0 +67,1 @@\n+    @Override\n@@ -83,0 +85,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/jpeg\/JPEGImageReaderSpi.java","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2005, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,0 +34,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/jpeg\/JPEGImageWriterResources.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2004, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -66,0 +66,1 @@\n+    @Override\n@@ -70,0 +71,1 @@\n+    @Override\n@@ -74,0 +76,1 @@\n+    @Override\n@@ -98,0 +101,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/jpeg\/JPEGImageWriterSpi.java","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -728,0 +728,1 @@\n+    @Override\n@@ -758,0 +759,1 @@\n+    @Override\n@@ -813,0 +815,1 @@\n+    @Override\n@@ -953,0 +956,1 @@\n+    @Override\n@@ -983,0 +987,1 @@\n+    @Override\n@@ -1058,0 +1063,1 @@\n+    @Override\n@@ -1076,0 +1082,1 @@\n+    @Override\n@@ -1089,0 +1096,1 @@\n+    @Override\n@@ -1093,0 +1101,1 @@\n+    @Override\n@@ -2163,0 +2172,1 @@\n+    @Override\n@@ -2407,0 +2417,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/jpeg\/JPEGMetadata.java","additions":11,"deletions":0,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -126,0 +126,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/jpeg\/JPEGMetadataFormat.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2005, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -35,0 +35,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/jpeg\/JPEGStreamMetadataFormatResources.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -113,0 +113,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/jpeg\/MarkerSegment.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -98,0 +98,1 @@\n+    @Override\n@@ -110,0 +111,1 @@\n+    @Override\n@@ -157,0 +159,1 @@\n+    @Override\n@@ -161,0 +164,1 @@\n+    @Override\n@@ -234,0 +238,1 @@\n+        @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/jpeg\/SOFMarkerSegment.java","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -92,0 +92,1 @@\n+    @Override\n@@ -104,0 +105,1 @@\n+    @Override\n@@ -155,0 +157,1 @@\n+    @Override\n@@ -159,0 +162,1 @@\n+    @Override\n@@ -211,0 +215,1 @@\n+        @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/jpeg\/SOSMarkerSegment.java","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2010, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -73,0 +73,1 @@\n+    @Override\n@@ -77,0 +78,1 @@\n+    @Override\n@@ -99,0 +101,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/png\/PNGImageReaderSpi.java","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2010, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -77,0 +77,1 @@\n+    @Override\n@@ -119,0 +120,1 @@\n+    @Override\n@@ -123,0 +125,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/png\/PNGImageWriterSpi.java","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -466,0 +466,1 @@\n+    @Override\n@@ -483,0 +484,1 @@\n+    @Override\n@@ -498,0 +500,1 @@\n+    @Override\n@@ -850,0 +853,1 @@\n+    @Override\n@@ -922,0 +926,1 @@\n+    @Override\n@@ -955,0 +960,1 @@\n+    @Override\n@@ -1001,0 +1007,1 @@\n+    @Override\n@@ -1030,0 +1037,1 @@\n+    @Override\n@@ -1070,0 +1078,1 @@\n+    @Override\n@@ -1117,0 +1126,1 @@\n+    @Override\n@@ -1288,0 +1298,1 @@\n+    @Override\n@@ -2270,0 +2281,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/png\/PNGMetadata.java","additions":13,"deletions":1,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2004, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -489,0 +489,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/png\/PNGMetadataFormat.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2005, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,0 +34,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/png\/PNGMetadataFormatResources.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -328,0 +328,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/tiff\/TIFFBaseJPEGCompressor.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2015, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -59,0 +59,1 @@\n+    @Override\n@@ -103,0 +104,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/tiff\/TIFFCIELabColorConverter.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -51,0 +51,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/tiff\/TIFFDeflateDecompressor.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2015, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -61,0 +61,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/tiff\/TIFFDeflater.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -42,0 +42,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/tiff\/TIFFExifJPEGCompressor.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -245,0 +245,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/tiff\/TIFFFaxCompressor.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -594,0 +594,1 @@\n+    @Override\n@@ -630,0 +631,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/tiff\/TIFFFaxDecompressor.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -165,0 +165,1 @@\n+    @Override\n@@ -175,0 +176,1 @@\n+    @Override\n@@ -180,0 +182,1 @@\n+    @Override\n@@ -185,0 +188,1 @@\n+    @Override\n@@ -190,0 +194,1 @@\n+    @Override\n@@ -195,0 +200,1 @@\n+    @Override\n@@ -200,0 +206,1 @@\n+    @Override\n@@ -205,0 +212,1 @@\n+    @Override\n@@ -211,0 +219,1 @@\n+    @Override\n@@ -217,0 +226,1 @@\n+    @Override\n@@ -222,0 +232,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/tiff\/TIFFFieldNode.java","additions":12,"deletions":1,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -96,0 +96,1 @@\n+    @Override\n@@ -152,0 +153,1 @@\n+    @Override\n@@ -184,0 +186,1 @@\n+    @Override\n@@ -281,0 +284,1 @@\n+    @Override\n@@ -339,0 +343,1 @@\n+    @Override\n@@ -479,0 +484,1 @@\n+    @Override\n@@ -607,0 +613,1 @@\n+    @Override\n@@ -672,0 +679,1 @@\n+    @Override\n@@ -708,0 +716,1 @@\n+    @Override\n@@ -1582,0 +1591,1 @@\n+    @Override\n@@ -1600,0 +1610,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/tiff\/TIFFImageMetadata.java","additions":12,"deletions":1,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2015, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,0 +37,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/tiff\/TIFFImageMetadataFormat.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2015, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -99,0 +99,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/tiff\/TIFFImageMetadataFormatResources.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2015, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -59,0 +59,1 @@\n+    @Override\n@@ -63,0 +64,1 @@\n+    @Override\n@@ -81,0 +83,1 @@\n+    @Override\n@@ -85,0 +88,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/tiff\/TIFFImageReaderSpi.java","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2015, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -58,0 +58,1 @@\n+    @Override\n@@ -62,0 +63,1 @@\n+    @Override\n@@ -66,0 +68,1 @@\n+    @Override\n@@ -70,0 +73,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/tiff\/TIFFImageWriterSpi.java","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -57,0 +57,1 @@\n+        @Override\n@@ -115,0 +116,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/tiff\/TIFFJPEGCompressor.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2017, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -55,0 +55,1 @@\n+    @Override\n@@ -84,0 +85,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/tiff\/TIFFJPEGDecompressor.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2015, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -39,0 +39,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/tiff\/TIFFLSBCompressor.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2015, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -38,0 +38,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/tiff\/TIFFLSBDecompressor.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2015, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -44,0 +44,1 @@\n+    @Override\n@@ -48,0 +49,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/tiff\/TIFFLZWCompressor.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -79,0 +79,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/tiff\/TIFFLZWDecompressor.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2015, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -42,0 +42,1 @@\n+    @Override\n@@ -88,0 +89,1 @@\n+    @Override\n@@ -93,0 +95,1 @@\n+    @Override\n@@ -98,0 +101,1 @@\n+    @Override\n@@ -106,0 +110,1 @@\n+    @Override\n@@ -111,0 +116,1 @@\n+    @Override\n@@ -116,0 +122,1 @@\n+    @Override\n@@ -121,0 +128,1 @@\n+    @Override\n@@ -126,0 +134,1 @@\n+    @Override\n@@ -131,0 +140,1 @@\n+    @Override\n@@ -136,0 +146,1 @@\n+    @Override\n@@ -141,0 +152,1 @@\n+    @Override\n@@ -146,0 +158,1 @@\n+    @Override\n@@ -150,0 +163,1 @@\n+    @Override\n@@ -154,0 +168,1 @@\n+    @Override\n@@ -159,0 +174,1 @@\n+    @Override\n@@ -164,0 +180,1 @@\n+    @Override\n@@ -173,0 +190,1 @@\n+    @Override\n@@ -178,0 +196,1 @@\n+    @Override\n@@ -187,0 +206,1 @@\n+    @Override\n@@ -196,0 +216,1 @@\n+    @Override\n@@ -205,0 +226,1 @@\n+    @Override\n@@ -214,0 +236,1 @@\n+    @Override\n@@ -223,0 +246,1 @@\n+    @Override\n@@ -232,0 +256,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/tiff\/TIFFMetadataFormat.java","additions":26,"deletions":1,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2015, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -36,0 +36,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/tiff\/TIFFNullCompressor.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -59,0 +59,1 @@\n+    @Override\n@@ -92,0 +93,1 @@\n+    @Override\n@@ -108,0 +110,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/tiff\/TIFFNullDecompressor.java","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -548,0 +548,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/tiff\/TIFFOldJPEGDecompressor.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2015, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -89,0 +89,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/tiff\/TIFFPackBitsCompressor.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -75,0 +75,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/tiff\/TIFFPackBitsDecompressor.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -90,0 +90,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/tiff\/TIFFRLECompressor.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -133,0 +133,1 @@\n+    @Override\n@@ -137,0 +138,1 @@\n+    @Override\n@@ -141,0 +143,1 @@\n+    @Override\n@@ -145,0 +148,1 @@\n+    @Override\n@@ -149,0 +153,1 @@\n+    @Override\n@@ -153,0 +158,1 @@\n+    @Override\n@@ -157,0 +163,1 @@\n+    @Override\n@@ -161,0 +168,1 @@\n+    @Override\n@@ -165,0 +173,1 @@\n+    @Override\n@@ -169,0 +178,1 @@\n+    @Override\n@@ -173,0 +183,1 @@\n+    @Override\n@@ -177,0 +188,1 @@\n+    @Override\n@@ -181,0 +193,1 @@\n+    @Override\n@@ -185,0 +198,1 @@\n+    @Override\n@@ -189,0 +203,1 @@\n+    @Override\n@@ -193,0 +208,1 @@\n+    @Override\n@@ -197,0 +213,1 @@\n+    @Override\n@@ -201,0 +218,1 @@\n+    @Override\n@@ -209,0 +227,1 @@\n+    @Override\n@@ -213,0 +232,1 @@\n+    @Override\n@@ -239,0 +259,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/tiff\/TIFFRenderedImage.java","additions":22,"deletions":1,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2015, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -57,0 +57,1 @@\n+    @Override\n@@ -67,0 +68,1 @@\n+    @Override\n@@ -106,0 +108,1 @@\n+    @Override\n@@ -118,0 +121,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/tiff\/TIFFStreamMetadata.java","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2015, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,0 +34,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/tiff\/TIFFStreamMetadataFormat.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2015, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -39,0 +39,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/tiff\/TIFFStreamMetadataFormatResources.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -55,0 +55,1 @@\n+    @Override\n@@ -217,0 +218,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/tiff\/TIFFT4Compressor.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -149,0 +149,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/tiff\/TIFFT6Compressor.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2015, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -83,0 +83,1 @@\n+    @Override\n@@ -98,0 +99,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/tiff\/TIFFYCbCrColorConverter.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -98,0 +98,1 @@\n+    @Override\n@@ -105,0 +106,1 @@\n+    @Override\n@@ -112,0 +114,1 @@\n+    @Override\n@@ -119,0 +122,1 @@\n+    @Override\n@@ -126,0 +130,1 @@\n+    @Override\n@@ -133,0 +138,1 @@\n+    @Override\n@@ -140,0 +146,1 @@\n+    @Override\n@@ -147,0 +154,1 @@\n+    @Override\n@@ -154,0 +162,1 @@\n+    @Override\n@@ -161,0 +170,1 @@\n+    @Override\n@@ -168,0 +178,1 @@\n+    @Override\n@@ -176,0 +187,1 @@\n+    @Override\n@@ -183,0 +195,1 @@\n+    @Override\n@@ -190,0 +203,1 @@\n+    @Override\n@@ -197,0 +211,1 @@\n+    @Override\n@@ -204,0 +219,1 @@\n+    @Override\n@@ -211,0 +227,1 @@\n+    @Override\n@@ -218,0 +235,1 @@\n+    @Override\n@@ -225,0 +243,1 @@\n+    @Override\n@@ -232,0 +251,1 @@\n+    @Override\n@@ -239,0 +259,1 @@\n+    @Override\n@@ -263,0 +284,1 @@\n+    @Override\n@@ -270,0 +292,1 @@\n+    @Override\n@@ -277,0 +300,1 @@\n+    @Override\n@@ -290,0 +314,1 @@\n+    @Override\n@@ -297,0 +322,1 @@\n+    @Override\n@@ -304,0 +330,1 @@\n+    @Override\n@@ -311,0 +338,1 @@\n+    @Override\n@@ -318,0 +346,1 @@\n+    @Override\n@@ -325,0 +354,1 @@\n+    @Override\n@@ -332,0 +362,1 @@\n+    @Override\n@@ -339,0 +370,1 @@\n+    @Override\n@@ -356,0 +388,1 @@\n+    @Override\n@@ -448,0 +481,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/tiff\/TIFFYCbCrDecompressor.java","additions":35,"deletions":1,"binary":false,"changes":36,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2013, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -66,0 +66,1 @@\n+    @Override\n@@ -74,0 +75,1 @@\n+    @Override\n@@ -78,0 +80,1 @@\n+    @Override\n@@ -152,0 +155,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/wbmp\/WBMPImageReaderSpi.java","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2010, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -66,0 +66,1 @@\n+    @Override\n@@ -70,0 +71,1 @@\n+    @Override\n@@ -79,0 +81,1 @@\n+    @Override\n@@ -89,0 +92,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/wbmp\/WBMPImageWriterSpi.java","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2004, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -53,0 +53,1 @@\n+    @Override\n@@ -57,0 +58,1 @@\n+    @Override\n@@ -79,0 +81,1 @@\n+    @Override\n@@ -83,0 +86,1 @@\n+    @Override\n@@ -87,0 +91,1 @@\n+    @Override\n@@ -104,0 +109,1 @@\n+    @Override\n@@ -115,0 +121,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/wbmp\/WBMPMetadata.java","additions":8,"deletions":1,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2004, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -59,0 +59,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/plugins\/wbmp\/WBMPMetadataFormat.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2010, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -46,0 +46,1 @@\n+    @Override\n@@ -50,0 +51,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/spi\/FileImageInputStreamSpi.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2010, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -46,0 +46,1 @@\n+    @Override\n@@ -50,0 +51,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/spi\/FileImageOutputStreamSpi.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2010, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -49,0 +49,1 @@\n+    @Override\n@@ -53,0 +54,1 @@\n+    @Override\n@@ -57,0 +59,1 @@\n+    @Override\n@@ -61,0 +64,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/spi\/InputStreamImageInputStreamSpi.java","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2010, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -49,0 +49,1 @@\n+    @Override\n@@ -53,0 +54,1 @@\n+    @Override\n@@ -57,0 +59,1 @@\n+    @Override\n@@ -61,0 +64,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/spi\/OutputStreamImageOutputStreamSpi.java","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2010, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -47,0 +47,1 @@\n+    @Override\n@@ -51,0 +52,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/spi\/RAFImageInputStreamSpi.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2010, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -47,0 +47,1 @@\n+    @Override\n@@ -51,0 +52,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/spi\/RAFImageOutputStreamSpi.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -44,0 +44,1 @@\n+    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/stream\/CloseableDisposerRecord.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -63,0 +63,1 @@\n+                    @Override\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/imageio\/stream\/StreamCloser.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2002, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2002, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -219,5 +219,3 @@\n-        if (((JProgressBar) c).isBorderPainted()) {\n-            context.getPainter().paintProgressBarBackground(context,\n-                    g, 0, 0, c.getWidth(), c.getHeight(),\n-                    progressBar.getOrientation());\n-        }\n+        context.getPainter().paintProgressBarBackground(context,\n+                g, 0, 0, c.getWidth(), c.getHeight(),\n+                progressBar.getOrientation());\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/plaf\/synth\/SynthProgressBarUI.java","additions":4,"deletions":6,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -1,1 +1,1 @@\n-## libpng v1.6.47\n+## libpng v1.6.51\n@@ -12,1 +12,1 @@\n-Copyright (c) 1995-2025 The PNG Reference Library Authors.\n+Copyright (C) 1995-2025 The PNG Reference Library Authors.\n@@ -176,0 +176,1 @@\n+ * Manfred Schlaegl\n@@ -187,0 +188,1 @@\n+ * Tobias Stoeckmann\n@@ -196,1 +198,1 @@\n- * Google Inc.\n+ * Google LLC\n@@ -198,0 +200,1 @@\n+    - Drago Tiselice\n@@ -207,0 +210,2 @@\n+ * Samsung Group\n+    - Filip Wasil\n@@ -217,0 +222,1 @@\n+\n","filename":"src\/java.desktop\/share\/legal\/libpng.md","additions":9,"deletions":3,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -6254,0 +6254,53 @@\n+Version 1.6.48 [April 30, 2025]\n+  Fixed the floating-point version of the mDCv setter `png_set_mDCv`.\n+    (Reported by Mohit Bakshi; fixed by John Bowler)\n+  Added #error directives to discourage the inclusion of private\n+    libpng implementation header files in PNG-supporting applications.\n+  Added the CMake build option `PNG_LIBCONF_HEADER`, to be used as an\n+    alternative to `DFA_XTRA`.\n+  Removed the Travis CI configuration files, with heartfelt thanks for\n+    their generous support of our project over the past five years!\n+\n+Version 1.6.49 [June 12, 2025]\n+  Added SIMD-optimized code for the RISC-V Vector Extension (RVV).\n+    (Contributed by Manfred Schlaegl, Dragos Tiselice and Filip Wasil)\n+  Added various fixes and improvements to the build scripts and to\n+    the sample code.\n+\n+Version 1.6.50 [July 1, 2025]\n+  Improved the detection of the RVV Extension on the RISC-V platform.\n+    (Contributed by Filip Wasil)\n+  Replaced inline ASM with C intrinsics in the RVV code.\n+    (Contributed by Filip Wasil)\n+  Fixed a decoder defect in which unknown chunks trailing IDAT, set\n+    to go through the unknown chunk handler, incorrectly triggered\n+    out-of-place IEND errors.\n+    (Contributed by John Bowler)\n+  Fixed the CMake file for cross-platform builds that require `libm`.\n+\n+Version 1.6.51 [November 21, 2025]\n+  Fixed CVE-2025-64505 (moderate severity):\n+    Heap buffer overflow in `png_do_quantize` via malformed palette index.\n+    (Reported by Samsung; analyzed by Fabio Gritti.)\n+  Fixed CVE-2025-64506 (moderate severity):\n+    Heap buffer over-read in `png_write_image_8bit` with 8-bit input and\n+    `convert_to_8bit` enabled.\n+    (Reported by Samsung and <weijinjinnihao@users.noreply.github.com>;\n+    analyzed by Fabio Gritti.)\n+  Fixed CVE-2025-64720 (high severity):\n+    Buffer overflow in `png_image_read_composite` via incorrect palette\n+    premultiplication.\n+    (Reported by Samsung; analyzed by John Bowler.)\n+  Fixed CVE-2025-65018 (high severity):\n+    Heap buffer overflow in `png_combine_row` triggered via\n+    `png_image_finish_read`.\n+    (Reported by <yosiimich@users.noreply.github.com>.)\n+  Fixed a memory leak in `png_set_quantize`.\n+    (Reported by Samsung; analyzed by Fabio Gritti.)\n+  Removed the experimental and incomplete ERROR_NUMBERS code.\n+    (Contributed by Tobias Stoeckmann.)\n+  Improved the RISC-V vector extension support; required RVV 1.0 or newer.\n+    (Contributed by Filip Wasil.)\n+  Added GitHub Actions workflows for automated testing.\n+  Performed various refactorings and cleanups.\n+\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/libpng\/CHANGES","additions":53,"deletions":0,"binary":false,"changes":53,"status":"modified"},{"patch":"@@ -1,1 +1,1 @@\n-README for libpng version 1.6.47\n+README for libpng version 1.6.51\n@@ -150,0 +150,1 @@\n+    riscv\/        =>  Optimized code for the RISC-V platform\n@@ -165,0 +166,1 @@\n+        riscv-rvv\/    =>  Optimized code for the RISC-V Vector platform\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/libpng\/README","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -45,1 +45,1 @@\n-typedef png_libpng_version_1_6_47 Your_png_h_is_not_version_1_6_47;\n+typedef png_libpng_version_1_6_51 Your_png_h_is_not_version_1_6_51;\n@@ -140,1 +140,7 @@\n-   if (items >= (~(png_alloc_size_t)0)\/size)\n+   \/* This check against overflow is vestigial, dating back from\n+    * the old times when png_zalloc used to be an exported function.\n+    * We're still keeping it here for now, as an extra-cautious\n+    * prevention against programming errors inside zlib, although it\n+    * should rather be a debug-time assertion instead.\n+    *\/\n+   if (size != 0 && items >= (~(png_alloc_size_t)0) \/ size)\n@@ -142,2 +148,2 @@\n-      png_warning (png_voidcast(png_structrp, png_ptr),\n-          \"Potential overflow in png_zalloc()\");\n+      png_warning(png_voidcast(png_structrp, png_ptr),\n+                  \"Potential overflow in png_zalloc()\");\n@@ -270,4 +276,0 @@\n-#ifdef PNG_ERROR_NUMBERS_SUPPORTED\n-      png_ptr->flags = 0;\n-#endif\n-\n@@ -732,1 +734,1 @@\n-png_init_io(png_structrp png_ptr, png_FILE_p fp)\n+png_init_io(png_structrp png_ptr, FILE *fp)\n@@ -847,1 +849,1 @@\n-      \"libpng version 1.6.47\" PNG_STRING_NEWLINE \\\n+      \"libpng version 1.6.51\" PNG_STRING_NEWLINE \\\n@@ -1523,1 +1525,1 @@\n-#ifdef PNG_iCCP_SUPPORTED\n+#ifdef PNG_READ_iCCP_SUPPORTED\n@@ -1599,1 +1601,0 @@\n-#endif \/* iCCP *\/\n@@ -1601,1 +1602,0 @@\n-#ifdef PNG_READ_iCCP_SUPPORTED\n@@ -4001,1 +4001,1 @@\n-         FILE *fp = png_voidcast(FILE*, cp->png_ptr->io_ptr);\n+         FILE *fp = png_voidcast(FILE *, cp->png_ptr->io_ptr);\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/libpng\/png.c","additions":14,"deletions":14,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -32,1 +32,1 @@\n- * libpng version 1.6.47\n+ * libpng version 1.6.51\n@@ -46,1 +46,1 @@\n- *   libpng versions 1.6.36, December 2018, through 1.6.47, February 2025:\n+ *   libpng versions 1.6.36, December 2018, through 1.6.51, November 2025:\n@@ -270,1 +270,1 @@\n- *    1.6.47                  16    10647  16.so.16.47[.0]\n+ *    1.6.51                  16    10651  16.so.16.51[.0]\n@@ -306,1 +306,1 @@\n-#define PNG_LIBPNG_VER_STRING \"1.6.47\"\n+#define PNG_LIBPNG_VER_STRING \"1.6.51\"\n@@ -317,1 +317,1 @@\n-#define PNG_LIBPNG_VER_RELEASE 47\n+#define PNG_LIBPNG_VER_RELEASE 51\n@@ -348,1 +348,1 @@\n-#define PNG_LIBPNG_VER 10647 \/* 1.6.47 *\/\n+#define PNG_LIBPNG_VER 10651 \/* 1.6.51 *\/\n@@ -458,1 +458,1 @@\n-typedef char* png_libpng_version_1_6_47;\n+typedef char* png_libpng_version_1_6_51;\n@@ -1602,1 +1602,1 @@\n-PNG_EXPORT(74, void, png_init_io, (png_structrp png_ptr, png_FILE_p fp));\n+PNG_EXPORT(74, void, png_init_io, (png_structrp png_ptr, FILE *fp));\n@@ -3120,1 +3120,1 @@\n-   FILE* file));\n+   FILE *file));\n@@ -3195,1 +3195,1 @@\n-   \/* Write the image to the given (FILE*). *\/\n+   \/* Write the image to the given FILE object. *\/\n@@ -3335,0 +3335,2 @@\n+\n+\/* HARDWARE: ARM Neon SIMD instructions supported *\/\n@@ -3336,1 +3338,1 @@\n-#  define PNG_ARM_NEON   0 \/* HARDWARE: ARM Neon SIMD instructions supported *\/\n+#  define PNG_ARM_NEON 0\n@@ -3338,2 +3340,8 @@\n-#define PNG_MAXIMUM_INFLATE_WINDOW 2 \/* SOFTWARE: force maximum window *\/\n-#define PNG_SKIP_sRGB_CHECK_PROFILE 4 \/* SOFTWARE: Check ICC profile for sRGB *\/\n+\n+\/* SOFTWARE: Force maximum window *\/\n+#define PNG_MAXIMUM_INFLATE_WINDOW 2\n+\n+\/* SOFTWARE: Check ICC profile for sRGB *\/\n+#define PNG_SKIP_sRGB_CHECK_PROFILE 4\n+\n+\/* HARDWARE: MIPS MSA SIMD instructions supported *\/\n@@ -3341,1 +3349,1 @@\n-#  define PNG_MIPS_MSA   6 \/* HARDWARE: MIPS Msa SIMD instructions supported *\/\n+#  define PNG_MIPS_MSA 6\n@@ -3343,0 +3351,2 @@\n+\n+\/* SOFTWARE: Disable Adler32 check on IDAT *\/\n@@ -3344,1 +3354,1 @@\n-#  define PNG_IGNORE_ADLER32 8 \/* SOFTWARE: disable Adler32 check on IDAT *\/\n+#  define PNG_IGNORE_ADLER32 8\n@@ -3346,0 +3356,2 @@\n+\n+\/* HARDWARE: PowerPC VSX SIMD instructions supported *\/\n@@ -3347,2 +3359,1 @@\n-#  define PNG_POWERPC_VSX   10 \/* HARDWARE: PowerPC VSX SIMD instructions\n-                                * supported *\/\n+#  define PNG_POWERPC_VSX 10\n@@ -3350,0 +3361,2 @@\n+\n+\/* HARDWARE: MIPS MMI SIMD instructions supported *\/\n@@ -3351,1 +3364,6 @@\n-#  define PNG_MIPS_MMI   12 \/* HARDWARE: MIPS MMI SIMD instructions supported *\/\n+#  define PNG_MIPS_MMI 12\n+#endif\n+\n+\/* HARDWARE: RISC-V RVV SIMD instructions supported *\/\n+#ifdef PNG_RISCV_RVV_API_SUPPORTED\n+#  define PNG_RISCV_RVV 14\n@@ -3354,1 +3372,2 @@\n-#define PNG_OPTION_NEXT  14 \/* Next option - numbers must be even *\/\n+\/* Next option - numbers must be even *\/\n+#define PNG_OPTION_NEXT 16\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/libpng\/png.h","additions":38,"deletions":19,"binary":false,"changes":57,"status":"modified"},{"patch":"@@ -32,1 +32,1 @@\n- * libpng version 1.6.47\n+ * libpng version 1.6.51\n@@ -251,1 +251,1 @@\n-#     error \"PNG_USER_PRIVATEBUILD must be defined if PNGAPI is changed\"\n+#     error PNG_USER_PRIVATEBUILD must be defined if PNGAPI is changed\n@@ -254,16 +254,4 @@\n-#  if (defined(_MSC_VER) && _MSC_VER < 800) ||\\\n-      (defined(__BORLANDC__) && __BORLANDC__ < 0x500)\n-   \/* older Borland and MSC\n-    * compilers used '__export' and required this to be after\n-    * the type.\n-    *\/\n-#    ifndef PNG_EXPORT_TYPE\n-#      define PNG_EXPORT_TYPE(type) type PNG_IMPEXP\n-#    endif\n-#    define PNG_DLL_EXPORT __export\n-#  else \/* newer compiler *\/\n-#    define PNG_DLL_EXPORT __declspec(dllexport)\n-#    ifndef PNG_DLL_IMPORT\n-#      define PNG_DLL_IMPORT __declspec(dllimport)\n-#    endif\n-#  endif \/* compiler *\/\n+#  define PNG_DLL_EXPORT __declspec(dllexport)\n+#  ifndef PNG_DLL_IMPORT\n+#    define PNG_DLL_IMPORT __declspec(dllimport)\n+#  endif\n@@ -511,1 +499,1 @@\n-#  error \"libpng requires 8-bit bytes\"\n+#  error libpng requires 8-bit bytes\n@@ -519,1 +507,1 @@\n-#  error \"libpng requires a signed 16-bit type\"\n+#  error libpng requires a signed 16-bit integer type\n@@ -527,1 +515,1 @@\n-#  error \"libpng requires an unsigned 16-bit type\"\n+#  error libpng requires an unsigned 16-bit integer type\n@@ -535,1 +523,1 @@\n-#  error \"libpng requires a signed 32-bit (or more) type\"\n+#  error libpng requires a signed 32-bit (or longer) integer type\n@@ -543,1 +531,1 @@\n-#  error \"libpng requires an unsigned 32-bit (or more) type\"\n+#  error libpng requires an unsigned 32-bit (or longer) integer type\n@@ -624,4 +612,0 @@\n-#ifdef PNG_STDIO_SUPPORTED\n-typedef FILE            * png_FILE_p;\n-#endif\n-\n@@ -649,0 +633,9 @@\n+#ifdef PNG_STDIO_SUPPORTED\n+\/* With PNG_STDIO_SUPPORTED it was possible to use I\/O streams that were\n+ * not necessarily stdio FILE streams, to allow building Windows applications\n+ * before Win32 and Windows CE applications before WinCE 3.0, but that kind\n+ * of support has long been discontinued.\n+ *\/\n+typedef FILE            * png_FILE_p; \/* [Deprecated] *\/\n+#endif\n+\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/libpng\/pngconf.h","additions":20,"deletions":27,"binary":false,"changes":47,"status":"modified"},{"patch":"@@ -25,1 +25,1 @@\n-\/* pngdebug.h - Debugging macros for libpng, also used in pngtest.c\n+\/* pngdebug.h - internal debugging macros for libpng\n@@ -32,1 +32,1 @@\n- * Copyright (c) 2018 Cosmin Truta\n+ * Copyright (c) 2018-2025 Cosmin Truta\n@@ -42,0 +42,4 @@\n+#ifndef PNGPRIV_H\n+#  error This file must not be included by applications; please include <png.h>\n+#endif\n+\n@@ -66,3 +70,0 @@\n-#  ifndef PNG_LITERAL_SHARP\n-#    define PNG_LITERAL_SHARP 0x23\n-#  endif\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/libpng\/pngdebug.h","additions":6,"deletions":5,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -32,1 +32,1 @@\n- * Copyright (c) 2018-2024 Cosmin Truta\n+ * Copyright (c) 2018-2025 Cosmin Truta\n@@ -71,40 +71,0 @@\n-#ifdef PNG_ERROR_NUMBERS_SUPPORTED\n-   char msg[16];\n-   if (png_ptr != NULL)\n-   {\n-      if ((png_ptr->flags &\n-         (PNG_FLAG_STRIP_ERROR_NUMBERS|PNG_FLAG_STRIP_ERROR_TEXT)) != 0)\n-      {\n-         if (*error_message == PNG_LITERAL_SHARP)\n-         {\n-            \/* Strip \"#nnnn \" from beginning of error message. *\/\n-            int offset;\n-            for (offset = 1; offset<15; offset++)\n-               if (error_message[offset] == ' ')\n-                  break;\n-\n-            if ((png_ptr->flags & PNG_FLAG_STRIP_ERROR_TEXT) != 0)\n-            {\n-               int i;\n-               for (i = 0; i < offset - 1; i++)\n-                  msg[i] = error_message[i + 1];\n-               msg[i - 1] = '\\0';\n-               error_message = msg;\n-            }\n-\n-            else\n-               error_message += offset;\n-         }\n-\n-         else\n-         {\n-            if ((png_ptr->flags & PNG_FLAG_STRIP_ERROR_TEXT) != 0)\n-            {\n-               msg[0] = '0';\n-               msg[1] = '\\0';\n-               error_message = msg;\n-            }\n-         }\n-      }\n-   }\n-#endif\n@@ -248,15 +208,0 @@\n-   if (png_ptr != NULL)\n-   {\n-#ifdef PNG_ERROR_NUMBERS_SUPPORTED\n-   if ((png_ptr->flags &\n-       (PNG_FLAG_STRIP_ERROR_NUMBERS|PNG_FLAG_STRIP_ERROR_TEXT)) != 0)\n-#endif\n-      {\n-         if (*warning_message == PNG_LITERAL_SHARP)\n-         {\n-            for (offset = 1; offset < 15; offset++)\n-               if (warning_message[offset] == ' ')\n-                  break;\n-         }\n-      }\n-   }\n@@ -744,36 +689,3 @@\n-#ifdef PNG_ERROR_NUMBERS_SUPPORTED\n-   \/* Check on NULL only added in 1.5.4 *\/\n-   if (error_message != NULL && *error_message == PNG_LITERAL_SHARP)\n-   {\n-      \/* Strip \"#nnnn \" from beginning of error message. *\/\n-      int offset;\n-      char error_number[16];\n-      for (offset = 0; offset<15; offset++)\n-      {\n-         error_number[offset] = error_message[offset + 1];\n-         if (error_message[offset] == ' ')\n-            break;\n-      }\n-\n-      if ((offset > 1) && (offset < 15))\n-      {\n-         error_number[offset - 1] = '\\0';\n-         fprintf(stderr, \"libpng error no. %s: %s\",\n-             error_number, error_message + offset + 1);\n-         fprintf(stderr, PNG_STRING_NEWLINE);\n-      }\n-\n-      else\n-      {\n-         fprintf(stderr, \"libpng error: %s, offset=%d\",\n-             error_message, offset);\n-         fprintf(stderr, PNG_STRING_NEWLINE);\n-      }\n-   }\n-   else\n-#endif\n-   {\n-      fprintf(stderr, \"libpng error: %s\", error_message ? error_message :\n-         \"undefined\");\n-      fprintf(stderr, PNG_STRING_NEWLINE);\n-   }\n+   fprintf(stderr, \"libpng error: %s\", error_message ? error_message :\n+      \"undefined\");\n+   fprintf(stderr, PNG_STRING_NEWLINE);\n@@ -817,34 +729,2 @@\n-#  ifdef PNG_ERROR_NUMBERS_SUPPORTED\n-   if (*warning_message == PNG_LITERAL_SHARP)\n-   {\n-      int offset;\n-      char warning_number[16];\n-      for (offset = 0; offset < 15; offset++)\n-      {\n-         warning_number[offset] = warning_message[offset + 1];\n-         if (warning_message[offset] == ' ')\n-            break;\n-      }\n-\n-      if ((offset > 1) && (offset < 15))\n-      {\n-         warning_number[offset + 1] = '\\0';\n-         fprintf(stderr, \"libpng warning no. %s: %s\",\n-             warning_number, warning_message + offset);\n-         fprintf(stderr, PNG_STRING_NEWLINE);\n-      }\n-\n-      else\n-      {\n-         fprintf(stderr, \"libpng warning: %s\",\n-             warning_message);\n-         fprintf(stderr, PNG_STRING_NEWLINE);\n-      }\n-   }\n-   else\n-#  endif\n-\n-   {\n-      fprintf(stderr, \"libpng warning: %s\", warning_message);\n-      fprintf(stderr, PNG_STRING_NEWLINE);\n-   }\n+   fprintf(stderr, \"libpng warning: %s\", warning_message);\n+   fprintf(stderr, PNG_STRING_NEWLINE);\n@@ -898,6 +778,2 @@\n-   if (png_ptr != NULL)\n-   {\n-      png_ptr->flags &=\n-         ((~(PNG_FLAG_STRIP_ERROR_NUMBERS |\n-         PNG_FLAG_STRIP_ERROR_TEXT))&strip_mode);\n-   }\n+   PNG_UNUSED(png_ptr)\n+   PNG_UNUSED(strip_mode)\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/libpng\/pngerror.c","additions":8,"deletions":132,"binary":false,"changes":140,"status":"modified"},{"patch":"@@ -32,1 +32,1 @@\n- * Copyright (c) 2018-2024 Cosmin Truta\n+ * Copyright (c) 2018-2025 Cosmin Truta\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/libpng\/pngget.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -25,1 +25,1 @@\n-\/* pnginfo.h - header file for PNG reference library\n+\/* pnginfo.h - internal structures for libpng\n@@ -32,1 +32,1 @@\n- * Copyright (c) 2018 Cosmin Truta\n+ * Copyright (c) 2018-2025 Cosmin Truta\n@@ -42,19 +42,5 @@\n- \/* png_info is a structure that holds the information in a PNG file so\n- * that the application can find out the characteristics of the image.\n- * If you are reading the file, this structure will tell you what is\n- * in the PNG file.  If you are writing the file, fill in the information\n- * you want to put into the PNG file, using png_set_*() functions, then\n- * call png_write_info().\n- *\n- * The names chosen should be very close to the PNG specification, so\n- * consult that document for information about the meaning of each field.\n- *\n- * With libpng < 0.95, it was only possible to directly set and read the\n- * the values in the png_info_struct, which meant that the contents and\n- * order of the values had to remain fixed.  With libpng 0.95 and later,\n- * however, there are now functions that abstract the contents of\n- * png_info_struct from the application, so this makes it easier to use\n- * libpng with dynamic libraries, and even makes it possible to use\n- * libraries that don't have all of the libpng ancillary chunk-handing\n- * functionality.  In libpng-1.5.0 this was moved into a separate private\n- * file that is not visible to applications.\n+#ifndef PNGPRIV_H\n+#  error This file must not be included by applications; please include <png.h>\n+#endif\n+\n+\/* INTERNAL, PRIVATE definition of a PNG.\n@@ -62,7 +48,3 @@\n- * The following members may have allocated storage attached that should be\n- * cleaned up before the structure is discarded: palette, trans, text,\n- * pcal_purpose, pcal_units, pcal_params, hist, iccp_name, iccp_profile,\n- * splt_palettes, scal_unit, row_pointers, and unknowns.   By default, these\n- * are automatically freed when the info structure is deallocated, if they were\n- * allocated internally by libpng.  This behavior can be changed by means\n- * of the png_data_freer() function.\n+ * png_info is a modifiable description of a PNG datastream.  The fields inside\n+ * this structure are accessed through png_get_<CHUNK>() functions and modified\n+ * using png_set_<CHUNK>() functions.\n@@ -70,9 +52,4 @@\n- * More allocation details: all the chunk-reading functions that\n- * change these members go through the corresponding png_set_*\n- * functions.  A function to clear these members is available: see\n- * png_free_data().  The png_set_* functions do not depend on being\n- * able to point info structure members to any of the storage they are\n- * passed (they make their own copies), EXCEPT that the png_set_text\n- * functions use the same storage passed to them in the text_ptr or\n- * itxt_ptr structure argument, and the png_set_rows and png_set_unknowns\n- * functions do not make their own copies.\n+ * Some functions in libpng do directly access members of png_info.  However,\n+ * this should be avoided.  png_struct objects contain members which hold\n+ * caches, sometimes optimised, of the values from png_info objects, and\n+ * png_info is not passed to the functions which read and write image data.\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/libpng\/pnginfo.h","additions":14,"deletions":37,"binary":false,"changes":51,"status":"modified"},{"patch":"@@ -34,1 +34,1 @@\n-\/* libpng version 1.6.47 *\/\n+\/* libpng version 1.6.51 *\/\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/libpng\/pnglibconf.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -32,1 +32,1 @@\n- * Copyright (c) 2018 Cosmin Truta\n+ * Copyright (c) 2018-2025 Cosmin Truta\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/libpng\/pngmem.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -32,1 +32,1 @@\n- * Copyright (c) 2018-2024 Cosmin Truta\n+ * Copyright (c) 2018-2025 Cosmin Truta\n@@ -261,0 +261,8 @@\n+   else if ((png_ptr->mode & PNG_HAVE_IDAT) != 0)\n+   {\n+      \/* These flags must be set consistently for all non-IDAT chunks,\n+       * including the unknown chunks.\n+       *\/\n+      png_ptr->mode |= PNG_HAVE_CHUNK_AFTER_IDAT | PNG_AFTER_IDAT;\n+   }\n+\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/libpng\/pngpread.c","additions":9,"deletions":1,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -32,1 +32,1 @@\n- * Copyright (c) 2018-2024 Cosmin Truta\n+ * Copyright (c) 2018-2025 Cosmin Truta\n@@ -51,0 +51,5 @@\n+\n+\/* pngpriv.h must be included first in each translation unit inside libpng.\n+ * On the other hand, it must not be included at all, directly or indirectly,\n+ * by any application code that uses the libpng API.\n+ *\/\n@@ -52,1 +57,8 @@\n-#define PNGPRIV_H\n+#  define PNGPRIV_H\n+#else\n+#  error Duplicate inclusion of pngpriv.h; please check the libpng source files\n+#endif\n+\n+#if defined(PNG_H) || defined(PNGCONF_H) || defined(PNGLCONF_H)\n+#  error This file must not be included by applications; please include <png.h>\n+#endif\n@@ -89,1 +101,0 @@\n-\n@@ -99,3 +110,1 @@\n-#ifndef PNGLCONF_H\n-#  include \"pnglibconf.h\"\n-#endif\n+#include \"pnglibconf.h\"\n@@ -166,0 +175,14 @@\n+#ifndef PNG_RISCV_RVV_OPT\n+   \/* RISCV_RVV optimizations are being controlled by the compiler settings,\n+    * typically the target compiler will define __riscv but the rvv extension\n+    * availability has to be explicitly stated. This is why if no\n+    * PNG_RISCV_RVV_OPT was defined then a runtime check will be executed.\n+    *\n+    * To enable RISCV_RVV optimizations unconditionally, and compile the\n+    * associated code, pass --enable-riscv-rvv=yes or --enable-riscv-rvv=on\n+    * to configure or put -DPNG_RISCV_RVV_OPT=2 in CPPFLAGS.\n+    *\/\n+\n+#  define PNG_RISCV_RVV_OPT 0\n+#endif\n+\n@@ -311,0 +334,10 @@\n+#if PNG_RISCV_RVV_OPT > 0 && __riscv_v >= 1000000\n+#  define PNG_FILTER_OPTIMIZATIONS png_init_filter_functions_rvv\n+#  ifndef PNG_RISCV_RVV_IMPLEMENTATION\n+      \/* Use the intrinsics code by default. *\/\n+#     define PNG_RISCV_RVV_IMPLEMENTATION 1\n+#  endif\n+#else\n+#  define PNG_RISCV_RVV_IMPLEMENTATION 0\n+#endif \/* PNG_RISCV_RVV_OPT > 0 && __riscv_v >= 1000000 *\/\n+\n@@ -709,1 +742,1 @@\n-#define PNG_FLAG_STRIP_ERROR_NUMBERS     0x40000U\n+                                  \/*     0x40000U    unused *\/\n@@ -1023,7 +1056,5 @@\n-#  error ZLIB_VERNUM != PNG_ZLIB_VERNUM \\\n-      \"-I (include path) error: see the notes in pngpriv.h\"\n-   \/* This means that when pnglibconf.h was built the copy of zlib.h that it\n-    * used is not the same as the one being used here.  Because the build of\n-    * libpng makes decisions to use inflateInit2 and inflateReset2 based on the\n-    * zlib version number and because this affects handling of certain broken\n-    * PNG files the -I directives must match.\n+#  error The include path of <zlib.h> is incorrect\n+   \/* When pnglibconf.h was built, the copy of zlib.h that it used was not the\n+    * same as the one being used here.  Considering how libpng makes decisions\n+    * to use the zlib API based on the zlib version number, the -I options must\n+    * match.\n@@ -1031,3 +1062,3 @@\n-    * The most likely explanation is that you passed a -I in CFLAGS. This will\n-    * not work; all the preprocessor directives and in particular all the -I\n-    * directives must be in CPPFLAGS.\n+    * A possible cause of this mismatch is that you passed an -I option in\n+    * CFLAGS, which is unlikely to work.  All the preprocessor options, and all\n+    * the -I options in particular, should be in CPPFLAGS.\n@@ -1547,0 +1578,17 @@\n+#if PNG_RISCV_RVV_IMPLEMENTATION == 1\n+PNG_INTERNAL_FUNCTION(void,png_read_filter_row_up_rvv,(png_row_infop\n+    row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);\n+PNG_INTERNAL_FUNCTION(void,png_read_filter_row_sub3_rvv,(png_row_infop\n+    row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);\n+PNG_INTERNAL_FUNCTION(void,png_read_filter_row_sub4_rvv,(png_row_infop\n+    row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);\n+PNG_INTERNAL_FUNCTION(void,png_read_filter_row_avg3_rvv,(png_row_infop\n+    row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);\n+PNG_INTERNAL_FUNCTION(void,png_read_filter_row_avg4_rvv,(png_row_infop\n+    row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);\n+PNG_INTERNAL_FUNCTION(void,png_read_filter_row_paeth3_rvv,(png_row_infop\n+    row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);\n+PNG_INTERNAL_FUNCTION(void,png_read_filter_row_paeth4_rvv,(png_row_infop\n+    row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);\n+#endif\n+\n@@ -2159,0 +2207,5 @@\n+#  if PNG_RISCV_RVV_IMPLEMENTATION == 1\n+PNG_INTERNAL_FUNCTION(void, png_init_filter_functions_rvv,\n+   (png_structp png_ptr, unsigned int bpp), PNG_EMPTY);\n+#endif\n+\n@@ -2194,1 +2247,0 @@\n-#endif \/* PNGPRIV_H *\/\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/libpng\/pngpriv.h","additions":70,"deletions":18,"binary":false,"changes":88,"status":"modified"},{"patch":"@@ -734,1 +734,6 @@\n-         png_ptr->mode |= PNG_HAVE_CHUNK_AFTER_IDAT;\n+      {\n+         \/* These flags must be set consistently for all non-IDAT chunks,\n+          * including the unknown chunks.\n+          *\/\n+         png_ptr->mode |= PNG_HAVE_CHUNK_AFTER_IDAT | PNG_AFTER_IDAT;\n+      }\n@@ -841,1 +846,2 @@\n-    defined(PNG_ARM_NEON_IMPLEMENTATION)\n+    (defined(PNG_ARM_NEON_IMPLEMENTATION) || \\\n+     defined(PNG_RISCV_RVV_IMPLEMENTATION))\n@@ -1360,1 +1366,1 @@\n-png_image_begin_read_from_stdio(png_imagep image, FILE* file)\n+png_image_begin_read_from_stdio(png_imagep image, FILE *file)\n@@ -3155,0 +3161,48 @@\n+\/* Row reading for interlaced 16-to-8 bit depth conversion with local buffer. *\/\n+static int\n+png_image_read_direct_scaled(png_voidp argument)\n+{\n+   png_image_read_control *display = png_voidcast(png_image_read_control*,\n+       argument);\n+   png_imagep image = display->image;\n+   png_structrp png_ptr = image->opaque->png_ptr;\n+   png_bytep local_row = png_voidcast(png_bytep, display->local_row);\n+   png_bytep first_row = png_voidcast(png_bytep, display->first_row);\n+   ptrdiff_t row_bytes = display->row_bytes;\n+   int passes;\n+\n+   \/* Handle interlacing. *\/\n+   switch (png_ptr->interlaced)\n+   {\n+      case PNG_INTERLACE_NONE:\n+         passes = 1;\n+         break;\n+\n+      case PNG_INTERLACE_ADAM7:\n+         passes = PNG_INTERLACE_ADAM7_PASSES;\n+         break;\n+\n+      default:\n+         png_error(png_ptr, \"unknown interlace type\");\n+   }\n+\n+   \/* Read each pass using local_row as intermediate buffer. *\/\n+   while (--passes >= 0)\n+   {\n+      png_uint_32 y = image->height;\n+      png_bytep output_row = first_row;\n+\n+      for (; y > 0; --y)\n+      {\n+         \/* Read into local_row (gets transformed 8-bit data). *\/\n+         png_read_row(png_ptr, local_row, NULL);\n+\n+         \/* Copy from local_row to user buffer. *\/\n+         memcpy(output_row, local_row, (size_t)row_bytes);\n+         output_row += row_bytes;\n+      }\n+   }\n+\n+   return 1;\n+}\n+\n@@ -3573,0 +3627,1 @@\n+   int do_local_scale = 0; \/* for interlaced 16-to-8 bit conversion *\/\n@@ -3706,0 +3761,1 @@\n+         {\n@@ -3708,0 +3764,7 @@\n+            \/* For interlaced images, use local_row buffer to avoid overflow\n+             * in png_combine_row() which writes using IHDR bit-depth.\n+             *\/\n+            if (png_ptr->interlaced != 0)\n+               do_local_scale = 1;\n+         }\n+\n@@ -3983,0 +4046,18 @@\n+   else if (do_local_scale != 0)\n+   {\n+      \/* For interlaced 16-to-8 conversion, use an intermediate row buffer\n+       * to avoid buffer overflows in png_combine_row. The local_row is sized\n+       * for the transformed (8-bit) output, preventing the overflow that would\n+       * occur if png_combine_row wrote 16-bit data directly to the user buffer.\n+       *\/\n+      int result;\n+      png_voidp row = png_malloc(png_ptr, png_get_rowbytes(png_ptr, info_ptr));\n+\n+      display->local_row = row;\n+      result = png_safe_execute(image, png_image_read_direct_scaled, display);\n+      display->local_row = NULL;\n+      png_free(png_ptr, row);\n+\n+      return result;\n+   }\n+\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/libpng\/pngread.c","additions":84,"deletions":3,"binary":false,"changes":87,"status":"modified"},{"patch":"@@ -32,1 +32,1 @@\n- * Copyright (c) 2018 Cosmin Truta\n+ * Copyright (c) 2018-2025 Cosmin Truta\n@@ -88,1 +88,1 @@\n-   check = fread(data, 1, length, png_voidcast(png_FILE_p, png_ptr->io_ptr));\n+   check = fread(data, 1, length, png_voidcast(FILE *, png_ptr->io_ptr));\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/libpng\/pngrio.c","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -32,1 +32,1 @@\n- * Copyright (c) 2018-2024 Cosmin Truta\n+ * Copyright (c) 2018-2025 Cosmin Truta\n@@ -60,0 +60,6 @@\n+#ifdef PNG_RISCV_RVV_IMPLEMENTATION\n+#  if PNG_RISCV_RVV_IMPLEMENTATION == 1\n+#    define PNG_RISCV_RVV_INTRINSICS_AVAILABLE\n+#  endif\n+#endif\n+\n@@ -527,0 +533,10 @@\n+      \/* Initialize the array to index colors.\n+       *\n+       * Ensure quantize_index can fit 256 elements (PNG_MAX_PALETTE_LENGTH)\n+       * rather than num_palette elements. This is to prevent buffer overflows\n+       * caused by malformed PNG files with out-of-range palette indices.\n+       *\n+       * Be careful to avoid leaking memory. Applications are allowed to call\n+       * this function more than once per png_struct.\n+       *\/\n+      png_free(png_ptr, png_ptr->quantize_index);\n@@ -528,2 +544,2 @@\n-          (png_alloc_size_t)num_palette);\n-      for (i = 0; i < num_palette; i++)\n+          PNG_MAX_PALETTE_LENGTH);\n+      for (i = 0; i < PNG_MAX_PALETTE_LENGTH; i++)\n@@ -541,1 +557,2 @@\n-         int i;\n+         png_bytep quantize_sort;\n+         int i, j;\n@@ -543,2 +560,2 @@\n-         \/* Initialize an array to sort colors *\/\n-         png_ptr->quantize_sort = (png_bytep)png_malloc(png_ptr,\n+         \/* Initialize the local array to sort colors. *\/\n+         quantize_sort = (png_bytep)png_malloc(png_ptr,\n@@ -546,2 +563,0 @@\n-\n-         \/* Initialize the quantize_sort array *\/\n@@ -549,1 +564,1 @@\n-            png_ptr->quantize_sort[i] = (png_byte)i;\n+            quantize_sort[i] = (png_byte)i;\n@@ -561,1 +576,0 @@\n-            int j;\n@@ -566,2 +580,2 @@\n-               if (histogram[png_ptr->quantize_sort[j]]\n-                   < histogram[png_ptr->quantize_sort[j + 1]])\n+               if (histogram[quantize_sort[j]]\n+                   < histogram[quantize_sort[j + 1]])\n@@ -571,3 +585,3 @@\n-                  t = png_ptr->quantize_sort[j];\n-                  png_ptr->quantize_sort[j] = png_ptr->quantize_sort[j + 1];\n-                  png_ptr->quantize_sort[j + 1] = t;\n+                  t = quantize_sort[j];\n+                  quantize_sort[j] = quantize_sort[j + 1];\n+                  quantize_sort[j + 1] = t;\n@@ -585,1 +599,1 @@\n-            int j = num_palette;\n+            j = num_palette;\n@@ -592,1 +606,1 @@\n-               if ((int)png_ptr->quantize_sort[i] >= maximum_colors)\n+               if ((int)quantize_sort[i] >= maximum_colors)\n@@ -596,1 +610,1 @@\n-                  while ((int)png_ptr->quantize_sort[j] >= maximum_colors);\n+                  while ((int)quantize_sort[j] >= maximum_colors);\n@@ -604,1 +618,1 @@\n-            int j = num_palette;\n+            j = num_palette;\n@@ -612,1 +626,1 @@\n-               if ((int)png_ptr->quantize_sort[i] >= maximum_colors)\n+               if ((int)quantize_sort[i] >= maximum_colors)\n@@ -618,1 +632,1 @@\n-                  while ((int)png_ptr->quantize_sort[j] >= maximum_colors);\n+                  while ((int)quantize_sort[j] >= maximum_colors);\n@@ -656,2 +670,1 @@\n-         png_free(png_ptr, png_ptr->quantize_sort);\n-         png_ptr->quantize_sort = NULL;\n+         png_free(png_ptr, quantize_sort);\n@@ -1800,13 +1813,45 @@\n-                     png_byte v, w;\n-\n-                     v = png_ptr->gamma_to_1[palette[i].red];\n-                     png_composite(w, v, png_ptr->trans_alpha[i], back_1.red);\n-                     palette[i].red = png_ptr->gamma_from_1[w];\n-\n-                     v = png_ptr->gamma_to_1[palette[i].green];\n-                     png_composite(w, v, png_ptr->trans_alpha[i], back_1.green);\n-                     palette[i].green = png_ptr->gamma_from_1[w];\n-\n-                     v = png_ptr->gamma_to_1[palette[i].blue];\n-                     png_composite(w, v, png_ptr->trans_alpha[i], back_1.blue);\n-                     palette[i].blue = png_ptr->gamma_from_1[w];\n+                     if ((png_ptr->flags & PNG_FLAG_OPTIMIZE_ALPHA) != 0)\n+                     {\n+                        \/* Premultiply only:\n+                         * component = round((component * alpha) \/ 255)\n+                         *\/\n+                        png_uint_32 component;\n+\n+                        component = png_ptr->gamma_to_1[palette[i].red];\n+                        component =\n+                            (component * png_ptr->trans_alpha[i] + 128) \/ 255;\n+                        palette[i].red = png_ptr->gamma_from_1[component];\n+\n+                        component = png_ptr->gamma_to_1[palette[i].green];\n+                        component =\n+                            (component * png_ptr->trans_alpha[i] + 128) \/ 255;\n+                        palette[i].green = png_ptr->gamma_from_1[component];\n+\n+                        component = png_ptr->gamma_to_1[palette[i].blue];\n+                        component =\n+                            (component * png_ptr->trans_alpha[i] + 128) \/ 255;\n+                        palette[i].blue = png_ptr->gamma_from_1[component];\n+                     }\n+                     else\n+                     {\n+                        \/* Composite with background color:\n+                         * component =\n+                         *    alpha * component + (1 - alpha) * background\n+                         *\/\n+                        png_byte v, w;\n+\n+                        v = png_ptr->gamma_to_1[palette[i].red];\n+                        png_composite(w, v,\n+                            png_ptr->trans_alpha[i], back_1.red);\n+                        palette[i].red = png_ptr->gamma_from_1[w];\n+\n+                        v = png_ptr->gamma_to_1[palette[i].green];\n+                        png_composite(w, v,\n+                            png_ptr->trans_alpha[i], back_1.green);\n+                        palette[i].green = png_ptr->gamma_from_1[w];\n+\n+                        v = png_ptr->gamma_to_1[palette[i].blue];\n+                        png_composite(w, v,\n+                            png_ptr->trans_alpha[i], back_1.blue);\n+                        palette[i].blue = png_ptr->gamma_from_1[w];\n+                     }\n@@ -5035,1 +5080,0 @@\n-   {\n@@ -5038,4 +5082,0 @@\n-\n-      if (row_info->rowbytes == 0)\n-         png_error(png_ptr, \"png_do_quantize returned rowbytes=0\");\n-   }\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/libpng\/pngrtran.c","additions":81,"deletions":41,"binary":false,"changes":122,"status":"modified"},{"patch":"@@ -32,1 +32,1 @@\n- * Copyright (c) 2018-2024 Cosmin Truta\n+ * Copyright (c) 2018-2025 Cosmin Truta\n@@ -2444,4 +2444,0 @@\n-   \/* TODO: this doesn't work and shouldn't be necessary. *\/\n-   if ((png_ptr->mode & PNG_HAVE_IDAT) != 0)\n-      png_ptr->mode |= PNG_AFTER_IDAT;\n-\n@@ -2518,4 +2514,0 @@\n-   \/* TODO: should not be necessary. *\/\n-   if ((png_ptr->mode & PNG_HAVE_IDAT) != 0)\n-      png_ptr->mode |= PNG_AFTER_IDAT;\n-\n@@ -2638,4 +2630,0 @@\n-   \/* TODO: should not be necessary. *\/\n-   if ((png_ptr->mode & PNG_HAVE_IDAT) != 0)\n-      png_ptr->mode |= PNG_AFTER_IDAT;\n-\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/libpng\/pngrutil.c","additions":1,"deletions":13,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -332,11 +332,8 @@\n-      \/* The ITU approach is to scale by 50,000, not 100,000 so just divide\n-       * the input values by 2 and use png_fixed:\n-       *\/\n-      png_fixed(png_ptr, white_x \/ 2, \"png_set_mDCV(white(x))\"),\n-      png_fixed(png_ptr, white_y \/ 2, \"png_set_mDCV(white(y))\"),\n-      png_fixed(png_ptr, red_x \/ 2, \"png_set_mDCV(red(x))\"),\n-      png_fixed(png_ptr, red_y \/ 2, \"png_set_mDCV(red(y))\"),\n-      png_fixed(png_ptr, green_x \/ 2, \"png_set_mDCV(green(x))\"),\n-      png_fixed(png_ptr, green_y \/ 2, \"png_set_mDCV(green(y))\"),\n-      png_fixed(png_ptr, blue_x \/ 2, \"png_set_mDCV(blue(x))\"),\n-      png_fixed(png_ptr, blue_y \/ 2, \"png_set_mDCV(blue(y))\"),\n+      png_fixed(png_ptr, white_x, \"png_set_mDCV(white(x))\"),\n+      png_fixed(png_ptr, white_y, \"png_set_mDCV(white(y))\"),\n+      png_fixed(png_ptr, red_x, \"png_set_mDCV(red(x))\"),\n+      png_fixed(png_ptr, red_y, \"png_set_mDCV(red(y))\"),\n+      png_fixed(png_ptr, green_x, \"png_set_mDCV(green(x))\"),\n+      png_fixed(png_ptr, green_y, \"png_set_mDCV(green(y))\"),\n+      png_fixed(png_ptr, blue_x, \"png_set_mDCV(blue(x))\"),\n+      png_fixed(png_ptr, blue_y, \"png_set_mDCV(blue(y))\"),\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/libpng\/pngset.c","additions":8,"deletions":11,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -25,1 +25,1 @@\n-\/* pngstruct.h - header file for PNG reference library\n+\/* pngstruct.h - internal structures for libpng\n@@ -32,1 +32,1 @@\n- * Copyright (c) 2018-2022 Cosmin Truta\n+ * Copyright (c) 2018-2025 Cosmin Truta\n@@ -42,5 +42,3 @@\n-\/* The structure that holds the information to read and write PNG files.\n- * The only people who need to care about what is inside of this are the\n- * people who will be modifying the library for their own special needs.\n- * It should NOT be accessed directly by an application.\n- *\/\n+#ifndef PNGPRIV_H\n+#  error This file must not be included by applications; please include <png.h>\n+#endif\n@@ -409,1 +407,2 @@\n-    defined(PNG_ARM_NEON_IMPLEMENTATION)\n+    (defined(PNG_ARM_NEON_IMPLEMENTATION) || \\\n+     defined(PNG_RISCV_RVV_IMPLEMENTATION))\n@@ -438,1 +437,0 @@\n-   png_bytep quantize_sort;          \/* working sort array *\/\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/libpng\/pngstruct.h","additions":7,"deletions":9,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -141,2 +141,0 @@\n-import sun.awt.screencast.ScreencastHelper;\n-import sun.awt.screencast.XdgDesktopPortal;\n@@ -1526,2 +1524,9 @@\n-                if (XdgDesktopPortal.isRemoteDesktop()\n-                        && ScreencastHelper.isAvailable()) {\n+                numberOfButtons = getNumberOfButtonsImpl();\n+                numberOfButtons = (numberOfButtons > MAX_BUTTONS_SUPPORTED) ? MAX_BUTTONS_SUPPORTED : numberOfButtons;\n+                \/\/4th and 5th buttons are for wheel and shouldn't be reported as buttons.\n+                \/\/If we have more than 3 physical buttons and a wheel, we report N-2 buttons.\n+                \/\/If we have 3 physical buttons and a wheel, we report 3 buttons.\n+                \/\/If we have 1,2,3 physical buttons, we report it as is i.e. 1,2 or 3 respectively.\n+                if (numberOfButtons >= 5) {\n+                    numberOfButtons -= 2;\n+                } else if (numberOfButtons == 4 || numberOfButtons == 5) {\n@@ -1529,12 +1534,0 @@\n-                } else {\n-                    numberOfButtons = getNumberOfButtonsImpl();\n-                    numberOfButtons = (numberOfButtons > MAX_BUTTONS_SUPPORTED) ? MAX_BUTTONS_SUPPORTED : numberOfButtons;\n-                    \/\/4th and 5th buttons are for wheel and shouldn't be reported as buttons.\n-                    \/\/If we have more than 3 physical buttons and a wheel, we report N-2 buttons.\n-                    \/\/If we have 3 physical buttons and a wheel, we report 3 buttons.\n-                    \/\/If we have 1,2,3 physical buttons, we report it as is i.e. 1,2 or 3 respectively.\n-                    if (numberOfButtons >= 5) {\n-                        numberOfButtons -= 2;\n-                    } else if (numberOfButtons == 4 || numberOfButtons == 5) {\n-                        numberOfButtons = 3;\n-                    }\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/X11\/XToolkit.java","additions":9,"deletions":16,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -1101,2 +1101,0 @@\n-        updateFocusability();\n-        promoteDefaultPosition();\n@@ -1104,0 +1102,4 @@\n+        if (refreshChildsTransientFor) {\n+            updateFocusability();\n+        }\n+        promoteDefaultPosition();\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/X11\/XWindowPeer.java","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -66,2 +66,0 @@\n-    private static final Timer timerCloseSession\n-            = new Timer(\"auto-close screencast session\", true);\n@@ -69,0 +67,4 @@\n+    private static class TimerHolder {\n+        private static final Timer timerCloseSession =\n+                new Timer(\"auto-close screencast session\", true);\n+    }\n@@ -146,1 +148,1 @@\n-        timerCloseSession.schedule(timerTask, DELAY_BEFORE_SESSION_CLOSE);\n+        TimerHolder.timerCloseSession.schedule(timerTask, DELAY_BEFORE_SESSION_CLOSE);\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/screencast\/ScreencastHelper.java","additions":5,"deletions":3,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -241,0 +241,1 @@\n+    private static volatile boolean isWatcherThreadStarted = false;\n@@ -260,4 +261,0 @@\n-\n-        if (watchService != null) {\n-            new WatcherThread(watchService).start();\n-        }\n@@ -340,0 +337,18 @@\n+    private static void startWatcherThreadIfNeeded() {\n+        if (!isWatcherThreadStarted) {\n+            \/\/ not sure if the double-checked locking is actually needed here\n+            \/\/ the getTokens is only called from ScreencastHelper#getRGBPixels\n+            \/\/ and ScreencastHelper#remoteDesktop* methods (which are synchronized),\n+            \/\/ but it may change later.\n+            synchronized (TokenStorage.class) {\n+                if (!isWatcherThreadStarted) {\n+                    readTokens(PROPS_PATH);\n+                    if (watchService != null) {\n+                        new WatcherThread(watchService).start();\n+                    }\n+                    isWatcherThreadStarted = true;\n+                }\n+            }\n+        }\n+    }\n+\n@@ -341,0 +356,2 @@\n+        startWatcherThreadIfNeeded();\n+\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/screencast\/TokenStorage.java","additions":21,"deletions":4,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -45,1 +45,0 @@\n-static void *gthread_libhandle = NULL;\n@@ -82,9 +81,0 @@\n-static void* dl_symbol_gthread(const char* name)\n-{\n-    void* result = dlsym(gthread_libhandle, name);\n-    if (!result)\n-        longjmp(j, NO_SYMBOL_EXCEPTION);\n-\n-    return result;\n-}\n-\n@@ -267,7 +257,0 @@\n-    gthread_libhandle = dlopen(GTHREAD_LIB_VERSIONED, RTLD_LAZY | RTLD_LOCAL);\n-    if (gthread_libhandle == NULL) {\n-        gthread_libhandle = dlopen(GTHREAD_LIB, RTLD_LAZY | RTLD_LOCAL);\n-        if (gthread_libhandle == NULL)\n-            return FALSE;\n-    }\n-\n@@ -640,3 +623,0 @@\n-        dlclose(gthread_libhandle);\n-        gthread_libhandle = NULL;\n-\n@@ -741,1 +721,0 @@\n-    dlclose(gthread_libhandle);\n","filename":"src\/java.desktop\/unix\/native\/libawt_xawt\/awt\/gtk3_interface.c","additions":0,"deletions":21,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -41,3 +41,0 @@\n-#define GTHREAD_LIB_VERSIONED VERSIONED_JNI_LIB_NAME(\"gthread-2.0\", \"0\")\n-#define GTHREAD_LIB JNI_LIB_NAME(\"gthread-2.0\")\n-\n@@ -853,3 +850,0 @@\n-typedef struct _GThreadFunctions GThreadFunctions;\n-static gboolean (*fp_g_thread_get_initialized)(void);\n-static void (*fp_g_thread_init)(GThreadFunctions *vtable);\n","filename":"src\/java.desktop\/unix\/native\/libawt_xawt\/awt\/gtk_interface.h","additions":0,"deletions":6,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -311,1 +311,1 @@\n-                    times[0] = thread.isVirtual() ? -1L : getThreadTotalCpuTime0(0);\n+                    times[0] = thread.isVirtual() ? -1L : getThreadUserCpuTime0(0);\n","filename":"src\/java.management\/share\/classes\/sun\/management\/ThreadImpl.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,1 +29,1 @@\n- * @LastModified: Feb 2023\n+ * @LastModified: Sept 2025\n@@ -34,1 +34,1 @@\n-     * Java class file format Magic number (0xCAFEBABE)\n+     * Java class file format Magic number: {@value}.\n@@ -42,1 +42,1 @@\n-     * Major version number of class files for Java 1.1.\n+     * Major version number of class files for Java 1.1: {@value}.\n@@ -49,1 +49,1 @@\n-     * Minor version number of class files for Java 1.1.\n+     * Minor version number of class files for Java 1.1: {@value}.\n@@ -56,1 +56,1 @@\n-     * Major version number of class files for Java 1.2.\n+     * Major version number of class files for Java 1.2: {@value}.\n@@ -63,1 +63,1 @@\n-     * Minor version number of class files for Java 1.2.\n+     * Minor version number of class files for Java 1.2: {@value}.\n@@ -70,1 +70,1 @@\n-     * Major version number of class files for Java 1.2.\n+     * Major version number of class files for Java 1.2: {@value}.\n@@ -77,1 +77,1 @@\n-     * Minor version number of class files for Java 1.3.\n+     * Minor version number of class files for Java 1.3: {@value}.\n@@ -84,1 +84,1 @@\n-     * Major version number of class files for Java 1.3.\n+     * Major version number of class files for Java 1.3: {@value}.\n@@ -91,1 +91,1 @@\n-     * Minor version number of class files for Java 1.4.\n+     * Minor version number of class files for Java 1.4: {@value}.\n@@ -98,1 +98,1 @@\n-     * Major version number of class files for Java 1.4.\n+     * Major version number of class files for Java 1.4: {@value}.\n@@ -105,1 +105,1 @@\n-     * Minor version number of class files for Java 1.5.\n+     * Minor version number of class files for Java 1.5: {@value}.\n@@ -112,1 +112,1 @@\n-     * Major version number of class files for Java 1.6.\n+     * Major version number of class files for Java 1.6: {@value}.\n@@ -119,1 +119,1 @@\n-     * Minor version number of class files for Java 1.6.\n+     * Minor version number of class files for Java 1.6: {@value}.\n@@ -126,1 +126,1 @@\n-     * Major version number of class files for Java 1.7.\n+     * Major version number of class files for Java 1.7: {@value}.\n@@ -133,1 +133,1 @@\n-     * Minor version number of class files for Java 1.7.\n+     * Minor version number of class files for Java 1.7: {@value}.\n@@ -140,1 +140,1 @@\n-     * Major version number of class files for Java 1.8.\n+     * Major version number of class files for Java 1.8: {@value}.\n@@ -147,1 +147,1 @@\n-     * Minor version number of class files for Java 1.8.\n+     * Minor version number of class files for Java 1.8: {@value}.\n@@ -154,1 +154,1 @@\n-     * Major version number of class files for Java 9.\n+     * Major version number of class files for Java 9: {@value}.\n@@ -161,1 +161,1 @@\n-     * Minor version number of class files for Java 9.\n+     * Minor version number of class files for Java 9: {@value}.\n@@ -168,1 +168,1 @@\n-     * @deprecated Use {@link #MAJOR_9} instead\n+     * @deprecated Use {@link #MAJOR_9} ({@value}) instead.\n@@ -174,1 +174,1 @@\n-     * @deprecated Use {@link #MINOR_9} instead\n+     * @deprecated Use {@link #MINOR_9} ({@value}) instead.\n@@ -180,1 +180,1 @@\n-     * Major version number of class files for Java 10.\n+     * Major version number of class files for Java 10: {@value}.\n@@ -187,1 +187,1 @@\n-     * Minor version number of class files for Java 10.\n+     * Minor version number of class files for Java 10: {@value}.\n@@ -194,1 +194,1 @@\n-     * Major version number of class files for Java 11.\n+     * Major version number of class files for Java 11: {@value}.\n@@ -201,1 +201,1 @@\n-     * Minor version number of class files for Java 11.\n+     * Minor version number of class files for Java 11: {@value}.\n@@ -208,1 +208,1 @@\n-     * Major version number of class files for Java 12.\n+     * Major version number of class files for Java 12: {@value}.\n@@ -215,1 +215,1 @@\n-     * Minor version number of class files for Java 12.\n+     * Minor version number of class files for Java 12: {@value}.\n@@ -222,1 +222,1 @@\n-     * Major version number of class files for Java 13.\n+     * Major version number of class files for Java 13: {@value}.\n@@ -229,1 +229,1 @@\n-     * Minor version number of class files for Java 13.\n+     * Minor version number of class files for Java 13: {@value}.\n@@ -236,1 +236,1 @@\n-     * Minor version number of class files for Java 14.\n+     * Minor version number of class files for Java 14: {@value}.\n@@ -244,1 +244,1 @@\n-     * Minor version number of class files for Java 15.\n+     * Minor version number of class files for Java 15: {@value}.\n@@ -252,1 +252,1 @@\n-     * Minor version number of class files for Java 16.\n+     * Minor version number of class files for Java 16: {@value}.\n@@ -260,1 +260,1 @@\n-     * Minor version number of class files for Java 17.\n+     * Minor version number of class files for Java 17: {@value}.\n@@ -268,1 +268,1 @@\n-     * Minor version number of class files for Java 18.\n+     * Minor version number of class files for Java 18: {@value}.\n@@ -276,1 +276,1 @@\n-     * Minor version number of class files for Java 19.\n+     * Minor version number of class files for Java 19: {@value}.\n@@ -284,1 +284,41 @@\n-     * Major version number of class files for Java 14.\n+     * Minor version number of class files for Java 20: {@value}.\n+     *\n+     * @see #MAJOR_20\n+     * @since 6.8.0\n+     *\/\n+    public static final short MINOR_20 = 0;\n+\n+    \/**\n+     * Minor version number of class files for Java 21: {@value}.\n+     *\n+     * @see #MAJOR_21\n+     * @since 6.8.0\n+     *\/\n+    public static final short MINOR_21 = 0;\n+\n+    \/**\n+     * Minor version number of class files for Java 22: {@value}.\n+     *\n+     * @see #MAJOR_22\n+     * @since 6.10.0\n+     *\/\n+    public static final short MINOR_22 = 0;\n+\n+    \/**\n+     * Minor version number of class files for Java 23: {@value}.\n+     *\n+     * @see #MAJOR_23\n+     * @since 6.10.0\n+     *\/\n+    public static final short MINOR_23 = 0;\n+\n+    \/**\n+     * Minor version number of class files for Java 24: {@value}.\n+     *\n+     * @see #MAJOR_24\n+     * @since 6.10.0\n+     *\/\n+    public static final short MINOR_24 = 0;\n+\n+    \/**\n+     * Major version number of class files for Java 14: {@value}.\n@@ -292,1 +332,1 @@\n-     * Major version number of class files for Java 15.\n+     * Major version number of class files for Java 15: {@value}.\n@@ -300,1 +340,1 @@\n-     * Major version number of class files for Java 16.\n+     * Major version number of class files for Java 16: {@value}.\n@@ -308,1 +348,1 @@\n-     * Major version number of class files for Java 17.\n+     * Major version number of class files for Java 17: {@value}.\n@@ -316,1 +356,1 @@\n-     * Major version number of class files for Java 18.\n+     * Major version number of class files for Java 18: {@value}.\n@@ -324,1 +364,1 @@\n-     * Major version number of class files for Java 19.\n+     * Major version number of class files for Java 19: {@value}.\n@@ -332,1 +372,41 @@\n-     * Default major version number. Class file is for Java 1.1.\n+     * Major version number of class files for Java 20: {@value}.\n+     *\n+     * @see #MINOR_20\n+     * @since 6.8.0\n+     *\/\n+    public static final short MAJOR_20 = 64;\n+\n+    \/**\n+     * Major version number of class files for Java 21: {@value}.\n+     *\n+     * @see #MINOR_21\n+     * @since 6.8.0\n+     *\/\n+    public static final short MAJOR_21 = 65;\n+\n+    \/**\n+     * Major version number of class files for Java 22: {@value}.\n+     *\n+     * @see #MINOR_22\n+     * @since 6.10.0\n+     *\/\n+    public static final short MAJOR_22 = 66;\n+\n+    \/**\n+     * Major version number of class files for Java 23: {@value}.\n+     *\n+     * @see #MINOR_23\n+     * @since 6.10.0\n+     *\/\n+    public static final short MAJOR_23 = 67;\n+\n+    \/**\n+     * Major version number of class files for Java 24: {@value}.\n+     *\n+     * @see #MINOR_24\n+     * @since 6.10.0\n+     *\/\n+    public static final short MAJOR_24 = 68;\n+\n+    \/**\n+     * Default major version number. Class file is for Java 1.1: {@value}.\n@@ -339,1 +419,1 @@\n-     * Default major version number. Class file is for Java 1.1.\n+     * Default major version number. Class file is for Java 1.1: {@value}.\n@@ -346,1 +426,1 @@\n-     * Maximum value for an unsigned short.\n+     * Maximum value for an unsigned short: {@value}.\n@@ -351,1 +431,1 @@\n-     * Maximum value for an unsigned byte.\n+     * Maximum value for an unsigned byte: {@value}.\n@@ -356,1 +436,1 @@\n-     * One of the access flags for fields, methods, or classes.\n+     * One of the access flags for fields, methods, or classes: {@value}.\n@@ -370,1 +450,1 @@\n-     * One of the access flags for fields, methods, or classes.\n+     * One of the access flags for fields, methods, or classes: {@value}.\n@@ -377,1 +457,1 @@\n-     * One of the access flags for fields, methods, or classes.\n+     * One of the access flags for fields, methods, or classes: {@value}.\n@@ -384,1 +464,1 @@\n-     * One of the access flags for fields, methods, or classes.\n+     * One of the access flags for fields, methods, or classes: {@value}.\n@@ -391,1 +471,1 @@\n-     * One of the access flags for fields, methods, or classes.\n+     * One of the access flags for fields, methods, or classes: {@value}.\n@@ -398,1 +478,1 @@\n-     * One of the access flags for the Module attribute.\n+     * One of the access flags for the Module attribute: {@value}.\n@@ -405,1 +485,1 @@\n-     * One of the access flags for classes.\n+     * One of the access flags for classes: {@value}.\n@@ -412,1 +492,1 @@\n-     * One of the access flags for methods.\n+     * One of the access flags for methods: {@value}.\n@@ -419,1 +499,1 @@\n-     * One of the access flags for the Module attribute.\n+     * One of the access flags for the Module attribute: {@value}.\n@@ -426,1 +506,1 @@\n-     * One of the access flags for methods.\n+     * One of the access flags for methods: {@value}.\n@@ -433,1 +513,1 @@\n-     * One of the access flags for the Module attribute.\n+     * One of the access flags for the Module attribute: {@value}.\n@@ -440,1 +520,1 @@\n-     * One of the access flags for fields.\n+     * One of the access flags for fields: {@value}.\n@@ -447,1 +527,1 @@\n-     * One of the access flags for fields.\n+     * One of the access flags for fields: {@value}.\n@@ -454,1 +534,1 @@\n-     * One of the access flags for methods.\n+     * One of the access flags for methods: {@value}.\n@@ -461,1 +541,1 @@\n-     * One of the access flags for methods.\n+     * One of the access flags for methods: {@value}.\n@@ -468,1 +548,1 @@\n-     * One of the access flags for classes.\n+     * One of the access flags for classes: {@value}.\n@@ -475,1 +555,1 @@\n-     * One of the access flags for methods or classes.\n+     * One of the access flags for methods or classes: {@value}.\n@@ -482,1 +562,1 @@\n-     * One of the access flags for methods.\n+     * One of the access flags for methods: {@value}.\n@@ -489,1 +569,1 @@\n-     * One of the access flags for fields, methods, classes, MethodParameter attribute, or Module attribute.\n+     * One of the access flags for fields, methods, classes, MethodParameter attribute, or Module attribute: {@value}.\n@@ -496,1 +576,1 @@\n-     * One of the access flags for classes.\n+     * One of the access flags for classes: {@value}.\n@@ -503,1 +583,1 @@\n-     * One of the access flags for fields or classes.\n+     * One of the access flags for fields or classes: {@value}.\n@@ -511,1 +591,1 @@\n-     * One of the access flags for MethodParameter or Module attributes.\n+     * One of the access flags for MethodParameter or Module attributes: {@value}.\n@@ -518,1 +598,1 @@\n-     * One of the access flags for classes.\n+     * One of the access flags for classes: {@value}.\n@@ -525,1 +605,1 @@\n-     * One of the access flags for fields, methods, or classes.\n+     * One of the access flags for fields, methods, or classes: {@value}.\n@@ -534,1 +614,1 @@\n-     * One of the access flags for fields, methods, or classes. ACC_MODULE is negative as a short.\n+     * One of the access flags for fields, methods, or classes. ACC_MODULE is negative as a short: {@value}.\n@@ -556,1 +636,1 @@\n-     * Marks a constant pool entry as type UTF-8.\n+     * Marks a constant pool entry as type UTF-8: {@value}.\n@@ -569,1 +649,1 @@\n-     * Marks a constant pool entry as type Integer.\n+     * Marks a constant pool entry as type Integer: {@value}.\n@@ -577,1 +657,1 @@\n-     * Marks a constant pool entry as type Float.\n+     * Marks a constant pool entry as type Float: {@value}.\n@@ -585,1 +665,1 @@\n-     * Marks a constant pool entry as type Long.\n+     * Marks a constant pool entry as type Long: {@value}.\n@@ -593,1 +673,1 @@\n-     * Marks a constant pool entry as type Double.\n+     * Marks a constant pool entry as type Double: {@value}.\n@@ -601,1 +681,1 @@\n-     * Marks a constant pool entry as a Class\n+     * Marks a constant pool entry as a Class: {@value}.\n@@ -609,1 +689,1 @@\n-     * Marks a constant pool entry as a Field Reference.\n+     * Marks a constant pool entry as a Field Reference: {@value}.\n@@ -617,1 +697,1 @@\n-     * Marks a constant pool entry as type String\n+     * Marks a constant pool entry as type String: {@value}.\n@@ -625,1 +705,1 @@\n-     * Marks a constant pool entry as a Method Reference.\n+     * Marks a constant pool entry as a Method Reference: {@value}.\n@@ -633,1 +713,1 @@\n-     * Marks a constant pool entry as an Interface Method Reference.\n+     * Marks a constant pool entry as an Interface Method Reference: {@value}.\n@@ -641,1 +721,1 @@\n-     * Marks a constant pool entry as a name and type.\n+     * Marks a constant pool entry as a name and type: {@value}.\n@@ -649,1 +729,1 @@\n-     * Marks a constant pool entry as a Method Handle.\n+     * Marks a constant pool entry as a Method Handle: {@value}.\n@@ -657,1 +737,1 @@\n-     * Marks a constant pool entry as a Method Type.\n+     * Marks a constant pool entry as a Method Type: {@value}.\n@@ -665,1 +745,1 @@\n-     * Marks a constant pool entry as dynamically computed.\n+     * Marks a constant pool entry as dynamically computed: {@value}.\n@@ -667,2 +747,2 @@\n-     * @see <a href=\"https:\/\/bugs.openjdk.java.net\/secure\/attachment\/74618\/constant-dynamic.html\"> Change request for JEP\n-     *      309<\/a>\n+     * @see <a href=\"https:\/\/docs.oracle.com\/javase\/specs\/jvms\/se11\/html\/jvms-4.html#jvms-4.4.10\"> The Constant Pool in The\n+     *      Java Virtual Machine Specification<\/a>\n@@ -674,1 +754,1 @@\n-     * Marks a constant pool entry as an Invoke Dynamic\n+     * Marks a constant pool entry as an Invoke Dynamic: {@value}.\n@@ -682,1 +762,1 @@\n-     * Marks a constant pool entry as a Module Reference.\n+     * Marks a constant pool entry as a Module Reference: {@value}.\n@@ -691,1 +771,1 @@\n-     * Marks a constant pool entry as a Package Reference.\n+     * Marks a constant pool entry as a Package Reference: {@value}.\n@@ -708,1 +788,1 @@\n-     * initialization method&quot;. This is &quot;&lt;clinit&gt;&quot;.\n+     * initialization method&quot;. This is {@value}.\n@@ -714,1 +794,1 @@\n-     * &quot;&lt;init&gt;&quot;.\n+     * {@value}.\n@@ -719,1 +799,1 @@\n-     * The names of the interfaces implemented by arrays\n+     * The names of the interfaces implemented by arrays.\n@@ -724,1 +804,1 @@\n-     * Maximum Constant Pool entries. One of the limitations of the Java Virtual Machine.\n+     * Maximum Constant Pool entries: {@value}. One of the limitations of the Java Virtual Machine.\n@@ -732,7 +812,11 @@\n-     * Maximum code size (plus one; the code size must be LESS than this) One of the limitations of the Java Virtual\n-     * Machine. Note vmspec2 page 152 (\"Limitations\") says: \"The amount of code per non-native, non-abstract method is\n-     * limited to 65536 bytes by the sizes of the indices in the exception_table of the Code attribute (4.7.3), in the\n-     * LineNumberTable attribute (4.7.8), and in the LocalVariableTable attribute (4.7.9).\" However this should be taken\n-     * as an upper limit rather than the defined maximum. On page 134 (4.8.1 Static Constants) of the same spec, it says:\n-     * \"The value of the code_length item must be less than 65536.\" The entry in the Limitations section has been removed\n-     * from later versions of the spec; it is not present in the Java SE 8 edition.\n+     * Maximum code size (plus one; the code size must be LESS than this): {@value}.\n+     * <p>\n+     * One of the limitations of the Java Virtual Machine. Note vmspec2 page 152 (\"Limitations\") says:\n+     * <\/p>\n+     * <pre>\"The amount of code per non-native, non-abstract method is limited to 65536 bytes by the sizes of the indices in the exception_table of the Code\n+     * attribute (4.7.3), in the LineNumberTable attribute (4.7.8), and in the LocalVariableTable attribute (4.7.9).\" However this should be taken as an\n+     * upper limit rather than the defined maximum. On page 134 (4.8.1 Static Constants) of the same spec, it says: \"The value of the code_length item must be\n+     * less than 65536.\"<\/pre>\n+     * <p>\n+     * The entry in the Limitations section has been removed from later versions of the specification; it is not present in the Java SE 8 edition.\n+     * <\/p>\n@@ -740,2 +824,2 @@\n-     * @see <a href=\"https:\/\/docs.oracle.com\/javase\/specs\/jvms\/se8\/html\/jvms-4.html#jvms-4.7.3-300-E\"> The Java Virtual\n-     *      Machine Specification, Java SE 8 Edition, page 104, chapter 4.7.<\/a>\n+     * @see <a href=\"https:\/\/docs.oracle.com\/javase\/specs\/jvms\/se8\/html\/jvms-4.html#jvms-4.7.3-300-E\"> The Java Virtual Machine Specification, Java SE 8\n+     *      Edition, page 104, chapter 4.7.<\/a>\n@@ -746,1 +830,1 @@\n-     * The maximum number of dimensions in an array ({@value}). One of the limitations of the Java Virtual Machine.\n+     * The maximum number of dimensions in an array: {@value}. One of the limitations of the Java Virtual Machine.\n@@ -754,1 +838,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -762,1 +846,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -770,1 +854,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -778,1 +862,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -786,1 +870,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -794,1 +878,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -802,1 +886,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -810,1 +894,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -818,1 +902,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -826,1 +910,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -834,1 +918,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -842,1 +926,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -850,1 +934,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -858,1 +942,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -866,1 +950,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -874,1 +958,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -882,1 +966,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -890,1 +974,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -898,1 +982,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -906,1 +990,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -914,1 +998,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -922,1 +1006,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -930,1 +1014,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -938,1 +1022,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -946,1 +1030,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -954,1 +1038,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -962,1 +1046,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -970,1 +1054,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -978,1 +1062,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -986,1 +1070,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -994,1 +1078,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1002,1 +1086,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1010,1 +1094,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1018,1 +1102,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1026,1 +1110,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1034,1 +1118,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1042,1 +1126,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1050,1 +1134,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1058,1 +1142,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1066,1 +1150,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1074,1 +1158,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1082,1 +1166,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1090,1 +1174,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1098,1 +1182,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1106,1 +1190,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1114,1 +1198,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1122,1 +1206,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1130,1 +1214,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1138,1 +1222,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1146,1 +1230,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1154,1 +1238,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1162,1 +1246,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1170,1 +1254,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1178,1 +1262,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1186,1 +1270,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1194,1 +1278,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1202,1 +1286,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1210,1 +1294,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1218,1 +1302,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1226,1 +1310,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1234,1 +1318,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1242,1 +1326,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1250,1 +1334,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1258,1 +1342,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1266,1 +1350,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1274,1 +1358,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1282,1 +1366,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1290,1 +1374,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1298,1 +1382,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1306,1 +1390,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1314,1 +1398,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1322,1 +1406,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1330,1 +1414,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1338,1 +1422,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1346,1 +1430,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1354,1 +1438,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1362,1 +1446,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1370,1 +1454,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1378,1 +1462,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1386,1 +1470,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1394,1 +1478,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1402,1 +1486,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1410,1 +1494,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1418,1 +1502,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1426,1 +1510,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1434,1 +1518,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1442,1 +1526,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1450,1 +1534,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1458,1 +1542,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1466,1 +1550,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1474,1 +1558,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1482,1 +1566,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1490,1 +1574,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1498,1 +1582,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1506,1 +1590,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1514,1 +1598,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1522,1 +1606,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1530,1 +1614,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1538,1 +1622,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1546,1 +1630,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1554,1 +1638,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1562,1 +1646,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1570,1 +1654,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1578,1 +1662,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1586,1 +1670,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1594,1 +1678,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1602,1 +1686,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1610,1 +1694,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1618,1 +1702,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1626,1 +1710,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1634,1 +1718,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1642,1 +1726,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1650,1 +1734,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1658,1 +1742,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1666,1 +1750,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1674,1 +1758,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1682,1 +1766,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1690,1 +1774,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1698,1 +1782,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1706,1 +1790,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1714,1 +1798,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1722,1 +1806,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1730,1 +1814,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1738,1 +1822,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1746,1 +1830,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1754,1 +1838,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1762,1 +1846,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1770,1 +1854,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1778,1 +1862,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1786,1 +1870,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1794,1 +1878,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1802,1 +1886,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1810,1 +1894,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1818,1 +1902,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1826,1 +1910,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1834,1 +1918,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1842,1 +1926,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1850,1 +1934,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1858,1 +1942,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1866,1 +1950,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1874,1 +1958,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1882,1 +1966,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1890,1 +1974,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1898,1 +1982,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1906,1 +1990,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1914,1 +1998,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1922,1 +2006,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1930,1 +2014,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1938,1 +2022,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1946,1 +2030,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1954,1 +2038,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1962,1 +2046,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1970,1 +2054,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1978,1 +2062,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1986,1 +2070,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -1994,1 +2078,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2002,1 +2086,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2010,1 +2094,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2018,1 +2102,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2026,1 +2110,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2034,1 +2118,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2042,1 +2126,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2050,1 +2134,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2058,1 +2142,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2066,1 +2150,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2074,1 +2158,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2082,1 +2166,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2090,1 +2174,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2098,1 +2182,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2106,1 +2190,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2114,1 +2198,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2122,1 +2206,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2130,1 +2214,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2138,1 +2222,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2146,1 +2230,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2154,1 +2238,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2162,1 +2246,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2170,1 +2254,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2178,1 +2262,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2186,1 +2270,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2194,1 +2278,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2202,1 +2286,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2210,1 +2294,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2218,1 +2302,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2226,1 +2310,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2234,1 +2318,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2242,1 +2326,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2250,1 +2334,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2258,1 +2342,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2266,1 +2350,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2274,1 +2358,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2282,1 +2366,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2290,1 +2374,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2298,1 +2382,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2306,1 +2390,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2314,1 +2398,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2322,1 +2406,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2330,1 +2414,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2338,1 +2422,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2346,1 +2430,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2354,1 +2438,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2362,1 +2446,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2370,1 +2454,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2378,1 +2462,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2386,1 +2470,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2394,1 +2478,1 @@\n-     * Java VM opcode.\n+     * Java VM opcode {@value}.\n@@ -2402,1 +2486,1 @@\n-     * JVM internal opcode.\n+     * JVM internal opcode {@value}.\n@@ -2410,1 +2494,1 @@\n-     * JVM internal opcode.\n+     * JVM internal opcode {@value}.\n@@ -2421,1 +2505,1 @@\n-     * JVM internal opcode.\n+     * JVM internal opcode {@value}.\n@@ -2432,1 +2516,1 @@\n-     * JVM internal opcode.\n+     * JVM internal opcode {@value}.\n@@ -2443,1 +2527,1 @@\n-     * JVM internal opcode.\n+     * JVM internal opcode {@value}.\n@@ -2454,1 +2538,1 @@\n-     * JVM internal opcode.\n+     * JVM internal opcode {@value}.\n@@ -2465,1 +2549,1 @@\n-     * JVM internal opcode.\n+     * JVM internal opcode {@value}.\n@@ -2476,1 +2560,1 @@\n-     * JVM internal opcode.\n+     * JVM internal opcode {@value}.\n@@ -2487,1 +2571,1 @@\n-     * JVM internal opcode.\n+     * JVM internal opcode {@value}.\n@@ -2498,1 +2582,1 @@\n-     * JVM internal opcode.\n+     * JVM internal opcode {@value}.\n@@ -2509,1 +2593,1 @@\n-     * JVM internal opcode.\n+     * JVM internal opcode {@value}.\n@@ -2520,1 +2604,1 @@\n-     * JVM internal opcode.\n+     * JVM internal opcode {@value}.\n@@ -2531,1 +2615,1 @@\n-     * JVM internal opcode.\n+     * JVM internal opcode {@value}.\n@@ -2542,1 +2626,1 @@\n-     * JVM internal opcode.\n+     * JVM internal opcode {@value}.\n@@ -2553,1 +2637,1 @@\n-     * JVM internal opcode.\n+     * JVM internal opcode {@value}.\n@@ -2564,1 +2648,1 @@\n-     * JVM internal opcode.\n+     * JVM internal opcode {@value}.\n@@ -2575,1 +2659,1 @@\n-     * JVM internal opcode.\n+     * JVM internal opcode {@value}.\n@@ -2586,1 +2670,1 @@\n-     * JVM internal opcode.\n+     * JVM internal opcode {@value}.\n@@ -2597,1 +2681,1 @@\n-     * JVM internal opcode.\n+     * JVM internal opcode {@value}.\n@@ -2608,1 +2692,1 @@\n-     * JVM internal opcode.\n+     * JVM internal opcode {@value}.\n@@ -2619,1 +2703,1 @@\n-     * JVM internal opcode.\n+     * JVM internal opcode {@value}.\n@@ -2630,1 +2714,1 @@\n-     * JVM internal opcode.\n+     * JVM internal opcode {@value}.\n@@ -2641,1 +2725,1 @@\n-     * JVM internal opcode.\n+     * JVM internal opcode {@value}.\n@@ -2652,1 +2736,1 @@\n-     * JVM internal opcode.\n+     * JVM internal opcode {@value}.\n@@ -2663,1 +2747,1 @@\n-     * JVM internal opcode.\n+     * JVM internal opcode {@value}.\n@@ -2674,1 +2758,1 @@\n-     * JVM internal opcode.\n+     * JVM internal opcode {@value}.\n@@ -2685,1 +2769,1 @@\n-     * JVM internal opcode.\n+     * JVM internal opcode {@value}.\n@@ -2693,1 +2777,1 @@\n-     * JVM internal opcode.\n+     * JVM internal opcode {@value}.\n@@ -2701,1 +2785,1 @@\n-     * BCEL virtual instruction for pushing an arbitrary data type onto the stack. Will be converted to the appropriate JVM\n+     * BCEL virtual instruction for pushing an arbitrary data type onto the stack: {@value}. Will be converted to the appropriate JVM\n@@ -2707,1 +2791,1 @@\n-     * BCEL virtual instruction for either LOOKUPSWITCH or TABLESWITCH. Will be converted to the appropriate JVM opcode when\n+     * BCEL virtual instruction for either LOOKUPSWITCH or TABLESWITCH: {@value}. Will be converted to the appropriate JVM opcode when\n@@ -2712,1 +2796,3 @@\n-    \/** Illegal opcode. *\/\n+    \/**\n+     * Illegal opcode: {@value}.\n+     *\/\n@@ -2715,1 +2801,3 @@\n-    \/** Illegal opcode. *\/\n+    \/**\n+     * Illegal opcode: {@value}.\n+     *\/\n@@ -2718,1 +2806,3 @@\n-    \/** Illegal opcode. *\/\n+    \/**\n+     * Illegal opcode: {@value}.\n+     *\/\n@@ -2721,1 +2811,3 @@\n-    \/** Mnemonic for an illegal opcode. *\/\n+    \/**\n+     * Mnemonic for an illegal opcode: {@value}.\n+     *\/\n@@ -2724,1 +2816,3 @@\n-    \/** Mnemonic for an illegal type. *\/\n+    \/**\n+     * Mnemonic for an illegal type: {@value}.\n+     *\/\n@@ -2728,1 +2822,1 @@\n-     * Boolean data type.\n+     * Boolean data type: {@value}.\n@@ -2736,1 +2830,1 @@\n-     * Char data type.\n+     * Char data type: {@value}.\n@@ -2744,1 +2838,1 @@\n-     * Float data type.\n+     * Float data type: {@value}.\n@@ -2752,1 +2846,1 @@\n-     * Double data type.\n+     * Double data type: {@value}.\n@@ -2760,1 +2854,1 @@\n-     * Byte data type.\n+     * Byte data type: {@value}.\n@@ -2768,1 +2862,1 @@\n-     * Short data type.\n+     * Short data type: {@value}.\n@@ -2776,1 +2870,1 @@\n-     * Int data type.\n+     * Int data type: {@value}.\n@@ -2784,1 +2878,1 @@\n-     * Long data type.\n+     * Long data type: {@value}.\n@@ -2830,1 +2924,1 @@\n-    private static final String[] SHORT_TYPE_NAMES = {ILLEGAL_TYPE, ILLEGAL_TYPE, ILLEGAL_TYPE, ILLEGAL_TYPE, \"Z\", \"C\", \"F\", \"D\", \"B\", \"S\", \"I\", \"J\", \"V\",\n+    public static final String[] SHORT_TYPE_NAMES = {ILLEGAL_TYPE, ILLEGAL_TYPE, ILLEGAL_TYPE, ILLEGAL_TYPE, \"Z\", \"C\", \"F\", \"D\", \"B\", \"S\", \"I\", \"J\", \"V\",\n@@ -3039,1 +3133,3 @@\n-    public static final short KNOWN_ATTRIBUTES = 27; \/\/ count of attributes\n+    public static final byte ATTR_RECORD = 27;\n+\n+    public static final short KNOWN_ATTRIBUTES = 28; \/\/ count of attributes\n@@ -3043,1 +3139,1 @@\n-        \"StackMapTable\", \"BootstrapMethods\", \"MethodParameters\", \"Module\", \"ModulePackages\", \"ModuleMainClass\", \"NestHost\", \"NestMembers\"};\n+        \"StackMapTable\", \"BootstrapMethods\", \"MethodParameters\", \"Module\", \"ModulePackages\", \"ModuleMainClass\", \"NestHost\", \"NestMembers\", \"Record\"};\n@@ -3073,0 +3169,1 @@\n+\n@@ -3093,0 +3190,1 @@\n+\n@@ -3100,1 +3198,1 @@\n-     * @param index\n+     * @param index index into {@code ACCESS_NAMES}.\n@@ -3110,1 +3208,1 @@\n-     * @param index\n+     * @param index index into {@code ACCESS_NAMES}.\n@@ -3121,1 +3219,1 @@\n-     * @param index\n+     * @param index index into {@code CLASS_TYPE_NAMES}.\n@@ -3131,1 +3229,1 @@\n-     * @param index\n+     * @param index index into {@code CONSTANT_NAMES}.\n@@ -3143,1 +3241,1 @@\n-     * @param index\n+     * @param index index into {@code CONSUME_STACK}.\n@@ -3160,1 +3258,1 @@\n-     * @param index\n+     * @param index index into {@code ITEM_NAMES}.\n@@ -3170,1 +3268,1 @@\n-     * @param index\n+     * @param index index into {@code METHODHANDLE_NAMES}.\n@@ -3180,1 +3278,1 @@\n-     * @param index\n+     * @param index index into {@code NO_OF_OPERANDS}.\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/Const.java","additions":463,"deletions":365,"binary":false,"changes":828,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,1 +29,1 @@\n- * @LastModified: Feb 2023\n+ * @LastModified: Sept 2025\n@@ -55,1 +55,0 @@\n-\n@@ -70,0 +69,1 @@\n+\n@@ -73,1 +73,0 @@\n-\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/ExceptionConst.java","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,1 +33,1 @@\n- * @LastModified: Feb 2023\n+ * @LastModified: Sept 2025\n@@ -177,1 +177,1 @@\n-     * Lookups class somewhere found on your CLASSPATH, or wherever the repository instance looks for it.\n+     * Lookups class somewhere found on your CLASSPATH, or whereever the repository instance looks for it.\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/Repository.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,1 +28,1 @@\n- * @LastModified: Jan 2020\n+ * @LastModified: Sept 2025\n@@ -33,1 +33,3 @@\n-     * @deprecated (since 6.0) will be made private; do not access directly, use getter\/setter\n+     * Access flags.\n+     *\n+     * @deprecated (since 6.0) will be made private; do not access directly, use getter\/setter.\n@@ -38,0 +40,3 @@\n+    \/**\n+     * Constructs a new instance.\n+     *\/\n@@ -42,1 +47,3 @@\n-     * @param a initial access flags\n+     * Constructs a new instance.\n+     *\n+     * @param accessFlags initial access flags.\n@@ -44,2 +51,2 @@\n-    public AccessFlags(final int a) {\n-        access_flags = a;\n+    public AccessFlags(final int accessFlags) {\n+        access_flags = accessFlags;\n@@ -49,0 +56,2 @@\n+     * Gets access flags.\n+     *\n@@ -56,1 +65,3 @@\n-     * @return Access flags of the object aka. \"modifiers\".\n+     * Gets access flags.\n+     *\n+     * @return Access flags of the object also known as modifiers.\n@@ -62,0 +73,5 @@\n+    \/**\n+     * Tests whether the abstract bit is on.\n+     *\n+     * @return whether the abstract bit is on.\n+     *\/\n@@ -63,1 +79,1 @@\n-        return (access_flags & Const.ACC_ABSTRACT) != 0;\n+        return test(Const.ACC_ABSTRACT);\n@@ -66,0 +82,5 @@\n+    \/**\n+     * Sets the abstract bit.\n+     *\n+     * @param flag The new value.\n+     *\/\n@@ -70,0 +91,5 @@\n+    \/**\n+     * Tests whether the annotation bit is on.\n+     *\n+     * @return whether the annotation bit is on.\n+     *\/\n@@ -71,1 +97,1 @@\n-        return (access_flags & Const.ACC_ANNOTATION) != 0;\n+        return test(Const.ACC_ANNOTATION);\n@@ -74,0 +100,5 @@\n+    \/**\n+     * Sets the annotation bit.\n+     *\n+     * @param flag The new value.\n+     *\/\n@@ -77,1 +108,5 @@\n-\n+    \/**\n+     * Tests whether the enum bit is on.\n+     *\n+     * @return whether the enum bit is on.\n+     *\/\n@@ -79,1 +114,1 @@\n-        return (access_flags & Const.ACC_ENUM) != 0;\n+        return test(Const.ACC_ENUM);\n@@ -82,0 +117,5 @@\n+    \/**\n+     * Sets the enum bit.\n+     *\n+     * @param flag The new value.\n+     *\/\n@@ -86,0 +126,5 @@\n+    \/**\n+     * Tests whether the final bit is on.\n+     *\n+     * @return whether the final bit is on.\n+     *\/\n@@ -87,1 +132,1 @@\n-        return (access_flags & Const.ACC_FINAL) != 0;\n+        return test(Const.ACC_FINAL);\n@@ -90,0 +135,5 @@\n+    \/**\n+     * Sets the final bit.\n+     *\n+     * @param flag The new value.\n+     *\/\n@@ -94,0 +144,5 @@\n+    \/**\n+     * Tests whether the interface bit is on.\n+     *\n+     * @return whether the interface bit is on.\n+     *\/\n@@ -95,1 +150,1 @@\n-        return (access_flags & Const.ACC_INTERFACE) != 0;\n+        return test(Const.ACC_INTERFACE);\n@@ -98,0 +153,5 @@\n+    \/**\n+     * Sets the interface bit.\n+     *\n+     * @param flag The new value.\n+     *\/\n@@ -102,0 +162,5 @@\n+    \/**\n+     * Tests whether the native bit is on.\n+     *\n+     * @return whether the native bit is on.\n+     *\/\n@@ -103,1 +168,1 @@\n-        return (access_flags & Const.ACC_NATIVE) != 0;\n+        return test(Const.ACC_NATIVE);\n@@ -106,0 +171,5 @@\n+    \/**\n+     * Sets the native bit.\n+     *\n+     * @param flag The new value.\n+     *\/\n@@ -110,0 +180,5 @@\n+    \/**\n+     * Tests whether the private bit is on.\n+     *\n+     * @return whether the private bit is on.\n+     *\/\n@@ -111,1 +186,1 @@\n-        return (access_flags & Const.ACC_PRIVATE) != 0;\n+        return test(Const.ACC_PRIVATE);\n@@ -114,0 +189,5 @@\n+    \/**\n+     * Sets the private bit.\n+     *\n+     * @param flag The new value.\n+     *\/\n@@ -118,0 +198,5 @@\n+    \/**\n+     * Tests whether the protected bit is on.\n+     *\n+     * @return whether the protected bit is on.\n+     *\/\n@@ -119,1 +204,1 @@\n-        return (access_flags & Const.ACC_PROTECTED) != 0;\n+        return test(Const.ACC_PROTECTED);\n@@ -122,0 +207,5 @@\n+    \/**\n+     * Sets the protected bit.\n+     *\n+     * @param flag The new value.\n+     *\/\n@@ -126,0 +216,5 @@\n+    \/**\n+     * Tests whether the public bit is on.\n+     *\n+     * @return whether the public bit is on.\n+     *\/\n@@ -127,1 +222,1 @@\n-        return (access_flags & Const.ACC_PUBLIC) != 0;\n+        return test(Const.ACC_PUBLIC);\n@@ -130,0 +225,5 @@\n+    \/**\n+     * Sets the public bit.\n+     *\n+     * @param flag The new value.\n+     *\/\n@@ -134,0 +234,5 @@\n+    \/**\n+     * Tests whether the static bit is on.\n+     *\n+     * @return whether the static bit is on.\n+     *\/\n@@ -135,1 +240,1 @@\n-        return (access_flags & Const.ACC_STATIC) != 0;\n+        return test(Const.ACC_STATIC);\n@@ -138,0 +243,5 @@\n+    \/**\n+     * Sets the static bit.\n+     *\n+     * @param flag The new value.\n+     *\/\n@@ -142,0 +252,5 @@\n+    \/**\n+     * Tests whether the strict bit is on.\n+     *\n+     * @return whether the strict bit is on.\n+     *\/\n@@ -143,1 +258,1 @@\n-        return (access_flags & Const.ACC_STRICT) != 0;\n+        return test(Const.ACC_STRICT);\n@@ -146,0 +261,5 @@\n+    \/**\n+     * Sets the strict bit.\n+     *\n+     * @param flag The new value.\n+     *\/\n@@ -150,0 +270,5 @@\n+    \/**\n+     * Tests whether the synchronized bit is on.\n+     *\n+     * @return whether the synchronized bit is on.\n+     *\/\n@@ -151,1 +276,1 @@\n-        return (access_flags & Const.ACC_SYNCHRONIZED) != 0;\n+        return test(Const.ACC_SYNCHRONIZED);\n@@ -154,0 +279,5 @@\n+    \/**\n+     * Sets the synchronized bit.\n+     *\n+     * @param flag The new value.\n+     *\/\n@@ -158,0 +288,5 @@\n+    \/**\n+     * Tests whether the synthetic bit is on.\n+     *\n+     * @return whether the synthetic bit is on.\n+     *\/\n@@ -159,1 +294,1 @@\n-        return (access_flags & Const.ACC_SYNTHETIC) != 0;\n+        return test(Const.ACC_SYNTHETIC);\n@@ -162,0 +297,5 @@\n+    \/**\n+     * Sets the synthetic bit.\n+     *\n+     * @param flag The new value.\n+     *\/\n@@ -166,0 +306,5 @@\n+    \/**\n+     * Tests whether the transient bit is on.\n+     *\n+     * @return whether the varargs bit is on.\n+     *\/\n@@ -167,1 +312,1 @@\n-        return (access_flags & Const.ACC_TRANSIENT) != 0;\n+        return test(Const.ACC_TRANSIENT);\n@@ -170,0 +315,5 @@\n+    \/**\n+     * Sets the varargs bit.\n+     *\n+     * @param flag The new value.\n+     *\/\n@@ -174,0 +324,5 @@\n+    \/**\n+     * Tests whether the varargs bit is on.\n+     *\n+     * @return whether the varargs bit is on.\n+     *\/\n@@ -175,1 +330,1 @@\n-        return (access_flags & Const.ACC_VARARGS) != 0;\n+        return test(Const.ACC_VARARGS);\n@@ -178,0 +333,5 @@\n+    \/**\n+     * Sets the varargs bit.\n+     *\n+     * @param flag The new value.\n+     *\/\n@@ -182,0 +342,5 @@\n+    \/**\n+     * Tests whether the volatile bit is on.\n+     *\n+     * @return whether the volatile bit is on.\n+     *\/\n@@ -183,1 +348,1 @@\n-        return (access_flags & Const.ACC_VOLATILE) != 0;\n+        return test(Const.ACC_VOLATILE);\n@@ -186,0 +351,5 @@\n+    \/**\n+     * Sets the volatile bit.\n+     *\n+     * @param flag The new value.\n+     *\/\n@@ -191,1 +361,1 @@\n-     * Set access flags aka \"modifiers\".\n+     * Sets access flags also known as modifiers.\n@@ -210,1 +380,1 @@\n-     * Set access flags aka \"modifiers\".\n+     * Sets access flags aka \"modifiers\".\n@@ -217,0 +387,10 @@\n+\n+    \/**\n+     * Tests whether the bit is on.\n+     *\n+     * @param test the bit to test.\n+     * @return whether the bit is on.\n+     *\/\n+    private boolean test(final short test) {\n+        return (access_flags & test) != 0;\n+    }\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/AccessFlags.java","additions":206,"deletions":26,"binary":false,"changes":232,"status":"modified"},{"patch":"@@ -2,2 +2,1 @@\n- * reserved comment block\n- * DO NOT REMOVE OR ALTER!\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -30,0 +29,1 @@\n+import jdk.xml.internal.Utils;\n@@ -35,0 +35,1 @@\n+ * @LastModified: Sept 2025\n@@ -40,1 +41,1 @@\n-    public static AnnotationEntry[] createAnnotationEntries(final Attribute[] attrs) {\n+    public static AnnotationEntry[] createAnnotationEntries(final Attribute[] attributes) {\n@@ -42,2 +43,2 @@\n-        return Stream.of(attrs).filter(Annotations.class::isInstance).flatMap(e -> Stream.of(((Annotations) e).getAnnotationEntries()))\n-            .toArray(AnnotationEntry[]::new);\n+        return Utils.streamOfIfNonNull(attributes).filter(Annotations.class::isInstance).flatMap(e -> Stream.of(((Annotations) e).getAnnotationEntries()))\n+                .toArray(AnnotationEntry[]::new);\n@@ -58,1 +59,0 @@\n-        annotationEntry.elementValuePairs = new ArrayList<>();\n@@ -72,1 +72,1 @@\n-    private List<ElementValuePair> elementValuePairs;\n+    private final List<ElementValuePair> elementValuePairs;\n@@ -78,0 +78,1 @@\n+        this.elementValuePairs = new ArrayList<>();\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/AnnotationEntry.java","additions":8,"deletions":7,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -55,1 +55,1 @@\n-        this.annotationTable = annotationTable;\n+        setAnnotationTable(annotationTable);\n@@ -111,3 +111,0 @@\n-        if (annotationTable == null) {\n-            return 0;\n-        }\n@@ -132,1 +129,1 @@\n-        this.annotationTable = annotationTable;\n+        this.annotationTable = annotationTable != null ? annotationTable : AnnotationEntry.EMPTY_ARRAY;\n@@ -154,3 +151,0 @@\n-        if (annotationTable == null) {\n-            return;\n-        }\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/Annotations.java","additions":2,"deletions":8,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -34,1 +34,1 @@\n-    public ArrayElementValue(final int type, final ElementValue[] datums, final ConstantPool cpool) {\n+    public ArrayElementValue(final int type, final ElementValue[] elementValues, final ConstantPool cpool) {\n@@ -39,1 +39,1 @@\n-        this.elementValues = datums;\n+        this.elementValues = elementValues != null ? elementValues : EMPTY_ARRAY;\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/ArrayElementValue.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -56,1 +56,1 @@\n- * @LastModified: Feb 2023\n+ * @LastModified: Sept 2025\n@@ -184,0 +184,2 @@\n+        case Const.ATTR_RECORD:\n+            return new Record(nameIndex, length, dataInput, constantPool);\n@@ -282,1 +284,1 @@\n-            throw new Error(\"Clone Not Supported\"); \/\/ never happens\n+            throw new UnsupportedOperationException(\"Clone Not Supported\", e); \/\/ never happens\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/Attribute.java","additions":5,"deletions":3,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,2 +2,1 @@\n- * reserved comment block\n- * DO NOT REMOVE OR ALTER!\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -30,0 +29,1 @@\n+import jdk.xml.internal.Utils;\n@@ -38,0 +38,1 @@\n+ * @LastModified: Sept 2025\n@@ -41,0 +42,2 @@\n+    static final BootstrapMethod[] EMPTY_ARRAY = {};\n+\n@@ -57,1 +60,1 @@\n-     * Construct object from input stream.\n+     * Constructs object from input stream.\n@@ -81,1 +84,1 @@\n-        this.bootstrapArguments = bootstrapArguments;\n+        setBootstrapArguments(bootstrapArguments);\n@@ -90,1 +93,1 @@\n-        } catch (final CloneNotSupportedException e) {\n+        } catch (final CloneNotSupportedException ignore) {\n@@ -135,1 +138,1 @@\n-        this.bootstrapArguments = bootstrapArguments;\n+        this.bootstrapArguments = Utils.createEmptyArrayIfNull(bootstrapArguments);\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/BootstrapMethod.java","additions":9,"deletions":6,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -61,1 +61,1 @@\n-        this.bootstrapMethods = bootstrapMethods;\n+        setBootstrapMethods(bootstrapMethods);\n@@ -65,1 +65,1 @@\n-     * Construct object from Input stream.\n+     * Constructs object from Input stream.\n@@ -138,1 +138,1 @@\n-        this.bootstrapMethods = bootstrapMethods;\n+        this.bootstrapMethods = bootstrapMethods != null ? bootstrapMethods : BootstrapMethod.EMPTY_ARRAY;\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/BootstrapMethods.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -50,2 +50,0 @@\n-     * <p>\n-     * Note that the detail message associated with {@code cause} is <i>not<\/i> automatically incorporated in this runtime exception's detail message.\n@@ -54,2 +52,2 @@\n-     * @param cause   the cause (which is saved for later retrieval by the {@link #getCause()} method). (A {@code null} value is permitted, and indicates that\n-     *                the cause is nonexistent or unknown.)\n+     * @param cause   the cause (which is saved for later retrieval by the {@link #getCause()} method). A {@code null} value is permitted, and indicates that\n+     *                the cause is nonexistent or unknown.\n@@ -66,2 +64,2 @@\n-     * @param cause the cause (which is saved for later retrieval by the {@link #getCause()} method). (A {@code null} value is permitted, and indicates that the\n-     *              cause is nonexistent or unknown.)\n+     * @param cause the cause (which is saved for later retrieval by the {@link #getCause()} method). A {@code null} value is permitted, and indicates that the\n+     *              cause is nonexistent or unknown.\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/ClassFormatException.java","additions":4,"deletions":6,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -40,1 +40,1 @@\n- * <a href=\"http:\/\/docs.oracle.com\/javase\/specs\/\"> JVM specification 1.0<\/a>. See this paper for further details about\n+ * <a href=\"https:\/\/docs.oracle.com\/javase\/specs\/\"> JVM specification 1.0<\/a>. See this paper for further details about\n@@ -60,1 +60,1 @@\n-    private final boolean isZip; \/\/ Loaded from zip file\n+    private final boolean isZip; \/\/ Loaded from ZIP file\n@@ -94,1 +94,1 @@\n-     * @param zipFile zip file name\n+     * @param zipFile ZIP file name\n@@ -107,1 +107,1 @@\n-     * not include verification of the byte code as it is performed by the java interpreter).\n+     * not include verification of the byte code as it is performed by the Java interpreter).\n@@ -154,1 +154,1 @@\n-            \/\/ if(file.available() > 0) {\n+            \/\/ if (file.available() > 0) {\n@@ -158,1 +158,1 @@\n-            \/\/ if(!(isZip && (buf.length == 1))) {\n+            \/\/ if (!(isZip && (buf.length == 1))) {\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/ClassParser.java","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2023, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -30,0 +30,1 @@\n+import jdk.xml.internal.Utils;\n@@ -62,1 +63,1 @@\n- * @LastModified: Feb 2023\n+ * @LastModified: Sept 2025\n@@ -96,1 +97,1 @@\n-         * Read exception table that contains all regions where an exception handler is active, i.e., a try { ... } catch()\n+         * Read exception table that contains all regions where an exception handler is active, i.e., a try { ... } catch ()\n@@ -110,1 +111,1 @@\n-            attributes[i] = Attribute.readAttribute(file, constantPool);\n+            attributes[i] = readAttribute(file, constantPool);\n@@ -134,2 +135,2 @@\n-        this.code = code != null ? code : Const.EMPTY_BYTE_ARRAY;\n-        this.exceptionTable = exceptionTable != null ? exceptionTable : CodeException.EMPTY_CODE_EXCEPTION_ARRAY;\n+        this.code = Utils.createEmptyArrayIfNull(code);\n+        this.exceptionTable = Utils.createEmptyArrayIfNull(exceptionTable, CodeException[].class);\n@@ -266,0 +267,14 @@\n+    \/**\n+     * Gets the local variable type table attribute {@link LocalVariableTypeTable}.\n+     * @return LocalVariableTypeTable of Code, if it has one, null otherwise.\n+     * @since 6.10.0\n+     *\/\n+    public LocalVariableTypeTable getLocalVariableTypeTable() {\n+        for (final Attribute attribute : attributes) {\n+            if (attribute instanceof LocalVariableTypeTable) {\n+                return (LocalVariableTypeTable) attribute;\n+            }\n+        }\n+        return null;\n+    }\n+\n@@ -280,0 +295,14 @@\n+    \/**\n+     * Finds the attribute of {@link StackMap} instance.\n+     * @return StackMap of Code, if it has one, else null.\n+     * @since 6.8.0\n+     *\/\n+    public StackMap getStackMap() {\n+        for (final Attribute attribute : attributes) {\n+            if (attribute instanceof StackMap) {\n+                return (StackMap) attribute;\n+            }\n+        }\n+        return null;\n+    }\n+\n@@ -292,1 +321,1 @@\n-        this.code = code != null ? code : Const.EMPTY_BYTE_ARRAY;\n+        this.code = Utils.createEmptyArrayIfNull(code);\n@@ -300,1 +329,1 @@\n-        this.exceptionTable = exceptionTable != null ? exceptionTable : CodeException.EMPTY_CODE_EXCEPTION_ARRAY;\n+        this.exceptionTable = exceptionTable != null ? exceptionTable : CodeException.EMPTY_ARRAY;\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/Code.java","additions":37,"deletions":8,"binary":false,"changes":45,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -55,1 +55,1 @@\n- * @LastModified: Feb 2023\n+ * @LastModified: Sept 2025\n@@ -62,1 +62,1 @@\n-    static final CodeException[] EMPTY_CODE_EXCEPTION_ARRAY = {};\n+    static final CodeException[] EMPTY_ARRAY = {};\n@@ -67,1 +67,1 @@\n-    \/** active. startPc is inclusive, endPc exclusive. *\/\n+    \/** Active. startPc is inclusive, endPc exclusive. *\/\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/CodeException.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -35,1 +35,1 @@\n- * @LastModified: May 2021\n+ * @LastModified: Sept 2025\n@@ -39,1 +39,3 @@\n-    private static BCELComparator bcelComparator = new BCELComparator() {\n+    static final Constant[] EMPTY_ARRAY = {};\n+\n+    private static BCELComparator<Constant> bcelComparator = new BCELComparator<Constant>() {\n@@ -42,4 +44,2 @@\n-        public boolean equals(final Object o1, final Object o2) {\n-            final Constant THIS = (Constant) o1;\n-            final Constant THAT = (Constant) o2;\n-            return Objects.equals(THIS.toString(), THAT.toString());\n+        public boolean equals(final Constant a, final Constant b) {\n+            return a == b || a != null && b != null && Objects.equals(a.toString(), b.toString());\n@@ -49,3 +49,2 @@\n-        public int hashCode(final Object o) {\n-            final Constant THIS = (Constant) o;\n-            return THIS.toString().hashCode();\n+        public int hashCode(final Constant o) {\n+            return o != null ? Objects.hashCode(o.toString()) : 0;\n@@ -56,1 +55,1 @@\n-     * @return Comparison strategy object\n+     * @return Comparison strategy object.\n@@ -58,1 +57,1 @@\n-    public static BCELComparator getComparator() {\n+    public static BCELComparator<Constant> getComparator() {\n@@ -116,1 +115,1 @@\n-    public static void setComparator(final BCELComparator comparator) {\n+    public static void setComparator(final BCELComparator<Constant> comparator) {\n@@ -151,1 +150,1 @@\n-            throw new Error(\"Clone Not Supported\"); \/\/ never happens\n+            throw new UnsupportedOperationException(\"Clone Not Supported\", e); \/\/ never happens\n@@ -177,1 +176,1 @@\n-        return bcelComparator.equals(this, obj);\n+        return obj instanceof Constant && bcelComparator.equals(this, (Constant) obj);\n@@ -188,1 +187,1 @@\n-     * Returns value as defined by given BCELComparator strategy. By default return the hashcode of the result of\n+     * Returns value as defined by given BCELComparator strategy. By default return the hash code of the result of\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/Constant.java","additions":15,"deletions":16,"binary":false,"changes":31,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,5 +31,5 @@\n- * @see     ConstantFieldref\n- * @see     ConstantMethodref\n- * @see     ConstantInterfaceMethodref\n- * @see     ConstantInvokeDynamic\n- * @LastModified: Jun 2019\n+ * @see ConstantFieldref\n+ * @see ConstantMethodref\n+ * @see ConstantInterfaceMethodref\n+ * @see ConstantInvokeDynamic\n+ * @LastModified: Sept 2025\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/ConstantCP.java","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,2 +32,2 @@\n- * @see     Constant\n- * @LastModified: Jun 2019\n+ * @see Constant\n+ * @LastModified: Sept 2025\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/ConstantDouble.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,2 +32,2 @@\n- * @see     Constant\n- * @LastModified: Jun 2019\n+ * @see Constant\n+ * @LastModified: Sept 2025\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/ConstantFloat.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,2 +32,2 @@\n- * @see     Constant\n- * @LastModified: Jun 2019\n+ * @see Constant\n+ * @LastModified: Sept 2025\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/ConstantInteger.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,2 +32,2 @@\n- * @see     Constant\n- * @LastModified: Jan 2020\n+ * @see Constant\n+ * @LastModified: Sept 2025\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/ConstantLong.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -32,1 +32,4 @@\n-     * @return object representing the constant, e.g., Long for ConstantLong\n+     * Gets the object representing the constant, e.g., Long for ConstantLong.\n+     *\n+     * @param constantPool the constant.\n+     * @return object representing the constant, e.g., Long for ConstantLong.\n@@ -34,1 +37,1 @@\n-    Object getConstantValue(ConstantPool cp);\n+    Object getConstantValue(ConstantPool constantPool);\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/ConstantObject.java","additions":5,"deletions":2,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -38,1 +38,1 @@\n- * @LastModified: Feb 2023\n+ * @LastModified: Sept 2025\n@@ -76,1 +76,1 @@\n-        this.constantPool = constantPool;\n+        setConstantPool(constantPool);\n@@ -91,0 +91,1 @@\n+         * constantPool[0] is currently unused by the implementation.\n@@ -291,1 +292,1 @@\n-        if (c.getTag() != tag) {\n+        if (c == null || c.getTag() != tag) {\n@@ -316,5 +317,1 @@\n-        \/\/ Previous check ensures this won't throw a ClassCastException\n-        final T c = castTo.cast(constantPool[index]);\n-        if (c == null\n-            \/\/ the 0th element is always null\n-            && index != 0) {\n+        if (index > 1) {\n@@ -322,2 +319,3 @@\n-            if (prev == null || prev.getTag() != Const.CONSTANT_Double && prev.getTag() != Const.CONSTANT_Long) {\n-                throw new ClassFormatException(\"Constant pool at index \" + index + \" is null.\");\n+            if (prev != null && (prev.getTag() == Const.CONSTANT_Double || prev.getTag() == Const.CONSTANT_Long)) {\n+                throw new ClassFormatException(\"Constant pool at index \" + index + \" is invalid. The index is unused due to the preceeding \"\n+                        + Const.getConstantName(prev.getTag()) + \".\");\n@@ -326,0 +324,5 @@\n+        \/\/ Previous check ensures this won't throw a ClassCastException\n+        final T c = castTo.cast(constantPool[index]);\n+        if (c == null) {\n+            throw new ClassFormatException(\"Constant pool at index \" + index + \" is null.\");\n+        }\n@@ -405,1 +408,1 @@\n-        return constantPool == null ? 0 : constantPool.length;\n+        return constantPool.length;\n@@ -424,1 +427,1 @@\n-        this.constantPool = constantPool;\n+        this.constantPool = constantPool != null ? constantPool : Constant.EMPTY_ARRAY;\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/ConstantPool.java","additions":16,"deletions":13,"binary":false,"changes":29,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -39,1 +39,1 @@\n- * <li>{@value #SYS_PROP_CACHE_MAX_ENTRIES} (since 6.4): The size of the cache, by default 0, meaning caching is\n+ * <li>{@link #SYS_PROP_CACHE_MAX_ENTRIES} (since 6.4): The size of the cache, by default 0, meaning caching is\n@@ -41,1 +41,1 @@\n- * <li>{@value #SYS_PROP_CACHE_MAX_ENTRY_SIZE} (since 6.0): The maximum size of the values to cache, by default 200, 0\n+ * <li>{@link #SYS_PROP_CACHE_MAX_ENTRY_SIZE} (since 6.0): The maximum size of the values to cache, by default 200, 0\n@@ -43,1 +43,1 @@\n- * <li>{@value #SYS_PROP_STATISTICS} (since 6.0): Prints statistics on the console when the JVM exits.<\/li>\n+ * <li>{@link #SYS_PROP_STATISTICS} (since 6.0): Prints statistics on the console when the JVM exits.<\/li>\n@@ -61,1 +61,1 @@\n- * @LastModified: Feb 2023\n+ * @LastModified: Sept 2025\n@@ -65,1 +65,1 @@\n-    private static class Cache {\n+    private static final class Cache {\n@@ -85,1 +85,1 @@\n-            return Cache.MAX_ENTRIES > 0 && MAX_ENTRY_SIZE > 0;\n+            return MAX_ENTRIES > 0 && MAX_ENTRY_SIZE > 0;\n@@ -120,0 +120,5 @@\n+    \/\/ Avoid Spotbugs complaint about Write to static field\n+    private static void countCreated() {\n+        created++;\n+    }\n+\n@@ -206,1 +211,1 @@\n-        created++;\n+        countCreated();\n@@ -215,1 +220,1 @@\n-        created++;\n+        countCreated();\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/ConstantUtf8.java","additions":14,"deletions":9,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -59,1 +59,1 @@\n-     * Construct object from input stream.\n+     * Constructs object from input stream.\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/ConstantValue.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -62,1 +62,1 @@\n-     * Construct object from input stream.\n+     * Constructs object from input stream.\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/Deprecated.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2017, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -25,0 +25,1 @@\n+import jdk.xml.internal.Utils;\n@@ -27,3 +28,2 @@\n- * Traverses a JavaClass with another Visitor object 'piggy-backed' that is\n- * applied to all components of a JavaClass object. I.e. this class supplies the\n- * traversal strategy, other classes can make use of it.\n+ * Traverses a JavaClass with another Visitor object 'piggy-backed' that is applied to all components of a JavaClass\n+ * object. I.e. this class supplies the traversal strategy, other classes can make use of it.\n@@ -31,0 +31,1 @@\n+ * @LastModified: Sept 2025\n@@ -49,1 +50,1 @@\n-        Stream.of(node).forEach(e -> e.accept(this));\n+        Utils.streamOfIfNonNull(node).forEach(e -> e.accept(this));\n@@ -510,0 +511,15 @@\n+    @Override\n+    public void visitRecord(final Record record) {\n+        stack.push(record);\n+        record.accept(visitor);\n+        accept(record.getComponents());\n+        stack.pop();\n+    }\n+\n+    @Override\n+    public void visitRecordComponent(final RecordComponentInfo recordComponentInfo) {\n+        stack.push(recordComponentInfo);\n+        recordComponentInfo.accept(visitor);\n+        stack.pop();\n+    }\n+\n@@ -534,0 +550,14 @@\n+        stack.push(var);\n+        var.accept(visitor);\n+        accept(var.getTypesOfLocals());\n+        accept(var.getTypesOfStackItems());\n+        stack.pop();\n+    }\n+\n+    \/**\n+     * Visits a {@link StackMapType} object.\n+     * @param var object to visit\n+     * @since 6.8.0\n+     *\/\n+    @Override\n+    public void visitStackMapType(final StackMapType var) {\n@@ -552,0 +582,1 @@\n+\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/DescendingVisitor.java","additions":36,"deletions":5,"binary":false,"changes":41,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -53,1 +53,1 @@\n- * @LastModified: May 2021\n+ * @LastModified: Sept 2025\n@@ -70,0 +70,1 @@\n+    static final ElementValue[] EMPTY_ARRAY = {};\n@@ -127,1 +128,1 @@\n-                evalues[j] = ElementValue.readElementValue(input, cpool, arrayNesting);\n+                evalues[j] = readElementValue(input, cpool, arrayNesting);\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/ElementValue.java","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -318,0 +318,9 @@\n+    \/**\n+     * Visits a {@link StackMapType} object.\n+     * @param obj object to visit\n+     * @since 6.8.0\n+     *\/\n+    @Override\n+    public void visitStackMapType(final StackMapType obj) {\n+    }\n+\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/EmptyVisitor.java","additions":9,"deletions":0,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2023, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -30,0 +30,1 @@\n+import jdk.xml.internal.Utils;\n@@ -46,1 +47,1 @@\n- * @LastModified: Feb 2023\n+ * @LastModified: Sept 2025\n@@ -63,1 +64,1 @@\n-     * Construct object from input stream.\n+     * Constructs object from input stream.\n@@ -88,1 +89,1 @@\n-        this.exceptionIndexTable = exceptionIndexTable != null ? exceptionIndexTable : Const.EMPTY_INT_ARRAY;\n+        this.exceptionIndexTable = Utils.createEmptyArrayIfNull(exceptionIndexTable);\n@@ -159,1 +160,1 @@\n-        this.exceptionIndexTable = exceptionIndexTable != null ? exceptionIndexTable : Const.EMPTY_INT_ARRAY;\n+        this.exceptionIndexTable = Utils.createEmptyArrayIfNull(exceptionIndexTable);\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/ExceptionTable.java","additions":6,"deletions":5,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -45,1 +45,1 @@\n-    private static BCELComparator bcelComparator = new BCELComparator() {\n+    private static BCELComparator<Field> bcelComparator = new BCELComparator<Field>() {\n@@ -48,4 +48,2 @@\n-        public boolean equals(final Object o1, final Object o2) {\n-            final Field THIS = (Field) o1;\n-            final Field THAT = (Field) o2;\n-            return Objects.equals(THIS.getName(), THAT.getName()) && Objects.equals(THIS.getSignature(), THAT.getSignature());\n+        public boolean equals(final Field a, final Field b) {\n+            return a == b || a != null && b != null && Objects.equals(a.getName(), b.getName()) && Objects.equals(a.getSignature(), b.getSignature());\n@@ -55,3 +53,2 @@\n-        public int hashCode(final Object o) {\n-            final Field THIS = (Field) o;\n-            return THIS.getSignature().hashCode() ^ THIS.getName().hashCode();\n+        public int hashCode(final Field o) {\n+            return o != null ? Objects.hash(o.getSignature(), o.getName()) : 0;\n@@ -62,1 +59,1 @@\n-     * Empty array.\n+     * @return Comparison strategy object.\n@@ -64,6 +61,1 @@\n-    static final Field[] EMPTY_FIELD_ARRAY = {};\n-\n-    \/**\n-     * @return Comparison strategy object\n-     *\/\n-    public static BCELComparator getComparator() {\n+    public static BCELComparator<Field> getComparator() {\n@@ -74,1 +66,1 @@\n-     * @param comparator Comparison strategy object\n+     * @param comparator Comparison strategy object.\n@@ -76,1 +68,1 @@\n-    public static void setComparator(final BCELComparator comparator) {\n+    public static void setComparator(final BCELComparator<Field> comparator) {\n@@ -81,1 +73,1 @@\n-     * Construct object from file stream.\n+     * Constructs object from file stream.\n@@ -83,1 +75,1 @@\n-     * @param file Input stream\n+     * @param file Input stream.\n@@ -136,1 +128,1 @@\n-        return bcelComparator.equals(this, obj);\n+        return obj instanceof Field && bcelComparator.equals(this, (Field) obj);\n@@ -152,0 +144,2 @@\n+     * See https:\/\/docs.oracle.com\/javase\/specs\/jvms\/se8\/html\/jvms-4.html#jvms-4.2.2\n+     *\n@@ -155,1 +149,1 @@\n-        return Type.getReturnType(getSignature());\n+        return Type.getType(getSignature());\n@@ -159,1 +153,1 @@\n-     * Return value as defined by given BCELComparator strategy. By default return the hashcode of the field's name XOR\n+     * Return value as defined by given BCELComparator strategy. By default return the hash code of the field's name XOR\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/Field.java","additions":16,"deletions":22,"binary":false,"changes":38,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,1 +31,1 @@\n- * @LastModified: Jan 2020\n+ * @LastModified: Sept 2025\n@@ -75,1 +75,1 @@\n-     * Construct object from file stream.\n+     * Constructs object from file stream.\n@@ -91,1 +91,1 @@\n-     * Construct object from file stream.\n+     * Constructs object from file stream.\n@@ -140,1 +140,1 @@\n-            throw new IllegalStateException(e);\n+            throw new UnsupportedOperationException(e);\n@@ -155,4 +155,2 @@\n-        if (attributes != null) {\n-            for (final Attribute attribute : attributes) {\n-                attribute.dump(file);\n-            }\n+        for (final Attribute attribute : attributes) {\n+            attribute.dump(file);\n@@ -174,0 +172,16 @@\n+    \/**\n+     * Gets attribute for given tag.\n+     * @return Attribute for given tag, null if not found.\n+     * Refer to {@link com.sun.org.apache.bcel.internal.Const#ATTR_UNKNOWN} constants named ATTR_* for possible values.\n+     * @since 6.10.0\n+     *\/\n+    @SuppressWarnings(\"unchecked\")\n+    public final <T extends Attribute> T getAttribute(final byte tag) {\n+        for (final Attribute attribute : getAttributes()) {\n+            if (attribute.getTag() == tag) {\n+                return (T) attribute;\n+            }\n+        }\n+        return null;\n+    }\n+\n@@ -224,1 +238,1 @@\n-     * @return String representation of object's type signature (java style)\n+     * @return String representation of object's type signature (Java style)\n@@ -241,2 +255,2 @@\n-        this.attributes = attributes;\n-        this.attributes_count = attributes != null ? attributes.length : 0; \/\/ init deprecated field\n+        this.attributes = attributes != null ? attributes : Attribute.EMPTY_ARRAY;\n+        this.attributes_count = this.attributes.length; \/\/ init deprecated field\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/FieldOrMethod.java","additions":26,"deletions":12,"binary":false,"changes":38,"status":"modified"},{"patch":"@@ -44,1 +44,1 @@\n-     * Construct object from file stream.\n+     * Constructs object from file stream.\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/InnerClass.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -45,1 +45,1 @@\n-    private static final InnerClass[] EMPTY_INNER_CLASSE_ARRAY = {};\n+    private static final InnerClass[] EMPTY_ARRAY = {};\n@@ -60,1 +60,1 @@\n-     * Construct object from input stream.\n+     * Constructs object from input stream.\n@@ -85,1 +85,1 @@\n-        this.innerClasses = innerClasses != null ? innerClasses : EMPTY_INNER_CLASSE_ARRAY;\n+        this.innerClasses = innerClasses != null ? innerClasses : EMPTY_ARRAY;\n@@ -144,1 +144,1 @@\n-        this.innerClasses = innerClasses != null ? innerClasses : EMPTY_INNER_CLASSE_ARRAY;\n+        this.innerClasses = innerClasses != null ? innerClasses : EMPTY_ARRAY;\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/InnerClasses.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -0,0 +1,53 @@\n+\/*\n+ * reserved comment block\n+ * DO NOT REMOVE OR ALTER!\n+ *\/\n+\/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http:\/\/www.apache.org\/licenses\/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ *\/\n+\n+package com.sun.org.apache.bcel.internal.classfile;\n+\n+\/**\n+ * Thrown when the BCEL attempts to read a class file and determines that a class is malformed or otherwise cannot be interpreted as a class file.\n+ *\n+ * @since 6.8.0\n+ *\/\n+public class InvalidMethodSignatureException extends ClassFormatException {\n+\n+    private static final long serialVersionUID = 1L;\n+\n+    \/**\n+     * Constructs a new instance with the specified invalid signature as the message.\n+     *\n+     * @param signature The invalid signature is saved for later retrieval by the {@link #getMessage()} method.\n+     *\/\n+    public InvalidMethodSignatureException(final String signature) {\n+        super(signature);\n+    }\n+\n+    \/**\n+     * Constructs a new instance with the specified invalid signature as the message and a cause.\n+     *\n+     * @param signature The invalid signature is saved for later retrieval by the {@link #getMessage()} method.\n+     * @param cause     the cause (which is saved for later retrieval by the {@link #getCause()} method). A {@code null} value is permitted, and indicates that\n+     *                  the cause is nonexistent or unknown.\n+     *\/\n+    public InvalidMethodSignatureException(final String signature, final Throwable cause) {\n+        super(signature, cause);\n+    }\n+\n+}\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/InvalidMethodSignatureException.java","additions":53,"deletions":0,"binary":false,"changes":53,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -41,0 +41,1 @@\n+import jdk.xml.internal.Utils;\n@@ -49,1 +50,1 @@\n- * @LastModified: Feb 2023\n+ * @LastModified: Sept 2025\n@@ -70,1 +71,1 @@\n-    private static BCELComparator bcelComparator = new BCELComparator() {\n+    private static BCELComparator<JavaClass> bcelComparator = new BCELComparator<JavaClass>() {\n@@ -73,4 +74,2 @@\n-        public boolean equals(final Object o1, final Object o2) {\n-            final JavaClass THIS = (JavaClass) o1;\n-            final JavaClass THAT = (JavaClass) o2;\n-            return Objects.equals(THIS.getClassName(), THAT.getClassName());\n+        public boolean equals(final JavaClass a, final JavaClass b) {\n+            return a == b || a != null && b != null && Objects.equals(a.getClassName(), b.getClassName());\n@@ -80,3 +79,2 @@\n-        public int hashCode(final Object o) {\n-            final JavaClass THIS = (JavaClass) o;\n-            return THIS.getClassName().hashCode();\n+        public int hashCode(final JavaClass o) {\n+            return o != null ? Objects.hashCode(o.getClassName()) : 0;\n@@ -87,1 +85,1 @@\n-     * @return Comparison strategy object\n+     * @return Comparison strategy object.\n@@ -89,1 +87,1 @@\n-    public static BCELComparator getComparator() {\n+    public static BCELComparator<JavaClass> getComparator() {\n@@ -103,1 +101,1 @@\n-     * @param comparator Comparison strategy object\n+     * @param comparator Comparison strategy object.\n@@ -105,1 +103,1 @@\n-    public static void setComparator(final BCELComparator comparator) {\n+    public static void setComparator(final BCELComparator<JavaClass> comparator) {\n@@ -131,0 +129,1 @@\n+    private boolean isRecord;\n@@ -133,0 +132,1 @@\n+    private boolean computedRecord;\n@@ -180,3 +180,1 @@\n-        if (interfaces == null) {\n-            interfaces = Const.EMPTY_INT_ARRAY;\n-        }\n+        interfaces = Utils.createEmptyArrayIfNull(interfaces);\n@@ -187,1 +185,1 @@\n-            fields = Field.EMPTY_FIELD_ARRAY;\n+            fields = Field.EMPTY_ARRAY;\n@@ -190,1 +188,1 @@\n-            methods = Method.EMPTY_METHOD_ARRAY;\n+            methods = Method.EMPTY_ARRAY;\n@@ -257,0 +255,13 @@\n+    private void computeIsRecord() {\n+        if (computedRecord) {\n+            return;\n+        }\n+        for (final Attribute attribute : this.attributes) {\n+            if (attribute instanceof Record) {\n+                isRecord = true;\n+                break;\n+            }\n+        }\n+        this.computedRecord = true;\n+    }\n+\n@@ -387,1 +398,41 @@\n-        return bcelComparator.equals(this, obj);\n+        return obj instanceof JavaClass && bcelComparator.equals(this, (JavaClass) obj);\n+    }\n+\n+    \/**\n+     * Finds a visible field by name and type in this class and its super classes.\n+     * @param fieldName the field name to find\n+     * @param fieldType the field type to find\n+     * @return field matching given name and type, null if field is not found or not accessible from this class.\n+     * @throws ClassNotFoundException\n+     * @since 6.8.0\n+     *\/\n+    public Field findField(final String fieldName, final Type fieldType) throws ClassNotFoundException {\n+        for (final Field field : fields) {\n+            if (field.getName().equals(fieldName)) {\n+                final Type fType = Type.getType(field.getSignature());\n+                \/*\n+                 * TODO: Check if assignment compatibility is sufficient. What does Sun do?\n+                 *\/\n+                if (fType.equals(fieldType)) {\n+                    return field;\n+                }\n+            }\n+        }\n+\n+        final JavaClass superclass = getSuperClass();\n+        if (superclass != null && !\"java.lang.Object\".equals(superclass.getClassName())) {\n+            final Field f = superclass.findField(fieldName, fieldType);\n+            if (f != null && (f.isPublic() || f.isProtected() || !f.isPrivate() && packageName.equals(superclass.getPackageName()))) {\n+                return f;\n+            }\n+        }\n+        final JavaClass[] implementedInterfaces = getInterfaces();\n+        if (implementedInterfaces != null) {\n+            for (final JavaClass implementedInterface : implementedInterfaces) {\n+                final Field f = implementedInterface.findField(fieldName, fieldType);\n+                if (f != null) {\n+                    return f;\n+                }\n+            }\n+        }\n+        return null;\n@@ -391,1 +442,1 @@\n-     * Get all interfaces implemented by this JavaClass (transitively).\n+     * Gets all interfaces implemented by this JavaClass (transitively).\n@@ -412,1 +463,1 @@\n-        return allInterfaces.toArray(JavaClass.EMPTY_ARRAY);\n+        return allInterfaces.toArray(EMPTY_ARRAY);\n@@ -427,0 +478,16 @@\n+    \/**\n+     * Gets attribute for given tag.\n+     * @return Attribute for given tag, null if not found.\n+     * Refer to {@link com.sun.org.apache.bcel.internal.Const#ATTR_UNKNOWN} constants named ATTR_* for possible values.\n+     * @since 6.10.0\n+     *\/\n+    @SuppressWarnings(\"unchecked\")\n+    public final <T extends Attribute> T getAttribute(final byte tag) {\n+        for (final Attribute attribute : getAttributes()) {\n+            if (attribute.getTag() == tag) {\n+                return (T) attribute;\n+            }\n+        }\n+        return null;\n+    }\n+\n@@ -498,1 +565,1 @@\n-     * Get interfaces directly implemented by this JavaClass.\n+     * Gets interfaces directly implemented by this JavaClass.\n@@ -590,1 +657,1 @@\n-     * @return the superclass for this JavaClass object, or null if this is java.lang.Object\n+     * @return the superclass for this JavaClass object, or null if this is {@link Object}\n@@ -610,1 +677,1 @@\n-        return allSuperClasses.toArray(JavaClass.EMPTY_ARRAY);\n+        return allSuperClasses.toArray(EMPTY_ARRAY);\n@@ -614,2 +681,2 @@\n-     * returns the super class name of this class. In the case that this class is java.lang.Object, it will return itself\n-     * (java.lang.Object). This is probably incorrect but isn't fixed at this time to not break existing clients.\n+     * returns the super class name of this class. In the case that this class is {@link Object}, it will return itself\n+     * ({@link Object}). This is probably incorrect but isn't fixed at this time to not break existing clients.\n@@ -631,1 +698,1 @@\n-     * Return value as defined by given BCELComparator strategy. By default return the hashcode of the class name.\n+     * Return value as defined by given BCELComparator strategy. By default return the hash code of the class name.\n@@ -648,1 +715,1 @@\n-        if (this.equals(inter)) {\n+        if (equals(inter)) {\n@@ -667,1 +734,1 @@\n-        if (this.equals(superclass)) {\n+        if (equals(superclass)) {\n@@ -701,0 +768,11 @@\n+    \/**\n+     * Tests whether this class was declared as a record\n+     *\n+     * @return true if a record attribute is present, false otherwise.\n+     * @since 6.9.0\n+     *\/\n+    public boolean isRecord() {\n+        computeIsRecord();\n+        return this.isRecord;\n+    }\n+\n@@ -709,1 +787,1 @@\n-        this.attributes = attributes;\n+        this.attributes = attributes != null ? attributes : Attribute.EMPTY_ARRAY;\n@@ -737,1 +815,1 @@\n-        this.fields = fields;\n+        this.fields = fields != null ? fields : Field.EMPTY_ARRAY;\n@@ -741,1 +819,1 @@\n-     * Set File name of class, aka SourceFile attribute value\n+     * Sets File name of class, aka SourceFile attribute value\n@@ -751,1 +829,1 @@\n-        this.interfaceNames = interfaceNames;\n+        this.interfaceNames = Utils.createEmptyArrayIfNull(interfaceNames, String[].class);\n@@ -758,1 +836,1 @@\n-        this.interfaces = interfaces;\n+        this.interfaces = Utils.createEmptyArrayIfNull(interfaces);\n@@ -772,1 +850,1 @@\n-        this.methods = methods;\n+        this.methods = methods != null ? methods : Method.EMPTY_ARRAY;\n@@ -790,1 +868,1 @@\n-     * Set absolute path to file this class was read from.\n+     * Sets absolute path to file this class was read from.\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/JavaClass.java","additions":115,"deletions":37,"binary":false,"changes":152,"status":"modified"},{"patch":"@@ -43,1 +43,1 @@\n-    \/** number in source file *\/\n+    \/** Number in source file *\/\n@@ -47,1 +47,1 @@\n-     * Construct object from file stream.\n+     * Constructs object from file stream.\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/LineNumber.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -39,1 +39,1 @@\n- * @LastModified: May 2021\n+ * @LastModified: Sept 2025\n@@ -47,1 +47,1 @@\n-     * Construct object from input stream.\n+     * Constructs a new instance from a data input stream.\n@@ -64,2 +64,2 @@\n-    \/*\n-     * @param nameIndex Index of name\n+    \/**\n+     * Constructs a new instance.\n@@ -67,0 +67,1 @@\n+     * @param nameIndex Index of name\n@@ -68,1 +69,0 @@\n-     *\n@@ -70,1 +70,0 @@\n-     *\n@@ -79,3 +78,5 @@\n-    \/*\n-     * Initialize from another object. Note that both objects use the same references (shallow copy). Use copy() for a\n-     * physical copy.\n+    \/**\n+     * Constructs a new instance from another.\n+     * <p>\n+     * Note that both objects use the same references (shallow copy). Use copy() for a physical copy.\n+     * <\/p>\n@@ -193,1 +194,1 @@\n-        this.lineNumberTable = lineNumberTable;\n+        this.lineNumberTable = lineNumberTable != null ? lineNumberTable : LineNumber.EMPTY_ARRAY;\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/LineNumberTable.java","additions":12,"deletions":11,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -43,0 +43,2 @@\n+    private static final LocalVariable[] EMPTY_ARRAY = {};\n+\n@@ -46,1 +48,1 @@\n-     * Construct object from input stream.\n+     * Constructs object from input stream.\n@@ -71,1 +73,1 @@\n-        this.localVariableTable = localVariableTable != null ? localVariableTable : LocalVariable.EMPTY_ARRAY;\n+        this.localVariableTable = localVariableTable != null ? localVariableTable : EMPTY_ARRAY;\n@@ -170,1 +172,1 @@\n-        return localVariableTable == null ? 0 : localVariableTable.length;\n+        return localVariableTable.length;\n@@ -179,1 +181,1 @@\n-        this.localVariableTable = localVariableTable;\n+        this.localVariableTable = localVariableTable != null ? localVariableTable : EMPTY_ARRAY;\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/LocalVariableTable.java","additions":6,"deletions":4,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -66,0 +66,2 @@\n+    private static final LocalVariable[] EMPTY_ARRAY = {};\n+\n@@ -70,1 +72,0 @@\n-\n@@ -73,1 +74,0 @@\n-\n@@ -100,1 +100,0 @@\n-\n@@ -122,1 +121,0 @@\n-\n@@ -140,1 +138,1 @@\n-        this.localVariableTypeTable = localVariableTable;\n+        this.localVariableTypeTable = localVariableTable != null ? localVariableTable : EMPTY_ARRAY;\n@@ -149,1 +147,0 @@\n-\n@@ -152,1 +149,0 @@\n-\n@@ -157,1 +153,0 @@\n-\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/LocalVariableTypeTable.java","additions":3,"deletions":8,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -43,1 +43,1 @@\n-    private static BCELComparator bcelComparator = new BCELComparator() {\n+    private static BCELComparator<Method> bcelComparator = new BCELComparator<Method>() {\n@@ -46,4 +46,2 @@\n-        public boolean equals(final Object o1, final Object o2) {\n-            final Method THIS = (Method) o1;\n-            final Method THAT = (Method) o2;\n-            return Objects.equals(THIS.getName(), THAT.getName()) && Objects.equals(THIS.getSignature(), THAT.getSignature());\n+        public boolean equals(final Method a, final Method b) {\n+            return a == b || a != null && b != null && Objects.equals(a.getName(), b.getName()) && Objects.equals(a.getSignature(), b.getSignature());\n@@ -53,3 +51,2 @@\n-        public int hashCode(final Object o) {\n-            final Method THIS = (Method) o;\n-            return THIS.getSignature().hashCode() ^ THIS.getName().hashCode();\n+        public int hashCode(final Method o) {\n+            return o != null ? Objects.hash(o.getSignature(), o.getName()) : 0;\n@@ -60,1 +57,1 @@\n-     * Empty array.\n+     * @return Comparison strategy object.\n@@ -62,6 +59,1 @@\n-    static final Method[] EMPTY_METHOD_ARRAY = {};\n-\n-    \/**\n-     * @return Comparison strategy object\n-     *\/\n-    public static BCELComparator getComparator() {\n+    public static BCELComparator<Method> getComparator() {\n@@ -72,1 +64,1 @@\n-     * @param comparator Comparison strategy object\n+     * @param comparator Comparison strategy object.\n@@ -74,1 +66,1 @@\n-    public static void setComparator(final BCELComparator comparator) {\n+    public static void setComparator(final BCELComparator<Method> comparator) {\n@@ -78,1 +70,1 @@\n-    \/\/ annotations defined on the parameters of a method\n+    \/** Annotations defined on the parameters of a method. *\/\n@@ -88,1 +80,1 @@\n-     * Construct object from file stream.\n+     * Constructs object from file stream.\n@@ -145,1 +137,1 @@\n-        return bcelComparator.equals(this, obj);\n+        return obj instanceof Method && bcelComparator.equals(this, (Method) obj);\n@@ -192,1 +184,1 @@\n-     * @return LocalVariableTable of code attribute if any, i.e. the call is forwarded to the Code atribute.\n+     * @return LocalVariableTable of code attribute if any, i.e. the call is forwarded to the Code attribute.\n@@ -202,0 +194,13 @@\n+    \/**\n+     * Gets the local variable type table attribute {@link LocalVariableTypeTable}.\n+     * @return LocalVariableTypeTable of code attribute if any, i.e. the call is forwarded to the Code attribute.\n+     * @since 6.10.0\n+     *\/\n+    public LocalVariableTypeTable getLocalVariableTypeTable() {\n+        final Code code = getCode();\n+        if (code == null) {\n+            return null;\n+        }\n+        return code.getLocalVariableTypeTable();\n+    }\n+\n@@ -221,1 +226,1 @@\n-     * Return value as defined by given BCELComparator strategy. By default return the hashcode of the method's name XOR\n+     * Return value as defined by given BCELComparator strategy. By default return the hash code of the method's name XOR\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/Method.java","additions":27,"deletions":22,"binary":false,"changes":49,"status":"modified"},{"patch":"@@ -32,0 +32,3 @@\n+ * <p>\n+ * Implements {@link Node} as of 6.7.0.\n+ * <\/p>\n@@ -49,1 +52,1 @@\n-     * Construct object from input stream.\n+     * Constructs an instance from a DataInput.\n@@ -78,1 +81,1 @@\n-     * Dump object to file stream on binary format.\n+     * Dumps object to file stream on binary format.\n@@ -97,1 +100,4 @@\n-     * Returns the name of the parameter.\n+     * Gets the name of the parameter.\n+     *\n+     * @param constantPool The pool to query.\n+     * @return Constant from the given pool.\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/MethodParameter.java","additions":9,"deletions":3,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -45,1 +45,1 @@\n-    private static final MethodParameter[] EMPTY_METHOD_PARAMETER_ARRAY = {};\n+    private static final MethodParameter[] EMPTY_ARRAY = {};\n@@ -47,1 +47,1 @@\n-    private MethodParameter[] parameters = EMPTY_METHOD_PARAMETER_ARRAY;\n+    private MethodParameter[] parameters = EMPTY_ARRAY;\n@@ -51,1 +51,0 @@\n-\n@@ -68,1 +67,0 @@\n-\n@@ -99,1 +97,1 @@\n-        this.parameters = parameters;\n+        this.parameters = parameters != null ? parameters : EMPTY_ARRAY;\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/MethodParameters.java","additions":3,"deletions":5,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -47,0 +47,7 @@\n+    private static String getClassNameAtIndex(final ConstantPool cp, final int index, final boolean compactClassName) {\n+        final String className = cp.getConstantString(index, Const.CONSTANT_Class);\n+        if (compactClassName) {\n+            return Utility.compactClassName(className, false);\n+        }\n+        return className;\n+    }\n@@ -49,1 +56,0 @@\n-    private final int moduleVersionIndex;\n@@ -51,0 +57,1 @@\n+    private final int moduleVersionIndex;\n@@ -56,0 +63,1 @@\n+\n@@ -59,1 +67,1 @@\n-     * Construct object from input stream.\n+     * Constructs object from input stream.\n@@ -116,2 +124,0 @@\n-    \/\/ TODO add more getters and setters?\n-\n@@ -189,0 +195,19 @@\n+    \/**\n+     * Gets flags for this module.\n+     * @return module flags\n+     * @since 6.10.0\n+     *\/\n+    public int getModuleFlags() {\n+        return moduleFlags;\n+    }\n+\n+    \/**\n+     * Gets module name.\n+     * @param cp Array of constants\n+     * @return module name\n+     * @since 6.10.0\n+     *\/\n+    public String getModuleName(final ConstantPool cp) {\n+        return cp.getConstantString(moduleNameIndex, Const.CONSTANT_Module);\n+    }\n+\n@@ -213,0 +238,25 @@\n+    \/**\n+     * Gets the array of class names for this module's uses.\n+     * @param constantPool Array of constants usually obtained from the ClassFile object\n+     * @param compactClassName false for original constant pool value, true to replace '\/' with '.'\n+     * @return array of used class names\n+     * @since 6.10.0\n+     *\/\n+    public String[] getUsedClassNames(final ConstantPool constantPool, final boolean compactClassName) {\n+        final String[] usedClassNames = new String[usesCount];\n+        for (int i = 0; i < usesCount; i++) {\n+            usedClassNames[i] = getClassNameAtIndex(constantPool, usesIndex[i], compactClassName);\n+        }\n+        return usedClassNames;\n+    }\n+\n+    \/**\n+     * Gets version for this module.\n+     * @param cp Array of constants\n+     * @return version from constant pool, \"0\" if version index is 0\n+     * @since 6.10.0\n+     *\/\n+    public String getVersion(final ConstantPool cp) {\n+        return moduleVersionIndex == 0 ? \"0\" : cp.getConstantString(moduleVersionIndex, Const.CONSTANT_Utf8);\n+    }\n+\n@@ -221,1 +271,1 @@\n-        buf.append(\"  name:    \").append(Utility.pathToPackage(cp.getConstantString(moduleNameIndex, Const.CONSTANT_Module))).append(\"\\n\");\n+        buf.append(\"  name:    \").append(Utility.pathToPackage(getModuleName(cp))).append(\"\\n\");\n@@ -223,1 +273,1 @@\n-        final String version = moduleVersionIndex == 0 ? \"0\" : cp.getConstantString(moduleVersionIndex, Const.CONSTANT_Utf8);\n+        final String version = getVersion(cp);\n@@ -243,2 +293,2 @@\n-            final String className = cp.getConstantString(index, Const.CONSTANT_Class);\n-            buf.append(\"    \").append(Utility.compactClassName(className, false)).append(\"\\n\");\n+            final String className = getClassNameAtIndex(cp, index, true);\n+            buf.append(\"    \").append(className).append(\"\\n\");\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/Module.java","additions":58,"deletions":8,"binary":false,"changes":66,"status":"modified"},{"patch":"@@ -39,0 +39,3 @@\n+    private static String getToModuleNameAtIndex(final ConstantPool constantPool, final int index) {\n+        return constantPool.getConstantString(index, Const.CONSTANT_Module);\n+    }\n@@ -42,0 +45,1 @@\n+\n@@ -45,1 +49,1 @@\n-     * Construct object from file stream.\n+     * Constructs object from file stream.\n@@ -71,2 +75,0 @@\n-    \/\/ TODO add more getters and setters?\n-\n@@ -100,0 +102,33 @@\n+    \/**\n+     * Gets the flags for this ModuleExports.\n+     * @return the exportsFlags\n+     * @since 6.10.0\n+     *\/\n+    public int getExportsFlags() {\n+        return exportsFlags;\n+    }\n+\n+    \/**\n+     * Gets the exported package name.\n+     * @param constantPool the constant pool from the ClassFile\n+     * @return the exported package name\n+     * @since 6.10.0\n+     *\/\n+    public String getPackageName(final ConstantPool constantPool) {\n+        return constantPool.constantToString(exportsIndex, Const.CONSTANT_Package);\n+    }\n+\n+    \/**\n+     * Gets an array of module names for this ModuleExports.\n+     * @param constantPool Array of constants usually obtained from the ClassFile object\n+     * @return array of module names following 'exports to'\n+     * @since 6.10.0\n+     *\/\n+    public String[] getToModuleNames(final ConstantPool constantPool) {\n+        final String[] toModuleNames = new String[exportsToCount];\n+        for (int i = 0; i < exportsToCount; i++) {\n+            toModuleNames[i] = getToModuleNameAtIndex(constantPool, exportsToIndex[i]);\n+        }\n+        return toModuleNames;\n+    }\n+\n@@ -113,2 +148,2 @@\n-        final String packageName = constantPool.constantToString(exportsIndex, Const.CONSTANT_Package);\n-        buf.append(Utility.compactClassName(packageName, false));\n+        final String packageName = getPackageName(constantPool);\n+        buf.append(packageName);\n@@ -118,2 +153,2 @@\n-            final String moduleName = constantPool.getConstantString(index, Const.CONSTANT_Module);\n-            buf.append(\"      \").append(Utility.compactClassName(moduleName, false)).append(\"\\n\");\n+            final String moduleName = getToModuleNameAtIndex(constantPool, index);\n+            buf.append(\"      \").append(moduleName).append(\"\\n\");\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/ModuleExports.java","additions":42,"deletions":7,"binary":false,"changes":49,"status":"modified"},{"patch":"@@ -42,1 +42,1 @@\n-     * Construct object from input stream.\n+     * Constructs object from input stream.\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/ModuleMainClass.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -39,0 +39,3 @@\n+    private static String getToModuleNameAtIndex(final ConstantPool constantPool, final int index) {\n+        return constantPool.getConstantString(index, Const.CONSTANT_Module);\n+    }\n@@ -42,0 +45,1 @@\n+\n@@ -45,1 +49,1 @@\n-     * Construct object from file stream.\n+     * Constructs object from file stream.\n@@ -71,2 +75,0 @@\n-    \/\/ TODO add more getters and setters?\n-\n@@ -100,0 +102,33 @@\n+    \/**\n+     * Gets the flags for this ModuleOpens.\n+     * @return the opensFlags\n+     * @since 6.10.0\n+     *\/\n+    public int getOpensFlags() {\n+        return opensFlags;\n+    }\n+\n+    \/**\n+     * Gets the opened package name.\n+     * @param constantPool the constant pool from the ClassFile\n+     * @return the opened package name\n+     * @since 6.10.0\n+     *\/\n+    public String getPackageName(final ConstantPool constantPool) {\n+        return constantPool.constantToString(opensIndex, Const.CONSTANT_Package);\n+    }\n+\n+    \/**\n+     * Gets an array of module names for this ModuleOpens.\n+     * @param constantPool Array of constants usually obtained from the ClassFile object\n+     * @return array of module names following 'opens to'\n+     * @since 6.10.0\n+     *\/\n+    public String[] getToModuleNames(final ConstantPool constantPool) {\n+        final String[] toModuleNames = new String[opensToCount];\n+        for (int i = 0; i < opensToCount; i++) {\n+            toModuleNames[i] = getToModuleNameAtIndex(constantPool, opensToIndex[i]);\n+        }\n+        return toModuleNames;\n+    }\n+\n@@ -113,2 +148,2 @@\n-        final String packageName = constantPool.constantToString(opensIndex, Const.CONSTANT_Package);\n-        buf.append(Utility.compactClassName(packageName, false));\n+        final String packageName = getPackageName(constantPool);\n+        buf.append(packageName);\n@@ -118,2 +153,2 @@\n-            final String moduleName = constantPool.getConstantString(index, Const.CONSTANT_Module);\n-            buf.append(\"      \").append(Utility.compactClassName(moduleName, false)).append(\"\\n\");\n+            final String moduleName = getToModuleNameAtIndex(constantPool, index);\n+            buf.append(\"      \").append(moduleName).append(\"\\n\");\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/ModuleOpens.java","additions":42,"deletions":7,"binary":false,"changes":49,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2023, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -30,0 +30,1 @@\n+import jdk.xml.internal.Utils;\n@@ -36,1 +37,1 @@\n- * @LastModified: Feb 2023\n+ * @LastModified: Sept 2025\n@@ -43,1 +44,1 @@\n-     * Construct object from input stream.\n+     * Constructs object from input stream.\n@@ -68,1 +69,1 @@\n-        this.packageIndexTable = packageIndexTable != null ? packageIndexTable : Const.EMPTY_INT_ARRAY;\n+        this.packageIndexTable = Utils.createEmptyArrayIfNull(packageIndexTable);\n@@ -148,1 +149,1 @@\n-        this.packageIndexTable = packageIndexTable != null ? packageIndexTable : Const.EMPTY_INT_ARRAY;\n+        this.packageIndexTable = Utils.createEmptyArrayIfNull(packageIndexTable);\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/ModulePackages.java","additions":6,"deletions":5,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -39,0 +39,7 @@\n+    private static String getImplementationClassNameAtIndex(final ConstantPool constantPool, final int index, final boolean compactClassName) {\n+        final String className = constantPool.getConstantString(index, Const.CONSTANT_Class);\n+        if (compactClassName) {\n+            return Utility.compactClassName(className, false);\n+        }\n+        return className;\n+    }\n@@ -41,0 +48,1 @@\n+\n@@ -44,1 +52,1 @@\n-     * Construct object from file stream.\n+     * Constructs object from file stream.\n@@ -69,2 +77,0 @@\n-    \/\/ TODO add more getters and setters?\n-\n@@ -97,0 +103,25 @@\n+    \/**\n+     * Gets the array of implementation class names for this ModuleProvides.\n+     * @param constantPool Array of constants usually obtained from the ClassFile object\n+     * @param compactClassName false for original constant pool value, true to replace '\/' with '.'\n+     * @return array of implementation class names\n+     * @since 6.10.0\n+     *\/\n+    public String[] getImplementationClassNames(final ConstantPool constantPool, final boolean compactClassName) {\n+        final String[] implementationClassNames = new String[providesWithCount];\n+        for (int i = 0; i < providesWithCount; i++) {\n+            implementationClassNames[i] = getImplementationClassNameAtIndex(constantPool, providesWithIndex[i], compactClassName);\n+        }\n+        return implementationClassNames;\n+    }\n+\n+    \/**\n+     * Gets the interface name for this ModuleProvides.\n+     * @param constantPool Array of constants usually obtained from the ClassFile object\n+     * @return interface name\n+     * @since 6.10.0\n+     *\/\n+    public String getInterfaceName(final ConstantPool constantPool) {\n+        return constantPool.constantToString(providesIndex, Const.CONSTANT_Class);\n+    }\n+\n@@ -110,2 +141,2 @@\n-        final String interfaceName = constantPool.constantToString(providesIndex, Const.CONSTANT_Class);\n-        buf.append(Utility.compactClassName(interfaceName, false));\n+        final String interfaceName = getInterfaceName(constantPool);\n+        buf.append(interfaceName);\n@@ -114,2 +145,2 @@\n-            final String className = constantPool.getConstantString(index, Const.CONSTANT_Class);\n-            buf.append(\"      \").append(Utility.compactClassName(className, false)).append(\"\\n\");\n+            final String className = getImplementationClassNameAtIndex(constantPool, index, true);\n+            buf.append(\"      \").append(className).append(\"\\n\");\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/ModuleProvides.java","additions":38,"deletions":7,"binary":false,"changes":45,"status":"modified"},{"patch":"@@ -44,1 +44,1 @@\n-     * Construct object from file stream.\n+     * Constructs object from file stream.\n@@ -66,2 +66,0 @@\n-    \/\/ TODO add more getters and setters?\n-\n@@ -92,0 +90,29 @@\n+    \/**\n+     * Gets the module name from the constant pool.\n+     * @param constantPool Array of constants usually obtained from the ClassFile object\n+     * @return module name\n+     * @since 6.10.0\n+     *\/\n+    public String getModuleName(final ConstantPool constantPool) {\n+        return constantPool.constantToString(requiresIndex, Const.CONSTANT_Module);\n+    }\n+\n+    \/**\n+     * Gets the flags for this ModuleRequires.\n+     * @return the requiresFlags\n+     * @since 6.10.0\n+     *\/\n+    public int getRequiresFlags() {\n+        return requiresFlags;\n+    }\n+\n+    \/**\n+     * Gets the required version from the constant pool.\n+     * @param constantPool Array of constants usually obtained from the ClassFile object\n+     * @return required version, \"0\" if version index is 0.\n+     * @since 6.10.0\n+     *\/\n+    public String getVersion(final ConstantPool constantPool) {\n+        return requiresVersionIndex == 0 ? \"0\" : constantPool.getConstantString(requiresVersionIndex, Const.CONSTANT_Utf8);\n+    }\n+\n@@ -105,2 +132,2 @@\n-        final String moduleName = constantPool.constantToString(requiresIndex, Const.CONSTANT_Module);\n-        buf.append(Utility.compactClassName(moduleName, false));\n+        final String moduleName = getModuleName(constantPool);\n+        buf.append(moduleName);\n@@ -108,1 +135,1 @@\n-        final String version = requiresVersionIndex == 0 ? \"0\" : constantPool.getConstantString(requiresVersionIndex, Const.CONSTANT_Utf8);\n+        final String version = getVersion(constantPool);\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/ModuleRequires.java","additions":33,"deletions":6,"binary":false,"changes":39,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2023, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -30,0 +30,1 @@\n+import jdk.xml.internal.Utils;\n@@ -37,1 +38,1 @@\n- * @LastModified: Feb 2023\n+ * @LastModified: Sept 2025\n@@ -44,1 +45,1 @@\n-     * Construct object from input stream.\n+     * Constructs object from input stream.\n@@ -69,1 +70,1 @@\n-        this.classes = classes != null ? classes : Const.EMPTY_INT_ARRAY;\n+        this.classes = Utils.createEmptyArrayIfNull(classes);\n@@ -149,1 +150,1 @@\n-        this.classes = classes != null ? classes : Const.EMPTY_INT_ARRAY;\n+        this.classes = Utils.createEmptyArrayIfNull(classes);\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/NestMembers.java","additions":6,"deletions":5,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -29,1 +29,1 @@\n-    void accept(Visitor obj);\n+    void accept(Visitor visitor);\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/Node.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -41,1 +41,1 @@\n-     * Construct object from input stream.\n+     * Constructs object from input stream.\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/PMGClass.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -40,1 +40,4 @@\n-    public static ParameterAnnotationEntry[] createParameterAnnotationEntries(final Attribute[] attrs) {\n+    public static ParameterAnnotationEntry[] createParameterAnnotationEntries(final Attribute[] attributes) {\n+        if (attributes == null) {\n+            return EMPTY_ARRAY;\n+        }\n@@ -42,2 +45,2 @@\n-        final List<ParameterAnnotationEntry> accumulatedAnnotations = new ArrayList<>(attrs.length);\n-        for (final Attribute attribute : attrs) {\n+        final List<ParameterAnnotationEntry> accumulatedAnnotations = new ArrayList<>(attributes.length);\n+        for (final Attribute attribute : attributes) {\n@@ -46,1 +49,4 @@\n-                Collections.addAll(accumulatedAnnotations, runtimeAnnotations.getParameterAnnotationEntries());\n+                final ParameterAnnotationEntry[] parameterAnnotationEntries = runtimeAnnotations.getParameterAnnotationEntries();\n+                if (parameterAnnotationEntries != null) {\n+                    Collections.addAll(accumulatedAnnotations, parameterAnnotationEntries);\n+                }\n@@ -49,1 +55,1 @@\n-        return accumulatedAnnotations.toArray(ParameterAnnotationEntry.EMPTY_ARRAY);\n+        return accumulatedAnnotations.toArray(EMPTY_ARRAY);\n@@ -55,1 +61,1 @@\n-     * Construct object from input stream.\n+     * Constructs object from input stream.\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/ParameterAnnotationEntry.java","additions":12,"deletions":6,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -37,0 +37,2 @@\n+    private static final ParameterAnnotationEntry[] EMPTY_ARRAY = {};\n+\n@@ -41,0 +43,2 @@\n+     * Constructs a new instance.\n+     *\n@@ -58,0 +62,2 @@\n+     * Constructs a new instance.\n+     *\n@@ -123,1 +129,1 @@\n-        this.parameterAnnotationTable = parameterAnnotationTable;\n+        this.parameterAnnotationTable = parameterAnnotationTable != null ? parameterAnnotationTable : EMPTY_ARRAY;\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/ParameterAnnotations.java","additions":7,"deletions":1,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -0,0 +1,153 @@\n+\/*\n+ * reserved comment block\n+ * DO NOT REMOVE OR ALTER!\n+ *\/\n+\/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http:\/\/www.apache.org\/licenses\/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ *\/\n+\n+package com.sun.org.apache.bcel.internal.classfile;\n+\n+import java.io.DataInput;\n+import java.io.DataOutputStream;\n+import java.io.IOException;\n+\n+import com.sun.org.apache.bcel.internal.Const;\n+import com.sun.org.apache.bcel.internal.util.Args;\n+\n+\/**\n+ * Extends {@link Attribute} and records the classes and\n+ * interfaces that are authorized to claim membership in the nest hosted by the\n+ * current class or interface. There may be at most one Record attribute in a\n+ * ClassFile structure.\n+ *\n+ * @see Attribute\n+ * @since 6.9.0\n+ *\/\n+public final class Record extends Attribute {\n+\n+    private static final RecordComponentInfo[] EMPTY_RCI_ARRAY = {};\n+\n+    private static RecordComponentInfo[] readComponents(final DataInput input, final ConstantPool constantPool)\n+            throws IOException {\n+        final int classCount = input.readUnsignedShort();\n+        final RecordComponentInfo[] components = new RecordComponentInfo[classCount];\n+        for (int i = 0; i < classCount; i++) {\n+            components[i] = new RecordComponentInfo(input, constantPool);\n+        }\n+        return components;\n+    }\n+\n+    private RecordComponentInfo[] components;\n+\n+    \/**\n+     * Constructs object from input stream.\n+     *\n+     * @param nameIndex    Index in constant pool\n+     * @param length       Content length in bytes\n+     * @param input        Input stream\n+     * @param constantPool Array of constants\n+     * @throws IOException if an I\/O error occurs.\n+     *\/\n+    Record(final int nameIndex, final int length, final DataInput input, final ConstantPool constantPool)\n+            throws IOException {\n+        this(nameIndex, length, readComponents(input, constantPool), constantPool);\n+    }\n+\n+    \/**\n+     * Constructs a new instance using components.\n+     *\n+     * @param nameIndex    Index in constant pool\n+     * @param length       Content length in bytes\n+     * @param classes      Array of Record Component Info elements\n+     * @param constantPool Array of constants\n+     *\/\n+    public Record(final int nameIndex, final int length, final RecordComponentInfo[] classes,\n+            final ConstantPool constantPool) {\n+        super(Const.ATTR_RECORD, nameIndex, length, constantPool);\n+        this.components = classes != null ? classes : EMPTY_RCI_ARRAY;\n+        Args.requireU2(this.components.length, \"attributes.length\");\n+    }\n+\n+    \/**\n+     * Called by objects that are traversing the nodes of the tree implicitly\n+     * defined by the contents of a Java class. For example, the hierarchy of methods,\n+     * fields, attributes, etc. spawns a tree of objects.\n+     *\n+     * @param v Visitor object\n+     *\/\n+    @Override\n+    public void accept(final Visitor v) {\n+        v.visitRecord(this);\n+    }\n+\n+    \/**\n+     * Copies this instance and its components.\n+     *\n+     * @return a deep copy of this instance and its components.\n+     *\/\n+    @Override\n+    public Attribute copy(final ConstantPool constantPool) {\n+        final Record c = (Record) clone();\n+        if (components.length > 0) {\n+            c.components = components.clone();\n+        }\n+        c.setConstantPool(constantPool);\n+        return c;\n+    }\n+\n+    \/**\n+     * Dumps this instance into a file stream in binary format.\n+     *\n+     * @param file output stream.\n+     * @throws IOException if an I\/O error occurs.\n+     *\/\n+    @Override\n+    public void dump(final DataOutputStream file) throws IOException {\n+        super.dump(file);\n+        file.writeShort(components.length);\n+        for (final RecordComponentInfo component : components) {\n+            component.dump(file);\n+        }\n+    }\n+\n+    \/**\n+     * Gets all the record components.\n+     *\n+     * @return array of Record Component Info elements.\n+     *\/\n+    public RecordComponentInfo[] getComponents() {\n+        return components;\n+    }\n+\n+    \/**\n+     * Converts this instance to a String suitable for debugging.\n+     *\n+     * @return String a String suitable for debugging.\n+     *\/\n+    @Override\n+    public String toString() {\n+        final StringBuilder buf = new StringBuilder();\n+        buf.append(\"Record(\");\n+        buf.append(components.length);\n+        buf.append(\"):\\n\");\n+        for (final RecordComponentInfo component : components) {\n+            buf.append(\"  \").append(component.toString()).append(\"\\n\");\n+        }\n+        return buf.substring(0, buf.length() - 1); \/\/ remove the last newline\n+    }\n+\n+}\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/Record.java","additions":153,"deletions":0,"binary":false,"changes":153,"status":"added"},{"patch":"@@ -0,0 +1,139 @@\n+\/*\n+ * reserved comment block\n+ * DO NOT REMOVE OR ALTER!\n+ *\/\n+\/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http:\/\/www.apache.org\/licenses\/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ *\/\n+package com.sun.org.apache.bcel.internal.classfile;\n+\n+import java.io.DataInput;\n+import java.io.DataOutputStream;\n+import java.io.IOException;\n+\n+import com.sun.org.apache.bcel.internal.Const;\n+\n+\/**\n+ * Record component info from a record. Instances from this class maps\n+ * every component from a given record.\n+ *\n+ * @see <a href=\"https:\/\/docs.oracle.com\/javase\/specs\/jvms\/se14\/preview\/specs\/records-jvms.html#jvms-4.7.30\">\n+ *      The Java Virtual Machine Specification, Java SE 14 Edition, Records (preview)<\/a>\n+ * @since 6.9.0\n+ *\/\n+public class RecordComponentInfo implements Node {\n+\n+    private final int index;\n+    private final int descriptorIndex;\n+    private final Attribute[] attributes;\n+    private final ConstantPool constantPool;\n+\n+    \/**\n+     * Constructs a new instance from an input stream.\n+     *\n+     * @param input        Input stream\n+     * @param constantPool Array of constants\n+     * @throws IOException if an I\/O error occurs.\n+     *\/\n+    public RecordComponentInfo(final DataInput input, final ConstantPool constantPool) throws IOException {\n+        this.index = input.readUnsignedShort();\n+        this.descriptorIndex = input.readUnsignedShort();\n+        final int attributesCount = input.readUnsignedShort();\n+        this.attributes = new Attribute[attributesCount];\n+        for (int j = 0; j < attributesCount; j++) {\n+            attributes[j] = Attribute.readAttribute(input, constantPool);\n+        }\n+        this.constantPool = constantPool;\n+    }\n+\n+    @Override\n+    public void accept(final Visitor v) {\n+        v.visitRecordComponent(this);\n+    }\n+\n+    \/**\n+     * Dumps contents into a file stream in binary format.\n+     *\n+     * @param file Output file stream\n+     * @throws IOException if an I\/O error occurs.\n+     *\/\n+    public void dump(final DataOutputStream file) throws IOException {\n+        file.writeShort(index);\n+        file.writeShort(descriptorIndex);\n+        file.writeShort(attributes.length);\n+        for (final Attribute attribute : attributes) {\n+            attribute.dump(file);\n+        }\n+    }\n+\n+    \/**\n+     * Gets all attributes.\n+     *\n+     * @return all attributes.\n+     *\/\n+    public Attribute[] getAttributes() {\n+        return attributes;\n+    }\n+\n+    \/**\n+     * Gets the constant pool.\n+     *\n+     * @return Constant pool.\n+     *\/\n+    public ConstantPool getConstantPool() {\n+        return constantPool;\n+    }\n+\n+    \/**\n+     * Gets the description index.\n+     *\n+     * @return index in constant pool of this record component descriptor.\n+     *\/\n+    public int getDescriptorIndex() {\n+        return descriptorIndex;\n+    }\n+\n+    \/**\n+     * Gets the name index.\n+     *\n+     * @return index in constant pool of this record component name.\n+     *\/\n+    public int getIndex() {\n+        return index;\n+    }\n+\n+    \/**\n+     * Converts this instance to a String suitable for debugging.\n+     *\n+     * @return a String suitable for debugging.\n+     *\/\n+    @Override\n+    public String toString() {\n+        final StringBuilder buf = new StringBuilder();\n+        buf.append(\"RecordComponentInfo(\");\n+        buf.append(constantPool.getConstantString(index, Const.CONSTANT_Utf8));\n+        buf.append(\",\");\n+        buf.append(constantPool.getConstantString(descriptorIndex, Const.CONSTANT_Utf8));\n+        buf.append(\",\");\n+        buf.append(attributes.length);\n+        buf.append(\"):\\n\");\n+        for (final Attribute attribute : attributes) {\n+            buf.append(\"  \").append(attribute.toString()).append(\"\\n\");\n+        }\n+        return buf.substring(0, buf.length() - 1); \/\/ remove the last newline\n+    }\n+\n+}\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/RecordComponentInfo.java","additions":139,"deletions":0,"binary":false,"changes":139,"status":"added"},{"patch":"@@ -31,1 +31,1 @@\n- * represents an annotation that is represented in the class file but is not provided to the JVM.\n+ * An annotation that is represented in the class file but is not provided to the JVM.\n@@ -38,0 +38,2 @@\n+     * Constructs a new instance.\n+     *\n@@ -49,1 +51,3 @@\n-     * @return deep copy of this attribute\n+     * Creates a deep copy of this attribute.\n+     *\n+     * @return deep copy of this attribute.\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/RuntimeInvisibleAnnotations.java","additions":6,"deletions":2,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -37,0 +37,2 @@\n+     * Constructs a new instance.\n+     *\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/RuntimeInvisibleParameterAnnotations.java","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -31,1 +31,1 @@\n- * represents an annotation that is represented in the class file and is provided to the JVM.\n+ * An annotation that is represented in the class file and is provided to the JVM.\n@@ -38,0 +38,2 @@\n+     * Constructs a new instance.\n+     *\n@@ -49,1 +51,3 @@\n-     * @return deep copy of this attribute\n+     * Creates a deep copy of this attribute.\n+     *\n+     * @return deep copy of this attribute.\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/RuntimeVisibleAnnotations.java","additions":6,"deletions":2,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -37,0 +37,2 @@\n+     * Constructs a new instance.\n+     *\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/RuntimeVisibleParameterAnnotations.java","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -113,1 +113,1 @@\n-        \/\/ System.out.println(\"return from ident:\" + (char)ch);\n+        \/\/ System.out.println(\"return from ident:\" + (char) ch);\n@@ -131,1 +131,1 @@\n-                \/\/ System.out.println(\"so far:\" + buf2 + \":next:\" +(char)ch);\n+                \/\/ System.out.println(\"so far:\" + buf2 + \":next:\" +(char) ch);\n@@ -144,1 +144,1 @@\n-            \/\/ System.out.println(\"within ident:\"+ (char)ch);\n+            \/\/ System.out.println(\"within ident:\"+ (char) ch);\n@@ -147,1 +147,1 @@\n-        \/\/ System.out.println(\"regular return ident:\"+ (char)ch + \":\" + buf2);\n+        \/\/ System.out.println(\"regular return ident:\"+ (char) ch + \":\" + buf2);\n@@ -163,1 +163,1 @@\n-     * Construct object from file stream.\n+     * Constructs object from file stream.\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/Signature.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -57,1 +57,1 @@\n-            throw new ClassFormatException(\"SimpleElementValue doesnt know how to write out type \" + type);\n+            throw new ClassFormatException(\"SimpleElementValue doesn't know how to write out type \" + type);\n@@ -70,1 +70,1 @@\n-            throw new IllegalStateException(\"Dont call getValueBoolean() on a non BOOLEAN ElementValue\");\n+            throw new IllegalStateException(\"Don't call getValueBoolean() on a non BOOLEAN ElementValue\");\n@@ -78,1 +78,1 @@\n-            throw new IllegalStateException(\"Dont call getValueByte() on a non BYTE ElementValue\");\n+            throw new IllegalStateException(\"Don't call getValueByte() on a non BYTE ElementValue\");\n@@ -85,1 +85,1 @@\n-            throw new IllegalStateException(\"Dont call getValueChar() on a non CHAR ElementValue\");\n+            throw new IllegalStateException(\"Don't call getValueChar() on a non CHAR ElementValue\");\n@@ -92,1 +92,1 @@\n-            throw new IllegalStateException(\"Dont call getValueDouble() on a non DOUBLE ElementValue\");\n+            throw new IllegalStateException(\"Don't call getValueDouble() on a non DOUBLE ElementValue\");\n@@ -100,1 +100,1 @@\n-            throw new IllegalStateException(\"Dont call getValueFloat() on a non FLOAT ElementValue\");\n+            throw new IllegalStateException(\"Don't call getValueFloat() on a non FLOAT ElementValue\");\n@@ -108,1 +108,1 @@\n-            throw new IllegalStateException(\"Dont call getValueInt() on a non INT ElementValue\");\n+            throw new IllegalStateException(\"Don't call getValueInt() on a non INT ElementValue\");\n@@ -115,1 +115,1 @@\n-            throw new IllegalStateException(\"Dont call getValueLong() on a non LONG ElementValue\");\n+            throw new IllegalStateException(\"Don't call getValueLong() on a non LONG ElementValue\");\n@@ -123,1 +123,1 @@\n-            throw new IllegalStateException(\"Dont call getValueShort() on a non SHORT ElementValue\");\n+            throw new IllegalStateException(\"Don't call getValueShort() on a non SHORT ElementValue\");\n@@ -131,1 +131,1 @@\n-            throw new IllegalStateException(\"Dont call getValueString() on a non STRING ElementValue\");\n+            throw new IllegalStateException(\"Don't call getValueString() on a non STRING ElementValue\");\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/SimpleElementValue.java","additions":10,"deletions":10,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -43,1 +43,1 @@\n-     * Construct object from input stream.\n+     * Constructs object from input stream.\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/SourceFile.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2020, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,2 +33,2 @@\n- * <a href=\"http:\/\/java.sun.com\/j2me\/\"> Java 2 Micro Edition<\/a> (J2ME). This attribute is used by the\n- * <a href=\"http:\/\/java.sun.com\/products\/cldc\/\">KVM<\/a> and contained within the Code attribute of a method. See CLDC\n+ * <a href=\"https:\/\/java.sun.com\/j2me\/\"> Java 2 Micro Edition<\/a> (J2ME). This attribute is used by the\n+ * <a href=\"https:\/\/java.sun.com\/products\/cldc\/\">KVM<\/a> and contained within the Code attribute of a method. See CLDC\n@@ -49,1 +49,1 @@\n- * @LastModified: Oct 2020\n+ * @LastModified: Sept 2025\n@@ -56,1 +56,1 @@\n-     * Construct object from input stream.\n+     * Constructs object from input stream.\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/StackMap.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -62,1 +62,1 @@\n-     * Construct object from input stream.\n+     * Constructs object from input stream.\n@@ -78,3 +78,1 @@\n-        } else if (frameType >= Const.CHOP_FRAME && frameType <= Const.CHOP_FRAME_MAX) {\n-            byteCodeOffset = dataInput.readUnsignedShort();\n-        } else if (frameType == Const.SAME_FRAME_EXTENDED) {\n+        } else if (frameType >= Const.CHOP_FRAME && frameType <= Const.CHOP_FRAME_MAX || frameType == Const.SAME_FRAME_EXTENDED) {\n@@ -170,1 +168,1 @@\n-            throw new Error(\"Clone Not Supported\");\n+            throw new UnsupportedOperationException(\"Clone Not Supported\", ex);\n@@ -193,3 +191,1 @@\n-        } else if (frameType >= Const.CHOP_FRAME && frameType <= Const.CHOP_FRAME_MAX) {\n-            file.writeShort(byteCodeOffset);\n-        } else if (frameType == Const.SAME_FRAME_EXTENDED) {\n+        } else if (frameType >= Const.CHOP_FRAME && frameType <= Const.CHOP_FRAME_MAX || frameType == Const.SAME_FRAME_EXTENDED) {\n@@ -235,1 +231,0 @@\n-     *\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/StackMapEntry.java","additions":4,"deletions":9,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -37,1 +37,1 @@\n-public final class StackMapType implements Cloneable {\n+public final class StackMapType implements Node, Cloneable {\n@@ -39,1 +39,1 @@\n-    public static final StackMapType[] EMPTY_ARRAY = {}; \/\/ must be public because BCELifier code generator writes calls to it\n+    public static final StackMapType[] EMPTY_ARRAY = {}; \/\/ BCELifier code generator writes calls to constructor translating null to EMPTY_ARRAY\n@@ -56,1 +56,1 @@\n-     * Construct object from file stream.\n+     * Constructs object from file stream.\n@@ -69,0 +69,12 @@\n+    \/**\n+     * Called by objects that are traversing the nodes of the tree implicitly defined by the contents of a Java class.\n+     * I.e., the hierarchy of methods, fields, attributes, etc. spawns a tree of objects.\n+     *\n+     * @param v Visitor object\n+     * @since 6.8.0\n+     *\/\n+    @Override\n+    public void accept(final Visitor v) {\n+        v.visitStackMapType(this);\n+    }\n+\n@@ -101,0 +113,9 @@\n+    \/**\n+     * Gets the class name of this StackMapType from the constant pool at index position.\n+     * @return the fully qualified name of the class for this StackMapType.\n+     * @since 6.8.0\n+     *\/\n+    public String getClassName() {\n+        return constantPool.constantToString(index, Const.CONSTANT_Class);\n+    }\n+\n@@ -132,1 +153,1 @@\n-            return \", class=\" + constantPool.constantToString(index, Const.CONSTANT_Class);\n+            return \", class=\" + getClassName();\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/StackMapType.java","additions":25,"deletions":4,"binary":false,"changes":29,"status":"modified"},{"patch":"@@ -55,1 +55,1 @@\n-     * Construct object from input stream.\n+     * Constructs object from input stream.\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/Synthetic.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -46,1 +46,1 @@\n- * @LastModified: Feb 2023\n+ * @LastModified: Sept 2025\n@@ -54,1 +54,1 @@\n-    private static class JavaReader extends FilterReader {\n+    private static final class JavaReader extends FilterReader {\n@@ -91,1 +91,1 @@\n-     * Encode bytes into valid java identifier characters. Used by\n+     * Encode bytes into valid Java identifier characters. Used by\n@@ -94,1 +94,1 @@\n-    private static class JavaWriter extends FilterWriter {\n+    private static final class JavaWriter extends FilterWriter {\n@@ -440,1 +440,3 @@\n-            \/\/$FALL-THROUGH$\n+            index = bytes.readUnsignedShort();\n+            buf.append(\"\\t<\").append(constantPool.constantToString(index, Const.CONSTANT_Class)).append(\">\").append(verbose ? \" (\" + index + \")\" : \"\");\n+            break;\n@@ -867,1 +869,1 @@\n-                throw new ClassFormatException(\"Invalid method signature: \" + signature);\n+                throw new InvalidMethodSignatureException(signature);\n@@ -875,1 +877,1 @@\n-            throw new ClassFormatException(\"Invalid method signature: \" + signature, e);\n+            throw new InvalidMethodSignatureException(signature, e);\n@@ -906,1 +908,1 @@\n-                throw new ClassFormatException(\"Invalid method signature: \" + signature);\n+                throw new InvalidMethodSignatureException(signature);\n@@ -910,1 +912,1 @@\n-            throw new ClassFormatException(\"Invalid method signature: \" + signature, e);\n+            throw new InvalidMethodSignatureException(signature, e);\n@@ -962,1 +964,1 @@\n-                throw new ClassFormatException(\"Invalid method signature: \" + signature);\n+                throw new InvalidMethodSignatureException(signature);\n@@ -988,1 +990,1 @@\n-            throw new ClassFormatException(\"Invalid method signature: \" + signature, e);\n+            throw new InvalidMethodSignatureException(signature, e);\n@@ -1175,1 +1177,1 @@\n-            type = type + typeSignatureToString(signature.substring(index), chopit);\n+            type += typeSignatureToString(signature.substring(index), chopit);\n@@ -1240,1 +1242,1 @@\n-                throw new ClassFormatException(\"Invalid method signature: \" + signature);\n+                throw new InvalidMethodSignatureException(signature);\n@@ -1245,1 +1247,1 @@\n-            throw new ClassFormatException(\"Invalid method signature: \" + signature, e);\n+            throw new InvalidMethodSignatureException(signature, e);\n@@ -1289,1 +1291,1 @@\n-                throw new ClassFormatException(\"Invalid method signature: \" + signature);\n+                throw new InvalidMethodSignatureException(signature);\n@@ -1292,1 +1294,1 @@\n-            throw new ClassFormatException(\"Invalid method signature: \" + signature, e);\n+            throw new InvalidMethodSignatureException(signature, e);\n@@ -1472,2 +1474,2 @@\n-                    consumedChars = unwrap(Utility.CONSUMER_CHARS) + consumedChars;\n-                    wrap(Utility.CONSUMER_CHARS, consumedChars);\n+                    consumedChars = unwrap(CONSUMER_CHARS) + consumedChars;\n+                    wrap(CONSUMER_CHARS, consumedChars);\n@@ -1493,2 +1495,2 @@\n-                        consumedChars = unwrap(Utility.CONSUMER_CHARS) + consumedChars;\n-                        wrap(Utility.CONSUMER_CHARS, consumedChars);\n+                        consumedChars = unwrap(CONSUMER_CHARS) + consumedChars;\n+                        wrap(CONSUMER_CHARS, consumedChars);\n@@ -1511,2 +1513,2 @@\n-                    consumedChars = unwrap(Utility.CONSUMER_CHARS) + consumedChars;\n-                    wrap(Utility.CONSUMER_CHARS, consumedChars);\n+                    consumedChars = unwrap(CONSUMER_CHARS) + consumedChars;\n+                    wrap(CONSUMER_CHARS, consumedChars);\n@@ -1518,1 +1520,1 @@\n-                wrap(Utility.CONSUMER_CHARS, consumedChars + 1); \/\/ remove final \";\"\n+                wrap(CONSUMER_CHARS, consumedChars + 1); \/\/ remove final \";\"\n@@ -1539,3 +1541,3 @@\n-                \/\/ Utility.consumed_chars += consumed_chars; is replaced by:\n-                final int temp = unwrap(Utility.CONSUMER_CHARS) + consumedChars;\n-                wrap(Utility.CONSUMER_CHARS, temp);\n+                \/\/ consumed_chars += consumed_chars; is replaced by:\n+                final int temp = unwrap(CONSUMER_CHARS) + consumedChars;\n+                wrap(CONSUMER_CHARS, temp);\n@@ -1555,1 +1557,1 @@\n-        return tl.get();\n+        return tl.get().intValue();\n@@ -1559,1 +1561,1 @@\n-        tl.set(value);\n+        tl.set(Integer.valueOf(value));\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/Utility.java","additions":31,"deletions":29,"binary":false,"changes":60,"status":"modified"},{"patch":"@@ -220,0 +220,1 @@\n+\n@@ -225,0 +226,20 @@\n+    \/**\n+     * Visits a {@link Record} object.\n+     *\n+     * @param obj Record to visit\n+     * @since 6.9.0\n+     *\/\n+    default void visitRecord(final Record obj) {\n+        \/\/ empty\n+    }\n+\n+    \/**\n+     * Visits a {@link RecordComponentInfo} object.\n+     *\n+     * @param record component to visit\n+     * @since 6.9.0\n+     *\/\n+    default void visitRecordComponent(final RecordComponentInfo record) {\n+     \/\/ noop\n+    }\n+\n@@ -233,0 +254,10 @@\n+    \/**\n+     * Visits a {@link StackMapType} object.\n+     *\n+     * @param obj object to visit\n+     * @since 6.8.0\n+     *\/\n+    default void visitStackMapType(final StackMapType obj) {\n+      \/\/ empty\n+    }\n+\n@@ -236,0 +267,1 @@\n+\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/Visitor.java","additions":32,"deletions":0,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -0,0 +1,25 @@\n+\/*\n+ * reserved comment block\n+ * DO NOT REMOVE OR ALTER!\n+ *\/\n+\/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http:\/\/www.apache.org\/licenses\/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ *\/\n+\n+\/**\n+ * Classes that describe the structure of a Java class file and a class file parser.\n+ *\/\n+package com.sun.org.apache.bcel.internal.classfile;\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/classfile\/package-info.java","additions":25,"deletions":0,"binary":false,"changes":25,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,1 +31,1 @@\n- * @LastModified: Feb 2023\n+ * @LastModified: Sept 2025\n@@ -36,1 +36,1 @@\n-     * Get length of array\n+     * Gets length of array\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/generic\/ARRAYLENGTH.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,0 +31,2 @@\n+ *\n+ * @LastModified: Sept 2025\n@@ -32,1 +34,1 @@\n-public class ATHROW extends Instruction implements UnconditionalBranch, ExceptionThrower {\n+public class ATHROW extends Instruction implements UnconditionalBranch, ExceptionThrower, StackConsumer {\n@@ -51,0 +53,1 @@\n+        v.visitStackConsumer(this);\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/generic\/ATHROW.java","additions":5,"deletions":2,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,0 +31,1 @@\n+import java.util.stream.Collectors;\n@@ -40,0 +41,1 @@\n+import jdk.xml.internal.Utils;\n@@ -43,1 +45,1 @@\n- * @LastModified: Jan 2020\n+ * @LastModified: Sept 2025\n@@ -56,1 +58,1 @@\n-        if (annotationEntryGens.length == 0) {\n+        if (annotationEntryGens == null && annotationEntryGens.length == 0) {\n@@ -258,5 +260,1 @@\n-        final List<ElementValuePairGen> out = new ArrayList<>();\n-        for (final ElementValuePair nvp : in) {\n-            out.add(new ElementValuePairGen(nvp, cpool, copyPoolEntries));\n-        }\n-        return out;\n+        return Utils.streamOfIfNonNull(in).map(nvp -> new ElementValuePairGen(nvp, cpool, copyPoolEntries)).collect(Collectors.toList());\n@@ -289,1 +287,1 @@\n-        return getTypeSignature();\/\/ BCELBUG: Should I use this instead?\n+        return getTypeSignature(); \/\/ BCELBUG: Should I use this instead?\n@@ -294,1 +292,1 @@\n-        \/\/ ConstantClass c = (ConstantClass)cpool.getConstant(typeIndex);\n+        \/\/ ConstantClass c = (ConstantClass) cpool.getConstant(typeIndex);\n@@ -300,1 +298,3 @@\n-     * Returns list of ElementNameValuePair objects\n+     * Returns list of ElementNameValuePair objects.\n+     *\n+     * @return list of ElementNameValuePair objects.\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/generic\/AnnotationEntryGen.java","additions":11,"deletions":11,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -2,2 +2,1 @@\n- * reserved comment block\n- * DO NOT REMOVE OR ALTER!\n+ * Copyright (c) 2021, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,0 +27,1 @@\n+import java.util.stream.Collectors;\n@@ -31,0 +31,1 @@\n+import jdk.xml.internal.Utils;\n@@ -34,0 +35,1 @@\n+ * @LastModified: Sept 2025\n@@ -49,1 +51,1 @@\n-            evalues.add(ElementValueGen.copy(element, cpool, copyPoolEntries));\n+            evalues.add(copy(element, cpool, copyPoolEntries));\n@@ -58,1 +60,1 @@\n-    public ArrayElementValueGen(final int type, final ElementValue[] datums, final ConstantPoolGen cpool) {\n+    public ArrayElementValueGen(final int type, final ElementValue[] elementValues, final ConstantPoolGen cpool) {\n@@ -63,4 +65,1 @@\n-        this.evalues = new ArrayList<>();\n-        for (final ElementValue datum : datums) {\n-            evalues.add(ElementValueGen.copy(datum, cpool, true));\n-        }\n+        this.evalues = Utils.streamOfIfNonNull(elementValues).map(e -> copy(e, cpool, true)).collect(Collectors.toList());\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/generic\/ArrayElementValueGen.java","additions":7,"deletions":8,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -2,2 +2,1 @@\n- * reserved comment block\n- * DO NOT REMOVE OR ALTER!\n+ * Copyright (c) 2019, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,0 +26,2 @@\n+ *\n+ * @LastModified: Sept 2025\n@@ -46,1 +47,1 @@\n-     * @param className complete name of class (java.lang.String, e.g.)\n+     * @param className complete name of class ({@link String}, for example)\n@@ -59,0 +60,1 @@\n+    @SuppressWarnings(\"deprecation\") \/\/signature\n@@ -82,1 +84,1 @@\n-        super.setSignature(buf.toString());\n+        this.signature = buf.toString();\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/generic\/ArrayType.java","additions":6,"deletions":4,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -66,1 +66,1 @@\n-     * Set new contents. Old instruction is disposed and may not be used anymore.\n+     * Sets new contents. Old instruction is disposed and may not be used anymore.\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/generic\/BranchHandle.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -38,1 +38,1 @@\n- * @LastModified: Jan 2020\n+ * @LastModified: Sept 2025\n@@ -107,1 +107,1 @@\n-     * Set the index to constant pool.\n+     * Sets the index to constant pool.\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/generic\/CPInstruction.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -51,1 +51,1 @@\n-        super(ElementValueGen.CLASS, cpool);\n+        super(CLASS, cpool);\n@@ -56,1 +56,1 @@\n-        super(ElementValueGen.CLASS, cpool);\n+        super(CLASS, cpool);\n@@ -70,1 +70,1 @@\n-        \/\/ ConstantClass c = (ConstantClass)getConstantPool().getConstant(idx);\n+        \/\/ ConstantClass c = (ConstantClass) getConstantPool().getConstant(idx);\n@@ -72,1 +72,1 @@\n-        \/\/ (ConstantUtf8)getConstantPool().getConstant(c.getNameIndex());\n+        \/\/ (ConstantUtf8) getConstantPool().getConstant(c.getNameIndex());\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/generic\/ClassElementValueGen.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -43,1 +43,1 @@\n- * Template class for building up a java class. May be initialized with an existing java class (file).\n+ * Template class for building up a java class. May be initialized with an existing Java class (file).\n@@ -46,1 +46,1 @@\n- * @LastModified: Feb 2023\n+ * @LastModified: Sept 2025\n@@ -50,1 +50,1 @@\n-    private static BCELComparator bcelComparator = new BCELComparator() {\n+    private static BCELComparator<ClassGen> bcelComparator = new BCELComparator<ClassGen>() {\n@@ -53,4 +53,2 @@\n-        public boolean equals(final Object o1, final Object o2) {\n-            final ClassGen THIS = (ClassGen) o1;\n-            final ClassGen THAT = (ClassGen) o2;\n-            return Objects.equals(THIS.getClassName(), THAT.getClassName());\n+        public boolean equals(final ClassGen a, final ClassGen b) {\n+            return a == b || a != null && b != null && Objects.equals(a.getClassName(), b.getClassName());\n@@ -60,3 +58,2 @@\n-        public int hashCode(final Object o) {\n-            final ClassGen THIS = (ClassGen) o;\n-            return THIS.getClassName().hashCode();\n+        public int hashCode(final ClassGen o) {\n+            return o != null ? Objects.hashCode(o.getClassName()) : 0;\n@@ -69,1 +66,1 @@\n-    public static BCELComparator getComparator() {\n+    public static BCELComparator<ClassGen> getComparator() {\n@@ -76,1 +73,1 @@\n-    public static void setComparator(final BCELComparator comparator) {\n+    public static void setComparator(final BCELComparator<ClassGen> comparator) {\n@@ -104,1 +101,1 @@\n-     * Initialize with existing class.\n+     * Constructs a new instance from an existing class.\n@@ -121,4 +118,9 @@\n-        Collections.addAll(interfaceList, clazz.getInterfaceNames());\n-        for (final Attribute attribute : attributes) {\n-            if (!(attribute instanceof Annotations)) {\n-                addAttribute(attribute);\n+        final String[] interfaceNames = clazz.getInterfaceNames();\n+        if (interfaceNames != null) {\n+            Collections.addAll(interfaceList, interfaceNames);\n+        }\n+        if (attributes != null) {\n+            for (final Attribute attribute : attributes) {\n+                if (!(attribute instanceof Annotations)) {\n+                    addAttribute(attribute);\n+                }\n@@ -128,2 +130,8 @@\n-        Collections.addAll(methodList, clazz.getMethods());\n-        Collections.addAll(fieldList, clazz.getFields());\n+        final Method[] methods = clazz.getMethods();\n+        if (methods != null) {\n+            Collections.addAll(methodList, methods);\n+        }\n+        final Field[] fields = clazz.getFields();\n+        if (fields != null) {\n+            Collections.addAll(fieldList, fields);\n+        }\n@@ -245,1 +253,1 @@\n-            throw new Error(\"Clone Not Supported\"); \/\/ never happens\n+            throw new UnsupportedOperationException(\"Clone Not Supported\", e); \/\/ never happens\n@@ -285,1 +293,1 @@\n-        return bcelComparator.equals(this, obj);\n+        return obj instanceof ClassGen && bcelComparator.equals(this, (ClassGen) obj);\n@@ -382,1 +390,1 @@\n-     * Return value as defined by given BCELComparator strategy. By default return the hashcode of the class name.\n+     * Return value as defined by given BCELComparator strategy. By default return the hash code of the class name.\n@@ -481,1 +489,1 @@\n-     * Set major version number of class file, default value is 45 (JDK 1.1)\n+     * Sets major version number of class file, default value is 45 (JDK 1.1)\n@@ -495,1 +503,3 @@\n-        Collections.addAll(methodList, methods);\n+        if (methods != null) {\n+            Collections.addAll(methodList, methods);\n+        }\n@@ -499,1 +509,1 @@\n-     * Set minor version number of class file, default value is 3 (JDK 1.1)\n+     * Sets minor version number of class file, default value is 3 (JDK 1.1)\n@@ -518,1 +528,1 @@\n-     * Look for attributes representing annotations and unpack them.\n+     * Unpacks attributes representing annotations.\n@@ -520,1 +530,1 @@\n-    private AnnotationEntryGen[] unpackAnnotations(final Attribute[] attrs) {\n+    private AnnotationEntryGen[] unpackAnnotations(final Attribute[] attributes) {\n@@ -522,7 +532,9 @@\n-        for (final Attribute attr : attrs) {\n-            if (attr instanceof RuntimeVisibleAnnotations) {\n-                final RuntimeVisibleAnnotations rva = (RuntimeVisibleAnnotations) attr;\n-                rva.forEach(a -> annotationGenObjs.add(new AnnotationEntryGen(a, getConstantPool(), false)));\n-            } else if (attr instanceof RuntimeInvisibleAnnotations) {\n-                final RuntimeInvisibleAnnotations ria = (RuntimeInvisibleAnnotations) attr;\n-                ria.forEach(a -> annotationGenObjs.add(new AnnotationEntryGen(a, getConstantPool(), false)));\n+        if (attributes != null) {\n+            for (final Attribute attr : attributes) {\n+                if (attr instanceof RuntimeVisibleAnnotations) {\n+                    final RuntimeVisibleAnnotations rva = (RuntimeVisibleAnnotations) attr;\n+                    rva.forEach(a -> annotationGenObjs.add(new AnnotationEntryGen(a, getConstantPool(), false)));\n+                } else if (attr instanceof RuntimeInvisibleAnnotations) {\n+                    final RuntimeInvisibleAnnotations ria = (RuntimeInvisibleAnnotations) attr;\n+                    ria.forEach(a -> annotationGenObjs.add(new AnnotationEntryGen(a, getConstantPool(), false)));\n+                }\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/generic\/ClassGen.java","additions":47,"deletions":35,"binary":false,"changes":82,"status":"modified"},{"patch":"@@ -66,1 +66,1 @@\n-            throw new Error(\"Clone Not Supported\"); \/\/ never happens\n+            throw new UnsupportedOperationException(\"Clone Not Supported\", e); \/\/ never happens\n@@ -84,1 +84,1 @@\n-     * Get CodeException object.<BR>\n+     * Gets CodeException object.<BR>\n@@ -123,1 +123,1 @@\n-     * Set end of handler\n+     * Sets end of handler\n@@ -133,1 +133,1 @@\n-     * Set handler code\n+     * Sets handler code\n@@ -143,1 +143,1 @@\n-     * Set start of handler\n+     * Sets start of handler\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/generic\/CodeExceptionGen.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -47,1 +47,1 @@\n-        \/\/ (!nvp.getNameString().equals(((ConstantUtf8)constantPoolGen.getConstant(nvp.getNameIndex())).getBytes()))\n+        \/\/ (!nvp.getNameString().equals(((ConstantUtf8) constantPoolGen.getConstant(nvp.getNameIndex())).getBytes()))\n@@ -89,1 +89,1 @@\n-        \/\/ ConstantString cu8 = (ConstantString)constantPoolGen.getConstant(nameIdx);\n+        \/\/ ConstantString cu8 = (ConstantString) constantPoolGen.getConstant(nameIdx);\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/generic\/ElementValuePairGen.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -43,4 +43,2 @@\n-            typeIdx = cpool.addUtf8(value.getEnumTypeString());\/\/ was\n-                                                               \/\/ addClass(value.getEnumTypeString());\n-            valueIdx = cpool.addUtf8(value.getEnumValueString()); \/\/ was\n-                                                                  \/\/ addString(value.getEnumValueString());\n+            typeIdx = cpool.addUtf8(value.getEnumTypeString()); \/\/ was addClass(value.getEnumTypeString());\n+            valueIdx = cpool.addUtf8(value.getEnumValueString()); \/\/ was addString(value.getEnumValueString());\n@@ -58,1 +56,1 @@\n-        super(ElementValueGen.ENUM_CONSTANT, cpool);\n+        super(ENUM_CONSTANT, cpool);\n@@ -67,3 +65,3 @@\n-        super(ElementValueGen.ENUM_CONSTANT, cpool);\n-        typeIdx = cpool.addUtf8(t.getSignature());\/\/ was addClass(t);\n-        valueIdx = cpool.addUtf8(value);\/\/ was addString(value);\n+        super(ENUM_CONSTANT, cpool);\n+        typeIdx = cpool.addUtf8(t.getSignature()); \/\/ was addClass(t);\n+        valueIdx = cpool.addUtf8(value); \/\/ was addString(value);\n@@ -93,1 +91,1 @@\n-        \/\/ (ConstantClass)getConstantPool().getConstant(typeIdx);\n+        \/\/ (ConstantClass) getConstantPool().getConstant(typeIdx);\n@@ -95,1 +93,1 @@\n-        \/\/ ((ConstantUtf8)getConstantPool().getConstant(cu8.getNameIndex())).getBytes();\n+        \/\/ ((ConstantUtf8) getConstantPool().getConstant(cu8.getNameIndex())).getBytes();\n@@ -103,1 +101,1 @@\n-        \/\/ (ConstantString)getConstantPool().getConstant(valueIdx);\n+        \/\/ (ConstantString) getConstantPool().getConstant(valueIdx);\n@@ -105,1 +103,1 @@\n-        \/\/ ((ConstantUtf8)getConstantPool().getConstant(cu8.getStringIndex())).getBytes();\n+        \/\/ ((ConstantUtf8) getConstantPool().getConstant(cu8.getStringIndex())).getBytes();\n@@ -121,1 +119,1 @@\n-        \/\/ (ConstantString)getConstantPool().getConstant(valueIdx);\n+        \/\/ (ConstantString) getConstantPool().getConstant(valueIdx);\n@@ -123,1 +121,1 @@\n-        \/\/ ((ConstantUtf8)getConstantPool().getConstant(cu8.getStringIndex())).getBytes();\n+        \/\/ ((ConstantUtf8) getConstantPool().getConstant(cu8.getStringIndex())).getBytes();\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/generic\/EnumElementValueGen.java","additions":12,"deletions":14,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n- * the truth as such; because all instructions may throw an java.lang.VirtualMachineError. These exceptions are omitted.\n+ * the truth as such; because all instructions may throw a {@link VirtualMachineError}. These exceptions are omitted.\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/generic\/ExceptionThrower.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -43,1 +43,1 @@\n- * @LastModified: May 2021\n+ * @LastModified: Sept 2025\n@@ -47,1 +47,1 @@\n-    private static BCELComparator bcelComparator = new BCELComparator() {\n+    private static BCELComparator<FieldGen> bcelComparator = new BCELComparator<FieldGen>() {\n@@ -50,4 +50,2 @@\n-        public boolean equals(final Object o1, final Object o2) {\n-            final FieldGen THIS = (FieldGen) o1;\n-            final FieldGen THAT = (FieldGen) o2;\n-            return Objects.equals(THIS.getName(), THAT.getName()) && Objects.equals(THIS.getSignature(), THAT.getSignature());\n+        public boolean equals(final FieldGen a, final FieldGen b) {\n+            return a == b || a != null && b != null && Objects.equals(a.getName(), b.getName()) && Objects.equals(a.getSignature(), b.getSignature());\n@@ -57,3 +55,2 @@\n-        public int hashCode(final Object o) {\n-            final FieldGen THIS = (FieldGen) o;\n-            return THIS.getSignature().hashCode() ^ THIS.getName().hashCode();\n+        public int hashCode(final FieldGen o) {\n+            return o != null ? Objects.hash(o.getSignature(), o.getName()) : 0;\n@@ -64,1 +61,1 @@\n-     * @return Comparison strategy object\n+     * @return Comparison strategy object.\n@@ -66,1 +63,1 @@\n-    public static BCELComparator getComparator() {\n+    public static BCELComparator<FieldGen> getComparator() {\n@@ -71,1 +68,1 @@\n-     * @param comparator Comparison strategy object\n+     * @param comparator Comparison strategy object.\n@@ -73,1 +70,1 @@\n-    public static void setComparator(final BCELComparator comparator) {\n+    public static void setComparator(final BCELComparator<FieldGen> comparator) {\n@@ -84,2 +81,2 @@\n-     * @param field Field object\n-     * @param cp constant pool (must contain the same entries as the field's constant pool)\n+     * @param field Field object.\n+     * @param cp constant pool (must contain the same entries as the field's constant pool).\n@@ -190,1 +187,1 @@\n-        return bcelComparator.equals(this, obj);\n+        return obj instanceof FieldGen && bcelComparator.equals(this, (FieldGen) obj);\n@@ -194,1 +191,1 @@\n-     * Get field object after having set up all necessary values.\n+     * Gets field object after having set up all necessary values.\n@@ -210,4 +207,1 @@\n-        if (value != null) {\n-            return value.toString();\n-        }\n-        return null;\n+        return Objects.toString(value, null);\n@@ -222,1 +216,1 @@\n-     * Return value as defined by given BCELComparator strategy. By default return the hashcode of the field's name XOR\n+     * Return value as defined by given BCELComparator strategy. By default return the hash code of the field's name XOR\n@@ -298,1 +292,1 @@\n-     * Set (optional) initial value of field, otherwise it will be set to null\/0\/false by the JVM automatically.\n+     * Sets (optional) initial value of field, otherwise it will be set to null\/0\/false by the JVM automatically.\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/generic\/FieldGen.java","additions":18,"deletions":24,"binary":false,"changes":42,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,1 +33,1 @@\n- * @LastModified: May 2021\n+ * @LastModified: Sept 2025\n@@ -70,2 +70,4 @@\n-    protected void addAll(final Attribute[] attrs) {\n-        Collections.addAll(attributeList, attrs);\n+    protected void addAll(final Attribute[] attributes) {\n+        if (attributes != null) {\n+            Collections.addAll(attributeList, attributes);\n+        }\n@@ -96,1 +98,1 @@\n-            throw new Error(\"Clone Not Supported\"); \/\/ never happens\n+            throw new UnsupportedOperationException(\"Clone Not Supported\", e); \/\/ never happens\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/generic\/FieldGenOrMethodGen.java","additions":7,"deletions":5,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -56,1 +56,0 @@\n-     *\n@@ -92,0 +91,3 @@\n+        if (rt instanceof ArrayType) {\n+            return Type.OBJECT;\n+        }\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/generic\/FieldOrMethod.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -28,1 +28,0 @@\n- *\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/generic\/ICONST.java","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -40,1 +40,1 @@\n- * @LastModified: Feb 2023\n+ * @LastModified: Sept 2025\n@@ -107,1 +107,1 @@\n-     * Since InvokeDynamic doesn't refer to a reference type, just return java.lang.Object, as that is the only type we can\n+     * Since InvokeDynamic doesn't refer to a reference type, just return {@link Object}, as that is the only type we can\n@@ -111,1 +111,1 @@\n-     * @return an ObjectType for java.lang.Object\n+     * @return an ObjectType for {@link Object}\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/generic\/INVOKEDYNAMIC.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,1 +32,1 @@\n- * @LastModified: Feb 2023\n+ * @LastModified: Sept 2025\n@@ -464,1 +464,1 @@\n-        if (InstructionConst.getInstruction(this.getOpcode()) != null) {\n+        if (InstructionConst.getInstruction(getOpcode()) != null) {\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/generic\/Instruction.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -173,1 +173,1 @@\n-     * Get object via its opcode, for immutable instructions like branch instructions entries are set to null.\n+     * Gets object via its opcode, for immutable instructions like branch instructions entries are set to null.\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/generic\/InstructionConst.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,1 +33,1 @@\n- * @LastModified: Feb 2023\n+ * @LastModified: Sept 2025\n@@ -37,1 +37,1 @@\n-    private static class MethodObject {\n+    private static final class MethodObject {\n@@ -56,2 +56,4 @@\n-    \/\/ N.N. These must agree with the order of Constants.T_CHAR through T_LONG\n-    private static final String[] shortNames = {\"C\", \"F\", \"D\", \"B\", \"S\", \"I\", \"L\"};\n+    \/**\n+     * These must agree with the order of Constants.T_CHAR through T_LONG.\n+     *\/\n+    private static final String[] SHORT_NAMES = {\"C\", \"F\", \"D\", \"B\", \"S\", \"I\", \"L\"};\n@@ -59,1 +61,1 @@\n-    private static final MethodObject[] appendMethodObjects = {\n+    private static final MethodObject[] APPEND_METHOD_OBJECTS = {\n@@ -487,1 +489,1 @@\n-            return createInvoke(appendMethodObjects[0], Const.INVOKEVIRTUAL);\n+            return createInvoke(APPEND_METHOD_OBJECTS[0], Const.INVOKEVIRTUAL);\n@@ -498,1 +500,1 @@\n-            return createInvoke(appendMethodObjects[t], Const.INVOKEVIRTUAL);\n+            return createInvoke(APPEND_METHOD_OBJECTS[t], Const.INVOKEVIRTUAL);\n@@ -501,1 +503,1 @@\n-            return createInvoke(appendMethodObjects[1], Const.INVOKEVIRTUAL);\n+            return createInvoke(APPEND_METHOD_OBJECTS[1], Const.INVOKEVIRTUAL);\n@@ -518,1 +520,1 @@\n-            final String name = \"com.sun.org.apache.bcel.internal.generic.\" + shortNames[src - Const.T_CHAR] + \"2\" + shortNames[dest - Const.T_CHAR];\n+            final String name = \"com.sun.org.apache.bcel.internal.generic.\" + SHORT_NAMES[src - Const.T_CHAR] + \"2\" + SHORT_NAMES[dest - Const.T_CHAR];\n@@ -645,2 +647,4 @@\n-        for (final Type argType : argTypes) {\n-            nargs += argType.getSize();\n+        if (argTypes != null) {\n+            for (final Type argType : argTypes) {\n+                nargs += argType.getSize();\n+            }\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/generic\/InstructionFactory.java","additions":16,"deletions":12,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -41,1 +41,1 @@\n- * @LastModified: May 2021\n+ * @LastModified: Sept 2025\n@@ -121,1 +121,1 @@\n-        \/\/ if(!targeters.contains(t))\n+        \/\/ if (!targeters.contains(t))\n@@ -138,1 +138,1 @@\n-     * Get attribute of an instruction handle.\n+     * Gets attribute of an instruction handle.\n@@ -143,4 +143,1 @@\n-        if (attributes != null) {\n-            return attributes.get(key);\n-        }\n-        return null;\n+        return attributes != null ? attributes.get(key) : null;\n@@ -250,1 +247,1 @@\n-     * Set the position, i.e., the byte code offset of the contained instruction.\n+     * Sets the position, i.e., the byte code offset of the contained instruction.\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/generic\/InstructionHandle.java","additions":6,"deletions":9,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -36,0 +36,1 @@\n+import jdk.xml.internal.Utils;\n@@ -49,1 +50,1 @@\n- * @LastModified: Feb 2023\n+ * @LastModified: Sept 2025\n@@ -63,17 +64,19 @@\n-        int l = 0;\n-        int r = count - 1;\n-        \/*\n-         * Do a binary search since the pos array is orderd.\n-         *\/\n-        do {\n-            final int i = l + r >>> 1;\n-            final int j = pos[i];\n-            if (j == target) {\n-                return ihs[i];\n-            }\n-            if (target < j) {\n-                r = i - 1;\n-            } else {\n-                l = i + 1;\n-            }\n-        } while (l <= r);\n+        if (ihs != null && pos != null) {\n+            int l = 0;\n+            int r = count - 1;\n+            \/*\n+             * Do a binary search since the pos array is orderd.\n+             *\/\n+            do {\n+                final int i = l + r >>> 1;\n+                final int j = pos[i];\n+                if (j == target) {\n+                    return ihs[i];\n+                }\n+                if (target < j) {\n+                    r = i - 1;\n+                } else {\n+                    l = i + 1;\n+                }\n+            } while (l <= r);\n+        }\n@@ -516,1 +519,1 @@\n-     * Get instruction handle for instruction at byte code position pos. This only works properly, if the list is freshly\n+     * Gets instruction handle for instruction at byte code position pos. This only works properly, if the list is freshly\n@@ -608,1 +611,1 @@\n-     * Get positions (offsets) of all instructions in the list. This relies on that the list has been freshly created from\n+     * Gets positions (offsets) of all instructions in the list. This relies on that the list has been freshly created from\n@@ -962,1 +965,1 @@\n-        for (final CodeExceptionGen exception : exceptions) {\n+        Utils.streamOfIfNonNull(exceptions).forEach(exception -> {\n@@ -972,1 +975,1 @@\n-        }\n+        });\n@@ -984,4 +987,2 @@\n-        for (final LocalVariableGen element : lg) {\n-            final InstructionHandle start = element.getStart();\n-            final InstructionHandle end = element.getEnd();\n-            if (start == oldTarget) {\n+        Utils.streamOfIfNonNull(lg).forEach(element -> {\n+            if (element.getStart() == oldTarget) {\n@@ -990,1 +991,1 @@\n-            if (end == oldTarget) {\n+            if (element.getEnd() == oldTarget) {\n@@ -993,1 +994,1 @@\n-        }\n+        });\n@@ -1123,1 +1124,1 @@\n-             * Get an estimate about how many additional bytes may be added, because BranchInstructions may have variable length\n+             * Gets an estimate about how many additional bytes may be added, because BranchInstructions may have variable length\n@@ -1135,0 +1136,3 @@\n+            default:\n+                \/\/ TODO should this be an error?\n+                break;\n@@ -1139,1 +1143,1 @@\n-         * Pass 2: Expand the variable-length (Branch)Instructions depending on the target offset (short or int) and ensure that\n+         * Pass 2: Expand the variable-length (Branch) Instructions depending on the target offset (short or int) and ensure that\n@@ -1155,2 +1159,1 @@\n-        bytePositions = new int[count]; \/\/ Trim to proper size\n-        System.arraycopy(pos, 0, bytePositions, 0, count);\n+        bytePositions = Arrays.copyOfRange(pos, 0, count); \/\/ Trim to proper size\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/generic\/InstructionList.java","additions":36,"deletions":33,"binary":false,"changes":69,"status":"modified"},{"patch":"@@ -25,1 +25,1 @@\n- * Denote that a class targets InstructionHandles within an InstructionList. Namely the following implementers:\n+ * Denotes that a class targets InstructionHandles within an InstructionList.\n@@ -36,1 +36,4 @@\n-     * Checks whether this targeter targets the specified instruction handle.\n+     * Tests whether this targeter targets the specified instruction handle.\n+     *\n+     * @param instructionHandle the instruction handle to test.\n+     * @return whether this targeter targets the specified instruction handle.\n@@ -38,1 +41,1 @@\n-    boolean containsTarget(InstructionHandle ih);\n+    boolean containsTarget(InstructionHandle instructionHandle);\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/generic\/InstructionTargeter.java","additions":6,"deletions":3,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -30,1 +30,0 @@\n- *\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/generic\/LCMP.java","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -97,0 +97,2 @@\n+        case com.sun.org.apache.bcel.internal.Const.CONSTANT_Dynamic:\n+            return Type.OBJECT;\n@@ -116,1 +118,4 @@\n-            return Type.getType(((com.sun.org.apache.bcel.internal.classfile.ConstantUtf8) c).getBytes());\n+            return Type.getType(Type.internalTypeNameToSignature(((com.sun.org.apache.bcel.internal.classfile.ConstantUtf8) c).getBytes()));\n+        case com.sun.org.apache.bcel.internal.Const.CONSTANT_Dynamic:\n+            \/\/ Really not sure what to return here, maybe a BootstrapMethod instance but how do we get it?\n+            return c;\n@@ -132,1 +137,1 @@\n-     * Set the index to constant pool and adjust size.\n+     * Sets the index to constant pool and adjust size.\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/generic\/LDC.java","additions":7,"deletions":2,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -57,1 +57,1 @@\n-            throw new Error(\"Clone Not Supported\"); \/\/ never happens\n+            throw new UnsupportedOperationException(\"Clone Not Supported\", e); \/\/ never happens\n@@ -74,1 +74,1 @@\n-     * Get LineNumber attribute.\n+     * Gets LineNumber attribute.\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/generic\/LineNumberGen.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -88,1 +88,1 @@\n-            throw new Error(\"Clone Not Supported\"); \/\/ never happens\n+            throw new UnsupportedOperationException(\"Clone Not Supported\", e); \/\/ never happens\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/generic\/LocalVariableGen.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,1 +31,1 @@\n- * @LastModified: May 2021\n+ * @LastModified: Sept 2025\n@@ -165,1 +165,1 @@\n-     * Set the local variable index. also updates opcode and length TODO Why?\n+     * Sets the local variable index. also updates opcode and length TODO Why?\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/generic\/LocalVariableInstruction.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -30,0 +30,1 @@\n+import java.util.stream.Collectors;\n@@ -49,0 +50,1 @@\n+import jdk.xml.internal.Utils;\n@@ -60,1 +62,1 @@\n- * @LastModified: Feb 2023\n+ * @LastModified: Sept 2025\n@@ -105,1 +107,1 @@\n-    private static BCELComparator bcelComparator = new BCELComparator() {\n+    private static BCELComparator<FieldGenOrMethodGen> bcelComparator = new BCELComparator<FieldGenOrMethodGen>() {\n@@ -108,4 +110,2 @@\n-        public boolean equals(final Object o1, final Object o2) {\n-            final FieldGenOrMethodGen THIS = (FieldGenOrMethodGen) o1;\n-            final FieldGenOrMethodGen THAT = (FieldGenOrMethodGen) o2;\n-            return Objects.equals(THIS.getName(), THAT.getName()) && Objects.equals(THIS.getSignature(), THAT.getSignature());\n+        public boolean equals(final FieldGenOrMethodGen a, final FieldGenOrMethodGen b) {\n+            return a == b || a != null && b != null && Objects.equals(a.getName(), b.getName()) && Objects.equals(a.getSignature(), b.getSignature());\n@@ -115,3 +115,2 @@\n-        public int hashCode(final Object o) {\n-            final FieldGenOrMethodGen THIS = (FieldGenOrMethodGen) o;\n-            return THIS.getSignature().hashCode() ^ THIS.getName().hashCode();\n+        public int hashCode(final FieldGenOrMethodGen o) {\n+            return o != null ? Objects.hash(o.getSignature(), o.getName()) : 0;\n@@ -130,1 +129,1 @@\n-     * @return Comparison strategy object\n+     * @return Comparison strategy object.\n@@ -132,1 +131,1 @@\n-    public static BCELComparator getComparator() {\n+    public static BCELComparator<FieldGenOrMethodGen> getComparator() {\n@@ -209,1 +208,1 @@\n-     * @param comparator Comparison strategy object\n+     * @param comparator Comparison strategy object.\n@@ -211,1 +210,1 @@\n-    public static void setComparator(final BCELComparator comparator) {\n+    public static void setComparator(final BCELComparator<FieldGenOrMethodGen> comparator) {\n@@ -639,1 +638,1 @@\n-        return bcelComparator.equals(this, obj);\n+        return obj instanceof FieldGenOrMethodGen && bcelComparator.equals(this, (FieldGenOrMethodGen) obj);\n@@ -793,1 +792,1 @@\n-     * Get method object. Never forget to call setMaxStack() or setMaxStack(max), respectively, before calling this method\n+     * Gets method object. Never forget to call setMaxStack() or setMaxStack(max), respectively, before calling this method\n@@ -891,1 +890,1 @@\n-     * Return value as defined by given BCELComparator strategy. By default return the hashcode of the method's name XOR\n+     * Return value as defined by given BCELComparator strategy. By default return the hash code of the method's name XOR\n@@ -902,5 +901,1 @@\n-        final List<AnnotationEntryGen> result = new ArrayList<>();\n-        for (final AnnotationEntry element : mutableArray) {\n-            result.add(new AnnotationEntryGen(element, getConstantPool(), false));\n-        }\n-        return result;\n+        return Utils.streamOfIfNonNull(mutableArray).map(ae -> new AnnotationEntryGen(ae, getConstantPool(), false)).collect(Collectors.toList());\n@@ -1030,4 +1025,2 @@\n-    public void removeRuntimeAttributes(final Attribute[] attrs) {\n-        for (final Attribute attr : attrs) {\n-            removeAttribute(attr);\n-        }\n+    public void removeRuntimeAttributes(final Attribute[] attributes) {\n+        Utils.streamOfIfNonNull(attributes).forEach(this::removeAttribute);\n@@ -1041,1 +1034,1 @@\n-        this.argNames = argNames;\n+        this.argNames = Utils.createEmptyArrayIfNull(argNames, String[].class);\n@@ -1049,1 +1042,1 @@\n-        this.argTypes = argTypes;\n+        this.argTypes = argTypes != null ? argTypes : Type.NO_ARGS;\n@@ -1087,1 +1080,1 @@\n-     * Set maximum number of local variables.\n+     * Sets maximum number of local variables.\n@@ -1105,1 +1098,1 @@\n-     * Set maximum stack size for this method.\n+     * Sets maximum stack size for this method.\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/generic\/MethodGen.java","additions":23,"deletions":30,"binary":false,"changes":53,"status":"modified"},{"patch":"@@ -30,1 +30,1 @@\n- * Denotes reference such as java.lang.String.\n+ * Denotes reference such as {@link String}.\n@@ -50,1 +50,1 @@\n-     * @param className fully qualified class name, e.g. java.lang.String\n+     * @param className fully qualified class name, e.g. {@link String}\n@@ -154,1 +154,1 @@\n-        if (this.referencesInterfaceExact() || superclass.referencesInterfaceExact()) {\n+        if (referencesInterfaceExact() || superclass.referencesInterfaceExact()) {\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/generic\/ObjectType.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -113,1 +113,1 @@\n-     * Set index of local variable containg the return address\n+     * Sets index of local variable containg the return address\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/generic\/RET.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -45,4 +45,4 @@\n-     * interface). If one of the types is a superclass of the other, the former is returned. If \"this\" is Type.NULL, then t\n-     * is returned. If t is Type.NULL, then \"this\" is returned. If \"this\" equals t ['this.equals(t)'] \"this\" is returned. If\n-     * \"this\" or t is an ArrayType, then Type.OBJECT is returned. If \"this\" or t is a ReferenceType referencing an\n-     * interface, then Type.OBJECT is returned. If not all of the two classes' superclasses cannot be found, \"null\" is\n+     * interface). If one of the types is a superclass of the other, the former is returned. If \"this\" is NULL, then t\n+     * is returned. If t is NULL, then \"this\" is returned. If \"this\" equals t ['this.equals(t)'] \"this\" is returned. If\n+     * \"this\" or t is an ArrayType, then {@link #OBJECT} is returned. If \"this\" or t is a ReferenceType referencing an\n+     * interface, then {@link #OBJECT} is returned. If not all of the two classes' superclasses cannot be found, \"null\" is\n@@ -56,1 +56,1 @@\n-        if (this.equals(Type.NULL)) {\n+        if (equals(NULL)) {\n@@ -59,1 +59,1 @@\n-        if (t.equals(Type.NULL) || this.equals(t)) {\n+        if (t.equals(NULL) || equals(t)) {\n@@ -62,3 +62,3 @@\n-             * TODO: Above sounds a little arbitrary. On the other hand, there is no object referenced by Type.NULL so we can also\n-             * say all the objects referenced by Type.NULL were derived from java.lang.Object. However, the Java Language's\n-             * \"instanceof\" operator proves us wrong: \"null\" is not referring to an instance of java.lang.Object :)\n+             * TODO: Above sounds a little arbitrary. On the other hand, there is no object referenced by {@link #NULL} so we can also\n+             * say all the objects referenced by {@link #NULL} were derived from {@link Object}. However, the Java Language's\n+             * \"instanceof\" operator proves us wrong: \"null\" is not referring to an instance of {@link Object} :)\n@@ -68,2 +68,2 @@\n-            return Type.OBJECT;\n-            \/\/ TODO: Is there a proof of OBJECT being the direct ancestor of every ArrayType?\n+            return OBJECT;\n+            \/\/ TODO: Is there a proof of {@link #OBJECT} being the direct ancestor of every ArrayType?\n@@ -76,3 +76,3 @@\n-     * interface). If one of the types is a superclass of the other, the former is returned. If \"this\" is Type.NULL, then t\n-     * is returned. If t is Type.NULL, then \"this\" is returned. If \"this\" equals t ['this.equals(t)'] \"this\" is returned. If\n-     * \"this\" or t is an ArrayType, then Type.OBJECT is returned; unless their dimensions match. Then an ArrayType of the\n+     * interface). If one of the types is a superclass of the other, the former is returned. If \"this\" is NULL, then t\n+     * is returned. If t is NULL, then \"this\" is returned. If \"this\" equals t ['this.equals(t)'] \"this\" is returned. If\n+     * \"this\" or t is an ArrayType, then {@link #OBJECT} is returned; unless their dimensions match. Then an ArrayType of the\n@@ -80,1 +80,1 @@\n-     * \"this\" and t. If \"this\" or t is a ReferenceType referencing an interface, then Type.OBJECT is returned. If not all of\n+     * \"this\" and t. If \"this\" or t is a ReferenceType referencing an interface, then {@link #OBJECT} is returned. If not all of\n@@ -87,1 +87,1 @@\n-        if (this.equals(Type.NULL)) {\n+        if (equals(NULL)) {\n@@ -90,1 +90,1 @@\n-        if (t.equals(Type.NULL) || this.equals(t)) {\n+        if (t.equals(NULL) || equals(t)) {\n@@ -93,3 +93,3 @@\n-             * TODO: Above sounds a little arbitrary. On the other hand, there is no object referenced by Type.NULL so we can also\n-             * say all the objects referenced by Type.NULL were derived from java.lang.Object. However, the Java Language's\n-             * \"instanceof\" operator proves us wrong: \"null\" is not referring to an instance of java.lang.Object :)\n+             * TODO: Above sounds a little arbitrary. On the other hand, there is no object referenced by {@link #NULL} so we can also\n+             * say all the objects referenced by {@link #NULL} were derived from {@link Object}. However, the Java Language's\n+             * \"instanceof\" operator proves us wrong: \"null\" is not referring to an instance of {@link Object} :)\n@@ -109,2 +109,2 @@\n-            return Type.OBJECT;\n-            \/\/ TODO: Is there a proof of OBJECT being the direct ancestor of every ArrayType?\n+            return OBJECT;\n+            \/\/ TODO: Is there a proof of {@link #OBJECT} being the direct ancestor of every ArrayType?\n@@ -118,1 +118,1 @@\n-            return Type.OBJECT;\n+            return OBJECT;\n@@ -145,1 +145,1 @@\n-        \/\/ Huh? Did you ask for Type.OBJECT's superclass??\n+        \/\/ Huh? Did you ask for OBJECT's superclass??\n@@ -161,1 +161,1 @@\n-        if (this.equals(Type.NULL)) {\n+        if (equals(NULL)) {\n@@ -172,1 +172,1 @@\n-                && (this.equals(T) || Repository.instanceOf(((ObjectType) this).getClassName(), ((ObjectType) T).getClassName()))) {\n+                && (equals(T) || Repository.instanceOf(((ObjectType) this).getClassName(), ((ObjectType) T).getClassName()))) {\n@@ -190,1 +190,1 @@\n-            if (T instanceof ObjectType && ((ObjectType) T).referencesClassExact() && T.equals(Type.OBJECT)) {\n+            if (T instanceof ObjectType && ((ObjectType) T).referencesClassExact() && T.equals(OBJECT)) {\n@@ -197,1 +197,1 @@\n-                && (this.equals(T) || Repository.implementationOf(((ObjectType) this).getClassName(), ((ObjectType) T).getClassName()))) {\n+                && (equals(T) || Repository.implementationOf(((ObjectType) this).getClassName(), ((ObjectType) T).getClassName()))) {\n@@ -208,1 +208,1 @@\n-            if (T instanceof ObjectType && ((ObjectType) T).referencesClassExact() && T.equals(Type.OBJECT)) {\n+            if (T instanceof ObjectType && ((ObjectType) T).referencesClassExact() && T.equals(OBJECT)) {\n@@ -249,1 +249,1 @@\n-     * Type.NULL is not defined (see the CHECKCAST definition in the JVM specification). However, because e.g. CHECKCAST\n+     * {@link #NULL} is not defined (see the CHECKCAST definition in the JVM specification). However, because e.g. CHECKCAST\n@@ -256,1 +256,1 @@\n-        if (this.equals(Type.NULL)) {\n+        if (equals(NULL)) {\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/generic\/ReferenceType.java","additions":31,"deletions":31,"binary":false,"changes":62,"status":"modified"},{"patch":"@@ -98,1 +98,1 @@\n-        int[] matchClone = match.clone();\n+        final int[] matchClone = match.clone();\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/generic\/SWITCH.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -36,1 +36,1 @@\n- * @LastModified: May 2021\n+ * @LastModified: Sept 2025\n@@ -90,1 +90,1 @@\n-        \/\/ don't set default target before instuction is built\n+        \/\/ don't set default target before instruction is built\n@@ -291,1 +291,1 @@\n-     * Set branch target for 'i'th case\n+     * Sets branch target for 'i'th case\n@@ -317,1 +317,5 @@\n-                    s = targets[i].getInstruction().toString();\n+                    if (targets[i].getInstruction() == this) {\n+                        s = \"<points to itself>\";\n+                    } else {\n+                        s = targets[i].getInstruction().toString();\n+                    }\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/generic\/Select.java","additions":9,"deletions":5,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -169,1 +169,1 @@\n-            throw new IllegalStateException(\"SimpleElementValueGen doesnt know how to write out type \" + super.getElementValueType());\n+            throw new IllegalStateException(\"SimpleElementValueGen doesn't know how to write out type \" + super.getElementValueType());\n@@ -187,1 +187,1 @@\n-            throw new IllegalStateException(\"Dont call getValueString() on a non STRING ElementValue\");\n+            throw new IllegalStateException(\"Don't call getValueString() on a non STRING ElementValue\");\n@@ -195,1 +195,1 @@\n-            throw new IllegalStateException(\"Dont call getValueString() on a non STRING ElementValue\");\n+            throw new IllegalStateException(\"Don't call getValueString() on a non STRING ElementValue\");\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/generic\/SimpleElementValueGen.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,3 +24,3 @@\n- * Thrown by InstructionList.remove() when one or multiple disposed instructions are still being referenced by an\n- * InstructionTargeter object. I.e. the InstructionTargeter has to be notified that (one of) the InstructionHandle it is\n- * referencing is being removed from the InstructionList and thus not valid anymore.\n+ * Thrown by {@link InstructionList} when one or multiple disposed instructions are still being referenced by an {@link InstructionTargeter} object. I.e. the\n+ * {@link InstructionTargeter} has to be notified that (one of) the {@link InstructionHandle} it is referencing is being removed from the\n+ * {@link InstructionList} and thus not valid anymore.\n@@ -29,2 +29,2 @@\n- * Making this an exception instead of a return value forces the user to handle these case explicitly in a try { ... }\n- * catch. The following code illustrates how this may be done:\n+ * Making this an exception instead of a return value forces the user to handle these case explicitly in a try { ... } catch. The following code illustrates how\n+ * this may be done:\n@@ -33,1 +33,1 @@\n- * <PRE>\n+ * <pre>\n@@ -37,1 +37,1 @@\n- *     } catch(TargetLostException e) {\n+ *     } catch (TargetLostException e) {\n@@ -44,1 +44,1 @@\n- * <\/PRE>\n+ * <\/pre>\n@@ -49,1 +49,1 @@\n- * @LastModified: Feb 2023\n+ * @LastModified: Sept 2025\n@@ -57,3 +57,3 @@\n-    TargetLostException(final InstructionHandle[] t, final String mesg) {\n-        super(mesg);\n-        targets = t;\n+    TargetLostException(final InstructionHandle[] targets, final String message) {\n+        super(message);\n+        this.targets = targets;\n@@ -63,0 +63,2 @@\n+     * Gets the list of instructions still being targeted.\n+     *\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/generic\/TargetLostException.java","additions":15,"deletions":13,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,0 +29,1 @@\n+import com.sun.org.apache.bcel.internal.classfile.InvalidMethodSignatureException;\n@@ -30,0 +31,1 @@\n+import jdk.xml.internal.Utils;\n@@ -32,1 +34,1 @@\n- * Abstract super class for all possible java types, namely basic types such as int, object types like String and array\n+ * Abstract super class for all possible Java types, namely basic types such as int, object types like String and array\n@@ -34,1 +36,1 @@\n- * @LastModified: May 2021\n+ * @LastModified: Sept 2025\n@@ -91,1 +93,1 @@\n-                throw new ClassFormatException(\"Invalid method signature: \" + signature);\n+                throw new InvalidMethodSignatureException(signature);\n@@ -95,1 +97,1 @@\n-                \/\/ corrected concurrent private static field acess\n+                \/\/ corrected concurrent private static field access\n@@ -99,1 +101,1 @@\n-            throw new ClassFormatException(\"Invalid method signature: \" + signature, e);\n+            throw new InvalidMethodSignatureException(signature, e);\n@@ -113,1 +115,1 @@\n-                throw new ClassFormatException(\"Invalid method signature: \" + signature);\n+                throw new InvalidMethodSignatureException(signature);\n@@ -121,1 +123,1 @@\n-            throw new ClassFormatException(\"Invalid method signature: \" + signature, e);\n+            throw new InvalidMethodSignatureException(signature, e);\n@@ -157,1 +159,1 @@\n-            throw new ClassFormatException(\"Invalid method signature: \" + signature, e);\n+            throw new InvalidMethodSignatureException(signature, e);\n@@ -163,1 +165,1 @@\n-        return Type.size(getTypeSize(signature.substring(index)));\n+        return size(getTypeSize(signature.substring(index)));\n@@ -178,1 +180,1 @@\n-     * Convert runtime java.lang.Class to BCEL Type object.\n+     * Convert runtime {@link Class} to BCEL Type object.\n@@ -186,1 +188,1 @@\n-         * That's an amzingly easy case, because getName() returns the signature. That's what we would have liked anyway.\n+         * That's an amazingly easy case, because getName() returns the signature. That's what we would have liked anyway.\n@@ -233,1 +235,1 @@\n-            \/\/ corrected concurrent private static field acess\n+            \/\/ corrected concurrent private static field access\n@@ -249,1 +251,1 @@\n-        \/\/ corrected concurrent private static field acess\n+        \/\/ corrected concurrent private static field access\n@@ -257,1 +259,1 @@\n-     * Convert runtime java.lang.Class[] to BCEL Type objects.\n+     * Convert runtime {@code java.lang.Class[]} to BCEL Type objects.\n@@ -289,0 +291,18 @@\n+    static String internalTypeNameToSignature(final String internalTypeName) {\n+        if (Utils.isEmpty(internalTypeName) || Arrays.asList(Const.SHORT_TYPE_NAMES).contains(internalTypeName)) {\n+            return internalTypeName;\n+        }\n+        switch (internalTypeName.charAt(0)) {\n+            case '[':\n+                return internalTypeName;\n+            case 'L':\n+            case 'T':\n+                if (internalTypeName.charAt(internalTypeName.length() - 1) == ';') {\n+                    return internalTypeName;\n+                }\n+                return 'L' + internalTypeName + ';';\n+            default:\n+                return 'L' + internalTypeName + ';';\n+        }\n+    }\n+\n@@ -364,1 +384,1 @@\n-     * @return hashcode of Type\n+     * @return hash code of Type\n@@ -372,2 +392,2 @@\n-     * boolean, short and char variable are considered as int in the stack or local variable area. Returns {@link Type#INT}\n-     * for {@link Type#BOOLEAN}, {@link Type#SHORT} or {@link Type#CHAR}, otherwise returns the given type.\n+     * boolean, short and char variable are considered as int in the stack or local variable area. Returns {@link #INT}\n+     * for {@link #BOOLEAN}, {@link #SHORT} or {@link #CHAR}, otherwise returns the given type.\n@@ -378,2 +398,2 @@\n-        if (this == Type.BOOLEAN || this == Type.BYTE || this == Type.SHORT || this == Type.CHAR) {\n-            return Type.INT;\n+        if (this == BOOLEAN || this == BYTE || this == SHORT || this == CHAR) {\n+            return INT;\n@@ -384,8 +404,0 @@\n-    \/*\n-     * Currently only used by the ArrayType constructor. The signature has a complicated dependency on other parameter so\n-     * it's tricky to do it in a call to the super ctor.\n-     *\/\n-    void setSignature(final String signature) {\n-        this.signature = signature;\n-    }\n-\n@@ -397,1 +409,1 @@\n-        return this.equals(Type.NULL) || type >= Const.T_UNKNOWN ? signature : Utility.signatureToString(signature, false);\n+        return equals(NULL) || type >= Const.T_UNKNOWN ? signature : Utility.signatureToString(signature, false);\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/generic\/Type.java","additions":41,"deletions":29,"binary":false,"changes":70,"status":"modified"},{"patch":"@@ -25,1 +25,1 @@\n- * Get the type associated with an instruction, int for ILOAD, or the type of the field of a PUTFIELD instruction, e.g..\n+ * Gets the type associated with an instruction, int for ILOAD, or the type of the field of a PUTFIELD instruction, e.g..\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/generic\/TypedInstruction.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -0,0 +1,26 @@\n+\/*\n+ * reserved comment block\n+ * DO NOT REMOVE OR ALTER!\n+ *\/\n+\/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http:\/\/www.apache.org\/licenses\/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ *\/\n+\n+\/**\n+ * Generic part of the <a href=\"https:\/\/commons.apache.org\/bcel\/\">Apache Byte Code Engineering Library (BCEL)<\/a>, classes to dynamically modify class objects\n+ * and byte code instructions.\n+ *\/\n+package com.sun.org.apache.bcel.internal.generic;\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/generic\/package-info.java","additions":26,"deletions":0,"binary":false,"changes":26,"status":"added"},{"patch":"@@ -0,0 +1,26 @@\n+\/*\n+ * reserved comment block\n+ * DO NOT REMOVE OR ALTER!\n+ *\/\n+\/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http:\/\/www.apache.org\/licenses\/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ *\/\n+\n+\/**\n+ * Basic classes for the <a href=\"https:\/\/commons.apache.org\/bcel\/\">Apache Byte Code Engineering Library (BCEL)<\/a> and constants defined by the\n+ * <a href=\"https:\/\/docs.oracle.com\/javase\/specs\/\"> JVM specification<\/a>.\n+ *\/\n+package com.sun.org.apache.bcel.internal;\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/package-info.java","additions":26,"deletions":0,"binary":false,"changes":26,"status":"added"},{"patch":"@@ -25,1 +25,1 @@\n- * Used for BCEL comparison strategy\n+ * Used for BCEL comparison strategy.\n@@ -27,0 +27,1 @@\n+ * @param <T> What type we are comparing.\n@@ -29,1 +30,1 @@\n-public interface BCELComparator {\n+public interface BCELComparator<T> {\n@@ -32,1 +33,1 @@\n-     * Compare two objects and return what THIS.equals(THAT) should return\n+     * Compares two objects and return what a.equals(b) should return.\n@@ -34,3 +35,3 @@\n-     * @param THIS\n-     * @param THAT\n-     * @return true if and only if THIS equals THAT\n+     * @param a an object.\n+     * @param b an object to be compared with {@code a} for equality.\n+     * @return {@code true} if the arguments are equal to each other and {@code false} otherwise.\n@@ -38,1 +39,1 @@\n-    boolean equals(Object THIS, Object THAT);\n+    boolean equals(T a, T b);\n@@ -41,1 +42,1 @@\n-     * Return hashcode for THIS.hashCode()\n+     * Gets the hash code for o.hashCode()\n@@ -43,2 +44,2 @@\n-     * @param THIS\n-     * @return hashcode for THIS.hashCode()\n+     * @param o\n+     * @return hash code for o.hashCode()\n@@ -46,1 +47,1 @@\n-    int hashCode(Object THIS);\n+    int hashCode(T o);\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/util\/BCELComparator.java","additions":12,"deletions":11,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -66,1 +66,1 @@\n- * @LastModified: Feb 2023\n+ * @LastModified: Sept 2025\n@@ -68,1 +68,1 @@\n-class BCELFactory extends EmptyVisitor {\n+final class BCELFactory extends EmptyVisitor {\n@@ -91,1 +91,1 @@\n-            embed = \"(char)0x\" + Integer.toHexString(((Character) value).charValue());\n+            embed = \"(char) 0x\" + Integer.toHexString(((Character) value).charValue());\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/util\/BCELFactory.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2023, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,0 +33,1 @@\n+import com.sun.org.apache.bcel.internal.classfile.Code;\n@@ -38,0 +39,3 @@\n+import com.sun.org.apache.bcel.internal.classfile.StackMap;\n+import com.sun.org.apache.bcel.internal.classfile.StackMapEntry;\n+import com.sun.org.apache.bcel.internal.classfile.StackMapType;\n@@ -49,1 +53,1 @@\n- * @LastModified: Feb 2023\n+ * @LastModified: Sept 2025\n@@ -77,1 +81,1 @@\n-    public static void _main(final String[] argv) throws Exception {\n+    public static void main(final String[] argv) throws Exception {\n@@ -314,0 +318,7 @@\n+        final Code code = method.getCode();\n+        if (code != null) {\n+            final StackMap stackMap = code.getStackMap();\n+            if (stackMap != null) {\n+                stackMap.accept(this);\n+            }\n+        }\n@@ -322,0 +333,74 @@\n+\n+    @Override\n+    public void visitStackMap(final StackMap stackMap) {\n+        super.visitStackMap(stackMap);\n+        printWriter.print(\"    method.addCodeAttribute(\");\n+        printWriter.print(\"new StackMap(_cp.addUtf8(\\\"\");\n+        printWriter.print(stackMap.getName());\n+        printWriter.print(\"\\\"), \");\n+        printWriter.print(stackMap.getLength());\n+        printWriter.print(\", \");\n+        printWriter.print(\"new StackMapEntry[] {\");\n+        final StackMapEntry[] table = stackMap.getStackMap();\n+        for (int i = 0; i < table.length; i++) {\n+            table[i].accept(this);\n+            if (i < table.length - 1) {\n+                printWriter.print(\", \");\n+            } else {\n+                printWriter.print(\" }\");\n+            }\n+        }\n+        printWriter.print(\", _cp.getConstantPool())\");\n+        printWriter.println(\");\");\n+    }\n+\n+    @Override\n+    public void visitStackMapEntry(final StackMapEntry stackMapEntry) {\n+        super.visitStackMapEntry(stackMapEntry);\n+        printWriter.print(\"new StackMapEntry(\");\n+        printWriter.print(stackMapEntry.getFrameType());\n+        printWriter.print(\", \");\n+        printWriter.print(stackMapEntry.getByteCodeOffset());\n+        printWriter.print(\", \");\n+        visitStackMapTypeArray(stackMapEntry.getTypesOfLocals());\n+        printWriter.print(\", \");\n+        visitStackMapTypeArray(stackMapEntry.getTypesOfStackItems());\n+        printWriter.print(\", _cp.getConstantPool())\");\n+    }\n+\n+    \/**\n+     * Visits a {@link StackMapType} object.\n+     * @param stackMapType object to visit\n+     * @since 6.7.1\n+     *\/\n+    @Override\n+    public void visitStackMapType(final StackMapType stackMapType) {\n+        super.visitStackMapType(stackMapType);\n+        printWriter.print(\"new StackMapType((byte)\");\n+        printWriter.print(stackMapType.getType());\n+        printWriter.print(\", \");\n+        if (stackMapType.hasIndex()) {\n+            printWriter.print(\"_cp.addClass(\\\"\");\n+            printWriter.print(stackMapType.getClassName());\n+            printWriter.print(\"\\\")\");\n+        } else {\n+            printWriter.print(\"-1\");\n+        }\n+        printWriter.print(\", _cp.getConstantPool())\");\n+    }\n+\n+    private void visitStackMapTypeArray(final StackMapType[] types) {\n+        if (types == null || types.length == 0) {\n+            printWriter.print(\"null\"); \/\/ null translates to StackMapType.EMPTY_ARRAY\n+        } else {\n+            printWriter.print(\"new StackMapType[] {\");\n+            for (int i = 0; i < types.length; i++) {\n+                types[i].accept(this);\n+                if (i < types.length - 1) {\n+                    printWriter.print(\", \");\n+                } else {\n+                    printWriter.print(\" }\");\n+                }\n+            }\n+        }\n+    }\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/util\/BCELifier.java","additions":88,"deletions":3,"binary":false,"changes":91,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -56,1 +56,1 @@\n- * @LastModified: Feb 2023\n+ * @LastModified: Sept 2025\n@@ -76,1 +76,1 @@\n-    public static void _main(final String[] argv) throws IOException {\n+    public static void main(final String[] argv) throws IOException {\n@@ -92,1 +92,1 @@\n-                        dir = dir + sep;\n+                        dir += sep;\n@@ -118,1 +118,1 @@\n-                    parser = new ClassParser(zipFile, fileName[i]); \/\/ Create parser object from zip file\n+                    parser = new ClassParser(zipFile, fileName[i]); \/\/ Create parser object from ZIP file\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/util\/Class2HTML.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2023, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,1 +33,1 @@\n- * @LastModified: Feb 2023\n+ * @LastModified: Sept 2025\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/util\/ClassSet.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -545,1 +545,1 @@\n-                     * Set an anchor mark if this line is targetted by a goto, jsr, etc. Defining an anchor for every line is very\n+                     * Sets an anchor mark if this line is targetted by a goto, jsr, etc. Defining an anchor for every line is very\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/util\/CodeHTML.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -66,1 +66,1 @@\n- * @LastModified: May 2021\n+ * @LastModified: Sept 2025\n@@ -73,1 +73,0 @@\n-     *\n@@ -377,1 +376,1 @@\n-\/\/        StringBuffer buf = new StringBuffer();\n+\/\/        StringBuilder buf = new StringBuilder();\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/util\/InstructionFinder.java","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,2 +28,2 @@\n- * @see org.apache.bcel.Repository\n- * @LastModified: Feb 2023\n+ * @see com.sun.org.apache.bcel.internal.Repository\n+ * @LastModified: Sept 2025\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/util\/Repository.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -0,0 +1,32 @@\n+\/*\n+ * reserved comment block\n+ * DO NOT REMOVE OR ALTER!\n+ *\/\n+\/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http:\/\/www.apache.org\/licenses\/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ *\/\n+\n+\/**\n+ * Utility classes for the <a href=\"https:\/\/commons.apache.org\/bcel\/\">Apache Byte Code Engineering Library (BCEL)<\/a>, namely:\n+ * <ul>\n+ * <li>Collection classes for JavaClass objects<\/li>\n+ * <li>A converter for class files to HTML<\/li>\n+ * <li>A tool to find instructions patterns via regular expressions<\/li>\n+ * <li>A class to find classes as defined in the CLASSPATH<\/li>\n+ * <li>A class loader that allows to create classes at run time<\/li>\n+ * <\/ul>\n+ *\/\n+package com.sun.org.apache.bcel.internal.util;\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/bcel\/internal\/util\/package-info.java","additions":32,"deletions":0,"binary":false,"changes":32,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2023, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2023, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,0 +28,1 @@\n+import java.lang.reflect.Array;\n@@ -29,0 +30,1 @@\n+import java.util.Objects;\n@@ -30,0 +32,1 @@\n+import java.util.stream.Stream;\n@@ -79,0 +82,55 @@\n+\n+    \/**\n+     * Returns the original array, or an empty array if it is {@code null}.\n+     * @param array the specified array\n+     * @return the original array, or an empty array if it is {@code null}\n+     *\/\n+    public static byte[] createEmptyArrayIfNull(byte[] array) {\n+        return (array != null) ? array : new byte[0];\n+    }\n+\n+    \/**\n+     * Returns the original array, or an empty array if it is {@code null}.\n+     * @param array the specified array\n+     * @return the original array, or an empty array if it is {@code null}\n+     *\/\n+    public static int[] createEmptyArrayIfNull(int[] array) {\n+        return (array != null) ? array : new int[0];\n+    }\n+\n+    \/**\n+     * Returns the original array, or an empty array if it is {@code null}.\n+     * @param <T> the class type\n+     * @param array the specified array\n+     * @param type the type of the array\n+     * @return the original array, or an empty array if it is {@code null}\n+     *\/\n+    public static <T> T[] createEmptyArrayIfNull(final T[] array, final Class<T[]> type) {\n+        Objects.requireNonNull(type, \"The type argument should not be null.\");\n+\n+        return (array != null) ? array : type.cast(Array.newInstance(type.getComponentType(), 0));\n+    }\n+\n+    \/**\n+     * Returns the new stream created by {@code Stream.of(values)} or an empty\n+     * sequential stream created by {@code Stream.empty()} if values is null.\n+     *\n+     * @param <T> the type of stream elements\n+     * @param values the elements of the new stream\n+     * @return the new stream created by {@code Stream.of(values)} or an empty\n+     * sequential stream created by {@code Stream.empty()} if values is null.\n+     *\/\n+    @SafeVarargs\n+    @SuppressWarnings(\"varargs\") \/\/ Creating a stream from an array is safe\n+    public static <T> Stream<T> streamOfIfNonNull(final T... values) {\n+        return values == null ? Stream.empty() : Stream.of(values);\n+    }\n+\n+    \/**\n+     * Checks if a CharSequence is empty (\"\") or null.\n+     * @param cs the CharSequence to check, may be null\n+     * @return {@code true} if the CharSequence is empty or null\n+     *\/\n+    public static boolean isEmpty(final CharSequence cs) {\n+        return cs == null || cs.length() == 0;\n+    }\n","filename":"src\/java.xml\/share\/classes\/jdk\/xml\/internal\/Utils.java","additions":59,"deletions":1,"binary":false,"changes":60,"status":"modified"},{"patch":"@@ -1,1 +1,1 @@\n-## Apache Commons Byte Code Engineering Library (BCEL) Version 6.7.0\n+## Apache Commons Byte Code Engineering Library (BCEL) Version 6.10.0\n","filename":"src\/java.xml\/share\/legal\/bcel.md","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -759,0 +759,5 @@\n+            \/\/make sure variables defined in the let expression are not included\n+            \/\/in the defined variables for jumps that go outside of this let\n+            \/\/expression:\n+            undefineVariablesInChain(result.falseJumps, limit);\n+            undefineVariablesInChain(result.trueJumps, limit);\n@@ -766,0 +771,7 @@\n+        \/\/where:\n+        private void undefineVariablesInChain(Chain toClear, int limit) {\n+            while (toClear != null) {\n+                toClear.state.defined.excludeFrom(limit);\n+                toClear = toClear.next;\n+            }\n+        }\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/jvm\/Gen.java","additions":12,"deletions":0,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -0,0 +1,155 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package sun.security.pkcs11;\n+\n+import java.io.ByteArrayOutputStream;\n+import java.security.MessageDigest;\n+import java.security.PrivateKey;\n+import java.security.PublicKey;\n+import java.security.SecureRandom;\n+import java.security.SignatureSpi;\n+import java.security.InvalidKeyException;\n+import java.security.InvalidAlgorithmParameterException;\n+import java.security.InvalidParameterException;\n+import java.security.ProviderException;\n+import java.security.SignatureException;\n+import java.security.spec.AlgorithmParameterSpec;\n+import javax.crypto.Cipher;\n+import javax.crypto.BadPaddingException;\n+import javax.crypto.IllegalBlockSizeException;\n+import javax.crypto.NoSuchPaddingException;\n+import sun.security.pkcs11.wrapper.PKCS11Exception;\n+\n+\/**\n+ * NONEwithRSA Signature implementation using the RSA\/ECB\/PKCS1Padding Cipher\n+ * implementation from SunPKCS11.\n+ *\/\n+public final class RSACipherAdaptor extends SignatureSpi {\n+\n+    private final P11RSACipher c;\n+    private ByteArrayOutputStream verifyBuf;\n+\n+    public RSACipherAdaptor(Token token, long mechanism) {\n+        try {\n+            c = new P11RSACipher(token, \"\", mechanism);\n+            c.engineSetPadding(\"pkcs1padding\");\n+        } catch (PKCS11Exception | NoSuchPaddingException e) {\n+            \/\/ should not happen, but wrap and re-throw if it were to happen\n+            throw new ProviderException(e);\n+        }\n+    }\n+\n+    @Override\n+    protected void engineInitVerify(PublicKey publicKey)\n+            throws InvalidKeyException {\n+        c.engineInit(Cipher.DECRYPT_MODE, publicKey, null);\n+        if (verifyBuf == null) {\n+            verifyBuf = new ByteArrayOutputStream(128);\n+        } else {\n+            verifyBuf.reset();\n+        }\n+    }\n+\n+    @Override\n+    protected void engineInitSign(PrivateKey privateKey)\n+            throws InvalidKeyException {\n+        c.engineInit(Cipher.ENCRYPT_MODE, privateKey, null);\n+        verifyBuf = null;\n+    }\n+\n+    @Override\n+    protected void engineInitSign(PrivateKey privateKey, SecureRandom random)\n+            throws InvalidKeyException {\n+        c.engineInit(Cipher.ENCRYPT_MODE, privateKey, random);\n+        verifyBuf = null;\n+    }\n+\n+    @Override\n+    protected void engineUpdate(byte b) throws SignatureException {\n+        engineUpdate(new byte[] {b}, 0, 1);\n+    }\n+\n+    @Override\n+    protected void engineUpdate(byte[] b, int off, int len)\n+            throws SignatureException {\n+        if (verifyBuf != null) {\n+            verifyBuf.write(b, off, len);\n+        } else {\n+            byte[] out = c.engineUpdate(b, off, len);\n+            if ((out != null) && (out.length != 0)) {\n+                throw new SignatureException\n+                       (\"Cipher unexpectedly returned data\");\n+            }\n+        }\n+    }\n+\n+    @Override\n+    protected byte[] engineSign() throws SignatureException {\n+        try {\n+            return c.engineDoFinal(null, 0, 0);\n+        } catch (IllegalBlockSizeException | BadPaddingException e) {\n+           throw new SignatureException(\"doFinal() failed\", e);\n+        }\n+    }\n+\n+    @Override\n+    protected boolean engineVerify(byte[] sigBytes) throws SignatureException {\n+        try {\n+            byte[] out = c.engineDoFinal(sigBytes, 0, sigBytes.length);\n+            byte[] data = verifyBuf.toByteArray();\n+            verifyBuf.reset();\n+            return MessageDigest.isEqual(out, data);\n+        } catch (BadPaddingException e) {\n+            \/\/ e.g. wrong public key used\n+            \/\/ return false rather than throwing exception\n+            return false;\n+        } catch (IllegalBlockSizeException e) {\n+            throw new SignatureException(\"doFinal() failed\", e);\n+        }\n+    }\n+\n+    @Override\n+    protected void engineSetParameter(AlgorithmParameterSpec params)\n+            throws InvalidAlgorithmParameterException {\n+        if (params != null) {\n+            throw new InvalidParameterException(\"Parameters not supported\");\n+        }\n+    }\n+\n+    @Override\n+    @SuppressWarnings(\"deprecation\")\n+    protected void engineSetParameter(String param, Object value)\n+            throws InvalidParameterException {\n+        throw new InvalidParameterException(\"Parameters not supported\");\n+    }\n+\n+    @Override\n+    @SuppressWarnings(\"deprecation\")\n+    protected Object engineGetParameter(String param)\n+            throws InvalidParameterException {\n+        throw new InvalidParameterException(\"Parameters not supported\");\n+    }\n+}\n","filename":"src\/jdk.crypto.cryptoki\/share\/classes\/sun\/security\/pkcs11\/RSACipherAdaptor.java","additions":155,"deletions":0,"binary":false,"changes":155,"status":"added"},{"patch":"@@ -977,0 +977,2 @@\n+        d(SIG, \"NONEwithRSA\",    \"sun.security.pkcs11.RSACipherAdaptor\",\n+                m(CKM_RSA_PKCS));\n@@ -1428,0 +1430,2 @@\n+                } else if (algorithm.equals(\"NONEwithRSA\")) {\n+                    return new RSACipherAdaptor(token, mechanism);\n","filename":"src\/jdk.crypto.cryptoki\/share\/classes\/sun\/security\/pkcs11\/SunPKCS11.java","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -183,0 +183,5 @@\n+  public boolean isContinuationStub()   {\n+    \/\/ NOTE: In newer versions this is renamed to \"continuation stubs\" by JDK-8360707.\n+    return getName().equals(\"StubRoutines (continuationstubs)\");\n+  }\n+\n","filename":"src\/jdk.hotspot.agent\/share\/classes\/sun\/jvm\/hotspot\/code\/CodeBlob.java","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -0,0 +1,63 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2025, NTT DATA.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\n+ *\/\n+\n+package sun.jvm.hotspot.runtime;\n+\n+import sun.jvm.hotspot.debugger.*;\n+import sun.jvm.hotspot.runtime.*;\n+import sun.jvm.hotspot.types.*;\n+\n+\n+public class ContinuationEntry extends VMObject {\n+    private static long size;\n+    private static Address returnPC;\n+\n+    static {\n+        VM.registerVMInitializedObserver((o, d) -> initialize(VM.getVM().getTypeDataBase()));\n+    }\n+\n+    private static synchronized void initialize(TypeDataBase db) throws WrongTypeException {\n+        Type type = db.lookupType(\"ContinuationEntry\");\n+        size = type.getSize();\n+        returnPC = type.getAddressField(\"_return_pc\").getValue();\n+    }\n+\n+    public ContinuationEntry(Address addr) {\n+        super(addr);\n+    }\n+\n+    public Address getEntryPC() {\n+        return returnPC;\n+    }\n+\n+    public Address getEntrySP(){\n+        return this.getAddress();\n+    }\n+\n+    public Address getEntryFP(){\n+        return this.getAddress().addOffsetTo(size);\n+    }\n+\n+}\n","filename":"src\/jdk.hotspot.agent\/share\/classes\/sun\/jvm\/hotspot\/runtime\/ContinuationEntry.java","additions":63,"deletions":0,"binary":false,"changes":63,"status":"added"},{"patch":"@@ -50,0 +50,1 @@\n+  private static AddressField  contEntryField;\n@@ -98,0 +99,1 @@\n+    contEntryField    = type.getAddressField(\"_cont_entry\");\n@@ -343,0 +345,4 @@\n+  public ContinuationEntry getContEntry() {\n+      return VMObjectFactory.newObject(ContinuationEntry.class, contEntryField.getValue(addr));\n+  }\n+\n","filename":"src\/jdk.hotspot.agent\/share\/classes\/sun\/jvm\/hotspot\/runtime\/JavaThread.java","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -295,1 +295,7 @@\n-      return cb.isUpcallStub() ? senderForUpcallStub(map, (UpcallStub)cb) : senderForCompiledFrame(map, cb);\n+      if (cb.isUpcallStub()) {\n+        return senderForUpcallStub(map, (UpcallStub)cb);\n+      } else if (cb.isContinuationStub()) {\n+        return senderForContinuationStub(map, cb);\n+      } else {\n+        return senderForCompiledFrame(map, cb);\n+      }\n@@ -399,0 +405,10 @@\n+  private Frame senderForContinuationStub(AARCH64RegisterMap map, CodeBlob cb) {\n+    var contEntry = map.getThread().getContEntry();\n+\n+    Address senderSP = contEntry.getEntrySP();\n+    Address senderPC = contEntry.getEntryPC();\n+    Address senderFP = contEntry.getEntryFP();\n+\n+    return new AARCH64Frame(senderSP, senderFP, senderPC);\n+  }\n+\n","filename":"src\/jdk.hotspot.agent\/share\/classes\/sun\/jvm\/hotspot\/runtime\/aarch64\/AARCH64Frame.java","additions":17,"deletions":1,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -282,1 +282,7 @@\n-      return cb.isUpcallStub() ? senderForUpcallStub(map, (UpcallStub)cb) : senderForCompiledFrame(map, cb);\n+      if (cb.isUpcallStub()) {\n+        return senderForUpcallStub(map, (UpcallStub)cb);\n+      } else if (cb.isContinuationStub()) {\n+        return senderForContinuationStub(map, cb);\n+      } else {\n+        return senderForCompiledFrame(map, cb);\n+      }\n@@ -361,0 +367,9 @@\n+  private Frame senderForContinuationStub(PPC64RegisterMap map, CodeBlob cb) {\n+    var contEntry = map.getThread().getContEntry();\n+\n+    Address sp = contEntry.getEntrySP();\n+    Address pc = contEntry.getEntryPC();\n+    Address fp = contEntry.getEntryFP();\n+\n+    return new PPC64Frame(sp, fp, pc);\n+  }\n","filename":"src\/jdk.hotspot.agent\/share\/classes\/sun\/jvm\/hotspot\/runtime\/ppc64\/PPC64Frame.java","additions":16,"deletions":1,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -287,1 +287,7 @@\n-      return cb.isUpcallStub() ? senderForUpcallStub(map, (UpcallStub)cb) : senderForCompiledFrame(map, cb);\n+      if (cb.isUpcallStub()) {\n+        return senderForUpcallStub(map, (UpcallStub)cb);\n+      } else if (cb.isContinuationStub()) {\n+        return senderForContinuationStub(map, cb);\n+      } else {\n+        return senderForCompiledFrame(map, cb);\n+      }\n@@ -391,0 +397,10 @@\n+  private Frame senderForContinuationStub(RISCV64RegisterMap map, CodeBlob cb) {\n+    var contEntry = map.getThread().getContEntry();\n+\n+    Address senderSP = contEntry.getEntrySP();\n+    Address senderPC = contEntry.getEntryPC();\n+    Address senderFP = contEntry.getEntryFP();\n+\n+    return new RISCV64Frame(senderSP, senderFP, senderPC);\n+  }\n+\n","filename":"src\/jdk.hotspot.agent\/share\/classes\/sun\/jvm\/hotspot\/runtime\/riscv64\/RISCV64Frame.java","additions":17,"deletions":1,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -292,1 +292,7 @@\n-      return cb.isUpcallStub() ? senderForUpcallStub(map, (UpcallStub)cb) : senderForCompiledFrame(map, cb);\n+      if (cb.isUpcallStub()) {\n+        return senderForUpcallStub(map, (UpcallStub)cb);\n+      } else if (cb.isContinuationStub()) {\n+        return senderForContinuationStub(map, cb);\n+      } else {\n+        return senderForCompiledFrame(map, cb);\n+      }\n@@ -396,0 +402,10 @@\n+  private Frame senderForContinuationStub(X86RegisterMap map, CodeBlob cb) {\n+    var contEntry = map.getThread().getContEntry();\n+\n+    Address senderSP = contEntry.getEntrySP();\n+    Address senderPC = contEntry.getEntryPC();\n+    Address senderFP = contEntry.getEntryFP();\n+\n+    return new X86Frame(senderSP, senderFP, senderPC);\n+  }\n+\n","filename":"src\/jdk.hotspot.agent\/share\/classes\/sun\/jvm\/hotspot\/runtime\/x86\/X86Frame.java","additions":17,"deletions":1,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -53,1 +53,1 @@\n-        return new LazyDelegatingJdkConsoleImpl(inCharset, outCharset);\n+        return isTTY ? new LazyDelegatingJdkConsoleImpl(inCharset, outCharset) : null;\n","filename":"src\/jdk.internal.le\/share\/classes\/jdk\/internal\/org\/jline\/JdkConsoleProviderImpl.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -111,0 +111,1 @@\n+                .put(HtmlAttr.ARIA_LABEL, resources.getText(\"doclet.selectModule\"))\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/SearchWriter.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -786,0 +786,3 @@\n+\n+doclet.selectModule=\\\n+    Select the module to search in.\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/standard.properties","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -589,2 +589,1 @@\n-        return new HtmlTree(HtmlTag.FOOTER)\n-                .setRole(HtmlAttr.Role.CONTENTINFO);\n+        return new HtmlTree(HtmlTag.FOOTER);\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/html\/HtmlTree.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -0,0 +1,571 @@\n+\/*\n+ * Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\n+#include \"gc\/shenandoah\/shenandoahHeap.inline.hpp\"\n+#include \"gc\/shenandoah\/shenandoahMarkBitMap.hpp\"\n+#include \"gc\/shenandoah\/shenandoahMarkBitMap.inline.hpp\"\n+\n+BEGIN_ALLOW_FORBIDDEN_FUNCTIONS\n+#include <iostream>\n+END_ALLOW_FORBIDDEN_FUNCTIONS\n+\n+#include \"memory\/memRegion.hpp\"\n+#include \"unittest.hpp\"\n+\n+#include \"utilities\/ostream.hpp\"\n+#include \"utilities\/vmassert_reinstall.hpp\"\n+#include \"utilities\/vmassert_uninstall.hpp\"\n+\n+\/\/ These tests will all be skipped (unless Shenandoah becomes the default\n+\/\/ collector). To execute these tests, you must enable Shenandoah, which\n+\/\/ is done with:\n+\/\/\n+\/\/ % make exploded-test TEST=\"gtest:ShenandoahOld*\" CONF=release TEST_OPTS=\"JAVA_OPTIONS=-XX:+UseShenandoahGC -XX:+UnlockExperimentalVMOptions -XX:ShenandoahGCMode=generational\"\n+\/\/\n+\/\/ Please note that these 'unit' tests are really integration tests and rely\n+\/\/ on the JVM being initialized. These tests manipulate the state of the\n+\/\/ collector in ways that are not compatible with a normal collection run.\n+\/\/ If these tests take longer than the minimum time between gc intervals -\n+\/\/ or, more likely, if you have them paused in a debugger longer than this\n+\/\/ interval - you can expect trouble. These tests will also not run in a build\n+\/\/ with asserts enabled because they use APIs that expect to run on a safepoint.\n+\n+#ifdef ASSERT\n+#define SKIP_IF_NOT_SHENANDOAH()           \\\n+  std::cout << \"skipped (debug build)\\n\";  \\\n+  return;\n+#else\n+#define SKIP_IF_NOT_SHENANDOAH() \\\n+    if (!UseShenandoahGC) {      \\\n+      std::cout << \"skipped\\n\";  \\\n+      return;                    \\\n+    }\n+#endif\n+\n+static bool _success;\n+static size_t _assertion_failures;\n+\n+#define MarkBitMapAssertEqual(a, b)  EXPECT_EQ((a), (b));   if ((a) != (b)) { _assertion_failures++; }\n+#define MarkBitMapAssertTrue(a)      EXPECT_TRUE((a));      if ((a) == 0)   { _assertion_failures++; }\n+\n+\n+class ShenandoahMarkBitMapTest: public ::testing::Test {\n+protected:\n+\n+  static void verify_bitmap_is_empty(HeapWord *start, size_t words_in_heap, ShenandoahMarkBitMap* mbm) {\n+    MarkBitMapAssertTrue(mbm->is_bitmap_clear_range(start, start + words_in_heap));\n+    while (words_in_heap-- > 0) {\n+      MarkBitMapAssertTrue(!mbm->is_marked(start));\n+      MarkBitMapAssertTrue(!mbm->is_marked_weak(start));\n+      MarkBitMapAssertTrue(!mbm->is_marked_strong(start));\n+      start++;\n+    }\n+  }\n+\n+  static void verify_bitmap_is_weakly_marked(ShenandoahMarkBitMap* mbm,\n+                                             HeapWord* weakly_marked_addresses[], size_t weakly_marked_objects) {\n+    for (size_t i = 0; i < weakly_marked_objects; i++) {\n+      HeapWord* obj_addr = weakly_marked_addresses[i];\n+      MarkBitMapAssertTrue(mbm->is_marked(obj_addr));\n+      MarkBitMapAssertTrue(mbm->is_marked_weak(obj_addr));\n+    }\n+  }\n+\n+  static void verify_bitmap_is_strongly_marked(ShenandoahMarkBitMap* mbm,\n+                                               HeapWord* strongly_marked_addresses[], size_t strongly_marked_objects) {\n+    for (size_t i = 0; i < strongly_marked_objects; i++) {\n+      HeapWord* obj_addr = strongly_marked_addresses[i];\n+      MarkBitMapAssertTrue(mbm->is_marked(obj_addr));\n+      MarkBitMapAssertTrue(mbm->is_marked_strong(obj_addr));\n+    }\n+  }\n+\n+  static void verify_bitmap_all(ShenandoahMarkBitMap* mbm, HeapWord* all_marked_addresses[],\n+                                bool is_weakly_marked_object[], bool is_strongly_marked_object[], size_t  all_marked_objects,\n+                                HeapWord* heap_memory, HeapWord* end_of_heap_memory) {\n+    HeapWord* last_marked_addr = &heap_memory[-1];\n+    for (size_t i = 0; i < all_marked_objects; i++) {\n+      HeapWord* obj_addr = all_marked_addresses[i];\n+      if (is_strongly_marked_object[i]) {\n+        MarkBitMapAssertTrue(mbm->is_marked(obj_addr));\n+        MarkBitMapAssertTrue(mbm->is_marked_strong(obj_addr));\n+      }\n+      if (is_weakly_marked_object[i]) {\n+        MarkBitMapAssertTrue(mbm->is_marked(obj_addr));\n+        MarkBitMapAssertTrue(mbm->is_marked_weak(obj_addr));\n+      }\n+      while (++last_marked_addr < obj_addr) {\n+        MarkBitMapAssertTrue(!mbm->is_marked(last_marked_addr));\n+        MarkBitMapAssertTrue(!mbm->is_marked_strong(last_marked_addr));\n+        MarkBitMapAssertTrue(!mbm->is_marked_weak(last_marked_addr));\n+      }\n+      last_marked_addr = obj_addr;\n+    }\n+    while (++last_marked_addr < end_of_heap_memory) {\n+      MarkBitMapAssertTrue(!mbm->is_marked(last_marked_addr));\n+      MarkBitMapAssertTrue(!mbm->is_marked_strong(last_marked_addr));\n+      MarkBitMapAssertTrue(!mbm->is_marked_weak(last_marked_addr));\n+    }\n+\n+    HeapWord* next_marked = (HeapWord*) &heap_memory[0] - 1;\n+    for (size_t i = 0; i < all_marked_objects; i++) {\n+      next_marked = mbm->get_next_marked_addr(next_marked + 1, end_of_heap_memory);\n+      MarkBitMapAssertTrue(mbm->is_marked(next_marked));\n+      MarkBitMapAssertEqual(next_marked, all_marked_addresses[i]);\n+      if (is_strongly_marked_object[i]) {\n+        MarkBitMapAssertTrue(mbm->is_marked_strong(next_marked));\n+      }\n+      if (is_weakly_marked_object[i]) {\n+        MarkBitMapAssertTrue(mbm->is_marked_weak(next_marked));\n+      }\n+    }\n+    \/\/ We expect no more marked addresses to be found.  Should return limit.\n+    HeapWord* sentinel = mbm->get_next_marked_addr(next_marked + 1, end_of_heap_memory);\n+    MarkBitMapAssertEqual(sentinel, end_of_heap_memory);\n+\n+    HeapWord* prev_marked = end_of_heap_memory + 1;\n+    for (int i = (int) all_marked_objects - 1; i >= 0; i--) {\n+      prev_marked = mbm->get_prev_marked_addr(&heap_memory[0], prev_marked - 1);\n+      MarkBitMapAssertEqual(prev_marked, all_marked_addresses[i]);\n+      MarkBitMapAssertTrue(mbm->is_marked(prev_marked));\n+      if (is_strongly_marked_object[i]) {\n+        MarkBitMapAssertTrue(mbm->is_marked_strong(prev_marked));\n+      }\n+      if (is_weakly_marked_object[i]) {\n+        MarkBitMapAssertTrue(mbm->is_marked_weak(prev_marked));\n+      }\n+    }\n+    \/\/ We expect no more marked addresses to be found.  should return prev_marked.\n+    sentinel = mbm->get_prev_marked_addr(&heap_memory[0], prev_marked - 1);\n+    MarkBitMapAssertEqual(sentinel, prev_marked);\n+  }\n+\n+public:\n+\n+  static bool run_test() {\n+    ShenandoahHeap* heap = ShenandoahHeap::heap();\n+    size_t heap_size = heap->max_capacity();\n+    size_t heap_size_words = heap_size \/ HeapWordSize;\n+    HeapWord* my_heap_memory = heap->base();\n+    HeapWord* end_of_my_heap = my_heap_memory + heap_size_words;\n+    MemRegion heap_descriptor(my_heap_memory, heap_size_words);\n+\n+    _success = false;\n+    _assertion_failures = 0;\n+\n+    size_t bitmap_page_size = UseLargePages ? os::large_page_size() : os::vm_page_size();\n+    size_t bitmap_size_orig = ShenandoahMarkBitMap::compute_size(heap_size);\n+    size_t bitmap_size = align_up(bitmap_size_orig, bitmap_page_size);\n+    size_t bitmap_word_size = (bitmap_size + HeapWordSize - 1) \/ HeapWordSize;\n+\n+    HeapWord* my_bitmap_memory = NEW_C_HEAP_ARRAY(HeapWord, bitmap_word_size, mtGC);\n+\n+    MarkBitMapAssertTrue(my_bitmap_memory != nullptr);\n+    if (my_bitmap_memory == nullptr) {\n+      std::cout <<\"Cannot run test because failed to allocate bitmap memory\\n\" << std::flush;\n+      return false;\n+    }\n+    MemRegion bitmap_descriptor(my_bitmap_memory, bitmap_size \/ HeapWordSize);\n+    ShenandoahMarkBitMap mbm(heap_descriptor, bitmap_descriptor);\n+\n+    mbm.clear_range_large(heap_descriptor);\n+    verify_bitmap_is_empty((HeapWord*) my_heap_memory, heap_size_words, &mbm);\n+\n+    HeapWord* weakly_marked_addresses[] = {\n+      (HeapWord*) &my_heap_memory[13],\n+      (HeapWord*) &my_heap_memory[14],\n+      (HeapWord*) &my_heap_memory[15],\n+      (HeapWord*) &my_heap_memory[16],\n+      (HeapWord*) &my_heap_memory[176],\n+      (HeapWord*) &my_heap_memory[240],\n+      (HeapWord*) &my_heap_memory[480],\n+      (HeapWord*) &my_heap_memory[1360],\n+      (HeapWord*) &my_heap_memory[1488],\n+      (HeapWord*) &my_heap_memory[2416],\n+      (HeapWord*) &my_heap_memory[5968],\n+      (HeapWord*) &my_heap_memory[8191],\n+      (HeapWord*) &my_heap_memory[8192],\n+      (HeapWord*) &my_heap_memory[8193]\n+    };\n+    size_t weakly_marked_objects = sizeof(weakly_marked_addresses) \/ sizeof(HeapWord*);\n+    for (size_t i = 0; i < weakly_marked_objects; i++) {\n+      mbm.mark_weak(weakly_marked_addresses[i]);\n+    }\n+    HeapWord* next_marked = (HeapWord*) &my_heap_memory[0] - 1;\n+    for (size_t i = 0; i < weakly_marked_objects; i++) {\n+      next_marked = mbm.get_next_marked_addr(next_marked + 1, end_of_my_heap);\n+      MarkBitMapAssertEqual(next_marked, weakly_marked_addresses[i]);\n+      MarkBitMapAssertTrue(mbm.is_marked(next_marked));\n+      MarkBitMapAssertTrue(mbm.is_marked_weak(next_marked));\n+      MarkBitMapAssertTrue(!mbm.is_marked_strong(next_marked));\n+    }\n+    \/\/ We expect no more marked addresses to be found.  Should return limit.\n+    HeapWord* sentinel = mbm.get_next_marked_addr(next_marked + 1, end_of_my_heap);\n+    HeapWord* heap_limit = end_of_my_heap;\n+    MarkBitMapAssertEqual(sentinel, heap_limit);\n+    HeapWord* prev_marked = end_of_my_heap + 1;;\n+    for (int i = (int) weakly_marked_objects - 1; i >= 0; i--) {\n+      \/\/ to be renamed get_prev_marked_addr()\n+      prev_marked = mbm.get_prev_marked_addr(&my_heap_memory[0], prev_marked - 1);\n+      MarkBitMapAssertEqual(prev_marked, weakly_marked_addresses[i]);\n+      MarkBitMapAssertTrue(mbm.is_marked(prev_marked));\n+      MarkBitMapAssertTrue(mbm.is_marked_weak(prev_marked));\n+      MarkBitMapAssertTrue(!mbm.is_marked_strong(prev_marked));\n+    }\n+    \/\/ We expect no more marked addresses to be found.  should return prev_marked.\n+    sentinel = mbm.get_prev_marked_addr(&my_heap_memory[0], prev_marked - 1);\n+    \/\/ MarkBitMapAssertEqual(sentinel, prev_marked);\n+    MarkBitMapAssertEqual(sentinel, prev_marked);\n+    verify_bitmap_is_weakly_marked(&mbm, weakly_marked_addresses, weakly_marked_objects);\n+\n+    HeapWord* strongly_marked_addresses[] = {\n+      (HeapWord*) &my_heap_memory[8],\n+      (HeapWord*) &my_heap_memory[24],\n+      (HeapWord*) &my_heap_memory[32],\n+      (HeapWord*) &my_heap_memory[56],\n+      (HeapWord*) &my_heap_memory[64],\n+      (HeapWord*) &my_heap_memory[168],\n+      (HeapWord*) &my_heap_memory[232],\n+      (HeapWord*) &my_heap_memory[248],\n+      (HeapWord*) &my_heap_memory[256],\n+      (HeapWord*) &my_heap_memory[257],\n+      (HeapWord*) &my_heap_memory[258],\n+      (HeapWord*) &my_heap_memory[259],\n+      (HeapWord*) &my_heap_memory[488],\n+      (HeapWord*) &my_heap_memory[1352],\n+      (HeapWord*) &my_heap_memory[1496],\n+      (HeapWord*) &my_heap_memory[2432],\n+      (HeapWord*) &my_heap_memory[5960]\n+    };\n+    size_t strongly_marked_objects = sizeof(strongly_marked_addresses) \/ sizeof(HeapWord*);\n+    for (size_t i = 0; i < strongly_marked_objects; i++) {\n+      bool upgraded = false;\n+      mbm.mark_strong(strongly_marked_addresses[i], upgraded);\n+      MarkBitMapAssertTrue(!upgraded);\n+    }\n+    verify_bitmap_is_strongly_marked(&mbm, strongly_marked_addresses, strongly_marked_objects);\n+    HeapWord* upgraded_weakly_marked_addresses[] = {\n+      (HeapWord*) &my_heap_memory[240],\n+      (HeapWord*) &my_heap_memory[1360],\n+    };\n+    size_t upgraded_weakly_marked_objects = sizeof(upgraded_weakly_marked_addresses) \/ sizeof(HeapWord *);\n+    for (size_t i = 0; i < upgraded_weakly_marked_objects; i++) {\n+      bool upgraded = false;\n+      mbm.mark_strong(upgraded_weakly_marked_addresses[i], upgraded);\n+      MarkBitMapAssertTrue(upgraded);\n+    }\n+    verify_bitmap_is_strongly_marked(&mbm, upgraded_weakly_marked_addresses, upgraded_weakly_marked_objects);\n+\n+    HeapWord* all_marked_addresses[] = {\n+      (HeapWord*) &my_heap_memory[8],        \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[13],       \/* weakly marked *\/\n+      (HeapWord*) &my_heap_memory[14],       \/* weakly marked *\/\n+      (HeapWord*) &my_heap_memory[15],       \/* weakly marked *\/\n+      (HeapWord*) &my_heap_memory[16],       \/* weakly marked *\/\n+      (HeapWord*) &my_heap_memory[24],       \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[32],       \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[56],       \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[64],       \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[168],      \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[176],      \/* weakly marked *\/\n+      (HeapWord*) &my_heap_memory[232],      \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[240],      \/* weakly marked upgraded to strongly marked *\/\n+      (HeapWord*) &my_heap_memory[248],      \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[256],      \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[257],      \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[258],      \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[259],      \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[480],      \/* weakly marked *\/\n+      (HeapWord*) &my_heap_memory[488],      \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[1352],     \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[1360],     \/* weakly marked upgraded to strongly marked *\/\n+      (HeapWord*) &my_heap_memory[1488],     \/* weakly marked *\/\n+      (HeapWord*) &my_heap_memory[1496],     \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[2416],     \/* weakly marked *\/\n+      (HeapWord*) &my_heap_memory[2432],     \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[5960],     \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[5968],     \/* weakly marked *\/\n+      (HeapWord*) &my_heap_memory[8191],     \/* weakly marked *\/\n+      (HeapWord*) &my_heap_memory[8192],     \/* weakly marked *\/\n+      (HeapWord*) &my_heap_memory[8193]      \/* weakly marked *\/\n+    };\n+    size_t all_marked_objects = sizeof(all_marked_addresses) \/ sizeof(HeapWord*);\n+    bool is_weakly_marked_object[] = {\n+      false,\n+      true,\n+      true,\n+      true,\n+      true,\n+      false,\n+      false,\n+      false,\n+      false,\n+      false,\n+      true,\n+      false,\n+      true,\n+      false,\n+      false,\n+      false,\n+      false,\n+      false,\n+      true,\n+      false,\n+      false,\n+      true,\n+      true,\n+      false,\n+      true,\n+      false,\n+      false,\n+      true,\n+      true,\n+      true,\n+      true\n+    };\n+    bool is_strongly_marked_object[] = {\n+      true,\n+      false,\n+      false,\n+      false,\n+      false,\n+      true,\n+      true,\n+      true,\n+      true,\n+      true,\n+      false,\n+      true,\n+      true,\n+      true,\n+      true,\n+      true,\n+      true,\n+      true,\n+      false,\n+      true,\n+      true,\n+      true,\n+      false,\n+      true,\n+      false,\n+      true,\n+      true,\n+      false,\n+      false,\n+      false,\n+      false\n+    };\n+    verify_bitmap_all(&mbm, all_marked_addresses, is_weakly_marked_object, is_strongly_marked_object, all_marked_objects,\n+                      my_heap_memory, end_of_my_heap);\n+\n+    MemRegion first_clear_region(&my_heap_memory[168], &my_heap_memory[256]);\n+    mbm.clear_range_large(first_clear_region);\n+    \/\/ Five objects are no longer marked\n+    HeapWord* all_marked_addresses_after_first_clear[] = {\n+      (HeapWord*) &my_heap_memory[8],        \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[13],       \/* weakly marked *\/\n+      (HeapWord*) &my_heap_memory[14],       \/* weakly marked *\/\n+      (HeapWord*) &my_heap_memory[15],       \/* weakly marked *\/\n+      (HeapWord*) &my_heap_memory[16],       \/* weakly marked *\/\n+      (HeapWord*) &my_heap_memory[24],       \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[32],       \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[56],       \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[64],       \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[256],      \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[257],      \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[258],      \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[259],      \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[480],      \/* weakly marked *\/\n+      (HeapWord*) &my_heap_memory[488],      \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[1352],     \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[1360],     \/* weakly marked upgraded to strongly marked *\/\n+      (HeapWord*) &my_heap_memory[1488],     \/* weakly marked *\/\n+      (HeapWord*) &my_heap_memory[1496],     \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[2416],     \/* weakly marked *\/\n+      (HeapWord*) &my_heap_memory[2432],     \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[5960],     \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[5968],     \/* weakly marked *\/\n+      (HeapWord*) &my_heap_memory[8191],    \/* weakly marked *\/\n+      (HeapWord*) &my_heap_memory[8192],    \/* weakly marked *\/\n+      (HeapWord*) &my_heap_memory[8193]     \/* weakly marked *\/\n+    };\n+    size_t all_marked_objects_after_first_clear = sizeof(all_marked_addresses_after_first_clear) \/ sizeof(HeapWord*);\n+    bool is_weakly_marked_object_after_first_clear[] = {\n+      false,\n+      true,\n+      true,\n+      true,\n+      true,\n+      false,\n+      false,\n+      false,\n+      false,\n+      false,\n+      false,\n+      false,\n+      false,\n+      true,\n+      false,\n+      false,\n+      true,\n+      true,\n+      false,\n+      true,\n+      false,\n+      false,\n+      true,\n+      true,\n+      true,\n+      true\n+    };\n+    bool is_strongly_marked_object_after_first_clear[] = {\n+      true,\n+      false,\n+      false,\n+      false,\n+      false,\n+      true,\n+      true,\n+      true,\n+      true,\n+      true,\n+      true,\n+      true,\n+      true,\n+      false,\n+      true,\n+      true,\n+      true,\n+      false,\n+      true,\n+      false,\n+      true,\n+      true,\n+      false,\n+      false,\n+      false,\n+      false\n+    };\n+    verify_bitmap_all(&mbm, all_marked_addresses_after_first_clear,\n+                      is_weakly_marked_object_after_first_clear, is_strongly_marked_object_after_first_clear,\n+                      all_marked_objects_after_first_clear, my_heap_memory, end_of_my_heap);\n+\n+    MemRegion second_clear_region(&my_heap_memory[1360], &my_heap_memory[2416]);\n+    mbm.clear_range_large(second_clear_region);\n+    \/\/ Five objects are no longer marked\n+    HeapWord* all_marked_addresses_after_2nd_clear[] = {\n+      (HeapWord*) &my_heap_memory[8],        \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[13],       \/* weakly marked *\/\n+      (HeapWord*) &my_heap_memory[14],       \/* weakly marked *\/\n+      (HeapWord*) &my_heap_memory[15],       \/* weakly marked *\/\n+      (HeapWord*) &my_heap_memory[16],       \/* weakly marked *\/\n+      (HeapWord*) &my_heap_memory[24],       \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[32],       \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[56],       \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[64],       \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[256],      \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[257],      \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[258],      \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[259],      \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[480],      \/* weakly marked *\/\n+      (HeapWord*) &my_heap_memory[488],      \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[1352],     \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[2416],     \/* weakly marked *\/\n+      (HeapWord*) &my_heap_memory[2432],     \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[5960],     \/* strongly marked *\/\n+      (HeapWord*) &my_heap_memory[5968],     \/* weakly marked *\/\n+      (HeapWord*) &my_heap_memory[8191],    \/* weakly marked *\/\n+      (HeapWord*) &my_heap_memory[8192],    \/* weakly marked *\/\n+      (HeapWord*) &my_heap_memory[8193]     \/* weakly marked *\/\n+    };\n+    size_t all_marked_objects_after_2nd_clear = sizeof(all_marked_addresses_after_2nd_clear) \/ sizeof(HeapWord*);\n+    bool is_weakly_marked_object_after_2nd_clear[] = {\n+      false,\n+      true,\n+      true,\n+      true,\n+      true,\n+      false,\n+      false,\n+      false,\n+      false,\n+      false,\n+      false,\n+      false,\n+      false,\n+      true,\n+      false,\n+      false,\n+      true,\n+      false,\n+      false,\n+      true,\n+      true,\n+      true,\n+      true\n+    };\n+    bool is_strongly_marked_object_after_2nd_clear[] = {\n+      true,\n+      false,\n+      false,\n+      false,\n+      false,\n+      true,\n+      true,\n+      true,\n+      true,\n+      true,\n+      true,\n+      true,\n+      true,\n+      false,\n+      true,\n+      true,\n+      false,\n+      true,\n+      true,\n+      false,\n+      false,\n+      false,\n+      false\n+    };\n+    verify_bitmap_all(&mbm, all_marked_addresses_after_2nd_clear,\n+                      is_weakly_marked_object_after_2nd_clear, is_strongly_marked_object_after_2nd_clear,\n+                      all_marked_objects_after_2nd_clear, my_heap_memory, end_of_my_heap);\n+\n+    FREE_C_HEAP_ARRAY(HeapWord, my_bitmap_memory);\n+    _success = true;\n+    return true;\n+  }\n+};\n+\n+TEST_VM_F(ShenandoahMarkBitMapTest, minimum_test) {\n+  SKIP_IF_NOT_SHENANDOAH();\n+\n+  bool result = ShenandoahMarkBitMapTest::run_test();\n+  ASSERT_EQ(result, true);\n+  ASSERT_EQ(_success, true);\n+  ASSERT_EQ(_assertion_failures, (size_t) 0);\n+}\n","filename":"test\/hotspot\/gtest\/gc\/shenandoah\/test_shenandoahMarkBitMap.cpp","additions":571,"deletions":0,"binary":false,"changes":571,"status":"added"},{"patch":"@@ -52,1 +52,1 @@\n-      tty->print_cr(\"skipped\");  \\\n+      std::cout << \"skipped\\n\";  \\\n","filename":"test\/hotspot\/gtest\/gc\/shenandoah\/test_shenandoahOldHeuristic.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -69,0 +69,1 @@\n+compiler\/jvmci\/jdk.vm.ci.code.test\/src\/jdk\/vm\/ci\/code\/test\/CodeInvalidationReasonTest.java 8360168 linux-riscv64\n","filename":"test\/hotspot\/jtreg\/ProblemList.txt","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -36,1 +36,1 @@\n- * @requires os.arch==\"aarch64\" | os.arch==\"amd64\" | os.arch == \"ppc64\" | os.arch == \"ppc64le\" | os.arch == \"riscv64\"\n+ * @requires os.arch == \"aarch64\" | os.arch == \"amd64\" | os.arch == \"x86_64\" | os.arch == \"ppc64\" | os.arch == \"ppc64le\" | os.arch == \"riscv64\"\n","filename":"test\/hotspot\/jtreg\/compiler\/c2\/TestBit.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -0,0 +1,123 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package compiler.c2;\n+\n+\/*\n+ * @test\n+ * @bug 8370405\n+ * @summary Test case where we had escape analysis tell us that we can possibly eliminate\n+ *          the array allocation, then MergeStores introduces a mismatched store, which\n+ *          the actual elimination does not verify for. That led to wrong results.\n+ * @run main\/othervm -XX:CompileCommand=compileonly,compiler.c2.TestMergeStoresAndAllocationElimination::test\n+ *                   -XX:CompileCommand=exclude,compiler.c2.TestMergeStoresAndAllocationElimination::dontinline\n+ *                   -XX:-TieredCompilation -Xbatch\n+ *                   -XX:+IgnoreUnrecognizedVMOptions -XX:-CICompileOSR\n+ *                   compiler.c2.TestMergeStoresAndAllocationElimination\n+ * @run main compiler.c2.TestMergeStoresAndAllocationElimination\n+ *\/\n+\n+public class TestMergeStoresAndAllocationElimination {\n+    static void dontinline() {}\n+\n+    static int test(boolean flag) {\n+        int[] arr = new int[4];\n+        \/\/ The values below will be caputured as \"raw stores\" in the Initialize\n+        \/\/ of the array allocation above.\n+        \/\/ These stores are for cosmetics only, we set the \"1\" bits so that it is\n+        \/\/ simple to track where values are coming from.\n+        arr[0] = 0x0001_0000;\n+        arr[1] = 0x0010_0000;\n+        arr[2] = 0x0000_0100;\n+        arr[3] = 0x0100_0000;\n+        \/\/ So far, the result should be:\n+        \/\/ 0x421_0300\n+\n+        \/\/ The call below prevents further assignments from being captured into\n+        \/\/ the Initialize above.\n+        dontinline();\n+        \/\/ The follwoing stores are eventually optimized by MergeStores, and create\n+        \/\/ a mismatched StoreL.\n+        arr[0] = 0x0000_0001;\n+        arr[1] = 0x0000_0010;\n+        \/\/ Now, the result should be:\n+        \/\/ 0x400_0321\n+\n+        \/\/ We create an uncommon trap because of an \"unstable if\".\n+        \/\/ If Escape Analysis were to work, it would try to capture the values\n+        \/\/ from the StoreL above. But because it is mismatched, it should fail.\n+        \/\/ What happened before that verification: we would take the ConL, and\n+        \/\/ insert it in a list of ConI. That meant that we eventually applied\n+        \/\/ that value wrong if the deopt was taken (flag = true).\n+        \/\/\n+        \/\/ What happened when the deopt got the wrong values: It got these values:\n+        \/\/ [0]=68719476737 = 0x10_0000_0001 -> long value, not correct\n+        \/\/ [1]=1048576     =      0x10_0000 -> this entry is not updated!\n+        \/\/ [2]=256         =          0x100\n+        \/\/ [3]=16777216    =     0x100_0000\n+        \/\/\n+        \/\/ This is serialized as a long and 3 ints, and that looks like 5 ints.\n+        \/\/ This creates an array of 5 elements (and not 4):\n+        \/\/ [0]             =            0x1\n+        \/\/ [1]             =           0x10\n+        \/\/ [2]             =      0x10_0000 -> this entry is \"inserted\"\n+        \/\/ [3]             =          0x100\n+        \/\/ [4]             =     0x100_0000\n+        \/\/\n+        \/\/ This creates the wrong state:\n+        \/\/ 0x30_0421\n+        \/\/ And we can actually read that the arr.length is 5, below.\n+        if (flag) { System.out.println(\"unstable if: \" + arr.length); }\n+\n+        \/\/ Delay the allocation elimination until after loop opts, so that it\n+        \/\/ happens after MergeStores. Without this, we would immediately\n+        \/\/ eliminate the allocation during Escape Analysis, and then MergeStores\n+        \/\/ would not find the stores that would be removed with the allocation.\n+        for (int i = 0; i < 10_000; i++) {\n+            arr[3] = 0x0000_1000;\n+        }\n+        \/\/ Coming from the correct value, we should have transition of state:\n+        \/\/ 0x400_0321 -> 0x4321\n+        \/\/ But coming from the bad (rematerialized) state, we transition:\n+        \/\/ 0x30_0421 -> 0x30_4021\n+\n+        \/\/ Tag each entry with an index number\n+        \/\/ We expect: 0x4321\n+        return 1 * arr[0] + 2 * arr[1] + 3 * arr[2] + 4 * arr[3];\n+    }\n+\n+    public static void main(String[] args) {\n+        \/\/ Capture interpreter result.\n+        int gold = test(false);\n+        \/\/ Repeat until we get compilation.\n+        for (int i = 0; i < 10_000; i++) {\n+            test(false);\n+        }\n+        \/\/ Capture compiled results.\n+        int res0 = test(false);\n+        int res1 = test(true);\n+        if (res0 != gold || res1 != gold) {\n+            throw new RuntimeException(\"Unexpected result: \" + Integer.toHexString(res0) + \" and \" + Integer.toHexString(res1) + \", should be: \" + Integer.toHexString(gold));\n+        }\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/compiler\/c2\/TestMergeStoresAndAllocationElimination.java","additions":123,"deletions":0,"binary":false,"changes":123,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,1 +34,1 @@\n- * @requires os.arch == \"x86_64\" | os.arch == \"aarch64\" | (os.arch == \"riscv64\" & vm.cpu.features ~= \".*zbb.*\")\n+ * @requires os.arch == \"amd64\" | os.arch == \"x86_64\" | os.arch == \"aarch64\" | (os.arch == \"riscv64\" & vm.cpu.features ~= \".*zbb.*\")\n","filename":"test\/hotspot\/jtreg\/compiler\/c2\/irTests\/RotateLeftNodeIntIdealizationTests.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,1 +34,1 @@\n- * @requires os.arch == \"x86_64\" | os.arch == \"aarch64\" | (os.arch == \"riscv64\" & vm.cpu.features ~= \".*zbb.*\")\n+ * @requires os.arch == \"amd64\" | os.arch == \"x86_64\" | os.arch == \"aarch64\" | (os.arch == \"riscv64\" & vm.cpu.features ~= \".*zbb.*\")\n","filename":"test\/hotspot\/jtreg\/compiler\/c2\/irTests\/RotateLeftNodeLongIdealizationTests.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -0,0 +1,195 @@\n+\/*\n+ * Copyright (c) 2024, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test id=yEA\n+ * @bug 8370405\n+ * @summary Test elimination of array allocation, and the rematerialization.\n+ * @library \/test\/lib \/\n+ * @run driver compiler.escapeAnalysis.TestRematerializeObjects yEA\n+ *\/\n+\n+\/*\n+ * @test id=nEA\n+ * @library \/test\/lib \/\n+ * @run driver compiler.escapeAnalysis.TestRematerializeObjects nEA\n+ *\/\n+\n+package compiler.escapeAnalysis;\n+\n+import jdk.test.lib.Utils;\n+\n+import compiler.lib.ir_framework.*;\n+import compiler.lib.verify.*;\n+\n+public class TestRematerializeObjects {\n+\n+    public static void main(String[] args) {\n+        TestFramework framework = new TestFramework(TestRematerializeObjects.class);\n+        switch (args[0]) {\n+            case \"yEA\" -> { framework.addFlags(\"-XX:+EliminateAllocations\"); }\n+            case \"nEA\" -> { framework.addFlags(\"-XX:-EliminateAllocations\"); }\n+            default -> { throw new RuntimeException(\"Test argument not recognized: \" + args[0]); }\n+        };\n+        framework.start();\n+    }\n+\n+    @DontInline\n+    static void dontinline() {}\n+\n+    @Run(test = \"test1\", mode = RunMode.STANDALONE)\n+    public void runTest1() {\n+        \/\/ Capture interpreter result.\n+        int gold = test1(false);\n+        \/\/ Repeat until we get compilation.\n+        for (int i = 0; i < 10_000; i++) {\n+            test1(false);\n+        }\n+        \/\/ Capture compiled results.\n+        int res0 = test1(false);\n+        int res1 = test1(true);\n+        if (res0 != gold || res1 != gold) {\n+            throw new RuntimeException(\"Unexpected result: \" + Integer.toHexString(res0) + \" and \" +\n+                                       Integer.toHexString(res1) + \", should be: \" + Integer.toHexString(gold));\n+        }\n+    }\n+\n+    @Test\n+    @IR(counts = {IRNode.ALLOC_ARRAY, \"1\",\n+                  IRNode.UNSTABLE_IF_TRAP, \"1\",\n+                  IRNode.STORE_L_OF_CLASS, \"int\\\\[int:4\\\\]\", \"1\",\n+                  IRNode.SAFEPOINT_SCALAROBJECT_OF, \"fields@\\\\[0..3\\\\]\", \"0\"},\n+        applyIfAnd = {\"EliminateAllocations\", \"false\", \"UseUnalignedAccesses\", \"true\"})\n+    @IR(counts = {IRNode.ALLOC_ARRAY, \"0\",\n+                  IRNode.UNSTABLE_IF_TRAP, \"1\",\n+                  IRNode.STORE_L_OF_CLASS, \"int\\\\[int:4\\\\]\", \"0\",\n+                  IRNode.SAFEPOINT_SCALAROBJECT_OF, \"fields@\\\\[0..3\\\\]\", \"2\"},\n+        applyIfAnd = {\"EliminateAllocations\", \"true\", \"UseUnalignedAccesses\", \"true\"})\n+    static int test1(boolean flag) {\n+        int[] arr = new int[4];\n+        arr[0] = 0x0001_0000; \/\/ these slip into Initialize\n+        arr[1] = 0x0010_0000;\n+        arr[2] = 0x0000_0100;\n+        arr[3] = 0x0100_0000;\n+        dontinline();\n+        arr[0] = 0x0000_0001; \/\/ MergeStores -> StoreL\n+        arr[1] = 0x0000_0010;\n+        if (flag) {\n+            \/\/ unstable if -> deopt -> rematerialized array (if was eliminated)\n+            System.out.println(\"unstable if: \" + arr.length);\n+        }\n+        arr[3] = 0x0000_1000;\n+        return 1 * arr[0] + 2 * arr[1] + 3 * arr[2] + 4 * arr[3];\n+    }\n+\n+    @Run(test = \"test2\", mode = RunMode.STANDALONE)\n+    public void runTest2() {\n+        \/\/ Capture interpreter result.\n+        int gold = test2(false);\n+        \/\/ Repeat until we get compilation.\n+        for (int i = 0; i < 10_000; i++) {\n+            test2(false);\n+        }\n+        \/\/ Capture compiled results.\n+        int res0 = test2(false);\n+        int res1 = test2(true);\n+        if (res0 != gold || res1 != gold) {\n+            throw new RuntimeException(\"Unexpected result: \" + Integer.toHexString(res0) + \" and \" +\n+                                       Integer.toHexString(res1) + \", should be: \" + Integer.toHexString(gold));\n+        }\n+    }\n+\n+    @Test\n+    @IR(counts = {IRNode.ALLOC_ARRAY, \"1\",\n+                  IRNode.UNSTABLE_IF_TRAP, \"1\",\n+                  IRNode.STORE_I_OF_CLASS, \"short\\\\[int:4\\\\]\", \"1\",\n+                  IRNode.SAFEPOINT_SCALAROBJECT_OF, \"fields@\\\\[0..3\\\\]\", \"0\"},\n+        applyIfAnd = {\"EliminateAllocations\", \"false\", \"UseUnalignedAccesses\", \"true\"})\n+    @IR(counts = {IRNode.ALLOC_ARRAY, \"0\",\n+                  IRNode.UNSTABLE_IF_TRAP, \"1\",\n+                  IRNode.STORE_I_OF_CLASS, \"short\\\\[int:4\\\\]\", \"0\",\n+                  IRNode.SAFEPOINT_SCALAROBJECT_OF, \"fields@\\\\[0..3\\\\]\", \"2\"},\n+        applyIfAnd = {\"EliminateAllocations\", \"true\", \"UseUnalignedAccesses\", \"true\"})\n+    static int test2(boolean flag) {\n+        short[] arr = new short[4];\n+        arr[0] = 1;\n+        arr[1] = 2;\n+        arr[2] = 4;\n+        arr[3] = 8;\n+        dontinline();\n+        \/\/ Seems we detect that this is a short value passed into the short field.\n+        arr[0] = 16;\n+        arr[1] = 32;\n+        if (flag) {\n+            \/\/ unstable if -> deopt -> rematerialized array (if was eliminated)\n+            System.out.println(\"unstable if: \" + arr.length);\n+        }\n+        arr[3] = 64;\n+        return 0x1 * arr[0] + 0x100 * arr[1] + 0x1_0000 * arr[2] + 0x100_0000 * arr[3];\n+    }\n+\n+    @Run(test = \"test3\", mode = RunMode.STANDALONE)\n+    public void runTest3() {\n+        \/\/ Capture interpreter result.\n+        int gold = test3(false, 42);\n+        \/\/ Repeat until we get compilation.\n+        for (int i = 0; i < 10_000; i++) {\n+            test3(false, 42);\n+        }\n+        \/\/ Capture compiled results.\n+        int res0 = test3(false, 42);\n+        int res1 = test3(true, 42);\n+        if (res0 != gold || res1 != gold) {\n+            throw new RuntimeException(\"Unexpected result: \" + Integer.toHexString(res0) + \" and \" +\n+                                       Integer.toHexString(res1) + \", should be: \" + Integer.toHexString(gold));\n+        }\n+    }\n+\n+    @Test\n+    @IR(counts = {IRNode.ALLOC_ARRAY, \"1\",\n+                  IRNode.UNSTABLE_IF_TRAP, \"1\",\n+                  IRNode.SAFEPOINT_SCALAROBJECT_OF, \"fields@\\\\[0..3\\\\]\", \"0\"},\n+        applyIf = {\"EliminateAllocations\", \"false\"})\n+    @IR(counts = {IRNode.ALLOC_ARRAY, \"0\",\n+                  IRNode.UNSTABLE_IF_TRAP, \"1\",\n+                  IRNode.SAFEPOINT_SCALAROBJECT_OF, \"fields@\\\\[0..3\\\\]\", \"2\"},\n+        applyIf = {\"EliminateAllocations\", \"true\"})\n+    static int test3(boolean flag, int x) {\n+        short[] arr = new short[4];\n+        arr[0] = 1;\n+        arr[1] = 2;\n+        arr[2] = 4;\n+        arr[3] = 8;\n+        dontinline();\n+        \/\/ Here, we don't get ConI, but instead AddI, which means we are\n+        \/\/ serializing an int value, for a short slot.\n+        arr[0] = (short)(x + 1);\n+        arr[1] = (short)(x + 2);\n+        if (flag) {\n+            \/\/ unstable if -> deopt -> rematerialized array (if was eliminated)\n+            System.out.println(\"unstable if: \" + arr.length);\n+        }\n+        arr[3] = 64;\n+        return 0x1 * arr[0] + 0x100 * arr[1] + 0x1_0000 * arr[2] + 0x100_0000 * arr[3];\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/compiler\/escapeAnalysis\/TestRematerializeObjects.java","additions":195,"deletions":0,"binary":false,"changes":195,"status":"added"},{"patch":"@@ -41,1 +41,7 @@\n-        TestFramework.runWithFlags(\"--add-modules=jdk.incubator.vector\", \"-XX:CompileCommand=inline,jdk.incubator.vector.Float16::*\");\n+        \/\/ Disable inlining for java.lang.Float::float16ToFloat and java.lang.Float::floatToFloat16.\n+        \/\/ Otherwise, they could be inlined into testHalfFloat on platforms where there is no support\n+        \/\/ for fp16, which causes unexpected IR graph.\n+        TestFramework.runWithFlags(\"--add-modules=jdk.incubator.vector\",\n+                                   \"-XX:CompileCommand=inline,jdk.incubator.vector.Float16::*\",\n+                                   \"-XX:CompileCommand=dontinline,java.lang.Float::float16ToFloat\",\n+                                   \"-XX:CompileCommand=dontinline,java.lang.Float::floatToFloat16\");\n","filename":"test\/hotspot\/jtreg\/compiler\/floatingpoint\/TestSubNodeFloatDoubleNegation.java","additions":7,"deletions":1,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -123,1 +123,1 @@\n-                return IntrinsicPredicates.SHA512_INSTRUCTION_AVAILABLE;\n+                return IntrinsicPredicates.isSHA512IntrinsicAvailable();\n","filename":"test\/hotspot\/jtreg\/compiler\/intrinsics\/sha\/cli\/DigestOptionsBase.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,1 +28,0 @@\n- * @requires os.arch!=\"x86\" & os.arch!=\"i386\"\n","filename":"test\/hotspot\/jtreg\/compiler\/intrinsics\/sha\/cli\/TestUseSHA512IntrinsicsOptionOnSupportedCPU.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -70,2 +70,1 @@\n-                int conc1 = getConstant(\"NMethodPatchingType::conc_data_patch\", Integer.class);\n-                int conc2 = getConstant(\"NMethodPatchingType::conc_instruction_and_data_patch\", Integer.class);\n+                int conc = getConstant(\"NMethodPatchingType::conc_instruction_and_data_patch\", Integer.class);\n@@ -74,1 +73,1 @@\n-                } else if (patchingType == conc1 || patchingType == conc2) {\n+                } else if (patchingType == conc) {\n","filename":"test\/hotspot\/jtreg\/compiler\/jvmci\/jdk.vm.ci.code.test\/src\/jdk\/vm\/ci\/code\/test\/TestHotSpotVMConfig.java","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -38,0 +38,3 @@\n+        if (Double.compare(lo, hi) >= 0) {\n+            throw new EmptyGeneratorException();\n+        }\n","filename":"test\/hotspot\/jtreg\/compiler\/lib\/generators\/UniformDoubleGenerator.java","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -38,0 +38,3 @@\n+        if (Float.compare(lo, hi) >= 0) {\n+            throw new EmptyGeneratorException();\n+        }\n","filename":"test\/hotspot\/jtreg\/compiler\/lib\/generators\/UniformFloatGenerator.java","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -105,2 +105,0 @@\n-    private static final String STORE_OF_CLASS_POSTFIX = \"(:|\\\\+)\\\\S* \\\\*\" + END;\n-    private static final String LOAD_OF_CLASS_POSTFIX = \"(:|\\\\+)\\\\S* \\\\*\" + END;\n@@ -1823,0 +1821,5 @@\n+    public static final String SAFEPOINT_SCALAROBJECT_OF = COMPOSITE_PREFIX + \"SAFEPOINT_SCALAROBJECT_OF\" + POSTFIX;\n+    static {\n+        safepointScalarobjectOfNodes(SAFEPOINT_SCALAROBJECT_OF, \"SafePointScalarObject\");\n+    }\n+\n@@ -2941,0 +2944,12 @@\n+    \/\/ Typename in load\/store have the structure:\n+    \/\/ @fully\/qualified\/package\/name\/to\/TheClass+12 *\n+    \/\/ And variation:\n+    \/\/ - after @, we can have \"stable:\" or other labels, with optional space after ':'\n+    \/\/ - the class can actually be a subclass, with $ separator (and it must be ok to give only the deepest one\n+    \/\/ - after the class name, we can have a comma-separated list of implemented interfaces enclosed in parentheses\n+    \/\/ - before the offset, we can have something like \":NotNull\", either way, seeing \"+\" or \":\" means the end of the type\n+    \/\/ Worst case, it can be something like:\n+    \/\/ @bla: bli:a\/b\/c$d$e (f\/g,h\/i\/j):NotNull+24 *\n+    private static final String LOAD_STORE_PREFIX = \"@(\\\\w+: ?)*[\\\\w\/\\\\$]*\\\\b\";\n+    private static final String LOAD_STORE_SUFFIX = \"( \\\\([^\\\\)]+\\\\))?(:|\\\\+)\\\\S* \\\\*\";\n+\n@@ -2942,1 +2957,1 @@\n-        String regex = START + irNodeRegex + MID + \"@\\\\S*\" + IS_REPLACED + LOAD_OF_CLASS_POSTFIX;\n+        String regex = START + irNodeRegex + MID + LOAD_STORE_PREFIX + IS_REPLACED + LOAD_STORE_SUFFIX + END;\n@@ -2947,1 +2962,6 @@\n-        String regex = START + irNodeRegex + MID + \"@\\\\S*\" + IS_REPLACED + STORE_OF_CLASS_POSTFIX;\n+        String regex = START + irNodeRegex + MID + LOAD_STORE_PREFIX + IS_REPLACED + LOAD_STORE_SUFFIX + END;\n+        beforeMatching(irNodePlaceholder, regex);\n+    }\n+\n+    private static void safepointScalarobjectOfNodes(String irNodePlaceholder, String irNodeRegex) {\n+        String regex = START + irNodeRegex + MID + \".*\" + IS_REPLACED + \".*\" + END;\n","filename":"test\/hotspot\/jtreg\/compiler\/lib\/ir_framework\/IRNode.java","additions":24,"deletions":4,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -45,2 +45,2 @@\n-                                    \"-XX:SafepointTimeoutDelay=\" + Utils.adjustTimeout(300),\n-                                    \"-XX:GuaranteedSafepointInterval=\" + Utils.adjustTimeout(300),\n+                                    \"-XX:SafepointTimeoutDelay=\" + Utils.adjustTimeout(1200),\n+                                    \"-XX:GuaranteedSafepointInterval=\" + Utils.adjustTimeout(1200),\n@@ -61,2 +61,2 @@\n-                                    \"-XX:SafepointTimeoutDelay=\" + Utils.adjustTimeout(300),\n-                                    \"-XX:GuaranteedSafepointInterval=\" + Utils.adjustTimeout(300),\n+                                    \"-XX:SafepointTimeoutDelay=\" + Utils.adjustTimeout(1200),\n+                                    \"-XX:GuaranteedSafepointInterval=\" + Utils.adjustTimeout(1200),\n","filename":"test\/hotspot\/jtreg\/compiler\/loopstripmining\/CheckLoopStripMining.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -39,0 +39,1 @@\n+import jdk.test.lib.Platform;\n@@ -63,2 +64,5 @@\n-        for (int i = 0; i < 200; i++) {\n-            int initialCodeCacheSizeInKb = 800 + rand.nextInt(400);\n+        \/\/ On s390x, generated code is ~6x larger in fastdebug and ~1.4x in release builds vs. other archs,\n+        \/\/ hence we require slightly more minimum space.\n+        int minInitialSize = 800 + (Platform.isS390x() ? 800 : 0);\n+        for (int i = 0; i < 50; i++) {\n+            int initialCodeCacheSizeInKb = minInitialSize + rand.nextInt(400);\n","filename":"test\/hotspot\/jtreg\/compiler\/startup\/StartupOutput.java","additions":6,"deletions":2,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -80,1 +80,1 @@\n-        if (isPodman() & !Platform.isRoot()) {\n+        if (DockerTestUtils.isPodman() & !Platform.isRoot()) {\n@@ -225,6 +225,0 @@\n-    static boolean isPodman() {\n-        String[] parts = Container.ENGINE_COMMAND\n-            .toLowerCase()\n-            .split(File.pathSeparator);\n-        return \"podman\".equals(parts[parts.length - 1]);\n-    }\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestJFRWithJMX.java","additions":1,"deletions":7,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -60,1 +60,1 @@\n-    private static final boolean IS_PODMAN = Container.ENGINE_COMMAND.contains(\"podman\");\n+    private static final boolean IS_PODMAN = DockerTestUtils.isPodman();\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestJcmd.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -0,0 +1,121 @@\n+\/*\n+ * Copyright (C) 2025, IBM Corporation. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import jdk.test.lib.Container;\n+import jdk.test.lib.containers.docker.Common;\n+import jdk.test.lib.containers.docker.DockerTestUtils;\n+import jdk.test.lib.containers.docker.ContainerRuntimeVersionTestUtils;\n+import jdk.test.lib.containers.docker.DockerRunOptions;\n+import jdk.test.lib.process.OutputAnalyzer;\n+import jdk.internal.platform.Metrics;\n+\n+import java.nio.file.Path;\n+import java.nio.file.Files;\n+import java.util.ArrayList;\n+\n+import jdk.test.lib.Platform;\n+import jtreg.SkippedException;\n+\n+\/*\n+ * @test\n+ * @bug 8370966\n+ * @requires os.family == \"linux\"\n+ * @requires !vm.asan\n+ * @modules java.base\/jdk.internal.platform\n+ * @library \/test\/lib\n+ * @run main TestMemoryInvisibleParent\n+ *\/\n+public class TestMemoryInvisibleParent {\n+    private static final String UNLIMITED = \"-1\";\n+    private static final String imageName = Common.imageName(\"invisible-parent\");\n+\n+    public static void main(String[] args) throws Exception {\n+        Metrics metrics = Metrics.systemMetrics();\n+        if (metrics == null) {\n+            System.out.println(\"Cgroup not configured.\");\n+            return;\n+        }\n+        if (!DockerTestUtils.canTestDocker()) {\n+            System.out.println(\"Unable to run docker tests.\");\n+            return;\n+        }\n+\n+        ContainerRuntimeVersionTestUtils.checkContainerVersionSupported();\n+\n+        if (DockerTestUtils.isRootless()) {\n+            throw new SkippedException(\"Test skipped in rootless mode\");\n+        }\n+        if (!Platform.isRoot()) {\n+            throw new SkippedException(\"Test should be run as root\");\n+        }\n+        DockerTestUtils.buildJdkContainerImage(imageName);\n+\n+        if (\"cgroupv1\".equals(metrics.getProvider())) {\n+            try {\n+                testMemoryLimitHiddenParent(\"104857600\", \"104857600\");\n+                testMemoryLimitHiddenParent(\"209715200\", \"209715200\");\n+            } finally {\n+                DockerTestUtils.removeDockerImage(imageName);\n+            }\n+        } else {\n+            throw new SkippedException(\"cgroup v1 - only test! This is \" + metrics.getProvider());\n+        }\n+    }\n+\n+    private static void testMemoryLimitHiddenParent(String valueToSet, String expectedValue)\n+            throws Exception {\n+\n+        Common.logNewTestCase(\"Cgroup V1 hidden parent memory limit: \" + valueToSet);\n+\n+        try {\n+            String cgroupParent = setParentWithLimit(valueToSet);\n+            DockerRunOptions opts = new DockerRunOptions(imageName, \"\/jdk\/bin\/java\", \"-version\", \"-Xlog:os+container=trace\");\n+            opts.appendTestJavaOptions = false;\n+            if (DockerTestUtils.isPodman()) {\n+                \/\/ Podman needs to run this test with engine option --cgroup-manager=cgroupfs\n+                opts.addEngineOpts(\"--cgroup-manager\", \"cgroupfs\");\n+            }\n+            opts.addDockerOpts(\"--cgroup-parent=\/\" + cgroupParent);\n+            Common.run(opts)\n+                  .shouldContain(\"Hierarchical Memory Limit is: \" + expectedValue);\n+        } finally {\n+            \/\/ Reset the parent memory limit to unlimited (-1)\n+            setParentWithLimit(UNLIMITED);\n+        }\n+    }\n+\n+    private static String setParentWithLimit(String memLimit) throws Exception {\n+        String cgroupParent = \"hidden-parent-\" + TestMemoryInvisibleParent.class.getSimpleName() + Runtime.version().feature();\n+        Path sysFsMemory = Path.of(\"\/\", \"sys\", \"fs\", \"cgroup\", \"memory\");\n+        Path cgroupParentPath = sysFsMemory.resolve(cgroupParent);\n+        ProcessBuilder pb = new ProcessBuilder(\"mkdir\", \"-p\", cgroupParentPath.toString());\n+        OutputAnalyzer out = new OutputAnalyzer(pb.start())\n+            .shouldHaveExitValue(0);\n+        Path memoryLimitsFile = cgroupParentPath.resolve(\"memory.limit_in_bytes\");\n+        Files.writeString(memoryLimitsFile, memLimit);\n+        System.out.println(\"Cgroup parent is: \/\" + cgroupParentPath.getFileName() +\n+                           \" at \" + sysFsMemory.toString());\n+        return cgroupParent;\n+    }\n+\n+}\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestMemoryInvisibleParent.java","additions":121,"deletions":0,"binary":false,"changes":121,"status":"added"},{"patch":"@@ -49,13 +49,0 @@\n-    static String getEngineInfo(String format) throws Exception {\n-        return DockerTestUtils.execute(Container.ENGINE_COMMAND, \"info\", \"-f\", format)\n-            .getStdout();\n-    }\n-\n-    static boolean isRootless() throws Exception {\n-        \/\/ Docker and Podman have different INFO structures.\n-        \/\/ The node path for Podman is .Host.Security.Rootless, that also holds for\n-        \/\/ Podman emulating Docker CLI. The node path for Docker is .SecurityOptions.\n-        return (getEngineInfo(\"{{.Host.Security.Rootless}}\").contains(\"true\") ||\n-                getEngineInfo(\"{{.SecurityOptions}}\").contains(\"name=rootless\"));\n-    }\n-\n@@ -75,1 +62,1 @@\n-        if (isRootless()) {\n+        if (DockerTestUtils.isRootless()) {\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestMemoryWithSubgroups.java","additions":1,"deletions":14,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -50,1 +50,1 @@\n-    private static final boolean IS_PODMAN = Container.ENGINE_COMMAND.contains(\"podman\");\n+    private static final boolean IS_PODMAN = DockerTestUtils.isPodman();\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestPids.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -136,5 +136,1 @@\n-        long rss = WhiteBox.getWhiteBox().rss();\n-        System.out.println(\"RSS: \" + rss);\n-        long available = WhiteBox.getWhiteBox().hostAvailableMemory();\n-        System.out.println(\"Host available memory: \" + available);\n-\n+        int maxIter = 20;\n@@ -142,1 +138,0 @@\n-\n@@ -153,6 +148,22 @@\n-        if (rss == 0) {\n-            throw new SkippedException(\"cannot get RSS?\");\n-        }\n-        if (available > requiredAvailable) {\n-            Asserts.assertGreaterThan(rss, minRequiredRss, \"RSS of this process(\" + rss + \"b) should be bigger \" +\n-                                      \"than or equal to heap size(\" + heapSize + \"b) (available memory: \" + available + \"). On Linux Kernel < 4.14 RSS can be inaccurate\");\n+\n+        \/\/ RSS values we get are sometimes somewhat delayed or inaccurate\n+        for (int iter=0; iter < maxIter; iter++) {\n+            long rss = WhiteBox.getWhiteBox().rss();\n+            System.out.println(\"RSS: \" + rss);\n+            long available = WhiteBox.getWhiteBox().hostAvailableMemory();\n+            System.out.println(\"Host available memory: \" + available);\n+\n+            if (rss == 0) {\n+                throw new SkippedException(\"cannot get RSS?\");\n+            }\n+            if (available <= requiredAvailable) {\n+                throw new SkippedException(\"Available memory on host \" + available + \" is too small, not larger than required available memory \" + requiredAvailable);\n+            }\n+\n+            if ((rss < minRequiredRss) && iter < maxIter-1) {\n+                System.out.println(\"We got only an RSS value of \" + rss + \" but require \" + minRequiredRss + \", let's retry!\");\n+            } else {\n+                Asserts.assertGreaterThan(rss, minRequiredRss, \"RSS of this process(\" + rss + \"b) should be bigger \" +\n+                                          \"than or equal to heap size(\" + heapSize + \"b) (available memory: \" + available + \"). On Linux Kernel < 4.14 RSS can be inaccurate\");\n+                break;\n+            }\n","filename":"test\/hotspot\/jtreg\/gc\/TestAlwaysPreTouchBehavior.java","additions":23,"deletions":12,"binary":false,"changes":35,"status":"modified"},{"patch":"@@ -0,0 +1,98 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package gc;\n+\n+\/*\n+ * @test id=Parallel\n+ * @requires vm.gc.Parallel & false\n+ * @requires !vm.debug\n+ * @summary Verifies that the UseGCOverheadLimit functionality works in Parallel GC.\n+ * @library \/test\/lib\n+ * @run driver gc.TestUseGCOverheadLimit Parallel\n+ *\/\n+\n+\/*\n+ * @test id=G1\n+ * @requires vm.gc.G1\n+ * @requires !vm.debug\n+ * @summary Verifies that the UseGCOverheadLimit functionality works in G1 GC.\n+ * @library \/test\/lib\n+ * @run driver gc.TestUseGCOverheadLimit G1\n+ *\/\n+\n+import java.util.Arrays;\n+import java.util.stream.Stream;\n+\n+import jdk.test.lib.process.OutputAnalyzer;\n+import jdk.test.lib.process.ProcessTools;\n+\n+public class TestUseGCOverheadLimit {\n+  public static void main(String args[]) throws Exception {\n+    String[] parallelArgs = {\n+      \"-XX:+UseParallelGC\",\n+      \"-XX:NewSize=122m\",\n+      \"-XX:SurvivorRatio=99\",\n+      \"-XX:GCHeapFreeLimit=10\"\n+    };\n+    String[] g1Args = {\n+      \"-XX:+UseG1GC\",\n+      \"-XX:GCHeapFreeLimit=5\"\n+    };\n+\n+    String[] selectedArgs = args[0].equals(\"G1\") ? g1Args : parallelArgs;\n+\n+    final String[] commonArgs = {\n+      \"-XX:-UseCompactObjectHeaders\", \/\/ Object sizes are calculated such that the heap is tight.\n+      \"-XX:ParallelGCThreads=1\",      \/\/ Make GCs take longer.\n+      \"-XX:+UseGCOverheadLimit\",\n+      \"-Xlog:gc=debug\",\n+      \"-XX:GCTimeLimit=80\",           \/\/ Ease the CPU requirement.\n+      \"-Xmx128m\",\n+      Allocating.class.getName()\n+    };\n+\n+    String[] vmArgs = Stream.concat(Arrays.stream(selectedArgs), Arrays.stream(commonArgs)).toArray(String[]::new);\n+    OutputAnalyzer output = ProcessTools.executeLimitedTestJava(vmArgs);\n+    output.shouldNotHaveExitValue(0);\n+\n+    System.out.println(output.getStdout());\n+\n+    output.stdoutShouldContain(\"GC Overhead Limit exceeded too often (5).\");\n+  }\n+\n+  static class Allocating {\n+    public static void main(String[] args) {\n+      Object[] cache = new Object[1024 * 1024 * 2];\n+\n+      \/\/ Allocate random objects, keeping around data, causing garbage\n+      \/\/ collections.\n+      for (int i = 0; i < 1024* 1024 * 30; i++) {\n+        Object[] obj = new Object[10];\n+        cache[i % cache.length] = obj;\n+      }\n+\n+      System.out.println(cache);\n+    }\n+  }\n+}\n","filename":"test\/hotspot\/jtreg\/gc\/TestUseGCOverheadLimit.java","additions":98,"deletions":0,"binary":false,"changes":98,"status":"added"},{"patch":"@@ -30,1 +30,1 @@\n- * @requires vm.opt.UseLargePages == null | !vm.opt.UseLargePages\n+ * @requires !vm.opt.final.UseLargePages\n","filename":"test\/hotspot\/jtreg\/gc\/arguments\/TestParallelGCErgo.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -360,0 +360,1 @@\n+\n","filename":"test\/hotspot\/jtreg\/gc\/shenandoah\/compiler\/TestClone.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2023, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2023, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,0 +32,1 @@\n+ * @library \/test\/lib\n@@ -34,1 +35,3 @@\n- * @run main\/othervm -Xss384K -Xint TestStackOverflowDuringInit\n+ * @build jdk.test.whitebox.WhiteBox\n+ * @run driver jdk.test.lib.helpers.ClassFileInstaller jdk.test.whitebox.WhiteBox\n+ * @run main\/othervm -Xbootclasspath\/a:. -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI TestStackOverflowDuringInit\n@@ -39,0 +42,3 @@\n+import jdk.test.lib.process.OutputAnalyzer;\n+import jdk.test.lib.process.ProcessTools;\n+import jdk.test.whitebox.WhiteBox;\n@@ -42,0 +48,3 @@\n+    static String expected = \"java.lang.NoClassDefFoundError: Could not initialize class TestStackOverflowDuringInit$LongCache\";\n+    static String cause = \"Caused by: java.lang.StackOverflowError\";\n+\n@@ -91,3 +100,2 @@\n-    public static void main(String[] args) throws Exception {\n-        String expected = \"java.lang.NoClassDefFoundError: Could not initialize class TestStackOverflowDuringInit$LongCache\";\n-        String cause = \"Caused by: java.lang.StackOverflowError\";\n+    static class Launcher {\n+        public static void main(String[] args) throws Exception {\n@@ -95,11 +103,12 @@\n-        \/\/ Pre-load, but not initialize, LongCache, else we will\n-        \/\/ hit SOE during class loading.\n-        System.out.println(\"Pre-loading ...\");\n-        Class<?> c = Class.forName(\"TestStackOverflowDuringInit$LongCache\",\n-                                   false,\n-                                   TestStackOverflowDuringInit.class.getClassLoader());\n-        try {\n-            recurse();\n-        } catch (Throwable ex) {\n-            \/\/            ex.printStackTrace();\n-            verify_stack(ex, expected, cause);\n+            \/\/ Pre-load, but not initialize, LongCache, else we will\n+            \/\/ hit SOE during class loading.\n+            System.out.println(\"Pre-loading ...\");\n+            Class<?> c = Class.forName(\"TestStackOverflowDuringInit$LongCache\",\n+                                       false,\n+                                       TestStackOverflowDuringInit.class.getClassLoader());\n+            try {\n+                recurse();\n+            } catch (Throwable ex) {\n+                \/\/            ex.printStackTrace();\n+                verify_stack(ex, expected, cause);\n+            }\n@@ -107,1 +116,0 @@\n-    }\n@@ -109,10 +117,11 @@\n-    private static void verify_stack(Throwable e, String expected, String cause) throws Exception {\n-        ByteArrayOutputStream byteOS = new ByteArrayOutputStream();\n-        try (PrintStream printStream = new PrintStream(byteOS)) {\n-            e.printStackTrace(printStream);\n-        }\n-        String stackTrace = byteOS.toString(\"ASCII\");\n-        System.out.println(stackTrace);\n-        if (!stackTrace.contains(expected) ||\n-            (cause != null && !stackTrace.contains(cause))) {\n-            throw new RuntimeException(expected + \" and\/or \" + cause + \" missing from stacktrace\");\n+        private static void verify_stack(Throwable e, String expected, String cause) throws Exception {\n+            ByteArrayOutputStream byteOS = new ByteArrayOutputStream();\n+            try (PrintStream printStream = new PrintStream(byteOS)) {\n+                e.printStackTrace(printStream);\n+            }\n+            String stackTrace = byteOS.toString(\"ASCII\");\n+            System.out.println(stackTrace);\n+            if (!stackTrace.contains(expected) ||\n+                (cause != null && !stackTrace.contains(cause))) {\n+                throw new RuntimeException(expected + \" and\/or \" + cause + \" missing from stacktrace\");\n+            }\n@@ -121,0 +130,13 @@\n+\n+    public static void main(String[] args) throws Exception {\n+        WhiteBox wb = WhiteBox.getWhiteBox();\n+        long minimumJavaStackSize = wb.getMinimumJavaStackSize();\n+        ProcessBuilder pb = ProcessTools.createLimitedTestJavaProcessBuilder(\n+                \"-Xss\" + Long.toString(minimumJavaStackSize), \"-Xint\",\n+                Launcher.class.getName());\n+\n+        OutputAnalyzer analyzer = new OutputAnalyzer(pb.start());\n+        analyzer.shouldHaveExitValue(0);\n+        analyzer.shouldContain(expected);\n+        analyzer.shouldContain(cause);\n+    }\n","filename":"test\/hotspot\/jtreg\/runtime\/ClassInitErrors\/TestStackOverflowDuringInit.java","additions":49,"deletions":27,"binary":false,"changes":76,"status":"modified"},{"patch":"@@ -30,0 +30,2 @@\n+ * @build jdk.test.whitebox.WhiteBox\n+ * @run driver jdk.test.lib.helpers.ClassFileInstaller jdk.test.whitebox.WhiteBox\n@@ -33,1 +35,1 @@\n- * @run driver PrintVMInfoAtExitTest\n+ * @run main\/othervm -Xbootclasspath\/a:. -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI PrintVMInfoAtExitTest\n@@ -38,0 +40,2 @@\n+import jdk.test.whitebox.WhiteBox;\n+\n@@ -56,1 +60,8 @@\n-    output_detail.shouldContain(\"Java Heap (reserved=65536KB, committed=65536KB)\");\n+    WhiteBox wb = WhiteBox.getWhiteBox();\n+    if (wb.isAsanEnabled()) {\n+        \/\/ the reserved value can be influenced by asan\n+        output_detail.shouldContain(\"Java Heap (reserved=\");\n+        output_detail.shouldContain(\", committed=65536KB)\");\n+    } else {\n+        output_detail.shouldContain(\"Java Heap (reserved=65536KB, committed=65536KB)\");\n+    }\n","filename":"test\/hotspot\/jtreg\/runtime\/ErrorHandling\/PrintVMInfoAtExitTest.java","additions":13,"deletions":2,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -75,2 +75,2 @@\n-           # Core dump will be written. Default location: Core dumps may be processed with \"\/usr\/share\/apport\/apport %p %s %c %P\" (or dumping to\n-             \/home\/cheleswer\/Desktop\/core.6212)\n+           # Core dump will be written. Default location: Determined by the following:\n+           \"\/usr\/share\/apport\/apport %p %s %c %P\" (alternatively, falling back to \/home\/cheleswer\/Desktop\/core.6212)\n","filename":"test\/hotspot\/jtreg\/runtime\/ErrorHandling\/TestCrashOnOutOfMemoryError.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,0 +29,1 @@\n+ * @library \/\n@@ -32,0 +33,1 @@\n+ * @build jdk.test.whitebox.WhiteBox\n@@ -33,1 +35,2 @@\n- * @run driver CheckForProperDetailStackTrace\n+ * @run driver jdk.test.lib.helpers.ClassFileInstaller jdk.test.whitebox.WhiteBox\n+ * @run main\/othervm -Xbootclasspath\/a:. -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI CheckForProperDetailStackTrace\n@@ -43,0 +46,1 @@\n+import jdk.test.whitebox.WhiteBox;\n@@ -62,1 +66,4 @@\n-    private static final boolean expectSourceInformation = Platform.isLinux() || Platform.isWindows();\n+    \/\/ Windows has source information only in full pdbs, not in stripped pdbs\n+    private static boolean expectSourceInformation = Platform.isLinux() || Platform.isWindows();\n+\n+    static WhiteBox wb = WhiteBox.getWhiteBox();\n@@ -141,0 +148,4 @@\n+        if (wb.hasExternalSymbolsStripped()) {\n+            expectSourceInformation = false;\n+        }\n+\n","filename":"test\/hotspot\/jtreg\/runtime\/NMT\/CheckForProperDetailStackTrace.java","additions":14,"deletions":3,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -31,2 +31,0 @@\n- * @comment work around JDK-8345635\n- * @requires !vm.jvmci.enabled\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/LambdaWithUseImplMethodHandle.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -53,2 +53,2 @@\n-        String loadFromJar = \".class,load. Hello source: file:.*signed_hello.jar\";\n-        String lambdaLoadFromHello = \".class.load. Hello[$][$]Lambda.*\/0x.*source.*Hello\";\n+        String loadFromJar = \".class,load\\s*. Hello source: file:.*signed_hello.jar\";\n+        String lambdaLoadFromHello = \".class.load\\s*. Hello[$][$]Lambda.*\/0x.*source.*Hello\";\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/SignedJar.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -30,2 +30,0 @@\n- * @comment work around JDK-8345635\n- * @requires !vm.jvmci.enabled\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/aotCache\/AOTCacheSupportForCustomLoaders.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -0,0 +1,82 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\n+ *\/\n+\n+\/*\n+ * @test\n+ * @summary AOT configuration should not be corrupted even if the app closes System.out in the training run\n+ * @bug 8371944\n+ * @library \/test\/jdk\/lib\/testlibrary \/test\/lib\n+ * @build CloseSystemOut\n+ * @run driver jdk.test.lib.helpers.ClassFileInstaller -jar app.jar CloseSystemOutApp\n+ * @run driver CloseSystemOut\n+ *\/\n+\n+import java.io.PrintWriter;\n+import jdk.test.lib.cds.CDSAppTester;\n+import jdk.test.lib.helpers.ClassFileInstaller;\n+import jdk.test.lib.process.OutputAnalyzer;\n+\n+public class CloseSystemOut {\n+    static final String appJar = ClassFileInstaller.getJarPath(\"app.jar\");\n+    static final String mainClass = \"CloseSystemOutApp\";\n+\n+    public static void main(String[] args) throws Exception {\n+        Tester tester = new Tester();\n+        tester.run(new String[] {\"AOT\", \"--two-step-training\"} );\n+    }\n+\n+    static class Tester extends CDSAppTester {\n+        public Tester() {\n+            super(mainClass);\n+        }\n+\n+        @Override\n+        public String classpath(RunMode runMode) {\n+            return appJar;\n+        }\n+\n+        @Override\n+        public String[] appCommandLine(RunMode runMode) {\n+            return new String[] {mainClass};\n+        }\n+\n+        @Override\n+        public void checkExecution(OutputAnalyzer out, RunMode runMode) {\n+            if (runMode != RunMode.ASSEMBLY) {\n+                out.shouldContain(\"Hello Confused World\");\n+            }\n+        }\n+    }\n+}\n+\n+class CloseSystemOutApp {\n+    public static void main(String args[]) {\n+        \/\/ Naive code that ends up closing System.out\/err when we\n+        \/\/ leave the \"try\" block\n+        try (var err = new PrintWriter(System.err);\n+             var out = new PrintWriter(System.out)) {\n+            out.println(\"Hello Confused World\");\n+        }\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/aotCache\/CloseSystemOut.java","additions":82,"deletions":0,"binary":false,"changes":82,"status":"added"},{"patch":"@@ -29,2 +29,0 @@\n- * @comment work around JDK-8345635\n- * @requires !vm.jvmci.enabled\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/aotCache\/ExcludedClasses.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -30,2 +30,0 @@\n- * @comment work around JDK-8345635\n- * @requires !vm.jvmci.enabled\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/aotCache\/HelloAOTCache.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -0,0 +1,138 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @summary classes defined with JNI DefineClass should be excluded from the AOT config file and AOT cache.\n+ * @bug 8368182\n+ * @requires vm.cds\n+ * @requires vm.cds.supports.aot.class.linking\n+ * @library \/test\/lib\n+ * @build JNIDefineClass\n+ * @run driver jdk.test.lib.helpers.ClassFileInstaller -jar app.jar\n+ *                 JNIDefineClassApp ExcludedDummy ExcludedDummy2\n+ * @run main\/native JNIDefineClass\n+ *\/\n+\n+import java.io.InputStream;\n+import jdk.test.lib.cds.CDSAppTester;\n+import jdk.test.lib.helpers.ClassFileInstaller;\n+import jdk.test.lib.process.OutputAnalyzer;\n+\n+public class JNIDefineClass {\n+    static final String appJar = ClassFileInstaller.getJarPath(\"app.jar\");\n+    static final String mainClass = \"JNIDefineClassApp\";\n+\n+    public static void main(String[] args) throws Exception {\n+        Tester tester = new Tester();\n+        tester.run(new String[] {\"AOT\", \"--two-step-training\"} );\n+    }\n+\n+    static class Tester extends CDSAppTester {\n+        public Tester() {\n+            super(mainClass);\n+        }\n+\n+        @Override\n+        public String classpath(RunMode runMode) {\n+            return appJar;\n+        }\n+\n+        @Override\n+        public String[] vmArgs(RunMode runMode) {\n+            return new String[] {\n+                \"--enable-native-access=ALL-UNNAMED\",\n+                \"-Xlog:aot,aot+class=debug\",\n+                \"-Djava.library.path=\" + System.getProperty(\"java.library.path\"),\n+            };\n+        }\n+\n+        @Override\n+        public String[] appCommandLine(RunMode runMode) {\n+            return new String[] {mainClass};\n+        }\n+\n+        @Override\n+        public void checkExecution(OutputAnalyzer out, RunMode runMode) {\n+            if (runMode.isApplicationExecuted()) {\n+                out.shouldContain(\"@@loader = null\");\n+                out.shouldContain(\"@@name = ExcludedDummy\");\n+\n+                out.shouldMatch(\"@@loader2 = .*AppClassLoader\");\n+                out.shouldContain(\"@@name2 = ExcludedDummy2\");\n+            }\n+            if (runMode == RunMode.TRAINING) {\n+                out.shouldContain(\"Skipping ExcludedDummy: Unsupported location\");\n+            }\n+\n+            \/\/ Must not have a log like this\n+            \/\/\/ [0.378s][debug  ][aot,class] klasses[   65] = 0x0000000800160490 boot  ExcludedDummy\n+            \/\/\/ [0.378s][debug  ][aot,class] klasses[   66] = 0x0000000800160490 app   ExcludedDummy2\n+            out.shouldNotContain(\"aot,class.* klasses.*ExcludedDummy\");\n+            out.shouldNotContain(\"aot,class.* klasses.*ExcludedDummy2\");\n+        }\n+    }\n+}\n+\n+class JNIDefineClassApp {\n+\n+    static native Class<?> nativeDefineClass(String name, ClassLoader ldr, byte[] class_bytes);\n+\n+    static {\n+        System.loadLibrary(\"JNIDefineClassApp\");\n+    }\n+\n+    public static void main(java.lang.String[] unused) throws Exception {\n+        ClassLoader appLoader = JNIDefineClassApp.class.getClassLoader();\n+\n+        try (InputStream in = appLoader.getResourceAsStream(\"ExcludedDummy.class\")) {\n+            byte[] b = in.readAllBytes();\n+            System.out.println(b.length);\n+            Class<?> c = nativeDefineClass(\"ExcludedDummy\", null, b);\n+            System.out.println(\"@@loader = \" + c.getClassLoader());\n+            System.out.println(\"@@name = \" + c.getName());\n+        }\n+\n+        try (InputStream in = appLoader.getResourceAsStream(\"ExcludedDummy2.class\")) {\n+            byte[] b = in.readAllBytes();\n+            System.out.println(b.length);\n+            Class<?> c = nativeDefineClass(\"ExcludedDummy2\", appLoader, b);\n+            System.out.println(\"@@loader2 = \" + c.getClassLoader());\n+            System.out.println(\"@@name2 = \" + c.getName());\n+        }\n+\n+        System.out.println(\"TEST PASSED\");\n+    }\n+}\n+\n+\/\/ This class is loaded into the bootstrap loader using JNI DefineClass() with a null code source,\n+\/\/ so it should be excluded from the AOT configuration (and hence excluded from AOT cache)\n+class ExcludedDummy {\n+\n+}\n+\n+\/\/ This class is loaded into the app loader using JNI DefineClass() with a null code source,\n+\/\/ so it should be excluded from the AOT configuration (and hence excluded from AOT cache)\n+class ExcludedDummy2 {\n+\n+}\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/aotCache\/JNIDefineClass.java","additions":138,"deletions":0,"binary":false,"changes":138,"status":"added"},{"patch":"@@ -31,2 +31,0 @@\n- * @comment work around JDK-8345635\n- * @requires !vm.jvmci.enabled\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/aotCache\/JavaAgent.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -31,2 +31,0 @@\n- * @comment work around JDK-8345635\n- * @requires !vm.jvmci.enabled\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/aotCache\/ManagementAgent.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -30,2 +30,0 @@\n- * @comment work around JDK-8345635\n- * @requires !vm.jvmci.enabled\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/aotCache\/PackageInfoClass.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -30,2 +30,0 @@\n- * @comment work around JDK-8345635\n- * @requires !vm.jvmci.enabled\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/aotCache\/SpecialCacheNames.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -29,2 +29,0 @@\n- * @comment work around JDK-8345635\n- * @requires !vm.jvmci.enabled\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/aotCache\/VerifierFailOver.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -0,0 +1,36 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+#include <jni.h>\n+\n+JNIEXPORT jclass JNICALL\n+Java_JNIDefineClassApp_nativeDefineClass(JNIEnv* env, jclass clazz \/*unused*\/,\n+                                         jstring className, jobject classLoader, jbyteArray bytecode) {\n+    const char* classNameChar = (*env)->GetStringUTFChars(env, className, NULL);\n+    jbyte* arrayContent = (*env)->GetByteArrayElements(env, bytecode, NULL);\n+    jsize bytecodeLength = (*env)->GetArrayLength(env, bytecode);\n+    jclass returnValue = (*env)->DefineClass(env, classNameChar, classLoader, arrayContent, bytecodeLength);\n+    (*env)->ReleaseByteArrayElements(env, bytecode, arrayContent, JNI_ABORT);\n+    (*env)->ReleaseStringUTFChars(env, className, classNameChar);\n+    return returnValue;\n+}\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/aotCache\/libJNIDefineClassApp.c","additions":36,"deletions":0,"binary":false,"changes":36,"status":"added"},{"patch":"@@ -31,2 +31,0 @@\n- * @comment work around JDK-8345635\n- * @requires !vm.jvmci.enabled\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/aotClassLinking\/AOTCacheWithZGC.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -29,2 +29,0 @@\n- * @comment work around JDK-8345635\n- * @requires !vm.jvmci.enabled\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/aotClassLinking\/AOTLoaderConstraintsTest.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -31,2 +31,0 @@\n- * @comment work around JDK-8345635\n- * @requires !vm.jvmci.enabled\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/aotClassLinking\/AddExports.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -29,2 +29,0 @@\n- * @comment work around JDK-8345635\n- * @requires !vm.jvmci.enabled\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/aotClassLinking\/AddOpens.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -30,2 +30,0 @@\n- * @comment work around JDK-8345635\n- * @requires !vm.jvmci.enabled\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/aotClassLinking\/AddReads.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -32,2 +32,0 @@\n- * @comment work around JDK-8345635\n- * @requires !vm.jvmci.enabled\n@@ -48,2 +46,0 @@\n- * @comment work around JDK-8345635\n- * @requires !vm.jvmci.enabled\n@@ -64,2 +60,0 @@\n- * @comment work around JDK-8345635\n- * @requires !vm.jvmci.enabled\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/aotClassLinking\/BulkLoaderTest.java","additions":0,"deletions":6,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -29,2 +29,0 @@\n- * @comment work around JDK-8345635\n- * @requires !vm.jvmci.enabled\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/aotClassLinking\/FakeCodeLocation.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -31,2 +31,0 @@\n- * @comment work around JDK-8345635\n- * @requires !vm.jvmci.enabled\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/aotClassLinking\/GeneratedInternedString.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -30,2 +30,0 @@\n- * @comment work around JDK-8345635\n- * @requires !vm.jvmci.enabled\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/aotClassLinking\/LambdaInExcludedClass.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -30,2 +30,0 @@\n- * @comment work around JDK-8345635\n- * @requires !vm.jvmci.enabled\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/aotClassLinking\/MethodHandleTest.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -30,2 +30,0 @@\n- * @comment work around JDK-8345635\n- * @requires !vm.jvmci.enabled\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/aotClassLinking\/NonFinalStaticWithInitVal.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -37,2 +37,0 @@\n- * @comment work around JDK-8345635\n- * @requires !vm.jvmci.enabled\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/aotClassLinking\/StringConcatStress.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -31,2 +31,0 @@\n- * @comment work around JDK-8345635\n- * @requires !vm.jvmci.enabled\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/aotClassLinking\/TestSetupAOTTest.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -30,2 +30,0 @@\n- * @comment work around JDK-8345635\n- * @requires !vm.jvmci.enabled\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/aotClassLinking\/TrainingRun.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -30,2 +30,0 @@\n- * @comment work around JDK-8345635\n- * @requires !vm.jvmci.enabled\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/aotClassLinking\/WeakReferenceTest.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -29,2 +29,0 @@\n- * @comment work around JDK-8345635\n- * @requires !vm.jvmci.enabled\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/aotProfile\/AOTProfileFlags.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -31,2 +31,0 @@\n- * @comment work around JDK-8345635\n- * @requires !vm.jvmci.enabled\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/cacheObject\/ArchiveHeapTestClass.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -31,2 +31,0 @@\n- * @comment work around JDK-8345635\n- * @requires !vm.jvmci.enabled\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/methodHandles\/MethodHandlesAsCollectorTest.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -31,2 +31,0 @@\n- * @comment work around JDK-8345635\n- * @requires !vm.jvmci.enabled\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/methodHandles\/MethodHandlesCastFailureTest.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -31,2 +31,0 @@\n- * @comment work around JDK-8345635\n- * @requires !vm.jvmci.enabled\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/methodHandles\/MethodHandlesGeneralTest.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -31,2 +31,0 @@\n- * @comment work around JDK-8345635\n- * @requires !vm.jvmci.enabled\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/methodHandles\/MethodHandlesInvokersTest.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -31,2 +31,0 @@\n- * @comment work around JDK-8345635\n- * @requires !vm.jvmci.enabled\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/methodHandles\/MethodHandlesPermuteArgumentsTest.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -31,2 +31,0 @@\n- * @comment work around JDK-8345635\n- * @requires !vm.jvmci.enabled\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/methodHandles\/MethodHandlesSpreadArgumentsTest.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -31,2 +31,0 @@\n- * @comment work around JDK-8345635\n- * @requires !vm.jvmci.enabled\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/resolvedConstants\/AOTLinkedLambdas.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -31,2 +31,0 @@\n- * @comment work around JDK-8345635\n- * @requires !vm.jvmci.enabled\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/resolvedConstants\/AOTLinkedVarHandles.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2021, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2021, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -39,1 +39,1 @@\n- * @run driver HandshakeTimeoutTest\n+ * @run driver\/timeout=480 HandshakeTimeoutTest\n","filename":"test\/hotspot\/jtreg\/runtime\/handshake\/HandshakeTimeoutTest.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -28,0 +28,1 @@\n+ * @requires os.maxMemory > 15g\n","filename":"test\/hotspot\/jtreg\/runtime\/jni\/checked\/TestLargeUTF8Length.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -70,1 +70,1 @@\n-        out.stderrShouldBeEmptyIgnoreDeprecatedWarnings();\n+        out.stderrShouldBeEmptyIgnoreVMWarnings();\n","filename":"test\/hotspot\/jtreg\/serviceability\/attach\/RemovingUnixDomainSocketTest.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -35,1 +35,0 @@\n-import java.io.InputStream;\n@@ -42,38 +41,0 @@\n-    private static String myName = ClassVersionAfterRedefine.class.getName();\n-\n-    private static byte[] getBytecodes(String name) throws Exception {\n-        InputStream is = ClassVersionAfterRedefine.class.getResourceAsStream(name + \".class\");\n-        byte[] buf = is.readAllBytes();\n-        System.out.println(\"sizeof(\" + name + \".class) == \" + buf.length);\n-        return buf;\n-    }\n-\n-    private static int getStringIndex(String needle, byte[] buf) {\n-        return getStringIndex(needle, buf, 0);\n-    }\n-\n-    private static int getStringIndex(String needle, byte[] buf, int offset) {\n-        outer:\n-        for (int i = offset; i < buf.length - offset - needle.length(); i++) {\n-            for (int j = 0; j < needle.length(); j++) {\n-                if (buf[i + j] != (byte)needle.charAt(j)) continue outer;\n-            }\n-            return i;\n-        }\n-        return 0;\n-    }\n-\n-    private static void replaceString(byte[] buf, String name, int index) {\n-        for (int i = index; i < index + name.length(); i++) {\n-            buf[i] = (byte)name.charAt(i - index);\n-        }\n-    }\n-\n-    private static void replaceAllStrings(byte[] buf, String oldString, String newString) throws Exception {\n-        assertTrue(oldString.length() == newString.length(), \"must have same length\");\n-        int index = -1;\n-        while ((index = getStringIndex(oldString, buf, index + 1)) != 0) {\n-            replaceString(buf, newString, index);\n-        }\n-    }\n-\n@@ -82,3 +43,0 @@\n-        byte[] buf = getBytecodes(\"TestClassOld\");\n-        \/\/ Poor man's renaming of class \"TestClassOld\" to \"TestClassXXX\"\n-        replaceAllStrings(buf, \"TestClassOld\", \"TestClassXXX\");\n@@ -86,0 +44,2 @@\n+\n+        byte[] buf = RedefineClassHelper.replaceClassName(cvar, \"TestClassOld\", \"TestClassXXX\");\n@@ -92,1 +52,0 @@\n-        buf = getBytecodes(\"TestClassNew\");\n@@ -95,2 +54,2 @@\n-        replaceAllStrings(buf, \"TestClassNew\", \"TestClassXXX\");\n-        \/\/ Now redine the original version of \"TestClassXXX\" (i.e. \"TestClassOld\").\n+        buf = RedefineClassHelper.replaceClassName(cvar, \"TestClassNew\", \"TestClassXXX\");\n+        \/\/ Now redefine the original version of \"TestClassXXX\" (i.e. \"TestClassOld\").\n","filename":"test\/hotspot\/jtreg\/serviceability\/jvmti\/RedefineClasses\/ClassVersionAfterRedefine.java","additions":4,"deletions":45,"binary":false,"changes":49,"status":"modified"},{"patch":"@@ -78,1 +78,1 @@\n-            out.stderrShouldBeEmptyIgnoreDeprecatedWarnings();\n+            out.stderrShouldBeEmptyIgnoreVMWarnings();\n","filename":"test\/hotspot\/jtreg\/serviceability\/sa\/ClhsdbJstackXcompStress.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -73,1 +73,1 @@\n-            out.stderrShouldBeEmptyIgnoreDeprecatedWarnings();\n+            out.stderrShouldBeEmptyIgnoreVMWarnings();\n","filename":"test\/hotspot\/jtreg\/serviceability\/sa\/JhsdbThreadInfoTest.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -0,0 +1,87 @@\n+\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2025, NTT DATA\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.lang.invoke.MethodHandle;\n+import java.lang.foreign.Arena;\n+import java.lang.foreign.FunctionDescriptor;\n+import java.lang.foreign.Linker;\n+import java.lang.foreign.MemorySegment;\n+import java.lang.foreign.SymbolLookup;\n+import java.lang.foreign.ValueLayout;\n+import java.util.concurrent.CountDownLatch;\n+\n+import jdk.test.lib.apps.LingeredApp;\n+\n+public class LingeredAppWithVirtualThread extends LingeredApp implements Runnable {\n+\n+    private static final String THREAD_NAME = \"target thread\";\n+\n+    private static final MethodHandle hndSleep;\n+\n+    private static final int sleepArg;\n+\n+    private static final CountDownLatch signal = new CountDownLatch(1);\n+\n+    static {\n+        MemorySegment func;\n+        if (System.getProperty(\"os.name\").startsWith(\"Windows\")) {\n+            func = SymbolLookup.libraryLookup(\"Kernel32\", Arena.global())\n+                               .findOrThrow(\"Sleep\");\n+            sleepArg = 3600_000; \/\/ 1h in milliseconds\n+        } else {\n+            func = Linker.nativeLinker()\n+                         .defaultLookup()\n+                         .findOrThrow(\"sleep\");\n+            sleepArg = 3600; \/\/ 1h in seconds\n+        }\n+\n+        var desc = FunctionDescriptor.of(ValueLayout.JAVA_INT, ValueLayout.JAVA_INT);\n+        hndSleep = Linker.nativeLinker().downcallHandle(func, desc);\n+    }\n+\n+    @Override\n+    public void run() {\n+        Thread.yield();\n+        signal.countDown();\n+        try {\n+            hndSleep.invoke(sleepArg);\n+        } catch (Throwable t) {\n+            throw new RuntimeException(t);\n+        }\n+    }\n+\n+    public static void main(String[] args) {\n+        try {\n+            Thread.ofVirtual()\n+                  .name(THREAD_NAME)\n+                  .start(new LingeredAppWithVirtualThread());\n+\n+            signal.await();\n+            LingeredApp.main(args);\n+        } catch (Exception e) {\n+            throw new RuntimeException(e);\n+        }\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/serviceability\/sa\/LingeredAppWithVirtualThread.java","additions":87,"deletions":0,"binary":false,"changes":87,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -71,1 +71,1 @@\n-            out.stderrShouldBeEmptyIgnoreDeprecatedWarnings();\n+            out.stderrShouldBeEmptyIgnoreVMWarnings();\n","filename":"test\/hotspot\/jtreg\/serviceability\/sa\/TestJhsdbJstackLock.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -0,0 +1,82 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2025, NTT DATA\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.regex.Matcher;\n+import java.util.regex.Pattern;\n+\n+import jdk.test.lib.JDKToolLauncher;\n+import jdk.test.lib.SA.SATestUtils;\n+import jdk.test.lib.Utils;\n+import jdk.test.lib.apps.LingeredApp;\n+import jdk.test.lib.process.OutputAnalyzer;\n+\n+\/**\n+ * @test\n+ * @bug 8369505\n+ * @requires vm.hasSA\n+ * @library \/test\/lib\n+ * @run driver TestJhsdbJstackWithVirtualThread\n+ *\/\n+public class TestJhsdbJstackWithVirtualThread {\n+\n+    private static void runJstack(LingeredApp app) throws Exception {\n+        JDKToolLauncher launcher = JDKToolLauncher.createUsingTestJDK(\"jhsdb\");\n+        launcher.addVMArgs(Utils.getFilteredTestJavaOpts(\"-showversion\"));\n+        launcher.addToolArg(\"jstack\");\n+        launcher.addToolArg(\"--pid\");\n+        launcher.addToolArg(Long.toString(app.getPid()));\n+\n+        ProcessBuilder pb = SATestUtils.createProcessBuilder(launcher);\n+        Process jhsdb = pb.start();\n+        OutputAnalyzer out = new OutputAnalyzer(jhsdb);\n+\n+        jhsdb.waitFor();\n+\n+        System.out.println(out.getStdout());\n+        System.err.println(out.getStderr());\n+\n+        out.stderrShouldBeEmptyIgnoreVMWarnings();\n+        out.shouldNotContain(\"must have non-zero frame size\");\n+    }\n+\n+    public static void main(String... args) throws Exception {\n+        SATestUtils.skipIfCannotAttach(); \/\/ throws SkippedException if attach not expected to work.\n+        LingeredApp app = null;\n+\n+        try {\n+            app = new LingeredAppWithVirtualThread();\n+            LingeredApp.startApp(app);\n+            System.out.println(\"Started LingeredApp with pid \" + app.getPid());\n+            runJstack(app);\n+            System.out.println(\"Test Completed\");\n+        } catch (Throwable e) {\n+            e.printStackTrace();\n+            throw e;\n+        } finally {\n+            LingeredApp.stopApp(app);\n+        }\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/serviceability\/sa\/TestJhsdbJstackWithVirtualThread.java","additions":82,"deletions":0,"binary":false,"changes":82,"status":"added"},{"patch":"@@ -394,1 +394,1 @@\n-        Asserts.assertNotNull(G.uniformDoubles(0, 0));\n+        Asserts.assertThrows(EmptyGeneratorException.class, () -> G.uniformDoubles(0, 0));\n@@ -400,1 +400,1 @@\n-        Asserts.assertNotNull(G.uniformFloats(0, 0));\n+        Asserts.assertThrows(EmptyGeneratorException.class, () -> G.uniformFloats(0, 0));\n@@ -595,2 +595,7 @@\n-            float a = floatBoundGen.next(), b = floatBoundGen.next();\n-            float lo = Math.min(a, b), hi = Math.max(a, b);\n+            float lo = 1, hi = 0;\n+            \/\/ Failure of a single round is very rare, repeated failure even rarer.\n+            while (lo >= hi) {\n+                float a = floatBoundGen.next(), b = floatBoundGen.next();\n+                lo = Math.min(a, b);\n+                hi = Math.max(a, b);\n+            }\n@@ -607,2 +612,7 @@\n-            double a = doubleBoundGen.next(), b = doubleBoundGen.next();\n-            double lo = Math.min(a, b), hi = Math.max(a, b);\n+            double lo = 1, hi = 0;\n+            \/\/ Failure of a single round is very rare, repeated failure even rarer.\n+            while (lo >= hi) {\n+                double a = doubleBoundGen.next(), b = doubleBoundGen.next();\n+                lo = Math.min(a, b);\n+                hi = Math.max(a, b);\n+            }\n","filename":"test\/hotspot\/jtreg\/testlibrary_tests\/generators\/tests\/TestGenerators.java","additions":16,"deletions":6,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -63,0 +63,1 @@\n+        run(LoadStore.class);\n@@ -552,0 +553,236 @@\n+\n+\/\/ Test load and store regexes\n+class LoadStore {\n+    int i;\n+    float f;\n+    interface I1 {}\n+    static class Base implements I1 {\n+        int i;\n+    }\n+    interface I2 {}\n+    static class Derived extends Base implements I2 {\n+        long l;\n+    }\n+    Base base = new Base();\n+    Derived derived = new Derived();\n+\n+    static class SingleNest {\n+        static class DoubleNest {\n+            int i;\n+        }\n+    }\n+\n+    SingleNest.DoubleNest doubleNest = new SingleNest.DoubleNest();\n+\n+\n+    @Test\n+    @IR(failOn = {IRNode.LOAD_OF_CLASS, \".*\", IRNode.STORE_OF_CLASS, \".*\"})\n+    public void triviallyFailBoth() {\n+    }\n+\n+    @Test\n+    @IR(counts = {\n+            IRNode.LOAD_OF_CLASS, \"LoadS[a-z]+\", \"1\",\n+            IRNode.LOAD_OF_CLASS, \"Load.tore\", \"1\",\n+            IRNode.LOAD_OF_CLASS, \"LoadStore\", \"1\",\n+            IRNode.LOAD_OF_CLASS, \"\/LoadStore\", \"1\",\n+            IRNode.LOAD_OF_CLASS, \"tests\/LoadStore\", \"1\",\n+            IRNode.LOAD_OF_CLASS, \"\/tests\/LoadStore\", \"1\",\n+            IRNode.LOAD_OF_CLASS, \"ir_framework\/tests\/LoadStore\", \"1\",\n+            IRNode.LOAD_OF_CLASS, \"(?<=[@: ])ir_framework\/tests\/LoadStore\", \"1\",  \/\/ To assert it's the whole qualification\n+            IRNode.LOAD_OF_CLASS, \"(?<=[@: ])[\\\\w\\\\$\/]*tests[\\\\w\\\\$\/]*\", \"1\",\n+        },\n+        failOn = {\n+            IRNode.LOAD_OF_CLASS, \"oadStore\",\n+            IRNode.LOAD_OF_CLASS, \"LoadStor\",\n+            IRNode.LOAD_OF_CLASS, \"\/ir_framework\/tests\/LoadStore\",\n+            IRNode.LOAD_OF_CLASS, \"(?<=[@: ])[\\\\w\\\\$]*tests[\\\\w\\\\$]*\",\n+        }\n+    )\n+    \/\/ @ir_framework\/tests\/LoadStore+12 *\n+    public float simpleLoad() {\n+        return f;\n+    }\n+\n+    @Test\n+    @IR(counts = {\n+            IRNode.STORE_OF_CLASS, \"LoadS[a-z]+\", \"1\",\n+            IRNode.STORE_OF_CLASS, \"Load.tore\", \"1\",\n+            IRNode.STORE_OF_CLASS, \"LoadStore\", \"1\",\n+            IRNode.STORE_OF_CLASS, \"\/LoadStore\", \"1\",\n+            IRNode.STORE_OF_CLASS, \"tests\/LoadStore\", \"1\",\n+            IRNode.STORE_OF_CLASS, \"\/tests\/LoadStore\", \"1\",\n+            IRNode.STORE_OF_CLASS, \"ir_framework\/tests\/LoadStore\", \"1\",\n+            IRNode.STORE_OF_CLASS, \"(?<=[@: ])ir_framework\/tests\/LoadStore\", \"1\",\n+            IRNode.STORE_OF_CLASS, \"(?<=[@: ])[\\\\w\\\\$\/]*tests[\\\\w\\\\$\/]*\", \"1\",\n+        },\n+        failOn = {\n+            IRNode.STORE_OF_CLASS, \"oadStore\",\n+            IRNode.STORE_OF_CLASS, \"LoadStor\",\n+            IRNode.STORE_OF_CLASS, \"\/ir_framework\/tests\/LoadStore\",\n+            IRNode.STORE_OF_CLASS, \"(?<=[@: ])[\\\\w\\\\$]*tests[\\\\w\\\\$]*\",\n+        }\n+    )\n+    \/\/ @ir_framework\/tests\/LoadStore+12 *\n+    public void simpleStore() {\n+        i = 1;\n+    }\n+\n+    @Test\n+    @IR(counts = {\n+            IRNode.LOAD_I_OF_CLASS, \"Base\", \"1\",\n+            IRNode.LOAD_I_OF_CLASS, \"\\\\$Base\", \"1\",\n+            IRNode.LOAD_I_OF_CLASS, \"LoadS[a-z]+\\\\$Base\", \"1\",\n+            IRNode.LOAD_I_OF_CLASS, \"Load.tore\\\\$Base\", \"1\",\n+            IRNode.LOAD_I_OF_CLASS, \"LoadStore\\\\$Base\", \"1\",\n+            IRNode.LOAD_I_OF_CLASS, \"\/LoadStore\\\\$Base\", \"1\",\n+            IRNode.LOAD_I_OF_CLASS, \"tests\/LoadStore\\\\$Base\", \"1\",\n+            IRNode.LOAD_I_OF_CLASS, \"\/tests\/LoadStore\\\\$Base\", \"1\",\n+            IRNode.LOAD_I_OF_CLASS, \"ir_framework\/tests\/LoadStore\\\\$Base\", \"1\",\n+            IRNode.LOAD_I_OF_CLASS, \"(?<=[@: ])ir_framework\/tests\/LoadStore\\\\$Base\", \"1\",\n+            IRNode.LOAD_I_OF_CLASS, \"(?<=[@: ])[\\\\w\\\\$\/]*tests[\\\\w\\\\$\/]*\", \"1\",\n+        },\n+        failOn = {\n+            IRNode.LOAD_I_OF_CLASS, \"\/Base\",\n+            IRNode.LOAD_I_OF_CLASS, \"oadStore\\\\$Base\",\n+            IRNode.LOAD_I_OF_CLASS, \"LoadStore\\\\$Bas\",\n+            IRNode.LOAD_I_OF_CLASS, \"LoadStore\",\n+            IRNode.LOAD_I_OF_CLASS, \"\/ir_framework\/tests\/LoadStore\\\\$Base\",\n+            IRNode.LOAD_I_OF_CLASS, \"(?<=[@: ])[\\\\w\\\\$]*tests[\\\\w\\\\$]*\",\n+        }\n+    )\n+    \/\/ @ir_framework\/tests\/LoadStore$Base (ir_framework\/tests\/LoadStore$I1)+12 *\n+    public int loadWithInterface() {\n+        return base.i;\n+    }\n+\n+    @Test\n+    @IR(counts = {\n+            IRNode.STORE_I_OF_CLASS, \"Base\", \"1\",\n+            IRNode.STORE_I_OF_CLASS, \"\\\\$Base\", \"1\",\n+            IRNode.STORE_I_OF_CLASS, \"LoadS[a-z]+\\\\$Base\", \"1\",\n+            IRNode.STORE_I_OF_CLASS, \"Load.tore\\\\$Base\", \"1\",\n+            IRNode.STORE_I_OF_CLASS, \"LoadStore\\\\$Base\", \"1\",\n+            IRNode.STORE_I_OF_CLASS, \"\/LoadStore\\\\$Base\", \"1\",\n+            IRNode.STORE_I_OF_CLASS, \"tests\/LoadStore\\\\$Base\", \"1\",\n+            IRNode.STORE_I_OF_CLASS, \"\/tests\/LoadStore\\\\$Base\", \"1\",\n+            IRNode.STORE_I_OF_CLASS, \"ir_framework\/tests\/LoadStore\\\\$Base\", \"1\",\n+            IRNode.STORE_I_OF_CLASS, \"(?<=[@: ])ir_framework\/tests\/LoadStore\\\\$Base\", \"1\",\n+            IRNode.STORE_I_OF_CLASS, \"(?<=[@: ])[\\\\w\\\\$\/]*tests[\\\\w\\\\$\/]*\", \"1\",\n+        },\n+        failOn = {\n+            IRNode.STORE_I_OF_CLASS, \"\/Base\",\n+            IRNode.STORE_I_OF_CLASS, \"oadStore\\\\$Base\",\n+            IRNode.STORE_I_OF_CLASS, \"LoadStore\\\\$Bas\",\n+            IRNode.STORE_I_OF_CLASS, \"LoadStore\",\n+            IRNode.STORE_I_OF_CLASS, \"\/ir_framework\/tests\/LoadStore\\\\$Base\",\n+            IRNode.STORE_I_OF_CLASS, \"(?<=[@: ])[\\\\w\\\\$]*tests[\\\\w\\\\$]*\",\n+        }\n+    )\n+    \/\/ @ir_framework\/tests\/LoadStore$Base (ir_framework\/tests\/LoadStore$I1)+12 *\n+    public void storeWithInterface() {\n+        base.i = 1;\n+    }\n+\n+    @Test\n+    @IR(counts = {\n+            IRNode.LOAD_L_OF_CLASS, \"Derived\", \"1\",\n+            IRNode.LOAD_L_OF_CLASS, \"\\\\$Derived\", \"1\",\n+            IRNode.LOAD_L_OF_CLASS, \"LoadS[a-z]+\\\\$Derived\", \"1\",\n+            IRNode.LOAD_L_OF_CLASS, \"Load.tore\\\\$Derived\", \"1\",\n+            IRNode.LOAD_L_OF_CLASS, \"LoadStore\\\\$Derived\", \"1\",\n+            IRNode.LOAD_L_OF_CLASS, \"\/LoadStore\\\\$Derived\", \"1\",\n+            IRNode.LOAD_L_OF_CLASS, \"tests\/LoadStore\\\\$Derived\", \"1\",\n+            IRNode.LOAD_L_OF_CLASS, \"\/tests\/LoadStore\\\\$Derived\", \"1\",\n+            IRNode.LOAD_L_OF_CLASS, \"ir_framework\/tests\/LoadStore\\\\$Derived\", \"1\",\n+            IRNode.LOAD_L_OF_CLASS, \"(?<=[@: ])ir_framework\/tests\/LoadStore\\\\$Derived\", \"1\",\n+            IRNode.LOAD_L_OF_CLASS, \"(?<=[@: ])[\\\\w\\\\$\/]*tests[\\\\w\\\\$\/]*\", \"1\",\n+        },\n+        failOn = {\n+            IRNode.LOAD_L_OF_CLASS, \"\/Derived\",\n+            IRNode.LOAD_L_OF_CLASS, \"oadStore\\\\$Derived\",\n+            IRNode.LOAD_L_OF_CLASS, \"LoadStore\\\\$Derive\",\n+            IRNode.LOAD_L_OF_CLASS, \"LoadStore\",\n+            IRNode.LOAD_L_OF_CLASS, \"\/ir_framework\/tests\/LoadStore\\\\$Derived\",\n+            IRNode.LOAD_L_OF_CLASS, \"(?<=[@: ])[\\\\w\\\\$]*tests[\\\\w\\\\$]*\",\n+        }\n+    )\n+    \/\/ @ir_framework\/tests\/LoadStore$Derived (ir_framework\/tests\/LoadStore$I1,ir_framework\/tests\/LoadStore$I2)+24 *\n+    public long loadWithInterfaces() {\n+        return derived.l;\n+    }\n+\n+    @Test\n+    @IR(counts = {\n+            IRNode.STORE_L_OF_CLASS, \"Derived\", \"1\",\n+            IRNode.STORE_L_OF_CLASS, \"\\\\$Derived\", \"1\",\n+            IRNode.STORE_L_OF_CLASS, \"LoadS[a-z]+\\\\$Derived\", \"1\",\n+            IRNode.STORE_L_OF_CLASS, \"Load.tore\\\\$Derived\", \"1\",\n+            IRNode.STORE_L_OF_CLASS, \"LoadStore\\\\$Derived\", \"1\",\n+            IRNode.STORE_L_OF_CLASS, \"\/LoadStore\\\\$Derived\", \"1\",\n+            IRNode.STORE_L_OF_CLASS, \"tests\/LoadStore\\\\$Derived\", \"1\",\n+            IRNode.STORE_L_OF_CLASS, \"\/tests\/LoadStore\\\\$Derived\", \"1\",\n+            IRNode.STORE_L_OF_CLASS, \"ir_framework\/tests\/LoadStore\\\\$Derived\", \"1\",\n+            IRNode.STORE_L_OF_CLASS, \"(?<=[@: ])ir_framework\/tests\/LoadStore\\\\$Derived\", \"1\",\n+            IRNode.STORE_L_OF_CLASS, \"(?<=[@: ])[\\\\w\\\\$\/]*tests[\\\\w\\\\$\/]*\", \"1\",\n+        },\n+        failOn = {\n+            IRNode.STORE_L_OF_CLASS, \"\/Derived\",\n+            IRNode.STORE_L_OF_CLASS, \"oadStore\\\\$Derived\",\n+            IRNode.STORE_L_OF_CLASS, \"LoadStore\\\\$Derive\",\n+            IRNode.STORE_L_OF_CLASS, \"LoadStore\",\n+            IRNode.STORE_L_OF_CLASS, \"\/ir_framework\/tests\/LoadStore\\\\$Derived\",\n+            IRNode.STORE_L_OF_CLASS, \"(?<=[@: ])[\\\\w\\\\$]*tests[\\\\w\\\\$]*\",\n+        }\n+    )\n+    \/\/ @ir_framework\/tests\/LoadStore$Derived (ir_framework\/tests\/LoadStore$I1,ir_framework\/tests\/LoadStore$I2)+24 *\n+    public void storeWithInterfaces() {\n+        derived.l = 1;\n+    }\n+\n+    @Test\n+    @IR(counts = {\n+            IRNode.LOAD_I_OF_CLASS, \"DoubleNest\", \"1\",\n+            IRNode.LOAD_I_OF_CLASS, \"\\\\$DoubleNest\", \"1\",\n+            IRNode.LOAD_I_OF_CLASS, \"SingleNest\\\\$DoubleNest\", \"1\",\n+            IRNode.LOAD_I_OF_CLASS, \"\\\\$SingleNest\\\\$DoubleNest\", \"1\",\n+            IRNode.LOAD_I_OF_CLASS, \"LoadStore\\\\$SingleNest\\\\$DoubleNest\", \"1\",\n+            IRNode.LOAD_I_OF_CLASS, \"\/LoadStore\\\\$SingleNest\\\\$DoubleNest\", \"1\",\n+            IRNode.LOAD_I_OF_CLASS, \"tests\/LoadStore\\\\$SingleNest\\\\$DoubleNest\", \"1\",\n+            IRNode.LOAD_I_OF_CLASS, \"\/tests\/LoadStore\\\\$SingleNest\\\\$DoubleNest\", \"1\",\n+            IRNode.LOAD_I_OF_CLASS, \"ir_framework\/tests\/LoadStore\\\\$SingleNest\\\\$DoubleNest\", \"1\",\n+        },\n+        failOn = {\n+            IRNode.LOAD_I_OF_CLASS, \"SingleNest\",\n+            IRNode.LOAD_I_OF_CLASS, \"LoadStore\",\n+            IRNode.LOAD_I_OF_CLASS, \"LoadStore\\\\$SingleNest\",\n+        }\n+    )\n+    \/\/ @ir_framework\/tests\/LoadStore$SingleNest$DoubleNest+12 *\n+    public int loadDoubleNested() {\n+        return doubleNest.i;\n+    }\n+\n+    @Test\n+    @IR(counts = {\n+            IRNode.STORE_I_OF_CLASS, \"DoubleNest\", \"1\",\n+            IRNode.STORE_I_OF_CLASS, \"\\\\$DoubleNest\", \"1\",\n+            IRNode.STORE_I_OF_CLASS, \"SingleNest\\\\$DoubleNest\", \"1\",\n+            IRNode.STORE_I_OF_CLASS, \"\\\\$SingleNest\\\\$DoubleNest\", \"1\",\n+            IRNode.STORE_I_OF_CLASS, \"LoadStore\\\\$SingleNest\\\\$DoubleNest\", \"1\",\n+            IRNode.STORE_I_OF_CLASS, \"\/LoadStore\\\\$SingleNest\\\\$DoubleNest\", \"1\",\n+            IRNode.STORE_I_OF_CLASS, \"tests\/LoadStore\\\\$SingleNest\\\\$DoubleNest\", \"1\",\n+            IRNode.STORE_I_OF_CLASS, \"\/tests\/LoadStore\\\\$SingleNest\\\\$DoubleNest\", \"1\",\n+            IRNode.STORE_I_OF_CLASS, \"ir_framework\/tests\/LoadStore\\\\$SingleNest\\\\$DoubleNest\", \"1\",\n+        },\n+        failOn = {\n+            IRNode.STORE_I_OF_CLASS, \"SingleNest\",\n+            IRNode.STORE_I_OF_CLASS, \"LoadStore\",\n+            IRNode.STORE_I_OF_CLASS, \"LoadStore\\\\$SingleNest\",\n+        }\n+    )\n+    \/\/ @ir_framework\/tests\/LoadStore$SingleNest$DoubleNest+12 *\n+    public void storeDoubleNested() {\n+        doubleNest.i = 1;\n+    }\n+}\n\\ No newline at end of file\n","filename":"test\/hotspot\/jtreg\/testlibrary_tests\/ir_framework\/tests\/TestPhaseIRMatching.java","additions":237,"deletions":0,"binary":false,"changes":237,"status":"modified"},{"patch":"@@ -51,0 +51,3 @@\n+                        \/\/ GC tests often run at the brink of OOME, make sure\n+                        \/\/ LocalRandom is loaded, initialized, and has enough memory.\n+                        LocalRandom.init();\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/share\/gc\/GC.java","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -122,1 +122,0 @@\n-java\/awt\/Frame\/BogusFocusableWindowState\/BogusFocusableWindowState.java 8361521 linux-all\n@@ -596,2 +595,0 @@\n-java\/nio\/channels\/Channels\/SocketChannelStreams.java            8317838 aix-ppc64\n-\n","filename":"test\/jdk\/ProblemList.txt","additions":0,"deletions":3,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -0,0 +1,145 @@\n+\/*\n+ * Copyright (c) 2025, Google LLC. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8371864\n+ * @run main\/othervm\/timeout=600 TestGCMSplitBound\n+ * @requires (os.simpleArch == \"x64\" & (vm.cpu.features ~= \".*avx2.*\" |\n+ *                                      vm.cpu.features ~= \".*avx512.*\"))\n+ * @summary Test GaloisCounterMode.implGCMCrypt0 AVX512\/AVX2 intrinsics.\n+ *\/\n+\n+import java.security.SecureRandom;\n+import java.security.spec.AlgorithmParameterSpec;\n+import java.time.Duration;\n+import java.util.Arrays;\n+import javax.crypto.Cipher;\n+import javax.crypto.SecretKey;\n+import javax.crypto.spec.GCMParameterSpec;\n+import javax.crypto.spec.SecretKeySpec;\n+\n+public class TestGCMSplitBound {\n+\n+    static final SecureRandom SECURE_RANDOM = newDefaultSecureRandom();\n+\n+    private static SecureRandom newDefaultSecureRandom() {\n+        SecureRandom retval = new SecureRandom();\n+        retval.nextLong(); \/\/ force seeding\n+        return retval;\n+    }\n+\n+    private static byte[] randBytes(int size) {\n+        byte[] rand = new byte[size];\n+        SECURE_RANDOM.nextBytes(rand);\n+        return rand;\n+    }\n+\n+    private static final int IV_SIZE_IN_BYTES = 12;\n+    private static final int TAG_SIZE_IN_BYTES = 16;\n+\n+    private Cipher getCipher(final byte[] key, final byte[] aad,\n+                             final byte[] nonce, int mode)\n+        throws Exception {\n+        SecretKey keySpec = new SecretKeySpec(key, \"AES\");\n+        AlgorithmParameterSpec params =\n+            new GCMParameterSpec(8 * TAG_SIZE_IN_BYTES, nonce, 0, nonce.length);\n+        Cipher cipher = Cipher.getInstance(\"AES\/GCM\/NoPadding\");\n+        cipher.init(mode, keySpec, params);\n+        if (aad != null && aad.length != 0) {\n+            cipher.updateAAD(aad);\n+        }\n+        return cipher;\n+    }\n+\n+    private byte[] gcmEncrypt(final byte[] key, final byte[] plaintext,\n+                              final byte[] aad)\n+        throws Exception {\n+        byte[] nonce = randBytes(IV_SIZE_IN_BYTES);\n+        Cipher cipher = getCipher(key, aad, nonce, Cipher.ENCRYPT_MODE);\n+        int outputSize = cipher.getOutputSize(plaintext.length);\n+        int len = IV_SIZE_IN_BYTES + outputSize;\n+        byte[] output = new byte[len];\n+        System.arraycopy(nonce, 0, output, 0, IV_SIZE_IN_BYTES);\n+        cipher.doFinal(plaintext, 0, plaintext.length, output,\n+                       IV_SIZE_IN_BYTES);\n+        return output;\n+    }\n+\n+    private byte[] gcmDecrypt(final byte[] key, final byte[] ciphertext,\n+                              final byte[] aad)\n+        throws Exception {\n+        byte[] nonce = new byte[IV_SIZE_IN_BYTES];\n+        System.arraycopy(ciphertext, 0, nonce, 0, IV_SIZE_IN_BYTES);\n+        Cipher cipher = getCipher(key, aad, nonce, Cipher.DECRYPT_MODE);\n+        return cipher.doFinal(ciphertext, IV_SIZE_IN_BYTES,\n+                              ciphertext.length - IV_SIZE_IN_BYTES);\n+    }\n+\n+    \/\/ x86-64 parallel intrinsic data size\n+    private static final int PARALLEL_LEN = 512;\n+    \/\/ max data size for x86-64 intrinsic\n+    private static final int SPLIT_LEN = 1048576; \/\/ 1MB\n+\n+    private void encryptAndDecrypt(byte[] key, byte[] aad, byte[] message,\n+                                   int messageSize)\n+        throws Exception {\n+        byte[] ciphertext = gcmEncrypt(key, message, aad);\n+        byte[] decrypted = gcmDecrypt(key, ciphertext, aad);\n+        if (ciphertext == null) {\n+            throw new RuntimeException(\"ciphertext is null\");\n+        }\n+        if (Arrays.compare(decrypted, 0, messageSize,\n+                           message, 0, messageSize) != 0) {\n+            throw new RuntimeException(\n+                 \"Decrypted message is different from the original message\");\n+        }\n+    }\n+\n+    private void run() throws Exception {\n+        byte[] aad = randBytes(20);\n+        byte[] key = randBytes(16);\n+        \/\/ Force JIT.\n+        for (int i = 0; i < 100000; i++) {\n+            byte[] message = randBytes(PARALLEL_LEN);\n+            encryptAndDecrypt(key, aad, message, PARALLEL_LEN);\n+        }\n+        for (int messageSize = SPLIT_LEN - 300; messageSize <= SPLIT_LEN + 300;\n+                                                messageSize++) {\n+            byte[] message = randBytes(messageSize);\n+            try {\n+                encryptAndDecrypt(key, aad, message, messageSize);\n+            } catch (Exception e) {\n+                throw new RuntimeException(\"Failed for messageSize \"\n+                        + Integer.toHexString(messageSize), e);\n+            }\n+        }\n+    }\n+\n+    public static void main(String[] args) throws Exception {\n+        TestGCMSplitBound test = new TestGCMSplitBound();\n+        for (int i = 0; i < 3; i++) {\n+            test.run();\n+        }\n+    }\n+}\n","filename":"test\/jdk\/com\/sun\/crypto\/provider\/Cipher\/AES\/TestGCMSplitBound.java","additions":145,"deletions":0,"binary":false,"changes":145,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -58,0 +58,7 @@\n+        \/\/ The threads might be virtual and daemon, so wait until completion.\n+        try {\n+            t1.join();\n+            t2.join();\n+        } catch (InterruptedException e) {\n+            throw new RuntimeException(e);\n+        }\n","filename":"test\/jdk\/com\/sun\/jdi\/TwoThreadsTest.java","additions":8,"deletions":1,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n- * @bug 8346952\n+ * @bug 8346952 8361521\n","filename":"test\/jdk\/java\/awt\/Frame\/BogusFocusableWindowState\/BogusFocusableWindowState.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1,889 +0,0 @@\n-\/*\n- * Copyright (c) 2015, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-\n-\/*\n- * Copyright (C) 2013-2014 IBM Corporation and Others. All Rights Reserved.\n- *\/\n-\n-import java.awt.Color;\n-import java.awt.Composite;\n-import java.awt.Font;\n-import java.awt.FontFormatException;\n-import java.awt.FontMetrics;\n-import java.awt.Graphics;\n-import java.awt.Graphics2D;\n-import java.awt.GraphicsConfiguration;\n-import java.awt.Image;\n-import java.awt.Paint;\n-import java.awt.Rectangle;\n-import java.awt.RenderingHints;\n-import java.awt.RenderingHints.Key;\n-import java.awt.Shape;\n-import java.awt.Stroke;\n-import java.awt.font.FontRenderContext;\n-import java.awt.font.GlyphVector;\n-import java.awt.font.TextLayout;\n-import java.awt.geom.AffineTransform;\n-import java.awt.image.BufferedImage;\n-import java.awt.image.BufferedImageOp;\n-import java.awt.image.ImageObserver;\n-import java.awt.image.RenderedImage;\n-import java.awt.image.renderable.RenderableImage;\n-import java.io.BufferedInputStream;\n-import java.io.File;\n-import java.io.FileInputStream;\n-import java.io.FileNotFoundException;\n-import java.io.IOException;\n-import java.io.InputStream;\n-import java.text.AttributedCharacterIterator;\n-import java.util.ArrayList;\n-import java.util.List;\n-import java.util.Map;\n-import java.util.MissingResourceException;\n-import java.util.TreeMap;\n-\n-import javax.xml.parsers.DocumentBuilder;\n-import javax.xml.parsers.DocumentBuilderFactory;\n-import javax.xml.parsers.ParserConfigurationException;\n-\n-import org.w3c.dom.Document;\n-import org.w3c.dom.Element;\n-import org.w3c.dom.NamedNodeMap;\n-import org.w3c.dom.Node;\n-import org.w3c.dom.NodeList;\n-import org.xml.sax.SAXException;\n-\n-\/**\n- * This test runs against a test XML file. It opens the fonts and attempts\n- * to shape and layout glyphs.\n- * Note that the test is highly environment dependent- you must have\n- * the same versions of the same fonts available or the test will fail.\n- *\n- * It is similar to letest which is part of ICU.\n- * For reference, here are some reference items:\n- * ICU's test file:\n- *  http:\/\/source.icu-project.org\/repos\/icu\/icu\/trunk\/source\/test\/testdata\/letest.xml\n- * ICU's readme for the similar test:\n- *  http:\/\/source.icu-project.org\/repos\/icu\/icu\/trunk\/source\/test\/letest\/readme.html\n- *\n- * @bug 8054203\n- * @test\n- * @summary manual test of layout engine behavior. Takes an XML control file.\n- * @compile TestLayoutVsICU.java\n- * @author srl\n- * @run main\/manual\n- *\/\n-public class TestLayoutVsICU {\n-\n-    public static boolean OPT_DRAW = false;\n-    public static boolean OPT_VERBOSE = false;\n-    public static boolean OPT_FAILMISSING = false;\n-    public static boolean OPT_NOTHROW= false; \/\/ if true - don't stop on failure\n-\n-    public static int docs = 0; \/\/ # docs processed\n-    public static int skipped = 0; \/\/ cases skipped due to bad font\n-    public static int total = 0; \/\/ cases processed\n-    public static int bad = 0; \/\/ cases with errs\n-\n-    public static final String XML_LAYOUT_TESTS = \"layout-tests\"; \/\/ top level\n-    public static final String XML_TEST_CASE = \"test-case\";\n-    public static final String XML_TEST_FONT = \"test-font\";\n-    public static final String XML_TEST_TEXT = \"test-text\";\n-    public static final String XML_RESULT_GLYPHS = \"result-glyphs\";\n-    public static final String XML_ID = \"id\";\n-    public static final String XML_SCRIPT = \"script\";\n-    public static final String XML_NAME = \"name\";\n-    public static final String XML_VERSION = \"version\";\n-    public static final String XML_CHECKSUM = \"checksum\";\n-    public static final String XML_RESULT_INDICES = \"result-indices\";\n-    public static final String XML_RESULT_POSITIONS = \"result-positions\";\n-\n-    \/**\n-     * @param args\n-     * @throws IOException\n-     * @throws SAXException\n-     * @throws ParserConfigurationException\n-     *\/\n-    public static void main(String[] args) throws ParserConfigurationException, SAXException, IOException {\n-        System.out.println(\"Java \" + System.getProperty(\"java.version\") + \" from \" + System.getProperty(\"java.vendor\"));\n-        TestLayoutVsICU tlvi = null;\n-        for(String arg : args) {\n-            if(arg.equals(\"-d\")) {\n-                OPT_DRAW = true;\n-            } else if(arg.equals(\"-n\")) {\n-                OPT_NOTHROW = true;\n-            } else if(arg.equals(\"-v\")) {\n-                OPT_VERBOSE = true;\n-            } else if(arg.equals(\"-f\")) {\n-                OPT_FAILMISSING = true;\n-            } else {\n-                if(tlvi == null) {\n-                    tlvi = new TestLayoutVsICU();\n-                }\n-                try {\n-                    tlvi.show(arg);\n-                } finally {\n-                    if(OPT_VERBOSE) {\n-                        System.out.println(\"# done with \" + arg);\n-                    }\n-                }\n-            }\n-        }\n-\n-        if(tlvi == null) {\n-            throw new IllegalArgumentException(\"No XML input. Usage: \" + TestLayoutVsICU.class.getSimpleName() + \" [-d][-v][-f] letest.xml ...\");\n-        } else {\n-            System.out.println(\"\\n\\nRESULTS:\\n\");\n-            System.out.println(skipped+\"\\tskipped due to missing font\");\n-            System.out.println(total+\"\\ttested of which:\");\n-            System.out.println(bad+\"\\twere bad\");\n-\n-            if(bad>0) {\n-                throw new InternalError(\"One or more failure(s)\");\n-            }\n-        }\n-    }\n-\n-    String id;\n-\n-    private void show(String arg) throws ParserConfigurationException, SAXException, IOException {\n-        id = \"<none>\";\n-        File xmlFile = new File(arg);\n-        if(!xmlFile.exists()) {\n-            throw new FileNotFoundException(\"Can't open input XML file \" + arg);\n-        }\n-        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();\n-        DocumentBuilder db = dbf.newDocumentBuilder();\n-        if(OPT_VERBOSE) {\n-            System.out.println(\"# Parsing \" + xmlFile.getAbsolutePath());\n-        }\n-        Document doc = db.parse(xmlFile);\n-        Element e = doc.getDocumentElement();\n-        if(!XML_LAYOUT_TESTS.equals(e.getNodeName())) {\n-            throw new IllegalArgumentException(\"Document \" + xmlFile.getAbsolutePath() + \" does not have <layout-tests> as its base\");\n-        }\n-\n-        NodeList testCases = e.getElementsByTagName(XML_TEST_CASE);\n-        for(int caseNo=0;caseNo<testCases.getLength();caseNo++) {\n-            final Node testCase = testCases.item(caseNo);\n-            final Map<String,String> testCaseAttrs = attrs(testCase);\n-            id = testCaseAttrs.get(XML_ID);\n-            final String script = testCaseAttrs.get(XML_SCRIPT);\n-            String testText = null;\n-            Integer[] expectGlyphs = null;\n-            Integer[] expectIndices = null;\n-            Map<String,String> fontAttrs = null;\n-            if(OPT_VERBOSE) {\n-                System.out.println(\"#\"+caseNo+\" id=\"+id + \", script=\"+script);\n-            }\n-            NodeList children = testCase.getChildNodes();\n-            for(int sub=0;sub<children.getLength();sub++) {\n-                Node n = children.item(sub);\n-                if(n.getNodeType()!=Node.ELEMENT_NODE) continue;\n-                String nn = n.getNodeName();\n-                if(nn.equals(XML_TEST_FONT)) {\n-                    fontAttrs = attrs(n);\n-                } else if(nn.equals(XML_TEST_TEXT)) {\n-                    testText = n.getTextContent();\n-                } else if(nn.equals(XML_RESULT_GLYPHS)) {\n-                    String hex = n.getTextContent();\n-                    expectGlyphs = parseHexArray(hex);\n-                } else if(nn.equals(XML_RESULT_INDICES)) {\n-                    String hex = n.getTextContent();\n-                    expectIndices = parseHexArray(hex);\n-                } else if(OPT_VERBOSE) {\n-                    System.out.println(\"Ignoring node \" + nn);\n-                }\n-            }\n-            if(fontAttrs == null) {\n-                throw new IllegalArgumentException(id + \" Missing node \" + XML_TEST_FONT);\n-            }\n-            if(testText == null) {\n-                throw new IllegalArgumentException(id + \" Missing node \" + XML_TEST_TEXT);\n-            }\n-\n-            String fontName = fontAttrs.get(XML_NAME);\n-            Font f = getFont(fontName, fontAttrs);\n-            if(f==null) {\n-                if(OPT_FAILMISSING) {\n-                    throw new MissingResourceException(\"Missing font,  abort test\", Font.class.getName(), fontName);\n-                }\n-                System.out.println(\"Skipping \" + id + \" because font is missing: \" + fontName);\n-                skipped++;\n-                continue;\n-            }\n-            FontRenderContext frc = new FontRenderContext(null, true, true);\n-            TextLayout tl = new TextLayout(testText,f,frc);\n-            final List<GlyphVector> glyphs = new ArrayList<GlyphVector>();\n-            Graphics2D myg2 = new Graphics2D(){\n-\n-                    @Override\n-                    public void draw(Shape s) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public boolean drawImage(Image img, AffineTransform xform,\n-                                             ImageObserver obs) {\n-                        \/\/ TODO Auto-generated method stub\n-                        return false;\n-                    }\n-\n-                    @Override\n-                    public void drawImage(BufferedImage img,\n-                                          BufferedImageOp op, int x, int y) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public void drawRenderedImage(RenderedImage img,\n-                                                  AffineTransform xform) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public void drawRenderableImage(RenderableImage img,\n-                                                    AffineTransform xform) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public void drawString(String str, int x, int y) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public void drawString(String str, float x, float y) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public void drawString(\n-                                           AttributedCharacterIterator iterator, int x, int y) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public void drawString(\n-                                           AttributedCharacterIterator iterator, float x,\n-                                           float y) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public void drawGlyphVector(GlyphVector g, float x, float y) {\n-                        if(x!=0.0 || y!=0.0) {\n-                            throw new InternalError(\"x,y should be 0 but got \" + x+\",\"+y);\n-                        }\n-                        \/\/System.err.println(\"dGV : \" + g.toString() + \" @ \"+x+\",\"+y);\n-                        glyphs.add(g);\n-                    }\n-\n-                    @Override\n-                    public void fill(Shape s) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public boolean hit(Rectangle rect, Shape s, boolean onStroke) {\n-                        \/\/ TODO Auto-generated method stub\n-                        return false;\n-                    }\n-\n-                    @Override\n-                    public GraphicsConfiguration getDeviceConfiguration() {\n-                        \/\/ TODO Auto-generated method stub\n-                        return null;\n-                    }\n-\n-                    @Override\n-                    public void setComposite(Composite comp) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public void setPaint(Paint paint) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public void setStroke(Stroke s) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public void setRenderingHint(Key hintKey, Object hintValue) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public Object getRenderingHint(Key hintKey) {\n-                        \/\/ TODO Auto-generated method stub\n-                        return null;\n-                    }\n-\n-                    @Override\n-                    public void setRenderingHints(Map<?, ?> hints) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public void addRenderingHints(Map<?, ?> hints) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public RenderingHints getRenderingHints() {\n-                        \/\/ TODO Auto-generated method stub\n-                        return null;\n-                    }\n-\n-                    @Override\n-                    public void translate(int x, int y) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public void translate(double tx, double ty) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public void rotate(double theta) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public void rotate(double theta, double x, double y) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public void scale(double sx, double sy) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public void shear(double shx, double shy) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public void transform(AffineTransform Tx) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public void setTransform(AffineTransform Tx) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public AffineTransform getTransform() {\n-                        \/\/ TODO Auto-generated method stub\n-                        return null;\n-                    }\n-\n-                    @Override\n-                    public Paint getPaint() {\n-                        \/\/ TODO Auto-generated method stub\n-                        return null;\n-                    }\n-\n-                    @Override\n-                    public Composite getComposite() {\n-                        \/\/ TODO Auto-generated method stub\n-                        return null;\n-                    }\n-\n-                    @Override\n-                    public void setBackground(Color color) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public Color getBackground() {\n-                        \/\/ TODO Auto-generated method stub\n-                        return null;\n-                    }\n-\n-                    @Override\n-                    public Stroke getStroke() {\n-                        \/\/ TODO Auto-generated method stub\n-                        return null;\n-                    }\n-\n-                    @Override\n-                    public void clip(Shape s) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public FontRenderContext getFontRenderContext() {\n-                        \/\/ TODO Auto-generated method stub\n-                        return null;\n-                    }\n-\n-                    @Override\n-                    public Graphics create() {\n-                        \/\/ TODO Auto-generated method stub\n-                        return null;\n-                    }\n-\n-                    @Override\n-                    public Color getColor() {\n-                        \/\/ TODO Auto-generated method stub\n-                        return null;\n-                    }\n-\n-                    @Override\n-                    public void setColor(Color c) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public void setPaintMode() {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public void setXORMode(Color c1) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public Font getFont() {\n-                        \/\/ TODO Auto-generated method stub\n-                        return null;\n-                    }\n-\n-                    @Override\n-                    public void setFont(Font font) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public FontMetrics getFontMetrics(Font f) {\n-                        \/\/ TODO Auto-generated method stub\n-                        return null;\n-                    }\n-\n-                    @Override\n-                    public Rectangle getClipBounds() {\n-                        \/\/ TODO Auto-generated method stub\n-                        return null;\n-                    }\n-\n-                    @Override\n-                    public void clipRect(int x, int y, int width, int height) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public void setClip(int x, int y, int width, int height) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public Shape getClip() {\n-                        \/\/ TODO Auto-generated method stub\n-                        return null;\n-                    }\n-\n-                    @Override\n-                    public void setClip(Shape clip) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public void copyArea(int x, int y, int width, int height,\n-                                         int dx, int dy) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public void drawLine(int x1, int y1, int x2, int y2) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public void fillRect(int x, int y, int width, int height) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public void clearRect(int x, int y, int width, int height) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public void drawRoundRect(int x, int y, int width,\n-                                              int height, int arcWidth, int arcHeight) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public void fillRoundRect(int x, int y, int width,\n-                                              int height, int arcWidth, int arcHeight) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public void drawOval(int x, int y, int width, int height) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public void fillOval(int x, int y, int width, int height) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public void drawArc(int x, int y, int width, int height,\n-                                        int startAngle, int arcAngle) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public void fillArc(int x, int y, int width, int height,\n-                                        int startAngle, int arcAngle) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public void drawPolyline(int[] xPoints, int[] yPoints,\n-                                             int nPoints) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public void drawPolygon(int[] xPoints, int[] yPoints,\n-                                            int nPoints) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public void fillPolygon(int[] xPoints, int[] yPoints,\n-                                            int nPoints) {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                    @Override\n-                    public boolean drawImage(Image img, int x, int y,\n-                                             ImageObserver observer) {\n-                        \/\/ TODO Auto-generated method stub\n-                        return false;\n-                    }\n-\n-                    @Override\n-                    public boolean drawImage(Image img, int x, int y,\n-                                             int width, int height, ImageObserver observer) {\n-                        \/\/ TODO Auto-generated method stub\n-                        return false;\n-                    }\n-\n-                    @Override\n-                    public boolean drawImage(Image img, int x, int y,\n-                                             Color bgcolor, ImageObserver observer) {\n-                        \/\/ TODO Auto-generated method stub\n-                        return false;\n-                    }\n-\n-                    @Override\n-                    public boolean drawImage(Image img, int x, int y,\n-                                             int width, int height, Color bgcolor,\n-                                             ImageObserver observer) {\n-                        \/\/ TODO Auto-generated method stub\n-                        return false;\n-                    }\n-\n-                    @Override\n-                    public boolean drawImage(Image img, int dx1, int dy1,\n-                                             int dx2, int dy2, int sx1, int sy1, int sx2,\n-                                             int sy2, ImageObserver observer) {\n-                        \/\/ TODO Auto-generated method stub\n-                        return false;\n-                    }\n-\n-                    @Override\n-                    public boolean drawImage(Image img, int dx1, int dy1,\n-                                             int dx2, int dy2, int sx1, int sy1, int sx2,\n-                                             int sy2, Color bgcolor, ImageObserver observer) {\n-                        \/\/ TODO Auto-generated method stub\n-                        return false;\n-                    }\n-\n-                    @Override\n-                    public void dispose() {\n-                        \/\/ TODO Auto-generated method stub\n-\n-                    }\n-\n-                };\n-            tl.draw(myg2, 0, 0);\n-            if(glyphs.size() != 1) {\n-                err(\"drew \" + glyphs.size() + \" times - expected 1\");\n-                total++;\n-                bad++;\n-                continue;\n-            }\n-            boolean isBad = false;\n-            GlyphVector gv = glyphs.get(0);\n-\n-            \/\/ GLYPHS\n-            int gotGlyphs[] = gv.getGlyphCodes(0, gv.getNumGlyphs(), new int[gv.getNumGlyphs()]);\n-\n-            int count = Math.min(gotGlyphs.length, expectGlyphs.length); \/\/ go up to this count\n-\n-            for(int i=0;i<count;i++) {\n-                if(gotGlyphs[i]!=expectGlyphs[i]) {\n-                    err(\"@\"+i+\" - got \\tglyph 0x\" + Integer.toHexString(gotGlyphs[i]) + \" wanted 0x\" + Integer.toHexString(expectGlyphs[i]));\n-                    isBad=true;\n-                    break;\n-                }\n-            }\n-\n-            \/\/ INDICES\n-            int gotIndices[] = gv.getGlyphCharIndices(0, gv.getNumGlyphs(), new int[gv.getNumGlyphs()]);\n-            for(int i=0;i<count;i++) {\n-                if(gotIndices[i]!=expectIndices[i]) {\n-                    err(\"@\"+i+\" - got \\tindex 0x\" + Integer.toHexString(gotGlyphs[i]) + \" wanted 0x\" + Integer.toHexString(expectGlyphs[i]));\n-                    isBad=true;\n-                    break;\n-                }\n-            }\n-\n-\n-            \/\/ COUNT\n-            if(gotGlyphs.length != expectGlyphs.length) {\n-                System.out.println(\"Got \" + gotGlyphs.length + \" wanted \" + expectGlyphs.length + \" glyphs\");\n-                isBad=true;\n-            } else {\n-                if(OPT_VERBOSE) {\n-                    System.out.println(\">> OK: \" + gotGlyphs.length + \" glyphs\");\n-                }\n-            }\n-\n-\n-            if(isBad) {\n-                bad++;\n-                System.out.println(\"* FAIL: \" + id + \"  \/\\t\" + fontName);\n-            } else {\n-                System.out.println(\"* OK  : \" + id + \"  \/\\t\" + fontName);\n-            }\n-            total++;\n-        }\n-    }\n-\n-\n-    private boolean verifyFont(File f, Map<String, String> fontAttrs) {\n-        InputStream fis = null;\n-        String fontName = fontAttrs.get(XML_NAME);\n-        int count=0;\n-        try {\n-            fis = new BufferedInputStream(new FileInputStream(f));\n-\n-            int i = 0;\n-            int r;\n-            try {\n-                while((r=fis.read())!=-1) {\n-                    i+=(int)r;\n-                    count++;\n-                }\n-            } catch (IOException e) {\n-                \/\/ TODO Auto-generated catch block\n-                e.printStackTrace();\n-                return false;\n-            }\n-            if(OPT_VERBOSE) {\n-                System.out.println(\"for \" + f.getAbsolutePath() + \" chks = 0x\" + Integer.toHexString(i) + \" size=\" + count);\n-            }\n-            String theirStr = fontAttrs.get(\"rchecksum\");\n-\n-            String ourStr = Integer.toHexString(i).toLowerCase();\n-\n-            if(theirStr!=null) {\n-                if(theirStr.startsWith(\"0x\")) {\n-                    theirStr = theirStr.substring(2).toLowerCase();\n-                } else {\n-                    theirStr = theirStr.toLowerCase();\n-                }\n-                long theirs = Integer.parseInt(theirStr, 16);\n-                if(theirs != i) {\n-                    err(\"WARNING: rchecksum for \" + fontName + \" was \" + i  + \" (0x\"+ourStr+\") \"+ \" but file said \" + theirs +\" (0x\"+theirStr+\")  - perhaps a different font?\");\n-                    return false;\n-                } else {\n-                    if(OPT_VERBOSE) {\n-                        System.out.println(\" rchecksum for \" + fontName + \" OK\");\n-                    }\n-                    return true;\n-                }\n-            } else {\n-                \/\/if(OPT_VERBOSE) {\n-                System.err.println(\"WARNING: rchecksum for \" + fontName + \" was \" + i  + \" (0x\"+ourStr+\") \"+ \" but rchecksum was MISSING. Old ICU data?\");\n-                \/\/}\n-            }\n-        } catch (FileNotFoundException e) {\n-            \/\/ TODO Auto-generated catch block\n-            e.printStackTrace();\n-            return false;\n-        } finally {\n-            try {\n-                fis.close();\n-            } catch (IOException e) {\n-                \/\/ TODO Auto-generated catch block\n-                e.printStackTrace();\n-            }\n-        }\n-        return true;\n-    }\n-\n-\n-    private Integer[] parseHexArray(String hex) {\n-        List<Integer> ret = new ArrayList<Integer>();\n-        String items[] = hex.split(\"[\\\\s,]\");\n-        for(String i : items) {\n-            if(i.isEmpty()) continue;\n-            if(i.startsWith(\"0x\")) {\n-                i = i.substring(2);\n-            }\n-            ret.add(Integer.parseInt(i, 16));\n-        }\n-        return ret.toArray(new Integer[0]);\n-    }\n-\n-\n-    private void err(String string) {\n-        if(OPT_NOTHROW) {\n-            System.out.println(id+\" ERROR: \" + string +\" (continuing due to -n)\");\n-        } else {\n-            throw new InternalError(id+ \": \" + string);\n-        }\n-    }\n-\n-\n-    private Font getFont(String fontName, Map<String, String> fontAttrs) {\n-        Font f;\n-        if(false)\n-            try {\n-                f = Font.getFont(fontName);\n-                if(f!=null)  {\n-                    if(OPT_VERBOSE) {\n-                        System.out.println(\"Loaded default path to \" + fontName);\n-                    }\n-                    return f;\n-                }\n-            } catch(Throwable t) {\n-                if(OPT_VERBOSE) {\n-                    t.printStackTrace();\n-                    System.out.println(\"problem loading font \" + fontName + \" - \" + t.toString());\n-                }\n-            }\n-\n-        File homeDir = new File(System.getProperty(\"user.home\"));\n-        File fontDir = new File(homeDir, \"fonts\");\n-        File fontFile = new File(fontDir, fontName);\n-        \/\/System.out.println(\"## trying \" + fontFile.getAbsolutePath());\n-        if(fontFile.canRead()) {\n-            try {\n-                if(!verifyFont(fontFile,fontAttrs)) {\n-                    System.out.println(\"Warning: failed to verify \" + fontName);\n-                }\n-                f = Font.createFont(Font.TRUETYPE_FONT, fontFile);\n-                if(f!=null & OPT_VERBOSE) {\n-                    System.out.println(\"> loaded from \" + fontFile.getAbsolutePath() + \" - \" + f.toString());\n-                }\n-                return f;\n-            } catch (FontFormatException e) {\n-                if(OPT_VERBOSE) {\n-                    e.printStackTrace();\n-                    System.out.println(\"problem loading font \" + fontName + \" - \" + e.toString());\n-                }\n-            } catch (IOException e) {\n-                if(OPT_VERBOSE) {\n-                    e.printStackTrace();\n-                    System.out.println(\"problem loading font \" + fontName + \" - \" + e.toString());\n-                }\n-            }\n-        }\n-        return null;\n-    }\n-\n-\n-    private static Map<String, String> attrs(Node testCase) {\n-        Map<String,String> rv = new TreeMap<String,String>();\n-        NamedNodeMap nnm = testCase.getAttributes();\n-        for(int i=0;i<nnm.getLength();i++) {\n-            Node n = nnm.item(i);\n-            String k = n.getNodeName();\n-            String v = n.getNodeValue();\n-            rv.put(k, v);\n-        }\n-        return rv;\n-    }\n-}\n","filename":"test\/jdk\/java\/awt\/font\/TextLayout\/TestLayoutVsICU.java","additions":0,"deletions":889,"binary":false,"changes":889,"status":"deleted"},{"patch":"@@ -1,1827 +0,0 @@\n-<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n-\n-<!--\n-\/*\n- * Copyright (c) 2015, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n--->\n-<!--\n-   NOTE: You are unlikely to have all needed fonts.\n- -->\n-<!--\n-  Copyright (c) 1999-2014 International Business Machines\n-  Corporation and others. All rights reserved.\n-\n-  WARNING: THIS FILE IS MACHINE GENERATED. DO NOT HAND EDIT IT\n-  UNLESS YOU REALLY KNOW WHAT YOU'RE DOING.\n-\n-  file name:    letest.xml\n-  generated on: 03\/04\/2013 10:28:51 PM PST\n-  generated by: gendata.cpp\n--->\n-\n-<layout-tests>\n-    <test-case id=\"Ghita\" script=\"deva\">\n-        <test-font name=\"raghu.ttf\" version=\"Original Version 1.00 (2005)\" checksum=\"0x088DB135\" rchecksum=\"0x00803FCE\"\/>\n-\n-        <test-text>               <\/test-text>\n-\n-        <result-glyphs>\n-            0x0000009E, 0x0000009A, 0x00000051, 0x00000222, 0x00000098, 0x00000091, 0x00000051, 0x00000003, \n-            0x00000097, 0x00000082, 0x0000009D, 0x000001A5, 0x0000FFFF, 0x0000FFFF, 0x00000222, 0x0000008F, \n-            0x00000221, 0x00000003, 0x0000005C, 0x000000DA, 0x0000FFFF, 0x00000099, 0x00000221, 0x00000099, \n-            0x00000003, 0x0000005C, 0x00000087, 0x000001D5, 0x0000005B, 0x0000FFFF, 0x00000093, 0x00000003, \n-            0x000001D2, 0x0000009D, 0x0000009F, 0x00000221, 0x00000091, 0x00000003, 0x00000099, 0x0000022A, \n-            0x00000082, 0x00000003, 0x00000092, 0x000001D9, 0x0000008F, 0x0000009A, 0x00000221, 0x000001B4, \n-            0x0000FFFF, 0x0000FFFF, 0x0000009A, 0x00000051, 0x00000003, 0x00000060, 0x0000009D, 0x00000221, \n-            0x00000085, 0x000001D9, 0x00000003, 0x00000092, 0x00000098, 0x0000005B, 0x0000FFFF, 0x000000A2, \n-            0x0000FFFF, 0x0000FFFF, 0x0000022F, 0x0000008F, 0x0000009A, 0x00000051, 0x0000022F, 0x00000003, \n-            0x00000080, 0x000001D5, 0x0000009A, 0x000001FD, 0x000000A2, 0x0000FFFF, 0x0000FFFF, 0x0000022F, \n-            0x0000008F, 0x0000009A, 0x00000051, 0x0000022F, 0x00000003, 0x000000A0, 0x00000098, 0x0000009D, \n-            0x0000022F, 0x0000008F, 0x00000221, 0x00000003, 0x00000099, 0x000001D5, 0x00000099, 0x000001D5, \n-            0x000000D7, 0x0000FFFF, 0x000000A0, 0x0000009D, 0x0000022C, 0x00000003, 0x00000098, 0x00000221, \n-            0x00000098, 0x00000080, 0x00000221, 0x0000022C, 0x00000003, 0x00000094, 0x00000221, 0x000000D6, \n-            0x0000FFFF, 0x0000008C, 0x0000009D, 0x00000221, 0x000001B1, 0x0000FFFF, 0x0000FFFF, 0x00000230, \n-            0x0000009D, 0x00000003, 0x000001D1, 0x00000080, 0x00000098, 0x00000080, 0x000001D5, 0x0000009D, \n-            0x0000005B, 0x0000FFFF, 0x0000008F, 0x00000003, 0x000000A0, 0x00000232, 0x00000087, 0x0000009D\n-        <\/result-glyphs>\n-\n-        <result-indices>\n-            0x00000000, 0x00000002, 0x00000001, 0x00000003, 0x00000004, 0x00000005, 0x00000006, 0x00000007, \n-            0x00000008, 0x00000009, 0x0000000A, 0x0000000B, 0x0000000C, 0x0000000D, 0x0000000E, 0x0000000F, \n-            0x00000010, 0x00000011, 0x00000012, 0x00000013, 0x00000014, 0x00000015, 0x00000016, 0x00000017, \n-            0x00000018, 0x00000019, 0x0000001C, 0x0000001D, 0x0000001A, 0x0000001B, 0x0000001E, 0x0000001F, \n-            0x00000021, 0x00000020, 0x00000022, 0x00000023, 0x00000024, 0x00000025, 0x00000026, 0x00000027, \n-            0x00000028, 0x00000029, 0x0000002A, 0x0000002B, 0x0000002C, 0x0000002D, 0x0000002E, 0x0000002F, \n-            0x00000030, 0x00000031, 0x00000033, 0x00000032, 0x00000034, 0x00000035, 0x00000036, 0x00000037, \n-            0x00000038, 0x00000039, 0x0000003A, 0x0000003B, 0x0000003E, 0x0000003C, 0x0000003D, 0x0000003F, \n-            0x00000040, 0x00000041, 0x00000042, 0x00000043, 0x00000045, 0x00000044, 0x00000046, 0x00000047, \n-            0x00000048, 0x00000049, 0x0000004A, 0x0000004B, 0x0000004C, 0x0000004D, 0x0000004E, 0x0000004F, \n-            0x00000050, 0x00000052, 0x00000051, 0x00000053, 0x00000054, 0x00000055, 0x00000056, 0x00000057, \n-            0x00000058, 0x00000059, 0x0000005A, 0x0000005B, 0x0000005C, 0x0000005D, 0x0000005E, 0x0000005F, \n-            0x00000060, 0x00000061, 0x00000062, 0x00000063, 0x00000064, 0x00000065, 0x00000066, 0x00000067, \n-            0x00000068, 0x00000069, 0x0000006A, 0x0000006B, 0x0000006C, 0x0000006D, 0x0000006E, 0x0000006F, \n-            0x00000070, 0x00000071, 0x00000072, 0x00000073, 0x00000074, 0x00000075, 0x00000076, 0x00000077, \n-            0x00000078, 0x00000079, 0x0000007B, 0x0000007A, 0x0000007C, 0x0000007D, 0x0000007E, 0x00000081, \n-            0x0000007F, 0x00000080, 0x00000082, 0x00000083, 0x00000084, 0x00000085, 0x00000086, 0x00000087\n-        <\/result-indices>\n-\n-        <result-positions>\n-            0.000000, 0.000000, 9.468750, 0.000000, 19.130859, -0.451172, 15.984375, 0.000000, \n-            19.640625, 0.000000, 29.109375, 0.000000, 40.177734, -0.451172, 37.078125, 0.000000, \n-            43.078125, 0.000000, 52.546875, 0.000000, 62.015625, 0.000000, 69.984375, 0.000000, \n-            77.953125, 0.000000, 77.953125, 0.000000, 77.953125, 0.000000, 81.609375, 0.000000, \n-            89.578125, 0.000000, 93.234375, 0.000000, 99.234375, 0.000000, 109.171875, 0.000000, \n-            116.437500, 0.000000, 116.437500, 0.000000, 125.906250, 0.000000, 129.562500, 0.000000, \n-            139.031250, 0.000000, 145.031250, 0.000000, 154.968750, 0.000000, 164.718750, -0.011719, \n-            164.718750, 0.263672, 164.437500, 0.000000, 164.437500, 0.000000, 173.906250, 0.000000, \n-            179.906250, 0.000000, 184.265625, 0.000000, 192.234375, 0.000000, 200.203125, 0.000000, \n-            203.859375, 0.000000, 211.828125, 0.000000, 217.828125, 0.000000, 227.296875, 0.000000, \n-            231.375000, 0.000000, 240.843750, 0.000000, 246.843750, 0.000000, 256.740234, -0.011719, \n-            256.312500, 0.000000, 264.281250, 0.000000, 270.796875, 0.000000, 274.453125, 0.000000, \n-            282.796875, 0.000000, 282.796875, 0.000000, 282.796875, 0.000000, 292.458984, -0.451172, \n-            289.312500, 0.000000, 295.312500, 0.000000, 303.281250, 0.000000, 311.250000, 0.000000, \n-            314.906250, 0.000000, 324.890625, -0.011719, 324.375000, 0.000000, 330.375000, 0.000000, \n-            339.843750, 0.000000, 349.675781, 0.263672, 349.312500, 0.000000, 349.312500, 0.000000, \n-            360.187500, 0.000000, 360.187500, 0.000000, 359.384766, 0.275391, 360.187500, 0.000000, \n-            368.156250, 0.000000, 377.818359, -0.451172, 372.996094, 0.263672, 374.671875, 0.000000, \n-            380.671875, 0.000000, 388.371094, -0.011719, 391.546875, 0.000000, 398.062500, 0.000000, \n-            399.421875, 0.000000, 410.296875, 0.000000, 410.296875, 0.000000, 409.494141, 0.275391, \n-            410.296875, 0.000000, 418.265625, 0.000000, 427.927734, -0.451172, 423.105469, 0.263672, \n-            424.781250, 0.000000, 430.781250, 0.000000, 440.250000, 0.000000, 449.718750, 0.000000, \n-            456.832031, 0.263672, 457.687500, 0.000000, 465.656250, 0.000000, 469.312500, 0.000000, \n-            475.312500, 0.000000, 484.921875, -0.011719, 484.781250, 0.000000, 494.390625, -0.011719, \n-            494.250000, 0.000000, 500.179688, 0.000000, 500.179688, 0.000000, 509.648438, 0.000000, \n-            517.617188, 0.000000, 521.976562, 0.000000, 527.976562, 0.000000, 537.445312, 0.000000, \n-            541.101562, 0.000000, 550.570312, 0.000000, 561.445312, 0.000000, 565.101562, 0.000000, \n-            569.460938, 0.000000, 575.460938, 0.000000, 583.429688, 0.000000, 587.085938, 0.000000, \n-            594.351562, 0.000000, 594.351562, 0.000000, 602.320312, 0.000000, 610.289062, 0.000000, \n-            613.945312, 0.000000, 624.820312, 0.000000, 624.820312, 0.000000, 624.691406, 0.263672, \n-            624.820312, 0.000000, 632.789062, 0.000000, 638.789062, 0.000000, 643.148438, 0.000000, \n-            654.023438, 0.000000, 663.492188, 0.000000, 671.191406, -0.011719, 674.367188, 0.000000, \n-            682.628906, 0.263672, 682.335938, 0.000000, 682.335938, 0.000000, 690.304688, 0.000000, \n-            696.304688, 0.000000, 705.140625, 0.439453, 705.773438, 0.000000, 715.242188, 0.000000, \n-            723.210938, 0.000000\n-        <\/result-positions>\n-    <\/test-case>\n-\n-    <test-case id=\"Arabic\" script=\"arab\">\n-        <test-font name=\"CODE2000.TTF\" version=\"Version 1.171\" checksum=\"0xD025B1AD\" rchecksum=\"0x1F6E6F2A\"\/>\n-\n-        <test-text>                  .   \"\"                   <\/test-text>\n-\n-        <result-glyphs>\n-            0x0000CE28, 0x0000CE87, 0x0000CE41, 0x0000CE81, 0x0000CE42, 0x0000CE54, 0x0000CE73, 0x0000CE21, \n-            0x00000003, 0x0000CE65, 0x0000CE41, 0x0000CE22, 0x0000CE38, 0x0000CE78, 0x0000CE73, 0x0000CE21, \n-            0x00000003, 0x0000CE5E, 0x0000CE88, 0x0000CE78, 0x0000CE33, 0x00000003, 0x0000CE84, 0x0000CE74, \n-            0x0000CE5F, 0x00000003, 0x0000CE85, 0x0000CE82, 0x0000CE2C, 0x0000CE38, 0x0000CE87, 0x00000003, \n-            0x0000CE3E, 0x0000CE37, 0x0000CE21, 0x0000CE81, 0x00000003, 0x0000CE42, 0x0000CE88, 0x0000CE68, \n-            0x0000CE4C, 0x0000CE2B, 0x00000003, 0x0000CE75, 0x0000CE22, 0x0000CE5C, 0x0000CE7B, 0x00000003, \n-            0x0000CE3E, 0x0000CE33, 0x0000CE82, 0x0000CE87, 0x00000003, 0x0000CE76, 0x0000CE73, 0x0000CE81, \n-            0x00000003, 0x00000588, 0x0000CE65, 0x0000CE41, 0x0000CE22, 0x0000CE38, 0x0000CE78, 0x0000CE74, \n-            0x0000CE73, 0x00000003, 0x0000CE75, 0x0000CE22, 0x0000CE6B, 0x0000CE41, 0x0000FFFE, 0x0000CE8B, \n-            0x0000CE21, 0x00000003, 0x0000CE7D, 0x0000CE40, 0x0000CE7F, 0x00000003, 0x0000CE4E, 0x0000CE88, \n-            0x0000CE50, 0x0000CE3C, 0x0000CE2B, 0x0000CE81, 0x00000003, 0x0000CE42, 0x0000CE88, 0x0000CE68, \n-            0x0000CE4C, 0x0000CE2C, 0x0000CE74, 0x0000CE73, 0x00000003, 0x0000CE28, 0x0000CE78, 0x0000CE5C, \n-            0x0000CE7B, 0x0000FFFE, 0x0000CE8B, 0x0000CE21, 0x00000003, 0x0000CE29, 0x0000CE22, 0x0000CE20, \n-            0x0000CE77, 0x00000003, 0x0000CE6D, 0x0000CE22, 0x0000CE7C, 0x0000CE7F, 0x00000003, 0x0000CE79, \n-            0x0000CE22, 0x0000CE6F, 0x00000003, 0x00000588, 0x00000005, 0x0000CE3D, 0x0000CE82, 0x0000CE70, \n-            0x000005B5, 0x0000CE7B, 0x0000CE82, 0x0000CE87, 0x00000005, 0x00000003, 0x0000CE5D, 0x0000CE21, \n-            0x0000CE42, 0x0000CE2C, 0x0000CE3B, 0x0000CE21, 0x00000003, 0x0000CE72, 0x0000CE26, 0x0000CE6B, \n-            0x0000CE81, 0x00000003, 0x00000011, 0x0000CE22, 0x0000CE80, 0x0000CE7C, 0x0000CE77, 0x00000003, \n-            0x0000CE3E, 0x0000CE37, 0x0000CE21, 0x0000CE81, 0x00000003, 0x0000CE72, 0x0000CE70, 0x0000CE73, \n-            0x00000003, 0x0000CE22, 0x0000CE7C, 0x0000CE88, 0x0000CE60, 0x0000CE77, 0x00000003, 0x0000CE22, \n-            0x0000CE78, 0x0000CE6B, 0x0000CE41, 0x00000003, 0x0000CE86, 0x0000CE58, 0x0000CE60, 0x000005B4, \n-            0x0000CE2B, 0x00000003, 0x0000CE79, 0x0000CE17, 0x00000003, 0x0000CE3E, 0x0000CE60, 0x0000CE25, \n-            0x00000003, 0x0000CE83, 0x0000CE42, 0x0000CE3B, 0x0000FFFE, 0x0000CE8B, 0x0000CE21, 0x00000003, \n-            0x0000CE65, 0x0000CE41, 0x0000CE22, 0x0000CE38, 0x0000CE78, 0x0000CE73, 0x0000CE21, 0x0000CE81, \n-            0x00000003, 0x0000CE65, 0x0000CE42, 0x0000CE37, 0x0000FFFE, 0x0000CE8B, 0x0000CE21, 0x00000003, \n-            0x0000CE7A, 0x0000CE87, 0x0000CE44, 0x0000CE3C, 0x0000CE2C, 0x0000CE25, 0x00000003, 0x0000CE75, \n-            0x0000CE82, 0x0000CE6C, 0x0000CE2B, 0x0000CE81, 0x00000003, 0x00000588, 0x0000CE75, 0x0000CE22, \n-            0x0000CE6B, 0x0000CE41, 0x0000FFFE, 0x0000CE8B, 0x0000CE21, 0x00000003, 0x0000CE5E, 0x0000CE77, \n-            0x00000003, 0x0000CE56, 0x0000CE6C, 0x0000CE67, 0x00000003, 0x0000CE24, 0x0000CE88, 0x0000CE47, \n-            0x0000CE21, 0x0000CE82, 0x0000CE38, 0x0000CE73, 0x0000CE21, 0x00000003, 0x0000CE72, 0x0000CE77, \n-            0x0000CE22, 0x0000CE60, 0x0000CE2C, 0x0000CE2B, 0x00000003, 0x00000588, 0x0000CE22, 0x000005B0, \n-            0x0000CE47, 0x0000CE22, 0x0000CE47, 0x0000CE17\n-        <\/result-glyphs>\n-\n-        <result-indices>\n-            0x000000FB, 0x000000FA, 0x000000F9, 0x000000F8, 0x000000F7, 0x000000F6, 0x000000F5, 0x000000F4, \n-            0x000000F3, 0x000000F2, 0x000000F1, 0x000000F0, 0x000000EF, 0x000000EE, 0x000000ED, 0x000000EC, \n-            0x000000EB, 0x000000EA, 0x000000E9, 0x000000E8, 0x000000E7, 0x000000E6, 0x000000E5, 0x000000E4, \n-            0x000000E3, 0x000000E2, 0x000000E1, 0x000000E0, 0x000000DF, 0x000000DE, 0x000000DD, 0x000000DC, \n-            0x000000DB, 0x000000DA, 0x000000D9, 0x000000D8, 0x000000D7, 0x000000D6, 0x000000D5, 0x000000D4, \n-            0x000000D3, 0x000000D2, 0x000000D1, 0x000000D0, 0x000000CF, 0x000000CE, 0x000000CD, 0x000000CC, \n-            0x000000CB, 0x000000CA, 0x000000C9, 0x000000C8, 0x000000C7, 0x000000C6, 0x000000C5, 0x000000C4, \n-            0x000000C3, 0x000000C2, 0x000000C1, 0x000000C0, 0x000000BF, 0x000000BE, 0x000000BD, 0x000000BC, \n-            0x000000BB, 0x000000BA, 0x000000B9, 0x000000B8, 0x000000B7, 0x000000B6, 0x000000B5, 0x000000B4, \n-            0x000000B3, 0x000000B2, 0x000000B1, 0x000000B0, 0x000000AF, 0x000000AE, 0x000000AD, 0x000000AC, \n-            0x000000AB, 0x000000AA, 0x000000A9, 0x000000A8, 0x000000A7, 0x000000A6, 0x000000A5, 0x000000A4, \n-            0x000000A3, 0x000000A2, 0x000000A1, 0x000000A0, 0x0000009F, 0x0000009E, 0x0000009D, 0x0000009C, \n-            0x0000009B, 0x0000009A, 0x00000099, 0x00000098, 0x00000097, 0x00000096, 0x00000095, 0x00000094, \n-            0x00000093, 0x00000092, 0x00000091, 0x00000090, 0x0000008F, 0x0000008E, 0x0000008D, 0x0000008C, \n-            0x0000008B, 0x0000008A, 0x00000089, 0x00000088, 0x00000087, 0x00000086, 0x00000085, 0x00000084, \n-            0x00000083, 0x00000082, 0x00000081, 0x00000080, 0x0000007F, 0x0000007E, 0x0000007D, 0x0000007C, \n-            0x0000007B, 0x0000007A, 0x00000079, 0x00000078, 0x00000077, 0x00000076, 0x00000075, 0x00000074, \n-            0x00000073, 0x00000072, 0x00000071, 0x00000070, 0x0000006F, 0x0000006E, 0x0000006D, 0x0000006C, \n-            0x0000006B, 0x0000006A, 0x00000069, 0x00000068, 0x00000067, 0x00000066, 0x00000065, 0x00000064, \n-            0x00000063, 0x00000062, 0x00000061, 0x00000060, 0x0000005F, 0x0000005E, 0x0000005D, 0x0000005C, \n-            0x0000005B, 0x0000005A, 0x00000059, 0x00000058, 0x00000057, 0x00000056, 0x00000055, 0x00000054, \n-            0x00000053, 0x00000052, 0x00000051, 0x00000050, 0x0000004F, 0x0000004E, 0x0000004D, 0x0000004C, \n-            0x0000004B, 0x0000004A, 0x00000049, 0x00000048, 0x00000047, 0x00000046, 0x00000045, 0x00000044, \n-            0x00000043, 0x00000042, 0x00000041, 0x00000040, 0x0000003F, 0x0000003E, 0x0000003D, 0x0000003C, \n-            0x0000003B, 0x0000003A, 0x00000039, 0x00000038, 0x00000037, 0x00000036, 0x00000035, 0x00000034, \n-            0x00000033, 0x00000032, 0x00000031, 0x00000030, 0x0000002F, 0x0000002E, 0x0000002D, 0x0000002C, \n-            0x0000002B, 0x0000002A, 0x00000029, 0x00000028, 0x00000027, 0x00000026, 0x00000025, 0x00000024, \n-            0x00000023, 0x00000022, 0x00000021, 0x00000020, 0x0000001F, 0x0000001E, 0x0000001D, 0x0000001C, \n-            0x0000001B, 0x0000001A, 0x00000019, 0x00000018, 0x00000017, 0x00000016, 0x00000015, 0x00000014, \n-            0x00000013, 0x00000012, 0x00000011, 0x00000010, 0x0000000F, 0x0000000E, 0x0000000D, 0x0000000C, \n-            0x0000000B, 0x0000000A, 0x00000009, 0x00000008, 0x00000007, 0x00000006, 0x00000005, 0x00000004, \n-            0x00000003, 0x00000002, 0x00000001, 0x00000000\n-        <\/result-indices>\n-\n-        <result-positions>\n-            0.000000, 0.000000, 4.007812, 0.000000, 8.226562, 0.000000, 12.679688, 0.000000, \n-            18.679688, 0.000000, 23.132812, 0.000000, 31.289062, 0.000000, 34.312500, 0.000000, \n-            36.375000, 0.000000, 41.062500, 0.000000, 50.296875, 0.000000, 54.750000, 0.000000, \n-            56.859375, 0.000000, 62.367188, 0.000000, 66.632812, 0.000000, 69.656250, 0.000000, \n-            71.718750, 0.000000, 76.406250, 0.000000, 81.421875, 0.000000, 85.664062, 0.000000, \n-            89.929688, 0.000000, 95.742188, 0.000000, 100.429688, 0.000000, 108.796875, 0.000000, \n-            112.171875, 0.000000, 115.734375, 0.000000, 120.421875, 0.000000, 128.765625, 0.000000, \n-            134.765625, 0.000000, 139.007812, 0.000000, 144.515625, 0.000000, 148.734375, 0.000000, \n-            153.421875, 0.000000, 157.359375, 0.000000, 163.171875, 0.000000, 165.234375, 0.000000, \n-            171.234375, 0.000000, 175.921875, 0.000000, 180.375000, 0.000000, 184.617188, 0.000000, \n-            188.085938, 0.000000, 195.117188, 0.000000, 199.312500, 0.000000, 204.000000, 0.000000, \n-            208.007812, 0.000000, 210.117188, 0.000000, 217.054688, 0.000000, 220.429688, 0.000000, \n-            225.117188, 0.000000, 229.054688, 0.000000, 234.867188, 0.000000, 240.867188, 0.000000, \n-            245.085938, 0.000000, 249.773438, 0.000000, 253.781250, 0.000000, 256.804688, 0.000000, \n-            262.804688, 0.000000, 267.492188, 0.000000, 271.007812, 0.000000, 280.242188, 0.000000, \n-            284.695312, 0.000000, 286.804688, 0.000000, 292.312500, 0.000000, 296.578125, 0.000000, \n-            299.953125, 0.000000, 302.976562, 0.000000, 307.664062, 0.000000, 311.671875, 0.000000, \n-            313.781250, 0.000000, 317.882812, 0.000000, 322.335938, 0.000000, 322.335938, 0.000000, \n-            328.500000, 0.000000, 330.562500, 0.000000, 335.250000, 0.000000, 339.140625, 0.000000, \n-            343.078125, 0.000000, 348.984375, 0.000000, 353.671875, 0.000000, 366.445312, 0.000000, \n-            370.687500, 0.000000, 378.843750, 0.000000, 384.351562, 0.000000, 388.546875, 0.000000, \n-            394.546875, 0.000000, 399.234375, 0.000000, 403.687500, 0.000000, 407.929688, 0.000000, \n-            411.398438, 0.000000, 418.429688, 0.000000, 422.671875, 0.000000, 426.046875, 0.000000, \n-            429.070312, 0.000000, 433.757812, 0.000000, 437.765625, 0.000000, 442.031250, 0.000000, \n-            448.968750, 0.000000, 452.343750, 0.000000, 452.343750, 0.000000, 458.507812, 0.000000, \n-            460.570312, 0.000000, 465.257812, 0.000000, 474.492188, 0.000000, 476.601562, 0.000000, \n-            480.843750, 0.000000, 485.109375, 0.000000, 489.796875, 0.000000, 497.437500, 0.000000, \n-            499.546875, 0.000000, 503.765625, 0.000000, 509.671875, 0.000000, 514.359375, 0.000000, \n-            521.671875, 0.000000, 523.781250, 0.000000, 529.453125, 0.000000, 534.140625, 0.000000, \n-            537.656250, 0.000000, 543.046875, 0.000000, 546.585938, 0.000000, 552.585938, 0.000000, \n-            560.367188, 0.000000, 560.367188, 0.000000, 563.742188, 0.000000, 569.742188, 0.000000, \n-            573.960938, 0.000000, 579.351562, 0.000000, 584.039062, 0.000000, 589.851562, 0.000000, \n-            591.914062, 0.000000, 596.367188, 0.000000, 600.609375, 0.000000, 606.421875, 0.000000, \n-            608.484375, 0.000000, 613.171875, 0.000000, 619.570312, 0.000000, 623.812500, 0.000000, \n-            627.914062, 0.000000, 633.914062, 0.000000, 638.601562, 0.000000, 641.929688, 0.000000, \n-            644.039062, 0.000000, 647.789062, 0.000000, 652.007812, 0.000000, 656.273438, 0.000000, \n-            660.960938, 0.000000, 664.898438, 0.000000, 670.710938, 0.000000, 672.773438, 0.000000, \n-            678.773438, 0.000000, 683.460938, 0.000000, 689.859375, 0.000000, 697.640625, 0.000000, \n-            700.664062, 0.000000, 705.351562, 0.000000, 707.460938, 0.000000, 711.679688, 0.000000, \n-            715.921875, 0.000000, 719.390625, 0.000000, 723.656250, 0.000000, 728.343750, 0.000000, \n-            730.453125, 0.000000, 734.718750, 0.000000, 738.820312, 0.000000, 743.273438, 0.000000, \n-            747.960938, 0.000000, 756.328125, 0.000000, 763.265625, 0.000000, 766.734375, 0.000000, \n-            766.734375, 0.000000, 770.929688, 0.000000, 775.617188, 0.000000, 782.929688, 0.000000, \n-            785.273438, 0.000000, 789.960938, 0.000000, 793.898438, 0.000000, 797.367188, 0.000000, \n-            800.812500, 0.000000, 805.500000, 0.000000, 813.843750, 0.000000, 818.296875, 0.000000, \n-            824.109375, 0.000000, 824.109375, 0.000000, 830.273438, 0.000000, 832.335938, 0.000000, \n-            837.023438, 0.000000, 846.257812, 0.000000, 850.710938, 0.000000, 852.820312, 0.000000, \n-            858.328125, 0.000000, 862.593750, 0.000000, 865.617188, 0.000000, 867.679688, 0.000000, \n-            873.679688, 0.000000, 878.367188, 0.000000, 887.601562, 0.000000, 892.054688, 0.000000, \n-            897.867188, 0.000000, 897.867188, 0.000000, 904.031250, 0.000000, 906.093750, 0.000000, \n-            910.781250, 0.000000, 918.257812, 0.000000, 922.476562, 0.000000, 926.929688, 0.000000, \n-            932.437500, 0.000000, 936.679688, 0.000000, 940.125000, 0.000000, 944.812500, 0.000000, \n-            948.820312, 0.000000, 954.820312, 0.000000, 958.289062, 0.000000, 962.484375, 0.000000, \n-            968.484375, 0.000000, 973.171875, 0.000000, 976.687500, 0.000000, 980.695312, 0.000000, \n-            982.804688, 0.000000, 986.906250, 0.000000, 991.359375, 0.000000, 991.359375, 0.000000, \n-            997.523438, 0.000000, 999.585938, 0.000000, 1004.273438, 0.000000, 1009.289062, 0.000000, \n-            1013.554688, 0.000000, 1018.242188, 0.000000, 1026.187500, 0.000000, 1029.656250, 0.000000, \n-            1033.757812, 0.000000, 1038.445312, 0.000000, 1047.796875, 0.000000, 1052.039062, 0.000000, \n-            1058.859375, 0.000000, 1060.921875, 0.000000, 1066.921875, 0.000000, 1072.429688, 0.000000, \n-            1075.453125, 0.000000, 1077.515625, 0.000000, 1082.203125, 0.000000, 1088.601562, 0.000000, \n-            1092.867188, 0.000000, 1094.976562, 0.000000, 1098.445312, 0.000000, 1102.687500, 0.000000, \n-            1106.882812, 0.000000, 1111.570312, 0.000000, 1115.085938, 0.000000, 1117.195312, 0.000000, \n-            1117.195312, 0.000000, 1124.015625, 0.000000, 1126.125000, 0.000000, 1132.945312, 0.000000, \n-            1135.289062, 0.000000\n-        <\/result-positions>\n-    <\/test-case>\n-\n-    <test-case id=\"Unicode Arabic\" script=\"arab\">\n-        <test-font name=\"LucidaSansRegular.ttf\" version=\"Version 1.20 - October 2000\" checksum=\"0xF5D9BA6D\" rchecksum=\"0x029B644F\"\/>\n-\n-        <test-text>                  .   \"\"                   <\/test-text>\n-\n-        <result-glyphs>\n-            0x00000872, 0x000008D1, 0x000003F9, 0x0000040B, 0x0000088C, 0x0000089E, 0x000008BD, 0x000003EF, \n-            0x00000003, 0x00000404, 0x000003F9, 0x0000086C, 0x00000882, 0x000008C2, 0x000008BD, 0x000003EF, \n-            0x00000003, 0x000008A8, 0x000008D2, 0x000008C2, 0x0000087D, 0x00000003, 0x000008CE, 0x000008BE, \n-            0x000008A9, 0x00000003, 0x0000040D, 0x000008CC, 0x00000876, 0x00000882, 0x000008D1, 0x00000003, \n-            0x00000888, 0x00000881, 0x000003EF, 0x0000040B, 0x00000003, 0x0000088C, 0x000008D2, 0x000008B2, \n-            0x00000896, 0x00000875, 0x00000003, 0x00000408, 0x0000086C, 0x000008A6, 0x000008C5, 0x00000003, \n-            0x00000888, 0x0000087D, 0x000008CC, 0x000008D1, 0x00000003, 0x000008C0, 0x000008BD, 0x0000040B, \n-            0x00000003, 0x000003E6, 0x00000404, 0x000003F9, 0x0000086C, 0x00000882, 0x000008C2, 0x000008BE, \n-            0x000008BD, 0x00000003, 0x00000408, 0x0000086C, 0x000008B5, 0x000003F9, 0x0000FFFF, 0x000008D5, \n-            0x000003EF, 0x00000003, 0x0000040A, 0x0000088A, 0x000008C9, 0x00000003, 0x00000898, 0x000008D2, \n-            0x0000089A, 0x00000886, 0x00000875, 0x0000040B, 0x00000003, 0x0000088C, 0x000008D2, 0x000008B2, \n-            0x00000896, 0x00000876, 0x000008BE, 0x000008BD, 0x00000003, 0x00000872, 0x000008C2, 0x000008A6, \n-            0x000008C5, 0x0000FFFF, 0x000008D5, 0x000003EF, 0x00000003, 0x000003F2, 0x0000086C, 0x0000086A, \n-            0x000008C1, 0x00000003, 0x00000406, 0x0000086C, 0x000008C6, 0x000008C9, 0x00000003, 0x00000409, \n-            0x0000086C, 0x000008B9, 0x00000003, 0x000003E6, 0x00000005, 0x000003F7, 0x000008CC, 0x000008BA, \n-            0x00000413, 0x000008C5, 0x000008CC, 0x000008D1, 0x00000005, 0x00000003, 0x00000401, 0x000003EF, \n-            0x0000088C, 0x00000876, 0x00000885, 0x000003EF, 0x00000003, 0x000008BC, 0x00000870, 0x000008B5, \n-            0x0000040B, 0x00000003, 0x00000011, 0x0000086C, 0x000008CA, 0x000008C6, 0x000008C1, 0x00000003, \n-            0x00000888, 0x00000881, 0x000003EF, 0x0000040B, 0x00000003, 0x000008BC, 0x000008BA, 0x000008BD, \n-            0x00000003, 0x0000086C, 0x000008C6, 0x000008D2, 0x000008AA, 0x000008C1, 0x00000003, 0x0000086C, \n-            0x000008C2, 0x000008B5, 0x000003F9, 0x00000003, 0x000008D0, 0x000008A2, 0x000008AA, 0x00000412, \n-            0x00000875, 0x00000003, 0x00000409, 0x000003EB, 0x00000003, 0x00000888, 0x000008AA, 0x0000086F, \n-            0x00000003, 0x0000040C, 0x0000088C, 0x00000885, 0x0000FFFF, 0x000008D5, 0x000003EF, 0x00000003, \n-            0x00000404, 0x000003F9, 0x0000086C, 0x00000882, 0x000008C2, 0x000008BD, 0x000003EF, 0x0000040B, \n-            0x00000003, 0x00000404, 0x0000088C, 0x00000881, 0x0000FFFF, 0x000008D5, 0x000003EF, 0x00000003, \n-            0x000008C4, 0x000008D1, 0x0000088E, 0x00000886, 0x00000876, 0x0000086F, 0x00000003, 0x00000408, \n-            0x000008CC, 0x000008B6, 0x00000875, 0x0000040B, 0x00000003, 0x000003E6, 0x00000408, 0x0000086C, \n-            0x000008B5, 0x000003F9, 0x0000FFFF, 0x000008D5, 0x000003EF, 0x00000003, 0x000008A8, 0x000008C1, \n-            0x00000003, 0x000008A0, 0x000008B6, 0x000008B1, 0x00000003, 0x0000086E, 0x000008D2, 0x00000891, \n-            0x000003EF, 0x000008CC, 0x00000882, 0x000008BD, 0x000003EF, 0x00000003, 0x000008BC, 0x000008C1, \n-            0x0000086C, 0x000008AA, 0x00000876, 0x00000875, 0x00000003, 0x000003E6, 0x0000086C, 0x0000040E, \n-            0x00000891, 0x0000086C, 0x00000891, 0x000003EB\n-        <\/result-glyphs>\n-\n-        <result-indices>\n-            0x000000FB, 0x000000FA, 0x000000F9, 0x000000F8, 0x000000F7, 0x000000F6, 0x000000F5, 0x000000F4, \n-            0x000000F3, 0x000000F2, 0x000000F1, 0x000000F0, 0x000000EF, 0x000000EE, 0x000000ED, 0x000000EC, \n-            0x000000EB, 0x000000EA, 0x000000E9, 0x000000E8, 0x000000E7, 0x000000E6, 0x000000E5, 0x000000E4, \n-            0x000000E3, 0x000000E2, 0x000000E1, 0x000000E0, 0x000000DF, 0x000000DE, 0x000000DD, 0x000000DC, \n-            0x000000DB, 0x000000DA, 0x000000D9, 0x000000D8, 0x000000D7, 0x000000D6, 0x000000D5, 0x000000D4, \n-            0x000000D3, 0x000000D2, 0x000000D1, 0x000000D0, 0x000000CF, 0x000000CE, 0x000000CD, 0x000000CC, \n-            0x000000CB, 0x000000CA, 0x000000C9, 0x000000C8, 0x000000C7, 0x000000C6, 0x000000C5, 0x000000C4, \n-            0x000000C3, 0x000000C2, 0x000000C1, 0x000000C0, 0x000000BF, 0x000000BE, 0x000000BD, 0x000000BC, \n-            0x000000BB, 0x000000BA, 0x000000B9, 0x000000B8, 0x000000B7, 0x000000B6, 0x000000B5, 0x000000B4, \n-            0x000000B3, 0x000000B2, 0x000000B1, 0x000000B0, 0x000000AF, 0x000000AE, 0x000000AD, 0x000000AC, \n-            0x000000AB, 0x000000AA, 0x000000A9, 0x000000A8, 0x000000A7, 0x000000A6, 0x000000A5, 0x000000A4, \n-            0x000000A3, 0x000000A2, 0x000000A1, 0x000000A0, 0x0000009F, 0x0000009E, 0x0000009D, 0x0000009C, \n-            0x0000009B, 0x0000009A, 0x00000099, 0x00000098, 0x00000097, 0x00000096, 0x00000095, 0x00000094, \n-            0x00000093, 0x00000092, 0x00000091, 0x00000090, 0x0000008F, 0x0000008E, 0x0000008D, 0x0000008C, \n-            0x0000008B, 0x0000008A, 0x00000089, 0x00000088, 0x00000087, 0x00000086, 0x00000085, 0x00000084, \n-            0x00000083, 0x00000082, 0x00000081, 0x00000080, 0x0000007F, 0x0000007E, 0x0000007D, 0x0000007C, \n-            0x0000007B, 0x0000007A, 0x00000079, 0x00000078, 0x00000077, 0x00000076, 0x00000075, 0x00000074, \n-            0x00000073, 0x00000072, 0x00000071, 0x00000070, 0x0000006F, 0x0000006E, 0x0000006D, 0x0000006C, \n-            0x0000006B, 0x0000006A, 0x00000069, 0x00000068, 0x00000067, 0x00000066, 0x00000065, 0x00000064, \n-            0x00000063, 0x00000062, 0x00000061, 0x00000060, 0x0000005F, 0x0000005E, 0x0000005D, 0x0000005C, \n-            0x0000005B, 0x0000005A, 0x00000059, 0x00000058, 0x00000057, 0x00000056, 0x00000055, 0x00000054, \n-            0x00000053, 0x00000052, 0x00000051, 0x00000050, 0x0000004F, 0x0000004E, 0x0000004D, 0x0000004C, \n-            0x0000004B, 0x0000004A, 0x00000049, 0x00000048, 0x00000047, 0x00000046, 0x00000045, 0x00000044, \n-            0x00000043, 0x00000042, 0x00000041, 0x00000040, 0x0000003F, 0x0000003E, 0x0000003D, 0x0000003C, \n-            0x0000003B, 0x0000003A, 0x00000039, 0x00000038, 0x00000037, 0x00000036, 0x00000035, 0x00000034, \n-            0x00000033, 0x00000032, 0x00000031, 0x00000030, 0x0000002F, 0x0000002E, 0x0000002D, 0x0000002C, \n-            0x0000002B, 0x0000002A, 0x00000029, 0x00000028, 0x00000027, 0x00000026, 0x00000025, 0x00000024, \n-            0x00000023, 0x00000022, 0x00000021, 0x00000020, 0x0000001F, 0x0000001E, 0x0000001D, 0x0000001C, \n-            0x0000001B, 0x0000001A, 0x00000019, 0x00000018, 0x00000017, 0x00000016, 0x00000015, 0x00000014, \n-            0x00000013, 0x00000012, 0x00000011, 0x00000010, 0x0000000F, 0x0000000E, 0x0000000D, 0x0000000C, \n-            0x0000000B, 0x0000000A, 0x00000009, 0x00000008, 0x00000007, 0x00000006, 0x00000005, 0x00000004, \n-            0x00000003, 0x00000002, 0x00000001, 0x00000000\n-        <\/result-indices>\n-\n-        <result-positions>\n-            0.000000, 0.000000, 6.316406, 0.000000, 10.382812, 0.000000, 15.492188, 0.000000, \n-            21.035156, 0.000000, 27.058594, 0.000000, 39.527344, 0.000000, 43.792969, 0.000000, \n-            47.408203, 0.000000, 51.205078, 0.000000, 66.216797, 0.000000, 71.326172, 0.000000, \n-            74.695312, 0.000000, 83.367188, 0.000000, 90.826172, 0.000000, 95.091797, 0.000000, \n-            98.707031, 0.000000, 102.503906, 0.000000, 109.962891, 0.000000, 114.949219, 0.000000, \n-            122.408203, 0.000000, 130.687500, 0.000000, 134.484375, 0.000000, 145.787109, 0.000000, \n-            150.773438, 0.000000, 156.884766, 0.000000, 160.681641, 0.000000, 172.277344, 0.000000, \n-            177.919922, 0.000000, 182.906250, 0.000000, 191.578125, 0.000000, 195.644531, 0.000000, \n-            199.441406, 0.000000, 206.507812, 0.000000, 214.787109, 0.000000, 218.402344, 0.000000, \n-            223.945312, 0.000000, 227.742188, 0.000000, 233.765625, 0.000000, 238.751953, 0.000000, \n-            245.185547, 0.000000, 257.982422, 0.000000, 262.048828, 0.000000, 265.845703, 0.000000, \n-            272.654297, 0.000000, 276.023438, 0.000000, 285.240234, 0.000000, 289.306641, 0.000000, \n-            293.103516, 0.000000, 300.169922, 0.000000, 308.449219, 0.000000, 314.091797, 0.000000, \n-            318.158203, 0.000000, 321.955078, 0.000000, 329.572266, 0.000000, 333.837891, 0.000000, \n-            339.380859, 0.000000, 343.177734, 0.000000, 346.974609, 0.000000, 361.986328, 0.000000, \n-            367.095703, 0.000000, 370.464844, 0.000000, 379.136719, 0.000000, 386.595703, 0.000000, \n-            391.582031, 0.000000, 395.847656, 0.000000, 399.644531, 0.000000, 406.453125, 0.000000, \n-            409.822266, 0.000000, 415.523438, 0.000000, 420.632812, 0.000000, 420.632812, 0.000000, \n-            427.441406, 0.000000, 431.056641, 0.000000, 434.853516, 0.000000, 441.357422, 0.000000, \n-            448.423828, 0.000000, 455.912109, 0.000000, 459.708984, 0.000000, 479.255859, 0.000000, \n-            484.242188, 0.000000, 496.710938, 0.000000, 505.382812, 0.000000, 509.449219, 0.000000, \n-            514.992188, 0.000000, 518.789062, 0.000000, 524.812500, 0.000000, 529.798828, 0.000000, \n-            536.232422, 0.000000, 549.029297, 0.000000, 554.015625, 0.000000, 559.001953, 0.000000, \n-            563.267578, 0.000000, 567.064453, 0.000000, 573.380859, 0.000000, 580.839844, 0.000000, \n-            590.056641, 0.000000, 594.123047, 0.000000, 594.123047, 0.000000, 600.931641, 0.000000, \n-            604.546875, 0.000000, 608.343750, 0.000000, 620.636719, 0.000000, 624.005859, 0.000000, \n-            628.992188, 0.000000, 635.830078, 0.000000, 639.626953, 0.000000, 653.361328, 0.000000, \n-            656.730469, 0.000000, 661.716797, 0.000000, 669.205078, 0.000000, 673.001953, 0.000000, \n-            683.777344, 0.000000, 687.146484, 0.000000, 692.660156, 0.000000, 696.457031, 0.000000, \n-            700.253906, 0.000000, 704.736328, 0.000000, 711.105469, 0.000000, 716.748047, 0.000000, \n-            722.994141, 0.000000, 722.994141, 0.000000, 727.060547, 0.000000, 732.703125, 0.000000, \n-            736.769531, 0.000000, 741.251953, 0.000000, 745.048828, 0.000000, 752.507812, 0.000000, \n-            756.123047, 0.000000, 762.146484, 0.000000, 767.132812, 0.000000, 775.412109, 0.000000, \n-            779.027344, 0.000000, 782.824219, 0.000000, 794.203125, 0.000000, 799.189453, 0.000000, \n-            804.890625, 0.000000, 810.433594, 0.000000, 814.230469, 0.000000, 818.027344, 0.000000, \n-            821.396484, 0.000000, 828.128906, 0.000000, 833.115234, 0.000000, 839.953125, 0.000000, \n-            843.750000, 0.000000, 850.816406, 0.000000, 859.095703, 0.000000, 862.710938, 0.000000, \n-            868.253906, 0.000000, 872.050781, 0.000000, 883.429688, 0.000000, 889.675781, 0.000000, \n-            893.941406, 0.000000, 897.738281, 0.000000, 901.107422, 0.000000, 906.093750, 0.000000, \n-            911.080078, 0.000000, 917.800781, 0.000000, 924.638672, 0.000000, 928.435547, 0.000000, \n-            931.804688, 0.000000, 939.263672, 0.000000, 944.964844, 0.000000, 950.074219, 0.000000, \n-            953.871094, 0.000000, 965.173828, 0.000000, 974.390625, 0.000000, 981.111328, 0.000000, \n-            981.111328, 0.000000, 985.177734, 0.000000, 988.974609, 0.000000, 999.750000, 0.000000, \n-            1003.365234, 0.000000, 1007.162109, 0.000000, 1014.228516, 0.000000, 1020.949219, 0.000000, \n-            1025.015625, 0.000000, 1028.812500, 0.000000, 1040.408203, 0.000000, 1046.431641, 0.000000, \n-            1054.710938, 0.000000, 1054.710938, 0.000000, 1061.519531, 0.000000, 1065.134766, 0.000000, \n-            1068.931641, 0.000000, 1083.943359, 0.000000, 1089.052734, 0.000000, 1092.421875, 0.000000, \n-            1101.093750, 0.000000, 1108.552734, 0.000000, 1112.818359, 0.000000, 1116.433594, 0.000000, \n-            1121.976562, 0.000000, 1125.773438, 0.000000, 1140.785156, 0.000000, 1146.808594, 0.000000, \n-            1155.087891, 0.000000, 1155.087891, 0.000000, 1161.896484, 0.000000, 1165.511719, 0.000000, \n-            1169.308594, 0.000000, 1180.541016, 0.000000, 1184.607422, 0.000000, 1190.630859, 0.000000, \n-            1199.302734, 0.000000, 1204.289062, 0.000000, 1208.355469, 0.000000, 1212.152344, 0.000000, \n-            1218.960938, 0.000000, 1224.603516, 0.000000, 1231.037109, 0.000000, 1235.103516, 0.000000, \n-            1240.646484, 0.000000, 1244.443359, 0.000000, 1248.240234, 0.000000, 1255.048828, 0.000000, \n-            1258.417969, 0.000000, 1264.119141, 0.000000, 1269.228516, 0.000000, 1269.228516, 0.000000, \n-            1276.037109, 0.000000, 1279.652344, 0.000000, 1283.449219, 0.000000, 1290.908203, 0.000000, \n-            1297.746094, 0.000000, 1301.542969, 0.000000, 1311.427734, 0.000000, 1317.861328, 0.000000, \n-            1323.562500, 0.000000, 1327.359375, 0.000000, 1341.492188, 0.000000, 1346.478516, 0.000000, \n-            1357.904297, 0.000000, 1361.519531, 0.000000, 1367.162109, 0.000000, 1375.833984, 0.000000, \n-            1380.099609, 0.000000, 1383.714844, 0.000000, 1387.511719, 0.000000, 1398.890625, 0.000000, \n-            1405.728516, 0.000000, 1409.097656, 0.000000, 1415.818359, 0.000000, 1420.804688, 0.000000, \n-            1424.871094, 0.000000, 1428.667969, 0.000000, 1432.464844, 0.000000, 1435.833984, 0.000000, \n-            1435.833984, 0.000000, 1447.259766, 0.000000, 1450.628906, 0.000000, 1462.054688, 0.000000, \n-            1465.669922, 0.000000\n-        <\/result-positions>\n-    <\/test-case>\n-\n-    <test-case id=\"Thai\" script=\"thai\">\n-        <test-font name=\"angsd___.ttf\" version=\"Version 2.1 - July 1995\" checksum=\"0x49B67200\" rchecksum=\"0x003C2EE9\"\/>\n-\n-        <test-text><\/test-text>\n-\n-        <result-glyphs>\n-            0x000000F3, 0x000000F0, 0x000000F0, 0x0000010E, 0x0000011D, 0x00000126, 0x000000F7, 0x0000010B, \n-            0x000000FB, 0x00000111, 0x00000119, 0x000000E4, 0x00000117, 0x000000DD, 0x000000FE, 0x000000F2, \n-            0x00000117, 0x000000ED, 0x00000117, 0x000000FC, 0x000000F1, 0x0000010E, 0x00000106, 0x0000010B, \n-            0x00000101, 0x0000010A, 0x000000FB, 0x00000106, 0x000000FB, 0x00000112, 0x0000013B, 0x000000F0, \n-            0x0000013B, 0x0000010B, 0x000000FA, 0x000000DA, 0x000000FE, 0x0000010B, 0x000000E0, 0x000000F0, \n-            0x00000111, 0x0000013B, 0x000000E0, 0x00000118, 0x00000104, 0x000000E6, 0x0000013B, 0x00000118, \n-            0x000000F2, 0x00000116, 0x000000DD, 0x000000F2, 0x000000E4, 0x0000010A, 0x00000103, 0x000000DA, \n-            0x0000010A, 0x000000F3, 0x000000FE, 0x00000111, 0x000000E0, 0x00000115, 0x00000107, 0x000000F2, \n-            0x000000FC, 0x0000010E, 0x000000E3, 0x0000010B, 0x00000100, 0x00000119, 0x000000FC, 0x0000013B, \n-            0x00000116, 0x000000FE, 0x00000109, 0x000000F4, 0x00000137, 0x0000010B, 0x00000115, 0x00000106, \n-            0x0000011C, 0x000000FA, 0x000000F9, 0x000000FC, 0x000000FC, 0x000000FB, 0x0000010B, 0x000000E3, \n-            0x0000010B, 0x00000100, 0x00000119, 0x000000FC, 0x0000013B, 0x000000F3, 0x0000013C, 0x0000010B, \n-            0x000000F2, 0x000000DB, 0x00000106, 0x000000E0, 0x000000F7, 0x00000100, 0x000000DA, 0x00000115, \n-            0x000000DB, 0x0000010B, 0x00000104, 0x000000FE, 0x0000010A, 0x000000E0, 0x00000115, 0x000000FE, \n-            0x0000011C, 0x000000DA, 0x00000115, 0x000000F7, 0x000000FC, 0x0000010B, 0x00000109, 0x00000119, \n-            0x000000FA, 0x0000013C, 0x00000103, 0x000000FC, 0x0000013C, 0x0000010B, 0x000000E0, 0x000000F3, \n-            0x0000013C, 0x0000010B, 0x000000F2, 0x000000EE, 0x0000013C, 0x00000106, 0x000000E0, 0x000000DB, \n-            0x000000F2, 0x000000FA, 0x0000010B, 0x000000ED, 0x0000013C, 0x00000100, 0x000000FB, 0x00000115, \n-            0x000000DA, 0x00000100, 0x0000010E, 0x000000FB, 0x000000F2, 0x00000115, 0x000000F4, 0x00000143, \n-            0x000000F2, 0x000000FC, 0x00000109, 0x000000FB, 0x00000109, 0x000000F0, 0x0000010B, 0x000000E0, \n-            0x00000104, 0x000000FE, 0x0000010B, 0x000000FB, 0x00000119, 0x000000FA, 0x000000FE, 0x0000013F\n-        <\/result-glyphs>\n-\n-        <result-indices>\n-            0x00000000, 0x00000001, 0x00000002, 0x00000003, 0x00000004, 0x00000005, 0x00000006, 0x00000007, \n-            0x00000008, 0x00000009, 0x0000000A, 0x0000000B, 0x0000000C, 0x0000000D, 0x0000000E, 0x0000000F, \n-            0x00000010, 0x00000011, 0x00000012, 0x00000013, 0x00000014, 0x00000015, 0x00000016, 0x00000017, \n-            0x00000018, 0x00000019, 0x0000001A, 0x0000001B, 0x0000001C, 0x0000001D, 0x0000001E, 0x0000001F, \n-            0x00000020, 0x00000021, 0x00000022, 0x00000023, 0x00000024, 0x00000025, 0x00000026, 0x00000027, \n-            0x00000028, 0x00000029, 0x0000002A, 0x0000002B, 0x0000002C, 0x0000002D, 0x0000002E, 0x0000002F, \n-            0x00000030, 0x00000031, 0x00000032, 0x00000033, 0x00000034, 0x00000035, 0x00000036, 0x00000037, \n-            0x00000038, 0x00000039, 0x0000003A, 0x0000003B, 0x0000003C, 0x0000003D, 0x0000003E, 0x0000003F, \n-            0x00000040, 0x00000041, 0x00000042, 0x00000043, 0x00000044, 0x00000045, 0x00000046, 0x00000047, \n-            0x00000048, 0x00000049, 0x0000004A, 0x0000004B, 0x0000004C, 0x0000004D, 0x0000004E, 0x0000004F, \n-            0x00000050, 0x00000051, 0x00000052, 0x00000053, 0x00000054, 0x00000055, 0x00000056, 0x00000057, \n-            0x00000058, 0x00000059, 0x0000005A, 0x0000005B, 0x0000005C, 0x0000005D, 0x0000005E, 0x0000005F, \n-            0x00000060, 0x00000061, 0x00000062, 0x00000063, 0x00000064, 0x00000065, 0x00000066, 0x00000067, \n-            0x00000068, 0x00000069, 0x0000006A, 0x0000006B, 0x0000006C, 0x0000006D, 0x0000006E, 0x0000006F, \n-            0x00000070, 0x00000071, 0x00000072, 0x00000073, 0x00000074, 0x00000075, 0x00000076, 0x00000077, \n-            0x00000078, 0x00000079, 0x0000007A, 0x0000007B, 0x0000007C, 0x0000007D, 0x0000007E, 0x0000007F, \n-            0x00000080, 0x00000081, 0x00000082, 0x00000083, 0x00000084, 0x00000085, 0x00000086, 0x00000087, \n-            0x00000088, 0x00000089, 0x0000008A, 0x0000008B, 0x0000008C, 0x0000008D, 0x0000008E, 0x0000008F, \n-            0x00000090, 0x00000091, 0x00000092, 0x00000093, 0x00000094, 0x00000095, 0x00000096, 0x00000097, \n-            0x00000098, 0x00000099, 0x0000009A, 0x0000009B, 0x0000009C, 0x0000009D, 0x0000009E, 0x0000009F, \n-            0x000000A0, 0x000000A1, 0x000000A2, 0x000000A3, 0x000000A4, 0x000000A5, 0x000000A6, 0x000000A7\n-        <\/result-indices>\n-\n-        <result-positions>\n-            0.000000, 0.000000, 5.399414, 0.000000, 10.798828, 0.000000, 16.198242, 0.000000, \n-            16.198242, 0.000000, 16.198242, 0.000000, 21.046875, 0.000000, 26.616211, 0.000000, \n-            30.035156, 0.000000, 34.151367, 0.000000, 34.151367, 0.000000, 38.279297, 0.000000, \n-            43.558594, 0.000000, 47.663086, 0.000000, 52.438477, 0.000000, 57.178711, 0.000000, \n-            62.698242, 0.000000, 66.802734, 0.000000, 71.601562, 0.000000, 75.706055, 0.000000, \n-            79.810547, 0.000000, 84.369141, 0.000000, 84.369141, 0.000000, 89.097656, 0.000000, \n-            92.516602, 0.000000, 97.195312, 0.000000, 97.195312, 0.000000, 101.311523, 0.000000, \n-            106.040039, 0.000000, 110.156250, 0.000000, 110.156250, 0.000000, 110.156250, 0.000000, \n-            115.555664, 0.000000, 115.555664, 0.000000, 118.974609, 0.000000, 124.013672, 0.000000, \n-            128.765625, 0.000000, 133.505859, 0.000000, 136.924805, 0.000000, 140.704102, 0.000000, \n-            146.103516, 0.000000, 146.103516, 0.000000, 146.103516, 0.000000, 149.882812, 0.000000, \n-            153.553711, 0.000000, 159.158203, 0.000000, 165.421875, 0.000000, 165.421875, 0.000000, \n-            169.092773, 0.000000, 174.612305, 0.000000, 179.135742, 0.000000, 183.911133, 0.000000, \n-            189.430664, 0.000000, 194.709961, 0.000000, 194.709961, 0.000000, 199.989258, 0.000000, \n-            204.741211, 0.000000, 204.741211, 0.000000, 210.140625, 0.000000, 214.880859, 0.000000, \n-            214.880859, 0.000000, 218.660156, 0.000000, 220.675781, 0.000000, 225.128906, 0.000000, \n-            230.648438, 0.000000, 234.752930, 0.000000, 234.752930, 0.000000, 239.613281, 0.000000, \n-            243.032227, 0.000000, 247.280273, 0.000000, 251.408203, 0.000000, 255.512695, 0.000000, \n-            255.512695, 0.000000, 260.036133, 0.000000, 264.776367, 0.000000, 269.071289, 0.000000, \n-            274.470703, 0.000000, 274.470703, 0.000000, 277.889648, 0.000000, 279.905273, 0.000000, \n-            284.633789, 0.000000, 284.633789, 0.000000, 289.672852, 0.000000, 294.641602, 0.000000, \n-            298.746094, 0.000000, 302.850586, 0.000000, 306.966797, 0.000000, 310.385742, 0.000000, \n-            315.246094, 0.000000, 318.665039, 0.000000, 322.913086, 0.000000, 327.041016, 0.000000, \n-            331.145508, 0.000000, 331.145508, 0.000000, 336.544922, 0.000000, 336.544922, 0.000000, \n-            339.963867, 0.000000, 345.483398, 0.000000, 350.258789, 0.000000, 354.987305, 0.000000, \n-            358.766602, 0.000000, 364.335938, 0.000000, 368.583984, 0.000000, 373.335938, 0.000000, \n-            375.351562, 0.000000, 380.126953, 0.000000, 383.545898, 0.000000, 389.150391, 0.000000, \n-            393.890625, 0.000000, 393.890625, 0.000000, 397.669922, 0.000000, 399.685547, 0.000000, \n-            404.425781, 0.000000, 404.425781, 0.000000, 409.177734, 0.000000, 411.193359, 0.000000, \n-            416.762695, 0.000000, 420.867188, 0.000000, 424.286133, 0.000000, 428.581055, 0.000000, \n-            432.708984, 0.000000, 437.748047, 0.000000, 437.748047, 0.000000, 443.027344, 0.000000, \n-            447.131836, 0.000000, 447.131836, 0.000000, 450.550781, 0.000000, 454.330078, 0.000000, \n-            459.729492, 0.000000, 459.729492, 0.000000, 463.148438, 0.000000, 468.667969, 0.000000, \n-            473.478516, 0.000000, 473.478516, 0.000000, 478.207031, 0.000000, 481.986328, 0.000000, \n-            486.761719, 0.000000, 492.281250, 0.000000, 497.320312, 0.000000, 500.739258, 0.000000, \n-            505.538086, 0.000000, 505.538086, 0.000000, 509.786133, 0.000000, 513.902344, 0.000000, \n-            515.917969, 0.000000, 520.669922, 0.000000, 524.917969, 0.000000, 524.917969, 0.000000, \n-            529.034180, 0.000000, 534.553711, 0.000000, 536.569336, 0.000000, 541.968750, 0.000000, \n-            541.968750, 0.000000, 547.488281, 0.000000, 551.592773, 0.000000, 555.887695, 0.000000, \n-            560.003906, 0.000000, 564.298828, 0.000000, 569.698242, 0.000000, 573.117188, 0.000000, \n-            576.896484, 0.000000, 582.500977, 0.000000, 587.241211, 0.000000, 590.660156, 0.000000, \n-            594.776367, 0.000000, 598.904297, 0.000000, 603.943359, 0.000000, 608.683594, 0.000000, \n-            608.683594, 0.000000\n-        <\/result-positions>\n-    <\/test-case>\n-\n-    <test-case id=\"Arabic Simple\" script=\"arab\">\n-        <test-font name=\"LucidaSansRegular.ttf\" version=\"Version 1.20 - October 2000\" checksum=\"0xF5D9BA6D\" rchecksum=\"0x029B644F\"\/>\n-\n-        <test-text>                  .   \"\"                   <\/test-text>\n-\n-        <result-glyphs>\n-            0x00000872, 0x000008D1, 0x000003F9, 0x0000040B, 0x0000088C, 0x0000089E, 0x000008BD, 0x000003EF, \n-            0x00000003, 0x00000404, 0x000003F9, 0x0000086C, 0x00000882, 0x000008C2, 0x000008BD, 0x000003EF, \n-            0x00000003, 0x000008A8, 0x000008D2, 0x000008C2, 0x0000087D, 0x00000003, 0x000008CE, 0x000008BE, \n-            0x000008A9, 0x00000003, 0x0000040D, 0x000008CC, 0x00000876, 0x00000882, 0x000008D1, 0x00000003, \n-            0x00000888, 0x00000881, 0x000003EF, 0x0000040B, 0x00000003, 0x0000088C, 0x000008D2, 0x000008B2, \n-            0x00000896, 0x00000875, 0x00000003, 0x00000408, 0x0000086C, 0x000008A6, 0x000008C5, 0x00000003, \n-            0x00000888, 0x0000087D, 0x000008CC, 0x000008D1, 0x00000003, 0x000008C0, 0x000008BD, 0x0000040B, \n-            0x00000003, 0x000003E6, 0x00000404, 0x000003F9, 0x0000086C, 0x00000882, 0x000008C2, 0x000008BE, \n-            0x000008BD, 0x00000003, 0x00000408, 0x0000086C, 0x000008B5, 0x000003F9, 0x0000FFFF, 0x000008D5, \n-            0x000003EF, 0x00000003, 0x0000040A, 0x0000088A, 0x000008C9, 0x00000003, 0x00000898, 0x000008D2, \n-            0x0000089A, 0x00000886, 0x00000875, 0x0000040B, 0x00000003, 0x0000088C, 0x000008D2, 0x000008B2, \n-            0x00000896, 0x00000876, 0x000008BE, 0x000008BD, 0x00000003, 0x00000872, 0x000008C2, 0x000008A6, \n-            0x000008C5, 0x0000FFFF, 0x000008D5, 0x000003EF, 0x00000003, 0x000003F2, 0x0000086C, 0x0000086A, \n-            0x000008C1, 0x00000003, 0x00000406, 0x0000086C, 0x000008C6, 0x000008C9, 0x00000003, 0x00000409, \n-            0x0000086C, 0x000008B9, 0x00000003, 0x000003E6, 0x00000005, 0x000003F7, 0x000008CC, 0x000008BA, \n-            0x00000413, 0x000008C5, 0x000008CC, 0x000008D1, 0x00000005, 0x00000003, 0x00000401, 0x000003EF, \n-            0x0000088C, 0x00000876, 0x00000885, 0x000003EF, 0x00000003, 0x000008BC, 0x00000870, 0x000008B5, \n-            0x0000040B, 0x00000003, 0x00000011, 0x0000086C, 0x000008CA, 0x000008C6, 0x000008C1, 0x00000003, \n-            0x00000888, 0x00000881, 0x000003EF, 0x0000040B, 0x00000003, 0x000008BC, 0x000008BA, 0x000008BD, \n-            0x00000003, 0x0000086C, 0x000008C6, 0x000008D2, 0x000008AA, 0x000008C1, 0x00000003, 0x0000086C, \n-            0x000008C2, 0x000008B5, 0x000003F9, 0x00000003, 0x000008D0, 0x000008A2, 0x000008AA, 0x00000412, \n-            0x00000875, 0x00000003, 0x00000409, 0x000003EB, 0x00000003, 0x00000888, 0x000008AA, 0x0000086F, \n-            0x00000003, 0x0000040C, 0x0000088C, 0x00000885, 0x0000FFFF, 0x000008D5, 0x000003EF, 0x00000003, \n-            0x00000404, 0x000003F9, 0x0000086C, 0x00000882, 0x000008C2, 0x000008BD, 0x000003EF, 0x0000040B, \n-            0x00000003, 0x00000404, 0x0000088C, 0x00000881, 0x0000FFFF, 0x000008D5, 0x000003EF, 0x00000003, \n-            0x000008C4, 0x000008D1, 0x0000088E, 0x00000886, 0x00000876, 0x0000086F, 0x00000003, 0x00000408, \n-            0x000008CC, 0x000008B6, 0x00000875, 0x0000040B, 0x00000003, 0x000003E6, 0x00000408, 0x0000086C, \n-            0x000008B5, 0x000003F9, 0x0000FFFF, 0x000008D5, 0x000003EF, 0x00000003, 0x000008A8, 0x000008C1, \n-            0x00000003, 0x000008A0, 0x000008B6, 0x000008B1, 0x00000003, 0x0000086E, 0x000008D2, 0x00000891, \n-            0x000003EF, 0x000008CC, 0x00000882, 0x000008BD, 0x000003EF, 0x00000003, 0x000008BC, 0x000008C1, \n-            0x0000086C, 0x000008AA, 0x00000876, 0x00000875, 0x00000003, 0x000003E6, 0x0000086C, 0x0000040E, \n-            0x00000891, 0x0000086C, 0x00000891, 0x000003EB\n-        <\/result-glyphs>\n-\n-        <result-indices>\n-            0x000000FB, 0x000000FA, 0x000000F9, 0x000000F8, 0x000000F7, 0x000000F6, 0x000000F5, 0x000000F4, \n-            0x000000F3, 0x000000F2, 0x000000F1, 0x000000F0, 0x000000EF, 0x000000EE, 0x000000ED, 0x000000EC, \n-            0x000000EB, 0x000000EA, 0x000000E9, 0x000000E8, 0x000000E7, 0x000000E6, 0x000000E5, 0x000000E4, \n-            0x000000E3, 0x000000E2, 0x000000E1, 0x000000E0, 0x000000DF, 0x000000DE, 0x000000DD, 0x000000DC, \n-            0x000000DB, 0x000000DA, 0x000000D9, 0x000000D8, 0x000000D7, 0x000000D6, 0x000000D5, 0x000000D4, \n-            0x000000D3, 0x000000D2, 0x000000D1, 0x000000D0, 0x000000CF, 0x000000CE, 0x000000CD, 0x000000CC, \n-            0x000000CB, 0x000000CA, 0x000000C9, 0x000000C8, 0x000000C7, 0x000000C6, 0x000000C5, 0x000000C4, \n-            0x000000C3, 0x000000C2, 0x000000C1, 0x000000C0, 0x000000BF, 0x000000BE, 0x000000BD, 0x000000BC, \n-            0x000000BB, 0x000000BA, 0x000000B9, 0x000000B8, 0x000000B7, 0x000000B6, 0x000000B5, 0x000000B4, \n-            0x000000B3, 0x000000B2, 0x000000B1, 0x000000B0, 0x000000AF, 0x000000AE, 0x000000AD, 0x000000AC, \n-            0x000000AB, 0x000000AA, 0x000000A9, 0x000000A8, 0x000000A7, 0x000000A6, 0x000000A5, 0x000000A4, \n-            0x000000A3, 0x000000A2, 0x000000A1, 0x000000A0, 0x0000009F, 0x0000009E, 0x0000009D, 0x0000009C, \n-            0x0000009B, 0x0000009A, 0x00000099, 0x00000098, 0x00000097, 0x00000096, 0x00000095, 0x00000094, \n-            0x00000093, 0x00000092, 0x00000091, 0x00000090, 0x0000008F, 0x0000008E, 0x0000008D, 0x0000008C, \n-            0x0000008B, 0x0000008A, 0x00000089, 0x00000088, 0x00000087, 0x00000086, 0x00000085, 0x00000084, \n-            0x00000083, 0x00000082, 0x00000081, 0x00000080, 0x0000007F, 0x0000007E, 0x0000007D, 0x0000007C, \n-            0x0000007B, 0x0000007A, 0x00000079, 0x00000078, 0x00000077, 0x00000076, 0x00000075, 0x00000074, \n-            0x00000073, 0x00000072, 0x00000071, 0x00000070, 0x0000006F, 0x0000006E, 0x0000006D, 0x0000006C, \n-            0x0000006B, 0x0000006A, 0x00000069, 0x00000068, 0x00000067, 0x00000066, 0x00000065, 0x00000064, \n-            0x00000063, 0x00000062, 0x00000061, 0x00000060, 0x0000005F, 0x0000005E, 0x0000005D, 0x0000005C, \n-            0x0000005B, 0x0000005A, 0x00000059, 0x00000058, 0x00000057, 0x00000056, 0x00000055, 0x00000054, \n-            0x00000053, 0x00000052, 0x00000051, 0x00000050, 0x0000004F, 0x0000004E, 0x0000004D, 0x0000004C, \n-            0x0000004B, 0x0000004A, 0x00000049, 0x00000048, 0x00000047, 0x00000046, 0x00000045, 0x00000044, \n-            0x00000043, 0x00000042, 0x00000041, 0x00000040, 0x0000003F, 0x0000003E, 0x0000003D, 0x0000003C, \n-            0x0000003B, 0x0000003A, 0x00000039, 0x00000038, 0x00000037, 0x00000036, 0x00000035, 0x00000034, \n-            0x00000033, 0x00000032, 0x00000031, 0x00000030, 0x0000002F, 0x0000002E, 0x0000002D, 0x0000002C, \n-            0x0000002B, 0x0000002A, 0x00000029, 0x00000028, 0x00000027, 0x00000026, 0x00000025, 0x00000024, \n-            0x00000023, 0x00000022, 0x00000021, 0x00000020, 0x0000001F, 0x0000001E, 0x0000001D, 0x0000001C, \n-            0x0000001B, 0x0000001A, 0x00000019, 0x00000018, 0x00000017, 0x00000016, 0x00000015, 0x00000014, \n-            0x00000013, 0x00000012, 0x00000011, 0x00000010, 0x0000000F, 0x0000000E, 0x0000000D, 0x0000000C, \n-            0x0000000B, 0x0000000A, 0x00000009, 0x00000008, 0x00000007, 0x00000006, 0x00000005, 0x00000004, \n-            0x00000003, 0x00000002, 0x00000001, 0x00000000\n-        <\/result-indices>\n-\n-        <result-positions>\n-            0.000000, 0.000000, 6.316406, 0.000000, 10.382812, 0.000000, 15.492188, 0.000000, \n-            21.035156, 0.000000, 27.058594, 0.000000, 39.527344, 0.000000, 43.792969, 0.000000, \n-            47.408203, 0.000000, 51.205078, 0.000000, 66.216797, 0.000000, 71.326172, 0.000000, \n-            74.695312, 0.000000, 83.367188, 0.000000, 90.826172, 0.000000, 95.091797, 0.000000, \n-            98.707031, 0.000000, 102.503906, 0.000000, 109.962891, 0.000000, 114.949219, 0.000000, \n-            122.408203, 0.000000, 130.687500, 0.000000, 134.484375, 0.000000, 145.787109, 0.000000, \n-            150.773438, 0.000000, 156.884766, 0.000000, 160.681641, 0.000000, 172.277344, 0.000000, \n-            177.919922, 0.000000, 182.906250, 0.000000, 191.578125, 0.000000, 195.644531, 0.000000, \n-            199.441406, 0.000000, 206.507812, 0.000000, 214.787109, 0.000000, 218.402344, 0.000000, \n-            223.945312, 0.000000, 227.742188, 0.000000, 233.765625, 0.000000, 238.751953, 0.000000, \n-            245.185547, 0.000000, 257.982422, 0.000000, 262.048828, 0.000000, 265.845703, 0.000000, \n-            272.654297, 0.000000, 276.023438, 0.000000, 285.240234, 0.000000, 289.306641, 0.000000, \n-            293.103516, 0.000000, 300.169922, 0.000000, 308.449219, 0.000000, 314.091797, 0.000000, \n-            318.158203, 0.000000, 321.955078, 0.000000, 329.572266, 0.000000, 333.837891, 0.000000, \n-            339.380859, 0.000000, 343.177734, 0.000000, 346.974609, 0.000000, 361.986328, 0.000000, \n-            367.095703, 0.000000, 370.464844, 0.000000, 379.136719, 0.000000, 386.595703, 0.000000, \n-            391.582031, 0.000000, 395.847656, 0.000000, 399.644531, 0.000000, 406.453125, 0.000000, \n-            409.822266, 0.000000, 415.523438, 0.000000, 420.632812, 0.000000, 420.632812, 0.000000, \n-            427.441406, 0.000000, 431.056641, 0.000000, 434.853516, 0.000000, 441.357422, 0.000000, \n-            448.423828, 0.000000, 455.912109, 0.000000, 459.708984, 0.000000, 479.255859, 0.000000, \n-            484.242188, 0.000000, 496.710938, 0.000000, 505.382812, 0.000000, 509.449219, 0.000000, \n-            514.992188, 0.000000, 518.789062, 0.000000, 524.812500, 0.000000, 529.798828, 0.000000, \n-            536.232422, 0.000000, 549.029297, 0.000000, 554.015625, 0.000000, 559.001953, 0.000000, \n-            563.267578, 0.000000, 567.064453, 0.000000, 573.380859, 0.000000, 580.839844, 0.000000, \n-            590.056641, 0.000000, 594.123047, 0.000000, 594.123047, 0.000000, 600.931641, 0.000000, \n-            604.546875, 0.000000, 608.343750, 0.000000, 620.636719, 0.000000, 624.005859, 0.000000, \n-            628.992188, 0.000000, 635.830078, 0.000000, 639.626953, 0.000000, 653.361328, 0.000000, \n-            656.730469, 0.000000, 661.716797, 0.000000, 669.205078, 0.000000, 673.001953, 0.000000, \n-            683.777344, 0.000000, 687.146484, 0.000000, 692.660156, 0.000000, 696.457031, 0.000000, \n-            700.253906, 0.000000, 704.736328, 0.000000, 711.105469, 0.000000, 716.748047, 0.000000, \n-            722.994141, 0.000000, 722.994141, 0.000000, 727.060547, 0.000000, 732.703125, 0.000000, \n-            736.769531, 0.000000, 741.251953, 0.000000, 745.048828, 0.000000, 752.507812, 0.000000, \n-            756.123047, 0.000000, 762.146484, 0.000000, 767.132812, 0.000000, 775.412109, 0.000000, \n-            779.027344, 0.000000, 782.824219, 0.000000, 794.203125, 0.000000, 799.189453, 0.000000, \n-            804.890625, 0.000000, 810.433594, 0.000000, 814.230469, 0.000000, 818.027344, 0.000000, \n-            821.396484, 0.000000, 828.128906, 0.000000, 833.115234, 0.000000, 839.953125, 0.000000, \n-            843.750000, 0.000000, 850.816406, 0.000000, 859.095703, 0.000000, 862.710938, 0.000000, \n-            868.253906, 0.000000, 872.050781, 0.000000, 883.429688, 0.000000, 889.675781, 0.000000, \n-            893.941406, 0.000000, 897.738281, 0.000000, 901.107422, 0.000000, 906.093750, 0.000000, \n-            911.080078, 0.000000, 917.800781, 0.000000, 924.638672, 0.000000, 928.435547, 0.000000, \n-            931.804688, 0.000000, 939.263672, 0.000000, 944.964844, 0.000000, 950.074219, 0.000000, \n-            953.871094, 0.000000, 965.173828, 0.000000, 974.390625, 0.000000, 981.111328, 0.000000, \n-            981.111328, 0.000000, 985.177734, 0.000000, 988.974609, 0.000000, 999.750000, 0.000000, \n-            1003.365234, 0.000000, 1007.162109, 0.000000, 1014.228516, 0.000000, 1020.949219, 0.000000, \n-            1025.015625, 0.000000, 1028.812500, 0.000000, 1040.408203, 0.000000, 1046.431641, 0.000000, \n-            1054.710938, 0.000000, 1054.710938, 0.000000, 1061.519531, 0.000000, 1065.134766, 0.000000, \n-            1068.931641, 0.000000, 1083.943359, 0.000000, 1089.052734, 0.000000, 1092.421875, 0.000000, \n-            1101.093750, 0.000000, 1108.552734, 0.000000, 1112.818359, 0.000000, 1116.433594, 0.000000, \n-            1121.976562, 0.000000, 1125.773438, 0.000000, 1140.785156, 0.000000, 1146.808594, 0.000000, \n-            1155.087891, 0.000000, 1155.087891, 0.000000, 1161.896484, 0.000000, 1165.511719, 0.000000, \n-            1169.308594, 0.000000, 1180.541016, 0.000000, 1184.607422, 0.000000, 1190.630859, 0.000000, \n-            1199.302734, 0.000000, 1204.289062, 0.000000, 1208.355469, 0.000000, 1212.152344, 0.000000, \n-            1218.960938, 0.000000, 1224.603516, 0.000000, 1231.037109, 0.000000, 1235.103516, 0.000000, \n-            1240.646484, 0.000000, 1244.443359, 0.000000, 1248.240234, 0.000000, 1255.048828, 0.000000, \n-            1258.417969, 0.000000, 1264.119141, 0.000000, 1269.228516, 0.000000, 1269.228516, 0.000000, \n-            1276.037109, 0.000000, 1279.652344, 0.000000, 1283.449219, 0.000000, 1290.908203, 0.000000, \n-            1297.746094, 0.000000, 1301.542969, 0.000000, 1311.427734, 0.000000, 1317.861328, 0.000000, \n-            1323.562500, 0.000000, 1327.359375, 0.000000, 1341.492188, 0.000000, 1346.478516, 0.000000, \n-            1357.904297, 0.000000, 1361.519531, 0.000000, 1367.162109, 0.000000, 1375.833984, 0.000000, \n-            1380.099609, 0.000000, 1383.714844, 0.000000, 1387.511719, 0.000000, 1398.890625, 0.000000, \n-            1405.728516, 0.000000, 1409.097656, 0.000000, 1415.818359, 0.000000, 1420.804688, 0.000000, \n-            1424.871094, 0.000000, 1428.667969, 0.000000, 1432.464844, 0.000000, 1435.833984, 0.000000, \n-            1435.833984, 0.000000, 1447.259766, 0.000000, 1450.628906, 0.000000, 1462.054688, 0.000000, \n-            1465.669922, 0.000000\n-        <\/result-positions>\n-    <\/test-case>\n-\n-    <test-case id=\"Matra Test\" script=\"deva\">\n-        <test-font name=\"raghu.ttf\" version=\"Original Version 1.00 (2005)\" checksum=\"0x088DB135\" rchecksum=\"0x00803FCE\"\/>\n-\n-        <test-text> <\/test-text>\n-\n-        <result-glyphs>\n-            0x0000029C, 0x000001D5, 0x00000232, 0x00000003, 0x0000029C, 0x00000232, 0x00000233\n-        <\/result-glyphs>\n-\n-        <result-indices>\n-            0x00000000, 0x00000000, 0x00000001, 0x00000002, 0x00000003, 0x00000003, 0x00000004\n-        <\/result-indices>\n-\n-        <result-positions>\n-            0.000000, 0.000000, 7.541016, 0.000000, 7.541016, 0.000000, 7.541016, 0.000000, \n-            13.541016, 0.000000, 21.082031, 0.000000, 19.953125, -6.052734, 21.082031, 0.000000\n-        <\/result-positions>\n-    <\/test-case>\n-\n-    <test-case id=\"Deva Stress Test\" script=\"deva\">\n-        <test-font name=\"raghu.ttf\" version=\"Original Version 1.00 (2005)\" checksum=\"0x088DB135\" rchecksum=\"0x00803FCE\"\/>\n-\n-        <test-text>        <\/test-text>\n-\n-        <result-glyphs>\n-            0x00000080, 0x00000231, 0x00000003, 0x00000080, 0x00000232, 0x00000003, 0x00000080, 0x0000022C, \n-            0x00000003, 0x00000080, 0x00000233, 0x00000003, 0x00000080, 0x000001DF, 0x00000003, 0x00000080, \n-            0x00000231, 0x00000233, 0x00000003, 0x00000080, 0x000001DF, 0x00000232, 0x00000003, 0x00000080, \n-            0x00000231, 0x0000029C, 0x00000232, 0x0000029C, 0x0000022C, 0x00000003, 0x00000080, 0x00000233, \n-            0x0000029C, 0x000001DF\n-        <\/result-glyphs>\n-\n-        <result-indices>\n-            0x00000000, 0x00000001, 0x00000002, 0x00000003, 0x00000004, 0x00000005, 0x00000006, 0x00000007, \n-            0x00000008, 0x00000009, 0x0000000A, 0x0000000B, 0x0000000C, 0x0000000D, 0x0000000E, 0x0000000F, \n-            0x00000010, 0x00000011, 0x00000012, 0x00000013, 0x00000015, 0x00000014, 0x00000016, 0x00000017, \n-            0x00000018, 0x00000019, 0x00000019, 0x0000001A, 0x0000001A, 0x0000001B, 0x0000001C, 0x0000001D, \n-            0x0000001E, 0x0000001E\n-        <\/result-indices>\n-\n-        <result-positions>\n-            0.000000, 0.000000, 10.001953, -0.087891, 10.875000, 0.000000, 16.875000, 0.000000, \n-            23.783203, 0.439453, 27.750000, 0.000000, 33.750000, 0.000000, 44.625000, 0.000000, \n-            48.984375, 0.000000, 54.984375, 0.000000, 63.546875, -1.669922, 65.859375, 0.000000, \n-            71.859375, 0.000000, 80.332031, 0.492188, 82.734375, 0.000000, 88.734375, 0.000000, \n-            98.736328, -0.087891, 97.431641, -6.228516, 99.609375, 0.000000, 105.609375, 0.000000, \n-            114.082031, 0.492188, 112.517578, 0.439453, 116.484375, 0.000000, 122.484375, 0.000000, \n-            132.486328, -0.087891, 133.359375, 0.000000, 140.900391, 0.000000, 140.900391, 0.000000, \n-            148.441406, 0.000000, 152.800781, 0.000000, 158.800781, 0.000000, 167.363281, -1.669922, \n-            169.675781, 0.000000, 177.216797, 0.000000, 177.216797, 0.000000\n-        <\/result-positions>\n-    <\/test-case>\n-\n-    <test-case id=\"Deva Test\" script=\"deva\">\n-        <test-font name=\"raghu.ttf\" version=\"Original Version 1.00 (2005)\" checksum=\"0x088DB135\" rchecksum=\"0x00803FCE\"\/>\n-\n-        <test-text>                                                                                     <\/test-text>\n-\n-        <result-glyphs>\n-            0x0000009A, 0x000001FE, 0x00000003, 0x000000A4, 0x00000051, 0x00000003, 0x000000A2, 0x0000FFFF, \n-            0x0000FFFF, 0x00000003, 0x000001D4, 0x000000C8, 0x0000FFFF, 0x00000080, 0x00000003, 0x000001D1, \n-            0x00000080, 0x0000009A, 0x00000051, 0x00000003, 0x000001D1, 0x0000008A, 0x0000009A, 0x00000051, \n-            0x00000003, 0x000001D1, 0x000000A1, 0x000000DB, 0x0000FFFF, 0x00000091, 0x00000223, 0x00000003, \n-            0x000001D1, 0x00000080, 0x000000E2, 0x0000FFFF, 0x0000009A, 0x00000051, 0x00000232, 0x00000003, \n-            0x000000A2, 0x0000FFFF, 0x0000FFFF, 0x0000008F, 0x000000E2, 0x0000FFFF, 0x000000A3, 0x0000FFFF, \n-            0x0000FFFF, 0x0000008F, 0x000000E2, 0x0000FFFF, 0x000000A2, 0x0000FFFF, 0x0000FFFF, 0x00000003, \n-            0x0000009E, 0x0000009A, 0x00000051, 0x00000003, 0x00000090, 0x0000009A, 0x00000051, 0x00000003, \n-            0x0000009E, 0x0000009A, 0x00000051, 0x00000003, 0x00000080, 0x00000080, 0x0000022F, 0x00000003, \n-            0x00000080, 0x0000022F, 0x0000024D, 0x0000FFFF, 0x0000FFFF, 0x00000003, 0x00000080, 0x0000022F, \n-            0x0000029C, 0x000001D7, 0x00000080, 0x000001D7, 0x0000029C, 0x0000022F, 0x00000080, 0x0000022F, \n-            0x0000029C, 0x000001D9, 0x00000003, 0x00000080, 0x000001D7, 0x0000005B, 0x0000FFFF, 0x00000003, \n-            0x000000A4, 0x00000003, 0x00000080, 0x00000003, 0x00000080, 0x00000051, 0x00000003, 0x000000A2, \n-            0x0000FFFF, 0x0000FFFF, 0x00000003, 0x000000A2, 0x0000FFFF, 0x0000FFFF, 0x00000051, 0x00000003, \n-            0x000000EA, 0x0000FFFF, 0x0000FFFF, 0x0000FFFF, 0x00000080, 0x00000003, 0x00000003, 0x000000AB, \n-            0x0000FFFF, 0x00000003, 0x00000087, 0x00000003, 0x00000087, 0x00000051, 0x00000003, 0x000000A3, \n-            0x0000FFFF, 0x0000FFFF, 0x00000003, 0x000000A3, 0x0000FFFF, 0x0000FFFF, 0x00000051, 0x00000003, \n-            0x000000EB, 0x0000FFFF, 0x0000FFFF, 0x0000FFFF, 0x00000080, 0x00000003, 0x00000080, 0x0000005B, \n-            0x0000FFFF, 0x00000003, 0x000000C8, 0x0000FFFF, 0x00000080, 0x0000005B, 0x0000FFFF, 0x00000003, \n-            0x0000008C, 0x0000009A, 0x00000051, 0x00000003, 0x000000C8, 0x0000FFFF, 0x00000080, 0x00000003, \n-            0x000000EC, 0x0000FFFF, 0x00000080, 0x00000003, 0x000000EC, 0x0000FFFF, 0x00000080, 0x00000003, \n-            0x000000A4, 0x00000051, 0x00000003, 0x000000EA, 0x0000FFFF, 0x0000FFFF, 0x0000FFFF, 0x00000080, \n-            0x00000003, 0x000000A2, 0x0000FFFF, 0x0000FFFF, 0x00000051, 0x00000003, 0x000000D7, 0x0000FFFF, \n-            0x000000E2, 0x0000FFFF, 0x00000080, 0x00000003, 0x000001A7, 0x0000FFFF, 0x0000FFFF, 0x00000003, \n-            0x000001D1, 0x00000080, 0x00000003, 0x000001D1, 0x000000A1, 0x00000003, 0x0000009A, 0x000001FE, \n-            0x00000003, 0x0000009A, 0x000001FD, 0x00000003, 0x00000080, 0x0000022F, 0x0000005A, 0x0000FFFF, \n-            0x00000003, 0x00000080, 0x0000024D, 0x0000FFFF, 0x0000FFFF, 0x00000003, 0x00000080, 0x00000051, \n-            0x00000003, 0x00000080, 0x000001D5, 0x00000003, 0x00000080, 0x0000022F, 0x00000003, 0x000000D9, \n-            0x0000FFFF, 0x000001A7, 0x0000FFFF, 0x0000FFFF, 0x00000003, 0x000000EC, 0x0000FFFF, 0x0000009F, \n-            0x00000003, 0x000000A2, 0x0000FFFF, 0x0000FFFF, 0x00000003, 0x000000A2, 0x0000FFFF, 0x0000FFFF, \n-            0x0000022F, 0x0000005A, 0x0000FFFF, 0x00000003, 0x000001A7, 0x0000FFFF, 0x0000FFFF, 0x000000D7, \n-            0x0000FFFF, 0x000000E2, 0x0000FFFF, 0x00000080, 0x00000003, 0x000000A3, 0x0000FFFF, 0x0000FFFF, \n-            0x00000003, 0x000000C8, 0x0000FFFF, 0x000000D7, 0x0000FFFF, 0x0000009D, 0x00000003, 0x000000EB, \n-            0x0000FFFF, 0x0000FFFF, 0x0000FFFF, 0x00000080, 0x00000003, 0x00000080, 0x0000024C, 0x0000FFFF, \n-            0x0000FFFF, 0x00000003, 0x000001D1, 0x00000080, 0x0000024C, 0x0000FFFF, 0x0000FFFF, 0x00000003, \n-            0x00000080, 0x0000022F, 0x0000024C, 0x0000FFFF, 0x0000FFFF, 0x00000003, 0x000001D1, 0x00000080, \n-            0x000000E2, 0x0000FFFF, 0x0000009A, 0x00000051, 0x00000231, 0x00000003, 0x000001D1, 0x000000A1, \n-            0x00000232, 0x00000091, 0x00000223, 0x00000003, 0x000001D3, 0x000001BA, 0x0000FFFF, 0x0000FFFF, \n-            0x000001D3, 0x000001BB, 0x0000FFFF, 0x0000FFFF, 0x000001D4, 0x00000081, 0x00000003, 0x000000CC, \n-            0x0000FFFF, 0x00000080, 0x00000003, 0x000001A2, 0x0000FFFF, 0x0000FFFF, 0x00000003, 0x000000CC, \n-            0x0000FFFF, 0x000001A0, 0x0000FFFF, 0x0000FFFF, 0x00000003, 0x000000CC, 0x0000FFFF, 0x00000081, \n-            0x00000003, 0x000000CC, 0x0000FFFF, 0x00000082, 0x00000003, 0x000000CC, 0x0000FFFF, 0x00000083, \n-            0x00000003, 0x000000CC, 0x0000FFFF, 0x000000A2, 0x0000FFFF, 0x0000FFFF, 0x00000003, 0x000000CC, \n-            0x0000FFFF, 0x000000EA, 0x0000FFFF, 0x0000FFFF, 0x0000FFFF, 0x0000009D, 0x00000003, 0x000000CC, \n-            0x0000FFFF, 0x000000EA, 0x0000FFFF, 0x0000FFFF, 0x0000FFFF, 0x00000099, 0x00000003, 0x000001D4, \n-            0x000000C8, 0x0000FFFF, 0x000000D7, 0x0000FFFF, 0x0000009D, 0x0000005B, 0x0000FFFF, 0x00000003, \n-            0x0000009A, 0x00000051, 0x0000009A, 0x000000E2, 0x0000FFFF, 0x0000009A, 0x00000051, 0x00000003, \n-            0x00000080, 0x00000230, 0x00000003, 0x00000080, 0x0000022F, 0x00000003, 0x00000080, 0x000001D5, \n-            0x00000003, 0x00000080, 0x000001D7, 0x00000003, 0x00000080, 0x000001D9, 0x00000003, 0x00000080, \n-            0x0000022D, 0x00000003, 0x00000080, 0x0000022E, 0x00000003, 0x000000A1, 0x000001D5, 0x00000003, \n-            0x000000A1, 0x000001D7, 0x00000003, 0x000000A1, 0x0000022E, 0x00000003, 0x000000A1, 0x00000230, \n-            0x00000003, 0x000000A1, 0x0000022F\n-        <\/result-glyphs>\n-\n-        <result-indices>\n-            0x00000000, 0x00000001, 0x00000002, 0x00000003, 0x00000004, 0x00000005, 0x00000006, 0x00000007, \n-            0x00000008, 0x00000009, 0x0000000D, 0x0000000A, 0x0000000B, 0x0000000C, 0x0000000E, 0x00000012, \n-            0x0000000F, 0x00000011, 0x00000010, 0x00000013, 0x00000017, 0x00000014, 0x00000016, 0x00000015, \n-            0x00000018, 0x0000001A, 0x00000019, 0x0000001B, 0x0000001C, 0x0000001D, 0x0000001E, 0x0000001F, \n-            0x00000025, 0x00000022, 0x00000024, 0x00000023, 0x00000020, 0x00000021, 0x00000026, 0x00000027, \n-            0x00000028, 0x00000029, 0x0000002A, 0x0000002B, 0x0000002D, 0x0000002C, 0x0000002E, 0x0000002F, \n-            0x00000030, 0x00000031, 0x00000033, 0x00000032, 0x00000034, 0x00000035, 0x00000036, 0x00000037, \n-            0x00000038, 0x0000003A, 0x00000039, 0x0000003B, 0x0000003C, 0x0000003E, 0x0000003D, 0x0000003F, \n-            0x00000040, 0x00000042, 0x00000041, 0x00000043, 0x00000044, 0x00000045, 0x00000046, 0x00000047, \n-            0x0000004A, 0x0000004B, 0x00000048, 0x00000049, 0x0000004C, 0x0000004D, 0x0000004E, 0x0000004F, \n-            0x00000050, 0x00000050, 0x00000051, 0x00000052, 0x00000053, 0x00000053, 0x00000054, 0x00000055, \n-            0x00000056, 0x00000056, 0x00000057, 0x0000005A, 0x0000005B, 0x00000058, 0x00000059, 0x0000005C, \n-            0x0000005D, 0x0000005E, 0x0000005F, 0x00000060, 0x00000061, 0x00000062, 0x00000063, 0x00000064, \n-            0x00000065, 0x00000066, 0x00000067, 0x00000068, 0x00000069, 0x0000006A, 0x0000006B, 0x0000006C, \n-            0x0000006D, 0x0000006E, 0x0000006F, 0x00000070, 0x00000071, 0x00000072, 0x00000073, 0x00000074, \n-            0x00000075, 0x00000076, 0x00000077, 0x00000078, 0x00000079, 0x0000007A, 0x0000007B, 0x0000007C, \n-            0x0000007D, 0x0000007E, 0x0000007F, 0x00000080, 0x00000081, 0x00000082, 0x00000083, 0x00000084, \n-            0x00000085, 0x00000086, 0x00000087, 0x00000088, 0x00000089, 0x0000008A, 0x0000008D, 0x0000008B, \n-            0x0000008C, 0x0000008E, 0x00000091, 0x00000092, 0x00000093, 0x0000008F, 0x00000090, 0x00000094, \n-            0x00000095, 0x00000097, 0x00000096, 0x00000098, 0x00000099, 0x0000009A, 0x0000009B, 0x0000009C, \n-            0x0000009D, 0x0000009E, 0x0000009F, 0x000000A0, 0x000000A1, 0x000000A2, 0x000000A3, 0x000000A4, \n-            0x000000A5, 0x000000A6, 0x000000A7, 0x000000A8, 0x000000A9, 0x000000AA, 0x000000AB, 0x000000AC, \n-            0x000000AD, 0x000000AE, 0x000000AF, 0x000000B0, 0x000000B1, 0x000000B2, 0x000000B3, 0x000000B4, \n-            0x000000B5, 0x000000B6, 0x000000B7, 0x000000B8, 0x000000B9, 0x000000BA, 0x000000BB, 0x000000BC, \n-            0x000000BE, 0x000000BD, 0x000000BF, 0x000000C1, 0x000000C0, 0x000000C2, 0x000000C3, 0x000000C4, \n-            0x000000C5, 0x000000C6, 0x000000C7, 0x000000C8, 0x000000CB, 0x000000CC, 0x000000C9, 0x000000CA, \n-            0x000000CD, 0x000000D0, 0x000000CE, 0x000000CF, 0x000000D1, 0x000000D2, 0x000000D3, 0x000000D4, \n-            0x000000D5, 0x000000D6, 0x000000D7, 0x000000D8, 0x000000D9, 0x000000DA, 0x000000DB, 0x000000DC, \n-            0x000000DD, 0x000000DE, 0x000000DF, 0x000000E0, 0x000000E1, 0x000000E2, 0x000000E3, 0x000000E4, \n-            0x000000E5, 0x000000E6, 0x000000E7, 0x000000E8, 0x000000E9, 0x000000EC, 0x000000ED, 0x000000EE, \n-            0x000000EF, 0x000000EA, 0x000000EB, 0x000000F0, 0x000000F1, 0x000000F2, 0x000000F3, 0x000000F4, \n-            0x000000F5, 0x000000F6, 0x000000F7, 0x000000F8, 0x000000F9, 0x000000FA, 0x000000FB, 0x000000FC, \n-            0x000000FD, 0x000000FE, 0x000000FF, 0x00000100, 0x00000101, 0x00000102, 0x00000103, 0x00000104, \n-            0x00000105, 0x00000106, 0x00000107, 0x00000108, 0x00000109, 0x0000010C, 0x0000010A, 0x0000010B, \n-            0x0000010D, 0x0000010E, 0x00000112, 0x00000111, 0x0000010F, 0x00000110, 0x00000113, 0x00000114, \n-            0x00000117, 0x00000118, 0x00000115, 0x00000116, 0x00000119, 0x0000011A, 0x00000120, 0x0000011D, \n-            0x0000011F, 0x0000011E, 0x0000011B, 0x0000011C, 0x00000121, 0x00000122, 0x00000124, 0x00000123, \n-            0x00000125, 0x00000126, 0x00000127, 0x00000128, 0x0000012C, 0x00000129, 0x0000012A, 0x0000012B, \n-            0x00000130, 0x0000012D, 0x0000012E, 0x0000012F, 0x00000132, 0x00000131, 0x00000133, 0x00000134, \n-            0x00000135, 0x00000136, 0x00000137, 0x00000138, 0x00000139, 0x0000013A, 0x0000013B, 0x0000013C, \n-            0x0000013D, 0x0000013E, 0x0000013F, 0x00000140, 0x00000141, 0x00000142, 0x00000143, 0x00000144, \n-            0x00000145, 0x00000146, 0x00000147, 0x00000148, 0x00000149, 0x0000014A, 0x0000014B, 0x0000014C, \n-            0x0000014D, 0x0000014E, 0x0000014F, 0x00000150, 0x00000151, 0x00000152, 0x00000153, 0x00000154, \n-            0x00000155, 0x00000156, 0x00000157, 0x00000158, 0x00000159, 0x0000015A, 0x0000015B, 0x0000015C, \n-            0x0000015D, 0x0000015E, 0x0000015F, 0x00000160, 0x00000161, 0x00000162, 0x00000163, 0x0000016B, \n-            0x00000166, 0x00000167, 0x00000168, 0x00000169, 0x0000016A, 0x00000164, 0x00000165, 0x0000016C, \n-            0x0000016F, 0x00000170, 0x00000171, 0x00000173, 0x00000172, 0x0000016D, 0x0000016E, 0x00000174, \n-            0x00000175, 0x00000176, 0x00000177, 0x00000178, 0x00000179, 0x0000017A, 0x0000017B, 0x0000017C, \n-            0x0000017D, 0x0000017E, 0x0000017F, 0x00000180, 0x00000181, 0x00000182, 0x00000183, 0x00000184, \n-            0x00000185, 0x00000186, 0x00000187, 0x00000188, 0x00000189, 0x0000018A, 0x0000018B, 0x0000018C, \n-            0x0000018D, 0x0000018E, 0x0000018F, 0x00000190, 0x00000191, 0x00000192, 0x00000193, 0x00000194, \n-            0x00000195, 0x00000196, 0x00000197\n-        <\/result-indices>\n-\n-        <result-positions>\n-            0.000000, 0.000000, 6.515625, 0.000000, 8.121094, 0.000000, 14.121094, 0.000000, \n-            24.861328, -0.451172, 24.996094, 0.000000, 30.996094, 0.000000, 41.871094, 0.000000, \n-            41.871094, 0.000000, 41.871094, 0.000000, 47.871094, 0.000000, 52.230469, 0.000000, \n-            60.949219, 0.000000, 60.949219, 0.000000, 71.824219, 0.000000, 77.824219, 0.000000, \n-            82.183594, 0.000000, 93.058594, 0.000000, 102.720703, -0.451172, 99.574219, 0.000000, \n-            105.574219, 0.000000, 109.933594, 0.000000, 117.902344, 0.000000, 127.564453, -0.451172, \n-            124.417969, 0.000000, 130.417969, 0.000000, 134.777344, 0.000000, 142.746094, 0.000000, \n-            150.011719, 0.000000, 150.011719, 0.000000, 157.980469, 0.000000, 161.636719, 0.000000, \n-            167.636719, 0.000000, 171.996094, 0.000000, 182.871094, 0.000000, 186.621094, 0.000000, \n-            186.621094, 0.000000, 196.283203, -0.451172, 191.613281, 0.439453, 193.136719, 0.000000, \n-            199.136719, 0.000000, 210.011719, 0.000000, 210.011719, 0.000000, 210.011719, 0.000000, \n-            217.980469, 0.000000, 221.730469, 0.000000, 221.730469, 0.000000, 232.605469, 0.000000, \n-            232.605469, 0.000000, 232.605469, 0.000000, 240.574219, 0.000000, 244.324219, 0.000000, \n-            244.324219, 0.000000, 255.199219, 0.000000, 255.199219, 0.000000, 255.199219, 0.000000, \n-            261.199219, 0.000000, 270.667969, 0.000000, 280.330078, -0.451172, 277.183594, 0.000000, \n-            283.183594, 0.000000, 292.652344, 0.000000, 302.314453, -0.451172, 299.167969, 0.000000, \n-            305.167969, 0.000000, 314.636719, 0.000000, 324.298828, -0.451172, 321.152344, 0.000000, \n-            327.152344, 0.000000, 338.027344, 0.000000, 344.783203, 0.263672, 348.902344, 0.000000, \n-            354.902344, 0.000000, 361.658203, 0.263672, 362.279297, 0.263672, 365.777344, 0.000000, \n-            365.777344, 0.000000, 365.777344, 0.000000, 371.777344, 0.000000, 378.533203, 0.263672, \n-            382.652344, 0.000000, 390.193359, 0.000000, 390.193359, 0.000000, 397.916016, -0.011719, \n-            401.068359, 0.000000, 408.609375, 0.000000, 408.609375, 0.000000, 415.365234, 0.263672, \n-            419.484375, 0.000000, 427.025391, 0.000000, 427.025391, 0.000000, 433.025391, 0.000000, \n-            440.748047, -0.011719, 440.929688, 0.263672, 443.900391, 0.000000, 443.900391, 0.000000, \n-            449.900391, 0.000000, 460.775391, 0.000000, 466.775391, 0.000000, 477.650391, 0.000000, \n-            483.650391, 0.000000, 494.390625, -0.451172, 494.525391, 0.000000, 500.525391, 0.000000, \n-            511.400391, 0.000000, 511.400391, 0.000000, 511.400391, 0.000000, 517.400391, 0.000000, \n-            528.275391, 0.000000, 528.275391, 0.000000, 531.457031, -0.451172, 528.275391, 0.000000, \n-            534.275391, 0.000000, 542.994141, 0.000000, 542.994141, 0.000000, 542.994141, 0.000000, \n-            542.994141, 0.000000, 553.869141, 0.000000, 559.869141, 0.000000, 565.869141, 0.000000, \n-            575.337891, 0.000000, 575.337891, 0.000000, 581.337891, 0.000000, 590.806641, 0.000000, \n-            596.806641, 0.000000, 609.597656, -0.451172, 606.275391, 0.000000, 612.275391, 0.000000, \n-            623.150391, 0.000000, 623.150391, 0.000000, 623.150391, 0.000000, 629.150391, 0.000000, \n-            640.025391, 0.000000, 640.025391, 0.000000, 643.207031, -0.451172, 640.025391, 0.000000, \n-            646.025391, 0.000000, 653.994141, 0.000000, 653.994141, 0.000000, 653.994141, 0.000000, \n-            653.994141, 0.000000, 664.869141, 0.000000, 670.869141, 0.000000, 678.773438, 0.263672, \n-            681.744141, 0.000000, 681.744141, 0.000000, 687.744141, 0.000000, 696.462891, 0.000000, \n-            696.462891, 0.000000, 704.367188, 0.263672, 707.337891, 0.000000, 707.337891, 0.000000, \n-            713.337891, 0.000000, 721.306641, 0.000000, 730.968750, -0.451172, 727.822266, 0.000000, \n-            733.822266, 0.000000, 742.541016, 0.000000, 742.541016, 0.000000, 753.416016, 0.000000, \n-            759.416016, 0.000000, 768.134766, 0.000000, 768.134766, 0.000000, 779.009766, 0.000000, \n-            785.009766, 0.000000, 793.728516, 0.000000, 793.728516, 0.000000, 804.603516, 0.000000, \n-            810.603516, 0.000000, 821.343750, -0.451172, 821.478516, 0.000000, 827.478516, 0.000000, \n-            836.197266, 0.000000, 836.197266, 0.000000, 836.197266, 0.000000, 836.197266, 0.000000, \n-            847.072266, 0.000000, 853.072266, 0.000000, 863.947266, 0.000000, 863.947266, 0.000000, \n-            867.128906, -0.451172, 863.947266, 0.000000, 869.947266, 0.000000, 875.876953, 0.000000, \n-            875.876953, 0.000000, 879.626953, 0.000000, 879.626953, 0.000000, 890.501953, 0.000000, \n-            896.501953, 0.000000, 903.064453, 0.000000, 903.064453, 0.000000, 903.064453, 0.000000, \n-            909.064453, 0.000000, 913.423828, 0.000000, 924.298828, 0.000000, 930.298828, 0.000000, \n-            934.658203, 0.000000, 942.626953, 0.000000, 948.626953, 0.000000, 955.142578, 0.000000, \n-            956.748047, 0.000000, 962.748047, 0.000000, 969.263672, 0.000000, 970.623047, 0.000000, \n-            976.623047, 0.000000, 983.378906, 0.263672, 983.853516, 0.164062, 987.498047, 0.000000, \n-            987.498047, 0.000000, 993.498047, 0.000000, 1000.875000, 0.263672, 1004.373047, 0.000000, \n-            1004.373047, 0.000000, 1004.373047, 0.000000, 1010.373047, 0.000000, 1021.113281, -0.451172, \n-            1021.248047, 0.000000, 1027.248047, 0.000000, 1034.947266, -0.011719, 1038.123047, 0.000000, \n-            1044.123047, 0.000000, 1050.878906, 0.263672, 1054.998047, 0.000000, 1060.998047, 0.000000, \n-            1068.966797, 0.000000, 1068.966797, 0.000000, 1075.529297, 0.000000, 1075.529297, 0.000000, \n-            1075.529297, 0.000000, 1081.529297, 0.000000, 1090.248047, 0.000000, 1090.248047, 0.000000, \n-            1098.216797, 0.000000, 1104.216797, 0.000000, 1115.091797, 0.000000, 1115.091797, 0.000000, \n-            1115.091797, 0.000000, 1121.091797, 0.000000, 1131.966797, 0.000000, 1131.966797, 0.000000, \n-            1131.164062, 0.275391, 1131.638672, 0.175781, 1131.966797, 0.000000, 1131.966797, 0.000000, \n-            1137.966797, 0.000000, 1144.529297, 0.000000, 1144.529297, 0.000000, 1144.529297, 0.000000, \n-            1150.458984, 0.000000, 1150.458984, 0.000000, 1154.208984, 0.000000, 1154.208984, 0.000000, \n-            1165.083984, 0.000000, 1171.083984, 0.000000, 1181.958984, 0.000000, 1181.958984, 0.000000, \n-            1181.958984, 0.000000, 1187.958984, 0.000000, 1196.677734, 0.000000, 1196.677734, 0.000000, \n-            1202.607422, 0.000000, 1202.607422, 0.000000, 1210.576172, 0.000000, 1216.576172, 0.000000, \n-            1224.544922, 0.000000, 1224.544922, 0.000000, 1224.544922, 0.000000, 1224.544922, 0.000000, \n-            1235.419922, 0.000000, 1241.419922, 0.000000, 1249.236328, 0.263672, 1252.294922, 0.000000, \n-            1252.294922, 0.000000, 1252.294922, 0.000000, 1258.294922, 0.000000, 1262.654297, 0.000000, \n-            1270.470703, 0.263672, 1273.529297, 0.000000, 1273.529297, 0.000000, 1273.529297, 0.000000, \n-            1279.529297, 0.000000, 1286.285156, 0.263672, 1287.345703, 0.263672, 1290.404297, 0.000000, \n-            1290.404297, 0.000000, 1290.404297, 0.000000, 1296.404297, 0.000000, 1300.763672, 0.000000, \n-            1311.638672, 0.000000, 1315.388672, 0.000000, 1315.388672, 0.000000, 1325.050781, -0.451172, \n-            1323.474609, -0.087891, 1321.904297, 0.000000, 1327.904297, 0.000000, 1332.263672, 0.000000, \n-            1338.767578, 0.439453, 1340.232422, 0.000000, 1348.201172, 0.000000, 1351.857422, 0.000000, \n-            1357.857422, 0.000000, 1362.216797, 0.000000, 1372.388672, 0.000000, 1372.388672, 0.000000, \n-            1372.388672, 0.000000, 1376.748047, 0.000000, 1386.919922, 0.000000, 1386.919922, 0.000000, \n-            1386.919922, 0.000000, 1391.279297, 0.000000, 1402.154297, 0.000000, 1408.154297, 0.000000, \n-            1416.123047, 0.000000, 1416.123047, 0.000000, 1426.998047, 0.000000, 1432.998047, 0.000000, \n-            1446.076172, 0.000000, 1446.076172, 0.000000, 1446.076172, 0.000000, 1452.076172, 0.000000, \n-            1460.044922, 0.000000, 1460.044922, 0.000000, 1471.294922, 0.000000, 1471.294922, 0.000000, \n-            1471.294922, 0.000000, 1477.294922, 0.000000, 1485.263672, 0.000000, 1485.263672, 0.000000, \n-            1496.138672, 0.000000, 1502.138672, 0.000000, 1510.107422, 0.000000, 1510.107422, 0.000000, \n-            1519.576172, 0.000000, 1525.576172, 0.000000, 1533.544922, 0.000000, 1533.544922, 0.000000, \n-            1543.013672, 0.000000, 1549.013672, 0.000000, 1556.982422, 0.000000, 1556.982422, 0.000000, \n-            1567.857422, 0.000000, 1567.857422, 0.000000, 1567.857422, 0.000000, 1573.857422, 0.000000, \n-            1581.826172, 0.000000, 1581.826172, 0.000000, 1590.544922, 0.000000, 1590.544922, 0.000000, \n-            1590.544922, 0.000000, 1590.544922, 0.000000, 1598.513672, 0.000000, 1604.513672, 0.000000, \n-            1612.482422, 0.000000, 1612.482422, 0.000000, 1621.201172, 0.000000, 1621.201172, 0.000000, \n-            1621.201172, 0.000000, 1621.201172, 0.000000, 1630.669922, 0.000000, 1636.669922, 0.000000, \n-            1641.029297, 0.000000, 1649.748047, 0.000000, 1649.748047, 0.000000, 1655.677734, 0.000000, \n-            1655.677734, 0.000000, 1663.939453, 0.263672, 1663.646484, 0.000000, 1663.646484, 0.000000, \n-            1669.646484, 0.000000, 1679.308594, -0.451172, 1676.162109, 0.000000, 1682.677734, 0.000000, \n-            1686.427734, 0.000000, 1686.427734, 0.000000, 1696.089844, -0.451172, 1692.943359, 0.000000, \n-            1698.943359, 0.000000, 1706.314453, 0.263672, 1709.818359, 0.000000, 1715.818359, 0.000000, \n-            1722.574219, 0.263672, 1726.693359, 0.000000, 1732.693359, 0.000000, 1740.392578, -0.011719, \n-            1743.568359, 0.000000, 1749.568359, 0.000000, 1757.291016, -0.011719, 1760.443359, 0.000000, \n-            1766.443359, 0.000000, 1774.376953, -0.011719, 1777.318359, 0.000000, 1783.318359, 0.000000, \n-            1791.738281, -0.439453, 1794.193359, 0.000000, 1800.193359, 0.000000, 1808.121094, 0.263672, \n-            1811.068359, 0.000000, 1817.068359, 0.000000, 1823.085938, -0.011719, 1825.037109, 0.000000, \n-            1831.037109, 0.000000, 1837.078125, -0.011719, 1839.005859, 0.000000, 1845.005859, 0.000000, \n-            1852.529297, 0.263672, 1852.974609, 0.000000, 1858.974609, 0.000000, 1865.941406, 0.263672, \n-            1866.943359, 0.000000, 1872.943359, 0.000000, 1879.294922, 0.263672, 1880.912109, 0.000000\n-        <\/result-positions>\n-    <\/test-case>\n-\n-    <test-case id=\"Japanese Han\" script=\"hani\" lang=\"JAN\">\n-        <test-font name=\"Arial Unicode.ttf\" version=\"Version 1.01x\" checksum=\"0x609C497F\" rchecksum=\"0x63451FC0\"\/>\n-\n-        <test-text>   <\/test-text>\n-\n-        <result-glyphs>\n-            0x000020BC, 0x000025DD, 0x00002149, 0x00003EA0, 0x00002400, 0x0000271B, 0x0000298C, 0x00000003, \n-            0x0000267F, 0x0000410D, 0x00000003, 0x000020BC, 0x0000567E, 0x00002149, 0x00003EA0, 0x00002400, \n-            0x0000271B, 0x0000299A, 0x00000003, 0x00005489, 0x000042F2\n-        <\/result-glyphs>\n-\n-        <result-indices>\n-            0x00000000, 0x00000001, 0x00000002, 0x00000003, 0x00000004, 0x00000005, 0x00000006, 0x00000007, \n-            0x00000008, 0x00000009, 0x0000000A, 0x0000000B, 0x0000000C, 0x0000000D, 0x0000000E, 0x0000000F, \n-            0x00000010, 0x00000011, 0x00000012, 0x00000013, 0x00000014\n-        <\/result-indices>\n-\n-        <result-positions>\n-            0.000000, 0.000000, 12.000000, 0.000000, 24.000000, 0.000000, 36.000000, 0.000000, \n-            48.000000, 0.000000, 60.000000, 0.000000, 72.000000, 0.000000, 84.000000, 0.000000, \n-            87.333984, 0.000000, 99.333984, 0.000000, 111.333984, 0.000000, 114.667969, 0.000000, \n-            126.667969, 0.000000, 138.667969, 0.000000, 150.667969, 0.000000, 162.667969, 0.000000, \n-            174.667969, 0.000000, 186.667969, 0.000000, 198.667969, 0.000000, 202.001953, 0.000000, \n-            214.001953, 0.000000, 226.001953, 0.000000\n-        <\/result-positions>\n-    <\/test-case>\n-<!-- known to fail in base JDK7, skip\n-    <test-case id=\"Korean Han\" script=\"hani\" lang=\"KOR\">\n-        <test-font name=\"Arial Unicode.ttf\" version=\"Version 1.01x\" checksum=\"0x609C497F\" rchecksum=\"0x63451FC0\"\/>\n-\n-        <test-text>   <\/test-text>\n-\n-        <result-glyphs>\n-            0x000020BC, 0x000025DD, 0x00002149, 0x00003EA0, 0x00002400, 0x0000271B, 0x0000298C, 0x00000003, \n-            0x0000267F, 0x0000410D, 0x00000003, 0x000020BC, 0x00007492, 0x00002149, 0x00003EA0, 0x00002400, \n-            0x0000271B, 0x0000299A, 0x00000003, 0x00005489, 0x000042F2\n-        <\/result-glyphs>\n-\n-        <result-indices>\n-            0x00000000, 0x00000001, 0x00000002, 0x00000003, 0x00000004, 0x00000005, 0x00000006, 0x00000007, \n-            0x00000008, 0x00000009, 0x0000000A, 0x0000000B, 0x0000000C, 0x0000000D, 0x0000000E, 0x0000000F, \n-            0x00000010, 0x00000011, 0x00000012, 0x00000013, 0x00000014\n-        <\/result-indices>\n-\n-        <result-positions>\n-            0.000000, 0.000000, 12.000000, 0.000000, 24.000000, 0.000000, 36.000000, 0.000000, \n-            48.000000, 0.000000, 60.000000, 0.000000, 72.000000, 0.000000, 84.000000, 0.000000, \n-            87.333984, 0.000000, 99.333984, 0.000000, 111.333984, 0.000000, 114.667969, 0.000000, \n-            126.667969, 0.000000, 138.667969, 0.000000, 150.667969, 0.000000, 162.667969, 0.000000, \n-            174.667969, 0.000000, 186.667969, 0.000000, 198.667969, 0.000000, 202.001953, 0.000000, \n-            214.001953, 0.000000, 226.001953, 0.000000\n-        <\/result-positions>\n-    <\/test-case>\n--->\n-\n-<!-- known to fail in base JDK7, skip\n-    <test-case id=\"Traditional Han\" script=\"hani\" lang=\"ZHT\">\n-        <test-font name=\"Arial Unicode.ttf\" version=\"Version 1.01x\" checksum=\"0x609C497F\" rchecksum=\"0x63451FC0\"\/>\n-\n-        <test-text>   <\/test-text>\n-\n-        <result-glyphs>\n-            0x000020BC, 0x000025DD, 0x00002149, 0x000079EB, 0x00002400, 0x0000271B, 0x0000298C, 0x00000003, \n-            0x00007677, 0x0000410D, 0x00000003, 0x000020BC, 0x00007E26, 0x00002149, 0x000079EB, 0x00002400, \n-            0x0000271B, 0x0000299A, 0x00000003, 0x00007D8F, 0x00007A97\n-        <\/result-glyphs>\n-\n-        <result-indices>\n-            0x00000000, 0x00000001, 0x00000002, 0x00000003, 0x00000004, 0x00000005, 0x00000006, 0x00000007, \n-            0x00000008, 0x00000009, 0x0000000A, 0x0000000B, 0x0000000C, 0x0000000D, 0x0000000E, 0x0000000F, \n-            0x00000010, 0x00000011, 0x00000012, 0x00000013, 0x00000014\n-        <\/result-indices>\n-\n-        <result-positions>\n-            0.000000, 0.000000, 12.000000, 0.000000, 24.000000, 0.000000, 36.000000, 0.000000, \n-            48.000000, 0.000000, 60.000000, 0.000000, 72.000000, 0.000000, 84.000000, 0.000000, \n-            87.333984, 0.000000, 99.333984, 0.000000, 111.333984, 0.000000, 114.667969, 0.000000, \n-            126.667969, 0.000000, 138.667969, 0.000000, 150.667969, 0.000000, 162.667969, 0.000000, \n-            174.667969, 0.000000, 186.667969, 0.000000, 198.667969, 0.000000, 202.001953, 0.000000, \n-            214.001953, 0.000000, 226.001953, 0.000000\n-        <\/result-positions>\n-    <\/test-case>\n--->\n-\n-<!-- known to fail in base JDK7, skip\n-    <test-case id=\"Simplified Han\" script=\"hani\" lang=\"ZHS\">\n-        <test-font name=\"Arial Unicode.ttf\" version=\"Version 1.01x\" checksum=\"0x609C497F\" rchecksum=\"0x63451FC0\"\/>\n-\n-        <test-text>   <\/test-text>\n-\n-        <result-glyphs>\n-            0x000020BC, 0x000025DD, 0x00002149, 0x000079EB, 0x00002400, 0x0000271B, 0x0000298C, 0x00000003, \n-            0x00007677, 0x00008886, 0x00000003, 0x000020BC, 0x0000567E, 0x00002149, 0x000079EB, 0x00002400, \n-            0x0000271B, 0x0000299A, 0x00000003, 0x00007D8F, 0x00007A97\n-        <\/result-glyphs>\n-\n-        <result-indices>\n-            0x00000000, 0x00000001, 0x00000002, 0x00000003, 0x00000004, 0x00000005, 0x00000006, 0x00000007, \n-            0x00000008, 0x00000009, 0x0000000A, 0x0000000B, 0x0000000C, 0x0000000D, 0x0000000E, 0x0000000F, \n-            0x00000010, 0x00000011, 0x00000012, 0x00000013, 0x00000014\n-        <\/result-indices>\n-\n-        <result-positions>\n-            0.000000, 0.000000, 12.000000, 0.000000, 24.000000, 0.000000, 36.000000, 0.000000, \n-            48.000000, 0.000000, 60.000000, 0.000000, 72.000000, 0.000000, 84.000000, 0.000000, \n-            87.333984, 0.000000, 99.333984, 0.000000, 111.333984, 0.000000, 114.667969, 0.000000, \n-            126.667969, 0.000000, 138.667969, 0.000000, 150.667969, 0.000000, 162.667969, 0.000000, \n-            174.667969, 0.000000, 186.667969, 0.000000, 198.667969, 0.000000, 202.001953, 0.000000, \n-            214.001953, 0.000000, 226.001953, 0.000000\n-        <\/result-positions>\n-    <\/test-case>\n--->\n-\n-    <test-case id=\"Deva locl Hindi\" script=\"deva\" lang=\"HIN\">\n-        <test-font name=\"TestFont1.otf\" version=\"Version 001.000 \" checksum=\"0x75B4A535\" rchecksum=\"0x0004D80A\"\/>\n-\n-        <test-text><\/test-text>\n-\n-        <result-glyphs>\n-            0x00000002, 0x00000001, 0x00000006, 0x0000FFFF\n-        <\/result-glyphs>\n-\n-        <result-indices>\n-            0x00000000, 0x00000001, 0x00000002, 0x00000003\n-        <\/result-indices>\n-\n-        <result-positions>\n-            0.000000, 0.000000, 7.572000, 0.000000, 15.108000, 0.000000, 15.108000, 0.000000, \n-            15.108000, 0.000000\n-        <\/result-positions>\n-    <\/test-case>\n-\n-<!-- known to fail in base JDK7, skip\n-    <test-case id=\"Deva locl Marathi\" script=\"deva\" lang=\"MAR\">\n-        <test-font name=\"TestFont1.otf\" version=\"Version 001.000 \" checksum=\"0x75B4A535\" rchecksum=\"0x0004D80A\"\/>\n-\n-        <test-text><\/test-text>\n-\n-        <result-glyphs>\n-            0x00000005, 0x00000001, 0x00000006, 0x0000FFFF\n-        <\/result-glyphs>\n-\n-        <result-indices>\n-            0x00000000, 0x00000001, 0x00000002, 0x00000003\n-        <\/result-indices>\n-\n-        <result-positions>\n-            0.000000, 0.000000, 7.392000, 0.000000, 14.927999, 0.000000, 14.927999, 0.000000, \n-            14.927999, 0.000000\n-        <\/result-positions>\n-    <\/test-case>\n--->\n-\n-    <test-case id=\"Deva ZWJ\" script=\"deva\">\n-        <test-font name=\"raghu.ttf\" version=\"Original Version 1.00 (2005)\" checksum=\"0x088DB135\" rchecksum=\"0x00803FCE\"\/>\n-\n-        <test-text>   <\/test-text>\n-\n-        <result-glyphs>\n-            0x000000A2, 0x0000FFFF, 0x0000FFFF, 0x00000003, 0x00000080, 0x0000005B, 0x0000FFFF, 0x00000003, \n-            0x00000080, 0x00000051, 0x00000001, 0x0000009F, 0x00000003, 0x0000009A, 0x00000051, 0x00000001, \n-            0x00000080\n-        <\/result-glyphs>\n-\n-        <result-indices>\n-            0x00000000, 0x00000001, 0x00000002, 0x00000003, 0x00000006, 0x00000004, 0x00000005, 0x00000007, \n-            0x00000008, 0x00000009, 0x0000000A, 0x0000000B, 0x0000000C, 0x0000000D, 0x0000000E, 0x0000000F, \n-            0x00000010\n-        <\/result-indices>\n-\n-        <result-positions>\n-            0.000000, 0.000000, 10.875000, 0.000000, 10.875000, 0.000000, 10.875000, 0.000000, \n-            16.875000, 0.000000, 24.779297, 0.263672, 27.750000, 0.000000, 27.750000, 0.000000, \n-            33.750000, 0.000000, 44.490234, -0.451172, 44.625000, 0.000000, 44.625000, 0.000000, \n-            52.593750, 0.000000, 58.593750, 0.000000, 68.255859, -0.451172, 65.109375, 0.000000, \n-            65.109375, 0.000000, 75.984375, 0.000000\n-        <\/result-positions>\n-    <\/test-case>\n-\n-    <test-case id=\"Hangul\" script=\"hang\">\n-        <test-font name=\"LucidaSansRegular.ttf\" version=\"Version 1.20 - October 2000\" checksum=\"0xF5D9BA6D\" rchecksum=\"0x029B644F\"\/>\n-\n-        <test-text><\/test-text>\n-\n-        <result-glyphs>\n-            0x00000000, 0x0000FFFF, 0x00000000, 0x0000FFFF, 0x0000FFFF, 0x00000000, 0x0000FFFF\n-        <\/result-glyphs>\n-\n-        <result-indices>\n-            0x00000000, 0x00000001, 0x00000002, 0x00000003, 0x00000004, 0x00000005, 0x00000006\n-        <\/result-indices>\n-\n-        <result-positions>\n-            0.000000, 0.000000, 9.000000, 0.000000, 9.000000, 0.000000, 18.000000, 0.000000, \n-            18.000000, 0.000000, 18.000000, 0.000000, 27.000000, 0.000000, 27.000000, 0.000000\n-        <\/result-positions>\n-    <\/test-case>\n-\n-    <test-case id=\"Hebrew Mark Test\" script=\"hebr\">\n-        <test-font name=\"SBL_Hbrw.ttf\" version=\"Version 1.51 Build 001\" checksum=\"0x5126B325\" rchecksum=\"0x00F5C25B\"\/>\n-\n-        <test-text><\/test-text>\n-\n-        <result-glyphs>\n-            0x0000FFFF, 0x00000055, 0x0000FFFF, 0x0000004B, 0x0000001D, 0x00000097, 0x00000021, 0x00000094, \n-            0x0000001B, 0x0000002D, 0x00000027, 0x00000096, 0x0000003A, 0x0000009A, 0x0000FFFF, 0x00000066, \n-            0x00000027, 0x00000097, 0x0000002F, 0x00000030, 0x00000096, 0x00000027, 0x00000099, 0x0000FFFF, \n-            0x00000051, 0x00000096, 0x0000002F, 0x0000FFFF, 0x00000055, 0x00000027, 0x00000098, 0x0000001F, \n-            0x0000009C, 0x0000001F, 0x00000021, 0x0000009A, 0x0000003A, 0x00000027, 0x00000096, 0x0000FFFF, \n-            0x00000056, 0x00000092, 0x00000024, 0x00000099, 0x00000031, 0x0000FFFF, 0x00000054, 0x0000009A, \n-            0x0000FFFF, 0x00000043, 0x00000021, 0x0000009A, 0x00000025, 0x00000092, 0x0000002F, 0x00000092, \n-            0x0000FFFF, 0x00000067, 0x00000096, 0x00000031, 0x00000092, 0x00000023, 0x00000021, 0x0000009A, \n-            0x0000002B, 0x00000027, 0x00000096, 0x0000001E, 0x0000009A, 0x00000031, 0x00000023, 0x00000027, \n-            0x0000009A, 0x0000003A, 0x0000009A, 0x0000001F, 0x00000094, 0x00000025, 0x0000FFFF, 0x00000054, \n-            0x00000098, 0x0000002B, 0x00000098, 0x0000FFFF, 0x0000005D, 0x00000099, 0x00000021, 0x00000027, \n-            0x00000096, 0x00000031, 0x00000099, 0x0000001B, 0x00000027, 0x00000096, 0x0000001D, 0x00000093, \n-            0x00000021, 0x00000021, 0x0000009A, 0x00000038, 0x0000FFFF, 0x0000004B, 0x0000003A, 0x0000009A, \n-            0x0000FFFF, 0x0000005E, 0x0000FFFF, 0x00000055, 0x00000027, 0x00000098, 0x0000003A, 0x00000094, \n-            0x00000025, 0x00000099, 0x0000001B, 0x00000027, 0x00000096, 0x00000031, 0x00000097, 0x00000029, \n-            0x00000092, 0x0000FFFF, 0x00000066, 0x0000009A, 0x0000002F\n-        <\/result-glyphs>\n-\n-        <result-indices>\n-            0x0000007C, 0x0000007B, 0x0000007A, 0x00000079, 0x00000078, 0x00000077, 0x00000076, 0x00000075, \n-            0x00000074, 0x00000073, 0x00000072, 0x00000071, 0x00000070, 0x0000006F, 0x0000006E, 0x0000006D, \n-            0x0000006C, 0x0000006B, 0x0000006A, 0x00000069, 0x00000068, 0x00000067, 0x00000066, 0x00000065, \n-            0x00000064, 0x00000063, 0x00000062, 0x00000061, 0x00000060, 0x0000005F, 0x0000005E, 0x0000005D, \n-            0x0000005C, 0x0000005B, 0x0000005A, 0x00000059, 0x00000058, 0x00000057, 0x00000056, 0x00000055, \n-            0x00000054, 0x00000053, 0x00000052, 0x00000051, 0x00000050, 0x0000004F, 0x0000004E, 0x0000004D, \n-            0x0000004C, 0x0000004B, 0x0000004A, 0x00000049, 0x00000048, 0x00000047, 0x00000046, 0x00000045, \n-            0x00000044, 0x00000043, 0x00000042, 0x00000041, 0x00000040, 0x0000003F, 0x0000003E, 0x0000003D, \n-            0x0000003C, 0x0000003B, 0x0000003A, 0x00000039, 0x00000038, 0x00000037, 0x00000036, 0x00000035, \n-            0x00000034, 0x00000033, 0x00000032, 0x00000031, 0x00000030, 0x0000002F, 0x0000002E, 0x0000002D, \n-            0x0000002C, 0x0000002B, 0x0000002A, 0x00000029, 0x00000028, 0x00000027, 0x00000026, 0x00000025, \n-            0x00000024, 0x00000023, 0x00000022, 0x00000021, 0x00000020, 0x0000001F, 0x0000001E, 0x0000001D, \n-            0x0000001C, 0x0000001B, 0x0000001A, 0x00000019, 0x00000018, 0x00000017, 0x00000016, 0x00000015, \n-            0x00000014, 0x00000013, 0x00000012, 0x00000011, 0x00000010, 0x0000000F, 0x0000000E, 0x0000000D, \n-            0x0000000C, 0x0000000B, 0x0000000A, 0x00000009, 0x00000008, 0x00000007, 0x00000006, 0x00000005, \n-            0x00000004, 0x00000003, 0x00000002, 0x00000001, 0x00000000\n-        <\/result-indices>\n-\n-        <result-positions>\n-            0.000000, 0.000000, 0.000000, 0.000000, 5.806641, 0.000000, 5.806641, 0.000000, \n-            9.087891, 0.000000, 18.679688, 0.000000, 15.251953, 0.000000, 25.365234, 0.000000, \n-            21.878906, 0.000000, 28.787109, 0.000000, 35.191406, 0.000000, 42.966797, 0.000000, \n-            38.279297, 0.000000, 47.982422, 0.000000, 44.085938, 0.000000, 44.085938, 0.000000, \n-            52.347656, 0.000000, 58.453125, 0.000000, 55.113281, 0.000000, 62.021484, 0.000000, \n-            66.292969, 0.000000, 64.886719, 0.000000, 69.292969, 0.000000, 67.886719, 0.000000, \n-            67.886719, 0.000000, 74.050781, 0.000000, 70.710938, 0.000000, 77.619141, 0.000000, \n-            77.619141, 0.000000, 83.425781, 0.000000, 90.527344, 0.000000, 86.513672, 0.000000, \n-            91.804688, 0.000000, 92.390625, 0.000000, 98.267578, 0.000000, 109.347656, 0.000000, \n-            104.894531, 0.000000, 110.701172, 0.000000, 116.250000, 0.000000, 113.701172, 0.000000, \n-            113.554688, 0.000000, 121.242188, 0.000000, 119.484375, 0.000000, 124.552734, 0.000000, \n-            122.677734, 0.000000, 126.679688, 0.000000, 126.679688, 0.000000, 135.210938, 0.000000, \n-            132.486328, 0.000000, 132.251953, 0.000000, 138.416016, 0.000000, 148.734375, 0.000000, \n-            145.042969, 0.000000, 155.308594, 0.000000, 151.968750, 0.000000, 162.773438, 0.000000, \n-            158.876953, 0.000000, 158.876953, 0.000000, 168.398438, 0.000000, 166.523438, 0.000000, \n-            172.546875, 0.000000, 170.525391, 0.000000, 173.689453, 0.000000, 182.718750, 0.000000, \n-            180.199219, 0.000000, 185.583984, 0.000000, 190.107422, 0.000000, 187.998047, 0.000000, \n-            194.132812, 0.000000, 192.257812, 0.000000, 196.259766, 0.000000, 199.423828, 0.000000, \n-            206.964844, 0.000000, 202.511719, 0.000000, 212.332031, 0.000000, 208.318359, 0.000000, \n-            217.886719, 0.000000, 214.195312, 0.000000, 221.121094, 0.000000, 221.121094, 0.000000, \n-            229.447266, 0.000000, 226.927734, 0.000000, 235.652344, 0.000000, 232.312500, 0.000000, \n-            232.312500, 0.000000, 242.648438, 0.000000, 239.220703, 0.000000, 245.847656, 0.000000, \n-            250.195312, 0.000000, 248.320312, 0.000000, 255.808594, 0.000000, 252.322266, 0.000000, \n-            259.230469, 0.000000, 265.042969, 0.000000, 262.083984, 0.000000, 271.675781, 0.000000, \n-            268.248047, 0.000000, 274.875000, 0.000000, 284.197266, 0.000000, 281.501953, 0.000000, \n-            287.250000, 0.000000, 287.250000, 0.000000, 290.531250, 0.000000, 298.212891, 0.000000, \n-            296.337891, 0.000000, 296.337891, 0.000000, 300.339844, 0.000000, 300.339844, 0.000000, \n-            306.146484, 0.000000, 313.687500, 0.000000, 309.234375, 0.000000, 318.732422, 0.000000, \n-            315.041016, 0.000000, 325.453125, 0.000000, 321.966797, 0.000000, 328.875000, 0.000000, \n-            333.222656, 0.000000, 331.347656, 0.000000, 338.044922, 0.000000, 335.349609, 0.000000, \n-            345.175781, 0.000000, 341.279297, 0.000000, 341.279297, 0.000000, 352.558594, 0.000000, \n-            349.218750, 0.000000, 356.126953, 0.000000\n-        <\/result-positions>\n-    <\/test-case>\n-\n-    <test-case id=\"Not Language Specific\" script=\"latn\">\n-        <test-font name=\"fp9r8a.otf\" version=\"Version 0.9.6 \" checksum=\"0x62C6805F\" rchecksum=\"0x00813376\"\/>\n-\n-        <test-text>hi i a e.<\/test-text>\n-\n-        <result-glyphs>\n-            0x00000107, 0x00000049, 0x0000004A, 0x00000104, 0x00000001, 0x0000004A, 0x00000104, 0x00000001, \n-            0x00000042, 0x00000001, 0x00000108, 0x00000046, 0x00000104, 0x00000108, 0x0000000F\n-        <\/result-glyphs>\n-\n-        <result-indices>\n-            0x00000000, 0x00000001, 0x00000002, 0x00000003, 0x00000004, 0x00000005, 0x00000006, 0x00000007, \n-            0x00000008, 0x00000009, 0x0000000A, 0x0000000B, 0x0000000C, 0x0000000D, 0x0000000E\n-        <\/result-indices>\n-\n-        <result-positions>\n-            0.000000, 0.000000, 7.356000, 0.000000, 14.340000, 0.000000, 17.832001, 0.000000, \n-            22.920000, 0.000000, 25.920000, 0.000000, 29.412001, 0.000000, 34.500000, 0.000000, \n-            37.500000, 0.000000, 43.500000, 0.000000, 46.500000, 0.000000, 50.411999, 0.000000, \n-            56.160000, 0.000000, 61.248001, 0.000000, 65.160004, 0.000000, 68.160004, 0.000000\n-        <\/result-positions>\n-    <\/test-case>\n-\n-<!-- known to fail in base JDK7, skip ('lang' not supported)\n-    <test-case id=\"Romanian Language Specific\" script=\"latn\" lang=\"ROM\">\n-        <test-font name=\"fp9r8a.otf\" version=\"Version 0.9.6 \" checksum=\"0x62C6805F\" rchecksum=\"0x00813376\"\/>\n-\n-        <test-text>hi i a e.<\/test-text>\n-\n-        <result-glyphs>\n-            0x00000127, 0x00000049, 0x0000004A, 0x00000126, 0x00000001, 0x0000004A, 0x00000126, 0x00000001, \n-            0x00000042, 0x00000001, 0x00000128, 0x00000046, 0x00000126, 0x00000128, 0x0000000F\n-        <\/result-glyphs>\n-\n-        <result-indices>\n-            0x00000000, 0x00000001, 0x00000002, 0x00000003, 0x00000004, 0x00000005, 0x00000006, 0x00000007, \n-            0x00000008, 0x00000009, 0x0000000A, 0x0000000B, 0x0000000C, 0x0000000D, 0x0000000E\n-        <\/result-indices>\n-\n-        <result-positions>\n-            0.000000, 0.000000, 7.356000, 0.000000, 14.340000, 0.000000, 17.832001, 0.000000, \n-            22.920000, 0.000000, 25.920000, 0.000000, 29.412001, 0.000000, 34.500000, 0.000000, \n-            37.500000, 0.000000, 43.500000, 0.000000, 46.500000, 0.000000, 50.411999, 0.000000, \n-            56.160000, 0.000000, 61.248001, 0.000000, 65.160004, 0.000000, 68.160004, 0.000000\n-        <\/result-positions>\n-    <\/test-case>\n--->\n-\n-    <test-case id=\"Nafees Nastaleeq Cursive Positioning Test\" script=\"arab\">\n-        <test-font name=\"Nafees Nastaleeq v1.02.ttf\" version=\"Version 1.02\" checksum=\"0x1BD85538\" rchecksum=\"0x0111F234\"\/>\n-\n-        <test-text>    <\/test-text>\n-\n-        <result-glyphs>\n-            0x0000003B, 0x00000344, 0x000001D5, 0x00000318, 0x00000349, 0x0000007C, 0x00000003, 0x0000003D, \n-            0x00000348, 0x000001D5, 0x00000346, 0x000000B5, 0x00000003, 0x0000003A, 0x00000348, 0x000001D5, \n-            0x000002E3, 0x00000344, 0x00000087, 0x00000003, 0x0000003B, 0x00000344, 0x000001D5, 0x00000348, \n-            0x000001E5, 0x00000347, 0x0000006E, 0x00000003, 0x0000003C, 0x00000345, 0x000001D5, 0x00000344, \n-            0x0000011D\n-        <\/result-glyphs>\n-\n-        <result-indices>\n-            0x00000015, 0x00000014, 0x00000014, 0x00000013, 0x00000012, 0x00000012, 0x00000011, 0x00000010, \n-            0x0000000F, 0x0000000F, 0x0000000E, 0x0000000E, 0x0000000D, 0x0000000C, 0x0000000B, 0x0000000B, \n-            0x0000000A, 0x00000009, 0x00000009, 0x00000008, 0x00000007, 0x00000006, 0x00000006, 0x00000005, \n-            0x00000005, 0x00000004, 0x00000004, 0x00000003, 0x00000002, 0x00000001, 0x00000001, 0x00000000, \n-            0x00000000\n-        <\/result-indices>\n-\n-        <result-positions>\n-            0.000000, 0.000000, 3.205078, -11.097656, 1.406250, 0.000000, 4.558594, -1.376953, \n-            9.421875, -5.273438, 7.505859, -6.843750, 11.537109, 0.000000, 12.726562, 0.000000, \n-            20.455078, -4.798828, 15.357422, 0.000000, 19.289062, -13.072266, 18.509766, -1.376953, \n-            22.552734, 0.000000, 23.742188, 0.000000, 30.246094, -4.798828, 25.148438, 0.000000, \n-            28.300781, -1.376953, 32.917969, -13.792969, 30.158203, -7.792969, 35.208984, 0.000000, \n-            36.398438, 0.000000, 39.603516, -11.097656, 37.804688, 0.000000, 45.632812, 3.181641, \n-            40.957031, -1.376953, 44.853516, -6.046875, 42.457031, -5.572266, 46.066406, 0.000000, \n-            47.255859, 0.000000, 49.376953, -11.396484, 48.662109, 0.000000, 52.769531, -14.332031, \n-            51.814453, -1.376953, 56.789062, 0.000000\n-        <\/result-positions>\n-    <\/test-case>\n-\n-    <test-case id=\"Malayalam Samvruthokaram Test\" script=\"mlym\">\n-        <test-font name=\"lohit_ml.ttf\" version=\"Version 1.00\" checksum=\"0x66CB0B82\" rchecksum=\"0x002EEBD8\"\/>\n-\n-        <test-text><\/test-text>\n-\n-        <result-glyphs>\n-            0x00000023, 0x0000003C, 0x00000045\n-        <\/result-glyphs>\n-\n-        <result-indices>\n-            0x00000000, 0x00000001, 0x00000002\n-        <\/result-indices>\n-\n-        <result-positions>\n-            0.000000, 0.000000, 15.117188, 0.000000, 18.503906, 0.000000, 18.503906, 0.000000\n-        <\/result-positions>\n-    <\/test-case>\n-\n-    <test-case id=\"Broken Font Test\" script=\"hani\" lang=\"ZHT\">\n-        <test-font name=\"BMIN00M.TTF\" version=\"Version 2.00\" checksum=\"0xF16BE0C6\" rchecksum=\"0x15E106D0\"\/>\n-\n-        <test-text> <\/test-text>\n-\n-        <result-glyphs>\n-            0x00000292, 0x000024E8, 0x000002D1, 0x00001582, 0x000004A1, 0x00000650, 0x000007E2, 0x00000021, \n-            0x00002395, 0x00001896\n-        <\/result-glyphs>\n-\n-        <result-indices>\n-            0x00000000, 0x00000001, 0x00000002, 0x00000003, 0x00000004, 0x00000005, 0x00000006, 0x00000007, \n-            0x00000008, 0x00000009\n-        <\/result-indices>\n-\n-        <result-positions>\n-            0.000000, 0.000000, 12.000000, 0.000000, 24.000000, 0.000000, 36.000000, 0.000000, \n-            48.000000, 0.000000, 60.000000, 0.000000, 72.000000, 0.000000, 84.000000, 0.000000, \n-            90.000000, 0.000000, 102.000000, 0.000000, 114.000000, 0.000000\n-        <\/result-positions>\n-    <\/test-case>\n-\n-    <test-case id=\"Telugu Syllable Boundary Test\" script=\"telu\">\n-        <test-font name=\"gautami.ttf\" version=\"Version 5.02\" checksum=\"0x45C66919\" rchecksum=\"0x00DBFA1A\"\/>\n-\n-        <test-text><\/test-text>\n-\n-        <result-glyphs>\n-            0x00000057, 0x0000023B, 0x0000FFFF, 0x00000125, 0x00000066, 0x00000241, 0x0000FFFF\n-        <\/result-glyphs>\n-\n-        <result-indices>\n-            0x00000000, 0x00000002, 0x00000001, 0x00000003, 0x00000004, 0x00000005, 0x00000006\n-        <\/result-indices>\n-\n-        <result-positions>\n-            0.000000, 0.000000, 8.285156, 0.000000, 14.894531, 0.000000, 14.894531, 0.000000, \n-            21.503906, 0.000000, 25.136719, 0.000000, 33.421875, 0.000000, 33.421875, 0.000000\n-        <\/result-positions>\n-    <\/test-case>\n-\n-    <test-case id=\"Angsana New Mark Test\" script=\"thai\">\n-        <test-font name=\"ANGSA.TTF\" version=\"Version 5.00\" checksum=\"0x95F16337\" rchecksum=\"0x00724BC4\"\/>\n-\n-        <test-text><\/test-text>\n-\n-        <result-glyphs>\n-            0x0000009D, 0x0000009A, 0x0000009A, 0x000000B8, 0x000000C9, 0x000000D2, 0x000000A1, 0x000000B5, \n-            0x000000A5, 0x000000BB, 0x000000C5, 0x0000008E, 0x000000C3, 0x00000087, 0x000000A8, 0x0000009C, \n-            0x000000C3, 0x00000097, 0x000000C3, 0x000000A6, 0x0000009B, 0x000000B8, 0x000000B0, 0x000000B5, \n-            0x000000AB, 0x000000B4, 0x000000A5, 0x000000B0, 0x000000A5, 0x000000BC, 0x0000006E, 0x0000009A, \n-            0x0000006E, 0x000000B5, 0x000000A4, 0x00000084, 0x000000A8, 0x000000B5, 0x0000008A, 0x0000009A, \n-            0x000000BB, 0x0000006E, 0x0000008A, 0x000000C4, 0x000000AE, 0x00000090, 0x0000006E, 0x000000C4, \n-            0x0000009C, 0x000000C2, 0x00000087, 0x0000009C, 0x0000008E, 0x000000B4, 0x000000AD, 0x00000084, \n-            0x000000B4, 0x0000009D, 0x000000A8, 0x000000BB, 0x0000008A, 0x000000C1, 0x000000B1, 0x0000009C, \n-            0x000000A6, 0x000000B8, 0x0000008D, 0x000000B5, 0x000000AA, 0x000000C5, 0x000000A6, 0x0000006E, \n-            0x000000C2, 0x000000A8, 0x000000B3, 0x0000009E, 0x0000006F, 0x000000B5, 0x000000C1, 0x000000B0, \n-            0x000000C8, 0x000000A4, 0x000000A3, 0x000000A6, 0x000000A6, 0x000000A5, 0x000000B5, 0x0000008D, \n-            0x000000B5, 0x000000AA, 0x000000C5, 0x000000A6, 0x0000006E, 0x0000009D, 0x0000006F, 0x000000B5, \n-            0x0000009C, 0x00000085, 0x000000B0, 0x0000008A, 0x000000A1, 0x000000AA, 0x00000084, 0x000000C1, \n-            0x00000085, 0x000000B5, 0x000000AE, 0x000000A8, 0x000000B4, 0x0000008A, 0x000000C1, 0x000000A8, \n-            0x000000C8, 0x00000084, 0x000000C1, 0x000000A1, 0x000000A6, 0x000000B5, 0x000000B3, 0x000000C5, \n-            0x000000A4, 0x0000006F, 0x000000AD, 0x000000A6, 0x0000006F, 0x000000B5, 0x0000008A, 0x0000009D, \n-            0x0000006F, 0x000000B5, 0x0000009C, 0x00000098, 0x0000006F, 0x000000B0, 0x0000008A, 0x00000085, \n-            0x0000009C, 0x000000A4, 0x000000B5, 0x00000097, 0x0000006F, 0x000000AA, 0x000000A5, 0x000000C1, \n-            0x00000084, 0x000000AA, 0x000000B8, 0x000000A5, 0x0000009C, 0x000000C1, 0x0000009E, 0x000000C8, \n-            0x0000009C, 0x000000A6, 0x000000B3, 0x000000A5, 0x000000B3, 0x0000009A, 0x000000B5, 0x0000008A, \n-            0x000000AE, 0x000000A8, 0x000000B5, 0x000000A5, 0x000000C5, 0x000000A4, 0x000000A8, 0x00000072\n-        <\/result-glyphs>\n-\n-        <result-indices>\n-            0x00000000, 0x00000001, 0x00000002, 0x00000003, 0x00000004, 0x00000005, 0x00000006, 0x00000007, \n-            0x00000008, 0x00000009, 0x0000000A, 0x0000000B, 0x0000000C, 0x0000000D, 0x0000000E, 0x0000000F, \n-            0x00000010, 0x00000011, 0x00000012, 0x00000013, 0x00000014, 0x00000015, 0x00000016, 0x00000017, \n-            0x00000018, 0x00000019, 0x0000001A, 0x0000001B, 0x0000001C, 0x0000001D, 0x0000001E, 0x0000001F, \n-            0x00000020, 0x00000021, 0x00000022, 0x00000023, 0x00000024, 0x00000025, 0x00000026, 0x00000027, \n-            0x00000028, 0x00000029, 0x0000002A, 0x0000002B, 0x0000002C, 0x0000002D, 0x0000002E, 0x0000002F, \n-            0x00000030, 0x00000031, 0x00000032, 0x00000033, 0x00000034, 0x00000035, 0x00000036, 0x00000037, \n-            0x00000038, 0x00000039, 0x0000003A, 0x0000003B, 0x0000003C, 0x0000003D, 0x0000003E, 0x0000003F, \n-            0x00000040, 0x00000041, 0x00000042, 0x00000043, 0x00000044, 0x00000045, 0x00000046, 0x00000047, \n-            0x00000048, 0x00000049, 0x0000004A, 0x0000004B, 0x0000004C, 0x0000004D, 0x0000004E, 0x0000004F, \n-            0x00000050, 0x00000051, 0x00000052, 0x00000053, 0x00000054, 0x00000055, 0x00000056, 0x00000057, \n-            0x00000058, 0x00000059, 0x0000005A, 0x0000005B, 0x0000005C, 0x0000005D, 0x0000005E, 0x0000005F, \n-            0x00000060, 0x00000061, 0x00000062, 0x00000063, 0x00000064, 0x00000065, 0x00000066, 0x00000067, \n-            0x00000068, 0x00000069, 0x0000006A, 0x0000006B, 0x0000006C, 0x0000006D, 0x0000006E, 0x0000006F, \n-            0x00000070, 0x00000071, 0x00000072, 0x00000073, 0x00000074, 0x00000075, 0x00000076, 0x00000077, \n-            0x00000078, 0x00000079, 0x0000007A, 0x0000007B, 0x0000007C, 0x0000007D, 0x0000007E, 0x0000007F, \n-            0x00000080, 0x00000081, 0x00000082, 0x00000083, 0x00000084, 0x00000085, 0x00000086, 0x00000087, \n-            0x00000088, 0x00000089, 0x0000008A, 0x0000008B, 0x0000008C, 0x0000008D, 0x0000008E, 0x0000008F, \n-            0x00000090, 0x00000091, 0x00000092, 0x00000093, 0x00000094, 0x00000095, 0x00000096, 0x00000097, \n-            0x00000098, 0x00000099, 0x0000009A, 0x0000009B, 0x0000009C, 0x0000009D, 0x0000009E, 0x0000009F, \n-            0x000000A0, 0x000000A1, 0x000000A2, 0x000000A3, 0x000000A4, 0x000000A5, 0x000000A6, 0x000000A7\n-        <\/result-indices>\n-\n-        <result-positions>\n-            0.000000, 0.000000, 5.399414, 0.000000, 10.798828, 0.000000, 15.072266, 0.000000, \n-            15.072266, 0.000000, 16.198242, 0.000000, 21.046875, 0.000000, 26.616211, 0.000000, \n-            30.035156, 0.000000, 31.312500, 0.000000, 34.151367, 0.000000, 38.279297, 0.000000, \n-            43.558594, 0.000000, 47.663086, 0.000000, 52.438477, 0.000000, 57.178711, 0.000000, \n-            62.698242, 0.000000, 66.802734, 0.000000, 71.601562, 0.000000, 75.706055, 0.000000, \n-            79.810547, 0.000000, 84.029297, 0.000000, 84.369141, 0.000000, 89.097656, 0.000000, \n-            92.516602, 0.000000, 97.614258, 0.000000, 97.195312, 0.000000, 101.311523, 0.000000, \n-            106.040039, 0.000000, 107.375977, 0.000000, 108.326172, -0.084961, 110.156250, 0.000000, \n-            113.497070, -0.084961, 115.555664, 0.000000, 118.974609, 0.000000, 124.013672, 0.000000, \n-            128.765625, 0.000000, 133.505859, 0.000000, 136.924805, 0.000000, 140.704102, 0.000000, \n-            143.036133, 0.000000, 144.044922, -0.084961, 146.103516, 0.000000, 149.882812, 0.000000, \n-            153.553711, 0.000000, 159.158203, 0.000000, 163.377930, -0.084961, 165.421875, 0.000000, \n-            169.092773, 0.000000, 174.612305, 0.000000, 179.135742, 0.000000, 183.911133, 0.000000, \n-            189.430664, 0.000000, 194.879883, 0.000000, 194.709961, 0.000000, 199.989258, 0.000000, \n-            204.092773, -0.084961, 204.741211, 0.000000, 210.140625, 0.000000, 212.828125, 0.000000, \n-            214.880859, 0.000000, 218.660156, 0.000000, 220.675781, 0.000000, 225.128906, 0.000000, \n-            230.648438, 0.000000, 234.105469, 0.000000, 234.752930, 0.000000, 239.613281, 0.000000, \n-            243.032227, 0.000000, 247.280273, 0.000000, 251.408203, 0.000000, 253.932617, -0.084961, \n-            255.512695, 0.000000, 260.036133, 0.000000, 264.776367, 0.000000, 269.071289, 0.000000, \n-            272.704102, 0.000000, 274.470703, 0.000000, 277.889648, 0.000000, 279.905273, 0.000000, \n-            284.768555, 0.000000, 284.633789, 0.000000, 289.672852, 0.000000, 294.641602, 0.000000, \n-            298.746094, 0.000000, 302.850586, 0.000000, 306.966797, 0.000000, 310.385742, 0.000000, \n-            315.246094, 0.000000, 318.665039, 0.000000, 322.913086, 0.000000, 327.041016, 0.000000, \n-            329.565430, -0.084961, 331.145508, 0.000000, 335.911133, 0.000000, 336.544922, 0.000000, \n-            339.963867, 0.000000, 345.483398, 0.000000, 350.258789, 0.000000, 354.987305, 0.000000, \n-            358.766602, 0.000000, 364.335938, 0.000000, 368.583984, 0.000000, 373.335938, 0.000000, \n-            375.351562, 0.000000, 380.126953, 0.000000, 383.545898, 0.000000, 389.150391, 0.000000, \n-            394.306641, 0.000000, 393.890625, 0.000000, 397.669922, 0.000000, 399.685547, 0.000000, \n-            404.548828, 0.000000, 404.425781, 0.000000, 409.177734, 0.000000, 411.193359, 0.000000, \n-            416.762695, 0.000000, 420.867188, 0.000000, 424.286133, 0.000000, 428.581055, 0.000000, \n-            432.708984, 0.000000, 438.123047, 0.000000, 437.748047, 0.000000, 443.027344, 0.000000, \n-            446.976562, 0.000000, 447.131836, 0.000000, 450.550781, 0.000000, 454.330078, 0.000000, \n-            459.095703, 0.000000, 459.729492, 0.000000, 463.148438, 0.000000, 468.667969, 0.000000, \n-            473.847656, 0.000000, 473.478516, 0.000000, 478.207031, 0.000000, 481.986328, 0.000000, \n-            486.761719, 0.000000, 492.281250, 0.000000, 497.320312, 0.000000, 500.739258, 0.000000, \n-            505.860352, 0.000000, 505.538086, 0.000000, 509.786133, 0.000000, 513.902344, 0.000000, \n-            515.917969, 0.000000, 520.669922, 0.000000, 523.947266, 0.000000, 524.917969, 0.000000, \n-            529.034180, 0.000000, 534.553711, 0.000000, 536.569336, 0.000000, 540.846680, 0.000000, \n-            541.968750, 0.000000, 547.488281, 0.000000, 551.592773, 0.000000, 555.887695, 0.000000, \n-            560.003906, 0.000000, 564.298828, 0.000000, 569.698242, 0.000000, 573.117188, 0.000000, \n-            576.896484, 0.000000, 582.500977, 0.000000, 587.241211, 0.000000, 590.660156, 0.000000, \n-            594.776367, 0.000000, 598.904297, 0.000000, 603.943359, 0.000000, 608.894531, 0.000000, \n-            608.683594, 0.000000\n-        <\/result-positions>\n-    <\/test-case>\n-\n-<!-- known to fail in base JDK7, skip  (come back to this later)\n-    <test-case id=\"Sinhala Al-Lakuna Test\" script=\"sinh\">\n-        <test-font name=\"lklug.hj.ttf\" version=\"Version 0.6 \" checksum=\"0xA190C2F4\" rchecksum=\"0x00922218\"\/>\n-\n-        <test-text>        <\/test-text>\n-\n-        <result-glyphs>\n-            0x0000004A, 0x000001D5, 0x0000FFFF, 0x0000FFFF, 0x0000FFFF, 0x00000003, 0x0000004A, 0x00000018, \n-            0x0000008B, 0x0000FFFF, 0x0000FFFF, 0x00000003, 0x0000004A, 0x0000008A, 0x0000FFFF, 0x0000FFFF, \n-            0x0000FFFF, 0x00000003, 0x0000004A, 0x0000008A, 0x0000FFFF, 0x0000FFFF, 0x0000FFFF, 0x0000008B, \n-            0x0000FFFF, 0x0000FFFF, 0x00000003, 0x000001D6, 0x0000FFFF, 0x0000004A, 0x0000003C, 0x00000003, \n-            0x00000018, 0x0000004A, 0x000001F8, 0x0000FFFF, 0x0000FFFF, 0x0000FFFF, 0x00000003, 0x000000A9, \n-            0x0000FFFF, 0x0000004A, 0x0000007A, 0x0000FFFF, 0x0000FFFF, 0x0000FFFF, 0x0000FFFF, 0x00000003, \n-            0x0000004A, 0x00000203, 0x0000FFFF, 0x0000FFFF, 0x0000FFFF, 0x00000003, 0x000000A9, 0x0000FFFF, \n-            0x0000003D\n-        <\/result-glyphs>\n-\n-        <result-indices>\n-            0x00000004, 0x00000000, 0x00000001, 0x00000002, 0x00000003, 0x00000005, 0x0000000A, 0x00000006, \n-            0x00000007, 0x00000008, 0x00000009, 0x0000000B, 0x00000010, 0x0000000C, 0x0000000D, 0x0000000E, \n-            0x0000000F, 0x00000011, 0x00000019, 0x00000012, 0x00000013, 0x00000014, 0x00000015, 0x00000016, \n-            0x00000017, 0x00000018, 0x0000001A, 0x0000001B, 0x0000001C, 0x0000001E, 0x0000001D, 0x0000001F, \n-            0x00000020, 0x00000025, 0x00000021, 0x00000022, 0x00000023, 0x00000024, 0x00000026, 0x00000027, \n-            0x00000028, 0x0000002D, 0x00000029, 0x0000002A, 0x0000002B, 0x0000002C, 0x0000002D, 0x0000002E, \n-            0x00000033, 0x0000002F, 0x00000030, 0x00000031, 0x00000032, 0x00000034, 0x00000035, 0x00000036, \n-            0x00000037\n-        <\/result-indices>\n-\n-        <result-positions>\n-            0.000000, 0.000000, 8.520000, 0.000000, 19.224001, 0.000000, 19.224001, 0.000000, \n-            19.224001, 0.000000, 19.224001, 0.000000, 26.640001, 0.000000, 35.160004, 0.000000, \n-            45.864006, 0.000000, 51.936005, 0.000000, 51.936005, 0.000000, 51.936005, 0.000000, \n-            59.352005, 0.000000, 67.872009, 0.000000, 82.704010, 0.000000, 82.704010, 0.000000, \n-            82.704010, 0.000000, 82.704010, 0.000000, 90.120010, 0.000000, 98.640015, 0.000000, \n-            113.472015, 0.000000, 113.472015, 0.000000, 113.472015, 0.000000, 113.472015, 0.000000, \n-            119.544014, 0.000000, 119.544014, 0.000000, 119.544014, 0.000000, 126.960014, 0.000000, \n-            137.664017, 0.000000, 137.664017, 0.000000, 146.184021, 0.000000, 154.296021, 0.000000, \n-            161.712021, 0.000000, 172.416016, 0.000000, 180.936020, 0.000000, 189.552017, 0.000000, \n-            189.552017, 0.000000, 189.552017, 0.000000, 189.552017, 0.000000, 196.968018, 0.000000, \n-            205.584015, 0.000000, 205.584015, 0.000000, 214.104019, 0.000000, 222.720016, 0.000000, \n-            222.720016, 0.000000, 222.720016, 0.000000, 222.720016, 0.000000, 222.720016, 0.000000, \n-            230.136017, 0.000000, 238.656021, 0.000000, 254.784027, 0.000000, 254.784027, 0.000000, \n-            254.784027, 0.000000, 254.784027, 0.000000, 262.200012, 0.000000, 270.816010, 0.000000, \n-            270.816010, 0.000000, 279.432007, 0.000000\n-        <\/result-positions>\n-    <\/test-case>\n--->\n-\n-    <test-case id=\"Arabic Presentation Forms LRO Test\" script=\"arab\">\n-        <test-font name=\"trado.ttf\" version=\"Version 1.01\" checksum=\"0x7B68B462\" rchecksum=\"0x00708871\"\/>\n-\n-        <test-text><\/test-text>\n-\n-        <result-glyphs>\n-            0x0000FFFF, 0x00000206, 0x000001A5, 0x000001C2, 0x000001E0, 0x000001F3, 0x000001A2, 0x000001A5\n-        <\/result-glyphs>\n-\n-        <result-indices>\n-            0x00000000, 0x00000001, 0x00000002, 0x00000003, 0x00000004, 0x00000005, 0x00000006, 0x00000007\n-        <\/result-indices>\n-\n-        <result-positions>\n-            0.000000, 0.000000, 0.000000, 0.000000, 5.759766, 0.000000, 7.980469, 0.000000, \n-            11.748047, 0.000000, 15.298828, 0.000000, 17.302734, 0.000000, 19.763672, 0.000000, \n-            21.984375, 0.000000\n-        <\/result-positions>\n-    <\/test-case>\n-\n-    <test-case id=\"Arabic Presentation Forms No LRO Test\" script=\"arab\">\n-        <test-font name=\"trado.ttf\" version=\"Version 1.01\" checksum=\"0x7B68B462\" rchecksum=\"0x00708871\"\/>\n-\n-        <test-text><\/test-text>\n-\n-        <result-glyphs>\n-            0x000001A5, 0x000001A2, 0x000001F3, 0x000001E0, 0x000001C2, 0x000001A5, 0x00000206\n-        <\/result-glyphs>\n-\n-        <result-indices>\n-            0x00000006, 0x00000005, 0x00000004, 0x00000003, 0x00000002, 0x00000001, 0x00000000\n-        <\/result-indices>\n-\n-        <result-positions>\n-            0.000000, 0.000000, 2.220703, 0.000000, 4.681641, 0.000000, 6.685547, 0.000000, \n-            10.236328, 0.000000, 14.003906, 0.000000, 16.224609, 0.000000, 21.984375, 0.000000\n-        <\/result-positions>\n-    <\/test-case>\n-\n-    <test-case id=\"Canonical Char Indices Test\" script=\"latn\">\n-        <test-font name=\"arial.ttf\" version=\"Version 5.01.2x\" checksum=\"0x92F28CF6\" rchecksum=\"0x02CF4C8A\"\/>\n-\n-        <test-text><\/test-text>\n-\n-        <result-glyphs>\n-            0x000009A3, 0x000009A3\n-        <\/result-glyphs>\n-\n-        <result-indices>\n-            0x00000000, 0x00000001\n-        <\/result-indices>\n-\n-        <result-positions>\n-            0.000000, 0.000000, 8.666016, 0.000000, 17.332031, 0.000000\n-        <\/result-positions>\n-    <\/test-case>\n-\n-    <test-case id=\"REPH ZWNJ Test\" script=\"deva\">\n-        <test-font name=\"raghu.ttf\" version=\"Original Version 1.00 (2005)\" checksum=\"0x088DB135\" rchecksum=\"0x00803FCE\"\/>\n-\n-        <test-text> <\/test-text>\n-\n-        <result-glyphs>\n-            0x00000099, 0x0000005B, 0x0000FFFF, 0x00000003, 0x0000009A, 0x00000051, 0x00000001, 0x00000099\n-        <\/result-glyphs>\n-\n-        <result-indices>\n-            0x00000002, 0x00000000, 0x00000001, 0x00000003, 0x00000004, 0x00000005, 0x00000006, 0x00000007\n-        <\/result-indices>\n-\n-        <result-positions>\n-            0.000000, 0.000000, 9.726562, 0.263672, 9.468750, 0.000000, 9.468750, 0.000000, \n-            15.468750, 0.000000, 25.130859, -0.451172, 21.984375, 0.000000, 21.984375, 0.000000, \n-            31.453125, 0.000000\n-        <\/result-positions>\n-    <\/test-case>\n-\n-<!-- known to fail in base JDK7, skip  ( won't load, 'bad font name' )\n-    <test-case id=\"AppleChancery mort\" script=\"latn\">\n-        <test-font name=\"Apple Chancery.ttf\" version=\"6.1d4e1\" checksum=\"0xC01C5902\" rchecksum=\"0x014278BD\"\/>\n-\n-        <test-text>The quick brown fox jumps over the lazy dog.  Jackdaws love my big sphinx of quartz<\/test-text>\n-\n-        <result-glyphs>\n-            0x00000157, 0x0000FFFF, 0x00000048, 0x00000003, 0x00000054, 0x00000058, 0x0000004C, 0x00000046, \n-            0x0000004E, 0x00000003, 0x00000045, 0x00000055, 0x00000052, 0x0000005A, 0x00000051, 0x00000003, \n-            0x00000049, 0x00000052, 0x0000005B, 0x00000003, 0x0000004D, 0x00000058, 0x00000050, 0x00000053, \n-            0x00000056, 0x00000003, 0x00000052, 0x00000059, 0x00000048, 0x00000055, 0x00000003, 0x00000152, \n-            0x0000FFFF, 0x00000048, 0x00000003, 0x0000004F, 0x00000044, 0x0000005D, 0x0000005C, 0x00000003, \n-            0x00000047, 0x00000052, 0x0000004A, 0x00000011, 0x00000003, 0x00000087, 0x00000003, 0x0000002D, \n-            0x00000044, 0x00000046, 0x0000004E, 0x00000047, 0x00000044, 0x0000005A, 0x00000056, 0x00000003, \n-            0x0000004F, 0x00000052, 0x00000059, 0x00000048, 0x00000003, 0x00000050, 0x0000005C, 0x00000003, \n-            0x00000045, 0x0000004C, 0x0000004A, 0x00000003, 0x00000056, 0x00000053, 0x0000004B, 0x0000004C, \n-            0x00000051, 0x0000005B, 0x00000003, 0x00000052, 0x00000049, 0x00000003, 0x00000054, 0x00000058, \n-            0x00000044, 0x00000055, 0x00000057, 0x0000005D\n-        <\/result-glyphs>\n-\n-        <result-indices>\n-            0x00000000, 0x00000001, 0x00000002, 0x00000003, 0x00000004, 0x00000005, 0x00000006, 0x00000007, \n-            0x00000008, 0x00000009, 0x0000000A, 0x0000000B, 0x0000000C, 0x0000000D, 0x0000000E, 0x0000000F, \n-            0x00000010, 0x00000011, 0x00000012, 0x00000013, 0x00000014, 0x00000015, 0x00000016, 0x00000017, \n-            0x00000018, 0x00000019, 0x0000001A, 0x0000001B, 0x0000001C, 0x0000001D, 0x0000001E, 0x0000001F, \n-            0x00000020, 0x00000021, 0x00000022, 0x00000023, 0x00000024, 0x00000025, 0x00000026, 0x00000027, \n-            0x00000028, 0x00000029, 0x0000002A, 0x0000002B, 0x0000002C, 0x0000002D, 0x0000002E, 0x0000002F, \n-            0x00000030, 0x00000031, 0x00000032, 0x00000033, 0x00000034, 0x00000035, 0x00000036, 0x00000037, \n-            0x00000038, 0x00000039, 0x0000003A, 0x0000003B, 0x0000003C, 0x0000003D, 0x0000003E, 0x0000003F, \n-            0x00000040, 0x00000041, 0x00000042, 0x00000043, 0x00000044, 0x00000045, 0x00000046, 0x00000047, \n-            0x00000048, 0x00000049, 0x0000004A, 0x0000004B, 0x0000004C, 0x0000004D, 0x0000004E, 0x0000004F, \n-            0x00000050, 0x00000051, 0x00000052, 0x00000053\n-        <\/result-indices>\n-\n-        <result-positions>\n-            0.000000, 0.000000, 13.523438, 0.000000, 13.523438, 0.000000, 17.982422, 0.000000, \n-            21.316406, 0.000000, 27.134766, 0.000000, 33.861328, 0.000000, 37.412109, 0.000000, \n-            42.005859, 0.000000, 47.554688, 0.000000, 50.888672, 0.000000, 56.707031, 0.000000, \n-            61.705078, 0.000000, 66.849609, 0.000000, 74.378906, 0.000000, 81.152344, 0.000000, \n-            84.486328, 0.000000, 88.230469, 0.000000, 93.375000, 0.000000, 99.386719, 0.000000, \n-            102.720703, 0.000000, 105.914062, 0.000000, 112.640625, 0.000000, 122.109375, 0.000000, \n-            128.080078, 0.000000, 132.345703, 0.000000, 135.679688, 0.000000, 140.824219, 0.000000, \n-            146.232422, 0.000000, 150.691406, 0.000000, 155.689453, 0.000000, 159.023438, 0.000000, \n-            168.908203, 0.000000, 168.908203, 0.000000, 173.367188, 0.000000, 176.701172, 0.000000, \n-            179.900391, 0.000000, 186.058594, 0.000000, 190.998047, 0.000000, 197.501953, 0.000000, \n-            200.835938, 0.000000, 206.994141, 0.000000, 212.138672, 0.000000, 217.734375, 0.000000, \n-            220.212891, 0.000000, 223.546875, 0.000000, 230.214844, 0.000000, 233.548828, 0.000000, \n-            239.003906, 0.000000, 245.162109, 0.000000, 249.755859, 0.000000, 255.304688, 0.000000, \n-            261.462891, 0.000000, 267.621094, 0.000000, 275.150391, 0.000000, 279.416016, 0.000000, \n-            282.750000, 0.000000, 285.949219, 0.000000, 291.093750, 0.000000, 296.501953, 0.000000, \n-            300.960938, 0.000000, 304.294922, 0.000000, 313.763672, 0.000000, 320.267578, 0.000000, \n-            323.601562, 0.000000, 329.419922, 0.000000, 332.970703, 0.000000, 338.566406, 0.000000, \n-            341.900391, 0.000000, 346.166016, 0.000000, 352.136719, 0.000000, 358.523438, 0.000000, \n-            362.074219, 0.000000, 368.847656, 0.000000, 374.859375, 0.000000, 378.193359, 0.000000, \n-            383.337891, 0.000000, 387.082031, 0.000000, 390.416016, 0.000000, 396.234375, 0.000000, \n-            402.960938, 0.000000, 409.119141, 0.000000, 414.117188, 0.000000, 418.365234, 0.000000, \n-            423.304688, 0.000000\n-        <\/result-positions>\n-    <\/test-case>\n--->\n-\n-<!-- known to fail in base JDK7, skip  ( won't load, 'bad font name') \n-    <test-case id=\"Zapfino morx\" script=\"latn\">\n-        <test-font name=\"Zapfino.ttf\" version=\"8.0d1e1\" checksum=\"0x78FF7638\" rchecksum=\"0x00EDBCB6\"\/>\n-\n-        <test-text>Pack my bags with six dozen liquor jugs<\/test-text>\n-\n-        <result-glyphs>\n-            0x00000040, 0x000001F8, 0x00000203, 0x00000230, 0x00000003, 0x00000239, 0x00000274, 0x00000003, \n-            0x000001FE, 0x000001F8, 0x0000021D, 0x00000255, 0x00000003, 0x0000026C, 0x00000228, 0x0000025C, \n-            0x00000223, 0x00000003, 0x00000255, 0x00000228, 0x00000270, 0x00000003, 0x00000207, 0x00000244, \n-            0x0000027A, 0x00000210, 0x0000023D, 0x00000003, 0x00000235, 0x00000228, 0x0000024D, 0x00000264, \n-            0x00000244, 0x00000251, 0x00000003, 0x0000022C, 0x00000264, 0x0000021D, 0x00000255\n-        <\/result-glyphs>\n-\n-        <result-indices>\n-            0x00000000, 0x00000001, 0x00000002, 0x00000003, 0x00000004, 0x00000005, 0x00000006, 0x00000007, \n-            0x00000008, 0x00000009, 0x0000000A, 0x0000000B, 0x0000000C, 0x0000000D, 0x0000000E, 0x0000000F, \n-            0x00000010, 0x00000011, 0x00000012, 0x00000013, 0x00000014, 0x00000015, 0x00000016, 0x00000017, \n-            0x00000018, 0x00000019, 0x0000001A, 0x0000001B, 0x0000001C, 0x0000001D, 0x0000001E, 0x0000001F, \n-            0x00000020, 0x00000021, 0x00000022, 0x00000023, 0x00000024, 0x00000025, 0x00000026\n-        <\/result-indices>\n-\n-        <result-positions>\n-            0.000000, 0.000000, 12.630000, 0.000000, 21.180000, 0.000000, 27.600000, 0.000000, \n-            36.599998, 0.000000, 42.599998, 0.000000, 53.160000, 0.000000, 59.970001, 0.000000, \n-            65.970001, 0.000000, 73.620003, 0.000000, 82.170006, 0.000000, 89.370003, 0.000000, \n-            94.740005, 0.000000, 100.740005, 0.000000, 112.050003, 0.000000, 117.480003, 0.000000, \n-            123.420006, 0.000000, 131.400009, 0.000000, 137.400009, 0.000000, 142.770004, 0.000000, \n-            148.199997, 0.000000, 155.699997, 0.000000, 161.699997, 0.000000, 169.830002, 0.000000, \n-            177.330002, 0.000000, 184.020004, 0.000000, 190.169998, 0.000000, 198.000000, 0.000000, \n-            204.000000, 0.000000, 210.089996, 0.000000, 215.519989, 0.000000, 223.229996, 0.000000, \n-            230.940002, 0.000000, 238.440002, 0.000000, 244.290009, 0.000000, 250.290009, 0.000000, \n-            256.140015, 0.000000, 263.850006, 0.000000, 271.050018, 0.000000, 276.420013, 0.000000\n-        <\/result-positions>\n-    <\/test-case>\n--->\n-\n-    <test-case id=\"SourceCodePro-Regular.otf\" script=\"latn\">\n-        <test-font name=\"SourceCodePro-Regular.otf\" version=\"Version 1.009;PS 1.000;hotconv 1.0.70;makeotf.lib2.5.5900\" checksum=\"0x9EFE425F\" rchecksum=\"0x0074AEC5\"\/>\n-\n-        <test-text>Li kien kien, li kieku kieku.<\/test-text>\n-\n-        <result-glyphs>\n-            0x0000000D, 0x00000024, 0x00000001, 0x00000026, 0x00000024, 0x00000020, 0x00000029, 0x00000001, \n-            0x00000026, 0x00000024, 0x00000020, 0x00000029, 0x000001D0, 0x00000001, 0x00000027, 0x00000024, \n-            0x00000001, 0x00000026, 0x00000024, 0x00000020, 0x00000026, 0x00000030, 0x00000001, 0x00000026, \n-            0x00000024, 0x00000020, 0x00000026, 0x00000030, 0x000001CF\n-        <\/result-glyphs>\n-\n-        <result-indices>\n-            0x00000000, 0x00000001, 0x00000002, 0x00000003, 0x00000004, 0x00000005, 0x00000006, 0x00000007, \n-            0x00000008, 0x00000009, 0x0000000A, 0x0000000B, 0x0000000C, 0x0000000D, 0x0000000E, 0x0000000F, \n-            0x00000010, 0x00000011, 0x00000012, 0x00000013, 0x00000014, 0x00000015, 0x00000016, 0x00000017, \n-            0x00000018, 0x00000019, 0x0000001A, 0x0000001B, 0x0000001C\n-        <\/result-indices>\n-\n-        <result-positions>\n-            0.000000, 0.000000, 7.200000, 0.000000, 14.400000, 0.000000, 21.599998, 0.000000, \n-            28.799999, 0.000000, 36.000000, 0.000000, 43.200001, 0.000000, 50.400002, 0.000000, \n-            57.600002, 0.000000, 64.800003, 0.000000, 72.000000, 0.000000, 79.199997, 0.000000, \n-            86.399994, 0.000000, 93.599991, 0.000000, 100.799988, 0.000000, 107.999985, 0.000000, \n-            115.199982, 0.000000, 122.399979, 0.000000, 129.599976, 0.000000, 136.799973, 0.000000, \n-            143.999969, 0.000000, 151.199966, 0.000000, 158.399963, 0.000000, 165.599960, 0.000000, \n-            172.799957, 0.000000, 179.999954, 0.000000, 187.199951, 0.000000, 194.399948, 0.000000, \n-            201.599945, 0.000000, 208.799942, 0.000000\n-        <\/result-positions>\n-    <\/test-case>\n-\n-    <test-case id=\"SourceSansPro-Regular.otf\" script=\"latn\">\n-        <test-font name=\"SourceSansPro-Regular.otf\" version=\"Version 1.036;PS 1.000;hotconv 1.0.70;makeotf.lib2.5.5900\" checksum=\"0x0EDDDCF3\" rchecksum=\"0x008F9D5C\"\/>\n-\n-        <test-text>Il-Mistoqsija ot l-gerf.<\/test-text>\n-\n-        <result-glyphs>\n-            0x0000000A, 0x00000027, 0x00000210, 0x0000000E, 0x00000024, 0x0000002E, 0x0000002F, 0x0000002A, \n-            0x0000002C, 0x0000002E, 0x00000024, 0x00000025, 0x0000001C, 0x00000001, 0x0000002A, 0x0000011F, \n-            0x0000002F, 0x00000001, 0x00000027, 0x00000210, 0x00000022, 0x0000011F, 0x00000020, 0x0000002D, \n-            0x00000021, 0x000001FB\n-        <\/result-glyphs>\n-\n-        <result-indices>\n-            0x00000000, 0x00000001, 0x00000002, 0x00000003, 0x00000004, 0x00000005, 0x00000006, 0x00000007, \n-            0x00000008, 0x00000009, 0x0000000A, 0x0000000B, 0x0000000C, 0x0000000D, 0x0000000E, 0x0000000F, \n-            0x00000010, 0x00000011, 0x00000012, 0x00000013, 0x00000014, 0x00000015, 0x00000016, 0x00000017, \n-            0x00000018, 0x00000019\n-        <\/result-indices>\n-\n-        <result-positions>\n-            0.000000, 0.000000, 3.096000, 0.000000, 6.156000, 0.000000, 9.888000, 0.000000, \n-            18.552000, 0.000000, 21.504000, 0.000000, 26.532000, 0.000000, 30.467999, 0.000000, \n-            36.972000, 0.000000, 43.571999, 0.000000, 48.599998, 0.000000, 51.551998, 0.000000, \n-            54.515999, 0.000000, 60.660000, 0.000000, 63.084000, 0.000000, 69.587997, 0.000000, \n-            76.115997, 0.000000, 80.171997, 0.000000, 82.596001, 0.000000, 85.655998, 0.000000, \n-            89.388000, 0.000000, 95.435997, 0.000000, 101.963997, 0.000000, 107.916000, 0.000000, \n-            112.080002, 0.000000, 114.984001, 0.000000, 117.972000, 0.000000\n-        <\/result-positions>\n-    <\/test-case>\n-\n-    <test-case id=\"Tibetan\" script=\"tibt\">\n-        <test-font name=\"Jomolhari-alpha3c-0605331.ttf\" version=\"Version alpha 0.003c 2006\" checksum=\"0x0C1F08DC\" rchecksum=\"0x067378EF\"\/>\n-\n-        <test-text> <\/test-text>\n-\n-        <result-glyphs>\n-            0x00000145, 0x0000FFFF, 0x00000151, 0x00000151, 0x00000003, 0x0000046C, 0x00000BFD, 0x0000059A, \n-            0x0000014E, 0x0000046C, 0x00000BFD, 0x0000059A, 0x0000014E, 0x000002CA, 0x0000FFFF, 0x00000BFD, \n-            0x0000014E, 0x0000050E, 0x00000611, 0x00000848, 0x0000014E, 0x0000093C, 0x0000FFFF, 0x0000098B\n-        <\/result-glyphs>\n-\n-        <result-indices>\n-            0x00000000, 0x00000001, 0x00000002, 0x00000003, 0x00000004, 0x00000005, 0x00000006, 0x00000007, \n-            0x00000008, 0x00000009, 0x0000000A, 0x0000000B, 0x0000000C, 0x0000000D, 0x0000000E, 0x0000000F, \n-            0x00000010, 0x00000011, 0x00000012, 0x00000013, 0x00000014, 0x00000015, 0x00000016, 0x00000017\n-        <\/result-indices>\n-\n-        <result-positions>\n-            0.000000, 0.000000, 14.906250, 0.000000, 14.906250, 0.000000, 17.648438, 0.000000, \n-            20.390625, 0.000000, 23.906250, 0.000000, 29.109375, 0.000000, 29.109375, 0.000000, \n-            34.171875, 0.000000, 35.929688, 0.000000, 41.132812, 0.000000, 41.132812, 0.000000, \n-            46.195312, 0.000000, 47.953125, 0.000000, 54.773438, 0.000000, 54.773438, 0.000000, \n-            54.773438, 0.000000, 56.531250, 0.000000, 61.875000, 0.000000, 67.570312, 0.000000, \n-            73.195312, 0.000000, 74.953125, 0.000000, 80.437500, 0.000000, 80.437500, 0.000000, \n-            87.328125, 0.000000\n-        <\/result-positions>\n-    <\/test-case>\n-\n-    <test-case id=\"Old Hangul\" script=\"hang\">\n-        <test-font name=\"UnBatangOdal.ttf\" version=\"Version 1.00\" checksum=\"0x4BA78B70\" rchecksum=\"0x0A18D67F\"\/>\n-\n-        <test-text>   <\/test-text>\n-\n-        <result-glyphs>\n-            0x000044FF, 0x00004707, 0x00004859, 0x00000005, 0x0000462B, 0x00004707, 0x00004785, 0x000019B2, \n-            0x00000005, 0x00004361, 0x00004707, 0x0000498D, 0x00000005, 0x000044C3, 0x00004707, 0x00004911\n-        <\/result-glyphs>\n-\n-        <result-indices>\n-            0x00000000, 0x00000001, 0x00000002, 0x00000003, 0x00000004, 0x00000005, 0x00000006, 0x00000007, \n-            0x00000008, 0x00000009, 0x0000000A, 0x0000000B, 0x0000000C, 0x0000000D, 0x0000000E, 0x0000000F\n-        <\/result-indices>\n-\n-        <result-positions>\n-            0.000000, 0.000000, 12.000000, 0.000000, 12.000000, 0.000000, 12.000000, 0.000000, \n-            14.700000, 0.000000, 26.700001, 0.000000, 26.700001, 0.000000, 26.700001, 0.000000, \n-            38.700001, 0.000000, 41.400002, 0.000000, 53.400002, 0.000000, 53.400002, 0.000000, \n-            53.400002, 0.000000, 56.100002, 0.000000, 68.100006, 0.000000, 68.100006, 0.000000, \n-            68.100006, 0.000000\n-        <\/result-positions>\n-    <\/test-case>\n-\n-    <test-case id=\"DevaRotate\" script=\"deva\">\n-        <test-font name=\"LucidaSansRegular.ttf\" version=\"Version 1.20 - October 2000\" checksum=\"0xF5D9BA6D\" rchecksum=\"0x029B644F\"\/>\n-\n-        <test-text> <\/test-text>\n-\n-        <result-glyphs>\n-            0x00000901, 0x00000931, 0x00000003, 0x00000956, 0x00000931\n-        <\/result-glyphs>\n-\n-        <result-indices>\n-            0x00000000, 0x00000001, 0x00000002, 0x00000003, 0x00000003\n-        <\/result-indices>\n-\n-        <result-positions>\n-            0.000000, 0.000000, 5.935547, 0.000000, 8.548828, 0.000000, 12.345703, 0.000000, \n-            17.085938, 0.000000, 18.345703, 0.000000\n-        <\/result-positions>\n-    <\/test-case>\n-\n-\n-    <test-case id=\"DevaGASP\" script=\"deva\">\n-        <test-font name=\"LucidaSansRegular.ttf\" version=\"Version 1.20 - October 2000\" checksum=\"0xF5D9BA6D\" rchecksum=\"0x029B644F\"\/>\n-\n-        <test-text><\/test-text>\n-\n-        <result-glyphs>\n-            0x000008F1, 0x000008EE, 0x000009CB, 0x0000FFFF, 0x0000FFFF, 0x00000931, 0x00000940, 0x0000FFFF, \n-            0x0000092A\n-        <\/result-glyphs>\n-\n-        <result-indices>\n-            0x00000000, 0x00000001, 0x00000002, 0x00000004, 0x00000003, 0x00000005, 0x00000006, 0x00000007, \n-            0x00000008\n-        <\/result-indices>\n-\n-        <result-positions>\n-            0.000000, 0.000000, 9.076172, 0.000000, 9.076172, 0.000000, 16.025391, 0.000000, \n-            16.025391, 0.000000, 16.025391, 0.000000, 16.025391, 0.000000, 23.976562, 0.000000, \n-            23.976562, 0.000000, 27.304688, 0.000000\n-        <\/result-positions>\n-    <\/test-case>\n-\n-<\/layout-tests>\n","filename":"test\/jdk\/java\/awt\/font\/TextLayout\/TestLayoutVsICU_jdkbase.xml","additions":0,"deletions":1827,"binary":false,"changes":1827,"status":"deleted"},{"patch":"@@ -24,2 +24,11 @@\n-import org.junit.jupiter.api.Test;\n-import static org.junit.jupiter.api.Assertions.*;\n+import java.nio.file.Files;\n+import java.nio.file.Paths;\n+\n+import jdk.test.lib.process.OutputAnalyzer;\n+import jdk.test.lib.process.ProcessTools;\n+import org.junit.jupiter.api.Assumptions;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.params.ParameterizedTest;\n+import org.junit.jupiter.params.provider.ValueSource;\n+\n+import static jdk.test.lib.Utils.*;\n@@ -29,1 +38,1 @@\n- * @bug 8341975 8351435\n+ * @bug 8341975 8351435 8361613\n@@ -32,6 +41,6 @@\n- * @modules jdk.internal.le\n- * @run junit\/othervm -Djdk.console=jdk.internal.le -Dstdout.encoding=UTF-8 DefaultCharsetTest\n- * @run junit\/othervm -Djdk.console=jdk.internal.le -Dstdout.encoding=ISO-8859-1 DefaultCharsetTest\n- * @run junit\/othervm -Djdk.console=jdk.internal.le -Dstdout.encoding=US-ASCII DefaultCharsetTest\n- * @run junit\/othervm -Djdk.console=jdk.internal.le -Dstdout.encoding=foo DefaultCharsetTest\n- * @run junit\/othervm -Djdk.console=jdk.internal.le DefaultCharsetTest\n+ * @requires (os.family == \"linux\") | (os.family == \"mac\")\n+ * @library \/test\/lib\n+ * @build jdk.test.lib.Utils\n+ *        jdk.test.lib.JDKToolFinder\n+ *        jdk.test.lib.process.ProcessTools\n+ * @run junit DefaultCharsetTest\n@@ -40,2 +49,24 @@\n-    @Test\n-    public void testDefaultCharset() {\n+    @BeforeAll\n+    static void checkExpectAvailability() {\n+        \/\/ check \"expect\" command availability\n+        var expect = Paths.get(\"\/usr\/bin\/expect\");\n+        Assumptions.assumeTrue(Files.exists(expect) && Files.isExecutable(expect),\n+            \"'\" + expect + \"' not found. Test ignored.\");\n+    }\n+    @ParameterizedTest\n+    @ValueSource(strings = {\"UTF-8\", \"ISO-8859-1\", \"US-ASCII\", \"foo\", \"\"})\n+    void testDefaultCharset(String stdoutEncoding) throws Exception {\n+        \/\/ invoking \"expect\" command\n+        OutputAnalyzer oa = ProcessTools.executeProcess(\n+            \"expect\",\n+            \"-n\",\n+            TEST_SRC + \"\/defaultCharset.exp\",\n+            TEST_CLASSES,\n+            TEST_JDK + \"\/bin\/java\",\n+            \"-Dstdout.encoding=\" + stdoutEncoding,\n+            getClass().getName());\n+        oa.reportDiagnosticSummary();\n+        oa.shouldHaveExitValue(0);\n+    }\n+\n+    public static void main(String... args) {\n@@ -45,7 +76,9 @@\n-        System.out.println(\"\"\"\n-                    stdout.encoding = %s\n-                    System.out.charset() = %s\n-                    System.console().charset() = %s\n-                \"\"\".formatted(stdoutEncoding, sysoutCharset.name(), consoleCharset.name()));\n-        assertEquals(consoleCharset, sysoutCharset,\n-            \"Charsets for System.out and Console differ for stdout.encoding: %s\".formatted(stdoutEncoding));\n+        System.out.printf(\"\"\"\n+                stdout.encoding = %s\n+                System.out.charset() = %s\n+                System.console().charset() = %s\n+            \"\"\", stdoutEncoding, sysoutCharset.name(), consoleCharset.name());\n+        if (!consoleCharset.equals(sysoutCharset)) {\n+            System.err.printf(\"Charsets for System.out and Console differ for stdout.encoding: %s%n\", stdoutEncoding);\n+            System.exit(-1);\n+        }\n","filename":"test\/jdk\/java\/io\/Console\/DefaultCharsetTest.java","additions":51,"deletions":18,"binary":false,"changes":69,"status":"modified"},{"patch":"@@ -24,1 +24,0 @@\n-import java.io.File;\n@@ -29,0 +28,3 @@\n+import java.nio.file.Files;\n+import java.nio.file.Paths;\n+import java.util.function.Predicate;\n@@ -30,0 +32,1 @@\n+import jdk.test.lib.process.OutputAnalyzer;\n@@ -31,0 +34,4 @@\n+import org.junit.jupiter.api.Assumptions;\n+import org.junit.jupiter.api.Test;\n+\n+import static jdk.test.lib.Utils.*;\n@@ -34,1 +41,1 @@\n- * @bug 8330276 8351435\n+ * @bug 8330276 8351435 8361613\n@@ -36,0 +43,1 @@\n+ * @requires (os.family == \"linux\") | (os.family == \"mac\")\n@@ -37,1 +45,5 @@\n- * @modules jdk.internal.le jdk.localedata\n+ * @build jdk.test.lib.Utils\n+ *        jdk.test.lib.JDKToolFinder\n+ *        jdk.test.lib.process.ProcessTools\n+ * @modules jdk.localedata\n+ * @run junit LocaleTest\n@@ -40,2 +52,2 @@\n-    private static Calendar TODAY  = new GregorianCalendar(2024, Calendar.APRIL, 22);\n-    private static String FORMAT = \"%1$tY-%1$tB-%1$te %1$tA\";\n+    private static final Calendar TODAY = new GregorianCalendar(2024, Calendar.APRIL, 22);\n+    private static final String FORMAT = \"%1$tY-%1$tB-%1$te %1$tA\";\n@@ -45,1 +57,1 @@\n-    private static List<String> EXPECTED = List.of(\n+    private static final List<String> EXPECTED = List.of(\n@@ -56,25 +68,25 @@\n-    public static void main(String... args) throws Throwable {\n-        if (args.length == 0) {\n-            \/\/ no arg will launch the child process that actually perform tests\n-            var pb = ProcessTools.createTestJavaProcessBuilder(\n-                    \"-Djdk.console=jdk.internal.le\",\n-                    \"LocaleTest\", \"dummy\");\n-            var input = new File(System.getProperty(\"test.src\", \".\"), \"input.txt\");\n-            pb.redirectInput(input);\n-            var oa = ProcessTools.executeProcess(pb);\n-            if (oa.getExitValue() == -1) {\n-                System.out.println(\"System.console() returns null. Ignoring the test.\");\n-            } else {\n-                var output = oa.asLines();\n-                var resultText =\n-                    \"\"\"\n-                    Actual output: %s\n-                    Expected output: %s\n-                    \"\"\".formatted(output, EXPECTED);\n-                if (!output.equals(EXPECTED)) {\n-                    throw new RuntimeException(\"Standard out had unexpected strings:\\n\" + resultText);\n-                } else {\n-                    oa.shouldHaveExitValue(0);\n-                    System.out.println(\"Formatting with explicit Locale succeeded.\\n\" + resultText);\n-                }\n-            }\n+    @Test\n+    void testLocale() throws Exception {\n+        \/\/ check \"expect\" command availability\n+        var expect = Paths.get(\"\/usr\/bin\/expect\");\n+        Assumptions.assumeTrue(Files.exists(expect) && Files.isExecutable(expect),\n+            \"'\" + expect + \"' not found. Test ignored.\");\n+\n+        \/\/ invoking \"expect\" command\n+        OutputAnalyzer oa = ProcessTools.executeProcess(\n+            \"expect\",\n+            \"-n\",\n+            TEST_SRC + \"\/locale.exp\",\n+            TEST_CLASSES,\n+            TEST_JDK + \"\/bin\/java\",\n+            getClass().getName());\n+\n+        var stdout =\n+            oa.stdoutAsLines().stream().filter(Predicate.not(String::isEmpty)).toList();\n+        var resultText =\n+            \"\"\"\n+            Actual output: %s\n+            Expected output: %s\n+            \"\"\".formatted(stdout, EXPECTED);\n+        if (!stdout.equals(EXPECTED)) {\n+            throw new RuntimeException(\"Standard out had unexpected strings:\\n\" + resultText);\n@@ -82,11 +94,17 @@\n-            var con = System.console();\n-            if (con != null) {\n-                \/\/ tests these additional methods that take a Locale\n-                con.format(Locale.UK, FORMAT, TODAY);\n-                con.printf(\"\\n\");\n-                con.printf(Locale.FRANCE, FORMAT, TODAY);\n-                con.printf(\"\\n\");\n-                con.readLine(Locale.GERMANY, FORMAT, TODAY);\n-                con.printf(\"\\n\");\n-                con.readPassword(Locale.of(\"es\"), FORMAT, TODAY);\n-                con.printf(\"\\n\");\n+            oa.shouldHaveExitValue(0);\n+            System.out.println(\"Formatting with explicit Locale succeeded.\\n\" + resultText);\n+        }\n+    }\n+\n+    public static void main(String... args) throws Throwable {\n+        var con = System.console();\n+        if (con != null) {\n+            \/\/ tests these additional methods that take a Locale\n+            con.format(Locale.UK, FORMAT, TODAY);\n+            con.printf(\"\\n\");\n+            con.printf(Locale.FRANCE, FORMAT, TODAY);\n+            con.printf(\"\\n\");\n+            con.readLine(Locale.GERMANY, FORMAT, TODAY);\n+            con.printf(\"\\n\");\n+            con.readPassword(Locale.of(\"es\"), FORMAT, TODAY);\n+            con.printf(\"\\n\");\n@@ -94,12 +112,11 @@\n-                \/\/ tests null locale\n-                con.format((Locale)null, FORMAT, TODAY);\n-                con.printf(\"\\n\");\n-                con.printf((Locale)null, FORMAT, TODAY);\n-                con.printf(\"\\n\");\n-                con.readLine((Locale)null, FORMAT, TODAY);\n-                con.printf(\"\\n\");\n-                con.readPassword((Locale)null, FORMAT, TODAY);\n-            } else {\n-                \/\/ Exit with -1\n-                System.exit(-1);\n-            }\n+            \/\/ tests null locale\n+            con.format((Locale)null, FORMAT, TODAY);\n+            con.printf(\"\\n\");\n+            con.printf((Locale)null, FORMAT, TODAY);\n+            con.printf(\"\\n\");\n+            con.readLine((Locale)null, FORMAT, TODAY);\n+            con.printf(\"\\n\");\n+            con.readPassword((Locale)null, FORMAT, TODAY);\n+        } else {\n+            \/\/ Exit with -1\n+            System.exit(-1);\n","filename":"test\/jdk\/java\/io\/Console\/LocaleTest.java","additions":71,"deletions":54,"binary":false,"changes":125,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n- * @bug 8295803 8299689 8351435\n+ * @bug 8295803 8299689 8351435 8361613\n@@ -29,5 +29,4 @@\n- * @modules java.base\/java.io:+open\n- * @run main\/othervm ModuleSelectionTest java.base\n- * @run main\/othervm -Djdk.console=jdk.internal.le ModuleSelectionTest jdk.internal.le\n- * @run main\/othervm -Djdk.console=java.base ModuleSelectionTest java.base\n- * @run main\/othervm --limit-modules java.base ModuleSelectionTest java.base\n+ * @library \/test\/lib\n+ * @build jdk.test.lib.Utils\n+ *        jdk.test.lib.process.ProcessTools\n+ * @run junit ModuleSelectionTest\n@@ -39,0 +38,12 @@\n+import java.nio.file.Files;\n+import java.nio.file.Paths;\n+import java.util.stream.Stream;\n+\n+import jdk.test.lib.process.OutputAnalyzer;\n+import jdk.test.lib.process.ProcessTools;\n+import org.junit.jupiter.api.Assumptions;\n+import org.junit.jupiter.params.ParameterizedTest;\n+import org.junit.jupiter.params.provider.Arguments;\n+import org.junit.jupiter.params.provider.MethodSource;\n+\n+import static jdk.test.lib.Utils.*;\n@@ -41,0 +52,39 @@\n+    private static Stream<Arguments> options() {\n+        return Stream.of(\n+            Arguments.of(\"-Djdk.console=foo\", \"java.base\"),\n+            Arguments.of(\"-Djdk.console=java.base\", \"java.base\"),\n+            Arguments.of(\"-Djdk.console=jdk.internal.le\", \"jdk.internal.le\"),\n+            Arguments.of(\"--limit-modules java.base\", \"java.base\")\n+        );\n+    }\n+\n+    @ParameterizedTest\n+    @MethodSource(\"options\")\n+    void testNonTTY(String opts) throws Exception {\n+        opts = opts +\n+            \" --add-opens java.base\/java.io=ALL-UNNAMED ModuleSelectionTest null\";\n+        OutputAnalyzer output = ProcessTools.executeTestJava(opts.split(\" \"));\n+        output.reportDiagnosticSummary();\n+        output.shouldHaveExitValue(0);\n+    }\n+\n+    @ParameterizedTest\n+    @MethodSource(\"options\")\n+    void testTTY(String opts, String expected) throws Exception {\n+        \/\/ check \"expect\" command availability\n+        var expect = Paths.get(\"\/usr\/bin\/expect\");\n+        Assumptions.assumeTrue(Files.exists(expect) && Files.isExecutable(expect),\n+            \"'\" + expect + \"' not found. Test ignored.\");\n+\n+        opts = \"expect -n \" + TEST_SRC + \"\/moduleSelection.exp \" +\n+            TEST_CLASSES + \" \" +\n+            expected + \" \" +\n+            TEST_JDK + \"\/bin\/java\" +\n+            \" --add-opens java.base\/java.io=ALL-UNNAMED \"\n+            + opts;\n+        \/\/ invoking \"expect\" command\n+        OutputAnalyzer output = ProcessTools.executeProcess(opts.split(\" \"));\n+        output.reportDiagnosticSummary();\n+        output.shouldHaveExitValue(0);\n+    }\n+\n@@ -52,4 +102,1 @@\n-        var expected = switch (args[0]) {\n-            case \"java.base\" -> istty ? \"java.base\" : \"null\";\n-            default -> args[0];\n-        };\n+        var expected = args[0];\n@@ -65,1 +112,1 @@\n-            System.out.printf(\"%s is the expected implementation. (tty: %s)\\n\", impl, istty);\n+            System.out.printf(\"%s is the expected implementation. (tty: %s)\\n\", actual, istty);\n","filename":"test\/jdk\/java\/io\/Console\/ModuleSelectionTest.java","additions":58,"deletions":11,"binary":false,"changes":69,"status":"modified"},{"patch":"@@ -0,0 +1,32 @@\n+#\n+# Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+# DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+#\n+# This code is free software; you can redistribute it and\/or modify it\n+# under the terms of the GNU General Public License version 2 only, as\n+# published by the Free Software Foundation.\n+#\n+# This code is distributed in the hope that it will be useful, but WITHOUT\n+# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+# FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+# version 2 for more details (a copy is included in the LICENSE file that\n+# accompanied this code).\n+#\n+# You should have received a copy of the GNU General Public License version\n+# 2 along with this work; if not, write to the Free Software Foundation,\n+# Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+#\n+# Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+# or visit www.oracle.com if you need additional information or have any\n+# questions.\n+#\n+\n+# simply invoking java under expect command\n+set classpath [lrange $argv 0 0]\n+set java [lrange $argv 1 1]\n+set stdoutProp [lrange $argv 2 2]\n+set clsname [lrange $argv 3 3]\n+eval spawn $java -classpath $classpath $stdoutProp $clsname\n+expect eof\n+set result [wait]\n+exit [lindex $result 3]\n","filename":"test\/jdk\/java\/io\/Console\/defaultCharset.exp","additions":32,"deletions":0,"binary":false,"changes":32,"status":"added"},{"patch":"@@ -0,0 +1,37 @@\n+#\n+# Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+# DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+#\n+# This code is free software; you can redistribute it and\/or modify it\n+# under the terms of the GNU General Public License version 2 only, as\n+# published by the Free Software Foundation.\n+#\n+# This code is distributed in the hope that it will be useful, but WITHOUT\n+# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+# FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+# version 2 for more details (a copy is included in the LICENSE file that\n+# accompanied this code).\n+#\n+# You should have received a copy of the GNU General Public License version\n+# 2 along with this work; if not, write to the Free Software Foundation,\n+# Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+#\n+# Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+# or visit www.oracle.com if you need additional information or have any\n+# questions.\n+#\n+\n+# simply invoking java under expect command\n+set classpath [lrange $argv 0 0]\n+set java [lrange $argv 1 1]\n+set clsname [lrange $argv 2 2]\n+eval spawn -noecho $java -classpath $classpath $clsname\n+\n+# sends CR 4 times (readLine x 2, readPassword x 2)\n+send \"\\r\"\n+send \"\\r\"\n+send \"\\r\"\n+send \"\\r\"\n+expect eof\n+set result [wait]\n+exit [lindex $result 3]\n","filename":"test\/jdk\/java\/io\/Console\/locale.exp","additions":37,"deletions":0,"binary":false,"changes":37,"status":"added"},{"patch":"@@ -0,0 +1,30 @@\n+#\n+# Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+# DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+#\n+# This code is free software; you can redistribute it and\/or modify it\n+# under the terms of the GNU General Public License version 2 only, as\n+# published by the Free Software Foundation.\n+#\n+# This code is distributed in the hope that it will be useful, but WITHOUT\n+# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+# FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+# version 2 for more details (a copy is included in the LICENSE file that\n+# accompanied this code).\n+#\n+# You should have received a copy of the GNU General Public License version\n+# 2 along with this work; if not, write to the Free Software Foundation,\n+# Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+#\n+# Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+# or visit www.oracle.com if you need additional information or have any\n+# questions.\n+#\n+\n+# simply invoking java under expect command\n+set classpath [lrange $argv 0 0]\n+set expected [lrange $argv 1 1]\n+set java [lrange $argv 2 2]\n+set opts [lrange $argv 3 end]\n+eval spawn $java $opts -classpath $classpath ModuleSelectionTest $expected\n+expect eof\n","filename":"test\/jdk\/java\/io\/Console\/moduleSelection.exp","additions":30,"deletions":0,"binary":false,"changes":30,"status":"added"},{"patch":"@@ -27,1 +27,1 @@\n-   @library \/test\/lib\n+   @requires (os.family == \"windows\")\n@@ -33,2 +33,0 @@\n-import jtreg.SkippedException;\n-\n@@ -37,5 +35,0 @@\n-        String osName = System.getProperty(\"os.name\");\n-        if (!osName.startsWith(\"Windows\")) {\n-            throw new SkippedException(\"This test is run only on Windows\");\n-        }\n-\n","filename":"test\/jdk\/java\/io\/File\/MaxPath.java","additions":1,"deletions":8,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -53,1 +53,1 @@\n- * @bug 8305457 8342936 8351435 8344706\n+ * @bug 8305457 8342936 8351435 8344706 8361613\n@@ -56,1 +56,0 @@\n- * @modules jdk.internal.le\n@@ -81,16 +80,0 @@\n-        \/*\n-         * Unlike printTest, which tests a _default_ console that is normally\n-         * jdk.internal.org.jline.JdkConsoleProviderImpl, this test tests\n-         * jdk.internal.io.JdkConsoleImpl. Those console implementations operate\n-         * in different conditions and, thus, are tested separately.\n-         *\n-         * To test jdk.internal.io.JdkConsoleImpl one needs to ensure that both\n-         * conditions are met:\n-         *\n-         *   - a non-existent console provider is requested\n-         *   - isatty is true\n-         *\n-         * To achieve isatty, the test currently uses the EXPECT(1) Unix command,\n-         * which does not work for Windows. Later, a library like pty4j or JPty\n-         * might be used instead of EXPECT, to cover both Unix and Windows.\n-         *\/\n@@ -105,2 +88,0 @@\n-                    \"--enable-preview\",\n-                    \"-Djdk.console=gibberish\",\n@@ -133,1 +114,1 @@\n-        public void inputTestInteractive(String console, String prompt) throws Exception {\n+        public void inputTestInteractive(String prompt) throws Exception {\n@@ -141,3 +122,0 @@\n-            command.add(\"--enable-preview\");\n-            if (console != null)\n-                command.add(\"-Djdk.console=\" + console);\n@@ -155,3 +133,2 @@\n-            \/\/ cross product: consoles x prompts\n-            return Stream.of(\"jdk.internal.le\", \"gibberish\").flatMap(console -> Stream.of(null, \"?\", \"%s\", PROMPT_NONE)\n-                    .map(prompt -> new String[]{console, prompt}).map(Arguments::of));\n+            \/\/ prompts\n+            return Stream.of(null, \"?\", \"%s\", PROMPT_NONE).map(Arguments::of);\n@@ -161,21 +138,0 @@\n-    @ParameterizedTest\n-    @ValueSource(strings = {\"println\", \"print\"})\n-    public void printTest(String mode) throws Exception {\n-        var file = Path.of(System.getProperty(\"test.src\", \".\"), \"Output.java\")\n-                .toAbsolutePath().toString();\n-        var pb = ProcessTools.createTestJavaProcessBuilder(\"-Djdk.console=jdk.internal.le\", \"--enable-preview\", file, mode);\n-        OutputAnalyzer output = ProcessTools.executeProcess(pb);\n-        assertEquals(0, output.getExitValue());\n-        assertTrue(output.getStderr().isEmpty());\n-        output.reportDiagnosticSummary();\n-        String out = output.getStdout();\n-        \/\/ The first half of the output is produced by Console, the second\n-        \/\/ half is produced by IO: those halves must match.\n-        \/\/ Executing Console and IO in the same VM (as opposed to\n-        \/\/ consecutive VM runs, which are cleaner) to be able to compare string\n-        \/\/ representation of objects.\n-        assertFalse(out.isBlank());\n-        assertEquals(out.substring(0, out.length() \/ 2),\n-                out.substring(out.length() \/ 2));\n-    }\n-\n@@ -196,1 +152,1 @@\n-        var pb = ProcessTools.createTestJavaProcessBuilder(\"-Djdk.console=jdk.internal.le\", \"--enable-preview\", file.toString());\n+        var pb = ProcessTools.createTestJavaProcessBuilder(file.toString());\n","filename":"test\/jdk\/java\/lang\/IO\/IO.java","additions":5,"deletions":49,"binary":false,"changes":54,"status":"modified"},{"patch":"@@ -49,1 +49,1 @@\n-    private static final int N = 10_000_000;    \/\/ static number of iterations for writes and modifies\n+    private static final int N = 1_000_000;     \/\/ static number of iterations for writes and modifies\n","filename":"test\/jdk\/java\/lang\/StringBuilder\/RacingSBThreads.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n- * @run main\/othervm\/timeout=200\/native --enable-native-access=ALL-UNNAMED Starvation 100000\n+ * @run main\/othervm\/native --enable-native-access=ALL-UNNAMED Starvation\n@@ -40,1 +40,7 @@\n-        int iterations = Integer.parseInt(args[0]);\n+        int iterations;\n+        if (args.length > 0) {\n+            iterations = Integer.parseInt(args[0]);\n+        } else {\n+            int nprocs = Runtime.getRuntime().availableProcessors();\n+            iterations = 40_000 \/ nprocs;\n+        }\n@@ -42,1 +48,2 @@\n-        for (int i = 0; i < iterations; i++) {\n+        for (int i = 1; i <= iterations; i++) {\n+            System.out.format(\"%s iteration %d of %d ...%n\", Instant.now(), i, iterations);\n","filename":"test\/jdk\/java\/lang\/Thread\/virtual\/Starvation.java","additions":10,"deletions":3,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,1 +31,1 @@\n- * @run testng\/othervm ModulesInCustomFileSystem\n+ * @run testng\/othervm -Djava.io.tmpdir=. ModulesInCustomFileSystem\n","filename":"test\/jdk\/java\/lang\/module\/customfs\/ModulesInCustomFileSystem.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2012, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,1 +27,0 @@\n- * @author Ann Wollrath\n@@ -36,1 +35,1 @@\n-public class AddrInUse implements Runnable {\n+public class AddrInUse {\n@@ -38,25 +37,1 @@\n-    private static int port = -1;\n-    private static final long TIMEOUT = 10000;\n-\n-    private boolean exportSucceeded = false;\n-    private Throwable exportException = null;\n-\n-    public void run() {\n-\n-        \/*\n-         * Attempt to create (i.e. export) a registry on the port that\n-         * has already been bound, and record the result.\n-         *\/\n-        try {\n-            LocateRegistry.createRegistry(port);\n-            synchronized (this) {\n-                exportSucceeded = true;\n-                notifyAll();\n-            }\n-        } catch (Throwable t) {\n-            synchronized (this) {\n-                exportException = t;\n-                notifyAll();\n-            }\n-        }\n-    }\n+    private static volatile Throwable registryExportFailure = null;\n@@ -65,2 +40,0 @@\n-        System.err.println(\"\\nRegression test for bug 4111507\\n\");\n-\n@@ -70,13 +43,3 @@\n-        ServerSocket server = new ServerSocket(0);\n-        port = server.getLocalPort();\n-        System.err.println(\"Created a ServerSocket on port \" + port + \"...\");\n-\n-        \/*\n-         * Start a thread that creates a registry on the same port,\n-         * and analyze the result.\n-         *\/\n-        System.err.println(\"create a registry on the same port...\");\n-        System.err.println(\"(should cause an ExportException)\");\n-        AddrInUse obj = new AddrInUse();\n-        synchronized (obj) {\n-            (new Thread(obj, \"AddrInUse\")).start();\n+        try (ServerSocket server = new ServerSocket(0)) {\n+            int port = server.getLocalPort();\n+            System.err.println(\"Created a ServerSocket on port \" + port + \"...\");\n@@ -85,2 +48,2 @@\n-             * Don't wait forever (original bug is that the export\n-             * hangs).\n+             * Start a thread that creates a registry on the same port,\n+             * and analyze the result.\n@@ -88,1 +51,2 @@\n-            obj.wait(TIMEOUT);\n+            System.err.println(\"create a registry on the same port...\");\n+            System.err.println(\"(should cause an ExportException)\");\n@@ -90,11 +54,9 @@\n-            if (obj.exportSucceeded) {\n-                throw new RuntimeException(\n-                    \"TEST FAILED: export on already-bound port succeeded\");\n-            } else if (obj.exportException != null) {\n-                obj.exportException.printStackTrace();\n-                if (obj.exportException instanceof ExportException) {\n-                    System.err.println(\"TEST PASSED\");\n-                } else {\n-                    throw new RuntimeException(\n-                        \"TEST FAILED: unexpected exception occurred\",\n-                        obj.exportException);\n+            Thread exportRegistryThread = new Thread(() -> {\n+                \/*\n+                 * Attempt to create (i.e. export) a registry on the port that\n+                 * has already been bound, and record the result.\n+                 *\/\n+                try {\n+                    LocateRegistry.createRegistry(port);\n+                } catch (Throwable t) {\n+                    registryExportFailure = t;\n@@ -102,2 +64,17 @@\n-            } else {\n-                throw new RuntimeException(\"TEST FAILED: export timed out\");\n+            }, \"ExportRegistry-Thread\");\n+\n+            exportRegistryThread.start();\n+\n+            \/*\n+             * Wait for the LocateRegistry.createRegistry() call to complete or\n+             * if it blocks forever (due to the original bug), then let jtreg fail\n+             * the test with a timeout\n+             *\/\n+            exportRegistryThread.join();\n+            if (registryExportFailure == null) {\n+                throw new RuntimeException(\n+                        \"TEST FAILED: export on already-bound port succeeded\");\n+            }\n+            if (!(registryExportFailure instanceof ExportException)) {\n+                throw new RuntimeException(\n+                        \"TEST FAILED: unexpected exception occurred\", registryExportFailure);\n@@ -105,0 +82,1 @@\n+            System.err.println(\"TEST PASSED, received expected exception: \" + registryExportFailure);\n","filename":"test\/jdk\/java\/rmi\/server\/RemoteServer\/AddrInUse.java","additions":37,"deletions":59,"binary":false,"changes":96,"status":"modified"},{"patch":"@@ -0,0 +1,120 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/**\n+ * @test\n+ * @bug 8244336\n+ * @summary Test JCE layer algorithm restriction\n+ * @library \/test\/lib\n+ * @run main\/othervm TestDisabledAlgorithms KEYSTORE.JKs true\n+ * @run main\/othervm TestDisabledAlgorithms keySTORE.what false\n+ * @run main\/othervm TestDisabledAlgorithms kEYstoRe.jceKS false\n+ * @run main\/othervm -Djdk.crypto.disabledAlgorithms=\"keystore.jkS\" TestDisabledAlgorithms keySTORE.jceKs true\n+ * @run main\/othervm -Djdk.crypto.disabledAlgorithms=\"KEYstORE.what\" TestDisabledAlgorithms KeYStore.JKs false\n+ * @run main\/othervm -Djdk.crypto.disabledAlgorithms=\"keystOre.jceKS\" TestDisabledAlgorithms KEysTORE.JKS false\n+ *\/\n+import java.io.File;\n+import java.util.List;\n+import java.security.KeyStore;\n+import java.security.KeyStoreException;\n+import java.security.Provider;\n+import java.security.Security;\n+import jdk.test.lib.Utils;\n+\n+public class TestDisabledAlgorithms {\n+\n+    private static final String PROP_NAME = \"jdk.crypto.disabledAlgorithms\";\n+\n+    \/\/ reuse existing JKS test keystore\n+    private final static String DIR = System.getProperty(\"test.src\", \".\");\n+    private static final char[] PASSWD = \"passphrase\".toCharArray();\n+    private static final String JKS_FN = \"keystore.jks\";\n+\n+    private static void test(List<String> algos, Provider p,\n+            boolean shouldThrow) throws Exception {\n+\n+        for (String a : algos) {\n+            System.out.println(\"Testing \" + (p != null ? p.getName() : \"\") +\n+                    \": \" + a + \", shouldThrow=\" + shouldThrow);\n+            if (shouldThrow) {\n+                if (p == null) {\n+                    Utils.runAndCheckException(() -> KeyStore.getInstance(a),\n+                            KeyStoreException.class);\n+                    Utils.runAndCheckException(\n+                            () -> KeyStore.getInstance(new File(DIR, JKS_FN),\n+                                PASSWD),\n+                            KeyStoreException.class);\n+                    Utils.runAndCheckException(\n+                            () -> KeyStore.getInstance(new File(DIR, JKS_FN),\n+                                () -> {\n+                                    return new KeyStore.PasswordProtection(PASSWD);\n+                                }),\n+                            KeyStoreException.class);\n+                } else {\n+                    \/\/ with a provider argument\n+                    Utils.runAndCheckException(() -> KeyStore.getInstance(a, p),\n+                            KeyStoreException.class);\n+                    Utils.runAndCheckException(() -> KeyStore.getInstance(a,\n+                            p.getName()), KeyStoreException.class);\n+                }\n+            } else {\n+                KeyStore k;\n+                if (p == null) {\n+                    k = KeyStore.getInstance(a);\n+                    System.out.println(\"Got KeyStore w\/ algo \" + k.getType());\n+                    k = KeyStore.getInstance(new File(DIR, JKS_FN), PASSWD);\n+                    System.out.println(\"Got KeyStore w\/ algo \" + k.getType());\n+                    k = KeyStore.getInstance(new File(DIR, JKS_FN),\n+                        () -> {\n+                            return new KeyStore.PasswordProtection(PASSWD);\n+                        });\n+                    System.out.println(\"Got KeyStore w\/ algo \" + k.getType());\n+                } else {\n+                    \/\/ with a provider argument\n+                    k = KeyStore.getInstance(a, p);\n+                    k = KeyStore.getInstance(a, p.getName());\n+                    System.out.println(\"Got KeyStore w\/ algo \" + k.getType());\n+                }\n+            }\n+        }\n+    }\n+\n+    public static void main(String[] args) throws Exception {\n+        String propValue = args[0];\n+        System.out.println(\"Setting Security Prop \" + PROP_NAME + \" = \" +\n+                propValue);\n+        Security.setProperty(PROP_NAME, propValue);\n+\n+        boolean shouldThrow = Boolean.valueOf(args[1]);\n+\n+        List<String> algos = List.of(\"JKS\", \"jkS\");\n+        \/\/ test w\/o provider\n+        test(algos, null, shouldThrow);\n+\n+        \/\/ test w\/ provider\n+        Provider[] providers = Security.getProviders(\"KeyStore.JKS\");\n+        for (Provider p : providers) {\n+            test(algos, p, shouldThrow);\n+        }\n+    }\n+}\n","filename":"test\/jdk\/java\/security\/KeyStore\/TestDisabledAlgorithms.java","additions":120,"deletions":0,"binary":false,"changes":120,"status":"added"},{"patch":"@@ -0,0 +1,93 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/**\n+ * @test\n+ * @bug 8244336\n+ * @summary Test JCE layer algorithm restriction\n+ * @library \/test\/lib\n+ * @run main\/othervm TestDisabledAlgorithms MESSAGEdigest.Sha-512 true\n+ * @run main\/othervm TestDisabledAlgorithms messageDIGest.what false\n+ * @run main\/othervm TestDisabledAlgorithms meSSagedIgest.sHA-512\/224 false\n+ *\/\n+import java.util.List;\n+import java.security.NoSuchAlgorithmException;\n+import java.security.MessageDigest;\n+import java.security.Provider;\n+import java.security.Security;\n+import jdk.test.lib.Utils;\n+\n+public class TestDisabledAlgorithms {\n+\n+    private static final String PROP_NAME = \"jdk.crypto.disabledAlgorithms\";\n+\n+    private static void test(List<String> algos, Provider p,\n+            boolean shouldThrow) throws Exception {\n+\n+        for (String a : algos) {\n+            System.out.println(\"Testing \" + (p != null ? p.getName() : \"\") +\n+                    \": \" + a + \", shouldThrow=\" + shouldThrow);\n+            if (shouldThrow) {\n+                if (p == null) {\n+                    Utils.runAndCheckException(() -> MessageDigest.getInstance(a),\n+                            NoSuchAlgorithmException.class);\n+                } else {\n+                    Utils.runAndCheckException(() -> MessageDigest.getInstance(a, p),\n+                            NoSuchAlgorithmException.class);\n+                    Utils.runAndCheckException(() -> MessageDigest.getInstance(a,\n+                            p.getName()), NoSuchAlgorithmException.class);\n+                }\n+            } else {\n+                MessageDigest m;\n+                if (p == null) {\n+                    m = MessageDigest.getInstance(a);\n+                } else {\n+                    m = MessageDigest.getInstance(a, p);\n+                    m = MessageDigest.getInstance(a, p.getName());\n+                }\n+                System.out.println(\"Got MessageDigest w\/ algo \" +\n+                        m.getAlgorithm());\n+            }\n+        }\n+    }\n+\n+    public static void main(String[] args) throws Exception {\n+        String propValue = args[0];\n+        System.out.println(\"Setting Security Prop \" + PROP_NAME + \" = \" +\n+                propValue);\n+        Security.setProperty(PROP_NAME, propValue);\n+\n+        boolean shouldThrow = Boolean.valueOf(args[1]);\n+\n+        List<String> algos = List.of(\"sHA-512\", \"shA-512\",\n+                \"2.16.840.1.101.3.4.2.3\");\n+        \/\/ test w\/o provider\n+        test(algos, null, shouldThrow);\n+\n+        \/\/ test w\/ provider\n+        Provider[] providers = Security.getProviders(\"MessageDigest.SHA-512\");\n+        for (Provider p : providers) {\n+            test(algos, p, shouldThrow);\n+        }\n+    }\n+}\n","filename":"test\/jdk\/java\/security\/MessageDigest\/TestDisabledAlgorithms.java","additions":93,"deletions":0,"binary":false,"changes":93,"status":"added"},{"patch":"@@ -0,0 +1,91 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/**\n+ * @test\n+ * @bug 8244336\n+ * @summary Test JCE layer algorithm restriction\n+ * @library \/test\/lib\n+ * @run main\/othervm TestDisabledAlgorithms SIGNATURe.sha512withRSA true\n+ * @run main\/othervm TestDisabledAlgorithms signaturE.what false\n+ * @run main\/othervm TestDisabledAlgorithms SiGnAtUrE.SHa512\/224withRSA false\n+ *\/\n+import java.util.List;\n+import java.security.NoSuchAlgorithmException;\n+import java.security.Signature;\n+import java.security.Provider;\n+import java.security.Security;\n+import jdk.test.lib.Utils;\n+\n+public class TestDisabledAlgorithms {\n+\n+    private static final String PROP_NAME = \"jdk.crypto.disabledAlgorithms\";\n+\n+    private static void test(List<String> algos, Provider p,\n+            boolean shouldThrow) throws Exception {\n+\n+        for (String a : algos) {\n+            System.out.println(\"Testing \" + (p != null ? p.getName() : \"\") +\n+                    \": \" + a + \", shouldThrow=\" + shouldThrow);\n+            if (shouldThrow) {\n+                if (p == null) {\n+                    Utils.runAndCheckException(() -> Signature.getInstance(a),\n+                            NoSuchAlgorithmException.class);\n+                } else {\n+                    Utils.runAndCheckException(() -> Signature.getInstance(a, p),\n+                            NoSuchAlgorithmException.class);\n+                    Utils.runAndCheckException(() -> Signature.getInstance(a,\n+                            p.getName()), NoSuchAlgorithmException.class);\n+                }\n+            } else {\n+                Signature s;\n+                if (p == null) {\n+                    s = Signature.getInstance(a);\n+                } else {\n+                    s = Signature.getInstance(a, p);\n+                    s = Signature.getInstance(a, p.getName());\n+                }\n+                System.out.println(\"Got Signature w\/ algo \" + s.getAlgorithm());\n+            }\n+        }\n+    }\n+\n+    public static void main(String[] args) throws Exception {\n+        String propValue = args[0];\n+        System.out.println(\"Setting Security Prop \" + PROP_NAME + \" = \" +\n+                propValue);\n+        Security.setProperty(PROP_NAME, propValue);\n+\n+        boolean shouldThrow = Boolean.valueOf(args[1]);\n+\n+        List<String> algos = List.of(\"sha512withRsa\", \"1.2.840.113549.1.1.13\");\n+        \/\/ test w\/o provider\n+        test(algos, null, shouldThrow);\n+\n+        \/\/ test w\/ provider\n+        Provider[] providers = Security.getProviders(\"Signature.SHA512withRSA\");\n+        for (Provider p : providers) {\n+            test(algos, p, shouldThrow);\n+        }\n+    }\n+}\n","filename":"test\/jdk\/java\/security\/Signature\/TestDisabledAlgorithms.java","additions":91,"deletions":0,"binary":false,"changes":91,"status":"added"},{"patch":"@@ -0,0 +1,83 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8369050\n+ * @summary Check rounding of DecimalFormat on tie cases when the maximum\n+ *      fraction digits allowed is one less than the position of the first\n+ *      significant digit in the double.\n+ * @run junit RoundingTiesNearZeroTest\n+ *\/\n+\n+import org.junit.jupiter.params.ParameterizedTest;\n+import org.junit.jupiter.params.provider.Arguments;\n+import org.junit.jupiter.params.provider.MethodSource;\n+\n+import java.math.RoundingMode;\n+import java.text.NumberFormat;\n+import java.util.Locale;\n+import java.util.stream.Stream;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+\n+public class RoundingTiesNearZeroTest {\n+\n+    \/\/ Safe to re-use since we are not testing any fast-path cases\n+    \/\/ so state is irrelevant\n+    private static final NumberFormat format = NumberFormat.getInstance(Locale.US);\n+\n+    @ParameterizedTest\n+    @MethodSource(\"ties\")\n+    void roundingTieTest(RoundingMode rm, int maxDigits, double db, String expected) {\n+        format.setRoundingMode(rm);\n+        format.setMaximumFractionDigits(maxDigits);\n+        assertEquals(expected, format.format(db), \"Rounding failed under \" + rm);\n+    }\n+\n+    static Stream<Arguments> ties() {\n+        return Stream.of(\n+                \/\/ 1) String is exact as binary\n+                \/\/ 0.5 -> 0.5\n+                Arguments.of(RoundingMode.HALF_EVEN, 0, 0.5, \"0\"),\n+                Arguments.of(RoundingMode.HALF_UP, 0, 0.5, \"1\"),\n+                Arguments.of(RoundingMode.HALF_DOWN, 0, 0.5, \"0\"),\n+                \/\/ 2) String is rounded up from binary\n+                \/\/ 0.0000005 -> 4.999999999999999773740559129431293428069693618454039096832275390625E-7\n+                Arguments.of(RoundingMode.HALF_EVEN, 6, 0.0000005, \"0\"),\n+                Arguments.of(RoundingMode.HALF_UP, 6, 0.0000005, \"0\"),\n+                Arguments.of(RoundingMode.HALF_DOWN, 6, 0.0000005, \"0\"),\n+                \/\/ 3) String is not rounded up from binary\n+                \/\/ Non-exponential notation\n+                \/\/ 0.05 -> 0.05000000000000000277555756156289135105907917022705078125\n+                Arguments.of(RoundingMode.HALF_EVEN, 1, 0.05, \"0.1\"),\n+                Arguments.of(RoundingMode.HALF_UP, 1, 0.05, \"0.1\"),\n+                Arguments.of(RoundingMode.HALF_DOWN, 1, 0.05, \"0.1\"),\n+                \/\/ Exponential notation\n+                \/\/ 0.00005 -> 0.0000500000000000000023960868011929647991564706899225711822509765625\n+                Arguments.of(RoundingMode.HALF_EVEN, 4, 0.00005, \"0.0001\"),\n+                Arguments.of(RoundingMode.HALF_UP, 4, 0.00005, \"0.0001\"),\n+                Arguments.of(RoundingMode.HALF_DOWN, 4, 0.00005, \"0.0001\")\n+        );\n+    }\n+}\n","filename":"test\/jdk\/java\/text\/Format\/DecimalFormat\/RoundingTiesNearZeroTest.java","additions":83,"deletions":0,"binary":false,"changes":83,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,1 +26,1 @@\n- * @bug 4944439\n+ * @bug 4944439 8372609\n@@ -33,1 +33,1 @@\n-import java.text.DecimalFormat;\n+import java.text.NumberFormat;\n@@ -38,2 +38,0 @@\n-import org.junit.jupiter.api.AfterAll;\n-import org.junit.jupiter.api.BeforeAll;\n@@ -41,1 +39,0 @@\n-import org.junit.jupiter.params.provider.Arguments;\n@@ -50,15 +47,1 @@\n-    \/\/ Save JVM default locale\n-    private static final Locale savedLocale = Locale.getDefault();\n-    private static final DecimalFormat df = new DecimalFormat();\n-\n-    \/\/ Set JVM default locale to US for testing\n-    @BeforeAll\n-    static void initAll() {\n-        Locale.setDefault(Locale.US);\n-    }\n-\n-    \/\/ Restore JVM default locale\n-    @AfterAll\n-    static void tearDownAll() {\n-        Locale.setDefault(savedLocale);\n-    }\n+    private static final NumberFormat df = NumberFormat.getInstance(Locale.US);\n","filename":"test\/jdk\/java\/text\/Format\/NumberFormat\/Bug4944439.java","additions":4,"deletions":21,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n- * 8174269\n+ * 8174269 8369050\n@@ -1856,1 +1856,1 @@\n-                \"0.04\", \"0.000\", \"0.002\",\n+                \"0.04\", \"0.001\", \"0.002\",\n","filename":"test\/jdk\/java\/text\/Format\/NumberFormat\/NumberRegression.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -0,0 +1,140 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8370887\n+ * @summary Test that cancelling a delayed task doesn't impact the ordering that other\n+ *     delayed tasks execute\n+ *\/\n+\n+import java.time.Duration;\n+import java.time.Instant;\n+import java.util.Arrays;\n+import java.util.concurrent.ForkJoinPool;\n+import java.util.concurrent.Future;\n+import java.util.concurrent.LinkedTransferQueue;\n+import java.util.stream.Collectors;\n+import java.util.stream.IntStream;\n+import static java.util.concurrent.TimeUnit.MILLISECONDS;\n+\n+public class AscendingOrderAfterReplace {\n+\n+    private static final int[] DELAYS_IN_MS = { 3000, 3400, 3900, 3800, 3700, 3600, 3430, 3420, 3310, 3500, 3200 };\n+\n+    public static void main(String[] args) throws Exception {\n+        for (int i = 1; i < DELAYS_IN_MS.length; i++) {\n+            System.out.println(\"=== Test \" + i + \" ===\");\n+            while (!testCancel(DELAYS_IN_MS, i)) { }\n+        }\n+    }\n+\n+    \/**\n+     * Schedule the delayed tasks, cancel one of them, and check that the remaining tasks\n+     * execute in the ascending order of delay.\n+     * @return true if the test passed, false if a retry is needed\n+     * @throws RuntimeException if the test fails\n+     *\/\n+    private static boolean testCancel(int[] delays, int indexToCancel) throws Exception {\n+        log(\"Delayed tasks: \" + toString(delays));\n+\n+        \/\/ delayed tasks add to this queue when they execute\n+        var queue = new LinkedTransferQueue<Integer>();\n+\n+        \/\/ pool with one thread to ensure that delayed tasks don't execute concurrently\n+        try (var pool = new ForkJoinPool(1)) {\n+            long startNanos = System.nanoTime();\n+            Future<?>[] futures = Arrays.stream(delays)\n+                    .mapToObj(d -> pool.schedule(() -> {\n+                        log(\"Triggered \" + d);\n+                        queue.add(d);\n+                    }, d, MILLISECONDS))\n+                    .toArray(Future[]::new);\n+            long endNanos = System.nanoTime();\n+            log(\"Delayed tasks submitted\");\n+\n+            \/\/ check submit took < min diffs between two delays\n+            long submitTime = Duration.ofNanos(endNanos - startNanos).toMillis();\n+            long minDiff = minDifference(delays);\n+            if (submitTime >= minDiff) {\n+                log(\"Submit took >= \" + minDiff + \" ms, need to retry\");\n+                pool.shutdownNow();\n+                return false;\n+            }\n+\n+            \/\/ give a bit of time for -delayScheduler thread to process pending tasks\n+            Thread.sleep(minValue(delays) \/ 2);\n+            log(\"Cancel \" + delays[indexToCancel]);\n+            futures[indexToCancel].cancel(true);\n+        }\n+\n+        \/\/ delayed tasks should have executed in ascending order of their delay\n+        int[] executed = queue.stream().mapToInt(Integer::intValue).toArray();\n+        log(\"Executed: \" + toString(executed));\n+        if (!isAscendingOrder(executed)) {\n+            throw new RuntimeException(\"Not in ascending order!\");\n+        }\n+        return true;\n+    }\n+\n+    \/**\n+     * Return the minimum element.\n+     *\/\n+    private static int minValue(int[] array) {\n+        return IntStream.of(array).min().orElseThrow();\n+    }\n+\n+    \/**\n+     * Return the minimum difference between any two elements.\n+     *\/\n+    private static int minDifference(int[] array) {\n+        int[] sorted = array.clone();\n+        Arrays.sort(sorted);\n+        return IntStream.range(1, sorted.length)\n+                .map(i -> sorted[i] - sorted[i - 1])\n+                .min()\n+                .orElse(0);\n+    }\n+\n+    \/**\n+     * Return true if the array is in ascending order.\n+     *\/\n+    private static boolean isAscendingOrder(int[] array) {\n+        return IntStream.range(1, array.length)\n+                .allMatch(i -> array[i - 1] <= array[i]);\n+    }\n+\n+    \/**\n+     * Returns a String containing the elements of an array in index order.\n+     *\/\n+    private static String toString(int[] array) {\n+        return IntStream.of(array)\n+                .mapToObj(Integer::toString)\n+                .collect(Collectors.joining(\", \", \"[\", \"]\"));\n+    }\n+\n+    private static void log(String message) {\n+        System.out.println(Instant.now() + \" \" + message);\n+    }\n+}\n+\n","filename":"test\/jdk\/java\/util\/concurrent\/DelayScheduler\/AscendingOrderAfterReplace.java","additions":140,"deletions":0,"binary":false,"changes":140,"status":"added"},{"patch":"@@ -0,0 +1,56 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8368500\n+ * @run junit\/othervm ContextClassLoaderTest\n+ * @summary Check the context classloader is reset\n+ *\/\n+import java.net.URL;\n+import java.net.URLClassLoader;\n+import java.util.concurrent.Future;\n+import java.util.concurrent.ForkJoinPool;\n+import org.junit.jupiter.api.Test;\n+import static org.junit.jupiter.api.Assertions.*;\n+\n+class ContextClassLoaderTest {\n+\n+    @Test\n+    void testContextClassLoaderIsSetAndRestored() throws Exception {\n+        Future<?> future = ForkJoinPool.commonPool().submit(() -> {\n+            Thread thread = Thread.currentThread();\n+            ClassLoader originalCCL = thread.getContextClassLoader();\n+            ClassLoader customCCL = new URLClassLoader(new URL[0], originalCCL);\n+            \/\/ Set custom context classloader and verify it\n+            thread.setContextClassLoader(customCCL);\n+            assertSame(customCCL, thread.getContextClassLoader(), \"Custom context class loader not set\");\n+\n+            \/\/ Reset to original and verify restoration\n+            thread.setContextClassLoader(originalCCL);\n+            assertSame(originalCCL, thread.getContextClassLoader(), \"Original context class loader not restored\");\n+        });\n+        future.get();\n+    }\n+}\n+\n","filename":"test\/jdk\/java\/util\/concurrent\/forkjoin\/ContextClassLoaderTest.java","additions":56,"deletions":0,"binary":false,"changes":56,"status":"added"},{"patch":"@@ -34,3 +34,0 @@\n-import static java.util.concurrent.TimeUnit.MILLISECONDS;\n-import static java.util.concurrent.TimeUnit.NANOSECONDS;\n-\n@@ -44,0 +41,1 @@\n+import java.util.concurrent.CancellationException;\n@@ -54,0 +52,3 @@\n+import java.util.concurrent.TimeoutException;\n+import java.util.concurrent.TimeUnit;\n+import java.util.function.Function;\n@@ -56,0 +57,1 @@\n+import java.util.concurrent.atomic.AtomicReference;\n@@ -61,0 +63,2 @@\n+import static java.util.concurrent.TimeUnit.*;\n+\n@@ -485,0 +489,51 @@\n+    public void testCancellationExceptionInGet() throws Exception {\n+        final ExecutorService e = new ForkJoinPool(1);\n+        try (var cleaner = cleaner(e)) {\n+            assertCancellationExceptionFrom(\n+                e::submit,\n+                f -> () -> f.get(1000, TimeUnit.SECONDS)\n+            );\n+            assertCancellationExceptionFrom(\n+                e::submit,\n+                f -> f::get\n+            );\n+            assertCancellationExceptionFrom(\n+                c -> e.submit(() -> { try { c.call(); } catch (Exception ex) { throw new RuntimeException(ex); } }),\n+                f -> () -> f.get(1000, TimeUnit.SECONDS)\n+            );\n+            assertCancellationExceptionFrom(\n+                c -> e.submit(() -> { try { c.call(); } catch (Exception ex) { throw new RuntimeException(ex); } }),\n+                f -> f::get\n+            );\n+        }\n+    }\n+\n+    private void assertCancellationExceptionFrom(\n+            Function<Callable<Void>, Future<?>> createTask,\n+            Function<Future<?>, Callable<?>> getResult) throws Exception {\n+        final var t = new AtomicReference<Thread>();\n+        final var c = new CountDownLatch(1); \/\/ Only used to induce WAITING state (never counted down)\n+        final var task = createTask.apply(() -> {\n+            try {\n+                t.set(Thread.currentThread());\n+                c.await();\n+            } catch (InterruptedException ie) {\n+                Thread.currentThread().interrupt();;\n+            }\n+            return null;\n+        });\n+        Thread taskThread;\n+        while((taskThread = t.get()) == null || taskThread.getState() != Thread.State.WAITING) {\n+            if (Thread.interrupted())\n+                throw new InterruptedException();\n+            Thread.onSpinWait();\n+        }\n+        task.cancel(true);\n+        try {\n+            getResult.apply(task).call();\n+        } catch (CancellationException ce) {\n+            return; \/\/ Success\n+        }\n+        shouldThrow();\n+    }\n+\n","filename":"test\/jdk\/java\/util\/concurrent\/tck\/ForkJoinPoolTest.java","additions":58,"deletions":3,"binary":false,"changes":61,"status":"modified"},{"patch":"@@ -0,0 +1,116 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/**\n+ * @test\n+ * @bug 8244336\n+ * @summary Test JCE layer algorithm restriction\n+ * @library \/test\/lib\n+ * @run main\/othervm TestDisabledAlgorithms CIPHEr.Rsa\/ECB\/PKCS1Padding true\n+ * @run main\/othervm TestDisabledAlgorithms cipheR.rsA true\n+ * @run main\/othervm TestDisabledAlgorithms CIPher.what false\n+ * @run main\/othervm TestDisabledAlgorithms cipHER.RSA\/ECB\/PKCS1Padding2 false\n+ *\/\n+import java.util.List;\n+import java.security.NoSuchAlgorithmException;\n+import java.security.Provider;\n+import java.security.Security;\n+import java.security.Signature;\n+import javax.crypto.Cipher;\n+import javax.crypto.NoSuchPaddingException;\n+import jdk.test.lib.Utils;\n+\n+public class TestDisabledAlgorithms {\n+\n+    private static final String PROP_NAME = \"jdk.crypto.disabledAlgorithms\";\n+\n+    private static final String TARGET = \"Cipher.RSA\/ECB\/PKCS1Padding\";\n+\n+    private static void test(List<String> algos, Provider p,\n+            boolean shouldThrow) throws Exception {\n+\n+        for (String a : algos) {\n+            System.out.println(\"Testing \" + (p != null ? p.getName() : \"\") +\n+                    \": \" + a + \", shouldThrow=\" + shouldThrow);\n+            if (shouldThrow) {\n+                if (p == null) {\n+                    Utils.runAndCheckException(() -> Cipher.getInstance(a),\n+                            NoSuchAlgorithmException.class);\n+                } else {\n+                    Utils.runAndCheckException(() -> Cipher.getInstance(a, p),\n+                            NoSuchAlgorithmException.class);\n+                    Utils.runAndCheckException(() -> Cipher.getInstance(a,\n+                            p.getName()), NoSuchAlgorithmException.class);\n+\n+                }\n+            } else {\n+                Cipher c;\n+                if (p == null) {\n+                    c = Cipher.getInstance(a);\n+                } else {\n+                    c = Cipher.getInstance(a, p);\n+                    c = Cipher.getInstance(a, p.getName());\n+                }\n+                System.out.println(\"Got cipher w\/ algo \" + c.getAlgorithm());\n+            }\n+        }\n+    }\n+\n+    public static void main(String[] args) throws Exception {\n+        String propValue = args[0];\n+        System.out.println(\"Setting Security Prop \" + PROP_NAME + \" = \" +\n+                propValue);\n+        Security.setProperty(PROP_NAME, propValue);\n+\n+        boolean shouldThrow = Boolean.valueOf(args[1]);\n+\n+        List<String> algos = List.of(\"Rsa\/ECB\/PKCS1Padding\", \"rSA\");\n+\n+        \/\/ test w\/o provider\n+        test(algos, null, shouldThrow);\n+\n+        \/\/ test w\/ provider\n+        Provider[] providers = Security.getProviders();\n+        for (Provider p : providers) {\n+            if (p.getService(\"Cipher\", \"RSA\/ECB\/PKCS1Padding\") != null) {\n+                test(algos, p, shouldThrow);\n+            }\n+        }\n+\n+        \/\/ make sure NONEwithRSA signature is still available from SunJCE and\n+        \/\/ SunMSCAPI (windows)\n+        if (shouldThrow) {\n+            System.out.println(\"Testing NONEwithRSA signature support\");\n+            for (String pn : List.of(\"SunJCE\", \"SunMSCAPI\")) {\n+                Provider p = Security.getProvider(pn);\n+                if (p != null) {\n+                    Signature s = Signature.getInstance(\"NONEwithRSA\", p);\n+                    System.out.println(pn + \"=> yes\");\n+                } else {\n+                    System.out.println(pn + \"=> skip; not found\");\n+                }\n+            }\n+        }\n+        System.out.println(\"Done\");\n+    }\n+}\n","filename":"test\/jdk\/javax\/crypto\/Cipher\/TestDisabledAlgorithms.java","additions":116,"deletions":0,"binary":false,"changes":116,"status":"added"},{"patch":"@@ -0,0 +1,86 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2025 IBM Corporation. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8359388\n+ * @summary test that the Cipher.getInstance() would reject improper\n+ *     transformations with empty mode and\/or padding.\n+ *\/\n+\n+import java.security.NoSuchAlgorithmException;\n+import java.security.Provider;\n+import java.security.Security;\n+import javax.crypto.Cipher;\n+\n+public class TestEmptyModePadding {\n+\n+    public static void main(String[] args) throws Exception {\n+        Provider provider = Security.getProvider(\n+                System.getProperty(\"test.provider.name\", \"SunJCE\"));\n+\n+        System.out.println(\"Testing against \" + provider.getName());\n+\n+        String[] testTransformations = {\n+            \/\/ transformations w\/ only 1 component, i.e. algo\n+            \" \",\n+            \/\/ transformations w\/ only 2 components\n+            \"AES\/\",\n+            \"AES\/ \",\n+            \"AES\/CBC\",\n+            \"PBEWithHmacSHA512\/224AndAES_128\/\",\n+            \"PBEWithHmacSHA512\/256AndAES_128\/ \",\n+            \"PBEWithHmacSHA512\/224AndAES_128\/CBC\",\n+            \/\/ 3-component transformations w\/ empty component(s)\n+            \"AES\/\/\",\n+            \"AES\/ \/\",\n+            \"AES\/\/ \",\n+            \"AES\/ \/ \",\n+            \"AES\/CBC\/\", \"AES\/CBC\/ \",\n+            \"AES\/\/PKCS5Padding\", \"AES\/ \/NoPadding\",\n+            \"PBEWithHmacSHA512\/224AndAES_128\/\/\",\n+            \"PBEWithHmacSHA512\/224AndAES_128\/ \/\",\n+            \"PBEWithHmacSHA512\/224AndAES_128\/\/ \",\n+            \"PBEWithHmacSHA512\/224AndAES_128\/ \/ \",\n+            \"PBEWithHmacSHA512\/256AndAES_128\/CBC\/\",\n+            \"PBEWithHmacSHA512\/256AndAES_128\/CBC\/ \",\n+            \"PBEWithHmacSHA512\/256AndAES_128\/\/PKCS5Padding\",\n+            \"PBEWithHmacSHA512\/256AndAES_128\/ \/PKCS5Padding\",\n+        };\n+\n+        for (String t : testTransformations) {\n+            test(t, provider);\n+        }\n+    }\n+\n+    private static void test(String t, Provider p) throws Exception {\n+        try {\n+            Cipher c = Cipher.getInstance(t, p);\n+            throw new RuntimeException(\"Should throw NSAE for \\'\" + t + \"\\'\");\n+        } catch (NoSuchAlgorithmException nsae) {\n+            \/\/ transformation info is already in the NSAE message\n+            System.out.println(\"Expected NSAE: \" + nsae.getMessage());\n+        }\n+    }\n+}\n","filename":"test\/jdk\/javax\/crypto\/Cipher\/TestEmptyModePadding.java","additions":86,"deletions":0,"binary":false,"changes":86,"status":"added"},{"patch":"@@ -36,1 +36,5 @@\n-import java.io.*;\n+import java.io.BufferedReader;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.io.InputStreamReader;\n+import java.io.OutputStream;\n@@ -44,0 +48,1 @@\n+\n@@ -45,0 +50,1 @@\n+\n@@ -58,1 +64,10 @@\n-import java.util.*;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.Base64;\n+import java.util.Collections;\n+import java.util.Date;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.TimeZone;\n+import java.util.concurrent.CountDownLatch;\n@@ -95,4 +110,0 @@\n-    \/*\n-     * Is the server ready to serve?\n-     *\/\n-    volatile static boolean serverReady = false;\n@@ -167,1 +178,1 @@\n-        serverReady = false;\n+        CountDownLatch serverReady = new CountDownLatch(1);\n@@ -195,1 +206,1 @@\n-                servParams);\n+                servParams, serverReady);\n@@ -222,1 +233,1 @@\n-     * If the server prematurely exits, serverReady will be set to true\n+     * If the server prematurely exits, serverReady will be counted down\n@@ -225,1 +236,2 @@\n-    void doServerSide(ServerParameters servParams) throws Exception {\n+    void doServerSide(ServerParameters servParams, CountDownLatch serverReady)\n+            throws Exception {\n@@ -277,1 +289,1 @@\n-        serverReady = true;\n+        serverReady.countDown();\n@@ -309,1 +321,1 @@\n-     * If the server prematurely exits, serverReady will be set to true\n+     * If the server prematurely exits, serverReady will be counted down\n@@ -312,1 +324,2 @@\n-    void doClientSide(ClientParameters cliParams) throws Exception {\n+    void doClientSide(ClientParameters cliParams, CountDownLatch serverReady)\n+            throws Exception {\n@@ -314,7 +327,1 @@\n-        \/\/ Wait 5 seconds for server ready\n-        for (int i = 0; (i < 100 && !serverReady); i++) {\n-            Thread.sleep(50);\n-        }\n-        if (!serverReady) {\n-            throw new RuntimeException(\"Server not ready yet\");\n-        }\n+        serverReady.await();\n@@ -376,2 +383,2 @@\n-    HttpsUrlConnClient(ClientParameters cliParams,\n-            ServerParameters servParams) throws Exception {\n+    HttpsUrlConnClient(ClientParameters cliParams, ServerParameters servParams,\n+            CountDownLatch serverReady) throws Exception {\n@@ -381,2 +388,2 @@\n-                startServer(servParams, true);\n-                startClient(cliParams, false);\n+                startServer(servParams, true, serverReady);\n+                startClient(cliParams, false, serverReady);\n@@ -384,2 +391,2 @@\n-                startClient(cliParams, true);\n-                startServer(servParams, false);\n+                startClient(cliParams, true, serverReady);\n+                startServer(servParams, false, serverReady);\n@@ -456,2 +463,2 @@\n-    final void startServer(ServerParameters servParams, boolean newThread)\n-            throws Exception {\n+    final void startServer(ServerParameters servParams, boolean newThread,\n+            CountDownLatch serverReady) throws IOException {\n@@ -463,1 +470,1 @@\n-                        doServerSide(servParams);\n+                        doServerSide(servParams, serverReady);\n@@ -470,2 +477,1 @@\n-                        System.err.println(\"Server died...\");\n-                        serverReady = true;\n+                        System.err.println(\"Server died: \" + e);\n@@ -473,0 +479,2 @@\n+                    } finally {\n+                        serverReady.countDown();\n@@ -479,1 +487,1 @@\n-                doServerSide(servParams);\n+                doServerSide(servParams, serverReady);\n@@ -481,0 +489,1 @@\n+                System.err.println(\"Server died: \" + e);\n@@ -483,1 +492,1 @@\n-                serverReady = true;\n+                serverReady.countDown();\n@@ -488,2 +497,2 @@\n-    final void startClient(ClientParameters cliParams, boolean newThread)\n-            throws Exception {\n+    final void startClient(ClientParameters cliParams, boolean newThread,\n+            CountDownLatch serverReady) throws Exception {\n@@ -495,1 +504,1 @@\n-                        doClientSide(cliParams);\n+                        doClientSide(cliParams, serverReady);\n@@ -500,1 +509,1 @@\n-                        System.err.println(\"Client died...\");\n+                        System.err.println(\"Client died: \" + e);\n@@ -508,1 +517,1 @@\n-                doClientSide(cliParams);\n+                doClientSide(cliParams, serverReady);\n@@ -511,0 +520,1 @@\n+                System.err.println(\"Client died: \" + e);\n","filename":"test\/jdk\/javax\/net\/ssl\/Stapling\/HttpsUrlConnClient.java","additions":48,"deletions":38,"binary":false,"changes":86,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2020, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -52,7 +52,0 @@\n-    \/*\n-     * Deletes log file if exists.\n-     *\/\n-    protected void deleteLog() throws IOException {\n-        Utilities.deleteFile(getLogPath());\n-    }\n-\n","filename":"test\/jdk\/javax\/net\/ssl\/TLSCommon\/interop\/AbstractPeer.java","additions":1,"deletions":8,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2020, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -151,1 +151,0 @@\n-        deleteLog();\n","filename":"test\/jdk\/javax\/net\/ssl\/TLSCommon\/interop\/JdkProcClient.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2020, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -169,1 +169,0 @@\n-        deleteLog();\n","filename":"test\/jdk\/javax\/net\/ssl\/TLSCommon\/interop\/JdkProcServer.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -193,0 +193,1 @@\n+            System.out.println(\"Connection established on port : \" +serverPort);\n@@ -231,0 +232,1 @@\n+            System.out.println(\"Connection closed on port : \" +serverPort);\n","filename":"test\/jdk\/javax\/net\/ssl\/templates\/SSLSocketTemplate.java","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2020, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,1 +33,0 @@\n-import javax.swing.AbstractAction;\n@@ -46,1 +45,0 @@\n-import java.awt.Point;\n@@ -48,1 +46,0 @@\n-import java.awt.event.ActionEvent;\n@@ -56,2 +53,2 @@\n-    private static boolean toggleButtonActionPerformed;\n-    private static boolean checkboxActionPerformed;\n+    private static volatile boolean toggleButtonActionPerformed;\n+    private static volatile boolean checkboxActionPerformed;\n@@ -61,14 +58,0 @@\n-    private static void blockTillDisplayed(Component comp) {\n-        Point p = null;\n-        while (p == null) {\n-            try {\n-                p = comp.getLocationOnScreen();\n-            } catch (IllegalStateException e) {\n-                try {\n-                    Thread.sleep(500);\n-                } catch (InterruptedException ie) {\n-                }\n-            }\n-        }\n-    }\n-\n@@ -87,27 +70,5 @@\n-                toggleButton1.setAction(new AbstractAction() {\n-                    @Override\n-                    public void actionPerformed(ActionEvent e) {\n-                        toggleButtonActionPerformed = true;\n-                    }\n-                });\n-\n-                toggleButton2.setAction(new AbstractAction() {\n-                    @Override\n-                    public void actionPerformed(ActionEvent e) {\n-                        toggleButtonActionPerformed = true;\n-                    }\n-                });\n-\n-                checkBox1.setAction(new AbstractAction() {\n-                    @Override\n-                    public void actionPerformed(ActionEvent e) {\n-                        checkboxActionPerformed = true;\n-                    }\n-                });\n-\n-                checkBox2.setAction(new AbstractAction() {\n-                    @Override\n-                    public void actionPerformed(ActionEvent e) {\n-                        checkboxActionPerformed = true;\n-                    }\n-                });\n+                toggleButton1.addActionListener((_) -> toggleButtonActionPerformed = true);\n+                toggleButton2.addActionListener((_) -> toggleButtonActionPerformed = true);\n+\n+                checkBox1.addActionListener((_) -> checkboxActionPerformed = true);\n+                checkBox2.addActionListener((_) -> checkboxActionPerformed = true);\n@@ -131,1 +92,1 @@\n-                frame = new JFrame(\"Test\");\n+                frame = new JFrame(\"TestButtonGroupFocusTraversal\");\n@@ -181,1 +142,1 @@\n-        if (toggleButtonActionPerformed) {\n+        if (checkboxActionPerformed) {\n@@ -199,3 +160,1 @@\n-                robot.delay(200);\n-\n-                blockTillDisplayed(frame);\n+                robot.delay(500);\n@@ -207,5 +166,1 @@\n-                    try {\n-                        Thread.sleep(100);\n-                    } catch (InterruptedException e) {\n-                        e.printStackTrace();\n-                    }\n+                    robot.delay(300);\n","filename":"test\/jdk\/javax\/swing\/ButtonGroup\/TestButtonGroupFocusTraversal.java","additions":12,"deletions":57,"binary":false,"changes":69,"status":"modified"},{"patch":"@@ -1,108 +0,0 @@\n-\/*\n- * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-\n-import java.io.File;\n-import java.io.IOException;\n-import java.lang.reflect.InvocationTargetException;\n-import java.awt.Graphics;\n-import java.awt.image.BufferedImage;\n-import javax.imageio.ImageIO;\n-import javax.swing.JComponent;\n-import javax.swing.JProgressBar;\n-import javax.swing.SwingUtilities;\n-import javax.swing.UIManager;\n-import javax.swing.UnsupportedLookAndFeelException;\n-\n-import static java.awt.image.BufferedImage.TYPE_INT_RGB;\n-\n-\/*\n- * @test\n- * @bug 8224261\n- * @key headful\n- * @library ..\/regtesthelpers\n- * @build Util\n- * @summary Verifies JProgressBar border is not painted when border\n- *          painting is set to false\n- * @run main TestProgressBarBorder\n- *\/\n-\n-public class TestProgressBarBorder {\n-    public static void main(String[] args) throws Exception {\n-        for (UIManager.LookAndFeelInfo laf :\n-                UIManager.getInstalledLookAndFeels()) {\n-            if (!laf.getName().contains(\"Nimbus\") && !laf.getName().contains(\"GTK\")) {\n-                continue;\n-            }\n-            System.out.println(\"Testing LAF: \" + laf.getName());\n-            SwingUtilities.invokeAndWait(() -> test(laf));\n-        }\n-    }\n-\n-    private static void test(UIManager.LookAndFeelInfo laf) {\n-        setLookAndFeel(laf);\n-        JProgressBar progressBar = createProgressBar();\n-        progressBar.setBorderPainted(true);\n-        BufferedImage withBorder = paintToImage(progressBar);\n-        progressBar.setBorderPainted(false);\n-        BufferedImage withoutBorder = paintToImage(progressBar);\n-\n-        boolean equal = Util.compareBufferedImages(withBorder, withoutBorder);\n-        if (equal) {\n-            try {\n-                ImageIO.write(withBorder, \"png\", new File(\"withBorder.png\"));\n-                ImageIO.write(withoutBorder, \"png\", new File(\"withoutBorder.png\"));\n-            } catch (IOException ignored) {}\n-\n-            throw new RuntimeException(\"JProgressBar border is painted when border \" +\n-                    \"painting is set to false\");\n-        }\n-    }\n-\n-    private static void setLookAndFeel(UIManager.LookAndFeelInfo laf) {\n-        try {\n-            UIManager.setLookAndFeel(laf.getClassName());\n-        } catch (UnsupportedLookAndFeelException ignored) {\n-            System.out.println(\"Unsupported LAF: \" + laf.getClassName());\n-        } catch (ClassNotFoundException | InstantiationException\n-                 | IllegalAccessException e) {\n-            throw new RuntimeException(e);\n-        }\n-    }\n-\n-    private static JProgressBar createProgressBar() {\n-        JProgressBar progressBar = new JProgressBar();\n-        progressBar.setSize(100, 50);\n-        progressBar.setValue(0);\n-        progressBar.setStringPainted(true);\n-        return progressBar;\n-    }\n-\n-    private static BufferedImage paintToImage(JComponent content) {\n-        BufferedImage im = new BufferedImage(content.getWidth(), content.getHeight(),\n-                TYPE_INT_RGB);\n-        Graphics g = im.getGraphics();\n-        content.paint(g);\n-        g.dispose();\n-        return im;\n-    }\n-}\n","filename":"test\/jdk\/javax\/swing\/JProgressBar\/TestProgressBarBorder.java","additions":0,"deletions":108,"binary":false,"changes":108,"status":"deleted"},{"patch":"@@ -0,0 +1,123 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8192888\n+ * @key headful\n+ * @summary Verifies ProgressBar in Synth L&F renders background\n+ *          when border is not painted\n+ * @run main TestNimbusProgressBarBorder\n+ *\/\n+\n+import java.io.File;\n+\n+import java.awt.BorderLayout;\n+import java.awt.Color;\n+import java.awt.Graphics2D;\n+import java.awt.GridBagLayout;\n+import java.awt.image.BufferedImage;\n+import java.awt.Rectangle;\n+import java.awt.Robot;\n+\n+import javax.imageio.ImageIO;\n+\n+import javax.swing.JFrame;\n+import javax.swing.JPanel;\n+import javax.swing.JProgressBar;\n+import javax.swing.UIManager;\n+import javax.swing.SwingUtilities;\n+\n+public class TestNimbusProgressBarBorder {\n+\n+    private static JFrame frame;\n+    private static JProgressBar progressBar;\n+    private static boolean failure = true;\n+    private static volatile Rectangle rect;\n+\n+    public static void main(String[] args) throws Exception {\n+        int width = 200;\n+        int height = 100;\n+        try {\n+            Robot robot = new Robot();\n+            SwingUtilities.invokeAndWait(() -> {\n+                try {\n+                    \/\/ Set Nimbus L&F\n+                    UIManager.setLookAndFeel(\"javax.swing.plaf.nimbus.NimbusLookAndFeel\");\n+                } catch (Exception e) {\n+                    throw new RuntimeException(e);\n+                }\n+                frame = new JFrame(\"Nimbus JProgressBar Test\");\n+                frame.setSize(width, height);\n+\n+                \/\/ ProgressBar setup\n+                progressBar = new JProgressBar(0, 100);\n+                progressBar.setValue(0);\n+                progressBar.setBorderPainted(false);\n+\n+                JPanel center = new JPanel(new GridBagLayout());\n+                center.setBackground(Color.WHITE);\n+                center.add(progressBar);\n+\n+                frame.add(center, BorderLayout.CENTER);\n+                frame.setLocationRelativeTo(null);\n+                frame.setVisible(true);\n+            });\n+            robot.waitForIdle();\n+            robot.delay(1000);\n+            SwingUtilities.invokeAndWait(() -> {\n+                rect = progressBar.getBounds();\n+            });\n+\n+            BufferedImage img = new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB);\n+            Graphics2D g2d = (Graphics2D) img.getGraphics();\n+            g2d.setColor(Color.WHITE);\n+            g2d.fillRect(0, 0, rect.width, rect.height);\n+            progressBar.paint(g2d);\n+            g2d.dispose();\n+\n+            robot.waitForIdle();\n+            robot.delay(100);\n+\n+            for (int x = 10; x < (10 + rect.width \/ 2); x++) {\n+                for (int y = 10; y < (10 + rect.height \/ 2); y++) {\n+                    Color col = new Color(img.getRGB(x, y));\n+                    if (!col.equals(Color.WHITE)) {\n+                        failure = false;\n+                        break;\n+                    }\n+                }\n+            }\n+            if (failure) {\n+                ImageIO.write(img, \"png\", new File(\"ProgressBarTest.png\"));\n+                throw new RuntimeException(\"ProgressBar background not drawn\");\n+            }\n+        } finally {\n+            SwingUtilities.invokeAndWait(() -> {\n+                if (frame != null) {\n+                    frame.dispose();\n+                }\n+            });\n+        }\n+    }\n+}\n","filename":"test\/jdk\/javax\/swing\/plaf\/nimbus\/TestNimbusProgressBarBorder.java","additions":123,"deletions":0,"binary":false,"changes":123,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,3 +24,13 @@\n-import javax.swing.*;\n-import java.awt.*;\n-import java.awt.event.*;\n+import java.awt.AWTException;\n+import java.awt.BorderLayout;\n+import java.awt.Component;\n+import java.awt.Container;\n+import java.awt.Dialog;\n+import java.awt.Dimension;\n+import java.awt.Point;\n+import java.awt.Rectangle;\n+import java.awt.Robot;\n+import java.awt.event.ActionEvent;\n+import java.awt.event.ActionListener;\n+import java.awt.event.InputEvent;\n+import java.awt.event.KeyEvent;\n@@ -32,0 +42,8 @@\n+import java.util.function.Predicate;\n+\n+import javax.swing.Box;\n+import javax.swing.JButton;\n+import javax.swing.JDialog;\n+import javax.swing.SwingUtilities;\n+\n+import static javax.swing.SwingUtilities.isEventDispatchThread;\n@@ -126,2 +144,1 @@\n-     * Find a sub component by class name.\n-     * Always run this method on the EDT thread\n+     * Find a subcomponent by class name.\n@@ -130,1 +147,5 @@\n-        String parentClassName = parent.getClass().getName();\n+        return findComponent((Container) parent,\n+                             c -> c.getClass()\n+                                   .getName()\n+                                   .contains(className));\n+    }\n@@ -132,2 +153,13 @@\n-        if (parentClassName.contains(className)) {\n-            return parent;\n+    \/**\n+     * Find a component based on predicate.\n+     *\/\n+    public static Component findComponent(final Container container,\n+                                          final Predicate<Component> predicate) {\n+        try {\n+            if (isEventDispatchThread()) {\n+                return findComponentImpl(container, predicate);\n+            } else {\n+                return Util.invokeOnEDT(() -> findComponentImpl(container, predicate));\n+            }\n+        } catch (Exception e) {\n+            throw new RuntimeException(\"Error occurred while finding component\", e);\n@@ -135,0 +167,1 @@\n+    }\n@@ -136,6 +169,10 @@\n-        if (parent instanceof Container) {\n-            for (Component child : ((Container) parent).getComponents()) {\n-                Component subComponent = findSubComponent(child, className);\n-\n-                if (subComponent != null) {\n-                    return subComponent;\n+    private static Component findComponentImpl(final Container container,\n+                                               final Predicate<Component> predicate) {\n+        for (Component child : container.getComponents()) {\n+            if (predicate.test(child)) {\n+                return child;\n+            }\n+            if (child instanceof Container cont && cont.getComponentCount() > 0) {\n+                Component result = findComponentImpl(cont, predicate);\n+                if (result != null) {\n+                    return result;\n@@ -145,1 +182,0 @@\n-\n","filename":"test\/jdk\/javax\/swing\/regtesthelpers\/Util.java","additions":52,"deletions":16,"binary":false,"changes":68,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n- * @bug 8331535 8351435 8347050\n+ * @bug 8331535 8351435 8347050 8361613\n@@ -28,1 +28,2 @@\n- * @modules jdk.internal.le\n+ * @modules java.base\/jdk.internal.io\n+ *          jdk.internal.le\/jdk.internal.org.jline\n@@ -30,1 +31,1 @@\n- * @run main\/othervm -Djdk.console=jdk.internal.le JLineConsoleProviderTest\n+ * @run main JLineConsoleProviderTest\n@@ -34,0 +35,1 @@\n+import java.nio.charset.StandardCharsets;\n@@ -36,0 +38,1 @@\n+import jdk.internal.org.jline.JdkConsoleProviderImpl;\n@@ -69,2 +72,7 @@\n-                ProcessTools.createTestJavaProcessBuilder(\"-Djdk.console=jdk.internal.le\", ConsoleTest.class.getName(),\n-                                                          testName);\n+                ProcessTools.createTestJavaProcessBuilder(\n+                    \"--add-exports\",\n+                    \"java.base\/jdk.internal.io=ALL-UNNAMED\",\n+                    \"--add-exports\",\n+                    \"jdk.internal.le\/jdk.internal.org.jline=ALL-UNNAMED\",\n+                    ConsoleTest.class.getName(),\n+                    testName);\n@@ -101,0 +109,2 @@\n+            \/\/ directly instantiate JLine JdkConsole, simulating isTTY=true\n+            var impl = new JdkConsoleProviderImpl().console(true, StandardCharsets.UTF_8, StandardCharsets.UTF_8);\n@@ -103,1 +113,1 @@\n-                    System.console().readLine(\"%%s\");\n+                    impl.readLine(null, \"%%s\");\n@@ -105,1 +115,1 @@\n-                    System.console().readPassword(\"%%s\");\n+                    impl.readPassword(null, \"%%s\");\n@@ -107,1 +117,1 @@\n-                    System.out.println(\"'\" + System.console().readLine() + \"'\");\n+                    System.out.println(\"'\" + impl.readLine() + \"'\");\n@@ -109,2 +119,2 @@\n-                    System.out.println(\"1: '\" +System.console().readLine() + \"'\");\n-                    System.out.println(\"2: '\" + System.console().readLine() + \"'\");\n+                    System.out.println(\"1: '\" + impl.readLine() + \"'\");\n+                    System.out.println(\"2: '\" + impl.readLine() + \"'\");\n","filename":"test\/jdk\/jdk\/internal\/jline\/JLineConsoleProviderTest.java","additions":20,"deletions":10,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n- * @bug 8333086 8344706\n+ * @bug 8333086 8344706 8361613\n@@ -28,2 +28,3 @@\n- * @enablePreview\n- * @modules jdk.internal.le\/jdk.internal.org.jline.reader\n+ * @modules java.base\/jdk.internal.io\n+ *          jdk.internal.le\/jdk.internal.org.jline\n+ *          jdk.internal.le\/jdk.internal.org.jline.reader\n@@ -35,0 +36,3 @@\n+import java.nio.charset.StandardCharsets;\n+\n+import jdk.internal.org.jline.JdkConsoleProviderImpl;\n@@ -44,0 +48,1 @@\n+        \/\/ directly instantiate JLine JdkConsole, simulating isTTY=true\n@@ -46,10 +51,5 @@\n-                System.console().printf(\"Hello!\\n\");\n-                System.console().printf(\"Hello!\");\n-                System.console().format(\"\\nHello!\\n\");\n-                System.console().flush();\n-                IO.println(\"Hello!\");\n-                IO.print(\"Hello!\");\n-            }\n-            case \"read\" -> System.console().readLine(\"Hello!\");\n-            case \"IO-read\" -> {\n-                IO.readln(\"Hello!\");\n+                var impl = new JdkConsoleProviderImpl().console(true, StandardCharsets.UTF_8, StandardCharsets.UTF_8);\n+                impl.println(\"Hello!\\n\");\n+                impl.println(\"Hello!\");\n+                impl.format(null, \"\\nHello!\\n\");\n+                impl.flush();\n@@ -57,0 +57,3 @@\n+            case \"read\" -> new JdkConsoleProviderImpl()\n+                .console(true, StandardCharsets.UTF_8, StandardCharsets.UTF_8)\n+                .readLine(null, \"Hello!\");\n@@ -67,2 +70,1 @@\n-            new TestCase(\"read\", LineReader.class.getName(), null),\n-            new TestCase(\"IO-read\", null, Terminal.class.getName())\n+            new TestCase(\"read\", LineReader.class.getName(), null)\n@@ -72,3 +74,5 @@\n-                    ProcessTools.createTestJavaProcessBuilder(\"--enable-preview\",\n-                                                              \"-verbose:class\",\n-                                                              \"-Djdk.console=jdk.internal.le\",\n+                    ProcessTools.createTestJavaProcessBuilder(\"-verbose:class\",\n+                                                              \"--add-exports\",\n+                                                              \"java.base\/jdk.internal.io=ALL-UNNAMED\",\n+                                                              \"--add-exports\",\n+                                                              \"jdk.internal.le\/jdk.internal.org.jline=ALL-UNNAMED\",\n","filename":"test\/jdk\/jdk\/internal\/jline\/LazyJdkConsoleProvider.java","additions":22,"deletions":18,"binary":false,"changes":40,"status":"modified"},{"patch":"@@ -1,181 +0,0 @@\n-\/*\n- * Copyright (c) 2024, 2025, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-\n-\/**\n- * @test\n- * @bug 8330998 8351435\n- * @summary Verify that even if the stdout is redirected java.io.Console will\n- *          use it for writing.\n- * @modules jdk.internal.le\n- * @library \/test\/lib\n- * @run main RedirectedStdOut runRedirectAllTest\n- * @run main\/othervm --enable-native-access=ALL-UNNAMED RedirectedStdOut runRedirectOutOnly\n- *\/\n-\n-import java.io.ByteArrayOutputStream;\n-import java.io.PrintStream;\n-import java.lang.foreign.Arena;\n-import java.lang.foreign.FunctionDescriptor;\n-import java.lang.foreign.Linker;\n-import java.lang.foreign.MemorySegment;\n-import java.lang.foreign.SymbolLookup;\n-import java.lang.foreign.ValueLayout;\n-import java.lang.invoke.MethodHandle;\n-import java.nio.file.Files;\n-import java.nio.file.Path;\n-import java.util.Objects;\n-import java.util.Optional;\n-\n-import jdk.test.lib.process.OutputAnalyzer;\n-import jdk.test.lib.process.ProcessTools;\n-\n-public class RedirectedStdOut {\n-    private static final String OUTPUT = \"Hello!\";\n-\n-    public static void main(String... args) throws Throwable {\n-        RedirectedStdOut.class.getDeclaredMethod(args[0])\n-                              .invoke(new RedirectedStdOut());\n-    }\n-\n-    \/\/verify the case where neither stdin\/out\/err is attached to a terminal,\n-    \/\/this test is weaker, but more reliable:\n-    void runRedirectAllTest() throws Exception {\n-        ProcessBuilder builder =\n-                ProcessTools.createTestJavaProcessBuilder(\"-Djdk.console=jdk.internal.le\", ConsoleTest.class.getName());\n-        OutputAnalyzer output = ProcessTools.executeProcess(builder);\n-\n-        output.waitFor();\n-\n-        if (output.getExitValue() != 0) {\n-            throw new AssertionError(\"Unexpected return value: \" + output.getExitValue() +\n-                                     \", actualOut: \" + output.getStdout() +\n-                                     \", actualErr: \" + output.getStderr());\n-        }\n-\n-        String expectedOut = OUTPUT;\n-        String actualOut = output.getStdout();\n-\n-        if (!Objects.equals(expectedOut, actualOut)) {\n-            throw new AssertionError(\"Unexpected stdout content. \" +\n-                                     \"Expected: '\" + expectedOut + \"'\" +\n-                                     \", got: '\" + actualOut + \"'\");\n-        }\n-\n-        String expectedErr = \"\";\n-        String actualErr = output.getStderr();\n-\n-        if (!Objects.equals(expectedErr, actualErr)) {\n-            throw new AssertionError(\"Unexpected stderr content. \" +\n-                                     \"Expected: '\" + expectedErr + \"'\" +\n-                                     \", got: '\" + actualErr + \"'\");\n-        }\n-    }\n-\n-    \/\/verify the case where stdin is attached to a terminal,\n-    \/\/this test allocates pty, and it might be skipped, if the appropriate\n-    \/\/native functions cannot be found\n-    \/\/it also leaves the VM in a broken state (with a pty attached), and so\n-    \/\/should run in a separate VM instance\n-    void runRedirectOutOnly() throws Throwable {\n-        Path stdout = Path.of(\".\", \"stdout.txt\").toAbsolutePath();\n-\n-        Files.deleteIfExists(stdout);\n-\n-        Linker linker = Linker.nativeLinker();\n-        SymbolLookup stdlib = linker.defaultLookup();\n-        MemorySegment parent = Arena.global().allocate(ValueLayout.ADDRESS);\n-        MemorySegment child = Arena.global().allocate(ValueLayout.ADDRESS);\n-        Optional<MemorySegment> openptyAddress = stdlib.find(\"openpty\");\n-\n-        if (openptyAddress.isEmpty()) {\n-            System.out.println(\"Cannot lookup openpty.\");\n-            \/\/does not have forkpty, ignore\n-            return ;\n-        }\n-\n-        Optional<MemorySegment> loginttyAddress = stdlib.find(\"login_tty\");\n-\n-        if (loginttyAddress.isEmpty()) {\n-            System.out.println(\"Cannot lookup login_tty.\");\n-            \/\/does not have forkpty, ignore\n-            return ;\n-        }\n-\n-        FunctionDescriptor openttyDescriptor =\n-                FunctionDescriptor.of(ValueLayout.JAVA_INT,\n-                                      ValueLayout.ADDRESS,\n-                                      ValueLayout.ADDRESS,\n-                                      ValueLayout.ADDRESS,\n-                                      ValueLayout.ADDRESS,\n-                                      ValueLayout.ADDRESS);\n-        MethodHandle forkpty = linker.downcallHandle(openptyAddress.get(),\n-                                                     openttyDescriptor);\n-        int res = (int) forkpty.invoke(parent,\n-                                       child,\n-                                       MemorySegment.NULL,\n-                                       MemorySegment.NULL,\n-                                       MemorySegment.NULL);\n-\n-        if (res != 0) {\n-            throw new AssertionError();\n-        }\n-\n-        \/\/set the current VM's in\/out to the terminal:\n-        FunctionDescriptor loginttyDescriptor =\n-                FunctionDescriptor.of(ValueLayout.JAVA_INT,\n-                                      ValueLayout.JAVA_INT);\n-        MethodHandle logintty = linker.downcallHandle(loginttyAddress.get(),\n-                                                      loginttyDescriptor);\n-        logintty.invoke(child.get(ValueLayout.JAVA_INT, 0));\n-\n-        \/\/createTestJavaProcessBuilder logs to (current process') System.out, but\n-        \/\/that may not work since the redirect. Setting System.out to a scratch value:\n-        System.setOut(new PrintStream(new ByteArrayOutputStream()));\n-\n-        ProcessBuilder builder =\n-            ProcessTools.createTestJavaProcessBuilder(\"-Djdk.console=jdk.internal.le\", ConsoleTest.class.getName());\n-\n-        builder.inheritIO();\n-        builder.redirectOutput(stdout.toFile());\n-\n-        OutputAnalyzer output = ProcessTools.executeProcess(builder);\n-\n-        output.waitFor();\n-\n-        String expectedOut = OUTPUT;\n-        String actualOut = Files.readString(stdout);\n-\n-        if (!Objects.equals(expectedOut, actualOut)) {\n-            throw new AssertionError(\"Unexpected stdout content. \" +\n-                                     \"Expected: '\" + expectedOut + \"'\" +\n-                                     \", got: '\" + actualOut + \"'\");\n-        }\n-    }\n-\n-    public static class ConsoleTest {\n-        public static void main(String... args) {\n-            System.console().printf(OUTPUT);\n-            System.exit(0);\n-        }\n-    }\n-}\n","filename":"test\/jdk\/jdk\/internal\/jline\/RedirectedStdOut.java","additions":0,"deletions":181,"binary":false,"changes":181,"status":"deleted"},{"patch":"@@ -55,13 +55,0 @@\n-    static String getEngineInfo(String format) throws Exception {\n-        return DockerTestUtils.execute(Container.ENGINE_COMMAND, \"info\", \"-f\", format)\n-                .getStdout();\n-    }\n-\n-    static boolean isRootless() throws Exception {\n-        \/\/ Docker and Podman have different INFO structures.\n-        \/\/ The node path for Podman is .Host.Security.Rootless, that also holds for\n-        \/\/ Podman emulating Docker CLI. The node path for Docker is .SecurityOptions.\n-        return (getEngineInfo(\"{{.Host.Security.Rootless}}\").contains(\"true\") ||\n-                getEngineInfo(\"{{.SecurityOptions}}\").contains(\"name=rootless\"));\n-    }\n-\n@@ -81,1 +68,1 @@\n-        if (isRootless()) {\n+        if (DockerTestUtils.isRootless()) {\n","filename":"test\/jdk\/jdk\/internal\/platform\/docker\/TestDockerMemoryMetricsSubgroup.java","additions":1,"deletions":14,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -100,0 +100,3 @@\n+        if (Platform.isDebugBuild()) {\n+            COMPILATION_TIMEOUT = COMPILATION_TIMEOUT * 2;\n+        }\n","filename":"test\/jdk\/jdk\/internal\/vm\/Continuation\/Fuzz.java","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -42,3 +42,0 @@\n-\n-    static String nativeEvent = EventNames.CPUTimeSample;\n-\n@@ -49,1 +46,0 @@\n-        t.setDaemon(true);\n@@ -53,3 +49,2 @@\n-                rs.enable(nativeEvent).with(\"throttle\", \"1ms\");\n-                rs.onEvent(nativeEvent, e -> {\n-                    alive = false;\n+                rs.enable(EventNames.CPUTimeSample).with(\"throttle\", \"1ms\");\n+                rs.onEvent(EventNames.CPUTimeSample, e -> {\n@@ -63,0 +58,1 @@\n+        t.join();\n","filename":"test\/jdk\/jdk\/jfr\/event\/profiling\/TestCPUTimeSampleMultipleRecordings.java","additions":3,"deletions":7,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -35,0 +35,1 @@\n+ * @run main\/othervm -XX:CompileCommand=compileonly,jdk.test.lib.jfr.RecurseThread::recurse* -XX:+PreserveFramePointer jdk.jfr.event.profiling.TestFullStackTrace\n","filename":"test\/jdk\/jdk\/jfr\/event\/profiling\/TestFullStackTrace.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -157,0 +157,2 @@\n+    static final Logger log = Logger.getLogger(\"sun.java2d.marlin\");\n+\n@@ -161,3 +163,0 @@\n-\n-        \/\/ initialize j.u.l Looger:\n-        final Logger log = Logger.getLogger(\"sun.java2d.marlin\");\n","filename":"test\/jdk\/sun\/java2d\/marlin\/ClipShapeTest.java","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -0,0 +1,81 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/**\n+ * @test\n+ * @bug 8244336\n+ * @summary Test JCE layer algorithm restriction\n+ * @library \/test\/lib ..\n+ * @run main\/othervm TestDisabledAlgorithms CiPhEr.RSA\/ECB\/PKCS1Padding true\n+ * @run main\/othervm TestDisabledAlgorithms cIpHeR.rsA true\n+ * @run main\/othervm TestDisabledAlgorithms Cipher.what false\n+ * @run main\/othervm TestDisabledAlgorithms CiPhER.RSA\/ECB\/PKCS1Padding2 false\n+ *\/\n+import java.util.List;\n+import java.security.NoSuchAlgorithmException;\n+import java.security.Provider;\n+import java.security.Security;\n+import javax.crypto.Cipher;\n+import javax.crypto.NoSuchPaddingException;\n+import jdk.test.lib.Utils;\n+\n+public class TestDisabledAlgorithms extends PKCS11Test {\n+\n+    boolean shouldThrow;\n+\n+    TestDisabledAlgorithms(boolean shouldThrow) {\n+        this.shouldThrow = shouldThrow;\n+    }\n+\n+    private static final String PROP_NAME = \"jdk.crypto.disabledAlgorithms\";\n+\n+    private static void test(String alg, Provider p, boolean shouldThrow)\n+            throws Exception {\n+        System.out.println(\"Testing \" + p.getName() + \": \" + alg +\n+                \", shouldThrow=\" + shouldThrow);\n+        if (shouldThrow) {\n+            Utils.runAndCheckException(() -> Cipher.getInstance(alg, p),\n+                    NoSuchAlgorithmException.class);\n+        } else {\n+            Cipher c = Cipher.getInstance(alg, p);\n+            System.out.println(\"Got cipher w\/ algo \" + c.getAlgorithm());\n+        }\n+    }\n+\n+    @Override\n+    public void main(Provider p) throws Exception {\n+        for (String a : List.of(\"RSA\/ECB\/PKCS1Padding\", \"RSA\")) {\n+            test(a, p, shouldThrow);\n+        }\n+        System.out.println(\"Done\");\n+    }\n+\n+    public static void main(String[] args) throws Exception {\n+        String propValue = args[0];\n+        System.out.println(\"Setting Security Prop \" + PROP_NAME + \" = \" +\n+                propValue);\n+        Security.setProperty(PROP_NAME, propValue);\n+        boolean shouldThrow = Boolean.valueOf(args[1]);\n+        main(new TestDisabledAlgorithms(shouldThrow), args);\n+    }\n+}\n","filename":"test\/jdk\/sun\/security\/pkcs11\/Cipher\/TestDisabledAlgorithms.java","additions":81,"deletions":0,"binary":false,"changes":81,"status":"added"},{"patch":"@@ -324,1 +324,2 @@\n-            System.out.println(\"Exception occured using \" + p.getName() + \" version \" + p.getVersionStr());\n+            System.out.println(\"Exception occured using \" + p.getName()\n+                    + \" version \" + p.getVersionStr());\n@@ -327,1 +328,1 @@\n-                double ver = getNSSInfo(\"nss\");\n+                Version ver = getNSSInfo(\"nss\");\n@@ -329,1 +330,4 @@\n-                if (ver > 3.139 && ver < 3.15 && osName.equals(\"Linux\")) {\n+\n+                if (osName.equals(\"Linux\") &&\n+                        ver.major() == 3 && ver.minor() < 15\n+                        && (ver.minor() > 13 && ver.patch() >= 9)) {\n@@ -331,1 +335,2 @@\n-                    System.out.println(\"Warning: old NSS \" + ver + \" might be problematic, consider upgrading it\");\n+                    System.out.println(\"Warning: old NSS \" + ver\n+                            + \" might be problematic, consider upgrading it\");\n","filename":"test\/jdk\/sun\/security\/pkcs11\/Cipher\/TestKATForGCM.java","additions":9,"deletions":4,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -119,5 +119,8 @@\n-        if (isNSS(provider) && expected.getAlgorithm().equals(\"AES\") &&\n-                (getNSSVersion() >= 3.12 && getNSSVersion() <= 3.122)) {\n-            System.out.println(\"NSS 3.12 bug returns incorrect AES key \"+\n-                    \"length breaking key storage. Aborting...\");\n-            return true;\n+        if (isNSS(provider) && expected.getAlgorithm().equals(\"AES\")) {\n+            Version version = getNSSVersion();\n+            if (version.major() == 3 && version.minor() == 12\n+                    && version.patch() <= 2) {\n+                System.out.println(\"NSS 3.12 bug returns incorrect AES key \" +\n+                        \"length breaking key storage. Aborting...\");\n+                return true;\n+            }\n@@ -171,1 +174,1 @@\n-                (getLibsoftokn3Version() != getLibnss3Version())) {\n+                (!getLibsoftokn3Version().equals(getLibnss3Version()))) {\n","filename":"test\/jdk\/sun\/security\/pkcs11\/KeyStore\/SecretKeysBasic.java","additions":10,"deletions":7,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -86,1 +86,1 @@\n-    static double nss_version = -1;\n+    static Version nss_version = null;\n@@ -96,2 +96,2 @@\n-    static double softoken3_version = -1;\n-    static double nss3_version = -1;\n+    static Version softoken3_version = null;\n+    static Version nss3_version = null;\n@@ -272,5 +272,6 @@\n-        double nssVersion = getNSSVersion();\n-        if (isNSS(p) && nssVersion >= 3.11 && nssVersion < 3.12) {\n-            System.out.println(\"NSS 3.11 has a DER issue that recent \" +\n-                    \"version do not, skipping\");\n-            return true;\n+        Version nssVersion = getNSSVersion();\n+        if (isNSS(p)) {\n+            \/\/ bad version is just between [3.11,3.12)\n+            return nssVersion.major == 3 && 11 == nssVersion.minor;\n+        } else {\n+            return false;\n@@ -278,1 +279,16 @@\n-        return false;\n+    }\n+\n+    public record Version(int major, int minor, int patch) {}\n+\n+    protected static Version parseVersionString(String version) {\n+        String [] parts = version.split(\"\\\\.\");\n+        int major = Integer.parseInt(parts[0]);\n+        int minor = 0;\n+        int patch = 0;\n+        if (parts.length >= 2) {\n+            minor = Integer.parseInt(parts[1]);\n+        }\n+        if (parts.length >= 3) {\n+            patch = Integer.parseInt(parts[2]);\n+        }\n+        return new Version(major, minor, patch);\n@@ -307,2 +323,2 @@\n-    static double getNSSVersion() {\n-        if (nss_version == -1)\n+    static Version getNSSVersion() {\n+        if (nss_version == null)\n@@ -314,1 +330,1 @@\n-        if (nss_version == -1)\n+        if (nss_version == null)\n@@ -319,2 +335,2 @@\n-    public static double getLibsoftokn3Version() {\n-        if (softoken3_version == -1)\n+    public static Version getLibsoftokn3Version() {\n+        if (softoken3_version == null)\n@@ -325,2 +341,2 @@\n-    public static double getLibnss3Version() {\n-        if (nss3_version == -1)\n+    public static Version getLibnss3Version() {\n+        if (nss3_version == null)\n@@ -341,1 +357,1 @@\n-    static double getNSSInfo(String library) {\n+    static Version getNSSInfo(String library) {\n@@ -350,1 +366,1 @@\n-        if (library.compareTo(\"softokn3\") == 0 && softoken3_version > -1)\n+        if (library.compareTo(\"softokn3\") == 0 && softoken3_version != null)\n@@ -352,1 +368,1 @@\n-        if (library.compareTo(\"nss3\") == 0 && nss3_version > -1)\n+        if (library.compareTo(\"nss3\") == 0 && nss3_version != null)\n@@ -358,1 +374,1 @@\n-                return 0.0;\n+                return parseVersionString(\"0.0\");\n@@ -394,1 +410,1 @@\n-            nss_version = 0.0;\n+            nss_version = parseVersionString(\"0.0\");\n@@ -407,20 +423,1 @@\n-        \/\/ If a \"dot dot\" release, strip the extra dots for double parsing\n-        String[] dot = version.toString().split(\"\\\\.\");\n-        if (dot.length > 2) {\n-            version = new StringBuilder(dot[0] + \".\" + dot[1]);\n-            for (int j = 2; dot.length > j; j++) {\n-                version.append(dot[j]);\n-            }\n-        }\n-\n-        \/\/ Convert to double for easier version value checking\n-        try {\n-            nss_version = Double.parseDouble(version.toString());\n-        } catch (NumberFormatException e) {\n-            System.out.println(\"===== Content start =====\");\n-            System.out.println(s);\n-            System.out.println(\"===== Content end =====\");\n-            System.out.println(\"Failed to parse lib\" + library +\n-                    \" version. Set to 0.0\");\n-            e.printStackTrace();\n-        }\n+        nss_version = parseVersionString(version.toString());\n","filename":"test\/jdk\/sun\/security\/pkcs11\/PKCS11Test.java","additions":38,"deletions":41,"binary":false,"changes":79,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -124,4 +124,4 @@\n-        double nssVersion = getNSSVersion();\n-        if (p.getName().equalsIgnoreCase(\"SunPKCS11-NSSKeyStore\")\n-                && nssVersion >= 3.28 && nssVersion < 3.35) {\n-            return true;\n+        Version nssVersion = getNSSVersion();\n+        if (p.getName().equalsIgnoreCase(\"SunPKCS11-NSSKeyStore\")) {\n+            return nssVersion.major() == 3 &&\n+                    (nssVersion.minor() >= 28 && nssVersion.minor() < 35);\n","filename":"test\/jdk\/sun\/security\/pkcs11\/Secmod\/AddTrustedCert.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -50,7 +50,9 @@\n-        double version = getNSSVersion();\n-        String[] versionStrs = Double.toString(version).split(\"\\\\.\");\n-        int major = Integer.parseInt(versionStrs[0]);\n-        int minor = Integer.parseInt(versionStrs[1]);\n-        if (isNSS(provider) && (version == 0.0 || (major >= 3 && minor >= 14))) {\n-            System.out.println(\"Skip testing NSS \" + version);\n-            return true;\n+        if (isNSS(provider)) {\n+            Version version = getNSSVersion();\n+            if (version == null) {\n+                return true;\n+            }\n+            if (version.major() >= 3 && version.minor() >= 14){\n+                System.out.println(\"Skip testing NSS \" + version);\n+                return true;\n+            }\n","filename":"test\/jdk\/sun\/security\/pkcs11\/Signature\/TestDSAKeyLength.java","additions":10,"deletions":8,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -0,0 +1,96 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+import java.security.*;\n+import java.security.interfaces.*;\n+import java.security.spec.*;\n+import java.util.stream.IntStream;\n+import jtreg.SkippedException;\n+\n+\/**\n+ * @test\n+ * @bug 8244336\n+ * @summary Test the NONEwithRSA signature refactoring for JCE layer\n+ *     algorithm restriction\n+ * @library \/test\/lib ..\n+ * @modules jdk.crypto.cryptoki\n+ *\/\n+public class TestNONEwithRSA extends PKCS11Test {\n+\n+    private static final String SIGALG = \"NONEwithRSA\";\n+\n+    private static final int[] KEYSIZES = { 2048, 3072 };\n+    private static final byte[] DATA = generateData(100);\n+\n+    public static void main(String[] args) throws Exception {\n+        main(new TestNONEwithRSA(), args);\n+    }\n+\n+    @Override\n+    public void main(Provider p) throws Exception {\n+        try {\n+            Signature.getInstance(SIGALG, p);\n+        } catch (NoSuchAlgorithmException nsae) {\n+            throw new SkippedException(\"Skip due to no support for \" + SIGALG);\n+        }\n+\n+        for (int kSize : KEYSIZES) {\n+            System.out.println(\"[KEYSIZE = \" + kSize + \"]\");\n+            KeyPairGenerator kpg = KeyPairGenerator.getInstance(\"RSA\", p);\n+            kpg.initialize(kSize);\n+            KeyPair kp = kpg.generateKeyPair();\n+            PrivateKey privKey = kp.getPrivate();\n+            PublicKey pubKey = kp.getPublic();\n+            checkSignature(p, DATA, pubKey, privKey);\n+        }\n+    }\n+\n+    private static void checkSignature(Provider p, byte[] data, PublicKey pub,\n+            PrivateKey priv)\n+            throws NoSuchAlgorithmException, InvalidKeyException,\n+            SignatureException, NoSuchProviderException,\n+            InvalidAlgorithmParameterException {\n+\n+        Signature sig = Signature.getInstance(SIGALG, p);\n+        sig.initSign(priv);\n+\n+        sig.update(data);\n+        byte[] signedData = sig.sign();\n+\n+        \/\/ Make sure signature verifies with original data\n+        sig.initVerify(pub);\n+        sig.update(data);\n+        if (!sig.verify(signedData)) {\n+            throw new RuntimeException(\"Failed to verify signature\");\n+        }\n+\n+        \/\/ Make sure signature does NOT verify when the original data\n+        \/\/ has changed\n+        sig.initVerify(pub);\n+        sig.update(data);\n+        sig.update(data);\n+        if (sig.verify(signedData)) {\n+            throw new RuntimeException(\"Failed to detect bad signature\");\n+        }\n+        System.out.println(\"    => Passed\");\n+    }\n+}\n","filename":"test\/jdk\/sun\/security\/pkcs11\/Signature\/TestNONEwithRSA.java","additions":96,"deletions":0,"binary":false,"changes":96,"status":"added"},{"patch":"@@ -114,0 +114,1 @@\n+        System.out.println(\"Testing provider \" + p.getName());\n","filename":"test\/jdk\/sun\/security\/pkcs11\/ec\/TestECDH.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,1 +26,1 @@\n- * @bug 8206929 8212885\n+ * @bug 8206929 8212885 8333857\n@@ -50,0 +50,3 @@\n+import java.util.concurrent.CountDownLatch;\n+import java.util.concurrent.ExecutorService;\n+import java.util.concurrent.Executors;\n@@ -59,0 +62,1 @@\n+    static TestMode testMode;\n@@ -61,1 +65,2 @@\n-        new ResumeChecksClient(TestMode.valueOf(args[0])).run();\n+        testMode = TestMode.valueOf(args[0]);\n+        new ResumeChecksClient().test();\n@@ -64,8 +69,2 @@\n-    private final TestMode testMode;\n-    public ResumeChecksClient(TestMode mode) {\n-        this.testMode = mode;\n-    }\n-\n-    private void run() throws Exception {\n-        Server server = startServer();\n-        server.signal();\n+    private void test() throws Exception {\n+        Server server = new Server();\n@@ -73,4 +72,7 @@\n-        while (!server.started) {\n-            Thread.yield();\n-        }\n-        SSLSession firstSession = connect(sslContext, server.port, testMode, false);\n+        HexFormat hex = HexFormat.of();\n+        long firstStartTime = System.currentTimeMillis();\n+        SSLSession firstSession = connect(sslContext, server.port, true);\n+        System.err.println(\"firstStartTime = \" + firstStartTime);\n+        System.err.println(\"firstId = \" + hex.formatHex(firstSession.getId()));\n+        System.err.println(\"firstSession.getCreationTime() = \" +\n+            firstSession.getCreationTime());\n@@ -78,1 +80,0 @@\n-        server.signal();\n@@ -80,5 +81,6 @@\n-        Thread.sleep(10);\n-        SSLSession secondSession = connect(sslContext, server.port, testMode, true);\n-\n-        server.go = false;\n-        server.signal();\n+        SSLSession secondSession = connect(sslContext, server.port, false);\n+        System.err.println(\"secondStartTime = \" + secondStartTime);\n+        \/\/ Note: Ids will never match with TLS 1.3 due to spec\n+        System.err.println(\"secondId = \" + hex.formatHex(secondSession.getId()));\n+        System.err.println(\"secondSession.getCreationTime() = \" +\n+            secondSession.getCreationTime());\n@@ -89,1 +91,7 @@\n-            checkResumedSession(firstSession, secondSession);\n+            try {\n+                checkResumedSession(firstSession, secondSession);\n+            } catch (Exception e) {\n+                throw new AssertionError(\"secondSession did not resume: FAIL\",\n+                    e);\n+            }\n+            System.out.println(\"secondSession used resumption: PASS\");\n@@ -96,2 +104,8 @@\n-            if (secondSession.getCreationTime() <= secondStartTime) {\n-                throw new RuntimeException(\"Existing session was used\");\n+            try {\n+                checkResumedSession(firstSession, secondSession);\n+                System.err.println(\"firstSession  = \" + firstSession);\n+                System.err.println(\"secondSession = \" + secondSession);\n+                throw new AssertionError(\"Second connection should not \" +\n+                    \"have resumed first session:  FAIL\");\n+            } catch (Exception e) {\n+                System.out.println(\"secondSession didn't use resumption: PASS\");\n@@ -101,1 +115,1 @@\n-            throw new RuntimeException(\"unknown mode: \" + testMode);\n+            throw new AssertionError(\"unknown mode: \" + testMode);\n@@ -137,1 +151,1 @@\n-        TestMode mode, boolean second) {\n+        boolean first) {\n@@ -144,38 +158,16 @@\n-            switch (mode) {\n-            case BASIC:\n-                \/\/ do nothing to ensure resumption works\n-                break;\n-            case VERSION_2_TO_3:\n-                if (second) {\n-                    params.setProtocols(new String[] {\"TLSv1.3\"});\n-                } else {\n-                    params.setProtocols(new String[] {\"TLSv1.2\"});\n-                }\n-                break;\n-            case VERSION_3_TO_2:\n-                if (second) {\n-                    params.setProtocols(new String[] {\"TLSv1.2\"});\n-                } else {\n-                    params.setProtocols(new String[] {\"TLSv1.3\"});\n-                }\n-                break;\n-            case CIPHER_SUITE:\n-                if (second) {\n-                    params.setCipherSuites(\n-                        new String[] {\"TLS_AES_256_GCM_SHA384\"});\n-                } else {\n-                    params.setCipherSuites(\n-                        new String[] {\"TLS_AES_128_GCM_SHA256\"});\n-                }\n-                break;\n-            case SIGNATURE_SCHEME:\n-                AlgorithmConstraints constraints =\n-                    params.getAlgorithmConstraints();\n-                if (second) {\n-                    params.setAlgorithmConstraints(new NoSig(\"ecdsa\"));\n-                } else {\n-                    params.setAlgorithmConstraints(new NoSig(\"rsa\"));\n-                }\n-                break;\n-            default:\n-                throw new RuntimeException(\"unknown mode: \" + mode);\n+            switch (testMode) {\n+                case BASIC -> {}  \/\/ do nothing\n+                case VERSION_2_TO_3 -> params.setProtocols(new String[]{\n+                    first ? \"TLSv1.2\" : \"TLSv1.3\"});\n+                case VERSION_3_TO_2 -> params.setProtocols(new String[]{\n+                    first ? \"TLSv1.3\" : \"TLSv1.2\"});\n+                case CIPHER_SUITE -> params.setCipherSuites(\n+                    new String[]{\n+                        first ? \"TLS_AES_128_GCM_SHA256\" :\n+                            \"TLS_AES_256_GCM_SHA384\"});\n+                case SIGNATURE_SCHEME ->\n+                    params.setAlgorithmConstraints(new NoSig(\n+                        first ? \"rsa\" : \"ecdsa\"));\n+                default ->\n+                    throw new AssertionError(\"unknown mode: \" +\n+                        testMode);\n@@ -198,1 +190,1 @@\n-            throw new RuntimeException(ex);\n+            throw new AssertionError(ex);\n@@ -277,12 +269,5 @@\n-    private static Server startServer() {\n-        Server server = new Server();\n-        new Thread(server).start();\n-        return server;\n-    }\n-\n-    private static class Server extends SSLContextTemplate implements Runnable {\n-\n-        public volatile boolean go = true;\n-        private boolean signal = false;\n-        public volatile int port = 0;\n-        public volatile boolean started = false;\n+    private static class Server extends SSLContextTemplate {\n+        public int port;\n+        private final SSLServerSocket ssock;\n+        ExecutorService threadPool = Executors.newFixedThreadPool(1);\n+        CountDownLatch serverLatch = new CountDownLatch(1);\n@@ -290,17 +275,1 @@\n-        private synchronized void waitForSignal() {\n-            while (!signal) {\n-                try {\n-                    wait();\n-                } catch (InterruptedException ex) {\n-                    \/\/ do nothing\n-                }\n-            }\n-            signal = false;\n-        }\n-        public synchronized void signal() {\n-            signal = true;\n-            notify();\n-        }\n-\n-        @Override\n-        public void run() {\n+        Server() {\n@@ -308,1 +277,0 @@\n-\n@@ -311,3 +279,2 @@\n-                SSLServerSocket ssock = (SSLServerSocket)\n-                    fac.createServerSocket(0);\n-                this.port = ssock.getLocalPort();\n+                ssock = (SSLServerSocket) fac.createServerSocket(0);\n+                port = ssock.getLocalPort();\n@@ -315,3 +282,2 @@\n-                waitForSignal();\n-                started = true;\n-                while (go) {\n+                \/\/ Thread to allow multiple clients to connect\n+                new Thread(() -> {\n@@ -319,11 +285,6 @@\n-                        System.out.println(\"Waiting for connection\");\n-                        Socket sock = ssock.accept();\n-                        BufferedReader reader = new BufferedReader(\n-                            new InputStreamReader(sock.getInputStream()));\n-                        String line = reader.readLine();\n-                        System.out.println(\"server read: \" + line);\n-                        PrintWriter out = new PrintWriter(\n-                            new OutputStreamWriter(sock.getOutputStream()));\n-                        out.println(line);\n-                        out.flush();\n-                        waitForSignal();\n+                        System.err.println(\"Server starting to accept\");\n+                        serverLatch.countDown();\n+                        do {\n+                            threadPool.submit(\n+                                new ServerThread((SSLSocket) ssock.accept()));\n+                        } while (true);\n@@ -331,1 +292,3 @@\n-                        ex.printStackTrace();\n+                        throw new AssertionError(\"Server Down\", ex);\n+                    } finally {\n+                        threadPool.close();\n@@ -333,0 +296,29 @@\n+                }).start();\n+\n+            } catch (Exception e) {\n+                throw new AssertionError(e);\n+            }\n+        }\n+\n+        static class ServerThread extends Thread {\n+            SSLSocket sock;\n+\n+            ServerThread(SSLSocket s) {\n+                this.sock = s;\n+                System.err.println(\"(Server) client connection on port \" +\n+                    sock.getPort());\n+            }\n+\n+            public void run() {\n+                try {\n+                    BufferedReader reader = new BufferedReader(\n+                        new InputStreamReader(sock.getInputStream()));\n+                    String line = reader.readLine();\n+                    System.out.println(\"server read: \" + line);\n+                    PrintWriter out = new PrintWriter(\n+                        new OutputStreamWriter(sock.getOutputStream()));\n+                    out.println(line);\n+                    out.flush();\n+                    out.close();\n+                } catch (Exception e) {\n+                    throw new AssertionError(\"Server thread error\", e);\n@@ -334,2 +326,0 @@\n-            } catch (Exception ex) {\n-                throw new RuntimeException(ex);\n","filename":"test\/jdk\/sun\/security\/ssl\/SSLSessionImpl\/ResumeChecksClient.java","additions":105,"deletions":115,"binary":false,"changes":220,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n- * @bug 8206929\n+ * @bug 8206929 8333857\n@@ -52,0 +52,4 @@\n+import java.util.concurrent.CountDownLatch;\n+import java.util.concurrent.ExecutorService;\n+import java.util.concurrent.Executors;\n+\n@@ -66,5 +70,3 @@\n-    public static void main(String[] args) throws Exception {\n-\n-        new ResumeChecksServer(TestMode.valueOf(args[0])).run();\n-    }\n-    private final TestMode testMode;\n+    static CountDownLatch latch = new CountDownLatch(1);\n+    static TestMode testMode;\n+    static int serverPort;\n@@ -72,2 +74,3 @@\n-    public ResumeChecksServer(TestMode testMode) {\n-        this.testMode = testMode;\n+    public static void main(String[] args) throws Exception {\n+        testMode = TestMode.valueOf(args[0]);\n+        new ResumeChecksServer().test();\n@@ -76,3 +79,3 @@\n-    private void run() throws Exception {\n-        SSLSession firstSession;\n-        SSLSession secondSession = null;\n+    private void test() throws Exception {\n+        SSLSession firstSession, secondSession;\n+        HexFormat hex = HexFormat.of();\n@@ -80,4 +83,3 @@\n-        SSLContext sslContext = createServerSSLContext();\n-        ServerSocketFactory fac = sslContext.getServerSocketFactory();\n-        SSLServerSocket ssock = (SSLServerSocket)\n-            fac.createServerSocket(0);\n+        serverPort = new Server().port;\n+        latch.await();\n+        Client c = new Client(serverPort);\n@@ -85,1 +87,3 @@\n-        Client client = startClient(ssock.getLocalPort());\n+        System.out.println(\"Waiting for connection\");\n+        long firstStartTime = System.currentTimeMillis();\n+        firstSession = c.test();\n@@ -87,5 +91,4 @@\n-        try {\n-            firstSession = connect(client, ssock, testMode, null);\n-        } catch (Exception ex) {\n-            throw new RuntimeException(ex);\n-        }\n+        System.err.println(\"firstStartTime = \" + firstStartTime);\n+        System.err.println(\"firstId = \" + hex.formatHex(firstSession.getId()));\n+        System.err.println(\"firstSession.getCreationTime() = \" +\n+            firstSession.getCreationTime());\n@@ -94,8 +97,1 @@\n-        Thread.sleep(10);\n-        try {\n-            secondSession = connect(client, ssock, testMode, firstSession);\n-        } catch (SSLHandshakeException ex) {\n-            \/\/ this is expected\n-        } catch (Exception ex) {\n-            throw new RuntimeException(ex);\n-        }\n+        secondSession = c.test();\n@@ -103,2 +99,5 @@\n-        client.go = false;\n-        client.signal();\n+        System.err.println(\"secondStartTime = \" + secondStartTime);\n+        \/\/ Note: Ids will never match with TLS 1.3 due to spec\n+        System.err.println(\"secondId = \" + hex.formatHex(secondSession.getId()));\n+        System.err.println(\"secondSession.getCreationTime() = \" +\n+            secondSession.getCreationTime());\n@@ -109,2 +108,3 @@\n-            if (secondSession.getCreationTime() > secondStartTime) {\n-                throw new RuntimeException(\"Session was not reused\");\n+            if (firstSession.getCreationTime() !=\n+                secondSession.getCreationTime()) {\n+                throw new AssertionError(\"Session was not reused: FAIL\");\n@@ -114,1 +114,1 @@\n-            if (!java.util.Arrays.equals(\n+            if (!Arrays.equals(\n@@ -117,1 +117,1 @@\n-                throw new RuntimeException(\"Certificates do not match\");\n+                throw new AssertionError(\"Certificates do not match: FAIL\");\n@@ -119,1 +119,1 @@\n-\n+            System.out.println(\"secondSession used resumption: PASS\");\n@@ -131,2 +131,2 @@\n-            if (secondSession.getCreationTime() <= secondStartTime) {\n-                throw new RuntimeException(\"Existing session was used\");\n+            if (secondSession.getCreationTime() < secondStartTime) {\n+                throw new AssertionError(\"Existing session was used: FAIL\");\n@@ -134,0 +134,1 @@\n+            System.out.println(\"secondSession not resumed: PASS\");\n@@ -136,1 +137,1 @@\n-            throw new RuntimeException(\"unknown mode: \" + testMode);\n+            throw new AssertionError(\"unknown mode: \" + testMode);\n@@ -141,1 +142,0 @@\n-\n@@ -148,1 +148,0 @@\n-\n@@ -156,0 +155,1 @@\n+\n@@ -158,1 +158,0 @@\n-\n@@ -161,0 +160,1 @@\n+\n@@ -163,1 +163,0 @@\n-\n@@ -168,4 +167,4 @@\n-    private static SSLSession connect(Client client, SSLServerSocket ssock,\n-            TestMode mode, SSLSession firstSession) throws Exception {\n-\n-        boolean second = firstSession != null;\n+    private static class Client extends SSLContextTemplate {\n+        private final int port;\n+        private final SSLContext sc;\n+        public SSLSession session;\n@@ -173,5 +172,4 @@\n-        try {\n-            client.signal();\n-            System.out.println(\"Waiting for connection\");\n-            SSLSocket sock = (SSLSocket) ssock.accept();\n-            SSLParameters params = sock.getSSLParameters();\n+        Client(int port) throws Exception {\n+            sc = createClientSSLContext();\n+            this.port = port;\n+        }\n@@ -179,55 +177,10 @@\n-            switch (mode) {\n-            case BASIC:\n-                \/\/ do nothing to ensure resumption works\n-                break;\n-            case CLIENT_AUTH:\n-                if (second) {\n-                    params.setNeedClientAuth(true);\n-                } else {\n-                    params.setNeedClientAuth(false);\n-                }\n-                break;\n-            case VERSION_2_TO_3:\n-                if (second) {\n-                    params.setProtocols(new String[] {\"TLSv1.3\"});\n-                } else {\n-                    params.setProtocols(new String[] {\"TLSv1.2\"});\n-                }\n-                break;\n-            case VERSION_3_TO_2:\n-                if (second) {\n-                    params.setProtocols(new String[] {\"TLSv1.2\"});\n-                } else {\n-                    params.setProtocols(new String[] {\"TLSv1.3\"});\n-                }\n-                break;\n-            case CIPHER_SUITE:\n-                if (second) {\n-                    params.setCipherSuites(\n-                        new String[] {\"TLS_AES_128_GCM_SHA256\"});\n-                } else {\n-                    params.setCipherSuites(\n-                        new String[] {\"TLS_AES_256_GCM_SHA384\"});\n-                }\n-                break;\n-            case SIGNATURE_SCHEME:\n-                params.setNeedClientAuth(true);\n-                AlgorithmConstraints constraints =\n-                    params.getAlgorithmConstraints();\n-                if (second) {\n-                    params.setAlgorithmConstraints(\n-                            new NoSig(\"ecdsa_secp384r1_sha384\"));\n-                } else {\n-                    params.setAlgorithmConstraints(\n-                            new NoSig(\"ecdsa_secp521r1_sha512\"));\n-                }\n-                break;\n-            case LOCAL_CERTS:\n-                if (second) {\n-                    \/\/ Add first session's certificate signature\n-                    \/\/ algorithm to constraints so local certificates\n-                    \/\/ can't be restored from the session ticket.\n-                    params.setAlgorithmConstraints(\n-                            new NoSig(X509CertImpl.toImpl((X509CertImpl)\n-                                            firstSession.getLocalCertificates()[0])\n-                                    .getSigAlgName()));\n+        public SSLSession test() throws Exception {\n+            SSLSocket sock = null;\n+            latch.await();\n+            do {\n+                try {\n+                    sock = (SSLSocket) sc.getSocketFactory().createSocket();\n+                } catch (IOException e) {\n+                    \/\/ If the server never starts, test will time out.\n+                    System.err.println(\"client trying again to connect\");\n+                    Thread.sleep(500);\n@@ -235,9 +188,2 @@\n-                break;\n-            default:\n-                throw new RuntimeException(\"unknown mode: \" + mode);\n-            }\n-            sock.setSSLParameters(params);\n-            BufferedReader reader = new BufferedReader(\n-                new InputStreamReader(sock.getInputStream()));\n-            String line = reader.readLine();\n-            System.out.println(\"server read: \" + line);\n+            } while (sock == null);\n+            sock.connect(new InetSocketAddress(\"localhost\", port));\n@@ -246,1 +192,1 @@\n-            out.println(line);\n+            out.println(\"message\");\n@@ -248,0 +194,4 @@\n+            BufferedReader reader = new BufferedReader(\n+                new InputStreamReader(sock.getInputStream()));\n+            String inMsg = reader.readLine();\n+            System.out.println(\"Client received: \" + inMsg);\n@@ -249,1 +199,1 @@\n-            SSLSession result = sock.getSession();\n+            session = sock.getSession();\n@@ -251,5 +201,1 @@\n-            return result;\n-        } catch (SSLHandshakeException ex) {\n-            if (!second) {\n-                throw ex;\n-            }\n+            return session;\n@@ -257,7 +203,0 @@\n-        return null;\n-    }\n-\n-    private static Client startClient(int port) {\n-        Client client = new Client(port);\n-        new Thread(client).start();\n-        return client;\n@@ -266,12 +205,17 @@\n-    private static class Client extends SSLContextTemplate implements Runnable {\n-\n-        public volatile boolean go = true;\n-        private boolean signal = false;\n-        private final int port;\n-\n-        Client(int port) {\n-            this.port = port;\n-        }\n-\n-        private synchronized void waitForSignal() {\n-            while (!signal) {\n+    \/\/ The server will only have two connections each tests\n+    private static class Server extends SSLContextTemplate {\n+        public int port;\n+        ExecutorService threadPool = Executors.newFixedThreadPool(1);\n+        \/\/ Stores the certs from the first connection in mode LOCAL_CERTS\n+        static X509CertImpl localCerts;\n+        \/\/ first connection to the server\n+        static boolean first = true;\n+\n+        Server() throws Exception {\n+            SSLContext sc = createServerSSLContext();\n+            ServerSocketFactory fac = sc.getServerSocketFactory();\n+            SSLServerSocket ssock = (SSLServerSocket) fac.createServerSocket(0);\n+            port = ssock.getLocalPort();\n+\n+            \/\/ Thread to allow multiple clients to connect\n+            new Thread(() -> {\n@@ -279,3 +223,9 @@\n-                    wait();\n-                } catch (InterruptedException ex) {\n-                    \/\/ do nothing\n+                    System.err.println(\"Server starting to accept\");\n+                    latch.countDown();\n+                    do {\n+                        threadPool.submit(new ServerThread(ssock.accept()));\n+                    } while (true);\n+                } catch (Exception ex) {\n+                    throw new AssertionError(\"Server Down\", ex);\n+                } finally {\n+                    threadPool.close();\n@@ -283,12 +233,1 @@\n-            }\n-            signal = false;\n-\n-            try {\n-                Thread.sleep(1000);\n-            } catch (InterruptedException ex) {\n-                \/\/ do nothing\n-            }\n-        }\n-        public synchronized void signal() {\n-            signal = true;\n-            notify();\n+            }).start();\n@@ -297,2 +236,2 @@\n-        public void run() {\n-            try {\n+        static class ServerThread implements Runnable {\n+            final SSLSocket sock;\n@@ -300,1 +239,5 @@\n-                SSLContext sc = createClientSSLContext();\n+            ServerThread(Socket s) {\n+                this.sock = (SSLSocket) s;\n+                System.err.println(\"(Server) client connection on port \" +\n+                    sock.getPort());\n+            }\n@@ -302,19 +245,48 @@\n-                waitForSignal();\n-                while (go) {\n-                    try {\n-                        SSLSocket sock = (SSLSocket)\n-                            sc.getSocketFactory().createSocket();\n-                        sock.connect(new InetSocketAddress(\"localhost\", port));\n-                        PrintWriter out = new PrintWriter(\n-                            new OutputStreamWriter(sock.getOutputStream()));\n-                        out.println(\"message\");\n-                        out.flush();\n-                        BufferedReader reader = new BufferedReader(\n-                            new InputStreamReader(sock.getInputStream()));\n-                        String inMsg = reader.readLine();\n-                        System.out.println(\"Client received: \" + inMsg);\n-                        out.close();\n-                        sock.close();\n-                        waitForSignal();\n-                    } catch (Exception ex) {\n-                        ex.printStackTrace();\n+            public void run() {\n+                try {\n+                    SSLParameters params = sock.getSSLParameters();\n+                    switch (testMode) {\n+                        case BASIC -> {}  \/\/ do nothing\n+                        case CLIENT_AUTH -> params.setNeedClientAuth(!first);\n+                        case VERSION_2_TO_3 -> params.setProtocols(new String[]{\n+                            first ? \"TLSv1.2\" : \"TLSv1.3\"});\n+                        case VERSION_3_TO_2 -> params.setProtocols(new String[]{\n+                            first ? \"TLSv1.3\" : \"TLSv1.2\"});\n+                        case CIPHER_SUITE -> params.setCipherSuites(\n+                            new String[]{\n+                                first ? \"TLS_AES_256_GCM_SHA384\" :\n+                                    \"TLS_AES_128_GCM_SHA256\"});\n+                        case SIGNATURE_SCHEME -> {\n+                            params.setNeedClientAuth(true);\n+                            params.setAlgorithmConstraints(new NoSig(\n+                                first ? \"ecdsa_secp521r1_sha512\" :\n+                                    \"ecdsa_secp384r1_sha384\"));\n+                        }\n+                        case LOCAL_CERTS -> {\n+                            if (!first) {\n+                                \/\/ Add first session's certificate signature\n+                                \/\/ algorithm to constraints so local certificates\n+                                \/\/ can't be restored from the session ticket.\n+                                params.setAlgorithmConstraints(\n+                                    new NoSig(X509CertImpl.toImpl(localCerts)\n+                                        .getSigAlgName()));\n+                            }\n+                        }\n+                        default ->\n+                            throw new AssertionError(\"Server: \" +\n+                                \"unknown mode: \" + testMode);\n+                    }\n+                    sock.setSSLParameters(params);\n+                    BufferedReader reader = new BufferedReader(\n+                        new InputStreamReader(sock.getInputStream()));\n+                    String line = reader.readLine();\n+                    System.err.println(\"server read: \" + line);\n+                    PrintWriter out = new PrintWriter(\n+                        new OutputStreamWriter(sock.getOutputStream()));\n+                    out.println(line);\n+                    out.flush();\n+                    out.close();\n+                    SSLSession session = sock.getSession();\n+                    if (testMode == TestMode.LOCAL_CERTS && first) {\n+                        localCerts = (X509CertImpl) session.\n+                            getLocalCertificates()[0];\n@@ -322,0 +294,4 @@\n+                    first = false;\n+                    System.err.println(\"server socket closed: \" + session);\n+                } catch (Exception e) {\n+                    throw new AssertionError(\"Server error\", e);\n@@ -323,2 +299,0 @@\n-            } catch (Exception ex) {\n-                throw new RuntimeException(ex);\n@@ -328,1 +302,1 @@\n-}\n+}\n\\ No newline at end of file\n","filename":"test\/jdk\/sun\/security\/ssl\/SSLSessionImpl\/ResumeChecksServer.java","additions":156,"deletions":182,"binary":false,"changes":338,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -41,1 +41,1 @@\n-    private static final int MAX_ATTEMPTS = 3;\n+    private static final int MAX_ATTEMPTS = 15;\n@@ -68,0 +68,1 @@\n+                    Thread.sleep(100*i);\n","filename":"test\/jdk\/sun\/security\/ssl\/SSLSocketImpl\/ReuseAddr.java","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -66,1 +66,9 @@\n-import javax.swing.*;\n+import javax.swing.JDialog;\n+import javax.swing.SwingUtilities;\n+import javax.swing.JTextArea;\n+import javax.swing.JButton;\n+import javax.swing.JPanel;\n+import javax.swing.JScrollPane;\n+import javax.swing.JFrame;\n+import java.awt.FlowLayout;\n+import java.awt.BorderLayout;\n@@ -71,0 +79,2 @@\n+import static javax.swing.BorderFactory.createEmptyBorder;\n+\n@@ -237,1 +247,1 @@\n-                            + \"must not be specified.\"},\n+                            + \"must not be specified.\"}\n@@ -242,0 +252,1 @@\n+    private volatile String failureReason = \"\";\n@@ -333,0 +344,1 @@\n+                System.out.println(\"REASON: \" + failureReason);\n@@ -351,0 +363,1 @@\n+        failureReason = requestFailDescription();\n@@ -358,0 +371,29 @@\n+\n+    \/**\n+     * Opens a prompt to enter a failure reason to be filled by the tester\n+     *\/\n+     public static String requestFailDescription() {\n+\n+        final JDialog dialogWindow = new JDialog(new JFrame(), \"Failure Description\", true);\n+        final JTextArea reasonTextArea = new JTextArea(5, 20);\n+\n+        final JButton okButton = new JButton(\"OK\");\n+        okButton.addActionListener(_ -> dialogWindow.setVisible(false));\n+\n+        final JPanel okayBtnPanel = new JPanel(\n+                new FlowLayout(FlowLayout.CENTER, 4, 0));\n+        okayBtnPanel.setBorder(createEmptyBorder(4, 0, 0, 0));\n+        okayBtnPanel.add(okButton);\n+\n+        final JPanel mainPanel = new JPanel(new BorderLayout());\n+        mainPanel.add(new JScrollPane(reasonTextArea), BorderLayout.CENTER);\n+        mainPanel.add(okayBtnPanel, BorderLayout.SOUTH);\n+\n+        dialogWindow.add(mainPanel);\n+        dialogWindow.pack();\n+        dialogWindow.setVisible(true);\n+\n+        dialogWindow.dispose();\n+\n+        return reasonTextArea.getText();\n+    }\n","filename":"test\/jdk\/sun\/security\/tools\/keytool\/i18n.java","additions":44,"deletions":2,"binary":false,"changes":46,"status":"modified"},{"patch":"@@ -0,0 +1,63 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8244336\n+ * @modules java.base\/sun.security.util\n+ * @summary Check that invalid property values for\n+ *         \"jdk.crypto.disabledAlgorithms\" are rejected\n+ * @run main\/othervm InvalidCryptoDisabledAlgos \"*\"\n+ * @run main\/othervm InvalidCryptoDisabledAlgos \".\"\n+ * @run main\/othervm InvalidCryptoDisabledAlgos \".AES\"\n+ * @run main\/othervm InvalidCryptoDisabledAlgos \"Cipher.\"\n+ * @run main\/othervm InvalidCryptoDisabledAlgos \"A.B\"\n+ * @run main\/othervm InvalidCryptoDisabledAlgos \"KeyStore.MY,.\"\n+ * @run main\/othervm InvalidCryptoDisabledAlgos \"KeyStore.MY,.AES\"\n+ * @run main\/othervm InvalidCryptoDisabledAlgos \"KeyStore.MY,Cipher.\"\n+ * @run main\/othervm InvalidCryptoDisabledAlgos \"KeyStore.MY,A.B\"\n+ *\/\n+import java.security.Security;\n+import sun.security.util.CryptoAlgorithmConstraints;\n+\n+public class InvalidCryptoDisabledAlgos {\n+\n+    public static void main(String[] args) throws Exception {\n+        System.out.println(\"Invalid Property Value = \" + args[0]);\n+        Security.setProperty(\"jdk.crypto.disabledAlgorithms\", args[0]);\n+        try {\n+            \/\/ Trigger the check to parse and validate property value\n+            CryptoAlgorithmConstraints.permits(\"x\", \"y\");\n+            throw new AssertionError(\n+                    \"CryptoAlgorithmConstraints.permits() did not generate expected exception\");\n+        } catch (Throwable t) {\n+            if (!(t instanceof ExceptionInInitializerError)\n+                    || !(t.getCause() instanceof IllegalArgumentException)) {\n+                \/\/ unexpected exception, propagate it\n+                throw t;\n+            }\n+            \/\/ got expected\n+            System.out.println(\"Received expected exception: \" + t);\n+        }\n+    }\n+}\n","filename":"test\/jdk\/sun\/security\/util\/AlgorithmConstraints\/InvalidCryptoDisabledAlgos.java","additions":63,"deletions":0,"binary":false,"changes":63,"status":"added"},{"patch":"@@ -32,4 +32,0 @@\n-import org.junit.jupiter.params.ParameterizedTest;\n-import org.junit.jupiter.params.provider.Arguments;\n-import org.junit.jupiter.params.provider.MethodSource;\n-\n@@ -38,1 +34,7 @@\n-import java.util.stream.Stream;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.List;\n+import java.util.concurrent.Callable;\n+import java.util.concurrent.ExecutorService;\n+import java.util.concurrent.Executors;\n+import java.util.concurrent.Future;\n@@ -42,0 +44,2 @@\n+import org.junit.jupiter.api.Assertions;\n+import org.junit.jupiter.api.Test;\n@@ -50,1 +54,1 @@\n-                    \".*\\\\Rkeystore\\\\[.*\\\\|main|\" + DATE_REGEX + \".*\\\\]:\";\n+            \".*\\\\Rkeystore\\\\[.*\\\\|main|\" + DATE_REGEX + \".*\\\\]:\";\n@@ -53,31 +57,43 @@\n-                    \".*\\\\]((.*\\\\R)*)keystore\\\\[.*\\\\|main.*\\\\|\"\n-                    + DATE_REGEX + \".*\\\\]:\";\n-\n-    private static Stream<Arguments> patternMatches() {\n-        return Stream.of(\n-                \/\/ test for thread and timestamp info\n-                Arguments.of(\"properties\",\n-                        EXPECTED_PROP_REGEX,\n-                        \"properties:\"),\n-                \/\/ test for thread and timestamp info\n-                Arguments.of(\"properties+thread\",\n-                        EXPECTED_PROP_REGEX,\n-                        \"properties:\"),\n-                \/\/ flip the arguments of previous test\n-                Arguments.of(\"properties+thread+timestamp\",\n-                        EXPECTED_PROP_REGEX,\n-                        \"properties:\"),\n-                \/\/ regular keystore,properties component string\n-                Arguments.of(\"keystore,properties\",\n-                        EXPECTED_PROP_KEYSTORE_REGEX,\n-                        \"properties:\"),\n-                \/\/ turn on all\n-                Arguments.of(\"all\",\n-                        EXPECTED_ALL_REGEX,\n-                        \"properties:\"),\n-                \/\/ expect thread and timestamp info\n-                Arguments.of(\"all+thread\",\n-                        EXPECTED_ALL_REGEX,\n-                        \"properties:\")\n-        );\n-    }\n+            \".*\\\\]((.*\\\\R)*)keystore\\\\[.*\\\\|main.*\\\\|\"\n+            + DATE_REGEX + \".*\\\\]:\";\n+\n+    private static final List<String[]> patternMatches = List.of(\n+            \/\/ test for thread and timestamp info\n+            new String[]{\"properties\",\n+                    EXPECTED_PROP_REGEX,\n+                    \"properties:\"},\n+            \/\/ test for thread and timestamp info\n+            new String[]{\"properties+thread\",\n+                    EXPECTED_PROP_REGEX,\n+                    \"properties:\"},\n+            \/\/ flip the arguments of previous test\n+            new String[]{\"properties+thread+timestamp\",\n+                    EXPECTED_PROP_REGEX,\n+                    \"properties:\"},\n+            \/\/ regular keystore,properties component string\n+            new String[]{\"keystore,properties\",\n+                    EXPECTED_PROP_KEYSTORE_REGEX,\n+                    \"properties:\"},\n+            \/\/ turn on all\n+            new String[]{\"all\",\n+                    EXPECTED_ALL_REGEX,\n+                    \"properties:\"},\n+            \/\/ expect thread and timestamp info\n+            new String[]{\"all+thread\",\n+                    EXPECTED_ALL_REGEX,\n+                    \"properties:\"}\n+    );\n+\n+    \/**\n+     * This will execute the test logic, but first change the param\n+     * to be mixed case\n+     *\n+     * @param paramName   name of the parameter e.g. -Djava.security.debug=\n+     * @param paramVal    value of the parameter\n+     * @param expected    expected output\n+     * @param notExpected not expected output\n+     *\/\n+    public void testMixedCaseParameter(String paramName,\n+                                       String paramVal,\n+                                       String expected,\n+                                       String notExpected) throws Exception {\n@@ -85,7 +101,8 @@\n-    @ParameterizedTest\n-    @MethodSource(\"patternMatches\")\n-    public void shouldContain(String params, String expected, String notExpected) throws Exception {\n-        OutputAnalyzer outputAnalyzer = ProcessTools.executeTestJava(\n-                \"-Djava.security.debug=\" + params,\n-                \"DebugOptions\"\n-        );\n+        final String formattedParam = makeFirstAndLastLetterUppercase(paramVal);\n+        System.out.printf(\"Executing: {%s%s DebugOptions}%n\",\n+                paramName,\n+                formattedParam);\n+\n+        final OutputAnalyzer outputAnalyzer = ProcessTools.executeTestJava(\n+                paramName + formattedParam,\n+                \"DebugOptions\");\n@@ -97,0 +114,65 @@\n+    \/**\n+     * This method will change the input string to have\n+     * first and last letters uppercase\n+     * <p>\n+     * e.g.:\n+     * hello -> HellO\n+     *\n+     * @param paramString string to change. Must not be null or empty\n+     * @return resulting string\n+     *\/\n+    private String makeFirstAndLastLetterUppercase(final String paramString) {\n+        Assertions.assertTrue(paramString != null && !paramString.isEmpty());\n+\n+        final int length = paramString.length();\n+        final String firstLetter = paramString.substring(0, 1);\n+        final String lastLetter = paramString.substring((length - 1),\n+                length);\n+\n+        return firstLetter.toUpperCase()\n+               + paramString.substring(1, length - 1)\n+               + lastLetter.toUpperCase();\n+    }\n+\n+    \/**\n+     * This test will run all options in parallel with all param names\n+     * in mixed case\n+     *\/\n+    @Test\n+    public void debugOptionsMixedCaseTest() throws Exception {\n+\n+        try (final ExecutorService executorService = Executors.newVirtualThreadPerTaskExecutor()) {\n+            final List<Callable<Void>> testsCallables = new ArrayList<>();\n+\n+            patternMatches.forEach(params -> {\n+                testsCallables.add(() -> {\n+                    testMixedCaseParameter(\n+                            \"-Djava.security.debug=\",\n+                            params[0],\n+                            params[1],\n+                            params[2]);\n+                    return null;\n+                });\n+                testsCallables.add(() -> {\n+                    testMixedCaseParameter(\n+                            \"-Djava.security.auth.debug=\",\n+                            params[0],\n+                            params[1],\n+                            params[2]);\n+                    return null;\n+                });\n+\n+                System.out.println(\"Option added to all mixed case tests \" + Arrays.toString(params));\n+            });\n+\n+            System.out.println(\"Starting all the threads\");\n+            final List<Future<Void>> res = executorService.invokeAll(testsCallables);\n+            for (final Future<Void> future : res) {\n+                future.get();\n+            }\n+        }\n+    }\n+\n+    \/**\n+     * This is used for the test logic itself\n+     *\/\n@@ -98,0 +180,1 @@\n+\n","filename":"test\/jdk\/sun\/security\/util\/Debug\/DebugOptions.java","additions":127,"deletions":44,"binary":false,"changes":171,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2021, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -69,0 +69,1 @@\n+    private static final String UNIX_EPOCH_TIME = \"1970-01-01T00:00:00Z\";\n@@ -70,0 +71,1 @@\n+    private static final Instant UNIX_EPOCH = Instant.parse(UNIX_EPOCH_TIME);\n@@ -234,1 +236,1 @@\n-            \/\/ and the now time is exactly the rollover time, then assume\n+            \/\/ and the now time is exactly the rollover time or UNIX epoch time, then assume\n@@ -236,4 +238,7 @@\n-            if (FileTime.fromMillis(original).toInstant().isAfter(UNIX_2038_ROLLOVER) &&\n-                    FileTime.fromMillis(now).toInstant().equals(UNIX_2038_ROLLOVER)) {\n-                System.out.println(\"Checking file time after Unix 2038 rollover,\" +\n-                        \" and extracted file time is \" + UNIX_2038_ROLLOVER_TIME + \", \" +\n+            Instant originalInstant = FileTime.fromMillis(original).toInstant();\n+            Instant nowInstant = FileTime.fromMillis(now).toInstant();\n+            if (originalInstant.isAfter(UNIX_2038_ROLLOVER) &&\n+                (nowInstant.equals(UNIX_2038_ROLLOVER) ||\n+                nowInstant.equals(UNIX_EPOCH))) {\n+                    System.out.println(\"Checking file time after Unix 2038 rollover,\" +\n+                        \" and extracted file time is \" + nowInstant + \", \" +\n","filename":"test\/jdk\/tools\/jar\/ReproducibleJar.java","additions":11,"deletions":6,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -86,1 +86,1 @@\n-                    <footer role=\"contentinfo\"> \"\"\",\n+                    <footer> \"\"\",\n@@ -116,1 +116,1 @@\n-                    <footer role=\"contentinfo\">\"\"\",\n+                    <footer>\"\"\",\n@@ -153,1 +153,1 @@\n-                    <footer role=\"contentinfo\">\"\"\",\n+                    <footer>\"\"\",\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testHtmlLandmarkRegions\/TestHtmlLandmarkRegions.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -88,1 +88,1 @@\n-                    <footer role=\"contentinfo\">\"\"\",\n+                    <footer>\"\"\",\n@@ -112,1 +112,1 @@\n-                    <footer role=\"contentinfo\">\"\"\",\n+                    <footer>\"\"\",\n@@ -153,1 +153,1 @@\n-                    <footer role=\"contentinfo\">\"\"\",\n+                    <footer>\"\"\",\n@@ -174,1 +174,1 @@\n-                    <footer role=\"contentinfo\">\"\"\",\n+                    <footer>\"\"\",\n@@ -202,1 +202,1 @@\n-                    <footer role=\"contentinfo\">\"\"\",\n+                    <footer>\"\"\",\n@@ -223,1 +223,1 @@\n-                    <footer role=\"contentinfo\">\"\"\",\n+                    <footer>\"\"\",\n@@ -246,1 +246,1 @@\n-                    <footer role=\"contentinfo\">\"\"\",\n+                    <footer>\"\"\",\n@@ -282,1 +282,1 @@\n-                    <footer role=\"contentinfo\">\"\"\",\n+                    <footer>\"\"\",\n@@ -302,1 +302,1 @@\n-                    <footer role=\"contentinfo\">\"\"\",\n+                    <footer>\"\"\",\n@@ -340,1 +340,1 @@\n-                    <footer role=\"contentinfo\">\"\"\",\n+                    <footer>\"\"\",\n@@ -390,1 +390,1 @@\n-                    <footer role=\"contentinfo\">\"\"\",\n+                    <footer>\"\"\",\n@@ -431,1 +431,1 @@\n-                    <footer role=\"contentinfo\">\"\"\",\n+                    <footer>\"\"\",\n@@ -463,1 +463,1 @@\n-                    <footer role=\"contentinfo\">\"\"\",\n+                    <footer>\"\"\",\n@@ -490,1 +490,1 @@\n-                    <footer role=\"contentinfo\">\"\"\",\n+                    <footer>\"\"\",\n@@ -517,1 +517,1 @@\n-                    <footer role=\"contentinfo\">\"\"\",\n+                    <footer>\"\"\",\n@@ -555,1 +555,1 @@\n-                    <footer role=\"contentinfo\">\"\"\",\n+                    <footer>\"\"\",\n@@ -584,1 +584,1 @@\n-                    <footer role=\"contentinfo\">\"\"\",\n+                    <footer>\"\"\",\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testHtmlVersion\/TestHtmlVersion.java","additions":17,"deletions":17,"binary":false,"changes":34,"status":"modified"},{"patch":"@@ -0,0 +1,132 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/**\n+ * @test\n+ * @bug 8358801\n+ * @summary Verify variables introduced by let expressions are correctly undefined\n+ * @library \/tools\/lib\n+ *\/\n+\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.Arrays;\n+\n+import javax.tools.JavaFileObject;\n+import javax.tools.ToolProvider;\n+\n+import com.sun.source.util.JavacTask;\n+import java.lang.classfile.ClassFile;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Objects;\n+import javax.tools.JavaCompiler;\n+\n+import toolbox.JavaTask;\n+import toolbox.Task;\n+import toolbox.TestRunner;\n+import toolbox.ToolBox;\n+\n+public class T8358801 extends TestRunner {\n+    private ToolBox tb;\n+\n+    public static void main(String... args) throws Exception {\n+        new T8358801().runTests();\n+    }\n+\n+    T8358801() {\n+        super(System.err);\n+        tb = new ToolBox();\n+    }\n+\n+    public void runTests() throws Exception {\n+        runTests(m -> new Object[] { Paths.get(m.getName()) });\n+    }\n+\n+    @Test\n+    public void testPatternsInJava(Path base) throws Exception {\n+        Path classes = base.resolve(\"classes\");\n+\n+        List<JavaFileObject> files = new ArrayList<>();\n+        files.add(new ToolBox.JavaSource(\n+            \"\"\"\n+            public class Main {\n+                private boolean test(String s, int i) {\n+                    if (s.subSequence(0, 1) instanceof Runnable r) {\n+                        return true;\n+                    }\n+\n+                    switch (i) {\n+                        case 0:\n+                            String clashing1 = null;\n+                            String clashing2 = null;\n+                            String clashing3 = null;\n+                            String clashing4 = null;\n+                            return true;\n+                        default:\n+                            System.out.println(\"correct\");\n+                            return true;\n+                    }\n+                }\n+\n+                public static void main(String[] args) {\n+                    new Main().test(\"hello\", 1);\n+                }\n+            }\n+            \"\"\"\n+        ));\n+\n+        if (Files.exists(classes)) {\n+            tb.cleanDirectory(classes);\n+        } else {\n+            Files.createDirectories(classes);\n+        }\n+\n+        JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();\n+        Iterable<String> options = Arrays.asList(\"-d\", classes.toString());\n+        JavacTask task = (JavacTask) compiler.getTask(null, null, null, options, null, files);\n+\n+        task.generate();\n+\n+        List<VerifyError> errors = ClassFile.of().verify(classes.resolve(\"Main.class\"));\n+\n+        if (!errors.isEmpty()) {\n+            throw new AssertionError(\"verify errors found: \" + errors);\n+        }\n+\n+        List<String> log =\n+            new JavaTask(tb).classpath(classes.toString())\n+                            .className(\"Main\")\n+                            .run()\n+                            .writeAll()\n+                            .getOutputLines(Task.OutputKind.STDOUT);\n+        List<String> expected = List.of(\"correct\");\n+\n+        if (!Objects.equals(log, expected)) {\n+            throw new AssertionError(\"Incorrect result, expected: \" + expected +\n+                                     \", got: \" + log);\n+        }\n+    }\n+\n+}\n","filename":"test\/langtools\/tools\/javac\/patterns\/T8358801.java","additions":132,"deletions":0,"binary":false,"changes":132,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,1 +24,6 @@\n-import java.lang.instrument.Instrumentation;\n+import java.io.InputStream;\n+import java.lang.classfile.ClassElement;\n+import java.lang.classfile.ClassFile;\n+import java.lang.classfile.ClassModel;\n+import java.lang.constant.ClassDesc;\n+\n@@ -26,0 +31,1 @@\n+import java.lang.instrument.Instrumentation;\n@@ -36,0 +42,1 @@\n+\n@@ -64,0 +71,35 @@\n+    private static byte[] getBytecodes(ClassLoader loader, String name) throws Exception {\n+        try (InputStream is = loader.getResourceAsStream(name + \".class\")) {\n+            byte[] buf = is.readAllBytes();\n+            System.out.println(\"sizeof(\" + name + \".class) == \" + buf.length);\n+            return buf;\n+        }\n+    }\n+\n+    \/*\n+     * Copy the class defined by `bytes`, replacing the name of the class with `newClassName`,\n+     * so that both old and new classes can be compiled by jtreg for the test.\n+     *\n+     * @param bytes read from the original class file.\n+     * @param newClassName new class name for the returned class representation\n+     * @return a copy of the class represented by `bytes` but with the name `newClassName`\n+     *\/\n+    public static byte[] replaceClassName(byte[] bytes, String newClassName) throws Exception {\n+        ClassModel classModel = ClassFile.of().parse(bytes);\n+        return ClassFile.of().build(ClassDesc.of(newClassName), classModel::forEach);\n+    }\n+\n+    \/*\n+     * Replace class name in bytecodes to the class we're trying to redefine, so that both\n+     * old and new classes can be compiled with jtreg for the test.\n+     *\n+     * @param loader ClassLoader to find the bytes for the old class.\n+     * @param oldClassName old class name.\n+     * @param newClassName new class name to replace with old class name.\n+     * @return a copy of the class represented by `bytes` but with the name `newClassName`\n+     *\/\n+    public static byte[] replaceClassName(ClassLoader loader, String oldClassName, String newClassName) throws Exception {\n+        byte[] buf = getBytecodes(loader, oldClassName);\n+        return replaceClassName(buf, newClassName);\n+    }\n+\n","filename":"test\/lib\/RedefineClassHelper.java","additions":44,"deletions":2,"binary":false,"changes":46,"status":"modified"},{"patch":"@@ -34,0 +34,1 @@\n+    public ArrayList<String> engineOpts = new ArrayList<>();\n@@ -73,0 +74,5 @@\n+    public final DockerRunOptions addEngineOpts(String... opts) {\n+        Collections.addAll(engineOpts, opts);\n+        return this;\n+    }\n+\n","filename":"test\/lib\/jdk\/test\/lib\/containers\/docker\/DockerRunOptions.java","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -86,0 +86,8 @@\n+    \/**\n+     * Checks if the actual engine command is podman.\n+     *\n+     * @return {@code true} if engine is podman. {@code false} otherwise.\n+     *\/\n+    public static boolean isPodman() {\n+        return Container.ENGINE_COMMAND.contains(\"podman\");\n+    }\n@@ -124,0 +132,20 @@\n+    private static String getEngineInfo(String format) throws Exception {\n+        return execute(Container.ENGINE_COMMAND, \"info\", \"-f\", format).getStdout();\n+    }\n+\n+    \/**\n+     * Determine if the engine is running in root-less mode.\n+     *\n+     * @return {@code true} when running root-less (podman or docker). {@code false}\n+     *         otherwise.\n+     *\n+     * @throws Exception\n+     *\/\n+    public static boolean isRootless() throws Exception {\n+        \/\/ Docker and Podman have different INFO structures.\n+        \/\/ The node path for Podman is .Host.Security.Rootless, that also holds for\n+        \/\/ Podman emulating Docker CLI. The node path for Docker is .SecurityOptions.\n+        return (getEngineInfo(\"{{.Host.Security.Rootless}}\").contains(\"true\") ||\n+                getEngineInfo(\"{{.SecurityOptions}}\").contains(\"name=rootless\"));\n+    }\n+\n@@ -205,0 +233,3 @@\n+        if (!opts.engineOpts.isEmpty()) {\n+            cmd.addAll(opts.engineOpts);\n+        }\n","filename":"test\/lib\/jdk\/test\/lib\/containers\/docker\/DockerTestUtils.java","additions":31,"deletions":0,"binary":false,"changes":31,"status":"modified"},{"patch":"@@ -35,1 +35,1 @@\n-    private static final String OPENSSL_BUNDLE_VERSION = \"3.0.14\";\n+    private static final String OPENSSL_BUNDLE_VERSION = \"3.5.1\";\n","filename":"test\/lib\/jdk\/test\/lib\/security\/OpensslArtifactFetcher.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -80,0 +80,3 @@\n+  public native long getMinimumJavaStackSize();\n+\n+  public native boolean  hasExternalSymbolsStripped();\n","filename":"test\/lib\/jdk\/test\/whitebox\/WhiteBox.java","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"}]}