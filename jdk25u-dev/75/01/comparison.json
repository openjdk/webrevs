{"files":[{"patch":"@@ -1729,0 +1729,17 @@\n+bool JvmtiExport::has_frame_pops(JavaThread* thread) {\n+  if (!can_post_frame_pop()) {\n+    return false;\n+  }\n+  JvmtiThreadState *state = get_jvmti_thread_state(thread);\n+  if (state == nullptr) {\n+    return false;\n+  }\n+  JvmtiEnvThreadStateIterator it(state);\n+  for (JvmtiEnvThreadState* ets = it.first(); ets != nullptr; ets = it.next(ets)) {\n+    if (ets->has_frame_pops()) {\n+      return true;\n+    }\n+  }\n+  return false;\n+}\n+\n","filename":"src\/hotspot\/share\/prims\/jvmtiExport.cpp","additions":17,"deletions":0,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -376,0 +376,1 @@\n+  static bool has_frame_pops(JavaThread* thread) NOT_JVMTI_RETURN_(false);\n","filename":"src\/hotspot\/share\/prims\/jvmtiExport.hpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -1626,4 +1626,3 @@\n-  if (thread->is_interp_only_mode()) {\n-    JvmtiThreadState *state = thread->jvmti_thread_state();\n-    if (state != nullptr)\n-      state->invalidate_cur_stack_depth();\n+  JvmtiThreadState *state = thread->jvmti_thread_state();\n+  if (state != nullptr) {\n+    state->invalidate_cur_stack_depth();\n@@ -1634,1 +1633,1 @@\n-  if (JvmtiExport::can_post_frame_pop()) {\n+  if (JvmtiExport::has_frame_pops(thread)) {\n","filename":"src\/hotspot\/share\/runtime\/continuationFreezeThaw.cpp","additions":4,"deletions":5,"binary":false,"changes":9,"status":"modified"}]}