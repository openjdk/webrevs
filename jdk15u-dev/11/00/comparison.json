{"files":[{"patch":"@@ -30,1 +30,1 @@\n-#import \"jni_util.h\"\n+#import \"JNIUtilities.h\"\n@@ -671,1 +671,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -675,1 +675,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -691,1 +691,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -719,1 +719,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -733,1 +733,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -760,1 +760,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -774,1 +774,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -778,1 +778,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/AWTEvent.m","additions":9,"deletions":9,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -29,0 +29,1 @@\n+#import \"JNIUtilities.h\"\n@@ -104,1 +105,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -112,1 +113,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -125,1 +126,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -135,1 +136,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/AWTSurfaceLayers.m","additions":5,"deletions":4,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -1408,1 +1408,1 @@\n-    JNF_COCOA_ENTER(env);\n+    JNI_COCOA_ENTER(env);\n@@ -1421,1 +1421,1 @@\n-    JNF_COCOA_EXIT(env);\n+    JNI_COCOA_EXIT(env);\n@@ -1436,1 +1436,1 @@\n-    JNF_COCOA_ENTER(env);\n+    JNI_COCOA_ENTER(env);\n@@ -1453,1 +1453,1 @@\n-    JNF_COCOA_EXIT(env);\n+    JNI_COCOA_EXIT(env);\n@@ -1468,1 +1468,1 @@\n-    JNF_COCOA_ENTER(env);\n+    JNI_COCOA_ENTER(env);\n@@ -1476,1 +1476,1 @@\n-    JNF_COCOA_EXIT(env);\n+    JNI_COCOA_EXIT(env);\n@@ -1493,1 +1493,1 @@\n-    JNF_COCOA_ENTER(env);\n+    JNI_COCOA_ENTER(env);\n@@ -1509,1 +1509,1 @@\n-    JNF_COCOA_EXIT(env);\n+    JNI_COCOA_EXIT(env);\n@@ -1525,1 +1525,1 @@\n-    JNF_COCOA_ENTER(env);\n+    JNI_COCOA_ENTER(env);\n@@ -1534,1 +1534,1 @@\n-    JNF_COCOA_EXIT(env);\n+    JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/AWTView.m","additions":10,"deletions":10,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -1104,1 +1104,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -1122,1 +1122,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -1135,1 +1135,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -1183,1 +1183,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -1194,1 +1194,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -1218,1 +1218,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -1231,1 +1231,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -1252,1 +1252,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -1264,1 +1264,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -1298,1 +1298,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -1310,1 +1310,1 @@\n-    JNF_COCOA_ENTER(env);\n+    JNI_COCOA_ENTER(env);\n@@ -1322,1 +1322,1 @@\n-    JNF_COCOA_EXIT(env);\n+    JNI_COCOA_EXIT(env);\n@@ -1333,1 +1333,1 @@\n-    JNF_COCOA_ENTER(env);\n+    JNI_COCOA_ENTER(env);\n@@ -1347,1 +1347,1 @@\n-    JNF_COCOA_EXIT(env);\n+    JNI_COCOA_EXIT(env);\n@@ -1358,1 +1358,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -1381,1 +1381,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -1392,1 +1392,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -1409,1 +1409,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -1420,1 +1420,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -1432,1 +1432,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -1443,1 +1443,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -1450,1 +1450,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -1461,1 +1461,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -1468,1 +1468,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -1481,1 +1481,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -1488,1 +1488,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -1501,1 +1501,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -1509,1 +1509,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -1520,1 +1520,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -1528,1 +1528,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -1542,1 +1542,1 @@\n-    JNF_COCOA_ENTER(env);\n+    JNI_COCOA_ENTER(env);\n@@ -1551,1 +1551,1 @@\n-    JNF_COCOA_EXIT(env);\n+    JNI_COCOA_EXIT(env);\n@@ -1564,1 +1564,1 @@\n-    JNF_COCOA_ENTER(env);\n+    JNI_COCOA_ENTER(env);\n@@ -1570,1 +1570,1 @@\n-    JNF_COCOA_EXIT(env);\n+    JNI_COCOA_EXIT(env);\n@@ -1581,1 +1581,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -1590,1 +1590,1 @@\n-        [JNFException raise:env as:kIllegalArgumentException reason:\"unknown event type\"];\n+        JNU_ThrowIllegalArgumentException(env, \"unknown event type\");\n@@ -1593,1 +1593,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -1604,1 +1604,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -1614,1 +1614,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -1620,1 +1620,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -1629,1 +1629,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -1635,1 +1635,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -1654,1 +1654,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -1660,1 +1660,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -1680,3 +1680,1 @@\n-            [JNFException raise:[ThreadUtilities getJNIEnv]\n-                             as:kRuntimeException\n-                         reason:\"Failed to enter full screen.\"];\n+            [NSException raise:@\"Java Exception\" reason:@\"Failed to enter full screen.\" userInfo:nil];\n@@ -1686,1 +1684,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -1692,1 +1690,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -1707,3 +1705,1 @@\n-            [JNFException raise:[ThreadUtilities getJNIEnv]\n-                             as:kRuntimeException\n-                         reason:\"Failed to exit full screen.\"];\n+            [NSException raise:@\"Java Exception\" reason:@\"Failed to exit full screen.\" userInfo:nil];\n@@ -1713,1 +1709,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/AWTWindow.m","additions":49,"deletions":53,"binary":false,"changes":102,"status":"modified"},{"patch":"@@ -573,1 +573,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -578,1 +578,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -589,1 +589,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -595,1 +595,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -606,1 +606,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -612,1 +612,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -623,1 +623,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -628,1 +628,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -639,1 +639,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -646,1 +646,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -657,1 +657,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -665,1 +665,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -676,1 +676,1 @@\n-    JNF_COCOA_ENTER(env);\n+    JNI_COCOA_ENTER(env);\n@@ -683,1 +683,1 @@\n-    JNF_COCOA_EXIT(env);\n+    JNI_COCOA_EXIT(env);\n@@ -696,1 +696,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -702,1 +702,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -715,1 +715,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -724,1 +724,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -735,1 +735,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -743,1 +743,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -754,1 +754,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -760,1 +760,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -771,1 +771,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -778,1 +778,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -789,1 +789,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -793,1 +793,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -804,1 +804,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -808,1 +808,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -819,1 +819,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -833,1 +833,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -844,1 +844,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -851,1 +851,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -862,1 +862,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -871,1 +871,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/ApplicationDelegate.m","additions":34,"deletions":34,"binary":false,"changes":68,"status":"modified"},{"patch":"@@ -134,1 +134,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -149,1 +149,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -164,1 +164,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -174,1 +174,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -186,1 +186,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -231,1 +231,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -247,1 +247,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -256,1 +256,1 @@\n-        [JNFException raise:env as:\"java\/io\/IOException\" reason:\"Font transform has NaN position\"];\n+        JNU_ThrowIOException(env, \"Font transform has NaN position\");\n@@ -273,1 +273,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -286,1 +286,1 @@\n-    JNF_COCOA_ENTER(env);\n+    JNI_COCOA_ENTER(env);\n@@ -291,1 +291,1 @@\n-    JNF_COCOA_EXIT(env);\n+    JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/CClipboard.m","additions":11,"deletions":11,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -76,1 +76,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -82,1 +82,2 @@\n-        [JNFException raise:env as:kIllegalArgumentException reason:[reason UTF8String]];\n+        JNU_ThrowIllegalArgumentException(env, [reason UTF8String]);\n+        return;\n@@ -86,1 +87,2 @@\n-        [JNFException raise:env as:kNoSuchMethodException reason:\"missing NSCursor selector\"];\n+        JNU_ThrowByName(env, \"java\/lang\/NoSuchMethodException\", \"missing NSCursor selector\");\n+        return;\n@@ -93,1 +95,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -100,1 +102,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -110,1 +112,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -119,1 +121,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -127,1 +129,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -137,1 +139,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -153,1 +155,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/CCursorManager.m","additions":12,"deletions":10,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -29,1 +29,1 @@\n-#import \"jni_util.h\"\n+#import \"JNIUtilities.h\"\n@@ -112,1 +112,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -114,1 +114,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -127,1 +127,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -129,1 +129,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -203,1 +203,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -253,1 +253,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/CDataTransferer.m","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+#import \"JNIUtilities.h\"\n@@ -40,1 +41,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -52,1 +53,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -65,1 +66,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -84,1 +85,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/CDesktopPeer.m","additions":5,"deletions":4,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -648,1 +648,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -698,1 +698,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/CDragSource.m","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -28,0 +28,1 @@\n+#import \"JNIUtilities.h\"\n@@ -49,1 +50,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -77,1 +78,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -94,1 +95,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -96,1 +97,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -109,1 +110,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -111,1 +112,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/CDragSourceContextPeer.m","additions":7,"deletions":6,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -734,1 +734,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -737,1 +737,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -752,1 +752,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -754,1 +754,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/CDropTarget.m","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -79,1 +79,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -116,1 +116,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -147,1 +147,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -156,1 +156,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/CDropTargetContextPeer.m","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -26,0 +26,2 @@\n+#import \"JNIUtilities.h\"\n+\n@@ -56,1 +58,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -60,1 +62,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/CFRetainedResource.m","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -201,1 +201,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -238,1 +238,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/CFileDialog.m","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -154,1 +154,1 @@\n-    JNF_COCOA_ENTER(env);\n+    JNI_COCOA_ENTER(env);\n@@ -167,1 +167,1 @@\n-    JNF_COCOA_EXIT(env);\n+    JNI_COCOA_EXIT(env);\n@@ -237,1 +237,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -261,1 +261,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -275,1 +275,1 @@\n-    JNF_COCOA_ENTER(env);\n+    JNI_COCOA_ENTER(env);\n@@ -292,1 +292,1 @@\n-        [JNFException raise:env as:kIllegalArgumentException reason:\"Invalid display mode\"];\n+        JNU_ThrowIllegalArgumentException(env, \"Invalid display mode\");\n@@ -296,1 +296,1 @@\n-        [JNFException raise:env as:kIllegalArgumentException reason:\"Unable to set display mode!\"];\n+        JNU_ThrowIllegalArgumentException(env, \"Unable to set display mode!\");\n@@ -299,1 +299,1 @@\n-    JNF_COCOA_EXIT(env);\n+    JNI_COCOA_EXIT(env);\n@@ -328,1 +328,1 @@\n-    JNF_COCOA_ENTER(env);\n+    JNI_COCOA_ENTER(env);\n@@ -357,1 +357,1 @@\n-    JNF_COCOA_EXIT(env);\n+    JNI_COCOA_EXIT(env);\n@@ -373,1 +373,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -389,1 +389,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/CGraphicsDevice.m","additions":12,"deletions":12,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -46,1 +46,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -51,3 +51,1 @@\n-        [JNFException raise:env\n-                         as:kInternalError\n-                     reason:\"CGGetOnlineDisplayList() failed to get display count\"];\n+        JNU_ThrowInternalError(env, \"CGGetOnlineDisplayList() failed to get display count\");\n@@ -60,3 +58,1 @@\n-        [JNFException raise:env\n-                         as:kInternalError\n-                     reason:\"CGGetOnlineDisplayList() failed to get display list\"];\n+        JNU_ThrowInternalError(env, \"CGGetOnlineDisplayList() failed to get display list\");\n@@ -94,1 +90,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -148,1 +144,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -154,3 +150,1 @@\n-        [JNFException raise:env\n-                         as:kInternalError\n-                     reason:\"CGDisplayRegisterReconfigurationCallback() failed\"];\n+        JNU_ThrowInternalError(env, \"CGDisplayRegisterReconfigurationCallback() failed\");\n@@ -162,1 +156,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -176,1 +170,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -183,3 +177,1 @@\n-        [JNFException raise:env\n-                         as:kInternalError\n-                     reason:\"CGDisplayRemoveReconfigurationCallback() failed, leaking the callback context!\"];\n+        JNU_ThrowInternalError(env, \"CGDisplayRemoveReconfigurationCallback() failed, leaking the callback context!\");\n@@ -192,1 +184,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/CGraphicsEnv.m","additions":10,"deletions":18,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -114,1 +114,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -123,1 +123,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -138,1 +138,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -167,1 +167,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -182,1 +182,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -190,1 +190,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -205,1 +205,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -210,1 +210,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -225,1 +225,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -233,1 +233,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -248,1 +248,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -252,1 +252,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -266,1 +266,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -277,1 +277,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -290,1 +290,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -294,1 +294,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -310,1 +310,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -315,1 +315,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -329,1 +329,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -338,1 +338,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -358,1 +358,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -420,1 +420,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -435,1 +435,1 @@\n-    JNF_COCOA_ENTER(env);\n+    JNI_COCOA_ENTER(env);\n@@ -449,1 +449,1 @@\n-    JNF_COCOA_EXIT(env);\n+    JNI_COCOA_EXIT(env);\n@@ -465,1 +465,1 @@\n-    JNF_COCOA_ENTER(env);\n+    JNI_COCOA_ENTER(env);\n@@ -479,1 +479,1 @@\n-    JNF_COCOA_EXIT(env);\n+    JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/CImage.m","additions":26,"deletions":26,"binary":false,"changes":52,"status":"modified"},{"patch":"@@ -155,1 +155,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -166,1 +166,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -178,1 +178,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -185,1 +185,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -197,1 +197,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -204,1 +204,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -218,1 +218,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -248,1 +248,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -261,1 +261,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -270,1 +270,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -302,1 +302,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -330,1 +330,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/CInputMethod.m","additions":12,"deletions":12,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -33,0 +33,1 @@\n+#import \"JNIUtilities.h\"\n@@ -158,1 +159,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -167,1 +168,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -186,1 +187,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -202,1 +203,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -216,1 +217,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -219,1 +220,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -231,1 +232,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -234,1 +235,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -248,1 +249,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -251,1 +252,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/CMenu.m","additions":11,"deletions":10,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -26,0 +26,2 @@\n+#import \"JNIUtilities.h\"\n+\n@@ -410,1 +412,1 @@\n-    JNF_COCOA_ENTER(env);\n+    JNI_COCOA_ENTER(env);\n@@ -423,1 +425,1 @@\n-    JNF_COCOA_EXIT(env);\n+    JNI_COCOA_EXIT(env);\n@@ -437,1 +439,1 @@\n-    JNF_COCOA_ENTER(env);\n+    JNI_COCOA_ENTER(env);\n@@ -440,1 +442,1 @@\n-    JNF_COCOA_EXIT(env);\n+    JNI_COCOA_EXIT(env);\n@@ -452,1 +454,1 @@\n-    JNF_COCOA_ENTER(env);\n+    JNI_COCOA_ENTER(env);\n@@ -455,1 +457,1 @@\n-    JNF_COCOA_EXIT(env);\n+    JNI_COCOA_EXIT(env);\n@@ -467,1 +469,1 @@\n-    JNF_COCOA_ENTER(env);\n+    JNI_COCOA_ENTER(env);\n@@ -470,1 +472,1 @@\n-    JNF_COCOA_EXIT(env);\n+    JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/CMenuBar.m","additions":10,"deletions":8,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -73,1 +73,1 @@\n-    JNF_COCOA_ENTER(env);\n+    JNI_COCOA_ENTER(env);\n@@ -114,1 +114,1 @@\n-    JNF_COCOA_EXIT(env);\n+    JNI_COCOA_EXIT(env);\n@@ -315,1 +315,1 @@\n-    JNF_COCOA_ENTER(env);\n+    JNI_COCOA_ENTER(env);\n@@ -332,1 +332,1 @@\n-    JNF_COCOA_EXIT(env);\n+    JNI_COCOA_EXIT(env);\n@@ -344,1 +344,1 @@\n-    JNF_COCOA_ENTER(env);\n+    JNI_COCOA_ENTER(env);\n@@ -347,1 +347,1 @@\n-    JNF_COCOA_EXIT(env);\n+    JNI_COCOA_EXIT(env);\n@@ -359,1 +359,1 @@\n-    JNF_COCOA_ENTER(env);\n+    JNI_COCOA_ENTER(env);\n@@ -361,1 +361,1 @@\n-    JNF_COCOA_EXIT(env);\n+    JNI_COCOA_EXIT(env);\n@@ -377,1 +377,1 @@\n-    JNF_COCOA_ENTER(env);\n+    JNI_COCOA_ENTER(env);\n@@ -396,1 +396,1 @@\n-    JNF_COCOA_EXIT(env);\n+    JNI_COCOA_EXIT(env);\n@@ -409,1 +409,1 @@\n-    JNF_COCOA_ENTER(env);\n+    JNI_COCOA_ENTER(env);\n@@ -412,1 +412,1 @@\n-    JNF_COCOA_EXIT(env);\n+    JNI_COCOA_EXIT(env);\n@@ -424,1 +424,1 @@\n-    JNF_COCOA_ENTER(env);\n+    JNI_COCOA_ENTER(env);\n@@ -427,1 +427,1 @@\n-    JNF_COCOA_EXIT(env);\n+    JNI_COCOA_EXIT(env);\n@@ -439,1 +439,1 @@\n-    JNF_COCOA_ENTER(env);\n+    JNI_COCOA_ENTER(env);\n@@ -442,1 +442,1 @@\n-    JNF_COCOA_EXIT(env);\n+    JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/CMenuItem.m","additions":16,"deletions":16,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -63,1 +63,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -71,1 +71,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -79,1 +79,1 @@\n-    JNF_COCOA_ENTER(env);\n+    JNI_COCOA_ENTER(env);\n@@ -91,1 +91,1 @@\n-    JNF_COCOA_EXIT(env);\n+    JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/CPopupMenu.m","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -492,1 +492,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -497,1 +497,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -508,1 +508,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -514,1 +514,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -525,1 +525,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -534,1 +534,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -546,1 +546,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -554,1 +554,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -566,1 +566,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -572,1 +572,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -594,1 +594,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -650,1 +650,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -667,1 +667,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -701,1 +701,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -717,1 +717,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -748,1 +748,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/CPrinterJob.m","additions":16,"deletions":16,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n-#import \"jni_util.h\"\n+#import \"JNIUtilities.h\"\n@@ -171,1 +171,1 @@\n-    JNF_COCOA_ENTER(env);\n+    JNI_COCOA_ENTER(env);\n@@ -257,1 +257,1 @@\n-    JNF_COCOA_EXIT(env);\n+    JNI_COCOA_EXIT(env);\n@@ -319,1 +319,1 @@\n-    JNF_COCOA_ENTER(env);\n+    JNI_COCOA_ENTER(env);\n@@ -365,1 +365,1 @@\n-    JNF_COCOA_EXIT(env);\n+    JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/CRobot.m","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -44,1 +44,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -47,1 +47,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/CSystemColors.m","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -592,1 +592,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -616,1 +616,1 @@\n-JNF_COCOA_RENDERER_EXIT(env);\n+JNI_COCOA_RENDERER_EXIT(env);\n@@ -631,1 +631,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -645,1 +645,2 @@\n-            [JNFException raise:env as:kOutOfMemoryError reason:\"Failed to malloc memory to create the glyphs for string drawing\"];\n+            JNU_ThrowOutOfMemoryError(env, \"Failed to malloc memory to create the glyphs for string drawing\");\n+            return;\n@@ -657,1 +658,1 @@\n-JNF_COCOA_RENDERER_EXIT(env);\n+JNI_COCOA_RENDERER_EXIT(env);\n@@ -671,1 +672,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -675,1 +676,1 @@\n-JNF_COCOA_RENDERER_EXIT(env);\n+JNI_COCOA_RENDERER_EXIT(env);\n@@ -689,1 +690,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -707,1 +708,1 @@\n-JNF_COCOA_RENDERER_EXIT(env);\n+JNI_COCOA_RENDERER_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/CTextPipe.m","additions":10,"deletions":9,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -336,1 +336,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -343,1 +343,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -366,1 +366,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -374,1 +374,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -384,1 +384,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -391,1 +391,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -399,1 +399,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -410,1 +410,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -419,1 +419,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -437,1 +437,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/CTrayIcon.m","additions":10,"deletions":10,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -26,0 +26,2 @@\n+#import \"JNIUtilities.h\"\n+\n@@ -39,1 +41,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -47,1 +49,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -59,1 +61,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -67,1 +69,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -79,1 +81,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -87,1 +89,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -101,1 +103,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -108,1 +110,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -124,1 +126,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -131,1 +133,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -145,1 +147,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -153,1 +155,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -165,1 +167,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -173,1 +175,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -185,1 +187,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -190,1 +192,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -202,1 +204,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -210,1 +212,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -222,1 +224,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -230,1 +232,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -255,1 +257,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -265,1 +267,1 @@\n-        [JNFException raise:env as:kIllegalArgumentException reason:\"unknown level\"];\n+        JNU_ThrowIllegalArgumentException(env, \"unknown level\");\n@@ -268,1 +270,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -280,1 +282,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -288,1 +290,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -300,1 +302,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -309,1 +311,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -321,1 +323,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -328,1 +330,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -340,1 +342,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -347,1 +349,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -359,1 +361,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -372,1 +374,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -384,1 +386,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -392,1 +394,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -404,1 +406,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -412,1 +414,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -426,1 +428,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -433,1 +435,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -447,1 +449,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -455,1 +457,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -467,1 +469,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -476,1 +478,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -488,1 +490,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -496,1 +498,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -508,1 +510,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -516,1 +518,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -528,1 +530,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -535,1 +537,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -549,1 +551,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -556,1 +558,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -570,1 +572,1 @@\n-    JNF_COCOA_ENTER(env);\n+    JNI_COCOA_ENTER(env);\n@@ -577,1 +579,1 @@\n-    JNF_COCOA_EXIT(env);\n+    JNI_COCOA_EXIT(env);\n@@ -590,1 +592,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -598,1 +600,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/CWrapper.m","additions":57,"deletions":55,"binary":false,"changes":112,"status":"modified"},{"patch":"@@ -1244,1 +1244,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -1323,1 +1323,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -1332,1 +1332,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -1364,1 +1364,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/ImageSurfaceData.m","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -1503,1 +1503,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -1505,1 +1505,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -1516,1 +1516,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -1518,1 +1518,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -1529,1 +1529,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -1534,1 +1534,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -1545,1 +1545,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -1547,1 +1547,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -1558,1 +1558,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -1560,1 +1560,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -1571,1 +1571,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -1576,1 +1576,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -1587,1 +1587,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -1592,1 +1592,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -1603,1 +1603,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -1608,1 +1608,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -1619,1 +1619,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -1621,1 +1621,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/JavaComponentAccessibility.m","additions":18,"deletions":18,"binary":false,"changes":36,"status":"modified"},{"patch":"@@ -477,1 +477,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -479,1 +479,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -544,1 +544,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -548,1 +548,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -563,1 +563,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -567,1 +567,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -581,1 +581,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -607,1 +607,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -618,1 +618,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -626,1 +626,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -637,1 +637,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -644,1 +644,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -675,1 +675,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -681,1 +681,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -694,1 +694,1 @@\n-    JNF_COCOA_ENTER(env);\n+    JNI_COCOA_ENTER(env);\n@@ -700,1 +700,1 @@\n-    JNF_COCOA_EXIT(env);\n+    JNI_COCOA_EXIT(env);\n@@ -751,1 +751,1 @@\n-    JNF_COCOA_ENTER(env)\n+    JNI_COCOA_ENTER(env);\n@@ -780,1 +780,1 @@\n-    JNF_COCOA_EXIT(env)\n+    JNI_COCOA_EXIT(env);\n@@ -791,1 +791,1 @@\n-    JNF_COCOA_ENTER(env)\n+    JNI_COCOA_ENTER(env);\n@@ -809,1 +809,1 @@\n-    JNF_COCOA_EXIT(env)\n+    JNI_COCOA_EXIT(env);\n@@ -871,1 +871,1 @@\n-    JNF_COCOA_ENTER(env);\n+    JNI_COCOA_ENTER(env);\n@@ -875,1 +875,1 @@\n-    JNF_COCOA_EXIT(env);\n+    JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/LWCToolkit.m","additions":22,"deletions":22,"binary":false,"changes":44,"status":"modified"},{"patch":"@@ -130,1 +130,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -141,1 +141,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/PrintModel.m","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -86,1 +86,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -119,1 +119,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/PrinterSurfaceData.m","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -639,1 +639,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -647,1 +647,1 @@\n-JNF_COCOA_RENDERER_EXIT(env);\n+JNI_COCOA_RENDERER_EXIT(env);\n@@ -660,1 +660,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -668,1 +668,1 @@\n-JNF_COCOA_RENDERER_EXIT(env);\n+JNI_COCOA_RENDERER_EXIT(env);\n@@ -681,1 +681,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -689,1 +689,1 @@\n-JNF_COCOA_RENDERER_EXIT(env);\n+JNI_COCOA_RENDERER_EXIT(env);\n@@ -702,1 +702,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -710,1 +710,1 @@\n-JNF_COCOA_RENDERER_EXIT(env);\n+JNI_COCOA_RENDERER_EXIT(env);\n@@ -723,1 +723,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -731,1 +731,1 @@\n-JNF_COCOA_RENDERER_EXIT(env);\n+JNI_COCOA_RENDERER_EXIT(env);\n@@ -744,1 +744,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -753,1 +753,1 @@\n-JNF_COCOA_RENDERER_EXIT(env);\n+JNI_COCOA_RENDERER_EXIT(env);\n@@ -766,1 +766,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -777,1 +777,1 @@\n-JNF_COCOA_RENDERER_EXIT(env);\n+JNI_COCOA_RENDERER_EXIT(env);\n@@ -793,1 +793,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -800,1 +800,1 @@\n-JNF_COCOA_RENDERER_EXIT(env);\n+JNI_COCOA_RENDERER_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/QuartzRenderer.m","additions":16,"deletions":16,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -30,0 +30,1 @@\n+#import \"JNIUtilities.h\"\n@@ -153,7 +154,2 @@\n-#define JNF_COCOA_RENDERER_EXIT(env) \\\n-} @catch(NSException *localException) { \\\n-    qsdo->FinishSurface(env, qsdo); \\\n-    [JNFException throwToJava:env exception:localException]; \\\n-} \\\n-        if (_token) JNFNativeMethodExit(_token); \\\n-}\n+#define JNI_COCOA_RENDERER_EXIT(env) \\\n+ JNI_COCOA_EXIT_WITH_ACTION(env, qsdo->FinishSurface(env, qsdo))\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/QuartzSurfaceData.h","additions":3,"deletions":7,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -52,0 +52,6 @@\n+#define JNI_COCOA_THROW_OOME(env, msg) \\\n+    if ([NSThread isMainThread] == NO) { \\\n+         JNU_ThrowOutOfMemoryError(env, msg); \\\n+    } \\\n+    [NSException raise:@\"Java Exception\" reason:@\"Java OutOfMemoryException\" userInfo:nil]\n+\n@@ -917,1 +923,1 @@\n-        [JNFException raise:env as:kOutOfMemoryError reason:\"Failed to malloc memory for gradient paint\"];\n+        JNI_COCOA_THROW_OOME(env, \"Failed to malloc memory for gradient paint\");\n@@ -1018,1 +1024,1 @@\n-                [JNFException raise:env as:kOutOfMemoryError reason:\"Failed to malloc memory for gradient paint\"];\n+                JNI_COCOA_THROW_OOME(env, \"Failed to malloc memory for gradient paint\");\n@@ -1064,1 +1070,1 @@\n-                [JNFException raise:env as:kOutOfMemoryError reason:\"Failed to malloc memory for texture paint\"];\n+                JNI_COCOA_THROW_OOME(env, \"Failed to malloc memory for texture paint\");\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/QuartzSurfaceData.m","additions":9,"deletions":3,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -305,1 +305,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -323,1 +323,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -335,1 +335,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -345,1 +345,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -375,1 +375,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -417,1 +417,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -434,1 +434,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -444,1 +444,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -459,1 +459,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -468,1 +468,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -482,1 +482,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -491,1 +491,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -504,1 +504,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -510,1 +510,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/font\/AWTFont.m","additions":14,"deletions":14,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -107,1 +107,1 @@\n-        [JNFException raise:env as:kRuntimeException reason:s];         \\\n+        JNU_ThrowByName(env, \"java\/lang\/RuntimeException\", s);          \\\n@@ -147,1 +147,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -162,1 +162,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -177,1 +177,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -206,1 +206,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -221,1 +221,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -293,1 +293,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -308,1 +308,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -336,1 +336,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -348,1 +348,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -363,1 +363,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -376,1 +376,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -382,1 +382,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -396,1 +396,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -439,1 +439,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -453,1 +453,1 @@\n-    JNF_COCOA_ENTER(env);\n+    JNI_COCOA_ENTER(env);\n@@ -457,1 +457,1 @@\n-    JNF_COCOA_EXIT(env);\n+    JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/font\/AWTStrike.m","additions":17,"deletions":17,"binary":false,"changes":34,"status":"modified"},{"patch":"@@ -26,0 +26,2 @@\n+#import \"JNIUtilities.h\"\n+\n@@ -44,1 +46,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -49,1 +51,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -93,1 +95,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -114,1 +116,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/font\/CCharToGlyphMapper.m","additions":6,"deletions":4,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -31,0 +31,1 @@\n+#import \"JNIUtilities.h\"\n@@ -123,1 +124,1 @@\n-    JNF_COCOA_ENTER(env);\n+    JNI_COCOA_ENTER(env);\n@@ -291,1 +292,1 @@\n-    JNF_COCOA_EXIT(env);\n+    JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/java2d\/opengl\/CGLGraphicsConfig.m","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -173,1 +173,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -183,1 +183,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -220,1 +220,1 @@\n-    JNF_COCOA_ENTER(env);\n+    JNI_COCOA_ENTER(env);\n@@ -229,1 +229,1 @@\n-    JNF_COCOA_EXIT(env);\n+    JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/java2d\/opengl\/CGLLayer.m","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -30,1 +30,1 @@\n-#import \"jni_util.h\"\n+#import \"JNIUtilities.h\"\n@@ -65,1 +65,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -67,1 +67,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -88,1 +88,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -102,1 +102,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -116,1 +116,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -129,1 +129,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -157,1 +157,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -184,1 +184,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -238,1 +238,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -255,1 +255,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -287,1 +287,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -293,1 +293,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -305,1 +305,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -307,1 +307,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/java2d\/opengl\/CGLSurfaceData.m","additions":15,"deletions":15,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -28,0 +28,2 @@\n+#import \"JNIUtilities.h\"\n+\n@@ -42,1 +44,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -48,1 +50,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -59,1 +61,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -63,1 +65,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -74,1 +76,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -78,1 +80,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -90,1 +92,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -95,1 +97,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -108,1 +110,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -113,1 +115,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -126,1 +128,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -138,1 +140,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -151,1 +153,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -160,1 +162,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -173,1 +175,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -185,1 +187,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -199,1 +201,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -204,1 +206,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -219,1 +221,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -230,1 +232,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -245,1 +247,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -252,1 +254,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libosx\/CFileManager.m","additions":24,"deletions":22,"binary":false,"changes":46,"status":"modified"},{"patch":"@@ -209,0 +209,31 @@\n+\/* Create a pool and initiate a try block to catch any exception *\/\n+#define JNI_COCOA_ENTER(env) \\\n+ NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init]; \\\n+ @try {\n+\n+\/* Don't allow NSExceptions to escape to Java.\n+ * If there is a Java exception that has been thrown that should escape.\n+ * And ensure we drain the auto-release pool.\n+ *\/\n+#define JNI_COCOA_EXIT(env) \\\n+ } \\\n+ @catch (NSException *e) { \\\n+     NSLog(@\"%@\", [e callStackSymbols]); \\\n+ } \\\n+ @finally { \\\n+    [pool drain]; \\\n+ };\n+\n+\/* Same as above but adds a clean up action.\n+ * Requires that whatever is being cleaned up is in scope.\n+ *\/\n+#define JNI_COCOA_EXIT_WITH_ACTION(env, action) \\\n+ } \\\n+ @catch (NSException *e) { \\\n+     { action; }; \\\n+     NSLog(@\"%@\", [e callStackSymbols]); \\\n+ } \\\n+ @finally { \\\n+    [pool drain]; \\\n+ };\n+\n","filename":"src\/java.desktop\/macosx\/native\/libosxapp\/JNIUtilities.h","additions":31,"deletions":0,"binary":false,"changes":31,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-#include <jni_util.h>\n+#include <JNIUtilities.h>\n@@ -45,1 +45,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -49,1 +49,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -62,1 +62,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -66,1 +66,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -79,1 +79,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -88,1 +88,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -101,1 +101,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -129,1 +129,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -142,1 +142,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -181,1 +181,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -194,1 +194,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -227,1 +227,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libosxui\/AquaFileView.m","additions":13,"deletions":13,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -42,1 +42,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -45,1 +45,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libosxui\/AquaNativeResources.m","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -108,1 +108,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -114,1 +114,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -128,1 +128,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -134,1 +134,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -148,1 +148,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -156,1 +156,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -194,1 +194,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -200,1 +200,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -216,1 +216,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -232,1 +232,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n@@ -247,1 +247,1 @@\n-JNF_COCOA_ENTER(env);\n+JNI_COCOA_ENTER(env);\n@@ -261,1 +261,1 @@\n-JNF_COCOA_EXIT(env);\n+JNI_COCOA_EXIT(env);\n","filename":"src\/java.desktop\/macosx\/native\/libosxui\/ScreenMenu.m","additions":12,"deletions":12,"binary":false,"changes":24,"status":"modified"}]}