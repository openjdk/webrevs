{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2002, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2002, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -49,1 +49,0 @@\n-    private static volatile int index;\n@@ -51,1 +50,0 @@\n-    private static Frame f;\n@@ -53,0 +51,1 @@\n+    private static volatile int frameNum;\n@@ -56,0 +55,1 @@\n+    private static final int MAX_FRAME_COUNT = 30;\n@@ -58,1 +58,2 @@\n-        gcs = GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice().getConfigurations();\n+        gcs = GraphicsEnvironment.getLocalGraphicsEnvironment()\n+                .getDefaultScreenDevice().getConfigurations();\n@@ -61,7 +62,24 @@\n-        try {\n-            EventQueue.invokeAndWait(() -> {\n-                createAndShowUI();\n-            });\n-            robot.delay(1000);\n-            System.out.println(\"frames.length: \"+frames.length);\n-            for (index = 0; index < frames.length; index++) {\n+\n+        \/\/ Limit the number of frames tested if needed\n+        if (gcs.length > MAX_FRAME_COUNT) {\n+            frames = new Frame[MAX_FRAME_COUNT];\n+        } else {\n+            frames = new Frame[gcs.length];\n+        }\n+        System.out.println(gcs.length + \" gcs found. Testing \"\n+                + frames.length + \" frame(s).\");\n+\n+        for (frameNum = 0; frameNum < frames.length; frameNum++) {\n+            try {\n+                EventQueue.invokeAndWait(() -> {\n+                    frames[frameNum] = new Frame(\"Frame w\/ gc \"\n+                            + frameNum, gcs[frameNum]);\n+                    frames[frameNum].setSize(100, 100);\n+                    frames[frameNum].setUndecorated(true);\n+                    frames[frameNum].setBackground(Color.WHITE);\n+                    frames[frameNum].setVisible(true);\n+                    System.out.println(\"Frame \" + frameNum + \" created\");\n+                });\n+\n+                robot.delay(1000);\n+\n@@ -69,2 +87,2 @@\n-                    p = frames[index].getLocation();\n-                    d = frames[index].getSize();\n+                    p = frames[frameNum].getLocation();\n+                    d = frames[frameNum].getSize();\n@@ -72,0 +90,1 @@\n+\n@@ -76,1 +95,3 @@\n-                        ImageIO.write(img, \"png\", new File(\"Frame_\" + index + \".png\"));\n+                        ImageIO.write(img, \"png\",\n+                                new File(\"Frame_\"\n+                                        + frameNum + \".png\"));\n@@ -78,1 +99,2 @@\n-                    throw new RuntimeException(\"Frame visual test failed with non-white background color\");\n+                    throw new RuntimeException(\"Frame visual test \" +\n+                            \"failed with non-white background color\");\n@@ -80,3 +102,1 @@\n-            }\n-        } finally {\n-            for (index = 0; index < frames.length; index++) {\n+            } finally {\n@@ -84,2 +104,3 @@\n-                    if (frames[index] != null) {\n-                        frames[index].dispose();\n+                    if (frames[frameNum] != null) {\n+                        frames[frameNum].dispose();\n+                        System.out.println(\"Frame \" + frameNum + \" disposed\");\n@@ -92,11 +113,0 @@\n-    private static void createAndShowUI() {\n-        frames = new Frame[gcs.length];\n-        for (int i = 0; i < frames.length; i++) {\n-            frames[i] = new Frame(\"Frame w\/ gc \" + i, gcs[i]);\n-            frames[i].setSize(100, 100);\n-            frames[i].setUndecorated(true);\n-            frames[i].setBackground(Color.WHITE);\n-            frames[i].setVisible(true);\n-        }\n-    }\n-\n@@ -104,1 +114,0 @@\n-\n","filename":"test\/jdk\/java\/awt\/Frame\/FrameVisualTest.java","additions":41,"deletions":32,"binary":false,"changes":73,"status":"modified"}]}