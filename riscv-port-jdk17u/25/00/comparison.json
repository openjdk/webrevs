{"files":[{"patch":"@@ -8577,0 +8577,90 @@\n+instruct minI_reg_reg(iRegINoSp dst, iRegI src)\n+%{\n+  match(Set dst (MinI dst src));\n+\n+  ins_cost(BRANCH_COST + ALU_COST);\n+  format %{\n+    \"ble $dst, $src, skip\\t#@minI_reg_reg\\n\\t\"\n+    \"mv  $dst, $src\\n\\t\"\n+    \"skip:\"\n+  %}\n+\n+  ins_encode %{\n+    Label Lskip;\n+    __ ble(as_Register($dst$$reg), as_Register($src$$reg), Lskip);\n+    __ mv(as_Register($dst$$reg), as_Register($src$$reg));\n+    __ bind(Lskip);\n+  %}\n+\n+  ins_pipe(pipe_class_compare);\n+%}\n+\n+instruct maxI_reg_reg(iRegINoSp dst, iRegI src)\n+%{\n+  match(Set dst (MaxI dst src));\n+\n+  ins_cost(BRANCH_COST + ALU_COST);\n+  format %{\n+    \"bge $dst, $src, skip\\t#@maxI_reg_reg\\n\\t\"\n+    \"mv  $dst, $src\\n\\t\"\n+    \"skip:\"\n+  %}\n+\n+  ins_encode %{\n+    Label Lskip;\n+    __ bge(as_Register($dst$$reg), as_Register($src$$reg), Lskip);\n+    __ mv(as_Register($dst$$reg), as_Register($src$$reg));\n+    __ bind(Lskip);\n+  %}\n+\n+  ins_pipe(pipe_class_compare);\n+%}\n+\n+\/\/ special case for comparing with zero\n+\/\/ n.b. this is selected in preference to the rule above because it\n+\/\/ avoids loading constant 0 into a source register\n+\n+instruct minI_reg_zero(iRegINoSp dst, immI0 zero)\n+%{\n+  match(Set dst (MinI dst zero));\n+  match(Set dst (MinI zero dst));\n+\n+  ins_cost(BRANCH_COST + ALU_COST);\n+  format %{\n+    \"blez $dst, skip\\t#@minI_reg_zero\\n\\t\"\n+    \"mv   $dst, zr\\n\\t\"\n+    \"skip:\"\n+  %}\n+\n+  ins_encode %{\n+    Label Lskip;\n+    __ blez(as_Register($dst$$reg), Lskip);\n+    __ mv(as_Register($dst$$reg), zr);\n+    __ bind(Lskip);\n+  %}\n+\n+  ins_pipe(pipe_class_compare);\n+%}\n+\n+instruct maxI_reg_zero(iRegINoSp dst, immI0 zero)\n+%{\n+  match(Set dst (MaxI dst zero));\n+  match(Set dst (MaxI zero dst));\n+\n+  ins_cost(BRANCH_COST + ALU_COST);\n+  format %{\n+    \"bgez $dst, skip\\t#@maxI_reg_zero\\n\\t\"\n+    \"mv   $dst, zr\\n\\t\"\n+    \"skip:\"\n+  %}\n+\n+  ins_encode %{\n+    Label Lskip;\n+    __ bgez(as_Register($dst$$reg), Lskip);\n+    __ mv(as_Register($dst$$reg), zr);\n+    __ bind(Lskip);\n+  %}\n+\n+  ins_pipe(pipe_class_compare);\n+%}\n+\n@@ -8603,1 +8693,1 @@\n-  ins_pipe(ialu_reg_reg);\n+  ins_pipe(pipe_class_compare);\n@@ -8633,1 +8723,1 @@\n-  ins_pipe(ialu_reg_reg);\n+  ins_pipe(pipe_class_compare);\n","filename":"src\/hotspot\/cpu\/riscv\/riscv.ad","additions":92,"deletions":2,"binary":false,"changes":94,"status":"modified"}]}