{"files":[{"patch":"@@ -36,0 +36,1 @@\n+const char* VM_Version::_vm_mode = \"\";\n@@ -47,0 +48,7 @@\n+  \/\/ check if satp.mode is supported, currently supports up to SV48(RV64)\n+  if (get_satp_mode() > VM_SV48) {\n+    vm_exit_during_initialization(\n+      err_msg(\"Unsupported satp mode: %s. Only satp modes up to sv48 are supported for now.\",\n+              _vm_mode));\n+  }\n+\n","filename":"src\/hotspot\/cpu\/riscv\/vm_version_riscv.cpp","additions":8,"deletions":0,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -41,0 +41,9 @@\n+\/\/ VM modes (satp.mode) privileged ISA 1.10\n+enum VM_MODE {\n+  VM_MBARE = 0,\n+  VM_SV39  = 8,\n+  VM_SV48  = 9,\n+  VM_SV57  = 10,\n+  VM_SV64  = 11\n+};\n+\n@@ -43,0 +52,1 @@\n+  static const char* _vm_mode;\n@@ -46,0 +56,1 @@\n+  static VM_MODE get_satp_mode();\n","filename":"src\/hotspot\/cpu\/riscv\/vm_version_riscv.hpp","additions":11,"deletions":0,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -78,0 +78,14 @@\n+VM_Version::VM_MODE VM_Version::get_satp_mode() {\n+  if (!strcmp(_vm_mode, \"sv39\")) {\n+    return VM_SV39;\n+  } else if (!strcmp(_vm_mode, \"sv48\")) {\n+    return VM_SV48;\n+  } else if (!strcmp(_vm_mode, \"sv57\")) {\n+    return VM_SV57;\n+  } else if (!strcmp(_vm_mode, \"sv64\")) {\n+    return VM_SV64;\n+  } else {\n+    return VM_MBARE;\n+  }\n+}\n+\n@@ -106,1 +120,8 @@\n-        if (strncmp(buf, \"uarch\", sizeof \"uarch\" - 1) == 0) {\n+        if (strncmp(buf, \"mmu\", sizeof \"mmu\" - 1) == 0) {\n+          if (_vm_mode[0] != '\\0') {\n+            continue;\n+          }\n+          char* vm_mode = os::strdup(p + 2);\n+          vm_mode[strcspn(vm_mode, \"\\n\")] = '\\0';\n+          _vm_mode = vm_mode;\n+        } else if (strncmp(buf, \"uarch\", sizeof \"uarch\" - 1) == 0) {\n","filename":"src\/hotspot\/os_cpu\/linux_riscv\/vm_version_linux_riscv.cpp","additions":22,"deletions":1,"binary":false,"changes":23,"status":"modified"}]}