{"files":[{"patch":"@@ -3805,4 +3805,9 @@\n-  \/\/ 2) check if large pages are configured\n-  if ( ( UseTransparentHugePages && HugePages::supports_thp() == false) ||\n-       (!UseTransparentHugePages && HugePages::supports_static_hugepages() == false) ) {\n-    \/\/ No large pages configured, return.\n+  \/\/ 2) check if the OS supports THPs resp. static hugepages.\n+  if (UseTransparentHugePages && !HugePages::supports_thp()) {\n+    if (!FLAG_IS_DEFAULT(UseTransparentHugePages)) {\n+      log_warning(pagesize)(\"UseTransparentHugePages disabled, transparent huge pages are not supported by the operating system.\");\n+    }\n+    UseLargePages = UseTransparentHugePages = UseHugeTLBFS = UseSHM = false;\n+    return;\n+  }\n+  if (!UseTransparentHugePages && !HugePages::supports_static_hugepages()) {\n@@ -3810,4 +3815,1 @@\n-    UseLargePages = false;\n-    UseTransparentHugePages = false;\n-    UseHugeTLBFS = false;\n-    UseSHM = false;\n+    UseLargePages = UseTransparentHugePages = UseHugeTLBFS = UseSHM = false;\n","filename":"src\/hotspot\/os\/linux\/os_linux.cpp","additions":10,"deletions":8,"binary":false,"changes":18,"status":"modified"}]}