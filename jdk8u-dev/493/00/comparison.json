{"files":[{"patch":"@@ -85,6 +85,1 @@\n-DEBUGGEEFLAGS=\n-if [ -r $TESTCLASSES\/@debuggeeVMOptions ] ; then\n-   DEBUGGEEFLAGS=`cat $TESTCLASSES\/@debuggeeVMOptions`\n-elif [ -r $TESTCLASSES\/..\/@debuggeeVMOptions ] ; then\n-   DEBUGGEEFLAGS=`cat $TESTCLASSES\/..\/@debuggeeVMOptions`\n-fi\n+DEBUGGEEFLAGS=$TESTVMOPTS $TESTJAVAOPTS\n","filename":"jdk\/test\/com\/sun\/jdi\/PrivateTransportTest.sh","additions":1,"deletions":6,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -839,6 +839,1 @@\n-    args=\n-    # Note that @debuggeeVMOptions is unique to a test run instead of\n-    # a test in a run.  It is not modified during a test run.\n-    if [ -r $TESTCLASSES\/..\/@debuggeeVMOptions ] ; then\n-       args=`cat $TESTCLASSES\/..\/@debuggeeVMOptions`\n-    fi\n+    args=$TESTVMOPTS $TESTJAVAOPTS\n@@ -847,1 +842,1 @@\n-       echo \"--Starting debuggee with args from @debuggeeVMOptions: $args\"\n+       echo \"--Starting debuggee with args from TESTVMOPTS and\/or TESTJAVAOPTS: $args\"\n","filename":"jdk\/test\/com\/sun\/jdi\/ShellScaffold.sh","additions":2,"deletions":7,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -0,0 +1,48 @@\n+\/*\n+ * Copyright (c) 2003, 2014, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import jdk.testlibrary.OutputAnalyzer;\n+import jdk.testlibrary.ProcessTools;\n+\n+\/* @test\n+ * @bug 4914611\n+ * @summary Test for JDWP: -agentlib:jdwp=suspend=n hanging\n+ * @library \/lib\/testlibrary\n+ * @build jdk.testlibrary.*\n+ * @compile -g HelloWorld.java\n+ * @run driver SuspendNoFlagTest\n+ *\/\n+public class SuspendNoFlagTest {\n+\n+    private static final String TEST_CLASSES = System.getProperty(\n+            \"test.classes\", \".\");\n+\n+    public static void main(String[] args) throws Throwable {\n+        OutputAnalyzer output = ProcessTools.executeTestJvm(\"-classpath\",\n+                TEST_CLASSES,\n+                \"-agentlib:jdwp=transport=dt_socket,server=y,suspend=n\",\n+                \"HelloWorld\");\n+        output.shouldHaveExitValue(0);\n+    }\n+\n+}\n","filename":"jdk\/test\/com\/sun\/jdi\/SuspendNoFlagTest.java","additions":48,"deletions":0,"binary":false,"changes":48,"status":"added"},{"patch":"@@ -1,104 +0,0 @@\n-#!\/bin\/ksh -p\n-\n-#\n-# Copyright (c) 2003, 2006, Oracle and\/or its affiliates. All rights reserved.\n-# DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n-#\n-# This code is free software; you can redistribute it and\/or modify it\n-# under the terms of the GNU General Public License version 2 only, as\n-# published by the Free Software Foundation.\n-#\n-# This code is distributed in the hope that it will be useful, but WITHOUT\n-# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n-# FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n-# version 2 for more details (a copy is included in the LICENSE file that\n-# accompanied this code).\n-#\n-# You should have received a copy of the GNU General Public License version\n-# 2 along with this work; if not, write to the Free Software Foundation,\n-# Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n-#\n-# Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n-# or visit www.oracle.com if you need additional information or have any\n-# questions.\n-#\n-\n-#\n-#   @test       SuspendNoFlagTest.sh\n-#   @bug        4914611\n-#   @summary    Test for JDWP: -agentlib:jdwp=suspend=n hanging\n-#   @author     Kelly O'Hair\n-#   Based on test\/java\/awt\/TEMPLATE\/AutomaticShellTest.sh\n-#\n-#   @run compile -g HelloWorld.java\n-#   @run shell\/timeout=60 SuspendNoFlagTest.sh\n-#\n-\n-# Beginning of subroutines:\n-status=1\n-\n-#Call this from anywhere to fail the test with an error message\n-# usage: fail \"reason why the test failed\"\n-fail() \n- { echo \"The test failed :-(\"\n-   echo \"$*\" 1>&2\n-   echo \"exit status was $status\"\n-   exit $status\n- } #end of fail()\n-\n-#Call this from anywhere to pass the test with a message\n-# usage: pass \"reason why the test passed if applicable\"\n-pass() \n- { echo \"The test passed!!!\"\n-   echo \"$*\" 1>&2\n-   exit 0\n- } #end of pass()\n-\n-# end of subroutines\n-\n-# The beginning of the script proper\n-\n-TARGETCLASS=\"HelloWorld\"\n-if [ -z \"${TESTJAVA}\" ] ; then\n-   # TESTJAVA is not set, so the test is running stand-alone.\n-   # TESTJAVA holds the path to the root directory of the build of the JDK\n-   # to be tested.  That is, any java files run explicitly in this shell\n-   # should use TESTJAVA in the path to the java interpreter.\n-   # So, we'll set this to the JDK spec'd on the command line.  If none\n-   # is given on the command line, tell the user that and use a default.\n-   # THIS IS THE JDK BEING TESTED.\n-   if [ -n \"$1\" ] ; then\n-         TESTJAVA=$1\n-      else\n-         TESTJAVA=$JAVA_HOME\n-   fi\n-   TESTSRC=.\n-   TESTCLASSES=.\n-   #Deal with .class files:\n-   ${TESTJAVA}\/bin\/javac -d ${TESTCLASSES} \\\n-            -classpath \"${TESTCLASSES}\" -g \\\n-            ${TARGETCLASS}.java\n-fi\n-#\n-echo \"JDK under test is: $TESTJAVA\"\n-#\n-CP=\"-classpath \\\"${TESTCLASSES}\\\"\"\n-#\n-DEBUGEEFLAGS=\n-if [ -r $TESTCLASSES\/@debuggeeVMOptions ] ; then\n-   DEBUGEEFLAGS=`cat $TESTCLASSES\/@debuggeeVMOptions`\n-elif [ -r $TESTCLASSES\/..\/@debuggeeVMOptions ] ; then\n-   DEBUGEEFLAGS=`cat $TESTCLASSES\/..\/@debuggeeVMOptions`\n-fi\n-DEBUGEEFLAGS=\"$DEBUGEEFLAGS -agentlib:jdwp=transport=dt_socket,server=y,suspend=n\"\n-\n-java=java\n-echo ${TESTJAVA}\/bin\/$java ${DEBUGEEFLAGS} ${CP} ${TARGETCLASS}\n-eval ${TESTJAVA}\/bin\/$java ${DEBUGEEFLAGS} ${CP} ${TARGETCLASS}\n-status=$?\n-echo \"test status was: $status\"\n-if [ $status -eq \"0\" ] ;\n-   then pass \"status = 0 and no timeout occured\"\n-\n-   else fail \"unspecified test failure (timed out or hung)\"\n-fi\n","filename":"jdk\/test\/com\/sun\/jdi\/SuspendNoFlagTest.sh","additions":0,"deletions":104,"binary":false,"changes":104,"status":"deleted"},{"patch":"@@ -47,2 +47,1 @@\n-     * These are read from the first non-comment line\n-     * in file @debuggeeVMOptions in the test.classes dir\n+     * These are read from TESTVMOPTS and\/or TESTJAVAOPTS.\n","filename":"jdk\/test\/com\/sun\/jdi\/VMConnection.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"}]}