{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2017, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2019, Oracle and\/or its affiliates. All rights reserved.\n@@ -65,0 +65,1 @@\n+    private boolean hasCompositionString = false;\n@@ -244,0 +245,1 @@\n+                setConversionStatus(context, IME_CMODE_ALPHANUMERIC);\n@@ -261,0 +263,3 @@\n+                newmode = getConversionStatus(context);\n+                newmode &= ~IME_CMODE_FULLSHAPE;\n+                setConversionStatus(context, newmode);\n@@ -265,1 +270,1 @@\n-                    newmode = IME_CMODE_NATIVE;\n+                    newmode = IME_CMODE_NATIVE | IME_CMODE_FULLSHAPE;\n@@ -316,0 +321,9 @@\n+        \/\/ Compare IM's composition string with Java's composition string\n+        if (hasCompositionString && !isCompositionStringAvailable(context)) {\n+            endCompositionNative(context, DISCARD_INPUT);\n+            sendInputMethodEvent(InputMethodEvent.INPUT_METHOD_TEXT_CHANGED,\n+                EventQueue.getMostRecentEventTime(),\n+                null, null, null, null, null, 0, 0, 0);\n+            hasCompositionString = false;\n+        }\n+\n@@ -343,0 +357,1 @@\n+        hasCompositionString = isCompositionStringAvailable(context);\n@@ -647,0 +662,1 @@\n+    private native boolean isCompositionStringAvailable(int context);\n","filename":"jdk\/src\/windows\/classes\/sun\/awt\/windows\/WInputMethod.java","additions":18,"deletions":2,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -3835,0 +3835,5 @@\n+    LOGFONT lf;\n+    HFONT hFont = (HFONT) GetStockObject(DEFAULT_GUI_FONT);\n+    if (GetObject(hFont, sizeof(lf), (LPVOID)&lf) == sizeof(lf)) {\n+        ImmSetCompositionFont(hIMC, &lf);\n+    }\n","filename":"jdk\/src\/windows\/native\/sun\/windows\/awt_Component.cpp","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -531,0 +531,17 @@\n+\/*\n+ * Class:     sun_awt_windows_WInputMethod\n+ * Method:    isCompositionStringAvailable\n+ * Signature: (I)Z\n+ *\/\n+JNIEXPORT jboolean JNICALL Java_sun_awt_windows_WInputMethod_isCompositionStringAvailable\n+  (JNIEnv *env, jobject self, jint context)\n+{\n+    LONG length;\n+    length = ImmGetCompositionString((HIMC)IntToPtr(context), GCS_COMPSTR, NULL, 0);\n+    if (length > 0) {\n+        return JNI_TRUE;\n+    } else {\n+        return JNI_FALSE;\n+    }\n+}\n+\n","filename":"jdk\/src\/windows\/native\/sun\/windows\/awt_InputMethod.cpp","additions":17,"deletions":0,"binary":false,"changes":17,"status":"modified"}]}