{"files":[{"patch":"@@ -2295,0 +2295,13 @@\n+static void print_container_helper(outputStream* st, jlong j, const char* metrics) {\n+  st->print(\"%s: \", metrics);\n+  if (j > 0) {\n+    if (j >= 1024) {\n+      st->print_cr(UINT64_FORMAT \" k\", uint64_t(j) \/ 1024);\n+    } else {\n+      st->print_cr(UINT64_FORMAT, uint64_t(j));\n+    }\n+  } else {\n+    st->print_cr(\"%s\", j == OSCONTAINER_ERROR ? \"not supported\" : \"unlimited\");\n+  }\n+}\n+\n@@ -2345,39 +2358,5 @@\n-  jlong j = OSContainer::memory_limit_in_bytes();\n-  st->print(\"memory_limit_in_bytes: \");\n-  if (j > 0) {\n-    st->print(JLONG_FORMAT \"\\n\", j);\n-  } else {\n-    st->print(\"%s\\n\", j == OSCONTAINER_ERROR ? \"not supported\" : \"unlimited\");\n-  }\n-\n-  j = OSContainer::memory_and_swap_limit_in_bytes();\n-  st->print(\"memory_and_swap_limit_in_bytes: \");\n-  if (j > 0) {\n-    st->print(JLONG_FORMAT \"\\n\", j);\n-  } else {\n-    st->print(\"%s\\n\", j == OSCONTAINER_ERROR ? \"not supported\" : \"unlimited\");\n-  }\n-\n-  j = OSContainer::memory_soft_limit_in_bytes();\n-  st->print(\"memory_soft_limit_in_bytes: \");\n-  if (j > 0) {\n-    st->print(JLONG_FORMAT \"\\n\", j);\n-  } else {\n-    st->print(\"%s\\n\", j == OSCONTAINER_ERROR ? \"not supported\" : \"unlimited\");\n-  }\n-\n-  j = OSContainer::OSContainer::memory_usage_in_bytes();\n-  st->print(\"memory_usage_in_bytes: \");\n-  if (j > 0) {\n-    st->print(JLONG_FORMAT \"\\n\", j);\n-  } else {\n-    st->print(\"%s\\n\", j == OSCONTAINER_ERROR ? \"not supported\" : \"unlimited\");\n-  }\n-\n-  j = OSContainer::OSContainer::memory_max_usage_in_bytes();\n-  st->print(\"memory_max_usage_in_bytes: \");\n-  if (j > 0) {\n-    st->print(JLONG_FORMAT \"\\n\", j);\n-  } else {\n-    st->print(\"%s\\n\", j == OSCONTAINER_ERROR ? \"not supported\" : \"unlimited\");\n-  }\n+  print_container_helper(st, OSContainer::memory_limit_in_bytes(), \"memory_limit_in_bytes\");\n+  print_container_helper(st, OSContainer::memory_and_swap_limit_in_bytes(), \"memory_and_swap_limit_in_bytes\");\n+  print_container_helper(st, OSContainer::memory_soft_limit_in_bytes(), \"memory_soft_limit_in_bytes\");\n+  print_container_helper(st, OSContainer::memory_usage_in_bytes(), \"memory_usage_in_bytes\");\n+  print_container_helper(st, OSContainer::memory_max_usage_in_bytes(), \"memory_max_usage_in_bytes\");\n","filename":"hotspot\/src\/os\/linux\/vm\/os_linux.cpp","additions":18,"deletions":39,"binary":false,"changes":57,"status":"modified"}]}