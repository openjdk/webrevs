{"files":[{"patch":"@@ -110,0 +110,5 @@\n+    VERSIONINFO_RESOURCE := $(JDK_TOPDIR)\/src\/windows\/resource\/version.rc, \\\n+    RC_FLAGS := $(RC_FLAGS) \\\n+        -D \"JDK_FNAME=j2gss.dll\" \\\n+        -D \"JDK_INTERNAL_NAME=j2gss\" \\\n+        -D \"JDK_FTYPE=0x2L\", \\\n@@ -127,0 +132,5 @@\n+    VERSIONINFO_RESOURCE := $(JDK_TOPDIR)\/src\/windows\/resource\/version.rc, \\\n+    RC_FLAGS := $(RC_FLAGS) \\\n+        -D \"JDK_FNAME=sspi_bridge.dll\" \\\n+        -D \"JDK_INTERNAL_NAME=sspi_bridge\" \\\n+        -D \"JDK_FTYPE=0x2L\", \\\n","filename":"jdk\/make\/lib\/SecurityLibraries.gmk","additions":10,"deletions":0,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -0,0 +1,89 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8345358\n+ * @run main\/othervm CheckWindowsProperty\n+ * @summary file property check for Windows .exe\/.dll\n+ * @requires os.family == \"windows\"\n+ *\/\n+\n+import java.io.BufferedReader;\n+import java.io.InputStreamReader;\n+\n+public class CheckWindowsProperty {\n+    public static void main(String[] args) throws Exception {\n+        String targetDir = System.getProperty(\"test.jdk\") + \"\\\\\";\n+        String psCommand = String.format(\n+            \"Get-ChildItem -Path '%s' -include *.exe,*.dll -Recurse -File | \" +\n+            \"ForEach-Object { \" +\n+                \"$vi = $_.VersionInfo; \" +\n+                \"@($vi.FileName, $vi.CompanyName, $vi.FileDescription, $vi.FileVersion, \" +\n+                \"$vi.InternalName, $vi.Language, $vi.LegalCopyright, $vi.OriginalFilename, \" +\n+                \"$vi.ProductName, $vi.ProductVersion) -join ';'\" +\n+            \"}\",\n+            targetDir\n+        );\n+\n+        ProcessBuilder pb = new ProcessBuilder(\"powershell\", \"-NoLogo\", \"-NoProfile\",\n+            \"-Command\", psCommand).redirectErrorStream(true);\n+        Process p = pb.start();\n+        p.getOutputStream().close();\n+\n+        try (BufferedReader br = new BufferedReader(new InputStreamReader(p.getInputStream()))) {\n+            for (String line = br.readLine(); line != null; line = br.readLine()) {\n+                checkFileProperty(line);\n+            }\n+        }\n+        p.waitFor();\n+        int exitCode = p.exitValue();\n+        if (exitCode != 0) {\n+            throw new RuntimeException(\"ExitCode is \" + exitCode + \". PowerShell command failed.\");\n+        }\n+    }\n+\n+    static void checkFileProperty(String line) {\n+        \/\/ line format\n+        \/\/ FileName;CompanyName;FileDescription;FileVersion;InternalName;Language;LegalCopyright;\n+        \/\/ OriginalFilename;ProductName;ProductVersion\n+        String[] data = line.split(\";\", -1);\n+        String filename = data[0].substring(data[0].lastIndexOf(System.getProperty(\"file.separator\")) + 1);\n+\n+        \/\/ skip Microsoft redist dll\n+        if (filename.startsWith(\"api-ms-win\") ||\n+            filename.startsWith(\"msvcp\") ||\n+            filename.startsWith(\"ucrtbase\") ||\n+            filename.startsWith(\"vcruntime\")) {\n+            return;\n+        }\n+\n+        for (int i = 1; i < data.length; i++) {\n+            if (data[i] == null || data[i].isEmpty()) {\n+                if (!filename.equals(\"freetype.dll\") && !filename.equals(\"sawindbg.dll\")) {\n+                    throw new RuntimeException(\"data[\" + i + \"] should not be empty for \" + filename);\n+                }\n+            }\n+        }\n+    }\n+}\n","filename":"jdk\/test\/lib\/property\/CheckWindowsProperty.java","additions":89,"deletions":0,"binary":false,"changes":89,"status":"added"}]}