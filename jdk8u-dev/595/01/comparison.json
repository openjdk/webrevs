{"files":[{"patch":"@@ -40,0 +40,3 @@\n+    \n+    \/\/ Keyboard layout\n+    NSString *kbdLayout;\n","filename":"jdk\/src\/macosx\/native\/sun\/awt\/AWTView.h","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -43,0 +43,3 @@\n+\/\/ Constant for keyman layouts\n+#define KEYMAN_LAYOUT \"keyman\"\n+\n@@ -287,1 +290,1 @@\n-    fKeyEventsNeeded = YES;\n+    fKeyEventsNeeded = ![(NSString *)kbdLayout containsString:@KEYMAN_LAYOUT];\n@@ -969,1 +972,2 @@\n-        ((utf8Length > 1) && [self isCodePointInUnicodeBlockNeedingIMEvent:[aString characterAtIndex:0]])) {\n+        ((utf8Length > 1) && [self isCodePointInUnicodeBlockNeedingIMEvent:[aString characterAtIndex:0]]) ||\n+        [(NSString *)kbdLayout containsString:@KEYMAN_LAYOUT]) {\n@@ -1004,0 +1008,9 @@\n+- (void)keyboardInputSourceChanged:(NSNotification *)notification\n+{\n+#ifdef IM_DEBUG\n+    NSLog(@\"keyboardInputSourceChangeNotification received\");\n+#endif\n+    NSTextInputContext *curContxt = [NSTextInputContext currentInputContext];\n+    kbdLayout = curContxt.selectedKeyboardInputSource;\n+}\n+\n@@ -1329,0 +1342,7 @@\n+    \n+    NSTextInputContext *curContxt = [NSTextInputContext currentInputContext];\n+    kbdLayout = curContxt.selectedKeyboardInputSource;\n+    [[NSNotificationCenter defaultCenter] addObserver:self\n+                                           selector:@selector(keyboardInputSourceChanged:)\n+                                               name:NSTextInputContextKeyboardSelectionDidChangeNotification\n+                                             object:nil];\n","filename":"jdk\/src\/macosx\/native\/sun\/awt\/AWTView.m","additions":22,"deletions":2,"binary":false,"changes":24,"status":"modified"}]}