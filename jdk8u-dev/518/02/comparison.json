{"files":[{"patch":"@@ -27,1 +27,0 @@\n-import java.io.FileReader;\n@@ -34,1 +33,2 @@\n-import java.util.stream.Collectors;\n+import java.util.ArrayList;\n+import java.util.List;\n@@ -62,0 +62,1 @@\n+        String xml = TEST_SRC + File.separator + \"SurrogateTest1.xml\";\n@@ -65,1 +66,1 @@\n-            InputStream fis = this.getClass().getResourceAsStream(\"SurrogateTest1.xml\");\n+            InputStream fis = new FileInputStream(xml);\n@@ -77,1 +78,3 @@\n-        compareWithGold(expected, out);\n+        if (!compareWithGold(expected, out)) {\n+            throw new RuntimeException(\"toHTMLTest failed\");\n+        }\n@@ -87,1 +90,3 @@\n-        compareStringWithGold(TEST_SRC + File.separator + \"SurrogateTest2.txt\", th.sb.toString());\n+        if (!compareLinesWithGold(TEST_SRC + File.separator + \"SurrogateTest2.txt\", th.lines)) {\n+            throw new RuntimeException(\"handlerTest failed\");\n+        }\n@@ -91,1 +96,1 @@\n-        private StringBuilder sb = new StringBuilder();\n+        private List<String> lines = new ArrayList<>();\n@@ -95,1 +100,1 @@\n-            sb.append( localName + \"@attr:\" + attributes.getValue(\"attr\") + '\\n');\n+            lines.add( localName + \"@attr:\" + attributes.getValue(\"attr\"));\n@@ -125,2 +130,2 @@\n-    \/\/ Compare contents of golden file with a test output string.\n-    public static boolean compareStringWithGold(String goldfile, String string)\n+    \/\/ Compare contents of golden file with test output list line by line.\n+    public static boolean compareLinesWithGold(String goldfile, List<String> lines)\n@@ -128,3 +133,1 @@\n-        return Files.readAllLines(Paths.get(goldfile)).stream().collect(\n-                Collectors.joining(System.getProperty(\"line.separator\")))\n-                .equals(string);\n+        return Files.readAllLines(Paths.get(goldfile)).equals(lines);\n","filename":"jdk\/test\/javax\/xml\/jaxp\/transform\/8268457\/SurrogateTest.java","additions":15,"deletions":12,"binary":false,"changes":27,"status":"modified"}]}