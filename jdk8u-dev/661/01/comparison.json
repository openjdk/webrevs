{"files":[{"patch":"@@ -335,1 +335,1 @@\n-    char hostname[NI_MAXHOST+1];\n+    char hostname[NI_MAXHOST + 1];\n@@ -339,1 +339,0 @@\n-        \/* Something went wrong, maybe networking is not setup? *\/\n@@ -342,0 +341,4 @@\n+#if defined(__solaris__)\n+        \/\/ try to resolve hostname via nameservice\n+        \/\/ if it is known but getnameinfo fails, hostname will still be the\n+        \/\/ value from gethostname\n@@ -343,1 +346,0 @@\n-        int error;\n@@ -345,0 +347,1 @@\n+        \/\/ make sure string is null-terminated\n@@ -350,14 +353,3 @@\n-        error = getaddrinfo(hostname, NULL, &hints, &res);\n-\n-        if (error == 0) {\/* host is known to name service *\/\n-            getnameinfo(res->ai_addr,\n-                        res->ai_addrlen,\n-                        hostname,\n-                        NI_MAXHOST,\n-                        NULL,\n-                        0,\n-                        NI_NAMEREQD);\n-\n-            \/* if getnameinfo fails hostname is still the value\n-               from gethostname *\/\n-\n+        if (getaddrinfo(hostname, NULL, &hints, &res) == 0) {\n+            getnameinfo(res->ai_addr, res->ai_addrlen, hostname, NI_MAXHOST,\n+                        NULL, 0, NI_NAMEREQD);\n@@ -366,0 +358,4 @@\n+#else\n+        \/\/ make sure string is null-terminated\n+        hostname[NI_MAXHOST] = '\\0';\n+#endif\n","filename":"jdk\/src\/solaris\/native\/java\/net\/Inet4AddressImpl.c","additions":13,"deletions":17,"binary":false,"changes":30,"status":"modified"}]}