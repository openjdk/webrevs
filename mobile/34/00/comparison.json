{"files":[{"patch":"@@ -0,0 +1,70 @@\n+# Building the JDK targeting iOS\n+\n+Following are the instructions for building JDK on mac targeting iOS.\n+\n+## Build static image for mac (Test)\n+The following steps are to test if you can build the static image targeting mac.\n+If you do not want to do this, feel free to jump directly to [Build static image for iOS](#build-static-image-for-iOS).\n+\n+### Pre-requisites\n+Download and unzip pre-built JDK24 to be used as boot JDK.\n+\n+### Clone the mobile repository\n+Clone the openjdk\/mobile repository. The following command can be used:\n+\n+```\n+git clone git@github.com:openjdk\/mobile.git\n+```\n+\n+### Configure and build static image\n+Use the following commands configure and create an image:\n+\n+```\n+sh configure --with-boot-jdk=path-to-jdk24\n+cd build\/macosx-aarch64-server-release\n+make static-libs-image\n+```\n+\n+Once the build is successful, it should have created a directory in `build\/macosx-aarch64-server-release\/images\/static-libs\/lib\/server` with a file `libjvm.a`.\n+\n+## Build static image for iOS\n+\n+### Pre-requisites\n+Following are the prerequisites to build JDK on Mac targeting iOS:\n+1. Download and unzip pre-built JDK24 to be used as boot JDK\n+2. Download the support zip which contains an ios build for libffi and cups. Unzip it in the root directory of the project.  \/\/ TODO: add link to support zip\n+3. Install `autoconf` on mac via homebrew: `brew install autoconf`\n+\n+### Clone the mobile repository\n+Clone the openjdk\/mobile repository. The following command can be used:\n+\n+```\n+git clone git@github.com:openjdk\/mobile.git\n+```\n+\n+### Configure\n+Modify the configure script below so that it has the correct paths to your JDK24 directory,\n+the unzipped 'support' directory, and the correct location of the iPhoneOS.platform.\n+\n+```\n+sh configure \\\n+--with-conf-name=zero-ios-aarch64 \\\n+--disable-warnings-as-errors \\\n+--openjdk-target=aarch64-macos-ios \\\n+--with-boot-jdk=path-to-jdk24 \\\n+--with-jvm-variants=zero \\\n+--with-libffi-include=support\/libffi\/include \\\n+--with-libffi-lib=support\/libffi\/libs \\\n+--with-sysroot=\/Applications\/Xcode.app\/Contents\/Developer\/Platforms\/iPhoneOS.platform\/Developer\/SDKs\/iPhoneOS.sdk \\\n+--with-cups-include=support\/cups-2.3.6\n+```\n+\n+### Build static image\n+Move into  `build\/zero-ios-aarch64` and execute the `make` command:\n+\n+```\n+cd build\/zero-ios-aarch64\n+make static-libs-image\n+```\n+\n+Once the build is successful, it should have created a directory in `build\/zero-ios-aarch64\/images\/static-libs\/lib\/zero` with a file `libjvm.a`.\n\\ No newline at end of file\n","filename":"doc\/building_ios.md","additions":70,"deletions":0,"binary":false,"changes":70,"status":"added"}]}