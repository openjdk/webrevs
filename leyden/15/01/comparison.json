{"files":[{"patch":"@@ -80,0 +80,1 @@\n+#define CFG_WARN6       \"Warning: CacheDataStore cannot be used with default source launcher environment, disabling --add-modules=ALL-DEFAULT\"\n","filename":"src\/java.base\/share\/native\/libjli\/emessages.h","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -89,0 +89,1 @@\n+static jboolean cacheDataStore = JNI_FALSE; \/* -XX:CacheDataStore *\/\n@@ -1525,0 +1526,3 @@\n+        if (JLI_StrCCmp(arg, \"-XX:CacheDataStore\") == 0) {\n+            cacheDataStore = JNI_TRUE;\n+        }\n@@ -1549,1 +1553,9 @@\n-        AddOption(\"--add-modules=ALL-DEFAULT\", NULL);\n+        \/\/ Supplying add-modules would break full module graph dumping, which will\n+        \/\/ prevent CacheDataStore use. There is no other way to use CacheDataStore\n+        \/\/ with source launcher at the moment. Drop the add-modules, print warning\n+        \/\/ message, and hope for the best. \/\/ TODO: Figure this out.\n+        if (cacheDataStore) {\n+            JLI_ReportErrorMessage(CFG_WARN6);\n+        } else {\n+            AddOption(\"--add-modules=ALL-DEFAULT\", NULL);\n+        }\n","filename":"src\/java.base\/share\/native\/libjli\/java.c","additions":13,"deletions":1,"binary":false,"changes":14,"status":"modified"}]}