{"files":[{"patch":"@@ -67,4 +67,0 @@\n-static bool has_cld(Klass *k) {\n-  return k != nullptr && k->class_loader_data() != nullptr;\n-}\n-\n@@ -86,1 +82,1 @@\n-    if (!has_cld(holder) || !holder->is_loader_alive() || !is_klass_loaded(holder)) {\n+    if (holder == nullptr || !holder->is_loader_present_and_alive() || !is_klass_loaded(holder)) {\n@@ -321,1 +317,1 @@\n-    if (has_cld(k) && is_klass_loaded(k)) {\n+    if (k != nullptr && k->is_loader_present_and_alive() && is_klass_loaded(k)) {\n@@ -339,1 +335,1 @@\n-    if (!has_cld(klass) || !klass->is_loader_alive() || !is_klass_loaded(klass)) {\n+    if (klass == nullptr || !klass->is_loader_present_and_alive() || !is_klass_loaded(klass)) {\n@@ -351,1 +347,1 @@\n-  if (!has_cld(klass) || !klass->is_loader_alive() || !is_klass_loaded(klass)) {\n+  if (klass == nullptr || !klass->is_loader_present_and_alive() || !is_klass_loaded(klass)) {\n","filename":"src\/hotspot\/share\/ci\/ciMethodData.cpp","additions":4,"deletions":8,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -734,0 +734,1 @@\n+  inline bool is_loader_present_and_alive() const;\n","filename":"src\/hotspot\/share\/oops\/klass.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -62,0 +62,5 @@\n+inline bool Klass::is_loader_present_and_alive() const {\n+  ClassLoaderData* cld = class_loader_data();\n+  return (cld != nullptr) ? cld->is_alive() : false;\n+}\n+\n","filename":"src\/hotspot\/share\/oops\/klass.inline.hpp","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -352,1 +352,1 @@\n-      if (always_clean || k->class_loader_data() == nullptr || !k->is_loader_alive() || is_excluded(k)) {\n+      if (always_clean || !k->is_loader_present_and_alive() || is_excluded(k)) {\n@@ -373,1 +373,1 @@\n-    if (always_clean || k->class_loader_data() == nullptr || !k->is_loader_alive() || is_excluded(k)) {\n+    if (always_clean || !k->is_loader_present_and_alive() || is_excluded(k)) {\n@@ -463,2 +463,1 @@\n-      assert(p->class_loader_data() != nullptr, \"Sanity\");\n-      if (always_clean || p->class_loader_data() == nullptr || !p->is_loader_alive() || is_excluded(p)) {\n+      if (always_clean || !p->is_loader_present_and_alive() || is_excluded(p)) {\n","filename":"src\/hotspot\/share\/oops\/methodData.cpp","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"}]}