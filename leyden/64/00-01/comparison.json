{"files":[{"patch":"@@ -344,11 +344,0 @@\n-static bool is_not_yet_initialized(Klass* k) {\n-  if (k->is_instance_klass()) {\n-    return InstanceKlass::cast(k)->is_not_initialized();\n-  }\n-  if (k->is_objArray_klass()) {\n-    return is_not_yet_initialized(ObjArrayKlass::cast(k)->bottom_klass());\n-  }\n-  \/\/ All other klass types should be always initialized.\n-  return false;\n-}\n-\n@@ -360,1 +349,1 @@\n-      if (!always_clean && is_not_yet_initialized(k)) {\n+      if (!always_clean && k->is_instance_klass() && InstanceKlass::cast(k)->is_not_initialized()) {\n@@ -363,1 +352,1 @@\n-      if (always_clean || !k->is_loader_alive() || is_excluded(k)) {\n+      if (always_clean || k->class_loader_data() == nullptr || !k->is_loader_alive() || is_excluded(k)) {\n@@ -381,1 +370,1 @@\n-    if (!always_clean && is_not_yet_initialized(k)) {\n+    if (!always_clean && k->is_instance_klass() && InstanceKlass::cast(k)->is_not_initialized()) {\n@@ -384,1 +373,1 @@\n-    if (always_clean || !k->is_loader_alive() || is_excluded(k)) {\n+    if (always_clean || k->class_loader_data() == nullptr || !k->is_loader_alive() || is_excluded(k)) {\n@@ -471,1 +460,1 @@\n-      if (!always_clean && is_not_yet_initialized(p)) {\n+      if (!always_clean && p->is_instance_klass() && InstanceKlass::cast(p)->is_not_initialized()) {\n@@ -474,1 +463,2 @@\n-      if (always_clean || !p->is_loader_alive() || is_excluded(p)) {\n+      assert(p->class_loader_data() != nullptr, \"Sanity\");\n+      if (always_clean || p->class_loader_data() == nullptr || !p->is_loader_alive() || is_excluded(p)) {\n@@ -1856,1 +1846,1 @@\n-    if (!_always_clean && is_not_yet_initialized(m->method_holder())) {\n+    if (!_always_clean && m->method_holder()->is_instance_klass() && InstanceKlass::cast(m->method_holder())->is_not_initialized()) {\n","filename":"src\/hotspot\/share\/oops\/methodData.cpp","additions":8,"deletions":18,"binary":false,"changes":26,"status":"modified"}]}