{"files":[{"patch":"@@ -2664,0 +2664,2 @@\n+  task->mark_finished(os::elapsed_counter());\n+\n@@ -2717,0 +2719,5 @@\n+\n+  if (PrintCompilation) {\n+    ResourceMark rm;\n+    task->print_tty();\n+  }\n","filename":"src\/hotspot\/share\/compiler\/compileBroker.cpp","additions":7,"deletions":0,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -125,0 +125,1 @@\n+  _time_finished = 0;\n@@ -251,1 +252,1 @@\n-                             jlong time_created, jlong time_queued, jlong time_started) {\n+                             jlong time_created, jlong time_queued, jlong time_started, jlong time_finished) {\n@@ -253,13 +254,16 @@\n-    \/\/ Print current time\n-    stringStream ss;\n-    ss.print(\"%c\" UINT64_FORMAT, (time_started != 0 ? 'F' : 'S'), (uint64_t)tty->time_stamp().milliseconds());\n-    st->print(\"%7s \", ss.freeze());\n-    if (time_created != 0) {\n-      \/\/ Print time in queue and time being processed by compiler thread\n-      jlong now = os::elapsed_counter();\n-      st->print(\"C%d \", (int) TimeHelper::counter_to_millis((time_queued != 0 ? time_queued : now) - time_created));\n-      if (time_queued != 0) {\n-        st->print(\"Q%d \", (int) TimeHelper::counter_to_millis((time_started != 0 ? time_started : now) - time_queued));\n-        if (time_started != 0) {\n-          st->print(\"S%d \", (int) TimeHelper::counter_to_millis(now - time_started));\n-        }\n+    {\n+      stringStream ss;\n+      ss.print(UINT64_FORMAT, (uint64_t) tty->time_stamp().milliseconds());\n+      st->print(\"%7s \", ss.freeze());\n+    }\n+    { \/\/ Time after creation\n+      stringStream ss;\n+      if (time_created != 0 && time_queued != 0) {\n+        ss.print(\"C%.1f\", TimeHelper::counter_to_millis(time_queued - time_created));\n+      }\n+      st->print(\"%7s \", ss.freeze());\n+    }\n+    { \/\/ Time in queue\n+      stringStream ss;\n+      if (time_queued != 0 && time_started != 0) {\n+        ss.print(\"Q%.1f\", TimeHelper::counter_to_millis(time_started - time_queued));\n@@ -267,0 +271,1 @@\n+      st->print(\"%7s \", ss.freeze());\n@@ -268,0 +273,8 @@\n+    { \/\/ Time in work\n+      stringStream ss;\n+      if (time_started != 0 && time_finished != 0) {\n+        ss.print(\"W%.1f\", TimeHelper::counter_to_millis(time_finished - time_started));\n+      }\n+      st->print(\"%7s \", ss.freeze());\n+    }\n+    st->print(\"  \");\n@@ -269,0 +282,1 @@\n+\n@@ -342,1 +356,1 @@\n-             compiler()->name(), msg, short_form, cr, _time_created, _time_queued, _time_started);\n+             compiler()->name(), msg, short_form, cr, _time_created, _time_queued, _time_started, _time_finished);\n","filename":"src\/hotspot\/share\/compiler\/compileTask.cpp","additions":29,"deletions":15,"binary":false,"changes":44,"status":"modified"},{"patch":"@@ -124,1 +124,1 @@\n-  jlong                _time_created; \/\/ time when task was enqueued\n+  jlong                _time_created; \/\/ time when task was created\n@@ -127,0 +127,1 @@\n+  jlong                _time_finished; \/\/ time when compilation finished\n@@ -216,0 +217,1 @@\n+  void         mark_finished(jlong time)         { _time_finished = time; }\n@@ -254,1 +256,1 @@\n-                                      jlong time_created = 0, jlong time_queued = 0, jlong time_started = 0);\n+                                      jlong time_created = 0, jlong time_queued = 0, jlong time_started = 0, jlong time_finished = 0);\n","filename":"src\/hotspot\/share\/compiler\/compileTask.hpp","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"}]}