{"files":[{"patch":"@@ -25,0 +25,1 @@\n+#include \"cds\/aotConstantPoolResolver.hpp\"\n@@ -835,0 +836,10 @@\n+#if INCLUDE_CDS\n+    if (is_precompiled()) {\n+        ResolvedIndyEntry* indy_info = cpool->resolved_indy_entry_at(index);\n+        if (!AOTConstantPoolResolver::is_resolution_deterministic(cpool(), indy_info->constant_pool_index())) {\n+          \/\/ This is an indy callsite that was resolved as a side effect of VM bootstrap, but\n+          \/\/ it cannot be cached in the resolved state, so AOT code should not reference it.\n+          adapter = nullptr;\n+        }\n+    }\n+#endif\n","filename":"src\/hotspot\/share\/ci\/ciEnv.cpp","additions":11,"deletions":0,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -658,1 +658,0 @@\n-  assert(CDSConfig::current_thread_is_vm_or_dumper(), \"sanity\");\n@@ -674,1 +673,1 @@\n-    if (!SafepointSynchronize::is_at_safepoint()) {\n+    if (!SafepointSynchronize::is_at_safepoint() && !Thread::current()->is_Compiler_thread()) {\n","filename":"src\/hotspot\/share\/classfile\/systemDictionaryShared.cpp","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"}]}