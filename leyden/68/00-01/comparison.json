{"files":[{"patch":"@@ -70,7 +70,0 @@\n-Method* AOTCacheAccess::method_in_aot_code(Method* m) {\n-  assert(CDSConfig::is_dumping_final_static_archive(), \"must be\");\n-  assert(ArchiveBuilder::is_active(), \"must be\");\n-  ArchiveBuilder* builder = ArchiveBuilder::current();\n-  return builder->to_requested(builder->get_buffered_addr(m));\n-}\n-\n","filename":"src\/hotspot\/share\/cds\/aotCacheAccess.cpp","additions":0,"deletions":7,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -52,1 +52,12 @@\n-  static Method* method_in_aot_code(Method* m) NOT_CDS_RETURN_(nullptr);\n+\n+  static Klass* convert_offset_to_klass(uint offset_from_base_addr) {\n+    Metadata* metadata = (Metadata*)((address)SharedBaseAddress + offset_from_base_addr);\n+    assert(metadata->is_klass(), \"sanity check\");\n+    return (Klass*)metadata;\n+  }\n+\n+  static Method* convert_offset_to_method(uint offset_from_base_addr) {\n+    Metadata* metadata = (Metadata*)((address)SharedBaseAddress + offset_from_base_addr);\n+    assert(metadata->is_method(), \"sanity check\");\n+    return (Method*)metadata;\n+  }\n","filename":"src\/hotspot\/share\/cds\/aotCacheAccess.hpp","additions":12,"deletions":1,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -1998,1 +1998,1 @@\n-      Method* m = (Method*)((address)SharedBaseAddress + entry->method_offset());\n+      Method* m = AOTCacheAccess::convert_offset_to_method(entry->method_offset());\n@@ -2741,1 +2741,1 @@\n-    Method* m = (Method*)((address)SharedBaseAddress + method_offset);\n+    Method* m = AOTCacheAccess::convert_offset_to_method(method_offset);\n@@ -2972,1 +2972,1 @@\n-    Klass* k = (Klass*)((address)SharedBaseAddress + klass_offset);\n+    Klass* k = AOTCacheAccess::convert_offset_to_klass(klass_offset);\n@@ -3457,1 +3457,1 @@\n-#if defined(AARCH64)\n+#if defined(AARCH64) && !defined(ZERO)\n","filename":"src\/hotspot\/share\/code\/aotCodeCache.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"}]}