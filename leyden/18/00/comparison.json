{"files":[{"patch":"@@ -1559,3 +1559,3 @@\n-      st->print_cr(\"  %-30s = \" JLONG_FORMAT_W(4) \" ms (elapsed) \" JLONG_FORMAT_W(4) \"ms (thread) (\" JLONG_FORMAT_W(5) \" events)\", #sub \"::\" #name, \\\n-                   _perf_##sub##_##name##_timer->elapsed_counter_value_ms(), \\\n-                   _perf_##sub##_##name##_timer->thread_counter_value_ms(), \\\n+      st->print_cr(\"  %-50s = \" JLONG_FORMAT_W(6) \"us (elapsed) \" JLONG_FORMAT_W(6) \"us (thread) (\" JLONG_FORMAT_W(5) \" events)\", #sub \"::\" #name, \\\n+                   _perf_##sub##_##name##_timer->elapsed_counter_value_us(), \\\n+                   _perf_##sub##_##name##_timer->thread_counter_value_us( ), \\\n","filename":"src\/hotspot\/share\/c1\/c1_Runtime1.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -389,3 +389,3 @@\n-      log.print_cr(\"  preload:           \" JLONG_FORMAT \"ms (elapsed) \" JLONG_FORMAT \" (thread) \/ \" JLONG_FORMAT \" events\",\n-                   _perf_class_preload_counters->elapsed_counter_value_ms(),\n-                   _perf_class_preload_counters->thread_counter_value_ms(),\n+      log.print_cr(\"  preload:           \" JLONG_FORMAT_W(6) \"us (elapsed) \" JLONG_FORMAT_W(6) \" (thread) \/ \" JLONG_FORMAT_W(5) \" events\",\n+                   _perf_class_preload_counters->elapsed_counter_value_us(),\n+                   _perf_class_preload_counters->thread_counter_value_us(),\n","filename":"src\/hotspot\/share\/cds\/aotLinkedClassBulkLoader.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -150,1 +150,1 @@\n-      st->print_cr(   \"  clinit:               \" JLONG_FORMAT \"ms \/ \" JLONG_FORMAT \" events\",\n+      st->print_cr(   \"  clinit:               \" JLONG_FORMAT_W(6) \"us \/ \" JLONG_FORMAT \" events\",\n@@ -152,4 +152,4 @@\n-      st->print_cr(\"  link methods:         \" JLONG_FORMAT \"ms \/ \" JLONG_FORMAT \" events\",\n-                   Management::ticks_to_ms(_perf_ik_link_methods_time->get_value())   , _perf_ik_link_methods_count->get_value());\n-      st->print_cr(\"  method adapters:      \" JLONG_FORMAT \"ms \/ \" JLONG_FORMAT \" events\",\n-                   Management::ticks_to_ms(_perf_method_adapters_time->get_value())   , _perf_method_adapters_count->get_value());\n+      st->print_cr(\"  link methods:         \" JLONG_FORMAT_W(6) \"us \/ \" JLONG_FORMAT \" events\",\n+                   Management::ticks_to_us(_perf_ik_link_methods_time->get_value())   , _perf_ik_link_methods_count->get_value());\n+      st->print_cr(\"  method adapters:      \" JLONG_FORMAT_W(6) \"us \/ \" JLONG_FORMAT \" events\",\n+                   Management::ticks_to_us(_perf_method_adapters_time->get_value())   , _perf_method_adapters_count->get_value());\n@@ -160,3 +160,3 @@\n-      st->print_cr(\"    invokedynamic:   \" JLONG_FORMAT \"ms (elapsed) \" JLONG_FORMAT \"ms (thread) \/ \" JLONG_FORMAT \" events\",\n-                   _perf_resolve_indy_time->elapsed_counter_value_ms(),\n-                   _perf_resolve_indy_time->thread_counter_value_ms(),\n+      st->print_cr(\"    invokedynamic:   \" JLONG_FORMAT_W(6) \"us (elapsed) \" JLONG_FORMAT_W(6) \"us (thread) \/ \" JLONG_FORMAT_W(5) \" events\",\n+                   _perf_resolve_indy_time->elapsed_counter_value_us(),\n+                   _perf_resolve_indy_time->thread_counter_value_us(),\n@@ -164,3 +164,3 @@\n-      st->print_cr(\"    invokehandle:    \" JLONG_FORMAT \"ms (elapsed) \" JLONG_FORMAT \"ms (thread) \/ \" JLONG_FORMAT \" events\",\n-                   _perf_resolve_invokehandle_time->elapsed_counter_value_ms(),\n-                   _perf_resolve_invokehandle_time->thread_counter_value_ms(),\n+      st->print_cr(\"    invokehandle:    \" JLONG_FORMAT_W(6) \"us (elapsed) \" JLONG_FORMAT_W(6) \"us (thread) \/ \" JLONG_FORMAT_W(5) \" events\",\n+                   _perf_resolve_invokehandle_time->elapsed_counter_value_us(),\n+                   _perf_resolve_invokehandle_time->thread_counter_value_us(),\n@@ -168,3 +168,3 @@\n-      st->print_cr(\"    CP_MethodHandle: \" JLONG_FORMAT \"ms (elapsed) \" JLONG_FORMAT \"ms (thread) \/ \" JLONG_FORMAT \" events\",\n-                   _perf_resolve_mh_time->elapsed_counter_value_ms(),\n-                   _perf_resolve_mh_time->thread_counter_value_ms(),\n+      st->print_cr(\"    CP_MethodHandle: \" JLONG_FORMAT_W(6) \"us (elapsed) \" JLONG_FORMAT_W(6) \"us (thread) \/ \" JLONG_FORMAT_W(5) \" events\",\n+                   _perf_resolve_mh_time->elapsed_counter_value_us(),\n+                   _perf_resolve_mh_time->thread_counter_value_us(),\n@@ -172,3 +172,3 @@\n-      st->print_cr(\"    CP_MethodType:   \" JLONG_FORMAT \"ms (elapsed) \" JLONG_FORMAT \"ms (thread) \/ \" JLONG_FORMAT \" events\",\n-                   _perf_resolve_mt_time->elapsed_counter_value_ms(),\n-                   _perf_resolve_mt_time->thread_counter_value_ms(),\n+      st->print_cr(\"    CP_MethodType:   \" JLONG_FORMAT_W(6) \"us (elapsed) \" JLONG_FORMAT_W(6) \"us (thread) \/ \" JLONG_FORMAT_W(5) \" events\",\n+                   _perf_resolve_mt_time->elapsed_counter_value_us(),\n+                   _perf_resolve_mt_time->thread_counter_value_us(),\n","filename":"src\/hotspot\/share\/classfile\/classLoader.cpp","additions":17,"deletions":17,"binary":false,"changes":34,"status":"modified"},{"patch":"@@ -1805,1 +1805,1 @@\n-    st->print_cr(\"  %-50s = \" JLONG_FORMAT_W(4) \"ms (elapsed) \" JLONG_FORMAT_W(4) \"ms (thread) (\" JLONG_FORMAT_W(5) \" events)\", \\\n+    st->print_cr(\"  %-50s = \" JLONG_FORMAT_W(6) \"us (elapsed) \" JLONG_FORMAT_W(6) \"us (thread) (\" JLONG_FORMAT_W(5) \" events)\", \\\n@@ -1807,2 +1807,2 @@\n-                 _perf_##sub##_##name##_timer->elapsed_counter_value_ms(), \\\n-                 _perf_##sub##_##name##_timer->thread_counter_value_ms(), \\\n+                 _perf_##sub##_##name##_timer->elapsed_counter_value_us(), \\\n+                 _perf_##sub##_##name##_timer->thread_counter_value_us(), \\\n","filename":"src\/hotspot\/share\/interpreter\/interpreterRuntime.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2010,3 +2010,3 @@\n-    st->print_cr(\"  %-30s = \" JLONG_FORMAT_W(4) \"ms (elapsed) \" JLONG_FORMAT_W(4) \"ms (thread) (\" JLONG_FORMAT_W(5) \" events)\", #sub \"::\" #name, \\\n-                 _perf_##sub##_##name##_timer->elapsed_counter_value_ms(), \\\n-                 _perf_##sub##_##name##_timer->thread_counter_value_ms(), \\\n+    st->print_cr(\"  %-50s = \" JLONG_FORMAT_W(6) \"us (elapsed) \" JLONG_FORMAT_W(6) \"us (thread) (\" JLONG_FORMAT_W(5) \" events)\", #sub \"::\" #name, \\\n+                 _perf_##sub##_##name##_timer->elapsed_counter_value_us(), \\\n+                 _perf_##sub##_##name##_timer->thread_counter_value_us(), \\\n","filename":"src\/hotspot\/share\/opto\/runtime.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -4234,1 +4234,1 @@\n-    st->print_cr(\"  %-40s = \" JLONG_FORMAT_W(4) \"ms (elapsed) \" JLONG_FORMAT_W(4) \"ms (thread) (\" JLONG_FORMAT_W(5) \" events)\", \\\n+    st->print_cr(\"  %-40s = \" JLONG_FORMAT_W(6) \"us (elapsed) \" JLONG_FORMAT_W(6) \"us (thread) (\" JLONG_FORMAT_W(5) \" events)\", \\\n@@ -4236,2 +4236,2 @@\n-                 _perf_##name##_timer->elapsed_counter_value_ms(),        \\\n-                 _perf_##name##_timer->thread_counter_value_ms(), count); \\\n+                 _perf_##name##_timer->elapsed_counter_value_us(),        \\\n+                 _perf_##name##_timer->thread_counter_value_us(), count); \\\n","filename":"src\/hotspot\/share\/prims\/jvm.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -1561,3 +1561,3 @@\n-    st->print_cr(\"  %-40s = \" JLONG_FORMAT_W(4) \"ms (elapsed) \" JLONG_FORMAT_W(4) \"ms (thread) (\" JLONG_FORMAT_W(5) \" events)\", #name, \\\n-                 _perf_##name##_timer->elapsed_counter_value_ms(), \\\n-                 _perf_##name##_timer->thread_counter_value_ms(), \\\n+    st->print_cr(\"  %-40s = \" JLONG_FORMAT_W(6) \"us (elapsed) \" JLONG_FORMAT_W(6) \"us (thread) (\" JLONG_FORMAT_W(5) \" events)\", #name, \\\n+                 _perf_##name##_timer->elapsed_counter_value_us(), \\\n+                 _perf_##name##_timer->thread_counter_value_us(), \\\n","filename":"src\/hotspot\/share\/prims\/methodHandles.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2976,3 +2976,3 @@\n-    st->print_cr(\"  %-50s = \" JLONG_FORMAT_W(4) \"ms (elapsed) \" JLONG_FORMAT_W(4) \"ms (thread) (\" JLONG_FORMAT_W(5) \" events)\", #sub \"::\" #name, \\\n-                 _perf_##sub##_##name##_timer->elapsed_counter_value_ms(), \\\n-                 _perf_##sub##_##name##_timer->thread_counter_value_ms(), \\\n+    st->print_cr(\"  %-50s = \" JLONG_FORMAT_W(6) \"us (elapsed) \" JLONG_FORMAT_W(6) \"us (thread) (\" JLONG_FORMAT_W(5) \" events)\", #sub \"::\" #name, \\\n+                 _perf_##sub##_##name##_timer->elapsed_counter_value_us(), \\\n+                 _perf_##sub##_##name##_timer->thread_counter_value_us(), \\\n","filename":"src\/hotspot\/share\/runtime\/deoptimization.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -456,1 +456,1 @@\n-    st->print_cr(\"  %3d: %s%40s = \" JLONG_FORMAT_W(5) \"ms (\" JLONG_FORMAT_W(5) \"ms) \/ \" JLONG_FORMAT_W(9) \" events\",\n+    st->print_cr(\"  %3d: %s%40s = \" JLONG_FORMAT_W(5) \"us (\" JLONG_FORMAT_W(5) \"us) \/ \" JLONG_FORMAT_W(9) \" events\",\n@@ -458,2 +458,2 @@\n-                 Management::ticks_to_ms(_perf_lock_hold_time[idx]->get_value()),\n-                 Management::ticks_to_ms(_perf_lock_wait_time[idx]->get_value()),\n+                 Management::ticks_to_us(_perf_lock_hold_time[idx]->get_value()),\n+                 Management::ticks_to_us(_perf_lock_wait_time[idx]->get_value()),\n@@ -481,1 +481,1 @@\n-    st->print_cr(\"MutexLocker: Total: %d named locks (%d unique names); hold = \" JLONG_FORMAT \"ms (wait = \" JLONG_FORMAT \"ms) \/ \" JLONG_FORMAT \" events for thread \\\"main\\\"\",\n+    st->print_cr(\"MutexLocker: Total: %d named locks (%d unique names); hold = \" JLONG_FORMAT \"us (wait = \" JLONG_FORMAT \"us) \/ \" JLONG_FORMAT \" events for thread \\\"main\\\"\",\n@@ -483,2 +483,2 @@\n-                 Management::ticks_to_ms(total_hold_time),\n-                 Management::ticks_to_ms(total_wait_time),\n+                 Management::ticks_to_us(total_hold_time),\n+                 Management::ticks_to_us(total_wait_time),\n","filename":"src\/hotspot\/share\/runtime\/mutexLocker.cpp","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -646,0 +646,1 @@\n+  inline jlong elapsed_counter_value_us() const;\n@@ -654,0 +655,1 @@\n+  inline jlong thread_counter_value_us() const;\n","filename":"src\/hotspot\/share\/runtime\/perfData.hpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -62,0 +62,8 @@\n+inline jlong PerfTickCounters::elapsed_counter_value_us() const {\n+  return Management::ticks_to_us(_elapsed_counter->get_value());\n+}\n+\n+inline jlong PerfTickCounters::thread_counter_value_us() const {\n+  return Management::ticks_to_us(_thread_counter->get_value());\n+}\n+\n","filename":"src\/hotspot\/share\/runtime\/perfData.inline.hpp","additions":8,"deletions":0,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -189,3 +189,3 @@\n-    st->print_cr(\"  resolve_opt_virtual_call: \" JLONG_FORMAT_W(5) \"ms (elapsed) \" JLONG_FORMAT_W(5) \"ms (thread) \/ %5d events\",\n-                 _perf_resolve_opt_virtual_total_time->elapsed_counter_value_ms(),\n-                 _perf_resolve_opt_virtual_total_time->thread_counter_value_ms(),\n+    st->print_cr(\"  resolve_opt_virtual_call: \" JLONG_FORMAT_W(6) \"us (elapsed) \" JLONG_FORMAT_W(6) \"us (thread) \/ %5d events\",\n+                 _perf_resolve_opt_virtual_total_time->elapsed_counter_value_us(),\n+                 _perf_resolve_opt_virtual_total_time->thread_counter_value_us(),\n@@ -193,3 +193,3 @@\n-    st->print_cr(\"  resolve_virtual_call:     \" JLONG_FORMAT_W(5) \"ms (elapsed) \" JLONG_FORMAT_W(5) \"ms (thread) \/ %5d events\",\n-                 _perf_resolve_virtual_total_time->elapsed_counter_value_ms(),\n-                 _perf_resolve_virtual_total_time->thread_counter_value_ms(),\n+    st->print_cr(\"  resolve_virtual_call:     \" JLONG_FORMAT_W(6) \"us (elapsed) \" JLONG_FORMAT_W(6) \"us (thread) \/ %5d events\",\n+                 _perf_resolve_virtual_total_time->elapsed_counter_value_us(),\n+                 _perf_resolve_virtual_total_time->thread_counter_value_us(),\n@@ -197,3 +197,3 @@\n-    st->print_cr(\"  resolve_static_call:      \" JLONG_FORMAT_W(5) \"ms (elapsed) \" JLONG_FORMAT_W(5) \"ms (thread) \/ %5d events\",\n-                 _perf_resolve_static_total_time->elapsed_counter_value_ms(),\n-                 _perf_resolve_static_total_time->thread_counter_value_ms(),\n+    st->print_cr(\"  resolve_static_call:      \" JLONG_FORMAT_W(6) \"us (elapsed) \" JLONG_FORMAT_W(6) \"us (thread) \/ %5d events\",\n+                 _perf_resolve_static_total_time->elapsed_counter_value_us(),\n+                 _perf_resolve_static_total_time->thread_counter_value_us(),\n@@ -201,3 +201,3 @@\n-    st->print_cr(\"  handle_wrong_method:      \" JLONG_FORMAT_W(5) \"ms (elapsed) \" JLONG_FORMAT_W(5) \"ms (thread) \/ %5d events\",\n-                 _perf_handle_wrong_method_total_time->elapsed_counter_value_ms(),\n-                 _perf_handle_wrong_method_total_time->thread_counter_value_ms(),\n+    st->print_cr(\"  handle_wrong_method:      \" JLONG_FORMAT_W(6) \"us (elapsed) \" JLONG_FORMAT_W(6) \"us (thread) \/ %5d events\",\n+                 _perf_handle_wrong_method_total_time->elapsed_counter_value_us(),\n+                 _perf_handle_wrong_method_total_time->thread_counter_value_us(),\n@@ -205,3 +205,3 @@\n-    st->print_cr(\"  ic_miss:                  \" JLONG_FORMAT_W(5) \"ms (elapsed) \" JLONG_FORMAT_W(5) \"ms (thread) \/ %5d events\",\n-                 _perf_ic_miss_total_time->elapsed_counter_value_ms(),\n-                 _perf_ic_miss_total_time->thread_counter_value_ms(),\n+    st->print_cr(\"  ic_miss:                  \" JLONG_FORMAT_W(6) \"us (elapsed) \" JLONG_FORMAT_W(6) \"us (thread) \/ %5d events\",\n+                 _perf_ic_miss_total_time->elapsed_counter_value_us(),\n+                 _perf_ic_miss_total_time->thread_counter_value_us(),\n@@ -210,1 +210,1 @@\n-    jlong total_elapsed_time_ms = Management::ticks_to_ms(_perf_resolve_opt_virtual_total_time->elapsed_counter_value() +\n+    jlong total_elapsed_time_us = Management::ticks_to_us(_perf_resolve_opt_virtual_total_time->elapsed_counter_value() +\n@@ -215,1 +215,1 @@\n-    jlong total_thread_time_ms = Management::ticks_to_ms(_perf_resolve_opt_virtual_total_time->thread_counter_value() +\n+    jlong total_thread_time_us = Management::ticks_to_us(_perf_resolve_opt_virtual_total_time->thread_counter_value() +\n@@ -220,1 +220,1 @@\n-    st->print_cr(\"Total:                      \" JLONG_FORMAT_W(5) \"ms (elapsed) \" JLONG_FORMAT_W(5) \"ms (thread)\", total_elapsed_time_ms, total_thread_time_ms);\n+    st->print_cr(\"Total:                      \" JLONG_FORMAT_W(5) \"us (elapsed) \" JLONG_FORMAT_W(5) \"us (thread)\", total_elapsed_time_us, total_thread_time_us);\n","filename":"src\/hotspot\/share\/runtime\/sharedRuntime.cpp","additions":18,"deletions":18,"binary":false,"changes":36,"status":"modified"},{"patch":"@@ -630,1 +630,1 @@\n-    st->print_cr(\"  %-40s = \" JLONG_FORMAT_W(4) \"ms (\" JLONG_FORMAT_W(5) \" events)\", #name, _perf_##name##_timer->elapsed_counter_value_ms(), count); \\\n+    st->print_cr(\"  %-40s = \" JLONG_FORMAT_W(6) \"us (\" JLONG_FORMAT_W(5) \" events)\", #name, _perf_##name##_timer->elapsed_counter_value_us(), count); \\\n","filename":"src\/hotspot\/share\/runtime\/vmThread.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2097,0 +2097,6 @@\n+jlong Management::ticks_to_us(jlong ticks) {\n+  assert(os::elapsed_frequency() > 0, \"Must be non-zero\");\n+  return (jlong)(((double)ticks \/ (double)os::elapsed_frequency())\n+                 * (double)1000000.0);\n+}\n+\n","filename":"src\/hotspot\/share\/services\/management.cpp","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -66,0 +66,1 @@\n+  static jlong ticks_to_us(jlong ticks) NOT_MANAGEMENT_RETURN_(0L);\n","filename":"src\/hotspot\/share\/services\/management.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"}]}