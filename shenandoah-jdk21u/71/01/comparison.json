{"files":[{"patch":"@@ -31,1 +31,1 @@\n-DEFAULT_VERSION_UPDATE=4\n+DEFAULT_VERSION_UPDATE=5\n@@ -36,1 +36,1 @@\n-DEFAULT_VERSION_DATE=2024-07-16\n+DEFAULT_VERSION_DATE=2024-10-15\n","filename":"make\/conf\/version-numbers.conf","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -711,1 +711,1 @@\n-\t\t\t<territory type=\"BW\">â€®ðž¤„ðž¤®ðž¤¼ðž¤§ðž¤µðž¤±ðž¤¢ðž¥„ðž¤²ðž¤¢<\/territory>\n+\t\t\t<territory type=\"BW\">ðž¤„ðž¤®ðž¤¼ðž¤§ðž¤µðž¤±ðž¤¢ðž¥„ðž¤²ðž¤¢<\/territory>\n@@ -8281,1 +8281,1 @@\n-\t\t\t\t<exemplarCity>â€®ðž¤‹ðž¤¼ðž¥†ðž¤®ðž¤³ðž¤®ðž¤ªðž¤¼ðž¤®ðž¥…ðž¤ªðž¤¥ðž¤­ðž¥…ðž¤¼<\/exemplarCity>\n+\t\t\t\t<exemplarCity>ðž¤‹ðž¤¼ðž¥†ðž¤®ðž¤³ðž¤®ðž¤ªðž¤¼ðž¤®ðž¥…ðž¤ªðž¤¥ðž¤­ðž¥…ðž¤¼<\/exemplarCity>\n","filename":"make\/data\/cldr\/common\/main\/ff_Adlm.xml","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -47,1 +47,1 @@\n-      curl -O --fail $url\n+      curl -OL --fail $url\n","filename":"make\/devkit\/createJMHBundle.sh","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -160,0 +160,1 @@\n+    DISABLED_WARNINGS_gcc_handshake.cpp := stringop-overflow, \\\n@@ -161,0 +162,2 @@\n+    DISABLED_WARNINGS_gcc_jvmciCodeInstaller.cpp := stringop-overflow, \\\n+    DISABLED_WARNINGS_gcc_jvmtiTagMap.cpp := stringop-overflow, \\\n@@ -162,0 +165,2 @@\n+    DISABLED_WARNINGS_gcc_shenandoahLock.cpp := stringop-overflow, \\\n+    DISABLED_WARNINGS_gcc_synchronizer.cpp := stringop-overflow, \\\n","filename":"make\/hotspot\/lib\/CompileJvm.gmk","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -248,0 +248,7 @@\n+        DISABLED_WARNINGS_clang_awt_Taskbar.c := parentheses, \\\n+        DISABLED_WARNINGS_clang_gtk2_interface.c := parentheses, \\\n+        DISABLED_WARNINGS_clang_gtk3_interface.c := parentheses, \\\n+        DISABLED_WARNINGS_clang_OGLBufImgOps.c := format-nonliteral, \\\n+        DISABLED_WARNINGS_clang_OGLPaints.c := format-nonliteral, \\\n+        DISABLED_WARNINGS_clang_screencast_pipewire.c := format-nonliteral, \\\n+        DISABLED_WARNINGS_clang_sun_awt_X11_GtkFileDialogPeer.c := parentheses, \\\n@@ -468,1 +475,4 @@\n-   LIBFONTMANAGER_EXCLUDE_FILES += libharfbuzz\/hb-ft.cc\n+   # hb-subset and hb-style APIs are not needed, excluded to cut on compilation time.\n+   LIBFONTMANAGER_EXCLUDE_FILES += hb-ft.cc hb-subset-cff-common.cc \\\n+       hb-subset-cff1.cc hb-subset-cff2.cc hb-subset-input.cc hb-subset-plan.cc \\\n+       hb-subset.cc hb-subset-instancer-solver.cc gsubgpos-context.cc hb-style.cc\n","filename":"make\/modules\/java.desktop\/lib\/Awt2dLibraries.gmk","additions":11,"deletions":1,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -36,0 +36,1 @@\n+    DISABLED_WARNINGS_clang := undef, \\\n","filename":"make\/modules\/java.security.jgss\/Lib.gmk","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2015, 2022, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2015, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -64,0 +64,1 @@\n+    DISABLED_WARNINGS_clang_ps_core.c := pointer-arith, \\\n","filename":"make\/modules\/jdk.hotspot.agent\/Lib.gmk","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2018, 2022, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2018, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -68,0 +68,2 @@\n+    DISABLED_WARNINGS_clang_LinuxPackage.c := format-nonliteral, \\\n+    DISABLED_WARNINGS_clang_JvmLauncherLib.c := format-nonliteral, \\\n@@ -106,0 +108,2 @@\n+      DISABLED_WARNINGS_clang_JvmLauncherLib.c := format-nonliteral, \\\n+      DISABLED_WARNINGS_clang_tstrings.cpp := format-nonliteral, \\\n","filename":"make\/modules\/jdk.jpackage\/Lib.gmk","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2015, 2022, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2015, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -47,0 +47,1 @@\n+    DISABLED_WARNINGS_clang_UnixOperatingSystem.c := format-nonliteral, \\\n","filename":"make\/modules\/jdk.management\/Lib.gmk","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -663,1 +663,1 @@\n-            out.write(\"  jfrNativeEventSetting bits[NUMBER_OF_EVENTS];\");\n+            out.write(\"  jfrNativeEventSetting bits[NUMBER_OF_EVENTS + NUMBER_OF_RESERVED_EVENTS];\");\n","filename":"make\/src\/classes\/build\/tools\/jfr\/GenerateJfrFiles.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -83,0 +83,4 @@\n+# Most likely you want to select a specific test from test\/failure_handler\/test\n+# and manually inspect the results. This target does not actually verify\n+# anything about the failure_handler's output or even if it ran at all.\n+#\n","filename":"make\/test\/BuildFailureHandler.gmk","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -697,0 +697,5 @@\n+\/\/ Class for all non_special pointer registers (excluding rfp)\n+reg_class no_special_no_rfp_ptr_reg %{\n+  return _NO_SPECIAL_NO_RFP_PTR_REG_mask;\n+%}\n+\n@@ -1128,0 +1133,1 @@\n+extern RegMask _NO_SPECIAL_NO_RFP_PTR_REG_mask;\n@@ -1216,0 +1222,1 @@\n+  RegMask _NO_SPECIAL_NO_RFP_PTR_REG_mask;\n@@ -1252,0 +1259,3 @@\n+\n+    _NO_SPECIAL_NO_RFP_PTR_REG_mask = _NO_SPECIAL_PTR_REG_mask;\n+    _NO_SPECIAL_NO_RFP_PTR_REG_mask.Remove(OptoReg::as_OptoReg(r29->as_VMReg()));\n@@ -1724,2 +1734,2 @@\n-    st->print(\"ldr zr, [lr]\\n\\t\");\n-    st->print(\"pacia  lr, rfp\\n\\t\");\n+    st->print(\"ldr  zr, [lr]\\n\\t\");\n+    st->print(\"paciaz\\n\\t\");\n@@ -1854,2 +1864,2 @@\n-    st->print(\"autia lr, rfp\\n\\t\");\n-    st->print(\"ldr zr, [lr]\\n\\t\");\n+    st->print(\"autiaz\\n\\t\");\n+    st->print(\"ldr  zr, [lr]\\n\\t\");\n@@ -4888,0 +4898,12 @@\n+\/\/ This operand is not allowed to use rfp even if\n+\/\/ rfp is not used to hold the frame pointer.\n+operand iRegPNoSpNoRfp()\n+%{\n+  constraint(ALLOC_IN_RC(no_special_no_rfp_ptr_reg));\n+  match(RegP);\n+  match(iRegPNoSp);\n+  op_cost(0);\n+  format %{ %}\n+  interface(REG_INTER);\n+%}\n+\n@@ -16565,1 +16587,3 @@\n-instruct TailCalljmpInd(iRegPNoSp jump_target, inline_cache_RegP method_ptr)\n+\/\/ Don't use rfp for 'jump_target' because a MachEpilogNode has already been\n+\/\/ emitted just above the TailCall which has reset rfp to the caller state.\n+instruct TailCalljmpInd(iRegPNoSpNoRfp jump_target, inline_cache_RegP method_ptr)\n@@ -16578,1 +16602,1 @@\n-instruct TailjmpInd(iRegPNoSp jump_target, iRegP_R0 ex_oop)\n+instruct TailjmpInd(iRegPNoSpNoRfp jump_target, iRegP_R0 ex_oop)\n","filename":"src\/hotspot\/cpu\/aarch64\/aarch64.ad","additions":30,"deletions":6,"binary":false,"changes":36,"status":"modified"},{"patch":"@@ -576,1 +576,1 @@\n-          assert(ext().shift() <= 0 || ext().shift() == (int)size, \"bad shift\");\n+          guarantee(ext().shift() <= 0 || ext().shift() == (int)size, \"bad shift\");\n","filename":"src\/hotspot\/cpu\/aarch64\/assembler_aarch64.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -388,1 +388,1 @@\n-    __ authenticate_return_address(exception_pc, rscratch1);\n+    __ authenticate_return_address(exception_pc);\n@@ -437,1 +437,1 @@\n-  __ protect_return_address(exception_pc, rscratch1);\n+  __ protect_return_address(exception_pc);\n@@ -453,1 +453,1 @@\n-  __ protect_return_address(r0, rscratch1);\n+  __ protect_return_address(r0);\n","filename":"src\/hotspot\/cpu\/aarch64\/c1_Runtime1_aarch64.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -65,1 +65,1 @@\n-  address sender_pc = (address) *(sender_sp-1);\n+  address sender_pc = ContinuationHelper::return_address_at(sender_sp - 1);\n@@ -220,1 +220,1 @@\n-    const int fsize = ContinuationHelper::InterpretedFrame::frame_bottom(hf) - hf.unextended_sp() - overlap;\n+    const int fsize = (int)(ContinuationHelper::InterpretedFrame::frame_bottom(hf) - hf.unextended_sp() - overlap);\n","filename":"src\/hotspot\/cpu\/aarch64\/continuationFreezeThaw_aarch64.inline.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -71,0 +71,11 @@\n+#define CPU_OVERRIDES_RETURN_ADDRESS_ACCESSORS\n+\n+inline address ContinuationHelper::return_address_at(intptr_t* sp) {\n+  return pauth_strip_verifiable(*(address*)sp);\n+}\n+\n+inline void ContinuationHelper::patch_return_address_at(intptr_t* sp,\n+                                                        address pc) {\n+  *(address*)sp = pauth_sign_return_address(pc);\n+}\n+\n@@ -83,1 +94,2 @@\n-  address pc = *(address*)(sp - frame::sender_sp_ret_address_offset());\n+  address pc = ContinuationHelper::return_address_at(\n+                 sp - frame::sender_sp_ret_address_offset());\n@@ -111,0 +123,1 @@\n+  \/\/ Always used in assertions. Just strip it.\n@@ -112,1 +125,1 @@\n-  return *pc_addr;\n+  return pauth_strip_pointer(*pc_addr);\n@@ -117,1 +130,1 @@\n-  *pc_addr = pc;\n+  *pc_addr = pauth_sign_return_address(pc);\n","filename":"src\/hotspot\/cpu\/aarch64\/continuationHelper_aarch64.inline.hpp","additions":16,"deletions":3,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -142,2 +142,1 @@\n-      sender_pc = pauth_strip_verifiable((address) this->fp()[return_addr_offset], (address)saved_fp);\n-\n+      sender_pc = pauth_strip_verifiable((address) this->fp()[return_addr_offset]);\n@@ -161,1 +160,3 @@\n-      sender_pc = pauth_strip_verifiable((address) *(sender_sp-1), (address)saved_fp);\n+      \/\/ Note: PAC authentication may fail in case broken frame is passed in.\n+      \/\/ Just strip it for now.\n+      sender_pc = pauth_strip_pointer((address) *(sender_sp - 1));\n@@ -279,3 +280,2 @@\n-  address signing_sp = (((address*) sp())[-2]);\n-  address signed_pc = pauth_sign_return_address(pc, (address)signing_sp);\n-  address pc_old = pauth_strip_verifiable(*pc_addr, (address)signing_sp);\n+  address signed_pc = pauth_sign_return_address(pc);\n+  address pc_old = pauth_strip_verifiable(*pc_addr);\n@@ -475,2 +475,3 @@\n-  \/\/ For ROP protection, Interpreter will have signed the sender_pc, but there is no requirement to authenticate it here.\n-  address sender_pc = pauth_strip_verifiable(sender_pc_maybe_signed(), (address)link());\n+  \/\/ For ROP protection, Interpreter will have signed the sender_pc,\n+  \/\/ but there is no requirement to authenticate it here.\n+  address sender_pc = pauth_strip_verifiable(sender_pc_maybe_signed());\n","filename":"src\/hotspot\/cpu\/aarch64\/frame_aarch64.cpp","additions":9,"deletions":8,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -155,1 +155,4 @@\n-inline frame::frame(intptr_t* sp) : frame(sp, sp, *(intptr_t**)(sp - frame::sender_sp_offset), *(address*)(sp - 1)) {}\n+inline frame::frame(intptr_t* sp)\n+  : frame(sp, sp,\n+          *(intptr_t**)(sp - frame::sender_sp_offset),\n+          pauth_strip_verifiable(*(address*)(sp - 1))) {}\n@@ -236,1 +239,1 @@\n-    ? sender_sp() - sp()\n+    ? pointer_delta_as_int(sender_sp(), sp())\n@@ -242,1 +245,1 @@\n-  return (cb()->as_compiled_method()->method()->num_stack_arg_slots() * VMRegImpl::stack_slot_size) >> LogBytesPerWord;\n+  return (cb()->as_nmethod()->num_stack_arg_slots() * VMRegImpl::stack_slot_size) >> LogBytesPerWord;\n@@ -419,3 +422,4 @@\n-  \/\/ the return_address is always the word on the stack\n-  \/\/ For ROP protection, C1\/C2 will have signed the sender_pc, but there is no requirement to authenticate it here.\n-  address sender_pc = pauth_strip_verifiable((address) *(l_sender_sp-1), (address) *(l_sender_sp-2));\n+  \/\/ The return_address is always the word on the stack.\n+  \/\/ For ROP protection, C1\/C2 will have signed the sender_pc,\n+  \/\/ but there is no requirement to authenticate it here.\n+  address sender_pc = pauth_strip_verifiable((address) *(l_sender_sp - 1));\n","filename":"src\/hotspot\/cpu\/aarch64\/frame_aarch64.inline.hpp","additions":10,"deletions":6,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -41,1 +41,1 @@\n-\/\/ the bit layout of XForwardingEntry or Partial array entry (see XMarkStackEntry) in mark stack\n+\/\/ the bit layout of ZForwardingEntry or Partial array entry (see ZMarkStackEntry) in mark stack\n","filename":"src\/hotspot\/cpu\/aarch64\/gc\/z\/zAddress_aarch64.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1999, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1999, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -75,0 +75,2 @@\n+#define USE_TRAMPOLINE_STUB_FIX_OWNER\n+\n","filename":"src\/hotspot\/cpu\/aarch64\/globalDefinitions_aarch64.hpp","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1200,0 +1200,104 @@\n+\/\/ Look up the method for a megamorphic invokeinterface call in a single pass over itable:\n+\/\/ - check recv_klass (actual object class) is a subtype of resolved_klass from CompiledICHolder\n+\/\/ - find a holder_klass (class that implements the method) vtable offset and get the method from vtable by index\n+\/\/ The target method is determined by <holder_klass, itable_index>.\n+\/\/ The receiver klass is in recv_klass.\n+\/\/ On success, the result will be in method_result, and execution falls through.\n+\/\/ On failure, execution transfers to the given label.\n+void MacroAssembler::lookup_interface_method_stub(Register recv_klass,\n+                                                  Register holder_klass,\n+                                                  Register resolved_klass,\n+                                                  Register method_result,\n+                                                  Register temp_itbl_klass,\n+                                                  Register scan_temp,\n+                                                  int itable_index,\n+                                                  Label& L_no_such_interface) {\n+  \/\/ 'method_result' is only used as output register at the very end of this method.\n+  \/\/ Until then we can reuse it as 'holder_offset'.\n+  Register holder_offset = method_result;\n+  assert_different_registers(resolved_klass, recv_klass, holder_klass, temp_itbl_klass, scan_temp, holder_offset);\n+\n+  int vtable_start_offset = in_bytes(Klass::vtable_start_offset());\n+  int itable_offset_entry_size = itableOffsetEntry::size() * wordSize;\n+  int ioffset = in_bytes(itableOffsetEntry::interface_offset());\n+  int ooffset = in_bytes(itableOffsetEntry::offset_offset());\n+\n+  Label L_loop_search_resolved_entry, L_resolved_found, L_holder_found;\n+\n+  ldrw(scan_temp, Address(recv_klass, Klass::vtable_length_offset()));\n+  add(recv_klass, recv_klass, vtable_start_offset + ioffset);\n+  \/\/ itableOffsetEntry[] itable = recv_klass + Klass::vtable_start_offset() + sizeof(vtableEntry) * recv_klass->_vtable_len;\n+  \/\/ temp_itbl_klass = itable[0]._interface;\n+  int vtblEntrySize = vtableEntry::size_in_bytes();\n+  assert(vtblEntrySize == wordSize, \"ldr lsl shift amount must be 3\");\n+  ldr(temp_itbl_klass, Address(recv_klass, scan_temp, Address::lsl(exact_log2(vtblEntrySize))));\n+  mov(holder_offset, zr);\n+  \/\/ scan_temp = &(itable[0]._interface)\n+  lea(scan_temp, Address(recv_klass, scan_temp, Address::lsl(exact_log2(vtblEntrySize))));\n+\n+  \/\/ Initial checks:\n+  \/\/   - if (holder_klass != resolved_klass), go to \"scan for resolved\"\n+  \/\/   - if (itable[0] == holder_klass), shortcut to \"holder found\"\n+  \/\/   - if (itable[0] == 0), no such interface\n+  cmp(resolved_klass, holder_klass);\n+  br(Assembler::NE, L_loop_search_resolved_entry);\n+  cmp(holder_klass, temp_itbl_klass);\n+  br(Assembler::EQ, L_holder_found);\n+  cbz(temp_itbl_klass, L_no_such_interface);\n+\n+  \/\/ Loop: Look for holder_klass record in itable\n+  \/\/   do {\n+  \/\/     temp_itbl_klass = *(scan_temp += itable_offset_entry_size);\n+  \/\/     if (temp_itbl_klass == holder_klass) {\n+  \/\/       goto L_holder_found; \/\/ Found!\n+  \/\/     }\n+  \/\/   } while (temp_itbl_klass != 0);\n+  \/\/   goto L_no_such_interface \/\/ Not found.\n+  Label L_search_holder;\n+  bind(L_search_holder);\n+    ldr(temp_itbl_klass, Address(pre(scan_temp, itable_offset_entry_size)));\n+    cmp(holder_klass, temp_itbl_klass);\n+    br(Assembler::EQ, L_holder_found);\n+    cbnz(temp_itbl_klass, L_search_holder);\n+\n+  b(L_no_such_interface);\n+\n+  \/\/ Loop: Look for resolved_class record in itable\n+  \/\/   while (true) {\n+  \/\/     temp_itbl_klass = *(scan_temp += itable_offset_entry_size);\n+  \/\/     if (temp_itbl_klass == 0) {\n+  \/\/       goto L_no_such_interface;\n+  \/\/     }\n+  \/\/     if (temp_itbl_klass == resolved_klass) {\n+  \/\/        goto L_resolved_found;  \/\/ Found!\n+  \/\/     }\n+  \/\/     if (temp_itbl_klass == holder_klass) {\n+  \/\/        holder_offset = scan_temp;\n+  \/\/     }\n+  \/\/   }\n+  \/\/\n+  Label L_loop_search_resolved;\n+  bind(L_loop_search_resolved);\n+    ldr(temp_itbl_klass, Address(pre(scan_temp, itable_offset_entry_size)));\n+  bind(L_loop_search_resolved_entry);\n+    cbz(temp_itbl_klass, L_no_such_interface);\n+    cmp(resolved_klass, temp_itbl_klass);\n+    br(Assembler::EQ, L_resolved_found);\n+    cmp(holder_klass, temp_itbl_klass);\n+    br(Assembler::NE, L_loop_search_resolved);\n+    mov(holder_offset, scan_temp);\n+    b(L_loop_search_resolved);\n+\n+  \/\/ See if we already have a holder klass. If not, go and scan for it.\n+  bind(L_resolved_found);\n+  cbz(holder_offset, L_search_holder);\n+  mov(scan_temp, holder_offset);\n+\n+  \/\/ Finally, scan_temp contains holder_klass vtable offset\n+  bind(L_holder_found);\n+  ldrw(method_result, Address(scan_temp, ooffset - ioffset));\n+  add(recv_klass, recv_klass, itable_index * wordSize + in_bytes(itableMethodEntry::method_offset())\n+    - vtable_start_offset - ioffset); \/\/ substract offsets to restore the original value of recv_klass\n+  ldr(method_result, Address(recv_klass, method_result, Address::uxtw(0)));\n+}\n+\n@@ -5981,1 +6085,1 @@\n-\/\/ Uses the FP as the modifier.\n+\/\/ Uses value zero as the modifier.\n@@ -5986,4 +6090,1 @@\n-    \/\/ The standard convention for C code is to use paciasp, which uses SP as the modifier. This\n-    \/\/ works because in C code, FP and SP match on function entry. In the JDK, SP and FP may not\n-    \/\/ match, so instead explicitly use the FP.\n-    pacia(lr, rfp);\n+    paciaz();\n@@ -5995,2 +6096,1 @@\n-\/\/ Uses the FP from the start of the function as the modifier - which is stored at the address of\n-\/\/ the current FP.\n+\/\/ Uses value zero as the modifier.\n@@ -5998,1 +6098,1 @@\n-void MacroAssembler::protect_return_address(Register return_reg, Register temp_reg) {\n+void MacroAssembler::protect_return_address(Register return_reg) {\n@@ -6000,1 +6100,0 @@\n-    assert(PreserveFramePointer, \"PreserveFramePointer must be set for ROP protection\");\n@@ -6002,2 +6101,1 @@\n-    ldr(temp_reg, Address(rfp));\n-    pacia(return_reg, temp_reg);\n+    paciza(return_reg);\n@@ -6008,0 +6106,1 @@\n+\/\/ Uses value zero as the modifier.\n@@ -6009,1 +6108,1 @@\n-void MacroAssembler::authenticate_return_address(Register return_reg) {\n+void MacroAssembler::authenticate_return_address() {\n@@ -6011,2 +6110,2 @@\n-    autia(return_reg, rfp);\n-    check_return_address(return_reg);\n+    autiaz();\n+    check_return_address();\n@@ -6018,2 +6117,1 @@\n-\/\/ Uses the FP from the start of the function as the modifier - which is stored at the address of\n-\/\/ the current FP.\n+\/\/ Uses value zero as the modifier.\n@@ -6021,1 +6119,1 @@\n-void MacroAssembler::authenticate_return_address(Register return_reg, Register temp_reg) {\n+void MacroAssembler::authenticate_return_address(Register return_reg) {\n@@ -6023,3 +6121,1 @@\n-    assert(PreserveFramePointer, \"PreserveFramePointer must be set for ROP protection\");\n-    ldr(temp_reg, Address(rfp));\n-    autia(return_reg, temp_reg);\n+    autiza(return_reg);\n","filename":"src\/hotspot\/cpu\/aarch64\/macroAssembler_aarch64.cpp","additions":116,"deletions":20,"binary":false,"changes":136,"status":"modified"},{"patch":"@@ -719,3 +719,3 @@\n-  void protect_return_address(Register return_reg, Register temp_reg);\n-  void authenticate_return_address(Register return_reg = lr);\n-  void authenticate_return_address(Register return_reg, Register temp_reg);\n+  void protect_return_address(Register return_reg);\n+  void authenticate_return_address();\n+  void authenticate_return_address(Register return_reg);\n@@ -945,0 +945,9 @@\n+  void lookup_interface_method_stub(Register recv_klass,\n+                                    Register holder_klass,\n+                                    Register resolved_klass,\n+                                    Register method_result,\n+                                    Register temp_reg,\n+                                    Register temp_reg2,\n+                                    int itable_index,\n+                                    Label& L_no_such_interface);\n+\n","filename":"src\/hotspot\/cpu\/aarch64\/macroAssembler_aarch64.hpp","additions":12,"deletions":3,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,1 +31,0 @@\n-#include \"memory\/resourceArea.hpp\"\n@@ -162,2 +161,7 @@\n-  address addr = (address)this;\n-  address destination = instruction_address() + displacement();\n+  address addr = instruction_address();\n+  address destination = addr + displacement();\n+\n+  \/\/ Performance optimization: no need to call find_blob() if it is a self-call\n+  if (destination == addr) {\n+    return destination;\n+  }\n@@ -167,2 +171,2 @@\n-  assert(cb && cb->is_nmethod(), \"sanity\");\n-  nmethod *nm = (nmethod *)cb;\n+  assert(cb != nullptr && cb->is_nmethod(), \"nmethod expected\");\n+  nmethod *nm = cb->as_nmethod();\n@@ -183,6 +187,2 @@\n-\/\/\n-\/\/ Add parameter assert_lock to switch off assertion\n-\/\/ during code generation, where no patching lock is needed.\n-void NativeCall::set_destination_mt_safe(address dest, bool assert_lock) {\n-  assert(!assert_lock ||\n-         (Patching_lock->is_locked() || SafepointSynchronize::is_at_safepoint()) ||\n+void NativeCall::set_destination_mt_safe(address dest) {\n+  assert((Patching_lock->is_locked() || SafepointSynchronize::is_at_safepoint()) ||\n@@ -192,2 +192,0 @@\n-  ResourceMark rm;\n-  int code_size = NativeInstruction::instruction_size;\n@@ -217,1 +215,1 @@\n-  address call_addr = addr_at(0);\n+  address call_addr = instruction_address();\n@@ -220,1 +218,2 @@\n-  assert(code != nullptr, \"Could not find the containing code blob\");\n+  assert(code != nullptr && code->is_nmethod(), \"nmethod expected\");\n+  nmethod* nm = code->as_nmethod();\n@@ -222,3 +221,2 @@\n-  address bl_destination\n-    = MacroAssembler::pd_call_destination(call_addr);\n-  if (code->contains(bl_destination) &&\n+  address bl_destination = call_addr + displacement();\n+  if (nm->stub_contains(bl_destination) &&\n@@ -228,5 +226,1 @@\n-  if (code->is_nmethod()) {\n-    return trampoline_stub_Relocation::get_trampoline_for(call_addr, (nmethod*)code);\n-  }\n-\n-  return nullptr;\n+  return trampoline_stub_Relocation::get_trampoline_for(call_addr, nm);\n","filename":"src\/hotspot\/cpu\/aarch64\/nativeInst_aarch64.cpp","additions":18,"deletions":24,"binary":false,"changes":42,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -215,0 +215,1 @@\n+  address raw_destination() const { return instruction_address() + displacement(); }\n@@ -254,3 +255,1 @@\n-\n-  \/\/ The parameter assert_lock disables the assertion during code generation.\n-  void set_destination_mt_safe(address dest, bool assert_lock = true);\n+  void set_destination_mt_safe(address dest);\n","filename":"src\/hotspot\/cpu\/aarch64\/nativeInst_aarch64.hpp","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2021, 2022, Arm Limited. All rights reserved.\n+ * Copyright (c) 2021, 2023, Arm Limited. All rights reserved.\n@@ -80,1 +80,1 @@\n-inline address pauth_strip_verifiable(address ret_addr, address modifier) {\n+inline address pauth_strip_verifiable(address ret_addr) {\n@@ -82,1 +82,1 @@\n-    DEBUG_ONLY(ret_addr = pauth_authenticate_return_address(ret_addr, modifier);)\n+    DEBUG_ONLY(ret_addr = pauth_authenticate_return_address(ret_addr);)\n","filename":"src\/hotspot\/cpu\/aarch64\/pauth_aarch64.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -55,1 +55,1 @@\n-    constexpr int raw_encoding() const { return this - first(); }\n+    constexpr int raw_encoding() const { return checked_cast<int>(this - first()); }\n@@ -178,1 +178,1 @@\n-    constexpr int raw_encoding() const { return this - first(); }\n+    constexpr int raw_encoding() const { return checked_cast<int>(this - first()); }\n@@ -311,1 +311,1 @@\n-    int raw_encoding() const  { return this - first(); }\n+    int raw_encoding() const  { return checked_cast<int>(this - first()); }\n","filename":"src\/hotspot\/cpu\/aarch64\/register_aarch64.hpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -63,4 +63,4 @@\n-  if (NativeCall::is_call_at(addr())) {\n-    address trampoline = nativeCall_at(addr())->get_trampoline();\n-    if (trampoline) {\n-      return nativeCallTrampolineStub_at(trampoline)->destination();\n+  if (orig_addr == nullptr) {\n+    if (NativeCall::is_call_at(addr())) {\n+      NativeCall* call = nativeCall_at(addr());\n+      return call->destination();\n@@ -68,2 +68,1 @@\n-  }\n-  if (orig_addr != nullptr) {\n+  } else {\n@@ -85,5 +84,4 @@\n-    address trampoline = nativeCall_at(addr())->get_trampoline();\n-    if (trampoline) {\n-      nativeCall_at(addr())->set_destination_mt_safe(x, \/* assert_lock *\/false);\n-      return;\n-    }\n+    NativeCall* call = nativeCall_at(addr());\n+    call->set_destination(x);\n+  } else {\n+    MacroAssembler::pd_patch_instruction(addr(), x);\n@@ -91,1 +89,0 @@\n-  MacroAssembler::pd_patch_instruction(addr(), x);\n@@ -95,0 +92,12 @@\n+void trampoline_stub_Relocation::pd_fix_owner_after_move() {\n+  NativeCall* call = nativeCall_at(owner());\n+  assert(call->raw_destination() == owner(), \"destination should be empty\");\n+  address trampoline = addr();\n+  address dest = nativeCallTrampolineStub_at(trampoline)->destination();\n+  if (!Assembler::reachable_from_branch_at(owner(), dest)) {\n+    dest = trampoline;\n+  }\n+  call->set_destination(dest);\n+}\n+\n+\n","filename":"src\/hotspot\/cpu\/aarch64\/relocInfo_aarch64.cpp","additions":21,"deletions":12,"binary":false,"changes":33,"status":"modified"},{"patch":"@@ -397,1 +397,1 @@\n-  __ authenticate_return_address(c_rarg1, rscratch1);\n+  __ authenticate_return_address(c_rarg1);\n@@ -1174,0 +1174,1 @@\n+      __ authenticate_return_address(c_rarg1);\n@@ -2340,1 +2341,1 @@\n-  __ protect_return_address(r3, rscratch1);\n+  __ protect_return_address(r3);\n@@ -2446,3 +2447,1 @@\n-  __ ldp(rfp, lr, __ post(sp, 2 * wordSize));\n-  __ authenticate_return_address();\n-  \/\/ LR should now be the return address to the caller (3)\n+  __ ldp(rfp, zr, __ post(sp, 2 * wordSize));\n@@ -2663,3 +2662,1 @@\n-  __ ldp(rfp, lr, __ post(sp, 2 * wordSize));\n-  __ authenticate_return_address();\n-  \/\/ LR should now be the return address to the caller (3) frame\n+  __ ldp(rfp, zr, __ post(sp, 2 * wordSize));\n@@ -2811,1 +2808,1 @@\n-    __ protect_return_address(r20, rscratch1);\n+    __ protect_return_address(r20);\n@@ -2852,1 +2849,1 @@\n-    __ authenticate_return_address(r20, rscratch1);\n+    __ authenticate_return_address(r20);\n@@ -2867,1 +2864,1 @@\n-    __ protect_return_address(r20, rscratch1);\n+    __ protect_return_address(r20);\n","filename":"src\/hotspot\/cpu\/aarch64\/sharedRuntime_aarch64.cpp","additions":8,"deletions":11,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,0 +29,1 @@\n+#include \"pauth_aarch64.hpp\"\n@@ -37,1 +38,1 @@\n-  int argsize = is_compiled() ? (_cb->as_compiled_method()->method()->num_stack_arg_slots() * VMRegImpl::stack_slot_size) >> LogBytesPerWord : 0;\n+  int argsize = is_compiled() ? (_cb->as_nmethod()->num_stack_arg_slots() * VMRegImpl::stack_slot_size) >> LogBytesPerWord : 0;\n@@ -55,1 +56,2 @@\n-  return *(address*)(_sp - 1);\n+  \/\/ Just strip it for frames on the heap.\n+  return pauth_strip_pointer(*(address*)(_sp - 1));\n@@ -117,2 +119,2 @@\n-        + ((intptr_t*)f.interpreter_frame_monitor_begin()\n-            - (intptr_t*)f.interpreter_frame_monitor_end())\/BasicObjectLock::size();\n+        + pointer_delta_as_int((intptr_t*)f.interpreter_frame_monitor_begin(),\n+              (intptr_t*)f.interpreter_frame_monitor_end())\/BasicObjectLock::size();\n","filename":"src\/hotspot\/cpu\/aarch64\/stackChunkFrameStream_aarch64.inline.hpp","additions":7,"deletions":5,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -7011,0 +7011,1 @@\n+      __ authenticate_return_address(c_rarg1);\n@@ -7012,1 +7013,2 @@\n-      __ mov(r19, r0); \/\/ save return value contaning the exception oop in callee-saved R19\n+      \/\/ save return value containing the exception oop in callee-saved R19\n+      __ mov(r19, r0);\n@@ -7022,1 +7024,1 @@\n-      __ mov(r0, r19); \/\/ restore return value contaning the exception oop\n+      __ mov(r0, r19); \/\/ restore return value containing the exception oop\n","filename":"src\/hotspot\/cpu\/aarch64\/stubGenerator_aarch64.cpp","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -1826,1 +1826,1 @@\n-    __ authenticate_return_address(c_rarg1, rscratch1);\n+    __ authenticate_return_address(c_rarg1);\n","filename":"src\/hotspot\/cpu\/aarch64\/templateInterpreterGenerator_aarch64.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -216,4 +216,3 @@\n-  \/\/ Neoverse N1, N2 and V1\n-  if (_cpu == CPU_ARM && ((_model == 0xd0c || _model2 == 0xd0c)\n-                          || (_model == 0xd49 || _model2 == 0xd49)\n-                          || (_model == 0xd40 || _model2 == 0xd40))) {\n+  \/\/ Neoverse N1, N2, V1, V2\n+  if (_cpu == CPU_ARM && (model_is(0xd0c) || model_is(0xd49) ||\n+                          model_is(0xd40) || model_is(0xd4f))) {\n@@ -467,3 +466,2 @@\n-    \/\/ 1) this code has been built with branch-protection,\n-    \/\/ 2) the CPU\/OS supports it, and\n-    \/\/ 3) incompatible VMContinuations isn't enabled.\n+    \/\/ 1) this code has been built with branch-protection and\n+    \/\/ 2) the CPU\/OS supports it\n@@ -474,3 +472,0 @@\n-    } else if (VMContinuations) {\n-      \/\/ Not currently compatible with continuation freeze\/thaw.\n-      warning(\"ROP-protection is incompatible with VMContinuations. Disabling ROP-protection.\");\n@@ -491,6 +486,0 @@\n-\n-    \/\/ The frame pointer must be preserved for ROP protection.\n-    if (FLAG_IS_DEFAULT(PreserveFramePointer) == false && PreserveFramePointer == false ) {\n-      vm_exit_during_initialization(err_msg(\"PreserveFramePointer cannot be disabled for ROP-protection\"));\n-    }\n-    PreserveFramePointer = true;\n","filename":"src\/hotspot\/cpu\/aarch64\/vm_version_aarch64.cpp","additions":5,"deletions":16,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -155,0 +155,4 @@\n+  static bool model_is(int cpu_model) {\n+    return _model == cpu_model || _model2 == cpu_model;\n+  }\n+\n","filename":"src\/hotspot\/cpu\/aarch64\/vm_version_aarch64.hpp","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -178,1 +178,1 @@\n-  const Register resolved_klass_reg = rmethod; \/\/ resolved interface klass (REFC)\n+  const Register resolved_klass_reg = r17; \/\/ resolved interface klass (REFC)\n@@ -195,10 +195,0 @@\n-  __ lookup_interface_method(\/\/ inputs: rec. class, interface\n-                             recv_klass_reg, resolved_klass_reg, noreg,\n-                             \/\/ outputs:  scan temp. reg1, scan temp. reg2\n-                             temp_reg2, temp_reg,\n-                             L_no_such_interface,\n-                             \/*return_method=*\/false);\n-\n-  const ptrdiff_t  typecheckSize = __ pc() - start_pc;\n-  start_pc = __ pc();\n-\n@@ -206,7 +196,2 @@\n-  __ lookup_interface_method(\/\/ inputs: rec. class, interface, itable index\n-                             recv_klass_reg, holder_klass_reg, itable_index,\n-                             \/\/ outputs: method, scan temp. reg\n-                             rmethod, temp_reg,\n-                             L_no_such_interface);\n-\n-  const ptrdiff_t lookupSize = __ pc() - start_pc;\n+  __ lookup_interface_method_stub(recv_klass_reg, holder_klass_reg, resolved_klass_reg, rmethod,\n+                                  temp_reg, temp_reg2, itable_index, L_no_such_interface);\n@@ -215,2 +200,2 @@\n-  const ptrdiff_t estimate = 124;\n-  const ptrdiff_t codesize = typecheckSize + lookupSize;\n+  const ptrdiff_t estimate = 144;\n+  const ptrdiff_t codesize = __ pc() - start_pc;\n","filename":"src\/hotspot\/cpu\/aarch64\/vtableStubs_aarch64.cpp","additions":5,"deletions":20,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -2,2 +2,2 @@\n- * Copyright (c) 1997, 2023, Oracle and\/or its affiliates. All rights reserved.\n- * Copyright (c) 2012, 2023 SAP SE. All rights reserved.\n+ * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2012, 2024 SAP SE. All rights reserved.\n@@ -81,1 +81,1 @@\n-  if (is_power_of_2(((jlong) ui16)+1)) {\n+  if (is_power_of_2(((unsigned long) ui16)+1)) {\n@@ -83,1 +83,1 @@\n-    clrldi(a, s, 64 - log2i_exact((((jlong) ui16)+1)));\n+    clrldi(a, s, 64 - log2i_exact((((unsigned long) ui16)+1)));\n","filename":"src\/hotspot\/cpu\/ppc\/assembler_ppc.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -581,1 +581,1 @@\n-      (is_power_of_2(int_or_long_const+1) ||\n+      (is_power_of_2((unsigned long)int_or_long_const+1) ||\n","filename":"src\/hotspot\/cpu\/ppc\/c1_LIRGenerator_ppc.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -366,1 +366,1 @@\n-  return (cb()->as_compiled_method()->method()->num_stack_arg_slots() * VMRegImpl::stack_slot_size) >> LogBytesPerWord;\n+  return (cb()->as_nmethod()->num_stack_arg_slots() * VMRegImpl::stack_slot_size) >> LogBytesPerWord;\n","filename":"src\/hotspot\/cpu\/ppc\/frame_ppc.inline.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -3536,0 +3536,1 @@\n+    call->_arg_escape        = _arg_escape;\n","filename":"src\/hotspot\/cpu\/ppc\/ppc.ad","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -38,1 +38,1 @@\n-  int argsize = (_cb->as_compiled_method()->method()->num_stack_arg_slots() * VMRegImpl::stack_slot_size) >> LogBytesPerWord;\n+  int argsize = (_cb->as_nmethod()->num_stack_arg_slots() * VMRegImpl::stack_slot_size) >> LogBytesPerWord;\n","filename":"src\/hotspot\/cpu\/ppc\/stackChunkFrameStream_ppc.inline.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1775,0 +1775,1 @@\n+  INSN(vluxei64_v, 0b0000111, 0b111, 0b01, 0b0);\n@@ -1778,0 +1779,1 @@\n+  INSN(vsuxei64_v, 0b0100111, 0b111, 0b01, 0b0);\n","filename":"src\/hotspot\/cpu\/riscv\/assembler_riscv.hpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -236,1 +236,1 @@\n-  return (cb()->as_compiled_method()->method()->num_stack_arg_slots() * VMRegImpl::stack_slot_size) >> LogBytesPerWord;\n+  return (cb()->as_nmethod()->num_stack_arg_slots() * VMRegImpl::stack_slot_size) >> LogBytesPerWord;\n","filename":"src\/hotspot\/cpu\/riscv\/frame_riscv.inline.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -73,1 +73,1 @@\n-    constexpr int raw_encoding() const { return this - first(); }\n+    constexpr int raw_encoding() const { return checked_cast<int>(this - first()); }\n@@ -190,1 +190,1 @@\n-    constexpr int raw_encoding() const { return this - first(); }\n+    constexpr int raw_encoding() const { return checked_cast<int>(this - first()); }\n@@ -300,1 +300,1 @@\n-    constexpr int raw_encoding() const { return this - first(); }\n+    constexpr int raw_encoding() const { return checked_cast<int>(this - first()); }\n","filename":"src\/hotspot\/cpu\/riscv\/register_riscv.hpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -652,0 +652,1 @@\n+\/\/ Class for all non-special integer registers\n@@ -656,0 +657,1 @@\n+\/\/ Class for all non-special long integer registers\n@@ -664,0 +666,1 @@\n+\/\/ Class for all non_special pointer registers\n@@ -668,0 +671,5 @@\n+\/\/ Class for all non_special pointer registers (excluding fp)\n+reg_class no_special_no_fp_ptr_reg %{\n+  return _NO_SPECIAL_NO_FP_PTR_REG_mask;\n+%}\n+\n@@ -1020,0 +1028,1 @@\n+extern RegMask _NO_SPECIAL_NO_FP_PTR_REG_mask;\n@@ -1082,0 +1091,1 @@\n+RegMask _NO_SPECIAL_NO_FP_PTR_REG_mask;\n@@ -1116,0 +1126,3 @@\n+\n+  _NO_SPECIAL_NO_FP_PTR_REG_mask = _NO_SPECIAL_PTR_REG_mask;\n+  _NO_SPECIAL_NO_FP_PTR_REG_mask.Remove(OptoReg::as_OptoReg(x8->as_VMReg()));\n@@ -3192,0 +3205,12 @@\n+\/\/ This operand is not allowed to use fp even if\n+\/\/ fp is not used to hold the frame pointer.\n+operand iRegPNoSpNoFp()\n+%{\n+  constraint(ALLOC_IN_RC(no_special_no_fp_ptr_reg));\n+  match(RegP);\n+  match(iRegPNoSp);\n+  op_cost(0);\n+  format %{ %}\n+  interface(REG_INTER);\n+%}\n+\n@@ -10244,1 +10269,3 @@\n-instruct TailCalljmpInd(iRegPNoSp jump_target, inline_cache_RegP method_oop)\n+\/\/ Don't use fp for 'jump_target' because a MachEpilogNode has already been\n+\/\/ emitted just above the TailCall which has reset fp to the caller state.\n+instruct TailCalljmpInd(iRegPNoSpNoFp jump_target, inline_cache_RegP method_oop)\n@@ -10257,1 +10284,1 @@\n-instruct TailjmpInd(iRegPNoSp jump_target, iRegP_R10 ex_oop)\n+instruct TailjmpInd(iRegPNoSpNoFp jump_target, iRegP_R10 ex_oop)\n","filename":"src\/hotspot\/cpu\/riscv\/riscv.ad","additions":29,"deletions":2,"binary":false,"changes":31,"status":"modified"},{"patch":"@@ -3598,3 +3598,2 @@\n-instruct gather_load(vReg dst, indirect mem, vReg idx) %{\n-  predicate(type2aelembytes(Matcher::vector_element_basic_type(n)) == 4 ||\n-            type2aelembytes(Matcher::vector_element_basic_type(n)) == 8);\n+instruct gather_loadS(vReg dst, indirect mem, vReg idx) %{\n+  predicate(type2aelembytes(Matcher::vector_element_basic_type(n)) == 4);\n@@ -3603,1 +3602,1 @@\n-  format %{ \"gather_load $dst, $mem, $idx\" %}\n+  format %{ \"gather_loadS $dst, $mem, $idx\" %}\n@@ -3616,3 +3615,19 @@\n-instruct gather_load_masked(vReg dst, indirect mem, vReg idx, vRegMask_V0 v0, vReg tmp) %{\n-  predicate(type2aelembytes(Matcher::vector_element_basic_type(n)) == 4 ||\n-            type2aelembytes(Matcher::vector_element_basic_type(n)) == 8);\n+instruct gather_loadD(vReg dst, indirect mem, vReg idx) %{\n+  predicate(type2aelembytes(Matcher::vector_element_basic_type(n)) == 8);\n+  match(Set dst (LoadVectorGather mem idx));\n+  effect(TEMP_DEF dst);\n+  format %{ \"gather_loadD $dst, $mem, $idx\" %}\n+  ins_encode %{\n+    BasicType bt = Matcher::vector_element_basic_type(this);\n+    Assembler::SEW sew = Assembler::elemtype_to_sew(bt);\n+    __ vsetvli_helper(bt, Matcher::vector_length(this));\n+    __ vzext_vf2(as_VectorRegister($dst$$reg), as_VectorRegister($idx$$reg));\n+    __ vsll_vi(as_VectorRegister($dst$$reg), as_VectorRegister($dst$$reg), (int)sew);\n+    __ vluxei64_v(as_VectorRegister($dst$$reg), as_Register($mem$$base),\n+                  as_VectorRegister($dst$$reg));\n+ %}\n+  ins_pipe(pipe_slow);\n+%}\n+\n+instruct gather_loadS_masked(vReg dst, indirect mem, vReg idx, vRegMask_V0 v0, vReg tmp) %{\n+  predicate(type2aelembytes(Matcher::vector_element_basic_type(n)) == 4);\n@@ -3621,1 +3636,1 @@\n-  format %{ \"gather_load_masked $dst, $mem, $idx, $v0\\t# KILL $tmp\" %}\n+  format %{ \"gather_loadS_masked $dst, $mem, $idx, $v0\\t# KILL $tmp\" %}\n@@ -3636,0 +3651,19 @@\n+instruct gather_loadD_masked(vReg dst, indirect mem, vReg idx, vRegMask_V0 v0, vReg tmp) %{\n+  predicate(type2aelembytes(Matcher::vector_element_basic_type(n)) == 8);\n+  match(Set dst (LoadVectorGatherMasked mem (Binary idx v0)));\n+  effect(TEMP_DEF dst, TEMP tmp);\n+  format %{ \"gather_loadD_masked $dst, $mem, $idx, $v0\\t# KILL $tmp\" %}\n+  ins_encode %{\n+    BasicType bt = Matcher::vector_element_basic_type(this);\n+    Assembler::SEW sew = Assembler::elemtype_to_sew(bt);\n+    __ vsetvli_helper(bt, Matcher::vector_length(this));\n+    __ vzext_vf2(as_VectorRegister($tmp$$reg), as_VectorRegister($idx$$reg));\n+    __ vsll_vi(as_VectorRegister($tmp$$reg), as_VectorRegister($tmp$$reg), (int)sew);\n+    __ vxor_vv(as_VectorRegister($dst$$reg), as_VectorRegister($dst$$reg),\n+               as_VectorRegister($dst$$reg));\n+    __ vluxei64_v(as_VectorRegister($dst$$reg), as_Register($mem$$base),\n+                  as_VectorRegister($tmp$$reg), Assembler::v0_t);\n+ %}\n+  ins_pipe(pipe_slow);\n+%}\n+\n@@ -3638,3 +3672,2 @@\n-instruct scatter_store(indirect mem, vReg src, vReg idx, vReg tmp) %{\n-  predicate(type2aelembytes(Matcher::vector_element_basic_type(n->in(3)->in(1))) == 4 ||\n-            type2aelembytes(Matcher::vector_element_basic_type(n->in(3)->in(1))) == 8);\n+instruct scatter_storeS(indirect mem, vReg src, vReg idx, vReg tmp) %{\n+  predicate(type2aelembytes(Matcher::vector_element_basic_type(n->in(3)->in(1))) == 4);\n@@ -3643,1 +3676,1 @@\n-  format %{ \"scatter_store $mem, $idx, $src\\t# KILL $tmp\" %}\n+  format %{ \"scatter_storeS $mem, $idx, $src\\t# KILL $tmp\" %}\n@@ -3656,3 +3689,19 @@\n-instruct scatter_store_masked(indirect mem, vReg src, vReg idx, vRegMask_V0 v0, vReg tmp) %{\n-  predicate(type2aelembytes(Matcher::vector_element_basic_type(n->in(3)->in(1))) == 4 ||\n-            type2aelembytes(Matcher::vector_element_basic_type(n->in(3)->in(1))) == 8);\n+instruct scatter_storeD(indirect mem, vReg src, vReg idx, vReg tmp) %{\n+  predicate(type2aelembytes(Matcher::vector_element_basic_type(n->in(3)->in(1))) == 8);\n+  match(Set mem (StoreVectorScatter mem (Binary src idx)));\n+  effect(TEMP tmp);\n+  format %{ \"scatter_storeD $mem, $idx, $src\\t# KILL $tmp\" %}\n+  ins_encode %{\n+    BasicType bt = Matcher::vector_element_basic_type(this, $src);\n+    Assembler::SEW sew = Assembler::elemtype_to_sew(bt);\n+    __ vsetvli_helper(bt, Matcher::vector_length(this, $src));\n+    __ vzext_vf2(as_VectorRegister($tmp$$reg), as_VectorRegister($idx$$reg));\n+    __ vsll_vi(as_VectorRegister($tmp$$reg), as_VectorRegister($tmp$$reg), (int)sew);\n+    __ vsuxei64_v(as_VectorRegister($src$$reg), as_Register($mem$$base),\n+                  as_VectorRegister($tmp$$reg));\n+  %}\n+  ins_pipe(pipe_slow);\n+%}\n+\n+instruct scatter_storeS_masked(indirect mem, vReg src, vReg idx, vRegMask_V0 v0, vReg tmp) %{\n+  predicate(type2aelembytes(Matcher::vector_element_basic_type(n->in(3)->in(1))) == 4);\n@@ -3661,1 +3710,1 @@\n-  format %{ \"scatter_store_masked $mem, $idx, $src, $v0\\t# KILL $tmp\" %}\n+  format %{ \"scatter_storeS_masked $mem, $idx, $src, $v0\\t# KILL $tmp\" %}\n@@ -3674,0 +3723,17 @@\n+instruct scatter_storeD_masked(indirect mem, vReg src, vReg idx, vRegMask_V0 v0, vReg tmp) %{\n+  predicate(type2aelembytes(Matcher::vector_element_basic_type(n->in(3)->in(1))) == 8);\n+  match(Set mem (StoreVectorScatterMasked mem (Binary src (Binary idx v0))));\n+  effect(TEMP tmp);\n+  format %{ \"scatter_storeD_masked $mem, $idx, $src, $v0\\t# KILL $tmp\" %}\n+  ins_encode %{\n+    BasicType bt = Matcher::vector_element_basic_type(this, $src);\n+    Assembler::SEW sew = Assembler::elemtype_to_sew(bt);\n+    __ vsetvli_helper(bt, Matcher::vector_length(this, $src));\n+    __ vzext_vf2(as_VectorRegister($tmp$$reg), as_VectorRegister($idx$$reg));\n+    __ vsll_vi(as_VectorRegister($tmp$$reg), as_VectorRegister($tmp$$reg), (int)sew);\n+    __ vsuxei64_v(as_VectorRegister($src$$reg), as_Register($mem$$base),\n+                  as_VectorRegister($tmp$$reg), Assembler::v0_t);\n+  %}\n+  ins_pipe(pipe_slow);\n+%}\n+\n","filename":"src\/hotspot\/cpu\/riscv\/riscv_v.ad","additions":82,"deletions":16,"binary":false,"changes":98,"status":"modified"},{"patch":"@@ -37,1 +37,1 @@\n-  int argsize = is_compiled() ? (_cb->as_compiled_method()->method()->num_stack_arg_slots() * VMRegImpl::stack_slot_size) >> LogBytesPerWord : 0;\n+  int argsize = is_compiled() ? (_cb->as_nmethod()->num_stack_arg_slots() * VMRegImpl::stack_slot_size) >> LogBytesPerWord : 0;\n","filename":"src\/hotspot\/cpu\/riscv\/stackChunkFrameStream_riscv.inline.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1910,1 +1910,1 @@\n-  emit_int8((int8_t)0xF2);\n+  emit_int8((uint8_t)0xF2);\n@@ -2510,1 +2510,1 @@\n-  emit_data(disp, rspec, call32_operand);\n+  emit_data(checked_cast<int32_t>(disp), rspec, call32_operand);\n@@ -6461,0 +6461,8 @@\n+void Assembler::xorw(Register dst, Address src) {\n+  InstructionMark im(this);\n+  emit_int8(0x66);\n+  prefix(src, dst);\n+  emit_int8(0x33);\n+  emit_operand(dst, src, 0);\n+}\n+\n@@ -13345,11 +13353,0 @@\n-void Assembler::movslq(Register dst, int32_t imm32) {\n-  \/\/ dbx shows movslq(rcx, 3) as movq     $0x0000000049000000,(%rbx)\n-  \/\/ and movslq(r8, 3); as movl     $0x0000000048000000,(%rbx)\n-  \/\/ as a result we shouldn't use until tested at runtime...\n-  ShouldNotReachHere();\n-  InstructionMark im(this);\n-  int encode = prefixq_and_encode(dst->encoding());\n-  emit_int8(0xC7 | encode);\n-  emit_int32(imm32);\n-}\n-\n","filename":"src\/hotspot\/cpu\/x86\/assembler_x86.cpp","additions":10,"deletions":13,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -241,1 +241,1 @@\n-      _disp (disp + (index.constant_or_zero() * scale_size(scale))),\n+      _disp (disp + checked_cast<int>(index.constant_or_zero() * scale_size(scale))),\n@@ -279,1 +279,1 @@\n-    a._disp += disp.constant_or_zero() * scale_size(scale);\n+    a._disp += checked_cast<int>(disp.constant_or_zero() * scale_size(scale));\n@@ -1647,1 +1647,0 @@\n-  void movslq(Register dst, int32_t imm64);\n@@ -2232,0 +2231,1 @@\n+  void xorw(Register dst, Address src);\n","filename":"src\/hotspot\/cpu\/x86\/assembler_x86.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -217,1 +217,1 @@\n-    const int fsize = ContinuationHelper::InterpretedFrame::frame_bottom(hf) - hf.unextended_sp() - overlap;\n+    const int fsize = (int)(ContinuationHelper::InterpretedFrame::frame_bottom(hf) - hf.unextended_sp() - overlap);\n","filename":"src\/hotspot\/cpu\/x86\/continuationFreezeThaw_x86.inline.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -225,1 +225,1 @@\n-    ? sender_sp() - sp()\n+    ? pointer_delta_as_int(sender_sp(), sp())\n@@ -231,1 +231,1 @@\n-  return (cb()->as_compiled_method()->method()->num_stack_arg_slots() * VMRegImpl::stack_slot_size) >> LogBytesPerWord;\n+  return (cb()->as_nmethod()->num_stack_arg_slots() * VMRegImpl::stack_slot_size) >> LogBytesPerWord;\n","filename":"src\/hotspot\/cpu\/x86\/frame_x86.inline.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1340,0 +1340,4 @@\n+#ifdef _LP64\n+  \/\/ Needs full 64-bit immediate for later patching.\n+  mov64(rax, (intptr_t)Universe::non_oop_word());\n+#else\n@@ -1341,0 +1345,1 @@\n+#endif\n@@ -2038,4 +2043,4 @@\n-  emit_int8((int8_t)0x0f);\n-  emit_int8((int8_t)0x1f);\n-  emit_int8((int8_t)0x84);\n-  emit_int8((int8_t)0x00);\n+  emit_int8((uint8_t)0x0f);\n+  emit_int8((uint8_t)0x1f);\n+  emit_int8((uint8_t)0x84);\n+  emit_int8((uint8_t)0x00);\n@@ -2050,5 +2055,5 @@\n-    emit_int8((int8_t)0x26); \/\/ es:\n-    emit_int8((int8_t)0x2e); \/\/ cs:\n-    emit_int8((int8_t)0x64); \/\/ fs:\n-    emit_int8((int8_t)0x65); \/\/ gs:\n-    emit_int8((int8_t)0x90);\n+    emit_int8((uint8_t)0x26); \/\/ es:\n+    emit_int8((uint8_t)0x2e); \/\/ cs:\n+    emit_int8((uint8_t)0x64); \/\/ fs:\n+    emit_int8((uint8_t)0x65); \/\/ gs:\n+    emit_int8((uint8_t)0x90);\n@@ -2577,1 +2582,9 @@\n-  LP64_ONLY(mov64(dst, src)) NOT_LP64(movl(dst, src));\n+#ifdef _LP64\n+  if (is_simm32(src)) {\n+    movq(dst, checked_cast<int32_t>(src));\n+  } else {\n+    mov64(dst, src);\n+  }\n+#else\n+  movl(dst, src);\n+#endif\n","filename":"src\/hotspot\/cpu\/x86\/macroAssembler_x86.cpp","additions":23,"deletions":10,"binary":false,"changes":33,"status":"modified"},{"patch":"@@ -120,1 +120,1 @@\n-      int imm8 = target - (address) &disp[1];\n+      int imm8 = checked_cast<int>(target - (address) &disp[1]);\n@@ -123,1 +123,1 @@\n-      *disp = imm8;\n+      *disp = (char)imm8;\n@@ -126,1 +126,1 @@\n-      int imm32 = target - (address) &disp[1];\n+      int imm32 = checked_cast<int>(target - (address) &disp[1]);\n@@ -752,1 +752,1 @@\n-    if (src.is_constant()) addptr(dst, src.as_constant());\n+    if (src.is_constant()) addptr(dst, checked_cast<int>(src.as_constant()));\n","filename":"src\/hotspot\/cpu\/x86\/macroAssembler_x86.hpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -174,1 +174,1 @@\n-    set_int_at(displacement_offset, dest - return_address());\n+    set_int_at(displacement_offset, (int)(dest - return_address()));\n","filename":"src\/hotspot\/cpu\/x86\/nativeInst_x86.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -59,1 +59,1 @@\n-    constexpr int   raw_encoding() const { return this - first(); }\n+    constexpr int   raw_encoding() const { return checked_cast<int>(this - first()); }\n@@ -142,1 +142,1 @@\n-    int   raw_encoding() const { return this - first(); }\n+    int   raw_encoding() const { return checked_cast<int>(this - first()); }\n@@ -205,1 +205,1 @@\n-    constexpr int raw_encoding() const { return this - first(); }\n+    constexpr int raw_encoding() const { return checked_cast<int>(this - first()); }\n@@ -316,1 +316,1 @@\n-    int   raw_encoding() const { return this - first(); }\n+    int   raw_encoding() const { return checked_cast<int>(this - first()); }\n","filename":"src\/hotspot\/cpu\/x86\/register_x86.hpp","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -100,1 +100,5 @@\n-    return nativeJump_at(addr())->jump_destination() + adj;\n+    address dest = nativeJump_at(addr())->jump_destination();\n+    if (dest == (address) -1) {\n+      return addr(); \/\/ jump to self\n+    }\n+    return dest + adj;\n","filename":"src\/hotspot\/cpu\/x86\/relocInfo_x86.cpp","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -29,0 +29,1 @@\n+#include \"utilities\/globalDefinitions.hpp\"\n@@ -62,3 +63,10 @@\n-  \/\/ check if locked\n-  __ testptr(result, markWord::unlocked_value);\n-  __ jcc(Assembler::zero, slowCase);\n+\n+  if (LockingMode == LM_LIGHTWEIGHT) {\n+    \/\/ check if monitor\n+    __ testptr(result, markWord::monitor_value);\n+    __ jcc(Assembler::notZero, slowCase);\n+  } else {\n+    \/\/ check if locked\n+    __ testptr(result, markWord::unlocked_value);\n+    __ jcc(Assembler::zero, slowCase);\n+  }\n","filename":"src\/hotspot\/cpu\/x86\/sharedRuntime_x86.cpp","additions":11,"deletions":3,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,1 +37,1 @@\n-  int argsize = is_compiled() ? (_cb->as_compiled_method()->method()->num_stack_arg_slots() * VMRegImpl::stack_slot_size) >> LogBytesPerWord : 0;\n+  int argsize = is_compiled() ? (_cb->as_nmethod()->num_stack_arg_slots() * VMRegImpl::stack_slot_size) >> LogBytesPerWord : 0;\n@@ -117,2 +117,2 @@\n-        + ((intptr_t*)f.interpreter_frame_monitor_begin()\n-            - (intptr_t*)f.interpreter_frame_monitor_end())\/BasicObjectLock::size();\n+        + pointer_delta_as_int((intptr_t*)f.interpreter_frame_monitor_begin(),\n+              (intptr_t*)f.interpreter_frame_monitor_end())\/BasicObjectLock::size();\n","filename":"src\/hotspot\/cpu\/x86\/stackChunkFrameStream_x86.inline.hpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2076,0 +2076,1 @@\n+  const Register tail = r15;\n@@ -2506,1 +2507,0 @@\n-  __ evpxorq(xmm0, xmm0, Address(src_addr, pos, Address::times_1, 0), Assembler::AVX_128bit);\n@@ -2510,1 +2510,3 @@\n-  __ pextrq(Address(dest_addr, pos), xmm0, 0);\n+  __ pextrq(tail, xmm0, 0);\n+  __ xorq(tail, Address(src_addr, pos, Address::times_1, 0));\n+  __ movq(Address(dest_addr, pos), tail);\n@@ -2516,1 +2518,3 @@\n-  __ pextrd(Address(dest_addr, pos), xmm0, 0);\n+  __ pextrd(tail, xmm0, 0);\n+  __ xorl(tail, Address(src_addr, pos, Address::times_1, 0));\n+  __ movl(Address(dest_addr, pos), tail);\n@@ -2522,1 +2526,3 @@\n-  __ pextrw(Address(dest_addr, pos), xmm0, 0);\n+  __ pextrw(tail, xmm0, 0);\n+  __ xorw(tail, Address(src_addr, pos, Address::times_1, 0));\n+  __ movw(Address(dest_addr, pos), tail);\n@@ -2528,1 +2534,3 @@\n-  __ pextrb(Address(dest_addr, pos), xmm0, 0);\n+  __ pextrb(tail, xmm0, 0);\n+  __ xorb(tail, Address(src_addr, pos, Address::times_1, 0));\n+  __ movb(Address(dest_addr, pos), tail);\n","filename":"src\/hotspot\/cpu\/x86\/stubGenerator_x86_64_aes.cpp","additions":13,"deletions":5,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -3148,2 +3148,2 @@\n-intx VM_Version::L1_line_size() {\n-  intx result = 0;\n+uint VM_Version::L1_line_size() {\n+  uint result = 0;\n","filename":"src\/hotspot\/cpu\/x86\/vm_version_x86.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -636,1 +636,1 @@\n-  static intx L1_line_size();\n+  static uint L1_line_size();\n@@ -638,1 +638,1 @@\n-  static intx prefetch_data_size()  {\n+  static uint prefetch_data_size()  {\n","filename":"src\/hotspot\/cpu\/x86\/vm_version_x86.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -7019,0 +7019,1 @@\n+  predicate(VM_Version::supports_avx512vl() || Matcher::vector_element_basic_type(n) != T_DOUBLE);\n@@ -7022,2 +7023,0 @@\n-    assert(UseAVX > 0, \"required\");\n-\n@@ -7031,0 +7030,11 @@\n+instruct vcastBtoD(legVec dst, legVec src) %{\n+  predicate(!VM_Version::supports_avx512vl() && Matcher::vector_element_basic_type(n) == T_DOUBLE);\n+  match(Set dst (VectorCastB2X src));\n+  format %{ \"vector_cast_b2x $dst,$src\\t!\" %}\n+  ins_encode %{\n+    int vlen_enc = vector_length_encoding(this);\n+    __ vconvert_b2x(T_DOUBLE, $dst$$XMMRegister, $src$$XMMRegister, vlen_enc);\n+  %}\n+  ins_pipe( pipe_slow );\n+%}\n+\n","filename":"src\/hotspot\/cpu\/x86\/x86.ad","additions":12,"deletions":2,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -13710,0 +13710,2 @@\n+\/\/ Don't use ebp for 'jump_target' because a MachEpilogNode has already been\n+\/\/ emitted just above the TailCall which has reset ebp to the caller state.\n","filename":"src\/hotspot\/cpu\/x86\/x86_32.ad","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -13458,0 +13458,2 @@\n+\/\/ Don't use rbp for 'jump_target' because a MachEpilogNode has already been\n+\/\/ emitted just above the TailCall which has reset rbp to the caller state.\n","filename":"src\/hotspot\/cpu\/x86\/x86_64.ad","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1874,0 +1874,4 @@\n+size_t os::pd_pretouch_memory(void* first, void* last, size_t page_size) {\n+  return page_size;\n+}\n+\n@@ -3009,1 +3013,0 @@\n-\n","filename":"src\/hotspot\/os\/aix\/os_aix.cpp","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -1576,0 +1576,4 @@\n+size_t os::pd_pretouch_memory(void* first, void* last, size_t page_size) {\n+  return page_size;\n+}\n+\n@@ -1982,8 +1986,11 @@\n-      nbr_files.rlim_cur = nbr_files.rlim_max;\n-\n-#ifdef __APPLE__\n-      \/\/ Darwin returns RLIM_INFINITY for rlim_max, but fails with EINVAL if\n-      \/\/ you attempt to use RLIM_INFINITY. As per setrlimit(2), OPEN_MAX must\n-      \/\/ be used instead\n-      nbr_files.rlim_cur = MIN(OPEN_MAX, nbr_files.rlim_cur);\n-#endif\n+      rlim_t rlim_original = nbr_files.rlim_cur;\n+\n+      \/\/ On macOS according to setrlimit(2), OPEN_MAX must be used instead\n+      \/\/ of RLIM_INFINITY, but testing on macOS >= 10.6, reveals that\n+      \/\/ we can, in fact, use even RLIM_INFINITY, so try the max value\n+      \/\/ that the system claims can be used first, same as other BSD OSes.\n+      \/\/ However, some terminals (ksh) will internally use \"int\" type\n+      \/\/ to store this value and since RLIM_INFINITY overflows an \"int\"\n+      \/\/ we might end up with a negative value, so cap the system limit max\n+      \/\/ at INT_MAX instead, just in case, for everyone.\n+      nbr_files.rlim_cur = MIN(INT_MAX, nbr_files.rlim_max);\n@@ -1992,0 +1999,6 @@\n+      if (status != 0) {\n+        \/\/ If that fails then try lowering the limit to either OPEN_MAX\n+        \/\/ (which is safe) or the original limit, whichever was greater.\n+        nbr_files.rlim_cur = MAX(OPEN_MAX, rlim_original);\n+        status = setrlimit(RLIMIT_NOFILE, &nbr_files);\n+      }\n","filename":"src\/hotspot\/os\/bsd\/os_bsd.cpp","additions":21,"deletions":8,"binary":false,"changes":29,"status":"modified"},{"patch":"@@ -135,1 +135,1 @@\n-    const int key_len = strlen(key);\n+    const int key_len = (int)strlen(key);\n","filename":"src\/hotspot\/os\/linux\/cgroupSubsystem_linux.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -101,1 +101,3 @@\n-\n+  product(bool, UseMadvPopulateWrite, true, DIAGNOSTIC,                 \\\n+          \"Use MADV_POPULATE_WRITE in os::pd_pretouch_memory.\")         \\\n+                                                                        \\\n","filename":"src\/hotspot\/os\/linux\/globals_linux.hpp","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -233,0 +233,13 @@\n+size_t HugePages::thp_pagesize_fallback() {\n+    \/\/ Older kernels won't publish the THP page size. Fall back to default static huge page size,\n+    \/\/ since that is likely to be the THP page size as well. Don't do it if the page size is considered\n+    \/\/ too large to avoid large alignment waste. If static huge page size is unknown, use educated guess.\n+    if (thp_pagesize() != 0) {\n+        return thp_pagesize();\n+    }\n+    if (supports_static_hugepages()) {\n+        return MIN2(default_static_hugepage_size(), 16 * M);\n+    }\n+    return 2 * M;\n+}\n+\n","filename":"src\/hotspot\/os\/linux\/hugepages.cpp","additions":13,"deletions":0,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -110,0 +110,1 @@\n+  static size_t thp_pagesize_fallback();\n","filename":"src\/hotspot\/os\/linux\/hugepages.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2833,0 +2833,9 @@\n+\/\/ Define MADV_POPULATE_WRITE here so we can build HotSpot on old systems.\n+#define MADV_POPULATE_WRITE_value 23\n+#ifndef MADV_POPULATE_WRITE\n+  #define MADV_POPULATE_WRITE MADV_POPULATE_WRITE_value\n+#else\n+  \/\/ Sanity-check our assumed default value if we build with a new enough libc.\n+  static_assert(MADV_POPULATE_WRITE == MADV_POPULATE_WRITE_value);\n+#endif\n+\n@@ -2878,0 +2887,25 @@\n+size_t os::pd_pretouch_memory(void* first, void* last, size_t page_size) {\n+  const size_t len = pointer_delta(last, first, sizeof(char)) + page_size;\n+  \/\/ Use madvise to pretouch on Linux when THP is used, and fallback to the\n+  \/\/ common method if unsupported. THP can form right after madvise rather than\n+  \/\/ being assembled later.\n+  if (HugePages::thp_mode() == THPMode::always || UseTransparentHugePages) {\n+    int err = 0;\n+    if (UseMadvPopulateWrite &&\n+        ::madvise(first, len, MADV_POPULATE_WRITE) == -1) {\n+      err = errno;\n+    }\n+    if (!UseMadvPopulateWrite || err == EINVAL) { \/\/ Not to use or not supported\n+      \/\/ When using THP we need to always pre-touch using small pages as the\n+      \/\/ OS will initially always use small pages.\n+      return os::vm_page_size();\n+    } else if (err != 0) {\n+      log_info(gc, os)(\"::madvise(\" PTR_FORMAT \", \" SIZE_FORMAT \", %d) failed; \"\n+                       \"error='%s' (errno=%d)\", p2i(first), len,\n+                       MADV_POPULATE_WRITE, os::strerror(err), err);\n+    }\n+    return 0;\n+  }\n+  return page_size;\n+}\n+\n@@ -3839,1 +3873,0 @@\n-    assert(HugePages::supports_thp() && HugePages::thp_pagesize() > 0, \"Missing OS info\");\n@@ -3841,0 +3874,5 @@\n+    if (_large_page_size == 0) {\n+        log_info(pagesize) (\"Cannot determine THP page size (kernel < 4.10 ?)\");\n+        _large_page_size = HugePages::thp_pagesize_fallback();\n+        log_info(pagesize) (\"Assuming THP page size to be: \" EXACTFMT \" (heuristics)\", EXACTFMTARGS(_large_page_size));\n+    }\n@@ -4444,0 +4482,3 @@\n+  \/\/ Check the availability of MADV_POPULATE_WRITE.\n+  FLAG_SET_DEFAULT(UseMadvPopulateWrite, (::madvise(0, 0, MADV_POPULATE_WRITE) == 0));\n+\n","filename":"src\/hotspot\/os\/linux\/os_linux.cpp","additions":42,"deletions":1,"binary":false,"changes":43,"status":"modified"},{"patch":"@@ -850,1 +850,1 @@\n-  _valid = true;\n+  _valid = _dir != nullptr; \/\/ May be null if \/proc is not accessible.\n","filename":"src\/hotspot\/os\/linux\/os_perf_linux.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -3788,0 +3788,5 @@\n+\n+size_t os::pd_pretouch_memory(void* first, void* last, size_t page_size) {\n+  return page_size;\n+}\n+\n","filename":"src\/hotspot\/os\/windows\/os_windows.cpp","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2021, 2022, Arm Limited. All rights reserved.\n+ * Copyright (c) 2021, 2023, Arm Limited. All rights reserved.\n@@ -36,1 +36,1 @@\n-inline address pauth_sign_return_address(address ret_addr, address sp) {\n+inline address pauth_sign_return_address(address ret_addr) {\n@@ -41,1 +41,1 @@\n-inline address pauth_authenticate_return_address(address ret_addr, address sp) {\n+inline address pauth_authenticate_return_address(address ret_addr) {\n","filename":"src\/hotspot\/os_cpu\/bsd_aarch64\/pauth_bsd_aarch64.inline.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2021, 2022, Arm Limited. All rights reserved.\n+ * Copyright (c) 2021, 2023, Arm Limited. All rights reserved.\n@@ -33,6 +33,5 @@\n-\/\/ Use only the PAC instructions in the NOP space. This ensures the binaries work on systems\n-\/\/ without PAC. Write these instructions using their alternate \"hint\" instructions to ensure older\n-\/\/ compilers can still be used.\n-#define XPACLRI   \"hint #0x7;\"\n-#define PACIA1716 \"hint #0x8;\"\n-#define AUTIA1716 \"hint #0xc;\"\n+\/\/ Write these instructions using their alternate \"hint\" instructions to\n+\/\/ ensure older compilers can still be used.\n+#define XPACLRI \"hint #0x7;\"\n+#define PACIAZ  \"hint #0x18;\"\n+#define AUTIAZ  \"hint #0x1c;\"\n@@ -40,2 +39,2 @@\n-\/\/ Strip an address. Use with caution - only if there is no guaranteed way of authenticating the\n-\/\/ value.\n+\/\/ Strip an address. Use with caution -\n+\/\/ only if there is no guaranteed way of authenticating the value.\n@@ -49,1 +48,1 @@\n-\/\/ Sign a return value, using the given modifier.\n+\/\/ Sign a return value, using value zero as the modifier.\n@@ -51,1 +50,1 @@\n-inline address pauth_sign_return_address(address ret_addr, address sp) {\n+inline address pauth_sign_return_address(address ret_addr) {\n@@ -55,4 +54,3 @@\n-    register address r17 __asm(\"r17\") = ret_addr;\n-    register address r16 __asm(\"r16\") = sp;\n-    asm (PACIA1716 : \"+r\"(r17) : \"r\"(r16));\n-    ret_addr = r17;\n+    register address reg30 __asm__(\"x30\") = ret_addr;\n+    asm (PACIAZ : \"+r\"(reg30));\n+    ret_addr = reg30;\n@@ -63,1 +61,1 @@\n-\/\/ Authenticate a return value, using the given modifier.\n+\/\/ Authenticate a return value, using value zero as the modifier.\n@@ -65,1 +63,1 @@\n-inline address pauth_authenticate_return_address(address ret_addr, address sp) {\n+inline address pauth_authenticate_return_address(address ret_addr) {\n@@ -67,4 +65,3 @@\n-    register address r17 __asm(\"r17\") = ret_addr;\n-    register address r16 __asm(\"r16\") = sp;\n-    asm (AUTIA1716 : \"+r\"(r17) : \"r\"(r16));\n-    ret_addr = r17;\n+    register address reg30 __asm__(\"x30\") = ret_addr;\n+    asm (AUTIAZ : \"+r\"(reg30));\n+    ret_addr = reg30;\n@@ -72,1 +69,2 @@\n-    guarantee(pauth_ptr_is_raw(ret_addr), \"Return address did not authenticate\");\n+    guarantee(pauth_ptr_is_raw(ret_addr),\n+              \"Return address did not authenticate\");\n@@ -78,2 +76,2 @@\n-#undef PACIA1716\n-#undef AUTIA1716\n+#undef PACIAZ\n+#undef AUTIAZ\n","filename":"src\/hotspot\/os_cpu\/linux_aarch64\/pauth_linux_aarch64.inline.hpp","additions":22,"deletions":24,"binary":false,"changes":46,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2021, 2022, Arm Limited. All rights reserved.\n+ * Copyright (c) 2021, 2023, Arm Limited. All rights reserved.\n@@ -36,1 +36,1 @@\n-inline address pauth_sign_return_address(address ret_addr, address sp) {\n+inline address pauth_sign_return_address(address ret_addr) {\n@@ -41,1 +41,1 @@\n-inline address pauth_authenticate_return_address(address ret_addr, address sp) {\n+inline address pauth_authenticate_return_address(address ret_addr) {\n","filename":"src\/hotspot\/os_cpu\/windows_aarch64\/pauth_windows_aarch64.inline.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -89,1 +89,1 @@\n-  int pad = -(intptr_t)end & (required_align-1);\n+  int pad = checked_cast<int>(-(intptr_t)end & (required_align-1));\n","filename":"src\/hotspot\/share\/asm\/assembler.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -255,1 +255,1 @@\n-      _assm->register_skipped(_assm->pc() - _start);\n+      _assm->register_skipped(checked_cast<int>(_assm->pc() - _start));\n","filename":"src\/hotspot\/share\/asm\/assembler.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -527,1 +527,1 @@\n-    if (cs->is_empty() || !cs->has_locs()) continue;  \/\/ skip trivial section\n+    if (cs->is_empty() || (cs->locs_count() == 0)) continue;  \/\/ skip trivial section\n@@ -793,3 +793,0 @@\n-    \/\/ pull code out of each section\n-    const CodeSection* cs = code_section(n);\n-    if (cs->is_empty() || !cs->has_locs()) continue;  \/\/ skip trivial section\n@@ -797,0 +794,1 @@\n+    if (dest_cs->is_empty() || (dest_cs->locs_count() == 0)) continue;  \/\/ skip trivial section\n@@ -1057,1 +1055,1 @@\n-  if (PrintRelocations) {\n+  if (PrintRelocations && (locs_size != 0)) {\n","filename":"src\/hotspot\/share\/asm\/codeBuffer.cpp","additions":3,"deletions":5,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -446,1 +446,1 @@\n-    _bytes_to_copy = masm->pc() - pc_start();\n+    _bytes_to_copy = pointer_delta_as_int(masm->pc(), pc_start());\n","filename":"src\/hotspot\/share\/c1\/c1_CodeStubs.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -328,1 +328,1 @@\n-          _nonnull_state |= nth_bit(i);\n+          _nonnull_state |= (int)nth_bit(i);\n@@ -330,1 +330,1 @@\n-          _nonnull_state &= ~(nth_bit(i));\n+          _nonnull_state &= (int)~(nth_bit(i));\n","filename":"src\/hotspot\/share\/c1\/c1_Instruction.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2012, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2012, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -469,4 +469,1 @@\n-            if (value != min_jint) {\n-              if (ao->op() == Bytecodes::_isub) {\n-                value = -value;\n-              }\n+            if (ao->op() == Bytecodes::_iadd) {\n@@ -474,2 +471,3 @@\n-              last_integer = base;\n-              last_instruction = other;\n+            } else {\n+              assert(ao->op() == Bytecodes::_isub, \"unexpected bytecode\");\n+              base = java_subtract(base, value);\n@@ -477,0 +475,2 @@\n+            last_integer = base;\n+            last_instruction = other;\n","filename":"src\/hotspot\/share\/c1\/c1_RangeCheckElimination.cpp","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -36,0 +36,1 @@\n+#include \"sanitizers\/ub.hpp\"\n@@ -62,0 +63,1 @@\n+ATTRIBUTE_NO_UBSAN\n","filename":"src\/hotspot\/share\/cds\/archiveHeapLoader.cpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -428,4 +428,2 @@\n-  \/\/ in the shared heap. This also has the side effect of pre-initializing the\n-  \/\/ identity_hash for all shared objects, so they are less likely to be written\n-  \/\/ into during run time, increasing the potential of memory sharing.\n-  if (src_obj != nullptr) {\n+  \/\/ in the shared heap.\n+  if (src_obj != nullptr && !src_obj->fast_no_hash_check()) {\n","filename":"src\/hotspot\/share\/cds\/archiveHeapWriter.cpp","additions":2,"deletions":4,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -118,1 +118,1 @@\n-    return (size_t)i;\n+    return (int)i;\n","filename":"src\/hotspot\/share\/cds\/archiveHeapWriter.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -279,6 +279,0 @@\n-\n-    \/\/ The archived objects are discovered in a predictable order. Compute\n-    \/\/ their identity_hash() as soon as we see them. This ensures that the\n-    \/\/ the identity_hash in the object header will have a predictable value,\n-    \/\/ making the archive reproducible.\n-    obj->identity_hash();\n","filename":"src\/hotspot\/share\/cds\/heapShared.cpp","additions":0,"deletions":6,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -504,1 +504,1 @@\n-    return dp - ((address)_data);\n+    return pointer_delta_as_int(dp, ((address)_data));\n","filename":"src\/hotspot\/share\/ci\/ciMethodData.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -113,3 +113,3 @@\n-  int next_bci() const          { return _pc - _start; }\n-  int cur_bci() const           { return _bc_start - _start; }\n-  int instruction_size() const  { return _pc - _bc_start; }\n+  int next_bci() const          { return pointer_delta_as_int(_pc, _start); }\n+  int cur_bci() const           { return pointer_delta_as_int(_bc_start, _start); }\n+  int instruction_size() const  { return pointer_delta_as_int(_pc, _bc_start); }\n","filename":"src\/hotspot\/share\/ci\/ciStreams.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -67,1 +67,1 @@\n-  int length() const { return _buffer_end - _buffer_start; }\n+  int length() const { return pointer_delta_as_int(_buffer_end, _buffer_start); }\n","filename":"src\/hotspot\/share\/classfile\/classFileStream.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -790,0 +790,1 @@\n+int java_lang_Class::_init_lock_offset;\n@@ -915,0 +916,6 @@\n+  \/\/ Allocate a simple java object for a lock.\n+  \/\/ This needs to be a java object because during class initialization\n+  \/\/ it can be held across a java call.\n+  typeArrayOop r = oopFactory::new_typeArray(T_INT, 0, CHECK);\n+  set_init_lock(mirror(), r);\n+\n@@ -1136,0 +1143,4 @@\n+    \/\/ create the init_lock\n+    typeArrayOop r = oopFactory::new_typeArray(T_INT, 0, CHECK_(false));\n+    set_init_lock(mirror(), r);\n+\n@@ -1200,0 +1211,9 @@\n+oop java_lang_Class::init_lock(oop java_class) {\n+  assert(_init_lock_offset != 0, \"must be set\");\n+  return java_class->obj_field(_init_lock_offset);\n+}\n+void java_lang_Class::set_init_lock(oop java_class, oop init_lock) {\n+  assert(_init_lock_offset != 0, \"must be set\");\n+  java_class->obj_field_put(_init_lock_offset, init_lock);\n+}\n+\n@@ -1419,0 +1439,5 @@\n+  \/\/ Init lock is a C union with component_mirror.  Only instanceKlass mirrors have\n+  \/\/ init_lock and only ArrayKlass mirrors have component_mirror.  Since both are oops\n+  \/\/ GC treats them the same.\n+  _init_lock_offset = _component_mirror_offset;\n+\n@@ -1425,0 +1450,1 @@\n+  f->do_u4((u4*)&_init_lock_offset);\n","filename":"src\/hotspot\/share\/classfile\/javaClasses.cpp","additions":26,"deletions":0,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -227,0 +227,1 @@\n+  static int _init_lock_offset;\n@@ -241,0 +242,1 @@\n+  static void set_init_lock(oop java_class, oop init_lock);\n@@ -293,0 +295,4 @@\n+  static oop  init_lock(oop java_class);\n+  static void clear_init_lock(oop java_class) {\n+    set_init_lock(java_class, nullptr);\n+  }\n","filename":"src\/hotspot\/share\/classfile\/javaClasses.hpp","additions":7,"deletions":1,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -340,0 +340,15 @@\n+\/\/ Symbols should represent entities from the constant pool that are\n+\/\/ limited to <64K in length, but usage errors creep in allowing Symbols\n+\/\/ to be used for arbitrary strings. For debug builds we will assert if\n+\/\/ a string is too long, whereas product builds will truncate it.\n+static int check_length(const char* name, int len) {\n+  assert(len <= Symbol::max_length(),\n+         \"String length %d exceeds the maximum Symbol length of %d\", len, Symbol::max_length());\n+  if (len > Symbol::max_length()) {\n+    warning(\"A string \\\"%.80s ... %.80s\\\" exceeds the maximum Symbol \"\n+            \"length of %d and has been truncated\", name, (name + len - 80), Symbol::max_length());\n+    len = Symbol::max_length();\n+  }\n+  return len;\n+}\n+\n@@ -341,1 +356,1 @@\n-  assert(len <= Symbol::max_length(), \"sanity\");\n+  len = check_length(name, len);\n@@ -474,0 +489,1 @@\n+    assert(len <= Symbol::max_length(), \"must be - these come from the constant pool\");\n@@ -483,0 +499,1 @@\n+  assert(len <= Symbol::max_length(), \"caller should have ensured this\");\n@@ -531,1 +548,1 @@\n-  int len = (int)strlen(name);\n+  int len = check_length(name, (int)strlen(name));\n","filename":"src\/hotspot\/share\/classfile\/symbolTable.cpp","additions":20,"deletions":3,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -430,1 +430,1 @@\n-  template(argsize_name,                              \"argsize\")                                  \\\n+  template(bottom_name,                               \"bottom\")                                   \\\n","filename":"src\/hotspot\/share\/classfile\/vmSymbols.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -197,3 +197,3 @@\n-  int relocation_size() const                    { return (address) relocation_end() - (address) relocation_begin(); }\n-  int content_size() const                       { return           content_end()    -           content_begin();    }\n-  int code_size() const                          { return           code_end()       -           code_begin();       }\n+  int relocation_size() const                    { return pointer_delta_as_int((address) relocation_end(), (address) relocation_begin()); }\n+  int content_size() const                       { return pointer_delta_as_int(content_end(), content_begin()); }\n+  int code_size() const                          { return pointer_delta_as_int(code_end(), code_begin()); }\n","filename":"src\/hotspot\/share\/code\/codeBlob.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -36,1 +36,1 @@\n-  return _oop_maps->find_map_at_slot(slot, (intptr_t) return_address - (intptr_t) code_begin());\n+  return _oop_maps->find_map_at_slot(slot, pointer_delta_as_int(return_address, code_begin()));\n","filename":"src\/hotspot\/share\/code\/codeBlob.inline.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -669,1 +669,1 @@\n-  static unsigned hash  (DependencySignature const& s1) { return s1.arg(0) >> 2; }\n+  static unsigned hash  (DependencySignature const& s1) { return (unsigned)(s1.arg(0) >> 2); }\n","filename":"src\/hotspot\/share\/code\/dependencies.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -175,1 +175,1 @@\n-  int size_in_bytes() const { return len() == 0 ? 0 : ((2 * len() + 1) * sizeof(implicit_null_entry)); }\n+  int size_in_bytes() const { return len() == 0 ? 0 : ((2 * len() + 1) * (int)sizeof(implicit_null_entry)); }\n","filename":"src\/hotspot\/share\/code\/exceptionHandlerTable.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -659,0 +659,1 @@\n+    _num_stack_arg_slots     = _method->constMethod()->num_stack_arg_slots();\n@@ -802,0 +803,1 @@\n+    _num_stack_arg_slots     = entry_bci != InvocationEntryBci ? 0 : _method->constMethod()->num_stack_arg_slots();\n","filename":"src\/hotspot\/share\/code\/nmethod.cpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -232,0 +232,2 @@\n+  int _num_stack_arg_slots;                  \/\/ Number of arguments passed on the stack\n+\n@@ -518,0 +520,4 @@\n+  int num_stack_arg_slots(bool rounded = true) const {\n+    return rounded ? align_up(_num_stack_arg_slots, 2) : _num_stack_arg_slots;\n+  }\n+\n","filename":"src\/hotspot\/share\/code\/nmethod.hpp","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -152,2 +152,1 @@\n-  assert((cs->locs_start() != nullptr) && (cs->locs_end() != nullptr) ||\n-         (cs->locs_start() == nullptr) && (cs->locs_end() == nullptr), \"valid start and end pointer\");\n+  assert(((cs->locs_start() != nullptr) && (cs->locs_end() != nullptr)), \"valid start and end pointer\");\n@@ -400,0 +399,8 @@\n+#ifdef USE_TRAMPOLINE_STUB_FIX_OWNER\n+void trampoline_stub_Relocation::fix_relocation_after_move(const CodeBuffer* src, CodeBuffer* dest) {\n+  \/\/ Finalize owner destination only for nmethods\n+  if (dest->blob() != nullptr) return;\n+  pd_fix_owner_after_move();\n+}\n+#endif\n+\n","filename":"src\/hotspot\/share\/code\/relocInfo.cpp","additions":9,"deletions":2,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -1290,0 +1290,5 @@\n+#ifdef USE_TRAMPOLINE_STUB_FIX_OWNER\n+  void pd_fix_owner_after_move();\n+  void fix_relocation_after_move(const CodeBuffer* src, CodeBuffer* dest) override;\n+#endif\n+\n","filename":"src\/hotspot\/share\/code\/relocInfo.hpp","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-VMReg VMRegImpl::stack0 = (VMReg)VMRegImpl::stack_0()->value();\n+VMReg VMRegImpl::stack0 = (VMReg)(intptr_t)FIRST_STACK;\n@@ -45,1 +45,1 @@\n-    assert(VMRegImpl::regName[value()], \"VMRegImpl::regName[\" INTPTR_FORMAT \"] returns nullptr\", value());\n+    assert(VMRegImpl::regName[value()], \"VMRegImpl::regName[%d] returns nullptr\", value());\n","filename":"src\/hotspot\/share\/code\/vmreg.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -56,1 +56,2 @@\n-    BAD_REG = -1\n+    BAD_REG = -1,\n+    FIRST_STACK = (ConcreteRegisterImpl::number_of_registers + 7) & ~7\n@@ -73,1 +74,1 @@\n-    return first() + ((ConcreteRegisterImpl::number_of_registers + 7) & ~7);\n+    return first() + FIRST_STACK;\n@@ -91,1 +92,1 @@\n-  intptr_t value() const { return this - first(); }\n+  int value() const { return checked_cast<int>(this - first()); }\n@@ -146,1 +147,1 @@\n-  uintptr_t reg2stack() const {\n+  int reg2stack() const {\n@@ -148,1 +149,1 @@\n-    return this - stack_0();\n+    return checked_cast<int>(this - stack_0());\n","filename":"src\/hotspot\/share\/code\/vmreg.hpp","additions":7,"deletions":6,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -134,1 +134,1 @@\n-  VtableStub(bool is_vtable_stub, int index)\n+  VtableStub(bool is_vtable_stub, short index)\n@@ -155,2 +155,2 @@\n-    _npe_offset = npe_addr - code_begin();\n-    _ame_offset = ame_addr - code_begin();\n+    _npe_offset = checked_cast<short>(npe_addr - code_begin());\n+    _ame_offset = checked_cast<short>(ame_addr - code_begin());\n","filename":"src\/hotspot\/share\/code\/vtableStubs.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -1029,1 +1029,1 @@\n-    if (is_trivial(method)) {\n+    if (is_trivial(method) || method->is_native()) {\n","filename":"src\/hotspot\/share\/compiler\/compilationPolicy.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -835,1 +835,1 @@\n-  JavaThread* new_thread = nullptr;\n+  Handle thread_oop(THREAD, JNIHandles::resolve_non_null(thread_handle));\n@@ -837,0 +837,7 @@\n+  if (java_lang_Thread::thread(thread_oop()) != nullptr) {\n+    assert(type == compiler_t, \"should only happen with reused compiler threads\");\n+    \/\/ The compiler thread hasn't actually exited yet so don't try to reuse it\n+    return nullptr;\n+  }\n+\n+  JavaThread* new_thread = nullptr;\n@@ -865,1 +872,0 @@\n-    Handle thread_oop(THREAD, JNIHandles::resolve_non_null(thread_handle));\n","filename":"src\/hotspot\/share\/compiler\/compileBroker.cpp","additions":8,"deletions":2,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -224,1 +224,1 @@\n-    st->print(\"%7d \", (int)tty->time_stamp().milliseconds());\n+    st->print(UINT64_FORMAT \" \", (uint64_t) tty->time_stamp().milliseconds());\n@@ -228,1 +228,1 @@\n-      st->print(\"%d \", (int)TimeHelper::counter_to_millis(now-time_queued));\n+      st->print(\"%.0f \", TimeHelper::counter_to_millis(now-time_queued));\n@@ -230,1 +230,1 @@\n-        st->print(\"%d \", (int)TimeHelper::counter_to_millis(now-time_started));\n+        st->print(\"%.0f \", TimeHelper::counter_to_millis(now-time_started));\n","filename":"src\/hotspot\/share\/compiler\/compileTask.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -284,1 +284,1 @@\n-        tty->print_cr(\"[%c][%d] -> reg (\" INTPTR_FORMAT \")\", omv.type() == OopMapValue::narrowoop_value ? 'n' : 'o', i, omv.reg()->value());\n+        tty->print_cr(\"[%c][%d] -> reg (%d)\", omv.type() == OopMapValue::narrowoop_value ? 'n' : 'o', i, omv.reg()->value());\n@@ -286,1 +286,1 @@\n-        tty->print_cr(\"[%c][%d] -> stack (\"  INTPTR_FORMAT \")\", omv.type() == OopMapValue::narrowoop_value ? 'n' : 'o', i, omv.reg()->reg2stack() * VMRegImpl::stack_slot_size);\n+        tty->print_cr(\"[%c][%d] -> stack (%d)\", omv.type() == OopMapValue::narrowoop_value ? 'n' : 'o', i, omv.reg()->reg2stack() * VMRegImpl::stack_slot_size);\n@@ -290,1 +290,1 @@\n-        tty->print_cr(\"[d][%d] -> reg (\" INTPTR_FORMAT \") stack (\" INTPTR_FORMAT \")\", i, omv.content_reg()->value(), omv.reg()->reg2stack() * VMRegImpl::stack_slot_size);\n+        tty->print_cr(\"[d][%d] -> reg (%d) stack (%d)\", i, omv.content_reg()->value(), omv.reg()->reg2stack() * VMRegImpl::stack_slot_size);\n@@ -292,1 +292,1 @@\n-        tty->print_cr(\"[d][%d] -> stack (\" INTPTR_FORMAT \") reg (\" INTPTR_FORMAT \")\", i, omv.content_reg()->reg2stack() * VMRegImpl::stack_slot_size, omv.reg()->value());\n+        tty->print_cr(\"[d][%d] -> stack (%d) reg (%d)\", i, omv.content_reg()->reg2stack() * VMRegImpl::stack_slot_size, omv.reg()->value());\n","filename":"src\/hotspot\/share\/compiler\/oopMap.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -57,3 +57,3 @@\n-  short _value;\n-  int value() const                                 { return _value; }\n-  void set_value(int value)                         { _value = value; }\n+  unsigned short _value;\n+  unsigned short value() const                      { return _value; }\n+  void set_value(unsigned short value)              { _value = value; }\n@@ -91,2 +91,2 @@\n-    void set_reg_type(VMReg p, oop_types t) {\n-    set_value((p->value() << register_shift) | t);\n+  void set_reg_type(VMReg p, oop_types t) {\n+    set_value(checked_cast<unsigned short>((p->value() << register_shift) | t));\n@@ -106,1 +106,1 @@\n-    _content_reg = r->value();\n+    _content_reg = checked_cast<short>(r->value());\n@@ -114,1 +114,1 @@\n-      stream->write_int(content_reg()->value());\n+      stream->write_int(checked_cast<int>(content_reg()->value()));\n@@ -119,1 +119,1 @@\n-    set_value(stream->read_int());\n+    set_value(checked_cast<unsigned short>(stream->read_int()));\n@@ -131,1 +131,1 @@\n-  VMReg reg() const { return VMRegImpl::as_VMReg(mask_bits(value(), register_mask_in_place) >> register_shift); }\n+  VMReg reg() const { return VMRegImpl::as_VMReg(checked_cast<int>(mask_bits(value(), register_mask_in_place) >> register_shift)); }\n","filename":"src\/hotspot\/share\/compiler\/oopMap.hpp","additions":9,"deletions":9,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -116,1 +116,1 @@\n-        tty->print_cr(\"missing saved register: reg: \" INTPTR_FORMAT \" %s loc: %p\", reg->value(), reg->name(), loc);\n+        tty->print_cr(\"missing saved register: reg: %d %s loc: %p\", reg->value(), reg->name(), loc);\n","filename":"src\/hotspot\/share\/compiler\/oopMap.inline.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -194,1 +194,4 @@\n-  if (hr == nullptr) {\n+\n+  if (hr == nullptr || hr->free() < MinTLABSize) {\n+    \/\/ The next TLAB allocation will most probably happen in a new region,\n+    \/\/ therefore we can attempt to allocate the maximum allowed TLAB size.\n@@ -196,2 +199,0 @@\n-  } else {\n-    return clamp(hr->free(), MinTLABSize, max_tlab);\n@@ -199,0 +200,2 @@\n+\n+  return MIN2(hr->free(), max_tlab);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1Allocator.cpp","additions":6,"deletions":3,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -2489,1 +2489,1 @@\n-  guarantee(!is_gc_active(), \"collection is not reentrant\");\n+  guarantee(!is_stw_gc_active(), \"collection is not reentrant\");\n@@ -2557,1 +2557,1 @@\n-  IsGCActiveMark active_gc_mark;\n+  IsSTWGCActiveMark active_gc_mark;\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CollectedHeap.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -756,1 +756,1 @@\n-  \/\/ precondition: !is_gc_active()\n+  \/\/ precondition: !is_stw_gc_active()\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CollectedHeap.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -136,1 +136,3 @@\n-      return _default_plab_size;\n+    \/\/ There is a circular dependency between the heap and PLAB initialization,\n+    \/\/ so _default_plab_size can have an unaligned value.\n+    return align_object_size(_default_plab_size);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1EvacStats.cpp","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -55,1 +55,1 @@\n-  IsGCActiveMark          _active;\n+  IsSTWGCActiveMark       _active;\n","filename":"src\/hotspot\/share\/gc\/g1\/g1FullGCScope.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1523,1 +1523,1 @@\n-  assert(!_g1h->is_gc_active(), \"Only call concurrently\");\n+  assert(!_g1h->is_stw_gc_active(), \"Only call concurrently\");\n","filename":"src\/hotspot\/share\/gc\/g1\/g1RemSet.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -171,1 +171,1 @@\n-  IsGCActiveMark x;\n+  IsSTWGCActiveMark x;\n","filename":"src\/hotspot\/share\/gc\/g1\/g1VMOperations.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -458,1 +458,1 @@\n-  assert(!is_gc_active(), \"not reentrant\");\n+  assert(!is_stw_gc_active(), \"not reentrant\");\n","filename":"src\/hotspot\/share\/gc\/parallel\/parallelScavengeHeap.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1691,1 +1691,1 @@\n-  assert(!heap->is_gc_active(), \"not reentrant\");\n+  assert(!heap->is_stw_gc_active(), \"not reentrant\");\n@@ -1693,1 +1693,1 @@\n-  IsGCActiveMark mark;\n+  IsSTWGCActiveMark mark;\n@@ -1924,1 +1924,1 @@\n-    assert(ParallelScavengeHeap::heap()->is_gc_active(), \"called outside gc\");\n+    assert(ParallelScavengeHeap::heap()->is_stw_gc_active(), \"called outside gc\");\n@@ -1941,1 +1941,1 @@\n-  assert(ParallelScavengeHeap::heap()->is_gc_active(), \"called outside gc\");\n+  assert(ParallelScavengeHeap::heap()->is_stw_gc_active(), \"called outside gc\");\n@@ -2404,1 +2404,1 @@\n-  assert(ParallelScavengeHeap::heap()->is_gc_active(), \"called outside gc\");\n+  assert(ParallelScavengeHeap::heap()->is_stw_gc_active(), \"called outside gc\");\n","filename":"src\/hotspot\/share\/gc\/parallel\/psParallelCompact.cpp","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -87,1 +87,1 @@\n-  assert(ParallelScavengeHeap::heap()->is_gc_active(), \"called outside gc\");\n+  assert(ParallelScavengeHeap::heap()->is_stw_gc_active(), \"called outside gc\");\n@@ -118,1 +118,1 @@\n-  assert(ParallelScavengeHeap::heap()->is_gc_active(), \"called outside gc\");\n+  assert(ParallelScavengeHeap::heap()->is_stw_gc_active(), \"called outside gc\");\n@@ -235,1 +235,1 @@\n-  assert(!ParallelScavengeHeap::heap()->is_gc_active(), \"not reentrant\");\n+  assert(!ParallelScavengeHeap::heap()->is_stw_gc_active(), \"not reentrant\");\n@@ -239,1 +239,1 @@\n-  IsGCActiveMark mark;\n+  IsSTWGCActiveMark mark;\n@@ -267,1 +267,1 @@\n-    assert(ParallelScavengeHeap::heap()->is_gc_active(), \"called outside gc\");\n+    assert(ParallelScavengeHeap::heap()->is_stw_gc_active(), \"called outside gc\");\n","filename":"src\/hotspot\/share\/gc\/parallel\/psScavenge.cpp","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -244,1 +244,1 @@\n-  _is_gc_active(false),\n+  _is_stw_gc_active(false),\n","filename":"src\/hotspot\/share\/gc\/shared\/collectedHeap.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -97,2 +97,1 @@\n-  friend class IsGCActiveMark; \/\/ Block structured external access to _is_gc_active\n-  friend class DisableIsGCActiveMark; \/\/ Disable current IsGCActiveMark\n+  friend class IsSTWGCActiveMark; \/\/ Block structured external access to _is_stw_gc_active\n@@ -117,1 +116,1 @@\n-  bool _is_gc_active;\n+  bool _is_stw_gc_active;\n@@ -385,4 +384,2 @@\n-  \/\/ Returns \"true\" iff there is a stop-world GC in progress.  (I assume\n-  \/\/ that it should answer \"false\" for the concurrent part of a concurrent\n-  \/\/ collector -- dld).\n-  bool is_gc_active() const { return _is_gc_active; }\n+  \/\/ Returns \"true\" iff there is a stop-world GC in progress.\n+  bool is_stw_gc_active() const { return _is_stw_gc_active; }\n","filename":"src\/hotspot\/share\/gc\/shared\/collectedHeap.hpp","additions":4,"deletions":7,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -44,1 +44,5 @@\n-\n+  if (is_full_gc) {\n+    \/\/ Explicit Full GC would do the clearing of soft-refs as well\n+    \/\/ So reset in the beginning\n+    soft_ref_policy->set_should_clear_all_soft_refs(false);\n+  }\n","filename":"src\/hotspot\/share\/gc\/shared\/gcOverheadChecker.cpp","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -460,1 +460,1 @@\n-  guarantee(!is_gc_active(), \"collection is not reentrant\");\n+  guarantee(!is_stw_gc_active(), \"collection is not reentrant\");\n@@ -471,1 +471,1 @@\n-  AutoModifyRestore<bool> temporarily(_is_gc_active, true);\n+  AutoModifyRestore<bool> temporarily(_is_stw_gc_active, true);\n","filename":"src\/hotspot\/share\/gc\/shared\/genCollectedHeap.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -273,1 +273,1 @@\n-  bool no_gc_in_progress() { return !is_gc_active(); }\n+  bool no_gc_in_progress() { return !is_stw_gc_active(); }\n","filename":"src\/hotspot\/share\/gc\/shared\/genCollectedHeap.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -32,1 +32,1 @@\n-\/\/ _is_gc_active state without requiring accessors in CollectedHeap\n+\/\/ _is_stw_gc_active state without requiring accessors in CollectedHeap\n@@ -34,1 +34,1 @@\n-IsGCActiveMark::IsGCActiveMark() {\n+IsSTWGCActiveMark::IsSTWGCActiveMark() {\n@@ -36,2 +36,2 @@\n-  assert(!heap->is_gc_active(), \"Not reentrant\");\n-  heap->_is_gc_active = true;\n+  assert(!heap->is_stw_gc_active(), \"Not reentrant\");\n+  heap->_is_stw_gc_active = true;\n@@ -40,1 +40,1 @@\n-IsGCActiveMark::~IsGCActiveMark() {\n+IsSTWGCActiveMark::~IsSTWGCActiveMark() {\n@@ -42,14 +42,2 @@\n-  assert(heap->is_gc_active(), \"Sanity\");\n-  heap->_is_gc_active = false;\n-}\n-\n-DisableIsGCActiveMark::DisableIsGCActiveMark() {\n-  CollectedHeap* heap = Universe::heap();\n-  assert(heap->is_gc_active(), \"Not reentrant\");\n-  heap->_is_gc_active = false;\n-}\n-\n-DisableIsGCActiveMark::~DisableIsGCActiveMark() {\n-  CollectedHeap* heap = Universe::heap();\n-  assert(!heap->is_gc_active(), \"Sanity\");\n-  heap->_is_gc_active = true;\n+  assert(heap->is_stw_gc_active(), \"Sanity\");\n+  heap->_is_stw_gc_active = false;\n","filename":"src\/hotspot\/share\/gc\/shared\/isGCActiveMark.cpp","additions":7,"deletions":19,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -31,1 +31,1 @@\n-\/\/ _is_gc_active state without requiring accessors in CollectedHeap\n+\/\/ _is_stw_gc_active state without requiring accessors in CollectedHeap\n@@ -33,1 +33,1 @@\n-class IsGCActiveMark : public StackObj {\n+class IsSTWGCActiveMark : public StackObj {\n@@ -35,8 +35,2 @@\n-  IsGCActiveMark();\n-  ~IsGCActiveMark();\n-};\n-\n-class DisableIsGCActiveMark : public StackObj {\n- public:\n-  DisableIsGCActiveMark();\n-  ~DisableIsGCActiveMark();\n+  IsSTWGCActiveMark();\n+  ~IsSTWGCActiveMark();\n","filename":"src\/hotspot\/share\/gc\/shared\/isGCActiveMark.hpp","additions":4,"deletions":10,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -148,1 +148,1 @@\n-  assert(!Universe::heap()->is_gc_active(), \"Allocation during gc not allowed\");\n+  assert(!Universe::heap()->is_stw_gc_active(), \"Allocation during GC pause not allowed\");\n@@ -317,0 +317,1 @@\n+  \/\/ ...and clear or zap just allocated TLAB, if needed.\n@@ -318,1 +319,0 @@\n-    \/\/ ..and clear it.\n@@ -320,3 +320,1 @@\n-  } else {\n-    \/\/ ...and zap just allocated object.\n-#ifdef ASSERT\n+  } else if (ZapTLAB) {\n@@ -328,1 +326,0 @@\n-#endif \/\/ ASSERT\n","filename":"src\/hotspot\/share\/gc\/shared\/memAllocator.cpp","additions":3,"deletions":6,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -54,0 +54,7 @@\n+  uint obj_alignment = checked_cast<uint>(ObjectAlignmentInBytes \/ HeapWordSize);\n+  if (!is_aligned(YoungPLABSize, obj_alignment)) {\n+    FLAG_SET_ERGO(YoungPLABSize, align_up(YoungPLABSize, obj_alignment));\n+  }\n+  if (!is_aligned(OldPLABSize, obj_alignment)) {\n+    FLAG_SET_ERGO(OldPLABSize, align_up(OldPLABSize, obj_alignment));\n+  }\n","filename":"src\/hotspot\/share\/gc\/shared\/plab.cpp","additions":7,"deletions":0,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -71,6 +71,0 @@\n-#ifdef LINUX\n-  \/\/ When using THP we need to always pre-touch using small pages as the OS will\n-  \/\/ initially always use small pages.\n-  page_size = UseTransparentHugePages ? (size_t)os::vm_page_size() : page_size;\n-#endif\n-\n","filename":"src\/hotspot\/share\/gc\/shared\/pretouchTask.cpp","additions":0,"deletions":6,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1999, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1999, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -42,8 +42,2 @@\n-    \/\/ successful thread-local allocation\n-#ifdef ASSERT\n-    \/\/ Skip mangling the space corresponding to the object header to\n-    \/\/ ensure that the returned space is not considered parsable by\n-    \/\/ any concurrent GC thread.\n-    size_t hdr_size = oopDesc::header_size();\n-    Copy::fill_to_words(obj + hdr_size, size - hdr_size, badHeapWordVal);\n-#endif \/\/ ASSERT\n+    \/\/ Successful thread-local allocation.\n+\n","filename":"src\/hotspot\/share\/gc\/shared\/threadLocalAllocBuffer.inline.hpp","additions":3,"deletions":9,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -99,1 +99,1 @@\n-  nonstatic_field(CollectedHeap,               _is_gc_active,                                 bool)                                  \\\n+  nonstatic_field(CollectedHeap,               _is_stw_gc_active,                             bool)                                  \\\n","filename":"src\/hotspot\/share\/gc\/shared\/vmStructs_gc.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1232,1 +1232,1 @@\n-    return n->as_If()->dominated_by(prev_dom, phase->is_IterGVN());\n+    return n->as_If()->dominated_by(prev_dom, phase->is_IterGVN(), false);\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/c2\/shenandoahBarrierSetC2.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -39,0 +39,6 @@\n+  if (!is_armed(nm)) {\n+    \/\/ Some other thread got here first and healed the oops\n+    \/\/ and disarmed the nmethod. No need to continue.\n+    return true;\n+  }\n+\n@@ -44,2 +50,2 @@\n-    \/\/ Some other thread got here first and healed the oops\n-    \/\/ and disarmed the nmethod.\n+    \/\/ Some other thread managed to complete while we were\n+    \/\/ waiting for lock. No need to continue.\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahBarrierSetNMethod.cpp","additions":8,"deletions":2,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,0 +2,1 @@\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -106,7 +107,0 @@\n-    MutexLocker mu(CodeCache_lock, Mutex::_no_safepoint_check_flag);\n-    _iterator.nmethods_do_begin();\n-  }\n-\n-  ~ShenandoahDisarmNMethodsTask() {\n-    MutexLocker mu(CodeCache_lock, Mutex::_no_safepoint_check_flag);\n-    _iterator.nmethods_do_end();\n@@ -194,9 +188,1 @@\n-    _iterator(ShenandoahCodeRoots::table()) {\n-    MutexLocker mu(CodeCache_lock, Mutex::_no_safepoint_check_flag);\n-    _iterator.nmethods_do_begin();\n-  }\n-\n-  ~ShenandoahUnlinkTask() {\n-    MutexLocker mu(CodeCache_lock, Mutex::_no_safepoint_check_flag);\n-    _iterator.nmethods_do_end();\n-  }\n+    _iterator(ShenandoahCodeRoots::table()) {}\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahCodeRoots.cpp","additions":2,"deletions":16,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -2,0 +2,1 @@\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -943,6 +944,1 @@\n-    _phase(phase) {\n-    if (ShenandoahHeap::heap()->unload_classes()) {\n-      MutexLocker mu(CodeCache_lock, Mutex::_no_safepoint_check_flag);\n-      _nmethod_itr.nmethods_do_begin();\n-    }\n-  }\n+    _phase(phase) {}\n@@ -951,4 +947,0 @@\n-    if (ShenandoahHeap::heap()->unload_classes()) {\n-      MutexLocker mu(CodeCache_lock, Mutex::_no_safepoint_check_flag);\n-      _nmethod_itr.nmethods_do_end();\n-    }\n@@ -1059,13 +1051,1 @@\n-    _nmethod_itr(ShenandoahCodeRoots::table()) {\n-    if (!ShenandoahHeap::heap()->unload_classes()) {\n-      MutexLocker mu(CodeCache_lock, Mutex::_no_safepoint_check_flag);\n-      _nmethod_itr.nmethods_do_begin();\n-    }\n-  }\n-\n-  ~ShenandoahConcurrentRootsEvacUpdateTask() {\n-    if (!ShenandoahHeap::heap()->unload_classes()) {\n-      MutexLocker mu(CodeCache_lock, Mutex::_no_safepoint_check_flag);\n-      _nmethod_itr.nmethods_do_end();\n-    }\n-  }\n+    _nmethod_itr(ShenandoahCodeRoots::table()) {}\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahConcurrentGC.cpp","additions":3,"deletions":23,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -925,0 +925,1 @@\n+  \/\/ ...and clear or zap just allocated TLAB, if needed.\n@@ -926,1 +927,0 @@\n-    \/\/ ..and clear it.\n@@ -928,3 +928,1 @@\n-  } else {\n-    \/\/ ...and zap just allocated object.\n-#ifdef ASSERT\n+  } else if (ZapTLAB) {\n@@ -936,1 +934,0 @@\n-#endif \/\/ ASSERT\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahHeap.cpp","additions":2,"deletions":5,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -35,9 +35,0 @@\n-\/\/ These are inline variants of Thread::SpinAcquire with optional blocking in VM.\n-\n-class ShenandoahNoBlockOp : public StackObj {\n-public:\n-  ShenandoahNoBlockOp(JavaThread* java_thread) {\n-    assert(java_thread == nullptr, \"Should not pass anything\");\n-  }\n-};\n-\n@@ -47,1 +38,1 @@\n-    contended_lock_internal<ThreadBlockInVM>(JavaThread::cast(thread));\n+    contended_lock_internal<true>(JavaThread::cast(thread));\n@@ -49,1 +40,1 @@\n-    contended_lock_internal<ShenandoahNoBlockOp>(nullptr);\n+    contended_lock_internal<false>(nullptr);\n@@ -53,1 +44,1 @@\n-template<typename BlockOp>\n+template<bool ALLOW_BLOCK>\n@@ -55,7 +46,27 @@\n-  int ctr = 0;\n-  int yields = 0;\n-  while (Atomic::cmpxchg(&_state, unlocked, locked) != unlocked) {\n-    if ((++ctr & 0xFFF) == 0) {\n-      BlockOp block(java_thread);\n-      if (yields > 5) {\n-        os::naked_short_sleep(1);\n+  assert(!ALLOW_BLOCK || java_thread != nullptr, \"Must have a Java thread when allowing block.\");\n+  \/\/ Spin this much, but only on multi-processor systems.\n+  int ctr = os::is_MP() ? 0xFF : 0;\n+  \/\/ Apply TTAS to avoid more expensive CAS calls if the lock is still held by other thread.\n+  while (Atomic::load(&_state) == locked ||\n+         Atomic::cmpxchg(&_state, unlocked, locked) != unlocked) {\n+    if (ctr > 0 && !SafepointSynchronize::is_synchronizing()) {\n+      \/\/ Lightly contended, spin a little if no safepoint is pending.\n+      SpinPause();\n+      ctr--;\n+    } else if (ALLOW_BLOCK) {\n+      ThreadBlockInVM block(java_thread);\n+      if (SafepointSynchronize::is_synchronizing()) {\n+        \/\/ If safepoint is pending, we want to block and allow safepoint to proceed.\n+        \/\/ Normally, TBIVM above would block us in its destructor.\n+        \/\/\n+        \/\/ But that blocking only happens when TBIVM knows the thread poll is armed.\n+        \/\/ There is a window between announcing a safepoint and arming the thread poll\n+        \/\/ during which trying to continuously enter TBIVM is counter-productive.\n+        \/\/ Under high contention, we may end up going in circles thousands of times.\n+        \/\/ To avoid it, we wait here until local poll is armed and then proceed\n+        \/\/ to TBVIM exit for blocking. We do not SpinPause, but yield to let\n+        \/\/ VM thread to arm the poll sooner.\n+        while (SafepointSynchronize::is_synchronizing() &&\n+               !SafepointMechanism::local_poll_armed(java_thread)) {\n+          os::naked_yield();\n+        }\n@@ -64,1 +75,0 @@\n-        yields++;\n@@ -67,1 +77,1 @@\n-      SpinPause();\n+      os::naked_yield();\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahLock.cpp","additions":31,"deletions":21,"binary":false,"changes":52,"status":"modified"},{"patch":"@@ -40,1 +40,1 @@\n-  volatile Thread* _owner;\n+  Thread* volatile _owner;\n@@ -43,1 +43,1 @@\n-  template<typename BlockOp>\n+  template<bool ALLOW_BLOCK>\n@@ -45,1 +45,0 @@\n-\n@@ -52,2 +51,5 @@\n-    \/\/ Try to lock fast, or dive into contended lock handling.\n-    if (Atomic::cmpxchg(&_state, unlocked, locked) != unlocked) {\n+    if ((allow_block_for_safepoint && SafepointSynchronize::is_synchronizing()) ||\n+        (Atomic::cmpxchg(&_state, unlocked, locked) != unlocked)) {\n+      \/\/ 1. Java thread, and there is a pending safepoint. Dive into contended locking\n+      \/\/    immediately without trying anything else, and block.\n+      \/\/ 2. Fast lock fails, dive into contended lock handling.\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahLock.hpp","additions":7,"deletions":5,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,0 +2,1 @@\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,0 +34,1 @@\n+#include \"runtime\/safepointVerifiers.hpp\"\n@@ -477,7 +479,4 @@\n-  _table(table), _table_snapshot(nullptr) {\n-}\n-\n-void ShenandoahConcurrentNMethodIterator::nmethods_do_begin() {\n-  assert(CodeCache_lock->owned_by_self(), \"Lock must be held\");\n-  _table_snapshot = _table->snapshot_for_iteration();\n-}\n+  _table(table),\n+  _table_snapshot(nullptr),\n+  _started_workers(0),\n+  _finished_workers(0) {}\n@@ -486,3 +485,3 @@\n-  assert(_table_snapshot != nullptr, \"Must first call nmethod_do_begin()\");\n-  _table_snapshot->concurrent_nmethods_do(cl);\n-}\n+  \/\/ Cannot safepoint when iteration is running, because this can cause deadlocks\n+  \/\/ with other threads waiting on iteration to be over.\n+  NoSafepointVerifier nsv;\n@@ -490,4 +489,26 @@\n-void ShenandoahConcurrentNMethodIterator::nmethods_do_end() {\n-  assert(CodeCache_lock->owned_by_self(), \"Lock must be held\");\n-  _table->finish_iteration(_table_snapshot);\n-  CodeCache_lock->notify_all();\n+  MutexLocker ml(CodeCache_lock, Mutex::_no_safepoint_check_flag);\n+\n+  if (_finished_workers > 0) {\n+    \/\/ Some threads have already finished. We are now in rampdown: we are now\n+    \/\/ waiting for all currently recorded workers to finish. No new workers\n+    \/\/ should start.\n+    return;\n+  }\n+\n+  \/\/ Record a new worker and initialize the snapshot if it is a first visitor.\n+  if (_started_workers++ == 0) {\n+    _table_snapshot = _table->snapshot_for_iteration();\n+  }\n+\n+  \/\/ All set, relinquish the lock and go concurrent.\n+  {\n+    MutexUnlocker mu(CodeCache_lock, Mutex::_no_safepoint_check_flag);\n+    _table_snapshot->concurrent_nmethods_do(cl);\n+  }\n+\n+  \/\/ Record completion. Last worker shuts down the iterator and notifies any waiters.\n+  uint count = ++_finished_workers;\n+  if (count == _started_workers) {\n+    _table->finish_iteration(_table_snapshot);\n+    CodeCache_lock->notify_all();\n+  }\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahNMethod.cpp","additions":35,"deletions":14,"binary":false,"changes":49,"status":"modified"},{"patch":"@@ -181,0 +181,2 @@\n+  uint                                  _started_workers;\n+  uint                                  _finished_workers;\n@@ -185,1 +187,0 @@\n-  void nmethods_do_begin();\n@@ -187,1 +188,0 @@\n-  void nmethods_do_end();\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahNMethod.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -153,1 +153,1 @@\n-  const IsGCActiveMark          _is_gc_active_mark;\n+  const IsSTWGCActiveMark       _is_gc_active_mark;\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahUtils.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -119,1 +119,1 @@\n-    IsGCActiveMark gc_active_mark;\n+    IsSTWGCActiveMark gc_active_mark;\n","filename":"src\/hotspot\/share\/gc\/x\/xDriver.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -527,0 +527,4 @@\n+  if (!stats._old_stats._cycle._is_time_trustable) {\n+    return 1.0;\n+  }\n+\n","filename":"src\/hotspot\/share\/gc\/z\/zDirector.cpp","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -441,1 +441,1 @@\n-    IsGCActiveMark gc_active_mark;\n+    IsSTWGCActiveMark gc_active_mark;\n","filename":"src\/hotspot\/share\/gc\/z\/zGeneration.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -496,3 +496,0 @@\n-    \/\/ Workaround OopMapCacheAlloc_lock reordering with the StackWatermark_lock\n-    DisableIsGCActiveMark mark;\n-\n","filename":"src\/hotspot\/share\/gc\/z\/zVerify.cpp","additions":0,"deletions":3,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -40,0 +40,1 @@\n+          range(0, 100)                                                     \\\n","filename":"src\/hotspot\/share\/gc\/z\/z_globals.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -1798,1 +1798,1 @@\n-  \/\/ a lock to do the final serialization of updates\n+  \/\/ an ObjectLocker to do the final serialization of updates\n","filename":"src\/hotspot\/share\/interpreter\/linkResolver.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -56,0 +56,2 @@\n+  static void deallocate(OopMapCacheEntry* const entry);\n+\n@@ -180,12 +182,0 @@\n-InterpreterOopMap::~InterpreterOopMap() {\n-  \/\/ The expectation is that the bit mask was allocated\n-  \/\/ last in this resource area.  That would make the free of the\n-  \/\/ bit_mask effective (see how FREE_RESOURCE_ARRAY does a free).\n-  \/\/ If it was not allocated last, there is not a correctness problem\n-  \/\/ but the space for the bit_mask is not freed.\n-  assert(_resource_allocate_bit_mask, \"Trying to free C heap space\");\n-  if (mask_size() > small_mask_limit) {\n-    FREE_RESOURCE_ARRAY(uintptr_t, _bit_mask[0], mask_word_size());\n-  }\n-}\n-\n@@ -402,0 +392,4 @@\n+void OopMapCacheEntry::deallocate(OopMapCacheEntry* const entry) {\n+  entry->flush();\n+  FREE_C_HEAP_OBJ(entry);\n+}\n@@ -475,2 +469,1 @@\n-      entry->flush();\n-      FREE_C_HEAP_OBJ(entry);\n+      OopMapCacheEntry::deallocate(entry);\n@@ -495,2 +488,1 @@\n-      entry->flush();\n-      FREE_C_HEAP_OBJ(entry);\n+      OopMapCacheEntry::deallocate(entry);\n@@ -543,2 +535,1 @@\n-    tmp->flush();\n-    FREE_C_HEAP_OBJ(tmp);\n+    OopMapCacheEntry::deallocate(tmp);\n@@ -567,1 +558,1 @@\n-    enqueue_for_cleanup(tmp);\n+    OopMapCacheEntry::deallocate(tmp);\n@@ -602,2 +593,1 @@\n-    entry->flush();\n-    FREE_C_HEAP_OBJ(entry);\n+    OopMapCacheEntry::deallocate(entry);\n@@ -614,2 +604,1 @@\n-  tmp->flush();\n-  FREE_C_HEAP_OBJ(tmp);\n+  OopMapCacheEntry::deallocate(tmp);\n","filename":"src\/hotspot\/share\/interpreter\/oopMapCache.cpp","additions":12,"deletions":23,"binary":false,"changes":35,"status":"modified"},{"patch":"@@ -129,1 +129,0 @@\n-  ~InterpreterOopMap();\n","filename":"src\/hotspot\/share\/interpreter\/oopMapCache.hpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2002, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2002, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -1992,5 +1992,3 @@\n-              \/\/ Initialize object field block:\n-              \/\/   - if TLAB is pre-zeroed, we can skip this path\n-              \/\/   - in debug mode, ThreadLocalAllocBuffer::allocate mangles\n-              \/\/     this area, and we still need to initialize it\n-              if (DEBUG_ONLY(true ||) !ZeroTLAB) {\n+              \/\/ Initialize object field block.\n+              if (!ZeroTLAB) {\n+                \/\/ The TLAB was not pre-zeroed, we need to clear the memory here.\n","filename":"src\/hotspot\/share\/interpreter\/zero\/bytecodeInterpreter.cpp","additions":4,"deletions":6,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -159,0 +159,2 @@\n+  \/\/ WXWrite is needed before entering the vm below and in callee methods.\n+  MACOS_AARCH64_ONLY(ThreadWXEnable __wx(WXWrite, THREAD));\n","filename":"src\/hotspot\/share\/jfr\/instrumentation\/jfrJvmtiAgent.cpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -115,1 +115,3 @@\n-    ThreadInVMfromNative transition(JavaThread::thread_from_jni_environment(env));\n+    JavaThread* thread = JavaThread::thread_from_jni_environment(env);\n+    MACOS_AARCH64_ONLY(ThreadWXEnable __wx(WXWrite, thread));\n+    ThreadInVMfromNative transition(thread);\n","filename":"src\/hotspot\/share\/jfr\/jni\/jfrJniMethod.cpp","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -217,3 +217,0 @@\n-  ~StackTraceBlobInstaller() {\n-    JfrStackTraceRepository::clear_leak_profiler();\n-  }\n@@ -273,5 +270,8 @@\n-  \/\/ can safepoint here\n-  ThreadInVMfromNative transition(thread);\n-  MutexLocker lock(ClassLoaderDataGraph_lock);\n-  \/\/ the lock is needed to ensure the unload lists do not grow in the middle of inspection.\n-  install_stack_traces(sampler);\n+  {\n+    \/\/ can safepoint here\n+    ThreadInVMfromNative transition(thread);\n+    MutexLocker lock(ClassLoaderDataGraph_lock);\n+    \/\/ the lock is needed to ensure the unload lists do not grow in the middle of inspection.\n+    install_stack_traces(sampler);\n+  }\n+  JfrStackTraceRepository::clear_leak_profiler();\n","filename":"src\/hotspot\/share\/jfr\/leakprofiler\/checkpoint\/objectSampleCheckpoint.cpp","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -251,6 +251,0 @@\n-    \/\/ Traverse the monitor chunks\n-    MonitorChunk* chunk = jt->monitor_chunks();\n-    for (; chunk != nullptr; chunk = chunk->next()) {\n-      chunk->oops_do(&rcl);\n-    }\n-\n","filename":"src\/hotspot\/share\/jfr\/leakprofiler\/checkpoint\/rootResolver.cpp","additions":1,"deletions":7,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -1107,1 +1107,1 @@\n-  <Event name=\"ZAllocationStall\" category=\"Java Virtual Machine, GC, Detailed\" label=\"ZGC Allocation Stall\" description=\"Time spent waiting for memory to become available\" thread=\"true\">\n+  <Event name=\"ZAllocationStall\" category=\"Java Virtual Machine, GC, Detailed\" label=\"ZGC Allocation Stall\" description=\"Time spent waiting for memory to become available\" thread=\"true\" stackTrace=\"true\">\n","filename":"src\/hotspot\/share\/jfr\/metadata\/metadata.xml","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -112,0 +112,3 @@\n+    if (buffer == nullptr) {\n+      return false;\n+    }\n","filename":"src\/hotspot\/share\/jfr\/recorder\/checkpoint\/jfrCheckpointManager.cpp","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -222,1 +222,1 @@\n-  writer->write(get_flags(klass));\n+  writer->write(klass->modifier_flags());\n","filename":"src\/hotspot\/share\/jfr\/recorder\/checkpoint\/types\/jfrTypeSet.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -572,3 +572,1 @@\n-  if (_stack_trace_repository.is_modified()) {\n-    write_stacktrace(_stack_trace_repository, _chunkwriter, false);\n-  }\n+  write_stacktrace(_stack_trace_repository, _chunkwriter, true);\n","filename":"src\/hotspot\/share\/jfr\/recorder\/service\/jfrRecorderService.cpp","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -101,0 +101,1 @@\n+  MutexLocker lock(JfrStacktrace_lock, Mutex::_no_safepoint_check_flag);\n@@ -104,2 +105,0 @@\n-  MutexLocker lock(JfrStacktrace_lock, Mutex::_no_safepoint_check_flag);\n-  assert(_entries > 0, \"invariant\");\n","filename":"src\/hotspot\/share\/jfr\/recorder\/stacktrace\/jfrStackTraceRepository.cpp","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -294,0 +294,1 @@\n+        MACOS_AARCH64_ONLY(ThreadWXEnable __wx(WXWrite, jt));\n","filename":"src\/hotspot\/share\/jfr\/recorder\/storage\/jfrStorage.cpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -134,0 +134,3 @@\n+    if (buffer == nullptr) {\n+      return false;\n+    }\n","filename":"src\/hotspot\/share\/jfr\/recorder\/stringpool\/jfrStringPool.cpp","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -59,0 +59,1 @@\n+  MACOS_AARCH64_ONLY(ThreadWXEnable __wx(WXWrite, jt));\n","filename":"src\/hotspot\/share\/jfr\/support\/jfrIntrinsics.cpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -126,0 +126,1 @@\n+  MACOS_AARCH64_ONLY(ThreadWXEnable __wx(WXWrite, jt));\n","filename":"src\/hotspot\/share\/jfr\/writers\/jfrJavaEventWriter.cpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -862,1 +862,1 @@\n-  assert(!Universe::heap()->is_gc_active(), \"can't extend the root set during GC\");\n+  assert(!Universe::heap()->is_stw_gc_active(), \"can't extend the root set during GC pause\");\n","filename":"src\/hotspot\/share\/jvmci\/jvmciRuntime.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -36,1 +36,3 @@\n-    memcpy(innerp, ptr, len);\n+    if (ptr != nullptr) {\n+      memcpy(innerp, ptr, len);\n+    }\n","filename":"src\/hotspot\/share\/memory\/guardedMemory.cpp","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -46,0 +46,12 @@\n+ResourceMark::ResourceMark(ResourceArea* area, Thread* thread) :\n+    _impl(area),\n+    _thread(thread),\n+    _previous_resource_mark(nullptr)\n+{\n+  if (_thread != nullptr) {\n+    assert(_thread == Thread::current(), \"not the current thread\");\n+    _previous_resource_mark = _thread->current_resource_mark();\n+    _thread->set_current_resource_mark(this);\n+  }\n+}\n+\n","filename":"src\/hotspot\/share\/memory\/resourceArea.cpp","additions":13,"deletions":1,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -194,11 +194,1 @@\n-  ResourceMark(ResourceArea* area, Thread* thread) :\n-    _impl(area),\n-    _thread(thread),\n-    _previous_resource_mark(nullptr)\n-  {\n-    if (_thread != nullptr) {\n-      assert(_thread == Thread::current(), \"not the current thread\");\n-      _previous_resource_mark = _thread->current_resource_mark();\n-      _thread->set_current_resource_mark(this);\n-    }\n-  }\n+  ResourceMark(ResourceArea* area, Thread* thread);\n","filename":"src\/hotspot\/share\/memory\/resourceArea.hpp","additions":2,"deletions":12,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -1294,2 +1294,2 @@\n-bool Universe::is_gc_active() {\n-  return heap()->is_gc_active();\n+bool Universe::is_stw_gc_active() {\n+  return heap()->is_stw_gc_active();\n","filename":"src\/hotspot\/share\/memory\/universe.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -323,1 +323,1 @@\n-  DEBUG_ONLY(static bool is_gc_active();)\n+  DEBUG_ONLY(static bool is_stw_gc_active();)\n","filename":"src\/hotspot\/share\/memory\/universe.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -159,1 +159,1 @@\n-  assert(decode_not_null(result, narrow_base) == v, \"reversibility\");\n+  assert(decode_not_null((narrowKlass)result, narrow_base) == v, \"reversibility\");\n","filename":"src\/hotspot\/share\/oops\/compressedOops.inline.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -54,0 +54,1 @@\n+#include \"runtime\/synchronizer.hpp\"\n@@ -254,1 +255,1 @@\n-             method->method_holder()->is_init_thread(JavaThread::current()),\n+             method->method_holder()->is_reentrant_initialization(JavaThread::current()),\n@@ -357,0 +358,1 @@\n+\n@@ -358,1 +360,8 @@\n-  MutexLocker ml(cpool->pool_holder()->init_monitor());\n+  JavaThread* current = JavaThread::current();\n+  objArrayHandle resolved_references(current, cpool->resolved_references());\n+  \/\/ Use the resolved_references() lock for this cpCache entry.\n+  \/\/ resolved_references are created for all classes with Invokedynamic, MethodHandle\n+  \/\/ or MethodType constant pool cache entries.\n+  assert(resolved_references() != nullptr,\n+         \"a resolved_references array should have been created for this class\");\n+  ObjectLocker ol(resolved_references, current);\n@@ -841,1 +850,8 @@\n-  MutexLocker ml(THREAD, cpool->pool_holder()->init_monitor());\n+  \/\/ Use the resolved_references() lock for this cpCache entry.\n+  \/\/ resolved_references are created for all classes with Invokedynamic, MethodHandle\n+  \/\/ or MethodType constant pool cache entries.\n+  JavaThread* current = THREAD;\n+  objArrayHandle resolved_references(current, cpool->resolved_references());\n+  assert(resolved_references() != nullptr,\n+         \"a resolved_references array should have been created for this class\");\n+  ObjectLocker ol(resolved_references, current);\n@@ -865,1 +881,11 @@\n-  MutexLocker ml(constant_pool()->pool_holder()->init_monitor());\n+\n+  \/\/ Use the resolved_references() lock for this cpCache entry.\n+  \/\/ resolved_references are created for all classes with Invokedynamic, MethodHandle\n+  \/\/ or MethodType constant pool cache entries.\n+  JavaThread* current = JavaThread::current();\n+  constantPoolHandle cp(current, constant_pool());\n+\n+  objArrayHandle resolved_references(current, cp->resolved_references());\n+  assert(resolved_references() != nullptr,\n+         \"a resolved_references array should have been created for this class\");\n+  ObjectLocker ol(resolved_references, current);\n@@ -869,1 +895,1 @@\n-    return constant_pool()->resolved_reference_from_indy(index);\n+    return cp->resolved_reference_from_indy(index);\n@@ -878,3 +904,1 @@\n-    JavaThread* THREAD = JavaThread::current(); \/\/ For exception macros.\n-    constantPoolHandle cp(THREAD, constant_pool());\n-    ConstantPool::throw_resolution_error(cp, encoded_index, THREAD);\n+    ConstantPool::throw_resolution_error(cp, encoded_index, current);\n@@ -904,1 +928,0 @@\n-    objArrayOop resolved_references = constant_pool()->resolved_references();\n","filename":"src\/hotspot\/share\/oops\/cpCache.cpp","additions":32,"deletions":9,"binary":false,"changes":41,"status":"modified"},{"patch":"@@ -86,0 +86,1 @@\n+#include \"runtime\/synchronizer.hpp\"\n@@ -497,4 +498,0 @@\n-static Monitor* create_init_monitor(const char* name) {\n-  return new Monitor(Mutex::safepoint, name);\n-}\n-\n@@ -513,1 +510,0 @@\n-  _init_monitor(create_init_monitor(\"InstanceKlassInitMonitor_lock\")),\n@@ -741,0 +737,22 @@\n+oop InstanceKlass::init_lock() const {\n+  \/\/ return the init lock from the mirror\n+  oop lock = java_lang_Class::init_lock(java_mirror());\n+  \/\/ Prevent reordering with any access of initialization state\n+  OrderAccess::loadload();\n+  assert(lock != nullptr || !is_not_initialized(), \/\/ initialized or in_error state\n+         \"only fully initialized state can have a null lock\");\n+  return lock;\n+}\n+\n+\/\/ Set the initialization lock to null so the object can be GC'ed.  Any racing\n+\/\/ threads to get this lock will see a null lock and will not lock.\n+\/\/ That's okay because they all check for initialized state after getting\n+\/\/ the lock and return.\n+void InstanceKlass::fence_and_clear_init_lock() {\n+  \/\/ make sure previous stores are all done, notably the init_state.\n+  OrderAccess::storestore();\n+  java_lang_Class::clear_init_lock(java_mirror());\n+  assert(!is_not_initialized(), \"class must be initialized now\");\n+}\n+\n+\n@@ -768,43 +786,0 @@\n-void InstanceKlass::check_link_state_and_wait(JavaThread* current) {\n-  MonitorLocker ml(current, _init_monitor);\n-\n-  bool debug_logging_enabled = log_is_enabled(Debug, class, init);\n-\n-  \/\/ Another thread is linking this class, wait.\n-  while (is_being_linked() && !is_init_thread(current)) {\n-    if (debug_logging_enabled) {\n-      ResourceMark rm(current);\n-      log_debug(class, init)(\"Thread \\\"%s\\\" waiting for linking of %s by thread \\\"%s\\\"\",\n-                             current->name(), external_name(), init_thread_name());\n-    }\n-    ml.wait();\n-  }\n-\n-  \/\/ This thread is recursively linking this class, continue\n-  if (is_being_linked() && is_init_thread(current)) {\n-    if (debug_logging_enabled) {\n-      ResourceMark rm(current);\n-      log_debug(class, init)(\"Thread \\\"%s\\\" recursively linking %s\",\n-                             current->name(), external_name());\n-    }\n-    return;\n-  }\n-\n-  \/\/ If this class wasn't linked already, set state to being_linked\n-  if (!is_linked()) {\n-    if (debug_logging_enabled) {\n-      ResourceMark rm(current);\n-      log_debug(class, init)(\"Thread \\\"%s\\\" linking %s\",\n-                             current->name(), external_name());\n-    }\n-    set_init_state(being_linked);\n-    set_init_thread(current);\n-  } else {\n-    if (debug_logging_enabled) {\n-      ResourceMark rm(current);\n-      log_debug(class, init)(\"Thread \\\"%s\\\" found %s already linked\",\n-                             current->name(), external_name());\n-      }\n-  }\n-}\n-\n@@ -889,2 +864,3 @@\n-    LockLinkState init_lock(this, jt);\n-\n+    HandleMark hm(THREAD);\n+    Handle h_init_lock(THREAD, init_lock());\n+    ObjectLocker ol(h_init_lock, jt);\n@@ -948,1 +924,15 @@\n-      set_initialization_state_and_notify(linked, THREAD);\n+      if (UseVtableBasedCHA && Universe::is_fully_initialized()) {\n+        DeoptimizationScope deopt_scope;\n+        {\n+          \/\/ Now mark all code that assumes the class is not linked.\n+          \/\/ Set state under the Compile_lock also.\n+          MutexLocker ml(THREAD, Compile_lock);\n+\n+          set_init_state(linked);\n+          CodeCache::mark_dependents_on(&deopt_scope, this);\n+        }\n+        \/\/ Perform the deopt handshake outside Compile_lock.\n+        deopt_scope.deoptimize_marked();\n+      } else {\n+        set_init_state(linked);\n+      }\n@@ -1069,1 +1059,0 @@\n-  bool throw_error = false;\n@@ -1078,1 +1067,2 @@\n-    MonitorLocker ml(jt, _init_monitor);\n+    Handle h_init_lock(THREAD, init_lock());\n+    ObjectLocker ol(h_init_lock, jt);\n@@ -1081,1 +1071,4 @@\n-    while (is_being_initialized() && !is_init_thread(jt)) {\n+    \/\/ If we were to use wait() instead of waitInterruptibly() then\n+    \/\/ we might end up throwing IE from link\/symbol resolution sites\n+    \/\/ that aren't expected to throw.  This would wreak havoc.  See 6320309.\n+    while (is_being_initialized() && !is_reentrant_initialization(jt)) {\n@@ -1090,1 +1083,1 @@\n-      ml.wait();\n+      ol.wait_uninterruptibly(jt);\n@@ -1095,1 +1088,1 @@\n-    if (is_being_initialized() && is_init_thread(jt)) {\n+    if (is_being_initialized() && is_reentrant_initialization(jt)) {\n@@ -1123,1 +1116,13 @@\n-      throw_error = true;\n+\n+      DTRACE_CLASSINIT_PROBE_WAIT(erroneous, -1, wait);\n+      ResourceMark rm(THREAD);\n+      Handle cause(THREAD, get_initialization_error(THREAD));\n+\n+      stringStream ss;\n+      ss.print(\"Could not initialize class %s\", external_name());\n+      if (cause.is_null()) {\n+        THROW_MSG(vmSymbols::java_lang_NoClassDefFoundError(), ss.as_string());\n+      } else {\n+        THROW_MSG_CAUSE(vmSymbols::java_lang_NoClassDefFoundError(),\n+                        ss.as_string(), cause);\n+      }\n@@ -1137,16 +1142,0 @@\n-  \/\/ Throw error outside lock\n-  if (throw_error) {\n-    DTRACE_CLASSINIT_PROBE_WAIT(erroneous, -1, wait);\n-    ResourceMark rm(THREAD);\n-    Handle cause(THREAD, get_initialization_error(THREAD));\n-\n-    stringStream ss;\n-    ss.print(\"Could not initialize class %s\", external_name());\n-    if (cause.is_null()) {\n-      THROW_MSG(vmSymbols::java_lang_NoClassDefFoundError(), ss.as_string());\n-    } else {\n-      THROW_MSG_CAUSE(vmSymbols::java_lang_NoClassDefFoundError(),\n-                      ss.as_string(), cause);\n-    }\n-  }\n-\n@@ -1210,1 +1199,1 @@\n-    set_initialization_state_and_notify(fully_initialized, THREAD);\n+    set_initialization_state_and_notify(fully_initialized, CHECK);\n@@ -1243,17 +1232,8 @@\n-void InstanceKlass::set_initialization_state_and_notify(ClassState state, JavaThread* current) {\n-  MonitorLocker ml(current, _init_monitor);\n-\n-  if (state == linked && UseVtableBasedCHA && Universe::is_fully_initialized()) {\n-    DeoptimizationScope deopt_scope;\n-    {\n-      \/\/ Now mark all code that assumes the class is not linked.\n-      \/\/ Set state under the Compile_lock also.\n-      MutexLocker ml(current, Compile_lock);\n-\n-      set_init_thread(nullptr); \/\/ reset _init_thread before changing _init_state\n-      set_init_state(state);\n-\n-      CodeCache::mark_dependents_on(&deopt_scope, this);\n-    }\n-    \/\/ Perform the deopt handshake outside Compile_lock.\n-    deopt_scope.deoptimize_marked();\n+void InstanceKlass::set_initialization_state_and_notify(ClassState state, TRAPS) {\n+  Handle h_init_lock(THREAD, init_lock());\n+  if (h_init_lock() != nullptr) {\n+    ObjectLocker ol(h_init_lock, THREAD);\n+    set_init_thread(nullptr); \/\/ reset _init_thread before changing _init_state\n+    set_init_state(state);\n+    fence_and_clear_init_lock();\n+    ol.notify_all(CHECK);\n@@ -1261,0 +1241,1 @@\n+    assert(h_init_lock() != nullptr, \"The initialization state should never be set twice\");\n@@ -1264,1 +1245,0 @@\n-  ml.notify_all();\n@@ -1269,1 +1249,1 @@\n-void InstanceKlass::add_to_hierarchy(JavaThread* current) {\n+void InstanceKlass::add_to_hierarchy_impl(JavaThread* current) {\n@@ -1272,8 +1252,0 @@\n-  \/\/ In case we are not using CHA based vtables we need to make sure the loaded\n-  \/\/ deopt is completed before anyone links this class.\n-  \/\/ Linking is done with _init_monitor held, by loading and deopting with it\n-  \/\/ held we make sure the deopt is completed before linking.\n-  if (!UseVtableBasedCHA) {\n-    init_monitor()->lock();\n-  }\n-\n@@ -1301,0 +1273,14 @@\n+}\n+\n+void InstanceKlass::add_to_hierarchy(JavaThread* current) {\n+\n+  if (UseVtableBasedCHA || !Universe::is_fully_initialized()) {\n+    add_to_hierarchy_impl(current);\n+  } else {\n+    \/\/ In case we are not using CHA based vtables we need to make sure the loaded\n+    \/\/ deopt is completed before anyone links this class.\n+    \/\/ Linking is done with init_lock held, by loading and deopting with it\n+    \/\/ held we make sure the deopt is completed before linking.\n+    Handle h_init_lock(current, init_lock());\n+    ObjectLocker ol(h_init_lock, current);\n+    add_to_hierarchy_impl(current);\n@@ -1302,2 +1288,1 @@\n-  if (!UseVtableBasedCHA) {\n-    init_monitor()->unlock();\n+    \/\/ This doesn't need a notify because the wait is only on the class initialization path.\n@@ -1307,0 +1292,1 @@\n+\n@@ -1621,2 +1607,2 @@\n-  \/\/ Lazily create the _oop_map_cache at first request\n-  \/\/ Lock-free access requires load_acquire.\n+  \/\/ Lazily create the _oop_map_cache at first request.\n+  \/\/ Load_acquire is needed to safely get instance published with CAS by another thread.\n@@ -1625,6 +1611,7 @@\n-    MutexLocker x(OopMapCacheAlloc_lock);\n-    \/\/ Check if _oop_map_cache was allocated while we were waiting for this lock\n-    if ((oop_map_cache = _oop_map_cache) == nullptr) {\n-      oop_map_cache = new OopMapCache();\n-      \/\/ Ensure _oop_map_cache is stable, since it is examined without a lock\n-      Atomic::release_store(&_oop_map_cache, oop_map_cache);\n+    \/\/ Try to install new instance atomically.\n+    oop_map_cache = new OopMapCache();\n+    OopMapCache* other = Atomic::cmpxchg(&_oop_map_cache, (OopMapCache*)nullptr, oop_map_cache);\n+    if (other != nullptr) {\n+      \/\/ Someone else managed to install before us, ditch local copy and use the existing one.\n+      delete oop_map_cache;\n+      oop_map_cache = other;\n@@ -2657,1 +2644,0 @@\n-  _init_monitor = nullptr;\n@@ -2759,3 +2745,0 @@\n-\n-  \/\/ restore the monitor\n-  _init_monitor = create_init_monitor(\"InstanceKlassInitMonitorRestored_lock\");\n@@ -2857,3 +2840,0 @@\n-  \/\/ Destroy the init_monitor\n-  delete _init_monitor;\n-\n@@ -3525,1 +3505,1 @@\n-  \"allocated\", \"loaded\", \"being_linked\", \"linked\", \"being_initialized\", \"fully_initialized\", \"initialization_error\"\n+  \"allocated\", \"loaded\", \"linked\", \"being_initialized\", \"fully_initialized\", \"initialization_error\"\n@@ -3590,5 +3570,7 @@\n-  st->print(BULLET\"default_methods:   \"); default_methods()->print_value_on(st);      st->cr();\n-  if (Verbose && default_methods() != nullptr) {\n-    Array<Method*>* method_array = default_methods();\n-    for (int i = 0; i < method_array->length(); i++) {\n-      st->print(\"%d : \", i); method_array->at(i)->print_value(); st->cr();\n+  if (default_methods() != nullptr) {\n+    st->print(BULLET\"default_methods:   \"); default_methods()->print_value_on(st);    st->cr();\n+    if (Verbose) {\n+      Array<Method*>* method_array = default_methods();\n+      for (int i = 0; i < method_array->length(); i++) {\n+        st->print(\"%d : \", i); method_array->at(i)->print_value(); st->cr();\n+      }\n@@ -3597,3 +3579,1 @@\n-  if (default_vtable_indices() != nullptr) {\n-    st->print(BULLET\"default vtable indices:   \"); default_vtable_indices()->print_value_on(st);       st->cr();\n-  }\n+  print_on_maybe_null(st, BULLET\"default vtable indices:   \", default_vtable_indices());\n@@ -3603,10 +3583,3 @@\n-  if (class_loader_data() != nullptr) {\n-    st->print(BULLET\"class loader data:  \");\n-    class_loader_data()->print_value_on(st);\n-    st->cr();\n-  }\n-  if (source_file_name() != nullptr) {\n-    st->print(BULLET\"source file:       \");\n-    source_file_name()->print_value_on(st);\n-    st->cr();\n-  }\n+\n+  print_on_maybe_null(st, BULLET\"class loader data:  \", class_loader_data());\n+  print_on_maybe_null(st, BULLET\"source file:       \", source_file_name());\n@@ -3618,4 +3591,4 @@\n-  st->print(BULLET\"class annotations:       \"); class_annotations()->print_value_on(st); st->cr();\n-  st->print(BULLET\"class type annotations:  \"); class_type_annotations()->print_value_on(st); st->cr();\n-  st->print(BULLET\"field annotations:       \"); fields_annotations()->print_value_on(st); st->cr();\n-  st->print(BULLET\"field type annotations:  \"); fields_type_annotations()->print_value_on(st); st->cr();\n+  print_on_maybe_null(st, BULLET\"class annotations:       \", class_annotations());\n+  print_on_maybe_null(st, BULLET\"class type annotations:  \", class_type_annotations());\n+  print_on_maybe_null(st, BULLET\"field annotations:       \", fields_annotations());\n+  print_on_maybe_null(st, BULLET\"field type annotations:  \", fields_type_annotations());\n@@ -3636,5 +3609,1 @@\n-  if (generic_signature() != nullptr) {\n-    st->print(BULLET\"generic signature: \");\n-    generic_signature()->print_value_on(st);\n-    st->cr();\n-  }\n+  print_on_maybe_null(st, BULLET\"generic signature: \", generic_signature());\n@@ -3643,3 +3612,1 @@\n-  if (record_components() != nullptr) {\n-    st->print(BULLET\"record components:     \"); record_components()->print_value_on(st);     st->cr();\n-  }\n+  print_on_maybe_null(st, BULLET\"record components:     \", record_components());\n@@ -4080,3 +4047,0 @@\n-  if (state > loaded) {\n-    assert_lock_strong(_init_monitor);\n-  }\n@@ -4086,2 +4050,1 @@\n-  bool link_failed = _init_state == being_linked && state == loaded;\n-  assert(good_state || state == allocated || link_failed, \"illegal state transition\");\n+  assert(good_state || state == allocated, \"illegal state transition\");\n@@ -4090,1 +4053,1 @@\n-  Atomic::store(&_init_state, state);\n+  _init_state = state;\n","filename":"src\/hotspot\/share\/oops\/instanceKlass.cpp","additions":118,"deletions":155,"binary":false,"changes":273,"status":"modified"},{"patch":"@@ -152,1 +152,0 @@\n-    being_linked,                       \/\/ currently running verifier and rewriter\n@@ -226,0 +225,7 @@\n+  \/\/ _is_marked_dependent can be set concurrently, thus cannot be part of the\n+  \/\/ _misc_flags.\n+  bool            _is_marked_dependent;     \/\/ used for marking during flushing and deoptimization\n+\n+  \/\/ Class states are defined as ClassState (see above).\n+  \/\/ Place the _init_state here to utilize the unused 2-byte after\n+  \/\/ _idnum_allocated_count.\n@@ -228,1 +234,1 @@\n-  u1              _reference_type;          \/\/ reference type\n+  u1              _reference_type;                \/\/ reference type\n@@ -233,1 +239,0 @@\n-  Monitor*             _init_monitor;       \/\/ mutual exclusion to _init_state and _init_thread.\n@@ -496,1 +501,0 @@\n-  \/\/ We can safely access the name as long as we hold the _init_monitor.\n@@ -498,1 +502,0 @@\n-    assert(_init_monitor->owned_by_self(), \"Must hold _init_monitor here\");\n@@ -504,9 +507,8 @@\n-  bool is_loaded() const                   { return init_state() >= loaded; }\n-  bool is_linked() const                   { return init_state() >= linked; }\n-  bool is_being_linked() const             { return init_state() == being_linked; }\n-  bool is_initialized() const              { return init_state() == fully_initialized; }\n-  bool is_not_initialized() const          { return init_state() <  being_initialized; }\n-  bool is_being_initialized() const        { return init_state() == being_initialized; }\n-  bool is_in_error_state() const           { return init_state() == initialization_error; }\n-  bool is_init_thread(JavaThread *thread)  { return thread == init_thread(); }\n-  ClassState  init_state() const           { return Atomic::load(&_init_state); }\n+  bool is_loaded() const                   { return _init_state >= loaded; }\n+  bool is_linked() const                   { return _init_state >= linked; }\n+  bool is_initialized() const              { return _init_state == fully_initialized; }\n+  bool is_not_initialized() const          { return _init_state <  being_initialized; }\n+  bool is_being_initialized() const        { return _init_state == being_initialized; }\n+  bool is_in_error_state() const           { return _init_state == initialization_error; }\n+  bool is_reentrant_initialization(Thread *thread)  { return thread == _init_thread; }\n+  ClassState  init_state() const           { return _init_state; }\n@@ -516,15 +518,0 @@\n-  class LockLinkState : public StackObj {\n-    InstanceKlass* _ik;\n-    JavaThread*    _current;\n-   public:\n-    LockLinkState(InstanceKlass* ik, JavaThread* current) : _ik(ik), _current(current) {\n-      ik->check_link_state_and_wait(current);\n-    }\n-    ~LockLinkState() {\n-      if (!_ik->is_linked()) {\n-        \/\/ Reset to loaded if linking failed.\n-        _ik->set_initialization_state_and_notify(loaded, _current);\n-      }\n-    }\n-  };\n-\n@@ -842,1 +829,1 @@\n-  void set_initialization_state_and_notify(ClassState state, JavaThread* current);\n+  void set_initialization_state_and_notify(ClassState state, TRAPS);\n@@ -854,0 +841,4 @@\n+ private:\n+  void add_to_hierarchy_impl(JavaThread* current);\n+\n+ public:\n@@ -1071,1 +1062,1 @@\n- private:\n+private:\n@@ -1093,0 +1084,6 @@\n+  \/\/ Lock for (1) initialization; (2) access to the ConstantPool of this class.\n+  \/\/ Must be one per class and it has to be a VM internal object so java code\n+  \/\/ cannot lock it (like the mirror).\n+  \/\/ It has to be an object not a Mutex because it's held through java calls.\n+  oop init_lock() const;\n+\n@@ -1102,2 +1099,0 @@\n-\n-  Monitor* init_monitor() const { return _init_monitor; }\n@@ -1105,1 +1100,2 @@\n-  void check_link_state_and_wait(JavaThread* current);\n+  void fence_and_clear_init_lock();\n+\n","filename":"src\/hotspot\/share\/oops\/instanceKlass.hpp","additions":30,"deletions":34,"binary":false,"changes":64,"status":"modified"},{"patch":"@@ -247,2 +247,2 @@\n-  st->print_cr(\"       size: %d argsize: %d max_size: %d sp: %d pc: \" PTR_FORMAT,\n-               c->stack_size(), c->argsize(), c->max_thawing_size(), c->sp(), p2i(c->pc()));\n+  st->print_cr(\"       size: %d bottom: %d max_size: %d sp: %d pc: \" PTR_FORMAT,\n+               c->stack_size(), c->bottom(), c->max_thawing_size(), c->sp(), p2i(c->pc()));\n","filename":"src\/hotspot\/share\/oops\/instanceStackChunkKlass.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -79,0 +79,9 @@\n+template <typename M>\n+static void print_on_maybe_null(outputStream* st, const char* str, const M* m) {\n+  if (nullptr != m) {\n+    st->print_raw(str);\n+    m->print_value_on(st);\n+    st->cr();\n+  }\n+}\n+\n","filename":"src\/hotspot\/share\/oops\/metadata.hpp","additions":9,"deletions":0,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -313,1 +313,1 @@\n-  if (Universe::heap()->is_gc_active()) {\n+  if (Universe::heap()->is_stw_gc_active()) {\n","filename":"src\/hotspot\/share\/oops\/method.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -446,4 +446,0 @@\n-  \/\/ the number of argument reg slots that the compiled method uses on the stack.\n-  int num_stack_arg_slots(bool rounded = true) const {\n-    return rounded ? align_up(constMethod()->num_stack_arg_slots(), 2) : constMethod()->num_stack_arg_slots(); }\n-\n","filename":"src\/hotspot\/share\/oops\/method.hpp","additions":0,"deletions":4,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -78,1 +78,1 @@\n-  int  interpreter_throwout_count() const {\n+  u2  interpreter_throwout_count() const {\n@@ -81,1 +81,1 @@\n-  void set_interpreter_throwout_count(int count) {\n+  void set_interpreter_throwout_count(u2 count) {\n@@ -85,1 +85,1 @@\n-  int  interpreter_throwout_count() const {\n+  u2  interpreter_throwout_count() const {\n@@ -88,1 +88,1 @@\n-  void set_interpreter_throwout_count(int count) {\n+  void set_interpreter_throwout_count(u2 count) {\n","filename":"src\/hotspot\/share\/oops\/methodCounters.hpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -241,1 +241,1 @@\n-  return Universe::heap()->is_gc_active() && is_objArray() && is_forwarded() && (UseParallelGC || UseG1GC);\n+  return Universe::heap()->is_stw_gc_active() && is_objArray() && is_forwarded() && (UseParallelGC || UseG1GC);\n","filename":"src\/hotspot\/share\/oops\/oop.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -210,0 +210,2 @@\n+  jint int_field_relaxed(int offset) const;\n+  void int_field_put_relaxed(int offset, jint contents);\n","filename":"src\/hotspot\/share\/oops\/oop.hpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -241,0 +241,2 @@\n+inline jint oopDesc::int_field_relaxed(int offset) const            { return Atomic::load(field_addr<jint>(offset)); }\n+inline void oopDesc::int_field_put_relaxed(int offset, jint value)  { Atomic::store(field_addr<jint>(offset), value); }\n","filename":"src\/hotspot\/share\/oops\/oop.inline.hpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -538,1 +538,0 @@\n-  assert(argsize() >= 0, \"\");\n@@ -542,1 +541,0 @@\n-    assert(argsize() == 0, \"\");\n@@ -544,0 +542,2 @@\n+  } else {\n+    assert(argsize() >= 0, \"\");\n@@ -552,1 +552,1 @@\n-  int size = stack_size() - argsize() - sp();\n+  int size = bottom() - sp();\n@@ -567,1 +567,1 @@\n-      (closure._cb->as_compiled_method()->method()->num_stack_arg_slots()*VMRegImpl::stack_slot_size) >>LogBytesPerWord,\n+      (closure._cb->as_nmethod()->num_stack_arg_slots()*VMRegImpl::stack_slot_size) >>LogBytesPerWord,\n@@ -569,1 +569,1 @@\n-      (closure._cb->as_compiled_method()->method()->num_stack_arg_slots()*VMRegImpl::stack_slot_size) >>LogBytesPerWord);\n+      (closure._cb->as_nmethod()->num_stack_arg_slots()*VMRegImpl::stack_slot_size) >>LogBytesPerWord);\n@@ -575,6 +575,9 @@\n-    assert(closure._size <= size + argsize() + frame::metadata_words,\n-           \"size: %d argsize: %d closure.size: %d end sp: \" PTR_FORMAT \" start sp: %d chunk size: %d\",\n-           size, argsize(), closure._size, closure._sp - start_address(), sp(), stack_size());\n-    assert(argsize() == closure._argsize - (closure._num_frames > 0 ? frame::metadata_words_at_top : 0),\n-           \"argsize(): %d closure.argsize: %d closure.callee_interpreted: %d\",\n-           argsize(), closure._argsize, closure._callee_interpreted);\n+    assert(closure._size <= size + (stack_size() - bottom()),\n+           \"size: %d bottom: %d closure.size: %d end sp: \" PTR_FORMAT \" start sp: %d chunk size: %d\",\n+           size, bottom(), closure._size, closure._sp - start_address(), sp(), stack_size());\n+    if (closure._num_frames > 0) {\n+      assert(closure._argsize >= frame::metadata_words_at_top, \"should be set up\");\n+      assert(argsize() == closure._argsize - frame::metadata_words_at_top,\n+             \"argsize(): %d closure.argsize: %d closure.callee_interpreted: %d\",\n+             argsize(), closure._argsize, closure._callee_interpreted);\n+    }\n","filename":"src\/hotspot\/share\/oops\/stackChunkOop.cpp","additions":14,"deletions":11,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -104,0 +104,1 @@\n+  inline void set_bottom(int value);\n","filename":"src\/hotspot\/share\/oops\/stackChunkOop.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -63,0 +63,3 @@\n+inline int stackChunkOopDesc::bottom() const            { return jdk_internal_vm_StackChunk::bottom(as_oop()); }\n+inline void stackChunkOopDesc::set_bottom(int value)    { jdk_internal_vm_StackChunk::set_bottom(this, value); }\n+\n@@ -69,3 +72,0 @@\n-inline int stackChunkOopDesc::argsize() const           { return jdk_internal_vm_StackChunk::argsize(as_oop()); }\n-inline void stackChunkOopDesc::set_argsize(int value)   { jdk_internal_vm_StackChunk::set_argsize(as_oop(), value); }\n-\n@@ -111,1 +111,4 @@\n-inline int stackChunkOopDesc::bottom() const { return stack_size() - argsize() - frame::metadata_words_at_top; }\n+inline int stackChunkOopDesc::argsize() const {\n+  assert(!is_empty(), \"should not ask for argsize in empty chunk\");\n+  return stack_size() - bottom() - frame::metadata_words_at_top;\n+}\n@@ -135,4 +138,2 @@\n-  assert(sp() <= stack_size(), \"\");\n-  assert((sp() == stack_size()) == (sp() >= stack_size() - argsize() - frame::metadata_words_at_top),\n-    \"sp: %d size: %d argsize: %d\", sp(), stack_size(), argsize());\n-  return sp() == stack_size();\n+  assert(sp() <= bottom(), \"\");\n+  return sp() == bottom();\n@@ -391,1 +392,1 @@\n-  return offset;\n+  return (int)offset;\n","filename":"src\/hotspot\/share\/oops\/stackChunkOop.inline.hpp","additions":10,"deletions":9,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -56,0 +56,1 @@\n+  assert(length <= max_length(), \"SymbolTable should have caught this!\");\n","filename":"src\/hotspot\/share\/oops\/symbol.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -133,0 +133,1 @@\n+  \/\/ Constructor is private for use only by SymbolTable.\n","filename":"src\/hotspot\/share\/oops\/symbol.hpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -155,1 +155,4 @@\n-  DecoratorSet decorators = C2_READ_ACCESS | C2_CONTROL_DEPENDENT_LOAD | IN_HEAP | C2_ARRAY_COPY;\n+  \/\/ Pin the load: if this is an array load, it's going to be dependent on a condition that's not a range check for that\n+  \/\/ access. If that condition is replaced by an identical dominating one, then an unpinned load would risk floating\n+  \/\/ above runtime checks that guarantee it is within bounds.\n+  DecoratorSet decorators = C2_READ_ACCESS | C2_CONTROL_DEPENDENT_LOAD | IN_HEAP | C2_ARRAY_COPY | C2_UNKNOWN_CONTROL_LOAD;\n","filename":"src\/hotspot\/share\/opto\/arraycopynode.cpp","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -1085,7 +1085,8 @@\n-          Node* arg = kit.argument(0);\n-          const TypeOopPtr* arg_type = arg->bottom_type()->isa_oopptr();\n-          const Type*       sig_type = TypeOopPtr::make_from_klass(signature->accessing_klass());\n-          if (arg_type != nullptr && !arg_type->higher_equal(sig_type)) {\n-            const Type* recv_type = arg_type->filter_speculative(sig_type); \/\/ keep speculative part\n-            Node* cast_obj = gvn.transform(new CheckCastPPNode(kit.control(), arg, recv_type));\n-            kit.set_argument(0, cast_obj);\n+          Node* recv = kit.argument(0);\n+          Node* casted_recv = kit.maybe_narrow_object_type(recv, signature->accessing_klass());\n+          if (casted_recv->is_top()) {\n+            print_inlining_failure(C, callee, jvms->depth() - 1, jvms->bci(),\n+                                   \"argument types mismatch\");\n+            return nullptr; \/\/ FIXME: effectively dead; issue a halt node instead\n+          } else if (casted_recv != recv) {\n+            kit.set_argument(0, casted_recv);\n@@ -1099,6 +1100,7 @@\n-            const TypeOopPtr* arg_type = arg->bottom_type()->isa_oopptr();\n-            const Type*       sig_type = TypeOopPtr::make_from_klass(t->as_klass());\n-            if (arg_type != nullptr && !arg_type->higher_equal(sig_type)) {\n-              const Type* narrowed_arg_type = arg_type->filter_speculative(sig_type); \/\/ keep speculative part\n-              Node* cast_obj = gvn.transform(new CheckCastPPNode(kit.control(), arg, narrowed_arg_type));\n-              kit.set_argument(receiver_skip + j, cast_obj);\n+            Node* casted_arg = kit.maybe_narrow_object_type(arg, t->as_klass());\n+            if (casted_arg->is_top()) {\n+              print_inlining_failure(C, callee, jvms->depth() - 1, jvms->bci(),\n+                                     \"argument types mismatch\");\n+              return nullptr; \/\/ FIXME: effectively dead; issue a halt node instead\n+            } else if (casted_arg != arg) {\n+              kit.set_argument(receiver_skip + j, casted_arg);\n","filename":"src\/hotspot\/share\/opto\/callGenerator.cpp","additions":15,"deletions":13,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -1468,0 +1468,1 @@\n+                                                     uint depth,\n@@ -1471,0 +1472,1 @@\n+  _depth(depth),\n@@ -1910,0 +1912,16 @@\n+\/\/ Check that all locks\/unlocks associated with object come from balanced regions.\n+bool AbstractLockNode::is_balanced() {\n+  Node* obj = obj_node();\n+  for (uint j = 0; j < obj->outcnt(); j++) {\n+    Node* n = obj->raw_out(j);\n+    if (n->is_AbstractLock() &&\n+        n->as_AbstractLock()->obj_node()->eqv_uncast(obj)) {\n+      BoxLockNode* n_box = n->as_AbstractLock()->box_node()->as_BoxLock();\n+      if (n_box->is_unbalanced()) {\n+        return false;\n+      }\n+    }\n+  }\n+  return true;\n+}\n+\n@@ -1962,1 +1980,1 @@\n-    if (cgr != nullptr && cgr->not_global_escape(obj_node())) {\n+    if (cgr != nullptr && cgr->can_eliminate_lock(this)) {\n@@ -2016,0 +2034,2 @@\n+            tty->print(\"Obj: \");\n+            obj_node()->dump();\n@@ -2024,0 +2044,2 @@\n+              tty->print(\"Box %d: \", i);\n+              box_node()->dump();\n@@ -2125,0 +2147,1 @@\n+        box->set_nested();\n@@ -2158,1 +2181,1 @@\n-    if (cgr != nullptr && cgr->not_global_escape(obj_node())) {\n+    if (cgr != nullptr && cgr->can_eliminate_lock(this)) {\n","filename":"src\/hotspot\/share\/opto\/callnode.cpp","additions":25,"deletions":2,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -512,1 +512,1 @@\n-                     \/\/ It is relative to the last (youngest) jvms->_scloff.\n+  uint _depth;       \/\/ Depth of the JVM state the _first_index field refers to\n@@ -526,1 +526,1 @@\n-                            uint first_index, uint n_fields);\n+                            uint first_index, uint depth, uint n_fields);\n@@ -535,1 +535,1 @@\n-    return jvms->scloff() + _first_index;\n+    return jvms->of_depth(_depth)->scloff() + _first_index;\n@@ -1073,0 +1073,4 @@\n+  \/\/ Check that all locks\/unlocks associated with object come from balanced regions.\n+  \/\/ They can become unbalanced after coarsening optimization or on OSR entry.\n+  bool is_balanced();\n+\n","filename":"src\/hotspot\/share\/opto\/callnode.hpp","additions":8,"deletions":4,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -325,0 +325,9 @@\n+CastIINode* CastIINode::pin_array_access_node() const {\n+  assert(_dependency == RegularDependency, \"already pinned\");\n+  if (has_range_check()) {\n+    return new CastIINode(in(0), in(1), bottom_type(), StrongDependency, has_range_check());\n+  }\n+  return nullptr;\n+}\n+\n+\n","filename":"src\/hotspot\/share\/opto\/castnode.cpp","additions":9,"deletions":0,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -140,1 +140,1 @@\n-  const bool has_range_check() {\n+  const bool has_range_check() const {\n@@ -149,0 +149,2 @@\n+  CastIINode* pin_array_access_node() const;\n+\n","filename":"src\/hotspot\/share\/opto\/castnode.hpp","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -431,1 +431,1 @@\n-  Node* dominated_by(Node* prev_dom, PhaseIterGVN* igvn);\n+  Node* dominated_by(Node* prev_dom, PhaseIterGVN* igvn, bool pin_array_access_nodes);\n@@ -482,0 +482,2 @@\n+  void pin_array_access_nodes(PhaseIterGVN* igvn);\n+\n","filename":"src\/hotspot\/share\/opto\/cfgnode.hpp","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -56,0 +56,1 @@\n+#include \"opto\/locknode.hpp\"\n@@ -4810,0 +4811,2 @@\n+    AbstractLockNode* alock = locks.at(0);\n+    BoxLockNode* box = alock->box_node()->as_BoxLock();\n@@ -4814,0 +4817,14 @@\n+      BoxLockNode* this_box = lock->box_node()->as_BoxLock();\n+      if (this_box != box) {\n+        \/\/ Locking regions (BoxLock) could be Unbalanced here:\n+        \/\/  - its coarsened locks were eliminated in earlier\n+        \/\/    macro nodes elimination followed by loop unroll\n+        \/\/  - it is OSR locking region (no Lock node)\n+        \/\/ Preserve Unbalanced status in such cases.\n+        if (!this_box->is_unbalanced()) {\n+          this_box->set_coarsened();\n+        }\n+        if (!box->is_unbalanced()) {\n+          box->set_coarsened();\n+        }\n+      }\n@@ -4891,0 +4908,32 @@\n+\/\/ Mark locking regions (identified by BoxLockNode) as unbalanced if\n+\/\/ locks coarsening optimization removed Lock\/Unlock nodes from them.\n+\/\/ Such regions become unbalanced because coarsening only removes part\n+\/\/ of Lock\/Unlock nodes in region. As result we can't execute other\n+\/\/ locks elimination optimizations which assume all code paths have\n+\/\/ corresponding pair of Lock\/Unlock nodes - they are balanced.\n+void Compile::mark_unbalanced_boxes() const {\n+  int count = coarsened_count();\n+  for (int i = 0; i < count; i++) {\n+    Node_List* locks_list = _coarsened_locks.at(i);\n+    uint size = locks_list->size();\n+    if (size > 0) {\n+      AbstractLockNode* alock = locks_list->at(0)->as_AbstractLock();\n+      BoxLockNode* box = alock->box_node()->as_BoxLock();\n+      if (alock->is_coarsened()) {\n+        \/\/ coarsened_locks_consistent(), which is called before this method, verifies\n+        \/\/ that the rest of Lock\/Unlock nodes on locks_list are also coarsened.\n+        assert(!box->is_eliminated(), \"regions with coarsened locks should not be marked as eliminated\");\n+        for (uint j = 1; j < size; j++) {\n+          assert(locks_list->at(j)->as_AbstractLock()->is_coarsened(), \"only coarsened locks are expected here\");\n+          BoxLockNode* this_box = locks_list->at(j)->as_AbstractLock()->box_node()->as_BoxLock();\n+          if (box != this_box) {\n+            assert(!this_box->is_eliminated(), \"regions with coarsened locks should not be marked as eliminated\");\n+            box->set_unbalanced();\n+            this_box->set_unbalanced();\n+          }\n+        }\n+      }\n+    }\n+  }\n+}\n+\n","filename":"src\/hotspot\/share\/opto\/compile.cpp","additions":49,"deletions":0,"binary":false,"changes":49,"status":"modified"},{"patch":"@@ -745,0 +745,1 @@\n+  void mark_unbalanced_boxes() const;\n","filename":"src\/hotspot\/share\/opto\/compile.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -793,3 +793,4 @@\n-  GrowableArray<int>* bcis = new (C->node_arena()) GrowableArray<int>(C->node_arena(), 8, 0, -1);\n-  GrowableArray<const Type*>* extypes = new (C->node_arena()) GrowableArray<const Type*>(C->node_arena(), 8, 0, nullptr);\n-  GrowableArray<int>* saw_unloaded = new (C->node_arena()) GrowableArray<int>(C->node_arena(), 8, 0, 0);\n+  Arena tmp_mem{mtCompiler};\n+  GrowableArray<int> bcis(&tmp_mem, 8, 0, -1);\n+  GrowableArray<const Type*> extypes(&tmp_mem, 8, 0, nullptr);\n+  GrowableArray<int> saw_unloaded(&tmp_mem, 8, 0, -1);\n@@ -799,3 +800,3 @@\n-    ciExceptionHandler* h        = handlers.handler();\n-    int                 h_bci    = h->handler_bci();\n-    ciInstanceKlass*    h_klass  = h->is_catch_all() ? env()->Throwable_klass() : h->catch_klass();\n+    ciExceptionHandler* h       = handlers.handler();\n+    int                 h_bci   = h->handler_bci();\n+    ciInstanceKlass*    h_klass = h->is_catch_all() ? env()->Throwable_klass() : h->catch_klass();\n@@ -804,1 +805,1 @@\n-      if (saw_unloaded->contains(h_bci)) {\n+      if (saw_unloaded.contains(h_bci)) {\n@@ -810,1 +811,1 @@\n-        saw_unloaded->append(h_bci);\n+        saw_unloaded.append(h_bci);\n@@ -813,1 +814,1 @@\n-    const Type*         h_extype = TypeOopPtr::make_from_klass(h_klass);\n+    const Type* h_extype = TypeOopPtr::make_from_klass(h_klass);\n@@ -817,3 +818,3 @@\n-    \/\/ Note:  It's OK if the BCIs repeat themselves.\n-    bcis->append(h_bci);\n-    extypes->append(h_extype);\n+    \/\/ Note: It's OK if the BCIs repeat themselves.\n+    bcis.append(h_bci);\n+    extypes.append(h_extype);\n@@ -826,1 +827,1 @@\n-    bcis->append(-1);\n+    bcis.append(-1);\n@@ -829,1 +830,1 @@\n-    extypes->append(extype);\n+    extypes.append(extype);\n@@ -832,1 +833,1 @@\n-  int len = bcis->length();\n+  int len = bcis.length();\n@@ -843,1 +844,1 @@\n-    int handler_bci = bcis->at(i);\n+    int handler_bci = bcis.at(i);\n@@ -850,2 +851,2 @@\n-    const TypeInstPtr* extype = extypes->at(i)->is_instptr();\n-    Node *ex_oop = _gvn.transform(new CreateExNode(extypes->at(i), ctrl, i_o));\n+    const TypeInstPtr* extype = extypes.at(i)->is_instptr();\n+    Node* ex_oop = _gvn.transform(new CreateExNode(extypes.at(i), ctrl, i_o));\n@@ -854,1 +855,1 @@\n-    if (saw_unloaded->contains(handler_bci)) {\n+    if (saw_unloaded.contains(handler_bci)) {\n","filename":"src\/hotspot\/share\/opto\/doCall.cpp","additions":20,"deletions":19,"binary":false,"changes":39,"status":"modified"},{"patch":"@@ -387,0 +387,19 @@\n+void remove_single_entry_region(NTarjan* t, NTarjan*& tdom, Node*& dom, PhaseIterGVN& igvn) {\n+  \/\/ remove phis:\n+  for (DUIterator_Fast jmax, j = dom->fast_outs(jmax); j < jmax; j++) {\n+    Node* use = dom->fast_out(j);\n+    if (use->is_Phi()) {\n+      igvn.replace_node(use, use->in(1));\n+      --j; --jmax;\n+    }\n+  }\n+  \/\/ Disconnect region from dominator tree\n+  assert(dom->unique_ctrl_out() == t->_control, \"expect a single dominated node\");\n+  tdom = tdom->_dom;\n+  t->_dom = tdom;\n+  assert(tdom->_control == dom->in(1), \"dominator of region with single input should be that input\");\n+  \/\/ and remove it\n+  igvn.replace_node(dom, dom->in(1));\n+  dom = tdom->_control;\n+}\n+\n@@ -489,1 +508,8 @@\n-      _idom[t->_control->_idx] = tdom->_control; \/\/ Set immediate dominator\n+      Node* dom = tdom->_control;\n+      \/\/ The code that removes unreachable loops above could have left a region with a single input. Remove it. Do it\n+      \/\/ now that we iterate over cfg nodes for the last time (doing it earlier would have left a dead cfg node behind\n+      \/\/ that code that goes over the dfs list would have had to handle).\n+      if (dom != C->root() && dom->is_Region() && dom->req() == 2) {\n+        remove_single_entry_region(t, tdom, dom, _igvn);\n+      }\n+      _idom[t->_control->_idx] = dom; \/\/ Set immediate dominator\n","filename":"src\/hotspot\/share\/opto\/domgraph.cpp","additions":27,"deletions":1,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -39,0 +39,1 @@\n+#include \"opto\/locknode.hpp\"\n@@ -2098,1 +2099,1 @@\n-          if (not_global_escape(alock->obj_node())) {\n+          if (can_eliminate_lock(alock)) {\n@@ -2431,0 +2432,14 @@\n+\/\/ Return true if locked object does not escape globally\n+\/\/ and locked code region (identified by BoxLockNode) is balanced:\n+\/\/ all compiled code paths have corresponding Lock\/Unlock pairs.\n+bool ConnectionGraph::can_eliminate_lock(AbstractLockNode* alock) {\n+  if (alock->is_balanced() && not_global_escape(alock->obj_node())) {\n+    if (EliminateNestedLocks) {\n+      \/\/ We can mark whole locking region as Local only when only\n+      \/\/ one object is used for locking.\n+      alock->box_node()->as_BoxLock()->set_local();\n+    }\n+    return true;\n+  }\n+  return false;\n+}\n@@ -3516,0 +3531,7 @@\n+    } else if (n->is_CallLeaf()) {\n+      \/\/ Runtime calls with narrow memory input (no MergeMem node)\n+      \/\/ get the memory projection\n+      n = n->as_Call()->proj_out_or_null(TypeFunc::Memory);\n+      if (n == nullptr) {\n+        continue;\n+      }\n@@ -3558,1 +3580,1 @@\n-      } else if (use->is_MemBar()) {\n+      } else if (use->is_MemBar() || use->is_CallLeaf()) {\n","filename":"src\/hotspot\/share\/opto\/escape.cpp","additions":24,"deletions":2,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -115,0 +115,1 @@\n+class  AbstractLockNode;\n@@ -610,0 +611,2 @@\n+  bool can_eliminate_lock(AbstractLockNode* alock);\n+\n","filename":"src\/hotspot\/share\/opto\/escape.hpp","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -3435,1 +3435,4 @@\n-  Node* box = _gvn.transform(new BoxLockNode(next_monitor()));\n+  Node* box = new BoxLockNode(next_monitor());\n+  \/\/ Check for bailout after new BoxLockNode\n+  if (failing()) { return nullptr; }\n+  box = _gvn.transform(box);\n@@ -4221,0 +4224,11 @@\n+\n+Node* GraphKit::maybe_narrow_object_type(Node* obj, ciKlass* type) {\n+  const TypeOopPtr* obj_type = obj->bottom_type()->isa_oopptr();\n+  const TypeOopPtr* sig_type = TypeOopPtr::make_from_klass(type);\n+  if (obj_type != nullptr && sig_type->is_loaded() && !obj_type->higher_equal(sig_type)) {\n+    const Type* narrow_obj_type = obj_type->filter_speculative(sig_type); \/\/ keep speculative part\n+    Node* casted_obj = gvn().transform(new CheckCastPPNode(control(), obj, narrow_obj_type));\n+    return casted_obj;\n+  }\n+  return obj;\n+}\n","filename":"src\/hotspot\/share\/opto\/graphKit.cpp","additions":16,"deletions":2,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -444,0 +444,2 @@\n+  Node* maybe_narrow_object_type(Node* obj, ciKlass* type);\n+\n","filename":"src\/hotspot\/share\/opto\/graphKit.hpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -146,0 +146,1 @@\n+  _append = append;\n@@ -148,1 +149,1 @@\n-    init_file_stream(file_name, use_multiple_files, append);\n+    init_file_stream(file_name, use_multiple_files);\n@@ -153,1 +154,1 @@\n-  if (!append) {\n+  if (!_append) {\n@@ -160,1 +161,3 @@\n-  tail(TOP_ELEMENT);\n+  if (!_append) {\n+    tail(TOP_ELEMENT);\n+  }\n@@ -833,1 +836,1 @@\n-void IdealGraphPrinter::init_file_stream(const char* file_name, bool use_multiple_files, bool append) {\n+void IdealGraphPrinter::init_file_stream(const char* file_name, bool use_multiple_files) {\n@@ -836,1 +839,1 @@\n-    assert(!append, \"append should only be used for debugging with a single file\");\n+    assert(!_append, \"append should only be used for debugging with a single file\");\n@@ -848,1 +851,1 @@\n-    _output = new (mtCompiler) fileStream(file_name, append ? \"a\" : \"w\");\n+    _output = new (mtCompiler) fileStream(file_name, _append ? \"a\" : \"w\");\n@@ -851,1 +854,1 @@\n-    assert(!append, \"append should only be used for debugging with a single file\");\n+    assert(!_append, \"append should only be used for debugging with a single file\");\n@@ -882,3 +885,10 @@\n-    end_method();\n-    _current_method = nullptr;\n-    begin_method();\n+    if (_append) {\n+      \/\/ Do not call `end_method` if we are appending, just update `_current_method`,\n+      \/\/ because `begin_method` is not called in the constructor in append mode.\n+      _current_method = current_method;\n+    } else {\n+      \/\/ End the old method and begin a new one.\n+      \/\/ Don't worry about `_current_method`, `end_method` will clear it.\n+      end_method();\n+      begin_method();\n+    }\n","filename":"src\/hotspot\/share\/opto\/idealGraphPrinter.cpp","additions":20,"deletions":10,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -98,0 +98,1 @@\n+  bool _append;\n@@ -119,1 +120,1 @@\n-  void init_file_stream(const char* file_name, bool use_multiple_files, bool append);\n+  void init_file_stream(const char* file_name, bool use_multiple_files);\n","filename":"src\/hotspot\/share\/opto\/idealGraphPrinter.hpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -540,1 +540,1 @@\n-static void adjust_check(Node* proj, Node* range, Node* index,\n+static void adjust_check(IfProjNode* proj, Node* range, Node* index,\n@@ -548,2 +548,2 @@\n-  DEBUG_ONLY( if( !bol->is_Bool() ) { proj->dump(3); fatal(\"Expect projection-->IfNode-->BoolNode\"); } )\n-  if( !bol->is_Bool() ) return;\n+  DEBUG_ONLY( if (!bol->is_Bool()) { proj->dump(3); fatal(\"Expect projection-->IfNode-->BoolNode\"); } )\n+  if (!bol->is_Bool()) return;\n@@ -554,2 +554,2 @@\n-  if( index ) {\n-    new_add = off_lo ? gvn->transform(new AddINode( index, new_add )) : index;\n+  if (index) {\n+    new_add = off_lo ? gvn->transform(new AddINode(index, new_add)) : index;\n@@ -558,2 +558,2 @@\n-    ? new CmpUNode( new_add, range )\n-    : new CmpUNode( range, new_add );\n+    ? new CmpUNode(new_add, range)\n+    : new CmpUNode(range, new_add);\n@@ -562,1 +562,1 @@\n-  if( new_cmp == cmp ) return;\n+  if (new_cmp == cmp) return;\n@@ -564,3 +564,9 @@\n-  Node *new_bol = gvn->transform( new BoolNode( new_cmp, bol->as_Bool()->_test._test ) );\n-  igvn->rehash_node_delayed( iff );\n-  iff->set_req_X( 1, new_bol, igvn );\n+  Node* new_bol = gvn->transform(new BoolNode(new_cmp, bol->as_Bool()->_test._test));\n+  igvn->rehash_node_delayed(iff);\n+  iff->set_req_X(1, new_bol, igvn);\n+  \/\/ As part of range check smearing, this range check is widened. Loads and range check Cast nodes that are control\n+  \/\/ dependent on this range check now depend on multiple dominating range checks. These control dependent nodes end up\n+  \/\/ at the lowest\/nearest dominating check in the graph. To ensure that these Loads\/Casts do not float above any of the\n+  \/\/ dominating checks (even when the lowest dominating check is later replaced by yet another dominating check), we\n+  \/\/ need to pin them at the lowest dominating check.\n+  proj->pin_array_access_nodes(igvn);\n@@ -734,0 +740,1 @@\n+    ctrl->outcnt() == 1 && \/\/ No side-effects\n@@ -1032,0 +1039,4 @@\n+    if (adjusted_val->is_top() || adjusted_lim->is_top()) {\n+      return false;\n+    }\n+\n@@ -1309,1 +1320,1 @@\n-    if (is_ctrl_folds(ctrl, igvn) && ctrl->outcnt() == 1) {\n+    if (is_ctrl_folds(ctrl, igvn)) {\n@@ -1419,1 +1430,1 @@\n-  Node* ctl;\n+  IfProjNode* ctl;\n@@ -1487,1 +1498,1 @@\n-    return dominated_by(prev_dom, igvn);\n+    return dominated_by(prev_dom, igvn, false);\n@@ -1494,1 +1505,1 @@\n-Node* IfNode::dominated_by(Node* prev_dom, PhaseIterGVN *igvn) {\n+Node* IfNode::dominated_by(Node* prev_dom, PhaseIterGVN* igvn, bool pin_array_access_nodes) {\n@@ -1507,9 +1518,0 @@\n-  \/\/ Loop predicates may have depending checks which should not\n-  \/\/ be skipped. For example, range check predicate has two checks\n-  \/\/ for lower and upper bounds.\n-  ProjNode* unc_proj = proj_out(1 - prev_dom->as_Proj()->_con)->as_Proj();\n-  if (unc_proj->is_uncommon_trap_proj(Deoptimization::Reason_predicate) != nullptr ||\n-      unc_proj->is_uncommon_trap_proj(Deoptimization::Reason_profile_predicate) != nullptr) {\n-    prev_dom = idom;\n-  }\n-\n@@ -1538,0 +1540,13 @@\n+        if (pin_array_access_nodes && data_target != top) {\n+          \/\/ As a result of range check smearing, Loads and range check Cast nodes that are control dependent on this\n+          \/\/ range check (that is about to be removed) now depend on multiple dominating range checks. After the removal\n+          \/\/ of this range check, these control dependent nodes end up at the lowest\/nearest dominating check in the\n+          \/\/ graph. To ensure that these Loads\/Casts do not float above any of the dominating checks (even when the\n+          \/\/ lowest dominating check is later replaced by yet another dominating check), we need to pin them at the\n+          \/\/ lowest dominating check.\n+          Node* clone = s->pin_array_access_node();\n+          if (clone != nullptr) {\n+            clone = igvn->transform(clone);\n+            igvn->replace_node(s, clone);\n+          }\n+        }\n@@ -1745,0 +1760,16 @@\n+void IfProjNode::pin_array_access_nodes(PhaseIterGVN* igvn) {\n+  for (DUIterator i = outs(); has_out(i); i++) {\n+    Node* u = out(i);\n+    if (!u->depends_only_on_test()) {\n+      continue;\n+    }\n+    Node* clone = u->pin_array_access_node();\n+    if (clone != nullptr) {\n+      clone = igvn->transform(clone);\n+      assert(clone != u, \"shouldn't common\");\n+      igvn->replace_node(u, clone);\n+      --i;\n+    }\n+  }\n+}\n+\n@@ -1918,1 +1949,1 @@\n-            prev_checks[nb_checks % NRC].ctl = prev_dom;\n+            prev_checks[nb_checks % NRC].ctl = prev_dom->as_IfProj();\n@@ -1936,0 +1967,9 @@\n+      if (can_reshape && !phase->C->post_loop_opts_phase()) {\n+        \/\/ We are about to perform range check smearing (i.e. remove this RangeCheck if it is dominated by\n+        \/\/ a series of RangeChecks which have a range that covers this RangeCheck). This can cause array access nodes to\n+        \/\/ be pinned. We want to avoid that and first allow range check elimination a chance to remove the RangeChecks\n+        \/\/ from loops. Hence, we delay range check smearing until after loop opts.\n+        phase->C->record_for_post_loop_opts_igvn(this);\n+        return nullptr;\n+      }\n+\n@@ -2009,0 +2049,20 @@\n+      \/\/ The last RangeCheck is found to be redundant with a sequence of n (n >= 2) preceding RangeChecks.\n+      \/\/ If an array load is control dependent on the eliminated range check, the array load nodes (CastII and Load)\n+      \/\/ become control dependent on the last range check of the sequence, but they are really dependent on the entire\n+      \/\/ sequence of RangeChecks. If RangeCheck#n is later replaced by a dominating identical check, the array load\n+      \/\/ nodes must not float above the n-1 other RangeCheck in the sequence. We pin the array load nodes here to\n+      \/\/ guarantee it doesn't happen.\n+      \/\/\n+      \/\/ RangeCheck#1                 RangeCheck#1\n+      \/\/    |      \\                     |      \\\n+      \/\/    |      uncommon trap         |      uncommon trap\n+      \/\/    ..                           ..\n+      \/\/ RangeCheck#n              -> RangeCheck#n\n+      \/\/    |      \\                     |      \\\n+      \/\/    |      uncommon trap        CastII  uncommon trap\n+      \/\/ RangeCheck                     Load\n+      \/\/    |      \\\n+      \/\/   CastII  uncommon trap\n+      \/\/   Load\n+\n+      return dominated_by(prev_dom, igvn, true);\n@@ -2019,1 +2079,1 @@\n-  return dominated_by(prev_dom, igvn);\n+  return dominated_by(prev_dom, igvn, false);\n","filename":"src\/hotspot\/share\/opto\/ifnode.cpp","additions":86,"deletions":26,"binary":false,"changes":112,"status":"modified"},{"patch":"@@ -4275,1 +4275,1 @@\n-    \/\/ Bail out if length is negative.\n+    \/\/ Bail out if length is negative (i.e., if start > end).\n@@ -4281,0 +4281,4 @@\n+    \/\/ Bail out if start is larger than the original length\n+    Node* orig_tail = _gvn.transform(new SubINode(orig_length, start));\n+    generate_negative_guard(orig_tail, bailout, &orig_tail);\n+\n@@ -4290,2 +4294,1 @@\n-      \/\/ The answer is MinI(orig_length - start, length).\n-      Node* orig_tail = _gvn.transform(new SubINode(orig_length, start));\n+      \/\/ The answer is MinI(orig_tail, length).\n@@ -4339,1 +4342,1 @@\n-        ArrayCopyNode* ac = ArrayCopyNode::make(this, true, original, start, newcopy, intcon(0), moved, true, false,\n+        ArrayCopyNode* ac = ArrayCopyNode::make(this, true, original, start, newcopy, intcon(0), moved, true, true,\n@@ -4519,1 +4522,1 @@\n-  \/\/ Test the header to see if it is unlocked.\n+  \/\/ Test the header to see if it is safe to read w.r.t. locking.\n@@ -4522,3 +4525,10 @@\n-  Node *unlocked_val   = _gvn.MakeConX(markWord::unlocked_value);\n-  Node *chk_unlocked   = _gvn.transform(new CmpXNode( lmasked_header, unlocked_val));\n-  Node *test_unlocked  = _gvn.transform(new BoolNode( chk_unlocked, BoolTest::ne));\n+  if (LockingMode == LM_LIGHTWEIGHT) {\n+    Node *monitor_val   = _gvn.MakeConX(markWord::monitor_value);\n+    Node *chk_monitor   = _gvn.transform(new CmpXNode(lmasked_header, monitor_val));\n+    Node *test_monitor  = _gvn.transform(new BoolNode(chk_monitor, BoolTest::eq));\n+\n+    generate_slow_guard(test_monitor, slow_region);\n+  } else {\n+    Node *unlocked_val      = _gvn.MakeConX(markWord::unlocked_value);\n+    Node *chk_unlocked      = _gvn.transform(new CmpXNode(lmasked_header, unlocked_val));\n+    Node *test_not_unlocked = _gvn.transform(new BoolNode(chk_unlocked, BoolTest::ne));\n@@ -4526,1 +4536,2 @@\n-  generate_slow_guard(test_unlocked, slow_region);\n+    generate_slow_guard(test_not_unlocked, slow_region);\n+  }\n@@ -4895,1 +4906,7 @@\n-  if (ReduceBulkZeroing) {\n+  if (ReduceBulkZeroing &&\n+      \/\/ If we are implementing an array clone without knowing its source type\n+      \/\/ (can happen when compiling the array-guarded branch of a reflective\n+      \/\/ Object.clone() invocation), initialize the array within the allocation.\n+      \/\/ This is needed because some GCs (e.g. ZGC) might fall back in this case\n+      \/\/ to a runtime clone call that assumes fully initialized source arrays.\n+      (!is_array || obj->get_ptr_type()->isa_aryptr() != nullptr)) {\n","filename":"src\/hotspot\/share\/opto\/library_call.cpp","additions":27,"deletions":10,"binary":false,"changes":37,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1999, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1999, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -43,1 +43,1 @@\n-                                       _slot(slot), _is_eliminated(false) {\n+                                       _slot(slot), _kind(BoxLockNode::Regular) {\n@@ -47,0 +47,4 @@\n+  if (!RegMask::can_represent(reg, Compile::current()->sync_stack_slots())) {\n+    Compile::current()->record_method_not_compilable(\"must be able to represent all monitor slots in reg mask\");\n+    return;\n+  }\n@@ -50,1 +54,0 @@\n-\/\/-----------------------------hash--------------------------------------------\n@@ -52,1 +55,1 @@\n-  if (EliminateNestedLocks)\n+  if (EliminateNestedLocks) {\n@@ -54,1 +57,2 @@\n-  return Node::hash() + _slot + (_is_eliminated ? Compile::current()->fixed_slots() : 0);\n+  }\n+  return Node::hash() + _slot + (is_eliminated() ? Compile::current()->fixed_slots() : 0);\n@@ -57,1 +61,0 @@\n-\/\/------------------------------cmp--------------------------------------------\n@@ -59,1 +62,1 @@\n-  if (EliminateNestedLocks)\n+  if (EliminateNestedLocks) {\n@@ -61,0 +64,1 @@\n+  }\n@@ -62,1 +66,30 @@\n-  return bn._slot == _slot && bn._is_eliminated == _is_eliminated;\n+  return (bn._slot == _slot) && (bn.is_eliminated() == is_eliminated());\n+}\n+\n+Node* BoxLockNode::Identity(PhaseGVN* phase) {\n+  if (!EliminateNestedLocks && !this->is_eliminated()) {\n+    Node* n = phase->hash_find(this);\n+    if (n == nullptr || n == this) {\n+      return this;\n+    }\n+    BoxLockNode* old_box = n->as_BoxLock();\n+    \/\/ Set corresponding status (_kind) when commoning BoxLock nodes.\n+    if (this->_kind != old_box->_kind) {\n+      if (this->is_unbalanced()) {\n+        old_box->set_unbalanced();\n+      }\n+      if (!old_box->is_unbalanced()) {\n+        \/\/ Only Regular or Coarsened status should be here:\n+        \/\/ Nested and Local are set only when EliminateNestedLocks is on.\n+        if (old_box->is_regular()) {\n+          assert(this->is_coarsened(),\"unexpected kind: %s\", _kind_name[(int)this->_kind]);\n+          old_box->set_coarsened();\n+        } else {\n+          assert(this->is_regular(),\"unexpected kind: %s\", _kind_name[(int)this->_kind]);\n+          assert(old_box->is_coarsened(),\"unexpected kind: %s\", _kind_name[(int)old_box->_kind]);\n+        }\n+      }\n+    }\n+    return old_box;\n+  }\n+  return this;\n@@ -89,0 +122,3 @@\n+  if (is_unbalanced()) {\n+    return false;\n+  }\n","filename":"src\/hotspot\/share\/opto\/locknode.cpp","additions":44,"deletions":8,"binary":false,"changes":52,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1999, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1999, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -36,0 +36,1 @@\n+private:\n@@ -38,1 +39,28 @@\n-  bool _is_eliminated; \/\/ Associated locks were safely eliminated\n+  enum {\n+    Regular = 0,       \/\/ Normal locking region\n+    Local,             \/\/ EA found that local not escaping object is used for locking\n+    Nested,            \/\/ This region is inside other region which use the same object\n+    Coarsened,         \/\/ Some lock\/unlock in region were marked as coarsened\n+    Unbalanced,        \/\/ This region become unbalanced after coarsened lock\/unlock were eliminated\n+                       \/\/ or it is locking region from OSR when locking is done in Interpreter\n+    Eliminated         \/\/ All lock\/unlock in region were eliminated\n+  } _kind;\n+\n+#ifndef PRODUCT\n+  const char* _kind_name[6] = {\n+   \"Regular\",\n+   \"Local\",\n+   \"Nested\",\n+   \"Coarsened\",\n+   \"Unbalanced\",\n+   \"Eliminated\"\n+  };\n+#endif\n+\n+  \/\/ Allowed transitions of _kind:\n+  \/\/   Regular -> Local, Nested, Coarsened\n+  \/\/   Local   -> Eliminated\n+  \/\/   Nested  -> Eliminated\n+  \/\/   Coarsened -> Local, Nested, Unbalanced\n+  \/\/ EA and nested lock elimination can overwrite Coarsened kind.\n+  \/\/ Also allow transition to the same kind.\n@@ -52,0 +80,1 @@\n+  virtual Node* Identity(PhaseGVN* phase);\n@@ -60,3 +89,32 @@\n-  bool is_eliminated() const { return _is_eliminated; }\n-  \/\/ mark lock as eliminated.\n-  void set_eliminated()      { _is_eliminated = true; }\n+  bool is_regular()    const { return _kind == Regular; }\n+  bool is_local()      const { return _kind == Local; }\n+  bool is_nested()     const { return _kind == Nested; }\n+  bool is_coarsened()  const { return _kind == Coarsened; }\n+  bool is_eliminated() const { return _kind == Eliminated; }\n+  bool is_unbalanced() const { return _kind == Unbalanced; }\n+\n+  void set_local()      {\n+    assert((_kind == Regular || _kind == Local || _kind == Coarsened),\n+           \"incorrect kind for Local transitioni: %s\", _kind_name[(int)_kind]);\n+    _kind = Local;\n+  }\n+  void set_nested()     {\n+    assert((_kind == Regular || _kind == Nested || _kind == Coarsened),\n+           \"incorrect kind for Nested transition: %s\", _kind_name[(int)_kind]);\n+    _kind = Nested;\n+  }\n+  void set_coarsened()  {\n+    assert((_kind == Regular || _kind == Coarsened),\n+           \"incorrect kind for Coarsened transition: %s\", _kind_name[(int)_kind]);\n+    _kind = Coarsened;\n+  }\n+  void set_eliminated() {\n+    assert((_kind == Local || _kind == Nested),\n+           \"incorrect kind for Eliminated transition: %s\", _kind_name[(int)_kind]);\n+    _kind = Eliminated;\n+  }\n+  void set_unbalanced() {\n+    assert((_kind == Coarsened || _kind == Unbalanced),\n+           \"incorrect kind for Unbalanced transition: %s\", _kind_name[(int)_kind]);\n+    _kind = Unbalanced;\n+  }\n@@ -69,1 +127,3 @@\n-  virtual void dump_spec(outputStream *st) const { st->print(\"  Lock %d\",_slot); }\n+  virtual void dump_spec(outputStream *st) const {\n+    st->print(\"  Lock slot: %d, Kind: %s\", _slot, _kind_name[(int)_kind]);\n+  }\n","filename":"src\/hotspot\/share\/opto\/locknode.hpp","additions":66,"deletions":6,"binary":false,"changes":72,"status":"modified"},{"patch":"@@ -1374,0 +1374,1 @@\n+  bool range_check_predicate = false;\n@@ -1402,0 +1403,1 @@\n+    range_check_predicate = true;\n@@ -1481,1 +1483,4 @@\n-  dominated_by(new_predicate_proj, iff, if_success_proj->_con != new_predicate_proj->_con);\n+  \/\/ If a range check is eliminated, data dependent nodes (Load and range check CastII nodes) are now dependent on 2\n+  \/\/ Hoisted Check Predicates (one for the start of the loop, one for the end) but we can only keep track of one control\n+  \/\/ dependency: pin the data dependent nodes.\n+  dominated_by(new_predicate_proj, iff, if_success_proj->_con != new_predicate_proj->_con, range_check_predicate);\n","filename":"src\/hotspot\/share\/opto\/loopPredicate.cpp","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2049,0 +2049,6 @@\n+  if (init->is_CastII()) {\n+    \/\/ skip over the cast added by PhaseIdealLoop::cast_incr_before_loop() when pre\/post\/main loops are created because\n+    \/\/ it can get in the way of type propagation\n+    assert(init->as_CastII()->carry_dependency() && loop_head->skip_predicates() == init->in(0), \"casted iv phi from pre loop expected\");\n+    init = init->in(1);\n+  }\n@@ -2329,0 +2335,2 @@\n+    \/\/ Notify limit -> opaq -> CmpI, it may constant fold.\n+    _igvn.add_users_to_worklist(opaq->in(1));\n@@ -3416,1 +3424,0 @@\n-#ifdef ASSERT\n@@ -3429,1 +3436,0 @@\n-#endif\n@@ -3457,1 +3463,5 @@\n-  assert(locate_pre_from_main(main_head) == cl, \"bad main loop\");\n+  \/\/ We found a main-loop after this pre-loop, but they might not belong together.\n+  if (locate_pre_from_main(main_head) != cl) {\n+    return;\n+  }\n+\n","filename":"src\/hotspot\/share\/opto\/loopTransform.cpp","additions":13,"deletions":3,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -201,1 +201,1 @@\n-  dominated_by(proj_true->as_IfProj(), unswitch_iff, false, false);\n+  dominated_by(proj_true->as_IfProj(), unswitch_iff);\n@@ -205,1 +205,1 @@\n-  dominated_by(proj_false->as_IfProj(), unswitch_iff_clone, false, false);\n+  dominated_by(proj_false->as_IfProj(), unswitch_iff_clone);\n","filename":"src\/hotspot\/share\/opto\/loopUnswitch.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -931,1 +931,2 @@\n-  Node* inner_iters_actual = MaxNode::unsigned_min(inner_iters_max, inner_iters_limit, TypeInteger::make(0, iters_limit, Type::WidenMin, bt), _igvn);\n+  const TypeInteger* inner_iters_actual_range = TypeInteger::make(0, iters_limit, Type::WidenMin, bt);\n+  Node* inner_iters_actual = MaxNode::unsigned_min(inner_iters_max, inner_iters_limit, inner_iters_actual_range, _igvn);\n@@ -937,0 +938,7 @@\n+    \/\/ When the inner loop is transformed to a counted loop, a loop limit check is not expected to be needed because\n+    \/\/ the loop limit is less or equal to max_jint - stride - 1 (if stride is positive but a similar argument exists for\n+    \/\/ a negative stride). We add a CastII here to guarantee that, when the counted loop is created in a subsequent loop\n+    \/\/ opts pass, an accurate range of values for the limits is found.\n+    const TypeInt* inner_iters_actual_int_range = TypeInt::make(0, iters_limit, Type::WidenMin);\n+    inner_iters_actual_int = new CastIINode(outer_head, inner_iters_actual_int, inner_iters_actual_int_range, ConstraintCastNode::UnconditionalDependency);\n+    _igvn.register_new_node_with_optimizer(inner_iters_actual_int);\n","filename":"src\/hotspot\/share\/opto\/loopnode.cpp","additions":9,"deletions":1,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -1528,1 +1528,1 @@\n-  void dominated_by(IfProjNode* prevdom, IfNode* iff, bool flip = false, bool exclude_loop_predicate = false);\n+  void dominated_by(IfProjNode* prevdom, IfNode* iff, bool flip = false, bool pin_array_access_nodes = false);\n@@ -1746,0 +1746,2 @@\n+\n+  void pin_array_access_nodes_dependent_on(Node* ctrl);\n","filename":"src\/hotspot\/share\/opto\/loopnode.hpp","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -51,2 +51,3 @@\n-  if (n->Opcode() == Op_ConvI2L && n->bottom_type() != TypeLong::LONG) {\n-    \/\/ ConvI2L may have type information on it which is unsafe to push up\n+  if ((n->Opcode() == Op_ConvI2L && n->bottom_type() != TypeLong::LONG) ||\n+      (n->Opcode() == Op_ConvL2I && n->bottom_type() != TypeInt::INT)) {\n+    \/\/ ConvI2L\/ConvL2I may have type information on it which is unsafe to push up\n@@ -262,1 +263,1 @@\n-void PhaseIdealLoop::dominated_by(IfProjNode* prevdom, IfNode* iff, bool flip, bool exclude_loop_predicate) {\n+void PhaseIdealLoop::dominated_by(IfProjNode* prevdom, IfNode* iff, bool flip, bool pin_array_access_nodes) {\n@@ -287,1 +288,1 @@\n-  \/\/ If I dont have a reachable TRUE and FALSE path following the IfNode then\n+  \/\/ If I don't have a reachable TRUE and FALSE path following the IfNode then\n@@ -298,3 +299,0 @@\n-  \/\/ Loop predicates may have depending checks which should not\n-  \/\/ be skipped. For example, range check predicate has two checks\n-  \/\/ for lower and upper bounds.\n@@ -304,12 +302,0 @@\n-  ProjNode* dp_proj  = dp->as_Proj();\n-  ProjNode* unc_proj = iff->proj_out(1 - dp_proj->_con)->as_Proj();\n-  if (exclude_loop_predicate &&\n-      (unc_proj->is_uncommon_trap_proj(Deoptimization::Reason_predicate) != nullptr ||\n-       unc_proj->is_uncommon_trap_proj(Deoptimization::Reason_profile_predicate) != nullptr ||\n-       unc_proj->is_uncommon_trap_proj(Deoptimization::Reason_range_check) != nullptr)) {\n-    \/\/ If this is a range check (IfNode::is_range_check), do not\n-    \/\/ reorder because Compile::allow_range_check_smearing might have\n-    \/\/ changed the check.\n-    return; \/\/ Let IGVN transformation change control dependence.\n-  }\n-\n@@ -324,0 +310,14 @@\n+      if (pin_array_access_nodes) {\n+        \/\/ Because of Loop Predication, Loads and range check Cast nodes that are control dependent on this range\n+        \/\/ check (that is about to be removed) now depend on multiple dominating Hoisted Check Predicates. After the\n+        \/\/ removal of this range check, these control dependent nodes end up at the lowest\/nearest dominating predicate\n+        \/\/ in the graph. To ensure that these Loads\/Casts do not float above any of the dominating checks (even when the\n+        \/\/ lowest dominating check is later replaced by yet another dominating check), we need to pin them at the lowest\n+        \/\/ dominating check.\n+        Node* clone = cd->pin_array_access_node();\n+        if (clone != nullptr) {\n+          clone = _igvn.register_new_node_with_optimizer(clone, cd);\n+          _igvn.replace_node(cd, clone);\n+          cd = clone;\n+        }\n+      }\n@@ -1444,1 +1444,10 @@\n-          dominated_by(prevdom->as_IfProj(), n->as_If(), false, true);\n+          \/\/ Split if: pin array accesses that are control dependent on a range check and moved to a regular if,\n+          \/\/ to prevent an array load from floating above its range check. There are three cases:\n+          \/\/ 1. Move from RangeCheck \"a\" to RangeCheck \"b\": don't need to pin. If we ever remove b, then we pin\n+          \/\/    all its array accesses at that point.\n+          \/\/ 2. We move from RangeCheck \"a\" to regular if \"b\": need to pin. If we ever remove b, then its array\n+          \/\/    accesses would start to float, since we don't pin at that point.\n+          \/\/ 3. If we move from regular if: don't pin. All array accesses are already assumed to be pinned.\n+          bool pin_array_access_nodes =  n->Opcode() == Op_RangeCheck &&\n+                                         prevdom->in(0)->Opcode() != Op_RangeCheck;\n+          dominated_by(prevdom->as_IfProj(), n->as_If(), false, pin_array_access_nodes);\n@@ -1531,1 +1540,1 @@\n-        dominated_by(dom_proj_true->as_IfProj(), new_false_region->in(i)->in(0)->as_If(), false, false);\n+        dominated_by(dom_proj_true->as_IfProj(), new_false_region->in(i)->in(0)->as_If());\n@@ -1534,1 +1543,1 @@\n-        dominated_by(dom_proj_false->as_IfProj(), new_false_region->in(i)->in(0)->as_If(), false, false);\n+        dominated_by(dom_proj_false->as_IfProj(), new_false_region->in(i)->in(0)->as_If());\n@@ -1612,1 +1621,14 @@\n-        _igvn.replace_input_of(n, 0, place_outside_loop(n_ctrl, loop_ctrl));\n+        Node* maybe_pinned_n = n;\n+        Node* outside_ctrl = place_outside_loop(n_ctrl, loop_ctrl);\n+        if (n->depends_only_on_test()) {\n+          Node* pinned_clone = n->pin_array_access_node();\n+          if (pinned_clone != nullptr) {\n+            \/\/ Pin array access nodes: if this is an array load, it's going to be dependent on a condition that's not a\n+            \/\/ range check for that access. If that condition is replaced by an identical dominating one, then an\n+            \/\/ unpinned load would risk floating above its range check.\n+            register_new_node(pinned_clone, n_ctrl);\n+            maybe_pinned_n = pinned_clone;\n+            _igvn.replace_node(n, pinned_clone);\n+          }\n+        }\n+        _igvn.replace_input_of(maybe_pinned_n, 0, outside_ctrl);\n@@ -1626,1 +1648,10 @@\n-          Node* x = n->clone(); \/\/ Clone computation\n+          Node* x = nullptr;\n+          if (n->depends_only_on_test()) {\n+            \/\/ Pin array access nodes: if this is an array load, it's going to be dependent on a condition that's not a\n+            \/\/ range check for that access. If that condition is replaced by an identical dominating one, then an\n+            \/\/ unpinned load would risk floating above its range check.\n+            x = n->pin_array_access_node();\n+          }\n+          if (x == nullptr) {\n+            x = n->clone();\n+          }\n@@ -2176,0 +2207,14 @@\n+      if (idx == 0 &&\n+          use->depends_only_on_test()) {\n+        Node* pinned_clone = use->pin_array_access_node();\n+        if (pinned_clone != nullptr) {\n+          \/\/ Pin array access nodes: control is updated here to a region. If, after some transformations, only one path\n+          \/\/ into the region is left, an array load could become dependent on a condition that's not a range check for\n+          \/\/ that access. If that condition is replaced by an identical dominating one, then an unpinned load would risk\n+          \/\/ floating above its range check.\n+          pinned_clone->set_req(0, phi);\n+          register_new_node(pinned_clone, get_ctrl(use));\n+          _igvn.replace_node(use, pinned_clone);\n+          continue;\n+        }\n+      }\n@@ -2884,6 +2929,7 @@\n-\/\/------------------------------ insert_cmpi_loop_exit -------------------------------------\n-\/\/ Clone a signed compare loop exit from an unsigned compare and\n-\/\/ insert it before the unsigned cmp on the stay-in-loop path.\n-\/\/ All new nodes inserted in the dominator tree between the original\n-\/\/ if and it's projections.  The original if test is replaced with\n-\/\/ a constant to force the stay-in-loop path.\n+\/\/ Idea\n+\/\/ ----\n+\/\/ Partial Peeling tries to rotate the loop in such a way that it can later be turned into a counted loop. Counted loops\n+\/\/ require a signed loop exit test. When calling this method, we've only found a suitable unsigned test to partial peel\n+\/\/ with. Therefore, we try to split off a signed loop exit test from the unsigned test such that it can be used as new\n+\/\/ loop exit while keeping the unsigned test unchanged and preserving the same behavior as if we've used the unsigned\n+\/\/ test alone instead:\n@@ -2891,4 +2937,8 @@\n-\/\/ This is done to make sure that the original if and it's projections\n-\/\/ still dominate the same set of control nodes, that the ctrl() relation\n-\/\/ from data nodes to them is preserved, and that their loop nesting is\n-\/\/ preserved.\n+\/\/ Before Partial Peeling:\n+\/\/   Loop:\n+\/\/     <peeled section>\n+\/\/     Split off signed loop exit test\n+\/\/     <-- CUT HERE -->\n+\/\/     Unchanged unsigned loop exit test\n+\/\/     <rest of unpeeled section>\n+\/\/     goto Loop\n@@ -2896,2 +2946,14 @@\n-\/\/ before\n-\/\/          if(i <u limit)    unsigned compare loop exit\n+\/\/ After Partial Peeling:\n+\/\/   <cloned peeled section>\n+\/\/   Cloned split off signed loop exit test\n+\/\/   Loop:\n+\/\/     Unchanged unsigned loop exit test\n+\/\/     <rest of unpeeled section>\n+\/\/     <peeled section>\n+\/\/     Split off signed loop exit test\n+\/\/     goto Loop\n+\/\/\n+\/\/ Details\n+\/\/ -------\n+\/\/ Before:\n+\/\/          if (i <u limit)    Unsigned loop exit condition\n@@ -2902,5 +2964,6 @@\n-\/\/ after\n-\/\/          if(stay-in-loop-const)  original if\n-\/\/         \/       |\n-\/\/        \/        v\n-\/\/       \/  if(i <  limit)    new signed test\n+\/\/ Split off a signed loop exit test (i.e. with CmpI) from an unsigned loop exit test (i.e. with CmpU) and insert it\n+\/\/ before the CmpU on the stay-in-loop path and keep both tests:\n+\/\/\n+\/\/          if (i <u limit)    Signed loop exit test\n+\/\/        \/        |\n+\/\/       \/  if (i <u limit)    Unsigned loop exit test\n@@ -2908,10 +2971,28 @@\n-\/\/     \/  \/        v\n-\/\/    \/  \/  if(i <u limit)    new cloned unsigned test\n-\/\/   \/  \/   \/      |\n-\/\/   v  v  v       |\n-\/\/    region       |\n-\/\/        |        |\n-\/\/      dum-if     |\n-\/\/     \/  |        |\n-\/\/ ether  |        |\n-\/\/        v        v\n+\/\/     v  v        v\n+\/\/  exit-region  stay-in-loop-proj\n+\/\/\n+\/\/ Implementation\n+\/\/ --------------\n+\/\/ We need to make sure that the new signed loop exit test is properly inserted into the graph such that the unsigned\n+\/\/ loop exit test still dominates the same set of control nodes, the ctrl() relation from data nodes to both loop\n+\/\/ exit tests is preserved, and their loop nesting is correct.\n+\/\/\n+\/\/ To achieve that, we clone the unsigned loop exit test completely (leave it unchanged), insert the signed loop exit\n+\/\/ test above it and kill the original unsigned loop exit test by setting it's condition to a constant\n+\/\/ (i.e. stay-in-loop-const in graph below) such that IGVN can fold it later:\n+\/\/\n+\/\/           if (stay-in-loop-const)  Killed original unsigned loop exit test\n+\/\/          \/       |\n+\/\/         \/        v\n+\/\/        \/  if (i <  limit)          Split off signed loop exit test\n+\/\/       \/  \/       |\n+\/\/      \/  \/        v\n+\/\/     \/  \/  if (i <u limit)          Cloned unsigned loop exit test\n+\/\/    \/  \/   \/      |\n+\/\/   v  v  v        |\n+\/\/  exit-region     |\n+\/\/        |         |\n+\/\/    dummy-if      |\n+\/\/     \/  |         |\n+\/\/ dead   |         |\n+\/\/        v         v\n@@ -2920,1 +3001,9 @@\n-IfNode* PhaseIdealLoop::insert_cmpi_loop_exit(IfNode* if_cmpu, IdealLoopTree *loop) {\n+\/\/ Note: The dummy-if is inserted to create a region to merge the loop exits between the original to be killed unsigned\n+\/\/       loop exit test and its exit projection while keeping the exit projection (also see insert_region_before_proj()).\n+\/\/\n+\/\/ Requirements\n+\/\/ ------------\n+\/\/ Note that we can only split off a signed loop exit test from the unsigned loop exit test when the behavior is exactly\n+\/\/ the same as before with only a single unsigned test. This is only possible if certain requirements are met.\n+\/\/ Otherwise, we need to bail out (see comments in the code below).\n+IfNode* PhaseIdealLoop::insert_cmpi_loop_exit(IfNode* if_cmpu, IdealLoopTree* loop) {\n@@ -2925,1 +3014,3 @@\n-  if (bol->_test._test != BoolTest::lt) return nullptr;\n+  if (bol->_test._test != BoolTest::lt) {\n+    return nullptr;\n+  }\n@@ -2927,1 +3018,2 @@\n-  if (cmpu->Opcode() != Op_CmpU) return nullptr;\n+  assert(cmpu->Opcode() == Op_CmpU, \"must be unsigned comparison\");\n+\n@@ -2929,1 +3021,3 @@\n-  if (stride == 0) return nullptr;\n+  if (stride == 0) {\n+    return nullptr;\n+  }\n@@ -2941,3 +3035,82 @@\n-  \/\/ The loop exit condition is !(i <u limit) ==> (i < 0 || i >= limit).\n-  \/\/ Split out the exit condition (i < 0) for stride < 0 or (i >= limit) for stride > 0.\n-  Node* limit = nullptr;\n+  \/\/ The unsigned loop exit condition is\n+  \/\/   !(i <u  limit)\n+  \/\/ =   i >=u limit\n+  \/\/\n+  \/\/ First, we note that for any x for which\n+  \/\/   0 <= x <= INT_MAX\n+  \/\/ we can convert x to an unsigned int and still get the same guarantee:\n+  \/\/   0 <=  (uint) x <=  INT_MAX = (uint) INT_MAX\n+  \/\/   0 <=u (uint) x <=u INT_MAX = (uint) INT_MAX   (LEMMA)\n+  \/\/\n+  \/\/ With that in mind, if\n+  \/\/   limit >= 0             (COND)\n+  \/\/ then the unsigned loop exit condition\n+  \/\/   i >=u limit            (ULE)\n+  \/\/ is equivalent to\n+  \/\/   i < 0 || i >= limit    (SLE-full)\n+  \/\/ because either i is negative and therefore always greater than MAX_INT when converting to unsigned\n+  \/\/   (uint) i >=u MAX_INT >= limit >= 0\n+  \/\/ or otherwise\n+  \/\/   i >= limit >= 0\n+  \/\/ holds due to (LEMMA).\n+  \/\/\n+  \/\/ For completeness, a counterexample with limit < 0:\n+  \/\/ Assume i = -3 and limit = -2:\n+  \/\/   i  < 0\n+  \/\/   -2 < 0\n+  \/\/ is true and thus also \"i < 0 || i >= limit\". But\n+  \/\/   i  >=u limit\n+  \/\/   -3 >=u -2\n+  \/\/ is false.\n+  Node* limit = cmpu->in(2);\n+  const TypeInt* type_limit = _igvn.type(limit)->is_int();\n+  if (type_limit->_lo < 0) {\n+    return nullptr;\n+  }\n+\n+  \/\/ We prove below that we can extract a single signed loop exit condition from (SLE-full), depending on the stride:\n+  \/\/   stride < 0:\n+  \/\/     i < 0        (SLE = SLE-negative)\n+  \/\/   stride > 0:\n+  \/\/     i >= limit   (SLE = SLE-positive)\n+  \/\/ such that we have the following graph before Partial Peeling with stride > 0 (similar for stride < 0):\n+  \/\/\n+  \/\/ Loop:\n+  \/\/   <peeled section>\n+  \/\/   i >= limit    (SLE-positive)\n+  \/\/   <-- CUT HERE -->\n+  \/\/   i >=u limit   (ULE)\n+  \/\/   <rest of unpeeled section>\n+  \/\/   goto Loop\n+  \/\/\n+  \/\/ We exit the loop if:\n+  \/\/   (SLE) is true OR (ULE) is true\n+  \/\/ However, if (SLE) is true then (ULE) also needs to be true to ensure the exact same behavior. Otherwise, we wrongly\n+  \/\/ exit a loop that should not have been exited if we did not apply Partial Peeling. More formally, we need to ensure:\n+  \/\/   (SLE) IMPLIES (ULE)\n+  \/\/ This indeed holds when (COND) is given:\n+  \/\/ - stride > 0:\n+  \/\/       i >=  limit             \/\/ (SLE = SLE-positive)\n+  \/\/       i >=  limit >= 0        \/\/ (COND)\n+  \/\/       i >=u limit >= 0        \/\/ (LEMMA)\n+  \/\/     which is the unsigned loop exit condition (ULE).\n+  \/\/ - stride < 0:\n+  \/\/       i        <  0           \/\/ (SLE = SLE-negative)\n+  \/\/       (uint) i >u MAX_INT     \/\/ (NEG) all negative values are greater than MAX_INT when converted to unsigned\n+  \/\/       MAX_INT >= limit >= 0   \/\/ (COND)\n+  \/\/       MAX_INT >=u limit >= 0  \/\/ (LEMMA)\n+  \/\/     and thus from (NEG) and (LEMMA):\n+  \/\/       i >=u limit\n+  \/\/     which is the unsigned loop exit condition (ULE).\n+  \/\/\n+  \/\/\n+  \/\/ After Partial Peeling, we have the following structure for stride > 0 (similar for stride < 0):\n+  \/\/   <cloned peeled section>\n+  \/\/   i >= limit (SLE-positive)\n+  \/\/   Loop:\n+  \/\/     i >=u limit (ULE)\n+  \/\/     <rest of unpeeled section>\n+  \/\/     <peeled section>\n+  \/\/     i >= limit (SLE-positive)\n+  \/\/     goto Loop\n+  Node* rhs_cmpi;\n@@ -2945,1 +3118,1 @@\n-    limit = cmpu->in(2);\n+    rhs_cmpi = limit; \/\/ For i >= limit\n@@ -2947,2 +3120,2 @@\n-    limit = _igvn.makecon(TypeInt::ZERO);\n-    set_ctrl(limit, C->root());\n+    rhs_cmpi = _igvn.makecon(TypeInt::ZERO); \/\/ For i < 0\n+    set_ctrl(rhs_cmpi, C->root());\n@@ -2956,1 +3129,1 @@\n-  ProjNode* cmpi_exit = insert_if_before_proj(cmpu->in(1), Signed, rel_i, limit, lp_continue);\n+  ProjNode* cmpi_exit = insert_if_before_proj(cmpu->in(1), Signed, rel_i, rhs_cmpi, lp_continue);\n@@ -3807,0 +3980,13 @@\n+      if (n_clone->depends_only_on_test()) {\n+        \/\/ Pin array access nodes: control is updated here to the loop head. If, after some transformations, the\n+        \/\/ backedge is removed, an array load could become dependent on a condition that's not a range check for that\n+        \/\/ access. If that condition is replaced by an identical dominating one, then an unpinned load would risk\n+        \/\/ floating above its range check.\n+        Node* pinned_clone = n_clone->pin_array_access_node();\n+        if (pinned_clone != nullptr) {\n+          register_new_node(pinned_clone, get_ctrl(n_clone));\n+          old_new.map(n->_idx, pinned_clone);\n+          _igvn.replace_node(n_clone, pinned_clone);\n+          n_clone = pinned_clone;\n+        }\n+      }\n","filename":"src\/hotspot\/share\/opto\/loopopts.cpp","additions":248,"deletions":62,"binary":false,"changes":310,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -728,1 +728,1 @@\n-                                                 first_ind, nfields);\n+                                                 first_ind, sfpt->jvms()->depth(), nfields);\n@@ -1905,2 +1905,3 @@\n-void PhaseMacroExpand::mark_eliminated_box(Node* oldbox, Node* obj) {\n-  if (oldbox->as_BoxLock()->is_eliminated()) {\n+void PhaseMacroExpand::mark_eliminated_box(Node* box, Node* obj) {\n+  BoxLockNode* oldbox = box->as_BoxLock();\n+  if (oldbox->is_eliminated()) {\n@@ -1909,0 +1910,1 @@\n+  assert(!oldbox->is_unbalanced(), \"this should not be called for unbalanced region\");\n@@ -1916,0 +1918,1 @@\n+    oldbox->set_local();      \/\/ This verifies correct state of BoxLock\n@@ -1917,1 +1920,1 @@\n-    oldbox->as_BoxLock()->set_eliminated(); \/\/ This changes box's hash value\n+    oldbox->set_eliminated(); \/\/ This changes box's hash value\n@@ -1944,0 +1947,1 @@\n+  newbox->set_local(); \/\/ This verifies correct state of BoxLock\n@@ -1999,0 +2003,3 @@\n+  if (!alock->is_balanced()) {\n+    return; \/\/ Can't do any more elimination for this locking region\n+  }\n@@ -2315,0 +2322,5 @@\n+  } else {\n+    \/\/ After coarsened locks are eliminated locking regions\n+    \/\/ become unbalanced. We should not execute any more\n+    \/\/ locks elimination optimizations on them.\n+    C->mark_unbalanced_boxes();\n","filename":"src\/hotspot\/share\/opto\/macro.cpp","additions":17,"deletions":5,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2012, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2012, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -1269,1 +1269,1 @@\n-                       true, !ac->is_copyofrange());\n+                       true, ac->has_negative_length_guard());\n","filename":"src\/hotspot\/share\/opto\/macroArrayCopy.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -848,2 +848,6 @@\n-bool LoadNode::cmp( const Node &n ) const\n-{ return !Type::cmp( _type, ((LoadNode&)n)._type ); }\n+bool LoadNode::cmp(const Node &n) const {\n+  LoadNode& load = (LoadNode &)n;\n+  return !Type::cmp(_type, load._type) &&\n+         _control_dependency == load._control_dependency &&\n+         _mo == load._mo;\n+}\n@@ -986,0 +990,8 @@\n+LoadNode* LoadNode::pin_array_access_node() const {\n+  const TypePtr* adr_type = this->adr_type();\n+  if (adr_type != nullptr && adr_type->isa_aryptr()) {\n+    return clone_pinned();\n+  }\n+  return nullptr;\n+}\n+\n@@ -1005,1 +1017,2 @@\n-    LoadNode* ld = clone()->as_Load();\n+    \/\/ load depends on the tests that validate the arraycopy\n+    LoadNode* ld = clone_pinned();\n@@ -1047,2 +1060,0 @@\n-    \/\/ load depends on the tests that validate the arraycopy\n-    ld->_control_dependency = UnknownControl;\n@@ -2468,0 +2479,6 @@\n+LoadNode* LoadNode::clone_pinned() const {\n+  LoadNode* ld = clone()->as_Load();\n+  ld->_control_dependency = UnknownControl;\n+  return ld;\n+}\n+\n@@ -2744,1 +2761,4 @@\n-    result = mem;\n+    \/\/ Ensure vector type is the same\n+    if (!is_StoreVector() || (mem->is_LoadVector() && as_StoreVector()->vect_type() == mem->as_LoadVector()->vect_type())) {\n+      result = mem;\n+    }\n@@ -2753,1 +2773,18 @@\n-    result = mem;\n+    if (!is_StoreVector()) {\n+      result = mem;\n+    } else {\n+      const StoreVectorNode* store_vector = as_StoreVector();\n+      const StoreVectorNode* mem_vector = mem->as_StoreVector();\n+      const Node* store_indices = store_vector->indices();\n+      const Node* mem_indices = mem_vector->indices();\n+      const Node* store_mask = store_vector->mask();\n+      const Node* mem_mask = mem_vector->mask();\n+      \/\/ Ensure types, indices, and masks match\n+      if (store_vector->vect_type() == mem_vector->vect_type() &&\n+          ((store_indices == nullptr) == (mem_indices == nullptr) &&\n+           (store_indices == nullptr || store_indices->eqv_uncast(mem_indices))) &&\n+          ((store_mask == nullptr) == (mem_mask == nullptr) &&\n+           (store_mask == nullptr || store_mask->eqv_uncast(mem_mask)))) {\n+        result = mem;\n+      }\n+    }\n","filename":"src\/hotspot\/share\/opto\/memnode.cpp","additions":44,"deletions":7,"binary":false,"changes":51,"status":"modified"},{"patch":"@@ -292,0 +292,2 @@\n+  LoadNode* pin_array_access_node() const;\n+\n@@ -317,0 +319,2 @@\n+\n+  LoadNode* clone_pinned() const;\n","filename":"src\/hotspot\/share\/opto\/memnode.hpp","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -175,0 +175,1 @@\n+class LoadVectorGatherMaskedNode;\n@@ -177,0 +178,1 @@\n+class StoreVectorScatterMaskedNode;\n@@ -971,0 +973,2 @@\n+  DEFINE_CLASS_QUERY(LoadVectorMasked)\n+  DEFINE_CLASS_QUERY(LoadVectorGatherMasked)\n@@ -973,0 +977,2 @@\n+  DEFINE_CLASS_QUERY(StoreVectorMasked)\n+  DEFINE_CLASS_QUERY(StoreVectorScatterMasked)\n@@ -1119,1 +1125,8 @@\n-\/\/----------------- Code Generation\n+  \/\/ Returns a clone of the current node that's pinned (if the current node is not) for nodes found in array accesses\n+  \/\/ (Load and range check CastII nodes).\n+  \/\/ This is used when an array access is made dependent on 2 or more range checks (range check smearing or Loop Predication).\n+  virtual Node* pin_array_access_node() const {\n+    return nullptr;\n+  }\n+\n+  \/\/----------------- Code Generation\n@@ -1528,1 +1541,0 @@\n-  DUIterator_Fast i;\n@@ -1530,0 +1542,1 @@\n+  DUIterator_Fast i;\n","filename":"src\/hotspot\/share\/opto\/node.hpp","additions":15,"deletions":2,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -172,0 +172,5 @@\n+  \/\/ Return an integer less than, equal to, or greater than zero\n+  \/\/ if the stack offset of the first argument is respectively\n+  \/\/ less than, equal to, or greater than the second.\n+  int compare_two_spill_nodes(Node* first, Node* second);\n+\n@@ -2222,0 +2227,23 @@\n+int Scheduling::compare_two_spill_nodes(Node* first, Node* second) {\n+  assert(first->is_MachSpillCopy() && second->is_MachSpillCopy(), \"\");\n+\n+  OptoReg::Name first_src_lo = _regalloc->get_reg_first(first->in(1));\n+  OptoReg::Name first_dst_lo = _regalloc->get_reg_first(first);\n+  OptoReg::Name second_src_lo = _regalloc->get_reg_first(second->in(1));\n+  OptoReg::Name second_dst_lo = _regalloc->get_reg_first(second);\n+\n+  \/\/ Comparison between stack -> reg and stack -> reg\n+  if (OptoReg::is_stack(first_src_lo) && OptoReg::is_stack(second_src_lo) &&\n+      OptoReg::is_reg(first_dst_lo) && OptoReg::is_reg(second_dst_lo)) {\n+    return _regalloc->reg2offset(first_src_lo) - _regalloc->reg2offset(second_src_lo);\n+  }\n+\n+  \/\/ Comparison between reg -> stack and reg -> stack\n+  if (OptoReg::is_stack(first_dst_lo) && OptoReg::is_stack(second_dst_lo) &&\n+      OptoReg::is_reg(first_src_lo) && OptoReg::is_reg(second_src_lo)) {\n+    return _regalloc->reg2offset(first_dst_lo) - _regalloc->reg2offset(second_dst_lo);\n+  }\n+\n+  return 0; \/\/ Not comparable\n+}\n+\n@@ -2233,1 +2261,4 @@\n-  \/\/ Insert in latency order (insertion sort)\n+  \/\/ Insert in latency order (insertion sort). If two MachSpillCopyNodes\n+  \/\/ for stack spilling or unspilling have the same latency, we sort\n+  \/\/ them in the order of stack offset. Some ports (e.g. aarch64) may also\n+  \/\/ have more opportunities to do ld\/st merging\n@@ -2235,2 +2266,2 @@\n-  for ( i=0; i < _available.size(); i++ )\n-    if (_current_latency[_available[i]->_idx] > latency)\n+  for (i = 0; i < _available.size(); i++) {\n+    if (_current_latency[_available[i]->_idx] > latency) {\n@@ -2238,0 +2269,6 @@\n+    } else if (_current_latency[_available[i]->_idx] == latency &&\n+               n->is_MachSpillCopy() && _available[i]->is_MachSpillCopy() &&\n+               compare_two_spill_nodes(n, _available[i]) > 0) {\n+      break;\n+    }\n+  }\n","filename":"src\/hotspot\/share\/opto\/output.cpp","additions":40,"deletions":3,"binary":false,"changes":43,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -227,1 +227,3 @@\n-    Node *box = _gvn.transform(new BoxLockNode(next_monitor()));\n+    BoxLockNode* osr_box = new BoxLockNode(next_monitor());\n+    \/\/ Check for bailout after new BoxLockNode\n+    if (failing()) { return; }\n@@ -229,0 +231,10 @@\n+    \/\/ This OSR locking region is unbalanced because it does not have Lock node:\n+    \/\/ locking was done in Interpreter.\n+    \/\/ This is similar to Coarsened case when Lock node is eliminated\n+    \/\/ and as result the region is marked as Unbalanced.\n+\n+    \/\/ Emulate Coarsened state transition from Regular to Unbalanced.\n+    osr_box->set_coarsened();\n+    osr_box->set_unbalanced();\n+\n+    Node* box = _gvn.transform(osr_box);\n@@ -1264,0 +1276,2 @@\n+    \/\/ Check for bailout in shared_lock\n+    if (failing()) { return; }\n@@ -1788,1 +1802,1 @@\n-              \/\/ BoxLock nodes are not commoning.\n+              \/\/ BoxLock nodes are not commoning when EliminateNestedLocks is on.\n@@ -1793,0 +1807,13 @@\n+              BoxLockNode* old_box = m->as_BoxLock();\n+              if (n->as_BoxLock()->is_unbalanced() && !old_box->is_unbalanced()) {\n+                \/\/ Preserve Unbalanced status.\n+                \/\/\n+                \/\/ `old_box` can have only Regular or Coarsened status\n+                \/\/ because this code is executed only during Parse phase and\n+                \/\/ Incremental Inlining before EA and Macro nodes elimination.\n+                \/\/\n+                \/\/ Incremental Inlining is executed after IGVN optimizations\n+                \/\/ during which BoxLock can be marked as Coarsened.\n+                old_box->set_coarsened(); \/\/ Verifies state\n+                old_box->set_unbalanced();\n+              }\n","filename":"src\/hotspot\/share\/opto\/parse1.cpp","additions":30,"deletions":3,"binary":false,"changes":33,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -2782,0 +2782,1 @@\n+  if (failing()) { return; }\n","filename":"src\/hotspot\/share\/opto\/parse2.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -1916,2 +1916,3 @@\n-      if (cmpu->Opcode() == Op_CmpU) {\n-        \/\/ Got a CmpU which might need the new type information from node n.\n+      const uint cmpu_opcode = cmpu->Opcode();\n+      if (cmpu_opcode == Op_CmpU || cmpu_opcode == Op_CmpU3) {\n+        \/\/ Got a CmpU or CmpU3 which might need the new type information from node n.\n","filename":"src\/hotspot\/share\/opto\/phaseX.cpp","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,0 +32,1 @@\n+#include \"utilities\/globalDefinitions.hpp\"\n@@ -362,5 +363,4 @@\n-  static bool can_represent(OptoReg::Name reg) {\n-    \/\/ NOTE: -1 in computation reflects the usage of the last\n-    \/\/       bit of the regmask as an infinite stack flag and\n-    \/\/       -7 is to keep mask aligned for largest value (VecZ).\n-    return (int)reg < (int)(CHUNK_SIZE - 1);\n+  static bool can_represent(OptoReg::Name reg, unsigned int size = 1) {\n+    \/\/ NOTE: MAX2(1U,size) in computation reflects the usage of the last\n+    \/\/       bit of the regmask as an infinite stack flag.\n+    return (int)reg < (int)(CHUNK_SIZE - MAX2(1U,size));\n@@ -369,1 +369,1 @@\n-    \/\/ NOTE: -SlotsPerVecZ in computation reflects the need\n+    \/\/ NOTE: SlotsPerVecZ in computation reflects the need\n@@ -371,1 +371,1 @@\n-    return (int)reg < (int)(CHUNK_SIZE - SlotsPerVecZ);\n+    return can_represent(reg, SlotsPerVecZ);\n","filename":"src\/hotspot\/share\/opto\/regmask.hpp","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -1566,4 +1566,1 @@\n-  \/\/ This needs authenticating, but to do that here requires the fp of the previous frame.\n-  \/\/ A better way of doing it would be authenticate in the caller by adding a\n-  \/\/ AuthPAuthNode and using it in GraphKit::gen_stub. For now, just strip it.\n-  AARCH64_PORT_ONLY(ret_pc = pauth_strip_pointer(ret_pc));\n+  AARCH64_PORT_ONLY(ret_pc = pauth_strip_verifiable(ret_pc));\n","filename":"src\/hotspot\/share\/opto\/runtime.cpp","additions":1,"deletions":4,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -737,0 +737,8 @@\n+  if (iff->Opcode() == Op_RangeCheck) {\n+    \/\/ Pin array access nodes: control is updated here to a region. If, after some transformations, only one path\n+    \/\/ into the region is left, an array load could become dependent on a condition that's not a range check for\n+    \/\/ that access. If that condition is replaced by an identical dominating one, then an unpinned load would risk\n+    \/\/ floating above its range check.\n+    pin_array_access_nodes_dependent_on(new_true);\n+    pin_array_access_nodes_dependent_on(new_false);\n+  }\n@@ -747,0 +755,15 @@\n+\n+void PhaseIdealLoop::pin_array_access_nodes_dependent_on(Node* ctrl) {\n+  for (DUIterator i = ctrl->outs(); ctrl->has_out(i); i++) {\n+    Node* use = ctrl->out(i);\n+    if (!use->depends_only_on_test()) {\n+      continue;\n+    }\n+    Node* pinned_clone = use->pin_array_access_node();\n+    if (pinned_clone != nullptr) {\n+      register_new_node(pinned_clone, get_ctrl(use));\n+      _igvn.replace_node(use, pinned_clone);\n+      --i;\n+    }\n+  }\n+}\n","filename":"src\/hotspot\/share\/opto\/split_if.cpp","additions":23,"deletions":0,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -2751,1 +2751,1 @@\n-        Node* in1 = first->in(1);\n+        Node* in1 = vector_opd(p, 1);\n@@ -4035,0 +4035,14 @@\n+  \/\/ The computation of the new pre-loop limit could overflow or underflow the int range. This is problematic in\n+  \/\/ combination with Range Check Elimination (RCE), which determines a \"safe\" range where a RangeCheck will always\n+  \/\/ succeed. RCE adjusts the pre-loop limit such that we only enter the main-loop once we have reached the \"safe\"\n+  \/\/ range, and adjusts the main-loop limit so that we exit the main-loop before we leave the \"safe\" range. After RCE,\n+  \/\/ the range of the main-loop can only be safely narrowed, and should never be widened. Hence, the pre-loop limit\n+  \/\/ can only be increased (for stride > 0), but an add overflow might decrease it, or decreased (for stride < 0), but\n+  \/\/ a sub underflow might increase it. To prevent that, we perform the Sub \/ Add and Max \/ Min with long operations.\n+  lim0       = new ConvI2LNode(lim0);\n+  N          = new ConvI2LNode(N);\n+  orig_limit = new ConvI2LNode(orig_limit);\n+  _igvn.register_new_node_with_optimizer(lim0);\n+  _igvn.register_new_node_with_optimizer(N);\n+  _igvn.register_new_node_with_optimizer(orig_limit);\n+\n@@ -4039,1 +4053,1 @@\n-    lim = new SubINode(lim0, N);\n+    lim = new SubLNode(lim0, N);\n@@ -4041,1 +4055,1 @@\n-    lim = new AddINode(lim0, N);\n+    lim = new AddLNode(lim0, N);\n@@ -4046,2 +4060,2 @@\n-    (stride > 0) ? (Node*) new MinINode(lim, orig_limit)\n-                 : (Node*) new MaxINode(lim, orig_limit);\n+    (stride > 0) ? (Node*) new MinLNode(_phase->C, lim, orig_limit)\n+                 : (Node*) new MaxLNode(_phase->C, lim, orig_limit);\n@@ -4049,0 +4063,5 @@\n+\n+  \/\/ We know that the result is in the int range, there is never truncation\n+  constrained = new ConvL2INode(constrained);\n+  _igvn.register_new_node_with_optimizer(constrained);\n+\n@@ -4190,1 +4209,4 @@\n-  if (is_loop_member(adr)) {\n+  if (!invariant(adr)) {\n+    \/\/ The address must be invariant for the current loop. But if we are in a main-loop,\n+    \/\/ it must also be invariant of the pre-loop, otherwise we cannot use this address\n+    \/\/ for the pre-loop limit adjustment required for main-loop alignment.\n","filename":"src\/hotspot\/share\/opto\/superword.cpp","additions":28,"deletions":6,"binary":false,"changes":34,"status":"modified"},{"patch":"@@ -4176,1 +4176,1 @@\n-    if (loaded->ptr() == TypePtr::TopPTR)        { return unloaded; }\n+    if (loaded->ptr() == TypePtr::TopPTR)        { return unloaded->with_speculative(speculative); }\n@@ -4178,1 +4178,1 @@\n-    else if (loaded->ptr() == TypePtr::BotPTR)   { return TypeInstPtr::BOTTOM; }\n+    else if (loaded->ptr() == TypePtr::BotPTR)   { return TypeInstPtr::BOTTOM->with_speculative(speculative); }\n@@ -4180,2 +4180,2 @@\n-      if (unloaded->ptr() == TypePtr::BotPTR)    { return TypeInstPtr::BOTTOM;  }\n-      else                                       { return TypeInstPtr::NOTNULL; }\n+      if (unloaded->ptr() == TypePtr::BotPTR)    { return TypeInstPtr::BOTTOM->with_speculative(speculative);  }\n+      else                                       { return TypeInstPtr::NOTNULL->with_speculative(speculative); }\n@@ -4183,1 +4183,1 @@\n-    else if (unloaded->ptr() == TypePtr::TopPTR) { return unloaded; }\n+    else if (unloaded->ptr() == TypePtr::TopPTR) { return unloaded->with_speculative(speculative); }\n@@ -4185,1 +4185,1 @@\n-    return unloaded->cast_to_ptr_type(TypePtr::AnyNull)->is_instptr();\n+    return unloaded->cast_to_ptr_type(TypePtr::AnyNull)->is_instptr()->with_speculative(speculative);\n@@ -4191,1 +4191,1 @@\n-    return TypeInstPtr::NOTNULL;\n+    return TypeInstPtr::NOTNULL->with_speculative(speculative);\n@@ -4193,1 +4193,1 @@\n-  return TypeInstPtr::BOTTOM;\n+  return TypeInstPtr::BOTTOM->with_speculative(speculative);\n@@ -4596,0 +4596,4 @@\n+const TypeInstPtr* TypeInstPtr::with_speculative(const TypePtr* speculative) const {\n+  return make(_ptr, klass(), _interfaces, klass_is_exact(), const_oop(), _offset, _instance_id, speculative, _inline_depth);\n+}\n+\n","filename":"src\/hotspot\/share\/opto\/type.cpp","additions":12,"deletions":8,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -1359,0 +1359,1 @@\n+  const TypeInstPtr* with_speculative(const TypePtr* speculative) const;\n","filename":"src\/hotspot\/share\/opto\/type.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2020, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2020, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -283,1 +283,1 @@\n-                                               first_ind, n_fields);\n+                                               first_ind, sfpt->jvms()->depth(), n_fields);\n","filename":"src\/hotspot\/share\/opto\/vector.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -880,0 +880,4 @@\n+  virtual int store_Opcode() const {\n+    \/\/ Ensure it is different from any store opcode to avoid folding when indices are used\n+    return -1;\n+  }\n@@ -911,0 +915,2 @@\n+  virtual Node* mask() const { return nullptr; }\n+  virtual Node* indices() const { return nullptr; }\n@@ -918,0 +924,1 @@\n+   enum { Indices = 4 };\n@@ -929,0 +936,1 @@\n+   virtual Node* indices() const { return in(Indices); }\n@@ -935,0 +943,1 @@\n+  enum { Mask = 4 };\n@@ -948,0 +957,1 @@\n+  virtual Node* mask() const { return in(Mask); }\n@@ -968,0 +978,4 @@\n+  virtual int store_Opcode() const {\n+    \/\/ Ensure it is different from any store opcode to avoid folding when a mask is used\n+    return -1;\n+  }\n@@ -988,0 +1002,4 @@\n+  virtual int store_Opcode() const {\n+    \/\/ Ensure it is different from any store opcode to avoid folding when indices and mask are used\n+    return -1;\n+  }\n@@ -994,0 +1012,3 @@\n+   enum { Indices = 4,\n+          Mask\n+   };\n@@ -1008,0 +1029,2 @@\n+   virtual Node* mask() const { return in(Mask); }\n+   virtual Node* indices() const { return in(Indices); }\n","filename":"src\/hotspot\/share\/opto\/vectornode.hpp","additions":23,"deletions":0,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -604,1 +604,1 @@\n-  if (Universe::heap()->is_gc_active()) {\n+  if (Universe::heap()->is_stw_gc_active()) {\n","filename":"src\/hotspot\/share\/prims\/forte.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -2298,1 +2298,1 @@\n-  debug_only(int *lastPtr = (int *)((char *)&checked_jni_NativeInterface + \\\n+  debug_only(intptr_t *lastPtr = (intptr_t *)((char *)&checked_jni_NativeInterface + \\\n","filename":"src\/hotspot\/share\/prims\/jniCheck.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -385,0 +385,1 @@\n+    MACOS_AARCH64_ONLY(ThreadWXEnable __wx(WXWrite, current_thread));\n","filename":"src\/hotspot\/share\/prims\/jvmtiExport.cpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -133,0 +133,1 @@\n+  MACOS_AARCH64_ONLY(ThreadWXEnable __wx(WXWrite, current_thread));\n","filename":"src\/hotspot\/share\/prims\/jvmtiExtensions.cpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -57,1 +57,1 @@\n-    return entry._obj->identity_hash();\n+    return (unsigned)entry._obj->identity_hash();\n","filename":"src\/hotspot\/share\/prims\/jvmtiTagMapTable.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -58,0 +58,1 @@\n+#include \"sanitizers\/ub.hpp\"\n@@ -134,7 +135,3 @@\n-  jlong byte_offset = field_offset_to_byte_offset(field_offset);\n-\n-  if (sizeof(char*) == sizeof(jint)) {   \/\/ (this constant folds!)\n-    return cast_from_oop<address>(p) + (jint) byte_offset;\n-  } else {\n-    return cast_from_oop<address>(p) +        byte_offset;\n-  }\n+  uintptr_t base_address = cast_from_oop<uintptr_t>(p);\n+  uintptr_t byte_offset  = (uintptr_t)field_offset_to_byte_offset(field_offset);\n+  return (void*)(base_address + byte_offset);\n@@ -226,0 +223,3 @@\n+  \/\/ we use this method at some places for writing to 0 e.g. to cause a crash;\n+  \/\/ ubsan does not know that this is the desired behavior\n+  ATTRIBUTE_NO_UBSAN\n","filename":"src\/hotspot\/share\/prims\/unsafe.cpp","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,0 +31,1 @@\n+#include \"runtime\/continuationHelper.inline.hpp\"\n@@ -137,1 +138,2 @@\n-  address pc = *(address*)(sp - frame::sender_sp_ret_address_offset());\n+  address pc = ContinuationHelper::return_address_at(\n+                 sp - frame::sender_sp_ret_address_offset());\n","filename":"src\/hotspot\/share\/runtime\/continuationEntry.cpp","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -302,1 +302,2 @@\n-  address pc = *(address*)(sp - frame::sender_sp_ret_address_offset());\n+  address pc = ContinuationHelper::return_address_at(\n+                 sp - frame::sender_sp_ret_address_offset());\n@@ -405,1 +406,1 @@\n-  virtual stackChunkOop allocate_chunk_slow(size_t stack_size) = 0;\n+  virtual stackChunkOop allocate_chunk_slow(size_t stack_size, int argsize_md) = 0;\n@@ -440,8 +441,0 @@\n-\n-#ifdef ASSERT\n-  bool is_empty(stackChunkOop chunk) {\n-    \/\/ during freeze, the chunk is in an intermediate state (after setting the chunk's argsize but before setting its\n-    \/\/ ultimate sp) so we use this instead of stackChunkOopDesc::is_empty\n-    return chunk->sp() >= chunk->stack_size() - chunk->argsize() - frame::metadata_words_at_top;\n-  }\n-#endif\n@@ -453,1 +446,1 @@\n-  stackChunkOop allocate_chunk(size_t stack_size);\n+  stackChunkOop allocate_chunk(size_t stack_size, int argsize_md);\n@@ -462,1 +455,1 @@\n-  virtual stackChunkOop allocate_chunk_slow(size_t stack_size) override { return allocate_chunk(stack_size); }\n+  virtual stackChunkOop allocate_chunk_slow(size_t stack_size, int argsize_md) override { return allocate_chunk(stack_size, argsize_md); }\n@@ -545,1 +538,1 @@\n-  stackChunkOop chunk = allocate_chunk(cont_size() + frame::metadata_words);\n+  stackChunkOop chunk = allocate_chunk(cont_size() + frame::metadata_words, _cont.argsize() + frame::metadata_words_at_top);\n@@ -574,1 +567,1 @@\n-  if (chunk_sp < chunk->stack_size()) {\n+  if (!chunk->is_empty()) {\n@@ -587,1 +580,0 @@\n-  DEBUG_ONLY(_orig_chunk_sp = chunk->sp_address();)\n@@ -592,1 +584,1 @@\n-  if (chunk->sp() < chunk->stack_size()) { \/\/ we are copying into a non-empty chunk\n+  if (!chunk->is_empty()) { \/\/ we are copying into a non-empty chunk\n@@ -594,2 +586,9 @@\n-    assert(chunk->sp() < (chunk->stack_size() - chunk->argsize()), \"\");\n-    assert(*(address*)(chunk->sp_address() - frame::sender_sp_ret_address_offset()) == chunk->pc(), \"\");\n+    DEBUG_ONLY(_orig_chunk_sp = chunk->sp_address();)\n+#ifdef ASSERT\n+    {\n+      intptr_t* retaddr_slot = (chunk->sp_address()\n+                                - frame::sender_sp_ret_address_offset());\n+      assert(ContinuationHelper::return_address_at(retaddr_slot) == chunk->pc(),\n+             \"unexpected saved return address\");\n+    }\n+#endif\n@@ -609,2 +608,9 @@\n-    assert(*(address*)(bottom_sp-frame::sender_sp_ret_address_offset()) == StubRoutines::cont_returnBarrier(),\n-           \"should be the continuation return barrier\");\n+#ifdef ASSERT\n+    {\n+      intptr_t* retaddr_slot = (bottom_sp\n+                                - frame::sender_sp_ret_address_offset());\n+      assert(ContinuationHelper::return_address_at(retaddr_slot)\n+             == StubRoutines::cont_returnBarrier(),\n+             \"should be the continuation return barrier\");\n+    }\n+#endif\n@@ -618,2 +624,1 @@\n-    DEBUG_ONLY(_empty = true;)\n-    const int chunk_start_sp = chunk->sp();\n+    const int chunk_start_sp = chunk->stack_size();\n@@ -621,1 +626,2 @@\n-    assert(chunk_start_sp == chunk->stack_size(), \"\");\n+    DEBUG_ONLY(_empty = true;)\n+    DEBUG_ONLY(_orig_chunk_sp = chunk->start_address() + chunk_start_sp;)\n@@ -624,1 +630,2 @@\n-    chunk->set_argsize(_cont.argsize());\n+    chunk->set_bottom(chunk_start_sp - _cont.argsize() - frame::metadata_words_at_top);\n+    chunk->set_sp(chunk->bottom());\n@@ -642,1 +649,0 @@\n-  chunk->set_argsize(_cont.argsize());\n@@ -678,1 +684,8 @@\n-  assert(_empty || *(address*)(_orig_chunk_sp - frame::sender_sp_ret_address_offset()) == chunk->pc(), \"\");\n+#ifdef ASSERT\n+  if (!_empty) {\n+    intptr_t* retaddr_slot = (_orig_chunk_sp\n+                              - frame::sender_sp_ret_address_offset());\n+    assert(ContinuationHelper::return_address_at(retaddr_slot) == chunk->pc(),\n+           \"unexpected saved return address\");\n+  }\n+#endif\n@@ -687,4 +700,15 @@\n-  \/\/ patch return pc of the bottom-most frozen frame (now in the chunk) with the actual caller's return address\n-  intptr_t* chunk_bottom_sp = chunk_top + cont_size() - _cont.argsize() - frame::metadata_words_at_top;\n-  assert(_empty || *(address*)(chunk_bottom_sp-frame::sender_sp_ret_address_offset()) == StubRoutines::cont_returnBarrier(), \"\");\n-  *(address*)(chunk_bottom_sp - frame::sender_sp_ret_address_offset()) = chunk->pc();\n+  \/\/ patch return pc of the bottom-most frozen frame (now in the chunk)\n+  \/\/ with the actual caller's return address\n+  intptr_t* chunk_bottom_retaddr_slot = (chunk_top + cont_size()\n+                                         - _cont.argsize()\n+                                         - frame::metadata_words_at_top\n+                                         - frame::sender_sp_ret_address_offset());\n+#ifdef ASSERT\n+  if (!_empty) {\n+    assert(ContinuationHelper::return_address_at(chunk_bottom_retaddr_slot)\n+           == StubRoutines::cont_returnBarrier(),\n+           \"should be the continuation return barrier\");\n+  }\n+#endif\n+  ContinuationHelper::patch_return_address_at(chunk_bottom_retaddr_slot,\n+                                              chunk->pc());\n@@ -695,1 +719,2 @@\n-  chunk->set_pc(*(address*)(_cont_stack_top - frame::sender_sp_ret_address_offset()));\n+  chunk->set_pc(ContinuationHelper::return_address_at(\n+                  _cont_stack_top - frame::sender_sp_ret_address_offset()));\n@@ -900,1 +925,0 @@\n-    unextended_sp = chunk->sp();\n@@ -908,0 +932,2 @@\n+    } else {\n+      unextended_sp = chunk->stack_size() - frame::metadata_words_at_top;\n@@ -945,1 +971,1 @@\n-    chunk = allocate_chunk_slow(_freeze_size);\n+    chunk = allocate_chunk_slow(_freeze_size, argsize_md);\n@@ -952,5 +978,1 @@\n-\n-    int sp = chunk->stack_size() - argsize_md;\n-    chunk->set_sp(sp);\n-    chunk->set_argsize(argsize);\n-    assert(is_empty(chunk), \"\");\n+    assert(chunk->is_empty(), \"\");\n@@ -963,1 +985,1 @@\n-      chunk->set_argsize(argsize);\n+      chunk->set_bottom(sp);\n@@ -973,1 +995,1 @@\n-  assert(!_barriers || is_empty(chunk), \"\");\n+  assert(!_barriers || chunk->is_empty(), \"\");\n@@ -975,2 +997,2 @@\n-  assert(!is_empty(chunk) || StackChunkFrameStream<ChunkFrames::Mixed>(chunk).is_done(), \"\");\n-  assert(!is_empty(chunk) || StackChunkFrameStream<ChunkFrames::Mixed>(chunk).to_frame().is_empty(), \"\");\n+  assert(!chunk->is_empty() || StackChunkFrameStream<ChunkFrames::Mixed>(chunk).is_done(), \"\");\n+  assert(!chunk->is_empty() || StackChunkFrameStream<ChunkFrames::Mixed>(chunk).to_frame().is_empty(), \"\");\n@@ -1022,1 +1044,1 @@\n-    assert((last_pc == nullptr) == is_empty(_cont.tail()), \"\");\n+    assert((last_pc == nullptr) == _cont.tail()->is_empty(), \"\");\n@@ -1211,1 +1233,0 @@\n-  assert(chunk->to_offset(top.sp()) <= chunk->sp(), \"\");\n@@ -1276,0 +1297,1 @@\n+  int                                          _argsize_md;\n@@ -1291,0 +1313,2 @@\n+    int bottom = (int)_stack_size - _argsize_md;\n+\n@@ -1292,1 +1316,2 @@\n-    jdk_internal_vm_StackChunk::set_sp(mem, (int)_stack_size);\n+    jdk_internal_vm_StackChunk::set_bottom(mem, bottom);\n+    jdk_internal_vm_StackChunk::set_sp(mem, bottom);\n@@ -1316,0 +1341,1 @@\n+                      int argsize_md,\n@@ -1320,0 +1346,1 @@\n+      _argsize_md(argsize_md),\n@@ -1353,1 +1380,1 @@\n-stackChunkOop Freeze<ConfigT>::allocate_chunk(size_t stack_size) {\n+stackChunkOop Freeze<ConfigT>::allocate_chunk(size_t stack_size, int argsize_md) {\n@@ -1375,1 +1402,1 @@\n-  StackChunkAllocator allocator(klass, size_in_words, current, stack_size, _cont, _jvmti_event_collector);\n+  StackChunkAllocator allocator(klass, size_in_words, current, stack_size, argsize_md, _cont, _jvmti_event_collector);\n@@ -1385,1 +1412,1 @@\n-  assert(chunk->sp() == chunk->stack_size(), \"\");\n+  assert(chunk->sp() == chunk->bottom(), \"\");\n@@ -1389,1 +1416,1 @@\n-  assert(chunk->argsize() == 0, \"\");\n+  assert(chunk->is_empty(), \"\");\n@@ -1822,2 +1849,1 @@\n-  chunk->set_sp(chunk->stack_size());\n-  chunk->set_argsize(0);\n+  chunk->set_sp(chunk->bottom());\n@@ -1827,1 +1853,1 @@\n- int ThawBase::remove_top_compiled_frame_from_chunk(stackChunkOop chunk, int &argsize) {\n+int ThawBase::remove_top_compiled_frame_from_chunk(stackChunkOop chunk, int &argsize) {\n@@ -1848,1 +1874,9 @@\n-    assert(f.pc() == *(address*)(chunk_sp + frame_size - frame::sender_sp_ret_address_offset()), \"unexpected pc\");\n+#ifdef ASSERT\n+    {\n+      intptr_t* retaddr_slot = (chunk_sp\n+                                + frame_size\n+                                - frame::sender_sp_ret_address_offset());\n+      assert(f.pc() == ContinuationHelper::return_address_at(retaddr_slot),\n+             \"unexpected pc\");\n+    }\n+#endif\n@@ -1868,1 +1902,3 @@\n-  *(address*)(sp - frame::sender_sp_ret_address_offset()) = pc;\n+  ContinuationHelper::patch_return_address_at(\n+    sp - frame::sender_sp_ret_address_offset(),\n+    pc);\n@@ -2064,2 +2100,1 @@\n-    chunk->set_argsize(0);\n-    chunk->set_sp(chunk->stack_size());\n+    chunk->set_sp(chunk->bottom());\n@@ -2268,1 +2303,1 @@\n-    int stack_args_slots = f.cb()->as_compiled_method()->method()->num_stack_arg_slots(false \/* rounded *\/);\n+    int stack_args_slots = f.cb()->as_nmethod()->num_stack_arg_slots(false \/* rounded *\/);\n@@ -2337,1 +2372,0 @@\n-    assert(chunk->argsize() == 0, \"\");\n@@ -2419,1 +2453,0 @@\n-  address pc0 = *(address*)(sp - frame::sender_sp_ret_address_offset());\n","filename":"src\/hotspot\/share\/runtime\/continuationFreezeThaw.cpp","additions":92,"deletions":59,"binary":false,"changes":151,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -47,0 +47,3 @@\n+  static inline address return_address_at(intptr_t* sp);\n+  static inline void patch_return_address_at(intptr_t* sp, address pc);\n+\n@@ -71,1 +74,1 @@\n-  static address return_pc(const frame& f) { return *return_pc_address(f); }\n+  static address return_pc(const frame& f);\n","filename":"src\/hotspot\/share\/runtime\/continuationHelper.hpp","additions":5,"deletions":2,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -40,0 +40,11 @@\n+#ifndef CPU_OVERRIDES_RETURN_ADDRESS_ACCESSORS\n+inline address ContinuationHelper::return_address_at(intptr_t* sp) {\n+  return *(address*)sp;\n+}\n+\n+inline void ContinuationHelper::patch_return_address_at(intptr_t* sp,\n+                                                        address pc) {\n+  *(address*)sp = pc;\n+}\n+#endif \/\/ !CPU_OVERRIDES_RETURN_ADDRESS_ACCESSORS\n+\n@@ -52,0 +63,4 @@\n+inline address ContinuationHelper::Frame::return_pc(const frame& f) {\n+  return return_address_at((intptr_t *)return_pc_address(f));\n+}\n+\n@@ -78,1 +93,1 @@\n-  return *return_pc_address(f);\n+  return return_address_at((intptr_t *)return_pc_address(f));\n@@ -82,1 +97,1 @@\n-  return InterpretedFrame::frame_bottom(f) - InterpretedFrame::frame_top(f);\n+  return pointer_delta_as_int(InterpretedFrame::frame_bottom(f), InterpretedFrame::frame_top(f));\n","filename":"src\/hotspot\/share\/runtime\/continuationHelper.inline.hpp","additions":18,"deletions":3,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -87,1 +87,1 @@\n-int jdk_internal_vm_StackChunk::_argsize_offset;\n+int jdk_internal_vm_StackChunk::_bottom_offset;\n@@ -96,1 +96,1 @@\n-  macro(_argsize_offset, k, vmSymbols::argsize_name(), int_signature,        false);\n+  macro(_bottom_offset,  k, vmSymbols::bottom_name(),  int_signature,        false);\n","filename":"src\/hotspot\/share\/runtime\/continuationJavaClasses.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -86,1 +86,1 @@\n-  static int _argsize_offset;\n+  static int _bottom_offset;\n@@ -115,2 +115,3 @@\n-  static inline int argsize(oop chunk);\n-  static inline void set_argsize(oop chunk, int value);\n+  static inline int bottom(oop chunk);\n+  static inline void set_bottom(oop chunk, int value);\n+  static inline void set_bottom(HeapWord* chunk, int value);\n","filename":"src\/hotspot\/share\/runtime\/continuationJavaClasses.hpp","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -118,0 +118,7 @@\n+inline void jdk_internal_vm_StackChunk::set_bottom(HeapWord* chunk, int value) {\n+  \/\/ Used by StackChunkAllocator before the Object has been finished,\n+  \/\/ so don't cast too oop and use int_field_put in this function.\n+  assert(_bottom_offset != 0, \"must be set\");\n+  *(int*)(((char*)chunk) + _bottom_offset) = (int)value;\n+}\n+\n@@ -119,1 +126,1 @@\n-  return chunk->int_field(_sp_offset);\n+  return chunk->int_field_relaxed(_sp_offset);\n@@ -123,1 +130,1 @@\n-  chunk->int_field_put(_sp_offset, value);\n+  chunk->int_field_put_relaxed(_sp_offset, value);\n@@ -141,2 +148,2 @@\n-inline int jdk_internal_vm_StackChunk::argsize(oop chunk) {\n-  return chunk->int_field(_argsize_offset);\n+inline int jdk_internal_vm_StackChunk::bottom(oop chunk) {\n+  return chunk->int_field(_bottom_offset);\n@@ -145,2 +152,2 @@\n-inline void jdk_internal_vm_StackChunk::set_argsize(oop chunk, int value) {\n-  chunk->int_field_put(_argsize_offset, value);\n+inline void jdk_internal_vm_StackChunk::set_bottom(oop chunk, int value) {\n+  chunk->int_field_put(_bottom_offset, value);\n","filename":"src\/hotspot\/share\/runtime\/continuationJavaClasses.inline.hpp","additions":13,"deletions":6,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -393,1 +393,2 @@\n-  for (int i = 0; i < chunk->length(); i++) {\n+  \/\/ Start locking from outermost\/oldest frame\n+  for (int i = (chunk->length() - 1); i >= 0; i--) {\n@@ -536,1 +537,1 @@\n-    bool unused;\n+    bool unused = false;\n@@ -1739,1 +1740,2 @@\n-      for (int j = 0; j < monitors->number_of_monitors(); j++) {\n+      \/\/ Unlock in reverse order starting from most nested monitor.\n+      for (int j = (monitors->number_of_monitors() - 1); j >= 0; j--) {\n@@ -1745,1 +1747,1 @@\n-      array->element(i)->free_monitors(thread);\n+      array->element(i)->free_monitors();\n","filename":"src\/hotspot\/share\/runtime\/deoptimization.cpp","additions":6,"deletions":4,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -955,0 +955,1 @@\n+  ResourceMark rm(thread);\n@@ -1024,1 +1025,1 @@\n-      assert(loc != nullptr, \"missing register map entry reg: \" INTPTR_FORMAT \" %s loc: \" INTPTR_FORMAT, reg->value(), reg->name(), p2i(loc));\n+      assert(loc != nullptr, \"missing register map entry reg: %d %s loc: \" INTPTR_FORMAT, reg->value(), reg->name(), p2i(loc));\n@@ -1442,1 +1443,1 @@\n-      assert(stack_arg_slots ==  m->num_stack_arg_slots(false \/* rounded *\/), \"\");\n+      assert(stack_arg_slots ==  cm->as_nmethod()->num_stack_arg_slots(false \/* rounded *\/) || cm->is_osr_method(), \"\");\n@@ -1453,1 +1454,1 @@\n-          assert(((int)fst->reg2stack()) >= 0, \"reg2stack: \" INTPTR_FORMAT, fst->reg2stack());\n+          assert(((int)fst->reg2stack()) >= 0, \"reg2stack: %d\", fst->reg2stack());\n","filename":"src\/hotspot\/share\/runtime\/frame.cpp","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -520,1 +520,1 @@\n-    return a->location - b->location;\n+    return checked_cast<int>(a->location - b->location);\n","filename":"src\/hotspot\/share\/runtime\/frame.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -486,0 +486,3 @@\n+  develop(bool, ZapTLAB, trueInDebug,                                       \\\n+          \"Zap allocated TLABs\")                                            \\\n+                                                                            \\\n","filename":"src\/hotspot\/share\/runtime\/globals.hpp","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -423,2 +423,0 @@\n-  _monitor_chunks(nullptr),\n-\n@@ -746,0 +744,1 @@\n+  assert(java_lang_Thread::thread(threadObj()) == thread, \"must be alive\");\n@@ -999,7 +998,1 @@\n-  if (Thread::is_lock_owned(adr)) return true;\n-\n-  for (MonitorChunk* chunk = monitor_chunks(); chunk != nullptr; chunk = chunk->next()) {\n-    if (chunk->contains(adr)) return true;\n-  }\n-\n-  return false;\n+  return is_in_full_stack(adr);\n@@ -1016,16 +1009,0 @@\n-void JavaThread::add_monitor_chunk(MonitorChunk* chunk) {\n-  chunk->set_next(monitor_chunks());\n-  set_monitor_chunks(chunk);\n-}\n-\n-void JavaThread::remove_monitor_chunk(MonitorChunk* chunk) {\n-  guarantee(monitor_chunks() != nullptr, \"must be non empty\");\n-  if (monitor_chunks() == chunk) {\n-    set_monitor_chunks(chunk->next());\n-  } else {\n-    MonitorChunk* prev = monitor_chunks();\n-    while (prev->next() != chunk) prev = prev->next();\n-    prev->set_next(chunk->next());\n-  }\n-}\n-\n@@ -1356,7 +1333,0 @@\n-  if (has_last_Java_frame()) {\n-    \/\/ Traverse the monitor chunks\n-    for (MonitorChunk* chunk = monitor_chunks(); chunk != nullptr; chunk = chunk->next()) {\n-      chunk->oops_do(f);\n-    }\n-  }\n-\n@@ -2150,0 +2120,2 @@\n+\n+  assert(java_lang_Thread::thread(thread_oop()) == nullptr, \"must not be alive\");\n","filename":"src\/hotspot\/share\/runtime\/javaThread.cpp","additions":4,"deletions":32,"binary":false,"changes":36,"status":"modified"},{"patch":"@@ -197,4 +197,0 @@\n-  MonitorChunk* _monitor_chunks;              \/\/ Contains the off stack monitors\n-                                              \/\/ allocated during deoptimization\n-                                              \/\/ and by JNI_MonitorEnter\/Exit\n-\n@@ -666,1 +662,1 @@\n-  \/\/ Fast-locking support\n+  \/\/ Stack-locking support (not for LM_LIGHTWEIGHT)\n@@ -865,3 +861,0 @@\n- private:\n-  void set_monitor_chunks(MonitorChunk* monitor_chunks) { _monitor_chunks = monitor_chunks; }\n-\n@@ -869,3 +862,0 @@\n-  MonitorChunk* monitor_chunks() const           { return _monitor_chunks; }\n-  void add_monitor_chunk(MonitorChunk* chunk);\n-  void remove_monitor_chunk(MonitorChunk* chunk);\n","filename":"src\/hotspot\/share\/runtime\/javaThread.hpp","additions":1,"deletions":11,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -86,1 +86,1 @@\n-  assert(!Universe::heap()->is_gc_active(), \"can't extend the root set during GC\");\n+  assert(!Universe::heap()->is_stw_gc_active(), \"can't extend the root set during GC pause\");\n@@ -108,1 +108,1 @@\n-  assert(!Universe::heap()->is_gc_active(), \"can't extend the root set during GC\");\n+  assert(!Universe::heap()->is_stw_gc_active(), \"can't extend the root set during GC pause\");\n","filename":"src\/hotspot\/share\/runtime\/jniHandles.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,1 +33,0 @@\n-  _next               = nullptr;\n","filename":"src\/hotspot\/share\/runtime\/monitorChunk.cpp","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -41,1 +41,0 @@\n-  MonitorChunk*    _next;\n@@ -47,4 +46,0 @@\n-  \/\/ link operations\n-  MonitorChunk* next() const                { return _next; }\n-  void set_next(MonitorChunk* next)         { _next = next; }\n-\n@@ -57,1 +52,0 @@\n-\n","filename":"src\/hotspot\/share\/runtime\/monitorChunk.hpp","additions":1,"deletions":7,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -104,1 +104,0 @@\n-Mutex*   OopMapCacheAlloc_lock        = nullptr;\n@@ -359,1 +358,0 @@\n-  MUTEX_DEFL(OopMapCacheAlloc_lock          , PaddedMutex  ,  Threads_lock, true);\n","filename":"src\/hotspot\/share\/runtime\/mutexLocker.cpp","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -100,1 +100,0 @@\n-extern Mutex*   OopMapCacheAlloc_lock;           \/\/ protects allocation of oop_map caches\n","filename":"src\/hotspot\/share\/runtime\/mutexLocker.hpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -932,7 +932,57 @@\n-ATTRIBUTE_NO_ASAN static void print_hex_readable_pointer(outputStream* st, address p,\n-                                                         int unitsize) {\n-  switch (unitsize) {\n-    case 1: st->print(\"%02x\", *(u1*)p); break;\n-    case 2: st->print(\"%04x\", *(u2*)p); break;\n-    case 4: st->print(\"%08x\", *(u4*)p); break;\n-    case 8: st->print(\"%016\" FORMAT64_MODIFIER \"x\", *(u8*)p); break;\n+ATTRIBUTE_NO_ASAN static bool read_safely_from(intptr_t* p, intptr_t* result) {\n+  const intptr_t errval = 0x1717;\n+  intptr_t i = SafeFetchN(p, errval);\n+  if (i == errval) {\n+    i = SafeFetchN(p, ~errval);\n+    if (i == ~errval) {\n+      return false;\n+    }\n+  }\n+  (*result) = i;\n+  return true;\n+}\n+\n+static void print_hex_location(outputStream* st, address p, int unitsize) {\n+  assert(is_aligned(p, unitsize), \"Unaligned\");\n+  address pa = align_down(p, sizeof(intptr_t));\n+#ifndef _LP64\n+  \/\/ Special handling for printing qwords on 32-bit platforms\n+  if (unitsize == 8) {\n+    intptr_t i1, i2;\n+    if (read_safely_from((intptr_t*)pa, &i1) &&\n+        read_safely_from((intptr_t*)pa + 1, &i2)) {\n+      const uint64_t value =\n+        LITTLE_ENDIAN_ONLY((((uint64_t)i2) << 32) | i1)\n+        BIG_ENDIAN_ONLY((((uint64_t)i1) << 32) | i2);\n+      st->print(\"%016\" FORMAT64_MODIFIER \"x\", value);\n+    } else {\n+      st->print_raw(\"????????????????\");\n+    }\n+    return;\n+  }\n+#endif \/\/ 32-bit, qwords\n+  intptr_t i = 0;\n+  if (read_safely_from((intptr_t*)pa, &i)) {\n+    \/\/ bytes:   CA FE BA BE DE AD C0 DE\n+    \/\/ bytoff:   0  1  2  3  4  5  6  7\n+    \/\/ LE bits:  0  8 16 24 32 40 48 56\n+    \/\/ BE bits: 56 48 40 32 24 16  8  0\n+    const int offset = (int)(p - (address)pa);\n+    const int bitoffset =\n+      LITTLE_ENDIAN_ONLY(offset * BitsPerByte)\n+      BIG_ENDIAN_ONLY((int)((sizeof(intptr_t) - unitsize - offset) * BitsPerByte));\n+    const int bitfieldsize = unitsize * BitsPerByte;\n+    intptr_t value = bitfield(i, bitoffset, bitfieldsize);\n+    switch (unitsize) {\n+      case 1: st->print(\"%02x\", (u1)value); break;\n+      case 2: st->print(\"%04x\", (u2)value); break;\n+      case 4: st->print(\"%08x\", (u4)value); break;\n+      case 8: st->print(\"%016\" FORMAT64_MODIFIER \"x\", (u8)value); break;\n+    }\n+  } else {\n+    switch (unitsize) {\n+      case 1: st->print_raw(\"??\"); break;\n+      case 2: st->print_raw(\"????\"); break;\n+      case 4: st->print_raw(\"????????\"); break;\n+      case 8: st->print_raw(\"????????????????\"); break;\n+    }\n@@ -959,5 +1009,1 @@\n-    if (is_readable_pointer(p)) {\n-      print_hex_readable_pointer(st, p, unitsize);\n-    } else {\n-      st->print(\"%*.*s\", 2*unitsize, 2*unitsize, \"????????????????\");\n-    }\n+    print_hex_location(st, p, unitsize);\n@@ -1873,1 +1919,1 @@\n-    char* cur = static_cast<char*>(align_down(start, page_size));\n+    void* first = align_down(start, page_size);\n@@ -1875,6 +1921,10 @@\n-    assert(cur <= last, \"invariant\");\n-    \/\/ Iterate from first page through last (inclusive), being careful to\n-    \/\/ avoid overflow if the last page abuts the end of the address range.\n-    for ( ; true; cur += page_size) {\n-      Atomic::add(reinterpret_cast<int*>(cur), 0, memory_order_relaxed);\n-      if (cur >= last) break;\n+    assert(first <= last, \"invariant\");\n+    const size_t pd_page_size = pd_pretouch_memory(first, last, page_size);\n+    if (pd_page_size > 0) {\n+      \/\/ Iterate from first page through last (inclusive), being careful to\n+      \/\/ avoid overflow if the last page abuts the end of the address range.\n+      last = align_down(static_cast<char*>(end) - 1, pd_page_size);\n+      for (char* cur = static_cast<char*>(first); \/* break *\/; cur += pd_page_size) {\n+        Atomic::add(reinterpret_cast<int*>(cur), 0, memory_order_relaxed);\n+        if (cur >= last) break;\n+      }\n","filename":"src\/hotspot\/share\/runtime\/os.cpp","additions":69,"deletions":19,"binary":false,"changes":88,"status":"modified"},{"patch":"@@ -222,0 +222,4 @@\n+  \/\/ Returns 0 if pretouch is done via platform dependent method, or otherwise\n+  \/\/ returns page_size that should be used for the common method.\n+  static size_t pd_pretouch_memory(void* first, void* last, size_t page_size);\n+\n","filename":"src\/hotspot\/share\/runtime\/os.hpp","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1440,1 +1440,1 @@\n-           callee_method->method_holder()->is_init_thread(current),\n+           callee_method->method_holder()->is_reentrant_initialization(current),\n@@ -1999,1 +1999,1 @@\n-    assert(a->value() == b->value(), \"register allocation mismatch: a=\" INTX_FORMAT \", b=\" INTX_FORMAT, a->value(), b->value());\n+    assert(a->value() == b->value(), \"register allocation mismatch: a= %d, b= %d\", a->value(), b->value());\n","filename":"src\/hotspot\/share\/runtime\/sharedRuntime.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -191,3 +191,3 @@\n-  assert(cb()->is_compiled(), \"\");\n-  assert(cb()->as_compiled_method()->method() != nullptr, \"\");\n-  return (cb()->as_compiled_method()->method()->num_stack_arg_slots() * VMRegImpl::stack_slot_size) >> LogBytesPerWord;\n+  assert(cb()->is_nmethod(), \"\");\n+  assert(cb()->as_nmethod()->method() != nullptr, \"\");\n+  return (cb()->as_nmethod()->num_stack_arg_slots() * VMRegImpl::stack_slot_size) >> LogBytesPerWord;\n","filename":"src\/hotspot\/share\/runtime\/stackChunkFrameStream.inline.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -93,1 +93,1 @@\n-  int         size_in_bytes() const              { return _end - _begin; }\n+  int         size_in_bytes() const              { return pointer_delta_as_int(_end, _begin); }\n","filename":"src\/hotspot\/share\/runtime\/stubCodeGenerator.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -515,2 +515,2 @@\n-        if (mark.is_neutral()) {\n-          assert(!lock_stack.contains(obj()), \"thread must not already hold the lock\");\n+        while (mark.is_neutral()) {\n+          \/\/ Retry until a lock state change has been observed.  cas_set_mark() may collide with non lock bits modifications.\n@@ -518,2 +518,3 @@\n-          markWord locked_mark = mark.set_fast_locked();\n-          markWord old_mark = obj()->cas_set_mark(locked_mark, mark);\n+          assert(!lock_stack.contains(obj()), \"thread must not already hold the lock\");\n+          const markWord locked_mark = mark.set_fast_locked();\n+          const markWord old_mark = obj()->cas_set_mark(locked_mark, mark);\n@@ -525,0 +526,1 @@\n+          mark = old_mark;\n@@ -574,13 +576,7 @@\n-      if (mark.is_fast_locked()) {\n-        markWord unlocked_mark = mark.set_unlocked();\n-        markWord old_mark = object->cas_set_mark(unlocked_mark, mark);\n-        if (old_mark != mark) {\n-          \/\/ Another thread won the CAS, it must have inflated the monitor.\n-          \/\/ It can only have installed an anonymously locked monitor at this point.\n-          \/\/ Fetch that monitor, set owner correctly to this thread, and\n-          \/\/ exit it (allowing waiting threads to enter).\n-          assert(old_mark.has_monitor(), \"must have monitor\");\n-          ObjectMonitor* monitor = old_mark.monitor();\n-          assert(monitor->is_owner_anonymous(), \"must be anonymous owner\");\n-          monitor->set_owner_from_anonymous(current);\n-          monitor->exit(current);\n+      while (mark.is_fast_locked()) {\n+        \/\/ Retry until a lock state change has been observed.  cas_set_mark() may collide with non lock bits modifications.\n+        const markWord unlocked_mark = mark.set_unlocked();\n+        const markWord old_mark = object->cas_set_mark(unlocked_mark, mark);\n+        if (old_mark == mark) {\n+          current->lock_stack().remove(object);\n+          return;\n@@ -588,3 +584,1 @@\n-        LockStack& lock_stack = current->lock_stack();\n-        lock_stack.remove(object);\n-        return;\n+        mark = old_mark;\n@@ -733,0 +727,10 @@\n+void ObjectSynchronizer::waitUninterruptibly(Handle obj, jlong millis, TRAPS) {\n+  if (millis < 0) {\n+    THROW_MSG(vmSymbols::java_lang_IllegalArgumentException(), \"timeout value is negative\");\n+  }\n+  ObjectSynchronizer::inflate(THREAD,\n+                              obj(),\n+                              inflate_cause_wait)->wait(millis, false, THREAD);\n+}\n+\n+\n@@ -910,7 +914,0 @@\n-\/\/ Can be called from non JavaThreads (e.g., VMThread) for FastHashCode\n-\/\/ calculations as part of JVM\/TI tagging.\n-static bool is_lock_owned(Thread* thread, oop obj) {\n-  assert(LockingMode == LM_LIGHTWEIGHT, \"only call this with new lightweight locking enabled\");\n-  return thread->is_Java_thread() ? JavaThread::cast(thread)->lock_stack().contains(obj) : false;\n-}\n-\n@@ -928,1 +925,1 @@\n-    if (mark.is_neutral()) {               \/\/ if this is a normal header\n+    if (mark.is_neutral() || (LockingMode == LM_LIGHTWEIGHT && mark.is_fast_locked())) {\n@@ -940,0 +937,4 @@\n+      if (LockingMode == LM_LIGHTWEIGHT) {\n+        \/\/ CAS failed, retry\n+        continue;\n+      }\n@@ -971,8 +972,3 @@\n-    } else if (LockingMode == LM_LIGHTWEIGHT && mark.is_fast_locked() && is_lock_owned(current, obj)) {\n-      \/\/ This is a fast-lock owned by the calling thread so use the\n-      \/\/ markWord from the object.\n-      hash = mark.hash();\n-      if (hash != 0) {                  \/\/ if it has a hash, just return it\n-        return hash;\n-      }\n-    } else if (LockingMode == LM_LEGACY && mark.has_locker() && current->is_lock_owned((address)mark.locker())) {\n+    } else if (LockingMode == LM_LEGACY && mark.has_locker()\n+               && current->is_Java_thread()\n+               && JavaThread::cast(current)->is_lock_owned((address)mark.locker())) {\n@@ -1307,0 +1303,7 @@\n+\/\/ Can be called from non JavaThreads (e.g., VMThread) for FastHashCode\n+\/\/ calculations as part of JVM\/TI tagging.\n+static bool is_lock_owned(Thread* thread, oop obj) {\n+  assert(LockingMode == LM_LIGHTWEIGHT, \"only call this with new lightweight locking enabled\");\n+  return thread->is_Java_thread() ? JavaThread::cast(thread)->lock_stack().contains(obj) : false;\n+}\n+\n","filename":"src\/hotspot\/share\/runtime\/synchronizer.cpp","additions":39,"deletions":36,"binary":false,"changes":75,"status":"modified"},{"patch":"@@ -109,0 +109,5 @@\n+  \/\/ Special internal-use-only method for use by JVM infrastructure\n+  \/\/ that needs to wait() on a java-level object but that can't risk\n+  \/\/ throwing unexpected InterruptedExecutionExceptions.\n+  static void waitUninterruptibly(Handle obj, jlong Millis, TRAPS);\n+\n@@ -210,0 +215,1 @@\n+  void wait_uninterruptibly(TRAPS)  { ObjectSynchronizer::waitUninterruptibly(_obj, 0, CHECK); } \/\/ wait forever\n","filename":"src\/hotspot\/share\/runtime\/synchronizer.hpp","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -106,1 +106,4 @@\n-  _hashStateX = os::random();\n+  \/\/ If we are dumping, keep ihashes constant. Note that during dumping we only\n+  \/\/ ever run one java thread, and no other thread should generate ihashes either,\n+  \/\/ so using a constant seed should work fine.\n+  _hashStateX = DumpSharedSpaces ? 0x12345678 : os::random();\n@@ -525,10 +528,0 @@\n-\/\/ We had to move these methods here, because vm threads get into ObjectSynchronizer::enter\n-\/\/ However, there is a note in JavaThread::is_lock_owned() about the VM threads not being\n-\/\/ used for compilation in the future. If that change is made, the need for these methods\n-\/\/ should be revisited, and they should be removed if possible.\n-\n-bool Thread::is_lock_owned(address adr) const {\n-  assert(LockingMode != LM_LIGHTWEIGHT, \"should not be called with new lightweight locking\");\n-  return is_in_full_stack(adr);\n-}\n-\n","filename":"src\/hotspot\/share\/runtime\/thread.cpp","additions":4,"deletions":11,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -478,3 +478,0 @@\n-  \/\/ Used by fast lock support\n-  virtual bool is_lock_owned(address adr) const;\n-\n@@ -652,0 +649,1 @@\n+  bool _saved_in_asgct;\n@@ -655,1 +653,2 @@\n-    assert(!thread->in_asgct(), \"invariant\");\n+    \/\/ Allow AsyncGetCallTrace to be reentrant - save the previous state.\n+    _saved_in_asgct = thread->in_asgct();\n@@ -660,1 +659,1 @@\n-    _thread->set_in_asgct(false);\n+    _thread->set_in_asgct(_saved_in_asgct);\n","filename":"src\/hotspot\/share\/runtime\/thread.hpp","additions":4,"deletions":5,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -208,2 +208,3 @@\n-    else if (thread()->osthread()->get_state() == CONDVAR_WAIT) {\n-      \/\/ We are waiting on the native class initialization monitor.\n+    else if (thread()->osthread()->get_state() == OBJECT_WAIT) {\n+      \/\/ We are waiting on an Object monitor but Object.wait() isn't the\n+      \/\/ top-frame, so we should be waiting on a Class initialization monitor.\n","filename":"src\/hotspot\/share\/runtime\/vframe.cpp","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -40,0 +40,1 @@\n+#include \"runtime\/synchronizer.hpp\"\n@@ -51,1 +52,1 @@\n-void vframeArrayElement::free_monitors(JavaThread* jt) {\n+void vframeArrayElement::free_monitors() {\n@@ -55,1 +56,0 @@\n-     jt->remove_monitor_chunk(chunk);\n@@ -75,1 +75,1 @@\n-    Thread* current_thread = Thread::current();\n+    JavaThread* current_thread = JavaThread::current();\n@@ -88,1 +88,0 @@\n-      vf->thread()->add_monitor_chunk(_monitors);\n@@ -98,1 +97,2 @@\n-          assert(monitor->owner() == nullptr || !monitor->owner()->is_unlocked(), \"object must be null or locked\");\n+          assert(monitor->owner() != nullptr, \"monitor owner must not be null\");\n+          assert(!monitor->owner()->is_unlocked(), \"monitor must be locked\");\n@@ -100,0 +100,3 @@\n+          assert(ObjectSynchronizer::current_thread_holds_lock(current_thread, Handle(current_thread, dest->obj())),\n+                 \"should be held, before move_to\");\n+\n@@ -101,0 +104,3 @@\n+\n+          assert(ObjectSynchronizer::current_thread_holds_lock(current_thread, Handle(current_thread, dest->obj())),\n+                 \"should be held, after move_to\");\n@@ -311,0 +317,2 @@\n+    assert(src->obj() != nullptr || ObjectSynchronizer::current_thread_holds_lock(thread, Handle(thread, src->obj())),\n+           \"should be held, before move_to\");\n@@ -312,0 +320,2 @@\n+    assert(src->obj() != nullptr || ObjectSynchronizer::current_thread_holds_lock(thread, Handle(thread, src->obj())),\n+           \"should be held, after move_to\");\n@@ -652,1 +662,0 @@\n-  JavaThread* jt = JavaThread::current();\n@@ -654,1 +663,1 @@\n-     element(index)->free_monitors(jt);\n+     element(index)->free_monitors();\n","filename":"src\/hotspot\/share\/runtime\/vframeArray.cpp","additions":17,"deletions":8,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -80,1 +80,1 @@\n-  void free_monitors(JavaThread* jt);\n+  void free_monitors();\n","filename":"src\/hotspot\/share\/runtime\/vframeArray.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -242,0 +242,1 @@\n+  nonstatic_field(InstanceKlass,               _is_marked_dependent,                          bool)                                  \\\n@@ -2236,1 +2237,0 @@\n-  declare_constant(InstanceKlass::being_linked)                           \\\n","filename":"src\/hotspot\/share\/runtime\/vmStructs.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -0,0 +1,45 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2024 SAP SE. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\n+ *\/\n+\n+#ifndef SHARE_SANITIZERS_UB_HPP\n+#define SHARE_SANITIZERS_UB_HPP\n+\n+\/\/ ATTRIBUTE_NO_UBSAN\n+\/\/\n+\/\/ Function attribute which informs the compiler to disable UBSan checks in the\n+\/\/ following function or method.\n+\/\/ Useful if the function or method is known to do something special or even 'dangerous', for\n+\/\/ example causing desired signals\/crashes.\n+#ifdef UNDEFINED_BEHAVIOR_SANITIZER\n+#if defined(__clang__) || defined(__GNUC__)\n+#define ATTRIBUTE_NO_UBSAN __attribute__((no_sanitize(\"undefined\")))\n+#endif\n+#endif\n+\n+#ifndef ATTRIBUTE_NO_UBSAN\n+#define ATTRIBUTE_NO_UBSAN\n+#endif\n+\n+#endif \/\/ SHARE_SANITIZERS_UB_HPP\n\\ No newline at end of file\n","filename":"src\/hotspot\/share\/sanitizers\/ub.hpp","additions":45,"deletions":0,"binary":false,"changes":45,"status":"added"},{"patch":"@@ -1249,0 +1249,8 @@\n+  \/\/ Also provide a pointer to the init_lock if present, so there aren't unreferenced int[0]\n+  \/\/ arrays.\n+  oop init_lock = ik->init_lock();\n+  if (init_lock != nullptr) {\n+    field_count++;\n+    size += sizeof(address);\n+  }\n+\n@@ -1286,0 +1294,8 @@\n+\n+  \/\/ Add init lock to the end if the class is not yet initialized\n+  oop init_lock = ik->init_lock();\n+  if (init_lock != nullptr) {\n+    writer->write_symbolID(vmSymbols::init_lock_name());         \/\/ name\n+    writer->write_u1(sig2tag(vmSymbols::int_array_signature())); \/\/ type\n+    writer->write_objectID(init_lock);\n+  }\n","filename":"src\/hotspot\/share\/services\/heapDumper.cpp","additions":16,"deletions":0,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -111,1 +111,1 @@\n-  static uint16_t build_footer(uint8_t b1, uint8_t b2) { return ((uint16_t)b1 << 8) | (uint16_t)b2; }\n+  static uint16_t build_footer(uint8_t b1, uint8_t b2) { return (uint16_t)(((uint16_t)b1 << 8) | (uint16_t)b2); }\n@@ -115,1 +115,1 @@\n-  void set_footer(uint16_t v)       { footer_address()[0] = v >> 8; footer_address()[1] = (uint8_t)v; }\n+  void set_footer(uint16_t v)       { footer_address()[0] = (uint8_t)(v >> 8); footer_address()[1] = (uint8_t)v; }\n","filename":"src\/hotspot\/share\/services\/mallocHeader.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -122,1 +122,1 @@\n-  static uint16_t bucket_idx_from_marker(uint32_t marker) { return marker >> 16; }\n+  static uint16_t bucket_idx_from_marker(uint32_t marker) { return (uint16_t)(marker >> 16); }\n","filename":"src\/hotspot\/share\/services\/mallocSiteTable.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -66,1 +66,1 @@\n-  T result = size & ~T(alignment_mask(alignment));\n+  T result = T(size & ~T(alignment_mask(alignment)));\n@@ -74,1 +74,1 @@\n-  T adjusted = size + alignment_mask(alignment);\n+  T adjusted = checked_cast<T>(size + alignment_mask(alignment));\n","filename":"src\/hotspot\/share\/utilities\/align.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -215,0 +215,1 @@\n+    if (byte_count == 0) return;\n","filename":"src\/hotspot\/share\/utilities\/copy.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -258,1 +258,1 @@\n-      _null_terminator_index = strlen(_path);\n+      _null_terminator_index = checked_cast<uint16_t>(strlen(_path));\n","filename":"src\/hotspot\/share\/utilities\/elfFile.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -47,0 +47,3 @@\n+\/\/ Limit exception message components to 64K (the same max as Symbols)\n+#define MAX_LEN 65535\n+\n@@ -149,1 +152,1 @@\n-  log_info(exceptions)(\"Exception <%s%s%s> (\" PTR_FORMAT \") \\n\"\n+  log_info(exceptions)(\"Exception <%.*s%s%.*s> (\" PTR_FORMAT \") \\n\"\n@@ -151,2 +154,3 @@\n-                       h_exception->print_value_string(),\n-                       message ? \": \" : \"\", message ? message : \"\",\n+                       MAX_LEN, h_exception->print_value_string(),\n+                       message ? \": \" : \"\",\n+                       MAX_LEN, message ? message : \"\",\n@@ -570,4 +574,4 @@\n-    log_info(exceptions)(\"Exception <%s: %s>\\n thrown in %s\",\n-                         exception->print_value_string(),\n-                         detail_message,\n-                         message);\n+    log_info(exceptions)(\"Exception <%.*s: %.*s>\\n thrown in %.*s\",\n+                         MAX_LEN, exception->print_value_string(),\n+                         MAX_LEN, detail_message,\n+                         MAX_LEN, message);\n@@ -575,3 +579,3 @@\n-    log_info(exceptions)(\"Exception <%s>\\n thrown in %s\",\n-                         exception->print_value_string(),\n-                         message);\n+    log_info(exceptions)(\"Exception <%.*s>\\n thrown in %.*s\",\n+                         MAX_LEN, exception->print_value_string(),\n+                         MAX_LEN, message);\n","filename":"src\/hotspot\/share\/utilities\/exceptions.cpp","additions":14,"deletions":10,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -523,1 +523,1 @@\n-T2 checked_cast(T1 thing) {\n+constexpr T2 checked_cast(T1 thing) {\n@@ -529,0 +529,8 @@\n+\/\/ pointer_delta_as_int is called to do pointer subtraction for nearby pointers that\n+\/\/ returns a non-negative int, usually used as a size of a code buffer range.\n+\/\/ This scales to sizeof(T).\n+template <typename T>\n+inline int pointer_delta_as_int(const volatile T* left, const volatile T* right) {\n+  return checked_cast<int>(pointer_delta(left, right, sizeof(T)));\n+}\n+\n@@ -670,1 +678,1 @@\n-  return denominator != 0 ? (double)numerator \/ denominator * 100.0 : 0.0;\n+  return denominator != 0 ? (double)numerator \/ (double)denominator * 100.0 : 0.0;\n","filename":"src\/hotspot\/share\/utilities\/globalDefinitions.hpp","additions":10,"deletions":2,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -281,0 +281,1 @@\n+    if (_data == nullptr) return;\n@@ -285,0 +286,1 @@\n+    if (_data == nullptr) return;\n","filename":"src\/hotspot\/share\/utilities\/growableArray.hpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -123,1 +123,1 @@\n-    return hash;\n+    return (unsigned int)hash;\n","filename":"src\/hotspot\/share\/utilities\/nativeCallStack.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -120,1 +120,1 @@\n-  return round_up_power_of_2(value + 1);\n+  return T(round_up_power_of_2(value + 1));\n","filename":"src\/hotspot\/share\/utilities\/powerOfTwo.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -434,1 +434,1 @@\n-  int result = 0;\n+  size_t result = 0;\n@@ -437,1 +437,5 @@\n-    result += utf8_size(c);\n+    int sz = utf8_size(c);\n+    if (result + sz > INT_MAX-1) {\n+      break;\n+    }\n+    result += sz;\n@@ -439,1 +443,1 @@\n-  return result;\n+  return checked_cast<int>(result);\n","filename":"src\/hotspot\/share\/utilities\/utf8.cpp","additions":7,"deletions":3,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -62,0 +62,1 @@\n+#include \"sanitizers\/ub.hpp\"\n@@ -2061,1 +2062,2 @@\n-\/\/ Crash with an authentic sigfpe\n+\/\/ Crash with an authentic sigfpe; behavior is subtly different from a real signal\n+\/\/ compared to one generated with raise (asynchronous vs synchronous). See JDK-8065895.\n@@ -2063,0 +2065,2 @@\n+\n+ATTRIBUTE_NO_UBSAN\n","filename":"src\/hotspot\/share\/utilities\/vmError.cpp","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1994, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1994, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -162,2 +162,10 @@\n-    public synchronized void writeTo(OutputStream out) throws IOException {\n-        out.write(buf, 0, count);\n+    public void writeTo(OutputStream out) throws IOException {\n+        if (Thread.currentThread().isVirtual()) {\n+            byte[] bytes;\n+            synchronized (this) {\n+                bytes = Arrays.copyOf(buf, count);\n+            }\n+            out.write(bytes);\n+        } else synchronized (this) {\n+            out.write(buf, 0, count);\n+        }\n","filename":"src\/java.base\/share\/classes\/java\/io\/ByteArrayOutputStream.java","additions":11,"deletions":3,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -1715,0 +1715,5 @@\n+        }\n+\n+        \/\/ Setting the interrupt status must be done before reading nioBlocker.\n+        interrupted = true;\n+        interrupt0();  \/\/ inform VM of interrupt\n@@ -1716,1 +1721,2 @@\n-            \/\/ thread may be blocked in an I\/O operation\n+        \/\/ thread may be blocked in an I\/O operation\n+        if (this != Thread.currentThread()) {\n@@ -1720,2 +1726,0 @@\n-                    interrupted = true;\n-                    interrupt0();  \/\/ inform VM of interrupt\n@@ -1723,1 +1727,0 @@\n-                    return;\n@@ -1727,2 +1730,0 @@\n-        interrupted = true;\n-        interrupt0();  \/\/ inform VM of interrupt\n","filename":"src\/java.base\/share\/classes\/java\/lang\/Thread.java","additions":7,"deletions":6,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1996, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1996, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -852,4 +852,7 @@\n-        return (char)src.chars()\n-            .filter(c -> Character.getType(c) != Character.FORMAT)\n-            .findFirst()\n-            .orElse(defChar);\n+        for (int i = 0; i < src.length(); i++) {\n+            char c = src.charAt(i);\n+            if (Character.getType(c) != Character.FORMAT) {\n+                return c;\n+            }\n+        }\n+        return defChar;\n","filename":"src\/java.base\/share\/classes\/java\/text\/DecimalFormatSymbols.java","additions":8,"deletions":5,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -197,0 +197,2 @@\n+                    else if (m != null)\n+                        s.selfLinkItem();\n","filename":"src\/java.base\/share\/classes\/java\/util\/concurrent\/SynchronousQueue.java","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1130,0 +1130,1 @@\n+\n@@ -1132,0 +1133,3 @@\n+                else\n+                    first.nextWaiter = null; \/\/ GC assistance\n+\n@@ -1137,0 +1141,1 @@\n+\n","filename":"src\/java.base\/share\/classes\/java\/util\/concurrent\/locks\/AbstractQueuedLongSynchronizer.java","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -1509,0 +1509,1 @@\n+\n@@ -1511,0 +1512,3 @@\n+                else\n+                    first.nextWaiter = null; \/\/ GC assistance\n+\n@@ -1516,0 +1520,1 @@\n+\n","filename":"src\/java.base\/share\/classes\/java\/util\/concurrent\/locks\/AbstractQueuedSynchronizer.java","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -464,1 +464,1 @@\n-            MODULE_RESOLUTION = new AbstractAttributeMapper<>(NAME_MODULE_RESOLUTION, true, Classfile.JAVA_9_VERSION) {\n+            MODULE_RESOLUTION = new AbstractAttributeMapper<>(NAME_MODULE_RESOLUTION, Classfile.JAVA_9_VERSION) {\n@@ -478,1 +478,1 @@\n-            MODULE_TARGET = new AbstractAttributeMapper<>(NAME_MODULE_TARGET, true, Classfile.JAVA_9_VERSION) {\n+            MODULE_TARGET = new AbstractAttributeMapper<>(NAME_MODULE_TARGET, Classfile.JAVA_9_VERSION) {\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/classfile\/Attributes.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2020, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2020, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -691,4 +691,0 @@\n-        if (dstImpl == srcImpl) {\n-            srcImpl.checkValidState();\n-            return -1;\n-        }\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/foreign\/AbstractMemorySegmentImpl.java","additions":1,"deletions":5,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -34,1 +34,1 @@\n-    private int argsize; \/\/ bottom stack-passed arguments, in words\n+    private int bottom;  \/\/ in words\n@@ -39,1 +39,1 @@\n-    public boolean isEmpty()   { return sp >= (size - argsize); }\n+    public boolean isEmpty()   { return sp == bottom; }\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/vm\/StackChunk.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -173,1 +173,1 @@\n-                printLocale();\n+                printLocale(false);\n@@ -187,1 +187,1 @@\n-                printLocale();\n+                printLocale(true);\n@@ -283,1 +283,1 @@\n-    private static void printLocale() {\n+    private static void printLocale(boolean summaryMode) {\n@@ -285,1 +285,7 @@\n-        ostream.println(LOCALE_SETTINGS);\n+        if (!summaryMode) {\n+            ostream.println(LOCALE_SETTINGS);\n+        } else {\n+            ostream.println(\"Locale settings summary:\");\n+            ostream.println(INDENT + \"Use \\\"-XshowSettings:locale\\\" \" +\n+                    \"option for verbose locale settings options\");\n+        }\n@@ -294,1 +300,3 @@\n-        printLocales();\n+        if (!summaryMode) {\n+            printLocales();\n+        }\n","filename":"src\/java.base\/share\/classes\/sun\/launcher\/LauncherHelper.java","additions":13,"deletions":5,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -762,9 +762,0 @@\n-        \/\/ Now position <= sz so remaining >= 0 and\n-        \/\/ remaining == 0 if and only if sz == 0\n-        long remaining = sz - position;\n-\n-        \/\/ Adjust count only if remaining > 0, i.e.,\n-        \/\/ sz > position which means sz > 0\n-        if (remaining > 0 && remaining < count)\n-            count = remaining;\n-\n@@ -774,2 +765,9 @@\n-            \/\/ Attempt a direct transfer, if the kernel supports it, limiting\n-            \/\/ the number of bytes according to which platform\n+            \/\/ Now sz > 0 and position <= sz so remaining >= 0 and\n+            \/\/ remaining == 0 if and only if sz == position\n+            long remaining = sz - position;\n+\n+            if (remaining >= 0 && remaining < count)\n+                count = remaining;\n+\n+            \/\/ Attempt a direct transfer, if the kernel supports it,\n+            \/\/ limiting the number of bytes according to which platform\n","filename":"src\/java.base\/share\/classes\/sun\/nio\/ch\/FileChannelImpl.java","additions":10,"deletions":12,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -906,2 +906,2 @@\n-                \" are not accepted by server preferences \" +\n-                context.activeProtocols);\n+                \" are not accepted by server preferences \" + Arrays.toString(\n+                ProtocolVersion.toStringArray(context.activeProtocols)));\n","filename":"src\/java.base\/share\/classes\/sun\/security\/ssl\/ClientHello.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -1784,1 +1784,0 @@\n-                    int soTimeout = getSoTimeout();\n@@ -1786,10 +1785,16 @@\n-                        \/\/ deplete could hang on the skip operation\n-                        \/\/ in case of infinite socket read timeout.\n-                        \/\/ Change read timeout to avoid deadlock.\n-                        \/\/ This workaround could be replaced later\n-                        \/\/ with the right synchronization\n-                        if (soTimeout == 0)\n-                            setSoTimeout(DEFAULT_SKIP_TIMEOUT);\n-                        inputRecord.deplete(false);\n-                    } catch (java.net.SocketTimeoutException stEx) {\n-                        \/\/ skip timeout exception during deplete\n+                        int soTimeout = getSoTimeout();\n+                        try {\n+                            \/\/ deplete could hang on the skip operation\n+                            \/\/ in case of infinite socket read timeout.\n+                            \/\/ Change read timeout to avoid deadlock.\n+                            \/\/ This workaround could be replaced later\n+                            \/\/ with the right synchronization\n+                            if (soTimeout == 0)\n+                                setSoTimeout(DEFAULT_SKIP_TIMEOUT);\n+                            inputRecord.deplete(false);\n+                        } catch (java.net.SocketTimeoutException stEx) {\n+                            \/\/ skip timeout exception during deplete\n+                        } finally {\n+                            if (soTimeout == 0)\n+                                setSoTimeout(soTimeout);\n+                        }\n@@ -1797,2 +1802,0 @@\n-                        if (soTimeout == 0)\n-                            setSoTimeout(soTimeout);\n","filename":"src\/java.base\/share\/classes\/sun\/security\/ssl\/SSLSocketImpl.java","additions":16,"deletions":13,"binary":false,"changes":29,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -45,0 +45,1 @@\n+import static sun.security.ssl.SSLExtension.SH_PRE_SHARED_KEY;\n@@ -345,0 +346,4 @@\n+                    \/\/ this server is disallowing this session resumption,\n+                    \/\/ so don't include the pre-shared key in the\n+                    \/\/ ServerHello handshake message\n+                    shc.handshakeExtensions.remove(SH_PRE_SHARED_KEY);\n","filename":"src\/java.base\/share\/classes\/sun\/security\/ssl\/ServerNameExtension.java","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -30,0 +30,3 @@\n+import java.time.Instant;\n+import java.time.ZoneId;\n+import java.time.format.DateTimeFormatter;\n@@ -44,0 +47,2 @@\n+    private boolean printDateTime;\n+    private boolean printThreadDetails;\n@@ -46,0 +51,4 @@\n+    private static boolean threadInfoAll;\n+    private static boolean timeStampInfoAll;\n+    private static final String TIMESTAMP_OPTION = \"+timestamp\";\n+    private static final String THREAD_OPTION = \"+thread\";\n@@ -64,0 +73,10 @@\n+            } else if (args.contains(\"all\")) {\n+                \/\/ \"all\" option has special handling for decorator options\n+                \/\/ If the thread or timestamp decorator option is detected\n+                \/\/ with the \"all\" option, then it impacts decorator options\n+                \/\/ for other categories\n+                int beginIndex = args.lastIndexOf(\"all\") + \"all\".length();\n+                int commaIndex = args.indexOf(',', beginIndex);\n+                if (commaIndex == -1) commaIndex = args.length();\n+                threadInfoAll = args.substring(beginIndex, commaIndex).contains(THREAD_OPTION);\n+                timeStampInfoAll = args.substring(beginIndex, commaIndex).contains(TIMESTAMP_OPTION);\n@@ -68,2 +87,1 @@\n-    public static void Help()\n-    {\n+    public static void Help() {\n@@ -98,0 +116,5 @@\n+        System.err.println(\"+timestamp can be appended to any of above options to print\");\n+        System.err.println(\"              a timestamp for that debug option\");\n+        System.err.println(\"+thread can be appended to any of above options to print\");\n+        System.err.println(\"              thread and caller information for that debug option\");\n+        System.err.println();\n@@ -142,2 +165,1 @@\n-    public static Debug getInstance(String option)\n-    {\n+    public static Debug getInstance(String option) {\n@@ -151,2 +173,1 @@\n-    public static Debug getInstance(String option, String prefix)\n-    {\n+    public static Debug getInstance(String option, String prefix) {\n@@ -156,0 +177,1 @@\n+            d.configureExtras(option);\n@@ -162,0 +184,35 @@\n+    private static String formatCaller() {\n+        return StackWalker.getInstance().walk(s ->\n+                s.dropWhile(f ->\n+                    f.getClassName().startsWith(\"sun.security.util.Debug\"))\n+                        .map(f -> f.getFileName() + \":\" + f.getLineNumber())\n+                        .findFirst().orElse(\"unknown caller\"));\n+    }\n+\n+    \/\/ parse an option string to determine if extra details,\n+    \/\/ like thread and timestamp, should be printed\n+    private void configureExtras(String option) {\n+        \/\/ treat \"all\" as special case, only used for java.security.debug property\n+        this.printDateTime = timeStampInfoAll;\n+        this.printThreadDetails = threadInfoAll;\n+\n+        if (printDateTime && printThreadDetails) {\n+            \/\/ nothing left to configure\n+            return;\n+        }\n+\n+        \/\/ args is converted to lower case for the most part via marshal method\n+        int optionIndex = args.lastIndexOf(option);\n+        if (optionIndex == -1) {\n+            \/\/ option not in args list. Only here since \"all\" was present\n+            \/\/ in debug property argument. \"all\" option already parsed\n+            return;\n+        }\n+        int beginIndex = optionIndex + option.length();\n+        int commaIndex = args.indexOf(',', beginIndex);\n+        if (commaIndex == -1) commaIndex = args.length();\n+        String subOpt = args.substring(beginIndex, commaIndex);\n+        printDateTime = printDateTime || subOpt.contains(TIMESTAMP_OPTION);\n+        printThreadDetails = printThreadDetails || subOpt.contains(THREAD_OPTION);\n+    }\n+\n@@ -166,2 +223,1 @@\n-    public static boolean isOn(String option)\n-    {\n+    public static boolean isOn(String option) {\n@@ -190,3 +246,2 @@\n-    public void println(String message)\n-    {\n-        System.err.println(prefix + \": \"+message);\n+    public void println(String message) {\n+        System.err.println(prefix + extraInfo() + \": \" + message);\n@@ -199,3 +254,2 @@\n-    public void println(Object obj, String message)\n-    {\n-        System.err.println(prefix + \" [\" + obj.getClass().getSimpleName() +\n+    public void println(Object obj, String message) {\n+        System.err.println(prefix + extraInfo() + \" [\" + obj.getClass().getSimpleName() +\n@@ -209,3 +263,2 @@\n-    public void println()\n-    {\n-        System.err.println(prefix + \":\");\n+    public void println() {\n+        System.err.println(prefix + extraInfo() + \":\");\n@@ -218,3 +271,22 @@\n-    public static void println(String prefix, String message)\n-    {\n-        System.err.println(prefix + \": \"+message);\n+    public void println(String prefix, String message) {\n+        System.err.println(prefix + extraInfo() + \": \" + message);\n+    }\n+\n+    \/**\n+     * If thread debug option enabled, include information containing\n+     * hex value of threadId and the current thread name\n+     * If timestamp debug option enabled, include timestamp string\n+     * @return extra info if debug option enabled.\n+     *\/\n+    private String extraInfo() {\n+        String retString = \"\";\n+        if (printThreadDetails) {\n+            retString = \"0x\" + Long.toHexString(\n+                    Thread.currentThread().threadId()).toUpperCase(Locale.ROOT) +\n+                    \"|\" + Thread.currentThread().getName() + \"|\" + formatCaller();\n+        }\n+        if (printDateTime) {\n+            retString += (retString.isEmpty() ? \"\" : \"|\")\n+                    + FormatHolder.DATE_TIME_FORMATTER.format(Instant.now());\n+        }\n+        return retString.isEmpty() ? \"\" : \"[\" + retString + \"]\";\n@@ -336,0 +408,7 @@\n+    \/\/ Holder class to break cyclic dependency seen during build\n+    private static class FormatHolder {\n+        private static final String PATTERN = \"yyyy-MM-dd kk:mm:ss.SSS\";\n+        private static final DateTimeFormatter DATE_TIME_FORMATTER = DateTimeFormatter\n+                .ofPattern(PATTERN, Locale.ENGLISH)\n+                .withZone(ZoneId.systemDefault());\n+    }\n","filename":"src\/java.base\/share\/classes\/sun\/security\/util\/Debug.java","additions":99,"deletions":20,"binary":false,"changes":119,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2005, 2023, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2005, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -290,0 +290,1 @@\n+ZWG=ZWG\n@@ -515,0 +516,1 @@\n+zwg=Zimbabwe Gold\n","filename":"src\/java.base\/share\/classes\/sun\/util\/resources\/CurrencyNames.properties","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2000, 2023, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -35,1 +35,1 @@\n-dataVersion=176\n+dataVersion=177\n@@ -59,2 +59,2 @@\n-    XPT962-XSU994-XTS963-XUA965-XXX999-YER886-YUM891-ZAR710-ZMK894-ZMW967-ZWD716-ZWL932-\\\n-    ZWN942-ZWR935\n+    XPT962-XSU994-XTS963-XUA965-XXX999-YER886-YUM891-ZAR710-ZMK894-ZMW967-ZWD716-ZWG924-\\\n+    ZWL932-ZWN942-ZWR935\n@@ -585,1 +585,1 @@\n-ZW=ZWL\n+ZW=ZWG\n","filename":"src\/java.base\/share\/data\/currency\/CurrencyData.properties","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -1,1 +1,1 @@\n-File-Date: 2024-03-07\n+File-Date: 2024-06-14\n@@ -9405,0 +9405,1 @@\n+Description: Tlicho\n@@ -15258,0 +15259,5 @@\n+Subtag: isv\n+Description: Interslavic\n+Added: 2024-05-15\n+%%\n+Type: language\n@@ -48006,0 +48012,1 @@\n+Deprecated: 2024-06-08\n@@ -48007,0 +48014,1 @@\n+Comments: Preferred tag is cls\n@@ -48382,0 +48390,1 @@\n+Deprecated: 2024-06-08\n@@ -48385,0 +48394,1 @@\n+Comments: Preferred tag is vsn\n","filename":"src\/java.base\/share\/data\/lsrdata\/language-subtag-registry.txt","additions":11,"deletions":1,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1995, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1995, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -562,2 +562,11 @@\n-    memcpy(buf+offset, c->pdir, sp.dirlen);\n-    offset += sp.dirlen;\n+    if (c->pdir != NULL) {\n+        if (sp.dirlen > 0) {\n+            memcpy(buf+offset, c->pdir, sp.dirlen);\n+            offset += sp.dirlen;\n+        }\n+    } else {\n+        if (sp.dirlen > 0) {\n+            free(buf);\n+            return -1;\n+        }\n+    }\n","filename":"src\/java.base\/unix\/native\/libjava\/ProcessImpl_md.c","additions":12,"deletions":3,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -94,7 +94,7 @@\n-typedef GProxyResolver* g_proxy_resolver_get_default_func();\n-typedef char** g_proxy_resolver_lookup_func();\n-typedef GSocketConnectable* g_network_address_parse_uri_func();\n-typedef const char* g_network_address_get_hostname_func();\n-typedef unsigned short g_network_address_get_port_func();\n-typedef void g_strfreev_func();\n-typedef void g_clear_error_func();\n+typedef GProxyResolver* g_proxy_resolver_get_default_func(void);\n+typedef char** g_proxy_resolver_lookup_func(GProxyResolver* resolver, char* uri, void *null, GError **error_p);\n+typedef GSocketConnectable* g_network_address_parse_uri_func(char* proxy, unsigned short default_port, GError **error_p);\n+typedef const char* g_network_address_get_hostname_func(GSocketConnectable* conn);\n+typedef unsigned short g_network_address_get_port_func(GSocketConnectable* conn);\n+typedef void g_strfreev_func(char** proxies);\n+typedef void g_clear_error_func(GError **error_p);\n","filename":"src\/java.base\/unix\/native\/libnet\/DefaultProxySelector.c","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -202,1 +202,1 @@\n-            result.setRect(0, 0, -1, -1);\n+            result.setRect(0, 0, 0, 0);\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/font\/CStrike.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1023,1 +1023,17 @@\n-}\n\\ No newline at end of file\n+    int MAX_SIZE = 1 << 30;\n+    if (bboxes) {\n+        for (int i = 0; i < count; i++) {\n+           if (bboxes[i].origin.x > (double)MAX_SIZE) bboxes[i].origin.x = 0;\n+           if (bboxes[i].origin.y > (double)MAX_SIZE) bboxes[i].origin.y = 0;\n+           if (bboxes[i].size.width > (double)MAX_SIZE) bboxes[i].size.width = 0;\n+           if (bboxes[i].size.height > (double)MAX_SIZE) bboxes[i].size.height = 0;\n+        }\n+    }\n+    if (advances) {\n+        for (int i = 0; i < count; i++) {\n+           if (advances[i].width > (double)MAX_SIZE) advances[i].width = 0;\n+           if (advances[i].height > (double)MAX_SIZE) advances[i].height = 0;\n+        }\n+    }\n+}\n+\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/font\/CGGlyphImages.m","additions":17,"deletions":1,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -622,10 +622,0 @@\n-            kit.read(r, doc, 0);\n-        } catch (BadLocationException e) {\n-            throw new IOException(e.getMessage());\n-        } catch (ChangedCharSetException changedCharSetException) {\n-            String charSetSpec = changedCharSetException.getCharSetSpec();\n-            if (changedCharSetException.keyEqualsCharSet()) {\n-                putClientProperty(\"charset\", charSetSpec);\n-            } else {\n-                setCharsetFromContentTypeParameters(charSetSpec);\n-            }\n@@ -633,8 +623,7 @@\n-                in.reset();\n-            } catch (IOException exception) {\n-                \/\/mark was invalidated\n-                in.close();\n-                URL url = (URL)doc.getProperty(Document.StreamDescriptionProperty);\n-                if (url != null) {\n-                    URLConnection conn = url.openConnection();\n-                    in = conn.getInputStream();\n+                kit.read(r, doc, 0);\n+            } catch (BadLocationException e) {\n+                throw new IOException(e.getMessage());\n+            } catch (ChangedCharSetException changedCharSetException) {\n+                String charSetSpec = changedCharSetException.getCharSetSpec();\n+                if (changedCharSetException.keyEqualsCharSet()) {\n+                    putClientProperty(\"charset\", charSetSpec);\n@@ -642,2 +631,15 @@\n-                    \/\/there is nothing we can do to recover stream\n-                    throw changedCharSetException;\n+                    setCharsetFromContentTypeParameters(charSetSpec);\n+                }\n+                try {\n+                    in.reset();\n+                } catch (IOException exception) {\n+                    \/\/mark was invalidated\n+                    in.close();\n+                    URL url = (URL)doc.getProperty(Document.StreamDescriptionProperty);\n+                    if (url != null) {\n+                        URLConnection conn = url.openConnection();\n+                        in = conn.getInputStream();\n+                    } else {\n+                        \/\/there is nothing we can do to recover stream\n+                        throw changedCharSetException;\n+                    }\n@@ -645,0 +647,5 @@\n+                try {\n+                    doc.remove(0, doc.getLength());\n+                } catch (BadLocationException e) {}\n+                doc.putProperty(\"IgnoreCharsetDirective\", Boolean.valueOf(true));\n+                read(in, doc);\n@@ -646,5 +653,0 @@\n-            try {\n-                doc.remove(0, doc.getLength());\n-            } catch (BadLocationException e) {}\n-            doc.putProperty(\"IgnoreCharsetDirective\", Boolean.valueOf(true));\n-            read(in, doc);\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/JEditorPane.java","additions":28,"deletions":26,"binary":false,"changes":54,"status":"modified"},{"patch":"@@ -268,1 +268,5 @@\n-                toFind = mouseEvent.getLocationOnScreen();\n+                if (mouseEvent != null) {\n+                    toFind = mouseEvent.getLocationOnScreen();\n+                } else {\n+                    toFind = screenLocation;\n+                }\n@@ -273,2 +277,4 @@\n-                toFind = mouseEvent.getLocationOnScreen();\n-                gc = getDrawingGC(toFind);\n+                if (mouseEvent != null) {\n+                    toFind = mouseEvent.getLocationOnScreen();\n+                    gc = getDrawingGC(toFind);\n+                }\n@@ -304,2 +310,6 @@\n-                location = new Point(screenLocation.x + mouseEvent.getX(),\n-                        screenLocation.y + mouseEvent.getY() + 20);\n+                if (mouseEvent != null) {\n+                    location = new Point(screenLocation.x + mouseEvent.getX(),\n+                            screenLocation.y + mouseEvent.getY() + 20);\n+                } else {\n+                    location = screenLocation;\n+                }\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/ToolTipManager.java","additions":15,"deletions":5,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -101,4 +101,7 @@\n-        if (filesLoader != null) {\n-            filesLoader.loadThread.interrupt();\n-            filesLoader.cancelRunnables();\n-            filesLoader = null;\n+        synchronized (this) {\n+            if (filesLoader != null) {\n+                filesLoader.loadThread.interrupt();\n+                filesLoader = null;\n+                \/\/ Increment fetch ID to invalidate pending DoChangeContents\n+                fetchID.incrementAndGet();\n+            }\n@@ -159,4 +162,4 @@\n-        if (filesLoader != null) {\n-            filesLoader.loadThread.interrupt();\n-            filesLoader.cancelRunnables();\n-        }\n+        synchronized (this) {\n+            if (filesLoader != null) {\n+                filesLoader.loadThread.interrupt();\n+            }\n@@ -164,3 +167,4 @@\n-        int fid = fetchID.incrementAndGet();\n-        setBusy(true, fid);\n-        filesLoader = new FilesLoader(currentDirectory, fid);\n+            int fid = fetchID.incrementAndGet();\n+            setBusy(true, fid);\n+            filesLoader = new FilesLoader(currentDirectory, fid);\n+        }\n@@ -279,1 +283,0 @@\n-        private volatile DoChangeContents runnable;\n@@ -300,2 +303,0 @@\n-            FileSystemView fileSystem = fileSystemView;\n-\n@@ -306,1 +307,1 @@\n-            File[] list = fileSystem.getFiles(currentDirectory, useFileHiding);\n+            File[] list = fileSystemView.getFiles(currentDirectory, useFileHiding);\n@@ -313,1 +314,1 @@\n-            Vector<File> newFiles = new Vector<File>();\n+            final Vector<File> newFiles = new Vector<File>();\n@@ -315,1 +316,1 @@\n-            \/\/ run through the file list, add directories and selectable files to fileCache\n+            \/\/ Run through the file list, add directories and selectable files to fileCache\n@@ -342,1 +343,1 @@\n-            runnable = ShellFolder.invoke(new Callable<DoChangeContents>() {\n+            DoChangeContents runnable = ShellFolder.invoke(new Callable<DoChangeContents>() {\n@@ -344,14 +345,16 @@\n-                    int newSize = newFileCache.size();\n-                    int oldSize = fileCache.size();\n-\n-                    if (newSize > oldSize) {\n-                        \/\/see if interval is added\n-                        int start = oldSize;\n-                        int end = newSize;\n-                        for (int i = 0; i < oldSize; i++) {\n-                            if (!newFileCache.get(i).equals(fileCache.get(i))) {\n-                                start = i;\n-                                for (int j = i; j < newSize; j++) {\n-                                    if (newFileCache.get(j).equals(fileCache.get(i))) {\n-                                        end = j;\n-                                        break;\n+                    synchronized (fileCache) {\n+                        int newSize = newFileCache.size();\n+                        int oldSize = fileCache.size();\n+\n+                        if (newSize > oldSize) {\n+                            \/\/see if interval is added\n+                            int start = oldSize;\n+                            int end = newSize;\n+                            for (int i = 0; i < oldSize; i++) {\n+                                if (!newFileCache.get(i).equals(fileCache.get(i))) {\n+                                    start = i;\n+                                    for (int j = i; j < newSize; j++) {\n+                                        if (newFileCache.get(j).equals(fileCache.get(i))) {\n+                                            end = j;\n+                                            break;\n+                                        }\n@@ -359,0 +362,1 @@\n+                                    break;\n@@ -360,1 +364,0 @@\n-                                break;\n@@ -362,1 +365,0 @@\n-                        }\n@@ -364,3 +366,3 @@\n-                        if (start >= 0 && end > start) {\n-                            List<File> listStart_OldSize = new Vector<>(fileCache.subList(start, oldSize));\n-                            if (newFileCache.subList(end, newSize).equals(listStart_OldSize)) {\n+                            if (start >= 0 && end > start\n+                                    && newFileCache.subList(end, newSize)\n+                                                   .equals(fileCache.subList(start, oldSize))) {\n@@ -370,1 +372,2 @@\n-                                return new DoChangeContents(newFileCache.subList(start, end), start, null, 0, fid);\n+                                return new DoChangeContents(newFileCache.subList(start, end),\n+                                                            start, null, 0, fid);\n@@ -372,10 +375,10 @@\n-                        }\n-                    } else if (newSize < oldSize) {\n-                        \/\/see if interval is removed\n-                        int start = -1;\n-                        int end = -1;\n-                        for (int i = 0; i < newSize; i++) {\n-                            if (!newFileCache.get(i).equals(fileCache.get(i))) {\n-                                start = i;\n-                                end = i + oldSize - newSize;\n-                                break;\n+                        } else if (newSize < oldSize) {\n+                            \/\/see if interval is removed\n+                            int start = -1;\n+                            int end = -1;\n+                            for (int i = 0; i < newSize; i++) {\n+                                if (!newFileCache.get(i).equals(fileCache.get(i))) {\n+                                    start = i;\n+                                    end = i + oldSize - newSize;\n+                                    break;\n+                                }\n@@ -383,1 +386,0 @@\n-                        }\n@@ -385,3 +387,3 @@\n-                        if (start >= 0 && end > start) {\n-                            List<File> listEnd_OldSize = new Vector<>(fileCache.subList(end, oldSize));\n-                            if (listEnd_OldSize.equals(newFileCache.subList(start, newSize))) {\n+                            if (start >= 0 && end > start\n+                                    && fileCache.subList(end, oldSize)\n+                                                .equals(newFileCache.subList(start, newSize))) {\n@@ -391,1 +393,2 @@\n-                                return new DoChangeContents(null, 0, new Vector<>(fileCache.subList(start, end)), start, fid);\n+                                return new DoChangeContents(null, 0,\n+                                        new Vector<>(fileCache.subList(start, end)), start, fid);\n@@ -394,4 +397,5 @@\n-                    }\n-                    if (!fileCache.equals(newFileCache)) {\n-                        if (loadThread.isInterrupted()) {\n-                            cancelRunnables();\n+                        if (!fileCache.equals(newFileCache)) {\n+                            if (loadThread.isInterrupted()) {\n+                                return null;\n+                            }\n+                            return new DoChangeContents(newFileCache, 0, fileCache, 0, fid);\n@@ -399,1 +403,1 @@\n-                        return new DoChangeContents(newFileCache, 0, fileCache, 0, fid);\n+                        return null;\n@@ -401,1 +405,0 @@\n-                    return null;\n@@ -409,6 +412,0 @@\n-\n-        private void cancelRunnables() {\n-            if (runnable != null) {\n-                runnable.cancel();\n-            }\n-        }\n@@ -523,1 +520,0 @@\n-        private boolean doFire = true;\n@@ -525,2 +521,2 @@\n-        private int addStart = 0;\n-        private int remStart = 0;\n+        private final int addStart;\n+        private final int remStart;\n@@ -528,2 +524,3 @@\n-        DoChangeContents(List<File> addFiles, int addStart, List<File> remFiles,\n-                         int remStart, int fid) {\n+        private DoChangeContents(List<File> addFiles, int addStart,\n+                                 List<File> remFiles, int remStart,\n+                                 int fid) {\n@@ -537,3 +534,5 @@\n-        synchronized void cancel() {\n-            doFire = false;\n-        }\n+        @Override\n+        public void run() {\n+            if (fetchID.get() != fid) {\n+                return;\n+            }\n@@ -541,13 +540,6 @@\n-        public synchronized void run() {\n-            if (fetchID.get() == fid && doFire) {\n-                int remSize = (remFiles == null) ? 0 : remFiles.size();\n-                int addSize = (addFiles == null) ? 0 : addFiles.size();\n-                synchronized(fileCache) {\n-                    if (remSize > 0) {\n-                        fileCache.removeAll(remFiles);\n-                    }\n-                    if (addSize > 0) {\n-                        fileCache.addAll(addStart, addFiles);\n-                    }\n-                    files = null;\n-                    directories = null;\n+            final int remSize = (remFiles == null) ? 0 : remFiles.size();\n+            final int addSize = (addFiles == null) ? 0 : addFiles.size();\n+            final int cacheSize;\n+            synchronized (fileCache) {\n+                if (remSize > 0) {\n+                    fileCache.removeAll(remFiles);\n@@ -555,6 +547,2 @@\n-                if (remSize > 0 && addSize == 0) {\n-                    fireIntervalRemoved(BasicDirectoryModel.this, remStart, remStart + remSize - 1);\n-                } else if (addSize > 0 && remSize == 0 && addStart + addSize <= fileCache.size()) {\n-                    fireIntervalAdded(BasicDirectoryModel.this, addStart, addStart + addSize - 1);\n-                } else {\n-                    fireContentsChanged();\n+                if (addSize > 0) {\n+                    fileCache.addAll(addStart, addFiles);\n@@ -562,0 +550,10 @@\n+                files = null;\n+                directories = null;\n+                cacheSize = fileCache.size();\n+            }\n+            if (remSize > 0 && addSize == 0) {\n+                fireIntervalRemoved(BasicDirectoryModel.this, remStart, remStart + remSize - 1);\n+            } else if (addSize > 0 && remSize == 0 && addStart + addSize <= cacheSize) {\n+                fireIntervalAdded(BasicDirectoryModel.this, addStart, addStart + addSize - 1);\n+            } else {\n+                fireContentsChanged();\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/plaf\/basic\/BasicDirectoryModel.java","additions":91,"deletions":93,"binary":false,"changes":184,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -844,0 +844,16 @@\n+    static Object mergeTextDecoration(String value) {\n+        if (value.startsWith(\"none\")) {\n+            return null;\n+        }\n+\n+        boolean underline = value.contains(\"underline\");\n+        boolean strikeThrough = value.contains(\"line-through\");\n+        if (!underline && !strikeThrough) {\n+            return null;\n+        }\n+        String newValue = underline && strikeThrough\n+                          ? \"underline,line-through\"\n+                          : (underline ? \"underline\" : \"line-through\");\n+        return new StringValue().parseCssValue(newValue);\n+    }\n+\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/text\/html\/CSS.java","additions":17,"deletions":1,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,2 +28,2 @@\n-import java.util.*;\n-import java.net.URL;\n+import java.io.IOException;\n+import java.io.StringReader;\n@@ -31,5 +31,32 @@\n-import java.io.*;\n-import javax.swing.*;\n-import javax.swing.event.*;\n-import javax.swing.text.*;\n-import javax.swing.undo.*;\n+import java.net.URL;\n+import java.util.ArrayList;\n+import java.util.Enumeration;\n+import java.util.HashMap;\n+import java.util.Hashtable;\n+import java.util.Stack;\n+import java.util.Vector;\n+\n+import javax.swing.ButtonGroup;\n+import javax.swing.DefaultButtonModel;\n+import javax.swing.DefaultComboBoxModel;\n+import javax.swing.DefaultListModel;\n+import javax.swing.JToggleButton;\n+import javax.swing.ListSelectionModel;\n+import javax.swing.event.DocumentEvent;\n+import javax.swing.event.EventListenerList;\n+import javax.swing.event.UndoableEditEvent;\n+import javax.swing.text.AbstractDocument;\n+import javax.swing.text.AttributeSet;\n+import javax.swing.text.BadLocationException;\n+import javax.swing.text.DefaultEditorKit;\n+import javax.swing.text.DefaultStyledDocument;\n+import javax.swing.text.Document;\n+import javax.swing.text.Element;\n+import javax.swing.text.ElementIterator;\n+import javax.swing.text.GapContent;\n+import javax.swing.text.MutableAttributeSet;\n+import javax.swing.text.PlainDocument;\n+import javax.swing.text.SimpleAttributeSet;\n+import javax.swing.text.StyleConstants;\n+import javax.swing.undo.UndoableEdit;\n+\n@@ -37,0 +64,1 @@\n+\n@@ -2474,1 +2502,1 @@\n-            tagMap.put(HTML.Tag.SPAN, ca);\n+            tagMap.put(HTML.Tag.SPAN, new ConvertSpanAction());\n@@ -2476,1 +2504,1 @@\n-            tagMap.put(HTML.Tag.S, ca);\n+            tagMap.put(HTML.Tag.S, conv);\n@@ -3398,0 +3426,2 @@\n+\n+                convertAttributes(t, attr);\n@@ -3403,0 +3433,30 @@\n+\n+            \/**\n+             * Converts HTML tags to CSS attributes.\n+             * @param t the current HTML tag\n+             * @param attr the attributes of the HTML tag\n+             *\/\n+            void convertAttributes(HTML.Tag t, MutableAttributeSet attr) {\n+            }\n+        }\n+\n+        final class ConvertSpanAction extends CharacterAction {\n+            @Override\n+            void convertAttributes(HTML.Tag t, MutableAttributeSet attr) {\n+                Object newDecoration = attr.getAttribute(CSS.Attribute.TEXT_DECORATION);\n+                Object previousDecoration =\n+                        charAttrStack.peek()\n+                                     .getAttribute(CSS.Attribute.TEXT_DECORATION);\n+\n+                if (newDecoration != null\n+                    && !\"none\".equals(newDecoration.toString())\n+                    && previousDecoration != null\n+                    && !\"none\".equals(previousDecoration.toString())) {\n+                    StyleSheet sheet = getStyleSheet();\n+                    sheet.addCSSAttribute(charAttr,\n+                                          CSS.Attribute.TEXT_DECORATION,\n+                                          CSS.mergeTextDecoration(newDecoration + \",\"\n+                                                                  + previousDecoration)\n+                                             .toString());\n+                }\n+            }\n@@ -3410,29 +3470,3 @@\n-        class ConvertAction extends TagAction {\n-\n-            public void start(HTML.Tag t, MutableAttributeSet attr) {\n-                pushCharacterStyle();\n-                if (!foundInsertTag) {\n-                    \/\/ Note that the third argument should really be based off\n-                    \/\/ inParagraph and impliedP. If we're wrong (that is\n-                    \/\/ insertTagDepthDelta shouldn't be changed), we'll end up\n-                    \/\/ removing an extra EndSpec, which won't matter anyway.\n-                    boolean insert = canInsertTag(t, attr, false);\n-                    if (foundInsertTag) {\n-                        if (!inParagraph) {\n-                            inParagraph = impliedP = true;\n-                        }\n-                    }\n-                    if (!insert) {\n-                        return;\n-                    }\n-                }\n-                if (attr.isDefined(IMPLIED)) {\n-                    attr.removeAttribute(IMPLIED);\n-                }\n-                if (styleAttributes != null) {\n-                    charAttr.addAttributes(styleAttributes);\n-                }\n-                \/\/ We also need to add attr, otherwise we lose custom\n-                \/\/ attributes, including class\/id for style lookups, and\n-                \/\/ further confuse style lookup (doesn't have tag).\n-                charAttr.addAttribute(t, attr.copyAttributes());\n+        final class ConvertAction extends CharacterAction {\n+            @Override\n+            void convertAttributes(HTML.Tag t, MutableAttributeSet attr) {\n@@ -3449,1 +3483,1 @@\n-                } else if (t == HTML.Tag.STRIKE) {\n+                } else if (t == HTML.Tag.STRIKE || t == HTML.Tag.S) {\n@@ -3479,5 +3513,0 @@\n-\n-            public void end(HTML.Tag t) {\n-                popCharacterStyle();\n-            }\n-\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/text\/html\/HTMLDocument.java","additions":74,"deletions":45,"binary":false,"changes":119,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,1 +27,0 @@\n-import javax.swing.text.*;\n@@ -29,1 +28,9 @@\n-import java.util.*;\n+import java.util.Arrays;\n+import java.util.Enumeration;\n+import java.util.NoSuchElementException;\n+import java.util.Objects;\n+import java.util.stream.Collectors;\n+\n+import javax.swing.text.AttributeSet;\n+import javax.swing.text.MutableAttributeSet;\n+import javax.swing.text.SimpleAttributeSet;\n@@ -199,6 +206,8 @@\n-        AttributeSet[] as = getAttributes();\n-        int n = as.length;\n-        for (int i = 0; i < n; i++) {\n-            Object o = as[i].getAttribute(key);\n-            if (o != null) {\n-                return o;\n+        final AttributeSet[] as = getAttributes();\n+        final int n = as.length;\n+        if (key != CSS.Attribute.TEXT_DECORATION) {\n+            for (int i = 0; i < n; i++) {\n+                Object o = as[i].getAttribute(key);\n+                if (o != null) {\n+                    return o;\n+                }\n@@ -206,0 +215,1 @@\n+            return null;\n@@ -207,1 +217,7 @@\n-        return null;\n+\n+        String values = Arrays.stream(as)\n+                              .map(a -> a.getAttribute(key))\n+                              .filter(Objects::nonNull)\n+                              .map(Object::toString)\n+                              .collect(Collectors.joining(\",\"));\n+        return CSS.mergeTextDecoration(values);\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/text\/html\/MuxingAttributeSet.java","additions":26,"deletions":10,"binary":false,"changes":36,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,5 +27,29 @@\n-import sun.swing.SwingUtilities2;\n-import java.util.*;\n-import java.awt.*;\n-import java.io.*;\n-import java.net.*;\n+import java.awt.Color;\n+import java.awt.Component;\n+import java.awt.Container;\n+import java.awt.Font;\n+import java.awt.FontMetrics;\n+import java.awt.Graphics;\n+import java.awt.Graphics2D;\n+import java.awt.Insets;\n+import java.awt.Rectangle;\n+import java.awt.RenderingHints;\n+import java.awt.Shape;\n+import java.io.BufferedReader;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.io.InputStreamReader;\n+import java.io.Reader;\n+import java.io.Serializable;\n+import java.io.StringReader;\n+import java.net.MalformedURLException;\n+import java.net.URL;\n+import java.util.EmptyStackException;\n+import java.util.Enumeration;\n+import java.util.HashMap;\n+import java.util.HashSet;\n+import java.util.Hashtable;\n+import java.util.Stack;\n+import java.util.StringTokenizer;\n+import java.util.Vector;\n+\n@@ -35,1 +59,2 @@\n-import javax.swing.border.*;\n+import javax.swing.border.BevelBorder;\n+import javax.swing.border.Border;\n@@ -37,1 +62,12 @@\n-import javax.swing.text.*;\n+import javax.swing.text.AttributeSet;\n+import javax.swing.text.Document;\n+import javax.swing.text.Element;\n+import javax.swing.text.MutableAttributeSet;\n+import javax.swing.text.SimpleAttributeSet;\n+import javax.swing.text.Style;\n+import javax.swing.text.StyleConstants;\n+import javax.swing.text.StyleContext;\n+import javax.swing.text.StyledDocument;\n+import javax.swing.text.View;\n+\n+import sun.swing.SwingUtilities2;\n@@ -2820,0 +2856,16 @@\n+        \/**\n+         * Merges the current value of the 'text-decoration' property\n+         * with the value from parent.\n+         *\/\n+        private Object getTextDecoration(Object value) {\n+            AttributeSet parent = getResolveParent();\n+            if (parent == null) {\n+                return value;\n+            }\n+\n+            Object parentValue = parent.getAttribute(CSS.Attribute.TEXT_DECORATION);\n+            return parentValue == null\n+                   ? value\n+                   : CSS.mergeTextDecoration(value + \",\" + parentValue);\n+        }\n+\n@@ -2823,1 +2875,6 @@\n-                return retValue;\n+                if (key != CSS.Attribute.TEXT_DECORATION) {\n+                    return retValue;\n+                } else {\n+                    \/\/ Merge current value with parent\n+                    return getTextDecoration(retValue);\n+                }\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/text\/html\/StyleSheet.java","additions":66,"deletions":9,"binary":false,"changes":75,"status":"modified"},{"patch":"@@ -40,0 +40,1 @@\n+import sun.java2d.pipe.OutlineTextRenderer;\n@@ -110,0 +111,1 @@\n+    static final int MAX_IMAGE_SIZE = OutlineTextRenderer.THRESHHOLD;\n@@ -700,0 +702,14 @@\n+        if (intPtSize > MAX_IMAGE_SIZE) {\n+            Rectangle.Float obds = getGlyphOutlineBounds(glyphCode);\n+            if (obds.isEmpty()) {\n+                Rectangle bds = getGlyphOutline(glyphCode, pt.x, pt.y).getBounds();\n+                result.setBounds(bds);\n+            } else {\n+                result.x = (int)Math.floor(pt.x + obds.getX() + 0.5f);\n+                result.y = (int)Math.floor(pt.y + obds.getY() + 0.5f);\n+                result.width = (int)Math.floor(obds.getWidth() + 0.5f);\n+                result.height = (int)Math.floor(obds.getHeight() + 0.5f);\n+            }\n+            return;\n+        }\n+\n","filename":"src\/java.desktop\/share\/classes\/sun\/font\/FileFontStrike.java","additions":16,"deletions":0,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -190,1 +190,3 @@\n-          \/\/System.out.println(\"open T1 \" + platName);\n+            if (FontUtilities.isLogging()) {\n+                FontUtilities.logInfo(\"open Type 1 font: \" + platName);\n+            }\n@@ -232,0 +234,3 @@\n+        if (FontUtilities.isLogging()) {\n+            FontUtilities.logInfo(\"open Type 1 font: \" + platName);\n+        }\n","filename":"src\/java.desktop\/share\/classes\/sun\/font\/Type1Font.java","additions":7,"deletions":2,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1996, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1996, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -2153,7 +2153,10 @@\n-        if (dy == 0 && dx > 0 && dx < w) {\n-            while (w > 0) {\n-                int partW = Math.min(w, dx);\n-                w -= partW;\n-                int sx = x + w;\n-                ob.Blit(theData, theData, comp, clip,\n-                        sx, y, sx+dx, y+dy, partW, h);\n+        try {\n+            if (dy == 0 && dx > 0 && dx < w) {\n+                while (w > 0) {\n+                    int partW = Math.min(w, dx);\n+                    w -= partW;\n+                    int sx = Math.addExact(x, w);\n+                    ob.Blit(theData, theData, comp, clip,\n+                            sx, y, sx+dx, y+dy, partW, h);\n+                }\n+                return;\n@@ -2161,9 +2164,9 @@\n-            return;\n-        }\n-        if (dy > 0 && dy < h && dx > -w && dx < w) {\n-            while (h > 0) {\n-                int partH = Math.min(h, dy);\n-                h -= partH;\n-                int sy = y + h;\n-                ob.Blit(theData, theData, comp, clip,\n-                        x, sy, x+dx, sy+dy, w, partH);\n+            if (dy > 0 && dy < h && dx > -w && dx < w) {\n+                while (h > 0) {\n+                    int partH = Math.min(h, dy);\n+                    h -= partH;\n+                    int sy = Math.addExact(y, h);\n+                    ob.Blit(theData, theData, comp, clip,\n+                            x, sy, Math.addExact(x, dx), sy+dy, w, partH);\n+                }\n+                return;\n@@ -2171,0 +2174,4 @@\n+            ob.Blit(theData, theData, comp, clip, x, y,\n+                Math.addExact(x, dx), Math.addExact(y, dy), w, h);\n+        } catch (ArithmeticException ex) {\n+            \/\/ We are hitting integer overflow in Math.addExact()\n@@ -2173,1 +2180,0 @@\n-            ob.Blit(theData, theData, comp, clip, x, y, x+dx, y+dy, w, h);\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/SunGraphics2D.java","additions":24,"deletions":18,"binary":false,"changes":42,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -372,0 +372,7 @@\n+            double[] mat = new double[6];\n+            itx.getMatrix(mat);\n+            for (double d : mat) {\n+                if (!Double.isFinite(d)) {\n+                    return;\n+                }\n+            }\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/pipe\/DrawImage.java","additions":8,"deletions":1,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -1320,7 +1320,0 @@\n-        \/\/ TAB\/SHIFT-TAB should transfer focus and ENTER should select an item.\n-        \/\/ We don't want them to navigate within the table\n-        ActionMap am = SwingUtilities.getUIActionMap(detailsTable);\n-        am.remove(\"selectNextRowCell\");\n-        am.remove(\"selectPreviousRowCell\");\n-        am.remove(\"selectNextColumnCell\");\n-        am.remove(\"selectPreviousColumnCell\");\n","filename":"src\/java.desktop\/share\/classes\/sun\/swing\/FilePane.java","additions":0,"deletions":7,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -1,1 +1,1 @@\n-## GIFLIB v5.2.1\n+## GIFLIB v5.2.2\n@@ -27,1 +27,1 @@\n-https:\/\/sourceforge.net\/p\/giflib\/code\/ci\/master\/tree\/openbsd-reallocarray.c\n+tree\/README\n@@ -29,1 +29,19 @@\n-Copyright (c) 2008 Otto Moerbeek <otto@drijf.net>\n+== Authors ==\n+\n+Gershon Elber <gershon[AT]cs.technion.sc.il>\n+original giflib code\n+\n+Toshio Kuratomi <toshio[AT]tiki-lounge.com>\n+uncompressed gif writing code\n+former maintainer\n+\n+Eric Raymond <esr[AT]snark.thyrsus.com>\n+current as well as long time former maintainer of giflib code\n+\n+There have been many other contributors; see the attributions in the\n+version-control history to learn more.\n+\n+\n+tree\/openbsd-reallocarray.c\n+\n+Copyright (C) 2008 Otto Moerbeek <otto@drijf.net>\n@@ -31,0 +49,2 @@\n+\n+```\n","filename":"src\/java.desktop\/share\/legal\/giflib.md","additions":23,"deletions":3,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -1,1 +1,1 @@\n-## libpng v1.6.40\n+## libpng v1.6.43\n@@ -12,5 +12,5 @@\n-Copyright (c) 1995-2023 The PNG Reference Library Authors.\n-Copyright (c) 2018-2023 Cosmin Truta\n-Copyright (c) 1998-2018 Glenn Randers-Pehrson\n-Copyright (c) 1996-1997 Andreas Dilger\n-Copyright (c) 1995-1996 Guy Eric Schalnat, Group 42, Inc.\n+Copyright (C) 1995-2024 The PNG Reference Library Authors.\n+Copyright (C) 2018-2024 Cosmin Truta\n+Copyright (C) 1998-2018 Glenn Randers-Pehrson\n+Copyright (C) 1996-1997 Andreas Dilger\n+Copyright (C) 1995-1996 Guy Eric Schalnat, Group 42, Inc.\n@@ -160,0 +160,1 @@\n+ * Adam Richter\n@@ -161,0 +162,1 @@\n+ * Chris Blume\n@@ -189,0 +191,2 @@\n+ * Apple Inc.\n+    - Zixu Wang (çŽ‹å­æ—­)\n@@ -190,1 +194,1 @@\n-   - Richard Townsend\n+    - Richard Townsend\n@@ -192,6 +196,10 @@\n-   - Dan Field\n-   - Leon Scroggins III\n-   - Matt Sarett\n-   - Mike Klein\n-   - Sami Boukortt\n-   - Wan-Teh Chang\n+    - Dan Field\n+    - Leon Scroggins III\n+    - Matt Sarett\n+    - Mike Klein\n+    - Sami Boukortt\n+    - Wan-Teh Chang\n+ * Loongson Technology Corporation Ltd.\n+    - GuXiWei (é¡¾å¸Œä¼Ÿ)\n+    - JinBo (é‡‘æ³¢)\n+    - ZhangLixia (å¼ åˆ©éœž)\n@@ -200,1 +208,1 @@\n-files in the \"ci\", \"projects\", \"scripts\" and \"tests\" directories, have\n+files in the \"projects\", \"scripts\" and \"tests\" directories, have\n@@ -203,3 +211,4 @@\n-Some files in the \"contrib\" directory, and some tools-generated files\n-that are distributed with libpng, have other copyright owners, and are\n-released under other open source licenses.\n+Some files in the \"ci\" and \"contrib\" directories, as well as some\n+of the tools-generated files that are distributed with libpng, have\n+other copyright owners, and are released under other open source\n+licenses.\n","filename":"src\/java.desktop\/share\/legal\/libpng.md","additions":26,"deletions":17,"binary":false,"changes":43,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1999, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1999, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -35,0 +35,1 @@\n+#include <limits.h>\n@@ -56,0 +57,8 @@\n+#define UNSAFE_TO_ADD(a, b) \\\n+    (((a >= 0) && (b >= 0) && (a > (INT_MAX - b))) || \\\n+     ((a < 0) && (b < 0) && (a < (INT_MIN - b)))) \\\n+\n+#define UNSAFE_TO_SUB(a, b) \\\n+    (((b >= 0) && (a < 0) && (a < (INT_MIN + b))) || \\\n+     ((b < 0) && (a >= 0) && (-b > (INT_MAX - a)))) \\\n+\n","filename":"src\/java.desktop\/share\/native\/libawt\/java2d\/SurfaceData.h","additions":10,"deletions":1,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2013, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -71,0 +71,4 @@\n+    if (width <= 0 || height <= 0) {\n+        return;\n+    }\n+\n@@ -73,0 +77,6 @@\n+    if (UNSAFE_TO_ADD(srcx, width) ||\n+        UNSAFE_TO_ADD(srcy, height) ||\n+        UNSAFE_TO_ADD(dstx, width) ||\n+        UNSAFE_TO_ADD(dsty, height)) {\n+        return;\n+    }\n@@ -79,0 +89,4 @@\n+    if (UNSAFE_TO_SUB(srcx, dstx) ||\n+        UNSAFE_TO_SUB(srcy, dsty)) {\n+        return;\n+    }\n","filename":"src\/java.desktop\/share\/native\/libawt\/java2d\/loops\/MaskBlit.c","additions":15,"deletions":1,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2013, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -470,1 +470,1 @@\n-        if (xmid <= (CX2)) { \\\n+        if (xmid < (CX2)) { \\\n@@ -559,1 +559,1 @@\n-    jfloat localaccum[MASK_BUF_LEN + 1];\n+    jfloat localaccum[MASK_BUF_LEN + 2];\n@@ -571,1 +571,1 @@\n-              ? malloc((width + 1) * sizeof(jfloat))\n+              ? malloc((width + 2) * sizeof(jfloat))\n@@ -576,1 +576,1 @@\n-    memset(pAccum, 0, (width+1) * sizeof(jfloat));\n+    memset(pAccum, 0, (width + 2) * sizeof(jfloat));\n@@ -797,1 +797,1 @@\n-    jfloat localaccum[MASK_BUF_LEN + 1];\n+    jfloat localaccum[MASK_BUF_LEN + 2];\n@@ -818,1 +818,1 @@\n-              ? malloc((width + 1) * sizeof(jfloat))\n+              ? malloc((width + 2) * sizeof(jfloat))\n@@ -823,1 +823,1 @@\n-    memset(pAccum, 0, (width+1) * sizeof(jfloat));\n+    memset(pAccum, 0, (width + 2) * sizeof(jfloat));\n","filename":"src\/java.desktop\/share\/native\/libawt\/java2d\/loops\/MaskFill.c","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2004, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2004, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -123,1 +123,1 @@\n-#define TX_FIXED_UNSAFE(v)  (fabs(v) >= (1<<30))\n+#define TX_FIXED_UNSAFE(v)  (isinf(v) || isnan(v) || fabs(v) >= (1<<30))\n","filename":"src\/java.desktop\/share\/native\/libawt\/java2d\/loops\/TransformHelper.c","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -507,0 +507,2 @@\n+#define TOO_LARGE(a, b) (abs((int)(a \/ b)) > 32766)\n+\n@@ -518,0 +520,1 @@\n+        free(context);\n@@ -527,0 +530,4 @@\n+    if (ptsz > 16384) {\n+        ptsz = 16384;    \/\/ far enough from 32767\n+        fm = TEXT_FM_ON; \/\/ avoids calculations which might overflow\n+    }\n@@ -528,0 +535,7 @@\n+    if (TOO_LARGE(dmat[0], ptsz) || TOO_LARGE(dmat[1], ptsz) ||\n+        TOO_LARGE(dmat[2], ptsz) || TOO_LARGE(dmat[3], ptsz))\n+    {\n+        free(context);\n+        return (jlong)0;\n+    }\n+\n","filename":"src\/java.desktop\/share\/native\/libfontmanager\/freetypeScaler.c","additions":14,"deletions":0,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -292,1 +292,1 @@\n-    mlib_d64 x = dX1, slope = (dX2 - dX1) \/ (dY2 - dY1);\n+    mlib_d64 x = dX1, slope;\n@@ -299,0 +299,2 @@\n+    slope = (dX2 - dX1) \/ (dY2 - dY1);\n+\n@@ -333,1 +335,1 @@\n-    mlib_d64 x = dX1, slope = (dX2 - dX1) \/ (dY2 - dY1);\n+    mlib_d64 x = dX1, slope;\n@@ -340,0 +342,2 @@\n+    slope = (dX2 - dX1) \/ (dY2 - dY1);\n+\n","filename":"src\/java.desktop\/share\/native\/libmlib_image\/mlib_ImageScanPoly.c","additions":7,"deletions":3,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -37,1 +37,1 @@\n-#include <stdlib.h>\n+#include <fcntl.h>\n@@ -40,1 +40,0 @@\n-#include <fcntl.h>\n@@ -42,0 +41,1 @@\n+#include <stdlib.h>\n@@ -58,5 +58,5 @@\n-    \/\/fprintf(stderr, \"### Read: %d\\n\", len);\n-    return\n-    (((GifFilePrivateType*)gif->Private)->Read ?\n-     ((GifFilePrivateType*)gif->Private)->Read(gif,buf,len) :\n-     fread(buf,1,len,((GifFilePrivateType*)gif->Private)->File));\n+    \/\/ fprintf(stderr, \"### Read: %d\\n\", len);\n+    return (((GifFilePrivateType *)gif->Private)->Read\n+                ? ((GifFilePrivateType *)gif->Private)->Read(gif, buf, len)\n+                : fread(buf, 1, len,\n+                        ((GifFilePrivateType *)gif->Private)->File));\n@@ -69,1 +69,2 @@\n-static int DGifGetPrefixChar(GifPrefixType *Prefix, int Code, int ClearCode);\n+static int DGifGetPrefixChar(const GifPrefixType *Prefix, int Code,\n+                             int ClearCode);\n@@ -79,3 +80,1 @@\n-GifFileType *\n-DGifOpenFileName(const char *FileName, int *Error)\n-{\n+GifFileType *DGifOpenFileName(const char *FileName, int *Error) {\n@@ -86,1 +85,1 @@\n-        if (Error != NULL)\n+        if (Error != NULL) {\n@@ -88,0 +87,1 @@\n+        }\n@@ -100,3 +100,1 @@\n-GifFileType *\n-DGifOpenFileHandle(int FileHandle, int *Error)\n-{\n+GifFileType *DGifOpenFileHandle(int FileHandle, int *Error) {\n@@ -110,1 +108,1 @@\n-        if (Error != NULL)\n+        if (Error != NULL) {\n@@ -112,0 +110,1 @@\n+        }\n@@ -116,1 +115,1 @@\n-    \/*@i1@*\/memset(GifFile, '\\0', sizeof(GifFileType));\n+    \/*@i1@*\/ memset(GifFile, '\\0', sizeof(GifFileType));\n@@ -124,1 +123,1 @@\n-        if (Error != NULL)\n+        if (Error != NULL) {\n@@ -126,0 +125,1 @@\n+        }\n@@ -131,1 +131,1 @@\n-    \/*@i1@*\/memset(Private, '\\0', sizeof(GifFilePrivateType));\n+    \/*@i1@*\/ memset(Private, '\\0', sizeof(GifFilePrivateType));\n@@ -134,2 +134,2 @@\n-    _setmode(FileHandle, O_BINARY);    \/* Make sure it is in binary mode. *\/\n-#endif \/* _WIN32 *\/\n+    _setmode(FileHandle, O_BINARY); \/* Make sure it is in binary mode. *\/\n+#endif                                  \/* _WIN32 *\/\n@@ -137,1 +137,1 @@\n-    f = fdopen(FileHandle, \"rb\");    \/* Make it into a stream: *\/\n+    f = fdopen(FileHandle, \"rb\"); \/* Make it into a stream: *\/\n@@ -144,2 +144,2 @@\n-    Private->Read = NULL;        \/* don't use alternate input method (TVT) *\/\n-    GifFile->UserData = NULL;    \/* TVT *\/\n+    Private->Read = NULL;     \/* don't use alternate input method (TVT) *\/\n+    GifFile->UserData = NULL; \/* TVT *\/\n@@ -150,2 +150,3 @@\n-    if (InternalRead(GifFile, (unsigned char *)Buf, GIF_STAMP_LEN) != GIF_STAMP_LEN) {\n-        if (Error != NULL)\n+    if (InternalRead(GifFile, (unsigned char *)Buf, GIF_STAMP_LEN) !=\n+        GIF_STAMP_LEN) {\n+        if (Error != NULL) {\n@@ -153,0 +154,1 @@\n+        }\n@@ -162,1 +164,1 @@\n-        if (Error != NULL)\n+        if (Error != NULL) {\n@@ -164,0 +166,1 @@\n+        }\n@@ -180,1 +183,1 @@\n-    Private->gif89 = (Buf[GIF_VERSION_POS] == '9');\n+    Private->gif89 = (Buf[GIF_VERSION_POS + 1] == '9');\n@@ -188,3 +191,1 @@\n-GifFileType *\n-DGifOpen(void *userData, InputFunc readFunc, int *Error)\n-{\n+GifFileType *DGifOpen(void *userData, InputFunc readFunc, int *Error) {\n@@ -197,1 +198,1 @@\n-        if (Error != NULL)\n+        if (Error != NULL) {\n@@ -199,0 +200,1 @@\n+        }\n@@ -210,1 +212,1 @@\n-        if (Error != NULL)\n+        if (Error != NULL) {\n@@ -212,0 +214,1 @@\n+        }\n@@ -215,1 +218,1 @@\n-    \/*@i1@*\/memset(Private, '\\0', sizeof(GifFilePrivateType));\n+    \/*@i1@*\/ memset(Private, '\\0', sizeof(GifFilePrivateType));\n@@ -222,2 +225,2 @@\n-    Private->Read = readFunc;    \/* TVT *\/\n-    GifFile->UserData = userData;    \/* TVT *\/\n+    Private->Read = readFunc;     \/* TVT *\/\n+    GifFile->UserData = userData; \/* TVT *\/\n@@ -227,2 +230,3 @@\n-    if (InternalRead(GifFile, (unsigned char *)Buf, GIF_STAMP_LEN) != GIF_STAMP_LEN) {\n-        if (Error != NULL)\n+    if (InternalRead(GifFile, (unsigned char *)Buf, GIF_STAMP_LEN) !=\n+        GIF_STAMP_LEN) {\n+        if (Error != NULL) {\n@@ -230,0 +234,1 @@\n+        }\n@@ -238,1 +243,1 @@\n-        if (Error != NULL)\n+        if (Error != NULL) {\n@@ -240,0 +245,1 @@\n+        }\n@@ -248,1 +254,1 @@\n-        if (Error != NULL)\n+        if (Error != NULL) {\n@@ -250,0 +256,1 @@\n+        }\n@@ -256,1 +263,1 @@\n-    Private->gif89 = (Buf[GIF_VERSION_POS] == '9');\n+    Private->gif89 = (Buf[GIF_VERSION_POS + 1] == '9');\n@@ -265,3 +272,1 @@\n-int\n-DGifGetScreenDesc(GifFileType *GifFile)\n-{\n+int DGifGetScreenDesc(GifFileType *GifFile) {\n@@ -281,1 +286,1 @@\n-        DGifGetWord(GifFile, &GifFile->SHeight) == GIF_ERROR)\n+        DGifGetWord(GifFile, &GifFile->SHeight) == GIF_ERROR) {\n@@ -283,0 +288,1 @@\n+    }\n@@ -295,1 +301,1 @@\n-    if (Buf[0] & 0x80) {    \/* Do we have global color map? *\/\n+    if (Buf[0] & 0x80) { \/* Do we have global color map? *\/\n@@ -330,4 +336,2 @@\n-const char *\n-DGifGetGifVersion(GifFileType *GifFile)\n-{\n-    GifFilePrivateType *Private = (GifFilePrivateType *) GifFile->Private;\n+const char *DGifGetGifVersion(GifFileType *GifFile) {\n+    GifFilePrivateType *Private = (GifFilePrivateType *)GifFile->Private;\n@@ -335,1 +339,1 @@\n-    if (Private->gif89)\n+    if (Private->gif89) {\n@@ -337,1 +341,1 @@\n-    else\n+    } else {\n@@ -339,0 +343,1 @@\n+    }\n@@ -344,3 +349,1 @@\n-int\n-DGifGetRecordType(GifFileType *GifFile, GifRecordType* Type)\n-{\n+int DGifGetRecordType(GifFileType *GifFile, GifRecordType *Type) {\n@@ -362,1 +365,1 @@\n-    \/\/fprintf(stderr, \"### DGifGetRecordType: %02x\\n\", Buf);\n+    \/\/ fprintf(stderr, \"### DGifGetRecordType: %02x\\n\", Buf);\n@@ -364,13 +367,13 @@\n-      case DESCRIPTOR_INTRODUCER:\n-          *Type = IMAGE_DESC_RECORD_TYPE;\n-          break;\n-      case EXTENSION_INTRODUCER:\n-          *Type = EXTENSION_RECORD_TYPE;\n-          break;\n-      case TERMINATOR_INTRODUCER:\n-          *Type = TERMINATE_RECORD_TYPE;\n-          break;\n-      default:\n-          *Type = UNDEFINED_RECORD_TYPE;\n-          GifFile->Error = D_GIF_ERR_WRONG_RECORD;\n-          return GIF_ERROR;\n+    case DESCRIPTOR_INTRODUCER:\n+        *Type = IMAGE_DESC_RECORD_TYPE;\n+        break;\n+    case EXTENSION_INTRODUCER:\n+        *Type = EXTENSION_RECORD_TYPE;\n+        break;\n+    case TERMINATOR_INTRODUCER:\n+        *Type = TERMINATE_RECORD_TYPE;\n+        break;\n+    default:\n+        *Type = UNDEFINED_RECORD_TYPE;\n+        GifFile->Error = D_GIF_ERR_WRONG_RECORD;\n+        return GIF_ERROR;\n@@ -382,3 +385,1 @@\n-int\n-DGifGetImageHeader(GifFileType *GifFile)\n-{\n+int DGifGetImageHeader(GifFileType *GifFile) {\n@@ -398,1 +399,1 @@\n-        DGifGetWord(GifFile, &GifFile->Image.Height) == GIF_ERROR)\n+        DGifGetWord(GifFile, &GifFile->Image.Height) == GIF_ERROR) {\n@@ -400,0 +401,1 @@\n+    }\n@@ -418,1 +420,2 @@\n-        GifFile->Image.ColorMap = GifMakeMapObject(1 << BitsPerPixel, NULL);\n+        GifFile->Image.ColorMap =\n+            GifMakeMapObject(1 << BitsPerPixel, NULL);\n@@ -439,2 +442,2 @@\n-    Private->PixelCount = (long)GifFile->Image.Width *\n-       (long)GifFile->Image.Height;\n+    Private->PixelCount =\n+        (long)GifFile->Image.Width * (long)GifFile->Image.Height;\n@@ -450,3 +453,1 @@\n-int\n-DGifGetImageDesc(GifFileType *GifFile)\n-{\n+int DGifGetImageDesc(GifFileType *GifFile) {\n@@ -467,3 +468,3 @@\n-        SavedImage* new_saved_images =\n-            (SavedImage *)reallocarray(GifFile->SavedImages,\n-                            (GifFile->ImageCount + 1), sizeof(SavedImage));\n+        SavedImage *new_saved_images = (SavedImage *)reallocarray(\n+            GifFile->SavedImages, (GifFile->ImageCount + 1),\n+            sizeof(SavedImage));\n@@ -477,1 +478,1 @@\n-             (SavedImage *) malloc(sizeof(SavedImage))) == NULL) {\n+                 (SavedImage *)malloc(sizeof(SavedImage))) == NULL) {\n@@ -486,3 +487,3 @@\n-        sp->ImageDesc.ColorMap = GifMakeMapObject(\n-                                 GifFile->Image.ColorMap->ColorCount,\n-                                 GifFile->Image.ColorMap->Colors);\n+        sp->ImageDesc.ColorMap =\n+            GifMakeMapObject(GifFile->Image.ColorMap->ColorCount,\n+                             GifFile->Image.ColorMap->Colors);\n@@ -496,1 +497,1 @@\n-    sp->ExtensionBlocks = (ExtensionBlock *) NULL;\n+    sp->ExtensionBlocks = (ExtensionBlock *)NULL;\n@@ -506,3 +507,1 @@\n-int\n-DGifGetLine(GifFileType *GifFile, GifPixelType *Line, int LineLen)\n-{\n+int DGifGetLine(GifFileType *GifFile, GifPixelType *Line, int LineLen) {\n@@ -510,1 +509,1 @@\n-    GifFilePrivateType *Private = (GifFilePrivateType *) GifFile->Private;\n+    GifFilePrivateType *Private = (GifFilePrivateType *)GifFile->Private;\n@@ -518,1 +517,1 @@\n-    if (!LineLen)\n+    if (!LineLen) {\n@@ -520,0 +519,1 @@\n+    }\n@@ -528,3 +528,3 @@\n-            \/* We probably won't be called any more, so let's clean up\n-             * everything before we return: need to flush out all the\n-             * rest of image until an empty block (size 0)\n+            \/* We probably won't be called any more, so let's clean\n+             * up everything before we return: need to flush out all\n+             * the rest of image until an empty block (size 0)\n@@ -533,2 +533,3 @@\n-            do\n-                if (DGifGetCodeNext(GifFile, &Dummy) == GIF_ERROR)\n+            do {\n+                if (DGifGetCodeNext(GifFile, &Dummy) ==\n+                    GIF_ERROR) {\n@@ -536,1 +537,2 @@\n-            while (Dummy != NULL) ;\n+                }\n+            } while (Dummy != NULL);\n@@ -539,1 +541,1 @@\n-    } else\n+    } else {\n@@ -541,0 +543,1 @@\n+    }\n@@ -546,3 +549,1 @@\n-int\n-DGifGetPixel(GifFileType *GifFile, GifPixelType Pixel)\n-{\n+int DGifGetPixel(GifFileType *GifFile, GifPixelType Pixel) {\n@@ -550,1 +551,1 @@\n-    GifFilePrivateType *Private = (GifFilePrivateType *) GifFile->Private;\n+    GifFilePrivateType *Private = (GifFilePrivateType *)GifFile->Private;\n@@ -557,2 +558,1 @@\n-    if (--Private->PixelCount > 0xffff0000UL)\n-    {\n+    if (--Private->PixelCount > 0xffff0000UL) {\n@@ -565,3 +565,3 @@\n-            \/* We probably won't be called any more, so let's clean up\n-             * everything before we return: need to flush out all the\n-             * rest of image until an empty block (size 0)\n+            \/* We probably won't be called any more, so let's clean\n+             * up everything before we return: need to flush out all\n+             * the rest of image until an empty block (size 0)\n@@ -570,2 +570,3 @@\n-            do\n-                if (DGifGetCodeNext(GifFile, &Dummy) == GIF_ERROR)\n+            do {\n+                if (DGifGetCodeNext(GifFile, &Dummy) ==\n+                    GIF_ERROR) {\n@@ -573,1 +574,2 @@\n-            while (Dummy != NULL) ;\n+                }\n+            } while (Dummy != NULL);\n@@ -576,1 +578,1 @@\n-    } else\n+    } else {\n@@ -578,0 +580,1 @@\n+    }\n@@ -587,3 +590,2 @@\n-int\n-DGifGetExtension(GifFileType *GifFile, int *ExtCode, GifByteType **Extension)\n-{\n+int DGifGetExtension(GifFileType *GifFile, int *ExtCode,\n+                     GifByteType **Extension) {\n@@ -593,1 +595,1 @@\n-    \/\/fprintf(stderr, \"### -> DGifGetExtension:\\n\");\n+    \/\/ fprintf(stderr, \"### -> DGifGetExtension:\\n\");\n@@ -606,1 +608,2 @@\n-    \/\/fprintf(stderr, \"### <- DGifGetExtension: %02x, about to call next\\n\", Buf);\n+    \/\/ fprintf(stderr, \"### <- DGifGetExtension: %02x, about to call\n+    \/\/ next\\n\", Buf);\n@@ -616,3 +619,1 @@\n-int\n-DGifGetExtensionNext(GifFileType *GifFile, GifByteType ** Extension)\n-{\n+int DGifGetExtensionNext(GifFileType *GifFile, GifByteType **Extension) {\n@@ -622,1 +623,1 @@\n-    \/\/fprintf(stderr, \"### -> DGifGetExtensionNext\\n\");\n+    \/\/ fprintf(stderr, \"### -> DGifGetExtensionNext\\n\");\n@@ -627,1 +628,1 @@\n-    \/\/fprintf(stderr, \"### DGifGetExtensionNext sees %d\\n\", Buf);\n+    \/\/ fprintf(stderr, \"### DGifGetExtensionNext sees %d\\n\", Buf);\n@@ -630,3 +631,4 @@\n-        *Extension = Private->Buf;    \/* Use private unused buffer. *\/\n-        (*Extension)[0] = Buf;  \/* Pascal strings notation (pos. 0 is len.). *\/\n-        \/* coverity[tainted_data,check_return] *\/\n+        *Extension = Private->Buf; \/* Use private unused buffer. *\/\n+        (*Extension)[0] =\n+            Buf; \/* Pascal strings notation (pos. 0 is len.). *\/\n+                 \/* coverity[tainted_data,check_return] *\/\n@@ -637,1 +639,1 @@\n-    } else\n+    } else {\n@@ -639,1 +641,2 @@\n-    \/\/fprintf(stderr, \"### <- DGifGetExtensionNext: %p\\n\", Extension);\n+    }\n+    \/\/ fprintf(stderr, \"### <- DGifGetExtensionNext: %p\\n\", Extension);\n@@ -650,2 +653,1 @@\n-                       GraphicsControlBlock *GCB)\n-{\n+                       GraphicsControlBlock *GCB) {\n@@ -658,2 +660,3 @@\n-    GCB->DelayTime = UNSIGNED_LITTLE_ENDIAN(GifExtension[1], GifExtension[2]);\n-    if (GifExtension[0] & 0x01)\n+    GCB->DelayTime =\n+        UNSIGNED_LITTLE_ENDIAN(GifExtension[1], GifExtension[2]);\n+    if (GifExtension[0] & 0x01) {\n@@ -661,1 +664,1 @@\n-    else\n+    } else {\n@@ -663,0 +666,1 @@\n+    }\n@@ -671,3 +675,2 @@\n-int DGifSavedExtensionToGCB(GifFileType *GifFile,\n-                int ImageIndex, GraphicsControlBlock *GCB)\n-{\n+int DGifSavedExtensionToGCB(GifFileType *GifFile, int ImageIndex,\n+                            GraphicsControlBlock *GCB) {\n@@ -676,1 +679,1 @@\n-    if (ImageIndex < 0 || ImageIndex > GifFile->ImageCount - 1)\n+    if (ImageIndex < 0 || ImageIndex > GifFile->ImageCount - 1) {\n@@ -678,0 +681,1 @@\n+    }\n@@ -684,4 +688,8 @@\n-    for (i = 0; i < GifFile->SavedImages[ImageIndex].ExtensionBlockCount; i++) {\n-        ExtensionBlock *ep = &GifFile->SavedImages[ImageIndex].ExtensionBlocks[i];\n-        if (ep->Function == GRAPHICS_EXT_FUNC_CODE)\n-            return DGifExtensionToGCB(ep->ByteCount, ep->Bytes, GCB);\n+    for (i = 0; i < GifFile->SavedImages[ImageIndex].ExtensionBlockCount;\n+         i++) {\n+        ExtensionBlock *ep =\n+            &GifFile->SavedImages[ImageIndex].ExtensionBlocks[i];\n+        if (ep->Function == GRAPHICS_EXT_FUNC_CODE) {\n+            return DGifExtensionToGCB(ep->ByteCount, ep->Bytes,\n+                                      GCB);\n+        }\n@@ -696,3 +704,1 @@\n-int\n-DGifCloseFile(GifFileType *GifFile, int *ErrorCode)\n-{\n+int DGifCloseFile(GifFileType *GifFile, int *ErrorCode) {\n@@ -701,1 +707,1 @@\n-    if (GifFile == NULL || GifFile->Private == NULL)\n+    if (GifFile == NULL || GifFile->Private == NULL) {\n@@ -703,0 +709,1 @@\n+    }\n@@ -719,1 +726,2 @@\n-    GifFreeExtensions(&GifFile->ExtensionBlockCount, &GifFile->ExtensionBlocks);\n+    GifFreeExtensions(&GifFile->ExtensionBlockCount,\n+                      &GifFile->ExtensionBlocks);\n@@ -721,1 +729,1 @@\n-    Private = (GifFilePrivateType *) GifFile->Private;\n+    Private = (GifFilePrivateType *)GifFile->Private;\n@@ -725,1 +733,1 @@\n-        if (ErrorCode != NULL)\n+        if (ErrorCode != NULL) {\n@@ -727,0 +735,1 @@\n+        }\n@@ -733,1 +742,1 @@\n-        if (ErrorCode != NULL)\n+        if (ErrorCode != NULL) {\n@@ -735,0 +744,1 @@\n+        }\n@@ -742,1 +752,1 @@\n-    if (ErrorCode != NULL)\n+    if (ErrorCode != NULL) {\n@@ -744,0 +754,1 @@\n+    }\n@@ -750,3 +761,1 @@\n-static int\n-DGifGetWord(GifFileType *GifFile, GifWord *Word)\n-{\n+static int DGifGetWord(GifFileType *GifFile, GifWord *Word) {\n@@ -772,3 +781,1 @@\n-int\n-DGifGetCode(GifFileType *GifFile, int *CodeSize, GifByteType **CodeBlock)\n-{\n+int DGifGetCode(GifFileType *GifFile, int *CodeSize, GifByteType **CodeBlock) {\n@@ -793,3 +800,1 @@\n-int\n-DGifGetCodeNext(GifFileType *GifFile, GifByteType **CodeBlock)\n-{\n+int DGifGetCodeNext(GifFileType *GifFile, GifByteType **CodeBlock) {\n@@ -808,3 +813,4 @@\n-        *CodeBlock = Private->Buf;    \/* Use private unused buffer. *\/\n-        (*CodeBlock)[0] = Buf;  \/* Pascal strings notation (pos. 0 is len.). *\/\n-        \/* coverity[tainted_data] *\/\n+        *CodeBlock = Private->Buf; \/* Use private unused buffer. *\/\n+        (*CodeBlock)[0] =\n+            Buf; \/* Pascal strings notation (pos. 0 is len.). *\/\n+                 \/* coverity[tainted_data] *\/\n@@ -817,2 +823,3 @@\n-        Private->Buf[0] = 0;    \/* Make sure the buffer is empty! *\/\n-        Private->PixelCount = 0;    \/* And local info. indicate image read. *\/\n+        Private->Buf[0] = 0; \/* Make sure the buffer is empty! *\/\n+        Private->PixelCount =\n+            0; \/* And local info. indicate image read. *\/\n@@ -827,3 +834,1 @@\n-static int\n-DGifSetupDecompress(GifFileType *GifFile)\n-{\n+static int DGifSetupDecompress(GifFileType *GifFile) {\n@@ -836,2 +841,4 @@\n-    if (InternalRead(GifFile, &CodeSize, 1) < 1) {    \/* Read Code size from file. *\/\n-        return GIF_ERROR;    \/* Failed to read Code size. *\/\n+    if (InternalRead(GifFile, &CodeSize, 1) <\n+        1) { \/* Read Code size from file. *\/\n+        GifFile->Error = D_GIF_ERR_READ_FAILED;\n+        return GIF_ERROR; \/* Failed to read Code size. *\/\n@@ -843,2 +850,3 @@\n-        GifFile->Error = D_GIF_ERR_READ_FAILED;    \/* somewhat bogus error code *\/\n-        return GIF_ERROR;    \/* Failed to read Code size. *\/\n+        GifFile->Error =\n+            D_GIF_ERR_READ_FAILED; \/* somewhat bogus error code *\/\n+        return GIF_ERROR;          \/* Failed to read Code size. *\/\n@@ -847,1 +855,1 @@\n-    Private->Buf[0] = 0;    \/* Input Buffer empty. *\/\n+    Private->Buf[0] = 0; \/* Input Buffer empty. *\/\n@@ -852,3 +860,3 @@\n-    Private->RunningBits = BitsPerPixel + 1;    \/* Number of bits per code. *\/\n-    Private->MaxCode1 = 1 << Private->RunningBits;    \/* Max. code + 1. *\/\n-    Private->StackPtr = 0;    \/* No pixels on the pixel stack. *\/\n+    Private->RunningBits = BitsPerPixel + 1; \/* Number of bits per code. *\/\n+    Private->MaxCode1 = 1 << Private->RunningBits; \/* Max. code + 1. *\/\n+    Private->StackPtr = 0; \/* No pixels on the pixel stack. *\/\n@@ -856,1 +864,1 @@\n-    Private->CrntShiftState = 0;    \/* No information in CrntShiftDWord. *\/\n+    Private->CrntShiftState = 0; \/* No information in CrntShiftDWord. *\/\n@@ -860,1 +868,1 @@\n-    for (i = 0; i <= LZ_MAX_CODE; i++)\n+    for (i = 0; i <= LZ_MAX_CODE; i++) {\n@@ -862,0 +870,1 @@\n+    }\n@@ -872,3 +881,2 @@\n-static int\n-DGifDecompressLine(GifFileType *GifFile, GifPixelType *Line, int LineLen)\n-{\n+static int DGifDecompressLine(GifFileType *GifFile, GifPixelType *Line,\n+                              int LineLen) {\n@@ -879,1 +887,1 @@\n-    GifFilePrivateType *Private = (GifFilePrivateType *) GifFile->Private;\n+    GifFilePrivateType *Private = (GifFilePrivateType *)GifFile->Private;\n@@ -894,2 +902,3 @@\n-        \/* Let pop the stack off before continueing to read the GIF file: *\/\n-        while (StackPtr != 0 && i < LineLen)\n+        \/* Let pop the stack off before continueing to read the GIF\n+         * file: *\/\n+        while (StackPtr != 0 && i < LineLen) {\n@@ -897,0 +906,1 @@\n+        }\n@@ -899,2 +909,2 @@\n-    while (i < LineLen) {    \/* Decode LineLen items. *\/\n-        if (DGifDecompressInput(GifFile, &CrntCode) == GIF_ERROR)\n+    while (i < LineLen) { \/* Decode LineLen items. *\/\n+        if (DGifDecompressInput(GifFile, &CrntCode) == GIF_ERROR) {\n@@ -902,0 +912,1 @@\n+        }\n@@ -904,3 +915,4 @@\n-            \/* Note however that usually we will not be here as we will stop\n-             * decoding as soon as we got all the pixel, or EOF code will\n-             * not be read at all, and DGifGetLine\/Pixel clean everything.  *\/\n+            \/* Note however that usually we will not be here as we\n+             * will stop decoding as soon as we got all the pixel,\n+             * or EOF code will not be read at all, and\n+             * DGifGetLine\/Pixel clean everything.  *\/\n@@ -911,1 +923,1 @@\n-            for (j = 0; j <= LZ_MAX_CODE; j++)\n+            for (j = 0; j <= LZ_MAX_CODE; j++) {\n@@ -913,0 +925,1 @@\n+            }\n@@ -918,3 +931,3 @@\n-            \/* Its regular code - if in pixel range simply add it to output\n-             * stream, otherwise trace to codes linked list until the prefix\n-             * is in pixel range: *\/\n+            \/* Its regular code - if in pixel range simply add it to\n+             * output stream, otherwise trace to codes linked list\n+             * until the prefix is in pixel range: *\/\n@@ -922,1 +935,2 @@\n-                \/* This is simple - its pixel scalar, so add it to output: *\/\n+                \/* This is simple - its pixel scalar, so add it\n+                 * to output: *\/\n@@ -925,4 +939,5 @@\n-                \/* Its a code to needed to be traced: trace the linked list\n-                 * until the prefix is a pixel, while pushing the suffix\n-                 * pixels on our stack. If we done, pop the stack in reverse\n-                 * (thats what stack is good for!) order to output.  *\/\n+                \/* Its a code to needed to be traced: trace the\n+                 * linked list until the prefix is a pixel,\n+                 * while pushing the suffix pixels on our stack.\n+                 * If we done, pop the stack in reverse (thats\n+                 * what stack is good for!) order to output.  *\/\n@@ -932,9 +947,13 @@\n-                    \/* Only allowed if CrntCode is exactly the running code:\n-                     * In that case CrntCode = XXXCode, CrntCode or the\n-                     * prefix code is last code and the suffix char is\n-                     * exactly the prefix of last code! *\/\n-                    if (CrntCode == Private->RunningCode - 2) {\n-                        Suffix[Private->RunningCode - 2] =\n-                           Stack[StackPtr++] = DGifGetPrefixChar(Prefix,\n-                                                                 LastCode,\n-                                                                 ClearCode);\n+                    \/* Only allowed if CrntCode is exactly\n+                     * the running code: In that case\n+                     * CrntCode = XXXCode, CrntCode or the\n+                     * prefix code is last code and the\n+                     * suffix char is exactly the prefix of\n+                     * last code! *\/\n+                    if (CrntCode ==\n+                        Private->RunningCode - 2) {\n+                        Suffix[Private->RunningCode -\n+                               2] = Stack[StackPtr++] =\n+                            DGifGetPrefixChar(\n+                                Prefix, LastCode,\n+                                ClearCode);\n@@ -942,4 +961,5 @@\n-                        Suffix[Private->RunningCode - 2] =\n-                           Stack[StackPtr++] = DGifGetPrefixChar(Prefix,\n-                                                                 CrntCode,\n-                                                                 ClearCode);\n+                        Suffix[Private->RunningCode -\n+                               2] = Stack[StackPtr++] =\n+                            DGifGetPrefixChar(\n+                                Prefix, CrntCode,\n+                                ClearCode);\n@@ -947,1 +967,1 @@\n-                } else\n+                } else {\n@@ -949,0 +969,1 @@\n+                }\n@@ -950,4 +971,5 @@\n-                \/* Now (if image is O.K.) we should not get a NO_SUCH_CODE\n-                 * during the trace. As we might loop forever, in case of\n-                 * defective image, we use StackPtr as loop counter and stop\n-                 * before overflowing Stack[]. *\/\n+                \/* Now (if image is O.K.) we should not get a\n+                 * NO_SUCH_CODE during the trace. As we might\n+                 * loop forever, in case of defective image, we\n+                 * use StackPtr as loop counter and stop before\n+                 * overflowing Stack[]. *\/\n@@ -955,1 +977,2 @@\n-                       CrntPrefix > ClearCode && CrntPrefix <= LZ_MAX_CODE) {\n+                       CrntPrefix > ClearCode &&\n+                       CrntPrefix <= LZ_MAX_CODE) {\n@@ -959,1 +982,2 @@\n-                if (StackPtr >= LZ_MAX_CODE || CrntPrefix > LZ_MAX_CODE) {\n+                if (StackPtr >= LZ_MAX_CODE ||\n+                    CrntPrefix > LZ_MAX_CODE) {\n@@ -967,1 +991,1 @@\n-                while (StackPtr != 0 && i < LineLen)\n+                while (StackPtr != 0 && i < LineLen) {\n@@ -969,0 +993,1 @@\n+                }\n@@ -970,1 +995,3 @@\n-            if (LastCode != NO_SUCH_CODE && Private->RunningCode - 2 < (LZ_MAX_CODE+1) && Prefix[Private->RunningCode - 2] == NO_SUCH_CODE) {\n+            if (LastCode != NO_SUCH_CODE &&\n+                Private->RunningCode - 2 < (LZ_MAX_CODE + 1) &&\n+                Prefix[Private->RunningCode - 2] == NO_SUCH_CODE) {\n@@ -974,4 +1001,6 @@\n-                    \/* Only allowed if CrntCode is exactly the running code:\n-                     * In that case CrntCode = XXXCode, CrntCode or the\n-                     * prefix code is last code and the suffix char is\n-                     * exactly the prefix of last code! *\/\n+                    \/* Only allowed if CrntCode is exactly\n+                     * the running code: In that case\n+                     * CrntCode = XXXCode, CrntCode or the\n+                     * prefix code is last code and the\n+                     * suffix char is exactly the prefix of\n+                     * last code! *\/\n@@ -979,1 +1008,2 @@\n-                       DGifGetPrefixChar(Prefix, LastCode, ClearCode);\n+                        DGifGetPrefixChar(Prefix, LastCode,\n+                                          ClearCode);\n@@ -982,1 +1012,2 @@\n-                       DGifGetPrefixChar(Prefix, CrntCode, ClearCode);\n+                        DGifGetPrefixChar(Prefix, CrntCode,\n+                                          ClearCode);\n@@ -1001,3 +1032,2 @@\n-static int\n-DGifGetPrefixChar(GifPrefixType *Prefix, int Code, int ClearCode)\n-{\n+static int DGifGetPrefixChar(const GifPrefixType *Prefix, int Code,\n+                             int ClearCode) {\n@@ -1019,3 +1049,1 @@\n-int\n-DGifGetLZCodes(GifFileType *GifFile, int *Code)\n-{\n+int DGifGetLZCodes(GifFileType *GifFile, int *Code) {\n@@ -1031,1 +1059,1 @@\n-    if (DGifDecompressInput(GifFile, Code) == GIF_ERROR)\n+    if (DGifDecompressInput(GifFile, Code) == GIF_ERROR) {\n@@ -1033,0 +1061,1 @@\n+    }\n@@ -1035,1 +1064,2 @@\n-        \/* Skip rest of codes (hopefully only NULL terminating block): *\/\n+        \/* Skip rest of codes (hopefully only NULL terminating block):\n+         *\/\n@@ -1037,1 +1067,1 @@\n-            if (DGifGetCodeNext(GifFile, &CodeBlock) == GIF_ERROR)\n+            if (DGifGetCodeNext(GifFile, &CodeBlock) == GIF_ERROR) {\n@@ -1039,1 +1069,2 @@\n-        } while (CodeBlock != NULL) ;\n+            }\n+        } while (CodeBlock != NULL);\n@@ -1058,3 +1089,1 @@\n-static int\n-DGifDecompressInput(GifFileType *GifFile, int *Code)\n-{\n+static int DGifDecompressInput(GifFileType *GifFile, int *Code) {\n@@ -1062,5 +1091,2 @@\n-        0x0000, 0x0001, 0x0003, 0x0007,\n-        0x000f, 0x001f, 0x003f, 0x007f,\n-        0x00ff, 0x01ff, 0x03ff, 0x07ff,\n-        0x0fff\n-    };\n+        0x0000, 0x0001, 0x0003, 0x0007, 0x000f, 0x001f, 0x003f,\n+        0x007f, 0x00ff, 0x01ff, 0x03ff, 0x07ff, 0x0fff};\n@@ -1080,1 +1106,2 @@\n-        if (DGifBufferedInput(GifFile, Private->Buf, &NextByte) == GIF_ERROR) {\n+        if (DGifBufferedInput(GifFile, Private->Buf, &NextByte) ==\n+            GIF_ERROR) {\n@@ -1083,2 +1110,2 @@\n-        Private->CrntShiftDWord |=\n-            ((unsigned long)NextByte) << Private->CrntShiftState;\n+        Private->CrntShiftDWord |= ((unsigned long)NextByte)\n+                                   << Private->CrntShiftState;\n@@ -1112,3 +1139,2 @@\n-static int\n-DGifBufferedInput(GifFileType *GifFile, GifByteType *Buf, GifByteType *NextByte)\n-{\n+static int DGifBufferedInput(GifFileType *GifFile, GifByteType *Buf,\n+                             GifByteType *NextByte) {\n@@ -1123,2 +1149,2 @@\n-         * says the LZW termination code should come first.  Therefore we\n-         * shouldn't be inside this routine at that point.\n+         * says the LZW termination code should come first.  Therefore\n+         * we shouldn't be inside this routine at that point.\n@@ -1135,1 +1161,1 @@\n-        Buf[1] = 2;    \/* We use now the second place as last char read! *\/\n+        Buf[1] = 2; \/* We use now the second place as last char read! *\/\n@@ -1145,0 +1171,20 @@\n+\/******************************************************************************\n+ This routine is called in case of error during parsing image. We need to\n+ decrease image counter and reallocate memory for saved images. Not decreasing\n+ ImageCount may lead to null pointer dereference, because the last element in\n+ SavedImages may point to the spoilt image and null pointer buffers.\n+*******************************************************************************\/\n+void DGifDecreaseImageCounter(GifFileType *GifFile) {\n+    GifFile->ImageCount--;\n+    if (GifFile->SavedImages[GifFile->ImageCount].RasterBits != NULL) {\n+        free(GifFile->SavedImages[GifFile->ImageCount].RasterBits);\n+    }\n+\n+    \/\/ Realloc array according to the new image counter.\n+    SavedImage *correct_saved_images = (SavedImage *)reallocarray(\n+        GifFile->SavedImages, GifFile->ImageCount, sizeof(SavedImage));\n+    if (correct_saved_images != NULL) {\n+        GifFile->SavedImages = correct_saved_images;\n+    }\n+}\n+\n@@ -1150,3 +1196,1 @@\n-int\n-DGifSlurp(GifFileType *GifFile)\n-{\n+int DGifSlurp(GifFileType *GifFile) {\n@@ -1163,1 +1207,1 @@\n-        if (DGifGetRecordType(GifFile, &RecordType) == GIF_ERROR)\n+        if (DGifGetRecordType(GifFile, &RecordType) == GIF_ERROR) {\n@@ -1165,0 +1209,1 @@\n+        }\n@@ -1167,86 +1212,112 @@\n-          case IMAGE_DESC_RECORD_TYPE:\n-              if (DGifGetImageDesc(GifFile) == GIF_ERROR)\n-                  return (GIF_ERROR);\n-\n-              sp = &GifFile->SavedImages[GifFile->ImageCount - 1];\n-              \/* Allocate memory for the image *\/\n-              if (sp->ImageDesc.Width <= 0 || sp->ImageDesc.Height <= 0 ||\n-                      sp->ImageDesc.Width > (INT_MAX \/ sp->ImageDesc.Height)) {\n-                  return GIF_ERROR;\n-              }\n-              ImageSize = sp->ImageDesc.Width * sp->ImageDesc.Height;\n-\n-              if (ImageSize > (SIZE_MAX \/ sizeof(GifPixelType))) {\n-                  return GIF_ERROR;\n-              }\n-              sp->RasterBits = (unsigned char *)reallocarray(NULL, ImageSize,\n-                      sizeof(GifPixelType));\n-\n-              if (sp->RasterBits == NULL) {\n-                  return GIF_ERROR;\n-              }\n-\n-              if (sp->ImageDesc.Interlace) {\n-                  int i, j;\n-                   \/*\n-                    * The way an interlaced image should be read -\n-                    * offsets and jumps...\n-                    *\/\n-                  int InterlacedOffset[] = { 0, 4, 2, 1 };\n-                  int InterlacedJumps[] = { 8, 8, 4, 2 };\n-                  \/* Need to perform 4 passes on the image *\/\n-                  for (i = 0; i < 4; i++)\n-                      for (j = InterlacedOffset[i];\n-                       j < sp->ImageDesc.Height;\n-                       j += InterlacedJumps[i]) {\n-                      if (DGifGetLine(GifFile,\n-                              sp->RasterBits+j*sp->ImageDesc.Width,\n-                              sp->ImageDesc.Width) == GIF_ERROR)\n-                          return GIF_ERROR;\n-                      }\n-              }\n-              else {\n-                  if (DGifGetLine(GifFile,sp->RasterBits,ImageSize)==GIF_ERROR)\n-                      return (GIF_ERROR);\n-              }\n-\n-              if (GifFile->ExtensionBlocks) {\n-                  sp->ExtensionBlocks = GifFile->ExtensionBlocks;\n-                  sp->ExtensionBlockCount = GifFile->ExtensionBlockCount;\n-\n-                  GifFile->ExtensionBlocks = NULL;\n-                  GifFile->ExtensionBlockCount = 0;\n-              }\n-              break;\n-\n-          case EXTENSION_RECORD_TYPE:\n-              if (DGifGetExtension(GifFile,&ExtFunction,&ExtData) == GIF_ERROR)\n-                  return (GIF_ERROR);\n-              \/* Create an extension block with our data *\/\n-              if (ExtData != NULL) {\n-                  if (GifAddExtensionBlock(&GifFile->ExtensionBlockCount,\n-                               &GifFile->ExtensionBlocks,\n-                               ExtFunction, ExtData[0], &ExtData[1])\n-                      == GIF_ERROR)\n-                      return (GIF_ERROR);\n-              }\n-              for (;;) {\n-                  if (DGifGetExtensionNext(GifFile, &ExtData) == GIF_ERROR)\n-                      return (GIF_ERROR);\n-                  if (ExtData == NULL)\n-                      break;\n-                  \/* Continue the extension block *\/\n-                  if (ExtData != NULL)\n-                      if (GifAddExtensionBlock(&GifFile->ExtensionBlockCount,\n-                                   &GifFile->ExtensionBlocks,\n-                                   CONTINUE_EXT_FUNC_CODE,\n-                                   ExtData[0], &ExtData[1]) == GIF_ERROR)\n-                              return (GIF_ERROR);\n-              }\n-              break;\n-\n-          case TERMINATE_RECORD_TYPE:\n-              break;\n-\n-          default:    \/* Should be trapped by DGifGetRecordType *\/\n-              break;\n+        case IMAGE_DESC_RECORD_TYPE:\n+            if (DGifGetImageDesc(GifFile) == GIF_ERROR) {\n+                return (GIF_ERROR);\n+            }\n+\n+            sp = &GifFile->SavedImages[GifFile->ImageCount - 1];\n+            \/* Allocate memory for the image *\/\n+            if (sp->ImageDesc.Width <= 0 ||\n+                sp->ImageDesc.Height <= 0 ||\n+                sp->ImageDesc.Width >\n+                    (INT_MAX \/ sp->ImageDesc.Height)) {\n+                DGifDecreaseImageCounter(GifFile);\n+                return GIF_ERROR;\n+            }\n+            ImageSize = sp->ImageDesc.Width * sp->ImageDesc.Height;\n+\n+            if (ImageSize > (SIZE_MAX \/ sizeof(GifPixelType))) {\n+                DGifDecreaseImageCounter(GifFile);\n+                return GIF_ERROR;\n+            }\n+            sp->RasterBits = (unsigned char *)reallocarray(\n+                NULL, ImageSize, sizeof(GifPixelType));\n+\n+            if (sp->RasterBits == NULL) {\n+                DGifDecreaseImageCounter(GifFile);\n+                return GIF_ERROR;\n+            }\n+\n+            if (sp->ImageDesc.Interlace) {\n+                int i, j;\n+                \/*\n+                 * The way an interlaced image should be read -\n+                 * offsets and jumps...\n+                 *\/\n+                static const int InterlacedOffset[] = {0, 4, 2,\n+                                                       1};\n+                static const int InterlacedJumps[] = {8, 8, 4,\n+                                                      2};\n+                \/* Need to perform 4 passes on the image *\/\n+                for (i = 0; i < 4; i++) {\n+                    for (j = InterlacedOffset[i];\n+                         j < sp->ImageDesc.Height;\n+                         j += InterlacedJumps[i]) {\n+                        if (DGifGetLine(\n+                                GifFile,\n+                                sp->RasterBits +\n+                                    j * sp->ImageDesc\n+                                            .Width,\n+                                sp->ImageDesc.Width) ==\n+                            GIF_ERROR) {\n+                            DGifDecreaseImageCounter(\n+                                GifFile);\n+                            return GIF_ERROR;\n+                        }\n+                    }\n+                }\n+            } else {\n+                if (DGifGetLine(GifFile, sp->RasterBits,\n+                                ImageSize) == GIF_ERROR) {\n+                    DGifDecreaseImageCounter(GifFile);\n+                    return GIF_ERROR;\n+                }\n+            }\n+\n+            if (GifFile->ExtensionBlocks) {\n+                sp->ExtensionBlocks = GifFile->ExtensionBlocks;\n+                sp->ExtensionBlockCount =\n+                    GifFile->ExtensionBlockCount;\n+\n+                GifFile->ExtensionBlocks = NULL;\n+                GifFile->ExtensionBlockCount = 0;\n+            }\n+            break;\n+\n+        case EXTENSION_RECORD_TYPE:\n+            if (DGifGetExtension(GifFile, &ExtFunction, &ExtData) ==\n+                GIF_ERROR) {\n+                return (GIF_ERROR);\n+            }\n+            \/* Create an extension block with our data *\/\n+            if (ExtData != NULL) {\n+                if (GifAddExtensionBlock(\n+                        &GifFile->ExtensionBlockCount,\n+                        &GifFile->ExtensionBlocks, ExtFunction,\n+                        ExtData[0], &ExtData[1]) == GIF_ERROR) {\n+                    return (GIF_ERROR);\n+                }\n+            }\n+            for (;;) {\n+                if (DGifGetExtensionNext(GifFile, &ExtData) ==\n+                    GIF_ERROR) {\n+                    return (GIF_ERROR);\n+                }\n+                if (ExtData == NULL) {\n+                    break;\n+                }\n+                \/* Continue the extension block *\/\n+                if (GifAddExtensionBlock(\n+                        &GifFile->ExtensionBlockCount,\n+                        &GifFile->ExtensionBlocks,\n+                        CONTINUE_EXT_FUNC_CODE, ExtData[0],\n+                        &ExtData[1]) == GIF_ERROR) {\n+                    return (GIF_ERROR);\n+                }\n+            }\n+            break;\n+\n+        case TERMINATE_RECORD_TYPE:\n+            break;\n+\n+        default: \/* Should be trapped by DGifGetRecordType *\/\n+            break;\n@@ -1259,1 +1330,1 @@\n-        return(GIF_ERROR);\n+        return (GIF_ERROR);\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/giflib\/dgif_lib.c","additions":413,"deletions":342,"binary":false,"changes":755,"status":"modified"},{"patch":"@@ -41,3 +41,1 @@\n-const char *\n-GifErrorString(int ErrorCode)\n-{\n+const char *GifErrorString(int ErrorCode) {\n@@ -47,1 +45,1 @@\n-      case E_GIF_ERR_OPEN_FAILED:\n+    case E_GIF_ERR_OPEN_FAILED:\n@@ -50,1 +48,1 @@\n-      case E_GIF_ERR_WRITE_FAILED:\n+    case E_GIF_ERR_WRITE_FAILED:\n@@ -53,1 +51,1 @@\n-      case E_GIF_ERR_HAS_SCRN_DSCR:\n+    case E_GIF_ERR_HAS_SCRN_DSCR:\n@@ -56,1 +54,1 @@\n-      case E_GIF_ERR_HAS_IMAG_DSCR:\n+    case E_GIF_ERR_HAS_IMAG_DSCR:\n@@ -59,1 +57,1 @@\n-      case E_GIF_ERR_NO_COLOR_MAP:\n+    case E_GIF_ERR_NO_COLOR_MAP:\n@@ -62,1 +60,1 @@\n-      case E_GIF_ERR_DATA_TOO_BIG:\n+    case E_GIF_ERR_DATA_TOO_BIG:\n@@ -65,1 +63,1 @@\n-      case E_GIF_ERR_NOT_ENOUGH_MEM:\n+    case E_GIF_ERR_NOT_ENOUGH_MEM:\n@@ -68,1 +66,1 @@\n-      case E_GIF_ERR_DISK_IS_FULL:\n+    case E_GIF_ERR_DISK_IS_FULL:\n@@ -71,1 +69,1 @@\n-      case E_GIF_ERR_CLOSE_FAILED:\n+    case E_GIF_ERR_CLOSE_FAILED:\n@@ -74,1 +72,1 @@\n-      case E_GIF_ERR_NOT_WRITEABLE:\n+    case E_GIF_ERR_NOT_WRITEABLE:\n@@ -77,1 +75,1 @@\n-      case D_GIF_ERR_OPEN_FAILED:\n+    case D_GIF_ERR_OPEN_FAILED:\n@@ -80,1 +78,1 @@\n-      case D_GIF_ERR_READ_FAILED:\n+    case D_GIF_ERR_READ_FAILED:\n@@ -83,1 +81,1 @@\n-      case D_GIF_ERR_NOT_GIF_FILE:\n+    case D_GIF_ERR_NOT_GIF_FILE:\n@@ -86,1 +84,1 @@\n-      case D_GIF_ERR_NO_SCRN_DSCR:\n+    case D_GIF_ERR_NO_SCRN_DSCR:\n@@ -89,1 +87,1 @@\n-      case D_GIF_ERR_NO_IMAG_DSCR:\n+    case D_GIF_ERR_NO_IMAG_DSCR:\n@@ -92,1 +90,1 @@\n-      case D_GIF_ERR_NO_COLOR_MAP:\n+    case D_GIF_ERR_NO_COLOR_MAP:\n@@ -95,1 +93,1 @@\n-      case D_GIF_ERR_WRONG_RECORD:\n+    case D_GIF_ERR_WRONG_RECORD:\n@@ -98,1 +96,1 @@\n-      case D_GIF_ERR_DATA_TOO_BIG:\n+    case D_GIF_ERR_DATA_TOO_BIG:\n@@ -101,1 +99,1 @@\n-      case D_GIF_ERR_NOT_ENOUGH_MEM:\n+    case D_GIF_ERR_NOT_ENOUGH_MEM:\n@@ -104,1 +102,1 @@\n-      case D_GIF_ERR_CLOSE_FAILED:\n+    case D_GIF_ERR_CLOSE_FAILED:\n@@ -107,1 +105,1 @@\n-      case D_GIF_ERR_NOT_READABLE:\n+    case D_GIF_ERR_NOT_READABLE:\n@@ -110,1 +108,1 @@\n-      case D_GIF_ERR_IMAGE_DEFECT:\n+    case D_GIF_ERR_IMAGE_DEFECT:\n@@ -113,1 +111,1 @@\n-      case D_GIF_ERR_EOF_TOO_SOON:\n+    case D_GIF_ERR_EOF_TOO_SOON:\n@@ -116,1 +114,1 @@\n-      default:\n+    default:\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/giflib\/gif_err.c","additions":25,"deletions":27,"binary":false,"changes":52,"status":"modified"},{"patch":"@@ -36,1 +36,0 @@\n-\/** Begin JDK modifications to support building on Windows **\/\n@@ -39,2 +38,1 @@\n-#endif\n-\/** End JDK modifications to support building on Windows **\/\n+#endif \/* _WIN32 *\/\n@@ -43,5 +41,5 @@\n-#define HT_SIZE         8192    \/* 12bits = 4096 or twice as big! *\/\n-#define HT_KEY_MASK     0x1FFF  \/* 13bits keys *\/\n-#define HT_KEY_NUM_BITS 13      \/* 13bits keys *\/\n-#define HT_MAX_KEY      8191    \/* 13bits - 1, maximal code possible *\/\n-#define HT_MAX_CODE     4095    \/* Biggest code possible in 12 bits. *\/\n+#define HT_SIZE 8192       \/* 12bits = 4096 or twice as big! *\/\n+#define HT_KEY_MASK 0x1FFF \/* 13bits keys *\/\n+#define HT_KEY_NUM_BITS 13 \/* 13bits keys *\/\n+#define HT_MAX_KEY 8191    \/* 13bits - 1, maximal code possible *\/\n+#define HT_MAX_CODE 4095   \/* Biggest code possible in 12 bits. *\/\n@@ -51,1 +49,1 @@\n-\/* 2. The key is 12 bits Prefix code + 8 bit new char or 20 bits.           *\/\n+\/* 2. The key is 12 bits Prefix code + 8 bit new char or 20 bits.        *\/\n@@ -53,4 +51,4 @@\n-#define HT_GET_KEY(l)    (l >> 12)\n-#define HT_GET_CODE(l)   (l & 0x0FFF)\n-#define HT_PUT_KEY(l)    (l << 12)\n-#define HT_PUT_CODE(l)   (l & 0x0FFF)\n+#define HT_GET_KEY(l) (l >> 12)\n+#define HT_GET_CODE(l) (l & 0x0FFF)\n+#define HT_PUT_KEY(l) (l << 12)\n+#define HT_PUT_CODE(l) (l & 0x0FFF)\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/giflib\/gif_hash.h","additions":11,"deletions":13,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -42,1 +42,1 @@\n-#define GIFLIB_RELEASE 1\n+#define GIFLIB_RELEASE 2\n@@ -44,2 +44,2 @@\n-#define GIF_ERROR   0\n-#define GIF_OK      1\n+#define GIF_ERROR 0\n+#define GIF_OK 1\n@@ -47,0 +47,1 @@\n+#include <stdbool.h>\n@@ -48,11 +49,2 @@\n-\/** Begin JDK modifications to support building using old compilers**\/\n-\/\/#include <stdbool.h>\n-#ifdef bool\n-#undef bool\n-#endif\n-typedef int bool;\n-#define false 0\n-#define true 1\n-\/** End JDK modifications to support building using old compilers**\/\n-\n-#define GIF_STAMP \"GIFVER\"          \/* First chars in file - GIF stamp.  *\/\n+\n+#define GIF_STAMP \"GIFVER\" \/* First chars in file - GIF stamp.  *\/\n@@ -60,3 +52,3 @@\n-#define GIF_VERSION_POS 3           \/* Version first character in stamp. *\/\n-#define GIF87_STAMP \"GIF87a\"        \/* First chars in file - GIF stamp.  *\/\n-#define GIF89_STAMP \"GIF89a\"        \/* First chars in file - GIF stamp.  *\/\n+#define GIF_VERSION_POS 3    \/* Version first character in stamp. *\/\n+#define GIF87_STAMP \"GIF87a\" \/* First chars in file - GIF stamp.  *\/\n+#define GIF89_STAMP \"GIF89a\" \/* First chars in file - GIF stamp.  *\/\n@@ -78,1 +70,1 @@\n-    GifColorType *Colors;    \/* on malloc(3) heap *\/\n+    GifColorType *Colors; \/* on malloc(3) heap *\/\n@@ -82,3 +74,3 @@\n-    GifWord Left, Top, Width, Height;   \/* Current image dimensions. *\/\n-    bool Interlace;                     \/* Sequential\/Interlaced lines. *\/\n-    ColorMapObject *ColorMap;           \/* The local color map *\/\n+    GifWord Left, Top, Width, Height; \/* Current image dimensions. *\/\n+    bool Interlace;                   \/* Sequential\/Interlaced lines. *\/\n+    ColorMapObject *ColorMap;         \/* The local color map *\/\n@@ -89,7 +81,7 @@\n-    GifByteType *Bytes; \/* on malloc(3) heap *\/\n-    int Function;       \/* The block function code *\/\n-#define CONTINUE_EXT_FUNC_CODE    0x00    \/* continuation subblock *\/\n-#define COMMENT_EXT_FUNC_CODE     0xfe    \/* comment *\/\n-#define GRAPHICS_EXT_FUNC_CODE    0xf9    \/* graphics control (GIF89) *\/\n-#define PLAINTEXT_EXT_FUNC_CODE   0x01    \/* plaintext *\/\n-#define APPLICATION_EXT_FUNC_CODE 0xff    \/* application block (GIF89) *\/\n+    GifByteType *Bytes;            \/* on malloc(3) heap *\/\n+    int Function;                  \/* The block function code *\/\n+#define CONTINUE_EXT_FUNC_CODE 0x00    \/* continuation subblock *\/\n+#define COMMENT_EXT_FUNC_CODE 0xfe     \/* comment *\/\n+#define GRAPHICS_EXT_FUNC_CODE 0xf9    \/* graphics control (GIF89) *\/\n+#define PLAINTEXT_EXT_FUNC_CODE 0x01   \/* plaintext *\/\n+#define APPLICATION_EXT_FUNC_CODE 0xff \/* application block (GIF89) *\/\n@@ -106,9 +98,9 @@\n-    GifWord SWidth, SHeight;         \/* Size of virtual canvas *\/\n-    GifWord SColorResolution;        \/* How many colors can we generate? *\/\n-    GifWord SBackGroundColor;        \/* Background color for virtual canvas *\/\n-    GifByteType AspectByte;          \/* Used to compute pixel aspect ratio *\/\n-    ColorMapObject *SColorMap;       \/* Global colormap, NULL if nonexistent. *\/\n-    int ImageCount;                  \/* Number of current image (both APIs) *\/\n-    GifImageDesc Image;              \/* Current image (low-level API) *\/\n-    SavedImage *SavedImages;         \/* Image sequence (high-level API) *\/\n-    int ExtensionBlockCount;         \/* Count extensions past last image *\/\n+    GifWord SWidth, SHeight;   \/* Size of virtual canvas *\/\n+    GifWord SColorResolution;  \/* How many colors can we generate? *\/\n+    GifWord SBackGroundColor;  \/* Background color for virtual canvas *\/\n+    GifByteType AspectByte;    \/* Used to compute pixel aspect ratio *\/\n+    ColorMapObject *SColorMap; \/* Global colormap, NULL if nonexistent. *\/\n+    int ImageCount;            \/* Number of current image (both APIs) *\/\n+    GifImageDesc Image;        \/* Current image (low-level API) *\/\n+    SavedImage *SavedImages;   \/* Image sequence (high-level API) *\/\n+    int ExtensionBlockCount;   \/* Count extensions past last image *\/\n@@ -121,1 +113,1 @@\n-#define GIF_ASPECT_RATIO(n)    ((n)+15.0\/64.0)\n+#define GIF_ASPECT_RATIO(n) ((n) + 15.0 \/ 64.0)\n@@ -132,1 +124,1 @@\n-typedef int (*InputFunc) (GifFileType *, GifByteType *, int);\n+typedef int (*InputFunc)(GifFileType *, GifByteType *, int);\n@@ -137,1 +129,1 @@\n-typedef int (*OutputFunc) (GifFileType *, const GifByteType *, int);\n+typedef int (*OutputFunc)(GifFileType *, const GifByteType *, int);\n@@ -145,8 +137,8 @@\n-#define DISPOSAL_UNSPECIFIED      0       \/* No disposal specified. *\/\n-#define DISPOSE_DO_NOT            1       \/* Leave image in place *\/\n-#define DISPOSE_BACKGROUND        2       \/* Set area too background color *\/\n-#define DISPOSE_PREVIOUS          3       \/* Restore to previous content *\/\n-    bool UserInputFlag;      \/* User confirmation required before disposal *\/\n-    int DelayTime;           \/* pre-display delay in 0.01sec units *\/\n-    int TransparentColor;    \/* Palette index for transparency, -1 if none *\/\n-#define NO_TRANSPARENT_COLOR    -1\n+#define DISPOSAL_UNSPECIFIED 0 \/* No disposal specified. *\/\n+#define DISPOSE_DO_NOT 1       \/* Leave image in place *\/\n+#define DISPOSE_BACKGROUND 2   \/* Set area too background color *\/\n+#define DISPOSE_PREVIOUS 3     \/* Restore to previous content *\/\n+    bool UserInputFlag;    \/* User confirmation required before disposal *\/\n+    int DelayTime;         \/* pre-display delay in 0.01sec units *\/\n+    int TransparentColor;  \/* Palette index for transparency, -1 if none *\/\n+#define NO_TRANSPARENT_COLOR -1\n@@ -164,1 +156,1 @@\n-int EGifSpew(GifFileType * GifFile);\n+int EGifSpew(GifFileType *GifFile);\n@@ -168,7 +160,7 @@\n-#define E_GIF_SUCCEEDED          0\n-#define E_GIF_ERR_OPEN_FAILED    1    \/* And EGif possible errors. *\/\n-#define E_GIF_ERR_WRITE_FAILED   2\n-#define E_GIF_ERR_HAS_SCRN_DSCR  3\n-#define E_GIF_ERR_HAS_IMAG_DSCR  4\n-#define E_GIF_ERR_NO_COLOR_MAP   5\n-#define E_GIF_ERR_DATA_TOO_BIG   6\n+#define E_GIF_SUCCEEDED 0\n+#define E_GIF_ERR_OPEN_FAILED 1 \/* And EGif possible errors. *\/\n+#define E_GIF_ERR_WRITE_FAILED 2\n+#define E_GIF_ERR_HAS_SCRN_DSCR 3\n+#define E_GIF_ERR_HAS_IMAG_DSCR 4\n+#define E_GIF_ERR_NO_COLOR_MAP 5\n+#define E_GIF_ERR_DATA_TOO_BIG 6\n@@ -176,3 +168,3 @@\n-#define E_GIF_ERR_DISK_IS_FULL   8\n-#define E_GIF_ERR_CLOSE_FAILED   9\n-#define E_GIF_ERR_NOT_WRITEABLE  10\n+#define E_GIF_ERR_DISK_IS_FULL 8\n+#define E_GIF_ERR_CLOSE_FAILED 9\n+#define E_GIF_ERR_NOT_WRITEABLE 10\n@@ -181,3 +173,2 @@\n-int EGifPutScreenDesc(GifFileType *GifFile,\n-                      const int GifWidth, const int GifHeight,\n-                      const int GifColorRes,\n+int EGifPutScreenDesc(GifFileType *GifFile, const int GifWidth,\n+                      const int GifHeight, const int GifColorRes,\n@@ -186,2 +177,1 @@\n-int EGifPutImageDesc(GifFileType *GifFile,\n-                     const int GifLeft, const int GifTop,\n+int EGifPutImageDesc(GifFileType *GifFile, const int GifLeft, const int GifTop,\n@@ -192,2 +182,1 @@\n-int EGifPutLine(GifFileType *GifFile, GifPixelType *GifLine,\n-                int GifLineLen);\n+int EGifPutLine(GifFileType *GifFile, GifPixelType *GifLine, int GifLineLen);\n@@ -197,2 +186,2 @@\n-int EGifPutExtensionBlock(GifFileType *GifFile,\n-                         const int GifExtLen, const void *GifExtension);\n+int EGifPutExtensionBlock(GifFileType *GifFile, const int GifExtLen,\n+                          const void *GifExtension);\n@@ -201,2 +190,1 @@\n-                     const int GifExtLen,\n-                     const void *GifExtension);\n+                     const int GifExtLen, const void *GifExtension);\n@@ -205,2 +193,1 @@\n-int EGifPutCodeNext(GifFileType *GifFile,\n-                    const GifByteType *GifCodeBlock);\n+int EGifPutCodeNext(GifFileType *GifFile, const GifByteType *GifCodeBlock);\n@@ -215,13 +202,14 @@\n-int DGifSlurp(GifFileType * GifFile);\n-GifFileType *DGifOpen(void *userPtr, InputFunc readFunc, int *Error);    \/* new one (TVT) *\/\n-    int DGifCloseFile(GifFileType * GifFile, int *ErrorCode);\n-\n-#define D_GIF_SUCCEEDED          0\n-#define D_GIF_ERR_OPEN_FAILED    101    \/* And DGif possible errors. *\/\n-#define D_GIF_ERR_READ_FAILED    102\n-#define D_GIF_ERR_NOT_GIF_FILE   103\n-#define D_GIF_ERR_NO_SCRN_DSCR   104\n-#define D_GIF_ERR_NO_IMAG_DSCR   105\n-#define D_GIF_ERR_NO_COLOR_MAP   106\n-#define D_GIF_ERR_WRONG_RECORD   107\n-#define D_GIF_ERR_DATA_TOO_BIG   108\n+int DGifSlurp(GifFileType *GifFile);\n+GifFileType *DGifOpen(void *userPtr, InputFunc readFunc,\n+                      int *Error); \/* new one (TVT) *\/\n+int DGifCloseFile(GifFileType *GifFile, int *ErrorCode);\n+\n+#define D_GIF_SUCCEEDED 0\n+#define D_GIF_ERR_OPEN_FAILED 101 \/* And DGif possible errors. *\/\n+#define D_GIF_ERR_READ_FAILED 102\n+#define D_GIF_ERR_NOT_GIF_FILE 103\n+#define D_GIF_ERR_NO_SCRN_DSCR 104\n+#define D_GIF_ERR_NO_IMAG_DSCR 105\n+#define D_GIF_ERR_NO_COLOR_MAP 106\n+#define D_GIF_ERR_WRONG_RECORD 107\n+#define D_GIF_ERR_DATA_TOO_BIG 108\n@@ -229,4 +217,4 @@\n-#define D_GIF_ERR_CLOSE_FAILED   110\n-#define D_GIF_ERR_NOT_READABLE   111\n-#define D_GIF_ERR_IMAGE_DEFECT   112\n-#define D_GIF_ERR_EOF_TOO_SOON   113\n+#define D_GIF_ERR_CLOSE_FAILED 110\n+#define D_GIF_ERR_NOT_READABLE 111\n+#define D_GIF_ERR_IMAGE_DEFECT 112\n+#define D_GIF_ERR_EOF_TOO_SOON 113\n@@ -250,1 +238,0 @@\n-\n@@ -254,1 +241,1 @@\n-extern const char *GifErrorString(int ErrorCode);     \/* new in 2012 - ESR *\/\n+extern const char *GifErrorString(int ErrorCode); \/* new in 2012 - ESR *\/\n@@ -266,1 +253,1 @@\n-                                     const GifColorType *ColorMap);\n+                                        const GifColorType *ColorMap);\n@@ -269,2 +256,2 @@\n-                                     const ColorMapObject *ColorIn2,\n-                                     GifPixelType ColorTransIn2[]);\n+                                        const ColorMapObject *ColorIn2,\n+                                        GifPixelType ColorTransIn2[]);\n@@ -277,1 +264,2 @@\n-extern void GifApplyTranslation(SavedImage *Image, GifPixelType Translation[]);\n+extern void GifApplyTranslation(SavedImage *Image,\n+                                const GifPixelType Translation[]);\n@@ -279,2 +267,1 @@\n-                                ExtensionBlock **ExtensionBlocks,\n-                                int Function,\n+                                ExtensionBlock **ExtensionBlocks, int Function,\n@@ -285,1 +272,1 @@\n-                                  const SavedImage *CopyFrom);\n+                                     const SavedImage *CopyFrom);\n@@ -298,2 +285,1 @@\n-int DGifSavedExtensionToGCB(GifFileType *GifFile,\n-                            int ImageIndex,\n+int DGifSavedExtensionToGCB(GifFileType *GifFile, int ImageIndex,\n@@ -302,2 +288,1 @@\n-                            GifFileType *GifFile,\n-                            int ImageIndex);\n+                            GifFileType *GifFile, int ImageIndex);\n@@ -309,1 +294,1 @@\n-#define GIF_FONT_WIDTH  8\n+#define GIF_FONT_WIDTH 8\n@@ -313,3 +298,2 @@\n-extern void GifDrawText8x8(SavedImage *Image,\n-                     const int x, const int y,\n-                     const char *legend, const int color);\n+extern void GifDrawText8x8(SavedImage *Image, const int x, const int y,\n+                           const char *legend, const int color);\n@@ -317,3 +301,2 @@\n-extern void GifDrawBox(SavedImage *Image,\n-                    const int x, const int y,\n-                    const int w, const int d, const int color);\n+extern void GifDrawBox(SavedImage *Image, const int x, const int y, const int w,\n+                       const int d, const int color);\n@@ -321,3 +304,2 @@\n-extern void GifDrawRectangle(SavedImage *Image,\n-                   const int x, const int y,\n-                   const int w, const int d, const int color);\n+extern void GifDrawRectangle(SavedImage *Image, const int x, const int y,\n+                             const int w, const int d, const int color);\n@@ -325,4 +307,3 @@\n-extern void GifDrawBoxedText8x8(SavedImage *Image,\n-                          const int x, const int y,\n-                          const char *legend,\n-                          const int border, const int bg, const int fg);\n+extern void GifDrawBoxedText8x8(SavedImage *Image, const int x, const int y,\n+                                const char *legend, const int border,\n+                                const int bg, const int fg);\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/giflib\/gif_lib.h","additions":97,"deletions":116,"binary":false,"changes":213,"status":"modified"},{"patch":"@@ -36,1 +36,0 @@\n-#include \"gif_lib.h\"\n@@ -38,0 +37,1 @@\n+#include \"gif_lib.h\"\n@@ -40,1 +40,1 @@\n-    #define SIZE_MAX     UINTPTR_MAX\n+#define SIZE_MAX UINTPTR_MAX\n@@ -43,3 +43,3 @@\n-#define EXTENSION_INTRODUCER      0x21\n-#define DESCRIPTOR_INTRODUCER     0x2c\n-#define TERMINATOR_INTRODUCER     0x3b\n+#define EXTENSION_INTRODUCER 0x21\n+#define DESCRIPTOR_INTRODUCER 0x2c\n+#define TERMINATOR_INTRODUCER 0x3b\n@@ -47,2 +47,2 @@\n-#define LZ_MAX_CODE         4095    \/* Biggest code possible in 12 bits. *\/\n-#define LZ_BITS             12\n+#define LZ_MAX_CODE 4095 \/* Biggest code possible in 12 bits. *\/\n+#define LZ_BITS 12\n@@ -50,3 +50,3 @@\n-#define FLUSH_OUTPUT        4096    \/* Impossible code, to signal flush. *\/\n-#define FIRST_CODE          4097    \/* Impossible code, to signal first. *\/\n-#define NO_SUCH_CODE        4098    \/* Impossible code, to signal empty. *\/\n+#define FLUSH_OUTPUT 4096 \/* Impossible code, to signal flush. *\/\n+#define FIRST_CODE 4097   \/* Impossible code, to signal first. *\/\n+#define NO_SUCH_CODE 4098 \/* Impossible code, to signal empty. *\/\n@@ -54,4 +54,4 @@\n-#define FILE_STATE_WRITE    0x01\n-#define FILE_STATE_SCREEN   0x02\n-#define FILE_STATE_IMAGE    0x04\n-#define FILE_STATE_READ     0x08\n+#define FILE_STATE_WRITE 0x01\n+#define FILE_STATE_SCREEN 0x02\n+#define FILE_STATE_IMAGE 0x04\n+#define FILE_STATE_READ 0x08\n@@ -59,2 +59,2 @@\n-#define IS_READABLE(Private)    (Private->FileState & FILE_STATE_READ)\n-#define IS_WRITEABLE(Private)   (Private->FileState & FILE_STATE_WRITE)\n+#define IS_READABLE(Private) (Private->FileState & FILE_STATE_READ)\n+#define IS_WRITEABLE(Private) (Private->FileState & FILE_STATE_WRITE)\n@@ -63,17 +63,19 @@\n-    GifWord FileState, FileHandle,  \/* Where all this data goes to! *\/\n-      BitsPerPixel,     \/* Bits per pixel (Codes uses at least this + 1). *\/\n-      ClearCode,   \/* The CLEAR LZ code. *\/\n-      EOFCode,     \/* The EOF LZ code. *\/\n-      RunningCode, \/* The next code algorithm can generate. *\/\n-      RunningBits, \/* The number of bits required to represent RunningCode. *\/\n-      MaxCode1,    \/* 1 bigger than max. possible code, in RunningBits bits. *\/\n-      LastCode,    \/* The code before the current code. *\/\n-      CrntCode,    \/* Current algorithm code. *\/\n-      StackPtr,    \/* For character stack (see below). *\/\n-      CrntShiftState;    \/* Number of bits in CrntShiftDWord. *\/\n-    unsigned long CrntShiftDWord;   \/* For bytes decomposition into codes. *\/\n-    unsigned long PixelCount;   \/* Number of pixels in image. *\/\n-    FILE *File;    \/* File as stream. *\/\n-    InputFunc Read;     \/* function to read gif input (TVT) *\/\n-    OutputFunc Write;   \/* function to write gif output (MRB) *\/\n-    GifByteType Buf[256];   \/* Compressed input is buffered here. *\/\n+    GifWord FileState, FileHandle, \/* Where all this data goes to! *\/\n+        BitsPerPixel, \/* Bits per pixel (Codes uses at least this + 1). *\/\n+        ClearCode,    \/* The CLEAR LZ code. *\/\n+        EOFCode,      \/* The EOF LZ code. *\/\n+        RunningCode,  \/* The next code algorithm can generate. *\/\n+        RunningBits,  \/* The number of bits required to represent\n+                         RunningCode. *\/\n+        MaxCode1, \/* 1 bigger than max. possible code, in RunningBits bits.\n+                   *\/\n+        LastCode, \/* The code before the current code. *\/\n+        CrntCode, \/* Current algorithm code. *\/\n+        StackPtr, \/* For character stack (see below). *\/\n+        CrntShiftState;           \/* Number of bits in CrntShiftDWord. *\/\n+    unsigned long CrntShiftDWord; \/* For bytes decomposition into codes. *\/\n+    unsigned long PixelCount;     \/* Number of pixels in image. *\/\n+    FILE *File;                   \/* File as stream. *\/\n+    InputFunc Read;               \/* function to read gif input (TVT) *\/\n+    OutputFunc Write;             \/* function to write gif output (MRB) *\/\n+    GifByteType Buf[256];         \/* Compressed input is buffered here. *\/\n@@ -81,1 +83,1 @@\n-    GifByteType Suffix[LZ_MAX_CODE + 1];    \/* So we can trace the codes. *\/\n+    GifByteType Suffix[LZ_MAX_CODE + 1]; \/* So we can trace the codes. *\/\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/giflib\/gif_lib_private.h","additions":36,"deletions":34,"binary":false,"changes":70,"status":"modified"},{"patch":"@@ -33,1 +33,0 @@\n-#include <stdlib.h>\n@@ -35,0 +34,1 @@\n+#include <stdlib.h>\n@@ -40,1 +40,1 @@\n-#define MAX(x, y)    (((x) > (y)) ? (x) : (y))\n+#define MAX(x, y) (((x) > (y)) ? (x) : (y))\n@@ -47,3 +47,1 @@\n-int\n-GifBitSize(int n)\n-{\n+int GifBitSize(int n) {\n@@ -52,2 +50,2 @@\n-    for (i = 1; i <= 8; i++)\n-        if ((1 << i) >= n)\n+    for (i = 1; i <= 8; i++) {\n+        if ((1 << i) >= n) {\n@@ -55,0 +53,2 @@\n+        }\n+    }\n@@ -59,1 +59,1 @@\n-  Color map object functions\n+ Color map object functions\n@@ -66,3 +66,1 @@\n-ColorMapObject *\n-GifMakeMapObject(int ColorCount, const GifColorType *ColorMap)\n-{\n+ColorMapObject *GifMakeMapObject(int ColorCount, const GifColorType *ColorMap) {\n@@ -72,1 +70,2 @@\n-     * make the user know that or should we automatically round up instead? *\/\n+     * make the user know that or should we automatically round up instead?\n+     *\/\n@@ -74,1 +73,1 @@\n-        return ((ColorMapObject *) NULL);\n+        return ((ColorMapObject *)NULL);\n@@ -78,2 +77,2 @@\n-    if (Object == (ColorMapObject *) NULL) {\n-        return ((ColorMapObject *) NULL);\n+    if (Object == (ColorMapObject *)NULL) {\n+        return ((ColorMapObject *)NULL);\n@@ -82,2 +81,3 @@\n-    Object->Colors = (GifColorType *)calloc(ColorCount, sizeof(GifColorType));\n-    if (Object->Colors == (GifColorType *) NULL) {\n+    Object->Colors =\n+        (GifColorType *)calloc(ColorCount, sizeof(GifColorType));\n+    if (Object->Colors == (GifColorType *)NULL) {\n@@ -85,1 +85,1 @@\n-        return ((ColorMapObject *) NULL);\n+        return ((ColorMapObject *)NULL);\n@@ -93,2 +93,2 @@\n-        memcpy((char *)Object->Colors,\n-               (char *)ColorMap, ColorCount * sizeof(GifColorType));\n+        memcpy((char *)Object->Colors, (char *)ColorMap,\n+               ColorCount * sizeof(GifColorType));\n@@ -101,1 +101,1 @@\n-Free a color map object\n+ Free a color map object\n@@ -103,3 +103,1 @@\n-void\n-GifFreeMapObject(ColorMapObject *Object)\n-{\n+void GifFreeMapObject(ColorMapObject *Object) {\n@@ -113,4 +111,1 @@\n-void\n-DumpColorMap(ColorMapObject *Object,\n-             FILE * fp)\n-{\n+void DumpColorMap(ColorMapObject *Object, FILE *fp) {\n@@ -122,2 +117,2 @@\n-                (void)fprintf(fp, \"%3d: %02x %02x %02x   \", i + j,\n-                              Object->Colors[i + j].Red,\n+                (void)fprintf(fp, \"%3d: %02x %02x %02x   \",\n+                              i + j, Object->Colors[i + j].Red,\n@@ -140,5 +135,3 @@\n-ColorMapObject *\n-GifUnionColorMap(const ColorMapObject *ColorIn1,\n-              const ColorMapObject *ColorIn2,\n-              GifPixelType ColorTransIn2[])\n-{\n+ColorMapObject *GifUnionColorMap(const ColorMapObject *ColorIn1,\n+                                 const ColorMapObject *ColorIn2,\n+                                 GifPixelType ColorTransIn2[]) {\n@@ -155,2 +148,2 @@\n-    ColorUnion = GifMakeMapObject(MAX(ColorIn1->ColorCount,\n-                               ColorIn2->ColorCount) * 2, NULL);\n+    ColorUnion = GifMakeMapObject(\n+        MAX(ColorIn1->ColorCount, ColorIn2->ColorCount) * 2, NULL);\n@@ -158,1 +151,1 @@\n-    if (ColorUnion == NULL)\n+    if (ColorUnion == NULL) {\n@@ -160,0 +153,1 @@\n+    }\n@@ -164,1 +158,1 @@\n-    for (i = 0; i < ColorIn1->ColorCount; i++)\n+    for (i = 0; i < ColorIn1->ColorCount; i++) {\n@@ -166,0 +160,1 @@\n+    }\n@@ -175,3 +170,3 @@\n-    while (ColorIn1->Colors[CrntSlot - 1].Red == 0\n-           && ColorIn1->Colors[CrntSlot - 1].Green == 0\n-           && ColorIn1->Colors[CrntSlot - 1].Blue == 0)\n+    while (ColorIn1->Colors[CrntSlot - 1].Red == 0 &&\n+           ColorIn1->Colors[CrntSlot - 1].Green == 0 &&\n+           ColorIn1->Colors[CrntSlot - 1].Blue == 0) {\n@@ -179,0 +174,1 @@\n+    }\n@@ -183,3 +179,3 @@\n-        for (j = 0; j < ColorIn1->ColorCount; j++)\n-            if (memcmp (&ColorIn1->Colors[j], &ColorIn2->Colors[i],\n-                        sizeof(GifColorType)) == 0)\n+        for (j = 0; j < ColorIn1->ColorCount; j++) {\n+            if (memcmp(&ColorIn1->Colors[j], &ColorIn2->Colors[i],\n+                       sizeof(GifColorType)) == 0) {\n@@ -187,0 +183,2 @@\n+            }\n+        }\n@@ -188,3 +186,3 @@\n-        if (j < ColorIn1->ColorCount)\n-            ColorTransIn2[i] = j;    \/* color exists in Color1 *\/\n-        else {\n+        if (j < ColorIn1->ColorCount) {\n+            ColorTransIn2[i] = j; \/* color exists in Color1 *\/\n+        } else {\n@@ -199,1 +197,1 @@\n-        return ((ColorMapObject *) NULL);\n+        return ((ColorMapObject *)NULL);\n@@ -213,1 +211,1 @@\n-        for (j = CrntSlot; j < RoundUpTo; j++)\n+        for (j = CrntSlot; j < RoundUpTo; j++) {\n@@ -215,0 +213,1 @@\n+        }\n@@ -218,3 +217,3 @@\n-            GifColorType *new_map = (GifColorType *)reallocarray(Map,\n-                                 RoundUpTo, sizeof(GifColorType));\n-            if( new_map == NULL ) {\n+            GifColorType *new_map = (GifColorType *)reallocarray(\n+                Map, RoundUpTo, sizeof(GifColorType));\n+            if (new_map == NULL) {\n@@ -222,1 +221,1 @@\n-                return ((ColorMapObject *) NULL);\n+                return ((ColorMapObject *)NULL);\n@@ -237,3 +236,1 @@\n-void\n-GifApplyTranslation(SavedImage *Image, GifPixelType Translation[])\n-{\n+void GifApplyTranslation(SavedImage *Image, const GifPixelType Translation[]) {\n@@ -241,1 +238,2 @@\n-    register int RasterSize = Image->ImageDesc.Height * Image->ImageDesc.Width;\n+    register int RasterSize =\n+        Image->ImageDesc.Height * Image->ImageDesc.Width;\n@@ -243,1 +241,1 @@\n-    for (i = 0; i < RasterSize; i++)\n+    for (i = 0; i < RasterSize; i++) {\n@@ -245,0 +243,1 @@\n+    }\n@@ -250,7 +249,3 @@\n-int\n-GifAddExtensionBlock(int *ExtensionBlockCount,\n-                     ExtensionBlock **ExtensionBlocks,\n-                     int Function,\n-                     unsigned int Len,\n-                     unsigned char ExtData[])\n-{\n+int GifAddExtensionBlock(int *ExtensionBlockCount,\n+                         ExtensionBlock **ExtensionBlocks, int Function,\n+                         unsigned int Len, unsigned char ExtData[]) {\n@@ -259,7 +254,8 @@\n-    if (*ExtensionBlocks == NULL)\n-        *ExtensionBlocks=(ExtensionBlock *)malloc(sizeof(ExtensionBlock));\n-    else {\n-        ExtensionBlock* ep_new = (ExtensionBlock *)reallocarray\n-                                      (*ExtensionBlocks, (*ExtensionBlockCount + 1),\n-                                      sizeof(ExtensionBlock));\n-        if( ep_new == NULL )\n+    if (*ExtensionBlocks == NULL) {\n+        *ExtensionBlocks =\n+            (ExtensionBlock *)malloc(sizeof(ExtensionBlock));\n+    } else {\n+        ExtensionBlock *ep_new = (ExtensionBlock *)reallocarray(\n+            *ExtensionBlocks, (*ExtensionBlockCount + 1),\n+            sizeof(ExtensionBlock));\n+        if (ep_new == NULL) {\n@@ -267,0 +263,1 @@\n+        }\n@@ -270,1 +267,1 @@\n-    if (*ExtensionBlocks == NULL)\n+    if (*ExtensionBlocks == NULL) {\n@@ -272,0 +269,1 @@\n+    }\n@@ -276,1 +274,1 @@\n-    ep->ByteCount=Len;\n+    ep->ByteCount = Len;\n@@ -278,1 +276,1 @@\n-    if (ep->Bytes == NULL)\n+    if (ep->Bytes == NULL) {\n@@ -280,0 +278,1 @@\n+    }\n@@ -288,4 +287,2 @@\n-void\n-GifFreeExtensions(int *ExtensionBlockCount,\n-                  ExtensionBlock **ExtensionBlocks)\n-{\n+void GifFreeExtensions(int *ExtensionBlockCount,\n+                       ExtensionBlock **ExtensionBlocks) {\n@@ -294,1 +291,1 @@\n-    if (*ExtensionBlocks == NULL)\n+    if (*ExtensionBlocks == NULL) {\n@@ -296,0 +293,1 @@\n+    }\n@@ -298,2 +296,1 @@\n-         ep < (*ExtensionBlocks + *ExtensionBlockCount);\n-         ep++)\n+         ep < (*ExtensionBlocks + *ExtensionBlockCount); ep++) {\n@@ -301,0 +298,1 @@\n+    }\n@@ -307,1 +305,1 @@\n- Image block allocation functions\n+   Image block allocation functions\n@@ -313,3 +311,1 @@\n-void\n-FreeLastSavedImage(GifFileType *GifFile)\n-{\n+void FreeLastSavedImage(GifFileType *GifFile) {\n@@ -318,1 +314,1 @@\n-    if ((GifFile == NULL) || (GifFile->SavedImages == NULL))\n+    if ((GifFile == NULL) || (GifFile->SavedImages == NULL)) {\n@@ -320,0 +316,1 @@\n+    }\n@@ -332,1 +329,1 @@\n-    if (sp->RasterBits != NULL)\n+    if (sp->RasterBits != NULL) {\n@@ -334,0 +331,1 @@\n+    }\n@@ -340,3 +338,4 @@\n-     * time.  If this is used in GifFreeSavedImages then it would be inefficient\n-     * (The whole array is going to be deallocated.)  If we just use it when\n-     * we want to free the last Image it's convenient to do it here.\n+     * time.  If this is used in GifFreeSavedImages then it would be\n+     * inefficient (The whole array is going to be deallocated.)  If we just\n+     * use it when we want to free the last Image it's convenient to do it\n+     * here.\n@@ -349,4 +348,4 @@\n-SavedImage *\n-GifMakeSavedImage(GifFileType *GifFile, const SavedImage *CopyFrom)\n-{\n-    if (GifFile->SavedImages == NULL)\n+SavedImage *GifMakeSavedImage(GifFileType *GifFile,\n+                              const SavedImage *CopyFrom) {\n+    \/\/ cppcheck-suppress ctunullpointer\n+    if (GifFile->SavedImages == NULL) {\n@@ -354,4 +353,5 @@\n-    else {\n-        SavedImage* newSavedImages = (SavedImage *)reallocarray(GifFile->SavedImages,\n-                               (GifFile->ImageCount + 1), sizeof(SavedImage));\n-        if( newSavedImages == NULL)\n+    } else {\n+        SavedImage *newSavedImages = (SavedImage *)reallocarray(\n+            GifFile->SavedImages, (GifFile->ImageCount + 1),\n+            sizeof(SavedImage));\n+        if (newSavedImages == NULL) {\n@@ -359,0 +359,1 @@\n+        }\n@@ -361,1 +362,1 @@\n-    if (GifFile->SavedImages == NULL)\n+    if (GifFile->SavedImages == NULL) {\n@@ -363,1 +364,1 @@\n-    else {\n+    } else {\n@@ -370,3 +371,3 @@\n-             * Make our own allocated copies of the heap fields in the\n-             * copied record.  This guards against potential aliasing\n-             * problems.\n+             * Make our own allocated copies of the heap fields in\n+             * the copied record.  This guards against potential\n+             * aliasing problems.\n@@ -378,2 +379,2 @@\n-                                         CopyFrom->ImageDesc.ColorMap->ColorCount,\n-                                         CopyFrom->ImageDesc.ColorMap->Colors);\n+                    CopyFrom->ImageDesc.ColorMap->ColorCount,\n+                    CopyFrom->ImageDesc.ColorMap->Colors);\n@@ -387,4 +388,5 @@\n-            sp->RasterBits = (unsigned char *)reallocarray(NULL,\n-                                                  (CopyFrom->ImageDesc.Height *\n-                                                  CopyFrom->ImageDesc.Width),\n-                                                  sizeof(GifPixelType));\n+            sp->RasterBits = (unsigned char *)reallocarray(\n+                NULL,\n+                (CopyFrom->ImageDesc.Height *\n+                 CopyFrom->ImageDesc.Width),\n+                sizeof(GifPixelType));\n@@ -396,2 +398,3 @@\n-                   sizeof(GifPixelType) * CopyFrom->ImageDesc.Height *\n-                   CopyFrom->ImageDesc.Width);\n+                   sizeof(GifPixelType) *\n+                       CopyFrom->ImageDesc.Height *\n+                       CopyFrom->ImageDesc.Width);\n@@ -401,3 +404,4 @@\n-                sp->ExtensionBlocks = (ExtensionBlock *)reallocarray(NULL,\n-                                      CopyFrom->ExtensionBlockCount,\n-                                      sizeof(ExtensionBlock));\n+                sp->ExtensionBlocks =\n+                    (ExtensionBlock *)reallocarray(\n+                        NULL, CopyFrom->ExtensionBlockCount,\n+                        sizeof(ExtensionBlock));\n@@ -408,2 +412,4 @@\n-                memcpy(sp->ExtensionBlocks, CopyFrom->ExtensionBlocks,\n-                       sizeof(ExtensionBlock) * CopyFrom->ExtensionBlockCount);\n+                memcpy(sp->ExtensionBlocks,\n+                       CopyFrom->ExtensionBlocks,\n+                       sizeof(ExtensionBlock) *\n+                           CopyFrom->ExtensionBlockCount);\n@@ -411,2 +417,1 @@\n-        }\n-        else {\n+        } else {\n@@ -420,3 +425,1 @@\n-void\n-GifFreeSavedImages(GifFileType *GifFile)\n-{\n+void GifFreeSavedImages(GifFileType *GifFile) {\n@@ -435,1 +438,1 @@\n-        if (sp->RasterBits != NULL)\n+        if (sp->RasterBits != NULL) {\n@@ -437,0 +440,1 @@\n+        }\n@@ -438,1 +442,2 @@\n-        GifFreeExtensions(&sp->ExtensionBlockCount, &sp->ExtensionBlocks);\n+        GifFreeExtensions(&sp->ExtensionBlockCount,\n+                          &sp->ExtensionBlocks);\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/giflib\/gifalloc.c","additions":130,"deletions":125,"binary":false,"changes":255,"status":"modified"},{"patch":"@@ -31,1 +31,0 @@\n-#include <sys\/types.h>\n@@ -35,0 +34,1 @@\n+#include <sys\/types.h>\n@@ -37,1 +37,1 @@\n-    #define SIZE_MAX     UINTPTR_MAX\n+#define SIZE_MAX UINTPTR_MAX\n@@ -44,1 +44,1 @@\n-#define MUL_NO_OVERFLOW    ((size_t)1 << (sizeof(size_t) * 4))\n+#define MUL_NO_OVERFLOW ((size_t)1 << (sizeof(size_t) * 4))\n@@ -46,3 +46,1 @@\n-void *\n-openbsd_reallocarray(void *optr, size_t nmemb, size_t size)\n-{\n+void *openbsd_reallocarray(void *optr, size_t nmemb, size_t size) {\n@@ -96,1 +94,1 @@\n-    if (size == 0 || nmemb == 0)\n+    if (size == 0 || nmemb == 0) {\n@@ -98,0 +96,1 @@\n+    }\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/giflib\/openbsd-reallocarray.c","additions":6,"deletions":7,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -6132,0 +6132,67 @@\n+Version 1.6.41 [January 24, 2024]\n+  Added SIMD-optimized code for the LoongArch LSX hardware.\n+    (Contributed by GuXiWei, JinBo and ZhangLixia)\n+  Fixed the run-time discovery of MIPS MSA hardware.\n+    (Contributed by Sui Jingfeng)\n+  Fixed an off-by-one error in the function png_do_check_palette_indexes(),\n+    which failed to recognize errors that might have existed in the first\n+    column of a broken palette-encoded image. This was a benign regression\n+    accidentally introduced in libpng-1.6.33. No pixel was harmed.\n+    (Contributed by Adam Richter; reviewed by John Bowler)\n+  Fixed, improved and modernized the contrib\/pngminus programs, i.e.,\n+    png2pnm.c and pnm2png.c\n+  Removed old and peculiar portability hacks that were meant to silence\n+    warnings issued by gcc version 7.1 alone.\n+    (Contributed by John Bowler)\n+  Fixed and modernized the CMake file, and raised the minimum required\n+    CMake version from 3.1 to 3.6.\n+    (Contributed by Clinton Ingram, Timothy Lyanguzov, Tyler Kropp, et al.)\n+  Allowed the configure script to disable the building of auxiliary tools\n+    and tests, thus catching up with the CMake file.\n+    (Contributed by Carlo Bramini)\n+  Fixed a build issue on Mac.\n+    (Contributed by Zixu Wang)\n+  Moved the Autoconf macro files to scripts\/autoconf.\n+  Moved the CMake files (except for the main CMakeLists.txt) to\n+    scripts\/cmake and moved the list of their contributing authors to\n+    scripts\/cmake\/AUTHORS.md\n+  Updated the CI configurations and scripts.\n+  Relicensed the CI scripts to the MIT License.\n+  Improved the test coverage.\n+    (Contributed by John Bowler)\n+\n+Version 1.6.42 [January 29, 2024]\n+  Fixed the implementation of the macro function png_check_sig().\n+    This was an API regression, introduced in libpng-1.6.41.\n+    (Reported by Matthieu Darbois)\n+  Fixed and updated the libpng manual.\n+\n+Version 1.6.43 [February 23, 2024]\n+  Fixed the row width check in png_check_IHDR().\n+    This corrected a bug that was specific to the 16-bit platforms,\n+    and removed a spurious compiler warning from the 64-bit builds.\n+    (Reported by Jacek Caban; fixed by John Bowler)\n+  Added eXIf chunk support to the push-mode reader in pngpread.c.\n+    (Contributed by Chris Blume)\n+  Added contrib\/pngexif for the benefit of the users who would like\n+    to inspect the content of eXIf chunks.\n+  Added contrib\/conftest\/basic.dfa, a basic build-time configuration.\n+    (Contributed by John Bowler)\n+  Fixed a preprocessor condition in pngread.c that broke build-time\n+    configurations like contrib\/conftest\/pngcp.dfa.\n+    (Contributed by John Bowler)\n+  Added CMake build support for LoongArch LSX.\n+    (Contributed by GuXiWei)\n+  Fixed a CMake build error that occurred under a peculiar state of the\n+    dependency tree. This was a regression introduced in libpng-1.6.41.\n+    (Contributed by Dan Rosser)\n+  Marked the installed libpng headers as system headers in CMake.\n+    (Contributed by Benjamin Buch)\n+  Updated the build support for RISCOS.\n+    (Contributed by Cameron Cawley)\n+  Updated the makefiles to allow cross-platform builds to initialize\n+    conventional make variables like AR and ARFLAGS.\n+  Added various improvements to the CI scripts in areas like version\n+    consistency verification and text linting.\n+  Added version consistency verification to pngtest.c also.\n+\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/libpng\/CHANGES","additions":67,"deletions":0,"binary":false,"changes":67,"status":"modified"},{"patch":"@@ -7,2 +7,2 @@\n- * Copyright (c) 1995-2023 The PNG Reference Library Authors.\n- * Copyright (c) 2018-2023 Cosmin Truta.\n+ * Copyright (c) 1995-2024 The PNG Reference Library Authors.\n+ * Copyright (c) 2018-2024 Cosmin Truta.\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/libpng\/LICENSE","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1,1 +1,1 @@\n-README for libpng version 1.6.40\n+README for libpng version 1.6.43\n@@ -145,4 +145,5 @@\n-    arm\/          =>  Optimized code for the ARM platform\n-    intel\/        =>  Optimized code for the INTEL-SSE2 platform\n-    mips\/         =>  Optimized code for the MIPS platform\n-    powerpc\/      =>  Optimized code for the PowerPC platform\n+    arm\/          =>  Optimized code for ARM Neon\n+    intel\/        =>  Optimized code for INTEL SSE2\n+    loongarch\/    =>  Optimized code for LoongArch LSX\n+    mips\/         =>  Optimized code for MIPS MSA and MIPS MMI\n+    powerpc\/      =>  Optimized code for PowerPC VSX\n@@ -161,0 +162,1 @@\n+        pngexif\/      =>  Program to inspect the EXIF information in PNG files\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/libpng\/README","additions":7,"deletions":5,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -40,0 +40,1 @@\n+    shopt -s nullglob\n@@ -41,11 +42,13 @@\n-    do\n-      # replace tabs with spaces\n-      expand ${f} > ${f}.tmp;\n-      mv ${f}.tmp $f;\n-\n-      # fix line endings to LF\n-      sed -i -e 's\/\\r$\/\/g' ${f};\n-\n-      # remove trailing spaces\n-      sed -i -e 's\/[ ]* $\/\/g' ${f};\n-    done\n+         do\n+            # replace tabs with spaces\n+            expand ${f} > ${f}.tmp\n+            mv ${f}.tmp $f\n+\n+            # fix line endings to LF\n+            sed -e 's\/\\r$\/\/g' ${f} > ${f}.tmp\n+            mv ${f}.tmp $f\n+\n+            # remove trailing spaces\n+            sed -e 's\/[ ]* $\/\/g' ${f} > ${f}.tmp\n+            mv ${f}.tmp $f\n+         done\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/libpng\/UPDATING.txt","additions":14,"deletions":11,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -32,1 +32,1 @@\n- * Copyright (c) 2018-2023 Cosmin Truta\n+ * Copyright (c) 2018-2024 Cosmin Truta\n@@ -45,21 +45,1 @@\n-typedef png_libpng_version_1_6_40 Your_png_h_is_not_version_1_6_40;\n-\n-#ifdef __GNUC__\n-\/* The version tests may need to be added to, but the problem warning has\n- * consistently been fixed in GCC versions which obtain wide-spread release.\n- * The problem is that many versions of GCC rearrange comparison expressions in\n- * the optimizer in such a way that the results of the comparison will change\n- * if signed integer overflow occurs.  Such comparisons are not permitted in\n- * ANSI C90, however GCC isn't clever enough to work out that that do not occur\n- * below in png_ascii_from_fp and png_muldiv, so it produces a warning with\n- * -Wextra.  Unfortunately this is highly dependent on the optimizer and the\n- * machine architecture so the warning comes and goes unpredictably and is\n- * impossible to \"fix\", even were that a good idea.\n- *\/\n-#if __GNUC__ == 7 && __GNUC_MINOR__ == 1\n-#define GCC_STRICT_OVERFLOW 1\n-#endif \/* GNU 7.1.x *\/\n-#endif \/* GNU *\/\n-#ifndef GCC_STRICT_OVERFLOW\n-#define GCC_STRICT_OVERFLOW 0\n-#endif\n+typedef png_libpng_version_1_6_43 Your_png_h_is_not_version_1_6_43;\n@@ -104,1 +84,1 @@\n-   png_byte png_signature[8] = {137, 80, 78, 71, 13, 10, 26, 10};\n+   static const png_byte png_signature[8] = {137, 80, 78, 71, 13, 10, 26, 10};\n@@ -110,1 +90,1 @@\n-      return (-1);\n+      return -1;\n@@ -113,1 +93,1 @@\n-      return (-1);\n+      return -1;\n@@ -118,1 +98,1 @@\n-   return ((int)(memcmp(&sig[start], &png_signature[start], num_to_check)));\n+   return memcmp(&sig[start], &png_signature[start], num_to_check);\n@@ -478,1 +458,0 @@\n-\/* The following API is not called internally *\/\n@@ -717,1 +696,1 @@\n-      return (NULL);\n+      return NULL;\n@@ -719,1 +698,1 @@\n-   return (png_ptr->io_ptr);\n+   return png_ptr->io_ptr;\n@@ -783,1 +762,1 @@\n-      char number_buf[5]; \/* enough for a four-digit year *\/\n+      char number_buf[5] = {0, 0, 0, 0, 0}; \/* enough for a four-digit year *\/\n@@ -846,2 +825,2 @@\n-      \"libpng version 1.6.40\" PNG_STRING_NEWLINE \\\n-      \"Copyright (c) 2018-2023 Cosmin Truta\" PNG_STRING_NEWLINE \\\n+      \"libpng version 1.6.43\" PNG_STRING_NEWLINE \\\n+      \"Copyright (c) 2018-2024 Cosmin Truta\" PNG_STRING_NEWLINE \\\n@@ -1008,1 +987,1 @@\n-   return (inflateReset(&png_ptr->zstream));\n+   return inflateReset(&png_ptr->zstream);\n@@ -1017,1 +996,1 @@\n-   return((png_uint_32)PNG_LIBPNG_VER);\n+   return (png_uint_32)PNG_LIBPNG_VER;\n@@ -1873,2 +1852,2 @@\n-      {\n-         char number[PNG_NUMBER_BUFFER_SIZE]; \/* +24 = 114 *\/\n+   {\n+      char number[PNG_NUMBER_BUFFER_SIZE]; \/* +24 = 114 *\/\n@@ -1876,5 +1855,5 @@\n-         pos = png_safecat(message, (sizeof message), pos,\n-             png_format_number(number, number+(sizeof number),\n-             PNG_NUMBER_FORMAT_x, value));\n-         pos = png_safecat(message, (sizeof message), pos, \"h: \"); \/* +2 = 116 *\/\n-      }\n+      pos = png_safecat(message, (sizeof message), pos,\n+          png_format_number(number, number+(sizeof number),\n+          PNG_NUMBER_FORMAT_x, value));\n+      pos = png_safecat(message, (sizeof message), pos, \"h: \"); \/* +2 = 116 *\/\n+   }\n@@ -2563,11 +2542,0 @@\n-#ifdef __GNUC__\n-\/* This exists solely to work round a warning from GNU C. *\/\n-static int \/* PRIVATE *\/\n-png_gt(size_t a, size_t b)\n-{\n-   return a > b;\n-}\n-#else\n-#   define png_gt(a,b) ((a) > (b))\n-#endif\n-\n@@ -2595,2 +2563,10 @@\n-   if (png_gt(((width + 7) & (~7U)),\n-       ((PNG_SIZE_MAX\n+   \/* The bit mask on the first line below must be at least as big as a\n+    * png_uint_32.  \"~7U\" is not adequate on 16-bit systems because it will\n+    * be an unsigned 16-bit value.  Casting to (png_alloc_size_t) makes the\n+    * type of the result at least as bit (in bits) as the RHS of the > operator\n+    * which also avoids a common warning on 64-bit systems that the comparison\n+    * of (png_uint_32) against the constant value on the RHS will always be\n+    * false.\n+    *\/\n+   if (((width + 7) & ~(png_alloc_size_t)7) >\n+       (((PNG_SIZE_MAX\n@@ -2922,8 +2898,0 @@\n-#if GCC_STRICT_OVERFLOW\n-#pragma GCC diagnostic push\n-\/* The problem arises below with exp_b10, which can never overflow because it\n- * comes, originally, from frexp and is therefore limited to a range which is\n- * typically +\/-710 (log2(DBL_MAX)\/log2(DBL_MIN)).\n- *\/\n-#pragma GCC diagnostic warning \"-Wstrict-overflow=2\"\n-#endif \/* GCC_STRICT_OVERFLOW *\/\n@@ -3251,4 +3219,0 @@\n-#if GCC_STRICT_OVERFLOW\n-#pragma GCC diagnostic pop\n-#endif \/* GCC_STRICT_OVERFLOW *\/\n-\n@@ -3282,1 +3246,1 @@\n-         char digits[10];\n+         char digits[10] = {0};\n@@ -3367,9 +3331,0 @@\n-#if GCC_STRICT_OVERFLOW \/* from above *\/\n-\/* It is not obvious which comparison below gets optimized in such a way that\n- * signed overflow would change the result; looking through the code does not\n- * reveal any tests which have the form GCC complains about, so presumably the\n- * optimizer is moving an add or subtract into the 'if' somewhere.\n- *\/\n-#pragma GCC diagnostic push\n-#pragma GCC diagnostic warning \"-Wstrict-overflow=2\"\n-#endif \/* GCC_STRICT_OVERFLOW *\/\n@@ -3490,3 +3445,0 @@\n-#if GCC_STRICT_OVERFLOW\n-#pragma GCC diagnostic pop\n-#endif \/* GCC_STRICT_OVERFLOW *\/\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/libpng\/png.c","additions":31,"deletions":79,"binary":false,"changes":110,"status":"modified"},{"patch":"@@ -32,1 +32,1 @@\n- * libpng version 1.6.40\n+ * libpng version 1.6.43\n@@ -34,1 +34,1 @@\n- * Copyright (c) 2018-2023 Cosmin Truta\n+ * Copyright (c) 2018-2024 Cosmin Truta\n@@ -46,1 +46,1 @@\n- *   libpng versions 1.6.36, December 2018, through 1.6.40, June 2023:\n+ *   libpng versions 1.6.36, December 2018, through 1.6.43, February 2024:\n@@ -58,2 +58,2 @@\n- *  * Copyright (c) 1995-2023 The PNG Reference Library Authors.\n- *  * Copyright (c) 2018-2023 Cosmin Truta.\n+ *  * Copyright (c) 1995-2024 The PNG Reference Library Authors.\n+ *  * Copyright (c) 2018-2024 Cosmin Truta.\n@@ -270,1 +270,1 @@\n- *    1.6.40                  16    10640  16.so.16.40[.0]\n+ *    1.6.43                  16    10643  16.so.16.43[.0]\n@@ -286,3 +286,0 @@\n- *    DLLNUM will change each time there are forward or backward changes\n- *    in binary compatibility (e.g., when a new feature is added).\n- *\n@@ -309,2 +306,2 @@\n-#define PNG_LIBPNG_VER_STRING \"1.6.40\"\n-#define PNG_HEADER_VERSION_STRING \" libpng version 1.6.40 - June 21, 2023\\n\"\n+#define PNG_LIBPNG_VER_STRING \"1.6.43\"\n+#define PNG_HEADER_VERSION_STRING \" libpng version \" PNG_LIBPNG_VER_STRING \"\\n\"\n@@ -312,2 +309,4 @@\n-#define PNG_LIBPNG_VER_SONUM   16\n-#define PNG_LIBPNG_VER_DLLNUM  16\n+\/* The versions of shared library builds should stay in sync, going forward *\/\n+#define PNG_LIBPNG_VER_SHAREDLIB 16\n+#define PNG_LIBPNG_VER_SONUM     PNG_LIBPNG_VER_SHAREDLIB \/* [Deprecated] *\/\n+#define PNG_LIBPNG_VER_DLLNUM    PNG_LIBPNG_VER_SHAREDLIB \/* [Deprecated] *\/\n@@ -318,1 +317,1 @@\n-#define PNG_LIBPNG_VER_RELEASE 40\n+#define PNG_LIBPNG_VER_RELEASE 43\n@@ -321,1 +320,1 @@\n- * development version.  [Deprecated]\n+ * development version.\n@@ -349,1 +348,1 @@\n-#define PNG_LIBPNG_VER 10640 \/* 1.6.40 *\/\n+#define PNG_LIBPNG_VER 10643 \/* 1.6.43 *\/\n@@ -459,1 +458,1 @@\n-typedef char* png_libpng_version_1_6_40;\n+typedef char* png_libpng_version_1_6_43;\n@@ -880,1 +879,1 @@\n-#if INT_MAX >= 0x8000 \/* else this might break *\/\n+#if ~0U > 0xffffU \/* or else this might break on a 16-bit machine *\/\n@@ -939,1 +938,1 @@\n- * start > 7 will always fail (ie return non-zero).\n+ * start > 7 will always fail (i.e. return non-zero).\n@@ -945,1 +944,1 @@\n- * png_check_sig(sig, n) := !png_sig_cmp(sig, 0, n).\n+ * png_check_sig(sig, n) := (png_sig_cmp(sig, 0, n) == 0).\n@@ -947,1 +946,1 @@\n-#define png_check_sig(sig, n) !png_sig_cmp((sig), 0, (n))\n+#define png_check_sig(sig, n) (png_sig_cmp((sig), 0, (n)) == 0) \/* DEPRECATED *\/\n@@ -1761,1 +1760,1 @@\n-\/* Reassign responsibility for freeing existing data, whether allocated\n+\/* Reassign the responsibility for freeing existing data, whether allocated\n@@ -1763,4 +1762,1 @@\n- * in, it does not change the state for other png_info structures.\n- *\n- * It is unlikely that this function works correctly as of 1.6.0 and using it\n- * may result either in memory leaks or double free of allocated data.\n+ * in, without changing the state for other png_info structures.\n@@ -3238,1 +3234,3 @@\n-#define PNG_IGNORE_ADLER32 8\n+#ifdef PNG_DISABLE_ADLER32_CHECK_SUPPORTED\n+#  define PNG_IGNORE_ADLER32 8 \/* SOFTWARE: disable Adler32 check on IDAT *\/\n+#endif\n@@ -3240,1 +3238,2 @@\n-#  define PNG_POWERPC_VSX   10 \/* HARDWARE: PowerPC VSX SIMD instructions supported *\/\n+#  define PNG_POWERPC_VSX   10 \/* HARDWARE: PowerPC VSX SIMD instructions\n+                                * supported *\/\n@@ -3242,1 +3241,5 @@\n-#define PNG_OPTION_NEXT  12 \/* Next option - numbers must be even *\/\n+#ifdef PNG_MIPS_MMI_API_SUPPORTED\n+#  define PNG_MIPS_MMI   12 \/* HARDWARE: MIPS MMI SIMD instructions supported *\/\n+#endif\n+\n+#define PNG_OPTION_NEXT  14 \/* Next option - numbers must be even *\/\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/libpng\/png.h","additions":32,"deletions":29,"binary":false,"changes":61,"status":"modified"},{"patch":"@@ -32,1 +32,1 @@\n- * libpng version 1.6.40\n+ * libpng version 1.6.43\n@@ -34,1 +34,1 @@\n- * Copyright (c) 2018-2022 Cosmin Truta\n+ * Copyright (c) 2018-2024 Cosmin Truta\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/libpng\/pngconf.h","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -32,1 +32,1 @@\n- * Copyright (c) 2018 Cosmin Truta\n+ * Copyright (c) 2018-2024 Cosmin Truta\n@@ -286,1 +286,1 @@\n-   char buffer[PNG_NUMBER_BUFFER_SIZE];\n+   char buffer[PNG_NUMBER_BUFFER_SIZE] = {0};\n@@ -296,1 +296,1 @@\n-   char buffer[PNG_NUMBER_BUFFER_SIZE];\n+   char buffer[PNG_NUMBER_BUFFER_SIZE] = {0};\n@@ -889,1 +889,1 @@\n-   return ((png_voidp)png_ptr->error_ptr);\n+   return (png_voidp)png_ptr->error_ptr;\n@@ -964,1 +964,1 @@\n-png_safe_execute(png_imagep image_in, int (*function)(png_voidp), png_voidp arg)\n+png_safe_execute(png_imagep image, int (*function)(png_voidp), png_voidp arg)\n@@ -966,3 +966,1 @@\n-   volatile png_imagep image = image_in;\n-   volatile int result;\n-   volatile png_voidp saved_error_buf;\n+   png_voidp saved_error_buf = image->opaque->error_buf;\n@@ -970,0 +968,1 @@\n+   int result;\n@@ -971,5 +970,2 @@\n-   \/* Safely execute function(arg) with png_error returning to this function. *\/\n-   saved_error_buf = image->opaque->error_buf;\n-   result = setjmp(safe_jmpbuf) == 0;\n-\n-   if (result != 0)\n+   \/* Safely execute function(arg), with png_error returning back here. *\/\n+   if (setjmp(safe_jmpbuf) == 0)\n@@ -977,1 +973,0 @@\n-\n@@ -980,0 +975,2 @@\n+      image->opaque->error_buf = saved_error_buf;\n+      return result;\n@@ -982,0 +979,1 @@\n+   \/* On png_error, return via longjmp, pop the jmpbuf, and free the image. *\/\n@@ -983,6 +981,2 @@\n-\n-   \/* And do the cleanup prior to any failure return. *\/\n-   if (result == 0)\n-      png_image_free(image);\n-\n-   return result;\n+   png_image_free(image);\n+   return 0;\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/libpng\/pngerror.c","additions":14,"deletions":20,"binary":false,"changes":34,"status":"modified"},{"patch":"@@ -32,1 +32,1 @@\n- * Copyright (c) 2018-2023 Cosmin Truta\n+ * Copyright (c) 2018-2024 Cosmin Truta\n@@ -59,1 +59,1 @@\n-         return(0);\n+         return 0;\n@@ -62,1 +62,1 @@\n-      return(info_ptr->valid & flag);\n+      return info_ptr->valid & flag;\n@@ -65,1 +65,1 @@\n-   return(0);\n+   return 0;\n@@ -72,1 +72,1 @@\n-      return(info_ptr->rowbytes);\n+      return info_ptr->rowbytes;\n@@ -74,1 +74,1 @@\n-   return(0);\n+   return 0;\n@@ -82,1 +82,1 @@\n-      return(info_ptr->row_pointers);\n+      return info_ptr->row_pointers;\n@@ -84,1 +84,1 @@\n-   return(0);\n+   return 0;\n@@ -96,1 +96,1 @@\n-   return (0);\n+   return 0;\n@@ -105,1 +105,1 @@\n-   return (0);\n+   return 0;\n@@ -114,1 +114,1 @@\n-   return (0);\n+   return 0;\n@@ -123,1 +123,1 @@\n-   return (0);\n+   return 0;\n@@ -132,1 +132,1 @@\n-   return (0);\n+   return 0;\n@@ -141,1 +141,1 @@\n-   return (0);\n+   return 0;\n@@ -150,1 +150,1 @@\n-   return (0);\n+   return 0;\n@@ -158,0 +158,2 @@\n+   png_debug(1, \"in png_get_x_pixels_per_meter\");\n+\n@@ -160,7 +162,4 @@\n-      {\n-         png_debug1(1, \"in %s retrieval function\",\n-             \"png_get_x_pixels_per_meter\");\n-\n-         if (info_ptr->phys_unit_type == PNG_RESOLUTION_METER)\n-            return (info_ptr->x_pixels_per_unit);\n-      }\n+   {\n+      if (info_ptr->phys_unit_type == PNG_RESOLUTION_METER)\n+         return info_ptr->x_pixels_per_unit;\n+   }\n@@ -172,1 +171,1 @@\n-   return (0);\n+   return 0;\n@@ -180,0 +179,2 @@\n+   png_debug(1, \"in png_get_y_pixels_per_meter\");\n+\n@@ -183,3 +184,0 @@\n-      png_debug1(1, \"in %s retrieval function\",\n-          \"png_get_y_pixels_per_meter\");\n-\n@@ -187,1 +185,1 @@\n-         return (info_ptr->y_pixels_per_unit);\n+         return info_ptr->y_pixels_per_unit;\n@@ -194,1 +192,1 @@\n-   return (0);\n+   return 0;\n@@ -201,0 +199,2 @@\n+   png_debug(1, \"in png_get_pixels_per_meter\");\n+\n@@ -204,2 +204,0 @@\n-      png_debug1(1, \"in %s retrieval function\", \"png_get_pixels_per_meter\");\n-\n@@ -208,1 +206,1 @@\n-         return (info_ptr->x_pixels_per_unit);\n+         return info_ptr->x_pixels_per_unit;\n@@ -215,1 +213,1 @@\n-   return (0);\n+   return 0;\n@@ -224,0 +222,2 @@\n+   png_debug(1, \"in png_get_pixel_aspect_ratio\");\n+\n@@ -227,2 +227,0 @@\n-      png_debug1(1, \"in %s retrieval function\", \"png_get_aspect_ratio\");\n-\n@@ -230,2 +228,2 @@\n-         return ((float)((float)info_ptr->y_pixels_per_unit\n-             \/(float)info_ptr->x_pixels_per_unit));\n+         return (float)info_ptr->y_pixels_per_unit\n+              \/ (float)info_ptr->x_pixels_per_unit;\n@@ -238,1 +236,1 @@\n-   return ((float)0.0);\n+   return (float)0.0;\n@@ -248,0 +246,2 @@\n+   png_debug(1, \"in png_get_pixel_aspect_ratio_fixed\");\n+\n@@ -256,2 +256,0 @@\n-      png_debug1(1, \"in %s retrieval function\", \"png_get_aspect_ratio_fixed\");\n-\n@@ -278,0 +276,2 @@\n+   png_debug(1, \"in png_get_x_offset_microns\");\n+\n@@ -281,2 +281,0 @@\n-      png_debug1(1, \"in %s retrieval function\", \"png_get_x_offset_microns\");\n-\n@@ -284,1 +282,1 @@\n-         return (info_ptr->x_offset);\n+         return info_ptr->x_offset;\n@@ -291,1 +289,1 @@\n-   return (0);\n+   return 0;\n@@ -298,0 +296,2 @@\n+   png_debug(1, \"in png_get_y_offset_microns\");\n+\n@@ -301,2 +301,0 @@\n-      png_debug1(1, \"in %s retrieval function\", \"png_get_y_offset_microns\");\n-\n@@ -304,1 +302,1 @@\n-         return (info_ptr->y_offset);\n+         return info_ptr->y_offset;\n@@ -311,1 +309,1 @@\n-   return (0);\n+   return 0;\n@@ -318,0 +316,2 @@\n+   png_debug(1, \"in png_get_x_offset_pixels\");\n+\n@@ -321,2 +321,0 @@\n-      png_debug1(1, \"in %s retrieval function\", \"png_get_x_offset_pixels\");\n-\n@@ -324,1 +322,1 @@\n-         return (info_ptr->x_offset);\n+         return info_ptr->x_offset;\n@@ -331,1 +329,1 @@\n-   return (0);\n+   return 0;\n@@ -338,0 +336,2 @@\n+   png_debug(1, \"in png_get_y_offset_pixels\");\n+\n@@ -341,2 +341,0 @@\n-      png_debug1(1, \"in %s retrieval function\", \"png_get_y_offset_pixels\");\n-\n@@ -344,1 +342,1 @@\n-         return (info_ptr->y_offset);\n+         return info_ptr->y_offset;\n@@ -351,1 +349,1 @@\n-   return (0);\n+   return 0;\n@@ -465,0 +463,2 @@\n+   png_debug1(1, \"in %s retrieval function\", \"pHYs\");\n+\n@@ -468,2 +468,0 @@\n-      png_debug1(1, \"in %s retrieval function\", \"pHYs\");\n-\n@@ -495,1 +493,1 @@\n-   return (retval);\n+   return retval;\n@@ -509,1 +507,1 @@\n-      return(info_ptr->channels);\n+      return info_ptr->channels;\n@@ -511,1 +509,1 @@\n-   return (0);\n+   return 0;\n@@ -519,1 +517,1 @@\n-      return(info_ptr->signature);\n+      return info_ptr->signature;\n@@ -521,1 +519,1 @@\n-   return (NULL);\n+   return NULL;\n@@ -530,0 +528,2 @@\n+   png_debug1(1, \"in %s retrieval function\", \"bKGD\");\n+\n@@ -534,2 +534,0 @@\n-      png_debug1(1, \"in %s retrieval function\", \"bKGD\");\n-\n@@ -537,1 +535,1 @@\n-      return (PNG_INFO_bKGD);\n+      return PNG_INFO_bKGD;\n@@ -540,1 +538,1 @@\n-   return (0);\n+   return 0;\n@@ -555,0 +553,2 @@\n+   png_debug1(1, \"in %s retrieval function\", \"cHRM\");\n+\n@@ -564,2 +564,0 @@\n-      png_debug1(1, \"in %s retrieval function\", \"cHRM\");\n-\n@@ -590,1 +588,1 @@\n-      return (PNG_INFO_cHRM);\n+      return PNG_INFO_cHRM;\n@@ -593,1 +591,1 @@\n-   return (0);\n+   return 0;\n@@ -602,0 +600,2 @@\n+   png_debug1(1, \"in %s retrieval function\", \"cHRM_XYZ(float)\");\n+\n@@ -605,2 +605,0 @@\n-      png_debug1(1, \"in %s retrieval function\", \"cHRM_XYZ(float)\");\n-\n@@ -634,1 +632,1 @@\n-      return (PNG_INFO_cHRM);\n+      return PNG_INFO_cHRM;\n@@ -637,1 +635,1 @@\n-   return (0);\n+   return 0;\n@@ -650,0 +648,2 @@\n+   png_debug1(1, \"in %s retrieval function\", \"cHRM_XYZ\");\n+\n@@ -653,2 +653,0 @@\n-      png_debug1(1, \"in %s retrieval function\", \"cHRM_XYZ\");\n-\n@@ -673,1 +671,1 @@\n-      return (PNG_INFO_cHRM);\n+      return PNG_INFO_cHRM;\n@@ -676,1 +674,1 @@\n-   return (0);\n+   return 0;\n@@ -706,1 +704,1 @@\n-      return (PNG_INFO_cHRM);\n+      return PNG_INFO_cHRM;\n@@ -709,1 +707,1 @@\n-   return (0);\n+   return 0;\n@@ -727,1 +725,1 @@\n-      return (PNG_INFO_gAMA);\n+      return PNG_INFO_gAMA;\n@@ -730,1 +728,1 @@\n-   return (0);\n+   return 0;\n@@ -747,1 +745,1 @@\n-      return (PNG_INFO_gAMA);\n+      return PNG_INFO_gAMA;\n@@ -750,1 +748,1 @@\n-   return (0);\n+   return 0;\n@@ -766,1 +764,1 @@\n-      return (PNG_INFO_sRGB);\n+      return PNG_INFO_sRGB;\n@@ -769,1 +767,1 @@\n-   return (0);\n+   return 0;\n@@ -793,1 +791,1 @@\n-      return (PNG_INFO_iCCP);\n+      return PNG_INFO_iCCP;\n@@ -796,1 +794,1 @@\n-   return (0);\n+   return 0;\n@@ -806,0 +804,2 @@\n+   png_debug1(1, \"in %s retrieval function\", \"sPLT\");\n+\n@@ -812,1 +812,1 @@\n-   return (0);\n+   return 0;\n@@ -838,1 +838,1 @@\n-      return (PNG_INFO_eXIf);\n+      return PNG_INFO_eXIf;\n@@ -841,1 +841,1 @@\n-   return (0);\n+   return 0;\n@@ -856,1 +856,1 @@\n-      return (PNG_INFO_hIST);\n+      return PNG_INFO_hIST;\n@@ -859,1 +859,1 @@\n-   return (0);\n+   return 0;\n@@ -872,1 +872,1 @@\n-      return (0);\n+      return 0;\n@@ -904,1 +904,1 @@\n-   return (1);\n+   return 1;\n@@ -921,1 +921,1 @@\n-      return (PNG_INFO_oFFs);\n+      return PNG_INFO_oFFs;\n@@ -924,1 +924,1 @@\n-   return (0);\n+   return 0;\n@@ -948,1 +948,1 @@\n-      return (PNG_INFO_pCAL);\n+      return PNG_INFO_pCAL;\n@@ -951,1 +951,1 @@\n-   return (0);\n+   return 0;\n@@ -963,0 +963,2 @@\n+   png_debug1(1, \"in %s retrieval function\", \"sCAL\");\n+\n@@ -974,1 +976,1 @@\n-      return (PNG_INFO_sCAL);\n+      return PNG_INFO_sCAL;\n@@ -977,1 +979,1 @@\n-   return(0);\n+   return 0;\n@@ -986,0 +988,2 @@\n+   png_debug1(1, \"in %s retrieval function\", \"sCAL(float)\");\n+\n@@ -992,1 +996,1 @@\n-      return (PNG_INFO_sCAL);\n+      return PNG_INFO_sCAL;\n@@ -995,1 +999,1 @@\n-   return(0);\n+   return 0;\n@@ -1002,0 +1006,2 @@\n+   png_debug1(1, \"in %s retrieval function\", \"sCAL(str)\");\n+\n@@ -1008,1 +1014,1 @@\n-      return (PNG_INFO_sCAL);\n+      return PNG_INFO_sCAL;\n@@ -1011,1 +1017,1 @@\n-   return(0);\n+   return 0;\n@@ -1046,1 +1052,1 @@\n-   return (retval);\n+   return retval;\n@@ -1062,1 +1068,1 @@\n-      return (PNG_INFO_PLTE);\n+      return PNG_INFO_PLTE;\n@@ -1065,1 +1071,1 @@\n-   return (0);\n+   return 0;\n@@ -1079,1 +1085,1 @@\n-      return (PNG_INFO_sBIT);\n+      return PNG_INFO_sBIT;\n@@ -1082,1 +1088,1 @@\n-   return (0);\n+   return 0;\n@@ -1093,1 +1099,1 @@\n-      png_debug1(1, \"in 0x%lx retrieval function\",\n+      png_debug1(1, \"in text retrieval function, chunk typeid = 0x%lx\",\n@@ -1108,1 +1114,1 @@\n-   return(0);\n+   return 0;\n@@ -1123,1 +1129,1 @@\n-      return (PNG_INFO_tIME);\n+      return PNG_INFO_tIME;\n@@ -1126,1 +1132,1 @@\n-   return (0);\n+   return 0;\n@@ -1136,0 +1142,3 @@\n+\n+   png_debug1(1, \"in %s retrieval function\", \"tRNS\");\n+\n@@ -1139,2 +1148,0 @@\n-      png_debug1(1, \"in %s retrieval function\", \"tRNS\");\n-\n@@ -1172,1 +1179,1 @@\n-   return (retval);\n+   return retval;\n@@ -1187,1 +1194,1 @@\n-   return (0);\n+   return 0;\n@@ -1283,1 +1290,1 @@\n-   return (-1);\n+   return -1;\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/libpng\/pngget.c","additions":126,"deletions":119,"binary":false,"changes":245,"status":"modified"},{"patch":"@@ -34,1 +34,1 @@\n-\/* libpng version 1.6.40 *\/\n+\/* libpng version 1.6.43 *\/\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/libpng\/pnglibconf.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -32,1 +32,1 @@\n- * Copyright (c) 2018 Cosmin Truta\n+ * Copyright (c) 2018-2024 Cosmin Truta\n@@ -176,1 +176,1 @@\n-   if (png_sig_cmp(info_ptr->signature, num_checked, num_to_check))\n+   if (png_sig_cmp(info_ptr->signature, num_checked, num_to_check) != 0)\n@@ -179,1 +179,1 @@\n-          png_sig_cmp(info_ptr->signature, num_checked, num_to_check - 4))\n+          png_sig_cmp(info_ptr->signature, num_checked, num_to_check - 4) != 0)\n@@ -325,0 +325,8 @@\n+#endif\n+#ifdef PNG_READ_eXIf_SUPPORTED\n+   else if (png_ptr->chunk_name == png_eXIf)\n+   {\n+      PNG_PUSH_SAVE_BUFFER_IF_FULL\n+      png_handle_eXIf(png_ptr, info_ptr, png_ptr->push_length);\n+   }\n+\n@@ -1120,1 +1128,1 @@\n-      return (NULL);\n+      return NULL;\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/libpng\/pngpread.c","additions":12,"deletions":4,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -32,1 +32,1 @@\n- * Copyright (c) 2018-2023 Cosmin Truta\n+ * Copyright (c) 2018-2024 Cosmin Truta\n@@ -67,1 +67,1 @@\n-# define _POSIX_SOURCE 1 \/* Just the POSIX 1003.1 and C89 APIs *\/\n+#  define _POSIX_SOURCE 1 \/* Just the POSIX 1003.1 and C89 APIs *\/\n@@ -221,1 +221,2 @@\n-#  if defined(__mips_msa) && (__mips_isa_rev >= 5) && defined(PNG_ALIGNED_MEMORY_SUPPORTED)\n+#  if defined(__mips_msa) && (__mips_isa_rev >= 5) && \\\n+   defined(PNG_ALIGNED_MEMORY_SUPPORTED)\n@@ -228,0 +229,13 @@\n+#ifndef PNG_MIPS_MMI_OPT\n+#  ifdef PNG_MIPS_MMI\n+#    if defined(__mips_loongson_mmi) && (_MIPS_SIM == _ABI64) && \\\n+     defined(PNG_ALIGNED_MEMORY_SUPPORTED)\n+#       define PNG_MIPS_MMI_OPT 1\n+#    else\n+#       define PNG_MIPS_MMI_OPT 0\n+#    endif\n+#  else\n+#    define PNG_MIPS_MMI_OPT 0\n+#  endif\n+#endif\n+\n@@ -236,0 +250,8 @@\n+#ifndef PNG_LOONGARCH_LSX_OPT\n+#  if defined(__loongarch_sx)\n+#     define PNG_LOONGARCH_LSX_OPT 1\n+#  else\n+#     define PNG_LOONGARCH_LSX_OPT 0\n+#  endif\n+#endif\n+\n@@ -242,1 +264,1 @@\n-#     if defined(__SSE4_1__) || defined(__AVX__) || defined(__SSSE3__) || \\\n+#      if defined(__SSE4_1__) || defined(__AVX__) || defined(__SSSE3__) || \\\n@@ -279,1 +301,0 @@\n-#  define PNG_FILTER_OPTIMIZATIONS png_init_filter_functions_msa\n@@ -295,0 +316,1 @@\n+#     define PNG_FILTER_OPTIMIZATIONS png_init_filter_functions_mips\n@@ -300,0 +322,16 @@\n+#if PNG_MIPS_MMI_OPT > 0\n+#  ifndef PNG_MIPS_MMI_IMPLEMENTATION\n+#     if defined(__mips_loongson_mmi) && (_MIPS_SIM == _ABI64)\n+#        define PNG_MIPS_MMI_IMPLEMENTATION 2\n+#     else \/* !defined __mips_loongson_mmi  || _MIPS_SIM != _ABI64 *\/\n+#        define PNG_MIPS_MMI_IMPLEMENTATION 0\n+#     endif \/* __mips_loongson_mmi  && _MIPS_SIM == _ABI64 *\/\n+#  endif \/* !PNG_MIPS_MMI_IMPLEMENTATION *\/\n+\n+#   if PNG_MIPS_MMI_IMPLEMENTATION > 0\n+#      define PNG_FILTER_OPTIMIZATIONS png_init_filter_functions_mips\n+#   endif\n+#else\n+#   define PNG_MIPS_MMI_IMPLEMENTATION 0\n+#endif \/* PNG_MIPS_MMI_OPT > 0 *\/\n+\n@@ -307,0 +345,6 @@\n+#if PNG_LOONGARCH_LSX_OPT > 0\n+#   define PNG_FILTER_OPTIMIZATIONS png_init_filter_functions_lsx\n+#   define PNG_LOONGARCH_LSX_IMPLEMENTATION 1\n+#else\n+#   define PNG_LOONGARCH_LSX_IMPLEMENTATION 0\n+#endif\n@@ -545,12 +589,2 @@\n-#  if (defined(__MWERKS__) && defined(macintosh)) || defined(applec) || \\\n-    defined(THINK_C) || defined(__SC__) || defined(TARGET_OS_MAC)\n-   \/* We need to check that <math.h> hasn't already been included earlier\n-    * as it seems it doesn't agree with <fp.h>, yet we should really use\n-    * <fp.h> if possible.\n-    *\/\n-#    if !defined(__MATH_H__) && !defined(__MATH_H) && !defined(__cmath__)\n-#      include <fp.h>\n-#    endif\n-#  else\n-#    include <math.h>\n-#  endif\n+#  include <math.h>\n+\n@@ -1337,1 +1371,1 @@\n-#if PNG_MIPS_MSA_OPT > 0\n+#if PNG_MIPS_MSA_IMPLEMENTATION == 1\n@@ -1354,0 +1388,17 @@\n+#if PNG_MIPS_MMI_IMPLEMENTATION > 0\n+PNG_INTERNAL_FUNCTION(void,png_read_filter_row_up_mmi,(png_row_infop row_info,\n+    png_bytep row, png_const_bytep prev_row),PNG_EMPTY);\n+PNG_INTERNAL_FUNCTION(void,png_read_filter_row_sub3_mmi,(png_row_infop\n+    row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);\n+PNG_INTERNAL_FUNCTION(void,png_read_filter_row_sub4_mmi,(png_row_infop\n+    row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);\n+PNG_INTERNAL_FUNCTION(void,png_read_filter_row_avg3_mmi,(png_row_infop\n+    row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);\n+PNG_INTERNAL_FUNCTION(void,png_read_filter_row_avg4_mmi,(png_row_infop\n+    row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);\n+PNG_INTERNAL_FUNCTION(void,png_read_filter_row_paeth3_mmi,(png_row_infop\n+    row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);\n+PNG_INTERNAL_FUNCTION(void,png_read_filter_row_paeth4_mmi,(png_row_infop\n+    row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);\n+#endif\n+\n@@ -1386,0 +1437,17 @@\n+#if PNG_LOONGARCH_LSX_IMPLEMENTATION == 1\n+PNG_INTERNAL_FUNCTION(void,png_read_filter_row_up_lsx,(png_row_infop\n+    row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);\n+PNG_INTERNAL_FUNCTION(void,png_read_filter_row_sub3_lsx,(png_row_infop\n+    row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);\n+PNG_INTERNAL_FUNCTION(void,png_read_filter_row_sub4_lsx,(png_row_infop\n+    row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);\n+PNG_INTERNAL_FUNCTION(void,png_read_filter_row_avg3_lsx,(png_row_infop\n+    row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);\n+PNG_INTERNAL_FUNCTION(void,png_read_filter_row_avg4_lsx,(png_row_infop\n+    row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);\n+PNG_INTERNAL_FUNCTION(void,png_read_filter_row_paeth3_lsx,(png_row_infop\n+    row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);\n+PNG_INTERNAL_FUNCTION(void,png_read_filter_row_paeth4_lsx,(png_row_infop\n+    row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);\n+#endif\n+\n@@ -2125,2 +2193,2 @@\n-#if PNG_MIPS_MSA_OPT > 0\n-PNG_INTERNAL_FUNCTION(void, png_init_filter_functions_msa,\n+#if PNG_MIPS_MSA_IMPLEMENTATION == 1\n+PNG_INTERNAL_FUNCTION(void, png_init_filter_functions_mips,\n@@ -2130,0 +2198,5 @@\n+#  if PNG_MIPS_MMI_IMPLEMENTATION > 0\n+PNG_INTERNAL_FUNCTION(void, png_init_filter_functions_mips,\n+   (png_structp png_ptr, unsigned int bpp), PNG_EMPTY);\n+#  endif\n+\n@@ -2136,0 +2209,5 @@\n+#if PNG_LOONGARCH_LSX_OPT > 0\n+PNG_INTERNAL_FUNCTION(void, png_init_filter_functions_lsx,\n+    (png_structp png_ptr, unsigned int bpp), PNG_EMPTY);\n+#endif\n+\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/libpng\/pngpriv.h","additions":98,"deletions":20,"binary":false,"changes":118,"status":"modified"},{"patch":"@@ -32,1 +32,1 @@\n- * Copyright (c) 2018-2019 Cosmin Truta\n+ * Copyright (c) 2018-2024 Cosmin Truta\n@@ -599,1 +599,5 @@\n-   if (png_ptr->transformations)\n+   if (png_ptr->transformations\n+#     ifdef PNG_CHECK_FOR_INVALID_INDEX_SUPPORTED\n+         || png_ptr->num_palette_max >= 0\n+#     endif\n+      )\n@@ -816,1 +820,1 @@\n-       png_ptr->num_palette_max > png_ptr->num_palette)\n+       png_ptr->num_palette_max >= png_ptr->num_palette)\n@@ -1080,0 +1084,2 @@\n+   png_debug(1, \"in png_read_png\");\n+\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/libpng\/pngread.c","additions":9,"deletions":3,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -32,1 +32,1 @@\n- * Copyright (c) 2018-2019 Cosmin Truta\n+ * Copyright (c) 2018-2024 Cosmin Truta\n@@ -321,1 +321,1 @@\n-   png_debug(1, \"in png_set_alpha_mode\");\n+   png_debug(1, \"in png_set_alpha_mode_fixed\");\n@@ -328,1 +328,1 @@\n-   \/* Validate the value to ensure it is in a reasonable range. The value\n+   \/* Validate the value to ensure it is in a reasonable range.  The value\n@@ -330,3 +330,2 @@\n-    * viewing correction values.  The intent is to weed out users of this API\n-    * who use the inverse of the gamma value accidentally!  Since some of these\n-    * values are reasonable this may have to be changed:\n+    * viewing correction values.  The intent is to weed out the API users\n+    * who might use the inverse of the gamma value accidentally!\n@@ -334,2 +333,2 @@\n-    * 1.6.x: changed from 0.07..3 to 0.01..100 (to accommodate the optimal 16-bit\n-    * gamma of 36, and its reciprocal.)\n+    * In libpng 1.6.0, we changed from 0.07..3 to 0.01..100, to accommodate\n+    * the optimal 16-bit gamma of 36 and its reciprocal.\n@@ -472,1 +471,1 @@\n-          (png_alloc_size_t)((png_uint_32)num_palette * (sizeof (png_byte))));\n+          (png_alloc_size_t)num_palette);\n@@ -489,1 +488,1 @@\n-             (png_alloc_size_t)((png_uint_32)num_palette * (sizeof (png_byte))));\n+             (png_alloc_size_t)num_palette);\n@@ -623,2 +622,1 @@\n-             (png_alloc_size_t)((png_uint_32)num_palette *\n-             (sizeof (png_byte))));\n+             (png_alloc_size_t)num_palette);\n@@ -626,2 +624,1 @@\n-             (png_alloc_size_t)((png_uint_32)num_palette *\n-             (sizeof (png_byte))));\n+             (png_alloc_size_t)num_palette);\n@@ -792,1 +789,1 @@\n-          (png_alloc_size_t)(num_entries * (sizeof (png_byte))));\n+          (png_alloc_size_t)(num_entries));\n@@ -794,2 +791,1 @@\n-      distance = (png_bytep)png_malloc(png_ptr, (png_alloc_size_t)(num_entries *\n-          (sizeof (png_byte))));\n+      distance = (png_bytep)png_malloc(png_ptr, (png_alloc_size_t)num_entries);\n@@ -797,1 +793,1 @@\n-      memset(distance, 0xff, num_entries * (sizeof (png_byte)));\n+      memset(distance, 0xff, num_entries);\n@@ -1001,1 +997,1 @@\n-   png_debug(1, \"in png_set_rgb_to_gray\");\n+   png_debug(1, \"in png_set_rgb_to_gray_fixed\");\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/libpng\/pngrtran.c","additions":15,"deletions":19,"binary":false,"changes":34,"status":"modified"},{"patch":"@@ -32,1 +32,1 @@\n- * Copyright (c) 2018-2022 Cosmin Truta\n+ * Copyright (c) 2018-2024 Cosmin Truta\n@@ -57,1 +57,1 @@\n-   return (uval);\n+   return uval;\n@@ -171,1 +171,1 @@\n-          png_sig_cmp(info_ptr->signature, num_checked, num_to_check - 4))\n+          png_sig_cmp(info_ptr->signature, num_checked, num_to_check - 4) != 0)\n@@ -202,1 +202,1 @@\n-   png_debug2(0, \"Reading %lx chunk, length = %lu\",\n+   png_debug2(0, \"Reading chunk typeid = 0x%lx, length = %lu\",\n@@ -269,1 +269,1 @@\n-      return (1);\n+      return 1;\n@@ -272,1 +272,1 @@\n-   return (0);\n+   return 0;\n@@ -308,1 +308,1 @@\n-      return ((int)(crc != png_ptr->crc));\n+      return crc != png_ptr->crc;\n@@ -312,1 +312,1 @@\n-      return (0);\n+      return 0;\n@@ -452,2 +452,1 @@\n-#if ZLIB_VERNUM >= 0x1290 && \\\n-   defined(PNG_SET_OPTION_SUPPORTED) && defined(PNG_IGNORE_ADLER32)\n+#ifdef PNG_DISABLE_ADLER32_CHECK_SUPPORTED\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/libpng\/pngrutil.c","additions":9,"deletions":10,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -32,1 +32,1 @@\n- * Copyright (c) 2018-2023 Cosmin Truta\n+ * Copyright (c) 2018-2024 Cosmin Truta\n@@ -794,2 +794,2 @@\n-   png_debug1(1, \"in %lx storage function\", png_ptr == NULL ? 0xabadca11U :\n-      (unsigned long)png_ptr->chunk_name);\n+   png_debug1(1, \"in text storage function, chunk typeid = 0x%lx\",\n+      png_ptr == NULL ? 0xabadca11UL : (unsigned long)png_ptr->chunk_name);\n@@ -798,1 +798,1 @@\n-      return(0);\n+      return 0;\n@@ -978,1 +978,1 @@\n-   return(0);\n+   return 0;\n@@ -1094,0 +1094,2 @@\n+   png_debug1(1, \"in %s storage function\", \"sPLT\");\n+\n@@ -1568,1 +1570,1 @@\n-   png_debug1(1, \"in %s storage function\", \"rows\");\n+   png_debug(1, \"in png_set_rows\");\n@@ -1587,0 +1589,2 @@\n+   png_debug(1, \"in png_set_compression_buffer_size\");\n+\n@@ -1658,0 +1662,2 @@\n+   png_debug(1, \"in png_set_user_limits\");\n+\n@@ -1673,0 +1679,2 @@\n+   png_debug(1, \"in png_set_chunk_cache_max\");\n+\n@@ -1682,0 +1690,2 @@\n+   png_debug(1, \"in png_set_chunk_malloc_max\");\n+\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/libpng\/pngset.c","additions":16,"deletions":6,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -32,1 +32,1 @@\n- * Copyright (c) 2018 Cosmin Truta\n+ * Copyright (c) 2018-2024 Cosmin Truta\n@@ -134,1 +134,1 @@\n-      return (7);\n+      return 7;\n@@ -137,1 +137,1 @@\n-   return (1);\n+   return 1;\n@@ -529,0 +529,2 @@\n+   png_debug(1, \"in png_do_strip_channel\");\n+\n@@ -729,0 +731,2 @@\n+   png_debug(1, \"in png_do_check_palette_indexes\");\n+\n@@ -739,1 +743,1 @@\n-      png_bytep rp = png_ptr->row_buf + row_info->rowbytes - 1;\n+      png_bytep rp = png_ptr->row_buf + row_info->rowbytes;\n@@ -864,1 +868,1 @@\n-      return (NULL);\n+      return NULL;\n","filename":"src\/java.desktop\/share\/native\/libsplashscreen\/libpng\/pngtrans.c","additions":9,"deletions":5,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -344,1 +344,2 @@\n-                if (getMWMDecorTitleProperty().isPresent()) {\n+                if ((XWM.getWMID() == XWM.MUTTER_WM && !isTargetUndecorated() && isVisible())\n+                    || getMWMDecorTitleProperty().isPresent()) {\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/X11\/XDecoratedPeer.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -1372,0 +1372,3 @@\n+              case MUTTER_WM:\n+                  res = new Insets(37, 0, 0, 0);\n+                  break;\n@@ -1383,0 +1386,1 @@\n+\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/X11\/XWM.java","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -29,0 +29,1 @@\n+import sun.java2d.pipe.Region;\n@@ -31,0 +32,1 @@\n+import java.awt.GraphicsConfiguration;\n@@ -34,0 +36,1 @@\n+import java.awt.geom.AffineTransform;\n@@ -38,0 +41,2 @@\n+import java.util.Timer;\n+import java.util.TimerTask;\n@@ -57,0 +62,7 @@\n+    private static final int DELAY_BEFORE_SESSION_CLOSE = 2000;\n+\n+    private static volatile TimerTask timerTask = null;\n+    private static final Timer timerCloseSession\n+            = new Timer(\"auto-close screencast session\", true);\n+\n+\n@@ -103,3 +115,31 @@\n-                .map(graphicsDevice ->\n-                        graphicsDevice.getDefaultConfiguration().getBounds()\n-                ).toList();\n+                .map(graphicsDevice -> {\n+                    GraphicsConfiguration gc =\n+                            graphicsDevice.getDefaultConfiguration();\n+                    Rectangle screen = gc.getBounds();\n+                    AffineTransform tx = gc.getDefaultTransform();\n+\n+                    return new Rectangle(\n+                            Region.clipRound(screen.x * tx.getScaleX()),\n+                            Region.clipRound(screen.y * tx.getScaleY()),\n+                            Region.clipRound(screen.width * tx.getScaleX()),\n+                            Region.clipRound(screen.height * tx.getScaleY())\n+                    );\n+                })\n+                .toList();\n+    }\n+\n+    private static synchronized native void closeSession();\n+\n+    private static void timerCloseSessionRestart() {\n+        if (timerTask != null) {\n+            timerTask.cancel();\n+        }\n+\n+        timerTask = new TimerTask() {\n+            @Override\n+            public void run() {\n+                closeSession();\n+            }\n+        };\n+\n+        timerCloseSession.schedule(timerTask, DELAY_BEFORE_SESSION_CLOSE);\n@@ -113,0 +153,2 @@\n+        timerCloseSessionRestart();\n+\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/screencast\/ScreencastHelper.java","additions":45,"deletions":3,"binary":false,"changes":48,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2023, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -40,0 +40,2 @@\n+import java.security.AccessController;\n+import java.security.PrivilegedAction;\n@@ -61,0 +63,1 @@\n+@SuppressWarnings(\"removal\")\n@@ -72,0 +75,10 @@\n+    private static void doPrivilegedRunnable(Runnable runnable) {\n+        AccessController.doPrivileged(new PrivilegedAction<Void>() {\n+            @Override\n+            public Void run() {\n+                runnable.run();\n+                return null;\n+            }\n+        });\n+    }\n+\n@@ -73,1 +86,7 @@\n-        PROPS_PATH = setupPath();\n+        PROPS_PATH = AccessController.doPrivileged(new PrivilegedAction<Path>() {\n+            @Override\n+            public Path run() {\n+                return setupPath();\n+            }\n+        });\n+\n@@ -195,1 +214,1 @@\n-                        setFilePermission(PROPS_PATH);\n+                        doPrivilegedRunnable(() -> setFilePermission(PROPS_PATH));\n@@ -197,1 +216,1 @@\n-                        readTokens(PROPS_PATH);\n+                        doPrivilegedRunnable(() -> readTokens(PROPS_PATH));\n@@ -210,0 +229,2 @@\n+    private static WatchService watchService;\n+\n@@ -211,3 +232,4 @@\n-        try {\n-            WatchService watchService =\n-                    FileSystems.getDefault().newWatchService();\n+        doPrivilegedRunnable(() -> {\n+            try {\n+                watchService =\n+                        FileSystems.getDefault().newWatchService();\n@@ -215,6 +237,6 @@\n-            PROPS_PATH\n-                    .getParent()\n-                    .register(watchService,\n-                            ENTRY_CREATE,\n-                            ENTRY_DELETE,\n-                            ENTRY_MODIFY);\n+                PROPS_PATH\n+                        .getParent()\n+                        .register(watchService,\n+                                ENTRY_CREATE,\n+                                ENTRY_DELETE,\n+                                ENTRY_MODIFY);\n@@ -222,5 +244,5 @@\n-            new WatcherThread(watchService).start();\n-        } catch (Exception e) {\n-            if (SCREENCAST_DEBUG) {\n-                System.err.printf(\"Token storage: failed to setup \" +\n-                        \"file watch %s\\n\", e);\n+            } catch (Exception e) {\n+                if (SCREENCAST_DEBUG) {\n+                    System.err.printf(\"Token storage: failed to setup \" +\n+                            \"file watch %s\\n\", e);\n+                }\n@@ -228,0 +250,4 @@\n+        });\n+\n+        if (watchService != null) {\n+            new WatcherThread(watchService).start();\n@@ -279,1 +305,1 @@\n-                store(\"save tokens\");\n+                doPrivilegedRunnable(() -> store(\"save tokens\"));\n@@ -327,0 +353,4 @@\n+                    .sorted((t1, t2) -> \/\/Token with more screens preferred\n+                            t2.allowedScreensBounds.size()\n+                            - t1.allowedScreensBounds.size()\n+                    )\n@@ -330,1 +360,1 @@\n-        removeMalformedRecords(malformed);\n+        doPrivilegedRunnable(() -> removeMalformedRecords(malformed));\n@@ -368,0 +398,11 @@\n+        \/\/ 3. add tokens with the same or greater number of screens\n+        \/\/ This is useful if we once received a token with one screen resolution\n+        \/\/ and the same screen was later scaled in the system.\n+        \/\/ In that case, the token is still valid.\n+\n+        allTokenItems\n+                .stream()\n+                .filter(t ->\n+                        t.allowedScreensBounds.size() >= affectedScreenBounds.size())\n+                .forEach(result::add);\n+\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/screencast\/TokenStorage.java","additions":61,"deletions":20,"binary":false,"changes":81,"status":"modified"},{"patch":"@@ -53,2 +53,0 @@\n-extern int XShmQueryExtension();\n-\n","filename":"src\/java.desktop\/unix\/native\/common\/awt\/awt_GraphicsEnv.h","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -61,1 +61,1 @@\n-\n+void (*fp_pw_deinit)(void);\n","filename":"src\/java.desktop\/unix\/native\/libawt_xawt\/awt\/fp_pipewire.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -1095,2 +1095,2 @@\n-    if ((synth_state & MOUSE_OVER) != 0 && (synth_state & PRESSED) == 0 ||\n-           (synth_state & FOCUSED) != 0 && (synth_state & PRESSED) != 0) {\n+    if ((((synth_state & MOUSE_OVER) != 0) && ((synth_state & PRESSED) == 0)) ||\n+           (((synth_state & FOCUSED) != 0) && ((synth_state & PRESSED) != 0))) {\n@@ -1468,1 +1468,1 @@\n-                    (*fp_gtk_notebook_new)(NULL);\n+                    (*fp_gtk_notebook_new)();\n@@ -1476,1 +1476,1 @@\n-                    (*fp_gtk_toggle_button_new)(NULL);\n+                    (*fp_gtk_toggle_button_new)();\n@@ -1485,1 +1485,1 @@\n-                    (*fp_gtk_toolbar_new)(NULL);\n+                    (*fp_gtk_toolbar_new)();\n","filename":"src\/java.desktop\/unix\/native\/libawt_xawt\/awt\/gtk2_interface.c","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -322,0 +322,4 @@\n+        fp_gdk_pixbuf_new_from_data = dl_symbol(\"gdk_pixbuf_new_from_data\");\n+        fp_gdk_pixbuf_scale_simple = dl_symbol(\"gdk_pixbuf_scale_simple\");\n+        fp_gdk_pixbuf_copy_area = dl_symbol(\"gdk_pixbuf_copy_area\");\n+\n@@ -607,0 +611,1 @@\n+        fp_g_string_set_size = dl_symbol(\"g_string_set_size\");\n@@ -1254,1 +1259,1 @@\n-                    (*fp_gtk_notebook_new)(NULL);\n+                    (*fp_gtk_notebook_new)();\n@@ -1262,1 +1267,1 @@\n-                    (*fp_gtk_toggle_button_new)(NULL);\n+                    (*fp_gtk_toggle_button_new)();\n@@ -1271,1 +1276,1 @@\n-                    (*fp_gtk_toolbar_new)(NULL);\n+                    (*fp_gtk_toolbar_new)();\n@@ -3113,0 +3118,1 @@\n+    gtk->g_string_set_size = fp_g_string_set_size;\n@@ -3121,0 +3127,6 @@\n+\n+    gtk->gdk_pixbuf_new = fp_gdk_pixbuf_new;\n+    gtk->gdk_pixbuf_new_from_data = fp_gdk_pixbuf_new_from_data;\n+    gtk->gdk_pixbuf_scale_simple = fp_gdk_pixbuf_scale_simple;\n+    gtk->gdk_pixbuf_get_pixels = fp_gdk_pixbuf_get_pixels;\n+    gtk->gdk_pixbuf_copy_area = fp_gdk_pixbuf_copy_area;\n","filename":"src\/java.desktop\/unix\/native\/libawt_xawt\/awt\/gtk3_interface.c","additions":15,"deletions":3,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -531,0 +531,24 @@\n+\n+static GdkPixbuf *(*fp_gdk_pixbuf_new_from_data)(\n+        const guchar *data,\n+        GdkColorspace colorspace,\n+        gboolean has_alpha,\n+        int bits_per_sample,\n+        int width,\n+        int height,\n+        int rowstride,\n+        GdkPixbufDestroyNotify destroy_fn,\n+        gpointer destroy_fn_data\n+);\n+\n+static void (*fp_gdk_pixbuf_copy_area) (\n+        const GdkPixbuf* src_pixbuf,\n+        int src_x,\n+        int src_y,\n+        int width,\n+        int height,\n+        GdkPixbuf* dest_pixbuf,\n+        int dest_x,\n+        int dest_y\n+);\n+\n@@ -761,0 +785,3 @@\n+static GString *(*fp_g_string_set_size)(GString* string,\n+                                        gsize len);\n+\n","filename":"src\/java.desktop\/unix\/native\/libawt_xawt\/awt\/gtk3_interface.h","additions":27,"deletions":0,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -535,0 +535,2 @@\n+typedef void GdkPixbuf;\n+typedef void (* GdkPixbufDestroyNotify) (guchar *pixels, gpointer data);\n@@ -719,0 +721,4 @@\n+    GString *(*g_string_set_size)(GString* string,\n+                                  gsize len);\n+\n+\n@@ -796,0 +802,40 @@\n+    GdkPixbuf *(*gdk_pixbuf_new)(GdkColorspace colorspace,\n+                                 gboolean has_alpha,\n+                                 int bits_per_sample,\n+                                 int width,\n+                                 int height);\n+\n+\n+    GdkPixbuf *(*gdk_pixbuf_new_from_data)(\n+            const guchar *data,\n+            GdkColorspace colorspace,\n+            gboolean has_alpha,\n+            int bits_per_sample,\n+            int width,\n+            int height,\n+            int rowstride,\n+            GdkPixbufDestroyNotify destroy_fn,\n+            gpointer destroy_fn_data\n+    );\n+\n+\n+    GdkPixbuf *(*gdk_pixbuf_scale_simple)(GdkPixbuf *src,\n+                                          int dest_width,\n+                                          int dest_heigh,\n+                                          GdkInterpType interp_type\n+    );\n+\n+    guchar* (*gdk_pixbuf_get_pixels) (const GdkPixbuf* pixbuf);\n+\n+\n+    void (*gdk_pixbuf_copy_area) (\n+            const GdkPixbuf* src_pixbuf,\n+            int src_x,\n+            int src_y,\n+            int width,\n+            int height,\n+            GdkPixbuf* dest_pixbuf,\n+            int dest_x,\n+            int dest_y\n+    );\n+\n","filename":"src\/java.desktop\/unix\/native\/libawt_xawt\/awt\/gtk_interface.h","additions":46,"deletions":0,"binary":false,"changes":46,"status":"modified"},{"patch":"@@ -46,0 +46,4 @@\n+static gboolean hasPipewireFailed = FALSE;\n+static gboolean sessionClosed = TRUE;\n+static GString *activeSessionToken;\n+\n@@ -88,0 +92,5 @@\n+    if (pw.loop) {\n+        DEBUG_SCREENCAST(\"STOPPING loop\\n\", NULL);\n+        fp_pw_thread_loop_stop(pw.loop);\n+    }\n+\n@@ -115,2 +124,0 @@\n-    DEBUG_SCREENCAST(\"STOPPING loop\\n\", NULL)\n-\n@@ -118,1 +125,0 @@\n-        fp_pw_thread_loop_stop(pw.loop);\n@@ -126,0 +132,5 @@\n+        screenSpace.screenCount = 0;\n+    }\n+\n+    if (!sessionClosed) {\n+        fp_pw_deinit();\n@@ -127,0 +138,3 @@\n+\n+    gtk->g_string_set_size(activeSessionToken, 0);\n+    sessionClosed = TRUE;\n@@ -135,0 +149,18 @@\n+    gboolean isSameToken = !token\n+            ? FALSE\n+            : strcmp(token, activeSessionToken->str) == 0;\n+\n+    if (!sessionClosed) {\n+        if (isSameToken) {\n+            DEBUG_SCREENCAST(\"Reusing active session.\\n\", NULL);\n+            return TRUE;\n+        } else {\n+            DEBUG_SCREENCAST(\n+                    \"Active session has a different token |%s| -> |%s|,\"\n+                    \" closing current session.\\n\",\n+                    activeSessionToken->str, token\n+            );\n+            doCleanup();\n+        }\n+    }\n+\n@@ -148,0 +180,3 @@\n+    gtk->g_string_printf(activeSessionToken, \"%s\", token);\n+    hasPipewireFailed = FALSE;\n+    sessionClosed = FALSE;\n@@ -151,43 +186,0 @@\n-static inline void convertRGBxToBGRx(int* in) {\n-    char* o = (char*) in;\n-    char tmp = o[0];\n-    o[0] = o[2];\n-    o[2] = tmp;\n-}\n-\n-static gchar * cropTo(\n-        struct spa_data data,\n-        struct spa_video_info_raw raw,\n-        guint32 x,\n-        guint32 y,\n-        guint32 width,\n-        guint32 height\n-) {\n-    int srcW = raw.size.width;\n-    if (data.chunk->stride \/ 4 != srcW) {\n-        fprintf(stderr, \"%s:%i Unexpected stride \/ 4: %i srcW: %i\\n\",\n-                __func__, __LINE__, data.chunk->stride \/ 4, srcW);\n-    }\n-\n-    int* d = data.data;\n-\n-    int *outData = calloc(width * height, sizeof(int));\n-    if (!outData) {\n-        ERR(\"failed to allocate memory\\n\");\n-        return NULL;\n-    }\n-\n-    gboolean needConversion = raw.format != SPA_VIDEO_FORMAT_BGRx;\n-    for (guint32 j = y; j < y + height; ++j) {\n-        for (guint32 i = x; i < x + width; ++i) {\n-            int color = *(d + (j * srcW) + i);\n-            if (needConversion) {\n-                convertRGBxToBGRx(&color);\n-            }\n-            *(outData + ((j - y) * width) + (i - x)) = color;\n-        }\n-    }\n-\n-    return (gchar*) outData;\n-}\n-\n@@ -277,0 +269,3 @@\n+    gint streamWidth = data->rawFormat.size.width;\n+    gint streamHeight = data->rawFormat.size.height;\n+\n@@ -280,1 +275,1 @@\n-                        \"flags %d FD %li captureDataReady %i\\n\",\n+                        \"flags %d FD %li captureDataReady %i of stream %dx%d\\n\",\n@@ -286,1 +281,3 @@\n-                        screen->captureDataReady\n+                        screen->captureDataReady,\n+                        streamWidth,\n+                        streamHeight\n@@ -289,6 +286,58 @@\n-    data->screenProps->captureData = cropTo(\n-            spaData,\n-            data->rawFormat,\n-            screen->captureArea.x, screen->captureArea.y,\n-            screen->captureArea.width, screen->captureArea.height\n-    );\n+    GdkRectangle captureArea = screen->captureArea;\n+    GdkRectangle screenBounds = screen->bounds;\n+\n+    GdkPixbuf *pixbuf = gtk->gdk_pixbuf_new_from_data(spaData.data,\n+                                                      GDK_COLORSPACE_RGB,\n+                                                      TRUE,\n+                                                      8,\n+                                                      streamWidth,\n+                                                      streamHeight,\n+                                                      spaData.chunk->stride,\n+                                                      NULL,\n+                                                      NULL);\n+\n+    if (screen->bounds.width != streamWidth\n+        || screen->bounds.height != streamHeight) {\n+\n+        DEBUG_SCREEN_PREFIX(screen, \"scaling stream data %dx%d -> %dx%d\\n\",\n+                         streamWidth, streamHeight,\n+                         screen->bounds.width, screen->bounds.height\n+        );\n+\n+        GdkPixbuf *scaled = gtk->gdk_pixbuf_scale_simple(pixbuf,\n+                                                         screen->bounds.width,\n+                                                         screen->bounds.height,\n+                                                         GDK_INTERP_BILINEAR);\n+\n+        gtk->g_object_unref(pixbuf);\n+        pixbuf = scaled;\n+    }\n+\n+    GdkPixbuf *cropped = NULL;\n+    if (captureArea.width != screenBounds.width\n+        || captureArea.height != screenBounds.height) {\n+\n+        cropped = gtk->gdk_pixbuf_new(GDK_COLORSPACE_RGB,\n+                                      TRUE,\n+                                      8,\n+                                      captureArea.width,\n+                                      captureArea.height);\n+        if (cropped) {\n+            gtk->gdk_pixbuf_copy_area(pixbuf,\n+                                      captureArea.x,\n+                                      captureArea.y,\n+                                      captureArea.width,\n+                                      captureArea.height,\n+                                      cropped,\n+                                      0, 0);\n+        } else {\n+            ERR(\"Cannot create a new pixbuf.\\n\");\n+        }\n+\n+        gtk->g_object_unref(pixbuf);\n+        pixbuf = NULL;\n+\n+        data->screenProps->captureDataPixbuf = cropped;\n+    } else {\n+        data->screenProps->captureDataPixbuf = pixbuf;\n+    }\n@@ -300,0 +349,2 @@\n+\n+    fp_pw_thread_loop_signal(pw.loop, FALSE);\n@@ -313,0 +364,6 @@\n+    if (state == PW_STREAM_STATE_ERROR\n+        || state == PW_STREAM_STATE_UNCONNECTED) {\n+\n+        hasPipewireFailed = TRUE;\n+        fp_pw_thread_loop_signal(pw.loop, FALSE);\n+    }\n@@ -342,5 +399,1 @@\n-            SPA_POD_CHOICE_ENUM_Id(\n-                    2,\n-                    SPA_VIDEO_FORMAT_RGBx,\n-                    SPA_VIDEO_FORMAT_BGRx\n-            ),\n+            SPA_POD_Id(SPA_VIDEO_FORMAT_BGRx),\n@@ -389,1 +442,8 @@\n-    data->hasFormat = FALSE;\n+    if (!sessionClosed && data->stream) {\n+        fp_pw_thread_loop_lock(pw.loop);\n+        int result = fp_pw_stream_set_active(data->stream, TRUE);\n+        fp_pw_thread_loop_unlock(pw.loop);\n+\n+        DEBUG_SCREEN_PREFIX(data->screenProps,\n+                            \"stream %p: activate result |%i|\\n\",\n+                            data->stream, result);\n@@ -391,0 +451,4 @@\n+        return result == 0; \/\/ 0 - success\n+    };\n+\n+    data->hasFormat = FALSE;\n@@ -428,0 +492,5 @@\n+        fp_pw_thread_loop_accept(pw.loop);\n+        if (hasPipewireFailed) {\n+            fp_pw_thread_loop_unlock(pw.loop);\n+            return FALSE;\n+        }\n@@ -435,2 +504,0 @@\n-    fp_pw_thread_loop_accept(pw.loop);\n-\n@@ -494,1 +561,6 @@\n-    fp_pw_thread_loop_unlock(pw.loop);\n+    if (id == PW_ID_CORE) {\n+        fp_pw_thread_loop_lock(pw.loop);\n+        hasPipewireFailed = TRUE;\n+        fp_pw_thread_loop_signal(pw.loop, FALSE);\n+        fp_pw_thread_loop_unlock(pw.loop);\n+    }\n@@ -508,1 +580,3 @@\n-    pw.loop = fp_pw_thread_loop_new(\"AWT Pipewire Thread\", NULL);\n+    gboolean isLoopLockTaken = FALSE;\n+    if (!pw.loop && !sessionClosed) {\n+        pw.loop = fp_pw_thread_loop_new(\"AWT Pipewire Thread\", NULL);\n@@ -510,17 +584,5 @@\n-    if (!pw.loop) {\n-        DEBUG_SCREENCAST(\"!!! Could not create a loop\\n\", NULL);\n-        doCleanup();\n-        return FALSE;\n-    }\n-\n-    pw.context = fp_pw_context_new(\n-            fp_pw_thread_loop_get_loop(pw.loop),\n-            NULL,\n-            0\n-    );\n-\n-    if (!pw.context) {\n-        DEBUG_SCREENCAST(\"!!! Could not create a pipewire context\\n\", NULL);\n-        doCleanup();\n-        return FALSE;\n-    }\n+        if (!pw.loop) {\n+            DEBUG_SCREENCAST(\"!!! Could not create a loop\\n\", NULL);\n+            doCleanup();\n+            return FALSE;\n+        }\n@@ -528,5 +590,5 @@\n-    if (fp_pw_thread_loop_start(pw.loop) != 0) {\n-        DEBUG_SCREENCAST(\"!!! Could not start pipewire thread loop\\n\", NULL);\n-        doCleanup();\n-        return FALSE;\n-    }\n+        pw.context = fp_pw_context_new(\n+                fp_pw_thread_loop_get_loop(pw.loop),\n+                NULL,\n+                0\n+        );\n@@ -534,1 +596,5 @@\n-    fp_pw_thread_loop_lock(pw.loop);\n+        if (!pw.context) {\n+            DEBUG_SCREENCAST(\"!!! Could not create a pipewire context\\n\", NULL);\n+            doCleanup();\n+            return FALSE;\n+        }\n@@ -536,6 +602,5 @@\n-    pw.core = fp_pw_context_connect_fd(\n-            pw.context,\n-            pw.pwFd,\n-            NULL,\n-            0\n-    );\n+        if (fp_pw_thread_loop_start(pw.loop) != 0) {\n+            DEBUG_SCREENCAST(\"!!! Could not start pipewire thread loop\\n\", NULL);\n+            doCleanup();\n+            return FALSE;\n+        }\n@@ -543,4 +608,2 @@\n-    if (!pw.core) {\n-        DEBUG_SCREENCAST(\"!!! Could not create pipewire core\\n\", NULL);\n-        goto fail;\n-    }\n+        fp_pw_thread_loop_lock(pw.loop);\n+        isLoopLockTaken = TRUE;\n@@ -548,1 +611,6 @@\n-    pw_core_add_listener(pw.core, &pw.coreListener, &coreEvents, NULL);\n+        pw.core = fp_pw_context_connect_fd(\n+                pw.context,\n+                pw.pwFd,\n+                NULL,\n+                0\n+        );\n@@ -550,5 +618,2 @@\n-    for (int i = 0; i < screenSpace.screenCount; ++i) {\n-        struct PwStreamData *data =\n-                (struct PwStreamData*) malloc(sizeof (struct PwStreamData));\n-        if (!data) {\n-            ERR(\"failed to allocate memory\\n\");\n+        if (!pw.core) {\n+            DEBUG_SCREENCAST(\"!!! Could not create pipewire core\\n\", NULL);\n@@ -558,1 +623,2 @@\n-        memset(data, 0, sizeof (struct PwStreamData));\n+        pw_core_add_listener(pw.core, &pw.coreListener, &coreEvents, NULL);\n+    }\n@@ -560,0 +626,1 @@\n+    for (int i = 0; i < screenSpace.screenCount; ++i) {\n@@ -561,1 +628,12 @@\n-        screen->data = data;\n+        if (!screen->data && !sessionClosed) {\n+            struct PwStreamData *data =\n+                    (struct PwStreamData*) malloc(sizeof (struct PwStreamData));\n+            if (!data) {\n+                ERR(\"failed to allocate memory\\n\");\n+                goto fail;\n+            }\n+\n+            memset(data, 0, sizeof (struct PwStreamData));\n+\n+            screen->data = data;\n+        }\n@@ -572,1 +650,3 @@\n-    fp_pw_thread_loop_unlock(pw.loop);\n+    if (isLoopLockTaken) {\n+        fp_pw_thread_loop_unlock(pw.loop);\n+    }\n@@ -577,1 +657,3 @@\n-        fp_pw_thread_loop_unlock(pw.loop);\n+        if (isLoopLockTaken) {\n+            fp_pw_thread_loop_unlock(pw.loop);\n+        }\n@@ -633,0 +715,1 @@\n+    LOAD_SYMBOL(fp_pw_deinit, \"pw_deinit\");\n@@ -749,0 +832,2 @@\n+    activeSessionToken = gtk->g_string_new(\"\");\n+\n@@ -786,0 +871,38 @@\n+static int makeScreencast(\n+        const gchar *token,\n+        GdkRectangle *requestedArea,\n+        GdkRectangle *affectedScreenBounds,\n+        gint affectedBoundsLength\n+) {\n+    if (!initScreencast(token, affectedScreenBounds, affectedBoundsLength)) {\n+        return pw.pwFd;\n+    }\n+\n+    if (!doLoop(*requestedArea)) {\n+        return RESULT_ERROR;\n+    }\n+\n+    while (!isAllDataReady()) {\n+        fp_pw_thread_loop_lock(pw.loop);\n+        fp_pw_thread_loop_wait(pw.loop);\n+        fp_pw_thread_loop_unlock(pw.loop);\n+        if (hasPipewireFailed) {\n+            doCleanup();\n+            return RESULT_ERROR;\n+        }\n+    }\n+\n+    return RESULT_OK;\n+}\n+\n+\/*\n+ * Class:     sun_awt_screencast_ScreencastHelper\n+ * Method:    closeSession\n+ * Signature: ()V\n+ *\/\n+JNIEXPORT void JNICALL\n+Java_sun_awt_screencast_ScreencastHelper_closeSession(JNIEnv *env, jclass cls) {\n+    DEBUG_SCREENCAST(\"closing screencast session\\n\\n\", NULL);\n+    doCleanup();\n+}\n+\n@@ -808,1 +931,1 @@\n-            DEBUG_SCREENCAST(\"%s:%i incorrect array length\\n\", __FUNCTION__, __LINE__);\n+            DEBUG_SCREENCAST(\"incorrect array length\\n\", NULL);\n@@ -831,9 +954,2 @@\n-    if (!initScreencast(token, affectedScreenBounds, affectedBoundsLength)) {\n-        releaseToken(env, jtoken, token);\n-        return pw.pwFd;\n-    }\n-\n-    if (!doLoop(requestedArea)) {\n-        releaseToken(env, jtoken, token);\n-        return RESULT_ERROR;\n-    }\n+    int attemptResult = makeScreencast(\n+        token, &requestedArea, affectedScreenBounds, affectedBoundsLength);\n@@ -841,2 +957,13 @@\n-    while (!isAllDataReady()) {\n-        fp_pw_thread_loop_wait(pw.loop);\n+    if (attemptResult) {\n+        if (attemptResult == RESULT_DENIED) {\n+            releaseToken(env, jtoken, token);\n+            return attemptResult;\n+        }\n+        DEBUG_SCREENCAST(\"Screencast attempt failed with %i, re-trying...\\n\",\n+                         attemptResult);\n+        attemptResult = makeScreencast(\n+            token, &requestedArea, affectedScreenBounds, affectedBoundsLength);\n+        if (attemptResult) {\n+            releaseToken(env, jtoken, token);\n+            return attemptResult;\n+        }\n@@ -858,1 +985,1 @@\n-                                i, screenProps->captureData,\n+                                i, screenProps->captureDataPixbuf,\n@@ -872,1 +999,1 @@\n-            if (screenProps->captureData) {\n+            if (screenProps->captureDataPixbuf) {\n@@ -887,2 +1014,4 @@\n-                            ((jint *) screenProps->captureData)\n-                                + (captureArea.width * y)\n+                            ((jint *) gtk->gdk_pixbuf_get_pixels(\n+                                    screenProps->captureDataPixbuf\n+                            ))\n+                            + (captureArea.width * y)\n@@ -893,2 +1022,4 @@\n-            free(screenProps->captureData);\n-            screenProps->captureData = NULL;\n+            if (screenProps->captureDataPixbuf) {\n+                gtk->g_object_unref(screenProps->captureDataPixbuf);\n+                screenProps->captureDataPixbuf = NULL;\n+            }\n@@ -899,1 +1030,0 @@\n-            fp_pw_stream_disconnect(screenProps->data->stream);\n@@ -901,0 +1031,2 @@\n+\n+            screenProps->captureDataReady = FALSE;\n@@ -903,1 +1035,1 @@\n-    doCleanup();\n+\n","filename":"src\/java.desktop\/unix\/native\/libawt_xawt\/awt\/screencast_pipewire.c","additions":259,"deletions":127,"binary":false,"changes":386,"status":"modified"},{"patch":"@@ -51,1 +51,1 @@\n-    gchar *captureData;\n+    GdkPixbuf *captureDataPixbuf;\n","filename":"src\/java.desktop\/unix\/native\/libawt_xawt\/awt\/screencast_pipewire.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -780,0 +780,4 @@\n+    if (!portal) {\n+        return;\n+    }\n+\n@@ -799,3 +803,0 @@\n-    if (!portal) {\n-        return;\n-    }\n","filename":"src\/java.desktop\/unix\/native\/libawt_xawt\/awt\/screencast_portal.c","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -525,1 +525,1 @@\n-        if (special1 || special2) {\n+        if (special1 && special2) {\n","filename":"src\/java.desktop\/windows\/classes\/sun\/awt\/shell\/Win32ShellFolderManager2.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -56,1 +56,1 @@\n-    public static synchronized final SchemaDVFactory getInstance() throws DVFactoryException {\n+    public static final SchemaDVFactory getInstance() throws DVFactoryException {\n@@ -69,1 +69,1 @@\n-    public static synchronized final SchemaDVFactory getInstance(String factoryClass) throws DVFactoryException {\n+    public static final SchemaDVFactory getInstance(String factoryClass) throws DVFactoryException {\n@@ -81,1 +81,1 @@\n-    protected SchemaDVFactory(){}\n+    protected SchemaDVFactory() {}\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/xerces\/internal\/impl\/dv\/SchemaDVFactory.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -1572,2 +1572,9 @@\n-                if (frameStack.head.tree.hasTag(LAMBDA)) {\n-                    lambdaContext.addSymbol(tree.sym, LOCAL_VAR);\n+                for (Frame frame : frameStack) {\n+                    if (frame.tree.hasTag(VARDEF)) {\n+                        \/\/skip variable frames inside a lambda:\n+                        continue;\n+                    } else if (frame.tree.hasTag(LAMBDA)) {\n+                        lambdaContext.addSymbol(tree.sym, LOCAL_VAR);\n+                    } else {\n+                        break;\n+                    }\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/comp\/LambdaToMethod.java","additions":9,"deletions":2,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -911,0 +911,1 @@\n+                       !currentNullable &&\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/comp\/TransPatterns.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -457,3 +457,12 @@\n-            if (encrypt) {\n-                token.p11.C_EncryptInit(session.id(), mechWithParams,\n-                    p11KeyID);\n+\n+            if (type == Transformation.AES_GCM) {\n+                CK_VERSION cryptokiVersion = token.p11.getVersion();\n+                boolean useNormativeMechFirst = cryptokiVersion.major > 2 ||\n+                    (cryptokiVersion.major == 2  && cryptokiVersion.minor >= 40);\n+                if (encrypt) {\n+                    token.p11.C_GCMEncryptInitWithRetry(session.id(), mechWithParams,\n+                        p11KeyID, useNormativeMechFirst);\n+                } else {\n+                    token.p11.C_GCMDecryptInitWithRetry(session.id(), mechWithParams,\n+                        p11KeyID, useNormativeMechFirst);\n+                }\n@@ -461,2 +470,7 @@\n-                token.p11.C_DecryptInit(session.id(), mechWithParams,\n-                    p11KeyID);\n+                if (encrypt) {\n+                    token.p11.C_EncryptInit(session.id(), mechWithParams,\n+                        p11KeyID);\n+                } else {\n+                    token.p11.C_DecryptInit(session.id(), mechWithParams,\n+                        p11KeyID);\n+                }\n","filename":"src\/jdk.crypto.cryptoki\/share\/classes\/sun\/security\/pkcs11\/P11AEADCipher.java","additions":20,"deletions":6,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -802,0 +802,18 @@\n+    \/**\n+     * C_GCMEncryptInitWithRetry initializes a GCM encryption operation and retry\n+     * with alternative param structure for max compatibility.\n+     * (Encryption and decryption)\n+     *\n+     * @param hSession the session's handle\n+     *         (PKCS#11 param: CK_SESSION_HANDLE hSession)\n+     * @param pMechanism the encryption mechanism\n+     *         (PKCS#11 param: CK_MECHANISM_PTR pMechanism)\n+     * @param hKey the handle of the encryption key\n+     *         (PKCS#11 param: CK_OBJECT_HANDLE hKey)\n+     * @param useNormativeVerFirst whether to use normative version of GCM parameter first\n+     * @exception PKCS11Exception If function returns other value than CKR_OK.\n+     * @preconditions\n+     * @postconditions\n+     *\/\n+    public native void C_GCMEncryptInitWithRetry(long hSession, CK_MECHANISM pMechanism,\n+            long hKey, boolean useNormativeVerFirst) throws PKCS11Exception;\n@@ -896,0 +914,18 @@\n+    \/**\n+     * C_GCMDecryptInitWithRetry initializes a GCM decryption operation\n+     * with alternative param structure for max compatibility.\n+     * (Encryption and decryption)\n+     *\n+     * @param hSession the session's handle\n+     *         (PKCS#11 param: CK_SESSION_HANDLE hSession)\n+     * @param pMechanism the decryption mechanism\n+     *         (PKCS#11 param: CK_MECHANISM_PTR pMechanism)\n+     * @param hKey the handle of the decryption key\n+     *         (PKCS#11 param: CK_OBJECT_HANDLE hKey)\n+     * @param useNormativeVerFirst whether to use normative version of GCM parameter first\n+     * @exception PKCS11Exception If function returns other value than CKR_OK.\n+     * @preconditions\n+     * @postconditions\n+     *\/\n+    public native void C_GCMDecryptInitWithRetry(long hSession, CK_MECHANISM pMechanism,\n+            long hKey, boolean useNormativeVerFirst) throws PKCS11Exception;\n","filename":"src\/jdk.crypto.cryptoki\/share\/classes\/sun\/security\/pkcs11\/wrapper\/PKCS11.java","additions":36,"deletions":0,"binary":false,"changes":36,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -1017,2 +1017,3 @@\n- * converts the Java CK_GCM_PARAMS object to a CK_GCM_PARAMS_NO_IVBITS pointer\n- * Note: Need to try NSS definition first to avoid SIGSEGV.\n+ * converts the Java CK_GCM_PARAMS object to a CK_GCM_PARAMS pointer\n+ * Note: Early NSS versions crash w\/ CK_GCM_PARAMS and need to use\n+ * CK_GCM_PARAMS_NO_IVBITS to avoid SIGSEGV.\n@@ -1023,1 +1024,1 @@\n- * @return pointer to the new CK_GCM_PARAMS_NO_IVBITS structure\n+ * @return pointer to the new CK_GCM_PARAMS structure\n@@ -1025,1 +1026,1 @@\n-CK_GCM_PARAMS_NO_IVBITS_PTR\n+CK_GCM_PARAMS_PTR\n@@ -1028,1 +1029,1 @@\n-    CK_GCM_PARAMS_NO_IVBITS_PTR ckParamPtr;\n+    CK_GCM_PARAMS_PTR ckParamPtr;\n@@ -1056,2 +1057,2 @@\n-    \/\/ allocate memory for CK_GCM_PARAMS_NO_IVBITS pointer\n-    ckParamPtr = calloc(1, sizeof(CK_GCM_PARAMS_NO_IVBITS));\n+    \/\/ allocate memory for CK_GCM_PARAMS pointer\n+    ckParamPtr = calloc(1, sizeof(CK_GCM_PARAMS));\n@@ -1068,0 +1069,2 @@\n+    \/\/ adjust since the value is in bits\n+    ckParamPtr->ulIvBits = ckParamPtr->ulIvLen << 3;\n@@ -1077,1 +1080,1 @@\n-        *pLength = sizeof(CK_GCM_PARAMS_NO_IVBITS);\n+        *pLength = sizeof(CK_GCM_PARAMS);\n@@ -1079,1 +1082,1 @@\n-    TRACE1(\"Created inner GCM_PARAMS PTR w\/o ulIvBits %p\\n\", ckParamPtr);\n+    TRACE1(\"Created inner GCM_PARAMS PTR %p\\n\", ckParamPtr);\n","filename":"src\/jdk.crypto.cryptoki\/share\/native\/libj2pkcs11\/p11_convert.c","additions":13,"deletions":10,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -75,1 +75,0 @@\n-    CK_MECHANISM_PTR ckpTemp;\n@@ -93,10 +92,50 @@\n-    if (ckpMechanism->mechanism == CKM_AES_GCM) {\n-        if (rv == CKR_ARGUMENTS_BAD || rv == CKR_MECHANISM_PARAM_INVALID) {\n-            \/\/ retry with CKM_GCM_PARAMS structure in pkcs11t.h\n-            TRACE0(\"DEBUG C_EncryptInit: retry with CK_GCM_PARAMS\\n\");\n-            ckpTemp = updateGCMParams(env, ckpMechanism);\n-            if (ckpTemp != NULL) { \/\/ only re-call if conversion succeeds\n-                ckpMechanism = ckpTemp;\n-                rv = (*ckpFunctions->C_EncryptInit)(ckSessionHandle, ckpMechanism,\n-                        ckKeyHandle);\n-            }\n+    TRACE1(\"DEBUG C_EncryptInit: freed pMech = %p\\n\", ckpMechanism);\n+    freeCKMechanismPtr(ckpMechanism);\n+    if (ckAssertReturnValueOK(env, rv) != CK_ASSERT_OK) { return; }\n+\n+    TRACE0(\"FINISHED\\n\");\n+}\n+\n+\/*\n+ * Class:     sun_security_pkcs11_wrapper_PKCS11\n+ * Method:    C_GCMEncryptInitWithRetry\n+ * Signature: (JLsun\/security\/pkcs11\/wrapper\/CK_MECHANISM;JZ)V\n+ * Parametermapping:                    *PKCS11*\n+ * @param   jlong jSessionHandle        CK_SESSION_HANDLE hSession\n+ * @param   jobject jMechanism          CK_MECHANISM_PTR pMechanism\n+ * @param   jlong jKeyHandle            CK_OBJECT_HANDLE hKey\n+ * @param   jboolean useNormVerFirst    CK_BBOOL retry (only retry if the first\n+ *                                      init uses the non-normative version)\n+ *\/\n+JNIEXPORT void JNICALL\n+Java_sun_security_pkcs11_wrapper_PKCS11_C_1GCMEncryptInitWithRetry\n+(JNIEnv *env, jobject obj, jlong jSessionHandle,\n+ jobject jMechanism, jlong jKeyHandle, jboolean useNormVerFirst)\n+{\n+    CK_SESSION_HANDLE ckSessionHandle;\n+    CK_MECHANISM_PTR ckpMechanism = NULL;\n+    CK_OBJECT_HANDLE ckKeyHandle;\n+    CK_BBOOL retry = FALSE;\n+    CK_RV rv = 1;\n+\n+    CK_FUNCTION_LIST_PTR ckpFunctions = getFunctionList(env, obj);\n+    if (ckpFunctions == NULL) { return; }\n+\n+    ckSessionHandle = jLongToCKULong(jSessionHandle);\n+    ckKeyHandle = jLongToCKULong(jKeyHandle);\n+    ckpMechanism = jMechanismToCKMechanismPtr(env, jMechanism);\n+\n+    if ((*env)->ExceptionCheck(env)) { return; }\n+\n+    \/\/ if !useNormVerFirst, then update 'ckpMechanism' in place w\/\n+    \/\/ non-normative GCM params.\n+    retry = (!useNormVerFirst && updateGCMParams(env, ckpMechanism) != NULL);\n+\n+    rv = (*ckpFunctions->C_EncryptInit)(ckSessionHandle, ckpMechanism, ckKeyHandle);\n+\n+    if (rv == CKR_ARGUMENTS_BAD || rv == CKR_MECHANISM_PARAM_INVALID) {\n+        \/\/ retry and update 'ckpMechanism' in place w\/ normative GCM params.\n+        if (retry && updateGCMParams(env, ckpMechanism) != NULL) {\n+            TRACE0(\"DEBUG retry C_EncryptInit\\n\");\n+            rv = (*ckpFunctions->C_EncryptInit)(ckSessionHandle,\n+                ckpMechanism, ckKeyHandle);\n@@ -106,1 +145,1 @@\n-    TRACE1(\"DEBUG C_EncryptInit: freed pMech = %p\\n\", ckpMechanism);\n+    TRACE1(\"DEBUG C_GCMEncryptInitWithRetry: freed pMech = %p\\n\", ckpMechanism);\n@@ -315,1 +354,0 @@\n-    CK_MECHANISM_PTR ckpTemp;\n@@ -333,10 +371,51 @@\n-    if (ckpMechanism->mechanism == CKM_AES_GCM) {\n-        if (rv == CKR_ARGUMENTS_BAD || rv == CKR_MECHANISM_PARAM_INVALID) {\n-            \/\/ retry with CKM_GCM_PARAMS structure in pkcs11t.h\n-            TRACE0(\"DEBUG C_DecryptInit: retry with CK_GCM_PARAMS\\n\");\n-            ckpTemp = updateGCMParams(env, ckpMechanism);\n-            if (ckpTemp != NULL) { \/\/ only re-call if conversion succeeds\n-                ckpMechanism = ckpTemp;\n-                rv = (*ckpFunctions->C_DecryptInit)(ckSessionHandle, ckpMechanism,\n-                        ckKeyHandle);\n-            }\n+    TRACE1(\"DEBUG C_DecryptInit: freed pMech = %p\\n\", ckpMechanism);\n+    freeCKMechanismPtr(ckpMechanism);\n+    if (ckAssertReturnValueOK(env, rv) != CK_ASSERT_OK) { return; }\n+\n+    TRACE0(\"FINISHED\\n\");\n+}\n+\n+\/*\n+ * Class:     sun_security_pkcs11_wrapper_PKCS11\n+ * Method:    C_GCMDecryptInitWithRetry\n+ * Signature: (JLsun\/security\/pkcs11\/wrapper\/CK_MECHANISM;JZ)V\n+ * Parametermapping:                    *PKCS11*\n+ * @param   jlong jSessionHandle        CK_SESSION_HANDLE hSession\n+ * @param   jobject jMechanism          CK_MECHANISM_PTR pMechanism\n+ * @param   jlong jKeyHandle            CK_OBJECT_HANDLE hKey\n+ * @param   jboolean useNormVerFirst    CK_BBOOL retry (only retry if the first\n+ *                                      init uses the non-normative version)\n+ *\/\n+JNIEXPORT void JNICALL\n+Java_sun_security_pkcs11_wrapper_PKCS11_C_1GCMDecryptInitWithRetry\n+(JNIEnv *env, jobject obj, jlong jSessionHandle,\n+ jobject jMechanism, jlong jKeyHandle, jboolean useNormVerFirst)\n+{\n+    CK_SESSION_HANDLE ckSessionHandle;\n+    CK_MECHANISM_PTR ckpMechanism = NULL;\n+    CK_OBJECT_HANDLE ckKeyHandle;\n+    CK_BBOOL retry = FALSE;\n+    CK_RV rv = 1;\n+\n+    CK_FUNCTION_LIST_PTR ckpFunctions = getFunctionList(env, obj);\n+    if (ckpFunctions == NULL) { return; }\n+\n+    ckSessionHandle = jLongToCKULong(jSessionHandle);\n+    ckKeyHandle = jLongToCKULong(jKeyHandle);\n+    ckpMechanism = jMechanismToCKMechanismPtr(env, jMechanism);\n+\n+    if ((*env)->ExceptionCheck(env)) { return; }\n+\n+    \/\/ if !useNormVerFirst, then update 'ckpMechanism' in place w\/\n+    \/\/ non-normative GCM params.\n+    retry = (!useNormVerFirst && updateGCMParams(env, ckpMechanism) != NULL);\n+\n+    rv = (*ckpFunctions->C_DecryptInit)(ckSessionHandle, ckpMechanism,\n+        ckKeyHandle);\n+\n+    if (rv == CKR_ARGUMENTS_BAD || rv == CKR_MECHANISM_PARAM_INVALID) {\n+        \/\/ retry and update 'ckpMechanism' in place w\/ normative GCM params.\n+        if (retry && updateGCMParams(env, ckpMechanism) != NULL) {\n+            TRACE0(\"DEBUG retry C_DecryptInit with normative CK_GCM_PARAMS\\n\");\n+            rv = (*ckpFunctions->C_DecryptInit)(ckSessionHandle, ckpMechanism,\n+                ckKeyHandle);\n@@ -346,1 +425,1 @@\n-    TRACE1(\"DEBUG C_DecryptInit: freed pMech = %p\\n\", ckpMechanism);\n+    TRACE1(\"DEBUG C_GCMDecryptInitWithRetry: freed pMech = %p\\n\", ckpMechanism);\n","filename":"src\/jdk.crypto.cryptoki\/share\/native\/libj2pkcs11\/p11_crypt.c","additions":104,"deletions":25,"binary":false,"changes":129,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -330,5 +330,1 @@\n-                     if (mechPtr->ulParameterLen == sizeof(CK_GCM_PARAMS_NO_IVBITS)) {\n-                         TRACE0(\"[ GCM_PARAMS w\/o ulIvBits ]\\n\");\n-                         free(((CK_GCM_PARAMS_NO_IVBITS*)tmp)->pIv);\n-                         free(((CK_GCM_PARAMS_NO_IVBITS*)tmp)->pAAD);\n-                     } else if (mechPtr->ulParameterLen == sizeof(CK_GCM_PARAMS)) {\n+                     if (mechPtr->ulParameterLen == sizeof(CK_GCM_PARAMS)) {\n@@ -338,0 +334,4 @@\n+                     } else if (mechPtr->ulParameterLen == sizeof(CK_GCM_PARAMS_NO_IVBITS)) {\n+                         TRACE0(\"[ GCM_PARAMS w\/o ulIvBits ]\\n\");\n+                         free(((CK_GCM_PARAMS_NO_IVBITS*)tmp)->pIv);\n+                         free(((CK_GCM_PARAMS_NO_IVBITS*)tmp)->pAAD);\n@@ -454,3 +454,3 @@\n-\/* This function replaces the CK_GCM_PARAMS_NO_IVBITS structure associated\n- * with the specified CK_MECHANISM structure with CK_GCM_PARAMS\n- * structure.\n+\/* This function updates the specified CK_MECHANISM structure\n+ * and its GCM parameter structure switching between CK_GCM_PARAMS and\n+ * CK_GCM_PARAMS_NO_IVBITS.\n@@ -459,1 +459,1 @@\n- * the to-be-converted CK_GCM_PARAMS_NO_IVBITS structure.\n+ * the to-be-converted CK_GCM_PARAMS \/ CK_GCM_PARAMS_NO_IVBITS structure.\n@@ -461,1 +461,1 @@\n- * converted CK_GCM_PARAMS structure or NULL if no conversion took place.\n+ * converted structure or NULL if no conversion is done.\n@@ -464,9 +464,35 @@\n-    CK_GCM_PARAMS* pGcmParams2 = NULL;\n-    CK_GCM_PARAMS_NO_IVBITS* pParams = NULL;\n-    if ((mechPtr->mechanism == CKM_AES_GCM) &&\n-            (mechPtr->pParameter != NULL_PTR) &&\n-            (mechPtr->ulParameterLen == sizeof(CK_GCM_PARAMS_NO_IVBITS))) {\n-        pGcmParams2 = calloc(1, sizeof(CK_GCM_PARAMS));\n-        if (pGcmParams2 == NULL) {\n-            p11ThrowOutOfMemoryError(env, 0);\n-            return NULL;\n+    CK_GCM_PARAMS_PTR pParams;\n+    CK_GCM_PARAMS_NO_IVBITS_PTR pParamsNoIvBits;\n+    CK_ULONG paramLen;\n+\n+    if (mechPtr != NULL) {\n+        paramLen = mechPtr->ulParameterLen;\n+        if (paramLen == sizeof(CK_GCM_PARAMS)) {\n+            \/\/ CK_GCM_PARAMS => CK_GCM_PARAMS_NO_IVBITS\n+            pParams = (CK_GCM_PARAMS*) mechPtr->pParameter;\n+            pParamsNoIvBits = calloc(1, sizeof(CK_GCM_PARAMS_NO_IVBITS));\n+            pParamsNoIvBits->pIv = pParams->pIv;\n+            pParamsNoIvBits->ulIvLen = pParams->ulIvLen;\n+            pParamsNoIvBits->pAAD = pParams->pAAD;\n+            pParamsNoIvBits->ulAADLen = pParams->ulAADLen;\n+            pParamsNoIvBits->ulTagBits = pParams->ulTagBits;\n+            mechPtr->pParameter = pParamsNoIvBits;\n+            mechPtr->ulParameterLen = sizeof(CK_GCM_PARAMS_NO_IVBITS);\n+            free(pParams);\n+            TRACE0(\"DEBUG update CK_GCM_PARAMS to CK_GCM_PARAMS_NO_IVBITS\\n\");\n+            return mechPtr;\n+        } else if (paramLen == sizeof(CK_GCM_PARAMS_NO_IVBITS)) {\n+            \/\/ CK_GCM_PARAMS_NO_IVBITS => CK_GCM_PARAMS\n+            pParamsNoIvBits = (CK_GCM_PARAMS_NO_IVBITS*) mechPtr->pParameter;\n+            pParams = calloc(1, sizeof(CK_GCM_PARAMS));\n+            pParams->pIv = pParamsNoIvBits->pIv;\n+            pParams->ulIvLen = pParamsNoIvBits->ulIvLen;\n+            pParams->ulIvBits = pParamsNoIvBits->ulIvLen << 3;\n+            pParams->pAAD = pParamsNoIvBits->pAAD;\n+            pParams->ulAADLen = pParamsNoIvBits->ulAADLen;\n+            pParams->ulTagBits = pParamsNoIvBits->ulTagBits;\n+            mechPtr->pParameter = pParams;\n+            mechPtr->ulParameterLen = sizeof(CK_GCM_PARAMS);\n+            free(pParamsNoIvBits);\n+            TRACE0(\"DEBUG update CK_GCM_PARAMS_NO_IVBITS to CK_GCM_PARAMS\\n\");\n+            return mechPtr;\n@@ -474,16 +500,0 @@\n-        pParams = (CK_GCM_PARAMS_NO_IVBITS*) mechPtr->pParameter;\n-        pGcmParams2->pIv = pParams->pIv;\n-        pGcmParams2->ulIvLen = pParams->ulIvLen;\n-        pGcmParams2->ulIvBits = (pGcmParams2->ulIvLen << 3);\n-        pGcmParams2->pAAD = pParams->pAAD;\n-        pGcmParams2->ulAADLen = pParams->ulAADLen;\n-        pGcmParams2->ulTagBits = pParams->ulTagBits;\n-        TRACE1(\"DEBUG updateGCMParams: pMech %p\\n\", mechPtr);\n-        TRACE2(\"\\t=> GCM param w\/o ulIvBits %p => GCM param %p\\n\", pParams,\n-                pGcmParams2);\n-        free(pParams);\n-        mechPtr->pParameter = pGcmParams2;\n-        mechPtr->ulParameterLen = sizeof(CK_GCM_PARAMS);\n-        return mechPtr;\n-    } else {\n-        TRACE0(\"DEBUG updateGCMParams: no conversion done\\n\");\n@@ -491,0 +501,1 @@\n+    TRACE0(\"DEBUG updateGCMParams: no conversion done\\n\");\n","filename":"src\/jdk.crypto.cryptoki\/share\/native\/libj2pkcs11\/p11_util.c","additions":47,"deletions":36,"binary":false,"changes":83,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -106,1 +106,0 @@\n-    dlerror(); \/* clear any old error message not fetched *\/\n@@ -127,3 +126,0 @@\n-    \/\/ clear any old error message not fetched\n-    dlerror();\n-\n@@ -161,1 +157,14 @@\n-    if (jGetFunctionList != NULL) {\n+    \/\/ if none specified, then we try 3.0 API first before trying 2.40\n+    if (jGetFunctionList == NULL) {\n+        C_GetInterface = (CK_C_GetInterface) dlsym(hModule, \"C_GetInterface\");\n+        if (C_GetInterface != NULL) {\n+            TRACE0(\"Connect: Found C_GetInterface func\\n\");\n+            rv = (C_GetInterface)(NULL, NULL, &interface, 0L);\n+            \/\/ don't use ckAssertReturnValueOK as we want to continue trying\n+            \/\/ C_GetFunctionList() or method named by \"getFunctionListStr\"\n+            if (rv == CKR_OK && interface != NULL) {\n+                goto setModuleData;\n+            }\n+        }\n+        getFunctionListStr = \"C_GetFunctionList\";\n+    } else {\n@@ -167,1 +176,4 @@\n-        C_GetFunctionList = (CK_C_GetFunctionList) dlsym(hModule,\n+    }\n+\n+    dlerror(); \/\/ clear any old error message not fetched\n+    C_GetFunctionList = (CK_C_GetFunctionList) dlsym(hModule,\n@@ -169,0 +181,1 @@\n+    if (C_GetFunctionList == NULL) {\n@@ -170,0 +183,2 @@\n+            TRACE2(\"Connect: error finding %s func: %s\\n\", getFunctionListStr,\n+                systemErrorMessage);\n@@ -171,3 +186,1 @@\n-            goto cleanup;\n-        }\n-        if (C_GetFunctionList == NULL) {\n+        } else {\n@@ -176,23 +189,0 @@\n-            goto cleanup;\n-        }\n-        TRACE1(\"Connect: Found %s func\\n\", getFunctionListStr);\n-    } else {\n-        \/\/ if none specified, then we try 3.0 API first before trying 2.40\n-        C_GetInterface = (CK_C_GetInterface) dlsym(hModule, \"C_GetInterface\");\n-        if ((C_GetInterface != NULL) && (dlerror() == NULL)) {\n-            TRACE0(\"Connect: Found C_GetInterface func\\n\");\n-            rv = (C_GetInterface)(NULL, NULL, &interface, 0L);\n-            if (ckAssertReturnValueOK(env, rv) == CK_ASSERT_OK) {\n-                goto setModuleData;\n-            }\n-        }\n-        C_GetFunctionList = (CK_C_GetFunctionList) dlsym(hModule,\n-                \"C_GetFunctionList\");\n-        if ((systemErrorMessage = dlerror()) != NULL){\n-            p11ThrowIOException(env, systemErrorMessage);\n-            goto cleanup;\n-        }\n-        if (C_GetFunctionList == NULL) {\n-            TRACE0(\"Connect: No C_GetFunctionList func\\n\");\n-            p11ThrowIOException(env, \"ERROR: C_GetFunctionList == NULL\");\n-            goto cleanup;\n@@ -200,1 +190,1 @@\n-        TRACE0(\"Connect: Found C_GetFunctionList func\\n\");\n+        goto cleanup;\n@@ -202,0 +192,1 @@\n+    TRACE1(\"Connect: Found %s func\\n\", getFunctionListStr);\n@@ -222,3 +213,0 @@\n-        if (((CK_VERSION *)moduleData->ckFunctionListPtr)->major == 3) {\n-            moduleData->ckFunctionList30Ptr = interface->pFunctionList;\n-        }\n@@ -230,1 +218,2 @@\n-    if (((CK_VERSION *)moduleData->ckFunctionListPtr)->major == 3) {\n+    if (((CK_VERSION *)moduleData->ckFunctionListPtr)->major == 3 &&\n+            interface != NULL) {\n","filename":"src\/jdk.crypto.cryptoki\/unix\/native\/libj2pkcs11\/p11_md.c","additions":27,"deletions":38,"binary":false,"changes":65,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -189,1 +189,1 @@\n-            if (ckAssertReturnValueOK(env, rv) == CK_ASSERT_OK) {\n+            if (rv == CKR_OK && interface != NULL) {\n@@ -237,1 +237,2 @@\n-    if (((CK_VERSION *)moduleData->ckFunctionListPtr)->major == 3) {\n+    if (((CK_VERSION *)moduleData->ckFunctionListPtr)->major == 3 &&\n+            interface != NULL) {\n","filename":"src\/jdk.crypto.cryptoki\/windows\/native\/libj2pkcs11\/p11_md.c","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -123,1 +123,0 @@\n-\n","filename":"src\/jdk.hotspot.agent\/share\/classes\/sun\/jvm\/hotspot\/code\/CodeBlob.java","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -60,1 +60,0 @@\n-  private static int CLASS_STATE_BEING_LINKED;\n@@ -101,1 +100,0 @@\n-    CLASS_STATE_BEING_LINKED = db.lookupIntConstant(\"InstanceKlass::being_linked\").intValue();\n@@ -155,1 +153,0 @@\n-     public static final ClassState BEING_LINKED = new ClassState(\"beingLinked\");\n@@ -179,2 +176,0 @@\n-     } else if (state == CLASS_STATE_BEING_LINKED) {\n-        return ClassState.BEING_LINKED;\n","filename":"src\/jdk.hotspot.agent\/share\/classes\/sun\/jvm\/hotspot\/oops\/InstanceKlass.java","additions":0,"deletions":5,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2003, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2003, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -22,1 +22,1 @@\n-#  \n+#\n","filename":"src\/jdk.hotspot.agent\/test\/libproc\/Makefile","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -60,1 +60,0 @@\n-import java.util.Iterator;\n@@ -525,0 +524,1 @@\n+                                    \/\/ check if connection is being closed\n@@ -531,0 +531,1 @@\n+                                        handle (chan, conn);\n@@ -532,1 +533,0 @@\n-                                    handle (chan, conn);\n@@ -1022,12 +1022,1 @@\n-            ArrayList<HttpConnection> toClose = new ArrayList<>();\n-            final long currentTime = System.currentTimeMillis();\n-            synchronized (idleConnections) {\n-                final Iterator<HttpConnection> it = idleConnections.iterator();\n-                while (it.hasNext()) {\n-                    final HttpConnection c = it.next();\n-                    if (currentTime - c.idleStartTime >= IDLE_INTERVAL) {\n-                        toClose.add(c);\n-                        it.remove();\n-                    }\n-                }\n-            }\n+            closeConnections(idleConnections, IDLE_INTERVAL);\n@@ -1036,8 +1025,10 @@\n-            synchronized (newlyAcceptedConnections) {\n-                final Iterator<HttpConnection> it = newlyAcceptedConnections.iterator();\n-                while (it.hasNext()) {\n-                    final HttpConnection c = it.next();\n-                    if (currentTime - c.idleStartTime >= NEWLY_ACCEPTED_CONN_IDLE_INTERVAL) {\n-                        toClose.add(c);\n-                        it.remove();\n-                    }\n+            closeConnections(newlyAcceptedConnections, NEWLY_ACCEPTED_CONN_IDLE_INTERVAL);\n+        }\n+\n+        private void closeConnections(Set<HttpConnection> connections, long idleInterval) {\n+            long currentTime = System.currentTimeMillis();\n+            ArrayList<HttpConnection> toClose = new ArrayList<>();\n+\n+            connections.forEach(c -> {\n+                if (currentTime - c.idleStartTime >= idleInterval) {\n+                    toClose.add(c);\n@@ -1045,1 +1036,1 @@\n-            }\n+            });\n@@ -1047,4 +1038,8 @@\n-                allConnections.remove(c);\n-                c.close();\n-                if (logger.isLoggable(Level.TRACE)) {\n-                    logger.log(Level.TRACE, \"Closed idle connection \" + c);\n+                \/\/ check if connection still idle\n+                if (currentTime - c.idleStartTime >= idleInterval &&\n+                        connections.remove(c)) {\n+                    allConnections.remove(c);\n+                    c.close();\n+                    if (logger.isLoggable(Level.TRACE)) {\n+                        logger.log(Level.TRACE, \"Closed idle connection \" + c);\n+                    }\n","filename":"src\/jdk.httpserver\/share\/classes\/sun\/net\/httpserver\/ServerImpl.java","additions":22,"deletions":27,"binary":false,"changes":49,"status":"modified"},{"patch":"@@ -189,1 +189,2 @@\n-Reads \\f[V]jar\\f[R] options and file names from a text file.\n+Reads \\f[V]jar\\f[R] options and file names from a text file as if they\n+were supplied on the command line\n@@ -333,3 +334,3 @@\n-To shorten or simplify the \\f[V]jar\\f[R] command, you can specify\n-arguments in a separate text file and pass it to the \\f[V]jar\\f[R]\n-command with the at sign (\\f[V]\\[at]\\f[R]) as a prefix.\n+To shorten or simplify the \\f[V]jar\\f[R] command, you can provide an arg\n+file that lists the files to include in the JAR file and pass it to the\n+\\f[V]jar\\f[R] command with the at sign (\\f[V]\\[at]\\f[R]) as a prefix.\n@@ -340,0 +341,3 @@\n+.PP\n+If one or more entries in the arg file cannot be found then the jar\n+command fails without creating the JAR file.\n","filename":"src\/jdk.jartool\/share\/man\/jar.1","additions":8,"deletions":4,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -120,0 +120,1 @@\n+import static com.sun.source.doctree.DocTree.Kind.START_ELEMENT;\n@@ -1136,1 +1137,10 @@\n-    boolean ignoreNonInlineTag(DocTree dtree) {\n+    \/\/ helper methods because jdk21 functionality is not allowed\n+    private static Name getLastHelper(List<Name> l) {\n+        return l.get(l.size() - 1);\n+    }\n+\n+    private static Name removeLastHelper(List<Name> l) {\n+        return l.remove(l.size() - 1);\n+    }\n+\n+    boolean ignoreNonInlineTag(DocTree dtree, List<Name> openTags) {\n@@ -1138,6 +1148,5 @@\n-        if (dtree.getKind() == Kind.START_ELEMENT) {\n-            StartElementTree setree = (StartElementTree)dtree;\n-            name = setree.getName();\n-        } else if (dtree.getKind() == Kind.END_ELEMENT) {\n-            EndElementTree eetree = (EndElementTree)dtree;\n-            name = eetree.getName();\n+        Kind kind = dtree.getKind();\n+        if (kind == Kind.START_ELEMENT) {\n+            name = ((StartElementTree)dtree).getName();\n+        } else if (kind == Kind.END_ELEMENT) {\n+            name = ((EndElementTree)dtree).getName();\n@@ -1148,3 +1157,11 @@\n-            if (htmlTag != null &&\n-                    htmlTag.blockType != jdk.javadoc.internal.doclint.HtmlTag.BlockType.INLINE) {\n-                return true;\n+            if (htmlTag != null) {\n+                if (htmlTag.blockType != HtmlTag.BlockType.INLINE) {\n+                    return true;\n+                }\n+                \/\/ Keep track of open inline tags that need to be closed, see 8326332\n+                if (kind == START_ELEMENT && htmlTag.endKind == HtmlTag.EndKind.REQUIRED) {\n+                    openTags.add(name);\n+                } else if (kind == Kind.END_ELEMENT && !openTags.isEmpty()\n+                        && getLastHelper(openTags).equals(name)) {\n+                    removeLastHelper(openTags);\n+                }\n@@ -1222,0 +1239,1 @@\n+        List<Name> openTags = new ArrayList<>();\n@@ -1230,1 +1248,1 @@\n-                if (ignoreNonInlineTag(tag))\n+                if (ignoreNonInlineTag(tag, openTags)) {\n@@ -1232,0 +1250,1 @@\n+                }\n@@ -1236,1 +1255,1 @@\n-                        && ((tag instanceof TextTree tt) && tt.getBody().isBlank()))\n+                        && ((tag instanceof TextTree tt) && tt.getBody().isBlank())) {\n@@ -1238,0 +1257,1 @@\n+                }\n@@ -1488,0 +1508,4 @@\n+        \/\/ Close any open inline tags\n+        while (!openTags.isEmpty()) {\n+            result.add(RawHtml.endElement(removeLastHelper(openTags)));\n+        }\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/HtmlDocletWriter.java","additions":36,"deletions":12,"binary":false,"changes":48,"status":"modified"},{"patch":"@@ -1,10909 +0,0 @@\n-\/*!\n- * jQuery JavaScript Library v3.6.1\n- * https:\/\/jquery.com\/\n- *\n- * Includes Sizzle.js\n- * https:\/\/sizzlejs.com\/\n- *\n- * Copyright OpenJS Foundation and other contributors\n- * Released under the MIT license\n- * https:\/\/jquery.org\/license\n- *\n- * Date: 2022-08-26T17:52Z\n- *\/\n-( function( global, factory ) {\n-\n-\t\"use strict\";\n-\n-\tif ( typeof module === \"object\" && typeof module.exports === \"object\" ) {\n-\n-\t\t\/\/ For CommonJS and CommonJS-like environments where a proper `window`\n-\t\t\/\/ is present, execute the factory and get jQuery.\n-\t\t\/\/ For environments that do not have a `window` with a `document`\n-\t\t\/\/ (such as Node.js), expose a factory as module.exports.\n-\t\t\/\/ This accentuates the need for the creation of a real `window`.\n-\t\t\/\/ e.g. var jQuery = require(\"jquery\")(window);\n-\t\t\/\/ See ticket trac-14549 for more info.\n-\t\tmodule.exports = global.document ?\n-\t\t\tfactory( global, true ) :\n-\t\t\tfunction( w ) {\n-\t\t\t\tif ( !w.document ) {\n-\t\t\t\t\tthrow new Error( \"jQuery requires a window with a document\" );\n-\t\t\t\t}\n-\t\t\t\treturn factory( w );\n-\t\t\t};\n-\t} else {\n-\t\tfactory( global );\n-\t}\n-\n-\/\/ Pass this if window is not defined yet\n-} )( typeof window !== \"undefined\" ? window : this, function( window, noGlobal ) {\n-\n-\/\/ Edge <= 12 - 13+, Firefox <=18 - 45+, IE 10 - 11, Safari 5.1 - 9+, iOS 6 - 9.1\n-\/\/ throw exceptions when non-strict code (e.g., ASP.NET 4.5) accesses strict mode\n-\/\/ arguments.callee.caller (trac-13335). But as of jQuery 3.0 (2016), strict mode should be common\n-\/\/ enough that all such attempts are guarded in a try block.\n-\"use strict\";\n-\n-var arr = [];\n-\n-var getProto = Object.getPrototypeOf;\n-\n-var slice = arr.slice;\n-\n-var flat = arr.flat ? function( array ) {\n-\treturn arr.flat.call( array );\n-} : function( array ) {\n-\treturn arr.concat.apply( [], array );\n-};\n-\n-\n-var push = arr.push;\n-\n-var indexOf = arr.indexOf;\n-\n-var class2type = {};\n-\n-var toString = class2type.toString;\n-\n-var hasOwn = class2type.hasOwnProperty;\n-\n-var fnToString = hasOwn.toString;\n-\n-var ObjectFunctionString = fnToString.call( Object );\n-\n-var support = {};\n-\n-var isFunction = function isFunction( obj ) {\n-\n-\t\t\/\/ Support: Chrome <=57, Firefox <=52\n-\t\t\/\/ In some browsers, typeof returns \"function\" for HTML <object> elements\n-\t\t\/\/ (i.e., `typeof document.createElement( \"object\" ) === \"function\"`).\n-\t\t\/\/ We don't want to classify *any* DOM node as a function.\n-\t\t\/\/ Support: QtWeb <=3.8.5, WebKit <=534.34, wkhtmltopdf tool <=0.12.5\n-\t\t\/\/ Plus for old WebKit, typeof returns \"function\" for HTML collections\n-\t\t\/\/ (e.g., `typeof document.getElementsByTagName(\"div\") === \"function\"`). (gh-4756)\n-\t\treturn typeof obj === \"function\" && typeof obj.nodeType !== \"number\" &&\n-\t\t\ttypeof obj.item !== \"function\";\n-\t};\n-\n-\n-var isWindow = function isWindow( obj ) {\n-\t\treturn obj != null && obj === obj.window;\n-\t};\n-\n-\n-var document = window.document;\n-\n-\n-\n-\tvar preservedScriptAttributes = {\n-\t\ttype: true,\n-\t\tsrc: true,\n-\t\tnonce: true,\n-\t\tnoModule: true\n-\t};\n-\n-\tfunction DOMEval( code, node, doc ) {\n-\t\tdoc = doc || document;\n-\n-\t\tvar i, val,\n-\t\t\tscript = doc.createElement( \"script\" );\n-\n-\t\tscript.text = code;\n-\t\tif ( node ) {\n-\t\t\tfor ( i in preservedScriptAttributes ) {\n-\n-\t\t\t\t\/\/ Support: Firefox 64+, Edge 18+\n-\t\t\t\t\/\/ Some browsers don't support the \"nonce\" property on scripts.\n-\t\t\t\t\/\/ On the other hand, just using `getAttribute` is not enough as\n-\t\t\t\t\/\/ the `nonce` attribute is reset to an empty string whenever it\n-\t\t\t\t\/\/ becomes browsing-context connected.\n-\t\t\t\t\/\/ See https:\/\/github.com\/whatwg\/html\/issues\/2369\n-\t\t\t\t\/\/ See https:\/\/html.spec.whatwg.org\/#nonce-attributes\n-\t\t\t\t\/\/ The `node.getAttribute` check was added for the sake of\n-\t\t\t\t\/\/ `jQuery.globalEval` so that it can fake a nonce-containing node\n-\t\t\t\t\/\/ via an object.\n-\t\t\t\tval = node[ i ] || node.getAttribute && node.getAttribute( i );\n-\t\t\t\tif ( val ) {\n-\t\t\t\t\tscript.setAttribute( i, val );\n-\t\t\t\t}\n-\t\t\t}\n-\t\t}\n-\t\tdoc.head.appendChild( script ).parentNode.removeChild( script );\n-\t}\n-\n-\n-function toType( obj ) {\n-\tif ( obj == null ) {\n-\t\treturn obj + \"\";\n-\t}\n-\n-\t\/\/ Support: Android <=2.3 only (functionish RegExp)\n-\treturn typeof obj === \"object\" || typeof obj === \"function\" ?\n-\t\tclass2type[ toString.call( obj ) ] || \"object\" :\n-\t\ttypeof obj;\n-}\n-\/* global Symbol *\/\n-\/\/ Defining this global in .eslintrc.json would create a danger of using the global\n-\/\/ unguarded in another place, it seems safer to define global only for this module\n-\n-\n-\n-var\n-\tversion = \"3.6.1\",\n-\n-\t\/\/ Define a local copy of jQuery\n-\tjQuery = function( selector, context ) {\n-\n-\t\t\/\/ The jQuery object is actually just the init constructor 'enhanced'\n-\t\t\/\/ Need init if jQuery is called (just allow error to be thrown if not included)\n-\t\treturn new jQuery.fn.init( selector, context );\n-\t};\n-\n-jQuery.fn = jQuery.prototype = {\n-\n-\t\/\/ The current version of jQuery being used\n-\tjquery: version,\n-\n-\tconstructor: jQuery,\n-\n-\t\/\/ The default length of a jQuery object is 0\n-\tlength: 0,\n-\n-\ttoArray: function() {\n-\t\treturn slice.call( this );\n-\t},\n-\n-\t\/\/ Get the Nth element in the matched element set OR\n-\t\/\/ Get the whole matched element set as a clean array\n-\tget: function( num ) {\n-\n-\t\t\/\/ Return all the elements in a clean array\n-\t\tif ( num == null ) {\n-\t\t\treturn slice.call( this );\n-\t\t}\n-\n-\t\t\/\/ Return just the one element from the set\n-\t\treturn num < 0 ? this[ num + this.length ] : this[ num ];\n-\t},\n-\n-\t\/\/ Take an array of elements and push it onto the stack\n-\t\/\/ (returning the new matched element set)\n-\tpushStack: function( elems ) {\n-\n-\t\t\/\/ Build a new jQuery matched element set\n-\t\tvar ret = jQuery.merge( this.constructor(), elems );\n-\n-\t\t\/\/ Add the old object onto the stack (as a reference)\n-\t\tret.prevObject = this;\n-\n-\t\t\/\/ Return the newly-formed element set\n-\t\treturn ret;\n-\t},\n-\n-\t\/\/ Execute a callback for every element in the matched set.\n-\teach: function( callback ) {\n-\t\treturn jQuery.each( this, callback );\n-\t},\n-\n-\tmap: function( callback ) {\n-\t\treturn this.pushStack( jQuery.map( this, function( elem, i ) {\n-\t\t\treturn callback.call( elem, i, elem );\n-\t\t} ) );\n-\t},\n-\n-\tslice: function() {\n-\t\treturn this.pushStack( slice.apply( this, arguments ) );\n-\t},\n-\n-\tfirst: function() {\n-\t\treturn this.eq( 0 );\n-\t},\n-\n-\tlast: function() {\n-\t\treturn this.eq( -1 );\n-\t},\n-\n-\teven: function() {\n-\t\treturn this.pushStack( jQuery.grep( this, function( _elem, i ) {\n-\t\t\treturn ( i + 1 ) % 2;\n-\t\t} ) );\n-\t},\n-\n-\todd: function() {\n-\t\treturn this.pushStack( jQuery.grep( this, function( _elem, i ) {\n-\t\t\treturn i % 2;\n-\t\t} ) );\n-\t},\n-\n-\teq: function( i ) {\n-\t\tvar len = this.length,\n-\t\t\tj = +i + ( i < 0 ? len : 0 );\n-\t\treturn this.pushStack( j >= 0 && j < len ? [ this[ j ] ] : [] );\n-\t},\n-\n-\tend: function() {\n-\t\treturn this.prevObject || this.constructor();\n-\t},\n-\n-\t\/\/ For internal use only.\n-\t\/\/ Behaves like an Array's method, not like a jQuery method.\n-\tpush: push,\n-\tsort: arr.sort,\n-\tsplice: arr.splice\n-};\n-\n-jQuery.extend = jQuery.fn.extend = function() {\n-\tvar options, name, src, copy, copyIsArray, clone,\n-\t\ttarget = arguments[ 0 ] || {},\n-\t\ti = 1,\n-\t\tlength = arguments.length,\n-\t\tdeep = false;\n-\n-\t\/\/ Handle a deep copy situation\n-\tif ( typeof target === \"boolean\" ) {\n-\t\tdeep = target;\n-\n-\t\t\/\/ Skip the boolean and the target\n-\t\ttarget = arguments[ i ] || {};\n-\t\ti++;\n-\t}\n-\n-\t\/\/ Handle case when target is a string or something (possible in deep copy)\n-\tif ( typeof target !== \"object\" && !isFunction( target ) ) {\n-\t\ttarget = {};\n-\t}\n-\n-\t\/\/ Extend jQuery itself if only one argument is passed\n-\tif ( i === length ) {\n-\t\ttarget = this;\n-\t\ti--;\n-\t}\n-\n-\tfor ( ; i < length; i++ ) {\n-\n-\t\t\/\/ Only deal with non-null\/undefined values\n-\t\tif ( ( options = arguments[ i ] ) != null ) {\n-\n-\t\t\t\/\/ Extend the base object\n-\t\t\tfor ( name in options ) {\n-\t\t\t\tcopy = options[ name ];\n-\n-\t\t\t\t\/\/ Prevent Object.prototype pollution\n-\t\t\t\t\/\/ Prevent never-ending loop\n-\t\t\t\tif ( name === \"__proto__\" || target === copy ) {\n-\t\t\t\t\tcontinue;\n-\t\t\t\t}\n-\n-\t\t\t\t\/\/ Recurse if we're merging plain objects or arrays\n-\t\t\t\tif ( deep && copy && ( jQuery.isPlainObject( copy ) ||\n-\t\t\t\t\t( copyIsArray = Array.isArray( copy ) ) ) ) {\n-\t\t\t\t\tsrc = target[ name ];\n-\n-\t\t\t\t\t\/\/ Ensure proper type for the source value\n-\t\t\t\t\tif ( copyIsArray && !Array.isArray( src ) ) {\n-\t\t\t\t\t\tclone = [];\n-\t\t\t\t\t} else if ( !copyIsArray && !jQuery.isPlainObject( src ) ) {\n-\t\t\t\t\t\tclone = {};\n-\t\t\t\t\t} else {\n-\t\t\t\t\t\tclone = src;\n-\t\t\t\t\t}\n-\t\t\t\t\tcopyIsArray = false;\n-\n-\t\t\t\t\t\/\/ Never move original objects, clone them\n-\t\t\t\t\ttarget[ name ] = jQuery.extend( deep, clone, copy );\n-\n-\t\t\t\t\/\/ Don't bring in undefined values\n-\t\t\t\t} else if ( copy !== undefined ) {\n-\t\t\t\t\ttarget[ name ] = copy;\n-\t\t\t\t}\n-\t\t\t}\n-\t\t}\n-\t}\n-\n-\t\/\/ Return the modified object\n-\treturn target;\n-};\n-\n-jQuery.extend( {\n-\n-\t\/\/ Unique for each copy of jQuery on the page\n-\texpando: \"jQuery\" + ( version + Math.random() ).replace( \/\\D\/g, \"\" ),\n-\n-\t\/\/ Assume jQuery is ready without the ready module\n-\tisReady: true,\n-\n-\terror: function( msg ) {\n-\t\tthrow new Error( msg );\n-\t},\n-\n-\tnoop: function() {},\n-\n-\tisPlainObject: function( obj ) {\n-\t\tvar proto, Ctor;\n-\n-\t\t\/\/ Detect obvious negatives\n-\t\t\/\/ Use toString instead of jQuery.type to catch host objects\n-\t\tif ( !obj || toString.call( obj ) !== \"[object Object]\" ) {\n-\t\t\treturn false;\n-\t\t}\n-\n-\t\tproto = getProto( obj );\n-\n-\t\t\/\/ Objects with no prototype (e.g., `Object.create( null )`) are plain\n-\t\tif ( !proto ) {\n-\t\t\treturn true;\n-\t\t}\n-\n-\t\t\/\/ Objects with prototype are plain iff they were constructed by a global Object function\n-\t\tCtor = hasOwn.call( proto, \"constructor\" ) && proto.constructor;\n-\t\treturn typeof Ctor === \"function\" && fnToString.call( Ctor ) === ObjectFunctionString;\n-\t},\n-\n-\tisEmptyObject: function( obj ) {\n-\t\tvar name;\n-\n-\t\tfor ( name in obj ) {\n-\t\t\treturn false;\n-\t\t}\n-\t\treturn true;\n-\t},\n-\n-\t\/\/ Evaluates a script in a provided context; falls back to the global one\n-\t\/\/ if not specified.\n-\tglobalEval: function( code, options, doc ) {\n-\t\tDOMEval( code, { nonce: options && options.nonce }, doc );\n-\t},\n-\n-\teach: function( obj, callback ) {\n-\t\tvar length, i = 0;\n-\n-\t\tif ( isArrayLike( obj ) ) {\n-\t\t\tlength = obj.length;\n-\t\t\tfor ( ; i < length; i++ ) {\n-\t\t\t\tif ( callback.call( obj[ i ], i, obj[ i ] ) === false ) {\n-\t\t\t\t\tbreak;\n-\t\t\t\t}\n-\t\t\t}\n-\t\t} else {\n-\t\t\tfor ( i in obj ) {\n-\t\t\t\tif ( callback.call( obj[ i ], i, obj[ i ] ) === false ) {\n-\t\t\t\t\tbreak;\n-\t\t\t\t}\n-\t\t\t}\n-\t\t}\n-\n-\t\treturn obj;\n-\t},\n-\n-\t\/\/ results is for internal usage only\n-\tmakeArray: function( arr, results ) {\n-\t\tvar ret = results || [];\n-\n-\t\tif ( arr != null ) {\n-\t\t\tif ( isArrayLike( Object( arr ) ) ) {\n-\t\t\t\tjQuery.merge( ret,\n-\t\t\t\t\ttypeof arr === \"string\" ?\n-\t\t\t\t\t\t[ arr ] : arr\n-\t\t\t\t);\n-\t\t\t} else {\n-\t\t\t\tpush.call( ret, arr );\n-\t\t\t}\n-\t\t}\n-\n-\t\treturn ret;\n-\t},\n-\n-\tinArray: function( elem, arr, i ) {\n-\t\treturn arr == null ? -1 : indexOf.call( arr, elem, i );\n-\t},\n-\n-\t\/\/ Support: Android <=4.0 only, PhantomJS 1 only\n-\t\/\/ push.apply(_, arraylike) throws on ancient WebKit\n-\tmerge: function( first, second ) {\n-\t\tvar len = +second.length,\n-\t\t\tj = 0,\n-\t\t\ti = first.length;\n-\n-\t\tfor ( ; j < len; j++ ) {\n-\t\t\tfirst[ i++ ] = second[ j ];\n-\t\t}\n-\n-\t\tfirst.length = i;\n-\n-\t\treturn first;\n-\t},\n-\n-\tgrep: function( elems, callback, invert ) {\n-\t\tvar callbackInverse,\n-\t\t\tmatches = [],\n-\t\t\ti = 0,\n-\t\t\tlength = elems.length,\n-\t\t\tcallbackExpect = !invert;\n-\n-\t\t\/\/ Go through the array, only saving the items\n-\t\t\/\/ that pass the validator function\n-\t\tfor ( ; i < length; i++ ) {\n-\t\t\tcallbackInverse = !callback( elems[ i ], i );\n-\t\t\tif ( callbackInverse !== callbackExpect ) {\n-\t\t\t\tmatches.push( elems[ i ] );\n-\t\t\t}\n-\t\t}\n-\n-\t\treturn matches;\n-\t},\n-\n-\t\/\/ arg is for internal usage only\n-\tmap: function( elems, callback, arg ) {\n-\t\tvar length, value,\n-\t\t\ti = 0,\n-\t\t\tret = [];\n-\n-\t\t\/\/ Go through the array, translating each of the items to their new values\n-\t\tif ( isArrayLike( elems ) ) {\n-\t\t\tlength = elems.length;\n-\t\t\tfor ( ; i < length; i++ ) {\n-\t\t\t\tvalue = callback( elems[ i ], i, arg );\n-\n-\t\t\t\tif ( value != null ) {\n-\t\t\t\t\tret.push( value );\n-\t\t\t\t}\n-\t\t\t}\n-\n-\t\t\/\/ Go through every key on the object,\n-\t\t} else {\n-\t\t\tfor ( i in elems ) {\n-\t\t\t\tvalue = callback( elems[ i ], i, arg );\n-\n-\t\t\t\tif ( value != null ) {\n-\t\t\t\t\tret.push( value );\n-\t\t\t\t}\n-\t\t\t}\n-\t\t}\n-\n-\t\t\/\/ Flatten any nested arrays\n-\t\treturn flat( ret );\n-\t},\n-\n-\t\/\/ A global GUID counter for objects\n-\tguid: 1,\n-\n-\t\/\/ jQuery.support is not used in Core but other projects attach their\n-\t\/\/ properties to it so it needs to exist.\n-\tsupport: support\n-} );\n-\n-if ( typeof Symbol === \"function\" ) {\n-\tjQuery.fn[ Symbol.iterator ] = arr[ Symbol.iterator ];\n-}\n-\n-\/\/ Populate the class2type map\n-jQuery.each( \"Boolean Number String Function Array Date RegExp Object Error Symbol\".split( \" \" ),\n-\tfunction( _i, name ) {\n-\t\tclass2type[ \"[object \" + name + \"]\" ] = name.toLowerCase();\n-\t} );\n-\n-function isArrayLike( obj ) {\n-\n-\t\/\/ Support: real iOS 8.2 only (not reproducible in simulator)\n-\t\/\/ `in` check used to prevent JIT error (gh-2145)\n-\t\/\/ hasOwn isn't used here due to false negatives\n-\t\/\/ regarding Nodelist length in IE\n-\tvar length = !!obj && \"length\" in obj && obj.length,\n-\t\ttype = toType( obj );\n-\n-\tif ( isFunction( obj ) || isWindow( obj ) ) {\n-\t\treturn false;\n-\t}\n-\n-\treturn type === \"array\" || length === 0 ||\n-\t\ttypeof length === \"number\" && length > 0 && ( length - 1 ) in obj;\n-}\n-var Sizzle =\n-\/*!\n- * Sizzle CSS Selector Engine v2.3.6\n- * https:\/\/sizzlejs.com\/\n- *\n- * Copyright JS Foundation and other contributors\n- * Released under the MIT license\n- * https:\/\/js.foundation\/\n- *\n- * Date: 2021-02-16\n- *\/\n-( function( window ) {\n-var i,\n-\tsupport,\n-\tExpr,\n-\tgetText,\n-\tisXML,\n-\ttokenize,\n-\tcompile,\n-\tselect,\n-\toutermostContext,\n-\tsortInput,\n-\thasDuplicate,\n-\n-\t\/\/ Local document vars\n-\tsetDocument,\n-\tdocument,\n-\tdocElem,\n-\tdocumentIsHTML,\n-\trbuggyQSA,\n-\trbuggyMatches,\n-\tmatches,\n-\tcontains,\n-\n-\t\/\/ Instance-specific data\n-\texpando = \"sizzle\" + 1 * new Date(),\n-\tpreferredDoc = window.document,\n-\tdirruns = 0,\n-\tdone = 0,\n-\tclassCache = createCache(),\n-\ttokenCache = createCache(),\n-\tcompilerCache = createCache(),\n-\tnonnativeSelectorCache = createCache(),\n-\tsortOrder = function( a, b ) {\n-\t\tif ( a === b ) {\n-\t\t\thasDuplicate = true;\n-\t\t}\n-\t\treturn 0;\n-\t},\n-\n-\t\/\/ Instance methods\n-\thasOwn = ( {} ).hasOwnProperty,\n-\tarr = [],\n-\tpop = arr.pop,\n-\tpushNative = arr.push,\n-\tpush = arr.push,\n-\tslice = arr.slice,\n-\n-\t\/\/ Use a stripped-down indexOf as it's faster than native\n-\t\/\/ https:\/\/jsperf.com\/thor-indexof-vs-for\/5\n-\tindexOf = function( list, elem ) {\n-\t\tvar i = 0,\n-\t\t\tlen = list.length;\n-\t\tfor ( ; i < len; i++ ) {\n-\t\t\tif ( list[ i ] === elem ) {\n-\t\t\t\treturn i;\n-\t\t\t}\n-\t\t}\n-\t\treturn -1;\n-\t},\n-\n-\tbooleans = \"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|\" +\n-\t\t\"ismap|loop|multiple|open|readonly|required|scoped\",\n-\n-\t\/\/ Regular expressions\n-\n-\t\/\/ http:\/\/www.w3.org\/TR\/css3-selectors\/#whitespace\n-\twhitespace = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",\n-\n-\t\/\/ https:\/\/www.w3.org\/TR\/css-syntax-3\/#ident-token-diagram\n-\tidentifier = \"(?:\\\\\\\\[\\\\da-fA-F]{1,6}\" + whitespace +\n-\t\t\"?|\\\\\\\\[^\\\\r\\\\n\\\\f]|[\\\\w-]|[^\\0-\\\\x7f])+\",\n-\n-\t\/\/ Attribute selectors: http:\/\/www.w3.org\/TR\/selectors\/#attribute-selectors\n-\tattributes = \"\\\\[\" + whitespace + \"*(\" + identifier + \")(?:\" + whitespace +\n-\n-\t\t\/\/ Operator (capture 2)\n-\t\t\"*([*^$|!~]?=)\" + whitespace +\n-\n-\t\t\/\/ \"Attribute values must be CSS identifiers [capture 5]\n-\t\t\/\/ or strings [capture 3 or capture 4]\"\n-\t\t\"*(?:'((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\"|(\" + identifier + \"))|)\" +\n-\t\twhitespace + \"*\\\\]\",\n-\n-\tpseudos = \":(\" + identifier + \")(?:\\\\((\" +\n-\n-\t\t\/\/ To reduce the number of selectors needing tokenize in the preFilter, prefer arguments:\n-\t\t\/\/ 1. quoted (capture 3; capture 4 or capture 5)\n-\t\t\"('((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\")|\" +\n-\n-\t\t\/\/ 2. simple (capture 6)\n-\t\t\"((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\" + attributes + \")*)|\" +\n-\n-\t\t\/\/ 3. anything else (capture 2)\n-\t\t\".*\" +\n-\t\t\")\\\\)|)\",\n-\n-\t\/\/ Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter\n-\trwhitespace = new RegExp( whitespace + \"+\", \"g\" ),\n-\trtrim = new RegExp( \"^\" + whitespace + \"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\" +\n-\t\twhitespace + \"+$\", \"g\" ),\n-\n-\trcomma = new RegExp( \"^\" + whitespace + \"*,\" + whitespace + \"*\" ),\n-\trcombinators = new RegExp( \"^\" + whitespace + \"*([>+~]|\" + whitespace + \")\" + whitespace +\n-\t\t\"*\" ),\n-\trdescend = new RegExp( whitespace + \"|>\" ),\n-\n-\trpseudo = new RegExp( pseudos ),\n-\tridentifier = new RegExp( \"^\" + identifier + \"$\" ),\n-\n-\tmatchExpr = {\n-\t\t\"ID\": new RegExp( \"^#(\" + identifier + \")\" ),\n-\t\t\"CLASS\": new RegExp( \"^\\\\.(\" + identifier + \")\" ),\n-\t\t\"TAG\": new RegExp( \"^(\" + identifier + \"|[*])\" ),\n-\t\t\"ATTR\": new RegExp( \"^\" + attributes ),\n-\t\t\"PSEUDO\": new RegExp( \"^\" + pseudos ),\n-\t\t\"CHILD\": new RegExp( \"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\" +\n-\t\t\twhitespace + \"*(even|odd|(([+-]|)(\\\\d*)n|)\" + whitespace + \"*(?:([+-]|)\" +\n-\t\t\twhitespace + \"*(\\\\d+)|))\" + whitespace + \"*\\\\)|)\", \"i\" ),\n-\t\t\"bool\": new RegExp( \"^(?:\" + booleans + \")$\", \"i\" ),\n-\n-\t\t\/\/ For use in libraries implementing .is()\n-\t\t\/\/ We use this for POS matching in `select`\n-\t\t\"needsContext\": new RegExp( \"^\" + whitespace +\n-\t\t\t\"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\" + whitespace +\n-\t\t\t\"*((?:-\\\\d)?\\\\d*)\" + whitespace + \"*\\\\)|)(?=[^-]|$)\", \"i\" )\n-\t},\n-\n-\trhtml = \/HTML$\/i,\n-\trinputs = \/^(?:input|select|textarea|button)$\/i,\n-\trheader = \/^h\\d$\/i,\n-\n-\trnative = \/^[^{]+\\{\\s*\\[native \\w\/,\n-\n-\t\/\/ Easily-parseable\/retrievable ID or TAG or CLASS selectors\n-\trquickExpr = \/^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$\/,\n-\n-\trsibling = \/[+~]\/,\n-\n-\t\/\/ CSS escapes\n-\t\/\/ http:\/\/www.w3.org\/TR\/CSS21\/syndata.html#escaped-characters\n-\trunescape = new RegExp( \"\\\\\\\\[\\\\da-fA-F]{1,6}\" + whitespace + \"?|\\\\\\\\([^\\\\r\\\\n\\\\f])\", \"g\" ),\n-\tfunescape = function( escape, nonHex ) {\n-\t\tvar high = \"0x\" + escape.slice( 1 ) - 0x10000;\n-\n-\t\treturn nonHex ?\n-\n-\t\t\t\/\/ Strip the backslash prefix from a non-hex escape sequence\n-\t\t\tnonHex :\n-\n-\t\t\t\/\/ Replace a hexadecimal escape sequence with the encoded Unicode code point\n-\t\t\t\/\/ Support: IE <=11+\n-\t\t\t\/\/ For values outside the Basic Multilingual Plane (BMP), manually construct a\n-\t\t\t\/\/ surrogate pair\n-\t\t\thigh < 0 ?\n-\t\t\t\tString.fromCharCode( high + 0x10000 ) :\n-\t\t\t\tString.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );\n-\t},\n-\n-\t\/\/ CSS string\/identifier serialization\n-\t\/\/ https:\/\/drafts.csswg.org\/cssom\/#common-serializing-idioms\n-\trcssescape = \/([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\0-\\x1f\\x7f-\\uFFFF\\w-]\/g,\n-\tfcssescape = function( ch, asCodePoint ) {\n-\t\tif ( asCodePoint ) {\n-\n-\t\t\t\/\/ U+0000 NULL becomes U+FFFD REPLACEMENT CHARACTER\n-\t\t\tif ( ch === \"\\0\" ) {\n-\t\t\t\treturn \"\\uFFFD\";\n-\t\t\t}\n-\n-\t\t\t\/\/ Control characters and (dependent upon position) numbers get escaped as code points\n-\t\t\treturn ch.slice( 0, -1 ) + \"\\\\\" +\n-\t\t\t\tch.charCodeAt( ch.length - 1 ).toString( 16 ) + \" \";\n-\t\t}\n-\n-\t\t\/\/ Other potentially-special ASCII characters get backslash-escaped\n-\t\treturn \"\\\\\" + ch;\n-\t},\n-\n-\t\/\/ Used for iframes\n-\t\/\/ See setDocument()\n-\t\/\/ Removing the function wrapper causes a \"Permission Denied\"\n-\t\/\/ error in IE\n-\tunloadHandler = function() {\n-\t\tsetDocument();\n-\t},\n-\n-\tinDisabledFieldset = addCombinator(\n-\t\tfunction( elem ) {\n-\t\t\treturn elem.disabled === true && elem.nodeName.toLowerCase() === \"fieldset\";\n-\t\t},\n-\t\t{ dir: \"parentNode\", next: \"legend\" }\n-\t);\n-\n-\/\/ Optimize for push.apply( _, NodeList )\n-try {\n-\tpush.apply(\n-\t\t( arr = slice.call( preferredDoc.childNodes ) ),\n-\t\tpreferredDoc.childNodes\n-\t);\n-\n-\t\/\/ Support: Android<4.0\n-\t\/\/ Detect silently failing push.apply\n-\t\/\/ eslint-disable-next-line no-unused-expressions\n-\tarr[ preferredDoc.childNodes.length ].nodeType;\n-} catch ( e ) {\n-\tpush = { apply: arr.length ?\n-\n-\t\t\/\/ Leverage slice if possible\n-\t\tfunction( target, els ) {\n-\t\t\tpushNative.apply( target, slice.call( els ) );\n-\t\t} :\n-\n-\t\t\/\/ Support: IE<9\n-\t\t\/\/ Otherwise append directly\n-\t\tfunction( target, els ) {\n-\t\t\tvar j = target.length,\n-\t\t\t\ti = 0;\n-\n-\t\t\t\/\/ Can't trust NodeList.length\n-\t\t\twhile ( ( target[ j++ ] = els[ i++ ] ) ) {}\n-\t\t\ttarget.length = j - 1;\n-\t\t}\n-\t};\n-}\n-\n-function Sizzle( selector, context, results, seed ) {\n-\tvar m, i, elem, nid, match, groups, newSelector,\n-\t\tnewContext = context && context.ownerDocument,\n-\n-\t\t\/\/ nodeType defaults to 9, since context defaults to document\n-\t\tnodeType = context ? context.nodeType : 9;\n-\n-\tresults = results || [];\n-\n-\t\/\/ Return early from calls with invalid selector or context\n-\tif ( typeof selector !== \"string\" || !selector ||\n-\t\tnodeType !== 1 && nodeType !== 9 && nodeType !== 11 ) {\n-\n-\t\treturn results;\n-\t}\n-\n-\t\/\/ Try to shortcut find operations (as opposed to filters) in HTML documents\n-\tif ( !seed ) {\n-\t\tsetDocument( context );\n-\t\tcontext = context || document;\n-\n-\t\tif ( documentIsHTML ) {\n-\n-\t\t\t\/\/ If the selector is sufficiently simple, try using a \"get*By*\" DOM method\n-\t\t\t\/\/ (excepting DocumentFragment context, where the methods don't exist)\n-\t\t\tif ( nodeType !== 11 && ( match = rquickExpr.exec( selector ) ) ) {\n-\n-\t\t\t\t\/\/ ID selector\n-\t\t\t\tif ( ( m = match[ 1 ] ) ) {\n-\n-\t\t\t\t\t\/\/ Document context\n-\t\t\t\t\tif ( nodeType === 9 ) {\n-\t\t\t\t\t\tif ( ( elem = context.getElementById( m ) ) ) {\n-\n-\t\t\t\t\t\t\t\/\/ Support: IE, Opera, Webkit\n-\t\t\t\t\t\t\t\/\/ TODO: identify versions\n-\t\t\t\t\t\t\t\/\/ getElementById can match elements by name instead of ID\n-\t\t\t\t\t\t\tif ( elem.id === m ) {\n-\t\t\t\t\t\t\t\tresults.push( elem );\n-\t\t\t\t\t\t\t\treturn results;\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\treturn results;\n-\t\t\t\t\t\t}\n-\n-\t\t\t\t\t\/\/ Element context\n-\t\t\t\t\t} else {\n-\n-\t\t\t\t\t\t\/\/ Support: IE, Opera, Webkit\n-\t\t\t\t\t\t\/\/ TODO: identify versions\n-\t\t\t\t\t\t\/\/ getElementById can match elements by name instead of ID\n-\t\t\t\t\t\tif ( newContext && ( elem = newContext.getElementById( m ) ) &&\n-\t\t\t\t\t\t\tcontains( context, elem ) &&\n-\t\t\t\t\t\t\telem.id === m ) {\n-\n-\t\t\t\t\t\t\tresults.push( elem );\n-\t\t\t\t\t\t\treturn results;\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\n-\t\t\t\t\/\/ Type selector\n-\t\t\t\t} else if ( match[ 2 ] ) {\n-\t\t\t\t\tpush.apply( results, context.getElementsByTagName( selector ) );\n-\t\t\t\t\treturn results;\n-\n-\t\t\t\t\/\/ Class selector\n-\t\t\t\t} else if ( ( m = match[ 3 ] ) && support.getElementsByClassName &&\n-\t\t\t\t\tcontext.getElementsByClassName ) {\n-\n-\t\t\t\t\tpush.apply( results, context.getElementsByClassName( m ) );\n-\t\t\t\t\treturn results;\n-\t\t\t\t}\n-\t\t\t}\n-\n-\t\t\t\/\/ Take advantage of querySelectorAll\n-\t\t\tif ( support.qsa &&\n-\t\t\t\t!nonnativeSelectorCache[ selector + \" \" ] &&\n-\t\t\t\t( !rbuggyQSA || !rbuggyQSA.test( selector ) ) &&\n-\n-\t\t\t\t\/\/ Support: IE 8 only\n-\t\t\t\t\/\/ Exclude object elements\n-\t\t\t\t( nodeType !== 1 || context.nodeName.toLowerCase() !== \"object\" ) ) {\n-\n-\t\t\t\tnewSelector = selector;\n-\t\t\t\tnewContext = context;\n-\n-\t\t\t\t\/\/ qSA considers elements outside a scoping root when evaluating child or\n-\t\t\t\t\/\/ descendant combinators, which is not what we want.\n-\t\t\t\t\/\/ In such cases, we work around the behavior by prefixing every selector in the\n-\t\t\t\t\/\/ list with an ID selector referencing the scope context.\n-\t\t\t\t\/\/ The technique has to be used as well when a leading combinator is used\n-\t\t\t\t\/\/ as such selectors are not recognized by querySelectorAll.\n-\t\t\t\t\/\/ Thanks to Andrew Dupont for this technique.\n-\t\t\t\tif ( nodeType === 1 &&\n-\t\t\t\t\t( rdescend.test( selector ) || rcombinators.test( selector ) ) ) {\n-\n-\t\t\t\t\t\/\/ Expand context for sibling selectors\n-\t\t\t\t\tnewContext = rsibling.test( selector ) && testContext( context.parentNode ) ||\n-\t\t\t\t\t\tcontext;\n-\n-\t\t\t\t\t\/\/ We can use :scope instead of the ID hack if the browser\n-\t\t\t\t\t\/\/ supports it & if we're not changing the context.\n-\t\t\t\t\tif ( newContext !== context || !support.scope ) {\n-\n-\t\t\t\t\t\t\/\/ Capture the context ID, setting it first if necessary\n-\t\t\t\t\t\tif ( ( nid = context.getAttribute( \"id\" ) ) ) {\n-\t\t\t\t\t\t\tnid = nid.replace( rcssescape, fcssescape );\n-\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\tcontext.setAttribute( \"id\", ( nid = expando ) );\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\n-\t\t\t\t\t\/\/ Prefix every selector in the list\n-\t\t\t\t\tgroups = tokenize( selector );\n-\t\t\t\t\ti = groups.length;\n-\t\t\t\t\twhile ( i-- ) {\n-\t\t\t\t\t\tgroups[ i ] = ( nid ? \"#\" + nid : \":scope\" ) + \" \" +\n-\t\t\t\t\t\t\ttoSelector( groups[ i ] );\n-\t\t\t\t\t}\n-\t\t\t\t\tnewSelector = groups.join( \",\" );\n-\t\t\t\t}\n-\n-\t\t\t\ttry {\n-\t\t\t\t\tpush.apply( results,\n-\t\t\t\t\t\tnewContext.querySelectorAll( newSelector )\n-\t\t\t\t\t);\n-\t\t\t\t\treturn results;\n-\t\t\t\t} catch ( qsaError ) {\n-\t\t\t\t\tnonnativeSelectorCache( selector, true );\n-\t\t\t\t} finally {\n-\t\t\t\t\tif ( nid === expando ) {\n-\t\t\t\t\t\tcontext.removeAttribute( \"id\" );\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t}\n-\t\t}\n-\t}\n-\n-\t\/\/ All others\n-\treturn select( selector.replace( rtrim, \"$1\" ), context, results, seed );\n-}\n-\n-\/**\n- * Create key-value caches of limited size\n- * @returns {function(string, object)} Returns the Object data after storing it on itself with\n- *\tproperty name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)\n- *\tdeleting the oldest entry\n- *\/\n-function createCache() {\n-\tvar keys = [];\n-\n-\tfunction cache( key, value ) {\n-\n-\t\t\/\/ Use (key + \" \") to avoid collision with native prototype properties (see Issue #157)\n-\t\tif ( keys.push( key + \" \" ) > Expr.cacheLength ) {\n-\n-\t\t\t\/\/ Only keep the most recent entries\n-\t\t\tdelete cache[ keys.shift() ];\n-\t\t}\n-\t\treturn ( cache[ key + \" \" ] = value );\n-\t}\n-\treturn cache;\n-}\n-\n-\/**\n- * Mark a function for special use by Sizzle\n- * @param {Function} fn The function to mark\n- *\/\n-function markFunction( fn ) {\n-\tfn[ expando ] = true;\n-\treturn fn;\n-}\n-\n-\/**\n- * Support testing using an element\n- * @param {Function} fn Passed the created element and returns a boolean result\n- *\/\n-function assert( fn ) {\n-\tvar el = document.createElement( \"fieldset\" );\n-\n-\ttry {\n-\t\treturn !!fn( el );\n-\t} catch ( e ) {\n-\t\treturn false;\n-\t} finally {\n-\n-\t\t\/\/ Remove from its parent by default\n-\t\tif ( el.parentNode ) {\n-\t\t\tel.parentNode.removeChild( el );\n-\t\t}\n-\n-\t\t\/\/ release memory in IE\n-\t\tel = null;\n-\t}\n-}\n-\n-\/**\n- * Adds the same handler for all of the specified attrs\n- * @param {String} attrs Pipe-separated list of attributes\n- * @param {Function} handler The method that will be applied\n- *\/\n-function addHandle( attrs, handler ) {\n-\tvar arr = attrs.split( \"|\" ),\n-\t\ti = arr.length;\n-\n-\twhile ( i-- ) {\n-\t\tExpr.attrHandle[ arr[ i ] ] = handler;\n-\t}\n-}\n-\n-\/**\n- * Checks document order of two siblings\n- * @param {Element} a\n- * @param {Element} b\n- * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b\n- *\/\n-function siblingCheck( a, b ) {\n-\tvar cur = b && a,\n-\t\tdiff = cur && a.nodeType === 1 && b.nodeType === 1 &&\n-\t\t\ta.sourceIndex - b.sourceIndex;\n-\n-\t\/\/ Use IE sourceIndex if available on both nodes\n-\tif ( diff ) {\n-\t\treturn diff;\n-\t}\n-\n-\t\/\/ Check if b follows a\n-\tif ( cur ) {\n-\t\twhile ( ( cur = cur.nextSibling ) ) {\n-\t\t\tif ( cur === b ) {\n-\t\t\t\treturn -1;\n-\t\t\t}\n-\t\t}\n-\t}\n-\n-\treturn a ? 1 : -1;\n-}\n-\n-\/**\n- * Returns a function to use in pseudos for input types\n- * @param {String} type\n- *\/\n-function createInputPseudo( type ) {\n-\treturn function( elem ) {\n-\t\tvar name = elem.nodeName.toLowerCase();\n-\t\treturn name === \"input\" && elem.type === type;\n-\t};\n-}\n-\n-\/**\n- * Returns a function to use in pseudos for buttons\n- * @param {String} type\n- *\/\n-function createButtonPseudo( type ) {\n-\treturn function( elem ) {\n-\t\tvar name = elem.nodeName.toLowerCase();\n-\t\treturn ( name === \"input\" || name === \"button\" ) && elem.type === type;\n-\t};\n-}\n-\n-\/**\n- * Returns a function to use in pseudos for :enabled\/:disabled\n- * @param {Boolean} disabled true for :disabled; false for :enabled\n- *\/\n-function createDisabledPseudo( disabled ) {\n-\n-\t\/\/ Known :disabled false positives: fieldset[disabled] > legend:nth-of-type(n+2) :can-disable\n-\treturn function( elem ) {\n-\n-\t\t\/\/ Only certain elements can match :enabled or :disabled\n-\t\t\/\/ https:\/\/html.spec.whatwg.org\/multipage\/scripting.html#selector-enabled\n-\t\t\/\/ https:\/\/html.spec.whatwg.org\/multipage\/scripting.html#selector-disabled\n-\t\tif ( \"form\" in elem ) {\n-\n-\t\t\t\/\/ Check for inherited disabledness on relevant non-disabled elements:\n-\t\t\t\/\/ * listed form-associated elements in a disabled fieldset\n-\t\t\t\/\/   https:\/\/html.spec.whatwg.org\/multipage\/forms.html#category-listed\n-\t\t\t\/\/   https:\/\/html.spec.whatwg.org\/multipage\/forms.html#concept-fe-disabled\n-\t\t\t\/\/ * option elements in a disabled optgroup\n-\t\t\t\/\/   https:\/\/html.spec.whatwg.org\/multipage\/forms.html#concept-option-disabled\n-\t\t\t\/\/ All such elements have a \"form\" property.\n-\t\t\tif ( elem.parentNode && elem.disabled === false ) {\n-\n-\t\t\t\t\/\/ Option elements defer to a parent optgroup if present\n-\t\t\t\tif ( \"label\" in elem ) {\n-\t\t\t\t\tif ( \"label\" in elem.parentNode ) {\n-\t\t\t\t\t\treturn elem.parentNode.disabled === disabled;\n-\t\t\t\t\t} else {\n-\t\t\t\t\t\treturn elem.disabled === disabled;\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\n-\t\t\t\t\/\/ Support: IE 6 - 11\n-\t\t\t\t\/\/ Use the isDisabled shortcut property to check for disabled fieldset ancestors\n-\t\t\t\treturn elem.isDisabled === disabled ||\n-\n-\t\t\t\t\t\/\/ Where there is no isDisabled, check manually\n-\t\t\t\t\t\/* jshint -W018 *\/\n-\t\t\t\t\telem.isDisabled !== !disabled &&\n-\t\t\t\t\tinDisabledFieldset( elem ) === disabled;\n-\t\t\t}\n-\n-\t\t\treturn elem.disabled === disabled;\n-\n-\t\t\/\/ Try to winnow out elements that can't be disabled before trusting the disabled property.\n-\t\t\/\/ Some victims get caught in our net (label, legend, menu, track), but it shouldn't\n-\t\t\/\/ even exist on them, let alone have a boolean value.\n-\t\t} else if ( \"label\" in elem ) {\n-\t\t\treturn elem.disabled === disabled;\n-\t\t}\n-\n-\t\t\/\/ Remaining elements are neither :enabled nor :disabled\n-\t\treturn false;\n-\t};\n-}\n-\n-\/**\n- * Returns a function to use in pseudos for positionals\n- * @param {Function} fn\n- *\/\n-function createPositionalPseudo( fn ) {\n-\treturn markFunction( function( argument ) {\n-\t\targument = +argument;\n-\t\treturn markFunction( function( seed, matches ) {\n-\t\t\tvar j,\n-\t\t\t\tmatchIndexes = fn( [], seed.length, argument ),\n-\t\t\t\ti = matchIndexes.length;\n-\n-\t\t\t\/\/ Match elements found at the specified indexes\n-\t\t\twhile ( i-- ) {\n-\t\t\t\tif ( seed[ ( j = matchIndexes[ i ] ) ] ) {\n-\t\t\t\t\tseed[ j ] = !( matches[ j ] = seed[ j ] );\n-\t\t\t\t}\n-\t\t\t}\n-\t\t} );\n-\t} );\n-}\n-\n-\/**\n- * Checks a node for validity as a Sizzle context\n- * @param {Element|Object=} context\n- * @returns {Element|Object|Boolean} The input node if acceptable, otherwise a falsy value\n- *\/\n-function testContext( context ) {\n-\treturn context && typeof context.getElementsByTagName !== \"undefined\" && context;\n-}\n-\n-\/\/ Expose support vars for convenience\n-support = Sizzle.support = {};\n-\n-\/**\n- * Detects XML nodes\n- * @param {Element|Object} elem An element or a document\n- * @returns {Boolean} True iff elem is a non-HTML XML node\n- *\/\n-isXML = Sizzle.isXML = function( elem ) {\n-\tvar namespace = elem && elem.namespaceURI,\n-\t\tdocElem = elem && ( elem.ownerDocument || elem ).documentElement;\n-\n-\t\/\/ Support: IE <=8\n-\t\/\/ Assume HTML when documentElement doesn't yet exist, such as inside loading iframes\n-\t\/\/ https:\/\/bugs.jquery.com\/ticket\/4833\n-\treturn !rhtml.test( namespace || docElem && docElem.nodeName || \"HTML\" );\n-};\n-\n-\/**\n- * Sets document-related variables once based on the current document\n- * @param {Element|Object} [doc] An element or document object to use to set the document\n- * @returns {Object} Returns the current document\n- *\/\n-setDocument = Sizzle.setDocument = function( node ) {\n-\tvar hasCompare, subWindow,\n-\t\tdoc = node ? node.ownerDocument || node : preferredDoc;\n-\n-\t\/\/ Return early if doc is invalid or already selected\n-\t\/\/ Support: IE 11+, Edge 17 - 18+\n-\t\/\/ IE\/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n-\t\/\/ two documents; shallow comparisons work.\n-\t\/\/ eslint-disable-next-line eqeqeq\n-\tif ( doc == document || doc.nodeType !== 9 || !doc.documentElement ) {\n-\t\treturn document;\n-\t}\n-\n-\t\/\/ Update global variables\n-\tdocument = doc;\n-\tdocElem = document.documentElement;\n-\tdocumentIsHTML = !isXML( document );\n-\n-\t\/\/ Support: IE 9 - 11+, Edge 12 - 18+\n-\t\/\/ Accessing iframe documents after unload throws \"permission denied\" errors (jQuery #13936)\n-\t\/\/ Support: IE 11+, Edge 17 - 18+\n-\t\/\/ IE\/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n-\t\/\/ two documents; shallow comparisons work.\n-\t\/\/ eslint-disable-next-line eqeqeq\n-\tif ( preferredDoc != document &&\n-\t\t( subWindow = document.defaultView ) && subWindow.top !== subWindow ) {\n-\n-\t\t\/\/ Support: IE 11, Edge\n-\t\tif ( subWindow.addEventListener ) {\n-\t\t\tsubWindow.addEventListener( \"unload\", unloadHandler, false );\n-\n-\t\t\/\/ Support: IE 9 - 10 only\n-\t\t} else if ( subWindow.attachEvent ) {\n-\t\t\tsubWindow.attachEvent( \"onunload\", unloadHandler );\n-\t\t}\n-\t}\n-\n-\t\/\/ Support: IE 8 - 11+, Edge 12 - 18+, Chrome <=16 - 25 only, Firefox <=3.6 - 31 only,\n-\t\/\/ Safari 4 - 5 only, Opera <=11.6 - 12.x only\n-\t\/\/ IE\/Edge & older browsers don't support the :scope pseudo-class.\n-\t\/\/ Support: Safari 6.0 only\n-\t\/\/ Safari 6.0 supports :scope but it's an alias of :root there.\n-\tsupport.scope = assert( function( el ) {\n-\t\tdocElem.appendChild( el ).appendChild( document.createElement( \"div\" ) );\n-\t\treturn typeof el.querySelectorAll !== \"undefined\" &&\n-\t\t\t!el.querySelectorAll( \":scope fieldset div\" ).length;\n-\t} );\n-\n-\t\/* Attributes\n-\t---------------------------------------------------------------------- *\/\n-\n-\t\/\/ Support: IE<8\n-\t\/\/ Verify that getAttribute really returns attributes and not properties\n-\t\/\/ (excepting IE8 booleans)\n-\tsupport.attributes = assert( function( el ) {\n-\t\tel.className = \"i\";\n-\t\treturn !el.getAttribute( \"className\" );\n-\t} );\n-\n-\t\/* getElement(s)By*\n-\t---------------------------------------------------------------------- *\/\n-\n-\t\/\/ Check if getElementsByTagName(\"*\") returns only elements\n-\tsupport.getElementsByTagName = assert( function( el ) {\n-\t\tel.appendChild( document.createComment( \"\" ) );\n-\t\treturn !el.getElementsByTagName( \"*\" ).length;\n-\t} );\n-\n-\t\/\/ Support: IE<9\n-\tsupport.getElementsByClassName = rnative.test( document.getElementsByClassName );\n-\n-\t\/\/ Support: IE<10\n-\t\/\/ Check if getElementById returns elements by name\n-\t\/\/ The broken getElementById methods don't pick up programmatically-set names,\n-\t\/\/ so use a roundabout getElementsByName test\n-\tsupport.getById = assert( function( el ) {\n-\t\tdocElem.appendChild( el ).id = expando;\n-\t\treturn !document.getElementsByName || !document.getElementsByName( expando ).length;\n-\t} );\n-\n-\t\/\/ ID filter and find\n-\tif ( support.getById ) {\n-\t\tExpr.filter[ \"ID\" ] = function( id ) {\n-\t\t\tvar attrId = id.replace( runescape, funescape );\n-\t\t\treturn function( elem ) {\n-\t\t\t\treturn elem.getAttribute( \"id\" ) === attrId;\n-\t\t\t};\n-\t\t};\n-\t\tExpr.find[ \"ID\" ] = function( id, context ) {\n-\t\t\tif ( typeof context.getElementById !== \"undefined\" && documentIsHTML ) {\n-\t\t\t\tvar elem = context.getElementById( id );\n-\t\t\t\treturn elem ? [ elem ] : [];\n-\t\t\t}\n-\t\t};\n-\t} else {\n-\t\tExpr.filter[ \"ID\" ] =  function( id ) {\n-\t\t\tvar attrId = id.replace( runescape, funescape );\n-\t\t\treturn function( elem ) {\n-\t\t\t\tvar node = typeof elem.getAttributeNode !== \"undefined\" &&\n-\t\t\t\t\telem.getAttributeNode( \"id\" );\n-\t\t\t\treturn node && node.value === attrId;\n-\t\t\t};\n-\t\t};\n-\n-\t\t\/\/ Support: IE 6 - 7 only\n-\t\t\/\/ getElementById is not reliable as a find shortcut\n-\t\tExpr.find[ \"ID\" ] = function( id, context ) {\n-\t\t\tif ( typeof context.getElementById !== \"undefined\" && documentIsHTML ) {\n-\t\t\t\tvar node, i, elems,\n-\t\t\t\t\telem = context.getElementById( id );\n-\n-\t\t\t\tif ( elem ) {\n-\n-\t\t\t\t\t\/\/ Verify the id attribute\n-\t\t\t\t\tnode = elem.getAttributeNode( \"id\" );\n-\t\t\t\t\tif ( node && node.value === id ) {\n-\t\t\t\t\t\treturn [ elem ];\n-\t\t\t\t\t}\n-\n-\t\t\t\t\t\/\/ Fall back on getElementsByName\n-\t\t\t\t\telems = context.getElementsByName( id );\n-\t\t\t\t\ti = 0;\n-\t\t\t\t\twhile ( ( elem = elems[ i++ ] ) ) {\n-\t\t\t\t\t\tnode = elem.getAttributeNode( \"id\" );\n-\t\t\t\t\t\tif ( node && node.value === id ) {\n-\t\t\t\t\t\t\treturn [ elem ];\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\n-\t\t\t\treturn [];\n-\t\t\t}\n-\t\t};\n-\t}\n-\n-\t\/\/ Tag\n-\tExpr.find[ \"TAG\" ] = support.getElementsByTagName ?\n-\t\tfunction( tag, context ) {\n-\t\t\tif ( typeof context.getElementsByTagName !== \"undefined\" ) {\n-\t\t\t\treturn context.getElementsByTagName( tag );\n-\n-\t\t\t\/\/ DocumentFragment nodes don't have gEBTN\n-\t\t\t} else if ( support.qsa ) {\n-\t\t\t\treturn context.querySelectorAll( tag );\n-\t\t\t}\n-\t\t} :\n-\n-\t\tfunction( tag, context ) {\n-\t\t\tvar elem,\n-\t\t\t\ttmp = [],\n-\t\t\t\ti = 0,\n-\n-\t\t\t\t\/\/ By happy coincidence, a (broken) gEBTN appears on DocumentFragment nodes too\n-\t\t\t\tresults = context.getElementsByTagName( tag );\n-\n-\t\t\t\/\/ Filter out possible comments\n-\t\t\tif ( tag === \"*\" ) {\n-\t\t\t\twhile ( ( elem = results[ i++ ] ) ) {\n-\t\t\t\t\tif ( elem.nodeType === 1 ) {\n-\t\t\t\t\t\ttmp.push( elem );\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\n-\t\t\t\treturn tmp;\n-\t\t\t}\n-\t\t\treturn results;\n-\t\t};\n-\n-\t\/\/ Class\n-\tExpr.find[ \"CLASS\" ] = support.getElementsByClassName && function( className, context ) {\n-\t\tif ( typeof context.getElementsByClassName !== \"undefined\" && documentIsHTML ) {\n-\t\t\treturn context.getElementsByClassName( className );\n-\t\t}\n-\t};\n-\n-\t\/* QSA\/matchesSelector\n-\t---------------------------------------------------------------------- *\/\n-\n-\t\/\/ QSA and matchesSelector support\n-\n-\t\/\/ matchesSelector(:active) reports false when true (IE9\/Opera 11.5)\n-\trbuggyMatches = [];\n-\n-\t\/\/ qSa(:focus) reports false when true (Chrome 21)\n-\t\/\/ We allow this because of a bug in IE8\/9 that throws an error\n-\t\/\/ whenever `document.activeElement` is accessed on an iframe\n-\t\/\/ So, we allow :focus to pass through QSA all the time to avoid the IE error\n-\t\/\/ See https:\/\/bugs.jquery.com\/ticket\/13378\n-\trbuggyQSA = [];\n-\n-\tif ( ( support.qsa = rnative.test( document.querySelectorAll ) ) ) {\n-\n-\t\t\/\/ Build QSA regex\n-\t\t\/\/ Regex strategy adopted from Diego Perini\n-\t\tassert( function( el ) {\n-\n-\t\t\tvar input;\n-\n-\t\t\t\/\/ Select is set to empty string on purpose\n-\t\t\t\/\/ This is to test IE's treatment of not explicitly\n-\t\t\t\/\/ setting a boolean content attribute,\n-\t\t\t\/\/ since its presence should be enough\n-\t\t\t\/\/ https:\/\/bugs.jquery.com\/ticket\/12359\n-\t\t\tdocElem.appendChild( el ).innerHTML = \"<a id='\" + expando + \"'><\/a>\" +\n-\t\t\t\t\"<select id='\" + expando + \"-\\r\\\\' msallowcapture=''>\" +\n-\t\t\t\t\"<option selected=''><\/option><\/select>\";\n-\n-\t\t\t\/\/ Support: IE8, Opera 11-12.16\n-\t\t\t\/\/ Nothing should be selected when empty strings follow ^= or $= or *=\n-\t\t\t\/\/ The test attribute must be unknown in Opera but \"safe\" for WinRT\n-\t\t\t\/\/ https:\/\/msdn.microsoft.com\/en-us\/library\/ie\/hh465388.aspx#attribute_section\n-\t\t\tif ( el.querySelectorAll( \"[msallowcapture^='']\" ).length ) {\n-\t\t\t\trbuggyQSA.push( \"[*^$]=\" + whitespace + \"*(?:''|\\\"\\\")\" );\n-\t\t\t}\n-\n-\t\t\t\/\/ Support: IE8\n-\t\t\t\/\/ Boolean attributes and \"value\" are not treated correctly\n-\t\t\tif ( !el.querySelectorAll( \"[selected]\" ).length ) {\n-\t\t\t\trbuggyQSA.push( \"\\\\[\" + whitespace + \"*(?:value|\" + booleans + \")\" );\n-\t\t\t}\n-\n-\t\t\t\/\/ Support: Chrome<29, Android<4.4, Safari<7.0+, iOS<7.0+, PhantomJS<1.9.8+\n-\t\t\tif ( !el.querySelectorAll( \"[id~=\" + expando + \"-]\" ).length ) {\n-\t\t\t\trbuggyQSA.push( \"~=\" );\n-\t\t\t}\n-\n-\t\t\t\/\/ Support: IE 11+, Edge 15 - 18+\n-\t\t\t\/\/ IE 11\/Edge don't find elements on a `[name='']` query in some cases.\n-\t\t\t\/\/ Adding a temporary attribute to the document before the selection works\n-\t\t\t\/\/ around the issue.\n-\t\t\t\/\/ Interestingly, IE 10 & older don't seem to have the issue.\n-\t\t\tinput = document.createElement( \"input\" );\n-\t\t\tinput.setAttribute( \"name\", \"\" );\n-\t\t\tel.appendChild( input );\n-\t\t\tif ( !el.querySelectorAll( \"[name='']\" ).length ) {\n-\t\t\t\trbuggyQSA.push( \"\\\\[\" + whitespace + \"*name\" + whitespace + \"*=\" +\n-\t\t\t\t\twhitespace + \"*(?:''|\\\"\\\")\" );\n-\t\t\t}\n-\n-\t\t\t\/\/ Webkit\/Opera - :checked should return selected option elements\n-\t\t\t\/\/ http:\/\/www.w3.org\/TR\/2011\/REC-css3-selectors-20110929\/#checked\n-\t\t\t\/\/ IE8 throws error here and will not see later tests\n-\t\t\tif ( !el.querySelectorAll( \":checked\" ).length ) {\n-\t\t\t\trbuggyQSA.push( \":checked\" );\n-\t\t\t}\n-\n-\t\t\t\/\/ Support: Safari 8+, iOS 8+\n-\t\t\t\/\/ https:\/\/bugs.webkit.org\/show_bug.cgi?id=136851\n-\t\t\t\/\/ In-page `selector#id sibling-combinator selector` fails\n-\t\t\tif ( !el.querySelectorAll( \"a#\" + expando + \"+*\" ).length ) {\n-\t\t\t\trbuggyQSA.push( \".#.+[+~]\" );\n-\t\t\t}\n-\n-\t\t\t\/\/ Support: Firefox <=3.6 - 5 only\n-\t\t\t\/\/ Old Firefox doesn't throw on a badly-escaped identifier.\n-\t\t\tel.querySelectorAll( \"\\\\\\f\" );\n-\t\t\trbuggyQSA.push( \"[\\\\r\\\\n\\\\f]\" );\n-\t\t} );\n-\n-\t\tassert( function( el ) {\n-\t\t\tel.innerHTML = \"<a href='' disabled='disabled'><\/a>\" +\n-\t\t\t\t\"<select disabled='disabled'><option\/><\/select>\";\n-\n-\t\t\t\/\/ Support: Windows 8 Native Apps\n-\t\t\t\/\/ The type and name attributes are restricted during .innerHTML assignment\n-\t\t\tvar input = document.createElement( \"input\" );\n-\t\t\tinput.setAttribute( \"type\", \"hidden\" );\n-\t\t\tel.appendChild( input ).setAttribute( \"name\", \"D\" );\n-\n-\t\t\t\/\/ Support: IE8\n-\t\t\t\/\/ Enforce case-sensitivity of name attribute\n-\t\t\tif ( el.querySelectorAll( \"[name=d]\" ).length ) {\n-\t\t\t\trbuggyQSA.push( \"name\" + whitespace + \"*[*^$|!~]?=\" );\n-\t\t\t}\n-\n-\t\t\t\/\/ FF 3.5 - :enabled\/:disabled and hidden elements (hidden elements are still enabled)\n-\t\t\t\/\/ IE8 throws error here and will not see later tests\n-\t\t\tif ( el.querySelectorAll( \":enabled\" ).length !== 2 ) {\n-\t\t\t\trbuggyQSA.push( \":enabled\", \":disabled\" );\n-\t\t\t}\n-\n-\t\t\t\/\/ Support: IE9-11+\n-\t\t\t\/\/ IE's :disabled selector does not pick up the children of disabled fieldsets\n-\t\t\tdocElem.appendChild( el ).disabled = true;\n-\t\t\tif ( el.querySelectorAll( \":disabled\" ).length !== 2 ) {\n-\t\t\t\trbuggyQSA.push( \":enabled\", \":disabled\" );\n-\t\t\t}\n-\n-\t\t\t\/\/ Support: Opera 10 - 11 only\n-\t\t\t\/\/ Opera 10-11 does not throw on post-comma invalid pseudos\n-\t\t\tel.querySelectorAll( \"*,:x\" );\n-\t\t\trbuggyQSA.push( \",.*:\" );\n-\t\t} );\n-\t}\n-\n-\tif ( ( support.matchesSelector = rnative.test( ( matches = docElem.matches ||\n-\t\tdocElem.webkitMatchesSelector ||\n-\t\tdocElem.mozMatchesSelector ||\n-\t\tdocElem.oMatchesSelector ||\n-\t\tdocElem.msMatchesSelector ) ) ) ) {\n-\n-\t\tassert( function( el ) {\n-\n-\t\t\t\/\/ Check to see if it's possible to do matchesSelector\n-\t\t\t\/\/ on a disconnected node (IE 9)\n-\t\t\tsupport.disconnectedMatch = matches.call( el, \"*\" );\n-\n-\t\t\t\/\/ This should fail with an exception\n-\t\t\t\/\/ Gecko does not error, returns false instead\n-\t\t\tmatches.call( el, \"[s!='']:x\" );\n-\t\t\trbuggyMatches.push( \"!=\", pseudos );\n-\t\t} );\n-\t}\n-\n-\trbuggyQSA = rbuggyQSA.length && new RegExp( rbuggyQSA.join( \"|\" ) );\n-\trbuggyMatches = rbuggyMatches.length && new RegExp( rbuggyMatches.join( \"|\" ) );\n-\n-\t\/* Contains\n-\t---------------------------------------------------------------------- *\/\n-\thasCompare = rnative.test( docElem.compareDocumentPosition );\n-\n-\t\/\/ Element contains another\n-\t\/\/ Purposefully self-exclusive\n-\t\/\/ As in, an element does not contain itself\n-\tcontains = hasCompare || rnative.test( docElem.contains ) ?\n-\t\tfunction( a, b ) {\n-\t\t\tvar adown = a.nodeType === 9 ? a.documentElement : a,\n-\t\t\t\tbup = b && b.parentNode;\n-\t\t\treturn a === bup || !!( bup && bup.nodeType === 1 && (\n-\t\t\t\tadown.contains ?\n-\t\t\t\t\tadown.contains( bup ) :\n-\t\t\t\t\ta.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16\n-\t\t\t) );\n-\t\t} :\n-\t\tfunction( a, b ) {\n-\t\t\tif ( b ) {\n-\t\t\t\twhile ( ( b = b.parentNode ) ) {\n-\t\t\t\t\tif ( b === a ) {\n-\t\t\t\t\t\treturn true;\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t}\n-\t\t\treturn false;\n-\t\t};\n-\n-\t\/* Sorting\n-\t---------------------------------------------------------------------- *\/\n-\n-\t\/\/ Document order sorting\n-\tsortOrder = hasCompare ?\n-\tfunction( a, b ) {\n-\n-\t\t\/\/ Flag for duplicate removal\n-\t\tif ( a === b ) {\n-\t\t\thasDuplicate = true;\n-\t\t\treturn 0;\n-\t\t}\n-\n-\t\t\/\/ Sort on method existence if only one input has compareDocumentPosition\n-\t\tvar compare = !a.compareDocumentPosition - !b.compareDocumentPosition;\n-\t\tif ( compare ) {\n-\t\t\treturn compare;\n-\t\t}\n-\n-\t\t\/\/ Calculate position if both inputs belong to the same document\n-\t\t\/\/ Support: IE 11+, Edge 17 - 18+\n-\t\t\/\/ IE\/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n-\t\t\/\/ two documents; shallow comparisons work.\n-\t\t\/\/ eslint-disable-next-line eqeqeq\n-\t\tcompare = ( a.ownerDocument || a ) == ( b.ownerDocument || b ) ?\n-\t\t\ta.compareDocumentPosition( b ) :\n-\n-\t\t\t\/\/ Otherwise we know they are disconnected\n-\t\t\t1;\n-\n-\t\t\/\/ Disconnected nodes\n-\t\tif ( compare & 1 ||\n-\t\t\t( !support.sortDetached && b.compareDocumentPosition( a ) === compare ) ) {\n-\n-\t\t\t\/\/ Choose the first element that is related to our preferred document\n-\t\t\t\/\/ Support: IE 11+, Edge 17 - 18+\n-\t\t\t\/\/ IE\/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n-\t\t\t\/\/ two documents; shallow comparisons work.\n-\t\t\t\/\/ eslint-disable-next-line eqeqeq\n-\t\t\tif ( a == document || a.ownerDocument == preferredDoc &&\n-\t\t\t\tcontains( preferredDoc, a ) ) {\n-\t\t\t\treturn -1;\n-\t\t\t}\n-\n-\t\t\t\/\/ Support: IE 11+, Edge 17 - 18+\n-\t\t\t\/\/ IE\/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n-\t\t\t\/\/ two documents; shallow comparisons work.\n-\t\t\t\/\/ eslint-disable-next-line eqeqeq\n-\t\t\tif ( b == document || b.ownerDocument == preferredDoc &&\n-\t\t\t\tcontains( preferredDoc, b ) ) {\n-\t\t\t\treturn 1;\n-\t\t\t}\n-\n-\t\t\t\/\/ Maintain original order\n-\t\t\treturn sortInput ?\n-\t\t\t\t( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :\n-\t\t\t\t0;\n-\t\t}\n-\n-\t\treturn compare & 4 ? -1 : 1;\n-\t} :\n-\tfunction( a, b ) {\n-\n-\t\t\/\/ Exit early if the nodes are identical\n-\t\tif ( a === b ) {\n-\t\t\thasDuplicate = true;\n-\t\t\treturn 0;\n-\t\t}\n-\n-\t\tvar cur,\n-\t\t\ti = 0,\n-\t\t\taup = a.parentNode,\n-\t\t\tbup = b.parentNode,\n-\t\t\tap = [ a ],\n-\t\t\tbp = [ b ];\n-\n-\t\t\/\/ Parentless nodes are either documents or disconnected\n-\t\tif ( !aup || !bup ) {\n-\n-\t\t\t\/\/ Support: IE 11+, Edge 17 - 18+\n-\t\t\t\/\/ IE\/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n-\t\t\t\/\/ two documents; shallow comparisons work.\n-\t\t\t\/* eslint-disable eqeqeq *\/\n-\t\t\treturn a == document ? -1 :\n-\t\t\t\tb == document ? 1 :\n-\t\t\t\t\/* eslint-enable eqeqeq *\/\n-\t\t\t\taup ? -1 :\n-\t\t\t\tbup ? 1 :\n-\t\t\t\tsortInput ?\n-\t\t\t\t( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :\n-\t\t\t\t0;\n-\n-\t\t\/\/ If the nodes are siblings, we can do a quick check\n-\t\t} else if ( aup === bup ) {\n-\t\t\treturn siblingCheck( a, b );\n-\t\t}\n-\n-\t\t\/\/ Otherwise we need full lists of their ancestors for comparison\n-\t\tcur = a;\n-\t\twhile ( ( cur = cur.parentNode ) ) {\n-\t\t\tap.unshift( cur );\n-\t\t}\n-\t\tcur = b;\n-\t\twhile ( ( cur = cur.parentNode ) ) {\n-\t\t\tbp.unshift( cur );\n-\t\t}\n-\n-\t\t\/\/ Walk down the tree looking for a discrepancy\n-\t\twhile ( ap[ i ] === bp[ i ] ) {\n-\t\t\ti++;\n-\t\t}\n-\n-\t\treturn i ?\n-\n-\t\t\t\/\/ Do a sibling check if the nodes have a common ancestor\n-\t\t\tsiblingCheck( ap[ i ], bp[ i ] ) :\n-\n-\t\t\t\/\/ Otherwise nodes in our document sort first\n-\t\t\t\/\/ Support: IE 11+, Edge 17 - 18+\n-\t\t\t\/\/ IE\/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n-\t\t\t\/\/ two documents; shallow comparisons work.\n-\t\t\t\/* eslint-disable eqeqeq *\/\n-\t\t\tap[ i ] == preferredDoc ? -1 :\n-\t\t\tbp[ i ] == preferredDoc ? 1 :\n-\t\t\t\/* eslint-enable eqeqeq *\/\n-\t\t\t0;\n-\t};\n-\n-\treturn document;\n-};\n-\n-Sizzle.matches = function( expr, elements ) {\n-\treturn Sizzle( expr, null, null, elements );\n-};\n-\n-Sizzle.matchesSelector = function( elem, expr ) {\n-\tsetDocument( elem );\n-\n-\tif ( support.matchesSelector && documentIsHTML &&\n-\t\t!nonnativeSelectorCache[ expr + \" \" ] &&\n-\t\t( !rbuggyMatches || !rbuggyMatches.test( expr ) ) &&\n-\t\t( !rbuggyQSA     || !rbuggyQSA.test( expr ) ) ) {\n-\n-\t\ttry {\n-\t\t\tvar ret = matches.call( elem, expr );\n-\n-\t\t\t\/\/ IE 9's matchesSelector returns false on disconnected nodes\n-\t\t\tif ( ret || support.disconnectedMatch ||\n-\n-\t\t\t\t\/\/ As well, disconnected nodes are said to be in a document\n-\t\t\t\t\/\/ fragment in IE 9\n-\t\t\t\telem.document && elem.document.nodeType !== 11 ) {\n-\t\t\t\treturn ret;\n-\t\t\t}\n-\t\t} catch ( e ) {\n-\t\t\tnonnativeSelectorCache( expr, true );\n-\t\t}\n-\t}\n-\n-\treturn Sizzle( expr, document, null, [ elem ] ).length > 0;\n-};\n-\n-Sizzle.contains = function( context, elem ) {\n-\n-\t\/\/ Set document vars if needed\n-\t\/\/ Support: IE 11+, Edge 17 - 18+\n-\t\/\/ IE\/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n-\t\/\/ two documents; shallow comparisons work.\n-\t\/\/ eslint-disable-next-line eqeqeq\n-\tif ( ( context.ownerDocument || context ) != document ) {\n-\t\tsetDocument( context );\n-\t}\n-\treturn contains( context, elem );\n-};\n-\n-Sizzle.attr = function( elem, name ) {\n-\n-\t\/\/ Set document vars if needed\n-\t\/\/ Support: IE 11+, Edge 17 - 18+\n-\t\/\/ IE\/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n-\t\/\/ two documents; shallow comparisons work.\n-\t\/\/ eslint-disable-next-line eqeqeq\n-\tif ( ( elem.ownerDocument || elem ) != document ) {\n-\t\tsetDocument( elem );\n-\t}\n-\n-\tvar fn = Expr.attrHandle[ name.toLowerCase() ],\n-\n-\t\t\/\/ Don't get fooled by Object.prototype properties (jQuery #13807)\n-\t\tval = fn && hasOwn.call( Expr.attrHandle, name.toLowerCase() ) ?\n-\t\t\tfn( elem, name, !documentIsHTML ) :\n-\t\t\tundefined;\n-\n-\treturn val !== undefined ?\n-\t\tval :\n-\t\tsupport.attributes || !documentIsHTML ?\n-\t\t\telem.getAttribute( name ) :\n-\t\t\t( val = elem.getAttributeNode( name ) ) && val.specified ?\n-\t\t\t\tval.value :\n-\t\t\t\tnull;\n-};\n-\n-Sizzle.escape = function( sel ) {\n-\treturn ( sel + \"\" ).replace( rcssescape, fcssescape );\n-};\n-\n-Sizzle.error = function( msg ) {\n-\tthrow new Error( \"Syntax error, unrecognized expression: \" + msg );\n-};\n-\n-\/**\n- * Document sorting and removing duplicates\n- * @param {ArrayLike} results\n- *\/\n-Sizzle.uniqueSort = function( results ) {\n-\tvar elem,\n-\t\tduplicates = [],\n-\t\tj = 0,\n-\t\ti = 0;\n-\n-\t\/\/ Unless we *know* we can detect duplicates, assume their presence\n-\thasDuplicate = !support.detectDuplicates;\n-\tsortInput = !support.sortStable && results.slice( 0 );\n-\tresults.sort( sortOrder );\n-\n-\tif ( hasDuplicate ) {\n-\t\twhile ( ( elem = results[ i++ ] ) ) {\n-\t\t\tif ( elem === results[ i ] ) {\n-\t\t\t\tj = duplicates.push( i );\n-\t\t\t}\n-\t\t}\n-\t\twhile ( j-- ) {\n-\t\t\tresults.splice( duplicates[ j ], 1 );\n-\t\t}\n-\t}\n-\n-\t\/\/ Clear input after sorting to release objects\n-\t\/\/ See https:\/\/github.com\/jquery\/sizzle\/pull\/225\n-\tsortInput = null;\n-\n-\treturn results;\n-};\n-\n-\/**\n- * Utility function for retrieving the text value of an array of DOM nodes\n- * @param {Array|Element} elem\n- *\/\n-getText = Sizzle.getText = function( elem ) {\n-\tvar node,\n-\t\tret = \"\",\n-\t\ti = 0,\n-\t\tnodeType = elem.nodeType;\n-\n-\tif ( !nodeType ) {\n-\n-\t\t\/\/ If no nodeType, this is expected to be an array\n-\t\twhile ( ( node = elem[ i++ ] ) ) {\n-\n-\t\t\t\/\/ Do not traverse comment nodes\n-\t\t\tret += getText( node );\n-\t\t}\n-\t} else if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {\n-\n-\t\t\/\/ Use textContent for elements\n-\t\t\/\/ innerText usage removed for consistency of new lines (jQuery #11153)\n-\t\tif ( typeof elem.textContent === \"string\" ) {\n-\t\t\treturn elem.textContent;\n-\t\t} else {\n-\n-\t\t\t\/\/ Traverse its children\n-\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {\n-\t\t\t\tret += getText( elem );\n-\t\t\t}\n-\t\t}\n-\t} else if ( nodeType === 3 || nodeType === 4 ) {\n-\t\treturn elem.nodeValue;\n-\t}\n-\n-\t\/\/ Do not include comment or processing instruction nodes\n-\n-\treturn ret;\n-};\n-\n-Expr = Sizzle.selectors = {\n-\n-\t\/\/ Can be adjusted by the user\n-\tcacheLength: 50,\n-\n-\tcreatePseudo: markFunction,\n-\n-\tmatch: matchExpr,\n-\n-\tattrHandle: {},\n-\n-\tfind: {},\n-\n-\trelative: {\n-\t\t\">\": { dir: \"parentNode\", first: true },\n-\t\t\" \": { dir: \"parentNode\" },\n-\t\t\"+\": { dir: \"previousSibling\", first: true },\n-\t\t\"~\": { dir: \"previousSibling\" }\n-\t},\n-\n-\tpreFilter: {\n-\t\t\"ATTR\": function( match ) {\n-\t\t\tmatch[ 1 ] = match[ 1 ].replace( runescape, funescape );\n-\n-\t\t\t\/\/ Move the given value to match[3] whether quoted or unquoted\n-\t\t\tmatch[ 3 ] = ( match[ 3 ] || match[ 4 ] ||\n-\t\t\t\tmatch[ 5 ] || \"\" ).replace( runescape, funescape );\n-\n-\t\t\tif ( match[ 2 ] === \"~=\" ) {\n-\t\t\t\tmatch[ 3 ] = \" \" + match[ 3 ] + \" \";\n-\t\t\t}\n-\n-\t\t\treturn match.slice( 0, 4 );\n-\t\t},\n-\n-\t\t\"CHILD\": function( match ) {\n-\n-\t\t\t\/* matches from matchExpr[\"CHILD\"]\n-\t\t\t\t1 type (only|nth|...)\n-\t\t\t\t2 what (child|of-type)\n-\t\t\t\t3 argument (even|odd|\\d*|\\d*n([+-]\\d+)?|...)\n-\t\t\t\t4 xn-component of xn+y argument ([+-]?\\d*n|)\n-\t\t\t\t5 sign of xn-component\n-\t\t\t\t6 x of xn-component\n-\t\t\t\t7 sign of y-component\n-\t\t\t\t8 y of y-component\n-\t\t\t*\/\n-\t\t\tmatch[ 1 ] = match[ 1 ].toLowerCase();\n-\n-\t\t\tif ( match[ 1 ].slice( 0, 3 ) === \"nth\" ) {\n-\n-\t\t\t\t\/\/ nth-* requires argument\n-\t\t\t\tif ( !match[ 3 ] ) {\n-\t\t\t\t\tSizzle.error( match[ 0 ] );\n-\t\t\t\t}\n-\n-\t\t\t\t\/\/ numeric x and y parameters for Expr.filter.CHILD\n-\t\t\t\t\/\/ remember that false\/true cast respectively to 0\/1\n-\t\t\t\tmatch[ 4 ] = +( match[ 4 ] ?\n-\t\t\t\t\tmatch[ 5 ] + ( match[ 6 ] || 1 ) :\n-\t\t\t\t\t2 * ( match[ 3 ] === \"even\" || match[ 3 ] === \"odd\" ) );\n-\t\t\t\tmatch[ 5 ] = +( ( match[ 7 ] + match[ 8 ] ) || match[ 3 ] === \"odd\" );\n-\n-\t\t\t\t\/\/ other types prohibit arguments\n-\t\t\t} else if ( match[ 3 ] ) {\n-\t\t\t\tSizzle.error( match[ 0 ] );\n-\t\t\t}\n-\n-\t\t\treturn match;\n-\t\t},\n-\n-\t\t\"PSEUDO\": function( match ) {\n-\t\t\tvar excess,\n-\t\t\t\tunquoted = !match[ 6 ] && match[ 2 ];\n-\n-\t\t\tif ( matchExpr[ \"CHILD\" ].test( match[ 0 ] ) ) {\n-\t\t\t\treturn null;\n-\t\t\t}\n-\n-\t\t\t\/\/ Accept quoted arguments as-is\n-\t\t\tif ( match[ 3 ] ) {\n-\t\t\t\tmatch[ 2 ] = match[ 4 ] || match[ 5 ] || \"\";\n-\n-\t\t\t\/\/ Strip excess characters from unquoted arguments\n-\t\t\t} else if ( unquoted && rpseudo.test( unquoted ) &&\n-\n-\t\t\t\t\/\/ Get excess from tokenize (recursively)\n-\t\t\t\t( excess = tokenize( unquoted, true ) ) &&\n-\n-\t\t\t\t\/\/ advance to the next closing parenthesis\n-\t\t\t\t( excess = unquoted.indexOf( \")\", unquoted.length - excess ) - unquoted.length ) ) {\n-\n-\t\t\t\t\/\/ excess is a negative index\n-\t\t\t\tmatch[ 0 ] = match[ 0 ].slice( 0, excess );\n-\t\t\t\tmatch[ 2 ] = unquoted.slice( 0, excess );\n-\t\t\t}\n-\n-\t\t\t\/\/ Return only captures needed by the pseudo filter method (type and argument)\n-\t\t\treturn match.slice( 0, 3 );\n-\t\t}\n-\t},\n-\n-\tfilter: {\n-\n-\t\t\"TAG\": function( nodeNameSelector ) {\n-\t\t\tvar nodeName = nodeNameSelector.replace( runescape, funescape ).toLowerCase();\n-\t\t\treturn nodeNameSelector === \"*\" ?\n-\t\t\t\tfunction() {\n-\t\t\t\t\treturn true;\n-\t\t\t\t} :\n-\t\t\t\tfunction( elem ) {\n-\t\t\t\t\treturn elem.nodeName && elem.nodeName.toLowerCase() === nodeName;\n-\t\t\t\t};\n-\t\t},\n-\n-\t\t\"CLASS\": function( className ) {\n-\t\t\tvar pattern = classCache[ className + \" \" ];\n-\n-\t\t\treturn pattern ||\n-\t\t\t\t( pattern = new RegExp( \"(^|\" + whitespace +\n-\t\t\t\t\t\")\" + className + \"(\" + whitespace + \"|$)\" ) ) && classCache(\n-\t\t\t\t\t\tclassName, function( elem ) {\n-\t\t\t\t\t\t\treturn pattern.test(\n-\t\t\t\t\t\t\t\ttypeof elem.className === \"string\" && elem.className ||\n-\t\t\t\t\t\t\t\ttypeof elem.getAttribute !== \"undefined\" &&\n-\t\t\t\t\t\t\t\t\telem.getAttribute( \"class\" ) ||\n-\t\t\t\t\t\t\t\t\"\"\n-\t\t\t\t\t\t\t);\n-\t\t\t\t} );\n-\t\t},\n-\n-\t\t\"ATTR\": function( name, operator, check ) {\n-\t\t\treturn function( elem ) {\n-\t\t\t\tvar result = Sizzle.attr( elem, name );\n-\n-\t\t\t\tif ( result == null ) {\n-\t\t\t\t\treturn operator === \"!=\";\n-\t\t\t\t}\n-\t\t\t\tif ( !operator ) {\n-\t\t\t\t\treturn true;\n-\t\t\t\t}\n-\n-\t\t\t\tresult += \"\";\n-\n-\t\t\t\t\/* eslint-disable max-len *\/\n-\n-\t\t\t\treturn operator === \"=\" ? result === check :\n-\t\t\t\t\toperator === \"!=\" ? result !== check :\n-\t\t\t\t\toperator === \"^=\" ? check && result.indexOf( check ) === 0 :\n-\t\t\t\t\toperator === \"*=\" ? check && result.indexOf( check ) > -1 :\n-\t\t\t\t\toperator === \"$=\" ? check && result.slice( -check.length ) === check :\n-\t\t\t\t\toperator === \"~=\" ? ( \" \" + result.replace( rwhitespace, \" \" ) + \" \" ).indexOf( check ) > -1 :\n-\t\t\t\t\toperator === \"|=\" ? result === check || result.slice( 0, check.length + 1 ) === check + \"-\" :\n-\t\t\t\t\tfalse;\n-\t\t\t\t\/* eslint-enable max-len *\/\n-\n-\t\t\t};\n-\t\t},\n-\n-\t\t\"CHILD\": function( type, what, _argument, first, last ) {\n-\t\t\tvar simple = type.slice( 0, 3 ) !== \"nth\",\n-\t\t\t\tforward = type.slice( -4 ) !== \"last\",\n-\t\t\t\tofType = what === \"of-type\";\n-\n-\t\t\treturn first === 1 && last === 0 ?\n-\n-\t\t\t\t\/\/ Shortcut for :nth-*(n)\n-\t\t\t\tfunction( elem ) {\n-\t\t\t\t\treturn !!elem.parentNode;\n-\t\t\t\t} :\n-\n-\t\t\t\tfunction( elem, _context, xml ) {\n-\t\t\t\t\tvar cache, uniqueCache, outerCache, node, nodeIndex, start,\n-\t\t\t\t\t\tdir = simple !== forward ? \"nextSibling\" : \"previousSibling\",\n-\t\t\t\t\t\tparent = elem.parentNode,\n-\t\t\t\t\t\tname = ofType && elem.nodeName.toLowerCase(),\n-\t\t\t\t\t\tuseCache = !xml && !ofType,\n-\t\t\t\t\t\tdiff = false;\n-\n-\t\t\t\t\tif ( parent ) {\n-\n-\t\t\t\t\t\t\/\/ :(first|last|only)-(child|of-type)\n-\t\t\t\t\t\tif ( simple ) {\n-\t\t\t\t\t\t\twhile ( dir ) {\n-\t\t\t\t\t\t\t\tnode = elem;\n-\t\t\t\t\t\t\t\twhile ( ( node = node[ dir ] ) ) {\n-\t\t\t\t\t\t\t\t\tif ( ofType ?\n-\t\t\t\t\t\t\t\t\t\tnode.nodeName.toLowerCase() === name :\n-\t\t\t\t\t\t\t\t\t\tnode.nodeType === 1 ) {\n-\n-\t\t\t\t\t\t\t\t\t\treturn false;\n-\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t}\n-\n-\t\t\t\t\t\t\t\t\/\/ Reverse direction for :only-* (if we haven't yet done so)\n-\t\t\t\t\t\t\t\tstart = dir = type === \"only\" && !start && \"nextSibling\";\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\treturn true;\n-\t\t\t\t\t\t}\n-\n-\t\t\t\t\t\tstart = [ forward ? parent.firstChild : parent.lastChild ];\n-\n-\t\t\t\t\t\t\/\/ non-xml :nth-child(...) stores cache data on `parent`\n-\t\t\t\t\t\tif ( forward && useCache ) {\n-\n-\t\t\t\t\t\t\t\/\/ Seek `elem` from a previously-cached index\n-\n-\t\t\t\t\t\t\t\/\/ ...in a gzip-friendly way\n-\t\t\t\t\t\t\tnode = parent;\n-\t\t\t\t\t\t\touterCache = node[ expando ] || ( node[ expando ] = {} );\n-\n-\t\t\t\t\t\t\t\/\/ Support: IE <9 only\n-\t\t\t\t\t\t\t\/\/ Defend against cloned attroperties (jQuery gh-1709)\n-\t\t\t\t\t\t\tuniqueCache = outerCache[ node.uniqueID ] ||\n-\t\t\t\t\t\t\t\t( outerCache[ node.uniqueID ] = {} );\n-\n-\t\t\t\t\t\t\tcache = uniqueCache[ type ] || [];\n-\t\t\t\t\t\t\tnodeIndex = cache[ 0 ] === dirruns && cache[ 1 ];\n-\t\t\t\t\t\t\tdiff = nodeIndex && cache[ 2 ];\n-\t\t\t\t\t\t\tnode = nodeIndex && parent.childNodes[ nodeIndex ];\n-\n-\t\t\t\t\t\t\twhile ( ( node = ++nodeIndex && node && node[ dir ] ||\n-\n-\t\t\t\t\t\t\t\t\/\/ Fallback to seeking `elem` from the start\n-\t\t\t\t\t\t\t\t( diff = nodeIndex = 0 ) || start.pop() ) ) {\n-\n-\t\t\t\t\t\t\t\t\/\/ When found, cache indexes on `parent` and break\n-\t\t\t\t\t\t\t\tif ( node.nodeType === 1 && ++diff && node === elem ) {\n-\t\t\t\t\t\t\t\t\tuniqueCache[ type ] = [ dirruns, nodeIndex, diff ];\n-\t\t\t\t\t\t\t\t\tbreak;\n-\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t}\n-\n-\t\t\t\t\t\t} else {\n-\n-\t\t\t\t\t\t\t\/\/ Use previously-cached element index if available\n-\t\t\t\t\t\t\tif ( useCache ) {\n-\n-\t\t\t\t\t\t\t\t\/\/ ...in a gzip-friendly way\n-\t\t\t\t\t\t\t\tnode = elem;\n-\t\t\t\t\t\t\t\touterCache = node[ expando ] || ( node[ expando ] = {} );\n-\n-\t\t\t\t\t\t\t\t\/\/ Support: IE <9 only\n-\t\t\t\t\t\t\t\t\/\/ Defend against cloned attroperties (jQuery gh-1709)\n-\t\t\t\t\t\t\t\tuniqueCache = outerCache[ node.uniqueID ] ||\n-\t\t\t\t\t\t\t\t\t( outerCache[ node.uniqueID ] = {} );\n-\n-\t\t\t\t\t\t\t\tcache = uniqueCache[ type ] || [];\n-\t\t\t\t\t\t\t\tnodeIndex = cache[ 0 ] === dirruns && cache[ 1 ];\n-\t\t\t\t\t\t\t\tdiff = nodeIndex;\n-\t\t\t\t\t\t\t}\n-\n-\t\t\t\t\t\t\t\/\/ xml :nth-child(...)\n-\t\t\t\t\t\t\t\/\/ or :nth-last-child(...) or :nth(-last)?-of-type(...)\n-\t\t\t\t\t\t\tif ( diff === false ) {\n-\n-\t\t\t\t\t\t\t\t\/\/ Use the same loop as above to seek `elem` from the start\n-\t\t\t\t\t\t\t\twhile ( ( node = ++nodeIndex && node && node[ dir ] ||\n-\t\t\t\t\t\t\t\t\t( diff = nodeIndex = 0 ) || start.pop() ) ) {\n-\n-\t\t\t\t\t\t\t\t\tif ( ( ofType ?\n-\t\t\t\t\t\t\t\t\t\tnode.nodeName.toLowerCase() === name :\n-\t\t\t\t\t\t\t\t\t\tnode.nodeType === 1 ) &&\n-\t\t\t\t\t\t\t\t\t\t++diff ) {\n-\n-\t\t\t\t\t\t\t\t\t\t\/\/ Cache the index of each encountered element\n-\t\t\t\t\t\t\t\t\t\tif ( useCache ) {\n-\t\t\t\t\t\t\t\t\t\t\touterCache = node[ expando ] ||\n-\t\t\t\t\t\t\t\t\t\t\t\t( node[ expando ] = {} );\n-\n-\t\t\t\t\t\t\t\t\t\t\t\/\/ Support: IE <9 only\n-\t\t\t\t\t\t\t\t\t\t\t\/\/ Defend against cloned attroperties (jQuery gh-1709)\n-\t\t\t\t\t\t\t\t\t\t\tuniqueCache = outerCache[ node.uniqueID ] ||\n-\t\t\t\t\t\t\t\t\t\t\t\t( outerCache[ node.uniqueID ] = {} );\n-\n-\t\t\t\t\t\t\t\t\t\t\tuniqueCache[ type ] = [ dirruns, diff ];\n-\t\t\t\t\t\t\t\t\t\t}\n-\n-\t\t\t\t\t\t\t\t\t\tif ( node === elem ) {\n-\t\t\t\t\t\t\t\t\t\t\tbreak;\n-\t\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t}\n-\n-\t\t\t\t\t\t\/\/ Incorporate the offset, then check against cycle size\n-\t\t\t\t\t\tdiff -= last;\n-\t\t\t\t\t\treturn diff === first || ( diff % first === 0 && diff \/ first >= 0 );\n-\t\t\t\t\t}\n-\t\t\t\t};\n-\t\t},\n-\n-\t\t\"PSEUDO\": function( pseudo, argument ) {\n-\n-\t\t\t\/\/ pseudo-class names are case-insensitive\n-\t\t\t\/\/ http:\/\/www.w3.org\/TR\/selectors\/#pseudo-classes\n-\t\t\t\/\/ Prioritize by case sensitivity in case custom pseudos are added with uppercase letters\n-\t\t\t\/\/ Remember that setFilters inherits from pseudos\n-\t\t\tvar args,\n-\t\t\t\tfn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||\n-\t\t\t\t\tSizzle.error( \"unsupported pseudo: \" + pseudo );\n-\n-\t\t\t\/\/ The user may use createPseudo to indicate that\n-\t\t\t\/\/ arguments are needed to create the filter function\n-\t\t\t\/\/ just as Sizzle does\n-\t\t\tif ( fn[ expando ] ) {\n-\t\t\t\treturn fn( argument );\n-\t\t\t}\n-\n-\t\t\t\/\/ But maintain support for old signatures\n-\t\t\tif ( fn.length > 1 ) {\n-\t\t\t\targs = [ pseudo, pseudo, \"\", argument ];\n-\t\t\t\treturn Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?\n-\t\t\t\t\tmarkFunction( function( seed, matches ) {\n-\t\t\t\t\t\tvar idx,\n-\t\t\t\t\t\t\tmatched = fn( seed, argument ),\n-\t\t\t\t\t\t\ti = matched.length;\n-\t\t\t\t\t\twhile ( i-- ) {\n-\t\t\t\t\t\t\tidx = indexOf( seed, matched[ i ] );\n-\t\t\t\t\t\t\tseed[ idx ] = !( matches[ idx ] = matched[ i ] );\n-\t\t\t\t\t\t}\n-\t\t\t\t\t} ) :\n-\t\t\t\t\tfunction( elem ) {\n-\t\t\t\t\t\treturn fn( elem, 0, args );\n-\t\t\t\t\t};\n-\t\t\t}\n-\n-\t\t\treturn fn;\n-\t\t}\n-\t},\n-\n-\tpseudos: {\n-\n-\t\t\/\/ Potentially complex pseudos\n-\t\t\"not\": markFunction( function( selector ) {\n-\n-\t\t\t\/\/ Trim the selector passed to compile\n-\t\t\t\/\/ to avoid treating leading and trailing\n-\t\t\t\/\/ spaces as combinators\n-\t\t\tvar input = [],\n-\t\t\t\tresults = [],\n-\t\t\t\tmatcher = compile( selector.replace( rtrim, \"$1\" ) );\n-\n-\t\t\treturn matcher[ expando ] ?\n-\t\t\t\tmarkFunction( function( seed, matches, _context, xml ) {\n-\t\t\t\t\tvar elem,\n-\t\t\t\t\t\tunmatched = matcher( seed, null, xml, [] ),\n-\t\t\t\t\t\ti = seed.length;\n-\n-\t\t\t\t\t\/\/ Match elements unmatched by `matcher`\n-\t\t\t\t\twhile ( i-- ) {\n-\t\t\t\t\t\tif ( ( elem = unmatched[ i ] ) ) {\n-\t\t\t\t\t\t\tseed[ i ] = !( matches[ i ] = elem );\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\t\t\t\t} ) :\n-\t\t\t\tfunction( elem, _context, xml ) {\n-\t\t\t\t\tinput[ 0 ] = elem;\n-\t\t\t\t\tmatcher( input, null, xml, results );\n-\n-\t\t\t\t\t\/\/ Don't keep the element (issue #299)\n-\t\t\t\t\tinput[ 0 ] = null;\n-\t\t\t\t\treturn !results.pop();\n-\t\t\t\t};\n-\t\t} ),\n-\n-\t\t\"has\": markFunction( function( selector ) {\n-\t\t\treturn function( elem ) {\n-\t\t\t\treturn Sizzle( selector, elem ).length > 0;\n-\t\t\t};\n-\t\t} ),\n-\n-\t\t\"contains\": markFunction( function( text ) {\n-\t\t\ttext = text.replace( runescape, funescape );\n-\t\t\treturn function( elem ) {\n-\t\t\t\treturn ( elem.textContent || getText( elem ) ).indexOf( text ) > -1;\n-\t\t\t};\n-\t\t} ),\n-\n-\t\t\/\/ \"Whether an element is represented by a :lang() selector\n-\t\t\/\/ is based solely on the element's language value\n-\t\t\/\/ being equal to the identifier C,\n-\t\t\/\/ or beginning with the identifier C immediately followed by \"-\".\n-\t\t\/\/ The matching of C against the element's language value is performed case-insensitively.\n-\t\t\/\/ The identifier C does not have to be a valid language name.\"\n-\t\t\/\/ http:\/\/www.w3.org\/TR\/selectors\/#lang-pseudo\n-\t\t\"lang\": markFunction( function( lang ) {\n-\n-\t\t\t\/\/ lang value must be a valid identifier\n-\t\t\tif ( !ridentifier.test( lang || \"\" ) ) {\n-\t\t\t\tSizzle.error( \"unsupported lang: \" + lang );\n-\t\t\t}\n-\t\t\tlang = lang.replace( runescape, funescape ).toLowerCase();\n-\t\t\treturn function( elem ) {\n-\t\t\t\tvar elemLang;\n-\t\t\t\tdo {\n-\t\t\t\t\tif ( ( elemLang = documentIsHTML ?\n-\t\t\t\t\t\telem.lang :\n-\t\t\t\t\t\telem.getAttribute( \"xml:lang\" ) || elem.getAttribute( \"lang\" ) ) ) {\n-\n-\t\t\t\t\t\telemLang = elemLang.toLowerCase();\n-\t\t\t\t\t\treturn elemLang === lang || elemLang.indexOf( lang + \"-\" ) === 0;\n-\t\t\t\t\t}\n-\t\t\t\t} while ( ( elem = elem.parentNode ) && elem.nodeType === 1 );\n-\t\t\t\treturn false;\n-\t\t\t};\n-\t\t} ),\n-\n-\t\t\/\/ Miscellaneous\n-\t\t\"target\": function( elem ) {\n-\t\t\tvar hash = window.location && window.location.hash;\n-\t\t\treturn hash && hash.slice( 1 ) === elem.id;\n-\t\t},\n-\n-\t\t\"root\": function( elem ) {\n-\t\t\treturn elem === docElem;\n-\t\t},\n-\n-\t\t\"focus\": function( elem ) {\n-\t\t\treturn elem === document.activeElement &&\n-\t\t\t\t( !document.hasFocus || document.hasFocus() ) &&\n-\t\t\t\t!!( elem.type || elem.href || ~elem.tabIndex );\n-\t\t},\n-\n-\t\t\/\/ Boolean properties\n-\t\t\"enabled\": createDisabledPseudo( false ),\n-\t\t\"disabled\": createDisabledPseudo( true ),\n-\n-\t\t\"checked\": function( elem ) {\n-\n-\t\t\t\/\/ In CSS3, :checked should return both checked and selected elements\n-\t\t\t\/\/ http:\/\/www.w3.org\/TR\/2011\/REC-css3-selectors-20110929\/#checked\n-\t\t\tvar nodeName = elem.nodeName.toLowerCase();\n-\t\t\treturn ( nodeName === \"input\" && !!elem.checked ) ||\n-\t\t\t\t( nodeName === \"option\" && !!elem.selected );\n-\t\t},\n-\n-\t\t\"selected\": function( elem ) {\n-\n-\t\t\t\/\/ Accessing this property makes selected-by-default\n-\t\t\t\/\/ options in Safari work properly\n-\t\t\tif ( elem.parentNode ) {\n-\t\t\t\t\/\/ eslint-disable-next-line no-unused-expressions\n-\t\t\t\telem.parentNode.selectedIndex;\n-\t\t\t}\n-\n-\t\t\treturn elem.selected === true;\n-\t\t},\n-\n-\t\t\/\/ Contents\n-\t\t\"empty\": function( elem ) {\n-\n-\t\t\t\/\/ http:\/\/www.w3.org\/TR\/selectors\/#empty-pseudo\n-\t\t\t\/\/ :empty is negated by element (1) or content nodes (text: 3; cdata: 4; entity ref: 5),\n-\t\t\t\/\/   but not by others (comment: 8; processing instruction: 7; etc.)\n-\t\t\t\/\/ nodeType < 6 works because attributes (2) do not appear as children\n-\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {\n-\t\t\t\tif ( elem.nodeType < 6 ) {\n-\t\t\t\t\treturn false;\n-\t\t\t\t}\n-\t\t\t}\n-\t\t\treturn true;\n-\t\t},\n-\n-\t\t\"parent\": function( elem ) {\n-\t\t\treturn !Expr.pseudos[ \"empty\" ]( elem );\n-\t\t},\n-\n-\t\t\/\/ Element\/input types\n-\t\t\"header\": function( elem ) {\n-\t\t\treturn rheader.test( elem.nodeName );\n-\t\t},\n-\n-\t\t\"input\": function( elem ) {\n-\t\t\treturn rinputs.test( elem.nodeName );\n-\t\t},\n-\n-\t\t\"button\": function( elem ) {\n-\t\t\tvar name = elem.nodeName.toLowerCase();\n-\t\t\treturn name === \"input\" && elem.type === \"button\" || name === \"button\";\n-\t\t},\n-\n-\t\t\"text\": function( elem ) {\n-\t\t\tvar attr;\n-\t\t\treturn elem.nodeName.toLowerCase() === \"input\" &&\n-\t\t\t\telem.type === \"text\" &&\n-\n-\t\t\t\t\/\/ Support: IE<8\n-\t\t\t\t\/\/ New HTML5 attribute values (e.g., \"search\") appear with elem.type === \"text\"\n-\t\t\t\t( ( attr = elem.getAttribute( \"type\" ) ) == null ||\n-\t\t\t\t\tattr.toLowerCase() === \"text\" );\n-\t\t},\n-\n-\t\t\/\/ Position-in-collection\n-\t\t\"first\": createPositionalPseudo( function() {\n-\t\t\treturn [ 0 ];\n-\t\t} ),\n-\n-\t\t\"last\": createPositionalPseudo( function( _matchIndexes, length ) {\n-\t\t\treturn [ length - 1 ];\n-\t\t} ),\n-\n-\t\t\"eq\": createPositionalPseudo( function( _matchIndexes, length, argument ) {\n-\t\t\treturn [ argument < 0 ? argument + length : argument ];\n-\t\t} ),\n-\n-\t\t\"even\": createPositionalPseudo( function( matchIndexes, length ) {\n-\t\t\tvar i = 0;\n-\t\t\tfor ( ; i < length; i += 2 ) {\n-\t\t\t\tmatchIndexes.push( i );\n-\t\t\t}\n-\t\t\treturn matchIndexes;\n-\t\t} ),\n-\n-\t\t\"odd\": createPositionalPseudo( function( matchIndexes, length ) {\n-\t\t\tvar i = 1;\n-\t\t\tfor ( ; i < length; i += 2 ) {\n-\t\t\t\tmatchIndexes.push( i );\n-\t\t\t}\n-\t\t\treturn matchIndexes;\n-\t\t} ),\n-\n-\t\t\"lt\": createPositionalPseudo( function( matchIndexes, length, argument ) {\n-\t\t\tvar i = argument < 0 ?\n-\t\t\t\targument + length :\n-\t\t\t\targument > length ?\n-\t\t\t\t\tlength :\n-\t\t\t\t\targument;\n-\t\t\tfor ( ; --i >= 0; ) {\n-\t\t\t\tmatchIndexes.push( i );\n-\t\t\t}\n-\t\t\treturn matchIndexes;\n-\t\t} ),\n-\n-\t\t\"gt\": createPositionalPseudo( function( matchIndexes, length, argument ) {\n-\t\t\tvar i = argument < 0 ? argument + length : argument;\n-\t\t\tfor ( ; ++i < length; ) {\n-\t\t\t\tmatchIndexes.push( i );\n-\t\t\t}\n-\t\t\treturn matchIndexes;\n-\t\t} )\n-\t}\n-};\n-\n-Expr.pseudos[ \"nth\" ] = Expr.pseudos[ \"eq\" ];\n-\n-\/\/ Add button\/input type pseudos\n-for ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {\n-\tExpr.pseudos[ i ] = createInputPseudo( i );\n-}\n-for ( i in { submit: true, reset: true } ) {\n-\tExpr.pseudos[ i ] = createButtonPseudo( i );\n-}\n-\n-\/\/ Easy API for creating new setFilters\n-function setFilters() {}\n-setFilters.prototype = Expr.filters = Expr.pseudos;\n-Expr.setFilters = new setFilters();\n-\n-tokenize = Sizzle.tokenize = function( selector, parseOnly ) {\n-\tvar matched, match, tokens, type,\n-\t\tsoFar, groups, preFilters,\n-\t\tcached = tokenCache[ selector + \" \" ];\n-\n-\tif ( cached ) {\n-\t\treturn parseOnly ? 0 : cached.slice( 0 );\n-\t}\n-\n-\tsoFar = selector;\n-\tgroups = [];\n-\tpreFilters = Expr.preFilter;\n-\n-\twhile ( soFar ) {\n-\n-\t\t\/\/ Comma and first run\n-\t\tif ( !matched || ( match = rcomma.exec( soFar ) ) ) {\n-\t\t\tif ( match ) {\n-\n-\t\t\t\t\/\/ Don't consume trailing commas as valid\n-\t\t\t\tsoFar = soFar.slice( match[ 0 ].length ) || soFar;\n-\t\t\t}\n-\t\t\tgroups.push( ( tokens = [] ) );\n-\t\t}\n-\n-\t\tmatched = false;\n-\n-\t\t\/\/ Combinators\n-\t\tif ( ( match = rcombinators.exec( soFar ) ) ) {\n-\t\t\tmatched = match.shift();\n-\t\t\ttokens.push( {\n-\t\t\t\tvalue: matched,\n-\n-\t\t\t\t\/\/ Cast descendant combinators to space\n-\t\t\t\ttype: match[ 0 ].replace( rtrim, \" \" )\n-\t\t\t} );\n-\t\t\tsoFar = soFar.slice( matched.length );\n-\t\t}\n-\n-\t\t\/\/ Filters\n-\t\tfor ( type in Expr.filter ) {\n-\t\t\tif ( ( match = matchExpr[ type ].exec( soFar ) ) && ( !preFilters[ type ] ||\n-\t\t\t\t( match = preFilters[ type ]( match ) ) ) ) {\n-\t\t\t\tmatched = match.shift();\n-\t\t\t\ttokens.push( {\n-\t\t\t\t\tvalue: matched,\n-\t\t\t\t\ttype: type,\n-\t\t\t\t\tmatches: match\n-\t\t\t\t} );\n-\t\t\t\tsoFar = soFar.slice( matched.length );\n-\t\t\t}\n-\t\t}\n-\n-\t\tif ( !matched ) {\n-\t\t\tbreak;\n-\t\t}\n-\t}\n-\n-\t\/\/ Return the length of the invalid excess\n-\t\/\/ if we're just parsing\n-\t\/\/ Otherwise, throw an error or return tokens\n-\treturn parseOnly ?\n-\t\tsoFar.length :\n-\t\tsoFar ?\n-\t\t\tSizzle.error( selector ) :\n-\n-\t\t\t\/\/ Cache the tokens\n-\t\t\ttokenCache( selector, groups ).slice( 0 );\n-};\n-\n-function toSelector( tokens ) {\n-\tvar i = 0,\n-\t\tlen = tokens.length,\n-\t\tselector = \"\";\n-\tfor ( ; i < len; i++ ) {\n-\t\tselector += tokens[ i ].value;\n-\t}\n-\treturn selector;\n-}\n-\n-function addCombinator( matcher, combinator, base ) {\n-\tvar dir = combinator.dir,\n-\t\tskip = combinator.next,\n-\t\tkey = skip || dir,\n-\t\tcheckNonElements = base && key === \"parentNode\",\n-\t\tdoneName = done++;\n-\n-\treturn combinator.first ?\n-\n-\t\t\/\/ Check against closest ancestor\/preceding element\n-\t\tfunction( elem, context, xml ) {\n-\t\t\twhile ( ( elem = elem[ dir ] ) ) {\n-\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n-\t\t\t\t\treturn matcher( elem, context, xml );\n-\t\t\t\t}\n-\t\t\t}\n-\t\t\treturn false;\n-\t\t} :\n-\n-\t\t\/\/ Check against all ancestor\/preceding elements\n-\t\tfunction( elem, context, xml ) {\n-\t\t\tvar oldCache, uniqueCache, outerCache,\n-\t\t\t\tnewCache = [ dirruns, doneName ];\n-\n-\t\t\t\/\/ We can't set arbitrary data on XML nodes, so they don't benefit from combinator caching\n-\t\t\tif ( xml ) {\n-\t\t\t\twhile ( ( elem = elem[ dir ] ) ) {\n-\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n-\t\t\t\t\t\tif ( matcher( elem, context, xml ) ) {\n-\t\t\t\t\t\t\treturn true;\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t} else {\n-\t\t\t\twhile ( ( elem = elem[ dir ] ) ) {\n-\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n-\t\t\t\t\t\touterCache = elem[ expando ] || ( elem[ expando ] = {} );\n-\n-\t\t\t\t\t\t\/\/ Support: IE <9 only\n-\t\t\t\t\t\t\/\/ Defend against cloned attroperties (jQuery gh-1709)\n-\t\t\t\t\t\tuniqueCache = outerCache[ elem.uniqueID ] ||\n-\t\t\t\t\t\t\t( outerCache[ elem.uniqueID ] = {} );\n-\n-\t\t\t\t\t\tif ( skip && skip === elem.nodeName.toLowerCase() ) {\n-\t\t\t\t\t\t\telem = elem[ dir ] || elem;\n-\t\t\t\t\t\t} else if ( ( oldCache = uniqueCache[ key ] ) &&\n-\t\t\t\t\t\t\toldCache[ 0 ] === dirruns && oldCache[ 1 ] === doneName ) {\n-\n-\t\t\t\t\t\t\t\/\/ Assign to newCache so results back-propagate to previous elements\n-\t\t\t\t\t\t\treturn ( newCache[ 2 ] = oldCache[ 2 ] );\n-\t\t\t\t\t\t} else {\n-\n-\t\t\t\t\t\t\t\/\/ Reuse newcache so results back-propagate to previous elements\n-\t\t\t\t\t\t\tuniqueCache[ key ] = newCache;\n-\n-\t\t\t\t\t\t\t\/\/ A match means we're done; a fail means we have to keep checking\n-\t\t\t\t\t\t\tif ( ( newCache[ 2 ] = matcher( elem, context, xml ) ) ) {\n-\t\t\t\t\t\t\t\treturn true;\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t}\n-\t\t\treturn false;\n-\t\t};\n-}\n-\n-function elementMatcher( matchers ) {\n-\treturn matchers.length > 1 ?\n-\t\tfunction( elem, context, xml ) {\n-\t\t\tvar i = matchers.length;\n-\t\t\twhile ( i-- ) {\n-\t\t\t\tif ( !matchers[ i ]( elem, context, xml ) ) {\n-\t\t\t\t\treturn false;\n-\t\t\t\t}\n-\t\t\t}\n-\t\t\treturn true;\n-\t\t} :\n-\t\tmatchers[ 0 ];\n-}\n-\n-function multipleContexts( selector, contexts, results ) {\n-\tvar i = 0,\n-\t\tlen = contexts.length;\n-\tfor ( ; i < len; i++ ) {\n-\t\tSizzle( selector, contexts[ i ], results );\n-\t}\n-\treturn results;\n-}\n-\n-function condense( unmatched, map, filter, context, xml ) {\n-\tvar elem,\n-\t\tnewUnmatched = [],\n-\t\ti = 0,\n-\t\tlen = unmatched.length,\n-\t\tmapped = map != null;\n-\n-\tfor ( ; i < len; i++ ) {\n-\t\tif ( ( elem = unmatched[ i ] ) ) {\n-\t\t\tif ( !filter || filter( elem, context, xml ) ) {\n-\t\t\t\tnewUnmatched.push( elem );\n-\t\t\t\tif ( mapped ) {\n-\t\t\t\t\tmap.push( i );\n-\t\t\t\t}\n-\t\t\t}\n-\t\t}\n-\t}\n-\n-\treturn newUnmatched;\n-}\n-\n-function setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {\n-\tif ( postFilter && !postFilter[ expando ] ) {\n-\t\tpostFilter = setMatcher( postFilter );\n-\t}\n-\tif ( postFinder && !postFinder[ expando ] ) {\n-\t\tpostFinder = setMatcher( postFinder, postSelector );\n-\t}\n-\treturn markFunction( function( seed, results, context, xml ) {\n-\t\tvar temp, i, elem,\n-\t\t\tpreMap = [],\n-\t\t\tpostMap = [],\n-\t\t\tpreexisting = results.length,\n-\n-\t\t\t\/\/ Get initial elements from seed or context\n-\t\t\telems = seed || multipleContexts(\n-\t\t\t\tselector || \"*\",\n-\t\t\t\tcontext.nodeType ? [ context ] : context,\n-\t\t\t\t[]\n-\t\t\t),\n-\n-\t\t\t\/\/ Prefilter to get matcher input, preserving a map for seed-results synchronization\n-\t\t\tmatcherIn = preFilter && ( seed || !selector ) ?\n-\t\t\t\tcondense( elems, preMap, preFilter, context, xml ) :\n-\t\t\t\telems,\n-\n-\t\t\tmatcherOut = matcher ?\n-\n-\t\t\t\t\/\/ If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,\n-\t\t\t\tpostFinder || ( seed ? preFilter : preexisting || postFilter ) ?\n-\n-\t\t\t\t\t\/\/ ...intermediate processing is necessary\n-\t\t\t\t\t[] :\n-\n-\t\t\t\t\t\/\/ ...otherwise use results directly\n-\t\t\t\t\tresults :\n-\t\t\t\tmatcherIn;\n-\n-\t\t\/\/ Find primary matches\n-\t\tif ( matcher ) {\n-\t\t\tmatcher( matcherIn, matcherOut, context, xml );\n-\t\t}\n-\n-\t\t\/\/ Apply postFilter\n-\t\tif ( postFilter ) {\n-\t\t\ttemp = condense( matcherOut, postMap );\n-\t\t\tpostFilter( temp, [], context, xml );\n-\n-\t\t\t\/\/ Un-match failing elements by moving them back to matcherIn\n-\t\t\ti = temp.length;\n-\t\t\twhile ( i-- ) {\n-\t\t\t\tif ( ( elem = temp[ i ] ) ) {\n-\t\t\t\t\tmatcherOut[ postMap[ i ] ] = !( matcherIn[ postMap[ i ] ] = elem );\n-\t\t\t\t}\n-\t\t\t}\n-\t\t}\n-\n-\t\tif ( seed ) {\n-\t\t\tif ( postFinder || preFilter ) {\n-\t\t\t\tif ( postFinder ) {\n-\n-\t\t\t\t\t\/\/ Get the final matcherOut by condensing this intermediate into postFinder contexts\n-\t\t\t\t\ttemp = [];\n-\t\t\t\t\ti = matcherOut.length;\n-\t\t\t\t\twhile ( i-- ) {\n-\t\t\t\t\t\tif ( ( elem = matcherOut[ i ] ) ) {\n-\n-\t\t\t\t\t\t\t\/\/ Restore matcherIn since elem is not yet a final match\n-\t\t\t\t\t\t\ttemp.push( ( matcherIn[ i ] = elem ) );\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\t\t\t\t\tpostFinder( null, ( matcherOut = [] ), temp, xml );\n-\t\t\t\t}\n-\n-\t\t\t\t\/\/ Move matched elements from seed to results to keep them synchronized\n-\t\t\t\ti = matcherOut.length;\n-\t\t\t\twhile ( i-- ) {\n-\t\t\t\t\tif ( ( elem = matcherOut[ i ] ) &&\n-\t\t\t\t\t\t( temp = postFinder ? indexOf( seed, elem ) : preMap[ i ] ) > -1 ) {\n-\n-\t\t\t\t\t\tseed[ temp ] = !( results[ temp ] = elem );\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t}\n-\n-\t\t\/\/ Add elements to results, through postFinder if defined\n-\t\t} else {\n-\t\t\tmatcherOut = condense(\n-\t\t\t\tmatcherOut === results ?\n-\t\t\t\t\tmatcherOut.splice( preexisting, matcherOut.length ) :\n-\t\t\t\t\tmatcherOut\n-\t\t\t);\n-\t\t\tif ( postFinder ) {\n-\t\t\t\tpostFinder( null, results, matcherOut, xml );\n-\t\t\t} else {\n-\t\t\t\tpush.apply( results, matcherOut );\n-\t\t\t}\n-\t\t}\n-\t} );\n-}\n-\n-function matcherFromTokens( tokens ) {\n-\tvar checkContext, matcher, j,\n-\t\tlen = tokens.length,\n-\t\tleadingRelative = Expr.relative[ tokens[ 0 ].type ],\n-\t\timplicitRelative = leadingRelative || Expr.relative[ \" \" ],\n-\t\ti = leadingRelative ? 1 : 0,\n-\n-\t\t\/\/ The foundational matcher ensures that elements are reachable from top-level context(s)\n-\t\tmatchContext = addCombinator( function( elem ) {\n-\t\t\treturn elem === checkContext;\n-\t\t}, implicitRelative, true ),\n-\t\tmatchAnyContext = addCombinator( function( elem ) {\n-\t\t\treturn indexOf( checkContext, elem ) > -1;\n-\t\t}, implicitRelative, true ),\n-\t\tmatchers = [ function( elem, context, xml ) {\n-\t\t\tvar ret = ( !leadingRelative && ( xml || context !== outermostContext ) ) || (\n-\t\t\t\t( checkContext = context ).nodeType ?\n-\t\t\t\t\tmatchContext( elem, context, xml ) :\n-\t\t\t\t\tmatchAnyContext( elem, context, xml ) );\n-\n-\t\t\t\/\/ Avoid hanging onto element (issue #299)\n-\t\t\tcheckContext = null;\n-\t\t\treturn ret;\n-\t\t} ];\n-\n-\tfor ( ; i < len; i++ ) {\n-\t\tif ( ( matcher = Expr.relative[ tokens[ i ].type ] ) ) {\n-\t\t\tmatchers = [ addCombinator( elementMatcher( matchers ), matcher ) ];\n-\t\t} else {\n-\t\t\tmatcher = Expr.filter[ tokens[ i ].type ].apply( null, tokens[ i ].matches );\n-\n-\t\t\t\/\/ Return special upon seeing a positional matcher\n-\t\t\tif ( matcher[ expando ] ) {\n-\n-\t\t\t\t\/\/ Find the next relative operator (if any) for proper handling\n-\t\t\t\tj = ++i;\n-\t\t\t\tfor ( ; j < len; j++ ) {\n-\t\t\t\t\tif ( Expr.relative[ tokens[ j ].type ] ) {\n-\t\t\t\t\t\tbreak;\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t\treturn setMatcher(\n-\t\t\t\t\ti > 1 && elementMatcher( matchers ),\n-\t\t\t\t\ti > 1 && toSelector(\n-\n-\t\t\t\t\t\/\/ If the preceding token was a descendant combinator, insert an implicit any-element `*`\n-\t\t\t\t\ttokens\n-\t\t\t\t\t\t.slice( 0, i - 1 )\n-\t\t\t\t\t\t.concat( { value: tokens[ i - 2 ].type === \" \" ? \"*\" : \"\" } )\n-\t\t\t\t\t).replace( rtrim, \"$1\" ),\n-\t\t\t\t\tmatcher,\n-\t\t\t\t\ti < j && matcherFromTokens( tokens.slice( i, j ) ),\n-\t\t\t\t\tj < len && matcherFromTokens( ( tokens = tokens.slice( j ) ) ),\n-\t\t\t\t\tj < len && toSelector( tokens )\n-\t\t\t\t);\n-\t\t\t}\n-\t\t\tmatchers.push( matcher );\n-\t\t}\n-\t}\n-\n-\treturn elementMatcher( matchers );\n-}\n-\n-function matcherFromGroupMatchers( elementMatchers, setMatchers ) {\n-\tvar bySet = setMatchers.length > 0,\n-\t\tbyElement = elementMatchers.length > 0,\n-\t\tsuperMatcher = function( seed, context, xml, results, outermost ) {\n-\t\t\tvar elem, j, matcher,\n-\t\t\t\tmatchedCount = 0,\n-\t\t\t\ti = \"0\",\n-\t\t\t\tunmatched = seed && [],\n-\t\t\t\tsetMatched = [],\n-\t\t\t\tcontextBackup = outermostContext,\n-\n-\t\t\t\t\/\/ We must always have either seed elements or outermost context\n-\t\t\t\telems = seed || byElement && Expr.find[ \"TAG\" ]( \"*\", outermost ),\n-\n-\t\t\t\t\/\/ Use integer dirruns iff this is the outermost matcher\n-\t\t\t\tdirrunsUnique = ( dirruns += contextBackup == null ? 1 : Math.random() || 0.1 ),\n-\t\t\t\tlen = elems.length;\n-\n-\t\t\tif ( outermost ) {\n-\n-\t\t\t\t\/\/ Support: IE 11+, Edge 17 - 18+\n-\t\t\t\t\/\/ IE\/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n-\t\t\t\t\/\/ two documents; shallow comparisons work.\n-\t\t\t\t\/\/ eslint-disable-next-line eqeqeq\n-\t\t\t\toutermostContext = context == document || context || outermost;\n-\t\t\t}\n-\n-\t\t\t\/\/ Add elements passing elementMatchers directly to results\n-\t\t\t\/\/ Support: IE<9, Safari\n-\t\t\t\/\/ Tolerate NodeList properties (IE: \"length\"; Safari: <number>) matching elements by id\n-\t\t\tfor ( ; i !== len && ( elem = elems[ i ] ) != null; i++ ) {\n-\t\t\t\tif ( byElement && elem ) {\n-\t\t\t\t\tj = 0;\n-\n-\t\t\t\t\t\/\/ Support: IE 11+, Edge 17 - 18+\n-\t\t\t\t\t\/\/ IE\/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n-\t\t\t\t\t\/\/ two documents; shallow comparisons work.\n-\t\t\t\t\t\/\/ eslint-disable-next-line eqeqeq\n-\t\t\t\t\tif ( !context && elem.ownerDocument != document ) {\n-\t\t\t\t\t\tsetDocument( elem );\n-\t\t\t\t\t\txml = !documentIsHTML;\n-\t\t\t\t\t}\n-\t\t\t\t\twhile ( ( matcher = elementMatchers[ j++ ] ) ) {\n-\t\t\t\t\t\tif ( matcher( elem, context || document, xml ) ) {\n-\t\t\t\t\t\t\tresults.push( elem );\n-\t\t\t\t\t\t\tbreak;\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\t\t\t\t\tif ( outermost ) {\n-\t\t\t\t\t\tdirruns = dirrunsUnique;\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\n-\t\t\t\t\/\/ Track unmatched elements for set filters\n-\t\t\t\tif ( bySet ) {\n-\n-\t\t\t\t\t\/\/ They will have gone through all possible matchers\n-\t\t\t\t\tif ( ( elem = !matcher && elem ) ) {\n-\t\t\t\t\t\tmatchedCount--;\n-\t\t\t\t\t}\n-\n-\t\t\t\t\t\/\/ Lengthen the array for every element, matched or not\n-\t\t\t\t\tif ( seed ) {\n-\t\t\t\t\t\tunmatched.push( elem );\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t}\n-\n-\t\t\t\/\/ `i` is now the count of elements visited above, and adding it to `matchedCount`\n-\t\t\t\/\/ makes the latter nonnegative.\n-\t\t\tmatchedCount += i;\n-\n-\t\t\t\/\/ Apply set filters to unmatched elements\n-\t\t\t\/\/ NOTE: This can be skipped if there are no unmatched elements (i.e., `matchedCount`\n-\t\t\t\/\/ equals `i`), unless we didn't visit _any_ elements in the above loop because we have\n-\t\t\t\/\/ no element matchers and no seed.\n-\t\t\t\/\/ Incrementing an initially-string \"0\" `i` allows `i` to remain a string only in that\n-\t\t\t\/\/ case, which will result in a \"00\" `matchedCount` that differs from `i` but is also\n-\t\t\t\/\/ numerically zero.\n-\t\t\tif ( bySet && i !== matchedCount ) {\n-\t\t\t\tj = 0;\n-\t\t\t\twhile ( ( matcher = setMatchers[ j++ ] ) ) {\n-\t\t\t\t\tmatcher( unmatched, setMatched, context, xml );\n-\t\t\t\t}\n-\n-\t\t\t\tif ( seed ) {\n-\n-\t\t\t\t\t\/\/ Reintegrate element matches to eliminate the need for sorting\n-\t\t\t\t\tif ( matchedCount > 0 ) {\n-\t\t\t\t\t\twhile ( i-- ) {\n-\t\t\t\t\t\t\tif ( !( unmatched[ i ] || setMatched[ i ] ) ) {\n-\t\t\t\t\t\t\t\tsetMatched[ i ] = pop.call( results );\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\n-\t\t\t\t\t\/\/ Discard index placeholder values to get only actual matches\n-\t\t\t\t\tsetMatched = condense( setMatched );\n-\t\t\t\t}\n-\n-\t\t\t\t\/\/ Add matches to results\n-\t\t\t\tpush.apply( results, setMatched );\n-\n-\t\t\t\t\/\/ Seedless set matches succeeding multiple successful matchers stipulate sorting\n-\t\t\t\tif ( outermost && !seed && setMatched.length > 0 &&\n-\t\t\t\t\t( matchedCount + setMatchers.length ) > 1 ) {\n-\n-\t\t\t\t\tSizzle.uniqueSort( results );\n-\t\t\t\t}\n-\t\t\t}\n-\n-\t\t\t\/\/ Override manipulation of globals by nested matchers\n-\t\t\tif ( outermost ) {\n-\t\t\t\tdirruns = dirrunsUnique;\n-\t\t\t\toutermostContext = contextBackup;\n-\t\t\t}\n-\n-\t\t\treturn unmatched;\n-\t\t};\n-\n-\treturn bySet ?\n-\t\tmarkFunction( superMatcher ) :\n-\t\tsuperMatcher;\n-}\n-\n-compile = Sizzle.compile = function( selector, match \/* Internal Use Only *\/ ) {\n-\tvar i,\n-\t\tsetMatchers = [],\n-\t\telementMatchers = [],\n-\t\tcached = compilerCache[ selector + \" \" ];\n-\n-\tif ( !cached ) {\n-\n-\t\t\/\/ Generate a function of recursive functions that can be used to check each element\n-\t\tif ( !match ) {\n-\t\t\tmatch = tokenize( selector );\n-\t\t}\n-\t\ti = match.length;\n-\t\twhile ( i-- ) {\n-\t\t\tcached = matcherFromTokens( match[ i ] );\n-\t\t\tif ( cached[ expando ] ) {\n-\t\t\t\tsetMatchers.push( cached );\n-\t\t\t} else {\n-\t\t\t\telementMatchers.push( cached );\n-\t\t\t}\n-\t\t}\n-\n-\t\t\/\/ Cache the compiled function\n-\t\tcached = compilerCache(\n-\t\t\tselector,\n-\t\t\tmatcherFromGroupMatchers( elementMatchers, setMatchers )\n-\t\t);\n-\n-\t\t\/\/ Save selector and tokenization\n-\t\tcached.selector = selector;\n-\t}\n-\treturn cached;\n-};\n-\n-\/**\n- * A low-level selection function that works with Sizzle's compiled\n- *  selector functions\n- * @param {String|Function} selector A selector or a pre-compiled\n- *  selector function built with Sizzle.compile\n- * @param {Element} context\n- * @param {Array} [results]\n- * @param {Array} [seed] A set of elements to match against\n- *\/\n-select = Sizzle.select = function( selector, context, results, seed ) {\n-\tvar i, tokens, token, type, find,\n-\t\tcompiled = typeof selector === \"function\" && selector,\n-\t\tmatch = !seed && tokenize( ( selector = compiled.selector || selector ) );\n-\n-\tresults = results || [];\n-\n-\t\/\/ Try to minimize operations if there is only one selector in the list and no seed\n-\t\/\/ (the latter of which guarantees us context)\n-\tif ( match.length === 1 ) {\n-\n-\t\t\/\/ Reduce context if the leading compound selector is an ID\n-\t\ttokens = match[ 0 ] = match[ 0 ].slice( 0 );\n-\t\tif ( tokens.length > 2 && ( token = tokens[ 0 ] ).type === \"ID\" &&\n-\t\t\tcontext.nodeType === 9 && documentIsHTML && Expr.relative[ tokens[ 1 ].type ] ) {\n-\n-\t\t\tcontext = ( Expr.find[ \"ID\" ]( token.matches[ 0 ]\n-\t\t\t\t.replace( runescape, funescape ), context ) || [] )[ 0 ];\n-\t\t\tif ( !context ) {\n-\t\t\t\treturn results;\n-\n-\t\t\t\/\/ Precompiled matchers will still verify ancestry, so step up a level\n-\t\t\t} else if ( compiled ) {\n-\t\t\t\tcontext = context.parentNode;\n-\t\t\t}\n-\n-\t\t\tselector = selector.slice( tokens.shift().value.length );\n-\t\t}\n-\n-\t\t\/\/ Fetch a seed set for right-to-left matching\n-\t\ti = matchExpr[ \"needsContext\" ].test( selector ) ? 0 : tokens.length;\n-\t\twhile ( i-- ) {\n-\t\t\ttoken = tokens[ i ];\n-\n-\t\t\t\/\/ Abort if we hit a combinator\n-\t\t\tif ( Expr.relative[ ( type = token.type ) ] ) {\n-\t\t\t\tbreak;\n-\t\t\t}\n-\t\t\tif ( ( find = Expr.find[ type ] ) ) {\n-\n-\t\t\t\t\/\/ Search, expanding context for leading sibling combinators\n-\t\t\t\tif ( ( seed = find(\n-\t\t\t\t\ttoken.matches[ 0 ].replace( runescape, funescape ),\n-\t\t\t\t\trsibling.test( tokens[ 0 ].type ) && testContext( context.parentNode ) ||\n-\t\t\t\t\t\tcontext\n-\t\t\t\t) ) ) {\n-\n-\t\t\t\t\t\/\/ If seed is empty or no tokens remain, we can return early\n-\t\t\t\t\ttokens.splice( i, 1 );\n-\t\t\t\t\tselector = seed.length && toSelector( tokens );\n-\t\t\t\t\tif ( !selector ) {\n-\t\t\t\t\t\tpush.apply( results, seed );\n-\t\t\t\t\t\treturn results;\n-\t\t\t\t\t}\n-\n-\t\t\t\t\tbreak;\n-\t\t\t\t}\n-\t\t\t}\n-\t\t}\n-\t}\n-\n-\t\/\/ Compile and execute a filtering function if one is not provided\n-\t\/\/ Provide `match` to avoid retokenization if we modified the selector above\n-\t( compiled || compile( selector, match ) )(\n-\t\tseed,\n-\t\tcontext,\n-\t\t!documentIsHTML,\n-\t\tresults,\n-\t\t!context || rsibling.test( selector ) && testContext( context.parentNode ) || context\n-\t);\n-\treturn results;\n-};\n-\n-\/\/ One-time assignments\n-\n-\/\/ Sort stability\n-support.sortStable = expando.split( \"\" ).sort( sortOrder ).join( \"\" ) === expando;\n-\n-\/\/ Support: Chrome 14-35+\n-\/\/ Always assume duplicates if they aren't passed to the comparison function\n-support.detectDuplicates = !!hasDuplicate;\n-\n-\/\/ Initialize against the default document\n-setDocument();\n-\n-\/\/ Support: Webkit<537.32 - Safari 6.0.3\/Chrome 25 (fixed in Chrome 27)\n-\/\/ Detached nodes confoundingly follow *each other*\n-support.sortDetached = assert( function( el ) {\n-\n-\t\/\/ Should return 1, but returns 4 (following)\n-\treturn el.compareDocumentPosition( document.createElement( \"fieldset\" ) ) & 1;\n-} );\n-\n-\/\/ Support: IE<8\n-\/\/ Prevent attribute\/property \"interpolation\"\n-\/\/ https:\/\/msdn.microsoft.com\/en-us\/library\/ms536429%28VS.85%29.aspx\n-if ( !assert( function( el ) {\n-\tel.innerHTML = \"<a href='#'><\/a>\";\n-\treturn el.firstChild.getAttribute( \"href\" ) === \"#\";\n-} ) ) {\n-\taddHandle( \"type|href|height|width\", function( elem, name, isXML ) {\n-\t\tif ( !isXML ) {\n-\t\t\treturn elem.getAttribute( name, name.toLowerCase() === \"type\" ? 1 : 2 );\n-\t\t}\n-\t} );\n-}\n-\n-\/\/ Support: IE<9\n-\/\/ Use defaultValue in place of getAttribute(\"value\")\n-if ( !support.attributes || !assert( function( el ) {\n-\tel.innerHTML = \"<input\/>\";\n-\tel.firstChild.setAttribute( \"value\", \"\" );\n-\treturn el.firstChild.getAttribute( \"value\" ) === \"\";\n-} ) ) {\n-\taddHandle( \"value\", function( elem, _name, isXML ) {\n-\t\tif ( !isXML && elem.nodeName.toLowerCase() === \"input\" ) {\n-\t\t\treturn elem.defaultValue;\n-\t\t}\n-\t} );\n-}\n-\n-\/\/ Support: IE<9\n-\/\/ Use getAttributeNode to fetch booleans when getAttribute lies\n-if ( !assert( function( el ) {\n-\treturn el.getAttribute( \"disabled\" ) == null;\n-} ) ) {\n-\taddHandle( booleans, function( elem, name, isXML ) {\n-\t\tvar val;\n-\t\tif ( !isXML ) {\n-\t\t\treturn elem[ name ] === true ? name.toLowerCase() :\n-\t\t\t\t( val = elem.getAttributeNode( name ) ) && val.specified ?\n-\t\t\t\t\tval.value :\n-\t\t\t\t\tnull;\n-\t\t}\n-\t} );\n-}\n-\n-return Sizzle;\n-\n-} )( window );\n-\n-\n-\n-jQuery.find = Sizzle;\n-jQuery.expr = Sizzle.selectors;\n-\n-\/\/ Deprecated\n-jQuery.expr[ \":\" ] = jQuery.expr.pseudos;\n-jQuery.uniqueSort = jQuery.unique = Sizzle.uniqueSort;\n-jQuery.text = Sizzle.getText;\n-jQuery.isXMLDoc = Sizzle.isXML;\n-jQuery.contains = Sizzle.contains;\n-jQuery.escapeSelector = Sizzle.escape;\n-\n-\n-\n-\n-var dir = function( elem, dir, until ) {\n-\tvar matched = [],\n-\t\ttruncate = until !== undefined;\n-\n-\twhile ( ( elem = elem[ dir ] ) && elem.nodeType !== 9 ) {\n-\t\tif ( elem.nodeType === 1 ) {\n-\t\t\tif ( truncate && jQuery( elem ).is( until ) ) {\n-\t\t\t\tbreak;\n-\t\t\t}\n-\t\t\tmatched.push( elem );\n-\t\t}\n-\t}\n-\treturn matched;\n-};\n-\n-\n-var siblings = function( n, elem ) {\n-\tvar matched = [];\n-\n-\tfor ( ; n; n = n.nextSibling ) {\n-\t\tif ( n.nodeType === 1 && n !== elem ) {\n-\t\t\tmatched.push( n );\n-\t\t}\n-\t}\n-\n-\treturn matched;\n-};\n-\n-\n-var rneedsContext = jQuery.expr.match.needsContext;\n-\n-\n-\n-function nodeName( elem, name ) {\n-\n-\treturn elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();\n-\n-}\n-var rsingleTag = ( \/^<([a-z][^\\\/\\0>:\\x20\\t\\r\\n\\f]*)[\\x20\\t\\r\\n\\f]*\\\/?>(?:<\\\/\\1>|)$\/i );\n-\n-\n-\n-\/\/ Implement the identical functionality for filter and not\n-function winnow( elements, qualifier, not ) {\n-\tif ( isFunction( qualifier ) ) {\n-\t\treturn jQuery.grep( elements, function( elem, i ) {\n-\t\t\treturn !!qualifier.call( elem, i, elem ) !== not;\n-\t\t} );\n-\t}\n-\n-\t\/\/ Single element\n-\tif ( qualifier.nodeType ) {\n-\t\treturn jQuery.grep( elements, function( elem ) {\n-\t\t\treturn ( elem === qualifier ) !== not;\n-\t\t} );\n-\t}\n-\n-\t\/\/ Arraylike of elements (jQuery, arguments, Array)\n-\tif ( typeof qualifier !== \"string\" ) {\n-\t\treturn jQuery.grep( elements, function( elem ) {\n-\t\t\treturn ( indexOf.call( qualifier, elem ) > -1 ) !== not;\n-\t\t} );\n-\t}\n-\n-\t\/\/ Filtered directly for both simple and complex selectors\n-\treturn jQuery.filter( qualifier, elements, not );\n-}\n-\n-jQuery.filter = function( expr, elems, not ) {\n-\tvar elem = elems[ 0 ];\n-\n-\tif ( not ) {\n-\t\texpr = \":not(\" + expr + \")\";\n-\t}\n-\n-\tif ( elems.length === 1 && elem.nodeType === 1 ) {\n-\t\treturn jQuery.find.matchesSelector( elem, expr ) ? [ elem ] : [];\n-\t}\n-\n-\treturn jQuery.find.matches( expr, jQuery.grep( elems, function( elem ) {\n-\t\treturn elem.nodeType === 1;\n-\t} ) );\n-};\n-\n-jQuery.fn.extend( {\n-\tfind: function( selector ) {\n-\t\tvar i, ret,\n-\t\t\tlen = this.length,\n-\t\t\tself = this;\n-\n-\t\tif ( typeof selector !== \"string\" ) {\n-\t\t\treturn this.pushStack( jQuery( selector ).filter( function() {\n-\t\t\t\tfor ( i = 0; i < len; i++ ) {\n-\t\t\t\t\tif ( jQuery.contains( self[ i ], this ) ) {\n-\t\t\t\t\t\treturn true;\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t} ) );\n-\t\t}\n-\n-\t\tret = this.pushStack( [] );\n-\n-\t\tfor ( i = 0; i < len; i++ ) {\n-\t\t\tjQuery.find( selector, self[ i ], ret );\n-\t\t}\n-\n-\t\treturn len > 1 ? jQuery.uniqueSort( ret ) : ret;\n-\t},\n-\tfilter: function( selector ) {\n-\t\treturn this.pushStack( winnow( this, selector || [], false ) );\n-\t},\n-\tnot: function( selector ) {\n-\t\treturn this.pushStack( winnow( this, selector || [], true ) );\n-\t},\n-\tis: function( selector ) {\n-\t\treturn !!winnow(\n-\t\t\tthis,\n-\n-\t\t\t\/\/ If this is a positional\/relative selector, check membership in the returned set\n-\t\t\t\/\/ so $(\"p:first\").is(\"p:last\") won't return true for a doc with two \"p\".\n-\t\t\ttypeof selector === \"string\" && rneedsContext.test( selector ) ?\n-\t\t\t\tjQuery( selector ) :\n-\t\t\t\tselector || [],\n-\t\t\tfalse\n-\t\t).length;\n-\t}\n-} );\n-\n-\n-\/\/ Initialize a jQuery object\n-\n-\n-\/\/ A central reference to the root jQuery(document)\n-var rootjQuery,\n-\n-\t\/\/ A simple way to check for HTML strings\n-\t\/\/ Prioritize #id over <tag> to avoid XSS via location.hash (trac-9521)\n-\t\/\/ Strict HTML recognition (trac-11290: must start with <)\n-\t\/\/ Shortcut simple #id case for speed\n-\trquickExpr = \/^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]+))$\/,\n-\n-\tinit = jQuery.fn.init = function( selector, context, root ) {\n-\t\tvar match, elem;\n-\n-\t\t\/\/ HANDLE: $(\"\"), $(null), $(undefined), $(false)\n-\t\tif ( !selector ) {\n-\t\t\treturn this;\n-\t\t}\n-\n-\t\t\/\/ Method init() accepts an alternate rootjQuery\n-\t\t\/\/ so migrate can support jQuery.sub (gh-2101)\n-\t\troot = root || rootjQuery;\n-\n-\t\t\/\/ Handle HTML strings\n-\t\tif ( typeof selector === \"string\" ) {\n-\t\t\tif ( selector[ 0 ] === \"<\" &&\n-\t\t\t\tselector[ selector.length - 1 ] === \">\" &&\n-\t\t\t\tselector.length >= 3 ) {\n-\n-\t\t\t\t\/\/ Assume that strings that start and end with <> are HTML and skip the regex check\n-\t\t\t\tmatch = [ null, selector, null ];\n-\n-\t\t\t} else {\n-\t\t\t\tmatch = rquickExpr.exec( selector );\n-\t\t\t}\n-\n-\t\t\t\/\/ Match html or make sure no context is specified for #id\n-\t\t\tif ( match && ( match[ 1 ] || !context ) ) {\n-\n-\t\t\t\t\/\/ HANDLE: $(html) -> $(array)\n-\t\t\t\tif ( match[ 1 ] ) {\n-\t\t\t\t\tcontext = context instanceof jQuery ? context[ 0 ] : context;\n-\n-\t\t\t\t\t\/\/ Option to run scripts is true for back-compat\n-\t\t\t\t\t\/\/ Intentionally let the error be thrown if parseHTML is not present\n-\t\t\t\t\tjQuery.merge( this, jQuery.parseHTML(\n-\t\t\t\t\t\tmatch[ 1 ],\n-\t\t\t\t\t\tcontext && context.nodeType ? context.ownerDocument || context : document,\n-\t\t\t\t\t\ttrue\n-\t\t\t\t\t) );\n-\n-\t\t\t\t\t\/\/ HANDLE: $(html, props)\n-\t\t\t\t\tif ( rsingleTag.test( match[ 1 ] ) && jQuery.isPlainObject( context ) ) {\n-\t\t\t\t\t\tfor ( match in context ) {\n-\n-\t\t\t\t\t\t\t\/\/ Properties of context are called as methods if possible\n-\t\t\t\t\t\t\tif ( isFunction( this[ match ] ) ) {\n-\t\t\t\t\t\t\t\tthis[ match ]( context[ match ] );\n-\n-\t\t\t\t\t\t\t\/\/ ...and otherwise set as attributes\n-\t\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\t\tthis.attr( match, context[ match ] );\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\n-\t\t\t\t\treturn this;\n-\n-\t\t\t\t\/\/ HANDLE: $(#id)\n-\t\t\t\t} else {\n-\t\t\t\t\telem = document.getElementById( match[ 2 ] );\n-\n-\t\t\t\t\tif ( elem ) {\n-\n-\t\t\t\t\t\t\/\/ Inject the element directly into the jQuery object\n-\t\t\t\t\t\tthis[ 0 ] = elem;\n-\t\t\t\t\t\tthis.length = 1;\n-\t\t\t\t\t}\n-\t\t\t\t\treturn this;\n-\t\t\t\t}\n-\n-\t\t\t\/\/ HANDLE: $(expr, $(...))\n-\t\t\t} else if ( !context || context.jquery ) {\n-\t\t\t\treturn ( context || root ).find( selector );\n-\n-\t\t\t\/\/ HANDLE: $(expr, context)\n-\t\t\t\/\/ (which is just equivalent to: $(context).find(expr)\n-\t\t\t} else {\n-\t\t\t\treturn this.constructor( context ).find( selector );\n-\t\t\t}\n-\n-\t\t\/\/ HANDLE: $(DOMElement)\n-\t\t} else if ( selector.nodeType ) {\n-\t\t\tthis[ 0 ] = selector;\n-\t\t\tthis.length = 1;\n-\t\t\treturn this;\n-\n-\t\t\/\/ HANDLE: $(function)\n-\t\t\/\/ Shortcut for document ready\n-\t\t} else if ( isFunction( selector ) ) {\n-\t\t\treturn root.ready !== undefined ?\n-\t\t\t\troot.ready( selector ) :\n-\n-\t\t\t\t\/\/ Execute immediately if ready is not present\n-\t\t\t\tselector( jQuery );\n-\t\t}\n-\n-\t\treturn jQuery.makeArray( selector, this );\n-\t};\n-\n-\/\/ Give the init function the jQuery prototype for later instantiation\n-init.prototype = jQuery.fn;\n-\n-\/\/ Initialize central reference\n-rootjQuery = jQuery( document );\n-\n-\n-var rparentsprev = \/^(?:parents|prev(?:Until|All))\/,\n-\n-\t\/\/ Methods guaranteed to produce a unique set when starting from a unique set\n-\tguaranteedUnique = {\n-\t\tchildren: true,\n-\t\tcontents: true,\n-\t\tnext: true,\n-\t\tprev: true\n-\t};\n-\n-jQuery.fn.extend( {\n-\thas: function( target ) {\n-\t\tvar targets = jQuery( target, this ),\n-\t\t\tl = targets.length;\n-\n-\t\treturn this.filter( function() {\n-\t\t\tvar i = 0;\n-\t\t\tfor ( ; i < l; i++ ) {\n-\t\t\t\tif ( jQuery.contains( this, targets[ i ] ) ) {\n-\t\t\t\t\treturn true;\n-\t\t\t\t}\n-\t\t\t}\n-\t\t} );\n-\t},\n-\n-\tclosest: function( selectors, context ) {\n-\t\tvar cur,\n-\t\t\ti = 0,\n-\t\t\tl = this.length,\n-\t\t\tmatched = [],\n-\t\t\ttargets = typeof selectors !== \"string\" && jQuery( selectors );\n-\n-\t\t\/\/ Positional selectors never match, since there's no _selection_ context\n-\t\tif ( !rneedsContext.test( selectors ) ) {\n-\t\t\tfor ( ; i < l; i++ ) {\n-\t\t\t\tfor ( cur = this[ i ]; cur && cur !== context; cur = cur.parentNode ) {\n-\n-\t\t\t\t\t\/\/ Always skip document fragments\n-\t\t\t\t\tif ( cur.nodeType < 11 && ( targets ?\n-\t\t\t\t\t\ttargets.index( cur ) > -1 :\n-\n-\t\t\t\t\t\t\/\/ Don't pass non-elements to Sizzle\n-\t\t\t\t\t\tcur.nodeType === 1 &&\n-\t\t\t\t\t\t\tjQuery.find.matchesSelector( cur, selectors ) ) ) {\n-\n-\t\t\t\t\t\tmatched.push( cur );\n-\t\t\t\t\t\tbreak;\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t}\n-\t\t}\n-\n-\t\treturn this.pushStack( matched.length > 1 ? jQuery.uniqueSort( matched ) : matched );\n-\t},\n-\n-\t\/\/ Determine the position of an element within the set\n-\tindex: function( elem ) {\n-\n-\t\t\/\/ No argument, return index in parent\n-\t\tif ( !elem ) {\n-\t\t\treturn ( this[ 0 ] && this[ 0 ].parentNode ) ? this.first().prevAll().length : -1;\n-\t\t}\n-\n-\t\t\/\/ Index in selector\n-\t\tif ( typeof elem === \"string\" ) {\n-\t\t\treturn indexOf.call( jQuery( elem ), this[ 0 ] );\n-\t\t}\n-\n-\t\t\/\/ Locate the position of the desired element\n-\t\treturn indexOf.call( this,\n-\n-\t\t\t\/\/ If it receives a jQuery object, the first element is used\n-\t\t\telem.jquery ? elem[ 0 ] : elem\n-\t\t);\n-\t},\n-\n-\tadd: function( selector, context ) {\n-\t\treturn this.pushStack(\n-\t\t\tjQuery.uniqueSort(\n-\t\t\t\tjQuery.merge( this.get(), jQuery( selector, context ) )\n-\t\t\t)\n-\t\t);\n-\t},\n-\n-\taddBack: function( selector ) {\n-\t\treturn this.add( selector == null ?\n-\t\t\tthis.prevObject : this.prevObject.filter( selector )\n-\t\t);\n-\t}\n-} );\n-\n-function sibling( cur, dir ) {\n-\twhile ( ( cur = cur[ dir ] ) && cur.nodeType !== 1 ) {}\n-\treturn cur;\n-}\n-\n-jQuery.each( {\n-\tparent: function( elem ) {\n-\t\tvar parent = elem.parentNode;\n-\t\treturn parent && parent.nodeType !== 11 ? parent : null;\n-\t},\n-\tparents: function( elem ) {\n-\t\treturn dir( elem, \"parentNode\" );\n-\t},\n-\tparentsUntil: function( elem, _i, until ) {\n-\t\treturn dir( elem, \"parentNode\", until );\n-\t},\n-\tnext: function( elem ) {\n-\t\treturn sibling( elem, \"nextSibling\" );\n-\t},\n-\tprev: function( elem ) {\n-\t\treturn sibling( elem, \"previousSibling\" );\n-\t},\n-\tnextAll: function( elem ) {\n-\t\treturn dir( elem, \"nextSibling\" );\n-\t},\n-\tprevAll: function( elem ) {\n-\t\treturn dir( elem, \"previousSibling\" );\n-\t},\n-\tnextUntil: function( elem, _i, until ) {\n-\t\treturn dir( elem, \"nextSibling\", until );\n-\t},\n-\tprevUntil: function( elem, _i, until ) {\n-\t\treturn dir( elem, \"previousSibling\", until );\n-\t},\n-\tsiblings: function( elem ) {\n-\t\treturn siblings( ( elem.parentNode || {} ).firstChild, elem );\n-\t},\n-\tchildren: function( elem ) {\n-\t\treturn siblings( elem.firstChild );\n-\t},\n-\tcontents: function( elem ) {\n-\t\tif ( elem.contentDocument != null &&\n-\n-\t\t\t\/\/ Support: IE 11+\n-\t\t\t\/\/ <object> elements with no `data` attribute has an object\n-\t\t\t\/\/ `contentDocument` with a `null` prototype.\n-\t\t\tgetProto( elem.contentDocument ) ) {\n-\n-\t\t\treturn elem.contentDocument;\n-\t\t}\n-\n-\t\t\/\/ Support: IE 9 - 11 only, iOS 7 only, Android Browser <=4.3 only\n-\t\t\/\/ Treat the template element as a regular one in browsers that\n-\t\t\/\/ don't support it.\n-\t\tif ( nodeName( elem, \"template\" ) ) {\n-\t\t\telem = elem.content || elem;\n-\t\t}\n-\n-\t\treturn jQuery.merge( [], elem.childNodes );\n-\t}\n-}, function( name, fn ) {\n-\tjQuery.fn[ name ] = function( until, selector ) {\n-\t\tvar matched = jQuery.map( this, fn, until );\n-\n-\t\tif ( name.slice( -5 ) !== \"Until\" ) {\n-\t\t\tselector = until;\n-\t\t}\n-\n-\t\tif ( selector && typeof selector === \"string\" ) {\n-\t\t\tmatched = jQuery.filter( selector, matched );\n-\t\t}\n-\n-\t\tif ( this.length > 1 ) {\n-\n-\t\t\t\/\/ Remove duplicates\n-\t\t\tif ( !guaranteedUnique[ name ] ) {\n-\t\t\t\tjQuery.uniqueSort( matched );\n-\t\t\t}\n-\n-\t\t\t\/\/ Reverse order for parents* and prev-derivatives\n-\t\t\tif ( rparentsprev.test( name ) ) {\n-\t\t\t\tmatched.reverse();\n-\t\t\t}\n-\t\t}\n-\n-\t\treturn this.pushStack( matched );\n-\t};\n-} );\n-var rnothtmlwhite = ( \/[^\\x20\\t\\r\\n\\f]+\/g );\n-\n-\n-\n-\/\/ Convert String-formatted options into Object-formatted ones\n-function createOptions( options ) {\n-\tvar object = {};\n-\tjQuery.each( options.match( rnothtmlwhite ) || [], function( _, flag ) {\n-\t\tobject[ flag ] = true;\n-\t} );\n-\treturn object;\n-}\n-\n-\/*\n- * Create a callback list using the following parameters:\n- *\n- *\toptions: an optional list of space-separated options that will change how\n- *\t\t\tthe callback list behaves or a more traditional option object\n- *\n- * By default a callback list will act like an event callback list and can be\n- * \"fired\" multiple times.\n- *\n- * Possible options:\n- *\n- *\tonce:\t\t\twill ensure the callback list can only be fired once (like a Deferred)\n- *\n- *\tmemory:\t\t\twill keep track of previous values and will call any callback added\n- *\t\t\t\t\tafter the list has been fired right away with the latest \"memorized\"\n- *\t\t\t\t\tvalues (like a Deferred)\n- *\n- *\tunique:\t\t\twill ensure a callback can only be added once (no duplicate in the list)\n- *\n- *\tstopOnFalse:\tinterrupt callings when a callback returns false\n- *\n- *\/\n-jQuery.Callbacks = function( options ) {\n-\n-\t\/\/ Convert options from String-formatted to Object-formatted if needed\n-\t\/\/ (we check in cache first)\n-\toptions = typeof options === \"string\" ?\n-\t\tcreateOptions( options ) :\n-\t\tjQuery.extend( {}, options );\n-\n-\tvar \/\/ Flag to know if list is currently firing\n-\t\tfiring,\n-\n-\t\t\/\/ Last fire value for non-forgettable lists\n-\t\tmemory,\n-\n-\t\t\/\/ Flag to know if list was already fired\n-\t\tfired,\n-\n-\t\t\/\/ Flag to prevent firing\n-\t\tlocked,\n-\n-\t\t\/\/ Actual callback list\n-\t\tlist = [],\n-\n-\t\t\/\/ Queue of execution data for repeatable lists\n-\t\tqueue = [],\n-\n-\t\t\/\/ Index of currently firing callback (modified by add\/remove as needed)\n-\t\tfiringIndex = -1,\n-\n-\t\t\/\/ Fire callbacks\n-\t\tfire = function() {\n-\n-\t\t\t\/\/ Enforce single-firing\n-\t\t\tlocked = locked || options.once;\n-\n-\t\t\t\/\/ Execute callbacks for all pending executions,\n-\t\t\t\/\/ respecting firingIndex overrides and runtime changes\n-\t\t\tfired = firing = true;\n-\t\t\tfor ( ; queue.length; firingIndex = -1 ) {\n-\t\t\t\tmemory = queue.shift();\n-\t\t\t\twhile ( ++firingIndex < list.length ) {\n-\n-\t\t\t\t\t\/\/ Run callback and check for early termination\n-\t\t\t\t\tif ( list[ firingIndex ].apply( memory[ 0 ], memory[ 1 ] ) === false &&\n-\t\t\t\t\t\toptions.stopOnFalse ) {\n-\n-\t\t\t\t\t\t\/\/ Jump to end and forget the data so .add doesn't re-fire\n-\t\t\t\t\t\tfiringIndex = list.length;\n-\t\t\t\t\t\tmemory = false;\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t}\n-\n-\t\t\t\/\/ Forget the data if we're done with it\n-\t\t\tif ( !options.memory ) {\n-\t\t\t\tmemory = false;\n-\t\t\t}\n-\n-\t\t\tfiring = false;\n-\n-\t\t\t\/\/ Clean up if we're done firing for good\n-\t\t\tif ( locked ) {\n-\n-\t\t\t\t\/\/ Keep an empty list if we have data for future add calls\n-\t\t\t\tif ( memory ) {\n-\t\t\t\t\tlist = [];\n-\n-\t\t\t\t\/\/ Otherwise, this object is spent\n-\t\t\t\t} else {\n-\t\t\t\t\tlist = \"\";\n-\t\t\t\t}\n-\t\t\t}\n-\t\t},\n-\n-\t\t\/\/ Actual Callbacks object\n-\t\tself = {\n-\n-\t\t\t\/\/ Add a callback or a collection of callbacks to the list\n-\t\t\tadd: function() {\n-\t\t\t\tif ( list ) {\n-\n-\t\t\t\t\t\/\/ If we have memory from a past run, we should fire after adding\n-\t\t\t\t\tif ( memory && !firing ) {\n-\t\t\t\t\t\tfiringIndex = list.length - 1;\n-\t\t\t\t\t\tqueue.push( memory );\n-\t\t\t\t\t}\n-\n-\t\t\t\t\t( function add( args ) {\n-\t\t\t\t\t\tjQuery.each( args, function( _, arg ) {\n-\t\t\t\t\t\t\tif ( isFunction( arg ) ) {\n-\t\t\t\t\t\t\t\tif ( !options.unique || !self.has( arg ) ) {\n-\t\t\t\t\t\t\t\t\tlist.push( arg );\n-\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t} else if ( arg && arg.length && toType( arg ) !== \"string\" ) {\n-\n-\t\t\t\t\t\t\t\t\/\/ Inspect recursively\n-\t\t\t\t\t\t\t\tadd( arg );\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t} );\n-\t\t\t\t\t} )( arguments );\n-\n-\t\t\t\t\tif ( memory && !firing ) {\n-\t\t\t\t\t\tfire();\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t\treturn this;\n-\t\t\t},\n-\n-\t\t\t\/\/ Remove a callback from the list\n-\t\t\tremove: function() {\n-\t\t\t\tjQuery.each( arguments, function( _, arg ) {\n-\t\t\t\t\tvar index;\n-\t\t\t\t\twhile ( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {\n-\t\t\t\t\t\tlist.splice( index, 1 );\n-\n-\t\t\t\t\t\t\/\/ Handle firing indexes\n-\t\t\t\t\t\tif ( index <= firingIndex ) {\n-\t\t\t\t\t\t\tfiringIndex--;\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\t\t\t\t} );\n-\t\t\t\treturn this;\n-\t\t\t},\n-\n-\t\t\t\/\/ Check if a given callback is in the list.\n-\t\t\t\/\/ If no argument is given, return whether or not list has callbacks attached.\n-\t\t\thas: function( fn ) {\n-\t\t\t\treturn fn ?\n-\t\t\t\t\tjQuery.inArray( fn, list ) > -1 :\n-\t\t\t\t\tlist.length > 0;\n-\t\t\t},\n-\n-\t\t\t\/\/ Remove all callbacks from the list\n-\t\t\tempty: function() {\n-\t\t\t\tif ( list ) {\n-\t\t\t\t\tlist = [];\n-\t\t\t\t}\n-\t\t\t\treturn this;\n-\t\t\t},\n-\n-\t\t\t\/\/ Disable .fire and .add\n-\t\t\t\/\/ Abort any current\/pending executions\n-\t\t\t\/\/ Clear all callbacks and values\n-\t\t\tdisable: function() {\n-\t\t\t\tlocked = queue = [];\n-\t\t\t\tlist = memory = \"\";\n-\t\t\t\treturn this;\n-\t\t\t},\n-\t\t\tdisabled: function() {\n-\t\t\t\treturn !list;\n-\t\t\t},\n-\n-\t\t\t\/\/ Disable .fire\n-\t\t\t\/\/ Also disable .add unless we have memory (since it would have no effect)\n-\t\t\t\/\/ Abort any pending executions\n-\t\t\tlock: function() {\n-\t\t\t\tlocked = queue = [];\n-\t\t\t\tif ( !memory && !firing ) {\n-\t\t\t\t\tlist = memory = \"\";\n-\t\t\t\t}\n-\t\t\t\treturn this;\n-\t\t\t},\n-\t\t\tlocked: function() {\n-\t\t\t\treturn !!locked;\n-\t\t\t},\n-\n-\t\t\t\/\/ Call all callbacks with the given context and arguments\n-\t\t\tfireWith: function( context, args ) {\n-\t\t\t\tif ( !locked ) {\n-\t\t\t\t\targs = args || [];\n-\t\t\t\t\targs = [ context, args.slice ? args.slice() : args ];\n-\t\t\t\t\tqueue.push( args );\n-\t\t\t\t\tif ( !firing ) {\n-\t\t\t\t\t\tfire();\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t\treturn this;\n-\t\t\t},\n-\n-\t\t\t\/\/ Call all the callbacks with the given arguments\n-\t\t\tfire: function() {\n-\t\t\t\tself.fireWith( this, arguments );\n-\t\t\t\treturn this;\n-\t\t\t},\n-\n-\t\t\t\/\/ To know if the callbacks have already been called at least once\n-\t\t\tfired: function() {\n-\t\t\t\treturn !!fired;\n-\t\t\t}\n-\t\t};\n-\n-\treturn self;\n-};\n-\n-\n-function Identity( v ) {\n-\treturn v;\n-}\n-function Thrower( ex ) {\n-\tthrow ex;\n-}\n-\n-function adoptValue( value, resolve, reject, noValue ) {\n-\tvar method;\n-\n-\ttry {\n-\n-\t\t\/\/ Check for promise aspect first to privilege synchronous behavior\n-\t\tif ( value && isFunction( ( method = value.promise ) ) ) {\n-\t\t\tmethod.call( value ).done( resolve ).fail( reject );\n-\n-\t\t\/\/ Other thenables\n-\t\t} else if ( value && isFunction( ( method = value.then ) ) ) {\n-\t\t\tmethod.call( value, resolve, reject );\n-\n-\t\t\/\/ Other non-thenables\n-\t\t} else {\n-\n-\t\t\t\/\/ Control `resolve` arguments by letting Array#slice cast boolean `noValue` to integer:\n-\t\t\t\/\/ * false: [ value ].slice( 0 ) => resolve( value )\n-\t\t\t\/\/ * true: [ value ].slice( 1 ) => resolve()\n-\t\t\tresolve.apply( undefined, [ value ].slice( noValue ) );\n-\t\t}\n-\n-\t\/\/ For Promises\/A+, convert exceptions into rejections\n-\t\/\/ Since jQuery.when doesn't unwrap thenables, we can skip the extra checks appearing in\n-\t\/\/ Deferred#then to conditionally suppress rejection.\n-\t} catch ( value ) {\n-\n-\t\t\/\/ Support: Android 4.0 only\n-\t\t\/\/ Strict mode functions invoked without .call\/.apply get global-object context\n-\t\treject.apply( undefined, [ value ] );\n-\t}\n-}\n-\n-jQuery.extend( {\n-\n-\tDeferred: function( func ) {\n-\t\tvar tuples = [\n-\n-\t\t\t\t\/\/ action, add listener, callbacks,\n-\t\t\t\t\/\/ ... .then handlers, argument index, [final state]\n-\t\t\t\t[ \"notify\", \"progress\", jQuery.Callbacks( \"memory\" ),\n-\t\t\t\t\tjQuery.Callbacks( \"memory\" ), 2 ],\n-\t\t\t\t[ \"resolve\", \"done\", jQuery.Callbacks( \"once memory\" ),\n-\t\t\t\t\tjQuery.Callbacks( \"once memory\" ), 0, \"resolved\" ],\n-\t\t\t\t[ \"reject\", \"fail\", jQuery.Callbacks( \"once memory\" ),\n-\t\t\t\t\tjQuery.Callbacks( \"once memory\" ), 1, \"rejected\" ]\n-\t\t\t],\n-\t\t\tstate = \"pending\",\n-\t\t\tpromise = {\n-\t\t\t\tstate: function() {\n-\t\t\t\t\treturn state;\n-\t\t\t\t},\n-\t\t\t\talways: function() {\n-\t\t\t\t\tdeferred.done( arguments ).fail( arguments );\n-\t\t\t\t\treturn this;\n-\t\t\t\t},\n-\t\t\t\t\"catch\": function( fn ) {\n-\t\t\t\t\treturn promise.then( null, fn );\n-\t\t\t\t},\n-\n-\t\t\t\t\/\/ Keep pipe for back-compat\n-\t\t\t\tpipe: function( \/* fnDone, fnFail, fnProgress *\/ ) {\n-\t\t\t\t\tvar fns = arguments;\n-\n-\t\t\t\t\treturn jQuery.Deferred( function( newDefer ) {\n-\t\t\t\t\t\tjQuery.each( tuples, function( _i, tuple ) {\n-\n-\t\t\t\t\t\t\t\/\/ Map tuples (progress, done, fail) to arguments (done, fail, progress)\n-\t\t\t\t\t\t\tvar fn = isFunction( fns[ tuple[ 4 ] ] ) && fns[ tuple[ 4 ] ];\n-\n-\t\t\t\t\t\t\t\/\/ deferred.progress(function() { bind to newDefer or newDefer.notify })\n-\t\t\t\t\t\t\t\/\/ deferred.done(function() { bind to newDefer or newDefer.resolve })\n-\t\t\t\t\t\t\t\/\/ deferred.fail(function() { bind to newDefer or newDefer.reject })\n-\t\t\t\t\t\t\tdeferred[ tuple[ 1 ] ]( function() {\n-\t\t\t\t\t\t\t\tvar returned = fn && fn.apply( this, arguments );\n-\t\t\t\t\t\t\t\tif ( returned && isFunction( returned.promise ) ) {\n-\t\t\t\t\t\t\t\t\treturned.promise()\n-\t\t\t\t\t\t\t\t\t\t.progress( newDefer.notify )\n-\t\t\t\t\t\t\t\t\t\t.done( newDefer.resolve )\n-\t\t\t\t\t\t\t\t\t\t.fail( newDefer.reject );\n-\t\t\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\t\t\tnewDefer[ tuple[ 0 ] + \"With\" ](\n-\t\t\t\t\t\t\t\t\t\tthis,\n-\t\t\t\t\t\t\t\t\t\tfn ? [ returned ] : arguments\n-\t\t\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t} );\n-\t\t\t\t\t\t} );\n-\t\t\t\t\t\tfns = null;\n-\t\t\t\t\t} ).promise();\n-\t\t\t\t},\n-\t\t\t\tthen: function( onFulfilled, onRejected, onProgress ) {\n-\t\t\t\t\tvar maxDepth = 0;\n-\t\t\t\t\tfunction resolve( depth, deferred, handler, special ) {\n-\t\t\t\t\t\treturn function() {\n-\t\t\t\t\t\t\tvar that = this,\n-\t\t\t\t\t\t\t\targs = arguments,\n-\t\t\t\t\t\t\t\tmightThrow = function() {\n-\t\t\t\t\t\t\t\t\tvar returned, then;\n-\n-\t\t\t\t\t\t\t\t\t\/\/ Support: Promises\/A+ section 2.3.3.3.3\n-\t\t\t\t\t\t\t\t\t\/\/ https:\/\/promisesaplus.com\/#point-59\n-\t\t\t\t\t\t\t\t\t\/\/ Ignore double-resolution attempts\n-\t\t\t\t\t\t\t\t\tif ( depth < maxDepth ) {\n-\t\t\t\t\t\t\t\t\t\treturn;\n-\t\t\t\t\t\t\t\t\t}\n-\n-\t\t\t\t\t\t\t\t\treturned = handler.apply( that, args );\n-\n-\t\t\t\t\t\t\t\t\t\/\/ Support: Promises\/A+ section 2.3.1\n-\t\t\t\t\t\t\t\t\t\/\/ https:\/\/promisesaplus.com\/#point-48\n-\t\t\t\t\t\t\t\t\tif ( returned === deferred.promise() ) {\n-\t\t\t\t\t\t\t\t\t\tthrow new TypeError( \"Thenable self-resolution\" );\n-\t\t\t\t\t\t\t\t\t}\n-\n-\t\t\t\t\t\t\t\t\t\/\/ Support: Promises\/A+ sections 2.3.3.1, 3.5\n-\t\t\t\t\t\t\t\t\t\/\/ https:\/\/promisesaplus.com\/#point-54\n-\t\t\t\t\t\t\t\t\t\/\/ https:\/\/promisesaplus.com\/#point-75\n-\t\t\t\t\t\t\t\t\t\/\/ Retrieve `then` only once\n-\t\t\t\t\t\t\t\t\tthen = returned &&\n-\n-\t\t\t\t\t\t\t\t\t\t\/\/ Support: Promises\/A+ section 2.3.4\n-\t\t\t\t\t\t\t\t\t\t\/\/ https:\/\/promisesaplus.com\/#point-64\n-\t\t\t\t\t\t\t\t\t\t\/\/ Only check objects and functions for thenability\n-\t\t\t\t\t\t\t\t\t\t( typeof returned === \"object\" ||\n-\t\t\t\t\t\t\t\t\t\t\ttypeof returned === \"function\" ) &&\n-\t\t\t\t\t\t\t\t\t\treturned.then;\n-\n-\t\t\t\t\t\t\t\t\t\/\/ Handle a returned thenable\n-\t\t\t\t\t\t\t\t\tif ( isFunction( then ) ) {\n-\n-\t\t\t\t\t\t\t\t\t\t\/\/ Special processors (notify) just wait for resolution\n-\t\t\t\t\t\t\t\t\t\tif ( special ) {\n-\t\t\t\t\t\t\t\t\t\t\tthen.call(\n-\t\t\t\t\t\t\t\t\t\t\t\treturned,\n-\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Identity, special ),\n-\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Thrower, special )\n-\t\t\t\t\t\t\t\t\t\t\t);\n-\n-\t\t\t\t\t\t\t\t\t\t\/\/ Normal processors (resolve) also hook into progress\n-\t\t\t\t\t\t\t\t\t\t} else {\n-\n-\t\t\t\t\t\t\t\t\t\t\t\/\/ ...and disregard older resolution values\n-\t\t\t\t\t\t\t\t\t\t\tmaxDepth++;\n-\n-\t\t\t\t\t\t\t\t\t\t\tthen.call(\n-\t\t\t\t\t\t\t\t\t\t\t\treturned,\n-\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Identity, special ),\n-\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Thrower, special ),\n-\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Identity,\n-\t\t\t\t\t\t\t\t\t\t\t\t\tdeferred.notifyWith )\n-\t\t\t\t\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t\t\t\t\t}\n-\n-\t\t\t\t\t\t\t\t\t\/\/ Handle all other returned values\n-\t\t\t\t\t\t\t\t\t} else {\n-\n-\t\t\t\t\t\t\t\t\t\t\/\/ Only substitute handlers pass on context\n-\t\t\t\t\t\t\t\t\t\t\/\/ and multiple values (non-spec behavior)\n-\t\t\t\t\t\t\t\t\t\tif ( handler !== Identity ) {\n-\t\t\t\t\t\t\t\t\t\t\tthat = undefined;\n-\t\t\t\t\t\t\t\t\t\t\targs = [ returned ];\n-\t\t\t\t\t\t\t\t\t\t}\n-\n-\t\t\t\t\t\t\t\t\t\t\/\/ Process the value(s)\n-\t\t\t\t\t\t\t\t\t\t\/\/ Default process is resolve\n-\t\t\t\t\t\t\t\t\t\t( special || deferred.resolveWith )( that, args );\n-\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t},\n-\n-\t\t\t\t\t\t\t\t\/\/ Only normal processors (resolve) catch and reject exceptions\n-\t\t\t\t\t\t\t\tprocess = special ?\n-\t\t\t\t\t\t\t\t\tmightThrow :\n-\t\t\t\t\t\t\t\t\tfunction() {\n-\t\t\t\t\t\t\t\t\t\ttry {\n-\t\t\t\t\t\t\t\t\t\t\tmightThrow();\n-\t\t\t\t\t\t\t\t\t\t} catch ( e ) {\n-\n-\t\t\t\t\t\t\t\t\t\t\tif ( jQuery.Deferred.exceptionHook ) {\n-\t\t\t\t\t\t\t\t\t\t\t\tjQuery.Deferred.exceptionHook( e,\n-\t\t\t\t\t\t\t\t\t\t\t\t\tprocess.stackTrace );\n-\t\t\t\t\t\t\t\t\t\t\t}\n-\n-\t\t\t\t\t\t\t\t\t\t\t\/\/ Support: Promises\/A+ section 2.3.3.3.4.1\n-\t\t\t\t\t\t\t\t\t\t\t\/\/ https:\/\/promisesaplus.com\/#point-61\n-\t\t\t\t\t\t\t\t\t\t\t\/\/ Ignore post-resolution exceptions\n-\t\t\t\t\t\t\t\t\t\t\tif ( depth + 1 >= maxDepth ) {\n-\n-\t\t\t\t\t\t\t\t\t\t\t\t\/\/ Only substitute handlers pass on context\n-\t\t\t\t\t\t\t\t\t\t\t\t\/\/ and multiple values (non-spec behavior)\n-\t\t\t\t\t\t\t\t\t\t\t\tif ( handler !== Thrower ) {\n-\t\t\t\t\t\t\t\t\t\t\t\t\tthat = undefined;\n-\t\t\t\t\t\t\t\t\t\t\t\t\targs = [ e ];\n-\t\t\t\t\t\t\t\t\t\t\t\t}\n-\n-\t\t\t\t\t\t\t\t\t\t\t\tdeferred.rejectWith( that, args );\n-\t\t\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\t\t};\n-\n-\t\t\t\t\t\t\t\/\/ Support: Promises\/A+ section 2.3.3.3.1\n-\t\t\t\t\t\t\t\/\/ https:\/\/promisesaplus.com\/#point-57\n-\t\t\t\t\t\t\t\/\/ Re-resolve promises immediately to dodge false rejection from\n-\t\t\t\t\t\t\t\/\/ subsequent errors\n-\t\t\t\t\t\t\tif ( depth ) {\n-\t\t\t\t\t\t\t\tprocess();\n-\t\t\t\t\t\t\t} else {\n-\n-\t\t\t\t\t\t\t\t\/\/ Call an optional hook to record the stack, in case of exception\n-\t\t\t\t\t\t\t\t\/\/ since it's otherwise lost when execution goes async\n-\t\t\t\t\t\t\t\tif ( jQuery.Deferred.getStackHook ) {\n-\t\t\t\t\t\t\t\t\tprocess.stackTrace = jQuery.Deferred.getStackHook();\n-\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\twindow.setTimeout( process );\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t};\n-\t\t\t\t\t}\n-\n-\t\t\t\t\treturn jQuery.Deferred( function( newDefer ) {\n-\n-\t\t\t\t\t\t\/\/ progress_handlers.add( ... )\n-\t\t\t\t\t\ttuples[ 0 ][ 3 ].add(\n-\t\t\t\t\t\t\tresolve(\n-\t\t\t\t\t\t\t\t0,\n-\t\t\t\t\t\t\t\tnewDefer,\n-\t\t\t\t\t\t\t\tisFunction( onProgress ) ?\n-\t\t\t\t\t\t\t\t\tonProgress :\n-\t\t\t\t\t\t\t\t\tIdentity,\n-\t\t\t\t\t\t\t\tnewDefer.notifyWith\n-\t\t\t\t\t\t\t)\n-\t\t\t\t\t\t);\n-\n-\t\t\t\t\t\t\/\/ fulfilled_handlers.add( ... )\n-\t\t\t\t\t\ttuples[ 1 ][ 3 ].add(\n-\t\t\t\t\t\t\tresolve(\n-\t\t\t\t\t\t\t\t0,\n-\t\t\t\t\t\t\t\tnewDefer,\n-\t\t\t\t\t\t\t\tisFunction( onFulfilled ) ?\n-\t\t\t\t\t\t\t\t\tonFulfilled :\n-\t\t\t\t\t\t\t\t\tIdentity\n-\t\t\t\t\t\t\t)\n-\t\t\t\t\t\t);\n-\n-\t\t\t\t\t\t\/\/ rejected_handlers.add( ... )\n-\t\t\t\t\t\ttuples[ 2 ][ 3 ].add(\n-\t\t\t\t\t\t\tresolve(\n-\t\t\t\t\t\t\t\t0,\n-\t\t\t\t\t\t\t\tnewDefer,\n-\t\t\t\t\t\t\t\tisFunction( onRejected ) ?\n-\t\t\t\t\t\t\t\t\tonRejected :\n-\t\t\t\t\t\t\t\t\tThrower\n-\t\t\t\t\t\t\t)\n-\t\t\t\t\t\t);\n-\t\t\t\t\t} ).promise();\n-\t\t\t\t},\n-\n-\t\t\t\t\/\/ Get a promise for this deferred\n-\t\t\t\t\/\/ If obj is provided, the promise aspect is added to the object\n-\t\t\t\tpromise: function( obj ) {\n-\t\t\t\t\treturn obj != null ? jQuery.extend( obj, promise ) : promise;\n-\t\t\t\t}\n-\t\t\t},\n-\t\t\tdeferred = {};\n-\n-\t\t\/\/ Add list-specific methods\n-\t\tjQuery.each( tuples, function( i, tuple ) {\n-\t\t\tvar list = tuple[ 2 ],\n-\t\t\t\tstateString = tuple[ 5 ];\n-\n-\t\t\t\/\/ promise.progress = list.add\n-\t\t\t\/\/ promise.done = list.add\n-\t\t\t\/\/ promise.fail = list.add\n-\t\t\tpromise[ tuple[ 1 ] ] = list.add;\n-\n-\t\t\t\/\/ Handle state\n-\t\t\tif ( stateString ) {\n-\t\t\t\tlist.add(\n-\t\t\t\t\tfunction() {\n-\n-\t\t\t\t\t\t\/\/ state = \"resolved\" (i.e., fulfilled)\n-\t\t\t\t\t\t\/\/ state = \"rejected\"\n-\t\t\t\t\t\tstate = stateString;\n-\t\t\t\t\t},\n-\n-\t\t\t\t\t\/\/ rejected_callbacks.disable\n-\t\t\t\t\t\/\/ fulfilled_callbacks.disable\n-\t\t\t\t\ttuples[ 3 - i ][ 2 ].disable,\n-\n-\t\t\t\t\t\/\/ rejected_handlers.disable\n-\t\t\t\t\t\/\/ fulfilled_handlers.disable\n-\t\t\t\t\ttuples[ 3 - i ][ 3 ].disable,\n-\n-\t\t\t\t\t\/\/ progress_callbacks.lock\n-\t\t\t\t\ttuples[ 0 ][ 2 ].lock,\n-\n-\t\t\t\t\t\/\/ progress_handlers.lock\n-\t\t\t\t\ttuples[ 0 ][ 3 ].lock\n-\t\t\t\t);\n-\t\t\t}\n-\n-\t\t\t\/\/ progress_handlers.fire\n-\t\t\t\/\/ fulfilled_handlers.fire\n-\t\t\t\/\/ rejected_handlers.fire\n-\t\t\tlist.add( tuple[ 3 ].fire );\n-\n-\t\t\t\/\/ deferred.notify = function() { deferred.notifyWith(...) }\n-\t\t\t\/\/ deferred.resolve = function() { deferred.resolveWith(...) }\n-\t\t\t\/\/ deferred.reject = function() { deferred.rejectWith(...) }\n-\t\t\tdeferred[ tuple[ 0 ] ] = function() {\n-\t\t\t\tdeferred[ tuple[ 0 ] + \"With\" ]( this === deferred ? undefined : this, arguments );\n-\t\t\t\treturn this;\n-\t\t\t};\n-\n-\t\t\t\/\/ deferred.notifyWith = list.fireWith\n-\t\t\t\/\/ deferred.resolveWith = list.fireWith\n-\t\t\t\/\/ deferred.rejectWith = list.fireWith\n-\t\t\tdeferred[ tuple[ 0 ] + \"With\" ] = list.fireWith;\n-\t\t} );\n-\n-\t\t\/\/ Make the deferred a promise\n-\t\tpromise.promise( deferred );\n-\n-\t\t\/\/ Call given func if any\n-\t\tif ( func ) {\n-\t\t\tfunc.call( deferred, deferred );\n-\t\t}\n-\n-\t\t\/\/ All done!\n-\t\treturn deferred;\n-\t},\n-\n-\t\/\/ Deferred helper\n-\twhen: function( singleValue ) {\n-\t\tvar\n-\n-\t\t\t\/\/ count of uncompleted subordinates\n-\t\t\tremaining = arguments.length,\n-\n-\t\t\t\/\/ count of unprocessed arguments\n-\t\t\ti = remaining,\n-\n-\t\t\t\/\/ subordinate fulfillment data\n-\t\t\tresolveContexts = Array( i ),\n-\t\t\tresolveValues = slice.call( arguments ),\n-\n-\t\t\t\/\/ the primary Deferred\n-\t\t\tprimary = jQuery.Deferred(),\n-\n-\t\t\t\/\/ subordinate callback factory\n-\t\t\tupdateFunc = function( i ) {\n-\t\t\t\treturn function( value ) {\n-\t\t\t\t\tresolveContexts[ i ] = this;\n-\t\t\t\t\tresolveValues[ i ] = arguments.length > 1 ? slice.call( arguments ) : value;\n-\t\t\t\t\tif ( !( --remaining ) ) {\n-\t\t\t\t\t\tprimary.resolveWith( resolveContexts, resolveValues );\n-\t\t\t\t\t}\n-\t\t\t\t};\n-\t\t\t};\n-\n-\t\t\/\/ Single- and empty arguments are adopted like Promise.resolve\n-\t\tif ( remaining <= 1 ) {\n-\t\t\tadoptValue( singleValue, primary.done( updateFunc( i ) ).resolve, primary.reject,\n-\t\t\t\t!remaining );\n-\n-\t\t\t\/\/ Use .then() to unwrap secondary thenables (cf. gh-3000)\n-\t\t\tif ( primary.state() === \"pending\" ||\n-\t\t\t\tisFunction( resolveValues[ i ] && resolveValues[ i ].then ) ) {\n-\n-\t\t\t\treturn primary.then();\n-\t\t\t}\n-\t\t}\n-\n-\t\t\/\/ Multiple arguments are aggregated like Promise.all array elements\n-\t\twhile ( i-- ) {\n-\t\t\tadoptValue( resolveValues[ i ], updateFunc( i ), primary.reject );\n-\t\t}\n-\n-\t\treturn primary.promise();\n-\t}\n-} );\n-\n-\n-\/\/ These usually indicate a programmer mistake during development,\n-\/\/ warn about them ASAP rather than swallowing them by default.\n-var rerrorNames = \/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$\/;\n-\n-jQuery.Deferred.exceptionHook = function( error, stack ) {\n-\n-\t\/\/ Support: IE 8 - 9 only\n-\t\/\/ Console exists when dev tools are open, which can happen at any time\n-\tif ( window.console && window.console.warn && error && rerrorNames.test( error.name ) ) {\n-\t\twindow.console.warn( \"jQuery.Deferred exception: \" + error.message, error.stack, stack );\n-\t}\n-};\n-\n-\n-\n-\n-jQuery.readyException = function( error ) {\n-\twindow.setTimeout( function() {\n-\t\tthrow error;\n-\t} );\n-};\n-\n-\n-\n-\n-\/\/ The deferred used on DOM ready\n-var readyList = jQuery.Deferred();\n-\n-jQuery.fn.ready = function( fn ) {\n-\n-\treadyList\n-\t\t.then( fn )\n-\n-\t\t\/\/ Wrap jQuery.readyException in a function so that the lookup\n-\t\t\/\/ happens at the time of error handling instead of callback\n-\t\t\/\/ registration.\n-\t\t.catch( function( error ) {\n-\t\t\tjQuery.readyException( error );\n-\t\t} );\n-\n-\treturn this;\n-};\n-\n-jQuery.extend( {\n-\n-\t\/\/ Is the DOM ready to be used? Set to true once it occurs.\n-\tisReady: false,\n-\n-\t\/\/ A counter to track how many items to wait for before\n-\t\/\/ the ready event fires. See trac-6781\n-\treadyWait: 1,\n-\n-\t\/\/ Handle when the DOM is ready\n-\tready: function( wait ) {\n-\n-\t\t\/\/ Abort if there are pending holds or we're already ready\n-\t\tif ( wait === true ? --jQuery.readyWait : jQuery.isReady ) {\n-\t\t\treturn;\n-\t\t}\n-\n-\t\t\/\/ Remember that the DOM is ready\n-\t\tjQuery.isReady = true;\n-\n-\t\t\/\/ If a normal DOM Ready event fired, decrement, and wait if need be\n-\t\tif ( wait !== true && --jQuery.readyWait > 0 ) {\n-\t\t\treturn;\n-\t\t}\n-\n-\t\t\/\/ If there are functions bound, to execute\n-\t\treadyList.resolveWith( document, [ jQuery ] );\n-\t}\n-} );\n-\n-jQuery.ready.then = readyList.then;\n-\n-\/\/ The ready event handler and self cleanup method\n-function completed() {\n-\tdocument.removeEventListener( \"DOMContentLoaded\", completed );\n-\twindow.removeEventListener( \"load\", completed );\n-\tjQuery.ready();\n-}\n-\n-\/\/ Catch cases where $(document).ready() is called\n-\/\/ after the browser event has already occurred.\n-\/\/ Support: IE <=9 - 10 only\n-\/\/ Older IE sometimes signals \"interactive\" too soon\n-if ( document.readyState === \"complete\" ||\n-\t( document.readyState !== \"loading\" && !document.documentElement.doScroll ) ) {\n-\n-\t\/\/ Handle it asynchronously to allow scripts the opportunity to delay ready\n-\twindow.setTimeout( jQuery.ready );\n-\n-} else {\n-\n-\t\/\/ Use the handy event callback\n-\tdocument.addEventListener( \"DOMContentLoaded\", completed );\n-\n-\t\/\/ A fallback to window.onload, that will always work\n-\twindow.addEventListener( \"load\", completed );\n-}\n-\n-\n-\n-\n-\/\/ Multifunctional method to get and set values of a collection\n-\/\/ The value\/s can optionally be executed if it's a function\n-var access = function( elems, fn, key, value, chainable, emptyGet, raw ) {\n-\tvar i = 0,\n-\t\tlen = elems.length,\n-\t\tbulk = key == null;\n-\n-\t\/\/ Sets many values\n-\tif ( toType( key ) === \"object\" ) {\n-\t\tchainable = true;\n-\t\tfor ( i in key ) {\n-\t\t\taccess( elems, fn, i, key[ i ], true, emptyGet, raw );\n-\t\t}\n-\n-\t\/\/ Sets one value\n-\t} else if ( value !== undefined ) {\n-\t\tchainable = true;\n-\n-\t\tif ( !isFunction( value ) ) {\n-\t\t\traw = true;\n-\t\t}\n-\n-\t\tif ( bulk ) {\n-\n-\t\t\t\/\/ Bulk operations run against the entire set\n-\t\t\tif ( raw ) {\n-\t\t\t\tfn.call( elems, value );\n-\t\t\t\tfn = null;\n-\n-\t\t\t\/\/ ...except when executing function values\n-\t\t\t} else {\n-\t\t\t\tbulk = fn;\n-\t\t\t\tfn = function( elem, _key, value ) {\n-\t\t\t\t\treturn bulk.call( jQuery( elem ), value );\n-\t\t\t\t};\n-\t\t\t}\n-\t\t}\n-\n-\t\tif ( fn ) {\n-\t\t\tfor ( ; i < len; i++ ) {\n-\t\t\t\tfn(\n-\t\t\t\t\telems[ i ], key, raw ?\n-\t\t\t\t\t\tvalue :\n-\t\t\t\t\t\tvalue.call( elems[ i ], i, fn( elems[ i ], key ) )\n-\t\t\t\t);\n-\t\t\t}\n-\t\t}\n-\t}\n-\n-\tif ( chainable ) {\n-\t\treturn elems;\n-\t}\n-\n-\t\/\/ Gets\n-\tif ( bulk ) {\n-\t\treturn fn.call( elems );\n-\t}\n-\n-\treturn len ? fn( elems[ 0 ], key ) : emptyGet;\n-};\n-\n-\n-\/\/ Matches dashed string for camelizing\n-var rmsPrefix = \/^-ms-\/,\n-\trdashAlpha = \/-([a-z])\/g;\n-\n-\/\/ Used by camelCase as callback to replace()\n-function fcamelCase( _all, letter ) {\n-\treturn letter.toUpperCase();\n-}\n-\n-\/\/ Convert dashed to camelCase; used by the css and data modules\n-\/\/ Support: IE <=9 - 11, Edge 12 - 15\n-\/\/ Microsoft forgot to hump their vendor prefix (trac-9572)\n-function camelCase( string ) {\n-\treturn string.replace( rmsPrefix, \"ms-\" ).replace( rdashAlpha, fcamelCase );\n-}\n-var acceptData = function( owner ) {\n-\n-\t\/\/ Accepts only:\n-\t\/\/  - Node\n-\t\/\/    - Node.ELEMENT_NODE\n-\t\/\/    - Node.DOCUMENT_NODE\n-\t\/\/  - Object\n-\t\/\/    - Any\n-\treturn owner.nodeType === 1 || owner.nodeType === 9 || !( +owner.nodeType );\n-};\n-\n-\n-\n-\n-function Data() {\n-\tthis.expando = jQuery.expando + Data.uid++;\n-}\n-\n-Data.uid = 1;\n-\n-Data.prototype = {\n-\n-\tcache: function( owner ) {\n-\n-\t\t\/\/ Check if the owner object already has a cache\n-\t\tvar value = owner[ this.expando ];\n-\n-\t\t\/\/ If not, create one\n-\t\tif ( !value ) {\n-\t\t\tvalue = {};\n-\n-\t\t\t\/\/ We can accept data for non-element nodes in modern browsers,\n-\t\t\t\/\/ but we should not, see trac-8335.\n-\t\t\t\/\/ Always return an empty object.\n-\t\t\tif ( acceptData( owner ) ) {\n-\n-\t\t\t\t\/\/ If it is a node unlikely to be stringify-ed or looped over\n-\t\t\t\t\/\/ use plain assignment\n-\t\t\t\tif ( owner.nodeType ) {\n-\t\t\t\t\towner[ this.expando ] = value;\n-\n-\t\t\t\t\/\/ Otherwise secure it in a non-enumerable property\n-\t\t\t\t\/\/ configurable must be true to allow the property to be\n-\t\t\t\t\/\/ deleted when data is removed\n-\t\t\t\t} else {\n-\t\t\t\t\tObject.defineProperty( owner, this.expando, {\n-\t\t\t\t\t\tvalue: value,\n-\t\t\t\t\t\tconfigurable: true\n-\t\t\t\t\t} );\n-\t\t\t\t}\n-\t\t\t}\n-\t\t}\n-\n-\t\treturn value;\n-\t},\n-\tset: function( owner, data, value ) {\n-\t\tvar prop,\n-\t\t\tcache = this.cache( owner );\n-\n-\t\t\/\/ Handle: [ owner, key, value ] args\n-\t\t\/\/ Always use camelCase key (gh-2257)\n-\t\tif ( typeof data === \"string\" ) {\n-\t\t\tcache[ camelCase( data ) ] = value;\n-\n-\t\t\/\/ Handle: [ owner, { properties } ] args\n-\t\t} else {\n-\n-\t\t\t\/\/ Copy the properties one-by-one to the cache object\n-\t\t\tfor ( prop in data ) {\n-\t\t\t\tcache[ camelCase( prop ) ] = data[ prop ];\n-\t\t\t}\n-\t\t}\n-\t\treturn cache;\n-\t},\n-\tget: function( owner, key ) {\n-\t\treturn key === undefined ?\n-\t\t\tthis.cache( owner ) :\n-\n-\t\t\t\/\/ Always use camelCase key (gh-2257)\n-\t\t\towner[ this.expando ] && owner[ this.expando ][ camelCase( key ) ];\n-\t},\n-\taccess: function( owner, key, value ) {\n-\n-\t\t\/\/ In cases where either:\n-\t\t\/\/\n-\t\t\/\/   1. No key was specified\n-\t\t\/\/   2. A string key was specified, but no value provided\n-\t\t\/\/\n-\t\t\/\/ Take the \"read\" path and allow the get method to determine\n-\t\t\/\/ which value to return, respectively either:\n-\t\t\/\/\n-\t\t\/\/   1. The entire cache object\n-\t\t\/\/   2. The data stored at the key\n-\t\t\/\/\n-\t\tif ( key === undefined ||\n-\t\t\t\t( ( key && typeof key === \"string\" ) && value === undefined ) ) {\n-\n-\t\t\treturn this.get( owner, key );\n-\t\t}\n-\n-\t\t\/\/ When the key is not a string, or both a key and value\n-\t\t\/\/ are specified, set or extend (existing objects) with either:\n-\t\t\/\/\n-\t\t\/\/   1. An object of properties\n-\t\t\/\/   2. A key and value\n-\t\t\/\/\n-\t\tthis.set( owner, key, value );\n-\n-\t\t\/\/ Since the \"set\" path can have two possible entry points\n-\t\t\/\/ return the expected data based on which path was taken[*]\n-\t\treturn value !== undefined ? value : key;\n-\t},\n-\tremove: function( owner, key ) {\n-\t\tvar i,\n-\t\t\tcache = owner[ this.expando ];\n-\n-\t\tif ( cache === undefined ) {\n-\t\t\treturn;\n-\t\t}\n-\n-\t\tif ( key !== undefined ) {\n-\n-\t\t\t\/\/ Support array or space separated string of keys\n-\t\t\tif ( Array.isArray( key ) ) {\n-\n-\t\t\t\t\/\/ If key is an array of keys...\n-\t\t\t\t\/\/ We always set camelCase keys, so remove that.\n-\t\t\t\tkey = key.map( camelCase );\n-\t\t\t} else {\n-\t\t\t\tkey = camelCase( key );\n-\n-\t\t\t\t\/\/ If a key with the spaces exists, use it.\n-\t\t\t\t\/\/ Otherwise, create an array by matching non-whitespace\n-\t\t\t\tkey = key in cache ?\n-\t\t\t\t\t[ key ] :\n-\t\t\t\t\t( key.match( rnothtmlwhite ) || [] );\n-\t\t\t}\n-\n-\t\t\ti = key.length;\n-\n-\t\t\twhile ( i-- ) {\n-\t\t\t\tdelete cache[ key[ i ] ];\n-\t\t\t}\n-\t\t}\n-\n-\t\t\/\/ Remove the expando if there's no more data\n-\t\tif ( key === undefined || jQuery.isEmptyObject( cache ) ) {\n-\n-\t\t\t\/\/ Support: Chrome <=35 - 45\n-\t\t\t\/\/ Webkit & Blink performance suffers when deleting properties\n-\t\t\t\/\/ from DOM nodes, so set to undefined instead\n-\t\t\t\/\/ https:\/\/bugs.chromium.org\/p\/chromium\/issues\/detail?id=378607 (bug restricted)\n-\t\t\tif ( owner.nodeType ) {\n-\t\t\t\towner[ this.expando ] = undefined;\n-\t\t\t} else {\n-\t\t\t\tdelete owner[ this.expando ];\n-\t\t\t}\n-\t\t}\n-\t},\n-\thasData: function( owner ) {\n-\t\tvar cache = owner[ this.expando ];\n-\t\treturn cache !== undefined && !jQuery.isEmptyObject( cache );\n-\t}\n-};\n-var dataPriv = new Data();\n-\n-var dataUser = new Data();\n-\n-\n-\n-\/\/\tImplementation Summary\n-\/\/\n-\/\/\t1. Enforce API surface and semantic compatibility with 1.9.x branch\n-\/\/\t2. Improve the module's maintainability by reducing the storage\n-\/\/\t\tpaths to a single mechanism.\n-\/\/\t3. Use the same single mechanism to support \"private\" and \"user\" data.\n-\/\/\t4. _Never_ expose \"private\" data to user code (TODO: Drop _data, _removeData)\n-\/\/\t5. Avoid exposing implementation details on user objects (eg. expando properties)\n-\/\/\t6. Provide a clear path for implementation upgrade to WeakMap in 2014\n-\n-var rbrace = \/^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$\/,\n-\trmultiDash = \/[A-Z]\/g;\n-\n-function getData( data ) {\n-\tif ( data === \"true\" ) {\n-\t\treturn true;\n-\t}\n-\n-\tif ( data === \"false\" ) {\n-\t\treturn false;\n-\t}\n-\n-\tif ( data === \"null\" ) {\n-\t\treturn null;\n-\t}\n-\n-\t\/\/ Only convert to a number if it doesn't change the string\n-\tif ( data === +data + \"\" ) {\n-\t\treturn +data;\n-\t}\n-\n-\tif ( rbrace.test( data ) ) {\n-\t\treturn JSON.parse( data );\n-\t}\n-\n-\treturn data;\n-}\n-\n-function dataAttr( elem, key, data ) {\n-\tvar name;\n-\n-\t\/\/ If nothing was found internally, try to fetch any\n-\t\/\/ data from the HTML5 data-* attribute\n-\tif ( data === undefined && elem.nodeType === 1 ) {\n-\t\tname = \"data-\" + key.replace( rmultiDash, \"-$&\" ).toLowerCase();\n-\t\tdata = elem.getAttribute( name );\n-\n-\t\tif ( typeof data === \"string\" ) {\n-\t\t\ttry {\n-\t\t\t\tdata = getData( data );\n-\t\t\t} catch ( e ) {}\n-\n-\t\t\t\/\/ Make sure we set the data so it isn't changed later\n-\t\t\tdataUser.set( elem, key, data );\n-\t\t} else {\n-\t\t\tdata = undefined;\n-\t\t}\n-\t}\n-\treturn data;\n-}\n-\n-jQuery.extend( {\n-\thasData: function( elem ) {\n-\t\treturn dataUser.hasData( elem ) || dataPriv.hasData( elem );\n-\t},\n-\n-\tdata: function( elem, name, data ) {\n-\t\treturn dataUser.access( elem, name, data );\n-\t},\n-\n-\tremoveData: function( elem, name ) {\n-\t\tdataUser.remove( elem, name );\n-\t},\n-\n-\t\/\/ TODO: Now that all calls to _data and _removeData have been replaced\n-\t\/\/ with direct calls to dataPriv methods, these can be deprecated.\n-\t_data: function( elem, name, data ) {\n-\t\treturn dataPriv.access( elem, name, data );\n-\t},\n-\n-\t_removeData: function( elem, name ) {\n-\t\tdataPriv.remove( elem, name );\n-\t}\n-} );\n-\n-jQuery.fn.extend( {\n-\tdata: function( key, value ) {\n-\t\tvar i, name, data,\n-\t\t\telem = this[ 0 ],\n-\t\t\tattrs = elem && elem.attributes;\n-\n-\t\t\/\/ Gets all values\n-\t\tif ( key === undefined ) {\n-\t\t\tif ( this.length ) {\n-\t\t\t\tdata = dataUser.get( elem );\n-\n-\t\t\t\tif ( elem.nodeType === 1 && !dataPriv.get( elem, \"hasDataAttrs\" ) ) {\n-\t\t\t\t\ti = attrs.length;\n-\t\t\t\t\twhile ( i-- ) {\n-\n-\t\t\t\t\t\t\/\/ Support: IE 11 only\n-\t\t\t\t\t\t\/\/ The attrs elements can be null (trac-14894)\n-\t\t\t\t\t\tif ( attrs[ i ] ) {\n-\t\t\t\t\t\t\tname = attrs[ i ].name;\n-\t\t\t\t\t\t\tif ( name.indexOf( \"data-\" ) === 0 ) {\n-\t\t\t\t\t\t\t\tname = camelCase( name.slice( 5 ) );\n-\t\t\t\t\t\t\t\tdataAttr( elem, name, data[ name ] );\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\t\t\t\t\tdataPriv.set( elem, \"hasDataAttrs\", true );\n-\t\t\t\t}\n-\t\t\t}\n-\n-\t\t\treturn data;\n-\t\t}\n-\n-\t\t\/\/ Sets multiple values\n-\t\tif ( typeof key === \"object\" ) {\n-\t\t\treturn this.each( function() {\n-\t\t\t\tdataUser.set( this, key );\n-\t\t\t} );\n-\t\t}\n-\n-\t\treturn access( this, function( value ) {\n-\t\t\tvar data;\n-\n-\t\t\t\/\/ The calling jQuery object (element matches) is not empty\n-\t\t\t\/\/ (and therefore has an element appears at this[ 0 ]) and the\n-\t\t\t\/\/ `value` parameter was not undefined. An empty jQuery object\n-\t\t\t\/\/ will result in `undefined` for elem = this[ 0 ] which will\n-\t\t\t\/\/ throw an exception if an attempt to read a data cache is made.\n-\t\t\tif ( elem && value === undefined ) {\n-\n-\t\t\t\t\/\/ Attempt to get data from the cache\n-\t\t\t\t\/\/ The key will always be camelCased in Data\n-\t\t\t\tdata = dataUser.get( elem, key );\n-\t\t\t\tif ( data !== undefined ) {\n-\t\t\t\t\treturn data;\n-\t\t\t\t}\n-\n-\t\t\t\t\/\/ Attempt to \"discover\" the data in\n-\t\t\t\t\/\/ HTML5 custom data-* attrs\n-\t\t\t\tdata = dataAttr( elem, key );\n-\t\t\t\tif ( data !== undefined ) {\n-\t\t\t\t\treturn data;\n-\t\t\t\t}\n-\n-\t\t\t\t\/\/ We tried really hard, but the data doesn't exist.\n-\t\t\t\treturn;\n-\t\t\t}\n-\n-\t\t\t\/\/ Set the data...\n-\t\t\tthis.each( function() {\n-\n-\t\t\t\t\/\/ We always store the camelCased key\n-\t\t\t\tdataUser.set( this, key, value );\n-\t\t\t} );\n-\t\t}, null, value, arguments.length > 1, null, true );\n-\t},\n-\n-\tremoveData: function( key ) {\n-\t\treturn this.each( function() {\n-\t\t\tdataUser.remove( this, key );\n-\t\t} );\n-\t}\n-} );\n-\n-\n-jQuery.extend( {\n-\tqueue: function( elem, type, data ) {\n-\t\tvar queue;\n-\n-\t\tif ( elem ) {\n-\t\t\ttype = ( type || \"fx\" ) + \"queue\";\n-\t\t\tqueue = dataPriv.get( elem, type );\n-\n-\t\t\t\/\/ Speed up dequeue by getting out quickly if this is just a lookup\n-\t\t\tif ( data ) {\n-\t\t\t\tif ( !queue || Array.isArray( data ) ) {\n-\t\t\t\t\tqueue = dataPriv.access( elem, type, jQuery.makeArray( data ) );\n-\t\t\t\t} else {\n-\t\t\t\t\tqueue.push( data );\n-\t\t\t\t}\n-\t\t\t}\n-\t\t\treturn queue || [];\n-\t\t}\n-\t},\n-\n-\tdequeue: function( elem, type ) {\n-\t\ttype = type || \"fx\";\n-\n-\t\tvar queue = jQuery.queue( elem, type ),\n-\t\t\tstartLength = queue.length,\n-\t\t\tfn = queue.shift(),\n-\t\t\thooks = jQuery._queueHooks( elem, type ),\n-\t\t\tnext = function() {\n-\t\t\t\tjQuery.dequeue( elem, type );\n-\t\t\t};\n-\n-\t\t\/\/ If the fx queue is dequeued, always remove the progress sentinel\n-\t\tif ( fn === \"inprogress\" ) {\n-\t\t\tfn = queue.shift();\n-\t\t\tstartLength--;\n-\t\t}\n-\n-\t\tif ( fn ) {\n-\n-\t\t\t\/\/ Add a progress sentinel to prevent the fx queue from being\n-\t\t\t\/\/ automatically dequeued\n-\t\t\tif ( type === \"fx\" ) {\n-\t\t\t\tqueue.unshift( \"inprogress\" );\n-\t\t\t}\n-\n-\t\t\t\/\/ Clear up the last queue stop function\n-\t\t\tdelete hooks.stop;\n-\t\t\tfn.call( elem, next, hooks );\n-\t\t}\n-\n-\t\tif ( !startLength && hooks ) {\n-\t\t\thooks.empty.fire();\n-\t\t}\n-\t},\n-\n-\t\/\/ Not public - generate a queueHooks object, or return the current one\n-\t_queueHooks: function( elem, type ) {\n-\t\tvar key = type + \"queueHooks\";\n-\t\treturn dataPriv.get( elem, key ) || dataPriv.access( elem, key, {\n-\t\t\tempty: jQuery.Callbacks( \"once memory\" ).add( function() {\n-\t\t\t\tdataPriv.remove( elem, [ type + \"queue\", key ] );\n-\t\t\t} )\n-\t\t} );\n-\t}\n-} );\n-\n-jQuery.fn.extend( {\n-\tqueue: function( type, data ) {\n-\t\tvar setter = 2;\n-\n-\t\tif ( typeof type !== \"string\" ) {\n-\t\t\tdata = type;\n-\t\t\ttype = \"fx\";\n-\t\t\tsetter--;\n-\t\t}\n-\n-\t\tif ( arguments.length < setter ) {\n-\t\t\treturn jQuery.queue( this[ 0 ], type );\n-\t\t}\n-\n-\t\treturn data === undefined ?\n-\t\t\tthis :\n-\t\t\tthis.each( function() {\n-\t\t\t\tvar queue = jQuery.queue( this, type, data );\n-\n-\t\t\t\t\/\/ Ensure a hooks for this queue\n-\t\t\t\tjQuery._queueHooks( this, type );\n-\n-\t\t\t\tif ( type === \"fx\" && queue[ 0 ] !== \"inprogress\" ) {\n-\t\t\t\t\tjQuery.dequeue( this, type );\n-\t\t\t\t}\n-\t\t\t} );\n-\t},\n-\tdequeue: function( type ) {\n-\t\treturn this.each( function() {\n-\t\t\tjQuery.dequeue( this, type );\n-\t\t} );\n-\t},\n-\tclearQueue: function( type ) {\n-\t\treturn this.queue( type || \"fx\", [] );\n-\t},\n-\n-\t\/\/ Get a promise resolved when queues of a certain type\n-\t\/\/ are emptied (fx is the type by default)\n-\tpromise: function( type, obj ) {\n-\t\tvar tmp,\n-\t\t\tcount = 1,\n-\t\t\tdefer = jQuery.Deferred(),\n-\t\t\telements = this,\n-\t\t\ti = this.length,\n-\t\t\tresolve = function() {\n-\t\t\t\tif ( !( --count ) ) {\n-\t\t\t\t\tdefer.resolveWith( elements, [ elements ] );\n-\t\t\t\t}\n-\t\t\t};\n-\n-\t\tif ( typeof type !== \"string\" ) {\n-\t\t\tobj = type;\n-\t\t\ttype = undefined;\n-\t\t}\n-\t\ttype = type || \"fx\";\n-\n-\t\twhile ( i-- ) {\n-\t\t\ttmp = dataPriv.get( elements[ i ], type + \"queueHooks\" );\n-\t\t\tif ( tmp && tmp.empty ) {\n-\t\t\t\tcount++;\n-\t\t\t\ttmp.empty.add( resolve );\n-\t\t\t}\n-\t\t}\n-\t\tresolve();\n-\t\treturn defer.promise( obj );\n-\t}\n-} );\n-var pnum = ( \/[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)\/ ).source;\n-\n-var rcssNum = new RegExp( \"^(?:([+-])=|)(\" + pnum + \")([a-z%]*)$\", \"i\" );\n-\n-\n-var cssExpand = [ \"Top\", \"Right\", \"Bottom\", \"Left\" ];\n-\n-var documentElement = document.documentElement;\n-\n-\n-\n-\tvar isAttached = function( elem ) {\n-\t\t\treturn jQuery.contains( elem.ownerDocument, elem );\n-\t\t},\n-\t\tcomposed = { composed: true };\n-\n-\t\/\/ Support: IE 9 - 11+, Edge 12 - 18+, iOS 10.0 - 10.2 only\n-\t\/\/ Check attachment across shadow DOM boundaries when possible (gh-3504)\n-\t\/\/ Support: iOS 10.0-10.2 only\n-\t\/\/ Early iOS 10 versions support `attachShadow` but not `getRootNode`,\n-\t\/\/ leading to errors. We need to check for `getRootNode`.\n-\tif ( documentElement.getRootNode ) {\n-\t\tisAttached = function( elem ) {\n-\t\t\treturn jQuery.contains( elem.ownerDocument, elem ) ||\n-\t\t\t\telem.getRootNode( composed ) === elem.ownerDocument;\n-\t\t};\n-\t}\n-var isHiddenWithinTree = function( elem, el ) {\n-\n-\t\t\/\/ isHiddenWithinTree might be called from jQuery#filter function;\n-\t\t\/\/ in that case, element will be second argument\n-\t\telem = el || elem;\n-\n-\t\t\/\/ Inline style trumps all\n-\t\treturn elem.style.display === \"none\" ||\n-\t\t\telem.style.display === \"\" &&\n-\n-\t\t\t\/\/ Otherwise, check computed style\n-\t\t\t\/\/ Support: Firefox <=43 - 45\n-\t\t\t\/\/ Disconnected elements can have computed display: none, so first confirm that elem is\n-\t\t\t\/\/ in the document.\n-\t\t\tisAttached( elem ) &&\n-\n-\t\t\tjQuery.css( elem, \"display\" ) === \"none\";\n-\t};\n-\n-\n-\n-function adjustCSS( elem, prop, valueParts, tween ) {\n-\tvar adjusted, scale,\n-\t\tmaxIterations = 20,\n-\t\tcurrentValue = tween ?\n-\t\t\tfunction() {\n-\t\t\t\treturn tween.cur();\n-\t\t\t} :\n-\t\t\tfunction() {\n-\t\t\t\treturn jQuery.css( elem, prop, \"\" );\n-\t\t\t},\n-\t\tinitial = currentValue(),\n-\t\tunit = valueParts && valueParts[ 3 ] || ( jQuery.cssNumber[ prop ] ? \"\" : \"px\" ),\n-\n-\t\t\/\/ Starting value computation is required for potential unit mismatches\n-\t\tinitialInUnit = elem.nodeType &&\n-\t\t\t( jQuery.cssNumber[ prop ] || unit !== \"px\" && +initial ) &&\n-\t\t\trcssNum.exec( jQuery.css( elem, prop ) );\n-\n-\tif ( initialInUnit && initialInUnit[ 3 ] !== unit ) {\n-\n-\t\t\/\/ Support: Firefox <=54\n-\t\t\/\/ Halve the iteration target value to prevent interference from CSS upper bounds (gh-2144)\n-\t\tinitial = initial \/ 2;\n-\n-\t\t\/\/ Trust units reported by jQuery.css\n-\t\tunit = unit || initialInUnit[ 3 ];\n-\n-\t\t\/\/ Iteratively approximate from a nonzero starting point\n-\t\tinitialInUnit = +initial || 1;\n-\n-\t\twhile ( maxIterations-- ) {\n-\n-\t\t\t\/\/ Evaluate and update our best guess (doubling guesses that zero out).\n-\t\t\t\/\/ Finish if the scale equals or crosses 1 (making the old*new product non-positive).\n-\t\t\tjQuery.style( elem, prop, initialInUnit + unit );\n-\t\t\tif ( ( 1 - scale ) * ( 1 - ( scale = currentValue() \/ initial || 0.5 ) ) <= 0 ) {\n-\t\t\t\tmaxIterations = 0;\n-\t\t\t}\n-\t\t\tinitialInUnit = initialInUnit \/ scale;\n-\n-\t\t}\n-\n-\t\tinitialInUnit = initialInUnit * 2;\n-\t\tjQuery.style( elem, prop, initialInUnit + unit );\n-\n-\t\t\/\/ Make sure we update the tween properties later on\n-\t\tvalueParts = valueParts || [];\n-\t}\n-\n-\tif ( valueParts ) {\n-\t\tinitialInUnit = +initialInUnit || +initial || 0;\n-\n-\t\t\/\/ Apply relative offset (+=\/-=) if specified\n-\t\tadjusted = valueParts[ 1 ] ?\n-\t\t\tinitialInUnit + ( valueParts[ 1 ] + 1 ) * valueParts[ 2 ] :\n-\t\t\t+valueParts[ 2 ];\n-\t\tif ( tween ) {\n-\t\t\ttween.unit = unit;\n-\t\t\ttween.start = initialInUnit;\n-\t\t\ttween.end = adjusted;\n-\t\t}\n-\t}\n-\treturn adjusted;\n-}\n-\n-\n-var defaultDisplayMap = {};\n-\n-function getDefaultDisplay( elem ) {\n-\tvar temp,\n-\t\tdoc = elem.ownerDocument,\n-\t\tnodeName = elem.nodeName,\n-\t\tdisplay = defaultDisplayMap[ nodeName ];\n-\n-\tif ( display ) {\n-\t\treturn display;\n-\t}\n-\n-\ttemp = doc.body.appendChild( doc.createElement( nodeName ) );\n-\tdisplay = jQuery.css( temp, \"display\" );\n-\n-\ttemp.parentNode.removeChild( temp );\n-\n-\tif ( display === \"none\" ) {\n-\t\tdisplay = \"block\";\n-\t}\n-\tdefaultDisplayMap[ nodeName ] = display;\n-\n-\treturn display;\n-}\n-\n-function showHide( elements, show ) {\n-\tvar display, elem,\n-\t\tvalues = [],\n-\t\tindex = 0,\n-\t\tlength = elements.length;\n-\n-\t\/\/ Determine new display value for elements that need to change\n-\tfor ( ; index < length; index++ ) {\n-\t\telem = elements[ index ];\n-\t\tif ( !elem.style ) {\n-\t\t\tcontinue;\n-\t\t}\n-\n-\t\tdisplay = elem.style.display;\n-\t\tif ( show ) {\n-\n-\t\t\t\/\/ Since we force visibility upon cascade-hidden elements, an immediate (and slow)\n-\t\t\t\/\/ check is required in this first loop unless we have a nonempty display value (either\n-\t\t\t\/\/ inline or about-to-be-restored)\n-\t\t\tif ( display === \"none\" ) {\n-\t\t\t\tvalues[ index ] = dataPriv.get( elem, \"display\" ) || null;\n-\t\t\t\tif ( !values[ index ] ) {\n-\t\t\t\t\telem.style.display = \"\";\n-\t\t\t\t}\n-\t\t\t}\n-\t\t\tif ( elem.style.display === \"\" && isHiddenWithinTree( elem ) ) {\n-\t\t\t\tvalues[ index ] = getDefaultDisplay( elem );\n-\t\t\t}\n-\t\t} else {\n-\t\t\tif ( display !== \"none\" ) {\n-\t\t\t\tvalues[ index ] = \"none\";\n-\n-\t\t\t\t\/\/ Remember what we're overwriting\n-\t\t\t\tdataPriv.set( elem, \"display\", display );\n-\t\t\t}\n-\t\t}\n-\t}\n-\n-\t\/\/ Set the display of the elements in a second loop to avoid constant reflow\n-\tfor ( index = 0; index < length; index++ ) {\n-\t\tif ( values[ index ] != null ) {\n-\t\t\telements[ index ].style.display = values[ index ];\n-\t\t}\n-\t}\n-\n-\treturn elements;\n-}\n-\n-jQuery.fn.extend( {\n-\tshow: function() {\n-\t\treturn showHide( this, true );\n-\t},\n-\thide: function() {\n-\t\treturn showHide( this );\n-\t},\n-\ttoggle: function( state ) {\n-\t\tif ( typeof state === \"boolean\" ) {\n-\t\t\treturn state ? this.show() : this.hide();\n-\t\t}\n-\n-\t\treturn this.each( function() {\n-\t\t\tif ( isHiddenWithinTree( this ) ) {\n-\t\t\t\tjQuery( this ).show();\n-\t\t\t} else {\n-\t\t\t\tjQuery( this ).hide();\n-\t\t\t}\n-\t\t} );\n-\t}\n-} );\n-var rcheckableType = ( \/^(?:checkbox|radio)$\/i );\n-\n-var rtagName = ( \/<([a-z][^\\\/\\0>\\x20\\t\\r\\n\\f]*)\/i );\n-\n-var rscriptType = ( \/^$|^module$|\\\/(?:java|ecma)script\/i );\n-\n-\n-\n-( function() {\n-\tvar fragment = document.createDocumentFragment(),\n-\t\tdiv = fragment.appendChild( document.createElement( \"div\" ) ),\n-\t\tinput = document.createElement( \"input\" );\n-\n-\t\/\/ Support: Android 4.0 - 4.3 only\n-\t\/\/ Check state lost if the name is set (trac-11217)\n-\t\/\/ Support: Windows Web Apps (WWA)\n-\t\/\/ `name` and `type` must use .setAttribute for WWA (trac-14901)\n-\tinput.setAttribute( \"type\", \"radio\" );\n-\tinput.setAttribute( \"checked\", \"checked\" );\n-\tinput.setAttribute( \"name\", \"t\" );\n-\n-\tdiv.appendChild( input );\n-\n-\t\/\/ Support: Android <=4.1 only\n-\t\/\/ Older WebKit doesn't clone checked state correctly in fragments\n-\tsupport.checkClone = div.cloneNode( true ).cloneNode( true ).lastChild.checked;\n-\n-\t\/\/ Support: IE <=11 only\n-\t\/\/ Make sure textarea (and checkbox) defaultValue is properly cloned\n-\tdiv.innerHTML = \"<textarea>x<\/textarea>\";\n-\tsupport.noCloneChecked = !!div.cloneNode( true ).lastChild.defaultValue;\n-\n-\t\/\/ Support: IE <=9 only\n-\t\/\/ IE <=9 replaces <option> tags with their contents when inserted outside of\n-\t\/\/ the select element.\n-\tdiv.innerHTML = \"<option><\/option>\";\n-\tsupport.option = !!div.lastChild;\n-} )();\n-\n-\n-\/\/ We have to close these tags to support XHTML (trac-13200)\n-var wrapMap = {\n-\n-\t\/\/ XHTML parsers do not magically insert elements in the\n-\t\/\/ same way that tag soup parsers do. So we cannot shorten\n-\t\/\/ this by omitting <tbody> or other required elements.\n-\tthead: [ 1, \"<table>\", \"<\/table>\" ],\n-\tcol: [ 2, \"<table><colgroup>\", \"<\/colgroup><\/table>\" ],\n-\ttr: [ 2, \"<table><tbody>\", \"<\/tbody><\/table>\" ],\n-\ttd: [ 3, \"<table><tbody><tr>\", \"<\/tr><\/tbody><\/table>\" ],\n-\n-\t_default: [ 0, \"\", \"\" ]\n-};\n-\n-wrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;\n-wrapMap.th = wrapMap.td;\n-\n-\/\/ Support: IE <=9 only\n-if ( !support.option ) {\n-\twrapMap.optgroup = wrapMap.option = [ 1, \"<select multiple='multiple'>\", \"<\/select>\" ];\n-}\n-\n-\n-function getAll( context, tag ) {\n-\n-\t\/\/ Support: IE <=9 - 11 only\n-\t\/\/ Use typeof to avoid zero-argument method invocation on host objects (trac-15151)\n-\tvar ret;\n-\n-\tif ( typeof context.getElementsByTagName !== \"undefined\" ) {\n-\t\tret = context.getElementsByTagName( tag || \"*\" );\n-\n-\t} else if ( typeof context.querySelectorAll !== \"undefined\" ) {\n-\t\tret = context.querySelectorAll( tag || \"*\" );\n-\n-\t} else {\n-\t\tret = [];\n-\t}\n-\n-\tif ( tag === undefined || tag && nodeName( context, tag ) ) {\n-\t\treturn jQuery.merge( [ context ], ret );\n-\t}\n-\n-\treturn ret;\n-}\n-\n-\n-\/\/ Mark scripts as having already been evaluated\n-function setGlobalEval( elems, refElements ) {\n-\tvar i = 0,\n-\t\tl = elems.length;\n-\n-\tfor ( ; i < l; i++ ) {\n-\t\tdataPriv.set(\n-\t\t\telems[ i ],\n-\t\t\t\"globalEval\",\n-\t\t\t!refElements || dataPriv.get( refElements[ i ], \"globalEval\" )\n-\t\t);\n-\t}\n-}\n-\n-\n-var rhtml = \/<|&#?\\w+;\/;\n-\n-function buildFragment( elems, context, scripts, selection, ignored ) {\n-\tvar elem, tmp, tag, wrap, attached, j,\n-\t\tfragment = context.createDocumentFragment(),\n-\t\tnodes = [],\n-\t\ti = 0,\n-\t\tl = elems.length;\n-\n-\tfor ( ; i < l; i++ ) {\n-\t\telem = elems[ i ];\n-\n-\t\tif ( elem || elem === 0 ) {\n-\n-\t\t\t\/\/ Add nodes directly\n-\t\t\tif ( toType( elem ) === \"object\" ) {\n-\n-\t\t\t\t\/\/ Support: Android <=4.0 only, PhantomJS 1 only\n-\t\t\t\t\/\/ push.apply(_, arraylike) throws on ancient WebKit\n-\t\t\t\tjQuery.merge( nodes, elem.nodeType ? [ elem ] : elem );\n-\n-\t\t\t\/\/ Convert non-html into a text node\n-\t\t\t} else if ( !rhtml.test( elem ) ) {\n-\t\t\t\tnodes.push( context.createTextNode( elem ) );\n-\n-\t\t\t\/\/ Convert html into DOM nodes\n-\t\t\t} else {\n-\t\t\t\ttmp = tmp || fragment.appendChild( context.createElement( \"div\" ) );\n-\n-\t\t\t\t\/\/ Deserialize a standard representation\n-\t\t\t\ttag = ( rtagName.exec( elem ) || [ \"\", \"\" ] )[ 1 ].toLowerCase();\n-\t\t\t\twrap = wrapMap[ tag ] || wrapMap._default;\n-\t\t\t\ttmp.innerHTML = wrap[ 1 ] + jQuery.htmlPrefilter( elem ) + wrap[ 2 ];\n-\n-\t\t\t\t\/\/ Descend through wrappers to the right content\n-\t\t\t\tj = wrap[ 0 ];\n-\t\t\t\twhile ( j-- ) {\n-\t\t\t\t\ttmp = tmp.lastChild;\n-\t\t\t\t}\n-\n-\t\t\t\t\/\/ Support: Android <=4.0 only, PhantomJS 1 only\n-\t\t\t\t\/\/ push.apply(_, arraylike) throws on ancient WebKit\n-\t\t\t\tjQuery.merge( nodes, tmp.childNodes );\n-\n-\t\t\t\t\/\/ Remember the top-level container\n-\t\t\t\ttmp = fragment.firstChild;\n-\n-\t\t\t\t\/\/ Ensure the created nodes are orphaned (trac-12392)\n-\t\t\t\ttmp.textContent = \"\";\n-\t\t\t}\n-\t\t}\n-\t}\n-\n-\t\/\/ Remove wrapper from fragment\n-\tfragment.textContent = \"\";\n-\n-\ti = 0;\n-\twhile ( ( elem = nodes[ i++ ] ) ) {\n-\n-\t\t\/\/ Skip elements already in the context collection (trac-4087)\n-\t\tif ( selection && jQuery.inArray( elem, selection ) > -1 ) {\n-\t\t\tif ( ignored ) {\n-\t\t\t\tignored.push( elem );\n-\t\t\t}\n-\t\t\tcontinue;\n-\t\t}\n-\n-\t\tattached = isAttached( elem );\n-\n-\t\t\/\/ Append to fragment\n-\t\ttmp = getAll( fragment.appendChild( elem ), \"script\" );\n-\n-\t\t\/\/ Preserve script evaluation history\n-\t\tif ( attached ) {\n-\t\t\tsetGlobalEval( tmp );\n-\t\t}\n-\n-\t\t\/\/ Capture executables\n-\t\tif ( scripts ) {\n-\t\t\tj = 0;\n-\t\t\twhile ( ( elem = tmp[ j++ ] ) ) {\n-\t\t\t\tif ( rscriptType.test( elem.type || \"\" ) ) {\n-\t\t\t\t\tscripts.push( elem );\n-\t\t\t\t}\n-\t\t\t}\n-\t\t}\n-\t}\n-\n-\treturn fragment;\n-}\n-\n-\n-var rtypenamespace = \/^([^.]*)(?:\\.(.+)|)\/;\n-\n-function returnTrue() {\n-\treturn true;\n-}\n-\n-function returnFalse() {\n-\treturn false;\n-}\n-\n-\/\/ Support: IE <=9 - 11+\n-\/\/ focus() and blur() are asynchronous, except when they are no-op.\n-\/\/ So expect focus to be synchronous when the element is already active,\n-\/\/ and blur to be synchronous when the element is not already active.\n-\/\/ (focus and blur are always synchronous in other supported browsers,\n-\/\/ this just defines when we can count on it).\n-function expectSync( elem, type ) {\n-\treturn ( elem === safeActiveElement() ) === ( type === \"focus\" );\n-}\n-\n-\/\/ Support: IE <=9 only\n-\/\/ Accessing document.activeElement can throw unexpectedly\n-\/\/ https:\/\/bugs.jquery.com\/ticket\/13393\n-function safeActiveElement() {\n-\ttry {\n-\t\treturn document.activeElement;\n-\t} catch ( err ) { }\n-}\n-\n-function on( elem, types, selector, data, fn, one ) {\n-\tvar origFn, type;\n-\n-\t\/\/ Types can be a map of types\/handlers\n-\tif ( typeof types === \"object\" ) {\n-\n-\t\t\/\/ ( types-Object, selector, data )\n-\t\tif ( typeof selector !== \"string\" ) {\n-\n-\t\t\t\/\/ ( types-Object, data )\n-\t\t\tdata = data || selector;\n-\t\t\tselector = undefined;\n-\t\t}\n-\t\tfor ( type in types ) {\n-\t\t\ton( elem, type, selector, data, types[ type ], one );\n-\t\t}\n-\t\treturn elem;\n-\t}\n-\n-\tif ( data == null && fn == null ) {\n-\n-\t\t\/\/ ( types, fn )\n-\t\tfn = selector;\n-\t\tdata = selector = undefined;\n-\t} else if ( fn == null ) {\n-\t\tif ( typeof selector === \"string\" ) {\n-\n-\t\t\t\/\/ ( types, selector, fn )\n-\t\t\tfn = data;\n-\t\t\tdata = undefined;\n-\t\t} else {\n-\n-\t\t\t\/\/ ( types, data, fn )\n-\t\t\tfn = data;\n-\t\t\tdata = selector;\n-\t\t\tselector = undefined;\n-\t\t}\n-\t}\n-\tif ( fn === false ) {\n-\t\tfn = returnFalse;\n-\t} else if ( !fn ) {\n-\t\treturn elem;\n-\t}\n-\n-\tif ( one === 1 ) {\n-\t\torigFn = fn;\n-\t\tfn = function( event ) {\n-\n-\t\t\t\/\/ Can use an empty set, since event contains the info\n-\t\t\tjQuery().off( event );\n-\t\t\treturn origFn.apply( this, arguments );\n-\t\t};\n-\n-\t\t\/\/ Use same guid so caller can remove using origFn\n-\t\tfn.guid = origFn.guid || ( origFn.guid = jQuery.guid++ );\n-\t}\n-\treturn elem.each( function() {\n-\t\tjQuery.event.add( this, types, fn, data, selector );\n-\t} );\n-}\n-\n-\/*\n- * Helper functions for managing events -- not part of the public interface.\n- * Props to Dean Edwards' addEvent library for many of the ideas.\n- *\/\n-jQuery.event = {\n-\n-\tglobal: {},\n-\n-\tadd: function( elem, types, handler, data, selector ) {\n-\n-\t\tvar handleObjIn, eventHandle, tmp,\n-\t\t\tevents, t, handleObj,\n-\t\t\tspecial, handlers, type, namespaces, origType,\n-\t\t\telemData = dataPriv.get( elem );\n-\n-\t\t\/\/ Only attach events to objects that accept data\n-\t\tif ( !acceptData( elem ) ) {\n-\t\t\treturn;\n-\t\t}\n-\n-\t\t\/\/ Caller can pass in an object of custom data in lieu of the handler\n-\t\tif ( handler.handler ) {\n-\t\t\thandleObjIn = handler;\n-\t\t\thandler = handleObjIn.handler;\n-\t\t\tselector = handleObjIn.selector;\n-\t\t}\n-\n-\t\t\/\/ Ensure that invalid selectors throw exceptions at attach time\n-\t\t\/\/ Evaluate against documentElement in case elem is a non-element node (e.g., document)\n-\t\tif ( selector ) {\n-\t\t\tjQuery.find.matchesSelector( documentElement, selector );\n-\t\t}\n-\n-\t\t\/\/ Make sure that the handler has a unique ID, used to find\/remove it later\n-\t\tif ( !handler.guid ) {\n-\t\t\thandler.guid = jQuery.guid++;\n-\t\t}\n-\n-\t\t\/\/ Init the element's event structure and main handler, if this is the first\n-\t\tif ( !( events = elemData.events ) ) {\n-\t\t\tevents = elemData.events = Object.create( null );\n-\t\t}\n-\t\tif ( !( eventHandle = elemData.handle ) ) {\n-\t\t\teventHandle = elemData.handle = function( e ) {\n-\n-\t\t\t\t\/\/ Discard the second event of a jQuery.event.trigger() and\n-\t\t\t\t\/\/ when an event is called after a page has unloaded\n-\t\t\t\treturn typeof jQuery !== \"undefined\" && jQuery.event.triggered !== e.type ?\n-\t\t\t\t\tjQuery.event.dispatch.apply( elem, arguments ) : undefined;\n-\t\t\t};\n-\t\t}\n-\n-\t\t\/\/ Handle multiple events separated by a space\n-\t\ttypes = ( types || \"\" ).match( rnothtmlwhite ) || [ \"\" ];\n-\t\tt = types.length;\n-\t\twhile ( t-- ) {\n-\t\t\ttmp = rtypenamespace.exec( types[ t ] ) || [];\n-\t\t\ttype = origType = tmp[ 1 ];\n-\t\t\tnamespaces = ( tmp[ 2 ] || \"\" ).split( \".\" ).sort();\n-\n-\t\t\t\/\/ There *must* be a type, no attaching namespace-only handlers\n-\t\t\tif ( !type ) {\n-\t\t\t\tcontinue;\n-\t\t\t}\n-\n-\t\t\t\/\/ If event changes its type, use the special event handlers for the changed type\n-\t\t\tspecial = jQuery.event.special[ type ] || {};\n-\n-\t\t\t\/\/ If selector defined, determine special event api type, otherwise given type\n-\t\t\ttype = ( selector ? special.delegateType : special.bindType ) || type;\n-\n-\t\t\t\/\/ Update special based on newly reset type\n-\t\t\tspecial = jQuery.event.special[ type ] || {};\n-\n-\t\t\t\/\/ handleObj is passed to all event handlers\n-\t\t\thandleObj = jQuery.extend( {\n-\t\t\t\ttype: type,\n-\t\t\t\torigType: origType,\n-\t\t\t\tdata: data,\n-\t\t\t\thandler: handler,\n-\t\t\t\tguid: handler.guid,\n-\t\t\t\tselector: selector,\n-\t\t\t\tneedsContext: selector && jQuery.expr.match.needsContext.test( selector ),\n-\t\t\t\tnamespace: namespaces.join( \".\" )\n-\t\t\t}, handleObjIn );\n-\n-\t\t\t\/\/ Init the event handler queue if we're the first\n-\t\t\tif ( !( handlers = events[ type ] ) ) {\n-\t\t\t\thandlers = events[ type ] = [];\n-\t\t\t\thandlers.delegateCount = 0;\n-\n-\t\t\t\t\/\/ Only use addEventListener if the special events handler returns false\n-\t\t\t\tif ( !special.setup ||\n-\t\t\t\t\tspecial.setup.call( elem, data, namespaces, eventHandle ) === false ) {\n-\n-\t\t\t\t\tif ( elem.addEventListener ) {\n-\t\t\t\t\t\telem.addEventListener( type, eventHandle );\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t}\n-\n-\t\t\tif ( special.add ) {\n-\t\t\t\tspecial.add.call( elem, handleObj );\n-\n-\t\t\t\tif ( !handleObj.handler.guid ) {\n-\t\t\t\t\thandleObj.handler.guid = handler.guid;\n-\t\t\t\t}\n-\t\t\t}\n-\n-\t\t\t\/\/ Add to the element's handler list, delegates in front\n-\t\t\tif ( selector ) {\n-\t\t\t\thandlers.splice( handlers.delegateCount++, 0, handleObj );\n-\t\t\t} else {\n-\t\t\t\thandlers.push( handleObj );\n-\t\t\t}\n-\n-\t\t\t\/\/ Keep track of which events have ever been used, for event optimization\n-\t\t\tjQuery.event.global[ type ] = true;\n-\t\t}\n-\n-\t},\n-\n-\t\/\/ Detach an event or set of events from an element\n-\tremove: function( elem, types, handler, selector, mappedTypes ) {\n-\n-\t\tvar j, origCount, tmp,\n-\t\t\tevents, t, handleObj,\n-\t\t\tspecial, handlers, type, namespaces, origType,\n-\t\t\telemData = dataPriv.hasData( elem ) && dataPriv.get( elem );\n-\n-\t\tif ( !elemData || !( events = elemData.events ) ) {\n-\t\t\treturn;\n-\t\t}\n-\n-\t\t\/\/ Once for each type.namespace in types; type may be omitted\n-\t\ttypes = ( types || \"\" ).match( rnothtmlwhite ) || [ \"\" ];\n-\t\tt = types.length;\n-\t\twhile ( t-- ) {\n-\t\t\ttmp = rtypenamespace.exec( types[ t ] ) || [];\n-\t\t\ttype = origType = tmp[ 1 ];\n-\t\t\tnamespaces = ( tmp[ 2 ] || \"\" ).split( \".\" ).sort();\n-\n-\t\t\t\/\/ Unbind all events (on this namespace, if provided) for the element\n-\t\t\tif ( !type ) {\n-\t\t\t\tfor ( type in events ) {\n-\t\t\t\t\tjQuery.event.remove( elem, type + types[ t ], handler, selector, true );\n-\t\t\t\t}\n-\t\t\t\tcontinue;\n-\t\t\t}\n-\n-\t\t\tspecial = jQuery.event.special[ type ] || {};\n-\t\t\ttype = ( selector ? special.delegateType : special.bindType ) || type;\n-\t\t\thandlers = events[ type ] || [];\n-\t\t\ttmp = tmp[ 2 ] &&\n-\t\t\t\tnew RegExp( \"(^|\\\\.)\" + namespaces.join( \"\\\\.(?:.*\\\\.|)\" ) + \"(\\\\.|$)\" );\n-\n-\t\t\t\/\/ Remove matching events\n-\t\t\torigCount = j = handlers.length;\n-\t\t\twhile ( j-- ) {\n-\t\t\t\thandleObj = handlers[ j ];\n-\n-\t\t\t\tif ( ( mappedTypes || origType === handleObj.origType ) &&\n-\t\t\t\t\t( !handler || handler.guid === handleObj.guid ) &&\n-\t\t\t\t\t( !tmp || tmp.test( handleObj.namespace ) ) &&\n-\t\t\t\t\t( !selector || selector === handleObj.selector ||\n-\t\t\t\t\t\tselector === \"**\" && handleObj.selector ) ) {\n-\t\t\t\t\thandlers.splice( j, 1 );\n-\n-\t\t\t\t\tif ( handleObj.selector ) {\n-\t\t\t\t\t\thandlers.delegateCount--;\n-\t\t\t\t\t}\n-\t\t\t\t\tif ( special.remove ) {\n-\t\t\t\t\t\tspecial.remove.call( elem, handleObj );\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t}\n-\n-\t\t\t\/\/ Remove generic event handler if we removed something and no more handlers exist\n-\t\t\t\/\/ (avoids potential for endless recursion during removal of special event handlers)\n-\t\t\tif ( origCount && !handlers.length ) {\n-\t\t\t\tif ( !special.teardown ||\n-\t\t\t\t\tspecial.teardown.call( elem, namespaces, elemData.handle ) === false ) {\n-\n-\t\t\t\t\tjQuery.removeEvent( elem, type, elemData.handle );\n-\t\t\t\t}\n-\n-\t\t\t\tdelete events[ type ];\n-\t\t\t}\n-\t\t}\n-\n-\t\t\/\/ Remove data and the expando if it's no longer used\n-\t\tif ( jQuery.isEmptyObject( events ) ) {\n-\t\t\tdataPriv.remove( elem, \"handle events\" );\n-\t\t}\n-\t},\n-\n-\tdispatch: function( nativeEvent ) {\n-\n-\t\tvar i, j, ret, matched, handleObj, handlerQueue,\n-\t\t\targs = new Array( arguments.length ),\n-\n-\t\t\t\/\/ Make a writable jQuery.Event from the native event object\n-\t\t\tevent = jQuery.event.fix( nativeEvent ),\n-\n-\t\t\thandlers = (\n-\t\t\t\tdataPriv.get( this, \"events\" ) || Object.create( null )\n-\t\t\t)[ event.type ] || [],\n-\t\t\tspecial = jQuery.event.special[ event.type ] || {};\n-\n-\t\t\/\/ Use the fix-ed jQuery.Event rather than the (read-only) native event\n-\t\targs[ 0 ] = event;\n-\n-\t\tfor ( i = 1; i < arguments.length; i++ ) {\n-\t\t\targs[ i ] = arguments[ i ];\n-\t\t}\n-\n-\t\tevent.delegateTarget = this;\n-\n-\t\t\/\/ Call the preDispatch hook for the mapped type, and let it bail if desired\n-\t\tif ( special.preDispatch && special.preDispatch.call( this, event ) === false ) {\n-\t\t\treturn;\n-\t\t}\n-\n-\t\t\/\/ Determine handlers\n-\t\thandlerQueue = jQuery.event.handlers.call( this, event, handlers );\n-\n-\t\t\/\/ Run delegates first; they may want to stop propagation beneath us\n-\t\ti = 0;\n-\t\twhile ( ( matched = handlerQueue[ i++ ] ) && !event.isPropagationStopped() ) {\n-\t\t\tevent.currentTarget = matched.elem;\n-\n-\t\t\tj = 0;\n-\t\t\twhile ( ( handleObj = matched.handlers[ j++ ] ) &&\n-\t\t\t\t!event.isImmediatePropagationStopped() ) {\n-\n-\t\t\t\t\/\/ If the event is namespaced, then each handler is only invoked if it is\n-\t\t\t\t\/\/ specially universal or its namespaces are a superset of the event's.\n-\t\t\t\tif ( !event.rnamespace || handleObj.namespace === false ||\n-\t\t\t\t\tevent.rnamespace.test( handleObj.namespace ) ) {\n-\n-\t\t\t\t\tevent.handleObj = handleObj;\n-\t\t\t\t\tevent.data = handleObj.data;\n-\n-\t\t\t\t\tret = ( ( jQuery.event.special[ handleObj.origType ] || {} ).handle ||\n-\t\t\t\t\t\thandleObj.handler ).apply( matched.elem, args );\n-\n-\t\t\t\t\tif ( ret !== undefined ) {\n-\t\t\t\t\t\tif ( ( event.result = ret ) === false ) {\n-\t\t\t\t\t\t\tevent.preventDefault();\n-\t\t\t\t\t\t\tevent.stopPropagation();\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t}\n-\t\t}\n-\n-\t\t\/\/ Call the postDispatch hook for the mapped type\n-\t\tif ( special.postDispatch ) {\n-\t\t\tspecial.postDispatch.call( this, event );\n-\t\t}\n-\n-\t\treturn event.result;\n-\t},\n-\n-\thandlers: function( event, handlers ) {\n-\t\tvar i, handleObj, sel, matchedHandlers, matchedSelectors,\n-\t\t\thandlerQueue = [],\n-\t\t\tdelegateCount = handlers.delegateCount,\n-\t\t\tcur = event.target;\n-\n-\t\t\/\/ Find delegate handlers\n-\t\tif ( delegateCount &&\n-\n-\t\t\t\/\/ Support: IE <=9\n-\t\t\t\/\/ Black-hole SVG <use> instance trees (trac-13180)\n-\t\t\tcur.nodeType &&\n-\n-\t\t\t\/\/ Support: Firefox <=42\n-\t\t\t\/\/ Suppress spec-violating clicks indicating a non-primary pointer button (trac-3861)\n-\t\t\t\/\/ https:\/\/www.w3.org\/TR\/DOM-Level-3-Events\/#event-type-click\n-\t\t\t\/\/ Support: IE 11 only\n-\t\t\t\/\/ ...but not arrow key \"clicks\" of radio inputs, which can have `button` -1 (gh-2343)\n-\t\t\t!( event.type === \"click\" && event.button >= 1 ) ) {\n-\n-\t\t\tfor ( ; cur !== this; cur = cur.parentNode || this ) {\n-\n-\t\t\t\t\/\/ Don't check non-elements (trac-13208)\n-\t\t\t\t\/\/ Don't process clicks on disabled elements (trac-6911, trac-8165, trac-11382, trac-11764)\n-\t\t\t\tif ( cur.nodeType === 1 && !( event.type === \"click\" && cur.disabled === true ) ) {\n-\t\t\t\t\tmatchedHandlers = [];\n-\t\t\t\t\tmatchedSelectors = {};\n-\t\t\t\t\tfor ( i = 0; i < delegateCount; i++ ) {\n-\t\t\t\t\t\thandleObj = handlers[ i ];\n-\n-\t\t\t\t\t\t\/\/ Don't conflict with Object.prototype properties (trac-13203)\n-\t\t\t\t\t\tsel = handleObj.selector + \" \";\n-\n-\t\t\t\t\t\tif ( matchedSelectors[ sel ] === undefined ) {\n-\t\t\t\t\t\t\tmatchedSelectors[ sel ] = handleObj.needsContext ?\n-\t\t\t\t\t\t\t\tjQuery( sel, this ).index( cur ) > -1 :\n-\t\t\t\t\t\t\t\tjQuery.find( sel, this, null, [ cur ] ).length;\n-\t\t\t\t\t\t}\n-\t\t\t\t\t\tif ( matchedSelectors[ sel ] ) {\n-\t\t\t\t\t\t\tmatchedHandlers.push( handleObj );\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\t\t\t\t\tif ( matchedHandlers.length ) {\n-\t\t\t\t\t\thandlerQueue.push( { elem: cur, handlers: matchedHandlers } );\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t}\n-\t\t}\n-\n-\t\t\/\/ Add the remaining (directly-bound) handlers\n-\t\tcur = this;\n-\t\tif ( delegateCount < handlers.length ) {\n-\t\t\thandlerQueue.push( { elem: cur, handlers: handlers.slice( delegateCount ) } );\n-\t\t}\n-\n-\t\treturn handlerQueue;\n-\t},\n-\n-\taddProp: function( name, hook ) {\n-\t\tObject.defineProperty( jQuery.Event.prototype, name, {\n-\t\t\tenumerable: true,\n-\t\t\tconfigurable: true,\n-\n-\t\t\tget: isFunction( hook ) ?\n-\t\t\t\tfunction() {\n-\t\t\t\t\tif ( this.originalEvent ) {\n-\t\t\t\t\t\treturn hook( this.originalEvent );\n-\t\t\t\t\t}\n-\t\t\t\t} :\n-\t\t\t\tfunction() {\n-\t\t\t\t\tif ( this.originalEvent ) {\n-\t\t\t\t\t\treturn this.originalEvent[ name ];\n-\t\t\t\t\t}\n-\t\t\t\t},\n-\n-\t\t\tset: function( value ) {\n-\t\t\t\tObject.defineProperty( this, name, {\n-\t\t\t\t\tenumerable: true,\n-\t\t\t\t\tconfigurable: true,\n-\t\t\t\t\twritable: true,\n-\t\t\t\t\tvalue: value\n-\t\t\t\t} );\n-\t\t\t}\n-\t\t} );\n-\t},\n-\n-\tfix: function( originalEvent ) {\n-\t\treturn originalEvent[ jQuery.expando ] ?\n-\t\t\toriginalEvent :\n-\t\t\tnew jQuery.Event( originalEvent );\n-\t},\n-\n-\tspecial: {\n-\t\tload: {\n-\n-\t\t\t\/\/ Prevent triggered image.load events from bubbling to window.load\n-\t\t\tnoBubble: true\n-\t\t},\n-\t\tclick: {\n-\n-\t\t\t\/\/ Utilize native event to ensure correct state for checkable inputs\n-\t\t\tsetup: function( data ) {\n-\n-\t\t\t\t\/\/ For mutual compressibility with _default, replace `this` access with a local var.\n-\t\t\t\t\/\/ `|| data` is dead code meant only to preserve the variable through minification.\n-\t\t\t\tvar el = this || data;\n-\n-\t\t\t\t\/\/ Claim the first handler\n-\t\t\t\tif ( rcheckableType.test( el.type ) &&\n-\t\t\t\t\tel.click && nodeName( el, \"input\" ) ) {\n-\n-\t\t\t\t\t\/\/ dataPriv.set( el, \"click\", ... )\n-\t\t\t\t\tleverageNative( el, \"click\", returnTrue );\n-\t\t\t\t}\n-\n-\t\t\t\t\/\/ Return false to allow normal processing in the caller\n-\t\t\t\treturn false;\n-\t\t\t},\n-\t\t\ttrigger: function( data ) {\n-\n-\t\t\t\t\/\/ For mutual compressibility with _default, replace `this` access with a local var.\n-\t\t\t\t\/\/ `|| data` is dead code meant only to preserve the variable through minification.\n-\t\t\t\tvar el = this || data;\n-\n-\t\t\t\t\/\/ Force setup before triggering a click\n-\t\t\t\tif ( rcheckableType.test( el.type ) &&\n-\t\t\t\t\tel.click && nodeName( el, \"input\" ) ) {\n-\n-\t\t\t\t\tleverageNative( el, \"click\" );\n-\t\t\t\t}\n-\n-\t\t\t\t\/\/ Return non-false to allow normal event-path propagation\n-\t\t\t\treturn true;\n-\t\t\t},\n-\n-\t\t\t\/\/ For cross-browser consistency, suppress native .click() on links\n-\t\t\t\/\/ Also prevent it if we're currently inside a leveraged native-event stack\n-\t\t\t_default: function( event ) {\n-\t\t\t\tvar target = event.target;\n-\t\t\t\treturn rcheckableType.test( target.type ) &&\n-\t\t\t\t\ttarget.click && nodeName( target, \"input\" ) &&\n-\t\t\t\t\tdataPriv.get( target, \"click\" ) ||\n-\t\t\t\t\tnodeName( target, \"a\" );\n-\t\t\t}\n-\t\t},\n-\n-\t\tbeforeunload: {\n-\t\t\tpostDispatch: function( event ) {\n-\n-\t\t\t\t\/\/ Support: Firefox 20+\n-\t\t\t\t\/\/ Firefox doesn't alert if the returnValue field is not set.\n-\t\t\t\tif ( event.result !== undefined && event.originalEvent ) {\n-\t\t\t\t\tevent.originalEvent.returnValue = event.result;\n-\t\t\t\t}\n-\t\t\t}\n-\t\t}\n-\t}\n-};\n-\n-\/\/ Ensure the presence of an event listener that handles manually-triggered\n-\/\/ synthetic events by interrupting progress until reinvoked in response to\n-\/\/ *native* events that it fires directly, ensuring that state changes have\n-\/\/ already occurred before other listeners are invoked.\n-function leverageNative( el, type, expectSync ) {\n-\n-\t\/\/ Missing expectSync indicates a trigger call, which must force setup through jQuery.event.add\n-\tif ( !expectSync ) {\n-\t\tif ( dataPriv.get( el, type ) === undefined ) {\n-\t\t\tjQuery.event.add( el, type, returnTrue );\n-\t\t}\n-\t\treturn;\n-\t}\n-\n-\t\/\/ Register the controller as a special universal handler for all event namespaces\n-\tdataPriv.set( el, type, false );\n-\tjQuery.event.add( el, type, {\n-\t\tnamespace: false,\n-\t\thandler: function( event ) {\n-\t\t\tvar notAsync, result,\n-\t\t\t\tsaved = dataPriv.get( this, type );\n-\n-\t\t\tif ( ( event.isTrigger & 1 ) && this[ type ] ) {\n-\n-\t\t\t\t\/\/ Interrupt processing of the outer synthetic .trigger()ed event\n-\t\t\t\t\/\/ Saved data should be false in such cases, but might be a leftover capture object\n-\t\t\t\t\/\/ from an async native handler (gh-4350)\n-\t\t\t\tif ( !saved.length ) {\n-\n-\t\t\t\t\t\/\/ Store arguments for use when handling the inner native event\n-\t\t\t\t\t\/\/ There will always be at least one argument (an event object), so this array\n-\t\t\t\t\t\/\/ will not be confused with a leftover capture object.\n-\t\t\t\t\tsaved = slice.call( arguments );\n-\t\t\t\t\tdataPriv.set( this, type, saved );\n-\n-\t\t\t\t\t\/\/ Trigger the native event and capture its result\n-\t\t\t\t\t\/\/ Support: IE <=9 - 11+\n-\t\t\t\t\t\/\/ focus() and blur() are asynchronous\n-\t\t\t\t\tnotAsync = expectSync( this, type );\n-\t\t\t\t\tthis[ type ]();\n-\t\t\t\t\tresult = dataPriv.get( this, type );\n-\t\t\t\t\tif ( saved !== result || notAsync ) {\n-\t\t\t\t\t\tdataPriv.set( this, type, false );\n-\t\t\t\t\t} else {\n-\t\t\t\t\t\tresult = {};\n-\t\t\t\t\t}\n-\t\t\t\t\tif ( saved !== result ) {\n-\n-\t\t\t\t\t\t\/\/ Cancel the outer synthetic event\n-\t\t\t\t\t\tevent.stopImmediatePropagation();\n-\t\t\t\t\t\tevent.preventDefault();\n-\n-\t\t\t\t\t\t\/\/ Support: Chrome 86+\n-\t\t\t\t\t\t\/\/ In Chrome, if an element having a focusout handler is blurred by\n-\t\t\t\t\t\t\/\/ clicking outside of it, it invokes the handler synchronously. If\n-\t\t\t\t\t\t\/\/ that handler calls `.remove()` on the element, the data is cleared,\n-\t\t\t\t\t\t\/\/ leaving `result` undefined. We need to guard against this.\n-\t\t\t\t\t\treturn result && result.value;\n-\t\t\t\t\t}\n-\n-\t\t\t\t\/\/ If this is an inner synthetic event for an event with a bubbling surrogate\n-\t\t\t\t\/\/ (focus or blur), assume that the surrogate already propagated from triggering the\n-\t\t\t\t\/\/ native event and prevent that from happening again here.\n-\t\t\t\t\/\/ This technically gets the ordering wrong w.r.t. to `.trigger()` (in which the\n-\t\t\t\t\/\/ bubbling surrogate propagates *after* the non-bubbling base), but that seems\n-\t\t\t\t\/\/ less bad than duplication.\n-\t\t\t\t} else if ( ( jQuery.event.special[ type ] || {} ).delegateType ) {\n-\t\t\t\t\tevent.stopPropagation();\n-\t\t\t\t}\n-\n-\t\t\t\/\/ If this is a native event triggered above, everything is now in order\n-\t\t\t\/\/ Fire an inner synthetic event with the original arguments\n-\t\t\t} else if ( saved.length ) {\n-\n-\t\t\t\t\/\/ ...and capture the result\n-\t\t\t\tdataPriv.set( this, type, {\n-\t\t\t\t\tvalue: jQuery.event.trigger(\n-\n-\t\t\t\t\t\t\/\/ Support: IE <=9 - 11+\n-\t\t\t\t\t\t\/\/ Extend with the prototype to reset the above stopImmediatePropagation()\n-\t\t\t\t\t\tjQuery.extend( saved[ 0 ], jQuery.Event.prototype ),\n-\t\t\t\t\t\tsaved.slice( 1 ),\n-\t\t\t\t\t\tthis\n-\t\t\t\t\t)\n-\t\t\t\t} );\n-\n-\t\t\t\t\/\/ Abort handling of the native event\n-\t\t\t\tevent.stopImmediatePropagation();\n-\t\t\t}\n-\t\t}\n-\t} );\n-}\n-\n-jQuery.removeEvent = function( elem, type, handle ) {\n-\n-\t\/\/ This \"if\" is needed for plain objects\n-\tif ( elem.removeEventListener ) {\n-\t\telem.removeEventListener( type, handle );\n-\t}\n-};\n-\n-jQuery.Event = function( src, props ) {\n-\n-\t\/\/ Allow instantiation without the 'new' keyword\n-\tif ( !( this instanceof jQuery.Event ) ) {\n-\t\treturn new jQuery.Event( src, props );\n-\t}\n-\n-\t\/\/ Event object\n-\tif ( src && src.type ) {\n-\t\tthis.originalEvent = src;\n-\t\tthis.type = src.type;\n-\n-\t\t\/\/ Events bubbling up the document may have been marked as prevented\n-\t\t\/\/ by a handler lower down the tree; reflect the correct value.\n-\t\tthis.isDefaultPrevented = src.defaultPrevented ||\n-\t\t\t\tsrc.defaultPrevented === undefined &&\n-\n-\t\t\t\t\/\/ Support: Android <=2.3 only\n-\t\t\t\tsrc.returnValue === false ?\n-\t\t\treturnTrue :\n-\t\t\treturnFalse;\n-\n-\t\t\/\/ Create target properties\n-\t\t\/\/ Support: Safari <=6 - 7 only\n-\t\t\/\/ Target should not be a text node (trac-504, trac-13143)\n-\t\tthis.target = ( src.target && src.target.nodeType === 3 ) ?\n-\t\t\tsrc.target.parentNode :\n-\t\t\tsrc.target;\n-\n-\t\tthis.currentTarget = src.currentTarget;\n-\t\tthis.relatedTarget = src.relatedTarget;\n-\n-\t\/\/ Event type\n-\t} else {\n-\t\tthis.type = src;\n-\t}\n-\n-\t\/\/ Put explicitly provided properties onto the event object\n-\tif ( props ) {\n-\t\tjQuery.extend( this, props );\n-\t}\n-\n-\t\/\/ Create a timestamp if incoming event doesn't have one\n-\tthis.timeStamp = src && src.timeStamp || Date.now();\n-\n-\t\/\/ Mark it as fixed\n-\tthis[ jQuery.expando ] = true;\n-};\n-\n-\/\/ jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding\n-\/\/ https:\/\/www.w3.org\/TR\/2003\/WD-DOM-Level-3-Events-20030331\/ecma-script-binding.html\n-jQuery.Event.prototype = {\n-\tconstructor: jQuery.Event,\n-\tisDefaultPrevented: returnFalse,\n-\tisPropagationStopped: returnFalse,\n-\tisImmediatePropagationStopped: returnFalse,\n-\tisSimulated: false,\n-\n-\tpreventDefault: function() {\n-\t\tvar e = this.originalEvent;\n-\n-\t\tthis.isDefaultPrevented = returnTrue;\n-\n-\t\tif ( e && !this.isSimulated ) {\n-\t\t\te.preventDefault();\n-\t\t}\n-\t},\n-\tstopPropagation: function() {\n-\t\tvar e = this.originalEvent;\n-\n-\t\tthis.isPropagationStopped = returnTrue;\n-\n-\t\tif ( e && !this.isSimulated ) {\n-\t\t\te.stopPropagation();\n-\t\t}\n-\t},\n-\tstopImmediatePropagation: function() {\n-\t\tvar e = this.originalEvent;\n-\n-\t\tthis.isImmediatePropagationStopped = returnTrue;\n-\n-\t\tif ( e && !this.isSimulated ) {\n-\t\t\te.stopImmediatePropagation();\n-\t\t}\n-\n-\t\tthis.stopPropagation();\n-\t}\n-};\n-\n-\/\/ Includes all common event props including KeyEvent and MouseEvent specific props\n-jQuery.each( {\n-\taltKey: true,\n-\tbubbles: true,\n-\tcancelable: true,\n-\tchangedTouches: true,\n-\tctrlKey: true,\n-\tdetail: true,\n-\teventPhase: true,\n-\tmetaKey: true,\n-\tpageX: true,\n-\tpageY: true,\n-\tshiftKey: true,\n-\tview: true,\n-\t\"char\": true,\n-\tcode: true,\n-\tcharCode: true,\n-\tkey: true,\n-\tkeyCode: true,\n-\tbutton: true,\n-\tbuttons: true,\n-\tclientX: true,\n-\tclientY: true,\n-\toffsetX: true,\n-\toffsetY: true,\n-\tpointerId: true,\n-\tpointerType: true,\n-\tscreenX: true,\n-\tscreenY: true,\n-\ttargetTouches: true,\n-\ttoElement: true,\n-\ttouches: true,\n-\twhich: true\n-}, jQuery.event.addProp );\n-\n-jQuery.each( { focus: \"focusin\", blur: \"focusout\" }, function( type, delegateType ) {\n-\tjQuery.event.special[ type ] = {\n-\n-\t\t\/\/ Utilize native event if possible so blur\/focus sequence is correct\n-\t\tsetup: function() {\n-\n-\t\t\t\/\/ Claim the first handler\n-\t\t\t\/\/ dataPriv.set( this, \"focus\", ... )\n-\t\t\t\/\/ dataPriv.set( this, \"blur\", ... )\n-\t\t\tleverageNative( this, type, expectSync );\n-\n-\t\t\t\/\/ Return false to allow normal processing in the caller\n-\t\t\treturn false;\n-\t\t},\n-\t\ttrigger: function() {\n-\n-\t\t\t\/\/ Force setup before trigger\n-\t\t\tleverageNative( this, type );\n-\n-\t\t\t\/\/ Return non-false to allow normal event-path propagation\n-\t\t\treturn true;\n-\t\t},\n-\n-\t\t\/\/ Suppress native focus or blur if we're currently inside\n-\t\t\/\/ a leveraged native-event stack\n-\t\t_default: function( event ) {\n-\t\t\treturn dataPriv.get( event.target, type );\n-\t\t},\n-\n-\t\tdelegateType: delegateType\n-\t};\n-} );\n-\n-\/\/ Create mouseenter\/leave events using mouseover\/out and event-time checks\n-\/\/ so that event delegation works in jQuery.\n-\/\/ Do the same for pointerenter\/pointerleave and pointerover\/pointerout\n-\/\/\n-\/\/ Support: Safari 7 only\n-\/\/ Safari sends mouseenter too often; see:\n-\/\/ https:\/\/bugs.chromium.org\/p\/chromium\/issues\/detail?id=470258\n-\/\/ for the description of the bug (it existed in older Chrome versions as well).\n-jQuery.each( {\n-\tmouseenter: \"mouseover\",\n-\tmouseleave: \"mouseout\",\n-\tpointerenter: \"pointerover\",\n-\tpointerleave: \"pointerout\"\n-}, function( orig, fix ) {\n-\tjQuery.event.special[ orig ] = {\n-\t\tdelegateType: fix,\n-\t\tbindType: fix,\n-\n-\t\thandle: function( event ) {\n-\t\t\tvar ret,\n-\t\t\t\ttarget = this,\n-\t\t\t\trelated = event.relatedTarget,\n-\t\t\t\thandleObj = event.handleObj;\n-\n-\t\t\t\/\/ For mouseenter\/leave call the handler if related is outside the target.\n-\t\t\t\/\/ NB: No relatedTarget if the mouse left\/entered the browser window\n-\t\t\tif ( !related || ( related !== target && !jQuery.contains( target, related ) ) ) {\n-\t\t\t\tevent.type = handleObj.origType;\n-\t\t\t\tret = handleObj.handler.apply( this, arguments );\n-\t\t\t\tevent.type = fix;\n-\t\t\t}\n-\t\t\treturn ret;\n-\t\t}\n-\t};\n-} );\n-\n-jQuery.fn.extend( {\n-\n-\ton: function( types, selector, data, fn ) {\n-\t\treturn on( this, types, selector, data, fn );\n-\t},\n-\tone: function( types, selector, data, fn ) {\n-\t\treturn on( this, types, selector, data, fn, 1 );\n-\t},\n-\toff: function( types, selector, fn ) {\n-\t\tvar handleObj, type;\n-\t\tif ( types && types.preventDefault && types.handleObj ) {\n-\n-\t\t\t\/\/ ( event )  dispatched jQuery.Event\n-\t\t\thandleObj = types.handleObj;\n-\t\t\tjQuery( types.delegateTarget ).off(\n-\t\t\t\thandleObj.namespace ?\n-\t\t\t\t\thandleObj.origType + \".\" + handleObj.namespace :\n-\t\t\t\t\thandleObj.origType,\n-\t\t\t\thandleObj.selector,\n-\t\t\t\thandleObj.handler\n-\t\t\t);\n-\t\t\treturn this;\n-\t\t}\n-\t\tif ( typeof types === \"object\" ) {\n-\n-\t\t\t\/\/ ( types-object [, selector] )\n-\t\t\tfor ( type in types ) {\n-\t\t\t\tthis.off( type, selector, types[ type ] );\n-\t\t\t}\n-\t\t\treturn this;\n-\t\t}\n-\t\tif ( selector === false || typeof selector === \"function\" ) {\n-\n-\t\t\t\/\/ ( types [, fn] )\n-\t\t\tfn = selector;\n-\t\t\tselector = undefined;\n-\t\t}\n-\t\tif ( fn === false ) {\n-\t\t\tfn = returnFalse;\n-\t\t}\n-\t\treturn this.each( function() {\n-\t\t\tjQuery.event.remove( this, types, fn, selector );\n-\t\t} );\n-\t}\n-} );\n-\n-\n-var\n-\n-\t\/\/ Support: IE <=10 - 11, Edge 12 - 13 only\n-\t\/\/ In IE\/Edge using regex groups here causes severe slowdowns.\n-\t\/\/ See https:\/\/connect.microsoft.com\/IE\/feedback\/details\/1736512\/\n-\trnoInnerhtml = \/<script|<style|<link\/i,\n-\n-\t\/\/ checked=\"checked\" or checked\n-\trchecked = \/checked\\s*(?:[^=]|=\\s*.checked.)\/i,\n-\n-\trcleanScript = \/^\\s*<!\\[CDATA\\[|\\]\\]>\\s*$\/g;\n-\n-\/\/ Prefer a tbody over its parent table for containing new rows\n-function manipulationTarget( elem, content ) {\n-\tif ( nodeName( elem, \"table\" ) &&\n-\t\tnodeName( content.nodeType !== 11 ? content : content.firstChild, \"tr\" ) ) {\n-\n-\t\treturn jQuery( elem ).children( \"tbody\" )[ 0 ] || elem;\n-\t}\n-\n-\treturn elem;\n-}\n-\n-\/\/ Replace\/restore the type attribute of script elements for safe DOM manipulation\n-function disableScript( elem ) {\n-\telem.type = ( elem.getAttribute( \"type\" ) !== null ) + \"\/\" + elem.type;\n-\treturn elem;\n-}\n-function restoreScript( elem ) {\n-\tif ( ( elem.type || \"\" ).slice( 0, 5 ) === \"true\/\" ) {\n-\t\telem.type = elem.type.slice( 5 );\n-\t} else {\n-\t\telem.removeAttribute( \"type\" );\n-\t}\n-\n-\treturn elem;\n-}\n-\n-function cloneCopyEvent( src, dest ) {\n-\tvar i, l, type, pdataOld, udataOld, udataCur, events;\n-\n-\tif ( dest.nodeType !== 1 ) {\n-\t\treturn;\n-\t}\n-\n-\t\/\/ 1. Copy private data: events, handlers, etc.\n-\tif ( dataPriv.hasData( src ) ) {\n-\t\tpdataOld = dataPriv.get( src );\n-\t\tevents = pdataOld.events;\n-\n-\t\tif ( events ) {\n-\t\t\tdataPriv.remove( dest, \"handle events\" );\n-\n-\t\t\tfor ( type in events ) {\n-\t\t\t\tfor ( i = 0, l = events[ type ].length; i < l; i++ ) {\n-\t\t\t\t\tjQuery.event.add( dest, type, events[ type ][ i ] );\n-\t\t\t\t}\n-\t\t\t}\n-\t\t}\n-\t}\n-\n-\t\/\/ 2. Copy user data\n-\tif ( dataUser.hasData( src ) ) {\n-\t\tudataOld = dataUser.access( src );\n-\t\tudataCur = jQuery.extend( {}, udataOld );\n-\n-\t\tdataUser.set( dest, udataCur );\n-\t}\n-}\n-\n-\/\/ Fix IE bugs, see support tests\n-function fixInput( src, dest ) {\n-\tvar nodeName = dest.nodeName.toLowerCase();\n-\n-\t\/\/ Fails to persist the checked state of a cloned checkbox or radio button.\n-\tif ( nodeName === \"input\" && rcheckableType.test( src.type ) ) {\n-\t\tdest.checked = src.checked;\n-\n-\t\/\/ Fails to return the selected option to the default selected state when cloning options\n-\t} else if ( nodeName === \"input\" || nodeName === \"textarea\" ) {\n-\t\tdest.defaultValue = src.defaultValue;\n-\t}\n-}\n-\n-function domManip( collection, args, callback, ignored ) {\n-\n-\t\/\/ Flatten any nested arrays\n-\targs = flat( args );\n-\n-\tvar fragment, first, scripts, hasScripts, node, doc,\n-\t\ti = 0,\n-\t\tl = collection.length,\n-\t\tiNoClone = l - 1,\n-\t\tvalue = args[ 0 ],\n-\t\tvalueIsFunction = isFunction( value );\n-\n-\t\/\/ We can't cloneNode fragments that contain checked, in WebKit\n-\tif ( valueIsFunction ||\n-\t\t\t( l > 1 && typeof value === \"string\" &&\n-\t\t\t\t!support.checkClone && rchecked.test( value ) ) ) {\n-\t\treturn collection.each( function( index ) {\n-\t\t\tvar self = collection.eq( index );\n-\t\t\tif ( valueIsFunction ) {\n-\t\t\t\targs[ 0 ] = value.call( this, index, self.html() );\n-\t\t\t}\n-\t\t\tdomManip( self, args, callback, ignored );\n-\t\t} );\n-\t}\n-\n-\tif ( l ) {\n-\t\tfragment = buildFragment( args, collection[ 0 ].ownerDocument, false, collection, ignored );\n-\t\tfirst = fragment.firstChild;\n-\n-\t\tif ( fragment.childNodes.length === 1 ) {\n-\t\t\tfragment = first;\n-\t\t}\n-\n-\t\t\/\/ Require either new content or an interest in ignored elements to invoke the callback\n-\t\tif ( first || ignored ) {\n-\t\t\tscripts = jQuery.map( getAll( fragment, \"script\" ), disableScript );\n-\t\t\thasScripts = scripts.length;\n-\n-\t\t\t\/\/ Use the original fragment for the last item\n-\t\t\t\/\/ instead of the first because it can end up\n-\t\t\t\/\/ being emptied incorrectly in certain situations (trac-8070).\n-\t\t\tfor ( ; i < l; i++ ) {\n-\t\t\t\tnode = fragment;\n-\n-\t\t\t\tif ( i !== iNoClone ) {\n-\t\t\t\t\tnode = jQuery.clone( node, true, true );\n-\n-\t\t\t\t\t\/\/ Keep references to cloned scripts for later restoration\n-\t\t\t\t\tif ( hasScripts ) {\n-\n-\t\t\t\t\t\t\/\/ Support: Android <=4.0 only, PhantomJS 1 only\n-\t\t\t\t\t\t\/\/ push.apply(_, arraylike) throws on ancient WebKit\n-\t\t\t\t\t\tjQuery.merge( scripts, getAll( node, \"script\" ) );\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\n-\t\t\t\tcallback.call( collection[ i ], node, i );\n-\t\t\t}\n-\n-\t\t\tif ( hasScripts ) {\n-\t\t\t\tdoc = scripts[ scripts.length - 1 ].ownerDocument;\n-\n-\t\t\t\t\/\/ Reenable scripts\n-\t\t\t\tjQuery.map( scripts, restoreScript );\n-\n-\t\t\t\t\/\/ Evaluate executable scripts on first document insertion\n-\t\t\t\tfor ( i = 0; i < hasScripts; i++ ) {\n-\t\t\t\t\tnode = scripts[ i ];\n-\t\t\t\t\tif ( rscriptType.test( node.type || \"\" ) &&\n-\t\t\t\t\t\t!dataPriv.access( node, \"globalEval\" ) &&\n-\t\t\t\t\t\tjQuery.contains( doc, node ) ) {\n-\n-\t\t\t\t\t\tif ( node.src && ( node.type || \"\" ).toLowerCase()  !== \"module\" ) {\n-\n-\t\t\t\t\t\t\t\/\/ Optional AJAX dependency, but won't run scripts if not present\n-\t\t\t\t\t\t\tif ( jQuery._evalUrl && !node.noModule ) {\n-\t\t\t\t\t\t\t\tjQuery._evalUrl( node.src, {\n-\t\t\t\t\t\t\t\t\tnonce: node.nonce || node.getAttribute( \"nonce\" )\n-\t\t\t\t\t\t\t\t}, doc );\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t} else {\n-\n-\t\t\t\t\t\t\t\/\/ Unwrap a CDATA section containing script contents. This shouldn't be\n-\t\t\t\t\t\t\t\/\/ needed as in XML documents they're already not visible when\n-\t\t\t\t\t\t\t\/\/ inspecting element contents and in HTML documents they have no\n-\t\t\t\t\t\t\t\/\/ meaning but we're preserving that logic for backwards compatibility.\n-\t\t\t\t\t\t\t\/\/ This will be removed completely in 4.0. See gh-4904.\n-\t\t\t\t\t\t\tDOMEval( node.textContent.replace( rcleanScript, \"\" ), node, doc );\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t}\n-\t\t}\n-\t}\n-\n-\treturn collection;\n-}\n-\n-function remove( elem, selector, keepData ) {\n-\tvar node,\n-\t\tnodes = selector ? jQuery.filter( selector, elem ) : elem,\n-\t\ti = 0;\n-\n-\tfor ( ; ( node = nodes[ i ] ) != null; i++ ) {\n-\t\tif ( !keepData && node.nodeType === 1 ) {\n-\t\t\tjQuery.cleanData( getAll( node ) );\n-\t\t}\n-\n-\t\tif ( node.parentNode ) {\n-\t\t\tif ( keepData && isAttached( node ) ) {\n-\t\t\t\tsetGlobalEval( getAll( node, \"script\" ) );\n-\t\t\t}\n-\t\t\tnode.parentNode.removeChild( node );\n-\t\t}\n-\t}\n-\n-\treturn elem;\n-}\n-\n-jQuery.extend( {\n-\thtmlPrefilter: function( html ) {\n-\t\treturn html;\n-\t},\n-\n-\tclone: function( elem, dataAndEvents, deepDataAndEvents ) {\n-\t\tvar i, l, srcElements, destElements,\n-\t\t\tclone = elem.cloneNode( true ),\n-\t\t\tinPage = isAttached( elem );\n-\n-\t\t\/\/ Fix IE cloning issues\n-\t\tif ( !support.noCloneChecked && ( elem.nodeType === 1 || elem.nodeType === 11 ) &&\n-\t\t\t\t!jQuery.isXMLDoc( elem ) ) {\n-\n-\t\t\t\/\/ We eschew Sizzle here for performance reasons: https:\/\/jsperf.com\/getall-vs-sizzle\/2\n-\t\t\tdestElements = getAll( clone );\n-\t\t\tsrcElements = getAll( elem );\n-\n-\t\t\tfor ( i = 0, l = srcElements.length; i < l; i++ ) {\n-\t\t\t\tfixInput( srcElements[ i ], destElements[ i ] );\n-\t\t\t}\n-\t\t}\n-\n-\t\t\/\/ Copy the events from the original to the clone\n-\t\tif ( dataAndEvents ) {\n-\t\t\tif ( deepDataAndEvents ) {\n-\t\t\t\tsrcElements = srcElements || getAll( elem );\n-\t\t\t\tdestElements = destElements || getAll( clone );\n-\n-\t\t\t\tfor ( i = 0, l = srcElements.length; i < l; i++ ) {\n-\t\t\t\t\tcloneCopyEvent( srcElements[ i ], destElements[ i ] );\n-\t\t\t\t}\n-\t\t\t} else {\n-\t\t\t\tcloneCopyEvent( elem, clone );\n-\t\t\t}\n-\t\t}\n-\n-\t\t\/\/ Preserve script evaluation history\n-\t\tdestElements = getAll( clone, \"script\" );\n-\t\tif ( destElements.length > 0 ) {\n-\t\t\tsetGlobalEval( destElements, !inPage && getAll( elem, \"script\" ) );\n-\t\t}\n-\n-\t\t\/\/ Return the cloned set\n-\t\treturn clone;\n-\t},\n-\n-\tcleanData: function( elems ) {\n-\t\tvar data, elem, type,\n-\t\t\tspecial = jQuery.event.special,\n-\t\t\ti = 0;\n-\n-\t\tfor ( ; ( elem = elems[ i ] ) !== undefined; i++ ) {\n-\t\t\tif ( acceptData( elem ) ) {\n-\t\t\t\tif ( ( data = elem[ dataPriv.expando ] ) ) {\n-\t\t\t\t\tif ( data.events ) {\n-\t\t\t\t\t\tfor ( type in data.events ) {\n-\t\t\t\t\t\t\tif ( special[ type ] ) {\n-\t\t\t\t\t\t\t\tjQuery.event.remove( elem, type );\n-\n-\t\t\t\t\t\t\t\/\/ This is a shortcut to avoid jQuery.event.remove's overhead\n-\t\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\t\tjQuery.removeEvent( elem, type, data.handle );\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\n-\t\t\t\t\t\/\/ Support: Chrome <=35 - 45+\n-\t\t\t\t\t\/\/ Assign undefined instead of using delete, see Data#remove\n-\t\t\t\t\telem[ dataPriv.expando ] = undefined;\n-\t\t\t\t}\n-\t\t\t\tif ( elem[ dataUser.expando ] ) {\n-\n-\t\t\t\t\t\/\/ Support: Chrome <=35 - 45+\n-\t\t\t\t\t\/\/ Assign undefined instead of using delete, see Data#remove\n-\t\t\t\t\telem[ dataUser.expando ] = undefined;\n-\t\t\t\t}\n-\t\t\t}\n-\t\t}\n-\t}\n-} );\n-\n-jQuery.fn.extend( {\n-\tdetach: function( selector ) {\n-\t\treturn remove( this, selector, true );\n-\t},\n-\n-\tremove: function( selector ) {\n-\t\treturn remove( this, selector );\n-\t},\n-\n-\ttext: function( value ) {\n-\t\treturn access( this, function( value ) {\n-\t\t\treturn value === undefined ?\n-\t\t\t\tjQuery.text( this ) :\n-\t\t\t\tthis.empty().each( function() {\n-\t\t\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n-\t\t\t\t\t\tthis.textContent = value;\n-\t\t\t\t\t}\n-\t\t\t\t} );\n-\t\t}, null, value, arguments.length );\n-\t},\n-\n-\tappend: function() {\n-\t\treturn domManip( this, arguments, function( elem ) {\n-\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n-\t\t\t\tvar target = manipulationTarget( this, elem );\n-\t\t\t\ttarget.appendChild( elem );\n-\t\t\t}\n-\t\t} );\n-\t},\n-\n-\tprepend: function() {\n-\t\treturn domManip( this, arguments, function( elem ) {\n-\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n-\t\t\t\tvar target = manipulationTarget( this, elem );\n-\t\t\t\ttarget.insertBefore( elem, target.firstChild );\n-\t\t\t}\n-\t\t} );\n-\t},\n-\n-\tbefore: function() {\n-\t\treturn domManip( this, arguments, function( elem ) {\n-\t\t\tif ( this.parentNode ) {\n-\t\t\t\tthis.parentNode.insertBefore( elem, this );\n-\t\t\t}\n-\t\t} );\n-\t},\n-\n-\tafter: function() {\n-\t\treturn domManip( this, arguments, function( elem ) {\n-\t\t\tif ( this.parentNode ) {\n-\t\t\t\tthis.parentNode.insertBefore( elem, this.nextSibling );\n-\t\t\t}\n-\t\t} );\n-\t},\n-\n-\tempty: function() {\n-\t\tvar elem,\n-\t\t\ti = 0;\n-\n-\t\tfor ( ; ( elem = this[ i ] ) != null; i++ ) {\n-\t\t\tif ( elem.nodeType === 1 ) {\n-\n-\t\t\t\t\/\/ Prevent memory leaks\n-\t\t\t\tjQuery.cleanData( getAll( elem, false ) );\n-\n-\t\t\t\t\/\/ Remove any remaining nodes\n-\t\t\t\telem.textContent = \"\";\n-\t\t\t}\n-\t\t}\n-\n-\t\treturn this;\n-\t},\n-\n-\tclone: function( dataAndEvents, deepDataAndEvents ) {\n-\t\tdataAndEvents = dataAndEvents == null ? false : dataAndEvents;\n-\t\tdeepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;\n-\n-\t\treturn this.map( function() {\n-\t\t\treturn jQuery.clone( this, dataAndEvents, deepDataAndEvents );\n-\t\t} );\n-\t},\n-\n-\thtml: function( value ) {\n-\t\treturn access( this, function( value ) {\n-\t\t\tvar elem = this[ 0 ] || {},\n-\t\t\t\ti = 0,\n-\t\t\t\tl = this.length;\n-\n-\t\t\tif ( value === undefined && elem.nodeType === 1 ) {\n-\t\t\t\treturn elem.innerHTML;\n-\t\t\t}\n-\n-\t\t\t\/\/ See if we can take a shortcut and just use innerHTML\n-\t\t\tif ( typeof value === \"string\" && !rnoInnerhtml.test( value ) &&\n-\t\t\t\t!wrapMap[ ( rtagName.exec( value ) || [ \"\", \"\" ] )[ 1 ].toLowerCase() ] ) {\n-\n-\t\t\t\tvalue = jQuery.htmlPrefilter( value );\n-\n-\t\t\t\ttry {\n-\t\t\t\t\tfor ( ; i < l; i++ ) {\n-\t\t\t\t\t\telem = this[ i ] || {};\n-\n-\t\t\t\t\t\t\/\/ Remove element nodes and prevent memory leaks\n-\t\t\t\t\t\tif ( elem.nodeType === 1 ) {\n-\t\t\t\t\t\t\tjQuery.cleanData( getAll( elem, false ) );\n-\t\t\t\t\t\t\telem.innerHTML = value;\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\n-\t\t\t\t\telem = 0;\n-\n-\t\t\t\t\/\/ If using innerHTML throws an exception, use the fallback method\n-\t\t\t\t} catch ( e ) {}\n-\t\t\t}\n-\n-\t\t\tif ( elem ) {\n-\t\t\t\tthis.empty().append( value );\n-\t\t\t}\n-\t\t}, null, value, arguments.length );\n-\t},\n-\n-\treplaceWith: function() {\n-\t\tvar ignored = [];\n-\n-\t\t\/\/ Make the changes, replacing each non-ignored context element with the new content\n-\t\treturn domManip( this, arguments, function( elem ) {\n-\t\t\tvar parent = this.parentNode;\n-\n-\t\t\tif ( jQuery.inArray( this, ignored ) < 0 ) {\n-\t\t\t\tjQuery.cleanData( getAll( this ) );\n-\t\t\t\tif ( parent ) {\n-\t\t\t\t\tparent.replaceChild( elem, this );\n-\t\t\t\t}\n-\t\t\t}\n-\n-\t\t\/\/ Force callback invocation\n-\t\t}, ignored );\n-\t}\n-} );\n-\n-jQuery.each( {\n-\tappendTo: \"append\",\n-\tprependTo: \"prepend\",\n-\tinsertBefore: \"before\",\n-\tinsertAfter: \"after\",\n-\treplaceAll: \"replaceWith\"\n-}, function( name, original ) {\n-\tjQuery.fn[ name ] = function( selector ) {\n-\t\tvar elems,\n-\t\t\tret = [],\n-\t\t\tinsert = jQuery( selector ),\n-\t\t\tlast = insert.length - 1,\n-\t\t\ti = 0;\n-\n-\t\tfor ( ; i <= last; i++ ) {\n-\t\t\telems = i === last ? this : this.clone( true );\n-\t\t\tjQuery( insert[ i ] )[ original ]( elems );\n-\n-\t\t\t\/\/ Support: Android <=4.0 only, PhantomJS 1 only\n-\t\t\t\/\/ .get() because push.apply(_, arraylike) throws on ancient WebKit\n-\t\t\tpush.apply( ret, elems.get() );\n-\t\t}\n-\n-\t\treturn this.pushStack( ret );\n-\t};\n-} );\n-var rnumnonpx = new RegExp( \"^(\" + pnum + \")(?!px)[a-z%]+$\", \"i\" );\n-\n-var rcustomProp = \/^--\/;\n-\n-\n-var getStyles = function( elem ) {\n-\n-\t\t\/\/ Support: IE <=11 only, Firefox <=30 (trac-15098, trac-14150)\n-\t\t\/\/ IE throws on elements created in popups\n-\t\t\/\/ FF meanwhile throws on frame elements through \"defaultView.getComputedStyle\"\n-\t\tvar view = elem.ownerDocument.defaultView;\n-\n-\t\tif ( !view || !view.opener ) {\n-\t\t\tview = window;\n-\t\t}\n-\n-\t\treturn view.getComputedStyle( elem );\n-\t};\n-\n-var swap = function( elem, options, callback ) {\n-\tvar ret, name,\n-\t\told = {};\n-\n-\t\/\/ Remember the old values, and insert the new ones\n-\tfor ( name in options ) {\n-\t\told[ name ] = elem.style[ name ];\n-\t\telem.style[ name ] = options[ name ];\n-\t}\n-\n-\tret = callback.call( elem );\n-\n-\t\/\/ Revert the old values\n-\tfor ( name in options ) {\n-\t\telem.style[ name ] = old[ name ];\n-\t}\n-\n-\treturn ret;\n-};\n-\n-\n-var rboxStyle = new RegExp( cssExpand.join( \"|\" ), \"i\" );\n-\n-var whitespace = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\";\n-\n-\n-var rtrimCSS = new RegExp(\n-\t\"^\" + whitespace + \"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\" + whitespace + \"+$\",\n-\t\"g\"\n-);\n-\n-\n-\n-\n-( function() {\n-\n-\t\/\/ Executing both pixelPosition & boxSizingReliable tests require only one layout\n-\t\/\/ so they're executed at the same time to save the second computation.\n-\tfunction computeStyleTests() {\n-\n-\t\t\/\/ This is a singleton, we need to execute it only once\n-\t\tif ( !div ) {\n-\t\t\treturn;\n-\t\t}\n-\n-\t\tcontainer.style.cssText = \"position:absolute;left:-11111px;width:60px;\" +\n-\t\t\t\"margin-top:1px;padding:0;border:0\";\n-\t\tdiv.style.cssText =\n-\t\t\t\"position:relative;display:block;box-sizing:border-box;overflow:scroll;\" +\n-\t\t\t\"margin:auto;border:1px;padding:1px;\" +\n-\t\t\t\"width:60%;top:1%\";\n-\t\tdocumentElement.appendChild( container ).appendChild( div );\n-\n-\t\tvar divStyle = window.getComputedStyle( div );\n-\t\tpixelPositionVal = divStyle.top !== \"1%\";\n-\n-\t\t\/\/ Support: Android 4.0 - 4.3 only, Firefox <=3 - 44\n-\t\treliableMarginLeftVal = roundPixelMeasures( divStyle.marginLeft ) === 12;\n-\n-\t\t\/\/ Support: Android 4.0 - 4.3 only, Safari <=9.1 - 10.1, iOS <=7.0 - 9.3\n-\t\t\/\/ Some styles come back with percentage values, even though they shouldn't\n-\t\tdiv.style.right = \"60%\";\n-\t\tpixelBoxStylesVal = roundPixelMeasures( divStyle.right ) === 36;\n-\n-\t\t\/\/ Support: IE 9 - 11 only\n-\t\t\/\/ Detect misreporting of content dimensions for box-sizing:border-box elements\n-\t\tboxSizingReliableVal = roundPixelMeasures( divStyle.width ) === 36;\n-\n-\t\t\/\/ Support: IE 9 only\n-\t\t\/\/ Detect overflow:scroll screwiness (gh-3699)\n-\t\t\/\/ Support: Chrome <=64\n-\t\t\/\/ Don't get tricked when zoom affects offsetWidth (gh-4029)\n-\t\tdiv.style.position = \"absolute\";\n-\t\tscrollboxSizeVal = roundPixelMeasures( div.offsetWidth \/ 3 ) === 12;\n-\n-\t\tdocumentElement.removeChild( container );\n-\n-\t\t\/\/ Nullify the div so it wouldn't be stored in the memory and\n-\t\t\/\/ it will also be a sign that checks already performed\n-\t\tdiv = null;\n-\t}\n-\n-\tfunction roundPixelMeasures( measure ) {\n-\t\treturn Math.round( parseFloat( measure ) );\n-\t}\n-\n-\tvar pixelPositionVal, boxSizingReliableVal, scrollboxSizeVal, pixelBoxStylesVal,\n-\t\treliableTrDimensionsVal, reliableMarginLeftVal,\n-\t\tcontainer = document.createElement( \"div\" ),\n-\t\tdiv = document.createElement( \"div\" );\n-\n-\t\/\/ Finish early in limited (non-browser) environments\n-\tif ( !div.style ) {\n-\t\treturn;\n-\t}\n-\n-\t\/\/ Support: IE <=9 - 11 only\n-\t\/\/ Style of cloned element affects source element cloned (trac-8908)\n-\tdiv.style.backgroundClip = \"content-box\";\n-\tdiv.cloneNode( true ).style.backgroundClip = \"\";\n-\tsupport.clearCloneStyle = div.style.backgroundClip === \"content-box\";\n-\n-\tjQuery.extend( support, {\n-\t\tboxSizingReliable: function() {\n-\t\t\tcomputeStyleTests();\n-\t\t\treturn boxSizingReliableVal;\n-\t\t},\n-\t\tpixelBoxStyles: function() {\n-\t\t\tcomputeStyleTests();\n-\t\t\treturn pixelBoxStylesVal;\n-\t\t},\n-\t\tpixelPosition: function() {\n-\t\t\tcomputeStyleTests();\n-\t\t\treturn pixelPositionVal;\n-\t\t},\n-\t\treliableMarginLeft: function() {\n-\t\t\tcomputeStyleTests();\n-\t\t\treturn reliableMarginLeftVal;\n-\t\t},\n-\t\tscrollboxSize: function() {\n-\t\t\tcomputeStyleTests();\n-\t\t\treturn scrollboxSizeVal;\n-\t\t},\n-\n-\t\t\/\/ Support: IE 9 - 11+, Edge 15 - 18+\n-\t\t\/\/ IE\/Edge misreport `getComputedStyle` of table rows with width\/height\n-\t\t\/\/ set in CSS while `offset*` properties report correct values.\n-\t\t\/\/ Behavior in IE 9 is more subtle than in newer versions & it passes\n-\t\t\/\/ some versions of this test; make sure not to make it pass there!\n-\t\t\/\/\n-\t\t\/\/ Support: Firefox 70+\n-\t\t\/\/ Only Firefox includes border widths\n-\t\t\/\/ in computed dimensions. (gh-4529)\n-\t\treliableTrDimensions: function() {\n-\t\t\tvar table, tr, trChild, trStyle;\n-\t\t\tif ( reliableTrDimensionsVal == null ) {\n-\t\t\t\ttable = document.createElement( \"table\" );\n-\t\t\t\ttr = document.createElement( \"tr\" );\n-\t\t\t\ttrChild = document.createElement( \"div\" );\n-\n-\t\t\t\ttable.style.cssText = \"position:absolute;left:-11111px;border-collapse:separate\";\n-\t\t\t\ttr.style.cssText = \"border:1px solid\";\n-\n-\t\t\t\t\/\/ Support: Chrome 86+\n-\t\t\t\t\/\/ Height set through cssText does not get applied.\n-\t\t\t\t\/\/ Computed height then comes back as 0.\n-\t\t\t\ttr.style.height = \"1px\";\n-\t\t\t\ttrChild.style.height = \"9px\";\n-\n-\t\t\t\t\/\/ Support: Android 8 Chrome 86+\n-\t\t\t\t\/\/ In our bodyBackground.html iframe,\n-\t\t\t\t\/\/ display for all div elements is set to \"inline\",\n-\t\t\t\t\/\/ which causes a problem only in Android 8 Chrome 86.\n-\t\t\t\t\/\/ Ensuring the div is display: block\n-\t\t\t\t\/\/ gets around this issue.\n-\t\t\t\ttrChild.style.display = \"block\";\n-\n-\t\t\t\tdocumentElement\n-\t\t\t\t\t.appendChild( table )\n-\t\t\t\t\t.appendChild( tr )\n-\t\t\t\t\t.appendChild( trChild );\n-\n-\t\t\t\ttrStyle = window.getComputedStyle( tr );\n-\t\t\t\treliableTrDimensionsVal = ( parseInt( trStyle.height, 10 ) +\n-\t\t\t\t\tparseInt( trStyle.borderTopWidth, 10 ) +\n-\t\t\t\t\tparseInt( trStyle.borderBottomWidth, 10 ) ) === tr.offsetHeight;\n-\n-\t\t\t\tdocumentElement.removeChild( table );\n-\t\t\t}\n-\t\t\treturn reliableTrDimensionsVal;\n-\t\t}\n-\t} );\n-} )();\n-\n-\n-function curCSS( elem, name, computed ) {\n-\tvar width, minWidth, maxWidth, ret,\n-\t\tisCustomProp = rcustomProp.test( name ),\n-\n-\t\t\/\/ Support: Firefox 51+\n-\t\t\/\/ Retrieving style before computed somehow\n-\t\t\/\/ fixes an issue with getting wrong values\n-\t\t\/\/ on detached elements\n-\t\tstyle = elem.style;\n-\n-\tcomputed = computed || getStyles( elem );\n-\n-\t\/\/ getPropertyValue is needed for:\n-\t\/\/   .css('filter') (IE 9 only, trac-12537)\n-\t\/\/   .css('--customProperty) (gh-3144)\n-\tif ( computed ) {\n-\t\tret = computed.getPropertyValue( name ) || computed[ name ];\n-\n-\t\t\/\/ trim whitespace for custom property (issue gh-4926)\n-\t\tif ( isCustomProp ) {\n-\n-\t\t\t\/\/ rtrim treats U+000D CARRIAGE RETURN and U+000C FORM FEED\n-\t\t\t\/\/ as whitespace while CSS does not, but this is not a problem\n-\t\t\t\/\/ because CSS preprocessing replaces them with U+000A LINE FEED\n-\t\t\t\/\/ (which *is* CSS whitespace)\n-\t\t\t\/\/ https:\/\/www.w3.org\/TR\/css-syntax-3\/#input-preprocessing\n-\t\t\tret = ret.replace( rtrimCSS, \"$1\" );\n-\t\t}\n-\n-\t\tif ( ret === \"\" && !isAttached( elem ) ) {\n-\t\t\tret = jQuery.style( elem, name );\n-\t\t}\n-\n-\t\t\/\/ A tribute to the \"awesome hack by Dean Edwards\"\n-\t\t\/\/ Android Browser returns percentage for some values,\n-\t\t\/\/ but width seems to be reliably pixels.\n-\t\t\/\/ This is against the CSSOM draft spec:\n-\t\t\/\/ https:\/\/drafts.csswg.org\/cssom\/#resolved-values\n-\t\tif ( !support.pixelBoxStyles() && rnumnonpx.test( ret ) && rboxStyle.test( name ) ) {\n-\n-\t\t\t\/\/ Remember the original values\n-\t\t\twidth = style.width;\n-\t\t\tminWidth = style.minWidth;\n-\t\t\tmaxWidth = style.maxWidth;\n-\n-\t\t\t\/\/ Put in the new values to get a computed value out\n-\t\t\tstyle.minWidth = style.maxWidth = style.width = ret;\n-\t\t\tret = computed.width;\n-\n-\t\t\t\/\/ Revert the changed values\n-\t\t\tstyle.width = width;\n-\t\t\tstyle.minWidth = minWidth;\n-\t\t\tstyle.maxWidth = maxWidth;\n-\t\t}\n-\t}\n-\n-\treturn ret !== undefined ?\n-\n-\t\t\/\/ Support: IE <=9 - 11 only\n-\t\t\/\/ IE returns zIndex value as an integer.\n-\t\tret + \"\" :\n-\t\tret;\n-}\n-\n-\n-function addGetHookIf( conditionFn, hookFn ) {\n-\n-\t\/\/ Define the hook, we'll check on the first run if it's really needed.\n-\treturn {\n-\t\tget: function() {\n-\t\t\tif ( conditionFn() ) {\n-\n-\t\t\t\t\/\/ Hook not needed (or it's not possible to use it due\n-\t\t\t\t\/\/ to missing dependency), remove it.\n-\t\t\t\tdelete this.get;\n-\t\t\t\treturn;\n-\t\t\t}\n-\n-\t\t\t\/\/ Hook needed; redefine it so that the support test is not executed again.\n-\t\t\treturn ( this.get = hookFn ).apply( this, arguments );\n-\t\t}\n-\t};\n-}\n-\n-\n-var cssPrefixes = [ \"Webkit\", \"Moz\", \"ms\" ],\n-\temptyStyle = document.createElement( \"div\" ).style,\n-\tvendorProps = {};\n-\n-\/\/ Return a vendor-prefixed property or undefined\n-function vendorPropName( name ) {\n-\n-\t\/\/ Check for vendor prefixed names\n-\tvar capName = name[ 0 ].toUpperCase() + name.slice( 1 ),\n-\t\ti = cssPrefixes.length;\n-\n-\twhile ( i-- ) {\n-\t\tname = cssPrefixes[ i ] + capName;\n-\t\tif ( name in emptyStyle ) {\n-\t\t\treturn name;\n-\t\t}\n-\t}\n-}\n-\n-\/\/ Return a potentially-mapped jQuery.cssProps or vendor prefixed property\n-function finalPropName( name ) {\n-\tvar final = jQuery.cssProps[ name ] || vendorProps[ name ];\n-\n-\tif ( final ) {\n-\t\treturn final;\n-\t}\n-\tif ( name in emptyStyle ) {\n-\t\treturn name;\n-\t}\n-\treturn vendorProps[ name ] = vendorPropName( name ) || name;\n-}\n-\n-\n-var\n-\n-\t\/\/ Swappable if display is none or starts with table\n-\t\/\/ except \"table\", \"table-cell\", or \"table-caption\"\n-\t\/\/ See here for display values: https:\/\/developer.mozilla.org\/en-US\/docs\/CSS\/display\n-\trdisplayswap = \/^(none|table(?!-c[ea]).+)\/,\n-\tcssShow = { position: \"absolute\", visibility: \"hidden\", display: \"block\" },\n-\tcssNormalTransform = {\n-\t\tletterSpacing: \"0\",\n-\t\tfontWeight: \"400\"\n-\t};\n-\n-function setPositiveNumber( _elem, value, subtract ) {\n-\n-\t\/\/ Any relative (+\/-) values have already been\n-\t\/\/ normalized at this point\n-\tvar matches = rcssNum.exec( value );\n-\treturn matches ?\n-\n-\t\t\/\/ Guard against undefined \"subtract\", e.g., when used as in cssHooks\n-\t\tMath.max( 0, matches[ 2 ] - ( subtract || 0 ) ) + ( matches[ 3 ] || \"px\" ) :\n-\t\tvalue;\n-}\n-\n-function boxModelAdjustment( elem, dimension, box, isBorderBox, styles, computedVal ) {\n-\tvar i = dimension === \"width\" ? 1 : 0,\n-\t\textra = 0,\n-\t\tdelta = 0;\n-\n-\t\/\/ Adjustment may not be necessary\n-\tif ( box === ( isBorderBox ? \"border\" : \"content\" ) ) {\n-\t\treturn 0;\n-\t}\n-\n-\tfor ( ; i < 4; i += 2 ) {\n-\n-\t\t\/\/ Both box models exclude margin\n-\t\tif ( box === \"margin\" ) {\n-\t\t\tdelta += jQuery.css( elem, box + cssExpand[ i ], true, styles );\n-\t\t}\n-\n-\t\t\/\/ If we get here with a content-box, we're seeking \"padding\" or \"border\" or \"margin\"\n-\t\tif ( !isBorderBox ) {\n-\n-\t\t\t\/\/ Add padding\n-\t\t\tdelta += jQuery.css( elem, \"padding\" + cssExpand[ i ], true, styles );\n-\n-\t\t\t\/\/ For \"border\" or \"margin\", add border\n-\t\t\tif ( box !== \"padding\" ) {\n-\t\t\t\tdelta += jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n-\n-\t\t\t\/\/ But still keep track of it otherwise\n-\t\t\t} else {\n-\t\t\t\textra += jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n-\t\t\t}\n-\n-\t\t\/\/ If we get here with a border-box (content + padding + border), we're seeking \"content\" or\n-\t\t\/\/ \"padding\" or \"margin\"\n-\t\t} else {\n-\n-\t\t\t\/\/ For \"content\", subtract padding\n-\t\t\tif ( box === \"content\" ) {\n-\t\t\t\tdelta -= jQuery.css( elem, \"padding\" + cssExpand[ i ], true, styles );\n-\t\t\t}\n-\n-\t\t\t\/\/ For \"content\" or \"padding\", subtract border\n-\t\t\tif ( box !== \"margin\" ) {\n-\t\t\t\tdelta -= jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n-\t\t\t}\n-\t\t}\n-\t}\n-\n-\t\/\/ Account for positive content-box scroll gutter when requested by providing computedVal\n-\tif ( !isBorderBox && computedVal >= 0 ) {\n-\n-\t\t\/\/ offsetWidth\/offsetHeight is a rounded sum of content, padding, scroll gutter, and border\n-\t\t\/\/ Assuming integer scroll gutter, subtract the rest and round down\n-\t\tdelta += Math.max( 0, Math.ceil(\n-\t\t\telem[ \"offset\" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 ) ] -\n-\t\t\tcomputedVal -\n-\t\t\tdelta -\n-\t\t\textra -\n-\t\t\t0.5\n-\n-\t\t\/\/ If offsetWidth\/offsetHeight is unknown, then we can't determine content-box scroll gutter\n-\t\t\/\/ Use an explicit zero to avoid NaN (gh-3964)\n-\t\t) ) || 0;\n-\t}\n-\n-\treturn delta;\n-}\n-\n-function getWidthOrHeight( elem, dimension, extra ) {\n-\n-\t\/\/ Start with computed style\n-\tvar styles = getStyles( elem ),\n-\n-\t\t\/\/ To avoid forcing a reflow, only fetch boxSizing if we need it (gh-4322).\n-\t\t\/\/ Fake content-box until we know it's needed to know the true value.\n-\t\tboxSizingNeeded = !support.boxSizingReliable() || extra,\n-\t\tisBorderBox = boxSizingNeeded &&\n-\t\t\tjQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\",\n-\t\tvalueIsBorderBox = isBorderBox,\n-\n-\t\tval = curCSS( elem, dimension, styles ),\n-\t\toffsetProp = \"offset\" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 );\n-\n-\t\/\/ Support: Firefox <=54\n-\t\/\/ Return a confounding non-pixel value or feign ignorance, as appropriate.\n-\tif ( rnumnonpx.test( val ) ) {\n-\t\tif ( !extra ) {\n-\t\t\treturn val;\n-\t\t}\n-\t\tval = \"auto\";\n-\t}\n-\n-\n-\t\/\/ Support: IE 9 - 11 only\n-\t\/\/ Use offsetWidth\/offsetHeight for when box sizing is unreliable.\n-\t\/\/ In those cases, the computed value can be trusted to be border-box.\n-\tif ( ( !support.boxSizingReliable() && isBorderBox ||\n-\n-\t\t\/\/ Support: IE 10 - 11+, Edge 15 - 18+\n-\t\t\/\/ IE\/Edge misreport `getComputedStyle` of table rows with width\/height\n-\t\t\/\/ set in CSS while `offset*` properties report correct values.\n-\t\t\/\/ Interestingly, in some cases IE 9 doesn't suffer from this issue.\n-\t\t!support.reliableTrDimensions() && nodeName( elem, \"tr\" ) ||\n-\n-\t\t\/\/ Fall back to offsetWidth\/offsetHeight when value is \"auto\"\n-\t\t\/\/ This happens for inline elements with no explicit setting (gh-3571)\n-\t\tval === \"auto\" ||\n-\n-\t\t\/\/ Support: Android <=4.1 - 4.3 only\n-\t\t\/\/ Also use offsetWidth\/offsetHeight for misreported inline dimensions (gh-3602)\n-\t\t!parseFloat( val ) && jQuery.css( elem, \"display\", false, styles ) === \"inline\" ) &&\n-\n-\t\t\/\/ Make sure the element is visible & connected\n-\t\telem.getClientRects().length ) {\n-\n-\t\tisBorderBox = jQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\";\n-\n-\t\t\/\/ Where available, offsetWidth\/offsetHeight approximate border box dimensions.\n-\t\t\/\/ Where not available (e.g., SVG), assume unreliable box-sizing and interpret the\n-\t\t\/\/ retrieved value as a content box dimension.\n-\t\tvalueIsBorderBox = offsetProp in elem;\n-\t\tif ( valueIsBorderBox ) {\n-\t\t\tval = elem[ offsetProp ];\n-\t\t}\n-\t}\n-\n-\t\/\/ Normalize \"\" and auto\n-\tval = parseFloat( val ) || 0;\n-\n-\t\/\/ Adjust for the element's box model\n-\treturn ( val +\n-\t\tboxModelAdjustment(\n-\t\t\telem,\n-\t\t\tdimension,\n-\t\t\textra || ( isBorderBox ? \"border\" : \"content\" ),\n-\t\t\tvalueIsBorderBox,\n-\t\t\tstyles,\n-\n-\t\t\t\/\/ Provide the current computed size to request scroll gutter calculation (gh-3589)\n-\t\t\tval\n-\t\t)\n-\t) + \"px\";\n-}\n-\n-jQuery.extend( {\n-\n-\t\/\/ Add in style property hooks for overriding the default\n-\t\/\/ behavior of getting and setting a style property\n-\tcssHooks: {\n-\t\topacity: {\n-\t\t\tget: function( elem, computed ) {\n-\t\t\t\tif ( computed ) {\n-\n-\t\t\t\t\t\/\/ We should always get a number back from opacity\n-\t\t\t\t\tvar ret = curCSS( elem, \"opacity\" );\n-\t\t\t\t\treturn ret === \"\" ? \"1\" : ret;\n-\t\t\t\t}\n-\t\t\t}\n-\t\t}\n-\t},\n-\n-\t\/\/ Don't automatically add \"px\" to these possibly-unitless properties\n-\tcssNumber: {\n-\t\t\"animationIterationCount\": true,\n-\t\t\"columnCount\": true,\n-\t\t\"fillOpacity\": true,\n-\t\t\"flexGrow\": true,\n-\t\t\"flexShrink\": true,\n-\t\t\"fontWeight\": true,\n-\t\t\"gridArea\": true,\n-\t\t\"gridColumn\": true,\n-\t\t\"gridColumnEnd\": true,\n-\t\t\"gridColumnStart\": true,\n-\t\t\"gridRow\": true,\n-\t\t\"gridRowEnd\": true,\n-\t\t\"gridRowStart\": true,\n-\t\t\"lineHeight\": true,\n-\t\t\"opacity\": true,\n-\t\t\"order\": true,\n-\t\t\"orphans\": true,\n-\t\t\"widows\": true,\n-\t\t\"zIndex\": true,\n-\t\t\"zoom\": true\n-\t},\n-\n-\t\/\/ Add in properties whose names you wish to fix before\n-\t\/\/ setting or getting the value\n-\tcssProps: {},\n-\n-\t\/\/ Get and set the style property on a DOM Node\n-\tstyle: function( elem, name, value, extra ) {\n-\n-\t\t\/\/ Don't set styles on text and comment nodes\n-\t\tif ( !elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style ) {\n-\t\t\treturn;\n-\t\t}\n-\n-\t\t\/\/ Make sure that we're working with the right name\n-\t\tvar ret, type, hooks,\n-\t\t\torigName = camelCase( name ),\n-\t\t\tisCustomProp = rcustomProp.test( name ),\n-\t\t\tstyle = elem.style;\n-\n-\t\t\/\/ Make sure that we're working with the right name. We don't\n-\t\t\/\/ want to query the value if it is a CSS custom property\n-\t\t\/\/ since they are user-defined.\n-\t\tif ( !isCustomProp ) {\n-\t\t\tname = finalPropName( origName );\n-\t\t}\n-\n-\t\t\/\/ Gets hook for the prefixed version, then unprefixed version\n-\t\thooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];\n-\n-\t\t\/\/ Check if we're setting a value\n-\t\tif ( value !== undefined ) {\n-\t\t\ttype = typeof value;\n-\n-\t\t\t\/\/ Convert \"+=\" or \"-=\" to relative numbers (trac-7345)\n-\t\t\tif ( type === \"string\" && ( ret = rcssNum.exec( value ) ) && ret[ 1 ] ) {\n-\t\t\t\tvalue = adjustCSS( elem, name, ret );\n-\n-\t\t\t\t\/\/ Fixes bug trac-9237\n-\t\t\t\ttype = \"number\";\n-\t\t\t}\n-\n-\t\t\t\/\/ Make sure that null and NaN values aren't set (trac-7116)\n-\t\t\tif ( value == null || value !== value ) {\n-\t\t\t\treturn;\n-\t\t\t}\n-\n-\t\t\t\/\/ If a number was passed in, add the unit (except for certain CSS properties)\n-\t\t\t\/\/ The isCustomProp check can be removed in jQuery 4.0 when we only auto-append\n-\t\t\t\/\/ \"px\" to a few hardcoded values.\n-\t\t\tif ( type === \"number\" && !isCustomProp ) {\n-\t\t\t\tvalue += ret && ret[ 3 ] || ( jQuery.cssNumber[ origName ] ? \"\" : \"px\" );\n-\t\t\t}\n-\n-\t\t\t\/\/ background-* props affect original clone's values\n-\t\t\tif ( !support.clearCloneStyle && value === \"\" && name.indexOf( \"background\" ) === 0 ) {\n-\t\t\t\tstyle[ name ] = \"inherit\";\n-\t\t\t}\n-\n-\t\t\t\/\/ If a hook was provided, use that value, otherwise just set the specified value\n-\t\t\tif ( !hooks || !( \"set\" in hooks ) ||\n-\t\t\t\t( value = hooks.set( elem, value, extra ) ) !== undefined ) {\n-\n-\t\t\t\tif ( isCustomProp ) {\n-\t\t\t\t\tstyle.setProperty( name, value );\n-\t\t\t\t} else {\n-\t\t\t\t\tstyle[ name ] = value;\n-\t\t\t\t}\n-\t\t\t}\n-\n-\t\t} else {\n-\n-\t\t\t\/\/ If a hook was provided get the non-computed value from there\n-\t\t\tif ( hooks && \"get\" in hooks &&\n-\t\t\t\t( ret = hooks.get( elem, false, extra ) ) !== undefined ) {\n-\n-\t\t\t\treturn ret;\n-\t\t\t}\n-\n-\t\t\t\/\/ Otherwise just get the value from the style object\n-\t\t\treturn style[ name ];\n-\t\t}\n-\t},\n-\n-\tcss: function( elem, name, extra, styles ) {\n-\t\tvar val, num, hooks,\n-\t\t\torigName = camelCase( name ),\n-\t\t\tisCustomProp = rcustomProp.test( name );\n-\n-\t\t\/\/ Make sure that we're working with the right name. We don't\n-\t\t\/\/ want to modify the value if it is a CSS custom property\n-\t\t\/\/ since they are user-defined.\n-\t\tif ( !isCustomProp ) {\n-\t\t\tname = finalPropName( origName );\n-\t\t}\n-\n-\t\t\/\/ Try prefixed name followed by the unprefixed name\n-\t\thooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];\n-\n-\t\t\/\/ If a hook was provided get the computed value from there\n-\t\tif ( hooks && \"get\" in hooks ) {\n-\t\t\tval = hooks.get( elem, true, extra );\n-\t\t}\n-\n-\t\t\/\/ Otherwise, if a way to get the computed value exists, use that\n-\t\tif ( val === undefined ) {\n-\t\t\tval = curCSS( elem, name, styles );\n-\t\t}\n-\n-\t\t\/\/ Convert \"normal\" to computed value\n-\t\tif ( val === \"normal\" && name in cssNormalTransform ) {\n-\t\t\tval = cssNormalTransform[ name ];\n-\t\t}\n-\n-\t\t\/\/ Make numeric if forced or a qualifier was provided and val looks numeric\n-\t\tif ( extra === \"\" || extra ) {\n-\t\t\tnum = parseFloat( val );\n-\t\t\treturn extra === true || isFinite( num ) ? num || 0 : val;\n-\t\t}\n-\n-\t\treturn val;\n-\t}\n-} );\n-\n-jQuery.each( [ \"height\", \"width\" ], function( _i, dimension ) {\n-\tjQuery.cssHooks[ dimension ] = {\n-\t\tget: function( elem, computed, extra ) {\n-\t\t\tif ( computed ) {\n-\n-\t\t\t\t\/\/ Certain elements can have dimension info if we invisibly show them\n-\t\t\t\t\/\/ but it must have a current display style that would benefit\n-\t\t\t\treturn rdisplayswap.test( jQuery.css( elem, \"display\" ) ) &&\n-\n-\t\t\t\t\t\/\/ Support: Safari 8+\n-\t\t\t\t\t\/\/ Table columns in Safari have non-zero offsetWidth & zero\n-\t\t\t\t\t\/\/ getBoundingClientRect().width unless display is changed.\n-\t\t\t\t\t\/\/ Support: IE <=11 only\n-\t\t\t\t\t\/\/ Running getBoundingClientRect on a disconnected node\n-\t\t\t\t\t\/\/ in IE throws an error.\n-\t\t\t\t\t( !elem.getClientRects().length || !elem.getBoundingClientRect().width ) ?\n-\t\t\t\t\tswap( elem, cssShow, function() {\n-\t\t\t\t\t\treturn getWidthOrHeight( elem, dimension, extra );\n-\t\t\t\t\t} ) :\n-\t\t\t\t\tgetWidthOrHeight( elem, dimension, extra );\n-\t\t\t}\n-\t\t},\n-\n-\t\tset: function( elem, value, extra ) {\n-\t\t\tvar matches,\n-\t\t\t\tstyles = getStyles( elem ),\n-\n-\t\t\t\t\/\/ Only read styles.position if the test has a chance to fail\n-\t\t\t\t\/\/ to avoid forcing a reflow.\n-\t\t\t\tscrollboxSizeBuggy = !support.scrollboxSize() &&\n-\t\t\t\t\tstyles.position === \"absolute\",\n-\n-\t\t\t\t\/\/ To avoid forcing a reflow, only fetch boxSizing if we need it (gh-3991)\n-\t\t\t\tboxSizingNeeded = scrollboxSizeBuggy || extra,\n-\t\t\t\tisBorderBox = boxSizingNeeded &&\n-\t\t\t\t\tjQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\",\n-\t\t\t\tsubtract = extra ?\n-\t\t\t\t\tboxModelAdjustment(\n-\t\t\t\t\t\telem,\n-\t\t\t\t\t\tdimension,\n-\t\t\t\t\t\textra,\n-\t\t\t\t\t\tisBorderBox,\n-\t\t\t\t\t\tstyles\n-\t\t\t\t\t) :\n-\t\t\t\t\t0;\n-\n-\t\t\t\/\/ Account for unreliable border-box dimensions by comparing offset* to computed and\n-\t\t\t\/\/ faking a content-box to get border and padding (gh-3699)\n-\t\t\tif ( isBorderBox && scrollboxSizeBuggy ) {\n-\t\t\t\tsubtract -= Math.ceil(\n-\t\t\t\t\telem[ \"offset\" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 ) ] -\n-\t\t\t\t\tparseFloat( styles[ dimension ] ) -\n-\t\t\t\t\tboxModelAdjustment( elem, dimension, \"border\", false, styles ) -\n-\t\t\t\t\t0.5\n-\t\t\t\t);\n-\t\t\t}\n-\n-\t\t\t\/\/ Convert to pixels if value adjustment is needed\n-\t\t\tif ( subtract && ( matches = rcssNum.exec( value ) ) &&\n-\t\t\t\t( matches[ 3 ] || \"px\" ) !== \"px\" ) {\n-\n-\t\t\t\telem.style[ dimension ] = value;\n-\t\t\t\tvalue = jQuery.css( elem, dimension );\n-\t\t\t}\n-\n-\t\t\treturn setPositiveNumber( elem, value, subtract );\n-\t\t}\n-\t};\n-} );\n-\n-jQuery.cssHooks.marginLeft = addGetHookIf( support.reliableMarginLeft,\n-\tfunction( elem, computed ) {\n-\t\tif ( computed ) {\n-\t\t\treturn ( parseFloat( curCSS( elem, \"marginLeft\" ) ) ||\n-\t\t\t\telem.getBoundingClientRect().left -\n-\t\t\t\t\tswap( elem, { marginLeft: 0 }, function() {\n-\t\t\t\t\t\treturn elem.getBoundingClientRect().left;\n-\t\t\t\t\t} )\n-\t\t\t) + \"px\";\n-\t\t}\n-\t}\n-);\n-\n-\/\/ These hooks are used by animate to expand properties\n-jQuery.each( {\n-\tmargin: \"\",\n-\tpadding: \"\",\n-\tborder: \"Width\"\n-}, function( prefix, suffix ) {\n-\tjQuery.cssHooks[ prefix + suffix ] = {\n-\t\texpand: function( value ) {\n-\t\t\tvar i = 0,\n-\t\t\t\texpanded = {},\n-\n-\t\t\t\t\/\/ Assumes a single number if not a string\n-\t\t\t\tparts = typeof value === \"string\" ? value.split( \" \" ) : [ value ];\n-\n-\t\t\tfor ( ; i < 4; i++ ) {\n-\t\t\t\texpanded[ prefix + cssExpand[ i ] + suffix ] =\n-\t\t\t\t\tparts[ i ] || parts[ i - 2 ] || parts[ 0 ];\n-\t\t\t}\n-\n-\t\t\treturn expanded;\n-\t\t}\n-\t};\n-\n-\tif ( prefix !== \"margin\" ) {\n-\t\tjQuery.cssHooks[ prefix + suffix ].set = setPositiveNumber;\n-\t}\n-} );\n-\n-jQuery.fn.extend( {\n-\tcss: function( name, value ) {\n-\t\treturn access( this, function( elem, name, value ) {\n-\t\t\tvar styles, len,\n-\t\t\t\tmap = {},\n-\t\t\t\ti = 0;\n-\n-\t\t\tif ( Array.isArray( name ) ) {\n-\t\t\t\tstyles = getStyles( elem );\n-\t\t\t\tlen = name.length;\n-\n-\t\t\t\tfor ( ; i < len; i++ ) {\n-\t\t\t\t\tmap[ name[ i ] ] = jQuery.css( elem, name[ i ], false, styles );\n-\t\t\t\t}\n-\n-\t\t\t\treturn map;\n-\t\t\t}\n-\n-\t\t\treturn value !== undefined ?\n-\t\t\t\tjQuery.style( elem, name, value ) :\n-\t\t\t\tjQuery.css( elem, name );\n-\t\t}, name, value, arguments.length > 1 );\n-\t}\n-} );\n-\n-\n-function Tween( elem, options, prop, end, easing ) {\n-\treturn new Tween.prototype.init( elem, options, prop, end, easing );\n-}\n-jQuery.Tween = Tween;\n-\n-Tween.prototype = {\n-\tconstructor: Tween,\n-\tinit: function( elem, options, prop, end, easing, unit ) {\n-\t\tthis.elem = elem;\n-\t\tthis.prop = prop;\n-\t\tthis.easing = easing || jQuery.easing._default;\n-\t\tthis.options = options;\n-\t\tthis.start = this.now = this.cur();\n-\t\tthis.end = end;\n-\t\tthis.unit = unit || ( jQuery.cssNumber[ prop ] ? \"\" : \"px\" );\n-\t},\n-\tcur: function() {\n-\t\tvar hooks = Tween.propHooks[ this.prop ];\n-\n-\t\treturn hooks && hooks.get ?\n-\t\t\thooks.get( this ) :\n-\t\t\tTween.propHooks._default.get( this );\n-\t},\n-\trun: function( percent ) {\n-\t\tvar eased,\n-\t\t\thooks = Tween.propHooks[ this.prop ];\n-\n-\t\tif ( this.options.duration ) {\n-\t\t\tthis.pos = eased = jQuery.easing[ this.easing ](\n-\t\t\t\tpercent, this.options.duration * percent, 0, 1, this.options.duration\n-\t\t\t);\n-\t\t} else {\n-\t\t\tthis.pos = eased = percent;\n-\t\t}\n-\t\tthis.now = ( this.end - this.start ) * eased + this.start;\n-\n-\t\tif ( this.options.step ) {\n-\t\t\tthis.options.step.call( this.elem, this.now, this );\n-\t\t}\n-\n-\t\tif ( hooks && hooks.set ) {\n-\t\t\thooks.set( this );\n-\t\t} else {\n-\t\t\tTween.propHooks._default.set( this );\n-\t\t}\n-\t\treturn this;\n-\t}\n-};\n-\n-Tween.prototype.init.prototype = Tween.prototype;\n-\n-Tween.propHooks = {\n-\t_default: {\n-\t\tget: function( tween ) {\n-\t\t\tvar result;\n-\n-\t\t\t\/\/ Use a property on the element directly when it is not a DOM element,\n-\t\t\t\/\/ or when there is no matching style property that exists.\n-\t\t\tif ( tween.elem.nodeType !== 1 ||\n-\t\t\t\ttween.elem[ tween.prop ] != null && tween.elem.style[ tween.prop ] == null ) {\n-\t\t\t\treturn tween.elem[ tween.prop ];\n-\t\t\t}\n-\n-\t\t\t\/\/ Passing an empty string as a 3rd parameter to .css will automatically\n-\t\t\t\/\/ attempt a parseFloat and fallback to a string if the parse fails.\n-\t\t\t\/\/ Simple values such as \"10px\" are parsed to Float;\n-\t\t\t\/\/ complex values such as \"rotate(1rad)\" are returned as-is.\n-\t\t\tresult = jQuery.css( tween.elem, tween.prop, \"\" );\n-\n-\t\t\t\/\/ Empty strings, null, undefined and \"auto\" are converted to 0.\n-\t\t\treturn !result || result === \"auto\" ? 0 : result;\n-\t\t},\n-\t\tset: function( tween ) {\n-\n-\t\t\t\/\/ Use step hook for back compat.\n-\t\t\t\/\/ Use cssHook if its there.\n-\t\t\t\/\/ Use .style if available and use plain properties where available.\n-\t\t\tif ( jQuery.fx.step[ tween.prop ] ) {\n-\t\t\t\tjQuery.fx.step[ tween.prop ]( tween );\n-\t\t\t} else if ( tween.elem.nodeType === 1 && (\n-\t\t\t\tjQuery.cssHooks[ tween.prop ] ||\n-\t\t\t\t\ttween.elem.style[ finalPropName( tween.prop ) ] != null ) ) {\n-\t\t\t\tjQuery.style( tween.elem, tween.prop, tween.now + tween.unit );\n-\t\t\t} else {\n-\t\t\t\ttween.elem[ tween.prop ] = tween.now;\n-\t\t\t}\n-\t\t}\n-\t}\n-};\n-\n-\/\/ Support: IE <=9 only\n-\/\/ Panic based approach to setting things on disconnected nodes\n-Tween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {\n-\tset: function( tween ) {\n-\t\tif ( tween.elem.nodeType && tween.elem.parentNode ) {\n-\t\t\ttween.elem[ tween.prop ] = tween.now;\n-\t\t}\n-\t}\n-};\n-\n-jQuery.easing = {\n-\tlinear: function( p ) {\n-\t\treturn p;\n-\t},\n-\tswing: function( p ) {\n-\t\treturn 0.5 - Math.cos( p * Math.PI ) \/ 2;\n-\t},\n-\t_default: \"swing\"\n-};\n-\n-jQuery.fx = Tween.prototype.init;\n-\n-\/\/ Back compat <1.8 extension point\n-jQuery.fx.step = {};\n-\n-\n-\n-\n-var\n-\tfxNow, inProgress,\n-\trfxtypes = \/^(?:toggle|show|hide)$\/,\n-\trrun = \/queueHooks$\/;\n-\n-function schedule() {\n-\tif ( inProgress ) {\n-\t\tif ( document.hidden === false && window.requestAnimationFrame ) {\n-\t\t\twindow.requestAnimationFrame( schedule );\n-\t\t} else {\n-\t\t\twindow.setTimeout( schedule, jQuery.fx.interval );\n-\t\t}\n-\n-\t\tjQuery.fx.tick();\n-\t}\n-}\n-\n-\/\/ Animations created synchronously will run synchronously\n-function createFxNow() {\n-\twindow.setTimeout( function() {\n-\t\tfxNow = undefined;\n-\t} );\n-\treturn ( fxNow = Date.now() );\n-}\n-\n-\/\/ Generate parameters to create a standard animation\n-function genFx( type, includeWidth ) {\n-\tvar which,\n-\t\ti = 0,\n-\t\tattrs = { height: type };\n-\n-\t\/\/ If we include width, step value is 1 to do all cssExpand values,\n-\t\/\/ otherwise step value is 2 to skip over Left and Right\n-\tincludeWidth = includeWidth ? 1 : 0;\n-\tfor ( ; i < 4; i += 2 - includeWidth ) {\n-\t\twhich = cssExpand[ i ];\n-\t\tattrs[ \"margin\" + which ] = attrs[ \"padding\" + which ] = type;\n-\t}\n-\n-\tif ( includeWidth ) {\n-\t\tattrs.opacity = attrs.width = type;\n-\t}\n-\n-\treturn attrs;\n-}\n-\n-function createTween( value, prop, animation ) {\n-\tvar tween,\n-\t\tcollection = ( Animation.tweeners[ prop ] || [] ).concat( Animation.tweeners[ \"*\" ] ),\n-\t\tindex = 0,\n-\t\tlength = collection.length;\n-\tfor ( ; index < length; index++ ) {\n-\t\tif ( ( tween = collection[ index ].call( animation, prop, value ) ) ) {\n-\n-\t\t\t\/\/ We're done with this property\n-\t\t\treturn tween;\n-\t\t}\n-\t}\n-}\n-\n-function defaultPrefilter( elem, props, opts ) {\n-\tvar prop, value, toggle, hooks, oldfire, propTween, restoreDisplay, display,\n-\t\tisBox = \"width\" in props || \"height\" in props,\n-\t\tanim = this,\n-\t\torig = {},\n-\t\tstyle = elem.style,\n-\t\thidden = elem.nodeType && isHiddenWithinTree( elem ),\n-\t\tdataShow = dataPriv.get( elem, \"fxshow\" );\n-\n-\t\/\/ Queue-skipping animations hijack the fx hooks\n-\tif ( !opts.queue ) {\n-\t\thooks = jQuery._queueHooks( elem, \"fx\" );\n-\t\tif ( hooks.unqueued == null ) {\n-\t\t\thooks.unqueued = 0;\n-\t\t\toldfire = hooks.empty.fire;\n-\t\t\thooks.empty.fire = function() {\n-\t\t\t\tif ( !hooks.unqueued ) {\n-\t\t\t\t\toldfire();\n-\t\t\t\t}\n-\t\t\t};\n-\t\t}\n-\t\thooks.unqueued++;\n-\n-\t\tanim.always( function() {\n-\n-\t\t\t\/\/ Ensure the complete handler is called before this completes\n-\t\t\tanim.always( function() {\n-\t\t\t\thooks.unqueued--;\n-\t\t\t\tif ( !jQuery.queue( elem, \"fx\" ).length ) {\n-\t\t\t\t\thooks.empty.fire();\n-\t\t\t\t}\n-\t\t\t} );\n-\t\t} );\n-\t}\n-\n-\t\/\/ Detect show\/hide animations\n-\tfor ( prop in props ) {\n-\t\tvalue = props[ prop ];\n-\t\tif ( rfxtypes.test( value ) ) {\n-\t\t\tdelete props[ prop ];\n-\t\t\ttoggle = toggle || value === \"toggle\";\n-\t\t\tif ( value === ( hidden ? \"hide\" : \"show\" ) ) {\n-\n-\t\t\t\t\/\/ Pretend to be hidden if this is a \"show\" and\n-\t\t\t\t\/\/ there is still data from a stopped show\/hide\n-\t\t\t\tif ( value === \"show\" && dataShow && dataShow[ prop ] !== undefined ) {\n-\t\t\t\t\thidden = true;\n-\n-\t\t\t\t\/\/ Ignore all other no-op show\/hide data\n-\t\t\t\t} else {\n-\t\t\t\t\tcontinue;\n-\t\t\t\t}\n-\t\t\t}\n-\t\t\torig[ prop ] = dataShow && dataShow[ prop ] || jQuery.style( elem, prop );\n-\t\t}\n-\t}\n-\n-\t\/\/ Bail out if this is a no-op like .hide().hide()\n-\tpropTween = !jQuery.isEmptyObject( props );\n-\tif ( !propTween && jQuery.isEmptyObject( orig ) ) {\n-\t\treturn;\n-\t}\n-\n-\t\/\/ Restrict \"overflow\" and \"display\" styles during box animations\n-\tif ( isBox && elem.nodeType === 1 ) {\n-\n-\t\t\/\/ Support: IE <=9 - 11, Edge 12 - 15\n-\t\t\/\/ Record all 3 overflow attributes because IE does not infer the shorthand\n-\t\t\/\/ from identically-valued overflowX and overflowY and Edge just mirrors\n-\t\t\/\/ the overflowX value there.\n-\t\topts.overflow = [ style.overflow, style.overflowX, style.overflowY ];\n-\n-\t\t\/\/ Identify a display type, preferring old show\/hide data over the CSS cascade\n-\t\trestoreDisplay = dataShow && dataShow.display;\n-\t\tif ( restoreDisplay == null ) {\n-\t\t\trestoreDisplay = dataPriv.get( elem, \"display\" );\n-\t\t}\n-\t\tdisplay = jQuery.css( elem, \"display\" );\n-\t\tif ( display === \"none\" ) {\n-\t\t\tif ( restoreDisplay ) {\n-\t\t\t\tdisplay = restoreDisplay;\n-\t\t\t} else {\n-\n-\t\t\t\t\/\/ Get nonempty value(s) by temporarily forcing visibility\n-\t\t\t\tshowHide( [ elem ], true );\n-\t\t\t\trestoreDisplay = elem.style.display || restoreDisplay;\n-\t\t\t\tdisplay = jQuery.css( elem, \"display\" );\n-\t\t\t\tshowHide( [ elem ] );\n-\t\t\t}\n-\t\t}\n-\n-\t\t\/\/ Animate inline elements as inline-block\n-\t\tif ( display === \"inline\" || display === \"inline-block\" && restoreDisplay != null ) {\n-\t\t\tif ( jQuery.css( elem, \"float\" ) === \"none\" ) {\n-\n-\t\t\t\t\/\/ Restore the original display value at the end of pure show\/hide animations\n-\t\t\t\tif ( !propTween ) {\n-\t\t\t\t\tanim.done( function() {\n-\t\t\t\t\t\tstyle.display = restoreDisplay;\n-\t\t\t\t\t} );\n-\t\t\t\t\tif ( restoreDisplay == null ) {\n-\t\t\t\t\t\tdisplay = style.display;\n-\t\t\t\t\t\trestoreDisplay = display === \"none\" ? \"\" : display;\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t\tstyle.display = \"inline-block\";\n-\t\t\t}\n-\t\t}\n-\t}\n-\n-\tif ( opts.overflow ) {\n-\t\tstyle.overflow = \"hidden\";\n-\t\tanim.always( function() {\n-\t\t\tstyle.overflow = opts.overflow[ 0 ];\n-\t\t\tstyle.overflowX = opts.overflow[ 1 ];\n-\t\t\tstyle.overflowY = opts.overflow[ 2 ];\n-\t\t} );\n-\t}\n-\n-\t\/\/ Implement show\/hide animations\n-\tpropTween = false;\n-\tfor ( prop in orig ) {\n-\n-\t\t\/\/ General show\/hide setup for this element animation\n-\t\tif ( !propTween ) {\n-\t\t\tif ( dataShow ) {\n-\t\t\t\tif ( \"hidden\" in dataShow ) {\n-\t\t\t\t\thidden = dataShow.hidden;\n-\t\t\t\t}\n-\t\t\t} else {\n-\t\t\t\tdataShow = dataPriv.access( elem, \"fxshow\", { display: restoreDisplay } );\n-\t\t\t}\n-\n-\t\t\t\/\/ Store hidden\/visible for toggle so `.stop().toggle()` \"reverses\"\n-\t\t\tif ( toggle ) {\n-\t\t\t\tdataShow.hidden = !hidden;\n-\t\t\t}\n-\n-\t\t\t\/\/ Show elements before animating them\n-\t\t\tif ( hidden ) {\n-\t\t\t\tshowHide( [ elem ], true );\n-\t\t\t}\n-\n-\t\t\t\/* eslint-disable no-loop-func *\/\n-\n-\t\t\tanim.done( function() {\n-\n-\t\t\t\t\/* eslint-enable no-loop-func *\/\n-\n-\t\t\t\t\/\/ The final step of a \"hide\" animation is actually hiding the element\n-\t\t\t\tif ( !hidden ) {\n-\t\t\t\t\tshowHide( [ elem ] );\n-\t\t\t\t}\n-\t\t\t\tdataPriv.remove( elem, \"fxshow\" );\n-\t\t\t\tfor ( prop in orig ) {\n-\t\t\t\t\tjQuery.style( elem, prop, orig[ prop ] );\n-\t\t\t\t}\n-\t\t\t} );\n-\t\t}\n-\n-\t\t\/\/ Per-property setup\n-\t\tpropTween = createTween( hidden ? dataShow[ prop ] : 0, prop, anim );\n-\t\tif ( !( prop in dataShow ) ) {\n-\t\t\tdataShow[ prop ] = propTween.start;\n-\t\t\tif ( hidden ) {\n-\t\t\t\tpropTween.end = propTween.start;\n-\t\t\t\tpropTween.start = 0;\n-\t\t\t}\n-\t\t}\n-\t}\n-}\n-\n-function propFilter( props, specialEasing ) {\n-\tvar index, name, easing, value, hooks;\n-\n-\t\/\/ camelCase, specialEasing and expand cssHook pass\n-\tfor ( index in props ) {\n-\t\tname = camelCase( index );\n-\t\teasing = specialEasing[ name ];\n-\t\tvalue = props[ index ];\n-\t\tif ( Array.isArray( value ) ) {\n-\t\t\teasing = value[ 1 ];\n-\t\t\tvalue = props[ index ] = value[ 0 ];\n-\t\t}\n-\n-\t\tif ( index !== name ) {\n-\t\t\tprops[ name ] = value;\n-\t\t\tdelete props[ index ];\n-\t\t}\n-\n-\t\thooks = jQuery.cssHooks[ name ];\n-\t\tif ( hooks && \"expand\" in hooks ) {\n-\t\t\tvalue = hooks.expand( value );\n-\t\t\tdelete props[ name ];\n-\n-\t\t\t\/\/ Not quite $.extend, this won't overwrite existing keys.\n-\t\t\t\/\/ Reusing 'index' because we have the correct \"name\"\n-\t\t\tfor ( index in value ) {\n-\t\t\t\tif ( !( index in props ) ) {\n-\t\t\t\t\tprops[ index ] = value[ index ];\n-\t\t\t\t\tspecialEasing[ index ] = easing;\n-\t\t\t\t}\n-\t\t\t}\n-\t\t} else {\n-\t\t\tspecialEasing[ name ] = easing;\n-\t\t}\n-\t}\n-}\n-\n-function Animation( elem, properties, options ) {\n-\tvar result,\n-\t\tstopped,\n-\t\tindex = 0,\n-\t\tlength = Animation.prefilters.length,\n-\t\tdeferred = jQuery.Deferred().always( function() {\n-\n-\t\t\t\/\/ Don't match elem in the :animated selector\n-\t\t\tdelete tick.elem;\n-\t\t} ),\n-\t\ttick = function() {\n-\t\t\tif ( stopped ) {\n-\t\t\t\treturn false;\n-\t\t\t}\n-\t\t\tvar currentTime = fxNow || createFxNow(),\n-\t\t\t\tremaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),\n-\n-\t\t\t\t\/\/ Support: Android 2.3 only\n-\t\t\t\t\/\/ Archaic crash bug won't allow us to use `1 - ( 0.5 || 0 )` (trac-12497)\n-\t\t\t\ttemp = remaining \/ animation.duration || 0,\n-\t\t\t\tpercent = 1 - temp,\n-\t\t\t\tindex = 0,\n-\t\t\t\tlength = animation.tweens.length;\n-\n-\t\t\tfor ( ; index < length; index++ ) {\n-\t\t\t\tanimation.tweens[ index ].run( percent );\n-\t\t\t}\n-\n-\t\t\tdeferred.notifyWith( elem, [ animation, percent, remaining ] );\n-\n-\t\t\t\/\/ If there's more to do, yield\n-\t\t\tif ( percent < 1 && length ) {\n-\t\t\t\treturn remaining;\n-\t\t\t}\n-\n-\t\t\t\/\/ If this was an empty animation, synthesize a final progress notification\n-\t\t\tif ( !length ) {\n-\t\t\t\tdeferred.notifyWith( elem, [ animation, 1, 0 ] );\n-\t\t\t}\n-\n-\t\t\t\/\/ Resolve the animation and report its conclusion\n-\t\t\tdeferred.resolveWith( elem, [ animation ] );\n-\t\t\treturn false;\n-\t\t},\n-\t\tanimation = deferred.promise( {\n-\t\t\telem: elem,\n-\t\t\tprops: jQuery.extend( {}, properties ),\n-\t\t\topts: jQuery.extend( true, {\n-\t\t\t\tspecialEasing: {},\n-\t\t\t\teasing: jQuery.easing._default\n-\t\t\t}, options ),\n-\t\t\toriginalProperties: properties,\n-\t\t\toriginalOptions: options,\n-\t\t\tstartTime: fxNow || createFxNow(),\n-\t\t\tduration: options.duration,\n-\t\t\ttweens: [],\n-\t\t\tcreateTween: function( prop, end ) {\n-\t\t\t\tvar tween = jQuery.Tween( elem, animation.opts, prop, end,\n-\t\t\t\t\tanimation.opts.specialEasing[ prop ] || animation.opts.easing );\n-\t\t\t\tanimation.tweens.push( tween );\n-\t\t\t\treturn tween;\n-\t\t\t},\n-\t\t\tstop: function( gotoEnd ) {\n-\t\t\t\tvar index = 0,\n-\n-\t\t\t\t\t\/\/ If we are going to the end, we want to run all the tweens\n-\t\t\t\t\t\/\/ otherwise we skip this part\n-\t\t\t\t\tlength = gotoEnd ? animation.tweens.length : 0;\n-\t\t\t\tif ( stopped ) {\n-\t\t\t\t\treturn this;\n-\t\t\t\t}\n-\t\t\t\tstopped = true;\n-\t\t\t\tfor ( ; index < length; index++ ) {\n-\t\t\t\t\tanimation.tweens[ index ].run( 1 );\n-\t\t\t\t}\n-\n-\t\t\t\t\/\/ Resolve when we played the last frame; otherwise, reject\n-\t\t\t\tif ( gotoEnd ) {\n-\t\t\t\t\tdeferred.notifyWith( elem, [ animation, 1, 0 ] );\n-\t\t\t\t\tdeferred.resolveWith( elem, [ animation, gotoEnd ] );\n-\t\t\t\t} else {\n-\t\t\t\t\tdeferred.rejectWith( elem, [ animation, gotoEnd ] );\n-\t\t\t\t}\n-\t\t\t\treturn this;\n-\t\t\t}\n-\t\t} ),\n-\t\tprops = animation.props;\n-\n-\tpropFilter( props, animation.opts.specialEasing );\n-\n-\tfor ( ; index < length; index++ ) {\n-\t\tresult = Animation.prefilters[ index ].call( animation, elem, props, animation.opts );\n-\t\tif ( result ) {\n-\t\t\tif ( isFunction( result.stop ) ) {\n-\t\t\t\tjQuery._queueHooks( animation.elem, animation.opts.queue ).stop =\n-\t\t\t\t\tresult.stop.bind( result );\n-\t\t\t}\n-\t\t\treturn result;\n-\t\t}\n-\t}\n-\n-\tjQuery.map( props, createTween, animation );\n-\n-\tif ( isFunction( animation.opts.start ) ) {\n-\t\tanimation.opts.start.call( elem, animation );\n-\t}\n-\n-\t\/\/ Attach callbacks from options\n-\tanimation\n-\t\t.progress( animation.opts.progress )\n-\t\t.done( animation.opts.done, animation.opts.complete )\n-\t\t.fail( animation.opts.fail )\n-\t\t.always( animation.opts.always );\n-\n-\tjQuery.fx.timer(\n-\t\tjQuery.extend( tick, {\n-\t\t\telem: elem,\n-\t\t\tanim: animation,\n-\t\t\tqueue: animation.opts.queue\n-\t\t} )\n-\t);\n-\n-\treturn animation;\n-}\n-\n-jQuery.Animation = jQuery.extend( Animation, {\n-\n-\ttweeners: {\n-\t\t\"*\": [ function( prop, value ) {\n-\t\t\tvar tween = this.createTween( prop, value );\n-\t\t\tadjustCSS( tween.elem, prop, rcssNum.exec( value ), tween );\n-\t\t\treturn tween;\n-\t\t} ]\n-\t},\n-\n-\ttweener: function( props, callback ) {\n-\t\tif ( isFunction( props ) ) {\n-\t\t\tcallback = props;\n-\t\t\tprops = [ \"*\" ];\n-\t\t} else {\n-\t\t\tprops = props.match( rnothtmlwhite );\n-\t\t}\n-\n-\t\tvar prop,\n-\t\t\tindex = 0,\n-\t\t\tlength = props.length;\n-\n-\t\tfor ( ; index < length; index++ ) {\n-\t\t\tprop = props[ index ];\n-\t\t\tAnimation.tweeners[ prop ] = Animation.tweeners[ prop ] || [];\n-\t\t\tAnimation.tweeners[ prop ].unshift( callback );\n-\t\t}\n-\t},\n-\n-\tprefilters: [ defaultPrefilter ],\n-\n-\tprefilter: function( callback, prepend ) {\n-\t\tif ( prepend ) {\n-\t\t\tAnimation.prefilters.unshift( callback );\n-\t\t} else {\n-\t\t\tAnimation.prefilters.push( callback );\n-\t\t}\n-\t}\n-} );\n-\n-jQuery.speed = function( speed, easing, fn ) {\n-\tvar opt = speed && typeof speed === \"object\" ? jQuery.extend( {}, speed ) : {\n-\t\tcomplete: fn || !fn && easing ||\n-\t\t\tisFunction( speed ) && speed,\n-\t\tduration: speed,\n-\t\teasing: fn && easing || easing && !isFunction( easing ) && easing\n-\t};\n-\n-\t\/\/ Go to the end state if fx are off\n-\tif ( jQuery.fx.off ) {\n-\t\topt.duration = 0;\n-\n-\t} else {\n-\t\tif ( typeof opt.duration !== \"number\" ) {\n-\t\t\tif ( opt.duration in jQuery.fx.speeds ) {\n-\t\t\t\topt.duration = jQuery.fx.speeds[ opt.duration ];\n-\n-\t\t\t} else {\n-\t\t\t\topt.duration = jQuery.fx.speeds._default;\n-\t\t\t}\n-\t\t}\n-\t}\n-\n-\t\/\/ Normalize opt.queue - true\/undefined\/null -> \"fx\"\n-\tif ( opt.queue == null || opt.queue === true ) {\n-\t\topt.queue = \"fx\";\n-\t}\n-\n-\t\/\/ Queueing\n-\topt.old = opt.complete;\n-\n-\topt.complete = function() {\n-\t\tif ( isFunction( opt.old ) ) {\n-\t\t\topt.old.call( this );\n-\t\t}\n-\n-\t\tif ( opt.queue ) {\n-\t\t\tjQuery.dequeue( this, opt.queue );\n-\t\t}\n-\t};\n-\n-\treturn opt;\n-};\n-\n-jQuery.fn.extend( {\n-\tfadeTo: function( speed, to, easing, callback ) {\n-\n-\t\t\/\/ Show any hidden elements after setting opacity to 0\n-\t\treturn this.filter( isHiddenWithinTree ).css( \"opacity\", 0 ).show()\n-\n-\t\t\t\/\/ Animate to the value specified\n-\t\t\t.end().animate( { opacity: to }, speed, easing, callback );\n-\t},\n-\tanimate: function( prop, speed, easing, callback ) {\n-\t\tvar empty = jQuery.isEmptyObject( prop ),\n-\t\t\toptall = jQuery.speed( speed, easing, callback ),\n-\t\t\tdoAnimation = function() {\n-\n-\t\t\t\t\/\/ Operate on a copy of prop so per-property easing won't be lost\n-\t\t\t\tvar anim = Animation( this, jQuery.extend( {}, prop ), optall );\n-\n-\t\t\t\t\/\/ Empty animations, or finishing resolves immediately\n-\t\t\t\tif ( empty || dataPriv.get( this, \"finish\" ) ) {\n-\t\t\t\t\tanim.stop( true );\n-\t\t\t\t}\n-\t\t\t};\n-\n-\t\tdoAnimation.finish = doAnimation;\n-\n-\t\treturn empty || optall.queue === false ?\n-\t\t\tthis.each( doAnimation ) :\n-\t\t\tthis.queue( optall.queue, doAnimation );\n-\t},\n-\tstop: function( type, clearQueue, gotoEnd ) {\n-\t\tvar stopQueue = function( hooks ) {\n-\t\t\tvar stop = hooks.stop;\n-\t\t\tdelete hooks.stop;\n-\t\t\tstop( gotoEnd );\n-\t\t};\n-\n-\t\tif ( typeof type !== \"string\" ) {\n-\t\t\tgotoEnd = clearQueue;\n-\t\t\tclearQueue = type;\n-\t\t\ttype = undefined;\n-\t\t}\n-\t\tif ( clearQueue ) {\n-\t\t\tthis.queue( type || \"fx\", [] );\n-\t\t}\n-\n-\t\treturn this.each( function() {\n-\t\t\tvar dequeue = true,\n-\t\t\t\tindex = type != null && type + \"queueHooks\",\n-\t\t\t\ttimers = jQuery.timers,\n-\t\t\t\tdata = dataPriv.get( this );\n-\n-\t\t\tif ( index ) {\n-\t\t\t\tif ( data[ index ] && data[ index ].stop ) {\n-\t\t\t\t\tstopQueue( data[ index ] );\n-\t\t\t\t}\n-\t\t\t} else {\n-\t\t\t\tfor ( index in data ) {\n-\t\t\t\t\tif ( data[ index ] && data[ index ].stop && rrun.test( index ) ) {\n-\t\t\t\t\t\tstopQueue( data[ index ] );\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t}\n-\n-\t\t\tfor ( index = timers.length; index--; ) {\n-\t\t\t\tif ( timers[ index ].elem === this &&\n-\t\t\t\t\t( type == null || timers[ index ].queue === type ) ) {\n-\n-\t\t\t\t\ttimers[ index ].anim.stop( gotoEnd );\n-\t\t\t\t\tdequeue = false;\n-\t\t\t\t\ttimers.splice( index, 1 );\n-\t\t\t\t}\n-\t\t\t}\n-\n-\t\t\t\/\/ Start the next in the queue if the last step wasn't forced.\n-\t\t\t\/\/ Timers currently will call their complete callbacks, which\n-\t\t\t\/\/ will dequeue but only if they were gotoEnd.\n-\t\t\tif ( dequeue || !gotoEnd ) {\n-\t\t\t\tjQuery.dequeue( this, type );\n-\t\t\t}\n-\t\t} );\n-\t},\n-\tfinish: function( type ) {\n-\t\tif ( type !== false ) {\n-\t\t\ttype = type || \"fx\";\n-\t\t}\n-\t\treturn this.each( function() {\n-\t\t\tvar index,\n-\t\t\t\tdata = dataPriv.get( this ),\n-\t\t\t\tqueue = data[ type + \"queue\" ],\n-\t\t\t\thooks = data[ type + \"queueHooks\" ],\n-\t\t\t\ttimers = jQuery.timers,\n-\t\t\t\tlength = queue ? queue.length : 0;\n-\n-\t\t\t\/\/ Enable finishing flag on private data\n-\t\t\tdata.finish = true;\n-\n-\t\t\t\/\/ Empty the queue first\n-\t\t\tjQuery.queue( this, type, [] );\n-\n-\t\t\tif ( hooks && hooks.stop ) {\n-\t\t\t\thooks.stop.call( this, true );\n-\t\t\t}\n-\n-\t\t\t\/\/ Look for any active animations, and finish them\n-\t\t\tfor ( index = timers.length; index--; ) {\n-\t\t\t\tif ( timers[ index ].elem === this && timers[ index ].queue === type ) {\n-\t\t\t\t\ttimers[ index ].anim.stop( true );\n-\t\t\t\t\ttimers.splice( index, 1 );\n-\t\t\t\t}\n-\t\t\t}\n-\n-\t\t\t\/\/ Look for any animations in the old queue and finish them\n-\t\t\tfor ( index = 0; index < length; index++ ) {\n-\t\t\t\tif ( queue[ index ] && queue[ index ].finish ) {\n-\t\t\t\t\tqueue[ index ].finish.call( this );\n-\t\t\t\t}\n-\t\t\t}\n-\n-\t\t\t\/\/ Turn off finishing flag\n-\t\t\tdelete data.finish;\n-\t\t} );\n-\t}\n-} );\n-\n-jQuery.each( [ \"toggle\", \"show\", \"hide\" ], function( _i, name ) {\n-\tvar cssFn = jQuery.fn[ name ];\n-\tjQuery.fn[ name ] = function( speed, easing, callback ) {\n-\t\treturn speed == null || typeof speed === \"boolean\" ?\n-\t\t\tcssFn.apply( this, arguments ) :\n-\t\t\tthis.animate( genFx( name, true ), speed, easing, callback );\n-\t};\n-} );\n-\n-\/\/ Generate shortcuts for custom animations\n-jQuery.each( {\n-\tslideDown: genFx( \"show\" ),\n-\tslideUp: genFx( \"hide\" ),\n-\tslideToggle: genFx( \"toggle\" ),\n-\tfadeIn: { opacity: \"show\" },\n-\tfadeOut: { opacity: \"hide\" },\n-\tfadeToggle: { opacity: \"toggle\" }\n-}, function( name, props ) {\n-\tjQuery.fn[ name ] = function( speed, easing, callback ) {\n-\t\treturn this.animate( props, speed, easing, callback );\n-\t};\n-} );\n-\n-jQuery.timers = [];\n-jQuery.fx.tick = function() {\n-\tvar timer,\n-\t\ti = 0,\n-\t\ttimers = jQuery.timers;\n-\n-\tfxNow = Date.now();\n-\n-\tfor ( ; i < timers.length; i++ ) {\n-\t\ttimer = timers[ i ];\n-\n-\t\t\/\/ Run the timer and safely remove it when done (allowing for external removal)\n-\t\tif ( !timer() && timers[ i ] === timer ) {\n-\t\t\ttimers.splice( i--, 1 );\n-\t\t}\n-\t}\n-\n-\tif ( !timers.length ) {\n-\t\tjQuery.fx.stop();\n-\t}\n-\tfxNow = undefined;\n-};\n-\n-jQuery.fx.timer = function( timer ) {\n-\tjQuery.timers.push( timer );\n-\tjQuery.fx.start();\n-};\n-\n-jQuery.fx.interval = 13;\n-jQuery.fx.start = function() {\n-\tif ( inProgress ) {\n-\t\treturn;\n-\t}\n-\n-\tinProgress = true;\n-\tschedule();\n-};\n-\n-jQuery.fx.stop = function() {\n-\tinProgress = null;\n-};\n-\n-jQuery.fx.speeds = {\n-\tslow: 600,\n-\tfast: 200,\n-\n-\t\/\/ Default speed\n-\t_default: 400\n-};\n-\n-\n-\/\/ Based off of the plugin by Clint Helfers, with permission.\n-jQuery.fn.delay = function( time, type ) {\n-\ttime = jQuery.fx ? jQuery.fx.speeds[ time ] || time : time;\n-\ttype = type || \"fx\";\n-\n-\treturn this.queue( type, function( next, hooks ) {\n-\t\tvar timeout = window.setTimeout( next, time );\n-\t\thooks.stop = function() {\n-\t\t\twindow.clearTimeout( timeout );\n-\t\t};\n-\t} );\n-};\n-\n-\n-( function() {\n-\tvar input = document.createElement( \"input\" ),\n-\t\tselect = document.createElement( \"select\" ),\n-\t\topt = select.appendChild( document.createElement( \"option\" ) );\n-\n-\tinput.type = \"checkbox\";\n-\n-\t\/\/ Support: Android <=4.3 only\n-\t\/\/ Default value for a checkbox should be \"on\"\n-\tsupport.checkOn = input.value !== \"\";\n-\n-\t\/\/ Support: IE <=11 only\n-\t\/\/ Must access selectedIndex to make default options select\n-\tsupport.optSelected = opt.selected;\n-\n-\t\/\/ Support: IE <=11 only\n-\t\/\/ An input loses its value after becoming a radio\n-\tinput = document.createElement( \"input\" );\n-\tinput.value = \"t\";\n-\tinput.type = \"radio\";\n-\tsupport.radioValue = input.value === \"t\";\n-} )();\n-\n-\n-var boolHook,\n-\tattrHandle = jQuery.expr.attrHandle;\n-\n-jQuery.fn.extend( {\n-\tattr: function( name, value ) {\n-\t\treturn access( this, jQuery.attr, name, value, arguments.length > 1 );\n-\t},\n-\n-\tremoveAttr: function( name ) {\n-\t\treturn this.each( function() {\n-\t\t\tjQuery.removeAttr( this, name );\n-\t\t} );\n-\t}\n-} );\n-\n-jQuery.extend( {\n-\tattr: function( elem, name, value ) {\n-\t\tvar ret, hooks,\n-\t\t\tnType = elem.nodeType;\n-\n-\t\t\/\/ Don't get\/set attributes on text, comment and attribute nodes\n-\t\tif ( nType === 3 || nType === 8 || nType === 2 ) {\n-\t\t\treturn;\n-\t\t}\n-\n-\t\t\/\/ Fallback to prop when attributes are not supported\n-\t\tif ( typeof elem.getAttribute === \"undefined\" ) {\n-\t\t\treturn jQuery.prop( elem, name, value );\n-\t\t}\n-\n-\t\t\/\/ Attribute hooks are determined by the lowercase version\n-\t\t\/\/ Grab necessary hook if one is defined\n-\t\tif ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {\n-\t\t\thooks = jQuery.attrHooks[ name.toLowerCase() ] ||\n-\t\t\t\t( jQuery.expr.match.bool.test( name ) ? boolHook : undefined );\n-\t\t}\n-\n-\t\tif ( value !== undefined ) {\n-\t\t\tif ( value === null ) {\n-\t\t\t\tjQuery.removeAttr( elem, name );\n-\t\t\t\treturn;\n-\t\t\t}\n-\n-\t\t\tif ( hooks && \"set\" in hooks &&\n-\t\t\t\t( ret = hooks.set( elem, value, name ) ) !== undefined ) {\n-\t\t\t\treturn ret;\n-\t\t\t}\n-\n-\t\t\telem.setAttribute( name, value + \"\" );\n-\t\t\treturn value;\n-\t\t}\n-\n-\t\tif ( hooks && \"get\" in hooks && ( ret = hooks.get( elem, name ) ) !== null ) {\n-\t\t\treturn ret;\n-\t\t}\n-\n-\t\tret = jQuery.find.attr( elem, name );\n-\n-\t\t\/\/ Non-existent attributes return null, we normalize to undefined\n-\t\treturn ret == null ? undefined : ret;\n-\t},\n-\n-\tattrHooks: {\n-\t\ttype: {\n-\t\t\tset: function( elem, value ) {\n-\t\t\t\tif ( !support.radioValue && value === \"radio\" &&\n-\t\t\t\t\tnodeName( elem, \"input\" ) ) {\n-\t\t\t\t\tvar val = elem.value;\n-\t\t\t\t\telem.setAttribute( \"type\", value );\n-\t\t\t\t\tif ( val ) {\n-\t\t\t\t\t\telem.value = val;\n-\t\t\t\t\t}\n-\t\t\t\t\treturn value;\n-\t\t\t\t}\n-\t\t\t}\n-\t\t}\n-\t},\n-\n-\tremoveAttr: function( elem, value ) {\n-\t\tvar name,\n-\t\t\ti = 0,\n-\n-\t\t\t\/\/ Attribute names can contain non-HTML whitespace characters\n-\t\t\t\/\/ https:\/\/html.spec.whatwg.org\/multipage\/syntax.html#attributes-2\n-\t\t\tattrNames = value && value.match( rnothtmlwhite );\n-\n-\t\tif ( attrNames && elem.nodeType === 1 ) {\n-\t\t\twhile ( ( name = attrNames[ i++ ] ) ) {\n-\t\t\t\telem.removeAttribute( name );\n-\t\t\t}\n-\t\t}\n-\t}\n-} );\n-\n-\/\/ Hooks for boolean attributes\n-boolHook = {\n-\tset: function( elem, value, name ) {\n-\t\tif ( value === false ) {\n-\n-\t\t\t\/\/ Remove boolean attributes when set to false\n-\t\t\tjQuery.removeAttr( elem, name );\n-\t\t} else {\n-\t\t\telem.setAttribute( name, name );\n-\t\t}\n-\t\treturn name;\n-\t}\n-};\n-\n-jQuery.each( jQuery.expr.match.bool.source.match( \/\\w+\/g ), function( _i, name ) {\n-\tvar getter = attrHandle[ name ] || jQuery.find.attr;\n-\n-\tattrHandle[ name ] = function( elem, name, isXML ) {\n-\t\tvar ret, handle,\n-\t\t\tlowercaseName = name.toLowerCase();\n-\n-\t\tif ( !isXML ) {\n-\n-\t\t\t\/\/ Avoid an infinite loop by temporarily removing this function from the getter\n-\t\t\thandle = attrHandle[ lowercaseName ];\n-\t\t\tattrHandle[ lowercaseName ] = ret;\n-\t\t\tret = getter( elem, name, isXML ) != null ?\n-\t\t\t\tlowercaseName :\n-\t\t\t\tnull;\n-\t\t\tattrHandle[ lowercaseName ] = handle;\n-\t\t}\n-\t\treturn ret;\n-\t};\n-} );\n-\n-\n-\n-\n-var rfocusable = \/^(?:input|select|textarea|button)$\/i,\n-\trclickable = \/^(?:a|area)$\/i;\n-\n-jQuery.fn.extend( {\n-\tprop: function( name, value ) {\n-\t\treturn access( this, jQuery.prop, name, value, arguments.length > 1 );\n-\t},\n-\n-\tremoveProp: function( name ) {\n-\t\treturn this.each( function() {\n-\t\t\tdelete this[ jQuery.propFix[ name ] || name ];\n-\t\t} );\n-\t}\n-} );\n-\n-jQuery.extend( {\n-\tprop: function( elem, name, value ) {\n-\t\tvar ret, hooks,\n-\t\t\tnType = elem.nodeType;\n-\n-\t\t\/\/ Don't get\/set properties on text, comment and attribute nodes\n-\t\tif ( nType === 3 || nType === 8 || nType === 2 ) {\n-\t\t\treturn;\n-\t\t}\n-\n-\t\tif ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {\n-\n-\t\t\t\/\/ Fix name and attach hooks\n-\t\t\tname = jQuery.propFix[ name ] || name;\n-\t\t\thooks = jQuery.propHooks[ name ];\n-\t\t}\n-\n-\t\tif ( value !== undefined ) {\n-\t\t\tif ( hooks && \"set\" in hooks &&\n-\t\t\t\t( ret = hooks.set( elem, value, name ) ) !== undefined ) {\n-\t\t\t\treturn ret;\n-\t\t\t}\n-\n-\t\t\treturn ( elem[ name ] = value );\n-\t\t}\n-\n-\t\tif ( hooks && \"get\" in hooks && ( ret = hooks.get( elem, name ) ) !== null ) {\n-\t\t\treturn ret;\n-\t\t}\n-\n-\t\treturn elem[ name ];\n-\t},\n-\n-\tpropHooks: {\n-\t\ttabIndex: {\n-\t\t\tget: function( elem ) {\n-\n-\t\t\t\t\/\/ Support: IE <=9 - 11 only\n-\t\t\t\t\/\/ elem.tabIndex doesn't always return the\n-\t\t\t\t\/\/ correct value when it hasn't been explicitly set\n-\t\t\t\t\/\/ Use proper attribute retrieval (trac-12072)\n-\t\t\t\tvar tabindex = jQuery.find.attr( elem, \"tabindex\" );\n-\n-\t\t\t\tif ( tabindex ) {\n-\t\t\t\t\treturn parseInt( tabindex, 10 );\n-\t\t\t\t}\n-\n-\t\t\t\tif (\n-\t\t\t\t\trfocusable.test( elem.nodeName ) ||\n-\t\t\t\t\trclickable.test( elem.nodeName ) &&\n-\t\t\t\t\telem.href\n-\t\t\t\t) {\n-\t\t\t\t\treturn 0;\n-\t\t\t\t}\n-\n-\t\t\t\treturn -1;\n-\t\t\t}\n-\t\t}\n-\t},\n-\n-\tpropFix: {\n-\t\t\"for\": \"htmlFor\",\n-\t\t\"class\": \"className\"\n-\t}\n-} );\n-\n-\/\/ Support: IE <=11 only\n-\/\/ Accessing the selectedIndex property\n-\/\/ forces the browser to respect setting selected\n-\/\/ on the option\n-\/\/ The getter ensures a default option is selected\n-\/\/ when in an optgroup\n-\/\/ eslint rule \"no-unused-expressions\" is disabled for this code\n-\/\/ since it considers such accessions noop\n-if ( !support.optSelected ) {\n-\tjQuery.propHooks.selected = {\n-\t\tget: function( elem ) {\n-\n-\t\t\t\/* eslint no-unused-expressions: \"off\" *\/\n-\n-\t\t\tvar parent = elem.parentNode;\n-\t\t\tif ( parent && parent.parentNode ) {\n-\t\t\t\tparent.parentNode.selectedIndex;\n-\t\t\t}\n-\t\t\treturn null;\n-\t\t},\n-\t\tset: function( elem ) {\n-\n-\t\t\t\/* eslint no-unused-expressions: \"off\" *\/\n-\n-\t\t\tvar parent = elem.parentNode;\n-\t\t\tif ( parent ) {\n-\t\t\t\tparent.selectedIndex;\n-\n-\t\t\t\tif ( parent.parentNode ) {\n-\t\t\t\t\tparent.parentNode.selectedIndex;\n-\t\t\t\t}\n-\t\t\t}\n-\t\t}\n-\t};\n-}\n-\n-jQuery.each( [\n-\t\"tabIndex\",\n-\t\"readOnly\",\n-\t\"maxLength\",\n-\t\"cellSpacing\",\n-\t\"cellPadding\",\n-\t\"rowSpan\",\n-\t\"colSpan\",\n-\t\"useMap\",\n-\t\"frameBorder\",\n-\t\"contentEditable\"\n-], function() {\n-\tjQuery.propFix[ this.toLowerCase() ] = this;\n-} );\n-\n-\n-\n-\n-\t\/\/ Strip and collapse whitespace according to HTML spec\n-\t\/\/ https:\/\/infra.spec.whatwg.org\/#strip-and-collapse-ascii-whitespace\n-\tfunction stripAndCollapse( value ) {\n-\t\tvar tokens = value.match( rnothtmlwhite ) || [];\n-\t\treturn tokens.join( \" \" );\n-\t}\n-\n-\n-function getClass( elem ) {\n-\treturn elem.getAttribute && elem.getAttribute( \"class\" ) || \"\";\n-}\n-\n-function classesToArray( value ) {\n-\tif ( Array.isArray( value ) ) {\n-\t\treturn value;\n-\t}\n-\tif ( typeof value === \"string\" ) {\n-\t\treturn value.match( rnothtmlwhite ) || [];\n-\t}\n-\treturn [];\n-}\n-\n-jQuery.fn.extend( {\n-\taddClass: function( value ) {\n-\t\tvar classNames, cur, curValue, className, i, finalValue;\n-\n-\t\tif ( isFunction( value ) ) {\n-\t\t\treturn this.each( function( j ) {\n-\t\t\t\tjQuery( this ).addClass( value.call( this, j, getClass( this ) ) );\n-\t\t\t} );\n-\t\t}\n-\n-\t\tclassNames = classesToArray( value );\n-\n-\t\tif ( classNames.length ) {\n-\t\t\treturn this.each( function() {\n-\t\t\t\tcurValue = getClass( this );\n-\t\t\t\tcur = this.nodeType === 1 && ( \" \" + stripAndCollapse( curValue ) + \" \" );\n-\n-\t\t\t\tif ( cur ) {\n-\t\t\t\t\tfor ( i = 0; i < classNames.length; i++ ) {\n-\t\t\t\t\t\tclassName = classNames[ i ];\n-\t\t\t\t\t\tif ( cur.indexOf( \" \" + className + \" \" ) < 0 ) {\n-\t\t\t\t\t\t\tcur += className + \" \";\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\n-\t\t\t\t\t\/\/ Only assign if different to avoid unneeded rendering.\n-\t\t\t\t\tfinalValue = stripAndCollapse( cur );\n-\t\t\t\t\tif ( curValue !== finalValue ) {\n-\t\t\t\t\t\tthis.setAttribute( \"class\", finalValue );\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t} );\n-\t\t}\n-\n-\t\treturn this;\n-\t},\n-\n-\tremoveClass: function( value ) {\n-\t\tvar classNames, cur, curValue, className, i, finalValue;\n-\n-\t\tif ( isFunction( value ) ) {\n-\t\t\treturn this.each( function( j ) {\n-\t\t\t\tjQuery( this ).removeClass( value.call( this, j, getClass( this ) ) );\n-\t\t\t} );\n-\t\t}\n-\n-\t\tif ( !arguments.length ) {\n-\t\t\treturn this.attr( \"class\", \"\" );\n-\t\t}\n-\n-\t\tclassNames = classesToArray( value );\n-\n-\t\tif ( classNames.length ) {\n-\t\t\treturn this.each( function() {\n-\t\t\t\tcurValue = getClass( this );\n-\n-\t\t\t\t\/\/ This expression is here for better compressibility (see addClass)\n-\t\t\t\tcur = this.nodeType === 1 && ( \" \" + stripAndCollapse( curValue ) + \" \" );\n-\n-\t\t\t\tif ( cur ) {\n-\t\t\t\t\tfor ( i = 0; i < classNames.length; i++ ) {\n-\t\t\t\t\t\tclassName = classNames[ i ];\n-\n-\t\t\t\t\t\t\/\/ Remove *all* instances\n-\t\t\t\t\t\twhile ( cur.indexOf( \" \" + className + \" \" ) > -1 ) {\n-\t\t\t\t\t\t\tcur = cur.replace( \" \" + className + \" \", \" \" );\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\n-\t\t\t\t\t\/\/ Only assign if different to avoid unneeded rendering.\n-\t\t\t\t\tfinalValue = stripAndCollapse( cur );\n-\t\t\t\t\tif ( curValue !== finalValue ) {\n-\t\t\t\t\t\tthis.setAttribute( \"class\", finalValue );\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t} );\n-\t\t}\n-\n-\t\treturn this;\n-\t},\n-\n-\ttoggleClass: function( value, stateVal ) {\n-\t\tvar classNames, className, i, self,\n-\t\t\ttype = typeof value,\n-\t\t\tisValidValue = type === \"string\" || Array.isArray( value );\n-\n-\t\tif ( isFunction( value ) ) {\n-\t\t\treturn this.each( function( i ) {\n-\t\t\t\tjQuery( this ).toggleClass(\n-\t\t\t\t\tvalue.call( this, i, getClass( this ), stateVal ),\n-\t\t\t\t\tstateVal\n-\t\t\t\t);\n-\t\t\t} );\n-\t\t}\n-\n-\t\tif ( typeof stateVal === \"boolean\" && isValidValue ) {\n-\t\t\treturn stateVal ? this.addClass( value ) : this.removeClass( value );\n-\t\t}\n-\n-\t\tclassNames = classesToArray( value );\n-\n-\t\treturn this.each( function() {\n-\t\t\tif ( isValidValue ) {\n-\n-\t\t\t\t\/\/ Toggle individual class names\n-\t\t\t\tself = jQuery( this );\n-\n-\t\t\t\tfor ( i = 0; i < classNames.length; i++ ) {\n-\t\t\t\t\tclassName = classNames[ i ];\n-\n-\t\t\t\t\t\/\/ Check each className given, space separated list\n-\t\t\t\t\tif ( self.hasClass( className ) ) {\n-\t\t\t\t\t\tself.removeClass( className );\n-\t\t\t\t\t} else {\n-\t\t\t\t\t\tself.addClass( className );\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\n-\t\t\t\/\/ Toggle whole class name\n-\t\t\t} else if ( value === undefined || type === \"boolean\" ) {\n-\t\t\t\tclassName = getClass( this );\n-\t\t\t\tif ( className ) {\n-\n-\t\t\t\t\t\/\/ Store className if set\n-\t\t\t\t\tdataPriv.set( this, \"__className__\", className );\n-\t\t\t\t}\n-\n-\t\t\t\t\/\/ If the element has a class name or if we're passed `false`,\n-\t\t\t\t\/\/ then remove the whole classname (if there was one, the above saved it).\n-\t\t\t\t\/\/ Otherwise bring back whatever was previously saved (if anything),\n-\t\t\t\t\/\/ falling back to the empty string if nothing was stored.\n-\t\t\t\tif ( this.setAttribute ) {\n-\t\t\t\t\tthis.setAttribute( \"class\",\n-\t\t\t\t\t\tclassName || value === false ?\n-\t\t\t\t\t\t\t\"\" :\n-\t\t\t\t\t\t\tdataPriv.get( this, \"__className__\" ) || \"\"\n-\t\t\t\t\t);\n-\t\t\t\t}\n-\t\t\t}\n-\t\t} );\n-\t},\n-\n-\thasClass: function( selector ) {\n-\t\tvar className, elem,\n-\t\t\ti = 0;\n-\n-\t\tclassName = \" \" + selector + \" \";\n-\t\twhile ( ( elem = this[ i++ ] ) ) {\n-\t\t\tif ( elem.nodeType === 1 &&\n-\t\t\t\t( \" \" + stripAndCollapse( getClass( elem ) ) + \" \" ).indexOf( className ) > -1 ) {\n-\t\t\t\treturn true;\n-\t\t\t}\n-\t\t}\n-\n-\t\treturn false;\n-\t}\n-} );\n-\n-\n-\n-\n-var rreturn = \/\\r\/g;\n-\n-jQuery.fn.extend( {\n-\tval: function( value ) {\n-\t\tvar hooks, ret, valueIsFunction,\n-\t\t\telem = this[ 0 ];\n-\n-\t\tif ( !arguments.length ) {\n-\t\t\tif ( elem ) {\n-\t\t\t\thooks = jQuery.valHooks[ elem.type ] ||\n-\t\t\t\t\tjQuery.valHooks[ elem.nodeName.toLowerCase() ];\n-\n-\t\t\t\tif ( hooks &&\n-\t\t\t\t\t\"get\" in hooks &&\n-\t\t\t\t\t( ret = hooks.get( elem, \"value\" ) ) !== undefined\n-\t\t\t\t) {\n-\t\t\t\t\treturn ret;\n-\t\t\t\t}\n-\n-\t\t\t\tret = elem.value;\n-\n-\t\t\t\t\/\/ Handle most common string cases\n-\t\t\t\tif ( typeof ret === \"string\" ) {\n-\t\t\t\t\treturn ret.replace( rreturn, \"\" );\n-\t\t\t\t}\n-\n-\t\t\t\t\/\/ Handle cases where value is null\/undef or number\n-\t\t\t\treturn ret == null ? \"\" : ret;\n-\t\t\t}\n-\n-\t\t\treturn;\n-\t\t}\n-\n-\t\tvalueIsFunction = isFunction( value );\n-\n-\t\treturn this.each( function( i ) {\n-\t\t\tvar val;\n-\n-\t\t\tif ( this.nodeType !== 1 ) {\n-\t\t\t\treturn;\n-\t\t\t}\n-\n-\t\t\tif ( valueIsFunction ) {\n-\t\t\t\tval = value.call( this, i, jQuery( this ).val() );\n-\t\t\t} else {\n-\t\t\t\tval = value;\n-\t\t\t}\n-\n-\t\t\t\/\/ Treat null\/undefined as \"\"; convert numbers to string\n-\t\t\tif ( val == null ) {\n-\t\t\t\tval = \"\";\n-\n-\t\t\t} else if ( typeof val === \"number\" ) {\n-\t\t\t\tval += \"\";\n-\n-\t\t\t} else if ( Array.isArray( val ) ) {\n-\t\t\t\tval = jQuery.map( val, function( value ) {\n-\t\t\t\t\treturn value == null ? \"\" : value + \"\";\n-\t\t\t\t} );\n-\t\t\t}\n-\n-\t\t\thooks = jQuery.valHooks[ this.type ] || jQuery.valHooks[ this.nodeName.toLowerCase() ];\n-\n-\t\t\t\/\/ If set returns undefined, fall back to normal setting\n-\t\t\tif ( !hooks || !( \"set\" in hooks ) || hooks.set( this, val, \"value\" ) === undefined ) {\n-\t\t\t\tthis.value = val;\n-\t\t\t}\n-\t\t} );\n-\t}\n-} );\n-\n-jQuery.extend( {\n-\tvalHooks: {\n-\t\toption: {\n-\t\t\tget: function( elem ) {\n-\n-\t\t\t\tvar val = jQuery.find.attr( elem, \"value\" );\n-\t\t\t\treturn val != null ?\n-\t\t\t\t\tval :\n-\n-\t\t\t\t\t\/\/ Support: IE <=10 - 11 only\n-\t\t\t\t\t\/\/ option.text throws exceptions (trac-14686, trac-14858)\n-\t\t\t\t\t\/\/ Strip and collapse whitespace\n-\t\t\t\t\t\/\/ https:\/\/html.spec.whatwg.org\/#strip-and-collapse-whitespace\n-\t\t\t\t\tstripAndCollapse( jQuery.text( elem ) );\n-\t\t\t}\n-\t\t},\n-\t\tselect: {\n-\t\t\tget: function( elem ) {\n-\t\t\t\tvar value, option, i,\n-\t\t\t\t\toptions = elem.options,\n-\t\t\t\t\tindex = elem.selectedIndex,\n-\t\t\t\t\tone = elem.type === \"select-one\",\n-\t\t\t\t\tvalues = one ? null : [],\n-\t\t\t\t\tmax = one ? index + 1 : options.length;\n-\n-\t\t\t\tif ( index < 0 ) {\n-\t\t\t\t\ti = max;\n-\n-\t\t\t\t} else {\n-\t\t\t\t\ti = one ? index : 0;\n-\t\t\t\t}\n-\n-\t\t\t\t\/\/ Loop through all the selected options\n-\t\t\t\tfor ( ; i < max; i++ ) {\n-\t\t\t\t\toption = options[ i ];\n-\n-\t\t\t\t\t\/\/ Support: IE <=9 only\n-\t\t\t\t\t\/\/ IE8-9 doesn't update selected after form reset (trac-2551)\n-\t\t\t\t\tif ( ( option.selected || i === index ) &&\n-\n-\t\t\t\t\t\t\t\/\/ Don't return options that are disabled or in a disabled optgroup\n-\t\t\t\t\t\t\t!option.disabled &&\n-\t\t\t\t\t\t\t( !option.parentNode.disabled ||\n-\t\t\t\t\t\t\t\t!nodeName( option.parentNode, \"optgroup\" ) ) ) {\n-\n-\t\t\t\t\t\t\/\/ Get the specific value for the option\n-\t\t\t\t\t\tvalue = jQuery( option ).val();\n-\n-\t\t\t\t\t\t\/\/ We don't need an array for one selects\n-\t\t\t\t\t\tif ( one ) {\n-\t\t\t\t\t\t\treturn value;\n-\t\t\t\t\t\t}\n-\n-\t\t\t\t\t\t\/\/ Multi-Selects return an array\n-\t\t\t\t\t\tvalues.push( value );\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\n-\t\t\t\treturn values;\n-\t\t\t},\n-\n-\t\t\tset: function( elem, value ) {\n-\t\t\t\tvar optionSet, option,\n-\t\t\t\t\toptions = elem.options,\n-\t\t\t\t\tvalues = jQuery.makeArray( value ),\n-\t\t\t\t\ti = options.length;\n-\n-\t\t\t\twhile ( i-- ) {\n-\t\t\t\t\toption = options[ i ];\n-\n-\t\t\t\t\t\/* eslint-disable no-cond-assign *\/\n-\n-\t\t\t\t\tif ( option.selected =\n-\t\t\t\t\t\tjQuery.inArray( jQuery.valHooks.option.get( option ), values ) > -1\n-\t\t\t\t\t) {\n-\t\t\t\t\t\toptionSet = true;\n-\t\t\t\t\t}\n-\n-\t\t\t\t\t\/* eslint-enable no-cond-assign *\/\n-\t\t\t\t}\n-\n-\t\t\t\t\/\/ Force browsers to behave consistently when non-matching value is set\n-\t\t\t\tif ( !optionSet ) {\n-\t\t\t\t\telem.selectedIndex = -1;\n-\t\t\t\t}\n-\t\t\t\treturn values;\n-\t\t\t}\n-\t\t}\n-\t}\n-} );\n-\n-\/\/ Radios and checkboxes getter\/setter\n-jQuery.each( [ \"radio\", \"checkbox\" ], function() {\n-\tjQuery.valHooks[ this ] = {\n-\t\tset: function( elem, value ) {\n-\t\t\tif ( Array.isArray( value ) ) {\n-\t\t\t\treturn ( elem.checked = jQuery.inArray( jQuery( elem ).val(), value ) > -1 );\n-\t\t\t}\n-\t\t}\n-\t};\n-\tif ( !support.checkOn ) {\n-\t\tjQuery.valHooks[ this ].get = function( elem ) {\n-\t\t\treturn elem.getAttribute( \"value\" ) === null ? \"on\" : elem.value;\n-\t\t};\n-\t}\n-} );\n-\n-\n-\n-\n-\/\/ Return jQuery for attributes-only inclusion\n-\n-\n-support.focusin = \"onfocusin\" in window;\n-\n-\n-var rfocusMorph = \/^(?:focusinfocus|focusoutblur)$\/,\n-\tstopPropagationCallback = function( e ) {\n-\t\te.stopPropagation();\n-\t};\n-\n-jQuery.extend( jQuery.event, {\n-\n-\ttrigger: function( event, data, elem, onlyHandlers ) {\n-\n-\t\tvar i, cur, tmp, bubbleType, ontype, handle, special, lastElement,\n-\t\t\teventPath = [ elem || document ],\n-\t\t\ttype = hasOwn.call( event, \"type\" ) ? event.type : event,\n-\t\t\tnamespaces = hasOwn.call( event, \"namespace\" ) ? event.namespace.split( \".\" ) : [];\n-\n-\t\tcur = lastElement = tmp = elem = elem || document;\n-\n-\t\t\/\/ Don't do events on text and comment nodes\n-\t\tif ( elem.nodeType === 3 || elem.nodeType === 8 ) {\n-\t\t\treturn;\n-\t\t}\n-\n-\t\t\/\/ focus\/blur morphs to focusin\/out; ensure we're not firing them right now\n-\t\tif ( rfocusMorph.test( type + jQuery.event.triggered ) ) {\n-\t\t\treturn;\n-\t\t}\n-\n-\t\tif ( type.indexOf( \".\" ) > -1 ) {\n-\n-\t\t\t\/\/ Namespaced trigger; create a regexp to match event type in handle()\n-\t\t\tnamespaces = type.split( \".\" );\n-\t\t\ttype = namespaces.shift();\n-\t\t\tnamespaces.sort();\n-\t\t}\n-\t\tontype = type.indexOf( \":\" ) < 0 && \"on\" + type;\n-\n-\t\t\/\/ Caller can pass in a jQuery.Event object, Object, or just an event type string\n-\t\tevent = event[ jQuery.expando ] ?\n-\t\t\tevent :\n-\t\t\tnew jQuery.Event( type, typeof event === \"object\" && event );\n-\n-\t\t\/\/ Trigger bitmask: & 1 for native handlers; & 2 for jQuery (always true)\n-\t\tevent.isTrigger = onlyHandlers ? 2 : 3;\n-\t\tevent.namespace = namespaces.join( \".\" );\n-\t\tevent.rnamespace = event.namespace ?\n-\t\t\tnew RegExp( \"(^|\\\\.)\" + namespaces.join( \"\\\\.(?:.*\\\\.|)\" ) + \"(\\\\.|$)\" ) :\n-\t\t\tnull;\n-\n-\t\t\/\/ Clean up the event in case it is being reused\n-\t\tevent.result = undefined;\n-\t\tif ( !event.target ) {\n-\t\t\tevent.target = elem;\n-\t\t}\n-\n-\t\t\/\/ Clone any incoming data and prepend the event, creating the handler arg list\n-\t\tdata = data == null ?\n-\t\t\t[ event ] :\n-\t\t\tjQuery.makeArray( data, [ event ] );\n-\n-\t\t\/\/ Allow special events to draw outside the lines\n-\t\tspecial = jQuery.event.special[ type ] || {};\n-\t\tif ( !onlyHandlers && special.trigger && special.trigger.apply( elem, data ) === false ) {\n-\t\t\treturn;\n-\t\t}\n-\n-\t\t\/\/ Determine event propagation path in advance, per W3C events spec (trac-9951)\n-\t\t\/\/ Bubble up to document, then to window; watch for a global ownerDocument var (trac-9724)\n-\t\tif ( !onlyHandlers && !special.noBubble && !isWindow( elem ) ) {\n-\n-\t\t\tbubbleType = special.delegateType || type;\n-\t\t\tif ( !rfocusMorph.test( bubbleType + type ) ) {\n-\t\t\t\tcur = cur.parentNode;\n-\t\t\t}\n-\t\t\tfor ( ; cur; cur = cur.parentNode ) {\n-\t\t\t\teventPath.push( cur );\n-\t\t\t\ttmp = cur;\n-\t\t\t}\n-\n-\t\t\t\/\/ Only add window if we got to document (e.g., not plain obj or detached DOM)\n-\t\t\tif ( tmp === ( elem.ownerDocument || document ) ) {\n-\t\t\t\teventPath.push( tmp.defaultView || tmp.parentWindow || window );\n-\t\t\t}\n-\t\t}\n-\n-\t\t\/\/ Fire handlers on the event path\n-\t\ti = 0;\n-\t\twhile ( ( cur = eventPath[ i++ ] ) && !event.isPropagationStopped() ) {\n-\t\t\tlastElement = cur;\n-\t\t\tevent.type = i > 1 ?\n-\t\t\t\tbubbleType :\n-\t\t\t\tspecial.bindType || type;\n-\n-\t\t\t\/\/ jQuery handler\n-\t\t\thandle = ( dataPriv.get( cur, \"events\" ) || Object.create( null ) )[ event.type ] &&\n-\t\t\t\tdataPriv.get( cur, \"handle\" );\n-\t\t\tif ( handle ) {\n-\t\t\t\thandle.apply( cur, data );\n-\t\t\t}\n-\n-\t\t\t\/\/ Native handler\n-\t\t\thandle = ontype && cur[ ontype ];\n-\t\t\tif ( handle && handle.apply && acceptData( cur ) ) {\n-\t\t\t\tevent.result = handle.apply( cur, data );\n-\t\t\t\tif ( event.result === false ) {\n-\t\t\t\t\tevent.preventDefault();\n-\t\t\t\t}\n-\t\t\t}\n-\t\t}\n-\t\tevent.type = type;\n-\n-\t\t\/\/ If nobody prevented the default action, do it now\n-\t\tif ( !onlyHandlers && !event.isDefaultPrevented() ) {\n-\n-\t\t\tif ( ( !special._default ||\n-\t\t\t\tspecial._default.apply( eventPath.pop(), data ) === false ) &&\n-\t\t\t\tacceptData( elem ) ) {\n-\n-\t\t\t\t\/\/ Call a native DOM method on the target with the same name as the event.\n-\t\t\t\t\/\/ Don't do default actions on window, that's where global variables be (trac-6170)\n-\t\t\t\tif ( ontype && isFunction( elem[ type ] ) && !isWindow( elem ) ) {\n-\n-\t\t\t\t\t\/\/ Don't re-trigger an onFOO event when we call its FOO() method\n-\t\t\t\t\ttmp = elem[ ontype ];\n-\n-\t\t\t\t\tif ( tmp ) {\n-\t\t\t\t\t\telem[ ontype ] = null;\n-\t\t\t\t\t}\n-\n-\t\t\t\t\t\/\/ Prevent re-triggering of the same event, since we already bubbled it above\n-\t\t\t\t\tjQuery.event.triggered = type;\n-\n-\t\t\t\t\tif ( event.isPropagationStopped() ) {\n-\t\t\t\t\t\tlastElement.addEventListener( type, stopPropagationCallback );\n-\t\t\t\t\t}\n-\n-\t\t\t\t\telem[ type ]();\n-\n-\t\t\t\t\tif ( event.isPropagationStopped() ) {\n-\t\t\t\t\t\tlastElement.removeEventListener( type, stopPropagationCallback );\n-\t\t\t\t\t}\n-\n-\t\t\t\t\tjQuery.event.triggered = undefined;\n-\n-\t\t\t\t\tif ( tmp ) {\n-\t\t\t\t\t\telem[ ontype ] = tmp;\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t}\n-\t\t}\n-\n-\t\treturn event.result;\n-\t},\n-\n-\t\/\/ Piggyback on a donor event to simulate a different one\n-\t\/\/ Used only for `focus(in | out)` events\n-\tsimulate: function( type, elem, event ) {\n-\t\tvar e = jQuery.extend(\n-\t\t\tnew jQuery.Event(),\n-\t\t\tevent,\n-\t\t\t{\n-\t\t\t\ttype: type,\n-\t\t\t\tisSimulated: true\n-\t\t\t}\n-\t\t);\n-\n-\t\tjQuery.event.trigger( e, null, elem );\n-\t}\n-\n-} );\n-\n-jQuery.fn.extend( {\n-\n-\ttrigger: function( type, data ) {\n-\t\treturn this.each( function() {\n-\t\t\tjQuery.event.trigger( type, data, this );\n-\t\t} );\n-\t},\n-\ttriggerHandler: function( type, data ) {\n-\t\tvar elem = this[ 0 ];\n-\t\tif ( elem ) {\n-\t\t\treturn jQuery.event.trigger( type, data, elem, true );\n-\t\t}\n-\t}\n-} );\n-\n-\n-\/\/ Support: Firefox <=44\n-\/\/ Firefox doesn't have focus(in | out) events\n-\/\/ Related ticket - https:\/\/bugzilla.mozilla.org\/show_bug.cgi?id=687787\n-\/\/\n-\/\/ Support: Chrome <=48 - 49, Safari <=9.0 - 9.1\n-\/\/ focus(in | out) events fire after focus & blur events,\n-\/\/ which is spec violation - http:\/\/www.w3.org\/TR\/DOM-Level-3-Events\/#events-focusevent-event-order\n-\/\/ Related ticket - https:\/\/bugs.chromium.org\/p\/chromium\/issues\/detail?id=449857\n-if ( !support.focusin ) {\n-\tjQuery.each( { focus: \"focusin\", blur: \"focusout\" }, function( orig, fix ) {\n-\n-\t\t\/\/ Attach a single capturing handler on the document while someone wants focusin\/focusout\n-\t\tvar handler = function( event ) {\n-\t\t\tjQuery.event.simulate( fix, event.target, jQuery.event.fix( event ) );\n-\t\t};\n-\n-\t\tjQuery.event.special[ fix ] = {\n-\t\t\tsetup: function() {\n-\n-\t\t\t\t\/\/ Handle: regular nodes (via `this.ownerDocument`), window\n-\t\t\t\t\/\/ (via `this.document`) & document (via `this`).\n-\t\t\t\tvar doc = this.ownerDocument || this.document || this,\n-\t\t\t\t\tattaches = dataPriv.access( doc, fix );\n-\n-\t\t\t\tif ( !attaches ) {\n-\t\t\t\t\tdoc.addEventListener( orig, handler, true );\n-\t\t\t\t}\n-\t\t\t\tdataPriv.access( doc, fix, ( attaches || 0 ) + 1 );\n-\t\t\t},\n-\t\t\tteardown: function() {\n-\t\t\t\tvar doc = this.ownerDocument || this.document || this,\n-\t\t\t\t\tattaches = dataPriv.access( doc, fix ) - 1;\n-\n-\t\t\t\tif ( !attaches ) {\n-\t\t\t\t\tdoc.removeEventListener( orig, handler, true );\n-\t\t\t\t\tdataPriv.remove( doc, fix );\n-\n-\t\t\t\t} else {\n-\t\t\t\t\tdataPriv.access( doc, fix, attaches );\n-\t\t\t\t}\n-\t\t\t}\n-\t\t};\n-\t} );\n-}\n-var location = window.location;\n-\n-var nonce = { guid: Date.now() };\n-\n-var rquery = ( \/\\?\/ );\n-\n-\n-\n-\/\/ Cross-browser xml parsing\n-jQuery.parseXML = function( data ) {\n-\tvar xml, parserErrorElem;\n-\tif ( !data || typeof data !== \"string\" ) {\n-\t\treturn null;\n-\t}\n-\n-\t\/\/ Support: IE 9 - 11 only\n-\t\/\/ IE throws on parseFromString with invalid input.\n-\ttry {\n-\t\txml = ( new window.DOMParser() ).parseFromString( data, \"text\/xml\" );\n-\t} catch ( e ) {}\n-\n-\tparserErrorElem = xml && xml.getElementsByTagName( \"parsererror\" )[ 0 ];\n-\tif ( !xml || parserErrorElem ) {\n-\t\tjQuery.error( \"Invalid XML: \" + (\n-\t\t\tparserErrorElem ?\n-\t\t\t\tjQuery.map( parserErrorElem.childNodes, function( el ) {\n-\t\t\t\t\treturn el.textContent;\n-\t\t\t\t} ).join( \"\\n\" ) :\n-\t\t\t\tdata\n-\t\t) );\n-\t}\n-\treturn xml;\n-};\n-\n-\n-var\n-\trbracket = \/\\[\\]$\/,\n-\trCRLF = \/\\r?\\n\/g,\n-\trsubmitterTypes = \/^(?:submit|button|image|reset|file)$\/i,\n-\trsubmittable = \/^(?:input|select|textarea|keygen)\/i;\n-\n-function buildParams( prefix, obj, traditional, add ) {\n-\tvar name;\n-\n-\tif ( Array.isArray( obj ) ) {\n-\n-\t\t\/\/ Serialize array item.\n-\t\tjQuery.each( obj, function( i, v ) {\n-\t\t\tif ( traditional || rbracket.test( prefix ) ) {\n-\n-\t\t\t\t\/\/ Treat each array item as a scalar.\n-\t\t\t\tadd( prefix, v );\n-\n-\t\t\t} else {\n-\n-\t\t\t\t\/\/ Item is non-scalar (array or object), encode its numeric index.\n-\t\t\t\tbuildParams(\n-\t\t\t\t\tprefix + \"[\" + ( typeof v === \"object\" && v != null ? i : \"\" ) + \"]\",\n-\t\t\t\t\tv,\n-\t\t\t\t\ttraditional,\n-\t\t\t\t\tadd\n-\t\t\t\t);\n-\t\t\t}\n-\t\t} );\n-\n-\t} else if ( !traditional && toType( obj ) === \"object\" ) {\n-\n-\t\t\/\/ Serialize object item.\n-\t\tfor ( name in obj ) {\n-\t\t\tbuildParams( prefix + \"[\" + name + \"]\", obj[ name ], traditional, add );\n-\t\t}\n-\n-\t} else {\n-\n-\t\t\/\/ Serialize scalar item.\n-\t\tadd( prefix, obj );\n-\t}\n-}\n-\n-\/\/ Serialize an array of form elements or a set of\n-\/\/ key\/values into a query string\n-jQuery.param = function( a, traditional ) {\n-\tvar prefix,\n-\t\ts = [],\n-\t\tadd = function( key, valueOrFunction ) {\n-\n-\t\t\t\/\/ If value is a function, invoke it and use its return value\n-\t\t\tvar value = isFunction( valueOrFunction ) ?\n-\t\t\t\tvalueOrFunction() :\n-\t\t\t\tvalueOrFunction;\n-\n-\t\t\ts[ s.length ] = encodeURIComponent( key ) + \"=\" +\n-\t\t\t\tencodeURIComponent( value == null ? \"\" : value );\n-\t\t};\n-\n-\tif ( a == null ) {\n-\t\treturn \"\";\n-\t}\n-\n-\t\/\/ If an array was passed in, assume that it is an array of form elements.\n-\tif ( Array.isArray( a ) || ( a.jquery && !jQuery.isPlainObject( a ) ) ) {\n-\n-\t\t\/\/ Serialize the form elements\n-\t\tjQuery.each( a, function() {\n-\t\t\tadd( this.name, this.value );\n-\t\t} );\n-\n-\t} else {\n-\n-\t\t\/\/ If traditional, encode the \"old\" way (the way 1.3.2 or older\n-\t\t\/\/ did it), otherwise encode params recursively.\n-\t\tfor ( prefix in a ) {\n-\t\t\tbuildParams( prefix, a[ prefix ], traditional, add );\n-\t\t}\n-\t}\n-\n-\t\/\/ Return the resulting serialization\n-\treturn s.join( \"&\" );\n-};\n-\n-jQuery.fn.extend( {\n-\tserialize: function() {\n-\t\treturn jQuery.param( this.serializeArray() );\n-\t},\n-\tserializeArray: function() {\n-\t\treturn this.map( function() {\n-\n-\t\t\t\/\/ Can add propHook for \"elements\" to filter or add form elements\n-\t\t\tvar elements = jQuery.prop( this, \"elements\" );\n-\t\t\treturn elements ? jQuery.makeArray( elements ) : this;\n-\t\t} ).filter( function() {\n-\t\t\tvar type = this.type;\n-\n-\t\t\t\/\/ Use .is( \":disabled\" ) so that fieldset[disabled] works\n-\t\t\treturn this.name && !jQuery( this ).is( \":disabled\" ) &&\n-\t\t\t\trsubmittable.test( this.nodeName ) && !rsubmitterTypes.test( type ) &&\n-\t\t\t\t( this.checked || !rcheckableType.test( type ) );\n-\t\t} ).map( function( _i, elem ) {\n-\t\t\tvar val = jQuery( this ).val();\n-\n-\t\t\tif ( val == null ) {\n-\t\t\t\treturn null;\n-\t\t\t}\n-\n-\t\t\tif ( Array.isArray( val ) ) {\n-\t\t\t\treturn jQuery.map( val, function( val ) {\n-\t\t\t\t\treturn { name: elem.name, value: val.replace( rCRLF, \"\\r\\n\" ) };\n-\t\t\t\t} );\n-\t\t\t}\n-\n-\t\t\treturn { name: elem.name, value: val.replace( rCRLF, \"\\r\\n\" ) };\n-\t\t} ).get();\n-\t}\n-} );\n-\n-\n-var\n-\tr20 = \/%20\/g,\n-\trhash = \/#.*$\/,\n-\trantiCache = \/([?&])_=[^&]*\/,\n-\trheaders = \/^(.*?):[ \\t]*([^\\r\\n]*)$\/mg,\n-\n-\t\/\/ trac-7653, trac-8125, trac-8152: local protocol detection\n-\trlocalProtocol = \/^(?:about|app|app-storage|.+-extension|file|res|widget):$\/,\n-\trnoContent = \/^(?:GET|HEAD)$\/,\n-\trprotocol = \/^\\\/\\\/\/,\n-\n-\t\/* Prefilters\n-\t * 1) They are useful to introduce custom dataTypes (see ajax\/jsonp.js for an example)\n-\t * 2) These are called:\n-\t *    - BEFORE asking for a transport\n-\t *    - AFTER param serialization (s.data is a string if s.processData is true)\n-\t * 3) key is the dataType\n-\t * 4) the catchall symbol \"*\" can be used\n-\t * 5) execution will start with transport dataType and THEN continue down to \"*\" if needed\n-\t *\/\n-\tprefilters = {},\n-\n-\t\/* Transports bindings\n-\t * 1) key is the dataType\n-\t * 2) the catchall symbol \"*\" can be used\n-\t * 3) selection will start with transport dataType and THEN go to \"*\" if needed\n-\t *\/\n-\ttransports = {},\n-\n-\t\/\/ Avoid comment-prolog char sequence (trac-10098); must appease lint and evade compression\n-\tallTypes = \"*\/\".concat( \"*\" ),\n-\n-\t\/\/ Anchor tag for parsing the document origin\n-\toriginAnchor = document.createElement( \"a\" );\n-\n-originAnchor.href = location.href;\n-\n-\/\/ Base \"constructor\" for jQuery.ajaxPrefilter and jQuery.ajaxTransport\n-function addToPrefiltersOrTransports( structure ) {\n-\n-\t\/\/ dataTypeExpression is optional and defaults to \"*\"\n-\treturn function( dataTypeExpression, func ) {\n-\n-\t\tif ( typeof dataTypeExpression !== \"string\" ) {\n-\t\t\tfunc = dataTypeExpression;\n-\t\t\tdataTypeExpression = \"*\";\n-\t\t}\n-\n-\t\tvar dataType,\n-\t\t\ti = 0,\n-\t\t\tdataTypes = dataTypeExpression.toLowerCase().match( rnothtmlwhite ) || [];\n-\n-\t\tif ( isFunction( func ) ) {\n-\n-\t\t\t\/\/ For each dataType in the dataTypeExpression\n-\t\t\twhile ( ( dataType = dataTypes[ i++ ] ) ) {\n-\n-\t\t\t\t\/\/ Prepend if requested\n-\t\t\t\tif ( dataType[ 0 ] === \"+\" ) {\n-\t\t\t\t\tdataType = dataType.slice( 1 ) || \"*\";\n-\t\t\t\t\t( structure[ dataType ] = structure[ dataType ] || [] ).unshift( func );\n-\n-\t\t\t\t\/\/ Otherwise append\n-\t\t\t\t} else {\n-\t\t\t\t\t( structure[ dataType ] = structure[ dataType ] || [] ).push( func );\n-\t\t\t\t}\n-\t\t\t}\n-\t\t}\n-\t};\n-}\n-\n-\/\/ Base inspection function for prefilters and transports\n-function inspectPrefiltersOrTransports( structure, options, originalOptions, jqXHR ) {\n-\n-\tvar inspected = {},\n-\t\tseekingTransport = ( structure === transports );\n-\n-\tfunction inspect( dataType ) {\n-\t\tvar selected;\n-\t\tinspected[ dataType ] = true;\n-\t\tjQuery.each( structure[ dataType ] || [], function( _, prefilterOrFactory ) {\n-\t\t\tvar dataTypeOrTransport = prefilterOrFactory( options, originalOptions, jqXHR );\n-\t\t\tif ( typeof dataTypeOrTransport === \"string\" &&\n-\t\t\t\t!seekingTransport && !inspected[ dataTypeOrTransport ] ) {\n-\n-\t\t\t\toptions.dataTypes.unshift( dataTypeOrTransport );\n-\t\t\t\tinspect( dataTypeOrTransport );\n-\t\t\t\treturn false;\n-\t\t\t} else if ( seekingTransport ) {\n-\t\t\t\treturn !( selected = dataTypeOrTransport );\n-\t\t\t}\n-\t\t} );\n-\t\treturn selected;\n-\t}\n-\n-\treturn inspect( options.dataTypes[ 0 ] ) || !inspected[ \"*\" ] && inspect( \"*\" );\n-}\n-\n-\/\/ A special extend for ajax options\n-\/\/ that takes \"flat\" options (not to be deep extended)\n-\/\/ Fixes trac-9887\n-function ajaxExtend( target, src ) {\n-\tvar key, deep,\n-\t\tflatOptions = jQuery.ajaxSettings.flatOptions || {};\n-\n-\tfor ( key in src ) {\n-\t\tif ( src[ key ] !== undefined ) {\n-\t\t\t( flatOptions[ key ] ? target : ( deep || ( deep = {} ) ) )[ key ] = src[ key ];\n-\t\t}\n-\t}\n-\tif ( deep ) {\n-\t\tjQuery.extend( true, target, deep );\n-\t}\n-\n-\treturn target;\n-}\n-\n-\/* Handles responses to an ajax request:\n- * - finds the right dataType (mediates between content-type and expected dataType)\n- * - returns the corresponding response\n- *\/\n-function ajaxHandleResponses( s, jqXHR, responses ) {\n-\n-\tvar ct, type, finalDataType, firstDataType,\n-\t\tcontents = s.contents,\n-\t\tdataTypes = s.dataTypes;\n-\n-\t\/\/ Remove auto dataType and get content-type in the process\n-\twhile ( dataTypes[ 0 ] === \"*\" ) {\n-\t\tdataTypes.shift();\n-\t\tif ( ct === undefined ) {\n-\t\t\tct = s.mimeType || jqXHR.getResponseHeader( \"Content-Type\" );\n-\t\t}\n-\t}\n-\n-\t\/\/ Check if we're dealing with a known content-type\n-\tif ( ct ) {\n-\t\tfor ( type in contents ) {\n-\t\t\tif ( contents[ type ] && contents[ type ].test( ct ) ) {\n-\t\t\t\tdataTypes.unshift( type );\n-\t\t\t\tbreak;\n-\t\t\t}\n-\t\t}\n-\t}\n-\n-\t\/\/ Check to see if we have a response for the expected dataType\n-\tif ( dataTypes[ 0 ] in responses ) {\n-\t\tfinalDataType = dataTypes[ 0 ];\n-\t} else {\n-\n-\t\t\/\/ Try convertible dataTypes\n-\t\tfor ( type in responses ) {\n-\t\t\tif ( !dataTypes[ 0 ] || s.converters[ type + \" \" + dataTypes[ 0 ] ] ) {\n-\t\t\t\tfinalDataType = type;\n-\t\t\t\tbreak;\n-\t\t\t}\n-\t\t\tif ( !firstDataType ) {\n-\t\t\t\tfirstDataType = type;\n-\t\t\t}\n-\t\t}\n-\n-\t\t\/\/ Or just use first one\n-\t\tfinalDataType = finalDataType || firstDataType;\n-\t}\n-\n-\t\/\/ If we found a dataType\n-\t\/\/ We add the dataType to the list if needed\n-\t\/\/ and return the corresponding response\n-\tif ( finalDataType ) {\n-\t\tif ( finalDataType !== dataTypes[ 0 ] ) {\n-\t\t\tdataTypes.unshift( finalDataType );\n-\t\t}\n-\t\treturn responses[ finalDataType ];\n-\t}\n-}\n-\n-\/* Chain conversions given the request and the original response\n- * Also sets the responseXXX fields on the jqXHR instance\n- *\/\n-function ajaxConvert( s, response, jqXHR, isSuccess ) {\n-\tvar conv2, current, conv, tmp, prev,\n-\t\tconverters = {},\n-\n-\t\t\/\/ Work with a copy of dataTypes in case we need to modify it for conversion\n-\t\tdataTypes = s.dataTypes.slice();\n-\n-\t\/\/ Create converters map with lowercased keys\n-\tif ( dataTypes[ 1 ] ) {\n-\t\tfor ( conv in s.converters ) {\n-\t\t\tconverters[ conv.toLowerCase() ] = s.converters[ conv ];\n-\t\t}\n-\t}\n-\n-\tcurrent = dataTypes.shift();\n-\n-\t\/\/ Convert to each sequential dataType\n-\twhile ( current ) {\n-\n-\t\tif ( s.responseFields[ current ] ) {\n-\t\t\tjqXHR[ s.responseFields[ current ] ] = response;\n-\t\t}\n-\n-\t\t\/\/ Apply the dataFilter if provided\n-\t\tif ( !prev && isSuccess && s.dataFilter ) {\n-\t\t\tresponse = s.dataFilter( response, s.dataType );\n-\t\t}\n-\n-\t\tprev = current;\n-\t\tcurrent = dataTypes.shift();\n-\n-\t\tif ( current ) {\n-\n-\t\t\t\/\/ There's only work to do if current dataType is non-auto\n-\t\t\tif ( current === \"*\" ) {\n-\n-\t\t\t\tcurrent = prev;\n-\n-\t\t\t\/\/ Convert response if prev dataType is non-auto and differs from current\n-\t\t\t} else if ( prev !== \"*\" && prev !== current ) {\n-\n-\t\t\t\t\/\/ Seek a direct converter\n-\t\t\t\tconv = converters[ prev + \" \" + current ] || converters[ \"* \" + current ];\n-\n-\t\t\t\t\/\/ If none found, seek a pair\n-\t\t\t\tif ( !conv ) {\n-\t\t\t\t\tfor ( conv2 in converters ) {\n-\n-\t\t\t\t\t\t\/\/ If conv2 outputs current\n-\t\t\t\t\t\ttmp = conv2.split( \" \" );\n-\t\t\t\t\t\tif ( tmp[ 1 ] === current ) {\n-\n-\t\t\t\t\t\t\t\/\/ If prev can be converted to accepted input\n-\t\t\t\t\t\t\tconv = converters[ prev + \" \" + tmp[ 0 ] ] ||\n-\t\t\t\t\t\t\t\tconverters[ \"* \" + tmp[ 0 ] ];\n-\t\t\t\t\t\t\tif ( conv ) {\n-\n-\t\t\t\t\t\t\t\t\/\/ Condense equivalence converters\n-\t\t\t\t\t\t\t\tif ( conv === true ) {\n-\t\t\t\t\t\t\t\t\tconv = converters[ conv2 ];\n-\n-\t\t\t\t\t\t\t\t\/\/ Otherwise, insert the intermediate dataType\n-\t\t\t\t\t\t\t\t} else if ( converters[ conv2 ] !== true ) {\n-\t\t\t\t\t\t\t\t\tcurrent = tmp[ 0 ];\n-\t\t\t\t\t\t\t\t\tdataTypes.unshift( tmp[ 1 ] );\n-\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t\tbreak;\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\n-\t\t\t\t\/\/ Apply converter (if not an equivalence)\n-\t\t\t\tif ( conv !== true ) {\n-\n-\t\t\t\t\t\/\/ Unless errors are allowed to bubble, catch and return them\n-\t\t\t\t\tif ( conv && s.throws ) {\n-\t\t\t\t\t\tresponse = conv( response );\n-\t\t\t\t\t} else {\n-\t\t\t\t\t\ttry {\n-\t\t\t\t\t\t\tresponse = conv( response );\n-\t\t\t\t\t\t} catch ( e ) {\n-\t\t\t\t\t\t\treturn {\n-\t\t\t\t\t\t\t\tstate: \"parsererror\",\n-\t\t\t\t\t\t\t\terror: conv ? e : \"No conversion from \" + prev + \" to \" + current\n-\t\t\t\t\t\t\t};\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t}\n-\t\t}\n-\t}\n-\n-\treturn { state: \"success\", data: response };\n-}\n-\n-jQuery.extend( {\n-\n-\t\/\/ Counter for holding the number of active queries\n-\tactive: 0,\n-\n-\t\/\/ Last-Modified header cache for next request\n-\tlastModified: {},\n-\tetag: {},\n-\n-\tajaxSettings: {\n-\t\turl: location.href,\n-\t\ttype: \"GET\",\n-\t\tisLocal: rlocalProtocol.test( location.protocol ),\n-\t\tglobal: true,\n-\t\tprocessData: true,\n-\t\tasync: true,\n-\t\tcontentType: \"application\/x-www-form-urlencoded; charset=UTF-8\",\n-\n-\t\t\/*\n-\t\ttimeout: 0,\n-\t\tdata: null,\n-\t\tdataType: null,\n-\t\tusername: null,\n-\t\tpassword: null,\n-\t\tcache: null,\n-\t\tthrows: false,\n-\t\ttraditional: false,\n-\t\theaders: {},\n-\t\t*\/\n-\n-\t\taccepts: {\n-\t\t\t\"*\": allTypes,\n-\t\t\ttext: \"text\/plain\",\n-\t\t\thtml: \"text\/html\",\n-\t\t\txml: \"application\/xml, text\/xml\",\n-\t\t\tjson: \"application\/json, text\/javascript\"\n-\t\t},\n-\n-\t\tcontents: {\n-\t\t\txml: \/\\bxml\\b\/,\n-\t\t\thtml: \/\\bhtml\/,\n-\t\t\tjson: \/\\bjson\\b\/\n-\t\t},\n-\n-\t\tresponseFields: {\n-\t\t\txml: \"responseXML\",\n-\t\t\ttext: \"responseText\",\n-\t\t\tjson: \"responseJSON\"\n-\t\t},\n-\n-\t\t\/\/ Data converters\n-\t\t\/\/ Keys separate source (or catchall \"*\") and destination types with a single space\n-\t\tconverters: {\n-\n-\t\t\t\/\/ Convert anything to text\n-\t\t\t\"* text\": String,\n-\n-\t\t\t\/\/ Text to html (true = no transformation)\n-\t\t\t\"text html\": true,\n-\n-\t\t\t\/\/ Evaluate text as a json expression\n-\t\t\t\"text json\": JSON.parse,\n-\n-\t\t\t\/\/ Parse text as xml\n-\t\t\t\"text xml\": jQuery.parseXML\n-\t\t},\n-\n-\t\t\/\/ For options that shouldn't be deep extended:\n-\t\t\/\/ you can add your own custom options here if\n-\t\t\/\/ and when you create one that shouldn't be\n-\t\t\/\/ deep extended (see ajaxExtend)\n-\t\tflatOptions: {\n-\t\t\turl: true,\n-\t\t\tcontext: true\n-\t\t}\n-\t},\n-\n-\t\/\/ Creates a full fledged settings object into target\n-\t\/\/ with both ajaxSettings and settings fields.\n-\t\/\/ If target is omitted, writes into ajaxSettings.\n-\tajaxSetup: function( target, settings ) {\n-\t\treturn settings ?\n-\n-\t\t\t\/\/ Building a settings object\n-\t\t\tajaxExtend( ajaxExtend( target, jQuery.ajaxSettings ), settings ) :\n-\n-\t\t\t\/\/ Extending ajaxSettings\n-\t\t\tajaxExtend( jQuery.ajaxSettings, target );\n-\t},\n-\n-\tajaxPrefilter: addToPrefiltersOrTransports( prefilters ),\n-\tajaxTransport: addToPrefiltersOrTransports( transports ),\n-\n-\t\/\/ Main method\n-\tajax: function( url, options ) {\n-\n-\t\t\/\/ If url is an object, simulate pre-1.5 signature\n-\t\tif ( typeof url === \"object\" ) {\n-\t\t\toptions = url;\n-\t\t\turl = undefined;\n-\t\t}\n-\n-\t\t\/\/ Force options to be an object\n-\t\toptions = options || {};\n-\n-\t\tvar transport,\n-\n-\t\t\t\/\/ URL without anti-cache param\n-\t\t\tcacheURL,\n-\n-\t\t\t\/\/ Response headers\n-\t\t\tresponseHeadersString,\n-\t\t\tresponseHeaders,\n-\n-\t\t\t\/\/ timeout handle\n-\t\t\ttimeoutTimer,\n-\n-\t\t\t\/\/ Url cleanup var\n-\t\t\turlAnchor,\n-\n-\t\t\t\/\/ Request state (becomes false upon send and true upon completion)\n-\t\t\tcompleted,\n-\n-\t\t\t\/\/ To know if global events are to be dispatched\n-\t\t\tfireGlobals,\n-\n-\t\t\t\/\/ Loop variable\n-\t\t\ti,\n-\n-\t\t\t\/\/ uncached part of the url\n-\t\t\tuncached,\n-\n-\t\t\t\/\/ Create the final options object\n-\t\t\ts = jQuery.ajaxSetup( {}, options ),\n-\n-\t\t\t\/\/ Callbacks context\n-\t\t\tcallbackContext = s.context || s,\n-\n-\t\t\t\/\/ Context for global events is callbackContext if it is a DOM node or jQuery collection\n-\t\t\tglobalEventContext = s.context &&\n-\t\t\t\t( callbackContext.nodeType || callbackContext.jquery ) ?\n-\t\t\t\tjQuery( callbackContext ) :\n-\t\t\t\tjQuery.event,\n-\n-\t\t\t\/\/ Deferreds\n-\t\t\tdeferred = jQuery.Deferred(),\n-\t\t\tcompleteDeferred = jQuery.Callbacks( \"once memory\" ),\n-\n-\t\t\t\/\/ Status-dependent callbacks\n-\t\t\tstatusCode = s.statusCode || {},\n-\n-\t\t\t\/\/ Headers (they are sent all at once)\n-\t\t\trequestHeaders = {},\n-\t\t\trequestHeadersNames = {},\n-\n-\t\t\t\/\/ Default abort message\n-\t\t\tstrAbort = \"canceled\",\n-\n-\t\t\t\/\/ Fake xhr\n-\t\t\tjqXHR = {\n-\t\t\t\treadyState: 0,\n-\n-\t\t\t\t\/\/ Builds headers hashtable if needed\n-\t\t\t\tgetResponseHeader: function( key ) {\n-\t\t\t\t\tvar match;\n-\t\t\t\t\tif ( completed ) {\n-\t\t\t\t\t\tif ( !responseHeaders ) {\n-\t\t\t\t\t\t\tresponseHeaders = {};\n-\t\t\t\t\t\t\twhile ( ( match = rheaders.exec( responseHeadersString ) ) ) {\n-\t\t\t\t\t\t\t\tresponseHeaders[ match[ 1 ].toLowerCase() + \" \" ] =\n-\t\t\t\t\t\t\t\t\t( responseHeaders[ match[ 1 ].toLowerCase() + \" \" ] || [] )\n-\t\t\t\t\t\t\t\t\t\t.concat( match[ 2 ] );\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t}\n-\t\t\t\t\t\tmatch = responseHeaders[ key.toLowerCase() + \" \" ];\n-\t\t\t\t\t}\n-\t\t\t\t\treturn match == null ? null : match.join( \", \" );\n-\t\t\t\t},\n-\n-\t\t\t\t\/\/ Raw string\n-\t\t\t\tgetAllResponseHeaders: function() {\n-\t\t\t\t\treturn completed ? responseHeadersString : null;\n-\t\t\t\t},\n-\n-\t\t\t\t\/\/ Caches the header\n-\t\t\t\tsetRequestHeader: function( name, value ) {\n-\t\t\t\t\tif ( completed == null ) {\n-\t\t\t\t\t\tname = requestHeadersNames[ name.toLowerCase() ] =\n-\t\t\t\t\t\t\trequestHeadersNames[ name.toLowerCase() ] || name;\n-\t\t\t\t\t\trequestHeaders[ name ] = value;\n-\t\t\t\t\t}\n-\t\t\t\t\treturn this;\n-\t\t\t\t},\n-\n-\t\t\t\t\/\/ Overrides response content-type header\n-\t\t\t\toverrideMimeType: function( type ) {\n-\t\t\t\t\tif ( completed == null ) {\n-\t\t\t\t\t\ts.mimeType = type;\n-\t\t\t\t\t}\n-\t\t\t\t\treturn this;\n-\t\t\t\t},\n-\n-\t\t\t\t\/\/ Status-dependent callbacks\n-\t\t\t\tstatusCode: function( map ) {\n-\t\t\t\t\tvar code;\n-\t\t\t\t\tif ( map ) {\n-\t\t\t\t\t\tif ( completed ) {\n-\n-\t\t\t\t\t\t\t\/\/ Execute the appropriate callbacks\n-\t\t\t\t\t\t\tjqXHR.always( map[ jqXHR.status ] );\n-\t\t\t\t\t\t} else {\n-\n-\t\t\t\t\t\t\t\/\/ Lazy-add the new callbacks in a way that preserves old ones\n-\t\t\t\t\t\t\tfor ( code in map ) {\n-\t\t\t\t\t\t\t\tstatusCode[ code ] = [ statusCode[ code ], map[ code ] ];\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\t\t\t\t\treturn this;\n-\t\t\t\t},\n-\n-\t\t\t\t\/\/ Cancel the request\n-\t\t\t\tabort: function( statusText ) {\n-\t\t\t\t\tvar finalText = statusText || strAbort;\n-\t\t\t\t\tif ( transport ) {\n-\t\t\t\t\t\ttransport.abort( finalText );\n-\t\t\t\t\t}\n-\t\t\t\t\tdone( 0, finalText );\n-\t\t\t\t\treturn this;\n-\t\t\t\t}\n-\t\t\t};\n-\n-\t\t\/\/ Attach deferreds\n-\t\tdeferred.promise( jqXHR );\n-\n-\t\t\/\/ Add protocol if not provided (prefilters might expect it)\n-\t\t\/\/ Handle falsy url in the settings object (trac-10093: consistency with old signature)\n-\t\t\/\/ We also use the url parameter if available\n-\t\ts.url = ( ( url || s.url || location.href ) + \"\" )\n-\t\t\t.replace( rprotocol, location.protocol + \"\/\/\" );\n-\n-\t\t\/\/ Alias method option to type as per ticket trac-12004\n-\t\ts.type = options.method || options.type || s.method || s.type;\n-\n-\t\t\/\/ Extract dataTypes list\n-\t\ts.dataTypes = ( s.dataType || \"*\" ).toLowerCase().match( rnothtmlwhite ) || [ \"\" ];\n-\n-\t\t\/\/ A cross-domain request is in order when the origin doesn't match the current origin.\n-\t\tif ( s.crossDomain == null ) {\n-\t\t\turlAnchor = document.createElement( \"a\" );\n-\n-\t\t\t\/\/ Support: IE <=8 - 11, Edge 12 - 15\n-\t\t\t\/\/ IE throws exception on accessing the href property if url is malformed,\n-\t\t\t\/\/ e.g. http:\/\/example.com:80x\/\n-\t\t\ttry {\n-\t\t\t\turlAnchor.href = s.url;\n-\n-\t\t\t\t\/\/ Support: IE <=8 - 11 only\n-\t\t\t\t\/\/ Anchor's host property isn't correctly set when s.url is relative\n-\t\t\t\turlAnchor.href = urlAnchor.href;\n-\t\t\t\ts.crossDomain = originAnchor.protocol + \"\/\/\" + originAnchor.host !==\n-\t\t\t\t\turlAnchor.protocol + \"\/\/\" + urlAnchor.host;\n-\t\t\t} catch ( e ) {\n-\n-\t\t\t\t\/\/ If there is an error parsing the URL, assume it is crossDomain,\n-\t\t\t\t\/\/ it can be rejected by the transport if it is invalid\n-\t\t\t\ts.crossDomain = true;\n-\t\t\t}\n-\t\t}\n-\n-\t\t\/\/ Convert data if not already a string\n-\t\tif ( s.data && s.processData && typeof s.data !== \"string\" ) {\n-\t\t\ts.data = jQuery.param( s.data, s.traditional );\n-\t\t}\n-\n-\t\t\/\/ Apply prefilters\n-\t\tinspectPrefiltersOrTransports( prefilters, s, options, jqXHR );\n-\n-\t\t\/\/ If request was aborted inside a prefilter, stop there\n-\t\tif ( completed ) {\n-\t\t\treturn jqXHR;\n-\t\t}\n-\n-\t\t\/\/ We can fire global events as of now if asked to\n-\t\t\/\/ Don't fire events if jQuery.event is undefined in an AMD-usage scenario (trac-15118)\n-\t\tfireGlobals = jQuery.event && s.global;\n-\n-\t\t\/\/ Watch for a new set of requests\n-\t\tif ( fireGlobals && jQuery.active++ === 0 ) {\n-\t\t\tjQuery.event.trigger( \"ajaxStart\" );\n-\t\t}\n-\n-\t\t\/\/ Uppercase the type\n-\t\ts.type = s.type.toUpperCase();\n-\n-\t\t\/\/ Determine if request has content\n-\t\ts.hasContent = !rnoContent.test( s.type );\n-\n-\t\t\/\/ Save the URL in case we're toying with the If-Modified-Since\n-\t\t\/\/ and\/or If-None-Match header later on\n-\t\t\/\/ Remove hash to simplify url manipulation\n-\t\tcacheURL = s.url.replace( rhash, \"\" );\n-\n-\t\t\/\/ More options handling for requests with no content\n-\t\tif ( !s.hasContent ) {\n-\n-\t\t\t\/\/ Remember the hash so we can put it back\n-\t\t\tuncached = s.url.slice( cacheURL.length );\n-\n-\t\t\t\/\/ If data is available and should be processed, append data to url\n-\t\t\tif ( s.data && ( s.processData || typeof s.data === \"string\" ) ) {\n-\t\t\t\tcacheURL += ( rquery.test( cacheURL ) ? \"&\" : \"?\" ) + s.data;\n-\n-\t\t\t\t\/\/ trac-9682: remove data so that it's not used in an eventual retry\n-\t\t\t\tdelete s.data;\n-\t\t\t}\n-\n-\t\t\t\/\/ Add or update anti-cache param if needed\n-\t\t\tif ( s.cache === false ) {\n-\t\t\t\tcacheURL = cacheURL.replace( rantiCache, \"$1\" );\n-\t\t\t\tuncached = ( rquery.test( cacheURL ) ? \"&\" : \"?\" ) + \"_=\" + ( nonce.guid++ ) +\n-\t\t\t\t\tuncached;\n-\t\t\t}\n-\n-\t\t\t\/\/ Put hash and anti-cache on the URL that will be requested (gh-1732)\n-\t\t\ts.url = cacheURL + uncached;\n-\n-\t\t\/\/ Change '%20' to '+' if this is encoded form body content (gh-2658)\n-\t\t} else if ( s.data && s.processData &&\n-\t\t\t( s.contentType || \"\" ).indexOf( \"application\/x-www-form-urlencoded\" ) === 0 ) {\n-\t\t\ts.data = s.data.replace( r20, \"+\" );\n-\t\t}\n-\n-\t\t\/\/ Set the If-Modified-Since and\/or If-None-Match header, if in ifModified mode.\n-\t\tif ( s.ifModified ) {\n-\t\t\tif ( jQuery.lastModified[ cacheURL ] ) {\n-\t\t\t\tjqXHR.setRequestHeader( \"If-Modified-Since\", jQuery.lastModified[ cacheURL ] );\n-\t\t\t}\n-\t\t\tif ( jQuery.etag[ cacheURL ] ) {\n-\t\t\t\tjqXHR.setRequestHeader( \"If-None-Match\", jQuery.etag[ cacheURL ] );\n-\t\t\t}\n-\t\t}\n-\n-\t\t\/\/ Set the correct header, if data is being sent\n-\t\tif ( s.data && s.hasContent && s.contentType !== false || options.contentType ) {\n-\t\t\tjqXHR.setRequestHeader( \"Content-Type\", s.contentType );\n-\t\t}\n-\n-\t\t\/\/ Set the Accepts header for the server, depending on the dataType\n-\t\tjqXHR.setRequestHeader(\n-\t\t\t\"Accept\",\n-\t\t\ts.dataTypes[ 0 ] && s.accepts[ s.dataTypes[ 0 ] ] ?\n-\t\t\t\ts.accepts[ s.dataTypes[ 0 ] ] +\n-\t\t\t\t\t( s.dataTypes[ 0 ] !== \"*\" ? \", \" + allTypes + \"; q=0.01\" : \"\" ) :\n-\t\t\t\ts.accepts[ \"*\" ]\n-\t\t);\n-\n-\t\t\/\/ Check for headers option\n-\t\tfor ( i in s.headers ) {\n-\t\t\tjqXHR.setRequestHeader( i, s.headers[ i ] );\n-\t\t}\n-\n-\t\t\/\/ Allow custom headers\/mimetypes and early abort\n-\t\tif ( s.beforeSend &&\n-\t\t\t( s.beforeSend.call( callbackContext, jqXHR, s ) === false || completed ) ) {\n-\n-\t\t\t\/\/ Abort if not done already and return\n-\t\t\treturn jqXHR.abort();\n-\t\t}\n-\n-\t\t\/\/ Aborting is no longer a cancellation\n-\t\tstrAbort = \"abort\";\n-\n-\t\t\/\/ Install callbacks on deferreds\n-\t\tcompleteDeferred.add( s.complete );\n-\t\tjqXHR.done( s.success );\n-\t\tjqXHR.fail( s.error );\n-\n-\t\t\/\/ Get transport\n-\t\ttransport = inspectPrefiltersOrTransports( transports, s, options, jqXHR );\n-\n-\t\t\/\/ If no transport, we auto-abort\n-\t\tif ( !transport ) {\n-\t\t\tdone( -1, \"No Transport\" );\n-\t\t} else {\n-\t\t\tjqXHR.readyState = 1;\n-\n-\t\t\t\/\/ Send global event\n-\t\t\tif ( fireGlobals ) {\n-\t\t\t\tglobalEventContext.trigger( \"ajaxSend\", [ jqXHR, s ] );\n-\t\t\t}\n-\n-\t\t\t\/\/ If request was aborted inside ajaxSend, stop there\n-\t\t\tif ( completed ) {\n-\t\t\t\treturn jqXHR;\n-\t\t\t}\n-\n-\t\t\t\/\/ Timeout\n-\t\t\tif ( s.async && s.timeout > 0 ) {\n-\t\t\t\ttimeoutTimer = window.setTimeout( function() {\n-\t\t\t\t\tjqXHR.abort( \"timeout\" );\n-\t\t\t\t}, s.timeout );\n-\t\t\t}\n-\n-\t\t\ttry {\n-\t\t\t\tcompleted = false;\n-\t\t\t\ttransport.send( requestHeaders, done );\n-\t\t\t} catch ( e ) {\n-\n-\t\t\t\t\/\/ Rethrow post-completion exceptions\n-\t\t\t\tif ( completed ) {\n-\t\t\t\t\tthrow e;\n-\t\t\t\t}\n-\n-\t\t\t\t\/\/ Propagate others as results\n-\t\t\t\tdone( -1, e );\n-\t\t\t}\n-\t\t}\n-\n-\t\t\/\/ Callback for when everything is done\n-\t\tfunction done( status, nativeStatusText, responses, headers ) {\n-\t\t\tvar isSuccess, success, error, response, modified,\n-\t\t\t\tstatusText = nativeStatusText;\n-\n-\t\t\t\/\/ Ignore repeat invocations\n-\t\t\tif ( completed ) {\n-\t\t\t\treturn;\n-\t\t\t}\n-\n-\t\t\tcompleted = true;\n-\n-\t\t\t\/\/ Clear timeout if it exists\n-\t\t\tif ( timeoutTimer ) {\n-\t\t\t\twindow.clearTimeout( timeoutTimer );\n-\t\t\t}\n-\n-\t\t\t\/\/ Dereference transport for early garbage collection\n-\t\t\t\/\/ (no matter how long the jqXHR object will be used)\n-\t\t\ttransport = undefined;\n-\n-\t\t\t\/\/ Cache response headers\n-\t\t\tresponseHeadersString = headers || \"\";\n-\n-\t\t\t\/\/ Set readyState\n-\t\t\tjqXHR.readyState = status > 0 ? 4 : 0;\n-\n-\t\t\t\/\/ Determine if successful\n-\t\t\tisSuccess = status >= 200 && status < 300 || status === 304;\n-\n-\t\t\t\/\/ Get response data\n-\t\t\tif ( responses ) {\n-\t\t\t\tresponse = ajaxHandleResponses( s, jqXHR, responses );\n-\t\t\t}\n-\n-\t\t\t\/\/ Use a noop converter for missing script but not if jsonp\n-\t\t\tif ( !isSuccess &&\n-\t\t\t\tjQuery.inArray( \"script\", s.dataTypes ) > -1 &&\n-\t\t\t\tjQuery.inArray( \"json\", s.dataTypes ) < 0 ) {\n-\t\t\t\ts.converters[ \"text script\" ] = function() {};\n-\t\t\t}\n-\n-\t\t\t\/\/ Convert no matter what (that way responseXXX fields are always set)\n-\t\t\tresponse = ajaxConvert( s, response, jqXHR, isSuccess );\n-\n-\t\t\t\/\/ If successful, handle type chaining\n-\t\t\tif ( isSuccess ) {\n-\n-\t\t\t\t\/\/ Set the If-Modified-Since and\/or If-None-Match header, if in ifModified mode.\n-\t\t\t\tif ( s.ifModified ) {\n-\t\t\t\t\tmodified = jqXHR.getResponseHeader( \"Last-Modified\" );\n-\t\t\t\t\tif ( modified ) {\n-\t\t\t\t\t\tjQuery.lastModified[ cacheURL ] = modified;\n-\t\t\t\t\t}\n-\t\t\t\t\tmodified = jqXHR.getResponseHeader( \"etag\" );\n-\t\t\t\t\tif ( modified ) {\n-\t\t\t\t\t\tjQuery.etag[ cacheURL ] = modified;\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\n-\t\t\t\t\/\/ if no content\n-\t\t\t\tif ( status === 204 || s.type === \"HEAD\" ) {\n-\t\t\t\t\tstatusText = \"nocontent\";\n-\n-\t\t\t\t\/\/ if not modified\n-\t\t\t\t} else if ( status === 304 ) {\n-\t\t\t\t\tstatusText = \"notmodified\";\n-\n-\t\t\t\t\/\/ If we have data, let's convert it\n-\t\t\t\t} else {\n-\t\t\t\t\tstatusText = response.state;\n-\t\t\t\t\tsuccess = response.data;\n-\t\t\t\t\terror = response.error;\n-\t\t\t\t\tisSuccess = !error;\n-\t\t\t\t}\n-\t\t\t} else {\n-\n-\t\t\t\t\/\/ Extract error from statusText and normalize for non-aborts\n-\t\t\t\terror = statusText;\n-\t\t\t\tif ( status || !statusText ) {\n-\t\t\t\t\tstatusText = \"error\";\n-\t\t\t\t\tif ( status < 0 ) {\n-\t\t\t\t\t\tstatus = 0;\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t}\n-\n-\t\t\t\/\/ Set data for the fake xhr object\n-\t\t\tjqXHR.status = status;\n-\t\t\tjqXHR.statusText = ( nativeStatusText || statusText ) + \"\";\n-\n-\t\t\t\/\/ Success\/Error\n-\t\t\tif ( isSuccess ) {\n-\t\t\t\tdeferred.resolveWith( callbackContext, [ success, statusText, jqXHR ] );\n-\t\t\t} else {\n-\t\t\t\tdeferred.rejectWith( callbackContext, [ jqXHR, statusText, error ] );\n-\t\t\t}\n-\n-\t\t\t\/\/ Status-dependent callbacks\n-\t\t\tjqXHR.statusCode( statusCode );\n-\t\t\tstatusCode = undefined;\n-\n-\t\t\tif ( fireGlobals ) {\n-\t\t\t\tglobalEventContext.trigger( isSuccess ? \"ajaxSuccess\" : \"ajaxError\",\n-\t\t\t\t\t[ jqXHR, s, isSuccess ? success : error ] );\n-\t\t\t}\n-\n-\t\t\t\/\/ Complete\n-\t\t\tcompleteDeferred.fireWith( callbackContext, [ jqXHR, statusText ] );\n-\n-\t\t\tif ( fireGlobals ) {\n-\t\t\t\tglobalEventContext.trigger( \"ajaxComplete\", [ jqXHR, s ] );\n-\n-\t\t\t\t\/\/ Handle the global AJAX counter\n-\t\t\t\tif ( !( --jQuery.active ) ) {\n-\t\t\t\t\tjQuery.event.trigger( \"ajaxStop\" );\n-\t\t\t\t}\n-\t\t\t}\n-\t\t}\n-\n-\t\treturn jqXHR;\n-\t},\n-\n-\tgetJSON: function( url, data, callback ) {\n-\t\treturn jQuery.get( url, data, callback, \"json\" );\n-\t},\n-\n-\tgetScript: function( url, callback ) {\n-\t\treturn jQuery.get( url, undefined, callback, \"script\" );\n-\t}\n-} );\n-\n-jQuery.each( [ \"get\", \"post\" ], function( _i, method ) {\n-\tjQuery[ method ] = function( url, data, callback, type ) {\n-\n-\t\t\/\/ Shift arguments if data argument was omitted\n-\t\tif ( isFunction( data ) ) {\n-\t\t\ttype = type || callback;\n-\t\t\tcallback = data;\n-\t\t\tdata = undefined;\n-\t\t}\n-\n-\t\t\/\/ The url can be an options object (which then must have .url)\n-\t\treturn jQuery.ajax( jQuery.extend( {\n-\t\t\turl: url,\n-\t\t\ttype: method,\n-\t\t\tdataType: type,\n-\t\t\tdata: data,\n-\t\t\tsuccess: callback\n-\t\t}, jQuery.isPlainObject( url ) && url ) );\n-\t};\n-} );\n-\n-jQuery.ajaxPrefilter( function( s ) {\n-\tvar i;\n-\tfor ( i in s.headers ) {\n-\t\tif ( i.toLowerCase() === \"content-type\" ) {\n-\t\t\ts.contentType = s.headers[ i ] || \"\";\n-\t\t}\n-\t}\n-} );\n-\n-\n-jQuery._evalUrl = function( url, options, doc ) {\n-\treturn jQuery.ajax( {\n-\t\turl: url,\n-\n-\t\t\/\/ Make this explicit, since user can override this through ajaxSetup (trac-11264)\n-\t\ttype: \"GET\",\n-\t\tdataType: \"script\",\n-\t\tcache: true,\n-\t\tasync: false,\n-\t\tglobal: false,\n-\n-\t\t\/\/ Only evaluate the response if it is successful (gh-4126)\n-\t\t\/\/ dataFilter is not invoked for failure responses, so using it instead\n-\t\t\/\/ of the default converter is kludgy but it works.\n-\t\tconverters: {\n-\t\t\t\"text script\": function() {}\n-\t\t},\n-\t\tdataFilter: function( response ) {\n-\t\t\tjQuery.globalEval( response, options, doc );\n-\t\t}\n-\t} );\n-};\n-\n-\n-jQuery.fn.extend( {\n-\twrapAll: function( html ) {\n-\t\tvar wrap;\n-\n-\t\tif ( this[ 0 ] ) {\n-\t\t\tif ( isFunction( html ) ) {\n-\t\t\t\thtml = html.call( this[ 0 ] );\n-\t\t\t}\n-\n-\t\t\t\/\/ The elements to wrap the target around\n-\t\t\twrap = jQuery( html, this[ 0 ].ownerDocument ).eq( 0 ).clone( true );\n-\n-\t\t\tif ( this[ 0 ].parentNode ) {\n-\t\t\t\twrap.insertBefore( this[ 0 ] );\n-\t\t\t}\n-\n-\t\t\twrap.map( function() {\n-\t\t\t\tvar elem = this;\n-\n-\t\t\t\twhile ( elem.firstElementChild ) {\n-\t\t\t\t\telem = elem.firstElementChild;\n-\t\t\t\t}\n-\n-\t\t\t\treturn elem;\n-\t\t\t} ).append( this );\n-\t\t}\n-\n-\t\treturn this;\n-\t},\n-\n-\twrapInner: function( html ) {\n-\t\tif ( isFunction( html ) ) {\n-\t\t\treturn this.each( function( i ) {\n-\t\t\t\tjQuery( this ).wrapInner( html.call( this, i ) );\n-\t\t\t} );\n-\t\t}\n-\n-\t\treturn this.each( function() {\n-\t\t\tvar self = jQuery( this ),\n-\t\t\t\tcontents = self.contents();\n-\n-\t\t\tif ( contents.length ) {\n-\t\t\t\tcontents.wrapAll( html );\n-\n-\t\t\t} else {\n-\t\t\t\tself.append( html );\n-\t\t\t}\n-\t\t} );\n-\t},\n-\n-\twrap: function( html ) {\n-\t\tvar htmlIsFunction = isFunction( html );\n-\n-\t\treturn this.each( function( i ) {\n-\t\t\tjQuery( this ).wrapAll( htmlIsFunction ? html.call( this, i ) : html );\n-\t\t} );\n-\t},\n-\n-\tunwrap: function( selector ) {\n-\t\tthis.parent( selector ).not( \"body\" ).each( function() {\n-\t\t\tjQuery( this ).replaceWith( this.childNodes );\n-\t\t} );\n-\t\treturn this;\n-\t}\n-} );\n-\n-\n-jQuery.expr.pseudos.hidden = function( elem ) {\n-\treturn !jQuery.expr.pseudos.visible( elem );\n-};\n-jQuery.expr.pseudos.visible = function( elem ) {\n-\treturn !!( elem.offsetWidth || elem.offsetHeight || elem.getClientRects().length );\n-};\n-\n-\n-\n-\n-jQuery.ajaxSettings.xhr = function() {\n-\ttry {\n-\t\treturn new window.XMLHttpRequest();\n-\t} catch ( e ) {}\n-};\n-\n-var xhrSuccessStatus = {\n-\n-\t\t\/\/ File protocol always yields status code 0, assume 200\n-\t\t0: 200,\n-\n-\t\t\/\/ Support: IE <=9 only\n-\t\t\/\/ trac-1450: sometimes IE returns 1223 when it should be 204\n-\t\t1223: 204\n-\t},\n-\txhrSupported = jQuery.ajaxSettings.xhr();\n-\n-support.cors = !!xhrSupported && ( \"withCredentials\" in xhrSupported );\n-support.ajax = xhrSupported = !!xhrSupported;\n-\n-jQuery.ajaxTransport( function( options ) {\n-\tvar callback, errorCallback;\n-\n-\t\/\/ Cross domain only allowed if supported through XMLHttpRequest\n-\tif ( support.cors || xhrSupported && !options.crossDomain ) {\n-\t\treturn {\n-\t\t\tsend: function( headers, complete ) {\n-\t\t\t\tvar i,\n-\t\t\t\t\txhr = options.xhr();\n-\n-\t\t\t\txhr.open(\n-\t\t\t\t\toptions.type,\n-\t\t\t\t\toptions.url,\n-\t\t\t\t\toptions.async,\n-\t\t\t\t\toptions.username,\n-\t\t\t\t\toptions.password\n-\t\t\t\t);\n-\n-\t\t\t\t\/\/ Apply custom fields if provided\n-\t\t\t\tif ( options.xhrFields ) {\n-\t\t\t\t\tfor ( i in options.xhrFields ) {\n-\t\t\t\t\t\txhr[ i ] = options.xhrFields[ i ];\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\n-\t\t\t\t\/\/ Override mime type if needed\n-\t\t\t\tif ( options.mimeType && xhr.overrideMimeType ) {\n-\t\t\t\t\txhr.overrideMimeType( options.mimeType );\n-\t\t\t\t}\n-\n-\t\t\t\t\/\/ X-Requested-With header\n-\t\t\t\t\/\/ For cross-domain requests, seeing as conditions for a preflight are\n-\t\t\t\t\/\/ akin to a jigsaw puzzle, we simply never set it to be sure.\n-\t\t\t\t\/\/ (it can always be set on a per-request basis or even using ajaxSetup)\n-\t\t\t\t\/\/ For same-domain requests, won't change header if already provided.\n-\t\t\t\tif ( !options.crossDomain && !headers[ \"X-Requested-With\" ] ) {\n-\t\t\t\t\theaders[ \"X-Requested-With\" ] = \"XMLHttpRequest\";\n-\t\t\t\t}\n-\n-\t\t\t\t\/\/ Set headers\n-\t\t\t\tfor ( i in headers ) {\n-\t\t\t\t\txhr.setRequestHeader( i, headers[ i ] );\n-\t\t\t\t}\n-\n-\t\t\t\t\/\/ Callback\n-\t\t\t\tcallback = function( type ) {\n-\t\t\t\t\treturn function() {\n-\t\t\t\t\t\tif ( callback ) {\n-\t\t\t\t\t\t\tcallback = errorCallback = xhr.onload =\n-\t\t\t\t\t\t\t\txhr.onerror = xhr.onabort = xhr.ontimeout =\n-\t\t\t\t\t\t\t\t\txhr.onreadystatechange = null;\n-\n-\t\t\t\t\t\t\tif ( type === \"abort\" ) {\n-\t\t\t\t\t\t\t\txhr.abort();\n-\t\t\t\t\t\t\t} else if ( type === \"error\" ) {\n-\n-\t\t\t\t\t\t\t\t\/\/ Support: IE <=9 only\n-\t\t\t\t\t\t\t\t\/\/ On a manual native abort, IE9 throws\n-\t\t\t\t\t\t\t\t\/\/ errors on any property access that is not readyState\n-\t\t\t\t\t\t\t\tif ( typeof xhr.status !== \"number\" ) {\n-\t\t\t\t\t\t\t\t\tcomplete( 0, \"error\" );\n-\t\t\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\t\t\tcomplete(\n-\n-\t\t\t\t\t\t\t\t\t\t\/\/ File: protocol always yields status 0; see trac-8605, trac-14207\n-\t\t\t\t\t\t\t\t\t\txhr.status,\n-\t\t\t\t\t\t\t\t\t\txhr.statusText\n-\t\t\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\t\tcomplete(\n-\t\t\t\t\t\t\t\t\txhrSuccessStatus[ xhr.status ] || xhr.status,\n-\t\t\t\t\t\t\t\t\txhr.statusText,\n-\n-\t\t\t\t\t\t\t\t\t\/\/ Support: IE <=9 only\n-\t\t\t\t\t\t\t\t\t\/\/ IE9 has no XHR2 but throws on binary (trac-11426)\n-\t\t\t\t\t\t\t\t\t\/\/ For XHR2 non-text, let the caller handle it (gh-2498)\n-\t\t\t\t\t\t\t\t\t( xhr.responseType || \"text\" ) !== \"text\"  ||\n-\t\t\t\t\t\t\t\t\ttypeof xhr.responseText !== \"string\" ?\n-\t\t\t\t\t\t\t\t\t\t{ binary: xhr.response } :\n-\t\t\t\t\t\t\t\t\t\t{ text: xhr.responseText },\n-\t\t\t\t\t\t\t\t\txhr.getAllResponseHeaders()\n-\t\t\t\t\t\t\t\t);\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t}\n-\t\t\t\t\t};\n-\t\t\t\t};\n-\n-\t\t\t\t\/\/ Listen to events\n-\t\t\t\txhr.onload = callback();\n-\t\t\t\terrorCallback = xhr.onerror = xhr.ontimeout = callback( \"error\" );\n-\n-\t\t\t\t\/\/ Support: IE 9 only\n-\t\t\t\t\/\/ Use onreadystatechange to replace onabort\n-\t\t\t\t\/\/ to handle uncaught aborts\n-\t\t\t\tif ( xhr.onabort !== undefined ) {\n-\t\t\t\t\txhr.onabort = errorCallback;\n-\t\t\t\t} else {\n-\t\t\t\t\txhr.onreadystatechange = function() {\n-\n-\t\t\t\t\t\t\/\/ Check readyState before timeout as it changes\n-\t\t\t\t\t\tif ( xhr.readyState === 4 ) {\n-\n-\t\t\t\t\t\t\t\/\/ Allow onerror to be called first,\n-\t\t\t\t\t\t\t\/\/ but that will not handle a native abort\n-\t\t\t\t\t\t\t\/\/ Also, save errorCallback to a variable\n-\t\t\t\t\t\t\t\/\/ as xhr.onerror cannot be accessed\n-\t\t\t\t\t\t\twindow.setTimeout( function() {\n-\t\t\t\t\t\t\t\tif ( callback ) {\n-\t\t\t\t\t\t\t\t\terrorCallback();\n-\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t} );\n-\t\t\t\t\t\t}\n-\t\t\t\t\t};\n-\t\t\t\t}\n-\n-\t\t\t\t\/\/ Create the abort callback\n-\t\t\t\tcallback = callback( \"abort\" );\n-\n-\t\t\t\ttry {\n-\n-\t\t\t\t\t\/\/ Do send the request (this may raise an exception)\n-\t\t\t\t\txhr.send( options.hasContent && options.data || null );\n-\t\t\t\t} catch ( e ) {\n-\n-\t\t\t\t\t\/\/ trac-14683: Only rethrow if this hasn't been notified as an error yet\n-\t\t\t\t\tif ( callback ) {\n-\t\t\t\t\t\tthrow e;\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t},\n-\n-\t\t\tabort: function() {\n-\t\t\t\tif ( callback ) {\n-\t\t\t\t\tcallback();\n-\t\t\t\t}\n-\t\t\t}\n-\t\t};\n-\t}\n-} );\n-\n-\n-\n-\n-\/\/ Prevent auto-execution of scripts when no explicit dataType was provided (See gh-2432)\n-jQuery.ajaxPrefilter( function( s ) {\n-\tif ( s.crossDomain ) {\n-\t\ts.contents.script = false;\n-\t}\n-} );\n-\n-\/\/ Install script dataType\n-jQuery.ajaxSetup( {\n-\taccepts: {\n-\t\tscript: \"text\/javascript, application\/javascript, \" +\n-\t\t\t\"application\/ecmascript, application\/x-ecmascript\"\n-\t},\n-\tcontents: {\n-\t\tscript: \/\\b(?:java|ecma)script\\b\/\n-\t},\n-\tconverters: {\n-\t\t\"text script\": function( text ) {\n-\t\t\tjQuery.globalEval( text );\n-\t\t\treturn text;\n-\t\t}\n-\t}\n-} );\n-\n-\/\/ Handle cache's special case and crossDomain\n-jQuery.ajaxPrefilter( \"script\", function( s ) {\n-\tif ( s.cache === undefined ) {\n-\t\ts.cache = false;\n-\t}\n-\tif ( s.crossDomain ) {\n-\t\ts.type = \"GET\";\n-\t}\n-} );\n-\n-\/\/ Bind script tag hack transport\n-jQuery.ajaxTransport( \"script\", function( s ) {\n-\n-\t\/\/ This transport only deals with cross domain or forced-by-attrs requests\n-\tif ( s.crossDomain || s.scriptAttrs ) {\n-\t\tvar script, callback;\n-\t\treturn {\n-\t\t\tsend: function( _, complete ) {\n-\t\t\t\tscript = jQuery( \"<script>\" )\n-\t\t\t\t\t.attr( s.scriptAttrs || {} )\n-\t\t\t\t\t.prop( { charset: s.scriptCharset, src: s.url } )\n-\t\t\t\t\t.on( \"load error\", callback = function( evt ) {\n-\t\t\t\t\t\tscript.remove();\n-\t\t\t\t\t\tcallback = null;\n-\t\t\t\t\t\tif ( evt ) {\n-\t\t\t\t\t\t\tcomplete( evt.type === \"error\" ? 404 : 200, evt.type );\n-\t\t\t\t\t\t}\n-\t\t\t\t\t} );\n-\n-\t\t\t\t\/\/ Use native DOM manipulation to avoid our domManip AJAX trickery\n-\t\t\t\tdocument.head.appendChild( script[ 0 ] );\n-\t\t\t},\n-\t\t\tabort: function() {\n-\t\t\t\tif ( callback ) {\n-\t\t\t\t\tcallback();\n-\t\t\t\t}\n-\t\t\t}\n-\t\t};\n-\t}\n-} );\n-\n-\n-\n-\n-var oldCallbacks = [],\n-\trjsonp = \/(=)\\?(?=&|$)|\\?\\?\/;\n-\n-\/\/ Default jsonp settings\n-jQuery.ajaxSetup( {\n-\tjsonp: \"callback\",\n-\tjsonpCallback: function() {\n-\t\tvar callback = oldCallbacks.pop() || ( jQuery.expando + \"_\" + ( nonce.guid++ ) );\n-\t\tthis[ callback ] = true;\n-\t\treturn callback;\n-\t}\n-} );\n-\n-\/\/ Detect, normalize options and install callbacks for jsonp requests\n-jQuery.ajaxPrefilter( \"json jsonp\", function( s, originalSettings, jqXHR ) {\n-\n-\tvar callbackName, overwritten, responseContainer,\n-\t\tjsonProp = s.jsonp !== false && ( rjsonp.test( s.url ) ?\n-\t\t\t\"url\" :\n-\t\t\ttypeof s.data === \"string\" &&\n-\t\t\t\t( s.contentType || \"\" )\n-\t\t\t\t\t.indexOf( \"application\/x-www-form-urlencoded\" ) === 0 &&\n-\t\t\t\trjsonp.test( s.data ) && \"data\"\n-\t\t);\n-\n-\t\/\/ Handle iff the expected data type is \"jsonp\" or we have a parameter to set\n-\tif ( jsonProp || s.dataTypes[ 0 ] === \"jsonp\" ) {\n-\n-\t\t\/\/ Get callback name, remembering preexisting value associated with it\n-\t\tcallbackName = s.jsonpCallback = isFunction( s.jsonpCallback ) ?\n-\t\t\ts.jsonpCallback() :\n-\t\t\ts.jsonpCallback;\n-\n-\t\t\/\/ Insert callback into url or form data\n-\t\tif ( jsonProp ) {\n-\t\t\ts[ jsonProp ] = s[ jsonProp ].replace( rjsonp, \"$1\" + callbackName );\n-\t\t} else if ( s.jsonp !== false ) {\n-\t\t\ts.url += ( rquery.test( s.url ) ? \"&\" : \"?\" ) + s.jsonp + \"=\" + callbackName;\n-\t\t}\n-\n-\t\t\/\/ Use data converter to retrieve json after script execution\n-\t\ts.converters[ \"script json\" ] = function() {\n-\t\t\tif ( !responseContainer ) {\n-\t\t\t\tjQuery.error( callbackName + \" was not called\" );\n-\t\t\t}\n-\t\t\treturn responseContainer[ 0 ];\n-\t\t};\n-\n-\t\t\/\/ Force json dataType\n-\t\ts.dataTypes[ 0 ] = \"json\";\n-\n-\t\t\/\/ Install callback\n-\t\toverwritten = window[ callbackName ];\n-\t\twindow[ callbackName ] = function() {\n-\t\t\tresponseContainer = arguments;\n-\t\t};\n-\n-\t\t\/\/ Clean-up function (fires after converters)\n-\t\tjqXHR.always( function() {\n-\n-\t\t\t\/\/ If previous value didn't exist - remove it\n-\t\t\tif ( overwritten === undefined ) {\n-\t\t\t\tjQuery( window ).removeProp( callbackName );\n-\n-\t\t\t\/\/ Otherwise restore preexisting value\n-\t\t\t} else {\n-\t\t\t\twindow[ callbackName ] = overwritten;\n-\t\t\t}\n-\n-\t\t\t\/\/ Save back as free\n-\t\t\tif ( s[ callbackName ] ) {\n-\n-\t\t\t\t\/\/ Make sure that re-using the options doesn't screw things around\n-\t\t\t\ts.jsonpCallback = originalSettings.jsonpCallback;\n-\n-\t\t\t\t\/\/ Save the callback name for future use\n-\t\t\t\toldCallbacks.push( callbackName );\n-\t\t\t}\n-\n-\t\t\t\/\/ Call if it was a function and we have a response\n-\t\t\tif ( responseContainer && isFunction( overwritten ) ) {\n-\t\t\t\toverwritten( responseContainer[ 0 ] );\n-\t\t\t}\n-\n-\t\t\tresponseContainer = overwritten = undefined;\n-\t\t} );\n-\n-\t\t\/\/ Delegate to script\n-\t\treturn \"script\";\n-\t}\n-} );\n-\n-\n-\n-\n-\/\/ Support: Safari 8 only\n-\/\/ In Safari 8 documents created via document.implementation.createHTMLDocument\n-\/\/ collapse sibling forms: the second one becomes a child of the first one.\n-\/\/ Because of that, this security measure has to be disabled in Safari 8.\n-\/\/ https:\/\/bugs.webkit.org\/show_bug.cgi?id=137337\n-support.createHTMLDocument = ( function() {\n-\tvar body = document.implementation.createHTMLDocument( \"\" ).body;\n-\tbody.innerHTML = \"<form><\/form><form><\/form>\";\n-\treturn body.childNodes.length === 2;\n-} )();\n-\n-\n-\/\/ Argument \"data\" should be string of html\n-\/\/ context (optional): If specified, the fragment will be created in this context,\n-\/\/ defaults to document\n-\/\/ keepScripts (optional): If true, will include scripts passed in the html string\n-jQuery.parseHTML = function( data, context, keepScripts ) {\n-\tif ( typeof data !== \"string\" ) {\n-\t\treturn [];\n-\t}\n-\tif ( typeof context === \"boolean\" ) {\n-\t\tkeepScripts = context;\n-\t\tcontext = false;\n-\t}\n-\n-\tvar base, parsed, scripts;\n-\n-\tif ( !context ) {\n-\n-\t\t\/\/ Stop scripts or inline event handlers from being executed immediately\n-\t\t\/\/ by using document.implementation\n-\t\tif ( support.createHTMLDocument ) {\n-\t\t\tcontext = document.implementation.createHTMLDocument( \"\" );\n-\n-\t\t\t\/\/ Set the base href for the created document\n-\t\t\t\/\/ so any parsed elements with URLs\n-\t\t\t\/\/ are based on the document's URL (gh-2965)\n-\t\t\tbase = context.createElement( \"base\" );\n-\t\t\tbase.href = document.location.href;\n-\t\t\tcontext.head.appendChild( base );\n-\t\t} else {\n-\t\t\tcontext = document;\n-\t\t}\n-\t}\n-\n-\tparsed = rsingleTag.exec( data );\n-\tscripts = !keepScripts && [];\n-\n-\t\/\/ Single tag\n-\tif ( parsed ) {\n-\t\treturn [ context.createElement( parsed[ 1 ] ) ];\n-\t}\n-\n-\tparsed = buildFragment( [ data ], context, scripts );\n-\n-\tif ( scripts && scripts.length ) {\n-\t\tjQuery( scripts ).remove();\n-\t}\n-\n-\treturn jQuery.merge( [], parsed.childNodes );\n-};\n-\n-\n-\/**\n- * Load a url into a page\n- *\/\n-jQuery.fn.load = function( url, params, callback ) {\n-\tvar selector, type, response,\n-\t\tself = this,\n-\t\toff = url.indexOf( \" \" );\n-\n-\tif ( off > -1 ) {\n-\t\tselector = stripAndCollapse( url.slice( off ) );\n-\t\turl = url.slice( 0, off );\n-\t}\n-\n-\t\/\/ If it's a function\n-\tif ( isFunction( params ) ) {\n-\n-\t\t\/\/ We assume that it's the callback\n-\t\tcallback = params;\n-\t\tparams = undefined;\n-\n-\t\/\/ Otherwise, build a param string\n-\t} else if ( params && typeof params === \"object\" ) {\n-\t\ttype = \"POST\";\n-\t}\n-\n-\t\/\/ If we have elements to modify, make the request\n-\tif ( self.length > 0 ) {\n-\t\tjQuery.ajax( {\n-\t\t\turl: url,\n-\n-\t\t\t\/\/ If \"type\" variable is undefined, then \"GET\" method will be used.\n-\t\t\t\/\/ Make value of this field explicit since\n-\t\t\t\/\/ user can override it through ajaxSetup method\n-\t\t\ttype: type || \"GET\",\n-\t\t\tdataType: \"html\",\n-\t\t\tdata: params\n-\t\t} ).done( function( responseText ) {\n-\n-\t\t\t\/\/ Save response for use in complete callback\n-\t\t\tresponse = arguments;\n-\n-\t\t\tself.html( selector ?\n-\n-\t\t\t\t\/\/ If a selector was specified, locate the right elements in a dummy div\n-\t\t\t\t\/\/ Exclude scripts to avoid IE 'Permission Denied' errors\n-\t\t\t\tjQuery( \"<div>\" ).append( jQuery.parseHTML( responseText ) ).find( selector ) :\n-\n-\t\t\t\t\/\/ Otherwise use the full result\n-\t\t\t\tresponseText );\n-\n-\t\t\/\/ If the request succeeds, this function gets \"data\", \"status\", \"jqXHR\"\n-\t\t\/\/ but they are ignored because response was set above.\n-\t\t\/\/ If it fails, this function gets \"jqXHR\", \"status\", \"error\"\n-\t\t} ).always( callback && function( jqXHR, status ) {\n-\t\t\tself.each( function() {\n-\t\t\t\tcallback.apply( this, response || [ jqXHR.responseText, status, jqXHR ] );\n-\t\t\t} );\n-\t\t} );\n-\t}\n-\n-\treturn this;\n-};\n-\n-\n-\n-\n-jQuery.expr.pseudos.animated = function( elem ) {\n-\treturn jQuery.grep( jQuery.timers, function( fn ) {\n-\t\treturn elem === fn.elem;\n-\t} ).length;\n-};\n-\n-\n-\n-\n-jQuery.offset = {\n-\tsetOffset: function( elem, options, i ) {\n-\t\tvar curPosition, curLeft, curCSSTop, curTop, curOffset, curCSSLeft, calculatePosition,\n-\t\t\tposition = jQuery.css( elem, \"position\" ),\n-\t\t\tcurElem = jQuery( elem ),\n-\t\t\tprops = {};\n-\n-\t\t\/\/ Set position first, in-case top\/left are set even on static elem\n-\t\tif ( position === \"static\" ) {\n-\t\t\telem.style.position = \"relative\";\n-\t\t}\n-\n-\t\tcurOffset = curElem.offset();\n-\t\tcurCSSTop = jQuery.css( elem, \"top\" );\n-\t\tcurCSSLeft = jQuery.css( elem, \"left\" );\n-\t\tcalculatePosition = ( position === \"absolute\" || position === \"fixed\" ) &&\n-\t\t\t( curCSSTop + curCSSLeft ).indexOf( \"auto\" ) > -1;\n-\n-\t\t\/\/ Need to be able to calculate position if either\n-\t\t\/\/ top or left is auto and position is either absolute or fixed\n-\t\tif ( calculatePosition ) {\n-\t\t\tcurPosition = curElem.position();\n-\t\t\tcurTop = curPosition.top;\n-\t\t\tcurLeft = curPosition.left;\n-\n-\t\t} else {\n-\t\t\tcurTop = parseFloat( curCSSTop ) || 0;\n-\t\t\tcurLeft = parseFloat( curCSSLeft ) || 0;\n-\t\t}\n-\n-\t\tif ( isFunction( options ) ) {\n-\n-\t\t\t\/\/ Use jQuery.extend here to allow modification of coordinates argument (gh-1848)\n-\t\t\toptions = options.call( elem, i, jQuery.extend( {}, curOffset ) );\n-\t\t}\n-\n-\t\tif ( options.top != null ) {\n-\t\t\tprops.top = ( options.top - curOffset.top ) + curTop;\n-\t\t}\n-\t\tif ( options.left != null ) {\n-\t\t\tprops.left = ( options.left - curOffset.left ) + curLeft;\n-\t\t}\n-\n-\t\tif ( \"using\" in options ) {\n-\t\t\toptions.using.call( elem, props );\n-\n-\t\t} else {\n-\t\t\tcurElem.css( props );\n-\t\t}\n-\t}\n-};\n-\n-jQuery.fn.extend( {\n-\n-\t\/\/ offset() relates an element's border box to the document origin\n-\toffset: function( options ) {\n-\n-\t\t\/\/ Preserve chaining for setter\n-\t\tif ( arguments.length ) {\n-\t\t\treturn options === undefined ?\n-\t\t\t\tthis :\n-\t\t\t\tthis.each( function( i ) {\n-\t\t\t\t\tjQuery.offset.setOffset( this, options, i );\n-\t\t\t\t} );\n-\t\t}\n-\n-\t\tvar rect, win,\n-\t\t\telem = this[ 0 ];\n-\n-\t\tif ( !elem ) {\n-\t\t\treturn;\n-\t\t}\n-\n-\t\t\/\/ Return zeros for disconnected and hidden (display: none) elements (gh-2310)\n-\t\t\/\/ Support: IE <=11 only\n-\t\t\/\/ Running getBoundingClientRect on a\n-\t\t\/\/ disconnected node in IE throws an error\n-\t\tif ( !elem.getClientRects().length ) {\n-\t\t\treturn { top: 0, left: 0 };\n-\t\t}\n-\n-\t\t\/\/ Get document-relative position by adding viewport scroll to viewport-relative gBCR\n-\t\trect = elem.getBoundingClientRect();\n-\t\twin = elem.ownerDocument.defaultView;\n-\t\treturn {\n-\t\t\ttop: rect.top + win.pageYOffset,\n-\t\t\tleft: rect.left + win.pageXOffset\n-\t\t};\n-\t},\n-\n-\t\/\/ position() relates an element's margin box to its offset parent's padding box\n-\t\/\/ This corresponds to the behavior of CSS absolute positioning\n-\tposition: function() {\n-\t\tif ( !this[ 0 ] ) {\n-\t\t\treturn;\n-\t\t}\n-\n-\t\tvar offsetParent, offset, doc,\n-\t\t\telem = this[ 0 ],\n-\t\t\tparentOffset = { top: 0, left: 0 };\n-\n-\t\t\/\/ position:fixed elements are offset from the viewport, which itself always has zero offset\n-\t\tif ( jQuery.css( elem, \"position\" ) === \"fixed\" ) {\n-\n-\t\t\t\/\/ Assume position:fixed implies availability of getBoundingClientRect\n-\t\t\toffset = elem.getBoundingClientRect();\n-\n-\t\t} else {\n-\t\t\toffset = this.offset();\n-\n-\t\t\t\/\/ Account for the *real* offset parent, which can be the document or its root element\n-\t\t\t\/\/ when a statically positioned element is identified\n-\t\t\tdoc = elem.ownerDocument;\n-\t\t\toffsetParent = elem.offsetParent || doc.documentElement;\n-\t\t\twhile ( offsetParent &&\n-\t\t\t\t( offsetParent === doc.body || offsetParent === doc.documentElement ) &&\n-\t\t\t\tjQuery.css( offsetParent, \"position\" ) === \"static\" ) {\n-\n-\t\t\t\toffsetParent = offsetParent.parentNode;\n-\t\t\t}\n-\t\t\tif ( offsetParent && offsetParent !== elem && offsetParent.nodeType === 1 ) {\n-\n-\t\t\t\t\/\/ Incorporate borders into its offset, since they are outside its content origin\n-\t\t\t\tparentOffset = jQuery( offsetParent ).offset();\n-\t\t\t\tparentOffset.top += jQuery.css( offsetParent, \"borderTopWidth\", true );\n-\t\t\t\tparentOffset.left += jQuery.css( offsetParent, \"borderLeftWidth\", true );\n-\t\t\t}\n-\t\t}\n-\n-\t\t\/\/ Subtract parent offsets and element margins\n-\t\treturn {\n-\t\t\ttop: offset.top - parentOffset.top - jQuery.css( elem, \"marginTop\", true ),\n-\t\t\tleft: offset.left - parentOffset.left - jQuery.css( elem, \"marginLeft\", true )\n-\t\t};\n-\t},\n-\n-\t\/\/ This method will return documentElement in the following cases:\n-\t\/\/ 1) For the element inside the iframe without offsetParent, this method will return\n-\t\/\/    documentElement of the parent window\n-\t\/\/ 2) For the hidden or detached element\n-\t\/\/ 3) For body or html element, i.e. in case of the html node - it will return itself\n-\t\/\/\n-\t\/\/ but those exceptions were never presented as a real life use-cases\n-\t\/\/ and might be considered as more preferable results.\n-\t\/\/\n-\t\/\/ This logic, however, is not guaranteed and can change at any point in the future\n-\toffsetParent: function() {\n-\t\treturn this.map( function() {\n-\t\t\tvar offsetParent = this.offsetParent;\n-\n-\t\t\twhile ( offsetParent && jQuery.css( offsetParent, \"position\" ) === \"static\" ) {\n-\t\t\t\toffsetParent = offsetParent.offsetParent;\n-\t\t\t}\n-\n-\t\t\treturn offsetParent || documentElement;\n-\t\t} );\n-\t}\n-} );\n-\n-\/\/ Create scrollLeft and scrollTop methods\n-jQuery.each( { scrollLeft: \"pageXOffset\", scrollTop: \"pageYOffset\" }, function( method, prop ) {\n-\tvar top = \"pageYOffset\" === prop;\n-\n-\tjQuery.fn[ method ] = function( val ) {\n-\t\treturn access( this, function( elem, method, val ) {\n-\n-\t\t\t\/\/ Coalesce documents and windows\n-\t\t\tvar win;\n-\t\t\tif ( isWindow( elem ) ) {\n-\t\t\t\twin = elem;\n-\t\t\t} else if ( elem.nodeType === 9 ) {\n-\t\t\t\twin = elem.defaultView;\n-\t\t\t}\n-\n-\t\t\tif ( val === undefined ) {\n-\t\t\t\treturn win ? win[ prop ] : elem[ method ];\n-\t\t\t}\n-\n-\t\t\tif ( win ) {\n-\t\t\t\twin.scrollTo(\n-\t\t\t\t\t!top ? val : win.pageXOffset,\n-\t\t\t\t\ttop ? val : win.pageYOffset\n-\t\t\t\t);\n-\n-\t\t\t} else {\n-\t\t\t\telem[ method ] = val;\n-\t\t\t}\n-\t\t}, method, val, arguments.length );\n-\t};\n-} );\n-\n-\/\/ Support: Safari <=7 - 9.1, Chrome <=37 - 49\n-\/\/ Add the top\/left cssHooks using jQuery.fn.position\n-\/\/ Webkit bug: https:\/\/bugs.webkit.org\/show_bug.cgi?id=29084\n-\/\/ Blink bug: https:\/\/bugs.chromium.org\/p\/chromium\/issues\/detail?id=589347\n-\/\/ getComputedStyle returns percent when specified for top\/left\/bottom\/right;\n-\/\/ rather than make the css module depend on the offset module, just check for it here\n-jQuery.each( [ \"top\", \"left\" ], function( _i, prop ) {\n-\tjQuery.cssHooks[ prop ] = addGetHookIf( support.pixelPosition,\n-\t\tfunction( elem, computed ) {\n-\t\t\tif ( computed ) {\n-\t\t\t\tcomputed = curCSS( elem, prop );\n-\n-\t\t\t\t\/\/ If curCSS returns percentage, fallback to offset\n-\t\t\t\treturn rnumnonpx.test( computed ) ?\n-\t\t\t\t\tjQuery( elem ).position()[ prop ] + \"px\" :\n-\t\t\t\t\tcomputed;\n-\t\t\t}\n-\t\t}\n-\t);\n-} );\n-\n-\n-\/\/ Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods\n-jQuery.each( { Height: \"height\", Width: \"width\" }, function( name, type ) {\n-\tjQuery.each( {\n-\t\tpadding: \"inner\" + name,\n-\t\tcontent: type,\n-\t\t\"\": \"outer\" + name\n-\t}, function( defaultExtra, funcName ) {\n-\n-\t\t\/\/ Margin is only for outerHeight, outerWidth\n-\t\tjQuery.fn[ funcName ] = function( margin, value ) {\n-\t\t\tvar chainable = arguments.length && ( defaultExtra || typeof margin !== \"boolean\" ),\n-\t\t\t\textra = defaultExtra || ( margin === true || value === true ? \"margin\" : \"border\" );\n-\n-\t\t\treturn access( this, function( elem, type, value ) {\n-\t\t\t\tvar doc;\n-\n-\t\t\t\tif ( isWindow( elem ) ) {\n-\n-\t\t\t\t\t\/\/ $( window ).outerWidth\/Height return w\/h including scrollbars (gh-1729)\n-\t\t\t\t\treturn funcName.indexOf( \"outer\" ) === 0 ?\n-\t\t\t\t\t\telem[ \"inner\" + name ] :\n-\t\t\t\t\t\telem.document.documentElement[ \"client\" + name ];\n-\t\t\t\t}\n-\n-\t\t\t\t\/\/ Get document width or height\n-\t\t\t\tif ( elem.nodeType === 9 ) {\n-\t\t\t\t\tdoc = elem.documentElement;\n-\n-\t\t\t\t\t\/\/ Either scroll[Width\/Height] or offset[Width\/Height] or client[Width\/Height],\n-\t\t\t\t\t\/\/ whichever is greatest\n-\t\t\t\t\treturn Math.max(\n-\t\t\t\t\t\telem.body[ \"scroll\" + name ], doc[ \"scroll\" + name ],\n-\t\t\t\t\t\telem.body[ \"offset\" + name ], doc[ \"offset\" + name ],\n-\t\t\t\t\t\tdoc[ \"client\" + name ]\n-\t\t\t\t\t);\n-\t\t\t\t}\n-\n-\t\t\t\treturn value === undefined ?\n-\n-\t\t\t\t\t\/\/ Get width or height on the element, requesting but not forcing parseFloat\n-\t\t\t\t\tjQuery.css( elem, type, extra ) :\n-\n-\t\t\t\t\t\/\/ Set width or height on the element\n-\t\t\t\t\tjQuery.style( elem, type, value, extra );\n-\t\t\t}, type, chainable ? margin : undefined, chainable );\n-\t\t};\n-\t} );\n-} );\n-\n-\n-jQuery.each( [\n-\t\"ajaxStart\",\n-\t\"ajaxStop\",\n-\t\"ajaxComplete\",\n-\t\"ajaxError\",\n-\t\"ajaxSuccess\",\n-\t\"ajaxSend\"\n-], function( _i, type ) {\n-\tjQuery.fn[ type ] = function( fn ) {\n-\t\treturn this.on( type, fn );\n-\t};\n-} );\n-\n-\n-\n-\n-jQuery.fn.extend( {\n-\n-\tbind: function( types, data, fn ) {\n-\t\treturn this.on( types, null, data, fn );\n-\t},\n-\tunbind: function( types, fn ) {\n-\t\treturn this.off( types, null, fn );\n-\t},\n-\n-\tdelegate: function( selector, types, data, fn ) {\n-\t\treturn this.on( types, selector, data, fn );\n-\t},\n-\tundelegate: function( selector, types, fn ) {\n-\n-\t\t\/\/ ( namespace ) or ( selector, types [, fn] )\n-\t\treturn arguments.length === 1 ?\n-\t\t\tthis.off( selector, \"**\" ) :\n-\t\t\tthis.off( types, selector || \"**\", fn );\n-\t},\n-\n-\thover: function( fnOver, fnOut ) {\n-\t\treturn this.mouseenter( fnOver ).mouseleave( fnOut || fnOver );\n-\t}\n-} );\n-\n-jQuery.each(\n-\t( \"blur focus focusin focusout resize scroll click dblclick \" +\n-\t\"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave \" +\n-\t\"change select submit keydown keypress keyup contextmenu\" ).split( \" \" ),\n-\tfunction( _i, name ) {\n-\n-\t\t\/\/ Handle event binding\n-\t\tjQuery.fn[ name ] = function( data, fn ) {\n-\t\t\treturn arguments.length > 0 ?\n-\t\t\t\tthis.on( name, null, data, fn ) :\n-\t\t\t\tthis.trigger( name );\n-\t\t};\n-\t}\n-);\n-\n-\n-\n-\n-\/\/ Support: Android <=4.0 only\n-\/\/ Make sure we trim BOM and NBSP\n-\/\/ Require that the \"whitespace run\" starts from a non-whitespace\n-\/\/ to avoid O(N^2) behavior when the engine would try matching \"\\s+$\" at each space position.\n-var rtrim = \/^[\\s\\uFEFF\\xA0]+|([^\\s\\uFEFF\\xA0])[\\s\\uFEFF\\xA0]+$\/g;\n-\n-\/\/ Bind a function to a context, optionally partially applying any\n-\/\/ arguments.\n-\/\/ jQuery.proxy is deprecated to promote standards (specifically Function#bind)\n-\/\/ However, it is not slated for removal any time soon\n-jQuery.proxy = function( fn, context ) {\n-\tvar tmp, args, proxy;\n-\n-\tif ( typeof context === \"string\" ) {\n-\t\ttmp = fn[ context ];\n-\t\tcontext = fn;\n-\t\tfn = tmp;\n-\t}\n-\n-\t\/\/ Quick check to determine if target is callable, in the spec\n-\t\/\/ this throws a TypeError, but we will just return undefined.\n-\tif ( !isFunction( fn ) ) {\n-\t\treturn undefined;\n-\t}\n-\n-\t\/\/ Simulated bind\n-\targs = slice.call( arguments, 2 );\n-\tproxy = function() {\n-\t\treturn fn.apply( context || this, args.concat( slice.call( arguments ) ) );\n-\t};\n-\n-\t\/\/ Set the guid of unique handler to the same of original handler, so it can be removed\n-\tproxy.guid = fn.guid = fn.guid || jQuery.guid++;\n-\n-\treturn proxy;\n-};\n-\n-jQuery.holdReady = function( hold ) {\n-\tif ( hold ) {\n-\t\tjQuery.readyWait++;\n-\t} else {\n-\t\tjQuery.ready( true );\n-\t}\n-};\n-jQuery.isArray = Array.isArray;\n-jQuery.parseJSON = JSON.parse;\n-jQuery.nodeName = nodeName;\n-jQuery.isFunction = isFunction;\n-jQuery.isWindow = isWindow;\n-jQuery.camelCase = camelCase;\n-jQuery.type = toType;\n-\n-jQuery.now = Date.now;\n-\n-jQuery.isNumeric = function( obj ) {\n-\n-\t\/\/ As of jQuery 3.0, isNumeric is limited to\n-\t\/\/ strings and numbers (primitives or objects)\n-\t\/\/ that can be coerced to finite numbers (gh-2662)\n-\tvar type = jQuery.type( obj );\n-\treturn ( type === \"number\" || type === \"string\" ) &&\n-\n-\t\t\/\/ parseFloat NaNs numeric-cast false positives (\"\")\n-\t\t\/\/ ...but misinterprets leading-number strings, particularly hex literals (\"0x...\")\n-\t\t\/\/ subtraction forces infinities to NaN\n-\t\t!isNaN( obj - parseFloat( obj ) );\n-};\n-\n-jQuery.trim = function( text ) {\n-\treturn text == null ?\n-\t\t\"\" :\n-\t\t( text + \"\" ).replace( rtrim, \"$1\" );\n-};\n-\n-\n-\n-\/\/ Register as a named AMD module, since jQuery can be concatenated with other\n-\/\/ files that may use define, but not via a proper concatenation script that\n-\/\/ understands anonymous AMD modules. A named AMD is safest and most robust\n-\/\/ way to register. Lowercase jquery is used because AMD module names are\n-\/\/ derived from file names, and jQuery is normally delivered in a lowercase\n-\/\/ file name. Do this after creating the global so that if an AMD module wants\n-\/\/ to call noConflict to hide this version of jQuery, it will work.\n-\n-\/\/ Note that for maximum portability, libraries that are not jQuery should\n-\/\/ declare themselves as anonymous modules, and avoid setting a global if an\n-\/\/ AMD loader is present. jQuery is a special case. For more information, see\n-\/\/ https:\/\/github.com\/jrburke\/requirejs\/wiki\/Updating-existing-libraries#wiki-anon\n-\n-if ( typeof define === \"function\" && define.amd ) {\n-\tdefine( \"jquery\", [], function() {\n-\t\treturn jQuery;\n-\t} );\n-}\n-\n-\n-\n-\n-var\n-\n-\t\/\/ Map over jQuery in case of overwrite\n-\t_jQuery = window.jQuery,\n-\n-\t\/\/ Map over the $ in case of overwrite\n-\t_$ = window.$;\n-\n-jQuery.noConflict = function( deep ) {\n-\tif ( window.$ === jQuery ) {\n-\t\twindow.$ = _$;\n-\t}\n-\n-\tif ( deep && window.jQuery === jQuery ) {\n-\t\twindow.jQuery = _jQuery;\n-\t}\n-\n-\treturn jQuery;\n-};\n-\n-\/\/ Expose jQuery and $ identifiers, even in AMD\n-\/\/ (trac-7102#comment:10, https:\/\/github.com\/jquery\/jquery\/pull\/557)\n-\/\/ and CommonJS for browser emulators (trac-13566)\n-if ( typeof noGlobal === \"undefined\" ) {\n-\twindow.jQuery = window.$ = jQuery;\n-}\n-\n-\n-\n-\n-return jQuery;\n-} );\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/script-dir\/jquery-3.6.1.js","additions":0,"deletions":10909,"binary":false,"changes":10909,"status":"deleted"},{"patch":"@@ -1,2 +0,0 @@\n-\/*! jQuery v3.6.1 | (c) OpenJS Foundation and other contributors | jquery.org\/license *\/\n-!function(e,t){\"use strict\";\"object\"==typeof module&&\"object\"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error(\"jQuery requires a window with a document\");return t(e)}:t(e)}(\"undefined\"!=typeof window?window:this,function(C,e){\"use strict\";var t=[],r=Object.getPrototypeOf,s=t.slice,g=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},u=t.push,i=t.indexOf,n={},o=n.toString,y=n.hasOwnProperty,a=y.toString,l=a.call(Object),v={},m=function(e){return\"function\"==typeof e&&\"number\"!=typeof e.nodeType&&\"function\"!=typeof e.item},x=function(e){return null!=e&&e===e.window},E=C.document,c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||E).createElement(\"script\");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+\"\":\"object\"==typeof e||\"function\"==typeof e?n[o.call(e)]||\"object\":typeof e}var f=\"3.6.1\",S=function(e,t){return new S.fn.init(e,t)};function p(e){var t=!!e&&\"length\"in e&&e.length,n=w(e);return!m(e)&&!x(e)&&(\"array\"===n||0===t||\"number\"==typeof t&&0<t&&t-1 in e)}S.fn=S.prototype={jquery:f,constructor:S,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(n){return this.pushStack(S.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(S.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:t.sort,splice:t.splice},S.extend=S.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for(\"boolean\"==typeof a&&(l=a,a=arguments[s]||{},s++),\"object\"==typeof a||m(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],\"__proto__\"!==t&&a!==r&&(l&&r&&(S.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||S.isPlainObject(n)?n:{},i=!1,a[t]=S.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},S.extend({expando:\"jQuery\"+(f+Math.random()).replace(\/\\D\/g,\"\"),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||\"[object Object]\"!==o.call(e))&&(!(t=r(e))||\"function\"==typeof(n=y.call(t,\"constructor\")&&t.constructor)&&a.call(n)===l)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){b(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(p(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(p(Object(e))?S.merge(n,\"string\"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(p(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g(a)},guid:1,support:v}),\"function\"==typeof Symbol&&(S.fn[Symbol.iterator]=t[Symbol.iterator]),S.each(\"Boolean Number String Function Array Date RegExp Object Error Symbol\".split(\" \"),function(e,t){n[\"[object \"+t+\"]\"]=t.toLowerCase()});var d=function(n){var e,d,b,o,i,h,f,g,w,u,l,T,C,a,E,y,s,c,v,S=\"sizzle\"+1*new Date,p=n.document,k=0,r=0,m=ue(),x=ue(),A=ue(),N=ue(),j=function(e,t){return e===t&&(l=!0),0},D={}.hasOwnProperty,t=[],q=t.pop,L=t.push,H=t.push,O=t.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R=\"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped\",M=\"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",I=\"(?:\\\\\\\\[\\\\da-fA-F]{1,6}\"+M+\"?|\\\\\\\\[^\\\\r\\\\n\\\\f]|[\\\\w-]|[^\\0-\\\\x7f])+\",W=\"\\\\[\"+M+\"*(\"+I+\")(?:\"+M+\"*([*^$|!~]?=)\"+M+\"*(?:'((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\"|(\"+I+\"))|)\"+M+\"*\\\\]\",F=\":(\"+I+\")(?:\\\\((('((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\")|((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\"+W+\")*)|.*)\\\\)|)\",$=new RegExp(M+\"+\",\"g\"),B=new RegExp(\"^\"+M+\"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\"+M+\"+$\",\"g\"),_=new RegExp(\"^\"+M+\"*,\"+M+\"*\"),z=new RegExp(\"^\"+M+\"*([>+~]|\"+M+\")\"+M+\"*\"),U=new RegExp(M+\"|>\"),X=new RegExp(F),V=new RegExp(\"^\"+I+\"$\"),G={ID:new RegExp(\"^#(\"+I+\")\"),CLASS:new RegExp(\"^\\\\.(\"+I+\")\"),TAG:new RegExp(\"^(\"+I+\"|[*])\"),ATTR:new RegExp(\"^\"+W),PSEUDO:new RegExp(\"^\"+F),CHILD:new RegExp(\"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\"+M+\"*(even|odd|(([+-]|)(\\\\d*)n|)\"+M+\"*(?:([+-]|)\"+M+\"*(\\\\d+)|))\"+M+\"*\\\\)|)\",\"i\"),bool:new RegExp(\"^(?:\"+R+\")$\",\"i\"),needsContext:new RegExp(\"^\"+M+\"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\"+M+\"*((?:-\\\\d)?\\\\d*)\"+M+\"*\\\\)|)(?=[^-]|$)\",\"i\")},Y=\/HTML$\/i,Q=\/^(?:input|select|textarea|button)$\/i,J=\/^h\\d$\/i,K=\/^[^{]+\\{\\s*\\[native \\w\/,Z=\/^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$\/,ee=\/[+~]\/,te=new RegExp(\"\\\\\\\\[\\\\da-fA-F]{1,6}\"+M+\"?|\\\\\\\\([^\\\\r\\\\n\\\\f])\",\"g\"),ne=function(e,t){var n=\"0x\"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=\/([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\0-\\x1f\\x7f-\\uFFFF\\w-]\/g,ie=function(e,t){return t?\"\\0\"===e?\"\\ufffd\":e.slice(0,-1)+\"\\\\\"+e.charCodeAt(e.length-1).toString(16)+\" \":\"\\\\\"+e},oe=function(){T()},ae=be(function(e){return!0===e.disabled&&\"fieldset\"===e.nodeName.toLowerCase()},{dir:\"parentNode\",next:\"legend\"});try{H.apply(t=O.call(p.childNodes),p.childNodes),t[p.childNodes.length].nodeType}catch(e){H={apply:t.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function se(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],\"string\"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&(T(e),e=e||C,E)){if(11!==p&&(u=Z.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&v(e,a)&&a.id===i)return n.push(a),n}else{if(u[2])return H.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&d.getElementsByClassName&&e.getElementsByClassName)return H.apply(n,e.getElementsByClassName(i)),n}if(d.qsa&&!N[t+\" \"]&&(!y||!y.test(t))&&(1!==p||\"object\"!==e.nodeName.toLowerCase())){if(c=t,f=e,1===p&&(U.test(t)||z.test(t))){(f=ee.test(t)&&ve(e.parentNode)||e)===e&&d.scope||((s=e.getAttribute(\"id\"))?s=s.replace(re,ie):e.setAttribute(\"id\",s=S)),o=(l=h(t)).length;while(o--)l[o]=(s?\"#\"+s:\":scope\")+\" \"+xe(l[o]);c=l.join(\",\")}try{return H.apply(n,f.querySelectorAll(c)),n}catch(e){N(t,!0)}finally{s===S&&e.removeAttribute(\"id\")}}}return g(t.replace(B,\"$1\"),e,n,r)}function ue(){var r=[];return function e(t,n){return r.push(t+\" \")>b.cacheLength&&delete e[r.shift()],e[t+\" \"]=n}}function le(e){return e[S]=!0,e}function ce(e){var t=C.createElement(\"fieldset\");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){var n=e.split(\"|\"),r=n.length;while(r--)b.attrHandle[n[r]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function de(t){return function(e){return\"input\"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return(\"input\"===t||\"button\"===t)&&e.type===n}}function ge(t){return function(e){return\"form\"in e?e.parentNode&&!1===e.disabled?\"label\"in e?\"label\"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:\"label\"in e&&e.disabled===t}}function ye(a){return le(function(o){return o=+o,le(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function ve(e){return e&&\"undefined\"!=typeof e.getElementsByTagName&&e}for(e in d=se.support={},i=se.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||\"HTML\")},T=se.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:p;return r!=C&&9===r.nodeType&&r.documentElement&&(a=(C=r).documentElement,E=!i(C),p!=C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener(\"unload\",oe,!1):n.attachEvent&&n.attachEvent(\"onunload\",oe)),d.scope=ce(function(e){return a.appendChild(e).appendChild(C.createElement(\"div\")),\"undefined\"!=typeof e.querySelectorAll&&!e.querySelectorAll(\":scope fieldset div\").length}),d.attributes=ce(function(e){return e.className=\"i\",!e.getAttribute(\"className\")}),d.getElementsByTagName=ce(function(e){return e.appendChild(C.createComment(\"\")),!e.getElementsByTagName(\"*\").length}),d.getElementsByClassName=K.test(C.getElementsByClassName),d.getById=ce(function(e){return a.appendChild(e).id=S,!C.getElementsByName||!C.getElementsByName(S).length}),d.getById?(b.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute(\"id\")===t}},b.find.ID=function(e,t){if(\"undefined\"!=typeof t.getElementById&&E){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(te,ne);return function(e){var t=\"undefined\"!=typeof e.getAttributeNode&&e.getAttributeNode(\"id\");return t&&t.value===n}},b.find.ID=function(e,t){if(\"undefined\"!=typeof t.getElementById&&E){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode(\"id\"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode(\"id\"))&&n.value===e)return[o]}return[]}}),b.find.TAG=d.getElementsByTagName?function(e,t){return\"undefined\"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if(\"*\"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=d.getElementsByClassName&&function(e,t){if(\"undefined\"!=typeof t.getElementsByClassName&&E)return t.getElementsByClassName(e)},s=[],y=[],(d.qsa=K.test(C.querySelectorAll))&&(ce(function(e){var t;a.appendChild(e).innerHTML=\"<a id='\"+S+\"'><\/a><select id='\"+S+\"-\\r\\\\' msallowcapture=''><option selected=''><\/option><\/select>\",e.querySelectorAll(\"[msallowcapture^='']\").length&&y.push(\"[*^$]=\"+M+\"*(?:''|\\\"\\\")\"),e.querySelectorAll(\"[selected]\").length||y.push(\"\\\\[\"+M+\"*(?:value|\"+R+\")\"),e.querySelectorAll(\"[id~=\"+S+\"-]\").length||y.push(\"~=\"),(t=C.createElement(\"input\")).setAttribute(\"name\",\"\"),e.appendChild(t),e.querySelectorAll(\"[name='']\").length||y.push(\"\\\\[\"+M+\"*name\"+M+\"*=\"+M+\"*(?:''|\\\"\\\")\"),e.querySelectorAll(\":checked\").length||y.push(\":checked\"),e.querySelectorAll(\"a#\"+S+\"+*\").length||y.push(\".#.+[+~]\"),e.querySelectorAll(\"\\\\\\f\"),y.push(\"[\\\\r\\\\n\\\\f]\")}),ce(function(e){e.innerHTML=\"<a href='' disabled='disabled'><\/a><select disabled='disabled'><option\/><\/select>\";var t=C.createElement(\"input\");t.setAttribute(\"type\",\"hidden\"),e.appendChild(t).setAttribute(\"name\",\"D\"),e.querySelectorAll(\"[name=d]\").length&&y.push(\"name\"+M+\"*[*^$|!~]?=\"),2!==e.querySelectorAll(\":enabled\").length&&y.push(\":enabled\",\":disabled\"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(\":disabled\").length&&y.push(\":enabled\",\":disabled\"),e.querySelectorAll(\"*,:x\"),y.push(\",.*:\")})),(d.matchesSelector=K.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ce(function(e){d.disconnectedMatch=c.call(e,\"*\"),c.call(e,\"[s!='']:x\"),s.push(\"!=\",F)}),y=y.length&&new RegExp(y.join(\"|\")),s=s.length&&new RegExp(s.join(\"|\")),t=K.test(a.compareDocumentPosition),v=t||K.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},j=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e==C||e.ownerDocument==p&&v(p,e)?-1:t==C||t.ownerDocument==p&&v(p,t)?1:u?P(u,e)-P(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e==C?-1:t==C?1:i?-1:o?1:u?P(u,e)-P(u,t):0;if(i===o)return pe(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?pe(a[r],s[r]):a[r]==p?-1:s[r]==p?1:0}),C},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(T(e),d.matchesSelector&&E&&!N[t+\" \"]&&(!s||!s.test(t))&&(!y||!y.test(t)))try{var n=c.call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){N(t,!0)}return 0<se(t,C,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!=C&&T(e),v(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=C&&T(e);var n=b.attrHandle[t.toLowerCase()],r=n&&D.call(b.attrHandle,t.toLowerCase())?n(e,t,!E):void 0;return void 0!==r?r:d.attributes||!E?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+\"\").replace(re,ie)},se.error=function(e){throw new Error(\"Syntax error, unrecognized expression: \"+e)},se.uniqueSort=function(e){var t,n=[],r=0,i=0;if(l=!d.detectDuplicates,u=!d.sortStable&&e.slice(0),e.sort(j),l){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)e.splice(n[r],1)}return u=null,e},o=se.getText=function(e){var t,n=\"\",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if(\"string\"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else while(t=e[r++])n+=o(t);return n},(b=se.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{\">\":{dir:\"parentNode\",first:!0},\" \":{dir:\"parentNode\"},\"+\":{dir:\"previousSibling\",first:!0},\"~\":{dir:\"previousSibling\"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||\"\").replace(te,ne),\"~=\"===e[2]&&(e[3]=\" \"+e[3]+\" \"),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),\"nth\"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(\"even\"===e[3]||\"odd\"===e[3])),e[5]=+(e[7]+e[8]||\"odd\"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||\"\":n&&X.test(n)&&(t=h(n,!0))&&(t=n.indexOf(\")\",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return\"*\"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=m[e+\" \"];return t||(t=new RegExp(\"(^|\"+M+\")\"+e+\"(\"+M+\"|$)\"))&&m(e,function(e){return t.test(\"string\"==typeof e.className&&e.className||\"undefined\"!=typeof e.getAttribute&&e.getAttribute(\"class\")||\"\")})},ATTR:function(n,r,i){return function(e){var t=se.attr(e,n);return null==t?\"!=\"===r:!r||(t+=\"\",\"=\"===r?t===i:\"!=\"===r?t!==i:\"^=\"===r?i&&0===t.indexOf(i):\"*=\"===r?i&&-1<t.indexOf(i):\"$=\"===r?i&&t.slice(-i.length)===i:\"~=\"===r?-1<(\" \"+t.replace($,\" \")+\" \").indexOf(i):\"|=\"===r&&(t===i||t.slice(0,i.length+1)===i+\"-\"))}},CHILD:function(h,e,t,g,y){var v=\"nth\"!==h.slice(0,3),m=\"last\"!==h.slice(-4),x=\"of-type\"===e;return 1===g&&0===y?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u,l=v!==m?\"nextSibling\":\"previousSibling\",c=e.parentNode,f=x&&e.nodeName.toLowerCase(),p=!n&&!x,d=!1;if(c){if(v){while(l){a=e;while(a=a[l])if(x?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;u=l=\"only\"===h&&!u&&\"nextSibling\"}return!0}if(u=[m?c.firstChild:c.lastChild],m&&p){d=(s=(r=(i=(o=(a=c)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1])&&r[2],a=s&&c.childNodes[s];while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if(1===a.nodeType&&++d&&a===e){i[h]=[k,s,d];break}}else if(p&&(d=s=(r=(i=(o=(a=e)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1]),!1===d)while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if((x?a.nodeName.toLowerCase()===f:1===a.nodeType)&&++d&&(p&&((i=(o=a[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[k,d]),a===e))break;return(d-=y)===g||d%g==0&&0<=d\/g}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error(\"unsupported pseudo: \"+e);return a[S]?a(o):1<a.length?(t=[e,e,\"\",o],b.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=P(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:le(function(e){var r=[],i=[],s=f(e.replace(B,\"$1\"));return s[S]?le(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:le(function(t){return function(e){return 0<se(t,e).length}}),contains:le(function(t){return t=t.replace(te,ne),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:le(function(n){return V.test(n||\"\")||se.error(\"unsupported lang: \"+n),n=n.replace(te,ne).toLowerCase(),function(e){var t;do{if(t=E?e.lang:e.getAttribute(\"xml:lang\")||e.getAttribute(\"lang\"))return(t=t.toLowerCase())===n||0===t.indexOf(n+\"-\")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return\"input\"===t&&!!e.checked||\"option\"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return\"input\"===t&&\"button\"===e.type||\"button\"===t},text:function(e){var t;return\"input\"===e.nodeName.toLowerCase()&&\"text\"===e.type&&(null==(t=e.getAttribute(\"type\"))||\"text\"===t.toLowerCase())},first:ye(function(){return[0]}),last:ye(function(e,t){return[t-1]}),eq:ye(function(e,t,n){return[n<0?n+t:n]}),even:ye(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ye(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ye(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:ye(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=he(e);function me(){}function xe(e){for(var t=0,n=e.length,r=\"\";t<n;t++)r+=e[t].value;return r}function be(s,e,t){var u=e.dir,l=e.next,c=l||u,f=t&&\"parentNode\"===c,p=r++;return e.first?function(e,t,n){while(e=e[u])if(1===e.nodeType||f)return s(e,t,n);return!1}:function(e,t,n){var r,i,o,a=[k,p];if(n){while(e=e[u])if((1===e.nodeType||f)&&s(e,t,n))return!0}else while(e=e[u])if(1===e.nodeType||f)if(i=(o=e[S]||(e[S]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[u]||e;else{if((r=i[c])&&r[0]===k&&r[1]===p)return a[2]=r[2];if((i[c]=a)[2]=s(e,t,n))return!0}return!1}}function we(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Te(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Ce(d,h,g,y,v,e){return y&&!y[S]&&(y=Ce(y)),v&&!v[S]&&(v=Ce(v,e)),le(function(e,t,n,r){var i,o,a,s=[],u=[],l=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(h||\"*\",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:Te(c,s,d,n,r),p=g?v||(e?d:l||y)?[]:t:f;if(g&&g(f,p,n,r),y){i=Te(p,u),y(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(p[u[o]]=!(f[u[o]]=a))}if(e){if(v||d){if(v){i=[],o=p.length;while(o--)(a=p[o])&&i.push(f[o]=a);v(null,p=[],i,r)}o=p.length;while(o--)(a=p[o])&&-1<(i=v?P(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=Te(p===t?p.splice(l,p.length):p),v?v(null,t,p,r):H.apply(t,p)})}function Ee(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[\" \"],s=o?1:0,u=be(function(e){return e===i},a,!0),l=be(function(e){return-1<P(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!==w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[be(we(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[S]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return Ce(1<s&&we(c),1<s&&xe(e.slice(0,s-1).concat({value:\" \"===e[s-2].type?\"*\":\"\"})).replace(B,\"$1\"),t,s<n&&Ee(e.slice(s,n)),n<r&&Ee(e=e.slice(n)),n<r&&xe(e))}c.push(t)}return we(c)}return me.prototype=b.filters=b.pseudos,b.setFilters=new me,h=se.tokenize=function(e,t){var n,r,i,o,a,s,u,l=x[e+\" \"];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=_.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=z.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(B,\" \")}),a=a.slice(n.length)),b.filter)!(r=G[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):x(e,s).slice(0)},f=se.compile=function(e,t){var n,y,v,m,x,r,i=[],o=[],a=A[e+\" \"];if(!a){t||(t=h(e)),n=t.length;while(n--)(a=Ee(t[n]))[S]?i.push(a):o.push(a);(a=A(e,(y=o,m=0<(v=i).length,x=0<y.length,r=function(e,t,n,r,i){var o,a,s,u=0,l=\"0\",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG(\"*\",i),h=k+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t==C||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument==C||(T(o),n=!E);while(s=y[a++])if(s(o,t||C,n)){r.push(o);break}i&&(k=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=v[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=q.call(r));f=Te(f)}H.apply(r,f),i&&!e&&0<f.length&&1<u+v.length&&se.uniqueSort(r)}return i&&(k=h,w=p),c},m?le(r):r))).selector=e}return a},g=se.select=function(e,t,n,r){var i,o,a,s,u,l=\"function\"==typeof e&&e,c=!r&&h(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&\"ID\"===(a=o[0]).type&&9===t.nodeType&&E&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(te,ne),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=G.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(te,ne),ee.test(o[0].type)&&ve(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&xe(o)))return H.apply(n,r),n;break}}}return(l||f(e,c))(r,t,!E,n,!t||ee.test(e)&&ve(t.parentNode)||t),n},d.sortStable=S.split(\"\").sort(j).join(\"\")===S,d.detectDuplicates=!!l,T(),d.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(C.createElement(\"fieldset\"))}),ce(function(e){return e.innerHTML=\"<a href='#'><\/a>\",\"#\"===e.firstChild.getAttribute(\"href\")})||fe(\"type|href|height|width\",function(e,t,n){if(!n)return e.getAttribute(t,\"type\"===t.toLowerCase()?1:2)}),d.attributes&&ce(function(e){return e.innerHTML=\"<input\/>\",e.firstChild.setAttribute(\"value\",\"\"),\"\"===e.firstChild.getAttribute(\"value\")})||fe(\"value\",function(e,t,n){if(!n&&\"input\"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute(\"disabled\")})||fe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(C);S.find=d,S.expr=d.selectors,S.expr[\":\"]=S.expr.pseudos,S.uniqueSort=S.unique=d.uniqueSort,S.text=d.getText,S.isXMLDoc=d.isXML,S.contains=d.contains,S.escapeSelector=d.escape;var h=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&S(e).is(n))break;r.push(e)}return r},T=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},k=S.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var N=\/^<([a-z][^\\\/\\0>:\\x20\\t\\r\\n\\f]*)[\\x20\\t\\r\\n\\f]*\\\/?>(?:<\\\/\\1>|)$\/i;function j(e,n,r){return m(n)?S.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?S.grep(e,function(e){return e===n!==r}):\"string\"!=typeof n?S.grep(e,function(e){return-1<i.call(n,e)!==r}):S.filter(n,e,r)}S.filter=function(e,t,n){var r=t[0];return n&&(e=\":not(\"+e+\")\"),1===t.length&&1===r.nodeType?S.find.matchesSelector(r,e)?[r]:[]:S.find.matches(e,S.grep(t,function(e){return 1===e.nodeType}))},S.fn.extend({find:function(e){var t,n,r=this.length,i=this;if(\"string\"!=typeof e)return this.pushStack(S(e).filter(function(){for(t=0;t<r;t++)if(S.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)S.find(e,i[t],n);return 1<r?S.uniqueSort(n):n},filter:function(e){return this.pushStack(j(this,e||[],!1))},not:function(e){return this.pushStack(j(this,e||[],!0))},is:function(e){return!!j(this,\"string\"==typeof e&&k.test(e)?S(e):e||[],!1).length}});var D,q=\/^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]+))$\/;(S.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||D,\"string\"==typeof e){if(!(r=\"<\"===e[0]&&\">\"===e[e.length-1]&&3<=e.length?[null,e,null]:q.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),N.test(r[1])&&S.isPlainObject(t))for(r in t)m(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=E.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,D=S(E);var L=\/^(?:parents|prev(?:Until|All))\/,H={children:!0,contents:!0,next:!0,prev:!0};function O(e,t){while((e=e[t])&&1!==e.nodeType);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a=\"string\"!=typeof e&&S(e);if(!k.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&S.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?S.uniqueSort(o):o)},index:function(e){return e?\"string\"==typeof e?i.call(S(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return h(e,\"parentNode\")},parentsUntil:function(e,t,n){return h(e,\"parentNode\",n)},next:function(e){return O(e,\"nextSibling\")},prev:function(e){return O(e,\"previousSibling\")},nextAll:function(e){return h(e,\"nextSibling\")},prevAll:function(e){return h(e,\"previousSibling\")},nextUntil:function(e,t,n){return h(e,\"nextSibling\",n)},prevUntil:function(e,t,n){return h(e,\"previousSibling\",n)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(A(e,\"template\")&&(e=e.content||e),S.merge([],e.childNodes))}},function(r,i){S.fn[r]=function(e,t){var n=S.map(this,i,e);return\"Until\"!==r.slice(-5)&&(t=e),t&&\"string\"==typeof t&&(n=S.filter(t,n)),1<this.length&&(H[r]||S.uniqueSort(n),L.test(r)&&n.reverse()),this.pushStack(n)}});var P=\/[^\\x20\\t\\r\\n\\f]+\/g;function R(e){return e}function M(e){throw e}function I(e,t,n,r){var i;try{e&&m(i=e.promise)?i.call(e).done(t).fail(n):e&&m(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(r){var e,n;r=\"string\"==typeof r?(e=r,n={},S.each(e.match(P)||[],function(e,t){n[t]=!0}),n):S.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:\"\")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){S.each(e,function(e,t){m(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&\"string\"!==w(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return S.each(arguments,function(e,t){var n;while(-1<(n=S.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<S.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t=\"\",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=\"\"),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},S.extend({Deferred:function(e){var o=[[\"notify\",\"progress\",S.Callbacks(\"memory\"),S.Callbacks(\"memory\"),2],[\"resolve\",\"done\",S.Callbacks(\"once memory\"),S.Callbacks(\"once memory\"),0,\"resolved\"],[\"reject\",\"fail\",S.Callbacks(\"once memory\"),S.Callbacks(\"once memory\"),1,\"rejected\"]],i=\"pending\",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},\"catch\":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return S.Deferred(function(r){S.each(o,function(e,t){var n=m(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&m(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+\"With\"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError(\"Thenable self-resolution\");t=e&&(\"object\"==typeof e||\"function\"==typeof e)&&e.then,m(t)?s?t.call(e,l(u,o,R,s),l(u,o,M,s)):(u++,t.call(e,l(u,o,R,s),l(u,o,M,s),l(u,o,R,o.notifyWith))):(a!==R&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(e,t.stackTrace),u<=i+1&&(a!==M&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(S.Deferred.getStackHook&&(t.stackTrace=S.Deferred.getStackHook()),C.setTimeout(t))}}return S.Deferred(function(e){o[0][3].add(l(0,e,m(r)?r:R,e.notifyWith)),o[1][3].add(l(0,e,m(t)?t:R)),o[2][3].add(l(0,e,m(n)?n:M))}).promise()},promise:function(e){return null!=e?S.extend(e,a):a}},s={};return S.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+\"With\"](this===s?void 0:this,arguments),this},s[t[0]+\"With\"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=s.call(arguments),o=S.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(I(e,o.done(a(t)).resolve,o.reject,!n),\"pending\"===o.state()||m(i[t]&&i[t].then)))return o.then();while(t--)I(i[t],a(t),o.reject);return o.promise()}});var W=\/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$\/;S.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&W.test(e.name)&&C.console.warn(\"jQuery.Deferred exception: \"+e.message,e.stack,t)},S.readyException=function(e){C.setTimeout(function(){throw e})};var F=S.Deferred();function $(){E.removeEventListener(\"DOMContentLoaded\",$),C.removeEventListener(\"load\",$),S.ready()}S.fn.ready=function(e){return F.then(e)[\"catch\"](function(e){S.readyException(e)}),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0)!==e&&0<--S.readyWait||F.resolveWith(E,[S])}}),S.ready.then=F.then,\"complete\"===E.readyState||\"loading\"!==E.readyState&&!E.documentElement.doScroll?C.setTimeout(S.ready):(E.addEventListener(\"DOMContentLoaded\",$),C.addEventListener(\"load\",$));var B=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if(\"object\"===w(n))for(s in i=!0,n)B(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,m(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(S(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},_=\/^-ms-\/,z=\/-([a-z])\/g;function U(e,t){return t.toUpperCase()}function X(e){return e.replace(_,\"ms-\").replace(z,U)}var V=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=S.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},V(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if(\"string\"==typeof t)i[X(t)]=n;else for(r in t)i[X(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][X(t)]},access:function(e,t,n){return void 0===t||t&&\"string\"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(X):(t=X(t))in r?[t]:t.match(P)||[]).length;while(n--)delete r[t[n]]}(void 0===t||S.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var Y=new G,Q=new G,J=\/^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$\/,K=\/[A-Z]\/g;function Z(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r=\"data-\"+t.replace(K,\"-$&\").toLowerCase(),\"string\"==typeof(n=e.getAttribute(r))){try{n=\"true\"===(i=n)||\"false\"!==i&&(\"null\"===i?null:i===+i+\"\"?+i:J.test(i)?JSON.parse(i):i)}catch(e){}Q.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return Q.hasData(e)||Y.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),S.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=Q.get(o),1===o.nodeType&&!Y.get(o,\"hasDataAttrs\"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf(\"data-\")&&(r=X(r.slice(5)),Z(o,r,i[r]));Y.set(o,\"hasDataAttrs\",!0)}return i}return\"object\"==typeof n?this.each(function(){Q.set(this,n)}):B(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=Q.get(o,n))?t:void 0!==(t=Z(o,n))?t:void 0;this.each(function(){Q.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){Q.remove(this,e)})}}),S.extend({queue:function(e,t,n){var r;if(e)return t=(t||\"fx\")+\"queue\",r=Y.get(e,t),n&&(!r||Array.isArray(n)?r=Y.access(e,t,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||\"fx\";var n=S.queue(e,t),r=n.length,i=n.shift(),o=S._queueHooks(e,t);\"inprogress\"===i&&(i=n.shift(),r--),i&&(\"fx\"===t&&n.unshift(\"inprogress\"),delete o.stop,i.call(e,function(){S.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+\"queueHooks\";return Y.get(e,n)||Y.access(e,n,{empty:S.Callbacks(\"once memory\").add(function(){Y.remove(e,[t+\"queue\",n])})})}}),S.fn.extend({queue:function(t,n){var e=2;return\"string\"!=typeof t&&(n=t,t=\"fx\",e--),arguments.length<e?S.queue(this[0],t):void 0===n?this:this.each(function(){var e=S.queue(this,t,n);S._queueHooks(this,t),\"fx\"===t&&\"inprogress\"!==e[0]&&S.dequeue(this,t)})},dequeue:function(e){return this.each(function(){S.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||\"fx\",[])},promise:function(e,t){var n,r=1,i=S.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};\"string\"!=typeof e&&(t=e,e=void 0),e=e||\"fx\";while(a--)(n=Y.get(o[a],e+\"queueHooks\"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var ee=\/[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)\/.source,te=new RegExp(\"^(?:([+-])=|)(\"+ee+\")([a-z%]*)$\",\"i\"),ne=[\"Top\",\"Right\",\"Bottom\",\"Left\"],re=E.documentElement,ie=function(e){return S.contains(e.ownerDocument,e)},oe={composed:!0};re.getRootNode&&(ie=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(oe)===e.ownerDocument});var ae=function(e,t){return\"none\"===(e=t||e).style.display||\"\"===e.style.display&&ie(e)&&\"none\"===S.css(e,\"display\")};function se(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return S.css(e,t,\"\")},u=s(),l=n&&n[3]||(S.cssNumber[t]?\"\":\"px\"),c=e.nodeType&&(S.cssNumber[t]||\"px\"!==l&&+u)&&te.exec(S.css(e,t));if(c&&c[3]!==l){u\/=2,l=l||c[3],c=+u||1;while(a--)S.style(e,t,c+l),(1-o)*(1-(o=s()\/u||.5))<=0&&(a=0),c\/=o;c*=2,S.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ue={};function le(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?(\"none\"===n&&(l[c]=Y.get(r,\"display\")||null,l[c]||(r.style.display=\"\")),\"\"===r.style.display&&ae(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ue[s])||(o=a.body.appendChild(a.createElement(s)),u=S.css(o,\"display\"),o.parentNode.removeChild(o),\"none\"===u&&(u=\"block\"),ue[s]=u)))):\"none\"!==n&&(l[c]=\"none\",Y.set(r,\"display\",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}S.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return\"boolean\"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?S(this).show():S(this).hide()})}});var ce,fe,pe=\/^(?:checkbox|radio)$\/i,de=\/<([a-z][^\\\/\\0>\\x20\\t\\r\\n\\f]*)\/i,he=\/^$|^module$|\\\/(?:java|ecma)script\/i;ce=E.createDocumentFragment().appendChild(E.createElement(\"div\")),(fe=E.createElement(\"input\")).setAttribute(\"type\",\"radio\"),fe.setAttribute(\"checked\",\"checked\"),fe.setAttribute(\"name\",\"t\"),ce.appendChild(fe),v.checkClone=ce.cloneNode(!0).cloneNode(!0).lastChild.checked,ce.innerHTML=\"<textarea>x<\/textarea>\",v.noCloneChecked=!!ce.cloneNode(!0).lastChild.defaultValue,ce.innerHTML=\"<option><\/option>\",v.option=!!ce.lastChild;var ge={thead:[1,\"<table>\",\"<\/table>\"],col:[2,\"<table><colgroup>\",\"<\/colgroup><\/table>\"],tr:[2,\"<table><tbody>\",\"<\/tbody><\/table>\"],td:[3,\"<table><tbody><tr>\",\"<\/tr><\/tbody><\/table>\"],_default:[0,\"\",\"\"]};function ye(e,t){var n;return n=\"undefined\"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||\"*\"):\"undefined\"!=typeof e.querySelectorAll?e.querySelectorAll(t||\"*\"):[],void 0===t||t&&A(e,t)?S.merge([e],n):n}function ve(e,t){for(var n=0,r=e.length;n<r;n++)Y.set(e[n],\"globalEval\",!t||Y.get(t[n],\"globalEval\"))}ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td,v.option||(ge.optgroup=ge.option=[1,\"<select multiple='multiple'>\",\"<\/select>\"]);var me=\/<|&#?\\w+;\/;function xe(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if(\"object\"===w(o))S.merge(p,o.nodeType?[o]:o);else if(me.test(o)){a=a||f.appendChild(t.createElement(\"div\")),s=(de.exec(o)||[\"\",\"\"])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+S.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;S.merge(p,a.childNodes),(a=f.firstChild).textContent=\"\"}else p.push(t.createTextNode(o));f.textContent=\"\",d=0;while(o=p[d++])if(r&&-1<S.inArray(o,r))i&&i.push(o);else if(l=ie(o),a=ye(f.appendChild(o),\"script\"),l&&ve(a),n){c=0;while(o=a[c++])he.test(o.type||\"\")&&n.push(o)}return f}var be=\/^([^.]*)(?:\\.(.+)|)\/;function we(){return!0}function Te(){return!1}function Ce(e,t){return e===function(){try{return E.activeElement}catch(e){}}()==(\"focus\"===t)}function Ee(e,t,n,r,i,o){var a,s;if(\"object\"==typeof t){for(s in\"string\"!=typeof n&&(r=r||n,n=void 0),t)Ee(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&(\"string\"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Te;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return S().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=S.guid++)),e.each(function(){S.event.add(this,t,i,r,n)})}function Se(e,i,o){o?(Y.set(e,i,!1),S.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=Y.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(S.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),Y.set(this,i,r),t=o(this,i),this[i](),r!==(n=Y.get(this,i))||t?Y.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n&&n.value}else r.length&&(Y.set(this,i,{value:S.event.trigger(S.extend(r[0],S.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Y.get(e,i)&&S.event.add(e,i,we)}S.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,y=Y.get(t);if(V(t)){n.handler&&(n=(o=n).handler,i=o.selector),i&&S.find.matchesSelector(re,i),n.guid||(n.guid=S.guid++),(u=y.events)||(u=y.events=Object.create(null)),(a=y.handle)||(a=y.handle=function(e){return\"undefined\"!=typeof S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||\"\").match(P)||[\"\"]).length;while(l--)d=g=(s=be.exec(e[l])||[])[1],h=(s[2]||\"\").split(\".\").sort(),d&&(f=S.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=S.event.special[d]||{},c=S.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:h.join(\".\")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),S.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,y=Y.hasData(e)&&Y.get(e);if(y&&(u=y.events)){l=(t=(t||\"\").match(P)||[\"\"]).length;while(l--)if(d=g=(s=be.exec(t[l])||[])[1],h=(s[2]||\"\").split(\".\").sort(),d){f=S.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp(\"(^|\\\\.)\"+h.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&(\"**\"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,y.handle)||S.removeEvent(e,d,y.handle),delete u[d])}else for(d in u)S.event.remove(e,d+t[l],n,r,!0);S.isEmptyObject(u)&&Y.remove(e,\"handle events\")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=S.event.fix(e),l=(Y.get(this,\"events\")||Object.create(null))[u.type]||[],c=S.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){a=S.event.handlers.call(this,u,l),t=0;while((i=a[t++])&&!u.isPropagationStopped()){u.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!u.isImmediatePropagationStopped())u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((S.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!(\"click\"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(\"click\"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+\" \"]&&(a[i]=r.needsContext?-1<S(i,this).index(l):S.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,\"input\")&&Se(t,\"click\",we),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,\"input\")&&Se(t,\"click\"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&A(t,\"input\")&&Y.get(t,\"click\")||A(t,\"a\")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?we:Te,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Te,isPropagationStopped:Te,isImmediatePropagationStopped:Te,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=we,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=we,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=we,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,\"char\":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},S.event.addProp),S.each({focus:\"focusin\",blur:\"focusout\"},function(t,e){S.event.special[t]={setup:function(){return Se(this,t,Ce),!1},trigger:function(){return Se(this,t),!0},_default:function(e){return Y.get(e.target,t)},delegateType:e}}),S.each({mouseenter:\"mouseover\",mouseleave:\"mouseout\",pointerenter:\"pointerover\",pointerleave:\"pointerout\"},function(e,i){S.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||S.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),S.fn.extend({on:function(e,t,n,r){return Ee(this,e,t,n,r)},one:function(e,t,n,r){return Ee(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,S(e.delegateTarget).off(r.namespace?r.origType+\".\"+r.namespace:r.origType,r.selector,r.handler),this;if(\"object\"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&\"function\"!=typeof t||(n=t,t=void 0),!1===n&&(n=Te),this.each(function(){S.event.remove(this,e,n,t)})}});var ke=\/<script|<style|<link\/i,Ae=\/checked\\s*(?:[^=]|=\\s*.checked.)\/i,Ne=\/^\\s*<!\\[CDATA\\[|\\]\\]>\\s*$\/g;function je(e,t){return A(e,\"table\")&&A(11!==t.nodeType?t:t.firstChild,\"tr\")&&S(e).children(\"tbody\")[0]||e}function De(e){return e.type=(null!==e.getAttribute(\"type\"))+\"\/\"+e.type,e}function qe(e){return\"true\/\"===(e.type||\"\").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute(\"type\"),e}function Le(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(Y.hasData(e)&&(s=Y.get(e).events))for(i in Y.remove(t,\"handle events\"),s)for(n=0,r=s[i].length;n<r;n++)S.event.add(t,i,s[i][n]);Q.hasData(e)&&(o=Q.access(e),a=S.extend({},o),Q.set(t,a))}}function He(n,r,i,o){r=g(r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=m(d);if(h||1<f&&\"string\"==typeof d&&!v.checkClone&&Ae.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),He(t,r,i,o)});if(f&&(t=(e=xe(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=S.map(ye(e,\"script\"),De)).length;c<f;c++)u=e,c!==p&&(u=S.clone(u,!0,!0),s&&S.merge(a,ye(u,\"script\"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,S.map(a,qe),c=0;c<s;c++)u=a[c],he.test(u.type||\"\")&&!Y.access(u,\"globalEval\")&&S.contains(l,u)&&(u.src&&\"module\"!==(u.type||\"\").toLowerCase()?S._evalUrl&&!u.noModule&&S._evalUrl(u.src,{nonce:u.nonce||u.getAttribute(\"nonce\")},l):b(u.textContent.replace(Ne,\"\"),u,l))}return n}function Oe(e,t,n){for(var r,i=t?S.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||S.cleanData(ye(r)),r.parentNode&&(n&&ie(r)&&ve(ye(r,\"script\")),r.parentNode.removeChild(r));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=ie(e);if(!(v.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(a=ye(c),r=0,i=(o=ye(e)).length;r<i;r++)s=o[r],u=a[r],void 0,\"input\"===(l=u.nodeName.toLowerCase())&&pe.test(s.type)?u.checked=s.checked:\"input\"!==l&&\"textarea\"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ye(e),a=a||ye(c),r=0,i=o.length;r<i;r++)Le(o[r],a[r]);else Le(e,c);return 0<(a=ye(c,\"script\")).length&&ve(a,!f&&ye(e,\"script\")),c},cleanData:function(e){for(var t,n,r,i=S.event.special,o=0;void 0!==(n=e[o]);o++)if(V(n)){if(t=n[Y.expando]){if(t.events)for(r in t.events)i[r]?S.event.remove(n,r):S.removeEvent(n,r,t.handle);n[Y.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Oe(this,e,!0)},remove:function(e){return Oe(this,e)},text:function(e){return B(this,function(e){return void 0===e?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return He(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||je(this,e).appendChild(e)})},prepend:function(){return He(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=je(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return He(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return He(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(ye(e,!1)),e.textContent=\"\");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return S.clone(this,e,t)})},html:function(e){return B(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if(\"string\"==typeof e&&!ke.test(e)&&!ge[(de.exec(e)||[\"\",\"\"])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(ye(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return He(this,arguments,function(e){var t=this.parentNode;S.inArray(this,n)<0&&(S.cleanData(ye(this)),t&&t.replaceChild(e,this))},n)}}),S.each({appendTo:\"append\",prependTo:\"prepend\",insertBefore:\"before\",insertAfter:\"after\",replaceAll:\"replaceWith\"},function(e,a){S.fn[e]=function(e){for(var t,n=[],r=S(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),S(r[o])[a](t),u.apply(n,t.get());return this.pushStack(n)}});var Pe=new RegExp(\"^(\"+ee+\")(?!px)[a-z%]+$\",\"i\"),Re=\/^--\/,Me=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},Ie=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},We=new RegExp(ne.join(\"|\"),\"i\"),Fe=\"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",$e=new RegExp(\"^\"+Fe+\"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\"+Fe+\"+$\",\"g\");function Be(e,t,n){var r,i,o,a,s=Re.test(t),u=e.style;return(n=n||Me(e))&&(a=n.getPropertyValue(t)||n[t],s&&(a=a.replace($e,\"$1\")),\"\"!==a||ie(e)||(a=S.style(e,t)),!v.pixelBoxStyles()&&Pe.test(a)&&We.test(t)&&(r=u.width,i=u.minWidth,o=u.maxWidth,u.minWidth=u.maxWidth=u.width=a,a=n.width,u.width=r,u.minWidth=i,u.maxWidth=o)),void 0!==a?a+\"\":a}function _e(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText=\"position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0\",l.style.cssText=\"position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%\",re.appendChild(u).appendChild(l);var e=C.getComputedStyle(l);n=\"1%\"!==e.top,s=12===t(e.marginLeft),l.style.right=\"60%\",o=36===t(e.right),r=36===t(e.width),l.style.position=\"absolute\",i=12===t(l.offsetWidth\/3),re.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s,u=E.createElement(\"div\"),l=E.createElement(\"div\");l.style&&(l.style.backgroundClip=\"content-box\",l.cloneNode(!0).style.backgroundClip=\"\",v.clearCloneStyle=\"content-box\"===l.style.backgroundClip,S.extend(v,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=E.createElement(\"table\"),t=E.createElement(\"tr\"),n=E.createElement(\"div\"),e.style.cssText=\"position:absolute;left:-11111px;border-collapse:separate\",t.style.cssText=\"border:1px solid\",t.style.height=\"1px\",n.style.height=\"9px\",n.style.display=\"block\",re.appendChild(e).appendChild(t).appendChild(n),r=C.getComputedStyle(t),a=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===t.offsetHeight,re.removeChild(e)),a}}))}();var ze=[\"Webkit\",\"Moz\",\"ms\"],Ue=E.createElement(\"div\").style,Xe={};function Ve(e){var t=S.cssProps[e]||Xe[e];return t||(e in Ue?e:Xe[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=ze.length;while(n--)if((e=ze[n]+t)in Ue)return e}(e)||e)}var Ge=\/^(none|table(?!-c[ea]).+)\/,Ye={position:\"absolute\",visibility:\"hidden\",display:\"block\"},Qe={letterSpacing:\"0\",fontWeight:\"400\"};function Je(e,t,n){var r=te.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||\"px\"):t}function Ke(e,t,n,r,i,o){var a=\"width\"===t?1:0,s=0,u=0;if(n===(r?\"border\":\"content\"))return 0;for(;a<4;a+=2)\"margin\"===n&&(u+=S.css(e,n+ne[a],!0,i)),r?(\"content\"===n&&(u-=S.css(e,\"padding\"+ne[a],!0,i)),\"margin\"!==n&&(u-=S.css(e,\"border\"+ne[a]+\"Width\",!0,i))):(u+=S.css(e,\"padding\"+ne[a],!0,i),\"padding\"!==n?u+=S.css(e,\"border\"+ne[a]+\"Width\",!0,i):s+=S.css(e,\"border\"+ne[a]+\"Width\",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e[\"offset\"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function Ze(e,t,n){var r=Me(e),i=(!v.boxSizingReliable()||n)&&\"border-box\"===S.css(e,\"boxSizing\",!1,r),o=i,a=Be(e,t,r),s=\"offset\"+t[0].toUpperCase()+t.slice(1);if(Pe.test(a)){if(!n)return a;a=\"auto\"}return(!v.boxSizingReliable()&&i||!v.reliableTrDimensions()&&A(e,\"tr\")||\"auto\"===a||!parseFloat(a)&&\"inline\"===S.css(e,\"display\",!1,r))&&e.getClientRects().length&&(i=\"border-box\"===S.css(e,\"boxSizing\",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+Ke(e,t,n||(i?\"border\":\"content\"),o,r,a)+\"px\"}function et(e,t,n,r,i){return new et.prototype.init(e,t,n,r,i)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Be(e,\"opacity\");return\"\"===n?\"1\":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=X(t),u=Re.test(t),l=e.style;if(u||(t=Ve(s)),a=S.cssHooks[t]||S.cssHooks[s],void 0===n)return a&&\"get\"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];\"string\"===(o=typeof n)&&(i=te.exec(n))&&i[1]&&(n=se(e,t,i),o=\"number\"),null!=n&&n==n&&(\"number\"!==o||u||(n+=i&&i[3]||(S.cssNumber[s]?\"\":\"px\")),v.clearCloneStyle||\"\"!==n||0!==t.indexOf(\"background\")||(l[t]=\"inherit\"),a&&\"set\"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=X(t);return Re.test(t)||(t=Ve(s)),(a=S.cssHooks[t]||S.cssHooks[s])&&\"get\"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Be(e,t,r)),\"normal\"===i&&t in Qe&&(i=Qe[t]),\"\"===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),S.each([\"height\",\"width\"],function(e,u){S.cssHooks[u]={get:function(e,t,n){if(t)return!Ge.test(S.css(e,\"display\"))||e.getClientRects().length&&e.getBoundingClientRect().width?Ze(e,u,n):Ie(e,Ye,function(){return Ze(e,u,n)})},set:function(e,t,n){var r,i=Me(e),o=!v.scrollboxSize()&&\"absolute\"===i.position,a=(o||n)&&\"border-box\"===S.css(e,\"boxSizing\",!1,i),s=n?Ke(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e[\"offset\"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-Ke(e,u,\"border\",!1,i)-.5)),s&&(r=te.exec(t))&&\"px\"!==(r[3]||\"px\")&&(e.style[u]=t,t=S.css(e,u)),Je(0,t,s)}}}),S.cssHooks.marginLeft=_e(v.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Be(e,\"marginLeft\"))||e.getBoundingClientRect().left-Ie(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+\"px\"}),S.each({margin:\"\",padding:\"\",border:\"Width\"},function(i,o){S.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r=\"string\"==typeof e?e.split(\" \"):[e];t<4;t++)n[i+ne[t]+o]=r[t]||r[t-2]||r[0];return n}},\"margin\"!==i&&(S.cssHooks[i+o].set=Je)}),S.fn.extend({css:function(e,t){return B(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Me(e),i=t.length;a<i;a++)o[t[a]]=S.css(e,t[a],!1,r);return o}return void 0!==n?S.style(e,t,n):S.css(e,t)},e,t,1<arguments.length)}}),((S.Tween=et).prototype={constructor:et,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(S.cssNumber[n]?\"\":\"px\")},cur:function(){var e=et.propHooks[this.prop];return e&&e.get?e.get(this):et.propHooks._default.get(this)},run:function(e){var t,n=et.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):et.propHooks._default.set(this),this}}).init.prototype=et.prototype,(et.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,\"\"))&&\"auto\"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[Ve(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=et.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)\/2},_default:\"swing\"},S.fx=et.prototype.init,S.fx.step={};var tt,nt,rt,it,ot=\/^(?:toggle|show|hide)$\/,at=\/queueHooks$\/;function st(){nt&&(!1===E.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(st):C.setTimeout(st,S.fx.interval),S.fx.tick())}function ut(){return C.setTimeout(function(){tt=void 0}),tt=Date.now()}function lt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i[\"margin\"+(n=ne[r])]=i[\"padding\"+n]=e;return t&&(i.opacity=i.width=e),i}function ct(e,t,n){for(var r,i=(ft.tweeners[t]||[]).concat(ft.tweeners[\"*\"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function ft(o,e,t){var n,a,r=0,i=ft.prefilters.length,s=S.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=tt||ut(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t\/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},t),originalProperties:e,originalOptions:t,startTime:tt||ut(),duration:t.duration,tweens:[],createTween:function(e,t){var n=S.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=X(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=S.cssHooks[r])&&\"expand\"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=ft.prefilters[r].call(l,o,c,l.opts))return m(n.stop)&&(S._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return S.map(c,ct,l),m(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),S.fx.timer(S.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}S.Animation=S.extend(ft,{tweeners:{\"*\":[function(e,t){var n=this.createTween(e,t);return se(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=[\"*\"]):e=e.match(P);for(var n,r=0,i=e.length;r<i;r++)n=e[r],ft.tweeners[n]=ft.tweeners[n]||[],ft.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f=\"width\"in t||\"height\"in t,p=this,d={},h=e.style,g=e.nodeType&&ae(e),y=Y.get(e,\"fxshow\");for(r in n.queue||(null==(a=S._queueHooks(e,\"fx\")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,S.queue(e,\"fx\").length||a.empty.fire()})})),t)if(i=t[r],ot.test(i)){if(delete t[r],o=o||\"toggle\"===i,i===(g?\"hide\":\"show\")){if(\"show\"!==i||!y||void 0===y[r])continue;g=!0}d[r]=y&&y[r]||S.style(e,r)}if((u=!S.isEmptyObject(t))||!S.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=y&&y.display)&&(l=Y.get(e,\"display\")),\"none\"===(c=S.css(e,\"display\"))&&(l?c=l:(le([e],!0),l=e.style.display||l,c=S.css(e,\"display\"),le([e]))),(\"inline\"===c||\"inline-block\"===c&&null!=l)&&\"none\"===S.css(e,\"float\")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l=\"none\"===c?\"\":c)),h.display=\"inline-block\")),n.overflow&&(h.overflow=\"hidden\",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(y?\"hidden\"in y&&(g=y.hidden):y=Y.access(e,\"fxshow\",{display:l}),o&&(y.hidden=!g),g&&le([e],!0),p.done(function(){for(r in g||le([e]),Y.remove(e,\"fxshow\"),d)S.style(e,r,d[r])})),u=ct(g?y[r]:0,r,p),r in y||(y[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?ft.prefilters.unshift(e):ft.prefilters.push(e)}}),S.speed=function(e,t,n){var r=e&&\"object\"==typeof e?S.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return S.fx.off?r.duration=0:\"number\"!=typeof r.duration&&(r.duration in S.fx.speeds?r.duration=S.fx.speeds[r.duration]:r.duration=S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue=\"fx\"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css(\"opacity\",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=S.isEmptyObject(t),o=S.speed(e,n,r),a=function(){var e=ft(this,S.extend({},t),o);(i||Y.get(this,\"finish\"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return\"string\"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||\"fx\",[]),this.each(function(){var e=!0,t=null!=i&&i+\"queueHooks\",n=S.timers,r=Y.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&at.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||S.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||\"fx\"),this.each(function(){var e,t=Y.get(this),n=t[a+\"queue\"],r=t[a+\"queueHooks\"],i=S.timers,o=n?n.length:0;for(t.finish=!0,S.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),S.each([\"toggle\",\"show\",\"hide\"],function(e,r){var i=S.fn[r];S.fn[r]=function(e,t,n){return null==e||\"boolean\"==typeof e?i.apply(this,arguments):this.animate(lt(r,!0),e,t,n)}}),S.each({slideDown:lt(\"show\"),slideUp:lt(\"hide\"),slideToggle:lt(\"toggle\"),fadeIn:{opacity:\"show\"},fadeOut:{opacity:\"hide\"},fadeToggle:{opacity:\"toggle\"}},function(e,r){S.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(tt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),tt=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){nt||(nt=!0,st())},S.fx.stop=function(){nt=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(r,e){return r=S.fx&&S.fx.speeds[r]||r,e=e||\"fx\",this.queue(e,function(e,t){var n=C.setTimeout(e,r);t.stop=function(){C.clearTimeout(n)}})},rt=E.createElement(\"input\"),it=E.createElement(\"select\").appendChild(E.createElement(\"option\")),rt.type=\"checkbox\",v.checkOn=\"\"!==rt.value,v.optSelected=it.selected,(rt=E.createElement(\"input\")).value=\"t\",rt.type=\"radio\",v.radioValue=\"t\"===rt.value;var pt,dt=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return B(this,S.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){S.removeAttr(this,e)})}}),S.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return\"undefined\"==typeof e.getAttribute?S.prop(e,t,n):(1===o&&S.isXMLDoc(e)||(i=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?pt:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):i&&\"set\"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+\"\"),n):i&&\"get\"in i&&null!==(r=i.get(e,t))?r:null==(r=S.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!v.radioValue&&\"radio\"===t&&A(e,\"input\")){var n=e.value;return e.setAttribute(\"type\",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(P);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),pt={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(\/\\w+\/g),function(e,t){var a=dt[t]||S.find.attr;dt[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=dt[o],dt[o]=r,r=null!=a(e,t,n)?o:null,dt[o]=i),r}});var ht=\/^(?:input|select|textarea|button)$\/i,gt=\/^(?:a|area)$\/i;function yt(e){return(e.match(P)||[]).join(\" \")}function vt(e){return e.getAttribute&&e.getAttribute(\"class\")||\"\"}function mt(e){return Array.isArray(e)?e:\"string\"==typeof e&&e.match(P)||[]}S.fn.extend({prop:function(e,t){return B(this,S.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[S.propFix[e]||e]})}}),S.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(e)||(t=S.propFix[t]||t,i=S.propHooks[t]),void 0!==n?i&&\"set\"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&\"get\"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,\"tabindex\");return t?parseInt(t,10):ht.test(e.nodeName)||gt.test(e.nodeName)&&e.href?0:-1}}},propFix:{\"for\":\"htmlFor\",\"class\":\"className\"}}),v.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each([\"tabIndex\",\"readOnly\",\"maxLength\",\"cellSpacing\",\"cellPadding\",\"rowSpan\",\"colSpan\",\"useMap\",\"frameBorder\",\"contentEditable\"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(t){var e,n,r,i,o,a;return m(t)?this.each(function(e){S(this).addClass(t.call(this,e,vt(this)))}):(e=mt(t)).length?this.each(function(){if(r=vt(this),n=1===this.nodeType&&\" \"+yt(r)+\" \"){for(o=0;o<e.length;o++)i=e[o],n.indexOf(\" \"+i+\" \")<0&&(n+=i+\" \");a=yt(n),r!==a&&this.setAttribute(\"class\",a)}}):this},removeClass:function(t){var e,n,r,i,o,a;return m(t)?this.each(function(e){S(this).removeClass(t.call(this,e,vt(this)))}):arguments.length?(e=mt(t)).length?this.each(function(){if(r=vt(this),n=1===this.nodeType&&\" \"+yt(r)+\" \"){for(o=0;o<e.length;o++){i=e[o];while(-1<n.indexOf(\" \"+i+\" \"))n=n.replace(\" \"+i+\" \",\" \")}a=yt(n),r!==a&&this.setAttribute(\"class\",a)}}):this:this.attr(\"class\",\"\")},toggleClass:function(t,n){var e,r,i,o,a=typeof t,s=\"string\"===a||Array.isArray(t);return m(t)?this.each(function(e){S(this).toggleClass(t.call(this,e,vt(this),n),n)}):\"boolean\"==typeof n&&s?n?this.addClass(t):this.removeClass(t):(e=mt(t),this.each(function(){if(s)for(o=S(this),i=0;i<e.length;i++)r=e[i],o.hasClass(r)?o.removeClass(r):o.addClass(r);else void 0!==t&&\"boolean\"!==a||((r=vt(this))&&Y.set(this,\"__className__\",r),this.setAttribute&&this.setAttribute(\"class\",r||!1===t?\"\":Y.get(this,\"__className__\")||\"\"))}))},hasClass:function(e){var t,n,r=0;t=\" \"+e+\" \";while(n=this[r++])if(1===n.nodeType&&-1<(\" \"+yt(vt(n))+\" \").indexOf(t))return!0;return!1}});var xt=\/\\r\/g;S.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=m(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,S(this).val()):n)?t=\"\":\"number\"==typeof t?t+=\"\":Array.isArray(t)&&(t=S.map(t,function(e){return null==e?\"\":e+\"\"})),(r=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&\"set\"in r&&void 0!==r.set(this,t,\"value\")||(this.value=t))})):t?(r=S.valHooks[t.type]||S.valHooks[t.nodeName.toLowerCase()])&&\"get\"in r&&void 0!==(e=r.get(t,\"value\"))?e:\"string\"==typeof(e=t.value)?e.replace(xt,\"\"):null==e?\"\":e:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,\"value\");return null!=t?t:yt(S.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a=\"select-one\"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,\"optgroup\"))){if(t=S(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=S.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<S.inArray(S.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),S.each([\"radio\",\"checkbox\"],function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<S.inArray(S(e).val(),t)}},v.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute(\"value\")?\"on\":e.value})}),v.focusin=\"onfocusin\"in C;var bt=\/^(?:focusinfocus|focusoutblur)$\/,wt=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||E],d=y.call(e,\"type\")?e.type:e,h=y.call(e,\"namespace\")?e.namespace.split(\".\"):[];if(o=f=a=n=n||E,3!==n.nodeType&&8!==n.nodeType&&!bt.test(d+S.event.triggered)&&(-1<d.indexOf(\".\")&&(d=(h=d.split(\".\")).shift(),h.sort()),u=d.indexOf(\":\")<0&&\"on\"+d,(e=e[S.expando]?e:new S.Event(d,\"object\"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join(\".\"),e.rnamespace=e.namespace?new RegExp(\"(^|\\\\.)\"+h.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:S.makeArray(t,[e]),c=S.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!x(n)){for(s=c.delegateType||d,bt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||E)&&p.push(a.defaultView||a.parentWindow||C)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(Y.get(o,\"events\")||Object.create(null))[e.type]&&Y.get(o,\"handle\"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&V(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!V(n)||u&&m(n[d])&&!x(n)&&((a=n[u])&&(n[u]=null),S.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,wt),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,wt),S.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(r,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each(function(){S.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}}),v.focusin||S.each({focus:\"focusin\",blur:\"focusout\"},function(n,r){var i=function(e){S.event.simulate(r,e.target,S.event.fix(e))};S.event.special[r]={setup:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r);t||e.addEventListener(n,i,!0),Y.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r)-1;t?Y.access(e,r,t):(e.removeEventListener(n,i,!0),Y.remove(e,r))}}});var Tt=C.location,Ct={guid:Date.now()},Et=\/\\?\/;S.parseXML=function(e){var t,n;if(!e||\"string\"!=typeof e)return null;try{t=(new C.DOMParser).parseFromString(e,\"text\/xml\")}catch(e){}return n=t&&t.getElementsByTagName(\"parsererror\")[0],t&&!n||S.error(\"Invalid XML: \"+(n?S.map(n.childNodes,function(e){return e.textContent}).join(\"\\n\"):e)),t};var St=\/\\[\\]$\/,kt=\/\\r?\\n\/g,At=\/^(?:submit|button|image|reset|file)$\/i,Nt=\/^(?:input|select|textarea|keygen)\/i;function jt(n,e,r,i){var t;if(Array.isArray(e))S.each(e,function(e,t){r||St.test(n)?i(n,t):jt(n+\"[\"+(\"object\"==typeof t&&null!=t?e:\"\")+\"]\",t,r,i)});else if(r||\"object\"!==w(e))i(n,e);else for(t in e)jt(n+\"[\"+t+\"]\",e[t],r,i)}S.param=function(e,t){var n,r=[],i=function(e,t){var n=m(t)?t():t;r[r.length]=encodeURIComponent(e)+\"=\"+encodeURIComponent(null==n?\"\":n)};if(null==e)return\"\";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,function(){i(this.name,this.value)});else for(n in e)jt(n,e[n],t,i);return r.join(\"&\")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=S.prop(this,\"elements\");return e?S.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!S(this).is(\":disabled\")&&Nt.test(this.nodeName)&&!At.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,function(e){return{name:t.name,value:e.replace(kt,\"\\r\\n\")}}):{name:t.name,value:n.replace(kt,\"\\r\\n\")}}).get()}});var Dt=\/%20\/g,qt=\/#.*$\/,Lt=\/([?&])_=[^&]*\/,Ht=\/^(.*?):[ \\t]*([^\\r\\n]*)$\/gm,Ot=\/^(?:GET|HEAD)$\/,Pt=\/^\\\/\\\/\/,Rt={},Mt={},It=\"*\/\".concat(\"*\"),Wt=E.createElement(\"a\");function Ft(o){return function(e,t){\"string\"!=typeof e&&(t=e,e=\"*\");var n,r=0,i=e.toLowerCase().match(P)||[];if(m(t))while(n=i[r++])\"+\"===n[0]?(n=n.slice(1)||\"*\",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function $t(t,i,o,a){var s={},u=t===Mt;function l(e){var r;return s[e]=!0,S.each(t[e]||[],function(e,t){var n=t(i,o,a);return\"string\"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s[\"*\"]&&l(\"*\")}function Bt(e,t){var n,r,i=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&S.extend(!0,e,r),e}Wt.href=Tt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Tt.href,type:\"GET\",isLocal:\/^(?:about|app|app-storage|.+-extension|file|res|widget):$\/.test(Tt.protocol),global:!0,processData:!0,async:!0,contentType:\"application\/x-www-form-urlencoded; charset=UTF-8\",accepts:{\"*\":It,text:\"text\/plain\",html:\"text\/html\",xml:\"application\/xml, text\/xml\",json:\"application\/json, text\/javascript\"},contents:{xml:\/\\bxml\\b\/,html:\/\\bhtml\/,json:\/\\bjson\\b\/},responseFields:{xml:\"responseXML\",text:\"responseText\",json:\"responseJSON\"},converters:{\"* text\":String,\"text html\":!0,\"text json\":JSON.parse,\"text xml\":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Bt(Bt(e,S.ajaxSettings),t):Bt(S.ajaxSettings,e)},ajaxPrefilter:Ft(Rt),ajaxTransport:Ft(Mt),ajax:function(e,t){\"object\"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,y=S.ajaxSetup({},t),v=y.context||y,m=y.context&&(v.nodeType||v.jquery)?S(v):S.event,x=S.Deferred(),b=S.Callbacks(\"once memory\"),w=y.statusCode||{},a={},s={},u=\"canceled\",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=Ht.exec(p))n[t[1].toLowerCase()+\" \"]=(n[t[1].toLowerCase()+\" \"]||[]).concat(t[2])}t=n[e.toLowerCase()+\" \"]}return null==t?null:t.join(\", \")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(y.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),y.url=((e||y.url||Tt.href)+\"\").replace(Pt,Tt.protocol+\"\/\/\"),y.type=t.method||t.type||y.method||y.type,y.dataTypes=(y.dataType||\"*\").toLowerCase().match(P)||[\"\"],null==y.crossDomain){r=E.createElement(\"a\");try{r.href=y.url,r.href=r.href,y.crossDomain=Wt.protocol+\"\/\/\"+Wt.host!=r.protocol+\"\/\/\"+r.host}catch(e){y.crossDomain=!0}}if(y.data&&y.processData&&\"string\"!=typeof y.data&&(y.data=S.param(y.data,y.traditional)),$t(Rt,y,t,T),h)return T;for(i in(g=S.event&&y.global)&&0==S.active++&&S.event.trigger(\"ajaxStart\"),y.type=y.type.toUpperCase(),y.hasContent=!Ot.test(y.type),f=y.url.replace(qt,\"\"),y.hasContent?y.data&&y.processData&&0===(y.contentType||\"\").indexOf(\"application\/x-www-form-urlencoded\")&&(y.data=y.data.replace(Dt,\"+\")):(o=y.url.slice(f.length),y.data&&(y.processData||\"string\"==typeof y.data)&&(f+=(Et.test(f)?\"&\":\"?\")+y.data,delete y.data),!1===y.cache&&(f=f.replace(Lt,\"$1\"),o=(Et.test(f)?\"&\":\"?\")+\"_=\"+Ct.guid+++o),y.url=f+o),y.ifModified&&(S.lastModified[f]&&T.setRequestHeader(\"If-Modified-Since\",S.lastModified[f]),S.etag[f]&&T.setRequestHeader(\"If-None-Match\",S.etag[f])),(y.data&&y.hasContent&&!1!==y.contentType||t.contentType)&&T.setRequestHeader(\"Content-Type\",y.contentType),T.setRequestHeader(\"Accept\",y.dataTypes[0]&&y.accepts[y.dataTypes[0]]?y.accepts[y.dataTypes[0]]+(\"*\"!==y.dataTypes[0]?\", \"+It+\"; q=0.01\":\"\"):y.accepts[\"*\"]),y.headers)T.setRequestHeader(i,y.headers[i]);if(y.beforeSend&&(!1===y.beforeSend.call(v,T,y)||h))return T.abort();if(u=\"abort\",b.add(y.complete),T.done(y.success),T.fail(y.error),c=$t(Mt,y,t,T)){if(T.readyState=1,g&&m.trigger(\"ajaxSend\",[T,y]),h)return T;y.async&&0<y.timeout&&(d=C.setTimeout(function(){T.abort(\"timeout\")},y.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,\"No Transport\");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&C.clearTimeout(d),c=void 0,p=r||\"\",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while(\"*\"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader(\"Content-Type\"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+\" \"+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(y,T,n)),!i&&-1<S.inArray(\"script\",y.dataTypes)&&S.inArray(\"json\",y.dataTypes)<0&&(y.converters[\"text script\"]=function(){}),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if(\"*\"===o)o=u;else if(\"*\"!==u&&u!==o){if(!(a=l[u+\" \"+o]||l[\"* \"+o]))for(i in l)if((s=i.split(\" \"))[1]===o&&(a=l[u+\" \"+s[0]]||l[\"* \"+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e[\"throws\"])t=a(t);else try{t=a(t)}catch(e){return{state:\"parsererror\",error:a?e:\"No conversion from \"+u+\" to \"+o}}}return{state:\"success\",data:t}}(y,s,T,i),i?(y.ifModified&&((u=T.getResponseHeader(\"Last-Modified\"))&&(S.lastModified[f]=u),(u=T.getResponseHeader(\"etag\"))&&(S.etag[f]=u)),204===e||\"HEAD\"===y.type?l=\"nocontent\":304===e?l=\"notmodified\":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l=\"error\",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+\"\",i?x.resolveWith(v,[o,l,T]):x.rejectWith(v,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?\"ajaxSuccess\":\"ajaxError\",[T,y,i?o:a]),b.fireWith(v,[T,l]),g&&(m.trigger(\"ajaxComplete\",[T,y]),--S.active||S.event.trigger(\"ajaxStop\")))}return T},getJSON:function(e,t,n){return S.get(e,t,n,\"json\")},getScript:function(e,t){return S.get(e,void 0,t,\"script\")}}),S.each([\"get\",\"post\"],function(e,i){S[i]=function(e,t,n,r){return m(t)&&(r=r||n,n=t,t=void 0),S.ajax(S.extend({url:e,type:i,dataType:r,data:t,success:n},S.isPlainObject(e)&&e))}}),S.ajaxPrefilter(function(e){var t;for(t in e.headers)\"content-type\"===t.toLowerCase()&&(e.contentType=e.headers[t]||\"\")}),S._evalUrl=function(e,t,n){return S.ajax({url:e,type:\"GET\",dataType:\"script\",cache:!0,async:!1,global:!1,converters:{\"text script\":function(){}},dataFilter:function(e){S.globalEval(e,t,n)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return m(n)?this.each(function(e){S(this).wrapInner(n.call(this,e))}):this.each(function(){var e=S(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=m(t);return this.each(function(e){S(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not(\"body\").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(e){}};var _t={0:200,1223:204},zt=S.ajaxSettings.xhr();v.cors=!!zt&&\"withCredentials\"in zt,v.ajax=zt=!!zt,S.ajaxTransport(function(i){var o,a;if(v.cors||zt&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e[\"X-Requested-With\"]||(e[\"X-Requested-With\"]=\"XMLHttpRequest\"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,\"abort\"===e?r.abort():\"error\"===e?\"number\"!=typeof r.status?t(0,\"error\"):t(r.status,r.statusText):t(_t[r.status]||r.status,r.statusText,\"text\"!==(r.responseType||\"text\")||\"string\"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o(\"error\"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&C.setTimeout(function(){o&&a()})},o=o(\"abort\");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),S.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),S.ajaxSetup({accepts:{script:\"text\/javascript, application\/javascript, application\/ecmascript, application\/x-ecmascript\"},contents:{script:\/\\b(?:java|ecma)script\\b\/},converters:{\"text script\":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter(\"script\",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type=\"GET\")}),S.ajaxTransport(\"script\",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=S(\"<script>\").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on(\"load error\",i=function(e){r.remove(),i=null,e&&t(\"error\"===e.type?404:200,e.type)}),E.head.appendChild(r[0])},abort:function(){i&&i()}}});var Ut,Xt=[],Vt=\/(=)\\?(?=&|$)|\\?\\?\/;S.ajaxSetup({jsonp:\"callback\",jsonpCallback:function(){var e=Xt.pop()||S.expando+\"_\"+Ct.guid++;return this[e]=!0,e}}),S.ajaxPrefilter(\"json jsonp\",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Vt.test(e.url)?\"url\":\"string\"==typeof e.data&&0===(e.contentType||\"\").indexOf(\"application\/x-www-form-urlencoded\")&&Vt.test(e.data)&&\"data\");if(a||\"jsonp\"===e.dataTypes[0])return r=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Vt,\"$1\"+r):!1!==e.jsonp&&(e.url+=(Et.test(e.url)?\"&\":\"?\")+e.jsonp+\"=\"+r),e.converters[\"script json\"]=function(){return o||S.error(r+\" was not called\"),o[0]},e.dataTypes[0]=\"json\",i=C[r],C[r]=function(){o=arguments},n.always(function(){void 0===i?S(C).removeProp(r):C[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Xt.push(r)),o&&m(i)&&i(o[0]),o=i=void 0}),\"script\"}),v.createHTMLDocument=((Ut=E.implementation.createHTMLDocument(\"\").body).innerHTML=\"<form><\/form><form><\/form>\",2===Ut.childNodes.length),S.parseHTML=function(e,t,n){return\"string\"!=typeof e?[]:(\"boolean\"==typeof t&&(n=t,t=!1),t||(v.createHTMLDocument?((r=(t=E.implementation.createHTMLDocument(\"\")).createElement(\"base\")).href=E.location.href,t.head.appendChild(r)):t=E),o=!n&&[],(i=N.exec(e))?[t.createElement(i[1])]:(i=xe([e],t,o),o&&o.length&&S(o).remove(),S.merge([],i.childNodes)));var r,i,o},S.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(\" \");return-1<s&&(r=yt(e.slice(s)),e=e.slice(0,s)),m(t)?(n=t,t=void 0):t&&\"object\"==typeof t&&(i=\"POST\"),0<a.length&&S.ajax({url:e,type:i||\"GET\",dataType:\"html\",data:t}).done(function(e){o=arguments,a.html(r?S(\"<div>\").append(S.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},S.expr.pseudos.animated=function(t){return S.grep(S.timers,function(e){return t===e.elem}).length},S.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=S.css(e,\"position\"),c=S(e),f={};\"static\"===l&&(e.style.position=\"relative\"),s=c.offset(),o=S.css(e,\"top\"),u=S.css(e,\"left\"),(\"absolute\"===l||\"fixed\"===l)&&-1<(o+u).indexOf(\"auto\")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),m(t)&&(t=t.call(e,n,S.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),\"using\"in t?t.using.call(e,f):c.css(f)}},S.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){S.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if(\"fixed\"===S.css(r,\"position\"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&\"static\"===S.css(e,\"position\"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=S(e).offset()).top+=S.css(e,\"borderTopWidth\",!0),i.left+=S.css(e,\"borderLeftWidth\",!0))}return{top:t.top-i.top-S.css(r,\"marginTop\",!0),left:t.left-i.left-S.css(r,\"marginLeft\",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&\"static\"===S.css(e,\"position\"))e=e.offsetParent;return e||re})}}),S.each({scrollLeft:\"pageXOffset\",scrollTop:\"pageYOffset\"},function(t,i){var o=\"pageYOffset\"===i;S.fn[t]=function(e){return B(this,function(e,t,n){var r;if(x(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),S.each([\"top\",\"left\"],function(e,n){S.cssHooks[n]=_e(v.pixelPosition,function(e,t){if(t)return t=Be(e,n),Pe.test(t)?S(e).position()[n]+\"px\":t})}),S.each({Height:\"height\",Width:\"width\"},function(a,s){S.each({padding:\"inner\"+a,content:s,\"\":\"outer\"+a},function(r,o){S.fn[o]=function(e,t){var n=arguments.length&&(r||\"boolean\"!=typeof e),i=r||(!0===e||!0===t?\"margin\":\"border\");return B(this,function(e,t,n){var r;return x(e)?0===o.indexOf(\"outer\")?e[\"inner\"+a]:e.document.documentElement[\"client\"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body[\"scroll\"+a],r[\"scroll\"+a],e.body[\"offset\"+a],r[\"offset\"+a],r[\"client\"+a])):void 0===n?S.css(e,t,i):S.style(e,t,n,i)},s,n?e:void 0,n)}})}),S.each([\"ajaxStart\",\"ajaxStop\",\"ajaxComplete\",\"ajaxError\",\"ajaxSuccess\",\"ajaxSend\"],function(e,t){S.fn[t]=function(e){return this.on(t,e)}}),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,\"**\"):this.off(t,e||\"**\",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.each(\"blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu\".split(\" \"),function(e,n){S.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}});var Gt=\/^[\\s\\uFEFF\\xA0]+|([^\\s\\uFEFF\\xA0])[\\s\\uFEFF\\xA0]+$\/g;S.proxy=function(e,t){var n,r,i;if(\"string\"==typeof t&&(n=e[t],t=e,e=n),m(e))return r=s.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||S.guid++,i},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=A,S.isFunction=m,S.isWindow=x,S.camelCase=X,S.type=w,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return(\"number\"===t||\"string\"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?\"\":(e+\"\").replace(Gt,\"$1\")},\"function\"==typeof define&&define.amd&&define(\"jquery\",[],function(){return S});var Yt=C.jQuery,Qt=C.$;return S.noConflict=function(e){return C.$===S&&(C.$=Qt),e&&C.jQuery===S&&(C.jQuery=Yt),S},\"undefined\"==typeof e&&(C.jQuery=C.$=S),S});\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/script-dir\/jquery-3.6.1.min.js","additions":0,"deletions":2,"binary":false,"changes":2,"status":"deleted"},{"patch":"@@ -0,0 +1,10716 @@\n+\/*!\n+ * jQuery JavaScript Library v3.7.1\n+ * https:\/\/jquery.com\/\n+ *\n+ * Copyright OpenJS Foundation and other contributors\n+ * Released under the MIT license\n+ * https:\/\/jquery.org\/license\n+ *\n+ * Date: 2023-08-28T13:37Z\n+ *\/\n+( function( global, factory ) {\n+\n+\t\"use strict\";\n+\n+\tif ( typeof module === \"object\" && typeof module.exports === \"object\" ) {\n+\n+\t\t\/\/ For CommonJS and CommonJS-like environments where a proper `window`\n+\t\t\/\/ is present, execute the factory and get jQuery.\n+\t\t\/\/ For environments that do not have a `window` with a `document`\n+\t\t\/\/ (such as Node.js), expose a factory as module.exports.\n+\t\t\/\/ This accentuates the need for the creation of a real `window`.\n+\t\t\/\/ e.g. var jQuery = require(\"jquery\")(window);\n+\t\t\/\/ See ticket trac-14549 for more info.\n+\t\tmodule.exports = global.document ?\n+\t\t\tfactory( global, true ) :\n+\t\t\tfunction( w ) {\n+\t\t\t\tif ( !w.document ) {\n+\t\t\t\t\tthrow new Error( \"jQuery requires a window with a document\" );\n+\t\t\t\t}\n+\t\t\t\treturn factory( w );\n+\t\t\t};\n+\t} else {\n+\t\tfactory( global );\n+\t}\n+\n+\/\/ Pass this if window is not defined yet\n+} )( typeof window !== \"undefined\" ? window : this, function( window, noGlobal ) {\n+\n+\/\/ Edge <= 12 - 13+, Firefox <=18 - 45+, IE 10 - 11, Safari 5.1 - 9+, iOS 6 - 9.1\n+\/\/ throw exceptions when non-strict code (e.g., ASP.NET 4.5) accesses strict mode\n+\/\/ arguments.callee.caller (trac-13335). But as of jQuery 3.0 (2016), strict mode should be common\n+\/\/ enough that all such attempts are guarded in a try block.\n+\"use strict\";\n+\n+var arr = [];\n+\n+var getProto = Object.getPrototypeOf;\n+\n+var slice = arr.slice;\n+\n+var flat = arr.flat ? function( array ) {\n+\treturn arr.flat.call( array );\n+} : function( array ) {\n+\treturn arr.concat.apply( [], array );\n+};\n+\n+\n+var push = arr.push;\n+\n+var indexOf = arr.indexOf;\n+\n+var class2type = {};\n+\n+var toString = class2type.toString;\n+\n+var hasOwn = class2type.hasOwnProperty;\n+\n+var fnToString = hasOwn.toString;\n+\n+var ObjectFunctionString = fnToString.call( Object );\n+\n+var support = {};\n+\n+var isFunction = function isFunction( obj ) {\n+\n+\t\t\/\/ Support: Chrome <=57, Firefox <=52\n+\t\t\/\/ In some browsers, typeof returns \"function\" for HTML <object> elements\n+\t\t\/\/ (i.e., `typeof document.createElement( \"object\" ) === \"function\"`).\n+\t\t\/\/ We don't want to classify *any* DOM node as a function.\n+\t\t\/\/ Support: QtWeb <=3.8.5, WebKit <=534.34, wkhtmltopdf tool <=0.12.5\n+\t\t\/\/ Plus for old WebKit, typeof returns \"function\" for HTML collections\n+\t\t\/\/ (e.g., `typeof document.getElementsByTagName(\"div\") === \"function\"`). (gh-4756)\n+\t\treturn typeof obj === \"function\" && typeof obj.nodeType !== \"number\" &&\n+\t\t\ttypeof obj.item !== \"function\";\n+\t};\n+\n+\n+var isWindow = function isWindow( obj ) {\n+\t\treturn obj != null && obj === obj.window;\n+\t};\n+\n+\n+var document = window.document;\n+\n+\n+\n+\tvar preservedScriptAttributes = {\n+\t\ttype: true,\n+\t\tsrc: true,\n+\t\tnonce: true,\n+\t\tnoModule: true\n+\t};\n+\n+\tfunction DOMEval( code, node, doc ) {\n+\t\tdoc = doc || document;\n+\n+\t\tvar i, val,\n+\t\t\tscript = doc.createElement( \"script\" );\n+\n+\t\tscript.text = code;\n+\t\tif ( node ) {\n+\t\t\tfor ( i in preservedScriptAttributes ) {\n+\n+\t\t\t\t\/\/ Support: Firefox 64+, Edge 18+\n+\t\t\t\t\/\/ Some browsers don't support the \"nonce\" property on scripts.\n+\t\t\t\t\/\/ On the other hand, just using `getAttribute` is not enough as\n+\t\t\t\t\/\/ the `nonce` attribute is reset to an empty string whenever it\n+\t\t\t\t\/\/ becomes browsing-context connected.\n+\t\t\t\t\/\/ See https:\/\/github.com\/whatwg\/html\/issues\/2369\n+\t\t\t\t\/\/ See https:\/\/html.spec.whatwg.org\/#nonce-attributes\n+\t\t\t\t\/\/ The `node.getAttribute` check was added for the sake of\n+\t\t\t\t\/\/ `jQuery.globalEval` so that it can fake a nonce-containing node\n+\t\t\t\t\/\/ via an object.\n+\t\t\t\tval = node[ i ] || node.getAttribute && node.getAttribute( i );\n+\t\t\t\tif ( val ) {\n+\t\t\t\t\tscript.setAttribute( i, val );\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\t\tdoc.head.appendChild( script ).parentNode.removeChild( script );\n+\t}\n+\n+\n+function toType( obj ) {\n+\tif ( obj == null ) {\n+\t\treturn obj + \"\";\n+\t}\n+\n+\t\/\/ Support: Android <=2.3 only (functionish RegExp)\n+\treturn typeof obj === \"object\" || typeof obj === \"function\" ?\n+\t\tclass2type[ toString.call( obj ) ] || \"object\" :\n+\t\ttypeof obj;\n+}\n+\/* global Symbol *\/\n+\/\/ Defining this global in .eslintrc.json would create a danger of using the global\n+\/\/ unguarded in another place, it seems safer to define global only for this module\n+\n+\n+\n+var version = \"3.7.1\",\n+\n+\trhtmlSuffix = \/HTML$\/i,\n+\n+\t\/\/ Define a local copy of jQuery\n+\tjQuery = function( selector, context ) {\n+\n+\t\t\/\/ The jQuery object is actually just the init constructor 'enhanced'\n+\t\t\/\/ Need init if jQuery is called (just allow error to be thrown if not included)\n+\t\treturn new jQuery.fn.init( selector, context );\n+\t};\n+\n+jQuery.fn = jQuery.prototype = {\n+\n+\t\/\/ The current version of jQuery being used\n+\tjquery: version,\n+\n+\tconstructor: jQuery,\n+\n+\t\/\/ The default length of a jQuery object is 0\n+\tlength: 0,\n+\n+\ttoArray: function() {\n+\t\treturn slice.call( this );\n+\t},\n+\n+\t\/\/ Get the Nth element in the matched element set OR\n+\t\/\/ Get the whole matched element set as a clean array\n+\tget: function( num ) {\n+\n+\t\t\/\/ Return all the elements in a clean array\n+\t\tif ( num == null ) {\n+\t\t\treturn slice.call( this );\n+\t\t}\n+\n+\t\t\/\/ Return just the one element from the set\n+\t\treturn num < 0 ? this[ num + this.length ] : this[ num ];\n+\t},\n+\n+\t\/\/ Take an array of elements and push it onto the stack\n+\t\/\/ (returning the new matched element set)\n+\tpushStack: function( elems ) {\n+\n+\t\t\/\/ Build a new jQuery matched element set\n+\t\tvar ret = jQuery.merge( this.constructor(), elems );\n+\n+\t\t\/\/ Add the old object onto the stack (as a reference)\n+\t\tret.prevObject = this;\n+\n+\t\t\/\/ Return the newly-formed element set\n+\t\treturn ret;\n+\t},\n+\n+\t\/\/ Execute a callback for every element in the matched set.\n+\teach: function( callback ) {\n+\t\treturn jQuery.each( this, callback );\n+\t},\n+\n+\tmap: function( callback ) {\n+\t\treturn this.pushStack( jQuery.map( this, function( elem, i ) {\n+\t\t\treturn callback.call( elem, i, elem );\n+\t\t} ) );\n+\t},\n+\n+\tslice: function() {\n+\t\treturn this.pushStack( slice.apply( this, arguments ) );\n+\t},\n+\n+\tfirst: function() {\n+\t\treturn this.eq( 0 );\n+\t},\n+\n+\tlast: function() {\n+\t\treturn this.eq( -1 );\n+\t},\n+\n+\teven: function() {\n+\t\treturn this.pushStack( jQuery.grep( this, function( _elem, i ) {\n+\t\t\treturn ( i + 1 ) % 2;\n+\t\t} ) );\n+\t},\n+\n+\todd: function() {\n+\t\treturn this.pushStack( jQuery.grep( this, function( _elem, i ) {\n+\t\t\treturn i % 2;\n+\t\t} ) );\n+\t},\n+\n+\teq: function( i ) {\n+\t\tvar len = this.length,\n+\t\t\tj = +i + ( i < 0 ? len : 0 );\n+\t\treturn this.pushStack( j >= 0 && j < len ? [ this[ j ] ] : [] );\n+\t},\n+\n+\tend: function() {\n+\t\treturn this.prevObject || this.constructor();\n+\t},\n+\n+\t\/\/ For internal use only.\n+\t\/\/ Behaves like an Array's method, not like a jQuery method.\n+\tpush: push,\n+\tsort: arr.sort,\n+\tsplice: arr.splice\n+};\n+\n+jQuery.extend = jQuery.fn.extend = function() {\n+\tvar options, name, src, copy, copyIsArray, clone,\n+\t\ttarget = arguments[ 0 ] || {},\n+\t\ti = 1,\n+\t\tlength = arguments.length,\n+\t\tdeep = false;\n+\n+\t\/\/ Handle a deep copy situation\n+\tif ( typeof target === \"boolean\" ) {\n+\t\tdeep = target;\n+\n+\t\t\/\/ Skip the boolean and the target\n+\t\ttarget = arguments[ i ] || {};\n+\t\ti++;\n+\t}\n+\n+\t\/\/ Handle case when target is a string or something (possible in deep copy)\n+\tif ( typeof target !== \"object\" && !isFunction( target ) ) {\n+\t\ttarget = {};\n+\t}\n+\n+\t\/\/ Extend jQuery itself if only one argument is passed\n+\tif ( i === length ) {\n+\t\ttarget = this;\n+\t\ti--;\n+\t}\n+\n+\tfor ( ; i < length; i++ ) {\n+\n+\t\t\/\/ Only deal with non-null\/undefined values\n+\t\tif ( ( options = arguments[ i ] ) != null ) {\n+\n+\t\t\t\/\/ Extend the base object\n+\t\t\tfor ( name in options ) {\n+\t\t\t\tcopy = options[ name ];\n+\n+\t\t\t\t\/\/ Prevent Object.prototype pollution\n+\t\t\t\t\/\/ Prevent never-ending loop\n+\t\t\t\tif ( name === \"__proto__\" || target === copy ) {\n+\t\t\t\t\tcontinue;\n+\t\t\t\t}\n+\n+\t\t\t\t\/\/ Recurse if we're merging plain objects or arrays\n+\t\t\t\tif ( deep && copy && ( jQuery.isPlainObject( copy ) ||\n+\t\t\t\t\t( copyIsArray = Array.isArray( copy ) ) ) ) {\n+\t\t\t\t\tsrc = target[ name ];\n+\n+\t\t\t\t\t\/\/ Ensure proper type for the source value\n+\t\t\t\t\tif ( copyIsArray && !Array.isArray( src ) ) {\n+\t\t\t\t\t\tclone = [];\n+\t\t\t\t\t} else if ( !copyIsArray && !jQuery.isPlainObject( src ) ) {\n+\t\t\t\t\t\tclone = {};\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\tclone = src;\n+\t\t\t\t\t}\n+\t\t\t\t\tcopyIsArray = false;\n+\n+\t\t\t\t\t\/\/ Never move original objects, clone them\n+\t\t\t\t\ttarget[ name ] = jQuery.extend( deep, clone, copy );\n+\n+\t\t\t\t\/\/ Don't bring in undefined values\n+\t\t\t\t} else if ( copy !== undefined ) {\n+\t\t\t\t\ttarget[ name ] = copy;\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\t}\n+\n+\t\/\/ Return the modified object\n+\treturn target;\n+};\n+\n+jQuery.extend( {\n+\n+\t\/\/ Unique for each copy of jQuery on the page\n+\texpando: \"jQuery\" + ( version + Math.random() ).replace( \/\\D\/g, \"\" ),\n+\n+\t\/\/ Assume jQuery is ready without the ready module\n+\tisReady: true,\n+\n+\terror: function( msg ) {\n+\t\tthrow new Error( msg );\n+\t},\n+\n+\tnoop: function() {},\n+\n+\tisPlainObject: function( obj ) {\n+\t\tvar proto, Ctor;\n+\n+\t\t\/\/ Detect obvious negatives\n+\t\t\/\/ Use toString instead of jQuery.type to catch host objects\n+\t\tif ( !obj || toString.call( obj ) !== \"[object Object]\" ) {\n+\t\t\treturn false;\n+\t\t}\n+\n+\t\tproto = getProto( obj );\n+\n+\t\t\/\/ Objects with no prototype (e.g., `Object.create( null )`) are plain\n+\t\tif ( !proto ) {\n+\t\t\treturn true;\n+\t\t}\n+\n+\t\t\/\/ Objects with prototype are plain iff they were constructed by a global Object function\n+\t\tCtor = hasOwn.call( proto, \"constructor\" ) && proto.constructor;\n+\t\treturn typeof Ctor === \"function\" && fnToString.call( Ctor ) === ObjectFunctionString;\n+\t},\n+\n+\tisEmptyObject: function( obj ) {\n+\t\tvar name;\n+\n+\t\tfor ( name in obj ) {\n+\t\t\treturn false;\n+\t\t}\n+\t\treturn true;\n+\t},\n+\n+\t\/\/ Evaluates a script in a provided context; falls back to the global one\n+\t\/\/ if not specified.\n+\tglobalEval: function( code, options, doc ) {\n+\t\tDOMEval( code, { nonce: options && options.nonce }, doc );\n+\t},\n+\n+\teach: function( obj, callback ) {\n+\t\tvar length, i = 0;\n+\n+\t\tif ( isArrayLike( obj ) ) {\n+\t\t\tlength = obj.length;\n+\t\t\tfor ( ; i < length; i++ ) {\n+\t\t\t\tif ( callback.call( obj[ i ], i, obj[ i ] ) === false ) {\n+\t\t\t\t\tbreak;\n+\t\t\t\t}\n+\t\t\t}\n+\t\t} else {\n+\t\t\tfor ( i in obj ) {\n+\t\t\t\tif ( callback.call( obj[ i ], i, obj[ i ] ) === false ) {\n+\t\t\t\t\tbreak;\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\n+\t\treturn obj;\n+\t},\n+\n+\n+\t\/\/ Retrieve the text value of an array of DOM nodes\n+\ttext: function( elem ) {\n+\t\tvar node,\n+\t\t\tret = \"\",\n+\t\t\ti = 0,\n+\t\t\tnodeType = elem.nodeType;\n+\n+\t\tif ( !nodeType ) {\n+\n+\t\t\t\/\/ If no nodeType, this is expected to be an array\n+\t\t\twhile ( ( node = elem[ i++ ] ) ) {\n+\n+\t\t\t\t\/\/ Do not traverse comment nodes\n+\t\t\t\tret += jQuery.text( node );\n+\t\t\t}\n+\t\t}\n+\t\tif ( nodeType === 1 || nodeType === 11 ) {\n+\t\t\treturn elem.textContent;\n+\t\t}\n+\t\tif ( nodeType === 9 ) {\n+\t\t\treturn elem.documentElement.textContent;\n+\t\t}\n+\t\tif ( nodeType === 3 || nodeType === 4 ) {\n+\t\t\treturn elem.nodeValue;\n+\t\t}\n+\n+\t\t\/\/ Do not include comment or processing instruction nodes\n+\n+\t\treturn ret;\n+\t},\n+\n+\t\/\/ results is for internal usage only\n+\tmakeArray: function( arr, results ) {\n+\t\tvar ret = results || [];\n+\n+\t\tif ( arr != null ) {\n+\t\t\tif ( isArrayLike( Object( arr ) ) ) {\n+\t\t\t\tjQuery.merge( ret,\n+\t\t\t\t\ttypeof arr === \"string\" ?\n+\t\t\t\t\t\t[ arr ] : arr\n+\t\t\t\t);\n+\t\t\t} else {\n+\t\t\t\tpush.call( ret, arr );\n+\t\t\t}\n+\t\t}\n+\n+\t\treturn ret;\n+\t},\n+\n+\tinArray: function( elem, arr, i ) {\n+\t\treturn arr == null ? -1 : indexOf.call( arr, elem, i );\n+\t},\n+\n+\tisXMLDoc: function( elem ) {\n+\t\tvar namespace = elem && elem.namespaceURI,\n+\t\t\tdocElem = elem && ( elem.ownerDocument || elem ).documentElement;\n+\n+\t\t\/\/ Assume HTML when documentElement doesn't yet exist, such as inside\n+\t\t\/\/ document fragments.\n+\t\treturn !rhtmlSuffix.test( namespace || docElem && docElem.nodeName || \"HTML\" );\n+\t},\n+\n+\t\/\/ Support: Android <=4.0 only, PhantomJS 1 only\n+\t\/\/ push.apply(_, arraylike) throws on ancient WebKit\n+\tmerge: function( first, second ) {\n+\t\tvar len = +second.length,\n+\t\t\tj = 0,\n+\t\t\ti = first.length;\n+\n+\t\tfor ( ; j < len; j++ ) {\n+\t\t\tfirst[ i++ ] = second[ j ];\n+\t\t}\n+\n+\t\tfirst.length = i;\n+\n+\t\treturn first;\n+\t},\n+\n+\tgrep: function( elems, callback, invert ) {\n+\t\tvar callbackInverse,\n+\t\t\tmatches = [],\n+\t\t\ti = 0,\n+\t\t\tlength = elems.length,\n+\t\t\tcallbackExpect = !invert;\n+\n+\t\t\/\/ Go through the array, only saving the items\n+\t\t\/\/ that pass the validator function\n+\t\tfor ( ; i < length; i++ ) {\n+\t\t\tcallbackInverse = !callback( elems[ i ], i );\n+\t\t\tif ( callbackInverse !== callbackExpect ) {\n+\t\t\t\tmatches.push( elems[ i ] );\n+\t\t\t}\n+\t\t}\n+\n+\t\treturn matches;\n+\t},\n+\n+\t\/\/ arg is for internal usage only\n+\tmap: function( elems, callback, arg ) {\n+\t\tvar length, value,\n+\t\t\ti = 0,\n+\t\t\tret = [];\n+\n+\t\t\/\/ Go through the array, translating each of the items to their new values\n+\t\tif ( isArrayLike( elems ) ) {\n+\t\t\tlength = elems.length;\n+\t\t\tfor ( ; i < length; i++ ) {\n+\t\t\t\tvalue = callback( elems[ i ], i, arg );\n+\n+\t\t\t\tif ( value != null ) {\n+\t\t\t\t\tret.push( value );\n+\t\t\t\t}\n+\t\t\t}\n+\n+\t\t\/\/ Go through every key on the object,\n+\t\t} else {\n+\t\t\tfor ( i in elems ) {\n+\t\t\t\tvalue = callback( elems[ i ], i, arg );\n+\n+\t\t\t\tif ( value != null ) {\n+\t\t\t\t\tret.push( value );\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\n+\t\t\/\/ Flatten any nested arrays\n+\t\treturn flat( ret );\n+\t},\n+\n+\t\/\/ A global GUID counter for objects\n+\tguid: 1,\n+\n+\t\/\/ jQuery.support is not used in Core but other projects attach their\n+\t\/\/ properties to it so it needs to exist.\n+\tsupport: support\n+} );\n+\n+if ( typeof Symbol === \"function\" ) {\n+\tjQuery.fn[ Symbol.iterator ] = arr[ Symbol.iterator ];\n+}\n+\n+\/\/ Populate the class2type map\n+jQuery.each( \"Boolean Number String Function Array Date RegExp Object Error Symbol\".split( \" \" ),\n+\tfunction( _i, name ) {\n+\t\tclass2type[ \"[object \" + name + \"]\" ] = name.toLowerCase();\n+\t} );\n+\n+function isArrayLike( obj ) {\n+\n+\t\/\/ Support: real iOS 8.2 only (not reproducible in simulator)\n+\t\/\/ `in` check used to prevent JIT error (gh-2145)\n+\t\/\/ hasOwn isn't used here due to false negatives\n+\t\/\/ regarding Nodelist length in IE\n+\tvar length = !!obj && \"length\" in obj && obj.length,\n+\t\ttype = toType( obj );\n+\n+\tif ( isFunction( obj ) || isWindow( obj ) ) {\n+\t\treturn false;\n+\t}\n+\n+\treturn type === \"array\" || length === 0 ||\n+\t\ttypeof length === \"number\" && length > 0 && ( length - 1 ) in obj;\n+}\n+\n+\n+function nodeName( elem, name ) {\n+\n+\treturn elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();\n+\n+}\n+var pop = arr.pop;\n+\n+\n+var sort = arr.sort;\n+\n+\n+var splice = arr.splice;\n+\n+\n+var whitespace = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\";\n+\n+\n+var rtrimCSS = new RegExp(\n+\t\"^\" + whitespace + \"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\" + whitespace + \"+$\",\n+\t\"g\"\n+);\n+\n+\n+\n+\n+\/\/ Note: an element does not contain itself\n+jQuery.contains = function( a, b ) {\n+\tvar bup = b && b.parentNode;\n+\n+\treturn a === bup || !!( bup && bup.nodeType === 1 && (\n+\n+\t\t\/\/ Support: IE 9 - 11+\n+\t\t\/\/ IE doesn't have `contains` on SVG.\n+\t\ta.contains ?\n+\t\t\ta.contains( bup ) :\n+\t\t\ta.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16\n+\t) );\n+};\n+\n+\n+\n+\n+\/\/ CSS string\/identifier serialization\n+\/\/ https:\/\/drafts.csswg.org\/cssom\/#common-serializing-idioms\n+var rcssescape = \/([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\x80-\\uFFFF\\w-]\/g;\n+\n+function fcssescape( ch, asCodePoint ) {\n+\tif ( asCodePoint ) {\n+\n+\t\t\/\/ U+0000 NULL becomes U+FFFD REPLACEMENT CHARACTER\n+\t\tif ( ch === \"\\0\" ) {\n+\t\t\treturn \"\\uFFFD\";\n+\t\t}\n+\n+\t\t\/\/ Control characters and (dependent upon position) numbers get escaped as code points\n+\t\treturn ch.slice( 0, -1 ) + \"\\\\\" + ch.charCodeAt( ch.length - 1 ).toString( 16 ) + \" \";\n+\t}\n+\n+\t\/\/ Other potentially-special ASCII characters get backslash-escaped\n+\treturn \"\\\\\" + ch;\n+}\n+\n+jQuery.escapeSelector = function( sel ) {\n+\treturn ( sel + \"\" ).replace( rcssescape, fcssescape );\n+};\n+\n+\n+\n+\n+var preferredDoc = document,\n+\tpushNative = push;\n+\n+( function() {\n+\n+var i,\n+\tExpr,\n+\toutermostContext,\n+\tsortInput,\n+\thasDuplicate,\n+\tpush = pushNative,\n+\n+\t\/\/ Local document vars\n+\tdocument,\n+\tdocumentElement,\n+\tdocumentIsHTML,\n+\trbuggyQSA,\n+\tmatches,\n+\n+\t\/\/ Instance-specific data\n+\texpando = jQuery.expando,\n+\tdirruns = 0,\n+\tdone = 0,\n+\tclassCache = createCache(),\n+\ttokenCache = createCache(),\n+\tcompilerCache = createCache(),\n+\tnonnativeSelectorCache = createCache(),\n+\tsortOrder = function( a, b ) {\n+\t\tif ( a === b ) {\n+\t\t\thasDuplicate = true;\n+\t\t}\n+\t\treturn 0;\n+\t},\n+\n+\tbooleans = \"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|\" +\n+\t\t\"loop|multiple|open|readonly|required|scoped\",\n+\n+\t\/\/ Regular expressions\n+\n+\t\/\/ https:\/\/www.w3.org\/TR\/css-syntax-3\/#ident-token-diagram\n+\tidentifier = \"(?:\\\\\\\\[\\\\da-fA-F]{1,6}\" + whitespace +\n+\t\t\"?|\\\\\\\\[^\\\\r\\\\n\\\\f]|[\\\\w-]|[^\\0-\\\\x7f])+\",\n+\n+\t\/\/ Attribute selectors: https:\/\/www.w3.org\/TR\/selectors\/#attribute-selectors\n+\tattributes = \"\\\\[\" + whitespace + \"*(\" + identifier + \")(?:\" + whitespace +\n+\n+\t\t\/\/ Operator (capture 2)\n+\t\t\"*([*^$|!~]?=)\" + whitespace +\n+\n+\t\t\/\/ \"Attribute values must be CSS identifiers [capture 5] or strings [capture 3 or capture 4]\"\n+\t\t\"*(?:'((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\"|(\" + identifier + \"))|)\" +\n+\t\twhitespace + \"*\\\\]\",\n+\n+\tpseudos = \":(\" + identifier + \")(?:\\\\((\" +\n+\n+\t\t\/\/ To reduce the number of selectors needing tokenize in the preFilter, prefer arguments:\n+\t\t\/\/ 1. quoted (capture 3; capture 4 or capture 5)\n+\t\t\"('((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\")|\" +\n+\n+\t\t\/\/ 2. simple (capture 6)\n+\t\t\"((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\" + attributes + \")*)|\" +\n+\n+\t\t\/\/ 3. anything else (capture 2)\n+\t\t\".*\" +\n+\t\t\")\\\\)|)\",\n+\n+\t\/\/ Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter\n+\trwhitespace = new RegExp( whitespace + \"+\", \"g\" ),\n+\n+\trcomma = new RegExp( \"^\" + whitespace + \"*,\" + whitespace + \"*\" ),\n+\trleadingCombinator = new RegExp( \"^\" + whitespace + \"*([>+~]|\" + whitespace + \")\" +\n+\t\twhitespace + \"*\" ),\n+\trdescend = new RegExp( whitespace + \"|>\" ),\n+\n+\trpseudo = new RegExp( pseudos ),\n+\tridentifier = new RegExp( \"^\" + identifier + \"$\" ),\n+\n+\tmatchExpr = {\n+\t\tID: new RegExp( \"^#(\" + identifier + \")\" ),\n+\t\tCLASS: new RegExp( \"^\\\\.(\" + identifier + \")\" ),\n+\t\tTAG: new RegExp( \"^(\" + identifier + \"|[*])\" ),\n+\t\tATTR: new RegExp( \"^\" + attributes ),\n+\t\tPSEUDO: new RegExp( \"^\" + pseudos ),\n+\t\tCHILD: new RegExp(\n+\t\t\t\"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\" +\n+\t\t\t\twhitespace + \"*(even|odd|(([+-]|)(\\\\d*)n|)\" + whitespace + \"*(?:([+-]|)\" +\n+\t\t\t\twhitespace + \"*(\\\\d+)|))\" + whitespace + \"*\\\\)|)\", \"i\" ),\n+\t\tbool: new RegExp( \"^(?:\" + booleans + \")$\", \"i\" ),\n+\n+\t\t\/\/ For use in libraries implementing .is()\n+\t\t\/\/ We use this for POS matching in `select`\n+\t\tneedsContext: new RegExp( \"^\" + whitespace +\n+\t\t\t\"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\" + whitespace +\n+\t\t\t\"*((?:-\\\\d)?\\\\d*)\" + whitespace + \"*\\\\)|)(?=[^-]|$)\", \"i\" )\n+\t},\n+\n+\trinputs = \/^(?:input|select|textarea|button)$\/i,\n+\trheader = \/^h\\d$\/i,\n+\n+\t\/\/ Easily-parseable\/retrievable ID or TAG or CLASS selectors\n+\trquickExpr = \/^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$\/,\n+\n+\trsibling = \/[+~]\/,\n+\n+\t\/\/ CSS escapes\n+\t\/\/ https:\/\/www.w3.org\/TR\/CSS21\/syndata.html#escaped-characters\n+\trunescape = new RegExp( \"\\\\\\\\[\\\\da-fA-F]{1,6}\" + whitespace +\n+\t\t\"?|\\\\\\\\([^\\\\r\\\\n\\\\f])\", \"g\" ),\n+\tfunescape = function( escape, nonHex ) {\n+\t\tvar high = \"0x\" + escape.slice( 1 ) - 0x10000;\n+\n+\t\tif ( nonHex ) {\n+\n+\t\t\t\/\/ Strip the backslash prefix from a non-hex escape sequence\n+\t\t\treturn nonHex;\n+\t\t}\n+\n+\t\t\/\/ Replace a hexadecimal escape sequence with the encoded Unicode code point\n+\t\t\/\/ Support: IE <=11+\n+\t\t\/\/ For values outside the Basic Multilingual Plane (BMP), manually construct a\n+\t\t\/\/ surrogate pair\n+\t\treturn high < 0 ?\n+\t\t\tString.fromCharCode( high + 0x10000 ) :\n+\t\t\tString.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );\n+\t},\n+\n+\t\/\/ Used for iframes; see `setDocument`.\n+\t\/\/ Support: IE 9 - 11+, Edge 12 - 18+\n+\t\/\/ Removing the function wrapper causes a \"Permission Denied\"\n+\t\/\/ error in IE\/Edge.\n+\tunloadHandler = function() {\n+\t\tsetDocument();\n+\t},\n+\n+\tinDisabledFieldset = addCombinator(\n+\t\tfunction( elem ) {\n+\t\t\treturn elem.disabled === true && nodeName( elem, \"fieldset\" );\n+\t\t},\n+\t\t{ dir: \"parentNode\", next: \"legend\" }\n+\t);\n+\n+\/\/ Support: IE <=9 only\n+\/\/ Accessing document.activeElement can throw unexpectedly\n+\/\/ https:\/\/bugs.jquery.com\/ticket\/13393\n+function safeActiveElement() {\n+\ttry {\n+\t\treturn document.activeElement;\n+\t} catch ( err ) { }\n+}\n+\n+\/\/ Optimize for push.apply( _, NodeList )\n+try {\n+\tpush.apply(\n+\t\t( arr = slice.call( preferredDoc.childNodes ) ),\n+\t\tpreferredDoc.childNodes\n+\t);\n+\n+\t\/\/ Support: Android <=4.0\n+\t\/\/ Detect silently failing push.apply\n+\t\/\/ eslint-disable-next-line no-unused-expressions\n+\tarr[ preferredDoc.childNodes.length ].nodeType;\n+} catch ( e ) {\n+\tpush = {\n+\t\tapply: function( target, els ) {\n+\t\t\tpushNative.apply( target, slice.call( els ) );\n+\t\t},\n+\t\tcall: function( target ) {\n+\t\t\tpushNative.apply( target, slice.call( arguments, 1 ) );\n+\t\t}\n+\t};\n+}\n+\n+function find( selector, context, results, seed ) {\n+\tvar m, i, elem, nid, match, groups, newSelector,\n+\t\tnewContext = context && context.ownerDocument,\n+\n+\t\t\/\/ nodeType defaults to 9, since context defaults to document\n+\t\tnodeType = context ? context.nodeType : 9;\n+\n+\tresults = results || [];\n+\n+\t\/\/ Return early from calls with invalid selector or context\n+\tif ( typeof selector !== \"string\" || !selector ||\n+\t\tnodeType !== 1 && nodeType !== 9 && nodeType !== 11 ) {\n+\n+\t\treturn results;\n+\t}\n+\n+\t\/\/ Try to shortcut find operations (as opposed to filters) in HTML documents\n+\tif ( !seed ) {\n+\t\tsetDocument( context );\n+\t\tcontext = context || document;\n+\n+\t\tif ( documentIsHTML ) {\n+\n+\t\t\t\/\/ If the selector is sufficiently simple, try using a \"get*By*\" DOM method\n+\t\t\t\/\/ (excepting DocumentFragment context, where the methods don't exist)\n+\t\t\tif ( nodeType !== 11 && ( match = rquickExpr.exec( selector ) ) ) {\n+\n+\t\t\t\t\/\/ ID selector\n+\t\t\t\tif ( ( m = match[ 1 ] ) ) {\n+\n+\t\t\t\t\t\/\/ Document context\n+\t\t\t\t\tif ( nodeType === 9 ) {\n+\t\t\t\t\t\tif ( ( elem = context.getElementById( m ) ) ) {\n+\n+\t\t\t\t\t\t\t\/\/ Support: IE 9 only\n+\t\t\t\t\t\t\t\/\/ getElementById can match elements by name instead of ID\n+\t\t\t\t\t\t\tif ( elem.id === m ) {\n+\t\t\t\t\t\t\t\tpush.call( results, elem );\n+\t\t\t\t\t\t\t\treturn results;\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\treturn results;\n+\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\/\/ Element context\n+\t\t\t\t\t} else {\n+\n+\t\t\t\t\t\t\/\/ Support: IE 9 only\n+\t\t\t\t\t\t\/\/ getElementById can match elements by name instead of ID\n+\t\t\t\t\t\tif ( newContext && ( elem = newContext.getElementById( m ) ) &&\n+\t\t\t\t\t\t\tfind.contains( context, elem ) &&\n+\t\t\t\t\t\t\telem.id === m ) {\n+\n+\t\t\t\t\t\t\tpush.call( results, elem );\n+\t\t\t\t\t\t\treturn results;\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\n+\t\t\t\t\/\/ Type selector\n+\t\t\t\t} else if ( match[ 2 ] ) {\n+\t\t\t\t\tpush.apply( results, context.getElementsByTagName( selector ) );\n+\t\t\t\t\treturn results;\n+\n+\t\t\t\t\/\/ Class selector\n+\t\t\t\t} else if ( ( m = match[ 3 ] ) && context.getElementsByClassName ) {\n+\t\t\t\t\tpush.apply( results, context.getElementsByClassName( m ) );\n+\t\t\t\t\treturn results;\n+\t\t\t\t}\n+\t\t\t}\n+\n+\t\t\t\/\/ Take advantage of querySelectorAll\n+\t\t\tif ( !nonnativeSelectorCache[ selector + \" \" ] &&\n+\t\t\t\t( !rbuggyQSA || !rbuggyQSA.test( selector ) ) ) {\n+\n+\t\t\t\tnewSelector = selector;\n+\t\t\t\tnewContext = context;\n+\n+\t\t\t\t\/\/ qSA considers elements outside a scoping root when evaluating child or\n+\t\t\t\t\/\/ descendant combinators, which is not what we want.\n+\t\t\t\t\/\/ In such cases, we work around the behavior by prefixing every selector in the\n+\t\t\t\t\/\/ list with an ID selector referencing the scope context.\n+\t\t\t\t\/\/ The technique has to be used as well when a leading combinator is used\n+\t\t\t\t\/\/ as such selectors are not recognized by querySelectorAll.\n+\t\t\t\t\/\/ Thanks to Andrew Dupont for this technique.\n+\t\t\t\tif ( nodeType === 1 &&\n+\t\t\t\t\t( rdescend.test( selector ) || rleadingCombinator.test( selector ) ) ) {\n+\n+\t\t\t\t\t\/\/ Expand context for sibling selectors\n+\t\t\t\t\tnewContext = rsibling.test( selector ) && testContext( context.parentNode ) ||\n+\t\t\t\t\t\tcontext;\n+\n+\t\t\t\t\t\/\/ We can use :scope instead of the ID hack if the browser\n+\t\t\t\t\t\/\/ supports it & if we're not changing the context.\n+\t\t\t\t\t\/\/ Support: IE 11+, Edge 17 - 18+\n+\t\t\t\t\t\/\/ IE\/Edge sometimes throw a \"Permission denied\" error when\n+\t\t\t\t\t\/\/ strict-comparing two documents; shallow comparisons work.\n+\t\t\t\t\t\/\/ eslint-disable-next-line eqeqeq\n+\t\t\t\t\tif ( newContext != context || !support.scope ) {\n+\n+\t\t\t\t\t\t\/\/ Capture the context ID, setting it first if necessary\n+\t\t\t\t\t\tif ( ( nid = context.getAttribute( \"id\" ) ) ) {\n+\t\t\t\t\t\t\tnid = jQuery.escapeSelector( nid );\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\tcontext.setAttribute( \"id\", ( nid = expando ) );\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\n+\t\t\t\t\t\/\/ Prefix every selector in the list\n+\t\t\t\t\tgroups = tokenize( selector );\n+\t\t\t\t\ti = groups.length;\n+\t\t\t\t\twhile ( i-- ) {\n+\t\t\t\t\t\tgroups[ i ] = ( nid ? \"#\" + nid : \":scope\" ) + \" \" +\n+\t\t\t\t\t\t\ttoSelector( groups[ i ] );\n+\t\t\t\t\t}\n+\t\t\t\t\tnewSelector = groups.join( \",\" );\n+\t\t\t\t}\n+\n+\t\t\t\ttry {\n+\t\t\t\t\tpush.apply( results,\n+\t\t\t\t\t\tnewContext.querySelectorAll( newSelector )\n+\t\t\t\t\t);\n+\t\t\t\t\treturn results;\n+\t\t\t\t} catch ( qsaError ) {\n+\t\t\t\t\tnonnativeSelectorCache( selector, true );\n+\t\t\t\t} finally {\n+\t\t\t\t\tif ( nid === expando ) {\n+\t\t\t\t\t\tcontext.removeAttribute( \"id\" );\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\t}\n+\n+\t\/\/ All others\n+\treturn select( selector.replace( rtrimCSS, \"$1\" ), context, results, seed );\n+}\n+\n+\/**\n+ * Create key-value caches of limited size\n+ * @returns {function(string, object)} Returns the Object data after storing it on itself with\n+ *\tproperty name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)\n+ *\tdeleting the oldest entry\n+ *\/\n+function createCache() {\n+\tvar keys = [];\n+\n+\tfunction cache( key, value ) {\n+\n+\t\t\/\/ Use (key + \" \") to avoid collision with native prototype properties\n+\t\t\/\/ (see https:\/\/github.com\/jquery\/sizzle\/issues\/157)\n+\t\tif ( keys.push( key + \" \" ) > Expr.cacheLength ) {\n+\n+\t\t\t\/\/ Only keep the most recent entries\n+\t\t\tdelete cache[ keys.shift() ];\n+\t\t}\n+\t\treturn ( cache[ key + \" \" ] = value );\n+\t}\n+\treturn cache;\n+}\n+\n+\/**\n+ * Mark a function for special use by jQuery selector module\n+ * @param {Function} fn The function to mark\n+ *\/\n+function markFunction( fn ) {\n+\tfn[ expando ] = true;\n+\treturn fn;\n+}\n+\n+\/**\n+ * Support testing using an element\n+ * @param {Function} fn Passed the created element and returns a boolean result\n+ *\/\n+function assert( fn ) {\n+\tvar el = document.createElement( \"fieldset\" );\n+\n+\ttry {\n+\t\treturn !!fn( el );\n+\t} catch ( e ) {\n+\t\treturn false;\n+\t} finally {\n+\n+\t\t\/\/ Remove from its parent by default\n+\t\tif ( el.parentNode ) {\n+\t\t\tel.parentNode.removeChild( el );\n+\t\t}\n+\n+\t\t\/\/ release memory in IE\n+\t\tel = null;\n+\t}\n+}\n+\n+\/**\n+ * Returns a function to use in pseudos for input types\n+ * @param {String} type\n+ *\/\n+function createInputPseudo( type ) {\n+\treturn function( elem ) {\n+\t\treturn nodeName( elem, \"input\" ) && elem.type === type;\n+\t};\n+}\n+\n+\/**\n+ * Returns a function to use in pseudos for buttons\n+ * @param {String} type\n+ *\/\n+function createButtonPseudo( type ) {\n+\treturn function( elem ) {\n+\t\treturn ( nodeName( elem, \"input\" ) || nodeName( elem, \"button\" ) ) &&\n+\t\t\telem.type === type;\n+\t};\n+}\n+\n+\/**\n+ * Returns a function to use in pseudos for :enabled\/:disabled\n+ * @param {Boolean} disabled true for :disabled; false for :enabled\n+ *\/\n+function createDisabledPseudo( disabled ) {\n+\n+\t\/\/ Known :disabled false positives: fieldset[disabled] > legend:nth-of-type(n+2) :can-disable\n+\treturn function( elem ) {\n+\n+\t\t\/\/ Only certain elements can match :enabled or :disabled\n+\t\t\/\/ https:\/\/html.spec.whatwg.org\/multipage\/scripting.html#selector-enabled\n+\t\t\/\/ https:\/\/html.spec.whatwg.org\/multipage\/scripting.html#selector-disabled\n+\t\tif ( \"form\" in elem ) {\n+\n+\t\t\t\/\/ Check for inherited disabledness on relevant non-disabled elements:\n+\t\t\t\/\/ * listed form-associated elements in a disabled fieldset\n+\t\t\t\/\/   https:\/\/html.spec.whatwg.org\/multipage\/forms.html#category-listed\n+\t\t\t\/\/   https:\/\/html.spec.whatwg.org\/multipage\/forms.html#concept-fe-disabled\n+\t\t\t\/\/ * option elements in a disabled optgroup\n+\t\t\t\/\/   https:\/\/html.spec.whatwg.org\/multipage\/forms.html#concept-option-disabled\n+\t\t\t\/\/ All such elements have a \"form\" property.\n+\t\t\tif ( elem.parentNode && elem.disabled === false ) {\n+\n+\t\t\t\t\/\/ Option elements defer to a parent optgroup if present\n+\t\t\t\tif ( \"label\" in elem ) {\n+\t\t\t\t\tif ( \"label\" in elem.parentNode ) {\n+\t\t\t\t\t\treturn elem.parentNode.disabled === disabled;\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\treturn elem.disabled === disabled;\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\n+\t\t\t\t\/\/ Support: IE 6 - 11+\n+\t\t\t\t\/\/ Use the isDisabled shortcut property to check for disabled fieldset ancestors\n+\t\t\t\treturn elem.isDisabled === disabled ||\n+\n+\t\t\t\t\t\/\/ Where there is no isDisabled, check manually\n+\t\t\t\t\telem.isDisabled !== !disabled &&\n+\t\t\t\t\t\tinDisabledFieldset( elem ) === disabled;\n+\t\t\t}\n+\n+\t\t\treturn elem.disabled === disabled;\n+\n+\t\t\/\/ Try to winnow out elements that can't be disabled before trusting the disabled property.\n+\t\t\/\/ Some victims get caught in our net (label, legend, menu, track), but it shouldn't\n+\t\t\/\/ even exist on them, let alone have a boolean value.\n+\t\t} else if ( \"label\" in elem ) {\n+\t\t\treturn elem.disabled === disabled;\n+\t\t}\n+\n+\t\t\/\/ Remaining elements are neither :enabled nor :disabled\n+\t\treturn false;\n+\t};\n+}\n+\n+\/**\n+ * Returns a function to use in pseudos for positionals\n+ * @param {Function} fn\n+ *\/\n+function createPositionalPseudo( fn ) {\n+\treturn markFunction( function( argument ) {\n+\t\targument = +argument;\n+\t\treturn markFunction( function( seed, matches ) {\n+\t\t\tvar j,\n+\t\t\t\tmatchIndexes = fn( [], seed.length, argument ),\n+\t\t\t\ti = matchIndexes.length;\n+\n+\t\t\t\/\/ Match elements found at the specified indexes\n+\t\t\twhile ( i-- ) {\n+\t\t\t\tif ( seed[ ( j = matchIndexes[ i ] ) ] ) {\n+\t\t\t\t\tseed[ j ] = !( matches[ j ] = seed[ j ] );\n+\t\t\t\t}\n+\t\t\t}\n+\t\t} );\n+\t} );\n+}\n+\n+\/**\n+ * Checks a node for validity as a jQuery selector context\n+ * @param {Element|Object=} context\n+ * @returns {Element|Object|Boolean} The input node if acceptable, otherwise a falsy value\n+ *\/\n+function testContext( context ) {\n+\treturn context && typeof context.getElementsByTagName !== \"undefined\" && context;\n+}\n+\n+\/**\n+ * Sets document-related variables once based on the current document\n+ * @param {Element|Object} [node] An element or document object to use to set the document\n+ * @returns {Object} Returns the current document\n+ *\/\n+function setDocument( node ) {\n+\tvar subWindow,\n+\t\tdoc = node ? node.ownerDocument || node : preferredDoc;\n+\n+\t\/\/ Return early if doc is invalid or already selected\n+\t\/\/ Support: IE 11+, Edge 17 - 18+\n+\t\/\/ IE\/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n+\t\/\/ two documents; shallow comparisons work.\n+\t\/\/ eslint-disable-next-line eqeqeq\n+\tif ( doc == document || doc.nodeType !== 9 || !doc.documentElement ) {\n+\t\treturn document;\n+\t}\n+\n+\t\/\/ Update global variables\n+\tdocument = doc;\n+\tdocumentElement = document.documentElement;\n+\tdocumentIsHTML = !jQuery.isXMLDoc( document );\n+\n+\t\/\/ Support: iOS 7 only, IE 9 - 11+\n+\t\/\/ Older browsers didn't support unprefixed `matches`.\n+\tmatches = documentElement.matches ||\n+\t\tdocumentElement.webkitMatchesSelector ||\n+\t\tdocumentElement.msMatchesSelector;\n+\n+\t\/\/ Support: IE 9 - 11+, Edge 12 - 18+\n+\t\/\/ Accessing iframe documents after unload throws \"permission denied\" errors\n+\t\/\/ (see trac-13936).\n+\t\/\/ Limit the fix to IE & Edge Legacy; despite Edge 15+ implementing `matches`,\n+\t\/\/ all IE 9+ and Edge Legacy versions implement `msMatchesSelector` as well.\n+\tif ( documentElement.msMatchesSelector &&\n+\n+\t\t\/\/ Support: IE 11+, Edge 17 - 18+\n+\t\t\/\/ IE\/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n+\t\t\/\/ two documents; shallow comparisons work.\n+\t\t\/\/ eslint-disable-next-line eqeqeq\n+\t\tpreferredDoc != document &&\n+\t\t( subWindow = document.defaultView ) && subWindow.top !== subWindow ) {\n+\n+\t\t\/\/ Support: IE 9 - 11+, Edge 12 - 18+\n+\t\tsubWindow.addEventListener( \"unload\", unloadHandler );\n+\t}\n+\n+\t\/\/ Support: IE <10\n+\t\/\/ Check if getElementById returns elements by name\n+\t\/\/ The broken getElementById methods don't pick up programmatically-set names,\n+\t\/\/ so use a roundabout getElementsByName test\n+\tsupport.getById = assert( function( el ) {\n+\t\tdocumentElement.appendChild( el ).id = jQuery.expando;\n+\t\treturn !document.getElementsByName ||\n+\t\t\t!document.getElementsByName( jQuery.expando ).length;\n+\t} );\n+\n+\t\/\/ Support: IE 9 only\n+\t\/\/ Check to see if it's possible to do matchesSelector\n+\t\/\/ on a disconnected node.\n+\tsupport.disconnectedMatch = assert( function( el ) {\n+\t\treturn matches.call( el, \"*\" );\n+\t} );\n+\n+\t\/\/ Support: IE 9 - 11+, Edge 12 - 18+\n+\t\/\/ IE\/Edge don't support the :scope pseudo-class.\n+\tsupport.scope = assert( function() {\n+\t\treturn document.querySelectorAll( \":scope\" );\n+\t} );\n+\n+\t\/\/ Support: Chrome 105 - 111 only, Safari 15.4 - 16.3 only\n+\t\/\/ Make sure the `:has()` argument is parsed unforgivingly.\n+\t\/\/ We include `*` in the test to detect buggy implementations that are\n+\t\/\/ _selectively_ forgiving (specifically when the list includes at least\n+\t\/\/ one valid selector).\n+\t\/\/ Note that we treat complete lack of support for `:has()` as if it were\n+\t\/\/ spec-compliant support, which is fine because use of `:has()` in such\n+\t\/\/ environments will fail in the qSA path and fall back to jQuery traversal\n+\t\/\/ anyway.\n+\tsupport.cssHas = assert( function() {\n+\t\ttry {\n+\t\t\tdocument.querySelector( \":has(*,:jqfake)\" );\n+\t\t\treturn false;\n+\t\t} catch ( e ) {\n+\t\t\treturn true;\n+\t\t}\n+\t} );\n+\n+\t\/\/ ID filter and find\n+\tif ( support.getById ) {\n+\t\tExpr.filter.ID = function( id ) {\n+\t\t\tvar attrId = id.replace( runescape, funescape );\n+\t\t\treturn function( elem ) {\n+\t\t\t\treturn elem.getAttribute( \"id\" ) === attrId;\n+\t\t\t};\n+\t\t};\n+\t\tExpr.find.ID = function( id, context ) {\n+\t\t\tif ( typeof context.getElementById !== \"undefined\" && documentIsHTML ) {\n+\t\t\t\tvar elem = context.getElementById( id );\n+\t\t\t\treturn elem ? [ elem ] : [];\n+\t\t\t}\n+\t\t};\n+\t} else {\n+\t\tExpr.filter.ID =  function( id ) {\n+\t\t\tvar attrId = id.replace( runescape, funescape );\n+\t\t\treturn function( elem ) {\n+\t\t\t\tvar node = typeof elem.getAttributeNode !== \"undefined\" &&\n+\t\t\t\t\telem.getAttributeNode( \"id\" );\n+\t\t\t\treturn node && node.value === attrId;\n+\t\t\t};\n+\t\t};\n+\n+\t\t\/\/ Support: IE 6 - 7 only\n+\t\t\/\/ getElementById is not reliable as a find shortcut\n+\t\tExpr.find.ID = function( id, context ) {\n+\t\t\tif ( typeof context.getElementById !== \"undefined\" && documentIsHTML ) {\n+\t\t\t\tvar node, i, elems,\n+\t\t\t\t\telem = context.getElementById( id );\n+\n+\t\t\t\tif ( elem ) {\n+\n+\t\t\t\t\t\/\/ Verify the id attribute\n+\t\t\t\t\tnode = elem.getAttributeNode( \"id\" );\n+\t\t\t\t\tif ( node && node.value === id ) {\n+\t\t\t\t\t\treturn [ elem ];\n+\t\t\t\t\t}\n+\n+\t\t\t\t\t\/\/ Fall back on getElementsByName\n+\t\t\t\t\telems = context.getElementsByName( id );\n+\t\t\t\t\ti = 0;\n+\t\t\t\t\twhile ( ( elem = elems[ i++ ] ) ) {\n+\t\t\t\t\t\tnode = elem.getAttributeNode( \"id\" );\n+\t\t\t\t\t\tif ( node && node.value === id ) {\n+\t\t\t\t\t\t\treturn [ elem ];\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\n+\t\t\t\treturn [];\n+\t\t\t}\n+\t\t};\n+\t}\n+\n+\t\/\/ Tag\n+\tExpr.find.TAG = function( tag, context ) {\n+\t\tif ( typeof context.getElementsByTagName !== \"undefined\" ) {\n+\t\t\treturn context.getElementsByTagName( tag );\n+\n+\t\t\/\/ DocumentFragment nodes don't have gEBTN\n+\t\t} else {\n+\t\t\treturn context.querySelectorAll( tag );\n+\t\t}\n+\t};\n+\n+\t\/\/ Class\n+\tExpr.find.CLASS = function( className, context ) {\n+\t\tif ( typeof context.getElementsByClassName !== \"undefined\" && documentIsHTML ) {\n+\t\t\treturn context.getElementsByClassName( className );\n+\t\t}\n+\t};\n+\n+\t\/* QSA\/matchesSelector\n+\t---------------------------------------------------------------------- *\/\n+\n+\t\/\/ QSA and matchesSelector support\n+\n+\trbuggyQSA = [];\n+\n+\t\/\/ Build QSA regex\n+\t\/\/ Regex strategy adopted from Diego Perini\n+\tassert( function( el ) {\n+\n+\t\tvar input;\n+\n+\t\tdocumentElement.appendChild( el ).innerHTML =\n+\t\t\t\"<a id='\" + expando + \"' href='' disabled='disabled'><\/a>\" +\n+\t\t\t\"<select id='\" + expando + \"-\\r\\\\' disabled='disabled'>\" +\n+\t\t\t\"<option selected=''><\/option><\/select>\";\n+\n+\t\t\/\/ Support: iOS <=7 - 8 only\n+\t\t\/\/ Boolean attributes and \"value\" are not treated correctly in some XML documents\n+\t\tif ( !el.querySelectorAll( \"[selected]\" ).length ) {\n+\t\t\trbuggyQSA.push( \"\\\\[\" + whitespace + \"*(?:value|\" + booleans + \")\" );\n+\t\t}\n+\n+\t\t\/\/ Support: iOS <=7 - 8 only\n+\t\tif ( !el.querySelectorAll( \"[id~=\" + expando + \"-]\" ).length ) {\n+\t\t\trbuggyQSA.push( \"~=\" );\n+\t\t}\n+\n+\t\t\/\/ Support: iOS 8 only\n+\t\t\/\/ https:\/\/bugs.webkit.org\/show_bug.cgi?id=136851\n+\t\t\/\/ In-page `selector#id sibling-combinator selector` fails\n+\t\tif ( !el.querySelectorAll( \"a#\" + expando + \"+*\" ).length ) {\n+\t\t\trbuggyQSA.push( \".#.+[+~]\" );\n+\t\t}\n+\n+\t\t\/\/ Support: Chrome <=105+, Firefox <=104+, Safari <=15.4+\n+\t\t\/\/ In some of the document kinds, these selectors wouldn't work natively.\n+\t\t\/\/ This is probably OK but for backwards compatibility we want to maintain\n+\t\t\/\/ handling them through jQuery traversal in jQuery 3.x.\n+\t\tif ( !el.querySelectorAll( \":checked\" ).length ) {\n+\t\t\trbuggyQSA.push( \":checked\" );\n+\t\t}\n+\n+\t\t\/\/ Support: Windows 8 Native Apps\n+\t\t\/\/ The type and name attributes are restricted during .innerHTML assignment\n+\t\tinput = document.createElement( \"input\" );\n+\t\tinput.setAttribute( \"type\", \"hidden\" );\n+\t\tel.appendChild( input ).setAttribute( \"name\", \"D\" );\n+\n+\t\t\/\/ Support: IE 9 - 11+\n+\t\t\/\/ IE's :disabled selector does not pick up the children of disabled fieldsets\n+\t\t\/\/ Support: Chrome <=105+, Firefox <=104+, Safari <=15.4+\n+\t\t\/\/ In some of the document kinds, these selectors wouldn't work natively.\n+\t\t\/\/ This is probably OK but for backwards compatibility we want to maintain\n+\t\t\/\/ handling them through jQuery traversal in jQuery 3.x.\n+\t\tdocumentElement.appendChild( el ).disabled = true;\n+\t\tif ( el.querySelectorAll( \":disabled\" ).length !== 2 ) {\n+\t\t\trbuggyQSA.push( \":enabled\", \":disabled\" );\n+\t\t}\n+\n+\t\t\/\/ Support: IE 11+, Edge 15 - 18+\n+\t\t\/\/ IE 11\/Edge don't find elements on a `[name='']` query in some cases.\n+\t\t\/\/ Adding a temporary attribute to the document before the selection works\n+\t\t\/\/ around the issue.\n+\t\t\/\/ Interestingly, IE 10 & older don't seem to have the issue.\n+\t\tinput = document.createElement( \"input\" );\n+\t\tinput.setAttribute( \"name\", \"\" );\n+\t\tel.appendChild( input );\n+\t\tif ( !el.querySelectorAll( \"[name='']\" ).length ) {\n+\t\t\trbuggyQSA.push( \"\\\\[\" + whitespace + \"*name\" + whitespace + \"*=\" +\n+\t\t\t\twhitespace + \"*(?:''|\\\"\\\")\" );\n+\t\t}\n+\t} );\n+\n+\tif ( !support.cssHas ) {\n+\n+\t\t\/\/ Support: Chrome 105 - 110+, Safari 15.4 - 16.3+\n+\t\t\/\/ Our regular `try-catch` mechanism fails to detect natively-unsupported\n+\t\t\/\/ pseudo-classes inside `:has()` (such as `:has(:contains(\"Foo\"))`)\n+\t\t\/\/ in browsers that parse the `:has()` argument as a forgiving selector list.\n+\t\t\/\/ https:\/\/drafts.csswg.org\/selectors\/#relational now requires the argument\n+\t\t\/\/ to be parsed unforgivingly, but browsers have not yet fully adjusted.\n+\t\trbuggyQSA.push( \":has\" );\n+\t}\n+\n+\trbuggyQSA = rbuggyQSA.length && new RegExp( rbuggyQSA.join( \"|\" ) );\n+\n+\t\/* Sorting\n+\t---------------------------------------------------------------------- *\/\n+\n+\t\/\/ Document order sorting\n+\tsortOrder = function( a, b ) {\n+\n+\t\t\/\/ Flag for duplicate removal\n+\t\tif ( a === b ) {\n+\t\t\thasDuplicate = true;\n+\t\t\treturn 0;\n+\t\t}\n+\n+\t\t\/\/ Sort on method existence if only one input has compareDocumentPosition\n+\t\tvar compare = !a.compareDocumentPosition - !b.compareDocumentPosition;\n+\t\tif ( compare ) {\n+\t\t\treturn compare;\n+\t\t}\n+\n+\t\t\/\/ Calculate position if both inputs belong to the same document\n+\t\t\/\/ Support: IE 11+, Edge 17 - 18+\n+\t\t\/\/ IE\/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n+\t\t\/\/ two documents; shallow comparisons work.\n+\t\t\/\/ eslint-disable-next-line eqeqeq\n+\t\tcompare = ( a.ownerDocument || a ) == ( b.ownerDocument || b ) ?\n+\t\t\ta.compareDocumentPosition( b ) :\n+\n+\t\t\t\/\/ Otherwise we know they are disconnected\n+\t\t\t1;\n+\n+\t\t\/\/ Disconnected nodes\n+\t\tif ( compare & 1 ||\n+\t\t\t( !support.sortDetached && b.compareDocumentPosition( a ) === compare ) ) {\n+\n+\t\t\t\/\/ Choose the first element that is related to our preferred document\n+\t\t\t\/\/ Support: IE 11+, Edge 17 - 18+\n+\t\t\t\/\/ IE\/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n+\t\t\t\/\/ two documents; shallow comparisons work.\n+\t\t\t\/\/ eslint-disable-next-line eqeqeq\n+\t\t\tif ( a === document || a.ownerDocument == preferredDoc &&\n+\t\t\t\tfind.contains( preferredDoc, a ) ) {\n+\t\t\t\treturn -1;\n+\t\t\t}\n+\n+\t\t\t\/\/ Support: IE 11+, Edge 17 - 18+\n+\t\t\t\/\/ IE\/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n+\t\t\t\/\/ two documents; shallow comparisons work.\n+\t\t\t\/\/ eslint-disable-next-line eqeqeq\n+\t\t\tif ( b === document || b.ownerDocument == preferredDoc &&\n+\t\t\t\tfind.contains( preferredDoc, b ) ) {\n+\t\t\t\treturn 1;\n+\t\t\t}\n+\n+\t\t\t\/\/ Maintain original order\n+\t\t\treturn sortInput ?\n+\t\t\t\t( indexOf.call( sortInput, a ) - indexOf.call( sortInput, b ) ) :\n+\t\t\t\t0;\n+\t\t}\n+\n+\t\treturn compare & 4 ? -1 : 1;\n+\t};\n+\n+\treturn document;\n+}\n+\n+find.matches = function( expr, elements ) {\n+\treturn find( expr, null, null, elements );\n+};\n+\n+find.matchesSelector = function( elem, expr ) {\n+\tsetDocument( elem );\n+\n+\tif ( documentIsHTML &&\n+\t\t!nonnativeSelectorCache[ expr + \" \" ] &&\n+\t\t( !rbuggyQSA || !rbuggyQSA.test( expr ) ) ) {\n+\n+\t\ttry {\n+\t\t\tvar ret = matches.call( elem, expr );\n+\n+\t\t\t\/\/ IE 9's matchesSelector returns false on disconnected nodes\n+\t\t\tif ( ret || support.disconnectedMatch ||\n+\n+\t\t\t\t\t\/\/ As well, disconnected nodes are said to be in a document\n+\t\t\t\t\t\/\/ fragment in IE 9\n+\t\t\t\t\telem.document && elem.document.nodeType !== 11 ) {\n+\t\t\t\treturn ret;\n+\t\t\t}\n+\t\t} catch ( e ) {\n+\t\t\tnonnativeSelectorCache( expr, true );\n+\t\t}\n+\t}\n+\n+\treturn find( expr, document, null, [ elem ] ).length > 0;\n+};\n+\n+find.contains = function( context, elem ) {\n+\n+\t\/\/ Set document vars if needed\n+\t\/\/ Support: IE 11+, Edge 17 - 18+\n+\t\/\/ IE\/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n+\t\/\/ two documents; shallow comparisons work.\n+\t\/\/ eslint-disable-next-line eqeqeq\n+\tif ( ( context.ownerDocument || context ) != document ) {\n+\t\tsetDocument( context );\n+\t}\n+\treturn jQuery.contains( context, elem );\n+};\n+\n+\n+find.attr = function( elem, name ) {\n+\n+\t\/\/ Set document vars if needed\n+\t\/\/ Support: IE 11+, Edge 17 - 18+\n+\t\/\/ IE\/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n+\t\/\/ two documents; shallow comparisons work.\n+\t\/\/ eslint-disable-next-line eqeqeq\n+\tif ( ( elem.ownerDocument || elem ) != document ) {\n+\t\tsetDocument( elem );\n+\t}\n+\n+\tvar fn = Expr.attrHandle[ name.toLowerCase() ],\n+\n+\t\t\/\/ Don't get fooled by Object.prototype properties (see trac-13807)\n+\t\tval = fn && hasOwn.call( Expr.attrHandle, name.toLowerCase() ) ?\n+\t\t\tfn( elem, name, !documentIsHTML ) :\n+\t\t\tundefined;\n+\n+\tif ( val !== undefined ) {\n+\t\treturn val;\n+\t}\n+\n+\treturn elem.getAttribute( name );\n+};\n+\n+find.error = function( msg ) {\n+\tthrow new Error( \"Syntax error, unrecognized expression: \" + msg );\n+};\n+\n+\/**\n+ * Document sorting and removing duplicates\n+ * @param {ArrayLike} results\n+ *\/\n+jQuery.uniqueSort = function( results ) {\n+\tvar elem,\n+\t\tduplicates = [],\n+\t\tj = 0,\n+\t\ti = 0;\n+\n+\t\/\/ Unless we *know* we can detect duplicates, assume their presence\n+\t\/\/\n+\t\/\/ Support: Android <=4.0+\n+\t\/\/ Testing for detecting duplicates is unpredictable so instead assume we can't\n+\t\/\/ depend on duplicate detection in all browsers without a stable sort.\n+\thasDuplicate = !support.sortStable;\n+\tsortInput = !support.sortStable && slice.call( results, 0 );\n+\tsort.call( results, sortOrder );\n+\n+\tif ( hasDuplicate ) {\n+\t\twhile ( ( elem = results[ i++ ] ) ) {\n+\t\t\tif ( elem === results[ i ] ) {\n+\t\t\t\tj = duplicates.push( i );\n+\t\t\t}\n+\t\t}\n+\t\twhile ( j-- ) {\n+\t\t\tsplice.call( results, duplicates[ j ], 1 );\n+\t\t}\n+\t}\n+\n+\t\/\/ Clear input after sorting to release objects\n+\t\/\/ See https:\/\/github.com\/jquery\/sizzle\/pull\/225\n+\tsortInput = null;\n+\n+\treturn results;\n+};\n+\n+jQuery.fn.uniqueSort = function() {\n+\treturn this.pushStack( jQuery.uniqueSort( slice.apply( this ) ) );\n+};\n+\n+Expr = jQuery.expr = {\n+\n+\t\/\/ Can be adjusted by the user\n+\tcacheLength: 50,\n+\n+\tcreatePseudo: markFunction,\n+\n+\tmatch: matchExpr,\n+\n+\tattrHandle: {},\n+\n+\tfind: {},\n+\n+\trelative: {\n+\t\t\">\": { dir: \"parentNode\", first: true },\n+\t\t\" \": { dir: \"parentNode\" },\n+\t\t\"+\": { dir: \"previousSibling\", first: true },\n+\t\t\"~\": { dir: \"previousSibling\" }\n+\t},\n+\n+\tpreFilter: {\n+\t\tATTR: function( match ) {\n+\t\t\tmatch[ 1 ] = match[ 1 ].replace( runescape, funescape );\n+\n+\t\t\t\/\/ Move the given value to match[3] whether quoted or unquoted\n+\t\t\tmatch[ 3 ] = ( match[ 3 ] || match[ 4 ] || match[ 5 ] || \"\" )\n+\t\t\t\t.replace( runescape, funescape );\n+\n+\t\t\tif ( match[ 2 ] === \"~=\" ) {\n+\t\t\t\tmatch[ 3 ] = \" \" + match[ 3 ] + \" \";\n+\t\t\t}\n+\n+\t\t\treturn match.slice( 0, 4 );\n+\t\t},\n+\n+\t\tCHILD: function( match ) {\n+\n+\t\t\t\/* matches from matchExpr[\"CHILD\"]\n+\t\t\t\t1 type (only|nth|...)\n+\t\t\t\t2 what (child|of-type)\n+\t\t\t\t3 argument (even|odd|\\d*|\\d*n([+-]\\d+)?|...)\n+\t\t\t\t4 xn-component of xn+y argument ([+-]?\\d*n|)\n+\t\t\t\t5 sign of xn-component\n+\t\t\t\t6 x of xn-component\n+\t\t\t\t7 sign of y-component\n+\t\t\t\t8 y of y-component\n+\t\t\t*\/\n+\t\t\tmatch[ 1 ] = match[ 1 ].toLowerCase();\n+\n+\t\t\tif ( match[ 1 ].slice( 0, 3 ) === \"nth\" ) {\n+\n+\t\t\t\t\/\/ nth-* requires argument\n+\t\t\t\tif ( !match[ 3 ] ) {\n+\t\t\t\t\tfind.error( match[ 0 ] );\n+\t\t\t\t}\n+\n+\t\t\t\t\/\/ numeric x and y parameters for Expr.filter.CHILD\n+\t\t\t\t\/\/ remember that false\/true cast respectively to 0\/1\n+\t\t\t\tmatch[ 4 ] = +( match[ 4 ] ?\n+\t\t\t\t\tmatch[ 5 ] + ( match[ 6 ] || 1 ) :\n+\t\t\t\t\t2 * ( match[ 3 ] === \"even\" || match[ 3 ] === \"odd\" )\n+\t\t\t\t);\n+\t\t\t\tmatch[ 5 ] = +( ( match[ 7 ] + match[ 8 ] ) || match[ 3 ] === \"odd\" );\n+\n+\t\t\t\/\/ other types prohibit arguments\n+\t\t\t} else if ( match[ 3 ] ) {\n+\t\t\t\tfind.error( match[ 0 ] );\n+\t\t\t}\n+\n+\t\t\treturn match;\n+\t\t},\n+\n+\t\tPSEUDO: function( match ) {\n+\t\t\tvar excess,\n+\t\t\t\tunquoted = !match[ 6 ] && match[ 2 ];\n+\n+\t\t\tif ( matchExpr.CHILD.test( match[ 0 ] ) ) {\n+\t\t\t\treturn null;\n+\t\t\t}\n+\n+\t\t\t\/\/ Accept quoted arguments as-is\n+\t\t\tif ( match[ 3 ] ) {\n+\t\t\t\tmatch[ 2 ] = match[ 4 ] || match[ 5 ] || \"\";\n+\n+\t\t\t\/\/ Strip excess characters from unquoted arguments\n+\t\t\t} else if ( unquoted && rpseudo.test( unquoted ) &&\n+\n+\t\t\t\t\/\/ Get excess from tokenize (recursively)\n+\t\t\t\t( excess = tokenize( unquoted, true ) ) &&\n+\n+\t\t\t\t\/\/ advance to the next closing parenthesis\n+\t\t\t\t( excess = unquoted.indexOf( \")\", unquoted.length - excess ) - unquoted.length ) ) {\n+\n+\t\t\t\t\/\/ excess is a negative index\n+\t\t\t\tmatch[ 0 ] = match[ 0 ].slice( 0, excess );\n+\t\t\t\tmatch[ 2 ] = unquoted.slice( 0, excess );\n+\t\t\t}\n+\n+\t\t\t\/\/ Return only captures needed by the pseudo filter method (type and argument)\n+\t\t\treturn match.slice( 0, 3 );\n+\t\t}\n+\t},\n+\n+\tfilter: {\n+\n+\t\tTAG: function( nodeNameSelector ) {\n+\t\t\tvar expectedNodeName = nodeNameSelector.replace( runescape, funescape ).toLowerCase();\n+\t\t\treturn nodeNameSelector === \"*\" ?\n+\t\t\t\tfunction() {\n+\t\t\t\t\treturn true;\n+\t\t\t\t} :\n+\t\t\t\tfunction( elem ) {\n+\t\t\t\t\treturn nodeName( elem, expectedNodeName );\n+\t\t\t\t};\n+\t\t},\n+\n+\t\tCLASS: function( className ) {\n+\t\t\tvar pattern = classCache[ className + \" \" ];\n+\n+\t\t\treturn pattern ||\n+\t\t\t\t( pattern = new RegExp( \"(^|\" + whitespace + \")\" + className +\n+\t\t\t\t\t\"(\" + whitespace + \"|$)\" ) ) &&\n+\t\t\t\tclassCache( className, function( elem ) {\n+\t\t\t\t\treturn pattern.test(\n+\t\t\t\t\t\ttypeof elem.className === \"string\" && elem.className ||\n+\t\t\t\t\t\t\ttypeof elem.getAttribute !== \"undefined\" &&\n+\t\t\t\t\t\t\t\telem.getAttribute( \"class\" ) ||\n+\t\t\t\t\t\t\t\"\"\n+\t\t\t\t\t);\n+\t\t\t\t} );\n+\t\t},\n+\n+\t\tATTR: function( name, operator, check ) {\n+\t\t\treturn function( elem ) {\n+\t\t\t\tvar result = find.attr( elem, name );\n+\n+\t\t\t\tif ( result == null ) {\n+\t\t\t\t\treturn operator === \"!=\";\n+\t\t\t\t}\n+\t\t\t\tif ( !operator ) {\n+\t\t\t\t\treturn true;\n+\t\t\t\t}\n+\n+\t\t\t\tresult += \"\";\n+\n+\t\t\t\tif ( operator === \"=\" ) {\n+\t\t\t\t\treturn result === check;\n+\t\t\t\t}\n+\t\t\t\tif ( operator === \"!=\" ) {\n+\t\t\t\t\treturn result !== check;\n+\t\t\t\t}\n+\t\t\t\tif ( operator === \"^=\" ) {\n+\t\t\t\t\treturn check && result.indexOf( check ) === 0;\n+\t\t\t\t}\n+\t\t\t\tif ( operator === \"*=\" ) {\n+\t\t\t\t\treturn check && result.indexOf( check ) > -1;\n+\t\t\t\t}\n+\t\t\t\tif ( operator === \"$=\" ) {\n+\t\t\t\t\treturn check && result.slice( -check.length ) === check;\n+\t\t\t\t}\n+\t\t\t\tif ( operator === \"~=\" ) {\n+\t\t\t\t\treturn ( \" \" + result.replace( rwhitespace, \" \" ) + \" \" )\n+\t\t\t\t\t\t.indexOf( check ) > -1;\n+\t\t\t\t}\n+\t\t\t\tif ( operator === \"|=\" ) {\n+\t\t\t\t\treturn result === check || result.slice( 0, check.length + 1 ) === check + \"-\";\n+\t\t\t\t}\n+\n+\t\t\t\treturn false;\n+\t\t\t};\n+\t\t},\n+\n+\t\tCHILD: function( type, what, _argument, first, last ) {\n+\t\t\tvar simple = type.slice( 0, 3 ) !== \"nth\",\n+\t\t\t\tforward = type.slice( -4 ) !== \"last\",\n+\t\t\t\tofType = what === \"of-type\";\n+\n+\t\t\treturn first === 1 && last === 0 ?\n+\n+\t\t\t\t\/\/ Shortcut for :nth-*(n)\n+\t\t\t\tfunction( elem ) {\n+\t\t\t\t\treturn !!elem.parentNode;\n+\t\t\t\t} :\n+\n+\t\t\t\tfunction( elem, _context, xml ) {\n+\t\t\t\t\tvar cache, outerCache, node, nodeIndex, start,\n+\t\t\t\t\t\tdir = simple !== forward ? \"nextSibling\" : \"previousSibling\",\n+\t\t\t\t\t\tparent = elem.parentNode,\n+\t\t\t\t\t\tname = ofType && elem.nodeName.toLowerCase(),\n+\t\t\t\t\t\tuseCache = !xml && !ofType,\n+\t\t\t\t\t\tdiff = false;\n+\n+\t\t\t\t\tif ( parent ) {\n+\n+\t\t\t\t\t\t\/\/ :(first|last|only)-(child|of-type)\n+\t\t\t\t\t\tif ( simple ) {\n+\t\t\t\t\t\t\twhile ( dir ) {\n+\t\t\t\t\t\t\t\tnode = elem;\n+\t\t\t\t\t\t\t\twhile ( ( node = node[ dir ] ) ) {\n+\t\t\t\t\t\t\t\t\tif ( ofType ?\n+\t\t\t\t\t\t\t\t\t\tnodeName( node, name ) :\n+\t\t\t\t\t\t\t\t\t\tnode.nodeType === 1 ) {\n+\n+\t\t\t\t\t\t\t\t\t\treturn false;\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\t\t\/\/ Reverse direction for :only-* (if we haven't yet done so)\n+\t\t\t\t\t\t\t\tstart = dir = type === \"only\" && !start && \"nextSibling\";\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\treturn true;\n+\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\tstart = [ forward ? parent.firstChild : parent.lastChild ];\n+\n+\t\t\t\t\t\t\/\/ non-xml :nth-child(...) stores cache data on `parent`\n+\t\t\t\t\t\tif ( forward && useCache ) {\n+\n+\t\t\t\t\t\t\t\/\/ Seek `elem` from a previously-cached index\n+\t\t\t\t\t\t\touterCache = parent[ expando ] || ( parent[ expando ] = {} );\n+\t\t\t\t\t\t\tcache = outerCache[ type ] || [];\n+\t\t\t\t\t\t\tnodeIndex = cache[ 0 ] === dirruns && cache[ 1 ];\n+\t\t\t\t\t\t\tdiff = nodeIndex && cache[ 2 ];\n+\t\t\t\t\t\t\tnode = nodeIndex && parent.childNodes[ nodeIndex ];\n+\n+\t\t\t\t\t\t\twhile ( ( node = ++nodeIndex && node && node[ dir ] ||\n+\n+\t\t\t\t\t\t\t\t\/\/ Fallback to seeking `elem` from the start\n+\t\t\t\t\t\t\t\t( diff = nodeIndex = 0 ) || start.pop() ) ) {\n+\n+\t\t\t\t\t\t\t\t\/\/ When found, cache indexes on `parent` and break\n+\t\t\t\t\t\t\t\tif ( node.nodeType === 1 && ++diff && node === elem ) {\n+\t\t\t\t\t\t\t\t\touterCache[ type ] = [ dirruns, nodeIndex, diff ];\n+\t\t\t\t\t\t\t\t\tbreak;\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t} else {\n+\n+\t\t\t\t\t\t\t\/\/ Use previously-cached element index if available\n+\t\t\t\t\t\t\tif ( useCache ) {\n+\t\t\t\t\t\t\t\touterCache = elem[ expando ] || ( elem[ expando ] = {} );\n+\t\t\t\t\t\t\t\tcache = outerCache[ type ] || [];\n+\t\t\t\t\t\t\t\tnodeIndex = cache[ 0 ] === dirruns && cache[ 1 ];\n+\t\t\t\t\t\t\t\tdiff = nodeIndex;\n+\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\t\/\/ xml :nth-child(...)\n+\t\t\t\t\t\t\t\/\/ or :nth-last-child(...) or :nth(-last)?-of-type(...)\n+\t\t\t\t\t\t\tif ( diff === false ) {\n+\n+\t\t\t\t\t\t\t\t\/\/ Use the same loop as above to seek `elem` from the start\n+\t\t\t\t\t\t\t\twhile ( ( node = ++nodeIndex && node && node[ dir ] ||\n+\t\t\t\t\t\t\t\t\t( diff = nodeIndex = 0 ) || start.pop() ) ) {\n+\n+\t\t\t\t\t\t\t\t\tif ( ( ofType ?\n+\t\t\t\t\t\t\t\t\t\tnodeName( node, name ) :\n+\t\t\t\t\t\t\t\t\t\tnode.nodeType === 1 ) &&\n+\t\t\t\t\t\t\t\t\t\t++diff ) {\n+\n+\t\t\t\t\t\t\t\t\t\t\/\/ Cache the index of each encountered element\n+\t\t\t\t\t\t\t\t\t\tif ( useCache ) {\n+\t\t\t\t\t\t\t\t\t\t\touterCache = node[ expando ] ||\n+\t\t\t\t\t\t\t\t\t\t\t\t( node[ expando ] = {} );\n+\t\t\t\t\t\t\t\t\t\t\touterCache[ type ] = [ dirruns, diff ];\n+\t\t\t\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\t\t\t\tif ( node === elem ) {\n+\t\t\t\t\t\t\t\t\t\t\tbreak;\n+\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\/\/ Incorporate the offset, then check against cycle size\n+\t\t\t\t\t\tdiff -= last;\n+\t\t\t\t\t\treturn diff === first || ( diff % first === 0 && diff \/ first >= 0 );\n+\t\t\t\t\t}\n+\t\t\t\t};\n+\t\t},\n+\n+\t\tPSEUDO: function( pseudo, argument ) {\n+\n+\t\t\t\/\/ pseudo-class names are case-insensitive\n+\t\t\t\/\/ https:\/\/www.w3.org\/TR\/selectors\/#pseudo-classes\n+\t\t\t\/\/ Prioritize by case sensitivity in case custom pseudos are added with uppercase letters\n+\t\t\t\/\/ Remember that setFilters inherits from pseudos\n+\t\t\tvar args,\n+\t\t\t\tfn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||\n+\t\t\t\t\tfind.error( \"unsupported pseudo: \" + pseudo );\n+\n+\t\t\t\/\/ The user may use createPseudo to indicate that\n+\t\t\t\/\/ arguments are needed to create the filter function\n+\t\t\t\/\/ just as jQuery does\n+\t\t\tif ( fn[ expando ] ) {\n+\t\t\t\treturn fn( argument );\n+\t\t\t}\n+\n+\t\t\t\/\/ But maintain support for old signatures\n+\t\t\tif ( fn.length > 1 ) {\n+\t\t\t\targs = [ pseudo, pseudo, \"\", argument ];\n+\t\t\t\treturn Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?\n+\t\t\t\t\tmarkFunction( function( seed, matches ) {\n+\t\t\t\t\t\tvar idx,\n+\t\t\t\t\t\t\tmatched = fn( seed, argument ),\n+\t\t\t\t\t\t\ti = matched.length;\n+\t\t\t\t\t\twhile ( i-- ) {\n+\t\t\t\t\t\t\tidx = indexOf.call( seed, matched[ i ] );\n+\t\t\t\t\t\t\tseed[ idx ] = !( matches[ idx ] = matched[ i ] );\n+\t\t\t\t\t\t}\n+\t\t\t\t\t} ) :\n+\t\t\t\t\tfunction( elem ) {\n+\t\t\t\t\t\treturn fn( elem, 0, args );\n+\t\t\t\t\t};\n+\t\t\t}\n+\n+\t\t\treturn fn;\n+\t\t}\n+\t},\n+\n+\tpseudos: {\n+\n+\t\t\/\/ Potentially complex pseudos\n+\t\tnot: markFunction( function( selector ) {\n+\n+\t\t\t\/\/ Trim the selector passed to compile\n+\t\t\t\/\/ to avoid treating leading and trailing\n+\t\t\t\/\/ spaces as combinators\n+\t\t\tvar input = [],\n+\t\t\t\tresults = [],\n+\t\t\t\tmatcher = compile( selector.replace( rtrimCSS, \"$1\" ) );\n+\n+\t\t\treturn matcher[ expando ] ?\n+\t\t\t\tmarkFunction( function( seed, matches, _context, xml ) {\n+\t\t\t\t\tvar elem,\n+\t\t\t\t\t\tunmatched = matcher( seed, null, xml, [] ),\n+\t\t\t\t\t\ti = seed.length;\n+\n+\t\t\t\t\t\/\/ Match elements unmatched by `matcher`\n+\t\t\t\t\twhile ( i-- ) {\n+\t\t\t\t\t\tif ( ( elem = unmatched[ i ] ) ) {\n+\t\t\t\t\t\t\tseed[ i ] = !( matches[ i ] = elem );\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t} ) :\n+\t\t\t\tfunction( elem, _context, xml ) {\n+\t\t\t\t\tinput[ 0 ] = elem;\n+\t\t\t\t\tmatcher( input, null, xml, results );\n+\n+\t\t\t\t\t\/\/ Don't keep the element\n+\t\t\t\t\t\/\/ (see https:\/\/github.com\/jquery\/sizzle\/issues\/299)\n+\t\t\t\t\tinput[ 0 ] = null;\n+\t\t\t\t\treturn !results.pop();\n+\t\t\t\t};\n+\t\t} ),\n+\n+\t\thas: markFunction( function( selector ) {\n+\t\t\treturn function( elem ) {\n+\t\t\t\treturn find( selector, elem ).length > 0;\n+\t\t\t};\n+\t\t} ),\n+\n+\t\tcontains: markFunction( function( text ) {\n+\t\t\ttext = text.replace( runescape, funescape );\n+\t\t\treturn function( elem ) {\n+\t\t\t\treturn ( elem.textContent || jQuery.text( elem ) ).indexOf( text ) > -1;\n+\t\t\t};\n+\t\t} ),\n+\n+\t\t\/\/ \"Whether an element is represented by a :lang() selector\n+\t\t\/\/ is based solely on the element's language value\n+\t\t\/\/ being equal to the identifier C,\n+\t\t\/\/ or beginning with the identifier C immediately followed by \"-\".\n+\t\t\/\/ The matching of C against the element's language value is performed case-insensitively.\n+\t\t\/\/ The identifier C does not have to be a valid language name.\"\n+\t\t\/\/ https:\/\/www.w3.org\/TR\/selectors\/#lang-pseudo\n+\t\tlang: markFunction( function( lang ) {\n+\n+\t\t\t\/\/ lang value must be a valid identifier\n+\t\t\tif ( !ridentifier.test( lang || \"\" ) ) {\n+\t\t\t\tfind.error( \"unsupported lang: \" + lang );\n+\t\t\t}\n+\t\t\tlang = lang.replace( runescape, funescape ).toLowerCase();\n+\t\t\treturn function( elem ) {\n+\t\t\t\tvar elemLang;\n+\t\t\t\tdo {\n+\t\t\t\t\tif ( ( elemLang = documentIsHTML ?\n+\t\t\t\t\t\telem.lang :\n+\t\t\t\t\t\telem.getAttribute( \"xml:lang\" ) || elem.getAttribute( \"lang\" ) ) ) {\n+\n+\t\t\t\t\t\telemLang = elemLang.toLowerCase();\n+\t\t\t\t\t\treturn elemLang === lang || elemLang.indexOf( lang + \"-\" ) === 0;\n+\t\t\t\t\t}\n+\t\t\t\t} while ( ( elem = elem.parentNode ) && elem.nodeType === 1 );\n+\t\t\t\treturn false;\n+\t\t\t};\n+\t\t} ),\n+\n+\t\t\/\/ Miscellaneous\n+\t\ttarget: function( elem ) {\n+\t\t\tvar hash = window.location && window.location.hash;\n+\t\t\treturn hash && hash.slice( 1 ) === elem.id;\n+\t\t},\n+\n+\t\troot: function( elem ) {\n+\t\t\treturn elem === documentElement;\n+\t\t},\n+\n+\t\tfocus: function( elem ) {\n+\t\t\treturn elem === safeActiveElement() &&\n+\t\t\t\tdocument.hasFocus() &&\n+\t\t\t\t!!( elem.type || elem.href || ~elem.tabIndex );\n+\t\t},\n+\n+\t\t\/\/ Boolean properties\n+\t\tenabled: createDisabledPseudo( false ),\n+\t\tdisabled: createDisabledPseudo( true ),\n+\n+\t\tchecked: function( elem ) {\n+\n+\t\t\t\/\/ In CSS3, :checked should return both checked and selected elements\n+\t\t\t\/\/ https:\/\/www.w3.org\/TR\/2011\/REC-css3-selectors-20110929\/#checked\n+\t\t\treturn ( nodeName( elem, \"input\" ) && !!elem.checked ) ||\n+\t\t\t\t( nodeName( elem, \"option\" ) && !!elem.selected );\n+\t\t},\n+\n+\t\tselected: function( elem ) {\n+\n+\t\t\t\/\/ Support: IE <=11+\n+\t\t\t\/\/ Accessing the selectedIndex property\n+\t\t\t\/\/ forces the browser to treat the default option as\n+\t\t\t\/\/ selected when in an optgroup.\n+\t\t\tif ( elem.parentNode ) {\n+\t\t\t\t\/\/ eslint-disable-next-line no-unused-expressions\n+\t\t\t\telem.parentNode.selectedIndex;\n+\t\t\t}\n+\n+\t\t\treturn elem.selected === true;\n+\t\t},\n+\n+\t\t\/\/ Contents\n+\t\tempty: function( elem ) {\n+\n+\t\t\t\/\/ https:\/\/www.w3.org\/TR\/selectors\/#empty-pseudo\n+\t\t\t\/\/ :empty is negated by element (1) or content nodes (text: 3; cdata: 4; entity ref: 5),\n+\t\t\t\/\/   but not by others (comment: 8; processing instruction: 7; etc.)\n+\t\t\t\/\/ nodeType < 6 works because attributes (2) do not appear as children\n+\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {\n+\t\t\t\tif ( elem.nodeType < 6 ) {\n+\t\t\t\t\treturn false;\n+\t\t\t\t}\n+\t\t\t}\n+\t\t\treturn true;\n+\t\t},\n+\n+\t\tparent: function( elem ) {\n+\t\t\treturn !Expr.pseudos.empty( elem );\n+\t\t},\n+\n+\t\t\/\/ Element\/input types\n+\t\theader: function( elem ) {\n+\t\t\treturn rheader.test( elem.nodeName );\n+\t\t},\n+\n+\t\tinput: function( elem ) {\n+\t\t\treturn rinputs.test( elem.nodeName );\n+\t\t},\n+\n+\t\tbutton: function( elem ) {\n+\t\t\treturn nodeName( elem, \"input\" ) && elem.type === \"button\" ||\n+\t\t\t\tnodeName( elem, \"button\" );\n+\t\t},\n+\n+\t\ttext: function( elem ) {\n+\t\t\tvar attr;\n+\t\t\treturn nodeName( elem, \"input\" ) && elem.type === \"text\" &&\n+\n+\t\t\t\t\/\/ Support: IE <10 only\n+\t\t\t\t\/\/ New HTML5 attribute values (e.g., \"search\") appear\n+\t\t\t\t\/\/ with elem.type === \"text\"\n+\t\t\t\t( ( attr = elem.getAttribute( \"type\" ) ) == null ||\n+\t\t\t\t\tattr.toLowerCase() === \"text\" );\n+\t\t},\n+\n+\t\t\/\/ Position-in-collection\n+\t\tfirst: createPositionalPseudo( function() {\n+\t\t\treturn [ 0 ];\n+\t\t} ),\n+\n+\t\tlast: createPositionalPseudo( function( _matchIndexes, length ) {\n+\t\t\treturn [ length - 1 ];\n+\t\t} ),\n+\n+\t\teq: createPositionalPseudo( function( _matchIndexes, length, argument ) {\n+\t\t\treturn [ argument < 0 ? argument + length : argument ];\n+\t\t} ),\n+\n+\t\teven: createPositionalPseudo( function( matchIndexes, length ) {\n+\t\t\tvar i = 0;\n+\t\t\tfor ( ; i < length; i += 2 ) {\n+\t\t\t\tmatchIndexes.push( i );\n+\t\t\t}\n+\t\t\treturn matchIndexes;\n+\t\t} ),\n+\n+\t\todd: createPositionalPseudo( function( matchIndexes, length ) {\n+\t\t\tvar i = 1;\n+\t\t\tfor ( ; i < length; i += 2 ) {\n+\t\t\t\tmatchIndexes.push( i );\n+\t\t\t}\n+\t\t\treturn matchIndexes;\n+\t\t} ),\n+\n+\t\tlt: createPositionalPseudo( function( matchIndexes, length, argument ) {\n+\t\t\tvar i;\n+\n+\t\t\tif ( argument < 0 ) {\n+\t\t\t\ti = argument + length;\n+\t\t\t} else if ( argument > length ) {\n+\t\t\t\ti = length;\n+\t\t\t} else {\n+\t\t\t\ti = argument;\n+\t\t\t}\n+\n+\t\t\tfor ( ; --i >= 0; ) {\n+\t\t\t\tmatchIndexes.push( i );\n+\t\t\t}\n+\t\t\treturn matchIndexes;\n+\t\t} ),\n+\n+\t\tgt: createPositionalPseudo( function( matchIndexes, length, argument ) {\n+\t\t\tvar i = argument < 0 ? argument + length : argument;\n+\t\t\tfor ( ; ++i < length; ) {\n+\t\t\t\tmatchIndexes.push( i );\n+\t\t\t}\n+\t\t\treturn matchIndexes;\n+\t\t} )\n+\t}\n+};\n+\n+Expr.pseudos.nth = Expr.pseudos.eq;\n+\n+\/\/ Add button\/input type pseudos\n+for ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {\n+\tExpr.pseudos[ i ] = createInputPseudo( i );\n+}\n+for ( i in { submit: true, reset: true } ) {\n+\tExpr.pseudos[ i ] = createButtonPseudo( i );\n+}\n+\n+\/\/ Easy API for creating new setFilters\n+function setFilters() {}\n+setFilters.prototype = Expr.filters = Expr.pseudos;\n+Expr.setFilters = new setFilters();\n+\n+function tokenize( selector, parseOnly ) {\n+\tvar matched, match, tokens, type,\n+\t\tsoFar, groups, preFilters,\n+\t\tcached = tokenCache[ selector + \" \" ];\n+\n+\tif ( cached ) {\n+\t\treturn parseOnly ? 0 : cached.slice( 0 );\n+\t}\n+\n+\tsoFar = selector;\n+\tgroups = [];\n+\tpreFilters = Expr.preFilter;\n+\n+\twhile ( soFar ) {\n+\n+\t\t\/\/ Comma and first run\n+\t\tif ( !matched || ( match = rcomma.exec( soFar ) ) ) {\n+\t\t\tif ( match ) {\n+\n+\t\t\t\t\/\/ Don't consume trailing commas as valid\n+\t\t\t\tsoFar = soFar.slice( match[ 0 ].length ) || soFar;\n+\t\t\t}\n+\t\t\tgroups.push( ( tokens = [] ) );\n+\t\t}\n+\n+\t\tmatched = false;\n+\n+\t\t\/\/ Combinators\n+\t\tif ( ( match = rleadingCombinator.exec( soFar ) ) ) {\n+\t\t\tmatched = match.shift();\n+\t\t\ttokens.push( {\n+\t\t\t\tvalue: matched,\n+\n+\t\t\t\t\/\/ Cast descendant combinators to space\n+\t\t\t\ttype: match[ 0 ].replace( rtrimCSS, \" \" )\n+\t\t\t} );\n+\t\t\tsoFar = soFar.slice( matched.length );\n+\t\t}\n+\n+\t\t\/\/ Filters\n+\t\tfor ( type in Expr.filter ) {\n+\t\t\tif ( ( match = matchExpr[ type ].exec( soFar ) ) && ( !preFilters[ type ] ||\n+\t\t\t\t( match = preFilters[ type ]( match ) ) ) ) {\n+\t\t\t\tmatched = match.shift();\n+\t\t\t\ttokens.push( {\n+\t\t\t\t\tvalue: matched,\n+\t\t\t\t\ttype: type,\n+\t\t\t\t\tmatches: match\n+\t\t\t\t} );\n+\t\t\t\tsoFar = soFar.slice( matched.length );\n+\t\t\t}\n+\t\t}\n+\n+\t\tif ( !matched ) {\n+\t\t\tbreak;\n+\t\t}\n+\t}\n+\n+\t\/\/ Return the length of the invalid excess\n+\t\/\/ if we're just parsing\n+\t\/\/ Otherwise, throw an error or return tokens\n+\tif ( parseOnly ) {\n+\t\treturn soFar.length;\n+\t}\n+\n+\treturn soFar ?\n+\t\tfind.error( selector ) :\n+\n+\t\t\/\/ Cache the tokens\n+\t\ttokenCache( selector, groups ).slice( 0 );\n+}\n+\n+function toSelector( tokens ) {\n+\tvar i = 0,\n+\t\tlen = tokens.length,\n+\t\tselector = \"\";\n+\tfor ( ; i < len; i++ ) {\n+\t\tselector += tokens[ i ].value;\n+\t}\n+\treturn selector;\n+}\n+\n+function addCombinator( matcher, combinator, base ) {\n+\tvar dir = combinator.dir,\n+\t\tskip = combinator.next,\n+\t\tkey = skip || dir,\n+\t\tcheckNonElements = base && key === \"parentNode\",\n+\t\tdoneName = done++;\n+\n+\treturn combinator.first ?\n+\n+\t\t\/\/ Check against closest ancestor\/preceding element\n+\t\tfunction( elem, context, xml ) {\n+\t\t\twhile ( ( elem = elem[ dir ] ) ) {\n+\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n+\t\t\t\t\treturn matcher( elem, context, xml );\n+\t\t\t\t}\n+\t\t\t}\n+\t\t\treturn false;\n+\t\t} :\n+\n+\t\t\/\/ Check against all ancestor\/preceding elements\n+\t\tfunction( elem, context, xml ) {\n+\t\t\tvar oldCache, outerCache,\n+\t\t\t\tnewCache = [ dirruns, doneName ];\n+\n+\t\t\t\/\/ We can't set arbitrary data on XML nodes, so they don't benefit from combinator caching\n+\t\t\tif ( xml ) {\n+\t\t\t\twhile ( ( elem = elem[ dir ] ) ) {\n+\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n+\t\t\t\t\t\tif ( matcher( elem, context, xml ) ) {\n+\t\t\t\t\t\t\treturn true;\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t} else {\n+\t\t\t\twhile ( ( elem = elem[ dir ] ) ) {\n+\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n+\t\t\t\t\t\touterCache = elem[ expando ] || ( elem[ expando ] = {} );\n+\n+\t\t\t\t\t\tif ( skip && nodeName( elem, skip ) ) {\n+\t\t\t\t\t\t\telem = elem[ dir ] || elem;\n+\t\t\t\t\t\t} else if ( ( oldCache = outerCache[ key ] ) &&\n+\t\t\t\t\t\t\toldCache[ 0 ] === dirruns && oldCache[ 1 ] === doneName ) {\n+\n+\t\t\t\t\t\t\t\/\/ Assign to newCache so results back-propagate to previous elements\n+\t\t\t\t\t\t\treturn ( newCache[ 2 ] = oldCache[ 2 ] );\n+\t\t\t\t\t\t} else {\n+\n+\t\t\t\t\t\t\t\/\/ Reuse newcache so results back-propagate to previous elements\n+\t\t\t\t\t\t\touterCache[ key ] = newCache;\n+\n+\t\t\t\t\t\t\t\/\/ A match means we're done; a fail means we have to keep checking\n+\t\t\t\t\t\t\tif ( ( newCache[ 2 ] = matcher( elem, context, xml ) ) ) {\n+\t\t\t\t\t\t\t\treturn true;\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t}\n+\t\t\treturn false;\n+\t\t};\n+}\n+\n+function elementMatcher( matchers ) {\n+\treturn matchers.length > 1 ?\n+\t\tfunction( elem, context, xml ) {\n+\t\t\tvar i = matchers.length;\n+\t\t\twhile ( i-- ) {\n+\t\t\t\tif ( !matchers[ i ]( elem, context, xml ) ) {\n+\t\t\t\t\treturn false;\n+\t\t\t\t}\n+\t\t\t}\n+\t\t\treturn true;\n+\t\t} :\n+\t\tmatchers[ 0 ];\n+}\n+\n+function multipleContexts( selector, contexts, results ) {\n+\tvar i = 0,\n+\t\tlen = contexts.length;\n+\tfor ( ; i < len; i++ ) {\n+\t\tfind( selector, contexts[ i ], results );\n+\t}\n+\treturn results;\n+}\n+\n+function condense( unmatched, map, filter, context, xml ) {\n+\tvar elem,\n+\t\tnewUnmatched = [],\n+\t\ti = 0,\n+\t\tlen = unmatched.length,\n+\t\tmapped = map != null;\n+\n+\tfor ( ; i < len; i++ ) {\n+\t\tif ( ( elem = unmatched[ i ] ) ) {\n+\t\t\tif ( !filter || filter( elem, context, xml ) ) {\n+\t\t\t\tnewUnmatched.push( elem );\n+\t\t\t\tif ( mapped ) {\n+\t\t\t\t\tmap.push( i );\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\t}\n+\n+\treturn newUnmatched;\n+}\n+\n+function setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {\n+\tif ( postFilter && !postFilter[ expando ] ) {\n+\t\tpostFilter = setMatcher( postFilter );\n+\t}\n+\tif ( postFinder && !postFinder[ expando ] ) {\n+\t\tpostFinder = setMatcher( postFinder, postSelector );\n+\t}\n+\treturn markFunction( function( seed, results, context, xml ) {\n+\t\tvar temp, i, elem, matcherOut,\n+\t\t\tpreMap = [],\n+\t\t\tpostMap = [],\n+\t\t\tpreexisting = results.length,\n+\n+\t\t\t\/\/ Get initial elements from seed or context\n+\t\t\telems = seed ||\n+\t\t\t\tmultipleContexts( selector || \"*\",\n+\t\t\t\t\tcontext.nodeType ? [ context ] : context, [] ),\n+\n+\t\t\t\/\/ Prefilter to get matcher input, preserving a map for seed-results synchronization\n+\t\t\tmatcherIn = preFilter && ( seed || !selector ) ?\n+\t\t\t\tcondense( elems, preMap, preFilter, context, xml ) :\n+\t\t\t\telems;\n+\n+\t\tif ( matcher ) {\n+\n+\t\t\t\/\/ If we have a postFinder, or filtered seed, or non-seed postFilter\n+\t\t\t\/\/ or preexisting results,\n+\t\t\tmatcherOut = postFinder || ( seed ? preFilter : preexisting || postFilter ) ?\n+\n+\t\t\t\t\/\/ ...intermediate processing is necessary\n+\t\t\t\t[] :\n+\n+\t\t\t\t\/\/ ...otherwise use results directly\n+\t\t\t\tresults;\n+\n+\t\t\t\/\/ Find primary matches\n+\t\t\tmatcher( matcherIn, matcherOut, context, xml );\n+\t\t} else {\n+\t\t\tmatcherOut = matcherIn;\n+\t\t}\n+\n+\t\t\/\/ Apply postFilter\n+\t\tif ( postFilter ) {\n+\t\t\ttemp = condense( matcherOut, postMap );\n+\t\t\tpostFilter( temp, [], context, xml );\n+\n+\t\t\t\/\/ Un-match failing elements by moving them back to matcherIn\n+\t\t\ti = temp.length;\n+\t\t\twhile ( i-- ) {\n+\t\t\t\tif ( ( elem = temp[ i ] ) ) {\n+\t\t\t\t\tmatcherOut[ postMap[ i ] ] = !( matcherIn[ postMap[ i ] ] = elem );\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\n+\t\tif ( seed ) {\n+\t\t\tif ( postFinder || preFilter ) {\n+\t\t\t\tif ( postFinder ) {\n+\n+\t\t\t\t\t\/\/ Get the final matcherOut by condensing this intermediate into postFinder contexts\n+\t\t\t\t\ttemp = [];\n+\t\t\t\t\ti = matcherOut.length;\n+\t\t\t\t\twhile ( i-- ) {\n+\t\t\t\t\t\tif ( ( elem = matcherOut[ i ] ) ) {\n+\n+\t\t\t\t\t\t\t\/\/ Restore matcherIn since elem is not yet a final match\n+\t\t\t\t\t\t\ttemp.push( ( matcherIn[ i ] = elem ) );\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t\tpostFinder( null, ( matcherOut = [] ), temp, xml );\n+\t\t\t\t}\n+\n+\t\t\t\t\/\/ Move matched elements from seed to results to keep them synchronized\n+\t\t\t\ti = matcherOut.length;\n+\t\t\t\twhile ( i-- ) {\n+\t\t\t\t\tif ( ( elem = matcherOut[ i ] ) &&\n+\t\t\t\t\t\t( temp = postFinder ? indexOf.call( seed, elem ) : preMap[ i ] ) > -1 ) {\n+\n+\t\t\t\t\t\tseed[ temp ] = !( results[ temp ] = elem );\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t}\n+\n+\t\t\/\/ Add elements to results, through postFinder if defined\n+\t\t} else {\n+\t\t\tmatcherOut = condense(\n+\t\t\t\tmatcherOut === results ?\n+\t\t\t\t\tmatcherOut.splice( preexisting, matcherOut.length ) :\n+\t\t\t\t\tmatcherOut\n+\t\t\t);\n+\t\t\tif ( postFinder ) {\n+\t\t\t\tpostFinder( null, results, matcherOut, xml );\n+\t\t\t} else {\n+\t\t\t\tpush.apply( results, matcherOut );\n+\t\t\t}\n+\t\t}\n+\t} );\n+}\n+\n+function matcherFromTokens( tokens ) {\n+\tvar checkContext, matcher, j,\n+\t\tlen = tokens.length,\n+\t\tleadingRelative = Expr.relative[ tokens[ 0 ].type ],\n+\t\timplicitRelative = leadingRelative || Expr.relative[ \" \" ],\n+\t\ti = leadingRelative ? 1 : 0,\n+\n+\t\t\/\/ The foundational matcher ensures that elements are reachable from top-level context(s)\n+\t\tmatchContext = addCombinator( function( elem ) {\n+\t\t\treturn elem === checkContext;\n+\t\t}, implicitRelative, true ),\n+\t\tmatchAnyContext = addCombinator( function( elem ) {\n+\t\t\treturn indexOf.call( checkContext, elem ) > -1;\n+\t\t}, implicitRelative, true ),\n+\t\tmatchers = [ function( elem, context, xml ) {\n+\n+\t\t\t\/\/ Support: IE 11+, Edge 17 - 18+\n+\t\t\t\/\/ IE\/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n+\t\t\t\/\/ two documents; shallow comparisons work.\n+\t\t\t\/\/ eslint-disable-next-line eqeqeq\n+\t\t\tvar ret = ( !leadingRelative && ( xml || context != outermostContext ) ) || (\n+\t\t\t\t( checkContext = context ).nodeType ?\n+\t\t\t\t\tmatchContext( elem, context, xml ) :\n+\t\t\t\t\tmatchAnyContext( elem, context, xml ) );\n+\n+\t\t\t\/\/ Avoid hanging onto element\n+\t\t\t\/\/ (see https:\/\/github.com\/jquery\/sizzle\/issues\/299)\n+\t\t\tcheckContext = null;\n+\t\t\treturn ret;\n+\t\t} ];\n+\n+\tfor ( ; i < len; i++ ) {\n+\t\tif ( ( matcher = Expr.relative[ tokens[ i ].type ] ) ) {\n+\t\t\tmatchers = [ addCombinator( elementMatcher( matchers ), matcher ) ];\n+\t\t} else {\n+\t\t\tmatcher = Expr.filter[ tokens[ i ].type ].apply( null, tokens[ i ].matches );\n+\n+\t\t\t\/\/ Return special upon seeing a positional matcher\n+\t\t\tif ( matcher[ expando ] ) {\n+\n+\t\t\t\t\/\/ Find the next relative operator (if any) for proper handling\n+\t\t\t\tj = ++i;\n+\t\t\t\tfor ( ; j < len; j++ ) {\n+\t\t\t\t\tif ( Expr.relative[ tokens[ j ].type ] ) {\n+\t\t\t\t\t\tbreak;\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t\treturn setMatcher(\n+\t\t\t\t\ti > 1 && elementMatcher( matchers ),\n+\t\t\t\t\ti > 1 && toSelector(\n+\n+\t\t\t\t\t\t\/\/ If the preceding token was a descendant combinator, insert an implicit any-element `*`\n+\t\t\t\t\t\ttokens.slice( 0, i - 1 )\n+\t\t\t\t\t\t\t.concat( { value: tokens[ i - 2 ].type === \" \" ? \"*\" : \"\" } )\n+\t\t\t\t\t).replace( rtrimCSS, \"$1\" ),\n+\t\t\t\t\tmatcher,\n+\t\t\t\t\ti < j && matcherFromTokens( tokens.slice( i, j ) ),\n+\t\t\t\t\tj < len && matcherFromTokens( ( tokens = tokens.slice( j ) ) ),\n+\t\t\t\t\tj < len && toSelector( tokens )\n+\t\t\t\t);\n+\t\t\t}\n+\t\t\tmatchers.push( matcher );\n+\t\t}\n+\t}\n+\n+\treturn elementMatcher( matchers );\n+}\n+\n+function matcherFromGroupMatchers( elementMatchers, setMatchers ) {\n+\tvar bySet = setMatchers.length > 0,\n+\t\tbyElement = elementMatchers.length > 0,\n+\t\tsuperMatcher = function( seed, context, xml, results, outermost ) {\n+\t\t\tvar elem, j, matcher,\n+\t\t\t\tmatchedCount = 0,\n+\t\t\t\ti = \"0\",\n+\t\t\t\tunmatched = seed && [],\n+\t\t\t\tsetMatched = [],\n+\t\t\t\tcontextBackup = outermostContext,\n+\n+\t\t\t\t\/\/ We must always have either seed elements or outermost context\n+\t\t\t\telems = seed || byElement && Expr.find.TAG( \"*\", outermost ),\n+\n+\t\t\t\t\/\/ Use integer dirruns iff this is the outermost matcher\n+\t\t\t\tdirrunsUnique = ( dirruns += contextBackup == null ? 1 : Math.random() || 0.1 ),\n+\t\t\t\tlen = elems.length;\n+\n+\t\t\tif ( outermost ) {\n+\n+\t\t\t\t\/\/ Support: IE 11+, Edge 17 - 18+\n+\t\t\t\t\/\/ IE\/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n+\t\t\t\t\/\/ two documents; shallow comparisons work.\n+\t\t\t\t\/\/ eslint-disable-next-line eqeqeq\n+\t\t\t\toutermostContext = context == document || context || outermost;\n+\t\t\t}\n+\n+\t\t\t\/\/ Add elements passing elementMatchers directly to results\n+\t\t\t\/\/ Support: iOS <=7 - 9 only\n+\t\t\t\/\/ Tolerate NodeList properties (IE: \"length\"; Safari: <number>) matching\n+\t\t\t\/\/ elements by id. (see trac-14142)\n+\t\t\tfor ( ; i !== len && ( elem = elems[ i ] ) != null; i++ ) {\n+\t\t\t\tif ( byElement && elem ) {\n+\t\t\t\t\tj = 0;\n+\n+\t\t\t\t\t\/\/ Support: IE 11+, Edge 17 - 18+\n+\t\t\t\t\t\/\/ IE\/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n+\t\t\t\t\t\/\/ two documents; shallow comparisons work.\n+\t\t\t\t\t\/\/ eslint-disable-next-line eqeqeq\n+\t\t\t\t\tif ( !context && elem.ownerDocument != document ) {\n+\t\t\t\t\t\tsetDocument( elem );\n+\t\t\t\t\t\txml = !documentIsHTML;\n+\t\t\t\t\t}\n+\t\t\t\t\twhile ( ( matcher = elementMatchers[ j++ ] ) ) {\n+\t\t\t\t\t\tif ( matcher( elem, context || document, xml ) ) {\n+\t\t\t\t\t\t\tpush.call( results, elem );\n+\t\t\t\t\t\t\tbreak;\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t\tif ( outermost ) {\n+\t\t\t\t\t\tdirruns = dirrunsUnique;\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\n+\t\t\t\t\/\/ Track unmatched elements for set filters\n+\t\t\t\tif ( bySet ) {\n+\n+\t\t\t\t\t\/\/ They will have gone through all possible matchers\n+\t\t\t\t\tif ( ( elem = !matcher && elem ) ) {\n+\t\t\t\t\t\tmatchedCount--;\n+\t\t\t\t\t}\n+\n+\t\t\t\t\t\/\/ Lengthen the array for every element, matched or not\n+\t\t\t\t\tif ( seed ) {\n+\t\t\t\t\t\tunmatched.push( elem );\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t}\n+\n+\t\t\t\/\/ `i` is now the count of elements visited above, and adding it to `matchedCount`\n+\t\t\t\/\/ makes the latter nonnegative.\n+\t\t\tmatchedCount += i;\n+\n+\t\t\t\/\/ Apply set filters to unmatched elements\n+\t\t\t\/\/ NOTE: This can be skipped if there are no unmatched elements (i.e., `matchedCount`\n+\t\t\t\/\/ equals `i`), unless we didn't visit _any_ elements in the above loop because we have\n+\t\t\t\/\/ no element matchers and no seed.\n+\t\t\t\/\/ Incrementing an initially-string \"0\" `i` allows `i` to remain a string only in that\n+\t\t\t\/\/ case, which will result in a \"00\" `matchedCount` that differs from `i` but is also\n+\t\t\t\/\/ numerically zero.\n+\t\t\tif ( bySet && i !== matchedCount ) {\n+\t\t\t\tj = 0;\n+\t\t\t\twhile ( ( matcher = setMatchers[ j++ ] ) ) {\n+\t\t\t\t\tmatcher( unmatched, setMatched, context, xml );\n+\t\t\t\t}\n+\n+\t\t\t\tif ( seed ) {\n+\n+\t\t\t\t\t\/\/ Reintegrate element matches to eliminate the need for sorting\n+\t\t\t\t\tif ( matchedCount > 0 ) {\n+\t\t\t\t\t\twhile ( i-- ) {\n+\t\t\t\t\t\t\tif ( !( unmatched[ i ] || setMatched[ i ] ) ) {\n+\t\t\t\t\t\t\t\tsetMatched[ i ] = pop.call( results );\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\n+\t\t\t\t\t\/\/ Discard index placeholder values to get only actual matches\n+\t\t\t\t\tsetMatched = condense( setMatched );\n+\t\t\t\t}\n+\n+\t\t\t\t\/\/ Add matches to results\n+\t\t\t\tpush.apply( results, setMatched );\n+\n+\t\t\t\t\/\/ Seedless set matches succeeding multiple successful matchers stipulate sorting\n+\t\t\t\tif ( outermost && !seed && setMatched.length > 0 &&\n+\t\t\t\t\t( matchedCount + setMatchers.length ) > 1 ) {\n+\n+\t\t\t\t\tjQuery.uniqueSort( results );\n+\t\t\t\t}\n+\t\t\t}\n+\n+\t\t\t\/\/ Override manipulation of globals by nested matchers\n+\t\t\tif ( outermost ) {\n+\t\t\t\tdirruns = dirrunsUnique;\n+\t\t\t\toutermostContext = contextBackup;\n+\t\t\t}\n+\n+\t\t\treturn unmatched;\n+\t\t};\n+\n+\treturn bySet ?\n+\t\tmarkFunction( superMatcher ) :\n+\t\tsuperMatcher;\n+}\n+\n+function compile( selector, match \/* Internal Use Only *\/ ) {\n+\tvar i,\n+\t\tsetMatchers = [],\n+\t\telementMatchers = [],\n+\t\tcached = compilerCache[ selector + \" \" ];\n+\n+\tif ( !cached ) {\n+\n+\t\t\/\/ Generate a function of recursive functions that can be used to check each element\n+\t\tif ( !match ) {\n+\t\t\tmatch = tokenize( selector );\n+\t\t}\n+\t\ti = match.length;\n+\t\twhile ( i-- ) {\n+\t\t\tcached = matcherFromTokens( match[ i ] );\n+\t\t\tif ( cached[ expando ] ) {\n+\t\t\t\tsetMatchers.push( cached );\n+\t\t\t} else {\n+\t\t\t\telementMatchers.push( cached );\n+\t\t\t}\n+\t\t}\n+\n+\t\t\/\/ Cache the compiled function\n+\t\tcached = compilerCache( selector,\n+\t\t\tmatcherFromGroupMatchers( elementMatchers, setMatchers ) );\n+\n+\t\t\/\/ Save selector and tokenization\n+\t\tcached.selector = selector;\n+\t}\n+\treturn cached;\n+}\n+\n+\/**\n+ * A low-level selection function that works with jQuery's compiled\n+ *  selector functions\n+ * @param {String|Function} selector A selector or a pre-compiled\n+ *  selector function built with jQuery selector compile\n+ * @param {Element} context\n+ * @param {Array} [results]\n+ * @param {Array} [seed] A set of elements to match against\n+ *\/\n+function select( selector, context, results, seed ) {\n+\tvar i, tokens, token, type, find,\n+\t\tcompiled = typeof selector === \"function\" && selector,\n+\t\tmatch = !seed && tokenize( ( selector = compiled.selector || selector ) );\n+\n+\tresults = results || [];\n+\n+\t\/\/ Try to minimize operations if there is only one selector in the list and no seed\n+\t\/\/ (the latter of which guarantees us context)\n+\tif ( match.length === 1 ) {\n+\n+\t\t\/\/ Reduce context if the leading compound selector is an ID\n+\t\ttokens = match[ 0 ] = match[ 0 ].slice( 0 );\n+\t\tif ( tokens.length > 2 && ( token = tokens[ 0 ] ).type === \"ID\" &&\n+\t\t\t\tcontext.nodeType === 9 && documentIsHTML && Expr.relative[ tokens[ 1 ].type ] ) {\n+\n+\t\t\tcontext = ( Expr.find.ID(\n+\t\t\t\ttoken.matches[ 0 ].replace( runescape, funescape ),\n+\t\t\t\tcontext\n+\t\t\t) || [] )[ 0 ];\n+\t\t\tif ( !context ) {\n+\t\t\t\treturn results;\n+\n+\t\t\t\/\/ Precompiled matchers will still verify ancestry, so step up a level\n+\t\t\t} else if ( compiled ) {\n+\t\t\t\tcontext = context.parentNode;\n+\t\t\t}\n+\n+\t\t\tselector = selector.slice( tokens.shift().value.length );\n+\t\t}\n+\n+\t\t\/\/ Fetch a seed set for right-to-left matching\n+\t\ti = matchExpr.needsContext.test( selector ) ? 0 : tokens.length;\n+\t\twhile ( i-- ) {\n+\t\t\ttoken = tokens[ i ];\n+\n+\t\t\t\/\/ Abort if we hit a combinator\n+\t\t\tif ( Expr.relative[ ( type = token.type ) ] ) {\n+\t\t\t\tbreak;\n+\t\t\t}\n+\t\t\tif ( ( find = Expr.find[ type ] ) ) {\n+\n+\t\t\t\t\/\/ Search, expanding context for leading sibling combinators\n+\t\t\t\tif ( ( seed = find(\n+\t\t\t\t\ttoken.matches[ 0 ].replace( runescape, funescape ),\n+\t\t\t\t\trsibling.test( tokens[ 0 ].type ) &&\n+\t\t\t\t\t\ttestContext( context.parentNode ) || context\n+\t\t\t\t) ) ) {\n+\n+\t\t\t\t\t\/\/ If seed is empty or no tokens remain, we can return early\n+\t\t\t\t\ttokens.splice( i, 1 );\n+\t\t\t\t\tselector = seed.length && toSelector( tokens );\n+\t\t\t\t\tif ( !selector ) {\n+\t\t\t\t\t\tpush.apply( results, seed );\n+\t\t\t\t\t\treturn results;\n+\t\t\t\t\t}\n+\n+\t\t\t\t\tbreak;\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\t}\n+\n+\t\/\/ Compile and execute a filtering function if one is not provided\n+\t\/\/ Provide `match` to avoid retokenization if we modified the selector above\n+\t( compiled || compile( selector, match ) )(\n+\t\tseed,\n+\t\tcontext,\n+\t\t!documentIsHTML,\n+\t\tresults,\n+\t\t!context || rsibling.test( selector ) && testContext( context.parentNode ) || context\n+\t);\n+\treturn results;\n+}\n+\n+\/\/ One-time assignments\n+\n+\/\/ Support: Android <=4.0 - 4.1+\n+\/\/ Sort stability\n+support.sortStable = expando.split( \"\" ).sort( sortOrder ).join( \"\" ) === expando;\n+\n+\/\/ Initialize against the default document\n+setDocument();\n+\n+\/\/ Support: Android <=4.0 - 4.1+\n+\/\/ Detached nodes confoundingly follow *each other*\n+support.sortDetached = assert( function( el ) {\n+\n+\t\/\/ Should return 1, but returns 4 (following)\n+\treturn el.compareDocumentPosition( document.createElement( \"fieldset\" ) ) & 1;\n+} );\n+\n+jQuery.find = find;\n+\n+\/\/ Deprecated\n+jQuery.expr[ \":\" ] = jQuery.expr.pseudos;\n+jQuery.unique = jQuery.uniqueSort;\n+\n+\/\/ These have always been private, but they used to be documented as part of\n+\/\/ Sizzle so let's maintain them for now for backwards compatibility purposes.\n+find.compile = compile;\n+find.select = select;\n+find.setDocument = setDocument;\n+find.tokenize = tokenize;\n+\n+find.escape = jQuery.escapeSelector;\n+find.getText = jQuery.text;\n+find.isXML = jQuery.isXMLDoc;\n+find.selectors = jQuery.expr;\n+find.support = jQuery.support;\n+find.uniqueSort = jQuery.uniqueSort;\n+\n+\t\/* eslint-enable *\/\n+\n+} )();\n+\n+\n+var dir = function( elem, dir, until ) {\n+\tvar matched = [],\n+\t\ttruncate = until !== undefined;\n+\n+\twhile ( ( elem = elem[ dir ] ) && elem.nodeType !== 9 ) {\n+\t\tif ( elem.nodeType === 1 ) {\n+\t\t\tif ( truncate && jQuery( elem ).is( until ) ) {\n+\t\t\t\tbreak;\n+\t\t\t}\n+\t\t\tmatched.push( elem );\n+\t\t}\n+\t}\n+\treturn matched;\n+};\n+\n+\n+var siblings = function( n, elem ) {\n+\tvar matched = [];\n+\n+\tfor ( ; n; n = n.nextSibling ) {\n+\t\tif ( n.nodeType === 1 && n !== elem ) {\n+\t\t\tmatched.push( n );\n+\t\t}\n+\t}\n+\n+\treturn matched;\n+};\n+\n+\n+var rneedsContext = jQuery.expr.match.needsContext;\n+\n+var rsingleTag = ( \/^<([a-z][^\\\/\\0>:\\x20\\t\\r\\n\\f]*)[\\x20\\t\\r\\n\\f]*\\\/?>(?:<\\\/\\1>|)$\/i );\n+\n+\n+\n+\/\/ Implement the identical functionality for filter and not\n+function winnow( elements, qualifier, not ) {\n+\tif ( isFunction( qualifier ) ) {\n+\t\treturn jQuery.grep( elements, function( elem, i ) {\n+\t\t\treturn !!qualifier.call( elem, i, elem ) !== not;\n+\t\t} );\n+\t}\n+\n+\t\/\/ Single element\n+\tif ( qualifier.nodeType ) {\n+\t\treturn jQuery.grep( elements, function( elem ) {\n+\t\t\treturn ( elem === qualifier ) !== not;\n+\t\t} );\n+\t}\n+\n+\t\/\/ Arraylike of elements (jQuery, arguments, Array)\n+\tif ( typeof qualifier !== \"string\" ) {\n+\t\treturn jQuery.grep( elements, function( elem ) {\n+\t\t\treturn ( indexOf.call( qualifier, elem ) > -1 ) !== not;\n+\t\t} );\n+\t}\n+\n+\t\/\/ Filtered directly for both simple and complex selectors\n+\treturn jQuery.filter( qualifier, elements, not );\n+}\n+\n+jQuery.filter = function( expr, elems, not ) {\n+\tvar elem = elems[ 0 ];\n+\n+\tif ( not ) {\n+\t\texpr = \":not(\" + expr + \")\";\n+\t}\n+\n+\tif ( elems.length === 1 && elem.nodeType === 1 ) {\n+\t\treturn jQuery.find.matchesSelector( elem, expr ) ? [ elem ] : [];\n+\t}\n+\n+\treturn jQuery.find.matches( expr, jQuery.grep( elems, function( elem ) {\n+\t\treturn elem.nodeType === 1;\n+\t} ) );\n+};\n+\n+jQuery.fn.extend( {\n+\tfind: function( selector ) {\n+\t\tvar i, ret,\n+\t\t\tlen = this.length,\n+\t\t\tself = this;\n+\n+\t\tif ( typeof selector !== \"string\" ) {\n+\t\t\treturn this.pushStack( jQuery( selector ).filter( function() {\n+\t\t\t\tfor ( i = 0; i < len; i++ ) {\n+\t\t\t\t\tif ( jQuery.contains( self[ i ], this ) ) {\n+\t\t\t\t\t\treturn true;\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t} ) );\n+\t\t}\n+\n+\t\tret = this.pushStack( [] );\n+\n+\t\tfor ( i = 0; i < len; i++ ) {\n+\t\t\tjQuery.find( selector, self[ i ], ret );\n+\t\t}\n+\n+\t\treturn len > 1 ? jQuery.uniqueSort( ret ) : ret;\n+\t},\n+\tfilter: function( selector ) {\n+\t\treturn this.pushStack( winnow( this, selector || [], false ) );\n+\t},\n+\tnot: function( selector ) {\n+\t\treturn this.pushStack( winnow( this, selector || [], true ) );\n+\t},\n+\tis: function( selector ) {\n+\t\treturn !!winnow(\n+\t\t\tthis,\n+\n+\t\t\t\/\/ If this is a positional\/relative selector, check membership in the returned set\n+\t\t\t\/\/ so $(\"p:first\").is(\"p:last\") won't return true for a doc with two \"p\".\n+\t\t\ttypeof selector === \"string\" && rneedsContext.test( selector ) ?\n+\t\t\t\tjQuery( selector ) :\n+\t\t\t\tselector || [],\n+\t\t\tfalse\n+\t\t).length;\n+\t}\n+} );\n+\n+\n+\/\/ Initialize a jQuery object\n+\n+\n+\/\/ A central reference to the root jQuery(document)\n+var rootjQuery,\n+\n+\t\/\/ A simple way to check for HTML strings\n+\t\/\/ Prioritize #id over <tag> to avoid XSS via location.hash (trac-9521)\n+\t\/\/ Strict HTML recognition (trac-11290: must start with <)\n+\t\/\/ Shortcut simple #id case for speed\n+\trquickExpr = \/^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]+))$\/,\n+\n+\tinit = jQuery.fn.init = function( selector, context, root ) {\n+\t\tvar match, elem;\n+\n+\t\t\/\/ HANDLE: $(\"\"), $(null), $(undefined), $(false)\n+\t\tif ( !selector ) {\n+\t\t\treturn this;\n+\t\t}\n+\n+\t\t\/\/ Method init() accepts an alternate rootjQuery\n+\t\t\/\/ so migrate can support jQuery.sub (gh-2101)\n+\t\troot = root || rootjQuery;\n+\n+\t\t\/\/ Handle HTML strings\n+\t\tif ( typeof selector === \"string\" ) {\n+\t\t\tif ( selector[ 0 ] === \"<\" &&\n+\t\t\t\tselector[ selector.length - 1 ] === \">\" &&\n+\t\t\t\tselector.length >= 3 ) {\n+\n+\t\t\t\t\/\/ Assume that strings that start and end with <> are HTML and skip the regex check\n+\t\t\t\tmatch = [ null, selector, null ];\n+\n+\t\t\t} else {\n+\t\t\t\tmatch = rquickExpr.exec( selector );\n+\t\t\t}\n+\n+\t\t\t\/\/ Match html or make sure no context is specified for #id\n+\t\t\tif ( match && ( match[ 1 ] || !context ) ) {\n+\n+\t\t\t\t\/\/ HANDLE: $(html) -> $(array)\n+\t\t\t\tif ( match[ 1 ] ) {\n+\t\t\t\t\tcontext = context instanceof jQuery ? context[ 0 ] : context;\n+\n+\t\t\t\t\t\/\/ Option to run scripts is true for back-compat\n+\t\t\t\t\t\/\/ Intentionally let the error be thrown if parseHTML is not present\n+\t\t\t\t\tjQuery.merge( this, jQuery.parseHTML(\n+\t\t\t\t\t\tmatch[ 1 ],\n+\t\t\t\t\t\tcontext && context.nodeType ? context.ownerDocument || context : document,\n+\t\t\t\t\t\ttrue\n+\t\t\t\t\t) );\n+\n+\t\t\t\t\t\/\/ HANDLE: $(html, props)\n+\t\t\t\t\tif ( rsingleTag.test( match[ 1 ] ) && jQuery.isPlainObject( context ) ) {\n+\t\t\t\t\t\tfor ( match in context ) {\n+\n+\t\t\t\t\t\t\t\/\/ Properties of context are called as methods if possible\n+\t\t\t\t\t\t\tif ( isFunction( this[ match ] ) ) {\n+\t\t\t\t\t\t\t\tthis[ match ]( context[ match ] );\n+\n+\t\t\t\t\t\t\t\/\/ ...and otherwise set as attributes\n+\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\tthis.attr( match, context[ match ] );\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\n+\t\t\t\t\treturn this;\n+\n+\t\t\t\t\/\/ HANDLE: $(#id)\n+\t\t\t\t} else {\n+\t\t\t\t\telem = document.getElementById( match[ 2 ] );\n+\n+\t\t\t\t\tif ( elem ) {\n+\n+\t\t\t\t\t\t\/\/ Inject the element directly into the jQuery object\n+\t\t\t\t\t\tthis[ 0 ] = elem;\n+\t\t\t\t\t\tthis.length = 1;\n+\t\t\t\t\t}\n+\t\t\t\t\treturn this;\n+\t\t\t\t}\n+\n+\t\t\t\/\/ HANDLE: $(expr, $(...))\n+\t\t\t} else if ( !context || context.jquery ) {\n+\t\t\t\treturn ( context || root ).find( selector );\n+\n+\t\t\t\/\/ HANDLE: $(expr, context)\n+\t\t\t\/\/ (which is just equivalent to: $(context).find(expr)\n+\t\t\t} else {\n+\t\t\t\treturn this.constructor( context ).find( selector );\n+\t\t\t}\n+\n+\t\t\/\/ HANDLE: $(DOMElement)\n+\t\t} else if ( selector.nodeType ) {\n+\t\t\tthis[ 0 ] = selector;\n+\t\t\tthis.length = 1;\n+\t\t\treturn this;\n+\n+\t\t\/\/ HANDLE: $(function)\n+\t\t\/\/ Shortcut for document ready\n+\t\t} else if ( isFunction( selector ) ) {\n+\t\t\treturn root.ready !== undefined ?\n+\t\t\t\troot.ready( selector ) :\n+\n+\t\t\t\t\/\/ Execute immediately if ready is not present\n+\t\t\t\tselector( jQuery );\n+\t\t}\n+\n+\t\treturn jQuery.makeArray( selector, this );\n+\t};\n+\n+\/\/ Give the init function the jQuery prototype for later instantiation\n+init.prototype = jQuery.fn;\n+\n+\/\/ Initialize central reference\n+rootjQuery = jQuery( document );\n+\n+\n+var rparentsprev = \/^(?:parents|prev(?:Until|All))\/,\n+\n+\t\/\/ Methods guaranteed to produce a unique set when starting from a unique set\n+\tguaranteedUnique = {\n+\t\tchildren: true,\n+\t\tcontents: true,\n+\t\tnext: true,\n+\t\tprev: true\n+\t};\n+\n+jQuery.fn.extend( {\n+\thas: function( target ) {\n+\t\tvar targets = jQuery( target, this ),\n+\t\t\tl = targets.length;\n+\n+\t\treturn this.filter( function() {\n+\t\t\tvar i = 0;\n+\t\t\tfor ( ; i < l; i++ ) {\n+\t\t\t\tif ( jQuery.contains( this, targets[ i ] ) ) {\n+\t\t\t\t\treturn true;\n+\t\t\t\t}\n+\t\t\t}\n+\t\t} );\n+\t},\n+\n+\tclosest: function( selectors, context ) {\n+\t\tvar cur,\n+\t\t\ti = 0,\n+\t\t\tl = this.length,\n+\t\t\tmatched = [],\n+\t\t\ttargets = typeof selectors !== \"string\" && jQuery( selectors );\n+\n+\t\t\/\/ Positional selectors never match, since there's no _selection_ context\n+\t\tif ( !rneedsContext.test( selectors ) ) {\n+\t\t\tfor ( ; i < l; i++ ) {\n+\t\t\t\tfor ( cur = this[ i ]; cur && cur !== context; cur = cur.parentNode ) {\n+\n+\t\t\t\t\t\/\/ Always skip document fragments\n+\t\t\t\t\tif ( cur.nodeType < 11 && ( targets ?\n+\t\t\t\t\t\ttargets.index( cur ) > -1 :\n+\n+\t\t\t\t\t\t\/\/ Don't pass non-elements to jQuery#find\n+\t\t\t\t\t\tcur.nodeType === 1 &&\n+\t\t\t\t\t\t\tjQuery.find.matchesSelector( cur, selectors ) ) ) {\n+\n+\t\t\t\t\t\tmatched.push( cur );\n+\t\t\t\t\t\tbreak;\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\n+\t\treturn this.pushStack( matched.length > 1 ? jQuery.uniqueSort( matched ) : matched );\n+\t},\n+\n+\t\/\/ Determine the position of an element within the set\n+\tindex: function( elem ) {\n+\n+\t\t\/\/ No argument, return index in parent\n+\t\tif ( !elem ) {\n+\t\t\treturn ( this[ 0 ] && this[ 0 ].parentNode ) ? this.first().prevAll().length : -1;\n+\t\t}\n+\n+\t\t\/\/ Index in selector\n+\t\tif ( typeof elem === \"string\" ) {\n+\t\t\treturn indexOf.call( jQuery( elem ), this[ 0 ] );\n+\t\t}\n+\n+\t\t\/\/ Locate the position of the desired element\n+\t\treturn indexOf.call( this,\n+\n+\t\t\t\/\/ If it receives a jQuery object, the first element is used\n+\t\t\telem.jquery ? elem[ 0 ] : elem\n+\t\t);\n+\t},\n+\n+\tadd: function( selector, context ) {\n+\t\treturn this.pushStack(\n+\t\t\tjQuery.uniqueSort(\n+\t\t\t\tjQuery.merge( this.get(), jQuery( selector, context ) )\n+\t\t\t)\n+\t\t);\n+\t},\n+\n+\taddBack: function( selector ) {\n+\t\treturn this.add( selector == null ?\n+\t\t\tthis.prevObject : this.prevObject.filter( selector )\n+\t\t);\n+\t}\n+} );\n+\n+function sibling( cur, dir ) {\n+\twhile ( ( cur = cur[ dir ] ) && cur.nodeType !== 1 ) {}\n+\treturn cur;\n+}\n+\n+jQuery.each( {\n+\tparent: function( elem ) {\n+\t\tvar parent = elem.parentNode;\n+\t\treturn parent && parent.nodeType !== 11 ? parent : null;\n+\t},\n+\tparents: function( elem ) {\n+\t\treturn dir( elem, \"parentNode\" );\n+\t},\n+\tparentsUntil: function( elem, _i, until ) {\n+\t\treturn dir( elem, \"parentNode\", until );\n+\t},\n+\tnext: function( elem ) {\n+\t\treturn sibling( elem, \"nextSibling\" );\n+\t},\n+\tprev: function( elem ) {\n+\t\treturn sibling( elem, \"previousSibling\" );\n+\t},\n+\tnextAll: function( elem ) {\n+\t\treturn dir( elem, \"nextSibling\" );\n+\t},\n+\tprevAll: function( elem ) {\n+\t\treturn dir( elem, \"previousSibling\" );\n+\t},\n+\tnextUntil: function( elem, _i, until ) {\n+\t\treturn dir( elem, \"nextSibling\", until );\n+\t},\n+\tprevUntil: function( elem, _i, until ) {\n+\t\treturn dir( elem, \"previousSibling\", until );\n+\t},\n+\tsiblings: function( elem ) {\n+\t\treturn siblings( ( elem.parentNode || {} ).firstChild, elem );\n+\t},\n+\tchildren: function( elem ) {\n+\t\treturn siblings( elem.firstChild );\n+\t},\n+\tcontents: function( elem ) {\n+\t\tif ( elem.contentDocument != null &&\n+\n+\t\t\t\/\/ Support: IE 11+\n+\t\t\t\/\/ <object> elements with no `data` attribute has an object\n+\t\t\t\/\/ `contentDocument` with a `null` prototype.\n+\t\t\tgetProto( elem.contentDocument ) ) {\n+\n+\t\t\treturn elem.contentDocument;\n+\t\t}\n+\n+\t\t\/\/ Support: IE 9 - 11 only, iOS 7 only, Android Browser <=4.3 only\n+\t\t\/\/ Treat the template element as a regular one in browsers that\n+\t\t\/\/ don't support it.\n+\t\tif ( nodeName( elem, \"template\" ) ) {\n+\t\t\telem = elem.content || elem;\n+\t\t}\n+\n+\t\treturn jQuery.merge( [], elem.childNodes );\n+\t}\n+}, function( name, fn ) {\n+\tjQuery.fn[ name ] = function( until, selector ) {\n+\t\tvar matched = jQuery.map( this, fn, until );\n+\n+\t\tif ( name.slice( -5 ) !== \"Until\" ) {\n+\t\t\tselector = until;\n+\t\t}\n+\n+\t\tif ( selector && typeof selector === \"string\" ) {\n+\t\t\tmatched = jQuery.filter( selector, matched );\n+\t\t}\n+\n+\t\tif ( this.length > 1 ) {\n+\n+\t\t\t\/\/ Remove duplicates\n+\t\t\tif ( !guaranteedUnique[ name ] ) {\n+\t\t\t\tjQuery.uniqueSort( matched );\n+\t\t\t}\n+\n+\t\t\t\/\/ Reverse order for parents* and prev-derivatives\n+\t\t\tif ( rparentsprev.test( name ) ) {\n+\t\t\t\tmatched.reverse();\n+\t\t\t}\n+\t\t}\n+\n+\t\treturn this.pushStack( matched );\n+\t};\n+} );\n+var rnothtmlwhite = ( \/[^\\x20\\t\\r\\n\\f]+\/g );\n+\n+\n+\n+\/\/ Convert String-formatted options into Object-formatted ones\n+function createOptions( options ) {\n+\tvar object = {};\n+\tjQuery.each( options.match( rnothtmlwhite ) || [], function( _, flag ) {\n+\t\tobject[ flag ] = true;\n+\t} );\n+\treturn object;\n+}\n+\n+\/*\n+ * Create a callback list using the following parameters:\n+ *\n+ *\toptions: an optional list of space-separated options that will change how\n+ *\t\t\tthe callback list behaves or a more traditional option object\n+ *\n+ * By default a callback list will act like an event callback list and can be\n+ * \"fired\" multiple times.\n+ *\n+ * Possible options:\n+ *\n+ *\tonce:\t\t\twill ensure the callback list can only be fired once (like a Deferred)\n+ *\n+ *\tmemory:\t\t\twill keep track of previous values and will call any callback added\n+ *\t\t\t\t\tafter the list has been fired right away with the latest \"memorized\"\n+ *\t\t\t\t\tvalues (like a Deferred)\n+ *\n+ *\tunique:\t\t\twill ensure a callback can only be added once (no duplicate in the list)\n+ *\n+ *\tstopOnFalse:\tinterrupt callings when a callback returns false\n+ *\n+ *\/\n+jQuery.Callbacks = function( options ) {\n+\n+\t\/\/ Convert options from String-formatted to Object-formatted if needed\n+\t\/\/ (we check in cache first)\n+\toptions = typeof options === \"string\" ?\n+\t\tcreateOptions( options ) :\n+\t\tjQuery.extend( {}, options );\n+\n+\tvar \/\/ Flag to know if list is currently firing\n+\t\tfiring,\n+\n+\t\t\/\/ Last fire value for non-forgettable lists\n+\t\tmemory,\n+\n+\t\t\/\/ Flag to know if list was already fired\n+\t\tfired,\n+\n+\t\t\/\/ Flag to prevent firing\n+\t\tlocked,\n+\n+\t\t\/\/ Actual callback list\n+\t\tlist = [],\n+\n+\t\t\/\/ Queue of execution data for repeatable lists\n+\t\tqueue = [],\n+\n+\t\t\/\/ Index of currently firing callback (modified by add\/remove as needed)\n+\t\tfiringIndex = -1,\n+\n+\t\t\/\/ Fire callbacks\n+\t\tfire = function() {\n+\n+\t\t\t\/\/ Enforce single-firing\n+\t\t\tlocked = locked || options.once;\n+\n+\t\t\t\/\/ Execute callbacks for all pending executions,\n+\t\t\t\/\/ respecting firingIndex overrides and runtime changes\n+\t\t\tfired = firing = true;\n+\t\t\tfor ( ; queue.length; firingIndex = -1 ) {\n+\t\t\t\tmemory = queue.shift();\n+\t\t\t\twhile ( ++firingIndex < list.length ) {\n+\n+\t\t\t\t\t\/\/ Run callback and check for early termination\n+\t\t\t\t\tif ( list[ firingIndex ].apply( memory[ 0 ], memory[ 1 ] ) === false &&\n+\t\t\t\t\t\toptions.stopOnFalse ) {\n+\n+\t\t\t\t\t\t\/\/ Jump to end and forget the data so .add doesn't re-fire\n+\t\t\t\t\t\tfiringIndex = list.length;\n+\t\t\t\t\t\tmemory = false;\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t}\n+\n+\t\t\t\/\/ Forget the data if we're done with it\n+\t\t\tif ( !options.memory ) {\n+\t\t\t\tmemory = false;\n+\t\t\t}\n+\n+\t\t\tfiring = false;\n+\n+\t\t\t\/\/ Clean up if we're done firing for good\n+\t\t\tif ( locked ) {\n+\n+\t\t\t\t\/\/ Keep an empty list if we have data for future add calls\n+\t\t\t\tif ( memory ) {\n+\t\t\t\t\tlist = [];\n+\n+\t\t\t\t\/\/ Otherwise, this object is spent\n+\t\t\t\t} else {\n+\t\t\t\t\tlist = \"\";\n+\t\t\t\t}\n+\t\t\t}\n+\t\t},\n+\n+\t\t\/\/ Actual Callbacks object\n+\t\tself = {\n+\n+\t\t\t\/\/ Add a callback or a collection of callbacks to the list\n+\t\t\tadd: function() {\n+\t\t\t\tif ( list ) {\n+\n+\t\t\t\t\t\/\/ If we have memory from a past run, we should fire after adding\n+\t\t\t\t\tif ( memory && !firing ) {\n+\t\t\t\t\t\tfiringIndex = list.length - 1;\n+\t\t\t\t\t\tqueue.push( memory );\n+\t\t\t\t\t}\n+\n+\t\t\t\t\t( function add( args ) {\n+\t\t\t\t\t\tjQuery.each( args, function( _, arg ) {\n+\t\t\t\t\t\t\tif ( isFunction( arg ) ) {\n+\t\t\t\t\t\t\t\tif ( !options.unique || !self.has( arg ) ) {\n+\t\t\t\t\t\t\t\t\tlist.push( arg );\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t} else if ( arg && arg.length && toType( arg ) !== \"string\" ) {\n+\n+\t\t\t\t\t\t\t\t\/\/ Inspect recursively\n+\t\t\t\t\t\t\t\tadd( arg );\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t} );\n+\t\t\t\t\t} )( arguments );\n+\n+\t\t\t\t\tif ( memory && !firing ) {\n+\t\t\t\t\t\tfire();\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t\treturn this;\n+\t\t\t},\n+\n+\t\t\t\/\/ Remove a callback from the list\n+\t\t\tremove: function() {\n+\t\t\t\tjQuery.each( arguments, function( _, arg ) {\n+\t\t\t\t\tvar index;\n+\t\t\t\t\twhile ( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {\n+\t\t\t\t\t\tlist.splice( index, 1 );\n+\n+\t\t\t\t\t\t\/\/ Handle firing indexes\n+\t\t\t\t\t\tif ( index <= firingIndex ) {\n+\t\t\t\t\t\t\tfiringIndex--;\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t} );\n+\t\t\t\treturn this;\n+\t\t\t},\n+\n+\t\t\t\/\/ Check if a given callback is in the list.\n+\t\t\t\/\/ If no argument is given, return whether or not list has callbacks attached.\n+\t\t\thas: function( fn ) {\n+\t\t\t\treturn fn ?\n+\t\t\t\t\tjQuery.inArray( fn, list ) > -1 :\n+\t\t\t\t\tlist.length > 0;\n+\t\t\t},\n+\n+\t\t\t\/\/ Remove all callbacks from the list\n+\t\t\tempty: function() {\n+\t\t\t\tif ( list ) {\n+\t\t\t\t\tlist = [];\n+\t\t\t\t}\n+\t\t\t\treturn this;\n+\t\t\t},\n+\n+\t\t\t\/\/ Disable .fire and .add\n+\t\t\t\/\/ Abort any current\/pending executions\n+\t\t\t\/\/ Clear all callbacks and values\n+\t\t\tdisable: function() {\n+\t\t\t\tlocked = queue = [];\n+\t\t\t\tlist = memory = \"\";\n+\t\t\t\treturn this;\n+\t\t\t},\n+\t\t\tdisabled: function() {\n+\t\t\t\treturn !list;\n+\t\t\t},\n+\n+\t\t\t\/\/ Disable .fire\n+\t\t\t\/\/ Also disable .add unless we have memory (since it would have no effect)\n+\t\t\t\/\/ Abort any pending executions\n+\t\t\tlock: function() {\n+\t\t\t\tlocked = queue = [];\n+\t\t\t\tif ( !memory && !firing ) {\n+\t\t\t\t\tlist = memory = \"\";\n+\t\t\t\t}\n+\t\t\t\treturn this;\n+\t\t\t},\n+\t\t\tlocked: function() {\n+\t\t\t\treturn !!locked;\n+\t\t\t},\n+\n+\t\t\t\/\/ Call all callbacks with the given context and arguments\n+\t\t\tfireWith: function( context, args ) {\n+\t\t\t\tif ( !locked ) {\n+\t\t\t\t\targs = args || [];\n+\t\t\t\t\targs = [ context, args.slice ? args.slice() : args ];\n+\t\t\t\t\tqueue.push( args );\n+\t\t\t\t\tif ( !firing ) {\n+\t\t\t\t\t\tfire();\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t\treturn this;\n+\t\t\t},\n+\n+\t\t\t\/\/ Call all the callbacks with the given arguments\n+\t\t\tfire: function() {\n+\t\t\t\tself.fireWith( this, arguments );\n+\t\t\t\treturn this;\n+\t\t\t},\n+\n+\t\t\t\/\/ To know if the callbacks have already been called at least once\n+\t\t\tfired: function() {\n+\t\t\t\treturn !!fired;\n+\t\t\t}\n+\t\t};\n+\n+\treturn self;\n+};\n+\n+\n+function Identity( v ) {\n+\treturn v;\n+}\n+function Thrower( ex ) {\n+\tthrow ex;\n+}\n+\n+function adoptValue( value, resolve, reject, noValue ) {\n+\tvar method;\n+\n+\ttry {\n+\n+\t\t\/\/ Check for promise aspect first to privilege synchronous behavior\n+\t\tif ( value && isFunction( ( method = value.promise ) ) ) {\n+\t\t\tmethod.call( value ).done( resolve ).fail( reject );\n+\n+\t\t\/\/ Other thenables\n+\t\t} else if ( value && isFunction( ( method = value.then ) ) ) {\n+\t\t\tmethod.call( value, resolve, reject );\n+\n+\t\t\/\/ Other non-thenables\n+\t\t} else {\n+\n+\t\t\t\/\/ Control `resolve` arguments by letting Array#slice cast boolean `noValue` to integer:\n+\t\t\t\/\/ * false: [ value ].slice( 0 ) => resolve( value )\n+\t\t\t\/\/ * true: [ value ].slice( 1 ) => resolve()\n+\t\t\tresolve.apply( undefined, [ value ].slice( noValue ) );\n+\t\t}\n+\n+\t\/\/ For Promises\/A+, convert exceptions into rejections\n+\t\/\/ Since jQuery.when doesn't unwrap thenables, we can skip the extra checks appearing in\n+\t\/\/ Deferred#then to conditionally suppress rejection.\n+\t} catch ( value ) {\n+\n+\t\t\/\/ Support: Android 4.0 only\n+\t\t\/\/ Strict mode functions invoked without .call\/.apply get global-object context\n+\t\treject.apply( undefined, [ value ] );\n+\t}\n+}\n+\n+jQuery.extend( {\n+\n+\tDeferred: function( func ) {\n+\t\tvar tuples = [\n+\n+\t\t\t\t\/\/ action, add listener, callbacks,\n+\t\t\t\t\/\/ ... .then handlers, argument index, [final state]\n+\t\t\t\t[ \"notify\", \"progress\", jQuery.Callbacks( \"memory\" ),\n+\t\t\t\t\tjQuery.Callbacks( \"memory\" ), 2 ],\n+\t\t\t\t[ \"resolve\", \"done\", jQuery.Callbacks( \"once memory\" ),\n+\t\t\t\t\tjQuery.Callbacks( \"once memory\" ), 0, \"resolved\" ],\n+\t\t\t\t[ \"reject\", \"fail\", jQuery.Callbacks( \"once memory\" ),\n+\t\t\t\t\tjQuery.Callbacks( \"once memory\" ), 1, \"rejected\" ]\n+\t\t\t],\n+\t\t\tstate = \"pending\",\n+\t\t\tpromise = {\n+\t\t\t\tstate: function() {\n+\t\t\t\t\treturn state;\n+\t\t\t\t},\n+\t\t\t\talways: function() {\n+\t\t\t\t\tdeferred.done( arguments ).fail( arguments );\n+\t\t\t\t\treturn this;\n+\t\t\t\t},\n+\t\t\t\t\"catch\": function( fn ) {\n+\t\t\t\t\treturn promise.then( null, fn );\n+\t\t\t\t},\n+\n+\t\t\t\t\/\/ Keep pipe for back-compat\n+\t\t\t\tpipe: function( \/* fnDone, fnFail, fnProgress *\/ ) {\n+\t\t\t\t\tvar fns = arguments;\n+\n+\t\t\t\t\treturn jQuery.Deferred( function( newDefer ) {\n+\t\t\t\t\t\tjQuery.each( tuples, function( _i, tuple ) {\n+\n+\t\t\t\t\t\t\t\/\/ Map tuples (progress, done, fail) to arguments (done, fail, progress)\n+\t\t\t\t\t\t\tvar fn = isFunction( fns[ tuple[ 4 ] ] ) && fns[ tuple[ 4 ] ];\n+\n+\t\t\t\t\t\t\t\/\/ deferred.progress(function() { bind to newDefer or newDefer.notify })\n+\t\t\t\t\t\t\t\/\/ deferred.done(function() { bind to newDefer or newDefer.resolve })\n+\t\t\t\t\t\t\t\/\/ deferred.fail(function() { bind to newDefer or newDefer.reject })\n+\t\t\t\t\t\t\tdeferred[ tuple[ 1 ] ]( function() {\n+\t\t\t\t\t\t\t\tvar returned = fn && fn.apply( this, arguments );\n+\t\t\t\t\t\t\t\tif ( returned && isFunction( returned.promise ) ) {\n+\t\t\t\t\t\t\t\t\treturned.promise()\n+\t\t\t\t\t\t\t\t\t\t.progress( newDefer.notify )\n+\t\t\t\t\t\t\t\t\t\t.done( newDefer.resolve )\n+\t\t\t\t\t\t\t\t\t\t.fail( newDefer.reject );\n+\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\tnewDefer[ tuple[ 0 ] + \"With\" ](\n+\t\t\t\t\t\t\t\t\t\tthis,\n+\t\t\t\t\t\t\t\t\t\tfn ? [ returned ] : arguments\n+\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t} );\n+\t\t\t\t\t\t} );\n+\t\t\t\t\t\tfns = null;\n+\t\t\t\t\t} ).promise();\n+\t\t\t\t},\n+\t\t\t\tthen: function( onFulfilled, onRejected, onProgress ) {\n+\t\t\t\t\tvar maxDepth = 0;\n+\t\t\t\t\tfunction resolve( depth, deferred, handler, special ) {\n+\t\t\t\t\t\treturn function() {\n+\t\t\t\t\t\t\tvar that = this,\n+\t\t\t\t\t\t\t\targs = arguments,\n+\t\t\t\t\t\t\t\tmightThrow = function() {\n+\t\t\t\t\t\t\t\t\tvar returned, then;\n+\n+\t\t\t\t\t\t\t\t\t\/\/ Support: Promises\/A+ section 2.3.3.3.3\n+\t\t\t\t\t\t\t\t\t\/\/ https:\/\/promisesaplus.com\/#point-59\n+\t\t\t\t\t\t\t\t\t\/\/ Ignore double-resolution attempts\n+\t\t\t\t\t\t\t\t\tif ( depth < maxDepth ) {\n+\t\t\t\t\t\t\t\t\t\treturn;\n+\t\t\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\t\t\treturned = handler.apply( that, args );\n+\n+\t\t\t\t\t\t\t\t\t\/\/ Support: Promises\/A+ section 2.3.1\n+\t\t\t\t\t\t\t\t\t\/\/ https:\/\/promisesaplus.com\/#point-48\n+\t\t\t\t\t\t\t\t\tif ( returned === deferred.promise() ) {\n+\t\t\t\t\t\t\t\t\t\tthrow new TypeError( \"Thenable self-resolution\" );\n+\t\t\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\t\t\t\/\/ Support: Promises\/A+ sections 2.3.3.1, 3.5\n+\t\t\t\t\t\t\t\t\t\/\/ https:\/\/promisesaplus.com\/#point-54\n+\t\t\t\t\t\t\t\t\t\/\/ https:\/\/promisesaplus.com\/#point-75\n+\t\t\t\t\t\t\t\t\t\/\/ Retrieve `then` only once\n+\t\t\t\t\t\t\t\t\tthen = returned &&\n+\n+\t\t\t\t\t\t\t\t\t\t\/\/ Support: Promises\/A+ section 2.3.4\n+\t\t\t\t\t\t\t\t\t\t\/\/ https:\/\/promisesaplus.com\/#point-64\n+\t\t\t\t\t\t\t\t\t\t\/\/ Only check objects and functions for thenability\n+\t\t\t\t\t\t\t\t\t\t( typeof returned === \"object\" ||\n+\t\t\t\t\t\t\t\t\t\t\ttypeof returned === \"function\" ) &&\n+\t\t\t\t\t\t\t\t\t\treturned.then;\n+\n+\t\t\t\t\t\t\t\t\t\/\/ Handle a returned thenable\n+\t\t\t\t\t\t\t\t\tif ( isFunction( then ) ) {\n+\n+\t\t\t\t\t\t\t\t\t\t\/\/ Special processors (notify) just wait for resolution\n+\t\t\t\t\t\t\t\t\t\tif ( special ) {\n+\t\t\t\t\t\t\t\t\t\t\tthen.call(\n+\t\t\t\t\t\t\t\t\t\t\t\treturned,\n+\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Identity, special ),\n+\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Thrower, special )\n+\t\t\t\t\t\t\t\t\t\t\t);\n+\n+\t\t\t\t\t\t\t\t\t\t\/\/ Normal processors (resolve) also hook into progress\n+\t\t\t\t\t\t\t\t\t\t} else {\n+\n+\t\t\t\t\t\t\t\t\t\t\t\/\/ ...and disregard older resolution values\n+\t\t\t\t\t\t\t\t\t\t\tmaxDepth++;\n+\n+\t\t\t\t\t\t\t\t\t\t\tthen.call(\n+\t\t\t\t\t\t\t\t\t\t\t\treturned,\n+\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Identity, special ),\n+\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Thrower, special ),\n+\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Identity,\n+\t\t\t\t\t\t\t\t\t\t\t\t\tdeferred.notifyWith )\n+\t\t\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\t\t\t\/\/ Handle all other returned values\n+\t\t\t\t\t\t\t\t\t} else {\n+\n+\t\t\t\t\t\t\t\t\t\t\/\/ Only substitute handlers pass on context\n+\t\t\t\t\t\t\t\t\t\t\/\/ and multiple values (non-spec behavior)\n+\t\t\t\t\t\t\t\t\t\tif ( handler !== Identity ) {\n+\t\t\t\t\t\t\t\t\t\t\tthat = undefined;\n+\t\t\t\t\t\t\t\t\t\t\targs = [ returned ];\n+\t\t\t\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\t\t\t\t\/\/ Process the value(s)\n+\t\t\t\t\t\t\t\t\t\t\/\/ Default process is resolve\n+\t\t\t\t\t\t\t\t\t\t( special || deferred.resolveWith )( that, args );\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t},\n+\n+\t\t\t\t\t\t\t\t\/\/ Only normal processors (resolve) catch and reject exceptions\n+\t\t\t\t\t\t\t\tprocess = special ?\n+\t\t\t\t\t\t\t\t\tmightThrow :\n+\t\t\t\t\t\t\t\t\tfunction() {\n+\t\t\t\t\t\t\t\t\t\ttry {\n+\t\t\t\t\t\t\t\t\t\t\tmightThrow();\n+\t\t\t\t\t\t\t\t\t\t} catch ( e ) {\n+\n+\t\t\t\t\t\t\t\t\t\t\tif ( jQuery.Deferred.exceptionHook ) {\n+\t\t\t\t\t\t\t\t\t\t\t\tjQuery.Deferred.exceptionHook( e,\n+\t\t\t\t\t\t\t\t\t\t\t\t\tprocess.error );\n+\t\t\t\t\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\t\t\t\t\t\/\/ Support: Promises\/A+ section 2.3.3.3.4.1\n+\t\t\t\t\t\t\t\t\t\t\t\/\/ https:\/\/promisesaplus.com\/#point-61\n+\t\t\t\t\t\t\t\t\t\t\t\/\/ Ignore post-resolution exceptions\n+\t\t\t\t\t\t\t\t\t\t\tif ( depth + 1 >= maxDepth ) {\n+\n+\t\t\t\t\t\t\t\t\t\t\t\t\/\/ Only substitute handlers pass on context\n+\t\t\t\t\t\t\t\t\t\t\t\t\/\/ and multiple values (non-spec behavior)\n+\t\t\t\t\t\t\t\t\t\t\t\tif ( handler !== Thrower ) {\n+\t\t\t\t\t\t\t\t\t\t\t\t\tthat = undefined;\n+\t\t\t\t\t\t\t\t\t\t\t\t\targs = [ e ];\n+\t\t\t\t\t\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\t\t\t\t\t\tdeferred.rejectWith( that, args );\n+\t\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t};\n+\n+\t\t\t\t\t\t\t\/\/ Support: Promises\/A+ section 2.3.3.3.1\n+\t\t\t\t\t\t\t\/\/ https:\/\/promisesaplus.com\/#point-57\n+\t\t\t\t\t\t\t\/\/ Re-resolve promises immediately to dodge false rejection from\n+\t\t\t\t\t\t\t\/\/ subsequent errors\n+\t\t\t\t\t\t\tif ( depth ) {\n+\t\t\t\t\t\t\t\tprocess();\n+\t\t\t\t\t\t\t} else {\n+\n+\t\t\t\t\t\t\t\t\/\/ Call an optional hook to record the error, in case of exception\n+\t\t\t\t\t\t\t\t\/\/ since it's otherwise lost when execution goes async\n+\t\t\t\t\t\t\t\tif ( jQuery.Deferred.getErrorHook ) {\n+\t\t\t\t\t\t\t\t\tprocess.error = jQuery.Deferred.getErrorHook();\n+\n+\t\t\t\t\t\t\t\t\/\/ The deprecated alias of the above. While the name suggests\n+\t\t\t\t\t\t\t\t\/\/ returning the stack, not an error instance, jQuery just passes\n+\t\t\t\t\t\t\t\t\/\/ it directly to `console.warn` so both will work; an instance\n+\t\t\t\t\t\t\t\t\/\/ just better cooperates with source maps.\n+\t\t\t\t\t\t\t\t} else if ( jQuery.Deferred.getStackHook ) {\n+\t\t\t\t\t\t\t\t\tprocess.error = jQuery.Deferred.getStackHook();\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\twindow.setTimeout( process );\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t};\n+\t\t\t\t\t}\n+\n+\t\t\t\t\treturn jQuery.Deferred( function( newDefer ) {\n+\n+\t\t\t\t\t\t\/\/ progress_handlers.add( ... )\n+\t\t\t\t\t\ttuples[ 0 ][ 3 ].add(\n+\t\t\t\t\t\t\tresolve(\n+\t\t\t\t\t\t\t\t0,\n+\t\t\t\t\t\t\t\tnewDefer,\n+\t\t\t\t\t\t\t\tisFunction( onProgress ) ?\n+\t\t\t\t\t\t\t\t\tonProgress :\n+\t\t\t\t\t\t\t\t\tIdentity,\n+\t\t\t\t\t\t\t\tnewDefer.notifyWith\n+\t\t\t\t\t\t\t)\n+\t\t\t\t\t\t);\n+\n+\t\t\t\t\t\t\/\/ fulfilled_handlers.add( ... )\n+\t\t\t\t\t\ttuples[ 1 ][ 3 ].add(\n+\t\t\t\t\t\t\tresolve(\n+\t\t\t\t\t\t\t\t0,\n+\t\t\t\t\t\t\t\tnewDefer,\n+\t\t\t\t\t\t\t\tisFunction( onFulfilled ) ?\n+\t\t\t\t\t\t\t\t\tonFulfilled :\n+\t\t\t\t\t\t\t\t\tIdentity\n+\t\t\t\t\t\t\t)\n+\t\t\t\t\t\t);\n+\n+\t\t\t\t\t\t\/\/ rejected_handlers.add( ... )\n+\t\t\t\t\t\ttuples[ 2 ][ 3 ].add(\n+\t\t\t\t\t\t\tresolve(\n+\t\t\t\t\t\t\t\t0,\n+\t\t\t\t\t\t\t\tnewDefer,\n+\t\t\t\t\t\t\t\tisFunction( onRejected ) ?\n+\t\t\t\t\t\t\t\t\tonRejected :\n+\t\t\t\t\t\t\t\t\tThrower\n+\t\t\t\t\t\t\t)\n+\t\t\t\t\t\t);\n+\t\t\t\t\t} ).promise();\n+\t\t\t\t},\n+\n+\t\t\t\t\/\/ Get a promise for this deferred\n+\t\t\t\t\/\/ If obj is provided, the promise aspect is added to the object\n+\t\t\t\tpromise: function( obj ) {\n+\t\t\t\t\treturn obj != null ? jQuery.extend( obj, promise ) : promise;\n+\t\t\t\t}\n+\t\t\t},\n+\t\t\tdeferred = {};\n+\n+\t\t\/\/ Add list-specific methods\n+\t\tjQuery.each( tuples, function( i, tuple ) {\n+\t\t\tvar list = tuple[ 2 ],\n+\t\t\t\tstateString = tuple[ 5 ];\n+\n+\t\t\t\/\/ promise.progress = list.add\n+\t\t\t\/\/ promise.done = list.add\n+\t\t\t\/\/ promise.fail = list.add\n+\t\t\tpromise[ tuple[ 1 ] ] = list.add;\n+\n+\t\t\t\/\/ Handle state\n+\t\t\tif ( stateString ) {\n+\t\t\t\tlist.add(\n+\t\t\t\t\tfunction() {\n+\n+\t\t\t\t\t\t\/\/ state = \"resolved\" (i.e., fulfilled)\n+\t\t\t\t\t\t\/\/ state = \"rejected\"\n+\t\t\t\t\t\tstate = stateString;\n+\t\t\t\t\t},\n+\n+\t\t\t\t\t\/\/ rejected_callbacks.disable\n+\t\t\t\t\t\/\/ fulfilled_callbacks.disable\n+\t\t\t\t\ttuples[ 3 - i ][ 2 ].disable,\n+\n+\t\t\t\t\t\/\/ rejected_handlers.disable\n+\t\t\t\t\t\/\/ fulfilled_handlers.disable\n+\t\t\t\t\ttuples[ 3 - i ][ 3 ].disable,\n+\n+\t\t\t\t\t\/\/ progress_callbacks.lock\n+\t\t\t\t\ttuples[ 0 ][ 2 ].lock,\n+\n+\t\t\t\t\t\/\/ progress_handlers.lock\n+\t\t\t\t\ttuples[ 0 ][ 3 ].lock\n+\t\t\t\t);\n+\t\t\t}\n+\n+\t\t\t\/\/ progress_handlers.fire\n+\t\t\t\/\/ fulfilled_handlers.fire\n+\t\t\t\/\/ rejected_handlers.fire\n+\t\t\tlist.add( tuple[ 3 ].fire );\n+\n+\t\t\t\/\/ deferred.notify = function() { deferred.notifyWith(...) }\n+\t\t\t\/\/ deferred.resolve = function() { deferred.resolveWith(...) }\n+\t\t\t\/\/ deferred.reject = function() { deferred.rejectWith(...) }\n+\t\t\tdeferred[ tuple[ 0 ] ] = function() {\n+\t\t\t\tdeferred[ tuple[ 0 ] + \"With\" ]( this === deferred ? undefined : this, arguments );\n+\t\t\t\treturn this;\n+\t\t\t};\n+\n+\t\t\t\/\/ deferred.notifyWith = list.fireWith\n+\t\t\t\/\/ deferred.resolveWith = list.fireWith\n+\t\t\t\/\/ deferred.rejectWith = list.fireWith\n+\t\t\tdeferred[ tuple[ 0 ] + \"With\" ] = list.fireWith;\n+\t\t} );\n+\n+\t\t\/\/ Make the deferred a promise\n+\t\tpromise.promise( deferred );\n+\n+\t\t\/\/ Call given func if any\n+\t\tif ( func ) {\n+\t\t\tfunc.call( deferred, deferred );\n+\t\t}\n+\n+\t\t\/\/ All done!\n+\t\treturn deferred;\n+\t},\n+\n+\t\/\/ Deferred helper\n+\twhen: function( singleValue ) {\n+\t\tvar\n+\n+\t\t\t\/\/ count of uncompleted subordinates\n+\t\t\tremaining = arguments.length,\n+\n+\t\t\t\/\/ count of unprocessed arguments\n+\t\t\ti = remaining,\n+\n+\t\t\t\/\/ subordinate fulfillment data\n+\t\t\tresolveContexts = Array( i ),\n+\t\t\tresolveValues = slice.call( arguments ),\n+\n+\t\t\t\/\/ the primary Deferred\n+\t\t\tprimary = jQuery.Deferred(),\n+\n+\t\t\t\/\/ subordinate callback factory\n+\t\t\tupdateFunc = function( i ) {\n+\t\t\t\treturn function( value ) {\n+\t\t\t\t\tresolveContexts[ i ] = this;\n+\t\t\t\t\tresolveValues[ i ] = arguments.length > 1 ? slice.call( arguments ) : value;\n+\t\t\t\t\tif ( !( --remaining ) ) {\n+\t\t\t\t\t\tprimary.resolveWith( resolveContexts, resolveValues );\n+\t\t\t\t\t}\n+\t\t\t\t};\n+\t\t\t};\n+\n+\t\t\/\/ Single- and empty arguments are adopted like Promise.resolve\n+\t\tif ( remaining <= 1 ) {\n+\t\t\tadoptValue( singleValue, primary.done( updateFunc( i ) ).resolve, primary.reject,\n+\t\t\t\t!remaining );\n+\n+\t\t\t\/\/ Use .then() to unwrap secondary thenables (cf. gh-3000)\n+\t\t\tif ( primary.state() === \"pending\" ||\n+\t\t\t\tisFunction( resolveValues[ i ] && resolveValues[ i ].then ) ) {\n+\n+\t\t\t\treturn primary.then();\n+\t\t\t}\n+\t\t}\n+\n+\t\t\/\/ Multiple arguments are aggregated like Promise.all array elements\n+\t\twhile ( i-- ) {\n+\t\t\tadoptValue( resolveValues[ i ], updateFunc( i ), primary.reject );\n+\t\t}\n+\n+\t\treturn primary.promise();\n+\t}\n+} );\n+\n+\n+\/\/ These usually indicate a programmer mistake during development,\n+\/\/ warn about them ASAP rather than swallowing them by default.\n+var rerrorNames = \/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$\/;\n+\n+\/\/ If `jQuery.Deferred.getErrorHook` is defined, `asyncError` is an error\n+\/\/ captured before the async barrier to get the original error cause\n+\/\/ which may otherwise be hidden.\n+jQuery.Deferred.exceptionHook = function( error, asyncError ) {\n+\n+\t\/\/ Support: IE 8 - 9 only\n+\t\/\/ Console exists when dev tools are open, which can happen at any time\n+\tif ( window.console && window.console.warn && error && rerrorNames.test( error.name ) ) {\n+\t\twindow.console.warn( \"jQuery.Deferred exception: \" + error.message,\n+\t\t\terror.stack, asyncError );\n+\t}\n+};\n+\n+\n+\n+\n+jQuery.readyException = function( error ) {\n+\twindow.setTimeout( function() {\n+\t\tthrow error;\n+\t} );\n+};\n+\n+\n+\n+\n+\/\/ The deferred used on DOM ready\n+var readyList = jQuery.Deferred();\n+\n+jQuery.fn.ready = function( fn ) {\n+\n+\treadyList\n+\t\t.then( fn )\n+\n+\t\t\/\/ Wrap jQuery.readyException in a function so that the lookup\n+\t\t\/\/ happens at the time of error handling instead of callback\n+\t\t\/\/ registration.\n+\t\t.catch( function( error ) {\n+\t\t\tjQuery.readyException( error );\n+\t\t} );\n+\n+\treturn this;\n+};\n+\n+jQuery.extend( {\n+\n+\t\/\/ Is the DOM ready to be used? Set to true once it occurs.\n+\tisReady: false,\n+\n+\t\/\/ A counter to track how many items to wait for before\n+\t\/\/ the ready event fires. See trac-6781\n+\treadyWait: 1,\n+\n+\t\/\/ Handle when the DOM is ready\n+\tready: function( wait ) {\n+\n+\t\t\/\/ Abort if there are pending holds or we're already ready\n+\t\tif ( wait === true ? --jQuery.readyWait : jQuery.isReady ) {\n+\t\t\treturn;\n+\t\t}\n+\n+\t\t\/\/ Remember that the DOM is ready\n+\t\tjQuery.isReady = true;\n+\n+\t\t\/\/ If a normal DOM Ready event fired, decrement, and wait if need be\n+\t\tif ( wait !== true && --jQuery.readyWait > 0 ) {\n+\t\t\treturn;\n+\t\t}\n+\n+\t\t\/\/ If there are functions bound, to execute\n+\t\treadyList.resolveWith( document, [ jQuery ] );\n+\t}\n+} );\n+\n+jQuery.ready.then = readyList.then;\n+\n+\/\/ The ready event handler and self cleanup method\n+function completed() {\n+\tdocument.removeEventListener( \"DOMContentLoaded\", completed );\n+\twindow.removeEventListener( \"load\", completed );\n+\tjQuery.ready();\n+}\n+\n+\/\/ Catch cases where $(document).ready() is called\n+\/\/ after the browser event has already occurred.\n+\/\/ Support: IE <=9 - 10 only\n+\/\/ Older IE sometimes signals \"interactive\" too soon\n+if ( document.readyState === \"complete\" ||\n+\t( document.readyState !== \"loading\" && !document.documentElement.doScroll ) ) {\n+\n+\t\/\/ Handle it asynchronously to allow scripts the opportunity to delay ready\n+\twindow.setTimeout( jQuery.ready );\n+\n+} else {\n+\n+\t\/\/ Use the handy event callback\n+\tdocument.addEventListener( \"DOMContentLoaded\", completed );\n+\n+\t\/\/ A fallback to window.onload, that will always work\n+\twindow.addEventListener( \"load\", completed );\n+}\n+\n+\n+\n+\n+\/\/ Multifunctional method to get and set values of a collection\n+\/\/ The value\/s can optionally be executed if it's a function\n+var access = function( elems, fn, key, value, chainable, emptyGet, raw ) {\n+\tvar i = 0,\n+\t\tlen = elems.length,\n+\t\tbulk = key == null;\n+\n+\t\/\/ Sets many values\n+\tif ( toType( key ) === \"object\" ) {\n+\t\tchainable = true;\n+\t\tfor ( i in key ) {\n+\t\t\taccess( elems, fn, i, key[ i ], true, emptyGet, raw );\n+\t\t}\n+\n+\t\/\/ Sets one value\n+\t} else if ( value !== undefined ) {\n+\t\tchainable = true;\n+\n+\t\tif ( !isFunction( value ) ) {\n+\t\t\traw = true;\n+\t\t}\n+\n+\t\tif ( bulk ) {\n+\n+\t\t\t\/\/ Bulk operations run against the entire set\n+\t\t\tif ( raw ) {\n+\t\t\t\tfn.call( elems, value );\n+\t\t\t\tfn = null;\n+\n+\t\t\t\/\/ ...except when executing function values\n+\t\t\t} else {\n+\t\t\t\tbulk = fn;\n+\t\t\t\tfn = function( elem, _key, value ) {\n+\t\t\t\t\treturn bulk.call( jQuery( elem ), value );\n+\t\t\t\t};\n+\t\t\t}\n+\t\t}\n+\n+\t\tif ( fn ) {\n+\t\t\tfor ( ; i < len; i++ ) {\n+\t\t\t\tfn(\n+\t\t\t\t\telems[ i ], key, raw ?\n+\t\t\t\t\t\tvalue :\n+\t\t\t\t\t\tvalue.call( elems[ i ], i, fn( elems[ i ], key ) )\n+\t\t\t\t);\n+\t\t\t}\n+\t\t}\n+\t}\n+\n+\tif ( chainable ) {\n+\t\treturn elems;\n+\t}\n+\n+\t\/\/ Gets\n+\tif ( bulk ) {\n+\t\treturn fn.call( elems );\n+\t}\n+\n+\treturn len ? fn( elems[ 0 ], key ) : emptyGet;\n+};\n+\n+\n+\/\/ Matches dashed string for camelizing\n+var rmsPrefix = \/^-ms-\/,\n+\trdashAlpha = \/-([a-z])\/g;\n+\n+\/\/ Used by camelCase as callback to replace()\n+function fcamelCase( _all, letter ) {\n+\treturn letter.toUpperCase();\n+}\n+\n+\/\/ Convert dashed to camelCase; used by the css and data modules\n+\/\/ Support: IE <=9 - 11, Edge 12 - 15\n+\/\/ Microsoft forgot to hump their vendor prefix (trac-9572)\n+function camelCase( string ) {\n+\treturn string.replace( rmsPrefix, \"ms-\" ).replace( rdashAlpha, fcamelCase );\n+}\n+var acceptData = function( owner ) {\n+\n+\t\/\/ Accepts only:\n+\t\/\/  - Node\n+\t\/\/    - Node.ELEMENT_NODE\n+\t\/\/    - Node.DOCUMENT_NODE\n+\t\/\/  - Object\n+\t\/\/    - Any\n+\treturn owner.nodeType === 1 || owner.nodeType === 9 || !( +owner.nodeType );\n+};\n+\n+\n+\n+\n+function Data() {\n+\tthis.expando = jQuery.expando + Data.uid++;\n+}\n+\n+Data.uid = 1;\n+\n+Data.prototype = {\n+\n+\tcache: function( owner ) {\n+\n+\t\t\/\/ Check if the owner object already has a cache\n+\t\tvar value = owner[ this.expando ];\n+\n+\t\t\/\/ If not, create one\n+\t\tif ( !value ) {\n+\t\t\tvalue = {};\n+\n+\t\t\t\/\/ We can accept data for non-element nodes in modern browsers,\n+\t\t\t\/\/ but we should not, see trac-8335.\n+\t\t\t\/\/ Always return an empty object.\n+\t\t\tif ( acceptData( owner ) ) {\n+\n+\t\t\t\t\/\/ If it is a node unlikely to be stringify-ed or looped over\n+\t\t\t\t\/\/ use plain assignment\n+\t\t\t\tif ( owner.nodeType ) {\n+\t\t\t\t\towner[ this.expando ] = value;\n+\n+\t\t\t\t\/\/ Otherwise secure it in a non-enumerable property\n+\t\t\t\t\/\/ configurable must be true to allow the property to be\n+\t\t\t\t\/\/ deleted when data is removed\n+\t\t\t\t} else {\n+\t\t\t\t\tObject.defineProperty( owner, this.expando, {\n+\t\t\t\t\t\tvalue: value,\n+\t\t\t\t\t\tconfigurable: true\n+\t\t\t\t\t} );\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\n+\t\treturn value;\n+\t},\n+\tset: function( owner, data, value ) {\n+\t\tvar prop,\n+\t\t\tcache = this.cache( owner );\n+\n+\t\t\/\/ Handle: [ owner, key, value ] args\n+\t\t\/\/ Always use camelCase key (gh-2257)\n+\t\tif ( typeof data === \"string\" ) {\n+\t\t\tcache[ camelCase( data ) ] = value;\n+\n+\t\t\/\/ Handle: [ owner, { properties } ] args\n+\t\t} else {\n+\n+\t\t\t\/\/ Copy the properties one-by-one to the cache object\n+\t\t\tfor ( prop in data ) {\n+\t\t\t\tcache[ camelCase( prop ) ] = data[ prop ];\n+\t\t\t}\n+\t\t}\n+\t\treturn cache;\n+\t},\n+\tget: function( owner, key ) {\n+\t\treturn key === undefined ?\n+\t\t\tthis.cache( owner ) :\n+\n+\t\t\t\/\/ Always use camelCase key (gh-2257)\n+\t\t\towner[ this.expando ] && owner[ this.expando ][ camelCase( key ) ];\n+\t},\n+\taccess: function( owner, key, value ) {\n+\n+\t\t\/\/ In cases where either:\n+\t\t\/\/\n+\t\t\/\/   1. No key was specified\n+\t\t\/\/   2. A string key was specified, but no value provided\n+\t\t\/\/\n+\t\t\/\/ Take the \"read\" path and allow the get method to determine\n+\t\t\/\/ which value to return, respectively either:\n+\t\t\/\/\n+\t\t\/\/   1. The entire cache object\n+\t\t\/\/   2. The data stored at the key\n+\t\t\/\/\n+\t\tif ( key === undefined ||\n+\t\t\t\t( ( key && typeof key === \"string\" ) && value === undefined ) ) {\n+\n+\t\t\treturn this.get( owner, key );\n+\t\t}\n+\n+\t\t\/\/ When the key is not a string, or both a key and value\n+\t\t\/\/ are specified, set or extend (existing objects) with either:\n+\t\t\/\/\n+\t\t\/\/   1. An object of properties\n+\t\t\/\/   2. A key and value\n+\t\t\/\/\n+\t\tthis.set( owner, key, value );\n+\n+\t\t\/\/ Since the \"set\" path can have two possible entry points\n+\t\t\/\/ return the expected data based on which path was taken[*]\n+\t\treturn value !== undefined ? value : key;\n+\t},\n+\tremove: function( owner, key ) {\n+\t\tvar i,\n+\t\t\tcache = owner[ this.expando ];\n+\n+\t\tif ( cache === undefined ) {\n+\t\t\treturn;\n+\t\t}\n+\n+\t\tif ( key !== undefined ) {\n+\n+\t\t\t\/\/ Support array or space separated string of keys\n+\t\t\tif ( Array.isArray( key ) ) {\n+\n+\t\t\t\t\/\/ If key is an array of keys...\n+\t\t\t\t\/\/ We always set camelCase keys, so remove that.\n+\t\t\t\tkey = key.map( camelCase );\n+\t\t\t} else {\n+\t\t\t\tkey = camelCase( key );\n+\n+\t\t\t\t\/\/ If a key with the spaces exists, use it.\n+\t\t\t\t\/\/ Otherwise, create an array by matching non-whitespace\n+\t\t\t\tkey = key in cache ?\n+\t\t\t\t\t[ key ] :\n+\t\t\t\t\t( key.match( rnothtmlwhite ) || [] );\n+\t\t\t}\n+\n+\t\t\ti = key.length;\n+\n+\t\t\twhile ( i-- ) {\n+\t\t\t\tdelete cache[ key[ i ] ];\n+\t\t\t}\n+\t\t}\n+\n+\t\t\/\/ Remove the expando if there's no more data\n+\t\tif ( key === undefined || jQuery.isEmptyObject( cache ) ) {\n+\n+\t\t\t\/\/ Support: Chrome <=35 - 45\n+\t\t\t\/\/ Webkit & Blink performance suffers when deleting properties\n+\t\t\t\/\/ from DOM nodes, so set to undefined instead\n+\t\t\t\/\/ https:\/\/bugs.chromium.org\/p\/chromium\/issues\/detail?id=378607 (bug restricted)\n+\t\t\tif ( owner.nodeType ) {\n+\t\t\t\towner[ this.expando ] = undefined;\n+\t\t\t} else {\n+\t\t\t\tdelete owner[ this.expando ];\n+\t\t\t}\n+\t\t}\n+\t},\n+\thasData: function( owner ) {\n+\t\tvar cache = owner[ this.expando ];\n+\t\treturn cache !== undefined && !jQuery.isEmptyObject( cache );\n+\t}\n+};\n+var dataPriv = new Data();\n+\n+var dataUser = new Data();\n+\n+\n+\n+\/\/\tImplementation Summary\n+\/\/\n+\/\/\t1. Enforce API surface and semantic compatibility with 1.9.x branch\n+\/\/\t2. Improve the module's maintainability by reducing the storage\n+\/\/\t\tpaths to a single mechanism.\n+\/\/\t3. Use the same single mechanism to support \"private\" and \"user\" data.\n+\/\/\t4. _Never_ expose \"private\" data to user code (TODO: Drop _data, _removeData)\n+\/\/\t5. Avoid exposing implementation details on user objects (eg. expando properties)\n+\/\/\t6. Provide a clear path for implementation upgrade to WeakMap in 2014\n+\n+var rbrace = \/^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$\/,\n+\trmultiDash = \/[A-Z]\/g;\n+\n+function getData( data ) {\n+\tif ( data === \"true\" ) {\n+\t\treturn true;\n+\t}\n+\n+\tif ( data === \"false\" ) {\n+\t\treturn false;\n+\t}\n+\n+\tif ( data === \"null\" ) {\n+\t\treturn null;\n+\t}\n+\n+\t\/\/ Only convert to a number if it doesn't change the string\n+\tif ( data === +data + \"\" ) {\n+\t\treturn +data;\n+\t}\n+\n+\tif ( rbrace.test( data ) ) {\n+\t\treturn JSON.parse( data );\n+\t}\n+\n+\treturn data;\n+}\n+\n+function dataAttr( elem, key, data ) {\n+\tvar name;\n+\n+\t\/\/ If nothing was found internally, try to fetch any\n+\t\/\/ data from the HTML5 data-* attribute\n+\tif ( data === undefined && elem.nodeType === 1 ) {\n+\t\tname = \"data-\" + key.replace( rmultiDash, \"-$&\" ).toLowerCase();\n+\t\tdata = elem.getAttribute( name );\n+\n+\t\tif ( typeof data === \"string\" ) {\n+\t\t\ttry {\n+\t\t\t\tdata = getData( data );\n+\t\t\t} catch ( e ) {}\n+\n+\t\t\t\/\/ Make sure we set the data so it isn't changed later\n+\t\t\tdataUser.set( elem, key, data );\n+\t\t} else {\n+\t\t\tdata = undefined;\n+\t\t}\n+\t}\n+\treturn data;\n+}\n+\n+jQuery.extend( {\n+\thasData: function( elem ) {\n+\t\treturn dataUser.hasData( elem ) || dataPriv.hasData( elem );\n+\t},\n+\n+\tdata: function( elem, name, data ) {\n+\t\treturn dataUser.access( elem, name, data );\n+\t},\n+\n+\tremoveData: function( elem, name ) {\n+\t\tdataUser.remove( elem, name );\n+\t},\n+\n+\t\/\/ TODO: Now that all calls to _data and _removeData have been replaced\n+\t\/\/ with direct calls to dataPriv methods, these can be deprecated.\n+\t_data: function( elem, name, data ) {\n+\t\treturn dataPriv.access( elem, name, data );\n+\t},\n+\n+\t_removeData: function( elem, name ) {\n+\t\tdataPriv.remove( elem, name );\n+\t}\n+} );\n+\n+jQuery.fn.extend( {\n+\tdata: function( key, value ) {\n+\t\tvar i, name, data,\n+\t\t\telem = this[ 0 ],\n+\t\t\tattrs = elem && elem.attributes;\n+\n+\t\t\/\/ Gets all values\n+\t\tif ( key === undefined ) {\n+\t\t\tif ( this.length ) {\n+\t\t\t\tdata = dataUser.get( elem );\n+\n+\t\t\t\tif ( elem.nodeType === 1 && !dataPriv.get( elem, \"hasDataAttrs\" ) ) {\n+\t\t\t\t\ti = attrs.length;\n+\t\t\t\t\twhile ( i-- ) {\n+\n+\t\t\t\t\t\t\/\/ Support: IE 11 only\n+\t\t\t\t\t\t\/\/ The attrs elements can be null (trac-14894)\n+\t\t\t\t\t\tif ( attrs[ i ] ) {\n+\t\t\t\t\t\t\tname = attrs[ i ].name;\n+\t\t\t\t\t\t\tif ( name.indexOf( \"data-\" ) === 0 ) {\n+\t\t\t\t\t\t\t\tname = camelCase( name.slice( 5 ) );\n+\t\t\t\t\t\t\t\tdataAttr( elem, name, data[ name ] );\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t\tdataPriv.set( elem, \"hasDataAttrs\", true );\n+\t\t\t\t}\n+\t\t\t}\n+\n+\t\t\treturn data;\n+\t\t}\n+\n+\t\t\/\/ Sets multiple values\n+\t\tif ( typeof key === \"object\" ) {\n+\t\t\treturn this.each( function() {\n+\t\t\t\tdataUser.set( this, key );\n+\t\t\t} );\n+\t\t}\n+\n+\t\treturn access( this, function( value ) {\n+\t\t\tvar data;\n+\n+\t\t\t\/\/ The calling jQuery object (element matches) is not empty\n+\t\t\t\/\/ (and therefore has an element appears at this[ 0 ]) and the\n+\t\t\t\/\/ `value` parameter was not undefined. An empty jQuery object\n+\t\t\t\/\/ will result in `undefined` for elem = this[ 0 ] which will\n+\t\t\t\/\/ throw an exception if an attempt to read a data cache is made.\n+\t\t\tif ( elem && value === undefined ) {\n+\n+\t\t\t\t\/\/ Attempt to get data from the cache\n+\t\t\t\t\/\/ The key will always be camelCased in Data\n+\t\t\t\tdata = dataUser.get( elem, key );\n+\t\t\t\tif ( data !== undefined ) {\n+\t\t\t\t\treturn data;\n+\t\t\t\t}\n+\n+\t\t\t\t\/\/ Attempt to \"discover\" the data in\n+\t\t\t\t\/\/ HTML5 custom data-* attrs\n+\t\t\t\tdata = dataAttr( elem, key );\n+\t\t\t\tif ( data !== undefined ) {\n+\t\t\t\t\treturn data;\n+\t\t\t\t}\n+\n+\t\t\t\t\/\/ We tried really hard, but the data doesn't exist.\n+\t\t\t\treturn;\n+\t\t\t}\n+\n+\t\t\t\/\/ Set the data...\n+\t\t\tthis.each( function() {\n+\n+\t\t\t\t\/\/ We always store the camelCased key\n+\t\t\t\tdataUser.set( this, key, value );\n+\t\t\t} );\n+\t\t}, null, value, arguments.length > 1, null, true );\n+\t},\n+\n+\tremoveData: function( key ) {\n+\t\treturn this.each( function() {\n+\t\t\tdataUser.remove( this, key );\n+\t\t} );\n+\t}\n+} );\n+\n+\n+jQuery.extend( {\n+\tqueue: function( elem, type, data ) {\n+\t\tvar queue;\n+\n+\t\tif ( elem ) {\n+\t\t\ttype = ( type || \"fx\" ) + \"queue\";\n+\t\t\tqueue = dataPriv.get( elem, type );\n+\n+\t\t\t\/\/ Speed up dequeue by getting out quickly if this is just a lookup\n+\t\t\tif ( data ) {\n+\t\t\t\tif ( !queue || Array.isArray( data ) ) {\n+\t\t\t\t\tqueue = dataPriv.access( elem, type, jQuery.makeArray( data ) );\n+\t\t\t\t} else {\n+\t\t\t\t\tqueue.push( data );\n+\t\t\t\t}\n+\t\t\t}\n+\t\t\treturn queue || [];\n+\t\t}\n+\t},\n+\n+\tdequeue: function( elem, type ) {\n+\t\ttype = type || \"fx\";\n+\n+\t\tvar queue = jQuery.queue( elem, type ),\n+\t\t\tstartLength = queue.length,\n+\t\t\tfn = queue.shift(),\n+\t\t\thooks = jQuery._queueHooks( elem, type ),\n+\t\t\tnext = function() {\n+\t\t\t\tjQuery.dequeue( elem, type );\n+\t\t\t};\n+\n+\t\t\/\/ If the fx queue is dequeued, always remove the progress sentinel\n+\t\tif ( fn === \"inprogress\" ) {\n+\t\t\tfn = queue.shift();\n+\t\t\tstartLength--;\n+\t\t}\n+\n+\t\tif ( fn ) {\n+\n+\t\t\t\/\/ Add a progress sentinel to prevent the fx queue from being\n+\t\t\t\/\/ automatically dequeued\n+\t\t\tif ( type === \"fx\" ) {\n+\t\t\t\tqueue.unshift( \"inprogress\" );\n+\t\t\t}\n+\n+\t\t\t\/\/ Clear up the last queue stop function\n+\t\t\tdelete hooks.stop;\n+\t\t\tfn.call( elem, next, hooks );\n+\t\t}\n+\n+\t\tif ( !startLength && hooks ) {\n+\t\t\thooks.empty.fire();\n+\t\t}\n+\t},\n+\n+\t\/\/ Not public - generate a queueHooks object, or return the current one\n+\t_queueHooks: function( elem, type ) {\n+\t\tvar key = type + \"queueHooks\";\n+\t\treturn dataPriv.get( elem, key ) || dataPriv.access( elem, key, {\n+\t\t\tempty: jQuery.Callbacks( \"once memory\" ).add( function() {\n+\t\t\t\tdataPriv.remove( elem, [ type + \"queue\", key ] );\n+\t\t\t} )\n+\t\t} );\n+\t}\n+} );\n+\n+jQuery.fn.extend( {\n+\tqueue: function( type, data ) {\n+\t\tvar setter = 2;\n+\n+\t\tif ( typeof type !== \"string\" ) {\n+\t\t\tdata = type;\n+\t\t\ttype = \"fx\";\n+\t\t\tsetter--;\n+\t\t}\n+\n+\t\tif ( arguments.length < setter ) {\n+\t\t\treturn jQuery.queue( this[ 0 ], type );\n+\t\t}\n+\n+\t\treturn data === undefined ?\n+\t\t\tthis :\n+\t\t\tthis.each( function() {\n+\t\t\t\tvar queue = jQuery.queue( this, type, data );\n+\n+\t\t\t\t\/\/ Ensure a hooks for this queue\n+\t\t\t\tjQuery._queueHooks( this, type );\n+\n+\t\t\t\tif ( type === \"fx\" && queue[ 0 ] !== \"inprogress\" ) {\n+\t\t\t\t\tjQuery.dequeue( this, type );\n+\t\t\t\t}\n+\t\t\t} );\n+\t},\n+\tdequeue: function( type ) {\n+\t\treturn this.each( function() {\n+\t\t\tjQuery.dequeue( this, type );\n+\t\t} );\n+\t},\n+\tclearQueue: function( type ) {\n+\t\treturn this.queue( type || \"fx\", [] );\n+\t},\n+\n+\t\/\/ Get a promise resolved when queues of a certain type\n+\t\/\/ are emptied (fx is the type by default)\n+\tpromise: function( type, obj ) {\n+\t\tvar tmp,\n+\t\t\tcount = 1,\n+\t\t\tdefer = jQuery.Deferred(),\n+\t\t\telements = this,\n+\t\t\ti = this.length,\n+\t\t\tresolve = function() {\n+\t\t\t\tif ( !( --count ) ) {\n+\t\t\t\t\tdefer.resolveWith( elements, [ elements ] );\n+\t\t\t\t}\n+\t\t\t};\n+\n+\t\tif ( typeof type !== \"string\" ) {\n+\t\t\tobj = type;\n+\t\t\ttype = undefined;\n+\t\t}\n+\t\ttype = type || \"fx\";\n+\n+\t\twhile ( i-- ) {\n+\t\t\ttmp = dataPriv.get( elements[ i ], type + \"queueHooks\" );\n+\t\t\tif ( tmp && tmp.empty ) {\n+\t\t\t\tcount++;\n+\t\t\t\ttmp.empty.add( resolve );\n+\t\t\t}\n+\t\t}\n+\t\tresolve();\n+\t\treturn defer.promise( obj );\n+\t}\n+} );\n+var pnum = ( \/[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)\/ ).source;\n+\n+var rcssNum = new RegExp( \"^(?:([+-])=|)(\" + pnum + \")([a-z%]*)$\", \"i\" );\n+\n+\n+var cssExpand = [ \"Top\", \"Right\", \"Bottom\", \"Left\" ];\n+\n+var documentElement = document.documentElement;\n+\n+\n+\n+\tvar isAttached = function( elem ) {\n+\t\t\treturn jQuery.contains( elem.ownerDocument, elem );\n+\t\t},\n+\t\tcomposed = { composed: true };\n+\n+\t\/\/ Support: IE 9 - 11+, Edge 12 - 18+, iOS 10.0 - 10.2 only\n+\t\/\/ Check attachment across shadow DOM boundaries when possible (gh-3504)\n+\t\/\/ Support: iOS 10.0-10.2 only\n+\t\/\/ Early iOS 10 versions support `attachShadow` but not `getRootNode`,\n+\t\/\/ leading to errors. We need to check for `getRootNode`.\n+\tif ( documentElement.getRootNode ) {\n+\t\tisAttached = function( elem ) {\n+\t\t\treturn jQuery.contains( elem.ownerDocument, elem ) ||\n+\t\t\t\telem.getRootNode( composed ) === elem.ownerDocument;\n+\t\t};\n+\t}\n+var isHiddenWithinTree = function( elem, el ) {\n+\n+\t\t\/\/ isHiddenWithinTree might be called from jQuery#filter function;\n+\t\t\/\/ in that case, element will be second argument\n+\t\telem = el || elem;\n+\n+\t\t\/\/ Inline style trumps all\n+\t\treturn elem.style.display === \"none\" ||\n+\t\t\telem.style.display === \"\" &&\n+\n+\t\t\t\/\/ Otherwise, check computed style\n+\t\t\t\/\/ Support: Firefox <=43 - 45\n+\t\t\t\/\/ Disconnected elements can have computed display: none, so first confirm that elem is\n+\t\t\t\/\/ in the document.\n+\t\t\tisAttached( elem ) &&\n+\n+\t\t\tjQuery.css( elem, \"display\" ) === \"none\";\n+\t};\n+\n+\n+\n+function adjustCSS( elem, prop, valueParts, tween ) {\n+\tvar adjusted, scale,\n+\t\tmaxIterations = 20,\n+\t\tcurrentValue = tween ?\n+\t\t\tfunction() {\n+\t\t\t\treturn tween.cur();\n+\t\t\t} :\n+\t\t\tfunction() {\n+\t\t\t\treturn jQuery.css( elem, prop, \"\" );\n+\t\t\t},\n+\t\tinitial = currentValue(),\n+\t\tunit = valueParts && valueParts[ 3 ] || ( jQuery.cssNumber[ prop ] ? \"\" : \"px\" ),\n+\n+\t\t\/\/ Starting value computation is required for potential unit mismatches\n+\t\tinitialInUnit = elem.nodeType &&\n+\t\t\t( jQuery.cssNumber[ prop ] || unit !== \"px\" && +initial ) &&\n+\t\t\trcssNum.exec( jQuery.css( elem, prop ) );\n+\n+\tif ( initialInUnit && initialInUnit[ 3 ] !== unit ) {\n+\n+\t\t\/\/ Support: Firefox <=54\n+\t\t\/\/ Halve the iteration target value to prevent interference from CSS upper bounds (gh-2144)\n+\t\tinitial = initial \/ 2;\n+\n+\t\t\/\/ Trust units reported by jQuery.css\n+\t\tunit = unit || initialInUnit[ 3 ];\n+\n+\t\t\/\/ Iteratively approximate from a nonzero starting point\n+\t\tinitialInUnit = +initial || 1;\n+\n+\t\twhile ( maxIterations-- ) {\n+\n+\t\t\t\/\/ Evaluate and update our best guess (doubling guesses that zero out).\n+\t\t\t\/\/ Finish if the scale equals or crosses 1 (making the old*new product non-positive).\n+\t\t\tjQuery.style( elem, prop, initialInUnit + unit );\n+\t\t\tif ( ( 1 - scale ) * ( 1 - ( scale = currentValue() \/ initial || 0.5 ) ) <= 0 ) {\n+\t\t\t\tmaxIterations = 0;\n+\t\t\t}\n+\t\t\tinitialInUnit = initialInUnit \/ scale;\n+\n+\t\t}\n+\n+\t\tinitialInUnit = initialInUnit * 2;\n+\t\tjQuery.style( elem, prop, initialInUnit + unit );\n+\n+\t\t\/\/ Make sure we update the tween properties later on\n+\t\tvalueParts = valueParts || [];\n+\t}\n+\n+\tif ( valueParts ) {\n+\t\tinitialInUnit = +initialInUnit || +initial || 0;\n+\n+\t\t\/\/ Apply relative offset (+=\/-=) if specified\n+\t\tadjusted = valueParts[ 1 ] ?\n+\t\t\tinitialInUnit + ( valueParts[ 1 ] + 1 ) * valueParts[ 2 ] :\n+\t\t\t+valueParts[ 2 ];\n+\t\tif ( tween ) {\n+\t\t\ttween.unit = unit;\n+\t\t\ttween.start = initialInUnit;\n+\t\t\ttween.end = adjusted;\n+\t\t}\n+\t}\n+\treturn adjusted;\n+}\n+\n+\n+var defaultDisplayMap = {};\n+\n+function getDefaultDisplay( elem ) {\n+\tvar temp,\n+\t\tdoc = elem.ownerDocument,\n+\t\tnodeName = elem.nodeName,\n+\t\tdisplay = defaultDisplayMap[ nodeName ];\n+\n+\tif ( display ) {\n+\t\treturn display;\n+\t}\n+\n+\ttemp = doc.body.appendChild( doc.createElement( nodeName ) );\n+\tdisplay = jQuery.css( temp, \"display\" );\n+\n+\ttemp.parentNode.removeChild( temp );\n+\n+\tif ( display === \"none\" ) {\n+\t\tdisplay = \"block\";\n+\t}\n+\tdefaultDisplayMap[ nodeName ] = display;\n+\n+\treturn display;\n+}\n+\n+function showHide( elements, show ) {\n+\tvar display, elem,\n+\t\tvalues = [],\n+\t\tindex = 0,\n+\t\tlength = elements.length;\n+\n+\t\/\/ Determine new display value for elements that need to change\n+\tfor ( ; index < length; index++ ) {\n+\t\telem = elements[ index ];\n+\t\tif ( !elem.style ) {\n+\t\t\tcontinue;\n+\t\t}\n+\n+\t\tdisplay = elem.style.display;\n+\t\tif ( show ) {\n+\n+\t\t\t\/\/ Since we force visibility upon cascade-hidden elements, an immediate (and slow)\n+\t\t\t\/\/ check is required in this first loop unless we have a nonempty display value (either\n+\t\t\t\/\/ inline or about-to-be-restored)\n+\t\t\tif ( display === \"none\" ) {\n+\t\t\t\tvalues[ index ] = dataPriv.get( elem, \"display\" ) || null;\n+\t\t\t\tif ( !values[ index ] ) {\n+\t\t\t\t\telem.style.display = \"\";\n+\t\t\t\t}\n+\t\t\t}\n+\t\t\tif ( elem.style.display === \"\" && isHiddenWithinTree( elem ) ) {\n+\t\t\t\tvalues[ index ] = getDefaultDisplay( elem );\n+\t\t\t}\n+\t\t} else {\n+\t\t\tif ( display !== \"none\" ) {\n+\t\t\t\tvalues[ index ] = \"none\";\n+\n+\t\t\t\t\/\/ Remember what we're overwriting\n+\t\t\t\tdataPriv.set( elem, \"display\", display );\n+\t\t\t}\n+\t\t}\n+\t}\n+\n+\t\/\/ Set the display of the elements in a second loop to avoid constant reflow\n+\tfor ( index = 0; index < length; index++ ) {\n+\t\tif ( values[ index ] != null ) {\n+\t\t\telements[ index ].style.display = values[ index ];\n+\t\t}\n+\t}\n+\n+\treturn elements;\n+}\n+\n+jQuery.fn.extend( {\n+\tshow: function() {\n+\t\treturn showHide( this, true );\n+\t},\n+\thide: function() {\n+\t\treturn showHide( this );\n+\t},\n+\ttoggle: function( state ) {\n+\t\tif ( typeof state === \"boolean\" ) {\n+\t\t\treturn state ? this.show() : this.hide();\n+\t\t}\n+\n+\t\treturn this.each( function() {\n+\t\t\tif ( isHiddenWithinTree( this ) ) {\n+\t\t\t\tjQuery( this ).show();\n+\t\t\t} else {\n+\t\t\t\tjQuery( this ).hide();\n+\t\t\t}\n+\t\t} );\n+\t}\n+} );\n+var rcheckableType = ( \/^(?:checkbox|radio)$\/i );\n+\n+var rtagName = ( \/<([a-z][^\\\/\\0>\\x20\\t\\r\\n\\f]*)\/i );\n+\n+var rscriptType = ( \/^$|^module$|\\\/(?:java|ecma)script\/i );\n+\n+\n+\n+( function() {\n+\tvar fragment = document.createDocumentFragment(),\n+\t\tdiv = fragment.appendChild( document.createElement( \"div\" ) ),\n+\t\tinput = document.createElement( \"input\" );\n+\n+\t\/\/ Support: Android 4.0 - 4.3 only\n+\t\/\/ Check state lost if the name is set (trac-11217)\n+\t\/\/ Support: Windows Web Apps (WWA)\n+\t\/\/ `name` and `type` must use .setAttribute for WWA (trac-14901)\n+\tinput.setAttribute( \"type\", \"radio\" );\n+\tinput.setAttribute( \"checked\", \"checked\" );\n+\tinput.setAttribute( \"name\", \"t\" );\n+\n+\tdiv.appendChild( input );\n+\n+\t\/\/ Support: Android <=4.1 only\n+\t\/\/ Older WebKit doesn't clone checked state correctly in fragments\n+\tsupport.checkClone = div.cloneNode( true ).cloneNode( true ).lastChild.checked;\n+\n+\t\/\/ Support: IE <=11 only\n+\t\/\/ Make sure textarea (and checkbox) defaultValue is properly cloned\n+\tdiv.innerHTML = \"<textarea>x<\/textarea>\";\n+\tsupport.noCloneChecked = !!div.cloneNode( true ).lastChild.defaultValue;\n+\n+\t\/\/ Support: IE <=9 only\n+\t\/\/ IE <=9 replaces <option> tags with their contents when inserted outside of\n+\t\/\/ the select element.\n+\tdiv.innerHTML = \"<option><\/option>\";\n+\tsupport.option = !!div.lastChild;\n+} )();\n+\n+\n+\/\/ We have to close these tags to support XHTML (trac-13200)\n+var wrapMap = {\n+\n+\t\/\/ XHTML parsers do not magically insert elements in the\n+\t\/\/ same way that tag soup parsers do. So we cannot shorten\n+\t\/\/ this by omitting <tbody> or other required elements.\n+\tthead: [ 1, \"<table>\", \"<\/table>\" ],\n+\tcol: [ 2, \"<table><colgroup>\", \"<\/colgroup><\/table>\" ],\n+\ttr: [ 2, \"<table><tbody>\", \"<\/tbody><\/table>\" ],\n+\ttd: [ 3, \"<table><tbody><tr>\", \"<\/tr><\/tbody><\/table>\" ],\n+\n+\t_default: [ 0, \"\", \"\" ]\n+};\n+\n+wrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;\n+wrapMap.th = wrapMap.td;\n+\n+\/\/ Support: IE <=9 only\n+if ( !support.option ) {\n+\twrapMap.optgroup = wrapMap.option = [ 1, \"<select multiple='multiple'>\", \"<\/select>\" ];\n+}\n+\n+\n+function getAll( context, tag ) {\n+\n+\t\/\/ Support: IE <=9 - 11 only\n+\t\/\/ Use typeof to avoid zero-argument method invocation on host objects (trac-15151)\n+\tvar ret;\n+\n+\tif ( typeof context.getElementsByTagName !== \"undefined\" ) {\n+\t\tret = context.getElementsByTagName( tag || \"*\" );\n+\n+\t} else if ( typeof context.querySelectorAll !== \"undefined\" ) {\n+\t\tret = context.querySelectorAll( tag || \"*\" );\n+\n+\t} else {\n+\t\tret = [];\n+\t}\n+\n+\tif ( tag === undefined || tag && nodeName( context, tag ) ) {\n+\t\treturn jQuery.merge( [ context ], ret );\n+\t}\n+\n+\treturn ret;\n+}\n+\n+\n+\/\/ Mark scripts as having already been evaluated\n+function setGlobalEval( elems, refElements ) {\n+\tvar i = 0,\n+\t\tl = elems.length;\n+\n+\tfor ( ; i < l; i++ ) {\n+\t\tdataPriv.set(\n+\t\t\telems[ i ],\n+\t\t\t\"globalEval\",\n+\t\t\t!refElements || dataPriv.get( refElements[ i ], \"globalEval\" )\n+\t\t);\n+\t}\n+}\n+\n+\n+var rhtml = \/<|&#?\\w+;\/;\n+\n+function buildFragment( elems, context, scripts, selection, ignored ) {\n+\tvar elem, tmp, tag, wrap, attached, j,\n+\t\tfragment = context.createDocumentFragment(),\n+\t\tnodes = [],\n+\t\ti = 0,\n+\t\tl = elems.length;\n+\n+\tfor ( ; i < l; i++ ) {\n+\t\telem = elems[ i ];\n+\n+\t\tif ( elem || elem === 0 ) {\n+\n+\t\t\t\/\/ Add nodes directly\n+\t\t\tif ( toType( elem ) === \"object\" ) {\n+\n+\t\t\t\t\/\/ Support: Android <=4.0 only, PhantomJS 1 only\n+\t\t\t\t\/\/ push.apply(_, arraylike) throws on ancient WebKit\n+\t\t\t\tjQuery.merge( nodes, elem.nodeType ? [ elem ] : elem );\n+\n+\t\t\t\/\/ Convert non-html into a text node\n+\t\t\t} else if ( !rhtml.test( elem ) ) {\n+\t\t\t\tnodes.push( context.createTextNode( elem ) );\n+\n+\t\t\t\/\/ Convert html into DOM nodes\n+\t\t\t} else {\n+\t\t\t\ttmp = tmp || fragment.appendChild( context.createElement( \"div\" ) );\n+\n+\t\t\t\t\/\/ Deserialize a standard representation\n+\t\t\t\ttag = ( rtagName.exec( elem ) || [ \"\", \"\" ] )[ 1 ].toLowerCase();\n+\t\t\t\twrap = wrapMap[ tag ] || wrapMap._default;\n+\t\t\t\ttmp.innerHTML = wrap[ 1 ] + jQuery.htmlPrefilter( elem ) + wrap[ 2 ];\n+\n+\t\t\t\t\/\/ Descend through wrappers to the right content\n+\t\t\t\tj = wrap[ 0 ];\n+\t\t\t\twhile ( j-- ) {\n+\t\t\t\t\ttmp = tmp.lastChild;\n+\t\t\t\t}\n+\n+\t\t\t\t\/\/ Support: Android <=4.0 only, PhantomJS 1 only\n+\t\t\t\t\/\/ push.apply(_, arraylike) throws on ancient WebKit\n+\t\t\t\tjQuery.merge( nodes, tmp.childNodes );\n+\n+\t\t\t\t\/\/ Remember the top-level container\n+\t\t\t\ttmp = fragment.firstChild;\n+\n+\t\t\t\t\/\/ Ensure the created nodes are orphaned (trac-12392)\n+\t\t\t\ttmp.textContent = \"\";\n+\t\t\t}\n+\t\t}\n+\t}\n+\n+\t\/\/ Remove wrapper from fragment\n+\tfragment.textContent = \"\";\n+\n+\ti = 0;\n+\twhile ( ( elem = nodes[ i++ ] ) ) {\n+\n+\t\t\/\/ Skip elements already in the context collection (trac-4087)\n+\t\tif ( selection && jQuery.inArray( elem, selection ) > -1 ) {\n+\t\t\tif ( ignored ) {\n+\t\t\t\tignored.push( elem );\n+\t\t\t}\n+\t\t\tcontinue;\n+\t\t}\n+\n+\t\tattached = isAttached( elem );\n+\n+\t\t\/\/ Append to fragment\n+\t\ttmp = getAll( fragment.appendChild( elem ), \"script\" );\n+\n+\t\t\/\/ Preserve script evaluation history\n+\t\tif ( attached ) {\n+\t\t\tsetGlobalEval( tmp );\n+\t\t}\n+\n+\t\t\/\/ Capture executables\n+\t\tif ( scripts ) {\n+\t\t\tj = 0;\n+\t\t\twhile ( ( elem = tmp[ j++ ] ) ) {\n+\t\t\t\tif ( rscriptType.test( elem.type || \"\" ) ) {\n+\t\t\t\t\tscripts.push( elem );\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\t}\n+\n+\treturn fragment;\n+}\n+\n+\n+var rtypenamespace = \/^([^.]*)(?:\\.(.+)|)\/;\n+\n+function returnTrue() {\n+\treturn true;\n+}\n+\n+function returnFalse() {\n+\treturn false;\n+}\n+\n+function on( elem, types, selector, data, fn, one ) {\n+\tvar origFn, type;\n+\n+\t\/\/ Types can be a map of types\/handlers\n+\tif ( typeof types === \"object\" ) {\n+\n+\t\t\/\/ ( types-Object, selector, data )\n+\t\tif ( typeof selector !== \"string\" ) {\n+\n+\t\t\t\/\/ ( types-Object, data )\n+\t\t\tdata = data || selector;\n+\t\t\tselector = undefined;\n+\t\t}\n+\t\tfor ( type in types ) {\n+\t\t\ton( elem, type, selector, data, types[ type ], one );\n+\t\t}\n+\t\treturn elem;\n+\t}\n+\n+\tif ( data == null && fn == null ) {\n+\n+\t\t\/\/ ( types, fn )\n+\t\tfn = selector;\n+\t\tdata = selector = undefined;\n+\t} else if ( fn == null ) {\n+\t\tif ( typeof selector === \"string\" ) {\n+\n+\t\t\t\/\/ ( types, selector, fn )\n+\t\t\tfn = data;\n+\t\t\tdata = undefined;\n+\t\t} else {\n+\n+\t\t\t\/\/ ( types, data, fn )\n+\t\t\tfn = data;\n+\t\t\tdata = selector;\n+\t\t\tselector = undefined;\n+\t\t}\n+\t}\n+\tif ( fn === false ) {\n+\t\tfn = returnFalse;\n+\t} else if ( !fn ) {\n+\t\treturn elem;\n+\t}\n+\n+\tif ( one === 1 ) {\n+\t\torigFn = fn;\n+\t\tfn = function( event ) {\n+\n+\t\t\t\/\/ Can use an empty set, since event contains the info\n+\t\t\tjQuery().off( event );\n+\t\t\treturn origFn.apply( this, arguments );\n+\t\t};\n+\n+\t\t\/\/ Use same guid so caller can remove using origFn\n+\t\tfn.guid = origFn.guid || ( origFn.guid = jQuery.guid++ );\n+\t}\n+\treturn elem.each( function() {\n+\t\tjQuery.event.add( this, types, fn, data, selector );\n+\t} );\n+}\n+\n+\/*\n+ * Helper functions for managing events -- not part of the public interface.\n+ * Props to Dean Edwards' addEvent library for many of the ideas.\n+ *\/\n+jQuery.event = {\n+\n+\tglobal: {},\n+\n+\tadd: function( elem, types, handler, data, selector ) {\n+\n+\t\tvar handleObjIn, eventHandle, tmp,\n+\t\t\tevents, t, handleObj,\n+\t\t\tspecial, handlers, type, namespaces, origType,\n+\t\t\telemData = dataPriv.get( elem );\n+\n+\t\t\/\/ Only attach events to objects that accept data\n+\t\tif ( !acceptData( elem ) ) {\n+\t\t\treturn;\n+\t\t}\n+\n+\t\t\/\/ Caller can pass in an object of custom data in lieu of the handler\n+\t\tif ( handler.handler ) {\n+\t\t\thandleObjIn = handler;\n+\t\t\thandler = handleObjIn.handler;\n+\t\t\tselector = handleObjIn.selector;\n+\t\t}\n+\n+\t\t\/\/ Ensure that invalid selectors throw exceptions at attach time\n+\t\t\/\/ Evaluate against documentElement in case elem is a non-element node (e.g., document)\n+\t\tif ( selector ) {\n+\t\t\tjQuery.find.matchesSelector( documentElement, selector );\n+\t\t}\n+\n+\t\t\/\/ Make sure that the handler has a unique ID, used to find\/remove it later\n+\t\tif ( !handler.guid ) {\n+\t\t\thandler.guid = jQuery.guid++;\n+\t\t}\n+\n+\t\t\/\/ Init the element's event structure and main handler, if this is the first\n+\t\tif ( !( events = elemData.events ) ) {\n+\t\t\tevents = elemData.events = Object.create( null );\n+\t\t}\n+\t\tif ( !( eventHandle = elemData.handle ) ) {\n+\t\t\teventHandle = elemData.handle = function( e ) {\n+\n+\t\t\t\t\/\/ Discard the second event of a jQuery.event.trigger() and\n+\t\t\t\t\/\/ when an event is called after a page has unloaded\n+\t\t\t\treturn typeof jQuery !== \"undefined\" && jQuery.event.triggered !== e.type ?\n+\t\t\t\t\tjQuery.event.dispatch.apply( elem, arguments ) : undefined;\n+\t\t\t};\n+\t\t}\n+\n+\t\t\/\/ Handle multiple events separated by a space\n+\t\ttypes = ( types || \"\" ).match( rnothtmlwhite ) || [ \"\" ];\n+\t\tt = types.length;\n+\t\twhile ( t-- ) {\n+\t\t\ttmp = rtypenamespace.exec( types[ t ] ) || [];\n+\t\t\ttype = origType = tmp[ 1 ];\n+\t\t\tnamespaces = ( tmp[ 2 ] || \"\" ).split( \".\" ).sort();\n+\n+\t\t\t\/\/ There *must* be a type, no attaching namespace-only handlers\n+\t\t\tif ( !type ) {\n+\t\t\t\tcontinue;\n+\t\t\t}\n+\n+\t\t\t\/\/ If event changes its type, use the special event handlers for the changed type\n+\t\t\tspecial = jQuery.event.special[ type ] || {};\n+\n+\t\t\t\/\/ If selector defined, determine special event api type, otherwise given type\n+\t\t\ttype = ( selector ? special.delegateType : special.bindType ) || type;\n+\n+\t\t\t\/\/ Update special based on newly reset type\n+\t\t\tspecial = jQuery.event.special[ type ] || {};\n+\n+\t\t\t\/\/ handleObj is passed to all event handlers\n+\t\t\thandleObj = jQuery.extend( {\n+\t\t\t\ttype: type,\n+\t\t\t\torigType: origType,\n+\t\t\t\tdata: data,\n+\t\t\t\thandler: handler,\n+\t\t\t\tguid: handler.guid,\n+\t\t\t\tselector: selector,\n+\t\t\t\tneedsContext: selector && jQuery.expr.match.needsContext.test( selector ),\n+\t\t\t\tnamespace: namespaces.join( \".\" )\n+\t\t\t}, handleObjIn );\n+\n+\t\t\t\/\/ Init the event handler queue if we're the first\n+\t\t\tif ( !( handlers = events[ type ] ) ) {\n+\t\t\t\thandlers = events[ type ] = [];\n+\t\t\t\thandlers.delegateCount = 0;\n+\n+\t\t\t\t\/\/ Only use addEventListener if the special events handler returns false\n+\t\t\t\tif ( !special.setup ||\n+\t\t\t\t\tspecial.setup.call( elem, data, namespaces, eventHandle ) === false ) {\n+\n+\t\t\t\t\tif ( elem.addEventListener ) {\n+\t\t\t\t\t\telem.addEventListener( type, eventHandle );\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t}\n+\n+\t\t\tif ( special.add ) {\n+\t\t\t\tspecial.add.call( elem, handleObj );\n+\n+\t\t\t\tif ( !handleObj.handler.guid ) {\n+\t\t\t\t\thandleObj.handler.guid = handler.guid;\n+\t\t\t\t}\n+\t\t\t}\n+\n+\t\t\t\/\/ Add to the element's handler list, delegates in front\n+\t\t\tif ( selector ) {\n+\t\t\t\thandlers.splice( handlers.delegateCount++, 0, handleObj );\n+\t\t\t} else {\n+\t\t\t\thandlers.push( handleObj );\n+\t\t\t}\n+\n+\t\t\t\/\/ Keep track of which events have ever been used, for event optimization\n+\t\t\tjQuery.event.global[ type ] = true;\n+\t\t}\n+\n+\t},\n+\n+\t\/\/ Detach an event or set of events from an element\n+\tremove: function( elem, types, handler, selector, mappedTypes ) {\n+\n+\t\tvar j, origCount, tmp,\n+\t\t\tevents, t, handleObj,\n+\t\t\tspecial, handlers, type, namespaces, origType,\n+\t\t\telemData = dataPriv.hasData( elem ) && dataPriv.get( elem );\n+\n+\t\tif ( !elemData || !( events = elemData.events ) ) {\n+\t\t\treturn;\n+\t\t}\n+\n+\t\t\/\/ Once for each type.namespace in types; type may be omitted\n+\t\ttypes = ( types || \"\" ).match( rnothtmlwhite ) || [ \"\" ];\n+\t\tt = types.length;\n+\t\twhile ( t-- ) {\n+\t\t\ttmp = rtypenamespace.exec( types[ t ] ) || [];\n+\t\t\ttype = origType = tmp[ 1 ];\n+\t\t\tnamespaces = ( tmp[ 2 ] || \"\" ).split( \".\" ).sort();\n+\n+\t\t\t\/\/ Unbind all events (on this namespace, if provided) for the element\n+\t\t\tif ( !type ) {\n+\t\t\t\tfor ( type in events ) {\n+\t\t\t\t\tjQuery.event.remove( elem, type + types[ t ], handler, selector, true );\n+\t\t\t\t}\n+\t\t\t\tcontinue;\n+\t\t\t}\n+\n+\t\t\tspecial = jQuery.event.special[ type ] || {};\n+\t\t\ttype = ( selector ? special.delegateType : special.bindType ) || type;\n+\t\t\thandlers = events[ type ] || [];\n+\t\t\ttmp = tmp[ 2 ] &&\n+\t\t\t\tnew RegExp( \"(^|\\\\.)\" + namespaces.join( \"\\\\.(?:.*\\\\.|)\" ) + \"(\\\\.|$)\" );\n+\n+\t\t\t\/\/ Remove matching events\n+\t\t\torigCount = j = handlers.length;\n+\t\t\twhile ( j-- ) {\n+\t\t\t\thandleObj = handlers[ j ];\n+\n+\t\t\t\tif ( ( mappedTypes || origType === handleObj.origType ) &&\n+\t\t\t\t\t( !handler || handler.guid === handleObj.guid ) &&\n+\t\t\t\t\t( !tmp || tmp.test( handleObj.namespace ) ) &&\n+\t\t\t\t\t( !selector || selector === handleObj.selector ||\n+\t\t\t\t\t\tselector === \"**\" && handleObj.selector ) ) {\n+\t\t\t\t\thandlers.splice( j, 1 );\n+\n+\t\t\t\t\tif ( handleObj.selector ) {\n+\t\t\t\t\t\thandlers.delegateCount--;\n+\t\t\t\t\t}\n+\t\t\t\t\tif ( special.remove ) {\n+\t\t\t\t\t\tspecial.remove.call( elem, handleObj );\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t}\n+\n+\t\t\t\/\/ Remove generic event handler if we removed something and no more handlers exist\n+\t\t\t\/\/ (avoids potential for endless recursion during removal of special event handlers)\n+\t\t\tif ( origCount && !handlers.length ) {\n+\t\t\t\tif ( !special.teardown ||\n+\t\t\t\t\tspecial.teardown.call( elem, namespaces, elemData.handle ) === false ) {\n+\n+\t\t\t\t\tjQuery.removeEvent( elem, type, elemData.handle );\n+\t\t\t\t}\n+\n+\t\t\t\tdelete events[ type ];\n+\t\t\t}\n+\t\t}\n+\n+\t\t\/\/ Remove data and the expando if it's no longer used\n+\t\tif ( jQuery.isEmptyObject( events ) ) {\n+\t\t\tdataPriv.remove( elem, \"handle events\" );\n+\t\t}\n+\t},\n+\n+\tdispatch: function( nativeEvent ) {\n+\n+\t\tvar i, j, ret, matched, handleObj, handlerQueue,\n+\t\t\targs = new Array( arguments.length ),\n+\n+\t\t\t\/\/ Make a writable jQuery.Event from the native event object\n+\t\t\tevent = jQuery.event.fix( nativeEvent ),\n+\n+\t\t\thandlers = (\n+\t\t\t\tdataPriv.get( this, \"events\" ) || Object.create( null )\n+\t\t\t)[ event.type ] || [],\n+\t\t\tspecial = jQuery.event.special[ event.type ] || {};\n+\n+\t\t\/\/ Use the fix-ed jQuery.Event rather than the (read-only) native event\n+\t\targs[ 0 ] = event;\n+\n+\t\tfor ( i = 1; i < arguments.length; i++ ) {\n+\t\t\targs[ i ] = arguments[ i ];\n+\t\t}\n+\n+\t\tevent.delegateTarget = this;\n+\n+\t\t\/\/ Call the preDispatch hook for the mapped type, and let it bail if desired\n+\t\tif ( special.preDispatch && special.preDispatch.call( this, event ) === false ) {\n+\t\t\treturn;\n+\t\t}\n+\n+\t\t\/\/ Determine handlers\n+\t\thandlerQueue = jQuery.event.handlers.call( this, event, handlers );\n+\n+\t\t\/\/ Run delegates first; they may want to stop propagation beneath us\n+\t\ti = 0;\n+\t\twhile ( ( matched = handlerQueue[ i++ ] ) && !event.isPropagationStopped() ) {\n+\t\t\tevent.currentTarget = matched.elem;\n+\n+\t\t\tj = 0;\n+\t\t\twhile ( ( handleObj = matched.handlers[ j++ ] ) &&\n+\t\t\t\t!event.isImmediatePropagationStopped() ) {\n+\n+\t\t\t\t\/\/ If the event is namespaced, then each handler is only invoked if it is\n+\t\t\t\t\/\/ specially universal or its namespaces are a superset of the event's.\n+\t\t\t\tif ( !event.rnamespace || handleObj.namespace === false ||\n+\t\t\t\t\tevent.rnamespace.test( handleObj.namespace ) ) {\n+\n+\t\t\t\t\tevent.handleObj = handleObj;\n+\t\t\t\t\tevent.data = handleObj.data;\n+\n+\t\t\t\t\tret = ( ( jQuery.event.special[ handleObj.origType ] || {} ).handle ||\n+\t\t\t\t\t\thandleObj.handler ).apply( matched.elem, args );\n+\n+\t\t\t\t\tif ( ret !== undefined ) {\n+\t\t\t\t\t\tif ( ( event.result = ret ) === false ) {\n+\t\t\t\t\t\t\tevent.preventDefault();\n+\t\t\t\t\t\t\tevent.stopPropagation();\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\n+\t\t\/\/ Call the postDispatch hook for the mapped type\n+\t\tif ( special.postDispatch ) {\n+\t\t\tspecial.postDispatch.call( this, event );\n+\t\t}\n+\n+\t\treturn event.result;\n+\t},\n+\n+\thandlers: function( event, handlers ) {\n+\t\tvar i, handleObj, sel, matchedHandlers, matchedSelectors,\n+\t\t\thandlerQueue = [],\n+\t\t\tdelegateCount = handlers.delegateCount,\n+\t\t\tcur = event.target;\n+\n+\t\t\/\/ Find delegate handlers\n+\t\tif ( delegateCount &&\n+\n+\t\t\t\/\/ Support: IE <=9\n+\t\t\t\/\/ Black-hole SVG <use> instance trees (trac-13180)\n+\t\t\tcur.nodeType &&\n+\n+\t\t\t\/\/ Support: Firefox <=42\n+\t\t\t\/\/ Suppress spec-violating clicks indicating a non-primary pointer button (trac-3861)\n+\t\t\t\/\/ https:\/\/www.w3.org\/TR\/DOM-Level-3-Events\/#event-type-click\n+\t\t\t\/\/ Support: IE 11 only\n+\t\t\t\/\/ ...but not arrow key \"clicks\" of radio inputs, which can have `button` -1 (gh-2343)\n+\t\t\t!( event.type === \"click\" && event.button >= 1 ) ) {\n+\n+\t\t\tfor ( ; cur !== this; cur = cur.parentNode || this ) {\n+\n+\t\t\t\t\/\/ Don't check non-elements (trac-13208)\n+\t\t\t\t\/\/ Don't process clicks on disabled elements (trac-6911, trac-8165, trac-11382, trac-11764)\n+\t\t\t\tif ( cur.nodeType === 1 && !( event.type === \"click\" && cur.disabled === true ) ) {\n+\t\t\t\t\tmatchedHandlers = [];\n+\t\t\t\t\tmatchedSelectors = {};\n+\t\t\t\t\tfor ( i = 0; i < delegateCount; i++ ) {\n+\t\t\t\t\t\thandleObj = handlers[ i ];\n+\n+\t\t\t\t\t\t\/\/ Don't conflict with Object.prototype properties (trac-13203)\n+\t\t\t\t\t\tsel = handleObj.selector + \" \";\n+\n+\t\t\t\t\t\tif ( matchedSelectors[ sel ] === undefined ) {\n+\t\t\t\t\t\t\tmatchedSelectors[ sel ] = handleObj.needsContext ?\n+\t\t\t\t\t\t\t\tjQuery( sel, this ).index( cur ) > -1 :\n+\t\t\t\t\t\t\t\tjQuery.find( sel, this, null, [ cur ] ).length;\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tif ( matchedSelectors[ sel ] ) {\n+\t\t\t\t\t\t\tmatchedHandlers.push( handleObj );\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t\tif ( matchedHandlers.length ) {\n+\t\t\t\t\t\thandlerQueue.push( { elem: cur, handlers: matchedHandlers } );\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\n+\t\t\/\/ Add the remaining (directly-bound) handlers\n+\t\tcur = this;\n+\t\tif ( delegateCount < handlers.length ) {\n+\t\t\thandlerQueue.push( { elem: cur, handlers: handlers.slice( delegateCount ) } );\n+\t\t}\n+\n+\t\treturn handlerQueue;\n+\t},\n+\n+\taddProp: function( name, hook ) {\n+\t\tObject.defineProperty( jQuery.Event.prototype, name, {\n+\t\t\tenumerable: true,\n+\t\t\tconfigurable: true,\n+\n+\t\t\tget: isFunction( hook ) ?\n+\t\t\t\tfunction() {\n+\t\t\t\t\tif ( this.originalEvent ) {\n+\t\t\t\t\t\treturn hook( this.originalEvent );\n+\t\t\t\t\t}\n+\t\t\t\t} :\n+\t\t\t\tfunction() {\n+\t\t\t\t\tif ( this.originalEvent ) {\n+\t\t\t\t\t\treturn this.originalEvent[ name ];\n+\t\t\t\t\t}\n+\t\t\t\t},\n+\n+\t\t\tset: function( value ) {\n+\t\t\t\tObject.defineProperty( this, name, {\n+\t\t\t\t\tenumerable: true,\n+\t\t\t\t\tconfigurable: true,\n+\t\t\t\t\twritable: true,\n+\t\t\t\t\tvalue: value\n+\t\t\t\t} );\n+\t\t\t}\n+\t\t} );\n+\t},\n+\n+\tfix: function( originalEvent ) {\n+\t\treturn originalEvent[ jQuery.expando ] ?\n+\t\t\toriginalEvent :\n+\t\t\tnew jQuery.Event( originalEvent );\n+\t},\n+\n+\tspecial: {\n+\t\tload: {\n+\n+\t\t\t\/\/ Prevent triggered image.load events from bubbling to window.load\n+\t\t\tnoBubble: true\n+\t\t},\n+\t\tclick: {\n+\n+\t\t\t\/\/ Utilize native event to ensure correct state for checkable inputs\n+\t\t\tsetup: function( data ) {\n+\n+\t\t\t\t\/\/ For mutual compressibility with _default, replace `this` access with a local var.\n+\t\t\t\t\/\/ `|| data` is dead code meant only to preserve the variable through minification.\n+\t\t\t\tvar el = this || data;\n+\n+\t\t\t\t\/\/ Claim the first handler\n+\t\t\t\tif ( rcheckableType.test( el.type ) &&\n+\t\t\t\t\tel.click && nodeName( el, \"input\" ) ) {\n+\n+\t\t\t\t\t\/\/ dataPriv.set( el, \"click\", ... )\n+\t\t\t\t\tleverageNative( el, \"click\", true );\n+\t\t\t\t}\n+\n+\t\t\t\t\/\/ Return false to allow normal processing in the caller\n+\t\t\t\treturn false;\n+\t\t\t},\n+\t\t\ttrigger: function( data ) {\n+\n+\t\t\t\t\/\/ For mutual compressibility with _default, replace `this` access with a local var.\n+\t\t\t\t\/\/ `|| data` is dead code meant only to preserve the variable through minification.\n+\t\t\t\tvar el = this || data;\n+\n+\t\t\t\t\/\/ Force setup before triggering a click\n+\t\t\t\tif ( rcheckableType.test( el.type ) &&\n+\t\t\t\t\tel.click && nodeName( el, \"input\" ) ) {\n+\n+\t\t\t\t\tleverageNative( el, \"click\" );\n+\t\t\t\t}\n+\n+\t\t\t\t\/\/ Return non-false to allow normal event-path propagation\n+\t\t\t\treturn true;\n+\t\t\t},\n+\n+\t\t\t\/\/ For cross-browser consistency, suppress native .click() on links\n+\t\t\t\/\/ Also prevent it if we're currently inside a leveraged native-event stack\n+\t\t\t_default: function( event ) {\n+\t\t\t\tvar target = event.target;\n+\t\t\t\treturn rcheckableType.test( target.type ) &&\n+\t\t\t\t\ttarget.click && nodeName( target, \"input\" ) &&\n+\t\t\t\t\tdataPriv.get( target, \"click\" ) ||\n+\t\t\t\t\tnodeName( target, \"a\" );\n+\t\t\t}\n+\t\t},\n+\n+\t\tbeforeunload: {\n+\t\t\tpostDispatch: function( event ) {\n+\n+\t\t\t\t\/\/ Support: Firefox 20+\n+\t\t\t\t\/\/ Firefox doesn't alert if the returnValue field is not set.\n+\t\t\t\tif ( event.result !== undefined && event.originalEvent ) {\n+\t\t\t\t\tevent.originalEvent.returnValue = event.result;\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\t}\n+};\n+\n+\/\/ Ensure the presence of an event listener that handles manually-triggered\n+\/\/ synthetic events by interrupting progress until reinvoked in response to\n+\/\/ *native* events that it fires directly, ensuring that state changes have\n+\/\/ already occurred before other listeners are invoked.\n+function leverageNative( el, type, isSetup ) {\n+\n+\t\/\/ Missing `isSetup` indicates a trigger call, which must force setup through jQuery.event.add\n+\tif ( !isSetup ) {\n+\t\tif ( dataPriv.get( el, type ) === undefined ) {\n+\t\t\tjQuery.event.add( el, type, returnTrue );\n+\t\t}\n+\t\treturn;\n+\t}\n+\n+\t\/\/ Register the controller as a special universal handler for all event namespaces\n+\tdataPriv.set( el, type, false );\n+\tjQuery.event.add( el, type, {\n+\t\tnamespace: false,\n+\t\thandler: function( event ) {\n+\t\t\tvar result,\n+\t\t\t\tsaved = dataPriv.get( this, type );\n+\n+\t\t\tif ( ( event.isTrigger & 1 ) && this[ type ] ) {\n+\n+\t\t\t\t\/\/ Interrupt processing of the outer synthetic .trigger()ed event\n+\t\t\t\tif ( !saved ) {\n+\n+\t\t\t\t\t\/\/ Store arguments for use when handling the inner native event\n+\t\t\t\t\t\/\/ There will always be at least one argument (an event object), so this array\n+\t\t\t\t\t\/\/ will not be confused with a leftover capture object.\n+\t\t\t\t\tsaved = slice.call( arguments );\n+\t\t\t\t\tdataPriv.set( this, type, saved );\n+\n+\t\t\t\t\t\/\/ Trigger the native event and capture its result\n+\t\t\t\t\tthis[ type ]();\n+\t\t\t\t\tresult = dataPriv.get( this, type );\n+\t\t\t\t\tdataPriv.set( this, type, false );\n+\n+\t\t\t\t\tif ( saved !== result ) {\n+\n+\t\t\t\t\t\t\/\/ Cancel the outer synthetic event\n+\t\t\t\t\t\tevent.stopImmediatePropagation();\n+\t\t\t\t\t\tevent.preventDefault();\n+\n+\t\t\t\t\t\treturn result;\n+\t\t\t\t\t}\n+\n+\t\t\t\t\/\/ If this is an inner synthetic event for an event with a bubbling surrogate\n+\t\t\t\t\/\/ (focus or blur), assume that the surrogate already propagated from triggering\n+\t\t\t\t\/\/ the native event and prevent that from happening again here.\n+\t\t\t\t\/\/ This technically gets the ordering wrong w.r.t. to `.trigger()` (in which the\n+\t\t\t\t\/\/ bubbling surrogate propagates *after* the non-bubbling base), but that seems\n+\t\t\t\t\/\/ less bad than duplication.\n+\t\t\t\t} else if ( ( jQuery.event.special[ type ] || {} ).delegateType ) {\n+\t\t\t\t\tevent.stopPropagation();\n+\t\t\t\t}\n+\n+\t\t\t\/\/ If this is a native event triggered above, everything is now in order\n+\t\t\t\/\/ Fire an inner synthetic event with the original arguments\n+\t\t\t} else if ( saved ) {\n+\n+\t\t\t\t\/\/ ...and capture the result\n+\t\t\t\tdataPriv.set( this, type, jQuery.event.trigger(\n+\t\t\t\t\tsaved[ 0 ],\n+\t\t\t\t\tsaved.slice( 1 ),\n+\t\t\t\t\tthis\n+\t\t\t\t) );\n+\n+\t\t\t\t\/\/ Abort handling of the native event by all jQuery handlers while allowing\n+\t\t\t\t\/\/ native handlers on the same element to run. On target, this is achieved\n+\t\t\t\t\/\/ by stopping immediate propagation just on the jQuery event. However,\n+\t\t\t\t\/\/ the native event is re-wrapped by a jQuery one on each level of the\n+\t\t\t\t\/\/ propagation so the only way to stop it for jQuery is to stop it for\n+\t\t\t\t\/\/ everyone via native `stopPropagation()`. This is not a problem for\n+\t\t\t\t\/\/ focus\/blur which don't bubble, but it does also stop click on checkboxes\n+\t\t\t\t\/\/ and radios. We accept this limitation.\n+\t\t\t\tevent.stopPropagation();\n+\t\t\t\tevent.isImmediatePropagationStopped = returnTrue;\n+\t\t\t}\n+\t\t}\n+\t} );\n+}\n+\n+jQuery.removeEvent = function( elem, type, handle ) {\n+\n+\t\/\/ This \"if\" is needed for plain objects\n+\tif ( elem.removeEventListener ) {\n+\t\telem.removeEventListener( type, handle );\n+\t}\n+};\n+\n+jQuery.Event = function( src, props ) {\n+\n+\t\/\/ Allow instantiation without the 'new' keyword\n+\tif ( !( this instanceof jQuery.Event ) ) {\n+\t\treturn new jQuery.Event( src, props );\n+\t}\n+\n+\t\/\/ Event object\n+\tif ( src && src.type ) {\n+\t\tthis.originalEvent = src;\n+\t\tthis.type = src.type;\n+\n+\t\t\/\/ Events bubbling up the document may have been marked as prevented\n+\t\t\/\/ by a handler lower down the tree; reflect the correct value.\n+\t\tthis.isDefaultPrevented = src.defaultPrevented ||\n+\t\t\t\tsrc.defaultPrevented === undefined &&\n+\n+\t\t\t\t\/\/ Support: Android <=2.3 only\n+\t\t\t\tsrc.returnValue === false ?\n+\t\t\treturnTrue :\n+\t\t\treturnFalse;\n+\n+\t\t\/\/ Create target properties\n+\t\t\/\/ Support: Safari <=6 - 7 only\n+\t\t\/\/ Target should not be a text node (trac-504, trac-13143)\n+\t\tthis.target = ( src.target && src.target.nodeType === 3 ) ?\n+\t\t\tsrc.target.parentNode :\n+\t\t\tsrc.target;\n+\n+\t\tthis.currentTarget = src.currentTarget;\n+\t\tthis.relatedTarget = src.relatedTarget;\n+\n+\t\/\/ Event type\n+\t} else {\n+\t\tthis.type = src;\n+\t}\n+\n+\t\/\/ Put explicitly provided properties onto the event object\n+\tif ( props ) {\n+\t\tjQuery.extend( this, props );\n+\t}\n+\n+\t\/\/ Create a timestamp if incoming event doesn't have one\n+\tthis.timeStamp = src && src.timeStamp || Date.now();\n+\n+\t\/\/ Mark it as fixed\n+\tthis[ jQuery.expando ] = true;\n+};\n+\n+\/\/ jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding\n+\/\/ https:\/\/www.w3.org\/TR\/2003\/WD-DOM-Level-3-Events-20030331\/ecma-script-binding.html\n+jQuery.Event.prototype = {\n+\tconstructor: jQuery.Event,\n+\tisDefaultPrevented: returnFalse,\n+\tisPropagationStopped: returnFalse,\n+\tisImmediatePropagationStopped: returnFalse,\n+\tisSimulated: false,\n+\n+\tpreventDefault: function() {\n+\t\tvar e = this.originalEvent;\n+\n+\t\tthis.isDefaultPrevented = returnTrue;\n+\n+\t\tif ( e && !this.isSimulated ) {\n+\t\t\te.preventDefault();\n+\t\t}\n+\t},\n+\tstopPropagation: function() {\n+\t\tvar e = this.originalEvent;\n+\n+\t\tthis.isPropagationStopped = returnTrue;\n+\n+\t\tif ( e && !this.isSimulated ) {\n+\t\t\te.stopPropagation();\n+\t\t}\n+\t},\n+\tstopImmediatePropagation: function() {\n+\t\tvar e = this.originalEvent;\n+\n+\t\tthis.isImmediatePropagationStopped = returnTrue;\n+\n+\t\tif ( e && !this.isSimulated ) {\n+\t\t\te.stopImmediatePropagation();\n+\t\t}\n+\n+\t\tthis.stopPropagation();\n+\t}\n+};\n+\n+\/\/ Includes all common event props including KeyEvent and MouseEvent specific props\n+jQuery.each( {\n+\taltKey: true,\n+\tbubbles: true,\n+\tcancelable: true,\n+\tchangedTouches: true,\n+\tctrlKey: true,\n+\tdetail: true,\n+\teventPhase: true,\n+\tmetaKey: true,\n+\tpageX: true,\n+\tpageY: true,\n+\tshiftKey: true,\n+\tview: true,\n+\t\"char\": true,\n+\tcode: true,\n+\tcharCode: true,\n+\tkey: true,\n+\tkeyCode: true,\n+\tbutton: true,\n+\tbuttons: true,\n+\tclientX: true,\n+\tclientY: true,\n+\toffsetX: true,\n+\toffsetY: true,\n+\tpointerId: true,\n+\tpointerType: true,\n+\tscreenX: true,\n+\tscreenY: true,\n+\ttargetTouches: true,\n+\ttoElement: true,\n+\ttouches: true,\n+\twhich: true\n+}, jQuery.event.addProp );\n+\n+jQuery.each( { focus: \"focusin\", blur: \"focusout\" }, function( type, delegateType ) {\n+\n+\tfunction focusMappedHandler( nativeEvent ) {\n+\t\tif ( document.documentMode ) {\n+\n+\t\t\t\/\/ Support: IE 11+\n+\t\t\t\/\/ Attach a single focusin\/focusout handler on the document while someone wants\n+\t\t\t\/\/ focus\/blur. This is because the former are synchronous in IE while the latter\n+\t\t\t\/\/ are async. In other browsers, all those handlers are invoked synchronously.\n+\n+\t\t\t\/\/ `handle` from private data would already wrap the event, but we need\n+\t\t\t\/\/ to change the `type` here.\n+\t\t\tvar handle = dataPriv.get( this, \"handle\" ),\n+\t\t\t\tevent = jQuery.event.fix( nativeEvent );\n+\t\t\tevent.type = nativeEvent.type === \"focusin\" ? \"focus\" : \"blur\";\n+\t\t\tevent.isSimulated = true;\n+\n+\t\t\t\/\/ First, handle focusin\/focusout\n+\t\t\thandle( nativeEvent );\n+\n+\t\t\t\/\/ ...then, handle focus\/blur\n+\t\t\t\/\/\n+\t\t\t\/\/ focus\/blur don't bubble while focusin\/focusout do; simulate the former by only\n+\t\t\t\/\/ invoking the handler at the lower level.\n+\t\t\tif ( event.target === event.currentTarget ) {\n+\n+\t\t\t\t\/\/ The setup part calls `leverageNative`, which, in turn, calls\n+\t\t\t\t\/\/ `jQuery.event.add`, so event handle will already have been set\n+\t\t\t\t\/\/ by this point.\n+\t\t\t\thandle( event );\n+\t\t\t}\n+\t\t} else {\n+\n+\t\t\t\/\/ For non-IE browsers, attach a single capturing handler on the document\n+\t\t\t\/\/ while someone wants focusin\/focusout.\n+\t\t\tjQuery.event.simulate( delegateType, nativeEvent.target,\n+\t\t\t\tjQuery.event.fix( nativeEvent ) );\n+\t\t}\n+\t}\n+\n+\tjQuery.event.special[ type ] = {\n+\n+\t\t\/\/ Utilize native event if possible so blur\/focus sequence is correct\n+\t\tsetup: function() {\n+\n+\t\t\tvar attaches;\n+\n+\t\t\t\/\/ Claim the first handler\n+\t\t\t\/\/ dataPriv.set( this, \"focus\", ... )\n+\t\t\t\/\/ dataPriv.set( this, \"blur\", ... )\n+\t\t\tleverageNative( this, type, true );\n+\n+\t\t\tif ( document.documentMode ) {\n+\n+\t\t\t\t\/\/ Support: IE 9 - 11+\n+\t\t\t\t\/\/ We use the same native handler for focusin & focus (and focusout & blur)\n+\t\t\t\t\/\/ so we need to coordinate setup & teardown parts between those events.\n+\t\t\t\t\/\/ Use `delegateType` as the key as `type` is already used by `leverageNative`.\n+\t\t\t\tattaches = dataPriv.get( this, delegateType );\n+\t\t\t\tif ( !attaches ) {\n+\t\t\t\t\tthis.addEventListener( delegateType, focusMappedHandler );\n+\t\t\t\t}\n+\t\t\t\tdataPriv.set( this, delegateType, ( attaches || 0 ) + 1 );\n+\t\t\t} else {\n+\n+\t\t\t\t\/\/ Return false to allow normal processing in the caller\n+\t\t\t\treturn false;\n+\t\t\t}\n+\t\t},\n+\t\ttrigger: function() {\n+\n+\t\t\t\/\/ Force setup before trigger\n+\t\t\tleverageNative( this, type );\n+\n+\t\t\t\/\/ Return non-false to allow normal event-path propagation\n+\t\t\treturn true;\n+\t\t},\n+\n+\t\tteardown: function() {\n+\t\t\tvar attaches;\n+\n+\t\t\tif ( document.documentMode ) {\n+\t\t\t\tattaches = dataPriv.get( this, delegateType ) - 1;\n+\t\t\t\tif ( !attaches ) {\n+\t\t\t\t\tthis.removeEventListener( delegateType, focusMappedHandler );\n+\t\t\t\t\tdataPriv.remove( this, delegateType );\n+\t\t\t\t} else {\n+\t\t\t\t\tdataPriv.set( this, delegateType, attaches );\n+\t\t\t\t}\n+\t\t\t} else {\n+\n+\t\t\t\t\/\/ Return false to indicate standard teardown should be applied\n+\t\t\t\treturn false;\n+\t\t\t}\n+\t\t},\n+\n+\t\t\/\/ Suppress native focus or blur if we're currently inside\n+\t\t\/\/ a leveraged native-event stack\n+\t\t_default: function( event ) {\n+\t\t\treturn dataPriv.get( event.target, type );\n+\t\t},\n+\n+\t\tdelegateType: delegateType\n+\t};\n+\n+\t\/\/ Support: Firefox <=44\n+\t\/\/ Firefox doesn't have focus(in | out) events\n+\t\/\/ Related ticket - https:\/\/bugzilla.mozilla.org\/show_bug.cgi?id=687787\n+\t\/\/\n+\t\/\/ Support: Chrome <=48 - 49, Safari <=9.0 - 9.1\n+\t\/\/ focus(in | out) events fire after focus & blur events,\n+\t\/\/ which is spec violation - http:\/\/www.w3.org\/TR\/DOM-Level-3-Events\/#events-focusevent-event-order\n+\t\/\/ Related ticket - https:\/\/bugs.chromium.org\/p\/chromium\/issues\/detail?id=449857\n+\t\/\/\n+\t\/\/ Support: IE 9 - 11+\n+\t\/\/ To preserve relative focusin\/focus & focusout\/blur event order guaranteed on the 3.x branch,\n+\t\/\/ attach a single handler for both events in IE.\n+\tjQuery.event.special[ delegateType ] = {\n+\t\tsetup: function() {\n+\n+\t\t\t\/\/ Handle: regular nodes (via `this.ownerDocument`), window\n+\t\t\t\/\/ (via `this.document`) & document (via `this`).\n+\t\t\tvar doc = this.ownerDocument || this.document || this,\n+\t\t\t\tdataHolder = document.documentMode ? this : doc,\n+\t\t\t\tattaches = dataPriv.get( dataHolder, delegateType );\n+\n+\t\t\t\/\/ Support: IE 9 - 11+\n+\t\t\t\/\/ We use the same native handler for focusin & focus (and focusout & blur)\n+\t\t\t\/\/ so we need to coordinate setup & teardown parts between those events.\n+\t\t\t\/\/ Use `delegateType` as the key as `type` is already used by `leverageNative`.\n+\t\t\tif ( !attaches ) {\n+\t\t\t\tif ( document.documentMode ) {\n+\t\t\t\t\tthis.addEventListener( delegateType, focusMappedHandler );\n+\t\t\t\t} else {\n+\t\t\t\t\tdoc.addEventListener( type, focusMappedHandler, true );\n+\t\t\t\t}\n+\t\t\t}\n+\t\t\tdataPriv.set( dataHolder, delegateType, ( attaches || 0 ) + 1 );\n+\t\t},\n+\t\tteardown: function() {\n+\t\t\tvar doc = this.ownerDocument || this.document || this,\n+\t\t\t\tdataHolder = document.documentMode ? this : doc,\n+\t\t\t\tattaches = dataPriv.get( dataHolder, delegateType ) - 1;\n+\n+\t\t\tif ( !attaches ) {\n+\t\t\t\tif ( document.documentMode ) {\n+\t\t\t\t\tthis.removeEventListener( delegateType, focusMappedHandler );\n+\t\t\t\t} else {\n+\t\t\t\t\tdoc.removeEventListener( type, focusMappedHandler, true );\n+\t\t\t\t}\n+\t\t\t\tdataPriv.remove( dataHolder, delegateType );\n+\t\t\t} else {\n+\t\t\t\tdataPriv.set( dataHolder, delegateType, attaches );\n+\t\t\t}\n+\t\t}\n+\t};\n+} );\n+\n+\/\/ Create mouseenter\/leave events using mouseover\/out and event-time checks\n+\/\/ so that event delegation works in jQuery.\n+\/\/ Do the same for pointerenter\/pointerleave and pointerover\/pointerout\n+\/\/\n+\/\/ Support: Safari 7 only\n+\/\/ Safari sends mouseenter too often; see:\n+\/\/ https:\/\/bugs.chromium.org\/p\/chromium\/issues\/detail?id=470258\n+\/\/ for the description of the bug (it existed in older Chrome versions as well).\n+jQuery.each( {\n+\tmouseenter: \"mouseover\",\n+\tmouseleave: \"mouseout\",\n+\tpointerenter: \"pointerover\",\n+\tpointerleave: \"pointerout\"\n+}, function( orig, fix ) {\n+\tjQuery.event.special[ orig ] = {\n+\t\tdelegateType: fix,\n+\t\tbindType: fix,\n+\n+\t\thandle: function( event ) {\n+\t\t\tvar ret,\n+\t\t\t\ttarget = this,\n+\t\t\t\trelated = event.relatedTarget,\n+\t\t\t\thandleObj = event.handleObj;\n+\n+\t\t\t\/\/ For mouseenter\/leave call the handler if related is outside the target.\n+\t\t\t\/\/ NB: No relatedTarget if the mouse left\/entered the browser window\n+\t\t\tif ( !related || ( related !== target && !jQuery.contains( target, related ) ) ) {\n+\t\t\t\tevent.type = handleObj.origType;\n+\t\t\t\tret = handleObj.handler.apply( this, arguments );\n+\t\t\t\tevent.type = fix;\n+\t\t\t}\n+\t\t\treturn ret;\n+\t\t}\n+\t};\n+} );\n+\n+jQuery.fn.extend( {\n+\n+\ton: function( types, selector, data, fn ) {\n+\t\treturn on( this, types, selector, data, fn );\n+\t},\n+\tone: function( types, selector, data, fn ) {\n+\t\treturn on( this, types, selector, data, fn, 1 );\n+\t},\n+\toff: function( types, selector, fn ) {\n+\t\tvar handleObj, type;\n+\t\tif ( types && types.preventDefault && types.handleObj ) {\n+\n+\t\t\t\/\/ ( event )  dispatched jQuery.Event\n+\t\t\thandleObj = types.handleObj;\n+\t\t\tjQuery( types.delegateTarget ).off(\n+\t\t\t\thandleObj.namespace ?\n+\t\t\t\t\thandleObj.origType + \".\" + handleObj.namespace :\n+\t\t\t\t\thandleObj.origType,\n+\t\t\t\thandleObj.selector,\n+\t\t\t\thandleObj.handler\n+\t\t\t);\n+\t\t\treturn this;\n+\t\t}\n+\t\tif ( typeof types === \"object\" ) {\n+\n+\t\t\t\/\/ ( types-object [, selector] )\n+\t\t\tfor ( type in types ) {\n+\t\t\t\tthis.off( type, selector, types[ type ] );\n+\t\t\t}\n+\t\t\treturn this;\n+\t\t}\n+\t\tif ( selector === false || typeof selector === \"function\" ) {\n+\n+\t\t\t\/\/ ( types [, fn] )\n+\t\t\tfn = selector;\n+\t\t\tselector = undefined;\n+\t\t}\n+\t\tif ( fn === false ) {\n+\t\t\tfn = returnFalse;\n+\t\t}\n+\t\treturn this.each( function() {\n+\t\t\tjQuery.event.remove( this, types, fn, selector );\n+\t\t} );\n+\t}\n+} );\n+\n+\n+var\n+\n+\t\/\/ Support: IE <=10 - 11, Edge 12 - 13 only\n+\t\/\/ In IE\/Edge using regex groups here causes severe slowdowns.\n+\t\/\/ See https:\/\/connect.microsoft.com\/IE\/feedback\/details\/1736512\/\n+\trnoInnerhtml = \/<script|<style|<link\/i,\n+\n+\t\/\/ checked=\"checked\" or checked\n+\trchecked = \/checked\\s*(?:[^=]|=\\s*.checked.)\/i,\n+\n+\trcleanScript = \/^\\s*<!\\[CDATA\\[|\\]\\]>\\s*$\/g;\n+\n+\/\/ Prefer a tbody over its parent table for containing new rows\n+function manipulationTarget( elem, content ) {\n+\tif ( nodeName( elem, \"table\" ) &&\n+\t\tnodeName( content.nodeType !== 11 ? content : content.firstChild, \"tr\" ) ) {\n+\n+\t\treturn jQuery( elem ).children( \"tbody\" )[ 0 ] || elem;\n+\t}\n+\n+\treturn elem;\n+}\n+\n+\/\/ Replace\/restore the type attribute of script elements for safe DOM manipulation\n+function disableScript( elem ) {\n+\telem.type = ( elem.getAttribute( \"type\" ) !== null ) + \"\/\" + elem.type;\n+\treturn elem;\n+}\n+function restoreScript( elem ) {\n+\tif ( ( elem.type || \"\" ).slice( 0, 5 ) === \"true\/\" ) {\n+\t\telem.type = elem.type.slice( 5 );\n+\t} else {\n+\t\telem.removeAttribute( \"type\" );\n+\t}\n+\n+\treturn elem;\n+}\n+\n+function cloneCopyEvent( src, dest ) {\n+\tvar i, l, type, pdataOld, udataOld, udataCur, events;\n+\n+\tif ( dest.nodeType !== 1 ) {\n+\t\treturn;\n+\t}\n+\n+\t\/\/ 1. Copy private data: events, handlers, etc.\n+\tif ( dataPriv.hasData( src ) ) {\n+\t\tpdataOld = dataPriv.get( src );\n+\t\tevents = pdataOld.events;\n+\n+\t\tif ( events ) {\n+\t\t\tdataPriv.remove( dest, \"handle events\" );\n+\n+\t\t\tfor ( type in events ) {\n+\t\t\t\tfor ( i = 0, l = events[ type ].length; i < l; i++ ) {\n+\t\t\t\t\tjQuery.event.add( dest, type, events[ type ][ i ] );\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\t}\n+\n+\t\/\/ 2. Copy user data\n+\tif ( dataUser.hasData( src ) ) {\n+\t\tudataOld = dataUser.access( src );\n+\t\tudataCur = jQuery.extend( {}, udataOld );\n+\n+\t\tdataUser.set( dest, udataCur );\n+\t}\n+}\n+\n+\/\/ Fix IE bugs, see support tests\n+function fixInput( src, dest ) {\n+\tvar nodeName = dest.nodeName.toLowerCase();\n+\n+\t\/\/ Fails to persist the checked state of a cloned checkbox or radio button.\n+\tif ( nodeName === \"input\" && rcheckableType.test( src.type ) ) {\n+\t\tdest.checked = src.checked;\n+\n+\t\/\/ Fails to return the selected option to the default selected state when cloning options\n+\t} else if ( nodeName === \"input\" || nodeName === \"textarea\" ) {\n+\t\tdest.defaultValue = src.defaultValue;\n+\t}\n+}\n+\n+function domManip( collection, args, callback, ignored ) {\n+\n+\t\/\/ Flatten any nested arrays\n+\targs = flat( args );\n+\n+\tvar fragment, first, scripts, hasScripts, node, doc,\n+\t\ti = 0,\n+\t\tl = collection.length,\n+\t\tiNoClone = l - 1,\n+\t\tvalue = args[ 0 ],\n+\t\tvalueIsFunction = isFunction( value );\n+\n+\t\/\/ We can't cloneNode fragments that contain checked, in WebKit\n+\tif ( valueIsFunction ||\n+\t\t\t( l > 1 && typeof value === \"string\" &&\n+\t\t\t\t!support.checkClone && rchecked.test( value ) ) ) {\n+\t\treturn collection.each( function( index ) {\n+\t\t\tvar self = collection.eq( index );\n+\t\t\tif ( valueIsFunction ) {\n+\t\t\t\targs[ 0 ] = value.call( this, index, self.html() );\n+\t\t\t}\n+\t\t\tdomManip( self, args, callback, ignored );\n+\t\t} );\n+\t}\n+\n+\tif ( l ) {\n+\t\tfragment = buildFragment( args, collection[ 0 ].ownerDocument, false, collection, ignored );\n+\t\tfirst = fragment.firstChild;\n+\n+\t\tif ( fragment.childNodes.length === 1 ) {\n+\t\t\tfragment = first;\n+\t\t}\n+\n+\t\t\/\/ Require either new content or an interest in ignored elements to invoke the callback\n+\t\tif ( first || ignored ) {\n+\t\t\tscripts = jQuery.map( getAll( fragment, \"script\" ), disableScript );\n+\t\t\thasScripts = scripts.length;\n+\n+\t\t\t\/\/ Use the original fragment for the last item\n+\t\t\t\/\/ instead of the first because it can end up\n+\t\t\t\/\/ being emptied incorrectly in certain situations (trac-8070).\n+\t\t\tfor ( ; i < l; i++ ) {\n+\t\t\t\tnode = fragment;\n+\n+\t\t\t\tif ( i !== iNoClone ) {\n+\t\t\t\t\tnode = jQuery.clone( node, true, true );\n+\n+\t\t\t\t\t\/\/ Keep references to cloned scripts for later restoration\n+\t\t\t\t\tif ( hasScripts ) {\n+\n+\t\t\t\t\t\t\/\/ Support: Android <=4.0 only, PhantomJS 1 only\n+\t\t\t\t\t\t\/\/ push.apply(_, arraylike) throws on ancient WebKit\n+\t\t\t\t\t\tjQuery.merge( scripts, getAll( node, \"script\" ) );\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\n+\t\t\t\tcallback.call( collection[ i ], node, i );\n+\t\t\t}\n+\n+\t\t\tif ( hasScripts ) {\n+\t\t\t\tdoc = scripts[ scripts.length - 1 ].ownerDocument;\n+\n+\t\t\t\t\/\/ Re-enable scripts\n+\t\t\t\tjQuery.map( scripts, restoreScript );\n+\n+\t\t\t\t\/\/ Evaluate executable scripts on first document insertion\n+\t\t\t\tfor ( i = 0; i < hasScripts; i++ ) {\n+\t\t\t\t\tnode = scripts[ i ];\n+\t\t\t\t\tif ( rscriptType.test( node.type || \"\" ) &&\n+\t\t\t\t\t\t!dataPriv.access( node, \"globalEval\" ) &&\n+\t\t\t\t\t\tjQuery.contains( doc, node ) ) {\n+\n+\t\t\t\t\t\tif ( node.src && ( node.type || \"\" ).toLowerCase()  !== \"module\" ) {\n+\n+\t\t\t\t\t\t\t\/\/ Optional AJAX dependency, but won't run scripts if not present\n+\t\t\t\t\t\t\tif ( jQuery._evalUrl && !node.noModule ) {\n+\t\t\t\t\t\t\t\tjQuery._evalUrl( node.src, {\n+\t\t\t\t\t\t\t\t\tnonce: node.nonce || node.getAttribute( \"nonce\" )\n+\t\t\t\t\t\t\t\t}, doc );\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t} else {\n+\n+\t\t\t\t\t\t\t\/\/ Unwrap a CDATA section containing script contents. This shouldn't be\n+\t\t\t\t\t\t\t\/\/ needed as in XML documents they're already not visible when\n+\t\t\t\t\t\t\t\/\/ inspecting element contents and in HTML documents they have no\n+\t\t\t\t\t\t\t\/\/ meaning but we're preserving that logic for backwards compatibility.\n+\t\t\t\t\t\t\t\/\/ This will be removed completely in 4.0. See gh-4904.\n+\t\t\t\t\t\t\tDOMEval( node.textContent.replace( rcleanScript, \"\" ), node, doc );\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\t}\n+\n+\treturn collection;\n+}\n+\n+function remove( elem, selector, keepData ) {\n+\tvar node,\n+\t\tnodes = selector ? jQuery.filter( selector, elem ) : elem,\n+\t\ti = 0;\n+\n+\tfor ( ; ( node = nodes[ i ] ) != null; i++ ) {\n+\t\tif ( !keepData && node.nodeType === 1 ) {\n+\t\t\tjQuery.cleanData( getAll( node ) );\n+\t\t}\n+\n+\t\tif ( node.parentNode ) {\n+\t\t\tif ( keepData && isAttached( node ) ) {\n+\t\t\t\tsetGlobalEval( getAll( node, \"script\" ) );\n+\t\t\t}\n+\t\t\tnode.parentNode.removeChild( node );\n+\t\t}\n+\t}\n+\n+\treturn elem;\n+}\n+\n+jQuery.extend( {\n+\thtmlPrefilter: function( html ) {\n+\t\treturn html;\n+\t},\n+\n+\tclone: function( elem, dataAndEvents, deepDataAndEvents ) {\n+\t\tvar i, l, srcElements, destElements,\n+\t\t\tclone = elem.cloneNode( true ),\n+\t\t\tinPage = isAttached( elem );\n+\n+\t\t\/\/ Fix IE cloning issues\n+\t\tif ( !support.noCloneChecked && ( elem.nodeType === 1 || elem.nodeType === 11 ) &&\n+\t\t\t\t!jQuery.isXMLDoc( elem ) ) {\n+\n+\t\t\t\/\/ We eschew jQuery#find here for performance reasons:\n+\t\t\t\/\/ https:\/\/jsperf.com\/getall-vs-sizzle\/2\n+\t\t\tdestElements = getAll( clone );\n+\t\t\tsrcElements = getAll( elem );\n+\n+\t\t\tfor ( i = 0, l = srcElements.length; i < l; i++ ) {\n+\t\t\t\tfixInput( srcElements[ i ], destElements[ i ] );\n+\t\t\t}\n+\t\t}\n+\n+\t\t\/\/ Copy the events from the original to the clone\n+\t\tif ( dataAndEvents ) {\n+\t\t\tif ( deepDataAndEvents ) {\n+\t\t\t\tsrcElements = srcElements || getAll( elem );\n+\t\t\t\tdestElements = destElements || getAll( clone );\n+\n+\t\t\t\tfor ( i = 0, l = srcElements.length; i < l; i++ ) {\n+\t\t\t\t\tcloneCopyEvent( srcElements[ i ], destElements[ i ] );\n+\t\t\t\t}\n+\t\t\t} else {\n+\t\t\t\tcloneCopyEvent( elem, clone );\n+\t\t\t}\n+\t\t}\n+\n+\t\t\/\/ Preserve script evaluation history\n+\t\tdestElements = getAll( clone, \"script\" );\n+\t\tif ( destElements.length > 0 ) {\n+\t\t\tsetGlobalEval( destElements, !inPage && getAll( elem, \"script\" ) );\n+\t\t}\n+\n+\t\t\/\/ Return the cloned set\n+\t\treturn clone;\n+\t},\n+\n+\tcleanData: function( elems ) {\n+\t\tvar data, elem, type,\n+\t\t\tspecial = jQuery.event.special,\n+\t\t\ti = 0;\n+\n+\t\tfor ( ; ( elem = elems[ i ] ) !== undefined; i++ ) {\n+\t\t\tif ( acceptData( elem ) ) {\n+\t\t\t\tif ( ( data = elem[ dataPriv.expando ] ) ) {\n+\t\t\t\t\tif ( data.events ) {\n+\t\t\t\t\t\tfor ( type in data.events ) {\n+\t\t\t\t\t\t\tif ( special[ type ] ) {\n+\t\t\t\t\t\t\t\tjQuery.event.remove( elem, type );\n+\n+\t\t\t\t\t\t\t\/\/ This is a shortcut to avoid jQuery.event.remove's overhead\n+\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\tjQuery.removeEvent( elem, type, data.handle );\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\n+\t\t\t\t\t\/\/ Support: Chrome <=35 - 45+\n+\t\t\t\t\t\/\/ Assign undefined instead of using delete, see Data#remove\n+\t\t\t\t\telem[ dataPriv.expando ] = undefined;\n+\t\t\t\t}\n+\t\t\t\tif ( elem[ dataUser.expando ] ) {\n+\n+\t\t\t\t\t\/\/ Support: Chrome <=35 - 45+\n+\t\t\t\t\t\/\/ Assign undefined instead of using delete, see Data#remove\n+\t\t\t\t\telem[ dataUser.expando ] = undefined;\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\t}\n+} );\n+\n+jQuery.fn.extend( {\n+\tdetach: function( selector ) {\n+\t\treturn remove( this, selector, true );\n+\t},\n+\n+\tremove: function( selector ) {\n+\t\treturn remove( this, selector );\n+\t},\n+\n+\ttext: function( value ) {\n+\t\treturn access( this, function( value ) {\n+\t\t\treturn value === undefined ?\n+\t\t\t\tjQuery.text( this ) :\n+\t\t\t\tthis.empty().each( function() {\n+\t\t\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n+\t\t\t\t\t\tthis.textContent = value;\n+\t\t\t\t\t}\n+\t\t\t\t} );\n+\t\t}, null, value, arguments.length );\n+\t},\n+\n+\tappend: function() {\n+\t\treturn domManip( this, arguments, function( elem ) {\n+\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n+\t\t\t\tvar target = manipulationTarget( this, elem );\n+\t\t\t\ttarget.appendChild( elem );\n+\t\t\t}\n+\t\t} );\n+\t},\n+\n+\tprepend: function() {\n+\t\treturn domManip( this, arguments, function( elem ) {\n+\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n+\t\t\t\tvar target = manipulationTarget( this, elem );\n+\t\t\t\ttarget.insertBefore( elem, target.firstChild );\n+\t\t\t}\n+\t\t} );\n+\t},\n+\n+\tbefore: function() {\n+\t\treturn domManip( this, arguments, function( elem ) {\n+\t\t\tif ( this.parentNode ) {\n+\t\t\t\tthis.parentNode.insertBefore( elem, this );\n+\t\t\t}\n+\t\t} );\n+\t},\n+\n+\tafter: function() {\n+\t\treturn domManip( this, arguments, function( elem ) {\n+\t\t\tif ( this.parentNode ) {\n+\t\t\t\tthis.parentNode.insertBefore( elem, this.nextSibling );\n+\t\t\t}\n+\t\t} );\n+\t},\n+\n+\tempty: function() {\n+\t\tvar elem,\n+\t\t\ti = 0;\n+\n+\t\tfor ( ; ( elem = this[ i ] ) != null; i++ ) {\n+\t\t\tif ( elem.nodeType === 1 ) {\n+\n+\t\t\t\t\/\/ Prevent memory leaks\n+\t\t\t\tjQuery.cleanData( getAll( elem, false ) );\n+\n+\t\t\t\t\/\/ Remove any remaining nodes\n+\t\t\t\telem.textContent = \"\";\n+\t\t\t}\n+\t\t}\n+\n+\t\treturn this;\n+\t},\n+\n+\tclone: function( dataAndEvents, deepDataAndEvents ) {\n+\t\tdataAndEvents = dataAndEvents == null ? false : dataAndEvents;\n+\t\tdeepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;\n+\n+\t\treturn this.map( function() {\n+\t\t\treturn jQuery.clone( this, dataAndEvents, deepDataAndEvents );\n+\t\t} );\n+\t},\n+\n+\thtml: function( value ) {\n+\t\treturn access( this, function( value ) {\n+\t\t\tvar elem = this[ 0 ] || {},\n+\t\t\t\ti = 0,\n+\t\t\t\tl = this.length;\n+\n+\t\t\tif ( value === undefined && elem.nodeType === 1 ) {\n+\t\t\t\treturn elem.innerHTML;\n+\t\t\t}\n+\n+\t\t\t\/\/ See if we can take a shortcut and just use innerHTML\n+\t\t\tif ( typeof value === \"string\" && !rnoInnerhtml.test( value ) &&\n+\t\t\t\t!wrapMap[ ( rtagName.exec( value ) || [ \"\", \"\" ] )[ 1 ].toLowerCase() ] ) {\n+\n+\t\t\t\tvalue = jQuery.htmlPrefilter( value );\n+\n+\t\t\t\ttry {\n+\t\t\t\t\tfor ( ; i < l; i++ ) {\n+\t\t\t\t\t\telem = this[ i ] || {};\n+\n+\t\t\t\t\t\t\/\/ Remove element nodes and prevent memory leaks\n+\t\t\t\t\t\tif ( elem.nodeType === 1 ) {\n+\t\t\t\t\t\t\tjQuery.cleanData( getAll( elem, false ) );\n+\t\t\t\t\t\t\telem.innerHTML = value;\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\n+\t\t\t\t\telem = 0;\n+\n+\t\t\t\t\/\/ If using innerHTML throws an exception, use the fallback method\n+\t\t\t\t} catch ( e ) {}\n+\t\t\t}\n+\n+\t\t\tif ( elem ) {\n+\t\t\t\tthis.empty().append( value );\n+\t\t\t}\n+\t\t}, null, value, arguments.length );\n+\t},\n+\n+\treplaceWith: function() {\n+\t\tvar ignored = [];\n+\n+\t\t\/\/ Make the changes, replacing each non-ignored context element with the new content\n+\t\treturn domManip( this, arguments, function( elem ) {\n+\t\t\tvar parent = this.parentNode;\n+\n+\t\t\tif ( jQuery.inArray( this, ignored ) < 0 ) {\n+\t\t\t\tjQuery.cleanData( getAll( this ) );\n+\t\t\t\tif ( parent ) {\n+\t\t\t\t\tparent.replaceChild( elem, this );\n+\t\t\t\t}\n+\t\t\t}\n+\n+\t\t\/\/ Force callback invocation\n+\t\t}, ignored );\n+\t}\n+} );\n+\n+jQuery.each( {\n+\tappendTo: \"append\",\n+\tprependTo: \"prepend\",\n+\tinsertBefore: \"before\",\n+\tinsertAfter: \"after\",\n+\treplaceAll: \"replaceWith\"\n+}, function( name, original ) {\n+\tjQuery.fn[ name ] = function( selector ) {\n+\t\tvar elems,\n+\t\t\tret = [],\n+\t\t\tinsert = jQuery( selector ),\n+\t\t\tlast = insert.length - 1,\n+\t\t\ti = 0;\n+\n+\t\tfor ( ; i <= last; i++ ) {\n+\t\t\telems = i === last ? this : this.clone( true );\n+\t\t\tjQuery( insert[ i ] )[ original ]( elems );\n+\n+\t\t\t\/\/ Support: Android <=4.0 only, PhantomJS 1 only\n+\t\t\t\/\/ .get() because push.apply(_, arraylike) throws on ancient WebKit\n+\t\t\tpush.apply( ret, elems.get() );\n+\t\t}\n+\n+\t\treturn this.pushStack( ret );\n+\t};\n+} );\n+var rnumnonpx = new RegExp( \"^(\" + pnum + \")(?!px)[a-z%]+$\", \"i\" );\n+\n+var rcustomProp = \/^--\/;\n+\n+\n+var getStyles = function( elem ) {\n+\n+\t\t\/\/ Support: IE <=11 only, Firefox <=30 (trac-15098, trac-14150)\n+\t\t\/\/ IE throws on elements created in popups\n+\t\t\/\/ FF meanwhile throws on frame elements through \"defaultView.getComputedStyle\"\n+\t\tvar view = elem.ownerDocument.defaultView;\n+\n+\t\tif ( !view || !view.opener ) {\n+\t\t\tview = window;\n+\t\t}\n+\n+\t\treturn view.getComputedStyle( elem );\n+\t};\n+\n+var swap = function( elem, options, callback ) {\n+\tvar ret, name,\n+\t\told = {};\n+\n+\t\/\/ Remember the old values, and insert the new ones\n+\tfor ( name in options ) {\n+\t\told[ name ] = elem.style[ name ];\n+\t\telem.style[ name ] = options[ name ];\n+\t}\n+\n+\tret = callback.call( elem );\n+\n+\t\/\/ Revert the old values\n+\tfor ( name in options ) {\n+\t\telem.style[ name ] = old[ name ];\n+\t}\n+\n+\treturn ret;\n+};\n+\n+\n+var rboxStyle = new RegExp( cssExpand.join( \"|\" ), \"i\" );\n+\n+\n+\n+( function() {\n+\n+\t\/\/ Executing both pixelPosition & boxSizingReliable tests require only one layout\n+\t\/\/ so they're executed at the same time to save the second computation.\n+\tfunction computeStyleTests() {\n+\n+\t\t\/\/ This is a singleton, we need to execute it only once\n+\t\tif ( !div ) {\n+\t\t\treturn;\n+\t\t}\n+\n+\t\tcontainer.style.cssText = \"position:absolute;left:-11111px;width:60px;\" +\n+\t\t\t\"margin-top:1px;padding:0;border:0\";\n+\t\tdiv.style.cssText =\n+\t\t\t\"position:relative;display:block;box-sizing:border-box;overflow:scroll;\" +\n+\t\t\t\"margin:auto;border:1px;padding:1px;\" +\n+\t\t\t\"width:60%;top:1%\";\n+\t\tdocumentElement.appendChild( container ).appendChild( div );\n+\n+\t\tvar divStyle = window.getComputedStyle( div );\n+\t\tpixelPositionVal = divStyle.top !== \"1%\";\n+\n+\t\t\/\/ Support: Android 4.0 - 4.3 only, Firefox <=3 - 44\n+\t\treliableMarginLeftVal = roundPixelMeasures( divStyle.marginLeft ) === 12;\n+\n+\t\t\/\/ Support: Android 4.0 - 4.3 only, Safari <=9.1 - 10.1, iOS <=7.0 - 9.3\n+\t\t\/\/ Some styles come back with percentage values, even though they shouldn't\n+\t\tdiv.style.right = \"60%\";\n+\t\tpixelBoxStylesVal = roundPixelMeasures( divStyle.right ) === 36;\n+\n+\t\t\/\/ Support: IE 9 - 11 only\n+\t\t\/\/ Detect misreporting of content dimensions for box-sizing:border-box elements\n+\t\tboxSizingReliableVal = roundPixelMeasures( divStyle.width ) === 36;\n+\n+\t\t\/\/ Support: IE 9 only\n+\t\t\/\/ Detect overflow:scroll screwiness (gh-3699)\n+\t\t\/\/ Support: Chrome <=64\n+\t\t\/\/ Don't get tricked when zoom affects offsetWidth (gh-4029)\n+\t\tdiv.style.position = \"absolute\";\n+\t\tscrollboxSizeVal = roundPixelMeasures( div.offsetWidth \/ 3 ) === 12;\n+\n+\t\tdocumentElement.removeChild( container );\n+\n+\t\t\/\/ Nullify the div so it wouldn't be stored in the memory and\n+\t\t\/\/ it will also be a sign that checks already performed\n+\t\tdiv = null;\n+\t}\n+\n+\tfunction roundPixelMeasures( measure ) {\n+\t\treturn Math.round( parseFloat( measure ) );\n+\t}\n+\n+\tvar pixelPositionVal, boxSizingReliableVal, scrollboxSizeVal, pixelBoxStylesVal,\n+\t\treliableTrDimensionsVal, reliableMarginLeftVal,\n+\t\tcontainer = document.createElement( \"div\" ),\n+\t\tdiv = document.createElement( \"div\" );\n+\n+\t\/\/ Finish early in limited (non-browser) environments\n+\tif ( !div.style ) {\n+\t\treturn;\n+\t}\n+\n+\t\/\/ Support: IE <=9 - 11 only\n+\t\/\/ Style of cloned element affects source element cloned (trac-8908)\n+\tdiv.style.backgroundClip = \"content-box\";\n+\tdiv.cloneNode( true ).style.backgroundClip = \"\";\n+\tsupport.clearCloneStyle = div.style.backgroundClip === \"content-box\";\n+\n+\tjQuery.extend( support, {\n+\t\tboxSizingReliable: function() {\n+\t\t\tcomputeStyleTests();\n+\t\t\treturn boxSizingReliableVal;\n+\t\t},\n+\t\tpixelBoxStyles: function() {\n+\t\t\tcomputeStyleTests();\n+\t\t\treturn pixelBoxStylesVal;\n+\t\t},\n+\t\tpixelPosition: function() {\n+\t\t\tcomputeStyleTests();\n+\t\t\treturn pixelPositionVal;\n+\t\t},\n+\t\treliableMarginLeft: function() {\n+\t\t\tcomputeStyleTests();\n+\t\t\treturn reliableMarginLeftVal;\n+\t\t},\n+\t\tscrollboxSize: function() {\n+\t\t\tcomputeStyleTests();\n+\t\t\treturn scrollboxSizeVal;\n+\t\t},\n+\n+\t\t\/\/ Support: IE 9 - 11+, Edge 15 - 18+\n+\t\t\/\/ IE\/Edge misreport `getComputedStyle` of table rows with width\/height\n+\t\t\/\/ set in CSS while `offset*` properties report correct values.\n+\t\t\/\/ Behavior in IE 9 is more subtle than in newer versions & it passes\n+\t\t\/\/ some versions of this test; make sure not to make it pass there!\n+\t\t\/\/\n+\t\t\/\/ Support: Firefox 70+\n+\t\t\/\/ Only Firefox includes border widths\n+\t\t\/\/ in computed dimensions. (gh-4529)\n+\t\treliableTrDimensions: function() {\n+\t\t\tvar table, tr, trChild, trStyle;\n+\t\t\tif ( reliableTrDimensionsVal == null ) {\n+\t\t\t\ttable = document.createElement( \"table\" );\n+\t\t\t\ttr = document.createElement( \"tr\" );\n+\t\t\t\ttrChild = document.createElement( \"div\" );\n+\n+\t\t\t\ttable.style.cssText = \"position:absolute;left:-11111px;border-collapse:separate\";\n+\t\t\t\ttr.style.cssText = \"box-sizing:content-box;border:1px solid\";\n+\n+\t\t\t\t\/\/ Support: Chrome 86+\n+\t\t\t\t\/\/ Height set through cssText does not get applied.\n+\t\t\t\t\/\/ Computed height then comes back as 0.\n+\t\t\t\ttr.style.height = \"1px\";\n+\t\t\t\ttrChild.style.height = \"9px\";\n+\n+\t\t\t\t\/\/ Support: Android 8 Chrome 86+\n+\t\t\t\t\/\/ In our bodyBackground.html iframe,\n+\t\t\t\t\/\/ display for all div elements is set to \"inline\",\n+\t\t\t\t\/\/ which causes a problem only in Android 8 Chrome 86.\n+\t\t\t\t\/\/ Ensuring the div is `display: block`\n+\t\t\t\t\/\/ gets around this issue.\n+\t\t\t\ttrChild.style.display = \"block\";\n+\n+\t\t\t\tdocumentElement\n+\t\t\t\t\t.appendChild( table )\n+\t\t\t\t\t.appendChild( tr )\n+\t\t\t\t\t.appendChild( trChild );\n+\n+\t\t\t\ttrStyle = window.getComputedStyle( tr );\n+\t\t\t\treliableTrDimensionsVal = ( parseInt( trStyle.height, 10 ) +\n+\t\t\t\t\tparseInt( trStyle.borderTopWidth, 10 ) +\n+\t\t\t\t\tparseInt( trStyle.borderBottomWidth, 10 ) ) === tr.offsetHeight;\n+\n+\t\t\t\tdocumentElement.removeChild( table );\n+\t\t\t}\n+\t\t\treturn reliableTrDimensionsVal;\n+\t\t}\n+\t} );\n+} )();\n+\n+\n+function curCSS( elem, name, computed ) {\n+\tvar width, minWidth, maxWidth, ret,\n+\t\tisCustomProp = rcustomProp.test( name ),\n+\n+\t\t\/\/ Support: Firefox 51+\n+\t\t\/\/ Retrieving style before computed somehow\n+\t\t\/\/ fixes an issue with getting wrong values\n+\t\t\/\/ on detached elements\n+\t\tstyle = elem.style;\n+\n+\tcomputed = computed || getStyles( elem );\n+\n+\t\/\/ getPropertyValue is needed for:\n+\t\/\/   .css('filter') (IE 9 only, trac-12537)\n+\t\/\/   .css('--customProperty) (gh-3144)\n+\tif ( computed ) {\n+\n+\t\t\/\/ Support: IE <=9 - 11+\n+\t\t\/\/ IE only supports `\"float\"` in `getPropertyValue`; in computed styles\n+\t\t\/\/ it's only available as `\"cssFloat\"`. We no longer modify properties\n+\t\t\/\/ sent to `.css()` apart from camelCasing, so we need to check both.\n+\t\t\/\/ Normally, this would create difference in behavior: if\n+\t\t\/\/ `getPropertyValue` returns an empty string, the value returned\n+\t\t\/\/ by `.css()` would be `undefined`. This is usually the case for\n+\t\t\/\/ disconnected elements. However, in IE even disconnected elements\n+\t\t\/\/ with no styles return `\"none\"` for `getPropertyValue( \"float\" )`\n+\t\tret = computed.getPropertyValue( name ) || computed[ name ];\n+\n+\t\tif ( isCustomProp && ret ) {\n+\n+\t\t\t\/\/ Support: Firefox 105+, Chrome <=105+\n+\t\t\t\/\/ Spec requires trimming whitespace for custom properties (gh-4926).\n+\t\t\t\/\/ Firefox only trims leading whitespace. Chrome just collapses\n+\t\t\t\/\/ both leading & trailing whitespace to a single space.\n+\t\t\t\/\/\n+\t\t\t\/\/ Fall back to `undefined` if empty string returned.\n+\t\t\t\/\/ This collapses a missing definition with property defined\n+\t\t\t\/\/ and set to an empty string but there's no standard API\n+\t\t\t\/\/ allowing us to differentiate them without a performance penalty\n+\t\t\t\/\/ and returning `undefined` aligns with older jQuery.\n+\t\t\t\/\/\n+\t\t\t\/\/ rtrimCSS treats U+000D CARRIAGE RETURN and U+000C FORM FEED\n+\t\t\t\/\/ as whitespace while CSS does not, but this is not a problem\n+\t\t\t\/\/ because CSS preprocessing replaces them with U+000A LINE FEED\n+\t\t\t\/\/ (which *is* CSS whitespace)\n+\t\t\t\/\/ https:\/\/www.w3.org\/TR\/css-syntax-3\/#input-preprocessing\n+\t\t\tret = ret.replace( rtrimCSS, \"$1\" ) || undefined;\n+\t\t}\n+\n+\t\tif ( ret === \"\" && !isAttached( elem ) ) {\n+\t\t\tret = jQuery.style( elem, name );\n+\t\t}\n+\n+\t\t\/\/ A tribute to the \"awesome hack by Dean Edwards\"\n+\t\t\/\/ Android Browser returns percentage for some values,\n+\t\t\/\/ but width seems to be reliably pixels.\n+\t\t\/\/ This is against the CSSOM draft spec:\n+\t\t\/\/ https:\/\/drafts.csswg.org\/cssom\/#resolved-values\n+\t\tif ( !support.pixelBoxStyles() && rnumnonpx.test( ret ) && rboxStyle.test( name ) ) {\n+\n+\t\t\t\/\/ Remember the original values\n+\t\t\twidth = style.width;\n+\t\t\tminWidth = style.minWidth;\n+\t\t\tmaxWidth = style.maxWidth;\n+\n+\t\t\t\/\/ Put in the new values to get a computed value out\n+\t\t\tstyle.minWidth = style.maxWidth = style.width = ret;\n+\t\t\tret = computed.width;\n+\n+\t\t\t\/\/ Revert the changed values\n+\t\t\tstyle.width = width;\n+\t\t\tstyle.minWidth = minWidth;\n+\t\t\tstyle.maxWidth = maxWidth;\n+\t\t}\n+\t}\n+\n+\treturn ret !== undefined ?\n+\n+\t\t\/\/ Support: IE <=9 - 11 only\n+\t\t\/\/ IE returns zIndex value as an integer.\n+\t\tret + \"\" :\n+\t\tret;\n+}\n+\n+\n+function addGetHookIf( conditionFn, hookFn ) {\n+\n+\t\/\/ Define the hook, we'll check on the first run if it's really needed.\n+\treturn {\n+\t\tget: function() {\n+\t\t\tif ( conditionFn() ) {\n+\n+\t\t\t\t\/\/ Hook not needed (or it's not possible to use it due\n+\t\t\t\t\/\/ to missing dependency), remove it.\n+\t\t\t\tdelete this.get;\n+\t\t\t\treturn;\n+\t\t\t}\n+\n+\t\t\t\/\/ Hook needed; redefine it so that the support test is not executed again.\n+\t\t\treturn ( this.get = hookFn ).apply( this, arguments );\n+\t\t}\n+\t};\n+}\n+\n+\n+var cssPrefixes = [ \"Webkit\", \"Moz\", \"ms\" ],\n+\temptyStyle = document.createElement( \"div\" ).style,\n+\tvendorProps = {};\n+\n+\/\/ Return a vendor-prefixed property or undefined\n+function vendorPropName( name ) {\n+\n+\t\/\/ Check for vendor prefixed names\n+\tvar capName = name[ 0 ].toUpperCase() + name.slice( 1 ),\n+\t\ti = cssPrefixes.length;\n+\n+\twhile ( i-- ) {\n+\t\tname = cssPrefixes[ i ] + capName;\n+\t\tif ( name in emptyStyle ) {\n+\t\t\treturn name;\n+\t\t}\n+\t}\n+}\n+\n+\/\/ Return a potentially-mapped jQuery.cssProps or vendor prefixed property\n+function finalPropName( name ) {\n+\tvar final = jQuery.cssProps[ name ] || vendorProps[ name ];\n+\n+\tif ( final ) {\n+\t\treturn final;\n+\t}\n+\tif ( name in emptyStyle ) {\n+\t\treturn name;\n+\t}\n+\treturn vendorProps[ name ] = vendorPropName( name ) || name;\n+}\n+\n+\n+var\n+\n+\t\/\/ Swappable if display is none or starts with table\n+\t\/\/ except \"table\", \"table-cell\", or \"table-caption\"\n+\t\/\/ See here for display values: https:\/\/developer.mozilla.org\/en-US\/docs\/CSS\/display\n+\trdisplayswap = \/^(none|table(?!-c[ea]).+)\/,\n+\tcssShow = { position: \"absolute\", visibility: \"hidden\", display: \"block\" },\n+\tcssNormalTransform = {\n+\t\tletterSpacing: \"0\",\n+\t\tfontWeight: \"400\"\n+\t};\n+\n+function setPositiveNumber( _elem, value, subtract ) {\n+\n+\t\/\/ Any relative (+\/-) values have already been\n+\t\/\/ normalized at this point\n+\tvar matches = rcssNum.exec( value );\n+\treturn matches ?\n+\n+\t\t\/\/ Guard against undefined \"subtract\", e.g., when used as in cssHooks\n+\t\tMath.max( 0, matches[ 2 ] - ( subtract || 0 ) ) + ( matches[ 3 ] || \"px\" ) :\n+\t\tvalue;\n+}\n+\n+function boxModelAdjustment( elem, dimension, box, isBorderBox, styles, computedVal ) {\n+\tvar i = dimension === \"width\" ? 1 : 0,\n+\t\textra = 0,\n+\t\tdelta = 0,\n+\t\tmarginDelta = 0;\n+\n+\t\/\/ Adjustment may not be necessary\n+\tif ( box === ( isBorderBox ? \"border\" : \"content\" ) ) {\n+\t\treturn 0;\n+\t}\n+\n+\tfor ( ; i < 4; i += 2 ) {\n+\n+\t\t\/\/ Both box models exclude margin\n+\t\t\/\/ Count margin delta separately to only add it after scroll gutter adjustment.\n+\t\t\/\/ This is needed to make negative margins work with `outerHeight( true )` (gh-3982).\n+\t\tif ( box === \"margin\" ) {\n+\t\t\tmarginDelta += jQuery.css( elem, box + cssExpand[ i ], true, styles );\n+\t\t}\n+\n+\t\t\/\/ If we get here with a content-box, we're seeking \"padding\" or \"border\" or \"margin\"\n+\t\tif ( !isBorderBox ) {\n+\n+\t\t\t\/\/ Add padding\n+\t\t\tdelta += jQuery.css( elem, \"padding\" + cssExpand[ i ], true, styles );\n+\n+\t\t\t\/\/ For \"border\" or \"margin\", add border\n+\t\t\tif ( box !== \"padding\" ) {\n+\t\t\t\tdelta += jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n+\n+\t\t\t\/\/ But still keep track of it otherwise\n+\t\t\t} else {\n+\t\t\t\textra += jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n+\t\t\t}\n+\n+\t\t\/\/ If we get here with a border-box (content + padding + border), we're seeking \"content\" or\n+\t\t\/\/ \"padding\" or \"margin\"\n+\t\t} else {\n+\n+\t\t\t\/\/ For \"content\", subtract padding\n+\t\t\tif ( box === \"content\" ) {\n+\t\t\t\tdelta -= jQuery.css( elem, \"padding\" + cssExpand[ i ], true, styles );\n+\t\t\t}\n+\n+\t\t\t\/\/ For \"content\" or \"padding\", subtract border\n+\t\t\tif ( box !== \"margin\" ) {\n+\t\t\t\tdelta -= jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n+\t\t\t}\n+\t\t}\n+\t}\n+\n+\t\/\/ Account for positive content-box scroll gutter when requested by providing computedVal\n+\tif ( !isBorderBox && computedVal >= 0 ) {\n+\n+\t\t\/\/ offsetWidth\/offsetHeight is a rounded sum of content, padding, scroll gutter, and border\n+\t\t\/\/ Assuming integer scroll gutter, subtract the rest and round down\n+\t\tdelta += Math.max( 0, Math.ceil(\n+\t\t\telem[ \"offset\" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 ) ] -\n+\t\t\tcomputedVal -\n+\t\t\tdelta -\n+\t\t\textra -\n+\t\t\t0.5\n+\n+\t\t\/\/ If offsetWidth\/offsetHeight is unknown, then we can't determine content-box scroll gutter\n+\t\t\/\/ Use an explicit zero to avoid NaN (gh-3964)\n+\t\t) ) || 0;\n+\t}\n+\n+\treturn delta + marginDelta;\n+}\n+\n+function getWidthOrHeight( elem, dimension, extra ) {\n+\n+\t\/\/ Start with computed style\n+\tvar styles = getStyles( elem ),\n+\n+\t\t\/\/ To avoid forcing a reflow, only fetch boxSizing if we need it (gh-4322).\n+\t\t\/\/ Fake content-box until we know it's needed to know the true value.\n+\t\tboxSizingNeeded = !support.boxSizingReliable() || extra,\n+\t\tisBorderBox = boxSizingNeeded &&\n+\t\t\tjQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\",\n+\t\tvalueIsBorderBox = isBorderBox,\n+\n+\t\tval = curCSS( elem, dimension, styles ),\n+\t\toffsetProp = \"offset\" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 );\n+\n+\t\/\/ Support: Firefox <=54\n+\t\/\/ Return a confounding non-pixel value or feign ignorance, as appropriate.\n+\tif ( rnumnonpx.test( val ) ) {\n+\t\tif ( !extra ) {\n+\t\t\treturn val;\n+\t\t}\n+\t\tval = \"auto\";\n+\t}\n+\n+\n+\t\/\/ Support: IE 9 - 11 only\n+\t\/\/ Use offsetWidth\/offsetHeight for when box sizing is unreliable.\n+\t\/\/ In those cases, the computed value can be trusted to be border-box.\n+\tif ( ( !support.boxSizingReliable() && isBorderBox ||\n+\n+\t\t\/\/ Support: IE 10 - 11+, Edge 15 - 18+\n+\t\t\/\/ IE\/Edge misreport `getComputedStyle` of table rows with width\/height\n+\t\t\/\/ set in CSS while `offset*` properties report correct values.\n+\t\t\/\/ Interestingly, in some cases IE 9 doesn't suffer from this issue.\n+\t\t!support.reliableTrDimensions() && nodeName( elem, \"tr\" ) ||\n+\n+\t\t\/\/ Fall back to offsetWidth\/offsetHeight when value is \"auto\"\n+\t\t\/\/ This happens for inline elements with no explicit setting (gh-3571)\n+\t\tval === \"auto\" ||\n+\n+\t\t\/\/ Support: Android <=4.1 - 4.3 only\n+\t\t\/\/ Also use offsetWidth\/offsetHeight for misreported inline dimensions (gh-3602)\n+\t\t!parseFloat( val ) && jQuery.css( elem, \"display\", false, styles ) === \"inline\" ) &&\n+\n+\t\t\/\/ Make sure the element is visible & connected\n+\t\telem.getClientRects().length ) {\n+\n+\t\tisBorderBox = jQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\";\n+\n+\t\t\/\/ Where available, offsetWidth\/offsetHeight approximate border box dimensions.\n+\t\t\/\/ Where not available (e.g., SVG), assume unreliable box-sizing and interpret the\n+\t\t\/\/ retrieved value as a content box dimension.\n+\t\tvalueIsBorderBox = offsetProp in elem;\n+\t\tif ( valueIsBorderBox ) {\n+\t\t\tval = elem[ offsetProp ];\n+\t\t}\n+\t}\n+\n+\t\/\/ Normalize \"\" and auto\n+\tval = parseFloat( val ) || 0;\n+\n+\t\/\/ Adjust for the element's box model\n+\treturn ( val +\n+\t\tboxModelAdjustment(\n+\t\t\telem,\n+\t\t\tdimension,\n+\t\t\textra || ( isBorderBox ? \"border\" : \"content\" ),\n+\t\t\tvalueIsBorderBox,\n+\t\t\tstyles,\n+\n+\t\t\t\/\/ Provide the current computed size to request scroll gutter calculation (gh-3589)\n+\t\t\tval\n+\t\t)\n+\t) + \"px\";\n+}\n+\n+jQuery.extend( {\n+\n+\t\/\/ Add in style property hooks for overriding the default\n+\t\/\/ behavior of getting and setting a style property\n+\tcssHooks: {\n+\t\topacity: {\n+\t\t\tget: function( elem, computed ) {\n+\t\t\t\tif ( computed ) {\n+\n+\t\t\t\t\t\/\/ We should always get a number back from opacity\n+\t\t\t\t\tvar ret = curCSS( elem, \"opacity\" );\n+\t\t\t\t\treturn ret === \"\" ? \"1\" : ret;\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\t},\n+\n+\t\/\/ Don't automatically add \"px\" to these possibly-unitless properties\n+\tcssNumber: {\n+\t\tanimationIterationCount: true,\n+\t\taspectRatio: true,\n+\t\tborderImageSlice: true,\n+\t\tcolumnCount: true,\n+\t\tflexGrow: true,\n+\t\tflexShrink: true,\n+\t\tfontWeight: true,\n+\t\tgridArea: true,\n+\t\tgridColumn: true,\n+\t\tgridColumnEnd: true,\n+\t\tgridColumnStart: true,\n+\t\tgridRow: true,\n+\t\tgridRowEnd: true,\n+\t\tgridRowStart: true,\n+\t\tlineHeight: true,\n+\t\topacity: true,\n+\t\torder: true,\n+\t\torphans: true,\n+\t\tscale: true,\n+\t\twidows: true,\n+\t\tzIndex: true,\n+\t\tzoom: true,\n+\n+\t\t\/\/ SVG-related\n+\t\tfillOpacity: true,\n+\t\tfloodOpacity: true,\n+\t\tstopOpacity: true,\n+\t\tstrokeMiterlimit: true,\n+\t\tstrokeOpacity: true\n+\t},\n+\n+\t\/\/ Add in properties whose names you wish to fix before\n+\t\/\/ setting or getting the value\n+\tcssProps: {},\n+\n+\t\/\/ Get and set the style property on a DOM Node\n+\tstyle: function( elem, name, value, extra ) {\n+\n+\t\t\/\/ Don't set styles on text and comment nodes\n+\t\tif ( !elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style ) {\n+\t\t\treturn;\n+\t\t}\n+\n+\t\t\/\/ Make sure that we're working with the right name\n+\t\tvar ret, type, hooks,\n+\t\t\torigName = camelCase( name ),\n+\t\t\tisCustomProp = rcustomProp.test( name ),\n+\t\t\tstyle = elem.style;\n+\n+\t\t\/\/ Make sure that we're working with the right name. We don't\n+\t\t\/\/ want to query the value if it is a CSS custom property\n+\t\t\/\/ since they are user-defined.\n+\t\tif ( !isCustomProp ) {\n+\t\t\tname = finalPropName( origName );\n+\t\t}\n+\n+\t\t\/\/ Gets hook for the prefixed version, then unprefixed version\n+\t\thooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];\n+\n+\t\t\/\/ Check if we're setting a value\n+\t\tif ( value !== undefined ) {\n+\t\t\ttype = typeof value;\n+\n+\t\t\t\/\/ Convert \"+=\" or \"-=\" to relative numbers (trac-7345)\n+\t\t\tif ( type === \"string\" && ( ret = rcssNum.exec( value ) ) && ret[ 1 ] ) {\n+\t\t\t\tvalue = adjustCSS( elem, name, ret );\n+\n+\t\t\t\t\/\/ Fixes bug trac-9237\n+\t\t\t\ttype = \"number\";\n+\t\t\t}\n+\n+\t\t\t\/\/ Make sure that null and NaN values aren't set (trac-7116)\n+\t\t\tif ( value == null || value !== value ) {\n+\t\t\t\treturn;\n+\t\t\t}\n+\n+\t\t\t\/\/ If a number was passed in, add the unit (except for certain CSS properties)\n+\t\t\t\/\/ The isCustomProp check can be removed in jQuery 4.0 when we only auto-append\n+\t\t\t\/\/ \"px\" to a few hardcoded values.\n+\t\t\tif ( type === \"number\" && !isCustomProp ) {\n+\t\t\t\tvalue += ret && ret[ 3 ] || ( jQuery.cssNumber[ origName ] ? \"\" : \"px\" );\n+\t\t\t}\n+\n+\t\t\t\/\/ background-* props affect original clone's values\n+\t\t\tif ( !support.clearCloneStyle && value === \"\" && name.indexOf( \"background\" ) === 0 ) {\n+\t\t\t\tstyle[ name ] = \"inherit\";\n+\t\t\t}\n+\n+\t\t\t\/\/ If a hook was provided, use that value, otherwise just set the specified value\n+\t\t\tif ( !hooks || !( \"set\" in hooks ) ||\n+\t\t\t\t( value = hooks.set( elem, value, extra ) ) !== undefined ) {\n+\n+\t\t\t\tif ( isCustomProp ) {\n+\t\t\t\t\tstyle.setProperty( name, value );\n+\t\t\t\t} else {\n+\t\t\t\t\tstyle[ name ] = value;\n+\t\t\t\t}\n+\t\t\t}\n+\n+\t\t} else {\n+\n+\t\t\t\/\/ If a hook was provided get the non-computed value from there\n+\t\t\tif ( hooks && \"get\" in hooks &&\n+\t\t\t\t( ret = hooks.get( elem, false, extra ) ) !== undefined ) {\n+\n+\t\t\t\treturn ret;\n+\t\t\t}\n+\n+\t\t\t\/\/ Otherwise just get the value from the style object\n+\t\t\treturn style[ name ];\n+\t\t}\n+\t},\n+\n+\tcss: function( elem, name, extra, styles ) {\n+\t\tvar val, num, hooks,\n+\t\t\torigName = camelCase( name ),\n+\t\t\tisCustomProp = rcustomProp.test( name );\n+\n+\t\t\/\/ Make sure that we're working with the right name. We don't\n+\t\t\/\/ want to modify the value if it is a CSS custom property\n+\t\t\/\/ since they are user-defined.\n+\t\tif ( !isCustomProp ) {\n+\t\t\tname = finalPropName( origName );\n+\t\t}\n+\n+\t\t\/\/ Try prefixed name followed by the unprefixed name\n+\t\thooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];\n+\n+\t\t\/\/ If a hook was provided get the computed value from there\n+\t\tif ( hooks && \"get\" in hooks ) {\n+\t\t\tval = hooks.get( elem, true, extra );\n+\t\t}\n+\n+\t\t\/\/ Otherwise, if a way to get the computed value exists, use that\n+\t\tif ( val === undefined ) {\n+\t\t\tval = curCSS( elem, name, styles );\n+\t\t}\n+\n+\t\t\/\/ Convert \"normal\" to computed value\n+\t\tif ( val === \"normal\" && name in cssNormalTransform ) {\n+\t\t\tval = cssNormalTransform[ name ];\n+\t\t}\n+\n+\t\t\/\/ Make numeric if forced or a qualifier was provided and val looks numeric\n+\t\tif ( extra === \"\" || extra ) {\n+\t\t\tnum = parseFloat( val );\n+\t\t\treturn extra === true || isFinite( num ) ? num || 0 : val;\n+\t\t}\n+\n+\t\treturn val;\n+\t}\n+} );\n+\n+jQuery.each( [ \"height\", \"width\" ], function( _i, dimension ) {\n+\tjQuery.cssHooks[ dimension ] = {\n+\t\tget: function( elem, computed, extra ) {\n+\t\t\tif ( computed ) {\n+\n+\t\t\t\t\/\/ Certain elements can have dimension info if we invisibly show them\n+\t\t\t\t\/\/ but it must have a current display style that would benefit\n+\t\t\t\treturn rdisplayswap.test( jQuery.css( elem, \"display\" ) ) &&\n+\n+\t\t\t\t\t\/\/ Support: Safari 8+\n+\t\t\t\t\t\/\/ Table columns in Safari have non-zero offsetWidth & zero\n+\t\t\t\t\t\/\/ getBoundingClientRect().width unless display is changed.\n+\t\t\t\t\t\/\/ Support: IE <=11 only\n+\t\t\t\t\t\/\/ Running getBoundingClientRect on a disconnected node\n+\t\t\t\t\t\/\/ in IE throws an error.\n+\t\t\t\t\t( !elem.getClientRects().length || !elem.getBoundingClientRect().width ) ?\n+\t\t\t\t\tswap( elem, cssShow, function() {\n+\t\t\t\t\t\treturn getWidthOrHeight( elem, dimension, extra );\n+\t\t\t\t\t} ) :\n+\t\t\t\t\tgetWidthOrHeight( elem, dimension, extra );\n+\t\t\t}\n+\t\t},\n+\n+\t\tset: function( elem, value, extra ) {\n+\t\t\tvar matches,\n+\t\t\t\tstyles = getStyles( elem ),\n+\n+\t\t\t\t\/\/ Only read styles.position if the test has a chance to fail\n+\t\t\t\t\/\/ to avoid forcing a reflow.\n+\t\t\t\tscrollboxSizeBuggy = !support.scrollboxSize() &&\n+\t\t\t\t\tstyles.position === \"absolute\",\n+\n+\t\t\t\t\/\/ To avoid forcing a reflow, only fetch boxSizing if we need it (gh-3991)\n+\t\t\t\tboxSizingNeeded = scrollboxSizeBuggy || extra,\n+\t\t\t\tisBorderBox = boxSizingNeeded &&\n+\t\t\t\t\tjQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\",\n+\t\t\t\tsubtract = extra ?\n+\t\t\t\t\tboxModelAdjustment(\n+\t\t\t\t\t\telem,\n+\t\t\t\t\t\tdimension,\n+\t\t\t\t\t\textra,\n+\t\t\t\t\t\tisBorderBox,\n+\t\t\t\t\t\tstyles\n+\t\t\t\t\t) :\n+\t\t\t\t\t0;\n+\n+\t\t\t\/\/ Account for unreliable border-box dimensions by comparing offset* to computed and\n+\t\t\t\/\/ faking a content-box to get border and padding (gh-3699)\n+\t\t\tif ( isBorderBox && scrollboxSizeBuggy ) {\n+\t\t\t\tsubtract -= Math.ceil(\n+\t\t\t\t\telem[ \"offset\" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 ) ] -\n+\t\t\t\t\tparseFloat( styles[ dimension ] ) -\n+\t\t\t\t\tboxModelAdjustment( elem, dimension, \"border\", false, styles ) -\n+\t\t\t\t\t0.5\n+\t\t\t\t);\n+\t\t\t}\n+\n+\t\t\t\/\/ Convert to pixels if value adjustment is needed\n+\t\t\tif ( subtract && ( matches = rcssNum.exec( value ) ) &&\n+\t\t\t\t( matches[ 3 ] || \"px\" ) !== \"px\" ) {\n+\n+\t\t\t\telem.style[ dimension ] = value;\n+\t\t\t\tvalue = jQuery.css( elem, dimension );\n+\t\t\t}\n+\n+\t\t\treturn setPositiveNumber( elem, value, subtract );\n+\t\t}\n+\t};\n+} );\n+\n+jQuery.cssHooks.marginLeft = addGetHookIf( support.reliableMarginLeft,\n+\tfunction( elem, computed ) {\n+\t\tif ( computed ) {\n+\t\t\treturn ( parseFloat( curCSS( elem, \"marginLeft\" ) ) ||\n+\t\t\t\telem.getBoundingClientRect().left -\n+\t\t\t\t\tswap( elem, { marginLeft: 0 }, function() {\n+\t\t\t\t\t\treturn elem.getBoundingClientRect().left;\n+\t\t\t\t\t} )\n+\t\t\t) + \"px\";\n+\t\t}\n+\t}\n+);\n+\n+\/\/ These hooks are used by animate to expand properties\n+jQuery.each( {\n+\tmargin: \"\",\n+\tpadding: \"\",\n+\tborder: \"Width\"\n+}, function( prefix, suffix ) {\n+\tjQuery.cssHooks[ prefix + suffix ] = {\n+\t\texpand: function( value ) {\n+\t\t\tvar i = 0,\n+\t\t\t\texpanded = {},\n+\n+\t\t\t\t\/\/ Assumes a single number if not a string\n+\t\t\t\tparts = typeof value === \"string\" ? value.split( \" \" ) : [ value ];\n+\n+\t\t\tfor ( ; i < 4; i++ ) {\n+\t\t\t\texpanded[ prefix + cssExpand[ i ] + suffix ] =\n+\t\t\t\t\tparts[ i ] || parts[ i - 2 ] || parts[ 0 ];\n+\t\t\t}\n+\n+\t\t\treturn expanded;\n+\t\t}\n+\t};\n+\n+\tif ( prefix !== \"margin\" ) {\n+\t\tjQuery.cssHooks[ prefix + suffix ].set = setPositiveNumber;\n+\t}\n+} );\n+\n+jQuery.fn.extend( {\n+\tcss: function( name, value ) {\n+\t\treturn access( this, function( elem, name, value ) {\n+\t\t\tvar styles, len,\n+\t\t\t\tmap = {},\n+\t\t\t\ti = 0;\n+\n+\t\t\tif ( Array.isArray( name ) ) {\n+\t\t\t\tstyles = getStyles( elem );\n+\t\t\t\tlen = name.length;\n+\n+\t\t\t\tfor ( ; i < len; i++ ) {\n+\t\t\t\t\tmap[ name[ i ] ] = jQuery.css( elem, name[ i ], false, styles );\n+\t\t\t\t}\n+\n+\t\t\t\treturn map;\n+\t\t\t}\n+\n+\t\t\treturn value !== undefined ?\n+\t\t\t\tjQuery.style( elem, name, value ) :\n+\t\t\t\tjQuery.css( elem, name );\n+\t\t}, name, value, arguments.length > 1 );\n+\t}\n+} );\n+\n+\n+function Tween( elem, options, prop, end, easing ) {\n+\treturn new Tween.prototype.init( elem, options, prop, end, easing );\n+}\n+jQuery.Tween = Tween;\n+\n+Tween.prototype = {\n+\tconstructor: Tween,\n+\tinit: function( elem, options, prop, end, easing, unit ) {\n+\t\tthis.elem = elem;\n+\t\tthis.prop = prop;\n+\t\tthis.easing = easing || jQuery.easing._default;\n+\t\tthis.options = options;\n+\t\tthis.start = this.now = this.cur();\n+\t\tthis.end = end;\n+\t\tthis.unit = unit || ( jQuery.cssNumber[ prop ] ? \"\" : \"px\" );\n+\t},\n+\tcur: function() {\n+\t\tvar hooks = Tween.propHooks[ this.prop ];\n+\n+\t\treturn hooks && hooks.get ?\n+\t\t\thooks.get( this ) :\n+\t\t\tTween.propHooks._default.get( this );\n+\t},\n+\trun: function( percent ) {\n+\t\tvar eased,\n+\t\t\thooks = Tween.propHooks[ this.prop ];\n+\n+\t\tif ( this.options.duration ) {\n+\t\t\tthis.pos = eased = jQuery.easing[ this.easing ](\n+\t\t\t\tpercent, this.options.duration * percent, 0, 1, this.options.duration\n+\t\t\t);\n+\t\t} else {\n+\t\t\tthis.pos = eased = percent;\n+\t\t}\n+\t\tthis.now = ( this.end - this.start ) * eased + this.start;\n+\n+\t\tif ( this.options.step ) {\n+\t\t\tthis.options.step.call( this.elem, this.now, this );\n+\t\t}\n+\n+\t\tif ( hooks && hooks.set ) {\n+\t\t\thooks.set( this );\n+\t\t} else {\n+\t\t\tTween.propHooks._default.set( this );\n+\t\t}\n+\t\treturn this;\n+\t}\n+};\n+\n+Tween.prototype.init.prototype = Tween.prototype;\n+\n+Tween.propHooks = {\n+\t_default: {\n+\t\tget: function( tween ) {\n+\t\t\tvar result;\n+\n+\t\t\t\/\/ Use a property on the element directly when it is not a DOM element,\n+\t\t\t\/\/ or when there is no matching style property that exists.\n+\t\t\tif ( tween.elem.nodeType !== 1 ||\n+\t\t\t\ttween.elem[ tween.prop ] != null && tween.elem.style[ tween.prop ] == null ) {\n+\t\t\t\treturn tween.elem[ tween.prop ];\n+\t\t\t}\n+\n+\t\t\t\/\/ Passing an empty string as a 3rd parameter to .css will automatically\n+\t\t\t\/\/ attempt a parseFloat and fallback to a string if the parse fails.\n+\t\t\t\/\/ Simple values such as \"10px\" are parsed to Float;\n+\t\t\t\/\/ complex values such as \"rotate(1rad)\" are returned as-is.\n+\t\t\tresult = jQuery.css( tween.elem, tween.prop, \"\" );\n+\n+\t\t\t\/\/ Empty strings, null, undefined and \"auto\" are converted to 0.\n+\t\t\treturn !result || result === \"auto\" ? 0 : result;\n+\t\t},\n+\t\tset: function( tween ) {\n+\n+\t\t\t\/\/ Use step hook for back compat.\n+\t\t\t\/\/ Use cssHook if its there.\n+\t\t\t\/\/ Use .style if available and use plain properties where available.\n+\t\t\tif ( jQuery.fx.step[ tween.prop ] ) {\n+\t\t\t\tjQuery.fx.step[ tween.prop ]( tween );\n+\t\t\t} else if ( tween.elem.nodeType === 1 && (\n+\t\t\t\tjQuery.cssHooks[ tween.prop ] ||\n+\t\t\t\t\ttween.elem.style[ finalPropName( tween.prop ) ] != null ) ) {\n+\t\t\t\tjQuery.style( tween.elem, tween.prop, tween.now + tween.unit );\n+\t\t\t} else {\n+\t\t\t\ttween.elem[ tween.prop ] = tween.now;\n+\t\t\t}\n+\t\t}\n+\t}\n+};\n+\n+\/\/ Support: IE <=9 only\n+\/\/ Panic based approach to setting things on disconnected nodes\n+Tween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {\n+\tset: function( tween ) {\n+\t\tif ( tween.elem.nodeType && tween.elem.parentNode ) {\n+\t\t\ttween.elem[ tween.prop ] = tween.now;\n+\t\t}\n+\t}\n+};\n+\n+jQuery.easing = {\n+\tlinear: function( p ) {\n+\t\treturn p;\n+\t},\n+\tswing: function( p ) {\n+\t\treturn 0.5 - Math.cos( p * Math.PI ) \/ 2;\n+\t},\n+\t_default: \"swing\"\n+};\n+\n+jQuery.fx = Tween.prototype.init;\n+\n+\/\/ Back compat <1.8 extension point\n+jQuery.fx.step = {};\n+\n+\n+\n+\n+var\n+\tfxNow, inProgress,\n+\trfxtypes = \/^(?:toggle|show|hide)$\/,\n+\trrun = \/queueHooks$\/;\n+\n+function schedule() {\n+\tif ( inProgress ) {\n+\t\tif ( document.hidden === false && window.requestAnimationFrame ) {\n+\t\t\twindow.requestAnimationFrame( schedule );\n+\t\t} else {\n+\t\t\twindow.setTimeout( schedule, jQuery.fx.interval );\n+\t\t}\n+\n+\t\tjQuery.fx.tick();\n+\t}\n+}\n+\n+\/\/ Animations created synchronously will run synchronously\n+function createFxNow() {\n+\twindow.setTimeout( function() {\n+\t\tfxNow = undefined;\n+\t} );\n+\treturn ( fxNow = Date.now() );\n+}\n+\n+\/\/ Generate parameters to create a standard animation\n+function genFx( type, includeWidth ) {\n+\tvar which,\n+\t\ti = 0,\n+\t\tattrs = { height: type };\n+\n+\t\/\/ If we include width, step value is 1 to do all cssExpand values,\n+\t\/\/ otherwise step value is 2 to skip over Left and Right\n+\tincludeWidth = includeWidth ? 1 : 0;\n+\tfor ( ; i < 4; i += 2 - includeWidth ) {\n+\t\twhich = cssExpand[ i ];\n+\t\tattrs[ \"margin\" + which ] = attrs[ \"padding\" + which ] = type;\n+\t}\n+\n+\tif ( includeWidth ) {\n+\t\tattrs.opacity = attrs.width = type;\n+\t}\n+\n+\treturn attrs;\n+}\n+\n+function createTween( value, prop, animation ) {\n+\tvar tween,\n+\t\tcollection = ( Animation.tweeners[ prop ] || [] ).concat( Animation.tweeners[ \"*\" ] ),\n+\t\tindex = 0,\n+\t\tlength = collection.length;\n+\tfor ( ; index < length; index++ ) {\n+\t\tif ( ( tween = collection[ index ].call( animation, prop, value ) ) ) {\n+\n+\t\t\t\/\/ We're done with this property\n+\t\t\treturn tween;\n+\t\t}\n+\t}\n+}\n+\n+function defaultPrefilter( elem, props, opts ) {\n+\tvar prop, value, toggle, hooks, oldfire, propTween, restoreDisplay, display,\n+\t\tisBox = \"width\" in props || \"height\" in props,\n+\t\tanim = this,\n+\t\torig = {},\n+\t\tstyle = elem.style,\n+\t\thidden = elem.nodeType && isHiddenWithinTree( elem ),\n+\t\tdataShow = dataPriv.get( elem, \"fxshow\" );\n+\n+\t\/\/ Queue-skipping animations hijack the fx hooks\n+\tif ( !opts.queue ) {\n+\t\thooks = jQuery._queueHooks( elem, \"fx\" );\n+\t\tif ( hooks.unqueued == null ) {\n+\t\t\thooks.unqueued = 0;\n+\t\t\toldfire = hooks.empty.fire;\n+\t\t\thooks.empty.fire = function() {\n+\t\t\t\tif ( !hooks.unqueued ) {\n+\t\t\t\t\toldfire();\n+\t\t\t\t}\n+\t\t\t};\n+\t\t}\n+\t\thooks.unqueued++;\n+\n+\t\tanim.always( function() {\n+\n+\t\t\t\/\/ Ensure the complete handler is called before this completes\n+\t\t\tanim.always( function() {\n+\t\t\t\thooks.unqueued--;\n+\t\t\t\tif ( !jQuery.queue( elem, \"fx\" ).length ) {\n+\t\t\t\t\thooks.empty.fire();\n+\t\t\t\t}\n+\t\t\t} );\n+\t\t} );\n+\t}\n+\n+\t\/\/ Detect show\/hide animations\n+\tfor ( prop in props ) {\n+\t\tvalue = props[ prop ];\n+\t\tif ( rfxtypes.test( value ) ) {\n+\t\t\tdelete props[ prop ];\n+\t\t\ttoggle = toggle || value === \"toggle\";\n+\t\t\tif ( value === ( hidden ? \"hide\" : \"show\" ) ) {\n+\n+\t\t\t\t\/\/ Pretend to be hidden if this is a \"show\" and\n+\t\t\t\t\/\/ there is still data from a stopped show\/hide\n+\t\t\t\tif ( value === \"show\" && dataShow && dataShow[ prop ] !== undefined ) {\n+\t\t\t\t\thidden = true;\n+\n+\t\t\t\t\/\/ Ignore all other no-op show\/hide data\n+\t\t\t\t} else {\n+\t\t\t\t\tcontinue;\n+\t\t\t\t}\n+\t\t\t}\n+\t\t\torig[ prop ] = dataShow && dataShow[ prop ] || jQuery.style( elem, prop );\n+\t\t}\n+\t}\n+\n+\t\/\/ Bail out if this is a no-op like .hide().hide()\n+\tpropTween = !jQuery.isEmptyObject( props );\n+\tif ( !propTween && jQuery.isEmptyObject( orig ) ) {\n+\t\treturn;\n+\t}\n+\n+\t\/\/ Restrict \"overflow\" and \"display\" styles during box animations\n+\tif ( isBox && elem.nodeType === 1 ) {\n+\n+\t\t\/\/ Support: IE <=9 - 11, Edge 12 - 15\n+\t\t\/\/ Record all 3 overflow attributes because IE does not infer the shorthand\n+\t\t\/\/ from identically-valued overflowX and overflowY and Edge just mirrors\n+\t\t\/\/ the overflowX value there.\n+\t\topts.overflow = [ style.overflow, style.overflowX, style.overflowY ];\n+\n+\t\t\/\/ Identify a display type, preferring old show\/hide data over the CSS cascade\n+\t\trestoreDisplay = dataShow && dataShow.display;\n+\t\tif ( restoreDisplay == null ) {\n+\t\t\trestoreDisplay = dataPriv.get( elem, \"display\" );\n+\t\t}\n+\t\tdisplay = jQuery.css( elem, \"display\" );\n+\t\tif ( display === \"none\" ) {\n+\t\t\tif ( restoreDisplay ) {\n+\t\t\t\tdisplay = restoreDisplay;\n+\t\t\t} else {\n+\n+\t\t\t\t\/\/ Get nonempty value(s) by temporarily forcing visibility\n+\t\t\t\tshowHide( [ elem ], true );\n+\t\t\t\trestoreDisplay = elem.style.display || restoreDisplay;\n+\t\t\t\tdisplay = jQuery.css( elem, \"display\" );\n+\t\t\t\tshowHide( [ elem ] );\n+\t\t\t}\n+\t\t}\n+\n+\t\t\/\/ Animate inline elements as inline-block\n+\t\tif ( display === \"inline\" || display === \"inline-block\" && restoreDisplay != null ) {\n+\t\t\tif ( jQuery.css( elem, \"float\" ) === \"none\" ) {\n+\n+\t\t\t\t\/\/ Restore the original display value at the end of pure show\/hide animations\n+\t\t\t\tif ( !propTween ) {\n+\t\t\t\t\tanim.done( function() {\n+\t\t\t\t\t\tstyle.display = restoreDisplay;\n+\t\t\t\t\t} );\n+\t\t\t\t\tif ( restoreDisplay == null ) {\n+\t\t\t\t\t\tdisplay = style.display;\n+\t\t\t\t\t\trestoreDisplay = display === \"none\" ? \"\" : display;\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t\tstyle.display = \"inline-block\";\n+\t\t\t}\n+\t\t}\n+\t}\n+\n+\tif ( opts.overflow ) {\n+\t\tstyle.overflow = \"hidden\";\n+\t\tanim.always( function() {\n+\t\t\tstyle.overflow = opts.overflow[ 0 ];\n+\t\t\tstyle.overflowX = opts.overflow[ 1 ];\n+\t\t\tstyle.overflowY = opts.overflow[ 2 ];\n+\t\t} );\n+\t}\n+\n+\t\/\/ Implement show\/hide animations\n+\tpropTween = false;\n+\tfor ( prop in orig ) {\n+\n+\t\t\/\/ General show\/hide setup for this element animation\n+\t\tif ( !propTween ) {\n+\t\t\tif ( dataShow ) {\n+\t\t\t\tif ( \"hidden\" in dataShow ) {\n+\t\t\t\t\thidden = dataShow.hidden;\n+\t\t\t\t}\n+\t\t\t} else {\n+\t\t\t\tdataShow = dataPriv.access( elem, \"fxshow\", { display: restoreDisplay } );\n+\t\t\t}\n+\n+\t\t\t\/\/ Store hidden\/visible for toggle so `.stop().toggle()` \"reverses\"\n+\t\t\tif ( toggle ) {\n+\t\t\t\tdataShow.hidden = !hidden;\n+\t\t\t}\n+\n+\t\t\t\/\/ Show elements before animating them\n+\t\t\tif ( hidden ) {\n+\t\t\t\tshowHide( [ elem ], true );\n+\t\t\t}\n+\n+\t\t\t\/* eslint-disable no-loop-func *\/\n+\n+\t\t\tanim.done( function() {\n+\n+\t\t\t\t\/* eslint-enable no-loop-func *\/\n+\n+\t\t\t\t\/\/ The final step of a \"hide\" animation is actually hiding the element\n+\t\t\t\tif ( !hidden ) {\n+\t\t\t\t\tshowHide( [ elem ] );\n+\t\t\t\t}\n+\t\t\t\tdataPriv.remove( elem, \"fxshow\" );\n+\t\t\t\tfor ( prop in orig ) {\n+\t\t\t\t\tjQuery.style( elem, prop, orig[ prop ] );\n+\t\t\t\t}\n+\t\t\t} );\n+\t\t}\n+\n+\t\t\/\/ Per-property setup\n+\t\tpropTween = createTween( hidden ? dataShow[ prop ] : 0, prop, anim );\n+\t\tif ( !( prop in dataShow ) ) {\n+\t\t\tdataShow[ prop ] = propTween.start;\n+\t\t\tif ( hidden ) {\n+\t\t\t\tpropTween.end = propTween.start;\n+\t\t\t\tpropTween.start = 0;\n+\t\t\t}\n+\t\t}\n+\t}\n+}\n+\n+function propFilter( props, specialEasing ) {\n+\tvar index, name, easing, value, hooks;\n+\n+\t\/\/ camelCase, specialEasing and expand cssHook pass\n+\tfor ( index in props ) {\n+\t\tname = camelCase( index );\n+\t\teasing = specialEasing[ name ];\n+\t\tvalue = props[ index ];\n+\t\tif ( Array.isArray( value ) ) {\n+\t\t\teasing = value[ 1 ];\n+\t\t\tvalue = props[ index ] = value[ 0 ];\n+\t\t}\n+\n+\t\tif ( index !== name ) {\n+\t\t\tprops[ name ] = value;\n+\t\t\tdelete props[ index ];\n+\t\t}\n+\n+\t\thooks = jQuery.cssHooks[ name ];\n+\t\tif ( hooks && \"expand\" in hooks ) {\n+\t\t\tvalue = hooks.expand( value );\n+\t\t\tdelete props[ name ];\n+\n+\t\t\t\/\/ Not quite $.extend, this won't overwrite existing keys.\n+\t\t\t\/\/ Reusing 'index' because we have the correct \"name\"\n+\t\t\tfor ( index in value ) {\n+\t\t\t\tif ( !( index in props ) ) {\n+\t\t\t\t\tprops[ index ] = value[ index ];\n+\t\t\t\t\tspecialEasing[ index ] = easing;\n+\t\t\t\t}\n+\t\t\t}\n+\t\t} else {\n+\t\t\tspecialEasing[ name ] = easing;\n+\t\t}\n+\t}\n+}\n+\n+function Animation( elem, properties, options ) {\n+\tvar result,\n+\t\tstopped,\n+\t\tindex = 0,\n+\t\tlength = Animation.prefilters.length,\n+\t\tdeferred = jQuery.Deferred().always( function() {\n+\n+\t\t\t\/\/ Don't match elem in the :animated selector\n+\t\t\tdelete tick.elem;\n+\t\t} ),\n+\t\ttick = function() {\n+\t\t\tif ( stopped ) {\n+\t\t\t\treturn false;\n+\t\t\t}\n+\t\t\tvar currentTime = fxNow || createFxNow(),\n+\t\t\t\tremaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),\n+\n+\t\t\t\t\/\/ Support: Android 2.3 only\n+\t\t\t\t\/\/ Archaic crash bug won't allow us to use `1 - ( 0.5 || 0 )` (trac-12497)\n+\t\t\t\ttemp = remaining \/ animation.duration || 0,\n+\t\t\t\tpercent = 1 - temp,\n+\t\t\t\tindex = 0,\n+\t\t\t\tlength = animation.tweens.length;\n+\n+\t\t\tfor ( ; index < length; index++ ) {\n+\t\t\t\tanimation.tweens[ index ].run( percent );\n+\t\t\t}\n+\n+\t\t\tdeferred.notifyWith( elem, [ animation, percent, remaining ] );\n+\n+\t\t\t\/\/ If there's more to do, yield\n+\t\t\tif ( percent < 1 && length ) {\n+\t\t\t\treturn remaining;\n+\t\t\t}\n+\n+\t\t\t\/\/ If this was an empty animation, synthesize a final progress notification\n+\t\t\tif ( !length ) {\n+\t\t\t\tdeferred.notifyWith( elem, [ animation, 1, 0 ] );\n+\t\t\t}\n+\n+\t\t\t\/\/ Resolve the animation and report its conclusion\n+\t\t\tdeferred.resolveWith( elem, [ animation ] );\n+\t\t\treturn false;\n+\t\t},\n+\t\tanimation = deferred.promise( {\n+\t\t\telem: elem,\n+\t\t\tprops: jQuery.extend( {}, properties ),\n+\t\t\topts: jQuery.extend( true, {\n+\t\t\t\tspecialEasing: {},\n+\t\t\t\teasing: jQuery.easing._default\n+\t\t\t}, options ),\n+\t\t\toriginalProperties: properties,\n+\t\t\toriginalOptions: options,\n+\t\t\tstartTime: fxNow || createFxNow(),\n+\t\t\tduration: options.duration,\n+\t\t\ttweens: [],\n+\t\t\tcreateTween: function( prop, end ) {\n+\t\t\t\tvar tween = jQuery.Tween( elem, animation.opts, prop, end,\n+\t\t\t\t\tanimation.opts.specialEasing[ prop ] || animation.opts.easing );\n+\t\t\t\tanimation.tweens.push( tween );\n+\t\t\t\treturn tween;\n+\t\t\t},\n+\t\t\tstop: function( gotoEnd ) {\n+\t\t\t\tvar index = 0,\n+\n+\t\t\t\t\t\/\/ If we are going to the end, we want to run all the tweens\n+\t\t\t\t\t\/\/ otherwise we skip this part\n+\t\t\t\t\tlength = gotoEnd ? animation.tweens.length : 0;\n+\t\t\t\tif ( stopped ) {\n+\t\t\t\t\treturn this;\n+\t\t\t\t}\n+\t\t\t\tstopped = true;\n+\t\t\t\tfor ( ; index < length; index++ ) {\n+\t\t\t\t\tanimation.tweens[ index ].run( 1 );\n+\t\t\t\t}\n+\n+\t\t\t\t\/\/ Resolve when we played the last frame; otherwise, reject\n+\t\t\t\tif ( gotoEnd ) {\n+\t\t\t\t\tdeferred.notifyWith( elem, [ animation, 1, 0 ] );\n+\t\t\t\t\tdeferred.resolveWith( elem, [ animation, gotoEnd ] );\n+\t\t\t\t} else {\n+\t\t\t\t\tdeferred.rejectWith( elem, [ animation, gotoEnd ] );\n+\t\t\t\t}\n+\t\t\t\treturn this;\n+\t\t\t}\n+\t\t} ),\n+\t\tprops = animation.props;\n+\n+\tpropFilter( props, animation.opts.specialEasing );\n+\n+\tfor ( ; index < length; index++ ) {\n+\t\tresult = Animation.prefilters[ index ].call( animation, elem, props, animation.opts );\n+\t\tif ( result ) {\n+\t\t\tif ( isFunction( result.stop ) ) {\n+\t\t\t\tjQuery._queueHooks( animation.elem, animation.opts.queue ).stop =\n+\t\t\t\t\tresult.stop.bind( result );\n+\t\t\t}\n+\t\t\treturn result;\n+\t\t}\n+\t}\n+\n+\tjQuery.map( props, createTween, animation );\n+\n+\tif ( isFunction( animation.opts.start ) ) {\n+\t\tanimation.opts.start.call( elem, animation );\n+\t}\n+\n+\t\/\/ Attach callbacks from options\n+\tanimation\n+\t\t.progress( animation.opts.progress )\n+\t\t.done( animation.opts.done, animation.opts.complete )\n+\t\t.fail( animation.opts.fail )\n+\t\t.always( animation.opts.always );\n+\n+\tjQuery.fx.timer(\n+\t\tjQuery.extend( tick, {\n+\t\t\telem: elem,\n+\t\t\tanim: animation,\n+\t\t\tqueue: animation.opts.queue\n+\t\t} )\n+\t);\n+\n+\treturn animation;\n+}\n+\n+jQuery.Animation = jQuery.extend( Animation, {\n+\n+\ttweeners: {\n+\t\t\"*\": [ function( prop, value ) {\n+\t\t\tvar tween = this.createTween( prop, value );\n+\t\t\tadjustCSS( tween.elem, prop, rcssNum.exec( value ), tween );\n+\t\t\treturn tween;\n+\t\t} ]\n+\t},\n+\n+\ttweener: function( props, callback ) {\n+\t\tif ( isFunction( props ) ) {\n+\t\t\tcallback = props;\n+\t\t\tprops = [ \"*\" ];\n+\t\t} else {\n+\t\t\tprops = props.match( rnothtmlwhite );\n+\t\t}\n+\n+\t\tvar prop,\n+\t\t\tindex = 0,\n+\t\t\tlength = props.length;\n+\n+\t\tfor ( ; index < length; index++ ) {\n+\t\t\tprop = props[ index ];\n+\t\t\tAnimation.tweeners[ prop ] = Animation.tweeners[ prop ] || [];\n+\t\t\tAnimation.tweeners[ prop ].unshift( callback );\n+\t\t}\n+\t},\n+\n+\tprefilters: [ defaultPrefilter ],\n+\n+\tprefilter: function( callback, prepend ) {\n+\t\tif ( prepend ) {\n+\t\t\tAnimation.prefilters.unshift( callback );\n+\t\t} else {\n+\t\t\tAnimation.prefilters.push( callback );\n+\t\t}\n+\t}\n+} );\n+\n+jQuery.speed = function( speed, easing, fn ) {\n+\tvar opt = speed && typeof speed === \"object\" ? jQuery.extend( {}, speed ) : {\n+\t\tcomplete: fn || !fn && easing ||\n+\t\t\tisFunction( speed ) && speed,\n+\t\tduration: speed,\n+\t\teasing: fn && easing || easing && !isFunction( easing ) && easing\n+\t};\n+\n+\t\/\/ Go to the end state if fx are off\n+\tif ( jQuery.fx.off ) {\n+\t\topt.duration = 0;\n+\n+\t} else {\n+\t\tif ( typeof opt.duration !== \"number\" ) {\n+\t\t\tif ( opt.duration in jQuery.fx.speeds ) {\n+\t\t\t\topt.duration = jQuery.fx.speeds[ opt.duration ];\n+\n+\t\t\t} else {\n+\t\t\t\topt.duration = jQuery.fx.speeds._default;\n+\t\t\t}\n+\t\t}\n+\t}\n+\n+\t\/\/ Normalize opt.queue - true\/undefined\/null -> \"fx\"\n+\tif ( opt.queue == null || opt.queue === true ) {\n+\t\topt.queue = \"fx\";\n+\t}\n+\n+\t\/\/ Queueing\n+\topt.old = opt.complete;\n+\n+\topt.complete = function() {\n+\t\tif ( isFunction( opt.old ) ) {\n+\t\t\topt.old.call( this );\n+\t\t}\n+\n+\t\tif ( opt.queue ) {\n+\t\t\tjQuery.dequeue( this, opt.queue );\n+\t\t}\n+\t};\n+\n+\treturn opt;\n+};\n+\n+jQuery.fn.extend( {\n+\tfadeTo: function( speed, to, easing, callback ) {\n+\n+\t\t\/\/ Show any hidden elements after setting opacity to 0\n+\t\treturn this.filter( isHiddenWithinTree ).css( \"opacity\", 0 ).show()\n+\n+\t\t\t\/\/ Animate to the value specified\n+\t\t\t.end().animate( { opacity: to }, speed, easing, callback );\n+\t},\n+\tanimate: function( prop, speed, easing, callback ) {\n+\t\tvar empty = jQuery.isEmptyObject( prop ),\n+\t\t\toptall = jQuery.speed( speed, easing, callback ),\n+\t\t\tdoAnimation = function() {\n+\n+\t\t\t\t\/\/ Operate on a copy of prop so per-property easing won't be lost\n+\t\t\t\tvar anim = Animation( this, jQuery.extend( {}, prop ), optall );\n+\n+\t\t\t\t\/\/ Empty animations, or finishing resolves immediately\n+\t\t\t\tif ( empty || dataPriv.get( this, \"finish\" ) ) {\n+\t\t\t\t\tanim.stop( true );\n+\t\t\t\t}\n+\t\t\t};\n+\n+\t\tdoAnimation.finish = doAnimation;\n+\n+\t\treturn empty || optall.queue === false ?\n+\t\t\tthis.each( doAnimation ) :\n+\t\t\tthis.queue( optall.queue, doAnimation );\n+\t},\n+\tstop: function( type, clearQueue, gotoEnd ) {\n+\t\tvar stopQueue = function( hooks ) {\n+\t\t\tvar stop = hooks.stop;\n+\t\t\tdelete hooks.stop;\n+\t\t\tstop( gotoEnd );\n+\t\t};\n+\n+\t\tif ( typeof type !== \"string\" ) {\n+\t\t\tgotoEnd = clearQueue;\n+\t\t\tclearQueue = type;\n+\t\t\ttype = undefined;\n+\t\t}\n+\t\tif ( clearQueue ) {\n+\t\t\tthis.queue( type || \"fx\", [] );\n+\t\t}\n+\n+\t\treturn this.each( function() {\n+\t\t\tvar dequeue = true,\n+\t\t\t\tindex = type != null && type + \"queueHooks\",\n+\t\t\t\ttimers = jQuery.timers,\n+\t\t\t\tdata = dataPriv.get( this );\n+\n+\t\t\tif ( index ) {\n+\t\t\t\tif ( data[ index ] && data[ index ].stop ) {\n+\t\t\t\t\tstopQueue( data[ index ] );\n+\t\t\t\t}\n+\t\t\t} else {\n+\t\t\t\tfor ( index in data ) {\n+\t\t\t\t\tif ( data[ index ] && data[ index ].stop && rrun.test( index ) ) {\n+\t\t\t\t\t\tstopQueue( data[ index ] );\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t}\n+\n+\t\t\tfor ( index = timers.length; index--; ) {\n+\t\t\t\tif ( timers[ index ].elem === this &&\n+\t\t\t\t\t( type == null || timers[ index ].queue === type ) ) {\n+\n+\t\t\t\t\ttimers[ index ].anim.stop( gotoEnd );\n+\t\t\t\t\tdequeue = false;\n+\t\t\t\t\ttimers.splice( index, 1 );\n+\t\t\t\t}\n+\t\t\t}\n+\n+\t\t\t\/\/ Start the next in the queue if the last step wasn't forced.\n+\t\t\t\/\/ Timers currently will call their complete callbacks, which\n+\t\t\t\/\/ will dequeue but only if they were gotoEnd.\n+\t\t\tif ( dequeue || !gotoEnd ) {\n+\t\t\t\tjQuery.dequeue( this, type );\n+\t\t\t}\n+\t\t} );\n+\t},\n+\tfinish: function( type ) {\n+\t\tif ( type !== false ) {\n+\t\t\ttype = type || \"fx\";\n+\t\t}\n+\t\treturn this.each( function() {\n+\t\t\tvar index,\n+\t\t\t\tdata = dataPriv.get( this ),\n+\t\t\t\tqueue = data[ type + \"queue\" ],\n+\t\t\t\thooks = data[ type + \"queueHooks\" ],\n+\t\t\t\ttimers = jQuery.timers,\n+\t\t\t\tlength = queue ? queue.length : 0;\n+\n+\t\t\t\/\/ Enable finishing flag on private data\n+\t\t\tdata.finish = true;\n+\n+\t\t\t\/\/ Empty the queue first\n+\t\t\tjQuery.queue( this, type, [] );\n+\n+\t\t\tif ( hooks && hooks.stop ) {\n+\t\t\t\thooks.stop.call( this, true );\n+\t\t\t}\n+\n+\t\t\t\/\/ Look for any active animations, and finish them\n+\t\t\tfor ( index = timers.length; index--; ) {\n+\t\t\t\tif ( timers[ index ].elem === this && timers[ index ].queue === type ) {\n+\t\t\t\t\ttimers[ index ].anim.stop( true );\n+\t\t\t\t\ttimers.splice( index, 1 );\n+\t\t\t\t}\n+\t\t\t}\n+\n+\t\t\t\/\/ Look for any animations in the old queue and finish them\n+\t\t\tfor ( index = 0; index < length; index++ ) {\n+\t\t\t\tif ( queue[ index ] && queue[ index ].finish ) {\n+\t\t\t\t\tqueue[ index ].finish.call( this );\n+\t\t\t\t}\n+\t\t\t}\n+\n+\t\t\t\/\/ Turn off finishing flag\n+\t\t\tdelete data.finish;\n+\t\t} );\n+\t}\n+} );\n+\n+jQuery.each( [ \"toggle\", \"show\", \"hide\" ], function( _i, name ) {\n+\tvar cssFn = jQuery.fn[ name ];\n+\tjQuery.fn[ name ] = function( speed, easing, callback ) {\n+\t\treturn speed == null || typeof speed === \"boolean\" ?\n+\t\t\tcssFn.apply( this, arguments ) :\n+\t\t\tthis.animate( genFx( name, true ), speed, easing, callback );\n+\t};\n+} );\n+\n+\/\/ Generate shortcuts for custom animations\n+jQuery.each( {\n+\tslideDown: genFx( \"show\" ),\n+\tslideUp: genFx( \"hide\" ),\n+\tslideToggle: genFx( \"toggle\" ),\n+\tfadeIn: { opacity: \"show\" },\n+\tfadeOut: { opacity: \"hide\" },\n+\tfadeToggle: { opacity: \"toggle\" }\n+}, function( name, props ) {\n+\tjQuery.fn[ name ] = function( speed, easing, callback ) {\n+\t\treturn this.animate( props, speed, easing, callback );\n+\t};\n+} );\n+\n+jQuery.timers = [];\n+jQuery.fx.tick = function() {\n+\tvar timer,\n+\t\ti = 0,\n+\t\ttimers = jQuery.timers;\n+\n+\tfxNow = Date.now();\n+\n+\tfor ( ; i < timers.length; i++ ) {\n+\t\ttimer = timers[ i ];\n+\n+\t\t\/\/ Run the timer and safely remove it when done (allowing for external removal)\n+\t\tif ( !timer() && timers[ i ] === timer ) {\n+\t\t\ttimers.splice( i--, 1 );\n+\t\t}\n+\t}\n+\n+\tif ( !timers.length ) {\n+\t\tjQuery.fx.stop();\n+\t}\n+\tfxNow = undefined;\n+};\n+\n+jQuery.fx.timer = function( timer ) {\n+\tjQuery.timers.push( timer );\n+\tjQuery.fx.start();\n+};\n+\n+jQuery.fx.interval = 13;\n+jQuery.fx.start = function() {\n+\tif ( inProgress ) {\n+\t\treturn;\n+\t}\n+\n+\tinProgress = true;\n+\tschedule();\n+};\n+\n+jQuery.fx.stop = function() {\n+\tinProgress = null;\n+};\n+\n+jQuery.fx.speeds = {\n+\tslow: 600,\n+\tfast: 200,\n+\n+\t\/\/ Default speed\n+\t_default: 400\n+};\n+\n+\n+\/\/ Based off of the plugin by Clint Helfers, with permission.\n+jQuery.fn.delay = function( time, type ) {\n+\ttime = jQuery.fx ? jQuery.fx.speeds[ time ] || time : time;\n+\ttype = type || \"fx\";\n+\n+\treturn this.queue( type, function( next, hooks ) {\n+\t\tvar timeout = window.setTimeout( next, time );\n+\t\thooks.stop = function() {\n+\t\t\twindow.clearTimeout( timeout );\n+\t\t};\n+\t} );\n+};\n+\n+\n+( function() {\n+\tvar input = document.createElement( \"input\" ),\n+\t\tselect = document.createElement( \"select\" ),\n+\t\topt = select.appendChild( document.createElement( \"option\" ) );\n+\n+\tinput.type = \"checkbox\";\n+\n+\t\/\/ Support: Android <=4.3 only\n+\t\/\/ Default value for a checkbox should be \"on\"\n+\tsupport.checkOn = input.value !== \"\";\n+\n+\t\/\/ Support: IE <=11 only\n+\t\/\/ Must access selectedIndex to make default options select\n+\tsupport.optSelected = opt.selected;\n+\n+\t\/\/ Support: IE <=11 only\n+\t\/\/ An input loses its value after becoming a radio\n+\tinput = document.createElement( \"input\" );\n+\tinput.value = \"t\";\n+\tinput.type = \"radio\";\n+\tsupport.radioValue = input.value === \"t\";\n+} )();\n+\n+\n+var boolHook,\n+\tattrHandle = jQuery.expr.attrHandle;\n+\n+jQuery.fn.extend( {\n+\tattr: function( name, value ) {\n+\t\treturn access( this, jQuery.attr, name, value, arguments.length > 1 );\n+\t},\n+\n+\tremoveAttr: function( name ) {\n+\t\treturn this.each( function() {\n+\t\t\tjQuery.removeAttr( this, name );\n+\t\t} );\n+\t}\n+} );\n+\n+jQuery.extend( {\n+\tattr: function( elem, name, value ) {\n+\t\tvar ret, hooks,\n+\t\t\tnType = elem.nodeType;\n+\n+\t\t\/\/ Don't get\/set attributes on text, comment and attribute nodes\n+\t\tif ( nType === 3 || nType === 8 || nType === 2 ) {\n+\t\t\treturn;\n+\t\t}\n+\n+\t\t\/\/ Fallback to prop when attributes are not supported\n+\t\tif ( typeof elem.getAttribute === \"undefined\" ) {\n+\t\t\treturn jQuery.prop( elem, name, value );\n+\t\t}\n+\n+\t\t\/\/ Attribute hooks are determined by the lowercase version\n+\t\t\/\/ Grab necessary hook if one is defined\n+\t\tif ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {\n+\t\t\thooks = jQuery.attrHooks[ name.toLowerCase() ] ||\n+\t\t\t\t( jQuery.expr.match.bool.test( name ) ? boolHook : undefined );\n+\t\t}\n+\n+\t\tif ( value !== undefined ) {\n+\t\t\tif ( value === null ) {\n+\t\t\t\tjQuery.removeAttr( elem, name );\n+\t\t\t\treturn;\n+\t\t\t}\n+\n+\t\t\tif ( hooks && \"set\" in hooks &&\n+\t\t\t\t( ret = hooks.set( elem, value, name ) ) !== undefined ) {\n+\t\t\t\treturn ret;\n+\t\t\t}\n+\n+\t\t\telem.setAttribute( name, value + \"\" );\n+\t\t\treturn value;\n+\t\t}\n+\n+\t\tif ( hooks && \"get\" in hooks && ( ret = hooks.get( elem, name ) ) !== null ) {\n+\t\t\treturn ret;\n+\t\t}\n+\n+\t\tret = jQuery.find.attr( elem, name );\n+\n+\t\t\/\/ Non-existent attributes return null, we normalize to undefined\n+\t\treturn ret == null ? undefined : ret;\n+\t},\n+\n+\tattrHooks: {\n+\t\ttype: {\n+\t\t\tset: function( elem, value ) {\n+\t\t\t\tif ( !support.radioValue && value === \"radio\" &&\n+\t\t\t\t\tnodeName( elem, \"input\" ) ) {\n+\t\t\t\t\tvar val = elem.value;\n+\t\t\t\t\telem.setAttribute( \"type\", value );\n+\t\t\t\t\tif ( val ) {\n+\t\t\t\t\t\telem.value = val;\n+\t\t\t\t\t}\n+\t\t\t\t\treturn value;\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\t},\n+\n+\tremoveAttr: function( elem, value ) {\n+\t\tvar name,\n+\t\t\ti = 0,\n+\n+\t\t\t\/\/ Attribute names can contain non-HTML whitespace characters\n+\t\t\t\/\/ https:\/\/html.spec.whatwg.org\/multipage\/syntax.html#attributes-2\n+\t\t\tattrNames = value && value.match( rnothtmlwhite );\n+\n+\t\tif ( attrNames && elem.nodeType === 1 ) {\n+\t\t\twhile ( ( name = attrNames[ i++ ] ) ) {\n+\t\t\t\telem.removeAttribute( name );\n+\t\t\t}\n+\t\t}\n+\t}\n+} );\n+\n+\/\/ Hooks for boolean attributes\n+boolHook = {\n+\tset: function( elem, value, name ) {\n+\t\tif ( value === false ) {\n+\n+\t\t\t\/\/ Remove boolean attributes when set to false\n+\t\t\tjQuery.removeAttr( elem, name );\n+\t\t} else {\n+\t\t\telem.setAttribute( name, name );\n+\t\t}\n+\t\treturn name;\n+\t}\n+};\n+\n+jQuery.each( jQuery.expr.match.bool.source.match( \/\\w+\/g ), function( _i, name ) {\n+\tvar getter = attrHandle[ name ] || jQuery.find.attr;\n+\n+\tattrHandle[ name ] = function( elem, name, isXML ) {\n+\t\tvar ret, handle,\n+\t\t\tlowercaseName = name.toLowerCase();\n+\n+\t\tif ( !isXML ) {\n+\n+\t\t\t\/\/ Avoid an infinite loop by temporarily removing this function from the getter\n+\t\t\thandle = attrHandle[ lowercaseName ];\n+\t\t\tattrHandle[ lowercaseName ] = ret;\n+\t\t\tret = getter( elem, name, isXML ) != null ?\n+\t\t\t\tlowercaseName :\n+\t\t\t\tnull;\n+\t\t\tattrHandle[ lowercaseName ] = handle;\n+\t\t}\n+\t\treturn ret;\n+\t};\n+} );\n+\n+\n+\n+\n+var rfocusable = \/^(?:input|select|textarea|button)$\/i,\n+\trclickable = \/^(?:a|area)$\/i;\n+\n+jQuery.fn.extend( {\n+\tprop: function( name, value ) {\n+\t\treturn access( this, jQuery.prop, name, value, arguments.length > 1 );\n+\t},\n+\n+\tremoveProp: function( name ) {\n+\t\treturn this.each( function() {\n+\t\t\tdelete this[ jQuery.propFix[ name ] || name ];\n+\t\t} );\n+\t}\n+} );\n+\n+jQuery.extend( {\n+\tprop: function( elem, name, value ) {\n+\t\tvar ret, hooks,\n+\t\t\tnType = elem.nodeType;\n+\n+\t\t\/\/ Don't get\/set properties on text, comment and attribute nodes\n+\t\tif ( nType === 3 || nType === 8 || nType === 2 ) {\n+\t\t\treturn;\n+\t\t}\n+\n+\t\tif ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {\n+\n+\t\t\t\/\/ Fix name and attach hooks\n+\t\t\tname = jQuery.propFix[ name ] || name;\n+\t\t\thooks = jQuery.propHooks[ name ];\n+\t\t}\n+\n+\t\tif ( value !== undefined ) {\n+\t\t\tif ( hooks && \"set\" in hooks &&\n+\t\t\t\t( ret = hooks.set( elem, value, name ) ) !== undefined ) {\n+\t\t\t\treturn ret;\n+\t\t\t}\n+\n+\t\t\treturn ( elem[ name ] = value );\n+\t\t}\n+\n+\t\tif ( hooks && \"get\" in hooks && ( ret = hooks.get( elem, name ) ) !== null ) {\n+\t\t\treturn ret;\n+\t\t}\n+\n+\t\treturn elem[ name ];\n+\t},\n+\n+\tpropHooks: {\n+\t\ttabIndex: {\n+\t\t\tget: function( elem ) {\n+\n+\t\t\t\t\/\/ Support: IE <=9 - 11 only\n+\t\t\t\t\/\/ elem.tabIndex doesn't always return the\n+\t\t\t\t\/\/ correct value when it hasn't been explicitly set\n+\t\t\t\t\/\/ Use proper attribute retrieval (trac-12072)\n+\t\t\t\tvar tabindex = jQuery.find.attr( elem, \"tabindex\" );\n+\n+\t\t\t\tif ( tabindex ) {\n+\t\t\t\t\treturn parseInt( tabindex, 10 );\n+\t\t\t\t}\n+\n+\t\t\t\tif (\n+\t\t\t\t\trfocusable.test( elem.nodeName ) ||\n+\t\t\t\t\trclickable.test( elem.nodeName ) &&\n+\t\t\t\t\telem.href\n+\t\t\t\t) {\n+\t\t\t\t\treturn 0;\n+\t\t\t\t}\n+\n+\t\t\t\treturn -1;\n+\t\t\t}\n+\t\t}\n+\t},\n+\n+\tpropFix: {\n+\t\t\"for\": \"htmlFor\",\n+\t\t\"class\": \"className\"\n+\t}\n+} );\n+\n+\/\/ Support: IE <=11 only\n+\/\/ Accessing the selectedIndex property\n+\/\/ forces the browser to respect setting selected\n+\/\/ on the option\n+\/\/ The getter ensures a default option is selected\n+\/\/ when in an optgroup\n+\/\/ eslint rule \"no-unused-expressions\" is disabled for this code\n+\/\/ since it considers such accessions noop\n+if ( !support.optSelected ) {\n+\tjQuery.propHooks.selected = {\n+\t\tget: function( elem ) {\n+\n+\t\t\t\/* eslint no-unused-expressions: \"off\" *\/\n+\n+\t\t\tvar parent = elem.parentNode;\n+\t\t\tif ( parent && parent.parentNode ) {\n+\t\t\t\tparent.parentNode.selectedIndex;\n+\t\t\t}\n+\t\t\treturn null;\n+\t\t},\n+\t\tset: function( elem ) {\n+\n+\t\t\t\/* eslint no-unused-expressions: \"off\" *\/\n+\n+\t\t\tvar parent = elem.parentNode;\n+\t\t\tif ( parent ) {\n+\t\t\t\tparent.selectedIndex;\n+\n+\t\t\t\tif ( parent.parentNode ) {\n+\t\t\t\t\tparent.parentNode.selectedIndex;\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\t};\n+}\n+\n+jQuery.each( [\n+\t\"tabIndex\",\n+\t\"readOnly\",\n+\t\"maxLength\",\n+\t\"cellSpacing\",\n+\t\"cellPadding\",\n+\t\"rowSpan\",\n+\t\"colSpan\",\n+\t\"useMap\",\n+\t\"frameBorder\",\n+\t\"contentEditable\"\n+], function() {\n+\tjQuery.propFix[ this.toLowerCase() ] = this;\n+} );\n+\n+\n+\n+\n+\t\/\/ Strip and collapse whitespace according to HTML spec\n+\t\/\/ https:\/\/infra.spec.whatwg.org\/#strip-and-collapse-ascii-whitespace\n+\tfunction stripAndCollapse( value ) {\n+\t\tvar tokens = value.match( rnothtmlwhite ) || [];\n+\t\treturn tokens.join( \" \" );\n+\t}\n+\n+\n+function getClass( elem ) {\n+\treturn elem.getAttribute && elem.getAttribute( \"class\" ) || \"\";\n+}\n+\n+function classesToArray( value ) {\n+\tif ( Array.isArray( value ) ) {\n+\t\treturn value;\n+\t}\n+\tif ( typeof value === \"string\" ) {\n+\t\treturn value.match( rnothtmlwhite ) || [];\n+\t}\n+\treturn [];\n+}\n+\n+jQuery.fn.extend( {\n+\taddClass: function( value ) {\n+\t\tvar classNames, cur, curValue, className, i, finalValue;\n+\n+\t\tif ( isFunction( value ) ) {\n+\t\t\treturn this.each( function( j ) {\n+\t\t\t\tjQuery( this ).addClass( value.call( this, j, getClass( this ) ) );\n+\t\t\t} );\n+\t\t}\n+\n+\t\tclassNames = classesToArray( value );\n+\n+\t\tif ( classNames.length ) {\n+\t\t\treturn this.each( function() {\n+\t\t\t\tcurValue = getClass( this );\n+\t\t\t\tcur = this.nodeType === 1 && ( \" \" + stripAndCollapse( curValue ) + \" \" );\n+\n+\t\t\t\tif ( cur ) {\n+\t\t\t\t\tfor ( i = 0; i < classNames.length; i++ ) {\n+\t\t\t\t\t\tclassName = classNames[ i ];\n+\t\t\t\t\t\tif ( cur.indexOf( \" \" + className + \" \" ) < 0 ) {\n+\t\t\t\t\t\t\tcur += className + \" \";\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\n+\t\t\t\t\t\/\/ Only assign if different to avoid unneeded rendering.\n+\t\t\t\t\tfinalValue = stripAndCollapse( cur );\n+\t\t\t\t\tif ( curValue !== finalValue ) {\n+\t\t\t\t\t\tthis.setAttribute( \"class\", finalValue );\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t} );\n+\t\t}\n+\n+\t\treturn this;\n+\t},\n+\n+\tremoveClass: function( value ) {\n+\t\tvar classNames, cur, curValue, className, i, finalValue;\n+\n+\t\tif ( isFunction( value ) ) {\n+\t\t\treturn this.each( function( j ) {\n+\t\t\t\tjQuery( this ).removeClass( value.call( this, j, getClass( this ) ) );\n+\t\t\t} );\n+\t\t}\n+\n+\t\tif ( !arguments.length ) {\n+\t\t\treturn this.attr( \"class\", \"\" );\n+\t\t}\n+\n+\t\tclassNames = classesToArray( value );\n+\n+\t\tif ( classNames.length ) {\n+\t\t\treturn this.each( function() {\n+\t\t\t\tcurValue = getClass( this );\n+\n+\t\t\t\t\/\/ This expression is here for better compressibility (see addClass)\n+\t\t\t\tcur = this.nodeType === 1 && ( \" \" + stripAndCollapse( curValue ) + \" \" );\n+\n+\t\t\t\tif ( cur ) {\n+\t\t\t\t\tfor ( i = 0; i < classNames.length; i++ ) {\n+\t\t\t\t\t\tclassName = classNames[ i ];\n+\n+\t\t\t\t\t\t\/\/ Remove *all* instances\n+\t\t\t\t\t\twhile ( cur.indexOf( \" \" + className + \" \" ) > -1 ) {\n+\t\t\t\t\t\t\tcur = cur.replace( \" \" + className + \" \", \" \" );\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\n+\t\t\t\t\t\/\/ Only assign if different to avoid unneeded rendering.\n+\t\t\t\t\tfinalValue = stripAndCollapse( cur );\n+\t\t\t\t\tif ( curValue !== finalValue ) {\n+\t\t\t\t\t\tthis.setAttribute( \"class\", finalValue );\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t} );\n+\t\t}\n+\n+\t\treturn this;\n+\t},\n+\n+\ttoggleClass: function( value, stateVal ) {\n+\t\tvar classNames, className, i, self,\n+\t\t\ttype = typeof value,\n+\t\t\tisValidValue = type === \"string\" || Array.isArray( value );\n+\n+\t\tif ( isFunction( value ) ) {\n+\t\t\treturn this.each( function( i ) {\n+\t\t\t\tjQuery( this ).toggleClass(\n+\t\t\t\t\tvalue.call( this, i, getClass( this ), stateVal ),\n+\t\t\t\t\tstateVal\n+\t\t\t\t);\n+\t\t\t} );\n+\t\t}\n+\n+\t\tif ( typeof stateVal === \"boolean\" && isValidValue ) {\n+\t\t\treturn stateVal ? this.addClass( value ) : this.removeClass( value );\n+\t\t}\n+\n+\t\tclassNames = classesToArray( value );\n+\n+\t\treturn this.each( function() {\n+\t\t\tif ( isValidValue ) {\n+\n+\t\t\t\t\/\/ Toggle individual class names\n+\t\t\t\tself = jQuery( this );\n+\n+\t\t\t\tfor ( i = 0; i < classNames.length; i++ ) {\n+\t\t\t\t\tclassName = classNames[ i ];\n+\n+\t\t\t\t\t\/\/ Check each className given, space separated list\n+\t\t\t\t\tif ( self.hasClass( className ) ) {\n+\t\t\t\t\t\tself.removeClass( className );\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\tself.addClass( className );\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\n+\t\t\t\/\/ Toggle whole class name\n+\t\t\t} else if ( value === undefined || type === \"boolean\" ) {\n+\t\t\t\tclassName = getClass( this );\n+\t\t\t\tif ( className ) {\n+\n+\t\t\t\t\t\/\/ Store className if set\n+\t\t\t\t\tdataPriv.set( this, \"__className__\", className );\n+\t\t\t\t}\n+\n+\t\t\t\t\/\/ If the element has a class name or if we're passed `false`,\n+\t\t\t\t\/\/ then remove the whole classname (if there was one, the above saved it).\n+\t\t\t\t\/\/ Otherwise bring back whatever was previously saved (if anything),\n+\t\t\t\t\/\/ falling back to the empty string if nothing was stored.\n+\t\t\t\tif ( this.setAttribute ) {\n+\t\t\t\t\tthis.setAttribute( \"class\",\n+\t\t\t\t\t\tclassName || value === false ?\n+\t\t\t\t\t\t\t\"\" :\n+\t\t\t\t\t\t\tdataPriv.get( this, \"__className__\" ) || \"\"\n+\t\t\t\t\t);\n+\t\t\t\t}\n+\t\t\t}\n+\t\t} );\n+\t},\n+\n+\thasClass: function( selector ) {\n+\t\tvar className, elem,\n+\t\t\ti = 0;\n+\n+\t\tclassName = \" \" + selector + \" \";\n+\t\twhile ( ( elem = this[ i++ ] ) ) {\n+\t\t\tif ( elem.nodeType === 1 &&\n+\t\t\t\t( \" \" + stripAndCollapse( getClass( elem ) ) + \" \" ).indexOf( className ) > -1 ) {\n+\t\t\t\treturn true;\n+\t\t\t}\n+\t\t}\n+\n+\t\treturn false;\n+\t}\n+} );\n+\n+\n+\n+\n+var rreturn = \/\\r\/g;\n+\n+jQuery.fn.extend( {\n+\tval: function( value ) {\n+\t\tvar hooks, ret, valueIsFunction,\n+\t\t\telem = this[ 0 ];\n+\n+\t\tif ( !arguments.length ) {\n+\t\t\tif ( elem ) {\n+\t\t\t\thooks = jQuery.valHooks[ elem.type ] ||\n+\t\t\t\t\tjQuery.valHooks[ elem.nodeName.toLowerCase() ];\n+\n+\t\t\t\tif ( hooks &&\n+\t\t\t\t\t\"get\" in hooks &&\n+\t\t\t\t\t( ret = hooks.get( elem, \"value\" ) ) !== undefined\n+\t\t\t\t) {\n+\t\t\t\t\treturn ret;\n+\t\t\t\t}\n+\n+\t\t\t\tret = elem.value;\n+\n+\t\t\t\t\/\/ Handle most common string cases\n+\t\t\t\tif ( typeof ret === \"string\" ) {\n+\t\t\t\t\treturn ret.replace( rreturn, \"\" );\n+\t\t\t\t}\n+\n+\t\t\t\t\/\/ Handle cases where value is null\/undef or number\n+\t\t\t\treturn ret == null ? \"\" : ret;\n+\t\t\t}\n+\n+\t\t\treturn;\n+\t\t}\n+\n+\t\tvalueIsFunction = isFunction( value );\n+\n+\t\treturn this.each( function( i ) {\n+\t\t\tvar val;\n+\n+\t\t\tif ( this.nodeType !== 1 ) {\n+\t\t\t\treturn;\n+\t\t\t}\n+\n+\t\t\tif ( valueIsFunction ) {\n+\t\t\t\tval = value.call( this, i, jQuery( this ).val() );\n+\t\t\t} else {\n+\t\t\t\tval = value;\n+\t\t\t}\n+\n+\t\t\t\/\/ Treat null\/undefined as \"\"; convert numbers to string\n+\t\t\tif ( val == null ) {\n+\t\t\t\tval = \"\";\n+\n+\t\t\t} else if ( typeof val === \"number\" ) {\n+\t\t\t\tval += \"\";\n+\n+\t\t\t} else if ( Array.isArray( val ) ) {\n+\t\t\t\tval = jQuery.map( val, function( value ) {\n+\t\t\t\t\treturn value == null ? \"\" : value + \"\";\n+\t\t\t\t} );\n+\t\t\t}\n+\n+\t\t\thooks = jQuery.valHooks[ this.type ] || jQuery.valHooks[ this.nodeName.toLowerCase() ];\n+\n+\t\t\t\/\/ If set returns undefined, fall back to normal setting\n+\t\t\tif ( !hooks || !( \"set\" in hooks ) || hooks.set( this, val, \"value\" ) === undefined ) {\n+\t\t\t\tthis.value = val;\n+\t\t\t}\n+\t\t} );\n+\t}\n+} );\n+\n+jQuery.extend( {\n+\tvalHooks: {\n+\t\toption: {\n+\t\t\tget: function( elem ) {\n+\n+\t\t\t\tvar val = jQuery.find.attr( elem, \"value\" );\n+\t\t\t\treturn val != null ?\n+\t\t\t\t\tval :\n+\n+\t\t\t\t\t\/\/ Support: IE <=10 - 11 only\n+\t\t\t\t\t\/\/ option.text throws exceptions (trac-14686, trac-14858)\n+\t\t\t\t\t\/\/ Strip and collapse whitespace\n+\t\t\t\t\t\/\/ https:\/\/html.spec.whatwg.org\/#strip-and-collapse-whitespace\n+\t\t\t\t\tstripAndCollapse( jQuery.text( elem ) );\n+\t\t\t}\n+\t\t},\n+\t\tselect: {\n+\t\t\tget: function( elem ) {\n+\t\t\t\tvar value, option, i,\n+\t\t\t\t\toptions = elem.options,\n+\t\t\t\t\tindex = elem.selectedIndex,\n+\t\t\t\t\tone = elem.type === \"select-one\",\n+\t\t\t\t\tvalues = one ? null : [],\n+\t\t\t\t\tmax = one ? index + 1 : options.length;\n+\n+\t\t\t\tif ( index < 0 ) {\n+\t\t\t\t\ti = max;\n+\n+\t\t\t\t} else {\n+\t\t\t\t\ti = one ? index : 0;\n+\t\t\t\t}\n+\n+\t\t\t\t\/\/ Loop through all the selected options\n+\t\t\t\tfor ( ; i < max; i++ ) {\n+\t\t\t\t\toption = options[ i ];\n+\n+\t\t\t\t\t\/\/ Support: IE <=9 only\n+\t\t\t\t\t\/\/ IE8-9 doesn't update selected after form reset (trac-2551)\n+\t\t\t\t\tif ( ( option.selected || i === index ) &&\n+\n+\t\t\t\t\t\t\t\/\/ Don't return options that are disabled or in a disabled optgroup\n+\t\t\t\t\t\t\t!option.disabled &&\n+\t\t\t\t\t\t\t( !option.parentNode.disabled ||\n+\t\t\t\t\t\t\t\t!nodeName( option.parentNode, \"optgroup\" ) ) ) {\n+\n+\t\t\t\t\t\t\/\/ Get the specific value for the option\n+\t\t\t\t\t\tvalue = jQuery( option ).val();\n+\n+\t\t\t\t\t\t\/\/ We don't need an array for one selects\n+\t\t\t\t\t\tif ( one ) {\n+\t\t\t\t\t\t\treturn value;\n+\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\/\/ Multi-Selects return an array\n+\t\t\t\t\t\tvalues.push( value );\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\n+\t\t\t\treturn values;\n+\t\t\t},\n+\n+\t\t\tset: function( elem, value ) {\n+\t\t\t\tvar optionSet, option,\n+\t\t\t\t\toptions = elem.options,\n+\t\t\t\t\tvalues = jQuery.makeArray( value ),\n+\t\t\t\t\ti = options.length;\n+\n+\t\t\t\twhile ( i-- ) {\n+\t\t\t\t\toption = options[ i ];\n+\n+\t\t\t\t\t\/* eslint-disable no-cond-assign *\/\n+\n+\t\t\t\t\tif ( option.selected =\n+\t\t\t\t\t\tjQuery.inArray( jQuery.valHooks.option.get( option ), values ) > -1\n+\t\t\t\t\t) {\n+\t\t\t\t\t\toptionSet = true;\n+\t\t\t\t\t}\n+\n+\t\t\t\t\t\/* eslint-enable no-cond-assign *\/\n+\t\t\t\t}\n+\n+\t\t\t\t\/\/ Force browsers to behave consistently when non-matching value is set\n+\t\t\t\tif ( !optionSet ) {\n+\t\t\t\t\telem.selectedIndex = -1;\n+\t\t\t\t}\n+\t\t\t\treturn values;\n+\t\t\t}\n+\t\t}\n+\t}\n+} );\n+\n+\/\/ Radios and checkboxes getter\/setter\n+jQuery.each( [ \"radio\", \"checkbox\" ], function() {\n+\tjQuery.valHooks[ this ] = {\n+\t\tset: function( elem, value ) {\n+\t\t\tif ( Array.isArray( value ) ) {\n+\t\t\t\treturn ( elem.checked = jQuery.inArray( jQuery( elem ).val(), value ) > -1 );\n+\t\t\t}\n+\t\t}\n+\t};\n+\tif ( !support.checkOn ) {\n+\t\tjQuery.valHooks[ this ].get = function( elem ) {\n+\t\t\treturn elem.getAttribute( \"value\" ) === null ? \"on\" : elem.value;\n+\t\t};\n+\t}\n+} );\n+\n+\n+\n+\n+\/\/ Return jQuery for attributes-only inclusion\n+var location = window.location;\n+\n+var nonce = { guid: Date.now() };\n+\n+var rquery = ( \/\\?\/ );\n+\n+\n+\n+\/\/ Cross-browser xml parsing\n+jQuery.parseXML = function( data ) {\n+\tvar xml, parserErrorElem;\n+\tif ( !data || typeof data !== \"string\" ) {\n+\t\treturn null;\n+\t}\n+\n+\t\/\/ Support: IE 9 - 11 only\n+\t\/\/ IE throws on parseFromString with invalid input.\n+\ttry {\n+\t\txml = ( new window.DOMParser() ).parseFromString( data, \"text\/xml\" );\n+\t} catch ( e ) {}\n+\n+\tparserErrorElem = xml && xml.getElementsByTagName( \"parsererror\" )[ 0 ];\n+\tif ( !xml || parserErrorElem ) {\n+\t\tjQuery.error( \"Invalid XML: \" + (\n+\t\t\tparserErrorElem ?\n+\t\t\t\tjQuery.map( parserErrorElem.childNodes, function( el ) {\n+\t\t\t\t\treturn el.textContent;\n+\t\t\t\t} ).join( \"\\n\" ) :\n+\t\t\t\tdata\n+\t\t) );\n+\t}\n+\treturn xml;\n+};\n+\n+\n+var rfocusMorph = \/^(?:focusinfocus|focusoutblur)$\/,\n+\tstopPropagationCallback = function( e ) {\n+\t\te.stopPropagation();\n+\t};\n+\n+jQuery.extend( jQuery.event, {\n+\n+\ttrigger: function( event, data, elem, onlyHandlers ) {\n+\n+\t\tvar i, cur, tmp, bubbleType, ontype, handle, special, lastElement,\n+\t\t\teventPath = [ elem || document ],\n+\t\t\ttype = hasOwn.call( event, \"type\" ) ? event.type : event,\n+\t\t\tnamespaces = hasOwn.call( event, \"namespace\" ) ? event.namespace.split( \".\" ) : [];\n+\n+\t\tcur = lastElement = tmp = elem = elem || document;\n+\n+\t\t\/\/ Don't do events on text and comment nodes\n+\t\tif ( elem.nodeType === 3 || elem.nodeType === 8 ) {\n+\t\t\treturn;\n+\t\t}\n+\n+\t\t\/\/ focus\/blur morphs to focusin\/out; ensure we're not firing them right now\n+\t\tif ( rfocusMorph.test( type + jQuery.event.triggered ) ) {\n+\t\t\treturn;\n+\t\t}\n+\n+\t\tif ( type.indexOf( \".\" ) > -1 ) {\n+\n+\t\t\t\/\/ Namespaced trigger; create a regexp to match event type in handle()\n+\t\t\tnamespaces = type.split( \".\" );\n+\t\t\ttype = namespaces.shift();\n+\t\t\tnamespaces.sort();\n+\t\t}\n+\t\tontype = type.indexOf( \":\" ) < 0 && \"on\" + type;\n+\n+\t\t\/\/ Caller can pass in a jQuery.Event object, Object, or just an event type string\n+\t\tevent = event[ jQuery.expando ] ?\n+\t\t\tevent :\n+\t\t\tnew jQuery.Event( type, typeof event === \"object\" && event );\n+\n+\t\t\/\/ Trigger bitmask: & 1 for native handlers; & 2 for jQuery (always true)\n+\t\tevent.isTrigger = onlyHandlers ? 2 : 3;\n+\t\tevent.namespace = namespaces.join( \".\" );\n+\t\tevent.rnamespace = event.namespace ?\n+\t\t\tnew RegExp( \"(^|\\\\.)\" + namespaces.join( \"\\\\.(?:.*\\\\.|)\" ) + \"(\\\\.|$)\" ) :\n+\t\t\tnull;\n+\n+\t\t\/\/ Clean up the event in case it is being reused\n+\t\tevent.result = undefined;\n+\t\tif ( !event.target ) {\n+\t\t\tevent.target = elem;\n+\t\t}\n+\n+\t\t\/\/ Clone any incoming data and prepend the event, creating the handler arg list\n+\t\tdata = data == null ?\n+\t\t\t[ event ] :\n+\t\t\tjQuery.makeArray( data, [ event ] );\n+\n+\t\t\/\/ Allow special events to draw outside the lines\n+\t\tspecial = jQuery.event.special[ type ] || {};\n+\t\tif ( !onlyHandlers && special.trigger && special.trigger.apply( elem, data ) === false ) {\n+\t\t\treturn;\n+\t\t}\n+\n+\t\t\/\/ Determine event propagation path in advance, per W3C events spec (trac-9951)\n+\t\t\/\/ Bubble up to document, then to window; watch for a global ownerDocument var (trac-9724)\n+\t\tif ( !onlyHandlers && !special.noBubble && !isWindow( elem ) ) {\n+\n+\t\t\tbubbleType = special.delegateType || type;\n+\t\t\tif ( !rfocusMorph.test( bubbleType + type ) ) {\n+\t\t\t\tcur = cur.parentNode;\n+\t\t\t}\n+\t\t\tfor ( ; cur; cur = cur.parentNode ) {\n+\t\t\t\teventPath.push( cur );\n+\t\t\t\ttmp = cur;\n+\t\t\t}\n+\n+\t\t\t\/\/ Only add window if we got to document (e.g., not plain obj or detached DOM)\n+\t\t\tif ( tmp === ( elem.ownerDocument || document ) ) {\n+\t\t\t\teventPath.push( tmp.defaultView || tmp.parentWindow || window );\n+\t\t\t}\n+\t\t}\n+\n+\t\t\/\/ Fire handlers on the event path\n+\t\ti = 0;\n+\t\twhile ( ( cur = eventPath[ i++ ] ) && !event.isPropagationStopped() ) {\n+\t\t\tlastElement = cur;\n+\t\t\tevent.type = i > 1 ?\n+\t\t\t\tbubbleType :\n+\t\t\t\tspecial.bindType || type;\n+\n+\t\t\t\/\/ jQuery handler\n+\t\t\thandle = ( dataPriv.get( cur, \"events\" ) || Object.create( null ) )[ event.type ] &&\n+\t\t\t\tdataPriv.get( cur, \"handle\" );\n+\t\t\tif ( handle ) {\n+\t\t\t\thandle.apply( cur, data );\n+\t\t\t}\n+\n+\t\t\t\/\/ Native handler\n+\t\t\thandle = ontype && cur[ ontype ];\n+\t\t\tif ( handle && handle.apply && acceptData( cur ) ) {\n+\t\t\t\tevent.result = handle.apply( cur, data );\n+\t\t\t\tif ( event.result === false ) {\n+\t\t\t\t\tevent.preventDefault();\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\t\tevent.type = type;\n+\n+\t\t\/\/ If nobody prevented the default action, do it now\n+\t\tif ( !onlyHandlers && !event.isDefaultPrevented() ) {\n+\n+\t\t\tif ( ( !special._default ||\n+\t\t\t\tspecial._default.apply( eventPath.pop(), data ) === false ) &&\n+\t\t\t\tacceptData( elem ) ) {\n+\n+\t\t\t\t\/\/ Call a native DOM method on the target with the same name as the event.\n+\t\t\t\t\/\/ Don't do default actions on window, that's where global variables be (trac-6170)\n+\t\t\t\tif ( ontype && isFunction( elem[ type ] ) && !isWindow( elem ) ) {\n+\n+\t\t\t\t\t\/\/ Don't re-trigger an onFOO event when we call its FOO() method\n+\t\t\t\t\ttmp = elem[ ontype ];\n+\n+\t\t\t\t\tif ( tmp ) {\n+\t\t\t\t\t\telem[ ontype ] = null;\n+\t\t\t\t\t}\n+\n+\t\t\t\t\t\/\/ Prevent re-triggering of the same event, since we already bubbled it above\n+\t\t\t\t\tjQuery.event.triggered = type;\n+\n+\t\t\t\t\tif ( event.isPropagationStopped() ) {\n+\t\t\t\t\t\tlastElement.addEventListener( type, stopPropagationCallback );\n+\t\t\t\t\t}\n+\n+\t\t\t\t\telem[ type ]();\n+\n+\t\t\t\t\tif ( event.isPropagationStopped() ) {\n+\t\t\t\t\t\tlastElement.removeEventListener( type, stopPropagationCallback );\n+\t\t\t\t\t}\n+\n+\t\t\t\t\tjQuery.event.triggered = undefined;\n+\n+\t\t\t\t\tif ( tmp ) {\n+\t\t\t\t\t\telem[ ontype ] = tmp;\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\n+\t\treturn event.result;\n+\t},\n+\n+\t\/\/ Piggyback on a donor event to simulate a different one\n+\t\/\/ Used only for `focus(in | out)` events\n+\tsimulate: function( type, elem, event ) {\n+\t\tvar e = jQuery.extend(\n+\t\t\tnew jQuery.Event(),\n+\t\t\tevent,\n+\t\t\t{\n+\t\t\t\ttype: type,\n+\t\t\t\tisSimulated: true\n+\t\t\t}\n+\t\t);\n+\n+\t\tjQuery.event.trigger( e, null, elem );\n+\t}\n+\n+} );\n+\n+jQuery.fn.extend( {\n+\n+\ttrigger: function( type, data ) {\n+\t\treturn this.each( function() {\n+\t\t\tjQuery.event.trigger( type, data, this );\n+\t\t} );\n+\t},\n+\ttriggerHandler: function( type, data ) {\n+\t\tvar elem = this[ 0 ];\n+\t\tif ( elem ) {\n+\t\t\treturn jQuery.event.trigger( type, data, elem, true );\n+\t\t}\n+\t}\n+} );\n+\n+\n+var\n+\trbracket = \/\\[\\]$\/,\n+\trCRLF = \/\\r?\\n\/g,\n+\trsubmitterTypes = \/^(?:submit|button|image|reset|file)$\/i,\n+\trsubmittable = \/^(?:input|select|textarea|keygen)\/i;\n+\n+function buildParams( prefix, obj, traditional, add ) {\n+\tvar name;\n+\n+\tif ( Array.isArray( obj ) ) {\n+\n+\t\t\/\/ Serialize array item.\n+\t\tjQuery.each( obj, function( i, v ) {\n+\t\t\tif ( traditional || rbracket.test( prefix ) ) {\n+\n+\t\t\t\t\/\/ Treat each array item as a scalar.\n+\t\t\t\tadd( prefix, v );\n+\n+\t\t\t} else {\n+\n+\t\t\t\t\/\/ Item is non-scalar (array or object), encode its numeric index.\n+\t\t\t\tbuildParams(\n+\t\t\t\t\tprefix + \"[\" + ( typeof v === \"object\" && v != null ? i : \"\" ) + \"]\",\n+\t\t\t\t\tv,\n+\t\t\t\t\ttraditional,\n+\t\t\t\t\tadd\n+\t\t\t\t);\n+\t\t\t}\n+\t\t} );\n+\n+\t} else if ( !traditional && toType( obj ) === \"object\" ) {\n+\n+\t\t\/\/ Serialize object item.\n+\t\tfor ( name in obj ) {\n+\t\t\tbuildParams( prefix + \"[\" + name + \"]\", obj[ name ], traditional, add );\n+\t\t}\n+\n+\t} else {\n+\n+\t\t\/\/ Serialize scalar item.\n+\t\tadd( prefix, obj );\n+\t}\n+}\n+\n+\/\/ Serialize an array of form elements or a set of\n+\/\/ key\/values into a query string\n+jQuery.param = function( a, traditional ) {\n+\tvar prefix,\n+\t\ts = [],\n+\t\tadd = function( key, valueOrFunction ) {\n+\n+\t\t\t\/\/ If value is a function, invoke it and use its return value\n+\t\t\tvar value = isFunction( valueOrFunction ) ?\n+\t\t\t\tvalueOrFunction() :\n+\t\t\t\tvalueOrFunction;\n+\n+\t\t\ts[ s.length ] = encodeURIComponent( key ) + \"=\" +\n+\t\t\t\tencodeURIComponent( value == null ? \"\" : value );\n+\t\t};\n+\n+\tif ( a == null ) {\n+\t\treturn \"\";\n+\t}\n+\n+\t\/\/ If an array was passed in, assume that it is an array of form elements.\n+\tif ( Array.isArray( a ) || ( a.jquery && !jQuery.isPlainObject( a ) ) ) {\n+\n+\t\t\/\/ Serialize the form elements\n+\t\tjQuery.each( a, function() {\n+\t\t\tadd( this.name, this.value );\n+\t\t} );\n+\n+\t} else {\n+\n+\t\t\/\/ If traditional, encode the \"old\" way (the way 1.3.2 or older\n+\t\t\/\/ did it), otherwise encode params recursively.\n+\t\tfor ( prefix in a ) {\n+\t\t\tbuildParams( prefix, a[ prefix ], traditional, add );\n+\t\t}\n+\t}\n+\n+\t\/\/ Return the resulting serialization\n+\treturn s.join( \"&\" );\n+};\n+\n+jQuery.fn.extend( {\n+\tserialize: function() {\n+\t\treturn jQuery.param( this.serializeArray() );\n+\t},\n+\tserializeArray: function() {\n+\t\treturn this.map( function() {\n+\n+\t\t\t\/\/ Can add propHook for \"elements\" to filter or add form elements\n+\t\t\tvar elements = jQuery.prop( this, \"elements\" );\n+\t\t\treturn elements ? jQuery.makeArray( elements ) : this;\n+\t\t} ).filter( function() {\n+\t\t\tvar type = this.type;\n+\n+\t\t\t\/\/ Use .is( \":disabled\" ) so that fieldset[disabled] works\n+\t\t\treturn this.name && !jQuery( this ).is( \":disabled\" ) &&\n+\t\t\t\trsubmittable.test( this.nodeName ) && !rsubmitterTypes.test( type ) &&\n+\t\t\t\t( this.checked || !rcheckableType.test( type ) );\n+\t\t} ).map( function( _i, elem ) {\n+\t\t\tvar val = jQuery( this ).val();\n+\n+\t\t\tif ( val == null ) {\n+\t\t\t\treturn null;\n+\t\t\t}\n+\n+\t\t\tif ( Array.isArray( val ) ) {\n+\t\t\t\treturn jQuery.map( val, function( val ) {\n+\t\t\t\t\treturn { name: elem.name, value: val.replace( rCRLF, \"\\r\\n\" ) };\n+\t\t\t\t} );\n+\t\t\t}\n+\n+\t\t\treturn { name: elem.name, value: val.replace( rCRLF, \"\\r\\n\" ) };\n+\t\t} ).get();\n+\t}\n+} );\n+\n+\n+var\n+\tr20 = \/%20\/g,\n+\trhash = \/#.*$\/,\n+\trantiCache = \/([?&])_=[^&]*\/,\n+\trheaders = \/^(.*?):[ \\t]*([^\\r\\n]*)$\/mg,\n+\n+\t\/\/ trac-7653, trac-8125, trac-8152: local protocol detection\n+\trlocalProtocol = \/^(?:about|app|app-storage|.+-extension|file|res|widget):$\/,\n+\trnoContent = \/^(?:GET|HEAD)$\/,\n+\trprotocol = \/^\\\/\\\/\/,\n+\n+\t\/* Prefilters\n+\t * 1) They are useful to introduce custom dataTypes (see ajax\/jsonp.js for an example)\n+\t * 2) These are called:\n+\t *    - BEFORE asking for a transport\n+\t *    - AFTER param serialization (s.data is a string if s.processData is true)\n+\t * 3) key is the dataType\n+\t * 4) the catchall symbol \"*\" can be used\n+\t * 5) execution will start with transport dataType and THEN continue down to \"*\" if needed\n+\t *\/\n+\tprefilters = {},\n+\n+\t\/* Transports bindings\n+\t * 1) key is the dataType\n+\t * 2) the catchall symbol \"*\" can be used\n+\t * 3) selection will start with transport dataType and THEN go to \"*\" if needed\n+\t *\/\n+\ttransports = {},\n+\n+\t\/\/ Avoid comment-prolog char sequence (trac-10098); must appease lint and evade compression\n+\tallTypes = \"*\/\".concat( \"*\" ),\n+\n+\t\/\/ Anchor tag for parsing the document origin\n+\toriginAnchor = document.createElement( \"a\" );\n+\n+originAnchor.href = location.href;\n+\n+\/\/ Base \"constructor\" for jQuery.ajaxPrefilter and jQuery.ajaxTransport\n+function addToPrefiltersOrTransports( structure ) {\n+\n+\t\/\/ dataTypeExpression is optional and defaults to \"*\"\n+\treturn function( dataTypeExpression, func ) {\n+\n+\t\tif ( typeof dataTypeExpression !== \"string\" ) {\n+\t\t\tfunc = dataTypeExpression;\n+\t\t\tdataTypeExpression = \"*\";\n+\t\t}\n+\n+\t\tvar dataType,\n+\t\t\ti = 0,\n+\t\t\tdataTypes = dataTypeExpression.toLowerCase().match( rnothtmlwhite ) || [];\n+\n+\t\tif ( isFunction( func ) ) {\n+\n+\t\t\t\/\/ For each dataType in the dataTypeExpression\n+\t\t\twhile ( ( dataType = dataTypes[ i++ ] ) ) {\n+\n+\t\t\t\t\/\/ Prepend if requested\n+\t\t\t\tif ( dataType[ 0 ] === \"+\" ) {\n+\t\t\t\t\tdataType = dataType.slice( 1 ) || \"*\";\n+\t\t\t\t\t( structure[ dataType ] = structure[ dataType ] || [] ).unshift( func );\n+\n+\t\t\t\t\/\/ Otherwise append\n+\t\t\t\t} else {\n+\t\t\t\t\t( structure[ dataType ] = structure[ dataType ] || [] ).push( func );\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\t};\n+}\n+\n+\/\/ Base inspection function for prefilters and transports\n+function inspectPrefiltersOrTransports( structure, options, originalOptions, jqXHR ) {\n+\n+\tvar inspected = {},\n+\t\tseekingTransport = ( structure === transports );\n+\n+\tfunction inspect( dataType ) {\n+\t\tvar selected;\n+\t\tinspected[ dataType ] = true;\n+\t\tjQuery.each( structure[ dataType ] || [], function( _, prefilterOrFactory ) {\n+\t\t\tvar dataTypeOrTransport = prefilterOrFactory( options, originalOptions, jqXHR );\n+\t\t\tif ( typeof dataTypeOrTransport === \"string\" &&\n+\t\t\t\t!seekingTransport && !inspected[ dataTypeOrTransport ] ) {\n+\n+\t\t\t\toptions.dataTypes.unshift( dataTypeOrTransport );\n+\t\t\t\tinspect( dataTypeOrTransport );\n+\t\t\t\treturn false;\n+\t\t\t} else if ( seekingTransport ) {\n+\t\t\t\treturn !( selected = dataTypeOrTransport );\n+\t\t\t}\n+\t\t} );\n+\t\treturn selected;\n+\t}\n+\n+\treturn inspect( options.dataTypes[ 0 ] ) || !inspected[ \"*\" ] && inspect( \"*\" );\n+}\n+\n+\/\/ A special extend for ajax options\n+\/\/ that takes \"flat\" options (not to be deep extended)\n+\/\/ Fixes trac-9887\n+function ajaxExtend( target, src ) {\n+\tvar key, deep,\n+\t\tflatOptions = jQuery.ajaxSettings.flatOptions || {};\n+\n+\tfor ( key in src ) {\n+\t\tif ( src[ key ] !== undefined ) {\n+\t\t\t( flatOptions[ key ] ? target : ( deep || ( deep = {} ) ) )[ key ] = src[ key ];\n+\t\t}\n+\t}\n+\tif ( deep ) {\n+\t\tjQuery.extend( true, target, deep );\n+\t}\n+\n+\treturn target;\n+}\n+\n+\/* Handles responses to an ajax request:\n+ * - finds the right dataType (mediates between content-type and expected dataType)\n+ * - returns the corresponding response\n+ *\/\n+function ajaxHandleResponses( s, jqXHR, responses ) {\n+\n+\tvar ct, type, finalDataType, firstDataType,\n+\t\tcontents = s.contents,\n+\t\tdataTypes = s.dataTypes;\n+\n+\t\/\/ Remove auto dataType and get content-type in the process\n+\twhile ( dataTypes[ 0 ] === \"*\" ) {\n+\t\tdataTypes.shift();\n+\t\tif ( ct === undefined ) {\n+\t\t\tct = s.mimeType || jqXHR.getResponseHeader( \"Content-Type\" );\n+\t\t}\n+\t}\n+\n+\t\/\/ Check if we're dealing with a known content-type\n+\tif ( ct ) {\n+\t\tfor ( type in contents ) {\n+\t\t\tif ( contents[ type ] && contents[ type ].test( ct ) ) {\n+\t\t\t\tdataTypes.unshift( type );\n+\t\t\t\tbreak;\n+\t\t\t}\n+\t\t}\n+\t}\n+\n+\t\/\/ Check to see if we have a response for the expected dataType\n+\tif ( dataTypes[ 0 ] in responses ) {\n+\t\tfinalDataType = dataTypes[ 0 ];\n+\t} else {\n+\n+\t\t\/\/ Try convertible dataTypes\n+\t\tfor ( type in responses ) {\n+\t\t\tif ( !dataTypes[ 0 ] || s.converters[ type + \" \" + dataTypes[ 0 ] ] ) {\n+\t\t\t\tfinalDataType = type;\n+\t\t\t\tbreak;\n+\t\t\t}\n+\t\t\tif ( !firstDataType ) {\n+\t\t\t\tfirstDataType = type;\n+\t\t\t}\n+\t\t}\n+\n+\t\t\/\/ Or just use first one\n+\t\tfinalDataType = finalDataType || firstDataType;\n+\t}\n+\n+\t\/\/ If we found a dataType\n+\t\/\/ We add the dataType to the list if needed\n+\t\/\/ and return the corresponding response\n+\tif ( finalDataType ) {\n+\t\tif ( finalDataType !== dataTypes[ 0 ] ) {\n+\t\t\tdataTypes.unshift( finalDataType );\n+\t\t}\n+\t\treturn responses[ finalDataType ];\n+\t}\n+}\n+\n+\/* Chain conversions given the request and the original response\n+ * Also sets the responseXXX fields on the jqXHR instance\n+ *\/\n+function ajaxConvert( s, response, jqXHR, isSuccess ) {\n+\tvar conv2, current, conv, tmp, prev,\n+\t\tconverters = {},\n+\n+\t\t\/\/ Work with a copy of dataTypes in case we need to modify it for conversion\n+\t\tdataTypes = s.dataTypes.slice();\n+\n+\t\/\/ Create converters map with lowercased keys\n+\tif ( dataTypes[ 1 ] ) {\n+\t\tfor ( conv in s.converters ) {\n+\t\t\tconverters[ conv.toLowerCase() ] = s.converters[ conv ];\n+\t\t}\n+\t}\n+\n+\tcurrent = dataTypes.shift();\n+\n+\t\/\/ Convert to each sequential dataType\n+\twhile ( current ) {\n+\n+\t\tif ( s.responseFields[ current ] ) {\n+\t\t\tjqXHR[ s.responseFields[ current ] ] = response;\n+\t\t}\n+\n+\t\t\/\/ Apply the dataFilter if provided\n+\t\tif ( !prev && isSuccess && s.dataFilter ) {\n+\t\t\tresponse = s.dataFilter( response, s.dataType );\n+\t\t}\n+\n+\t\tprev = current;\n+\t\tcurrent = dataTypes.shift();\n+\n+\t\tif ( current ) {\n+\n+\t\t\t\/\/ There's only work to do if current dataType is non-auto\n+\t\t\tif ( current === \"*\" ) {\n+\n+\t\t\t\tcurrent = prev;\n+\n+\t\t\t\/\/ Convert response if prev dataType is non-auto and differs from current\n+\t\t\t} else if ( prev !== \"*\" && prev !== current ) {\n+\n+\t\t\t\t\/\/ Seek a direct converter\n+\t\t\t\tconv = converters[ prev + \" \" + current ] || converters[ \"* \" + current ];\n+\n+\t\t\t\t\/\/ If none found, seek a pair\n+\t\t\t\tif ( !conv ) {\n+\t\t\t\t\tfor ( conv2 in converters ) {\n+\n+\t\t\t\t\t\t\/\/ If conv2 outputs current\n+\t\t\t\t\t\ttmp = conv2.split( \" \" );\n+\t\t\t\t\t\tif ( tmp[ 1 ] === current ) {\n+\n+\t\t\t\t\t\t\t\/\/ If prev can be converted to accepted input\n+\t\t\t\t\t\t\tconv = converters[ prev + \" \" + tmp[ 0 ] ] ||\n+\t\t\t\t\t\t\t\tconverters[ \"* \" + tmp[ 0 ] ];\n+\t\t\t\t\t\t\tif ( conv ) {\n+\n+\t\t\t\t\t\t\t\t\/\/ Condense equivalence converters\n+\t\t\t\t\t\t\t\tif ( conv === true ) {\n+\t\t\t\t\t\t\t\t\tconv = converters[ conv2 ];\n+\n+\t\t\t\t\t\t\t\t\/\/ Otherwise, insert the intermediate dataType\n+\t\t\t\t\t\t\t\t} else if ( converters[ conv2 ] !== true ) {\n+\t\t\t\t\t\t\t\t\tcurrent = tmp[ 0 ];\n+\t\t\t\t\t\t\t\t\tdataTypes.unshift( tmp[ 1 ] );\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\tbreak;\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\n+\t\t\t\t\/\/ Apply converter (if not an equivalence)\n+\t\t\t\tif ( conv !== true ) {\n+\n+\t\t\t\t\t\/\/ Unless errors are allowed to bubble, catch and return them\n+\t\t\t\t\tif ( conv && s.throws ) {\n+\t\t\t\t\t\tresponse = conv( response );\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\ttry {\n+\t\t\t\t\t\t\tresponse = conv( response );\n+\t\t\t\t\t\t} catch ( e ) {\n+\t\t\t\t\t\t\treturn {\n+\t\t\t\t\t\t\t\tstate: \"parsererror\",\n+\t\t\t\t\t\t\t\terror: conv ? e : \"No conversion from \" + prev + \" to \" + current\n+\t\t\t\t\t\t\t};\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\t}\n+\n+\treturn { state: \"success\", data: response };\n+}\n+\n+jQuery.extend( {\n+\n+\t\/\/ Counter for holding the number of active queries\n+\tactive: 0,\n+\n+\t\/\/ Last-Modified header cache for next request\n+\tlastModified: {},\n+\tetag: {},\n+\n+\tajaxSettings: {\n+\t\turl: location.href,\n+\t\ttype: \"GET\",\n+\t\tisLocal: rlocalProtocol.test( location.protocol ),\n+\t\tglobal: true,\n+\t\tprocessData: true,\n+\t\tasync: true,\n+\t\tcontentType: \"application\/x-www-form-urlencoded; charset=UTF-8\",\n+\n+\t\t\/*\n+\t\ttimeout: 0,\n+\t\tdata: null,\n+\t\tdataType: null,\n+\t\tusername: null,\n+\t\tpassword: null,\n+\t\tcache: null,\n+\t\tthrows: false,\n+\t\ttraditional: false,\n+\t\theaders: {},\n+\t\t*\/\n+\n+\t\taccepts: {\n+\t\t\t\"*\": allTypes,\n+\t\t\ttext: \"text\/plain\",\n+\t\t\thtml: \"text\/html\",\n+\t\t\txml: \"application\/xml, text\/xml\",\n+\t\t\tjson: \"application\/json, text\/javascript\"\n+\t\t},\n+\n+\t\tcontents: {\n+\t\t\txml: \/\\bxml\\b\/,\n+\t\t\thtml: \/\\bhtml\/,\n+\t\t\tjson: \/\\bjson\\b\/\n+\t\t},\n+\n+\t\tresponseFields: {\n+\t\t\txml: \"responseXML\",\n+\t\t\ttext: \"responseText\",\n+\t\t\tjson: \"responseJSON\"\n+\t\t},\n+\n+\t\t\/\/ Data converters\n+\t\t\/\/ Keys separate source (or catchall \"*\") and destination types with a single space\n+\t\tconverters: {\n+\n+\t\t\t\/\/ Convert anything to text\n+\t\t\t\"* text\": String,\n+\n+\t\t\t\/\/ Text to html (true = no transformation)\n+\t\t\t\"text html\": true,\n+\n+\t\t\t\/\/ Evaluate text as a json expression\n+\t\t\t\"text json\": JSON.parse,\n+\n+\t\t\t\/\/ Parse text as xml\n+\t\t\t\"text xml\": jQuery.parseXML\n+\t\t},\n+\n+\t\t\/\/ For options that shouldn't be deep extended:\n+\t\t\/\/ you can add your own custom options here if\n+\t\t\/\/ and when you create one that shouldn't be\n+\t\t\/\/ deep extended (see ajaxExtend)\n+\t\tflatOptions: {\n+\t\t\turl: true,\n+\t\t\tcontext: true\n+\t\t}\n+\t},\n+\n+\t\/\/ Creates a full fledged settings object into target\n+\t\/\/ with both ajaxSettings and settings fields.\n+\t\/\/ If target is omitted, writes into ajaxSettings.\n+\tajaxSetup: function( target, settings ) {\n+\t\treturn settings ?\n+\n+\t\t\t\/\/ Building a settings object\n+\t\t\tajaxExtend( ajaxExtend( target, jQuery.ajaxSettings ), settings ) :\n+\n+\t\t\t\/\/ Extending ajaxSettings\n+\t\t\tajaxExtend( jQuery.ajaxSettings, target );\n+\t},\n+\n+\tajaxPrefilter: addToPrefiltersOrTransports( prefilters ),\n+\tajaxTransport: addToPrefiltersOrTransports( transports ),\n+\n+\t\/\/ Main method\n+\tajax: function( url, options ) {\n+\n+\t\t\/\/ If url is an object, simulate pre-1.5 signature\n+\t\tif ( typeof url === \"object\" ) {\n+\t\t\toptions = url;\n+\t\t\turl = undefined;\n+\t\t}\n+\n+\t\t\/\/ Force options to be an object\n+\t\toptions = options || {};\n+\n+\t\tvar transport,\n+\n+\t\t\t\/\/ URL without anti-cache param\n+\t\t\tcacheURL,\n+\n+\t\t\t\/\/ Response headers\n+\t\t\tresponseHeadersString,\n+\t\t\tresponseHeaders,\n+\n+\t\t\t\/\/ timeout handle\n+\t\t\ttimeoutTimer,\n+\n+\t\t\t\/\/ Url cleanup var\n+\t\t\turlAnchor,\n+\n+\t\t\t\/\/ Request state (becomes false upon send and true upon completion)\n+\t\t\tcompleted,\n+\n+\t\t\t\/\/ To know if global events are to be dispatched\n+\t\t\tfireGlobals,\n+\n+\t\t\t\/\/ Loop variable\n+\t\t\ti,\n+\n+\t\t\t\/\/ uncached part of the url\n+\t\t\tuncached,\n+\n+\t\t\t\/\/ Create the final options object\n+\t\t\ts = jQuery.ajaxSetup( {}, options ),\n+\n+\t\t\t\/\/ Callbacks context\n+\t\t\tcallbackContext = s.context || s,\n+\n+\t\t\t\/\/ Context for global events is callbackContext if it is a DOM node or jQuery collection\n+\t\t\tglobalEventContext = s.context &&\n+\t\t\t\t( callbackContext.nodeType || callbackContext.jquery ) ?\n+\t\t\t\tjQuery( callbackContext ) :\n+\t\t\t\tjQuery.event,\n+\n+\t\t\t\/\/ Deferreds\n+\t\t\tdeferred = jQuery.Deferred(),\n+\t\t\tcompleteDeferred = jQuery.Callbacks( \"once memory\" ),\n+\n+\t\t\t\/\/ Status-dependent callbacks\n+\t\t\tstatusCode = s.statusCode || {},\n+\n+\t\t\t\/\/ Headers (they are sent all at once)\n+\t\t\trequestHeaders = {},\n+\t\t\trequestHeadersNames = {},\n+\n+\t\t\t\/\/ Default abort message\n+\t\t\tstrAbort = \"canceled\",\n+\n+\t\t\t\/\/ Fake xhr\n+\t\t\tjqXHR = {\n+\t\t\t\treadyState: 0,\n+\n+\t\t\t\t\/\/ Builds headers hashtable if needed\n+\t\t\t\tgetResponseHeader: function( key ) {\n+\t\t\t\t\tvar match;\n+\t\t\t\t\tif ( completed ) {\n+\t\t\t\t\t\tif ( !responseHeaders ) {\n+\t\t\t\t\t\t\tresponseHeaders = {};\n+\t\t\t\t\t\t\twhile ( ( match = rheaders.exec( responseHeadersString ) ) ) {\n+\t\t\t\t\t\t\t\tresponseHeaders[ match[ 1 ].toLowerCase() + \" \" ] =\n+\t\t\t\t\t\t\t\t\t( responseHeaders[ match[ 1 ].toLowerCase() + \" \" ] || [] )\n+\t\t\t\t\t\t\t\t\t\t.concat( match[ 2 ] );\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tmatch = responseHeaders[ key.toLowerCase() + \" \" ];\n+\t\t\t\t\t}\n+\t\t\t\t\treturn match == null ? null : match.join( \", \" );\n+\t\t\t\t},\n+\n+\t\t\t\t\/\/ Raw string\n+\t\t\t\tgetAllResponseHeaders: function() {\n+\t\t\t\t\treturn completed ? responseHeadersString : null;\n+\t\t\t\t},\n+\n+\t\t\t\t\/\/ Caches the header\n+\t\t\t\tsetRequestHeader: function( name, value ) {\n+\t\t\t\t\tif ( completed == null ) {\n+\t\t\t\t\t\tname = requestHeadersNames[ name.toLowerCase() ] =\n+\t\t\t\t\t\t\trequestHeadersNames[ name.toLowerCase() ] || name;\n+\t\t\t\t\t\trequestHeaders[ name ] = value;\n+\t\t\t\t\t}\n+\t\t\t\t\treturn this;\n+\t\t\t\t},\n+\n+\t\t\t\t\/\/ Overrides response content-type header\n+\t\t\t\toverrideMimeType: function( type ) {\n+\t\t\t\t\tif ( completed == null ) {\n+\t\t\t\t\t\ts.mimeType = type;\n+\t\t\t\t\t}\n+\t\t\t\t\treturn this;\n+\t\t\t\t},\n+\n+\t\t\t\t\/\/ Status-dependent callbacks\n+\t\t\t\tstatusCode: function( map ) {\n+\t\t\t\t\tvar code;\n+\t\t\t\t\tif ( map ) {\n+\t\t\t\t\t\tif ( completed ) {\n+\n+\t\t\t\t\t\t\t\/\/ Execute the appropriate callbacks\n+\t\t\t\t\t\t\tjqXHR.always( map[ jqXHR.status ] );\n+\t\t\t\t\t\t} else {\n+\n+\t\t\t\t\t\t\t\/\/ Lazy-add the new callbacks in a way that preserves old ones\n+\t\t\t\t\t\t\tfor ( code in map ) {\n+\t\t\t\t\t\t\t\tstatusCode[ code ] = [ statusCode[ code ], map[ code ] ];\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t\treturn this;\n+\t\t\t\t},\n+\n+\t\t\t\t\/\/ Cancel the request\n+\t\t\t\tabort: function( statusText ) {\n+\t\t\t\t\tvar finalText = statusText || strAbort;\n+\t\t\t\t\tif ( transport ) {\n+\t\t\t\t\t\ttransport.abort( finalText );\n+\t\t\t\t\t}\n+\t\t\t\t\tdone( 0, finalText );\n+\t\t\t\t\treturn this;\n+\t\t\t\t}\n+\t\t\t};\n+\n+\t\t\/\/ Attach deferreds\n+\t\tdeferred.promise( jqXHR );\n+\n+\t\t\/\/ Add protocol if not provided (prefilters might expect it)\n+\t\t\/\/ Handle falsy url in the settings object (trac-10093: consistency with old signature)\n+\t\t\/\/ We also use the url parameter if available\n+\t\ts.url = ( ( url || s.url || location.href ) + \"\" )\n+\t\t\t.replace( rprotocol, location.protocol + \"\/\/\" );\n+\n+\t\t\/\/ Alias method option to type as per ticket trac-12004\n+\t\ts.type = options.method || options.type || s.method || s.type;\n+\n+\t\t\/\/ Extract dataTypes list\n+\t\ts.dataTypes = ( s.dataType || \"*\" ).toLowerCase().match( rnothtmlwhite ) || [ \"\" ];\n+\n+\t\t\/\/ A cross-domain request is in order when the origin doesn't match the current origin.\n+\t\tif ( s.crossDomain == null ) {\n+\t\t\turlAnchor = document.createElement( \"a\" );\n+\n+\t\t\t\/\/ Support: IE <=8 - 11, Edge 12 - 15\n+\t\t\t\/\/ IE throws exception on accessing the href property if url is malformed,\n+\t\t\t\/\/ e.g. http:\/\/example.com:80x\/\n+\t\t\ttry {\n+\t\t\t\turlAnchor.href = s.url;\n+\n+\t\t\t\t\/\/ Support: IE <=8 - 11 only\n+\t\t\t\t\/\/ Anchor's host property isn't correctly set when s.url is relative\n+\t\t\t\turlAnchor.href = urlAnchor.href;\n+\t\t\t\ts.crossDomain = originAnchor.protocol + \"\/\/\" + originAnchor.host !==\n+\t\t\t\t\turlAnchor.protocol + \"\/\/\" + urlAnchor.host;\n+\t\t\t} catch ( e ) {\n+\n+\t\t\t\t\/\/ If there is an error parsing the URL, assume it is crossDomain,\n+\t\t\t\t\/\/ it can be rejected by the transport if it is invalid\n+\t\t\t\ts.crossDomain = true;\n+\t\t\t}\n+\t\t}\n+\n+\t\t\/\/ Convert data if not already a string\n+\t\tif ( s.data && s.processData && typeof s.data !== \"string\" ) {\n+\t\t\ts.data = jQuery.param( s.data, s.traditional );\n+\t\t}\n+\n+\t\t\/\/ Apply prefilters\n+\t\tinspectPrefiltersOrTransports( prefilters, s, options, jqXHR );\n+\n+\t\t\/\/ If request was aborted inside a prefilter, stop there\n+\t\tif ( completed ) {\n+\t\t\treturn jqXHR;\n+\t\t}\n+\n+\t\t\/\/ We can fire global events as of now if asked to\n+\t\t\/\/ Don't fire events if jQuery.event is undefined in an AMD-usage scenario (trac-15118)\n+\t\tfireGlobals = jQuery.event && s.global;\n+\n+\t\t\/\/ Watch for a new set of requests\n+\t\tif ( fireGlobals && jQuery.active++ === 0 ) {\n+\t\t\tjQuery.event.trigger( \"ajaxStart\" );\n+\t\t}\n+\n+\t\t\/\/ Uppercase the type\n+\t\ts.type = s.type.toUpperCase();\n+\n+\t\t\/\/ Determine if request has content\n+\t\ts.hasContent = !rnoContent.test( s.type );\n+\n+\t\t\/\/ Save the URL in case we're toying with the If-Modified-Since\n+\t\t\/\/ and\/or If-None-Match header later on\n+\t\t\/\/ Remove hash to simplify url manipulation\n+\t\tcacheURL = s.url.replace( rhash, \"\" );\n+\n+\t\t\/\/ More options handling for requests with no content\n+\t\tif ( !s.hasContent ) {\n+\n+\t\t\t\/\/ Remember the hash so we can put it back\n+\t\t\tuncached = s.url.slice( cacheURL.length );\n+\n+\t\t\t\/\/ If data is available and should be processed, append data to url\n+\t\t\tif ( s.data && ( s.processData || typeof s.data === \"string\" ) ) {\n+\t\t\t\tcacheURL += ( rquery.test( cacheURL ) ? \"&\" : \"?\" ) + s.data;\n+\n+\t\t\t\t\/\/ trac-9682: remove data so that it's not used in an eventual retry\n+\t\t\t\tdelete s.data;\n+\t\t\t}\n+\n+\t\t\t\/\/ Add or update anti-cache param if needed\n+\t\t\tif ( s.cache === false ) {\n+\t\t\t\tcacheURL = cacheURL.replace( rantiCache, \"$1\" );\n+\t\t\t\tuncached = ( rquery.test( cacheURL ) ? \"&\" : \"?\" ) + \"_=\" + ( nonce.guid++ ) +\n+\t\t\t\t\tuncached;\n+\t\t\t}\n+\n+\t\t\t\/\/ Put hash and anti-cache on the URL that will be requested (gh-1732)\n+\t\t\ts.url = cacheURL + uncached;\n+\n+\t\t\/\/ Change '%20' to '+' if this is encoded form body content (gh-2658)\n+\t\t} else if ( s.data && s.processData &&\n+\t\t\t( s.contentType || \"\" ).indexOf( \"application\/x-www-form-urlencoded\" ) === 0 ) {\n+\t\t\ts.data = s.data.replace( r20, \"+\" );\n+\t\t}\n+\n+\t\t\/\/ Set the If-Modified-Since and\/or If-None-Match header, if in ifModified mode.\n+\t\tif ( s.ifModified ) {\n+\t\t\tif ( jQuery.lastModified[ cacheURL ] ) {\n+\t\t\t\tjqXHR.setRequestHeader( \"If-Modified-Since\", jQuery.lastModified[ cacheURL ] );\n+\t\t\t}\n+\t\t\tif ( jQuery.etag[ cacheURL ] ) {\n+\t\t\t\tjqXHR.setRequestHeader( \"If-None-Match\", jQuery.etag[ cacheURL ] );\n+\t\t\t}\n+\t\t}\n+\n+\t\t\/\/ Set the correct header, if data is being sent\n+\t\tif ( s.data && s.hasContent && s.contentType !== false || options.contentType ) {\n+\t\t\tjqXHR.setRequestHeader( \"Content-Type\", s.contentType );\n+\t\t}\n+\n+\t\t\/\/ Set the Accepts header for the server, depending on the dataType\n+\t\tjqXHR.setRequestHeader(\n+\t\t\t\"Accept\",\n+\t\t\ts.dataTypes[ 0 ] && s.accepts[ s.dataTypes[ 0 ] ] ?\n+\t\t\t\ts.accepts[ s.dataTypes[ 0 ] ] +\n+\t\t\t\t\t( s.dataTypes[ 0 ] !== \"*\" ? \", \" + allTypes + \"; q=0.01\" : \"\" ) :\n+\t\t\t\ts.accepts[ \"*\" ]\n+\t\t);\n+\n+\t\t\/\/ Check for headers option\n+\t\tfor ( i in s.headers ) {\n+\t\t\tjqXHR.setRequestHeader( i, s.headers[ i ] );\n+\t\t}\n+\n+\t\t\/\/ Allow custom headers\/mimetypes and early abort\n+\t\tif ( s.beforeSend &&\n+\t\t\t( s.beforeSend.call( callbackContext, jqXHR, s ) === false || completed ) ) {\n+\n+\t\t\t\/\/ Abort if not done already and return\n+\t\t\treturn jqXHR.abort();\n+\t\t}\n+\n+\t\t\/\/ Aborting is no longer a cancellation\n+\t\tstrAbort = \"abort\";\n+\n+\t\t\/\/ Install callbacks on deferreds\n+\t\tcompleteDeferred.add( s.complete );\n+\t\tjqXHR.done( s.success );\n+\t\tjqXHR.fail( s.error );\n+\n+\t\t\/\/ Get transport\n+\t\ttransport = inspectPrefiltersOrTransports( transports, s, options, jqXHR );\n+\n+\t\t\/\/ If no transport, we auto-abort\n+\t\tif ( !transport ) {\n+\t\t\tdone( -1, \"No Transport\" );\n+\t\t} else {\n+\t\t\tjqXHR.readyState = 1;\n+\n+\t\t\t\/\/ Send global event\n+\t\t\tif ( fireGlobals ) {\n+\t\t\t\tglobalEventContext.trigger( \"ajaxSend\", [ jqXHR, s ] );\n+\t\t\t}\n+\n+\t\t\t\/\/ If request was aborted inside ajaxSend, stop there\n+\t\t\tif ( completed ) {\n+\t\t\t\treturn jqXHR;\n+\t\t\t}\n+\n+\t\t\t\/\/ Timeout\n+\t\t\tif ( s.async && s.timeout > 0 ) {\n+\t\t\t\ttimeoutTimer = window.setTimeout( function() {\n+\t\t\t\t\tjqXHR.abort( \"timeout\" );\n+\t\t\t\t}, s.timeout );\n+\t\t\t}\n+\n+\t\t\ttry {\n+\t\t\t\tcompleted = false;\n+\t\t\t\ttransport.send( requestHeaders, done );\n+\t\t\t} catch ( e ) {\n+\n+\t\t\t\t\/\/ Rethrow post-completion exceptions\n+\t\t\t\tif ( completed ) {\n+\t\t\t\t\tthrow e;\n+\t\t\t\t}\n+\n+\t\t\t\t\/\/ Propagate others as results\n+\t\t\t\tdone( -1, e );\n+\t\t\t}\n+\t\t}\n+\n+\t\t\/\/ Callback for when everything is done\n+\t\tfunction done( status, nativeStatusText, responses, headers ) {\n+\t\t\tvar isSuccess, success, error, response, modified,\n+\t\t\t\tstatusText = nativeStatusText;\n+\n+\t\t\t\/\/ Ignore repeat invocations\n+\t\t\tif ( completed ) {\n+\t\t\t\treturn;\n+\t\t\t}\n+\n+\t\t\tcompleted = true;\n+\n+\t\t\t\/\/ Clear timeout if it exists\n+\t\t\tif ( timeoutTimer ) {\n+\t\t\t\twindow.clearTimeout( timeoutTimer );\n+\t\t\t}\n+\n+\t\t\t\/\/ Dereference transport for early garbage collection\n+\t\t\t\/\/ (no matter how long the jqXHR object will be used)\n+\t\t\ttransport = undefined;\n+\n+\t\t\t\/\/ Cache response headers\n+\t\t\tresponseHeadersString = headers || \"\";\n+\n+\t\t\t\/\/ Set readyState\n+\t\t\tjqXHR.readyState = status > 0 ? 4 : 0;\n+\n+\t\t\t\/\/ Determine if successful\n+\t\t\tisSuccess = status >= 200 && status < 300 || status === 304;\n+\n+\t\t\t\/\/ Get response data\n+\t\t\tif ( responses ) {\n+\t\t\t\tresponse = ajaxHandleResponses( s, jqXHR, responses );\n+\t\t\t}\n+\n+\t\t\t\/\/ Use a noop converter for missing script but not if jsonp\n+\t\t\tif ( !isSuccess &&\n+\t\t\t\tjQuery.inArray( \"script\", s.dataTypes ) > -1 &&\n+\t\t\t\tjQuery.inArray( \"json\", s.dataTypes ) < 0 ) {\n+\t\t\t\ts.converters[ \"text script\" ] = function() {};\n+\t\t\t}\n+\n+\t\t\t\/\/ Convert no matter what (that way responseXXX fields are always set)\n+\t\t\tresponse = ajaxConvert( s, response, jqXHR, isSuccess );\n+\n+\t\t\t\/\/ If successful, handle type chaining\n+\t\t\tif ( isSuccess ) {\n+\n+\t\t\t\t\/\/ Set the If-Modified-Since and\/or If-None-Match header, if in ifModified mode.\n+\t\t\t\tif ( s.ifModified ) {\n+\t\t\t\t\tmodified = jqXHR.getResponseHeader( \"Last-Modified\" );\n+\t\t\t\t\tif ( modified ) {\n+\t\t\t\t\t\tjQuery.lastModified[ cacheURL ] = modified;\n+\t\t\t\t\t}\n+\t\t\t\t\tmodified = jqXHR.getResponseHeader( \"etag\" );\n+\t\t\t\t\tif ( modified ) {\n+\t\t\t\t\t\tjQuery.etag[ cacheURL ] = modified;\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\n+\t\t\t\t\/\/ if no content\n+\t\t\t\tif ( status === 204 || s.type === \"HEAD\" ) {\n+\t\t\t\t\tstatusText = \"nocontent\";\n+\n+\t\t\t\t\/\/ if not modified\n+\t\t\t\t} else if ( status === 304 ) {\n+\t\t\t\t\tstatusText = \"notmodified\";\n+\n+\t\t\t\t\/\/ If we have data, let's convert it\n+\t\t\t\t} else {\n+\t\t\t\t\tstatusText = response.state;\n+\t\t\t\t\tsuccess = response.data;\n+\t\t\t\t\terror = response.error;\n+\t\t\t\t\tisSuccess = !error;\n+\t\t\t\t}\n+\t\t\t} else {\n+\n+\t\t\t\t\/\/ Extract error from statusText and normalize for non-aborts\n+\t\t\t\terror = statusText;\n+\t\t\t\tif ( status || !statusText ) {\n+\t\t\t\t\tstatusText = \"error\";\n+\t\t\t\t\tif ( status < 0 ) {\n+\t\t\t\t\t\tstatus = 0;\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t}\n+\n+\t\t\t\/\/ Set data for the fake xhr object\n+\t\t\tjqXHR.status = status;\n+\t\t\tjqXHR.statusText = ( nativeStatusText || statusText ) + \"\";\n+\n+\t\t\t\/\/ Success\/Error\n+\t\t\tif ( isSuccess ) {\n+\t\t\t\tdeferred.resolveWith( callbackContext, [ success, statusText, jqXHR ] );\n+\t\t\t} else {\n+\t\t\t\tdeferred.rejectWith( callbackContext, [ jqXHR, statusText, error ] );\n+\t\t\t}\n+\n+\t\t\t\/\/ Status-dependent callbacks\n+\t\t\tjqXHR.statusCode( statusCode );\n+\t\t\tstatusCode = undefined;\n+\n+\t\t\tif ( fireGlobals ) {\n+\t\t\t\tglobalEventContext.trigger( isSuccess ? \"ajaxSuccess\" : \"ajaxError\",\n+\t\t\t\t\t[ jqXHR, s, isSuccess ? success : error ] );\n+\t\t\t}\n+\n+\t\t\t\/\/ Complete\n+\t\t\tcompleteDeferred.fireWith( callbackContext, [ jqXHR, statusText ] );\n+\n+\t\t\tif ( fireGlobals ) {\n+\t\t\t\tglobalEventContext.trigger( \"ajaxComplete\", [ jqXHR, s ] );\n+\n+\t\t\t\t\/\/ Handle the global AJAX counter\n+\t\t\t\tif ( !( --jQuery.active ) ) {\n+\t\t\t\t\tjQuery.event.trigger( \"ajaxStop\" );\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\n+\t\treturn jqXHR;\n+\t},\n+\n+\tgetJSON: function( url, data, callback ) {\n+\t\treturn jQuery.get( url, data, callback, \"json\" );\n+\t},\n+\n+\tgetScript: function( url, callback ) {\n+\t\treturn jQuery.get( url, undefined, callback, \"script\" );\n+\t}\n+} );\n+\n+jQuery.each( [ \"get\", \"post\" ], function( _i, method ) {\n+\tjQuery[ method ] = function( url, data, callback, type ) {\n+\n+\t\t\/\/ Shift arguments if data argument was omitted\n+\t\tif ( isFunction( data ) ) {\n+\t\t\ttype = type || callback;\n+\t\t\tcallback = data;\n+\t\t\tdata = undefined;\n+\t\t}\n+\n+\t\t\/\/ The url can be an options object (which then must have .url)\n+\t\treturn jQuery.ajax( jQuery.extend( {\n+\t\t\turl: url,\n+\t\t\ttype: method,\n+\t\t\tdataType: type,\n+\t\t\tdata: data,\n+\t\t\tsuccess: callback\n+\t\t}, jQuery.isPlainObject( url ) && url ) );\n+\t};\n+} );\n+\n+jQuery.ajaxPrefilter( function( s ) {\n+\tvar i;\n+\tfor ( i in s.headers ) {\n+\t\tif ( i.toLowerCase() === \"content-type\" ) {\n+\t\t\ts.contentType = s.headers[ i ] || \"\";\n+\t\t}\n+\t}\n+} );\n+\n+\n+jQuery._evalUrl = function( url, options, doc ) {\n+\treturn jQuery.ajax( {\n+\t\turl: url,\n+\n+\t\t\/\/ Make this explicit, since user can override this through ajaxSetup (trac-11264)\n+\t\ttype: \"GET\",\n+\t\tdataType: \"script\",\n+\t\tcache: true,\n+\t\tasync: false,\n+\t\tglobal: false,\n+\n+\t\t\/\/ Only evaluate the response if it is successful (gh-4126)\n+\t\t\/\/ dataFilter is not invoked for failure responses, so using it instead\n+\t\t\/\/ of the default converter is kludgy but it works.\n+\t\tconverters: {\n+\t\t\t\"text script\": function() {}\n+\t\t},\n+\t\tdataFilter: function( response ) {\n+\t\t\tjQuery.globalEval( response, options, doc );\n+\t\t}\n+\t} );\n+};\n+\n+\n+jQuery.fn.extend( {\n+\twrapAll: function( html ) {\n+\t\tvar wrap;\n+\n+\t\tif ( this[ 0 ] ) {\n+\t\t\tif ( isFunction( html ) ) {\n+\t\t\t\thtml = html.call( this[ 0 ] );\n+\t\t\t}\n+\n+\t\t\t\/\/ The elements to wrap the target around\n+\t\t\twrap = jQuery( html, this[ 0 ].ownerDocument ).eq( 0 ).clone( true );\n+\n+\t\t\tif ( this[ 0 ].parentNode ) {\n+\t\t\t\twrap.insertBefore( this[ 0 ] );\n+\t\t\t}\n+\n+\t\t\twrap.map( function() {\n+\t\t\t\tvar elem = this;\n+\n+\t\t\t\twhile ( elem.firstElementChild ) {\n+\t\t\t\t\telem = elem.firstElementChild;\n+\t\t\t\t}\n+\n+\t\t\t\treturn elem;\n+\t\t\t} ).append( this );\n+\t\t}\n+\n+\t\treturn this;\n+\t},\n+\n+\twrapInner: function( html ) {\n+\t\tif ( isFunction( html ) ) {\n+\t\t\treturn this.each( function( i ) {\n+\t\t\t\tjQuery( this ).wrapInner( html.call( this, i ) );\n+\t\t\t} );\n+\t\t}\n+\n+\t\treturn this.each( function() {\n+\t\t\tvar self = jQuery( this ),\n+\t\t\t\tcontents = self.contents();\n+\n+\t\t\tif ( contents.length ) {\n+\t\t\t\tcontents.wrapAll( html );\n+\n+\t\t\t} else {\n+\t\t\t\tself.append( html );\n+\t\t\t}\n+\t\t} );\n+\t},\n+\n+\twrap: function( html ) {\n+\t\tvar htmlIsFunction = isFunction( html );\n+\n+\t\treturn this.each( function( i ) {\n+\t\t\tjQuery( this ).wrapAll( htmlIsFunction ? html.call( this, i ) : html );\n+\t\t} );\n+\t},\n+\n+\tunwrap: function( selector ) {\n+\t\tthis.parent( selector ).not( \"body\" ).each( function() {\n+\t\t\tjQuery( this ).replaceWith( this.childNodes );\n+\t\t} );\n+\t\treturn this;\n+\t}\n+} );\n+\n+\n+jQuery.expr.pseudos.hidden = function( elem ) {\n+\treturn !jQuery.expr.pseudos.visible( elem );\n+};\n+jQuery.expr.pseudos.visible = function( elem ) {\n+\treturn !!( elem.offsetWidth || elem.offsetHeight || elem.getClientRects().length );\n+};\n+\n+\n+\n+\n+jQuery.ajaxSettings.xhr = function() {\n+\ttry {\n+\t\treturn new window.XMLHttpRequest();\n+\t} catch ( e ) {}\n+};\n+\n+var xhrSuccessStatus = {\n+\n+\t\t\/\/ File protocol always yields status code 0, assume 200\n+\t\t0: 200,\n+\n+\t\t\/\/ Support: IE <=9 only\n+\t\t\/\/ trac-1450: sometimes IE returns 1223 when it should be 204\n+\t\t1223: 204\n+\t},\n+\txhrSupported = jQuery.ajaxSettings.xhr();\n+\n+support.cors = !!xhrSupported && ( \"withCredentials\" in xhrSupported );\n+support.ajax = xhrSupported = !!xhrSupported;\n+\n+jQuery.ajaxTransport( function( options ) {\n+\tvar callback, errorCallback;\n+\n+\t\/\/ Cross domain only allowed if supported through XMLHttpRequest\n+\tif ( support.cors || xhrSupported && !options.crossDomain ) {\n+\t\treturn {\n+\t\t\tsend: function( headers, complete ) {\n+\t\t\t\tvar i,\n+\t\t\t\t\txhr = options.xhr();\n+\n+\t\t\t\txhr.open(\n+\t\t\t\t\toptions.type,\n+\t\t\t\t\toptions.url,\n+\t\t\t\t\toptions.async,\n+\t\t\t\t\toptions.username,\n+\t\t\t\t\toptions.password\n+\t\t\t\t);\n+\n+\t\t\t\t\/\/ Apply custom fields if provided\n+\t\t\t\tif ( options.xhrFields ) {\n+\t\t\t\t\tfor ( i in options.xhrFields ) {\n+\t\t\t\t\t\txhr[ i ] = options.xhrFields[ i ];\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\n+\t\t\t\t\/\/ Override mime type if needed\n+\t\t\t\tif ( options.mimeType && xhr.overrideMimeType ) {\n+\t\t\t\t\txhr.overrideMimeType( options.mimeType );\n+\t\t\t\t}\n+\n+\t\t\t\t\/\/ X-Requested-With header\n+\t\t\t\t\/\/ For cross-domain requests, seeing as conditions for a preflight are\n+\t\t\t\t\/\/ akin to a jigsaw puzzle, we simply never set it to be sure.\n+\t\t\t\t\/\/ (it can always be set on a per-request basis or even using ajaxSetup)\n+\t\t\t\t\/\/ For same-domain requests, won't change header if already provided.\n+\t\t\t\tif ( !options.crossDomain && !headers[ \"X-Requested-With\" ] ) {\n+\t\t\t\t\theaders[ \"X-Requested-With\" ] = \"XMLHttpRequest\";\n+\t\t\t\t}\n+\n+\t\t\t\t\/\/ Set headers\n+\t\t\t\tfor ( i in headers ) {\n+\t\t\t\t\txhr.setRequestHeader( i, headers[ i ] );\n+\t\t\t\t}\n+\n+\t\t\t\t\/\/ Callback\n+\t\t\t\tcallback = function( type ) {\n+\t\t\t\t\treturn function() {\n+\t\t\t\t\t\tif ( callback ) {\n+\t\t\t\t\t\t\tcallback = errorCallback = xhr.onload =\n+\t\t\t\t\t\t\t\txhr.onerror = xhr.onabort = xhr.ontimeout =\n+\t\t\t\t\t\t\t\t\txhr.onreadystatechange = null;\n+\n+\t\t\t\t\t\t\tif ( type === \"abort\" ) {\n+\t\t\t\t\t\t\t\txhr.abort();\n+\t\t\t\t\t\t\t} else if ( type === \"error\" ) {\n+\n+\t\t\t\t\t\t\t\t\/\/ Support: IE <=9 only\n+\t\t\t\t\t\t\t\t\/\/ On a manual native abort, IE9 throws\n+\t\t\t\t\t\t\t\t\/\/ errors on any property access that is not readyState\n+\t\t\t\t\t\t\t\tif ( typeof xhr.status !== \"number\" ) {\n+\t\t\t\t\t\t\t\t\tcomplete( 0, \"error\" );\n+\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\tcomplete(\n+\n+\t\t\t\t\t\t\t\t\t\t\/\/ File: protocol always yields status 0; see trac-8605, trac-14207\n+\t\t\t\t\t\t\t\t\t\txhr.status,\n+\t\t\t\t\t\t\t\t\t\txhr.statusText\n+\t\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\tcomplete(\n+\t\t\t\t\t\t\t\t\txhrSuccessStatus[ xhr.status ] || xhr.status,\n+\t\t\t\t\t\t\t\t\txhr.statusText,\n+\n+\t\t\t\t\t\t\t\t\t\/\/ Support: IE <=9 only\n+\t\t\t\t\t\t\t\t\t\/\/ IE9 has no XHR2 but throws on binary (trac-11426)\n+\t\t\t\t\t\t\t\t\t\/\/ For XHR2 non-text, let the caller handle it (gh-2498)\n+\t\t\t\t\t\t\t\t\t( xhr.responseType || \"text\" ) !== \"text\"  ||\n+\t\t\t\t\t\t\t\t\ttypeof xhr.responseText !== \"string\" ?\n+\t\t\t\t\t\t\t\t\t\t{ binary: xhr.response } :\n+\t\t\t\t\t\t\t\t\t\t{ text: xhr.responseText },\n+\t\t\t\t\t\t\t\t\txhr.getAllResponseHeaders()\n+\t\t\t\t\t\t\t\t);\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t}\n+\t\t\t\t\t};\n+\t\t\t\t};\n+\n+\t\t\t\t\/\/ Listen to events\n+\t\t\t\txhr.onload = callback();\n+\t\t\t\terrorCallback = xhr.onerror = xhr.ontimeout = callback( \"error\" );\n+\n+\t\t\t\t\/\/ Support: IE 9 only\n+\t\t\t\t\/\/ Use onreadystatechange to replace onabort\n+\t\t\t\t\/\/ to handle uncaught aborts\n+\t\t\t\tif ( xhr.onabort !== undefined ) {\n+\t\t\t\t\txhr.onabort = errorCallback;\n+\t\t\t\t} else {\n+\t\t\t\t\txhr.onreadystatechange = function() {\n+\n+\t\t\t\t\t\t\/\/ Check readyState before timeout as it changes\n+\t\t\t\t\t\tif ( xhr.readyState === 4 ) {\n+\n+\t\t\t\t\t\t\t\/\/ Allow onerror to be called first,\n+\t\t\t\t\t\t\t\/\/ but that will not handle a native abort\n+\t\t\t\t\t\t\t\/\/ Also, save errorCallback to a variable\n+\t\t\t\t\t\t\t\/\/ as xhr.onerror cannot be accessed\n+\t\t\t\t\t\t\twindow.setTimeout( function() {\n+\t\t\t\t\t\t\t\tif ( callback ) {\n+\t\t\t\t\t\t\t\t\terrorCallback();\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t} );\n+\t\t\t\t\t\t}\n+\t\t\t\t\t};\n+\t\t\t\t}\n+\n+\t\t\t\t\/\/ Create the abort callback\n+\t\t\t\tcallback = callback( \"abort\" );\n+\n+\t\t\t\ttry {\n+\n+\t\t\t\t\t\/\/ Do send the request (this may raise an exception)\n+\t\t\t\t\txhr.send( options.hasContent && options.data || null );\n+\t\t\t\t} catch ( e ) {\n+\n+\t\t\t\t\t\/\/ trac-14683: Only rethrow if this hasn't been notified as an error yet\n+\t\t\t\t\tif ( callback ) {\n+\t\t\t\t\t\tthrow e;\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t},\n+\n+\t\t\tabort: function() {\n+\t\t\t\tif ( callback ) {\n+\t\t\t\t\tcallback();\n+\t\t\t\t}\n+\t\t\t}\n+\t\t};\n+\t}\n+} );\n+\n+\n+\n+\n+\/\/ Prevent auto-execution of scripts when no explicit dataType was provided (See gh-2432)\n+jQuery.ajaxPrefilter( function( s ) {\n+\tif ( s.crossDomain ) {\n+\t\ts.contents.script = false;\n+\t}\n+} );\n+\n+\/\/ Install script dataType\n+jQuery.ajaxSetup( {\n+\taccepts: {\n+\t\tscript: \"text\/javascript, application\/javascript, \" +\n+\t\t\t\"application\/ecmascript, application\/x-ecmascript\"\n+\t},\n+\tcontents: {\n+\t\tscript: \/\\b(?:java|ecma)script\\b\/\n+\t},\n+\tconverters: {\n+\t\t\"text script\": function( text ) {\n+\t\t\tjQuery.globalEval( text );\n+\t\t\treturn text;\n+\t\t}\n+\t}\n+} );\n+\n+\/\/ Handle cache's special case and crossDomain\n+jQuery.ajaxPrefilter( \"script\", function( s ) {\n+\tif ( s.cache === undefined ) {\n+\t\ts.cache = false;\n+\t}\n+\tif ( s.crossDomain ) {\n+\t\ts.type = \"GET\";\n+\t}\n+} );\n+\n+\/\/ Bind script tag hack transport\n+jQuery.ajaxTransport( \"script\", function( s ) {\n+\n+\t\/\/ This transport only deals with cross domain or forced-by-attrs requests\n+\tif ( s.crossDomain || s.scriptAttrs ) {\n+\t\tvar script, callback;\n+\t\treturn {\n+\t\t\tsend: function( _, complete ) {\n+\t\t\t\tscript = jQuery( \"<script>\" )\n+\t\t\t\t\t.attr( s.scriptAttrs || {} )\n+\t\t\t\t\t.prop( { charset: s.scriptCharset, src: s.url } )\n+\t\t\t\t\t.on( \"load error\", callback = function( evt ) {\n+\t\t\t\t\t\tscript.remove();\n+\t\t\t\t\t\tcallback = null;\n+\t\t\t\t\t\tif ( evt ) {\n+\t\t\t\t\t\t\tcomplete( evt.type === \"error\" ? 404 : 200, evt.type );\n+\t\t\t\t\t\t}\n+\t\t\t\t\t} );\n+\n+\t\t\t\t\/\/ Use native DOM manipulation to avoid our domManip AJAX trickery\n+\t\t\t\tdocument.head.appendChild( script[ 0 ] );\n+\t\t\t},\n+\t\t\tabort: function() {\n+\t\t\t\tif ( callback ) {\n+\t\t\t\t\tcallback();\n+\t\t\t\t}\n+\t\t\t}\n+\t\t};\n+\t}\n+} );\n+\n+\n+\n+\n+var oldCallbacks = [],\n+\trjsonp = \/(=)\\?(?=&|$)|\\?\\?\/;\n+\n+\/\/ Default jsonp settings\n+jQuery.ajaxSetup( {\n+\tjsonp: \"callback\",\n+\tjsonpCallback: function() {\n+\t\tvar callback = oldCallbacks.pop() || ( jQuery.expando + \"_\" + ( nonce.guid++ ) );\n+\t\tthis[ callback ] = true;\n+\t\treturn callback;\n+\t}\n+} );\n+\n+\/\/ Detect, normalize options and install callbacks for jsonp requests\n+jQuery.ajaxPrefilter( \"json jsonp\", function( s, originalSettings, jqXHR ) {\n+\n+\tvar callbackName, overwritten, responseContainer,\n+\t\tjsonProp = s.jsonp !== false && ( rjsonp.test( s.url ) ?\n+\t\t\t\"url\" :\n+\t\t\ttypeof s.data === \"string\" &&\n+\t\t\t\t( s.contentType || \"\" )\n+\t\t\t\t\t.indexOf( \"application\/x-www-form-urlencoded\" ) === 0 &&\n+\t\t\t\trjsonp.test( s.data ) && \"data\"\n+\t\t);\n+\n+\t\/\/ Handle iff the expected data type is \"jsonp\" or we have a parameter to set\n+\tif ( jsonProp || s.dataTypes[ 0 ] === \"jsonp\" ) {\n+\n+\t\t\/\/ Get callback name, remembering preexisting value associated with it\n+\t\tcallbackName = s.jsonpCallback = isFunction( s.jsonpCallback ) ?\n+\t\t\ts.jsonpCallback() :\n+\t\t\ts.jsonpCallback;\n+\n+\t\t\/\/ Insert callback into url or form data\n+\t\tif ( jsonProp ) {\n+\t\t\ts[ jsonProp ] = s[ jsonProp ].replace( rjsonp, \"$1\" + callbackName );\n+\t\t} else if ( s.jsonp !== false ) {\n+\t\t\ts.url += ( rquery.test( s.url ) ? \"&\" : \"?\" ) + s.jsonp + \"=\" + callbackName;\n+\t\t}\n+\n+\t\t\/\/ Use data converter to retrieve json after script execution\n+\t\ts.converters[ \"script json\" ] = function() {\n+\t\t\tif ( !responseContainer ) {\n+\t\t\t\tjQuery.error( callbackName + \" was not called\" );\n+\t\t\t}\n+\t\t\treturn responseContainer[ 0 ];\n+\t\t};\n+\n+\t\t\/\/ Force json dataType\n+\t\ts.dataTypes[ 0 ] = \"json\";\n+\n+\t\t\/\/ Install callback\n+\t\toverwritten = window[ callbackName ];\n+\t\twindow[ callbackName ] = function() {\n+\t\t\tresponseContainer = arguments;\n+\t\t};\n+\n+\t\t\/\/ Clean-up function (fires after converters)\n+\t\tjqXHR.always( function() {\n+\n+\t\t\t\/\/ If previous value didn't exist - remove it\n+\t\t\tif ( overwritten === undefined ) {\n+\t\t\t\tjQuery( window ).removeProp( callbackName );\n+\n+\t\t\t\/\/ Otherwise restore preexisting value\n+\t\t\t} else {\n+\t\t\t\twindow[ callbackName ] = overwritten;\n+\t\t\t}\n+\n+\t\t\t\/\/ Save back as free\n+\t\t\tif ( s[ callbackName ] ) {\n+\n+\t\t\t\t\/\/ Make sure that re-using the options doesn't screw things around\n+\t\t\t\ts.jsonpCallback = originalSettings.jsonpCallback;\n+\n+\t\t\t\t\/\/ Save the callback name for future use\n+\t\t\t\toldCallbacks.push( callbackName );\n+\t\t\t}\n+\n+\t\t\t\/\/ Call if it was a function and we have a response\n+\t\t\tif ( responseContainer && isFunction( overwritten ) ) {\n+\t\t\t\toverwritten( responseContainer[ 0 ] );\n+\t\t\t}\n+\n+\t\t\tresponseContainer = overwritten = undefined;\n+\t\t} );\n+\n+\t\t\/\/ Delegate to script\n+\t\treturn \"script\";\n+\t}\n+} );\n+\n+\n+\n+\n+\/\/ Support: Safari 8 only\n+\/\/ In Safari 8 documents created via document.implementation.createHTMLDocument\n+\/\/ collapse sibling forms: the second one becomes a child of the first one.\n+\/\/ Because of that, this security measure has to be disabled in Safari 8.\n+\/\/ https:\/\/bugs.webkit.org\/show_bug.cgi?id=137337\n+support.createHTMLDocument = ( function() {\n+\tvar body = document.implementation.createHTMLDocument( \"\" ).body;\n+\tbody.innerHTML = \"<form><\/form><form><\/form>\";\n+\treturn body.childNodes.length === 2;\n+} )();\n+\n+\n+\/\/ Argument \"data\" should be string of html\n+\/\/ context (optional): If specified, the fragment will be created in this context,\n+\/\/ defaults to document\n+\/\/ keepScripts (optional): If true, will include scripts passed in the html string\n+jQuery.parseHTML = function( data, context, keepScripts ) {\n+\tif ( typeof data !== \"string\" ) {\n+\t\treturn [];\n+\t}\n+\tif ( typeof context === \"boolean\" ) {\n+\t\tkeepScripts = context;\n+\t\tcontext = false;\n+\t}\n+\n+\tvar base, parsed, scripts;\n+\n+\tif ( !context ) {\n+\n+\t\t\/\/ Stop scripts or inline event handlers from being executed immediately\n+\t\t\/\/ by using document.implementation\n+\t\tif ( support.createHTMLDocument ) {\n+\t\t\tcontext = document.implementation.createHTMLDocument( \"\" );\n+\n+\t\t\t\/\/ Set the base href for the created document\n+\t\t\t\/\/ so any parsed elements with URLs\n+\t\t\t\/\/ are based on the document's URL (gh-2965)\n+\t\t\tbase = context.createElement( \"base\" );\n+\t\t\tbase.href = document.location.href;\n+\t\t\tcontext.head.appendChild( base );\n+\t\t} else {\n+\t\t\tcontext = document;\n+\t\t}\n+\t}\n+\n+\tparsed = rsingleTag.exec( data );\n+\tscripts = !keepScripts && [];\n+\n+\t\/\/ Single tag\n+\tif ( parsed ) {\n+\t\treturn [ context.createElement( parsed[ 1 ] ) ];\n+\t}\n+\n+\tparsed = buildFragment( [ data ], context, scripts );\n+\n+\tif ( scripts && scripts.length ) {\n+\t\tjQuery( scripts ).remove();\n+\t}\n+\n+\treturn jQuery.merge( [], parsed.childNodes );\n+};\n+\n+\n+\/**\n+ * Load a url into a page\n+ *\/\n+jQuery.fn.load = function( url, params, callback ) {\n+\tvar selector, type, response,\n+\t\tself = this,\n+\t\toff = url.indexOf( \" \" );\n+\n+\tif ( off > -1 ) {\n+\t\tselector = stripAndCollapse( url.slice( off ) );\n+\t\turl = url.slice( 0, off );\n+\t}\n+\n+\t\/\/ If it's a function\n+\tif ( isFunction( params ) ) {\n+\n+\t\t\/\/ We assume that it's the callback\n+\t\tcallback = params;\n+\t\tparams = undefined;\n+\n+\t\/\/ Otherwise, build a param string\n+\t} else if ( params && typeof params === \"object\" ) {\n+\t\ttype = \"POST\";\n+\t}\n+\n+\t\/\/ If we have elements to modify, make the request\n+\tif ( self.length > 0 ) {\n+\t\tjQuery.ajax( {\n+\t\t\turl: url,\n+\n+\t\t\t\/\/ If \"type\" variable is undefined, then \"GET\" method will be used.\n+\t\t\t\/\/ Make value of this field explicit since\n+\t\t\t\/\/ user can override it through ajaxSetup method\n+\t\t\ttype: type || \"GET\",\n+\t\t\tdataType: \"html\",\n+\t\t\tdata: params\n+\t\t} ).done( function( responseText ) {\n+\n+\t\t\t\/\/ Save response for use in complete callback\n+\t\t\tresponse = arguments;\n+\n+\t\t\tself.html( selector ?\n+\n+\t\t\t\t\/\/ If a selector was specified, locate the right elements in a dummy div\n+\t\t\t\t\/\/ Exclude scripts to avoid IE 'Permission Denied' errors\n+\t\t\t\tjQuery( \"<div>\" ).append( jQuery.parseHTML( responseText ) ).find( selector ) :\n+\n+\t\t\t\t\/\/ Otherwise use the full result\n+\t\t\t\tresponseText );\n+\n+\t\t\/\/ If the request succeeds, this function gets \"data\", \"status\", \"jqXHR\"\n+\t\t\/\/ but they are ignored because response was set above.\n+\t\t\/\/ If it fails, this function gets \"jqXHR\", \"status\", \"error\"\n+\t\t} ).always( callback && function( jqXHR, status ) {\n+\t\t\tself.each( function() {\n+\t\t\t\tcallback.apply( this, response || [ jqXHR.responseText, status, jqXHR ] );\n+\t\t\t} );\n+\t\t} );\n+\t}\n+\n+\treturn this;\n+};\n+\n+\n+\n+\n+jQuery.expr.pseudos.animated = function( elem ) {\n+\treturn jQuery.grep( jQuery.timers, function( fn ) {\n+\t\treturn elem === fn.elem;\n+\t} ).length;\n+};\n+\n+\n+\n+\n+jQuery.offset = {\n+\tsetOffset: function( elem, options, i ) {\n+\t\tvar curPosition, curLeft, curCSSTop, curTop, curOffset, curCSSLeft, calculatePosition,\n+\t\t\tposition = jQuery.css( elem, \"position\" ),\n+\t\t\tcurElem = jQuery( elem ),\n+\t\t\tprops = {};\n+\n+\t\t\/\/ Set position first, in-case top\/left are set even on static elem\n+\t\tif ( position === \"static\" ) {\n+\t\t\telem.style.position = \"relative\";\n+\t\t}\n+\n+\t\tcurOffset = curElem.offset();\n+\t\tcurCSSTop = jQuery.css( elem, \"top\" );\n+\t\tcurCSSLeft = jQuery.css( elem, \"left\" );\n+\t\tcalculatePosition = ( position === \"absolute\" || position === \"fixed\" ) &&\n+\t\t\t( curCSSTop + curCSSLeft ).indexOf( \"auto\" ) > -1;\n+\n+\t\t\/\/ Need to be able to calculate position if either\n+\t\t\/\/ top or left is auto and position is either absolute or fixed\n+\t\tif ( calculatePosition ) {\n+\t\t\tcurPosition = curElem.position();\n+\t\t\tcurTop = curPosition.top;\n+\t\t\tcurLeft = curPosition.left;\n+\n+\t\t} else {\n+\t\t\tcurTop = parseFloat( curCSSTop ) || 0;\n+\t\t\tcurLeft = parseFloat( curCSSLeft ) || 0;\n+\t\t}\n+\n+\t\tif ( isFunction( options ) ) {\n+\n+\t\t\t\/\/ Use jQuery.extend here to allow modification of coordinates argument (gh-1848)\n+\t\t\toptions = options.call( elem, i, jQuery.extend( {}, curOffset ) );\n+\t\t}\n+\n+\t\tif ( options.top != null ) {\n+\t\t\tprops.top = ( options.top - curOffset.top ) + curTop;\n+\t\t}\n+\t\tif ( options.left != null ) {\n+\t\t\tprops.left = ( options.left - curOffset.left ) + curLeft;\n+\t\t}\n+\n+\t\tif ( \"using\" in options ) {\n+\t\t\toptions.using.call( elem, props );\n+\n+\t\t} else {\n+\t\t\tcurElem.css( props );\n+\t\t}\n+\t}\n+};\n+\n+jQuery.fn.extend( {\n+\n+\t\/\/ offset() relates an element's border box to the document origin\n+\toffset: function( options ) {\n+\n+\t\t\/\/ Preserve chaining for setter\n+\t\tif ( arguments.length ) {\n+\t\t\treturn options === undefined ?\n+\t\t\t\tthis :\n+\t\t\t\tthis.each( function( i ) {\n+\t\t\t\t\tjQuery.offset.setOffset( this, options, i );\n+\t\t\t\t} );\n+\t\t}\n+\n+\t\tvar rect, win,\n+\t\t\telem = this[ 0 ];\n+\n+\t\tif ( !elem ) {\n+\t\t\treturn;\n+\t\t}\n+\n+\t\t\/\/ Return zeros for disconnected and hidden (display: none) elements (gh-2310)\n+\t\t\/\/ Support: IE <=11 only\n+\t\t\/\/ Running getBoundingClientRect on a\n+\t\t\/\/ disconnected node in IE throws an error\n+\t\tif ( !elem.getClientRects().length ) {\n+\t\t\treturn { top: 0, left: 0 };\n+\t\t}\n+\n+\t\t\/\/ Get document-relative position by adding viewport scroll to viewport-relative gBCR\n+\t\trect = elem.getBoundingClientRect();\n+\t\twin = elem.ownerDocument.defaultView;\n+\t\treturn {\n+\t\t\ttop: rect.top + win.pageYOffset,\n+\t\t\tleft: rect.left + win.pageXOffset\n+\t\t};\n+\t},\n+\n+\t\/\/ position() relates an element's margin box to its offset parent's padding box\n+\t\/\/ This corresponds to the behavior of CSS absolute positioning\n+\tposition: function() {\n+\t\tif ( !this[ 0 ] ) {\n+\t\t\treturn;\n+\t\t}\n+\n+\t\tvar offsetParent, offset, doc,\n+\t\t\telem = this[ 0 ],\n+\t\t\tparentOffset = { top: 0, left: 0 };\n+\n+\t\t\/\/ position:fixed elements are offset from the viewport, which itself always has zero offset\n+\t\tif ( jQuery.css( elem, \"position\" ) === \"fixed\" ) {\n+\n+\t\t\t\/\/ Assume position:fixed implies availability of getBoundingClientRect\n+\t\t\toffset = elem.getBoundingClientRect();\n+\n+\t\t} else {\n+\t\t\toffset = this.offset();\n+\n+\t\t\t\/\/ Account for the *real* offset parent, which can be the document or its root element\n+\t\t\t\/\/ when a statically positioned element is identified\n+\t\t\tdoc = elem.ownerDocument;\n+\t\t\toffsetParent = elem.offsetParent || doc.documentElement;\n+\t\t\twhile ( offsetParent &&\n+\t\t\t\t( offsetParent === doc.body || offsetParent === doc.documentElement ) &&\n+\t\t\t\tjQuery.css( offsetParent, \"position\" ) === \"static\" ) {\n+\n+\t\t\t\toffsetParent = offsetParent.parentNode;\n+\t\t\t}\n+\t\t\tif ( offsetParent && offsetParent !== elem && offsetParent.nodeType === 1 ) {\n+\n+\t\t\t\t\/\/ Incorporate borders into its offset, since they are outside its content origin\n+\t\t\t\tparentOffset = jQuery( offsetParent ).offset();\n+\t\t\t\tparentOffset.top += jQuery.css( offsetParent, \"borderTopWidth\", true );\n+\t\t\t\tparentOffset.left += jQuery.css( offsetParent, \"borderLeftWidth\", true );\n+\t\t\t}\n+\t\t}\n+\n+\t\t\/\/ Subtract parent offsets and element margins\n+\t\treturn {\n+\t\t\ttop: offset.top - parentOffset.top - jQuery.css( elem, \"marginTop\", true ),\n+\t\t\tleft: offset.left - parentOffset.left - jQuery.css( elem, \"marginLeft\", true )\n+\t\t};\n+\t},\n+\n+\t\/\/ This method will return documentElement in the following cases:\n+\t\/\/ 1) For the element inside the iframe without offsetParent, this method will return\n+\t\/\/    documentElement of the parent window\n+\t\/\/ 2) For the hidden or detached element\n+\t\/\/ 3) For body or html element, i.e. in case of the html node - it will return itself\n+\t\/\/\n+\t\/\/ but those exceptions were never presented as a real life use-cases\n+\t\/\/ and might be considered as more preferable results.\n+\t\/\/\n+\t\/\/ This logic, however, is not guaranteed and can change at any point in the future\n+\toffsetParent: function() {\n+\t\treturn this.map( function() {\n+\t\t\tvar offsetParent = this.offsetParent;\n+\n+\t\t\twhile ( offsetParent && jQuery.css( offsetParent, \"position\" ) === \"static\" ) {\n+\t\t\t\toffsetParent = offsetParent.offsetParent;\n+\t\t\t}\n+\n+\t\t\treturn offsetParent || documentElement;\n+\t\t} );\n+\t}\n+} );\n+\n+\/\/ Create scrollLeft and scrollTop methods\n+jQuery.each( { scrollLeft: \"pageXOffset\", scrollTop: \"pageYOffset\" }, function( method, prop ) {\n+\tvar top = \"pageYOffset\" === prop;\n+\n+\tjQuery.fn[ method ] = function( val ) {\n+\t\treturn access( this, function( elem, method, val ) {\n+\n+\t\t\t\/\/ Coalesce documents and windows\n+\t\t\tvar win;\n+\t\t\tif ( isWindow( elem ) ) {\n+\t\t\t\twin = elem;\n+\t\t\t} else if ( elem.nodeType === 9 ) {\n+\t\t\t\twin = elem.defaultView;\n+\t\t\t}\n+\n+\t\t\tif ( val === undefined ) {\n+\t\t\t\treturn win ? win[ prop ] : elem[ method ];\n+\t\t\t}\n+\n+\t\t\tif ( win ) {\n+\t\t\t\twin.scrollTo(\n+\t\t\t\t\t!top ? val : win.pageXOffset,\n+\t\t\t\t\ttop ? val : win.pageYOffset\n+\t\t\t\t);\n+\n+\t\t\t} else {\n+\t\t\t\telem[ method ] = val;\n+\t\t\t}\n+\t\t}, method, val, arguments.length );\n+\t};\n+} );\n+\n+\/\/ Support: Safari <=7 - 9.1, Chrome <=37 - 49\n+\/\/ Add the top\/left cssHooks using jQuery.fn.position\n+\/\/ Webkit bug: https:\/\/bugs.webkit.org\/show_bug.cgi?id=29084\n+\/\/ Blink bug: https:\/\/bugs.chromium.org\/p\/chromium\/issues\/detail?id=589347\n+\/\/ getComputedStyle returns percent when specified for top\/left\/bottom\/right;\n+\/\/ rather than make the css module depend on the offset module, just check for it here\n+jQuery.each( [ \"top\", \"left\" ], function( _i, prop ) {\n+\tjQuery.cssHooks[ prop ] = addGetHookIf( support.pixelPosition,\n+\t\tfunction( elem, computed ) {\n+\t\t\tif ( computed ) {\n+\t\t\t\tcomputed = curCSS( elem, prop );\n+\n+\t\t\t\t\/\/ If curCSS returns percentage, fallback to offset\n+\t\t\t\treturn rnumnonpx.test( computed ) ?\n+\t\t\t\t\tjQuery( elem ).position()[ prop ] + \"px\" :\n+\t\t\t\t\tcomputed;\n+\t\t\t}\n+\t\t}\n+\t);\n+} );\n+\n+\n+\/\/ Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods\n+jQuery.each( { Height: \"height\", Width: \"width\" }, function( name, type ) {\n+\tjQuery.each( {\n+\t\tpadding: \"inner\" + name,\n+\t\tcontent: type,\n+\t\t\"\": \"outer\" + name\n+\t}, function( defaultExtra, funcName ) {\n+\n+\t\t\/\/ Margin is only for outerHeight, outerWidth\n+\t\tjQuery.fn[ funcName ] = function( margin, value ) {\n+\t\t\tvar chainable = arguments.length && ( defaultExtra || typeof margin !== \"boolean\" ),\n+\t\t\t\textra = defaultExtra || ( margin === true || value === true ? \"margin\" : \"border\" );\n+\n+\t\t\treturn access( this, function( elem, type, value ) {\n+\t\t\t\tvar doc;\n+\n+\t\t\t\tif ( isWindow( elem ) ) {\n+\n+\t\t\t\t\t\/\/ $( window ).outerWidth\/Height return w\/h including scrollbars (gh-1729)\n+\t\t\t\t\treturn funcName.indexOf( \"outer\" ) === 0 ?\n+\t\t\t\t\t\telem[ \"inner\" + name ] :\n+\t\t\t\t\t\telem.document.documentElement[ \"client\" + name ];\n+\t\t\t\t}\n+\n+\t\t\t\t\/\/ Get document width or height\n+\t\t\t\tif ( elem.nodeType === 9 ) {\n+\t\t\t\t\tdoc = elem.documentElement;\n+\n+\t\t\t\t\t\/\/ Either scroll[Width\/Height] or offset[Width\/Height] or client[Width\/Height],\n+\t\t\t\t\t\/\/ whichever is greatest\n+\t\t\t\t\treturn Math.max(\n+\t\t\t\t\t\telem.body[ \"scroll\" + name ], doc[ \"scroll\" + name ],\n+\t\t\t\t\t\telem.body[ \"offset\" + name ], doc[ \"offset\" + name ],\n+\t\t\t\t\t\tdoc[ \"client\" + name ]\n+\t\t\t\t\t);\n+\t\t\t\t}\n+\n+\t\t\t\treturn value === undefined ?\n+\n+\t\t\t\t\t\/\/ Get width or height on the element, requesting but not forcing parseFloat\n+\t\t\t\t\tjQuery.css( elem, type, extra ) :\n+\n+\t\t\t\t\t\/\/ Set width or height on the element\n+\t\t\t\t\tjQuery.style( elem, type, value, extra );\n+\t\t\t}, type, chainable ? margin : undefined, chainable );\n+\t\t};\n+\t} );\n+} );\n+\n+\n+jQuery.each( [\n+\t\"ajaxStart\",\n+\t\"ajaxStop\",\n+\t\"ajaxComplete\",\n+\t\"ajaxError\",\n+\t\"ajaxSuccess\",\n+\t\"ajaxSend\"\n+], function( _i, type ) {\n+\tjQuery.fn[ type ] = function( fn ) {\n+\t\treturn this.on( type, fn );\n+\t};\n+} );\n+\n+\n+\n+\n+jQuery.fn.extend( {\n+\n+\tbind: function( types, data, fn ) {\n+\t\treturn this.on( types, null, data, fn );\n+\t},\n+\tunbind: function( types, fn ) {\n+\t\treturn this.off( types, null, fn );\n+\t},\n+\n+\tdelegate: function( selector, types, data, fn ) {\n+\t\treturn this.on( types, selector, data, fn );\n+\t},\n+\tundelegate: function( selector, types, fn ) {\n+\n+\t\t\/\/ ( namespace ) or ( selector, types [, fn] )\n+\t\treturn arguments.length === 1 ?\n+\t\t\tthis.off( selector, \"**\" ) :\n+\t\t\tthis.off( types, selector || \"**\", fn );\n+\t},\n+\n+\thover: function( fnOver, fnOut ) {\n+\t\treturn this\n+\t\t\t.on( \"mouseenter\", fnOver )\n+\t\t\t.on( \"mouseleave\", fnOut || fnOver );\n+\t}\n+} );\n+\n+jQuery.each(\n+\t( \"blur focus focusin focusout resize scroll click dblclick \" +\n+\t\"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave \" +\n+\t\"change select submit keydown keypress keyup contextmenu\" ).split( \" \" ),\n+\tfunction( _i, name ) {\n+\n+\t\t\/\/ Handle event binding\n+\t\tjQuery.fn[ name ] = function( data, fn ) {\n+\t\t\treturn arguments.length > 0 ?\n+\t\t\t\tthis.on( name, null, data, fn ) :\n+\t\t\t\tthis.trigger( name );\n+\t\t};\n+\t}\n+);\n+\n+\n+\n+\n+\/\/ Support: Android <=4.0 only\n+\/\/ Make sure we trim BOM and NBSP\n+\/\/ Require that the \"whitespace run\" starts from a non-whitespace\n+\/\/ to avoid O(N^2) behavior when the engine would try matching \"\\s+$\" at each space position.\n+var rtrim = \/^[\\s\\uFEFF\\xA0]+|([^\\s\\uFEFF\\xA0])[\\s\\uFEFF\\xA0]+$\/g;\n+\n+\/\/ Bind a function to a context, optionally partially applying any\n+\/\/ arguments.\n+\/\/ jQuery.proxy is deprecated to promote standards (specifically Function#bind)\n+\/\/ However, it is not slated for removal any time soon\n+jQuery.proxy = function( fn, context ) {\n+\tvar tmp, args, proxy;\n+\n+\tif ( typeof context === \"string\" ) {\n+\t\ttmp = fn[ context ];\n+\t\tcontext = fn;\n+\t\tfn = tmp;\n+\t}\n+\n+\t\/\/ Quick check to determine if target is callable, in the spec\n+\t\/\/ this throws a TypeError, but we will just return undefined.\n+\tif ( !isFunction( fn ) ) {\n+\t\treturn undefined;\n+\t}\n+\n+\t\/\/ Simulated bind\n+\targs = slice.call( arguments, 2 );\n+\tproxy = function() {\n+\t\treturn fn.apply( context || this, args.concat( slice.call( arguments ) ) );\n+\t};\n+\n+\t\/\/ Set the guid of unique handler to the same of original handler, so it can be removed\n+\tproxy.guid = fn.guid = fn.guid || jQuery.guid++;\n+\n+\treturn proxy;\n+};\n+\n+jQuery.holdReady = function( hold ) {\n+\tif ( hold ) {\n+\t\tjQuery.readyWait++;\n+\t} else {\n+\t\tjQuery.ready( true );\n+\t}\n+};\n+jQuery.isArray = Array.isArray;\n+jQuery.parseJSON = JSON.parse;\n+jQuery.nodeName = nodeName;\n+jQuery.isFunction = isFunction;\n+jQuery.isWindow = isWindow;\n+jQuery.camelCase = camelCase;\n+jQuery.type = toType;\n+\n+jQuery.now = Date.now;\n+\n+jQuery.isNumeric = function( obj ) {\n+\n+\t\/\/ As of jQuery 3.0, isNumeric is limited to\n+\t\/\/ strings and numbers (primitives or objects)\n+\t\/\/ that can be coerced to finite numbers (gh-2662)\n+\tvar type = jQuery.type( obj );\n+\treturn ( type === \"number\" || type === \"string\" ) &&\n+\n+\t\t\/\/ parseFloat NaNs numeric-cast false positives (\"\")\n+\t\t\/\/ ...but misinterprets leading-number strings, particularly hex literals (\"0x...\")\n+\t\t\/\/ subtraction forces infinities to NaN\n+\t\t!isNaN( obj - parseFloat( obj ) );\n+};\n+\n+jQuery.trim = function( text ) {\n+\treturn text == null ?\n+\t\t\"\" :\n+\t\t( text + \"\" ).replace( rtrim, \"$1\" );\n+};\n+\n+\n+\n+\/\/ Register as a named AMD module, since jQuery can be concatenated with other\n+\/\/ files that may use define, but not via a proper concatenation script that\n+\/\/ understands anonymous AMD modules. A named AMD is safest and most robust\n+\/\/ way to register. Lowercase jquery is used because AMD module names are\n+\/\/ derived from file names, and jQuery is normally delivered in a lowercase\n+\/\/ file name. Do this after creating the global so that if an AMD module wants\n+\/\/ to call noConflict to hide this version of jQuery, it will work.\n+\n+\/\/ Note that for maximum portability, libraries that are not jQuery should\n+\/\/ declare themselves as anonymous modules, and avoid setting a global if an\n+\/\/ AMD loader is present. jQuery is a special case. For more information, see\n+\/\/ https:\/\/github.com\/jrburke\/requirejs\/wiki\/Updating-existing-libraries#wiki-anon\n+\n+if ( typeof define === \"function\" && define.amd ) {\n+\tdefine( \"jquery\", [], function() {\n+\t\treturn jQuery;\n+\t} );\n+}\n+\n+\n+\n+\n+var\n+\n+\t\/\/ Map over jQuery in case of overwrite\n+\t_jQuery = window.jQuery,\n+\n+\t\/\/ Map over the $ in case of overwrite\n+\t_$ = window.$;\n+\n+jQuery.noConflict = function( deep ) {\n+\tif ( window.$ === jQuery ) {\n+\t\twindow.$ = _$;\n+\t}\n+\n+\tif ( deep && window.jQuery === jQuery ) {\n+\t\twindow.jQuery = _jQuery;\n+\t}\n+\n+\treturn jQuery;\n+};\n+\n+\/\/ Expose jQuery and $ identifiers, even in AMD\n+\/\/ (trac-7102#comment:10, https:\/\/github.com\/jquery\/jquery\/pull\/557)\n+\/\/ and CommonJS for browser emulators (trac-13566)\n+if ( typeof noGlobal === \"undefined\" ) {\n+\twindow.jQuery = window.$ = jQuery;\n+}\n+\n+\n+\n+\n+return jQuery;\n+} );\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/script-dir\/jquery-3.7.1.js","additions":10716,"deletions":0,"binary":false,"changes":10716,"status":"added"},{"patch":"@@ -0,0 +1,2 @@\n+\/*! jQuery v3.7.1 | (c) OpenJS Foundation and other contributors | jquery.org\/license *\/\n+!function(e,t){\"use strict\";\"object\"==typeof module&&\"object\"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error(\"jQuery requires a window with a document\");return t(e)}:t(e)}(\"undefined\"!=typeof window?window:this,function(ie,e){\"use strict\";var oe=[],r=Object.getPrototypeOf,ae=oe.slice,g=oe.flat?function(e){return oe.flat.call(e)}:function(e){return oe.concat.apply([],e)},s=oe.push,se=oe.indexOf,n={},i=n.toString,ue=n.hasOwnProperty,o=ue.toString,a=o.call(Object),le={},v=function(e){return\"function\"==typeof e&&\"number\"!=typeof e.nodeType&&\"function\"!=typeof e.item},y=function(e){return null!=e&&e===e.window},C=ie.document,u={type:!0,src:!0,nonce:!0,noModule:!0};function m(e,t,n){var r,i,o=(n=n||C).createElement(\"script\");if(o.text=e,t)for(r in u)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function x(e){return null==e?e+\"\":\"object\"==typeof e||\"function\"==typeof e?n[i.call(e)]||\"object\":typeof e}var t=\"3.7.1\",l=\/HTML$\/i,ce=function(e,t){return new ce.fn.init(e,t)};function c(e){var t=!!e&&\"length\"in e&&e.length,n=x(e);return!v(e)&&!y(e)&&(\"array\"===n||0===t||\"number\"==typeof t&&0<t&&t-1 in e)}function fe(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}ce.fn=ce.prototype={jquery:t,constructor:ce,length:0,toArray:function(){return ae.call(this)},get:function(e){return null==e?ae.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=ce.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return ce.each(this,e)},map:function(n){return this.pushStack(ce.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(ae.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(ce.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(ce.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:oe.sort,splice:oe.splice},ce.extend=ce.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for(\"boolean\"==typeof a&&(l=a,a=arguments[s]||{},s++),\"object\"==typeof a||v(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],\"__proto__\"!==t&&a!==r&&(l&&r&&(ce.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||ce.isPlainObject(n)?n:{},i=!1,a[t]=ce.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},ce.extend({expando:\"jQuery\"+(t+Math.random()).replace(\/\\D\/g,\"\"),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||\"[object Object]\"!==i.call(e))&&(!(t=r(e))||\"function\"==typeof(n=ue.call(t,\"constructor\")&&t.constructor)&&o.call(n)===a)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){m(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(c(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},text:function(e){var t,n=\"\",r=0,i=e.nodeType;if(!i)while(t=e[r++])n+=ce.text(t);return 1===i||11===i?e.textContent:9===i?e.documentElement.textContent:3===i||4===i?e.nodeValue:n},makeArray:function(e,t){var n=t||[];return null!=e&&(c(Object(e))?ce.merge(n,\"string\"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:se.call(t,e,n)},isXMLDoc:function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!l.test(t||n&&n.nodeName||\"HTML\")},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(c(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g(a)},guid:1,support:le}),\"function\"==typeof Symbol&&(ce.fn[Symbol.iterator]=oe[Symbol.iterator]),ce.each(\"Boolean Number String Function Array Date RegExp Object Error Symbol\".split(\" \"),function(e,t){n[\"[object \"+t+\"]\"]=t.toLowerCase()});var pe=oe.pop,de=oe.sort,he=oe.splice,ge=\"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",ve=new RegExp(\"^\"+ge+\"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\"+ge+\"+$\",\"g\");ce.contains=function(e,t){var n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(e.contains?e.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))};var f=\/([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\x80-\\uFFFF\\w-]\/g;function p(e,t){return t?\"\\0\"===e?\"\\ufffd\":e.slice(0,-1)+\"\\\\\"+e.charCodeAt(e.length-1).toString(16)+\" \":\"\\\\\"+e}ce.escapeSelector=function(e){return(e+\"\").replace(f,p)};var ye=C,me=s;!function(){var e,b,w,o,a,T,r,C,d,i,k=me,S=ce.expando,E=0,n=0,s=W(),c=W(),u=W(),h=W(),l=function(e,t){return e===t&&(a=!0),0},f=\"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped\",t=\"(?:\\\\\\\\[\\\\da-fA-F]{1,6}\"+ge+\"?|\\\\\\\\[^\\\\r\\\\n\\\\f]|[\\\\w-]|[^\\0-\\\\x7f])+\",p=\"\\\\[\"+ge+\"*(\"+t+\")(?:\"+ge+\"*([*^$|!~]?=)\"+ge+\"*(?:'((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\"|(\"+t+\"))|)\"+ge+\"*\\\\]\",g=\":(\"+t+\")(?:\\\\((('((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\")|((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\"+p+\")*)|.*)\\\\)|)\",v=new RegExp(ge+\"+\",\"g\"),y=new RegExp(\"^\"+ge+\"*,\"+ge+\"*\"),m=new RegExp(\"^\"+ge+\"*([>+~]|\"+ge+\")\"+ge+\"*\"),x=new RegExp(ge+\"|>\"),j=new RegExp(g),A=new RegExp(\"^\"+t+\"$\"),D={ID:new RegExp(\"^#(\"+t+\")\"),CLASS:new RegExp(\"^\\\\.(\"+t+\")\"),TAG:new RegExp(\"^(\"+t+\"|[*])\"),ATTR:new RegExp(\"^\"+p),PSEUDO:new RegExp(\"^\"+g),CHILD:new RegExp(\"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\"+ge+\"*(even|odd|(([+-]|)(\\\\d*)n|)\"+ge+\"*(?:([+-]|)\"+ge+\"*(\\\\d+)|))\"+ge+\"*\\\\)|)\",\"i\"),bool:new RegExp(\"^(?:\"+f+\")$\",\"i\"),needsContext:new RegExp(\"^\"+ge+\"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\"+ge+\"*((?:-\\\\d)?\\\\d*)\"+ge+\"*\\\\)|)(?=[^-]|$)\",\"i\")},N=\/^(?:input|select|textarea|button)$\/i,q=\/^h\\d$\/i,L=\/^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$\/,H=\/[+~]\/,O=new RegExp(\"\\\\\\\\[\\\\da-fA-F]{1,6}\"+ge+\"?|\\\\\\\\([^\\\\r\\\\n\\\\f])\",\"g\"),P=function(e,t){var n=\"0x\"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},M=function(){V()},R=J(function(e){return!0===e.disabled&&fe(e,\"fieldset\")},{dir:\"parentNode\",next:\"legend\"});try{k.apply(oe=ae.call(ye.childNodes),ye.childNodes),oe[ye.childNodes.length].nodeType}catch(e){k={apply:function(e,t){me.apply(e,ae.call(t))},call:function(e){me.apply(e,ae.call(arguments,1))}}}function I(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],\"string\"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&(V(e),e=e||T,C)){if(11!==p&&(u=L.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return k.call(n,a),n}else if(f&&(a=f.getElementById(i))&&I.contains(e,a)&&a.id===i)return k.call(n,a),n}else{if(u[2])return k.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&e.getElementsByClassName)return k.apply(n,e.getElementsByClassName(i)),n}if(!(h[t+\" \"]||d&&d.test(t))){if(c=t,f=e,1===p&&(x.test(t)||m.test(t))){(f=H.test(t)&&U(e.parentNode)||e)==e&&le.scope||((s=e.getAttribute(\"id\"))?s=ce.escapeSelector(s):e.setAttribute(\"id\",s=S)),o=(l=Y(t)).length;while(o--)l[o]=(s?\"#\"+s:\":scope\")+\" \"+Q(l[o]);c=l.join(\",\")}try{return k.apply(n,f.querySelectorAll(c)),n}catch(e){h(t,!0)}finally{s===S&&e.removeAttribute(\"id\")}}}return re(t.replace(ve,\"$1\"),e,n,r)}function W(){var r=[];return function e(t,n){return r.push(t+\" \")>b.cacheLength&&delete e[r.shift()],e[t+\" \"]=n}}function F(e){return e[S]=!0,e}function $(e){var t=T.createElement(\"fieldset\");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function B(t){return function(e){return fe(e,\"input\")&&e.type===t}}function _(t){return function(e){return(fe(e,\"input\")||fe(e,\"button\"))&&e.type===t}}function z(t){return function(e){return\"form\"in e?e.parentNode&&!1===e.disabled?\"label\"in e?\"label\"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&R(e)===t:e.disabled===t:\"label\"in e&&e.disabled===t}}function X(a){return F(function(o){return o=+o,F(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function U(e){return e&&\"undefined\"!=typeof e.getElementsByTagName&&e}function V(e){var t,n=e?e.ownerDocument||e:ye;return n!=T&&9===n.nodeType&&n.documentElement&&(r=(T=n).documentElement,C=!ce.isXMLDoc(T),i=r.matches||r.webkitMatchesSelector||r.msMatchesSelector,r.msMatchesSelector&&ye!=T&&(t=T.defaultView)&&t.top!==t&&t.addEventListener(\"unload\",M),le.getById=$(function(e){return r.appendChild(e).id=ce.expando,!T.getElementsByName||!T.getElementsByName(ce.expando).length}),le.disconnectedMatch=$(function(e){return i.call(e,\"*\")}),le.scope=$(function(){return T.querySelectorAll(\":scope\")}),le.cssHas=$(function(){try{return T.querySelector(\":has(*,:jqfake)\"),!1}catch(e){return!0}}),le.getById?(b.filter.ID=function(e){var t=e.replace(O,P);return function(e){return e.getAttribute(\"id\")===t}},b.find.ID=function(e,t){if(\"undefined\"!=typeof t.getElementById&&C){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(O,P);return function(e){var t=\"undefined\"!=typeof e.getAttributeNode&&e.getAttributeNode(\"id\");return t&&t.value===n}},b.find.ID=function(e,t){if(\"undefined\"!=typeof t.getElementById&&C){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode(\"id\"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode(\"id\"))&&n.value===e)return[o]}return[]}}),b.find.TAG=function(e,t){return\"undefined\"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):t.querySelectorAll(e)},b.find.CLASS=function(e,t){if(\"undefined\"!=typeof t.getElementsByClassName&&C)return t.getElementsByClassName(e)},d=[],$(function(e){var t;r.appendChild(e).innerHTML=\"<a id='\"+S+\"' href='' disabled='disabled'><\/a><select id='\"+S+\"-\\r\\\\' disabled='disabled'><option selected=''><\/option><\/select>\",e.querySelectorAll(\"[selected]\").length||d.push(\"\\\\[\"+ge+\"*(?:value|\"+f+\")\"),e.querySelectorAll(\"[id~=\"+S+\"-]\").length||d.push(\"~=\"),e.querySelectorAll(\"a#\"+S+\"+*\").length||d.push(\".#.+[+~]\"),e.querySelectorAll(\":checked\").length||d.push(\":checked\"),(t=T.createElement(\"input\")).setAttribute(\"type\",\"hidden\"),e.appendChild(t).setAttribute(\"name\",\"D\"),r.appendChild(e).disabled=!0,2!==e.querySelectorAll(\":disabled\").length&&d.push(\":enabled\",\":disabled\"),(t=T.createElement(\"input\")).setAttribute(\"name\",\"\"),e.appendChild(t),e.querySelectorAll(\"[name='']\").length||d.push(\"\\\\[\"+ge+\"*name\"+ge+\"*=\"+ge+\"*(?:''|\\\"\\\")\")}),le.cssHas||d.push(\":has\"),d=d.length&&new RegExp(d.join(\"|\")),l=function(e,t){if(e===t)return a=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!le.sortDetached&&t.compareDocumentPosition(e)===n?e===T||e.ownerDocument==ye&&I.contains(ye,e)?-1:t===T||t.ownerDocument==ye&&I.contains(ye,t)?1:o?se.call(o,e)-se.call(o,t):0:4&n?-1:1)}),T}for(e in I.matches=function(e,t){return I(e,null,null,t)},I.matchesSelector=function(e,t){if(V(e),C&&!h[t+\" \"]&&(!d||!d.test(t)))try{var n=i.call(e,t);if(n||le.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){h(t,!0)}return 0<I(t,T,null,[e]).length},I.contains=function(e,t){return(e.ownerDocument||e)!=T&&V(e),ce.contains(e,t)},I.attr=function(e,t){(e.ownerDocument||e)!=T&&V(e);var n=b.attrHandle[t.toLowerCase()],r=n&&ue.call(b.attrHandle,t.toLowerCase())?n(e,t,!C):void 0;return void 0!==r?r:e.getAttribute(t)},I.error=function(e){throw new Error(\"Syntax error, unrecognized expression: \"+e)},ce.uniqueSort=function(e){var t,n=[],r=0,i=0;if(a=!le.sortStable,o=!le.sortStable&&ae.call(e,0),de.call(e,l),a){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)he.call(e,n[r],1)}return o=null,e},ce.fn.uniqueSort=function(){return this.pushStack(ce.uniqueSort(ae.apply(this)))},(b=ce.expr={cacheLength:50,createPseudo:F,match:D,attrHandle:{},find:{},relative:{\">\":{dir:\"parentNode\",first:!0},\" \":{dir:\"parentNode\"},\"+\":{dir:\"previousSibling\",first:!0},\"~\":{dir:\"previousSibling\"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(O,P),e[3]=(e[3]||e[4]||e[5]||\"\").replace(O,P),\"~=\"===e[2]&&(e[3]=\" \"+e[3]+\" \"),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),\"nth\"===e[1].slice(0,3)?(e[3]||I.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(\"even\"===e[3]||\"odd\"===e[3])),e[5]=+(e[7]+e[8]||\"odd\"===e[3])):e[3]&&I.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return D.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||\"\":n&&j.test(n)&&(t=Y(n,!0))&&(t=n.indexOf(\")\",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(O,P).toLowerCase();return\"*\"===e?function(){return!0}:function(e){return fe(e,t)}},CLASS:function(e){var t=s[e+\" \"];return t||(t=new RegExp(\"(^|\"+ge+\")\"+e+\"(\"+ge+\"|$)\"))&&s(e,function(e){return t.test(\"string\"==typeof e.className&&e.className||\"undefined\"!=typeof e.getAttribute&&e.getAttribute(\"class\")||\"\")})},ATTR:function(n,r,i){return function(e){var t=I.attr(e,n);return null==t?\"!=\"===r:!r||(t+=\"\",\"=\"===r?t===i:\"!=\"===r?t!==i:\"^=\"===r?i&&0===t.indexOf(i):\"*=\"===r?i&&-1<t.indexOf(i):\"$=\"===r?i&&t.slice(-i.length)===i:\"~=\"===r?-1<(\" \"+t.replace(v,\" \")+\" \").indexOf(i):\"|=\"===r&&(t===i||t.slice(0,i.length+1)===i+\"-\"))}},CHILD:function(d,e,t,h,g){var v=\"nth\"!==d.slice(0,3),y=\"last\"!==d.slice(-4),m=\"of-type\"===e;return 1===h&&0===g?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u=v!==y?\"nextSibling\":\"previousSibling\",l=e.parentNode,c=m&&e.nodeName.toLowerCase(),f=!n&&!m,p=!1;if(l){if(v){while(u){o=e;while(o=o[u])if(m?fe(o,c):1===o.nodeType)return!1;s=u=\"only\"===d&&!s&&\"nextSibling\"}return!0}if(s=[y?l.firstChild:l.lastChild],y&&f){p=(a=(r=(i=l[S]||(l[S]={}))[d]||[])[0]===E&&r[1])&&r[2],o=a&&l.childNodes[a];while(o=++a&&o&&o[u]||(p=a=0)||s.pop())if(1===o.nodeType&&++p&&o===e){i[d]=[E,a,p];break}}else if(f&&(p=a=(r=(i=e[S]||(e[S]={}))[d]||[])[0]===E&&r[1]),!1===p)while(o=++a&&o&&o[u]||(p=a=0)||s.pop())if((m?fe(o,c):1===o.nodeType)&&++p&&(f&&((i=o[S]||(o[S]={}))[d]=[E,p]),o===e))break;return(p-=g)===h||p%h==0&&0<=p\/h}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||I.error(\"unsupported pseudo: \"+e);return a[S]?a(o):1<a.length?(t=[e,e,\"\",o],b.setFilters.hasOwnProperty(e.toLowerCase())?F(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=se.call(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:F(function(e){var r=[],i=[],s=ne(e.replace(ve,\"$1\"));return s[S]?F(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:F(function(t){return function(e){return 0<I(t,e).length}}),contains:F(function(t){return t=t.replace(O,P),function(e){return-1<(e.textContent||ce.text(e)).indexOf(t)}}),lang:F(function(n){return A.test(n||\"\")||I.error(\"unsupported lang: \"+n),n=n.replace(O,P).toLowerCase(),function(e){var t;do{if(t=C?e.lang:e.getAttribute(\"xml:lang\")||e.getAttribute(\"lang\"))return(t=t.toLowerCase())===n||0===t.indexOf(n+\"-\")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=ie.location&&ie.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===r},focus:function(e){return e===function(){try{return T.activeElement}catch(e){}}()&&T.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:z(!1),disabled:z(!0),checked:function(e){return fe(e,\"input\")&&!!e.checked||fe(e,\"option\")&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return q.test(e.nodeName)},input:function(e){return N.test(e.nodeName)},button:function(e){return fe(e,\"input\")&&\"button\"===e.type||fe(e,\"button\")},text:function(e){var t;return fe(e,\"input\")&&\"text\"===e.type&&(null==(t=e.getAttribute(\"type\"))||\"text\"===t.toLowerCase())},first:X(function(){return[0]}),last:X(function(e,t){return[t-1]}),eq:X(function(e,t,n){return[n<0?n+t:n]}),even:X(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:X(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:X(function(e,t,n){var r;for(r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:X(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=B(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=_(e);function G(){}function Y(e,t){var n,r,i,o,a,s,u,l=c[e+\" \"];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=y.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=m.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(ve,\" \")}),a=a.slice(n.length)),b.filter)!(r=D[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?I.error(e):c(e,s).slice(0)}function Q(e){for(var t=0,n=e.length,r=\"\";t<n;t++)r+=e[t].value;return r}function J(a,e,t){var s=e.dir,u=e.next,l=u||s,c=t&&\"parentNode\"===l,f=n++;return e.first?function(e,t,n){while(e=e[s])if(1===e.nodeType||c)return a(e,t,n);return!1}:function(e,t,n){var r,i,o=[E,f];if(n){while(e=e[s])if((1===e.nodeType||c)&&a(e,t,n))return!0}else while(e=e[s])if(1===e.nodeType||c)if(i=e[S]||(e[S]={}),u&&fe(e,u))e=e[s]||e;else{if((r=i[l])&&r[0]===E&&r[1]===f)return o[2]=r[2];if((i[l]=o)[2]=a(e,t,n))return!0}return!1}}function K(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Z(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function ee(d,h,g,v,y,e){return v&&!v[S]&&(v=ee(v)),y&&!y[S]&&(y=ee(y,e)),F(function(e,t,n,r){var i,o,a,s,u=[],l=[],c=t.length,f=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)I(e,t[r],n);return n}(h||\"*\",n.nodeType?[n]:n,[]),p=!d||!e&&h?f:Z(f,u,d,n,r);if(g?g(p,s=y||(e?d:c||v)?[]:t,n,r):s=p,v){i=Z(s,l),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(s[l[o]]=!(p[l[o]]=a))}if(e){if(y||d){if(y){i=[],o=s.length;while(o--)(a=s[o])&&i.push(p[o]=a);y(null,s=[],i,r)}o=s.length;while(o--)(a=s[o])&&-1<(i=y?se.call(e,a):u[o])&&(e[i]=!(t[i]=a))}}else s=Z(s===t?s.splice(c,s.length):s),y?y(null,t,s,r):k.apply(t,s)})}function te(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[\" \"],s=o?1:0,u=J(function(e){return e===i},a,!0),l=J(function(e){return-1<se.call(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!=w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[J(K(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[S]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return ee(1<s&&K(c),1<s&&Q(e.slice(0,s-1).concat({value:\" \"===e[s-2].type?\"*\":\"\"})).replace(ve,\"$1\"),t,s<n&&te(e.slice(s,n)),n<r&&te(e=e.slice(n)),n<r&&Q(e))}c.push(t)}return K(c)}function ne(e,t){var n,v,y,m,x,r,i=[],o=[],a=u[e+\" \"];if(!a){t||(t=Y(e)),n=t.length;while(n--)(a=te(t[n]))[S]?i.push(a):o.push(a);(a=u(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l=\"0\",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG(\"*\",i),h=E+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t==T||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument==T||(V(o),n=!C);while(s=v[a++])if(s(o,t||T,n)){k.call(r,o);break}i&&(E=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=pe.call(r));f=Z(f)}k.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&ce.uniqueSort(r)}return i&&(E=h,w=p),c},m?F(r):r))).selector=e}return a}function re(e,t,n,r){var i,o,a,s,u,l=\"function\"==typeof e&&e,c=!r&&Y(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&\"ID\"===(a=o[0]).type&&9===t.nodeType&&C&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(O,P),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=D.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(O,P),H.test(o[0].type)&&U(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&Q(o)))return k.apply(n,r),n;break}}}return(l||ne(e,c))(r,t,!C,n,!t||H.test(e)&&U(t.parentNode)||t),n}G.prototype=b.filters=b.pseudos,b.setFilters=new G,le.sortStable=S.split(\"\").sort(l).join(\"\")===S,V(),le.sortDetached=$(function(e){return 1&e.compareDocumentPosition(T.createElement(\"fieldset\"))}),ce.find=I,ce.expr[\":\"]=ce.expr.pseudos,ce.unique=ce.uniqueSort,I.compile=ne,I.select=re,I.setDocument=V,I.tokenize=Y,I.escape=ce.escapeSelector,I.getText=ce.text,I.isXML=ce.isXMLDoc,I.selectors=ce.expr,I.support=ce.support,I.uniqueSort=ce.uniqueSort}();var d=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&ce(e).is(n))break;r.push(e)}return r},h=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},b=ce.expr.match.needsContext,w=\/^<([a-z][^\\\/\\0>:\\x20\\t\\r\\n\\f]*)[\\x20\\t\\r\\n\\f]*\\\/?>(?:<\\\/\\1>|)$\/i;function T(e,n,r){return v(n)?ce.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?ce.grep(e,function(e){return e===n!==r}):\"string\"!=typeof n?ce.grep(e,function(e){return-1<se.call(n,e)!==r}):ce.filter(n,e,r)}ce.filter=function(e,t,n){var r=t[0];return n&&(e=\":not(\"+e+\")\"),1===t.length&&1===r.nodeType?ce.find.matchesSelector(r,e)?[r]:[]:ce.find.matches(e,ce.grep(t,function(e){return 1===e.nodeType}))},ce.fn.extend({find:function(e){var t,n,r=this.length,i=this;if(\"string\"!=typeof e)return this.pushStack(ce(e).filter(function(){for(t=0;t<r;t++)if(ce.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)ce.find(e,i[t],n);return 1<r?ce.uniqueSort(n):n},filter:function(e){return this.pushStack(T(this,e||[],!1))},not:function(e){return this.pushStack(T(this,e||[],!0))},is:function(e){return!!T(this,\"string\"==typeof e&&b.test(e)?ce(e):e||[],!1).length}});var k,S=\/^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]+))$\/;(ce.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||k,\"string\"==typeof e){if(!(r=\"<\"===e[0]&&\">\"===e[e.length-1]&&3<=e.length?[null,e,null]:S.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof ce?t[0]:t,ce.merge(this,ce.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:C,!0)),w.test(r[1])&&ce.isPlainObject(t))for(r in t)v(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=C.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):v(e)?void 0!==n.ready?n.ready(e):e(ce):ce.makeArray(e,this)}).prototype=ce.fn,k=ce(C);var E=\/^(?:parents|prev(?:Until|All))\/,j={children:!0,contents:!0,next:!0,prev:!0};function A(e,t){while((e=e[t])&&1!==e.nodeType);return e}ce.fn.extend({has:function(e){var t=ce(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(ce.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a=\"string\"!=typeof e&&ce(e);if(!b.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&ce.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?ce.uniqueSort(o):o)},index:function(e){return e?\"string\"==typeof e?se.call(ce(e),this[0]):se.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ce.uniqueSort(ce.merge(this.get(),ce(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ce.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return d(e,\"parentNode\")},parentsUntil:function(e,t,n){return d(e,\"parentNode\",n)},next:function(e){return A(e,\"nextSibling\")},prev:function(e){return A(e,\"previousSibling\")},nextAll:function(e){return d(e,\"nextSibling\")},prevAll:function(e){return d(e,\"previousSibling\")},nextUntil:function(e,t,n){return d(e,\"nextSibling\",n)},prevUntil:function(e,t,n){return d(e,\"previousSibling\",n)},siblings:function(e){return h((e.parentNode||{}).firstChild,e)},children:function(e){return h(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(fe(e,\"template\")&&(e=e.content||e),ce.merge([],e.childNodes))}},function(r,i){ce.fn[r]=function(e,t){var n=ce.map(this,i,e);return\"Until\"!==r.slice(-5)&&(t=e),t&&\"string\"==typeof t&&(n=ce.filter(t,n)),1<this.length&&(j[r]||ce.uniqueSort(n),E.test(r)&&n.reverse()),this.pushStack(n)}});var D=\/[^\\x20\\t\\r\\n\\f]+\/g;function N(e){return e}function q(e){throw e}function L(e,t,n,r){var i;try{e&&v(i=e.promise)?i.call(e).done(t).fail(n):e&&v(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}ce.Callbacks=function(r){var e,n;r=\"string\"==typeof r?(e=r,n={},ce.each(e.match(D)||[],function(e,t){n[t]=!0}),n):ce.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:\"\")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){ce.each(e,function(e,t){v(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&\"string\"!==x(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return ce.each(arguments,function(e,t){var n;while(-1<(n=ce.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<ce.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t=\"\",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=\"\"),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},ce.extend({Deferred:function(e){var o=[[\"notify\",\"progress\",ce.Callbacks(\"memory\"),ce.Callbacks(\"memory\"),2],[\"resolve\",\"done\",ce.Callbacks(\"once memory\"),ce.Callbacks(\"once memory\"),0,\"resolved\"],[\"reject\",\"fail\",ce.Callbacks(\"once memory\"),ce.Callbacks(\"once memory\"),1,\"rejected\"]],i=\"pending\",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},\"catch\":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return ce.Deferred(function(r){ce.each(o,function(e,t){var n=v(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&v(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+\"With\"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError(\"Thenable self-resolution\");t=e&&(\"object\"==typeof e||\"function\"==typeof e)&&e.then,v(t)?s?t.call(e,l(u,o,N,s),l(u,o,q,s)):(u++,t.call(e,l(u,o,N,s),l(u,o,q,s),l(u,o,N,o.notifyWith))):(a!==N&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){ce.Deferred.exceptionHook&&ce.Deferred.exceptionHook(e,t.error),u<=i+1&&(a!==q&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(ce.Deferred.getErrorHook?t.error=ce.Deferred.getErrorHook():ce.Deferred.getStackHook&&(t.error=ce.Deferred.getStackHook()),ie.setTimeout(t))}}return ce.Deferred(function(e){o[0][3].add(l(0,e,v(r)?r:N,e.notifyWith)),o[1][3].add(l(0,e,v(t)?t:N)),o[2][3].add(l(0,e,v(n)?n:q))}).promise()},promise:function(e){return null!=e?ce.extend(e,a):a}},s={};return ce.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+\"With\"](this===s?void 0:this,arguments),this},s[t[0]+\"With\"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=ae.call(arguments),o=ce.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?ae.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(L(e,o.done(a(t)).resolve,o.reject,!n),\"pending\"===o.state()||v(i[t]&&i[t].then)))return o.then();while(t--)L(i[t],a(t),o.reject);return o.promise()}});var H=\/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$\/;ce.Deferred.exceptionHook=function(e,t){ie.console&&ie.console.warn&&e&&H.test(e.name)&&ie.console.warn(\"jQuery.Deferred exception: \"+e.message,e.stack,t)},ce.readyException=function(e){ie.setTimeout(function(){throw e})};var O=ce.Deferred();function P(){C.removeEventListener(\"DOMContentLoaded\",P),ie.removeEventListener(\"load\",P),ce.ready()}ce.fn.ready=function(e){return O.then(e)[\"catch\"](function(e){ce.readyException(e)}),this},ce.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--ce.readyWait:ce.isReady)||(ce.isReady=!0)!==e&&0<--ce.readyWait||O.resolveWith(C,[ce])}}),ce.ready.then=O.then,\"complete\"===C.readyState||\"loading\"!==C.readyState&&!C.documentElement.doScroll?ie.setTimeout(ce.ready):(C.addEventListener(\"DOMContentLoaded\",P),ie.addEventListener(\"load\",P));var M=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if(\"object\"===x(n))for(s in i=!0,n)M(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,v(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(ce(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},R=\/^-ms-\/,I=\/-([a-z])\/g;function W(e,t){return t.toUpperCase()}function F(e){return e.replace(R,\"ms-\").replace(I,W)}var $=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function B(){this.expando=ce.expando+B.uid++}B.uid=1,B.prototype={cache:function(e){var t=e[this.expando];return t||(t={},$(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if(\"string\"==typeof t)i[F(t)]=n;else for(r in t)i[F(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][F(t)]},access:function(e,t,n){return void 0===t||t&&\"string\"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(F):(t=F(t))in r?[t]:t.match(D)||[]).length;while(n--)delete r[t[n]]}(void 0===t||ce.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!ce.isEmptyObject(t)}};var _=new B,z=new B,X=\/^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$\/,U=\/[A-Z]\/g;function V(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r=\"data-\"+t.replace(U,\"-$&\").toLowerCase(),\"string\"==typeof(n=e.getAttribute(r))){try{n=\"true\"===(i=n)||\"false\"!==i&&(\"null\"===i?null:i===+i+\"\"?+i:X.test(i)?JSON.parse(i):i)}catch(e){}z.set(e,t,n)}else n=void 0;return n}ce.extend({hasData:function(e){return z.hasData(e)||_.hasData(e)},data:function(e,t,n){return z.access(e,t,n)},removeData:function(e,t){z.remove(e,t)},_data:function(e,t,n){return _.access(e,t,n)},_removeData:function(e,t){_.remove(e,t)}}),ce.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=z.get(o),1===o.nodeType&&!_.get(o,\"hasDataAttrs\"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf(\"data-\")&&(r=F(r.slice(5)),V(o,r,i[r]));_.set(o,\"hasDataAttrs\",!0)}return i}return\"object\"==typeof n?this.each(function(){z.set(this,n)}):M(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=z.get(o,n))?t:void 0!==(t=V(o,n))?t:void 0;this.each(function(){z.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){z.remove(this,e)})}}),ce.extend({queue:function(e,t,n){var r;if(e)return t=(t||\"fx\")+\"queue\",r=_.get(e,t),n&&(!r||Array.isArray(n)?r=_.access(e,t,ce.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||\"fx\";var n=ce.queue(e,t),r=n.length,i=n.shift(),o=ce._queueHooks(e,t);\"inprogress\"===i&&(i=n.shift(),r--),i&&(\"fx\"===t&&n.unshift(\"inprogress\"),delete o.stop,i.call(e,function(){ce.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+\"queueHooks\";return _.get(e,n)||_.access(e,n,{empty:ce.Callbacks(\"once memory\").add(function(){_.remove(e,[t+\"queue\",n])})})}}),ce.fn.extend({queue:function(t,n){var e=2;return\"string\"!=typeof t&&(n=t,t=\"fx\",e--),arguments.length<e?ce.queue(this[0],t):void 0===n?this:this.each(function(){var e=ce.queue(this,t,n);ce._queueHooks(this,t),\"fx\"===t&&\"inprogress\"!==e[0]&&ce.dequeue(this,t)})},dequeue:function(e){return this.each(function(){ce.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||\"fx\",[])},promise:function(e,t){var n,r=1,i=ce.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};\"string\"!=typeof e&&(t=e,e=void 0),e=e||\"fx\";while(a--)(n=_.get(o[a],e+\"queueHooks\"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var G=\/[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)\/.source,Y=new RegExp(\"^(?:([+-])=|)(\"+G+\")([a-z%]*)$\",\"i\"),Q=[\"Top\",\"Right\",\"Bottom\",\"Left\"],J=C.documentElement,K=function(e){return ce.contains(e.ownerDocument,e)},Z={composed:!0};J.getRootNode&&(K=function(e){return ce.contains(e.ownerDocument,e)||e.getRootNode(Z)===e.ownerDocument});var ee=function(e,t){return\"none\"===(e=t||e).style.display||\"\"===e.style.display&&K(e)&&\"none\"===ce.css(e,\"display\")};function te(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return ce.css(e,t,\"\")},u=s(),l=n&&n[3]||(ce.cssNumber[t]?\"\":\"px\"),c=e.nodeType&&(ce.cssNumber[t]||\"px\"!==l&&+u)&&Y.exec(ce.css(e,t));if(c&&c[3]!==l){u\/=2,l=l||c[3],c=+u||1;while(a--)ce.style(e,t,c+l),(1-o)*(1-(o=s()\/u||.5))<=0&&(a=0),c\/=o;c*=2,ce.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ne={};function re(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?(\"none\"===n&&(l[c]=_.get(r,\"display\")||null,l[c]||(r.style.display=\"\")),\"\"===r.style.display&&ee(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ne[s])||(o=a.body.appendChild(a.createElement(s)),u=ce.css(o,\"display\"),o.parentNode.removeChild(o),\"none\"===u&&(u=\"block\"),ne[s]=u)))):\"none\"!==n&&(l[c]=\"none\",_.set(r,\"display\",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}ce.fn.extend({show:function(){return re(this,!0)},hide:function(){return re(this)},toggle:function(e){return\"boolean\"==typeof e?e?this.show():this.hide():this.each(function(){ee(this)?ce(this).show():ce(this).hide()})}});var xe,be,we=\/^(?:checkbox|radio)$\/i,Te=\/<([a-z][^\\\/\\0>\\x20\\t\\r\\n\\f]*)\/i,Ce=\/^$|^module$|\\\/(?:java|ecma)script\/i;xe=C.createDocumentFragment().appendChild(C.createElement(\"div\")),(be=C.createElement(\"input\")).setAttribute(\"type\",\"radio\"),be.setAttribute(\"checked\",\"checked\"),be.setAttribute(\"name\",\"t\"),xe.appendChild(be),le.checkClone=xe.cloneNode(!0).cloneNode(!0).lastChild.checked,xe.innerHTML=\"<textarea>x<\/textarea>\",le.noCloneChecked=!!xe.cloneNode(!0).lastChild.defaultValue,xe.innerHTML=\"<option><\/option>\",le.option=!!xe.lastChild;var ke={thead:[1,\"<table>\",\"<\/table>\"],col:[2,\"<table><colgroup>\",\"<\/colgroup><\/table>\"],tr:[2,\"<table><tbody>\",\"<\/tbody><\/table>\"],td:[3,\"<table><tbody><tr>\",\"<\/tr><\/tbody><\/table>\"],_default:[0,\"\",\"\"]};function Se(e,t){var n;return n=\"undefined\"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||\"*\"):\"undefined\"!=typeof e.querySelectorAll?e.querySelectorAll(t||\"*\"):[],void 0===t||t&&fe(e,t)?ce.merge([e],n):n}function Ee(e,t){for(var n=0,r=e.length;n<r;n++)_.set(e[n],\"globalEval\",!t||_.get(t[n],\"globalEval\"))}ke.tbody=ke.tfoot=ke.colgroup=ke.caption=ke.thead,ke.th=ke.td,le.option||(ke.optgroup=ke.option=[1,\"<select multiple='multiple'>\",\"<\/select>\"]);var je=\/<|&#?\\w+;\/;function Ae(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if(\"object\"===x(o))ce.merge(p,o.nodeType?[o]:o);else if(je.test(o)){a=a||f.appendChild(t.createElement(\"div\")),s=(Te.exec(o)||[\"\",\"\"])[1].toLowerCase(),u=ke[s]||ke._default,a.innerHTML=u[1]+ce.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;ce.merge(p,a.childNodes),(a=f.firstChild).textContent=\"\"}else p.push(t.createTextNode(o));f.textContent=\"\",d=0;while(o=p[d++])if(r&&-1<ce.inArray(o,r))i&&i.push(o);else if(l=K(o),a=Se(f.appendChild(o),\"script\"),l&&Ee(a),n){c=0;while(o=a[c++])Ce.test(o.type||\"\")&&n.push(o)}return f}var De=\/^([^.]*)(?:\\.(.+)|)\/;function Ne(){return!0}function qe(){return!1}function Le(e,t,n,r,i,o){var a,s;if(\"object\"==typeof t){for(s in\"string\"!=typeof n&&(r=r||n,n=void 0),t)Le(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&(\"string\"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=qe;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return ce().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=ce.guid++)),e.each(function(){ce.event.add(this,t,i,r,n)})}function He(e,r,t){t?(_.set(e,r,!1),ce.event.add(e,r,{namespace:!1,handler:function(e){var t,n=_.get(this,r);if(1&e.isTrigger&&this[r]){if(n)(ce.event.special[r]||{}).delegateType&&e.stopPropagation();else if(n=ae.call(arguments),_.set(this,r,n),this[r](),t=_.get(this,r),_.set(this,r,!1),n!==t)return e.stopImmediatePropagation(),e.preventDefault(),t}else n&&(_.set(this,r,ce.event.trigger(n[0],n.slice(1),this)),e.stopPropagation(),e.isImmediatePropagationStopped=Ne)}})):void 0===_.get(e,r)&&ce.event.add(e,r,Ne)}ce.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=_.get(t);if($(t)){n.handler&&(n=(o=n).handler,i=o.selector),i&&ce.find.matchesSelector(J,i),n.guid||(n.guid=ce.guid++),(u=v.events)||(u=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(e){return\"undefined\"!=typeof ce&&ce.event.triggered!==e.type?ce.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||\"\").match(D)||[\"\"]).length;while(l--)d=g=(s=De.exec(e[l])||[])[1],h=(s[2]||\"\").split(\".\").sort(),d&&(f=ce.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=ce.event.special[d]||{},c=ce.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&ce.expr.match.needsContext.test(i),namespace:h.join(\".\")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),ce.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=_.hasData(e)&&_.get(e);if(v&&(u=v.events)){l=(t=(t||\"\").match(D)||[\"\"]).length;while(l--)if(d=g=(s=De.exec(t[l])||[])[1],h=(s[2]||\"\").split(\".\").sort(),d){f=ce.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp(\"(^|\\\\.)\"+h.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&(\"**\"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||ce.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)ce.event.remove(e,d+t[l],n,r,!0);ce.isEmptyObject(u)&&_.remove(e,\"handle events\")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=ce.event.fix(e),l=(_.get(this,\"events\")||Object.create(null))[u.type]||[],c=ce.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){a=ce.event.handlers.call(this,u,l),t=0;while((i=a[t++])&&!u.isPropagationStopped()){u.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!u.isImmediatePropagationStopped())u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((ce.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!(\"click\"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(\"click\"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+\" \"]&&(a[i]=r.needsContext?-1<ce(i,this).index(l):ce.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(ce.Event.prototype,t,{enumerable:!0,configurable:!0,get:v(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[ce.expando]?e:new ce.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return we.test(t.type)&&t.click&&fe(t,\"input\")&&He(t,\"click\",!0),!1},trigger:function(e){var t=this||e;return we.test(t.type)&&t.click&&fe(t,\"input\")&&He(t,\"click\"),!0},_default:function(e){var t=e.target;return we.test(t.type)&&t.click&&fe(t,\"input\")&&_.get(t,\"click\")||fe(t,\"a\")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},ce.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},ce.Event=function(e,t){if(!(this instanceof ce.Event))return new ce.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ne:qe,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&ce.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[ce.expando]=!0},ce.Event.prototype={constructor:ce.Event,isDefaultPrevented:qe,isPropagationStopped:qe,isImmediatePropagationStopped:qe,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ne,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ne,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ne,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},ce.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,\"char\":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},ce.event.addProp),ce.each({focus:\"focusin\",blur:\"focusout\"},function(r,i){function o(e){if(C.documentMode){var t=_.get(this,\"handle\"),n=ce.event.fix(e);n.type=\"focusin\"===e.type?\"focus\":\"blur\",n.isSimulated=!0,t(e),n.target===n.currentTarget&&t(n)}else ce.event.simulate(i,e.target,ce.event.fix(e))}ce.event.special[r]={setup:function(){var e;if(He(this,r,!0),!C.documentMode)return!1;(e=_.get(this,i))||this.addEventListener(i,o),_.set(this,i,(e||0)+1)},trigger:function(){return He(this,r),!0},teardown:function(){var e;if(!C.documentMode)return!1;(e=_.get(this,i)-1)?_.set(this,i,e):(this.removeEventListener(i,o),_.remove(this,i))},_default:function(e){return _.get(e.target,r)},delegateType:i},ce.event.special[i]={setup:function(){var e=this.ownerDocument||this.document||this,t=C.documentMode?this:e,n=_.get(t,i);n||(C.documentMode?this.addEventListener(i,o):e.addEventListener(r,o,!0)),_.set(t,i,(n||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=C.documentMode?this:e,n=_.get(t,i)-1;n?_.set(t,i,n):(C.documentMode?this.removeEventListener(i,o):e.removeEventListener(r,o,!0),_.remove(t,i))}}}),ce.each({mouseenter:\"mouseover\",mouseleave:\"mouseout\",pointerenter:\"pointerover\",pointerleave:\"pointerout\"},function(e,i){ce.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||ce.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),ce.fn.extend({on:function(e,t,n,r){return Le(this,e,t,n,r)},one:function(e,t,n,r){return Le(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,ce(e.delegateTarget).off(r.namespace?r.origType+\".\"+r.namespace:r.origType,r.selector,r.handler),this;if(\"object\"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&\"function\"!=typeof t||(n=t,t=void 0),!1===n&&(n=qe),this.each(function(){ce.event.remove(this,e,n,t)})}});var Oe=\/<script|<style|<link\/i,Pe=\/checked\\s*(?:[^=]|=\\s*.checked.)\/i,Me=\/^\\s*<!\\[CDATA\\[|\\]\\]>\\s*$\/g;function Re(e,t){return fe(e,\"table\")&&fe(11!==t.nodeType?t:t.firstChild,\"tr\")&&ce(e).children(\"tbody\")[0]||e}function Ie(e){return e.type=(null!==e.getAttribute(\"type\"))+\"\/\"+e.type,e}function We(e){return\"true\/\"===(e.type||\"\").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute(\"type\"),e}function Fe(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(_.hasData(e)&&(s=_.get(e).events))for(i in _.remove(t,\"handle events\"),s)for(n=0,r=s[i].length;n<r;n++)ce.event.add(t,i,s[i][n]);z.hasData(e)&&(o=z.access(e),a=ce.extend({},o),z.set(t,a))}}function $e(n,r,i,o){r=g(r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=v(d);if(h||1<f&&\"string\"==typeof d&&!le.checkClone&&Pe.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),$e(t,r,i,o)});if(f&&(t=(e=Ae(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=ce.map(Se(e,\"script\"),Ie)).length;c<f;c++)u=e,c!==p&&(u=ce.clone(u,!0,!0),s&&ce.merge(a,Se(u,\"script\"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,ce.map(a,We),c=0;c<s;c++)u=a[c],Ce.test(u.type||\"\")&&!_.access(u,\"globalEval\")&&ce.contains(l,u)&&(u.src&&\"module\"!==(u.type||\"\").toLowerCase()?ce._evalUrl&&!u.noModule&&ce._evalUrl(u.src,{nonce:u.nonce||u.getAttribute(\"nonce\")},l):m(u.textContent.replace(Me,\"\"),u,l))}return n}function Be(e,t,n){for(var r,i=t?ce.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||ce.cleanData(Se(r)),r.parentNode&&(n&&K(r)&&Ee(Se(r,\"script\")),r.parentNode.removeChild(r));return e}ce.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=K(e);if(!(le.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ce.isXMLDoc(e)))for(a=Se(c),r=0,i=(o=Se(e)).length;r<i;r++)s=o[r],u=a[r],void 0,\"input\"===(l=u.nodeName.toLowerCase())&&we.test(s.type)?u.checked=s.checked:\"input\"!==l&&\"textarea\"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||Se(e),a=a||Se(c),r=0,i=o.length;r<i;r++)Fe(o[r],a[r]);else Fe(e,c);return 0<(a=Se(c,\"script\")).length&&Ee(a,!f&&Se(e,\"script\")),c},cleanData:function(e){for(var t,n,r,i=ce.event.special,o=0;void 0!==(n=e[o]);o++)if($(n)){if(t=n[_.expando]){if(t.events)for(r in t.events)i[r]?ce.event.remove(n,r):ce.removeEvent(n,r,t.handle);n[_.expando]=void 0}n[z.expando]&&(n[z.expando]=void 0)}}}),ce.fn.extend({detach:function(e){return Be(this,e,!0)},remove:function(e){return Be(this,e)},text:function(e){return M(this,function(e){return void 0===e?ce.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return $e(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Re(this,e).appendChild(e)})},prepend:function(){return $e(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Re(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return $e(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return $e(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(ce.cleanData(Se(e,!1)),e.textContent=\"\");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ce.clone(this,e,t)})},html:function(e){return M(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if(\"string\"==typeof e&&!Oe.test(e)&&!ke[(Te.exec(e)||[\"\",\"\"])[1].toLowerCase()]){e=ce.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(ce.cleanData(Se(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return $e(this,arguments,function(e){var t=this.parentNode;ce.inArray(this,n)<0&&(ce.cleanData(Se(this)),t&&t.replaceChild(e,this))},n)}}),ce.each({appendTo:\"append\",prependTo:\"prepend\",insertBefore:\"before\",insertAfter:\"after\",replaceAll:\"replaceWith\"},function(e,a){ce.fn[e]=function(e){for(var t,n=[],r=ce(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),ce(r[o])[a](t),s.apply(n,t.get());return this.pushStack(n)}});var _e=new RegExp(\"^(\"+G+\")(?!px)[a-z%]+$\",\"i\"),ze=\/^--\/,Xe=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=ie),t.getComputedStyle(e)},Ue=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},Ve=new RegExp(Q.join(\"|\"),\"i\");function Ge(e,t,n){var r,i,o,a,s=ze.test(t),u=e.style;return(n=n||Xe(e))&&(a=n.getPropertyValue(t)||n[t],s&&a&&(a=a.replace(ve,\"$1\")||void 0),\"\"!==a||K(e)||(a=ce.style(e,t)),!le.pixelBoxStyles()&&_e.test(a)&&Ve.test(t)&&(r=u.width,i=u.minWidth,o=u.maxWidth,u.minWidth=u.maxWidth=u.width=a,a=n.width,u.width=r,u.minWidth=i,u.maxWidth=o)),void 0!==a?a+\"\":a}function Ye(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText=\"position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0\",l.style.cssText=\"position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%\",J.appendChild(u).appendChild(l);var e=ie.getComputedStyle(l);n=\"1%\"!==e.top,s=12===t(e.marginLeft),l.style.right=\"60%\",o=36===t(e.right),r=36===t(e.width),l.style.position=\"absolute\",i=12===t(l.offsetWidth\/3),J.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s,u=C.createElement(\"div\"),l=C.createElement(\"div\");l.style&&(l.style.backgroundClip=\"content-box\",l.cloneNode(!0).style.backgroundClip=\"\",le.clearCloneStyle=\"content-box\"===l.style.backgroundClip,ce.extend(le,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=C.createElement(\"table\"),t=C.createElement(\"tr\"),n=C.createElement(\"div\"),e.style.cssText=\"position:absolute;left:-11111px;border-collapse:separate\",t.style.cssText=\"box-sizing:content-box;border:1px solid\",t.style.height=\"1px\",n.style.height=\"9px\",n.style.display=\"block\",J.appendChild(e).appendChild(t).appendChild(n),r=ie.getComputedStyle(t),a=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===t.offsetHeight,J.removeChild(e)),a}}))}();var Qe=[\"Webkit\",\"Moz\",\"ms\"],Je=C.createElement(\"div\").style,Ke={};function Ze(e){var t=ce.cssProps[e]||Ke[e];return t||(e in Je?e:Ke[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=Qe.length;while(n--)if((e=Qe[n]+t)in Je)return e}(e)||e)}var et=\/^(none|table(?!-c[ea]).+)\/,tt={position:\"absolute\",visibility:\"hidden\",display:\"block\"},nt={letterSpacing:\"0\",fontWeight:\"400\"};function rt(e,t,n){var r=Y.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||\"px\"):t}function it(e,t,n,r,i,o){var a=\"width\"===t?1:0,s=0,u=0,l=0;if(n===(r?\"border\":\"content\"))return 0;for(;a<4;a+=2)\"margin\"===n&&(l+=ce.css(e,n+Q[a],!0,i)),r?(\"content\"===n&&(u-=ce.css(e,\"padding\"+Q[a],!0,i)),\"margin\"!==n&&(u-=ce.css(e,\"border\"+Q[a]+\"Width\",!0,i))):(u+=ce.css(e,\"padding\"+Q[a],!0,i),\"padding\"!==n?u+=ce.css(e,\"border\"+Q[a]+\"Width\",!0,i):s+=ce.css(e,\"border\"+Q[a]+\"Width\",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e[\"offset\"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u+l}function ot(e,t,n){var r=Xe(e),i=(!le.boxSizingReliable()||n)&&\"border-box\"===ce.css(e,\"boxSizing\",!1,r),o=i,a=Ge(e,t,r),s=\"offset\"+t[0].toUpperCase()+t.slice(1);if(_e.test(a)){if(!n)return a;a=\"auto\"}return(!le.boxSizingReliable()&&i||!le.reliableTrDimensions()&&fe(e,\"tr\")||\"auto\"===a||!parseFloat(a)&&\"inline\"===ce.css(e,\"display\",!1,r))&&e.getClientRects().length&&(i=\"border-box\"===ce.css(e,\"boxSizing\",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+it(e,t,n||(i?\"border\":\"content\"),o,r,a)+\"px\"}function at(e,t,n,r,i){return new at.prototype.init(e,t,n,r,i)}ce.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ge(e,\"opacity\");return\"\"===n?\"1\":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=F(t),u=ze.test(t),l=e.style;if(u||(t=Ze(s)),a=ce.cssHooks[t]||ce.cssHooks[s],void 0===n)return a&&\"get\"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];\"string\"===(o=typeof n)&&(i=Y.exec(n))&&i[1]&&(n=te(e,t,i),o=\"number\"),null!=n&&n==n&&(\"number\"!==o||u||(n+=i&&i[3]||(ce.cssNumber[s]?\"\":\"px\")),le.clearCloneStyle||\"\"!==n||0!==t.indexOf(\"background\")||(l[t]=\"inherit\"),a&&\"set\"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=F(t);return ze.test(t)||(t=Ze(s)),(a=ce.cssHooks[t]||ce.cssHooks[s])&&\"get\"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Ge(e,t,r)),\"normal\"===i&&t in nt&&(i=nt[t]),\"\"===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),ce.each([\"height\",\"width\"],function(e,u){ce.cssHooks[u]={get:function(e,t,n){if(t)return!et.test(ce.css(e,\"display\"))||e.getClientRects().length&&e.getBoundingClientRect().width?ot(e,u,n):Ue(e,tt,function(){return ot(e,u,n)})},set:function(e,t,n){var r,i=Xe(e),o=!le.scrollboxSize()&&\"absolute\"===i.position,a=(o||n)&&\"border-box\"===ce.css(e,\"boxSizing\",!1,i),s=n?it(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e[\"offset\"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-it(e,u,\"border\",!1,i)-.5)),s&&(r=Y.exec(t))&&\"px\"!==(r[3]||\"px\")&&(e.style[u]=t,t=ce.css(e,u)),rt(0,t,s)}}}),ce.cssHooks.marginLeft=Ye(le.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Ge(e,\"marginLeft\"))||e.getBoundingClientRect().left-Ue(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+\"px\"}),ce.each({margin:\"\",padding:\"\",border:\"Width\"},function(i,o){ce.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r=\"string\"==typeof e?e.split(\" \"):[e];t<4;t++)n[i+Q[t]+o]=r[t]||r[t-2]||r[0];return n}},\"margin\"!==i&&(ce.cssHooks[i+o].set=rt)}),ce.fn.extend({css:function(e,t){return M(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Xe(e),i=t.length;a<i;a++)o[t[a]]=ce.css(e,t[a],!1,r);return o}return void 0!==n?ce.style(e,t,n):ce.css(e,t)},e,t,1<arguments.length)}}),((ce.Tween=at).prototype={constructor:at,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||ce.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(ce.cssNumber[n]?\"\":\"px\")},cur:function(){var e=at.propHooks[this.prop];return e&&e.get?e.get(this):at.propHooks._default.get(this)},run:function(e){var t,n=at.propHooks[this.prop];return this.options.duration?this.pos=t=ce.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):at.propHooks._default.set(this),this}}).init.prototype=at.prototype,(at.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=ce.css(e.elem,e.prop,\"\"))&&\"auto\"!==t?t:0},set:function(e){ce.fx.step[e.prop]?ce.fx.step[e.prop](e):1!==e.elem.nodeType||!ce.cssHooks[e.prop]&&null==e.elem.style[Ze(e.prop)]?e.elem[e.prop]=e.now:ce.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=at.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ce.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)\/2},_default:\"swing\"},ce.fx=at.prototype.init,ce.fx.step={};var st,ut,lt,ct,ft=\/^(?:toggle|show|hide)$\/,pt=\/queueHooks$\/;function dt(){ut&&(!1===C.hidden&&ie.requestAnimationFrame?ie.requestAnimationFrame(dt):ie.setTimeout(dt,ce.fx.interval),ce.fx.tick())}function ht(){return ie.setTimeout(function(){st=void 0}),st=Date.now()}function gt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i[\"margin\"+(n=Q[r])]=i[\"padding\"+n]=e;return t&&(i.opacity=i.width=e),i}function vt(e,t,n){for(var r,i=(yt.tweeners[t]||[]).concat(yt.tweeners[\"*\"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function yt(o,e,t){var n,a,r=0,i=yt.prefilters.length,s=ce.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=st||ht(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t\/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:ce.extend({},e),opts:ce.extend(!0,{specialEasing:{},easing:ce.easing._default},t),originalProperties:e,originalOptions:t,startTime:st||ht(),duration:t.duration,tweens:[],createTween:function(e,t){var n=ce.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=F(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=ce.cssHooks[r])&&\"expand\"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=yt.prefilters[r].call(l,o,c,l.opts))return v(n.stop)&&(ce._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return ce.map(c,vt,l),v(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),ce.fx.timer(ce.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}ce.Animation=ce.extend(yt,{tweeners:{\"*\":[function(e,t){var n=this.createTween(e,t);return te(n.elem,e,Y.exec(t),n),n}]},tweener:function(e,t){v(e)?(t=e,e=[\"*\"]):e=e.match(D);for(var n,r=0,i=e.length;r<i;r++)n=e[r],yt.tweeners[n]=yt.tweeners[n]||[],yt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f=\"width\"in t||\"height\"in t,p=this,d={},h=e.style,g=e.nodeType&&ee(e),v=_.get(e,\"fxshow\");for(r in n.queue||(null==(a=ce._queueHooks(e,\"fx\")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,ce.queue(e,\"fx\").length||a.empty.fire()})})),t)if(i=t[r],ft.test(i)){if(delete t[r],o=o||\"toggle\"===i,i===(g?\"hide\":\"show\")){if(\"show\"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||ce.style(e,r)}if((u=!ce.isEmptyObject(t))||!ce.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=_.get(e,\"display\")),\"none\"===(c=ce.css(e,\"display\"))&&(l?c=l:(re([e],!0),l=e.style.display||l,c=ce.css(e,\"display\"),re([e]))),(\"inline\"===c||\"inline-block\"===c&&null!=l)&&\"none\"===ce.css(e,\"float\")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l=\"none\"===c?\"\":c)),h.display=\"inline-block\")),n.overflow&&(h.overflow=\"hidden\",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?\"hidden\"in v&&(g=v.hidden):v=_.access(e,\"fxshow\",{display:l}),o&&(v.hidden=!g),g&&re([e],!0),p.done(function(){for(r in g||re([e]),_.remove(e,\"fxshow\"),d)ce.style(e,r,d[r])})),u=vt(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?yt.prefilters.unshift(e):yt.prefilters.push(e)}}),ce.speed=function(e,t,n){var r=e&&\"object\"==typeof e?ce.extend({},e):{complete:n||!n&&t||v(e)&&e,duration:e,easing:n&&t||t&&!v(t)&&t};return ce.fx.off?r.duration=0:\"number\"!=typeof r.duration&&(r.duration in ce.fx.speeds?r.duration=ce.fx.speeds[r.duration]:r.duration=ce.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue=\"fx\"),r.old=r.complete,r.complete=function(){v(r.old)&&r.old.call(this),r.queue&&ce.dequeue(this,r.queue)},r},ce.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ee).css(\"opacity\",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=ce.isEmptyObject(t),o=ce.speed(e,n,r),a=function(){var e=yt(this,ce.extend({},t),o);(i||_.get(this,\"finish\"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return\"string\"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||\"fx\",[]),this.each(function(){var e=!0,t=null!=i&&i+\"queueHooks\",n=ce.timers,r=_.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&pt.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||ce.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||\"fx\"),this.each(function(){var e,t=_.get(this),n=t[a+\"queue\"],r=t[a+\"queueHooks\"],i=ce.timers,o=n?n.length:0;for(t.finish=!0,ce.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),ce.each([\"toggle\",\"show\",\"hide\"],function(e,r){var i=ce.fn[r];ce.fn[r]=function(e,t,n){return null==e||\"boolean\"==typeof e?i.apply(this,arguments):this.animate(gt(r,!0),e,t,n)}}),ce.each({slideDown:gt(\"show\"),slideUp:gt(\"hide\"),slideToggle:gt(\"toggle\"),fadeIn:{opacity:\"show\"},fadeOut:{opacity:\"hide\"},fadeToggle:{opacity:\"toggle\"}},function(e,r){ce.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),ce.timers=[],ce.fx.tick=function(){var e,t=0,n=ce.timers;for(st=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||ce.fx.stop(),st=void 0},ce.fx.timer=function(e){ce.timers.push(e),ce.fx.start()},ce.fx.interval=13,ce.fx.start=function(){ut||(ut=!0,dt())},ce.fx.stop=function(){ut=null},ce.fx.speeds={slow:600,fast:200,_default:400},ce.fn.delay=function(r,e){return r=ce.fx&&ce.fx.speeds[r]||r,e=e||\"fx\",this.queue(e,function(e,t){var n=ie.setTimeout(e,r);t.stop=function(){ie.clearTimeout(n)}})},lt=C.createElement(\"input\"),ct=C.createElement(\"select\").appendChild(C.createElement(\"option\")),lt.type=\"checkbox\",le.checkOn=\"\"!==lt.value,le.optSelected=ct.selected,(lt=C.createElement(\"input\")).value=\"t\",lt.type=\"radio\",le.radioValue=\"t\"===lt.value;var mt,xt=ce.expr.attrHandle;ce.fn.extend({attr:function(e,t){return M(this,ce.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){ce.removeAttr(this,e)})}}),ce.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return\"undefined\"==typeof e.getAttribute?ce.prop(e,t,n):(1===o&&ce.isXMLDoc(e)||(i=ce.attrHooks[t.toLowerCase()]||(ce.expr.match.bool.test(t)?mt:void 0)),void 0!==n?null===n?void ce.removeAttr(e,t):i&&\"set\"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+\"\"),n):i&&\"get\"in i&&null!==(r=i.get(e,t))?r:null==(r=ce.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!le.radioValue&&\"radio\"===t&&fe(e,\"input\")){var n=e.value;return e.setAttribute(\"type\",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(D);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),mt={set:function(e,t,n){return!1===t?ce.removeAttr(e,n):e.setAttribute(n,n),n}},ce.each(ce.expr.match.bool.source.match(\/\\w+\/g),function(e,t){var a=xt[t]||ce.find.attr;xt[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=xt[o],xt[o]=r,r=null!=a(e,t,n)?o:null,xt[o]=i),r}});var bt=\/^(?:input|select|textarea|button)$\/i,wt=\/^(?:a|area)$\/i;function Tt(e){return(e.match(D)||[]).join(\" \")}function Ct(e){return e.getAttribute&&e.getAttribute(\"class\")||\"\"}function kt(e){return Array.isArray(e)?e:\"string\"==typeof e&&e.match(D)||[]}ce.fn.extend({prop:function(e,t){return M(this,ce.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[ce.propFix[e]||e]})}}),ce.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&ce.isXMLDoc(e)||(t=ce.propFix[t]||t,i=ce.propHooks[t]),void 0!==n?i&&\"set\"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&\"get\"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=ce.find.attr(e,\"tabindex\");return t?parseInt(t,10):bt.test(e.nodeName)||wt.test(e.nodeName)&&e.href?0:-1}}},propFix:{\"for\":\"htmlFor\",\"class\":\"className\"}}),le.optSelected||(ce.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),ce.each([\"tabIndex\",\"readOnly\",\"maxLength\",\"cellSpacing\",\"cellPadding\",\"rowSpan\",\"colSpan\",\"useMap\",\"frameBorder\",\"contentEditable\"],function(){ce.propFix[this.toLowerCase()]=this}),ce.fn.extend({addClass:function(t){var e,n,r,i,o,a;return v(t)?this.each(function(e){ce(this).addClass(t.call(this,e,Ct(this)))}):(e=kt(t)).length?this.each(function(){if(r=Ct(this),n=1===this.nodeType&&\" \"+Tt(r)+\" \"){for(o=0;o<e.length;o++)i=e[o],n.indexOf(\" \"+i+\" \")<0&&(n+=i+\" \");a=Tt(n),r!==a&&this.setAttribute(\"class\",a)}}):this},removeClass:function(t){var e,n,r,i,o,a;return v(t)?this.each(function(e){ce(this).removeClass(t.call(this,e,Ct(this)))}):arguments.length?(e=kt(t)).length?this.each(function(){if(r=Ct(this),n=1===this.nodeType&&\" \"+Tt(r)+\" \"){for(o=0;o<e.length;o++){i=e[o];while(-1<n.indexOf(\" \"+i+\" \"))n=n.replace(\" \"+i+\" \",\" \")}a=Tt(n),r!==a&&this.setAttribute(\"class\",a)}}):this:this.attr(\"class\",\"\")},toggleClass:function(t,n){var e,r,i,o,a=typeof t,s=\"string\"===a||Array.isArray(t);return v(t)?this.each(function(e){ce(this).toggleClass(t.call(this,e,Ct(this),n),n)}):\"boolean\"==typeof n&&s?n?this.addClass(t):this.removeClass(t):(e=kt(t),this.each(function(){if(s)for(o=ce(this),i=0;i<e.length;i++)r=e[i],o.hasClass(r)?o.removeClass(r):o.addClass(r);else void 0!==t&&\"boolean\"!==a||((r=Ct(this))&&_.set(this,\"__className__\",r),this.setAttribute&&this.setAttribute(\"class\",r||!1===t?\"\":_.get(this,\"__className__\")||\"\"))}))},hasClass:function(e){var t,n,r=0;t=\" \"+e+\" \";while(n=this[r++])if(1===n.nodeType&&-1<(\" \"+Tt(Ct(n))+\" \").indexOf(t))return!0;return!1}});var St=\/\\r\/g;ce.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=v(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,ce(this).val()):n)?t=\"\":\"number\"==typeof t?t+=\"\":Array.isArray(t)&&(t=ce.map(t,function(e){return null==e?\"\":e+\"\"})),(r=ce.valHooks[this.type]||ce.valHooks[this.nodeName.toLowerCase()])&&\"set\"in r&&void 0!==r.set(this,t,\"value\")||(this.value=t))})):t?(r=ce.valHooks[t.type]||ce.valHooks[t.nodeName.toLowerCase()])&&\"get\"in r&&void 0!==(e=r.get(t,\"value\"))?e:\"string\"==typeof(e=t.value)?e.replace(St,\"\"):null==e?\"\":e:void 0}}),ce.extend({valHooks:{option:{get:function(e){var t=ce.find.attr(e,\"value\");return null!=t?t:Tt(ce.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a=\"select-one\"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!fe(n.parentNode,\"optgroup\"))){if(t=ce(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=ce.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<ce.inArray(ce.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),ce.each([\"radio\",\"checkbox\"],function(){ce.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<ce.inArray(ce(e).val(),t)}},le.checkOn||(ce.valHooks[this].get=function(e){return null===e.getAttribute(\"value\")?\"on\":e.value})});var Et=ie.location,jt={guid:Date.now()},At=\/\\?\/;ce.parseXML=function(e){var t,n;if(!e||\"string\"!=typeof e)return null;try{t=(new ie.DOMParser).parseFromString(e,\"text\/xml\")}catch(e){}return n=t&&t.getElementsByTagName(\"parsererror\")[0],t&&!n||ce.error(\"Invalid XML: \"+(n?ce.map(n.childNodes,function(e){return e.textContent}).join(\"\\n\"):e)),t};var Dt=\/^(?:focusinfocus|focusoutblur)$\/,Nt=function(e){e.stopPropagation()};ce.extend(ce.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||C],d=ue.call(e,\"type\")?e.type:e,h=ue.call(e,\"namespace\")?e.namespace.split(\".\"):[];if(o=f=a=n=n||C,3!==n.nodeType&&8!==n.nodeType&&!Dt.test(d+ce.event.triggered)&&(-1<d.indexOf(\".\")&&(d=(h=d.split(\".\")).shift(),h.sort()),u=d.indexOf(\":\")<0&&\"on\"+d,(e=e[ce.expando]?e:new ce.Event(d,\"object\"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join(\".\"),e.rnamespace=e.namespace?new RegExp(\"(^|\\\\.)\"+h.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:ce.makeArray(t,[e]),c=ce.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!y(n)){for(s=c.delegateType||d,Dt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||C)&&p.push(a.defaultView||a.parentWindow||ie)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(_.get(o,\"events\")||Object.create(null))[e.type]&&_.get(o,\"handle\"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&$(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!$(n)||u&&v(n[d])&&!y(n)&&((a=n[u])&&(n[u]=null),ce.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,Nt),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,Nt),ce.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=ce.extend(new ce.Event,n,{type:e,isSimulated:!0});ce.event.trigger(r,null,t)}}),ce.fn.extend({trigger:function(e,t){return this.each(function(){ce.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return ce.event.trigger(e,t,n,!0)}});var qt=\/\\[\\]$\/,Lt=\/\\r?\\n\/g,Ht=\/^(?:submit|button|image|reset|file)$\/i,Ot=\/^(?:input|select|textarea|keygen)\/i;function Pt(n,e,r,i){var t;if(Array.isArray(e))ce.each(e,function(e,t){r||qt.test(n)?i(n,t):Pt(n+\"[\"+(\"object\"==typeof t&&null!=t?e:\"\")+\"]\",t,r,i)});else if(r||\"object\"!==x(e))i(n,e);else for(t in e)Pt(n+\"[\"+t+\"]\",e[t],r,i)}ce.param=function(e,t){var n,r=[],i=function(e,t){var n=v(t)?t():t;r[r.length]=encodeURIComponent(e)+\"=\"+encodeURIComponent(null==n?\"\":n)};if(null==e)return\"\";if(Array.isArray(e)||e.jquery&&!ce.isPlainObject(e))ce.each(e,function(){i(this.name,this.value)});else for(n in e)Pt(n,e[n],t,i);return r.join(\"&\")},ce.fn.extend({serialize:function(){return ce.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ce.prop(this,\"elements\");return e?ce.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ce(this).is(\":disabled\")&&Ot.test(this.nodeName)&&!Ht.test(e)&&(this.checked||!we.test(e))}).map(function(e,t){var n=ce(this).val();return null==n?null:Array.isArray(n)?ce.map(n,function(e){return{name:t.name,value:e.replace(Lt,\"\\r\\n\")}}):{name:t.name,value:n.replace(Lt,\"\\r\\n\")}}).get()}});var Mt=\/%20\/g,Rt=\/#.*$\/,It=\/([?&])_=[^&]*\/,Wt=\/^(.*?):[ \\t]*([^\\r\\n]*)$\/gm,Ft=\/^(?:GET|HEAD)$\/,$t=\/^\\\/\\\/\/,Bt={},_t={},zt=\"*\/\".concat(\"*\"),Xt=C.createElement(\"a\");function Ut(o){return function(e,t){\"string\"!=typeof e&&(t=e,e=\"*\");var n,r=0,i=e.toLowerCase().match(D)||[];if(v(t))while(n=i[r++])\"+\"===n[0]?(n=n.slice(1)||\"*\",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Vt(t,i,o,a){var s={},u=t===_t;function l(e){var r;return s[e]=!0,ce.each(t[e]||[],function(e,t){var n=t(i,o,a);return\"string\"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s[\"*\"]&&l(\"*\")}function Gt(e,t){var n,r,i=ce.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&ce.extend(!0,e,r),e}Xt.href=Et.href,ce.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Et.href,type:\"GET\",isLocal:\/^(?:about|app|app-storage|.+-extension|file|res|widget):$\/.test(Et.protocol),global:!0,processData:!0,async:!0,contentType:\"application\/x-www-form-urlencoded; charset=UTF-8\",accepts:{\"*\":zt,text:\"text\/plain\",html:\"text\/html\",xml:\"application\/xml, text\/xml\",json:\"application\/json, text\/javascript\"},contents:{xml:\/\\bxml\\b\/,html:\/\\bhtml\/,json:\/\\bjson\\b\/},responseFields:{xml:\"responseXML\",text:\"responseText\",json:\"responseJSON\"},converters:{\"* text\":String,\"text html\":!0,\"text json\":JSON.parse,\"text xml\":ce.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Gt(Gt(e,ce.ajaxSettings),t):Gt(ce.ajaxSettings,e)},ajaxPrefilter:Ut(Bt),ajaxTransport:Ut(_t),ajax:function(e,t){\"object\"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=ce.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?ce(y):ce.event,x=ce.Deferred(),b=ce.Callbacks(\"once memory\"),w=v.statusCode||{},a={},s={},u=\"canceled\",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=Wt.exec(p))n[t[1].toLowerCase()+\" \"]=(n[t[1].toLowerCase()+\" \"]||[]).concat(t[2])}t=n[e.toLowerCase()+\" \"]}return null==t?null:t.join(\", \")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||Et.href)+\"\").replace($t,Et.protocol+\"\/\/\"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||\"*\").toLowerCase().match(D)||[\"\"],null==v.crossDomain){r=C.createElement(\"a\");try{r.href=v.url,r.href=r.href,v.crossDomain=Xt.protocol+\"\/\/\"+Xt.host!=r.protocol+\"\/\/\"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&\"string\"!=typeof v.data&&(v.data=ce.param(v.data,v.traditional)),Vt(Bt,v,t,T),h)return T;for(i in(g=ce.event&&v.global)&&0==ce.active++&&ce.event.trigger(\"ajaxStart\"),v.type=v.type.toUpperCase(),v.hasContent=!Ft.test(v.type),f=v.url.replace(Rt,\"\"),v.hasContent?v.data&&v.processData&&0===(v.contentType||\"\").indexOf(\"application\/x-www-form-urlencoded\")&&(v.data=v.data.replace(Mt,\"+\")):(o=v.url.slice(f.length),v.data&&(v.processData||\"string\"==typeof v.data)&&(f+=(At.test(f)?\"&\":\"?\")+v.data,delete v.data),!1===v.cache&&(f=f.replace(It,\"$1\"),o=(At.test(f)?\"&\":\"?\")+\"_=\"+jt.guid+++o),v.url=f+o),v.ifModified&&(ce.lastModified[f]&&T.setRequestHeader(\"If-Modified-Since\",ce.lastModified[f]),ce.etag[f]&&T.setRequestHeader(\"If-None-Match\",ce.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader(\"Content-Type\",v.contentType),T.setRequestHeader(\"Accept\",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+(\"*\"!==v.dataTypes[0]?\", \"+zt+\"; q=0.01\":\"\"):v.accepts[\"*\"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u=\"abort\",b.add(v.complete),T.done(v.success),T.fail(v.error),c=Vt(_t,v,t,T)){if(T.readyState=1,g&&m.trigger(\"ajaxSend\",[T,v]),h)return T;v.async&&0<v.timeout&&(d=ie.setTimeout(function(){T.abort(\"timeout\")},v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,\"No Transport\");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&ie.clearTimeout(d),c=void 0,p=r||\"\",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while(\"*\"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader(\"Content-Type\"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+\" \"+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),!i&&-1<ce.inArray(\"script\",v.dataTypes)&&ce.inArray(\"json\",v.dataTypes)<0&&(v.converters[\"text script\"]=function(){}),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if(\"*\"===o)o=u;else if(\"*\"!==u&&u!==o){if(!(a=l[u+\" \"+o]||l[\"* \"+o]))for(i in l)if((s=i.split(\" \"))[1]===o&&(a=l[u+\" \"+s[0]]||l[\"* \"+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e[\"throws\"])t=a(t);else try{t=a(t)}catch(e){return{state:\"parsererror\",error:a?e:\"No conversion from \"+u+\" to \"+o}}}return{state:\"success\",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader(\"Last-Modified\"))&&(ce.lastModified[f]=u),(u=T.getResponseHeader(\"etag\"))&&(ce.etag[f]=u)),204===e||\"HEAD\"===v.type?l=\"nocontent\":304===e?l=\"notmodified\":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l=\"error\",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+\"\",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?\"ajaxSuccess\":\"ajaxError\",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger(\"ajaxComplete\",[T,v]),--ce.active||ce.event.trigger(\"ajaxStop\")))}return T},getJSON:function(e,t,n){return ce.get(e,t,n,\"json\")},getScript:function(e,t){return ce.get(e,void 0,t,\"script\")}}),ce.each([\"get\",\"post\"],function(e,i){ce[i]=function(e,t,n,r){return v(t)&&(r=r||n,n=t,t=void 0),ce.ajax(ce.extend({url:e,type:i,dataType:r,data:t,success:n},ce.isPlainObject(e)&&e))}}),ce.ajaxPrefilter(function(e){var t;for(t in e.headers)\"content-type\"===t.toLowerCase()&&(e.contentType=e.headers[t]||\"\")}),ce._evalUrl=function(e,t,n){return ce.ajax({url:e,type:\"GET\",dataType:\"script\",cache:!0,async:!1,global:!1,converters:{\"text script\":function(){}},dataFilter:function(e){ce.globalEval(e,t,n)}})},ce.fn.extend({wrapAll:function(e){var t;return this[0]&&(v(e)&&(e=e.call(this[0])),t=ce(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return v(n)?this.each(function(e){ce(this).wrapInner(n.call(this,e))}):this.each(function(){var e=ce(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=v(t);return this.each(function(e){ce(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not(\"body\").each(function(){ce(this).replaceWith(this.childNodes)}),this}}),ce.expr.pseudos.hidden=function(e){return!ce.expr.pseudos.visible(e)},ce.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},ce.ajaxSettings.xhr=function(){try{return new ie.XMLHttpRequest}catch(e){}};var Yt={0:200,1223:204},Qt=ce.ajaxSettings.xhr();le.cors=!!Qt&&\"withCredentials\"in Qt,le.ajax=Qt=!!Qt,ce.ajaxTransport(function(i){var o,a;if(le.cors||Qt&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e[\"X-Requested-With\"]||(e[\"X-Requested-With\"]=\"XMLHttpRequest\"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,\"abort\"===e?r.abort():\"error\"===e?\"number\"!=typeof r.status?t(0,\"error\"):t(r.status,r.statusText):t(Yt[r.status]||r.status,r.statusText,\"text\"!==(r.responseType||\"text\")||\"string\"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o(\"error\"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&ie.setTimeout(function(){o&&a()})},o=o(\"abort\");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),ce.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),ce.ajaxSetup({accepts:{script:\"text\/javascript, application\/javascript, application\/ecmascript, application\/x-ecmascript\"},contents:{script:\/\\b(?:java|ecma)script\\b\/},converters:{\"text script\":function(e){return ce.globalEval(e),e}}}),ce.ajaxPrefilter(\"script\",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type=\"GET\")}),ce.ajaxTransport(\"script\",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=ce(\"<script>\").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on(\"load error\",i=function(e){r.remove(),i=null,e&&t(\"error\"===e.type?404:200,e.type)}),C.head.appendChild(r[0])},abort:function(){i&&i()}}});var Jt,Kt=[],Zt=\/(=)\\?(?=&|$)|\\?\\?\/;ce.ajaxSetup({jsonp:\"callback\",jsonpCallback:function(){var e=Kt.pop()||ce.expando+\"_\"+jt.guid++;return this[e]=!0,e}}),ce.ajaxPrefilter(\"json jsonp\",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Zt.test(e.url)?\"url\":\"string\"==typeof e.data&&0===(e.contentType||\"\").indexOf(\"application\/x-www-form-urlencoded\")&&Zt.test(e.data)&&\"data\");if(a||\"jsonp\"===e.dataTypes[0])return r=e.jsonpCallback=v(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Zt,\"$1\"+r):!1!==e.jsonp&&(e.url+=(At.test(e.url)?\"&\":\"?\")+e.jsonp+\"=\"+r),e.converters[\"script json\"]=function(){return o||ce.error(r+\" was not called\"),o[0]},e.dataTypes[0]=\"json\",i=ie[r],ie[r]=function(){o=arguments},n.always(function(){void 0===i?ce(ie).removeProp(r):ie[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Kt.push(r)),o&&v(i)&&i(o[0]),o=i=void 0}),\"script\"}),le.createHTMLDocument=((Jt=C.implementation.createHTMLDocument(\"\").body).innerHTML=\"<form><\/form><form><\/form>\",2===Jt.childNodes.length),ce.parseHTML=function(e,t,n){return\"string\"!=typeof e?[]:(\"boolean\"==typeof t&&(n=t,t=!1),t||(le.createHTMLDocument?((r=(t=C.implementation.createHTMLDocument(\"\")).createElement(\"base\")).href=C.location.href,t.head.appendChild(r)):t=C),o=!n&&[],(i=w.exec(e))?[t.createElement(i[1])]:(i=Ae([e],t,o),o&&o.length&&ce(o).remove(),ce.merge([],i.childNodes)));var r,i,o},ce.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(\" \");return-1<s&&(r=Tt(e.slice(s)),e=e.slice(0,s)),v(t)?(n=t,t=void 0):t&&\"object\"==typeof t&&(i=\"POST\"),0<a.length&&ce.ajax({url:e,type:i||\"GET\",dataType:\"html\",data:t}).done(function(e){o=arguments,a.html(r?ce(\"<div>\").append(ce.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},ce.expr.pseudos.animated=function(t){return ce.grep(ce.timers,function(e){return t===e.elem}).length},ce.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=ce.css(e,\"position\"),c=ce(e),f={};\"static\"===l&&(e.style.position=\"relative\"),s=c.offset(),o=ce.css(e,\"top\"),u=ce.css(e,\"left\"),(\"absolute\"===l||\"fixed\"===l)&&-1<(o+u).indexOf(\"auto\")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),v(t)&&(t=t.call(e,n,ce.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),\"using\"in t?t.using.call(e,f):c.css(f)}},ce.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){ce.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if(\"fixed\"===ce.css(r,\"position\"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&\"static\"===ce.css(e,\"position\"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=ce(e).offset()).top+=ce.css(e,\"borderTopWidth\",!0),i.left+=ce.css(e,\"borderLeftWidth\",!0))}return{top:t.top-i.top-ce.css(r,\"marginTop\",!0),left:t.left-i.left-ce.css(r,\"marginLeft\",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&\"static\"===ce.css(e,\"position\"))e=e.offsetParent;return e||J})}}),ce.each({scrollLeft:\"pageXOffset\",scrollTop:\"pageYOffset\"},function(t,i){var o=\"pageYOffset\"===i;ce.fn[t]=function(e){return M(this,function(e,t,n){var r;if(y(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),ce.each([\"top\",\"left\"],function(e,n){ce.cssHooks[n]=Ye(le.pixelPosition,function(e,t){if(t)return t=Ge(e,n),_e.test(t)?ce(e).position()[n]+\"px\":t})}),ce.each({Height:\"height\",Width:\"width\"},function(a,s){ce.each({padding:\"inner\"+a,content:s,\"\":\"outer\"+a},function(r,o){ce.fn[o]=function(e,t){var n=arguments.length&&(r||\"boolean\"!=typeof e),i=r||(!0===e||!0===t?\"margin\":\"border\");return M(this,function(e,t,n){var r;return y(e)?0===o.indexOf(\"outer\")?e[\"inner\"+a]:e.document.documentElement[\"client\"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body[\"scroll\"+a],r[\"scroll\"+a],e.body[\"offset\"+a],r[\"offset\"+a],r[\"client\"+a])):void 0===n?ce.css(e,t,i):ce.style(e,t,n,i)},s,n?e:void 0,n)}})}),ce.each([\"ajaxStart\",\"ajaxStop\",\"ajaxComplete\",\"ajaxError\",\"ajaxSuccess\",\"ajaxSend\"],function(e,t){ce.fn[t]=function(e){return this.on(t,e)}}),ce.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,\"**\"):this.off(t,e||\"**\",n)},hover:function(e,t){return this.on(\"mouseenter\",e).on(\"mouseleave\",t||e)}}),ce.each(\"blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu\".split(\" \"),function(e,n){ce.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}});var en=\/^[\\s\\uFEFF\\xA0]+|([^\\s\\uFEFF\\xA0])[\\s\\uFEFF\\xA0]+$\/g;ce.proxy=function(e,t){var n,r,i;if(\"string\"==typeof t&&(n=e[t],t=e,e=n),v(e))return r=ae.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(ae.call(arguments)))}).guid=e.guid=e.guid||ce.guid++,i},ce.holdReady=function(e){e?ce.readyWait++:ce.ready(!0)},ce.isArray=Array.isArray,ce.parseJSON=JSON.parse,ce.nodeName=fe,ce.isFunction=v,ce.isWindow=y,ce.camelCase=F,ce.type=x,ce.now=Date.now,ce.isNumeric=function(e){var t=ce.type(e);return(\"number\"===t||\"string\"===t)&&!isNaN(e-parseFloat(e))},ce.trim=function(e){return null==e?\"\":(e+\"\").replace(en,\"$1\")},\"function\"==typeof define&&define.amd&&define(\"jquery\",[],function(){return ce});var tn=ie.jQuery,nn=ie.$;return ce.noConflict=function(e){return ie.$===ce&&(ie.$=nn),e&&ie.jQuery===ce&&(ie.jQuery=tn),ce},\"undefined\"==typeof e&&(ie.jQuery=ie.$=ce),ce});\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/script-dir\/jquery-3.7.1.min.js","additions":2,"deletions":0,"binary":false,"changes":2,"status":"added"},{"patch":"@@ -104,1 +104,1 @@\n-    public static final DocPath JQUERY_JS = DocPath.create(\"jquery-3.6.1.min.js\");\n+    public static final DocPath JQUERY_JS = DocPath.create(\"jquery-3.7.1.min.js\");\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/util\/DocPaths.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1,1 +1,1 @@\n-## jQuery v3.6.1\n+## jQuery v3.7.1\n@@ -5,1 +5,1 @@\n-jQuery v 3.6.1\n+jQuery v 3.7.1\n@@ -26,46 +26,0 @@\n-\n-******************************************\n-\n-The jQuery JavaScript Library v3.6.1 also includes Sizzle.js\n-\n-Sizzle.js includes the following license:\n-\n-Copyright JS Foundation and other contributors, https:\/\/js.foundation\/\n-\n-This software consists of voluntary contributions made by many\n-individuals. For exact contribution history, see the revision history\n-available at https:\/\/github.com\/jquery\/sizzle\n-\n-The following license applies to all parts of this software except as\n-documented below:\n-\n-====\n-\n-Permission is hereby granted, free of charge, to any person obtaining\n-a copy of this software and associated documentation files (the\n-\"Software\"), to deal in the Software without restriction, including\n-without limitation the rights to use, copy, modify, merge, publish,\n-distribute, sublicense, and\/or sell copies of the Software, and to\n-permit persons to whom the Software is furnished to do so, subject to\n-the following conditions:\n-\n-The above copyright notice and this permission notice shall be\n-included in all copies or substantial portions of the Software.\n-\n-THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n-EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n-MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n-NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n-LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n-OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n-WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n-\n-====\n-\n-All files located in the node_modules and external directories are\n-externally maintained libraries used by this software which have their\n-own licenses; we recommend you read them, as their terms may differ from\n-the terms above.\n-\n-*********************\n-\n","filename":"src\/jdk.javadoc\/share\/legal\/jquery.md","additions":2,"deletions":48,"binary":false,"changes":50,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,0 +26,2 @@\n+#include <dirent.h>\n+#include <errno.h>\n@@ -27,0 +29,1 @@\n+#include <sys\/resource.h>\n@@ -32,0 +35,1 @@\n+#include \"error_messages.h\"\n@@ -47,0 +51,100 @@\n+#if defined(_AIX)\n+  \/* AIX does not understand '\/proc\/self' - it requires the real process ID *\/\n+  #define FD_DIR aix_fd_dir\n+  #define DIR DIR64\n+  #define dirent dirent64\n+  #define opendir opendir64\n+  #define readdir readdir64\n+  #define closedir closedir64\n+#elif defined(_ALLBSD_SOURCE)\n+  #define FD_DIR \"\/dev\/fd\"\n+#else\n+  #define FD_DIR \"\/proc\/self\/fd\"\n+#endif\n+\n+\/\/ Closes every file descriptor that is listed as a directory\n+\/\/ entry in \"\/proc\/self\/fd\" (or its equivalent). Standard\n+\/\/ input\/output\/error file descriptors will not be closed\n+\/\/ by this function. This function returns 0 on failure\n+\/\/ and 1 on success.\n+int\n+closeDescriptors(void)\n+{\n+    DIR *dp;\n+    struct dirent *dirp;\n+    \/* leave out standard input\/output\/error descriptors *\/\n+    int from_fd = STDERR_FILENO + 1;\n+\n+    \/* We're trying to close all file descriptors, but opendir() might\n+     * itself be implemented using a file descriptor, and we certainly\n+     * don't want to close that while it's in use.  We assume that if\n+     * opendir() is implemented using a file descriptor, then it uses\n+     * the lowest numbered file descriptor, just like open().  So\n+     * before calling opendir(), we close a couple explicitly, so that\n+     * opendir() can then use these lowest numbered closed file\n+     * descriptors afresh.   *\/\n+\n+    close(from_fd);          \/* for possible use by opendir() *\/\n+    close(from_fd + 1);      \/* another one for good luck *\/\n+    from_fd += 2; \/* leave out the 2 we just closed, which the opendir() may use *\/\n+\n+#if defined(_AIX)\n+    \/* set FD_DIR for AIX which does not understand '\/proc\/self' - it\n+     * requires the real process ID *\/\n+    char aix_fd_dir[32];     \/* the pid has at most 19 digits *\/\n+    snprintf(aix_fd_dir, 32, \"\/proc\/%d\/fd\", getpid());\n+#endif\n+\n+    if ((dp = opendir(FD_DIR)) == NULL) {\n+        ERROR_MESSAGE((\"failed to open dir %s while determining\"\n+                       \" file descriptors to close for process %d\",\n+                       FD_DIR, getpid()));\n+        return 0; \/\/ failure\n+    }\n+\n+    while ((dirp = readdir(dp)) != NULL) {\n+        if (!isdigit(dirp->d_name[0])) {\n+            continue;\n+        }\n+        const long fd = strtol(dirp->d_name, NULL, 10);\n+        if (fd <= INT_MAX && fd >= from_fd) {\n+            (void)close((int)fd);\n+        }\n+    }\n+\n+    (void)closedir(dp);\n+\n+    return 1; \/\/ success\n+}\n+\n+\/\/ Does necessary housekeeping of a forked child process\n+\/\/ (like closing copied file descriptors) before\n+\/\/ execing the child process. This function never returns.\n+void\n+forkedChildProcess(const char *file, char *const argv[])\n+{\n+    \/* Close all file descriptors that have been copied over\n+     * from the parent process due to fork(). *\/\n+    if (closeDescriptors() == 0) { \/* failed,  close the old way *\/\n+        \/* Find max allowed file descriptors for a process\n+         * and assume all were opened for the parent process and\n+         * copied over to this child process. We close them all. *\/\n+        const rlim_t max_fd = sysconf(_SC_OPEN_MAX);\n+        JDI_ASSERT(max_fd != (rlim_t)-1); \/\/ -1 represents error\n+        \/* close(), that we subsequently call, takes only int values *\/\n+        JDI_ASSERT(max_fd <= INT_MAX);\n+        \/* leave out standard input\/output\/error file descriptors *\/\n+        rlim_t i = STDERR_FILENO + 1;\n+        ERROR_MESSAGE((\"failed to close file descriptors of\"\n+                       \" child process optimally, falling back to closing\"\n+                       \" %d file descriptors sequentially\", (max_fd - i + 1)));\n+        for (; i < max_fd; i++) {\n+            (void)close(i);\n+        }\n+    }\n+\n+    (void)execvp(file, argv); \/* not expected to return *\/\n+\n+    exit(errno); \/* errno will have been set by the failed execvp *\/\n+}\n+\n@@ -96,14 +200,2 @@\n-        \/* Child process *\/\n-        int i;\n-        long max_fd;\n-\n-        \/* close everything *\/\n-        max_fd = sysconf(_SC_OPEN_MAX);\n-        \/*LINTED*\/\n-        for (i = 3; i < (int)max_fd; i++) {\n-            (void)close(i);\n-        }\n-\n-        (void)execvp(argv[0], argv);\n-\n-        exit(-1);\n+        \/\/ manage the child process\n+        forkedChildProcess(argv[0], argv);\n@@ -111,0 +203,2 @@\n+    \/\/ call to forkedChildProcess(...) will never return for a forked process\n+    JDI_ASSERT(pid != 0);\n","filename":"src\/jdk.jdwp.agent\/unix\/native\/libjdwp\/exec_md.c","additions":109,"deletions":15,"binary":false,"changes":124,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -268,1 +268,1 @@\n-        try (var ds = doPrivilegedIOWithReturn(() -> Files.newDirectoryStream(JFC_DIRECTORY.toPath(), \"*.jfc\"))) {\n+        try (var ds = doPrivilegedIOWithReturn(() -> Files.newDirectoryStream(JFC_DIRECTORY.toPath()))) {\n@@ -271,1 +271,2 @@\n-                if (!SecuritySupport.isDirectory(s)) {\n+                String text = s.toString();\n+                if (text.endsWith(\".jfc\") && !SecuritySupport.isDirectory(s)) {\n","filename":"src\/jdk.jfr\/share\/classes\/jdk\/jfr\/internal\/SecuritySupport.java","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -810,0 +810,1 @@\n+      <setting name=\"stackTrace\">true<\/setting>\n","filename":"src\/jdk.jfr\/share\/conf\/jfr\/default.jfc","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -810,0 +810,1 @@\n+      <setting name=\"stackTrace\">true<\/setting>\n","filename":"src\/jdk.jfr\/share\/conf\/jfr\/profile.jfc","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -132,1 +132,3 @@\n-\n+    if ((*env)->ExceptionCheck(env)) {\n+        return;\n+    }\n@@ -141,1 +143,3 @@\n-\n+    if ((*env)->ExceptionCheck(env)) {\n+        return;\n+    }\n@@ -150,1 +154,3 @@\n-\n+    if ((*env)->ExceptionCheck(env)) {\n+        return;\n+    }\n@@ -159,1 +165,3 @@\n-\n+    if ((*env)->ExceptionCheck(env)) {\n+        return;\n+    }\n@@ -168,1 +176,3 @@\n-\n+    if ((*env)->ExceptionCheck(env)) {\n+        return;\n+    }\n@@ -177,1 +187,3 @@\n-\n+    if ((*env)->ExceptionCheck(env)) {\n+        return;\n+    }\n@@ -186,1 +198,3 @@\n-\n+    if ((*env)->ExceptionCheck(env)) {\n+        return;\n+    }\n@@ -195,1 +209,3 @@\n-\n+    if ((*env)->ExceptionCheck(env)) {\n+        return;\n+    }\n@@ -296,0 +312,4 @@\n+    \/\/ Recognise possible Exception from the switch statement above:\n+    if ((*env)->ExceptionCheck(env)) {\n+        return NULL;\n+    }\n","filename":"src\/jdk.management\/share\/native\/libmanagement_ext\/GcInfoBuilder.c","additions":29,"deletions":9,"binary":false,"changes":38,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2009, 2015, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2009, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -22,1 +22,1 @@\n-#  \n+#\n@@ -52,1 +52,1 @@\n-# gnumake 3.78.1 does not accept the *s, \n+# gnumake 3.78.1 does not accept the *s,\n","filename":"src\/utils\/LogCompilation\/Makefile","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -105,0 +105,12 @@\n+\n+TESTING\n+\n+There are a few make targets for testing the failure_handler itself.\n+ - Everything in `test\/failure_handler\/Makefile`\n+ - The `test-failure-handler` target in `make\/RunTests.gmk`\n+ - The `test` target in `make\/test\/BuildFailureHandler.gmk`\n+All of these targets are written for manual testing only. They rely on\n+manual inspection of generated artifacts and cannot be run as part of a CI.\n+They are tests which timeout, crash, fail in various ways and you can check\n+the failure_handler output yourself. They might also leave processes running\n+on your machine so be extra careful about cleaning up.\n","filename":"test\/failure_handler\/README","additions":12,"deletions":0,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -167,1 +167,1 @@\n-        log.printf(\"%s%n[%tF %<tT] %s timeout=%s%n%1$s%n\", line, new Date(), pb.command(), params.timeout);\n+        log.printf(\"%s%n[%tF %<tT] %s timeout=%s in %s%n%1$s%n\", line, new Date(), pb.command(), params.timeout, pb.directory());\n","filename":"test\/failure_handler\/src\/share\/classes\/jdk\/test\/failurehandler\/action\/ActionHelper.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -52,1 +52,2 @@\n-    std::basic_string<char> red  = std::regex_replace(tmp4, std::regex(\"\\\\s+<addr>:\\\\s+hlt[ \\\\t]+(?!\\\\n\\\\s+;;)\"), \"\");\n+    std::basic_string<char> tmp5  = std::regex_replace(tmp4, std::regex(\"\\\\s+<addr>:\\\\s+hlt[ \\\\t]+(?!\\\\n\\\\s+;;)\"), \"\");\n+    std::basic_string<char> red  = std::regex_replace(tmp5, std::regex(\"(\\\\s+<addr>:\\\\s+nop)[ \\\\t]*\"), \"$1\");\n","filename":"test\/hotspot\/gtest\/code\/test_codestrings.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -172,3 +172,3 @@\n-\/\/  tty->print_cr(\"expected: %s\", expected);\n-\/\/  tty->print_cr(\"result: %s\", buf);\n-  ASSERT_NE(strstr(buf, expected), (char*)NULL);\n+  \/\/ tty->print_cr(\"expected: %s\", expected);\n+  \/\/ tty->print_cr(\"result: %s\", buf);\n+  EXPECT_THAT(buf, testing::HasSubstr(expected));\n@@ -180,4 +180,4 @@\n-    \"00 01 02 03 04 05 06 07\",\n-    \"0100 0302 0504 0706\",\n-    \"03020100 07060504\",\n-    \"0706050403020100\"\n+    \"00 01 02 03 04 05 06 07 08 09 0a 0b 0c 0d 0e 0f\",\n+    \"0100 0302 0504 0706 0908 0b0a 0d0c 0f0e\",\n+    \"03020100 07060504 0b0a0908 0f0e0d0c\",\n+    \"0706050403020100 0f0e0d0c0b0a0908\"\n@@ -185,4 +185,4 @@\n-    \"00 01 02 03 04 05 06 07\",\n-    \"0001 0203 0405 0607\",\n-    \"00010203 04050607\",\n-    \"0001020304050607\"\n+    \"00 01 02 03 04 05 06 07 08 09 0a 0b 0c 0d 0e 0f\",\n+    \"0001 0203 0405 0607 0809 0a0b 0c0d 0e0f\",\n+    \"00010203 04050607 08090a0b 0c0d0e0f\",\n+    \"0001020304050607 08090a0b0c0d0e0f\"\n@@ -193,4 +193,4 @@\n-    \"?? ?? ?? ?? ?? ?? ?? ??\",\n-    \"???? ???? ???? ????\",\n-    \"???????? ????????\",\n-    \"????????????????\"\n+    \"?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ??\",\n+    \"???? ???? ???? ???? ???? ???? ???? ????\",\n+    \"???????? ???????? ???????? ????????\",\n+    \"???????????????? ????????????????\"\n","filename":"test\/hotspot\/gtest\/runtime\/test_os.cpp","additions":15,"deletions":15,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -430,0 +430,34 @@\n+TEST_VM(os_linux, pretouch_thp_and_use_concurrent) {\n+  \/\/ Explicitly enable thp to test cocurrent system calls.\n+  const size_t size = 1 * G;\n+  const bool useThp = UseTransparentHugePages;\n+  UseTransparentHugePages = true;\n+  char* const heap = os::reserve_memory(size, false, mtInternal);\n+  EXPECT_NE(heap, nullptr);\n+  EXPECT_TRUE(os::commit_memory(heap, size, false));\n+\n+  {\n+    auto pretouch = [heap, size](Thread*, int) {\n+      os::pretouch_memory(heap, heap + size, os::vm_page_size());\n+    };\n+    auto useMemory = [heap, size](Thread*, int) {\n+      int* iptr = reinterpret_cast<int*>(heap);\n+      for (int i = 0; i < 1000; i++) *iptr++ = i;\n+    };\n+    TestThreadGroup<decltype(pretouch)> pretouchThreads{pretouch, 4};\n+    TestThreadGroup<decltype(useMemory)> useMemoryThreads{useMemory, 4};\n+    useMemoryThreads.doit();\n+    pretouchThreads.doit();\n+    useMemoryThreads.join();\n+    pretouchThreads.join();\n+  }\n+\n+  int* iptr = reinterpret_cast<int*>(heap);\n+  for (int i = 0; i < 1000; i++)\n+    EXPECT_EQ(*iptr++, i);\n+\n+  EXPECT_TRUE(os::uncommit_memory(heap, size, false));\n+  EXPECT_TRUE(os::release_memory(heap, size));\n+  UseTransparentHugePages = useThp;\n+}\n+\n","filename":"test\/hotspot\/gtest\/runtime\/test_os_linux.cpp","additions":34,"deletions":0,"binary":false,"changes":34,"status":"modified"},{"patch":"@@ -51,0 +51,2 @@\n+\n+gc\/arguments\/TestNewSizeFlags.java 8299116 macosx-aarch64\n","filename":"test\/hotspot\/jtreg\/ProblemList-Xcomp.txt","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -36,1 +36,1 @@\n-serviceability\/sa\/TestJmapCore.java                           8268283,8270202   linux-aarch64,linux-x64,macosx-aarch64\n+serviceability\/sa\/TestJmapCore.java                           8268283,8270202   generic-all\n","filename":"test\/hotspot\/jtreg\/ProblemList-zgc.txt","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -76,0 +76,2 @@\n+compiler\/codecache\/CheckLargePages.java 8319795 linux-x64\n+\n@@ -143,0 +145,2 @@\n+serviceability\/jvmti\/stress\/StackTrace\/NotSuspended\/GetStackTraceNotSuspendedStressTest.java 8315980 linux-all,windows-x64\n+\n","filename":"test\/hotspot\/jtreg\/ProblemList.txt","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -67,0 +67,1 @@\n+    vm.jvmci.enabled \\\n","filename":"test\/hotspot\/jtreg\/TEST.ROOT","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -60,0 +60,7 @@\n+hotspot_runtime_non_cds_mode = \\\n+  runtime \\\n+  -runtime\/cds\/CheckSharingWithDefaultArchive.java \\\n+  -runtime\/cds\/appcds\/dynamicArchive\/DynamicSharedSymbols.java \\\n+  -runtime\/cds\/appcds\/dynamicArchive\/TestAutoCreateSharedArchive.java \\\n+  -runtime\/cds\/appcds\/jcmd\n+\n","filename":"test\/hotspot\/jtreg\/TEST.groups","additions":7,"deletions":0,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -0,0 +1,61 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8323682\n+ * @summary Test that the appropriate guards are generated for the copyOfRange\n+ *          intrinsic, even if the result of the array copy is not used.\n+ *\n+ * @run main\/othervm -XX:-TieredCompilation\n+ *                   -XX:CompileCommand=compileonly,compiler.arraycopy.TestArrayCopyOfRangeGuards::test\n+ *                   -Xbatch\n+ *                   compiler.arraycopy.TestArrayCopyOfRangeGuards\n+ *\/\n+\n+package compiler.arraycopy;\n+\n+import java.util.Arrays;\n+\n+public class TestArrayCopyOfRangeGuards {\n+    static int counter = 0;\n+\n+    public static void main(String[] args) {\n+        Object[] array = new Object[10];\n+        for (int i = 0; i < 50_000; i++) {\n+            test(array);\n+        }\n+        if (counter != 50_000) {\n+            throw new RuntimeException(\"Test failed\");\n+        }\n+    }\n+\n+    static void test(Object[] array) {\n+        try {\n+            Arrays.copyOfRange(array, 15, 20, Object[].class);\n+        } catch (ArrayIndexOutOfBoundsException e) {\n+            \/\/ Expected\n+            counter++;\n+        }\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/compiler\/arraycopy\/TestArrayCopyOfRangeGuards.java","additions":61,"deletions":0,"binary":false,"changes":61,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,1 +26,1 @@\n- * @bug 8155643 8268125 8270461 8270098\n+ * @bug 8155643 8268125 8270461 8270098 8332959\n@@ -44,0 +44,1 @@\n+ *                   -XX:CompileCommand=compileonly,*::invokeVirtual\n@@ -191,1 +192,5 @@\n-    public static void main(String[] args) throws Exception {\n+    public static Object testCloneObjectWithMethodHandle(MethodHandle clone, Object obj) throws Throwable {\n+        return clone.invokeExact(obj);\n+    }\n+\n+    public static void main(String[] args) throws Throwable {\n@@ -195,0 +200,4 @@\n+        MethodHandles.Lookup privateLookup = MethodHandles.privateLookupIn(Object.class, MethodHandles.lookup());\n+        MethodType mt = MethodType.methodType(Object.class);\n+        MethodHandle mh = privateLookup.findVirtual(Object.class, \"clone\", mt);\n+\n@@ -261,0 +270,11 @@\n+        for (int i = 0; i < 50_000; i++) {\n+            String[] arr2 = (String[]) testCloneObjectWithMethodHandle(mh, (Object)arr1);\n+            verifyStr(arr1, arr2);\n+            String[] arr3 = (String[]) testCloneObjectWithMethodHandle(mh, (Object)arr1);\n+            verifyStr(arr1, arr3);\n+            String[] arr4 = (String[]) testCloneObjectWithMethodHandle(mh, (Object)arr1);\n+            verifyStr(arr1, arr4);\n+            verifyStr(arr1, arr3);\n+            verifyStr(arr1, arr2);\n+        }\n+\n@@ -323,0 +343,11 @@\n+\n+        for (int i = 0; i < 50_000; i++) {\n+            Payload2 p1 = (Payload2) testCloneObjectWithMethodHandle(mh, ref2);\n+            verifyPayload2(ref2, p1);\n+            Payload2 p2 = (Payload2) testCloneObjectWithMethodHandle(mh, ref2);\n+            verifyPayload2(ref2, p2);\n+            Payload2 p3 = (Payload2) testCloneObjectWithMethodHandle(mh, ref2);\n+            verifyPayload2(ref2, p3);\n+            verifyPayload2(p2, p3);\n+            verifyPayload2(p1, p3);\n+        }\n","filename":"test\/hotspot\/jtreg\/compiler\/arraycopy\/TestObjectArrayClone.java","additions":34,"deletions":3,"binary":false,"changes":37,"status":"modified"},{"patch":"@@ -0,0 +1,58 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @key stress randomness\n+ * @bug 8329258\n+ * @summary Test correct execution of the tail call at the end of the arraycopy stub.\n+ * @requires vm.compiler2.enabled\n+ * @run main\/othervm -XX:+UnlockDiagnosticVMOptions -Xbatch -XX:-TieredCompilation\n+ *                   -XX:+StressGCM -XX:+StressLCM\n+ *                   -XX:CompileCommand=quiet -XX:CompileCommand=compileonly,*::test\n+ *                   compiler.arraycopy.TestTailCallInArrayCopyStub\n+ * @run main\/othervm -XX:+UnlockDiagnosticVMOptions -Xbatch -XX:-TieredCompilation\n+ *                   -XX:+StressGCM -XX:+StressLCM -XX:StressSeed=75451718\n+ *                   -XX:CompileCommand=quiet -XX:CompileCommand=compileonly,*::test\n+ *                   compiler.arraycopy.TestTailCallInArrayCopyStub\n+ *\/\n+\n+package compiler.arraycopy;\n+\n+public class TestTailCallInArrayCopyStub {\n+\n+    public static void test(byte[] src, byte[] dst) {\n+        try {\n+            System.arraycopy(src, -1, dst, 0, src.length);\n+        } catch (Exception e) {\n+            \/\/ Expected\n+        }\n+    }\n+\n+    public static void main(String[] args) {\n+        byte[] array = new byte[5];\n+        for (int i = 0; i < 10_000; ++i) {\n+            test(array, array);\n+        }\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/compiler\/arraycopy\/TestTailCallInArrayCopyStub.java","additions":58,"deletions":0,"binary":false,"changes":58,"status":"added"},{"patch":"@@ -0,0 +1,69 @@\n+\/*\n+ * Copyright (c) 2024, Red Hat, Inc. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/**\n+ * @test\n+ * @bug 8308660\n+ * @summary C2 compilation hits 'node must be dead' assert\n+ * @requires vm.compiler2.enabled\n+ * @run main\/othervm -XX:-BackgroundCompilation -XX:-TieredCompilation -XX:-UseOnStackReplacement\n+ *                   -XX:+UnlockDiagnosticVMOptions -XX:+StressIGVN -XX:StressSeed=242006623 TestFoldIfRemovesTopNode\n+ * @run main\/othervm -XX:-BackgroundCompilation -XX:-TieredCompilation -XX:-UseOnStackReplacement\n+ *                   -XX:+UnlockDiagnosticVMOptions -XX:+StressIGVN TestFoldIfRemovesTopNode\n+ *\n+ *\/\n+\n+public class TestFoldIfRemovesTopNode {\n+\n+    public static void main(String[] args) {\n+        int[] array = new int[100];\n+        for (int i = 0; i < 20_000; i++) {\n+            test(false, true, 0, array);\n+            test(false, false, 0, array);\n+            testHelper2(false, false, 0, array);\n+            testHelper(0, true, array);\n+        }\n+    }\n+\n+    private static void test(boolean flag, boolean flag2, int k, int[] array) {\n+        if (flag2) {\n+            testHelper2(flag, flag2, k, array);\n+        }\n+    }\n+\n+    private static void testHelper2(boolean flag, boolean flag2, int k, int[] array) {\n+        if (flag2) {\n+            k = -1;\n+        }\n+        testHelper(k, flag, array);\n+    }\n+\n+    private static void testHelper(int k, boolean flag, int[] array) {\n+        if (flag) {\n+            k = new int[k].length;\n+            int j = k + 3;\n+            if (j >= 0 && j <= array.length) {\n+            }\n+        }\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/compiler\/c2\/TestFoldIfRemovesTopNode.java","additions":69,"deletions":0,"binary":false,"changes":69,"status":"added"},{"patch":"@@ -7,3 +7,1 @@\n- * published by the Free Software Foundation.  Oracle designates this\n- * particular file as subject to the \"Classpath\" exception as provided\n- * by Oracle in the LICENSE file that accompanied this code.\n+ * published by the Free Software Foundation.\n","filename":"test\/hotspot\/jtreg\/compiler\/c2\/TestUninitializedKlassField.java","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1,69 +0,0 @@\n-\/*\n- * Copyright (c) 2016, 2020, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-\n-package compiler.c2.cr7200264;\n-\n-import java.util.HashMap;\n-import java.util.List;\n-import java.util.Map;\n-\n-import jdk.test.lib.Asserts;\n-import jdk.test.lib.process.OutputAnalyzer;\n-import jdk.test.lib.process.ProcessTools;\n-\n-public class TestDriver {\n-    private final Map<String, Long> expectedVectorizationNumbers\n-            = new HashMap<>();\n-\n-    public void addExpectedVectorization(String v, long num) {\n-        expectedVectorizationNumbers.put(v, num);\n-    }\n-\n-    public void run() throws Throwable {\n-        verifyVectorizationNumber(executeApplication());\n-    }\n-\n-    private List<String> executeApplication() throws Throwable {\n-        OutputAnalyzer outputAnalyzer = ProcessTools.executeTestJava(\n-            \"-Xbatch\",\n-            \"-XX:-TieredCompilation\",\n-            \"-XX:+PrintCompilation\",\n-            \"-XX:+TraceNewVectors\",\n-            \"-XX:+IgnoreUnrecognizedVMOptions\",\n-            \"-XX:StressLongCountedLoop=0\", \/\/ make sure int loops do not get converted to long\n-            TestIntVect.class.getName());\n-        outputAnalyzer.shouldHaveExitValue(0);\n-        return outputAnalyzer.asLines();\n-    }\n-\n-    private void verifyVectorizationNumber(List<String> vectorizationLog) {\n-        for (Map.Entry<String, Long> entry : expectedVectorizationNumbers.entrySet()) {\n-            String v = entry.getKey();\n-            long actualNum = vectorizationLog.stream()\n-                    .filter(s -> s.contains(v)).count();\n-            long expectedNum = entry.getValue();\n-            Asserts.assertGTE(actualNum, expectedNum,\n-                              \"Unexpected \" + entry.getKey() + \" number\");\n-        }\n-    }\n-}\n","filename":"test\/hotspot\/jtreg\/compiler\/c2\/cr7200264\/TestDriver.java","additions":0,"deletions":69,"binary":false,"changes":69,"status":"deleted"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2012, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2012, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,0 +24,8 @@\n+\/**\n+ * @test\n+ * @bug 7200264\n+ * @summary 7192963 changes disabled shift vectors\n+ * @library \/test\/lib \/\n+ * @run driver compiler.c2.cr7200264.TestIntVect\n+ *\/\n+\n@@ -25,0 +33,3 @@\n+\n+import compiler.lib.ir_framework.*;\n+\n@@ -26,1 +37,1 @@\n- * Copy of test\/compiler\/6340864\/TestIntVect.java without performance tests.\n+ * Based on test\/hotspot\/jtreg\/compiler\/c2\/cr6340864\/TestIntVect.java without performance tests.\n@@ -29,452 +40,849 @@\n-  private static final int ARRLEN = 997;\n-  private static final int ITERS  = 11000;\n-  private static final int ADD_INIT = Integer.MAX_VALUE-500;\n-  private static final int BIT_MASK = 0xEC80F731;\n-  private static final int VALUE = 15;\n-  private static final int SHIFT = 32;\n-\n-  public static void main(String args[]) {\n-    System.out.println(\"Testing Integer vectors\");\n-    int errn = test();\n-    if (errn > 0) {\n-      System.err.println(\"FAILED: \" + errn + \" errors\");\n-      System.exit(97);\n-    }\n-    System.out.println(\"PASSED\");\n-  }\n-\n-  static int test() {\n-    int[] a0 = new int[ARRLEN];\n-    int[] a1 = new int[ARRLEN];\n-    int[] a2 = new int[ARRLEN];\n-    int[] a3 = new int[ARRLEN];\n-    int[] a4 = new int[ARRLEN];\n-    long[] p2 = new long[ARRLEN\/2];\n-    \/\/ Initialize\n-    int gold_sum = 0;\n-    for (int i=0; i<ARRLEN; i++) {\n-      int val = (int)(ADD_INIT+i);\n-      gold_sum += val;\n-      a1[i] = val;\n-      a2[i] = (int)VALUE;\n-      a3[i] = (int)-VALUE;\n-      a4[i] = (int)BIT_MASK;\n-    }\n-    System.out.println(\"Warmup\");\n-    for (int i=0; i<ITERS; i++) {\n-      test_sum(a1);\n-      test_addc(a0, a1);\n-      test_addv(a0, a1, (int)VALUE);\n-      test_adda(a0, a1, a2);\n-      test_subc(a0, a1);\n-      test_subv(a0, a1, (int)VALUE);\n-      test_suba(a0, a1, a2);\n-      test_mulc(a0, a1);\n-      test_mulv(a0, a1, (int)VALUE);\n-      test_mula(a0, a1, a2);\n-      test_divc(a0, a1);\n-      test_divv(a0, a1, (int)VALUE);\n-      test_diva(a0, a1, a2);\n-      test_mulc_n(a0, a1);\n-      test_mulv(a0, a1, (int)-VALUE);\n-      test_mula(a0, a1, a3);\n-      test_divc_n(a0, a1);\n-      test_divv(a0, a1, (int)-VALUE);\n-      test_diva(a0, a1, a3);\n-      test_andc(a0, a1);\n-      test_andv(a0, a1, (int)BIT_MASK);\n-      test_anda(a0, a1, a4);\n-      test_orc(a0, a1);\n-      test_orv(a0, a1, (int)BIT_MASK);\n-      test_ora(a0, a1, a4);\n-      test_xorc(a0, a1);\n-      test_xorv(a0, a1, (int)BIT_MASK);\n-      test_xora(a0, a1, a4);\n-      test_sllc(a0, a1);\n-      test_sllv(a0, a1, VALUE);\n-      test_srlc(a0, a1);\n-      test_srlv(a0, a1, VALUE);\n-      test_srac(a0, a1);\n-      test_srav(a0, a1, VALUE);\n-      test_sllc_n(a0, a1);\n-      test_sllv(a0, a1, -VALUE);\n-      test_srlc_n(a0, a1);\n-      test_srlv(a0, a1, -VALUE);\n-      test_srac_n(a0, a1);\n-      test_srav(a0, a1, -VALUE);\n-      test_sllc_o(a0, a1);\n-      test_sllv(a0, a1, SHIFT);\n-      test_srlc_o(a0, a1);\n-      test_srlv(a0, a1, SHIFT);\n-      test_srac_o(a0, a1);\n-      test_srav(a0, a1, SHIFT);\n-      test_sllc_on(a0, a1);\n-      test_sllv(a0, a1, -SHIFT);\n-      test_srlc_on(a0, a1);\n-      test_srlv(a0, a1, -SHIFT);\n-      test_srac_on(a0, a1);\n-      test_srav(a0, a1, -SHIFT);\n-      test_pack2(p2, a1);\n-      test_unpack2(a0, p2);\n-      test_pack2_swap(p2, a1);\n-      test_unpack2_swap(a0, p2);\n-    }\n-    \/\/ Test and verify results\n-    System.out.println(\"Verification\");\n-    int errn = 0;\n-    {\n-      int sum = test_sum(a1);\n-      if (sum != gold_sum) {\n-        System.err.println(\"test_sum:  \" + sum + \" != \" + gold_sum);\n-        errn++;\n-      }\n-\n-      test_addc(a0, a1);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_addc: \", i, a0[i], (int)((int)(ADD_INIT+i)+VALUE));\n-      }\n-      test_addv(a0, a1, (int)VALUE);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_addv: \", i, a0[i], (int)((int)(ADD_INIT+i)+VALUE));\n-      }\n-      test_adda(a0, a1, a2);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_adda: \", i, a0[i], (int)((int)(ADD_INIT+i)+VALUE));\n-      }\n-\n-      test_subc(a0, a1);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_subc: \", i, a0[i], (int)((int)(ADD_INIT+i)-VALUE));\n-      }\n-      test_subv(a0, a1, (int)VALUE);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_subv: \", i, a0[i], (int)((int)(ADD_INIT+i)-VALUE));\n-      }\n-      test_suba(a0, a1, a2);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_suba: \", i, a0[i], (int)((int)(ADD_INIT+i)-VALUE));\n-      }\n-\n-      test_mulc(a0, a1);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_mulc: \", i, a0[i], (int)((int)(ADD_INIT+i)*VALUE));\n-      }\n-      test_mulv(a0, a1, (int)VALUE);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_mulv: \", i, a0[i], (int)((int)(ADD_INIT+i)*VALUE));\n-      }\n-      test_mula(a0, a1, a2);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_mula: \", i, a0[i], (int)((int)(ADD_INIT+i)*VALUE));\n-      }\n-\n-      test_divc(a0, a1);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_divc: \", i, a0[i], (int)((int)(ADD_INIT+i)\/VALUE));\n-      }\n-      test_divv(a0, a1, (int)VALUE);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_divv: \", i, a0[i], (int)((int)(ADD_INIT+i)\/VALUE));\n-      }\n-      test_diva(a0, a1, a2);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_diva: \", i, a0[i], (int)((int)(ADD_INIT+i)\/VALUE));\n-      }\n-\n-      test_mulc_n(a0, a1);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_mulc_n: \", i, a0[i], (int)((int)(ADD_INIT+i)*(-VALUE)));\n-      }\n-      test_mulv(a0, a1, (int)-VALUE);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_mulv_n: \", i, a0[i], (int)((int)(ADD_INIT+i)*(-VALUE)));\n-      }\n-      test_mula(a0, a1, a3);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_mula_n: \", i, a0[i], (int)((int)(ADD_INIT+i)*(-VALUE)));\n-      }\n-\n-      test_divc_n(a0, a1);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_divc_n: \", i, a0[i], (int)((int)(ADD_INIT+i)\/(-VALUE)));\n-      }\n-      test_divv(a0, a1, (int)-VALUE);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_divv_n: \", i, a0[i], (int)((int)(ADD_INIT+i)\/(-VALUE)));\n-      }\n-      test_diva(a0, a1, a3);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_diva_n: \", i, a0[i], (int)((int)(ADD_INIT+i)\/(-VALUE)));\n-      }\n-\n-      test_andc(a0, a1);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_andc: \", i, a0[i], (int)((int)(ADD_INIT+i)&BIT_MASK));\n-      }\n-      test_andv(a0, a1, (int)BIT_MASK);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_andv: \", i, a0[i], (int)((int)(ADD_INIT+i)&BIT_MASK));\n-      }\n-      test_anda(a0, a1, a4);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_anda: \", i, a0[i], (int)((int)(ADD_INIT+i)&BIT_MASK));\n-      }\n-\n-      test_orc(a0, a1);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_orc: \", i, a0[i], (int)((int)(ADD_INIT+i)|BIT_MASK));\n-      }\n-      test_orv(a0, a1, (int)BIT_MASK);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_orv: \", i, a0[i], (int)((int)(ADD_INIT+i)|BIT_MASK));\n-      }\n-      test_ora(a0, a1, a4);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_ora: \", i, a0[i], (int)((int)(ADD_INIT+i)|BIT_MASK));\n-      }\n-\n-      test_xorc(a0, a1);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_xorc: \", i, a0[i], (int)((int)(ADD_INIT+i)^BIT_MASK));\n-      }\n-      test_xorv(a0, a1, (int)BIT_MASK);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_xorv: \", i, a0[i], (int)((int)(ADD_INIT+i)^BIT_MASK));\n-      }\n-      test_xora(a0, a1, a4);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_xora: \", i, a0[i], (int)((int)(ADD_INIT+i)^BIT_MASK));\n-      }\n-\n-      test_sllc(a0, a1);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_sllc: \", i, a0[i], (int)((int)(ADD_INIT+i)<<VALUE));\n-      }\n-      test_sllv(a0, a1, VALUE);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_sllv: \", i, a0[i], (int)((int)(ADD_INIT+i)<<VALUE));\n-      }\n-\n-      test_srlc(a0, a1);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_srlc: \", i, a0[i], (int)((int)(ADD_INIT+i)>>>VALUE));\n-      }\n-      test_srlv(a0, a1, VALUE);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_srlv: \", i, a0[i], (int)((int)(ADD_INIT+i)>>>VALUE));\n-      }\n-\n-      test_srac(a0, a1);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_srac: \", i, a0[i], (int)((int)(ADD_INIT+i)>>VALUE));\n-      }\n-      test_srav(a0, a1, VALUE);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_srav: \", i, a0[i], (int)((int)(ADD_INIT+i)>>VALUE));\n-      }\n-\n-      test_sllc_n(a0, a1);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_sllc_n: \", i, a0[i], (int)((int)(ADD_INIT+i)<<(-VALUE)));\n-      }\n-      test_sllv(a0, a1, -VALUE);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_sllv_n: \", i, a0[i], (int)((int)(ADD_INIT+i)<<(-VALUE)));\n-      }\n-\n-      test_srlc_n(a0, a1);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_srlc_n: \", i, a0[i], (int)((int)(ADD_INIT+i)>>>(-VALUE)));\n-      }\n-      test_srlv(a0, a1, -VALUE);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_srlv_n: \", i, a0[i], (int)((int)(ADD_INIT+i)>>>(-VALUE)));\n-      }\n-\n-      test_srac_n(a0, a1);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_srac_n: \", i, a0[i], (int)((int)(ADD_INIT+i)>>(-VALUE)));\n-      }\n-      test_srav(a0, a1, -VALUE);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_srav_n: \", i, a0[i], (int)((int)(ADD_INIT+i)>>(-VALUE)));\n-      }\n-\n-      test_sllc_o(a0, a1);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_sllc_o: \", i, a0[i], (int)((int)(ADD_INIT+i)<<SHIFT));\n-      }\n-      test_sllv(a0, a1, SHIFT);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_sllv_o: \", i, a0[i], (int)((int)(ADD_INIT+i)<<SHIFT));\n-      }\n-\n-      test_srlc_o(a0, a1);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_srlc_o: \", i, a0[i], (int)((int)(ADD_INIT+i)>>>SHIFT));\n-      }\n-      test_srlv(a0, a1, SHIFT);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_srlv_o: \", i, a0[i], (int)((int)(ADD_INIT+i)>>>SHIFT));\n-      }\n-\n-      test_srac_o(a0, a1);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_srac_o: \", i, a0[i], (int)((int)(ADD_INIT+i)>>SHIFT));\n-      }\n-      test_srav(a0, a1, SHIFT);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_srav_o: \", i, a0[i], (int)((int)(ADD_INIT+i)>>SHIFT));\n-      }\n-\n-      test_sllc_on(a0, a1);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_sllc_on: \", i, a0[i], (int)((int)(ADD_INIT+i)<<(-SHIFT)));\n-      }\n-      test_sllv(a0, a1, -SHIFT);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_sllv_on: \", i, a0[i], (int)((int)(ADD_INIT+i)<<(-SHIFT)));\n-      }\n-\n-      test_srlc_on(a0, a1);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_srlc_on: \", i, a0[i], (int)((int)(ADD_INIT+i)>>>(-SHIFT)));\n-      }\n-      test_srlv(a0, a1, -SHIFT);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_srlv_on: \", i, a0[i], (int)((int)(ADD_INIT+i)>>>(-SHIFT)));\n-      }\n-\n-      test_srac_on(a0, a1);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_srac_on: \", i, a0[i], (int)((int)(ADD_INIT+i)>>(-SHIFT)));\n-      }\n-      test_srav(a0, a1, -SHIFT);\n-      for (int i=0; i<ARRLEN; i++) {\n-        errn += verify(\"test_srav_on: \", i, a0[i], (int)((int)(ADD_INIT+i)>>(-SHIFT)));\n-      }\n-\n-      test_pack2(p2, a1);\n-      for (int i=0; i<ARRLEN\/2; i++) {\n-        errn += verify(\"test_pack2: \", i, p2[i], ((long)(ADD_INIT+2*i) & 0xFFFFFFFFl) | ((long)(ADD_INIT+2*i+1) << 32));\n-      }\n-      for (int i=0; i<ARRLEN; i++) {\n-        a0[i] = -1;\n-      }\n-      test_unpack2(a0, p2);\n-      for (int i=0; i<(ARRLEN&(-2)); i++) {\n-        errn += verify(\"test_unpack2: \", i, a0[i], (ADD_INIT+i));\n-      }\n-\n-      test_pack2_swap(p2, a1);\n-      for (int i=0; i<ARRLEN\/2; i++) {\n-        errn += verify(\"test_pack2_swap: \", i, p2[i], ((long)(ADD_INIT+2*i+1) & 0xFFFFFFFFl) | ((long)(ADD_INIT+2*i) << 32));\n-      }\n-      for (int i=0; i<ARRLEN; i++) {\n-        a0[i] = -1;\n-      }\n-      test_unpack2_swap(a0, p2);\n-      for (int i=0; i<(ARRLEN&(-2)); i++) {\n-        errn += verify(\"test_unpack2_swap: \", i, a0[i], (ADD_INIT+i));\n-      }\n-\n-    }\n-\n-    return errn;\n-  }\n-\n-  static int test_sum(int[] a1) {\n-    int sum = 0;\n-    for (int i = 0; i < a1.length; i+=1) {\n-      sum += a1[i];\n-    }\n-    return sum;\n-  }\n-\n-  static void test_addc(int[] a0, int[] a1) {\n-    for (int i = 0; i < a0.length; i+=1) {\n-      a0[i] = (int)(a1[i]+VALUE);\n-    }\n-  }\n-  static void test_addv(int[] a0, int[] a1, int b) {\n-    for (int i = 0; i < a0.length; i+=1) {\n-      a0[i] = (int)(a1[i]+b);\n-    }\n-  }\n-  static void test_adda(int[] a0, int[] a1, int[] a2) {\n-    for (int i = 0; i < a0.length; i+=1) {\n-      a0[i] = (int)(a1[i]+a2[i]);\n-    }\n-  }\n-\n-  static void test_subc(int[] a0, int[] a1) {\n-    for (int i = 0; i < a0.length; i+=1) {\n-      a0[i] = (int)(a1[i]-VALUE);\n-    }\n-  }\n-  static void test_subv(int[] a0, int[] a1, int b) {\n-    for (int i = 0; i < a0.length; i+=1) {\n-      a0[i] = (int)(a1[i]-b);\n-    }\n-  }\n-  static void test_suba(int[] a0, int[] a1, int[] a2) {\n-    for (int i = 0; i < a0.length; i+=1) {\n-      a0[i] = (int)(a1[i]-a2[i]);\n-    }\n-  }\n-\n-  static void test_mulc(int[] a0, int[] a1) {\n-    for (int i = 0; i < a0.length; i+=1) {\n-      a0[i] = (int)(a1[i]*VALUE);\n-    }\n-  }\n-  static void test_mulc_n(int[] a0, int[] a1) {\n-    for (int i = 0; i < a0.length; i+=1) {\n-      a0[i] = (int)(a1[i]*(-VALUE));\n-    }\n-  }\n-  static void test_mulv(int[] a0, int[] a1, int b) {\n-    for (int i = 0; i < a0.length; i+=1) {\n-      a0[i] = (int)(a1[i]*b);\n-    }\n-  }\n-  static void test_mula(int[] a0, int[] a1, int[] a2) {\n-    for (int i = 0; i < a0.length; i+=1) {\n-      a0[i] = (int)(a1[i]*a2[i]);\n-    }\n-  }\n-\n-  static void test_divc(int[] a0, int[] a1) {\n-    for (int i = 0; i < a0.length; i+=1) {\n-      a0[i] = (int)(a1[i]\/VALUE);\n-    }\n-  }\n-  static void test_divc_n(int[] a0, int[] a1) {\n-    for (int i = 0; i < a0.length; i+=1) {\n-      a0[i] = (int)(a1[i]\/(-VALUE));\n-    }\n-  }\n-  static void test_divv(int[] a0, int[] a1, int b) {\n-    for (int i = 0; i < a0.length; i+=1) {\n-      a0[i] = (int)(a1[i]\/b);\n-    }\n-  }\n-  static void test_diva(int[] a0, int[] a1, int[] a2) {\n-    for (int i = 0; i < a0.length; i+=1) {\n-      a0[i] = (int)(a1[i]\/a2[i]);\n-    }\n-  }\n-\n-  static void test_andc(int[] a0, int[] a1) {\n-    for (int i = 0; i < a0.length; i+=1) {\n-      a0[i] = (int)(a1[i]&BIT_MASK);\n-    }\n-  }\n-  static void test_andv(int[] a0, int[] a1, int b) {\n-    for (int i = 0; i < a0.length; i+=1) {\n-      a0[i] = (int)(a1[i]&b);\n-    }\n-  }\n-  static void test_anda(int[] a0, int[] a1, int[] a2) {\n-    for (int i = 0; i < a0.length; i+=1) {\n-      a0[i] = (int)(a1[i]&a2[i]);\n+\n+    private static final int ARRLEN = 997;\n+    private static final int ITERS  = 11000;\n+    private static final int ADD_INIT = Integer.MAX_VALUE-500;\n+    private static final int BIT_MASK = 0xEC80F731;\n+    private static final int VALUE = 15;\n+    private static final int SHIFT = 32;\n+\n+    public static void main(String[] args) {\n+        TestFramework.run();\n+    }\n+\n+    @Run(test = {\n+           \"test_sum\", \"test_addc\", \"test_addv\", \"test_adda\", \"test_subc\",\n+           \"test_subv\", \"test_suba\", \"test_mulc\", \"test_mulc_n\", \"test_mulv\",\n+           \"test_mula\", \"test_divc\", \"test_divc_n\", \"test_divv\", \"test_diva\",\n+           \"test_andc\", \"test_andv\", \"test_anda\", \"test_orc\", \"test_orv\",\n+           \"test_ora\", \"test_xorc\", \"test_xorv\", \"test_xora\", \"test_sllc\",\n+           \"test_sllc_n\", \"test_sllc_o\", \"test_sllc_on\", \"test_sllv\",\n+           \"test_srlc\", \"test_srlc_n\", \"test_srlc_o\", \"test_srlc_on\",\n+           \"test_srlv\", \"test_srac\", \"test_srac_n\", \"test_srac_o\",\n+           \"test_srac_on\", \"test_srav\", \"test_pack2\", \"test_unpack2\",\n+           \"test_pack2_swap\", \"test_unpack2_swap\"\n+         },\n+         mode = RunMode.STANDALONE)\n+    public void run() {\n+        System.out.println(\"Testing Integer vectors\");\n+\n+        \/\/ Initialize\n+        int[] a0 = new int[ARRLEN];\n+        int[] a1 = new int[ARRLEN];\n+        int[] a2 = new int[ARRLEN];\n+        int[] a3 = new int[ARRLEN];\n+        int[] a4 = new int[ARRLEN];\n+        long[] p2 = new long[ARRLEN\/2];\n+        int gold_sum = 0;\n+        for (int i=0; i<ARRLEN; i++) {\n+            int val = (int)(ADD_INIT+i);\n+            gold_sum += val;\n+            a1[i] = val;\n+            a2[i] = (int)VALUE;\n+            a3[i] = (int)-VALUE;\n+            a4[i] = (int)BIT_MASK;\n+        }\n+\n+        System.out.println(\"Warmup\");\n+        for (int i=0; i<ITERS; i++) {\n+            test_sum(a1);\n+            test_addc(a0, a1);\n+            test_addv(a0, a1, (int)VALUE);\n+            test_adda(a0, a1, a2);\n+            test_subc(a0, a1);\n+            test_subv(a0, a1, (int)VALUE);\n+            test_suba(a0, a1, a2);\n+            test_mulc(a0, a1);\n+            test_mulv(a0, a1, (int)VALUE);\n+            test_mula(a0, a1, a2);\n+            test_divc(a0, a1);\n+            test_divv(a0, a1, (int)VALUE);\n+            test_diva(a0, a1, a2);\n+            test_mulc_n(a0, a1);\n+            test_mulv(a0, a1, (int)-VALUE);\n+            test_mula(a0, a1, a3);\n+            test_divc_n(a0, a1);\n+            test_divv(a0, a1, (int)-VALUE);\n+            test_diva(a0, a1, a3);\n+            test_andc(a0, a1);\n+            test_andv(a0, a1, (int)BIT_MASK);\n+            test_anda(a0, a1, a4);\n+            test_orc(a0, a1);\n+            test_orv(a0, a1, (int)BIT_MASK);\n+            test_ora(a0, a1, a4);\n+            test_xorc(a0, a1);\n+            test_xorv(a0, a1, (int)BIT_MASK);\n+            test_xora(a0, a1, a4);\n+            test_sllc(a0, a1);\n+            test_sllv(a0, a1, VALUE);\n+            test_srlc(a0, a1);\n+            test_srlv(a0, a1, VALUE);\n+            test_srac(a0, a1);\n+            test_srav(a0, a1, VALUE);\n+            test_sllc_n(a0, a1);\n+            test_sllv(a0, a1, -VALUE);\n+            test_srlc_n(a0, a1);\n+            test_srlv(a0, a1, -VALUE);\n+            test_srac_n(a0, a1);\n+            test_srav(a0, a1, -VALUE);\n+            test_sllc_o(a0, a1);\n+            test_sllv(a0, a1, SHIFT);\n+            test_srlc_o(a0, a1);\n+            test_srlv(a0, a1, SHIFT);\n+            test_srac_o(a0, a1);\n+            test_srav(a0, a1, SHIFT);\n+            test_sllc_on(a0, a1);\n+            test_sllv(a0, a1, -SHIFT);\n+            test_srlc_on(a0, a1);\n+            test_srlv(a0, a1, -SHIFT);\n+            test_srac_on(a0, a1);\n+            test_srav(a0, a1, -SHIFT);\n+            test_pack2(p2, a1);\n+            test_unpack2(a0, p2);\n+            test_pack2_swap(p2, a1);\n+            test_unpack2_swap(a0, p2);\n+        }\n+\n+        \/\/ Test and verify results\n+        System.out.println(\"Verification\");\n+        int errn = 0;\n+        {\n+            int sum = test_sum(a1);\n+            if (sum != gold_sum) {\n+                System.err.println(\"test_sum:  \" + sum + \" != \" + gold_sum);\n+                errn++;\n+            }\n+\n+            test_addc(a0, a1);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_addc: \", i, a0[i], (int)((int)(ADD_INIT+i)+VALUE));\n+            }\n+            test_addv(a0, a1, (int)VALUE);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_addv: \", i, a0[i], (int)((int)(ADD_INIT+i)+VALUE));\n+            }\n+            test_adda(a0, a1, a2);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_adda: \", i, a0[i], (int)((int)(ADD_INIT+i)+VALUE));\n+            }\n+\n+            test_subc(a0, a1);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_subc: \", i, a0[i], (int)((int)(ADD_INIT+i)-VALUE));\n+            }\n+            test_subv(a0, a1, (int)VALUE);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_subv: \", i, a0[i], (int)((int)(ADD_INIT+i)-VALUE));\n+            }\n+            test_suba(a0, a1, a2);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_suba: \", i, a0[i], (int)((int)(ADD_INIT+i)-VALUE));\n+            }\n+\n+            test_mulc(a0, a1);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_mulc: \", i, a0[i], (int)((int)(ADD_INIT+i)*VALUE));\n+            }\n+            test_mulv(a0, a1, (int)VALUE);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_mulv: \", i, a0[i], (int)((int)(ADD_INIT+i)*VALUE));\n+            }\n+            test_mula(a0, a1, a2);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_mula: \", i, a0[i], (int)((int)(ADD_INIT+i)*VALUE));\n+            }\n+\n+            test_divc(a0, a1);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_divc: \", i, a0[i], (int)((int)(ADD_INIT+i)\/VALUE));\n+            }\n+            test_divv(a0, a1, (int)VALUE);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_divv: \", i, a0[i], (int)((int)(ADD_INIT+i)\/VALUE));\n+            }\n+            test_diva(a0, a1, a2);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_diva: \", i, a0[i], (int)((int)(ADD_INIT+i)\/VALUE));\n+            }\n+\n+            test_mulc_n(a0, a1);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_mulc_n: \", i, a0[i], (int)((int)(ADD_INIT+i)*(-VALUE)));\n+            }\n+            test_mulv(a0, a1, (int)-VALUE);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_mulv_n: \", i, a0[i], (int)((int)(ADD_INIT+i)*(-VALUE)));\n+            }\n+            test_mula(a0, a1, a3);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_mula_n: \", i, a0[i], (int)((int)(ADD_INIT+i)*(-VALUE)));\n+            }\n+\n+            test_divc_n(a0, a1);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_divc_n: \", i, a0[i], (int)((int)(ADD_INIT+i)\/(-VALUE)));\n+            }\n+            test_divv(a0, a1, (int)-VALUE);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_divv_n: \", i, a0[i], (int)((int)(ADD_INIT+i)\/(-VALUE)));\n+            }\n+            test_diva(a0, a1, a3);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_diva_n: \", i, a0[i], (int)((int)(ADD_INIT+i)\/(-VALUE)));\n+            }\n+\n+            test_andc(a0, a1);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_andc: \", i, a0[i], (int)((int)(ADD_INIT+i)&BIT_MASK));\n+            }\n+            test_andv(a0, a1, (int)BIT_MASK);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_andv: \", i, a0[i], (int)((int)(ADD_INIT+i)&BIT_MASK));\n+            }\n+            test_anda(a0, a1, a4);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_anda: \", i, a0[i], (int)((int)(ADD_INIT+i)&BIT_MASK));\n+            }\n+\n+            test_orc(a0, a1);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_orc: \", i, a0[i], (int)((int)(ADD_INIT+i)|BIT_MASK));\n+            }\n+            test_orv(a0, a1, (int)BIT_MASK);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_orv: \", i, a0[i], (int)((int)(ADD_INIT+i)|BIT_MASK));\n+            }\n+            test_ora(a0, a1, a4);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_ora: \", i, a0[i], (int)((int)(ADD_INIT+i)|BIT_MASK));\n+            }\n+\n+            test_xorc(a0, a1);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_xorc: \", i, a0[i], (int)((int)(ADD_INIT+i)^BIT_MASK));\n+            }\n+            test_xorv(a0, a1, (int)BIT_MASK);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_xorv: \", i, a0[i], (int)((int)(ADD_INIT+i)^BIT_MASK));\n+            }\n+            test_xora(a0, a1, a4);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_xora: \", i, a0[i], (int)((int)(ADD_INIT+i)^BIT_MASK));\n+            }\n+\n+            test_sllc(a0, a1);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_sllc: \", i, a0[i], (int)((int)(ADD_INIT+i)<<VALUE));\n+            }\n+            test_sllv(a0, a1, VALUE);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_sllv: \", i, a0[i], (int)((int)(ADD_INIT+i)<<VALUE));\n+            }\n+\n+            test_srlc(a0, a1);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_srlc: \", i, a0[i], (int)((int)(ADD_INIT+i)>>>VALUE));\n+            }\n+            test_srlv(a0, a1, VALUE);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_srlv: \", i, a0[i], (int)((int)(ADD_INIT+i)>>>VALUE));\n+            }\n+\n+            test_srac(a0, a1);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_srac: \", i, a0[i], (int)((int)(ADD_INIT+i)>>VALUE));\n+            }\n+            test_srav(a0, a1, VALUE);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_srav: \", i, a0[i], (int)((int)(ADD_INIT+i)>>VALUE));\n+            }\n+\n+            test_sllc_n(a0, a1);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_sllc_n: \", i, a0[i], (int)((int)(ADD_INIT+i)<<(-VALUE)));\n+            }\n+            test_sllv(a0, a1, -VALUE);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_sllv_n: \", i, a0[i], (int)((int)(ADD_INIT+i)<<(-VALUE)));\n+            }\n+\n+            test_srlc_n(a0, a1);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_srlc_n: \", i, a0[i], (int)((int)(ADD_INIT+i)>>>(-VALUE)));\n+            }\n+            test_srlv(a0, a1, -VALUE);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_srlv_n: \", i, a0[i], (int)((int)(ADD_INIT+i)>>>(-VALUE)));\n+            }\n+\n+            test_srac_n(a0, a1);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_srac_n: \", i, a0[i], (int)((int)(ADD_INIT+i)>>(-VALUE)));\n+            }\n+            test_srav(a0, a1, -VALUE);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_srav_n: \", i, a0[i], (int)((int)(ADD_INIT+i)>>(-VALUE)));\n+            }\n+\n+            test_sllc_o(a0, a1);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_sllc_o: \", i, a0[i], (int)((int)(ADD_INIT+i)<<SHIFT));\n+            }\n+            test_sllv(a0, a1, SHIFT);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_sllv_o: \", i, a0[i], (int)((int)(ADD_INIT+i)<<SHIFT));\n+            }\n+\n+            test_srlc_o(a0, a1);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_srlc_o: \", i, a0[i], (int)((int)(ADD_INIT+i)>>>SHIFT));\n+            }\n+            test_srlv(a0, a1, SHIFT);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_srlv_o: \", i, a0[i], (int)((int)(ADD_INIT+i)>>>SHIFT));\n+            }\n+\n+            test_srac_o(a0, a1);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_srac_o: \", i, a0[i], (int)((int)(ADD_INIT+i)>>SHIFT));\n+            }\n+            test_srav(a0, a1, SHIFT);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_srav_o: \", i, a0[i], (int)((int)(ADD_INIT+i)>>SHIFT));\n+            }\n+\n+            test_sllc_on(a0, a1);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_sllc_on: \", i, a0[i], (int)((int)(ADD_INIT+i)<<(-SHIFT)));\n+            }\n+            test_sllv(a0, a1, -SHIFT);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_sllv_on: \", i, a0[i], (int)((int)(ADD_INIT+i)<<(-SHIFT)));\n+            }\n+\n+            test_srlc_on(a0, a1);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_srlc_on: \", i, a0[i], (int)((int)(ADD_INIT+i)>>>(-SHIFT)));\n+            }\n+            test_srlv(a0, a1, -SHIFT);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_srlv_on: \", i, a0[i], (int)((int)(ADD_INIT+i)>>>(-SHIFT)));\n+            }\n+\n+            test_srac_on(a0, a1);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_srac_on: \", i, a0[i], (int)((int)(ADD_INIT+i)>>(-SHIFT)));\n+            }\n+            test_srav(a0, a1, -SHIFT);\n+            for (int i=0; i<ARRLEN; i++) {\n+                errn += verify(\"test_srav_on: \", i, a0[i], (int)((int)(ADD_INIT+i)>>(-SHIFT)));\n+            }\n+\n+            test_pack2(p2, a1);\n+            for (int i=0; i<ARRLEN\/2; i++) {\n+                errn += verify(\"test_pack2: \", i, p2[i], ((long)(ADD_INIT+2*i) & 0xFFFFFFFFl) | ((long)(ADD_INIT+2*i+1) << 32));\n+            }\n+            for (int i=0; i<ARRLEN; i++) {\n+                a0[i] = -1;\n+            }\n+            test_unpack2(a0, p2);\n+            for (int i=0; i<(ARRLEN&(-2)); i++) {\n+                errn += verify(\"test_unpack2: \", i, a0[i], (ADD_INIT+i));\n+            }\n+\n+            test_pack2_swap(p2, a1);\n+            for (int i=0; i<ARRLEN\/2; i++) {\n+                errn += verify(\"test_pack2_swap: \", i, p2[i], ((long)(ADD_INIT+2*i+1) & 0xFFFFFFFFl) | ((long)(ADD_INIT+2*i) << 32));\n+            }\n+            for (int i=0; i<ARRLEN; i++) {\n+                a0[i] = -1;\n+            }\n+            test_unpack2_swap(a0, p2);\n+            for (int i=0; i<(ARRLEN&(-2)); i++) {\n+                errn += verify(\"test_unpack2_swap: \", i, a0[i], (ADD_INIT+i));\n+            }\n+\n+        }\n+\n+        if (errn > 0) {\n+            throw new Error(\"FAILED: \" + errn + \" errors\");\n+        }\n+        System.out.println(\"PASSED\");\n+\n+    }\n+\n+    \/\/ Not vectorized: simple addition not profitable, see JDK-8307516. NOTE:\n+    \/\/ This check does not document the _desired_ behavior of the system but\n+    \/\/ the current behavior (no vectorization)\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_I, \"= 0\",\n+                   IRNode.STORE_VECTOR,  \"= 0\" })\n+    int test_sum(int[] a1) {\n+        int sum = 0;\n+        for (int i = 0; i < a1.length; i+=1) {\n+            sum += a1[i];\n+        }\n+        return sum;\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.ADD_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n+    void test_addc(int[] a0, int[] a1) {\n+        for (int i = 0; i < a0.length; i+=1) {\n+            a0[i] = (int)(a1[i]+VALUE);\n+        }\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.ADD_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n+    void test_addv(int[] a0, int[] a1, int b) {\n+        for (int i = 0; i < a0.length; i+=1) {\n+            a0[i] = (int)(a1[i]+b);\n+        }\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.ADD_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n+    void test_adda(int[] a0, int[] a1, int[] a2) {\n+        for (int i = 0; i < a0.length; i+=1) {\n+            a0[i] = (int)(a1[i]+a2[i]);\n+        }\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.ADD_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n+    void test_subc(int[] a0, int[] a1) {\n+        for (int i = 0; i < a0.length; i+=1) {\n+            a0[i] = (int)(a1[i]-VALUE);\n+        }\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.SUB_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n+    void test_subv(int[] a0, int[] a1, int b) {\n+        for (int i = 0; i < a0.length; i+=1) {\n+            a0[i] = (int)(a1[i]-b);\n+        }\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.SUB_VI, \"> 0\", },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n+    void test_suba(int[] a0, int[] a1, int[] a2) {\n+        for (int i = 0; i < a0.length; i+=1) {\n+            a0[i] = (int)(a1[i]-a2[i]);\n+        }\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.SUB_VI, \"> 0\", IRNode.LSHIFT_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n+    void test_mulc(int[] a0, int[] a1) {\n+        for (int i = 0; i < a0.length; i+=1) {\n+            a0[i] = (int)(a1[i]*VALUE);\n+        }\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.SUB_VI, \"> 0\", IRNode.LSHIFT_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n+    void test_mulc_n(int[] a0, int[] a1) {\n+        for (int i = 0; i < a0.length; i+=1) {\n+            a0[i] = (int)(a1[i]*(-VALUE));\n+        }\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.MUL_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse4.1\", \"true\", \"asimd\", \"true\"})\n+    void test_mulv(int[] a0, int[] a1, int b) {\n+        for (int i = 0; i < a0.length; i+=1) {\n+            a0[i] = (int)(a1[i]*b);\n+        }\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.MUL_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse4.1\", \"true\", \"asimd\", \"true\"})\n+    void test_mula(int[] a0, int[] a1, int[] a2) {\n+        for (int i = 0; i < a0.length; i+=1) {\n+            a0[i] = (int)(a1[i]*a2[i]);\n+        }\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.ADD_VI,\n+                   IRNode.VECTOR_SIZE + \"min(max_int, max_long)\", \"> 0\",\n+                   IRNode.RSHIFT_VI,\n+                   IRNode.VECTOR_SIZE + \"min(max_int, max_long)\", \"> 0\",\n+                   IRNode.SUB_VI,\n+                   IRNode.VECTOR_SIZE + \"min(max_int, max_long)\", \"> 0\" },\n+        applyIfCPUFeatureOr = {\"avx2\", \"true\", \"sve\", \"true\"})\n+    \/\/ Not vectorized: On aarch64, vectorization for this example results in\n+    \/\/ MulVL nodes, which asimd does not support.\n+    @IR(counts = { IRNode.LOAD_VECTOR_I, \"= 0\",\n+                   IRNode.STORE_VECTOR,  \"= 0\",\n+                   IRNode.MUL_L,         \"> 0\" },\n+        applyIfCPUFeatureAnd = {\"asimd\", \"true\", \"sve\", \"false\"})\n+    void test_divc(int[] a0, int[] a1) {\n+        for (int i = 0; i < a0.length; i+=1) {\n+            a0[i] = (int)(a1[i]\/VALUE);\n+        }\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.ADD_VI,\n+                   IRNode.VECTOR_SIZE + \"min(max_int, max_long)\", \"> 0\",\n+                   IRNode.RSHIFT_VI,\n+                   IRNode.VECTOR_SIZE + \"min(max_int, max_long)\", \"> 0\",\n+                   IRNode.SUB_VI,\n+                   IRNode.VECTOR_SIZE + \"min(max_int, max_long)\", \"> 0\" },\n+        applyIfCPUFeatureOr = {\"avx2\", \"true\", \"sve\", \"true\"})\n+    \/\/ Not vectorized: On aarch64, vectorization for this example results in\n+    \/\/ MulVL nodes, which asimd does not support.\n+    @IR(counts = { IRNode.LOAD_VECTOR_I, \"= 0\",\n+                   IRNode.STORE_VECTOR,  \"= 0\",\n+                   IRNode.MUL_L,         \"> 0\" },\n+        applyIfCPUFeatureAnd = {\"asimd\", \"true\", \"sve\", \"false\"})\n+    void test_divc_n(int[] a0, int[] a1) {\n+        for (int i = 0; i < a0.length; i+=1) {\n+            a0[i] = (int)(a1[i]\/(-VALUE));\n+        }\n+    }\n+\n+    \/\/ Not vectorized: no vector div. NOTE: This check does not document the\n+    \/\/ _desired_ behavior of the system but the current behavior (no\n+    \/\/ vectorization)\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_I, \"= 0\",\n+                   IRNode.STORE_VECTOR,  \"= 0\" })\n+    void test_divv(int[] a0, int[] a1, int b) {\n+        for (int i = 0; i < a0.length; i+=1) {\n+            a0[i] = (int)(a1[i]\/b);\n+        }\n+    }\n+\n+    \/\/ Not vectorized: no vector div. NOTE: This check does not document the\n+    \/\/ _desired_ behavior of the system but the current behavior (no\n+    \/\/ vectorization)\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_I, \"= 0\",\n+                   IRNode.STORE_VECTOR,  \"= 0\" })\n+    void test_diva(int[] a0, int[] a1, int[] a2) {\n+        for (int i = 0; i < a0.length; i+=1) {\n+            a0[i] = (int)(a1[i]\/a2[i]);\n+        }\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.AND_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n+    void test_andc(int[] a0, int[] a1) {\n+        for (int i = 0; i < a0.length; i+=1) {\n+            a0[i] = (int)(a1[i]&BIT_MASK);\n+        }\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.AND_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n+    void test_andv(int[] a0, int[] a1, int b) {\n+        for (int i = 0; i < a0.length; i+=1) {\n+            a0[i] = (int)(a1[i]&b);\n+        }\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.AND_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n+    void test_anda(int[] a0, int[] a1, int[] a2) {\n+        for (int i = 0; i < a0.length; i+=1) {\n+            a0[i] = (int)(a1[i]&a2[i]);\n+        }\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.OR_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n+    void test_orc(int[] a0, int[] a1) {\n+        for (int i = 0; i < a0.length; i+=1) {\n+            a0[i] = (int)(a1[i]|BIT_MASK);\n+        }\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.OR_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n+    void test_orv(int[] a0, int[] a1, int b) {\n+        for (int i = 0; i < a0.length; i+=1) {\n+            a0[i] = (int)(a1[i]|b);\n+        }\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.OR_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n+    void test_ora(int[] a0, int[] a1, int[] a2) {\n+        for (int i = 0; i < a0.length; i+=1) {\n+            a0[i] = (int)(a1[i]|a2[i]);\n+        }\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.XOR_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n+    void test_xorc(int[] a0, int[] a1) {\n+        for (int i = 0; i < a0.length; i+=1) {\n+            a0[i] = (int)(a1[i]^BIT_MASK);\n+        }\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.XOR_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n+    void test_xorv(int[] a0, int[] a1, int b) {\n+        for (int i = 0; i < a0.length; i+=1) {\n+            a0[i] = (int)(a1[i]^b);\n+        }\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.XOR_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n+    void test_xora(int[] a0, int[] a1, int[] a2) {\n+        for (int i = 0; i < a0.length; i+=1) {\n+            a0[i] = (int)(a1[i]^a2[i]);\n+        }\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.LSHIFT_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n+    void test_sllc(int[] a0, int[] a1) {\n+        for (int i = 0; i < a0.length; i+=1) {\n+            a0[i] = (int)(a1[i]<<VALUE);\n+        }\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.LSHIFT_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n+    void test_sllc_n(int[] a0, int[] a1) {\n+        for (int i = 0; i < a0.length; i+=1) {\n+            a0[i] = (int)(a1[i]<<(-VALUE));\n+        }\n+    }\n+\n+    \/\/ Vector shift not expected as shift is a NOP.\n+    @Test\n+    @IR(counts = { IRNode.LSHIFT_VI,     \"= 0\",\n+                   IRNode.LOAD_VECTOR_I, \"> 0\",\n+                   IRNode.STORE_VECTOR,  \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n+    void test_sllc_o(int[] a0, int[] a1) {\n+        for (int i = 0; i < a0.length; i+=1) {\n+            a0[i] = (int)(a1[i]<<SHIFT);\n+        }\n+    }\n+\n+    \/\/ Vector shift not expected as shift is a NOP.\n+    @Test\n+    @IR(counts = { IRNode.LSHIFT_VI,     \"= 0\",\n+                   IRNode.LOAD_VECTOR_I, \"> 0\",\n+                   IRNode.STORE_VECTOR,  \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n+    void test_sllc_on(int[] a0, int[] a1) {\n+        for (int i = 0; i < a0.length; i+=1) {\n+            a0[i] = (int)(a1[i]<<(-SHIFT));\n+        }\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.LSHIFT_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n+    void test_sllv(int[] a0, int[] a1, int b) {\n+        for (int i = 0; i < a0.length; i+=1) {\n+            a0[i] = (int)(a1[i]<<b);\n+        }\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.URSHIFT_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n+    void test_srlc(int[] a0, int[] a1) {\n+        for (int i = 0; i < a0.length; i+=1) {\n+            a0[i] = (int)(a1[i]>>>VALUE);\n+        }\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.URSHIFT_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n+    void test_srlc_n(int[] a0, int[] a1) {\n+        for (int i = 0; i < a0.length; i+=1) {\n+            a0[i] = (int)(a1[i]>>>(-VALUE));\n+        }\n+    }\n+\n+    \/\/ Vector shift not expected as shift is a NOP.\n+    @Test\n+    @IR(counts = { IRNode.URSHIFT_VI,    \"= 0\",\n+                   IRNode.LOAD_VECTOR_I, \"> 0\",\n+                   IRNode.STORE_VECTOR,  \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n+    void test_srlc_o(int[] a0, int[] a1) {\n+        for (int i = 0; i < a0.length; i+=1) {\n+            a0[i] = (int)(a1[i]>>>SHIFT);\n+        }\n+    }\n+\n+    \/\/ Vector shift not expected as shift is a NOP.\n+    @Test\n+    @IR(counts = { IRNode.URSHIFT_VI,    \"= 0\",\n+                   IRNode.LOAD_VECTOR_I, \"> 0\",\n+                   IRNode.STORE_VECTOR,  \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n+    void test_srlc_on(int[] a0, int[] a1) {\n+        for (int i = 0; i < a0.length; i+=1) {\n+            a0[i] = (int)(a1[i]>>>(-SHIFT));\n+        }\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.URSHIFT_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n+    void test_srlv(int[] a0, int[] a1, int b) {\n+        for (int i = 0; i < a0.length; i+=1) {\n+            a0[i] = (int)(a1[i]>>>b);\n+        }\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.RSHIFT_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n+    void test_srac(int[] a0, int[] a1) {\n+        for (int i = 0; i < a0.length; i+=1) {\n+            a0[i] = (int)(a1[i]>>VALUE);\n+        }\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.RSHIFT_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n+    void test_srac_n(int[] a0, int[] a1) {\n+        for (int i = 0; i < a0.length; i+=1) {\n+            a0[i] = (int)(a1[i]>>(-VALUE));\n+        }\n+    }\n+\n+    \/\/ Vector shift not expected as shift is a NOP.\n+    @Test\n+    @IR(counts = { IRNode.RSHIFT_VI,     \"= 0\",\n+                   IRNode.LOAD_VECTOR_I, \"> 0\",\n+                   IRNode.STORE_VECTOR,  \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n+    void test_srac_o(int[] a0, int[] a1) {\n+        for (int i = 0; i < a0.length; i+=1) {\n+            a0[i] = (int)(a1[i]>>SHIFT);\n+        }\n+    }\n+\n+    \/\/ Vector shift not expected as shift is a NOP.\n+    @Test\n+    @IR(counts = { IRNode.RSHIFT_VI,     \"= 0\",\n+                   IRNode.LOAD_VECTOR_I, \"> 0\",\n+                   IRNode.STORE_VECTOR,  \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n+    void test_srac_on(int[] a0, int[] a1) {\n+        for (int i = 0; i < a0.length; i+=1) {\n+            a0[i] = (int)(a1[i]>>(-SHIFT));\n+        }\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.RSHIFT_VI, \"> 0\" },\n+        applyIfCPUFeatureOr = {\"sse2\", \"true\", \"asimd\", \"true\"})\n+    void test_srav(int[] a0, int[] a1, int b) {\n+        for (int i = 0; i < a0.length; i+=1) {\n+            a0[i] = (int)(a1[i]>>b);\n+        }\n+    }\n+\n+    \/\/ Not vectorized currently. NOTE: This check does not document the\n+    \/\/ _desired_ behavior of the system but the current behavior (no\n+    \/\/ vectorization)\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_I, \"= 0\",\n+                   IRNode.STORE_VECTOR,  \"= 0\" })\n+    void test_pack2(long[] p2, int[] a1) {\n+        if (p2.length*2 > a1.length) return;\n+        for (int i = 0; i < p2.length; i+=1) {\n+            long l0 = (long)a1[i*2+0];\n+            long l1 = (long)a1[i*2+1];\n+            p2[i] = (l1 << 32) | (l0 & 0xFFFFFFFFl);\n+        }\n+    }\n+\n+    \/\/ Not vectorized currently. NOTE: This check does not document the\n+    \/\/ _desired_ behavior of the system but the current behavior (no\n+    \/\/ vectorization)\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_I, \"= 0\",\n+                   IRNode.STORE_VECTOR,  \"= 0\" })\n+    void test_unpack2(int[] a0, long[] p2) {\n+        if (p2.length*2 > a0.length) return;\n+        for (int i = 0; i < p2.length; i+=1) {\n+            long l = p2[i];\n+            a0[i*2+0] = (int)(l & 0xFFFFFFFFl);\n+            a0[i*2+1] = (int)(l >> 32);\n+        }\n+    }\n+\n+    \/\/ Not vectorized currently. NOTE: This check does not document the\n+    \/\/ _desired_ behavior of the system but the current behavior (no\n+    \/\/ vectorization)\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_I, \"= 0\",\n+                   IRNode.STORE_VECTOR,  \"= 0\" })\n+    void test_pack2_swap(long[] p2, int[] a1) {\n+        if (p2.length*2 > a1.length) return;\n+        for (int i = 0; i < p2.length; i+=1) {\n+            long l0 = (long)a1[i*2+0];\n+            long l1 = (long)a1[i*2+1];\n+            p2[i] = (l0 << 32) | (l1 & 0xFFFFFFFFl);\n+        }\n+    }\n+\n+    \/\/ Not vectorized currently. NOTE: This check does not document the\n+    \/\/ _desired_ behavior of the system but the current behavior (no\n+    \/\/ vectorization)\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_I, \"= 0\",\n+                   IRNode.STORE_VECTOR,  \"= 0\" })\n+    void test_unpack2_swap(int[] a0, long[] p2) {\n+        if (p2.length*2 > a0.length) return;\n+        for (int i = 0; i < p2.length; i+=1) {\n+            long l = p2[i];\n+            a0[i*2+0] = (int)(l >> 32);\n+            a0[i*2+1] = (int)(l & 0xFFFFFFFFl);\n+        }\n+    }\n+\n+    static int verify(String text, int i, int elem, int val) {\n+        if (elem != val) {\n+            System.err.println(text + \"[\" + i + \"] = \" + elem + \" != \" + val);\n+            return 1;\n+        }\n+        return 0;\n+    }\n+\n+    static int verify(String text, int i, long elem, long val) {\n+        if (elem != val) {\n+            System.err.println(text + \"[\" + i + \"] = \" + Long.toHexString(elem) + \" != \" + Long.toHexString(val));\n+            return 1;\n+        }\n+        return 0;\n@@ -482,160 +890,0 @@\n-  }\n-\n-  static void test_orc(int[] a0, int[] a1) {\n-    for (int i = 0; i < a0.length; i+=1) {\n-      a0[i] = (int)(a1[i]|BIT_MASK);\n-    }\n-  }\n-  static void test_orv(int[] a0, int[] a1, int b) {\n-    for (int i = 0; i < a0.length; i+=1) {\n-      a0[i] = (int)(a1[i]|b);\n-    }\n-  }\n-  static void test_ora(int[] a0, int[] a1, int[] a2) {\n-    for (int i = 0; i < a0.length; i+=1) {\n-      a0[i] = (int)(a1[i]|a2[i]);\n-    }\n-  }\n-\n-  static void test_xorc(int[] a0, int[] a1) {\n-    for (int i = 0; i < a0.length; i+=1) {\n-      a0[i] = (int)(a1[i]^BIT_MASK);\n-    }\n-  }\n-  static void test_xorv(int[] a0, int[] a1, int b) {\n-    for (int i = 0; i < a0.length; i+=1) {\n-      a0[i] = (int)(a1[i]^b);\n-    }\n-  }\n-  static void test_xora(int[] a0, int[] a1, int[] a2) {\n-    for (int i = 0; i < a0.length; i+=1) {\n-      a0[i] = (int)(a1[i]^a2[i]);\n-    }\n-  }\n-\n-  static void test_sllc(int[] a0, int[] a1) {\n-    for (int i = 0; i < a0.length; i+=1) {\n-      a0[i] = (int)(a1[i]<<VALUE);\n-    }\n-  }\n-  static void test_sllc_n(int[] a0, int[] a1) {\n-    for (int i = 0; i < a0.length; i+=1) {\n-      a0[i] = (int)(a1[i]<<(-VALUE));\n-    }\n-  }\n-  static void test_sllc_o(int[] a0, int[] a1) {\n-    for (int i = 0; i < a0.length; i+=1) {\n-      a0[i] = (int)(a1[i]<<SHIFT);\n-    }\n-  }\n-  static void test_sllc_on(int[] a0, int[] a1) {\n-    for (int i = 0; i < a0.length; i+=1) {\n-      a0[i] = (int)(a1[i]<<(-SHIFT));\n-    }\n-  }\n-  static void test_sllv(int[] a0, int[] a1, int b) {\n-    for (int i = 0; i < a0.length; i+=1) {\n-      a0[i] = (int)(a1[i]<<b);\n-    }\n-  }\n-\n-  static void test_srlc(int[] a0, int[] a1) {\n-    for (int i = 0; i < a0.length; i+=1) {\n-      a0[i] = (int)(a1[i]>>>VALUE);\n-    }\n-  }\n-  static void test_srlc_n(int[] a0, int[] a1) {\n-    for (int i = 0; i < a0.length; i+=1) {\n-      a0[i] = (int)(a1[i]>>>(-VALUE));\n-    }\n-  }\n-  static void test_srlc_o(int[] a0, int[] a1) {\n-    for (int i = 0; i < a0.length; i+=1) {\n-      a0[i] = (int)(a1[i]>>>SHIFT);\n-    }\n-  }\n-  static void test_srlc_on(int[] a0, int[] a1) {\n-    for (int i = 0; i < a0.length; i+=1) {\n-      a0[i] = (int)(a1[i]>>>(-SHIFT));\n-    }\n-  }\n-  static void test_srlv(int[] a0, int[] a1, int b) {\n-    for (int i = 0; i < a0.length; i+=1) {\n-      a0[i] = (int)(a1[i]>>>b);\n-    }\n-  }\n-\n-  static void test_srac(int[] a0, int[] a1) {\n-    for (int i = 0; i < a0.length; i+=1) {\n-      a0[i] = (int)(a1[i]>>VALUE);\n-    }\n-  }\n-  static void test_srac_n(int[] a0, int[] a1) {\n-    for (int i = 0; i < a0.length; i+=1) {\n-      a0[i] = (int)(a1[i]>>(-VALUE));\n-    }\n-  }\n-  static void test_srac_o(int[] a0, int[] a1) {\n-    for (int i = 0; i < a0.length; i+=1) {\n-      a0[i] = (int)(a1[i]>>SHIFT);\n-    }\n-  }\n-  static void test_srac_on(int[] a0, int[] a1) {\n-    for (int i = 0; i < a0.length; i+=1) {\n-      a0[i] = (int)(a1[i]>>(-SHIFT));\n-    }\n-  }\n-  static void test_srav(int[] a0, int[] a1, int b) {\n-    for (int i = 0; i < a0.length; i+=1) {\n-      a0[i] = (int)(a1[i]>>b);\n-    }\n-  }\n-\n-  static void test_pack2(long[] p2, int[] a1) {\n-    if (p2.length*2 > a1.length) return;\n-    for (int i = 0; i < p2.length; i+=1) {\n-      long l0 = (long)a1[i*2+0];\n-      long l1 = (long)a1[i*2+1];\n-      p2[i] = (l1 << 32) | (l0 & 0xFFFFFFFFl);\n-    }\n-  }\n-  static void test_unpack2(int[] a0, long[] p2) {\n-    if (p2.length*2 > a0.length) return;\n-    for (int i = 0; i < p2.length; i+=1) {\n-      long l = p2[i];\n-      a0[i*2+0] = (int)(l & 0xFFFFFFFFl);\n-      a0[i*2+1] = (int)(l >> 32);\n-    }\n-  }\n-  static void test_pack2_swap(long[] p2, int[] a1) {\n-    if (p2.length*2 > a1.length) return;\n-    for (int i = 0; i < p2.length; i+=1) {\n-      long l0 = (long)a1[i*2+0];\n-      long l1 = (long)a1[i*2+1];\n-      p2[i] = (l0 << 32) | (l1 & 0xFFFFFFFFl);\n-    }\n-  }\n-  static void test_unpack2_swap(int[] a0, long[] p2) {\n-    if (p2.length*2 > a0.length) return;\n-    for (int i = 0; i < p2.length; i+=1) {\n-      long l = p2[i];\n-      a0[i*2+0] = (int)(l >> 32);\n-      a0[i*2+1] = (int)(l & 0xFFFFFFFFl);\n-    }\n-  }\n-\n-  static int verify(String text, int i, int elem, int val) {\n-    if (elem != val) {\n-      System.err.println(text + \"[\" + i + \"] = \" + elem + \" != \" + val);\n-      return 1;\n-    }\n-    return 0;\n-  }\n-\n-  static int verify(String text, int i, long elem, long val) {\n-    if (elem != val) {\n-      System.err.println(text + \"[\" + i + \"] = \" + Long.toHexString(elem) + \" != \" + Long.toHexString(val));\n-      return 1;\n-    }\n-    return 0;\n-  }\n","filename":"test\/hotspot\/jtreg\/compiler\/c2\/cr7200264\/TestIntVect.java","additions":862,"deletions":614,"binary":false,"changes":1476,"status":"modified"},{"patch":"@@ -1,50 +0,0 @@\n-\/*\n- * Copyright (c) 2016, 2018, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-\n-\/**\n- * @test\n- * @bug 7200264\n- * @summary 7192963 changes disabled shift vectors\n- * @requires vm.cpu.features ~= \".*sse2.*\" & vm.debug & vm.flavor == \"server\"\n- * @requires !vm.emulatedClient & !vm.graal.enabled\n- * @library \/test\/lib \/\n- * @run main\/othervm -XX:+IgnoreUnrecognizedVMOptions -XX:StressLongCountedLoop=0\n- *                   compiler.c2.cr7200264.TestSSE2IntVect\n- *\/\n-\n-package compiler.c2.cr7200264;\n-\n-public class TestSSE2IntVect {\n-    public static void main(String[] args) throws Throwable {\n-        TestDriver test = new TestDriver();\n-        test.addExpectedVectorization(\"AddVI\", 4);\n-        test.addExpectedVectorization(\"SubVI\", 4);\n-        test.addExpectedVectorization(\"AndV\", 3);\n-        test.addExpectedVectorization(\"OrV\", 3);\n-        test.addExpectedVectorization(\"XorV\", 3);\n-        test.addExpectedVectorization(\"LShiftVI\", 5);\n-        test.addExpectedVectorization(\"RShiftVI\", 3);\n-        test.addExpectedVectorization(\"URShiftVI\", 3);\n-        test.run();\n-    }\n-}\n","filename":"test\/hotspot\/jtreg\/compiler\/c2\/cr7200264\/TestSSE2IntVect.java","additions":0,"deletions":50,"binary":false,"changes":50,"status":"deleted"},{"patch":"@@ -1,43 +0,0 @@\n-\/*\n- * Copyright (c) 2016, 2018, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-\n-\/**\n- * @test\n- * @bug 7200264\n- * @summary 7192963 changes disabled shift vectors\n- * @requires vm.cpu.features ~= \".*sse4\\\\.1.*\" & vm.debug & vm.flavor == \"server\"\n- * @requires !vm.emulatedClient & !vm.graal.enabled\n- * @library \/test\/lib \/\n- * @run main\/othervm -XX:+IgnoreUnrecognizedVMOptions -XX:StressLongCountedLoop=0\n- *                   compiler.c2.cr7200264.TestSSE4IntVect\n- *\/\n-\n-package compiler.c2.cr7200264;\n-\n-public class TestSSE4IntVect {\n-    public static void main(String[] args) throws Throwable {\n-        TestDriver test = new TestDriver();\n-        test.addExpectedVectorization(\"MulVI\", 2);\n-        test.run();\n-    }\n-}\n","filename":"test\/hotspot\/jtreg\/compiler\/c2\/cr7200264\/TestSSE4IntVect.java","additions":0,"deletions":43,"binary":false,"changes":43,"status":"deleted"},{"patch":"@@ -61,4 +61,1 @@\n-                  IRNode.STORE_VECTOR, \">0\"},\n-        \/\/ The vectorization of some conversions may fail when `+AlignVector`.\n-        \/\/ We can remove the condition after JDK-8303827.\n-        applyIf = {\"AlignVector\", \"false\"})\n+                  IRNode.STORE_VECTOR, \">0\"})\n","filename":"test\/hotspot\/jtreg\/compiler\/c2\/irTests\/TestVectorizeTypeConversion.java","additions":1,"deletions":4,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -0,0 +1,87 @@\n+\/*\n+ * Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/* @test\n+ * @bug 8329126\n+ * @summary check that native methods get compiled\n+ *\n+ * @modules java.base\/jdk.internal.misc\n+ * @library \/test\/lib \/\n+ * @build jdk.test.whitebox.WhiteBox\n+ * @run driver jdk.test.lib.helpers.ClassFileInstaller jdk.test.whitebox.WhiteBox\n+ *\n+ * @run main\/othervm\/native -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI -Xbootclasspath\/a:.\n+ *    -Xbatch -XX:-UseOnStackReplacement -XX:+TieredCompilation compiler.calls.NativeCalls\n+ * @run main\/othervm\/native -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI -Xbootclasspath\/a:.\n+ *    -Xbatch -XX:-UseOnStackReplacement -XX:-TieredCompilation compiler.calls.NativeCalls\n+ * @run main\/othervm\/native -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI -Xbootclasspath\/a:.\n+ *    -Xbatch -XX:-UseOnStackReplacement -XX:+TieredCompilation -XX:TieredStopAtLevel=1 compiler.calls.NativeCalls\n+ * @run main\/othervm\/native -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI -Xbootclasspath\/a:.\n+ *    -Xbatch -XX:-UseOnStackReplacement -XX:+TieredCompilation -XX:TieredStopAtLevel=2 compiler.calls.NativeCalls\n+ * @run main\/othervm\/native -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI -Xbootclasspath\/a:.\n+ *    -Xbatch -XX:-UseOnStackReplacement -XX:+TieredCompilation -XX:TieredStopAtLevel=3 compiler.calls.NativeCalls\n+ * @run main\/othervm\/native -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI -Xbootclasspath\/a:.\n+ *    -Xbatch -XX:-UseOnStackReplacement -XX:+TieredCompilation -XX:TieredStopAtLevel=4 compiler.calls.NativeCalls\n+ *\/\n+\n+package compiler.calls;\n+\n+import java.lang.reflect.Method;\n+\n+import jdk.test.whitebox.WhiteBox;\n+\n+public class NativeCalls {\n+    static Method emptyStaticNativeMethod;\n+    static Method callNativeMethod;\n+    static WhiteBox wb;\n+    static {\n+        init();\n+    }\n+    static void init() {\n+        System.loadLibrary(\"NativeCalls\");\n+        wb = WhiteBox.getWhiteBox();\n+        try {\n+            emptyStaticNativeMethod = NativeCalls.class.getDeclaredMethod(\"emptyStaticNative\");\n+            callNativeMethod = NativeCalls.class.getDeclaredMethod(\"callNative\");\n+        } catch (NoSuchMethodException nsme) {\n+            throw new Error(\"TEST BUG: can't find test method\", nsme);\n+        }\n+    }\n+\n+    native static void emptyStaticNative();\n+\n+    static void callNative() {\n+        emptyStaticNative();\n+    }\n+\n+    static public void main(String[] args) {\n+        for (int i = 0; i < 20_000; i++) {\n+            callNative();\n+        }\n+        if (wb.getMethodCompilationLevel(callNativeMethod) > 0) {\n+            if (!wb.isMethodCompiled(emptyStaticNativeMethod)) {\n+                throw new Error(\"TEST BUG: '\" + emptyStaticNativeMethod + \"' should be compiled\");\n+            }\n+        }\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/compiler\/calls\/NativeCalls.java","additions":87,"deletions":0,"binary":false,"changes":87,"status":"added"},{"patch":"@@ -0,0 +1,27 @@\n+\/*\n+ * Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+#include \"jni.h\"\n+\n+JNIEXPORT\n+void JNICALL Java_compiler_calls_NativeCalls_emptyStaticNative(JNIEnv* env, jclass jclazz) {}\n","filename":"test\/hotspot\/jtreg\/compiler\/calls\/libNativeCalls.c","additions":27,"deletions":0,"binary":false,"changes":27,"status":"added"},{"patch":"@@ -0,0 +1,50 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8333366\n+ * @summary Test that CmpU3Nodes are pushed back to the CCP worklist such that the type can be re-evaluated.\n+ * @run main\/othervm -Xbatch -XX:CompileCommand=compileonly,*TestPushCmpU3Node::test\n+ *                   compiler.ccp.TestPushCmpU3Node\n+ *\/\n+\n+package compiler.ccp;\n+\n+import static java.lang.Integer.*;\n+\n+public class TestPushCmpU3Node {\n+    public static void main(String[] args) {\n+        for (int i = 0; i < 10_000; ++i) {\n+            test();\n+        }\n+    }\n+\n+    public static void test() {\n+        for (int i = MAX_VALUE - 50_000; compareUnsigned(i, -1) < 0; ++i) {\n+            if (compareUnsigned(MIN_VALUE, i) < 0) {\n+                return;\n+            }\n+        }\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/compiler\/ccp\/TestPushCmpU3Node.java","additions":50,"deletions":0,"binary":false,"changes":50,"status":"added"},{"patch":"@@ -65,1 +65,1 @@\n-            String sizes = out.firstMatch(\"Usable page sizes:(.*)\", 1);\n+            String sizes = out.firstMatch(\"Usable page sizes:([^.]+)\", 1);\n","filename":"test\/hotspot\/jtreg\/compiler\/codecache\/CheckLargePages.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -48,1 +48,1 @@\n-    public static void wasteCodeCache()  throws Exception {\n+    public static void wasteCodeCache() throws Throwable {\n@@ -51,3 +51,11 @@\n-        for (int i = 0; i < 500; i++) {\n-            ClassLoader cl = new MyClassLoader(url);\n-            refClass(cl.loadClass(\"SomeClass\"));\n+        try {\n+            for (int i = 0; i < 500; i++) {\n+                ClassLoader cl = new MyClassLoader(url);\n+                refClass(cl.loadClass(\"SomeClass\"));\n+            }\n+        } catch (Throwable t) {\n+            \/\/ Expose the root cause of the Throwable instance.\n+            while (t.getCause() != null) {\n+                t = t.getCause();\n+            }\n+            throw t;\n@@ -62,1 +70,1 @@\n-        if (oa.getExitValue() != 0 && !oa.getStderr().contains(\"Out of space in CodeCache for adapters\")) {\n+        if (oa.getExitValue() != 0 && !oa.getOutput().contains(\"Out of space in CodeCache for adapters\")) {\n","filename":"test\/hotspot\/jtreg\/compiler\/codecache\/CodeCacheFullCountTest.java","additions":13,"deletions":5,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -0,0 +1,146 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8324174\n+ * @summary During deoptimization locking and unlocking for nested locks are executed in incorrect order.\n+ * @requires vm.compMode != \"Xint\"\n+ * @run main\/othervm -XX:-TieredCompilation -XX:-BackgroundCompilation -Xmx128M\n+ *                   -XX:CompileCommand=exclude,TestNestedRelockAtDeopt::main TestNestedRelockAtDeopt\n+ *\/\n+\n+import java.util.ArrayList;\n+public class TestNestedRelockAtDeopt {\n+\n+    static final int CHUNK = 1000;\n+    static ArrayList<Object> arr = null;\n+\n+    public static void main(String[] args) {\n+        arr = new ArrayList<>();\n+        try {\n+            while (true) {\n+                test1();\n+            }\n+        } catch (OutOfMemoryError oom) {\n+            arr = null; \/\/ Free memory\n+            System.out.println(\"OOM caught in test1\");\n+        }\n+        arr = new ArrayList<>();\n+        try {\n+            while (true) {\n+                test2();\n+            }\n+        } catch (OutOfMemoryError oom) {\n+            arr = null; \/\/ Free memory\n+            System.out.println(\"OOM caught in test2\");\n+        }\n+        arr = new ArrayList<>();\n+        TestNestedRelockAtDeopt obj = new TestNestedRelockAtDeopt();\n+        try {\n+            while (true) {\n+                test3(obj);\n+            }\n+        } catch (OutOfMemoryError oom) {\n+            arr = null; \/\/ Free memory\n+            System.out.println(\"OOM caught in test3\");\n+        }\n+        arr = new ArrayList<>();\n+        try {\n+            while (true) {\n+                test4(obj);\n+            }\n+        } catch (OutOfMemoryError oom) {\n+            arr = null; \/\/ Free memory\n+            System.out.println(\"OOM caught in test4\");\n+        }\n+    }\n+\n+    \/\/ Nested locks in one method\n+    static void test1() { \/\/ Nested lock in one method\n+        synchronized (TestNestedRelockAtDeopt.class) {\n+            synchronized (new TestNestedRelockAtDeopt()) { \/\/ lock eliminated - not escaped allocation\n+                synchronized (TestNestedRelockAtDeopt.class) { \/\/ nested lock eliminated\n+                    synchronized (new TestNestedRelockAtDeopt()) { \/\/ lock eliminated - not escaped allocation\n+                        synchronized (TestNestedRelockAtDeopt.class) { \/\/ nested lock eliminated\n+                            arr.add(new byte[CHUNK]);\n+                        }\n+                    }\n+                }\n+            }\n+        }\n+    }\n+\n+    \/\/ Nested locks in inlined method\n+    static void foo() {\n+        synchronized (new TestNestedRelockAtDeopt()) {  \/\/ lock eliminated - not escaped allocation\n+            synchronized (TestNestedRelockAtDeopt.class) {  \/\/ nested lock eliminated when inlined\n+                arr.add(new byte[CHUNK]);\n+            }\n+        }\n+    }\n+\n+    static void test2() {\n+        synchronized (TestNestedRelockAtDeopt.class) {\n+            synchronized (new TestNestedRelockAtDeopt()) {  \/\/ lock eliminated - not escaped allocation\n+                synchronized (TestNestedRelockAtDeopt.class) { \/\/ nested lock eliminated\n+                    foo(); \/\/ Inline\n+                }\n+            }\n+        }\n+    }\n+\n+    \/\/ Nested locks in one method\n+    static void test3(TestNestedRelockAtDeopt obj) {\n+        synchronized (TestNestedRelockAtDeopt.class) {\n+            synchronized (obj) { \/\/ lock not eliminated - external object\n+                synchronized (TestNestedRelockAtDeopt.class) { \/\/ nested lock eliminated\n+                    synchronized (obj) { \/\/ nested lock eliminated\n+                        synchronized (TestNestedRelockAtDeopt.class) { \/\/ nested lock eliminated\n+                            arr.add(new byte[CHUNK]);\n+                        }\n+                    }\n+                }\n+            }\n+        }\n+    }\n+\n+    \/\/ Nested locks with different objects in inlined method\n+    static void bar(TestNestedRelockAtDeopt obj) {\n+        synchronized (obj) {  \/\/ nested lock eliminated when inlined\n+            synchronized (TestNestedRelockAtDeopt.class) {  \/\/ nested lock eliminated when inlined\n+                arr.add(new byte[CHUNK]);\n+            }\n+        }\n+    }\n+\n+    static void test4(TestNestedRelockAtDeopt obj) {\n+        synchronized (TestNestedRelockAtDeopt.class) {\n+            synchronized (obj) {  \/\/ lock not eliminated - external object\n+                synchronized (TestNestedRelockAtDeopt.class) { \/\/ nested lock eliminated\n+                    bar(obj); \/\/ Inline\n+                }\n+            }\n+        }\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/compiler\/escapeAnalysis\/TestNestedRelockAtDeopt.java","additions":146,"deletions":0,"binary":false,"changes":146,"status":"added"},{"patch":"@@ -2,2 +2,2 @@\n- * Copyright (c) 2020, 2022, Oracle and\/or its affiliates. All rights reserved.\n- * Copyright (c) 2020, 2022, Arm Limited. All rights reserved.\n+ * Copyright (c) 2020, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2020, 2023, Arm Limited. All rights reserved.\n@@ -258,1 +258,2 @@\n-            code.emitInt(0xdac103be);  \/\/ pacia x30, x29\n+            code.emitInt(0xf94003df);  \/\/ ldr xzr, [x30]\n+            code.emitInt(0xd503231f);  \/\/ paciaz\n@@ -260,2 +261,2 @@\n-        code.emitInt(0xa9be7bfd);  \/\/ stp x29, x30, [sp, #-32]!\n-        code.emitInt(0x910003fd);  \/\/ mov x29, sp\n+        code.emitInt(0xa9bf7bfd);      \/\/ stp x29, x30, [sp, #-16]!\n+        code.emitInt(0x910003fd);      \/\/ mov x29, sp\n@@ -471,2 +472,2 @@\n-        code.emitInt(0x910003bf);  \/\/ mov sp, x29\n-        code.emitInt(0xa8c27bfd);  \/\/ ldp x29, x30, [sp], #32\n+        code.emitInt(0x910003bf);      \/\/ mov sp, x29\n+        code.emitInt(0xa8c17bfd);      \/\/ ldp x29, x30, [sp], #16\n@@ -474,1 +475,2 @@\n-            code.emitInt(0xdac113be);  \/\/ autia x30, x29\n+            code.emitInt(0xd503239f);  \/\/ autiaz\n+            code.emitInt(0xf94003df);  \/\/ ldr xzr, [x30]\n@@ -476,1 +478,1 @@\n-        code.emitInt(0xd65f03c0);  \/\/ ret\n+        code.emitInt(0xd65f03c0);      \/\/ ret\n@@ -482,2 +484,2 @@\n-        code.emitInt(0x910003bf);  \/\/ mov sp, x29\n-        code.emitInt(0xa8c27bfd);  \/\/ ldp x29, x30, [sp], #32\n+        code.emitInt(0x910003bf);      \/\/ mov sp, x29\n+        code.emitInt(0xa8c17bfd);      \/\/ ldp x29, x30, [sp], #16\n@@ -485,1 +487,2 @@\n-            code.emitInt(0xdac113be);  \/\/ autia x30, x29\n+            code.emitInt(0xd503239f);  \/\/ autiaz\n+            code.emitInt(0xf94003df);  \/\/ ldr xzr, [x30]\n@@ -487,1 +490,1 @@\n-        code.emitInt(0xd65f03c0);  \/\/ ret\n+        code.emitInt(0xd65f03c0);      \/\/ ret\n","filename":"test\/hotspot\/jtreg\/compiler\/jvmci\/jdk.vm.ci.code.test\/src\/jdk\/vm\/ci\/code\/test\/aarch64\/AArch64TestAssembler.java","additions":16,"deletions":13,"binary":false,"changes":29,"status":"modified"},{"patch":"@@ -733,0 +733,5 @@\n+    public static final String LOAD_VECTOR_MASKED = PREFIX + \"LOAD_VECTOR_MASKED\" + POSTFIX;\n+    static {\n+        beforeMatchingNameRegex(LOAD_VECTOR_MASKED, \"LoadVectorMasked\");\n+    }\n+\n@@ -1394,0 +1399,5 @@\n+    public static final String STORE_VECTOR_MASKED = PREFIX + \"STORE_VECTOR_MASKED\" + POSTFIX;\n+    static {\n+        beforeMatchingNameRegex(STORE_VECTOR_MASKED, \"StoreVectorMasked\");\n+    }\n+\n","filename":"test\/hotspot\/jtreg\/compiler\/lib\/ir_framework\/IRNode.java","additions":10,"deletions":0,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -0,0 +1,82 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8324969\n+ * @summary C2 incorrectly marks unbalanced (after coarsened locks were eliminated)\n+ *          nested locks for elimination.\n+ * @requires vm.compMode != \"Xint\"\n+ * @run main\/othervm -XX:-BackgroundCompilation TestCoarsenedAndNestedLocksElimination\n+ *\/\n+\n+public class TestCoarsenedAndNestedLocksElimination {\n+\n+    public static void main(String[] strArr) {\n+        for (int i = 0; i < 12000; ++i) {\n+            test1(-1);\n+            test2(-1);\n+        }\n+    }\n+\n+    static synchronized int methodA(int var) {\n+        return var;\n+    }\n+\n+    static synchronized int methodB(int var) {\n+        return var;\n+    }\n+\n+    static int varA = 0;\n+    static int varB = 0;\n+\n+    static void test1(int var) {\n+        synchronized (TestNestedLocksElimination.class) {\n+            for (int i2 = 0; i2 < 3; i2++) { \/\/ Fully unrolled\n+                 varA = methodA(i2);         \/\/ Nested synchronized methods also use\n+                 varB = i2 + methodB(var);   \/\/ TestNestedLocksElimination.class for lock\n+            }\n+        }\n+        TestNestedLocksElimination t = new TestNestedLocksElimination(); \/\/ Triggers EA\n+    }\n+\n+    static boolean test2(int var) {\n+        synchronized (TestNestedLocksElimination.class) {\n+            for (int i1 = 0; i1 < 100; i1++) {\n+                switch (42) {\n+                case 42:\n+                    short[] sArr = new short[256]; \/\/ Big enough to avoid scalarization checks\n+                case 50:\n+                    for (int i2 = 2; i2 < 8; i2 += 2) { \/\/ Fully unrolled\n+                        for (int i3 = 1;;) {\n+                            int var1 = methodA(i2);\n+                            int var2 = i2 + methodB(i3);\n+                            break;\n+                        }\n+                    }\n+                }\n+            }\n+        }\n+        return var > 0;\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/compiler\/locks\/TestCoarsenedAndNestedLocksElimination.java","additions":82,"deletions":0,"binary":false,"changes":82,"status":"added"},{"patch":"@@ -0,0 +1,205 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8334421\n+ * @summary C2 incorrectly marks not-escaped locks for elimination after\n+ *          coarsened locks were eliminated and created unbalanced regions.\n+ * @requires vm.compMode != \"Xint\"\n+ * @run main\/othervm -XX:-TieredCompilation TestCoarsenedAndNotEscapedLocksElimination\n+ * @run main TestCoarsenedAndNotEscapedLocksElimination\n+ *\/\n+\n+import java.util.Vector;\n+\n+class TestVector extends Vector<Object> {\n+\n+    TestVector() {\n+        super();\n+    }\n+\n+    TestVector(int initialCapacity) {\n+        super(initialCapacity);\n+    }\n+\n+    TestVector(int initialCapacity, int capacityIncrement) {\n+        super(initialCapacity, capacityIncrement);\n+    }\n+\n+    Object[] getElementData () {\n+        return elementData; \/\/ access protected field\n+    }\n+}\n+\n+public class TestCoarsenedAndNotEscapedLocksElimination {\n+\n+    public static void main(String[] strArr) {\n+        TestCoarsenedAndNotEscapedLocksElimination tc = new TestCoarsenedAndNotEscapedLocksElimination();\n+        String result = null;\n+        for (int i = 0; i < 12000; ++i) {\n+            result = tc.test();\n+            if (result != null) break;\n+        }\n+        System.out.println(result == null? \"passed\" : result);\n+    }\n+\n+    int [][] vector_types = {\n+       {-1, -1},\n+       {0, -1},\n+       {1, -1},\n+       {2, -1},\n+       {1025, -1},\n+       {0, -2},\n+       {1, -2},\n+       {2, -2},\n+       {1025, -2},\n+       {0, 0},\n+       {1, 0},\n+       {2, 0},\n+       {1025, 0},\n+       {0, 1},\n+       {1, 1},\n+       {2, 1},\n+       {1025, 1},\n+       {0, 1025 },\n+       {1, 1025 },\n+       {2, 1025 },\n+       {1025, 1025 }\n+    };\n+\n+    Object [] elems = {\n+        null,\n+        new Object(),\n+        new Vector(),\n+        new Object[0]\n+    };\n+\n+    int cntr = 0, mode = 0;\n+\n+    void reset() {\n+        cntr = 0;\n+        mode = 0;\n+    }\n+\n+    TestVector nextVector() {\n+        if (cntr == vector_types.length) {\n+            return null;\n+        } else {\n+            TestVector vect;\n+            if (vector_types[cntr][0] < 0) {\n+                vect = new TestVector();\n+            } else if (vector_types[cntr][1] == -2) {\n+                vect = new TestVector(vector_types[cntr][0]);\n+            } else {\n+                vect = new TestVector(vector_types[cntr][0], vector_types[cntr][1]);\n+            }\n+            if (mode == 1) {\n+                vect.addElement(null);\n+                vect.addElement(new Object());\n+                vect.addElement(new Vector());\n+                vect.addElement(new Object[0]);\n+            } else if (mode == 2) {\n+                int cap = vect.capacity();\n+                vect.addElement(null);\n+                for (int i = 0; i < cap; i++) {\n+                    vect.addElement(new Object());\n+                }\n+            }\n+            if (++mode == 3) {\n+                mode = 0;\n+                cntr++;\n+            }\n+            return vect;\n+        }\n+    }\n+\n+    public String test() {\n+        reset();\n+        TestVector vect = (TestVector)nextVector();\n+        while (vect != null) {\n+            Object [] backup_array = new Object[vect.size()];\n+            System.arraycopy(vect.getElementData(),0,backup_array,0,vect.size());\n+\n+            int old_size = vect.size();\n+            vect.setSize(vect.size());\n+            if (vect.size() != old_size) {\n+                return \"Vector: \"+vect+\" size changed after setSize(size())\";\n+            }\n+            for (int i = 0; i < vect.size(); i++) {\n+                if (vect.elementAt(i) != backup_array[i]) {\n+                    return \"Vector: \"+vect+\" : \"+i+\"th element changed after setSize(size())\";\n+                }\n+            }\n+\n+            old_size = vect.size();\n+            vect.setSize(vect.size()*2);\n+            if (vect.size() != old_size*2) {\n+                return \"Vector: \"+vect+\" size incorrectly changed after setSize(size()*2)\";\n+            }\n+            for (int i = 0; i < old_size; i++) {\n+                if (vect.elementAt(i) != backup_array[i]) {\n+                    return \"Vector: \"+vect+\" : \"+i+\"th element changed after setSize(size()*2)\";\n+                }\n+            }\n+            for (int i = old_size; i < old_size*2; i++) {\n+                if (vect.elementAt(i) != null) {\n+                    return \"Vector: \"+vect+\" : \"+i+\"th element not null after setSize(size()*2)\";\n+                }\n+            }\n+\n+            old_size = vect.size();\n+            int old_cap = vect.capacity();\n+            vect.setSize(vect.capacity()+1);\n+            if (vect.size() != old_cap+1) {\n+                return \"Vector: \"+vect+\" size incorrectly changed after setSize(capacity()+1)\";\n+            }\n+            for (int i = 0; i < old_size && i < backup_array.length; i++) {\n+                if (vect.elementAt(i) != backup_array[i]) {\n+                    return \"Vector: \"+vect+\" : \"+i+\"th element changed after setSize(capacity()+1)\";\n+                }\n+            }\n+            for (int i = old_size; i < old_cap + 1; i++) {\n+                if (vect.elementAt(i) != null) {\n+                    return \"Vector: \"+vect+\" : \"+i+\"th element not null after setSize(capacity()+1)\";\n+                }\n+            }\n+\n+            old_size = vect.size();\n+            vect.setSize(vect.size()\/2);\n+            if (vect.size() != old_size\/2) {\n+                return \"Vector: \"+vect+\" size incorrectly changed after setSize(size()\/2)\";\n+            }\n+            for (int i = 0; i < old_size\/2 && i < backup_array.length; i++) {\n+                if (vect.elementAt(i) != backup_array[i]) {\n+                    return \"Vector: \"+vect+\" : \"+i+\"th element changed after setSize(size()\/2)\";\n+                }\n+            }\n+\n+            vect = nextVector();\n+        }\n+        return null;\n+    }\n+\n+}\n+\n","filename":"test\/hotspot\/jtreg\/compiler\/locks\/TestCoarsenedAndNotEscapedLocksElimination.java","additions":205,"deletions":0,"binary":false,"changes":205,"status":"added"},{"patch":"@@ -0,0 +1,70 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8322743\n+ * @summary EA incorrectly marks locks for elimination for escaped object which comes from Interpreter in OSR compilation.\n+ * @run main\/othervm -XX:-TieredCompilation -Xcomp -XX:CompileCommand=compileonly,TestLocksInOSR*::* -XX:CompileCommand=quiet TestLocksInOSR\n+ * @run main TestLocksInOSR\n+ *\/\n+\n+public class TestLocksInOSR {\n+\n+    public static void main(String[] args) throws Exception {\n+        \/\/ Triggers assert(this->held_monitor_count() == this->jni_monitor_count()) failed: held monitor count should be equal to jni: 1 != 0\n+        test1();\n+\n+        \/\/ Triggers assert(current->held_monitor_count() == 0) failed: Should not be possible\n+        test2();\n+    }\n+\n+    static void test1() throws Exception {\n+        Thread writeThread = new Thread(new Runnable() {\n+            @Override\n+            public void run() {\n+                for (int i = 0; i < 2; ++i) {\n+                    synchronized (new Object()) {\n+                        \/\/ Trigger OSR compilation\n+                        for (int j = 0; j < 100_000; ++j) {\n+                          \/\/ We still have safepoint left in code\n+                        }\n+                    }\n+                }\n+            }\n+        });\n+        writeThread.start();\n+        writeThread.join();\n+    }\n+\n+    static void test2() {\n+        for (int i = 0; i < 2; ++i) {\n+            synchronized (new Object()) {\n+                \/\/ Trigger OSR compilation\n+                for (int j = 0; j < 100_000; ++j) {\n+                  \/\/ We still have safepoint left in code\n+                }\n+            }\n+        }\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/compiler\/locks\/TestLocksInOSR.java","additions":70,"deletions":0,"binary":false,"changes":70,"status":"added"},{"patch":"@@ -0,0 +1,238 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/**\n+ * @test\n+ * @bug 8322996\n+ * @summary Ensure no assert error in C2 with deeply nested synchronize\n+ *          statements.\n+ * @run main\/othervm -XX:CompileCommand=compileonly,compiler.locks.TestNestedSynchronize::test\n+ *                   -Xcomp\n+ *                   compiler.locks.TestNestedSynchronize\n+ *\/\n+\n+package compiler.locks;\n+\n+public class TestNestedSynchronize {\n+\n+    public static void main(String[] args) {\n+        test();\n+    }\n+\n+    public static void test() {\n+\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+        synchronized (TestNestedSynchronize.class) {\n+\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+        }\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/compiler\/locks\/TestNestedSynchronize.java","additions":238,"deletions":0,"binary":false,"changes":238,"status":"added"},{"patch":"@@ -0,0 +1,42 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/**\n+ * @test\n+ * @bug 8323972\n+ * @summary C2 compilation fails with assert(!x->as_Loop()->is_loop_nest_inner_loop()) failed: loop was transformed\n+ *\n+ * @run main\/othervm -Xcomp -XX:CompileCommand=compileonly,TestInaccurateInnerLoopLimit::test* -XX:-TieredCompilation TestInaccurateInnerLoopLimit\n+ *\n+ *\/\n+\n+public class TestInaccurateInnerLoopLimit {\n+\n+    public static void main(String args[]) {\n+        test();\n+    }\n+\n+    public static void test() {\n+        for (long i = 9223372034707292164L; i > 9223372034707292158L; i += -2L) { }\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/compiler\/longcountedloops\/TestInaccurateInnerLoopLimit.java","additions":42,"deletions":0,"binary":false,"changes":42,"status":"added"},{"patch":"@@ -0,0 +1,57 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8327423\n+ * @summary Test empty loop removal of pre-loop, with different main-loop after it.\n+ * @run main\/othervm -Xcomp\n+ *      -XX:CompileCommand=compileonly,compiler.loopopts.TestEmptyPreLoopForDifferentMainLoop::test\n+ *      compiler.loopopts.TestEmptyPreLoopForDifferentMainLoop\n+ * @run main compiler.loopopts.TestEmptyPreLoopForDifferentMainLoop\n+ *\/\n+\n+package compiler.loopopts;\n+\n+public class TestEmptyPreLoopForDifferentMainLoop {\n+    static int sink;\n+\n+    public static void main(String args[]) {\n+        test(false);\n+    }\n+\n+    static void test(boolean flag) {\n+        int x = 8;\n+        for (int j = 0; j < 100; j++) {\n+            for (int k = 0; k < 100; k++) {\n+                if (flag) {\n+                    x += k;\n+                    sink = 42;\n+                }\n+            }\n+            if (flag) {\n+                break;\n+            }\n+        }\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/compiler\/loopopts\/TestEmptyPreLoopForDifferentMainLoop.java","additions":57,"deletions":0,"binary":false,"changes":57,"status":"added"},{"patch":"@@ -0,0 +1,48 @@\n+\/*\n+ * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8316361\n+ * @summary Test that if input to OpaqueZeroTripGuard changes, we notify down to CmpI.\n+ * @run main\/othervm -Xcomp -XX:+IgnoreUnrecognizedVMOptions -XX:VerifyIterativeGVN=10\n+ *                   -XX:CompileCommand=compileonly,compiler.loopopts.TestNotifyOpaqueZeroTripGuardToCmpI::test\n+ *                   compiler.loopopts.TestNotifyOpaqueZeroTripGuardToCmpI\n+ *\/\n+package compiler.loopopts;\n+\n+public class TestNotifyOpaqueZeroTripGuardToCmpI {\n+    static int x, y;\n+\n+    public static void main(String[] strArr) {\n+        test();\n+    }\n+\n+    static void test() {\n+        for (int i = 6; i < 43; i++) {\n+            for (int j = i; j < 11; j++) {\n+                x = y;\n+            }\n+        }\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/compiler\/loopopts\/TestNotifyOpaqueZeroTripGuardToCmpI.java","additions":48,"deletions":0,"binary":false,"changes":48,"status":"added"},{"patch":"@@ -0,0 +1,332 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test id=Xbatch\n+ * @bug 8332920\n+ * @summary Tests partial peeling at unsigned tests with limit being negative in exit tests \"i >u limit\".\n+ * @run main\/othervm -Xbatch -XX:-TieredCompilation\n+ *                   -XX:CompileCommand=compileonly,*TestPartialPeel*::original*\n+ *                   -XX:CompileCommand=compileonly,*TestPartialPeel*::test*\n+ *                   compiler.loopopts.TestPartialPeelAtUnsignedTestsNegativeLimit\n+ *\/\n+\n+\/*\n+ * @test id=Xcomp-run-inline\n+ * @bug 8332920\n+ * @summary Tests partial peeling at unsigned tests with limit being negative in exit tests \"i >u limit\".\n+ * @run main\/othervm -Xcomp -XX:-TieredCompilation\n+ *                   -XX:CompileCommand=compileonly,*TestPartialPeel*::original*\n+ *                   -XX:CompileCommand=compileonly,*TestPartialPeel*::run*\n+ *                   -XX:CompileCommand=compileonly,*TestPartialPeel*::test*\n+ *                   -XX:CompileCommand=inline,*TestPartialPeelAtUnsignedTestsNegativeLimit::test*\n+ *                   -XX:CompileCommand=dontinline,*TestPartialPeelAtUnsignedTestsNegativeLimit::check\n+ *                   compiler.loopopts.TestPartialPeelAtUnsignedTestsNegativeLimit\n+ *\/\n+\n+\/*\n+ * @test id=Xcomp-compile-test\n+ * @bug 8332920\n+ * @summary Tests partial peeling at unsigned tests with limit being negative in exit tests \"i >u limit\".\n+ * @run main\/othervm -Xcomp -XX:-TieredCompilation\n+ *                   -XX:CompileCommand=compileonly,*TestPartialPeel*::original*\n+ *                   -XX:CompileCommand=compileonly,*TestPartialPeel*::test*\n+ *                   compiler.loopopts.TestPartialPeelAtUnsignedTestsNegativeLimit\n+ *\/\n+\n+\/*\n+ * @test id=vanilla\n+ * @bug 8332920\n+ * @requires vm.flavor == \"server\" & (vm.opt.TieredStopAtLevel == null | vm.opt.TieredStopAtLevel == 4)\n+ * @summary Tests partial peeling at unsigned tests with limit being negative in exit tests \"i >u limit\".\n+ *          Only run this test with C2 since it is time-consuming and only tests a C2 issue.\n+ * @run main compiler.loopopts.TestPartialPeelAtUnsignedTestsNegativeLimit\n+ *\/\n+\n+package compiler.loopopts;\n+\n+import java.util.Random;\n+\n+import static java.lang.Integer.*;\n+\n+public class TestPartialPeelAtUnsignedTestsNegativeLimit {\n+    static int iFld = 10000;\n+    static int iterations = 0;\n+    static int iFld2;\n+    static boolean flag;\n+    final static Random RANDOM = new Random();\n+\n+    public static void main(String[] args) {\n+        compareUnsigned(3, 3); \/\/ Load Integer class for -Xcomp\n+        for (int i = 0; i < 2; i++) {\n+            if (!originalTest()) {\n+                throw new RuntimeException(\"originalTest() failed\");\n+            }\n+        }\n+\n+        for (int i = 0; i < 2000; i++) {\n+            \/\/ For profiling\n+            iFld = -1;\n+            originalTestVariation1();\n+\n+            \/\/ Actual run\n+            iFld = MAX_VALUE - 100_000;\n+            if (!originalTestVariation1()) {\n+                throw new RuntimeException(\"originalTestVariation1() failed\");\n+            }\n+        }\n+\n+        for (int i = 0; i < 2000; ++i) {\n+            \/\/ For profiling\n+            iFld = MAX_VALUE;\n+            originalTestVariation2();\n+\n+            \/\/ Actual run\n+            iFld = MIN_VALUE + 100000;\n+            if (!originalTestVariation2()) {\n+                throw new RuntimeException(\"originalTestVariation2() failed\");\n+            }\n+        }\n+\n+        runWhileLTIncr();\n+        runWhileLTDecr();\n+    }\n+\n+    \/\/ Originally reported simplified regression test with 2 variations (see below).\n+    public static boolean originalTest() {\n+        for (int i = MAX_VALUE - 50_000; compareUnsigned(i, -1) < 0; i++) {\n+            if (compareUnsigned(MIN_VALUE, i) < 0) {\n+                return true;\n+            }\n+        }\n+        return false;\n+    }\n+\n+    public static boolean originalTestVariation1() {\n+        int a = 0;\n+        for (int i = iFld; compareUnsigned(i, -1) < 0; ++i) { \/\/ i <u -1\n+\n+            if (i >= Integer.MIN_VALUE + 1 && i <= 100) { \/\/ Transformed to unsigned test.\n+                return true;\n+            }\n+            a *= 23;\n+        }\n+        return false;\n+    }\n+\n+    public static boolean originalTestVariation2() {\n+        int a = 0;\n+        for (int i = iFld; compareUnsigned(i, -1000) < 0; i--) { \/\/ i <u -1\n+            if (compareUnsigned(MAX_VALUE - 20, i) > 0) {\n+                return true;\n+            }\n+            a = i;\n+        }\n+        System.out.println(a);\n+        return false;\n+    }\n+\n+\n+    public static void testWhileLTIncr(int init, int limit) {\n+        int i = init;\n+        while (true) {\n+            \/\/ <Peeled Section>\n+\n+            \/\/ Found as loop head in ciTypeFlow, but both paths inside loop -> head not cloned.\n+            \/\/ As a result, this head has the safepoint as backedge instead of the loop exit test\n+            \/\/ and we cannot create a counted loop (yet). We first need to partial peel.\n+            if (flag) {\n+            }\n+\n+            iFld2++;\n+\n+            \/\/ Loop exit test i >=u limit (i.e. \"while (i <u limit)\") to partial peel with.\n+            \/\/ insert_cmpi_loop_exit() changes this exit condition into a signed and an unsigned test:\n+            \/\/   i >= limit && i >=u limit\n+            \/\/ where the signed condition can be used as proper loop exit condition for a counted loop\n+            \/\/ (we cannot use an unsigned counted loop exit condition).\n+            \/\/\n+            \/\/ After Partial Peeling, we have:\n+            \/\/   if (i >= limit) goto Exit\n+            \/\/ Loop:\n+            \/\/   if (i >=u limit) goto Exit\n+            \/\/   ...\n+            \/\/   i++;\n+            \/\/   if (i >= limit) goto Exit\n+            \/\/   goto Loop\n+            \/\/ Exit:\n+            \/\/   ...\n+            \/\/\n+            \/\/ If init = MAX_VALUE and limit = MIN_VALUE:\n+            \/\/   i >= limit\n+            \/\/   MAX_VALUE >= MIN_VALUE\n+            \/\/ which is true where\n+            \/\/   i >=u limit\n+            \/\/   MAX_VALUE >=u MIN_VALUE\n+            \/\/   MAX_VALUE >=u (uint)(MAX_INT + 1)\n+            \/\/ is false and we wrongly never enter the loop even though we should have.\n+            \/\/ This results in a wrong execution.\n+            if (compareUnsigned(i, limit) >= 0) {\n+                return;\n+            }\n+            \/\/ <-- Partial Peeling CUT -->\n+            \/\/ Safepoint\n+            \/\/ <Unpeeled Section>\n+            iterations++;\n+            i++;\n+        }\n+    }\n+\n+    \/\/ Same as testWhileLTIncr() but with decrement instead.\n+    public static void testWhileLTDecr(int init, int limit) {\n+        int i = init;\n+        while (true) {\n+            if (flag) {\n+            }\n+\n+            \/\/ Loop exit test.\n+            if (compareUnsigned(i, limit) >= 0) { \/\/ While (i <u limit)\n+                return;\n+            }\n+\n+            iterations++;\n+            i--;\n+        }\n+    }\n+\n+    public static void runWhileLTIncr() {\n+        \/\/ Currently works:\n+        testWhileLTIncr(MAX_VALUE, -1);\n+        check(MIN_VALUE); \/\/ MAX_VALUE + 1 iterations\n+        testWhileLTIncr(-1, 1);\n+        check(0);\n+        testWhileLTIncr(0, 0);\n+        check(0);\n+        checkIncrWithRandom(0, 0); \/\/ Sanity check this method.\n+        flag = !flag; \/\/ Change profiling\n+        testWhileLTIncr(MAX_VALUE - 2000, MAX_VALUE);\n+        check(2000);\n+        testWhileLTIncr(MAX_VALUE - 1990, MAX_VALUE);\n+        check(1990);\n+        testWhileLTIncr(MAX_VALUE - 1, MAX_VALUE);\n+        check(1);\n+        testWhileLTIncr(MIN_VALUE, MIN_VALUE + 2000);\n+        check(2000);\n+        testWhileLTIncr(MIN_VALUE, MIN_VALUE + 1990);\n+        check(1990);\n+        testWhileLTIncr(MIN_VALUE, MIN_VALUE + 1);\n+        check(1);\n+\n+        flag = !flag;\n+        \/\/ Overflow currently does not work with negative limit and is fixed with patch:\n+        testWhileLTIncr(MAX_VALUE, MIN_VALUE);\n+        check(1);\n+        testWhileLTIncr(MAX_VALUE - 2000, MIN_VALUE);\n+        check(2001);\n+        testWhileLTIncr(MAX_VALUE, MIN_VALUE + 2000);\n+        check(2001);\n+        testWhileLTIncr(MAX_VALUE - 2000, MIN_VALUE + 2000);\n+        check(4001);\n+\n+        \/\/ Random values\n+        int init = RANDOM.nextInt(0, MAX_VALUE);\n+        int limit = RANDOM.nextInt(MIN_VALUE, 0);\n+        testWhileLTIncr(init, limit);\n+        checkIncrWithRandom(init, limit);\n+    }\n+\n+    public static void runWhileLTDecr() {\n+        \/\/ Currently works:\n+        testWhileLTDecr(1, -1);\n+        check(2);\n+        testWhileLTDecr(-1, 1);\n+        check(0);\n+        testWhileLTDecr(0, 0);\n+        check(0);\n+        checkDecrWithRandom(0, 0); \/\/ Sanity check this method.\n+        flag = !flag;\n+        testWhileLTDecr(MAX_VALUE, MIN_VALUE);\n+        check(MIN_VALUE); \/\/ MAX_VALUE + 1 iterations\n+        testWhileLTDecr(MAX_VALUE, -1);\n+        check(MIN_VALUE); \/\/ MAX_VALUE + 1 iterations\n+        testWhileLTDecr(MAX_VALUE, MIN_VALUE);\n+        check(MIN_VALUE); \/\/ MAX_VALUE + 1 iterations\n+        testWhileLTDecr(MIN_VALUE, 0);\n+        check(0);\n+        testWhileLTDecr(MIN_VALUE, 1);\n+        check(0);\n+        flag = !flag;\n+\n+        \/\/ Underflow currently does not work with negative limit and is fixed with patch:\n+        testWhileLTDecr(MIN_VALUE, -1);\n+        check(MIN_VALUE + 1); \/\/ MAX_VALUE + 2 iterations\n+        testWhileLTDecr(MIN_VALUE, -2000);\n+        check(MIN_VALUE + 1); \/\/ MAX_VALUE + 2 iterations\n+        testWhileLTDecr(MIN_VALUE, MIN_VALUE + 1);\n+        check(MIN_VALUE + 1); \/\/ MAX_VALUE + 2 iterations\n+        testWhileLTDecr(MIN_VALUE + 2000, -1);\n+        check(MIN_VALUE + 2001); \/\/ MAX_VALUE + 2002 iterations\n+        testWhileLTDecr(MIN_VALUE + 2000, -2000);\n+        check(MIN_VALUE + 2001); \/\/ MAX_VALUE + 2002 iterations\n+        testWhileLTDecr(MIN_VALUE + 2000, MIN_VALUE + 2001);\n+        check(MIN_VALUE + 2001); \/\/ MAX_VALUE + 2002 iterations\n+\n+        \/\/ Random values\n+        int r1 = RANDOM.nextInt(MIN_VALUE, 0);\n+        int r2 = RANDOM.nextInt(MIN_VALUE, 0);\n+        int init = Math.min(r1, r2);\n+        int limit = Math.max(r1, r2);\n+        testWhileLTDecr(init, limit);\n+        checkDecrWithRandom(init, limit);\n+    }\n+\n+    static void check(int expectedIterations) {\n+        if (expectedIterations != iterations) {\n+            throw new RuntimeException(\"Expected \" + expectedIterations + \" iterations but only got \" + iterations);\n+        }\n+        iterations = 0; \/\/ Reset\n+    }\n+\n+    static void checkIncrWithRandom(long init, long limit) {\n+        long expectedIterations = ((long)(MAX_VALUE) - init) + (limit - (long)MIN_VALUE) + 1;\n+        if ((int)expectedIterations != iterations) {\n+            String error = \"Expected %d iterations but only got %d, init: %d, limit: %d\"\n+                            .formatted(expectedIterations, iterations, init, limit);\n+            throw new RuntimeException(error);\n+        }\n+        iterations = 0; \/\/ Reset\n+    }\n+\n+    static void checkDecrWithRandom(long init, long limit) {\n+        long expectedIterations = init + MIN_VALUE + MAX_VALUE + 2;\n+        if (init == limit) {\n+            expectedIterations = 0;\n+        }\n+        if ((int)expectedIterations != iterations) {\n+            String error = \"Expected %d iterations but only got %d, init: %d, limit: %d\"\n+                    .formatted(expectedIterations, iterations, init, limit);\n+            throw new RuntimeException(error);\n+        }\n+        iterations = 0; \/\/ Reset\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/compiler\/loopopts\/TestPartialPeelAtUnsignedTestsNegativeLimit.java","additions":332,"deletions":0,"binary":false,"changes":332,"status":"added"},{"patch":"@@ -0,0 +1,53 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8321278\n+ * @summary C2: Partial peeling fails with assert \"last_peel <- first_not_peeled\"\n+ * @run main\/othervm -XX:CompileCommand=quiet -XX:CompileCommand=compileonly,TestPartialPeelingAtSingleInputRegion::test\n+ *                   -XX:-TieredCompilation -Xbatch -XX:PerMethodTrapLimit=0 TestPartialPeelingAtSingleInputRegion\n+ *\n+ *\/\n+\n+public class TestPartialPeelingAtSingleInputRegion {\n+\n+    static void test() {\n+        for (int i = 100; i > 10; --i) {\n+            for (int j = i; j < 10; ++j) {\n+                switch (j) {\n+                case 1:\n+                    if (j != 0) {\n+                        return;\n+                    }\n+                }\n+             }\n+        }\n+    }\n+\n+    public static void main(String[] args) {\n+        for (int i = 0; i < 10_000; ++i) {\n+            test();\n+        }\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/compiler\/loopopts\/TestPartialPeelingAtSingleInputRegion.java","additions":53,"deletions":0,"binary":false,"changes":53,"status":"added"},{"patch":"@@ -0,0 +1,115 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8330819\n+ * @summary Case where VPointer finds an \"adr\" CastX2P, which contains a CastLL,\n+ *          that has a ctrl after the pre-loop. This value cannot be used in the\n+ *          pre-loop limit for main-loop adjustment.\n+ * @modules java.base\/jdk.internal.misc\n+ * @modules java.base\/jdk.internal.util\n+ * @compile --enable-preview -source ${jdk.version} TestMemorySegmentMainLoopAlignment.java\n+ * @run main\/othervm --enable-preview -Xbatch compiler.loopopts.superword.TestMemorySegmentMainLoopAlignment\n+ *\/\n+\n+package compiler.loopopts.superword;\n+\n+import java.lang.foreign.*;\n+import jdk.internal.misc.Unsafe;\n+import jdk.internal.util.Preconditions;\n+\n+public class TestMemorySegmentMainLoopAlignment {\n+    static final ValueLayout.OfInt ELEMENT_LAYOUT = ValueLayout.JAVA_INT.withByteAlignment(1);\n+    static final Unsafe UNSAFE = Unsafe.getUnsafe();\n+    static long RANGE = 6400;\n+\n+    \/\/ Type definition for the lambda\n+    interface MSOp {\n+        int apply(MemorySegment memory, long offset, int i);\n+    }\n+\n+    \/\/ Type definition for the lambda\n+    interface MemoryUnsafeOp {\n+        int apply(long base, long offset, int i);\n+    }\n+\n+    public static void main(String[] args) {\n+        \/\/ Allocate some raw memory:\n+        MemorySegment ms = Arena.ofAuto().allocate(6400, Integer.SIZE);\n+        for (int i = 0; i < 10_000; i++) {\n+            test1(ms, 0, TestMemorySegmentMainLoopAlignment::memorySegmentGet);\n+        }\n+        \/\/ Allocate some raw memory:\n+        long base = UNSAFE.allocateMemory(6400);\n+        for (int i = 0; i < 10_000; i++) {\n+            test2(base, 0, TestMemorySegmentMainLoopAlignment::memoryUnsafeGet);\n+        }\n+    }\n+\n+    \/\/ Somehow, it is necessary to pass this as a lambda\n+    \/\/ the checkIndex inside the \"get\" method produces the CastLL, which eventually pins the index\n+    \/\/ between the pre and main loop.\n+    static int memorySegmentGet(MemorySegment ms, long o, int i) {\n+        return ms.get(ELEMENT_LAYOUT, o + i * 4L);\n+    }\n+\n+    static int test1(MemorySegment a, long offset, MSOp f) {\n+        \/\/ Constant size array size allows a known range for the array access\/loop iv i.\n+        int size = 16;\n+        int[] res = new int[size];\n+        int sum = 0;\n+        for (int i = 0; i < size; i++) {\n+            \/\/ With inlining, this eventually becomes:\n+            \/\/ sum += LoadI(MemorySegment \/ unsafe) + LoadI(array)\n+            \/\/ and we attempt vectorization.\n+            sum += f.apply(a, offset, i) + res[i];\n+        }\n+        return sum;\n+    }\n+\n+    \/\/ Somehow, it is necessary to pass this as a lambda\n+    static int memoryUnsafeGet(long base, long o, int i) {\n+        long index = o + i * 4L;\n+        \/\/ checkIndex -> CastLL: index >= 0.\n+        \/\/ Together with the info about i (known range for phi), this CastLL floats up to\n+        \/\/ the offset. Then we get adr = CastX2P(base + CastLL(offset)), where the CastLL\n+        \/\/ is pinned between the pre and main loop.\n+        Preconditions.checkIndex(index, RANGE, null);\n+        return UNSAFE.getInt(base + index);\n+    }\n+\n+    static int test2(long base, long offset, MemoryUnsafeOp f) {\n+        \/\/ Constant size array size allows a known range for the array access\/loop iv i.\n+        int size = 16;\n+        int[] res = new int[size];\n+        int sum = 0;\n+        for (int i = 0; i < size; i++) {\n+            \/\/ With inlining, this eventually becomes:\n+            \/\/ sum += LoadI(unsafe) + LoadI(array)\n+            \/\/ and we attempt vectorization.\n+            sum += f.apply(base, offset, i) + res[i];\n+        }\n+        return sum;\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/compiler\/loopopts\/superword\/TestMemorySegmentMainLoopAlignment.java","additions":115,"deletions":0,"binary":false,"changes":115,"status":"added"},{"patch":"@@ -0,0 +1,61 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8325494\n+ * @summary C2: Broken graph after not skipping CastII node anymore for Assertion Predicates after JDK-8309902\n+ * @run main\/othervm -XX:-TieredCompilation -Xcomp -XX:CompileOnly=TestAssertionPredicateDoesntConstantFold::test TestAssertionPredicateDoesntConstantFold\n+ *\n+ *\/\n+\n+public class TestAssertionPredicateDoesntConstantFold {\n+    static boolean bFld;\n+    static int iArrFld[];\n+    static long lArrFld[];\n+\n+    public static void main(String[] strArr) {\n+        try {\n+            test();\n+        } catch (NullPointerException npe) {}\n+    }\n+\n+    static long test() {\n+        int i6 = 1, i7, i11;\n+        do {\n+            for (i7 = 1; i7 < 9; ++i7) {\n+                for (i11 = 2; i6 < i11; i11 -= 2) {\n+                    if (bFld) {\n+                        break;\n+                    }\n+\n+                    lArrFld[i11 + 1] = 6;\n+                    iArrFld[i11 % 20] = 3;\n+                }\n+            }\n+        } while (++i6 < 8);\n+\n+        return i6;\n+    }\n+}\n+\n","filename":"test\/hotspot\/jtreg\/compiler\/predicates\/TestAssertionPredicateDoesntConstantFold.java","additions":61,"deletions":0,"binary":false,"changes":61,"status":"added"},{"patch":"@@ -0,0 +1,130 @@\n+\/*\n+ * Copyright (c) 2024, Red Hat, Inc. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8323274\n+ * @summary partial peeling loop can cause an array load to become dependent on a test other than its range check\n+ * @run main\/othervm -XX:-UseOnStackReplacement -XX:-TieredCompilation -XX:-BackgroundCompilation TestArrayAccessAboveRCAfterPartialPeeling\n+ *\/\n+\n+public class TestArrayAccessAboveRCAfterPartialPeeling {\n+    private static volatile int volatileField;\n+\n+    public static void main(String[] args) {\n+        int[] array = new int[100];\n+        for (int i = 0; i < 20_000; i++) {\n+            test(array, 2, true, 1);\n+            test(array, 2, false, 1);\n+            inlined(array, 2, 42, true, 42, 1, 1);\n+            inlined(array, 2, 42, false, 42, 1, 1);\n+        }\n+        try {\n+            test(array, 2, true, -1);\n+        } catch (ArrayIndexOutOfBoundsException arrayIndexOutOfBoundsException) {\n+        }\n+    }\n+\n+    private static int test(int[] array, int k, boolean flag, int j) {\n+        int l;\n+        for (l = 1; l < 2; l *= 2) {\n+\n+        }\n+        int m;\n+        for (m = 0; m < 42; m += l) {\n+\n+        }\n+        int n;\n+        for (n = 0; n < 10; n += m\/42) {\n+\n+        }\n+        return inlined(array, k, l, flag, m, n\/10, j);\n+    }\n+\n+    private static int inlined(int[] array, int k, int l, boolean flag, int m, int n, int j) {\n+        if (array == null) {\n+        }\n+        int[] otherArray = new int[100];\n+        int i = 0;\n+        int v = 0;\n+        if (k == m) {\n+        }\n+\n+        if (flag) {\n+            v += array[j];\n+            v += otherArray[i];\n+\n+            for (; ; ) {\n+                synchronized (new Object()) {\n+                }\n+                if (j >= 100) {\n+                    break;\n+                }\n+                if (k == 42) {\n+                }\n+                v += array[j];\n+                v += otherArray[i];\n+                if (i >= n) {\n+                    otherArray[i] = v;\n+                }\n+                v += array[j];\n+                if (l == 2) {\n+                    break;\n+                }\n+                i++;\n+                j *= 2;\n+                volatileField = 42;\n+                k = 2;\n+                l = 42;\n+            }\n+        } else {\n+            v += array[j];\n+            v += otherArray[i];\n+\n+            for (; ; ) {\n+                synchronized (new Object()) {\n+                }\n+                if (j >= 100) {\n+                    break;\n+                }\n+                if (k == 42) {\n+                }\n+                v += array[j];\n+                v += otherArray[i];\n+                if (i >= n) {\n+                    otherArray[i] = v;\n+                }\n+                v += array[j];\n+                if (l == 2) {\n+                    break;\n+                }\n+                i++;\n+                j *= 2;\n+                volatileField = 42;\n+                k = 2;\n+                l = 42;\n+            }\n+        }\n+        return v;\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/compiler\/rangechecks\/TestArrayAccessAboveRCAfterPartialPeeling.java","additions":130,"deletions":0,"binary":false,"changes":130,"status":"added"},{"patch":"@@ -0,0 +1,132 @@\n+\/*\n+ * Copyright (c) 2024, Red Hat, Inc. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8323274\n+ * @summary sinking an array load out of loop can cause it to become dependent on a test other than its range check\n+ * @run main\/othervm -XX:-UseOnStackReplacement -XX:-TieredCompilation -XX:-BackgroundCompilation TestArrayAccessAboveRCAfterSinking\n+ *\/\n+\n+\n+import java.util.Arrays;\n+\n+public class TestArrayAccessAboveRCAfterSinking {\n+    public static void main(String[] args) {\n+        boolean[] allFalse = new boolean[100];\n+        boolean[] allTrue = new boolean[100];\n+        Arrays.fill(allTrue, true);\n+        int[] array = new int[100];\n+        for (int i = 0; i < 20_000; i++) {\n+            test1(allTrue, array, 0, true, 0);\n+            test1(allTrue, array, 0, false, 0);\n+            inlined1(allFalse, array, 2, 0);\n+            inlined1(allFalse, array, 42, 0);\n+            inlined1(allTrue, array, 2, 0);\n+            test2(allTrue, array, 0, true, 0);\n+            test2(allTrue, array, 0, false, 0);\n+            inlined2(allFalse, array, 2, 0);\n+            inlined2(allFalse, array, 42, 0);\n+            inlined2(allTrue, array, 2, 0);\n+        }\n+        try {\n+            test1(allTrue, array, -1, true, 0);\n+        } catch (ArrayIndexOutOfBoundsException arrayIndexOutOfBoundsException) {\n+        }\n+        try {\n+            test2(allTrue, array, -1, true, 0);\n+        } catch (ArrayIndexOutOfBoundsException arrayIndexOutOfBoundsException) {\n+        }\n+    }\n+\n+    private static int test1(boolean[] flags, int[] array, int k, boolean flag, int v) {\n+        if (flags == null) {\n+        }\n+        if (array == null) {\n+        }\n+        int j = 1;\n+        for (; j < 2; j *= 2) {\n+        }\n+        int i;\n+        for (i = 0; i < 10; i += j) {\n+\n+        }\n+        if (flags[i - 10]) {\n+            if (flag) {\n+                return inlined1(flags, array, j, k);\n+            } else {\n+                return inlined1(flags, array, j, k) + v;\n+            }\n+        }\n+        return 0;\n+    }\n+\n+    private static int inlined1(boolean[] flags, int[] array, int j, int k) {\n+        for (int i = 0; i < 100; i++) {\n+            final boolean flag = flags[i & (j - 3)];\n+            int v = array[i + k];\n+            if (flag) {\n+                return v;\n+            }\n+            if (j + (i & (j - 2)) == 2) {\n+                break;\n+            }\n+        }\n+        return 0;\n+    }\n+\n+    private static int test2(boolean[] flags, int[] array, int k, boolean flag, int v) {\n+        if (flags == null) {\n+        }\n+        if (array == null) {\n+        }\n+        int j = 1;\n+        for (; j < 2; j *= 2) {\n+        }\n+        int i;\n+        for (i = 0; i < 10; i += j) {\n+\n+        }\n+        if (flags[i - 10]) {\n+            if (flag) {\n+                return inlined2(flags, array, j, k);\n+            } else {\n+                return inlined2(flags, array, j, k) + v;\n+            }\n+        }\n+        return 0;\n+    }\n+\n+    private static int inlined2(boolean[] flags, int[] array, int j, int k) {\n+        for (int i = 0; i < 100; i++) {\n+            int v = array[i + k];\n+            if (flags[i & (j - 3)]) {\n+                return v;\n+            }\n+            if (j + (i & (j - 2)) == 2) {\n+                break;\n+            }\n+        }\n+        return 0;\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/compiler\/rangechecks\/TestArrayAccessAboveRCAfterSinking.java","additions":132,"deletions":0,"binary":false,"changes":132,"status":"added"},{"patch":"@@ -0,0 +1,158 @@\n+\/*\n+ * Copyright (c) 2023, Red Hat, Inc. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8319793\n+ * @summary Replacing a test with a dominating test can cause an array load to float above a range check that guards it\n+ * @run main\/othervm -XX:-BackgroundCompilation -XX:-UseOnStackReplacement -XX:-TieredCompilation TestArrayAccessAboveRCAfterSmearingOrPredication\n+ *\/\n+\n+\n+public class TestArrayAccessAboveRCAfterSmearingOrPredication {\n+    private static int field;\n+    private static int flagField;\n+    private static volatile int volatileField;\n+\n+    public static void main(String[] args) {\n+        float[] array = new float[100];\n+        for (int i = 0; i < 20_000; i++) {\n+            testRangeCheckSmearing(array, 0, 1, true, true, true);\n+            testRangeCheckSmearing(array, 0, 1, true, false, true);\n+            testRangeCheckSmearing(array, 0, 1, false, false, true);\n+            testRangeCheckSmearing(array, 0, 1, true, true, false);\n+            testRangeCheckSmearing(array, 0, 1, true, false, false);\n+            testRangeCheckSmearing(array, 0, 1, false, false, false);\n+            testHelper(0);\n+\n+            testLoopPredication(array, 0, 1, true, true, true);\n+            testLoopPredication(array, 0, 1, true, false, true);\n+            testLoopPredication(array, 0, 1, false, false, true);\n+            testLoopPredication(array, 0, 1, true, true, false);\n+            testLoopPredication(array, 0, 1, true, false, false);\n+            testLoopPredication(array, 0, 1, false, false, false);\n+        }\n+        try {\n+            testRangeCheckSmearing(array, Integer.MAX_VALUE, 1, false, false, true);\n+        } catch (ArrayIndexOutOfBoundsException arrayIndexOutOfBoundsException) {\n+        }\n+        try {\n+            testLoopPredication(array, Integer.MAX_VALUE, 1, false, false, true);\n+        } catch (ArrayIndexOutOfBoundsException arrayIndexOutOfBoundsException) {\n+        }\n+    }\n+\n+    private static float testRangeCheckSmearing(float[] array, int i, int flag, boolean flag2, boolean flag3, boolean flag4) {\n+        if (array == null) {\n+        }\n+        flagField = flag;\n+        int j;\n+        for (j = 0; j < 10; j++) {\n+        }\n+        for (int k = 0; k < 10; k++) {\n+            for (int l = 0; l < 10; l++) {\n+            }\n+        }\n+        testHelper(j);\n+        float v = 0;\n+        if (flag == 1) {\n+            if (flag4) {\n+                v += array[i];\n+                if (flag2) {\n+                    if (flag3) {\n+                        field = 0x42;\n+                    }\n+                }\n+                if (flagField == 1) {\n+                    v += array[i];\n+                }\n+            } else {\n+                v += array[i];\n+                if (flag2) {\n+                    if (flag3) {\n+                        field = 0x42;\n+                    }\n+                }\n+                if (flagField == 1) {\n+                    v += array[i];\n+                }\n+            }\n+        }\n+        return v;\n+    }\n+\n+    private static void testHelper(int j) {\n+        if (j == 10) {\n+            return;\n+        }\n+        flagField = 0;\n+    }\n+\n+    private static float testLoopPredication(float[] array, int i, int flag, boolean flag2, boolean flag3, boolean flag4) {\n+        i = Math.min(i, Integer.MAX_VALUE - 2);\n+        if (array == null) {\n+        }\n+        flagField = flag;\n+        int j;\n+        for (j = 0; j < 10; j++) {\n+            for (int k = 0; k < 10; k++) {\n+            }\n+        }\n+        testHelper(j);\n+\n+        float v = 0;\n+        if (flag == 1) {\n+            if (flag4) {\n+                float dummy = array[i];\n+                dummy = array[i + 2];\n+                if (flag2) {\n+                    if (flag3) {\n+                        field = 0x42;\n+                    }\n+                }\n+                if (flagField == 1) {\n+                    for (int m = 0; m < 3; m++) {\n+                        v += array[i + m];\n+                    }\n+                }\n+                volatileField = 42;\n+            } else {\n+                float dummy = array[i];\n+                dummy = array[i + 2];\n+                if (flag2) {\n+                    if (flag3) {\n+                        field = 0x42;\n+                    }\n+                }\n+                if (flagField == 1) {\n+                    for (int m = 0; m < 3; m++) {\n+                        v += array[i + m];\n+                    }\n+                }\n+                volatileField = 42;\n+            }\n+        }\n+\n+        return v;\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/compiler\/rangechecks\/TestArrayAccessAboveRCAfterSmearingOrPredication.java","additions":158,"deletions":0,"binary":false,"changes":158,"status":"added"},{"patch":"@@ -0,0 +1,161 @@\n+\/*\n+ * Copyright (c) 2024, Red Hat, Inc. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8323274\n+ * @summary split if can cause an array load to become dependent on a test other than its range check\n+ * @run main\/othervm -XX:-TieredCompilation -XX:-BackgroundCompilation TestArrayAccessAboveRCAfterSplitIf\n+ *\/\n+\n+public class TestArrayAccessAboveRCAfterSplitIf {\n+    private static volatile int volatileField;\n+\n+    public static void main(String[] args) {\n+        int[] array = new int[1000];\n+        for (int i = 0; i < 20_000; i++) {\n+            test1(array, array, 0, 2, true);\n+            inlined1(42, array, array, 0, 2, 10, true);\n+            inlined1(2, array, array, 0, 2, 10, true);\n+            inlined1(42, array, array, 0, 2, 10, false);\n+            inlined1(2, array, array, 0, 2, 10, false);\n+            test2(array, array, 0, 2, true);\n+            inlined2(42, array, array, 0, 2, 10, true);\n+            inlined2(2, array, array, 0, 2, 10, true);\n+            inlined2(42, array, array, 0, 2, 10, false);\n+            inlined2(2, array, array, 0, 2, 10, false);\n+        }\n+        try {\n+            test1(array, array, -1, 2, true);\n+        } catch (ArrayIndexOutOfBoundsException arrayIndexOutOfBoundsException) {\n+        }\n+        try {\n+            test2(array, array, -1, 2, true);\n+        } catch (ArrayIndexOutOfBoundsException arrayIndexOutOfBoundsException) {\n+        }\n+    }\n+\n+    private static int test1(int[] array1, int[] array2, int i, int l, boolean flag) {\n+        for (int j = 0; j < 10; j++) {\n+        }\n+        int k;\n+        for (k = 1; k < 2; k *= 2) {\n+\n+        }\n+        int m;\n+        for (m = 0; m < 10; m+=k) {\n+\n+        }\n+        return inlined1(k, array1, array2, i, l, m, flag);\n+    }\n+\n+    private static int inlined1(int k, int[] array1, int[] array2, int i, int l, int m, boolean flag) {\n+        int v;\n+        int[] array;\n+        if (array1 == null) {\n+        }\n+        if (l == 10) {\n+\n+        }\n+        if (flag) {\n+            if (k == 2) {\n+                v = array1[i];\n+                array = array1;\n+                if (l == m) {\n+                }\n+            } else {\n+                v = array2[i];\n+                array = array2;\n+            }\n+            v += array[i];\n+            v += array2[i];\n+        } else {\n+            if (k == 2) {\n+                v = array1[i];\n+                array = array1;\n+                if (l == m) {\n+                }\n+            } else {\n+                v = array2[i];\n+                array = array2;\n+            }\n+            v += array[i];\n+            v += array2[i];\n+        }\n+        return v;\n+    }\n+\n+    private static int test2(int[] array1, int[] array2, int i, int l, boolean flag) {\n+        for (int j = 0; j < 10; j++) {\n+        }\n+        int k;\n+        for (k = 1; k < 2; k *= 2) {\n+\n+        }\n+        int m;\n+        for (m = 0; m < 10; m+=k) {\n+\n+        }\n+        return inlined2(k, array1, array2, i, l, m, flag);\n+    }\n+\n+    private static int inlined2(int k, int[] array1, int[] array2, int i, int l, int m, boolean flag) {\n+        int v;\n+        int[] array;\n+        if (array1 == null) {\n+        }\n+        if (l == 10) {\n+\n+        }\n+        if (flag) {\n+            if (k == 2) {\n+                v = array1[i];\n+                array = array1;\n+                if (l == m) {\n+                }\n+            } else {\n+                v = array2[i];\n+                array = array2;\n+            }\n+            if (Integer.compareUnsigned(i, array.length) >= 0) {\n+            }\n+            v += array[i];\n+            v += array2[i];\n+        } else {\n+            if (k == 2) {\n+                v = array1[i];\n+                array = array1;\n+                if (l == m) {\n+                }\n+            } else {\n+                v = array2[i];\n+                array = array2;\n+            }\n+            if (Integer.compareUnsigned(i, array.length) >= 0) {\n+            }\n+            v += array[i];\n+            v += array2[i];\n+        }\n+        return v;\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/compiler\/rangechecks\/TestArrayAccessAboveRCAfterSplitIf.java","additions":161,"deletions":0,"binary":false,"changes":161,"status":"added"},{"patch":"@@ -0,0 +1,103 @@\n+\/*\n+ * Copyright (c) 2024, Red Hat, Inc. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8323274\n+ * @summary loop unswitching can cause an array load to become dependent on a test other than its range check\n+ * @run main\/othervm -XX:-TieredCompilation -XX:-BackgroundCompilation -XX:CompileOnly=TestArrayAccessAboveRCAfterUnswitching::test\n+ *                   -XX:+UnlockDiagnosticVMOptions -XX:+StressGCM -XX:StressSeed=148059521 TestArrayAccessAboveRCAfterUnswitching\n+ * @run main\/othervm -XX:-TieredCompilation -XX:-BackgroundCompilation -XX:CompileOnly=TestArrayAccessAboveRCAfterUnswitching::test\n+ *                   -XX:+UnlockDiagnosticVMOptions -XX:+StressGCM TestArrayAccessAboveRCAfterUnswitching\n+ *\/\n+\n+import java.util.Arrays;\n+\n+public class TestArrayAccessAboveRCAfterUnswitching {\n+    private static int field;\n+\n+    public static void main(String[] args) {\n+        int[] array = new int[1000];\n+        boolean[] allFalse = new boolean[1000];\n+        boolean[] allTrue = new boolean[1000];\n+        Arrays.fill(allTrue, true);\n+        for (int i = 0; i < 20_000; i++) {\n+            inlined(array, allFalse, 42, 2, 2, 0);\n+            inlined(array, allFalse, 2, 42, 2, 0);\n+            inlined(array, allFalse, 2, 2, 2, 0);\n+            inlined(array, allFalse, 2, 2, 42, 0);\n+            inlined(array, allTrue, 2, 2, 2, 0);\n+            test(array, allTrue, 0);\n+        }\n+        try {\n+            test(array, allTrue, -1);\n+        } catch (ArrayIndexOutOfBoundsException aioobe) {\n+        }\n+    }\n+\n+    private static int test(int[] array, boolean[] flags, int start) {\n+        if (flags == null) {\n+        }\n+        if (array == null) {\n+        }\n+        int j = 1;\n+        for (; j < 2; j *= 2) {\n+        }\n+        int k = 1;\n+        for (; k < 2; k *= 2) {\n+        }\n+        int l = 1;\n+        for (; l < 2; l *= 2) {\n+        }\n+        int i;\n+        for (i = 0; i < 10; i += l) {\n+\n+        }\n+        if (flags[i - 10]) {\n+            return inlined(array, flags, j, k, l, start);\n+        }\n+        return 0;\n+    }\n+\n+    private static int inlined(int[] array, boolean[] flags, int j, int k, int l, int start) {\n+        for (int i = 0; i < 100; i++) {\n+            final boolean flag = flags[i & (j - 3)];\n+            int v = array[(i + start) & (j - 3)];\n+            if (flag) {\n+                return v;\n+            }\n+            if (j != 2) {\n+                field = v;\n+            } else {\n+                if (k != 2) {\n+                    field = 42;\n+                } else {\n+                    if (l == 2) {\n+                        break;\n+                    }\n+                }\n+            }\n+        }\n+        return 0;\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/compiler\/rangechecks\/TestArrayAccessAboveRCAfterUnswitching.java","additions":103,"deletions":0,"binary":false,"changes":103,"status":"added"},{"patch":"@@ -0,0 +1,56 @@\n+\/*\n+ * Copyright (c) 2024, Red Hat, Inc. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8323274\n+ * @summary converting an array copy to a series of loads\/stores add loads that can float\n+ * @run main\/othervm -XX:-UseOnStackReplacement -XX:-TieredCompilation -XX:-BackgroundCompilation TestArrayAccessAboveRCForArrayCopyLoad\n+ *\/\n+\n+public class TestArrayAccessAboveRCForArrayCopyLoad {\n+    public static void main(String[] args) {\n+        int[] array = new int[10];\n+        for (int i = 0; i < 20_000; i++) {\n+            test(array, 0, array, 1, false);\n+            test(array, 0, array, 1, true);\n+        }\n+        try {\n+            test(array, -1, array, 0, true);\n+        } catch (ArrayIndexOutOfBoundsException arrayIndexOutOfBoundsException) {\n+\n+        }\n+    }\n+\n+    private static void test(int[] src, int srcPos, int[] dst, int dstPos, boolean flag) {\n+        if (src == null) {\n+        }\n+        if (srcPos < dstPos) {\n+            if (flag) {\n+                System.arraycopy(src, srcPos, dst, dstPos, 2);\n+            } else {\n+                System.arraycopy(src, srcPos, dst, dstPos, 2);\n+            }\n+        }\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/compiler\/rangechecks\/TestArrayAccessAboveRCForArrayCopyLoad.java","additions":56,"deletions":0,"binary":false,"changes":56,"status":"added"},{"patch":"@@ -0,0 +1,57 @@\n+\/*\n+ * Copyright (c) 2023, Red Hat, Inc. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8319793\n+ * @summary Replacing a test with a dominating test can cause an array access CastII to float above a range check that guards it\n+ * @run main\/othervm -Xbatch -XX:-TieredCompilation TestArrayAccessCastIIAboveRC\n+ *\/\n+\n+public class TestArrayAccessCastIIAboveRC {\n+    static int N = 400;\n+    static int iArrFld[] = new int[N];\n+\n+    static void test() {\n+        float fArr[] = new float[N];\n+        int i9, i10, i12;\n+        long lArr1[] = new long[N];\n+        for (i9 = 7; i9 < 43; i9++) {\n+            try {\n+                i10 = 7 % i9;\n+                iArrFld[i9 + 1] = i9 \/ i10;\n+            } catch (ArithmeticException a_e) {\n+            }\n+            for (i12 = 1; 7 > i12; i12++)\n+                lArr1[i9 - 1] = 42;\n+            iArrFld[i12] = 4;\n+            fArr[i9 - 1] = 0;\n+        }\n+    }\n+\n+    public static void main(String[] args) {\n+        for (int i = 0; i < 50_000; ++i) {\n+            test();\n+        }\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/compiler\/rangechecks\/TestArrayAccessCastIIAboveRC.java","additions":57,"deletions":0,"binary":false,"changes":57,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, Arm Limited. All rights reserved.\n+ * Copyright (c) 2022, 2023, Arm Limited. All rights reserved.\n@@ -29,0 +29,1 @@\n+ * @requires vm.flagless\n","filename":"test\/hotspot\/jtreg\/compiler\/rangechecks\/TestRangeCheckHoistingScaledIV.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -0,0 +1,57 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8322726\n+ * @library \/test\/lib\n+ * @modules java.base\/jdk.internal.org.objectweb.asm\n+ *\n+ * @compile TestMHUnloaded.java TestMHUnloadedHelper.java\n+ * @run driver jdk.test.lib.helpers.ClassFileInstaller compiler.runtime.unloaded.TestMHUnloadedHelper\n+ *\n+ * @run main\/othervm -Xbootclasspath\/a:.\n+ *                   -Xbatch -XX:-TieredCompilation -XX:CompileCommand=exclude,*::test\n+ *                   -XX:+UnlockDiagnosticVMOptions -XX:+PrintCompilation -XX:+PrintInlining\n+ *                      compiler.runtime.unloaded.TestMHUnloaded\n+ *\n+ * @run main\/othervm -Xbootclasspath\/a:.\n+ *                   -Xbatch -XX:-TieredCompilation -XX:CompileCommand=exclude,*::test\n+ *                   -XX:+UnlockDiagnosticVMOptions -XX:+PrintCompilation -XX:+PrintInlining\n+ *                   -XX:+IgnoreUnrecognizedVMOptions -XX:+AlwaysIncrementalInline\n+ *                      compiler.runtime.unloaded.TestMHUnloaded\n+ *\/\n+\n+package compiler.runtime.unloaded;\n+\n+import java.lang.invoke.MethodHandles;\n+\n+public class TestMHUnloaded {\n+    public static void main(String[] args) {\n+        TestMHUnloadedHelper.test(MethodHandles.lookup()); \/\/ launch test in bootstrap loader context\n+        TestMHUnloadedHelper.testConstant(MethodHandles.lookup()); \/\/ launch test in bootstrap loader context\n+        System.out.println(\"TEST PASSED\");\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/compiler\/runtime\/unloaded\/TestMHUnloaded.java","additions":57,"deletions":0,"binary":false,"changes":57,"status":"added"},{"patch":"@@ -0,0 +1,103 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package compiler.runtime.unloaded;\n+\n+import java.lang.invoke.MethodHandle;\n+import java.lang.invoke.MethodHandles;\n+import java.lang.invoke.MethodType;\n+import java.util.function.BiPredicate;\n+import jdk.internal.org.objectweb.asm.ClassWriter;\n+\n+import static jdk.internal.org.objectweb.asm.Opcodes.*;\n+\n+\/\/ Operates in bootstrap loader context.\n+public class TestMHUnloadedHelper {\n+    private static final MethodType METHOD_TYPE = MethodType.methodType(BiPredicate.class,\n+                                                                        BiPredicate.class, BiPredicate.class);\n+\n+    static byte[] generateClassFile(Class<?> caller) {\n+        var cw = new ClassWriter(ClassWriter.COMPUTE_MAXS);\n+        String name = caller.getName().replace('.', '\/');\n+        cw.visit(V19, ACC_PUBLIC | ACC_SUPER, name, null, \"java\/lang\/Object\", null);\n+        {\n+            var mv = cw.visitMethod(ACC_PUBLIC | ACC_STATIC, \"test\", METHOD_TYPE.toMethodDescriptorString(), null, null);\n+            mv.visitCode();\n+            mv.visitIntInsn(ALOAD, 1);\n+            mv.visitInsn(ARETURN);\n+            mv.visitMaxs(0, 0);\n+        }\n+        return cw.toByteArray();\n+    }\n+\n+    public static MethodHandle generateTest(MethodHandles.Lookup caller) {\n+        \/\/ Loaded in the caller context.\n+        byte[] classBytes = generateClassFile(caller.lookupClass());\n+        try {\n+            MethodHandles.Lookup lookup = caller.defineHiddenClass(classBytes, true);\n+            MethodHandle test = lookup.findStatic(lookup.lookupClass(), \"test\", METHOD_TYPE);\n+            test = MethodHandles.permuteArguments(test, test.type(), 1, 0); \/\/ mix arguments\n+            return test;\n+        } catch (Throwable e) {\n+            throw new AssertionError(e);\n+        }\n+    }\n+\n+    static BiPredicate[] ps = new BiPredicate[] { (a, b) -> false,\n+                                                  (a, b) -> true };\n+\n+    public static void test(MethodHandles.Lookup caller) {\n+        MethodHandle test = generateTest(caller);\n+\n+        for (int i = 0; i < 20_000; i++) {\n+            try {\n+                BiPredicate pr = (BiPredicate)test.invokeExact(ps[1], ps[0]);\n+                if (pr != ps[1]) {\n+                    throw new AssertionError(\"mismatch\");\n+                }\n+            } catch (Throwable e) {\n+                throw new AssertionError(e);\n+            }\n+        }\n+    }\n+\n+    public static void testConstant(MethodHandles.Lookup caller) {\n+        MethodHandle test = generateTest(caller);\n+\n+        \/\/ testMH() { return test(ps2, ps1); } where test(a, b) { return b; }.\n+        test = test.bindTo(ps[1]).bindTo(ps[0]); \/\/ make argument concrete types visible to the JIT-compiler\n+\n+        for (int i = 0; i < 20_000; i++) {\n+            try {\n+                BiPredicate pr = (BiPredicate)test.invokeExact();\n+                if (pr != ps[1]) {\n+                    throw new AssertionError(\"mismatch\");\n+                }\n+            } catch (Throwable e) {\n+                throw new AssertionError(e);\n+            }\n+        }\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/compiler\/runtime\/unloaded\/TestMHUnloadedHelper.java","additions":103,"deletions":0,"binary":false,"changes":103,"status":"added"},{"patch":"@@ -0,0 +1,67 @@\n+\/*\n+ * Copyright (c) 2024, Red Hat, Inc. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8331575\n+ * @summary C2: crash when ConvL2I is split thru phi at LongCountedLoop\n+ * @run main\/othervm -XX:-BackgroundCompilation -XX:-TieredCompilation -XX:-UseOnStackReplacement\n+ *                   -XX:+UnlockDiagnosticVMOptions -XX:+StressGCM -XX:StressSeed=92643864 TestLongCountedLoopConvL2I\n+ * @run main\/othervm -XX:-BackgroundCompilation -XX:-TieredCompilation -XX:-UseOnStackReplacement\n+ *                   -XX:+UnlockDiagnosticVMOptions -XX:+StressGCM TestLongCountedLoopConvL2I\n+ * @run main\/othervm -XX:-BackgroundCompilation -XX:-TieredCompilation\n+ *                   -XX:+UnlockDiagnosticVMOptions -XX:+StressGCM TestLongCountedLoopConvL2I\n+ *\/\n+\n+public class TestLongCountedLoopConvL2I {\n+    private static volatile int volatileField;\n+\n+    public static void main(String[] args) {\n+        for (int i = 0; i < 20_000; i++) {\n+            testHelper1(42);\n+            test1(0);\n+        }\n+    }\n+\n+    private static int test1(int res) {\n+        int k = 1;\n+        for (; k < 2; k *= 2) {\n+        }\n+        long i = testHelper1(k);\n+        for (; i > 0; i--) {\n+            res += 42 \/ ((int) i);\n+            for (int j = 1; j < 10; j *= 2) {\n+\n+            }\n+        }\n+        return res;\n+    }\n+\n+    private static long testHelper1(int k) {\n+        if (k == 2) {\n+            return 100;\n+        } else {\n+            return 99;\n+        }\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/compiler\/splitif\/TestLongCountedLoopConvL2I.java","additions":67,"deletions":0,"binary":false,"changes":67,"status":"added"},{"patch":"@@ -0,0 +1,59 @@\n+\/*\n+ * Copyright (c) 2024, Red Hat, Inc. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8331575\n+ * @summary C2: crash when ConvL2I is split thru phi at LongCountedLoop\n+ * @run main\/othervm -Xcomp -XX:CompileOnly=TestLongCountedLoopConvL2I2.* TestLongCountedLoopConvL2I2\n+ *\/\n+\n+public class TestLongCountedLoopConvL2I2 {\n+    static int x = 34;\n+\n+    public static void main(String[] strArr) {\n+        for (int i = 0; i < 2; i++) {\n+            test();\n+        }\n+    }\n+\n+    static int test() {\n+        int a = 5, b = 6;\n+        long lArr[] = new long[2];\n+\n+        for (long i = 159; i > 1; i -= 3) {\n+            a += 3;\n+            for (int j = 1; j < 4; j++) {\n+                if (a == 9) {\n+                    if (x == 73) {\n+                        try {\n+                            b = 10 \/ (int) i;\n+                        } catch (ArithmeticException a_e) {\n+                        }\n+                    }\n+                }\n+            }\n+        }\n+        return b;\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/compiler\/splitif\/TestLongCountedLoopConvL2I2.java","additions":59,"deletions":0,"binary":false,"changes":59,"status":"added"},{"patch":"@@ -0,0 +1,78 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8316756\n+ * @summary Test UNSAFE.copyMemory in combination with Escape Analysis\n+ * @library \/test\/lib\n+ *\n+ * @modules java.base\/jdk.internal.misc\n+ *\n+ * @run main\/othervm -XX:-TieredCompilation -Xbatch -XX:CompileCommand=quiet -XX:CompileCommand=compileonly,compiler.unsafe.UnsafeArrayCopy::test*\n+ *                   compiler.unsafe.UnsafeArrayCopy\n+ *\/\n+\n+package compiler.unsafe;\n+\n+import java.lang.reflect.*;\n+import java.util.*;\n+\n+import jdk.internal.misc.Unsafe;\n+\n+\n+public class UnsafeArrayCopy {\n+\n+    private static Unsafe UNSAFE = Unsafe.getUnsafe();\n+\n+    static long SRC_BASE = UNSAFE.allocateMemory(4);\n+    static long DST_BASE = UNSAFE.allocateMemory(4);\n+\n+    static class MyClass {\n+        int x;\n+    }\n+\n+    static int test() {\n+        MyClass obj = new MyClass(); \/\/ Non-escaping to trigger Escape Analysis\n+        UNSAFE.copyMemory(null, SRC_BASE, null, DST_BASE, 4);\n+        obj.x = 42;\n+        return obj.x;\n+    }\n+\n+    static int[] test2() {\n+         int[] src = new int[4];\n+         int[] dst = new int[4];\n+         MyClass obj = new MyClass();\n+         UNSAFE.copyMemory(src, 0, dst, 0, 4);\n+         obj.x = 42;\n+         dst[1] = obj.x;\n+         return dst;\n+    }\n+\n+    public static void main(String[] args) {\n+        for (int i = 0; i < 50_000; ++i) {\n+            test();\n+            test2();\n+        }\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/compiler\/unsafe\/UnsafeArrayCopy.java","additions":78,"deletions":0,"binary":false,"changes":78,"status":"added"},{"patch":"@@ -3,0 +3,1 @@\n+ * Copyright (c) 2024 Oracle and\/or its affiliates. All rights reserved.\n@@ -40,0 +41,12 @@\n+\/*\n+ * @test\n+ * @enablePreview\n+ * @bug 8317299\n+ * @summary Vector API intrinsincs should handle JVM state correctly whith late inlining when compiling with -InlineUnsafeOps\n+ * @modules jdk.incubator.vector\n+ * @requires vm.cpu.features ~= \".*avx512.*\"\n+ * @run main\/othervm -Xcomp -XX:+UnlockDiagnosticVMOptions -XX:-InlineUnsafeOps -XX:+IgnoreUnrecognizedVMOptions -XX:UseAVX=3\n+ *                   -XX:CompileCommand=compileonly,compiler.vectorapi.TestIntrinsicBailOut::test -XX:CompileCommand=quiet\n+ *                   -XX:-TieredCompilation compiler.vectorapi.TestIntrinsicBailOut\n+ *\/\n+\n","filename":"test\/hotspot\/jtreg\/compiler\/vectorapi\/TestIntrinsicBailOut.java","additions":13,"deletions":0,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -0,0 +1,63 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package compiler.vectorapi;\n+\n+\/*\n+ * @test\n+ * @bug 8333099\n+ * @summary We should check for is_LoadVector before checking for equality between vector types\n+ * @run main\/othervm -XX:CompileCommand=compileonly,compiler.vectorapi.TestIsLoadVector::test -Xcomp compiler.vectorapi.TestIsLoadVector\n+ *\/\n+\n+public class TestIsLoadVector {\n+    static int[] iArrFld = new int[400];\n+\n+    static void test() {\n+        int i13, i16 = 3;\n+        short s = 50;\n+        for (int i = 0; i < 4; i++) {\n+            for (int i12 = 0; i12 < 8; ++i12) {\n+                for (int i14 = 2; 82 > i14; i14++) {\n+                    s <<= 90;\n+                    do {\n+                        try {\n+                            i13 = 0;\n+                        } catch (ArithmeticException a_e) {\n+                        }\n+                    } while (++i16 < 2);\n+                }\n+            }\n+        }\n+        int i18 = 1;\n+        while (++i18 < 41) {\n+            iArrFld[i18] >>= s;\n+        }\n+    }\n+\n+    public static void main(String[] strArr) {\n+        for (int i = 0; i < 100; i++) {\n+            test();\n+        }\n+    }\n+}\n\\ No newline at end of file\n","filename":"test\/hotspot\/jtreg\/compiler\/vectorapi\/TestIsLoadVector.java","additions":63,"deletions":0,"binary":false,"changes":63,"status":"added"},{"patch":"@@ -0,0 +1,1404 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package compiler.vectorapi;\n+\n+import compiler.lib.ir_framework.*;\n+\n+import jdk.test.lib.Asserts;\n+import jdk.incubator.vector.*;\n+import java.util.Arrays;\n+import java.nio.ByteOrder;\n+\n+\/**\n+ * @test\n+ * @bug 8325520\n+ * @library \/test\/lib \/\n+ * @summary Don't allow folding of Load\/Store vectors when using incompatible indices or masks\n+ * @modules jdk.incubator.vector\n+ *\n+ * @run driver compiler.vectorapi.VectorGatherMaskFoldingTest\n+ *\/\n+\n+public class VectorGatherMaskFoldingTest {\n+    \/\/ Species\n+    private static final VectorSpecies<Long> L_SPECIES = LongVector.SPECIES_MAX;\n+    private static final VectorSpecies<Integer> I_SPECIES = IntVector.SPECIES_MAX;\n+    private static final VectorSpecies<Float> F_SPECIES = FloatVector.SPECIES_MAX;\n+    private static final VectorSpecies<Double> D_SPECIES = DoubleVector.SPECIES_MAX;\n+    \/\/ Vectors\n+    private static final LongVector longVector;\n+    private static final LongVector longVector2;\n+    private static final IntVector intVector;\n+    private static final IntVector intVector2;\n+    private static final DoubleVector doubleVector;\n+    private static final DoubleVector doubleVector2;\n+    private static final FloatVector floatVector;\n+    private static final FloatVector floatVector2;\n+    \/\/ Arrays\n+    private static final long[] longArray = new long[L_SPECIES.length()];\n+    private static final long[] longArray2 = new long[L_SPECIES.length()];\n+    private static final int[] intArray = new int[I_SPECIES.length()];\n+    private static final int[] intArray2 = new int[I_SPECIES.length()];\n+    private static final double[] doubleArray = new double[D_SPECIES.length()];\n+    private static final double[] doubleArray2 = new double[D_SPECIES.length()];\n+    private static final float[] floatArray = new float[F_SPECIES.length()];\n+    private static final float[] floatArray2 = new float[F_SPECIES.length()];\n+    \/\/ Indices\n+    private static final int[] longIndices = new int[L_SPECIES.length()];\n+    private static final int[] longIndices2 = new int[L_SPECIES.length()];\n+    private static final int[] duplicateLongIndices = new int[L_SPECIES.length()];\n+    private static final int[] intIndices = new int[I_SPECIES.length()];\n+    private static final int[] intIndices2 = new int[I_SPECIES.length()];\n+    private static final int[] duplicateIntIndices = new int[I_SPECIES.length()];\n+    private static final int[] doubleIndices = new int[D_SPECIES.length()];\n+    private static final int[] doubleIndices2 = new int[D_SPECIES.length()];\n+    private static final int[] duplicateDoubleIndices = new int[D_SPECIES.length()];\n+    private static final int[] floatIndices = new int[F_SPECIES.length()];\n+    private static final int[] floatIndices2 = new int[F_SPECIES.length()];\n+    private static final int[] duplicateFloatIndices = new int[F_SPECIES.length()];\n+    \/\/ Masks\n+    private static final boolean[] longMask = new boolean[L_SPECIES.length()];\n+    private static final boolean[] longMask2 = new boolean[L_SPECIES.length()];\n+    private static final boolean[] intMask = new boolean[I_SPECIES.length()];\n+    private static final boolean[] intMask2 = new boolean[I_SPECIES.length()];\n+    private static final boolean[] doubleMask = new boolean[D_SPECIES.length()];\n+    private static final boolean[] doubleMask2 = new boolean[D_SPECIES.length()];\n+    private static final boolean[] floatMask = new boolean[F_SPECIES.length()];\n+    private static final boolean[] floatMask2 = new boolean[F_SPECIES.length()];\n+    private static final VectorMask<Long> longVectorMask;\n+    private static final VectorMask<Long> longVectorMask2;\n+    private static final VectorMask<Integer> intVectorMask;\n+    private static final VectorMask<Integer> intVectorMask2;\n+    private static final VectorMask<Double> doubleVectorMask;\n+    private static final VectorMask<Double> doubleVectorMask2;\n+    private static final VectorMask<Float> floatVectorMask;\n+    private static final VectorMask<Float> floatVectorMask2;\n+\n+    \/\/ Filling vectors\/indices\/masks\n+    static {\n+        for (int i = 0; i < L_SPECIES.length(); i++) {\n+            longArray[i] = i + 1;\n+            longArray2[i] = L_SPECIES.length() - i + 1;\n+            longMask[i] = i % 2 == 0;\n+            longMask2[i] = i >= L_SPECIES.length() \/ 2;\n+            longIndices[i] = (i + L_SPECIES.length() \/ 2) % L_SPECIES.length();\n+            longIndices2[i] = (L_SPECIES.length() - i) % L_SPECIES.length();\n+            duplicateLongIndices[i] = longIndices[i] \/ 2;\n+        }\n+        longVector = LongVector.fromArray(L_SPECIES, longArray, 0);\n+        longVector2 = LongVector.fromArray(L_SPECIES, longArray2, 0);\n+        longVectorMask = VectorMask.fromArray(L_SPECIES, longMask, 0);\n+        longVectorMask2 = VectorMask.fromArray(L_SPECIES, longMask2, 0);\n+        for (int i = 0; i < I_SPECIES.length(); i++) {\n+            intArray[i] = i + 1;\n+            intArray2[i] = I_SPECIES.length() - i + 1;\n+            intMask[i] = i % 2 == 0;\n+            intMask2[i] = i >= I_SPECIES.length() \/ 2;\n+            intIndices[i] = (i + I_SPECIES.length() \/ 2) % I_SPECIES.length();\n+            intIndices2[i] = (I_SPECIES.length() - i) % I_SPECIES.length();\n+            duplicateIntIndices[i] = intIndices[i] \/ 2;\n+        }\n+        intVector = IntVector.fromArray(I_SPECIES, intArray, 0);\n+        intVector2 = IntVector.fromArray(I_SPECIES, intArray2, 0);\n+        intVectorMask = VectorMask.fromArray(I_SPECIES, intMask, 0);\n+        intVectorMask2 = VectorMask.fromArray(I_SPECIES, intMask2, 0);\n+        for (int i = 0; i < D_SPECIES.length(); i++) {\n+            doubleArray[i] = (double) i + 1.0;\n+            doubleArray2[i] = (double) (D_SPECIES.length() - i) + 1.0;\n+            doubleMask[i] = i % 2 == 0;\n+            doubleMask2[i] = i >= D_SPECIES.length() \/ 2;\n+            doubleIndices[i] = (i + D_SPECIES.length() \/ 2) % D_SPECIES.length();\n+            doubleIndices2[i] = (D_SPECIES.length() - i) % D_SPECIES.length();\n+            duplicateDoubleIndices[i] = doubleIndices[i] \/ 2;\n+        }\n+        doubleVector = DoubleVector.fromArray(D_SPECIES, doubleArray, 0);\n+        doubleVector2 = DoubleVector.fromArray(D_SPECIES, doubleArray2, 0);\n+        doubleVectorMask = VectorMask.fromArray(D_SPECIES, doubleMask, 0);\n+        doubleVectorMask2 = VectorMask.fromArray(D_SPECIES, doubleMask2, 0);\n+        for (int i = 0; i < F_SPECIES.length(); i++) {\n+            floatArray[i] = i + 1.0f;\n+            floatArray2[i] = F_SPECIES.length() - i + 1.0f;\n+            floatMask[i] = i % 2 == 0;\n+            floatMask2[i] = i >= F_SPECIES.length() \/ 2;\n+            floatIndices[i] = (i + F_SPECIES.length() \/ 2) % F_SPECIES.length();\n+            floatIndices2[i] = (F_SPECIES.length() - i) % F_SPECIES.length();\n+            duplicateFloatIndices[i] = floatIndices[i] \/ 2;\n+        }\n+        floatVector = FloatVector.fromArray(F_SPECIES, floatArray, 0);\n+        floatVector2 = FloatVector.fromArray(F_SPECIES, floatArray2, 0);\n+        floatVectorMask = VectorMask.fromArray(F_SPECIES, floatMask, 0);\n+        floatVectorMask2 = VectorMask.fromArray(F_SPECIES, floatMask2, 0);\n+    }\n+\n+    \/\/ LOAD TESTS\n+\n+    \/\/ LongVector tests\n+\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_GATHER, \">= 2\" }, applyIfCPUFeatureOr = {\"avx2\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoLongVectorLoadGatherNotEqualArray() {\n+        LongVector res = LongVector.fromArray(L_SPECIES, longArray, 0, longIndices, 0);\n+        LongVector res2 = LongVector.fromArray(L_SPECIES, longArray2, 0, longIndices, 0);\n+        Asserts.assertNotEquals(res, res2);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_GATHER, \">= 2\" }, applyIfCPUFeatureOr = {\"avx2\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoLongVectorLoadGatherNotEqualIndices() {\n+        LongVector res = LongVector.fromArray(L_SPECIES, longArray, 0, longIndices, 0);\n+        LongVector res2 = LongVector.fromArray(L_SPECIES, longArray, 0, longIndices2, 0);\n+        Asserts.assertNotEquals(res, res2);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_L, \">= 1\", IRNode.LOAD_VECTOR_GATHER, \">= 1\" }, applyIfCPUFeatureOr = {\"avx2\", \"true\", \"sve\", \"true\"})\n+    public static void testOneLongVectorLoadGather() {\n+        LongVector res = LongVector.fromArray(L_SPECIES, longArray, 0);\n+        LongVector res2 = LongVector.fromArray(L_SPECIES, longArray, 0, longIndices, 0);\n+        Asserts.assertNotEquals(res, res2);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_L, \">= 1\", IRNode.LOAD_VECTOR_MASKED, \">= 1\" }, applyIfCPUFeatureOr = {\"avx2\", \"true\", \"sve\", \"true\"})\n+    public static void testOneLongVectorLoadMasked() {\n+        LongVector res = LongVector.fromArray(L_SPECIES, longArray, 0);\n+        LongVector res2 = LongVector.fromArray(L_SPECIES, longArray, 0, longVectorMask);\n+        Asserts.assertNotEquals(res, res2);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_GATHER, \">= 1\" }, applyIfCPUFeatureOr = {\"avx2\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoLongVectorLoadGatherEquals() {\n+        LongVector res = LongVector.fromArray(L_SPECIES, longArray, 0, longIndices, 0);\n+        LongVector res2 = LongVector.fromArray(L_SPECIES, longArray, 0, longIndices, 0);\n+        Asserts.assertEquals(res, res2);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_MASKED, \">= 1\" }, applyIfCPUFeatureOr = {\"avx2\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoLongVectorLoadMaskedEquals() {\n+        LongVector res = LongVector.fromArray(L_SPECIES, longArray, 0, longVectorMask);\n+        LongVector res2 = LongVector.fromArray(L_SPECIES, longArray, 0, longVectorMask);\n+        Asserts.assertEquals(res, res2);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_MASKED, \">= 2\" }, applyIfCPUFeatureOr = {\"avx2\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoLongVectorLoadMaskedNotEqualMask() {\n+        LongVector res = LongVector.fromArray(L_SPECIES, longArray, 0, longVectorMask);\n+        LongVector res2 = LongVector.fromArray(L_SPECIES, longArray, 0, longVectorMask2);\n+        Asserts.assertNotEquals(res, res2);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_GATHER_MASKED, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoLongVectorLoadGatherMaskedEquals() {\n+        LongVector res = LongVector.fromArray(L_SPECIES, longArray, 0, longIndices, 0, longVectorMask);\n+        LongVector res2 = LongVector.fromArray(L_SPECIES, longArray, 0, longIndices, 0, longVectorMask);\n+        Asserts.assertEquals(res, res2);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_GATHER_MASKED, \">= 2\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoLongVectorLoadGatherMaskedNotEqualMask() {\n+        LongVector res = LongVector.fromArray(L_SPECIES, longArray, 0, longIndices, 0, longVectorMask);\n+        LongVector res2 = LongVector.fromArray(L_SPECIES, longArray, 0, longIndices, 0, longVectorMask2);\n+        Asserts.assertNotEquals(res, res2);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_GATHER_MASKED, \">= 2\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoLongVectorLoadGatherMaskedNotEqualIndices() {\n+        LongVector res = LongVector.fromArray(L_SPECIES, longArray, 0, longIndices, 0, longVectorMask);\n+        LongVector res2 = LongVector.fromArray(L_SPECIES, longArray, 0, longIndices2, 0, longVectorMask);\n+        Asserts.assertNotEquals(res, res2);\n+    }\n+\n+\n+    \/\/ IntVector tests\n+\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_GATHER, \">= 2\" }, applyIfCPUFeatureOr = {\"avx2\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoIntVectorLoadGatherNotEqualArray() {\n+        IntVector res = IntVector.fromArray(I_SPECIES, intArray, 0, intIndices, 0);\n+        IntVector res2 = IntVector.fromArray(I_SPECIES, intArray2, 0, intIndices, 0);\n+        Asserts.assertNotEquals(res, res2);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_GATHER, \">= 2\" }, applyIfCPUFeatureOr = {\"avx2\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoIntVectorLoadGatherNotEqualIndices() {\n+        IntVector res = IntVector.fromArray(I_SPECIES, intArray, 0, intIndices, 0);\n+        IntVector res2 = IntVector.fromArray(I_SPECIES, intArray, 0, intIndices2, 0);\n+        Asserts.assertNotEquals(res, res2);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_I, \">= 1\", IRNode.LOAD_VECTOR_GATHER, \">= 1\" }, applyIfCPUFeatureOr = {\"avx2\", \"true\", \"sve\", \"true\"})\n+    public static void testOneIntVectorLoadGather() {\n+        IntVector res = IntVector.fromArray(I_SPECIES, intArray, 0);\n+        IntVector res2 = IntVector.fromArray(I_SPECIES, intArray, 0, intIndices, 0);\n+        Asserts.assertNotEquals(res, res2);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_I, \">= 1\", IRNode.LOAD_VECTOR_MASKED, \">= 1\" }, applyIfCPUFeatureOr = {\"avx2\", \"true\", \"sve\", \"true\"})\n+    public static void testOneIntVectorLoadMasked() {\n+        IntVector res = IntVector.fromArray(I_SPECIES, intArray, 0);\n+        IntVector res2 = IntVector.fromArray(I_SPECIES, intArray, 0, intVectorMask);\n+        Asserts.assertNotEquals(res, res2);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_GATHER, \">= 1\" }, applyIfCPUFeatureOr = {\"avx2\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoIntVectorLoadGatherEquals() {\n+        IntVector res = IntVector.fromArray(I_SPECIES, intArray, 0, intIndices, 0);\n+        IntVector res2 = IntVector.fromArray(I_SPECIES, intArray, 0, intIndices, 0);\n+        Asserts.assertEquals(res, res2);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_MASKED, \">= 1\" }, applyIfCPUFeatureOr = {\"avx2\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoIntVectorLoadMaskedEquals() {\n+        IntVector res = IntVector.fromArray(I_SPECIES, intArray, 0, intVectorMask);\n+        IntVector res2 = IntVector.fromArray(I_SPECIES, intArray, 0, intVectorMask);\n+        Asserts.assertEquals(res, res2);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_MASKED, \">= 2\" }, applyIfCPUFeatureOr = {\"avx2\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoIntVectorLoadMaskedNotEqualMask() {\n+        IntVector res = IntVector.fromArray(I_SPECIES, intArray, 0, intVectorMask);\n+        IntVector res2 = IntVector.fromArray(I_SPECIES, intArray, 0, intVectorMask2);\n+        Asserts.assertNotEquals(res, res2);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_GATHER_MASKED, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoIntVectorLoadGatherMaskedEquals() {\n+        IntVector res = IntVector.fromArray(I_SPECIES, intArray, 0, intIndices, 0, intVectorMask);\n+        IntVector res2 = IntVector.fromArray(I_SPECIES, intArray, 0, intIndices, 0, intVectorMask);\n+        Asserts.assertEquals(res, res2);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_GATHER_MASKED, \">= 2\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoIntVectorLoadGatherMaskedNotEqualMask() {\n+        IntVector res = IntVector.fromArray(I_SPECIES, intArray, 0, intIndices, 0, intVectorMask);\n+        IntVector res2 = IntVector.fromArray(I_SPECIES, intArray, 0, intIndices, 0, intVectorMask2);\n+        Asserts.assertNotEquals(res, res2);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_GATHER_MASKED, \">= 2\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoIntVectorLoadGatherMaskedNotEqualIndices() {\n+        IntVector res = IntVector.fromArray(I_SPECIES, intArray, 0, intIndices, 0, intVectorMask);\n+        IntVector res2 = IntVector.fromArray(I_SPECIES, intArray, 0, intIndices2, 0, intVectorMask);\n+        Asserts.assertNotEquals(res, res2);\n+    }\n+\n+\n+    \/\/ DoubleVector tests\n+\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_GATHER, \">= 2\" }, applyIfCPUFeatureOr = {\"avx2\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoDoubleVectorLoadGatherNotEqualArray() {\n+        DoubleVector res = DoubleVector.fromArray(D_SPECIES, doubleArray, 0, doubleIndices, 0);\n+        DoubleVector res2 = DoubleVector.fromArray(D_SPECIES, doubleArray2, 0, doubleIndices, 0);\n+        Asserts.assertNotEquals(res, res2);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_GATHER, \">= 2\" }, applyIfCPUFeatureOr = {\"avx2\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoDoubleVectorLoadGatherNotEqualIndices() {\n+        DoubleVector res = DoubleVector.fromArray(D_SPECIES, doubleArray, 0, doubleIndices, 0);\n+        DoubleVector res2 = DoubleVector.fromArray(D_SPECIES, doubleArray, 0, doubleIndices2, 0);\n+        Asserts.assertNotEquals(res, res2);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_D, \">= 1\", IRNode.LOAD_VECTOR_GATHER, \">= 1\" }, applyIfCPUFeatureOr = {\"avx2\", \"true\", \"sve\", \"true\"})\n+    public static void testOneDoubleVectorLoadGather() {\n+        DoubleVector res = DoubleVector.fromArray(D_SPECIES, doubleArray, 0);\n+        DoubleVector res2 = DoubleVector.fromArray(D_SPECIES, doubleArray, 0, doubleIndices, 0);\n+        Asserts.assertNotEquals(res, res2);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_D, \">= 1\", IRNode.LOAD_VECTOR_MASKED, \">= 1\" }, applyIfCPUFeatureOr = {\"avx2\", \"true\", \"sve\", \"true\"})\n+    public static void testOneDoubleVectorLoadMasked() {\n+        DoubleVector res = DoubleVector.fromArray(D_SPECIES, doubleArray, 0);\n+        DoubleVector res2 = DoubleVector.fromArray(D_SPECIES, doubleArray, 0, doubleVectorMask);\n+        Asserts.assertNotEquals(res, res2);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_GATHER, \">= 1\" }, applyIfCPUFeatureOr = {\"avx2\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoDoubleVectorLoadGatherEquals() {\n+        DoubleVector res = DoubleVector.fromArray(D_SPECIES, doubleArray, 0, doubleIndices, 0);\n+        DoubleVector res2 = DoubleVector.fromArray(D_SPECIES, doubleArray, 0, doubleIndices, 0);\n+        Asserts.assertEquals(res, res2);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_MASKED, \">= 1\" }, applyIfCPUFeatureOr = {\"avx2\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoDoubleVectorLoadMaskedEquals() {\n+        DoubleVector res = DoubleVector.fromArray(D_SPECIES, doubleArray, 0, doubleVectorMask);\n+        DoubleVector res2 = DoubleVector.fromArray(D_SPECIES, doubleArray, 0, doubleVectorMask);\n+        Asserts.assertEquals(res, res2);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_MASKED, \">= 2\" }, applyIfCPUFeatureOr = {\"avx2\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoDoubleVectorLoadMaskedNotEqualMask() {\n+        DoubleVector res = DoubleVector.fromArray(D_SPECIES, doubleArray, 0, doubleVectorMask);\n+        DoubleVector res2 = DoubleVector.fromArray(D_SPECIES, doubleArray, 0, doubleVectorMask2);\n+        Asserts.assertNotEquals(res, res2);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_GATHER_MASKED, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoDoubleVectorLoadGatherMaskedEquals() {\n+        DoubleVector res = DoubleVector.fromArray(D_SPECIES, doubleArray, 0, doubleIndices, 0, doubleVectorMask);\n+        DoubleVector res2 = DoubleVector.fromArray(D_SPECIES, doubleArray, 0, doubleIndices, 0, doubleVectorMask);\n+        Asserts.assertEquals(res, res2);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_GATHER_MASKED, \">= 2\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoDoubleVectorLoadGatherMaskedNotEqualMask() {\n+        DoubleVector res = DoubleVector.fromArray(D_SPECIES, doubleArray, 0, doubleIndices, 0, doubleVectorMask);\n+        DoubleVector res2 = DoubleVector.fromArray(D_SPECIES, doubleArray, 0, doubleIndices, 0, doubleVectorMask2);\n+        Asserts.assertNotEquals(res, res2);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_GATHER_MASKED, \">= 2\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoDoubleVectorLoadGatherMaskedNotEqualIndices() {\n+        DoubleVector res = DoubleVector.fromArray(D_SPECIES, doubleArray, 0, doubleIndices, 0, doubleVectorMask);\n+        DoubleVector res2 = DoubleVector.fromArray(D_SPECIES, doubleArray, 0, doubleIndices2, 0, doubleVectorMask);\n+        Asserts.assertNotEquals(res, res2);\n+    }\n+\n+\n+    \/\/ FloatVector tests\n+\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_GATHER, \">= 2\" }, applyIfCPUFeatureOr = {\"avx2\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoFloatVectorLoadGatherNotEqualArray() {\n+        FloatVector res = FloatVector.fromArray(F_SPECIES, floatArray, 0, floatIndices, 0);\n+        FloatVector res2 = FloatVector.fromArray(F_SPECIES, floatArray2, 0, floatIndices, 0);\n+        Asserts.assertNotEquals(res, res2);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_GATHER, \">= 2\" }, applyIfCPUFeatureOr = {\"avx2\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoFloatVectorLoadGatherNotEqualIndices() {\n+        FloatVector res = FloatVector.fromArray(F_SPECIES, floatArray, 0, floatIndices, 0);\n+        FloatVector res2 = FloatVector.fromArray(F_SPECIES, floatArray, 0, floatIndices2, 0);\n+        Asserts.assertNotEquals(res, res2);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_F, \">= 1\", IRNode.LOAD_VECTOR_GATHER, \">= 1\" }, applyIfCPUFeatureOr = {\"avx2\", \"true\", \"sve\", \"true\"})\n+    public static void testOneFloatVectorLoadGather() {\n+        FloatVector res = FloatVector.fromArray(F_SPECIES, floatArray, 0);\n+        FloatVector res2 = FloatVector.fromArray(F_SPECIES, floatArray, 0, floatIndices, 0);\n+        Asserts.assertNotEquals(res, res2);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_F, \">= 1\", IRNode.LOAD_VECTOR_MASKED, \">= 1\" }, applyIfCPUFeatureOr = {\"avx2\", \"true\", \"sve\", \"true\"})\n+    public static void testOneFloatVectorLoadMasked() {\n+        FloatVector res = FloatVector.fromArray(F_SPECIES, floatArray, 0);\n+        FloatVector res2 = FloatVector.fromArray(F_SPECIES, floatArray, 0, floatVectorMask);\n+        Asserts.assertNotEquals(res, res2);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_GATHER, \">= 1\" }, applyIfCPUFeatureOr = {\"avx2\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoFloatVectorLoadGatherEquals() {\n+        FloatVector res = FloatVector.fromArray(F_SPECIES, floatArray, 0, floatIndices, 0);\n+        FloatVector res2 = FloatVector.fromArray(F_SPECIES, floatArray, 0, floatIndices, 0);\n+        Asserts.assertEquals(res, res2);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_MASKED, \">= 1\" }, applyIfCPUFeatureOr = {\"avx2\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoFloatVectorLoadMaskedEquals() {\n+        FloatVector res = FloatVector.fromArray(F_SPECIES, floatArray, 0, floatVectorMask);\n+        FloatVector res2 = FloatVector.fromArray(F_SPECIES, floatArray, 0, floatVectorMask);\n+        Asserts.assertEquals(res, res2);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_MASKED, \">= 2\" }, applyIfCPUFeatureOr = {\"avx2\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoFloatVectorLoadMaskedNotEqualMask() {\n+        FloatVector res = FloatVector.fromArray(F_SPECIES, floatArray, 0, floatVectorMask);\n+        FloatVector res2 = FloatVector.fromArray(F_SPECIES, floatArray, 0, floatVectorMask2);\n+        Asserts.assertNotEquals(res, res2);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_GATHER_MASKED, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoFloatVectorLoadGatherMaskedEquals() {\n+        FloatVector res = FloatVector.fromArray(F_SPECIES, floatArray, 0, floatIndices, 0, floatVectorMask);\n+        FloatVector res2 = FloatVector.fromArray(F_SPECIES, floatArray, 0, floatIndices, 0, floatVectorMask);\n+        Asserts.assertEquals(res, res2);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_GATHER_MASKED, \">= 2\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoFloatVectorLoadGatherMaskedNotEqualMask() {\n+        FloatVector res = FloatVector.fromArray(F_SPECIES, floatArray, 0, floatIndices, 0, floatVectorMask);\n+        FloatVector res2 = FloatVector.fromArray(F_SPECIES, floatArray, 0, floatIndices, 0, floatVectorMask2);\n+        Asserts.assertNotEquals(res, res2);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.LOAD_VECTOR_GATHER_MASKED, \">= 2\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoFloatVectorLoadGatherMaskedNotEqualIndices() {\n+        FloatVector res = FloatVector.fromArray(F_SPECIES, floatArray, 0, floatIndices, 0, floatVectorMask);\n+        FloatVector res2 = FloatVector.fromArray(F_SPECIES, floatArray, 0, floatIndices2, 0, floatVectorMask);\n+        Asserts.assertNotEquals(res, res2);\n+    }\n+\n+\n+    \/\/ STORE TESTS\n+\n+    \/\/ LongVector tests\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_SCATTER, \">= 2\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoLongVectorStoreScatterNotEqualVector() {\n+        long[] res = new long[L_SPECIES.length()];\n+        long[] res2 = new long[L_SPECIES.length()];\n+        longVector.intoArray(res, 0, longIndices, 0);\n+        longVector2.intoArray(res2, 0, longIndices, 0);\n+        Asserts.assertFalse(Arrays.equals(res, res2));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_SCATTER, \">= 2\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoLongVectorStoreScatterNotEqualIndices() {\n+        long[] res = new long[L_SPECIES.length()];\n+        long[] res2 = new long[L_SPECIES.length()];\n+        longVector.intoArray(res, 0, longIndices, 0);\n+        longVector.intoArray(res2, 0, longIndices2, 0);\n+        Asserts.assertFalse(Arrays.equals(res, res2));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR, \">= 1\", IRNode.STORE_VECTOR_SCATTER, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testOneLongVectorStoreScatter() {\n+        long[] res = new long[L_SPECIES.length()];\n+        long[] res2 = new long[L_SPECIES.length()];\n+        longVector.intoArray(res, 0);\n+        longVector.intoArray(res2, 0, longIndices, 0);\n+        Asserts.assertFalse(Arrays.equals(res, res2));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR, \">= 1\", IRNode.STORE_VECTOR_MASKED, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testOneLongVectorStoreMasked() {\n+        long[] res = new long[L_SPECIES.length()];\n+        long[] res2 = new long[L_SPECIES.length()];\n+        longVector.intoArray(res, 0);\n+        longVector.intoArray(res2, 0, longVectorMask);\n+        Asserts.assertFalse(Arrays.equals(res, res2));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_SCATTER, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoLongVectorStoreScatterEquals() {\n+        long[] res = new long[L_SPECIES.length()];\n+        long[] res2 = new long[L_SPECIES.length()];\n+        longVector.intoArray(res, 0, longIndices, 0);\n+        longVector.intoArray(res2, 0, longIndices, 0);\n+        Asserts.assertTrue(Arrays.equals(res, res2));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_MASKED, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoLongVectorStoreMaskedEquals() {\n+        long[] res = new long[L_SPECIES.length()];\n+        long[] res2 = new long[L_SPECIES.length()];\n+        longVector.intoArray(res, 0, longVectorMask);\n+        longVector.intoArray(res2, 0, longVectorMask);\n+        Asserts.assertTrue(Arrays.equals(res, res2));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_MASKED, \">= 2\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoLongVectorStoreMaskedNotEqualMask() {\n+        long[] res = new long[L_SPECIES.length()];\n+        long[] res2 = new long[L_SPECIES.length()];\n+        longVector.intoArray(res, 0, longVectorMask);\n+        longVector.intoArray(res2, 0, longVectorMask2);\n+        Asserts.assertFalse(Arrays.equals(res, res2));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_SCATTER_MASKED, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoLongVectorStoreScatterMaskedEquals() {\n+        long[] res = new long[L_SPECIES.length()];\n+        long[] res2 = new long[L_SPECIES.length()];\n+        longVector.intoArray(res, 0, longIndices, 0, longVectorMask);\n+        longVector.intoArray(res2, 0, longIndices, 0, longVectorMask);\n+        Asserts.assertTrue(Arrays.equals(res, res2));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_SCATTER_MASKED, \">= 2\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoLongVectorStoreScatterMaskedNotEqualMask() {\n+        long[] res = new long[L_SPECIES.length()];\n+        long[] res2 = new long[L_SPECIES.length()];\n+        longVector.intoArray(res, 0, longIndices, 0, longVectorMask);\n+        longVector.intoArray(res2, 0, longIndices, 0, longVectorMask2);\n+        Asserts.assertFalse(Arrays.equals(res, res2));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_SCATTER_MASKED, \">= 2\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoLongVectorStoreScatterMaskedNotEqualIndices() {\n+        long[] res = new long[L_SPECIES.length()];\n+        long[] res2 = new long[L_SPECIES.length()];\n+        longVector.intoArray(res, 0, longIndices, 0, longVectorMask);\n+        longVector.intoArray(res2, 0, longIndices2, 0, longVectorMask);\n+        Asserts.assertFalse(Arrays.equals(res, res2));\n+    }\n+\n+\n+    \/\/ IntVector tests\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_SCATTER, \">= 2\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoIntVectorStoreScatterNotEqualVector() {\n+        int[] res = new int[I_SPECIES.length()];\n+        int[] res2 = new int[I_SPECIES.length()];\n+        intVector.intoArray(res, 0, intIndices, 0);\n+        intVector2.intoArray(res2, 0, intIndices, 0);\n+        Asserts.assertFalse(Arrays.equals(res, res2));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_SCATTER, \">= 2\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoIntVectorStoreScatterNotEqualIndices() {\n+        int[] res = new int[I_SPECIES.length()];\n+        int[] res2 = new int[I_SPECIES.length()];\n+        intVector.intoArray(res, 0, intIndices, 0);\n+        intVector.intoArray(res2, 0, intIndices2, 0);\n+        Asserts.assertFalse(Arrays.equals(res, res2));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR, \">= 1\", IRNode.STORE_VECTOR_SCATTER, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testOneIntVectorStoreScatter() {\n+        int[] res = new int[I_SPECIES.length()];\n+        int[] res2 = new int[I_SPECIES.length()];\n+        intVector.intoArray(res, 0);\n+        intVector.intoArray(res2, 0, intIndices, 0);\n+        Asserts.assertFalse(Arrays.equals(res, res2));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR, \">= 1\", IRNode.STORE_VECTOR_MASKED, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testOneIntVectorStoreMasked() {\n+        int[] res = new int[I_SPECIES.length()];\n+        int[] res2 = new int[I_SPECIES.length()];\n+        intVector.intoArray(res, 0);\n+        intVector.intoArray(res2, 0, intVectorMask);\n+        Asserts.assertFalse(Arrays.equals(res, res2));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_SCATTER, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoIntVectorStoreScatterEquals() {\n+        int[] res = new int[I_SPECIES.length()];\n+        int[] res2 = new int[I_SPECIES.length()];\n+        intVector.intoArray(res, 0, intIndices, 0);\n+        intVector.intoArray(res2, 0, intIndices, 0);\n+        Asserts.assertTrue(Arrays.equals(res, res2));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_MASKED, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoIntVectorStoreMaskedEquals() {\n+        int[] res = new int[I_SPECIES.length()];\n+        int[] res2 = new int[I_SPECIES.length()];\n+        intVector.intoArray(res, 0, intVectorMask);\n+        intVector.intoArray(res2, 0, intVectorMask);\n+        Asserts.assertTrue(Arrays.equals(res, res2));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_MASKED, \">= 2\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoIntVectorStoreMaskedNotEqualMask() {\n+        int[] res = new int[I_SPECIES.length()];\n+        int[] res2 = new int[I_SPECIES.length()];\n+        intVector.intoArray(res, 0, intVectorMask);\n+        intVector.intoArray(res2, 0, intVectorMask2);\n+        Asserts.assertFalse(Arrays.equals(res, res2));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_SCATTER_MASKED, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoIntVectorStoreScatterMaskedEquals() {\n+        int[] res = new int[I_SPECIES.length()];\n+        int[] res2 = new int[I_SPECIES.length()];\n+        intVector.intoArray(res, 0, intIndices, 0, intVectorMask);\n+        intVector.intoArray(res2, 0, intIndices, 0, intVectorMask);\n+        Asserts.assertTrue(Arrays.equals(res, res2));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_SCATTER_MASKED, \">= 2\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoIntVectorStoreScatterMaskedNotEqualMask() {\n+        int[] res = new int[I_SPECIES.length()];\n+        int[] res2 = new int[I_SPECIES.length()];\n+        intVector.intoArray(res, 0, intIndices, 0, intVectorMask);\n+        intVector.intoArray(res2, 0, intIndices, 0, intVectorMask2);\n+        Asserts.assertFalse(Arrays.equals(res, res2));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_SCATTER_MASKED, \">= 2\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoIntVectorStoreScatterMaskedNotEqualIndices() {\n+        int[] res = new int[I_SPECIES.length()];\n+        int[] res2 = new int[I_SPECIES.length()];\n+        intVector.intoArray(res, 0, intIndices, 0, intVectorMask);\n+        intVector.intoArray(res2, 0, intIndices2, 0, intVectorMask);\n+        Asserts.assertFalse(Arrays.equals(res, res2));\n+    }\n+\n+\n+    \/\/ DoubleVector tests\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_SCATTER, \">= 2\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoDoubleVectorStoreScatterNotEqualVector() {\n+        double[] res = new double[D_SPECIES.length()];\n+        double[] res2 = new double[D_SPECIES.length()];\n+        doubleVector.intoArray(res, 0, doubleIndices, 0);\n+        doubleVector2.intoArray(res2, 0, doubleIndices, 0);\n+        Asserts.assertFalse(Arrays.equals(res, res2));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_SCATTER, \">= 2\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoDoubleVectorStoreScatterNotEqualIndices() {\n+        double[] res = new double[D_SPECIES.length()];\n+        double[] res2 = new double[D_SPECIES.length()];\n+        doubleVector.intoArray(res, 0, doubleIndices, 0);\n+        doubleVector.intoArray(res2, 0, doubleIndices2, 0);\n+        Asserts.assertFalse(Arrays.equals(res, res2));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR, \">= 1\", IRNode.STORE_VECTOR_SCATTER, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testOneDoubleVectorStoreScatter() {\n+        double[] res = new double[D_SPECIES.length()];\n+        double[] res2 = new double[D_SPECIES.length()];\n+        doubleVector.intoArray(res, 0);\n+        doubleVector.intoArray(res2, 0, doubleIndices, 0);\n+        Asserts.assertFalse(Arrays.equals(res, res2));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR, \">= 1\", IRNode.STORE_VECTOR_MASKED, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testOneDoubleVectorStoreMasked() {\n+        double[] res = new double[D_SPECIES.length()];\n+        double[] res2 = new double[D_SPECIES.length()];\n+        doubleVector.intoArray(res, 0);\n+        doubleVector.intoArray(res2, 0, doubleVectorMask);\n+        Asserts.assertFalse(Arrays.equals(res, res2));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_SCATTER, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoDoubleVectorStoreScatterEquals() {\n+        double[] res = new double[D_SPECIES.length()];\n+        double[] res2 = new double[D_SPECIES.length()];\n+        doubleVector.intoArray(res, 0, doubleIndices, 0);\n+        doubleVector.intoArray(res2, 0, doubleIndices, 0);\n+        Asserts.assertTrue(Arrays.equals(res, res2));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_MASKED, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoDoubleVectorStoreMaskedEquals() {\n+        double[] res = new double[D_SPECIES.length()];\n+        double[] res2 = new double[D_SPECIES.length()];\n+        doubleVector.intoArray(res, 0, doubleVectorMask);\n+        doubleVector.intoArray(res2, 0, doubleVectorMask);\n+        Asserts.assertTrue(Arrays.equals(res, res2));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_MASKED, \">= 2\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoDoubleVectorStoreMaskedNotEqualMask() {\n+        double[] res = new double[D_SPECIES.length()];\n+        double[] res2 = new double[D_SPECIES.length()];\n+        doubleVector.intoArray(res, 0, doubleVectorMask);\n+        doubleVector.intoArray(res2, 0, doubleVectorMask2);\n+        Asserts.assertFalse(Arrays.equals(res, res2));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_SCATTER_MASKED, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoDoubleVectorStoreScatterMaskedEquals() {\n+        double[] res = new double[D_SPECIES.length()];\n+        double[] res2 = new double[D_SPECIES.length()];\n+        doubleVector.intoArray(res, 0, doubleIndices, 0, doubleVectorMask);\n+        doubleVector.intoArray(res2, 0, doubleIndices, 0, doubleVectorMask);\n+        Asserts.assertTrue(Arrays.equals(res, res2));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_SCATTER_MASKED, \">= 2\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoDoubleVectorStoreScatterMaskedNotEqualMask() {\n+        double[] res = new double[D_SPECIES.length()];\n+        double[] res2 = new double[D_SPECIES.length()];\n+        doubleVector.intoArray(res, 0, doubleIndices, 0, doubleVectorMask);\n+        doubleVector.intoArray(res2, 0, doubleIndices, 0, doubleVectorMask2);\n+        Asserts.assertFalse(Arrays.equals(res, res2));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_SCATTER_MASKED, \">= 2\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoDoubleVectorStoreScatterMaskedNotEqualIndices() {\n+        double[] res = new double[D_SPECIES.length()];\n+        double[] res2 = new double[D_SPECIES.length()];\n+        doubleVector.intoArray(res, 0, doubleIndices, 0, doubleVectorMask);\n+        doubleVector.intoArray(res2, 0, doubleIndices2, 0, doubleVectorMask);\n+        Asserts.assertFalse(Arrays.equals(res, res2));\n+    }\n+\n+\n+    \/\/ FloatVector tests\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_SCATTER, \">= 2\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoFloatVectorStoreScatterNotEqualVector() {\n+        float[] res = new float[F_SPECIES.length()];\n+        float[] res2 = new float[F_SPECIES.length()];\n+        floatVector.intoArray(res, 0, floatIndices, 0);\n+        floatVector2.intoArray(res2, 0, floatIndices, 0);\n+        Asserts.assertFalse(Arrays.equals(res, res2));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_SCATTER, \">= 2\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoFloatVectorStoreScatterNotEqualIndices() {\n+        float[] res = new float[F_SPECIES.length()];\n+        float[] res2 = new float[F_SPECIES.length()];\n+        floatVector.intoArray(res, 0, floatIndices, 0);\n+        floatVector.intoArray(res2, 0, floatIndices2, 0);\n+        Asserts.assertFalse(Arrays.equals(res, res2));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR, \">= 1\", IRNode.STORE_VECTOR_SCATTER, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testOneFloatVectorStoreScatter() {\n+        float[] res = new float[F_SPECIES.length()];\n+        float[] res2 = new float[F_SPECIES.length()];\n+        floatVector.intoArray(res, 0);\n+        floatVector.intoArray(res2, 0, floatIndices, 0);\n+        Asserts.assertFalse(Arrays.equals(res, res2));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR, \">= 1\", IRNode.STORE_VECTOR_MASKED, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testOneFloatVectorStoreMasked() {\n+        float[] res = new float[F_SPECIES.length()];\n+        float[] res2 = new float[F_SPECIES.length()];\n+        floatVector.intoArray(res, 0);\n+        floatVector.intoArray(res2, 0, floatVectorMask);\n+        Asserts.assertFalse(Arrays.equals(res, res2));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_SCATTER, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoFloatVectorStoreScatterEquals() {\n+        float[] res = new float[F_SPECIES.length()];\n+        float[] res2 = new float[F_SPECIES.length()];\n+        floatVector.intoArray(res, 0, floatIndices, 0);\n+        floatVector.intoArray(res2, 0, floatIndices, 0);\n+        Asserts.assertTrue(Arrays.equals(res, res2));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_MASKED, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoFloatVectorStoreMaskedEquals() {\n+        float[] res = new float[F_SPECIES.length()];\n+        float[] res2 = new float[F_SPECIES.length()];\n+        floatVector.intoArray(res, 0, floatVectorMask);\n+        floatVector.intoArray(res2, 0, floatVectorMask);\n+        Asserts.assertTrue(Arrays.equals(res, res2));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_MASKED, \">= 2\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoFloatVectorStoreMaskedNotEqualMask() {\n+        float[] res = new float[F_SPECIES.length()];\n+        float[] res2 = new float[F_SPECIES.length()];\n+        floatVector.intoArray(res, 0, floatVectorMask);\n+        floatVector.intoArray(res2, 0, floatVectorMask2);\n+        Asserts.assertFalse(Arrays.equals(res, res2));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_SCATTER_MASKED, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoFloatVectorStoreScatterMaskedEquals() {\n+        float[] res = new float[F_SPECIES.length()];\n+        float[] res2 = new float[F_SPECIES.length()];\n+        floatVector.intoArray(res, 0, floatIndices, 0, floatVectorMask);\n+        floatVector.intoArray(res2, 0, floatIndices, 0, floatVectorMask);\n+        Asserts.assertTrue(Arrays.equals(res, res2));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_SCATTER_MASKED, \">= 2\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoFloatVectorStoreScatterMaskedNotEqualMask() {\n+        float[] res = new float[F_SPECIES.length()];\n+        float[] res2 = new float[F_SPECIES.length()];\n+        floatVector.intoArray(res, 0, floatIndices, 0, floatVectorMask);\n+        floatVector.intoArray(res2, 0, floatIndices, 0, floatVectorMask2);\n+        Asserts.assertFalse(Arrays.equals(res, res2));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_SCATTER_MASKED, \">= 2\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testTwoFloatVectorStoreScatterMaskedNotEqualIndices() {\n+        float[] res = new float[F_SPECIES.length()];\n+        float[] res2 = new float[F_SPECIES.length()];\n+        floatVector.intoArray(res, 0, floatIndices, 0, floatVectorMask);\n+        floatVector.intoArray(res2, 0, floatIndices2, 0, floatVectorMask);\n+        Asserts.assertFalse(Arrays.equals(res, res2));\n+    }\n+\n+\n+    \/\/ STORE - LOAD tests\n+\n+    \/\/ LongVector tests\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR, \">= 1\", IRNode.LOAD_VECTOR_GATHER, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testOneLongVectorStoreLoadGather() {\n+        long[] array = new long[L_SPECIES.length()];\n+        longVector.intoArray(array, 0);\n+        LongVector res = LongVector.fromArray(L_SPECIES, array, 0, longIndices, 0);\n+        Asserts.assertNotEquals(res, longVector);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_SCATTER, \">= 1\", IRNode.LOAD_VECTOR_L, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testOneLongVectorStoreScatterLoad() {\n+        long[] array = new long[L_SPECIES.length()];\n+        longVector.intoArray(array, 0, longIndices, 0);\n+        LongVector res = LongVector.fromArray(L_SPECIES, array, 0);\n+        Asserts.assertNotEquals(res, longVector);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR, \">= 1\", IRNode.LOAD_VECTOR_MASKED, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testOneLongVectorStoreLoadMasked() {\n+        long[] array = new long[L_SPECIES.length()];\n+        longVector.intoArray(array, 0);\n+        LongVector res = LongVector.fromArray(L_SPECIES, array, 0, longVectorMask);\n+        Asserts.assertNotEquals(res, longVector);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_MASKED, \">= 1\", IRNode.LOAD_VECTOR_L, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testOneLongVectorStoreMaskedLoad() {\n+        long[] array = new long[L_SPECIES.length()];\n+        longVector.intoArray(array, 0, longVectorMask);\n+        LongVector res = LongVector.fromArray(L_SPECIES, array, 0);\n+        Asserts.assertNotEquals(res, longVector);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_SCATTER, \">= 1\", IRNode.LOAD_VECTOR_GATHER, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testLongVectorLoadGatherStoreScatterDuplicateIndicesVector() {\n+        long[] res = new long[L_SPECIES.length()];\n+        longVector.intoArray(res, 0, duplicateLongIndices, 0);\n+        LongVector res2 = LongVector.fromArray(L_SPECIES, res, 0, duplicateLongIndices, 0);\n+        Asserts.assertNotEquals(res2, longVector);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_MASKED, \">= 1\", IRNode.LOAD_VECTOR_MASKED, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testLongVectorStoreLoadMaskedVector() {\n+        long[] res = new long[L_SPECIES.length()];\n+        longVector.intoArray(res, 0, longVectorMask);\n+        LongVector res2 = LongVector.fromArray(L_SPECIES, res, 0, longVectorMask);\n+        Asserts.assertNotEquals(res2, longVector);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR, \">= 1\", IRNode.LOAD_VECTOR_L, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testStoreLoadLongVectorDifferentSpeciesVector() {\n+        long[] res = new long[L_SPECIES.length()];\n+        longVector.intoArray(res, 0);\n+        LongVector res2 = LongVector.fromArray(LongVector.SPECIES_64, res, 0);\n+        Asserts.assertNotEquals(res2, longVector);\n+    }\n+\n+\n+    \/\/ IntVector tests\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR, \">= 1\", IRNode.LOAD_VECTOR_GATHER, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testOneIntVectorStoreLoadGather() {\n+        int[] array = new int[I_SPECIES.length()];\n+        intVector.intoArray(array, 0);\n+        IntVector res = IntVector.fromArray(I_SPECIES, array, 0, intIndices, 0);\n+        Asserts.assertNotEquals(res, intVector);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_SCATTER, \">= 1\", IRNode.LOAD_VECTOR_I, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testOneIntVectorStoreScatterLoad() {\n+        int[] array = new int[I_SPECIES.length()];\n+        intVector.intoArray(array, 0, intIndices, 0);\n+        IntVector res = IntVector.fromArray(I_SPECIES, array, 0);\n+        Asserts.assertNotEquals(res, intVector);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR, \">= 1\", IRNode.LOAD_VECTOR_MASKED, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testOneIntVectorStoreLoadMasked() {\n+        int[] array = new int[I_SPECIES.length()];\n+        intVector.intoArray(array, 0);\n+        IntVector res = IntVector.fromArray(I_SPECIES, array, 0, intVectorMask);\n+        Asserts.assertNotEquals(res, intVector);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_MASKED, \">= 1\", IRNode.LOAD_VECTOR_I, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testOneIntVectorStoreMaskedLoad() {\n+        int[] array = new int[I_SPECIES.length()];\n+        intVector.intoArray(array, 0, intVectorMask);\n+        IntVector res = IntVector.fromArray(I_SPECIES, array, 0);\n+        Asserts.assertNotEquals(res, intVector);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_SCATTER, \">= 1\", IRNode.LOAD_VECTOR_GATHER, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testIntVectorLoadGatherStoreScatterDuplicateIndicesVector() {\n+        int[] res = new int[I_SPECIES.length()];\n+        intVector.intoArray(res, 0, duplicateIntIndices, 0);\n+        IntVector res2 = IntVector.fromArray(I_SPECIES, res, 0, duplicateIntIndices, 0);\n+        Asserts.assertNotEquals(res2, intVector);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_MASKED, \">= 1\", IRNode.LOAD_VECTOR_MASKED, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testIntVectorStoreLoadMaskedVector() {\n+        int[] res = new int[I_SPECIES.length()];\n+        intVector.intoArray(res, 0, intVectorMask);\n+        IntVector res2 = IntVector.fromArray(I_SPECIES, res, 0, intVectorMask);\n+        Asserts.assertNotEquals(res2, intVector);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR, \">= 1\", IRNode.LOAD_VECTOR_I, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testStoreLoadIntVectorDifferentSpeciesVector() {\n+        int[] res = new int[I_SPECIES.length()];\n+        intVector.intoArray(res, 0);\n+        IntVector res2 = IntVector.fromArray(IntVector.SPECIES_64, res, 0);\n+        Asserts.assertNotEquals(res2, intVector);\n+    }\n+\n+\n+    \/\/ DoubleVector tests\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR, \">= 1\", IRNode.LOAD_VECTOR_GATHER, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testOneDoubleVectorStoreLoadGather() {\n+        double[] array = new double[D_SPECIES.length()];\n+        doubleVector.intoArray(array, 0);\n+        DoubleVector res = DoubleVector.fromArray(D_SPECIES, array, 0, doubleIndices, 0);\n+        Asserts.assertNotEquals(res, doubleVector);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_SCATTER, \">= 1\", IRNode.LOAD_VECTOR_D, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testOneDoubleVectorStoreScatterLoad() {\n+        double[] array = new double[D_SPECIES.length()];\n+        doubleVector.intoArray(array, 0, doubleIndices, 0);\n+        DoubleVector res = DoubleVector.fromArray(D_SPECIES, array, 0);\n+        Asserts.assertNotEquals(res, doubleVector);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR, \">= 1\", IRNode.LOAD_VECTOR_MASKED, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testOneDoubleVectorStoreLoadMasked() {\n+        double[] array = new double[D_SPECIES.length()];\n+        doubleVector.intoArray(array, 0);\n+        DoubleVector res = DoubleVector.fromArray(D_SPECIES, array, 0, doubleVectorMask);\n+        Asserts.assertNotEquals(res, doubleVector);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_MASKED, \">= 1\", IRNode.LOAD_VECTOR_D, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testOneDoubleVectorStoreMaskedLoad() {\n+        double[] array = new double[D_SPECIES.length()];\n+        doubleVector.intoArray(array, 0, doubleVectorMask);\n+        DoubleVector res = DoubleVector.fromArray(D_SPECIES, array, 0);\n+        Asserts.assertNotEquals(res, doubleVector);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_SCATTER, \">= 1\", IRNode.LOAD_VECTOR_GATHER, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testDoubleVectorLoadGatherStoreScatterDuplicateIndicesVector() {\n+        double[] res = new double[D_SPECIES.length()];\n+        doubleVector.intoArray(res, 0, duplicateDoubleIndices, 0);\n+        DoubleVector res2 = DoubleVector.fromArray(D_SPECIES, res, 0, duplicateDoubleIndices, 0);\n+        Asserts.assertNotEquals(res2, doubleVector);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_MASKED, \">= 1\", IRNode.LOAD_VECTOR_MASKED, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testDoubleVectorStoreLoadMaskedVector() {\n+        double[] res = new double[D_SPECIES.length()];\n+        doubleVector.intoArray(res, 0, doubleVectorMask);\n+        DoubleVector res2 = DoubleVector.fromArray(D_SPECIES, res, 0, doubleVectorMask);\n+        Asserts.assertNotEquals(res2, doubleVector);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR, \">= 1\", IRNode.LOAD_VECTOR_D, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testStoreLoadDoubleVectorDifferentSpeciesVector() {\n+        double[] res = new double[D_SPECIES.length()];\n+        doubleVector.intoArray(res, 0);\n+        DoubleVector res2 = DoubleVector.fromArray(DoubleVector.SPECIES_64, res, 0);\n+        Asserts.assertNotEquals(res2, doubleVector);\n+    }\n+\n+\n+    \/\/ FloatVector tests\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR, \">= 1\", IRNode.LOAD_VECTOR_GATHER, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testOneFloatVectorStoreLoadGather() {\n+        float[] array = new float[F_SPECIES.length()];\n+        floatVector.intoArray(array, 0);\n+        FloatVector res = FloatVector.fromArray(F_SPECIES, array, 0, floatIndices, 0);\n+        Asserts.assertNotEquals(res, floatVector);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_SCATTER, \">= 1\", IRNode.LOAD_VECTOR_F, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testOneFloatVectorStoreScatterLoad() {\n+        float[] array = new float[F_SPECIES.length()];\n+        floatVector.intoArray(array, 0, floatIndices, 0);\n+        FloatVector res = FloatVector.fromArray(F_SPECIES, array, 0);\n+        Asserts.assertNotEquals(res, floatVector);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR, \">= 1\", IRNode.LOAD_VECTOR_MASKED, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testOneFloatVectorStoreLoadMasked() {\n+        float[] array = new float[F_SPECIES.length()];\n+        floatVector.intoArray(array, 0);\n+        FloatVector res = FloatVector.fromArray(F_SPECIES, array, 0, floatVectorMask);\n+        Asserts.assertNotEquals(res, floatVector);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_MASKED, \">= 1\", IRNode.LOAD_VECTOR_F, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testOneFloatVectorStoreMaskedLoad() {\n+        float[] array = new float[F_SPECIES.length()];\n+        floatVector.intoArray(array, 0, floatVectorMask);\n+        FloatVector res = FloatVector.fromArray(F_SPECIES, array, 0);\n+        Asserts.assertNotEquals(res, floatVector);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_SCATTER, \">= 1\", IRNode.LOAD_VECTOR_GATHER, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testFloatVectorLoadGatherStoreScatterDuplicateIndicesVector() {\n+        float[] res = new float[F_SPECIES.length()];\n+        floatVector.intoArray(res, 0, duplicateFloatIndices, 0);\n+        FloatVector res2 = FloatVector.fromArray(F_SPECIES, res, 0, duplicateFloatIndices, 0);\n+        Asserts.assertNotEquals(res2, floatVector);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_MASKED, \">= 1\", IRNode.LOAD_VECTOR_MASKED, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testFloatVectorStoreLoadMaskedVector() {\n+        float[] res = new float[F_SPECIES.length()];\n+        floatVector.intoArray(res, 0, floatVectorMask);\n+        FloatVector res2 = FloatVector.fromArray(F_SPECIES, res, 0, floatVectorMask);\n+        Asserts.assertNotEquals(res2, floatVector);\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR, \">= 1\", IRNode.LOAD_VECTOR_F, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testStoreLoadFloatVectorDifferentSpeciesVector() {\n+        float[] res = new float[F_SPECIES.length()];\n+        floatVector.intoArray(res, 0);\n+        FloatVector res2 = FloatVector.fromArray(FloatVector.SPECIES_64, res, 0);\n+        Asserts.assertNotEquals(res2, floatVector);\n+    }\n+\n+\n+    \/\/ LOAD - STORE tests\n+\n+    \/\/ LongVector tests\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR, \">= 1\", IRNode.LOAD_VECTOR_GATHER, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testOneLongVectorLoadGatherStore() {\n+        long[] res = new long[L_SPECIES.length()];\n+        LongVector vector = LongVector.fromArray(L_SPECIES, longArray, 0, longIndices, 0);\n+        vector.intoArray(res, 0);\n+        Asserts.assertFalse(Arrays.equals(res, longArray));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_SCATTER, \">= 1\", IRNode.LOAD_VECTOR_L, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testOneLongVectorLoadStoreScatter() {\n+        long[] res = new long[L_SPECIES.length()];\n+        LongVector vector = LongVector.fromArray(L_SPECIES, longArray, 0);\n+        vector.intoArray(res, 0, longIndices, 0);\n+        Asserts.assertFalse(Arrays.equals(res, longArray));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR, \">= 1\", IRNode.LOAD_VECTOR_MASKED, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testOneLongVectorLoadMaskedStore() {\n+        long[] res = new long[L_SPECIES.length()];\n+        LongVector vector = LongVector.fromArray(L_SPECIES, longArray, 0, longVectorMask);\n+        vector.intoArray(res, 0);\n+        Asserts.assertFalse(Arrays.equals(res, longArray));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_MASKED, \">= 1\", IRNode.LOAD_VECTOR_L, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testOneLongVectorLoadStoreMasked() {\n+        long[] res = new long[L_SPECIES.length()];\n+        LongVector vector = LongVector.fromArray(L_SPECIES, longArray, 0);\n+        vector.intoArray(res, 0, longVectorMask);\n+        Asserts.assertFalse(Arrays.equals(res, longArray));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_SCATTER, \">= 1\", IRNode.LOAD_VECTOR_GATHER, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testLongVectorStoreScatterLoadGatherDuplicateIndicesVector() {\n+        long[] res = new long[L_SPECIES.length()];\n+        LongVector vector = LongVector.fromArray(L_SPECIES, longArray, 0, duplicateLongIndices, 0);\n+        vector.intoArray(res, 0, duplicateLongIndices, 0);\n+        Asserts.assertFalse(Arrays.equals(res, longArray));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_MASKED, \">= 1\", IRNode.LOAD_VECTOR_MASKED, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testLongVectorLoadMaskedStoreVector() {\n+        long[] res = new long[L_SPECIES.length()];\n+        LongVector vector = LongVector.fromArray(L_SPECIES, longArray, 0, longVectorMask);\n+        vector.intoArray(res, 0, longVectorMask);\n+        Asserts.assertFalse(Arrays.equals(res, longArray));\n+    }\n+\n+\n+    \/\/ IntVector tests\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR, \">= 1\", IRNode.LOAD_VECTOR_GATHER, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testOneIntVectorLoadGatherStore() {\n+        int[] res = new int[I_SPECIES.length()];\n+        IntVector vector = IntVector.fromArray(I_SPECIES, intArray, 0, intIndices, 0);\n+        vector.intoArray(res, 0);\n+        Asserts.assertFalse(Arrays.equals(res, intArray));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_SCATTER, \">= 1\", IRNode.LOAD_VECTOR_I, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testOneIntVectorLoadStoreScatter() {\n+        int[] res = new int[I_SPECIES.length()];\n+        IntVector vector = IntVector.fromArray(I_SPECIES, intArray, 0);\n+        vector.intoArray(res, 0, intIndices, 0);\n+        Asserts.assertFalse(Arrays.equals(res, intArray));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR, \">= 1\", IRNode.LOAD_VECTOR_MASKED, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testOneIntVectorLoadMaskedStore() {\n+        int[] res = new int[I_SPECIES.length()];\n+        IntVector vector = IntVector.fromArray(I_SPECIES, intArray, 0, intVectorMask);\n+        vector.intoArray(res, 0);\n+        Asserts.assertFalse(Arrays.equals(res, intArray));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_MASKED, \">= 1\", IRNode.LOAD_VECTOR_I, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testOneIntVectorLoadStoreMasked() {\n+        int[] res = new int[I_SPECIES.length()];\n+        IntVector vector = IntVector.fromArray(I_SPECIES, intArray, 0);\n+        vector.intoArray(res, 0, intVectorMask);\n+        Asserts.assertFalse(Arrays.equals(res, intArray));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_SCATTER, \">= 1\", IRNode.LOAD_VECTOR_GATHER, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testIntVectorStoreScatterLoadGatherDuplicateIndicesVector() {\n+        int[] res = new int[I_SPECIES.length()];\n+        IntVector vector = IntVector.fromArray(I_SPECIES, intArray, 0, duplicateIntIndices, 0);\n+        vector.intoArray(res, 0, duplicateIntIndices, 0);\n+        Asserts.assertFalse(Arrays.equals(res, intArray));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_MASKED, \">= 1\", IRNode.LOAD_VECTOR_MASKED, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testIntVectorLoadMaskedStoreVector() {\n+        int[] res = new int[I_SPECIES.length()];\n+        IntVector vector = IntVector.fromArray(I_SPECIES, intArray, 0, intVectorMask);\n+        vector.intoArray(res, 0, intVectorMask);\n+        Asserts.assertFalse(Arrays.equals(res, intArray));\n+    }\n+\n+\n+    \/\/ DoubleVector tests\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR, \">= 1\", IRNode.LOAD_VECTOR_GATHER, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testOneDoubleVectorLoadGatherStore() {\n+        double[] res = new double[D_SPECIES.length()];\n+        DoubleVector vector = DoubleVector.fromArray(D_SPECIES, doubleArray, 0, doubleIndices, 0);\n+        vector.intoArray(res, 0);\n+        Asserts.assertFalse(Arrays.equals(res, doubleArray));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_SCATTER, \">= 1\", IRNode.LOAD_VECTOR_D, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testOneDoubleVectorLoadStoreScatter() {\n+        double[] res = new double[D_SPECIES.length()];\n+        DoubleVector vector = DoubleVector.fromArray(D_SPECIES, doubleArray, 0);\n+        vector.intoArray(res, 0, doubleIndices, 0);\n+        Asserts.assertFalse(Arrays.equals(res, doubleArray));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR, \">= 1\", IRNode.LOAD_VECTOR_MASKED, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testOneDoubleVectorLoadMaskedStore() {\n+        double[] res = new double[D_SPECIES.length()];\n+        DoubleVector vector = DoubleVector.fromArray(D_SPECIES, doubleArray, 0, doubleVectorMask);\n+        vector.intoArray(res, 0);\n+        Asserts.assertFalse(Arrays.equals(res, doubleArray));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_MASKED, \">= 1\", IRNode.LOAD_VECTOR_D, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testOneDoubleVectorLoadStoreMasked() {\n+        double[] res = new double[D_SPECIES.length()];\n+        DoubleVector vector = DoubleVector.fromArray(D_SPECIES, doubleArray, 0);\n+        vector.intoArray(res, 0, doubleVectorMask);\n+        Asserts.assertFalse(Arrays.equals(res, doubleArray));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_SCATTER, \">= 1\", IRNode.LOAD_VECTOR_GATHER, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testDoubleVectorStoreScatterLoadGatherDuplicateIndicesVector() {\n+        double[] res = new double[D_SPECIES.length()];\n+        DoubleVector vector = DoubleVector.fromArray(D_SPECIES, doubleArray, 0, duplicateDoubleIndices, 0);\n+        vector.intoArray(res, 0, duplicateDoubleIndices, 0);\n+        Asserts.assertFalse(Arrays.equals(res, doubleArray));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_MASKED, \">= 1\", IRNode.LOAD_VECTOR_MASKED, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testDoubleVectorLoadMaskedStoreVector() {\n+        double[] res = new double[D_SPECIES.length()];\n+        DoubleVector vector = DoubleVector.fromArray(D_SPECIES, doubleArray, 0, doubleVectorMask);\n+        vector.intoArray(res, 0, doubleVectorMask);\n+        Asserts.assertFalse(Arrays.equals(res, doubleArray));\n+    }\n+\n+\n+    \/\/ FloatVector tests\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR, \">= 1\", IRNode.LOAD_VECTOR_GATHER, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testOneFloatVectorLoadGatherStore() {\n+        float[] res = new float[F_SPECIES.length()];\n+        FloatVector vector = FloatVector.fromArray(F_SPECIES, floatArray, 0, floatIndices, 0);\n+        vector.intoArray(res, 0);\n+        Asserts.assertFalse(Arrays.equals(res, floatArray));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_SCATTER, \">= 1\", IRNode.LOAD_VECTOR_F, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testOneFloatVectorLoadStoreScatter() {\n+        float[] res = new float[F_SPECIES.length()];\n+        FloatVector vector = FloatVector.fromArray(F_SPECIES, floatArray, 0);\n+        vector.intoArray(res, 0, floatIndices, 0);\n+        Asserts.assertFalse(Arrays.equals(res, floatArray));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR, \">= 1\", IRNode.LOAD_VECTOR_MASKED, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testOneFloatVectorLoadMaskedStore() {\n+        float[] res = new float[F_SPECIES.length()];\n+        FloatVector vector = FloatVector.fromArray(F_SPECIES, floatArray, 0, floatVectorMask);\n+        vector.intoArray(res, 0);\n+        Asserts.assertFalse(Arrays.equals(res, floatArray));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_MASKED, \">= 1\", IRNode.LOAD_VECTOR_F, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testOneFloatVectorLoadStoreMasked() {\n+        float[] res = new float[F_SPECIES.length()];\n+        FloatVector vector = FloatVector.fromArray(F_SPECIES, floatArray, 0);\n+        vector.intoArray(res, 0, floatVectorMask);\n+        Asserts.assertFalse(Arrays.equals(res, floatArray));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_SCATTER, \">= 1\", IRNode.LOAD_VECTOR_GATHER, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testFloatVectorStoreScatterLoadGatherDuplicateIndicesVector() {\n+        float[] res = new float[F_SPECIES.length()];\n+        FloatVector vector = FloatVector.fromArray(F_SPECIES, floatArray, 0, duplicateFloatIndices, 0);\n+        vector.intoArray(res, 0, duplicateFloatIndices, 0);\n+        Asserts.assertFalse(Arrays.equals(res, floatArray));\n+    }\n+\n+    @Test\n+    @IR(counts = { IRNode.STORE_VECTOR_MASKED, \">= 1\", IRNode.LOAD_VECTOR_MASKED, \">= 1\" }, applyIfCPUFeatureOr = {\"avx512\", \"true\", \"sve\", \"true\"})\n+    public static void testFloatVectorLoadMaskedStoreVector() {\n+        float[] res = new float[F_SPECIES.length()];\n+        FloatVector vector = FloatVector.fromArray(F_SPECIES, floatArray, 0, floatVectorMask);\n+        vector.intoArray(res, 0, floatVectorMask);\n+        Asserts.assertFalse(Arrays.equals(res, floatArray));\n+    }\n+\n+\n+    public static void main(String[] args) {\n+        TestFramework testFramework = new TestFramework();\n+        testFramework.setDefaultWarmup(10000)\n+                     .addFlags(\"--add-modules=jdk.incubator.vector\", \"-XX:+IncrementalInlineForceCleanup\")\n+                     .start();\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/compiler\/vectorapi\/VectorGatherMaskFoldingTest.java","additions":1404,"deletions":0,"binary":false,"changes":1404,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -47,1 +47,0 @@\n-                                 \"-XX:UseAVX=1\",\n@@ -53,1 +52,1 @@\n-  @IR(applyIf = {\"UseAVX\", \" > 1\"}, counts = {\"RoundVF\" , \" > 0 \"})\n+  @IR(applyIf = {\"UseAVX\", \" > 1\"}, counts = {IRNode.ROUND_VF , \" > 0 \"})\n","filename":"test\/hotspot\/jtreg\/compiler\/vectorization\/TestRoundVectFloat.java","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+ * @bug 8183390 8332905\n@@ -51,0 +52,1 @@\n+    private static       int size = 543;\n@@ -74,1 +76,1 @@\n-    @IR(applyIfCPUFeatureOr = {\"asimd\", \"true\", \"avx512f\", \"true\"},\n+    @IR(applyIfCPUFeatureOr = {\"asimd\", \"true\", \"avx2\", \"true\"},\n@@ -87,1 +89,17 @@\n-    @IR(applyIfCPUFeatureOr = {\"asimd\", \"true\", \"avx512f\", \"true\"},\n+    @IR(applyIfCPUFeatureOr = {\"sve\", \"true\", \"avx2\", \"true\"},\n+        counts = {IRNode.STORE_VECTOR, \">0\"})\n+    @IR(applyIfCPUFeature = {\"avx512f\", \"true\"},\n+        counts = {IRNode.ROTATE_RIGHT_V, \">0\"})\n+    \/\/ Requires size to not be known at compile time, otherwise the shift\n+    \/\/ can get constant folded with the (iv + const) pattern from the\n+    \/\/ PopulateIndex.\n+    public int[] intCombinedRotateShiftWithPopulateIndex() {\n+        int[] res = new int[size];\n+        for (int i = 0; i < size; i++) {\n+            res[i] = (i << 14) | (i >>> 18);\n+        }\n+        return res;\n+    }\n+\n+    @Test\n+    @IR(applyIfCPUFeatureOr = {\"asimd\", \"true\", \"avx2\", \"true\"},\n","filename":"test\/hotspot\/jtreg\/compiler\/vectorization\/runner\/ArrayShiftOpTest.java","additions":20,"deletions":2,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -146,3 +146,0 @@\n-        \/\/ The vectorization of some conversions may fail when `+AlignVector`.\n-        \/\/ We can remove the condition after JDK-8303827.\n-        applyIf = {\"AlignVector\", \"false\"},\n@@ -236,3 +233,0 @@\n-        \/\/ The vectorization of some conversions may fail when `+AlignVector`.\n-        \/\/ We can remove the condition after JDK-8303827.\n-        applyIf = {\"AlignVector\", \"false\"},\n@@ -320,3 +314,0 @@\n-        \/\/ The vectorization of some conversions may fail when `+AlignVector`.\n-        \/\/ We can remove the condition after JDK-8303827.\n-        applyIf = {\"AlignVector\", \"false\"},\n","filename":"test\/hotspot\/jtreg\/compiler\/vectorization\/runner\/ArrayTypeConvertTest.java","additions":0,"deletions":9,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,1 +31,1 @@\n- * @requires vm.gc.G1 & vm.opt.x.Xmx == null & vm.opt.x.Xms == null & vm.opt.MinHeapSize == null & vm.opt.MaxHeapSize == null & vm.opt.InitialHeapSize == null\n+ * @requires vm.gc.G1 & vm.opt.MinHeapSize == null & vm.opt.MaxHeapSize == null & vm.opt.InitialHeapSize == null\n","filename":"test\/hotspot\/jtreg\/gc\/arguments\/TestG1HeapSizeFlags.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -30,1 +30,1 @@\n- * @requires vm.opt.x.Xminf == null & vm.opt.x.Xmaxf == null & vm.opt.MinHeapFreeRatio == null & vm.opt.MaxHeapFreeRatio == null\n+ * @requires vm.opt.MinHeapFreeRatio == null & vm.opt.MaxHeapFreeRatio == null\n","filename":"test\/hotspot\/jtreg\/gc\/arguments\/TestHeapFreeRatio.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -74,7 +74,7 @@\n-    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize }, values, -1, -1);\n-    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-XX:MinHeapSize=\" + smallValue }, values, smallValue, -1);\n-    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-XX:MinHeapSize=\" + largeValue }, values, largeValue, -1);\n-    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-XX:MinHeapSize=0\" }, values, -1, -1);\n-    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-XX:InitialHeapSize=\" + smallValue }, values, -1, smallValue);\n-    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-XX:InitialHeapSize=\" + largeValue }, values, -1, largeValue);\n-    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-XX:InitialHeapSize=0\" }, values, -1, -1);\n+    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize }, -1, -1);\n+    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-XX:MinHeapSize=\" + smallValue }, smallValue, -1);\n+    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-XX:MinHeapSize=\" + largeValue }, largeValue, -1);\n+    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-XX:MinHeapSize=0\" }, -1, -1);\n+    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-XX:InitialHeapSize=\" + smallValue }, -1, smallValue);\n+    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-XX:InitialHeapSize=\" + largeValue }, -1, largeValue);\n+    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-XX:InitialHeapSize=0\" }, -1, -1);\n@@ -82,3 +82,3 @@\n-    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-XX:MinHeapSize=\" + smallValue, \"-XX:InitialHeapSize=\" + smallValue }, values, smallValue, smallValue);\n-    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-XX:MinHeapSize=\" + smallValue, \"-XX:InitialHeapSize=\" + largeValue }, values, smallValue, largeValue);\n-    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-XX:MinHeapSize=\" + largeValue, \"-XX:InitialHeapSize=\" + largeValue }, values, largeValue, largeValue);\n+    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-XX:MinHeapSize=\" + smallValue, \"-XX:InitialHeapSize=\" + smallValue }, smallValue, smallValue);\n+    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-XX:MinHeapSize=\" + smallValue, \"-XX:InitialHeapSize=\" + largeValue }, smallValue, largeValue);\n+    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-XX:MinHeapSize=\" + largeValue, \"-XX:InitialHeapSize=\" + largeValue }, largeValue, largeValue);\n@@ -87,10 +87,10 @@\n-    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-Xms0\" }, values, -1, -1);\n-    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-Xms0\", \"-XX:MinHeapSize=\" + smallValue }, values, smallValue, -1);\n-    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-Xms0\", \"-XX:MinHeapSize=\" + largeValue }, values, largeValue, -1);\n-    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-Xms0\", \"-XX:MinHeapSize=0\" }, values, -1, -1);\n-    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-Xms0\", \"-XX:InitialHeapSize=\" + smallValue }, values, -1, smallValue);\n-    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-Xms0\", \"-XX:InitialHeapSize=\" + largeValue }, values, -1, largeValue);\n-    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-Xms0\", \"-XX:InitialHeapSize=0\" }, values, -1, -1);\n-    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-Xms0\", \"-XX:MinHeapSize=\" + smallValue, \"-XX:InitialHeapSize=\" + smallValue }, values, smallValue, smallValue);\n-    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-Xms0\", \"-XX:MinHeapSize=\" + smallValue, \"-XX:InitialHeapSize=\" + largeValue }, values, smallValue, largeValue);\n-    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-Xms0\", \"-XX:MinHeapSize=\" + largeValue, \"-XX:InitialHeapSize=\" + largeValue }, values, largeValue, largeValue);\n+    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-Xms0\" }, -1, -1);\n+    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-Xms0\", \"-XX:MinHeapSize=\" + smallValue }, smallValue, -1);\n+    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-Xms0\", \"-XX:MinHeapSize=\" + largeValue }, largeValue, -1);\n+    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-Xms0\", \"-XX:MinHeapSize=0\" }, -1, -1);\n+    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-Xms0\", \"-XX:InitialHeapSize=\" + smallValue }, -1, smallValue);\n+    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-Xms0\", \"-XX:InitialHeapSize=\" + largeValue }, -1, largeValue);\n+    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-Xms0\", \"-XX:InitialHeapSize=0\" }, -1, -1);\n+    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-Xms0\", \"-XX:MinHeapSize=\" + smallValue, \"-XX:InitialHeapSize=\" + smallValue }, smallValue, smallValue);\n+    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-Xms0\", \"-XX:MinHeapSize=\" + smallValue, \"-XX:InitialHeapSize=\" + largeValue }, smallValue, largeValue);\n+    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-Xms0\", \"-XX:MinHeapSize=\" + largeValue, \"-XX:InitialHeapSize=\" + largeValue }, largeValue, largeValue);\n@@ -99,6 +99,6 @@\n-    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-Xms\" + smallValue }, values, -1, -1);\n-    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-Xms\" + smallValue, \"-XX:MinHeapSize=\" + smallValue }, values, smallValue, smallValue);\n-    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-Xms\" + smallValue, \"-XX:MinHeapSize=0\" }, values, -1, smallValue);\n-    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-Xms\" + smallValue, \"-XX:InitialHeapSize=\" + smallValue }, values, smallValue, smallValue);\n-    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-Xms\" + smallValue, \"-XX:InitialHeapSize=\" + largeValue }, values, smallValue, largeValue);\n-    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-Xms\" + smallValue, \"-XX:InitialHeapSize=0\" }, values, smallValue, -1);\n+    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-Xms\" + smallValue }, -1, -1);\n+    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-Xms\" + smallValue, \"-XX:MinHeapSize=\" + smallValue }, smallValue, smallValue);\n+    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-Xms\" + smallValue, \"-XX:MinHeapSize=0\" }, -1, smallValue);\n+    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-Xms\" + smallValue, \"-XX:InitialHeapSize=\" + smallValue }, smallValue, smallValue);\n+    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-Xms\" + smallValue, \"-XX:InitialHeapSize=\" + largeValue }, smallValue, largeValue);\n+    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-Xms\" + smallValue, \"-XX:InitialHeapSize=0\" }, smallValue, -1);\n@@ -107,3 +107,3 @@\n-    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-Xms\" + largeValue }, values, largeValue, largeValue);\n-    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-Xms\" + largeValue, \"-XX:InitialHeapSize=0\" }, values, largeValue, -1);\n-    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-Xms\" + largeValue, \"-XX:MinHeapSize=0\" }, values, -1, largeValue);\n+    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-Xms\" + largeValue }, largeValue, largeValue);\n+    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-Xms\" + largeValue, \"-XX:InitialHeapSize=0\" }, largeValue, -1);\n+    checkErgonomics(new String[] { gcflag, \"-Xmx\" + maxHeapSize, \"-Xms\" + largeValue, \"-XX:MinHeapSize=0\" }, -1, largeValue);\n@@ -247,1 +247,1 @@\n-  public static void checkErgonomics(String[] args, long[] newoldsize,\n+  public static void checkErgonomics(String[] args,\n","filename":"test\/hotspot\/jtreg\/gc\/arguments\/TestMaxHeapSizeTools.java","additions":30,"deletions":30,"binary":false,"changes":60,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,1 +32,1 @@\n- * @requires vm.gc.Serial & vm.opt.MaxNewSize == null & vm.opt.NewRatio == null & vm.opt.NewSize == null & vm.opt.OldSize == null & vm.opt.x.Xms == null & vm.opt.x.Xmx == null\n+ * @requires vm.gc.Serial & vm.opt.MaxNewSize == null & vm.opt.NewRatio == null & vm.opt.NewSize == null & vm.opt.OldSize == null\n@@ -47,1 +47,1 @@\n- * @requires vm.gc.Parallel & vm.opt.MaxNewSize == null & vm.opt.NewRatio == null & vm.opt.NewSize == null & vm.opt.OldSize == null & vm.opt.x.Xms == null & vm.opt.x.Xmx == null\n+ * @requires vm.gc.Parallel & vm.opt.MaxNewSize == null & vm.opt.NewRatio == null & vm.opt.NewSize == null & vm.opt.OldSize == null\n@@ -62,1 +62,1 @@\n- * @requires vm.gc.G1 & vm.opt.MaxNewSize == null & vm.opt.NewRatio == null & vm.opt.NewSize == null & vm.opt.OldSize == null & vm.opt.x.Xms == null & vm.opt.x.Xmx == null\n+ * @requires vm.gc.G1 & vm.opt.MaxNewSize == null & vm.opt.NewRatio == null & vm.opt.NewSize == null & vm.opt.OldSize == null\n","filename":"test\/hotspot\/jtreg\/gc\/arguments\/TestMaxNewSize.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,1 +32,1 @@\n- * @requires vm.gc.Parallel & vm.opt.x.Xmx == null & vm.opt.x.Xms == null & vm.opt.MinHeapSize == null & vm.opt.MaxHeapSize == null & vm.opt.InitialHeapSize == null\n+ * @requires vm.gc.Parallel & vm.opt.MinHeapSize == null & vm.opt.MaxHeapSize == null & vm.opt.InitialHeapSize == null\n","filename":"test\/hotspot\/jtreg\/gc\/arguments\/TestParallelHeapSizeFlags.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,1 +31,1 @@\n- * @requires vm.gc.Serial & vm.opt.x.Xmx == null & vm.opt.x.Xms == null & vm.opt.MinHeapSize == null & vm.opt.MaxHeapSize == null & vm.opt.InitialHeapSize == null\n+ * @requires vm.gc.Serial & vm.opt.MinHeapSize == null & vm.opt.MaxHeapSize == null & vm.opt.InitialHeapSize == null\n","filename":"test\/hotspot\/jtreg\/gc\/arguments\/TestSerialHeapSizeFlags.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -34,1 +34,1 @@\n- * @run main\/othervm -Xmx1g -Xms1g -XX:+UseParallelGC -XX:+AlwaysPreTouch gc.parallel.TestAlwaysPreTouchBehavior\n+ * @run main\/othervm -Xmx1g -Xms1g -XX:+UseParallelGC -XX:+AlwaysPreTouch -XX:+UnlockDiagnosticVMOptions -XX:-UseMadvPopulateWrite gc.parallel.TestAlwaysPreTouchBehavior\n@@ -80,1 +80,0 @@\n-\n","filename":"test\/hotspot\/jtreg\/gc\/parallel\/TestAlwaysPreTouchBehavior.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,0 +34,2 @@\n+import java.util.stream.Collectors;\n+\n@@ -88,0 +90,26 @@\n+    \/**\n+     * Get system load.\n+     *\n+     * <dl>\n+     *   <dt>load() ~=   1 <\/dt><dd> fully loaded system, all cores are used 100%<\/dd>\n+     *   <dt>load() &lt; 1 <\/dt><dd> some cpu resources are available<\/dd>\n+     *   <dt>load() &gt; 1 <\/dt><dd> system is overloaded<\/dd>\n+     * <\/dl>\n+     *\n+     * @return the load of the system or Optional.empty() if the load can not be determined.\n+     *\/\n+    private static Optional<Double> systemLoad() {\n+        OperatingSystemMXBean bean = ManagementFactory.getPlatformMXBean(OperatingSystemMXBean.class);\n+        double average = bean.getSystemLoadAverage() \/ bean.getAvailableProcessors();\n+        return (average < 0)\n+            ? Optional.empty()\n+            : Optional.of(average);\n+    }\n+\n+    private static String minMax(List<Optional<Double>> l) {\n+        DoubleSummaryStatistics minmax = l.stream().flatMap(Optional::stream).collect(Collectors.summarizingDouble(d -> d));\n+        return minmax.getCount() != 0\n+            ? \"min: \" + minmax.getMin() + \", max: \" + minmax.getMax()\n+            : \"could not gather load statistics from system\";\n+    }\n+\n@@ -182,1 +210,1 @@\n-    private static boolean waitForDeduplication(String s1, String s2) {\n+    private static void waitForDeduplication(String s1, String s2) {\n@@ -186,0 +214,1 @@\n+        List<Optional<Double>> loadHistory = new ArrayList<>();\n@@ -187,0 +216,1 @@\n+            loadHistory.add(systemLoad());\n@@ -188,1 +218,1 @@\n-                return true;\n+                return;\n@@ -197,1 +227,1 @@\n-                throw new RuntimeException(e);\n+                throw new RuntimeException(\"Deduplication has not occurred: Thread.sleep() threw\", e);\n@@ -200,1 +230,1 @@\n-        return false;\n+        throw new RuntimeException(\"Deduplication has not occurred, load history: \" + minMax(loadHistory));\n@@ -243,0 +273,1 @@\n+        List<Optional<Double>> loadHistory = new ArrayList<>();\n@@ -244,0 +275,1 @@\n+            loadHistory.add(systemLoad());\n@@ -280,1 +312,1 @@\n-            throw new RuntimeException(\"String verification failed\");\n+            throw new RuntimeException(\"String verification failed, load history: \" + minMax(loadHistory));\n@@ -364,3 +396,1 @@\n-            if (!waitForDeduplication(dupString1, baseString)) {\n-                throw new RuntimeException(\"Deduplication has not occurred\");\n-            }\n+            waitForDeduplication(dupString1, baseString);\n@@ -401,3 +431,1 @@\n-            if (!waitForDeduplication(dupString3, internedString)) {\n-                throw new RuntimeException(\"Deduplication has not occurred for string 3\");\n-            }\n+            waitForDeduplication(dupString3, internedString);\n","filename":"test\/hotspot\/jtreg\/gc\/stringdedup\/TestStringDeduplicationTools.java","additions":40,"deletions":12,"binary":false,"changes":52,"status":"modified"},{"patch":"@@ -91,1 +91,1 @@\n-     * @throws IOException if cannot write file to specified directory\n+     * @throws Exception if cannot write file to specified directory\n","filename":"test\/hotspot\/jtreg\/gc\/testlibrary\/Helpers.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -31,0 +31,1 @@\n+ * @requires vm.compMode != \"Xcomp\"\n","filename":"test\/hotspot\/jtreg\/gc\/x\/TestGarbageCollectorMXBean.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -31,0 +31,1 @@\n+ * @requires vm.compMode != \"Xcomp\"\n","filename":"test\/hotspot\/jtreg\/gc\/z\/TestGarbageCollectorMXBean.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -30,0 +30,1 @@\n+import java.util.Collections;\n@@ -92,2 +93,2 @@\n-\n-            ProcessBuilder pb = ProcessTools.createLimitedTestJavaProcessBuilder(\n+            ArrayList<String> vmArgs = new ArrayList<>();\n+            Collections.addAll(vmArgs,\n@@ -97,3 +98,6 @@\n-                    \"-XX:NativeMemoryTracking=summary\", \"-XX:+PrintNMTStatistics\",\n-                    \"TestAlwaysPreTouchStacks\",\n-                    \"test\");\n+                    \"-XX:NativeMemoryTracking=summary\", \"-XX:+PrintNMTStatistics\");\n+            if (System.getProperty(\"os.name\").contains(\"Linux\")) {\n+                vmArgs.add(\"-XX:-UseMadvPopulateWrite\");\n+            }\n+            Collections.addAll(vmArgs, \"TestAlwaysPreTouchStacks\", \"test\");\n+            ProcessBuilder pb = ProcessTools.createLimitedTestJavaProcessBuilder(vmArgs);\n","filename":"test\/hotspot\/jtreg\/runtime\/Thread\/TestAlwaysPreTouchStacks.java","additions":9,"deletions":5,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, Oracle and\/or its affiliates. All rights reserved.\n@@ -63,2 +63,1 @@\n-    \/\/ final static String IN_OBJECT_WAIT = \"in Object.wait()\";\n-    final static String IN_CONVAR_WAIT = \"waiting on condition\";\n+    final static String IN_OBJECT_WAIT = \"in Object.wait()\";\n@@ -143,1 +142,1 @@\n-                    if (!line.contains(IN_CONVAR_WAIT)) {\n+                    if (!line.contains(IN_OBJECT_WAIT)) {\n","filename":"test\/hotspot\/jtreg\/runtime\/Thread\/TestThreadDumpClassInitMonitor.java","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -34,3 +34,3 @@\n- import jdk.test.lib.cds.CDSTestUtils;\n- import jdk.test.lib.process.OutputAnalyzer;\n- import jdk.test.lib.process.ProcessTools;\n+import jdk.test.lib.cds.CDSTestUtils;\n+import jdk.test.lib.process.OutputAnalyzer;\n+import jdk.test.lib.process.ProcessTools;\n@@ -38,1 +38,1 @@\n- public class TestCDSVMCrash {\n+public class TestCDSVMCrash {\n@@ -40,17 +40,18 @@\n-     public static void main(String[] args) throws Exception {\n-         if (args.length == 1) {\n-             \/\/ This should guarantee to throw:\n-             \/\/ java.lang.OutOfMemoryError: Requested array size exceeds VM limit\n-             try {\n-                 Object[] oa = new Object[Integer.MAX_VALUE];\n-                 throw new Error(\"OOME not triggered\");\n-             } catch (OutOfMemoryError err) {\n-                 throw new Error(\"OOME didn't abort JVM!\");\n-             }\n-         }\n-         \/\/ else this is the main test\n-         ProcessBuilder pb = ProcessTools.createLimitedTestJavaProcessBuilder(\"-XX:+CrashOnOutOfMemoryError\",\n-                  \"-XX:-CreateCoredumpOnCrash\", \"-Xmx128m\", \"-Xshare:on\", TestCDSVMCrash.class.getName(),\"throwOOME\");\n-         OutputAnalyzer output = new OutputAnalyzer(pb.start());\n-         \/\/ executeAndLog should throw an exception in the VM crashed\n-         try {\n+    public static void main(String[] args) throws Exception {\n+        if (args.length == 1) {\n+            \/\/ This should guarantee to throw:\n+            \/\/ java.lang.OutOfMemoryError: Requested array size exceeds VM limit\n+            try {\n+                Object[] oa = new Object[Integer.MAX_VALUE];\n+                throw new Error(\"OOME not triggered\");\n+            } catch (OutOfMemoryError err) {\n+                throw new Error(\"OOME didn't abort JVM!\");\n+            }\n+        }\n+        \/\/ else this is the main test\n+        ProcessBuilder pb = ProcessTools.createLimitedTestJavaProcessBuilder(\"-XX:+CrashOnOutOfMemoryError\",\n+                                                                             \"-XX:-CreateCoredumpOnCrash\", \"-Xmx128m\",\n+                                                                             \"-Xshare:on\", TestCDSVMCrash.class.getName(),\n+                                                                             \"throwOOME\");\n+        \/\/ executeAndLog should throw an exception in the VM crashed\n+        try {\n@@ -59,1 +60,1 @@\n-         } catch(RuntimeException e) {\n+        } catch(RuntimeException e) {\n@@ -61,1 +62,1 @@\n-              throw new Error(\"Expected message: Hotspot crashed\");\n+                throw new Error(\"Expected message: Hotspot crashed\");\n@@ -63,7 +64,1 @@\n-         }\n-         int exitValue = output.getExitValue();\n-         if (0 == exitValue) {\n-             \/\/expecting a non zero value\n-             throw new Error(\"Expected to get non zero exit value\");\n-         }\n-        output.shouldContain(\"A fatal error has been detected by the Java Runtime Environment\");\n+        }\n@@ -71,2 +66,2 @@\n-     }\n- }\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/TestCDSVMCrash.java","additions":27,"deletions":32,"binary":false,"changes":59,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -118,2 +118,3 @@\n-                                       \"|(GC triggered before VM initialization completed)\" +\n-                                       \"|(java.lang.OutOfMemoryError: Java heap space))\";\n+                                     \"|(GC triggered before VM initialization completed)\" +\n+                                     \"|(java.lang.OutOfMemoryError: Java heap space)\" +\n+                                     \"|(Initial heap size set to a larger value than the maximum heap size))\";\n@@ -121,0 +122,1 @@\n+                    out.shouldNotHaveFatalError();\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/TestParallelGCWithCDS.java","additions":5,"deletions":3,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,1 +29,1 @@\n- * @requires vm.cds.write.archived.java.heap\n+ * @requires vm.debug == true & vm.cds.write.archived.java.heap\n@@ -64,5 +64,1 @@\n-        if (Platform.isDebugBuild()) {\n-            testDebugBuild();\n-        } else {\n-            testProductBuild();\n-        }\n+        testDebugBuild();\n@@ -172,7 +168,0 @@\n-\n-    static void testProductBuild() throws Exception {\n-        OutputAnalyzer output;\n-\n-        output = dumpHelloOnly(\"-XX:-IgnoreUnrecognizedVMOptions\", \"-XX:ArchiveHeapTestClass=NoSuchClass\");\n-        mustFail(output, \"VM option 'ArchiveHeapTestClass' is develop and is available only in debug version of VM.\");\n-    }\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/cacheObject\/ArchiveHeapTestClass.java","additions":3,"deletions":14,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -30,0 +30,1 @@\n+ * @requires !vm.jvmci.enabled\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/serviceability\/ReplaceCriticalClassesForSubgraphs.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -0,0 +1,95 @@\n+\/*\n+ * Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import jdk.test.lib.process.OutputAnalyzer;\n+import jdk.test.lib.process.ProcessTools;\n+\n+import java.io.IOException;\n+import java.util.regex.Matcher;\n+import java.util.regex.Pattern;\n+\n+\/*\n+ * @test\n+ * @summary Tests that recursive locking doesn't cause excessive native memory usage\n+ * @library \/test\/lib\n+ * @run driver TestRecursiveMonitorChurn\n+ *\/\n+public class TestRecursiveMonitorChurn {\n+    static class Monitor {\n+        public static volatile int i, j;\n+        synchronized void doSomething() {\n+            i++;\n+            doSomethingElse();\n+        }\n+        synchronized void doSomethingElse() {\n+            j++;\n+        }\n+    }\n+\n+    public static volatile Monitor monitor;\n+    public static void main(String[] args) throws IOException {\n+        if (args.length == 1 && args[0].equals(\"test\")) {\n+            \/\/ The actual test, in a forked JVM.\n+            for (int i = 0; i < 100000; i++) {\n+                monitor = new Monitor();\n+                monitor.doSomething();\n+            }\n+            System.out.println(\"i + j = \" + (Monitor.i + Monitor.j));\n+        } else {\n+            ProcessBuilder pb = ProcessTools.createTestJavaProcessBuilder(\n+                    \"-XX:+UnlockDiagnosticVMOptions\",\n+                    \"-Xmx100M\", \"-XX:AsyncDeflationInterval=0\", \"-XX:GuaranteedAsyncDeflationInterval=0\",\n+                    \"-XX:NativeMemoryTracking=summary\", \"-XX:+PrintNMTStatistics\",\n+                    \"TestRecursiveMonitorChurn\",\n+                    \"test\");\n+            OutputAnalyzer output = new OutputAnalyzer(pb.start());\n+            output.reportDiagnosticSummary();\n+\n+            output.shouldHaveExitValue(0);\n+\n+            \/\/ We want to see, in the final NMT printout, a committed object monitor size that is reasonably low.\n+            \/\/ Like this:\n+            \/\/ -           Object Monitors (reserved=208, committed=208)\n+            \/\/                             (malloc=208 #1) (at peak)\n+            \/\/\n+            \/\/ Without recursive locking support, this would look more like this:\n+            \/\/ -           Object Monitors (reserved=20800624, committed=20800624)\n+            \/\/                             (malloc=20800624 #100003) (at peak)\n+\n+            Pattern pat = Pattern.compile(\"- *Object Monitors.*reserved=(\\\\d+), committed=(\\\\d+).*\");\n+            for (String line : output.asLines()) {\n+                Matcher m = pat.matcher(line);\n+                if (m.matches()) {\n+                    long reserved = Long.parseLong(m.group(1));\n+                    long committed = Long.parseLong(m.group(2));\n+                    System.out.println(\">>>>> \" + line + \": \" + reserved + \" - \" + committed);\n+                    if (committed > 1000) {\n+                        throw new RuntimeException(\"Allocated too many monitors\");\n+                    }\n+                    return;\n+                }\n+            }\n+            throw new RuntimeException(\"Did not find expected NMT output\");\n+        }\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/runtime\/locking\/TestRecursiveMonitorChurn.java","additions":95,"deletions":0,"binary":false,"changes":95,"status":"added"},{"patch":"@@ -87,0 +87,14 @@\n+    \/\/ Returns the THP page size (if exposed by the kernel) or a guessed THP page size.\n+    \/\/ Mimics HugePages::thp_pagesize_fallback() method in hotspot (must be kept in sync with it).\n+    public long getThpPageSizeOrFallback() {\n+        long pageSize = getThpPageSize();\n+        if (pageSize != 0) {\n+            return pageSize;\n+        }\n+        pageSize = getStaticDefaultHugePageSize();\n+        if (pageSize != 0) {\n+            return Math.min(pageSize, 16 * 1024 * 1024);\n+        }\n+        return 2 * 1024 * 1024;\n+    }\n+\n","filename":"test\/hotspot\/jtreg\/runtime\/os\/HugePageConfiguration.java","additions":14,"deletions":0,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -128,1 +128,2 @@\n-            String thpPageSizeString = buildSizeString(configuration.getThpPageSize());\n+            long thpPageSize = configuration.getThpPageSizeOrFallback();\n+            String thpPageSizeString = buildSizeString(thpPageSize);\n","filename":"test\/hotspot\/jtreg\/runtime\/os\/TestHugePageDecisionsAtVMStartup.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -64,1 +64,1 @@\n-        public static void main(String args[]) {\n+        public static void main(String args[]) throws Exception {\n@@ -67,3 +67,2 @@\n-                \/\/ HotSpot implementation detail: asking for the hash code\n-                \/\/ when the object is locked causes monitor inflation.\n-                if (obj.hashCode() == 0xBAD) System.out.println(\"!\");\n+                \/\/ The current implementation of notify-wait requires inflation.\n+                obj.wait(1);\n","filename":"test\/hotspot\/jtreg\/runtime\/whitebox\/TestWBDeflateIdleMonitors.java","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -518,1 +518,3 @@\n-  memcpy(new_objects, storage->live_objects, current_count * sizeof(*new_objects));\n+  if (storage->live_objects != nullptr) {\n+    memcpy(new_objects, storage->live_objects, current_count * sizeof(*new_objects));\n+  }\n","filename":"test\/hotspot\/jtreg\/serviceability\/jvmti\/HeapMonitor\/libHeapMonitorTest.cpp","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -41,0 +41,1 @@\n+import java.util.Random;\n@@ -269,1 +270,1 @@\n-        var rng = Utils.getRandomInstance();\n+        Random rng = Utils.getRandomInstance();\n@@ -305,1 +306,1 @@\n-                \"-XX:StressSeed=\" + Math.abs(rng.nextInt())));\n+                \"-XX:StressSeed=\" + rng.nextInt(Integer.MAX_VALUE)));\n","filename":"test\/hotspot\/jtreg\/testlibrary\/ctw\/src\/sun\/hotspot\/tools\/ctw\/CtwRunner.java","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -1,23 +0,0 @@\n-#\n-# Copyright (c) 2017, 2018, Oracle and\/or its affiliates. All rights reserved.\n-# DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n-#\n-# This code is free software; you can redistribute it and\/or modify it\n-# under the terms of the GNU General Public License version 2 only, as\n-# published by the Free Software Foundation.\n-#\n-# This code is distributed in the hope that it will be useful, but WITHOUT\n-# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n-# FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n-# version 2 for more details (a copy is included in the LICENSE file that\n-# accompanied this code).\n-#\n-# You should have received a copy of the GNU General Public License version\n-# 2 along with this work; if not, write to the Free Software Foundation,\n-# Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n-#\n-# Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n-# or visit www.oracle.com if you need additional information or have any\n-# questions.\n-#\n-exclusiveAccess.dirs=.\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/gc\/gctests\/LargeObjects\/large001\/TEST.properties","additions":0,"deletions":23,"binary":false,"changes":23,"status":"deleted"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2004, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2004, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -62,1 +62,1 @@\n- * @run main\/othervm\n+ * @run main\/othervm\/timeout=300\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/gc\/gctests\/LargeObjects\/large001\/large001.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1,23 +0,0 @@\n-#\n-# Copyright (c) 2017, 2018, Oracle and\/or its affiliates. All rights reserved.\n-# DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n-#\n-# This code is free software; you can redistribute it and\/or modify it\n-# under the terms of the GNU General Public License version 2 only, as\n-# published by the Free Software Foundation.\n-#\n-# This code is distributed in the hope that it will be useful, but WITHOUT\n-# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n-# FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n-# version 2 for more details (a copy is included in the LICENSE file that\n-# accompanied this code).\n-#\n-# You should have received a copy of the GNU General Public License version\n-# 2 along with this work; if not, write to the Free Software Foundation,\n-# Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n-#\n-# Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n-# or visit www.oracle.com if you need additional information or have any\n-# questions.\n-#\n-exclusiveAccess.dirs=.\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/gc\/gctests\/LargeObjects\/large002\/TEST.properties","additions":0,"deletions":23,"binary":false,"changes":23,"status":"deleted"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -63,1 +63,1 @@\n- * @run main\/othervm\n+ * @run main\/othervm\/timeout=300\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/gc\/gctests\/LargeObjects\/large002\/TestDescription.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1,23 +0,0 @@\n-#\n-# Copyright (c) 2017, 2018, Oracle and\/or its affiliates. All rights reserved.\n-# DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n-#\n-# This code is free software; you can redistribute it and\/or modify it\n-# under the terms of the GNU General Public License version 2 only, as\n-# published by the Free Software Foundation.\n-#\n-# This code is distributed in the hope that it will be useful, but WITHOUT\n-# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n-# FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n-# version 2 for more details (a copy is included in the LICENSE file that\n-# accompanied this code).\n-#\n-# You should have received a copy of the GNU General Public License version\n-# 2 along with this work; if not, write to the Free Software Foundation,\n-# Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n-#\n-# Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n-# or visit www.oracle.com if you need additional information or have any\n-# questions.\n-#\n-exclusiveAccess.dirs=.\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/gc\/gctests\/LargeObjects\/large003\/TEST.properties","additions":0,"deletions":23,"binary":false,"changes":23,"status":"deleted"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -67,1 +67,1 @@\n- * @run main\/othervm\n+ * @run main\/othervm\/timeout=300\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/gc\/gctests\/LargeObjects\/large003\/TestDescription.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1,23 +0,0 @@\n-#\n-# Copyright (c) 2017, 2018, Oracle and\/or its affiliates. All rights reserved.\n-# DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n-#\n-# This code is free software; you can redistribute it and\/or modify it\n-# under the terms of the GNU General Public License version 2 only, as\n-# published by the Free Software Foundation.\n-#\n-# This code is distributed in the hope that it will be useful, but WITHOUT\n-# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n-# FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n-# version 2 for more details (a copy is included in the LICENSE file that\n-# accompanied this code).\n-#\n-# You should have received a copy of the GNU General Public License version\n-# 2 along with this work; if not, write to the Free Software Foundation,\n-# Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n-#\n-# Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n-# or visit www.oracle.com if you need additional information or have any\n-# questions.\n-#\n-exclusiveAccess.dirs=.\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/gc\/gctests\/LargeObjects\/large004\/TEST.properties","additions":0,"deletions":23,"binary":false,"changes":23,"status":"deleted"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -67,1 +67,1 @@\n- * @run main\/othervm\n+ * @run main\/othervm\/timeout=300\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/gc\/gctests\/LargeObjects\/large004\/TestDescription.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1,23 +0,0 @@\n-#\n-# Copyright (c) 2017, 2018, Oracle and\/or its affiliates. All rights reserved.\n-# DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n-#\n-# This code is free software; you can redistribute it and\/or modify it\n-# under the terms of the GNU General Public License version 2 only, as\n-# published by the Free Software Foundation.\n-#\n-# This code is distributed in the hope that it will be useful, but WITHOUT\n-# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n-# FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n-# version 2 for more details (a copy is included in the LICENSE file that\n-# accompanied this code).\n-#\n-# You should have received a copy of the GNU General Public License version\n-# 2 along with this work; if not, write to the Free Software Foundation,\n-# Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n-#\n-# Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n-# or visit www.oracle.com if you need additional information or have any\n-# questions.\n-#\n-exclusiveAccess.dirs=.\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/gc\/gctests\/LargeObjects\/large005\/TEST.properties","additions":0,"deletions":23,"binary":false,"changes":23,"status":"deleted"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -67,1 +67,1 @@\n- * @run main\/othervm\n+ * @run main\/othervm\/timeout=300\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/gc\/gctests\/LargeObjects\/large005\/TestDescription.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -36,0 +36,1 @@\n+ * @requires vm.compMode != \"Xcomp\"\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/metaspace\/gc\/watermark_0_1\/TestDescription.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -36,0 +36,1 @@\n+ * @requires vm.compMode != \"Xcomp\"\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/metaspace\/gc\/watermark_10_20\/TestDescription.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -36,0 +36,1 @@\n+ * @requires vm.compMode != \"Xcomp\"\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/metaspace\/gc\/watermark_70_80\/TestDescription.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -36,0 +36,1 @@\n+ * @requires vm.compMode != \"Xcomp\"\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/metaspace\/gc\/watermark_99_100\/TestDescription.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,0 +27,9 @@\n+import java.io.InputStream;\n+import java.util.List;\n+import java.util.ArrayList;\n+\n+import jdk.internal.org.objectweb.asm.ClassReader;\n+import jdk.internal.org.objectweb.asm.ClassVisitor;\n+import jdk.internal.org.objectweb.asm.FieldVisitor;\n+import jdk.internal.org.objectweb.asm.Opcodes;\n+\n@@ -43,1 +52,1 @@\n-    native static void check(int i, Class cls);\n+    native static void check(Class cls, String[] expectedFields);\n@@ -55,11 +64,11 @@\n-            check(0, Class.forName(InnerClass1.class.getName()));\n-            check(1, Class.forName(InnerInterface.class.getName()));\n-            check(2, Class.forName(InnerClass2.class.getName()));\n-            check(3, Class.forName(OuterClass1.class.getName()));\n-            check(4, Class.forName(OuterClass2.class.getName()));\n-            check(5, Class.forName(OuterClass3.class.getName()));\n-            check(6, Class.forName(OuterInterface1.class.getName()));\n-            check(7, Class.forName(OuterInterface2.class.getName()));\n-            check(8, Class.forName(OuterClass4.class.getName()));\n-            check(9, Class.forName(OuterClass5.class.getName()));\n-        } catch (ClassNotFoundException e) {\n+            check(Class.forName(InnerClass1.class.getName()));\n+            check(Class.forName(InnerInterface.class.getName()));\n+            check(Class.forName(InnerClass2.class.getName()));\n+            check(Class.forName(OuterClass1.class.getName()));\n+            check(Class.forName(OuterClass2.class.getName()));\n+            check(Class.forName(OuterClass3.class.getName()));\n+            check(Class.forName(OuterInterface1.class.getName()));\n+            check(Class.forName(OuterInterface2.class.getName()));\n+            check(Class.forName(OuterClass4.class.getName()));\n+            check(Class.forName(OuterClass5.class.getName()));\n+        } catch (Exception e) {\n@@ -71,0 +80,42 @@\n+\n+    static void check(Class cls) throws Exception {\n+        FieldExplorer explorer = new FieldExplorer(cls);\n+        List<String> fields = explorer.get();\n+        check(cls, fields.toArray(new String[0]));\n+    }\n+\n+    \/\/ helper class to get list of the class fields\n+    \/\/ in the order they appear in the class file\n+    static class FieldExplorer extends ClassVisitor {\n+        private final Class cls;\n+        private List<String> fieldNameAndSig = new ArrayList<>();\n+        private FieldExplorer(Class cls) {\n+            super(Opcodes.ASM7);\n+            this.cls = cls;\n+        }\n+\n+        @Override\n+        public FieldVisitor visitField(int access, String name, String descriptor, String signature, Object value) {\n+            System.out.println(\"  field '\" + name + \"', type = \" + descriptor);\n+            fieldNameAndSig.add(name);\n+            fieldNameAndSig.add(descriptor);\n+            return super.visitField(access, name, descriptor, signature, value);\n+        }\n+\n+        private InputStream getClassBytes() throws Exception {\n+            String clsName = cls.getName();\n+            String clsPath = clsName.replace('.', '\/') + \".class\";\n+            return cls.getClassLoader().getResourceAsStream(clsPath);\n+        }\n+\n+        \/\/ each field is represented by 2 Strings in the list: name and type descriptor\n+        public List<String> get() throws Exception {\n+            System.out.println(\"Class \" + cls.getName());\n+            try (InputStream classBytes = getClassBytes()) {\n+                ClassReader classReader = new ClassReader(classBytes);\n+                classReader.accept(this, 0);\n+            }\n+            return fieldNameAndSig;\n+        }\n+    }\n+\n@@ -122,0 +173,1 @@\n+\/\/ class with multiple fields to verify correctness of the field order\n@@ -124,0 +176,4 @@\n+    String fld_s1 = \"str\";\n+    int fld_i2 = 2;\n+    String fld_s2 = \"str2\";\n+\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/GetClassFields\/getclfld007.java","additions":69,"deletions":13,"binary":false,"changes":82,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,3 +34,3 @@\n- *     The test checks if the function returns the expected list of fields.\n- *     That is the field list contains only directly declared (not inherited)\n- *     fields.\n+ *     The test checks if the function returns the expected list of fields:\n+ *         - the list contains only directly declared (not inherited) fields;\n+ *         - fields are returned in the order they occur in the class file.\n@@ -48,0 +48,1 @@\n+ * @modules java.base\/jdk.internal.org.objectweb.asm\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/GetClassFields\/getclfld007\/TestDescription.java","additions":5,"deletions":4,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -36,11 +36,0 @@\n-typedef struct {\n-    const char *name;\n-    const char *sig;\n-} fld_info;\n-\n-typedef struct {\n-    const char *name;\n-    jint fcount;\n-    fld_info *flds;\n-} class_info;\n-\n@@ -49,50 +38,17 @@\n-static jboolean printdump = JNI_FALSE;\n-\n-static fld_info f0[] = {\n-    { \"fld_1\", \"Ljava\/lang\/String;\" }\n-};\n-\n-static fld_info f1[] = {\n-    { \"fld_n1\", \"I\" }\n-};\n-\n-static fld_info f2[] = {\n-    { \"fld_n2\", \"I\" }\n-};\n-\n-static fld_info f4[] = {\n-    { \"fld_o2\", \"I\" }\n-};\n-\n-static fld_info f5[] = {\n-    { \"fld_o3\", \"I\" }\n-};\n-\n-static fld_info f6[] = {\n-    { \"fld_i1\", \"I\" }\n-};\n-\n-static fld_info f7[] = {\n-    { \"fld_i2\", \"I\" }\n-};\n-\n-static fld_info f8[] = {\n-    { \"fld_i2\", \"I\" }\n-};\n-\n-static fld_info f9[] = {\n-    { \"fld_i1\", \"I\" }\n-};\n-\n-static class_info classes[] = {\n-    { \"InnerClass1\", 1, f0 },\n-    { \"InnerInterface\", 1, f1 },\n-    { \"InnerClass2\", 1, f2 },\n-    { \"OuterClass1\", 0, NULL },\n-    { \"OuterClass2\", 1, f4 },\n-    { \"OuterClass3\", 1, f5 },\n-    { \"OuterInterface1\", 1, f6 },\n-    { \"OuterInterface2\", 1, f7 },\n-    { \"OuterClass4\", 1, f8 },\n-    { \"OuterClass5\", 1, f9 }\n-};\n+\n+\n+\/\/ compares 'value' with jobject_arr[index]\n+static bool equals_str(JNIEnv *env, const char *value, jobjectArray jobject_arr, jint index) {\n+    jstring jstr = (jstring)env->GetObjectArrayElement(jobject_arr, index);\n+    const char* utf = env->GetStringUTFChars(jstr, NULL);\n+    bool res = false;\n+    if (utf != NULL) {\n+        res = strcmp(value, utf) == 0;\n+        env->ReleaseStringUTFChars(jstr, utf);\n+    } else {\n+        printf(\"GetStringUTFChars failed\\n\");\n+        result = STATUS_FAILED;\n+    }\n+    env->DeleteLocalRef(jstr);\n+    return res;\n+}\n@@ -114,4 +70,0 @@\n-    if (options != NULL && strcmp(options, \"printdump\") == 0) {\n-        printdump = JNI_TRUE;\n-    }\n-\n@@ -128,1 +80,1 @@\n-Java_nsk_jvmti_GetClassFields_getclfld007_check(JNIEnv *env, jclass cls, jint i, jclass clazz) {\n+Java_nsk_jvmti_GetClassFields_getclfld007_check(JNIEnv *env, jclass cls, jclass clazz, jobjectArray fieldArr) {\n@@ -132,1 +84,1 @@\n-    char *name, *sig, *generic;\n+    char *name, *sig;\n@@ -137,0 +89,1 @@\n+        fflush(0);\n@@ -141,3 +94,2 @@\n-    if (printdump == JNI_TRUE) {\n-        printf(\">>> %s:\\n\", classes[i].name);\n-    }\n+    \/\/ fieldArr contains 2 elements for each field\n+    jint field_count = env->GetArrayLength(fieldArr) \/ 2;\n@@ -147,2 +99,3 @@\n-        printf(\"(GetClassFields#%d) unexpected error: %s (%d)\\n\",\n-               i, TranslateError(err), err);\n+        printf(\"GetClassFields unexpected error: %s (%d)\\n\",\n+               TranslateError(err), err);\n+        fflush(0);\n@@ -153,3 +106,3 @@\n-    if (fcount != classes[i].fcount) {\n-        printf(\"(%d) wrong number of fields: %d, expected: %d\\n\",\n-               i, fcount, classes[i].fcount);\n+    if (fcount != field_count) {\n+        printf(\"wrong number of fields: %d, expected: %d\\n\",\n+               fcount, field_count);\n@@ -160,21 +113,18 @@\n-            printf(\"(%d:%d) fieldID = null\\n\", i, j);\n-        } else {\n-            err = jvmti->GetFieldName(clazz, fields[j],\n-                &name, &sig, &generic);\n-            if (err != JVMTI_ERROR_NONE) {\n-                printf(\"(GetFieldName#%d:%d) unexpected error: %s (%d)\\n\",\n-                       i, j, TranslateError(err), err);\n-            } else {\n-                if (printdump == JNI_TRUE) {\n-                    printf(\">>>   [%d]: %s, sig = \\\"%s\\\"\\n\", j, name, sig);\n-                }\n-                if ((j < classes[i].fcount) &&\n-                       (name == NULL || sig == NULL ||\n-                        strcmp(name, classes[i].flds[j].name) != 0 ||\n-                        strcmp(sig, classes[i].flds[j].sig) != 0)) {\n-                    printf(\"(%d:%d) wrong field: \\\"%s%s\\\"\", i, j, name, sig);\n-                    printf(\", expected: \\\"%s%s\\\"\\n\",\n-                           classes[i].flds[j].name, classes[i].flds[j].sig);\n-                    result = STATUS_FAILED;\n-                }\n-            }\n+            printf(\"(%d) fieldID = null\\n\", j);\n+            result = STATUS_FAILED;\n+            continue;\n+        }\n+        err = jvmti->GetFieldName(clazz, fields[j], &name, &sig, NULL);\n+        if (err != JVMTI_ERROR_NONE) {\n+            printf(\"(GetFieldName#%d) unexpected error: %s (%d)\\n\",\n+                   j, TranslateError(err), err);\n+            result = STATUS_FAILED;\n+            continue;\n+        }\n+        printf(\">>>   [%d]: %s, sig = \\\"%s\\\"\\n\", j, name, sig);\n+        if ((j < field_count) &&\n+               (name == NULL || sig == NULL ||\n+                !equals_str(env, name, fieldArr, j * 2) ||\n+                !equals_str(env, sig, fieldArr, j * 2 + 1))) {\n+            printf(\"(%d) wrong field: \\\"%s%s\\\"\", j, name, sig);\n+            result = STATUS_FAILED;\n@@ -182,0 +132,2 @@\n+        jvmti->Deallocate((unsigned char *)name);\n+        jvmti->Deallocate((unsigned char *)sig);\n@@ -183,0 +135,1 @@\n+    fflush(0);\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/GetClassFields\/getclfld007\/getclfld007.cpp","additions":50,"deletions":97,"binary":false,"changes":147,"status":"modified"},{"patch":"@@ -2,1 +2,0 @@\n-s\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/unit\/functions\/rawmonitor\/rawmonitor.cpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -1,31 +0,0 @@\n-\/*\n- * Copyright (c) 2006, 2018, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-package nsk.share;\n-\n-public class NativeUtils {\n-    static {\n-        System.loadLibrary(\"native_utils\");\n-    }\n-\n-    public static native long getCurrentPID();\n-}\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/share\/NativeUtils.java","additions":0,"deletions":31,"binary":false,"changes":31,"status":"deleted"},{"patch":"@@ -149,1 +149,3 @@\n-        strncpy(value, val, val_len);\n+        if (val != nullptr) {\n+            strncpy(value, val, val_len);\n+        }\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/share\/jvmti\/jvmti_tools.cpp","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1,43 +0,0 @@\n-\/*\n- * Copyright (c) 2006, 2018, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-#include <stdio.h>\n-\n-#if (defined(WIN32) || defined (_WIN32))\n-#include <process.h>\n-#define getpid _getpid\n-#define pidType int\n-#else\n-#include <unistd.h>\n-#define pidType pid_t\n-#endif\n-\n-#include <sys\/types.h>\n-#include <jni.h>\n-\n-extern \"C\" {\n-\n-JNIEXPORT jlong\n-JNICALL Java_nsk_share_NativeUtils_getCurrentPID(JNIEnv * jni, jobject  jobj) {\n-        return (jlong) getpid();\n-}\n-}\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/share\/native\/native_utils.cpp","additions":0,"deletions":43,"binary":false,"changes":43,"status":"deleted"},{"patch":"@@ -1,24 +0,0 @@\n-#\n-# Copyright (c) 2018, Oracle and\/or its affiliates. All rights reserved.\n-# DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n-#\n-# This code is free software; you can redistribute it and\/or modify it\n-# under the terms of the GNU General Public License version 2 only, as\n-# published by the Free Software Foundation.\n-#\n-# This code is distributed in the hope that it will be useful, but WITHOUT\n-# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n-# FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n-# version 2 for more details (a copy is included in the LICENSE file that\n-# accompanied this code).\n-#\n-# You should have received a copy of the GNU General Public License version\n-# 2 along with this work; if not, write to the Free Software Foundation,\n-# Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n-#\n-# Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n-# or visit www.oracle.com if you need additional information or have any\n-# questions.\n-#\n-\n-exclusiveAccess.dirs=.\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/stress\/stack\/TEST.properties","additions":0,"deletions":24,"binary":false,"changes":24,"status":"deleted"},{"patch":"@@ -32,3 +32,0 @@\n-com\/sun\/jdi\/cds\/CDSBreakpointTest.java 8307778 generic-all\n-com\/sun\/jdi\/cds\/CDSDeleteAllBkptsTest.java 8307778 generic-all\n-com\/sun\/jdi\/cds\/CDSFieldWatchpoints.java 8307778 generic-all\n","filename":"test\/jdk\/ProblemList-Virtual.txt","additions":0,"deletions":3,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -458,0 +458,1 @@\n+java\/awt\/KeyboardFocusmanager\/ConsumeNextMnemonicKeyTypedTest\/ConsumeNextMnemonicKeyTypedTest.java 8321303 linux-all\n@@ -483,1 +484,0 @@\n-java\/lang\/ProcessHandle\/InfoTest.java                           8211847 aix-ppc64\n@@ -551,2 +551,0 @@\n-java\/net\/ServerSocket\/AcceptInheritHandle.java                  8211854 aix-ppc64\n-\n@@ -569,0 +567,1 @@\n+java\/nio\/file\/Files\/probeContentType\/Basic.java                 8320943 windows-all\n@@ -621,0 +620,2 @@\n+security\/infra\/java\/security\/cert\/CertPathValidator\/certification\/CAInterop.java#teliasonerarootcav1  8333640 generic-all\n+\n@@ -646,0 +647,1 @@\n+javax\/swing\/JFrame\/MaximizeWindowTest.java 8321289 linux-all\n@@ -656,0 +658,1 @@\n+javax\/swing\/JFileChooser\/8194044\/FileSystemRootTest.java 8327236 windows-all\n@@ -672,1 +675,0 @@\n-java\/awt\/Focus\/NonFocusableWindowTest\/NonfocusableOwnerTest.java 8280392 windows-x64\n@@ -693,0 +695,1 @@\n+javax\/swing\/JMenuItem\/ActionListenerCalledTwice\/ActionListenerCalledTwiceTest.java 8316151 macosx-all\n@@ -794,1 +797,1 @@\n-java\/awt\/font\/TextLayout\/TestJustification.html 8250791 macosx-all\n+java\/awt\/font\/TextLayout\/TestJustification.java 8250791 macosx-all\n","filename":"test\/jdk\/ProblemList.txt","additions":8,"deletions":5,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -12,4 +12,27 @@\n-# A \"headful\" test requires a graphical environment to meaningfully\n-# run. Tests that are not headful are \"headless\".\n-# A test flagged with key sound needs audio devices on the system, this\n-# may be accompanied by the headful keyword since audio device access\n+# A test flagged with cgroups uses cgroups.\n+#\n+# Notes on \"client\" keywords : headful sound printer multimon \n+# ===========================================================\n+#\n+# These keywords are there to help with test selection so that\n+# tests that need a particular resource can be selected to run on a system\n+# with that resource. Conversely \"!somekeyword\" can be used to exclude tests\n+# on a system without such a resource.\n+# Caution: If you are always excluding tests using any of these keywords then you\n+# are likely missing many important tests.\n+#\n+# \"headful\". A \"headful\" test requires a graphical environment to meaningfully run.\n+# This does not have to mean a physical host, since a VM can be configured as headful.\n+# Tests that are not headful are \"headless\".\n+# Note: all manual tests are assumed to be headful and do not need the keyword.\n+#\n+# \"printer\". Not all tests of printing APIs require a printer, but many do.\n+# So a \"printer\" test requires a printer to be installed to do anything meaningful.\n+# Tests may not fail if there is none, instead just silently return.\n+# But they also may legitimately throw an Exception depending on the test.\n+# Also printer tests are not necessarily headful, but some are, and some are automated.\n+# \n+# \"sound\". Similarly, not all sound tests require audio devices, but many do.\n+# A test flagged with key \"sound\" needs audio devices on the system.\n+# Also they are not necessarily \"headful\", since they don't require a display etc.\n+# But sometimes they may be accompanied by the headful keyword, since sound\n@@ -18,3 +41,3 @@\n-# A test flagged with key \"printer\" requires a printer to succeed, else\n-# throws a PrinterException or the like.\n-# A test flagged with cgroups uses cgroups.\n+#\n+# \"multimon\" should be used in conjunction with headful and is used to identify\n+# tests which require two displays connected.\n@@ -22,1 +45,2 @@\n-keys=2d dnd headful sound i18n intermittent printer randomness jfr cgroups\n+keys=headful sound printer multimon \\\n+     i18n intermittent randomness jfr cgroups\n@@ -76,0 +100,1 @@\n+    vm.jvmci.enabled \\\n","filename":"test\/jdk\/TEST.ROOT","additions":33,"deletions":8,"binary":false,"changes":41,"status":"modified"},{"patch":"@@ -0,0 +1,164 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/**\n+ * @test\n+ * @bug 8333542\n+ * @summary Missed breakpoint due to JVM not blocking other threads while\n+ *          delivering a ClassPrepareEvent.\n+ *\n+ * @run build TestScaffold VMConnection TargetListener TargetAdapter\n+ * @run compile -g BreakpointOnClassPrepare.java\n+ * @run driver BreakpointOnClassPrepare SUSPEND_NONE\n+ * @run driver BreakpointOnClassPrepare SUSPEND_EVENT_THREAD\n+ * @run driver BreakpointOnClassPrepare SUSPEND_ALL\n+ *\/\n+\n+import com.sun.jdi.*;\n+import com.sun.jdi.event.*;\n+import com.sun.jdi.request.*;\n+\n+import java.util.*;\n+\n+\/\/ The debuggee spawns 50 threads that call LoadedClass.foo(). The debugger enables\n+\/\/ ClassPrepareEvent for LoadedClass, and sets a breakpoint on LoadedClass.foo() when\n+\/\/ the ClassPrepareEvent arrives. The debugger expects 50 breakpoints to be hit.\n+\/\/ This verifies that the thread that causes the generation of the ClassPrepareEvent\n+\/\/ has properly blocked all other threads from executing LoadedClass.foo() until the\n+\/\/ ClassPrepareEvent has been delivered.\n+\n+class LoadedClass {\n+    static void foo(int k) {\n+        System.out.println(\"HIT = \" + k); \/\/ set breakpoint here\n+    }\n+}\n+\n+class BreakpointOnClassPrepareTarg {\n+    public static void main(String[] args) throws InterruptedException {\n+        System.out.println(\"Start\");\n+        Thread threads[] = new Thread[BreakpointOnClassPrepare.NUM_BREAKPOINTS];\n+        for (int i = 0; i < BreakpointOnClassPrepare.NUM_BREAKPOINTS; i++) {\n+            int k = i;\n+            Thread t = DebuggeeWrapper.newThread(() -> {\n+                System.out.println(\"k = \" + k);\n+                LoadedClass.foo(k);\n+            });\n+            threads[i] = t;\n+            t.setDaemon(true);\n+            t.setName(\"MyThread-\" + k);\n+            t.start();\n+        }\n+\n+        for (int i = 0; i < BreakpointOnClassPrepare.NUM_BREAKPOINTS; i++) {\n+            try {\n+                Thread t = threads[i];\n+                t.join();\n+            } catch (InterruptedException e) {\n+                throw new RuntimeException(e);\n+            }\n+        }\n+\n+        System.out.println(\"Finish\");\n+    }\n+}\n+\n+    \/********** test program **********\/\n+\n+public class BreakpointOnClassPrepare extends TestScaffold {\n+    ClassType targetClass;\n+    ThreadReference mainThread;\n+\n+    BreakpointOnClassPrepare(String args[]) {\n+        super(args);\n+    }\n+\n+    public static void main(String[] args)      throws Exception {\n+        new BreakpointOnClassPrepare(args).startTests();\n+    }\n+\n+    \/********** event handlers **********\/\n+\n+    static final int NUM_BREAKPOINTS = 50;\n+    int bkptCount;\n+    BreakpointRequest bkptRequest;\n+\n+    public void breakpointReached(BreakpointEvent event) {\n+        bkptCount++;\n+        String threadInfo;\n+        try {\n+            threadInfo = event.thread().toString();\n+        } catch (ObjectCollectedException e) {\n+            \/\/ It's possible the Thread already terminated and was collected\n+            \/\/ if the SUSPEND_NONE policy was used.\n+            threadInfo = \"(thread collected)\";\n+        }\n+        System.out.println(\"Got BreakpointEvent: \" + bkptCount + \" for thread \" + threadInfo);\n+    }\n+\n+    public void vmDisconnected(VMDisconnectEvent event) {\n+        println(\"Got VMDisconnectEvent\");\n+    }\n+\n+    \/********** test core **********\/\n+\n+    protected void runTests() throws Exception {\n+        \/* Determine which suspend policy to use. *\/\n+        int policy;\n+        if (args.length != 1) {\n+            throw new RuntimeException(\"Invalid number of args: \" + args.length);\n+        }\n+        String policyString = args[0];\n+        if (policyString.equals(\"SUSPEND_NONE\")) {\n+            policy = EventRequest.SUSPEND_NONE;\n+        } else if (policyString.equals(\"SUSPEND_ALL\")) {\n+            policy = EventRequest.SUSPEND_ALL;\n+        } else if (policyString.equals(\"SUSPEND_EVENT_THREAD\")) {\n+            policy = EventRequest.SUSPEND_EVENT_THREAD;\n+        } else {\n+            throw new RuntimeException(\"Invalid suspend policy: \" + policyString);\n+        }\n+\n+        \/* Stop when the target is loaded. *\/\n+        BreakpointEvent bpe = startToMain(\"BreakpointOnClassPrepareTarg\");\n+\n+        \/* Stop when \"LoadedClass\" is loaded. *\/\n+        EventRequestManager erm = vm().eventRequestManager();\n+        ClassPrepareEvent cpe = resumeToPrepareOf(\"LoadedClass\");\n+        println(\"Got ClassPrepareEvent: \" + cpe);\n+\n+        \/* Set a breakpoint for each time LoadedClass.foo() is called. *\/\n+        ClassType loadedClass = (ClassType)cpe.referenceType() ;\n+        Location loc1 = findMethodLocation(loadedClass,  \"foo\", \"(I)V\", 1);\n+        bkptRequest = erm.createBreakpointRequest(loc1);\n+        bkptRequest.setSuspendPolicy(policy);\n+        bkptRequest.enable();\n+\n+        listenUntilVMDisconnect();\n+\n+        if (!testFailed && bkptCount == NUM_BREAKPOINTS) {\n+            println(\"BreakpointOnClassPrepare: passed\");\n+        } else {\n+            throw new Exception(\"BreakpointOnClassPrepare: failed. bkptCount == \" + bkptCount);\n+        }\n+    }\n+}\n","filename":"test\/jdk\/com\/sun\/jdi\/BreakpointOnClassPrepare.java","additions":164,"deletions":0,"binary":false,"changes":164,"status":"added"},{"patch":"@@ -60,1 +60,1 @@\n-            ex.printStackTrace();\n+            ex.printStackTrace(System.out);\n@@ -101,1 +101,1 @@\n-        System.err.println(\"\\nStarting \" + testName);\n+        System.out.println(\"\\nStarting \" + testName);\n@@ -114,1 +114,1 @@\n-        System.err.println(testName + \" PASSED\");\n+        System.out.println(testName + \" PASSED\");\n@@ -119,1 +119,1 @@\n-        System.err.println(\"\\nStarting \" + testName);\n+        System.out.println(\"\\nStarting \" + testName);\n@@ -130,1 +130,1 @@\n-            System.err.println(testName + \": res=\" + res);\n+            System.out.println(testName + \": res=\" + res);\n@@ -133,2 +133,2 @@\n-        System.err.println(testName + \": returned a negative code as expected: \" + res);\n-        System.err.println(testName + \" PASSED\");\n+        System.out.println(testName + \": returned a negative code as expected: \" + res);\n+        System.out.println(testName + \" PASSED\");\n@@ -139,1 +139,1 @@\n-        System.err.println(\"\\nStarting \" + testName);\n+        System.out.println(\"\\nStarting \" + testName);\n@@ -146,2 +146,2 @@\n-            System.err.println(testName + \": caught expected IOException\");\n-            System.err.println(testName + \" PASSED\");\n+            System.out.println(testName + \": caught expected IOException\");\n+            System.out.println(testName + \" PASSED\");\n@@ -157,1 +157,1 @@\n-     * and calculate 2 masks (prefix length) - one is matches original local address\n+     * and calculate 2 masks (prefix length) - one matches original local address\n@@ -170,2 +170,10 @@\n-            \/\/ prefix length must be >= 1, so bitToChange must be >= 2\n-            int bitToChange = r.nextInt(bytes.length * 8 - 3) + 2;\n+            \/\/ Prefix length is 1..32 for IPv4, 1..128 for IPv6.\n+            \/\/ bitToChange is zero-based and must be >0 (for 0 \"good\" prefix length would be 0).\n+            \/\/ Corner cases (for 127.0.0.1):\n+            \/\/   bitToChange == 1 => allow address = 0.0.0.0\n+            \/\/     - \"good\" allow mask is \"0.0.0.0\/1\";\n+            \/\/     - \"bad\" allow mask is \"0.0.0.0\/2\";\n+            \/\/   bitToChange == 31 => allow address = 127.0.0.0\n+            \/\/     - \"good\" allow mask is \"127.0.0.0\/31\";\n+            \/\/     - \"bad\" allow mask is \"127.0.0.0\/32\".\n+            int bitToChange = r.nextInt(bytes.length * 8 - 2) + 1;\n@@ -179,2 +187,2 @@\n-            prefixLengthBad = bitToChange;\n-            prefixLengthGood = bitToChange - 1;\n+            prefixLengthGood = bitToChange;\n+            prefixLengthBad = bitToChange + 1;\n@@ -206,1 +214,1 @@\n-        System.err.println(\"localhost address: \" + localAddr);\n+        System.out.println(\"localhost address: \" + localAddr);\n@@ -246,1 +254,1 @@\n-            positiveTest(\"NegativeMaskTest(\" + test.localAddress + \")\",\n+            negativeTest(\"NegativeMaskTest(\" + test.localAddress + \")\",\n@@ -250,1 +258,1 @@\n-        System.err.println(\"\\nTest PASSED\");\n+        System.out.println(\"\\nTest PASSED\");\n","filename":"test\/jdk\/com\/sun\/jdi\/JdwpAllowTest.java","additions":26,"deletions":18,"binary":false,"changes":44,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -51,1 +51,1 @@\n-            getPropOpt(\"test.classes\"),\n+            getPropOpt(\"test.class.path\"),\n","filename":"test\/jdk\/com\/sun\/jdi\/cds\/CDSJDITest.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -116,0 +116,2 @@\n+        robot.delay(500);\n+\n","filename":"test\/jdk\/java\/awt\/Choice\/ChoicePopupLocation\/ChoicePopupLocation.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -0,0 +1,96 @@\n+\/*\n+ * Copyright (c) 2007, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 6519005\n+ * @summary regression: Selection the item on the choice don't work properly in vista ultimate.\n+ * @key headful\n+ * @run main NonFocusablePopupMenuTest\n+ *\/\n+\n+import java.awt.AWTException;\n+import java.awt.Choice;\n+import java.awt.Dimension;\n+import java.awt.EventQueue;\n+import java.awt.FlowLayout;\n+import java.awt.Frame;\n+import java.awt.Point;\n+import java.awt.Robot;\n+import java.awt.event.InputEvent;\n+import java.lang.reflect.InvocationTargetException;\n+\n+public class NonFocusablePopupMenuTest extends Frame {\n+    Choice choice;\n+    volatile Point pos;\n+    volatile Dimension size;\n+    volatile int selection1, selection2;\n+\n+    public void performTest() throws AWTException,\n+            InterruptedException, InvocationTargetException {\n+        Robot robot = new Robot();\n+        robot.setAutoDelay(100);\n+        EventQueue.invokeAndWait(() -> {\n+            choice = new Choice();\n+            choice.add(\"111\");\n+            choice.add(\"222\");\n+            choice.add(\"333\");\n+            choice.add(\"444\");\n+            choice.setFocusable(false);\n+            this.add(choice);\n+            this.setLayout(new FlowLayout());\n+            setSize (200, 200);\n+            setLocationRelativeTo(null);\n+            setVisible(true);\n+        });\n+        robot.waitForIdle();\n+        EventQueue.invokeAndWait(() -> {\n+            pos = choice.getLocationOnScreen();\n+            size = choice.getSize();\n+            selection1 = choice.getSelectedIndex();\n+        });\n+        robot.mouseMove(pos.x + size.width \/ 2, pos.y + size.height \/ 2);\n+        robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n+        robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n+        robot.waitForIdle();\n+        robot.delay(500);\n+        robot.mouseMove(pos.x + size.width \/ 2, pos.y + size.height * 2);\n+        robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n+        robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n+        robot.waitForIdle();\n+        EventQueue.invokeAndWait(() -> {\n+            selection2 = choice.getSelectedIndex();\n+            setVisible(false);\n+            dispose();\n+        });\n+        if (selection1 == selection2) {\n+            throw new RuntimeException(\"Can not change choice selection with the mouse click\");\n+        }\n+    }\n+\n+    public static void main(String[] args) throws AWTException,\n+            InterruptedException, InvocationTargetException {\n+        NonFocusablePopupMenuTest me = new NonFocusablePopupMenuTest();\n+        me.performTest();\n+    }\n+}\n\\ No newline at end of file\n","filename":"test\/jdk\/java\/awt\/Choice\/NonFocusablePopupMenuTest.java","additions":96,"deletions":0,"binary":false,"changes":96,"status":"added"},{"patch":"@@ -1,43 +0,0 @@\n-<!--\n- Copyright (c) 2007, 2013, Oracle and\/or its affiliates. All rights reserved.\n- DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n-\n- This code is free software; you can redistribute it and\/or modify it\n- under the terms of the GNU General Public License version 2 only, as\n- published by the Free Software Foundation.\n-\n- This code is distributed in the hope that it will be useful, but WITHOUT\n- ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- version 2 for more details (a copy is included in the LICENSE file that\n- accompanied this code).\n-\n- You should have received a copy of the GNU General Public License version\n- 2 along with this work; if not, write to the Free Software Foundation,\n- Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n-\n- Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- or visit www.oracle.com if you need additional information or have any\n- questions.\n--->\n-\n-<html>\n-<!--  \n-  @test\n-  @bug 6519005\n-  @summary regression: Selection the item on the choice don't work properly in vista ultimate.\n-  @author Dmitry Cherepanov area=awt.choice\n-  @run applet\/manual=yesno NonFocusablePopupMenuTest.html\n-  -->\n-<head>\n-<title> SetFontTest <\/title>\n-<\/head>\n-<body>\n-\n-<h1>SetFontTest<br>Bug ID: 5010944<\/h1>\n-\n-<p> See the dialog box (usually in upper left corner) for instructions<\/p>\n-\n-<APPLET CODE=\"NonFocusablePopupMenuTest.class\" WIDTH=200 HEIGHT=200><\/APPLET>\n-<\/body>\n-<\/html>\n","filename":"test\/jdk\/java\/awt\/Choice\/NonFocusablePopupMenuTest\/NonFocusablePopupMenuTest.html","additions":0,"deletions":43,"binary":false,"changes":43,"status":"deleted"},{"patch":"@@ -1,214 +0,0 @@\n-\/*\n- * Copyright (c) 2007, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-\n-\/*\n-  test\n-  @bug 6519005\n-  @summary regression: Selection the item on the choice don't work properly in vista ultimate.\n-  @author Dmitry Cherepanov area=awt.choice\n-  @run applet\/manual=yesno NonFocusablePopupMenuTest.html\n-*\/\n-\n-import java.applet.Applet;\n-import java.awt.*;\n-import java.awt.event.*;\n-\n-public class NonFocusablePopupMenuTest extends Applet\n-{\n-    public void init()\n-    {\n-        Choice choice = new Choice();\n-        choice.add(\"111\");\n-        choice.add(\"222\");\n-        choice.add(\"333\");\n-        choice.add(\"444\");\n-        choice.setFocusable(false);\n-\n-        this.add(choice);\n-\n-        this.setLayout (new FlowLayout ());\n-\n-        String[] instructions =\n-        {\n-            \"1) The applet contains a non-focusable choice, \",\n-            \"2) Click on the choice by mouse, try to change the selection of the choice, \",\n-            \"3) If it's not possible to change the selection and popup menu is always open \",\n-            \"   even if you click by mouse on any item of the choice, the test failed, \",\n-            \"4) Otherwise, the test passed. \"\n-        };\n-        Sysout.createDialogWithInstructions( instructions );\n-\n-    }\/\/End  init()\n-\n-    public void start ()\n-    {\n-\n-        setSize (200,200);\n-        setVisible(true);\n-        validate();\n-\n-    }\/\/ start()\n-}\n-\n-\/* Place other classes related to the test after this line *\/\n-\n-\n-\n-\n-\n-\/****************************************************\n- Standard Test Machinery\n- DO NOT modify anything below -- it's a standard\n-  chunk of code whose purpose is to make user\n-  interaction uniform, and thereby make it simpler\n-  to read and understand someone else's test.\n- ****************************************************\/\n-\n-\/**\n- This is part of the standard test machinery.\n- It creates a dialog (with the instructions), and is the interface\n-  for sending text messages to the user.\n- To print the instructions, send an array of strings to Sysout.createDialog\n-  WithInstructions method.  Put one line of instructions per array entry.\n- To display a message for the tester to see, simply call Sysout.println\n-  with the string to be displayed.\n- This mimics System.out.println but works within the test harness as well\n-  as standalone.\n- *\/\n-\n-class Sysout\n-{\n-    private static TestDialog dialog;\n-\n-    public static void createDialogWithInstructions( String[] instructions )\n-    {\n-        dialog = new TestDialog( new Frame(), \"Instructions\" );\n-        dialog.printInstructions( instructions );\n-        dialog.setVisible(true);\n-        println( \"Any messages for the tester will display here.\" );\n-    }\n-\n-    public static void createDialog( )\n-    {\n-        dialog = new TestDialog( new Frame(), \"Instructions\" );\n-        String[] defInstr = { \"Instructions will appear here. \", \"\" } ;\n-        dialog.printInstructions( defInstr );\n-        dialog.setVisible(true);\n-        println( \"Any messages for the tester will display here.\" );\n-    }\n-\n-\n-    public static void printInstructions( String[] instructions )\n-    {\n-        dialog.printInstructions( instructions );\n-    }\n-\n-\n-    public static void println( String messageIn )\n-    {\n-        dialog.displayMessage( messageIn );\n-    }\n-\n-}\/\/ Sysout  class\n-\n-\/**\n-  This is part of the standard test machinery.  It provides a place for the\n-   test instructions to be displayed, and a place for interactive messages\n-   to the user to be displayed.\n-  To have the test instructions displayed, see Sysout.\n-  To have a message to the user be displayed, see Sysout.\n-  Do not call anything in this dialog directly.\n-  *\/\n-class TestDialog extends Dialog\n-{\n-\n-    TextArea instructionsText;\n-    TextArea messageText;\n-    int maxStringLength = 80;\n-\n-    \/\/DO NOT call this directly, go through Sysout\n-    public TestDialog( Frame frame, String name )\n-    {\n-        super( frame, name );\n-        int scrollBoth = TextArea.SCROLLBARS_BOTH;\n-        instructionsText = new TextArea( \"\", 15, maxStringLength, scrollBoth );\n-        add( \"North\", instructionsText );\n-\n-        messageText = new TextArea( \"\", 5, maxStringLength, scrollBoth );\n-        add(\"Center\", messageText);\n-\n-        pack();\n-\n-        setVisible(true);\n-    }\/\/ TestDialog()\n-\n-    \/\/DO NOT call this directly, go through Sysout\n-    public void printInstructions( String[] instructions )\n-    {\n-        \/\/Clear out any current instructions\n-        instructionsText.setText( \"\" );\n-\n-        \/\/Go down array of instruction strings\n-\n-        String printStr, remainingStr;\n-        for( int i=0; i < instructions.length; i++ )\n-        {\n-            \/\/chop up each into pieces maxSringLength long\n-            remainingStr = instructions[ i ];\n-            while( remainingStr.length() > 0 )\n-            {\n-                \/\/if longer than max then chop off first max chars to print\n-                if( remainingStr.length() >= maxStringLength )\n-                {\n-                    \/\/Try to chop on a word boundary\n-                    int posOfSpace = remainingStr.\n-                        lastIndexOf( ' ', maxStringLength - 1 );\n-\n-                    if( posOfSpace <= 0 ) posOfSpace = maxStringLength - 1;\n-\n-                    printStr = remainingStr.substring( 0, posOfSpace + 1 );\n-                    remainingStr = remainingStr.substring( posOfSpace + 1 );\n-                }\n-                \/\/else just print\n-                else\n-                {\n-                    printStr = remainingStr;\n-                    remainingStr = \"\";\n-                }\n-\n-                instructionsText.append( printStr + \"\\n\" );\n-\n-            }\/\/ while\n-\n-        }\/\/ for\n-\n-    }\/\/printInstructions()\n-\n-    \/\/DO NOT call this directly, go through Sysout\n-    public void displayMessage( String messageIn )\n-    {\n-        messageText.append( messageIn + \"\\n\" );\n-        System.out.println(messageIn);\n-    }\n-\n-}\/\/ TestDialog  class\n","filename":"test\/jdk\/java\/awt\/Choice\/NonFocusablePopupMenuTest\/NonFocusablePopupMenuTest.java","additions":0,"deletions":214,"binary":false,"changes":214,"status":"deleted"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2004, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2004, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,2 +33,12 @@\n-import java.awt.*;\n-import java.awt.event.*;\n+import java.awt.BorderLayout;\n+import java.awt.Choice;\n+import java.awt.Dimension;\n+import java.awt.Font;\n+import java.awt.Frame;\n+import java.awt.Point;\n+import java.awt.Robot;\n+import java.awt.Toolkit;\n+import java.awt.event.InputEvent;\n+import java.awt.event.ItemEvent;\n+import java.awt.event.ItemListener;\n+import java.awt.event.KeyEvent;\n@@ -69,0 +79,1 @@\n+            robot.delay(500);\n@@ -111,1 +122,1 @@\n-        robot.mousePress(InputEvent.BUTTON1_MASK);\n+        robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n@@ -113,1 +124,1 @@\n-        robot.mouseRelease(InputEvent.BUTTON1_MASK);\n+        robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n@@ -124,1 +135,1 @@\n-        robot.mousePress(InputEvent.BUTTON1_MASK);\n+        robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n@@ -126,1 +137,1 @@\n-        robot.mouseRelease(InputEvent.BUTTON1_MASK);\n+        robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n","filename":"test\/jdk\/java\/awt\/Choice\/PopupPosTest\/PopupPosTest.java","additions":18,"deletions":7,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -57,1 +57,1 @@\n-    private static Frame frame;\n+    private static StartFrame frame;\n@@ -62,1 +62,0 @@\n-    private static Button[] robot_button = new Button[2];\n@@ -81,0 +80,3 @@\n+        robot.waitForIdle();\n+        robot.delay(1000);\n+\n@@ -97,1 +99,1 @@\n-            clickOnComp(robot_button[0]);\n+            clickOnComp(frame.button);\n@@ -101,1 +103,1 @@\n-            clickOnComp(robot_button[1]);\n+            clickOnComp(interDiag.button);\n@@ -147,0 +149,2 @@\n+        public volatile Button button;\n+\n@@ -171,1 +175,1 @@\n-            robot_button[0] = but;\n+            button = but;\n@@ -180,0 +184,1 @@\n+        public volatile Button button;\n@@ -196,3 +201,1 @@\n-\n-            \/\/ The robot needs to know about us, so set global\n-            robot_button[1] = but;\n+            button = but;\n@@ -218,1 +221,1 @@\n-    public static void main(String[] args) throws RuntimeException, Exception {\n+    public static void main(String[] args) throws Exception {\n@@ -223,1 +226,1 @@\n-                    + \"failed\");\n+                    + \"failed\", e);\n","filename":"test\/jdk\/java\/awt\/Dialog\/NestedDialogs\/Modal\/NestedModalDialogTest.java","additions":14,"deletions":11,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2012, 2013, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2012, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -30,2 +30,2 @@\n- * @library ..\/..\/regtesthelpers\n- * @build   Util\n+ * @library \/java\/awt\/regtesthelpers \/test\/lib\n+ * @build   Util jdk.test.lib.Platform\n@@ -44,2 +44,14 @@\n-import java.awt.*;\n-import java.awt.event.*;\n+import java.awt.AWTEvent;\n+import java.awt.AWTException;\n+import java.awt.Button;\n+import java.awt.Component;\n+import java.awt.FlowLayout;\n+import java.awt.Frame;\n+import java.awt.Robot;\n+import java.awt.Toolkit;\n+import java.awt.event.AWTEventListener;\n+import java.awt.event.FocusAdapter;\n+import java.awt.event.FocusEvent;\n+import java.awt.event.FocusListener;\n+import java.awt.event.KeyEvent;\n+import java.awt.event.WindowEvent;\n@@ -49,1 +61,5 @@\n-import javax.swing.*;\n+import javax.swing.JButton;\n+import javax.swing.JFrame;\n+import javax.swing.SwingUtilities;\n+\n+import jdk.test.lib.Platform;\n@@ -75,1 +91,1 @@\n-    public static void main(String[] args) {\n+    public static void main(String[] args) throws Exception {\n@@ -84,0 +100,1 @@\n+            robot.setAutoDelay(50);\n@@ -93,1 +110,1 @@\n-        f0.setBounds(0, 100, 400, 200);\n+        f0.setBounds(100, 100, 400, 200);\n@@ -96,1 +113,1 @@\n-        f1.setBounds(0, 400, 400, 200);\n+        f1.setBounds(100, 400, 400, 200);\n@@ -99,1 +116,1 @@\n-        f2.setBounds(0, 400, 400, 200);\n+        f2.setBounds(100, 400, 400, 200);\n@@ -118,0 +135,1 @@\n+        robot.delay(500);\n@@ -155,1 +173,1 @@\n-    public static void test(Component compToClick) {\n+    public static void test(Component compToClick) throws Exception {\n@@ -159,1 +177,0 @@\n-        robot.delay(50);\n@@ -161,1 +178,1 @@\n-        robot.delay(50);\n+        robot.waitForIdle();\n@@ -164,1 +181,0 @@\n-        robot.delay(50);\n@@ -166,1 +182,1 @@\n-        robot.delay(50);\n+        robot.waitForIdle();\n@@ -169,1 +185,0 @@\n-        robot.delay(50);\n@@ -171,0 +186,1 @@\n+        robot.waitForIdle();\n@@ -172,1 +188,0 @@\n-        robot.delay(50);\n@@ -175,2 +190,6 @@\n-        robot.delay(50);\n-        Util.clickOnTitle(f0, robot);\n+        robot.waitForIdle();\n+        SwingUtilities.invokeAndWait(f0::toFront);\n+\n+        if (!Platform.isOnWayland()) {\n+            Util.clickOnTitle(f0, robot);\n+        }\n","filename":"test\/jdk\/java\/awt\/Focus\/6981400\/Test1.java","additions":38,"deletions":19,"binary":false,"changes":57,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,2 +29,2 @@\n-  @library   ..\/..\/regtesthelpers\n-  @build     Util\n+  @library \/java\/awt\/regtesthelpers \/test\/lib\n+  @build   Util jdk.test.lib.Platform\n@@ -34,2 +34,16 @@\n-import java.awt.*;\n-import java.awt.event.*;\n+import java.awt.AWTEvent;\n+import java.awt.Button;\n+import java.awt.Color;\n+import java.awt.Component;\n+import java.awt.EventQueue;\n+import java.awt.FlowLayout;\n+import java.awt.Frame;\n+import java.awt.KeyboardFocusManager;\n+import java.awt.Robot;\n+import java.awt.Toolkit;\n+import java.awt.Window;\n+import java.awt.event.AWTEventListener;\n+import java.awt.event.FocusEvent;\n+import java.awt.event.WindowEvent;\n+\n+import jdk.test.lib.Platform;\n@@ -47,1 +61,1 @@\n-    public static void main(String[] args) {\n+    public static void main(String[] args) throws Exception {\n@@ -71,1 +85,1 @@\n-    public void start() {\n+    public void start() throws Exception {\n@@ -102,1 +116,6 @@\n-        Util.clickOnTitle(owner, robot);\n+        EventQueue.invokeAndWait(owner::toFront);\n+\n+        if (!Platform.isOnWayland()) {\n+            Util.clickOnTitle(owner, robot);\n+        }\n+\n@@ -120,0 +139,1 @@\n+        robot.delay(500);\n@@ -122,1 +142,1 @@\n-    void clickOnCheckFocus(Component c) {\n+    void clickOnCheckFocus(Component c) throws Exception {\n@@ -124,1 +144,4 @@\n-            Util.clickOnTitle((Frame)c, robot);\n+            EventQueue.invokeAndWait(() -> ((Frame) c).toFront());\n+            if (!Platform.isOnWayland()) {\n+                Util.clickOnTitle((Frame) c, robot);\n+            }\n","filename":"test\/jdk\/java\/awt\/Focus\/ActualFocusedWindowTest\/ActualFocusedWindowBlockingTest.java","additions":33,"deletions":10,"binary":false,"changes":43,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2002, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2002, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -25,1 +25,2 @@\n-  test\n+  @test\n+  @key headful\n@@ -28,2 +29,1 @@\n-  @key headful\n-  @run main AutomaticAppletTest\n+  @run main ModalDialogInFocusEventTest\n@@ -71,0 +71,2 @@\n+    static boolean isOnWayland;\n+\n@@ -212,12 +214,15 @@\n-        System.out.println(\"click on title of \" + frame.getName());\n-        int[] point = new int[2];\n-        EventQueue.invokeAndWait(() -> {\n-            Point location = frame.getLocationOnScreen();\n-            Insets insets = frame.getInsets();\n-            int width = frame.getWidth();\n-            point[0] = location.x + width \/ 2;\n-            point[1] = location.y + insets.top \/ 2;\n-        });\n-        robot.mouseMove(point[0], point[1]);\n-        robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n-        robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n+        EventQueue.invokeAndWait(frame::toFront);\n+        if (!isOnWayland) {\n+            System.out.println(\"click on title of \" + frame.getName());\n+            int[] point = new int[2];\n+            EventQueue.invokeAndWait(() -> {\n+                Point location = frame.getLocationOnScreen();\n+                Insets insets = frame.getInsets();\n+                int width = frame.getWidth();\n+                point[0] = location.x + width \/ 2;\n+                point[1] = location.y + insets.top \/ 2;\n+            });\n+            robot.mouseMove(point[0], point[1]);\n+            robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n+            robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n+        }\n@@ -347,0 +352,1 @@\n+        isOnWayland = System.getenv(\"WAYLAND_DISPLAY\") != null;\n","filename":"test\/jdk\/java\/awt\/Focus\/ModalDialogInFocusEventTest.java","additions":22,"deletions":16,"binary":false,"changes":38,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -82,0 +82,1 @@\n+        robot.delay(500);\n","filename":"test\/jdk\/java\/awt\/Focus\/NonFocusableBlockedOwnerTest\/NonFocusableBlockedOwnerTest.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,12 +24,0 @@\n-\/*\n-  @test\n-  @key headful\n-  @bug       6182359\n-  @summary   Tests that Window having non-focusable owner can't be a focus owner.\n-  @library   ..\/..\/regtesthelpers\n-  @build     Util\n-  @run       main NonfocusableOwnerTest\n-*\/\n-\n-import java.awt.*;\n-import java.awt.event.*;\n@@ -38,0 +26,21 @@\n+import java.awt.AWTEvent;\n+import java.awt.Button;\n+import java.awt.Dialog;\n+import java.awt.Frame;\n+import java.awt.KeyboardFocusManager;\n+import java.awt.Robot;\n+import java.awt.Toolkit;\n+import java.awt.Window;\n+import java.awt.event.AWTEventListener;\n+import java.awt.event.FocusEvent;\n+import java.awt.event.WindowEvent;\n+\n+\/*\n+ ( @test\n+ * @key headful\n+ * @bug 6182359\n+ * @summary Tests that Window having non-focusable owner can't be a focus owner.\n+ * @library ..\/..\/regtesthelpers\n+ * @build Util\n+ * @run main NonfocusableOwnerTest\n+ *\/\n@@ -58,1 +67,1 @@\n-        frame = new Frame(\"Frame\");\n+        frame = new Frame(\"NonfocusableOwnerTest\");\n@@ -95,0 +104,1 @@\n+        robot.waitForIdle();\n@@ -98,0 +108,1 @@\n+        robot.waitForIdle();\n@@ -114,0 +125,1 @@\n+        robot.waitForIdle();\n@@ -117,0 +129,1 @@\n+        robot.waitForIdle();\n@@ -120,0 +133,1 @@\n+        robot.waitForIdle();\n@@ -137,0 +151,1 @@\n+        robot.waitForIdle();\n@@ -140,0 +155,1 @@\n+        robot.waitForIdle();\n@@ -144,0 +160,1 @@\n+        robot.waitForIdle();\n","filename":"test\/jdk\/java\/awt\/Focus\/NonFocusableWindowTest\/NonfocusableOwnerTest.java","additions":31,"deletions":14,"binary":false,"changes":45,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -67,0 +67,1 @@\n+        robot.delay(1000);\n","filename":"test\/jdk\/java\/awt\/Focus\/OwnedWindowFocusIMECrashTest\/OwnedWindowFocusIMECrashTest.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,1 +31,1 @@\n-import java.awt.BorderLayout;\n+\n@@ -39,1 +39,0 @@\n-import java.awt.Panel;\n@@ -52,2 +51,0 @@\n-import java.lang.reflect.InvocationTargetException;\n-import java.util.concurrent.atomic.AtomicBoolean;\n@@ -63,1 +60,1 @@\n-    static AtomicBoolean focusGained = new AtomicBoolean(false);\n+    static final AtomicBoolean focusGained = new AtomicBoolean(false);\n@@ -124,0 +121,1 @@\n+            robot.keyRelease(KeyEvent.VK_TAB);\n","filename":"test\/jdk\/java\/awt\/Focus\/RowToleranceTransitivityTest.java","additions":4,"deletions":6,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -78,0 +78,1 @@\n+        robot.delay(500);\n","filename":"test\/jdk\/java\/awt\/Focus\/WrongKeyTypedConsumedTest\/WrongKeyTypedConsumedTest.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -0,0 +1,118 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.awt.Font;\n+import java.awt.FontMetrics;\n+import java.awt.Graphics2D;\n+import java.awt.Rectangle;\n+import java.awt.font.FontRenderContext;\n+import java.awt.font.GlyphVector;\n+import java.awt.geom.AffineTransform;\n+import java.awt.geom.Rectangle2D;\n+import java.awt.image.BufferedImage;\n+\n+\/*\n+ * @test\n+ * @bug 8328896\n+ * @summary test that using very large font sizes used don't break later uses\n+ *\/\n+\n+public class ExtremeFontSizeTest {\n+\n+    static BufferedImage bi = new BufferedImage(1,1,1);\n+    static Graphics2D g2d = bi.createGraphics();\n+    static String testString = \"M\";\n+    static Font font = new Font(\"SansSerif\", Font.PLAIN, 12);\n+    static int fontSize = 0;\n+    static boolean failed = false;\n+    static int[] fontSizes = { 10, 12, 1000, 2000, 20000, 100000, 8 };\n+    static double[] scales = { 1.0, 900.0};\n+    static boolean[] fms = { false, true };\n+\n+    public static void main(String[] args) {\n+\n+        \/* run tests validating bounds etc are non-zero\n+         * then run with extreme scales for which zero is allowed - but not required\n+         * then run the first tests again to be sure they are still reasonable.\n+        *\/\n+        runTests();\n+        test(5_000_000, 10_000, false, testString, false);\n+        test(5_000_000, 10_000, true, testString, false);\n+        test(0, 0.00000001, false, testString, false);\n+        runTests();\n+\n+        if (failed) {\n+            throw new RuntimeException(\"Test failed. Check stdout log.\");\n+        }\n+    }\n+\n+    static void runTests() {\n+        for (int fontSize : fontSizes) {\n+            for (double scale : scales) {\n+                for (boolean fm : fms) {\n+                    test(fontSize, scale, fm, testString, true);\n+                }\n+            }\n+        }\n+    }\n+\n+    static void test(int size, double scale, boolean fm, String str, boolean checkAll) {\n+\n+        AffineTransform at = AffineTransform.getScaleInstance(scale, scale);\n+        FontRenderContext frc = new FontRenderContext(at, false, fm);\n+        font = font.deriveFont((float)size);\n+        g2d.setTransform(at);\n+        g2d.setFont(font);\n+        FontMetrics metrics = g2d.getFontMetrics();\n+        int height = metrics.getHeight();\n+        double width = font.getStringBounds(str, frc).getWidth();\n+\n+        GlyphVector gv = font.createGlyphVector(frc, str.toCharArray());\n+        Rectangle pixelBounds = gv.getPixelBounds(frc, 0, 0);\n+        Rectangle2D visualBounds = gv.getVisualBounds();\n+\n+        System.out.println(\"Test parameters: size=\"+size+\" scale=\"+scale+\" fm=\"+fm+\" str=\"+str);\n+        System.out.println(\"font height=\"+metrics.getHeight());\n+        System.out.println(\"string bounds width=\"+width);\n+        System.out.println(\"GlyphVector Pixel Bounds=\"+ pixelBounds);\n+        System.out.println(\"GlyphVector Visual Bounds=\"+ visualBounds);\n+\n+\n+        if (height < 0 || width < 0 || pixelBounds.getWidth() < 0 || visualBounds.getWidth() < 0) {\n+            failed = true;\n+            System.out.println(\" *** Unexpected negative size reported  *** \");\n+         }\n+         if (!checkAll) {\n+            System.out.println();\n+            return;\n+        }\n+\n+        if (height == 0 || width == 0 || (pixelBounds.isEmpty()) || visualBounds.isEmpty() ) {\n+            failed = true;\n+            System.out.println(\"Pixel bounds empty=\"+pixelBounds.isEmpty());\n+            System.out.println(\"Visual bounds empty=\"+visualBounds.isEmpty());\n+            System.out.println(\" *** RESULTS NOT AS EXPECTED  *** \");\n+        }\n+        System.out.println();\n+    }\n+}\n","filename":"test\/jdk\/java\/awt\/FontMetrics\/ExtremeFontSizeTest.java","additions":118,"deletions":0,"binary":false,"changes":118,"status":"added"},{"patch":"@@ -0,0 +1,68 @@\n+\/*\n+ * Copyright (c) 1998, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.awt.EventQueue;\n+import java.awt.Frame;\n+\n+\/*\n+ * @test 4033151\n+ * @summary Test that frame default size is minimum possible size\n+ * @library \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame\n+ * @run main\/manual DefaultSizeTest\n+ *\/\n+\n+public class DefaultSizeTest {\n+\n+    private static final String INSTRUCTIONS = \"\"\"\n+            An empty frame is created.\n+            It should be located to the right of this window\n+            and should be the minimum size allowed by the window manager.\n+            For any WM, the frame should be very small.\n+            If the frame is not large, click Pass or Fail otherwise.\n+            \"\"\";\n+\n+\n+    public static void main(String[] args) throws Exception {\n+        PassFailJFrame passFailJFrame = new PassFailJFrame.Builder()\n+                .title(\"DefaultSizeTest Instructions Frame\")\n+                .instructions(INSTRUCTIONS)\n+                .testTimeOut(5)\n+                .rows(10)\n+                .columns(45)\n+                .screenCapture()\n+                .build();\n+\n+        EventQueue.invokeAndWait(() -> {\n+            Frame frame = new Frame(\"DefaultSize\");\n+\n+            PassFailJFrame.addTestWindow(frame);\n+            PassFailJFrame\n+                    .positionTestWindow(frame, PassFailJFrame.Position.HORIZONTAL);\n+\n+            frame.setVisible(true);\n+        });\n+\n+        passFailJFrame.awaitAndCheck();\n+    }\n+}\n","filename":"test\/jdk\/java\/awt\/Frame\/DefaultSizeTest.java","additions":68,"deletions":0,"binary":false,"changes":68,"status":"added"},{"patch":"@@ -0,0 +1,175 @@\n+\/*\n+ * Copyright (c) 1998, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.awt.BorderLayout;\n+import java.awt.Color;\n+import java.awt.EventQueue;\n+import java.awt.Frame;\n+import java.awt.Label;\n+import java.awt.Menu;\n+import java.awt.MenuBar;\n+import java.awt.MenuItem;\n+import java.awt.Panel;\n+import java.awt.ScrollPane;\n+import java.awt.event.ActionEvent;\n+import java.awt.event.ActionListener;\n+\n+\/*\n+ * @test\n+ * @key headful\n+ * @summary Test dynamically changing frame component visibility and repacking\n+ * @library \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame\n+ * @run main\/manual FrameRepackTest\n+ *\/\n+\n+public class FrameRepackTest {\n+\n+    private static final String INSTRUCTIONS = \"\"\"\n+            There is a green frame with a menubar.\n+            The menubar has one menu, labelled 'Flip'.\n+            The menu has two items, labelled 'visible' and 'not visible'.\n+            The frame also contains a red panel that contains two line labels,\n+            'This panel is always displayed' and 'it is a test'.\n+\n+            If you select the menu item 'Flip->visible', then another panel is\n+            added below the red panel.\n+            The added panel is blue and has yellow horizontal and vertical scrollbars.\n+\n+            If you select menu item 'Flip->not visible', the second panel\n+            is removed and the frame appears as it did originally.\n+\n+            You can repeatedly add and remove the second panel in this way.\n+            After such an addition or removal, the frame's location on the screen\n+            should not change, while the size changes to accommodate\n+            either just the red panel or both the red and the blue panels.\n+\n+            If you resize the frame larger, the red panel remains at the\n+            top of the frame with its height fixed and its width adjusted\n+            to the width of the frame.\n+\n+            Similarly, if it is present, the blue panel and its yellow scroolbars\n+            remain at the bottom of the frame with fixed height and width adjusted\n+            to the size of the frame.  But selecting 'visible' or 'not visible'\n+            repacks the frame, thereby adjusting its size tightly to its panel(s).\n+\n+            Upon test completion, click Pass or Fail appropriately.\n+            \"\"\";\n+\n+    public static void main(String[] args) throws Exception {\n+        PassFailJFrame passFailJFrame = new PassFailJFrame.Builder()\n+                .title(\"FrameRepackTest Instructions\")\n+                .instructions(INSTRUCTIONS)\n+                .testTimeOut(5)\n+                .rows(30)\n+                .columns(45)\n+                .build();\n+\n+        EventQueue.invokeAndWait(() -> {\n+            FrameRepack frame = new FrameRepack();\n+\n+            PassFailJFrame.addTestWindow(frame);\n+            PassFailJFrame.positionTestWindow(frame,\n+                    PassFailJFrame.Position.HORIZONTAL);\n+\n+            frame.setVisible(true);\n+        });\n+\n+        passFailJFrame.awaitAndCheck();\n+    }\n+\n+}\n+\n+class FrameRepack extends Frame implements ActionListener {\n+\n+    Panel south;\n+\n+    public FrameRepack() {\n+        super(\"FrameRepack\");\n+\n+        \/\/ create the menubar\n+        MenuBar menubar = new MenuBar();\n+        this.setMenuBar(menubar);\n+        \/\/ create the options\n+        Menu flip = new Menu(\"Flip\");\n+        MenuItem mi;\n+        mi = new MenuItem(\"visible\");\n+        mi.addActionListener(this);\n+        flip.add(mi);\n+        mi = new MenuItem(\"not visible\");\n+        mi.addActionListener(this);\n+        flip.add(mi);\n+\n+        menubar.add(flip);\n+\n+        setLayout(new BorderLayout(2, 2));\n+        setBackground(Color.green);\n+\n+        \/\/ north panel is always displayed\n+        Panel north = new Panel();\n+        north.setBackground(Color.red);\n+        north.setLayout(new BorderLayout(2, 2));\n+        north.add(\"North\", new Label(\"This panel is always displayed\"));\n+        north.add(\"Center\", new Label(\"it is a test\"));\n+        north.setSize(200, 200);\n+        add(\"North\", north);\n+\n+        \/\/ south panel can be visible or not...\n+        \/\/ The problem seems to occur when I put this panel not visible\n+        south = new Panel();\n+        south.setBackground(Color.white);\n+        south.setLayout(new BorderLayout());\n+\n+        ScrollPane scroller = new ScrollPane(ScrollPane.SCROLLBARS_ALWAYS);\n+        scroller.setBackground(Color.yellow);\n+        Panel pan1 = new Panel();\n+        pan1.setBackground(Color.blue);\n+        pan1.setLayout(new BorderLayout());\n+\n+        pan1.setSize(400, 150);\n+        scroller.add(\"Center\", pan1);\n+\n+        south.add(\"South\", scroller);\n+\n+        add(\"South\", south);\n+\n+        south.setVisible(false);\n+\n+        setSize(350, 300);\n+\n+        pack();\n+    }\n+\n+    @Override\n+    public void actionPerformed(ActionEvent evt) {\n+        if (evt.getSource() instanceof MenuItem) {\n+            if (evt.getActionCommand().equals(\"visible\")) {\n+                south.setVisible(true);\n+                pack();\n+            } else if (evt.getActionCommand().equals(\"not visible\")) {\n+                south.setVisible(false);\n+                pack();\n+            }\n+        }\n+    }\n+}\n","filename":"test\/jdk\/java\/awt\/Frame\/FrameRepackTest.java","additions":175,"deletions":0,"binary":false,"changes":175,"status":"added"},{"patch":"@@ -0,0 +1,92 @@\n+\/*\n+ * Copyright (c) 1998, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.awt.BorderLayout;\n+import java.awt.Canvas;\n+import java.awt.Color;\n+import java.awt.EventQueue;\n+import java.awt.Frame;\n+\n+\/*\n+ * @test\n+ * @bug 4041442\n+ * @key headful\n+ * @summary Test resizing a frame containing a canvas\n+ * @library \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame\n+ * @run main\/manual FrameResizeTest_1\n+ *\/\n+\n+public class FrameResizeTest_1 {\n+\n+    private static final String INSTRUCTIONS = \"\"\"\n+        To the right of this frame is an all-white 200x200 frame.\n+\n+        This is actually a white canvas component in the frame.\n+        The frame itself is red.\n+        The red should never show.\n+        In particular, after you resize the frame, you should see all white and no red.\n+        (During very fast window resizing, red color may appear briefly,\n+        which is not a failure.)\n+\n+        Upon test completion, click Pass or Fail appropriately.\n+        \"\"\";\n+\n+    public static void main(String[] args) throws Exception {\n+        PassFailJFrame passFailJFrame = new PassFailJFrame.Builder()\n+                .title(\"FrameResizeTest_1 Instructions\")\n+                .instructions(INSTRUCTIONS)\n+                .testTimeOut(5)\n+                .rows(12)\n+                .columns(45)\n+                .build();\n+\n+        EventQueue.invokeAndWait(() -> {\n+            FrameResize_1 frame = new FrameResize_1();\n+\n+            PassFailJFrame.addTestWindow(frame);\n+            PassFailJFrame.positionTestWindow(frame,\n+                    PassFailJFrame.Position.HORIZONTAL);\n+\n+            frame.setVisible(true);\n+        });\n+\n+        passFailJFrame.awaitAndCheck();\n+    }\n+}\n+\n+class FrameResize_1 extends Frame {\n+\n+    FrameResize_1() {\n+        super(\"FrameResize_1\");\n+        \/\/ Create a white canvas\n+        Canvas canvas = new Canvas();\n+        canvas.setBackground(Color.white);\n+\n+        setLayout(new BorderLayout());\n+        add(\"Center\", canvas);\n+\n+        setBackground(Color.red);\n+        setSize(200,200);\n+    }\n+}\n","filename":"test\/jdk\/java\/awt\/Frame\/FrameResizeTest\/FrameResizeTest_1.java","additions":92,"deletions":0,"binary":false,"changes":92,"status":"added"},{"patch":"@@ -0,0 +1,144 @@\n+\/*\n+ * Copyright (c) 1998, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.awt.BorderLayout;\n+import java.awt.Canvas;\n+import java.awt.Color;\n+import java.awt.Container;\n+import java.awt.Dimension;\n+import java.awt.EventQueue;\n+import java.awt.Frame;\n+import java.awt.Graphics;\n+import java.awt.GridBagConstraints;\n+import java.awt.GridBagLayout;\n+import java.awt.Panel;\n+\n+\/*\n+ * @test\n+ * @bug 4065568\n+ * @key headful\n+ * @summary Test resizing a frame containing a canvas\n+ * @library \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame\n+ * @run main\/manual FrameResizeTest_2\n+ *\/\n+\n+public class FrameResizeTest_2 {\n+    private static final String INSTRUCTIONS = \"\"\"\n+        There is a frame (size 300x300).\n+        The left half is red and the right half is blue.\n+\n+        When you resize the frame, it should still have a red left half\n+        and a blue right half.\n+\n+        In particular, no green should be visible after a resize.\n+\n+        Upon test completion, click Pass or Fail appropriately.\n+        \"\"\";\n+\n+    public static void main(String[] args) throws Exception {\n+        PassFailJFrame passFailJFrame = new PassFailJFrame.Builder()\n+                .title(\"FrameResizeTest_2 Instructions\")\n+                .instructions(INSTRUCTIONS)\n+                .testTimeOut(5)\n+                .rows(10)\n+                .columns(45)\n+                .build();\n+\n+        EventQueue.invokeAndWait(() -> {\n+            FrameResize_2 frame = new FrameResize_2();\n+\n+            PassFailJFrame.addTestWindow(frame);\n+            PassFailJFrame.positionTestWindow(frame,\n+                    PassFailJFrame.Position.HORIZONTAL);\n+\n+            frame.setVisible(true);\n+        });\n+\n+        passFailJFrame.awaitAndCheck();\n+    }\n+}\n+\n+class FrameResize_2 extends Frame {\n+\n+    FrameResize_2() {\n+        super(\"FrameResize_2\");\n+\n+        setLayout(new GridBagLayout());\n+\n+        GridBagConstraints c = new GridBagConstraints();\n+        c.fill = GridBagConstraints.BOTH;\n+        c.weightx = 1;\n+        c.weighty = 1;\n+\n+        Container dumbContainer = new DumbContainer();\n+        add(dumbContainer, c);\n+\n+        Panel dumbPanel = new DumbPanel();\n+        add(dumbPanel, c);\n+\n+        setSize(300, 300);\n+    }\n+}\n+\n+\n+class Fake extends Canvas {\n+    public Fake(String name, Color what) {\n+        setBackground(what);\n+        setName(name);\n+    }\n+\n+    public void paint(Graphics g) {\n+        Dimension d = getSize();\n+        g.setColor(getBackground());\n+        g.fillRect(0, 0, d.width, d.height);\n+    }\n+}\n+\n+class DumbContainer extends Container {\n+    public DumbContainer() {\n+        setLayout(new BorderLayout());\n+        add(\"Center\", new Fake(\"dumbc\", Color.red));\n+    }\n+\n+    public void paint(Graphics g) {\n+        Dimension d = getSize();\n+        g.setColor(Color.green);\n+        g.fillRect(0, 0, d.width, d.height);\n+        super.paint(g);\n+    }\n+}\n+\n+class DumbPanel extends Panel {\n+    public DumbPanel() {\n+        setLayout(new BorderLayout());\n+        add(\"Center\", new Fake(\"dumbp\", Color.blue));\n+    }\n+\n+    public void paint(Graphics g) {\n+        Dimension d = getSize();\n+        g.setColor(Color.green);\n+        g.fillRect(0, 0, d.width, d.height);\n+        super.paint(g);\n+    }\n+}\n","filename":"test\/jdk\/java\/awt\/Frame\/FrameResizeTest\/FrameResizeTest_2.java","additions":144,"deletions":0,"binary":false,"changes":144,"status":"added"},{"patch":"@@ -0,0 +1,97 @@\n+\/*\n+ * Copyright (c) 1998, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.awt.Button;\n+import java.awt.Frame;\n+import java.awt.EventQueue;\n+import java.awt.Robot;\n+import javax.swing.JScrollPane;\n+import javax.swing.JTextArea;\n+\n+\/*\n+ * @test\n+ * @bug 4103095\n+ * @summary Test for getBounds() after a Frame resize.\n+ * @library \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame\n+ * @run main\/manual GetBoundsResizeTest\n+*\/\n+\n+public class GetBoundsResizeTest {\n+    private static final String INSTRUCTIONS = \"\"\"\n+            0. There is a test window with a \"Press\" button,\n+                Its original bounds should be printed in the text area below.\n+            1. Resize the test window using the upper left corner.\n+            2. Press the button to print the result of getBounds() to the text area.\n+            3. Previously, a window could report an incorrect position on the\n+                screen after resizing the window in this way.\n+                If getBounds() prints the appropriate values for the window,\n+                click Pass, otherwise click Fail.\n+            \"\"\";\n+\n+    private static JTextArea textArea;\n+    private static Frame frame;\n+\n+    public static void main(String[] args) throws Exception {\n+        Robot robot = new Robot();\n+\n+        PassFailJFrame passFailJFrame = PassFailJFrame\n+                .builder()\n+                .title(\"GetBoundsResizeTest Instructions\")\n+                .instructions(INSTRUCTIONS)\n+                .splitUIBottom(() -> {\n+                    textArea = new JTextArea(\"\", 8, 55);\n+                    textArea.setEditable(false);\n+                    return new JScrollPane(textArea);\n+                })\n+                .testUI(GetBoundsResizeTest::getFrame)\n+                .rows((int) (INSTRUCTIONS.lines().count() + 2))\n+                .columns(40)\n+                .build();\n+\n+        robot.waitForIdle();\n+        robot.delay(500);\n+\n+        EventQueue.invokeAndWait(() ->\n+                logFrameBounds(\"Original Frame.getBounds() = %s\\n\"));\n+\n+        passFailJFrame.awaitAndCheck();\n+    }\n+\n+    private static Frame getFrame() {\n+        frame = new Frame(\"GetBoundsResizeTest\");\n+\n+        Button button = new Button(\"Press\");\n+        button.addActionListener((e) ->\n+                logFrameBounds(\"Current Frame.getBounds() = %s\\n\"));\n+\n+        frame.add(button);\n+        frame.setSize(200, 100);\n+\n+        return frame;\n+    }\n+\n+    private static void logFrameBounds(String format) {\n+        textArea.append(format.formatted(frame.getBounds()));\n+    }\n+}\n","filename":"test\/jdk\/java\/awt\/Frame\/GetBoundsResizeTest.java","additions":97,"deletions":0,"binary":false,"changes":97,"status":"added"},{"patch":"@@ -1,168 +0,0 @@\n-\/*\n- * Copyright (c) 1998, 2014, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-\n-\/* @test\n-   @bug 4103095\n-   @summary Test for getBounds() after a Frame resize.\n-   @author andrei.dmitriev : area=awt.toplevel\n-   @run main\/manual GetBoundsResizeTest\n-*\/\n-\n-import java.applet.Applet;\n-import java.lang.*;\n-import java.awt.*;\n-import java.awt.event.*;\n-\n-class Globals {\n-  static boolean testPassed=false;\n-  static Thread mainThread=null;\n-}\n-\n-public class GetBoundsResizeTest extends Applet {\n-\n-  public static void main(String args[]) throws Exception {\n-    GetBoundsResizeTest app = new GetBoundsResizeTest();\n-    app.start();\n-    Globals.mainThread = Thread.currentThread();\n-    try {\n-      Thread.sleep(300000);\n-    } catch (InterruptedException e) {\n-      if (!Globals.testPassed)\n-        throw new Exception(\"GetBoundsResizeTest failed.\");\n-    }\n-  }\n-\n-  public void start()\n-  {\n-    String[] message = {\n-      \"Resize the window using the upper left corner.\",\n-      \"Press the button to print the result of getBounds() to the terminal.\",\n-      \"If getBounds() prints the correct values for the window\",\n-      \"then click Pass, else click Fail.\"\n-    };\n-    new TestDialog(new Frame(), \"GetBoundsResizeTest\", message).start();\n-    new GetBoundsResizeTester(\"GetBoundsResizeTester\").start();\n-  }\n-}\n-\n-\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n-\/\/  Test Dialog\n-\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n-\n-class TestDialog extends Dialog\n-    implements ActionListener {\n-\n-  static TextArea output;\n-  Button passButton;\n-  Button failButton;\n-  String name;\n-\n-  public TestDialog(Frame frame, String name, String[] message)\n-  {\n-    super(frame, name + \" Pass\/Fail Dialog\");\n-    this.name = name;\n-    int maxStringLength = 0;\n-    for (int i=0; i<message.length; i++) {\n-      maxStringLength = Math.max(maxStringLength, message[i].length());\n-    }\n-    output = new TextArea(10, maxStringLength);\n-    add(\"North\", output);\n-    for (int i=0; i<message.length; i++){\n-        output.append(message[i] + \"\\n\");\n-    }\n-    Panel buttonPanel = new Panel();\n-    passButton = new Button(\"Pass\");\n-    failButton = new Button(\"Fail\");\n-    passButton.addActionListener(this);\n-    failButton.addActionListener(this);\n-    buttonPanel.add(passButton);\n-    buttonPanel.add(failButton);\n-    add(\"South\", buttonPanel);\n-    pack();\n-  }\n-\n-  public void start()\n-  {\n-    show();\n-  }\n-\n-  public void actionPerformed(ActionEvent event)\n-  {\n-    if ( event.getSource() == passButton ) {\n-      Globals.testPassed = true;\n-      System.err.println(name + \" Passed.\");\n-    }\n-    else if ( event.getSource() == failButton ) {\n-      Globals.testPassed = false;\n-      System.err.println(name + \" Failed.\");\n-    }\n-    this.dispose();\n-    if (Globals.mainThread != null)\n-      Globals.mainThread.interrupt();\n-  }\n-}\n-\n-\n-  \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n-  \/\/  Test Class\n-  \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n-\n-class GetBoundsResizeTester extends Frame {\n-    Button b = new Button(\"Press\");\n-\n-  GetBoundsResizeTester(String name)\n-  {\n-    super(name);\n-    final Frame f = this;\n-    Panel p = new Panel();\n-    f.add(p);\n-    p.setLayout(new BorderLayout());\n-    b.addActionListener(new ActionListener() {\n-      public void actionPerformed(ActionEvent be){\n-        Point cp = b.getLocationOnScreen();\n-        TestDialog.output.append(\"Current Frame.getBounds() = \" + f.getBounds()+\"\\n\");\n-      }\n-    });\n-    p.add(\"Center\", b);\n-    f.pack();\n-  }\n-\n-  public void start ()\n-  {\n-      setVisible(true);\n-      Robot robot;\n-      try {\n-          robot = new Robot();\n-          robot.waitForIdle();\n-      }catch(Exception ignorex) {\n-      }\n-      Point cp = b.getLocationOnScreen();\n-      TestDialog.output.append(\"Original Frame.getBounds() = \" + this.getBounds()+\"\\n\");\n-  }\n-\n-  public static void main(String[] args)\n-  {\n-    new GetBoundsResizeTester(\"GetBoundsResizeTester\").start();\n-  }\n-\n-}\n","filename":"test\/jdk\/java\/awt\/Frame\/GetBoundsResizeTest\/GetBoundsResizeTest.java","additions":0,"deletions":168,"binary":false,"changes":168,"status":"deleted"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1999, 2014, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1999, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -43,5 +43,4 @@\n-    private int eventType, eventType1;\n-    private ExtendedRobot robot;\n-    private Object lock1 = new Object();\n-    private Object lock2 = new Object();\n-    private Object lock3 = new Object();\n+    private volatile int eventType;\n+    private final Object lock1 = new Object();\n+    private final Object lock2 = new Object();\n+    private final Object lock3 = new Object();\n@@ -49,1 +48,1 @@\n-    private int delay = 150;\n+    private final int delay = 150;\n@@ -53,1 +52,12 @@\n-        test.doTest();\n+        try {\n+            test.doTest();\n+        } finally {\n+            EventQueue.invokeLater(() -> {\n+                if (test.frame != null) {\n+                    test.frame.dispose();\n+                }\n+                if (test.frame2 != null) {\n+                    test.frame2.dispose();\n+                }\n+            });\n+        }\n@@ -108,1 +118,1 @@\n-                            lock2.notifyAll();\n+                        lock2.notifyAll();\n@@ -149,0 +159,1 @@\n+        ExtendedRobot robot;\n@@ -156,0 +167,3 @@\n+        robot.setAutoDelay(delay);\n+        robot.setAutoWaitForIdle(true);\n+\n@@ -159,4 +173,2 @@\n-        robot.waitForIdle(delay);\n-        robot.mousePress(InputEvent.BUTTON1_MASK);\n-        robot.waitForIdle(delay);\n-        robot.mouseRelease(InputEvent.BUTTON1_MASK);\n+        robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n+        robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n@@ -179,1 +191,0 @@\n-        eventType1 = -1;\n@@ -184,4 +195,2 @@\n-        robot.waitForIdle(delay);\n-        robot.mousePress(InputEvent.BUTTON1_MASK);\n-        robot.waitForIdle(delay);\n-        robot.mouseRelease(InputEvent.BUTTON1_MASK);\n+        robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n+        robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n","filename":"test\/jdk\/java\/awt\/Frame\/MiscUndecorated\/ActiveAWTWindowTest.java","additions":27,"deletions":18,"binary":false,"changes":45,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1999, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1999, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,2 +31,2 @@\n- * @library \/lib\/client\n- * @build ExtendedRobot\n+ * @library \/lib\/client \/test\/lib\n+ * @build ExtendedRobot jdk.test.lib.Platform\n@@ -36,0 +36,2 @@\n+import jdk.test.lib.Platform;\n+\n@@ -41,0 +43,1 @@\n+import java.awt.EventQueue;\n@@ -46,2 +49,0 @@\n-import java.awt.Toolkit;\n-import java.awt.event.*;\n@@ -52,0 +53,1 @@\n+import java.awt.event.ActionListener;\n@@ -60,1 +62,0 @@\n-    private Container panel1, panel2;\n@@ -65,2 +66,1 @@\n-    private boolean passed = true;\n-    private boolean buttonClicked = false;\n+    private volatile boolean buttonClicked = false;\n@@ -69,1 +69,1 @@\n-    public static void main(String[] args) {\n+    public static void main(String[] args) throws Exception {\n@@ -71,1 +71,0 @@\n-        test.doTest(false);\n@@ -73,8 +72,3 @@\n-            Toolkit.getDefaultToolkit().getSystemEventQueue().invokeAndWait(new Runnable() {\n-                public void run() {\n-                    test.frame.dispose();\n-                }\n-            });\n-        } catch (Exception e) {\n-            e.printStackTrace();\n-            throw new RuntimeException(\"Unexpected Exception occured\");\n+            test.doTest(false);\n+        } finally {\n+            EventQueue.invokeAndWait(test::dispose);\n@@ -82,1 +76,0 @@\n-        test.doTest(true);\n@@ -84,8 +77,3 @@\n-            Toolkit.getDefaultToolkit().getSystemEventQueue().invokeAndWait(new Runnable() {\n-                public void run() {\n-                    test.frame.dispose();\n-                }\n-            });\n-        } catch (Exception e) {\n-            e.printStackTrace();\n-            throw new RuntimeException(\"Unexpected Exception occured\");\n+            test.doTest(true);\n+        } finally {\n+            EventQueue.invokeAndWait(test::dispose);\n@@ -104,2 +92,2 @@\n-        panel1 = swingControl ? new JPanel() : new Panel();\n-        panel2 = swingControl ? new JPanel() : new Panel();\n+        Container panel1 = swingControl ? new JPanel() : new Panel();\n+        Container panel2 = swingControl ? new JPanel() : new Panel();\n@@ -115,0 +103,7 @@\n+\n+    private void dispose() {\n+        if (frame != null) {\n+            frame.dispose();\n+        }\n+    }\n+\n@@ -116,0 +111,12 @@\n+        ActionListener actionListener = e -> {\n+            buttonClicked = true;\n+            System.out.println(\"Clicked!!\");\n+            synchronized (buttonLock) {\n+                try {\n+                    buttonLock.notifyAll();\n+                } catch (Exception ex) {\n+                    ex.printStackTrace();\n+                }\n+            }\n+        };\n+\n@@ -118,12 +125,1 @@\n-            jbtn.addActionListener(new ActionListener() {\n-                public void actionPerformed(ActionEvent e) {\n-                    buttonClicked = true;\n-                    synchronized (buttonLock) {\n-                        try {\n-                            buttonLock.notifyAll();\n-                        } catch (Exception ex) {\n-                            ex.printStackTrace();\n-                        }\n-                    }\n-                }\n-            });\n+            jbtn.addActionListener(actionListener);\n@@ -133,12 +129,1 @@\n-            btn.addActionListener(new ActionListener() {\n-                public void actionPerformed(ActionEvent e) {\n-                    buttonClicked = true;\n-                    synchronized (buttonLock) {\n-                        try {\n-                            buttonLock.notifyAll();\n-                        } catch (Exception ex) {\n-                            ex.printStackTrace();\n-                        }\n-                    }\n-                }\n-            });\n+            btn.addActionListener(actionListener);\n@@ -149,18 +134,7 @@\n-    public void doTest(boolean swingControl) {\n-        try {\n-            Toolkit.getDefaultToolkit().getSystemEventQueue().invokeAndWait(new Runnable() {\n-                public void run() {\n-                    initializeGUI(swingControl);\n-                }\n-            });\n-        } catch (Exception e) {\n-            e.printStackTrace();\n-            throw new RuntimeException(\"Interrupted or unexpected Exception occured\");\n-        }\n-        try {\n-            robot = new ExtendedRobot();\n-            robot.waitForIdle(1000);\n-        } catch (Exception e) {\n-            e.printStackTrace();\n-            throw new RuntimeException(\"Cannot create robot\");\n-        }\n+    public void doTest(boolean swingControl) throws Exception {\n+\n+        robot = new ExtendedRobot();\n+        robot.setAutoDelay(50);\n+\n+        EventQueue.invokeAndWait(() -> initializeGUI(swingControl));\n+        robot.waitForIdle(1000);\n@@ -183,1 +157,0 @@\n-            passed = false;\n@@ -189,1 +162,1 @@\n-        robot.waitForIdle(delay * 5); \/\/ Need to wait until look of the button\n+        robot.waitForIdle(1000); \/\/ Need to wait until look of the button\n@@ -191,5 +164,3 @@\n-        passed = paintAndRepaint(button, (swingControl? \"J\": \"\")+\"Button\");\n-        if( !paintAndRepaint(button, (swingControl? \"J\": \"\")+\"TextField\") ) {\n-            passed = false;\n-        }\n-        if(!passed) {\n+\n+        if (!paintAndRepaint(button, (swingControl ? \"J\" : \"\") + \"Button\")\n+            || !paintAndRepaint(textField, (swingControl ? \"J\" : \"\") + \"TextField\")) {\n@@ -199,1 +170,2 @@\n-    private boolean paintAndRepaint(Component comp, String prefix) {\n+    private boolean paintAndRepaint(Component comp, String prefix) throws Exception {\n+        boolean passed = true;\n@@ -203,1 +175,1 @@\n-        System.out.println(\"paintAndRepaint \"+prefix);\n+        System.out.printf(\"paintAndRepaint %s %s\\n\", prefix, comp);\n@@ -208,10 +180,20 @@\n-\n-        try {\n-            Toolkit.getDefaultToolkit().getSystemEventQueue().invokeAndWait(new Runnable() {\n-                public void run() {\n-                    frame.setExtendedState(Frame.ICONIFIED);\n-                }\n-            });\n-        } catch (Exception e) {\n-            e.printStackTrace();\n-            throw new RuntimeException(\"Exception while setting extended state ICONIFIED\");\n+        BufferedImage frameImage = robot.createScreenCapture(frame.getBounds());\n+\n+        EventQueue.invokeAndWait(() -> frame.setExtendedState(Frame.ICONIFIED));\n+        robot.waitForIdle(1500);\n+        EventQueue.invokeAndWait(() -> frame.setExtendedState(Frame.NORMAL));\n+        robot.waitForIdle(1500);\n+\n+        if (Platform.isOnWayland()) {\n+            \/\/ Robot.mouseMove does not move the actual mouse cursor on the\n+            \/\/ screen in X11 compatibility mode on Wayland, but only within\n+            \/\/ the XWayland server.\n+            \/\/ This can cause the test to fail if the actual mouse cursor on\n+            \/\/ the screen is somewhere over the test window, so that when the\n+            \/\/ test window is restored from the iconified state, it's detected\n+            \/\/ that the mouse cursor has moved to the mouse cursor position on\n+            \/\/ the screen, and is no longer hovering over the button, so the\n+            \/\/ button is painted differently.\n+            robot.mouseMove(button.getLocationOnScreen().x + button.getSize().width \/ 2,\n+                    button.getLocationOnScreen().y + button.getSize().height \/ 2);\n+            robot.waitForIdle();\n@@ -219,12 +201,0 @@\n-        robot.waitForIdle(delay * 5);\n-        try {\n-            Toolkit.getDefaultToolkit().getSystemEventQueue().invokeAndWait(new Runnable() {\n-                public void run() {\n-                    frame.setExtendedState(Frame.NORMAL);\n-                }\n-            });\n-        } catch (Exception e) {\n-            e.printStackTrace();\n-            throw new RuntimeException(\"Exception while setting extended state NORMAL\");\n-        }\n-        robot.waitForIdle(delay * 5);\n@@ -241,0 +211,1 @@\n+        BufferedImage frameImage2 = robot.createScreenCapture(frame.getBounds());\n@@ -242,1 +213,1 @@\n-        if (! compareImages(capturedImage, capturedImage2)) {\n+        if (!compareImages(capturedImage, capturedImage2)) {\n@@ -244,0 +215,1 @@\n+\n@@ -245,4 +217,8 @@\n-                javax.imageio.ImageIO.write(capturedImage, \"jpg\", new File(\n-                                   prefix+\"BeforeMinimize.jpg\"));\n-                javax.imageio.ImageIO.write(capturedImage2, \"jpg\", new File(\n-                                   prefix+\"AfterMinimize.jpg\"));\n+                javax.imageio.ImageIO.write(capturedImage, \"png\",\n+                        new File(prefix + \"BeforeMinimize.png\"));\n+                javax.imageio.ImageIO.write(capturedImage2, \"png\",\n+                        new File(prefix + \"AfterMinimize.png\"));\n+                javax.imageio.ImageIO.write(frameImage, \"png\",\n+                        new File(\"Frame\" + prefix + \"BeforeMinimize.png\"));\n+                javax.imageio.ImageIO.write(frameImage2, \"png\",\n+                        new File(\"Frame\" + prefix + \"AfterMinimize.png\"));\n","filename":"test\/jdk\/java\/awt\/Frame\/MiscUndecorated\/RepaintTest.java","additions":83,"deletions":107,"binary":false,"changes":190,"status":"modified"},{"patch":"@@ -0,0 +1,166 @@\n+\/*\n+ * Copyright (c) 1998, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.awt.Color;\n+import java.awt.EventQueue;\n+import java.awt.Frame;\n+import java.awt.Rectangle;\n+import java.awt.Robot;\n+import java.awt.event.WindowEvent;\n+import java.awt.event.WindowListener;\n+import java.util.concurrent.CountDownLatch;\n+import java.util.concurrent.TimeUnit;\n+\n+\/*\n+ * @test\n+ * @bug 4077874\n+ * @key headful\n+ * @summary Test window position at opening, closing, and closed for consistency\n+ *\/\n+\n+public class WindowMoveTest {\n+\n+    static WindowMove frame;\n+    public static void main(String[] args) throws Exception {\n+        Robot robot = new Robot();\n+        robot.setAutoDelay(50);\n+        robot.setAutoWaitForIdle(true);\n+\n+        EventQueue.invokeAndWait(() -> frame = new WindowMove());\n+\n+        robot.waitForIdle();\n+        robot.delay(1000);\n+\n+        EventQueue.invokeAndWait(() ->\n+                frame.dispatchEvent(new WindowEvent(frame, WindowEvent.WINDOW_CLOSING)));\n+\n+        if (!WindowMove.latch.await(2, TimeUnit.SECONDS)) {\n+            throw new RuntimeException(\"Test timeout.\");\n+        }\n+\n+        if (WindowMove.failMessage != null) {\n+            throw new RuntimeException(WindowMove.failMessage);\n+        }\n+    }\n+}\n+\n+class WindowMove extends Frame implements WindowListener {\n+    static final Rectangle expectedBounds =\n+            new Rectangle(100, 100, 300, 300);\n+\n+    static CountDownLatch latch = new CountDownLatch(1);\n+    static String failMessage = null;\n+\n+    private boolean layoutCheck;\n+    private boolean visibleCheck;\n+    private boolean openedCheck;\n+    private boolean closingCheck;\n+    private boolean closedCheck;\n+\n+    public WindowMove() {\n+        super(\"WindowMove\");\n+        addWindowListener(this);\n+\n+        setSize(300, 300);\n+        setLocation(100, 100);\n+        setBackground(Color.white);\n+\n+        setLayout(null);\n+        if (checkBounds()) {\n+            layoutCheck = true;\n+        }\n+        System.out.println(\"setLayout bounds: \" + getBounds());\n+\n+        setVisible(true);\n+        if (checkBounds()) {\n+            visibleCheck = true;\n+        }\n+        System.out.println(\"setVisible bounds: \" + getBounds());\n+    }\n+\n+    private boolean checkBounds() {\n+        return getBounds().equals(expectedBounds);\n+    }\n+\n+    public void checkResult() {\n+        if (layoutCheck\n+                && visibleCheck\n+                && openedCheck\n+                && closingCheck\n+                && closedCheck) {\n+            System.out.println(\"Test passed.\");\n+        } else {\n+            failMessage = \"\"\"\n+                    Some of the checks failed:\n+                    layoutCheck %s\n+                    visibleCheck %s\n+                    openedCheck %s\n+                    closingCheck %s\n+                    closedCheck %s\n+                    \"\"\"\n+                    .formatted(\n+                            layoutCheck,\n+                            visibleCheck,\n+                            openedCheck,\n+                            closingCheck,\n+                            closedCheck\n+                    );\n+        }\n+\n+        latch.countDown();\n+    }\n+\n+    public void windowClosing(WindowEvent evt) {\n+        if (checkBounds()) {\n+            closingCheck = true;\n+        }\n+        System.out.println(\"Closing bounds: \" + getBounds());\n+\n+        setVisible(false);\n+        dispose();\n+    }\n+\n+    public void windowClosed(WindowEvent evt) {\n+        if (checkBounds()) {\n+            closedCheck = true;\n+        }\n+        System.out.println(\"Closed bounds: \" + getBounds());\n+\n+        checkResult();\n+    }\n+\n+    public void windowOpened(WindowEvent evt) {\n+        if (checkBounds()) {\n+            openedCheck = true;\n+        }\n+        System.out.println(\"Opening bounds: \" + getBounds());\n+    }\n+\n+    public void windowActivated(WindowEvent evt) {}\n+\n+    public void windowIconified(WindowEvent evt) {}\n+\n+    public void windowDeactivated(WindowEvent evt) {}\n+\n+    public void windowDeiconified(WindowEvent evt) {}\n+}\n","filename":"test\/jdk\/java\/awt\/Frame\/WindowMoveTest.java","additions":166,"deletions":0,"binary":false,"changes":166,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2006, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2006, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -36,3 +36,9 @@\n-import java.awt.*;\n-import javax.swing.*;\n-import java.awt.event.*;\n+import javax.swing.JFrame;\n+import javax.swing.JMenu;\n+import javax.swing.JMenuBar;\n+import javax.swing.JMenuItem;\n+import javax.swing.JTextField;\n+import javax.swing.SwingUtilities;\n+import java.awt.Robot;\n+import java.awt.event.KeyEvent;\n+import java.awt.event.MouseEvent;\n@@ -41,14 +47,10 @@\n-    Robot robot;\n-    JFrame frame = new JFrame(\"Test Frame\");\n-    JTextField text = new JTextField();\n-    JMenuBar bar = new JMenuBar();\n-    JMenu menu = new JMenu(\"Menu\");\n-    JMenuItem item = new JMenuItem(\"item\");\n-\n-    public static void main(String[] args) {\n-        ConsumeNextMnemonicKeyTypedTest app = new ConsumeNextMnemonicKeyTypedTest();\n-        app.init();\n-        app.start();\n-    }\n-\n-    public void init() {\n+    static Robot robot;\n+    static JFrame frame;\n+    static JTextField text;\n+    static JMenuBar bar;\n+    static JMenu menu;\n+    static JMenuItem item;\n+\n+    public static void main(String[] args) throws Exception {\n+        robot = new Robot();\n+        robot.setAutoDelay(50);\n@@ -56,4 +58,12 @@\n-            robot = new Robot();\n-            robot.setAutoDelay(50);\n-        } catch (AWTException e) {\n-            throw new RuntimeException(\"Error: unable to create robot\", e);\n+            SwingUtilities.invokeAndWait(ConsumeNextMnemonicKeyTypedTest::init);\n+\n+            robot.waitForIdle();\n+            robot.delay(500);\n+\n+            test();\n+        } finally {\n+            SwingUtilities.invokeAndWait(() -> {\n+                if (frame != null) {\n+                    frame.dispose();\n+                }\n+            });\n@@ -63,1 +73,7 @@\n-    public void start() {\n+    public static void init() {\n+        frame = new JFrame(\"Test Frame\");\n+        text = new JTextField();\n+        bar = new JMenuBar();\n+        menu = new JMenu(\"Menu\");\n+        item = new JMenuItem(\"item\");\n+\n@@ -75,2 +91,0 @@\n-\n-        test();\n@@ -79,1 +93,1 @@\n-    void test() {\n+    static void test() {\n@@ -86,1 +100,1 @@\n-            robot.mousePress(MouseEvent.BUTTON1_MASK);\n+            robot.mousePress(MouseEvent.BUTTON1_DOWN_MASK);\n@@ -88,1 +102,1 @@\n-            robot.mouseRelease(MouseEvent.BUTTON1_MASK);\n+            robot.mouseRelease(MouseEvent.BUTTON1_DOWN_MASK);\n@@ -149,1 +163,1 @@\n-        System.err.println(\"Test: chracter typed with VK_A: \" + text.getText());\n+        System.err.println(\"Test: character typed with VK_A: \" + text.getText());\n","filename":"test\/jdk\/java\/awt\/KeyboardFocusmanager\/ConsumeNextMnemonicKeyTypedTest\/ConsumeNextMnemonicKeyTypedTest.java","additions":43,"deletions":29,"binary":false,"changes":72,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2006, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2006, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,13 +24,0 @@\n-\/*\n-  @test\n-  @key headful\n-  @bug 6380743 8158380 8198624\n-  @summary Submenu should be shown by mnemonic key press.\n-  @author anton.tarasov@...: area=awt.focus\n-  @library ..\/..\/..\/regtesthelpers\n-  @library \/test\/lib\n-  @build Util\n-  @build jdk.test.lib.Platform\n-  @run main SubMenuShowTest\n-*\/\n-\n@@ -51,0 +38,11 @@\n+\/*\n+  @test\n+  @key headful\n+  @bug 6380743 8158380 8198624\n+  @summary Submenu should be shown by mnemonic key press.\n+  @library \/java\/awt\/regtesthelpers\n+  @library \/test\/lib\n+  @build Util\n+  @build jdk.test.lib.Platform\n+  @run main SubMenuShowTest\n+*\/\n@@ -119,0 +117,2 @@\n+        robot.waitForIdle();\n+        robot.delay(1000);\n","filename":"test\/jdk\/java\/awt\/KeyboardFocusmanager\/TypeAhead\/SubMenuShowTest\/SubMenuShowTest.java","additions":14,"deletions":14,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -0,0 +1,120 @@\n+\/*\n+ * Copyright (c) 1998, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.awt.Color;\n+import java.awt.Component;\n+import java.awt.Container;\n+import java.awt.Dimension;\n+import java.awt.EventQueue;\n+import java.awt.FlowLayout;\n+import java.awt.Frame;\n+import java.awt.Graphics;\n+import java.awt.Rectangle;\n+import java.awt.Shape;\n+\n+\/*\n+ * @test\n+ * @bug 4116029\n+ * @summary drawString does not honor clipping regions for lightweight components\n+ * @library \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame\n+ * @run main\/manual LightweightCliprect\n+ *\/\n+\n+public class LightweightCliprect {\n+\n+    private static final String INSTRUCTIONS = \"\"\"\n+            If some text is drawn outside the red rectangle, press \"Fail\" button.\n+            Otherwise, press \"Pass\" button.\n+            \"\"\";\n+\n+    public static void main(String[] args) throws Exception {\n+        PassFailJFrame passFailJFrame = new PassFailJFrame.Builder()\n+                .title(\"LightweightCliprect Instructions Frame\")\n+                .instructions(INSTRUCTIONS)\n+                .testTimeOut(5)\n+                .rows(10)\n+                .columns(45)\n+                .build();\n+\n+        EventQueue.invokeAndWait(() -> {\n+            Frame frame = new Frame(\"DefaultSize\");\n+\n+            Container panel = new MyContainer();\n+            MyComponent c = new MyComponent();\n+            panel.add(c);\n+\n+            frame.add(panel);\n+            frame.setSize(400, 300);\n+\n+            PassFailJFrame.addTestWindow(frame);\n+            PassFailJFrame\n+                    .positionTestWindow(frame, PassFailJFrame.Position.HORIZONTAL);\n+\n+            frame.setVisible(true);\n+        });\n+\n+        passFailJFrame.awaitAndCheck();\n+    }\n+}\n+\n+class MyComponent extends Component {\n+\n+    public void paint(Graphics g) {\n+        Color c = g.getColor();\n+        g.setColor(Color.red);\n+        g.fillRect(20, 20, 400, 200);\n+        Shape clip = g.getClip();\n+        g.setClip(20, 20, 400, 200);\n+        \/\/draw the current java version in the component\n+        g.setColor(Color.black);\n+        String version = System.getProperty(\"java.version\");\n+        String vendor = System.getProperty(\"java.vendor\");\n+        int y = 10;\n+        for(int i = 0; i < 30; i++) {\n+            g.drawString(\"Lightweight: Java version: \" + version +\n+                         \", Vendor: \" + vendor, 10, y += 20);\n+        }\n+        g.setColor(c);\n+        g.setClip(clip);\n+        super.paint(g);\n+    }\n+\n+    public Dimension getPreferredSize() {\n+        return new Dimension(300, 300);\n+    }\n+}\n+\n+class MyContainer extends Container {\n+    public MyContainer() {\n+        super();\n+        setLayout(new FlowLayout());\n+    }\n+\n+    public void paint(Graphics g) {\n+        Rectangle bounds = new Rectangle(getSize());\n+        g.setColor(Color.cyan);\n+        g.drawRect(bounds.x, bounds.y, bounds.width - 1, bounds.height - 1);\n+        super.paint(g);\n+    }\n+}\n","filename":"test\/jdk\/java\/awt\/LightweightComponent\/LightweightCliprect.java","additions":120,"deletions":0,"binary":false,"changes":120,"status":"added"},{"patch":"@@ -32,1 +32,1 @@\n-import java.awt.AWTException;\n+import java.awt.EventQueue;\n@@ -38,1 +38,0 @@\n-import java.awt.event.ActionListener;\n@@ -40,0 +39,2 @@\n+import java.util.concurrent.CountDownLatch;\n+import java.util.concurrent.TimeUnit;\n@@ -41,3 +42,0 @@\n-public class ActionEventTest extends Frame {\n-    List list;\n-    Robot robot;\n@@ -45,8 +43,5 @@\n-    public ActionEventTest() {\n-        try {\n-            robot = new Robot();\n-            robot.setAutoDelay(100);\n-            robot.setAutoWaitForIdle(true);\n-        } catch(AWTException e) {\n-            throw new RuntimeException(e.getMessage());\n-        }\n+public class ActionEventTest {\n+\n+    static List list;\n+    static Frame frame;\n+    static Robot robot;\n@@ -54,0 +49,4 @@\n+    static final CountDownLatch countDownLatch = new CountDownLatch(1);\n+    static volatile boolean failed;\n+\n+    static void initAndShowGui() {\n@@ -56,7 +55,0 @@\n-        add(list);\n-        setSize(400,400);\n-        setLayout(new FlowLayout());\n-        setLocationRelativeTo(null);\n-        pack();\n-        setVisible(true);\n-    }\n@@ -64,17 +56,7 @@\n-    void performTest() {\n-        list.addActionListener(new ActionListener() {\n-            @Override\n-            public void actionPerformed(ActionEvent ae) {\n-                int md = ae.getModifiers();\n-                int expectedMask = ActionEvent.ALT_MASK | ActionEvent.CTRL_MASK\n-                        | ActionEvent.SHIFT_MASK;\n-\n-                if ((md & expectedMask) != expectedMask) {\n-\n-                    robot.keyRelease(KeyEvent.VK_CONTROL);\n-                    robot.keyRelease(KeyEvent.VK_SHIFT);\n-                    robot.keyRelease(KeyEvent.VK_ALT);\n-                    dispose();\n-                    throw new RuntimeException(\"Action Event modifiers are not\"\n-                        + \" set correctly.\");\n-                }\n+        list.addActionListener(ae -> {\n+            int md = ae.getModifiers();\n+            int expectedMask = ActionEvent.ALT_MASK | ActionEvent.CTRL_MASK\n+                    | ActionEvent.SHIFT_MASK;\n+\n+            if ((md & expectedMask) != expectedMask) {\n+                failed = true;\n@@ -82,0 +64,1 @@\n+            countDownLatch.countDown();\n@@ -84,0 +67,7 @@\n+        frame = new Frame(\"ActionEventTest\");\n+        frame.add(list);\n+        frame.setSize(400, 400);\n+        frame.setLayout(new FlowLayout());\n+        frame.setLocationRelativeTo(null);\n+        frame.pack();\n+        frame.setVisible(true);\n@@ -85,0 +75,6 @@\n+    }\n+\n+    static void performTest() {\n+        robot.waitForIdle();\n+        robot.delay(500);\n+\n@@ -96,4 +92,24 @@\n-    public static void main(String args[]) {\n-       ActionEventTest test = new ActionEventTest();\n-       test.performTest();\n-       test.dispose();\n+    public static void main(String[] args) throws Exception {\n+        robot = new Robot();\n+        robot.setAutoDelay(100);\n+        robot.setAutoWaitForIdle(true);\n+\n+        try {\n+            EventQueue.invokeAndWait(ActionEventTest::initAndShowGui);\n+            performTest();\n+        } finally {\n+            EventQueue.invokeAndWait(() -> {\n+                if (frame != null) {\n+                    frame.dispose();\n+                }\n+            });\n+        }\n+\n+        if (!countDownLatch.await(10, TimeUnit.SECONDS)) {\n+            throw new RuntimeException(\"Action Listener is not triggered\");\n+        }\n+\n+        if (failed) {\n+            throw new RuntimeException(\"Action Event modifiers are not\"\n+                    + \" set correctly.\");\n+        }\n","filename":"test\/jdk\/java\/awt\/List\/ActionEventTest\/ActionEventTest.java","additions":57,"deletions":41,"binary":false,"changes":98,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -35,3 +35,15 @@\n-import java.awt.*;\n-import java.awt.event.*;\n-import java.lang.reflect.*;\n+import java.awt.BorderLayout;\n+import java.awt.EventQueue;\n+import java.awt.KeyboardFocusManager;\n+import java.awt.Frame;\n+import java.awt.List;\n+import java.awt.Panel;\n+import java.awt.Point;\n+import java.awt.Robot;\n+import java.awt.event.FocusEvent;\n+import java.awt.event.FocusListener;\n+import java.awt.event.InputEvent;\n+import java.awt.event.ItemEvent;\n+import java.awt.event.ItemListener;\n+import java.awt.event.KeyEvent;\n+import java.awt.event.KeyListener;\n@@ -41,2 +53,1 @@\n-public class KeyEventsTest extends Frame implements ItemListener, FocusListener, KeyListener\n-{\n+public class KeyEventsTest {\n@@ -47,2 +58,2 @@\n-    List single = new List(3, false);\n-    List multiple = new List(3, true);\n+    List single;\n+    List multiple;\n@@ -50,2 +61,1 @@\n-    Panel p1 = new Panel ();\n-    Panel p2 = new Panel ();\n+    KeyFrame keyFrame;\n@@ -53,1 +63,4 @@\n-    public static void main(final String[] args) {\n+    static Robot r;\n+\n+    public static void main(final String[] args) throws Exception {\n+        r = new Robot();\n@@ -55,2 +68,40 @@\n-        app.init();\n-        app.start();\n+        try {\n+            EventQueue.invokeAndWait(app::initAndShowGui);\n+            r.waitForIdle();\n+            r.delay(500);\n+            app.doTest();\n+        } finally {\n+            EventQueue.invokeAndWait(() -> {\n+                if (app.keyFrame != null) {\n+                    app.keyFrame.dispose();\n+                }\n+            });\n+        }\n+    }\n+\n+    class KeyFrame extends Frame implements ItemListener, FocusListener, KeyListener {\n+        public void itemStateChanged(ItemEvent ie) {\n+            System.out.println(\"itemStateChanged-\" + ie);\n+            currentState.setAction(true);\n+        }\n+\n+        public void focusGained(FocusEvent e) {\n+            synchronized (LOCK) {\n+                LOCK.notifyAll();\n+            }\n+        }\n+\n+        public void focusLost(FocusEvent e) {\n+        }\n+\n+        public void keyPressed(KeyEvent e) {\n+            System.out.println(\"keyPressed-\" + e);\n+        }\n+\n+        public void keyReleased(KeyEvent e) {\n+            System.out.println(\"keyReleased-\" + e);\n+        }\n+\n+        public void keyTyped(KeyEvent e) {\n+            System.out.println(\"keyTyped-\" + e);\n+        }\n@@ -59,3 +110,6 @@\n-    public void init()\n-    {\n-        setLayout (new BorderLayout ());\n+    public void initAndShowGui() {\n+        keyFrame = new KeyFrame();\n+        keyFrame.setLayout(new BorderLayout ());\n+\n+        single = new List(3, false);\n+        multiple = new List(3, true);\n@@ -83,3 +137,4 @@\n-        single.addKeyListener(this);\n-        single.addItemListener(this);\n-        single.addFocusListener(this);\n+        single.addKeyListener(keyFrame);\n+        single.addItemListener(keyFrame);\n+        single.addFocusListener(keyFrame);\n+        Panel p1 = new Panel();\n@@ -87,1 +142,1 @@\n-        add(\"North\", p1);\n+        keyFrame.add(\"North\", p1);\n@@ -89,3 +144,4 @@\n-        multiple.addKeyListener(this);\n-        multiple.addItemListener(this);\n-        multiple.addFocusListener(this);\n+        multiple.addKeyListener(keyFrame);\n+        multiple.addItemListener(keyFrame);\n+        multiple.addFocusListener(keyFrame);\n+        Panel p2 = new Panel();\n@@ -93,20 +149,1 @@\n-        add(\"South\", p2);\n-\n-    }\/\/End  init()\n-\n-    public void start ()\n-    {\n-\n-        try{\n-            setSize (200,200);\n-            validate();\n-            setUndecorated(true);\n-            setLocationRelativeTo(null);\n-            setVisible(true);\n-\n-            doTest();\n-            System.out.println(\"Test passed.\");\n-        } catch (Exception e) {\n-            e.printStackTrace();\n-            throw new RuntimeException(\"The test failed.\");\n-        }\n+        keyFrame.add(\"South\", p2);\n@@ -114,5 +151,5 @@\n-    }\/\/ start()\n-\n-    public void itemStateChanged (ItemEvent ie) {\n-        System.out.println(\"itemStateChanged-\"+ie);\n-        this.currentState.setAction(true);\n+        keyFrame.setSize(200, 200);\n+        keyFrame.validate();\n+        keyFrame.setUndecorated(true);\n+        keyFrame.setLocationRelativeTo(null);\n+        keyFrame.setVisible(true);\n@@ -121,2 +158,1 @@\n-    public void focusGained(FocusEvent e){\n-\n+    private void test(TestState currentState) throws Exception {\n@@ -124,25 +160,0 @@\n-            LOCK.notifyAll();\n-        }\n-\n-    }\n-\n-    public void focusLost(FocusEvent e){\n-    }\n-\n-    public void keyPressed(KeyEvent e){\n-        System.out.println(\"keyPressed-\"+e);\n-    }\n-\n-    public void keyReleased(KeyEvent e){\n-        System.out.println(\"keyReleased-\"+e);\n-    }\n-\n-    public void keyTyped(KeyEvent e){\n-        System.out.println(\"keyTyped-\"+e);\n-    }\n-\n-    private void test(TestState currentState)\n-      throws InterruptedException, InvocationTargetException {\n-\n-        synchronized (LOCK) {\n-\n@@ -153,1 +164,1 @@\n-            if (currentState.getMultiple()){\n+            if (currentState.getMultiple()) {\n@@ -155,1 +166,1 @@\n-            }else{\n+            } else {\n@@ -159,7 +170,0 @@\n-            Robot r;\n-            try {\n-                r = new Robot();\n-            } catch(AWTException e) {\n-                throw new RuntimeException(e.getMessage());\n-            }\n-\n@@ -167,1 +171,1 @@\n-            Point loc = this.getLocationOnScreen();\n+            Point loc = keyFrame.getLocationOnScreen();\n@@ -169,2 +173,2 @@\n-            r.mouseMove(loc.x+10, loc.y+10);\n-            r.mousePress(InputEvent.BUTTON1_MASK);\n+            r.mouseMove(loc.x + 10, loc.y + 10);\n+            r.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n@@ -172,1 +176,1 @@\n-            r.mouseRelease(InputEvent.BUTTON1_MASK);\n+            r.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n@@ -177,0 +181,2 @@\n+            r.waitForIdle();\n+\n@@ -181,34 +187,21 @@\n-            list.deselect(0);\n-            list.deselect(1);\n-            list.deselect(2);\n-            list.deselect(3);\n-            list.deselect(4);\n-            list.deselect(5);\n-            list.deselect(6);\n-            list.deselect(7);\n-            list.deselect(8);\n-\n-            int selectIndex = 0;\n-            int visibleIndex = 0;\n-\n-            if (currentState.getScrollMoved()){\n-\n-                if (currentState.getKeyID() == KeyEvent.VK_PAGE_UP ||\n-                    currentState.getKeyID() == KeyEvent.VK_HOME){\n-                    selectIndex = 8;\n-                    visibleIndex = 8;\n-                }else if (currentState.getKeyID() == KeyEvent.VK_PAGE_DOWN ||\n-                    currentState.getKeyID() == KeyEvent.VK_END){\n-                    selectIndex = 0;\n-                    visibleIndex = 0;\n-                }\n-\n-            }else{\n-\n-                if (currentState.getKeyID() == KeyEvent.VK_PAGE_UP ||\n-                    currentState.getKeyID() == KeyEvent.VK_HOME){\n-\n-                    if (currentState.getSelectedMoved()){\n-                        selectIndex = 1;\n-                        visibleIndex = 0;\n-                    }else{\n+            EventQueue.invokeAndWait(() -> {\n+                list.deselect(0);\n+                list.deselect(1);\n+                list.deselect(2);\n+                list.deselect(3);\n+                list.deselect(4);\n+                list.deselect(5);\n+                list.deselect(6);\n+                list.deselect(7);\n+                list.deselect(8);\n+\n+                int selectIndex = 0;\n+                int visibleIndex = 0;\n+\n+                if (currentState.getScrollMoved()) {\n+                    if (currentState.getKeyID() == KeyEvent.VK_PAGE_UP ||\n+                            currentState.getKeyID() == KeyEvent.VK_HOME) {\n+                        selectIndex = 8;\n+                        visibleIndex = 8;\n+                    } else if (currentState.getKeyID() == KeyEvent.VK_PAGE_DOWN ||\n+                            currentState.getKeyID() == KeyEvent.VK_END) {\n@@ -218,9 +211,16 @@\n-\n-                }else if (currentState.getKeyID() == KeyEvent.VK_PAGE_DOWN ||\n-                    currentState.getKeyID() == KeyEvent.VK_END){\n-\n-                    if (currentState.getSelectedMoved()){\n-                        selectIndex = 7;\n-                        visibleIndex = 8;\n-                    }else{\n-                        selectIndex = 8;\n+                } else {\n+                    if (currentState.getKeyID() == KeyEvent.VK_PAGE_UP ||\n+                            currentState.getKeyID() == KeyEvent.VK_HOME) {\n+                        if (currentState.getSelectedMoved()) {\n+                            selectIndex = 1;\n+                        } else {\n+                            selectIndex = 0;\n+                        }\n+                        visibleIndex = 0;\n+                    } else if (currentState.getKeyID() == KeyEvent.VK_PAGE_DOWN ||\n+                            currentState.getKeyID() == KeyEvent.VK_END) {\n+                        if (currentState.getSelectedMoved()) {\n+                            selectIndex = 7;\n+                        } else {\n+                            selectIndex = 8;\n+                        }\n@@ -229,1 +229,0 @@\n-\n@@ -231,5 +230,3 @@\n-\n-            }\n-\n-            list.select(selectIndex);\n-            list.makeVisible(visibleIndex);\n+                list.select(selectIndex);\n+                list.makeVisible(visibleIndex);\n+            });\n@@ -238,0 +235,1 @@\n+            r.waitForIdle();\n@@ -262,1 +260,0 @@\n-\n@@ -265,2 +262,1 @@\n-    private void doTest()\n-      throws InterruptedException, InvocationTargetException {\n+    private void doTest() throws Exception {\n@@ -313,1 +309,1 @@\n-class TestState{\n+class TestState {\n@@ -315,1 +311,1 @@\n-    private boolean multiple;\n+    private final boolean multiple;\n","filename":"test\/jdk\/java\/awt\/List\/KeyEventsTest\/KeyEventsTest.java","additions":138,"deletions":142,"binary":false,"changes":280,"status":"modified"},{"patch":"@@ -0,0 +1,104 @@\n+\/*\n+ * Copyright (c) 1998, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.awt.Frame;\n+import java.awt.Menu;\n+import java.awt.MenuBar;\n+import java.awt.event.MouseAdapter;\n+import java.awt.event.MouseEvent;\n+import javax.swing.SwingUtilities;\n+\n+\/*\n+ * @test\n+ * @bug 4028130\n+ * @summary Test dynamically adding and removing a menu bar\n+ * @library \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame\n+ * @run main\/manual AddRemoveMenuBarTest_1\n+ *\/\n+\n+public class AddRemoveMenuBarTest_1 {\n+\n+    private static final String INSTRUCTIONS = \"\"\"\n+        An initially empty frame should appear.\n+\n+        Click anywhere in the frame to add a menu bar at the top of the frame.\n+\n+        Click again to replace the menu bar with another menu bar.\n+\n+        Each menu bar has one (empty) menu, labelled with the\n+        number of the menu bar appearing.\n+\n+        After a menubar is added, the frame should not be resized nor repositioned\n+        on the screen;\n+\n+        it should have the same size and position.\n+\n+        Upon test completion, click Pass or Fail appropriately.\n+        \"\"\";\n+\n+    public static void main(String[] args) throws Exception {\n+        PassFailJFrame passFailJFrame = new PassFailJFrame.Builder()\n+                .title(\"AddRemoveMenuBarTest_1 Instructions\")\n+                .instructions(INSTRUCTIONS)\n+                .testTimeOut(5)\n+                .rows(18)\n+                .columns(45)\n+                .build();\n+\n+        SwingUtilities.invokeAndWait(() -> {\n+            AddRemoveMenuBar_1 frame = new AddRemoveMenuBar_1();\n+\n+            PassFailJFrame.addTestWindow(frame);\n+            PassFailJFrame.positionTestWindow(frame,\n+                    PassFailJFrame.Position.HORIZONTAL);\n+\n+            frame.setVisible(true);\n+        });\n+\n+        passFailJFrame.awaitAndCheck();\n+    }\n+}\n+\n+class AddRemoveMenuBar_1 extends Frame {\n+    int menuCount;\n+\n+    AddRemoveMenuBar_1() {\n+        super(\"AddRemoveMenuBar_1\");\n+        setSize(200, 200);\n+        menuCount = 0;\n+\n+        addMouseListener(new MouseAdapter() {\n+            @Override\n+            public void mouseClicked(MouseEvent e) {\n+                setMenuBar();\n+            }\n+        });\n+    }\n+\n+    void setMenuBar() {\n+        MenuBar bar = new MenuBar();\n+        bar.add(new Menu(Integer.toString(menuCount++)));\n+        setMenuBar(bar);\n+    }\n+}\n","filename":"test\/jdk\/java\/awt\/MenuBar\/AddRemoveMenuBarTests\/AddRemoveMenuBarTest_1.java","additions":104,"deletions":0,"binary":false,"changes":104,"status":"added"},{"patch":"@@ -0,0 +1,99 @@\n+\/*\n+ * Copyright (c) 1998, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.awt.Frame;\n+import java.awt.Menu;\n+import java.awt.MenuBar;\n+import java.awt.event.MouseAdapter;\n+import java.awt.event.MouseEvent;\n+import javax.swing.SwingUtilities;\n+\n+\/*\n+ * @test\n+ * @bug 4028130\n+ * @key headful\n+ * @summary Test dynamically adding and removing a menu bar\n+ * @library \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame\n+ * @run main\/manual AddRemoveMenuBarTest_2\n+ *\/\n+\n+public class AddRemoveMenuBarTest_2 {\n+    private static final String INSTRUCTIONS = \"\"\"\n+            A frame with a menu bar appears.\n+\n+            Click anywhere in the frame to replace the menu bar with\n+            another one.\n+\n+            Each menu bar has one (empty) menu, 'foo'.\n+\n+            After the menu bar replacement, the containing frame\n+            should not be resized nor repositioned on the screen.\n+\n+            Upon test completion, click Pass or Fail appropriately.\n+            \"\"\";\n+\n+    public static void main(String[] args) throws Exception {\n+        PassFailJFrame passFailJFrame = new PassFailJFrame.Builder()\n+                .title(\"AddRemoveMenuBarTest_2 Instructions\")\n+                .instructions(INSTRUCTIONS)\n+                .testTimeOut(5)\n+                .rows(15)\n+                .columns(45)\n+                .build();\n+\n+        SwingUtilities.invokeAndWait(() -> {\n+            AddRemoveMenuBar_2 frame = new AddRemoveMenuBar_2();\n+\n+            PassFailJFrame.addTestWindow(frame);\n+            PassFailJFrame.positionTestWindow(frame,\n+                    PassFailJFrame.Position.HORIZONTAL);\n+\n+            frame.setVisible(true);\n+        });\n+\n+        passFailJFrame.awaitAndCheck();\n+    }\n+}\n+\n+class AddRemoveMenuBar_2 extends Frame {\n+    AddRemoveMenuBar_2() {\n+        super(\"AddRemoveMenuBar_2\");\n+        setSize(200, 200);\n+        setMenuBar();\n+        addMouseListener(new MouseAdapter() {\n+            @Override\n+            public void mouseClicked(MouseEvent e) {\n+                setMenuBar();\n+            }\n+        });\n+    }\n+\n+    int count = 0;\n+\n+    void setMenuBar() {\n+        MenuBar bar = new MenuBar();\n+        bar.add(new Menu(\"foo \" + count++));\n+        super.setMenuBar(bar);\n+    }\n+}\n","filename":"test\/jdk\/java\/awt\/MenuBar\/AddRemoveMenuBarTests\/AddRemoveMenuBarTest_2.java","additions":99,"deletions":0,"binary":false,"changes":99,"status":"added"},{"patch":"@@ -0,0 +1,195 @@\n+\/*\n+ * Copyright (c) 1998, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.awt.BorderLayout;\n+import java.awt.Checkbox;\n+import java.awt.Frame;\n+import java.awt.GridLayout;\n+import java.awt.Label;\n+import java.awt.Menu;\n+import java.awt.MenuBar;\n+import java.awt.Panel;\n+import java.awt.Rectangle;\n+import java.awt.TextField;\n+import java.awt.event.ActionListener;\n+import java.awt.event.ComponentAdapter;\n+import java.awt.event.ComponentEvent;\n+import javax.swing.SwingUtilities;\n+\n+\/*\n+ * @test\n+ * @bug 4017504\n+ * @summary Test dynamically adding and removing a menu bar\n+ * @library \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame\n+ * @run main\/manual AddRemoveMenuBarTest_3\n+ *\/\n+\n+public class AddRemoveMenuBarTest_3  {\n+    private static final String INSTRUCTIONS = \"\"\"\n+            A frame at (100,100) contains two (2) rows of three (3) text\n+            fields each, and under this, a checkbox labelled 'Use menubar'.\n+\n+            The first row's text fields pertain to the x coordinates and\n+            the second row's text fields pertain to the y coordinates.\n+\n+            The first column, 'request', is an input only field for frame\n+            location. (press enter to apply).\n+\n+            The second column, 'reported', is an output only\n+            field reporting frame location.\n+\n+            The third column, 'inset', is an output only field reporting\n+            the frame's inset values.\n+\n+            You can click the 'Use menubar' checkbox to alternately add\n+            and remove a menu bar containing an (empty) 'Help' menu.\n+\n+            After a menubar is added or removed, the frame should not\n+            have been resized nor repositioned on the screen and the\n+            y inset should accurately reflect the presence or absence\n+            of the menubar within the inset.\n+\n+            The insets always include the window manager's title and border\n+            decorations, if any.\n+\n+            Upon test completion, click Pass or Fail appropriately.\n+            \"\"\";\n+    public static void main(String[] args) throws Exception {\n+        PassFailJFrame passFailJFrame = new PassFailJFrame.Builder()\n+                .title(\"AddRemoveMenuBarTest_3 Instructions\")\n+                .instructions(INSTRUCTIONS)\n+                .testTimeOut(5)\n+                .rows(30)\n+                .columns(38)\n+                .build();\n+\n+        SwingUtilities.invokeAndWait(() -> {\n+            AddRemoveMenuBar_3 frame = new AddRemoveMenuBar_3();\n+\n+            PassFailJFrame.addTestWindow(frame);\n+            PassFailJFrame.positionTestWindow(null,\n+                    PassFailJFrame.Position.HORIZONTAL);\n+\n+            frame.setVisible(true);\n+        });\n+\n+        passFailJFrame.awaitAndCheck();\n+    }\n+}\n+\n+class AddRemoveMenuBar_3 extends Frame {\n+    TextField xfield;\n+    TextField yfield;\n+\n+    TextField xfield_out;\n+    TextField yfield_out;\n+    TextField xinset_out;\n+    TextField yinset_out;\n+\n+    Checkbox menu_checkbox;\n+    MenuBar menubar;\n+\n+    public AddRemoveMenuBar_3() {\n+        super(\"AddRemoveMenuBar_3\");\n+\n+        menubar = new MenuBar();\n+        menubar.setHelpMenu(new Menu(\"Help\"));\n+\n+        setLayout(new BorderLayout());\n+        Panel p = new Panel();\n+        add(\"Center\", p);\n+        p.setLayout(new GridLayout(3, 3));\n+\n+        menu_checkbox = new Checkbox(\"Use menubar\");\n+        add(\"South\", menu_checkbox);\n+\n+        xfield = new TextField();\n+        yfield = new TextField();\n+        xfield_out = new TextField();\n+        xfield_out.setEditable(false);\n+        xfield_out.setFocusable(false);\n+        yfield_out = new TextField();\n+        yfield_out.setEditable(false);\n+        yfield_out.setFocusable(false);\n+\n+        xinset_out = new TextField();\n+        xinset_out.setEditable(false);\n+        xinset_out.setFocusable(false);\n+        yinset_out = new TextField();\n+        yinset_out.setEditable(false);\n+        yinset_out.setFocusable(false);\n+\n+        p.add(new Label(\"request\"));\n+        p.add(new Label(\"reported\"));\n+        p.add(new Label(\"inset\"));\n+\n+        p.add(xfield);\n+        p.add(xfield_out);\n+        p.add(xinset_out);\n+\n+        p.add(yfield);\n+        p.add(yfield_out);\n+        p.add(yinset_out);\n+\n+        setSize(200, 200);\n+        setLocation(100, 100);\n+\n+        addComponentListener(new ComponentAdapter() {\n+            @Override\n+            public void componentMoved(ComponentEvent e) {\n+                xfield_out.setText(Integer.toString(getLocation().x));\n+                yfield_out.setText(Integer.toString(getLocation().y));\n+\n+                xinset_out.setText(Integer.toString(getInsets().left));\n+                yinset_out.setText(Integer.toString(getInsets().top));\n+            }\n+        });\n+\n+        ActionListener setLocationListener = e -> {\n+            Rectangle r = getBounds();\n+            try {\n+                r.x = Integer.parseInt(xfield.getText());\n+                r.y = Integer.parseInt(yfield.getText());\n+            } catch (java.lang.NumberFormatException ignored) {\n+            }\n+\n+            setLocation(r.x, r.y);\n+        };\n+\n+        xfield.addActionListener(setLocationListener);\n+        yfield.addActionListener(setLocationListener);\n+\n+        menu_checkbox.addItemListener(e -> {\n+            if (menu_checkbox.getState()) {\n+                setMenuBar(menubar);\n+            } else {\n+                setMenuBar(null);\n+            }\n+\n+            validate();\n+            xinset_out.setText(Integer.toString(getInsets().left));\n+            yinset_out.setText(Integer.toString(getInsets().top));\n+        });\n+    }\n+}\n","filename":"test\/jdk\/java\/awt\/MenuBar\/AddRemoveMenuBarTests\/AddRemoveMenuBarTest_3.java","additions":195,"deletions":0,"binary":false,"changes":195,"status":"added"},{"patch":"@@ -0,0 +1,116 @@\n+\/*\n+ * Copyright (c) 1998, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.awt.Button;\n+import java.awt.FlowLayout;\n+import java.awt.Frame;\n+import java.awt.Menu;\n+import java.awt.MenuBar;\n+import java.awt.MenuItem;\n+import javax.swing.SwingUtilities;\n+\n+\/*\n+ * @test\n+ * @bug 4071086\n+ * @key headful\n+ * @summary Test dynamically adding and removing a menu bar\n+ * @library \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame\n+ * @run main\/manual AddRemoveMenuBarTest_4\n+ *\/\n+\n+public class AddRemoveMenuBarTest_4 {\n+\n+    private static final String INSTRUCTIONS = \"\"\"\n+            There is a frame with a menubar and a single button.\n+\n+            The button is labelled 'Add new MenuBar'.\n+\n+            If you click the button, the menubar is replaced with another menubar.\n+            This can be done repeatedly.\n+\n+            The <n>-th menubar contains one menu, 'TestMenu<n>',\n+            with two items, 'one <n>' and 'two <n>'.\n+\n+            Click again to replace the menu bar with another menu bar.\n+\n+            After a menubar has been replaced with another menubar,\n+            the frame should not be resized nor repositioned on the screen.\n+\n+            Upon test completion, click Pass or Fail appropriately.\n+            \"\"\";\n+\n+    public static void main(String[] args) throws Exception {\n+        PassFailJFrame passFailJFrame = new PassFailJFrame.Builder()\n+                .title(\"AddRemoveMenuBarTest_4 Instructions\")\n+                .instructions(INSTRUCTIONS)\n+                .testTimeOut(5)\n+                .rows(18)\n+                .columns(45)\n+                .build();\n+\n+        SwingUtilities.invokeAndWait(() -> {\n+            AddRemoveMenuBar_4 frame = new AddRemoveMenuBar_4();\n+\n+            PassFailJFrame.addTestWindow(frame);\n+            PassFailJFrame.positionTestWindow(frame,\n+                    PassFailJFrame.Position.HORIZONTAL);\n+\n+            frame.setVisible(true);\n+        });\n+\n+        passFailJFrame.awaitAndCheck();\n+    }\n+}\n+\n+class AddRemoveMenuBar_4 extends Frame {\n+    int count = 1;\n+    MenuBar mb = null;\n+\n+    AddRemoveMenuBar_4() {\n+        super(\"AddRemoveMenuBar_4\");\n+        setLayout(new FlowLayout());\n+\n+        Button b = new Button(\"Add new MenuBar\");\n+        b.addActionListener((e) -> createMenuBar());\n+        add(b);\n+\n+        createMenuBar();\n+\n+        setSize(300, 300);\n+    }\n+\n+    void createMenuBar() {\n+        if (mb != null) {\n+            remove(mb);\n+        }\n+\n+        mb = new MenuBar();\n+        Menu m = new Menu(\"TestMenu\" + count);\n+        m.add(new MenuItem(\"one \" + count));\n+        m.add(new MenuItem(\"two \" + count));\n+        count++;\n+        mb.add(m);\n+        setMenuBar(mb);\n+    }\n+}\n","filename":"test\/jdk\/java\/awt\/MenuBar\/AddRemoveMenuBarTests\/AddRemoveMenuBarTest_4.java","additions":116,"deletions":0,"binary":false,"changes":116,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2020, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,0 +32,2 @@\n+import java.util.concurrent.CountDownLatch;\n+import java.util.concurrent.TimeUnit;\n@@ -54,0 +56,1 @@\n+            latch.countDown();\n@@ -64,1 +67,2 @@\n-    static boolean pressed = false;\n+    static volatile boolean pressed = false;\n+    static final CountDownLatch latch = new CountDownLatch(1);\n@@ -86,0 +90,1 @@\n+            r.setAutoDelay(20);\n@@ -88,1 +93,0 @@\n-            r.delay(10);\n@@ -92,1 +96,0 @@\n-            r.delay(10);\n@@ -96,1 +99,0 @@\n-            r.delay(10);\n@@ -100,1 +102,0 @@\n-            r.delay(10);\n@@ -104,1 +105,0 @@\n-            r.delay(10);\n@@ -106,1 +106,1 @@\n-            r.delay(10000);\n+            latch.await(5, TimeUnit.SECONDS);\n","filename":"test\/jdk\/java\/awt\/MenuBar\/SeparatorsNavigation\/SeparatorsNavigation.java","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,3 +24,23 @@\n-\n-import java.awt.*;\n-import java.awt.event.*;\n+import java.awt.Button;\n+import java.awt.Checkbox;\n+import java.awt.Choice;\n+import java.awt.Component;\n+import java.awt.Dimension;\n+import java.awt.EventQueue;\n+import java.awt.FlowLayout;\n+import java.awt.Frame;\n+import java.awt.Label;\n+import java.awt.List;\n+import java.awt.Panel;\n+import java.awt.Robot;\n+import java.awt.Scrollbar;\n+import java.awt.TextArea;\n+import java.awt.TextField;\n+import java.awt.event.HierarchyBoundsListener;\n+import java.awt.event.HierarchyEvent;\n+import java.awt.event.InputEvent;\n+import java.awt.event.WindowAdapter;\n+import java.awt.event.WindowEvent;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.io.InputStreamReader;\n@@ -29,1 +49,2 @@\n-import java.io.*;\n+\n+import jdk.test.lib.Platform;\n@@ -40,1 +61,2 @@\n- * @build FrameBorderCounter\n+ * @library \/test\/lib\n+ * @build FrameBorderCounter jdk.test.lib.Platform\n@@ -140,1 +162,1 @@\n-        robot.mousePress(InputEvent.BUTTON1_MASK);\n+        robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n@@ -142,1 +164,1 @@\n-        robot.mouseRelease(InputEvent.BUTTON1_MASK);\n+        robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n@@ -180,15 +202,0 @@\n-        int x = (int) frame.getLocationOnScreen().x;\n-        int y = (int) frame.getLocationOnScreen().y;\n-        int w = frame.getSize().width;\n-        int h = frame.getSize().height;\n-\n-        robot.mouseMove(x + w + BORDER_SHIFT, y + h \/ 2);\n-        robot.delay(delay);\n-        robot.mousePress(InputEvent.BUTTON1_MASK);\n-        robot.delay(delay);\n-        for (int i = 0; i < 20; i++) {\n-            robot.mouseMove(x + w + i + BORDER_SHIFT, y + h \/ 2);\n-            robot.delay(50);\n-        }\n-        robot.delay(delay);\n-        robot.mouseRelease(InputEvent.BUTTON1_MASK);\n@@ -196,5 +203,28 @@\n-        if (! resizeTriggered) {\n-            synchronized (resizeLock) {\n-                try {\n-                    resizeLock.wait(delay * 10);\n-                } catch (Exception e) {\n+        int x;\n+        int y;\n+        int w;\n+        int h;\n+\n+        if (!Platform.isOnWayland()) {\n+            x = frame.getLocationOnScreen().x;\n+            y = frame.getLocationOnScreen().y;\n+            w = frame.getSize().width;\n+            h = frame.getSize().height;\n+\n+            robot.mouseMove(x + w + BORDER_SHIFT, y + h \/ 2);\n+            robot.delay(delay);\n+            robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n+            robot.delay(delay);\n+            for (int i = 0; i < 20; i++) {\n+                robot.mouseMove(x + w + i + BORDER_SHIFT, y + h \/ 2);\n+                robot.delay(50);\n+            }\n+            robot.delay(delay);\n+            robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n+\n+            if (!resizeTriggered) {\n+                synchronized (resizeLock) {\n+                    try {\n+                        resizeLock.wait(delay * 10);\n+                    } catch (Exception e) {\n+                    }\n@@ -203,1 +233,0 @@\n-        }\n@@ -205,5 +234,10 @@\n-        for (int i = 0; i < components.length; i++) {\n-            if (! ancestorResized[i]) {\n-                System.err.println(\"FAIL: Frame resized using mouse action. \" +\n-                                   \"Ancestor resized event did not occur for \" +\n-                                   components[i].getClass());\n+            for (int i = 0; i < components.length; i++) {\n+                if (!ancestorResized[i]) {\n+                    System.err.println(\"FAIL: Frame resized using mouse action. \" +\n+                            \"Ancestor resized event did not occur for \" +\n+                            components[i].getClass());\n+                    passed = false;\n+                }\n+            }\n+            if (moveCount > 0) {\n+                System.err.println(\"FAIL: Ancestor moved event occurred when Frame resized using mouse\");\n@@ -212,4 +246,2 @@\n-        }\n-        if (moveCount > 0) {\n-            System.err.println(\"FAIL: Ancestor moved event occured when Frame resized using mouse\");\n-            passed = false;\n+\n+            resetValues();\n@@ -218,1 +250,0 @@\n-        resetValues();\n@@ -253,14 +284,0 @@\n-        x = (int) frame.getLocationOnScreen().x;\n-        y = (int) frame.getLocationOnScreen().y;\n-        w = frame.getSize().width;\n-        h = frame.getSize().height;\n-\n-        \/\/Click on the dummy frame so that the test frame loses focus. This is to workaround\n-        \/\/a bug in Linux AS.\n-        robot.mouseMove((int) dummy.getLocationOnScreen().x + dummy.getSize().width \/ 2,\n-                        (int) dummy.getLocationOnScreen().y + dummy.getSize().height \/ 2);\n-        robot.delay(delay);\n-        robot.mousePress(InputEvent.BUTTON1_MASK);\n-        robot.delay(delay);\n-        robot.mouseRelease(InputEvent.BUTTON1_MASK);\n-        robot.delay(delay);\n@@ -268,16 +285,33 @@\n-        robot.mouseMove(x + w \/ 2, y + 10);\n-        robot.delay(delay);\n-        robot.mousePress(InputEvent.BUTTON1_MASK);\n-        robot.delay(delay);\n-        for (int i = 1; i <= 20; i++) {\n-            robot.mouseMove(x + w \/ 2 + i, y + 10);\n-            robot.delay(50);\n-        }\n-        robot.delay(delay);\n-        robot.mouseRelease(InputEvent.BUTTON1_MASK);\n-\n-        if (! moveTriggered) {\n-            synchronized (moveLock) {\n-                try {\n-                    moveLock.wait(delay * 10);\n-                } catch (Exception e) {\n+        if (!Platform.isOnWayland()) {\n+            x = frame.getLocationOnScreen().x;\n+            y = frame.getLocationOnScreen().y;\n+            w = frame.getSize().width;\n+            h = frame.getSize().height;\n+\n+            \/\/Click on the dummy frame so that the test frame loses focus. This is to workaround\n+            \/\/a bug in Linux AS.\n+            robot.mouseMove((int) dummy.getLocationOnScreen().x + dummy.getSize().width \/ 2,\n+                            (int) dummy.getLocationOnScreen().y + dummy.getSize().height \/ 2);\n+            robot.delay(delay);\n+            robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n+            robot.delay(delay);\n+            robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n+            robot.delay(delay);\n+\n+            robot.mouseMove(x + w \/ 2, y + 10);\n+            robot.delay(delay);\n+            robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n+            robot.delay(delay);\n+            for (int i = 1; i <= 20; i++) {\n+                robot.mouseMove(x + w \/ 2 + i, y + 10);\n+                robot.delay(50);\n+            }\n+            robot.delay(delay);\n+            robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n+\n+            if (! moveTriggered) {\n+                synchronized (moveLock) {\n+                    try {\n+                        moveLock.wait(delay * 10);\n+                    } catch (Exception e) {\n+                    }\n@@ -286,1 +320,0 @@\n-        }\n@@ -288,4 +321,9 @@\n-        for (int i = 0; i < components.length; i++) {\n-            if (! ancestorMoved[i]) {\n-                System.err.println(\"FAIL: Frame moved using mouse action. \" +\n-                                   \"Ancestor moved event did not occur for \" + components[i].getClass());\n+            for (int i = 0; i < components.length; i++) {\n+                if (! ancestorMoved[i]) {\n+                    System.err.println(\"FAIL: Frame moved using mouse action. \" +\n+                                       \"Ancestor moved event did not occur for \" + components[i].getClass());\n+                    passed = false;\n+                }\n+            }\n+            if (resizeCount > 0) {\n+                System.err.println(\"FAIL: Ancestor resized event occured when Frame moved using mouse\");\n@@ -295,4 +333,0 @@\n-        if (resizeCount > 0) {\n-            System.err.println(\"FAIL: Ancestor resized event occured when Frame moved using mouse\");\n-            passed = false;\n-        }\n@@ -453,1 +487,1 @@\n-    public static void main(String args[]) throws InterruptedException {\n+    public static void main(String[] args) throws InterruptedException {\n","filename":"test\/jdk\/java\/awt\/Mixing\/AWT_Mixing\/HierarchyBoundsListenerMixingTest.java","additions":113,"deletions":79,"binary":false,"changes":192,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2014, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -38,0 +38,3 @@\n+    private static final boolean IS_ON_WAYLAND =\n+            System.getenv(\"WAYLAND_DISPLAY\") != null;\n+\n@@ -79,0 +82,3 @@\n+            if (IS_ON_WAYLAND) {\n+                rightFrame.toFront();\n+            }\n","filename":"test\/jdk\/java\/awt\/Modal\/ToFront\/FrameToFrontModelessTest.java","additions":7,"deletions":1,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -48,0 +48,3 @@\n+    private static final boolean IS_ON_WAYLAND =\n+            System.getenv(\"WAYLAND_DISPLAY\") != null;\n+\n@@ -290,0 +293,3 @@\n+        if (IS_ON_WAYLAND) {\n+            toFront();\n+        }\n@@ -306,0 +312,3 @@\n+        if (IS_ON_WAYLAND) {\n+            toFront();\n+        }\n","filename":"test\/jdk\/java\/awt\/Modal\/helpers\/TestDialog.java","additions":10,"deletions":1,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -46,0 +46,2 @@\n+    private static final boolean IS_ON_WAYLAND =\n+            System.getenv(\"WAYLAND_DISPLAY\") != null;\n@@ -254,1 +256,1 @@\n-        dummyClicked.waitForFlagTriggered();\n+        dummyClicked.waitForFlagTriggered(attempts);\n@@ -280,0 +282,3 @@\n+        if (IS_ON_WAYLAND) {\n+            toFront();\n+        }\n@@ -296,0 +301,3 @@\n+        if (IS_ON_WAYLAND) {\n+            toFront();\n+        }\n","filename":"test\/jdk\/java\/awt\/Modal\/helpers\/TestFrame.java","additions":10,"deletions":2,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,1 +37,4 @@\n-    public static void main(final String[] args) {\n+    static ListRepaint listRepaint;\n+    static Frame frame;\n+\n+    public static void main(final String[] args) throws Exception {\n@@ -39,14 +42,12 @@\n-            final Frame frame = new Frame();\n-            frame.setSize(300, 300);\n-            frame.setLocationRelativeTo(null);\n-            ListRepaint list = new ListRepaint();\n-            list.add(\"1\");\n-            list.add(\"2\");\n-            list.add(\"3\");\n-            list.add(\"4\");\n-            list.select(0);\n-            frame.add(list);\n-            frame.setVisible(true);\n-            sleep();\n-            list.test();\n-            frame.dispose();\n+            try {\n+                EventQueue.invokeLater(ListRepaint::createAndShowGUI);\n+                sleep();\n+                EventQueue.invokeAndWait(listRepaint::test);\n+            } finally {\n+                EventQueue.invokeAndWait(() -> {\n+                    if (frame != null) {\n+                        frame.dispose();\n+                        frame = null;\n+                    }\n+                });\n+            }\n@@ -63,0 +64,16 @@\n+    static void createAndShowGUI() {\n+        frame = new Frame();\n+        frame.setSize(300, 300);\n+        frame.setLocationRelativeTo(null);\n+\n+        listRepaint = new ListRepaint();\n+        listRepaint.add(\"1\");\n+        listRepaint.add(\"2\");\n+        listRepaint.add(\"3\");\n+        listRepaint.add(\"4\");\n+        listRepaint.select(0);\n+\n+        frame.add(listRepaint);\n+        frame.setVisible(true);\n+    }\n+\n","filename":"test\/jdk\/java\/awt\/Paint\/ListRepaint.java","additions":33,"deletions":16,"binary":false,"changes":49,"status":"modified"},{"patch":"","filename":"test\/jdk\/java\/awt\/Paint\/PaintSetEnabledDeadlock\/PaintSetEnabledDeadlock.java","additions":0,"deletions":0,"binary":false,"changes":0,"previous_filename":"test\/jdk\/java\/awt\/print\/PaintSetEnabledDeadlock\/PaintSetEnabledDeadlock.java","status":"renamed"},{"patch":"@@ -27,0 +27,1 @@\n+  @key printer\n","filename":"test\/jdk\/java\/awt\/PrintJob\/ConstrainedPrintingTest\/ConstrainedPrintingTest.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+ * @key printer\n@@ -29,1 +30,0 @@\n- * @author dpm\n","filename":"test\/jdk\/java\/awt\/PrintJob\/EdgeTest\/EdgeTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -29,1 +29,1 @@\n-  @author dpm: area=awt.print\n+  @key printer\n","filename":"test\/jdk\/java\/awt\/PrintJob\/HighResTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/PrintJob\/JobAttrUpdateTest.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n- * @key headful\n+ * @key headful printer\n","filename":"test\/jdk\/java\/awt\/PrintJob\/MultipleEnd\/MultipleEnd.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n-  @author tav@sparc.spb.su: area=awt.PrintJob\n+  @key printer\n","filename":"test\/jdk\/java\/awt\/PrintJob\/PageSetupDlgBlockingTest\/PageSetupDlgBlockingTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n- * @key headful\n+ * @key headful printer\n@@ -29,1 +29,0 @@\n- * @author robi.khan\n","filename":"test\/jdk\/java\/awt\/PrintJob\/PrintArcTest\/PrintArcTest.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -29,1 +29,1 @@\n-  @author art@sparc.spb.su\n+  @key printer\n","filename":"test\/jdk\/java\/awt\/PrintJob\/PrintCheckboxTest\/PrintCheckboxManualTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n- * @key headful\n+ * @key headful printer\n@@ -30,1 +30,0 @@\n- * @author dpm\n","filename":"test\/jdk\/java\/awt\/PrintJob\/QuoteAndBackslashTest\/QuoteAndBackslashTest.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n- * @key headful\n+ * @key headful printer\n@@ -29,1 +29,0 @@\n- * @author dpm\n","filename":"test\/jdk\/java\/awt\/PrintJob\/RoundedRectTest\/RoundedRectTest.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/PrintJob\/SaveDialogTitleTest.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n- * @key headful\n+ * @key headful printer\n","filename":"test\/jdk\/java\/awt\/PrintJob\/Security\/SecurityDialogTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/PrintJob\/TestPrintJobFrameAssociation.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+#   @key printer\n","filename":"test\/jdk\/java\/awt\/PrintJob\/Text\/stringwidth.sh","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -35,1 +35,0 @@\n-import javax.swing.UIManager;\n@@ -57,0 +56,6 @@\n+        if (\"2\".equals(System.getProperty(\"jdk.gtk.version\"))\n+                && System.getenv(\"WAYLAND_DISPLAY\") != null) {\n+            \/\/ screen capture is not supported with gtk2 on Wayland\n+            return;\n+        }\n+\n","filename":"test\/jdk\/java\/awt\/Robot\/HiDPIScreenCapture\/ScreenCaptureGtkTest.java","additions":7,"deletions":2,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -1,328 +0,0 @@\n-\/*\n- * Copyright (c) 2008, 2013, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-\n-\/*\n-  test %W% %E%  %I%, %G%\n-  @bug 6315717\n-  @summary  manual control over the Robot\n-  @author Andrei Dmitriev : area=awt.robot\n-  @run applet\/manual=yesno ManualInstructions.html\n-*\/\n-\n-import java.applet.Applet;\n-import java.awt.*;\n-import java.awt.event.*;\n-import java.util.Timer;\n-import java.util.TimerTask;\n-\n-public class ManualInstructions extends Applet\n-{\n-    final static long SEND_DELAY = 1000;\n-\n-    public static void main(String s[]){\n-        ManualInstructions mi = new ManualInstructions();\n-        mi.init();\n-        mi.start();\n-    }\n-\n-    static Robot robot;\n-    Point mouseLocation; \/\/where mouse should be pressed each time\n-    Panel target = new Panel();\n-    Button pressOn = new Button(\"press on ...\");\n-    Button releaseOn = new Button(\"release on ...\");\n-    Button clickOn = new Button(\"click on ...\");\n-    Choice buttonNumber = new Choice();\n-\n-    public void init()\n-    {\n-        try {\n-            robot = new Robot();\n-        } catch (AWTException ex) {\n-            ex.printStackTrace();\n-            throw new RuntimeException(ex);\n-        }\n-        this.setLayout (new BorderLayout ());\n-\n-        target.setBackground(Color.green);\n-        target.setName(\"GreenBox\");\/\/for the ease of debug\n-        target.setPreferredSize(new Dimension(100, 100));\n-        String toolkit = Toolkit.getDefaultToolkit().getClass().getName();\n-\n-        \/\/ on X systems two buttons are reserved for wheel though they are countable by MouseInfo.\n-        int buttonsNumber = toolkit.equals(\"sun.awt.windows.WToolkit\")?MouseInfo.getNumberOfButtons():MouseInfo.getNumberOfButtons()-2;\n-\n-        for (int i = 0; i < 8; i++){\n-            buttonNumber.add(\"BUTTON\"+(i+1)+\"_MASK\");\n-        }\n-\n-        pressOn.addActionListener(new ActionListener(){\n-                public void actionPerformed(ActionEvent e){\n-                    System.out.println(\"Now pressing : \" + (buttonNumber.getSelectedIndex()+1));\n-\n-                    Timer timer = new Timer();\n-                    TimerTask robotInteraction = new TimerTask(){\n-                            public void run(){\n-                                robot.mouseMove(updateTargetLocation().x, updateTargetLocation().y);\n-                                robot.mousePress(getMask(buttonNumber.getSelectedIndex()+1));\n-                            }\n-                        };\n-                    timer.schedule(robotInteraction, SEND_DELAY);\n-                }\n-            });\n-\n-        releaseOn.addActionListener(new ActionListener(){\n-            public void actionPerformed(ActionEvent e){\n-                System.out.println(\"Now releasing : \" + (buttonNumber.getSelectedIndex()+1));\n-                Timer timer = new Timer();\n-                TimerTask robotInteraction = new TimerTask(){\n-                        public void run(){\n-                            robot.mouseMove(updateTargetLocation().x, updateTargetLocation().y);\n-                            robot.mouseRelease(getMask(buttonNumber.getSelectedIndex()+1));\n-                        }\n-                    };\n-                timer.schedule(robotInteraction, SEND_DELAY);\n-            }\n-        });\n-\n-        clickOn.addActionListener(new ActionListener(){\n-            public void actionPerformed(ActionEvent e){\n-                System.out.println(\"Now clicking : \" + (buttonNumber.getSelectedIndex()+1));\n-                Timer timer = new Timer();\n-                TimerTask robotInteraction = new TimerTask(){\n-                        public void run(){\n-                            robot.mouseMove(updateTargetLocation().x, updateTargetLocation().y);\n-                            robot.mousePress(getMask(buttonNumber.getSelectedIndex()+1));\n-                            robot.mouseRelease(getMask(buttonNumber.getSelectedIndex()+1));\n-                        }\n-                    };\n-                timer.schedule(robotInteraction, SEND_DELAY);\n-            }\n-\n-        });\n-        target.addMouseListener(new MouseAdapter(){\n-           public void mousePressed(MouseEvent e){\n-                Sysout.println(\"\"+e);\n-           }\n-           public void mouseReleased(MouseEvent e){\n-                Sysout.println(\"\"+e);\n-           }\n-           public void mouseClicked(MouseEvent e){\n-                Sysout.println(\"\"+e);\n-           }\n-        });\n-\n-        String[] instructions =\n-        {\n-            \"Do provide an instruction to the robot by\",\n-            \"choosing the button number to act and \",\n-            \"pressing appropriate java.awt.Button on the left.\",\n-            \"Inspect an output in the TextArea below.\",\n-            \"Please don't generate non-natural sequences like Release-Release, etc.\",\n-            \"If you use keyboard be sure that you released the keyboard shortly.\",\n-            \"If events are generated well press Pass, otherwise Fail.\"\n-        };\n-        Sysout.createDialogWithInstructions( instructions );\n-\n-    }\/\/End  init()\n-\n-    private int getMask(int button){\n-        return InputEvent.getMaskForButton(button);\n-\n-        \/*\n-            \/\/this only works for standard buttons and for old JDK builds\n-        int mask = 0;\n-        switch (button){\n-        case 1: {\n-            mask = InputEvent.BUTTON1_MASK;\n-            break;\n-        }\n-        case 2: {\n-            mask = InputEvent.BUTTON2_MASK;\n-            break;\n-        }\n-        case 3: {\n-            mask = InputEvent.BUTTON3_MASK;\n-            break;\n-        }\n-        }\n-        return mask;\n-        *\/\n-    }\n-\n-    private Point updateTargetLocation() {\n-        return new Point(target.getLocationOnScreen().x + target.getWidth()\/2, target.getLocationOnScreen().y + target.getHeight()\/2);\n-    }\n-\n-    public void start ()\n-    {\n-        \/\/Get things going.  Request focus, set size, et cetera\n-        setSize (200,200);\n-        setVisible(true);\n-        validate();\n-        Frame f = new Frame (\"Set action for Robot here.\");\n-        f.setLayout(new FlowLayout());\n-        f.add(buttonNumber);\n-        f.add(pressOn);\n-        f.add(releaseOn);\n-        f.add(clickOn);\n-        f.add(target);\n-        f.pack();\n-        f.setVisible(true);\n-     }\/\/ start()\n-}\/\/ class\n-\n-\/* Place other classes related to the test after this line *\/\n-\n-\n-\/****************************************************\n- Standard Test Machinery\n- DO NOT modify anything below -- it's a standard\n-  chunk of code whose purpose is to make user\n-  interaction uniform, and thereby make it simpler\n-  to read and understand someone else's test.\n- ****************************************************\/\n-\n-\/**\n- This is part of the standard test machinery.\n- It creates a dialog (with the instructions), and is the interface\n-  for sending text messages to the user.\n- To print the instructions, send an array of strings to Sysout.createDialog\n-  WithInstructions method.  Put one line of instructions per array entry.\n- To display a message for the tester to see, simply call Sysout.println\n-  with the string to be displayed.\n- This mimics System.out.println but works within the test harness as well\n-  as standalone.\n- *\/\n-\n-class Sysout\n-{\n-    private static TestDialog dialog;\n-\n-    public static void createDialogWithInstructions( String[] instructions )\n-    {\n-        dialog = new TestDialog( new Frame(), \"Instructions\" );\n-        dialog.printInstructions( instructions );\n-        dialog.setVisible(true);\n-        println( \"Any messages for the tester will display here.\" );\n-    }\n-\n-    public static void createDialog( )\n-    {\n-        dialog = new TestDialog( new Frame(), \"Instructions\" );\n-        String[] defInstr = { \"Instructions will appear here. \", \"\" } ;\n-        dialog.printInstructions( defInstr );\n-        dialog.setVisible(true);\n-        println( \"Any messages for the tester will display here.\" );\n-    }\n-\n-    public static void printInstructions( String[] instructions )\n-    {\n-        dialog.printInstructions( instructions );\n-    }\n-\n-\n-    public static void println( String messageIn )\n-    {\n-        dialog.displayMessage( messageIn );\n-    }\n-\n-}\/\/ Sysout  class\n-\n-\/**\n-  This is part of the standard test machinery.  It provides a place for the\n-   test instructions to be displayed, and a place for interactive messages\n-   to the user to be displayed.\n-  To have the test instructions displayed, see Sysout.\n-  To have a message to the user be displayed, see Sysout.\n-  Do not call anything in this dialog directly.\n-  *\/\n-class TestDialog extends Dialog\n-{\n-\n-    TextArea instructionsText;\n-    TextArea messageText;\n-    int maxStringLength = 120;\n-\n-    \/\/DO NOT call this directly, go through Sysout\n-    public TestDialog( Frame frame, String name )\n-    {\n-        super( frame, name );\n-        int scrollBoth = TextArea.SCROLLBARS_BOTH;\n-        instructionsText = new TextArea( \"\", 15, maxStringLength, scrollBoth );\n-        add( \"North\", instructionsText );\n-\n-        messageText = new TextArea( \"\", 5, maxStringLength, scrollBoth );\n-        add(\"Center\", messageText);\n-\n-        pack();\n-\n-        setVisible(true);\n-    }\/\/ TestDialog()\n-\n-    \/\/DO NOT call this directly, go through Sysout\n-    public void printInstructions( String[] instructions )\n-    {\n-        \/\/Clear out any current instructions\n-        instructionsText.setText( \"\" );\n-\n-        \/\/Go down array of instruction strings\n-\n-        String printStr, remainingStr;\n-        for( int i=0; i < instructions.length; i++ )\n-        {\n-            \/\/chop up each into pieces maxSringLength long\n-            remainingStr = instructions[ i ];\n-            while( remainingStr.length() > 0 )\n-            {\n-                \/\/if longer than max then chop off first max chars to print\n-                if( remainingStr.length() >= maxStringLength )\n-                {\n-                    \/\/Try to chop on a word boundary\n-                    int posOfSpace = remainingStr.\n-                        lastIndexOf( ' ', maxStringLength - 1 );\n-\n-                    if( posOfSpace <= 0 ) posOfSpace = maxStringLength - 1;\n-\n-                    printStr = remainingStr.substring( 0, posOfSpace + 1 );\n-                    remainingStr = remainingStr.substring( posOfSpace + 1 );\n-                }\n-                \/\/else just print\n-                else\n-                {\n-                    printStr = remainingStr;\n-                    remainingStr = \"\";\n-                }\n-\n-                instructionsText.append( printStr + \"\\n\" );\n-            }\/\/ while\n-        }\/\/ for\n-    }\/\/printInstructions()\n-\n-    \/\/DO NOT call this directly, go through Sysout\n-    public void displayMessage( String messageIn )\n-    {\n-        messageText.append( messageIn + \"\\n\" );\n-        System.out.println(messageIn);\n-    }\n-\n-}\/\/ TestDialog  class\n","filename":"test\/jdk\/java\/awt\/Robot\/ManualInstructions\/ManualInstructions.java","additions":0,"deletions":328,"binary":false,"changes":328,"status":"deleted"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -74,1 +74,1 @@\n-        if (os.contains(\"os x\")) {\n+        if (os.contains(\"os x\") || os.contains(\"linux\")) {\n","filename":"test\/jdk\/java\/awt\/Robot\/ModifierRobotKey\/ModifierRobotKeyTest.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -123,0 +123,1 @@\n+        robot.setAutoWaitForIdle(true);\n@@ -133,0 +134,1 @@\n+        robot.delay(1000);\n","filename":"test\/jdk\/java\/awt\/SplashScreen\/MultiResolutionSplash\/MultiResolutionSplashTest.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2012, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2012, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -101,0 +101,1 @@\n+        robot.delay(500);\n","filename":"test\/jdk\/java\/awt\/TextArea\/TextAreaCaretVisibilityTest\/bug7129742.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -31,14 +31,0 @@\n-        GNOMESID=`pgrep gnome-session | head -n1`\n-\n-        printf \"\\n\/* gnome-session environ\\n\"\n-        cat \"\/proc\/$GNOMESID\/environ\" | tr '\\0' '\\n'\n-        printf \"\\n*\/\\n\\n\"\n-\n-        DBUS_SESSION_BUS_ADDRESS=`grep -z DBUS_SESSION_BUS_ADDRESS \/proc\/$GNOMESID\/environ | cut -d= -f2-`\n-        export DBUS_SESSION_BUS_ADDRESS\n-\n-        DISPLAY=`grep -z DISPLAY \/proc\/$GNOMESID\/environ | cut -d= -f2-`\n-        export DISPLAY\n-\n-        XDG_CURRENT_DESKTOP=`grep -z XDG_CURRENT_DESKTOP \/proc\/$GNOMESID\/environ | cut -d= -f2-`\n-        export XDG_CURRENT_DESKTOP\n","filename":"test\/jdk\/java\/awt\/Toolkit\/DesktopProperties\/rfe4758438.sh","additions":0,"deletions":14,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -82,0 +82,1 @@\n+        robot.setAutoDelay(25);\n@@ -83,0 +84,2 @@\n+        robot.waitForIdle();\n+        robot.delay(500);\n@@ -120,4 +123,0 @@\n-        robot.keyPress(KeyEvent.VK_ALT);\n-        robot.keyPress(KeyEvent.VK_SHIFT);\n-        robot.keyPress(KeyEvent.VK_CONTROL);\n-\n@@ -132,0 +131,4 @@\n+        robot.keyPress(KeyEvent.VK_ALT);\n+        robot.keyPress(KeyEvent.VK_SHIFT);\n+        robot.keyPress(KeyEvent.VK_CONTROL);\n+\n","filename":"test\/jdk\/java\/awt\/TrayIcon\/ActionEventTest\/ActionEventTest.java","additions":7,"deletions":4,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2015, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -48,1 +48,1 @@\n-    static final int ATTEMPTS = 50;\n+    static final int ATTEMPTS = 10;\n","filename":"test\/jdk\/java\/awt\/TrayIcon\/TrayIconPopup\/TrayIconPopupTest.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1,44 +0,0 @@\n-<!--\n- Copyright (c) 2015, 2016, Oracle and\/or its affiliates. All rights reserved.\n- DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n-\n- This code is free software; you can redistribute it and\/or modify it\n- under the terms of the GNU General Public License version 2 only, as\n- published by the Free Software Foundation.\n-\n- This code is distributed in the hope that it will be useful, but WITHOUT\n- ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- version 2 for more details (a copy is included in the LICENSE file that\n- accompanied this code).\n-\n- You should have received a copy of the GNU General Public License version\n- 2 along with this work; if not, write to the Free Software Foundation,\n- Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n-\n- Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- or visit www.oracle.com if you need additional information or have any\n- questions.\n-\n-\n-  @test\n-  @key headful\n-  @bug 8139227 8159460\n-  @summary Text fields in JPopupMenu structure do not receive focus in hosted\n-           Applets\n-  @author Semyon Sadetsky\n-  @run applet FindOwnerTest.html\n--->\n-\n-<html>\n-<head>\n-    <title>Testing Menus<\/title>\n-<\/head>\n-<body>\n-<applet id=\"ownerTester\"\n-        name=\"Testing Owner\"\n-        code=\"FindOwnerTest.class\"\n-        width=\"250\" height=\"150\">\n-<\/applet>\n-<\/body>\n-<\/html> \n","filename":"test\/jdk\/java\/awt\/Window\/FindOwner\/FindOwnerTest.html","additions":0,"deletions":44,"binary":false,"changes":44,"status":"deleted"},{"patch":"@@ -1,110 +0,0 @@\n-\/*\n- * Copyright (c) 2015, 2016, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-\n-\/* @bug 8139227\n-   @summary Text fields in JPopupMenu structure do not receive focus in hosted\n-            Applets\n-   @author Semyon Sadetsky\n-*\/\n-\n-import java.applet.Applet;\n-import java.awt.*;\n-import java.awt.event.*;\n-import javax.swing.*;\n-\n-public class FindOwnerTest extends Applet\n-{\n-\n-    private boolean gained;\n-\n-    public void init() {\n-        super.init();\n-    }\n-\n-    @Override\n-    public void start() {\n-        Window owner = SwingUtilities.windowForComponent(this);\n-\n-        Window window1 = new Window(owner);\n-        window1.setVisible(true);\n-\n-        Window window2 = new Window(window1);\n-        window2.setFocusable(true);\n-        JTextField field = new JTextField(\"JTextField\");\n-        field.addFocusListener(new FocusListener() {\n-            @Override\n-            public void focusGained(FocusEvent e) {\n-                gained = true;\n-            }\n-\n-            @Override\n-            public void focusLost(FocusEvent e) {\n-            }\n-        });\n-        window2.setBounds(100, 100, 200, 200);\n-        window2.add(field);\n-        window2.setVisible(true);\n-\n-        try {\n-            gained = false;\n-            Robot robot = new Robot();\n-            robot.setAutoDelay(50);\n-            robot.waitForIdle();\n-            robot.delay(200);\n-\n-            Point p = field.getLocationOnScreen();\n-            System.out.println(p);\n-            robot.mouseMove(p.x + 1, p.y + 1);\n-            robot.mousePress(InputEvent.BUTTON1_MASK);\n-            robot.mouseRelease(InputEvent.BUTTON1_MASK);\n-            robot.waitForIdle();\n-            robot.delay(200);\n-\n-            if (!gained) {\n-                throw new Exception(\"Focus is not gained upon mouse click\");\n-            }\n-            System.out.println(\"ok\");\n-        } catch (SecurityException e) {\n-\n-            JOptionPane optionPane = new JOptionPane(\n-                    \"You are in the browser so test is manual. Try to \" +\n-                    \"click \\\"JTextField\\\" in the opened window then press OK \" +\n-                    \"below\",\n-                    JOptionPane.PLAIN_MESSAGE, JOptionPane.OK_CANCEL_OPTION);\n-            JDialog dialog =\n-                    optionPane.createDialog(null,\"FindOwnerTest instruction\");\n-            dialog.setModalityType(Dialog.ModalityType.DOCUMENT_MODAL);\n-            dialog.setVisible(true);\n-            if (!gained) {\n-                throw new RuntimeException(\n-                        \"Focus is not gained upon mouse click\");\n-            }\n-            System.out.println(\"ok\");\n-        } catch (Exception e) {\n-            throw new RuntimeException(e);\n-        } finally {\n-            window1.dispose();\n-            stop();\n-        }\n-    }\n-}\n","filename":"test\/jdk\/java\/awt\/Window\/FindOwner\/FindOwnerTest.java","additions":0,"deletions":110,"binary":false,"changes":110,"status":"deleted"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2012, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2012, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -25,13 +25,28 @@\n-  @test\n-  @key headful\n-  @bug 7124430\n-  @summary Tests that SunToolkit.grab API works\n-  @author anton.tarasov@oracle.com: area=awt.toolkit\n-  @library ..\/..\/regtesthelpers\n-  @modules java.desktop\/sun.awt\n-  @build Util\n-  @run main GrabTest\n-*\/\n-\n-import java.awt.*;\n-import java.awt.event.*;\n+ * @test\n+ * @key headful\n+ * @bug 7124430\n+ * @summary Tests that SunToolkit.grab API works\n+ * @library ..\/..\/regtesthelpers\n+ * @modules java.desktop\/sun.awt\n+ * @build Util\n+ * @run main GrabTest\n+ *\/\n+\n+\n+import java.awt.AWTEvent;\n+import java.awt.Button;\n+import java.awt.Color;\n+import java.awt.FlowLayout;\n+import java.awt.Point;\n+import java.awt.event.ActionEvent;\n+import java.awt.event.ActionListener;\n+import java.awt.event.InputEvent;\n+import java.awt.event.MouseEvent;\n+import java.awt.Frame;\n+import java.awt.Robot;\n+import java.awt.Toolkit;\n+import java.awt.Window;\n+import java.awt.event.AWTEventListener;\n+import java.awt.event.MouseAdapter;\n+\n+import javax.swing.SwingUtilities;\n@@ -59,1 +74,4 @@\n-    public static void main(String[] args) {\n+    public static void main(String[] args) throws Exception {\n+\n+        robot = new Robot();\n+        robot.setAutoDelay(100);\n@@ -61,1 +79,2 @@\n-        Toolkit.getDefaultToolkit().addAWTEventListener(new AWTEventListener() {\n+        SwingUtilities.invokeAndWait(() -> {\n+            Toolkit.getDefaultToolkit().addAWTEventListener(new AWTEventListener() {\n@@ -70,3 +89,3 @@\n-        f = new Frame(\"Frame\");\n-        f.setBounds(0, 0, 300, 300);\n-        f.addMouseListener(new MouseAdapter() {\n+            f = new Frame(\"Frame\");\n+            f.setBounds(0, 0, 300, 300);\n+            f.addMouseListener(new MouseAdapter() {\n@@ -79,2 +98,2 @@\n-        f1 = new Frame(\"OtherFrame\");\n-        f1.setBounds(700, 100, 300, 300);\n+            f1 = new Frame(\"OtherFrame\");\n+            f1.setBounds(700, 100, 300, 300);\n@@ -82,4 +101,4 @@\n-        w = new Window(f);\n-        w.setLayout(new FlowLayout());\n-        b = new Button(\"Press\");\n-        b.addActionListener(new ActionListener() {\n+            w = new Window(f);\n+            w.setLayout(new FlowLayout());\n+            b = new Button(\"Press\");\n+            b.addActionListener(new ActionListener() {\n@@ -91,4 +110,4 @@\n-        w.add(b);\n-        w.setBounds(400, 100, 300, 300);\n-        w.setBackground(Color.blue);\n-        w.addMouseListener(new MouseAdapter() {\n+            w.add(b);\n+            w.setBounds(400, 100, 300, 300);\n+            w.setBackground(Color.blue);\n+            w.addMouseListener(new MouseAdapter() {\n@@ -101,2 +120,2 @@\n-        f.setVisible(true);\n-        w.setVisible(true);\n+            f.setVisible(true);\n+            w.setVisible(true);\n@@ -104,5 +123,5 @@\n-        frame = new Frame();\n-        window1 = new Window(frame);\n-        window1.setSize(200, 200);\n-        window1.setLocationRelativeTo(null);\n-        window1.setBackground(Color.blue);\n+            frame = new Frame();\n+            window1 = new Window(frame);\n+            window1.setSize(200, 200);\n+            window1.setLocationRelativeTo(null);\n+            window1.setBackground(Color.blue);\n@@ -110,4 +129,4 @@\n-        window2 = new Window(window1);\n-        window2.setSize(100, 100);\n-        window2.setLocationRelativeTo(null);\n-        window2.setBackground(Color.green);\n+            window2 = new Window(window1);\n+            window2.setSize(100, 100);\n+            window2.setLocationRelativeTo(null);\n+            window2.setBackground(Color.green);\n@@ -115,7 +134,2 @@\n-        tk = (sun.awt.SunToolkit)Toolkit.getDefaultToolkit();\n-\n-        try {\n-            robot = new Robot();\n-        } catch (AWTException ex) {\n-            throw new RuntimeException(ex);\n-        }\n+            tk = (sun.awt.SunToolkit)Toolkit.getDefaultToolkit();\n+        });\n@@ -124,1 +138,1 @@\n-\n+        robot.delay(500);\n@@ -134,0 +148,1 @@\n+\n@@ -154,0 +169,1 @@\n+\n@@ -176,0 +192,2 @@\n+        robot.delay(500);\n+\n@@ -177,0 +195,2 @@\n+        Util.waitForIdle(robot);\n+\n@@ -183,0 +203,1 @@\n+\n@@ -189,1 +210,0 @@\n-\n@@ -194,3 +214,3 @@\n-        robot.mousePress(InputEvent.BUTTON1_MASK);\n-        robot.delay(50);\n-        robot.mouseRelease(InputEvent.BUTTON1_MASK);\n+\n+        robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n+        robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n@@ -198,0 +218,1 @@\n+\n@@ -221,0 +242,1 @@\n+        robot.delay(500);\n","filename":"test\/jdk\/java\/awt\/Window\/Grab\/GrabTest.java","additions":74,"deletions":52,"binary":false,"changes":126,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2017, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -54,0 +54,1 @@\n+        r.delay(500);\n","filename":"test\/jdk\/java\/awt\/Window\/SetWindowLocationByPlatformTest\/SetWindowLocationByPlatformTest.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -0,0 +1,69 @@\n+\/*\n+ * Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.awt.color.ColorSpace;\n+import java.awt.color.ICC_Profile;\n+import java.util.Arrays;\n+\n+\/**\n+ * @test\n+ * @bug 8321489\n+ * @summary tests that the cmm id is not ignored\n+ *\/\n+public final class CustomCMMID {\n+\n+    private static final byte[] JAVA_ID = {\n+            (byte) 'j', (byte) 'a', (byte) 'v', (byte) 'a',\n+    };\n+\n+    private static final int[] CS = {\n+            ColorSpace.CS_CIEXYZ, ColorSpace.CS_GRAY, ColorSpace.CS_LINEAR_RGB,\n+            ColorSpace.CS_PYCC, ColorSpace.CS_sRGB\n+    };\n+\n+    public static void main(String[] args) {\n+        for (int cs : CS) {\n+            ICC_Profile p = createProfile(cs);\n+            validate(p);\n+        }\n+    }\n+\n+    private static ICC_Profile createProfile(int type) {\n+        byte[] data = ICC_Profile.getInstance(type).getData();\n+        System.arraycopy(JAVA_ID, 0, data, ICC_Profile.icHdrCmmId,\n+                         JAVA_ID.length);\n+        return ICC_Profile.getInstance(data);\n+    }\n+\n+    private static void validate(ICC_Profile p) {\n+        byte[] header = p.getData(ICC_Profile.icSigHead);\n+        byte[] id = new byte[JAVA_ID.length];\n+        System.arraycopy(header, ICC_Profile.icHdrCmmId, id, 0, JAVA_ID.length);\n+\n+        if (!java.util.Arrays.equals(id, JAVA_ID)) {\n+            System.err.println(\"Expected: \" + Arrays.toString(JAVA_ID));\n+            System.err.println(\"Actual: \" + Arrays.toString(id));\n+            throw new RuntimeException(\"Wrong cmm id\");\n+        }\n+    }\n+}\n","filename":"test\/jdk\/java\/awt\/color\/ICC_Profile\/CustomCMMID.java","additions":69,"deletions":0,"binary":false,"changes":69,"status":"added"},{"patch":"@@ -0,0 +1,214 @@\n+\/*\n+ * Copyright (c) 2014, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.awt.AWTEvent;\n+import java.awt.Component;\n+import java.awt.Dimension;\n+import java.awt.Frame;\n+import java.awt.Point;\n+import java.awt.Robot;\n+import java.awt.datatransfer.StringSelection;\n+import java.awt.datatransfer.Transferable;\n+import java.awt.dnd.DnDConstants;\n+import java.awt.dnd.DragGestureEvent;\n+import java.awt.dnd.DragGestureListener;\n+import java.awt.dnd.DragSource;\n+import java.awt.dnd.DragSourceAdapter;\n+import java.awt.dnd.DragSourceDragEvent;\n+import java.awt.dnd.DragSourceListener;\n+import java.awt.event.AWTEventListener;\n+import java.awt.event.InputEvent;\n+import java.awt.event.MouseEvent;\n+import java.awt.event.MouseMotionAdapter;\n+import java.awt.event.MouseMotionListener;\n+import javax.swing.SwingUtilities;\n+\n+\/*\n+ * @test\n+ * @bug 4613903\n+ * @summary verifies that mouse events are not dispatched during drag\n+ * @key headful\n+ * @run main MouseEventAfterStartDragTest\n+ *\/\n+\n+public final class MouseEventAfterStartDragTest implements AWTEventListener {\n+    final Frame frame = new Frame();\n+    volatile Point srcPoint;\n+    volatile Dimension d;\n+    volatile MouseEvent lastMouseEvent = null;\n+    volatile boolean passed = true;\n+    final DragSource dragSource = DragSource.getDefaultDragSource();\n+    final Transferable transferable = new StringSelection(\"TEXT\");\n+\n+    final MouseMotionListener mouseMotionListener = new MouseMotionAdapter() {\n+        public void mouseDragged(MouseEvent e) {\n+            System.out.println(\"mouseDragged: \" + e\n+                    + \", hash:\" + e.hashCode());\n+            if (lastMouseEvent != null && !e.equals(lastMouseEvent)) {\n+                System.out.println(\"Unexpected: \" + e\n+                        + \", hash:\" + e.hashCode());\n+                passed = false;\n+            }\n+        }\n+    };\n+\n+    final DragSourceListener dragSourceListener = new DragSourceAdapter() {\n+        public void dragDropEnd(DragSourceDragEvent dsde) {\n+            System.out.println(\"dragDropEnd: \" + dsde);\n+            lastMouseEvent = null;\n+        }\n+    };\n+\n+    final DragGestureListener dragGestureListener = new DragGestureListener() {\n+        public void dragGestureRecognized(DragGestureEvent dge) {\n+            System.out.println(\"dragGestureRecognized: \" + dge);\n+            Object[] events = dge.toArray();\n+            Object lastEvent = events[events.length - 1];\n+            if (lastEvent instanceof MouseEvent) {\n+                lastMouseEvent = (MouseEvent) lastEvent;\n+            }\n+            System.out.println(\"The last mouse event: \" + lastMouseEvent\n+                    + \", hash:\" + lastMouseEvent.hashCode());\n+            dge.startDrag(null, transferable, dragSourceListener);\n+        }\n+    };\n+\n+    static final Object SYNC_LOCK = new Object();\n+    static final int MOUSE_RELEASE_TIMEOUT = 1000;\n+    volatile Component clickedComponent = null;\n+\n+    public static void main(String[] args) throws Exception {\n+        System.setProperty(\"awt.dnd.drag.threshold\", \"0\");\n+        MouseEventAfterStartDragTest app = new MouseEventAfterStartDragTest();\n+        try {\n+            app.createAndShowGUI();\n+            app.test();\n+        } finally {\n+            app.dispose();\n+        }\n+    }\n+\n+    public void createAndShowGUI() throws Exception {\n+        SwingUtilities.invokeAndWait(() -> {\n+            frame.setTitle(\"Test frame\");\n+            frame.setBounds(100, 100, 200, 200);\n+            frame.setLocationRelativeTo(null);\n+            frame.addMouseMotionListener(mouseMotionListener);\n+            dragSource.createDefaultDragGestureRecognizer(frame, DnDConstants.ACTION_COPY_OR_MOVE,\n+                    dragGestureListener);\n+\n+            frame.getToolkit().addAWTEventListener(this, AWTEvent.MOUSE_EVENT_MASK);\n+            frame.setVisible(true);\n+        });\n+    }\n+\n+    public static int sign(int n) {\n+        return n < 0 ? -1 : n == 0 ? 0 : 1;\n+    }\n+\n+    public void test() throws Exception {\n+        final Robot robot = new Robot();\n+        robot.setAutoDelay(45);\n+        robot.waitForIdle();\n+\n+        SwingUtilities.invokeAndWait(() -> {\n+            srcPoint = frame.getLocationOnScreen();\n+            d = frame.getSize();\n+        });\n+        srcPoint.translate(d.width \/ 2, d.height \/ 2);\n+\n+        if (!pointInComponent(robot, srcPoint, frame)) {\n+            System.err.println(\"WARNING: Couldn't locate source frame.\");\n+            return;\n+        }\n+\n+        final Point dstPoint = new Point(srcPoint);\n+        dstPoint.translate(d.width \/ 4, d.height \/ 4);\n+\n+        if (!pointInComponent(robot, dstPoint, frame)) {\n+            System.err.println(\"WARNING: Couldn't locate target frame.\");\n+            return;\n+        }\n+\n+        robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n+        robot.mouseMove(srcPoint.x, srcPoint.y);\n+        robot.delay(250);\n+        System.out.println(\"srcPoint = \" + srcPoint);\n+        for (; !srcPoint.equals(dstPoint);\n+                srcPoint.translate(sign(dstPoint.x - srcPoint.x),\n+                sign(dstPoint.y - srcPoint.y))) {\n+            robot.mouseMove(srcPoint.x, srcPoint.y);\n+            System.out.println(\"srcPoint = \" + srcPoint);\n+        }\n+\n+        robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n+        System.out.println(\"done\");\n+        robot.waitForIdle();\n+        robot.delay(MOUSE_RELEASE_TIMEOUT);\n+\n+        if (!passed) {\n+            throw new RuntimeException(\"Test failed\");\n+        }\n+    }\n+\n+    public void dispose() throws Exception {\n+        SwingUtilities.invokeAndWait(() -> {\n+            if (frame != null) {\n+                frame.dispose();\n+            }\n+        });\n+    }\n+\n+    public void reset() {\n+        clickedComponent = null;\n+    }\n+\n+    public void eventDispatched(AWTEvent e) {\n+        if (e.getID() == MouseEvent.MOUSE_RELEASED) {\n+            clickedComponent = (Component) e.getSource();\n+            synchronized (SYNC_LOCK) {\n+                SYNC_LOCK.notifyAll();\n+            }\n+        }\n+    }\n+\n+    boolean pointInComponent(Robot robot, Point p, Component comp)\n+            throws InterruptedException {\n+        robot.waitForIdle();\n+        reset();\n+        robot.mouseMove(p.x, p.y);\n+        robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n+        synchronized (SYNC_LOCK) {\n+            robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n+            SYNC_LOCK.wait(MOUSE_RELEASE_TIMEOUT);\n+        }\n+\n+        Component c = clickedComponent;\n+\n+        while (c != null && c != comp) {\n+            c = c.getParent();\n+        }\n+\n+        return c == comp;\n+    }\n+}\n","filename":"test\/jdk\/java\/awt\/dnd\/MouseEventAfterStartDragTest\/MouseEventAfterStartDragTest.java","additions":214,"deletions":0,"binary":false,"changes":214,"status":"added"},{"patch":"@@ -0,0 +1,136 @@\n+\/*\n+ * Copyright (c) 1998, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.awt.BorderLayout;\n+import java.awt.Button;\n+import java.awt.Color;\n+import java.awt.Event;\n+import java.awt.EventQueue;\n+import java.awt.Frame;\n+import java.awt.Label;\n+import java.awt.Robot;\n+import java.awt.TextArea;\n+import java.awt.event.KeyEvent;\n+\n+\/*\n+ * @test\n+ * @bug 4011219\n+ * @summary Test for function key press\/release received by Java client.\n+ * @key headful\n+ *\/\n+\n+public class FunctionKeyTest {\n+    private static FunctionKeyTester frame;\n+    private static Robot robot;\n+\n+    static volatile boolean keyPressReceived;\n+    static volatile boolean keyReleaseReceived;\n+\n+    static final StringBuilder failures = new StringBuilder();\n+\n+    private static void testKey(int keyCode, String keyText) {\n+        keyPressReceived = false;\n+        keyReleaseReceived = false;\n+\n+        robot.keyPress(keyCode);\n+\n+        if (!keyPressReceived) {\n+            failures.append(keyText).append(\" key press is not received\\n\");\n+        }\n+\n+        robot.keyRelease(keyCode);\n+\n+        if (!keyReleaseReceived) {\n+            failures.append(keyText).append(\" key release is not received\\n\");\n+        }\n+    }\n+\n+    public static void main(String[] args) throws Exception {\n+        robot = new Robot();\n+        robot.setAutoWaitForIdle(true);\n+        robot.setAutoDelay(150);\n+\n+        try {\n+            EventQueue.invokeAndWait(() -> {\n+                frame = new FunctionKeyTester();\n+                frame.setSize(200, 200);\n+                frame.setLocationRelativeTo(null);\n+                frame.setVisible(true);\n+            });\n+\n+            robot.waitForIdle();\n+            robot.delay(1000);\n+\n+            testKey(KeyEvent.VK_F11, \"F11\");\n+            testKey(KeyEvent.VK_F12, \"F12\");\n+        } finally {\n+            EventQueue.invokeAndWait(() -> {\n+                if (frame != null) {\n+                    frame.dispose();\n+                }\n+            });\n+        }\n+\n+        if (failures.isEmpty()) {\n+            System.out.println(\"Passed\");\n+        } else {\n+            throw new RuntimeException(failures.toString());\n+        }\n+    }\n+}\n+\n+class FunctionKeyTester extends Frame {\n+    Label l = new Label (\"NULL\");\n+    Button b = new Button();\n+    TextArea log = new TextArea();\n+\n+    FunctionKeyTester() {\n+        super(\"Function Key Test\");\n+        this.setLayout(new BorderLayout());\n+        this.add(BorderLayout.NORTH, l);\n+        this.add(BorderLayout.SOUTH, b);\n+        this.add(BorderLayout.CENTER, log);\n+        log.setFocusable(false);\n+        log.setEditable(false);\n+        l.setBackground(Color.red);\n+        setSize(200, 200);\n+    }\n+\n+    public boolean handleEvent(Event e) {\n+        String message = \"e.id=\" + e.id + \"\\n\";\n+        System.out.print(message);\n+        log.append(message);\n+\n+        switch (e.id) {\n+            case 403 -> FunctionKeyTest.keyPressReceived = true;\n+            case 404 -> FunctionKeyTest.keyReleaseReceived = true;\n+        }\n+\n+        return super.handleEvent(e);\n+    }\n+\n+    public boolean keyDown(Event e, int key) {\n+        l.setText(\"e.key=\" + Integer.valueOf(e.key).toString());\n+        return false;\n+    }\n+}\n","filename":"test\/jdk\/java\/awt\/event\/KeyEvent\/FunctionKeyTest.java","additions":136,"deletions":0,"binary":false,"changes":136,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2012, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2012, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,14 +24,0 @@\n-\/*\n-  @test\n-  @key headful\n-  @bug       7154072 7161320\n-  @summary   Tests that key events with modifiers are not swallowed.\n-  @author    anton.tarasov: area=awt.focus\n-  @library   ..\/..\/..\/regtesthelpers\n-  @library \/test\/lib\n-  @modules java.desktop\/sun.awt\n-  @build jdk.test.lib.Platform\n-  @build     Util\n-  @run       main SwallowKeyEvents\n-*\/\n-\n@@ -47,0 +33,14 @@\n+\/*\n+  @test\n+  @key headful\n+  @bug 7154072 7161320\n+  @summary Tests that key events with modifiers are not swallowed.\n+  @requires (os.family != \"windows\")\n+  @library \/java\/awt\/regtesthelpers\n+  @library \/test\/lib\n+  @modules java.desktop\/sun.awt\n+  @build jdk.test.lib.Platform\n+  @build Util\n+  @run main SwallowKeyEvents\n+*\/\n+\n@@ -86,0 +86,2 @@\n+        r.waitForIdle();\n+        r.delay(500);\n","filename":"test\/jdk\/java\/awt\/event\/KeyEvent\/SwallowKeyEvents\/SwallowKeyEvents.java","additions":17,"deletions":15,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,0 +24,10 @@\n+import java.awt.EventQueue;\n+import java.awt.Frame;\n+import java.awt.Robot;\n+import java.awt.event.InputEvent;\n+import java.awt.event.KeyEvent;\n+import java.awt.event.MouseEvent;\n+import java.awt.event.MouseListener;\n+import java.awt.event.WindowAdapter;\n+import java.awt.event.WindowEvent;\n+\n@@ -25,1 +35,1 @@\n-  @test 1.2 98\/08\/05\n+  @test\n@@ -29,1 +39,0 @@\n-  @author andrei.dmitriev: area=awt.mouse\n@@ -33,9 +42,1 @@\n-\/**\n- * ClickDuringKeypress.java\n- *\n- * summary:\n- *\/\n-\n-import java.applet.Applet;\n-import java.awt.*;\n-import java.awt.event.*;\n+public class ClickDuringKeypress implements MouseListener {\n@@ -43,3 +44,0 @@\n-public class ClickDuringKeypress implements MouseListener\n- {\n-   \/\/Declare things used in the test, like buttons and labels here\n@@ -47,14 +45,27 @@\n-   final static int DOUBLE_CLICK_AUTO_DELAY = 10;\n-   volatile int lastClickCount = 0;\n-   volatile boolean clicked = false;\n-   volatile boolean ready = false;\n-\n-   Frame frame;\n-   Robot robot;\n-\n-   public void init()\n-    {\n-      \/\/Create instructions for the user here, as well as set up\n-      \/\/ the environment -- set the layout manager, add buttons,\n-      \/\/ etc.\n-\n+   final static int DOUBLE_CLICK_AUTO_DELAY = 20;\n+   static volatile int lastClickCount = 0;\n+   static volatile boolean clicked = false;\n+   static volatile boolean ready = false;\n+\n+   static volatile Frame frame;\n+   static volatile Robot robot;\n+   static final ClickDuringKeypress clicker = new ClickDuringKeypress();\n+\n+   public static void main(String[] args) throws Exception {\n+       try {\n+           EventQueue.invokeAndWait(ClickDuringKeypress::createUI);\n+           robot = new Robot();\n+           robot.setAutoWaitForIdle(true);\n+           robot.delay(2000);\n+           robot.mouseMove(200, 200);\n+           robot.delay(2000);\n+           EventQueue.invokeAndWait(() -> frame.setVisible(true));\n+           doTest();\n+       } finally {\n+           if (frame != null) {\n+               EventQueue.invokeAndWait(frame::dispose);\n+           }\n+       }\n+   }\n+\n+   static void createUI() {\n@@ -62,1 +73,1 @@\n-      frame.addMouseListener(this);\n+      frame.addMouseListener(clicker);\n@@ -65,1 +76,0 @@\n-              synchronized(ClickDuringKeypress.this) {\n@@ -67,2 +77,0 @@\n-                  ClickDuringKeypress.this.notifyAll();\n-              }\n@@ -72,0 +80,1 @@\n+    }\n@@ -73,27 +82,6 @@\n-      start();\n-\n-    }\/\/End  init()\n-\n-   public void start ()\n-    {\n-      try {\n-        robot = new Robot();\n-      } catch (AWTException e) {\n-        System.out.println(\"Could not create Robot.\");\n-        throw new RuntimeException(\"Couldn't create Robot.  Test fails\");\n-      }\n-\n-      robot.mouseMove(200, 200);\n-      frame.show();\n-\n-      synchronized(this) {\n-          try {\n-              if (!ready) {\n-                  wait(10000);\n-              }\n-          } catch (InterruptedException ex) {\n-          }\n-          if (!ready) {\n-              System.out.println(\"Not Activated. Test fails\");\n-              throw new RuntimeException(\"Not Activated. Test fails\");\n-          }\n+    static void doTest() throws Exception {\n+       robot.waitForIdle();\n+       robot.delay(1000);\n+       if (!ready) {\n+           System.out.println(\"Not Activated. Test fails\");\n+           throw new RuntimeException(\"Not Activated. Test fails\");\n@@ -101,12 +89,1 @@\n-\n-      doTest();\n-\n-      \/\/What would normally go into main() will probably go here.\n-      \/\/Use System.out.println for diagnostic messages that you want\n-      \/\/to read after the test is done.\n-      \/\/Use Sysout.println for messages you want the tester to read.\n-\n-    }\/\/ start()\n-\n-    \/\/ Mouse should be over the Frame by this point\n-    private void doTest() {\n+      \/\/ Mouse should be over the Frame by this point\n@@ -116,3 +93,2 @@\n-      robot.mousePress(InputEvent.BUTTON1_MASK);\n-      robot.delay(10);\n-      robot.mouseRelease(InputEvent.BUTTON1_MASK);\n+      robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n+      robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n@@ -125,3 +101,2 @@\n-        robot.mousePress(InputEvent.BUTTON1_MASK);\n-        robot.delay(10);\n-        robot.mouseRelease(InputEvent.BUTTON1_MASK);\n+        robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n+        robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n@@ -129,1 +104,0 @@\n-        robot.delay(10);\n@@ -131,3 +105,2 @@\n-        robot.mousePress(InputEvent.BUTTON1_MASK);\n-        robot.delay(10);\n-        robot.mouseRelease(InputEvent.BUTTON1_MASK);\n+        robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n+        robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n@@ -159,6 +132,1 @@\n-\n-     public static void main(String[] args) {\n-         new ClickDuringKeypress().init();\n-     }\n-\n- }\/\/ class ClickDuringKeypress\n+}\n","filename":"test\/jdk\/java\/awt\/event\/MouseEvent\/ClickDuringKeypress\/ClickDuringKeypress.java","additions":56,"deletions":88,"binary":false,"changes":144,"status":"modified"},{"patch":"@@ -0,0 +1,103 @@\n+\/*\n+ * Copyright (c) 2001, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.awt.Color;\n+import java.awt.Dimension;\n+import java.awt.Font;\n+import java.awt.Graphics;\n+import java.awt.Graphics2D;\n+import java.awt.font.FontRenderContext;\n+import java.awt.font.TextLayout;\n+\n+import javax.swing.JPanel;\n+\n+\/*\n+ * @test\n+ * @bug 4427483\n+ * @summary Arabic text followed by newline should have no missing glyphs\n+ * @library \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame\n+ * @run main\/manual ArabicBox\n+ *\/\n+public final class ArabicBox {\n+\n+    private static final String TEXT =\n+            \"\\u0627\\u0644\\u0639\\u0631\\u0628\\u064A\\u0629\\n\";\n+\n+    private static final String FONT_NAME = Font.DIALOG;\n+\n+    private static final String INSTRUCTIONS = \"\"\"\n+            In the below panel, you should see the following text:\n+\n+            \"\"\"\n+            + TEXT + \"\"\"\n+            (It's \\u2018Arabic\\u2019 in Arabic.)\n+\n+            If there are no 'box glyphs' for missing glyphs,\n+            press Pass; otherwise, press Fail.\"\"\";\n+\n+    public static void main(String[] args) throws Exception {\n+        final Font font = new Font(FONT_NAME, Font.PLAIN, 24);\n+        System.out.println(\"asked for \" + FONT_NAME + \" and got: \" + font.getFontName());\n+\n+        PassFailJFrame.builder()\n+                      .title(\"Arabic Box\")\n+                      .instructions(INSTRUCTIONS)\n+                      .rows(7)\n+                      .columns(40)\n+                      .splitUIBottom(() -> createPanel(font))\n+                      .build()\n+                      .awaitAndCheck();\n+    }\n+\n+    private static JPanel createPanel(Font font) {\n+        return new TextPanel(font);\n+    }\n+\n+    private static final class TextPanel extends JPanel {\n+        private TextLayout layout;\n+\n+        private TextPanel(Font font) {\n+            setForeground(Color.black);\n+            setBackground(Color.white);\n+            setFont(font);\n+            setPreferredSize(new Dimension(300, 150));\n+        }\n+\n+        @Override\n+        public void paint(Graphics g) {\n+            super.paint(g);\n+            Graphics2D g2d = (Graphics2D)g;\n+            if (layout == null) {\n+                Font font = g2d.getFont();\n+                FontRenderContext frc = g2d.getFontRenderContext();\n+\n+                layout = new TextLayout(TEXT, font, frc);\n+                System.out.println(layout.getBounds());\n+            }\n+\n+            layout.draw(g2d, 10, 50);\n+            g2d.drawString(TEXT, 10, 100);\n+        }\n+    }\n+}\n","filename":"test\/jdk\/java\/awt\/font\/TextLayout\/ArabicBox.java","additions":103,"deletions":0,"binary":false,"changes":103,"status":"added"},{"patch":"@@ -1,52 +0,0 @@\n-<!--\n- Copyright (c) 1999, 2016, Oracle and\/or its affiliates. All rights reserved.\n- DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n-\n- This code is free software; you can redistribute it and\/or modify it\n- under the terms of the GNU General Public License version 2 only, as\n- published by the Free Software Foundation.\n- \n- This code is distributed in the hope that it will be useful, but WITHOUT\n- ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- version 2 for more details (a copy is included in the LICENSE file that\n- accompanied this code).\n- \n- You should have received a copy of the GNU General Public License version\n- 2 along with this work; if not, write to the Free Software Foundation,\n- Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- \n- Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- or visit www.oracle.com if you need additional information or have any\n- questions.\n---> \n-\n-<html>\n-<head>\n-<title>Test Justification<\/title>\n-<\/head>\n-<body>\n-<!--\n- @test\n- @bug 4211728 4178140 8145542\n- @summary Justify several lines of text and verify that the lines are the same\n- length and cursor positions are correct.\n-Bug 4211728:  TextLayout.draw() draws characters at wrong position.\n-Bug 4178140:  TextLayout does not justify\n- @run applet\/manual=yesno TestJustification.html\n--->\n-<h3>Test Justification<\/h1>\n-<hr>\n-<p>Five lines of text should appear, all justified to the same width,\n-followed by a sixth line containing only roman characters and no spaces\n-which is not justified, and instead is centered.\n-Carets should appear between all characters. Pass the test if this is\n-true.\n-<p>\n-<applet code=TestJustification.class width=500 height=500>\n-alt=\"Your browser understands the &lt;APPLET&gt; tag but isn't running the applet, for some reason.\"\n-Your browser is completely ignoring the &lt;APPLET&gt; tag!\n-<\/applet>\n-<\/body>\n-<\/html>\n-\n","filename":"test\/jdk\/java\/awt\/font\/TextLayout\/TestJustification.html","additions":0,"deletions":52,"binary":false,"changes":52,"status":"deleted"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1999, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1999, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,0 +24,18 @@\n+import java.awt.Color;\n+import java.awt.Dimension;\n+import java.awt.Font;\n+import java.awt.Frame;\n+import java.awt.Graphics;\n+import java.awt.Graphics2D;\n+import java.awt.Insets;\n+import java.awt.Panel;\n+import java.awt.Rectangle;\n+import java.awt.Shape;\n+import java.awt.font.FontRenderContext;\n+import java.awt.font.LineBreakMeasurer;\n+import java.awt.font.TextAttribute;\n+import java.awt.font.TextLayout;\n+import java.awt.geom.Rectangle2D;\n+import java.text.AttributedCharacterIterator;\n+import java.text.AttributedString;\n+\n@@ -25,2 +43,9 @@\n- *\n- * See TestJustification.html for main test.\n+ * @test\n+ * @bug 4211728 4178140 8145542\n+ * @summary Justify several lines of text and verify that the lines are the same\n+   length and cursor positions are correct.\n+   Bug 4211728: TextLayout.draw() draws characters at wrong position.\n+   Bug 4178140: TextLayout does not justify.\n+ * @library \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame\n+ * @run main\/manual TestJustification\n@@ -29,55 +54,20 @@\n-import java.applet.*;\n-import java.awt.*;\n-import java.awt.event.*;\n-import java.awt.font.*;\n-import java.awt.geom.*;\n-import java.text.*;\n-\n-public class TestJustification extends Applet {\n-  JustificationPanel panel;\n-\n-  public void init() {\n-    setLayout(new BorderLayout());\n-    panel = new JustificationPanel(\"Bitstream Cyberbit\");\n-    add(\"Center\", panel);\n-  }\n-\n-  public void destroy() {\n-    remove(panel);\n-  }\n-\n-  \/\/ calls system.exit, not for use in tests.\n-  public static void main(String args[]) {\n-    TestJustification justificationTest = new TestJustification();\n-    justificationTest.init();\n-    justificationTest.start();\n-\n-    Frame f = new Frame(\"Test Justification\");\n-    f.addWindowListener(new WindowAdapter() {\n-      public void windowClosing(WindowEvent e) {\n-        System.exit(0);\n-      }\n-    });\n-\n-    f.add(\"Center\", justificationTest);\n-    f.setSize(500, 500);\n-    f.show();\n-  }\n-\n-  public String getAppletInfo() {\n-    return \"Test TextLayout.getJustifiedLayout()\";\n-  }\n-\n-  static class JustificationPanel extends Panel {\n-    TextLayout[] layouts;\n-    String fontname;\n-    float height;\n-    float oldfsize;\n-\n-    AttributedCharacterIterator lineText;\n-    TextLayout[] lines;\n-    int linecount;\n-    float oldwidth;\n-\n-    JustificationPanel(String fontname) {\n-      this.fontname = fontname;\n+public class TestJustification {\n+    private static final String INSTRUCTIONS = \"\"\"\n+            Five lines of text should appear, all justified to the same width,\n+            followed by a sixth line containing only roman characters and\n+            no spaces which is not justified, and instead is centered.\n+            Carets should appear between all characters.\n+\n+            PASS the test if this is true, else press FAIL.\n+            \"\"\";\n+\n+    public static void main(String[] args) throws Exception {\n+\n+        PassFailJFrame.builder()\n+                      .title(\"Test Instructions\")\n+                      .instructions(INSTRUCTIONS)\n+                      .rows((int) INSTRUCTIONS.lines().count() + 2)\n+                      .columns(35)\n+                      .testUI(TestJustification::createUI)\n+                      .build()\n+                      .awaitAndCheck();\n@@ -86,8 +76,8 @@\n-    private static final String[] texts = {\n-      \"This is an english Highlighting demo.\", \"Highlighting\",\n-      \"This is an arabic \\u0627\\u0628\\u062a\\u062c \\u062e\\u0644\\u0627\\u062e demo.\", \"arabic \\u0627\\u0628\\u062a\\u062c\",\n-      \"This is a hebrew \\u05d0\\u05d1\\u05d2 \\u05d3\\u05d4\\u05d5 demo.\", \"hebrew \\u05d0\\u05d1\\u05d2\",\n-      \"This is a cjk \\u4e00\\u4e01\\u4e02\\uac00\\uac01\\uc4fa\\uf900\\uf901\\uf902 demo.\", \"cjk\",\n-      \"NoSpaceCJK:\\u4e00\\u4e01\\u4e02and\\uac00\\uac01\\uc4faand\\uf900\\uf901\\uf902\", \"No\",\n-      \"NoSpaceRoman\", \"Space\"\n-    };\n+    private static Frame createUI() {\n+        Frame frame= new Frame(\"Test Text Justification\");\n+        JustificationPanel panel = new JustificationPanel(\"Bitstream Cyberbit\");\n+        frame.add(panel);\n+        frame.add(\"Center\", panel);\n+        frame.setSize(500, 450);\n+        return frame;\n+    }\n@@ -95,2 +85,5 @@\n-    public void paint(Graphics g) {\n-      Graphics2D g2d = (Graphics2D)g;\n+    static class JustificationPanel extends Panel {\n+        TextLayout[] layouts;\n+        String fontname;\n+        float height;\n+        float oldfsize;\n@@ -98,2 +91,4 @@\n-      Dimension d = getSize();\n-      Insets insets = getInsets();\n+        AttributedCharacterIterator lineText;\n+        TextLayout[] lines;\n+        int linecount;\n+        float oldwidth;\n@@ -101,3 +96,3 @@\n-      float w = d.width - insets.left - insets.right;\n-      float h = d.height - insets.top - insets.bottom;\n-      int fsize = (int)w\/25;\n+        JustificationPanel(String fontname) {\n+            this.fontname = fontname;\n+        }\n@@ -105,1 +100,8 @@\n-      FontRenderContext frc = g2d.getFontRenderContext();\n+        private static final String[] texts = {\n+                \"This is an english Highlighting demo.\", \"Highlighting\",\n+                \"This is an arabic \\u0627\\u0628\\u062a\\u062c \\u062e\\u0644\\u0627\\u062e demo.\", \"arabic \\u0627\\u0628\\u062a\\u062c\",\n+                \"This is a hebrew \\u05d0\\u05d1\\u05d2 \\u05d3\\u05d4\\u05d5 demo.\", \"hebrew \\u05d0\\u05d1\\u05d2\",\n+                \"This is a cjk \\u4e00\\u4e01\\u4e02\\uac00\\uac01\\uc4fa\\uf900\\uf901\\uf902 demo.\", \"cjk\",\n+                \"NoSpaceCJK:\\u4e00\\u4e01\\u4e02and\\uac00\\uac01\\uc4faand\\uf900\\uf901\\uf902\", \"No\",\n+                \"NoSpaceRoman\", \"Space\"\n+        };\n@@ -107,2 +109,2 @@\n-      if (layouts == null || fsize != oldfsize) {\n-        oldfsize = fsize;\n+        public void paint(Graphics g) {\n+            Graphics2D g2d = (Graphics2D)g;\n@@ -110,2 +112,2 @@\n-        Font f0 = new Font(fontname, Font.PLAIN, fsize);\n-        Font f1 = new Font(fontname, Font.ITALIC, (int)(fsize * 1.5));\n+            Dimension d = getSize();\n+            Insets insets = getInsets();\n@@ -113,3 +115,3 @@\n-        if (layouts == null) {\n-          layouts = new TextLayout[texts.length \/ 2];\n-        }\n+            float w = d.width - insets.left - insets.right;\n+            float h = d.height - insets.top - insets.bottom;\n+            int fsize = (int)w\/25;\n@@ -117,4 +119,1 @@\n-        height = 0;\n-        for (int i = 0; i < layouts.length; ++i) {\n-          String text = texts[i*2];\n-          String target = texts[i*2+1];\n+            FontRenderContext frc = g2d.getFontRenderContext();\n@@ -122,2 +121,2 @@\n-          AttributedString astr = new AttributedString(text);\n-          astr.addAttribute(TextAttribute.FONT, f0, 0, text.length());\n+            if (layouts == null || fsize != oldfsize) {\n+                oldfsize = fsize;\n@@ -125,3 +124,2 @@\n-          int start = text.indexOf(target);\n-          int limit = start + target.length();\n-          astr.addAttribute(TextAttribute.FONT, f1, start, limit);\n+                Font f0 = new Font(fontname, Font.PLAIN, fsize);\n+                Font f1 = new Font(fontname, Font.ITALIC, (int)(fsize * 1.5));\n@@ -129,1 +127,3 @@\n-          TextLayout layout = new TextLayout(astr.getIterator(), frc);\n+                if (layouts == null) {\n+                    layouts = new TextLayout[texts.length \/ 2];\n+                }\n@@ -131,1 +131,4 @@\n-          layout = layout.getJustifiedLayout(w - 20);\n+                height = 0;\n+                for (int i = 0; i < layouts.length; ++i) {\n+                    String text = texts[i*2];\n+                    String target = texts[i*2+1];\n@@ -133,1 +136,8 @@\n-          layouts[i] = layout;\n+                    AttributedString astr = new AttributedString(text);\n+                    astr.addAttribute(TextAttribute.FONT, f0, 0, text.length());\n+\n+                    int start = text.indexOf(target);\n+                    int limit = start + target.length();\n+                    astr.addAttribute(TextAttribute.FONT, f1, start, limit);\n+\n+                    TextLayout layout = new TextLayout(astr.getIterator(), frc);\n@@ -135,3 +145,3 @@\n-          height += layout.getAscent() + layout.getDescent() + layout.getLeading();\n-        }\n-      }\n+                    layout = layout.getJustifiedLayout(w - 20);\n+\n+                    layouts[i] = layout;\n@@ -139,2 +149,3 @@\n-      g2d.setColor(Color.white);\n-      g2d.fill(new Rectangle.Float(insets.left, insets.top, w, h));\n+                    height += layout.getAscent() + layout.getDescent() + layout.getLeading();\n+                }\n+            }\n@@ -142,1 +153,2 @@\n-      float basey = 20;\n+            g2d.setColor(Color.white);\n+            g2d.fill(new Rectangle.Float(insets.left, insets.top, w, h));\n@@ -144,2 +156,1 @@\n-      for (int i = 0; i < layouts.length; ++i) {\n-        TextLayout layout = layouts[i];\n+            float basey = 20;\n@@ -147,7 +158,8 @@\n-        float la = layout.getAscent();\n-        float ld = layout.getDescent();\n-        float ll = layout.getLeading();\n-        float lw = layout.getAdvance();\n-        float lh = la + ld + ll;\n-        float lx = (w - lw) \/ 2f;\n-        float ly = basey + layout.getAscent();\n+            for (TextLayout layout : layouts) {\n+                float la = layout.getAscent();\n+                float ld = layout.getDescent();\n+                float ll = layout.getLeading();\n+                float lw = layout.getAdvance();\n+                float lh = la + ld + ll;\n+                float lx = (w - lw) \/ 2f;\n+                float ly = basey + layout.getAscent();\n@@ -155,2 +167,2 @@\n-        g2d.setColor(Color.black);\n-        g2d.translate(insets.left + lx, insets.top + ly);\n+                g2d.setColor(Color.black);\n+                g2d.translate(insets.left + lx, insets.top + ly);\n@@ -158,2 +170,2 @@\n-        Rectangle2D bounds = new Rectangle2D.Float(0, -la, lw, lh);\n-        g2d.draw(bounds);\n+                Rectangle2D bounds = new Rectangle2D.Float(0, -la, lw, lh);\n+                g2d.draw(bounds);\n@@ -161,1 +173,1 @@\n-        layout.draw(g2d, 0, 0);\n+                layout.draw(g2d, 0, 0);\n@@ -163,5 +175,5 @@\n-        g2d.setColor(Color.red);\n-        for (int j = 0, e = layout.getCharacterCount(); j <= e; ++j) {\n-          Shape[] carets = layout.getCaretShapes(j, bounds);\n-          g2d.draw(carets[0]);\n-        }\n+                g2d.setColor(Color.red);\n+                for (int j = 0, e = layout.getCharacterCount(); j <= e; ++j) {\n+                    Shape[] carets = layout.getCaretShapes(j, bounds);\n+                    g2d.draw(carets[0]);\n+                }\n@@ -169,62 +181,3 @@\n-        g2d.translate(-insets.left - lx, -insets.top - ly);\n-        basey += layout.getAscent() + layout.getDescent() + layout.getLeading();\n-      }\n-\n-      \/\/ add LineBreakMeasurer-generated layouts\n-\n-      if (lineText == null) {\n-        String text = \"This is a long line of text that should be broken across multiple \"\n-          + \"lines and then justified to fit the break width.  This test should pass if \"\n-          + \"these lines are justified to the same width, and fail otherwise.  It should \"\n-          + \"also format the hebrew (\\u05d0\\u05d1\\u05d2 \\u05d3\\u05d4\\u05d5) and arabic \"\n-          + \"(\\u0627\\u0628\\u062a\\u062c \\u062e\\u0644\\u0627\\u062e) and CJK \"\n-          + \"(\\u4e00\\u4e01\\u4e02\\uac00\\uac01\\uc4fa\\u67b1\\u67b2\\u67b3\\u67b4\\u67b5\\u67b6\\u67b7\"\n-          + \"\\u67b8\\u67b9) text correctly.\";\n-\n-        Float regular = new Float(16.0);\n-        Float big = new Float(24.0);\n-        AttributedString astr = new AttributedString(text);\n-        astr.addAttribute(TextAttribute.SIZE, regular, 0, text.length());\n-        astr.addAttribute(TextAttribute.FAMILY, fontname, 0, text.length());\n-\n-        int ix = text.indexOf(\"broken\");\n-        astr.addAttribute(TextAttribute.SIZE, big, ix, ix + 6);\n-        ix = text.indexOf(\"hebrew\");\n-        astr.addAttribute(TextAttribute.SIZE, big, ix, ix + 6);\n-        ix = text.indexOf(\"arabic\");\n-        astr.addAttribute(TextAttribute.SIZE, big, ix, ix + 6);\n-        ix = text.indexOf(\"CJK\");\n-        astr.addAttribute(TextAttribute.SIZE, big, ix, ix + 3);\n-\n-        lineText = astr.getIterator();\n-      }\n-\n-      float width = w - 20;\n-      if (lines == null || width != oldwidth) {\n-        oldwidth = width;\n-\n-        lines = new TextLayout[10];\n-        linecount = 0;\n-\n-        LineBreakMeasurer measurer = new LineBreakMeasurer(lineText, frc);\n-\n-        for (;;) {\n-          TextLayout layout = measurer.nextLayout(width);\n-          if (layout == null) {\n-            break;\n-          }\n-\n-          \/\/ justify all but last line\n-          if (linecount > 0) {\n-            lines[linecount - 1] = lines[linecount - 1].getJustifiedLayout(width);\n-          }\n-\n-          if (linecount == lines.length) {\n-            TextLayout[] nlines = new TextLayout[lines.length * 2];\n-            System.arraycopy(lines, 0, nlines, 0, lines.length);\n-            lines = nlines;\n-          }\n-\n-          lines[linecount++] = layout;\n-        }\n-      }\n+                g2d.translate(-insets.left - lx, -insets.top - ly);\n+                basey += layout.getAscent() + layout.getDescent() + layout.getLeading();\n+            }\n@@ -232,3 +185,1 @@\n-      float basex = insets.left + 10;\n-      basey += 10;\n-      g2d.setColor(Color.black);\n+            \/\/ add LineBreakMeasurer-generated layouts\n@@ -236,2 +187,8 @@\n-      for (int i = 0; i < linecount; ++i) {\n-        TextLayout layout = lines[i];\n+            if (lineText == null) {\n+                String text = \"This is a long line of text that should be broken across multiple \"\n+                              + \"lines and then justified to fit the break width.  This test should pass if \"\n+                              + \"these lines are justified to the same width, and fail otherwise.  It should \"\n+                              + \"also format the hebrew (\\u05d0\\u05d1\\u05d2 \\u05d3\\u05d4\\u05d5) and arabic \"\n+                              + \"(\\u0627\\u0628\\u062a\\u062c \\u062e\\u0644\\u0627\\u062e) and CJK \"\n+                              + \"(\\u4e00\\u4e01\\u4e02\\uac00\\uac01\\uc4fa\\u67b1\\u67b2\\u67b3\\u67b4\\u67b5\\u67b6\\u67b7\"\n+                              + \"\\u67b8\\u67b9) text correctly.\";\n@@ -239,3 +196,5 @@\n-        basey += layout.getAscent();\n-        float adv = layout.getAdvance();\n-        float dx = layout.isLeftToRight() ? 0 : width - adv;\n+                Float regular = 16.0F;\n+                Float big = 24.0F;\n+                AttributedString astr = new AttributedString(text);\n+                astr.addAttribute(TextAttribute.SIZE, regular, 0, text.length());\n+                astr.addAttribute(TextAttribute.FAMILY, fontname, 0, text.length());\n@@ -243,1 +202,8 @@\n-        layout.draw(g2d, basex + dx, basey);\n+                int ix = text.indexOf(\"broken\");\n+                astr.addAttribute(TextAttribute.SIZE, big, ix, ix + 6);\n+                ix = text.indexOf(\"hebrew\");\n+                astr.addAttribute(TextAttribute.SIZE, big, ix, ix + 6);\n+                ix = text.indexOf(\"arabic\");\n+                astr.addAttribute(TextAttribute.SIZE, big, ix, ix + 6);\n+                ix = text.indexOf(\"CJK\");\n+                astr.addAttribute(TextAttribute.SIZE, big, ix, ix + 3);\n@@ -245,2 +211,49 @@\n-        basey += layout.getDescent() + layout.getLeading();\n-      }\n+                lineText = astr.getIterator();\n+            }\n+\n+            float width = w - 20;\n+            if (lines == null || width != oldwidth) {\n+                oldwidth = width;\n+\n+                lines = new TextLayout[10];\n+                linecount = 0;\n+\n+                LineBreakMeasurer measurer = new LineBreakMeasurer(lineText, frc);\n+\n+                for (;;) {\n+                    TextLayout layout = measurer.nextLayout(width);\n+                    if (layout == null) {\n+                        break;\n+                    }\n+\n+                    \/\/ justify all but last line\n+                    if (linecount > 0) {\n+                        lines[linecount - 1] = lines[linecount - 1].getJustifiedLayout(width);\n+                    }\n+\n+                    if (linecount == lines.length) {\n+                        TextLayout[] nlines = new TextLayout[lines.length * 2];\n+                        System.arraycopy(lines, 0, nlines, 0, lines.length);\n+                        lines = nlines;\n+                    }\n+\n+                    lines[linecount++] = layout;\n+                }\n+            }\n+\n+            float basex = insets.left + 10;\n+            basey += 10;\n+            g2d.setColor(Color.black);\n+\n+            for (int i = 0; i < linecount; ++i) {\n+                TextLayout layout = lines[i];\n+\n+                basey += layout.getAscent();\n+                float adv = layout.getAdvance();\n+                float dx = layout.isLeftToRight() ? 0 : width - adv;\n+\n+                layout.draw(g2d, basex + dx, basey);\n+\n+                basey += layout.getDescent() + layout.getLeading();\n+            }\n+        }\n@@ -248,1 +261,0 @@\n-  }\n","filename":"test\/jdk\/java\/awt\/font\/TextLayout\/TestJustification.java","additions":204,"deletions":192,"binary":false,"changes":396,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/Dialog\/DestinationTest.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/Dialog\/DialogCopies.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+  @key printer\n","filename":"test\/jdk\/java\/awt\/print\/Dialog\/DialogOrient.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+   @key printer\n","filename":"test\/jdk\/java\/awt\/print\/Dialog\/DialogOwnerTest.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/Dialog\/DialogType.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/Dialog\/MediaInPrintable.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/Dialog\/PaperSizeError.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+  @key printer\n","filename":"test\/jdk\/java\/awt\/print\/Dialog\/PrintApplet.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+  @key printer\n","filename":"test\/jdk\/java\/awt\/print\/Dialog\/PrintDialog.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/Dialog\/PrintDlgPageable.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/Dialog\/RestoreActiveWindowTest\/RestoreActiveWindowTest.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -34,0 +34,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/Headless\/HeadlessPrinterJob.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -28,0 +28,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/MissedFontFamilyName\/PrintFontWithMissedFontFamilyTest.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n- * @author Jennifer Godinez\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PageFormat\/CustomPaper.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -50,1 +50,1 @@\n- * @author Alexandr Scherbatiy\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PageFormat\/ImageableAreaTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -26,1 +26,0 @@\n-  @key headful\n@@ -32,1 +31,0 @@\n-  @author rbi: area=PageFormat\n@@ -49,3 +47,0 @@\n-import java.awt.*;\n-import java.awt.event.*;\n-import java.awt.geom.*;\n@@ -157,1 +152,0 @@\n-      System.out.println( \"The test is over, hit  Ctl-C to stop Java VM\" );\n@@ -183,1 +177,0 @@\n-      System.out.println( \"The test is over, hit  Ctl-C to stop Java VM\" );\n","filename":"test\/jdk\/java\/awt\/print\/PageFormat\/NullPaper.java","additions":0,"deletions":7,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -30,1 +30,1 @@\n-  @author rbi: area=PageFormat\n+  @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PageFormat\/Orient.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -28,0 +28,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PageFormat\/PageFormatFromAttributes.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -31,1 +31,1 @@\n- * @author prr\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PageFormat\/PageSetupDialog.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PageFormat\/PrintContentCutOffTest.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n- * @key headful\n+ * @key headful printer\n","filename":"test\/jdk\/java\/awt\/print\/PageFormat\/ReverseLandscapeTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -30,0 +30,1 @@\n+   @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PageFormat\/SetOrient.html","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -24,2 +24,6 @@\n-   import java.awt.*;\n-   import java.awt.print.*;\n+import java.awt.Graphics;\n+import java.awt.print.PageFormat;\n+import java.awt.print.Paper;\n+import java.awt.print.Printable;\n+import java.awt.print.PrinterException;\n+import java.awt.print.PrinterJob;\n@@ -27,14 +31,21 @@\n-   public class SmallPaperPrinting\n-   {\n-      public static void main(String args[])\n-      {\n-        System.out.println(\"----------------- Instructions --------------------\");\n-        System.out.println(\"Arguments: (none)  - paper width=1,     height=.0001\");\n-        System.out.println(\"              1    - paper width=.0001, height=1\");\n-        System.out.println(\"              2    - paper width=-1,    height=1\");\n-        System.out.println(\"A passing test should catch a PrinterException\");\n-        System.out.println(\"and should display \\\"Print error: (exception msg)\\\".\");\n-        System.out.println(\"---------------------------------------------------\\n\");\n-         PrinterJob job = PrinterJob.getPrinterJob();\n-         PageFormat format = job.defaultPage();\n-         Paper paper = format.getPaper();\n+\/*\n+ * @test\n+ * @key printer\n+ * @run main\/othervm SmallPaperPrinting\n+ * @run main\/othervm SmallPaperPrinting 1\n+ * @run main\/othervm SmallPaperPrinting 2\n+ *\/\n+\n+public class SmallPaperPrinting\n+{\n+   public static void main(String args[]) {\n+      System.out.println(\"----------------- Instructions --------------------\");\n+      System.out.println(\"Arguments: (none)  - paper width=1,     height=.0001\");\n+      System.out.println(\"              1    - paper width=.0001, height=1\");\n+      System.out.println(\"              2    - paper width=-1,    height=1\");\n+      System.out.println(\"A passing test should catch a PrinterException\");\n+      System.out.println(\"and should display \\\"Print error: (exception msg)\\\".\");\n+      System.out.println(\"---------------------------------------------------\\n\");\n+      PrinterJob job = PrinterJob.getPrinterJob();\n+      PageFormat format = job.defaultPage();\n+      Paper paper = format.getPaper();\n@@ -42,14 +53,16 @@\n-         double w = 1, h = .0001;  \/\/ Generates ArithmeticException: \/ by zero.\n-         if(args.length > 0 && args[0].equals(\"1\")) {\n-            w = .0001;  h = 1; }  \/\/ Generates IllegalArgumentException.\n-         else if(args.length > 0 && args[0].equals(\"2\")) {\n-            w = -1;  h = 1; }  \/\/ Generates NegativeArraySizeException.\n-         paper.setSize(w, h);\n-         paper.setImageableArea(0, 0, w, h);\n-         format.setPaper(paper);\n-         job.setPrintable(\n-               new Printable() {\n-                  public int print(Graphics g, PageFormat page_format, int page) {\n-                     return NO_SUCH_PAGE;\n-                  }\n-               }, format);\n+      double w = 1, h = .0001;  \/\/ Generates ArithmeticException: \/ by zero.\n+      if (args.length > 0 && args[0].equals(\"1\")) {\n+          w = .0001;  h = 1;\n+      }  \/\/ Generates IllegalArgumentException.\n+      else if (args.length > 0 && args[0].equals(\"2\")) {\n+          w = -1;  h = 1;\n+      }  \/\/ Generates NegativeArraySizeException.\n+      paper.setSize(w, h);\n+      paper.setImageableArea(0, 0, w, h);\n+      format.setPaper(paper);\n+      job.setPrintable(\n+            new Printable() {\n+               public int print(Graphics g, PageFormat page_format, int page) {\n+                  return NO_SUCH_PAGE;\n+               }\n+            }, format);\n@@ -57,5 +70,4 @@\n-         try {\n-            job.print(); }\n-            catch(PrinterException e) {\n-               System.err.println(\"Print error:\\n\" + e.getMessage()); \/\/ Passing test!\n-            }\n+      try {\n+          job.print();\n+      } catch (PrinterException e) {\n+          System.err.println(\"Print error:\\n\" + e.getMessage()); \/\/ Passing test!\n@@ -64,0 +76,1 @@\n+}\n","filename":"test\/jdk\/java\/awt\/print\/PageFormat\/SmallPaperPrinting.java","additions":48,"deletions":35,"binary":false,"changes":83,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n- * @author Jennifer Godinez\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PageFormat\/ValidateCustom.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -25,1 +25,1 @@\n-   @key headful\n+   @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PageFormat\/WrongPaperForBookPrintingTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+   @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PageFormat\/WrongPaperPrintingTest.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -28,0 +28,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PathPrecisionScaleFactor\/PathPrecisionScaleFactorShapeTest.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -28,0 +28,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PathPrecisionScaleFactor\/PathPrecisionScaleFactorTextTest.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/BannerTest.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n- * @author prr\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/Cancel\/PrinterJobCancel.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -28,0 +28,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/Collate2DPrintingTest.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+  @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/CompareImageable.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n-  @author prr: area=PrinterJob\n+  @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/CustomFont\/CustomFont.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -33,1 +33,0 @@\n- * @author reinhapa\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/CustomPrintService\/PrintDialog.java","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -31,1 +31,0 @@\n- * @author reinhapa\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/CustomPrintService\/SetPrintServiceTest.java","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -24,1 +24,1 @@\n-\/* @test 1.2 02\/05\/15\n+\/* @test\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/DeviceScale.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/DlgAttrsBug.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+ * @key printer\n@@ -28,1 +29,0 @@\n- * @author jgodinez\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/DrawImage.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/DrawStringMethods.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -69,2 +69,0 @@\n-\n-       PrinterJob pj = PrinterJob.getPrinterJob();\n@@ -72,1 +70,1 @@\n-           return;\n+           throw new RuntimeException(\"Could not create postscript stream\");\n@@ -74,0 +72,2 @@\n+\n+       PrinterJob pj = PrinterJob.getPrinterJob();\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/EmptyFill.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/GetMediasTest.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n- * @author prr\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/ImagePrinting\/ImageTypes.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -37,0 +37,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/ImagePrinting\/PrintARGBImage.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/InitToBlack.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n- * @author prr\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/InvalidPage.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n- * @author prr\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/JobName\/PrinterJobName.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -25,1 +25,1 @@\n- * @key headful printer\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/LandscapeStackOverflow.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/Legal\/PrintTest.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/LinearGradientPrintingTest.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -40,0 +40,1 @@\n+ * @key printer multimon\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/MultiMonPrintDlgTest.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/MultiThread\/MultiThreadTest.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n- * @author prr\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/NumCopies.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PageDialogMarginTest.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PageDialogMarginValidation.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+   @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PageDialogTest.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -34,0 +34,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PageDlgApp.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,11 +24,0 @@\n-\/**\n- * @test\n- * @bug 4956397\n- * @run main\/manual PageDlgPrnButton\n- *\/\n-\n-import java.awt.print.PrinterJob;\n-import java.awt.print.PageFormat;\n-import java.awt.print.Printable;\n-import java.awt.print.PrinterException;\n-\n@@ -38,5 +27,4 @@\n-import java.awt.* ;\n-\n-public class PageDlgPrnButton implements Printable\n-{\n-    public static void main ( String args[] ) {\n+import java.awt.print.PageFormat;\n+import java.awt.print.Printable;\n+import java.awt.print.PrinterException;\n+import java.awt.print.PrinterJob;\n@@ -44,7 +32,1 @@\n-        String[] instructions =\n-           {\"For non-windows OS, this test PASSes.\",\n-            \"You must have at least 2 printers available to perform this test.\",\n-            \"This test brings up a native Windows page dialog.\",\n-            \"Click on the Printer... button and change the selected printer. \",\n-            \"Test passes if the printout comes from the new selected printer.\",\n-         };\n+import jtreg.SkippedException;\n@@ -52,2 +34,23 @@\n-         Sysout.createDialog( );\n-         Sysout.printInstructions( instructions );\n+\/*\n+ * @test\n+ * @bug 4956397\n+ * @key printer\n+ * @requires os.family==\"windows\"\n+ * @library \/test\/lib \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame jtreg.SkippedException\n+ * @run main\/manual PageDlgPrnButton\n+ *\/\n+public class PageDlgPrnButton implements Printable {\n+    private static final String INSTRUCTIONS =\n+            \"This test brings up a native Windows page dialog.\\n\" +\n+            \"Click on the Printer... button and change the selected printer. \\n\" +\n+            \"Test passes if the printout comes from the new selected printer.\";\n+\n+    public static void main(String[] args) throws Exception {\n+        final int serviceCount = PrinterJob.lookupPrintServices().length;\n+        if (serviceCount == 0) {\n+            throw new RuntimeException(\"Printer not configured or available.\");\n+        }\n+        if (serviceCount < 2) {\n+            throw new SkippedException(\"The test requires at least 2 printers.\");\n+        }\n@@ -55,2 +58,5 @@\n-        PageDlgPrnButton pdpb = new PageDlgPrnButton() ;\n-    }\n+        PassFailJFrame passFailJFrame = PassFailJFrame.builder()\n+                .instructions(INSTRUCTIONS)\n+                .rows((int) INSTRUCTIONS.lines().count() + 1)\n+                .columns(45)\n+                .build();\n@@ -58,8 +64,2 @@\n-    public PageDlgPrnButton()\n-    {\n-        try\n-        {\n-            pageDialogExample();\n-        }\n-        catch(Exception e)\n-        {e.printStackTrace(System.err);}\n+        pageDialogExample();\n+        passFailJFrame.awaitAndCheck();\n@@ -68,1 +68,0 @@\n-\n@@ -71,2 +70,1 @@\n-    public void pageDialogExample() throws PrinterException\n-    {\n+    public static void pageDialogExample() throws PrinterException {\n@@ -77,4 +75,4 @@\n-        if(originalPageFormat == pageFormat) return;\n-\n-        job.setPrintable(this,pageFormat);\n-        job.print();\n+        job.setPrintable(new PageDlgPrnButton(), pageFormat);\n+        if (job.printDialog()) {\n+            job.print();\n+        }\n@@ -83,4 +81,2 @@\n-\n-\n-    public int print(Graphics g, PageFormat pageFormat, int pageIndex)\n-    {\n+    @Override\n+    public int print(Graphics g, PageFormat pageFormat, int pageIndex) {\n@@ -89,1 +85,1 @@\n-        final Rectangle rect = new Rectangle(0,0,boxWidth,boxHeight);\n+        final Rectangle rect = new Rectangle(0, 0, boxWidth, boxHeight);\n@@ -92,0 +88,1 @@\n+        final Graphics2D g2d = (Graphics2D) g;\n@@ -93,3 +90,3 @@\n-        if (pageIndex > 0) return (NO_SUCH_PAGE);\n-\n-        final Graphics2D g2d = (Graphics2D)g;\n+        if (pageIndex > 0) {\n+            return NO_SUCH_PAGE;\n+        }\n@@ -101,1 +98,1 @@\n-        g2d.drawRect(0,0,(int)pageW,(int)pageH);\n+        g2d.drawRect(0, 0, (int) pageW, (int) pageH);\n@@ -105,1 +102,1 @@\n-        final double scale = Math.min( (pageW\/boxWidth), (pageH\/boxHeight) );\n+        final double scale = Math.min((pageW \/ boxWidth), (pageH \/ boxHeight));\n@@ -107,1 +104,3 @@\n-        if(scale < 1.0) g2d.scale(scale, scale);\n+        if (scale < 1.0) {\n+            g2d.scale(scale, scale);\n+        }\n@@ -112,1 +111,1 @@\n-        return(PAGE_EXISTS);\n+        return PAGE_EXISTS;\n@@ -115,114 +114,0 @@\n-\n-class Sysout {\n-   private static TestDialog dialog;\n-\n-   public static void createDialogWithInstructions( String[] instructions )\n-    {\n-      dialog = new TestDialog( new Frame(), \"Instructions\" );\n-      dialog.printInstructions( instructions );\n-      dialog.show();\n-      println( \"Any messages for the tester will display here.\" );\n-    }\n-\n-   public static void createDialog( )\n-    {\n-      dialog = new TestDialog( new Frame(), \"Instructions\" );\n-      String[] defInstr = { \"Instructions will appear here. \", \"\" } ;\n-      dialog.printInstructions( defInstr );\n-      dialog.show();\n-      println( \"Any messages for the tester will display here.\" );\n-    }\n-\n-\n-   public static void printInstructions( String[] instructions )\n-    {\n-      dialog.printInstructions( instructions );\n-    }\n-\n-\n-   public static void println( String messageIn )\n-    {\n-      dialog.displayMessage( messageIn );\n-    }\n-\n-}\/\/ Sysout  class\n-\n-\/**\n-  This is part of the standard test machinery.  It provides a place for the\n-   test instructions to be displayed, and a place for interactive messages\n-   to the user to be displayed.\n-  To have the test instructions displayed, see Sysout.\n-  To have a message to the user be displayed, see Sysout.\n-  Do not call anything in this dialog directly.\n-  *\/\n-class TestDialog extends Dialog {\n-\n-   TextArea instructionsText;\n-   TextArea messageText;\n-   int maxStringLength = 80;\n-\n-   \/\/DO NOT call this directly, go through Sysout\n-   public TestDialog( Frame frame, String name )\n-    {\n-      super( frame, name );\n-      int scrollBoth = TextArea.SCROLLBARS_BOTH;\n-      instructionsText = new TextArea( \"\", 15, maxStringLength, scrollBoth );\n-      add( \"North\", instructionsText );\n-\n-      messageText = new TextArea( \"\", 5, maxStringLength, scrollBoth );\n-      add(\"Center\", messageText);\n-\n-      pack();\n-\n-      show();\n-    }\/\/ TestDialog()\n-\n-   \/\/DO NOT call this directly, go through Sysout\n-   public void printInstructions( String[] instructions )\n-    {\n-      \/\/Clear out any current instructions\n-      instructionsText.setText( \"\" );\n-\n-      \/\/Go down array of instruction strings\n-\n-      String printStr, remainingStr;\n-      for( int i=0; i < instructions.length; i++ )\n-       {\n-         \/\/chop up each into pieces maxSringLength long\n-         remainingStr = instructions[ i ];\n-         while( remainingStr.length() > 0 )\n-          {\n-            \/\/if longer than max then chop off first max chars to print\n-            if( remainingStr.length() >= maxStringLength )\n-             {\n-               \/\/Try to chop on a word boundary\n-               int posOfSpace = remainingStr.\n-                  lastIndexOf( ' ', maxStringLength - 1 );\n-\n-               if( posOfSpace <= 0 ) posOfSpace = maxStringLength - 1;\n-\n-               printStr = remainingStr.substring( 0, posOfSpace + 1 );\n-               remainingStr = remainingStr.substring( posOfSpace + 1 );\n-             }\n-            \/\/else just print\n-            else\n-             {\n-               printStr = remainingStr;\n-               remainingStr = \"\";\n-             }\n-\n-            instructionsText.append( printStr + \"\\n\" );\n-\n-          }\/\/ while\n-\n-       }\/\/ for\n-\n-    }\/\/printInstructions()\n-\n-   \/\/DO NOT call this directly, go through Sysout\n-   public void displayMessage( String messageIn )\n-    {\n-      messageText.append( messageIn + \"\\n\" );\n-    }\n-\n- }\/\/ TestDialog  class\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PageDlgPrnButton.java","additions":54,"deletions":169,"binary":false,"changes":223,"status":"modified"},{"patch":"@@ -31,0 +31,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PageDlgStackOverflowTest.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PageFormatChange.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PageRanges.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PolylinePrintingTest.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintAWTImage.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+ * test\n@@ -27,0 +28,1 @@\n+ * @key printer\n@@ -28,1 +30,1 @@\n- * @run main\/manual PrintRotatedText\n+ * @run main\/manual PrintAllFonts\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintAllFonts.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+  @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintAttributeUpdateTest.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n- * @author prr\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintBadImage.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,1 +24,14 @@\n-\/**\n+import java.awt.Graphics;\n+import java.awt.Graphics2D;\n+import java.awt.print.PageFormat;\n+import java.awt.print.Printable;\n+import java.awt.print.PrinterException;\n+import java.awt.print.PrinterJob;\n+\n+import javax.swing.BorderFactory;\n+import javax.swing.Box;\n+import javax.swing.JButton;\n+import javax.swing.JComponent;\n+import javax.swing.JOptionPane;\n+\n+\/*\n@@ -28,1 +41,3 @@\n- * @author prr\n+ * @key printer\n+ * @library \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame\n@@ -31,0 +46,22 @@\n+public class PrintCompoundString implements Printable {\n+    private static final String STR = \"Test string compound printing \\u2203\\u2200\\u2211\";\n+\n+    private static final String INSTRUCTIONS =\n+            \"This test should print following text\\n\\n\" +\n+            STR +\"\\n\\n\" +\n+            \"If an exception is thrown, or the page doesn't print properly\\n\" +\n+            \"then the test fails\";\n+\n+    public static void main(String[] args) throws Exception {\n+        if (PrinterJob.lookupPrintServices().length == 0) {\n+            throw new RuntimeException(\"Printer not configured or available.\");\n+        }\n+\n+        PassFailJFrame.builder()\n+                .instructions(INSTRUCTIONS)\n+                .splitUI(PrintCompoundString::createTestUI)\n+                .rows((int) INSTRUCTIONS.lines().count() + 1)\n+                .columns(45)\n+                .build()\n+                .awaitAndCheck();\n+    }\n@@ -32,42 +69,15 @@\n-\n-import java.awt.*;\n-import java.awt.event.*;\n-import java.awt.print.*;\n-import java.text.*;\n-\n-public class PrintCompoundString extends Frame implements ActionListener {\n-\n- private TextCanvas c;\n-\n- public static void main(String args[]) {\n-\n-  String[] instructions =\n-        {\n-         \"You must have a printer available to perform this test\",\n-         \"This test should print a page which contains the same\",\n-         \"text message as in the test window on the screen\",\n-         \"You should also monitor the command line to see if any exceptions\",\n-         \"were thrown\",\n-         \"If an exception is thrown, or the page doesn't print properly\",\n-         \"then the test fails\",\n-       };\n-      Sysout.createDialog( );\n-      Sysout.printInstructions( instructions );\n-\n-    PrintCompoundString f = new PrintCompoundString();\n-    f.show();\n- }\n-\n- public PrintCompoundString() {\n-    super(\"JDK 1.2 drawString Printing\");\n-\n-    c = new TextCanvas();\n-    add(\"Center\", c);\n-\n-    Button printButton = new Button(\"Print\");\n-    printButton.addActionListener(this);\n-    add(\"South\", printButton);\n-\n-    addWindowListener(new WindowAdapter() {\n-       public void windowClosing(WindowEvent e) {\n-             System.exit(0);\n+    private static JComponent createTestUI() {\n+        JButton b = new JButton(\"Print\");\n+        b.addActionListener((ae) -> {\n+            try {\n+                PrinterJob job = PrinterJob.getPrinterJob();\n+                job.setPrintable(new PrintCompoundString());\n+                if (job.printDialog()) {\n+                    job.print();\n+                }\n+            } catch (PrinterException ex) {\n+                ex.printStackTrace();\n+                String msg = \"PrinterException: \" + ex.getMessage();\n+                JOptionPane.showMessageDialog(b, msg, \"Error occurred\",\n+                        JOptionPane.ERROR_MESSAGE);\n+                PassFailJFrame.forceFail(msg);\n@@ -75,41 +85,8 @@\n-    });\n-\n-    pack();\n- }\n-\n- public void actionPerformed(ActionEvent e) {\n-\n-   PrinterJob pj = PrinterJob.getPrinterJob();\n-\n-   if (pj != null && pj.printDialog()) {\n-\n-       pj.setPrintable(c);\n-       try {\n-            pj.print();\n-      } catch (PrinterException pe) {\n-      } finally {\n-         System.err.println(\"PRINT RETURNED\");\n-      }\n-   }\n- }\n-\n- class TextCanvas extends Panel implements Printable {\n-\n-    String nullStr = null;\n-    String emptyStr = new String();\n-    AttributedString nullAttStr = null;\n-    AttributedString emptyAttStr = new AttributedString(emptyStr);\n-    AttributedCharacterIterator nullIterator = null;\n-    AttributedCharacterIterator emptyIterator = emptyAttStr.getIterator();\n-\n-    public int print(Graphics g, PageFormat pgFmt, int pgIndex) {\n-\n-      if (pgIndex > 0)\n-         return Printable.NO_SUCH_PAGE;\n-\n-      Graphics2D g2d = (Graphics2D)g;\n-      g2d.translate(pgFmt.getImageableX(), pgFmt.getImageableY());\n-\n-      paint(g);\n-\n-      return Printable.PAGE_EXISTS;\n+        });\n+\n+        Box main = Box.createHorizontalBox();\n+        main.setBorder(BorderFactory.createEmptyBorder(8, 8, 8, 8));\n+        main.add(Box.createHorizontalGlue());\n+        main.add(b);\n+        main.add(Box.createHorizontalGlue());\n+        return main;\n@@ -118,5 +95,5 @@\n-    public void paint(Graphics g1) {\n-        Graphics2D g = (Graphics2D)g1;\n-\n-          String str = \"Test string compound printing \\u2203\\u2200\\u2211\";\n-          g.drawString(str, 20, 40);\n+    @Override\n+    public int print(Graphics g, PageFormat pgFmt, int pgIndex) {\n+        if (pgIndex > 0) {\n+            return Printable.NO_SUCH_PAGE;\n+        }\n@@ -124,1 +101,3 @@\n-    }\n+        Graphics2D g2d = (Graphics2D) g;\n+        g2d.translate(pgFmt.getImageableX(), pgFmt.getImageableY());\n+        g2d.drawString(STR, 20, 40);\n@@ -126,2 +105,1 @@\n-     public Dimension getPreferredSize() {\n-        return new Dimension(450, 250);\n+        return Printable.PAGE_EXISTS;\n@@ -129,2 +107,0 @@\n- }\n-\n@@ -132,115 +108,0 @@\n-\n-class Sysout\n- {\n-   private static TestDialog dialog;\n-\n-   public static void createDialogWithInstructions( String[] instructions )\n-    {\n-      dialog = new TestDialog( new Frame(), \"Instructions\" );\n-      dialog.printInstructions( instructions );\n-      dialog.show();\n-      println( \"Any messages for the tester will display here.\" );\n-    }\n-\n-   public static void createDialog( )\n-    {\n-      dialog = new TestDialog( new Frame(), \"Instructions\" );\n-      String[] defInstr = { \"Instructions will appear here. \", \"\" } ;\n-      dialog.printInstructions( defInstr );\n-      dialog.show();\n-      println( \"Any messages for the tester will display here.\" );\n-    }\n-\n-\n-   public static void printInstructions( String[] instructions )\n-    {\n-      dialog.printInstructions( instructions );\n-    }\n-\n-\n-   public static void println( String messageIn )\n-    {\n-      dialog.displayMessage( messageIn );\n-    }\n-\n- }\/\/ Sysout  class\n-\n-\/**\n-  This is part of the standard test machinery.  It provides a place for the\n-   test instructions to be displayed, and a place for interactive messages\n-   to the user to be displayed.\n-  To have the test instructions displayed, see Sysout.\n-  To have a message to the user be displayed, see Sysout.\n-  Do not call anything in this dialog directly.\n-  *\/\n-class TestDialog extends Dialog {\n-\n-   TextArea instructionsText;\n-   TextArea messageText;\n-   int maxStringLength = 80;\n-\n-   \/\/DO NOT call this directly, go through Sysout\n-   public TestDialog( Frame frame, String name )\n-    {\n-      super( frame, name );\n-      int scrollBoth = TextArea.SCROLLBARS_BOTH;\n-      instructionsText = new TextArea( \"\", 15, maxStringLength, scrollBoth );\n-      add( \"North\", instructionsText );\n-\n-      messageText = new TextArea( \"\", 5, maxStringLength, scrollBoth );\n-      add(\"Center\", messageText);\n-\n-      pack();\n-\n-      show();\n-    }\/\/ TestDialog()\n-\n-   \/\/DO NOT call this directly, go through Sysout\n-   public void printInstructions( String[] instructions )\n-    {\n-      \/\/Clear out any current instructions\n-      instructionsText.setText( \"\" );\n-\n-      \/\/Go down array of instruction strings\n-\n-      String printStr, remainingStr;\n-      for( int i=0; i < instructions.length; i++ )\n-       {\n-         \/\/chop up each into pieces maxSringLength long\n-         remainingStr = instructions[ i ];\n-         while( remainingStr.length() > 0 )\n-          {\n-            \/\/if longer than max then chop off first max chars to print\n-            if( remainingStr.length() >= maxStringLength )\n-             {\n-               \/\/Try to chop on a word boundary\n-               int posOfSpace = remainingStr.\n-                  lastIndexOf( ' ', maxStringLength - 1 );\n-\n-               if( posOfSpace <= 0 ) posOfSpace = maxStringLength - 1;\n-\n-               printStr = remainingStr.substring( 0, posOfSpace + 1 );\n-               remainingStr = remainingStr.substring( posOfSpace + 1 );\n-             }\n-            \/\/else just print\n-            else\n-             {\n-               printStr = remainingStr;\n-               remainingStr = \"\";\n-             }\n-\n-            instructionsText.append( printStr + \"\\n\" );\n-\n-          }\/\/ while\n-\n-       }\/\/ for\n-\n-    }\/\/printInstructions()\n-\n-   \/\/DO NOT call this directly, go through Sysout\n-   public void displayMessage( String messageIn )\n-    {\n-      messageText.append( messageIn + \"\\n\" );\n-    }\n-\n- }\/\/ TestDialog  class\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintCompoundString.java","additions":72,"deletions":211,"binary":false,"changes":283,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n-  @author prr: area=PrinterJob\n+  @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintDialog.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n-  @author prr: area=PrinterJob\n+  @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintDialogCancel.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintDlgPageable.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintDlgSelectionAttribTest.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -24,0 +24,7 @@\n+\/*\n+ * Not enabled as a test. Needs some work.\n+ * test\n+ * @key printer\n+ * @run main\/manual PrintFontStyle\n+ *\/\n+\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintFontStyle.java","additions":7,"deletions":0,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintGlyphVectorTest.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,2 +24,18 @@\n-\/**\n- * @test %I %W\n+import java.awt.BorderLayout;\n+import java.awt.Canvas;\n+import java.awt.Color;\n+import java.awt.Font;\n+import java.awt.Frame;\n+import java.awt.Graphics;\n+import java.awt.Menu;\n+import java.awt.MenuBar;\n+import java.awt.MenuItem;\n+import java.awt.event.ActionEvent;\n+import java.awt.event.ActionListener;\n+import java.awt.print.PageFormat;\n+import java.awt.print.Printable;\n+import java.awt.print.PrinterException;\n+import java.awt.print.PrinterJob;\n+\n+\/*\n+ * @test\n@@ -28,1 +44,4 @@\n- * @author jgodinez\n+ * @key printer\n+ * @requires os.family==\"windows\"\n+ * @library \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame\n@@ -31,4 +50,0 @@\n-import java.awt.*;\n-import java.awt.print.*;\n-import java.awt.event.*;\n-\n@@ -36,48 +51,21 @@\n-\n-        private PrintImageCanvas                printImageCanvas;\n-\n-        private MenuItem        print1Menu = new MenuItem(\"PrintTest1\");\n-        private MenuItem        print2Menu = new MenuItem(\"PrintTest2\");\n-        private MenuItem        exitMenu = new MenuItem(\"Exit\");\n-\n-        public static void main(String[] argv) {\n-        String[] instructions =\n-           { \"You must have a printer available to perform this test,\",\n-             \"prefererably Canon LaserShot A309GII.\",\n-             \"Printing must be done in Win 98 Japanese 2nd Edition.\",\n-             \"\",\n-             \"Passing test : Output of text image for PrintTest1 and PrintTest2 should be same as that on the screen.\",\n-           };\n-\n-        Sysout.createDialog( );\n-         Sysout.printInstructions( instructions );\n-\n-                new PrintImage();\n-        }\n-\n-        public PrintImage() {\n-                super(\"PrintImage\");\n-                initPrintImage();\n-        }\n-\n-        public void initPrintImage() {\n-\n-                printImageCanvas = new PrintImageCanvas(this);\n-\n-                initMenu();\n-\n-                addWindowListener(new WindowAdapter() {\n-                        public void windowClosing(WindowEvent ev) {\n-                                dispose();\n-                        }\n-                        public void windowClosed(WindowEvent ev) {\n-                                System.exit(0);\n-                        }\n-                });\n-\n-                setLayout(new BorderLayout());\n-                add(printImageCanvas, BorderLayout.CENTER);\n-                pack();\n-\n-                setSize(500,500);\n-                setVisible(true);\n+    private final PrintImageCanvas printImageCanvas = new PrintImageCanvas();\n+    private final MenuItem print1Menu = new MenuItem(\"PrintTest1\");\n+    private final MenuItem print2Menu = new MenuItem(\"PrintTest2\");\n+    private static final String INSTRUCTIONS =\n+            \"Select PrintTest1 in the File menu.\\n\" +\n+            \"Print Dialog will appear.\\n\" +\n+            \"Click OK to start the first print job.\\n\" +\n+            \"\\n\" +\n+            \"Select PrintTest2 in the File menu.\\n\" +\n+            \"Page Setup Dialog will appear.\\n\" +\n+            \"Click OK.\\n\" +\n+            \"Print Dialog will appear.\\n\" +\n+            \"Click OK to start the second print job.\\n\" +\n+            \"\\n\" +\n+            \"The text in the printouts for PrintTest1 and PrintTest2 should be\\n\" +\n+            \"same as that on the screen.\\n\" +\n+            \"Press Pass if they are, otherwise press Fail.\";\n+\n+    public static void main(String[] argv) throws Exception {\n+        if (PrinterJob.lookupPrintServices().length == 0) {\n+            throw new RuntimeException(\"Printer not configured or available.\");\n@@ -86,14 +74,8 @@\n-        private void initMenu() {\n-                MenuBar         mb = new MenuBar();\n-                Menu            me = new Menu(\"File\");\n-                me.add(print1Menu);\n-                me.add(print2Menu);\n-                me.add(\"-\");\n-                me.add(exitMenu);\n-                mb.add(me);\n-                this.setMenuBar(mb);\n-\n-                print1Menu.addActionListener(this);\n-                print2Menu.addActionListener(this);\n-                exitMenu.addActionListener(this);\n-        }\n+        PassFailJFrame.builder()\n+                .instructions(INSTRUCTIONS)\n+                .testUI(PrintImage::new)\n+                .rows((int) INSTRUCTIONS.lines().count() + 1)\n+                .columns(45)\n+                .build()\n+                .awaitAndCheck();\n+    }\n@@ -101,12 +83,4 @@\n-        public void actionPerformed(ActionEvent e) {\n-                Object target = e.getSource();\n-                if( target.equals(print1Menu) ) {\n-                        printMain1();\n-                }\n-                else if( target.equals(print2Menu) ) {\n-                        printMain2();\n-                }\n-                else if( target.equals(exitMenu) ) {\n-                        dispose();\n-                }\n-        }\n+    public PrintImage() {\n+        super(\"PrintImage\");\n+        initPrintImage();\n+    }\n@@ -114,1 +88,6 @@\n-        private void printMain1(){\n+    public void initPrintImage() {\n+        initMenu();\n+        setLayout(new BorderLayout());\n+        add(printImageCanvas, BorderLayout.CENTER);\n+        setSize(500, 300);\n+    }\n@@ -116,2 +95,7 @@\n-                PrinterJob printerJob = PrinterJob.getPrinterJob();\n-                PageFormat pageFormat = printerJob.defaultPage();\n+    private void initMenu() {\n+        MenuBar mb = new MenuBar();\n+        Menu me = new Menu(\"File\");\n+        me.add(print1Menu);\n+        me.add(print2Menu);\n+        mb.add(me);\n+        setMenuBar(mb);\n@@ -119,1 +103,3 @@\n-                printerJob.setPrintable((Printable)printImageCanvas, pageFormat);\n+        print1Menu.addActionListener(this);\n+        print2Menu.addActionListener(this);\n+    }\n@@ -121,9 +107,6 @@\n-                if(printerJob.printDialog()){\n-                        try {\n-                                printerJob.print();\n-                        }\n-                        catch(PrinterException p){\n-                        }\n-                }\n-                else\n-                        printerJob.cancel();\n+    public void actionPerformed(ActionEvent e) {\n+        Object target = e.getSource();\n+        if (target.equals(print1Menu)) {\n+            printMain1();\n+        } else if (target.equals(print2Menu)) {\n+            printMain2();\n@@ -131,0 +114,1 @@\n+    }\n@@ -132,16 +116,15 @@\n-        private void printMain2(){\n-\n-                PrinterJob printerJob = PrinterJob.getPrinterJob();\n-                PageFormat pageFormat = printerJob.pageDialog(printerJob.defaultPage());\n-\n-                printerJob.setPrintable((Printable)printImageCanvas, pageFormat);\n-\n-                if(printerJob.printDialog()){\n-                        try {\n-                                printerJob.print();\n-                        }\n-                        catch(PrinterException p){\n-                        }\n-                }\n-                else\n-                        printerJob.cancel();\n+    private void printMain1() {\n+        PrinterJob printerJob = PrinterJob.getPrinterJob();\n+        PageFormat pageFormat = printerJob.defaultPage();\n+\n+        printerJob.setPrintable(printImageCanvas, pageFormat);\n+\n+        if (printerJob.printDialog()) {\n+            try {\n+                printerJob.print();\n+            } catch (PrinterException e) {\n+                PassFailJFrame.forceFail(\"Print Failed\");\n+                e.printStackTrace();\n+            }\n+        } else {\n+            printerJob.cancel();\n@@ -149,0 +132,1 @@\n+    }\n@@ -150,8 +134,15 @@\n-}\n-\n-class PrintImageCanvas extends Canvas implements Printable {\n-\n-        private PrintImage pdsFrame;\n-\n-        public PrintImageCanvas(PrintImage pds) {\n-                pdsFrame = pds;\n+    private void printMain2() {\n+        PrinterJob printerJob = PrinterJob.getPrinterJob();\n+        PageFormat pageFormat = printerJob.pageDialog(printerJob.defaultPage());\n+\n+        printerJob.setPrintable(printImageCanvas, pageFormat);\n+\n+        if (printerJob.printDialog()) {\n+            try {\n+                printerJob.print();\n+            } catch (PrinterException e) {\n+                PassFailJFrame.forceFail(\"Print Failed\");\n+                e.printStackTrace();\n+            }\n+        } else {\n+            printerJob.cancel();\n@@ -159,0 +150,1 @@\n+    }\n@@ -160,0 +152,2 @@\n+    private static class PrintImageCanvas extends Canvas implements Printable {\n+        @Override\n@@ -161,3 +155,4 @@\n-                Font drawFont = new Font(\"MS Mincho\",Font.ITALIC,50);\n-                g.setFont(drawFont);\n-                g.drawString(\"PrintSample!\",100,150);\n+            Font drawFont = new Font(\"MS Mincho\", Font.ITALIC, 50);\n+            g.setFont(drawFont);\n+            g.setColor(new Color(0, 0, 0, 200));\n+            g.drawString(\"PrintSample!\", 100, 150);\n@@ -166,0 +161,1 @@\n+        @Override\n@@ -168,12 +164,5 @@\n-\n-                if(pi>=1)\n-                        return NO_SUCH_PAGE;\n-                else{\n-                        Graphics2D g2 = (Graphics2D)g;\n-                        g.setColor(new Color(0,0,0,200));\n-\n-                        Font drawFont = new Font(\"MS Mincho\",Font.ITALIC,50);\n-                        g.setFont(drawFont);\n-                        g.drawString(\"PrintSample!\",100,150);\n-                        return PAGE_EXISTS;\n-                }\n+            if (pi > 0) {\n+                return NO_SUCH_PAGE;\n+            }\n+            paint(g);\n+            return PAGE_EXISTS;\n@@ -181,113 +170,0 @@\n-}\n-\n-\n-class Sysout {\n-   private static TestDialog dialog;\n-\n-   public static void createDialogWithInstructions( String[] instructions )\n-    {\n-      dialog = new TestDialog( new Frame(), \"Instructions\" );\n-      dialog.printInstructions( instructions );\n-      dialog.show();\n-      println( \"Any messages for the tester will display here.\" );\n-    }\n-\n-   public static void createDialog( )\n-    {\n-      dialog = new TestDialog( new Frame(), \"Instructions\" );\n-      String[] defInstr = { \"Instructions will appear here. \", \"\" } ;\n-      dialog.printInstructions( defInstr );\n-      dialog.show();\n-      println( \"Any messages for the tester will display here.\" );\n-    }\n-\n-\n-   public static void printInstructions( String[] instructions )\n-    {\n-      dialog.printInstructions( instructions );\n-    }\n-\n-\n-   public static void println( String messageIn )\n-    {\n-      dialog.displayMessage( messageIn );\n-    }\n-\n-}\/\/ Sysout  class\n-\n-\/**\n-  This is part of the standard test machinery.  It provides a place for the\n-   test instructions to be displayed, and a place for interactive messages\n-   to the user to be displayed.\n-  To have the test instructions displayed, see Sysout.\n-  To have a message to the user be displayed, see Sysout.\n-  Do not call anything in this dialog directly.\n-  *\/\n-class TestDialog extends Dialog {\n-\n-   TextArea instructionsText;\n-   TextArea messageText;\n-   int maxStringLength = 80;\n-\n-   \/\/DO NOT call this directly, go through Sysout\n-   public TestDialog( Frame frame, String name )\n-    {\n-      super( frame, name );\n-      int scrollBoth = TextArea.SCROLLBARS_BOTH;\n-      instructionsText = new TextArea( \"\", 15, maxStringLength, scrollBoth );\n-      add( \"North\", instructionsText );\n-\n-      messageText = new TextArea( \"\", 5, maxStringLength, scrollBoth );\n-      add(\"Center\", messageText);\n-\n-      pack();\n-\n-      show();\n-    }\/\/ TestDialog()\n-\n-   \/\/DO NOT call this directly, go through Sysout\n-   public void printInstructions( String[] instructions )\n-    {\n-      \/\/Clear out any current instructions\n-      instructionsText.setText( \"\" );\n-\n-      \/\/Go down array of instruction strings\n-\n-      String printStr, remainingStr;\n-      for( int i=0; i < instructions.length; i++ )\n-       {\n-         \/\/chop up each into pieces maxSringLength long\n-         remainingStr = instructions[ i ];\n-         while( remainingStr.length() > 0 )\n-          {\n-            \/\/if longer than max then chop off first max chars to print\n-            if( remainingStr.length() >= maxStringLength )\n-             {\n-               \/\/Try to chop on a word boundary\n-               int posOfSpace = remainingStr.\n-                  lastIndexOf( ' ', maxStringLength - 1 );\n-\n-               if( posOfSpace <= 0 ) posOfSpace = maxStringLength - 1;\n-\n-               printStr = remainingStr.substring( 0, posOfSpace + 1 );\n-               remainingStr = remainingStr.substring( posOfSpace + 1 );\n-             }\n-            \/\/else just print\n-            else\n-             {\n-               printStr = remainingStr;\n-               remainingStr = \"\";\n-             }\n-\n-            instructionsText.append( printStr + \"\\n\" );\n-\n-          }\/\/ while\n-\n-       }\/\/ for\n-\n-    }\/\/printInstructions()\n-\n-   \/\/DO NOT call this directly, go through Sysout\n-   public void displayMessage( String messageIn )\n-    {\n-      messageText.append( messageIn + \"\\n\" );\n@@ -295,0 +171,1 @@\n+}\n@@ -296,1 +173,0 @@\n- }\/\/ TestDialog  class\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintImage.java","additions":124,"deletions":248,"binary":false,"changes":372,"status":"modified"},{"patch":"@@ -30,0 +30,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintLatinCJKTest.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,1 +24,16 @@\n-\/**\n+import java.awt.Button;\n+import java.awt.Dimension;\n+import java.awt.Frame;\n+import java.awt.Graphics;\n+import java.awt.Graphics2D;\n+import java.awt.Panel;\n+import java.awt.print.PageFormat;\n+import java.awt.print.Printable;\n+import java.awt.print.PrinterException;\n+import java.awt.print.PrinterJob;\n+import java.text.AttributedCharacterIterator;\n+import java.text.AttributedString;\n+\n+import javax.swing.JOptionPane;\n+\n+\/*\n@@ -28,1 +43,3 @@\n- * @author prr\n+ * @key printer\n+ * @library \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame\n@@ -31,209 +48,23 @@\n-\n-\n-import java.awt.*;\n-import java.awt.event.*;\n-import java.awt.print.*;\n-import java.text.*;\n-\n-public class PrintNullString extends Frame implements ActionListener {\n-\n- private TextCanvas c;\n-\n- public static void main(String args[]) {\n-\n-  String[] instructions =\n-        {\n-         \"You must have a printer available to perform this test\",\n-         \"This test should print a page which contains the same\",\n-         \"text messages as in the test window on the screen\",\n-         \"The messages should contain only 'OK' and 'expected' messages\",\n-         \"There should be no FAILURE messages.\",\n-         \"You should also monitor the command line to see if any exceptions\",\n-         \"were thrown\",\n-         \"If the page fails to print, but there were no exceptions\",\n-         \"then the problem is likely elsewhere (ie your printer)\"\n-       };\n-      Sysout.createDialog( );\n-      Sysout.printInstructions( instructions );\n-\n-    PrintNullString f = new PrintNullString();\n-    f.show();\n- }\n-\n- public PrintNullString() {\n-    super(\"JDK 1.2 drawString Printing\");\n-\n-    c = new TextCanvas();\n-    add(\"Center\", c);\n-\n-    Button printButton = new Button(\"Print\");\n-    printButton.addActionListener(this);\n-    add(\"South\", printButton);\n-\n-    addWindowListener(new WindowAdapter() {\n-       public void windowClosing(WindowEvent e) {\n-             System.exit(0);\n-            }\n-    });\n-\n-    pack();\n- }\n-\n- public void actionPerformed(ActionEvent e) {\n-\n-   PrinterJob pj = PrinterJob.getPrinterJob();\n-\n-   if (pj != null && pj.printDialog()) {\n-\n-       pj.setPrintable(c);\n-       try {\n-            pj.print();\n-      } catch (PrinterException pe) {\n-      } finally {\n-         System.err.println(\"PRINT RETURNED\");\n-      }\n-   }\n- }\n-\n- class TextCanvas extends Panel implements Printable {\n-\n-    String nullStr = null;\n-    String emptyStr = new String();\n-    AttributedString nullAttStr = null;\n-    AttributedString emptyAttStr = new AttributedString(emptyStr);\n-    AttributedCharacterIterator nullIterator = null;\n-    AttributedCharacterIterator emptyIterator = emptyAttStr.getIterator();\n-\n-    public int print(Graphics g, PageFormat pgFmt, int pgIndex) {\n-\n-      if (pgIndex > 0)\n-         return Printable.NO_SUCH_PAGE;\n-\n-      Graphics2D g2d = (Graphics2D)g;\n-      g2d.translate(pgFmt.getImageableX(), pgFmt.getImageableY());\n-\n-      paint(g);\n-\n-      return Printable.PAGE_EXISTS;\n-    }\n-\n-    public void paint(Graphics g1) {\n-        Graphics2D g = (Graphics2D)g1;\n-\n-        \/\/ API 1: null & empty drawString(String, int, int);\n-        try {\n-             g.drawString(nullStr, 20, 40);\n-             g.drawString(\"FAILURE: No NPE for null String, int\", 20, 40);\n-        } catch (NullPointerException e) {\n-          g.drawString(\"caught expected NPE for null String, int\", 20, 40);\n-        }\/* catch (Exception e) {\n-          g.drawString(\"FAILURE: unexpected exception for null String, int\",\n-                        20, 40);\n-        }*\/\n-\n-        \/\/try {\n-             g.drawString(emptyStr, 20, 60);\n-             g.drawString(\"OK for empty String, int\", 20, 60);\n-        \/*} catch (Exception e) {\n-          g.drawString(\"FAILURE: unexpected exception for empty String, int\",\n-                        20, 60);\n-        }*\/\n-\n-\n-        \/\/ API 2: null & empty drawString(String, float, float);\n-        try {\n-             g.drawString(nullStr, 20.0f, 80.0f);\n-             g.drawString(\"FAILURE: No NPE for null String, float\", 20, 80);\n-        } catch (NullPointerException e) {\n-          g.drawString(\"caught expected NPE for null String, float\", 20, 80);\n-        } \/*catch (Exception e) {\n-          g.drawString(\"FAILURE: unexpected exception for null String, float\",\n-                        20, 80);\n-        }*\/\n-        \/\/try {\n-             g.drawString(emptyStr, 20.0f, 100.0f);\n-             g.drawString(\"OK for empty String, float\", 20.0f, 100.f);\n-        \/* } catch (Exception e) {\n-          g.drawString(\"FAILURE: unexpected exception for empty String, float\",\n-                        20, 100);\n-        }*\/\n-\n-        \/\/ API 3: null & empty drawString(Iterator, int, int);\n-        try {\n-             g.drawString(nullIterator, 20, 120);\n-             g.drawString(\"FAILURE: No NPE for null iterator, float\", 20, 120);\n-        } catch (NullPointerException e) {\n-          g.drawString(\"caught expected NPE for null iterator, int\", 20, 120);\n-        } \/*catch (Exception e) {\n-          g.drawString(\"FAILURE: unexpected exception for null iterator, int\",\n-                       20, 120);\n-        } *\/\n-        try {\n-             g.drawString(emptyIterator, 20, 140);\n-             g.drawString(\"FAILURE: No IAE for empty iterator, int\",\n-                           20, 140);\n-        } catch (IllegalArgumentException e) {\n-          g.drawString(\"caught expected IAE for empty iterator, int\",\n-                        20, 140);\n-        } \/*catch (Exception e) {\n-          g.drawString(\"FAILURE: unexpected exception for empty iterator, int\",\n-                       20, 140);\n-        } *\/\n-\n-\n-        \/\/ API 4: null & empty drawString(Iterator, float, int);\n-        try {\n-             g.drawString(nullIterator, 20.0f, 160.0f);\n-             g.drawString(\"FAILURE: No NPE for null iterator, float\", 20, 160);\n-        } catch (NullPointerException e) {\n-          g.drawString(\"caught expected NPE for null iterator, float\", 20, 160);\n-        } \/*catch (Exception e) {\n-          g.drawString(\"FAILURE: unexpected exception for null iterator, float\",\n-                        20, 160);\n-        } *\/\n-\n-        try {\n-             g.drawString(emptyIterator, 20, 180);\n-             g.drawString(\"FAILURE: No IAE for empty iterator, float\",\n-                           20, 180);\n-        } catch (IllegalArgumentException e) {\n-          g.drawString(\"caught expected IAE for empty iterator, float\",\n-                        20, 180);\n-        } \/*catch (Exception e) {\n-          g.drawString(\"FAILURE: unexpected exception for empty iterator, float\",\n-                       20, 180);\n-        } *\/\n-    }\n-\n-     public Dimension getPreferredSize() {\n-        return new Dimension(450, 250);\n-    }\n- }\n-\n-}\n-\n-class Sysout\n- {\n-   private static TestDialog dialog;\n-\n-   public static void createDialogWithInstructions( String[] instructions )\n-    {\n-      dialog = new TestDialog( new Frame(), \"Instructions\" );\n-      dialog.printInstructions( instructions );\n-      dialog.show();\n-      println( \"Any messages for the tester will display here.\" );\n-    }\n-\n-   public static void createDialog( )\n-    {\n-      dialog = new TestDialog( new Frame(), \"Instructions\" );\n-      String[] defInstr = { \"Instructions will appear here. \", \"\" } ;\n-      dialog.printInstructions( defInstr );\n-      dialog.show();\n-      println( \"Any messages for the tester will display here.\" );\n-    }\n-\n-\n-   public static void printInstructions( String[] instructions )\n-    {\n-      dialog.printInstructions( instructions );\n+public class PrintNullString extends Frame {\n+    private static final String INSTRUCTIONS =\n+            \"This test should print a page which contains the same\\n\" +\n+            \"text messages as in the test window on the screen.\\n\" +\n+            \"\\n\" +\n+            \"The messages should contain only 'OK' and 'expected' messages.\\n\" +\n+            \"Press Pass if it's the case; otherwise press Fail.\\n\" +\n+            \"\\n\" +\n+            \"If the page fails to print, but there were no exceptions\\n\" +\n+            \"then the problem is likely elsewhere (i.e. your printer)\";\n+\n+    public static void main(String[] args) throws Exception {\n+        if (PrinterJob.lookupPrintServices().length == 0) {\n+            throw new RuntimeException(\"Printer not configured or available.\");\n+        }\n+\n+        PassFailJFrame.builder()\n+                .instructions(INSTRUCTIONS)\n+                .testUI(PrintNullString::new)\n+                .rows((int) INSTRUCTIONS.lines().count() + 1)\n+                .columns(45)\n+                .build()\n+                .awaitAndCheck();\n@@ -242,4 +73,24 @@\n-\n-   public static void println( String messageIn )\n-    {\n-      dialog.displayMessage( messageIn );\n+    public PrintNullString() {\n+        super(\"PrintNullString\");\n+\n+        TextCanvas c = new TextCanvas();\n+        add(\"Center\", c);\n+\n+        Button b = new Button(\"Print\");\n+        add(\"South\", b);\n+        b.addActionListener(e -> {\n+            PrinterJob pj = PrinterJob.getPrinterJob();\n+            if (pj.printDialog()) {\n+                pj.setPrintable(c);\n+                try {\n+                    pj.print();\n+                } catch (PrinterException ex) {\n+                    ex.printStackTrace();\n+                    String msg = \"PrinterException: \" + ex.getMessage();\n+                    JOptionPane.showMessageDialog(b, msg, \"Error occurred\",\n+                            JOptionPane.ERROR_MESSAGE);\n+                    PassFailJFrame.forceFail(msg);\n+                }\n+            }\n+        });\n+        pack();\n@@ -248,28 +99,18 @@\n- }\/\/ Sysout  class\n-\n-\/**\n-  This is part of the standard test machinery.  It provides a place for the\n-   test instructions to be displayed, and a place for interactive messages\n-   to the user to be displayed.\n-  To have the test instructions displayed, see Sysout.\n-  To have a message to the user be displayed, see Sysout.\n-  Do not call anything in this dialog directly.\n-  *\/\n-class TestDialog extends Dialog {\n-\n-   TextArea instructionsText;\n-   TextArea messageText;\n-   int maxStringLength = 80;\n-\n-   \/\/DO NOT call this directly, go through Sysout\n-   public TestDialog( Frame frame, String name )\n-    {\n-      super( frame, name );\n-      int scrollBoth = TextArea.SCROLLBARS_BOTH;\n-      instructionsText = new TextArea( \"\", 15, maxStringLength, scrollBoth );\n-      add( \"North\", instructionsText );\n-\n-      messageText = new TextArea( \"\", 5, maxStringLength, scrollBoth );\n-      add(\"Center\", messageText);\n-\n-      pack();\n+    private static class TextCanvas extends Panel implements Printable {\n+        private final String nullStr = null;\n+        private final String emptyStr = \"\";\n+        private final AttributedString emptyAttStr = new AttributedString(emptyStr);\n+        private final AttributedCharacterIterator nullIterator = null;\n+        private final AttributedCharacterIterator emptyIterator = emptyAttStr.getIterator();\n+\n+        @Override\n+        public void paint(Graphics g) {\n+            Graphics2D g2d = (Graphics2D) g;\n+            paint(g2d);\n+        }\n+\n+        @Override\n+        public int print(Graphics g, PageFormat pgFmt, int pgIndex) {\n+            if (pgIndex > 0) {\n+                return NO_SUCH_PAGE;\n+            }\n@@ -277,2 +118,3 @@\n-      show();\n-    }\/\/ TestDialog()\n+            Graphics2D g2d = (Graphics2D) g;\n+            g2d.translate(pgFmt.getImageableX(), pgFmt.getImageableY());\n+            paint(g2d);\n@@ -280,5 +122,2 @@\n-   \/\/DO NOT call this directly, go through Sysout\n-   public void printInstructions( String[] instructions )\n-    {\n-      \/\/Clear out any current instructions\n-      instructionsText.setText( \"\" );\n+            return PAGE_EXISTS;\n+        }\n@@ -286,1 +125,8 @@\n-      \/\/Go down array of instruction strings\n+        private void paint(Graphics2D g2d) {\n+            \/\/ API 1: null & empty drawString(String, int, int);\n+            try {\n+                g2d.drawString(nullStr, 20, 40);\n+                g2d.drawString(\"FAILURE: No NPE for null String, int\", 20, 40);\n+            } catch (NullPointerException e) {\n+                g2d.drawString(\"caught expected NPE for null String, int\", 20, 40);\n+            }\n@@ -288,13 +134,2 @@\n-      String printStr, remainingStr;\n-      for( int i=0; i < instructions.length; i++ )\n-       {\n-         \/\/chop up each into pieces maxSringLength long\n-         remainingStr = instructions[ i ];\n-         while( remainingStr.length() > 0 )\n-          {\n-            \/\/if longer than max then chop off first max chars to print\n-            if( remainingStr.length() >= maxStringLength )\n-             {\n-               \/\/Try to chop on a word boundary\n-               int posOfSpace = remainingStr.\n-                  lastIndexOf( ' ', maxStringLength - 1 );\n+            g2d.drawString(emptyStr, 20, 60);\n+            g2d.drawString(\"OK for empty String, int\", 20, 60);\n@@ -302,1 +137,7 @@\n-               if( posOfSpace <= 0 ) posOfSpace = maxStringLength - 1;\n+            \/\/ API 2: null & empty drawString(String, float, float);\n+            try {\n+                g2d.drawString(nullStr, 20.0f, 80.0f);\n+                g2d.drawString(\"FAILURE: No NPE for null String, float\", 20, 80);\n+            } catch (NullPointerException e) {\n+                g2d.drawString(\"caught expected NPE for null String, float\", 20, 80);\n+            }\n@@ -304,9 +145,2 @@\n-               printStr = remainingStr.substring( 0, posOfSpace + 1 );\n-               remainingStr = remainingStr.substring( posOfSpace + 1 );\n-             }\n-            \/\/else just print\n-            else\n-             {\n-               printStr = remainingStr;\n-               remainingStr = \"\";\n-             }\n+            g2d.drawString(emptyStr, 20.0f, 100.0f);\n+            g2d.drawString(\"OK for empty String, float\", 20.0f, 100.f);\n@@ -314,1 +148,7 @@\n-            instructionsText.append( printStr + \"\\n\" );\n+            \/\/ API 3: null & empty drawString(Iterator, int, int);\n+            try {\n+                g2d.drawString(nullIterator, 20, 120);\n+                g2d.drawString(\"FAILURE: No NPE for null iterator, float\", 20, 120);\n+            } catch (NullPointerException e) {\n+                g2d.drawString(\"caught expected NPE for null iterator, int\", 20, 120);\n+            }\n@@ -316,1 +156,6 @@\n-          }\/\/ while\n+            try {\n+                g2d.drawString(emptyIterator, 20, 140);\n+                g2d.drawString(\"FAILURE: No IAE for empty iterator, int\", 20, 140);\n+            } catch (IllegalArgumentException e) {\n+                g2d.drawString(\"caught expected IAE for empty iterator, int\", 20, 140);\n+            }\n@@ -318,1 +163,7 @@\n-       }\/\/ for\n+            \/\/ API 4: null & empty drawString(Iterator, float, int);\n+            try {\n+                g2d.drawString(nullIterator, 20.0f, 160.0f);\n+                g2d.drawString(\"FAILURE: No NPE for null iterator, float\", 20, 160);\n+            } catch (NullPointerException e) {\n+                g2d.drawString(\"caught expected NPE for null iterator, float\", 20, 160);\n+            }\n@@ -320,1 +171,7 @@\n-    }\/\/printInstructions()\n+            try {\n+                g2d.drawString(emptyIterator, 20, 180);\n+                g2d.drawString(\"FAILURE: No IAE for empty iterator, float\", 20, 180);\n+            } catch (IllegalArgumentException e) {\n+                g2d.drawString(\"caught expected IAE for empty iterator, float\", 20, 180);\n+            }\n+        }\n@@ -322,4 +179,4 @@\n-   \/\/DO NOT call this directly, go through Sysout\n-   public void displayMessage( String messageIn )\n-    {\n-      messageText.append( messageIn + \"\\n\" );\n+        @Override\n+        public Dimension getPreferredSize() {\n+            return new Dimension(450, 250);\n+        }\n@@ -327,2 +184,1 @@\n-\n- }\/\/ TestDialog  class\n+}\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintNullString.java","additions":141,"deletions":285,"binary":false,"changes":426,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,1 +24,14 @@\n-\/**\n+import java.awt.Graphics;\n+import java.awt.Graphics2D;\n+import java.awt.print.PageFormat;\n+import java.awt.print.Printable;\n+import java.awt.print.PrinterException;\n+import java.awt.print.PrinterJob;\n+\n+import javax.swing.BorderFactory;\n+import javax.swing.Box;\n+import javax.swing.JButton;\n+import javax.swing.JComponent;\n+import javax.swing.JOptionPane;\n+\n+\/*\n@@ -28,1 +41,3 @@\n- * @author prr\n+ * @key printer\n+ * @library \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame\n@@ -31,0 +46,22 @@\n+public class PrintParenString implements Printable {\n+    private static final String STR = \"String containing unclosed parenthesis (.\";\n+\n+    private static final String INSTRUCTIONS =\n+            \"This test should print a page with following text\\n\\n\" +\n+            STR + \"\\n\\n\" +\n+            \"If an exception is thrown, or the page doesn't print properly\\n\" +\n+            \"then the test fails\";\n+\n+    public static void main(String[] args) throws Exception {\n+        if (PrinterJob.lookupPrintServices().length == 0) {\n+            throw new RuntimeException(\"Printer not configured or available.\");\n+        }\n+\n+        PassFailJFrame.builder()\n+                .instructions(INSTRUCTIONS)\n+                .splitUI(PrintParenString::createTestUI)\n+                .rows((int) INSTRUCTIONS.lines().count() + 1)\n+                .columns(45)\n+                .build()\n+                .awaitAndCheck();\n+    }\n@@ -32,42 +69,15 @@\n-\n-import java.awt.*;\n-import java.awt.event.*;\n-import java.awt.print.*;\n-import java.text.*;\n-\n-public class PrintParenString extends Frame implements ActionListener {\n-\n- private TextCanvas c;\n-\n- public static void main(String args[]) {\n-\n-  String[] instructions =\n-        {\n-         \"You must have a printer available to perform this test\",\n-         \"This test should print a page which contains the same\",\n-         \"text message as in the test window on the screen\",\n-         \"You should also monitor the command line to see if any exceptions\",\n-         \"were thrown\",\n-         \"If an exception is thrown, or the page doesn't print properly\",\n-         \"then the test fails\",\n-       };\n-      Sysout.createDialog( );\n-      Sysout.printInstructions( instructions );\n-\n-    PrintParenString f = new PrintParenString();\n-    f.show();\n- }\n-\n- public PrintParenString() {\n-    super(\"JDK 1.2 drawString Printing\");\n-\n-    c = new TextCanvas();\n-    add(\"Center\", c);\n-\n-    Button printButton = new Button(\"Print\");\n-    printButton.addActionListener(this);\n-    add(\"South\", printButton);\n-\n-    addWindowListener(new WindowAdapter() {\n-       public void windowClosing(WindowEvent e) {\n-             System.exit(0);\n+    private static JComponent createTestUI() {\n+        JButton b = new JButton(\"Print\");\n+        b.addActionListener((ae) -> {\n+            try {\n+                PrinterJob job = PrinterJob.getPrinterJob();\n+                job.setPrintable(new PrintParenString());\n+                if (job.printDialog()) {\n+                    job.print();\n+                }\n+            } catch (PrinterException ex) {\n+                ex.printStackTrace();\n+                String msg = \"PrinterException: \" + ex.getMessage();\n+                JOptionPane.showMessageDialog(b, msg, \"Error occurred\",\n+                        JOptionPane.ERROR_MESSAGE);\n+                PassFailJFrame.forceFail(msg);\n@@ -75,41 +85,8 @@\n-    });\n-\n-    pack();\n- }\n-\n- public void actionPerformed(ActionEvent e) {\n-\n-   PrinterJob pj = PrinterJob.getPrinterJob();\n-\n-   if (pj != null && pj.printDialog()) {\n-\n-       pj.setPrintable(c);\n-       try {\n-            pj.print();\n-      } catch (PrinterException pe) {\n-      } finally {\n-         System.err.println(\"PRINT RETURNED\");\n-      }\n-   }\n- }\n-\n- class TextCanvas extends Panel implements Printable {\n-\n-    String nullStr = null;\n-    String emptyStr = new String();\n-    AttributedString nullAttStr = null;\n-    AttributedString emptyAttStr = new AttributedString(emptyStr);\n-    AttributedCharacterIterator nullIterator = null;\n-    AttributedCharacterIterator emptyIterator = emptyAttStr.getIterator();\n-\n-    public int print(Graphics g, PageFormat pgFmt, int pgIndex) {\n-\n-      if (pgIndex > 0)\n-         return Printable.NO_SUCH_PAGE;\n-\n-      Graphics2D g2d = (Graphics2D)g;\n-      g2d.translate(pgFmt.getImageableX(), pgFmt.getImageableY());\n-\n-      paint(g);\n-\n-      return Printable.PAGE_EXISTS;\n+        });\n+\n+        Box main = Box.createHorizontalBox();\n+        main.setBorder(BorderFactory.createEmptyBorder(8, 8, 8, 8));\n+        main.add(Box.createHorizontalGlue());\n+        main.add(b);\n+        main.add(Box.createHorizontalGlue());\n+        return main;\n@@ -118,5 +95,5 @@\n-    public void paint(Graphics g1) {\n-        Graphics2D g = (Graphics2D)g1;\n-\n-          String str = \"String containing unclosed parenthesis (.\";\n-          g.drawString(str, 20, 40);\n+    @Override\n+    public int print(Graphics g, PageFormat pgFmt, int pgIndex) {\n+        if (pgIndex > 0) {\n+            return Printable.NO_SUCH_PAGE;\n+        }\n@@ -124,1 +101,3 @@\n-    }\n+        Graphics2D g2d = (Graphics2D) g;\n+        g2d.translate(pgFmt.getImageableX(), pgFmt.getImageableY());\n+        g2d.drawString(STR, 20, 40);\n@@ -126,2 +105,1 @@\n-     public Dimension getPreferredSize() {\n-        return new Dimension(450, 250);\n+        return Printable.PAGE_EXISTS;\n@@ -129,2 +107,0 @@\n- }\n-\n@@ -132,115 +108,0 @@\n-\n-class Sysout\n- {\n-   private static TestDialog dialog;\n-\n-   public static void createDialogWithInstructions( String[] instructions )\n-    {\n-      dialog = new TestDialog( new Frame(), \"Instructions\" );\n-      dialog.printInstructions( instructions );\n-      dialog.show();\n-      println( \"Any messages for the tester will display here.\" );\n-    }\n-\n-   public static void createDialog( )\n-    {\n-      dialog = new TestDialog( new Frame(), \"Instructions\" );\n-      String[] defInstr = { \"Instructions will appear here. \", \"\" } ;\n-      dialog.printInstructions( defInstr );\n-      dialog.show();\n-      println( \"Any messages for the tester will display here.\" );\n-    }\n-\n-\n-   public static void printInstructions( String[] instructions )\n-    {\n-      dialog.printInstructions( instructions );\n-    }\n-\n-\n-   public static void println( String messageIn )\n-    {\n-      dialog.displayMessage( messageIn );\n-    }\n-\n- }\/\/ Sysout  class\n-\n-\/**\n-  This is part of the standard test machinery.  It provides a place for the\n-   test instructions to be displayed, and a place for interactive messages\n-   to the user to be displayed.\n-  To have the test instructions displayed, see Sysout.\n-  To have a message to the user be displayed, see Sysout.\n-  Do not call anything in this dialog directly.\n-  *\/\n-class TestDialog extends Dialog {\n-\n-   TextArea instructionsText;\n-   TextArea messageText;\n-   int maxStringLength = 80;\n-\n-   \/\/DO NOT call this directly, go through Sysout\n-   public TestDialog( Frame frame, String name )\n-    {\n-      super( frame, name );\n-      int scrollBoth = TextArea.SCROLLBARS_BOTH;\n-      instructionsText = new TextArea( \"\", 15, maxStringLength, scrollBoth );\n-      add( \"North\", instructionsText );\n-\n-      messageText = new TextArea( \"\", 5, maxStringLength, scrollBoth );\n-      add(\"Center\", messageText);\n-\n-      pack();\n-\n-      show();\n-    }\/\/ TestDialog()\n-\n-   \/\/DO NOT call this directly, go through Sysout\n-   public void printInstructions( String[] instructions )\n-    {\n-      \/\/Clear out any current instructions\n-      instructionsText.setText( \"\" );\n-\n-      \/\/Go down array of instruction strings\n-\n-      String printStr, remainingStr;\n-      for( int i=0; i < instructions.length; i++ )\n-       {\n-         \/\/chop up each into pieces maxSringLength long\n-         remainingStr = instructions[ i ];\n-         while( remainingStr.length() > 0 )\n-          {\n-            \/\/if longer than max then chop off first max chars to print\n-            if( remainingStr.length() >= maxStringLength )\n-             {\n-               \/\/Try to chop on a word boundary\n-               int posOfSpace = remainingStr.\n-                  lastIndexOf( ' ', maxStringLength - 1 );\n-\n-               if( posOfSpace <= 0 ) posOfSpace = maxStringLength - 1;\n-\n-               printStr = remainingStr.substring( 0, posOfSpace + 1 );\n-               remainingStr = remainingStr.substring( posOfSpace + 1 );\n-             }\n-            \/\/else just print\n-            else\n-             {\n-               printStr = remainingStr;\n-               remainingStr = \"\";\n-             }\n-\n-            instructionsText.append( printStr + \"\\n\" );\n-\n-          }\/\/ while\n-\n-       }\/\/ for\n-\n-    }\/\/printInstructions()\n-\n-   \/\/DO NOT call this directly, go through Sysout\n-   public void displayMessage( String messageIn )\n-    {\n-      messageText.append( messageIn + \"\\n\" );\n-    }\n-\n- }\/\/ TestDialog  class\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintParenString.java","additions":72,"deletions":211,"binary":false,"changes":283,"status":"modified"},{"patch":"@@ -29,1 +29,1 @@\n- * @author prr\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintRotatedText.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintTest.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -28,0 +28,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintTestLexmarkIQ.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n- * @author prr\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintTextLayout.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintTextTest.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,1 +24,17 @@\n-\/**\n+import java.awt.Button;\n+import java.awt.Dimension;\n+import java.awt.Font;\n+import java.awt.FontMetrics;\n+import java.awt.Frame;\n+import java.awt.Graphics;\n+import java.awt.Graphics2D;\n+import java.awt.Panel;\n+import java.awt.geom.AffineTransform;\n+import java.awt.print.PageFormat;\n+import java.awt.print.Printable;\n+import java.awt.print.PrinterException;\n+import java.awt.print.PrinterJob;\n+\n+import javax.swing.JOptionPane;\n+\n+\/*\n@@ -27,0 +43,3 @@\n+ * @key printer\n+ * @library \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame\n@@ -28,1 +47,0 @@\n- * @author prr\n@@ -31,0 +49,21 @@\n+public class PrintTranslatedFont extends Frame {\n+    private static final String INSTRUCTIONS =\n+            \"This test should print a page which contains the same\\n\" +\n+            \"content as the test window on the screen, in particular the lines\\n\" +\n+            \"should be immediately under the text\\n\\n\" +\n+            \"If an exception is thrown, or the page doesn't print properly\\n\" +\n+            \"then the test fails\";\n+\n+    public static void main(String[] args) throws Exception {\n+        if (PrinterJob.lookupPrintServices().length == 0) {\n+            throw new RuntimeException(\"Printer not configured or available.\");\n+        }\n+\n+        PassFailJFrame.builder()\n+                .instructions(INSTRUCTIONS)\n+                .testUI(PrintTranslatedFont::new)\n+                .rows((int) INSTRUCTIONS.lines().count() + 1)\n+                .columns(45)\n+                .build()\n+                .awaitAndCheck();\n+    }\n@@ -32,44 +71,21 @@\n-\n-import java.awt.*;\n-import java.awt.event.*;\n-import java.awt.geom.*;\n-import java.awt.print.*;\n-import java.text.*;\n-\n-public class PrintTranslatedFont extends Frame implements ActionListener {\n-\n- private TextCanvas c;\n-\n- public static void main(String args[]) {\n-\n-  String[] instructions =\n-        {\n-         \"You must have a printer available to perform this test\",\n-         \"This test should print a page which contains the same\",\n-         \"content as the test window on the screen, in particular the lines\",\n-         \"should be immediately under the text\",\n-         \"You should also monitor the command line to see if any exceptions\",\n-         \"were thrown\",\n-         \"If an exception is thrown, or the page doesn't print properly\",\n-         \"then the test fails\",\n-       };\n-      Sysout.createDialog( );\n-      Sysout.printInstructions( instructions );\n-\n-    PrintTranslatedFont f = new PrintTranslatedFont();\n-    f.show();\n- }\n-\n- public PrintTranslatedFont() {\n-    super(\"JDK 1.2 drawString Printing\");\n-\n-    c = new TextCanvas();\n-    add(\"Center\", c);\n-\n-    Button printButton = new Button(\"Print\");\n-    printButton.addActionListener(this);\n-    add(\"South\", printButton);\n-\n-    addWindowListener(new WindowAdapter() {\n-       public void windowClosing(WindowEvent e) {\n-             System.exit(0);\n+    public PrintTranslatedFont() {\n+        super(\"PrintTranslatedFont\");\n+\n+        TextCanvas c = new TextCanvas();\n+        add(\"Center\", c);\n+\n+        Button b = new Button(\"Print\");\n+        add(\"South\", b);\n+        b.addActionListener(e -> {\n+            PrinterJob pj = PrinterJob.getPrinterJob();\n+            if (pj.printDialog()) {\n+                pj.setPrintable(c);\n+                try {\n+                    pj.print();\n+                } catch (PrinterException ex) {\n+                    ex.printStackTrace();\n+                    String msg = \"PrinterException: \" + ex.getMessage();\n+                    JOptionPane.showMessageDialog(b, msg, \"Error occurred\",\n+                            JOptionPane.ERROR_MESSAGE);\n+                    PassFailJFrame.forceFail(msg);\n+                }\n@@ -77,6 +93,1 @@\n-    });\n-\n-    pack();\n- }\n-\n- public void actionPerformed(ActionEvent e) {\n+        });\n@@ -84,27 +95,1 @@\n-   PrinterJob pj = PrinterJob.getPrinterJob();\n-\n-   if (pj != null && pj.printDialog()) {\n-\n-       pj.setPrintable(c);\n-       try {\n-            pj.print();\n-      } catch (PrinterException pe) {\n-      } finally {\n-         System.err.println(\"PRINT RETURNED\");\n-      }\n-   }\n- }\n-\n- class TextCanvas extends Panel implements Printable {\n-\n-    public int print(Graphics g, PageFormat pgFmt, int pgIndex) {\n-\n-      if (pgIndex > 0)\n-         return Printable.NO_SUCH_PAGE;\n-\n-      Graphics2D g2d = (Graphics2D)g;\n-      g2d.translate(pgFmt.getImageableX(), pgFmt.getImageableY());\n-\n-      paint(g);\n-\n-      return Printable.PAGE_EXISTS;\n+        pack();\n@@ -113,23 +98,12 @@\n-    public void paint(Graphics g1) {\n-        Graphics2D g = (Graphics2D)g1;\n-\n-          Font f = new Font(\"Dialog\", Font.PLAIN, 20);\n-          int tx = 20;\n-          int ty = 20;\n-          AffineTransform at = AffineTransform.getTranslateInstance(tx, ty);\n-          f = f.deriveFont(at);\n-          g.setFont(f);\n-\n-          FontMetrics fm = g.getFontMetrics();\n-          String str = \"Basic ascii string\";\n-          int sw = fm.stringWidth(str);\n-          int posx = 20, posy = 40;\n-          g.drawString(str, posx, posy);\n-          g.drawLine(posx+tx, posy+ty+2, posx+tx+sw, posy+ty+2);\n-\n-          posx = 20; posy = 70;\n-          str = \"Test string compound printing \\u2203\\u2200\";\n-          sw = fm.stringWidth(str);\n-          g.drawString(str, posx, posy);\n-          g.drawLine(posx+tx, posy+ty+2, posx+tx+sw, posy+ty+2);\n-    }\n+    private static class TextCanvas extends Panel implements Printable {\n+        @Override\n+        public void paint(Graphics g) {\n+            Graphics2D g2d = (Graphics2D) g;\n+            paint(g2d);\n+        }\n+\n+        @Override\n+        public int print(Graphics g, PageFormat pgFmt, int pgIndex) {\n+            if (pgIndex > 0) {\n+                return Printable.NO_SUCH_PAGE;\n+            }\n@@ -137,2 +111,34 @@\n-     public Dimension getPreferredSize() {\n-        return new Dimension(450, 250);\n+            Graphics2D g2d = (Graphics2D) g;\n+            g2d.translate(pgFmt.getImageableX(), pgFmt.getImageableY());\n+            paint(g2d);\n+            return Printable.PAGE_EXISTS;\n+        }\n+\n+        private void paint(Graphics2D g2d) {\n+            Font f = new Font(\"Dialog\", Font.PLAIN, 20);\n+            int tx = 20;\n+            int ty = 20;\n+            AffineTransform at = AffineTransform.getTranslateInstance(tx, ty);\n+            f = f.deriveFont(at);\n+            g2d.setFont(f);\n+\n+            FontMetrics fm = g2d.getFontMetrics();\n+            String str = \"Basic ascii string\";\n+            int sw = fm.stringWidth(str);\n+            int posx = 20;\n+            int posy = 40;\n+            g2d.drawString(str, posx, posy);\n+            g2d.drawLine(posx + tx, posy + ty + 2, posx + tx + sw, posy + ty + 2);\n+\n+            posx = 20;\n+            posy = 70;\n+            str = \"Test string compound printing \\u2203\\u2200\";\n+            sw = fm.stringWidth(str);\n+            g2d.drawString(str, posx, posy);\n+            g2d.drawLine(posx + tx, posy + ty + 2, posx + tx + sw, posy + ty + 2);\n+        }\n+\n+        @Override\n+        public Dimension getPreferredSize() {\n+            return new Dimension(450, 250);\n+        }\n@@ -140,2 +146,0 @@\n- }\n-\n@@ -143,115 +147,0 @@\n-\n-class Sysout\n- {\n-   private static TestDialog dialog;\n-\n-   public static void createDialogWithInstructions( String[] instructions )\n-    {\n-      dialog = new TestDialog( new Frame(), \"Instructions\" );\n-      dialog.printInstructions( instructions );\n-      dialog.show();\n-      println( \"Any messages for the tester will display here.\" );\n-    }\n-\n-   public static void createDialog( )\n-    {\n-      dialog = new TestDialog( new Frame(), \"Instructions\" );\n-      String[] defInstr = { \"Instructions will appear here. \", \"\" } ;\n-      dialog.printInstructions( defInstr );\n-      dialog.show();\n-      println( \"Any messages for the tester will display here.\" );\n-    }\n-\n-\n-   public static void printInstructions( String[] instructions )\n-    {\n-      dialog.printInstructions( instructions );\n-    }\n-\n-\n-   public static void println( String messageIn )\n-    {\n-      dialog.displayMessage( messageIn );\n-    }\n-\n- }\/\/ Sysout  class\n-\n-\/**\n-  This is part of the standard test machinery.  It provides a place for the\n-   test instructions to be displayed, and a place for interactive messages\n-   to the user to be displayed.\n-  To have the test instructions displayed, see Sysout.\n-  To have a message to the user be displayed, see Sysout.\n-  Do not call anything in this dialog directly.\n-  *\/\n-class TestDialog extends Dialog {\n-\n-   TextArea instructionsText;\n-   TextArea messageText;\n-   int maxStringLength = 80;\n-\n-   \/\/DO NOT call this directly, go through Sysout\n-   public TestDialog( Frame frame, String name )\n-    {\n-      super( frame, name );\n-      int scrollBoth = TextArea.SCROLLBARS_BOTH;\n-      instructionsText = new TextArea( \"\", 15, maxStringLength, scrollBoth );\n-      add( \"North\", instructionsText );\n-\n-      messageText = new TextArea( \"\", 5, maxStringLength, scrollBoth );\n-      add(\"Center\", messageText);\n-\n-      pack();\n-\n-      show();\n-    }\/\/ TestDialog()\n-\n-   \/\/DO NOT call this directly, go through Sysout\n-   public void printInstructions( String[] instructions )\n-    {\n-      \/\/Clear out any current instructions\n-      instructionsText.setText( \"\" );\n-\n-      \/\/Go down array of instruction strings\n-\n-      String printStr, remainingStr;\n-      for( int i=0; i < instructions.length; i++ )\n-       {\n-         \/\/chop up each into pieces maxSringLength long\n-         remainingStr = instructions[ i ];\n-         while( remainingStr.length() > 0 )\n-          {\n-            \/\/if longer than max then chop off first max chars to print\n-            if( remainingStr.length() >= maxStringLength )\n-             {\n-               \/\/Try to chop on a word boundary\n-               int posOfSpace = remainingStr.\n-                  lastIndexOf( ' ', maxStringLength - 1 );\n-\n-               if( posOfSpace <= 0 ) posOfSpace = maxStringLength - 1;\n-\n-               printStr = remainingStr.substring( 0, posOfSpace + 1 );\n-               remainingStr = remainingStr.substring( posOfSpace + 1 );\n-             }\n-            \/\/else just print\n-            else\n-             {\n-               printStr = remainingStr;\n-               remainingStr = \"\";\n-             }\n-\n-            instructionsText.append( printStr + \"\\n\" );\n-\n-          }\/\/ while\n-\n-       }\/\/ for\n-\n-    }\/\/printInstructions()\n-\n-   \/\/DO NOT call this directly, go through Sysout\n-   public void displayMessage( String messageIn )\n-    {\n-      messageText.append( messageIn + \"\\n\" );\n-    }\n-\n- }\/\/ TestDialog  class\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintTranslatedFont.java","additions":111,"deletions":222,"binary":false,"changes":333,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n- * @author prr\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintVolatileImage.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -28,0 +28,1 @@\n+  @key printer\n@@ -29,1 +30,0 @@\n-  @author Your Name: area=PrinterJob.modality\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrinterDialogsModalityTest\/PrinterDialogsModalityTest.html","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+  @key printer\n@@ -28,1 +29,0 @@\n-  @author son@sparc.spb.su: area=PrinterJob.modality\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrinterDialogsModalityTest\/PrinterDialogsModalityTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrinterJobDialogBugDemo.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/RadialGradientPrintingTest.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -25,1 +25,1 @@\n- * @test 1.1 01\/05\/17\n+ * @test\n@@ -27,0 +27,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/RemoveListener.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/SameService.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n-  @author prr: area=PrinterJob\n+  @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/ScaledText\/ScaledText.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,1 +24,15 @@\n-\/**\n+import java.awt.Frame;\n+import java.awt.print.PageFormat;\n+import java.awt.print.PrinterJob;\n+import java.lang.reflect.InvocationTargetException;\n+\n+import javax.print.PrintService;\n+import javax.print.attribute.HashPrintRequestAttributeSet;\n+import javax.print.attribute.PrintRequestAttributeSet;\n+import javax.swing.BorderFactory;\n+import javax.swing.Box;\n+import javax.swing.JComponent;\n+import javax.swing.JLabel;\n+import javax.swing.SwingUtilities;\n+\n+\/*\n@@ -27,1 +41,6 @@\n- * @run main\/othervm\/manual -Djava.security.manager=allow SecurityDialogTest\n+ * @key printer\n+ * @summary Verifies \"Print to file\" option is disable if reading\/writing files\n+ *          is not allowed by Security Manager.\n+ * @library \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame\n+ * @run main\/manual\/othervm -Djava.security.manager=allow SecurityDialogTest\n@@ -29,8 +48,0 @@\n-\n-import java.awt.* ;\n-import java.awt.print.* ;\n-import java.io.*;\n-import java.security.*;\n-import javax.print.*;\n-import javax.print.attribute.*;\n-\n@@ -38,0 +49,19 @@\n+    private static final String INSTRUCTIONS =\n+            \"This test brings up a native and cross-platform page and print dialogs.\\n\" +\n+            \"\\n\" +\n+            \"If the dialog has an option to save to file, the option ought \" +\n+            \"to be disabled.\\n\" +\n+            \"\\n\" +\n+            \"Press the Pass button if the \\\"Print to file\\\" option was disabled in\\n\" +\n+            \"all the dialogs where it was present.\\n\" +\n+            \"Otherwise, press the Fail button.\\n\" +\n+            \"\\n\" +\n+            \"The dialogs should be displayed even when \" +\n+            \"there is no queuePrintJob permission.\";\n+\n+    private static JLabel dialogType;\n+\n+    public static void main(String[] args) throws Exception {\n+        if (PrinterJob.lookupPrintServices().length == 0) {\n+            throw new RuntimeException(\"Printer not configured or available.\");\n+        }\n@@ -39,0 +69,6 @@\n+        PassFailJFrame passFailJFrame = PassFailJFrame.builder()\n+                .instructions(INSTRUCTIONS)\n+                .splitUIBottom(SecurityDialogTest::createTestUI)\n+                .rows((int) INSTRUCTIONS.lines().count() + 1)\n+                .columns(45)\n+                .build();\n@@ -40,16 +76,1 @@\n-    public static void main ( String args[] ) {\n-\n-        String[] instructions =\n-           {\n-            \"You must have a printer available to perform this test.\",\n-            \"This test brings up a native and cross-platform page and\",\n-            \"print dialogs.\",\n-            \"The dialogs should be displayed even when \",\n-            \"there is no queuePrintJob permission.\",\n-            \"If the dialog has an option to save to file, the option ought\",\n-            \"to be disabled if there is no read\/write file permission.\",\n-            \"You should test this by trying different policy files.\"\n-          };\n-\n-         Sysout.createDialog( );\n-         Sysout.printInstructions( instructions );\n+        displayDialogs();\n@@ -57,1 +78,1 @@\n-        SecurityDialogTest pjc = new SecurityDialogTest() ;\n+        passFailJFrame.awaitAndCheck();\n@@ -60,0 +81,2 @@\n+    private static JComponent createTestUI() {\n+        dialogType = new JLabel(\" \");\n@@ -61,41 +84,7 @@\n-  public SecurityDialogTest() {\n-\n-      PrinterJob pj = PrinterJob.getPrinterJob() ;\n-\n-      \/\/ Install a security manager which does not allow reading and\n-      \/\/ writing of files.\n-      \/\/PrintTestSecurityManager ptsm = new PrintTestSecurityManager();\n-      SecurityManager ptsm = new SecurityManager();\n-\n-      try {\n-          System.setSecurityManager(ptsm);\n-      } catch (SecurityException e) {\n-          System.out.println(\"Could not run test - security exception\");\n-      }\n-\n-      try {\n-          PrintJob pjob = Toolkit.getDefaultToolkit().getPrintJob(new Frame(), \"Printing\", null, null);\n-          Sysout.println(\"If the value of pjob is null, the test fails.\\n\");\n-          Sysout.println(\"        pjob = \"+pjob);\n-      } catch (SecurityException e) {\n-      }\n-\n-      PrintService[] services = PrinterJob.lookupPrintServices();\n-      for (int i=0; i<services.length; i++) {\n-          System.out.println(\"SecurityDialogTest service \"+i+\" : \"+services[i]);\n-      }\n-\n-      PrintService defservice = pj.getPrintService();\n-      System.out.println(\"SecurityDialogTest default service : \"+defservice);\n-\n-      System.out.println(\"SecurityDialogTest native PageDialog \");\n-      PageFormat pf1 = pj.pageDialog(new PageFormat());\n-\n-      System.out.println(\"SecurityDialogTest swing PageDialog \");\n-      PrintRequestAttributeSet attributes = new HashPrintRequestAttributeSet();\n-      PageFormat pf2 = pj.pageDialog(attributes);\n-\n-      \/\/ With the security manager installed, save to file should now\n-      \/\/ be denied.\n-      System.out.println(\"SecurityDialogTest native printDialog \");\n-      pj.printDialog();\n+        Box main = Box.createVerticalBox();\n+        main.setBorder(BorderFactory.createEmptyBorder(8, 8, 8, 8));\n+        main.add(new JLabel(\"Current Dialog:\"));\n+        main.add(Box.createVerticalStrut(4));\n+        main.add(dialogType);\n+        return main;\n+    }\n@@ -103,3 +92,3 @@\n-      System.out.println(\"SecurityDialogTest swing printDialog \");\n-      pj.printDialog(attributes);\n-  }\n+    private static void displayDialogs()\n+            throws InterruptedException, InvocationTargetException {\n+        final PrinterJob pj = PrinterJob.getPrinterJob();\n@@ -107,0 +96,4 @@\n+        \/\/ Install a security manager which does not allow reading and\n+        \/\/ writing of files.\n+        SecurityManager ptsm = new SecurityManager();\n+        System.setSecurityManager(ptsm);\n@@ -108,4 +101,3 @@\n-    class PrintTestSecurityManager extends SecurityManager {\n-        public void checkPackageAccess(String pkg) {\n-        }\n-        public void checkPropertyAccess(String key) {\n+        PrintService[] services = PrinterJob.lookupPrintServices();\n+        for (int i = 0; i < services.length; i++) {\n+            System.out.println(\"SecurityDialogTest service \" + i + \" : \" + services[i]);\n@@ -114,1 +106,1 @@\n-    }\n+        System.out.println(\"SecurityDialogTest default service : \" + pj.getPrintService());\n@@ -116,20 +108,2 @@\n-}\n-class Sysout {\n-   private static TestDialog dialog;\n-\n-   public static void createDialogWithInstructions( String[] instructions )\n-    {\n-      dialog = new TestDialog( new Frame(), \"Instructions\" );\n-      dialog.printInstructions( instructions );\n-      dialog.show();\n-      println( \"Any messages for the tester will display here.\" );\n-    }\n-\n-   public static void createDialog( )\n-    {\n-      dialog = new TestDialog( new Frame(), \"Instructions\" );\n-      String[] defInstr = { \"Instructions will appear here. \", \"\" } ;\n-      dialog.printInstructions( defInstr );\n-      dialog.show();\n-      println( \"Any messages for the tester will display here.\" );\n-    }\n+        setDialogType(\"Native Page Dialog\");\n+        pj.pageDialog(new PageFormat());\n@@ -137,0 +111,3 @@\n+        setDialogType(\"Swing Page Dialog\");\n+        PrintRequestAttributeSet attributes = new HashPrintRequestAttributeSet();\n+        pj.pageDialog(attributes);\n@@ -138,4 +115,4 @@\n-   public static void printInstructions( String[] instructions )\n-    {\n-      dialog.printInstructions( instructions );\n-    }\n+        \/\/ With the security manager installed, save to file should now\n+        \/\/ be denied.\n+        setDialogType(\"Native Print Dialog\");\n+        pj.printDialog();\n@@ -143,0 +120,2 @@\n+        setDialogType(\"Swing Print Dialog\");\n+        pj.printDialog(attributes);\n@@ -144,3 +123,1 @@\n-   public static void println( String messageIn )\n-    {\n-      dialog.displayMessage( messageIn );\n+        setDialogType(\"Test completed\");\n@@ -149,78 +126,3 @@\n-}\/\/ Sysout  class\n-\n-\/**\n-  This is part of the standard test machinery.  It provides a place for the\n-   test instructions to be displayed, and a place for interactive messages\n-   to the user to be displayed.\n-  To have the test instructions displayed, see Sysout.\n-  To have a message to the user be displayed, see Sysout.\n-  Do not call anything in this dialog directly.\n-  *\/\n-class TestDialog extends Dialog {\n-\n-   TextArea instructionsText;\n-   TextArea messageText;\n-   int maxStringLength = 80;\n-\n-   \/\/DO NOT call this directly, go through Sysout\n-   public TestDialog( Frame frame, String name )\n-    {\n-      super( frame, name );\n-      int scrollBoth = TextArea.SCROLLBARS_BOTH;\n-      instructionsText = new TextArea( \"\", 15, maxStringLength, scrollBoth );\n-      add( \"North\", instructionsText );\n-\n-      messageText = new TextArea( \"\", 5, maxStringLength, scrollBoth );\n-      add(\"Center\", messageText);\n-\n-      pack();\n-\n-      show();\n-    }\/\/ TestDialog()\n-\n-   \/\/DO NOT call this directly, go through Sysout\n-   public void printInstructions( String[] instructions )\n-    {\n-      \/\/Clear out any current instructions\n-      instructionsText.setText( \"\" );\n-\n-      \/\/Go down array of instruction strings\n-\n-      String printStr, remainingStr;\n-      for( int i=0; i < instructions.length; i++ )\n-       {\n-         \/\/chop up each into pieces maxSringLength long\n-         remainingStr = instructions[ i ];\n-         while( remainingStr.length() > 0 )\n-          {\n-            \/\/if longer than max then chop off first max chars to print\n-            if( remainingStr.length() >= maxStringLength )\n-             {\n-               \/\/Try to chop on a word boundary\n-               int posOfSpace = remainingStr.\n-                  lastIndexOf( ' ', maxStringLength - 1 );\n-\n-               if( posOfSpace <= 0 ) posOfSpace = maxStringLength - 1;\n-\n-               printStr = remainingStr.substring( 0, posOfSpace + 1 );\n-               remainingStr = remainingStr.substring( posOfSpace + 1 );\n-             }\n-            \/\/else just print\n-            else\n-             {\n-               printStr = remainingStr;\n-               remainingStr = \"\";\n-             }\n-\n-            instructionsText.append( printStr + \"\\n\" );\n-\n-          }\/\/ while\n-\n-       }\/\/ for\n-\n-    }\/\/printInstructions()\n-\n-   \/\/DO NOT call this directly, go through Sysout\n-   public void displayMessage( String messageIn )\n-    {\n-      messageText.append( messageIn + \"\\n\" );\n+    private static void setDialogType(String type)\n+            throws InterruptedException, InvocationTargetException {\n+        SwingUtilities.invokeAndWait(() -> dialogType.setText(type));\n@@ -228,2 +130,1 @@\n-\n- }\/\/ TestDialog  class\n+}\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/SecurityDialogTest.java","additions":85,"deletions":184,"binary":false,"changes":269,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/SetCopies\/Test.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/SwingUIText.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/TestCheckSystemDefaultBannerOption.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/TestMediaTraySelection.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/TestPageDlgFrameAssociation.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/TestPrintDlgFrameAssociation.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/TexturePaintPrintingTest.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n-  @author prr\/rbi: area=PrinterJob\n+  @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/ThinLines.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+ * @key printer\n@@ -28,1 +29,0 @@\n- * @author prr\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/ValidatePage\/ValidatePage.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+ @ @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/XparColor.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n- * @author prr\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/raster\/RasterTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+ * @key printer\n","filename":"test\/jdk\/java\/awt\/print\/RemotePrinterStatusRefresh\/RemotePrinterStatusRefresh.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -29,1 +29,1 @@\n-  @author Anton Nashatyrev\n+  @key printer\n","filename":"test\/jdk\/java\/awt\/print\/bug8023392\/bug8023392.html","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n-  @author Anton Nashatyrev\n+  @key printer\n","filename":"test\/jdk\/java\/awt\/print\/bug8023392\/bug8023392.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -67,0 +67,1 @@\n+import javax.swing.JSplitPane;\n@@ -118,0 +119,7 @@\n+ * For simple test UI, use {@code Builder.splitUI}, or explicitly\n+ * {@code Builder.splitUIRight} or {@code Builder.splitUIBottom} with\n+ * a {@code PanelCreator}. The framework will call the provided\n+ * {@code createUIPanel} to create the component with test UI and\n+ * will place it as the right or bottom component in a split pane\n+ * along with instruction UI.\n+ * <p>\n@@ -170,0 +178,8 @@\n+    \/**\n+     * List of windows or frames managed by the {@code PassFailJFrame}\n+     * framework. These windows are automatically disposed of when the\n+     * test is finished.\n+     * <p>\n+     * <b>Note:<\/b> access to this field has to be synchronized by\n+     * {@code PassFailJFrame.class}.\n+     *\/\n@@ -280,4 +296,27 @@\n-    private PassFailJFrame(Builder builder) throws InterruptedException,\n-            InvocationTargetException {\n-        this(builder.title, builder.instructions, builder.testTimeOut,\n-             builder.rows, builder.columns, builder.screenCapture);\n+    \/**\n+     * Configures {@code PassFailJFrame} using the builder.\n+     * It creates test UI specified using {@code testUI} or {@code splitUI}\n+     * methods on EDT.\n+     * @param builder the builder with the parameters\n+     * @throws InterruptedException if the current thread is interrupted while\n+     *              waiting for EDT to complete a task\n+     * @throws InvocationTargetException if an exception is thrown while\n+     *              running a task on EDT\n+     *\/\n+    private PassFailJFrame(final Builder builder)\n+            throws InterruptedException, InvocationTargetException {\n+        invokeOnEDT(() -> createUI(builder));\n+\n+        if (!builder.splitUI && builder.panelCreator != null) {\n+            JComponent content = builder.panelCreator.createUIPanel();\n+            String title = content.getName();\n+            if (title == null) {\n+                title = \"Test UI\";\n+            }\n+            JDialog dialog = new JDialog(frame, title, false);\n+            dialog.addWindowListener(windowClosingHandler);\n+            dialog.add(content, BorderLayout.CENTER);\n+            dialog.pack();\n+            addTestWindow(dialog);\n+            positionTestWindow(dialog, builder.position);\n+        }\n@@ -303,5 +342,4 @@\n-                invokeOnEDT(() -> {\n-                    builder.positionWindows\n-                           .positionTestWindows(unmodifiableList(builder.testWindows),\n-                                                builder.instructionUIHandler);\n-                });\n+                invokeOnEDT(() ->\n+                        builder.positionWindows\n+                               .positionTestWindows(unmodifiableList(builder.testWindows),\n+                                                    builder.instructionUIHandler));\n@@ -345,0 +383,45 @@\n+        frame.addWindowListener(windowClosingHandler);\n+\n+        frame.add(createInstructionUIPanel(instructions,\n+                                           testTimeOut,\n+                                           rows, columns,\n+                                           enableScreenCapture),\n+                  BorderLayout.CENTER);\n+        frame.pack();\n+        frame.setLocationRelativeTo(null);\n+        addTestWindow(frame);\n+    }\n+\n+    private static void createUI(Builder builder) {\n+        frame = new JFrame(builder.title);\n+        frame.setLayout(new BorderLayout());\n+\n+        frame.addWindowListener(windowClosingHandler);\n+\n+        JComponent instructionUI =\n+                createInstructionUIPanel(builder.instructions,\n+                                         builder.testTimeOut,\n+                                         builder.rows, builder.columns,\n+                                         builder.screenCapture);\n+\n+        if (builder.splitUI) {\n+            JSplitPane splitPane = new JSplitPane(\n+                    builder.splitUIOrientation,\n+                    instructionUI,\n+                    builder.panelCreator.createUIPanel());\n+            frame.add(splitPane, BorderLayout.CENTER);\n+        } else {\n+            frame.add(instructionUI, BorderLayout.CENTER);\n+        }\n+\n+        frame.pack();\n+        frame.setLocationRelativeTo(null);\n+        addTestWindow(frame);\n+    }\n+\n+    private static JComponent createInstructionUIPanel(String instructions,\n+                                                       long testTimeOut,\n+                                                       int rows, int columns,\n+                                                       boolean enableScreenCapture) {\n+        JPanel main = new JPanel(new BorderLayout());\n+\n@@ -347,1 +430,1 @@\n-        frame.add(testTimeoutLabel, BorderLayout.NORTH);\n+        main.add(testTimeoutLabel, BorderLayout.NORTH);\n@@ -354,1 +437,1 @@\n-        frame.add(new JScrollPane(text), BorderLayout.CENTER);\n+        main.add(new JScrollPane(text), BorderLayout.CENTER);\n@@ -376,1 +459,2 @@\n-        frame.addWindowListener(windowClosingHandler);\n+        main.add(buttonsPanel, BorderLayout.SOUTH);\n+        main.setMinimumSize(main.getPreferredSize());\n@@ -378,4 +462,1 @@\n-        frame.add(buttonsPanel, BorderLayout.SOUTH);\n-        frame.pack();\n-        frame.setLocationRelativeTo(null);\n-        addTestWindow(frame);\n+        return main;\n@@ -437,0 +518,16 @@\n+    \/**\n+     * Creates a component (panel) with test UI\n+     * to be hosted in a split pane or a frame.\n+     *\/\n+    @FunctionalInterface\n+    public interface PanelCreator {\n+        \/**\n+         * Creates a component which hosts test UI. This component\n+         * is placed into a split pane or into a frame to display the UI.\n+         * <p>\n+         * This method is called by the framework on the EDT.\n+         * @return a component (panel) with test UI\n+         *\/\n+        JComponent createUIPanel();\n+    }\n+\n@@ -639,4 +736,6 @@\n-                windowList.stream()\n-                          .filter(Window::isShowing)\n-                          .map(Window::getBounds)\n-                          .forEach(PassFailJFrame::captureScreen);\n+                synchronized (PassFailJFrame.class) {\n+                    windowList.stream()\n+                              .filter(Window::isShowing)\n+                              .map(Window::getBounds)\n+                              .forEach(PassFailJFrame::captureScreen);\n+                }\n@@ -955,0 +1054,3 @@\n+        private PanelCreator panelCreator;\n+        private boolean splitUI;\n+        private int splitUIOrientation;\n@@ -1095,2 +1197,96 @@\n-        public Builder positionTestUI(PositionWindows positionWindows) {\n-            this.positionWindows = positionWindows;\n+        \/**\n+         * Adds a {@code PanelCreator} which the framework will use\n+         * to create a component and place it into a dialog.\n+         *\n+         * @param panelCreator a {@code PanelCreator} to create a component\n+         *                     with test UI\n+         * @return this builder\n+         * @throws IllegalStateException if split UI was enabled using\n+         *              a {@code splitUI} method\n+         *\/\n+        public Builder testUI(PanelCreator panelCreator) {\n+            if (splitUI) {\n+                throw new IllegalStateException(\"Can't combine splitUI and \"\n+                                                + \"testUI with panelCreator\");\n+            }\n+            this.panelCreator = panelCreator;\n+            return this;\n+        }\n+\n+        \/**\n+         * Adds a {@code PanelCreator} which the framework will use\n+         * to create a component with test UI and display it in a split pane.\n+         * <p>\n+         * By default, horizontal orientation is used,\n+         * and test UI is displayed to the right of the instruction UI.\n+         *\n+         * @param panelCreator a {@code PanelCreator} to create a component\n+         *                     with test UI\n+         * @return this builder\n+         *\n+         * @throws IllegalStateException if a {@code PanelCreator} is\n+         *              already set\n+         * @throws IllegalArgumentException if {panelCreator} is {@code null}\n+         *\/\n+        public Builder splitUI(PanelCreator panelCreator) {\n+            return splitUIRight(panelCreator);\n+        }\n+\n+        \/**\n+         * Adds a {@code PanelCreator} which the framework will use\n+         * to create a component with test UI and display it\n+         * to the right of instruction UI.\n+         *\n+         * @param panelCreator a {@code PanelCreator} to create a component\n+         *                     with test UI\n+         * @return this builder\n+         *\n+         * @throws IllegalStateException if a {@code PanelCreator} is\n+         *              already set\n+         * @throws IllegalArgumentException if {panelCreator} is {@code null}\n+         *\/\n+        public Builder splitUIRight(PanelCreator panelCreator) {\n+            return splitUI(panelCreator, JSplitPane.HORIZONTAL_SPLIT);\n+        }\n+\n+        \/**\n+         * Adds a {@code PanelCreator} which the framework will use\n+         * to create a component with test UI and display it\n+         * in the bottom of instruction UI.\n+         *\n+         * @param panelCreator a {@code PanelCreator} to create a component\n+         *                     with test UI\n+         * @return this builder\n+         *\n+         * @throws IllegalStateException if a {@code PanelCreator} is\n+         *              already set\n+         * @throws IllegalArgumentException if {panelCreator} is {@code null}\n+         *\/\n+        public Builder splitUIBottom(PanelCreator panelCreator) {\n+            return splitUI(panelCreator, JSplitPane.VERTICAL_SPLIT);\n+        }\n+\n+        \/**\n+         * Enables split UI and stores the orientation of the split pane.\n+         *\n+         * @param panelCreator a {@code PanelCreator} to create a component\n+         *                     with test UI\n+         * @param splitUIOrientation orientation of the split pane\n+         * @return this builder\n+         *\n+         * @throws IllegalStateException if a {@code PanelCreator} is\n+         *              already set\n+         * @throws IllegalArgumentException if {panelCreator} is {@code null}\n+         *\/\n+        private Builder splitUI(PanelCreator panelCreator,\n+                                int splitUIOrientation) {\n+            if (panelCreator == null) {\n+                throw new IllegalArgumentException(\"A PanelCreator cannot be null\");\n+            }\n+            if (this.panelCreator != null) {\n+                throw new IllegalStateException(\"A PanelCreator is already set\");\n+            }\n+\n+            splitUI = true;\n+            this.splitUIOrientation = splitUIOrientation;\n+            this.panelCreator = panelCreator;\n@@ -1134,1 +1330,2 @@\n-                && (testWindows != null || windowListCreator != null)) {\n+                && (testWindows != null || windowListCreator != null\n+                    || (!splitUI && panelCreator != null))) {\n@@ -1142,1 +1339,1 @@\n-                            + \"provide an a list of windows to the builder\");\n+                            + \"provide a list of windows to the builder\");\n@@ -1181,0 +1378,5 @@\n+    \/**\n+     * Creates a builder for configuring {@code PassFailJFrame}.\n+     *\n+     * @return the builder for configuring {@code PassFailJFrame}\n+     *\/\n","filename":"test\/jdk\/java\/awt\/regtesthelpers\/PassFailJFrame.java","additions":227,"deletions":25,"binary":false,"changes":252,"status":"modified"},{"patch":"@@ -2,2 +2,2 @@\n- *  Copyright (c) 2020, 2023, Oracle and\/or its affiliates. All rights reserved.\n- *  DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ * Copyright (c) 2020, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n@@ -27,0 +27,1 @@\n+ * @bug 8323552\n@@ -48,1 +49,1 @@\n-    \/\/ stores a increasing sequence of values into the memory of the given segment\n+    \/\/ stores an increasing sequence of values into the memory of the given segment\n@@ -282,0 +283,26 @@\n+    @Test\n+    public void testSameSegment() {\n+        var segment = MemorySegment.ofArray(new byte[]{\n+                1,2,3,4,  1,2,3,4,  1,4});\n+\n+        long match = MemorySegment.mismatch(\n+                segment, 0L, 4L,\n+                segment, 4L, 8L);\n+        assertEquals(match, -1);\n+\n+        long noMatch = MemorySegment.mismatch(\n+                segment, 0L, 4L,\n+                segment, 1L, 5L);\n+        assertEquals(noMatch, 0);\n+\n+        long noMatchEnd = MemorySegment.mismatch(\n+                segment, 0L, 2L,\n+                segment, 8L, 10L);\n+        assertEquals(noMatchEnd, 1);\n+\n+        long same = MemorySegment.mismatch(\n+                segment, 0L, 8L,\n+                segment, 0L, 8L);\n+        assertEquals(same, -1);\n+    }\n+\n","filename":"test\/jdk\/java\/foreign\/TestMismatch.java","additions":30,"deletions":3,"binary":false,"changes":33,"status":"modified"},{"patch":"@@ -0,0 +1,131 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8330748\n+ * @summary Test ByteArrayOutputStream.writeTo releases carrier thread\n+ * @requires vm.continuations\n+ * @modules java.base\/java.lang:+open\n+ * @run main WriteToReleasesCarrier\n+ *\/\n+\n+import java.io.ByteArrayOutputStream;\n+import java.io.IOException;\n+import java.io.OutputStream;\n+import java.nio.charset.StandardCharsets;\n+import java.lang.reflect.Constructor;\n+import java.util.Arrays;\n+import java.util.concurrent.CountDownLatch;\n+import java.util.concurrent.ExecutorService;\n+import java.util.concurrent.Executor;\n+import java.util.concurrent.Executors;\n+import java.util.concurrent.atomic.AtomicBoolean;\n+import java.util.concurrent.locks.LockSupport;\n+\n+public class WriteToReleasesCarrier {\n+    public static void main(String[] args) throws Exception {\n+        byte[] bytes = \"Hello\".getBytes(StandardCharsets.UTF_8);\n+\n+        var baos = new ByteArrayOutputStream();\n+        baos.write(bytes);\n+\n+        var target = new ParkingOutputStream();\n+\n+        try (ExecutorService scheduler = Executors.newFixedThreadPool(1)) {\n+            Thread.Builder builder = virtualThreadBuilder(scheduler);\n+            var started = new CountDownLatch(1);\n+            var vthread1 = builder.start(() -> {\n+                started.countDown();\n+                try {\n+                    baos.writeTo(target);\n+                } catch (IOException ioe) { }\n+            });\n+            try {\n+                started.await();\n+                await(vthread1, Thread.State.WAITING);\n+\n+                \/\/ carrier should be released, use it for another thread\n+                var executed = new AtomicBoolean();\n+                var vthread2 = builder.start(() -> {\n+                    executed.set(true);\n+                });\n+                vthread2.join();\n+                if (!executed.get()) {\n+                    throw new RuntimeException(\"Second virtual thread did not run\");\n+                }\n+            } finally {\n+                LockSupport.unpark(vthread1);\n+                vthread1.join();\n+            }\n+        }\n+\n+        if (!Arrays.equals(target.toByteArray(), bytes)) {\n+            throw new RuntimeException(\"Expected bytes not written\");\n+        }\n+    }\n+\n+    \/**\n+     * Waits for a thread to get to the expected state.\n+     *\/\n+    private static void await(Thread thread, Thread.State expectedState) throws Exception {\n+        Thread.State state = thread.getState();\n+        while (state != expectedState) {\n+            Thread.sleep(10);\n+            state = thread.getState();\n+        }\n+    }\n+\n+    \/**\n+     * An OutputStream that parks when writing.\n+     *\/\n+    static class ParkingOutputStream extends OutputStream {\n+        final ByteArrayOutputStream baos = new ByteArrayOutputStream();\n+\n+        @Override\n+        public void write(int i) {\n+            LockSupport.park();\n+            baos.write(i);\n+        }\n+\n+        @Override\n+        public void write(byte[] b, int off, int len) {\n+            LockSupport.park();\n+            baos.write(b, off, len);\n+        }\n+\n+        byte[] toByteArray() {\n+            return baos.toByteArray();\n+        }\n+    }\n+\n+    \/**\n+     * Returns a builder to create virtual threads that use the given scheduler.\n+     *\/\n+    static Thread.Builder.OfVirtual virtualThreadBuilder(Executor scheduler) throws Exception {\n+        Class<?> clazz = Class.forName(\"java.lang.ThreadBuilders$VirtualThreadBuilder\");\n+        Constructor<?> ctor = clazz.getDeclaredConstructor(Executor.class);\n+        ctor.setAccessible(true);\n+        return (Thread.Builder.OfVirtual) ctor.newInstance(scheduler);\n+    }\n+}\n","filename":"test\/jdk\/java\/io\/ByteArrayOutputStream\/WriteToReleasesCarrier.java","additions":131,"deletions":0,"binary":false,"changes":131,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,0 +31,1 @@\n+import java.util.concurrent.CountDownLatch;\n@@ -54,1 +55,1 @@\n-    Object barrier;\n+    final CountDownLatch lookupLatch;\n@@ -57,1 +58,1 @@\n-    SuccessfulLookup(Class<?> cl, long suid, Object barrier) {\n+    SuccessfulLookup(Class<?> cl, long suid, CountDownLatch lookupLatch) {\n@@ -60,1 +61,1 @@\n-        this.barrier = barrier;\n+        this.lookupLatch = lookupLatch;\n@@ -64,3 +65,4 @@\n-        synchronized (barrier) {\n-            try { barrier.wait(); } catch (InterruptedException ex) {}\n-        }\n+        lookupLatch.countDown(); \/\/ let others know we are ready\n+        try {\n+            lookupLatch.await(); \/\/ await for others\n+        } catch (InterruptedException ex) {}\n@@ -78,1 +80,1 @@\n-    final Object barrier;\n+    final CountDownLatch lookupLatch;\n@@ -81,1 +83,1 @@\n-    FailingLookup(Class<?> cl, Object barrier) {\n+    FailingLookup(Class<?> cl, CountDownLatch lookupLatch) {\n@@ -83,1 +85,1 @@\n-        this.barrier = barrier;\n+        this.lookupLatch = lookupLatch;\n@@ -87,3 +89,4 @@\n-        synchronized (barrier) {\n-            try { barrier.wait(); } catch (InterruptedException ex) {}\n-        }\n+        lookupLatch.countDown(); \/\/ let others know we are ready\n+        try {\n+            lookupLatch.await(); \/\/ await for others\n+        } catch (InterruptedException ex) {}\n@@ -105,2 +108,3 @@\n-        Object barrier = new Object();\n-        SuccessfulLookup[] slookups = new SuccessfulLookup[50];\n+        int numSuccessfulLookups = 50;\n+        CountDownLatch sLookupLatch = new CountDownLatch(numSuccessfulLookups);\n+        SuccessfulLookup[] slookups = new SuccessfulLookup[numSuccessfulLookups];\n@@ -108,2 +112,1 @@\n-            slookups[i] =\n-                new SuccessfulLookup(cl, 6319710844400051132L, barrier);\n+            slookups[i] = new SuccessfulLookup(cl, 6319710844400051132L, sLookupLatch);\n@@ -112,4 +115,1 @@\n-        Thread.sleep(1000);\n-        synchronized (barrier) {\n-            barrier.notifyAll();\n-        }\n+        System.out.println(\"awaiting completion of \" + slookups.length + \" SuccessfulLookup\");\n@@ -122,1 +122,1 @@\n-\n+        System.out.println(\"all \" + slookups.length + \" SuccessfulLookup completed\");\n@@ -124,1 +124,3 @@\n-        FailingLookup[] flookups = new FailingLookup[50];\n+        int numFailingLookups = 50;\n+        CountDownLatch fLookupLatch = new CountDownLatch(numFailingLookups);\n+        FailingLookup[] flookups = new FailingLookup[numFailingLookups];\n@@ -126,1 +128,1 @@\n-            flookups[i] = new FailingLookup(cl, barrier);\n+            flookups[i] = new FailingLookup(cl, fLookupLatch);\n@@ -129,5 +131,2 @@\n-        Thread.sleep(1000);\n-        synchronized (barrier) {\n-            barrier.notifyAll();\n-        }\n-        for (int i = 0; i < slookups.length; i++) {\n+        System.out.println(\"awaiting completion of \" + flookups.length + \" FailingLookup\");\n+        for (int i = 0; i < flookups.length; i++) {\n@@ -139,0 +138,1 @@\n+        System.out.println(\"all \" + flookups.length + \" FailingLookup completed\");\n","filename":"test\/jdk\/java\/io\/Serializable\/concurrentClassDescLookup\/ConcurrentClassDescLookup.java","additions":29,"deletions":29,"binary":false,"changes":58,"status":"modified"},{"patch":"@@ -35,0 +35,1 @@\n+import java.util.concurrent.CountDownLatch;\n@@ -149,0 +150,2 @@\n+\n+            var ready = new CountDownLatch(1);\n@@ -150,0 +153,1 @@\n+                ready.countDown();\n@@ -155,0 +159,1 @@\n+\n@@ -156,2 +161,2 @@\n-                \/\/ give thread time to be scheduled\n-                Thread.sleep(100);\n+                \/\/ wait for thread to run\n+                ready.await();\n@@ -324,0 +329,2 @@\n+\n+            var ready = new CountDownLatch(1);\n@@ -325,0 +332,1 @@\n+                ready.countDown();\n@@ -331,1 +339,3 @@\n-            Thread.sleep(100); \/\/ give thread time to be scheduled\n+            try {\n+                \/\/ wait for thread to run\n+                ready.await();\n@@ -333,2 +343,7 @@\n-            \/\/ unpark with another virtual thread, runs on same carrier thread\n-            factory.newThread(() -> LockSupport.unpark(vthread)).start();\n+                \/\/ unpark with another virtual thread, runs on same carrier thread\n+                Thread unparker = factory.newThread(() -> LockSupport.unpark(vthread));\n+                unparker.start();\n+                unparker.join();\n+            } finally {\n+                LockSupport.unpark(vthread);  \/\/ in case test fails\n+            }\n","filename":"test\/jdk\/java\/lang\/Thread\/virtual\/Reflection.java","additions":20,"deletions":5,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -66,0 +66,1 @@\n+        \/\/ retains only network interface whose bound addresses match\n@@ -67,2 +68,17 @@\n-                                      .map(nif -> new Object[] { new InetSocketAddress(a, 0), nif })\n-                                      .forEach(list::add) );\n+                .filter(nif -> nif.inetAddresses().toList().contains(a))\n+                .map(nif -> new Object[] { new InetSocketAddress(a, 0), nif })\n+                .forEach(list::add) );\n+        \/\/ any network interface should work with the wildcard address\n+        nc.multicastInterfaces(true)\n+                .map(nif -> new Object[] {new InetSocketAddress(0), nif})\n+                .forEach(list::add);\n+        return list.stream().toArray(Object[][]::new);\n+    }\n+\n+    @DataProvider(name = \"interfaces\")\n+    public Object[][] interfaces() throws Exception {\n+        List<Object[]> list = new ArrayList<>();\n+        NetworkConfiguration nc = NetworkConfiguration.probe();\n+        nc.multicastInterfaces(true)\n+                .map(nif -> new Object[] {nif})\n+                .forEach(list::add);\n@@ -85,2 +101,2 @@\n-    @Test(dataProvider = \"scenarios\")\n-    public void testSetGetInterfaceUnbound(InetSocketAddress ignore, NetworkInterface nif)\n+    @Test(dataProvider = \"interfaces\")\n+    public void testSetGetInterfaceUnbound(NetworkInterface nif)\n@@ -109,2 +125,2 @@\n-    @Test(dataProvider = \"scenarios\")\n-    public void testSetGetOptionUnbound(InetSocketAddress ignore, NetworkInterface nif)\n+    @Test(dataProvider = \"interfaces\")\n+    public void testSetGetOptionUnbound(NetworkInterface nif)\n@@ -142,2 +158,2 @@\n-    public void testGettInterfaceUnbound() throws Exception {\n-        out.println(\"\\n\\n--- testGettInterfaceUnbound \");\n+    public void testGetInterfaceUnbound() throws Exception {\n+        out.println(\"\\n\\n--- testGetInterfaceUnbound \");\n","filename":"test\/jdk\/java\/net\/MulticastSocket\/IPMulticastIF.java","additions":25,"deletions":9,"binary":false,"changes":34,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2020, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2020, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -208,1 +208,1 @@\n-        for (var client : List.of(authClient, noAuthClient)) {\n+        for (boolean useAuth : List.of(true, false)) {\n@@ -215,1 +215,1 @@\n-                            if (client == authClient) continue;\n+                            if (useAuth) continue;\n@@ -219,1 +219,1 @@\n-                            result.add(new Object[]{uri + srv + auth, pcode, async, client});\n+                            result.add(new Object[]{uri + srv + auth, pcode, async, useAuth});\n@@ -240,1 +240,1 @@\n-    void test(String uriString, int code, boolean async, HttpClient client) throws Throwable {\n+    void test(String uriString, int code, boolean async, boolean useAuth) throws Throwable {\n@@ -242,0 +242,1 @@\n+        HttpClient client = useAuth ? authClient : noAuthClient;\n@@ -245,1 +246,1 @@\n-        assert client.authenticator().isPresent() ? client == authClient : client == noAuthClient;\n+        assert client.authenticator().isPresent() == useAuth;\n@@ -383,8 +384,11 @@\n-        AssertionError fail = TRACKER.check(500);\n-\n-        proxy.stop();\n-        authproxy.stop();\n-        httpTestServer.stop();\n-        httpsTestServer.stop();\n-        http2TestServer.stop();\n-        https2TestServer.stop();\n+        AssertionError fail = TRACKER.check(1500);\n+        try {\n+            proxy.stop();\n+            authproxy.stop();\n+            httpTestServer.stop();\n+            httpsTestServer.stop();\n+            http2TestServer.stop();\n+            https2TestServer.stop();\n+        } finally {\n+            if (fail != null) throw fail;\n+        }\n","filename":"test\/jdk\/java\/net\/httpclient\/ForbiddenHeadTest.java","additions":18,"deletions":14,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2020, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2020, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -380,9 +380,12 @@\n-\n-        proxy.stop();\n-        authproxy.stop();\n-        httpTestServer.stop();\n-        proxyHttpTestServer.stop();\n-        authProxyHttpTestServer.stop();\n-        httpsTestServer.stop();\n-        http2TestServer.stop();\n-        https2TestServer.stop();\n+        try {\n+            proxy.stop();\n+            authproxy.stop();\n+            httpTestServer.stop();\n+            proxyHttpTestServer.stop();\n+            authProxyHttpTestServer.stop();\n+            httpsTestServer.stop();\n+            http2TestServer.stop();\n+            https2TestServer.stop();\n+        } finally {\n+            if (fail != null) throw fail;\n+        }\n","filename":"test\/jdk\/java\/net\/httpclient\/ProxySelectorTest.java","additions":13,"deletions":10,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -88,0 +88,1 @@\n+            InetAddress loopback = InetAddress.getLoopbackAddress();\n@@ -90,1 +91,1 @@\n-            serv.bind(new InetSocketAddress(InetAddress.getLoopbackAddress(), 0));\n+            serv.bind(new InetSocketAddress(loopback, 0));\n@@ -97,1 +98,1 @@\n-            clientSock = new Socket(\"localhost\", serverPort);\n+            clientSock = new Socket(loopback, serverPort);\n@@ -110,0 +111,1 @@\n+            System.out.println(\"Starting: server listening at: \" + serverSock.getLocalSocketAddress());\n@@ -147,0 +149,1 @@\n+                System.out.println(\"clientReader got exception: \" + e);\n@@ -179,0 +182,1 @@\n+                System.out.println(\"clientWriter got exception: \" + e);\n@@ -215,0 +219,1 @@\n+                        System.out.println(\"serverLoopback exiting normally\");\n@@ -222,0 +227,1 @@\n+                System.out.println(\"serverLoopback got exception: \" + e);\n@@ -223,0 +229,2 @@\n+            } finally {\n+                System.out.println(\"serverLoopback exiting at count: \" + loopCount.get());\n","filename":"test\/jdk\/java\/net\/httpclient\/whitebox\/java.net.http\/jdk\/internal\/net\/http\/SSLTubeTest.java","additions":11,"deletions":3,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -132,0 +132,1 @@\n+        fifoFile.deleteOnExit();\n","filename":"test\/jdk\/java\/nio\/channels\/AsyncCloseAndInterrupt.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -121,1 +121,2 @@\n-            ByteBuffer src = ByteBuffer.wrap(\"hello\".getBytes(\"UTF-8\"));\n+            String str = \"hello \" + System.nanoTime();\n+            ByteBuffer src = ByteBuffer.wrap(str.getBytes(\"UTF-8\"));\n@@ -145,0 +146,1 @@\n+            src.flip();\n@@ -160,0 +162,5 @@\n+                        if (src.mismatch(dst) != -1) {\n+                            System.out.println(\"src: \" + src + \"not equal to dst: \" + dst);\n+                            dst.clear();\n+                            continue;\n+                        }\n@@ -163,1 +170,2 @@\n-                            assertTrue(senderPort != localPort, \"Unexpected message\");\n+                            assertTrue(senderPort != localPort,\n+                                    \"Unexpected message: localPort=\" + localPort);\n","filename":"test\/jdk\/java\/nio\/channels\/DatagramChannel\/Loopback.java","additions":11,"deletions":3,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,2 +29,5 @@\n-import java.io.*;\n-import java.net.*;\n+import java.io.IOException;\n+import java.net.InetSocketAddress;\n+import java.net.ServerSocket;\n+import java.net.Socket;\n+import java.net.StandardSocketOptions;\n@@ -33,0 +36,1 @@\n+import java.util.concurrent.CountDownLatch;\n@@ -39,2 +43,2 @@\n-        try {\n-            serverSocketThread = new ServerSocketThread();\n+        serverSocketThread = initServerSocketThread();\n+        if (serverSocketThread != null) {\n@@ -42,0 +46,1 @@\n+        }\n@@ -43,1 +48,2 @@\n-            udpThread = new UDPThread();\n+        udpThread = initUDPThread();\n+        if (udpThread != null) {\n@@ -45,0 +51,7 @@\n+        }\n+    }\n+\n+    private UDPThread initUDPThread() {\n+        UDPThread aUDPThread = null;\n+        try {\n+            aUDPThread = new UDPThread();\n@@ -46,0 +59,1 @@\n+            System.err.println(\"failed to create and start a UDPThread\");\n@@ -48,0 +62,1 @@\n+        return aUDPThread;\n@@ -50,2 +65,2 @@\n-    public static void main(String[] args) throws Throwable {\n-        StressNativeSignal test = new StressNativeSignal();\n+    private ServerSocketThread initServerSocketThread() {\n+        ServerSocketThread aServerSocketThread = null;\n@@ -53,1 +68,2 @@\n-            Thread.sleep(3000);\n+            aServerSocketThread = new ServerSocketThread();\n+\n@@ -55,1 +71,2 @@\n-            z.printStackTrace(System.err);\n+            System.err.println(\"failed to create and start a ServerSocketThread\");\n+            z.printStackTrace();\n@@ -57,0 +74,2 @@\n+        return aServerSocketThread;\n+    }\n@@ -58,0 +77,3 @@\n+    public static void main(String[] args) throws Throwable {\n+        StressNativeSignal test = new StressNativeSignal();\n+        test.waitForTestThreadsToStart();\n@@ -62,5 +84,9 @@\n-        udpThread.terminate();\n-        try {\n-            udpThread.join();\n-        } catch (Exception z) {\n-            z.printStackTrace(System.err);\n+        if ((udpThread != null) && udpThread.isAlive()) {\n+            udpThread.terminate();\n+            try {\n+                udpThread.join();\n+            } catch (Exception z) {\n+                z.printStackTrace(System.err);\n+            }\n+        } else {\n+            System.out.println(\"UDPThread test scenario was not run\");\n@@ -69,5 +95,18 @@\n-        serverSocketThread.terminate();\n-        try {\n-            serverSocketThread.join();\n-        } catch (Exception z) {\n-            z.printStackTrace(System.err);\n+        if ((serverSocketThread != null) && (serverSocketThread.isAlive())) {\n+            serverSocketThread.terminate();\n+            try {\n+                serverSocketThread.join();\n+            } catch (Exception z) {\n+                z.printStackTrace(System.err);\n+            }\n+        } else {\n+            System.out.println(\"ServerSocketThread test scenario was not run\");\n+        }\n+    }\n+\n+    public void waitForTestThreadsToStart() {\n+        if ((udpThread != null) && udpThread.isAlive()) {\n+            udpThread.waitTestThreadStart();\n+        }\n+        if ((serverSocketThread != null) && (serverSocketThread.isAlive())) {\n+            serverSocketThread.waitTestThreadStart();\n@@ -80,0 +119,5 @@\n+        private final CountDownLatch threadStarted = new CountDownLatch(1);\n+\n+        public ServerSocketThread () throws Exception {\n+            socket = new ServerSocket(1122);\n+        }\n@@ -82,0 +126,1 @@\n+\n@@ -83,1 +128,1 @@\n-                socket = new ServerSocket(1122);\n+                threadStarted.countDown();\n@@ -85,5 +130,2 @@\n-                BufferedReader reader = new BufferedReader(new InputStreamReader(client.getInputStream()));\n-                shouldTerminate = false;\n-                while (!shouldTerminate) {\n-                    String msg = reader.readLine();\n-                }\n+                client.close();\n+                throw new RuntimeException(\"Unexpected return from accept call\");\n@@ -91,0 +133,1 @@\n+                System.err.println(\"ServerSocketThread: caught exception \" + z.getClass().getName());\n@@ -106,0 +149,9 @@\n+\n+        public void waitTestThreadStart() {\n+            try {\n+                threadStarted.await();\n+            } catch (Exception z) {\n+                z.printStackTrace(System.err);\n+                \/\/ ignore\n+            }\n+        }\n@@ -111,0 +163,8 @@\n+        private final CountDownLatch threadStarted = new CountDownLatch(1);\n+\n+        public UDPThread () throws Exception {\n+\n+            channel = DatagramChannel.open();\n+            channel.setOption(StandardSocketOptions.SO_RCVBUF, 6553600);\n+            channel.bind(new InetSocketAddress(19870));\n+        }\n@@ -114,7 +174,0 @@\n-            try {\n-                channel = DatagramChannel.open();\n-                channel.setOption(StandardSocketOptions.SO_RCVBUF, 6553600);\n-                channel.bind(new InetSocketAddress(19870));\n-            } catch (IOException z) {\n-                z.printStackTrace(System.err);\n-            }\n@@ -123,2 +176,2 @@\n-            shouldTerminate = false;\n-            while (!shouldTerminate) {\n+            threadStarted.countDown();\n+            do {\n@@ -129,0 +182,1 @@\n+                    System.err.println(\"UDPThread: caught exception \" + z.getClass().getName());\n@@ -133,1 +187,1 @@\n-            }\n+            } while (!shouldTerminate);\n@@ -140,0 +194,10 @@\n+            } catch (Exception z) {\n+                System.err.println(\"UDPThread: caught exception \" + z.getClass().getName());\n+                z.printStackTrace(System.err);\n+                \/\/ ignore\n+            }\n+        }\n+\n+        public void waitTestThreadStart() {\n+            try {\n+                threadStarted.await();\n","filename":"test\/jdk\/java\/nio\/channels\/DatagramChannel\/StressNativeSignal.java","additions":100,"deletions":36,"binary":false,"changes":136,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,2 +27,2 @@\n- * @summary Block devices should not report size=0 on Linux\n- * @run main\/manual BlockDeviceSize\n+ * @summary FileChannel.size() should be equal to RandomAccessFile.size() and > 0 for block devs on Linux\n+ * @library \/test\/lib\n@@ -33,1 +33,0 @@\n-import java.nio.file.Paths;\n@@ -37,0 +36,2 @@\n+import java.util.List;\n+\n@@ -39,0 +40,1 @@\n+import jtreg.SkippedException;\n@@ -41,2 +43,1 @@\n-    private static final String BLK_FNAME = \"\/dev\/sda1\";\n-    private static final Path BLK_PATH = Paths.get(BLK_FNAME);\n+    private static final List<String> BLK_FNAMES = List.of(\"\/dev\/sda1\", \"\/dev\/nvme0n1\", \"\/dev\/xvda1\") ;\n@@ -45,2 +46,15 @@\n-        try (FileChannel ch = FileChannel.open(BLK_PATH, READ);\n-             RandomAccessFile file = new RandomAccessFile(BLK_FNAME, \"r\")) {\n+        for (String blkFname: BLK_FNAMES) {\n+            Path blkPath = Path.of(blkFname);\n+            try (FileChannel ch = FileChannel.open(blkPath, READ);\n+                 RandomAccessFile file = new RandomAccessFile(blkFname, \"r\")) {\n+\n+                long size1 = ch.size();\n+                long size2 = file.length();\n+                if (size1 != size2) {\n+                    throw new RuntimeException(\"size differs when retrieved\" +\n+                            \" in different ways: \" + size1 + \" != \" + size2);\n+                }\n+                if (size1 <= 0) {\n+                    throw new RuntimeException(\"size() for a block device size returns zero or a negative value\");\n+                }\n+                System.out.println(\"OK\");\n@@ -48,5 +62,6 @@\n-            long size1 = ch.size();\n-            long size2 = file.length();\n-            if (size1 != size2) {\n-                throw new RuntimeException(\"size differs when retrieved\" +\n-                        \" in different ways: \" + size1 + \" != \" + size2);\n+            } catch (NoSuchFileException nsfe) {\n+                System.err.println(\"File \" + blkFname + \" not found.\" +\n+                        \" Skipping test\");\n+            } catch (AccessDeniedException ade) {\n+                throw new SkippedException(\"Access to \" + blkFname + \" is denied.\"\n+                        + \" Run test as root.\", ade);\n@@ -54,1 +69,0 @@\n-            System.out.println(\"OK\");\n@@ -56,6 +70,0 @@\n-        } catch (NoSuchFileException nsfe) {\n-            System.err.println(\"File \" + BLK_FNAME + \" not found.\" +\n-                    \" Skipping test\");\n-        } catch (AccessDeniedException ade) {\n-            throw new RuntimeException(\"Access to \" + BLK_FNAME + \" is denied.\"\n-                    + \" Run test as root.\", ade);\n","filename":"test\/jdk\/java\/nio\/channels\/FileChannel\/BlockDeviceSize.java","additions":28,"deletions":20,"binary":false,"changes":48,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -25,1 +25,1 @@\n- * @bug 4434723 4482726 4559072 4795550 5081340 5103988 6984545\n+ * @bug 4434723 4482726 4559072 4795550 5081340 5103988 6984545 8325382\n@@ -51,0 +51,1 @@\n+import java.nio.file.Files;\n@@ -56,0 +57,1 @@\n+import org.testng.Assert;\n@@ -161,0 +163,27 @@\n+    @Test\n+    public void transferToNoThrow() throws IOException { \/\/ for bug 8325382\n+        File source = File.createTempFile(\"before\", \"after\");\n+        source.deleteOnExit();\n+\n+        CharSequence csq = \"Reality is greater than the sum of its parts.\";\n+        Files.writeString(source.toPath(), csq);\n+        final long length = csq.length();\n+        Assert.assertEquals(source.length(), length);\n+\n+        File target = File.createTempFile(\"before\", \"after\");\n+        target.deleteOnExit();\n+\n+        try (FileInputStream in = new FileInputStream(source);\n+             FileOutputStream out = new FileOutputStream(target);\n+             FileChannel chSource = in.getChannel();\n+             FileChannel chTarget = out.getChannel()) {\n+            \/\/ The count of bytes requested to transfer must exceed\n+            \/\/ FileChannelImpl.MAPPED_TRANSFER_THRESHOLD which is\n+            \/\/ currently 16384\n+            long n = chSource.transferTo(length, 16385, chTarget);\n+\n+            \/\/ At the end of the input so no bytes should be transferred\n+            Assert.assertEquals(n, 0);\n+        }\n+    }\n+\n","filename":"test\/jdk\/java\/nio\/channels\/FileChannel\/Transfer.java","additions":31,"deletions":2,"binary":false,"changes":33,"status":"modified"},{"patch":"@@ -0,0 +1,91 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test id=platform\n+ * @bug 8323782\n+ * @summary Stress test Thread.interrupt on a target Thread doing a selection operation\n+ * @run main LotsOfInterrupts 200000\n+ *\/\n+\n+\/*\n+ * @test id=virtual\n+ * @run main\/othervm -DthreadFactory=virtual LotsOfInterrupts 200000\n+ *\/\n+\n+import java.nio.channels.Selector;\n+import java.time.Instant;\n+import java.util.concurrent.Phaser;\n+import java.util.concurrent.ThreadFactory;\n+\n+public class LotsOfInterrupts {\n+\n+    public static void main(String[] args) throws Exception {\n+        int iterations;\n+        if (args.length > 0) {\n+            iterations = Integer.parseInt(args[0]);\n+        } else {\n+            iterations = 500_000;\n+        }\n+\n+        ThreadFactory factory;\n+        String value = System.getProperty(\"threadFactory\");\n+        if (\"virtual\".equals(value)) {\n+            factory = Thread.ofVirtual().factory();\n+        } else {\n+            factory = Thread.ofPlatform().factory();\n+        }\n+\n+        var phaser = new Phaser(2);\n+\n+        Thread thread = factory.newThread(() -> {\n+            try (Selector sel = Selector.open()) {\n+                for (int i = 0; i < iterations; i++) {\n+                    phaser.arriveAndAwaitAdvance();\n+                    sel.select();\n+\n+                    \/\/ clear interrupt status and consume wakeup\n+                    Thread.interrupted();\n+                    sel.selectNow();\n+                }\n+            } catch (Throwable ex) {\n+                ex.printStackTrace();\n+            }\n+        });\n+        thread.start();\n+\n+        long lastTimestamp = System.currentTimeMillis();\n+        for (int i = 0; i < iterations; i++) {\n+            phaser.arriveAndAwaitAdvance();\n+            thread.interrupt();\n+\n+            long currentTime = System.currentTimeMillis();\n+            if ((currentTime - lastTimestamp) > 500) {\n+                System.out.format(\"%s %d iterations remaining ...%n\", Instant.now(), (iterations - i));\n+                lastTimestamp = currentTime;\n+            }\n+        }\n+\n+        thread.join();\n+    }\n+}\n","filename":"test\/jdk\/java\/nio\/channels\/Selector\/LotsOfInterrupts.java","additions":91,"deletions":0,"binary":false,"changes":91,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2010, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,0 +28,1 @@\n+ * @requires vm.flagless\n@@ -29,1 +30,1 @@\n- * @run main\/othervm -Djava.security.manager=allow OpenLeak\n+ * @run junit\/othervm OpenLeak\n@@ -32,0 +33,2 @@\n+import java.io.IOException;\n+import java.net.ConnectException;\n@@ -34,0 +37,1 @@\n+import java.net.SocketAddress;\n@@ -35,0 +39,10 @@\n+import java.nio.channels.UnresolvedAddressException;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Locale;\n+\n+import org.junit.jupiter.params.ParameterizedTest;\n+import org.junit.jupiter.params.provider.MethodSource;\n+\n+import static org.junit.jupiter.api.Assertions.assertThrows;\n+\n@@ -38,3 +52,9 @@\n-    public static void main(String[] args) throws Exception {\n-        InetAddress lh = InetAddress.getLocalHost();\n-        InetSocketAddress isa = new InetSocketAddress(lh, 12345);\n+    static final String OS_NAME = System.getProperty(\"os.name\").toLowerCase(Locale.ROOT);\n+    static final boolean IS_WINDOWS_2016 = OS_NAME.contains(\"windows\") && OS_NAME.contains(\"2016\");\n+\n+    \/\/ On Windows Server 2016 trying to connect to port 47 consumes the\n+    \/\/ whole connect timeout - which makes the test fail in timeout.\n+    \/\/ We skip this part of the test on Windows Server 2016\n+    static final boolean TEST_WITH_RESERVED_PORT = !IS_WINDOWS_2016;\n+\n+    private static final int MAX_LOOP = 250000;\n@@ -42,6 +62,22 @@\n-        System.setSecurityManager( new SecurityManager() );\n-        for (int i=0; i<100000; i++) {\n-            try {\n-                SocketChannel.open(isa);\n-                throw new RuntimeException(\"This should not happen\");\n-            } catch (SecurityException x) { }\n+\n+    \/\/ Try to find a suitable port to provoke a \"Connection Refused\"\n+    \/\/ error.\n+    private static InetSocketAddress findSuitableRefusedAddress(InetSocketAddress isa)\n+            throws IOException {\n+        if (!TEST_WITH_RESERVED_PORT) return null;\n+        var addr = isa.getAddress();\n+        try (SocketChannel sc1 = SocketChannel.open(isa)) {\n+            \/\/ If we manage to connect, let's try to use some other\n+            \/\/ port.\n+            \/\/ port 51 is reserved too - there should be nothing there...\n+            isa = new InetSocketAddress(addr, 51);\n+            try (SocketChannel sc2 = SocketChannel.open(isa)) {\n+            }\n+            \/\/ OK, last attempt...\n+            \/\/ port 61 is reserved too - there should be nothing there...\n+            isa = new InetSocketAddress(addr, 61);\n+            try (SocketChannel sc3 = SocketChannel.open(isa)) {\n+            }\n+            System.err.println(\"Could not find a suitable port\");\n+            return null;\n+        } catch (ConnectException x) {\n@@ -49,0 +85,7 @@\n+        return isa;\n+    }\n+\n+    private static InetSocketAddress createUnresolved(InetSocketAddress isa, InetSocketAddress def) {\n+       var sa = isa == null ? def : isa;\n+       return InetSocketAddress.createUnresolved(sa.getHostString(), sa.getPort());\n+    }\n@@ -50,0 +93,39 @@\n+\n+    \/\/ Builds a list of test cases\n+    static List<Object[]> testCases() throws Exception {\n+        InetAddress lo = InetAddress.getLoopbackAddress();\n+\n+        \/\/ Try to find a suitable port that will cause a\n+        \/\/ Connection Refused exception\n+        \/\/ port 47 is reserved - there should be nothing there...\n+        InetSocketAddress def = new InetSocketAddress(lo, 47);\n+        InetSocketAddress isa = findSuitableRefusedAddress(def);\n+        InetSocketAddress sa  = createUnresolved(isa, def);\n+\n+        final List<Object[]> cases = new ArrayList<>();\n+        cases.add(new Object[]{sa, UnresolvedAddressException.class});\n+        if (isa != null) {\n+            cases.add(new Object[]{isa, ConnectException.class});\n+        }\n+        return cases;\n+    }\n+\n+    @ParameterizedTest\n+    @MethodSource(\"testCases\")\n+    public void test(SocketAddress sa, Class<? extends Throwable> expectedException) throws Exception {\n+        System.err.printf(\"%nExpecting %s for %s%n\", expectedException, sa);\n+\n+        int i = 0;\n+        try {\n+            for (i = 0; i < MAX_LOOP; i++) {\n+                Throwable x =\n+                        assertThrows(expectedException, () -> SocketChannel.open(sa));\n+                if (i < 5 || i >= MAX_LOOP - 5) {\n+                    \/\/ print a message for the first five and last 5 exceptions\n+                    System.err.println(x);\n+                }\n+            }\n+        } catch (Throwable t) {\n+            System.err.println(\"Failed at \" + i + \" with \" + t);\n+            throw t;\n+        }\n","filename":"test\/jdk\/java\/nio\/channels\/SocketChannel\/OpenLeak.java","additions":93,"deletions":11,"binary":false,"changes":104,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,2 +24,2 @@\n-\/* @test\n- * @bug 8011536 8151430 8316304\n+\/* @test id=tmp\n+ * @bug 8011536 8151430 8316304 8334339\n@@ -27,1 +27,1 @@\n- *     that support it.\n+ *     that support it, tests using \/tmp directory.\n@@ -30,1 +30,10 @@\n- * @run main CreationTime\n+ * @run main\/native CreationTime\n+ *\/\n+\n+\/* @test id=cwd\n+ * @summary Basic test for creationTime attribute on platforms\/file systems\n+ *     that support it, tests using the test scratch directory, the test\n+ *     scratch directory maybe at diff disk partition to \/tmp on linux.\n+ * @library  ..\/.. \/test\/lib\n+ * @build jdk.test.lib.Platform\n+ * @run main\/native CreationTime .\n@@ -40,0 +49,1 @@\n+import jtreg.SkippedException;\n@@ -70,2 +80,8 @@\n-            err.println(\"File creation time reported as: \" + creationTime);\n-            throw new RuntimeException(\"Expected to be close to: \" + now);\n+            System.out.println(\"creationTime.toMillis() == \" + creationTime.toMillis());\n+            \/\/ If the file system doesn't support birth time, then skip this test\n+            if (creationTime.toMillis() == 0) {\n+                throw new SkippedException(\"birth time not support for: \" + file);\n+            } else {\n+                err.println(\"File creation time reported as: \" + creationTime);\n+                throw new RuntimeException(\"Expected to be close to: \" + now);\n+            }\n@@ -97,1 +113,1 @@\n-        System.out.println(\"supportsCreationTimeRead == \" + supportsCreationTimeRead);\n+        System.out.println(top + \" supportsCreationTimeRead == \" + supportsCreationTimeRead);\n@@ -129,1 +145,6 @@\n-        Path dir = TestUtil.createTemporaryDirectory();\n+        Path dir;\n+        if (args.length == 0) {\n+            dir = TestUtil.createTemporaryDirectory();\n+        } else {\n+            dir = TestUtil.createTemporaryDirectory(args[0]);\n+        }\n","filename":"test\/jdk\/java\/nio\/file\/attribute\/BasicFileAttributeView\/CreationTime.java","additions":30,"deletions":9,"binary":false,"changes":39,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 1999, 2000, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 1999, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -50,1 +50,0 @@\n-\n","filename":"test\/jdk\/java\/rmi\/reliability\/benchmark\/bench\/Makefile","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2000, 2020, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2000, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -75,1 +75,0 @@\n-\n","filename":"test\/jdk\/java\/rmi\/reliability\/benchmark\/bench\/rmi\/Makefile","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,1 +27,5 @@\n- * @summary Confirm that DecimalFormat.parse() parses BigDecimal and BigInteger as expected.\n+ * @summary Confirm that DecimalFormat.parse() parses BigDecimal and BigInteger\n+ *          string values as expected. Specifically, ensure a ParseException is\n+ *          not thrown as well as the parsed value being numerically correct.\n+ *          Tests large String values with combinations of multipliers and exponents.\n+ * @run junit BigDecimalCompatibilityTest\n@@ -30,3 +34,15 @@\n-import java.math.*;\n-import java.text.*;\n-import java.util.*;\n+import java.math.BigDecimal;\n+import java.math.RoundingMode;\n+import java.text.DecimalFormat;\n+import java.util.ArrayList;\n+import java.util.Locale;\n+import java.util.stream.Stream;\n+\n+import org.junit.jupiter.api.AfterAll;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.params.ParameterizedTest;\n+import org.junit.jupiter.params.provider.Arguments;\n+import org.junit.jupiter.params.provider.MethodSource;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertDoesNotThrow;\n@@ -36,1 +52,3 @@\n-    static boolean err = false;\n+    private static DecimalFormat df = new DecimalFormat();\n+    \/\/ Save JVM default Locale\n+    private static final Locale savedLocale = Locale.getDefault();\n@@ -38,10 +56,1 @@\n-    static final String[] input_data = {\n-        \"0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\n-        \"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890\"\n-    };\n-    static final String[] exponents = {\n-        \"E-100\", \"E100\", \"E-900\", \"E900\", \"\"\n-    };\n-    static final int[] multipliers = {\n-        -1, 1, -100, 100, -9999, 9999\n-    };\n+    \/\/ ---- Used for the test data (start) ----\n@@ -49,3 +58,3 @@\n-    public static void main(String[] args) throws Exception {\n-        Locale loc = Locale.getDefault();\n-        Locale.setDefault(Locale.US);\n+    \/\/ Both ArrayList composed of Arguments(String longString, int multiplier)\n+    private static final ArrayList<Arguments> bigIntegers = new ArrayList<Arguments>();\n+    private static final ArrayList<Arguments> bigDecimals = new ArrayList<Arguments>();\n@@ -53,2 +62,4 @@\n-        testBigDecimal();\n-        testBigInteger();\n+    \/\/ Long string data to generate combinations of test values\n+    private static final String[] inputData = {\n+            \"0\".repeat(400),\n+            \"1234567890\".repeat(40)};\n@@ -56,1 +67,4 @@\n-        Locale.setDefault(loc);\n+    \/\/ Variety of exponents to test parse() against\n+    private static final String[] exponents = {\n+            \"E-100\", \"E100\", \"E-900\", \"E900\", \"\"\n+    };\n@@ -58,4 +72,5 @@\n-        if (err) {\n-            throw new RuntimeException(\"Error: Unexpected value\");\n-        }\n-    }\n+    \/\/ Variety of multipliers that DecimalFormat can apply\n+    private static final int[] multipliers = {\n+            -1, 1, -100, 100, -9999, 9999\n+    };\n+    \/\/ ---- Used for the test data (end) ----\n@@ -63,4 +78,6 @@\n-    static private void testBigDecimal() {\n-        DecimalFormat df = new DecimalFormat();\n-        df.setParseBigDecimal(true);\n-        df.setMaximumFractionDigits(Integer.MAX_VALUE);\n+    \/\/ Set JVM default Locale to US and populate the test arrayLists\n+    @BeforeAll\n+    static void initAll() {\n+        Locale.setDefault(Locale.US);\n+        buildTestData();\n+    }\n@@ -68,11 +85,21 @@\n-        for (int i = 0; i < input_data.length; i++) {\n-            for (int j = 0; j < input_data.length; j++) {\n-                for (int k = 0; k < input_data.length; k++) {\n-                    for (int l = 0; l < input_data.length; l++) {\n-                        for (int m = 0; m < exponents.length; m++) {\n-                            String s = input_data[i] + input_data[j] + '.' +\n-                                       input_data[k] + input_data[l] +\n-                                       exponents[m];\n-                            for (int n = 0; n < multipliers.length; n++) {\n-                                test(df, s, multipliers[n]);\n-                                test(df, '-'+s, multipliers[n]);\n+    \/*\n+     * Uses inputData and exponents to build long string\n+     * decimal and integer values and populate bigDecimals and bigIntegers\n+     * accordingly. Attaches a multiplier value as well to the test data.\n+     *\/\n+    private static void buildTestData() {\n+        for (String longString1 : inputData) {\n+            for (String longString2 : inputData) {\n+                String bigInteger = longString1 + longString2;\n+                for (int multiplier : multipliers) {\n+                    bigIntegers.add(Arguments.of(bigInteger, multiplier));\n+                    bigIntegers.add(Arguments.of('-' + bigInteger, multiplier));\n+                }\n+                for (String longString3 : inputData) {\n+                    for (String longString4 : inputData) {\n+                        for (String exponent : exponents) {\n+                            String bigDecimal = longString1 + longString2 + '.'\n+                                    + longString3 + longString4 + exponent;\n+                            for (int multiplier : multipliers) {\n+                                bigDecimals.add(Arguments.of(bigDecimal, multiplier));\n+                                bigDecimals.add(Arguments.of('-' + bigDecimal, multiplier));\n@@ -87,4 +114,5 @@\n-    static private void testBigInteger() {\n-        DecimalFormat df = new DecimalFormat();\n-        df.setParseBigDecimal(true);\n-        df.setMaximumFractionDigits(Integer.MAX_VALUE);\n+    \/\/ Restore JVM default Locale\n+    @AfterAll\n+    static void tearDownAll() {\n+        Locale.setDefault(savedLocale);\n+    }\n@@ -92,9 +120,24 @@\n-        for (int i = 0; i < input_data.length; i++) {\n-            for (int j = 0; j < input_data.length; j++) {\n-                String s = input_data[i] + input_data[j];\n-                for (int k = 0; k < multipliers.length; k++) {\n-                    test(df, s, multipliers[k]);\n-                    test(df, '-'+s, multipliers[k]);\n-                }\n-            }\n-        }\n+    \/\/ Tests strings with length 1600+. See test() for specific details.\n+    @ParameterizedTest\n+    @MethodSource(\"bigDecimalProvider\")\n+    public void bigDecimalParseTest(String longString, int multiplier) {\n+        test(longString, multiplier);\n+    }\n+\n+    \/\/ Returns 960 arrangements of bigDecimal string values and multipliers\n+    \/\/ In the form of (String, int).\n+    private static Stream<Arguments> bigDecimalProvider() {\n+        return bigDecimals.stream();\n+    }\n+\n+    \/\/ Tests strings with length 800+. See test() for specific details.\n+    @ParameterizedTest\n+    @MethodSource(\"bigIntegerProvider\")\n+    public void bigIntegerParseTest(String longString, int multiplier) {\n+        test(longString, multiplier);\n+    }\n+\n+    \/\/ Returns 48 arrangements of bigInteger string values and multipliers\n+    \/\/ In the form of (String, int).\n+    private static Stream<Arguments> bigIntegerProvider() {\n+        return bigIntegers.stream();\n@@ -103,1 +146,12 @@\n-    static void test(DecimalFormat df, String s, int multiplier) {\n+    \/*\n+     * Tests that parsing a large BigDecimal\/BigInteger string value\n+     * will not throw a ParseException with setParseBigDecimal as true.\n+     * Parses with a variety of multiplier values. Then ensures that the parsed\n+     * value is the expected number.\n+     *\/\n+    private static void test(String longString, int multiplier) {\n+        \/\/ Reset DecimalFormat for a clean test\n+        df = new DecimalFormat();\n+        df.setParseBigDecimal(true);\n+        \/\/ wide enough to support the long string test data\n+        df.setMaximumFractionDigits(Integer.MAX_VALUE);\n@@ -106,9 +160,7 @@\n-        Number num = null;\n-        try {\n-            num = df.parse(s);\n-        }\n-        catch (ParseException e) {\n-            err = true;\n-            System.err.println(\"Failed: Exception occurred: \" + e.getMessage());\n-            return;\n-        }\n+        \/\/ Check parse and returned value. This was originally intended to ensure\n+        \/\/ a ParseException is not thrown\n+        Number parsedValue = assertDoesNotThrow(()-> df.parse(longString),\n+                \"Should not throw an Exception\");\n+        BigDecimal expectedValue = getExpected(longString, multiplier);\n+        assertEquals(expectedValue, parsedValue, \"With multiplier: \" + multiplier);\n+    }\n@@ -116,1 +168,4 @@\n-        BigDecimal bd = new BigDecimal(s);\n+    \/\/ Utility to get a numerically correct value of a long string.\n+    \/\/ Dependent on BigDecimal implementation\n+    private static BigDecimal getExpected(String longString, int multiplier) {\n+        BigDecimal expected = new BigDecimal(longString);\n@@ -118,1 +173,1 @@\n-           bd = bd.divide(new BigDecimal(multiplier));\n+            expected = expected.divide(new BigDecimal(multiplier));\n@@ -121,11 +176,1 @@\n-           bd = bd.divide(new BigDecimal(multiplier), RoundingMode.HALF_EVEN);\n-        }\n-        check(num, bd, multiplier);\n-    }\n-\n-    static void check(Number got, BigDecimal expected, int multiplier) {\n-        if (!got.equals(expected)) {\n-            err = true;\n-            System.err.println(\"Failed: got:\" + got +\n-                               \", expected: \" + expected +\n-                               \", multiplier=\" + multiplier);\n+            expected = expected.divide(new BigDecimal(multiplier), RoundingMode.HALF_EVEN);\n@@ -133,0 +178,1 @@\n+        return expected;\n","filename":"test\/jdk\/java\/text\/Format\/NumberFormat\/BigDecimalCompatibilityTest.java","additions":123,"deletions":77,"binary":false,"changes":200,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,1 +26,3 @@\n- * @summary Confirm that the decimal separator is shown when explicitly requested.\n+ * @summary Confirm that the decimal separator is shown when explicitly requested\n+ *          (or not shown if not requested). Tests against double, long, BigDecimal,\n+ *          and BigInteger with a combination of different patterns.\n@@ -28,0 +30,1 @@\n+ * @run junit Bug4208135\n@@ -30,3 +33,5 @@\n-import java.math.*;\n-import java.text.*;\n-import java.util.*;\n+import java.math.BigDecimal;\n+import java.math.BigInteger;\n+import java.text.DecimalFormat;\n+import java.util.Locale;\n+import java.util.stream.Stream;\n@@ -34,1 +39,5 @@\n-public class Bug4208135 {\n+import org.junit.jupiter.api.AfterAll;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.params.ParameterizedTest;\n+import org.junit.jupiter.params.provider.Arguments;\n+import org.junit.jupiter.params.provider.MethodSource;\n@@ -36,1 +45,1 @@\n-    static DecimalFormat df;\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n@@ -38,1 +47,1 @@\n-    static boolean err = false;\n+public class Bug4208135 {\n@@ -40,1 +49,3 @@\n-    static public void main(String[] args){\n+    private static DecimalFormat df;\n+    \/\/ Save JVM default Locale\n+    private static final Locale savedLocale = Locale.getDefault();\n@@ -42,1 +53,3 @@\n-        Locale defaultLoc = Locale.getDefault();\n+    \/\/ Set JVM default locale to US\n+    @BeforeAll\n+    static void init() {\n@@ -44,0 +57,1 @@\n+    }\n@@ -45,1 +59,41 @@\n-        df = new DecimalFormat();\n+    \/\/ Restore JVM default locale\n+    @AfterAll\n+    static void tearDown() {\n+        Locale.setDefault(savedLocale);\n+    }\n+\n+    \/\/ Confirm that decimal separator shown when formatting a number\n+    @ParameterizedTest\n+    @MethodSource(\"fractionalDigitsWithSeparatorProvider\")\n+    public void fractionalDigitsWithSeparatorTest(Number num, String expected) {\n+        df = getDF(\"0.#E0\", true);\n+        String actualFormatted = df.format(num);\n+        assertEquals(expected, actualFormatted, getErrMsg(\"0.#E0\", true));\n+    }\n+\n+    \/\/ Combination of numbers and a fractional exponent pattern with a separator\n+    private static Stream<Arguments> fractionalDigitsWithSeparatorProvider() {\n+        return Stream.of(\n+                Arguments.of(0.0, \"0.E0\"),\n+                Arguments.of(10.0, \"1.E1\"),\n+                Arguments.of(1000.0, \"1.E3\"),\n+                Arguments.of(0L, \"0.E0\"),\n+                Arguments.of(10L, \"1.E1\"),\n+                Arguments.of(1000L, \"1.E3\"),\n+                Arguments.of(new BigDecimal(\"0.0\"), \"0.E0\"),\n+                Arguments.of(new BigDecimal(\"10.0\"), \"1.E1\"),\n+                Arguments.of(new BigDecimal(\"1000.0\"), \"1.E3\"),\n+                Arguments.of(new BigInteger(\"00\"), \"0.E0\"),\n+                Arguments.of(new BigInteger(\"10\"), \"1.E1\"),\n+                Arguments.of(new BigInteger(\"1000\"), \"1.E3\")\n+        );\n+    }\n+\n+    \/\/ Confirm that decimal separator not shown when formatting a number\n+    @ParameterizedTest\n+    @MethodSource(\"fractionalDigitsNoSeparatorProvider\")\n+    public void fractionalDigitsNoSeparatorTest(Number num, String expected) {\n+        df = getDF(\"0.#E0\", false);\n+        String actualFormatted = df.format(num);\n+        assertEquals(expected, actualFormatted, getErrMsg(\"0.#E0\", false));\n+    }\n@@ -47,65 +101,78 @@\n-        df.applyPattern(\"0.#E0\");\n-\n-        df.setDecimalSeparatorAlwaysShown(true);\n-        checkFormat(0.0, \"0.E0\");\n-        checkFormat(10.0, \"1.E1\");\n-        checkFormat(1000.0, \"1.E3\");\n-        checkFormat(0L, \"0.E0\");\n-        checkFormat(10L, \"1.E1\");\n-        checkFormat(1000L, \"1.E3\");\n-        checkFormat(new BigDecimal(\"0.0\"), \"0.E0\");\n-        checkFormat(new BigDecimal(\"10.0\"), \"1.E1\");\n-        checkFormat(new BigDecimal(\"1000.0\"), \"1.E3\");\n-        checkFormat(new BigInteger(\"00\"), \"0.E0\");\n-        checkFormat(new BigInteger(\"10\"), \"1.E1\");\n-        checkFormat(new BigInteger(\"1000\"), \"1.E3\");\n-\n-        df.setDecimalSeparatorAlwaysShown(false);\n-        checkFormat(0.0, \"0E0\");\n-        checkFormat(10.0, \"1E1\");\n-        checkFormat(1000.0, \"1E3\");\n-        checkFormat(0L, \"0E0\");\n-        checkFormat(10L, \"1E1\");\n-        checkFormat(1000L, \"1E3\");\n-        checkFormat(new BigDecimal(\"0.0\"), \"0E0\");\n-        checkFormat(new BigDecimal(\"10.0\"), \"1E1\");\n-        checkFormat(new BigDecimal(\"1000.0\"), \"1E3\");\n-        checkFormat(new BigInteger(\"0\"), \"0E0\");\n-        checkFormat(new BigInteger(\"10\"), \"1E1\");\n-        checkFormat(new BigInteger(\"1000\"), \"1E3\");\n-\n-        df.applyPattern(\"0.###\");\n-\n-        df.setDecimalSeparatorAlwaysShown(true);\n-        checkFormat(0.0, \"0.\");\n-        checkFormat(10.0, \"10.\");\n-        checkFormat(1000.0, \"1000.\");\n-        checkFormat(0L, \"0.\");\n-        checkFormat(10L, \"10.\");\n-        checkFormat(1000L, \"1000.\");\n-        checkFormat(new BigDecimal(\"0.0\"), \"0.\");\n-        checkFormat(new BigDecimal(\"10.0\"), \"10.\");\n-        checkFormat(new BigDecimal(\"1000.0\"), \"1000.\");\n-        checkFormat(new BigInteger(\"0\"), \"0.\");\n-        checkFormat(new BigInteger(\"10\"), \"10.\");\n-        checkFormat(new BigInteger(\"1000\"), \"1000.\");\n-\n-        df.setDecimalSeparatorAlwaysShown(false);\n-        checkFormat(0.0, \"0\");\n-        checkFormat(10.0, \"10\");\n-        checkFormat(1000.0, \"1000\");\n-        checkFormat(0L, \"0\");\n-        checkFormat(10L, \"10\");\n-        checkFormat(1000L, \"1000\");\n-        checkFormat(new BigDecimal(\"0.0\"), \"0\");\n-        checkFormat(new BigDecimal(\"10.0\"), \"10\");\n-        checkFormat(new BigDecimal(\"1000.0\"), \"1000\");\n-        checkFormat(new BigInteger(\"0\"), \"0\");\n-        checkFormat(new BigInteger(\"10\"), \"10\");\n-        checkFormat(new BigInteger(\"1000\"), \"1000\");\n-\n-        Locale.setDefault(defaultLoc);\n-\n-        if (err) {\n-            throw new RuntimeException(\"Wrong format\/parse with DecimalFormat\");\n-        }\n+    \/\/ Combination of numbers and a fractional exponent pattern with no separator\n+    private static Stream<Arguments> fractionalDigitsNoSeparatorProvider() {\n+        return Stream.of(\n+                Arguments.of(0.0, \"0E0\"),\n+                Arguments.of(10.0, \"1E1\"),\n+                Arguments.of(1000.0, \"1E3\"),\n+                Arguments.of(0L, \"0E0\"),\n+                Arguments.of(10L, \"1E1\"),\n+                Arguments.of(1000L, \"1E3\"),\n+                Arguments.of(new BigDecimal(\"0.0\"), \"0E0\"),\n+                Arguments.of(new BigDecimal(\"10.0\"), \"1E1\"),\n+                Arguments.of(new BigDecimal(\"1000.0\"), \"1E3\"),\n+                Arguments.of(new BigInteger(\"00\"), \"0E0\"),\n+                Arguments.of(new BigInteger(\"10\"), \"1E1\"),\n+                Arguments.of(new BigInteger(\"1000\"), \"1E3\")\n+        );\n+    }\n+\n+    \/\/ Confirm that decimal separator shown when formatting a number\n+    @ParameterizedTest\n+    @MethodSource(\"noFractionalDigitsWithSeparatorProvider\")\n+    public void noFractionalDigitsWithSeparatorTest(Number num, String expected) {\n+        df = getDF(\"0.###\", true);\n+        String actualFormatted = df.format(num);\n+        assertEquals(expected, actualFormatted, getErrMsg(\"0.###\", true));\n+    }\n+\n+    \/\/ Combination of numbers and a non-fractional exponent pattern with a separator\n+    private static Stream<Arguments> noFractionalDigitsWithSeparatorProvider() {\n+        return Stream.of(\n+                Arguments.of(0.0, \"0.\"),\n+                Arguments.of(10.0, \"10.\"),\n+                Arguments.of(1000.0, \"1000.\"),\n+                Arguments.of(0L, \"0.\"),\n+                Arguments.of(10L, \"10.\"),\n+                Arguments.of(1000L, \"1000.\"),\n+                Arguments.of(new BigDecimal(\"0.0\"), \"0.\"),\n+                Arguments.of(new BigDecimal(\"10.0\"), \"10.\"),\n+                Arguments.of(new BigDecimal(\"1000.0\"), \"1000.\"),\n+                Arguments.of(new BigInteger(\"00\"), \"0.\"),\n+                Arguments.of(new BigInteger(\"10\"), \"10.\"),\n+                Arguments.of(new BigInteger(\"1000\"), \"1000.\")\n+        );\n+    }\n+\n+    \/\/ Confirm that decimal separator not shown when formatting a number\n+    @ParameterizedTest\n+    @MethodSource(\"noFractionalDigitsNoSeparatorProvider\")\n+    public void noFractionalDigitsNoSeparatorTest(Number num, String expected) {\n+        df = getDF(\"0.###\", false);\n+        String actualFormatted = df.format(num);\n+        assertEquals(expected, actualFormatted, getErrMsg(\"0.###\", false));\n+    }\n+\n+    \/\/ Combination of numbers and a non-fractional exponent pattern with no separator\n+    private static Stream<Arguments> noFractionalDigitsNoSeparatorProvider() {\n+        return Stream.of(\n+                Arguments.of(0.0, \"0\"),\n+                Arguments.of(10.0, \"10\"),\n+                Arguments.of(1000.0, \"1000\"),\n+                Arguments.of(0L, \"0\"),\n+                Arguments.of(10L, \"10\"),\n+                Arguments.of(1000L, \"1000\"),\n+                Arguments.of(new BigDecimal(\"0.0\"), \"0\"),\n+                Arguments.of(new BigDecimal(\"10.0\"), \"10\"),\n+                Arguments.of(new BigDecimal(\"1000.0\"), \"1000\"),\n+                Arguments.of(new BigInteger(\"00\"), \"0\"),\n+                Arguments.of(new BigInteger(\"10\"), \"10\"),\n+                Arguments.of(new BigInteger(\"1000\"), \"1000\")\n+        );\n+    }\n+\n+    \/\/ Creates clean DF and sets the pattern and separatorShown value\n+    private static DecimalFormat getDF(String pattern, boolean separatorShown) {\n+        df = new DecimalFormat();\n+        df.applyPattern(pattern);\n+        df.setDecimalSeparatorAlwaysShown(separatorShown);\n+        return df;\n@@ -114,12 +181,4 @@\n-    static void checkFormat(Number num, String expected) {\n-        String got = df.format(num);\n-        if (!got.equals(expected)) {\n-            err = true;\n-            System.err.println(\"    DecimalFormat format(\" +\n-                               num.getClass().getName() +\n-                               \") error:\" +\n-                               \"\\n\\tnumber:           \" + num +\n-                               \"\\n\\tSeparatorShown? : \" + df.isDecimalSeparatorAlwaysShown() +\n-                               \"\\n\\tgot:              \" + got +\n-                               \"\\n\\texpected:         \" + expected);\n-        }\n+    \/\/ Utility to get a helpful error message when values are not as expected\n+    private static String getErrMsg(String pattern, boolean separatorShown) {\n+        return String.format(\"Fails with pattern= %s, with separatorShown = %s\",\n+                pattern, separatorShown);\n","filename":"test\/jdk\/java\/text\/Format\/NumberFormat\/Bug4208135.java","additions":147,"deletions":88,"binary":false,"changes":235,"status":"modified"},{"patch":"@@ -27,1 +27,3 @@\n- * @summary Confirm that DecimalFormat can format a number with negative exponent number correctly.\n+ * @summary Confirm that DecimalFormat can format a number with a negative\n+ *          exponent number correctly. Tests also involve using a DecimalFormat\n+ *          with a custom pattern or a custom minus sign.\n@@ -31,3 +33,6 @@\n-import java.math.*;\n-import java.util.*;\n-import java.text.*;\n+import java.math.BigDecimal;\n+import java.math.BigInteger;\n+import java.text.DecimalFormat;\n+import java.text.DecimalFormatSymbols;\n+import java.util.Locale;\n+import java.util.stream.Stream;\n@@ -35,1 +40,5 @@\n-import org.junit.jupiter.api.Test;\n+import org.junit.jupiter.api.AfterAll;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.params.ParameterizedTest;\n+import org.junit.jupiter.params.provider.Arguments;\n+import org.junit.jupiter.params.provider.MethodSource;\n@@ -37,0 +46,1 @@\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n@@ -39,0 +49,10 @@\n+\/*\n+ * This bug is about exponential formatting. But I added test cases for:\n+ *   - Double and BigDecimal numbers which don't have exponent parts.\n+ *   - Long and BigInteger numbers which don't support exponential\n+ *     notation.\n+ * because there are few test cases for suffix and prefix.\n+ * And also, I added test cases to guarantee further formatting and\n+ * parsing using the same DecimalFormat instance will not change the\n+ * Number's value anymore.\n+ *\/\n@@ -41,3 +61,2 @@\n-    static DecimalFormat df;\n-    static DecimalFormatSymbols dfs;\n-    static boolean err = false;\n+    \/\/ Save JVM default Locale\n+    private static final Locale savedLocale = Locale.getDefault();\n@@ -45,2 +64,3 @@\n-    static public void main(String[] args) {\n-        Locale defaultLoc = Locale.getDefault();\n+    \/\/ Set JVM default Locale to US\n+    @BeforeAll\n+    static void init() {\n@@ -48,22 +68,0 @@\n-\n-        \/**\n-         * This bug is about exponential formatting. But I added test cases for:\n-         *   - Double and BigDecimal numbers which don't have exponent parts.\n-         *   - Long and BigInteger numbers which don't support exponential\n-         *     notation.\n-         * because there are few test cases for suffix and prefix.\n-         * And also, I added test cases to guarantee further formatting and\n-         * parsing using the same DecimalFormat instance will not change the\n-         * Number's value anymore.\n-         *\/\n-\n-        test_double();\n-        test_long();\n-        test_BigDecimal();\n-        test_BigInteger();\n-\n-        Locale.setDefault(defaultLoc);\n-\n-        if (err) {\n-            throw new RuntimeException(\"Wrong format with DecimalFormat\");\n-        }\n@@ -72,46 +70,4 @@\n-    static void test_double() {\n-        df = new DecimalFormat();\n-        dfs = df.getDecimalFormatSymbols();\n-\n-        \/* Test with default pattern *\/\n-        test(1234D,    \"1,234\");\n-        test(0.1234,  \"0.123\");     \/\/ rounded\n-        test(-1234D,   \"-1,234\");\n-        test(-0.1234, \"-0.123\");    \/\/ rounded\n-\n-        test(Double.POSITIVE_INFINITY, \"\\u221e\");\n-        test(Double.NEGATIVE_INFINITY, \"-\\u221e\");\n-        test(Double.NaN, \"\\ufffd\"); \/\/ without prefix and suffix\n-        test(0.0,  \"0\");\n-        test(-0.0, \"-0\");   \/\/ with the minus sign\n-\n-        \/* Specify a pattern and the minus sign. *\/\n-        prepareFormatter(\"<P>#.###E00<S>\", 'm');\n-        test(1234D,    \"<P>1.234E03<S>\");\n-        test(0.1234,  \"<P>1.234Em01<S>\");\n-        test(-1234D,   \"m<P>1.234E03<S>\");\n-        test(-0.1234, \"m<P>1.234Em01<S>\");\n-\n-        prepareFormatter(\"<P>#.###E00<S>;#.###E00\", 'm');\n-        test(1234D,    \"<P>1.234E03<S>\");\n-        test(0.1234,  \"<P>1.234Em01<S>\");\n-        test(-1234D,   \"1.234E03\");\n-        test(-0.1234, \"1.234Em01\");\n-\n-        prepareFormatter(\"#.###E00;<P>#.###E00<S>\", 'm');\n-        test(1234D,    \"1.234E03\");\n-        test(0.1234,  \"1.234Em01\");\n-        test(-1234D,   \"<P>1.234E03<S>\");\n-        test(-0.1234, \"<P>1.234Em01<S>\");\n-\n-        prepareFormatter(\"<P>#.###E00<S>;<p>-#.###E00<s>\", 'm');\n-        test(1234D,    \"<P>1.234E03<S>\");\n-        test(0.1234,  \"<P>1.234Em01<S>\");\n-        test(-1234D,   \"<p>m1.234E03<s>\");\n-        test(-0.1234, \"<p>m1.234Em01<s>\");\n-\n-        test(Double.POSITIVE_INFINITY, \"<P>\\u221e<S>\");\n-        test(Double.NEGATIVE_INFINITY, \"<p>m\\u221e<s>\");\n-        test(Double.NaN, \"\\ufffd\"); \/\/ without prefix and suffix\n-        test(0.0,  \"<P>0E00<S>\");\n-        test(-0.0, \"<p>m0E00<s>\");  \/\/ with the minus sign\n+    \/\/ Restore the original JVM default locale\n+    @AfterAll\n+    static void tearDown() {\n+        Locale.setDefault(savedLocale);\n@@ -120,30 +76,5 @@\n-    static void test_BigDecimal() {\n-        df = new DecimalFormat();\n-        dfs = df.getDecimalFormatSymbols();\n-\n-        \/* Test with default pattern *\/\n-        test(new BigDecimal(\"123456789012345678901234567890\"),\n-             \"123,456,789,012,345,678,901,234,567,890\");\n-        test(new BigDecimal(\"0.000000000123456789012345678901234567890\"),\n-             \"0\");\n-        test(new BigDecimal(\"-123456789012345678901234567890\"),\n-             \"-123,456,789,012,345,678,901,234,567,890\");\n-        test(new BigDecimal(\"-0.000000000123456789012345678901234567890\"),\n-              \"-0\");\n-\n-        test(new BigDecimal(\"0\"), \"0\");\n-        test(new BigDecimal(\"-0\"), \"0\");\n-\n-        \/* Specify a pattern and the minus sign. *\/\n-        prepareFormatter(\"<P>#.####################E00<S>;<p>-#.####################E00<s>\", 'm');\n-        test(new BigDecimal(\"123456789012345678901234567890\"),\n-             \"<P>1.23456789012345678901E29<S>\");\n-        test(new BigDecimal(\"0.000000000123456789012345678901234567890\"),\n-             \"<P>1.23456789012345678901Em10<S>\");\n-        test(new BigDecimal(\"-123456789012345678901234567890\"),\n-             \"<p>m1.23456789012345678901E29<s>\");\n-        test(new BigDecimal(\"-0.000000000123456789012345678901234567890\"),\n-              \"<p>m1.23456789012345678901Em10<s>\");\n-\n-        test(new BigDecimal(\"0\"), \"<P>0E00<S>\");\n-        test(new BigDecimal(\"-0\"), \"<P>0E00<S>\");\n+    \/\/ Check that negative exponent number recognized for doubles\n+    @ParameterizedTest\n+    @MethodSource(\"doubles\")\n+    public void doubleTest(Number num, String str, DecimalFormat df) {\n+        test(num, str, df);\n@@ -152,18 +83,43 @@\n-    static void test_long() {\n-        df = new DecimalFormat();\n-        dfs = df.getDecimalFormatSymbols();\n-\n-        \/* Test with default pattern *\/\n-        test(123456789L,  \"123,456,789\");\n-        test(-123456789L, \"-123,456,789\");\n-\n-        test(0L, \"0\");\n-        test(-0L, \"0\");\n-\n-        \/* Specify a pattern and the minus sign. *\/\n-        prepareFormatter(\"<P>#,###<S>;<p>-#,###<s>\", 'm');\n-        test(123456789L,  \"<P>123,456,789<S>\");\n-        test(-123456789L, \"<p>m123,456,789<s>\");\n-\n-        test(0L, \"<P>0<S>\");\n-        test(-0L, \"<P>0<S>\");\n+    \/\/ Provides a double to be formatted, which is compared to the expected String.\n+    \/\/ Additionally, provides a DecimalFormat to do the formatting (can have a custom\n+    \/\/ pattern and minus sign). Given in the form (double, String, DecimalFormat).\n+    private static Stream<Arguments> doubles() {\n+        DecimalFormat defaultDf = new DecimalFormat();\n+        DecimalFormat customDf1 = getDecimalFormat(\"<P>#.###E00<S>\", 'm');\n+        DecimalFormat customDf2 = getDecimalFormat(\"<P>#.###E00<S>;#.###E00\", 'm');\n+        DecimalFormat customDf3 = getDecimalFormat(\"#.###E00;<P>#.###E00<S>\", 'm');\n+        DecimalFormat customDf4 = getDecimalFormat(\"<P>#.###E00<S>;<p>-#.###E00<s>\", 'm');\n+        return Stream.of(\n+                \/\/ Test with default pattern\n+                Arguments.of(1234D,    \"1,234\", defaultDf),\n+                Arguments.of(0.1234,  \"0.123\", defaultDf),    \/\/ rounded\n+                Arguments.of(-1234D,   \"-1,234\", defaultDf),\n+                Arguments.of(-0.1234, \"-0.123\", defaultDf),    \/\/ rounded\n+                Arguments.of(Double.POSITIVE_INFINITY, \"\\u221e\", defaultDf),\n+                Arguments.of(Double.NEGATIVE_INFINITY, \"-\\u221e\", defaultDf),\n+                Arguments.of(Double.NaN, \"\\ufffd\", defaultDf), \/\/ without prefix and suffix\n+                Arguments.of(0.0,  \"0\", defaultDf),\n+                Arguments.of(-0.0, \"-0\", defaultDf),   \/\/ with the minus sign\n+                \/\/ Test with a pattern and the minus sign\n+                Arguments.of(1234D,    \"<P>1.234E03<S>\", customDf1),\n+                Arguments.of(0.1234,  \"<P>1.234Em01<S>\", customDf1),\n+                Arguments.of(-1234D,   \"m<P>1.234E03<S>\", customDf1),\n+                Arguments.of(-0.1234, \"m<P>1.234Em01<S>\", customDf1),\n+                Arguments.of(1234D,    \"<P>1.234E03<S>\", customDf2),\n+                Arguments.of(0.1234,  \"<P>1.234Em01<S>\", customDf2),\n+                Arguments.of(-1234D,   \"1.234E03\", customDf2),\n+                Arguments.of(-0.1234, \"1.234Em01\", customDf2),\n+                Arguments.of(1234D,    \"1.234E03\", customDf3),\n+                Arguments.of(0.1234,  \"1.234Em01\", customDf3),\n+                Arguments.of(-1234D,   \"<P>1.234E03<S>\", customDf3),\n+                Arguments.of(-0.1234, \"<P>1.234Em01<S>\", customDf3),\n+                Arguments.of(1234D,    \"<P>1.234E03<S>\", customDf4),\n+                Arguments.of(0.1234,  \"<P>1.234Em01<S>\", customDf4),\n+                Arguments.of(-1234D,   \"<p>m1.234E03<s>\", customDf4),\n+                Arguments.of(-0.1234, \"<p>m1.234Em01<s>\", customDf4),\n+                Arguments.of(Double.POSITIVE_INFINITY, \"<P>\\u221e<S>\", customDf4),\n+                Arguments.of(Double.NEGATIVE_INFINITY, \"<p>m\\u221e<s>\", customDf4),\n+                Arguments.of(Double.NaN, \"\\ufffd\", customDf4), \/\/ without prefix and suffix\n+                Arguments.of(0.0,  \"<P>0E00<S>\", customDf4),\n+                Arguments.of(-0.0, \"<p>m0E00<s>\", customDf4) \/\/ with the minus sign\n+        );\n@@ -172,3 +128,6 @@\n-    static void test_BigInteger() {\n-        df = new DecimalFormat();\n-        dfs = df.getDecimalFormatSymbols();\n+    \/\/ Check that negative exponent number recognized for longs\n+    @ParameterizedTest\n+    @MethodSource(\"longs\")\n+    public void longTest(Number num, String str, DecimalFormat df) {\n+        test(num, str, df);\n+    }\n@@ -176,5 +135,19 @@\n-        \/* Test with default pattern *\/\n-        test(new BigInteger(\"123456789012345678901234567890\"),\n-             \"123,456,789,012,345,678,901,234,567,890\");\n-        test(new BigInteger(\"-123456789012345678901234567890\"),\n-             \"-123,456,789,012,345,678,901,234,567,890\");\n+    \/\/ Same as doubles() data provider, but with long values\n+    \/\/ Given in the form (long, String, DecimalFormat).\n+    private static Stream<Arguments> longs() {\n+        DecimalFormat defaultDf = new DecimalFormat();\n+        DecimalFormat customDf = getDecimalFormat(\n+                \"<P>#,###<S>;<p>-#,###<s>\", 'm');\n+        return Stream.of(\n+                \/\/ Test with default pattern\n+                Arguments.of(123456789L,  \"123,456,789\", defaultDf),\n+                Arguments.of(-123456789L, \"-123,456,789\", defaultDf),\n+                Arguments.of(0L, \"0\", defaultDf),\n+                Arguments.of(-0L, \"0\", defaultDf),\n+                \/\/ Test with a pattern and the minus sign\n+                Arguments.of(123456789L,  \"<P>123,456,789<S>\", customDf),\n+                Arguments.of(-123456789L, \"<p>m123,456,789<s>\", customDf),\n+                Arguments.of(0L, \"<P>0<S>\", customDf),\n+                Arguments.of(-0L, \"<P>0<S>\", customDf)\n+        );\n+    }\n@@ -182,2 +155,6 @@\n-        test(new BigInteger(\"0\"), \"0\");\n-        test(new BigInteger(\"-0\"), \"0\");\n+    \/\/ Check that negative exponent number recognized for bigDecimals\n+    @ParameterizedTest\n+    @MethodSource(\"bigDecimals\")\n+    public void bigDecimalTest(Number num, String str, DecimalFormat df) {\n+        test(num, str, df);\n+    }\n@@ -185,6 +162,31 @@\n-        \/* Specify a pattern and the minus sign. *\/\n-        prepareFormatter(\"<P>#,###<S>;<p>-#,###<s>\", 'm');\n-        test(new BigInteger(\"123456789012345678901234567890\"),\n-             \"<P>123,456,789,012,345,678,901,234,567,890<S>\");\n-        test(new BigInteger(\"-123456789012345678901234567890\"),\n-             \"<p>m123,456,789,012,345,678,901,234,567,890<s>\");\n+    \/\/ Same as doubles() data provider, but with BigDecimal values\n+    \/\/ Given in the form (BigDecimal, String, DecimalFormat).\n+    private static Stream<Arguments> bigDecimals() {\n+        DecimalFormat defaultDf = new DecimalFormat();\n+        DecimalFormat customDf = getDecimalFormat(\n+                \"<P>#.####################E00<S>;<p>-#.####################E00<s>\", 'm');\n+        return Stream.of(\n+                \/\/ Test with default pattern\n+                Arguments.of(new BigDecimal(\"123456789012345678901234567890\"),\n+                        \"123,456,789,012,345,678,901,234,567,890\", defaultDf),\n+                Arguments.of(new BigDecimal(\"0.000000000123456789012345678901234567890\"),\n+                        \"0\", defaultDf),\n+                Arguments.of(new BigDecimal(\"-123456789012345678901234567890\"),\n+                        \"-123,456,789,012,345,678,901,234,567,890\", defaultDf),\n+                Arguments.of(new BigDecimal(\"-0.000000000123456789012345678901234567890\"),\n+                        \"-0\", defaultDf),\n+                Arguments.of(new BigDecimal(\"0\"), \"0\", defaultDf),\n+                Arguments.of(new BigDecimal(\"-0\"), \"0\", defaultDf),\n+                \/\/ Test with a pattern and the minus sign\n+                Arguments.of(new BigDecimal(\"123456789012345678901234567890\"),\n+                        \"<P>1.23456789012345678901E29<S>\", customDf),\n+                Arguments.of(new BigDecimal(\"0.000000000123456789012345678901234567890\"),\n+                        \"<P>1.23456789012345678901Em10<S>\", customDf),\n+                Arguments.of(new BigDecimal(\"-123456789012345678901234567890\"),\n+                        \"<p>m1.23456789012345678901E29<s>\", customDf),\n+                Arguments.of(new BigDecimal(\"-0.000000000123456789012345678901234567890\"),\n+                        \"<p>m1.23456789012345678901Em10<s>\", customDf),\n+                Arguments.of(new BigDecimal(\"0\"), \"<P>0E00<S>\", customDf),\n+                Arguments.of(new BigDecimal(\"-0\"), \"<P>0E00<S>\", customDf)\n+        );\n+    }\n@@ -192,2 +194,5 @@\n-        test(new BigInteger(\"0\"), \"<P>0<S>\");\n-        test(new BigInteger(\"-0\"), \"<P>0<S>\");\n+    \/\/ Check that negative exponent number recognized for bigIntegers\n+    @ParameterizedTest\n+    @MethodSource(\"bigIntegers\")\n+    public void bigIntegerTest(Number num, String str, DecimalFormat df) {\n+        test(num, str, df);\n@@ -196,5 +201,22 @@\n-    static void prepareFormatter(String pattern, char minusSign) {\n-        dfs = df.getDecimalFormatSymbols();\n-        df.applyPattern(pattern);\n-        dfs.setMinusSign(minusSign);\n-        df.setDecimalFormatSymbols(dfs);\n+    \/\/ Same as doubles() data provider, but with BigInteger values\n+    \/\/ Given in the form (BigInteger, String, DecimalFormat).\n+    private static Stream<Arguments> bigIntegers() {\n+        DecimalFormat defaultDf = new DecimalFormat();\n+        DecimalFormat customDf = getDecimalFormat(\n+                \"<P>#,###<S>;<p>-#,###<s>\", 'm');\n+        return Stream.of(\n+                \/\/ Test with default pattern\n+                Arguments.of(new BigInteger(\"123456789012345678901234567890\"),\n+                        \"123,456,789,012,345,678,901,234,567,890\", defaultDf),\n+                Arguments.of(new BigInteger(\"-123456789012345678901234567890\"),\n+                        \"-123,456,789,012,345,678,901,234,567,890\", defaultDf),\n+                Arguments.of(new BigInteger(\"0\"), \"0\", defaultDf),\n+                Arguments.of(new BigInteger(\"-0\"), \"0\", defaultDf),\n+                \/\/ Test with a pattern and the minus sign\n+                Arguments.of(new BigInteger(\"123456789012345678901234567890\"),\n+                        \"<P>123,456,789,012,345,678,901,234,567,890<S>\", customDf),\n+                Arguments.of(new BigInteger(\"-123456789012345678901234567890\"),\n+                        \"<p>m123,456,789,012,345,678,901,234,567,890<s>\", customDf),\n+                Arguments.of(new BigInteger(\"0\"), \"<P>0<S>\", customDf),\n+                Arguments.of(new BigInteger(\"-0\"), \"<P>0<S>\", customDf)\n+        );\n@@ -203,1 +225,3 @@\n-    static void test(Number num, String str) {\n+    \/\/ Check that the formatted value is correct and also check that\n+    \/\/ it can be round-tripped via parse() and format()\n+    private static void test(Number num, String str, DecimalFormat df) {\n@@ -205,10 +229,2 @@\n-        if (!formatted.equals(str)) {\n-            err = true;\n-            System.err.println(\"    DecimalFormat format(\" +\n-                               num.getClass().getName() +\n-                               \") error: \\n\\tnumber: \" + num +\n-                               \"\\n\\tminus sign: \" + dfs.getMinusSign() +\n-                               \"\\n\\tgot:        \" + formatted +\n-                               \"\\n\\texpected:   \" + str);\n-            return;\n-        }\n+        assertEquals(str, formatted, String.format(\"DecimalFormat format(%s) \" +\n+                \"Error: number: %s, minus sign: %s\", num.getClass().getName(), num, df.getDecimalFormatSymbols().getMinusSign()));\n@@ -219,0 +235,6 @@\n+        testRoundTrip(formatted, str, num, df);\n+    }\n+\n+    \/\/ Test that a parsed value can be round-tripped via format() and parse()\n+    private static void testRoundTrip(String formatted, String str,\n+                                      Number num, DecimalFormat df) {\n@@ -224,12 +246,11 @@\n-            if (!parsed1.equals(parsed2)) {\n-                err = true;\n-                System.err.println(\"    DecimalFormat roundtrip parse(\" +\n-                                   num.getClass().getName() +\n-                                   \") error: \\n\\toriginal number:  \" + str +\n-                                   \"\\n\\tparsed number:    \" + parsed1 +\n-                                   \"  (\" + parsed1.getClass().getName() + \")\" +\n-                                   \"\\n\\tformatted number: \" + formatted +\n-                                   \"\\n\\tre-parsed number: \" + parsed2 +\n-                                   \"  (\" + parsed2.getClass().getName() + \")\" +\n-                                   \"\\n\\tminus sign: \" + dfs.getMinusSign());\n-            }\n+            assertEquals(parsed2, parsed1, \"\"\"\n+                            DecimalFormat round trip parse(%s) error:\n+                                original number: %s\n+                                parsed number: %s\n+                                (%s)\n+                                formatted number: %s\n+                                re-parsed number: %s\n+                                (%s)\n+                                minus sign: %s\n+                            \"\"\".formatted(num.getClass().getName(), str, parsed1, parsed1.getClass().getName(),\n+                                    formatted, parsed2, parsed2.getClass().getName(), df.getDecimalFormatSymbols().getMinusSign()));\n@@ -238,11 +259,11 @@\n-            err = true;\n-            System.err.println(\"    DecimalFormat parse(\" +\n-                               num.getClass().getName() +\n-                               \") threw an Exception:  \" + e.getMessage() +\n-                               \"\\n\\toriginal number:  \" + str +\n-                               \"\\n\\tparsed number   : \" + parsed1 +\n-                               \"  (\" + parsed1.getClass().getName() + \")\" +\n-                               \"\\n\\tformatted number: \" + formatted +\n-                               \"\\n\\tre-parsed number: \" + parsed2 +\n-                               \"  (\" + parsed2.getClass().getName() + \")\" +\n-                               \"\\n\\tminus sign: \" + dfs.getMinusSign());\n+            fail(\"\"\"\n+                    DecimalFormat parse(%s) threw an Exception: %s\n+                        original number: %s\n+                        parsed number: %s\n+                        (%s)\n+                        formatted number: %s\n+                        re-parsed number: %s\n+                        (%s)\n+                        minus sign: %s\n+                    \"\"\".formatted(num.getClass().getName(), e.getMessage(), str, parsed1, parsed1.getClass().getName(),\n+                            formatted, parsed2, parsed2.getClass().getName(), df.getDecimalFormatSymbols().getMinusSign()));\n@@ -251,0 +272,10 @@\n+\n+    \/\/ Set up custom DecimalFormat with DecimalFormatSymbols\n+    private static DecimalFormat getDecimalFormat(String pattern, char minusSign) {\n+        DecimalFormat df = new DecimalFormat();\n+        DecimalFormatSymbols dfs = df.getDecimalFormatSymbols();\n+        df.applyPattern(pattern);\n+        dfs.setMinusSign(minusSign);\n+        df.setDecimalFormatSymbols(dfs);\n+        return df;\n+    }\n","filename":"test\/jdk\/java\/text\/Format\/NumberFormat\/Bug4838107.java","additions":214,"deletions":183,"binary":false,"changes":397,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,1 +28,3 @@\n- * and which are between Long.MIN_VALUE and Long.MAX_VALUE are returned as Long(not double).\n+ *          and which are between Long.MIN_VALUE and Long.MAX_VALUE are returned\n+ *          as Long(not double).\n+ * @run junit Bug4944439\n@@ -31,2 +33,0 @@\n-import java.math.BigDecimal;\n-import java.math.BigInteger;\n@@ -34,0 +34,1 @@\n+import java.util.ArrayList;\n@@ -35,0 +36,1 @@\n+import java.util.stream.Stream;\n@@ -36,4 +38,5 @@\n-public class Bug4944439 {\n-\n-    static boolean err = false;\n-    static DecimalFormat df;\n+import org.junit.jupiter.api.AfterAll;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.params.ParameterizedTest;\n+import org.junit.jupiter.params.provider.Arguments;\n+import org.junit.jupiter.params.provider.MethodSource;\n@@ -41,4 +44,3 @@\n-    public static void main(String[] args) throws Exception {\n-\n-        Locale defaultLoc = Locale.getDefault();\n-        Locale.setDefault(Locale.US);\n+import static org.junit.jupiter.api.Assertions.assertDoesNotThrow;\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertInstanceOf;\n@@ -46,3 +48,1 @@\n-        df = new DecimalFormat();\n-        String s = \"-9223372036854775809\";      \/\/ Long.MIN_VALUE-1\n-        check_Double(s);\n+public class Bug4944439 {\n@@ -50,3 +50,3 @@\n-        test(Long.MIN_VALUE, Long.MIN_VALUE+10);\n-        test(-10, 10);\n-        test(Long.MAX_VALUE-10, Long.MAX_VALUE-1);\n+    \/\/ Save JVM default locale\n+    private static final Locale savedLocale = Locale.getDefault();\n+    private static final DecimalFormat df = new DecimalFormat();\n@@ -54,4 +54,5 @@\n-        s = \"9223372036854775807.00\";   \/\/ Long.MAX_VALUE\n-        check_Long(s);\n-        s = \"9223372036854775808\";      \/\/ Long.MAX_VALUE+1\n-        check_Double(s);\n+    \/\/ Set JVM default locale to US for testing\n+    @BeforeAll\n+    static void initAll() {\n+        Locale.setDefault(Locale.US);\n+    }\n@@ -59,4 +60,5 @@\n-        s = \"-0.0\";\n-        check_Double(s);\n-        s = \"0.0\";\n-        check_Long(s);\n+    \/\/ Restore JVM default locale\n+    @AfterAll\n+    static void tearDownAll() {\n+        Locale.setDefault(savedLocale);\n+    }\n@@ -64,1 +66,14 @@\n-        Locale.setDefault(defaultLoc);\n+    \/\/ Check return type and value returned by DecimalFormat.parse() for longs\n+    @ParameterizedTest\n+    @MethodSource(\"longs\")\n+    public void parseLongTest(String s) {\n+        \/\/ This was originally intended to ensure a ParseException is not thrown\n+        Number parsedNumber = assertDoesNotThrow(() -> df.parse(s),\n+                \"DecimalFormat.parse(\\\"%s\\\") should not throw an Exception\");\n+        assertInstanceOf(Long.class, parsedNumber,\n+                \"DecimalFormat.parse(\\\"%s\\\") did not return Long\");\n+        \/\/ Grab integer portion of value\n+        Long expectedVal = Long.valueOf(s.substring(0, s.indexOf('.')));\n+        assertEquals(parsedNumber, expectedVal,\n+                \"DecimalFormat.parse(\\\"%s\\\") returned numerically incorrect value\");\n+    }\n@@ -66,3 +81,9 @@\n-        if (err) {\n-            throw new RuntimeException(\"Wrong parsing with DecimalFormat\");\n-        }\n+    \/\/ Test some values between Long.MIN_VALUE and Long.MAX_VALUE\n+    private static Stream<String> longs() {\n+        ArrayList<String> longs = new ArrayList<>();\n+        addLongData(Long.MIN_VALUE, Long.MIN_VALUE+10, longs);\n+        addLongData(-10, 10, longs);\n+        addLongData(Long.MAX_VALUE-10, Long.MAX_VALUE-1, longs);\n+        longs.add(\"9223372036854775807.00\");\n+        longs.add(\"0.0\");\n+        return longs.stream();\n@@ -71,1 +92,2 @@\n-    private static void test(long from, long to) throws Exception {\n+    \/\/ Utility to add values between parameters(long, to) to testLongs ArrayList\n+    private static void addLongData(long from, long to, ArrayList<String> testLongs){\n@@ -73,1 +95,1 @@\n-            check_Long(Long.toString(l) + \".00\");\n+            testLongs.add(l + \".00\");\n@@ -77,16 +99,12 @@\n-    private static void check_Long(String s) throws Exception {\n-        Number number = df.parse(s);\n-        if (!(number instanceof Long)) {\n-            err = true;\n-            System.err.println(\"Failed: DecimalFormat.parse(\\\"\" + s +\n-                \"\\\") should return a Long, but returned a \" +\n-                number.getClass().getName());\n-        }\n-\n-        int index = s.indexOf('.');\n-        Long l = Long.valueOf(s.substring(0, index));\n-        if (!l.equals(number)) {\n-            err = true;\n-            System.err.println(\"Failed: DecimalFormat.parse(\" + s +\n-                \") should return a Long(\" + l + \"), but returned \" + number);\n-        }\n+    \/\/ Check return type and value returned by DecimalFormat.parse() for doubles\n+    @ParameterizedTest\n+    @MethodSource(\"doubles\")\n+    public void parseDoubleTest(String s) {\n+        \/\/ This was originally intended to ensure a ParseException is not thrown\n+        Number parsedNumber = assertDoesNotThrow(() -> df.parse(s),\n+                \"DecimalFormat.parse(\\\"%s\\\") should not throw an Exception\");\n+        assertInstanceOf(Double.class, parsedNumber,\n+                \"DecimalFormat.parse(\\\"%s\\\") did not return Double\");\n+        Double expectedVal = Double.valueOf(s);\n+        assertEquals(parsedNumber, expectedVal,\n+                \"DecimalFormat.parse(\\\"%s\\\") returned numerically incorrect value\");\n@@ -95,15 +113,7 @@\n-    private static void check_Double(String s) throws Exception {\n-        Number number = df.parse(s);\n-        if (!(number instanceof Double)) {\n-            err = true;\n-            System.err.println(\"Failed: DecimalFormat.parse(\\\"\" + s +\n-                \"\\\") should return a Double, but returned a \" +\n-                number.getClass().getName());\n-        }\n-\n-        Double d = Double.valueOf(s);\n-        if (!d.equals(number)) {\n-            err = true;\n-            System.err.println(\"Failed: DecimalFormat.parse(\" + s +\n-                \") should return a Double(\" + d + \"), but returned \" + number);\n-        }\n+    \/\/ Check values not between Long.MIN_VALUE and Long.MAX_VALUE\n+    private static Stream<String> doubles() {\n+        return Stream.of(\n+                \"-9223372036854775809\", \/\/ Long.MIN_VALUE-1\n+                \"9223372036854775808\", \/\/ Long.MAX_VALUE+1\n+                \"-0.0\"\n+        );\n","filename":"test\/jdk\/java\/text\/Format\/NumberFormat\/Bug4944439.java","additions":73,"deletions":63,"binary":false,"changes":136,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2004, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2004, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,1 +24,1 @@\n-\/**\n+\/*\n@@ -27,1 +27,3 @@\n- * @summary Make sure that any subclass of Number can be formatted using DecimalFormat.format().\n+ * @summary Make sure that any subclass of Number can be formatted using\n+ *          DecimalFormat.format() without throwing an exception.\n+ * @run junit Bug4990596\n@@ -32,0 +34,4 @@\n+import org.junit.jupiter.api.Test;\n+\n+import static org.junit.jupiter.api.Assertions.assertDoesNotThrow;\n+\n@@ -34,2 +40,6 @@\n-    public static void main(String[] args) {\n-        new DecimalFormat().format(new MutableInteger(0));\n+    \/\/ Test that a custom subclass of Number can be formatted by\n+    \/\/ DecimalFormat without throwing an IllegalArgumentException\n+    @Test\n+    public void formatSubclassedNumberTest() {\n+        assertDoesNotThrow(() -> new DecimalFormat().format(new MutableInteger(0)),\n+                \"DecimalFormat.format() should support subclasses of Number\");\n@@ -38,0 +48,2 @@\n+    \/\/ A custom subclass of Number. Prior to this fix, if an instance of this\n+    \/\/ class was formatted by DecimalFormat, an exception would be thrown.\n","filename":"test\/jdk\/java\/text\/Format\/NumberFormat\/Bug4990596.java","additions":17,"deletions":5,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,0 +27,2 @@\n+ *          That is, make sure they are not treated as a double when formatted\n+ *          anymore (which can result in the loss of precision).\n@@ -28,0 +30,1 @@\n+ * @run junit Bug6278616\n@@ -34,1 +37,5 @@\n-import java.util.Locale;\n+import org.junit.jupiter.params.ParameterizedTest;\n+import org.junit.jupiter.params.provider.Arguments;\n+import org.junit.jupiter.params.provider.MethodSource;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n@@ -38,3 +45,1 @@\n-    static final int[] ints = {\n-        Integer.MIN_VALUE, -1, 0, 1, Integer.MAX_VALUE\n-    };\n+    private static final NumberFormat nf = NumberFormat.getInstance();\n@@ -42,3 +47,10 @@\n-    static final long[] longs = {\n-        Long.MIN_VALUE, -1, 0, 1, Long.MAX_VALUE\n-    };\n+    \/\/ Test that NumberFormat formats numerically equivalent int\n+    \/\/ and AtomicInteger values the same\n+    @ParameterizedTest\n+    @MethodSource(\"ints\")\n+    public void formattedAtomicIntTest(int testInt) {\n+        String formattedInt = nf.format(testInt);\n+        String formattedAtomicInt = nf.format(new AtomicInteger(testInt));\n+        assertEquals(formattedAtomicInt, formattedInt, \"Formatting numerically\" +\n+                \" equivalent AtomicInteger and int should produce the same String value\");\n+    }\n@@ -46,2 +58,4 @@\n-    public static void main(String[] args) {\n-        NumberFormat nf = NumberFormat.getInstance();\n+    \/\/ Various int values\n+    private static int[] ints() {\n+        return new int[] { Integer.MIN_VALUE, -1, 0, 1, Integer.MAX_VALUE};\n+    }\n@@ -49,9 +63,10 @@\n-        for (int j = 0; j < ints.length; j++) {\n-            String s_i = nf.format(ints[j]);\n-            String s_ai = nf.format(new AtomicInteger(ints[j]));\n-            if (!s_i.equals(s_ai)) {\n-                throw new RuntimeException(\"format(AtomicInteger \" + s_ai +\n-                                           \") doesn't equal format(Integer \" +\n-                                           s_i + \")\");\n-            }\n-        }\n+    \/\/ Test that NumberFormat formats numerically equivalent long\n+    \/\/ and AtomicLong values the same\n+    @ParameterizedTest\n+    @MethodSource(\"longs\")\n+    public void formattedAtomicLongTest(long testLong) {\n+        String formattedLong = nf.format(testLong);\n+        String formattedAtomicLong = nf.format(new AtomicLong(testLong));\n+        assertEquals(formattedAtomicLong, formattedLong, \"Formatting numerically\" +\n+                \" equivalent AtomicLong and long should produce the same String value\");\n+    }\n@@ -59,9 +74,3 @@\n-        for (int j = 0; j < longs.length; j++) {\n-            String s_l = nf.format(longs[j]);\n-            String s_al = nf.format(new AtomicLong(longs[j]));\n-            if (!s_l.equals(s_al)) {\n-                throw new RuntimeException(\"format(AtomicLong \" + s_al +\n-                                           \") doesn't equal format(Long \" +\n-                                           s_l + \")\");\n-            }\n-        }\n+    \/\/ Various long values\n+    private static long[] longs() {\n+        return new long[] { Long.MIN_VALUE, -1, 0, 1, Long.MAX_VALUE};\n","filename":"test\/jdk\/java\/text\/Format\/NumberFormat\/Bug6278616.java","additions":37,"deletions":28,"binary":false,"changes":65,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,0 +29,1 @@\n+ * @run junit Bug8132125\n@@ -31,2 +32,6 @@\n-import java.text.*;\n-import java.util.*;\n+import java.text.NumberFormat;\n+import java.util.Locale;\n+\n+import org.junit.jupiter.api.Test;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n@@ -35,1 +40,4 @@\n-    public static void main(String[] args) {\n+\n+    \/\/ Ensure the CLDRConverter does not omit the Swiss number elements\n+    @Test\n+    public void swissNumElementsTest() {\n@@ -39,1 +47,2 @@\n-        String expected = \"54\\u2019839\\u2019483.142\"; \/\/ i.e. \"\\u2019\" as decimal separator, \"\\u2019\" as grouping separator\n+        \/\/ \"\\u002E\" as decimal separator, \"\\u2019\" as grouping separator\n+        String expected = \"54\\u2019839\\u2019483.142\";\n@@ -41,3 +50,1 @@\n-        if (!actual.equals(expected)) {\n-            throw new RuntimeException(\"incorrect for de_CH: \" + expected + \" vs. actual \" + actual);\n-        }\n+        assertEquals(expected, actual, \"incorrect number elements for de_CH\");\n","filename":"test\/jdk\/java\/text\/Format\/NumberFormat\/Bug8132125.java","additions":15,"deletions":8,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -28,0 +28,1 @@\n+ *          Tests both COMPAT and CLDR data.\n@@ -29,2 +30,2 @@\n- * @run main\/othervm -Djava.locale.providers=COMPAT CurrencyFormat COMPAT\n- * @run main\/othervm -Djava.locale.providers=CLDR CurrencyFormat CLDR\n+ * @run junit\/othervm -Djava.locale.providers=COMPAT CurrencyFormat\n+ * @run junit\/othervm -Djava.locale.providers=CLDR CurrencyFormat\n@@ -35,0 +36,3 @@\n+import java.io.IOException;\n+import java.text.ParseException;\n+import java.util.ArrayList;\n@@ -43,0 +47,7 @@\n+import java.util.stream.Stream;\n+\n+import org.junit.jupiter.params.ParameterizedTest;\n+import org.junit.jupiter.params.provider.Arguments;\n+import org.junit.jupiter.params.provider.MethodSource;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n@@ -46,1 +57,4 @@\n-    private static boolean isCompat;\n+    \/\/ Expected data is switched depending on COMPAT or CLDR\n+    \/\/ currencySymbolsTest() is only ran for COMPAT\n+    private static final boolean isCompat =\n+            \"COMPAT\".equals(System.getProperty(\"java.locale.providers\"));\n@@ -48,4 +62,15 @@\n-    public static void main(String[] args) throws Exception {\n-        isCompat = \"COMPAT\".equals(args[0]);\n-        testFormatting();\n-        testSymbols();\n+    \/\/ Tests the formatting of data for COMPAT + CLDR under various currencies\n+    \/\/ Using a NumberFormat generated by getCurrencyInstance()\n+    @ParameterizedTest\n+    @MethodSource(\"currencyFormatDataProvider\")\n+    public void currencyFormatTest(String expected, Currency currency,\n+                                   NumberFormat format, Locale locale) {\n+        if (currency != null) {\n+            format.setCurrency(currency);\n+            int digits = currency.getDefaultFractionDigits();\n+            format.setMinimumFractionDigits(digits);\n+            format.setMaximumFractionDigits(digits);\n+        }\n+        String result = format.format(1234.56);\n+        assertEquals(expected, result, String.format(\"Failed with locale: %s%s\",\n+                locale, (currency == null ? \", default currency\" : (\", currency: \" + currency))));\n@@ -54,2 +79,4 @@\n-    static void testFormatting() {\n-        boolean failed = false;\n+    \/\/ Generate a combination of expected data for 1234.56 formatted\n+    \/\/ under various currencies\/locale provider\/locale\n+    private static Stream<Arguments> currencyFormatDataProvider() {\n+        ArrayList<Arguments> data = new ArrayList<Arguments>();\n@@ -57,7 +84,7 @@\n-            Locale.US,\n-            Locale.JAPAN,\n-            Locale.GERMANY,\n-            Locale.ITALY,\n-            Locale.of(\"it\", \"IT\", \"EURO\"),\n-            Locale.forLanguageTag(\"de-AT\"),\n-            Locale.forLanguageTag(\"fr-CH\"),\n+                Locale.US,\n+                Locale.JAPAN,\n+                Locale.GERMANY,\n+                Locale.ITALY,\n+                Locale.of(\"it\", \"IT\", \"EURO\"),\n+                Locale.forLanguageTag(\"de-AT\"),\n+                Locale.forLanguageTag(\"fr-CH\"),\n@@ -66,5 +93,5 @@\n-            null,\n-            Currency.getInstance(\"USD\"),\n-            Currency.getInstance(\"JPY\"),\n-            Currency.getInstance(\"DEM\"),\n-            Currency.getInstance(\"EUR\"),\n+                null,\n+                Currency.getInstance(\"USD\"),\n+                Currency.getInstance(\"JPY\"),\n+                Currency.getInstance(\"DEM\"),\n+                Currency.getInstance(\"EUR\"),\n@@ -72,8 +99,8 @@\n-        String[][] expecteds = {\n-            {\"$1,234.56\", \"$1,234.56\", \"JPY1,235\", \"DEM1,234.56\", \"EUR1,234.56\"},\n-            {\"\\uFFE51,235\", \"USD1,234.56\", \"\\uFFE51,235\", \"DEM1,234.56\", \"EUR1,234.56\"},\n-            {\"1.234,56 \\u20AC\", \"1.234,56 USD\", \"1.235 JPY\", \"1.234,56 DM\", \"1.234,56 \\u20AC\"},\n-            {\"\\u20AC 1.234,56\", \"USD 1.234,56\", \"JPY 1.235\", \"DEM 1.234,56\", \"\\u20AC 1.234,56\"},\n-            {\"\\u20AC 1.234,56\", \"USD 1.234,56\", \"JPY 1.235\", \"DEM 1.234,56\", \"\\u20AC 1.234,56\"},\n-            {\"\\u20AC 1.234,56\", \"USD 1.234,56\", \"JPY 1.235\", \"DEM 1.234,56\", \"\\u20AC 1.234,56\"},\n-            {\"SFr. 1'234.56\", \"USD 1'234.56\", \"JPY 1'235\", \"DEM 1'234.56\", \"EUR 1'234.56\"},\n+        String[][] expectedCOMPATData = {\n+                {\"$1,234.56\", \"$1,234.56\", \"JPY1,235\", \"DEM1,234.56\", \"EUR1,234.56\"},\n+                {\"\\uFFE51,235\", \"USD1,234.56\", \"\\uFFE51,235\", \"DEM1,234.56\", \"EUR1,234.56\"},\n+                {\"1.234,56 \\u20AC\", \"1.234,56 USD\", \"1.235 JPY\", \"1.234,56 DM\", \"1.234,56 \\u20AC\"},\n+                {\"\\u20AC 1.234,56\", \"USD 1.234,56\", \"JPY 1.235\", \"DEM 1.234,56\", \"\\u20AC 1.234,56\"},\n+                {\"\\u20AC 1.234,56\", \"USD 1.234,56\", \"JPY 1.235\", \"DEM 1.234,56\", \"\\u20AC 1.234,56\"},\n+                {\"\\u20AC 1.234,56\", \"USD 1.234,56\", \"JPY 1.235\", \"DEM 1.234,56\", \"\\u20AC 1.234,56\"},\n+                {\"SFr. 1'234.56\", \"USD 1'234.56\", \"JPY 1'235\", \"DEM 1'234.56\", \"EUR 1'234.56\"},\n@@ -81,8 +108,8 @@\n-        String[][] expecteds_cldr = {\n-            {\"$1,234.56\", \"$1,234.56\", \"\\u00a51,235\", \"DEM1,234.56\", \"\\u20ac1,234.56\"},\n-            {\"\\uFFE51,235\", \"$1,234.56\", \"\\uFFE51,235\", \"DEM1,234.56\", \"\\u20ac1,234.56\"},\n-            {\"1.234,56\\u00a0\\u20ac\", \"1.234,56\\u00a0$\", \"1.235\\u00a0\\u00a5\", \"1.234,56\\u00a0DM\", \"1.234,56\\u00a0\\u20ac\"},\n-            {\"1.234,56\\u00a0\\u20ac\", \"1.234,56\\u00a0USD\", \"1.235\\u00a0JPY\", \"1.234,56\\u00a0DEM\", \"1.234,56\\u00a0\\u20ac\"},\n-            {\"1.234,56\\u00a0\\u20ac\", \"1.234,56\\u00a0USD\", \"1.235\\u00a0JPY\", \"1.234,56\\u00a0DEM\", \"1.234,56\\u00a0\\u20ac\"},\n-            {\"\\u20ac\\u00a01.234,56\", \"$\\u00a01.234,56\", \"\\u00a5\\u00a01.235\", \"DM\\u00a01.234,56\", \"\\u20ac\\u00a01.234,56\"},\n-            {\"1\\u202f234.56\\u00a0CHF\", \"1\\u202f234.56\\u00a0$US\", \"1\\u202f235\\u00a0JPY\", \"1\\u202f234.56\\u00a0DEM\", \"1\\u202f234.56\\u00a0\\u20ac\"},\n+        String[][] expectedCLDRData = {\n+                {\"$1,234.56\", \"$1,234.56\", \"\\u00a51,235\", \"DEM1,234.56\", \"\\u20ac1,234.56\"},\n+                {\"\\uFFE51,235\", \"$1,234.56\", \"\\uFFE51,235\", \"DEM1,234.56\", \"\\u20ac1,234.56\"},\n+                {\"1.234,56\\u00a0\\u20ac\", \"1.234,56\\u00a0$\", \"1.235\\u00a0\\u00a5\", \"1.234,56\\u00a0DM\", \"1.234,56\\u00a0\\u20ac\"},\n+                {\"1.234,56\\u00a0\\u20ac\", \"1.234,56\\u00a0USD\", \"1.235\\u00a0JPY\", \"1.234,56\\u00a0DEM\", \"1.234,56\\u00a0\\u20ac\"},\n+                {\"1.234,56\\u00a0\\u20ac\", \"1.234,56\\u00a0USD\", \"1.235\\u00a0JPY\", \"1.234,56\\u00a0DEM\", \"1.234,56\\u00a0\\u20ac\"},\n+                {\"\\u20ac\\u00a01.234,56\", \"$\\u00a01.234,56\", \"\\u00a5\\u00a01.235\", \"DM\\u00a01.234,56\", \"\\u20ac\\u00a01.234,56\"},\n+                {\"1\\u202f234.56\\u00a0CHF\", \"1\\u202f234.56\\u00a0$US\", \"1\\u202f235\\u00a0JPY\", \"1\\u202f234.56\\u00a0DEM\", \"1\\u202f234.56\\u00a0\\u20ac\"},\n@@ -90,1 +117,0 @@\n-\n@@ -96,15 +122,2 @@\n-                String expected = isCompat ? expecteds[i][j] : expecteds_cldr[i][j];\n-                if (currency != null) {\n-                    format.setCurrency(currency);\n-                    int digits = currency.getDefaultFractionDigits();\n-                    format.setMinimumFractionDigits(digits);\n-                    format.setMaximumFractionDigits(digits);\n-                }\n-                String result = format.format(1234.56);\n-                if (!result.equals(expected)) {\n-                    failed = true;\n-                    System.out.println(\"FAIL: Locale \" + locale\n-                        + (currency == null ? \", default currency\" : (\", currency: \" + currency))\n-                        + \", expected: \" + expected\n-                        + \", actual: \" + result);\n-                }\n+                String expected = isCompat ? expectedCOMPATData[i][j] : expectedCLDRData[i][j];\n+                data.add(Arguments.of(expected, currency, format, locale));\n@@ -113,4 +126,1 @@\n-\n-        if (failed) {\n-            throw new RuntimeException();\n-        }\n+        return data.stream();\n@@ -119,1 +129,5 @@\n-    static void testSymbols() throws Exception {\n+    \/\/ Compares the expected currency symbol of a locale to the value returned by\n+    \/\/ DecimalFormatSymbols.getCurrencySymbol().\n+    @ParameterizedTest\n+    @MethodSource(\"currencySymbolsDataProvider\")\n+    public void currencySymbolsTest(String expected, Locale locale) throws ParseException {\n@@ -121,2 +135,1 @@\n-            \/\/ For COMPAT only.\n-            return;\n+            return; \/\/ For COMPAT only.\n@@ -124,0 +137,13 @@\n+        if (expected == null) {\n+            System.out.println(\"Warning: No expected currency symbol defined for locale \" + locale);\n+        } else {\n+            \/\/ Reserved for when a currency will change its symbol at a given time in the future\n+            if (expected.contains(\";\")) {\n+                expected = getFutureSymbol(expected);\n+            }\n+            DecimalFormatSymbols symbols = DecimalFormatSymbols.getInstance(locale);\n+            String result = symbols.getCurrencySymbol();\n+            assertEquals(expected, result, \"Wrong currency symbol for locale \" +\n+                        locale + \", expected: \" + expected + \", got: \" + result);\n+        }\n+    }\n@@ -125,1 +151,6 @@\n-        FileInputStream stream = new FileInputStream(new File(System.getProperty(\"test.src\", \".\"), \"CurrencySymbols.properties\"));\n+    \/\/ Grabs the custom CurrencySymbols.properties and loads the file into a Properties\n+    \/\/ instance. Building the data set, which consists of the currency symbol for the locale.\n+    private static Stream<Arguments> currencySymbolsDataProvider() throws IOException {\n+        ArrayList<Arguments> data = new ArrayList<Arguments>();\n+        FileInputStream stream = new FileInputStream(new File(\n+                System.getProperty(\"test.src\", \".\"), \"CurrencySymbols.properties\"));\n@@ -128,2 +159,0 @@\n-        SimpleDateFormat format = null;\n-\n@@ -131,4 +160,1 @@\n-        for (int i = 0; i < locales.length; i++) {\n-            Locale locale = locales[i];\n-            DecimalFormatSymbols symbols = DecimalFormatSymbols.getInstance(locale);\n-            String result = symbols.getCurrencySymbol();\n+        for (Locale locale : locales) {\n@@ -136,0 +162,4 @@\n+            data.add(Arguments.of(expected, locale));\n+        }\n+        return data.stream();\n+    }\n@@ -137,25 +167,11 @@\n-            if (expected == null) {\n-                System.out.println(\"Warning: No expected currency symbol defined for locale \" + locale);\n-            } else {\n-                    if (expected.contains(\";\")) {\n-                        StringTokenizer tokens = new StringTokenizer(expected, \";\");\n-                        int tokensCount = tokens.countTokens();\n-\n-                        if (tokensCount == 3) {\n-                            expected = tokens.nextToken();\n-                            if (format == null) {\n-                                format = new SimpleDateFormat(\"yyyy-MM-dd-HH-mm-ss\", Locale.US);\n-                                format.setTimeZone(TimeZone.getTimeZone(\"GMT\"));\n-                                format.setLenient(false);\n-                            }\n-\n-                            if (format.parse(tokens.nextToken()).getTime() < System.currentTimeMillis()) {\n-                                expected = tokens.nextToken();\n-                            }\n-                        }\n-                    }\n-\n-                    if (!expected.equals(result)) {\n-                        throw new RuntimeException(\"Wrong currency symbol for locale \" +\n-                            locale + \", expected: \" + expected + \", got: \" + result);\n-                    }\n+    \/\/ Utility to grab the future symbol if in the right format and date cut-over allows\n+    private static String getFutureSymbol(String expected) throws ParseException {\n+        StringTokenizer tokens = new StringTokenizer(expected, \";\");\n+        int tokensCount = tokens.countTokens();\n+        if (tokensCount == 3) {\n+            expected = tokens.nextToken();\n+            SimpleDateFormat format = new SimpleDateFormat(\"yyyy-MM-dd-HH-mm-ss\", Locale.US);\n+            format.setTimeZone(TimeZone.getTimeZone(\"GMT\"));\n+            format.setLenient(false);\n+            if (format.parse(tokens.nextToken()).getTime() < System.currentTimeMillis()) {\n+                expected = tokens.nextToken();\n@@ -164,0 +180,1 @@\n+        return expected;\n","filename":"test\/jdk\/java\/text\/Format\/NumberFormat\/CurrencyFormat.java","additions":109,"deletions":92,"binary":false,"changes":201,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,1 +24,1 @@\n-\/**\n+\/*\n@@ -27,1 +27,0 @@\n- * @summary Currency decimal marker incorrect for Peru.\n@@ -29,1 +28,2 @@\n- * @run main\/othervm -Djava.locale.providers=JRE TestPeruCurrencyFormat\n+ * @summary Currency decimal marker incorrect for Peru (COMPAT).\n+ * @run junit\/othervm -Djava.locale.providers=COMPAT TestPeruCurrencyFormat\n@@ -35,0 +35,4 @@\n+import org.junit.jupiter.api.Test;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+\n@@ -37,1 +41,3 @@\n-    public static void main(String[] args) {\n+    \/\/ Confirm correct decimal marker for Peru locale on COMPAT\n+    @Test\n+    public void peruDecimalMarketCOMPAT() {\n@@ -42,4 +48,2 @@\n-\n-        if (!s.equals(expected)) {\n-            throw new RuntimeException(\"Currency format for Peru failed, expected \" + expected + \", got \" + s);\n-        }\n+        assertEquals(expected, s,\n+                \"Currency format for Peru failed, expected \" + expected + \", got \" + s);\n","filename":"test\/jdk\/java\/text\/Format\/NumberFormat\/TestPeruCurrencyFormat.java","additions":13,"deletions":9,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -41,1 +41,1 @@\n-    static final String datafile = \"tablea1.txt\";\n+    static final String datafile = \"ISO4217-list-one.txt\";\n","filename":"test\/jdk\/java\/util\/Currency\/CheckDataVersion.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,1 +28,1 @@\n- *      8264792\n+ *      8264792 8334653\n@@ -62,1 +62,1 @@\n-    \/\/ 'tablea1.txt' should be up-to-date before testing\n+    \/\/ 'ISO4217-list-one.txt' should be up-to-date before testing\n","filename":"test\/jdk\/java\/util\/Currency\/CurrencyTest.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -3,2 +3,2 @@\n-# Amendments up until ISO 4217 AMENDMENT NUMBER 176\n-#   (As of 06 December 2023)\n+# Amendments up until ISO 4217 AMENDMENT NUMBER 177\n+#   (As of 20 June 2024)\n@@ -9,1 +9,1 @@\n-DATAVERSION=176\n+DATAVERSION=177\n@@ -279,1 +279,1 @@\n-ZW\tZWL\t932\t2\n+ZW\tZWG\t924\t2\n","filename":"test\/jdk\/java\/util\/Currency\/ISO4217-list-one.txt","additions":4,"deletions":4,"binary":false,"changes":8,"previous_filename":"test\/jdk\/java\/util\/Currency\/tablea1.txt","status":"renamed"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,1 +28,1 @@\n- *      8208746 8209775 8264792 8274658 8283277 8296239 8321480\n+ *      8208746 8209775 8264792 8274658 8283277 8296239 8321480 8334653\n@@ -63,1 +63,2 @@\n- * based on ISO 4217. The golden-data file (ISO 4217 data) 'tablea1.txt' has the following\n+ * based on ISO 4217. The golden-data file, 'ISO4217-list-one.txt', based on the\n+ * â€œList one: Currency, fund and precious metal codesâ€ has the following\n@@ -71,1 +72,1 @@\n-            \"test.src\", \".\"), \"tablea1.txt\");\n+            \"test.src\", \".\"), \"ISO4217-list-one.txt\");\n@@ -92,1 +93,1 @@\n-                    + \"YUM-ZMK-ZWD-ZWN-ZWR\";\n+                    + \"YUM-ZMK-ZWD-ZWL-ZWN-ZWR\";\n","filename":"test\/jdk\/java\/util\/Currency\/ValidateISO4217.java","additions":6,"deletions":5,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n- *      8327631\n+ *      8327631 8332424 8334418\n@@ -30,1 +30,1 @@\n- *          (LSR Revision: 2024-03-07) with Locale and Locale.LanguageRange\n+ *          (LSR Revision: 2024-06-14) with Locale and Locale.LanguageRange\n","filename":"test\/jdk\/java\/util\/Locale\/LanguageSubtagRegistryTest.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,1 +26,1 @@\n- * @bug 4354216 8213127\n+ * @bug 4354216 8213127 8334333\n@@ -35,0 +35,1 @@\n+ *        jdk.test.lib.Platform\n@@ -53,0 +54,2 @@\n+import jdk.test.lib.Platform;\n+import jtreg.SkippedException;\n@@ -56,0 +59,3 @@\n+        if (Platform.isRoot() && !Platform.isWindows()) {\n+            throw new SkippedException(\"Unable to create an unreadable properties file.\");\n+        }\n@@ -101,1 +107,1 @@\n-        if(path.toFile().exists()) {\n+        if (path.toFile().exists()) {\n","filename":"test\/jdk\/java\/util\/ResourceBundle\/Control\/MissingResourceCauseTestRun.java","additions":9,"deletions":3,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2004, 2013, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2004, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,0 +34,1 @@\n+import java.util.concurrent.Executors;\n@@ -48,8 +49,9 @@\n-        final ConcurrentHashMap<Integer, Integer> m = new ConcurrentHashMap<>();\n-        final ThreadLocalRandom rnd = ThreadLocalRandom.current();\n-        final int nCPU = Runtime.getRuntime().availableProcessors();\n-        final int minWorkers = 2;\n-        final int maxWorkers = Math.max(minWorkers, Math.min(32, nCPU));\n-        final int nWorkers = rnd.nextInt(minWorkers, maxWorkers + 1);\n-        final int sizePerWorker = 1024;\n-        final int maxSize = nWorkers * sizePerWorker;\n+        try (var executor = Executors.newCachedThreadPool()) {\n+            final ConcurrentHashMap<Integer, Integer> m = new ConcurrentHashMap<>();\n+            final ThreadLocalRandom rnd = ThreadLocalRandom.current();\n+            final int nCPU = Runtime.getRuntime().availableProcessors();\n+            final int minWorkers = 2;\n+            final int maxWorkers = Math.max(minWorkers, Math.min(32, nCPU));\n+            final int nWorkers = rnd.nextInt(minWorkers, maxWorkers + 1);\n+            final int sizePerWorker = 1024;\n+            final int maxSize = nWorkers * sizePerWorker;\n@@ -57,3 +59,3 @@\n-        \/\/ The foreman busy-checks that the size of the arrays obtained\n-        \/\/ from the keys and values views grows monotonically until it\n-        \/\/ reaches the maximum size.\n+            \/\/ The foreman busy-checks that the size of the arrays obtained\n+            \/\/ from the keys and values views grows monotonically until it\n+            \/\/ reaches the maximum size.\n@@ -61,4 +63,4 @@\n-        \/\/ NOTE: these size constraints are not specific to toArray and are\n-        \/\/ applicable to any form of traversal of the collection views\n-        CompletableFuture<?> foreman = CompletableFuture.runAsync(new Runnable() {\n-            private int prevSize = 0;\n+            \/\/ NOTE: these size constraints are not specific to toArray and are\n+            \/\/ applicable to any form of traversal of the collection views\n+            CompletableFuture<?> foreman = CompletableFuture.runAsync(new Runnable() {\n+                private int prevSize = 0;\n@@ -66,9 +68,9 @@\n-            private boolean checkProgress(Object[] a) {\n-                int size = a.length;\n-                if (size < prevSize || size > maxSize)\n-                    throw new AssertionError(\n-                        String.format(\"prevSize=%d size=%d maxSize=%d\",\n-                                      prevSize, size, maxSize));\n-                prevSize = size;\n-                return size == maxSize;\n-            }\n+                private boolean checkProgress(Object[] a) {\n+                    int size = a.length;\n+                    if (size < prevSize || size > maxSize)\n+                        throw new AssertionError(\n+                                String.format(\"prevSize=%d size=%d maxSize=%d\",\n+                                        prevSize, size, maxSize));\n+                    prevSize = size;\n+                    return size == maxSize;\n+                }\n@@ -76,10 +78,10 @@\n-            public void run() {\n-                Integer[] empty = new Integer[0];\n-                for (;;)\n-                    if (checkProgress(m.values().toArray())\n-                        & checkProgress(m.keySet().toArray())\n-                        & checkProgress(m.values().toArray(empty))\n-                        & checkProgress(m.keySet().toArray(empty)))\n-                        return;\n-            }\n-        });\n+                public void run() {\n+                    Integer[] empty = new Integer[0];\n+                    for (; ; )\n+                        if (checkProgress(m.values().toArray())\n+                                & checkProgress(m.keySet().toArray())\n+                                & checkProgress(m.values().toArray(empty))\n+                                & checkProgress(m.keySet().toArray(empty)))\n+                            return;\n+                }\n+            }, executor);\n@@ -87,9 +89,9 @@\n-        \/\/ Each worker puts globally unique keys into the map\n-        List<CompletableFuture<?>> workers =\n-            IntStream.range(0, nWorkers)\n-            .mapToObj(w -> (Runnable) () -> {\n-                for (int i = 0, o = w * sizePerWorker; i < sizePerWorker; i++)\n-                    m.put(o + i, i);\n-            })\n-            .map(CompletableFuture::runAsync)\n-            .collect(Collectors.toList());\n+            \/\/ Each worker puts globally unique keys into the map\n+            List<CompletableFuture<?>> workers =\n+                    IntStream.range(0, nWorkers)\n+                            .mapToObj(w -> (Runnable) () -> {\n+                                for (int i = 0, o = w * sizePerWorker; i < sizePerWorker; i++)\n+                                    m.put(o + i, i);\n+                            })\n+                            .map(r -> CompletableFuture.runAsync(r, executor))\n+                            .collect(Collectors.toList());\n@@ -97,3 +99,4 @@\n-        \/\/ Wait for workers and foreman to complete\n-        workers.forEach(CompletableFuture<?>::join);\n-        foreman.join();\n+            \/\/ Wait for workers and foreman to complete\n+            workers.forEach(CompletableFuture<?>::join);\n+            foreman.join();\n+        }\n","filename":"test\/jdk\/java\/util\/concurrent\/ConcurrentHashMap\/ToArray.java","additions":50,"deletions":47,"binary":false,"changes":97,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+ * @modules java.base\/java.util.concurrent:open\n@@ -30,0 +31,2 @@\n+import java.lang.invoke.MethodHandles;\n+import java.lang.invoke.VarHandle;\n@@ -31,0 +34,1 @@\n+import java.util.concurrent.LinkedTransferQueue;\n@@ -36,2 +40,20 @@\n-    private static void testFairness(boolean fair,\n-                                     final BlockingQueue<Integer> q)\n+    private final static VarHandle underlyingTransferQueueAccess;\n+\n+    static {\n+        try {\n+            underlyingTransferQueueAccess =\n+                MethodHandles.privateLookupIn(\n+                    SynchronousQueue.class,\n+                    MethodHandles.lookup()\n+                ).findVarHandle(\n+                    SynchronousQueue.class,\n+                    \"transferer\",\n+                    Class.forName(SynchronousQueue.class.getName() + \"$Transferer\")\n+            );\n+        } catch (Exception ex) {\n+            throw new ExceptionInInitializerError(ex);\n+        }\n+    }\n+\n+\n+    private static void testFairness(boolean fair, final SynchronousQueue<Integer> q)\n@@ -40,0 +62,3 @@\n+        final LinkedTransferQueue<Integer> underlying =\n+            (LinkedTransferQueue<Integer>)underlyingTransferQueueAccess.get(q);\n+\n@@ -56,2 +81,2 @@\n-            \/\/ Probably unnecessary, but should be bullet-proof\n-            while (t.getState() == Thread.State.RUNNABLE)\n+            \/\/ Wait until previous put:ing thread is provably parked\n+            while (underlying.size() < (i + 1))\n@@ -59,0 +84,3 @@\n+\n+            if (underlying.size() > (i + 1))\n+                throw new Error(\"Unexpected number of waiting producers: \" + i);\n@@ -71,3 +99,3 @@\n-        testFairness(false, new SynchronousQueue<Integer>());\n-        testFairness(false, new SynchronousQueue<Integer>(false));\n-        testFairness(true,  new SynchronousQueue<Integer>(true));\n+        testFairness(false, new SynchronousQueue<>());\n+        testFairness(false, new SynchronousQueue<>(false));\n+        testFairness(true,  new SynchronousQueue<>(true));\n","filename":"test\/jdk\/java\/util\/concurrent\/SynchronousQueue\/Fairness.java","additions":35,"deletions":7,"binary":false,"changes":42,"status":"modified"},{"patch":"@@ -669,0 +669,1 @@\n+                \"SynchronousQueue20Test\",\n","filename":"test\/jdk\/java\/util\/concurrent\/tck\/JSR166TestCase.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -0,0 +1,95 @@\n+\/*\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * This file is available under and governed by the GNU General Public\n+ * License version 2 only, as published by the Free Software Foundation.\n+ * However, the following notice accompanied the original version of this\n+ * file:\n+ *\n+ * Written by Doug Lea with assistance from members of JCP JSR-166\n+ * Expert Group and released to the public domain, as explained at\n+ * http:\/\/creativecommons.org\/publicdomain\/zero\/1.0\/\n+ * Other contributors include Andrew Wright, Jeffrey Hayes,\n+ * Pat Fisher, Mike Judd.\n+ *\/\n+\n+import junit.framework.Test;\n+\n+import java.util.Collections;\n+import java.util.Map;\n+import java.util.WeakHashMap;\n+import java.util.concurrent.Executors;\n+import java.util.concurrent.SynchronousQueue;\n+import java.util.concurrent.TimeUnit;\n+\n+public class SynchronousQueue20Test extends JSR166TestCase {\n+\n+    public static void main(String[] args) {\n+        main(suite(), args);\n+    }\n+\n+    public static Test suite() {\n+        return newTestSuite(SynchronousQueue20Test.class);\n+    }\n+\n+    public void testFairDoesntLeak() throws InterruptedException {\n+        assertDoesntLeak(new SynchronousQueue<>(true));\n+    }\n+\n+    public void testUnfairDoesntLeak() throws InterruptedException {\n+        assertDoesntLeak(new SynchronousQueue<>(false));\n+    }\n+\n+    private void assertDoesntLeak(SynchronousQueue<Object> queue) throws InterruptedException {\n+        final int NUMBER_OF_ITEMS = 250;\n+        final int ROUND_WAIT_MILLIS = 50;\n+\n+        class Item {}\n+        final Map<Item, Void> survivors =\n+                Collections.synchronizedMap(WeakHashMap.newWeakHashMap(NUMBER_OF_ITEMS));\n+\n+        try (var executor = Executors.newVirtualThreadPerTaskExecutor()) {\n+            for(int i = 0;i < NUMBER_OF_ITEMS;++i) {\n+                executor.submit(() -> {\n+                    var item = new Item();\n+                    survivors.put(item, null);\n+                    queue.put(item);\n+                    return null;\n+                });\n+\n+                executor.submit(() -> {\n+                    queue.take();\n+                    return null;\n+                });\n+            }\n+        } \/\/ Close waits until all tasks are done\n+\n+        while(!survivors.isEmpty()) {\n+            System.gc();\n+            Thread.sleep(ROUND_WAIT_MILLIS); \/\/ We don't expect interruptions\n+        }\n+\n+        assertTrue(queue.isEmpty()); \/\/ Make sure that the queue survives until the end\n+    }\n+\n+}\n","filename":"test\/jdk\/java\/util\/concurrent\/tck\/SynchronousQueue20Test.java","additions":95,"deletions":0,"binary":false,"changes":95,"status":"added"},{"patch":"@@ -655,1 +655,0 @@\n-\n","filename":"test\/jdk\/java\/util\/concurrent\/tck\/SynchronousQueueTest.java","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -104,2 +104,1 @@\n-        \/\/ JDK-8200530: '\\r' support in Manifest\/Attributes will be addressed separately\n-        \/\/ testCustomMultiReleaseValue(\"true\\rOther: value\", true);\n+        testCustomMultiReleaseValue(\"true\\rOther: value\", true);\n@@ -111,2 +110,0 @@\n-\n-        \/\/ JDK-8200530: '\\r' support in Manifest\/Attributes will be addressed separately\n","filename":"test\/jdk\/java\/util\/jar\/JarFile\/mrjar\/MultiReleaseJarAPI.java","additions":2,"deletions":5,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -89,1 +89,1 @@\n-        return (int) Math.ceil(TIMEOUT_FACTOR * count);\n+        return Math.min(count, (int) Math.ceil(TIMEOUT_FACTOR * count));\n@@ -214,1 +214,1 @@\n-        if (fooRef.get() != fooChild.getParent()) {\n+        if (!fooRef.refersTo(fooChild.getParent())) {\n@@ -219,1 +219,1 @@\n-        if (barRef.get() != barChild.getParent()) {\n+        if (!barRef.refersTo(barChild.getParent())) {\n@@ -224,1 +224,1 @@\n-        int max = adjustCount(3);\n+        int max = adjustCount(6);\n@@ -226,1 +226,1 @@\n-        while ((ref2 = queue.poll()) == null) {\n+        while ((ref2 = queue.remove(500)) == null) {\n@@ -228,1 +228,0 @@\n-            Thread.sleep(1000);\n@@ -350,1 +349,1 @@\n-                if (ref2.get() != null) {\n+                if (!ref2.refersTo(null)) {\n","filename":"test\/jdk\/java\/util\/logging\/LogManager\/Configuration\/updateConfiguration\/HandlersOnComplexResetUpdate.java","additions":7,"deletions":8,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -89,1 +89,1 @@\n-        return (int) Math.ceil(TIMEOUT_FACTOR * count);\n+        return Math.min(count, (int) Math.ceil(TIMEOUT_FACTOR * count));\n@@ -214,1 +214,1 @@\n-        if (fooRef.get() != fooChild.getParent()) {\n+        if (!fooRef.refersTo(fooChild.getParent())) {\n@@ -219,1 +219,1 @@\n-        if (barRef.get() != barChild.getParent()) {\n+        if (!barRef.refersTo(barChild.getParent())) {\n@@ -224,1 +224,1 @@\n-        int max = adjustCount(3);\n+        int max = adjustCount(6);\n@@ -226,1 +226,1 @@\n-        while ((ref2 = queue.poll()) == null) {\n+        while ((ref2 = queue.remove(500)) == null) {\n@@ -228,1 +228,0 @@\n-            Thread.sleep(1000);\n@@ -338,1 +337,1 @@\n-                if (ref2.get() != null) {\n+                if (!ref2.refersTo(null)) {\n","filename":"test\/jdk\/java\/util\/logging\/LogManager\/Configuration\/updateConfiguration\/HandlersOnComplexUpdate.java","additions":7,"deletions":8,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2006, 2017, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2006, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,1 +24,17 @@\n-\/**\n+import java.io.BufferedOutputStream;\n+import java.io.DataInputStream;\n+import java.io.IOException;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.util.jar.JarEntry;\n+import java.util.jar.JarFile;\n+import java.util.jar.JarOutputStream;\n+\n+import org.junit.jupiter.api.Assertions;\n+import org.junit.jupiter.api.Test;\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertNotNull;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+\n+\/*\n@@ -27,4 +43,0 @@\n- * @library \/test\/lib\n- * @build jdk.test.lib.Platform\n- *        jdk.test.lib.util.FileUtils\n- * @run main ReadLongZipFileName\n@@ -32,0 +44,1 @@\n+ * @run junit ReadLongZipFileName\n@@ -33,6 +46,0 @@\n-\n-import java.io.*;\n-import java.util.jar.*;\n-import java.util.Stack;\n-import jdk.test.lib.util.FileUtils;\n-\n@@ -40,1 +47,3 @@\n-    private static String entryName = \"testFile.txt\";;\n+    private static final String ENTRY_NAME = \"testFile.txt\";\n+    private static final String LONG_DIR_NAME = \"abcdefghijklmnopqrstuvwx\"; \/\/ 24 chars\n+    private static final String JAR_FILE_NAME = \"areallylargejarfilename.jar\"; \/\/ 27 chars\n@@ -42,8 +51,19 @@\n-    public static void realMain(String args[]) {\n-        String longDirName = \"abcdefghijklmnopqrstuvwx\"; \/\/ 24 chars.\n-        String jarFileName = \"areallylargejarfilename.jar\";    \/\/ 27 chars.\n-        File file = null;\n-        File myJarFile = null;\n-        int currentFileLength = 0;\n-        int minRequiredLength = 600; \/\/ long enough to definitely fail.\n-        Stack<File> directories = new Stack<File>();\n+    \/*\n+     * Creates a jar file at a path whose path name length and jar file name length\n+     * combined is large. Then use the java.util.jar.JarFile APIs to open and read the jar file\n+     * to verify the APIs work against those jar\/zip files.\n+     *\/\n+    @Test\n+    public void testOpenAndReadJarFile() throws Exception {\n+        int minRequiredPathLength = 600; \/\/ long enough to definitely fail.\n+        Path tmpDir = Files.createTempDirectory(Path.of(\".\"), \"ReadLongZipFileName-test\")\n+                .normalize().toAbsolutePath();\n+        \/\/ Create a directory structure long enough that the filename will\n+        \/\/ put us over the minRequiredLength.\n+        int currentPathLength = 0;\n+        Path jarFileDir = tmpDir;\n+        do {\n+            jarFileDir = jarFileDir.resolve(LONG_DIR_NAME);\n+            Files.createDirectories(jarFileDir);\n+            currentPathLength = jarFileDir.toFile().getCanonicalPath().length();\n+        } while (currentPathLength < (minRequiredPathLength - JAR_FILE_NAME.length()));\n@@ -51,19 +71,7 @@\n-        String filename = \".\" + File.separator;\n-        try {\n-            \/\/ Create a directory structure long enough that the filename will\n-            \/\/ put us over the minRequiredLength.\n-            do {\n-                filename = filename + longDirName + File.separator;\n-                file = new File(filename);\n-                file.mkdir();\n-                currentFileLength = file.getCanonicalPath().length();\n-                directories.push(file);\n-            } while (currentFileLength < (minRequiredLength - jarFileName.length()));\n-\n-            \/\/ Create a new Jar file: use jar instead of zip to make sure long\n-            \/\/ names work for both zip and jar subclass.\n-            filename = filename + jarFileName;\n-            JarOutputStream out = new JarOutputStream(\n-                new BufferedOutputStream(\n-                    new FileOutputStream(filename.toString())));\n-            out.putNextEntry(new JarEntry(entryName));\n+        \/\/ Create a new Jar file: use jar instead of zip to make sure long\n+        \/\/ names work for both zip and jar subclass.\n+        Path jarFilePath = jarFileDir.resolve(JAR_FILE_NAME);\n+        System.out.println(\"creating a jar file at \" + jarFilePath);\n+        try (JarOutputStream out = new JarOutputStream(\n+                new BufferedOutputStream(Files.newOutputStream(jarFilePath)))) {\n+            out.putNextEntry(new JarEntry(ENTRY_NAME));\n@@ -71,8 +79,0 @@\n-            out.close();\n-            myJarFile = new File(filename.toString());\n-            currentFileLength = myJarFile.getCanonicalPath().length();\n-            if (!myJarFile.exists()) {\n-                fail(\"Jar file does not exist.\");\n-            }\n-        } catch (IOException e) {\n-            unexpected(e, \"Problem creating the Jar file.\");\n@@ -80,0 +80,2 @@\n+        assertTrue(Files.isRegularFile(jarFilePath),\n+                \"jar file \" + jarFilePath + \" does not exist or is not a file\");\n@@ -81,6 +83,4 @@\n-        try {\n-            JarFile readJarFile = new JarFile(myJarFile);\n-            JarEntry je = readJarFile.getJarEntry(entryName);\n-            check(je != null);\n-            DataInputStream dis = new DataInputStream(\n-                readJarFile.getInputStream(je));\n+        try (JarFile readJarFile = new JarFile(jarFilePath.toFile())) {\n+            JarEntry je = readJarFile.getJarEntry(ENTRY_NAME);\n+            assertNotNull(je, \"missing jar entry: \" + ENTRY_NAME + \" in jar file \" + jarFilePath);\n+            DataInputStream dis = new DataInputStream(readJarFile.getInputStream(je));\n@@ -88,1 +88,1 @@\n-            check(val == 1);\n+            assertEquals(1, val, \"unexpected byte \" + val + \" read from entry \" + ENTRY_NAME);\n@@ -91,1 +91,1 @@\n-                fail(\"Read past expected EOF\");\n+                Assertions.fail(\"Read past expected EOF\");\n@@ -93,20 +93,2 @@\n-                pass();\n-            }\n-            readJarFile.close();\n-            pass(\"Opened Jar file for reading with a name \" + currentFileLength\n-                 + \" characters long\");\n-        } catch (IOException e) {\n-            unexpected(e, \"Test failed - problem reading the Jar file back in.\");\n-        }\n-\n-        if (myJarFile != null) {\n-            check(myJarFile.delete());\n-        }\n-\n-        while (! directories.empty()) {\n-            File f = directories.pop();\n-            try {\n-                FileUtils.deleteFileWithRetry(f.toPath());\n-            } catch (IOException e) {\n-                unexpected(e, \"Fail to clean up directory, \" + f);\n-                break;\n+                \/\/ expected\n+                System.out.println(\"received the expected exception: \" + e);\n@@ -115,0 +97,2 @@\n+        System.out.println(\"Successfully opened and read contents from a jar file with a name \"\n+                + jarFilePath.toFile().getCanonicalPath().length() + \" characters long\");\n@@ -116,18 +100,0 @@\n-\n-    \/\/--------------------- Infrastructure ---------------------------\n-    static volatile int passed = 0, failed = 0;\n-    static void pass() {passed++;}\n-    static void pass(String msg) {System.out.println(msg); passed++;}\n-    static void fail() {failed++; Thread.dumpStack();}\n-    static void fail(String msg) {System.out.println(msg); fail();}\n-    static void unexpected(Throwable t) {failed++; t.printStackTrace();}\n-    static void unexpected(Throwable t, String msg) {\n-        System.out.println(msg); failed++; t.printStackTrace();}\n-    static void check(boolean cond) {if (cond) pass(); else fail();}\n-    static void equal(Object x, Object y) {\n-        if (x == null ? y == null : x.equals(y)) pass();\n-        else fail(x + \" not equal to \" + y);}\n-    public static void main(String[] args) throws Throwable {\n-        try {realMain(args);} catch (Throwable t) {unexpected(t);}\n-        System.out.println(\"\\nPassed = \" + passed + \" failed = \" + failed);\n-        if (failed > 0) throw new AssertionError(\"Some tests failed\");}\n","filename":"test\/jdk\/java\/util\/zip\/ZipFile\/ReadLongZipFileName.java","additions":60,"deletions":94,"binary":false,"changes":154,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2019, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2019, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,1 +29,1 @@\n-JAR=$(JAVABIN)\/jar \n+JAR=$(JAVABIN)\/jar\n","filename":"test\/jdk\/javax\/crypto\/SecretKeyFactory\/evilprov\/Makefile","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -174,1 +174,1 @@\n-                    \/\/ Error: Exception thrown by the agent : java.rmi.server.ExportException: Port already in use: 46481; nested exception is:\n+                    \/\/ Error: Exception thrown by the agent: java.rmi.server.ExportException: Port already in use: 46481; nested exception is:\n","filename":"test\/jdk\/javax\/management\/remote\/mandatory\/connection\/DefaultAgentFilterTest.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -0,0 +1,247 @@\n+\/*\n+ * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.nio.ByteBuffer;\n+import java.util.List;\n+import java.util.Objects;\n+\n+import javax.net.ssl.SNIHostName;\n+import javax.net.ssl.SNIMatcher;\n+import javax.net.ssl.SNIServerName;\n+import javax.net.ssl.SSLContext;\n+import javax.net.ssl.SSLEngine;\n+import javax.net.ssl.SSLEngineResult;\n+import javax.net.ssl.SSLEngineResult.HandshakeStatus;\n+import javax.net.ssl.SSLParameters;\n+import javax.net.ssl.StandardConstants;\n+\n+\/*\n+ * @test\n+ * @bug 8301686\n+ * @summary verifies that if the server rejects session resumption due to SNI\n+ *          mismatch, during TLS handshake, then the subsequent communication\n+ *          between the server and the client happens correctly without any\n+ *          errors\n+ * @library \/javax\/net\/ssl\/templates\n+ * @run main\/othervm -Djavax.net.debug=all\n+ *                   ServerNameRejectedTLSSessionResumption\n+ *\/\n+public class ServerNameRejectedTLSSessionResumption\n+        extends SSLContextTemplate {\n+\n+    private static final String CLIENT_REQUESTED_SNI = \"client.local\";\n+    \/\/ dummy host, no connection is attempted in this test\n+    private static final String PEER_HOST = \"foobar\";\n+    \/\/ dummy port, no connection is attempted in this test\n+    private static final int PEER_PORT = 12345;\n+\n+    public static void main(final String[] args) throws Exception {\n+        new ServerNameRejectedTLSSessionResumption().runTest();\n+    }\n+\n+    private void runTest() throws Exception {\n+        final SSLContext clientSSLContext = createClientSSLContext();\n+        final SSLContext serverSSLContext = createServerSSLContext();\n+        \/\/ create client and server SSLEngine(s)\n+        final SSLEngine clientEngine = createClientSSLEngine(clientSSLContext);\n+        \/\/ use a SNIMatcher on the server's SSLEngine which accepts the\n+        \/\/ SNI name presented by the client SSLEngine\n+        final SSLEngine serverEngine = createServerSSLEngine(serverSSLContext,\n+                new TestSNIMatcher(CLIENT_REQUESTED_SNI));\n+        \/\/ establish communication, which involves TLS handshake, between the\n+        \/\/ client and server engines. this communication expected to be\n+        \/\/ successful.\n+        communicate(clientEngine, serverEngine);\n+        \/\/ now that the communication has been successful, we expect the client\n+        \/\/ SSLContext's (internal) cache to have created and cached a\n+        \/\/ SSLSession against the peer host:port\n+\n+        \/\/ now create the SSLEngine(s) again with the same SSLContext\n+        \/\/ instances as before, so that the SSLContext instance attempts\n+        \/\/ to reuse the cached SSLSession against the peer host:port\n+        final SSLEngine secondClientEngine =\n+                createClientSSLEngine(clientSSLContext);\n+        \/\/ the newly created SSLEngine for the server will not use any\n+        \/\/ SNIMatcher so as to reject the session resumption (of the\n+        \/\/ cached SSLSession)\n+        final SSLEngine secondServerEngine =\n+                createServerSSLEngine(serverSSLContext, null);\n+        \/\/ attempt communication, which again involves TLS handshake\n+        \/\/ since these are new engine instances. The session resumption\n+        \/\/ should be rejected and a fresh session should get created and\n+        \/\/ communication should succeed without any errors\n+        communicate(secondClientEngine, secondServerEngine);\n+    }\n+\n+    private static void communicate(final SSLEngine clientEngine,\n+                                    final SSLEngine serverEngine)\n+            throws Exception {\n+\n+        final ByteBuffer msgFromClient =\n+                ByteBuffer.wrap(\"Hi Server, I'm Client\".getBytes());\n+        final ByteBuffer msgFromServer =\n+                ByteBuffer.wrap(\"Hello Client, I'm Server\".getBytes());\n+        final ByteBuffer clientBuffer = ByteBuffer.allocate(1 << 15);\n+        final ByteBuffer serverBuffer = ByteBuffer.allocate(1 << 15);\n+        \/*\n+         * For data transport, this test uses local ByteBuffers\n+         *\/\n+        final ByteBuffer clientToServerTransport =\n+                ByteBuffer.allocateDirect(1 << 16);\n+        final ByteBuffer serverToClientTransport =\n+                ByteBuffer.allocateDirect(1 << 16);\n+        boolean isClientToServer = true;\n+        while (true) {\n+            if (isClientToServer) {\n+                \/\/ send client's message over the transport, will initiate a\n+                \/\/ TLS handshake if necessary\n+                SSLEngineResult result = clientEngine.wrap(msgFromClient,\n+                        clientToServerTransport);\n+                \/\/ run any delegated tasks\n+                final HandshakeStatus hsStatus = checkAndRunTasks(clientEngine,\n+                        result.getHandshakeStatus());\n+                clientToServerTransport.flip(); \/\/ will now contain the\n+                \/\/ network data from\n+                \/\/ client to server\n+\n+                \/\/ read from the client generated network data into\n+                \/\/ server's buffer\n+                result = serverEngine.unwrap(clientToServerTransport,\n+                        serverBuffer);\n+                checkAndRunTasks(serverEngine, result.getHandshakeStatus());\n+                clientToServerTransport.compact();\n+\n+                if (hsStatus == HandshakeStatus.NEED_UNWRAP) {\n+                    isClientToServer = false;\n+                } else if (hsStatus == HandshakeStatus.FINISHED) {\n+                    break;\n+                } else if (hsStatus != HandshakeStatus.NEED_WRAP) {\n+                    throw new Exception(\"Unexpected handshake result \"\n+                            + result);\n+                }\n+            } else {\n+                \/\/ send server's message over the transport\n+                SSLEngineResult result = serverEngine.wrap(msgFromServer,\n+                        serverToClientTransport);\n+                \/\/ run any delegated tasks on the server side\n+                final HandshakeStatus hsStatus = checkAndRunTasks(serverEngine,\n+                        result.getHandshakeStatus());\n+                serverToClientTransport.flip(); \/\/ will now contain the\n+                \/\/ network data from\n+                \/\/ server to client\n+\n+                \/\/ read from the server generated network data into\n+                \/\/ client's buffer\n+                result = clientEngine.unwrap(serverToClientTransport,\n+                        clientBuffer);\n+                \/\/ run any delegated tasks on the client side\n+                checkAndRunTasks(clientEngine, result.getHandshakeStatus());\n+                serverToClientTransport.compact();\n+\n+                if (hsStatus == HandshakeStatus.NEED_UNWRAP) {\n+                    isClientToServer = true;\n+                } else if (hsStatus == HandshakeStatus.FINISHED) {\n+                    break;\n+                } else if (hsStatus != HandshakeStatus.NEED_WRAP) {\n+                    throw new Exception(\"Unexpected handshake result \"\n+                            + result);\n+                }\n+            }\n+        }\n+        serverEngine.wrap(msgFromServer, serverToClientTransport);\n+        serverToClientTransport.flip();\n+        clientEngine.unwrap(serverToClientTransport, clientBuffer);\n+        serverToClientTransport.compact();\n+    }\n+\n+    private static SSLEngine createServerSSLEngine(\n+            final SSLContext sslContext, final SNIMatcher sniMatcher) {\n+        final SSLEngine serverEngine = sslContext.createSSLEngine();\n+        serverEngine.setUseClientMode(false);\n+        if (sniMatcher != null) {\n+            final SSLParameters sslParameters =\n+                    serverEngine.getSSLParameters(); \/\/ returns a copy\n+            sslParameters.setSNIMatchers(List.of(sniMatcher));\n+            \/\/ use the updated params\n+            serverEngine.setSSLParameters(sslParameters);\n+        }\n+        return serverEngine;\n+    }\n+\n+    private static SSLEngine createClientSSLEngine(\n+            final SSLContext sslContext) {\n+        final SSLEngine clientEngine = sslContext.createSSLEngine(PEER_HOST,\n+                PEER_PORT);\n+        clientEngine.setUseClientMode(true);\n+        final SSLParameters params =\n+                clientEngine.getSSLParameters(); \/\/ returns a copy\n+        \/\/ setup SNI name that will be used by the client during TLS handshake\n+        params.setServerNames(List.of(new SNIHostName(CLIENT_REQUESTED_SNI)));\n+        clientEngine.setSSLParameters(params); \/\/ use the updated params\n+        return clientEngine;\n+    }\n+\n+    private static HandshakeStatus checkAndRunTasks(\n+            final SSLEngine engine, final HandshakeStatus handshakeStatus) {\n+        if (handshakeStatus != HandshakeStatus.NEED_TASK) {\n+            return handshakeStatus;\n+        }\n+        Runnable runnable;\n+        while ((runnable = engine.getDelegatedTask()) != null) {\n+            System.out.println(\"Running task \" + runnable);\n+            runnable.run();\n+        }\n+        return engine.getHandshakeStatus();\n+    }\n+\n+    private static final class TestSNIMatcher extends SNIMatcher {\n+\n+        private final String recognizedSNIServerName;\n+\n+        private TestSNIMatcher(final String recognizedSNIServerName) {\n+            super(StandardConstants.SNI_HOST_NAME);\n+            this.recognizedSNIServerName = recognizedSNIServerName;\n+        }\n+\n+        @Override\n+        public boolean matches(final SNIServerName clientRequestedSNI) {\n+            Objects.requireNonNull(clientRequestedSNI);\n+            System.out.println(\"Attempting SNI match against client\" +\n+                    \" request SNI name: \" + clientRequestedSNI +\n+                    \" against server recognized SNI name \"\n+                    + recognizedSNIServerName);\n+            if (!SNIHostName.class.isInstance(clientRequestedSNI)) {\n+                System.out.println(\"SNI match failed - client request\" +\n+                        \" SNI isn't a SNIHostName\");\n+                \/\/ we only support SNIHostName type\n+                return false;\n+            }\n+            final String requestedName =\n+                    ((SNIHostName) clientRequestedSNI).getAsciiName();\n+            final boolean matches =\n+                    recognizedSNIServerName.equals(requestedName);\n+            System.out.println(\"SNI match \" + (matches ? \"passed\" : \"failed\"));\n+            return matches;\n+        }\n+    }\n+}\n","filename":"test\/jdk\/javax\/net\/ssl\/SSLSession\/ServerNameRejectedTLSSessionResumption.java","additions":247,"deletions":0,"binary":false,"changes":247,"status":"added"},{"patch":"@@ -27,0 +27,1 @@\n+ * @key printer\n@@ -32,1 +33,0 @@\n- * @author prr\n","filename":"test\/jdk\/javax\/print\/DialogMargins.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+ * @key printer\n","filename":"test\/jdk\/javax\/print\/LookupServices.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -32,0 +32,1 @@\n+ * @key printer\n","filename":"test\/jdk\/javax\/print\/PrintServiceLookup\/GetPrintServices.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+ * key printer\n@@ -28,1 +29,0 @@\n- * @author jgodinez\n","filename":"test\/jdk\/javax\/print\/PrintSubInputStream\/Example.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+   @key printer\n","filename":"test\/jdk\/javax\/print\/ServiceUIPropBtnTest.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+  @key printer\n","filename":"test\/jdk\/javax\/print\/TextFlavorTest.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -24,1 +24,1 @@\n- * @test 1.3 01\/05\/11\n+ * @test\n","filename":"test\/jdk\/javax\/print\/attribute\/Chroma.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+ * @key printer\n","filename":"test\/jdk\/javax\/print\/attribute\/CollateAttr.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+ * @key printer\n","filename":"test\/jdk\/javax\/print\/attribute\/PSCopiesFlavorTest.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+ * @key printer\n","filename":"test\/jdk\/javax\/print\/attribute\/PrintResAttr.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -28,0 +28,1 @@\n+ * @key printer\n","filename":"test\/jdk\/javax\/print\/attribute\/ServiceDialogTest.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+ * @key printer\n","filename":"test\/jdk\/javax\/print\/attribute\/ServiceDialogValidateTest.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+ * @key printer\n","filename":"test\/jdk\/javax\/print\/attribute\/ServiceDlgPageRangeTest.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+ * @key printer\n","filename":"test\/jdk\/javax\/print\/attribute\/ServiceDlgSheetCollateTest.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -31,0 +31,1 @@\n+ * @key printer\n","filename":"test\/jdk\/javax\/print\/attribute\/Services_getDocFl.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -28,0 +28,1 @@\n+ * @key printer\n","filename":"test\/jdk\/javax\/print\/attribute\/SidesAttributeTest.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -28,0 +28,1 @@\n+ * @key printer\n","filename":"test\/jdk\/javax\/print\/attribute\/TestUnsupportedResolution.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+ * @key printer\n","filename":"test\/jdk\/javax\/print\/attribute\/autosense\/PrintAutoSenseData.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,0 +27,1 @@\n+import java.awt.EventQueue;\n@@ -30,0 +31,2 @@\n+import java.awt.event.MouseAdapter;\n+import java.awt.event.MouseEvent;\n@@ -49,7 +52,1 @@\n-        SwingUtilities.invokeAndWait(new Runnable() {\n-\n-            @Override\n-            public void run() {\n-                constructTestUI();\n-            }\n-        });\n+        SwingUtilities.invokeAndWait(PressedButtonRightClickTest::constructTestUI);\n@@ -64,0 +61,1 @@\n+        testRobot.delay(500);\n@@ -66,3 +64,5 @@\n-        test();\n-\n-        disposeTestUI();\n+        try {\n+            test();\n+        } finally {\n+            EventQueue.invokeAndWait(PressedButtonRightClickTest::disposeTestUI);\n+        }\n@@ -77,0 +77,1 @@\n+        System.out.println(\"press BUTTON1_DOWN_MASK\");\n@@ -79,1 +80,1 @@\n-        testRobot.delay(1000);\n+        testRobot.delay(500);\n@@ -82,0 +83,1 @@\n+        System.out.println(\"press BUTTON3_DOWN_MASK\");\n@@ -84,1 +86,1 @@\n-        testRobot.delay(1000);\n+        testRobot.delay(500);\n@@ -87,0 +89,1 @@\n+        System.out.println(\"release BUTTON3_DOWN_MASK\");\n@@ -89,1 +92,2 @@\n-        testRobot.delay(1000);\n+        testRobot.waitForIdle();\n+        testRobot.delay(500);\n@@ -93,0 +97,1 @@\n+        System.out.println(\"release BUTTON1_DOWN_MASK\");\n@@ -109,0 +114,26 @@\n+        myButton.addMouseListener(new MouseAdapter() {\n+            @Override\n+            public void mouseClicked(MouseEvent e) {\n+                System.out.println(e);\n+            }\n+\n+            @Override\n+            public void mousePressed(MouseEvent e) {\n+                System.out.println(e);\n+            }\n+\n+            @Override\n+            public void mouseReleased(MouseEvent e) {\n+                System.out.println(e);\n+            }\n+\n+            @Override\n+            public void mouseEntered(MouseEvent e) {\n+                System.out.println(e);\n+            }\n+\n+            @Override\n+            public void mouseExited(MouseEvent e) {\n+                System.out.println(e);\n+            }\n+        });\n","filename":"test\/jdk\/javax\/swing\/JButton\/PressedButtonRightClickTest.java","additions":45,"deletions":14,"binary":false,"changes":59,"status":"modified"},{"patch":"@@ -0,0 +1,72 @@\n+\/*\n+ * Copyright (c) 1999, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 4234034\n+ * @summary Tests NullPointerException when ToolTip invoked via keyboard\n+ * @key headful\n+ * @run main bug4234034\n+ *\/\n+\n+import java.awt.Robot;\n+import java.awt.event.KeyEvent;\n+import javax.swing.JButton;\n+import javax.swing.JFrame;\n+import javax.swing.SwingUtilities;\n+\n+public class bug4234034 {\n+    static JFrame frame;\n+    static JButton button;\n+\n+    public static void main(String args[]) throws Exception {\n+        Robot robot = new Robot();\n+        robot.setAutoDelay(100);\n+        try {\n+            SwingUtilities.invokeAndWait(() -> {\n+                frame = new JFrame(\"bug4323121\");\n+                button = new JButton(\"Press tab, then Ctrl+F1\");\n+                button.setToolTipText(\"Tooltip for button\");\n+                frame.getContentPane().add(button);\n+                frame.pack();\n+                frame.setLocationRelativeTo(null);\n+                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n+                frame.setVisible(true);\n+            });\n+            robot.waitForIdle();\n+            robot.delay(1000);\n+            robot.keyPress(KeyEvent.VK_TAB);\n+            robot.keyRelease(KeyEvent.VK_TAB);\n+            robot.keyPress(KeyEvent.VK_CONTROL);\n+            robot.keyPress(KeyEvent.VK_F1);\n+            robot.keyRelease(KeyEvent.VK_F1);\n+            robot.keyRelease(KeyEvent.VK_CONTROL);\n+        } finally {\n+            SwingUtilities.invokeAndWait(() -> {\n+                if (frame != null) {\n+                    frame.dispose();\n+                }\n+            });\n+        }\n+    }\n+}\n","filename":"test\/jdk\/javax\/swing\/JButton\/bug4234034.java","additions":72,"deletions":0,"binary":false,"changes":72,"status":"added"},{"patch":"@@ -0,0 +1,125 @@\n+\/*\n+ * Copyright (c) 2000, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 4323121\n+ * @summary Tests whether any button that extends JButton always\n+            returns true for isArmed()\n+ * @key headful\n+ * @run main bug4323121\n+ *\/\n+\n+import java.awt.Graphics;\n+import java.awt.Point;\n+import java.awt.Robot;\n+import java.awt.event.MouseEvent;\n+import java.awt.event.MouseListener;\n+import java.awt.event.MouseMotionListener;\n+import javax.swing.JButton;\n+import javax.swing.JFrame;\n+import javax.swing.SwingUtilities;\n+\n+public class bug4323121 {\n+\n+    static JFrame frame;\n+    static testButton button;\n+    static volatile Point pt;\n+    static volatile int buttonW;\n+    static volatile int buttonH;\n+    static volatile boolean failed = false;\n+\n+    public static void main(String[] args) throws Exception {\n+        Robot robot = new Robot();\n+        robot.setAutoDelay(100);\n+        try {\n+            SwingUtilities.invokeAndWait(() -> {\n+                frame = new JFrame(\"bug4323121\");\n+                button = new testButton(\"gotcha\");\n+                frame.getContentPane().add(button);\n+                frame.pack();\n+                frame.setLocationRelativeTo(null);\n+                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n+                frame.setVisible(true);\n+            });\n+            robot.waitForIdle();\n+            robot.delay(1000);\n+            SwingUtilities.invokeAndWait(() -> {\n+                pt = button.getLocationOnScreen();\n+                buttonW = button.getSize().width;\n+                buttonH = button.getSize().height;\n+            });\n+            robot.mouseMove(pt.x + buttonW \/ 2, pt.y + buttonH \/ 2);\n+            robot.waitForIdle();\n+            if (failed) {\n+                throw new RuntimeException(\"Any created button returns \" +\n+                                    \"true for isArmed()\");\n+            }\n+        } finally {\n+                SwingUtilities.invokeAndWait(() -> {\n+                if (frame != null) {\n+                    frame.dispose();\n+                }\n+            });\n+        }\n+    }\n+\n+    static class testButton extends JButton implements MouseMotionListener, MouseListener {\n+        public testButton(String label) {\n+            super(label);\n+            addMouseMotionListener(this);\n+            addMouseListener(this);\n+        }\n+\n+        protected void paintComponent(Graphics g) {\n+            super.paintComponent(g);\n+        }\n+\n+        protected void paintBorder(Graphics g) {\n+        }\n+\n+        public void mousePressed(MouseEvent e) {\n+        }\n+\n+        public void mouseDragged(MouseEvent e) {\n+        }\n+\n+        public void mouseMoved(MouseEvent e) {\n+        }\n+\n+        public void mouseReleased(MouseEvent e) {\n+        }\n+\n+        public void mouseEntered(MouseEvent e) {\n+            if (getModel().isArmed()) {\n+                failed = true;\n+            }\n+        }\n+\n+        public void mouseExited(MouseEvent e) {\n+        }\n+\n+        public void mouseClicked(MouseEvent e) {\n+        }\n+    }\n+}\n","filename":"test\/jdk\/javax\/swing\/JButton\/bug4323121.java","additions":125,"deletions":0,"binary":false,"changes":125,"status":"added"},{"patch":"@@ -0,0 +1,98 @@\n+\/*\n+ * Copyright (c) 2002, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 4490179\n+ * @summary Tests that JButton only responds to left mouse clicks.\n+ * @key headful\n+ * @run main bug4490179\n+ *\/\n+\n+import java.awt.Point;\n+import java.awt.Robot;\n+import java.awt.event.InputEvent;\n+import javax.swing.JButton;\n+import javax.swing.JFrame;\n+import javax.swing.SwingUtilities;\n+\n+public class bug4490179 {\n+    static JFrame frame;\n+    static JButton button;\n+    static volatile Point pt;\n+    static volatile int buttonW;\n+    static volatile int buttonH;\n+    static volatile boolean passed = true;\n+\n+    public static void main(String[] args) throws Exception {\n+        Robot robot = new Robot();\n+        robot.setAutoDelay(100);\n+        robot.setAutoWaitForIdle(true);\n+        try {\n+            SwingUtilities.invokeAndWait(() -> {\n+                frame = new JFrame(\"bug4490179\");\n+                button = new JButton(\"Button\");\n+                frame.getContentPane().add(button);\n+                button.addActionListener(e -> {\n+                    if ((e.getModifiers() & InputEvent.BUTTON1_MASK)\n+                            != InputEvent.BUTTON1_MASK) {\n+                        System.out.println(\"Status: Failed\");\n+                        passed = false;\n+                    }\n+                });\n+                frame.pack();\n+                frame.setLocationRelativeTo(null);\n+                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n+                frame.setVisible(true);\n+            });\n+            robot.waitForIdle();\n+            robot.delay(1000);\n+            SwingUtilities.invokeAndWait(() -> {\n+                pt = button.getLocationOnScreen();\n+                buttonW = button.getSize().width;\n+                buttonH = button.getSize().height;\n+            });\n+\n+            robot.mouseMove(pt.x + buttonW \/ 2, pt.y + buttonH \/ 2);\n+            robot.waitForIdle();\n+            robot.mousePress(InputEvent.BUTTON3_DOWN_MASK);\n+            robot.mouseRelease(InputEvent.BUTTON3_DOWN_MASK);\n+\n+            robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n+            robot.mousePress(InputEvent.BUTTON3_DOWN_MASK);\n+            robot.mouseRelease(InputEvent.BUTTON3_DOWN_MASK);\n+            robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n+            robot.delay(500);\n+\n+            if (!passed) {\n+                throw new RuntimeException(\"Test Failed\");\n+            }\n+        } finally {\n+            SwingUtilities.invokeAndWait(() -> {\n+                if (frame != null) {\n+                    frame.dispose();\n+                }\n+            });\n+        }\n+    }\n+}\n","filename":"test\/jdk\/javax\/swing\/JButton\/bug4490179.java","additions":98,"deletions":0,"binary":false,"changes":98,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2023, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,7 +24,0 @@\n-\/*\n- * @test\n- * @bug 7093691\n- * @summary Tests if JComboBox has correct font color when disabled\/enabled\n- * @run main\/othervm -Dsun.java2d.uiScale=1 DisabledComboBoxFontTestAuto\n- *\/\n-\n@@ -47,0 +40,8 @@\n+\/*\n+ * @test\n+ * @bug 7093691 8310072\n+ * @summary Tests if JComboBox has correct font color when disabled\/enabled\n+ * @key headful\n+ * @run main\/othervm -Dsun.java2d.uiScale=1 DisabledComboBoxFontTestAuto\n+ *\/\n+\n@@ -50,1 +51,0 @@\n-    private static Path testDir;\n@@ -57,1 +57,2 @@\n-        combo.addItem(\"Simple JComboBox\");\n+        combo.addItem(\"\\u2588\".repeat(5));\n+        combo.setFont(combo.getFont().deriveFont(50.0f));\n@@ -60,1 +61,2 @@\n-        combo2.addItem(\"Simple JComboBox\");\n+        combo2.addItem(\"\\u2588\".repeat(5));\n+        combo2.setFont(combo2.getFont().deriveFont(50.0f));\n@@ -93,10 +95,0 @@\n-        ImageIO.write(enabledImage, \"png\", new File(testDir\n-                + \"\/\" + lafName + \"Enabled.png\"));\n-        ImageIO.write(disabledImage, \"png\", new File(testDir\n-                + \"\/\" + lafName + \"Disabled.png\"));\n-        ImageIO.write(enabledImage2, \"png\", new File(testDir\n-                + \"\/\" + lafName + \"EnabledDLCR.png\"));\n-        ImageIO.write(disabledImage2, \"png\", new File(testDir\n-                + \"\/\" + lafName + \"DisabledDLCR.png\"));\n-\n-        boolean isIdentical = true;\n@@ -104,0 +96,1 @@\n+        Path testDir = Path.of(System.getProperty(\"test.classes\", \".\"));\n@@ -106,1 +99,1 @@\n-        int y = 10;\n+        int y = enabledImage.getHeight() \/ 2;\n@@ -109,13 +102,5 @@\n-            \/\/ Nimbus has a pixel offset in coordinates since Nimbus is 2px\n-            \/\/ smaller in width than other L&F's\n-            if (lafName.equals(\"Nimbus\")) {\n-                eColor1 = new Color(enabledImage.getRGB(x + 1, y));\n-                eColor2 = new Color(enabledImage2.getRGB(x, y));\n-                dColor1 = new Color(disabledImage.getRGB(x + 1, y));\n-                dColor2 = new Color(disabledImage2.getRGB(x, y));\n-            } else {\n-                eColor1 = new Color(enabledImage.getRGB(x, y));\n-                eColor2 = new Color(enabledImage2.getRGB(x, y));\n-                dColor1 = new Color(disabledImage.getRGB(x, y));\n-                dColor2 = new Color(disabledImage2.getRGB(x, y));\n-            }\n+            eColor1 = new Color(enabledImage.getRGB(x, y));\n+            eColor2 = new Color(enabledImage2.getRGB(x, y));\n+            dColor1 = new Color(disabledImage.getRGB(x, y));\n+            dColor2 = new Color(disabledImage2.getRGB(x, y));\n+\n@@ -123,2 +108,10 @@\n-                isIdentical = false;\n-                break;\n+                failingLafs.append(lafName + \", \");\n+                ImageIO.write(enabledImage, \"png\", new File(testDir\n+                        + \"\/\" + lafName + \"Enabled.png\"));\n+                ImageIO.write(disabledImage, \"png\", new File(testDir\n+                        + \"\/\" + lafName + \"Disabled.png\"));\n+                ImageIO.write(enabledImage2, \"png\", new File(testDir\n+                        + \"\/\" + lafName + \"EnabledDLCR.png\"));\n+                ImageIO.write(disabledImage2, \"png\", new File(testDir\n+                        + \"\/\" + lafName + \"DisabledDLCR.png\"));\n+                return;\n@@ -127,6 +120,1 @@\n-\n-        if (isIdentical) {\n-            System.out.println(\"PASSED\");\n-        } else {\n-            failingLafs.append(lafName + \", \");\n-        }\n+        System.out.println(\"Test Passed: \" + lafName);\n@@ -137,3 +125,2 @@\n-                || (c1.getBlue() != c2.getBlue())\n-                || (c1.getGreen() != c2.getGreen())) {\n-\n+            || (c1.getBlue() != c2.getBlue())\n+            || (c1.getGreen() != c2.getGreen())) {\n@@ -166,1 +153,0 @@\n-        testDir = Path.of(System.getProperty(\"test.classes\", \".\"));\n","filename":"test\/jdk\/javax\/swing\/JComboBox\/DisabledComboBoxFontTestAuto.java","additions":33,"deletions":47,"binary":false,"changes":80,"status":"modified"},{"patch":"@@ -0,0 +1,74 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.io.ByteArrayInputStream;\n+import java.io.IOException;\n+import java.nio.charset.Charset;\n+\n+import javax.swing.JEditorPane;\n+import javax.swing.text.BadLocationException;\n+import javax.swing.text.Document;\n+import javax.swing.text.Element;\n+\n+\/*\n+ * @test\n+ * @bug 8328953\n+ * @summary Verifies JEditorPane.read doesn't throw ChangedCharSetException\n+            but handles it and reads HTML in the specified encoding\n+ * @run main EditorPaneCharset\n+ *\/\n+\n+public final class EditorPaneCharset {\n+    private static final String CYRILLIC_TEXT =\n+            \"\\u041F\\u0440\\u0438\\u0432\\u0435\\u0442, \\u043C\\u0438\\u0440!\";\n+    private static final String HTML_CYRILLIC =\n+            \"<html lang=\\\"ru\\\">\\n\" +\n+            \"<head>\\n\" +\n+            \"    <meta http-equiv=\\\"Content-Type\\\" \" +\n+            \"          content=\\\"text\/html; charset=windows-1251\\\">\\n\" +\n+            \"<\/head><body>\\n\" +\n+            \"<p>\" + CYRILLIC_TEXT + \"<\/p>\\n\" +\n+            \"<\/body><\/html>\\n\";\n+\n+    public static void main(String[] args) throws IOException, BadLocationException {\n+        JEditorPane editorPane = new JEditorPane();\n+        editorPane.setContentType(\"text\/html\");\n+        Document document = editorPane.getDocument();\n+\n+        \/\/ Shouldn't throw ChangedCharSetException\n+        editorPane.read(\n+                new ByteArrayInputStream(\n+                        HTML_CYRILLIC.getBytes(\n+                                Charset.forName(\"windows-1251\"))),\n+                document);\n+\n+        Element root = document.getDefaultRootElement();\n+        Element body = root.getElement(1);\n+        Element p = body.getElement(0);\n+        String pText = document.getText(p.getStartOffset(),\n+                                        p.getEndOffset() - p.getStartOffset() - 1);\n+        if (!CYRILLIC_TEXT.equals(pText)) {\n+            throw new RuntimeException(\"Text doesn't match\");\n+        }\n+    }\n+}\n","filename":"test\/jdk\/javax\/swing\/JEditorPane\/EditorPaneCharset.java","additions":74,"deletions":0,"binary":false,"changes":74,"status":"added"},{"patch":"@@ -0,0 +1,158 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.io.File;\n+import java.lang.reflect.InvocationTargetException;\n+import java.lang.reflect.Method;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.List;\n+\n+\/*\n+ * @test\n+ * @bug 8305072\n+ * @requires (os.family == \"windows\")\n+ * @modules java.desktop\/sun.awt.shell\n+ * @summary Verifies consistency of Win32ShellFolder2.compareTo\n+ * @run main\/othervm --add-opens java.desktop\/sun.awt.shell=ALL-UNNAMED Win32FolderSort\n+ *\/\n+public class Win32FolderSort {\n+    public static void main(String[] args) throws Exception {\n+        Class<?> folderManager = Class.forName(\"sun.awt.shell.Win32ShellFolderManager2\");\n+        Class<?> folder = Class.forName(\"sun.awt.shell.Win32ShellFolder2\");\n+\n+        Method getDesktop = folderManager.getDeclaredMethod(\"getDesktop\");\n+        getDesktop.setAccessible(true);\n+        Method getPersonal = folderManager.getDeclaredMethod(\"getPersonal\");\n+        getPersonal.setAccessible(true);\n+\n+        Method createShellFolder = folderManager.getDeclaredMethod(\"createShellFolder\", folder, File.class);\n+        createShellFolder.setAccessible(true);\n+\n+        Method isFileSystem = folder.getMethod(\"isFileSystem\");\n+        isFileSystem.setAccessible(true);\n+        Method isSpecial = folder.getMethod(\"isSpecial\");\n+        isSpecial.setAccessible(true);\n+        Method getChildByPath = folder.getDeclaredMethod(\"getChildByPath\", String.class);\n+        getChildByPath.setAccessible(true);\n+\n+        File desktop = (File) getDesktop.invoke(null);\n+        File personal = (File) getPersonal.invoke(null);\n+        if (!((Boolean) isSpecial.invoke(personal))) {\n+            throw new RuntimeException(\"personal is not special\");\n+        }\n+        File fakePersonal = (File) getChildByPath.invoke(desktop, personal.getPath());\n+        if (fakePersonal == null) {\n+            fakePersonal = (File) createShellFolder.invoke(null, desktop,\n+                                                           new File(personal.getPath()));\n+        }\n+        if ((Boolean) isSpecial.invoke(fakePersonal)) {\n+            throw new RuntimeException(\"fakePersonal is special\");\n+        }\n+        File homeDir = (File) createShellFolder.invoke(null, desktop,\n+                                                       new File(System.getProperty(\"user.home\")));\n+\n+        File[] files = {fakePersonal, personal, homeDir};\n+        for (File f : files) {\n+            if (!((Boolean) isFileSystem.invoke(f))) {\n+                throw new RuntimeException(f + \" is not on file system\");\n+            }\n+        }\n+\n+        List<String> errors = new ArrayList<>(2);\n+        for (File f1 : files) {\n+            for (File f2 : files) {\n+                for (File f3 : files) {\n+                    String result = verifyCompareTo(f1, f2, f3);\n+                    if (result != null) {\n+                        String error = result + \"\\nwhere\"\n+                                       + \"\\n  a = \" + formatFile(f1, isSpecial)\n+                                       + \"\\n  b = \" + formatFile(f2, isSpecial)\n+                                       + \"\\n  c = \" + formatFile(f3, isSpecial);\n+                        errors.add(error);\n+                    }\n+                }\n+            }\n+        }\n+\n+\n+        System.out.println(\"Unsorted:\");\n+        for (File f : files) {\n+            System.out.println(formatFile(f, isSpecial));\n+        }\n+        System.out.println();\n+\n+        Arrays.sort(files);\n+        System.out.println(\"Sorted:\");\n+        for (File f : files) {\n+            System.out.println(formatFile(f, isSpecial));\n+        }\n+\n+\n+        if (!errors.isEmpty()) {\n+            System.err.println(\"Implementation of Win32ShellFolder2.compareTo is inconsistent:\");\n+            errors.forEach(System.err::println);\n+            throw new RuntimeException(\"Inconsistencies found: \" + errors.size()\n+                                       + \" - \" + errors.get(0));\n+        }\n+    }\n+\n+    \/**\n+     * Verifies consistency of {@code Comparable} implementation.\n+     *\n+     * @param a the first object\n+     * @param b the second object\n+     * @param c the third object\n+     * @return error message if inconsistency is found,\n+     *         or {@code null } otherwise\n+     *\/\n+    private static String verifyCompareTo(File a, File b, File c) {\n+        \/\/ a < b & b < c => a < c\n+        if (a.compareTo(b) < 0 && b.compareTo(c) < 0) {\n+            if (a.compareTo(c) >= 0) {\n+                return \"a < b & b < c but a >= c\";\n+            }\n+        }\n+\n+        \/\/ a > b & b > c => a > c\n+        if (a.compareTo(b) > 0 && b.compareTo(c) > 0) {\n+            if (a.compareTo(c) <= 0) {\n+                return \"a > b & b > c but a <= c\";\n+            }\n+        }\n+\n+        \/\/ a = b & b = c => a = c\n+        if (a.compareTo(b) == 0 && b.compareTo(c) == 0) {\n+            if (a.compareTo(c) != 0) {\n+                return \"a = b & b = c but a != c\";\n+            }\n+        }\n+\n+        return null;\n+    }\n+\n+    private static String formatFile(File f, Method isSpecial)\n+            throws InvocationTargetException, IllegalAccessException {\n+        return f + \"(\" + isSpecial.invoke(f) + \")\";\n+    }\n+}\n","filename":"test\/jdk\/javax\/swing\/JFileChooser\/FileSystemView\/Win32FolderSort.java","additions":158,"deletions":0,"binary":false,"changes":158,"status":"added"},{"patch":"@@ -0,0 +1,167 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.awt.BorderLayout;\n+import java.awt.Component;\n+import java.awt.Container;\n+import java.awt.Rectangle;\n+import java.awt.Robot;\n+import java.awt.Point;\n+import java.awt.event.InputEvent;\n+import java.awt.event.KeyEvent;\n+\n+import javax.swing.AbstractButton;\n+import javax.swing.JFileChooser;\n+import javax.swing.JFrame;\n+import javax.swing.JTable;\n+import javax.swing.JToggleButton;\n+import javax.swing.SwingUtilities;\n+import javax.swing.WindowConstants;\n+import javax.swing.UIManager;\n+import javax.swing.table.DefaultTableModel;\n+\n+import java.util.function.Predicate;\n+\n+\/*\n+ * @test\n+ * @bug 6967482\n+ * @key headful\n+ * @summary Test to check if TAB is working on JTable after JFileChooser is\n+ *          closed\n+ * @run main TABTestONFCExit\n+ *\/\n+\n+public class TABTestONFCExit {\n+    private static JTable table;\n+    private static JFileChooser fc;\n+    private static JFrame frame;\n+    private static Robot robot;\n+    private static volatile Point loc;\n+    private static volatile Rectangle rect;\n+    private static volatile int selectedColumnBeforeTabPress;\n+    private static volatile int selectedColumnAfterTabPress;\n+\n+    public static void main(String[] args) throws Exception {\n+        robot = new Robot();\n+        robot.setAutoDelay(50);\n+        UIManager.setLookAndFeel(\"javax.swing.plaf.metal.MetalLookAndFeel\");\n+        try {\n+            SwingUtilities.invokeAndWait(TABTestONFCExit::initialize);\n+            robot.waitForIdle();\n+            robot.delay(100);\n+\n+            SwingUtilities.invokeAndWait(TABTestONFCExit::clickDetails);\n+            robot.waitForIdle();\n+            robot.delay(100);\n+\n+            SwingUtilities.invokeAndWait(() -> {\n+                loc = table.getLocationOnScreen();\n+                rect = table.getCellRect(0, 0, true);\n+            });\n+\n+            onClick(loc, rect);\n+\n+            SwingUtilities.invokeAndWait(() ->\n+                    selectedColumnBeforeTabPress = table.getSelectedColumn());\n+\n+            robot.keyPress(KeyEvent.VK_TAB);\n+            robot.keyRelease(KeyEvent.VK_TAB);\n+            robot.waitForIdle();\n+            robot.delay(100);\n+\n+            SwingUtilities.invokeAndWait(() ->\n+                    selectedColumnAfterTabPress = table.getSelectedColumn());\n+            robot.waitForIdle();\n+            robot.delay(100);\n+\n+            if (selectedColumnAfterTabPress == selectedColumnBeforeTabPress) {\n+                throw new RuntimeException(\"TAB failed to move cell!\");\n+            }\n+            System.out.println(\"Test Passed\" );\n+\n+        } finally {\n+            SwingUtilities.invokeAndWait(() -> {\n+                if (frame != null) {\n+                    frame.dispose();\n+                }\n+            });\n+        }\n+    }\n+\n+    private static void onClick(Point loc, Rectangle cellRect) {\n+        robot.mouseMove(loc.x + cellRect.x + cellRect.width \/ 2,\n+                loc.y + cellRect.y + cellRect.height \/ 2);\n+        robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n+        robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n+        robot.waitForIdle();\n+        robot.delay(100);\n+    }\n+\n+    private static void initialize() {\n+        frame = new JFrame(\"Tab Test\");\n+        fc = new JFileChooser();\n+        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\n+        frame.add(getJTable(), BorderLayout.NORTH);\n+        frame.add(fc, BorderLayout.SOUTH);\n+        frame.pack();\n+        frame.setVisible(true);\n+    }\n+\n+    private static JTable getJTable() {\n+        if (table == null) {\n+            table = new JTable();\n+            table.setModel(new DefaultTableModel(5, 5));\n+        }\n+        return table;\n+    }\n+    private static void clickDetails() {\n+        AbstractButton details = findDetailsButton(fc);\n+        if (details == null) {\n+            throw new Error(\"Couldn't find 'Details' button in JFileChooser\");\n+        }\n+        details.doClick();\n+    }\n+\n+    private static AbstractButton findDetailsButton(final Container container) {\n+        Component result = findComponent(container,\n+                c -> c instanceof JToggleButton button\n+                        && \"Details\".equals(button.getToolTipText()));\n+        return (AbstractButton) result;\n+    }\n+\n+    private static Component findComponent(final Container container,\n+                                           final Predicate<Component> predicate) {\n+        for (Component child : container.getComponents()) {\n+            if (predicate.test(child)) {\n+                return child;\n+            }\n+            if (child instanceof Container cont && cont.getComponentCount() > 0) {\n+                Component result = findComponent(cont, predicate);\n+                if (result != null) {\n+                    return result;\n+                }\n+            }\n+        }\n+        return null;\n+    }\n+}\n","filename":"test\/jdk\/javax\/swing\/JFileChooser\/TABTestONFCExit.java","additions":167,"deletions":0,"binary":false,"changes":167,"status":"added"},{"patch":"@@ -0,0 +1,221 @@\n+\/*\n+ * Copyright (c) 1998, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.awt.Frame;\n+import java.awt.FlowLayout;\n+import java.awt.Window;\n+import java.awt.event.ItemEvent;\n+import java.awt.event.WindowEvent;\n+import javax.swing.JButton;\n+import javax.swing.JComboBox;\n+import javax.swing.JDialog;\n+import javax.swing.JFrame;\n+import javax.swing.JLabel;\n+import javax.swing.JPanel;\n+import javax.swing.SwingUtilities;\n+import javax.swing.WindowConstants;\n+\n+\/*\n+ * @test\n+ * @summary test for defaultCloseOperation property for Swing JFrame and JDialog\n+ * @library \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame\n+ * @run main\/manual DefaultCloseOperation\n+ *\/\n+\n+public class DefaultCloseOperation extends JPanel {\n+\n+    private static final String INSTRUCTIONS = \"\"\"\n+        Do the following steps:\n+\n+         -  Click the \"Open Frame\" button (a TestFrame will appear)\n+         -  On the TestFrame, select \"Close\" from the system menu (the window should go away)\n+         -  Select \"Do Nothing\" from the \"JFrame Default Close Operation\" ComboBox\n+         -  Click the \"Open Frame\" button\n+         -  On the TestFrame, select \"Close\" from the system menu (the window should remain open)\n+         -  Select \"Dispose\" from the \"JFrame Default Close Operation\" ComboBox\n+         -  On the TestFrame, select \"Close\" from the system menu (the window should go away)\n+\n+\n+         -  Click the \"Open Frame\" button\n+         -  Click the \"Open Dialog\" button (a TestDialog will appear)\n+         -  On the TestDialog, select \"Close\" from the system menu (the window should go away)\n+         -  Select \"Do Nothing\" from the \"JDialog Default Close Operation\" ComboBox\n+         -  Click the \"Open Dialog\" button\n+         -  On the TestDialog, select \"Close\" from the system menu (the window should remain open)\n+         -  Select \"Dispose\" from the \"JDialog Default Close Operation\" ComboBox\n+         -  On the TestDialog, select \"Close\" from the system menu (the window should go away)\n+        \"\"\";\n+\n+    JComboBox<String> frameCloseOp;\n+\n+    CloseOpDialog testDialog;\n+    JComboBox<String> dialogCloseOp;\n+\n+    public static void main(String[] args) throws Exception {\n+\n+        PassFailJFrame passFailJFrame = new PassFailJFrame.Builder()\n+                .title(\"DefaultCloseOperation Manual Test\")\n+                .instructions(INSTRUCTIONS)\n+                .testTimeOut(5)\n+                .rows(20)\n+                .columns(70)\n+                .build();\n+\n+        SwingUtilities.invokeAndWait(() -> {\n+            DefaultCloseOperation dco = new DefaultCloseOperation();\n+            dco.init();\n+\n+            JFrame frame = new JFrame(\"DefaultCloseOperation\");\n+            frame.add(dco);\n+            frame.setSize(500,200);\n+\n+            PassFailJFrame.addTestWindow(frame);\n+            PassFailJFrame\n+                    .positionTestWindow(frame, PassFailJFrame.Position.HORIZONTAL);\n+\n+            frame.setVisible(true);\n+        });\n+\n+        passFailJFrame.awaitAndCheck();\n+    }\n+\n+    public void init() {\n+        setLayout(new FlowLayout());\n+\n+        CloseOpFrame testFrame = new CloseOpFrame();\n+        testFrame.setLocationRelativeTo(null);\n+        PassFailJFrame.addTestWindow(testFrame);\n+\n+        add(new JLabel(\"JFrame Default Close Operation:\"));\n+        frameCloseOp = new JComboBox<>();\n+        frameCloseOp.addItem(\"Hide\");\n+        frameCloseOp.addItem(\"Do Nothing\");\n+        frameCloseOp.addItem(\"Dispose\");\n+        frameCloseOp.addItemListener(e -> {\n+            if (e.getStateChange() == ItemEvent.SELECTED) {\n+                String item = (String)e.getItem();\n+                switch (item) {\n+                    case \"Do Nothing\" -> testFrame\n+                            .setDefaultCloseOperation(WindowConstants.DO_NOTHING_ON_CLOSE);\n+                    case \"Hide\" -> testFrame\n+                            .setDefaultCloseOperation(WindowConstants.HIDE_ON_CLOSE);\n+                    case \"Dispose\" -> testFrame\n+                            .setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);\n+                }\n+            }\n+        });\n+        add(frameCloseOp);\n+\n+        JButton b = new JButton(\"Open Frame...\");\n+        b.addActionListener(e -> testFrame.setVisible(true));\n+        add(b);\n+\n+        testDialog = new CloseOpDialog(testFrame);\n+        testDialog.setLocationRelativeTo(null);\n+        PassFailJFrame.addTestWindow(testDialog);\n+\n+        add(new JLabel(\"JDialog Default Close Operation:\"));\n+        dialogCloseOp = new JComboBox<>();\n+        dialogCloseOp.addItem(\"Hide\");\n+        dialogCloseOp.addItem(\"Do Nothing\");\n+        dialogCloseOp.addItem(\"Dispose\");\n+        dialogCloseOp.addItemListener(e -> {\n+            if (e.getStateChange() == ItemEvent.SELECTED) {\n+                String item = (String)e.getItem();\n+                switch (item) {\n+                    case \"Do Nothing\" -> testDialog\n+                            .setDefaultCloseOperation(WindowConstants.DO_NOTHING_ON_CLOSE);\n+                    case \"Hide\" -> testDialog\n+                            .setDefaultCloseOperation(WindowConstants.HIDE_ON_CLOSE);\n+                    case \"Dispose\" -> testDialog\n+                            .setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);\n+                }\n+            }\n+        });\n+        add(dialogCloseOp);\n+\n+        b = new JButton(\"Open Dialog...\");\n+        b.addActionListener(e -> testDialog.setVisible(true));\n+        add(b);\n+    }\n+\n+    public static void verifyCloseOperation(Window window, int op) {\n+        switch (op) {\n+            case WindowConstants.DO_NOTHING_ON_CLOSE -> {\n+                if (!window.isVisible()) {\n+                    PassFailJFrame\n+                            .forceFail(\"defaultCloseOperation=DoNothing failed\");\n+                }\n+            }\n+            case WindowConstants.HIDE_ON_CLOSE -> {\n+                if (window.isVisible()) {\n+                    PassFailJFrame\n+                            .forceFail(\"defaultCloseOperation=Hide failed\");\n+                }\n+            }\n+            case WindowConstants.DISPOSE_ON_CLOSE -> {\n+                if (window.isVisible() || window.isDisplayable()) {\n+                    PassFailJFrame\n+                            .forceFail(\"defaultCloseOperation=Dispose failed\");\n+                }\n+            }\n+        }\n+    }\n+}\n+\n+class CloseOpFrame extends JFrame {\n+\n+    public CloseOpFrame() {\n+        super(\"DefaultCloseOperation Test\");\n+        getContentPane().add(\"Center\", new JLabel(\"Test Frame\"));\n+        pack();\n+    }\n+\n+    protected void processWindowEvent(WindowEvent e) {\n+        super.processWindowEvent(e);\n+\n+        if (e.getID() == WindowEvent.WINDOW_CLOSING) {\n+            DefaultCloseOperation\n+                    .verifyCloseOperation(this, getDefaultCloseOperation());\n+        }\n+    }\n+}\n+\n+class CloseOpDialog extends JDialog {\n+\n+    public CloseOpDialog(Frame owner) {\n+        super(owner, \"DefaultCloseOperation Test Dialog\");\n+        getContentPane().add(\"Center\", new JLabel(\"Test Dialog\"));\n+        pack();\n+    }\n+\n+    protected void processWindowEvent(WindowEvent e) {\n+        super.processWindowEvent(e);\n+\n+        if (e.getID() == WindowEvent.WINDOW_CLOSING) {\n+            DefaultCloseOperation\n+                    .verifyCloseOperation(this, getDefaultCloseOperation());\n+        }\n+    }\n+}\n","filename":"test\/jdk\/javax\/swing\/JFrame\/DefaultCloseOperation.java","additions":221,"deletions":0,"binary":false,"changes":221,"status":"added"},{"patch":"@@ -0,0 +1,82 @@\n+\/*\n+ * Copyright (c) 2001, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 4419914\n+ * @summary Tests that tab movement is correct in RTL component orientation.\n+ * @library \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame\n+ * @run main\/manual bug4419914\n+*\/\n+\n+import java.awt.BorderLayout;\n+import java.awt.ComponentOrientation;\n+import javax.swing.JButton;\n+import javax.swing.JFrame;\n+import java.util.Locale;\n+\n+public class bug4419914 {\n+    private static final String INSTRUCTIONS = \"\"\"\n+        1. You will see a frame with five buttons.\n+        2. Confirm that each button is placed as follows:\n+             NORTH\n+        END  CENTER  START\n+             SOUTH\n+        3. Press the \"NORTH\" button and confirm the button is focused.\n+        4. Press TAB repeatedly and confirm that the TAB focus moves from right to left.\n+             (NORTH - START - CENTER - END - SOUTH - NORTH - START - CENTER - ...)\n+\n+            If there's anything different from the above items, click Fail else click Pass.\"\"\";\n+\n+    public static void main(String[] args) throws Exception {\n+        PassFailJFrame.builder()\n+                .title(\"Tab movement Instructions\")\n+                .instructions(INSTRUCTIONS)\n+                .rows((int) INSTRUCTIONS.lines().count() + 2)\n+                .columns(48)\n+                .testUI(bug4419914::createTestUI)\n+                .build()\n+                .awaitAndCheck();\n+    }\n+\n+    private static JFrame createTestUI() {\n+        JFrame frame = new JFrame(\"bug4419914\");\n+        frame.setFocusCycleRoot(true);\n+        frame.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);\n+        frame.setLocale(Locale.ENGLISH);\n+        frame.enableInputMethods(false);\n+\n+        frame.getContentPane().setComponentOrientation(\n+                               ComponentOrientation.RIGHT_TO_LEFT);\n+        frame.getContentPane().setLocale(Locale.ENGLISH);\n+        frame.getContentPane().setLayout(new BorderLayout());\n+        frame.add(new JButton(\"SOUTH\"), BorderLayout.SOUTH);\n+        frame.add(new JButton(\"CENTER\"), BorderLayout.CENTER);\n+        frame.add(new JButton(\"END\"), BorderLayout.LINE_END);\n+        frame.add(new JButton(\"START\"), BorderLayout.LINE_START);\n+        frame.add(new JButton(\"NORTH\"), BorderLayout.NORTH);\n+        frame.setSize(300, 150);\n+        return frame;\n+    }\n+}\n","filename":"test\/jdk\/javax\/swing\/JFrame\/bug4419914.java","additions":82,"deletions":0,"binary":false,"changes":82,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -93,0 +93,1 @@\n+                robot.delay(500);\n","filename":"test\/jdk\/javax\/swing\/JLabel\/4138746\/JLabelMnemonicsTest.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -0,0 +1,154 @@\n+\/*\n+ * Copyright (c) 2007, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\/*\n+ * @test\n+ * @bug 4211731 4214512\n+ * @summary\n+ *     This test checks if menu bars lay out correctly when their\n+ *     ComponentOrientation property is set to RIGHT_TO_LEFT. This test is\n+ *     manual.  The tester is asked to compare left-to-right and\n+ *     right-to-left menu bars and judge whether they are mirror images of each\n+ *     other.\n+ * @library \/test\/jdk\/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame\n+ * @run main\/manual RightLeftOrientation\n+ *\/\n+\n+import java.awt.ComponentOrientation;\n+import java.awt.Point;\n+import java.awt.event.ActionEvent;\n+import java.awt.event.ActionListener;\n+import javax.swing.ButtonGroup;\n+import javax.swing.JFrame;\n+import javax.swing.JMenu;\n+import javax.swing.JMenuBar;\n+import javax.swing.JPanel;\n+import javax.swing.JRadioButton;\n+import javax.swing.SwingUtilities;\n+import javax.swing.UIManager;\n+\n+public class RightLeftOrientation {\n+\n+    static JFrame ltrFrame;\n+    static JFrame rtlFrame;\n+\n+    private static final String INSTRUCTIONS = \"\"\"\n+        This test checks menu bars for correct Right-To-Left Component Orientation.\n+\n+        You should see two frames, each containing a menu bar.\n+\n+        One frame will be labelled \"Left To Right\" and will contain\n+        a menu bar with menus starting on its left side.\n+        The other frame will be labelled \"Right To Left\" and will\n+        contain a menu bar with menus starting on its right side.\n+\n+        The test will also contain radio buttons that can be used to set\n+        the look and feel of the menu bars.\n+        For each look and feel, you should compare the two menu\n+        bars and make sure they are mirror images of each other. \"\"\";\n+\n+    public static void main(String[] args) throws Exception {\n+        PassFailJFrame.builder()\n+                 .title(\"RTL test Instructions\")\n+                 .instructions(INSTRUCTIONS)\n+                 .rows((int) INSTRUCTIONS.lines().count() + 2)\n+                 .columns(30)\n+                 .testUI(RightLeftOrientation::createTestUI)\n+                 .build()\n+                 .awaitAndCheck();\n+    }\n+\n+    private static JFrame createTestUI() {\n+        JFrame frame = new JFrame(\"RightLeftOrientation\");\n+        JPanel panel = new JPanel();\n+\n+        ButtonGroup group = new ButtonGroup();\n+        JRadioButton rb;\n+        ActionListener plafChanger = new PlafChanger();\n+\n+        UIManager.LookAndFeelInfo[] lafInfos = UIManager.getInstalledLookAndFeels();\n+        for (int i = 0; i < lafInfos.length; i++) {\n+            rb = new JRadioButton(lafInfos[i].getName());\n+            rb.setActionCommand(lafInfos[i].getClassName());\n+            rb.addActionListener(plafChanger);\n+            group.add(rb);\n+            panel.add(rb);\n+            if (i == 0) {\n+                rb.setSelected(true);\n+            }\n+        }\n+\n+        frame.add(panel);\n+\n+        ltrFrame = new JFrame(\"Left To Right\");\n+        ltrFrame.setJMenuBar(createMenuBar(ComponentOrientation.LEFT_TO_RIGHT));\n+        ltrFrame.setSize(400, 100);\n+        ltrFrame.setLocation(new Point(10, 10));\n+        ltrFrame.setVisible(true);\n+\n+        rtlFrame = new JFrame(\"Right To Left\");\n+        rtlFrame.setJMenuBar(createMenuBar(ComponentOrientation.RIGHT_TO_LEFT));\n+        rtlFrame.setSize(400, 100);\n+        rtlFrame.setLocation(new Point(10, 120));\n+        rtlFrame.setVisible(true);\n+        frame.pack();\n+        return frame;\n+    }\n+\n+    static class PlafChanger implements ActionListener {\n+        public void actionPerformed(ActionEvent e) {\n+            String lnfName = e.getActionCommand();\n+\n+            try {\n+                UIManager.setLookAndFeel(lnfName);\n+                SwingUtilities.updateComponentTreeUI(ltrFrame);\n+                SwingUtilities.updateComponentTreeUI(rtlFrame);\n+            }\n+            catch (Exception exc) {\n+                System.err.println(\"Could not load LookAndFeel: \" + lnfName);\n+            }\n+\n+        }\n+    }\n+\n+\n+    static JMenuBar createMenuBar(ComponentOrientation o) {\n+        JMenuBar menuBar = new JMenuBar();\n+        menuBar.setComponentOrientation(o);\n+\n+        JMenu menu = new JMenu(\"One\");\n+        menu.setComponentOrientation(o);\n+        menuBar.add(menu);\n+\n+        menu = new JMenu(\"Two\");\n+        menu.setComponentOrientation(o);\n+        menuBar.add(menu);\n+\n+        menu = new JMenu(\"Three\");\n+        menu.setComponentOrientation(o);\n+        menuBar.add(menu);\n+\n+        return menuBar;\n+    }\n+\n+}\n","filename":"test\/jdk\/javax\/swing\/JMenuBar\/RightLeftOrientation.java","additions":154,"deletions":0,"binary":false,"changes":154,"status":"added"},{"patch":"@@ -0,0 +1,93 @@\n+\/*\n+ * Copyright (c) 2003, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import javax.swing.JFrame;\n+import javax.swing.JRadioButton;\n+import javax.swing.SwingUtilities;\n+import javax.swing.plaf.ButtonUI;\n+import javax.swing.plaf.metal.MetalRadioButtonUI;\n+import java.awt.Dimension;\n+import java.awt.Graphics;\n+import java.awt.Rectangle;\n+import java.awt.Robot;\n+\n+\/*\n+ * @test\n+ * @bug 4823809\n+ * @summary No Mnemonic or Focus Indicator when using HTML for a Component Text\n+ * @key headful\n+ * @run main bug4823809\n+ *\/\n+\n+public class bug4823809 {\n+    private static ButtonUI testUI;\n+    private static volatile boolean passed = false;\n+    private static JFrame frame;\n+    private static Robot robot;\n+\n+    public static void main(String[] args) throws Exception {\n+        try {\n+            robot = new Robot();\n+            SwingUtilities.invokeAndWait(() -> {\n+                frame = new JFrame(\"RadioButton Test\");\n+                testUI = new TestRadioButtonUI();\n+                JRadioButton radio = new TestRadioButton(\"<html>This is a radiobutton test!<\/html>\");\n+\n+                frame.getContentPane().add(radio);\n+                frame.pack();\n+                frame.setVisible(true);\n+            });\n+            robot.waitForIdle();\n+            robot.delay(1000);\n+\n+            if (!passed) {\n+                throw new Error(\"Focus isn't painted for JRadioButton with HTML text.\");\n+            }\n+            System.out.println(\"Test Passed!\");\n+        } finally {\n+            SwingUtilities.invokeAndWait(() -> {\n+                if (frame != null) {\n+                    frame.dispose();\n+                }\n+            });\n+        }\n+    }\n+\n+    static class TestRadioButton extends JRadioButton {\n+        public TestRadioButton(String s) {\n+            super(s);\n+        }\n+\n+        public void setUI(ButtonUI ui) {\n+            super.setUI(testUI);\n+        }\n+    }\n+\n+    static class TestRadioButtonUI extends MetalRadioButtonUI {\n+        protected void paintFocus(Graphics g, Rectangle t, Dimension d) {\n+            super.paintFocus(g, t, d);\n+            passed = true;\n+        }\n+    }\n+\n+}\n","filename":"test\/jdk\/javax\/swing\/JRadioButton\/bug4823809.java","additions":93,"deletions":0,"binary":false,"changes":93,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -86,0 +86,1 @@\n+        robot.setAutoWaitForIdle(true);\n@@ -103,0 +104,2 @@\n+                robot.delay(1000);\n+\n","filename":"test\/jdk\/javax\/swing\/JRootPane\/DefaultButtonTest.java","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -42,1 +42,0 @@\n- * @author Alexander Scherbatiy\n@@ -140,0 +139,1 @@\n+        calendar.add(Calendar.DAY_OF_MONTH, 1);\n","filename":"test\/jdk\/javax\/swing\/JSpinner\/8008657\/bug8008657.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -0,0 +1,58 @@\n+\/*\n+ * Copyright (c) 1999, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import javax.swing.JSplitPane;\n+import java.beans.PropertyChangeEvent;\n+import java.beans.PropertyChangeListener;\n+\n+\/*\n+ * @test\n+ * @bug 4147653\n+ * @summary JSplitPane.DIVIDER_LOCATION_PROPERTY is a property,\n+ * you can use that to know when the position changes.\n+ * @run main bug4147653\n+ *\/\n+\n+public class bug4147653 {\n+    private static volatile boolean flag = false;\n+\n+    static class DevMoved implements PropertyChangeListener {\n+        public void propertyChange(PropertyChangeEvent evt) {\n+            flag = true;\n+        }\n+    }\n+\n+    public static void main(String[] args) throws Exception {\n+        JSplitPane sp = new JSplitPane();\n+\n+        DevMoved pl = new DevMoved();\n+        sp.addPropertyChangeListener(JSplitPane.DIVIDER_LOCATION_PROPERTY, pl);\n+        sp.setDividerLocation(sp.getDividerLocation() + 10);\n+        Thread.sleep(1000);\n+\n+        if (!flag) {\n+            throw new RuntimeException(\"Divider property was not changed...\");\n+        }\n+        System.out.println(\"Test Passed!\");\n+    }\n+}\n","filename":"test\/jdk\/javax\/swing\/JSplitPane\/bug4147653.java","additions":58,"deletions":0,"binary":false,"changes":58,"status":"added"},{"patch":"@@ -0,0 +1,181 @@\n+\/*\n+ * Copyright (c) 2003, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import javax.swing.JButton;\n+import javax.swing.JFrame;\n+import javax.swing.JSplitPane;\n+import javax.swing.SwingUtilities;\n+import javax.swing.plaf.basic.BasicSplitPaneDivider;\n+import javax.swing.plaf.basic.BasicSplitPaneUI;\n+import java.awt.GridLayout;\n+import java.awt.Point;\n+import java.awt.Robot;\n+import java.awt.event.InputEvent;\n+\n+\/*\n+ * @test\n+ * @bug 4870674\n+ * @summary JSplitPane's one-touch buttons should deal with resized split panes better\n+ * @key headful\n+ * @run main bug4870674\n+ *\/\n+\n+public class bug4870674 {\n+    private static JSplitPane jsp0, jsp1;\n+    private static JButton[] leftOneTouchButton = new JButton[2];\n+    private static JButton[] rightOneTouchButton = new JButton[2];\n+    private static JFrame frame;\n+    private static Robot robot;\n+    private static volatile boolean passed = true;\n+    private static volatile Point rightBtnPos0;\n+    private static volatile Point leftBtnPos0;\n+    private static volatile Point rightBtnPos1;\n+    private static volatile Point leftBtnPos1;\n+\n+    public static void main(String[] args) throws Exception {\n+        try {\n+            robot = new Robot();\n+            SwingUtilities.invokeAndWait(() -> {\n+                frame = new JFrame(\"Test\");\n+                frame.getContentPane().setLayout(new GridLayout(2, 1));\n+\n+                jsp0 = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT,\n+                        new JButton(\"Left\"),\n+                        new JButton(\"Right\"));\n+                frame.getContentPane().add(jsp0);\n+\n+                jsp0.setUI(new TestSplitPaneUI(0));\n+                jsp0.setOneTouchExpandable(true);\n+\n+                jsp1 = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT,\n+                        new JButton(\"Left\"),\n+                        new JButton(\"Right\"));\n+                frame.getContentPane().add(jsp1);\n+\n+                jsp1.setUI(new TestSplitPaneUI(1));\n+                jsp1.setOneTouchExpandable(true);\n+\n+                frame.setSize(300, 100);\n+                frame.setVisible(true);\n+            });\n+            robot.waitForIdle();\n+            robot.delay(1000);\n+            SwingUtilities.invokeAndWait(() -> {\n+                rightBtnPos0 = rightOneTouchButton[0].getLocationOnScreen();\n+                rightBtnPos0.x += rightOneTouchButton[0].getWidth() \/ 2;\n+                rightBtnPos0.y += rightOneTouchButton[0].getHeight() \/ 2;\n+\n+                leftBtnPos1 = leftOneTouchButton[1].getLocationOnScreen();\n+                leftBtnPos1.x += leftOneTouchButton[0].getWidth() \/ 2;\n+                leftBtnPos1.y += leftOneTouchButton[0].getHeight() \/ 2;\n+\n+                leftBtnPos0 = leftOneTouchButton[0].getLocationOnScreen();\n+                leftBtnPos0.x += leftOneTouchButton[0].getWidth() \/ 2;\n+                leftBtnPos0.y += leftOneTouchButton[0].getHeight() \/ 2;\n+\n+                rightBtnPos1 = rightOneTouchButton[1].getLocationOnScreen();\n+                rightBtnPos1.x += rightOneTouchButton[0].getWidth() \/ 2;\n+                rightBtnPos1.y += rightOneTouchButton[0].getHeight() \/ 2;\n+\n+                jsp0.setDividerLocation(250);\n+            });\n+            robot.mouseMove(rightBtnPos0.x, rightBtnPos0.y);\n+            robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n+            robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n+            SwingUtilities.invokeAndWait(() -> {\n+                jsp1.setDividerLocation(250);\n+            });\n+            robot.waitForIdle();\n+            robot.delay(100);\n+            robot.mouseMove(leftBtnPos1.x, leftBtnPos1.y);\n+            robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n+            robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n+            SwingUtilities.invokeAndWait(() -> {\n+                frame.setSize(200, 100);\n+            });\n+            robot.waitForIdle();\n+            robot.delay(100);\n+            robot.mouseMove(leftBtnPos0.x, leftBtnPos0.y);\n+            robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n+            robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n+            robot.waitForIdle();\n+            robot.delay(100);\n+            robot.mouseMove(rightBtnPos1.x, rightBtnPos1.y);\n+            robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n+            robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n+            robot.waitForIdle();\n+            robot.delay(100);\n+\n+            SwingUtilities.invokeAndWait(() -> {\n+                if (jsp0.getDividerLocation() > jsp0.getMaximumDividerLocation() ||\n+                        jsp1.getDividerLocation() > jsp1.getMaximumDividerLocation()) {\n+                    passed = false;\n+                }\n+            });\n+\n+            if (!passed) {\n+                throw new RuntimeException(\"The divider location couldn't \" +\n+                        \"be greater then its maximum location\");\n+            }\n+            System.out.println(\"Test Passed!\");\n+        } finally {\n+            SwingUtilities.invokeAndWait(() -> {\n+                if (frame != null) {\n+                    frame.dispose();\n+                }\n+            });\n+        }\n+    }\n+\n+    static class TestSplitPaneUI extends BasicSplitPaneUI {\n+        int i;\n+\n+        public TestSplitPaneUI(int i) {\n+            super();\n+            this.i = i;\n+        }\n+\n+        public BasicSplitPaneDivider createDefaultDivider() {\n+            return new TestSplitPaneDivider(this, i);\n+        }\n+    }\n+\n+    static class TestSplitPaneDivider extends BasicSplitPaneDivider {\n+        int i = 0;\n+\n+        public TestSplitPaneDivider(BasicSplitPaneUI ui, int i) {\n+            super(ui);\n+            this.i = i;\n+        }\n+\n+        protected JButton createLeftOneTouchButton() {\n+            leftOneTouchButton[i] = super.createLeftOneTouchButton();\n+            return leftOneTouchButton[i];\n+        }\n+\n+        protected JButton createRightOneTouchButton() {\n+            rightOneTouchButton[i] = super.createRightOneTouchButton();\n+            return rightOneTouchButton[i];\n+        }\n+    }\n+}\n","filename":"test\/jdk\/javax\/swing\/JSplitPane\/bug4870674.java","additions":181,"deletions":0,"binary":false,"changes":181,"status":"added"},{"patch":"@@ -0,0 +1,96 @@\n+\/*\n+ * Copyright (c) 2000, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 4122109\n+ * @summary Ensure SwingUtilities.getDeepestComponentAt() works correctly\n+ *    (in this particular case, with JTabbedPane)\n+ * @key headful\n+ * @run main GetComponentAtTest\n+ *\/\n+\n+import java.awt.BorderLayout;\n+import java.awt.Color;\n+import java.awt.Robot;\n+\n+import javax.swing.JFrame;\n+import javax.swing.JPanel;\n+import javax.swing.JTabbedPane;\n+import javax.swing.SwingUtilities;\n+\n+public class GetComponentAtTest {\n+   static JFrame f;\n+\n+   public static void main(String[] args) throws Exception {\n+      try {\n+         Robot robot = new Robot();\n+         SwingUtilities.invokeAndWait(() -> {\n+            f = new JFrame(\"GetComponentAtTest\");\n+            JTabbedPane tabbedpane = new JTabbedPane();\n+            f.getContentPane().add(tabbedpane, BorderLayout.CENTER);\n+\n+            JPanel panel1 = new JPanel();\n+            panel1.setName(\"Panel 1\");\n+            panel1.setLayout(new BorderLayout());\n+            tabbedpane.add(panel1);\n+            JPanel subPanel = new JPanel();\n+            subPanel.setName(\"Sub-Panel\");\n+            subPanel.setBackground(Color.green);\n+            panel1.add(subPanel); \/\/ add sub panel to 1st tab\n+\n+            JPanel panel2 = new JPanel();\n+            panel2.setName(\"Panel 2\");\n+            tabbedpane.add(panel2);\n+\n+            f.setSize(150, 150);\n+            f.setVisible(true);\n+\n+            robot.delay(1000);\n+\n+            tabbedpane.setSelectedIndex(1); \/\/ display 2nd tab\n+            tabbedpane.invalidate();\n+            tabbedpane.validate();\n+            if (SwingUtilities.getDeepestComponentAt(tabbedpane, 50, 50) != panel2) {\n+               throw new RuntimeException(\"SwingUtilities.getDeepestComponentAt() \" +\n+                       \"returned incorrect component! (1)\");\n+            }\n+\n+            tabbedpane.setSelectedIndex(0); \/\/ display 1st tab\n+            tabbedpane.invalidate();\n+            tabbedpane.validate();\n+            if (SwingUtilities.getDeepestComponentAt(tabbedpane, 50, 50) != subPanel) {\n+               throw new RuntimeException(\"SwingUtilities.getDeepestComponentAt() \" +\n+                       \"returned incorrect component! (2)\");\n+            }\n+         });\n+      } finally {\n+         SwingUtilities.invokeAndWait(() -> {\n+            if (f != null) {\n+               f.dispose();\n+            }\n+         });\n+      }\n+\n+   }\n+}\n","filename":"test\/jdk\/javax\/swing\/JTabbedPane\/GetComponentAtTest.java","additions":96,"deletions":0,"binary":false,"changes":96,"status":"added"},{"patch":"@@ -0,0 +1,97 @@\n+\/*\n+ * Copyright (c) 1999, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 4213896 4228439\n+ * @summary Ensure that inserting a new tab with a component\n+ * where that component already exists as another tab is handled\n+ * properly. The old tab should be removed and the new tab added.\n+ * @key headful\n+ * @run main ReplaceCompTab\n+ *\/\n+\n+import java.awt.BorderLayout;\n+\n+import javax.swing.JFrame;\n+import javax.swing.JLabel;\n+import javax.swing.JPanel;\n+import javax.swing.JTabbedPane;\n+import javax.swing.SwingUtilities;\n+\n+public class ReplaceCompTab {\n+    static JFrame f;\n+\n+    public static void main(String[] args) throws Exception {\n+        try {\n+            SwingUtilities.invokeAndWait(() -> {\n+                f = new JFrame(\"ReplaceCompTab\");\n+                JTabbedPane tabbedpane = new JTabbedPane();\n+                f.getContentPane().add(tabbedpane, BorderLayout.CENTER);\n+\n+                JPanel comp = new JPanel();\n+\n+                \/\/ Add first tab\n+                tabbedpane.addTab(\"First(temp)\", comp);\n+\n+                \/\/ Add second tab with same component (should just replace first one)\n+                tabbedpane.insertTab(\"First\", null, comp, \"component added next\", 0);\n+\n+                \/\/ Check to ensure only a single tab exists\n+                if (tabbedpane.getTabCount() > 1) {\n+                    throw new RuntimeException(\"Only one tab should exist\");\n+                }\n+                \/\/ Check to make sure second tab correctly replaced the first\n+                if (!(tabbedpane.getTitleAt(0).equals(\"First\"))) {\n+                    throw new RuntimeException(\"Tab not replaced correctly\");\n+                }\n+                \/\/ Check to make sure adding null continues to work\n+                try {\n+                    tabbedpane.addTab(\"Second\", null);\n+                } catch (Exception e) {\n+                    throw new RuntimeException(\"Adding first null \" +\n+                            \"component failed:\", e);\n+                }\n+                try {\n+                    tabbedpane.addTab(\"Third\", null);\n+                } catch (Exception e) {\n+                    throw new RuntimeException(\"Adding subsequent null \" +\n+                            \"component failed: \", e);\n+                }\n+                try {\n+                    tabbedpane.setComponentAt(1, new JLabel(\"Second Component\"));\n+                    tabbedpane.setComponentAt(2, new JLabel(\"Third Component\"));\n+                } catch (Exception e) {\n+                    throw new RuntimeException(\"Setting null component \" +\n+                            \"to non-null failed: \", e);\n+                }\n+            });\n+        } finally {\n+            SwingUtilities.invokeAndWait(() -> {\n+                if (f != null) {\n+                    f.dispose();\n+                }\n+            });\n+        }\n+    }\n+}\n","filename":"test\/jdk\/javax\/swing\/JTabbedPane\/ReplaceCompTab.java","additions":97,"deletions":0,"binary":false,"changes":97,"status":"added"},{"patch":"@@ -0,0 +1,148 @@\n+\/*\n+ * Copyright (c) 2003, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 4703690\n+ * @summary JTabbedPane should focus proper component at the tab container\n+ * @key headful\n+ * @run main bug4703690\n+ *\/\n+\n+import java.awt.Point;\n+import java.awt.Rectangle;\n+import java.awt.Robot;\n+import java.awt.event.FocusAdapter;\n+import java.awt.event.FocusEvent;\n+import java.awt.event.InputEvent;\n+import java.util.concurrent.CountDownLatch;\n+import java.util.concurrent.TimeUnit;\n+\n+import javax.swing.JButton;\n+import javax.swing.JFrame;\n+import javax.swing.JPanel;\n+import javax.swing.JTabbedPane;\n+import javax.swing.SwingUtilities;\n+\n+public class bug4703690 {\n+    static JFrame frame;\n+    static JTabbedPane tabbedPane;\n+    static JButton one, two;\n+\n+    static final CountDownLatch focusButtonTwo = new CountDownLatch(1);\n+    static final CountDownLatch switchToTabTwo = new CountDownLatch(1);\n+    static final CountDownLatch focusButtonOne = new CountDownLatch(1);\n+    static Robot robot;\n+\n+    static Point p;\n+    static Rectangle rect;\n+\n+    public static void main(String[] args) throws Exception {\n+        bug4703690 test = new bug4703690();\n+        try {\n+            SwingUtilities.invokeAndWait(() -> {\n+                frame = new JFrame(\"bug4703690\");\n+\n+                JPanel panel = new JPanel();\n+                one = new JButton(\"Button 1\");\n+                panel.add(one);\n+                two = new JButton(\"Button 2\");\n+                panel.add(two);\n+\n+                tabbedPane = new JTabbedPane();\n+                frame.getContentPane().add(tabbedPane);\n+                tabbedPane.addTab(\"Tab one\", panel);\n+                tabbedPane.addTab(\"Tab two\", new JPanel());\n+\n+                two.addFocusListener(new FocusAdapter() {\n+                    public void focusGained(FocusEvent e) {\n+                        focusButtonTwo.countDown();\n+                    }\n+                });\n+\n+                tabbedPane.addChangeListener(e -> {\n+                    if (tabbedPane.getSelectedIndex() == 1) {\n+                        switchToTabTwo.countDown();\n+                    }\n+                });\n+\n+                frame.setSize(200, 200);\n+                frame.setLocationRelativeTo(null);\n+                frame.setVisible(true);\n+            });\n+\n+            test.execute();\n+        } finally {\n+            SwingUtilities.invokeAndWait(() -> {\n+                if (frame != null) {\n+                    frame.dispose();\n+                }\n+            });\n+        }\n+    }\n+\n+    public void execute() throws Exception {\n+        robot = new Robot();\n+        robot.setAutoDelay(50);\n+\n+        SwingUtilities.invokeAndWait(two::requestFocus);\n+\n+        if (!focusButtonTwo.await(1, TimeUnit.SECONDS)) {\n+            throw new RuntimeException(\"Button two didn't receive focus\");\n+        }\n+\n+        one.addFocusListener(new FocusAdapter() {\n+            public void focusGained(FocusEvent e) {\n+                focusButtonOne.countDown();\n+            }\n+        });\n+\n+        \/\/ Switch to tab two\n+        SwingUtilities.invokeAndWait(() -> {\n+            p = tabbedPane.getLocationOnScreen();\n+            rect = tabbedPane.getBoundsAt(1);\n+        });\n+        robot.mouseMove(p.x + rect.x + rect.width \/ 2,\n+                p.y + rect.y + rect.height \/ 2);\n+        robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n+        robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n+\n+        if (!switchToTabTwo.await(1, TimeUnit.SECONDS)) {\n+            throw new RuntimeException(\"Switching to tab two failed\");\n+        }\n+\n+        \/\/ Switch to tab one\n+        SwingUtilities.invokeAndWait(() -> {\n+            p = tabbedPane.getLocationOnScreen();\n+            rect = tabbedPane.getBoundsAt(0);\n+        });\n+        robot.mouseMove(p.x + rect.x + rect.width \/ 2,\n+                p.y + rect.y + rect.height \/ 2);\n+        robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n+        robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n+\n+        if (!focusButtonOne.await(1, TimeUnit.SECONDS)) {\n+            throw new RuntimeException(\"The 'Button 1' button doesn't have focus\");\n+        }\n+    }\n+}\n","filename":"test\/jdk\/javax\/swing\/JTabbedPane\/bug4703690.java","additions":148,"deletions":0,"binary":false,"changes":148,"status":"added"},{"patch":"@@ -0,0 +1,103 @@\n+\/*\n+ * Copyright (c) 2003, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/* @test\n+ * @bug 4849868\n+ * @summary Tests if JTextArea.getSelectionEnd works correctly\n+ * @key headful\n+ * @run main bug4849868\n+ *\/\n+\n+import java.awt.Point;\n+import java.awt.Robot;\n+import java.awt.event.InputEvent;\n+\n+import javax.swing.JFrame;\n+import javax.swing.JScrollPane;\n+import javax.swing.JTextArea;\n+import javax.swing.SwingUtilities;\n+\n+public class bug4849868 {\n+\n+    private static volatile boolean passed = false;\n+\n+    private static JTextArea textArea;\n+    private static JFrame f;\n+    private static Point p;\n+\n+    private static int end;\n+    private static int len;\n+\n+    public static void main(String[] args) throws Exception {\n+        try {\n+            Robot robot = new Robot();\n+            robot.setAutoDelay(100);\n+            robot.setAutoWaitForIdle(true);\n+\n+            SwingUtilities.invokeAndWait(() -> {\n+                f = new JFrame(\"bug4849868\");\n+                textArea = new JTextArea(\"1234\");\n+                textArea.setLineWrap(true);\n+                JScrollPane pane = new JScrollPane(textArea,\n+                        JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,\n+                        JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);\n+                f.getContentPane().add(pane);\n+                f.setSize(300, 300);\n+                f.setLocationRelativeTo(null);\n+                f.setVisible(true);\n+            });\n+\n+            robot.waitForIdle();\n+            robot.delay(1000);\n+\n+            SwingUtilities.invokeAndWait(() ->\n+                    p = textArea.getLocationOnScreen());\n+\n+            robot.mouseMove(p.x, p.y);\n+            robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n+            robot.mouseMove(p.x + 350, p.y);\n+            robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n+\n+            robot.delay(1000);\n+\n+            SwingUtilities.invokeAndWait(() -> {\n+                end = textArea.getSelectionEnd();\n+                len = textArea.getDocument().getLength();\n+            });\n+            passed = (end <= len);\n+\n+            System.out.println(\"end: \" + end);\n+            System.out.println(\"len: \" + len);\n+        } finally {\n+            SwingUtilities.invokeAndWait(() -> {\n+                if (f != null) {\n+                    f.dispose();\n+                }\n+            });\n+        }\n+\n+        if (!passed) {\n+            throw new RuntimeException(\"Test failed.\");\n+        }\n+    }\n+}\n","filename":"test\/jdk\/javax\/swing\/JTextArea\/bug4849868.java","additions":103,"deletions":0,"binary":false,"changes":103,"status":"added"},{"patch":"@@ -0,0 +1,52 @@\n+\/*\n+ * Copyright (c) 1999, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 4244613\n+ * @summary Tests that JTextField has setAction(Action) constructor\n+ * @run main bug4244613\n+ *\/\n+\n+import java.awt.event.ActionEvent;\n+\n+import javax.swing.AbstractAction;\n+import javax.swing.Action;\n+import javax.swing.JTextField;\n+\n+public class bug4244613 {\n+    \/** Auxilliary class implementing Action\n+    *\/\n+    static class NullAction extends AbstractAction {\n+        @Override\n+        public void actionPerformed(ActionEvent e) {}\n+        public Object getValue(String key) { return null; }\n+        public boolean isEnabled() { return false; }\n+    }\n+\n+    public static void main(String[] args) {\n+        JTextField tf = new JTextField(\"bug4244613\");\n+        Action action = new NullAction();\n+        tf.setAction(action);\n+    }\n+}\n","filename":"test\/jdk\/javax\/swing\/JTextField\/bug4244613.java","additions":52,"deletions":0,"binary":false,"changes":52,"status":"added"},{"patch":"@@ -0,0 +1,172 @@\n+\/*\n+ * Copyright (c) 2007, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\/*\n+ * @test\n+ * @bug 4214514\n+ * @summary\n+ *     This test checks if tool bars lay out correctly when their\n+ *     ComponentOrientation property is set to RIGHT_TO_LEFT. This test is\n+ *     manual.  The tester is asked to compare left-to-right and\n+ *     right-to-left tool bars and judge whether they are mirror images of each\n+ *     other.\n+ * @library \/test\/jdk\/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame\n+ * @run main\/manual RightLeftOrientation\n+ *\/\n+\n+import java.awt.BorderLayout;\n+import java.awt.Color;\n+import java.awt.ComponentOrientation;\n+import java.awt.Container;\n+import java.awt.Point;\n+import java.awt.event.ActionEvent;\n+import java.awt.event.ActionListener;\n+import javax.swing.ButtonGroup;\n+import javax.swing.JButton;\n+import javax.swing.JFrame;\n+import javax.swing.JPanel;\n+import javax.swing.JRadioButton;\n+import javax.swing.JToolBar;\n+import javax.swing.SwingUtilities;\n+import javax.swing.UIManager;\n+\n+public class RightLeftOrientation {\n+\n+    static JFrame ltrFrame;\n+    static JFrame rtlFrame;\n+\n+    private static final String INSTRUCTIONS = \"\"\"\n+        This test checks tool bars for correct Right-To-Left Component Orientation.\n+\n+        You should see two frames, each containing a tool bar.\n+\n+        One frame will be labelled \"Left To Right\" and will contain\n+        a tool bar with buttons starting on its left side.\n+        The other frame will be labelled \"Right To Left\" and will\n+        contain a tool bar with buttons starting on its right side.\n+\n+        The test will also contain radio buttons that can be used to set\n+        the look and feel of the tool bars.\n+        For each look and feel, you should compare the two tool bars and\n+        make sure they are mirror images of each other.\n+        You should also drag the tool bars to each corner of the frame\n+        to make sure the docking behavior is consistent between the two frames.\"\"\";\n+\n+     public static void main(String[] args) throws Exception {\n+        PassFailJFrame.builder()\n+                 .title(\"RTL test Instructions\")\n+                 .instructions(INSTRUCTIONS)\n+                 .rows((int) INSTRUCTIONS.lines().count() + 2)\n+                 .columns(35)\n+                 .testUI(RightLeftOrientation::createTestUI)\n+                 .build()\n+                 .awaitAndCheck();\n+    }\n+\n+    private static JFrame createTestUI() {\n+        JFrame frame = new JFrame(\"RightLeftOrientation\");\n+        JPanel panel = new JPanel();\n+\n+        ButtonGroup group = new ButtonGroup();\n+        JRadioButton rb;\n+        ActionListener plafChanger = new PlafChanger();\n+\n+        UIManager.LookAndFeelInfo[] lafInfos = UIManager.getInstalledLookAndFeels();\n+        for (int i = 0; i < lafInfos.length; i++) {\n+            rb = new JRadioButton(lafInfos[i].getName());\n+            rb.setActionCommand(lafInfos[i].getClassName());\n+            rb.addActionListener(plafChanger);\n+            group.add(rb);\n+            panel.add(rb);\n+            if (i == 0) {\n+                rb.setSelected(true);\n+            }\n+        }\n+\n+        frame.add(panel);\n+\n+        ltrFrame = new JFrame(\"Left To Right\");\n+        Container contentPane = ltrFrame.getContentPane();\n+        contentPane.setLayout(new BorderLayout());\n+        panel = new JPanel();\n+        panel.setBackground(Color.white);\n+        contentPane.add(\"Center\",panel);\n+        contentPane.add(\"North\",\n+                        createToolBar(ComponentOrientation.LEFT_TO_RIGHT));\n+        ltrFrame.setSize(400, 140);\n+        ltrFrame.setLocation(new Point(10, 10));\n+        ltrFrame.setVisible(true);\n+\n+        rtlFrame = new JFrame(\"Right To Left\");\n+        contentPane = rtlFrame.getContentPane();\n+        contentPane.setLayout(new BorderLayout());\n+        panel = new JPanel();\n+        panel.setBackground(Color.white);\n+        contentPane.add(\"Center\",panel);\n+        contentPane.add(\"North\",\n+                        createToolBar(ComponentOrientation.RIGHT_TO_LEFT));\n+        rtlFrame.setSize(400, 140);\n+        rtlFrame.setLocation(new Point(420, 10));\n+        rtlFrame.setVisible(true);\n+\n+        frame.pack();\n+        return frame;\n+    }\n+\n+    static class PlafChanger implements ActionListener {\n+        public void actionPerformed(ActionEvent e) {\n+            String lnfName = e.getActionCommand();\n+\n+            try {\n+                UIManager.setLookAndFeel(lnfName);\n+                SwingUtilities.updateComponentTreeUI(ltrFrame);\n+                SwingUtilities.updateComponentTreeUI(rtlFrame);\n+            }\n+            catch (Exception exc) {\n+                System.err.println(\"Could not load LookAndFeel: \" + lnfName);\n+            }\n+\n+        }\n+    }\n+\n+\n+    static JToolBar createToolBar(ComponentOrientation o) {\n+        JToolBar toolBar = new JToolBar();\n+        toolBar.setComponentOrientation(o);\n+\n+        JButton button = new JButton(\"One\");\n+        button.setComponentOrientation(o);\n+        toolBar.add(button);\n+\n+        button = new JButton(\"Two\");\n+        button.setComponentOrientation(o);\n+        toolBar.add(button);\n+\n+        button = new JButton(\"Three\");\n+        button.setComponentOrientation(o);\n+        toolBar.add(button);\n+\n+        return toolBar;\n+    }\n+\n+}\n","filename":"test\/jdk\/javax\/swing\/JToolBar\/RightLeftOrientation.java","additions":172,"deletions":0,"binary":false,"changes":172,"status":"added"},{"patch":"@@ -0,0 +1,82 @@\n+\/*\n+ * Copyright (c) 2003, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.awt.BorderLayout;\n+\n+import javax.swing.JComponent;\n+import javax.swing.JFrame;\n+import javax.swing.JLabel;\n+import javax.swing.JToolBar;\n+import javax.swing.SwingUtilities;\n+\n+\/*\n+ * @test\n+ * @bug 4203039\n+ * @summary JToolBar needs a way to limit docking to a particular orientation\n+ * @library \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame\n+ * @run main\/manual bug4203039\n+ *\/\n+\n+public class bug4203039 {\n+    private static final String instructionsText = \"\"\"\n+            This test is used to verify that application-installed\n+            components prevent the toolbar from docking in\n+            those locations.\n+\n+            This test has installed components on the SOUTH\n+            and EAST, so verify the toolbar cannot dock in those\n+            locations but can dock on the NORTH and WEST\"\"\";\n+\n+    public static void main(String[] args) throws Exception {\n+        PassFailJFrame passFailJFrame = new PassFailJFrame.Builder()\n+                .title(\"bug4203039 Instructions\")\n+                .instructions(instructionsText)\n+                .testTimeOut(5)\n+                .rows(10)\n+                .columns(35)\n+                .build();\n+\n+        SwingUtilities.invokeAndWait(() -> {\n+            JFrame frame = new JFrame(\"bug4203039\");\n+            frame.setSize(300, 200);\n+\n+            JToolBar toolbar = new JToolBar();\n+            JLabel label = new JLabel(\"This is the toolbar\");\n+            toolbar.add(label);\n+\n+            frame.add(toolbar, BorderLayout.NORTH);\n+\n+            frame.add(new JComponent(){}, BorderLayout.SOUTH);\n+            frame.add(new JComponent(){}, BorderLayout.EAST);\n+\n+            PassFailJFrame.addTestWindow(frame);\n+            PassFailJFrame.positionTestWindow(frame,\n+                    PassFailJFrame.Position.HORIZONTAL);\n+\n+            frame.setVisible(true);\n+        });\n+\n+        passFailJFrame.awaitAndCheck();\n+    }\n+}\n","filename":"test\/jdk\/javax\/swing\/JToolBar\/bug4203039.java","additions":82,"deletions":0,"binary":false,"changes":82,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -112,0 +112,4 @@\n+                robot.setAutoWaitForIdle(true);\n+                robot.waitForIdle();\n+                robot.delay(500);\n+\n","filename":"test\/jdk\/javax\/swing\/JTree\/8003400\/Test8003400.java","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -1,33 +0,0 @@\n-<!--\n- Copyright (c) 2010, 2013, Oracle and\/or its affiliates. All rights reserved.\n- DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n-\n- This code is free software; you can redistribute it and\/or modify it\n- under the terms of the GNU General Public License version 2 only, as\n- published by the Free Software Foundation.\n-\n- This code is distributed in the hope that it will be useful, but WITHOUT\n- ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- version 2 for more details (a copy is included in the LICENSE file that\n- accompanied this code).\n-\n- You should have received a copy of the GNU General Public License version\n- 2 along with this work; if not, write to the Free Software Foundation,\n- Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n-\n- Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- or visit www.oracle.com if you need additional information or have any\n- questions.\n--->\n-\n-<html>\n-<body>\n-When applet starts, you'll see a checkbox and a label with a titled border.\n-Turn on the checkbox to disable the label.\n-The test passes if the title of the border is disabled as well as the label.\n-\n-<applet width=\"300\" height=\"200\" code=\"Test4129681.class\">\n-<\/applet>\n-<\/body>\n-<\/html>\n","filename":"test\/jdk\/javax\/swing\/border\/Test4129681.html","additions":0,"deletions":33,"binary":false,"changes":33,"status":"deleted"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2010, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,0 +24,12 @@\n+import java.awt.Color;\n+import java.awt.Dimension;\n+import java.awt.Graphics2D;\n+import java.awt.Point;\n+import javax.swing.BorderFactory;\n+import javax.swing.JLabel;\n+import javax.swing.UIManager;\n+\n+import javax.imageio.ImageIO;\n+import java.awt.image.BufferedImage;\n+import java.io.File;\n+\n@@ -27,3 +39,2 @@\n- * @summary Tests enabling\/disabling of titled border's caption\n- * @author Sergey Malenkov\n- * @run applet\/manual=yesno Test4129681.html\n+ * @summary Tests disabling of titled border's caption\n+ * @run main\/othervm -Dsun.java2d.uiScale=1 Test4129681\n@@ -32,7 +43,11 @@\n-import java.awt.BorderLayout;\n-import java.awt.event.ItemEvent;\n-import java.awt.event.ItemListener;\n-import javax.swing.BorderFactory;\n-import javax.swing.JApplet;\n-import javax.swing.JCheckBox;\n-import javax.swing.JLabel;\n+public class Test4129681 {\n+    public static void main(String[] args) throws Exception {\n+        UIManager.setLookAndFeel(\"javax.swing.plaf.metal.MetalLookAndFeel\");\n+        int correctColoredPixels = 0;\n+        int totalPixels = 0;\n+        int tolerance = 20;\n+        JLabel label;\n+        Color labelDisableColor = Color.RED;\n+        Dimension SIZE = new Dimension(100, 40);\n+        Point startPoint = new Point(8, 4);\n+        Point endPoint = new Point(18, 14);\n@@ -40,2 +55,7 @@\n-public class Test4129681 extends JApplet implements ItemListener {\n-    private JLabel label;\n+        label = new JLabel(\"Label\");\n+        label.setBorder(BorderFactory.createTitledBorder(\"\\u2588\".repeat(5)));\n+        UIManager.getDefaults().put(\"Label.disabledForeground\", labelDisableColor);\n+        label.setSize(SIZE);\n+        label.setEnabled(false);\n+        BufferedImage image = new BufferedImage(label.getWidth(), label.getHeight(),\n+                BufferedImage.TYPE_INT_ARGB);\n@@ -43,4 +63,3 @@\n-    @Override\n-    public void init() {\n-        JCheckBox check = new JCheckBox(\"disable\");\n-        check.addItemListener(this);\n+        Graphics2D g2d = image.createGraphics();\n+        label.paint(g2d);\n+        g2d.dispose();\n@@ -48,7 +67,8 @@\n-        this.label = new JLabel(\"message\");\n-        this.label.setBorder(BorderFactory.createTitledBorder(\"label\"));\n-        this.label.setEnabled(!check.isSelected());\n-\n-        add(BorderLayout.NORTH, check);\n-        add(BorderLayout.CENTER, this.label);\n-    }\n+        for (int x = startPoint.x; x < endPoint.x; x++) {\n+            for (int y = startPoint.y; y < endPoint.y; y++) {\n+                if (image.getRGB(x, y) == labelDisableColor.getRGB()) {\n+                    correctColoredPixels++;\n+                }\n+                totalPixels++;\n+            }\n+        }\n@@ -56,2 +76,5 @@\n-    public void itemStateChanged(ItemEvent event) {\n-        this.label.setEnabled(ItemEvent.DESELECTED == event.getStateChange());\n+        if (((double) correctColoredPixels \/ totalPixels * 100) <= tolerance) {\n+            ImageIO.write(image, \"png\", new File(\"failureImage.png\"));\n+            throw new RuntimeException(\"Label with border is not disabled\");\n+        }\n+        System.out.println(\"Test Passed\");\n","filename":"test\/jdk\/javax\/swing\/border\/Test4129681.java","additions":49,"deletions":26,"binary":false,"changes":75,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -93,0 +93,1 @@\n+                        robot.delay(500);\n@@ -113,0 +114,1 @@\n+                robot.delay(500);\n","filename":"test\/jdk\/javax\/swing\/plaf\/basic\/BasicComboPopup\/JComboBoxPopupLocation\/JComboBoxPopupLocation.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -0,0 +1,273 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.io.IOException;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Timer;\n+import java.util.TimerTask;\n+import java.util.concurrent.BrokenBarrierException;\n+import java.util.concurrent.CyclicBarrier;\n+import java.util.concurrent.atomic.AtomicReference;\n+import java.util.stream.IntStream;\n+import java.util.stream.LongStream;\n+\n+import javax.swing.JFileChooser;\n+\n+\/*\n+ * @test\n+ * @bug 8323670 8307091 8240690\n+ * @requires os.family == \"mac\" | os.family == \"linux\"\n+ * @summary Verifies thread-safety of BasicDirectoryModel (JFileChooser)\n+ * @run main\/othervm -Djava.awt.headless=true ConcurrentModification\n+ *\/\n+public final class ConcurrentModification extends ThreadGroup {\n+    \/** Initial number of files. *\/\n+    private static final long NUMBER_OF_FILES = 50;\n+    \/** Maximum number of files created on a timer tick. *\/\n+    private static final long LIMIT_FILES = 10;\n+\n+    \/** Timer period (delay) for creating new files. *\/\n+    private static final long TIMER_PERIOD = 250;\n+\n+    \/**\n+     * Number of threads running {@code fileChooser.rescanCurrentDirectory()}.\n+     *\/\n+    private static final int NUMBER_OF_THREADS = 5;\n+    \/** Number of repeated calls to {@code rescanCurrentDirectory}. *\/\n+    private static final int NUMBER_OF_REPEATS = 2_000;\n+    \/** Maximum amount a thread waits before initiating rescan. *\/\n+    private static final long LIMIT_SLEEP = 100;\n+\n+\n+    \/** The barrier to start all the scanner threads simultaneously. *\/\n+    private static final CyclicBarrier start = new CyclicBarrier(NUMBER_OF_THREADS);\n+    \/** The barrier to wait for all the scanner threads to complete, plus main thread. *\/\n+    private static final CyclicBarrier end = new CyclicBarrier(NUMBER_OF_THREADS + 1);\n+\n+    \/** List of scanner threads. *\/\n+    private static final List<Thread> threads = new ArrayList<>(NUMBER_OF_THREADS);\n+\n+    \/**\n+     * Stores an exception caught by any of the threads.\n+     * If more exceptions are caught, they're added as suppressed exceptions.\n+     *\/\n+    private static final AtomicReference<Throwable> exception =\n+            new AtomicReference<>();\n+\n+    \/**\n+     * Stores an {@code IOException} thrown while removing the files.\n+     *\/\n+    private static final AtomicReference<IOException> ioException =\n+            new AtomicReference<>();\n+\n+\n+    public static void main(String[] args) throws Throwable {\n+        try {\n+            \/\/ Start the test in its own thread group to catch and handle\n+            \/\/ all thrown exceptions, in particular in\n+            \/\/ BasicDirectoryModel.FilesLoader which is created by Swing.\n+            ThreadGroup threadGroup = new ConcurrentModification();\n+            Thread runner = new Thread(threadGroup,\n+                                       ConcurrentModification::wrapper,\n+                                       \"Test Runner\");\n+            runner.start();\n+            runner.join();\n+        } catch (Throwable throwable) {\n+            handleException(throwable);\n+        }\n+\n+        if (ioException.get() != null) {\n+            System.err.println(\"An error occurred while removing files:\");\n+            ioException.get().printStackTrace();\n+        }\n+\n+        if (exception.get() != null) {\n+            throw exception.get();\n+        }\n+    }\n+\n+    private static void wrapper() {\n+        final long timeStart = System.currentTimeMillis();\n+        try {\n+            runTest(timeStart);\n+        } catch (Throwable throwable) {\n+            handleException(throwable);\n+        } finally {\n+            System.out.printf(\"Duration: %,d\\n\",\n+                              (System.currentTimeMillis() - timeStart));\n+        }\n+    }\n+\n+    private static void runTest(final long timeStart) throws Throwable {\n+        final Path temp = Files.createDirectory(Paths.get(\"fileChooser-concurrency-\" + timeStart));\n+\n+        final Timer timer = new Timer(\"File creator\");\n+\n+        try {\n+            createFiles(temp);\n+\n+            final JFileChooser fc = new JFileChooser(temp.toFile());\n+\n+            IntStream.range(0, NUMBER_OF_THREADS)\n+                     .forEach(i -> {\n+                         Thread thread = new Thread(new Scanner(fc));\n+                         threads.add(thread);\n+                         thread.start();\n+                     });\n+\n+            timer.scheduleAtFixedRate(new CreateFilesTimerTask(temp),\n+                                      0, TIMER_PERIOD);\n+\n+            end.await();\n+        } catch (Throwable e) {\n+            threads.forEach(Thread::interrupt);\n+            throw e;\n+        } finally {\n+            timer.cancel();\n+\n+            deleteFiles(temp);\n+            deleteFile(temp);\n+        }\n+    }\n+\n+\n+    private ConcurrentModification() {\n+        super(\"bdmConcurrency\");\n+    }\n+\n+    @Override\n+    public void uncaughtException(Thread t, Throwable e) {\n+        handleException(t, e);\n+    }\n+\n+    private static void handleException(Throwable throwable) {\n+        handleException(Thread.currentThread(), throwable);\n+    }\n+\n+    private static void handleException(final Thread thread,\n+                                        final Throwable throwable) {\n+        System.err.println(\"Exception in \" + thread.getName() + \": \"\n+                           + throwable.getClass()\n+                           + (throwable.getMessage() != null\n+                              ? \": \" + throwable.getMessage()\n+                              : \"\"));\n+        if (!exception.compareAndSet(null, throwable)) {\n+            exception.get().addSuppressed(throwable);\n+        }\n+        threads.stream()\n+               .filter(t -> t != thread)\n+               .forEach(Thread::interrupt);\n+    }\n+\n+\n+    private record Scanner(JFileChooser fileChooser)\n+            implements Runnable {\n+\n+        @Override\n+        public void run() {\n+            try {\n+                start.await();\n+\n+                int counter = 0;\n+                try {\n+                    do {\n+                        fileChooser.rescanCurrentDirectory();\n+                        Thread.sleep((long) (Math.random() * LIMIT_SLEEP));\n+                    } while (++counter < NUMBER_OF_REPEATS\n+                             && !Thread.interrupted());\n+                } catch (InterruptedException e) {\n+                    \/\/ Just exit the loop\n+                }\n+            } catch (Throwable throwable) {\n+                handleException(throwable);\n+            } finally {\n+                try {\n+                    end.await();\n+                } catch (InterruptedException | BrokenBarrierException e) {\n+                    handleException(e);\n+                }\n+            }\n+        }\n+    }\n+\n+    private static void createFiles(final Path parent) {\n+        createFiles(parent, 0, NUMBER_OF_FILES);\n+    }\n+\n+    private static void createFiles(final Path parent,\n+                                    final long start,\n+                                    final long end) {\n+        LongStream.range(start, end)\n+                  .forEach(n -> createFile(parent.resolve(n + \".file\")));\n+    }\n+\n+    private static void createFile(final Path file) {\n+        try {\n+            Files.createFile(file);\n+        } catch (IOException e) {\n+            throw new RuntimeException(e);\n+        }\n+    }\n+\n+    private static void deleteFiles(final Path parent) throws IOException {\n+        try (var stream = Files.walk(parent)) {\n+            stream.filter(p -> p != parent)\n+                  .forEach(ConcurrentModification::deleteFile);\n+        }\n+    }\n+\n+    private static void deleteFile(final Path file) {\n+        try {\n+            Files.delete(file);\n+        } catch (IOException e) {\n+            if (!ioException.compareAndSet(null, e)) {\n+                ioException.get().addSuppressed(e);\n+            }\n+        }\n+    }\n+\n+    private static final class CreateFilesTimerTask extends TimerTask {\n+        private final Path temp;\n+        private long no;\n+\n+        public CreateFilesTimerTask(Path temp) {\n+            this.temp = temp;\n+            no = NUMBER_OF_FILES;\n+        }\n+\n+        @Override\n+        public void run() {\n+            try {\n+                long count = (long) (Math.random() * LIMIT_FILES);\n+                createFiles(temp, no, no + count);\n+                no += count;\n+            } catch (Throwable t) {\n+                handleException(t);\n+            }\n+        }\n+    }\n+}\n","filename":"test\/jdk\/javax\/swing\/plaf\/basic\/BasicDirectoryModel\/ConcurrentModification.java","additions":273,"deletions":0,"binary":false,"changes":273,"status":"added"},{"patch":"@@ -0,0 +1,277 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.io.IOException;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.List;\n+import java.util.Objects;\n+import java.util.concurrent.BrokenBarrierException;\n+import java.util.concurrent.CyclicBarrier;\n+import java.util.concurrent.atomic.AtomicReference;\n+import java.util.stream.LongStream;\n+import java.util.stream.Stream;\n+\n+import javax.swing.JFileChooser;\n+\n+\/*\n+ * @test\n+ * @bug 8325179\n+ * @requires os.family == \"windows\"\n+ * @summary Verifies there's only one BasicDirectoryModel.FilesLoader thread\n+ *          at any given moment\n+ * @run main\/othervm -Djava.awt.headless=true LoaderThreadCount\n+ *\/\n+public final class LoaderThreadCount extends ThreadGroup {\n+    \/** Initial number of files. *\/\n+    private static final long NUMBER_OF_FILES = 500;\n+\n+    \/**\n+     * Number of threads running {@code fileChooser.rescanCurrentDirectory()}.\n+     *\/\n+    private static final int NUMBER_OF_THREADS = 5;\n+\n+    \/** Number of snapshots with live threads. *\/\n+    private static final int SNAPSHOTS = 20;\n+\n+    \/** The barrier to synchronise scanner threads and capturing live threads. *\/\n+    private static final CyclicBarrier start = new CyclicBarrier(NUMBER_OF_THREADS + 1);\n+\n+    \/** List of scanner threads. *\/\n+    private static final List<Thread> threads = new ArrayList<>(NUMBER_OF_THREADS);\n+\n+    \/**\n+     * Stores an exception caught by any of the threads.\n+     * If more exceptions are caught, they're added as suppressed exceptions.\n+     *\/\n+    private static final AtomicReference<Throwable> exception =\n+            new AtomicReference<>();\n+\n+    \/**\n+     * Stores an {@code IOException} thrown while removing the files.\n+     *\/\n+    private static final AtomicReference<IOException> ioException =\n+            new AtomicReference<>();\n+\n+\n+    public static void main(String[] args) throws Throwable {\n+        try {\n+            \/\/ Start the test in its own thread group to catch and handle\n+            \/\/ all thrown exceptions, in particular in\n+            \/\/ BasicDirectoryModel.FilesLoader which is created by Swing.\n+            ThreadGroup threadGroup = new LoaderThreadCount();\n+            Thread runner = new Thread(threadGroup,\n+                                       LoaderThreadCount::wrapper,\n+                                       \"Test Runner\");\n+            runner.start();\n+            runner.join();\n+        } catch (Throwable throwable) {\n+            handleException(throwable);\n+        }\n+\n+        if (ioException.get() != null) {\n+            System.err.println(\"An error occurred while removing files:\");\n+            ioException.get().printStackTrace();\n+        }\n+\n+        if (exception.get() != null) {\n+            throw exception.get();\n+        }\n+    }\n+\n+    private static void wrapper() {\n+        final long timeStart = System.currentTimeMillis();\n+        try {\n+            runTest(timeStart);\n+        } catch (Throwable throwable) {\n+            handleException(throwable);\n+        } finally {\n+            System.out.printf(\"Duration: %,d\\n\",\n+                              (System.currentTimeMillis() - timeStart));\n+        }\n+    }\n+\n+    private static void runTest(final long timeStart) throws Throwable {\n+        final Path temp = Files.createDirectory(Paths.get(\"fileChooser-concurrency-\" + timeStart));\n+\n+        try {\n+            createFiles(temp);\n+\n+            final JFileChooser fc = new JFileChooser(temp.toFile());\n+\n+            threads.addAll(Stream.generate(() -> new Thread(new Scanner(fc)))\n+                                 .limit(NUMBER_OF_THREADS)\n+                                 .toList());\n+            threads.forEach(Thread::start);\n+\n+            \/\/ Create snapshots of live threads\n+            List<Thread[]> threadsCapture =\n+                    Stream.generate(LoaderThreadCount::getThreadSnapshot)\n+                          .limit(SNAPSHOTS)\n+                          .toList();\n+\n+            threads.forEach(Thread::interrupt);\n+\n+            List<Long> loaderCount =\n+                    threadsCapture.stream()\n+                                  .map(ta -> Arrays.stream(ta)\n+                                                   .filter(Objects::nonNull)\n+                                                   .map(Thread::getName)\n+                                                   .filter(tn -> tn.startsWith(\"Basic L&F File Loading Thread\"))\n+                                                   .count())\n+                                  .filter(c -> c > 0)\n+                                  .toList();\n+\n+            if (loaderCount.isEmpty()) {\n+                throw new RuntimeException(\"Invalid results: no loader threads detected\");\n+            }\n+\n+            System.out.println(\"Number of snapshots: \" + loaderCount.size());\n+\n+            long ones = loaderCount.stream()\n+                                   .filter(n -> n == 1)\n+                                   .count();\n+            long twos = loaderCount.stream()\n+                                   .filter(n -> n == 2)\n+                                   .count();\n+            long count = loaderCount.stream()\n+                                    .filter(n -> n > 2)\n+                                    .count();\n+            System.out.println(\"Number of snapshots where number of loader threads:\");\n+            System.out.println(\"  = 1: \" + ones);\n+            System.out.println(\"  = 2: \" + twos);\n+            System.out.println(\"  > 2: \" + count);\n+            if (count > loaderCount.size() \/ 2) {\n+                throw new RuntimeException(\"Detected \" + count + \" snapshots \"\n+                                           + \"with several loading threads\");\n+            }\n+        } catch (Throwable e) {\n+            threads.forEach(Thread::interrupt);\n+            throw e;\n+        } finally {\n+            deleteFiles(temp);\n+            deleteFile(temp);\n+        }\n+    }\n+\n+    private static Thread[] getThreadSnapshot() {\n+        try {\n+            start.await();\n+            \/\/ Allow for the scanner threads to initiate re-scanning\n+            Thread.sleep(10);\n+\n+            Thread[] array = new Thread[Thread.activeCount()];\n+            Thread.currentThread()\n+                  .getThreadGroup()\n+                  .enumerate(array, false);\n+\n+            \/\/ Additional delay between captures\n+            Thread.sleep(500);\n+\n+            return array;\n+        } catch (InterruptedException | BrokenBarrierException e) {\n+            handleException(e);\n+            throw new RuntimeException(\"getThreadSnapshot is interrupted\");\n+        }\n+    }\n+\n+\n+    private LoaderThreadCount() {\n+        super(\"bdmConcurrency\");\n+    }\n+\n+    @Override\n+    public void uncaughtException(Thread t, Throwable e) {\n+        handleException(t, e);\n+    }\n+\n+    private static void handleException(Throwable throwable) {\n+        handleException(Thread.currentThread(), throwable);\n+    }\n+\n+    private static void handleException(final Thread thread,\n+                                        final Throwable throwable) {\n+        System.err.println(\"Exception in \" + thread.getName() + \": \"\n+                           + throwable.getClass()\n+                           + (throwable.getMessage() != null\n+                              ? \": \" + throwable.getMessage()\n+                              : \"\"));\n+        if (!exception.compareAndSet(null, throwable)) {\n+            exception.get().addSuppressed(throwable);\n+        }\n+        threads.stream()\n+               .filter(t -> t != thread)\n+               .forEach(Thread::interrupt);\n+    }\n+\n+\n+    private record Scanner(JFileChooser fileChooser)\n+            implements Runnable {\n+\n+        @Override\n+        public void run() {\n+            try {\n+                do {\n+                    start.await();\n+                    fileChooser.rescanCurrentDirectory();\n+                } while (!Thread.interrupted());\n+            } catch (InterruptedException | BrokenBarrierException e) {\n+                \/\/ Just exit the loop\n+            }\n+        }\n+    }\n+\n+    private static void createFiles(final Path parent) {\n+        LongStream.range(0, LoaderThreadCount.NUMBER_OF_FILES)\n+                  .mapToObj(n -> parent.resolve(n + \".file\"))\n+                  .forEach(LoaderThreadCount::createFile);\n+    }\n+\n+    private static void createFile(final Path file) {\n+        try {\n+            Files.createFile(file);\n+        } catch (IOException e) {\n+            throw new RuntimeException(e);\n+        }\n+    }\n+\n+    private static void deleteFiles(final Path parent) throws IOException {\n+        try (var stream = Files.walk(parent)) {\n+            stream.filter(p -> p != parent)\n+                  .forEach(LoaderThreadCount::deleteFile);\n+        }\n+    }\n+\n+    private static void deleteFile(final Path file) {\n+        try {\n+            Files.delete(file);\n+        } catch (IOException e) {\n+            if (!ioException.compareAndSet(null, e)) {\n+                ioException.get().addSuppressed(e);\n+            }\n+        }\n+    }\n+}\n","filename":"test\/jdk\/javax\/swing\/plaf\/basic\/BasicDirectoryModel\/LoaderThreadCount.java","additions":277,"deletions":0,"binary":false,"changes":277,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -43,0 +43,1 @@\n+    static JFrame frame;\n@@ -58,1 +59,1 @@\n-        JFrame frame = new JFrame();\n+        frame = new JFrame();\n@@ -60,0 +61,1 @@\n+        frame.setLocationRelativeTo(null);\n@@ -83,0 +85,2 @@\n+        robot.delay(500);\n+\n@@ -85,1 +89,3 @@\n-        robot.delay(200);\n+        robot.delay(500);\n+\n+        SwingUtilities.invokeAndWait(() -> frame.dispose());\n","filename":"test\/jdk\/javax\/swing\/plaf\/basic\/BasicMenuUI\/4983388\/bug4983388.java","additions":9,"deletions":3,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,1 +28,1 @@\n- * @summary tests delte-next-word and delete-prev-word actions for all text compnents and all look&feels\n+ * @summary tests delete-next-word and delete-prev-word actions for all text components and all look&feels\n@@ -52,0 +52,2 @@\n+    private static JFrame frame;\n+    private static Robot robot;\n@@ -59,0 +61,4 @@\n+        robot = new Robot();\n+        robot.setAutoWaitForIdle(true);\n+        robot.setAutoDelay(50);\n+\n@@ -63,3 +69,12 @@\n-                boolean res = test(clazz);\n-                if (!res && clazz != JPasswordField.class) {\n-                    throw new RuntimeException(\"failed\");\n+                try {\n+                    boolean res = test(clazz);\n+                    if (!res && clazz != JPasswordField.class) {\n+                        throw new RuntimeException(\"failed\");\n+                    }\n+                } finally {\n+                    SwingUtilities.invokeAndWait(() -> {\n+                        if (frame != null) {\n+                            frame.dispose();\n+                            frame = null;\n+                        }\n+                    });\n@@ -72,5 +87,0 @@\n-        Robot robot = new Robot();\n-        robot.setAutoWaitForIdle(true);\n-        robot.setAutoDelay(50);\n-\n-\n@@ -86,0 +96,1 @@\n+        robot.delay(500);\n@@ -123,0 +134,1 @@\n+        robot.delay(250);\n@@ -155,1 +167,1 @@\n-            JFrame frame = new JFrame();\n+            frame = new JFrame();\n","filename":"test\/jdk\/javax\/swing\/text\/JTextComponent\/5074573\/bug5074573.java","additions":23,"deletions":11,"binary":false,"changes":34,"status":"modified"},{"patch":"@@ -0,0 +1,108 @@\n+\/*\n+ * Copyright (c) 1999, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 4210250\n+ * @summary Tests that PlainView repaints the necessary lines of text.\n+ * @library \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame\n+ * @run main\/manual PaintTest\n+ *\/\n+\n+import java.awt.Container;\n+import java.awt.Dimension;\n+import java.awt.FlowLayout;\n+import java.awt.Rectangle;\n+import java.awt.event.ActionEvent;\n+import java.awt.event.ActionListener;\n+import javax.swing.JButton;\n+import javax.swing.JFrame;\n+import javax.swing.JScrollPane;\n+import javax.swing.JTextArea;\n+import javax.swing.SwingUtilities;\n+\n+public class PaintTest {\n+\n+    private static final String INSTRUCTIONS = \"\"\"\n+        Click the paint button.\n+        If half of the second line is erased,\n+        that is you can only see the bottom half of the second line\n+        with the top half painted over in white, click fail, else click pass.\"\"\";\n+\n+\n+    public static void main(String[] args) throws Exception {\n+        PassFailJFrame.builder()\n+                .title(\"PlainView Repaint Instructions\")\n+                .instructions(INSTRUCTIONS)\n+                .rows(7)\n+                .columns(35)\n+                .testUI(PaintTest::createTestUI)\n+                .build()\n+                .awaitAndCheck();\n+    }\n+\n+    private static JFrame createTestUI() {\n+        JFrame frame = new JFrame(\"PaintTest\");\n+\n+        new PaintTest().create(frame.getContentPane());\n+        frame.pack();\n+        return frame;\n+    }\n+\n+\n+    void create(Container parent) {\n+        parent.setLayout(new FlowLayout());\n+\n+        final JTextArea ta = new JTextArea\n+            (\"A sample textarea\\nwith a couple of lines\\nof text\") {\n+                public Dimension getPreferredSize() {\n+                    Dimension size = super.getPreferredSize();\n+                    if (getFont() != null) {\n+                        size.height += getFontMetrics(getFont())\n+                                       .getHeight() \/ 2;\n+                    }\n+                    return size;\n+                }\n+            };\n+        JButton button = new JButton(\"paint\");\n+\n+        button.addActionListener(new ActionListener() {\n+            public void actionPerformed(ActionEvent ae) {\n+                SwingUtilities.invokeLater(new Runnable() {\n+                    public void run() {\n+                        Rectangle taBounds = ta.getBounds();\n+                        int fontHeight =\n+                            ta.getFontMetrics(ta.getFont()).getHeight();\n+\n+                        taBounds.height = fontHeight + fontHeight \/ 2;\n+                        ta.repaint(taBounds);\n+                    }\n+                });\n+            }\n+        });\n+\n+        parent.add(new JScrollPane(ta));\n+        parent.add(button);\n+    }\n+}\n","filename":"test\/jdk\/javax\/swing\/text\/PaintTest.java","additions":108,"deletions":0,"binary":false,"changes":108,"status":"added"},{"patch":"@@ -0,0 +1,109 @@\n+\/*\n+ * Copyright (c) 1999, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 4148489\n+ * @summary Text gets deleted with negative values for setFirstLineIndent.\n+ * @library \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame\n+ * @run main\/manual bug4148489\n+ *\/\n+\n+import java.awt.BorderLayout;\n+import javax.swing.JFrame;\n+import javax.swing.JPanel;\n+import javax.swing.JScrollPane;\n+import javax.swing.JTextPane;\n+import javax.swing.UIManager;\n+import javax.swing.text.BadLocationException;\n+import javax.swing.text.DefaultStyledDocument;\n+import javax.swing.text.JTextComponent;\n+import javax.swing.text.StyleConstants;\n+import javax.swing.text.StyleContext;\n+import javax.swing.text.Style;\n+\n+public class bug4148489 {\n+\n+    static StyleContext sc;\n+    static DefaultStyledDocument doc;\n+\n+    private static final String INSTRUCTIONS = \"\"\"\n+        Put the cursor at the beginning of the first text line and move the\n+        cursor to the right using arrow key.\n+        If the text is not corrupted then click Pass\n+        If the text disappear while cursor moves click Fail.\"\"\";\n+\n+    public static void main(String[] args) throws Exception {\n+        PassFailJFrame.builder()\n+                .title(\"Text traversal Instructions\")\n+                .instructions(INSTRUCTIONS)\n+                .rows(5)\n+                .columns(35)\n+                .testUI(bug4148489::createTestUI)\n+                .build()\n+                .awaitAndCheck();\n+    }\n+\n+    private static JFrame createTestUI() {\n+        try {\n+            UIManager.setLookAndFeel(UIManager.getCrossPlatformLookAndFeelClassName());\n+        } catch (Exception e) {\n+            System.err.println(\"Error loading L&F: \" + e);\n+        }\n+        JPanel testPanel = new JPanel();\n+        testPanel.setLayout(new BorderLayout());\n+        sc = new StyleContext();\n+        doc = new DefaultStyledDocument(sc);\n+\n+        setParagraph();\n+        JTextComponent editor = new JTextPane(doc);\n+        JScrollPane scroller = new JScrollPane();\n+        scroller.getViewport().add(editor);\n+        JPanel panel = new JPanel();\n+        panel.setLayout(new BorderLayout());\n+        panel.add(\"Center\", scroller);\n+        testPanel.add(\"Center\", panel);\n+        JFrame frame = new JFrame(\"Styled Document\");\n+        frame.add(testPanel);\n+        frame.pack();\n+        return frame;\n+    }\n+\n+    static void setParagraph() {\n+        Style sty = sc.addStyle(\"normal\", sc.getStyle(StyleContext.DEFAULT_STYLE));\n+        \/\/here sets the negative value for setFirstLineIndent\n+        StyleConstants.setFirstLineIndent(sty, -50);\n+        StyleConstants.setLeftIndent(sty, 50);\n+        String data = \"Here I wrote some text for test. You can ignore this text because of it's a senseless text.\";\n+        try {\n+            Style s = null;\n+            doc.insertString(doc.getLength(), data, s);\n+            Style ls = sc.getStyle(\"normal\");\n+            doc.setLogicalStyle(doc.getLength() - 1, ls);\n+            doc.insertString(doc.getLength(), \"\\n\", null);\n+        } catch (BadLocationException e) {\n+            throw new RuntimeException(\"BadLocationException occures while calls insertString()...\", e);\n+        }\n+    }\n+}\n","filename":"test\/jdk\/javax\/swing\/text\/bug4148489.java","additions":109,"deletions":0,"binary":false,"changes":109,"status":"added"},{"patch":"@@ -0,0 +1,135 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.awt.Dimension;\n+import java.awt.Graphics;\n+import java.awt.image.BufferedImage;\n+import java.io.File;\n+import java.io.IOException;\n+\n+import javax.imageio.ImageIO;\n+import javax.swing.JEditorPane;\n+import javax.swing.text.View;\n+import javax.swing.text.html.CSS;\n+\n+\/*\n+ * @test\n+ * @bug 8326734\n+ * @summary Tests different combinations of setting 'line-through'\n+ * @run main HTMLStrikeOnly\n+ *\/\n+public class HTMLStrikeOnly {\n+    private static final String HTML = \"\"\"\n+            <!DOCTYPE html>\n+            <html lang=\"en\">\n+            <head>\n+                <meta charset=\"UTF-8\">\n+                <title>line-through<\/title>\n+                <style>\n+                    .lineThrough   { text-decoration: line-through }\n+                <\/style>\n+            <\/head>\n+            <body>\n+            <p><s><span style='text-decoration: line-through'>line-through?<\/span><\/s><\/p>\n+            <p><strike><span style='text-decoration: line-through'>line-through?<\/span><\/strike><\/p>\n+            <p><span style='text-decoration: line-through'><s>line-through?<\/s><\/span><\/p>\n+            <p><span style='text-decoration: line-through'><strike>line-through?<\/strike><\/span><\/p>\n+\n+            <p><s><span class=\"lineThrough\">line-through?<\/span><\/s><\/p>\n+            <p><strike><span class=\"lineThrough\">line-through?<\/span><\/strike><\/p>\n+            <p><span class=\"lineThrough\"><s>line-through?<\/s><\/span><\/p>\n+            <p><span class=\"lineThrough\"><strike>line-through?<\/strike><\/span><\/p>\n+\n+            <p style='text-decoration: line-through'><s>line-through?<\/s><\/p>\n+            <p style='text-decoration: line-through'><strike>line-through?<\/strike><\/p>\n+            <p style='text-decoration: line-through'><span style='text-decoration: line-through'>line-through?<\/span><\/p>\n+\n+            <p class=\"lineThrough\"><s>line-through<\/s><\/p>\n+            <p class=\"lineThrough\"><strike>line-through<\/strike><\/p>\n+            <p class=\"lineThrough\"><span style='text-decoration: line-through'>line-through<\/span><\/p>\n+            <p class=\"lineThrough\"><span class=\"lineThrough\">line-through<\/span><\/p>\n+            <\/body>\n+            <\/html>\n+            \"\"\";\n+    public static void main(String[] args) {\n+        final JEditorPane html = new JEditorPane(\"text\/html\", HTML);\n+        html.setEditable(false);\n+\n+        final Dimension size = html.getPreferredSize();\n+        html.setSize(size);\n+\n+        BufferedImage image = new BufferedImage(size.width, size.height,\n+                                                BufferedImage.TYPE_INT_RGB);\n+        Graphics g = image.createGraphics();\n+        \/\/ Paint the editor pane to ensure all views are created\n+        html.paint(g);\n+        g.dispose();\n+\n+        int errorCount = 0;\n+        String firstError = null;\n+\n+        System.out.println(\"----- Views -----\");\n+        final View bodyView = html.getUI()\n+                                  .getRootView(html)\n+                                  .getView(1)\n+                                  .getView(1);\n+        for (int i = 0; i < bodyView.getViewCount(); i++) {\n+            View pView = bodyView.getView(i);\n+            View contentView = getContentView(pView);\n+\n+            String decoration =\n+                    contentView.getAttributes()\n+                               .getAttribute(CSS.Attribute.TEXT_DECORATION)\n+                               .toString();\n+\n+            System.out.println(i + \": \" + decoration);\n+            if (!decoration.contains(\"line-through\")\n+                || decoration.contains(\"underline\")) {\n+                errorCount++;\n+                if (firstError == null) {\n+                    firstError = \"Line \" + i + \": \" + decoration;\n+                }\n+            }\n+        }\n+\n+        if (errorCount > 0) {\n+            saveImage(image);\n+            throw new RuntimeException(errorCount + \" error(s) found, \"\n+                                       + \"the first one: \" + firstError);\n+        }\n+    }\n+\n+    private static View getContentView(View parent) {\n+        View view = parent.getView(0);\n+        return view.getViewCount() > 0\n+               ? getContentView(view)\n+               : view;\n+    }\n+\n+    private static void saveImage(BufferedImage image) {\n+        try {\n+            ImageIO.write(image, \"png\",\n+                          new File(\"html.png\"));\n+        } catch (IOException ignored) { }\n+    }\n+}\n","filename":"test\/jdk\/javax\/swing\/text\/html\/HTMLDocument\/HTMLStrikeOnly.java","additions":135,"deletions":0,"binary":false,"changes":135,"status":"added"},{"patch":"@@ -0,0 +1,157 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.awt.Dimension;\n+import java.awt.Graphics;\n+import java.awt.image.BufferedImage;\n+import java.io.File;\n+import java.io.IOException;\n+\n+import javax.imageio.ImageIO;\n+import javax.swing.JEditorPane;\n+import javax.swing.text.View;\n+import javax.swing.text.html.CSS;\n+\n+\/*\n+ * @test\n+ * @bug 8323801 8326734\n+ * @summary Tests different combination of 'underline' and 'line-through';\n+ *          the text should render with both 'underline' and 'line-through'.\n+ * @run main HTMLTextDecoration\n+ *\/\n+public final class HTMLTextDecoration {\n+    private static final String HTML = \"\"\"\n+            <!DOCTYPE html>\n+            <html lang=\"en\">\n+            <head>\n+                <meta charset=\"UTF-8\">\n+                <title>underline + line-through text<\/title>\n+                <style>\n+                    .underline   { text-decoration: underline }\n+                    .lineThrough { text-decoration: line-through }\n+                <\/style>\n+            <\/head>\n+            <body>\n+            <p><u><span style='text-decoration: line-through'>underline + line-through?<\/span><\/u><\/p>\n+            <p><s><span style='text-decoration: underline'>underline + line-through?<\/span><\/s><\/p>\n+            <p><strike><span style='text-decoration: underline'>underline + line-through?<\/span><\/strike><\/p>\n+\n+            <p><span style='text-decoration: line-through'><u>underline + line-through?<\/u><\/span><\/p>\n+            <p><span style='text-decoration: underline'><s>underline + line-through?<\/s><\/span><\/p>\n+            <p><span style='text-decoration: underline'><strike>underline + line-through?<\/strike><\/span><\/p>\n+\n+            <p><span style='text-decoration: line-through'><span style='text-decoration: underline'>underline + line-through?<\/span><\/span><\/p>\n+            <p><span style='text-decoration: underline'><span style='text-decoration: line-through'>underline + line-through?<\/span><\/span><\/p>\n+\n+            <p style='text-decoration: line-through'><u>underline + line-through?<\/u><\/p>\n+            <p style='text-decoration: underline'><s>underline + line-through?<\/s><\/p>\n+            <p style='text-decoration: underline'><strike>underline + line-through?<\/strike><\/p>\n+\n+            <p style='text-decoration: line-through'><span style='text-decoration: underline'>underline + line-through?<\/span><\/p>\n+            <p style='text-decoration: underline'><span style='text-decoration: line-through'>underline + line-through?<\/span><\/p>\n+\n+            <p class=\"underline\"><span class=\"lineThrough\">underline + line-through?<\/span><\/p>\n+            <p class=\"underline\"><s>underline + line-through?<\/s><\/p>\n+            <p class=\"underline\"><strike>underline + line-through?<\/strike><\/p>\n+\n+            <p class=\"lineThrough\"><span class=\"underline\">underline + line-through?<\/span><\/p>\n+            <p class=\"lineThrough\"><u>underline + line-through?<\/u><\/p>\n+\n+            <div class=\"underline\"><span class=\"lineThrough\">underline + line-through?<\/span><\/div>\n+            <div class=\"underline\"><s>underline + line-through?<\/s><\/div>\n+            <div class=\"underline\"><strike>underline + line-through?<\/strike><\/div>\n+\n+            <div class=\"lineThrough\"><span class=\"underline\">underline + line-through?<\/span><\/div>\n+            <div class=\"lineThrough\"><u>underline + line-through?<\/u><\/div>\n+\n+            <div class=\"underline\"><p class=\"lineThrough\">underline + line-through?<\/p><\/div>\n+            <div class=\"lineThrough\"><p class=\"underline\">underline + line-through?<\/p><\/div>\n+\n+            <div class=\"underline\"><div class=\"lineThrough\">underline + line-through?<\/div><\/div>\n+            <div class=\"lineThrough\"><div class=\"underline\">underline + line-through?<\/div><\/div>\n+            <\/body>\n+            <\/html>\n+            \"\"\";\n+\n+    public static void main(String[] args) {\n+        final JEditorPane html = new JEditorPane(\"text\/html\", HTML);\n+        html.setEditable(false);\n+\n+        final Dimension size = html.getPreferredSize();\n+        html.setSize(size);\n+\n+        BufferedImage image = new BufferedImage(size.width, size.height,\n+                                                BufferedImage.TYPE_INT_RGB);\n+        Graphics g = image.createGraphics();\n+        \/\/ Paint the editor pane to ensure all views are created\n+        html.paint(g);\n+        g.dispose();\n+\n+        int errorCount = 0;\n+        String firstError = null;\n+\n+        System.out.println(\"----- Views -----\");\n+        final View bodyView = html.getUI()\n+                                  .getRootView(html)\n+                                  .getView(1)\n+                                  .getView(1);\n+        for (int i = 0; i < bodyView.getViewCount(); i++) {\n+            View pView = bodyView.getView(i);\n+            View contentView = getContentView(pView);\n+\n+            String decoration =\n+                    contentView.getAttributes()\n+                               .getAttribute(CSS.Attribute.TEXT_DECORATION)\n+                               .toString();\n+\n+            System.out.println(i + \": \" + decoration);\n+            if (!decoration.contains(\"underline\")\n+                || !decoration.contains(\"line-through\")) {\n+                errorCount++;\n+                if (firstError == null) {\n+                    firstError = \"Line \" + i + \": \" + decoration;\n+                }\n+            }\n+        }\n+\n+        if (errorCount > 0) {\n+            saveImage(image);\n+            throw new RuntimeException(errorCount + \" error(s) found, \"\n+                                       + \"the first one: \" + firstError);\n+        }\n+    }\n+\n+    private static View getContentView(View parent) {\n+        View view = parent.getView(0);\n+        return view.getViewCount() > 0\n+               ? getContentView(view)\n+               : view;\n+    }\n+\n+    private static void saveImage(BufferedImage image) {\n+        try {\n+            ImageIO.write(image, \"png\",\n+                          new File(\"html.png\"));\n+        } catch (IOException ignored) { }\n+    }\n+}\n","filename":"test\/jdk\/javax\/swing\/text\/html\/HTMLDocument\/HTMLTextDecoration.java","additions":157,"deletions":0,"binary":false,"changes":157,"status":"added"},{"patch":"@@ -0,0 +1,128 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.awt.Dimension;\n+import java.awt.Graphics;\n+import java.awt.image.BufferedImage;\n+import java.io.File;\n+import java.io.IOException;\n+\n+import javax.imageio.ImageIO;\n+import javax.swing.JEditorPane;\n+import javax.swing.text.View;\n+import javax.swing.text.html.CSS;\n+\n+\/*\n+ * @test\n+ * @bug 8335967\n+ * @summary Tests 'text-decoration: none' is respected\n+ * @run main HTMLTextDecorationNone\n+ *\/\n+public final class HTMLTextDecorationNone {\n+    private static final String HTML = \"\"\"\n+            <!DOCTYPE html>\n+            <html lang=\"en\">\n+            <head>\n+                <meta charset=\"UTF-8\">\n+                <title>text-decoration: none (&lt;a&gt;)<\/title>\n+                <style>\n+                    a.none { text-decoration: none }\n+                <\/style>\n+            <\/head>\n+            <body>\n+            <p><a href=\"https:\/\/openjdk.org\/\">underlined<\/a><\/p>\n+            <p><a href=\"https:\/\/openjdk.org\/\" style=\"text-decoration: none\">not underlined<\/a><\/p>\n+            <p><a href=\"https:\/\/openjdk.org\/\" class=\"none\">not underlined<\/a><\/p>\n+            <p style=\"text-decoration: underline\"><a\n+                   href=\"https:\/\/openjdk.org\/\" style=\"text-decoration: none\">underlined?<\/a><\/p>\n+            <p style=\"text-decoration: underline\"><a\n+                   href=\"https:\/\/openjdk.org\/\" class=\"none\">underlined?<\/a><\/p>\n+            <\/body>\n+            <\/html>\n+            \"\"\";\n+\n+    private static final boolean[] underlined = {true, false, false, true, true};\n+\n+    public static void main(String[] args) {\n+        final JEditorPane html = new JEditorPane(\"text\/html\", HTML);\n+        html.setEditable(false);\n+\n+        final Dimension size = html.getPreferredSize();\n+        html.setSize(size);\n+\n+        BufferedImage image = new BufferedImage(size.width, size.height,\n+                                                BufferedImage.TYPE_INT_RGB);\n+        Graphics g = image.createGraphics();\n+        \/\/ Paint the editor pane to ensure all views are created\n+        html.paint(g);\n+        g.dispose();\n+\n+        int errorCount = 0;\n+        String firstError = null;\n+\n+        System.out.println(\"----- Views -----\");\n+        final View bodyView = html.getUI()\n+                                  .getRootView(html)\n+                                  .getView(1)\n+                                  .getView(1);\n+        for (int i = 0; i < bodyView.getViewCount(); i++) {\n+            View pView = bodyView.getView(i);\n+            View contentView = getContentView(pView);\n+\n+            Object decorationAttr =\n+                    contentView.getAttributes()\n+                               .getAttribute(CSS.Attribute.TEXT_DECORATION);\n+            String decoration = decorationAttr == null\n+                                ? \"none\" : decorationAttr.toString();\n+\n+            System.out.println(i + \": \" + decoration);\n+            if (decoration.contains(\"underline\") != underlined[i]) {\n+                errorCount++;\n+                if (firstError == null) {\n+                    firstError = \"Line \" + i + \": \" + decoration + \" vs \"\n+                                 + (underlined[i] ? \"underline\" : \"none\");\n+                }\n+            }\n+        }\n+\n+        if (errorCount > 0) {\n+            saveImage(image);\n+            throw new RuntimeException(errorCount + \" error(s) found, \"\n+                                       + \"the first one: \" + firstError);\n+        }\n+    }\n+\n+    private static View getContentView(View parent) {\n+        View view = parent.getView(0);\n+        return view.getViewCount() > 0\n+               ? getContentView(view)\n+               : view;\n+    }\n+\n+    private static void saveImage(BufferedImage image) {\n+        try {\n+            ImageIO.write(image, \"png\",\n+                          new File(\"html.png\"));\n+        } catch (IOException ignored) { }\n+    }\n+}\n","filename":"test\/jdk\/javax\/swing\/text\/html\/HTMLDocument\/HTMLTextDecorationNone.java","additions":128,"deletions":0,"binary":false,"changes":128,"status":"added"},{"patch":"@@ -0,0 +1,129 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.awt.Dimension;\n+import java.awt.Graphics;\n+import java.awt.image.BufferedImage;\n+import java.io.File;\n+import java.io.IOException;\n+\n+import javax.imageio.ImageIO;\n+import javax.swing.JEditorPane;\n+import javax.swing.text.View;\n+import javax.swing.text.html.CSS;\n+\n+\/*\n+ * @test\n+ * @bug 8326734\n+ * @summary Tests different combinations of setting 'underline'\n+ * @run main HTMLUnderlineOnly\n+ *\/\n+public class HTMLUnderlineOnly {\n+    private static final String HTML = \"\"\"\n+            <!DOCTYPE html>\n+            <html lang=\"en\">\n+            <head>\n+                <meta charset=\"UTF-8\">\n+                <title>underline<\/title>\n+                <style>\n+                    .underline   { text-decoration: underline }\n+                <\/style>\n+            <\/head>\n+            <body>\n+            <p><u><span style='text-decoration: underline'>underline?<\/span><\/u><\/p>\n+            <p><span style='text-decoration: underline'><u>underline?<\/u><\/span><\/p>\n+\n+            <p><u><span class=\"underline\">underline?<\/span><\/u><\/p>\n+            <p><span class=\"underline\"><u>underline?<\/u><\/span><\/p>\n+\n+            <p style='text-decoration: underline'><u>underline?<\/u><\/p>\n+            <p style='text-decoration: underline'><span style='text-decoration: underline'>underline?<\/span><\/p>\n+\n+            <p class=\"underline\"><u>underline<\/u><\/p>\n+            <p class=\"underline\"><span style='text-decoration: underline'>underline<\/span><\/p>\n+            <p class=\"underline\"><span class=\"underline\">underline<\/span><\/p>\n+            <\/body>\n+            <\/html>\n+            \"\"\";\n+    public static void main(String[] args) {\n+        final JEditorPane html = new JEditorPane(\"text\/html\", HTML);\n+        html.setEditable(false);\n+\n+        final Dimension size = html.getPreferredSize();\n+        html.setSize(size);\n+\n+        BufferedImage image = new BufferedImage(size.width, size.height,\n+                                                BufferedImage.TYPE_INT_RGB);\n+        Graphics g = image.createGraphics();\n+        \/\/ Paint the editor pane to ensure all views are created\n+        html.paint(g);\n+        g.dispose();\n+\n+        int errorCount = 0;\n+        String firstError = null;\n+\n+        System.out.println(\"----- Views -----\");\n+        final View bodyView = html.getUI()\n+                                  .getRootView(html)\n+                                  .getView(1)\n+                                  .getView(1);\n+        for (int i = 0; i < bodyView.getViewCount(); i++) {\n+            View pView = bodyView.getView(i);\n+            View contentView = getContentView(pView);\n+\n+            String decoration =\n+                    contentView.getAttributes()\n+                               .getAttribute(CSS.Attribute.TEXT_DECORATION)\n+                               .toString();\n+\n+            System.out.println(i + \": \" + decoration);\n+            if (!decoration.contains(\"underline\")\n+                || decoration.contains(\"line-through\")) {\n+                errorCount++;\n+                if (firstError == null) {\n+                    firstError = \"Line \" + i + \": \" + decoration;\n+                }\n+            }\n+        }\n+\n+        if (errorCount > 0) {\n+            saveImage(image);\n+            throw new RuntimeException(errorCount + \" error(s) found, \"\n+                                       + \"the first one: \" + firstError);\n+        }\n+    }\n+\n+    private static View getContentView(View parent) {\n+        View view = parent.getView(0);\n+        return view.getViewCount() > 0\n+               ? getContentView(view)\n+               : view;\n+    }\n+\n+    private static void saveImage(BufferedImage image) {\n+        try {\n+            ImageIO.write(image, \"png\",\n+                          new File(\"html.png\"));\n+        } catch (IOException ignored) { }\n+    }\n+}\n","filename":"test\/jdk\/javax\/swing\/text\/html\/HTMLDocument\/HTMLUnderlineOnly.java","additions":129,"deletions":0,"binary":false,"changes":129,"status":"added"},{"patch":"@@ -0,0 +1,89 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.io.StringReader;\n+\n+import javax.swing.text.AttributeSet;\n+import javax.swing.text.Element;\n+import javax.swing.text.html.CSS;\n+import javax.swing.text.html.HTMLDocument;\n+import javax.swing.text.html.HTMLEditorKit;\n+\n+\/*\n+ * @test\n+ * @bug 8323801 8326734\n+ * @summary Tests that '<u><s>' produce underlined and struck-through text\n+ *\/\n+public final class HTMLUnderlineStrike {\n+    private static final String HTML = \"\"\"\n+            <!DOCTYPE html>\n+            <html lang=\"en\">\n+            <head>\n+                <meta charset=\"UTF-8\">\n+                <title>Strike-through text<\/title>\n+            <\/head>\n+            <body>\n+            <p><u><s>struck?<\/s><\/u><\/p>\n+            <p><span style='text-decoration: underline'><s>struck?<\/s><\/span><\/p>\n+\n+            <p><u><strike>struck?<\/strike><\/u><\/p>\n+            <p><span style='text-decoration: underline'><strike>struck?<\/strike><\/span><\/p>\n+            <\/body>\n+            <\/html>\n+            \"\"\";\n+\n+    public static void main(String[] args) throws Exception {\n+        HTMLEditorKit kit = new HTMLEditorKit();\n+        HTMLDocument doc = new HTMLDocument();\n+\n+        try (StringReader reader = new StringReader(HTML)) {\n+            kit.read(reader, doc, 0);\n+        }\n+\n+        StringBuilder errors = new StringBuilder();\n+\n+        Element root = doc.getDefaultRootElement();\n+        Element body = root.getElement(1);\n+        for (int i = 0; i < body.getElementCount(); i++) {\n+            Element p = body.getElement(i);\n+            Element content = p.getElement(0);\n+            AttributeSet attr = content.getAttributes();\n+            Object decoration = attr.getAttribute(CSS.Attribute.TEXT_DECORATION);\n+            String strDecoration = decoration.toString();\n+            System.out.println(i + \": \" + decoration);\n+            if (!strDecoration.contains(\"line-through\")\n+                || !strDecoration.contains(\"underline\")) {\n+                errors.append(\"<p>[\")\n+                      .append(i)\n+                      .append(\"], \");\n+            }\n+        }\n+\n+        if (!errors.isEmpty()) {\n+            errors.delete(errors.length() - 2, errors.length());\n+            throw new RuntimeException(errors + \" must have both \"\n+                                       + \"'line-through' and 'underline' in \"\n+                                       + \"'text-decoration'\");\n+        }\n+    }\n+}\n","filename":"test\/jdk\/javax\/swing\/text\/html\/HTMLDocument\/HTMLUnderlineStrike.java","additions":89,"deletions":0,"binary":false,"changes":89,"status":"added"},{"patch":"@@ -0,0 +1,97 @@\n+\/*\n+ * Copyright (c) 2003, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 4803145\n+ * @summary  Tests if bullets for HTML <ul> are on the correct side for Arabic and Hebrew in JEditorPane\n+ * @library \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame\n+ * @run main\/manual bug4803145\n+*\/\n+\n+import java.awt.BorderLayout;\n+import java.awt.ComponentOrientation;\n+import java.awt.event.ActionEvent;\n+import java.awt.event.ActionListener;\n+import javax.swing.JButton;\n+import javax.swing.JEditorPane;\n+import javax.swing.JFrame;\n+import javax.swing.text.html.HTMLEditorKit;\n+\n+public class bug4803145 {\n+\n+    private static final String INSTRUCTIONS = \"\"\"\n+        A JEditorPane with some html list in Hebrew appears.\n+        The bullets should be on the left side of the list items.\n+        Press the \"switch text orientation\" button.\n+        After the text relayouts:\n+\n+            - If the bullets are to the right of the list items then test PASSED.\n+\n+            - If the bullets remained on the left side then test FAILED.\"\"\";\n+\n+    public static void main(String[] args) throws Exception {\n+         PassFailJFrame.builder()\n+                .title(\"JEditorPane Instructions\")\n+                .instructions(INSTRUCTIONS)\n+                .rows(10)\n+                .columns(30)\n+                .testUI(bug4803145::createTestUI)\n+                .build()\n+                .awaitAndCheck();\n+    }\n+\n+    private static JFrame createTestUI() {\n+\n+        String text =\n+           \"<ul>\" +\n+             \"<li>&#1502;&#1489;&#1493;&#1488;\" +\n+             \"<li>&#1488;&#1495;&#1505;&#1493;&#1503;\" +\n+             \"<li>(new code) &#1492;&#1511;&#1493;&#1491; &#1492;&#1497;&#1513;&#1503; (Old Code)\" +\n+            \"<\/ul>\";\n+\n+        JFrame f = new JFrame(\"bug4803145\");\n+        JEditorPane jep = new JEditorPane();\n+        jep.setEditorKit(new HTMLEditorKit());\n+        jep.setEditable(false);\n+\n+        jep.setText(text);\n+\n+        f.setSize(500, 500);\n+        f.add(jep);\n+\n+        JButton switchButton = new JButton(\"switch text orientation\");\n+        switchButton.addActionListener(new ActionListener() {\n+            public void actionPerformed(ActionEvent e) {\n+                boolean isLeftToRight = jep.getComponentOrientation().isLeftToRight();\n+                jep.setComponentOrientation(isLeftToRight ? ComponentOrientation.RIGHT_TO_LEFT :\n+                                                            ComponentOrientation.LEFT_TO_RIGHT);\n+            }\n+        });\n+        f.add(switchButton, BorderLayout.SOUTH);\n+        f.pack();\n+        return f;\n+    }\n+\n+}\n","filename":"test\/jdk\/javax\/swing\/text\/html\/StyleSheet\/bug4803145.java","additions":97,"deletions":0,"binary":false,"changes":97,"status":"added"},{"patch":"@@ -63,0 +63,2 @@\n+    \/\/ for floating point reduction ops that may introduce rounding errors\n+    private static final double RELATIVE_ROUNDING_ERROR = (double)0.000001;\n@@ -122,0 +124,6 @@\n+        assertReductionArraysEquals(r, rc, a, f, fa, (double)0.0);\n+    }\n+\n+    static void assertReductionArraysEquals(double[] r, double rc, double[] a,\n+                                            FReductionOp f, FReductionAllOp fa,\n+                                            double relativeError) {\n@@ -124,1 +132,1 @@\n-            Assert.assertEquals(rc, fa.apply(a));\n+            Assert.assertEquals(rc, fa.apply(a), Math.abs(rc * relativeError));\n@@ -126,1 +134,1 @@\n-                Assert.assertEquals(r[i], f.apply(a, i));\n+                Assert.assertEquals(r[i], f.apply(a, i), Math.abs(r[i] * relativeError));\n@@ -129,2 +137,2 @@\n-            Assert.assertEquals(rc, fa.apply(a), \"Final result is incorrect!\");\n-            Assert.assertEquals(r[i], f.apply(a, i), \"at index #\" + i);\n+            Assert.assertEquals(rc, fa.apply(a), Math.abs(rc * relativeError), \"Final result is incorrect!\");\n+            Assert.assertEquals(r[i], f.apply(a, i), Math.abs(r[i] * relativeError), \"at index #\" + i);\n@@ -144,0 +152,6 @@\n+        assertReductionArraysEqualsMasked(r, rc, a, mask, f, fa, (double)0.0);\n+    }\n+\n+    static void assertReductionArraysEqualsMasked(double[] r, double rc, double[] a, boolean[] mask,\n+                                            FReductionMaskedOp f, FReductionAllMaskedOp fa,\n+                                            double relativeError) {\n@@ -146,1 +160,1 @@\n-            Assert.assertEquals(rc, fa.apply(a, mask));\n+            Assert.assertEquals(rc, fa.apply(a, mask), Math.abs(rc * relativeError));\n@@ -148,1 +162,2 @@\n-                Assert.assertEquals(r[i], f.apply(a, i, mask));\n+                Assert.assertEquals(r[i], f.apply(a, i, mask), Math.abs(r[i] *\n+relativeError));\n@@ -151,2 +166,2 @@\n-            Assert.assertEquals(rc, fa.apply(a, mask), \"Final result is incorrect!\");\n-            Assert.assertEquals(r[i], f.apply(a, i, mask), \"at index #\" + i);\n+            Assert.assertEquals(rc, fa.apply(a, mask), Math.abs(rc * relativeError), \"Final result is incorrect!\");\n+            Assert.assertEquals(r[i], f.apply(a, i, mask), Math.abs(r[i] * relativeError), \"at index #\" + i);\n@@ -1081,0 +1096,8 @@\n+            withToString(\"double[0.01 + (i \/ (i + 1))]\", (int s) -> {\n+                return fill(s * BUFFER_REPS,\n+                            i -> (double)0.01 + ((double)i \/ (i + 1)));\n+            }),\n+            withToString(\"double[i -> i % 17 == 0 ? cornerCaseValue(i) : 0.01 + (i \/ (i + 1))]\", (int s) -> {\n+                return fill(s * BUFFER_REPS,\n+                            i -> i % 17 == 0 ? cornerCaseValue(i) : (double)0.01 + ((double)i \/ (i + 1)));\n+            }),\n@@ -2171,1 +2194,1 @@\n-                Double128VectorTests::ADDReduce, Double128VectorTests::ADDReduceAll);\n+                Double128VectorTests::ADDReduce, Double128VectorTests::ADDReduceAll, RELATIVE_ROUNDING_ERROR);\n@@ -2217,1 +2240,1 @@\n-                Double128VectorTests::ADDReduceMasked, Double128VectorTests::ADDReduceAllMasked);\n+                Double128VectorTests::ADDReduceMasked, Double128VectorTests::ADDReduceAllMasked, RELATIVE_ROUNDING_ERROR);\n@@ -2260,1 +2283,1 @@\n-                Double128VectorTests::MULReduce, Double128VectorTests::MULReduceAll);\n+                Double128VectorTests::MULReduce, Double128VectorTests::MULReduceAll, RELATIVE_ROUNDING_ERROR);\n@@ -2306,1 +2329,1 @@\n-                Double128VectorTests::MULReduceMasked, Double128VectorTests::MULReduceAllMasked);\n+                Double128VectorTests::MULReduceMasked, Double128VectorTests::MULReduceAllMasked, RELATIVE_ROUNDING_ERROR);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/Double128VectorTests.java","additions":35,"deletions":12,"binary":false,"changes":47,"status":"modified"},{"patch":"@@ -63,0 +63,2 @@\n+    \/\/ for floating point reduction ops that may introduce rounding errors\n+    private static final double RELATIVE_ROUNDING_ERROR = (double)0.000001;\n@@ -122,0 +124,6 @@\n+        assertReductionArraysEquals(r, rc, a, f, fa, (double)0.0);\n+    }\n+\n+    static void assertReductionArraysEquals(double[] r, double rc, double[] a,\n+                                            FReductionOp f, FReductionAllOp fa,\n+                                            double relativeError) {\n@@ -124,1 +132,1 @@\n-            Assert.assertEquals(rc, fa.apply(a));\n+            Assert.assertEquals(rc, fa.apply(a), Math.abs(rc * relativeError));\n@@ -126,1 +134,1 @@\n-                Assert.assertEquals(r[i], f.apply(a, i));\n+                Assert.assertEquals(r[i], f.apply(a, i), Math.abs(r[i] * relativeError));\n@@ -129,2 +137,2 @@\n-            Assert.assertEquals(rc, fa.apply(a), \"Final result is incorrect!\");\n-            Assert.assertEquals(r[i], f.apply(a, i), \"at index #\" + i);\n+            Assert.assertEquals(rc, fa.apply(a), Math.abs(rc * relativeError), \"Final result is incorrect!\");\n+            Assert.assertEquals(r[i], f.apply(a, i), Math.abs(r[i] * relativeError), \"at index #\" + i);\n@@ -144,0 +152,6 @@\n+        assertReductionArraysEqualsMasked(r, rc, a, mask, f, fa, (double)0.0);\n+    }\n+\n+    static void assertReductionArraysEqualsMasked(double[] r, double rc, double[] a, boolean[] mask,\n+                                            FReductionMaskedOp f, FReductionAllMaskedOp fa,\n+                                            double relativeError) {\n@@ -146,1 +160,1 @@\n-            Assert.assertEquals(rc, fa.apply(a, mask));\n+            Assert.assertEquals(rc, fa.apply(a, mask), Math.abs(rc * relativeError));\n@@ -148,1 +162,2 @@\n-                Assert.assertEquals(r[i], f.apply(a, i, mask));\n+                Assert.assertEquals(r[i], f.apply(a, i, mask), Math.abs(r[i] *\n+relativeError));\n@@ -151,2 +166,2 @@\n-            Assert.assertEquals(rc, fa.apply(a, mask), \"Final result is incorrect!\");\n-            Assert.assertEquals(r[i], f.apply(a, i, mask), \"at index #\" + i);\n+            Assert.assertEquals(rc, fa.apply(a, mask), Math.abs(rc * relativeError), \"Final result is incorrect!\");\n+            Assert.assertEquals(r[i], f.apply(a, i, mask), Math.abs(r[i] * relativeError), \"at index #\" + i);\n@@ -1081,0 +1096,8 @@\n+            withToString(\"double[0.01 + (i \/ (i + 1))]\", (int s) -> {\n+                return fill(s * BUFFER_REPS,\n+                            i -> (double)0.01 + ((double)i \/ (i + 1)));\n+            }),\n+            withToString(\"double[i -> i % 17 == 0 ? cornerCaseValue(i) : 0.01 + (i \/ (i + 1))]\", (int s) -> {\n+                return fill(s * BUFFER_REPS,\n+                            i -> i % 17 == 0 ? cornerCaseValue(i) : (double)0.01 + ((double)i \/ (i + 1)));\n+            }),\n@@ -2171,1 +2194,1 @@\n-                Double256VectorTests::ADDReduce, Double256VectorTests::ADDReduceAll);\n+                Double256VectorTests::ADDReduce, Double256VectorTests::ADDReduceAll, RELATIVE_ROUNDING_ERROR);\n@@ -2217,1 +2240,1 @@\n-                Double256VectorTests::ADDReduceMasked, Double256VectorTests::ADDReduceAllMasked);\n+                Double256VectorTests::ADDReduceMasked, Double256VectorTests::ADDReduceAllMasked, RELATIVE_ROUNDING_ERROR);\n@@ -2260,1 +2283,1 @@\n-                Double256VectorTests::MULReduce, Double256VectorTests::MULReduceAll);\n+                Double256VectorTests::MULReduce, Double256VectorTests::MULReduceAll, RELATIVE_ROUNDING_ERROR);\n@@ -2306,1 +2329,1 @@\n-                Double256VectorTests::MULReduceMasked, Double256VectorTests::MULReduceAllMasked);\n+                Double256VectorTests::MULReduceMasked, Double256VectorTests::MULReduceAllMasked, RELATIVE_ROUNDING_ERROR);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/Double256VectorTests.java","additions":35,"deletions":12,"binary":false,"changes":47,"status":"modified"},{"patch":"@@ -63,0 +63,2 @@\n+    \/\/ for floating point reduction ops that may introduce rounding errors\n+    private static final double RELATIVE_ROUNDING_ERROR = (double)0.000001;\n@@ -122,0 +124,6 @@\n+        assertReductionArraysEquals(r, rc, a, f, fa, (double)0.0);\n+    }\n+\n+    static void assertReductionArraysEquals(double[] r, double rc, double[] a,\n+                                            FReductionOp f, FReductionAllOp fa,\n+                                            double relativeError) {\n@@ -124,1 +132,1 @@\n-            Assert.assertEquals(rc, fa.apply(a));\n+            Assert.assertEquals(rc, fa.apply(a), Math.abs(rc * relativeError));\n@@ -126,1 +134,1 @@\n-                Assert.assertEquals(r[i], f.apply(a, i));\n+                Assert.assertEquals(r[i], f.apply(a, i), Math.abs(r[i] * relativeError));\n@@ -129,2 +137,2 @@\n-            Assert.assertEquals(rc, fa.apply(a), \"Final result is incorrect!\");\n-            Assert.assertEquals(r[i], f.apply(a, i), \"at index #\" + i);\n+            Assert.assertEquals(rc, fa.apply(a), Math.abs(rc * relativeError), \"Final result is incorrect!\");\n+            Assert.assertEquals(r[i], f.apply(a, i), Math.abs(r[i] * relativeError), \"at index #\" + i);\n@@ -144,0 +152,6 @@\n+        assertReductionArraysEqualsMasked(r, rc, a, mask, f, fa, (double)0.0);\n+    }\n+\n+    static void assertReductionArraysEqualsMasked(double[] r, double rc, double[] a, boolean[] mask,\n+                                            FReductionMaskedOp f, FReductionAllMaskedOp fa,\n+                                            double relativeError) {\n@@ -146,1 +160,1 @@\n-            Assert.assertEquals(rc, fa.apply(a, mask));\n+            Assert.assertEquals(rc, fa.apply(a, mask), Math.abs(rc * relativeError));\n@@ -148,1 +162,2 @@\n-                Assert.assertEquals(r[i], f.apply(a, i, mask));\n+                Assert.assertEquals(r[i], f.apply(a, i, mask), Math.abs(r[i] *\n+relativeError));\n@@ -151,2 +166,2 @@\n-            Assert.assertEquals(rc, fa.apply(a, mask), \"Final result is incorrect!\");\n-            Assert.assertEquals(r[i], f.apply(a, i, mask), \"at index #\" + i);\n+            Assert.assertEquals(rc, fa.apply(a, mask), Math.abs(rc * relativeError), \"Final result is incorrect!\");\n+            Assert.assertEquals(r[i], f.apply(a, i, mask), Math.abs(r[i] * relativeError), \"at index #\" + i);\n@@ -1081,0 +1096,8 @@\n+            withToString(\"double[0.01 + (i \/ (i + 1))]\", (int s) -> {\n+                return fill(s * BUFFER_REPS,\n+                            i -> (double)0.01 + ((double)i \/ (i + 1)));\n+            }),\n+            withToString(\"double[i -> i % 17 == 0 ? cornerCaseValue(i) : 0.01 + (i \/ (i + 1))]\", (int s) -> {\n+                return fill(s * BUFFER_REPS,\n+                            i -> i % 17 == 0 ? cornerCaseValue(i) : (double)0.01 + ((double)i \/ (i + 1)));\n+            }),\n@@ -2171,1 +2194,1 @@\n-                Double512VectorTests::ADDReduce, Double512VectorTests::ADDReduceAll);\n+                Double512VectorTests::ADDReduce, Double512VectorTests::ADDReduceAll, RELATIVE_ROUNDING_ERROR);\n@@ -2217,1 +2240,1 @@\n-                Double512VectorTests::ADDReduceMasked, Double512VectorTests::ADDReduceAllMasked);\n+                Double512VectorTests::ADDReduceMasked, Double512VectorTests::ADDReduceAllMasked, RELATIVE_ROUNDING_ERROR);\n@@ -2260,1 +2283,1 @@\n-                Double512VectorTests::MULReduce, Double512VectorTests::MULReduceAll);\n+                Double512VectorTests::MULReduce, Double512VectorTests::MULReduceAll, RELATIVE_ROUNDING_ERROR);\n@@ -2306,1 +2329,1 @@\n-                Double512VectorTests::MULReduceMasked, Double512VectorTests::MULReduceAllMasked);\n+                Double512VectorTests::MULReduceMasked, Double512VectorTests::MULReduceAllMasked, RELATIVE_ROUNDING_ERROR);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/Double512VectorTests.java","additions":35,"deletions":12,"binary":false,"changes":47,"status":"modified"},{"patch":"@@ -63,0 +63,2 @@\n+    \/\/ for floating point reduction ops that may introduce rounding errors\n+    private static final double RELATIVE_ROUNDING_ERROR = (double)0.000001;\n@@ -122,0 +124,6 @@\n+        assertReductionArraysEquals(r, rc, a, f, fa, (double)0.0);\n+    }\n+\n+    static void assertReductionArraysEquals(double[] r, double rc, double[] a,\n+                                            FReductionOp f, FReductionAllOp fa,\n+                                            double relativeError) {\n@@ -124,1 +132,1 @@\n-            Assert.assertEquals(rc, fa.apply(a));\n+            Assert.assertEquals(rc, fa.apply(a), Math.abs(rc * relativeError));\n@@ -126,1 +134,1 @@\n-                Assert.assertEquals(r[i], f.apply(a, i));\n+                Assert.assertEquals(r[i], f.apply(a, i), Math.abs(r[i] * relativeError));\n@@ -129,2 +137,2 @@\n-            Assert.assertEquals(rc, fa.apply(a), \"Final result is incorrect!\");\n-            Assert.assertEquals(r[i], f.apply(a, i), \"at index #\" + i);\n+            Assert.assertEquals(rc, fa.apply(a), Math.abs(rc * relativeError), \"Final result is incorrect!\");\n+            Assert.assertEquals(r[i], f.apply(a, i), Math.abs(r[i] * relativeError), \"at index #\" + i);\n@@ -144,0 +152,6 @@\n+        assertReductionArraysEqualsMasked(r, rc, a, mask, f, fa, (double)0.0);\n+    }\n+\n+    static void assertReductionArraysEqualsMasked(double[] r, double rc, double[] a, boolean[] mask,\n+                                            FReductionMaskedOp f, FReductionAllMaskedOp fa,\n+                                            double relativeError) {\n@@ -146,1 +160,1 @@\n-            Assert.assertEquals(rc, fa.apply(a, mask));\n+            Assert.assertEquals(rc, fa.apply(a, mask), Math.abs(rc * relativeError));\n@@ -148,1 +162,2 @@\n-                Assert.assertEquals(r[i], f.apply(a, i, mask));\n+                Assert.assertEquals(r[i], f.apply(a, i, mask), Math.abs(r[i] *\n+relativeError));\n@@ -151,2 +166,2 @@\n-            Assert.assertEquals(rc, fa.apply(a, mask), \"Final result is incorrect!\");\n-            Assert.assertEquals(r[i], f.apply(a, i, mask), \"at index #\" + i);\n+            Assert.assertEquals(rc, fa.apply(a, mask), Math.abs(rc * relativeError), \"Final result is incorrect!\");\n+            Assert.assertEquals(r[i], f.apply(a, i, mask), Math.abs(r[i] * relativeError), \"at index #\" + i);\n@@ -1081,0 +1096,8 @@\n+            withToString(\"double[0.01 + (i \/ (i + 1))]\", (int s) -> {\n+                return fill(s * BUFFER_REPS,\n+                            i -> (double)0.01 + ((double)i \/ (i + 1)));\n+            }),\n+            withToString(\"double[i -> i % 17 == 0 ? cornerCaseValue(i) : 0.01 + (i \/ (i + 1))]\", (int s) -> {\n+                return fill(s * BUFFER_REPS,\n+                            i -> i % 17 == 0 ? cornerCaseValue(i) : (double)0.01 + ((double)i \/ (i + 1)));\n+            }),\n@@ -2171,1 +2194,1 @@\n-                Double64VectorTests::ADDReduce, Double64VectorTests::ADDReduceAll);\n+                Double64VectorTests::ADDReduce, Double64VectorTests::ADDReduceAll, RELATIVE_ROUNDING_ERROR);\n@@ -2217,1 +2240,1 @@\n-                Double64VectorTests::ADDReduceMasked, Double64VectorTests::ADDReduceAllMasked);\n+                Double64VectorTests::ADDReduceMasked, Double64VectorTests::ADDReduceAllMasked, RELATIVE_ROUNDING_ERROR);\n@@ -2260,1 +2283,1 @@\n-                Double64VectorTests::MULReduce, Double64VectorTests::MULReduceAll);\n+                Double64VectorTests::MULReduce, Double64VectorTests::MULReduceAll, RELATIVE_ROUNDING_ERROR);\n@@ -2306,1 +2329,1 @@\n-                Double64VectorTests::MULReduceMasked, Double64VectorTests::MULReduceAllMasked);\n+                Double64VectorTests::MULReduceMasked, Double64VectorTests::MULReduceAllMasked, RELATIVE_ROUNDING_ERROR);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/Double64VectorTests.java","additions":35,"deletions":12,"binary":false,"changes":47,"status":"modified"},{"patch":"@@ -68,0 +68,2 @@\n+    \/\/ for floating point reduction ops that may introduce rounding errors\n+    private static final double RELATIVE_ROUNDING_ERROR = (double)0.000001;\n@@ -127,0 +129,6 @@\n+        assertReductionArraysEquals(r, rc, a, f, fa, (double)0.0);\n+    }\n+\n+    static void assertReductionArraysEquals(double[] r, double rc, double[] a,\n+                                            FReductionOp f, FReductionAllOp fa,\n+                                            double relativeError) {\n@@ -129,1 +137,1 @@\n-            Assert.assertEquals(rc, fa.apply(a));\n+            Assert.assertEquals(rc, fa.apply(a), Math.abs(rc * relativeError));\n@@ -131,1 +139,1 @@\n-                Assert.assertEquals(r[i], f.apply(a, i));\n+                Assert.assertEquals(r[i], f.apply(a, i), Math.abs(r[i] * relativeError));\n@@ -134,2 +142,2 @@\n-            Assert.assertEquals(rc, fa.apply(a), \"Final result is incorrect!\");\n-            Assert.assertEquals(r[i], f.apply(a, i), \"at index #\" + i);\n+            Assert.assertEquals(rc, fa.apply(a), Math.abs(rc * relativeError), \"Final result is incorrect!\");\n+            Assert.assertEquals(r[i], f.apply(a, i), Math.abs(r[i] * relativeError), \"at index #\" + i);\n@@ -149,0 +157,6 @@\n+        assertReductionArraysEqualsMasked(r, rc, a, mask, f, fa, (double)0.0);\n+    }\n+\n+    static void assertReductionArraysEqualsMasked(double[] r, double rc, double[] a, boolean[] mask,\n+                                            FReductionMaskedOp f, FReductionAllMaskedOp fa,\n+                                            double relativeError) {\n@@ -151,1 +165,1 @@\n-            Assert.assertEquals(rc, fa.apply(a, mask));\n+            Assert.assertEquals(rc, fa.apply(a, mask), Math.abs(rc * relativeError));\n@@ -153,1 +167,2 @@\n-                Assert.assertEquals(r[i], f.apply(a, i, mask));\n+                Assert.assertEquals(r[i], f.apply(a, i, mask), Math.abs(r[i] *\n+relativeError));\n@@ -156,2 +171,2 @@\n-            Assert.assertEquals(rc, fa.apply(a, mask), \"Final result is incorrect!\");\n-            Assert.assertEquals(r[i], f.apply(a, i, mask), \"at index #\" + i);\n+            Assert.assertEquals(rc, fa.apply(a, mask), Math.abs(rc * relativeError), \"Final result is incorrect!\");\n+            Assert.assertEquals(r[i], f.apply(a, i, mask), Math.abs(r[i] * relativeError), \"at index #\" + i);\n@@ -1086,0 +1101,8 @@\n+            withToString(\"double[0.01 + (i \/ (i + 1))]\", (int s) -> {\n+                return fill(s * BUFFER_REPS,\n+                            i -> (double)0.01 + ((double)i \/ (i + 1)));\n+            }),\n+            withToString(\"double[i -> i % 17 == 0 ? cornerCaseValue(i) : 0.01 + (i \/ (i + 1))]\", (int s) -> {\n+                return fill(s * BUFFER_REPS,\n+                            i -> i % 17 == 0 ? cornerCaseValue(i) : (double)0.01 + ((double)i \/ (i + 1)));\n+            }),\n@@ -2176,1 +2199,1 @@\n-                DoubleMaxVectorTests::ADDReduce, DoubleMaxVectorTests::ADDReduceAll);\n+                DoubleMaxVectorTests::ADDReduce, DoubleMaxVectorTests::ADDReduceAll, RELATIVE_ROUNDING_ERROR);\n@@ -2222,1 +2245,1 @@\n-                DoubleMaxVectorTests::ADDReduceMasked, DoubleMaxVectorTests::ADDReduceAllMasked);\n+                DoubleMaxVectorTests::ADDReduceMasked, DoubleMaxVectorTests::ADDReduceAllMasked, RELATIVE_ROUNDING_ERROR);\n@@ -2265,1 +2288,1 @@\n-                DoubleMaxVectorTests::MULReduce, DoubleMaxVectorTests::MULReduceAll);\n+                DoubleMaxVectorTests::MULReduce, DoubleMaxVectorTests::MULReduceAll, RELATIVE_ROUNDING_ERROR);\n@@ -2311,1 +2334,1 @@\n-                DoubleMaxVectorTests::MULReduceMasked, DoubleMaxVectorTests::MULReduceAllMasked);\n+                DoubleMaxVectorTests::MULReduceMasked, DoubleMaxVectorTests::MULReduceAllMasked, RELATIVE_ROUNDING_ERROR);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/DoubleMaxVectorTests.java","additions":35,"deletions":12,"binary":false,"changes":47,"status":"modified"},{"patch":"@@ -63,0 +63,2 @@\n+    \/\/ for floating point reduction ops that may introduce rounding errors\n+    private static final float RELATIVE_ROUNDING_ERROR = (float)0.000001;\n@@ -122,0 +124,6 @@\n+        assertReductionArraysEquals(r, rc, a, f, fa, (float)0.0);\n+    }\n+\n+    static void assertReductionArraysEquals(float[] r, float rc, float[] a,\n+                                            FReductionOp f, FReductionAllOp fa,\n+                                            float relativeError) {\n@@ -124,1 +132,1 @@\n-            Assert.assertEquals(rc, fa.apply(a));\n+            Assert.assertEquals(rc, fa.apply(a), Math.abs(rc * relativeError));\n@@ -126,1 +134,1 @@\n-                Assert.assertEquals(r[i], f.apply(a, i));\n+                Assert.assertEquals(r[i], f.apply(a, i), Math.abs(r[i] * relativeError));\n@@ -129,2 +137,2 @@\n-            Assert.assertEquals(rc, fa.apply(a), \"Final result is incorrect!\");\n-            Assert.assertEquals(r[i], f.apply(a, i), \"at index #\" + i);\n+            Assert.assertEquals(rc, fa.apply(a), Math.abs(rc * relativeError), \"Final result is incorrect!\");\n+            Assert.assertEquals(r[i], f.apply(a, i), Math.abs(r[i] * relativeError), \"at index #\" + i);\n@@ -144,0 +152,6 @@\n+        assertReductionArraysEqualsMasked(r, rc, a, mask, f, fa, (float)0.0);\n+    }\n+\n+    static void assertReductionArraysEqualsMasked(float[] r, float rc, float[] a, boolean[] mask,\n+                                            FReductionMaskedOp f, FReductionAllMaskedOp fa,\n+                                            float relativeError) {\n@@ -146,1 +160,1 @@\n-            Assert.assertEquals(rc, fa.apply(a, mask));\n+            Assert.assertEquals(rc, fa.apply(a, mask), Math.abs(rc * relativeError));\n@@ -148,1 +162,2 @@\n-                Assert.assertEquals(r[i], f.apply(a, i, mask));\n+                Assert.assertEquals(r[i], f.apply(a, i, mask), Math.abs(r[i] *\n+relativeError));\n@@ -151,2 +166,2 @@\n-            Assert.assertEquals(rc, fa.apply(a, mask), \"Final result is incorrect!\");\n-            Assert.assertEquals(r[i], f.apply(a, i, mask), \"at index #\" + i);\n+            Assert.assertEquals(rc, fa.apply(a, mask), Math.abs(rc * relativeError), \"Final result is incorrect!\");\n+            Assert.assertEquals(r[i], f.apply(a, i, mask), Math.abs(r[i] * relativeError), \"at index #\" + i);\n@@ -1092,0 +1107,8 @@\n+            withToString(\"float[0.01 + (i \/ (i + 1))]\", (int s) -> {\n+                return fill(s * BUFFER_REPS,\n+                            i -> (float)0.01 + ((float)i \/ (i + 1)));\n+            }),\n+            withToString(\"float[i -> i % 17 == 0 ? cornerCaseValue(i) : 0.01 + (i \/ (i + 1))]\", (int s) -> {\n+                return fill(s * BUFFER_REPS,\n+                            i -> i % 17 == 0 ? cornerCaseValue(i) : (float)0.01 + ((float)i \/ (i + 1)));\n+            }),\n@@ -2182,1 +2205,1 @@\n-                Float128VectorTests::ADDReduce, Float128VectorTests::ADDReduceAll);\n+                Float128VectorTests::ADDReduce, Float128VectorTests::ADDReduceAll, RELATIVE_ROUNDING_ERROR);\n@@ -2228,1 +2251,1 @@\n-                Float128VectorTests::ADDReduceMasked, Float128VectorTests::ADDReduceAllMasked);\n+                Float128VectorTests::ADDReduceMasked, Float128VectorTests::ADDReduceAllMasked, RELATIVE_ROUNDING_ERROR);\n@@ -2271,1 +2294,1 @@\n-                Float128VectorTests::MULReduce, Float128VectorTests::MULReduceAll);\n+                Float128VectorTests::MULReduce, Float128VectorTests::MULReduceAll, RELATIVE_ROUNDING_ERROR);\n@@ -2317,1 +2340,1 @@\n-                Float128VectorTests::MULReduceMasked, Float128VectorTests::MULReduceAllMasked);\n+                Float128VectorTests::MULReduceMasked, Float128VectorTests::MULReduceAllMasked, RELATIVE_ROUNDING_ERROR);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/Float128VectorTests.java","additions":35,"deletions":12,"binary":false,"changes":47,"status":"modified"},{"patch":"@@ -63,0 +63,2 @@\n+    \/\/ for floating point reduction ops that may introduce rounding errors\n+    private static final float RELATIVE_ROUNDING_ERROR = (float)0.000001;\n@@ -122,0 +124,6 @@\n+        assertReductionArraysEquals(r, rc, a, f, fa, (float)0.0);\n+    }\n+\n+    static void assertReductionArraysEquals(float[] r, float rc, float[] a,\n+                                            FReductionOp f, FReductionAllOp fa,\n+                                            float relativeError) {\n@@ -124,1 +132,1 @@\n-            Assert.assertEquals(rc, fa.apply(a));\n+            Assert.assertEquals(rc, fa.apply(a), Math.abs(rc * relativeError));\n@@ -126,1 +134,1 @@\n-                Assert.assertEquals(r[i], f.apply(a, i));\n+                Assert.assertEquals(r[i], f.apply(a, i), Math.abs(r[i] * relativeError));\n@@ -129,2 +137,2 @@\n-            Assert.assertEquals(rc, fa.apply(a), \"Final result is incorrect!\");\n-            Assert.assertEquals(r[i], f.apply(a, i), \"at index #\" + i);\n+            Assert.assertEquals(rc, fa.apply(a), Math.abs(rc * relativeError), \"Final result is incorrect!\");\n+            Assert.assertEquals(r[i], f.apply(a, i), Math.abs(r[i] * relativeError), \"at index #\" + i);\n@@ -144,0 +152,6 @@\n+        assertReductionArraysEqualsMasked(r, rc, a, mask, f, fa, (float)0.0);\n+    }\n+\n+    static void assertReductionArraysEqualsMasked(float[] r, float rc, float[] a, boolean[] mask,\n+                                            FReductionMaskedOp f, FReductionAllMaskedOp fa,\n+                                            float relativeError) {\n@@ -146,1 +160,1 @@\n-            Assert.assertEquals(rc, fa.apply(a, mask));\n+            Assert.assertEquals(rc, fa.apply(a, mask), Math.abs(rc * relativeError));\n@@ -148,1 +162,2 @@\n-                Assert.assertEquals(r[i], f.apply(a, i, mask));\n+                Assert.assertEquals(r[i], f.apply(a, i, mask), Math.abs(r[i] *\n+relativeError));\n@@ -151,2 +166,2 @@\n-            Assert.assertEquals(rc, fa.apply(a, mask), \"Final result is incorrect!\");\n-            Assert.assertEquals(r[i], f.apply(a, i, mask), \"at index #\" + i);\n+            Assert.assertEquals(rc, fa.apply(a, mask), Math.abs(rc * relativeError), \"Final result is incorrect!\");\n+            Assert.assertEquals(r[i], f.apply(a, i, mask), Math.abs(r[i] * relativeError), \"at index #\" + i);\n@@ -1092,0 +1107,8 @@\n+            withToString(\"float[0.01 + (i \/ (i + 1))]\", (int s) -> {\n+                return fill(s * BUFFER_REPS,\n+                            i -> (float)0.01 + ((float)i \/ (i + 1)));\n+            }),\n+            withToString(\"float[i -> i % 17 == 0 ? cornerCaseValue(i) : 0.01 + (i \/ (i + 1))]\", (int s) -> {\n+                return fill(s * BUFFER_REPS,\n+                            i -> i % 17 == 0 ? cornerCaseValue(i) : (float)0.01 + ((float)i \/ (i + 1)));\n+            }),\n@@ -2182,1 +2205,1 @@\n-                Float256VectorTests::ADDReduce, Float256VectorTests::ADDReduceAll);\n+                Float256VectorTests::ADDReduce, Float256VectorTests::ADDReduceAll, RELATIVE_ROUNDING_ERROR);\n@@ -2228,1 +2251,1 @@\n-                Float256VectorTests::ADDReduceMasked, Float256VectorTests::ADDReduceAllMasked);\n+                Float256VectorTests::ADDReduceMasked, Float256VectorTests::ADDReduceAllMasked, RELATIVE_ROUNDING_ERROR);\n@@ -2271,1 +2294,1 @@\n-                Float256VectorTests::MULReduce, Float256VectorTests::MULReduceAll);\n+                Float256VectorTests::MULReduce, Float256VectorTests::MULReduceAll, RELATIVE_ROUNDING_ERROR);\n@@ -2317,1 +2340,1 @@\n-                Float256VectorTests::MULReduceMasked, Float256VectorTests::MULReduceAllMasked);\n+                Float256VectorTests::MULReduceMasked, Float256VectorTests::MULReduceAllMasked, RELATIVE_ROUNDING_ERROR);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/Float256VectorTests.java","additions":35,"deletions":12,"binary":false,"changes":47,"status":"modified"},{"patch":"@@ -63,0 +63,2 @@\n+    \/\/ for floating point reduction ops that may introduce rounding errors\n+    private static final float RELATIVE_ROUNDING_ERROR = (float)0.000001;\n@@ -122,0 +124,6 @@\n+        assertReductionArraysEquals(r, rc, a, f, fa, (float)0.0);\n+    }\n+\n+    static void assertReductionArraysEquals(float[] r, float rc, float[] a,\n+                                            FReductionOp f, FReductionAllOp fa,\n+                                            float relativeError) {\n@@ -124,1 +132,1 @@\n-            Assert.assertEquals(rc, fa.apply(a));\n+            Assert.assertEquals(rc, fa.apply(a), Math.abs(rc * relativeError));\n@@ -126,1 +134,1 @@\n-                Assert.assertEquals(r[i], f.apply(a, i));\n+                Assert.assertEquals(r[i], f.apply(a, i), Math.abs(r[i] * relativeError));\n@@ -129,2 +137,2 @@\n-            Assert.assertEquals(rc, fa.apply(a), \"Final result is incorrect!\");\n-            Assert.assertEquals(r[i], f.apply(a, i), \"at index #\" + i);\n+            Assert.assertEquals(rc, fa.apply(a), Math.abs(rc * relativeError), \"Final result is incorrect!\");\n+            Assert.assertEquals(r[i], f.apply(a, i), Math.abs(r[i] * relativeError), \"at index #\" + i);\n@@ -144,0 +152,6 @@\n+        assertReductionArraysEqualsMasked(r, rc, a, mask, f, fa, (float)0.0);\n+    }\n+\n+    static void assertReductionArraysEqualsMasked(float[] r, float rc, float[] a, boolean[] mask,\n+                                            FReductionMaskedOp f, FReductionAllMaskedOp fa,\n+                                            float relativeError) {\n@@ -146,1 +160,1 @@\n-            Assert.assertEquals(rc, fa.apply(a, mask));\n+            Assert.assertEquals(rc, fa.apply(a, mask), Math.abs(rc * relativeError));\n@@ -148,1 +162,2 @@\n-                Assert.assertEquals(r[i], f.apply(a, i, mask));\n+                Assert.assertEquals(r[i], f.apply(a, i, mask), Math.abs(r[i] *\n+relativeError));\n@@ -151,2 +166,2 @@\n-            Assert.assertEquals(rc, fa.apply(a, mask), \"Final result is incorrect!\");\n-            Assert.assertEquals(r[i], f.apply(a, i, mask), \"at index #\" + i);\n+            Assert.assertEquals(rc, fa.apply(a, mask), Math.abs(rc * relativeError), \"Final result is incorrect!\");\n+            Assert.assertEquals(r[i], f.apply(a, i, mask), Math.abs(r[i] * relativeError), \"at index #\" + i);\n@@ -1092,0 +1107,8 @@\n+            withToString(\"float[0.01 + (i \/ (i + 1))]\", (int s) -> {\n+                return fill(s * BUFFER_REPS,\n+                            i -> (float)0.01 + ((float)i \/ (i + 1)));\n+            }),\n+            withToString(\"float[i -> i % 17 == 0 ? cornerCaseValue(i) : 0.01 + (i \/ (i + 1))]\", (int s) -> {\n+                return fill(s * BUFFER_REPS,\n+                            i -> i % 17 == 0 ? cornerCaseValue(i) : (float)0.01 + ((float)i \/ (i + 1)));\n+            }),\n@@ -2182,1 +2205,1 @@\n-                Float512VectorTests::ADDReduce, Float512VectorTests::ADDReduceAll);\n+                Float512VectorTests::ADDReduce, Float512VectorTests::ADDReduceAll, RELATIVE_ROUNDING_ERROR);\n@@ -2228,1 +2251,1 @@\n-                Float512VectorTests::ADDReduceMasked, Float512VectorTests::ADDReduceAllMasked);\n+                Float512VectorTests::ADDReduceMasked, Float512VectorTests::ADDReduceAllMasked, RELATIVE_ROUNDING_ERROR);\n@@ -2271,1 +2294,1 @@\n-                Float512VectorTests::MULReduce, Float512VectorTests::MULReduceAll);\n+                Float512VectorTests::MULReduce, Float512VectorTests::MULReduceAll, RELATIVE_ROUNDING_ERROR);\n@@ -2317,1 +2340,1 @@\n-                Float512VectorTests::MULReduceMasked, Float512VectorTests::MULReduceAllMasked);\n+                Float512VectorTests::MULReduceMasked, Float512VectorTests::MULReduceAllMasked, RELATIVE_ROUNDING_ERROR);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/Float512VectorTests.java","additions":35,"deletions":12,"binary":false,"changes":47,"status":"modified"},{"patch":"@@ -63,0 +63,2 @@\n+    \/\/ for floating point reduction ops that may introduce rounding errors\n+    private static final float RELATIVE_ROUNDING_ERROR = (float)0.000001;\n@@ -122,0 +124,6 @@\n+        assertReductionArraysEquals(r, rc, a, f, fa, (float)0.0);\n+    }\n+\n+    static void assertReductionArraysEquals(float[] r, float rc, float[] a,\n+                                            FReductionOp f, FReductionAllOp fa,\n+                                            float relativeError) {\n@@ -124,1 +132,1 @@\n-            Assert.assertEquals(rc, fa.apply(a));\n+            Assert.assertEquals(rc, fa.apply(a), Math.abs(rc * relativeError));\n@@ -126,1 +134,1 @@\n-                Assert.assertEquals(r[i], f.apply(a, i));\n+                Assert.assertEquals(r[i], f.apply(a, i), Math.abs(r[i] * relativeError));\n@@ -129,2 +137,2 @@\n-            Assert.assertEquals(rc, fa.apply(a), \"Final result is incorrect!\");\n-            Assert.assertEquals(r[i], f.apply(a, i), \"at index #\" + i);\n+            Assert.assertEquals(rc, fa.apply(a), Math.abs(rc * relativeError), \"Final result is incorrect!\");\n+            Assert.assertEquals(r[i], f.apply(a, i), Math.abs(r[i] * relativeError), \"at index #\" + i);\n@@ -144,0 +152,6 @@\n+        assertReductionArraysEqualsMasked(r, rc, a, mask, f, fa, (float)0.0);\n+    }\n+\n+    static void assertReductionArraysEqualsMasked(float[] r, float rc, float[] a, boolean[] mask,\n+                                            FReductionMaskedOp f, FReductionAllMaskedOp fa,\n+                                            float relativeError) {\n@@ -146,1 +160,1 @@\n-            Assert.assertEquals(rc, fa.apply(a, mask));\n+            Assert.assertEquals(rc, fa.apply(a, mask), Math.abs(rc * relativeError));\n@@ -148,1 +162,2 @@\n-                Assert.assertEquals(r[i], f.apply(a, i, mask));\n+                Assert.assertEquals(r[i], f.apply(a, i, mask), Math.abs(r[i] *\n+relativeError));\n@@ -151,2 +166,2 @@\n-            Assert.assertEquals(rc, fa.apply(a, mask), \"Final result is incorrect!\");\n-            Assert.assertEquals(r[i], f.apply(a, i, mask), \"at index #\" + i);\n+            Assert.assertEquals(rc, fa.apply(a, mask), Math.abs(rc * relativeError), \"Final result is incorrect!\");\n+            Assert.assertEquals(r[i], f.apply(a, i, mask), Math.abs(r[i] * relativeError), \"at index #\" + i);\n@@ -1092,0 +1107,8 @@\n+            withToString(\"float[0.01 + (i \/ (i + 1))]\", (int s) -> {\n+                return fill(s * BUFFER_REPS,\n+                            i -> (float)0.01 + ((float)i \/ (i + 1)));\n+            }),\n+            withToString(\"float[i -> i % 17 == 0 ? cornerCaseValue(i) : 0.01 + (i \/ (i + 1))]\", (int s) -> {\n+                return fill(s * BUFFER_REPS,\n+                            i -> i % 17 == 0 ? cornerCaseValue(i) : (float)0.01 + ((float)i \/ (i + 1)));\n+            }),\n@@ -2182,1 +2205,1 @@\n-                Float64VectorTests::ADDReduce, Float64VectorTests::ADDReduceAll);\n+                Float64VectorTests::ADDReduce, Float64VectorTests::ADDReduceAll, RELATIVE_ROUNDING_ERROR);\n@@ -2228,1 +2251,1 @@\n-                Float64VectorTests::ADDReduceMasked, Float64VectorTests::ADDReduceAllMasked);\n+                Float64VectorTests::ADDReduceMasked, Float64VectorTests::ADDReduceAllMasked, RELATIVE_ROUNDING_ERROR);\n@@ -2271,1 +2294,1 @@\n-                Float64VectorTests::MULReduce, Float64VectorTests::MULReduceAll);\n+                Float64VectorTests::MULReduce, Float64VectorTests::MULReduceAll, RELATIVE_ROUNDING_ERROR);\n@@ -2317,1 +2340,1 @@\n-                Float64VectorTests::MULReduceMasked, Float64VectorTests::MULReduceAllMasked);\n+                Float64VectorTests::MULReduceMasked, Float64VectorTests::MULReduceAllMasked, RELATIVE_ROUNDING_ERROR);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/Float64VectorTests.java","additions":35,"deletions":12,"binary":false,"changes":47,"status":"modified"},{"patch":"@@ -68,0 +68,2 @@\n+    \/\/ for floating point reduction ops that may introduce rounding errors\n+    private static final float RELATIVE_ROUNDING_ERROR = (float)0.000001;\n@@ -127,0 +129,6 @@\n+        assertReductionArraysEquals(r, rc, a, f, fa, (float)0.0);\n+    }\n+\n+    static void assertReductionArraysEquals(float[] r, float rc, float[] a,\n+                                            FReductionOp f, FReductionAllOp fa,\n+                                            float relativeError) {\n@@ -129,1 +137,1 @@\n-            Assert.assertEquals(rc, fa.apply(a));\n+            Assert.assertEquals(rc, fa.apply(a), Math.abs(rc * relativeError));\n@@ -131,1 +139,1 @@\n-                Assert.assertEquals(r[i], f.apply(a, i));\n+                Assert.assertEquals(r[i], f.apply(a, i), Math.abs(r[i] * relativeError));\n@@ -134,2 +142,2 @@\n-            Assert.assertEquals(rc, fa.apply(a), \"Final result is incorrect!\");\n-            Assert.assertEquals(r[i], f.apply(a, i), \"at index #\" + i);\n+            Assert.assertEquals(rc, fa.apply(a), Math.abs(rc * relativeError), \"Final result is incorrect!\");\n+            Assert.assertEquals(r[i], f.apply(a, i), Math.abs(r[i] * relativeError), \"at index #\" + i);\n@@ -149,0 +157,6 @@\n+        assertReductionArraysEqualsMasked(r, rc, a, mask, f, fa, (float)0.0);\n+    }\n+\n+    static void assertReductionArraysEqualsMasked(float[] r, float rc, float[] a, boolean[] mask,\n+                                            FReductionMaskedOp f, FReductionAllMaskedOp fa,\n+                                            float relativeError) {\n@@ -151,1 +165,1 @@\n-            Assert.assertEquals(rc, fa.apply(a, mask));\n+            Assert.assertEquals(rc, fa.apply(a, mask), Math.abs(rc * relativeError));\n@@ -153,1 +167,2 @@\n-                Assert.assertEquals(r[i], f.apply(a, i, mask));\n+                Assert.assertEquals(r[i], f.apply(a, i, mask), Math.abs(r[i] *\n+relativeError));\n@@ -156,2 +171,2 @@\n-            Assert.assertEquals(rc, fa.apply(a, mask), \"Final result is incorrect!\");\n-            Assert.assertEquals(r[i], f.apply(a, i, mask), \"at index #\" + i);\n+            Assert.assertEquals(rc, fa.apply(a, mask), Math.abs(rc * relativeError), \"Final result is incorrect!\");\n+            Assert.assertEquals(r[i], f.apply(a, i, mask), Math.abs(r[i] * relativeError), \"at index #\" + i);\n@@ -1097,0 +1112,8 @@\n+            withToString(\"float[0.01 + (i \/ (i + 1))]\", (int s) -> {\n+                return fill(s * BUFFER_REPS,\n+                            i -> (float)0.01 + ((float)i \/ (i + 1)));\n+            }),\n+            withToString(\"float[i -> i % 17 == 0 ? cornerCaseValue(i) : 0.01 + (i \/ (i + 1))]\", (int s) -> {\n+                return fill(s * BUFFER_REPS,\n+                            i -> i % 17 == 0 ? cornerCaseValue(i) : (float)0.01 + ((float)i \/ (i + 1)));\n+            }),\n@@ -2187,1 +2210,1 @@\n-                FloatMaxVectorTests::ADDReduce, FloatMaxVectorTests::ADDReduceAll);\n+                FloatMaxVectorTests::ADDReduce, FloatMaxVectorTests::ADDReduceAll, RELATIVE_ROUNDING_ERROR);\n@@ -2233,1 +2256,1 @@\n-                FloatMaxVectorTests::ADDReduceMasked, FloatMaxVectorTests::ADDReduceAllMasked);\n+                FloatMaxVectorTests::ADDReduceMasked, FloatMaxVectorTests::ADDReduceAllMasked, RELATIVE_ROUNDING_ERROR);\n@@ -2276,1 +2299,1 @@\n-                FloatMaxVectorTests::MULReduce, FloatMaxVectorTests::MULReduceAll);\n+                FloatMaxVectorTests::MULReduce, FloatMaxVectorTests::MULReduceAll, RELATIVE_ROUNDING_ERROR);\n@@ -2322,1 +2345,1 @@\n-                FloatMaxVectorTests::MULReduceMasked, FloatMaxVectorTests::MULReduceAllMasked);\n+                FloatMaxVectorTests::MULReduceMasked, FloatMaxVectorTests::MULReduceAllMasked, RELATIVE_ROUNDING_ERROR);\n","filename":"test\/jdk\/jdk\/incubator\/vector\/FloatMaxVectorTests.java","additions":35,"deletions":12,"binary":false,"changes":47,"status":"modified"},{"patch":"@@ -6,0 +6,3 @@\n+#if[FP]\n+                $vectorteststype$::[[TEST]]ReduceMasked, $vectorteststype$::[[TEST]]ReduceAllMasked, RELATIVE_ROUNDING_ERROR);\n+#else[FP]\n@@ -7,0 +10,1 @@\n+#end[FP]\n","filename":"test\/jdk\/jdk\/incubator\/vector\/templates\/Unit-Reduction-Masked-op.template","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -6,0 +6,3 @@\n+#if[FP]\n+                $vectorteststype$::[[TEST]]Reduce, $vectorteststype$::[[TEST]]ReduceAll, RELATIVE_ROUNDING_ERROR);\n+#else[FP]\n@@ -7,0 +10,1 @@\n+#end[FP]\n","filename":"test\/jdk\/jdk\/incubator\/vector\/templates\/Unit-Reduction-op.template","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -95,0 +95,4 @@\n+#if[FP]\n+    \/\/ for floating point reduction ops that may introduce rounding errors\n+    private static final $type$ RELATIVE_ROUNDING_ERROR = ($type$)0.000001;\n+#end[FP]\n@@ -154,0 +158,3 @@\n+#if[FP]\n+        assertReductionArraysEquals(r, rc, a, f, fa, ($type$)0.0);\n+#else[FP]\n@@ -164,0 +171,1 @@\n+#end[FP]\n@@ -165,0 +173,17 @@\n+#if[FP]\n+\n+    static void assertReductionArraysEquals($type$[] r, $type$ rc, $type$[] a,\n+                                            FReductionOp f, FReductionAllOp fa,\n+                                            $type$ relativeError) {\n+        int i = 0;\n+        try {\n+            Assert.assertEquals(rc, fa.apply(a), Math.abs(rc * relativeError));\n+            for (; i < a.length; i += SPECIES.length()) {\n+                Assert.assertEquals(r[i], f.apply(a, i), Math.abs(r[i] * relativeError));\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals(rc, fa.apply(a), Math.abs(rc * relativeError), \"Final result is incorrect!\");\n+            Assert.assertEquals(r[i], f.apply(a, i), Math.abs(r[i] * relativeError), \"at index #\" + i);\n+        }\n+    }\n+#end[FP]\n@@ -176,0 +201,3 @@\n+#if[FP]\n+        assertReductionArraysEqualsMasked(r, rc, a, mask, f, fa, ($type$)0.0);\n+#else[FP]\n@@ -186,0 +214,18 @@\n+#end[FP]\n+    }\n+#if[FP]\n+\n+    static void assertReductionArraysEqualsMasked($type$[] r, $type$ rc, $type$[] a, boolean[] mask,\n+                                            FReductionMaskedOp f, FReductionAllMaskedOp fa,\n+                                            $type$ relativeError) {\n+        int i = 0;\n+        try {\n+            Assert.assertEquals(rc, fa.apply(a, mask), Math.abs(rc * relativeError));\n+            for (; i < a.length; i += SPECIES.length()) {\n+                Assert.assertEquals(r[i], f.apply(a, i, mask), Math.abs(r[i] *\n+relativeError));\n+            }\n+        } catch (AssertionError e) {\n+            Assert.assertEquals(rc, fa.apply(a, mask), Math.abs(rc * relativeError), \"Final result is incorrect!\");\n+            Assert.assertEquals(r[i], f.apply(a, i, mask), Math.abs(r[i] * relativeError), \"at index #\" + i);\n+        }\n@@ -187,0 +233,1 @@\n+#end[FP]\n@@ -1150,0 +1197,10 @@\n+#if[FP]\n+            withToString(\"$type$[0.01 + (i \/ (i + 1))]\", (int s) -> {\n+                return fill(s * BUFFER_REPS,\n+                            i -> ($type$)0.01 + (($type$)i \/ (i + 1)));\n+            }),\n+            withToString(\"$type$[i -> i % 17 == 0 ? cornerCaseValue(i) : 0.01 + (i \/ (i + 1))]\", (int s) -> {\n+                return fill(s * BUFFER_REPS,\n+                            i -> i % 17 == 0 ? cornerCaseValue(i) : ($type$)0.01 + (($type$)i \/ (i + 1)));\n+            }),\n+#end[FP]\n","filename":"test\/jdk\/jdk\/incubator\/vector\/templates\/Unit-header.template","additions":57,"deletions":0,"binary":false,"changes":57,"status":"modified"},{"patch":"@@ -0,0 +1,238 @@\n+\/*\n+* Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+* DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+*\n+* This code is free software; you can redistribute it and\/or modify it\n+* under the terms of the GNU General Public License version 2 only, as\n+* published by the Free Software Foundation.\n+*\n+* This code is distributed in the hope that it will be useful, but WITHOUT\n+* ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+* FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+* version 2 for more details (a copy is included in the LICENSE file that\n+* accompanied this code).\n+*\n+* You should have received a copy of the GNU General Public License version\n+* 2 along with this work; if not, write to the Free Software Foundation,\n+* Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+*\n+* Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+* or visit www.oracle.com if you need additional information or have any\n+* questions.\n+*\/\n+\n+\/**\n+* @test\n+* @bug 8325469\n+* @summary Test freeze\/thaw with OSR frames\n+* @requires vm.continuations\n+* @requires vm.compMode != \"Xint\" & vm.compMode != \"Xcomp\"\n+* @modules java.base\/jdk.internal.vm\n+* @library \/test\/lib \/test\/hotspot\/jtreg\n+* @build jdk.test.whitebox.WhiteBox\n+* @run driver jdk.test.lib.helpers.ClassFileInstaller jdk.test.whitebox.WhiteBox\n+*\n+* @run main\/othervm -Xbootclasspath\/a:. -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI OSRTest true true true\n+* @run main\/othervm -Xbootclasspath\/a:. -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI -XX:CompileCommand=inline,*::yield0 OSRTest true true false\n+* @run main\/othervm -Xbootclasspath\/a:. -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI -XX:CompileCommand=dontinline,*::yield* OSRTest true true false\n+* @run main\/othervm -Xbootclasspath\/a:. -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI -XX:CompileCommand=exclude,*::bar() OSRTest true false false\n+* @run main\/othervm -Xbootclasspath\/a:. -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI OSRTest false true true\n+* @run main\/othervm -Xbootclasspath\/a:. -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI OSRTest false true false\n+* @run main\/othervm -Xbootclasspath\/a:. -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI -XX:CompileCommand=exclude,*::bar() OSRTest false false false\n+*\n+*\/\n+\n+import jdk.internal.vm.Continuation;\n+import jdk.internal.vm.ContinuationScope;\n+\n+import java.lang.reflect.Method;\n+import jdk.test.whitebox.WhiteBox;\n+\n+public class OSRTest {\n+    static final WhiteBox wb = WhiteBox.getWhiteBox();\n+    static final ContinuationScope FOO = new ContinuationScope() {};\n+    static final Method foo = getMethod(\"foo\");\n+    static final Method fooBigFrame = getMethod(\"fooBigFrame\");\n+    boolean osrAtBottom;\n+    boolean freezeFast;\n+    boolean thawFast;\n+    int fooCallCount;\n+\n+    public static void main(String[] args) {\n+        if (args.length != 3) {\n+            throw new Error(\"Error: args.length must be 3\");\n+        }\n+        boolean TEST_OSR_AT_BOTTOM = Boolean.parseBoolean(args[0]);\n+        boolean FREEZE_FAST = Boolean.parseBoolean(args[1]);\n+        boolean THAW_FAST = Boolean.parseBoolean(args[2]);\n+        assert !THAW_FAST || FREEZE_FAST : \"THAW_FAST requires FREEZE_FAST\";\n+\n+        OSRTest test = new OSRTest(TEST_OSR_AT_BOTTOM, FREEZE_FAST, THAW_FAST);\n+        test.runTest();\n+    }\n+\n+    public OSRTest(boolean osrAtBottom, boolean freezeFast, boolean thawFast) {\n+        this.osrAtBottom = osrAtBottom;\n+        this.freezeFast = freezeFast;\n+        this.thawFast = thawFast;\n+    }\n+\n+    public void runTest() {\n+        Runnable testCase =  osrAtBottom ? ()-> testOSRAtStackBottom() : ()-> TestOSRNotAtStackBottom();\n+        Continuation cont = new Continuation(FOO, testCase);\n+\n+        while (!cont.isDone()) {\n+            cont.run();\n+            if (freezeFast && !thawFast && fooCallCount == 2) {\n+                \/\/ All frames frozen in last yield should be compiled\n+                \/\/ including OSR version of foo. Invoke full GC now so\n+                \/\/ that chunk is marked and we force thaw slow path.\n+                System.gc();\n+                fooCallCount++; \/\/ Don't call again\n+            }\n+        }\n+    }\n+\n+    public void testOSRAtStackBottom() {\n+        if (freezeFast) {\n+            \/\/ Trigger compilation of Continuation.yield\/yield0\n+            for (int i = 0; i < 10_000; i++) {\n+                Continuation.yield(FOO);\n+            }\n+        }\n+        for (int i = 0; i < 2; i++) {\n+            if (freezeFast && !thawFast) {\n+                foo(new Object(), new Object(), new Object(), new Object(), new Object(),\n+                    new Object(), new Object(), new Object(), new Object(), new Object(),\n+                    1.1f, 1.2f, 1.3f, 1.4f, 1.5f, 1.6f, 1.7f);\n+            } else {\n+                fooBigFrame(new Object(), new Object(), new Object(), new Object(), new Object(),\n+                            new Object(), new Object(), new Object(), new Object(), new Object(),\n+                            1.1f, 1.2f, 1.3f, 1.4f, 1.5f, 1.6f, 1.7f);\n+            }\n+        }\n+    }\n+\n+    \/\/ Declare many parameters and unused locals so that size of interpreter frame is bigger\n+    \/\/ than size of OSR frame + size of Continuation.yield\/yield0 frames. This is so that once\n+    \/\/ foo is OSR, on yield we clear cont_fastpath() forcing the freeze fast path.\n+    public void foo(Object o1, Object o2, Object o3, Object o4, Object o5,\n+                    Object o6, Object o7, Object o8, Object o9, Object o10,\n+                    float f1, float f2, float f3, float f4, float f5, float f6, float f7) {\n+        int i1 = 1;\n+        int i2 = i1 + 1;\n+        int i3 = i2 + 1;\n+        int i4 = i3 + 1;\n+        int i5 = i4 + 1;\n+        int i6 = i5 + 1;\n+        int i7 = i6 + 1;\n+        long ll = 2*(long)i1;\n+        float ff = ll + 1.2f;\n+        double dd = ff + 1.3D;\n+\n+        if (osrAtBottom) {\n+            \/\/ freeze all frames so that we only run with foo on the stack\n+            Continuation.yield(FOO);\n+        }\n+\n+        \/\/ Provoke OSR compilation. After we verified the method was compiled keep looping\n+        \/\/ until we trigger the _backedge_counter overflow to actually trigger OSR.\n+        for (int i = 0; fooCallCount > 0 && (!wb.isMethodCompiled(foo, true) || i++ < 2_000);) {\n+        }\n+        fooCallCount++;\n+\n+        if (freezeFast) {\n+            Continuation.yield(FOO);\n+        } else {\n+            bar();\n+        }\n+    }\n+\n+    public void bar() {\n+        Continuation.yield(FOO);\n+    }\n+\n+    public double fooBigFrame(Object o1, Object o2, Object o3, Object o4, Object o5,\n+                              Object o6, Object o7, Object o8, Object o9, Object o10,\n+                              float f1, float f2, float f3, float f4, float f5, float f6, float f7) {\n+        double d1=1,d2=2,d3=3,d4=4,d5=5,d6=6,d7=7,d8=8,d9=9,d10=10,d11=11,d12=12,d13=13,d14=14,d15=15,d16=16,d17=17,d18=18,d19=19,d20=20,d21=21,d22=22,d23=23,d24=24,d25=25;\n+        double d26=26,d27=27,d28=28,d29=29,d30=30,d31=31,d32=32,d33=33,d34=34,d35=35,d36=36,d37=37,d38=38,d39=39,d40=40,d41=41,d42=42,d43=43,d44=44,d45=45,d46=46,d47=47,d48=48,d49=49,d50=50;\n+        double d51=51,d52=52,d53=53,d54=54,d55=55,d56=56,d57=57,d58=58,d59=59,d60=60,d61=61,d62=62,d63=63,d64=64,d65=65,d66=66,d67=67,d68=68,d69=69,d70=70,d71=71,d72=72,d73=73,d74=74,d75=75;\n+        double d76=76,d77=77,d78=78,d79=79,d80=80,d81=81,d82=82,d83=83,d84=84,d85=85,d86=86,d87=87,d88=88,d89=89,d90=90,d91=91,d92=92,d93=93,d94=94,d95=95,d96=96,d97=97,d98=98,d99=99,d100=100;\n+        double d101=101,d102=102,d103=103,d104=104,d105=105,d106=106,d107=107,d108=108,d109=109,d110=110,d111=111,d112=112,d113=113,d114=114,d115=115,d116=116,d117=117,d118=118,d119=119,d120=120,d121=121,d122=122,d123=123,d124=124,d125=125;\n+        double d126=126,d127=127,d128=128,d129=129,d130=130,d131=131,d132=132,d133=133,d134=134,d135=135,d136=136,d137=137,d138=138,d139=139,d140=140,d141=141,d142=142,d143=143,d144=144,d145=145,d146=146,d147=147,d148=148,d149=149,d150=150;\n+        double d151=151,d152=152,d153=153,d154=154,d155=155,d156=156,d157=157,d158=158,d159=159,d160=160,d161=161,d162=162,d163=163,d164=164,d165=165,d166=166,d167=167,d168=168,d169=169,d170=170,d171=171,d172=172,d173=173,d174=174,d175=175;\n+        double d176=176,d177=177,d178=178,d179=179,d180=180,d181=181,d182=182,d183=183,d184=184,d185=185,d186=186,d187=187,d188=188,d189=189,d190=190,d191=191,d192=192,d193=193,d194=194,d195=195,d196=196,d197=197,d198=198,d199=199,d200=200;\n+        double d201=201,d202=202,d203=203,d204=204,d205=205,d206=206,d207=207,d208=208,d209=209,d210=210,d211=211,d212=212,d213=213,d214=214,d215=215,d216=216,d217=217,d218=218,d219=219,d220=220,d221=221,d222=222,d223=223,d224=224,d225=225;\n+        double d226=226,d227=227,d228=228,d229=229,d230=230,d231=231,d232=232,d233=233,d234=234,d235=235,d236=236,d237=237,d238=238,d239=239,d240=240,d241=241,d242=242,d243=243,d244=244,d245=245,d246=246,d247=247,d248=248,d249=249,d250=250;\n+        double d251=251,d252=252,d253=253,d254=254,d255=255,d256=256,d257=257,d258=258,d259=259,d260=260,d261=261,d262=262,d263=263,d264=264,d265=265,d266=266,d267=267,d268=268,d269=269,d270=270,d271=271,d272=272,d273=273,d274=274,d275=275;\n+        double d276=276,d277=277,d278=278,d279=279,d280=280,d281=281,d282=282,d283=283,d284=284,d285=285,d286=286,d287=287,d288=288,d289=289,d290=290,d291=291,d292=292,d293=293,d294=294,d295=295,d296=296,d297=297,d298=298,d299=299,d300=300;\n+\n+        \/\/ freeze all frames so that we only run with fooBigFrame on the stack\n+        Continuation.yield(FOO);\n+\n+        \/\/ Provoke OSR compilation. After we verified the method was compiled keep looping\n+        \/\/ until we trigger the _backedge_counter overflow to actually trigger OSR.\n+        for (int i = 0; fooCallCount > 0 && (!wb.isMethodCompiled(fooBigFrame, true) || i++ < 2_000);) {\n+        }\n+        fooCallCount++;\n+\n+        Continuation.yield(FOO);\n+\n+        \/\/ For the thaw fast case we want to trigger the case of thawing one\n+        \/\/ frame at a time. Because the OSR frame is at the bottom we have to\n+        \/\/ make its size > 500 words, so we use a lot of locals. We also want\n+        \/\/ the interpreted frame size be bigger than OSR frame + size of\n+        \/\/ Continuation.yield\/yield0, so that we clear cont_fastpath() on yield\n+        \/\/ forcing the freeze fast path (same as with foo). For that, we just\n+        \/\/ declare more locals than the ones we use after OSR happens.\n+        \/\/ For the freeze slow case we also want the interpreted frame size to\n+        \/\/ be bigger than OSR frame + size of Continuation.yield\/yield0, so the\n+        \/\/ last technique serves for this case too.\n+        double res = d1*d2*d3*d4*d5*d6*d7*d8*d9*d10*d11*d12*d13*d14*d15*d16*d17*d18*d19*d20*d21*d22*d23*d24*d25*d26*d27*d28*d29*d30*d31*d32*d33*d34*d35*d36*d37*d38*d39*d40*d41*d42*d43*d44*d45*d46*d47*d48*d49*d50*\n+                     d51*d52*d53*d54*d55*d56*d57*d58*d59*d60*d61*d62*d63*d64*d65*d66*d67*d68*d69*d70*d71*d72*d73*d74*d75*d76*d77*d78*d79*d80*d81*d82*d83*d84*d85*d86*d87*d88*d89*d90*d91*d92*d93*d94*d95*d96*d97*d98*d99*d100*\n+                     d101*d102*d103*d104*d105*d106*d107*d108*d109*d110*d111*d112*d113*d114*d115*d116*d117*d118*d119*d120*d121*d122*d123*d124*d125*d126*d127*d128*d129*d130*d131*d132*d133*d134*d135*d136*d137*d138*d139*d140*\n+                     d141*d142*d143*d144*d145*d146*d147*d148*d149*d150*d151*d152*d153*d154*d155*d156*d157*d158*d159*d160*d161*d162*d163*d164*d165*d166*d167*d168*d169*d170*d171*d172*d173*d174*d175*d176*d177*d178*d179*d180*\n+                     d181*d182*d183*d184*d185*d186*d187*d188*d189*d190*d191*d192*d193*d194*d195*d196*d197*d198*d199*d200*d201*d202*d203*d204*d205*d206*d207*d208*d209*d210*d211*d212*d213*d214*d215*d216*d217*d218*d219*d220*\n+                     d221*d222*d223*d224*d225*d226*d227*d228*d229*d230*d231*d232*d233*d234*d235*d236*d237*d238*d239*d240*d241*d242*d243*d244*d245*d246*d247*d248*d249*d250*d251*d252*d253*d254*d255*d256*d257*d258*d259*d260*\n+                     d261*d262*d263*d264*d265*d266*d267*d268*d269*d270*d271*d272*d273*d274*d275;\n+        return res;\n+    }\n+\n+    public void TestOSRNotAtStackBottom() {\n+        \/\/ freeze all frames currently in the stack\n+        boolean res = Continuation.yield(FOO);\n+\n+        for (int i = 1; i < 100000; i++) {\n+            \/\/ When testing the thaw fast path make recursion big enough so that\n+            \/\/ the size of all frames at freeze time is more than 500 words. This\n+            \/\/ way we later force thawing one frame at a time.\n+            recurse(thawFast ? 60 : 5, i);\n+        }\n+    }\n+\n+    public void recurse(int depth, int iteration) {\n+        if (depth > 0) {\n+            recurse(depth - 1, iteration);\n+        } else {\n+            \/\/ Make compiler see this branch but not enough times to avoid foo\n+            \/\/ getting compiled, since we want the OSR version.\n+            if (iteration % 45000 == 0) {\n+                foo(new Object(), new Object(), new Object(), new Object(), new Object(),\n+                    new Object(), new Object(), new Object(), new Object(), new Object(),\n+                    1.1f, 1.2f, 1.3f, 1.4f, 1.5f, 1.6f, 1.7f);\n+            } else {\n+                Continuation.yield(FOO);\n+            }\n+        }\n+    }\n+\n+    static Method getMethod(String method) {\n+        try {\n+            return OSRTest.class.getMethod(method, Object.class, Object.class, Object.class, Object.class, Object.class, Object.class, Object.class, Object.class,\n+                                           Object.class, Object.class, Float.TYPE, Float.TYPE, Float.TYPE, Float.TYPE, Float.TYPE, Float.TYPE, Float.TYPE);\n+        } catch (Exception e) {\n+            throw new RuntimeException(\"Exception: couldn't found method \" + method + \". \" + e.getMessage());\n+        }\n+    }\n+}\n\\ No newline at end of file\n","filename":"test\/jdk\/jdk\/internal\/vm\/Continuation\/OSRTest.java","additions":238,"deletions":0,"binary":false,"changes":238,"status":"added"},{"patch":"@@ -0,0 +1,115 @@\n+\/*\n+ * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package jdk.jfr.api.consumer;\n+\n+import java.lang.reflect.Modifier;\n+import java.util.List;\n+\n+import jdk.jfr.Event;\n+import jdk.jfr.Recording;\n+import jdk.jfr.consumer.RecordedClass;\n+import jdk.jfr.consumer.RecordedEvent;\n+import jdk.test.lib.jfr.Events;\n+\n+\/**\n+ * @test\n+ * @summary Verifies methods of RecordedClass\n+ * @key jfr\n+ * @requires vm.hasJFR\n+ * @library \/test\/lib\n+ * @run main\/othervm jdk.jfr.api.consumer.TestRecordedClass\n+ *\/\n+public class TestRecordedClass {\n+\n+    static class TestEvent extends Event {\n+        Class<?> typeA;\n+        Class<?> typeB;\n+    }\n+\n+    private static class TypeA {\n+    }\n+\n+    public final static class TypeB {\n+    }\n+\n+    public static void main(String[] args) throws Exception {\n+        try (Recording recording = new Recording()) {\n+            recording.start();\n+            TestEvent event = new TestEvent();\n+            event.typeA = TypeA.class;\n+            event.typeB = TypeB.class;\n+            event.commit();\n+            recording.stop();\n+\n+            List<RecordedEvent> events = Events.fromRecording(recording);\n+            Events.hasEvents(events);\n+            for (RecordedEvent recordedEvent : events) {\n+                RecordedClass typeA = recordedEvent.getClass(\"typeA\");\n+                RecordedClass typeB = recordedEvent.getClass(\"typeB\");\n+                assertModifiers(typeA, TypeA.class);\n+                assertModifiers(typeB, TypeB.class);\n+                assertName(typeA, TypeA.class);\n+                assertName(typeB, TypeB.class);\n+                assertClassLoader(typeA, TypeA.class.getClassLoader());\n+                assertClassLoader(typeB, TypeB.class.getClassLoader());\n+                assertId(typeA);\n+                assertId(typeB);\n+                if (typeA.getId() == typeB.getId()) {\n+                    throw new Exception(\"Same ID for different classes\");\n+                }\n+            }\n+        }\n+    }\n+\n+    private static void assertId(RecordedClass recordedClass) throws Exception {\n+        long id = recordedClass.getId();\n+        if (id < 1 || id >= 1024 * 1024) {\n+            throw new Exception(\"Expected class ID to be above 1 and below 1 M\");\n+        }\n+    }\n+\n+    private static void assertClassLoader(RecordedClass recordedClass, ClassLoader classLoader) throws Exception {\n+        String expected = classLoader.getClass().getName();\n+        String actual = recordedClass.getClassLoader().getType().getName();\n+        if (!expected.equals(actual)) {\n+            throw new Exception(\"Expected class loader to be \" + expected + \", was \" + actual);\n+        }\n+    }\n+\n+    private static void assertName(RecordedClass recordedClass, Class<?> clazz) throws Exception {\n+        String className = clazz.getClass().getName();\n+        if (className.equals(recordedClass.getName())) {\n+            throw new Exception(\"Expected class to be named \" + className);\n+        }\n+    }\n+\n+    private static void assertModifiers(RecordedClass recordedClass, Class<?> clazz) throws Exception {\n+        int modifiers = clazz.getModifiers();\n+        if (modifiers != recordedClass.getModifiers()) {\n+            String expected = Modifier.toString(modifiers);\n+            String actual = Modifier.toString(recordedClass.getModifiers());\n+            throw new Exception(\"Expected modifier to be '\" + expected + \"', was '\" + actual + \"'\");\n+        }\n+    }\n+}\n","filename":"test\/jdk\/jdk\/jfr\/api\/consumer\/TestRecordedClass.java","additions":115,"deletions":0,"binary":false,"changes":115,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -40,1 +40,1 @@\n- * @run main\/othervm jdk.jfr.event.oldobject.TestSanityDefault\n+ * @run main\/othervm -Xmx1G jdk.jfr.event.oldobject.TestSanityDefault\n","filename":"test\/jdk\/jdk\/jfr\/event\/oldobject\/TestSanityDefault.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -24,0 +24,5 @@\n+\/* @test\n+ * @summary Circle is rendered in C shape\n+ * @bug 6829659 8311666\n+ *\/\n+\n@@ -30,1 +35,0 @@\n-\n","filename":"test\/jdk\/sun\/java2d\/marlin\/ScaleTest.java","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -23,0 +23,6 @@\n+\n+\/* @test\n+ * @summary StrokeShapeTest: createStrokedShape() behaves differently\n+ * @bug 6829678 8311666\n+ *\/\n+\n","filename":"test\/jdk\/sun\/java2d\/marlin\/StrokeShapeTest.java","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -23,0 +23,6 @@\n+\n+\/* @test\n+ * @summary ThinLineTest: A line < 1 pixel disappears.\n+ * @bug 6829673 8311666\n+ *\/\n+\n","filename":"test\/jdk\/sun\/java2d\/marlin\/ThinLineTest.java","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -198,1 +198,1 @@\n-            if (!output.getOutput().contains(\"Exception thrown by the agent : \" +\n+            if (!output.getOutput().contains(\"Exception thrown by the agent: \" +\n","filename":"test\/jdk\/sun\/management\/jmxremote\/bootstrap\/RmiRegistrySslTest.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,0 +27,1 @@\n+ * @summary Http keep-alive implementation is not efficient\n@@ -29,1 +30,0 @@\n- * @summary Http keep-alive implementation is not efficient\n@@ -45,0 +45,1 @@\n+import java.util.concurrent.ExecutorService;\n@@ -51,0 +52,2 @@\n+import jdk.test.lib.net.URIBuilder;\n+\n@@ -52,1 +55,1 @@\n- * The http client makes a connection to a URL whos content contains a lot of\n+ * The http client makes a connection to a URL whose content contains a lot of\n@@ -66,5 +69,1 @@\n-\n-    public static void main(String[] args) {\n-        startHttpServer();\n-        clientHttpCalls();\n-    }\n+    static ExecutorService executor = Executors.newSingleThreadExecutor();\n@@ -74,3 +73,1 @@\n-            server = HttpServer.create(new InetSocketAddress(InetAddress.getLocalHost(), 0), 10, \"\/\", new SimpleHttpTransactionHandler());\n-            server.setExecutor(Executors.newSingleThreadExecutor());\n-            server.start();\n+            server = HttpServer.create(new InetSocketAddress(InetAddress.getLoopbackAddress(), 0), 10, \"\/\", new SimpleHttpTransactionHandler());\n@@ -78,1 +75,1 @@\n-            e.printStackTrace();\n+            throw new RuntimeException(e);\n@@ -80,0 +77,3 @@\n+        server.setExecutor(executor);\n+        server.start();\n+        System.out.println(\"http server listens on: \" + server.getAddress());\n@@ -82,1 +82,6 @@\n-    public static void clientHttpCalls() {\n+    public static void stopHttpServer() {\n+        server.stop(1);\n+        executor.shutdown();\n+    }\n+\n+    public static void clientHttpCalls() throws Exception {\n@@ -87,5 +92,0 @@\n-        try {\n-            System.out.println(\"http server listen on: \" + server.getAddress().getPort());\n-            String hostAddr =  InetAddress.getLocalHost().getHostAddress();\n-            if (hostAddr.indexOf(':') > -1) hostAddr = \"[\" + hostAddr + \"]\";\n-            String baseURLStr = \"http:\/\/\" + hostAddr + \":\" + server.getAddress().getPort() + \"\/\";\n@@ -93,2 +93,13 @@\n-            URL bigDataURL = new URL (baseURLStr + \"firstCall\");\n-            URL smallDataURL = new URL (baseURLStr + \"secondCall\");\n+        URL bigDataURL = URIBuilder.newBuilder()\n+                .scheme(\"http\")\n+                .loopback()\n+                .port(server.getAddress().getPort())\n+                .path(\"\/firstCall\")\n+                .toURL();\n+\n+        URL smallDataURL = URIBuilder.newBuilder()\n+                .scheme(\"http\")\n+                .loopback()\n+                .port(server.getAddress().getPort())\n+                .path(\"\/secondCall\")\n+                .toURL();\n@@ -96,1 +107,1 @@\n-            HttpURLConnection uc = (HttpURLConnection)bigDataURL.openConnection(Proxy.NO_PROXY);\n+        HttpURLConnection uc = (HttpURLConnection)bigDataURL.openConnection(Proxy.NO_PROXY);\n@@ -98,2 +109,2 @@\n-            \/\/Only read 1 byte of response data and close the stream\n-            InputStream is = uc.getInputStream();\n+        \/\/ Only read 1 byte of response data and close the stream\n+        try (InputStream is = uc.getInputStream()) {\n@@ -102,41 +113,45 @@\n-            is.close();\n-\n-            \/\/ Allow the KeepAliveStreamCleaner thread to read the data left behind and cache the connection.\n-            try { Thread.sleep(2000); } catch (Exception e) {}\n-\n-            uc = (HttpURLConnection)smallDataURL.openConnection(Proxy.NO_PROXY);\n-            uc.getResponseCode();\n-\n-            if (SimpleHttpTransactionHandler.failed)\n-                throw new RuntimeException(\"Failed: Initial Keep Alive Connection is not being reused\");\n-\n-            \/\/ Part 2\n-            URL part2Url = new URL (baseURLStr + \"part2\");\n-            uc = (HttpURLConnection)part2Url.openConnection(Proxy.NO_PROXY);\n-            is = uc.getInputStream();\n-            is.close();\n-\n-            \/\/ Allow the KeepAliveStreamCleaner thread to try and read the data left behind and cache the connection.\n-            try { Thread.sleep(2000); } catch (Exception e) {}\n-\n-            ThreadMXBean threadMXBean = ManagementFactory.getThreadMXBean();\n-            if (threadMXBean.isThreadCpuTimeSupported()) {\n-                long[] threads = threadMXBean.getAllThreadIds();\n-                ThreadInfo[] threadInfo = threadMXBean.getThreadInfo(threads);\n-                for (int i=0; i<threadInfo.length; i++) {\n-                    if (threadInfo[i].getThreadName().equals(\"Keep-Alive-SocketCleaner\"))  {\n-                        System.out.println(\"Found Keep-Alive-SocketCleaner thread\");\n-                        long threadID = threadInfo[i].getThreadId();\n-                        long before = threadMXBean.getThreadCpuTime(threadID);\n-                        try { Thread.sleep(2000); } catch (Exception e) {}\n-                        long after = threadMXBean.getThreadCpuTime(threadID);\n-\n-                        if (before ==-1 || after == -1)\n-                            break;  \/\/ thread has died, OK\n-\n-                        \/\/ if Keep-Alive-SocketCleaner consumes more than 50% of cpu then we\n-                        \/\/ can assume a recursive loop.\n-                        long total = after - before;\n-                        if (total >= 1000000000)  \/\/ 1 second, or 1 billion nanoseconds\n-                            throw new RuntimeException(\"Failed: possible recursive loop in Keep-Alive-SocketCleaner\");\n-                    }\n+        }\n+\n+        \/\/ Allow the KeepAliveStreamCleaner thread to read the data left behind and cache the connection.\n+        try { Thread.sleep(2000); } catch (Exception e) {}\n+\n+        uc = (HttpURLConnection)smallDataURL.openConnection(Proxy.NO_PROXY);\n+        uc.getResponseCode();\n+\n+        if (SimpleHttpTransactionHandler.failed)\n+            throw new RuntimeException(\"Failed: Initial Keep Alive Connection is not being reused\");\n+\n+        \/\/ Part 2\n+        URL part2Url = URIBuilder.newBuilder()\n+                .scheme(\"http\")\n+                .loopback()\n+                .port(server.getAddress().getPort())\n+                .path(\"\/part2\")\n+                .toURL();\n+\n+        uc = (HttpURLConnection)part2Url.openConnection(Proxy.NO_PROXY);\n+        try (InputStream is = uc.getInputStream()) {}\n+\n+        \/\/ Allow the KeepAliveStreamCleaner thread to try and read the data left behind and cache the connection.\n+        try { Thread.sleep(2000); } catch (Exception e) {}\n+\n+        ThreadMXBean threadMXBean = ManagementFactory.getThreadMXBean();\n+        if (threadMXBean.isThreadCpuTimeSupported()) {\n+            long[] threads = threadMXBean.getAllThreadIds();\n+            ThreadInfo[] threadInfo = threadMXBean.getThreadInfo(threads);\n+            for (int i = 0; i < threadInfo.length; i++) {\n+                if (threadInfo[i].getThreadName().equals(\"Keep-Alive-SocketCleaner\")) {\n+                    System.out.println(\"Found Keep-Alive-SocketCleaner thread\");\n+                    long threadID = threadInfo[i].getThreadId();\n+                    long before = threadMXBean.getThreadCpuTime(threadID);\n+                    try { Thread.sleep(2000); } catch (Exception e) {}\n+                    long after = threadMXBean.getThreadCpuTime(threadID);\n+\n+                    if (before ==-1 || after == -1)\n+                        break;  \/\/ thread has died, OK\n+\n+                    \/\/ if Keep-Alive-SocketCleaner consumes more than 50% of cpu then we\n+                    \/\/ can assume a recursive loop.\n+                    long total = after - before;\n+                    if (total >= 1000000000)  \/\/ 1 second, or 1 billion nanoseconds\n+                        throw new RuntimeException(\"Failed: possible recursive loop in Keep-Alive-SocketCleaner\");\n@@ -145,5 +160,0 @@\n-\n-        } catch (IOException e) {\n-            e.printStackTrace();\n-        } finally {\n-            server.stop(1);\n@@ -155,1 +165,0 @@\n-}\n@@ -157,3 +166,2 @@\n-class SimpleHttpTransactionHandler implements HttpHandler\n-{\n-    static volatile boolean failed = false;\n+    static class SimpleHttpTransactionHandler implements HttpHandler {\n+        static volatile boolean failed = false;\n@@ -161,3 +169,3 @@\n-    \/\/ Need to have enough data here that is too large for the socket buffer to hold.\n-    \/\/ Also http.KeepAlive.remainingData must be greater than this value, default is 256K.\n-    static final int RESPONSE_DATA_LENGTH = 128 * 1024;\n+        \/\/ Need to have enough data here that is too large for the socket buffer to hold.\n+        \/\/ Also http.KeepAlive.remainingData must be greater than this value, default is 256K.\n+        static final int RESPONSE_DATA_LENGTH = 128 * 1024;\n@@ -165,1 +173,1 @@\n-    int port1;\n+        int port1;\n@@ -167,12 +175,36 @@\n-    public void handle(HttpExchange trans) {\n-        try {\n-            String path = trans.getRequestURI().getPath();\n-            if (path.equals(\"\/firstCall\")) {\n-                port1 = trans.getRemoteAddress().getPort();\n-                System.out.println(\"First connection on client port = \" + port1);\n-\n-                byte[] responseBody = new byte[RESPONSE_DATA_LENGTH];\n-                for (int i=0; i<responseBody.length; i++)\n-                    responseBody[i] = 0x41;\n-                trans.sendResponseHeaders(200, responseBody.length);\n-                try (OutputStream os = trans.getResponseBody()) {\n+        public void handle(HttpExchange trans) {\n+            try {\n+                String path = trans.getRequestURI().getPath();\n+                if (path.equals(\"\/firstCall\")) {\n+                    port1 = trans.getRemoteAddress().getPort();\n+                    System.out.println(\"First connection on client port = \" + port1);\n+\n+                    byte[] responseBody = new byte[RESPONSE_DATA_LENGTH];\n+                    for (int i=0; i<responseBody.length; i++)\n+                        responseBody[i] = 0x41;\n+                    trans.sendResponseHeaders(200, responseBody.length);\n+                    try (OutputStream os = trans.getResponseBody()) {\n+                        os.write(responseBody);\n+                    }\n+                } else if (path.equals(\"\/secondCall\")) {\n+                    int port2 = trans.getRemoteAddress().getPort();\n+                    System.out.println(\"Second connection on client port = \" + port2);\n+\n+                    if (port1 != port2)\n+                        failed = true;\n+\n+                     \/* Force the server to not respond for more that the timeout\n+                      * set by the keepalive cleaner (5000 millis). This ensures the\n+                      * timeout is correctly resets the default read timeout,\n+                      * infinity. See 6993490. *\/\n+                    System.out.println(\"server sleeping...\");\n+                    try {Thread.sleep(6000); } catch (InterruptedException e) {}\n+                    trans.sendResponseHeaders(200, -1);\n+                } else if (path.equals(\"\/part2\")) {\n+                    System.out.println(\"Call to \/part2\");\n+                    byte[] responseBody = new byte[RESPONSE_DATA_LENGTH];\n+                    for (int i=0; i<responseBody.length; i++)\n+                        responseBody[i] = 0x41;\n+                    \/\/ override the Content-length header to be greater than the actual response body\n+                    trans.sendResponseHeaders(200, responseBody.length+1);\n+                    OutputStream os = trans.getResponseBody();\n@@ -180,0 +212,3 @@\n+                    \/\/ now close the socket\n+                    \/\/ closing the stream here would throw; close the exchange instead\n+                    trans.close();\n@@ -181,26 +216,3 @@\n-            } else if (path.equals(\"\/secondCall\")) {\n-                int port2 = trans.getRemoteAddress().getPort();\n-                System.out.println(\"Second connection on client port = \" + port2);\n-\n-                if (port1 != port2)\n-                    failed = true;\n-\n-                 \/* Force the server to not respond for more that the timeout\n-                  * set by the keepalive cleaner (5000 millis). This ensures the\n-                  * timeout is correctly resets the default read timeout,\n-                  * infinity. See 6993490. *\/\n-                System.out.println(\"server sleeping...\");\n-                try {Thread.sleep(6000); } catch (InterruptedException e) {}\n-                trans.sendResponseHeaders(200, -1);\n-            } else if(path.equals(\"\/part2\")) {\n-                System.out.println(\"Call to \/part2\");\n-                byte[] responseBody = new byte[RESPONSE_DATA_LENGTH];\n-                for (int i=0; i<responseBody.length; i++)\n-                    responseBody[i] = 0x41;\n-                \/\/ override the Content-length header to be greater than the actual response body\n-                trans.sendResponseHeaders(200, responseBody.length+1);\n-                OutputStream os = trans.getResponseBody();\n-                os.write(responseBody);\n-                \/\/ now close the socket\n-                \/\/ closing the stream here would throw; close the exchange instead\n-                trans.close();\n+            } catch (Exception e) {\n+                e.printStackTrace();\n+                failed = true;\n@@ -208,2 +220,9 @@\n-        } catch (Exception e) {\n-            e.printStackTrace();\n+        }\n+    }\n+\n+    public static void main(String[] args) throws Exception {\n+        startHttpServer();\n+        try {\n+            clientHttpCalls();\n+        } finally {\n+            stopHttpServer();\n","filename":"test\/jdk\/sun\/net\/www\/http\/KeepAliveCache\/B5045306.java","additions":136,"deletions":117,"binary":false,"changes":253,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,2 +27,2 @@\n- * @run main\/othervm -Dhttp.keepAlive.time.server=20 -esa -ea B8291637 timeout\n- * @run main\/othervm -Dhttp.keepAlive.time.server=20 -esa -ea B8291637 max\n+ * @library \/test\/lib\n+ * @run main\/othervm -Dhttp.keepAlive.time.server=20 -esa -ea B8291637\n@@ -34,1 +34,4 @@\n-import java.net.*;\n+import java.net.HttpURLConnection;\n+import java.net.ServerSocket;\n+import java.net.Socket;\n+import java.net.URL;\n@@ -38,0 +41,2 @@\n+import jdk.test.lib.net.URIBuilder;\n+\n@@ -41,3 +46,1 @@\n-    static class Server extends Thread {\n-        final ServerSocket serverSocket;\n-        final int port;\n+    static class Server extends Thread implements AutoCloseable {\n@@ -45,0 +48,2 @@\n+        final ServerSocket serverSocket = new ServerSocket(0);\n+        final int port;\n@@ -48,1 +53,1 @@\n-            serverSocket = new ServerSocket(0);\n+            this.param = param;\n@@ -51,1 +56,0 @@\n-            this.param = param;\n@@ -58,6 +62,4 @@\n-        public void close() {\n-            try {\n-                serverSocket.close();\n-                if (s != null)\n-                    s.close();\n-            } catch (IOException e) {}\n+        public void close() throws IOException {\n+            serverSocket.close();\n+            if (s != null)\n+                s.close();\n@@ -128,15 +130,13 @@\n-    public static void main(String[] args) throws Exception {\n-        Server server = new Server(args[0]);\n-        int port = server.getPort();\n-        server.start();\n-        URL url = new URL(\"http:\/\/127.0.0.1:\" + Integer.toString(port) + \"\/\");\n-        HttpURLConnection urlc = (HttpURLConnection) url.openConnection();\n-        InputStream i = urlc.getInputStream();\n-        int c,count=0;\n-        byte[] buf = new byte[256];\n-        while ((c=i.read(buf)) != -1) {\n-            count+=c;\n-        }\n-        i.close();\n-        System.out.println(\"Read \" + count );\n-        try {\n+    public static void runTest(String param) throws Exception {\n+        try (Server server = new Server(param)) {\n+            server.start();\n+            URL url = URIBuilder.newBuilder()\n+                    .scheme(\"http\")\n+                    .loopback()\n+                    .port(server.getPort())\n+                    .path(\"\/\")\n+                    .toURL();\n+            HttpURLConnection urlc = (HttpURLConnection) url.openConnection();\n+            try (InputStream i = urlc.getInputStream()) {\n+                System.out.println(\"Read \" + i.readAllBytes().length);\n+            }\n@@ -148,2 +148,0 @@\n-        } finally {\n-            server.close();\n@@ -152,0 +150,5 @@\n+\n+    public static void main(String[] args) throws Exception {\n+        runTest(\"timeout\");\n+        runTest(\"max\");\n+    }\n","filename":"test\/jdk\/sun\/net\/www\/http\/KeepAliveCache\/B8291637.java","additions":35,"deletions":32,"binary":false,"changes":67,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+ * @summary Http keep-alive thread should close sockets without holding a lock\n@@ -29,1 +30,0 @@\n- * @summary Http keep-alive thread should close sockets without holding a lock\n@@ -32,9 +32,0 @@\n-import com.sun.net.httpserver.HttpExchange;\n-import com.sun.net.httpserver.HttpHandler;\n-import com.sun.net.httpserver.HttpServer;\n-\n-import javax.net.ssl.HandshakeCompletedListener;\n-import javax.net.ssl.HttpsURLConnection;\n-import javax.net.ssl.SSLSession;\n-import javax.net.ssl.SSLSocket;\n-import javax.net.ssl.SSLSocketFactory;\n@@ -56,0 +47,12 @@\n+import javax.net.ssl.HandshakeCompletedListener;\n+import javax.net.ssl.HttpsURLConnection;\n+import javax.net.ssl.SSLSession;\n+import javax.net.ssl.SSLSocket;\n+import javax.net.ssl.SSLSocketFactory;\n+\n+import com.sun.net.httpserver.HttpExchange;\n+import com.sun.net.httpserver.HttpHandler;\n+import com.sun.net.httpserver.HttpServer;\n+\n+import jdk.test.lib.net.URIBuilder;\n+\n@@ -76,4 +79,1 @@\n-            System.out.println(\"http server listen on: \" + server.getAddress().getPort());\n-            String hostAddr = InetAddress.getLoopbackAddress().getHostAddress();\n-            if (hostAddr.indexOf(':') > -1) hostAddr = \"[\" + hostAddr + \"]\";\n-            String baseURLStr = \"https:\/\/\" + hostAddr + \":\" + server.getAddress().getPort() + \"\/\";\n+            System.out.println(\"http server listens on: \" + server.getAddress().getPort());\n@@ -81,1 +81,5 @@\n-            URL testUrl = new URL (baseURLStr);\n+            URL testUrl = URIBuilder.newBuilder()\n+                    .scheme(\"https\")\n+                    .loopback()\n+                    .port(server.getAddress().getPort())\n+                    .toURL();\n","filename":"test\/jdk\/sun\/net\/www\/http\/KeepAliveCache\/B8293562.java","additions":19,"deletions":15,"binary":false,"changes":34,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,1 +26,0 @@\n- * @library \/test\/lib\n@@ -28,0 +27,1 @@\n+ * @library \/test\/lib\n@@ -33,4 +33,14 @@\n-import java.net.*;\n-import java.io.*;\n-import java.nio.charset.*;\n-import java.util.logging.*;\n+import java.io.BufferedOutputStream;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.io.PrintStream;\n+import java.net.InetAddress;\n+import java.net.InetSocketAddress;\n+import java.net.ServerSocket;\n+import java.net.Socket;\n+import java.net.URL;\n+import java.nio.charset.StandardCharsets;\n+import java.util.logging.ConsoleHandler;\n+import java.util.logging.Level;\n+import java.util.logging.Logger;\n+\n@@ -38,0 +48,1 @@\n+\n","filename":"test\/jdk\/sun\/net\/www\/http\/KeepAliveCache\/KeepAliveProperty.java","additions":17,"deletions":6,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2002, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2002, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,1 +26,0 @@\n- * @library \/test\/lib\n@@ -29,0 +28,1 @@\n+ * @library \/test\/lib\n@@ -33,2 +33,11 @@\n-import java.net.*;\n-import java.io.*;\n+import java.io.BufferedOutputStream;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.io.PrintStream;\n+import java.net.InetAddress;\n+import java.net.InetSocketAddress;\n+import java.net.ServerSocket;\n+import java.net.Socket;\n+import java.net.SocketTimeoutException;\n+import java.net.URL;\n+\n@@ -36,0 +45,1 @@\n+\n@@ -134,2 +144,0 @@\n-\n-        grp.destroy();\n@@ -137,1 +145,0 @@\n-\n","filename":"test\/jdk\/sun\/net\/www\/http\/KeepAliveCache\/KeepAliveTimerThread.java","additions":14,"deletions":7,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,1 +29,0 @@\n- * @key intermittent\n@@ -241,1 +240,1 @@\n-            t.join(1000L);\n+            t.join(4000L);\n","filename":"test\/jdk\/sun\/security\/ssl\/SSLSessionImpl\/ResumptionUpdateBoundValues.java","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,0 +37,1 @@\n+import java.net.BindException;\n@@ -40,0 +41,2 @@\n+    private static final int MAX_ATTEMPTS = 3;\n+\n@@ -53,1 +56,16 @@\n-        new ReuseAddr().run();\n+        for (int i=1 ; i <= MAX_ATTEMPTS; i++) {\n+            try {\n+                new ReuseAddr().run();\n+                System.out.println(\"Test succeeded at attempt \" + i);\n+                break;\n+            } catch (BindException x) {\n+                System.out.println(\"attempt \" + i + \" failed: \" + x);\n+                if (i == MAX_ATTEMPTS) {\n+                    String msg = \"Could not succeed after \" + i + \" attempts\";\n+                    System.err.println(msg);\n+                    throw new AssertionError(\"Failed to reuse address: \" + msg, x);\n+                } else {\n+                    System.out.println(\"Retrying...\");\n+                }\n+            }\n+        }\n","filename":"test\/jdk\/sun\/security\/ssl\/SSLSocketImpl\/ReuseAddr.java","additions":20,"deletions":2,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -0,0 +1,138 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8051959\n+ * @summary Option to print extra information in java.security.debug output\n+ * @library \/test\/lib\n+ * @run junit DebugOptions\n+ *\/\n+\n+import org.junit.jupiter.params.ParameterizedTest;\n+import org.junit.jupiter.params.provider.Arguments;\n+import org.junit.jupiter.params.provider.MethodSource;\n+\n+import java.security.KeyStore;\n+import java.security.Security;\n+import java.util.stream.Stream;\n+\n+import jdk.test.lib.process.OutputAnalyzer;\n+import jdk.test.lib.process.ProcessTools;\n+\n+public class DebugOptions {\n+\n+    static final String DATE_REGEX = \"\\\\d{4}-\\\\d{2}-\\\\d{2}\";\n+\n+    private static Stream<Arguments> patternMatches() {\n+        return Stream.of(\n+                \/\/ no extra info present\n+                Arguments.of(\"properties\",\n+                        \"properties: Initial\",\n+                        \"properties\\\\[\"),\n+                \/\/ thread info only\n+                Arguments.of(\"properties+thread\",\n+                        \"properties\\\\[.*\\\\|main\\\\|.*java.*]:\",\n+                        \"properties\\\\[\" + DATE_REGEX),\n+                \/\/ timestamp info only\n+                Arguments.of(\"properties+timestamp\",\n+                        \"properties\\\\[\" + DATE_REGEX + \".*\\\\]\",\n+                        \"\\\\|main\\\\]:\"),\n+                \/\/ both thread and timestamp\n+                Arguments.of(\"properties+timestamp+thread\",\n+                        \"properties\\\\[.*\\\\|main|\" + DATE_REGEX + \".*\\\\]:\",\n+                        \"properties:\"),\n+                \/\/ flip the arguments of previous test\n+                Arguments.of(\"properties+thread+timestamp\",\n+                        \"properties\\\\[.*\\\\|main|\" + DATE_REGEX + \".*\\\\]:\",\n+                        \"properties:\"),\n+                \/\/ comma not valid separator, ignore extra info printing request\n+                Arguments.of(\"properties,thread,timestamp\",\n+                        \"properties:\",\n+                        \"properties\\\\[.*\\\\|main|\" + DATE_REGEX + \".*\\\\]:\"),\n+                \/\/ no extra info for keystore debug prints\n+                Arguments.of(\"properties+thread+timestamp,keystore\",\n+                        \"properties\\\\[.*\\\\|main|\" + DATE_REGEX + \".*\\\\]:\",\n+                        \"keystore\\\\[\"),\n+                \/\/ flip arguments around in last test - same outcome expected\n+                Arguments.of(\"keystore,properties+thread+timestamp\",\n+                        \"properties\\\\[.*\\\\|main|\" + DATE_REGEX + \".*\\\\]:\",\n+                        \"keystore\\\\[\"),\n+                \/\/ turn on thread info for both keystore and properties components\n+                Arguments.of(\"keystore+thread,properties+thread\",\n+                        \"properties\\\\[.*\\\\|main|.*\\\\Rkeystore\\\\[.*\\\\|main|.*\\\\]:\",\n+                        \"\\\\|\" + DATE_REGEX + \".*\\\\]:\"),\n+                \/\/ same as above with erroneous comma at end of string. same output expected\n+                Arguments.of(\"keystore+thread,properties+thread,\",\n+                        \"properties\\\\[.*\\\\|main|.*\\\\Rkeystore\\\\[.*\\\\|main|.*\\\\]:\",\n+                        \"\\\\|\" + DATE_REGEX + \".*\\\\]:\"),\n+                \/\/ turn on thread info for properties and timestamp for keystore\n+                Arguments.of(\"keystore+timestamp,properties+thread\",\n+                        \"properties\\\\[.*\\\\|main|.*\\\\Rkeystore\\\\[\" + DATE_REGEX + \".*\\\\]:\",\n+                        \"properties\\\\[.*\\\\|\" + DATE_REGEX + \".*\\\\]:\"),\n+                \/\/ turn on thread info for all components\n+                Arguments.of(\"all+thread\",\n+                        \"properties\\\\[.*\\\\|main.*((.*\\\\R)*)keystore\\\\[.*\\\\|main.*java.*\\\\]:\",\n+                        \"properties\\\\[\" + DATE_REGEX + \".*\\\\]:\"),\n+                \/\/ turn on thread info and timestamp for all components\n+                Arguments.of(\"all+thread+timestamp\",\n+                        \"properties\\\\[.*\\\\|main.*\\\\|\" + DATE_REGEX +\n+                                \".*\\\\]((.*\\\\R)*)keystore\\\\[.*\\\\|main.*\\\\|\" + DATE_REGEX + \".*\\\\]:\",\n+                        \"properties:\"),\n+                \/\/ all decorator option should override other component options\n+                Arguments.of(\"all+thread+timestamp,properties\",\n+                        \"properties\\\\[.*\\\\|main.*\\\\|\" + DATE_REGEX +\n+                                \".*\\\\]((.*\\\\R)*)keystore\\\\[.*\\\\|main.*\\\\|\" + DATE_REGEX + \".*\\\\]:\",\n+                        \"properties:\"),\n+                \/\/ thread details should only be printed for properties option\n+                Arguments.of(\"properties+thread,all\",\n+                        \"properties\\\\[.*\\\\|main\\\\|.*\\\\]:\",\n+                        \"keystore\\\\[.*\\\\|main\\\\|.*\\\\]:\"),\n+                \/\/ thread details should be printed for all statements\n+                Arguments.of(\"properties,all+thread\",\n+                        \"properties\\\\[.*\\\\|main.*java\" +\n+                                \".*\\\\]((.*\\\\R)*)keystore\\\\[.*\\\\|main.*java.*\\\\]:\",\n+                        \"properties:\")\n+        );\n+    }\n+\n+    @ParameterizedTest\n+    @MethodSource(\"patternMatches\")\n+    public void shouldContain(String params, String expected, String notExpected) throws Exception {\n+        OutputAnalyzer outputAnalyzer = ProcessTools.executeTestJava(\n+                \"-Djava.security.debug=\" + params,\n+                \"DebugOptions\"\n+        );\n+        outputAnalyzer.shouldHaveExitValue(0)\n+                .shouldMatch(expected)\n+                .shouldNotMatch(notExpected);\n+    }\n+\n+    public static void main(String[] args) throws Exception {\n+        \/\/ something to trigger \"properties\" debug output\n+        Security.getProperty(\"test\");\n+        \/\/ trigger \"keystore\" debug output\n+        KeyStore ks = KeyStore.getInstance(\"PKCS12\");\n+        ks.load(null, null);\n+    }\n+}\n","filename":"test\/jdk\/sun\/security\/util\/Debug\/DebugOptions.java","additions":138,"deletions":0,"binary":false,"changes":138,"status":"added"},{"patch":"@@ -28,1 +28,1 @@\n- * @bug 6994753 7123582 8305950 8281658\n+ * @bug 6994753 7123582 8305950 8281658 8310201\n@@ -70,0 +70,3 @@\n+    private static final String LOCALE_SUMMARY_SETTINGS =\n+                \"Locale settings summary:\";\n+    private static final String AVAILABLE_LOCALES = \"available locales\";\n@@ -84,1 +87,3 @@\n-        checkContains(tr, LOCALE_SETTINGS);\n+        checkNotContains(tr, LOCALE_SETTINGS);\n+        checkNotContains(tr, AVAILABLE_LOCALES);\n+        checkContains(tr, LOCALE_SUMMARY_SETTINGS);\n@@ -156,0 +161,2 @@\n+        checkContains(tr, AVAILABLE_LOCALES);\n+        checkNotContains(tr, LOCALE_SUMMARY_SETTINGS);\n","filename":"test\/jdk\/tools\/launcher\/Settings.java","additions":9,"deletions":2,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -50,1 +50,0 @@\n-import java.util.stream.Collectors;\n@@ -87,4 +86,0 @@\n-\n-        public void putAll(Map<String, String> map) {\n-            map.entrySet().forEach(e -> put(e.getKey(), () -> e.getValue()));\n-        }\n@@ -110,0 +105,1 @@\n+        map.put(\"vm.jvmci.enabled\", this::vmJvmciEnabled);\n@@ -138,1 +134,0 @@\n-        map.putAll(xOptFlags()); \/\/ -Xmx4g -> @requires vm.opt.x.Xmx == \"4g\" )\n@@ -275,0 +270,14 @@\n+\n+    \/**\n+     * @return true if JVMCI is enabled\n+     *\/\n+    protected String vmJvmciEnabled() {\n+        \/\/ builds with jvmci have this flag\n+        if (\"false\".equals(vmJvmci())) {\n+            return \"false\";\n+        }\n+\n+        return \"\" + Compiler.isJVMCIEnabled();\n+    }\n+\n+\n@@ -686,21 +695,0 @@\n-    \/**\n-     * Parses extra options, options that start with -X excluding the\n-     * bare -X option (as it is not considered an extra option).\n-     * Ignores extra options not starting with -X\n-     *\n-     * This could be improved to handle extra options not starting\n-     * with -X as well as \"standard\" options.\n-     *\/\n-    private Map<String, String> xOptFlags() {\n-        return allFlags()\n-            .filter(s -> s.startsWith(\"-X\") && !s.startsWith(\"-XX:\") && !s.equals(\"-X\"))\n-            .map(s -> s.replaceFirst(\"-\", \"\"))\n-            .map(flag -> flag.splitWithDelimiters(\"[:0123456789]\", 2))\n-            .collect(Collectors.toMap(a -> \"vm.opt.x.\" + a[0],\n-                                      a -> (a.length == 1)\n-                                      ? \"true\" \/\/ -Xnoclassgc\n-                                      : (a[1].equals(\":\")\n-                                         ? a[2]            \/\/ [\"-XshowSettings\", \":\", \"system\"]\n-                                         : a[1] + a[2]))); \/\/ [\"-Xmx\", \"4\", \"g\"]\n-    }\n-\n","filename":"test\/jtreg-ext\/requires\/VMProps.java","additions":16,"deletions":28,"binary":false,"changes":44,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n- * @run testng\/timeout=900\/othervm JavadocHelperTest\n+ * @run testng\/timeout=900\/othervm -Xmx1024m JavadocHelperTest\n","filename":"test\/langtools\/jdk\/internal\/shellsupport\/doc\/JavadocHelperTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n- * @bug 4165985\n+ * @bug 4165985 8326332\n@@ -79,0 +79,5 @@\n+\n+        checkOutput(\"pkg\/BreakIteratorTest.html\", true,\n+                \"\"\"\n+                    <div class=\"block\">Inline tags <i><a href=\"..\/index-all.html\">extending\n+                     beyond the first sentence.<\/a><\/i><\/div>\"\"\");\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testBreakIterator\/TestBreakIterator.java","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -59,0 +59,5 @@\n+    \/**\n+     * Inline tags <i><a href=\"{@docRoot}\/index-all.html\">extending\n+     * beyond the first sentence. Tags are closed here.<\/a><\/i>\n+     *\/\n+    public void meh(){}\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testBreakIterator\/pkg\/BreakIteratorTest.java","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,1 +26,1 @@\n- * @bug 8164130\n+ * @bug 8164130 8334332\n@@ -28,1 +28,1 @@\n- * @library ..\/..\/lib\n+ * @library ..\/..\/lib \/test\/lib\n@@ -42,0 +42,1 @@\n+import jtreg.SkippedException;\n@@ -64,1 +65,1 @@\n-            throw error(outDir, \"Cannot create directory\");\n+            throw skip(outDir, \"Cannot create directory\");\n@@ -67,4 +68,1 @@\n-            if (skip(outDir)) {\n-                return;\n-            }\n-            throw error(outDir, \"could not set directory read-only\");\n+            throw skip(outDir, \"could not set directory read-only\");\n@@ -73,1 +71,1 @@\n-            throw error(outDir, \"directory is writable\");\n+            throw skip(outDir, \"directory is writable\");\n@@ -96,1 +94,1 @@\n-            throw error(outDir, \"Cannot create directory\");\n+            throw skip(outDir, \"Cannot create directory\");\n@@ -101,1 +99,1 @@\n-            throw error(index, \"could not set index read-only\");\n+            throw skip(index, \"could not set index read-only\");\n@@ -104,1 +102,1 @@\n-            throw error(index, \"index is writable\");\n+            throw skip(index, \"index is writable\");\n@@ -142,1 +140,1 @@\n-            throw error(pkgOutDir, \"Cannot create directory\");\n+            throw skip(pkgOutDir, \"Cannot create directory\");\n@@ -145,4 +143,1 @@\n-            if (skip(pkgOutDir)) {\n-                return;\n-            }\n-            throw error(pkgOutDir, \"could not set directory read-only\");\n+            throw skip(pkgOutDir, \"could not set directory read-only\");\n@@ -151,1 +146,1 @@\n-            throw error(pkgOutDir, \"directory is writable\");\n+            throw skip(pkgOutDir, \"directory is writable\");\n@@ -195,1 +190,1 @@\n-            throw error(docFilesOutDir, \"Cannot create directory\");\n+            throw skip(docFilesOutDir, \"Cannot create directory\");\n@@ -198,4 +193,1 @@\n-            if (skip(docFilesOutDir)) {\n-                return;\n-            }\n-            throw error(docFilesOutDir, \"could not set directory read-only\");\n+            throw skip(docFilesOutDir, \"could not set directory read-only\");\n@@ -204,1 +196,1 @@\n-            throw error(docFilesOutDir, \"directory is writable\");\n+            throw skip(docFilesOutDir, \"directory is writable\");\n@@ -222,1 +214,2 @@\n-    private Error error(File f, String message) {\n+    private Error skip(File f, String message) {\n+        out.print(System.getProperty(\"user.name\"));\n@@ -225,1 +218,1 @@\n-        throw new Error(f + \": \" + message);\n+        throw new SkippedException(f + \": \" + message);\n@@ -245,15 +238,0 @@\n-\n-    private boolean skip(File dir) {\n-        if (isWindows()) {\n-            showAllAttributes(dir.toPath());\n-            out.println(\"Windows: cannot set directory read only:\" + dir);\n-            out.println(\"TEST CASE SKIPPED\");\n-            return true;\n-        } else {\n-            return false;\n-        }\n-    }\n-\n-    private boolean isWindows() {\n-        return System.getProperty(\"os.name\").toLowerCase(Locale.US).startsWith(\"windows\");\n-    }\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testIOException\/TestIOException.java","additions":19,"deletions":41,"binary":false,"changes":60,"status":"modified"},{"patch":"@@ -424,1 +424,1 @@\n-                    <script type=\"text\/javascript\" src=\"script-dir\/jquery-3.6.1.min.js\"><\/script>\n+                    <script type=\"text\/javascript\" src=\"script-dir\/jquery-3.7.1.min.js\"><\/script>\n@@ -674,1 +674,1 @@\n-                \"script-dir\/jquery-3.6.1.min.js\",\n+                \"script-dir\/jquery-3.7.1.min.js\",\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testSearch\/TestSearch.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -39,1 +39,1 @@\n-    load(docsPath + \"\/search.js\");\n+    load(docsPath + \"\/script-files\/search.js\");\n@@ -66,0 +66,6 @@\n+            attr: function() {\n+                return this;\n+            },\n+            css: function() {\n+                return this;\n+            },\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testSearchScript\/javadoc-search.js","additions":8,"deletions":2,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -205,1 +205,1 @@\n-            \"script-dir\/jquery-3.6.1.min.js\",\n+            \"script-dir\/jquery-3.7.1.min.js\",\n","filename":"test\/langtools\/jdk\/javadoc\/tool\/api\/basic\/APITest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -67,0 +67,1 @@\n+                .executionEngine(Presets.TEST_DEFAULT_EXECUTION)\n","filename":"test\/langtools\/jdk\/jshell\/AnalyzeSnippetTest.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -93,1 +93,2 @@\n-                    .start(\"--no-startup\");\n+                    .start(\"--no-startup\",\n+                           \"--execution\", Presets.TEST_DEFAULT_EXECUTION);\n","filename":"test\/langtools\/jdk\/jshell\/CustomInputToolBuilder.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,1 +28,0 @@\n-import java.net.InetAddress;\n@@ -35,15 +34,2 @@\n-    String standardListenSpec() {\n-        String loopback = InetAddress.getLoopbackAddress().getHostAddress();\n-        return \"jdi:hostname(\" + loopback + \")\";\n-    }\n-\n-    String standardLaunchSpec() {\n-        return \"jdi:launch(true)\";\n-    }\n-\n-    String standardJdiSpec() {\n-        return \"jdi\";\n-    }\n-\n-    String standardSpecs() {\n-        return \"5(\" + standardListenSpec() + \"), 6(\" + standardLaunchSpec() + \"), 7(\" + standardJdiSpec() + \")\";\n+    String alwaysPassingSpec() {\n+        return \"5(local)\";\n","filename":"test\/langtools\/jdk\/jshell\/ExecutionControlTestBase.java","additions":3,"deletions":17,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -132,3 +132,1 @@\n-        pm.put(\"2\", standardListenSpec());\n-        pm.put(\"3\", standardLaunchSpec());\n-        pm.put(\"4\", standardJdiSpec());\n+        pm.put(\"2\", \"local\");\n@@ -162,3 +160,1 @@\n-                log.contains(\"Success failover -- 2 = \" + standardListenSpec())\n-                || log.contains(\"Success failover -- 3 = \" + standardLaunchSpec())\n-                || log.contains(\"Success failover -- 4 = \" + standardJdiSpec()),\n+                log.contains(\"Success failover -- 2 = local\"),\n","filename":"test\/langtools\/jdk\/jshell\/FailOverDirectExecutionControlTest.java","additions":3,"deletions":7,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -46,1 +46,1 @@\n-                    + standardSpecs()));\n+                    + alwaysPassingSpec()));\n","filename":"test\/langtools\/jdk\/jshell\/FailOverExecutionControlDyingLaunchTest.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -45,1 +45,1 @@\n-                        + standardSpecs()));\n+                        + alwaysPassingSpec()));\n","filename":"test\/langtools\/jdk\/jshell\/FailOverExecutionControlHangingLaunchTest.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -48,1 +48,1 @@\n-                        + standardSpecs()));\n+                        + alwaysPassingSpec()));\n","filename":"test\/langtools\/jdk\/jshell\/FailOverExecutionControlHangingListenTest.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -44,1 +44,1 @@\n-                + standardSpecs()));\n+                + alwaysPassingSpec()));\n","filename":"test\/langtools\/jdk\/jshell\/FailOverExecutionControlTest.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -56,1 +56,2 @@\n-                .err(new PrintStream(errStream));\n+                .err(new PrintStream(errStream))\n+                .executionEngine(Presets.TEST_DEFAULT_EXECUTION);\n","filename":"test\/langtools\/jdk\/jshell\/IdGeneratorTest.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -103,1 +103,3 @@\n-        JShell js = JShell.create();\n+        JShell js = JShell.builder()\n+                          .executionEngine(Presets.TEST_DEFAULT_EXECUTION)\n+                          .build();\n@@ -195,1 +197,2 @@\n-                .err(new PrintStream(errStream));\n+                .err(new PrintStream(errStream))\n+                .executionEngine(Presets.TEST_DEFAULT_EXECUTION);\n","filename":"test\/langtools\/jdk\/jshell\/KullaTesting.java","additions":5,"deletions":2,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -0,0 +1,59 @@\n+\/*\n+ * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.net.InetAddress;\n+import java.util.*;\n+\n+public class Presets {\n+    public static final String TEST_DEFAULT_EXECUTION;\n+    public static final String TEST_STANDARD_EXECUTION;\n+\n+    static {\n+        String loopback = InetAddress.getLoopbackAddress().getHostAddress();\n+\n+        TEST_DEFAULT_EXECUTION = \"failover:0(jdi:hostname(\" + loopback + \")),\" +\n+                                 \"1(jdi:launch(true)), 2(jdi), 3(local)\";\n+        TEST_STANDARD_EXECUTION = \"failover:0(jdi:hostname(\" + loopback + \")),\" +\n+                                  \"1(jdi:launch(true)), 2(jdi)\";\n+    }\n+\n+    public static String[] addExecutionIfMissing(String[] args) {\n+        if (Arrays.stream(args).noneMatch(Presets::remoteRelatedOption)) {\n+            List<String> augmentedArgs = new ArrayList<>();\n+\n+            augmentedArgs.add(\"--execution\");\n+            augmentedArgs.add(Presets.TEST_DEFAULT_EXECUTION);\n+            augmentedArgs.addAll(List.of(args));\n+\n+            return augmentedArgs.toArray(s -> new String[s]);\n+        }\n+\n+        return args;\n+    }\n+\n+    private static boolean remoteRelatedOption(String option) {\n+        return \"--execution\".equals(option) ||\n+               \"--add-modules\".equals(option) ||\n+               option.startsWith(\"-R\");\n+    }\n+}\n","filename":"test\/langtools\/jdk\/jshell\/Presets.java","additions":59,"deletions":0,"binary":false,"changes":59,"status":"added"},{"patch":"@@ -307,1 +307,1 @@\n-        testRawRun(locale, args);\n+        testRawRun(locale, Presets.addExecutionIfMissing(args));\n","filename":"test\/langtools\/jdk\/jshell\/ReplToolTesting.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -84,1 +84,1 @@\n-                    .start(args);\n+                    .start(Presets.addExecutionIfMissing(args));\n","filename":"test\/langtools\/jdk\/jshell\/StartOptionTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -204,1 +204,1 @@\n-        test(\n+        test(new String[] {\"--execution\", Presets.TEST_STANDARD_EXECUTION},\n","filename":"test\/langtools\/jdk\/jshell\/ToolReloadTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -96,1 +96,2 @@\n-                        .run(\"--no-startup\");\n+                        .run(\"--no-startup\",\n+                             \"--execution\", Presets.TEST_DEFAULT_EXECUTION);\n","filename":"test\/langtools\/jdk\/jshell\/UITesting.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -0,0 +1,44 @@\n+\/*\n+ * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+ \/*\n+ * @test\n+ * @bug 8312229\n+ * @summary Ensure javac does not crash when a variable is used from an anonymous class\n+ * @compile T8312229.java\n+ *\/\n+public class T8312229 {\n+    void test(Object o) {\n+        Runnable r = () -> {\n+            var l = switch (o) {\n+                default -> {\n+                    Integer i = 42;\n+                    yield new Runnable() {\n+                        public void run() {\n+                            i.toString(); \/\/ should not crash here\n+                        }\n+                    };\n+                }\n+            };\n+        };\n+    }\n+}\n","filename":"test\/langtools\/tools\/javac\/patterns\/T8312229.java","additions":44,"deletions":0,"binary":false,"changes":44,"status":"added"},{"patch":"@@ -26,1 +26,1 @@\n- * @bug 8291769\n+ * @bug 8291769 8326129\n@@ -34,1 +34,1 @@\n- * @build toolbox.ToolBox toolbox.JavacTask\n+ * @build toolbox.ToolBox toolbox.JavacTask toolbox.JavaTask\n@@ -51,0 +51,1 @@\n+import java.io.File;\n@@ -59,0 +60,1 @@\n+import toolbox.JavaTask;\n@@ -191,0 +193,32 @@\n+    @Test \/\/JDK-8326129\n+    public void testRunWithNull(Path base) throws Exception {\n+        doRunTest(base,\n+                  new String[]{\"\"\"\n+                               package lib;\n+                               public record Box(Object o) {}\n+                               \"\"\"},\n+                  \"\"\"\n+                  import lib.*;\n+                  public class Test {\n+                      public static void main(String... args) {\n+                          System.err.println(new Test().test(new Box(null)));\n+                      }\n+                      private int test(Box b) {\n+                          return switch (b) {\n+                              case Box(Integer i) -> 0;\n+                              case Box(Object o) when check(o) -> 1;\n+                              case Box(Object o) -> 2;\n+                          };\n+                      }\n+                      private static int c;\n+                      private boolean check(Object o) {\n+                          System.err.println(\"check: \" + o);\n+                          if (c++ > 10) throw new IllegalStateException();\n+                          return o != null;\n+                      }\n+                  }\n+                  \"\"\",\n+                  \"check: null\",\n+                  \"2\");\n+    }\n+\n@@ -325,0 +359,47 @@\n+\n+    private void doRunTest(Path base, String[] libraryCode, String testCode,\n+                           String... expectedOutput) throws IOException {\n+        Path current = base.resolve(\".\");\n+        Path libClasses = current.resolve(\"libClasses\");\n+\n+        Files.createDirectories(libClasses);\n+\n+        if (libraryCode.length != 0) {\n+            Path libSrc = current.resolve(\"lib-src\");\n+\n+            for (String code : libraryCode) {\n+                tb.writeJavaFiles(libSrc, code);\n+            }\n+\n+            new JavacTask(tb)\n+                    .outdir(libClasses)\n+                    .files(tb.findJavaFiles(libSrc))\n+                    .run();\n+        }\n+\n+        Path src = current.resolve(\"src\");\n+        tb.writeJavaFiles(src, testCode);\n+\n+        Path classes = current.resolve(\"classes\");\n+\n+        Files.createDirectories(classes);\n+\n+        new JavacTask(tb)\n+            .options(\"-Xlint:-preview\",\n+                     \"--class-path\", libClasses.toString())\n+            .outdir(classes)\n+            .files(tb.findJavaFiles(src))\n+            .run()\n+            .writeAll();\n+\n+        List<String> log = new JavaTask(tb)\n+            .classpath(libClasses.toString() + File.pathSeparatorChar + classes.toString())\n+            .classArgs(\"Test\")\n+            .run()\n+            .getOutputLines(Task.OutputKind.STDERR);\n+\n+        if (!List.of(expectedOutput).equals(log)) {\n+            throw new AssertionError(\"Expected: \" + expectedOutput +\n+                                     \"but got: \" + log);\n+        }\n+    }\n","filename":"test\/langtools\/tools\/javac\/patterns\/TranslationTest.java","additions":83,"deletions":2,"binary":false,"changes":85,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -56,1 +56,1 @@\n-                \"isHardenedOSX\", \"hasOSXPlistEntries\", \"isOracleLinux7\");\n+                \"isHardenedOSX\", \"hasOSXPlistEntries\", \"isOracleLinux7\", \"isOnWayland\");\n","filename":"test\/lib-test\/jdk\/test\/lib\/TestMutuallyExclusivePlatformPredicates.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -476,0 +476,9 @@\n+\n+    \/**\n+     * Checks if the current system is running on Wayland display server on Linux.\n+     *\n+     * @return {@code true} if the system is running on Wayland display server\n+     *\/\n+    public static boolean isOnWayland() {\n+        return System.getenv(\"WAYLAND_DISPLAY\") != null;\n+    }\n","filename":"test\/lib\/jdk\/test\/lib\/Platform.java","additions":10,"deletions":1,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -45,0 +45,2 @@\n+    private static final String FATAL_ERROR_PAT = \"# A fatal error has been detected.*\";\n+\n@@ -852,0 +854,7 @@\n+    \/**\n+     * Assert that we did not crash with a hard VM error (generating an hs_err_pidXXX.log)\n+     *\/\n+    public void shouldNotHaveFatalError() {\n+        shouldNotMatch(FATAL_ERROR_PAT);\n+    }\n+\n","filename":"test\/lib\/jdk\/test\/lib\/process\/OutputAnalyzer.java","additions":9,"deletions":0,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -47,1 +47,1 @@\n-@Fork(value = 3, jvmArgsAppend = {\"--add-exports\", \"java.base\/sun.security.util=ALL-UNNAMED\", \"-Xmx1g\"})\n+@Fork(value = 3, jvmArgsAppend = {\"--add-exports\", \"java.base\/sun.security.util=ALL-UNNAMED\"})\n","filename":"test\/micro\/org\/openjdk\/bench\/java\/security\/CacheBench.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -83,1 +83,2 @@\n-        KeyManagerFactory kmf = KeyManagerFactory.getInstance(\"SunX509\");\n+        KeyManagerFactory kmf = KeyManagerFactory.getInstance(\n+                KeyManagerFactory.getDefaultAlgorithm());\n@@ -86,2 +87,2 @@\n-        TrustManagerFactory tmf =\n-                TrustManagerFactory.getInstance(\"SunX509\");\n+        TrustManagerFactory tmf = TrustManagerFactory.getInstance(\n+                TrustManagerFactory.getDefaultAlgorithm());\n","filename":"test\/micro\/org\/openjdk\/bench\/java\/security\/SSLHandshake.java","additions":5,"deletions":4,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -118,1 +118,1 @@\n-        KeyStore result = KeyStore.getInstance(\"JKS\");\n+        KeyStore result = KeyStore.getInstance(KeyStore.getDefaultType());\n@@ -123,1 +123,1 @@\n-                        TestCertificates.SERVER_CERT.getBytes(StandardCharsets.ISO_8859_1)));\n+                        SERVER_CERT.getBytes(StandardCharsets.ISO_8859_1)));\n@@ -138,1 +138,1 @@\n-        KeyStore result = KeyStore.getInstance(\"JKS\");\n+        KeyStore result = KeyStore.getInstance(KeyStore.getDefaultType());\n","filename":"test\/micro\/org\/openjdk\/bench\/java\/security\/TestCertificates.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -111,2 +111,5 @@\n-        InflaterInputStream iis = new InflaterInputStream(deflated);\n-        while (iis.read(inflated, 0, inflated.length) != -1);\n+        \/\/ We close the InflaterInputStream to release underlying native resources of the Inflater.\n+        \/\/ The \"deflated\" ByteArrayInputStream remains unaffected.\n+        try (InflaterInputStream iis = new InflaterInputStream(deflated)) {\n+            while (iis.read(inflated, 0, inflated.length) != -1);\n+        }\n","filename":"test\/micro\/org\/openjdk\/bench\/java\/util\/zip\/InflaterInputStreams.java","additions":5,"deletions":2,"binary":false,"changes":7,"status":"modified"}]}