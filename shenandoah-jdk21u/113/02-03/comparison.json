{"files":[{"patch":"@@ -181,4 +181,7 @@\n-      \/\/ Notify Universe about new heap usage. This has implications for\n-      \/\/ global soft refs policy, and we better report it every time heap\n-      \/\/ usage goes down.\n-      heap->update_capacity_and_used_at_gc();\n+      {\n+        \/\/ Notify Universe about new heap usage. This has implications for\n+        \/\/ global soft refs policy, and we better report it every time heap\n+        \/\/ usage goes down.\n+        ShenandoahHeapLocker locker(heap->lock());\n+        heap->update_capacity_and_used_at_gc();\n+      }\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahControlThread.cpp","additions":7,"deletions":4,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -268,4 +268,7 @@\n-      \/\/ Notify Universe about new heap usage. This has implications for\n-      \/\/ global soft refs policy, and we better report it every time heap\n-      \/\/ usage goes down.\n-      heap->update_capacity_and_used_at_gc();\n+      {\n+        \/\/ Notify Universe about new heap usage. This has implications for\n+        \/\/ global soft refs policy, and we better report it every time heap\n+        \/\/ usage goes down.\n+        ShenandoahHeapLocker locker(heap->lock());\n+        heap->update_capacity_and_used_at_gc();\n+      }\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahGenerationalControlThread.cpp","additions":7,"deletions":4,"binary":false,"changes":11,"status":"modified"}]}