{"files":[{"patch":"@@ -581,0 +581,21 @@\n+  if (ret != 0) {\n+    const char *msg = \"\";\n+    switch (ret) {\n+      case RESTORE_ERROR_NOT_FOUND:\n+        msg = \"the image or its part cannot be found\";\n+        break;\n+      case RESTORE_ERROR_NO_ACCESS:\n+        msg = \"the image cannot be accessed\/retrieved (permissions or I\/O issue)\";\n+        break;\n+      case RESTORE_ERROR_INVALID:\n+        msg = \"the image does not match current CPU or is corrupted\";\n+        break;\n+      case RESTORE_ERROR_MEMORY:\n+        msg = \"memory allocation failure during restore\";\n+        break;\n+      case RESTORE_ERROR_PROCINFO:\n+        msg = \"the process cannot fetch information about itself\";\n+        break;\n+    }\n+    log_error(crac)(\"CRaC engine failed to restore from %s: %s (error %d)\", CRaCRestoreFrom, msg, ret);\n+  }\n@@ -582,1 +603,0 @@\n-    log_error(crac)(\"CRaC engine failed to restore from %s: the image is either corrupted or does not match current CPU\", CRaCRestoreFrom);\n@@ -589,2 +609,0 @@\n-  } else if (ret != 0) {\n-    log_error(crac)(\"CRaC engine failed to restore from %s: error %i\", CRaCRestoreFrom, ret);\n","filename":"src\/hotspot\/share\/runtime\/crac.cpp","additions":21,"deletions":3,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -52,1 +52,1 @@\n-            .shouldContain(\"incompatible CPU features\").shouldContain(MAIN_MSG);\n+            .shouldContain(\"the image or its part cannot be found\").shouldContain(MAIN_MSG);\n","filename":"test\/jdk\/jdk\/crac\/ignoreRestore\/NoCPUFeaturesTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}