{"files":[{"patch":"@@ -332,7 +332,20 @@\n-    \/\/ On some systems using SSSD files in this directory are left open\n-    \/\/ after calling getpwuid_r, getpwname_r, getgrgid_r, getgrname_r\n-    \/\/ or other functions in this family.\n-    constexpr const char *sss_nss_memcache = \"\/var\/lib\/sss\/mc\/\";\n-    if (!strncmp(details, sss_nss_memcache, strlen(sss_nss_memcache))) {\n-      print_resources(\"OK: SSSD cache\\n\");\n-      continue;\n+    if (CRAllowedOpenFilePrefixes != nullptr) {\n+      const char *prefix = CRAllowedOpenFilePrefixes;\n+      \/\/ JDK appends to ccstrlist using newline, on command line that would be comma\n+      size_t prefix_length = strcspn(prefix, \",\\n\");\n+      bool matched = false;\n+      while (prefix_length > 0) {\n+        if (!strncmp(details, prefix, prefix_length)) {\n+          matched = true;\n+          break;\n+        }\n+        if (prefix[prefix_length] == '\\0') {\n+          break;\n+        }\n+        prefix += prefix_length + 1;\n+        prefix_length = strcspn(prefix, \",\\n\");\n+      }\n+      if (matched) {\n+        print_resources(\"OK: allowed in -XX:CRAllowedOpenFilePrefixes\\n\");\n+        continue;\n+      }\n","filename":"src\/hotspot\/os\/linux\/crac_linux.cpp","additions":20,"deletions":7,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -116,0 +116,1 @@\n+define_pd_global(ccstrlist, CRAllowedOpenFilePrefixes, \"\/var\/lib\/sss\/mc\/\");\n","filename":"src\/hotspot\/os\/linux\/globals_linux.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2019,0 +2019,6 @@\n+  product_pd(ccstrlist, CRAllowedOpenFilePrefixes, \"List of path prefixes \" \\\n+      \"for files that can be open during checkpoint; CRaC won't error \"     \\\n+      \"upon detecting these and will leave the handling up to C\/R engine. \" \\\n+      \"This option applies only to files opened by native code; for files \" \\\n+      \"opened by Java code use -Djdk.crac.resource-policies=...\")           \\\n+                                                                            \\\n","filename":"src\/hotspot\/share\/runtime\/globals.hpp","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"}]}