{"files":[{"patch":"@@ -288,1 +288,1 @@\n-        c.intersection = malloc(c.data_size);\n+        c.intersection = static_cast<unsigned char *>(malloc(c.data_size));\n@@ -290,1 +290,1 @@\n-          const_cast<unsigned char*>(static_cast<const unsigned char*>(c.intersection))[ix]\n+          c.intersection[ix]\n@@ -294,1 +294,1 @@\n-        print_bitmap(\"Intersection: \", static_cast<const unsigned char*>(c.intersection), c.data_size);\n+        print_bitmap(\"Intersection: \", c.intersection, c.data_size);\n","filename":"src\/java.base\/share\/native\/libcrexec\/image_constraints.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -83,1 +83,1 @@\n-    const void* intersection; \/\/ data_size\n+    unsigned char* intersection; \/\/ data_size\n@@ -98,0 +98,1 @@\n+      o.intersection = nullptr;\n@@ -103,1 +104,1 @@\n-      free((void *) intersection);\n+      free((void*) intersection);\n@@ -147,2 +148,6 @@\n-        if (value_return && c.intersection && value_size == c.data_size) {\n-          memcpy(value_return, c.intersection, c.data_size);\n+        if (value_return) {\n+          if (!c.intersection || value_size != c.data_size) {\n+            result = false;\n+          } else {\n+            memcpy(value_return, c.intersection, c.data_size);\n+          }\n","filename":"src\/java.base\/share\/native\/libcrexec\/image_constraints.hpp","additions":9,"deletions":4,"binary":false,"changes":13,"status":"modified"}]}