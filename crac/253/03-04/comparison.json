{"files":[{"patch":"@@ -31,0 +31,1 @@\n+import static jdk.test.lib.Asserts.*;\n@@ -98,9 +99,3 @@\n-            if (variant != Variant.CHECKPOINT_EXCEPTION) {\n-                throw new IllegalStateException(\"Unexpected checkpoint failure\", ex);\n-            }\n-            if (ex.getSuppressed().length != 1) {\n-                throw new IllegalStateException(\"Unexpected suppressions\", ex);\n-            }\n-            if (!checkpointFail.equals(ex.getSuppressed()[0].getMessage())) {\n-                throw new IllegalStateException(\"Unexpected suppression message\", ex);\n-            }\n+            assertEquals(Variant.CHECKPOINT_EXCEPTION, variant, \"Checkpoint failed unexpectedly\", ex);\n+            assertEquals(1, ex.getSuppressed().length, \"Number of suppressions\", ex);\n+            assertEquals(checkpointFail, ex.getSuppressed()[0].getMessage(), \"Suppression message\", ex);\n@@ -108,9 +103,3 @@\n-            if (variant != Variant.RESTORE_EXCEPTION) {\n-                throw new IllegalStateException(\"Unexpected checkpoint failure\", ex);\n-            }\n-            if (ex.getSuppressed().length != 1) {\n-                throw new IllegalStateException(\"Unexpected suppressions\", ex);\n-            }\n-            if (!restoreFail.equals(ex.getSuppressed()[0].getMessage())) {\n-                throw new IllegalStateException(\"Unexpected suppression message\", ex);\n-            }\n+            assertEquals(Variant.RESTORE_EXCEPTION, variant, \"Restore failed unexpectedly\", ex);\n+            assertEquals(1, ex.getSuppressed().length, \"Number of suppressions\", ex);\n+            assertEquals(restoreFail, ex.getSuppressed()[0].getMessage(), \"Suppression message\", ex);\n@@ -125,0 +114,6 @@\n+\n+    private static void assertEquals(Object lhs, Object rhs, String msg, Throwable cause) {\n+        if ((lhs != rhs) && ((lhs == null) || !(lhs.equals(rhs)))) {\n+            fail(msg + \" expected: \" + lhs + \" but was: \" + rhs, cause);\n+        }\n+    }\n","filename":"test\/jdk\/jdk\/crac\/newArgs\/FailedCheckpointRestoreTest.java","additions":13,"deletions":18,"binary":false,"changes":31,"status":"modified"}]}