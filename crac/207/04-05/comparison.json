{"files":[{"patch":"@@ -11,0 +11,1 @@\n+#include \"utilities\/resourceHash.hpp\"\n@@ -119,0 +120,14 @@\n+static unsigned int cstring_hash(const char * const &s) {\n+  unsigned int h = 0;\n+  for (const char *p = s; *p != '\\0'; p++) {\n+    h = 31 * h + *p;\n+  }\n+  return h;\n+}\n+static bool cstring_equals(const char * const &s0, const char * const &s1) {\n+  return strcmp(s0, s1) == 0;\n+}\n+\/\/ Have to use C-heap because resource area may yet be unavailable when this is used\n+using CStringSet = ResourceHashtable<const char *, bool, 256, AnyObj::C_HEAP, MemTag::mtInternal,\n+                                     cstring_hash, cstring_equals>;\n+\n@@ -151,0 +166,1 @@\n+  CStringSet keys;\n@@ -161,0 +177,7 @@\n+    {\n+      bool is_new_key;\n+      keys.put_if_absent(key, &is_new_key);\n+      if (!is_new_key) {\n+        log_warning(crac)(\"CRaC engine option '%s' specified multiple times\", key);\n+      }\n+    }\n","filename":"src\/hotspot\/share\/runtime\/crac_engine.cpp","additions":23,"deletions":0,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -187,3 +187,0 @@\n-  bool _is_keep_running_configured = false;\n-  bool _is_direct_map_configured = false;\n-\n@@ -256,9 +253,0 @@\n-  static void warn_if_already_configured(bool is_configured, const char *option_name) {\n-    if (!is_configured) {\n-      return;\n-    }\n-    fprintf(stderr,\n-            CREXEC \"'%s' configured multiple times, only the last value will be used\\n\",\n-            option_name);\n-  }\n-\n@@ -266,1 +254,0 @@\n-    \/\/ Don't warn if already configured: this is not intended to be set by a user\n@@ -277,1 +264,0 @@\n-    \/\/ Don't warn if already configured: this is not intended to be set by a user\n@@ -292,6 +278,1 @@\n-    warn_if_already_configured(_is_keep_running_configured, opt_keep_running);\n-    if (!parse_bool(keep_running_str, &_keep_running)) {\n-      return false;\n-    }\n-    _is_keep_running_configured = true;\n-    return true;\n+    return parse_bool(keep_running_str, &_keep_running);\n@@ -301,6 +282,1 @@\n-    warn_if_already_configured(_is_direct_map_configured, opt_direct_map);\n-    if (!parse_bool(direct_map_str, &_direct_map)) {\n-      return false;\n-    }\n-    _is_direct_map_configured = true;\n-    return true;\n+    return parse_bool(direct_map_str, &_direct_map);\n@@ -310,2 +286,0 @@\n-    warn_if_already_configured(_argv[ARGV_FREE] != nullptr, opt_args);\n-\n","filename":"src\/java.base\/share\/native\/libcrexec\/crexec.cpp","additions":2,"deletions":28,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -92,1 +92,1 @@\n-                    Arrays.asList(\"configured multiple times\"));\n+                    Arrays.asList(\"specified multiple times\"));\n@@ -97,1 +97,1 @@\n-                    \"'keep_running' configured multiple times\");\n+                    \"CRaC engine option 'keep_running' specified multiple times\");\n@@ -143,1 +143,1 @@\n-                    \"'args' configured multiple times\"\n+                    \"CRaC engine option 'args' specified multiple times\"\n@@ -155,1 +155,1 @@\n-                Arrays.asList(\"configured multiple times\"));\n+                Arrays.asList(\"specified multiple times\"));\n","filename":"test\/jdk\/jdk\/crac\/CracEngineOptionsTest.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"}]}