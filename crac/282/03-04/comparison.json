{"files":[{"patch":"@@ -894,2 +894,1 @@\n-  return _features;\n-#else\n+#endif \/\/ !LINUX\n@@ -904,0 +903,3 @@\n+#ifndef LINUX\n+    return _features;\n+#else\n@@ -920,0 +922,1 @@\n+#endif \/\/ !LINUX\n@@ -921,0 +924,4 @@\n+#ifndef LINUX\n+  vm_exit_during_initialization(\"This OS does not support any arch-specific -XX:CPUFeatures options\");\n+  return {};\n+#else \/\/ LINUX\n@@ -949,1 +956,1 @@\n-#endif \/\/ LINUX\n+#endif\n","filename":"src\/hotspot\/cpu\/x86\/vm_version_x86.cpp","additions":10,"deletions":3,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -57,2 +57,2 @@\n- * @run driver jdk.test.lib.crac.CracTest foobar        -- INVALID_FORMAT\n- * @run driver jdk.test.lib.crac.CracTest 0xfffff,0x0   -- MISSING_FEATURES\n+ * @run driver jdk.test.lib.crac.CracTest foobar              -- INVALID_FORMAT\n+ * @run driver jdk.test.lib.crac.CracTest 0xfffff,0x0         -- MISSING_FEATURES\n@@ -62,3 +62,3 @@\n- * @test id=AARCH64-LINUX\n- * @requires os.family == \"linux\"\n- * @requires os.arch==\"aarch64\"\n+ * @test id=x86-NON-LINUX\n+ * @requires os.arch==\"amd64\" | os.arch==\"x86_64\"\n+ * @requires os.family != \"linux\"\n@@ -67,2 +67,2 @@\n- * @run driver jdk.test.lib.crac.CracTest 0x0,0x0 -- UNSUPPORTED_ARCH\n- * @run driver jdk.test.lib.crac.CracTest foobar  -- UNSUPPORTED_ARCH\n+ * @run driver jdk.test.lib.crac.CracTest foobar            -- OS_DOES_NOT_SUPPORT\n+ * @run driver jdk.test.lib.crac.CracTest 0x20000000080,0x0 -- OS_DOES_NOT_SUPPORT\n@@ -71,4 +71,3 @@\n- * @test id=NON-LINUX\n- * @comment non-Linux behaves as if CPUFeatures=ignored was set\n- * @requires os.family != \"linux\"\n-  * @library \/test\/lib\n+ * @test id=AARCH64\n+ * @requires os.arch==\"aarch64\"\n+ * @library \/test\/lib\n@@ -76,1 +75,2 @@\n- * @run driver jdk.test.lib.crac.CracTest foobar\n+ * @run driver jdk.test.lib.crac.CracTest 0x0,0x0 -- ARCH_DOES_NOT_SUPPORT\n+ * @run driver jdk.test.lib.crac.CracTest foobar  -- ARCH_DOES_NOT_SUPPORT\n@@ -85,1 +85,2 @@\n-        UNSUPPORTED_ARCH(\"This architecture does not support any arch-specific\")\n+        ARCH_DOES_NOT_SUPPORT(\"This architecture does not support any arch-specific\"),\n+        OS_DOES_NOT_SUPPORT(\"This OS does not support\"),\n","filename":"test\/jdk\/jdk\/crac\/CPUFeatures\/SimpleCPUFeaturesTest.java","additions":14,"deletions":13,"binary":false,"changes":27,"status":"modified"}]}