{"files":[{"patch":"@@ -41,2 +41,6 @@\n-            assertEquals(137, process.waitFor(), \"Checkpointed process was not killed as expected.\");\n-            \/\/ TODO: we could check that \"CR: Checkpoint\" was written out\n+            final var exitValue = process.waitFor();\n+            if (exitValue != 137 && builder.captureOutput) {\n+                printOutput();\n+            }\n+            assertEquals(137, exitValue, \"Checkpointed process was not killed as expected.\");\n+            builder.log(\"Process %d completed with exit value %d%n\", process.pid(), exitValue);\n@@ -109,0 +113,1 @@\n+        final OutputAnalyzer oa;\n@@ -110,3 +115,1 @@\n-            OutputAnalyzer oa = outputAnalyzer();\n-            System.err.print(oa.getStderr());\n-            System.out.print(oa.getStdout());\n+            oa = outputAnalyzer();\n@@ -116,0 +119,6 @@\n+        \/\/ Similar to OutputAnalyzer.reportDiagnosticSummary() but a bit better formatted\n+        System.err.println(\"stdout: [\");\n+        System.err.print(oa.getStdout());\n+        System.err.println(\"]\\nstderr: [\");\n+        System.err.print(oa.getStderr());\n+        System.err.println(\"]\\nexitValue = \" + oa.getExitValue() + \"\\n\");\n","filename":"test\/lib\/jdk\/test\/lib\/crac\/CracProcess.java","additions":14,"deletions":5,"binary":false,"changes":19,"status":"modified"}]}