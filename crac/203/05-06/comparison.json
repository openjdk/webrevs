{"files":[{"patch":"@@ -223,1 +223,8 @@\n-  const Klass* klass = SystemDictionary::resolve_or_fail(jvm_upcalls_class_sym, true, CHECK);\n+  const Klass* klass = SystemDictionary::resolve_or_fail(jvm_upcalls_class_sym, true, THREAD);\n+  if (HAS_PENDING_EXCEPTION) {\n+    CLEAR_PENDING_EXCEPTION;\n+    ResourceMark rm(THREAD);\n+    log_error(jfr, system)(\"JfrUpcall cannot resolve class %s, flight recording won't be started\",\n+      jvm_upcalls_class_sym->as_C_string());\n+    return;\n+  }\n","filename":"src\/hotspot\/share\/jfr\/jni\/jfrUpcalls.cpp","additions":8,"deletions":1,"binary":false,"changes":9,"status":"modified"}]}