{"files":[{"patch":"@@ -47,1 +47,1 @@\n-size_t MallocMemorySummary::_snapshot[CALC_OBJ_SIZE_IN_TYPE(MallocMemorySnapshot, size_t)];\n+MallocMemorySnapshot MallocMemorySummary::_snapshot;\n@@ -82,1 +82,0 @@\n-  assert(sizeof(_snapshot) >= sizeof(MallocMemorySnapshot), \"Sanity Check\");\n@@ -84,1 +83,0 @@\n-  ::new ((void*)_snapshot)MallocMemorySnapshot();\n","filename":"src\/hotspot\/share\/services\/mallocTracker.cpp","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -143,1 +143,1 @@\n-class MallocMemorySnapshot : public ResourceObj {\n+class MallocMemorySnapshot {\n@@ -201,1 +201,1 @@\n-  static size_t _snapshot[CALC_OBJ_SIZE_IN_TYPE(MallocMemorySnapshot, size_t)];\n+  static MallocMemorySnapshot _snapshot;\n@@ -248,1 +248,1 @@\n-    return (MallocMemorySnapshot*)_snapshot;\n+    return &_snapshot;\n","filename":"src\/hotspot\/share\/services\/mallocTracker.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -34,2 +34,0 @@\n-#define CALC_OBJ_SIZE_IN_TYPE(obj, type) (align_up(sizeof(obj), sizeof(type))\/sizeof(type))\n-\n","filename":"src\/hotspot\/share\/services\/nmtCommon.hpp","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -35,1 +35,1 @@\n-size_t VirtualMemorySummary::_snapshot[CALC_OBJ_SIZE_IN_TYPE(VirtualMemorySnapshot, size_t)];\n+VirtualMemorySnapshot VirtualMemorySummary::_snapshot;\n@@ -49,6 +49,0 @@\n-void VirtualMemorySummary::initialize() {\n-  assert(sizeof(_snapshot) >= sizeof(VirtualMemorySnapshot), \"Sanity Check\");\n-  \/\/ Use placement operator new to initialize static data area.\n-  ::new ((void*)_snapshot) VirtualMemorySnapshot();\n-}\n-\n@@ -337,1 +331,0 @@\n-    VirtualMemorySummary::initialize();\n","filename":"src\/hotspot\/share\/services\/virtualMemoryTracker.cpp","additions":1,"deletions":8,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -137,1 +137,0 @@\n-  static void initialize();\n@@ -172,1 +171,1 @@\n-    return (VirtualMemorySnapshot*)_snapshot;\n+    return &_snapshot;\n@@ -176,1 +175,1 @@\n-  static size_t _snapshot[CALC_OBJ_SIZE_IN_TYPE(VirtualMemorySnapshot, size_t)];\n+  static VirtualMemorySnapshot _snapshot;\n","filename":"src\/hotspot\/share\/services\/virtualMemoryTracker.hpp","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"}]}