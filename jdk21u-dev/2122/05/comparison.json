{"files":[{"patch":"@@ -30,1 +30,2 @@\n- * @run junit\/othervm --enable-native-access=ALL-UNNAMED JfrEvents\n+ * @compile --enable-preview -source ${jdk.version} JfrEvents.java\n+ * @run junit\/othervm --enable-preview --enable-native-access=ALL-UNNAMED JfrEvents\n@@ -47,0 +48,1 @@\n+import java.util.stream.IntStream;\n@@ -75,4 +77,6 @@\n-            ThreadFactory factory = Thread.ofVirtual().factory();\n-            try (var executor = Executors.newThreadPerTaskExecutor(factory)) {\n-                for (int i = 0; i < 100; i++) {\n-                    executor.submit(() -> { });\n+            try {\n+                List<Thread> threads = IntStream.range(0, 100)\n+                        .mapToObj(_ -> Thread.startVirtualThread(() -> { }))\n+                        .toList();\n+                for (Thread t : threads) {\n+                    t.join();\n@@ -80,1 +84,0 @@\n-                Thread.sleep(1000); \/\/ give time for thread end events to be recorded\n","filename":"test\/jdk\/java\/lang\/Thread\/virtual\/JfrEvents.java","additions":9,"deletions":6,"binary":false,"changes":15,"status":"modified"}]}