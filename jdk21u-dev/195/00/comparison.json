{"files":[{"patch":"@@ -58,0 +58,3 @@\n+import java.util.regex.Matcher;\n+import java.util.regex.Pattern;\n+import java.util.stream.Collectors;\n@@ -62,0 +65,1 @@\n+import jdk.test.lib.Platform;\n@@ -825,1 +829,5 @@\n-                return fetchNssLib(LINUX_X64.class);\n+                if (Platform.isOracleLinux7()) {\n+                    throw new SkippedException(\"Skipping Oracle Linux prior to v8\");\n+                } else {\n+                    return fetchNssLib(LINUX_X64.class);\n+                }\n@@ -828,2 +836,5 @@\n-                return fetchNssLib(LINUX_AARCH64.class);\n-\n+                if (Platform.isOracleLinux7()) {\n+                    throw new SkippedException(\"Skipping Oracle Linux prior to v8\");\n+                } else {\n+                    return fetchNssLib(LINUX_AARCH64.class);\n+                }\n","filename":"test\/jdk\/sun\/security\/pkcs11\/PKCS11Test.java","additions":14,"deletions":3,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2021, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,0 +24,1 @@\n+\n@@ -35,1 +36,0 @@\n-import java.util.Iterator;\n@@ -37,2 +37,0 @@\n-import java.util.ServiceConfigurationError;\n-import java.util.ServiceLoader;\n@@ -41,0 +39,1 @@\n+import jtreg.SkippedException;\n@@ -49,1 +48,7 @@\n-        String nssConfig = PKCS11Test.getNssConfig();\n+        String nssConfig = null;\n+        try {\n+            nssConfig = PKCS11Test.getNssConfig();\n+        } catch (SkippedException exc) {\n+            System.out.println(\"Skipping test: \" + exc.getMessage());\n+        }\n+\n","filename":"test\/jdk\/sun\/security\/pkcs11\/Provider\/MultipleLogins.java","additions":10,"deletions":5,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -29,0 +29,1 @@\n+#        jdk.test.lib.Platform\n","filename":"test\/jdk\/sun\/security\/pkcs11\/Provider\/MultipleLogins.sh","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -56,1 +56,1 @@\n-                \"isHardenedOSX\", \"hasOSXPlistEntries\");\n+                \"isHardenedOSX\", \"hasOSXPlistEntries\", \"isOracleLinux7\");\n","filename":"test\/lib-test\/jdk\/test\/lib\/TestMutuallyExclusivePlatformPredicates.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -36,0 +36,1 @@\n+import java.util.regex.Matcher;\n@@ -351,0 +352,14 @@\n+    public static boolean isOracleLinux7() {\n+        if (System.getProperty(\"os.name\").toLowerCase().contains(\"linux\") &&\n+                System.getProperty(\"os.version\").toLowerCase().contains(\"el\")) {\n+            Pattern p = Pattern.compile(\"el(\\\\d+)\");\n+            Matcher m = p.matcher(System.getProperty(\"os.version\"));\n+            if (m.find()) {\n+                try {\n+                    return Integer.parseInt(m.group(1)) <= 7;\n+                } catch (NumberFormatException nfe) {}\n+            }\n+        }\n+        return false;\n+    }\n+\n","filename":"test\/lib\/jdk\/test\/lib\/Platform.java","additions":15,"deletions":0,"binary":false,"changes":15,"status":"modified"}]}