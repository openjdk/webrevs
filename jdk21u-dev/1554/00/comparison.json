{"files":[{"patch":"@@ -37,0 +37,2 @@\n+\n+    static final int WASTE_SIZE = 1024;\n@@ -38,0 +40,1 @@\n+    static Object sink;\n@@ -62,1 +65,4 @@\n-                \/\/ fill until OOM\n+                \/\/ Fill until OOM and fail. This sets up heap for secondary OOM\n+                \/\/ later on, which should be caught by CDS code. The size of waste\n+                \/\/ array defines how much max free space would be left for later\n+                \/\/ code to run with.\n@@ -64,2 +70,2 @@\n-                for (;;) {\n-                    waste.add(new byte[64*1024]);\n+                while (true) {\n+                    waste.add(new byte[WASTE_SIZE]);\n@@ -107,2 +113,2 @@\n-        for (int x=0; x<10; x++) {\n-            Object[] a = new Object[10000];\n+        for (int x = 0; x < 10; x++) {\n+            sink = new byte[WASTE_SIZE];\n@@ -118,1 +124,1 @@\n-            Object o = new Object();\n+            sink = new Object();\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/javaldr\/GCDuringDumpTransformer.java","additions":12,"deletions":6,"binary":false,"changes":18,"status":"modified"}]}