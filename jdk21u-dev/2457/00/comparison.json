{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2021, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2021, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -160,1 +160,7 @@\n-            if (j < 0) continue;\n+            if (j < 0) {\n+                \/\/ If there is no preceding name and this path is absolute,\n+                \/\/ then remove this instance of \"..\"\n+                if (path[0] == '\/')\n+                    ix[i] = 0;\n+                continue;\n+            }\n","filename":"src\/java.base\/unix\/native\/libjava\/path_util.c","additions":8,"deletions":2,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+   @run junit GetCanonicalPath\n@@ -30,0 +31,10 @@\n+import java.util.stream.Stream;\n+\n+import org.junit.jupiter.api.Test;\n+import org.junit.jupiter.api.condition.EnabledOnOs;\n+import org.junit.jupiter.api.condition.OS;\n+import org.junit.jupiter.params.provider.MethodSource;\n+import org.junit.jupiter.params.ParameterizedTest;\n+import org.junit.jupiter.params.provider.Arguments;\n+\n+import static org.junit.jupiter.api.Assertions.*;\n@@ -32,6 +43,4 @@\n-    public static void main(String[] args) throws Exception {\n-        if (File.separatorChar == '\\\\') {\n-            testDriveLetter();\n-        }\n-    }\n-    private static void testDriveLetter() throws Exception {\n+\n+    @Test\n+    @EnabledOnOs(OS.WINDOWS)\n+    void driveLetter() throws IOException {\n@@ -39,2 +48,20 @@\n-        if (path.length() > 3)\n-            throw new RuntimeException(\"Drive letter incorrectly represented\");\n+        assertFalse(path.length() > 3, \"Drive letter incorrectly represented\");\n+    }\n+\n+    private static Stream<Arguments> pathProviderUnix() {\n+        return Stream.of(\n+                Arguments.of(\"\/..\/..\/..\/..\/..\/a\/b\/c\", \"\/a\/b\/c\"),\n+                Arguments.of(\"\/..\/..\/..\/..\/..\/a\/..\/b\/c\", \"\/b\/c\"),\n+                Arguments.of(\"\/..\/..\/..\/..\/..\/a\/..\/..\/b\/c\", \"\/b\/c\"),\n+                Arguments.of(\"\/..\/..\/..\/..\/..\/a\/..\/..\/..\/b\/c\", \"\/b\/c\"),\n+                Arguments.of(\"\/..\/..\/..\/..\/..\/a\/..\/..\/..\/..\/b\/c\", \"\/b\/c\")\n+        );\n+    }\n+\n+    @ParameterizedTest\n+    @EnabledOnOs({OS.AIX, OS.LINUX, OS.MAC})\n+    @MethodSource(\"pathProviderUnix\")\n+    void goodPathsUnix(String pathname, String expected) throws IOException {\n+        File file = new File(pathname);\n+        String canonicalPath = file.getCanonicalPath();\n+        assertEquals(expected, canonicalPath);\n","filename":"test\/jdk\/java\/io\/File\/GetCanonicalPath.java","additions":35,"deletions":8,"binary":false,"changes":43,"status":"modified"}]}