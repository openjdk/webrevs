{"files":[{"patch":"@@ -46,0 +46,1 @@\n+import javax.swing.UnsupportedLookAndFeelException;\n@@ -48,1 +49,0 @@\n-\n@@ -60,5 +60,0 @@\n-        SwingUtilities.invokeAndWait(() -> {\n-            changeLAF();\n-            createAndShowGUI();\n-        });\n-\n@@ -66,22 +61,0 @@\n-        robot.waitForIdle();\n-        robot.delay(1000);\n-\n-        \/\/ tab key test grouped radio button\n-        runTest1();\n-        robot.delay(100);\n-\n-        \/\/ tab key test non-grouped radio button\n-        runTest2();\n-        robot.delay(100);\n-\n-        \/\/ shift tab key test grouped and non-grouped radio button\n-        runTest3();\n-        robot.delay(100);\n-\n-        \/\/ left\/up key test in grouped radio button\n-        runTest4();\n-        robot.delay(100);\n-\n-        \/\/ down\/right key test in grouped radio button\n-        runTest5();\n-        robot.delay(100);\n@@ -89,15 +62,6 @@\n-        \/\/ tab from radio button in group to next component in the middle of button group layout\n-        runTest6();\n-        robot.delay(100);\n-\n-        \/\/ tab to radio button in group from component in the middle of button group layout\n-        runTest7();\n-        robot.delay(100);\n-\n-        \/\/ down key circle back to first button in grouped radio button\n-        runTest8();\n-        robot.delay(100);\n-\n-        \/\/ Verify that ActionListener is called when a RadioButton is selected using arrow key.\n-        runTest9();\n-        robot.delay(100);\n+        \/\/ Get all installed Look and Feels\n+        UIManager.LookAndFeelInfo[] lafs = UIManager.getInstalledLookAndFeels();\n+        for (UIManager.LookAndFeelInfo laf : lafs) {\n+            testLaF(laf);\n+        }\n+    }\n@@ -105,1 +69,56 @@\n-        SwingUtilities.invokeAndWait(() -> mainFrame.dispose());\n+    private static void testLaF(UIManager.LookAndFeelInfo laf) throws Exception {\n+        try {\n+            System.out.println(\"Testing LaF: \" + laf.getName());\n+            SwingUtilities.invokeAndWait(() -> {\n+                setLookAndFeel(laf);\n+                createAndShowGUI();\n+            });\n+\n+            robot.waitForIdle();\n+            robot.delay(1000);\n+\n+            \/\/ tab key test grouped radio button\n+            runTest1();\n+            robot.delay(100);\n+\n+            \/\/ tab key test non-grouped radio button\n+            runTest2();\n+            robot.delay(100);\n+\n+            \/\/ shift tab key test grouped and non-grouped radio button\n+            runTest3();\n+            robot.delay(100);\n+\n+            \/\/ left\/up key test in grouped radio button\n+            runTest4();\n+            robot.delay(100);\n+\n+            \/\/ down\/right key test in grouped radio button\n+            runTest5();\n+            robot.delay(100);\n+\n+            \/\/ tab from radio button in group to next component in the middle of button group layout\n+            runTest6();\n+            robot.delay(100);\n+\n+            \/\/ tab to radio button in group from component in the middle of button group layout\n+            runTest7();\n+            robot.delay(100);\n+\n+            \/\/ down key circle back to first button in grouped radio button\n+            runTest8();\n+            robot.delay(100);\n+\n+            \/\/ Verify that ActionListener is called when a RadioButton is selected using arrow key.\n+            runTest9();\n+            robot.delay(100);\n+        } catch (Exception e) {\n+            throw new RuntimeException(\"Error testing LaF: \" + laf.getName(), e);\n+        } finally {\n+            SwingUtilities.invokeAndWait(() -> {\n+                if (mainFrame != null) {\n+                    mainFrame.dispose();\n+                    mainFrame = null;\n+                }\n+            });\n+        }\n@@ -108,10 +127,7 @@\n-    private static void changeLAF() {\n-        String currentLAF = UIManager.getLookAndFeel().toString();\n-        System.out.println(currentLAF);\n-        currentLAF = currentLAF.toLowerCase();\n-        if (currentLAF.contains(\"nimbus\")) {\n-            try {\n-                UIManager.setLookAndFeel(\"javax.swing.plaf.metal.MetalLookAndFeel\");\n-            } catch (Exception ex) {\n-                ex.printStackTrace();\n-            }\n+    private static void setLookAndFeel(UIManager.LookAndFeelInfo laf) {\n+        try {\n+            UIManager.setLookAndFeel(laf.getClassName());\n+        } catch (ClassNotFoundException | InstantiationException |\n+                 IllegalAccessException | UnsupportedLookAndFeelException e) {\n+            System.err.println(\"Error setting LaF: \" + laf.getName());\n+            throw new RuntimeException(\"Failed to set look and feel\", e);\n","filename":"test\/jdk\/javax\/swing\/JRadioButton\/8033699\/bug8033699.java","additions":70,"deletions":54,"binary":false,"changes":124,"status":"modified"}]}