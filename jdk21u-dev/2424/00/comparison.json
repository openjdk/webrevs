{"files":[{"patch":"@@ -537,0 +537,1 @@\n+    jboolean doIt = JNI_FALSE;\n@@ -592,1 +593,1 @@\n-            return JNI_FALSE;\n+            return doIt;\n@@ -620,1 +621,1 @@\n-        return JNI_FALSE;\n+        return doIt;\n@@ -634,1 +635,1 @@\n-            return JNI_FALSE;\n+            return doIt;\n@@ -676,1 +677,1 @@\n-            return JNI_FALSE;\n+            return doIt;\n@@ -685,1 +686,1 @@\n-            return JNI_FALSE;\n+            return doIt;\n@@ -699,1 +700,1 @@\n-                        return JNI_FALSE;\n+                        return doIt;\n@@ -705,0 +706,1 @@\n+        doIt = JNI_TRUE;\n@@ -723,1 +725,1 @@\n-    return JNI_TRUE;\n+    return doIt;\n","filename":"src\/java.desktop\/windows\/native\/libawt\/windows\/awt_PrintJob.cpp","additions":9,"deletions":7,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -0,0 +1,58 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8334366\n+ * @key headful printer\n+ * @summary Verifies original pageobject is returned unmodified\n+ *          on cancelling pagedialog\n+ * @requires (os.family == \"windows\")\n+ * @run main PageDialogCancelTest\n+ *\/\n+\n+import java.awt.Robot;\n+import java.awt.event.KeyEvent;\n+import java.awt.print.PageFormat;\n+import java.awt.print.PrinterJob;\n+\n+public class PageDialogCancelTest {\n+\n+    public static void main(String[] args) throws Exception {\n+        PrinterJob pj = PrinterJob.getPrinterJob();\n+        PageFormat oldFormat = new PageFormat();\n+        Robot robot = new Robot();\n+        Thread t1 = new Thread(() -> {\n+            robot.delay(2000);\n+            robot.keyPress(KeyEvent.VK_ESCAPE);\n+            robot.keyRelease(KeyEvent.VK_ESCAPE);\n+            robot.waitForIdle();\n+        });\n+        t1.start();\n+        PageFormat newFormat = pj.pageDialog(oldFormat);\n+        if (!newFormat.equals(oldFormat)) {\n+            throw new RuntimeException(\"Original PageFormat not returned on cancelling PageDialog\");\n+        }\n+    }\n+}\n+\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PageDialogCancelTest.java","additions":58,"deletions":0,"binary":false,"changes":58,"status":"added"}]}