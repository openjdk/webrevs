{"files":[{"patch":"@@ -341,0 +341,4 @@\n+    uint survivor_regions_count = _g1h->survivor_regions_count();\n+    uint desired_eden_length = desired_young_length - survivor_regions_count;\n+    uint allocated_eden_length = allocated_young_length - survivor_regions_count;\n+\n@@ -343,2 +347,2 @@\n-      uint receiving_young = MIN3(_free_regions_at_end_of_collection,\n-                                  desired_young_length,\n+      uint receiving_eden = MIN3(_free_regions_at_end_of_collection,\n+                                  desired_eden_length,\n@@ -346,0 +350,2 @@\n+      \/\/ Ensure that we provision for at least one Eden region.\n+      receiving_eden = MAX2(receiving_eden, 1u);\n@@ -348,2 +354,2 @@\n-      receiving_additional_eden = allocated_young_length < receiving_young ?\n-                                  receiving_young - allocated_young_length : 0;\n+      receiving_additional_eden = allocated_eden_length < receiving_eden ?\n+                                  receiving_eden - allocated_eden_length : 0;\n@@ -352,4 +358,3 @@\n-                                \"receiving young %u receiving additional eden %u\",\n-                                receiving_young,\n-                                receiving_additional_eden);\n-    } else if (_free_regions_at_end_of_collection < (desired_young_length + _reserve_regions)) {\n+                                \"receiving eden %u receiving additional eden %u\",\n+                                receiving_eden, receiving_additional_eden);\n+    } else if (_free_regions_at_end_of_collection < (desired_eden_length + _reserve_regions)) {\n@@ -358,1 +363,1 @@\n-      assert(free_outside_reserve < desired_young_length,\n+      assert(free_outside_reserve < desired_eden_length,\n@@ -360,1 +365,1 @@\n-             free_outside_reserve, desired_young_length);\n+             free_outside_reserve, desired_eden_length);\n@@ -362,1 +367,1 @@\n-      uint receiving_within_reserve = MIN2(desired_young_length - free_outside_reserve,\n+      uint receiving_within_reserve = MIN2(desired_eden_length - free_outside_reserve,\n@@ -364,1 +369,2 @@\n-      uint receiving_young = free_outside_reserve + receiving_within_reserve;\n+      uint receiving_eden = free_outside_reserve + receiving_within_reserve;\n+\n@@ -366,2 +372,2 @@\n-      receiving_additional_eden = allocated_young_length < receiving_young ?\n-                                  receiving_young - allocated_young_length : 0;\n+      receiving_additional_eden = allocated_eden_length < receiving_eden ?\n+                                  receiving_eden - allocated_eden_length : 0;\n@@ -372,1 +378,1 @@\n-                                \"receiving young %u \"\n+                                \"receiving eden %u \"\n@@ -375,1 +381,1 @@\n-                                receiving_young, receiving_additional_eden);\n+                                receiving_eden, receiving_additional_eden);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1Policy.cpp","additions":22,"deletions":16,"binary":false,"changes":38,"status":"modified"}]}