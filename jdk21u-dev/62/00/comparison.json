{"files":[{"patch":"@@ -28,0 +28,1 @@\n+import java.io.InputStreamReader;\n@@ -32,1 +33,0 @@\n-import java.util.Scanner;\n@@ -85,2 +85,2 @@\n-        try (Scanner largeHeapScanner = new Scanner(\n-                largeHeapProc.getInputStream());) {\n+        try (BufferedReader r = new BufferedReader(\n+                new InputStreamReader(largeHeapProc.getInputStream()))) {\n@@ -88,2 +88,8 @@\n-            if (!largeHeapScanner.hasNext()) {\n-                throw new RuntimeException (\"Test failed: could not open largeHeapScanner.\");\n+            while ((pidstring = r.readLine()) != null) {\n+                \/\/ The output might contain different VM output, skip it while searching PID line.\n+                if (pidstring.matches(\"PID\\\\[[0-9].*\\\\]\")) {\n+                    System.out.println(\"Found: \" + pidstring);\n+                    break;\n+                } else {\n+                    System.out.println(\"Ignoring: \" + pidstring);\n+                }\n@@ -91,2 +97,2 @@\n-            while ((pidstring = largeHeapScanner.findInLine(\"PID\\\\[[0-9].*\\\\]\")) == null) {\n-                Thread.sleep(500);\n+            if (pidstring == null) {\n+                throw new RuntimeException(\"Not able to find string matching PID.\");\n@@ -94,0 +100,1 @@\n+\n","filename":"test\/hotspot\/jtreg\/serviceability\/sa\/jmap-hprof\/JMapHProfLargeHeapTest.java","additions":14,"deletions":7,"binary":false,"changes":21,"status":"modified"}]}