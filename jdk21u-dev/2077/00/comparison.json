{"files":[{"patch":"@@ -36,0 +36,1 @@\n+import java.awt.image.BufferedImage;\n@@ -45,1 +46,1 @@\n- * @run main\/othervm -Dsun.java2d.uiScale=1 ShapeNotSetSometimes\n+ * @run main\/othervm\/timeout=300 -Dsun.java2d.uiScale=1 ShapeNotSetSometimes\n@@ -150,0 +151,2 @@\n+        Rectangle screenBounds = window.getGraphicsConfiguration().getBounds();\n+        BufferedImage screenCapture = robot.createScreenCapture(screenBounds);\n@@ -151,1 +154,2 @@\n-            colorCheck(innerPoint.x, innerPoint.y, SHAPE_COLOR, true);\n+            colorCheck(innerPoint.x, innerPoint.y, SHAPE_COLOR,\n+                    true, screenCapture);\n@@ -154,1 +158,2 @@\n-                colorCheck(point.x, point.y, BACKGROUND_COLOR, true);\n+                colorCheck(point.x, point.y, BACKGROUND_COLOR,\n+                        true, screenCapture);\n@@ -158,1 +163,2 @@\n-                colorCheck(point.x, point.y, SHAPE_COLOR, false);\n+                colorCheck(point.x, point.y, SHAPE_COLOR,\n+                        false, screenCapture);\n@@ -172,1 +178,2 @@\n-    private void colorCheck(int x, int y, Color expectedColor, boolean mustBeExpectedColor) {\n+    private void colorCheck(int x, int y, Color expectedColor,\n+                            boolean mustBeExpectedColor, BufferedImage screenCapture) {\n@@ -176,5 +183,1 @@\n-        robot.mouseMove(screenX, screenY);\n-        robot.waitForIdle();\n-        robot.delay(50);\n-\n-        Color actualColor = robot.getPixelColor(screenX, screenY);\n+        Color actualColor = new Color(screenCapture.getRGB(screenX, screenY));\n","filename":"test\/jdk\/java\/awt\/Frame\/ShapeNotSetSometimes\/ShapeNotSetSometimes.java","additions":13,"deletions":10,"binary":false,"changes":23,"status":"modified"}]}