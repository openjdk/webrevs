{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,1 +26,0 @@\n- * @key headful\n@@ -28,0 +27,1 @@\n+ * @requires (os.family != \"mac\")\n@@ -33,1 +33,0 @@\n-import java.awt.Robot;\n@@ -36,1 +35,0 @@\n-import javax.swing.JFrame;\n@@ -47,1 +45,0 @@\n-    private static JFrame frame;\n@@ -51,11 +48,6 @@\n-        try {\n-            Robot robot = new Robot();\n-            SwingUtilities.invokeAndWait(() -> createAndShowGUI());\n-\n-            robot.waitForIdle();\n-            robot.delay(1000);\n-\n-            SwingUtilities.invokeAndWait(() -> sbar.pressMouse());\n-            if (!mousePressLatch.await(2, TimeUnit.SECONDS)) {\n-                throw new RuntimeException(\"Timed out waiting for mouse press\");\n-            }\n+        String osName = System.getProperty(\"os.name\");\n+        if (osName.toLowerCase().contains(\"os x\")) {\n+            System.out.println(\"This test is not for MacOS, considered passed.\");\n+            return;\n+        }\n+        SwingUtilities.invokeAndWait(() -> setupTest());\n@@ -63,2 +55,4 @@\n-            robot.waitForIdle();\n-            robot.delay(200);\n+        SwingUtilities.invokeAndWait(() -> sbar.pressMouse());\n+        if (!mousePressLatch.await(2, TimeUnit.SECONDS)) {\n+            throw new RuntimeException(\"Timed out waiting for mouse press\");\n+        }\n@@ -66,5 +60,2 @@\n-            if (getValue() != 9) {\n-                throw new RuntimeException(\"The scrollbar block increment is incorrect\");\n-            }\n-        } finally {\n-            if (frame != null) SwingUtilities.invokeAndWait(() -> frame.dispose());\n+        if (getValue() != 9) {\n+            throw new RuntimeException(\"The scrollbar block increment is incorrect\");\n@@ -81,0 +72,1 @@\n+        System.out.println(\"value \" + result[0]);\n@@ -84,3 +76,1 @@\n-    private static void createAndShowGUI() {\n-        frame = new JFrame(\"bug4865918\");\n-        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n+    private static void setupTest() {\n@@ -97,5 +87,0 @@\n-        frame.getContentPane().add(sbar);\n-        frame.pack();\n-        frame.setLocationRelativeTo(null);\n-        frame.setVisible(true);\n-        frame.toFront();\n","filename":"test\/jdk\/javax\/swing\/JScrollBar\/4865918\/bug4865918.java","additions":16,"deletions":31,"binary":false,"changes":47,"status":"modified"}]}