{"files":[{"patch":"@@ -27,0 +27,1 @@\n+   @library .. \/test\/lib\n@@ -33,0 +34,1 @@\n+import jdk.test.lib.Platform;\n@@ -39,2 +41,1 @@\n-                 \"areallylongfilenamethatsforsur\";\n-    private static boolean isWindows = false;\n+            \"areallylongfilenamethatsforsur\";\n@@ -44,0 +45,4 @@\n+    private static final int FILE_EXISTS_SLEEP = 100;\n+\n+    private static final int MAX_PATH_COMPONENTS_WINDOWS = 20;\n+\n@@ -47,4 +52,0 @@\n-        String osName = System.getProperty(\"os.name\");\n-        if (osName.startsWith(\"Windows\")) {\n-            isWindows = true;\n-        }\n@@ -62,2 +63,4 @@\n-        \/\/ And these long pathes cannot be handled on Solaris and Mac platforms\n-        testLongPathOnWindows();\n+        \/\/ And these long paths cannot be handled on Linux and Mac platforms\n+        if (Platform.isWindows()) {\n+            testLongPath();\n+        }\n@@ -142,1 +145,1 @@\n-            if (isWindows &&\n+            if (Platform.isWindows() &&\n@@ -158,1 +161,1 @@\n-                    throw new RuntimeException (\"File.renameTo() failed for lenth=\"\n+                    throw new RuntimeException (\"File.renameTo() failed for length=\"\n@@ -185,1 +188,1 @@\n-                        Thread.sleep(100);\n+                        Thread.sleep(FILE_EXISTS_SLEEP);\n@@ -196,8 +199,6 @@\n-    private static void testLongPathOnWindows () throws Exception {\n-        if (isWindows) {\n-            String name = fileName;\n-            while (name.length() < MAX_LENGTH) {\n-                testLongPath (20, name, false);\n-                testLongPath (20, name, true);\n-                name = getNextName(name);\n-            }\n+    private static void testLongPath () throws Exception {\n+        String name = fileName;\n+        while (name.length() < MAX_LENGTH) {\n+            testLongPath(MAX_PATH_COMPONENTS_WINDOWS, name, false);\n+            testLongPath(MAX_PATH_COMPONENTS_WINDOWS, name, true);\n+            name = getNextName(name);\n@@ -206,1 +207,1 @@\n-}\n+}\n\\ No newline at end of file\n","filename":"test\/jdk\/java\/io\/File\/MaxPathLength.java","additions":21,"deletions":20,"binary":false,"changes":41,"status":"modified"}]}