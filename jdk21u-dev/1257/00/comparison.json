{"files":[{"patch":"@@ -1,37 +0,0 @@\n-<!--\n- Copyright (c) 2003, 2013, Oracle and\/or its affiliates. All rights reserved.\n- DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n-\n- This code is free software; you can redistribute it and\/or modify it\n- under the terms of the GNU General Public License version 2 only, as\n- published by the Free Software Foundation.\n-\n- This code is distributed in the hope that it will be useful, but WITHOUT\n- ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- version 2 for more details (a copy is included in the LICENSE file that\n- accompanied this code).\n-\n- You should have received a copy of the GNU General Public License version\n- 2 along with this work; if not, write to the Free Software Foundation,\n- Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n-\n- Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- or visit www.oracle.com if you need additional information or have any\n- questions.\n--->\n-\n-<html>\n-<body>\n-1. Press button \"Show Dialog\" at the frame \"Test\" and\n-   the dialog with button \"Show ColorChooser\" should appears.\n-2. Press button \"Show ColorChooser\" at the dialog \"Dialog\" and\n-   the colorchooser should appears.\n-3. Press the button \"Cancel\" of colorchooser.\n-   If the focus will come to the frame \"Test\" then test fails.\n-   If the focus will come to the dialog \"Dialog\" then test passes.\n-\n-<applet width=\"500\" height=\"400\" code=\"Test4759934.class\">\n-<\/applet>\n-<\/body>\n-<\/html>\n","filename":"test\/jdk\/javax\/swing\/JColorChooser\/Test4759934.html","additions":0,"deletions":37,"binary":false,"changes":37,"status":"deleted"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2008, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2008, 2024 Oracle and\/or its affiliates. All rights reserved.\n@@ -24,8 +24,0 @@\n-\/*\n- * @test\n- * @bug 4759934\n- * @summary Tests windows activation problem\n- * @author Andrey Pikalev\n- * @run applet\/manual=yesno Test4759934.html\n- *\/\n-\n@@ -37,1 +29,0 @@\n-import javax.swing.JApplet;\n@@ -43,1 +34,9 @@\n-public class Test4759934 extends JApplet implements ActionListener {\n+\/*\n+ * @test\n+ * @bug 4759934\n+ * @library \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame\n+ * @summary Tests windows activation problem\n+ * @run main\/manual Test4759934\n+ *\/\n+public class Test4759934 {\n@@ -47,1 +46,1 @@\n-    private final JFrame frame = new JFrame(\"Test\"); \/\/ NON-NLS: frame title\n+    private static JFrame frame;\n@@ -49,3 +48,14 @@\n-    public void init() {\n-        show(this.frame, CMD_DIALOG);\n-    }\n+    private static ActionListener al = new ActionListener() {\n+        @Override\n+        public void actionPerformed(ActionEvent event) {\n+            String command = event.getActionCommand();\n+            if (CMD_DIALOG.equals(command)) {\n+                JDialog dialog = new JDialog(frame, \"Dialog\"); \/\/ NON-NLS: dialog title\n+                dialog.setLocation(200, 0);\n+                show(dialog, CMD_CHOOSER, true);\n+            }\n+            else if (CMD_CHOOSER.equals(command)) {\n+                Object source = event.getSource();\n+                Component component = (source instanceof Component)\n+                        ? (Component) source\n+                        : null;\n@@ -53,6 +63,2 @@\n-    public void actionPerformed(ActionEvent event) {\n-        String command = event.getActionCommand();\n-        if (CMD_DIALOG.equals(command)) {\n-            JDialog dialog = new JDialog(this.frame, \"Dialog\"); \/\/ NON-NLS: dialog title\n-            dialog.setLocation(200, 0);\n-            show(dialog, CMD_CHOOSER);\n+                JColorChooser.showDialog(component, \"ColorChooser\", Color.BLUE); \/\/ NON-NLS: title\n+            }\n@@ -60,5 +66,1 @@\n-        else if (CMD_CHOOSER.equals(command)) {\n-            Object source = event.getSource();\n-            Component component = (source instanceof Component)\n-                    ? (Component) source\n-                    : null;\n+    };\n@@ -66,2 +68,18 @@\n-            JColorChooser.showDialog(component, \"ColorChooser\", Color.BLUE); \/\/ NON-NLS: title\n-        }\n+    public static void main(String[] args) throws Exception {\n+        String instructions = \"1. Press button \\\"Show Dialog\\\" at the frame \\\"Test\\\" and\\n\" +\n+                \"   the dialog with button \\\"Show ColorChooser\\\" should appears.\\n\" +\n+                \"2. Press button \\\"Show ColorChooser\\\" at the dialog \\\"Dialog\\\" and\\n\" +\n+                \"   the colorchooser should appears.\\n\" +\n+                \"3. Press the button \\\"Cancel\\\" of colorchooser.\\n\" +\n+                \"   If the focus will come to the frame \\\"Test\\\" then test fails.\\n\" +\n+                \"   If the focus will come to the dialog \\\"Dialog\\\" then test passes.\";\n+\n+        PassFailJFrame.builder()\n+                .title(\"Test4759934\")\n+                .instructions(instructions)\n+                .rows(5)\n+                .columns(40)\n+                .testTimeOut(10)\n+                .testUI(Test4759934::test)\n+                .build()\n+                .awaitAndCheck();\n@@ -70,1 +88,7 @@\n-    private void show(Window window, String command) {\n+    public static JFrame test() {\n+        frame = new JFrame(\"ColorChooser dialog on button press test\");\n+        show(frame, CMD_DIALOG, false);\n+        return frame;\n+    }\n+\n+    private static void show(Window window, String command, boolean setVisible) {\n@@ -73,1 +97,2 @@\n-        button.addActionListener(this);\n+        button.addActionListener(al);\n+\n@@ -78,1 +103,3 @@\n-        window.setVisible(true);\n+        if (setVisible) {\n+            window.setVisible(true);\n+        }\n","filename":"test\/jdk\/javax\/swing\/JColorChooser\/Test4759934.java","additions":58,"deletions":31,"binary":false,"changes":89,"status":"modified"}]}