{"files":[{"patch":"@@ -1769,1 +1769,0 @@\n-                    int soTimeout = getSoTimeout();\n@@ -1771,7 +1770,15 @@\n-                        \/\/ deplete could hang on the skip operation\n-                        \/\/ in case of infinite socket read timeout.\n-                        \/\/ Change read timeout to avoid deadlock.\n-                        \/\/ This workaround could be replaced later\n-                        \/\/ with the right synchronization\n-                        if (soTimeout == 0) {\n-                            setSoTimeout(DEFAULT_SKIP_TIMEOUT);\n+                        int soTimeout = getSoTimeout();\n+                        try {\n+                            \/\/ deplete could hang on the skip operation\n+                            \/\/ in case of infinite socket read timeout.\n+                            \/\/ Change read timeout to avoid deadlock.\n+                            \/\/ This workaround could be replaced later\n+                            \/\/ with the right synchronization\n+                            if (soTimeout == 0)\n+                                setSoTimeout(DEFAULT_SKIP_TIMEOUT);\n+                            ((SSLSocketInputRecord) (conContext.inputRecord)).deplete(false);\n+                        } catch (java.net.SocketTimeoutException stEx) {\n+                            \/\/ skip timeout exception during deplete\n+                        } finally {\n+                            if (soTimeout == 0)\n+                                setSoTimeout(soTimeout);\n@@ -1779,3 +1786,0 @@\n-                        ((SSLSocketInputRecord) (conContext.inputRecord)).deplete(false);\n-                    } catch (java.net.SocketTimeoutException stEx) {\n-                        \/\/ skip timeout exception during deplete\n@@ -1783,3 +1787,0 @@\n-                        if (soTimeout == 0) {\n-                            setSoTimeout(soTimeout);\n-                        }\n","filename":"src\/java.base\/share\/classes\/sun\/security\/ssl\/SSLSocketImpl.java","additions":15,"deletions":14,"binary":false,"changes":29,"status":"modified"}]}