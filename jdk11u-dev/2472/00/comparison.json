{"files":[{"patch":"@@ -26,1 +26,0 @@\n-import nsk.share.Wicket;\n@@ -45,2 +44,2 @@\n-    public static Wicket startingBarrier;\n-    public static Wicket waitingBarrier;\n+    public static volatile boolean startingBarrier = true;\n+    public static volatile boolean waitingBarrier = true;\n@@ -58,0 +57,8 @@\n+    public static void doSleep() {\n+        try {\n+            Thread.sleep(10);\n+        } catch (Exception e) {\n+            throw new Error(\"Unexpected \" + e);\n+        }\n+    }\n+\n@@ -78,2 +85,0 @@\n-        startingBarrier = new Wicket();\n-        waitingBarrier = new Wicket();\n@@ -84,1 +89,3 @@\n-        startingBarrier.waitFor();\n+        while (startingBarrier) {\n+            doSleep();\n+        }\n@@ -96,1 +103,3 @@\n-        waitingBarrier.waitFor();\n+        while (waitingBarrier) {\n+            doSleep();\n+        }\n@@ -141,1 +150,1 @@\n-        contmon001.startingBarrier.unlock();\n+        contmon001.startingBarrier = false;\n@@ -161,1 +170,1 @@\n-            contmon001.waitingBarrier.unlock();\n+            contmon001.waitingBarrier = false;\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/GetCurrentContendedMonitor\/contmon001.java","additions":18,"deletions":9,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -26,1 +26,0 @@\n-import nsk.share.Wicket;\n@@ -45,1 +44,1 @@\n-    public static Wicket startingBarrier;\n+    public static boolean startingBarrier = true;\n@@ -53,0 +52,8 @@\n+    public static void doSleep() {\n+        try {\n+            Thread.sleep(10);\n+        } catch (Exception e) {\n+            throw new Error(\"Unexpected \" + e);\n+        }\n+    }\n+\n@@ -57,1 +64,0 @@\n-        startingBarrier = new Wicket();\n@@ -59,1 +65,3 @@\n-        startingBarrier.waitFor();\n+        while (startingBarrier) {\n+            doSleep();\n+        }\n@@ -76,1 +84,1 @@\n-        contmon002.startingBarrier.unlock();\n+        contmon002.startingBarrier = false;\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/GetCurrentContendedMonitor\/contmon002.java","additions":13,"deletions":5,"binary":false,"changes":18,"status":"modified"}]}