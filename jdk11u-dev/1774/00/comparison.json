{"files":[{"patch":"@@ -233,1 +233,2 @@\n-\t$(TOOL_SPP) < $$($1_SRC) > $$($1_OUT).tmp \\\n+\t$(RM) $$($1_OUT).tmp\n+\t$(TOOL_SPP) -i$$($1_SRC) -o$$($1_OUT).tmp \\\n@@ -263,6 +264,6 @@\n-\t  $$($1_char_CMD) < $$($1_SRC_BIN) >> $$($1_DST).tmp\n-\t  $$($1_short_CMD) < $$($1_SRC_BIN) >> $$($1_DST).tmp\n-\t  $$($1_int_CMD) < $$($1_SRC_BIN) >> $$($1_DST).tmp\n-\t  $$($1_long_CMD) < $$($1_SRC_BIN) >> $$($1_DST).tmp\n-\t  $$($1_float_CMD) < $$($1_SRC_BIN) >> $$($1_DST).tmp\n-\t  $$($1_double_CMD) < $$($1_SRC_BIN) >> $$($1_DST).tmp\n+\t  $$($1_char_CMD) -i$$($1_SRC_BIN) -o$$($1_DST).tmp\n+\t  $$($1_short_CMD) -i$$($1_SRC_BIN) -o$$($1_DST).tmp\n+\t  $$($1_int_CMD) -i$$($1_SRC_BIN) -o$$($1_DST).tmp\n+\t  $$($1_long_CMD) -i$$($1_SRC_BIN) -o$$($1_DST).tmp\n+\t  $$($1_float_CMD) -i$$($1_SRC_BIN) -o$$($1_DST).tmp\n+\t  $$($1_double_CMD) -i$$($1_SRC_BIN) -o$$($1_DST).tmp\n","filename":"make\/gensrc\/GensrcBuffer.gmk","additions":8,"deletions":7,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -40,1 +40,1 @@\n-\t\t$(TOOL_SPP) < $< >$@.tmp \\\n+\t\t$(TOOL_SPP) -i$< -o$@.tmp \\\n@@ -74,1 +74,1 @@\n-\t-$(RM) $@.tmp\n+\t$(RM) $@.tmp\n@@ -76,1 +76,1 @@\n-\t\t$(TOOL_SPP) < $< >$@.tmp \\\n+\t\t$(TOOL_SPP) -i$< -o$@.tmp \\\n","filename":"make\/gensrc\/GensrcCharsetCoder.gmk","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -62,0 +62,1 @@\n+\t$(RM) $$@\n@@ -63,1 +64,1 @@\n-\t    $$($1_ARGS) < $$< > $$@\n+\t    $$($1_ARGS) -i$$< -o$$@\n@@ -150,0 +151,1 @@\n+\t$(RM) $$@\n@@ -153,1 +155,1 @@\n-\t    $$($1_ARGS) < $$< > $$@\n+\t    $$($1_ARGS) -i$$< -o$$@\n","filename":"make\/gensrc\/GensrcVarHandles.gmk","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2015, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2019, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,0 +28,2 @@\n+import java.io.FileInputStream;\n+import java.io.FileOutputStream;\n@@ -35,1 +37,2 @@\n- * Usage: java build.tools.spp.Spp [-be] [-nel] [-Kkey] -Dvar=value ... <in >out\n+ * Usage:\n+ * java build.tools.spp.Spp [-be] [-nel] [-Kkey] -Dvar=value ... -iin -oout\n@@ -72,0 +75,2 @@\n+        String inputFile = null;\n+        String outputFile = null;\n@@ -79,0 +84,4 @@\n+            } else if (arg.startsWith(\"-i\")) {\n+                inputFile = arg.substring(2);\n+            } else if (arg.startsWith(\"-o\")) {\n+                outputFile = arg.substring(2);\n@@ -90,1 +99,1 @@\n-        new Spp().spp(new Scanner(System.in),\n+        new Spp().spp(new Scanner(new FileInputStream(inputFile)),\n@@ -94,1 +103,1 @@\n-        System.out.print(out.toString());\n+        new FileOutputStream(outputFile, true).write(out.toString().getBytes());\n@@ -100,1 +109,1 @@\n-    static final String TEXT = \"([a-zA-Z0-9&;,.<>\/#() \\\\?\\\\[\\\\]\\\\$]+)\"; \/\/ $ -- hack embedded $var$\n+    static final String TEXT = \"([\\\\p{Print}&&[^{#:}]]+)\";\n@@ -134,0 +143,4 @@\n+            if (repl == null) {\n+                System.err.println(\"Error: undefined variable in line \" + ln);\n+                System.exit(-1);\n+            }\n","filename":"make\/jdk\/src\/classes\/build\/tools\/spp\/Spp.java","additions":18,"deletions":5,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -127,1 +127,1 @@\n-          $args < X-UnsafeAccessTest.java.template > ${Qualifier}UnsafeAccessTest${Type}.java\n+          $args -iX-UnsafeAccessTest.java.template -o${Qualifier}UnsafeAccessTest${Type}.java\n","filename":"test\/hotspot\/jtreg\/compiler\/unsafe\/generate-unsafe-access-tests.sh","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -85,3 +85,3 @@\n-  java $SPP -nel $args < X-VarHandleTestAccess.java.template > VarHandleTestAccess${Type}.java\n-  java $SPP -nel $args < X-VarHandleTestMethodHandleAccess.java.template > VarHandleTestMethodHandleAccess${Type}.java\n-  java $SPP -nel $args < X-VarHandleTestMethodType.java.template > VarHandleTestMethodType${Type}.java\n+  java $SPP -nel $args -iX-VarHandleTestAccess.java.template -oVarHandleTestAccess${Type}.java\n+  java $SPP -nel $args -iX-VarHandleTestMethodHandleAccess.java.template -oVarHandleTestMethodHandleAccess${Type}.java\n+  java $SPP -nel $args -iX-VarHandleTestMethodType.java.template -oVarHandleTestMethodType${Type}.java\n@@ -164,1 +164,1 @@\n-  java $SPP -nel $args < X-VarHandleTestByteArrayView.java.template > VarHandleTestByteArrayAs${Type}.java\n+  java $SPP -nel $args -iX-VarHandleTestByteArrayView.java.template -oVarHandleTestByteArrayAs${Type}.java\n","filename":"test\/jdk\/java\/lang\/invoke\/VarHandles\/generate-vh-tests.sh","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -29,1 +29,1 @@\n-    java build.tools.spp.Spp -K$1 -Dtype=$1 -DType=$2 -DFulltype=$3 <Basic-X.java.template >Basic$2.java\n+    java build.tools.spp.Spp -K$1 -Dtype=$1 -DType=$2 -DFulltype=$3 -iBasic-X.java.template -oBasic$2.java\n","filename":"test\/jdk\/java\/nio\/Buffer\/genBasic.sh","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -29,1 +29,1 @@\n-    java  build.tools.spp.Spp -K$1 -Dtype=$1 -DType=$2 -DFulltype=$3<CopyDirect-X-Memory.java.template >CopyDirect$2Memory.java\n+    java  build.tools.spp.Spp -K$1 -Dtype=$1 -DType=$2 -DFulltype=$3 -iCopyDirect-X-Memory.java.template -oCopyDirect$2Memory.java\n","filename":"test\/jdk\/java\/nio\/Buffer\/genCopyDirectMemory.sh","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -29,1 +29,1 @@\n-    java  build.tools.spp.Spp -K$1 -Dtype=$1 -DType=$2 -DFulltype=$3<Order-X.java.template >Order$2.java\n+    java  build.tools.spp.Spp -K$1 -Dtype=$1 -DType=$2 -DFulltype=$3 -iOrder-X.java.template -oOrder$2.java\n","filename":"test\/jdk\/java\/nio\/Buffer\/genOrder.sh","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -30,2 +30,2 @@\n-#  then $SPP -K$1 -Dtype=$1 -DType=$2 -Kprim<Basic-X.java.template >Basic$2.java\n-#  else $SPP -K$1 -Dtype=$1 -DType=$2 -K$3 <Basic-X.java.template >Basic$2.java\n+#  then $SPP -K$1 -Dtype=$1 -DType=$2 -Kprim -iBasic-X.java.template -oBasic$2.java\n+#  else $SPP -K$1 -Dtype=$1 -DType=$2 -K$3 -iBasic-X.java.template -oBasic$2.java\n@@ -33,1 +33,1 @@\n-    java build.tools.spp.Spp -K$1 -Dtype=$1 -DType=$2 -K$3 -K$4 -K$5 -K$6 <Basic-X.java.template >Basic$2.java\n+    java build.tools.spp.Spp -K$1 -Dtype=$1 -DType=$2 -K$3 -K$4 -K$5 -K$6 -iBasic-X.java.template -oBasic$2.java\n","filename":"test\/jdk\/java\/util\/Formatter\/genBasic.sh","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"}]}