{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,15 +37,1 @@\n- * This test tests the actual swap size on linux and solaris.\n- * The correct value should be checked manually:\n- * Solaris:\n- *   1. In a shell, enter the command: \"swap -l\"\n- *   2. The value (reported in blocks) is in the \"blocks\" column.\n- * Linux:\n- *   1. In a shell, enter the command: \"cat \/proc\/meminfo\"\n- *   2. The value (reported in bytes) is in \"Swap\" entry, \"total\" column.\n- * Windows NT\/XP\/2000:\n- *   1. Run Start->Accessories->System Tools->System Information.\n- *   2. The value (reported in Kbytes) is in the \"Page File Space\" entry\n- * Windows 98\/ME:\n- *   Unknown.\n- *\n- * Usage: GetTotalSwapSpaceSize <expected swap size | \"sanity-only\"> [trace]\n+ * This test tests the actual swap size on Linux and MacOS only.\n@@ -74,0 +60,1 @@\n+\n@@ -77,2 +64,0 @@\n-        long expected_swap_size = getSwapSizeFromOs();\n-\n@@ -84,0 +69,1 @@\n+        long expected_swap_size = getSwapSizeFromOs();\n@@ -86,1 +72,13 @@\n-        System.out.println(\"Total swap space size in bytes: \" + size);\n+        System.out.println(\"Total swap space size from OS in bytes: \" + expected_swap_size);\n+        System.out.println(\"Total swap space size in MBean bytes: \" + size);\n+\n+        \/\/ if swap data from OS chnaged re-read OS and MBean data\n+        while (expected_swap_size != getSwapSizeFromOs()) {\n+            System.out.println(\"Total swap space reported by OS changed form \" + expected_swap_size\n+                               + \" current value = \" + getSwapSizeFromOs());\n+            expected_swap_size = getSwapSizeFromOs();\n+            size = mbean.getTotalSwapSpaceSize();\n+\n+            System.out.println(\"Re-read total swap space size from OS in bytes: \" + expected_swap_size);\n+            System.out.println(\"Total swap space size in MBean bytes: \" + size);\n+        }\n","filename":"test\/jdk\/com\/sun\/management\/OperatingSystemMXBean\/TestTotalSwap.java","additions":17,"deletions":19,"binary":false,"changes":36,"status":"modified"}]}