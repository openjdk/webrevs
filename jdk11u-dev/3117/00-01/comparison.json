{"files":[{"patch":"@@ -30,1 +30,1 @@\n- *      8067796 8224905 8263729 8265173 8282219 8368192\n+ *      8067796 8224905 8263729 8265173 8282219\n@@ -762,5 +762,7 @@\n-    \/\/ Return the string with the matching regex removed\n-    private static String matchAndRemove(String str, String regex) {\n-        return Pattern.compile(regex)\n-                .matcher(str)\n-                .replaceAll(\"\");\n+    private static String matchAndExtract(String str, String regex) {\n+        Matcher matcher = Pattern.compile(regex).matcher(str);\n+        if (matcher.find()) {\n+            return matcher.group();\n+        } else {\n+            return \"\";\n+        }\n@@ -770,3 +772,4 @@\n-     * Mac OS X (may) add the variables: __CF_USER_TEXT_ENCODING, JAVA_MAIN_CLASS_<pid>,\n-     * and TMPDIR.\n-     * Remove them from the list of env variables\n+     * Mac OS X (may) add the variable __CF_USER_TEXT_ENCODING to an empty\n+     * environment. The environment variable JAVA_MAIN_CLASS_<pid> may also\n+     * be set in Mac OS X.\n+     * Remove them both from the list of env variables\n@@ -776,2 +779,2 @@\n-        String cleanedVars = matchAndRemove(vars,\n-                \"__CF_USER_TEXT_ENCODING=\" + cfUserTextEncoding + \",\");\n+        String cleanedVars = vars.replace(\"__CF_USER_TEXT_ENCODING=\"\n+                                            +cfUserTextEncoding+\",\",\"\");\n@@ -779,6 +782,4 @@\n-        cleanedVars = matchAndRemove(cleanedVars,\n-                \"JAVA_MAIN_CLASS_\\\\d+=Basic.JavaChild,\");\n-        \/\/ Check and remove TMPDIR\n-        cleanedVars = matchAndRemove(cleanedVars,\n-                \"TMPDIR=[^,]*,\");\n-        return cleanedVars;\n+        String javaMainClassStr\n+                = matchAndExtract(cleanedVars,\n+                                    \"JAVA_MAIN_CLASS_\\\\d+=Basic.JavaChild,\");\n+        return cleanedVars.replace(javaMainClassStr,\"\");\n","filename":"test\/jdk\/java\/lang\/ProcessBuilder\/Basic.java","additions":18,"deletions":17,"binary":false,"changes":35,"status":"modified"}]}