{"files":[{"patch":"@@ -603,1 +603,1 @@\n-    # gcc -Wl,-version output typically looks like\n+    # gcc -Wl,-version output typically looks like:\n@@ -607,1 +607,3 @@\n-    LINKER_VERSION_STRING=`$LINKER -Wl,--version 2>&1 | $HEAD -n 1`\n+    # If using gold it will look like:\n+    #   GNU gold (GNU Binutils 2.30) 1.15\n+    LINKER_VERSION_STRING=`$LINKER -Wl,--version 2> \/dev\/null | $HEAD -n 1`\n@@ -609,2 +611,7 @@\n-    [ LINKER_VERSION_NUMBER=`$ECHO $LINKER_VERSION_STRING | \\\n-        $SED -e 's\/.* \\([0-9][0-9]*\\(\\.[0-9][0-9]*\\)*\\).*\/\\1\/'` ]\n+    if [ [[ \"$LINKER_VERSION_STRING\" == *gold* ]] ]; then\n+      [ LINKER_VERSION_NUMBER=`$ECHO $LINKER_VERSION_STRING | \\\n+          $SED -e 's\/.* \\([0-9][0-9]*\\(\\.[0-9][0-9]*\\)*\\).*) .*\/\\1\/'` ]\n+    else\n+      [ LINKER_VERSION_NUMBER=`$ECHO $LINKER_VERSION_STRING | \\\n+          $SED -e 's\/.* \\([0-9][0-9]*\\(\\.[0-9][0-9]*\\)*\\).*\/\\1\/'` ]\n+    fi\n","filename":"make\/autoconf\/toolchain.m4","additions":11,"deletions":4,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -865,1 +865,1 @@\n-        linux_x64: \"gcc7.3.0-OEL6.4+1.1\",\n+        linux_x64: \"gcc8.2.0-OL6.4+1.0\",\n@@ -872,1 +872,1 @@\n-                    : \"gcc7.3.0-Fedora27+1.1\"),\n+                    : \"gcc8.2.0-Fedora27+1.0\"),\n@@ -876,1 +876,1 @@\n-                       ? \"gcc7.3.0-Fedora27+1.1\"\n+                       ? \"gcc8.2.0-Fedora27+1.0\"\n@@ -896,0 +896,5 @@\n+    var devkit_cross_prefix = \"\";\n+    if (input.target_platform != input.build_platform) {\n+        devkit_cross_prefix = input.build_platform + \"-to-\";\n+    }\n+\n@@ -919,1 +924,1 @@\n-            module: \"devkit-\" + devkit_platform,\n+            module: \"devkit-\" + devkit_cross_prefix + devkit_platform,\n","filename":"make\/conf\/jib-profiles.js","additions":9,"deletions":4,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -32,4 +32,0 @@\n-# In addition to the makefiles, access to Oracle Linux installation\n-# media is required. This has been tested against Oracle Enterprise Linux\n-# 6.4.\n-#\n@@ -39,1 +35,1 @@\n-# make tars BASE_OS=OEL6\n+# make tars BASE_OS=OL\n@@ -51,0 +47,8 @@\n+# You may want the native toolchain to be used when compiling the cross\n+# compilation toolchains. To achieve this, first build the native toolchain,\n+# then add the bin directory from this build to the path when invoking this\n+# makefile again for cross compilation. Ex:\n+#\n+# PATH=$PWD\/..\/..\/build\/devkit\/result\/x86_64-linux-gnu-to-x86_64-linux-gnu\/bin:$PATH \\\n+#    make TARGETS=\"arm-linux-gnueabihf,ppc64-linux-gnu\" BASE_OS=Fedora\n+#\n@@ -54,0 +58,2 @@\n+COMMA := ,\n+\n@@ -69,1 +75,1 @@\n-  platforms := $(TARGETS)\n+  platforms := $(subst $(COMMA), , $(TARGETS))\n@@ -96,1 +102,1 @@\n-              TARGET=$@ PREFIX=$(RESULT)\/$@-to-$$p BUILDDIR=$(OUTPUT_ROOT)\/$@\/$$p || exit 1 ; \\\n+              TARGET=$@ PREFIX=$(RESULT)\/$@-to-$$p || exit 1 ; \\\n@@ -106,1 +112,0 @@\n-  $$($(1)-to-$(2)_tar) : $$(shell find $$(RESULT)\/$(1)-to-$(2) -type f)\n@@ -114,3 +119,1 @@\n-\t@echo 'Creating compiler package $@'\n-\tcd $(RESULT) && tar -czf $@ $(PLATFORM)\/*\n-\ttouch $@\n+\t$(MAKE) -r -f Tars.gmk SRC_DIR=$(RESULT)\/$(PLATFORM) TAR_FILE=$@\n","filename":"make\/devkit\/Makefile","additions":14,"deletions":11,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -0,0 +1,49 @@\n+#\n+# Copyright (c) 2013, 2019, Oracle and\/or its affiliates. All rights reserved.\n+# DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+#\n+# This code is free software; you can redistribute it and\/or modify it\n+# under the terms of the GNU General Public License version 2 only, as\n+# published by the Free Software Foundation.  Oracle designates this\n+# particular file as subject to the \"Classpath\" exception as provided\n+# by Oracle in the LICENSE file that accompanied this code.\n+#\n+# This code is distributed in the hope that it will be useful, but WITHOUT\n+# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+# FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+# version 2 for more details (a copy is included in the LICENSE file that\n+# accompanied this code).\n+#\n+# You should have received a copy of the GNU General Public License version\n+# 2 along with this work; if not, write to the Free Software Foundation,\n+# Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+#\n+# Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+# or visit www.oracle.com if you need additional information or have any\n+# questions.\n+#\n+\n+# This makefile creates the tar files. It needs to be called with make -r\n+# which is why it's separated out into its own file.\n+\n+# Input parameters\n+# SRC_DIR\n+# TAR_FILE\n+\n+ifeq ($(SRC_DIR), )\n+  $(error SRC_DIR not set)\n+endif\n+ifeq ($(TAR_FILE), )\n+  $(error TAR_FILE not set)\n+endif\n+\n+default: tars\n+\n+tars : $(TAR_FILE)\n+\n+$(TAR_FILE): $(shell find $(SRC_DIR) -type f)\n+\t@echo 'Creating compiler package $@'\n+\tcd $(dir $(SRC_DIR)) && tar -czf $@ $(notdir $(SRC_DIR))\/*\n+\ttouch $@\n+\n+.PHONY: default tars\n","filename":"make\/devkit\/Tars.gmk","additions":49,"deletions":0,"binary":false,"changes":49,"status":"added"},{"patch":"@@ -54,1 +54,1 @@\n-ifeq ($(BASE_OS), OEL6)\n+ifeq ($(BASE_OS), OL)\n@@ -56,1 +56,1 @@\n-  LINUX_VERSION := OEL6.4\n+  LINUX_VERSION := OL6.4\n@@ -82,2 +82,11 @@\n-GCC_VER := 7.3.0\n-ifeq ($(GCC_VER), 7.3.0)\n+GCC_VER := 8.2.0\n+ifeq ($(GCC_VER), 8.2.0)\n+  gcc_ver := gcc-8.2.0\n+  binutils_ver := binutils-2.30\n+  ccache_ver := ccache-3.5.1a\n+  CCACHE_DIRNAME := ccache-3.5.1\n+  mpfr_ver := mpfr-3.1.5\n+  gmp_ver := gmp-6.1.2\n+  mpc_ver := mpc-1.0.3\n+  gdb_ver := gdb-8.2.1\n+else ifeq ($(GCC_VER), 7.3.0)\n@@ -177,1 +186,3 @@\n-  $(1)_DIR = $(abspath $(SRCDIR)\/$(basename $(basename $(notdir $($(1))))))\n+  # Allow override\n+  $(1)_DIRNAME ?= $(basename $(basename $(notdir $($(1)))))\n+  $(1)_DIR = $(abspath $(SRCDIR)\/$$($(1)_DIRNAME))\n@@ -184,1 +195,1 @@\n-\t$$(foreach p,$$(abspath $$(wildcard $$(notdir $$($(1)_DIR)).patch)), \\\n+\t$$(foreach p,$$(abspath $$(wildcard patches\/$$(notdir $$($(1)_DIR)).patch)), \\\n","filename":"make\/devkit\/Tools.gmk","additions":17,"deletions":6,"binary":false,"changes":23,"status":"modified"}]}