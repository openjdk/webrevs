{"files":[{"patch":"@@ -47,0 +47,2 @@\n+ * Second parameter is a hint about the type of a file. JNI_TRUE is for\n+ * shared libraries and JNI_FALSE is for executables.\n@@ -51,1 +53,1 @@\n-TruncatePath(char *buf)\n+TruncatePath(char *buf, jboolean pathisdll)\n@@ -53,2 +55,8 @@\n-    \/\/ try bin directory, maybe an executable\n-    char *p = findLastPathComponent(buf, \"\/bin\/\");\n+    \/*\n+     * If the file is a library, try lib directory first and then bin\n+     * directory.\n+     * If the file is an executable, try bin directory first and then lib\n+     * directory.\n+     *\/\n+\n+    char *p = findLastPathComponent(buf, pathisdll ? \"\/lib\/\" : \"\/bin\/\");\n@@ -59,2 +67,1 @@\n-    \/\/ try lib directory, maybe a library\n-    p = findLastPathComponent(buf, \"\/lib\/\");\n+    p = findLastPathComponent(buf, pathisdll ? \"\/bin\/\" : \"\/lib\/\");\n@@ -82,1 +89,1 @@\n-    return TruncatePath(buf);\n+    return TruncatePath(buf, JNI_FALSE);\n@@ -97,1 +104,1 @@\n-            return TruncatePath(buf);\n+            return TruncatePath(buf, JNI_TRUE);\n","filename":"src\/java.base\/unix\/native\/libjli\/java_md_common.c","additions":14,"deletions":7,"binary":false,"changes":21,"status":"modified"}]}