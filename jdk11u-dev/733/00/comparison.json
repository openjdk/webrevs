{"files":[{"patch":"@@ -3228,0 +3228,15 @@\n+\/\/ Check numa dependent syscalls\n+static bool numa_syscall_check() {\n+  \/\/ NUMA APIs depend on several syscalls. E.g., get_mempolicy is required for numa_get_membind and\n+  \/\/ numa_get_interleave_mask. But these dependent syscalls can be unsupported for various reasons.\n+  \/\/ Especially in dockers, get_mempolicy is not allowed with the default configuration. So it's necessary\n+  \/\/ to check whether the syscalls are available. Currently, only get_mempolicy is checked since checking\n+  \/\/ others like mbind would cause unexpected side effects.\n+  int dummy = 0;\n+  if (syscall(SYS_get_mempolicy, &dummy, NULL, 0, (void*)&dummy, 3) == -1) {\n+    return false;\n+  }\n+\n+  return true;\n+}\n+\n@@ -3229,1 +3244,2 @@\n-  if (sched_getcpu() != -1) { \/\/ Requires sched_getcpu() support\n+  \/\/ Requires sched_getcpu() and numa dependent syscalls support\n+  if ((sched_getcpu() != -1) && numa_syscall_check()) {\n","filename":"src\/hotspot\/os\/linux\/os_linux.cpp","additions":17,"deletions":1,"binary":false,"changes":18,"status":"modified"}]}