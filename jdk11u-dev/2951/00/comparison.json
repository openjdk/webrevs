{"files":[{"patch":"@@ -1049,0 +1049,1 @@\n+  CodeString*  _prev;\n@@ -1052,1 +1053,1 @@\n-    assert(_next == NULL, \"wrong interface for freeing list\");\n+    assert(_next == NULL && _prev == NULL, \"wrong interface for freeing list\");\n@@ -1060,1 +1061,1 @@\n-    : _next(NULL), _offset(offset) {\n+    : _next(NULL), _prev(NULL), _offset(offset) {\n@@ -1068,1 +1069,6 @@\n-  void set_next(CodeString* next) { _next = next; }\n+  void set_next(CodeString* next) {\n+    _next = next;\n+    if (next != NULL) {\n+      next->_prev = this;\n+    }\n+  }\n@@ -1096,6 +1102,3 @@\n-  CodeString* a = find(offset);\n-  if (a != NULL) {\n-    CodeString* c = NULL;\n-    while (((c = a->next_comment()) != NULL) && (c->offset() == offset)) {\n-      a = c;\n-    }\n+  CodeString* a = _strings_last;\n+  while (a != NULL && !a->is_comment() && a->offset() > offset) {\n+    a = a->_prev;\n@@ -1120,0 +1123,3 @@\n+  if (c->next() == NULL) {\n+    _strings_last = c;\n+  }\n@@ -1126,0 +1132,1 @@\n+  _strings_last = other._strings_last;\n@@ -1141,0 +1148,1 @@\n+  CodeString* prev = NULL;\n@@ -1143,0 +1151,2 @@\n+    (*ps)->_prev = prev;\n+    prev = *ps;\n@@ -1171,0 +1181,4 @@\n+    if (p != NULL) {\n+      assert(p->_prev == n, \"missing prev link\");\n+      p->_prev = NULL;\n+    }\n@@ -1181,0 +1195,3 @@\n+  if (_strings == NULL) {\n+    _strings_last = s;\n+  }\n","filename":"src\/hotspot\/share\/asm\/codeBuffer.cpp","additions":26,"deletions":9,"binary":false,"changes":35,"status":"modified"},{"patch":"@@ -252,0 +252,1 @@\n+  CodeString* _strings_last;\n@@ -265,0 +266,1 @@\n+    _strings_last = NULL;\n@@ -275,0 +277,1 @@\n+    _strings_last = NULL;\n","filename":"src\/hotspot\/share\/asm\/codeBuffer.hpp","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"}]}