{"files":[{"patch":"@@ -279,1 +279,1 @@\n-    private void testReproducibibleHash() throws Exception {\n+    public void testReproducibibleHash() throws Exception {\n@@ -300,0 +300,42 @@\n+    @Test\n+    public void testHashModulesPattern() throws IOException {\n+        \/\/ create modules for test cases\n+        makeModule(\"m1\");\n+        makeModule(\"m2\", \"m1\");\n+        makeModule(\"m3\");\n+        makeModule(\"m4\", \"m1\", \"m3\");\n+        List.of(\"m1\", \"m2\", \"m3\", \"m4\").forEach(this::makeJmod);\n+\n+        \/\/ compute hash for the target jmod (m1.jmod) with different regex\n+        \/\/ 1) --hash-module \"m2\"\n+        Path jmod = lib.resolve(\"m1.jmod\");\n+        runJmod(\"hash\",\n+                \"--module-path\", lib.toString(),\n+                \"--hash-modules\", \"m2\", jmod.toString());\n+        assertEquals(moduleHashes().keySet(), Set.of(\"m1\"));\n+        checkHashes(\"m1\", Set.of(\"m2\"));\n+\n+        \/\/ 2) --hash-module \"m2|m4\"\n+        runJmod(\"hash\",\n+                \"--module-path\", lib.toString(),\n+                \"--hash-modules\", \"m2|m4\", jmod.toString());\n+        assertEquals(moduleHashes().keySet(), Set.of(\"m1\"));\n+        checkHashes(\"m1\", Set.of(\"m2\", \"m4\"));\n+\n+        \/\/ 3) --hash-module \".*\"\n+        runJmod(\"hash\",\n+                \"--module-path\", lib.toString(),\n+                \"--hash-modules\", \".*\", jmod.toString());\n+        assertEquals(moduleHashes().keySet(), Set.of(\"m1\"));\n+        checkHashes(\"m1\", Set.of(\"m2\", \"m4\"));\n+\n+        \/\/ target jmod is not specified\n+        \/\/ compute hash for all modules in the library\n+        runJmod(\"hash\",\n+                \"--module-path\", lib.toString(),\n+                \"--hash-modules\", \".*\");\n+        assertEquals(moduleHashes().keySet(), Set.of(\"m1\", \"m3\"));\n+        checkHashes(\"m1\", Set.of(\"m2\", \"m4\"));\n+        checkHashes(\"m3\", Set.of(\"m4\"));\n+    }\n+\n","filename":"test\/jdk\/tools\/jmod\/hashes\/HashesTest.java","additions":43,"deletions":1,"binary":false,"changes":44,"status":"modified"}]}