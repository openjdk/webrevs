{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -116,1 +116,1 @@\n-     * via {@linkplain Predicate} condition on the STDOUT\n+     * via {@linkplain Predicate} condition on the STDOUT\/STDERR\n@@ -121,1 +121,1 @@\n-     * @param linePredicate  The {@linkplain Predicate} to use on the STDOUT\n+     * @param linePredicate  The {@linkplain Predicate} to use on the STDOUT and STDERR.\n@@ -146,1 +146,1 @@\n-     * via {@linkplain Predicate} condition on the STDOUT and monitor the\n+     * via {@linkplain Predicate} condition on the STDOUT\/STDERR and monitor the\n@@ -153,1 +153,1 @@\n-     * @param linePredicate  The {@linkplain Predicate} to use on the STDOUT\n+     * @param linePredicate  The {@linkplain Predicate} to use on the STDOUT and STDERR.\n@@ -193,0 +193,2 @@\n+                \/\/ synchronization between stdout and stderr pumps\n+                private final Object sync = new Object();\n@@ -195,2 +197,4 @@\n-                    if (latch.getCount() > 0 && linePredicate.test(line)) {\n-                        latch.countDown();\n+                    synchronized (sync) {\n+                        if (latch.getCount() > 0 && linePredicate.test(line)) {\n+                            latch.countDown();\n+                        }\n@@ -241,2 +245,2 @@\n-     * via {@linkplain Predicate} condition on the STDOUT. The warm-up will\n-     * wait indefinitely.\n+     * via {@linkplain Predicate} condition on the STDOUT\/STDERR.\n+     * The warm-up will wait indefinitely.\n@@ -247,1 +251,1 @@\n-     * @param linePredicate  The {@linkplain Predicate} to use on the STDOUT\n+     * @param linePredicate  The {@linkplain Predicate} to use on the STDOUT and STDERR.\n","filename":"test\/lib\/jdk\/test\/lib\/process\/ProcessTools.java","additions":14,"deletions":10,"binary":false,"changes":24,"status":"modified"}]}