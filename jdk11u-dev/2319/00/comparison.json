{"files":[{"patch":"@@ -34,0 +34,12 @@\n+#include \"jni.h\"\n+\n+#ifdef SOLARIS\n+\/* Our redeclarations of the system functions must not have a less\n+ * restrictive linker scoping, so we have to declare them as JNIEXPORT\n+ * before including signal.h *\/\n+#include \"sys\/signal.h\"\n+JNIEXPORT void (*signal(int sig, void (*disp)(int)))(int);\n+JNIEXPORT void (*sigset(int sig, void (*disp)(int)))(int);\n+JNIEXPORT int sigaction(int sig, const struct sigaction *act, struct sigaction *oact);\n+#endif\n+\n@@ -316,1 +328,1 @@\n-void JVM_begin_signal_setting() {\n+JNIEXPORT void JVM_begin_signal_setting() {\n@@ -324,1 +336,1 @@\n-void JVM_end_signal_setting() {\n+JNIEXPORT void JVM_end_signal_setting() {\n@@ -332,1 +344,1 @@\n-struct sigaction *JVM_get_signal_action(int sig) {\n+JNIEXPORT struct sigaction *JVM_get_signal_action(int sig) {\n","filename":"src\/java.base\/unix\/native\/libjsig\/jsig.c","additions":15,"deletions":3,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -48,1 +48,0 @@\n-        String os_arch = Platform.getOsArch();\n@@ -53,4 +52,1 @@\n-            libjsig = jdk_path + \"\/jre\/lib\/libjsig.dylib\"; \/\/ jdk location\n-            if (!(new File(libjsig).exists())) {\n-                libjsig = jdk_path + \"\/lib\/libjsig.dylib\"; \/\/ jre location\n-            }\n+            libjsig = jdk_path + \"\/lib\/libjsig.dylib\"; \/\/ jre location\n@@ -59,4 +55,1 @@\n-            libjsig = jdk_path + \"\/jre\/lib\/\" + os_arch + \"\/libjsig.so\"; \/\/ jdk location\n-            if (!(new File(libjsig).exists())) {\n-                libjsig = jdk_path + \"\/lib\/\" + os_arch + \"\/libjsig.so\"; \/\/ jre location\n-            }\n+            libjsig = jdk_path + \"\/lib\/libjsig.so\"; \/\/ jre location\n@@ -66,1 +59,0 @@\n-        System.out.println(\"osArch: \" + os_arch);\n@@ -70,1 +62,1 @@\n-            throw new jtreg.SkippedException(\"File \" + libjsig + \" not found\");\n+            throw new RuntimeException(\"File libjsig not found, path: \" + libjsig);\n","filename":"test\/hotspot\/jtreg\/runtime\/XCheckJniJsig\/XCheckJSig.java","additions":3,"deletions":11,"binary":false,"changes":14,"status":"modified"}]}