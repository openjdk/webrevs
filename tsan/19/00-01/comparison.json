{"files":[{"patch":"@@ -158,1 +158,0 @@\n-\n","filename":"src\/hotspot\/share\/gc\/shared\/weakProcessor.inline.hpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -268,1 +268,1 @@\n-  assert(_weak_oop_storage != NULL, \"sanity\");\n+  assert(_weak_oop_storage != nullptr, \"sanity\");\n@@ -286,3 +286,2 @@\n-  if (_oop_map == nullptr) {\n-    return;\n-  }\n+  assert(_oop_map != nullptr, \"must be\");\n+  assert(SafepointSynchronize::is_at_safepoint(), \"must be\");\n@@ -316,0 +315,3 @@\n+    \/\/ Source and target ranges overlap, the moves need to be ordered to prevent\n+    \/\/ overwriting. Overall, this can take N^2 steps if only one object can be\n+    \/\/ moved during the array traversal.\n","filename":"src\/hotspot\/share\/tsan\/tsanOopMap.cpp","additions":6,"deletions":4,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -29,0 +29,2 @@\n+#include \"tsan\/tsanOopMapTable.hpp\"\n+\n@@ -32,16 +34,0 @@\n-namespace TsanOopMapImpl {\n-\n-  struct PendingMove {\n-    char *source_begin() const { return source_address; }\n-    char *source_end() const { return source_address + n_bytes; }\n-    char *target_begin() const { return target_address; }\n-    char *target_end() const { return target_address + n_bytes; }\n-    char *source_address;\n-    char *target_address;\n-    size_t n_bytes;  \/\/ number of bytes being moved\n-  };\n-\n-}  \/\/ namespace TsanOopMapImpl\n-\n-#include \"tsan\/tsanOopMapTable.hpp\"\n-\n","filename":"src\/hotspot\/share\/tsan\/tsanOopMap.hpp","additions":2,"deletions":16,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -35,0 +35,14 @@\n+namespace TsanOopMapImpl {\n+\n+  struct PendingMove {\n+    char *source_begin() const { return source_address; }\n+    char *source_end() const { return source_address + n_bytes; }\n+    char *target_begin() const { return target_address; }\n+    char *target_end() const { return target_address + n_bytes; }\n+    char *source_address;\n+    char *target_address;\n+    size_t n_bytes;  \/\/ number of bytes being moved\n+  };\n+\n+}  \/\/ namespace TsanOopMapImpl\n+\n","filename":"src\/hotspot\/share\/tsan\/tsanOopMapTable.hpp","additions":14,"deletions":0,"binary":false,"changes":14,"status":"modified"}]}