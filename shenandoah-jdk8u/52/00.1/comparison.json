{"files":[{"patch":"@@ -2,1 +2,1 @@\n-project=jdk8u\n+project=shenandoah\n@@ -4,1 +4,1 @@\n-version=openjdk8u392\n+version=shenandoah8u392\n@@ -10,1 +10,1 @@\n-tags=(?:jdk-(?:[1-9]([0-9]*)(?:\\.(?:0|[1-9][0-9]*)){0,4})(?:\\+(?:(?:[0-9]+))|(?:-ga)))|(?:jdk[4-9](?:u\\d{1,3})?-(?:(?:b\\d{2,3})|(?:ga)))|(?:hs\\d\\d(?:\\.\\d{1,2})?-b\\d\\d)\n+tags=(?:jdk-(?:[1-9]([0-9]*)(?:\\.(?:0|[1-9][0-9]*)){0,4})(?:\\+(?:(?:[0-9]+))|(?:-ga)))|(?:jdk[4-9](?:u\\d{1,3})?-(?:(?:b\\d{2,3})|(?:ga)))|(?:hs\\d\\d(?:\\.\\d{1,2})?-b\\d\\d)|(?:aarch64-shenandoah-jdk[4-9](?:u\\d{1,3})?-(?:b\\d{2,3}))|(?:shenandoah-jdk[4-9](?:u\\d{1,3})?-(?:b\\d{2,3}))|(?:shenandoah[4-9](?:u\\d{1,3})?-(?:(?:b\\d{2,3})|(?:ga)))\n@@ -21,1 +21,1 @@\n-message=Merge\n+message=Merge.*\n@@ -24,1 +24,1 @@\n-reviewers=1\n+committers=1\n","filename":".jcheck\/conf","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -724,1 +724,1 @@\n-  if (UseG1GC && string != NULL) {\n+  if ((UseG1GC || (UseShenandoahGC && ShenandoahSATBBarrier)) && string != NULL) {\n@@ -929,0 +929,22 @@\n+void StringTable::possibly_parallel_oops_do_shenandoah(OopClosure* f) {\n+  const int limit = the_table()->table_size();\n+\n+  \/\/ ClaimChunkSize is too small for processing a String table during the pause\n+  \/\/ efficiently: the atomic add costs dominate on many reasonable string tables.\n+  \/\/ Recast the chunk size to give each GC worker about 10 chunks.\n+  assert(UseShenandoahGC, \"Only for Shenandoah\");\n+  const int chunk_size = MAX2<int>(ClaimChunkSize, limit \/ (ParallelGCThreads * 10));\n+\n+  for (;;) {\n+    \/\/ Grab next set of buckets to scan\n+    int start_idx = Atomic::add(chunk_size, &_parallel_claimed_idx) - chunk_size;\n+    if (start_idx >= limit) {\n+      \/\/ End of table\n+      break;\n+    }\n+\n+    int end_idx = MIN2(limit, start_idx + chunk_size);\n+    buckets_oops_do(f, start_idx, end_idx);\n+  }\n+}\n+\n","filename":"hotspot\/src\/share\/vm\/classfile\/symbolTable.cpp","additions":23,"deletions":1,"binary":false,"changes":24,"status":"modified"}]}