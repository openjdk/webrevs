{"files":[{"patch":"@@ -2,1 +2,1 @@\n-project=jdk8u\n+project=shenandoah\n@@ -4,1 +4,1 @@\n-version=openjdk8u402\n+version=shenandoah8u402\n@@ -10,1 +10,1 @@\n-tags=(?:jdk-(?:[1-9]([0-9]*)(?:\\.(?:0|[1-9][0-9]*)){0,4})(?:\\+(?:(?:[0-9]+))|(?:-ga)))|(?:jdk[4-9](?:u\\d{1,3})?-(?:(?:b\\d{2,3})|(?:ga)))|(?:hs\\d\\d(?:\\.\\d{1,2})?-b\\d\\d)\n+tags=(?:jdk-(?:[1-9]([0-9]*)(?:\\.(?:0|[1-9][0-9]*)){0,4})(?:\\+(?:(?:[0-9]+))|(?:-ga)))|(?:jdk[4-9](?:u\\d{1,3})?-(?:(?:b\\d{2,3})|(?:ga)))|(?:hs\\d\\d(?:\\.\\d{1,2})?-b\\d\\d)|(?:aarch64-shenandoah-jdk[4-9](?:u\\d{1,3})?-(?:b\\d{2,3}))|(?:shenandoah-jdk[4-9](?:u\\d{1,3})?-(?:b\\d{2,3}))|(?:shenandoah[4-9](?:u\\d{1,3})?-(?:(?:b\\d{2,3})|(?:ga)))\n@@ -21,1 +21,1 @@\n-message=Merge\n+message=Merge.*\n@@ -24,1 +24,1 @@\n-reviewers=1\n+committers=1\n","filename":".jcheck\/conf","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -36,0 +36,2 @@\n+#include \"gc_implementation\/shenandoah\/shenandoahHeap.hpp\"\n+#include \"gc_implementation\/shenandoah\/c1\/shenandoahBarrierSetC1.hpp\"\n@@ -1233,0 +1235,9 @@\n+#if INCLUDE_ALL_GCS\n+  if (UseShenandoahGC) {\n+    LIR_Opr tmp = new_register(T_OBJECT);\n+    LIR_Opr addr = ShenandoahBarrierSet::barrier_set()->bsc1()->resolve_address(this, referent_field_adr, T_OBJECT, NULL);\n+    __ load(addr->as_address_ptr(), tmp, info);\n+    tmp = ShenandoahBarrierSet::barrier_set()->bsc1()->load_reference_barrier(this, tmp, addr);\n+    __ move(tmp, result);\n+  } else\n+#endif\n@@ -1444,0 +1455,5 @@\n+    case BarrierSet::ShenandoahBarrierSet:\n+      if (ShenandoahSATBBarrier) {\n+        G1SATBCardTableModRef_pre_barrier(addr_opr, pre_val, do_load, patch, info);\n+      }\n+      break;\n@@ -1466,0 +1482,3 @@\n+    case BarrierSet::ShenandoahBarrierSet:\n+      ShenandoahBarrierSetC1::bsc1()->storeval_barrier(this, new_val, NULL, false);\n+      break;\n@@ -1832,0 +1851,17 @@\n+#if INCLUDE_ALL_GCS\n+  if (UseShenandoahGC && (field_type == T_OBJECT || field_type == T_ARRAY)) {\n+    LIR_Opr tmp = new_register(T_OBJECT);\n+    LIR_Opr addr = ShenandoahBarrierSet::barrier_set()->bsc1()->resolve_address(this, address, field_type, needs_patching ? info : NULL);\n+    if (is_volatile) {\n+      volatile_field_load(addr->as_address_ptr(), tmp, info);\n+    } else {\n+      __ load(addr->as_address_ptr(), tmp, info);\n+    }\n+    if (is_volatile && os::is_MP()) {\n+      __ membar_acquire();\n+    }\n+    tmp = ShenandoahBarrierSet::barrier_set()->bsc1()->load_reference_barrier(this, tmp, addr);\n+    __ move(tmp, reg);\n+  } else\n+#endif\n+  {\n@@ -1838,1 +1874,0 @@\n-\n@@ -1842,0 +1877,1 @@\n+  }\n@@ -1958,1 +1994,13 @@\n-  __ move(array_addr, rlock_result(x, x->elt_type()), null_check_info);\n+  LIR_Opr result = rlock_result(x, x->elt_type());\n+\n+#if INCLUDE_ALL_GCS\n+  if (UseShenandoahGC && (x->elt_type() == T_OBJECT || x->elt_type() == T_ARRAY)) {\n+    LIR_Opr tmp = new_register(T_OBJECT);\n+    LIR_Opr addr = ShenandoahBarrierSet::barrier_set()->bsc1()->resolve_address(this, array_addr, x->elt_type(), NULL);\n+    __ move(addr->as_address_ptr(), tmp, null_check_info);\n+    tmp = ShenandoahBarrierSet::barrier_set()->bsc1()->load_reference_barrier(this, tmp, addr);\n+    __ move(tmp, result);\n+  } else\n+#endif\n+  __ move(array_addr, result, null_check_info);\n+\n@@ -2247,0 +2295,8 @@\n+#if INCLUDE_ALL_GCS\n+  if (UseShenandoahGC && (type == T_OBJECT || type == T_ARRAY)) {\n+    LIR_Opr tmp = new_register(T_OBJECT);\n+    get_Object_unsafe(tmp, src.result(), off.result(), type, x->is_volatile());\n+    tmp = ShenandoahBarrierSet::barrier_set()->bsc1()->load_reference_barrier(this, tmp, LIR_OprFact::addressConst(0));\n+    __ move(tmp, value);\n+  } else\n+#endif\n@@ -2265,1 +2321,1 @@\n-  if (UseG1GC && type == T_OBJECT) {\n+  if ((UseShenandoahGC || UseG1GC) && type == T_OBJECT) {\n","filename":"hotspot\/src\/share\/vm\/c1\/c1_LIRGenerator.cpp","additions":59,"deletions":3,"binary":false,"changes":62,"status":"modified"}]}