{"files":[{"patch":"@@ -2406,1 +2406,1 @@\n-               as_Register($mem$$base), $mem$$index, $mem$$scale, $mem$$disp);\n+               as_Register($mem$$base), $mem$$index, $mem$$scale, $mem$$disp, 2);\n@@ -2414,1 +2414,1 @@\n-               as_Register($mem$$base), $mem$$index, $mem$$scale, $mem$$disp);\n+               as_Register($mem$$base), $mem$$index, $mem$$scale, $mem$$disp, 2);\n@@ -2422,1 +2422,1 @@\n-               as_Register($mem$$base), $mem$$index, $mem$$scale, $mem$$disp);\n+               as_Register($mem$$base), $mem$$index, $mem$$scale, $mem$$disp, 2);\n@@ -2430,1 +2430,1 @@\n-               as_Register($mem$$base), $mem$$index, $mem$$scale, $mem$$disp);\n+               as_Register($mem$$base), $mem$$index, $mem$$scale, $mem$$disp, 2);\n@@ -2438,1 +2438,1 @@\n-               as_Register($mem$$base), $mem$$index, $mem$$scale, $mem$$disp);\n+               as_Register($mem$$base), $mem$$index, $mem$$scale, $mem$$disp, 4);\n@@ -2446,1 +2446,1 @@\n-               as_Register($mem$$base), $mem$$index, $mem$$scale, $mem$$disp);\n+               as_Register($mem$$base), $mem$$index, $mem$$scale, $mem$$disp, 4);\n@@ -2454,1 +2454,1 @@\n-               as_Register($mem$$base), $mem$$index, $mem$$scale, $mem$$disp);\n+               as_Register($mem$$base), $mem$$index, $mem$$scale, $mem$$disp, 4);\n@@ -2462,1 +2462,1 @@\n-               as_Register($mem$$base), $mem$$index, $mem$$scale, $mem$$disp);\n+               as_Register($mem$$base), $mem$$index, $mem$$scale, $mem$$disp, 8);\n","filename":"hotspot\/src\/cpu\/aarch64\/vm\/aarch64.ad","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -512,25 +512,0 @@\n-static bool has_run_finalizers_on_exit = false;\n-\n-void Universe::run_finalizers_on_exit() {\n-  if (has_run_finalizers_on_exit) return;\n-  has_run_finalizers_on_exit = true;\n-\n-  \/\/ Called on VM exit. This ought to be run in a separate thread.\n-  if (TraceReferenceGC) tty->print_cr(\"Callback to run finalizers on exit\");\n-  {\n-    PRESERVE_EXCEPTION_MARK;\n-    KlassHandle finalizer_klass(THREAD, SystemDictionary::Finalizer_klass());\n-    JavaValue result(T_VOID);\n-    JavaCalls::call_static(\n-      &result,\n-      finalizer_klass,\n-      vmSymbols::run_finalizers_on_exit_name(),\n-      vmSymbols::void_method_signature(),\n-      THREAD\n-    );\n-    \/\/ Ignore any pending exceptions\n-    CLEAR_PENDING_EXCEPTION;\n-  }\n-}\n-\n-\n","filename":"hotspot\/src\/share\/vm\/memory\/universe.cpp","additions":1,"deletions":26,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2020, Oracle and\/or its affiliates. All rights reserved\n+ * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -439,10 +439,0 @@\n-JVM_ENTRY_NO_ENV(void, JVM_Exit(jint code))\n-  if (vm_created != 0 && (code == 0)) {\n-    \/\/ The VM is about to exit. We call back into Java to check whether finalizers should be run\n-    Universe::run_finalizers_on_exit();\n-  }\n-  before_exit(thread);\n-  vm_exit(code);\n-JVM_END\n-\n-\n","filename":"hotspot\/src\/share\/vm\/prims\/jvm.cpp","additions":1,"deletions":11,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -4003,4 +4003,3 @@\n-    \/\/ and finalizers (if runFinalizersOnExit is set) won't be run.\n-    \/\/ Note that if a shutdown hook was registered or runFinalizersOnExit\n-    \/\/ was called, the Shutdown class would have already been loaded\n-    \/\/ (Runtime.addShutdownHook and runFinalizersOnExit will load it).\n+    \/\/ won't be run. Note that if a shutdown hook was registered,\n+    \/\/ the Shutdown class would have already been loaded\n+    \/\/ (Runtime.addShutdownHook will load it).\n@@ -4030,1 +4029,1 @@\n-\/\/        shutdown hooks, run finalizers if finalization-on-exit\n+\/\/        shutdown hooks\n@@ -4087,9 +4086,2 @@\n-  if (JDK_Version::is_jdk12x_version()) {\n-    \/\/ We are the last thread running, so check if finalizers should be run.\n-    \/\/ For 1.3 or later this is done in thread->invoke_shutdown_hooks()\n-    HandleMark rm(thread);\n-    Universe::run_finalizers_on_exit();\n-  } else {\n-    \/\/ run Java level shutdown hooks\n-    thread->invoke_shutdown_hooks();\n-  }\n+  \/\/ run Java level shutdown hooks\n+  thread->invoke_shutdown_hooks();\n","filename":"hotspot\/src\/share\/vm\/runtime\/thread.cpp","additions":7,"deletions":15,"binary":false,"changes":22,"status":"modified"}]}